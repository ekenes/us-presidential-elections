import{ft as L,a1 as E,fu as q,cc as x}from"./index-GOO0DjDp.js";import{P as S,_ as H,g as A,c as D,u as V,H as l,A as w}from"./vec32-Bq8LfEfc.js";import{e as d}from"./mat3f64-q3fE-ZOt.js";import{e as y}from"./mat4f64-CSKppSlJ.js";import{e as Q}from"./quatf64-aQ5IuZRd.js";import{n as j}from"./vec2f64-DA6GkJuH.js";class c{constructor(e){this._create=e,this._items=new Array,this._itemsPtr=0}get(){return this._itemsPtr===0&&L(()=>this._reset()),this._itemsPtr>=this._items.length&&this._items.push(this._create()),this._items[this._itemsPtr++]}_reset(){const e=2*this._itemsPtr;this._items.length>e&&(this._items.length=e),this._itemsPtr=0}static createVec2f64(){return new c(j)}static createVec3f64(){return new c(E)}static createVec4f64(){return new c(q)}static createMat3f64(){return new c(d)}static createMat4f64(){return new c(y)}static createQuatf64(){return new c(Q)}get test(){}}c.createVec2f64();const m=c.createVec3f64(),z=c.createVec4f64();c.createMat3f64();const st=c.createMat4f64(),It=c.createQuatf64();function X(t=_){return[t[0],t[1],t[2],t[3]]}function ct(t=_[0],e=_[1],r=_[2],n=_[3]){return v(t,e,r,n,z.get())}function K(t,e){return v(e[0],e[1],e[2],e[3],t)}function at(t){return t}function v(t,e,r,n,i=X()){return i[0]=t,i[1]=e,i[2]=r,i[3]=n,i}function W(t,e,r){const n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=Math.abs(n-1)>1e-5&&n>1e-12?1/Math.sqrt(n):1;return r[0]=e[0]*i,r[1]=e[1]*i,r[2]=e[2]*i,r[3]=-(r[0]*t[0]+r[1]*t[1]+r[2]*t[2]),r}function Y(t,e,r,n=X()){const i=r[0]-e[0],u=r[1]-e[1],s=r[2]-e[2],I=t[0]-e[0],p=t[1]-e[1],R=t[2]-e[2],O=u*R-s*p,g=s*I-i*R,P=i*p-u*I,U=O*O+g*g+P*P,C=Math.abs(U-1)>1e-5&&U>1e-12?1/Math.sqrt(U):1;return n[0]=O*C,n[1]=g*C,n[2]=P*C,n[3]=-(n[0]*t[0]+n[1]*t[1]+n[2]*t[2]),n}function Z(t,e,r,n=0,i=Math.floor(r*(1/3)),u=Math.floor(r*(2/3))){if(r<3)return!1;e(T,n);let s=i,I=!1;for(;s<r-1&&!I;)e(f,s),s++,I=!l(T,f);if(!I)return!1;for(s=Math.max(s,u),I=!1;s<r&&!I;)e(N,s),s++,D(h,T,f),w(h,h),D(M,f,N),w(M,M),I=!l(T,N)&&!l(f,N)&&Math.abs(S(h,M))<k;return I?(Y(T,f,N,t),!0):(n!==0||i!==1||u!==2)&&Z(t,e,r,0,1,2)}const k=.99619469809,T=E(),f=E(),N=E(),h=E(),M=E();function ot(t,e,r){return e!==t&&K(t,e),t[3]=-S(t,r),t}function ut(t,e,r,n){return H(N,e,t),W(r,N,n)}function Nt(t,e,r){return e!=null&&F($(t,e.origin,e.direction,G,r))}function ft(t,e,r){return F($(t,e.origin,e.vector,o.NONE,r))}function Et(t,e,r){return F($(t,e.origin,e.vector,o.CLAMP,r))}function Tt(t,e){return b(t,e)>=0}function _t(t,e,r){const n=A(m.get(),t,-t[3]),i=B(t,D(m.get(),e,n),m.get());return V(r,i,n),r}function B(t,e,r){const n=A(m.get(),t,S(t,e));return D(r,e,n),r}function b(t,e){return S(t,e)+t[3]}var a;function F(t){return t===a.INTERSECTS_INSIDE_OUT||t===a.INTERSECTS_OUTSIDE_IN}function $(t,e,r,n,i){const u=S(t,r),s=b(t,e);if(u===0)return s>=0?a.INSIDE:a.OUTSIDE;let I=-s/u;return n&o.CLAMP&&(I=x(I,0,1)),!(n&o.INFINITE_MIN)&&I<0||!(n&o.INFINITE_MAX)&&I>1?s>=0?a.INSIDE:a.OUTSIDE:(V(i,e,A(i,r,I)),s>=0?a.INTERSECTS_INSIDE_OUT:a.INTERSECTS_OUTSIDE_IN)}(function(t){t[t.INTERSECTS_INSIDE_OUT=0]="INTERSECTS_INSIDE_OUT",t[t.INTERSECTS_OUTSIDE_IN=1]="INTERSECTS_OUTSIDE_IN",t[t.INSIDE=2]="INSIDE",t[t.OUTSIDE=3]="OUTSIDE"})(a||(a={}));const _=[0,0,1,0];var o;(function(t){t[t.NONE=0]="NONE",t[t.CLAMP=1]="CLAMP",t[t.INFINITE_MIN=4]="INFINITE_MIN",t[t.INFINITE_MAX=8]="INFINITE_MAX"})(o||(o={}));o.INFINITE_MIN|o.INFINITE_MAX;const G=o.INFINITE_MAX;export{ct as D,_t as H,X as M,at as O,ut as P,v as U,m as c,st as f,K as h,It as o,Y as p,ft as q,z as r,Z as v,Et as w,Nt as x,ot as y,Tt as z};
