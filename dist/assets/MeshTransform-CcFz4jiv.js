import{c as W,cd as H,U as z,fa as C,fb as D,fc as G,eq as E,fd as J,cW as O,M as a,N as u,P as K,a1 as L,fe as Q,au as R,cb as f,ff as V,cq as X,ec as Y,O as Z}from"./index-GOO0DjDp.js";import{c as _,p as tt}from"./infoFor3D-CxdEiWhp.js";import{e as N}from"./mat4f64-CSKppSlJ.js";import{v as S,b as m,x as rt}from"./quat-DWfuhTov.js";import{e as A}from"./quatf64-aQ5IuZRd.js";import{s as st}from"./vec32-Bq8LfEfc.js";class F{constructor(r,s,e){this.assetName=r,this.assetMimeType=s,this.parts=e}equals(r){return this===r||this.assetName===r.assetName&&this.assetMimeType===r.assetMimeType&&W(this.parts,r.parts,(s,e)=>s.equals(e))}isOnService(r){return this.parts.every(s=>s.isOnService(r))}makeHash(){let r="";for(const s of this.parts)r+=s.partHash;return r}async toBlob(r){const{parts:s}=this;if(s.length===1)return s[0].toBlob(r);const e=await Promise.all(s.map(c=>c.toBlob(r)));return H(r),new Blob(e)}}class pt{constructor(r,s){this.partUrl=r,this.partHash=s}equals(r){return this===r||this.partUrl===r.partUrl&&this.partHash===r.partHash}isOnService(r){return this.partUrl.startsWith(`${r.path}/assets/`)}async toBlob(r){const{data:s}=await z(this.partUrl,{responseType:"blob"});return H(r),s}}function ht(t){return et(t==null?void 0:t.source)}function x(t){return Array.isArray(t)?t.every(r=>r instanceof F):!1}const v=/^(model\/gltf\+json)|(model\/gltf-binary)$/,M=/\.(gltf|glb)/i;function et(t){return t?Array.isArray(t)?t.some(d):d(t):!1}function d(t){if(t instanceof File){const{type:r,name:s}=t;return v.test(r)||M.test(s)}return v.test(t.assetMimeType)||M.test(t.assetName)}function mt(t,r){if(!t)return!1;const{source:s}=t;return nt(s,r)}function yt(t,r){if(t===r)return!0;const{source:s}=t,{source:e}=r;if(s===e)return!0;if(x(s)&&x(e)){if(s.length!==e.length)return!1;const c=(i,g)=>i.assetName<g.assetName?-1:i.assetName>g.assetName?1:0,b=[...s].sort(c),I=[...e].sort(c);for(let i=0;i<b.length;++i)if(!b[i].equals(I[i]))return!1;return!0}return!1}function nt(t,r){if(Array.isArray(t)){const s=t;return s.length>0&&s.every(e=>w(e,r))}return w(t,r)}function w(t,r){return t instanceof F&&t.isOnService(r)}function $t(t,r){return t instanceof File?_(t,r):tt(t.assetMimeType,t.assetName,r)}function At(t){return Array.isArray(t)?t:[t]}function bt(t){return!!t.original}function o(t=k){return[t[0],t[1],t[2],t[3]]}function h(t,r,s=o()){return st(s,t),s[3]=r,s}function gt(t,r=o()){const s=J(l,t);return P(r,O(S(r,s))),r}function q(t,r,s=o()){return m(l,t,y(t)),m(U,r,y(r)),rt(l,U,l),P(s,O(S(s,l)))}function Nt(t,r,s,e=o()){return h(C,t,p),h(D,r,j),h(G,s,B),q(p,j,p),q(p,B,e),e}function xt(t){return t}function at(t){return t[3]}function y(t){return E(t[3])}function P(t,r){return t[3]=r,t}const k=[0,0,1,0],l=A(),U=A();o();const p=o(),j=o(),B=o();var $;let n=$=class extends K{constructor(t){super(t),this.translation=L(),this.rotationAxis=Q(k),this.rotationAngle=0,this.scale=R(1,1,1)}get rotation(){return h(this.rotationAxis,this.rotationAngle)}set rotation(t){this.rotationAxis=f(t),this.rotationAngle=at(t)}get localMatrix(){const t=N();return m(T,this.rotation,y(this.rotation)),V(t,T,this.translation,this.scale),t}get localMatrixInverse(){return X(N(),this.localMatrix)}equals(t){return this===t||t!=null&&Y(this.localMatrix,t.localMatrix)}clone(){const t={translation:f(this.translation),rotationAxis:f(this.rotationAxis),rotationAngle:this.rotationAngle,scale:f(this.scale)};return new $(t)}};a([u({type:[Number],nonNullable:!0,json:{write:!0}})],n.prototype,"translation",void 0),a([u({type:[Number],nonNullable:!0,json:{write:!0}})],n.prototype,"rotationAxis",void 0),a([u({type:Number,nonNullable:!0,json:{write:!0}})],n.prototype,"rotationAngle",void 0),a([u({type:[Number],nonNullable:!0,json:{write:!0}})],n.prototype,"scale",void 0),a([u()],n.prototype,"rotation",null),a([u()],n.prototype,"localMatrix",null),a([u()],n.prototype,"localMatrixInverse",null),n=$=a([Z("esri.geometry.support.MeshTransform")],n);const T=A(),vt=n;export{bt as A,vt as N,F as a,$t as b,At as c,Nt as d,yt as h,pt as i,o as j,gt as k,mt as m,ht as o,xt as w,y as z};
