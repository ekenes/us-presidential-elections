const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/pe-wasm-CazZvah8.js","assets/_commonjsHelpers-DCkdB7M8.js","assets/arcadeUtils-e4Pa2B2w.js","assets/ImmutableArray-BPVd6ESQ.js","assets/number-CfyHDTOl.js","assets/featureConversionUtils-DVuAsAiD.js","assets/ElevationLayer-BTqYvFyM.js","assets/ArcGISCachedService-DF2rzVsC.js","assets/TileInfo-CboVzhc1.js","assets/TileInfoTilemapCache-BYu06Dhk.js","assets/TilemapCache-C7-3SBZU.js","assets/webStyleSymbolUtils-Dr1LS95c.js","assets/devEnvironmentUtils-CnNDiFMM.js","assets/portalLayers-C-JOs0aZ.js","assets/associatedFeatureServiceUtils-Bn5qNr4o.js","assets/lazyLayerLoader-CrwIAOU9.js","assets/arcgisLayers-DZsY2YJ1.js","assets/statsWorker-DyxlnDdY.js","assets/utils-Df1r85tI.js","assets/utils-B7VVuHU0.js","assets/ClassBreaksDefinition-C5pseFmV.js","assets/geometryEngineWorker-BiqU-FdE.js","assets/geometryEngineJSON-BwrklJA_.js","assets/geometryEngineBase-yFIvKOkM.js","assets/json-Wa8cmqdu.js","assets/CSVSourceWorker-eCRMQABd.js","assets/date-DLgTylpo.js","assets/FeatureStore-CR2i-r0s.js","assets/BoundsStore-DCDApa5p.js","assets/PooledRBush-CIyRTnDT.js","assets/quickselect-QQC62dOK.js","assets/QueryEngine-wVV_WW5n.js","assets/WhereClause-Dm4_COZf.js","assets/queryUtils-CtEpta27.js","assets/QueryEngineCapabilities-DjYb9CEb.js","assets/signal-B3LVGOxz.js","assets/optimizedFeatureQueryEngineAdapter-Cgpftyqs.js","assets/clientSideDefaults-BmMJD_BW.js","assets/capabilities-Y9lFlGVh.js","assets/EdgeProcessingWorker-D5XxXvwc.js","assets/InterleavedLayout-L8Xfk5Gl.js","assets/BufferView-Bc_fuGNr.js","assets/vec2-c1cMo5Hj.js","assets/vec32-Bq8LfEfc.js","assets/types-D0PSWh4d.js","assets/Util-DNwDveAw.js","assets/vec2f64-DA6GkJuH.js","assets/edgeProcessing-Bw45lSwJ.js","assets/deduplicate-C_q3JlNw.js","assets/Indices-DN196Ob9.js","assets/VertexAttribute-BdZWZuT1.js","assets/glUtil-BbWEMNPp.js","assets/enums-V7VQdXj3.js","assets/VertexElementDescriptor-BOD-G50G.js","assets/ElevationSamplerWorker-2MIahXaT.js","assets/MeshLocalVertexSpace-BqXq6JV3.js","assets/vertexSpaceConversion-cFBTnkaa.js","assets/mat3-C-OMcVdC.js","assets/mat3f64-q3fE-ZOt.js","assets/mat4f64-CSKppSlJ.js","assets/spatialReferenceEllipsoidUtils-CLmzFMqA.js","assets/computeTranslationToOriginAndRotation-C8WdtVmx.js","assets/projectPointToVector-DcIbqPS4.js","assets/meshVertexSpaceUtils-Dy_SZOm6.js","assets/vec3-BSXX4O64.js","assets/vec4-CkfdGPaO.js","assets/FeatureServiceSnappingSourceWorker-CX5m2310.js","assets/UpdatingHandles-BToYCQem.js","assets/GeoJSONSourceWorker-BnzTq9M2.js","assets/geojson-B-BlEEPQ.js","assets/sourceUtils-BoRLX606.js","assets/MemorySourceWorker-DbeNgIJQ.js","assets/objectIdUtils-4dd1rf9p.js","assets/PBFDecoderWorker-SbgTEtQx.js","assets/FeaturePipelineWorker-DmBcXF2z.js","assets/TileKey--BXjV7L0.js","assets/QueueProcessor-CMlWHUXT.js","assets/GeometryUtils-D9Z2K2oT.js","assets/Texture-BSCxK7YP.js","assets/vec2f32-BbH2jxlN.js","assets/TurboLine-D2maCSm_.js","assets/earcut-Lltz9D9k.js","assets/BindType-BmZEZMMh.js","assets/ogcFeatureUtils-BJixStu6.js","assets/createConnection-8mDVNx3J.js","assets/PointCloudWorker-DTdaKsDw.js","assets/quat-DWfuhTov.js","assets/quatf64-aQ5IuZRd.js","assets/vec3f32-nZdmKIgz.js","assets/PointCloudUniqueValueRenderer-BQ-IABfJ.js","assets/I3SBinaryReader-C4fNUnAO.js","assets/orientedBoundingBox-DhJ8Hffd.js","assets/plane-m241_QIk.js","assets/RasterWorker-C1CBJtq4.js","assets/dataUtils-CH8hAHuY.js","assets/PolynomialTransform-Dq_EdQhT.js","assets/SceneLayerSnappingSourceWorker-DVhGHy8N.js","assets/lineSegment-BdDnshna.js","assets/sphere-Bhl1G8Gh.js","assets/Octree-B11r88T2.js","assets/SceneLayerWorker-kpfpLixu.js","assets/I3SUtil-C5zKiBxY.js","assets/floatRGBA-DzlWjl5d.js","assets/NormalAttribute.glsl-BXHrFRZd.js","assets/WFSSourceWorker-cMrZ68Br.js","assets/wfsUtils-DrZn950P.js","assets/xmlUtils-CtUoQO7q.js","assets/WorkerTileHandler-7rIsjkn7.js","assets/StyleRepository-Bbt_CBxl.js","assets/Feature3DPipelineWorker-B0Cu29aS.js","assets/RealisticTree.glsl-Bw-C5CvV.js","assets/basicInterfaces-CZwQPxTp.js","assets/boundedPlane-D77R_pSx.js","assets/IntersectorInterfaces-dI_rFEZm.js","assets/editingSupport-r7-urApN.js","assets/infoFor3D-CxdEiWhp.js","assets/layersLoader-C23WMPhZ.js","assets/layersCreator-tA0kWKQ8.js","assets/jsonContext-CbvIEB6E.js","assets/featureLayerUtils-BrcEjFXU.js","assets/originUtils-D69mHv66.js","assets/multiOriginJSONSupportUtils-C0wm8_Yw.js","assets/utils-CYM9l9Oc.js","assets/saveUtils-CGbtHkHp.js","assets/FeatureLayerSource-DhBJYN8V.js","assets/MeshTransform-CcFz4jiv.js","assets/QueryTask-CT2eqm7b.js","assets/executeForIds-DRS4q9Ca.js","assets/BinsQuery-D4xbd1hK.js","assets/calcite-icon-z5p-Wr8S.js","assets/icon-DH0tJGGe.js","assets/dom-BO-EZOYs.js","assets/observers-VmI7gwQ_.js","assets/chartUtilsAm5-BwdWpuer.js","assets/Theme-CrIhH3t9.js","assets/Tooltip-3Hm9EIyv.js","assets/DefaultTheme-BboXFj7f.js","assets/chartCommon-CCA65vag.js","assets/Button-Dc804nC3.js","assets/ColorSet-D-RZF8hf.js","assets/pieChart-_rh-VWTv.js","assets/Tick-CPYEecPa.js","assets/xyChart-C3qE8iws.js","assets/arcade-D-OWhQSS.js","assets/calcite-loader-BM0UX4gd.js","assets/loader-_yVCCnc8.js","assets/guid-BxSjQh8J.js","assets/locale-BZYmjd7-.js","assets/calcite-list-DjA-Chsk.js","assets/interactive-DS9fOdH4.js","assets/resources4-DXHY1U7R.js","assets/utils3-DnhSXKwX.js","assets/loadable-VYNJ2-MK.js","assets/t9n-Ahisjb6s.js","assets/debounce-BOqmhDXu.js","assets/input2-Bp4zxjtn.js","assets/form-CPZOkem5.js","assets/label-7UCtTlzu.js","assets/component-6CIDVndn.js","assets/scrim-CIDbCh_j.js","assets/calcite-list-item-plo1rlZi.js","assets/action-DM9I1qaU.js","assets/calcite-notice-DntFkz7C.js","assets/conditionalSlot-CD18F6gs.js","assets/openCloseComponent-D4kxYkZl.js","assets/calcite-chip-Dc85UrsC.js","assets/calcite-input-CMcftKHH.js","assets/calcite-tooltip-DUUuAU1S.js","assets/FloatingArrow-BVqXtJok.js","assets/calcite-action-kWOdnWuJ.js","assets/calcite-action-bar-B-Oiwcmw.js","assets/action-group-D3BUljRU.js","assets/action-menu-D83z0ChW.js","assets/calcite-action-group-BFnE1IxA.js","assets/calcite-flow-item-DbxiwvRZ.js","assets/panel-CEH8lw7I.js","assets/calcite-button-BIhUpE-6.js","assets/calcite-flow-CF8uLjCp.js","assets/calcite-list-item-group-BFPtvMAW.js"])))=>i.map(i=>d[i]);
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(s){if(s.ep)return;s.ep=!0;const n=r(s);fetch(s.href,n)}})();const sj="modulepreload",nj=function(e){return"/us-presidential-elections/dist/"+e},U2={},j=function(t,r,i){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(r.map(c=>{if(c=nj(c),c in U2)return;U2[c]=!0;const p=c.endsWith(".css"),h=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const f=document.createElement("link");if(f.rel=p?"stylesheet":sj,p||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),p)return new Promise((y,m)=>{f.addEventListener("load",y),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function n(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&n(l.reason);return t().catch(n)})};function a(e,t,r,i){var s,n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,r):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,r,i);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(o=(n<3?s(o):n>3?s(t,r,o):s(t,r))||o);return n>3&&o&&Object.defineProperty(t,r,o),o}function Noe(e,t){return function(r,i){t(r,i,e)}}function Roe(e,t,r,i){function s(n){return n instanceof r?n:new r(function(o){o(n)})}return new(r||(r=Promise))(function(n,o){function l(h){try{p(i.next(h))}catch(f){o(f)}}function c(h){try{p(i.throw(h))}catch(f){o(f)}}function p(h){h.done?n(h.value):s(h.value).then(l,c)}p((i=i.apply(e,[])).next())})}let bo;function k(e){return typeof bo[e]=="function"?bo[e]=bo[e](globalThis):bo[e]}var yA,mA,gA,vA;bo=(yA=globalThis.dojoConfig)!=null&&yA.has||(mA=globalThis.esriConfig)!=null&&mA.has?{...(gA=globalThis.dojoConfig)==null?void 0:gA.has,...(vA=globalThis.esriConfig)==null?void 0:vA.has}:{},k.add=(e,t,r,i)=>{(i||bo[e]===void 0)&&(bo[e]=t),r&&k(e)},k.cache=bo,k.add("big-integer-warning-enabled",!0),k.add("esri-deprecation-warnings",!0),k.add("esri-tests-disable-screenshots",!1),k.add("esri-tests-use-full-window",!1),k.add("esri-tests-post-to-influx",!0),k.add("esri-cim-animations-enable-status","enabled"),k.add("esri-cim-animations-spotlight",!1),k.add("esri-cim-animations-freeze-time",!1),k.add("enable-feature:multiple-highlights",!1),(()=>{var t;k.add("host-webworker",globalThis.WorkerGlobalScope!==void 0&&self instanceof globalThis.WorkerGlobalScope);const e=typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;if(k.add("host-browser",e),k.add("host-node",typeof globalThis.process=="object"&&((t=globalThis.process.versions)==null?void 0:t.node)&&globalThis.process.versions.v8),k.add("dom",e),k("host-browser")){const r=navigator,i=r.userAgent,s=r.appVersion,n=parseFloat(s);if(k.add("wp",parseFloat(i.split("Windows Phone")[1])||void 0),k.add("msapp",parseFloat(i.split("MSAppHost/")[1])||void 0),k.add("khtml",s.includes("Konqueror")?n:void 0),k.add("edge",parseFloat(i.split("Edge/")[1])||void 0),k.add("opr",parseFloat(i.split("OPR/")[1])||void 0),k.add("webkit",!k("wp")&&!k("edge")&&parseFloat(i.split("WebKit/")[1])||void 0),k.add("chrome",!k("edge")&&!k("opr")&&parseFloat(i.split("Chrome/")[1])||void 0),k.add("android",!k("wp")&&parseFloat(i.split("Android ")[1])||void 0),k.add("safari",!s.includes("Safari")||k("wp")||k("chrome")||k("android")||k("edge")||k("opr")?void 0:parseFloat(s.split("Version/")[1])),k.add("mac",s.includes("Macintosh")),!k("wp")&&/(iPhone|iPod|iPad)/.test(i)){const o=RegExp.$1.replace(/P/,"p"),l=/OS ([\d_]+)/.test(i)?RegExp.$1:"1",c=parseFloat(l.replace(/_/,".").replaceAll("_",""));k.add(o,c),k.add("ios",c)}k("webkit")||(!i.includes("Gecko")||k("wp")||k("khtml")||k("edge")||k.add("mozilla",n),k("mozilla")&&k.add("ff",parseFloat(i.split("Firefox/")[1]||i.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const e=navigator.userAgent,t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(e),r=/iPhone/i.test(e);t&&k.add("esri-mobile",t),r&&k.add("esri-iPhone",r),k.add("esri-geolocation",!!navigator.geolocation)}k.add("esri-wasm","WebAssembly"in globalThis),k.add("esri-performance-mode-frames-between-render",20),k.add("esri-force-performance-mode",!1),k.add("esri-shared-array-buffer",()=>{const e="SharedArrayBuffer"in globalThis,t=globalThis.crossOriginIsolated===!1;return e&&!t}),k.add("wasm-simd",()=>{const e=[0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11];return WebAssembly.validate(new Uint8Array(e))}),k.add("esri-atomics","Atomics"in globalThis),k.add("esri-workers","Worker"in globalThis),k.add("web-feat:cache","caches"in globalThis),k.add("esri-workers-arraybuffer-transfer",!k("safari")||Number(k("safari"))>=12),k.add("workers-pool-size",8),k.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),k.add("featurelayer-simplify-payload-size-factors",[1,1,4]),k.add("featurelayer-fast-triangulation-enabled",!0),k.add("featurelayer-animation-enabled",!0),k.add("featurelayer-snapshot-enabled",!0),k.add("featurelayer-snapshot-point-min-threshold",8e4),k.add("featurelayer-snapshot-point-max-threshold",4e5),k.add("featurelayer-snapshot-point-coverage",.1),k.add("featurelayer-query-max-depth",4),k.add("featurelayer-query-pausing-enabled",!1),k.add("featurelayer-advanced-symbols",!1),k.add("featurelayer-pbf",!0),k.add("featurelayer-pbf-statistics",!1),k.add("feature-layers-workers",!0),k.add("feature-polyline-generalization-factor",1),k.add("mapview-transitions-duration",200),k.add("mapview-essential-goto-duration",200),k.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),k.add("mapserver-pbf-version-support",10.81),k.add("mapservice-popup-identify-max-tolerance",20),k("host-webworker")||k("host-browser")&&(k.add("esri-csp-restrictions",()=>{try{new Function}catch{return!0}return!1}),k.add("esri-image-decode",()=>{if("decode"in new Image){const e=new Image;return e.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void e.decode().then(()=>{k.add("esri-image-decode",!0,!0,!0)}).catch(()=>{k.add("esri-image-decode",!1,!0,!0)})}return!1}),k.add("esri-url-encodes-apostrophe",()=>{const e=window.document.createElement("a");return e.href="?'",e.href.includes("?%27")}))})();const z2=new WeakMap;function oj(e,t,r=!1){const i=`ðŸ›‘ DEPRECATED - ${t}`;if(!r)return void e.warn(i);let s=z2.get(e);s||(s=new Set,z2.set(e,s)),s.has(t)||(s.add(t),e.warn(i))}function xA(e,t,r={}){if(k("esri-deprecation-warnings")){const{moduleName:i}=r;Cp(e,`Function: ${(i?i+"::":"")+t+"()"}`,r)}}function Uh(e,t,r={}){if(k("esri-deprecation-warnings")){const{moduleName:i}=r;Cp(e,`Property: ${(i?i+"::":"")+t}`,r)}}function aj(e,t,r={}){k("esri-deprecation-warnings")&&Cp(e,`Multiple argument constructor: ${t}`,{warnOnce:!0,replacement:`new ${t}({ <your properties here> })`,...r})}function Cp(e,t,r={}){if(k("esri-deprecation-warnings")){const{replacement:i,version:s,see:n,warnOnce:o}=r;let l=t;i&&(l+=`
	ðŸ› ï¸ Replacement: ${i}`),s&&(l+=`
	âš™ï¸ Version: ${s}`),n&&(l+=`
	ðŸ”— See ${n} for more details.`),oj(e,l,o)}}function joe(e){const t=[];return function*(){yield*t;for(const r of e)t.push(r),yield r}}function Doe(e,t){for(const r of e)if(r!=null&&t(r))return r}function q2(e){return e!=null&&typeof e[Symbol.iterator]=="function"}let i$=class{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let t=0;return this._groups.forEach(r=>{t+=r.length}),t}add(t,r){if(q2(t)){const i=this._getOrCreateGroup(r);for(const s of t)B2(s)&&i.push(s)}else B2(t)&&this._getOrCreateGroup(r).push(t);return this}forEach(t,r){if(typeof t=="function")this._groups.forEach(i=>i.forEach(t));else{const i=this._getGroup(t);i&&r&&i.forEach(r)}}has(t){return this._groups.has(zh(t))}remove(t){if(typeof t!="string"&&q2(t)){for(const r of t)this.remove(r);return this}return this.has(t)?(G2(this._getGroup(t)),this._groups.delete(zh(t)),this):this}removeAll(){return this._groups.forEach(G2),this._groups.clear(),this}removeReference(t){return this._groups.delete(t),this}_getOrCreateGroup(t){if(this.has(t))return this._getGroup(t);const r=[];return this._groups.set(zh(t),r),r}_getGroup(t){return this._groups.get(zh(t))}};function zh(e){return e||"_default_"}function G2(e){for(const t of e)t instanceof i$?t.removeAll():t.remove()}function B2(e){return e!=null&&(!!e.remove||e instanceof i$)}let Lf=class ta{constructor(t=1){this._seed=t}set seed(t){this._seed=t??Math.random()*ta._m}getInt(){return this._seed=(ta._a*this._seed+ta._c)%ta._m,this._seed}getFloat(){return this.getInt()/(ta._m-1)}getIntRange(t,r){return Math.round(this.getFloatRange(t,r))}getFloatRange(t,r){const i=r-t;return t+this.getInt()/ta._m*i}};Lf._m=2147483647,Lf._a=48271,Lf._c=0;const lj=1.5,Uoe=1/lj,zoe=.5;function s$(e,t){return t?e.filter((r,i,s)=>s.findIndex(t.bind(null,r))===i):Array.from(new Set(e))}function ig(e,t,r){if(e==null&&t==null)return!0;if(e==null||t==null||e.length!==t.length)return!1;if(r){for(let i=0;i<e.length;i++)if(!r(e[i],t[i]))return!1}else for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}function qoe(e,t,r){let i,s;return i=t.filter(n=>!e.some(o=>r(o,n))),s=e.filter(n=>!t.some(o=>r(o,n))),{added:i,removed:s}}function Goe(e){return e&&typeof e.length=="number"}let IA=class{constructor(){this.last=0}};const TA=new IA;function Rv(e,t,r,i){i=i||TA;const s=Math.max(0,i.last-10);for(let o=s;o<r;++o)if(e[o]===t)return i.last=o,o;const n=Math.min(s,r);for(let o=0;o<n;++o)if(e[o]===t)return i.last=o,o;return-1}function uj(e,t,r,i){const s=e.length,n=Rv(e,t,s,i);if(n!==-1)return e[n]=e[s-1],e.pop(),t}const Ci=new Set;function cj(e,t,r=e.length,i=t.length,s,n){if(i===0||r===0)return r;Ci.clear();for(let l=0;l<i;++l)Ci.add(t[l]);s=s||TA;const o=Math.max(0,s.last-10);for(let l=o;l<r;++l)if(Ci.has(e[l])&&(n==null||n.push(e[l]),Ci.delete(e[l]),e[l]=e[r-1],--r,--l,Ci.size===0||r===0))return Ci.clear(),r;for(let l=0;l<o;++l)if(Ci.has(e[l])&&(n==null||n.push(e[l]),Ci.delete(e[l]),e[l]=e[r-1],--r,--l,Ci.size===0||r===0))return Ci.clear(),r;return Ci.clear(),r}function Woe(e,t){let r=0;for(let i=0;i<e.length;++i){const s=e[i];t(s,i)&&(e[r]=s,r++)}e.length=r}function MA(e){return e?(W2.seed=e,()=>W2.getFloat()):Math.random}function EA(e,t){const r=MA(t);for(let i=e.length-1;i>0;i--){const s=Math.floor(r()*(i+1)),n=e[i];e[i]=e[s],e[s]=n}return e}const W2=new Lf;function AA(e,t){const r=e.indexOf(t);return r!==-1?(e.splice(r,1),t):null}function gl(e,t){return e!=null}function CA(e){return 32+e.length}function n$(){return 16}function Hoe(e){if(!e)return 0;let t=FA;for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];switch(typeof i){case"string":t+=CA(i);break;case"number":t+=n$();break;case"boolean":t+=4}}return t}function dj(e){if(!e)return 0;if(Array.isArray(e))return pj(e);let t=FA;for(const r in e)e.hasOwnProperty(r)&&(t+=OA(e[r]));return t}function pj(e){const t=e.length;if(t===0||typeof e[0]=="number")return 32+8*t;let r=kA;for(let i=0;i<t;i++)r+=OA(e[i]);return r}function OA(e){switch(typeof e){case"object":return dj(e);case"string":return CA(e);case"number":return n$();case"boolean":return 4;default:return 8}}function hj(e,t){return kA+e.length*t}const FA=32,kA=16;function Joe(e){return e instanceof ArrayBuffer}function o$(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Int8Array"}function PA(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint8Array"}function LA(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint8ClampedArray"}function a$(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Int16Array"}function NA(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint16Array"}function l$(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Int32Array"}function RA(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint32Array"}function sg(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Float32Array"}function ng(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Float64Array"}function jA(e){return!("buffer"in e)}function Zoe(...e){return e.reduce((t,r)=>t+(r?jA(r)?hj(r,n$()):r.byteLength+fj:0),0)}const fj=145,DA=1024;function Yoe(e){return ng(e)||sg(e)||l$(e)||a$(e)||o$(e)}function Qoe(e){return ng(e)||sg(e)}function Koe(e){return ng(e)?179769e303:sg(e)?3402823e32:RA(e)?4294967295:NA(e)?65535:PA(e)||LA(e)?255:l$(e)?2147483647:a$(e)?32767:o$(e)?127:256}function yj(e,t){let r;for(r in e)e.hasOwnProperty(r)&&e[r]===void 0&&delete e[r];return e}function M(e){if(!e||typeof e!="object"||typeof e=="function")return e;const t=zA(e);if(t!=null)return t;if(Yy(e))return e.clone();if(VA(e))return e.map(M);if(UA(e))return e.clone();const r={};for(const i of Object.getOwnPropertyNames(e))r[i]=M(e[i]);return r}function jv(e){if(!e||typeof e!="object"||typeof e=="function"||"HTMLElement"in globalThis&&e instanceof HTMLElement)return e;const t=zA(e);if(t!=null)return t;if(VA(e)){let r=!0;const i=e.map(s=>{const n=jv(s);return s!=null&&n==null&&(r=!1),n});return r?i:null}if(Yy(e))return e.clone();if(e instanceof File||e instanceof Blob)return e;if(!UA(e)){const r=new(Object.getPrototypeOf(e)).constructor;for(const i of Object.getOwnPropertyNames(e)){const s=e[i],n=jv(s);if(s!=null&&n==null)return null;r[i]=n}return r}return null}function Yy(e){return typeof e.clone=="function"}function VA(e){return typeof e.map=="function"&&typeof e.forEach=="function"}function UA(e){return typeof e.notifyChange=="function"&&typeof e.watch=="function"}function H2(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;const t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function zA(e){if(o$(e)||PA(e)||LA(e)||a$(e)||NA(e)||l$(e)||RA(e)||sg(e)||ng(e))return e.slice();if(e instanceof Date)return new Date(e.getTime());if(e instanceof ArrayBuffer)return e.slice(0,e.byteLength);if(e instanceof Map){const t=new Map;for(const[r,i]of e)t.set(r,M(i));return t}if(e instanceof Set){const t=new Set;for(const r of e)t.add(M(r));return t}return null}function u$(e,t){return e===t||typeof e=="number"&&isNaN(e)&&typeof t=="number"&&isNaN(t)||typeof(e==null?void 0:e.getTime)=="function"&&typeof(t==null?void 0:t.getTime)=="function"&&e.getTime()===t.getTime()||!1}function mj(e,t){return e===t||(e==null||typeof e=="string"?e===t:typeof e=="number"?e===t||typeof t=="number"&&isNaN(e)&&isNaN(t):e instanceof Date?t instanceof Date&&e.getTime()===t.getTime():Array.isArray(e)?Array.isArray(t)&&ig(e,t):e instanceof Set?t instanceof Set&&vj(e,t):e instanceof Map?t instanceof Map&&bj(e,t):!!H2(e)&&H2(t)&&gj(e,t))}function gj(e,t){if(e===null||t===null)return!1;const r=Object.keys(e);if(t===null||Object.keys(t).length!==r.length)return!1;for(const i of r)if(e[i]!==t[i]||!Object.prototype.hasOwnProperty.call(t,i))return!1;return!0}function vj(e,t){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}function bj(e,t){if(e.size!==t.size)return!1;for(const[r,i]of e){const s=t.get(r);if(s!==i||s===void 0&&!t.has(r))return!1}return!0}function c$(e,t,r=!1){return GA(e,t,r)}function sh(e,t){if(t!=null)return t[e]||qA(e.split("."),!1,t)}function pr(e,t,r){const i=e.split("."),s=i.pop(),n=qA(i,!0,r);n&&s&&(n[s]=t)}function J2(e,t){if(e==null&&t==null)return!1;if(e==null||t==null)return!0;if(typeof e=="object"){if(Array.isArray(e)){const r=t;if(e.length!==r.length)return!0;for(let i=0;i<e.length;i++)if(J2(e[i],r[i]))return!0;return!1}if(Object.keys(e).length!==Object.keys(t).length)return!0;for(const r in e)if(J2(e[r],t[r]))return!0;return!1}return e!==t}function qA(e,t,r){let i=r;for(const s of e){if(i==null)return;if(!(s in i)){if(!t)return;i[s]={}}i=i[s]}return i}function GA(e,t,r){return t?Object.keys(t).reduce((i,s)=>{let n=i[s],o=t[s];return n===o?i:n===void 0?(i[s]=M(o),i):(Array.isArray(o)||Array.isArray(i)?(n=n?Array.isArray(n)?i[s]=n.slice():i[s]=[n]:i[s]=[],o&&(Array.isArray(o)||(o=[o]),r?o.forEach(l=>{n.includes(l)||n.push(l)}):i[s]=o.slice())):o&&typeof o=="object"?i[s]=GA(n,o,r):i.hasOwnProperty(s)&&!t.hasOwnProperty(s)||(i[s]=o),i)},e||{}):e}var bA;const Le={apiKey:void 0,applicationName:"",applicationUrl:(bA=globalThis.location)==null?void 0:bA.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",userPrivilegesApplied:!0,portalUrl:"https://www.arcgis.com",respectPrefersReducedMotion:!0,routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],internalInterceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:62e3,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(c$(Le,globalThis.esriConfig,!0),delete Le.has),!Le.assetsPath){{const e="4.31";Le.assetsPath=`https://js.arcgis.com/${e}/@arcgis/core/assets`}Le.defaultAssetsPath=Le.assetsPath}const wj=/\{([^}]+)\}/g;function Z2(e){return e??""}function ns(e,t){return t?e.replaceAll(wj,typeof t=="object"?(r,i)=>Z2(sh(i,t)):(r,i)=>Z2(t(i))):e}function Xoe(e,t){return e.replaceAll(/([.$?*|{}()[\]\\/+\-^])/g,r=>t!=null&&t.includes(r)?r:`\\${r}`)}function BA(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return t}let Y2;function eae(e){return Y2??(Y2=new DOMParser),Y2.parseFromString(e||"","text/html").body.innerText||""}function Q2(e,t){return new RegExp(`{${t}}`,"ig").test(e)}const K2={info:0,warn:1,error:2,none:3};let G=class qr{constructor(t){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},t.level!=null&&(this.level=t.level),t.writer!=null&&(this.writer=t.writer),this._module=t.module,qr._loggers.set(this.module,this);const r=this.module.lastIndexOf(".");r!==-1&&(this._parent=qr.getLogger(this.module.slice(0,r)))}get module(){return this._module}get parent(){return this._parent}error(...t){this._log("error","always",...t)}warn(...t){this._log("warn","always",...t)}info(...t){this._log("info","always",...t)}errorOnce(...t){this._log("error","once",...t)}warnOnce(...t){this._log("warn","once",...t)}infoOnce(...t){this._log("info","once",...t)}errorOncePerTick(...t){this._log("error","oncePerTick",...t)}warnOncePerTick(...t){this._log("warn","oncePerTick",...t)}infoOncePerTick(...t){this._log("info","oncePerTick",...t)}get test(){}static get test(){}static getLogger(t){return t=typeof t!="string"?t.declaredClass:t,qr._loggers.get(t)||new qr({module:t})}_log(t,r,...i){if(this._matchLevel(t)){if(r!=="always"&&!qr._throttlingDisabled){const s=$j(i),n=this._loggedMessages[t].get(s);if(r==="once"&&n!=null||r==="oncePerTick"&&n&&n>=qr._tickCounter)return;this._loggedMessages[t].set(s,qr._tickCounter),qr._scheduleTickCounterIncrement()}for(const s of Le.log.interceptors)if(s(t,this.module,...i))return;this._inheritedWriter()(t,this.module,...i)}}_parentWithMember(t,r){let i=this;for(;i!=null;){const s=i[t];if(s!=null)return s;i=i.parent}return r}_inheritedWriter(){return this._parentWithMember("writer",_j)}_matchLevel(t){const r=Le.log.level||"warn";return K2[this._parentWithMember("level",r)]<=K2[t]}static _scheduleTickCounterIncrement(){qr._tickCounterScheduled||(qr._tickCounterScheduled=!0,Promise.resolve().then(()=>{qr._tickCounter++,qr._tickCounterScheduled=!1}))}};function _j(e,t,...r){console[e](`[${t}]`,...r)}function $j(...e){return BA(JSON.stringify(e,(r,i)=>typeof i!="object"||Array.isArray(i)?i:"[Object]"))}G._loggers=new Map,G._tickCounter=0,G._tickCounterScheduled=!1,G._throttlingDisabled=!1;function WA(e,t){if(e==null)throw new Error(t??"value is None")}function Ps(e){return e==null||e.destroy(),null}function tae(e){return e==null||e.dispose(),null}function ts(e){return e==null||e.remove(),null}function HA(e){return e==null||e.abort(),null}function rae(e){return e==null||e.release(),null}function Sj(e,t,r){return e!=null&&t!=null?r!=null?r(e,t):e.equals(t):e===t}function xj(e,t){let r;return e.some((i,s)=>(r=t(i,s),r!=null)),r??void 0}const JA=Symbol("Accessor-beforeDestroy"),Ij={remove:()=>{}};function pt(e){return e?{remove(){e&&(e(),e=void 0)}}:Ij}function Tj(e){e.forEach(t=>t==null?void 0:t.remove())}function nh(e){return pt(()=>Tj(e))}function jr(e){return e.__accessor__??null}function Mj(e,t){var r;return((r=e==null?void 0:e.metadata)==null?void 0:r[t])!=null}function Nf(e,t,r){return r?Qy(e,t,{policy:r,path:""}):Qy(e,t,null)}function Qy(e,t,r){return t?Object.keys(t).reduce((i,s)=>{const n=s;let o=null,l="merge";if(r&&(o=r.path?`${r.path}.${s}`:s,l=r.policy(o)),l==="replace"||l==="replace-arrays"&&Array.isArray(i[n]))return i[n]=t[n],i;if(i[n]===void 0)return i[n]=M(t[n]),i;let c=i[n],p=t[n];if(c===p)return i;if(Array.isArray(p)||Array.isArray(i))c=c?Array.isArray(c)?i[n]=c.slice():i[n]=[c]:i[n]=[],p&&(Array.isArray(p)||(p=[p]),p.forEach(h=>{c.includes(h)||c.push(h)}));else if(p&&typeof p=="object")if(r){const h=r.path;r.path=o,i[n]=Qy(c,p,r),r.path=h}else i[n]=Qy(c,p,null);else i.hasOwnProperty(s)&&!t.hasOwnProperty(s)||(i[n]=p);return i},e||{}):e}function ZA(e){return Array.isArray(e)?e:e.split(".")}function X2(e){return e.includes(",")?e.split(",").map(t=>t.trim()):[e.trim()]}function Ej(e){if(Array.isArray(e)){const t=[];for(const r of e)t.push(...X2(r));return t}return X2(e)}function YA(e,t,r,i){const s=Ej(t);if(s.length!==1){const n=s.map(o=>i(e,o,r));return nh(n)}return i(e,s[0],r)}function QA(e,t){const r=e[e.length-1]==="?"?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const s=parseInt(r,10);if(!isNaN(s))return Array.isArray(t)?t[s]:t.at(s)}const i=jr(t);return Mj(i,r)?i.get(r):t[r]}function KA(e,t,r){if(e==null)return e;const i=QA(t[r],e);return!i&&r<t.length-1?void 0:r===t.length-1?i:KA(i,t,r+1)}function oh(e,t,r=0){return typeof t!="string"||t.includes(".")?KA(e,ZA(t),r):QA(t,e)}function Po(e,t){return oh(e,t)}function ex(e,t){return oh(t,e)!==void 0}var kr;(function(e){e[e.INITIALIZING=0]="INITIALIZING",e[e.CONSTRUCTING=1]="CONSTRUCTING",e[e.CONSTRUCTED=2]="CONSTRUCTED",e[e.DESTROYED=3]="DESTROYED"})(kr||(kr={}));function ah(e){let t=e.constructor.__accessorMetadata__;const r=Object.prototype.hasOwnProperty.call(e.constructor,"__accessorMetadata__");if(t){if(!r){t=Object.create(t);for(const i in t)t[i]=M(t[i]);Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0})}}else t={},Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0});return e.constructor.__accessorMetadata__}function og(e,t){const r=ah(e);let i=r[t];return i||(i=r[t]={}),i}function Aj(e,t){return Nf(e,t,Oj)}const Cj=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function Oj(e){return Cj.test(e)?"replace":"merge"}function Fj(e){return(e==null?void 0:e.release)&&typeof e.release=="function"}function kj(e){return(e==null?void 0:e.acquire)&&typeof e.acquire=="function"}let bc=class Dv{constructor(t,r,i,s=1,n=0){this._ctor=t,this._acquireFunction=r,this._releaseFunction=i,this.allocationSize=s,this._pool=new Array(n),this._initialSize=n;for(let o=0;o<n;o++)this._pool[o]=new this._ctor;this.allocationSize=Math.max(s,1)}destroy(){this.prune(0)}acquire(...t){let r;if(Dv.test.disabled)r=new this._ctor;else{if(this._pool.length===0){const i=this.allocationSize;for(let s=0;s<i;s++)this._pool[s]=new this._ctor}r=this._pool.pop()}return this._acquireFunction?this._acquireFunction(r,...t):kj(r)&&r.acquire(...t),r}release(t){t&&!Dv.test.disabled&&(this._releaseFunction?this._releaseFunction(t):Fj(t)&&t.release(),this._pool.push(t))}prune(t=this._initialSize){if(!(t>=this._pool.length)){for(let r=t;r<this._pool.length;++r){const i=this._pool[r];this._dispose(i)}this._pool.length=t}}_dispose(t){t.dispose&&typeof t.dispose=="function"&&t.dispose()}};bc.test={disabled:!1};let Pj=class{constructor(t,r){this._observers=t,this._observer=r}remove(){AA(this._observers,this._observer)}},XA=class{constructor(){this._observers=null,this.destroyed=!1}observe(t){if(this.destroyed||t.destroyed)return Lj;this._observers==null&&(this._observers=[]);const r=this._observers;let i=!1,s=!1;const n=r.length;for(let o=0;o<n;++o){const l=r[o];if(l.destroyed)s=!0;else if(l===t){i=!0;break}}return i||(r.push(t),s&&this._removeDestroyedObservers()),new Pj(r,t)}_removeDestroyedObservers(){const t=this._observers;if(!t||t.length===0)return;const r=t.length;let i=0;for(let s=0;s<r;++s){for(;s+i<r&&t[s+i].destroyed;)++i;if(i>0){if(!(s+i<r))break;t[s]=t[s+i]}}t.length=r-i}destroy(){if(this.destroyed)return;this.destroyed=!0;const t=this._observers;if(t!=null){for(const r of t)r.onCommitted();this._observers=null}}};const Lj=pt();var me;(function(e){e[e.DEFAULTS=0]="DEFAULTS",e[e.COMPUTED=1]="COMPUTED",e[e.SERVICE=2]="SERVICE",e[e.PORTAL_ITEM=3]="PORTAL_ITEM",e[e.WEB_SCENE=4]="WEB_SCENE",e[e.WEB_MAP=5]="WEB_MAP",e[e.LINK_CHART=6]="LINK_CHART",e[e.USER=7]="USER"})(me||(me={}));const Vv=me.USER+1;function wo(e){switch(e){case"defaults":return me.DEFAULTS;case"service":return me.SERVICE;case"portal-item":return me.PORTAL_ITEM;case"web-scene":return me.WEB_SCENE;case"web-map":return me.WEB_MAP;case"link-chart":return me.LINK_CHART;case"user":return me.USER;default:return null}}function Ky(e){switch(e){case me.DEFAULTS:return"defaults";case me.SERVICE:return"service";case me.PORTAL_ITEM:return"portal-item";case me.WEB_SCENE:return"web-scene";case me.WEB_MAP:return"web-map";case me.LINK_CHART:return"link-chart";case me.USER:return"user"}}function Nj(e){return Ky(e)}var Pe;(function(e){e[e.Dirty=1]="Dirty",e[e.Overridden=2]="Overridden",e[e.Computing=4]="Computing",e[e.NonNullable=8]="NonNullable",e[e.HasDefaultValue=16]="HasDefaultValue",e[e.DepTrackingInitialized=32]="DepTrackingInitialized",e[e.AutoTracked=64]="AutoTracked",e[e.ExplicitlyTracking=128]="ExplicitlyTracking"})(Pe||(Pe={}));let ag=class{constructor(t){this.accessed=void 0,this._handles=void 0,this._observer=t}destroy(){var t;(t=this.accessed)==null||t.clear(),this.clear()}onAccessed(t){this._observer!=null&&t!==this._observer&&(this.accessed==null&&(this.accessed=new Set),this.accessed.add(t))}onTrackingEnd(){this._observer!=null&&(this.clear(),this.accessed!=null&&(this._handles==null&&(this._handles=[]),this.accessed.forEach(t=>{this._handles.push(t.observe(this._observer))}),this.accessed.clear()))}clear(){if(this._handles!=null){for(let t=0;t<this._handles.length;++t)this._handles[t].remove();this._handles.length=0}}};const Xy=new ag,ud=[];let op=Xy;function X(e){op.onAccessed(e)}let Rf=!1,jf=!1;function Sn(e,t,r){if(Rf)return d$(e,t,r);let i=null;return eC(e),i=t.call(r),tC(),i}function Rj(e,t){return Sn(Xy,e,t)}function d$(e,t,r){const i=Rf;Rf=!0,eC(e);let s=null;try{s=t.call(r)}catch(n){jf&&G.getLogger("esri.core.accessorSupport.tracking").error(n)}return tC(),Rf=i,s}function eC(e){op=e,ud.push(e)}function tC(){const e=ud.length;if(e>1){const t=ud.pop();op=ud[e-2],t.onTrackingEnd()}else if(e===1){const t=ud.pop();op=Xy,t.onTrackingEnd()}else op=Xy}function rC(e,t){if(t.flags&Pe.DepTrackingInitialized)return;t.flags|=Pe.DepTrackingInitialized;const r=jf;jf=!1,t.flags&Pe.AutoTracked?d$(t.trackingTarget,t.metadata.get,e):iC(e,t),jf=r}const jj=[];function iC(e,t){t.flags&Pe.ExplicitlyTracking||(t.flags|=Pe.ExplicitlyTracking,d$(t.trackingTarget,()=>{const r=t.metadata.dependsOn||jj;for(const i of r)if(typeof i!="string"||i.includes(".")){const s=ZA(i);for(let n=0,o=e;n<s.length&&o!=null&&typeof o=="object";++n)o=tx(o,s[n],n!==s.length-1)}else tx(e,i,!1)}),t.flags&=~Pe.ExplicitlyTracking)}function tx(e,t,r){const i=t[t.length-1]==="?"?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const n=parseInt(i,10);if(!isNaN(n))return Array.isArray(e)?e[n]:e.at(n)}const s=jr(e);if(s){const n=s.propertiesByName.get(i);n&&(X(n),rC(e,n))}return r?e[i]:void 0}let rx=class extends XA{constructor(t,r){super(),this.propertyName=t,this.metadata=r,this.trackingTarget=new ag(this),this.flags=0,this.flags=Pe.Dirty|(r.nonNullable?Pe.NonNullable:0)|(r.hasOwnProperty("value")?Pe.HasDefaultValue:0)|(r.get===void 0?Pe.DepTrackingInitialized:0)|(r.dependsOn===void 0?Pe.AutoTracked:0)}destroy(){this.flags&Pe.Dirty&&this.onCommitted(),super.destroy(),this.trackingTarget.destroy()}getComputed(t){t.mutable&&X(this);const r=t.store,i=this.propertyName,s=this.flags,n=r.get(i);if(s&Pe.Computing||~s&Pe.Dirty&&r.has(i))return n;this.flags|=Pe.Computing;const o=t.host;let l;s&Pe.AutoTracked?l=Sn(this.trackingTarget,this.metadata.get,o):(iC(o,this),l=this.metadata.get.call(o)),this.flags|=Pe.DepTrackingInitialized,r.set(i,l,me.COMPUTED);const c=r.get(i);return c===n?this.flags&=~Pe.Dirty:Rj(this.commit,this),this.flags&=~Pe.Computing,c}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}commit(){this.flags&=~Pe.Dirty,this.onCommitted()}onInvalidated(){~this.flags&Pe.Overridden&&(this.flags|=Pe.Dirty);const t=this._observers;if(t&&t.length>0)for(const r of t)r.onInvalidated()}onCommitted(){const t=this._observers;if(t&&t.length>0){const r=t.slice();for(const i of r)i.onCommitted()}}},Dj=class sC{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const r=new sC;return this._values.forEach((i,s)=>{t&&t.has(s)||r.set(s,M(i))}),r}get(t){return this._values.get(t)}originOf(){return me.USER}keys(){return[...this._values.keys()]}set(t,r){this._values.set(t,r)}delete(t){this._values.delete(t)}has(t){return this._values.has(t)}forEach(t){this._values.forEach(t)}};function qh(e,t,r){return e!==void 0}function ix(e,t,r,i){return e!==void 0&&(!(r==null&&e.flags&Pe.NonNullable)||(i.lifecycle,kr.INITIALIZING,!1))}let Vj=class{constructor(t){this.host=t,this.propertiesByName=new Map,this.ctorArgs=null,this.lifecycle=kr.INITIALIZING,this.store=new Dj,this.mutable=!0,this._origin=me.USER;const r=this.host.constructor.__accessorMetadata__;for(const i in r){const s=new rx(i,r[i]);this.propertiesByName.set(i,s)}this.metadata=r}initialize(){this.lifecycle=kr.CONSTRUCTING}constructed(){this.lifecycle=kr.CONSTRUCTED}destroy(){this.lifecycle=kr.DESTROYED,this.propertiesByName.forEach(t=>t.destroy())}get initialized(){return this.lifecycle!==kr.INITIALIZING}get(t){const r=this.propertiesByName.get(t);if(r.metadata.get)return r.getComputed(this);this.mutable&&X(r);const i=this.store;return i.has(t)?i.get(t):r.metadata.value}originOf(t){const r=this.store.originOf(t);if(r===void 0){const i=this.propertiesByName.get(t);if(i!==void 0&&i.flags&Pe.HasDefaultValue)return"defaults"}return Ky(r)}has(t){return this.propertiesByName.has(t)&&this.store.has(t)}keys(){return[...this.propertiesByName.keys()]}internalGet(t){const r=this.propertiesByName.get(t);if(qh(r))return this.store.has(t)?this.store.get(t):r.metadata.value}internalSet(t,r){const i=this.propertiesByName.get(t);qh(i)&&this._internalSet(i,r)}getDependsInfo(t,r,i){const s=this.propertiesByName.get(r);if(!qh(s))return"";const n=new ag,o=Sn(n,()=>{var p;return(p=s.metadata.get)==null?void 0:p.call(t)});let l=`${i}${t.declaredClass.split(".").pop()}.${r}: ${o}
`;const c=n.accessed??new Set;if(c.size===0)return l;i+="  ";for(const p of c)p instanceof rx&&(l+=`${i}${p.propertyName}: undefined
`);return l}setAtOrigin(t,r,i){const s=this.propertiesByName.get(t);if(qh(s))return this._setAtOrigin(s,r,i)}isOverridden(t){const r=this.propertiesByName.get(t);return r!==void 0&&!!(r.flags&Pe.Overridden)}clearOverride(t){const r=this.propertiesByName.get(t);r&&r.flags&Pe.Overridden&&(r.flags&=~Pe.Overridden,r.notifyChange())}override(t,r){const i=this.propertiesByName.get(t);if(!ix(i,t,r,this))return;const s=i.metadata.cast;if(s){const n=this._cast(s,r),{valid:o,value:l}=n;if(d0.release(n),!o)return;r=l}i.flags|=Pe.Overridden,this._internalSet(i,r)}set(t,r){const i=this.propertiesByName.get(t);if(!ix(i,t,r,this))return;const s=i.metadata.cast;if(s){const o=this._cast(s,r),{valid:l,value:c}=o;if(d0.release(o),!l)return;r=c}const n=i.metadata.set;n?n.call(this.host,r):this._internalSet(i,r)}setDefaultOrigin(t){this._origin=wo(t)}getDefaultOrigin(){return Ky(this._origin)}notifyChange(t){const r=this.propertiesByName.get(t);r!==void 0&&r.notifyChange()}invalidate(t){const r=this.propertiesByName.get(t);r!==void 0&&r.invalidate()}commit(t){const r=this.propertiesByName.get(t);r!==void 0&&r.commit()}_internalSet(t,r){const i=this.lifecycle!==kr.INITIALIZING?this._origin:me.DEFAULTS;this._setAtOrigin(t,r,i)}_setAtOrigin(t,r,i){const s=this.store,n=t.propertyName;s.has(n,i)&&u$(r,s.get(n))&&~t.flags&Pe.Overridden&&i===s.originOf(n)||(t.invalidate(),s.set(n,r,i),t.commit(),rC(this.host,t))}_cast(t,r){const i=d0.acquire();return i.valid=!0,i.value=r,t&&(i.value=t.call(this.host,r,i)),i}},Uj=class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}};const d0=new bc(Uj);function zj(e,t){return e.replaceAll(/\$\{([^\s:}]*)(?::([^\s:}]+))?\}/g,(r,i)=>i===""?"$":(sh(i,t)??"").toString())}let nC=class{constructor(t,r,i=void 0){this.name=t,this.details=i,this.message=(r&&zj(r,i))??""}toString(){return"["+this.name+"]: "+this.message}},O=class oC extends nC{constructor(t,r,i){super(t,r,i)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(t,r)=>{if(r&&typeof r=="object"&&typeof r.toJSON=="function")return r;try{return M(r)}catch{return"[object]"}}))}}catch(t){throw G.getLogger("esri.core.Error").error(t),t}return{name:this.name,message:this.message,details:this.details}}static fromJSON(t){return new oC(t.name,t.message,t.details)}};O.prototype.type="error";function em(e,t,r){if(e&&t)if(typeof t=="object")for(const i of Object.getOwnPropertyNames(t))em(e,i,t[i]);else{if(t.includes(".")){const s=t.split("."),n=s.splice(-1,1)[0];return void em(Po(e,s),n,r)}const i=e.__accessor__;i!=null&&qj(t,i),e[t]=r}}function qj(e,t){if(k("esri-unknown-property-errors")&&!Gj(e,t))throw new O("set:unknown-property",Bj(e,t))}function Gj(e,t){return t.metadata[e]!=null}function Bj(e,t){return"setting unknown property '"+e+"' on instance of "+t.host.declaredClass}let Wj;function Hj(){return Wj}var sx;(function(e){e[e.Ignore=0]="Ignore",e[e.Destroy=1]="Destroy",e[e.ThrowError=2]="ThrowError"})(sx||(sx={}));function Jj(e){e.length=0}let Os=class{constructor(t=50,r=50){this._pool=new bc(Array,void 0,Jj,r,t)}acquire(){return this._pool.acquire()}release(t){this._pool.release(t)}prune(){this._pool.prune(0)}static acquire(){return p0.acquire()}static release(t){return p0.release(t)}static prune(){p0.prune()}};const p0=new Os(100);let Zj=class extends bc{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=null}acquire(...t){const r=super.acquire(...t);return this._set.delete(r),r}release(t){t&&!this._set.has(t)&&(super.release(t),this._set.add(t))}_dispose(t){this._set.delete(t),super._dispose(t)}};const Gh=[];function tm(e){Gh.push(e),Gh.length===1&&queueMicrotask(()=>{const t=Gh.slice();Gh.length=0;for(const r of t)r()})}let aC=class{constructor(t,r=30){this.name=t,this._counter=0,this._samples=new Array(r)}push(t){t!=null&&(this._samples[++this._counter%this._samples.length]=t)}set(t){t!=null&&(this._samples[this._counter%this._samples.length]=t)}get median(){return this._samples.slice().sort((t,r)=>t-r)[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce((t,r)=>t+r,0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}};var Uv;(function(e){const t=(n,o,l,c)=>{let p=o,h=o;const f=l>>>1,y=n[p-1];for(;h<=f;){h=p<<1,h<l&&c(n[h-1],n[h])<0&&++h;const m=n[h-1];if(c(m,y)<=0)break;n[p-1]=m,p=h}n[p-1]=y},r=(n,o)=>n<o?-1:n>o?1:0;function i(n,o,l,c){o===void 0&&(o=0),l===void 0&&(l=n.length),c===void 0&&(c=r);for(let h=l>>>1;h>o;h--)t(n,h,l,c);const p=o+1;for(let h=l-1;h>o;h--){const f=n[o];n[o]=n[h],n[h]=f,t(n,p,h,c)}}function*s(n,o,l,c){o===void 0&&(o=0),l===void 0&&(l=n.length),c===void 0&&(c=r);for(let h=l>>>1;h>o;h--)t(n,h,l,c),yield;const p=o+1;for(let h=l-1;h>o;h--){const f=n[o];n[o]=n[h],n[h]=f,t(n,p,h,c),yield}}e.sort=i,e.iterableSort=s})(Uv||(Uv={}));const nx=Uv,Yj=1.5,Qj=1.1;let rm=class{constructor(t){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new IA,t&&(t.initialSize&&(this.data=new Array(t.initialSize)),t.allocator&&(this._allocator=t.allocator),t.deallocator!==void 0&&(this._deallocator=t.deallocator),t.shrink&&(this._shrink=()=>ox(this)))}toArray(){return this.data.slice(0,this.length)}filter(t){const r=new Array;for(let i=0;i<this._length;i++){const s=this.data[i];t(s)&&r.push(s)}return r}at(t){if((t=Math.trunc(t)||0)<0&&(t+=this._length),!(t<0||t>=this._length))return this.data[t]}includes(t,r){const i=this.data.indexOf(t,r);return i!==-1&&i<this.length}get length(){return this._length}set length(t){if(t>this._length){if(this._allocator){for(;this._length<t;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=t}else{if(this._deallocator)for(let r=t;r<this._length;++r)this.data[r]=this._deallocator(this.data[r]);this._length=t,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(t){this.data[this._length++]=t}pushArray(t,r=t.length){for(let i=0;i<r;i++)this.data[this._length++]=t[i]}fill(t,r){for(let i=0;i<r;i++)this.data[this._length++]=t}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const t=this.data[this._length];return++this._length,t}unshift(t){this.data.unshift(t),this._length++,ox(this)}pop(){if(this.length===0)return;const t=this.data[this.length-1];return this.length=this.length-1,this._shrink(),t}remove(t){const r=Rv(this.data,t,this.length,this._hint);if(r!==-1)return this.data.splice(r,1),this.length=this.length-1,t}removeUnordered(t){return this.removeUnorderedIndex(Rv(this.data,t,this.length,this._hint))}removeUnorderedIndex(t){if(!(t>=this.length||t<0))return this.swapElements(t,this.length-1),this.pop()}removeUnorderedMany(t,r=t.length,i){this.length=cj(this.data,t,this.length,r,this._hint,i),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(t,r){if(t>=this.length||r>=this.length||t===r)return;const i=this.data[t];this.data[t]=this.data[r],this.data[r]=i}sort(t){nx.sort(this.data,0,this.length,t)}iterableSort(t){return nx.iterableSort(this.data,0,this.length,t)}some(t,r){for(let i=0;i<this.length;++i)if(t.call(r,this.data[i],i,this.data))return!0;return!1}find(t,r){const{data:i,length:s}=this;for(let n=0;n<s;++n)if(t.call(r,i[n]))return i[n]}filterInPlace(t,r){let i=0;for(let s=0;s<this._length;++s){const n=this.data[s];t.call(r,n,s,this.data)&&(this.data[s]=this.data[i],this.data[i]=n,i++)}if(this._deallocator)for(let s=i;s<this._length;s++)this.data[s]=this._deallocator(this.data[s]);return this._length=i,this._shrink(),this}forAll(t,r){const{data:i,length:s}=this;for(let n=0;n<s;++n)t.call(r,i[n],n,i)}forEach(t,r){this.data.slice(0,this.length).forEach(t,r)}map(t,r){const i=new Array(this.length);for(let s=0;s<this.length;++s)i[s]=t.call(r,this.data[s],s,this.data);return i}reduce(t,r){let i=r;for(let s=0;s<this.length;++s)i=t(i,this.data[s],s,this.data);return i}has(t){const r=this.length,i=this.data;for(let s=0;s<r;++s)if(i[s]===t)return!0;return!1}*[Symbol.iterator](){for(let t=0;t<this.length;t++)yield this.data[t]}};function ox(e){e.data.length>Yj*e.length&&(e.data.length=Math.floor(e.length*Qj))}function Kj(e){return{setTimeout:(t,r)=>{const i=e.setTimeout(t,r);return pt(()=>e.clearTimeout(i))}}}const Xj=Kj(globalThis);function lg(e){return e6(e)||lC(e)}function e6(e){return e!=null&&typeof e=="object"&&"on"in e&&typeof e.on=="function"}function lC(e){return e!=null&&typeof e=="object"&&"addEventListener"in e&&typeof e.addEventListener=="function"}function ug(e,t,r){if(!lg(e))throw new TypeError("target is not a Evented or EventTarget object");return lC(e)?t6(e,t,r):e.on(t,r)}function t6(e,t,r,i){if(Array.isArray(t)){const s=t.slice();for(const n of s)e.addEventListener(n,r,i);return pt(()=>{for(const n of s)e.removeEventListener(n,r,i)})}return e.addEventListener(t,r,i),pt(()=>e.removeEventListener(t,r,i))}function uC(e,t,r){if(!lg(e))throw new TypeError("target is not a Evented or EventTarget object");if("once"in e)return e.once(t,r);const i=ug(e,t,s=>{i.remove(),r.call(e,s)});return i}function Jt(e="Aborted"){return new O("AbortError",e)}function si(e,t="Aborted"){if(Lo(e))throw Jt(t)}function lh(e){return e instanceof AbortSignal?e:(e==null?void 0:e.signal)??void 0}function Lo(e){const t=lh(e);return t!=null&&t.aborted}function Fs(e){if(vr(e))throw e}function zv(e){if(!vr(e))throw e}function el(e,t){const r=lh(e);if(r!=null){if(!r.aborted)return uC(r,"abort",()=>t());t()}}function cC(e,t){const r=lh(e);if(r!=null)return si(r),uC(r,"abort",()=>t(Jt()))}function dC(e,t){return lh(t)==null?e:new Promise((r,i)=>{let s=el(t,()=>i(Jt()));const n=()=>{s=ts(s)};e.then(n,n),e.then(r,i)})}function vr(e){return(e==null?void 0:e.name)==="AbortError"}async function bn(e){try{return await e}catch(t){if(!vr(t))throw t;return}}async function Rs(e){if(!e)return;if(typeof e.forEach!="function"){const r=Object.keys(e),i=r.map(o=>e[o]),s=await Rs(i),n={};return r.map((o,l)=>n[o]=s[l]),n}const t=e;return Promise.allSettled(t).then(r=>Array.from(t,(i,s)=>{const n=r[s];return n.status==="fulfilled"?{promise:i,value:n.value}:{promise:i,error:n.reason}}))}async function fae(e){return(await Promise.allSettled(e)).filter(t=>t.status==="fulfilled").map(t=>t.value)}async function yae(e){return(await Promise.allSettled(e)).filter(t=>t.status==="rejected").map(t=>t.reason)}function uh(e,t=void 0,r){const i=new AbortController;return el(r,()=>i.abort()),new Promise((s,n)=>{let o=setTimeout(()=>{o=0,s(t)},e);el(i,()=>{o&&(clearTimeout(o),n(Jt()))})})}function ch(e){return e&&typeof e.then=="function"}function ax(e){return ch(e)?e:Promise.resolve(e)}function wn(e,t=-1){let r,i,s,n,o=null;const l=(...c)=>{if(r){i=c,n&&n.reject(Jt()),n=No();const y=n.promise;if(o){const m=o;o=null,m.abort()}return y}if(s=n||No(),n=null,t>0){const y=new AbortController;r=ax(e(...c,y.signal));const m=r;uh(t).then(()=>{r===m&&(n?y.abort():o=y)})}else r=1,r=ax(e(...c));const p=()=>{const y=i;i=s=r=o=null,y!=null&&l(...y)},h=r,f=s;return h.then(p,p),h.then(f.resolve,f.reject),f.promise};return l}function No(){let e,t;const r=new Promise((s,n)=>{e=s,t=n}),i=s=>{e(s)};return i.resolve=s=>e(s),i.reject=s=>t(s),i.timeout=(s,n)=>Xj.setTimeout(()=>i.reject(n),s),i.promise=r,i}async function lx(e){await Promise.resolve(),si(e)}function mae(e){return e}function gae(e){return 1e3*e}function vae(e){return e}let r6=class{constructor(t){this.callback=t,this.isActive=!0}remove(){this.isActive=!1}},ux=0;const Gc={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},qv=["prepare","preRender","render","postRender","update","finish"],Gv=[],Op=new rm;function i6(){}const Bv={frameTasks:Op,willDispatch:!1,clearFrameTasks:s6,dispatch:fC,executeFrameTasks:n6,reschedule:i6};function pC(e){const t=new r6(e);return Gv.push(t),Bv.willDispatch||(Bv.willDispatch=!0,tm(fC)),t}function s6(e=!1){Op.forAll(t=>{t.removed=!0}),e&&hC()}function n6(e){const t=e-ux;ux=e;const r=1e3/60,i=Math.max(0,t-r);Gc.time=e,Gc.frameDuration=r-i;for(let s=0;s<qv.length;s++){const n=performance.now(),o=qv[s];Op.forAll(l=>{var c;l.paused||l.removed||(s===0&&l.ticks++,l.phases[o]&&(Gc.elapsedFrameTime=performance.now()-e,Gc.deltaTime=l.ticks===0?0:t,(c=l.phases[o])==null||c.call(l,Gc)))}),l6[s].push(performance.now()-n)}hC(),u6.push(performance.now()-e)}const Bh=new rm;function hC(){Op.forAll(e=>{e.removed&&Bh.push(e)}),Op.removeUnorderedMany(Bh.data,Bh.length),Bh.clear()}function fC(){for(;Gv.length;){const e=Gv.shift();e.isActive&&e.callback()}Bv.willDispatch=!1}function o6(e=1,t){const r=No(),i=()=>{Lo(t)?r.reject(Jt()):e===0?r():(--e,tm(()=>i()))};return i(),r.promise}function a6(e){return o6(1,e)}async function p$(e){await a6(e),await new Promise(t=>requestAnimationFrame(()=>{e!=null&&e.aborted||t()}))}const l6=qv.map(e=>new aC(e)),u6=new aC("total");function wae(e,t){for(const r of e.values())if(t(r))return!0;return!1}function im(e,t){if(!t)return e;for(const r of t)r!=null&&e.add(r);return e}function cx(e,t){return t!=null&&e.add(t),e}function c6(e,t){const r=new Set;return im(r,e),im(r,t),r}function _ae(e,t){const r=new Set;for(const i of t)e.has(i)&&r.add(i);return r}function $ae(e,t){if(!e||!t)return!1;if(e===t)return!0;for(const r of e)if(!t.has(r))return!1;return!0}function Sae(e,t){if(e==null&&t==null)return!0;if(e==null||t==null||e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}function xae(e,t){const r=new Set(e);for(const i of t)r.delete(i);return r}let d6=0;function Df(){return++d6}let cg=class extends ag{constructor(t){super(new p6(t)),this._observer&&dx.register(this,new WeakRef(this._observer),this)}destroy(){var t,r;this._observer&&dx.unregister(this._observer),(t=this.accessed)==null||t.clear(),this.clear(),(r=this._observer)==null||r.destroy()}},p6=class{constructor(t){this._notify=t,this._invalidCount=0,this.destroyed=!1}onInvalidated(){this._invalidCount++}onCommitted(){if(this.destroyed)return;const t=this._invalidCount;if(t===1)return this._invalidCount=0,void this._notify();this._invalidCount=t>0?t-1:0}destroy(){this.destroyed=!0,this._notify=h6}};const dx=new FinalizationRegistry(e=>{var t;(t=e.deref())==null||t.destroy()});function h6(){}let Ru=!1;const sm=[];function yC(e,t){let r=new cg(n),i=null,s=!1;function n(){if(!r||s)return;if(Ru)return void gC(n);const l=i;r.clear(),Ru=!0,s=!0,i=Sn(r,e),s=!1,Ru=!1,t(i,l),vC()}function o(){r&&(r.destroy(),r=null,i=null)}return s=!0,i=Sn(r,e),s=!1,pt(o)}function mC(e,t){let r=new cg(s),i=null;function s(){t(i,o)}function n(){r&&(r.destroy(),r=null),i=null}function o(){return r?(r.clear(),i=Sn(r,e),i):null}return o(),pt(n)}function f6(e,t){let r=!1,i=!1;const s=!!(t!=null&&t.sync);let n=new cg(()=>{r||i||(i=!0,s?o():queueMicrotask(o))});function o(){i=!1,n&&!r&&(Ru?gC(o):(n.clear(),Ru=!0,r=!0,Sn(n,e),r=!1,Ru=!1,vC()))}function l(){n&&(n.destroy(),n=null)}return r=!0,Sn(n,e),r=!1,pt(l)}function gC(e){sm.includes(e)||sm.unshift(e)}function vC(){for(;sm.length;)sm.pop()()}var ap;(function(e){e[e.Untracked=0]="Untracked",e[e.Tracked=1]="Tracked"})(ap||(ap={}));let Fp=class{constructor(){this.uid=Df(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(t,r,i,s,n){return this.pool.acquire(ap.Untracked,t,r,i,s,n,u$)}static acquireTracked(t,r,i,s){return this.pool.acquire(ap.Tracked,t,r,i,null,null,s)}notify(t,r){this.type===ap.Untracked?this.callback.call(this.target,t,r,this.path,this.target):this.callback.call(null,t,r,void 0,void 0)}acquire(t,r,i,s,n,o,l){this.uid=Df(),this.removed=!1,this.type=t,this.oldValue=r,this.callback=i,this.getValue=s,this.target=n,this.path=o,this.equals=l}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=Df(),this.removed=!0}};Fp.pool=new Zj(Fp);const Vf=new Os,Ao=new Set;let nm;function om(e){Ao.delete(e),Ao.add(e),nm||(nm=pC(g6))}function y6(e){if(e.removed)return;const t=e.oldValue,r=e.getValue();e.equals(t,r)||(e.oldValue=r,e.notify(r,t))}function m6(e){for(const t of Ao.values())t.target===e&&(t.removed=!0)}function g6(){let e=10;for(;nm&&e--;){nm=null;const t=v6(),r=Vf.acquire();for(const i of t){const s=i.uid;y6(i),s===i.uid&&i.removed&&r.push(i)}for(const i of Ao)i.removed&&(r.push(i),Ao.delete(i));for(const i of r)Fp.pool.release(i);Vf.release(r),Vf.release(t),b6.forEach(i=>i())}}function v6(){const e=Vf.acquire();e.length=Ao.size;let t=0;for(const r of Ao)e[t]=r,++t;return Ao.clear(),e}const b6=new Set;function w6(e,t,r){let i=YA(e,t,r,(s,n,o)=>{let l,c,p=mC(()=>oh(s,n),(h,f)=>{var y;((y=s.__accessor__)==null?void 0:y.lifecycle)===kr.DESTROYED||l&&l.uid!==c?i.remove():(l||(l=Fp.acquireUntracked(h,o,f,s,n),c=l.uid),om(l))});return pt(()=>{p.remove(),l&&(l.uid!==c||l.removed||(l.removed=!0,om(l)),l=null),i=p=null})});return i}function _6(e,t,r){const i=YA(e,t,r,(s,n,o)=>{let l=!1;return yC(()=>oh(s,n),(c,p)=>{s.__accessor__.lifecycle!==kr.DESTROYED?l||(l=!0,u$(p,c)||o.call(s,c,p,n,s),l=!1):i.remove()})});return i}function $6(e,t,r,i=!1){return e.__accessor__&&e.__accessor__.lifecycle!==kr.DESTROYED?i?_6(e,t,r):w6(e,t,r):pt()}function S6(e,t,r){let i,s,n=mC(e,(o,l)=>{i&&i.uid!==s?n.remove():(i||(i=Fp.acquireTracked(o,t,l,r),s=i.uid),om(i))});return pt(()=>{n.remove(),i&&(i.uid!==s||i.removed||(i.removed=!0,om(i)),i=null),n=null})}function x6(e,t,r){let i=!1;return yC(e,(s,n)=>{i||(i=!0,r(n,s)||t(s,n),i=!1)})}function I6(e,t,r=!1,i=mj){return r?x6(e,t,i):S6(e,t,i)}function Eae(e,t){for(const r of e.values())if(t(r))return!0;return!1}function h$(e,t,r){const i=e.get(t);if(i!==void 0)return i;const s=r();return e.set(t,s),s}function Aae(e){const t=new Map;return r=>(t.has(r)||t.set(r,e(r)),t.get(r))}const ju=()=>G.getLogger("esri.core.accessorSupport.ensureTypes");function T6(e){return e==null?e:new Date(e)}function M6(e){return e==null?e:!!e}function dh(e){return e==null?e:e.toString()}function wc(e,t=0){return e==null?e:(e=parseFloat(e),isNaN(e)?t:e)}function f$(e){return e==null?e:Math.round(parseFloat(e))}function E6(e){return null}function A6(e,t){return r=>{let i=e(r);return t.step!=null&&(i=Math.round(i/t.step)*t.step),t.min!=null&&(i=Math.max(t.min,i)),t.max!=null&&(i=Math.min(t.max,i)),i}}function bC(e){return(e==null?void 0:e.constructor)&&e.constructor.__accessorMetadata__!==void 0}function am(e,t){return t!=null&&e&&!(t instanceof e)}function wC(e){return e&&"isCollection"in e}function px(e){return e!=null&&e.Type?typeof e.Type=="function"?e.Type:e.Type.base:null}function C6(e,t){if(!(t!=null&&t.constructor)||!wC(t.constructor))return Wv(e,t)?t:new e(t);const r=px(e.prototype.itemType),i=px(t.constructor.prototype.itemType);return r?i?r===i?t:r.prototype.isPrototypeOf(i.prototype)?new e(t):(Wv(e,t),t):new e(t):t}function Wv(e,t){return!!bC(t)&&(ju().error("Accessor#set","Assigning an instance of '"+(t.declaredClass||"unknown")+"' which is not a subclass of '"+dg(e)+"'"),!0)}function y$(e,t){return t==null?t:wC(e)?C6(e,t):am(e,t)?Wv(e,t)?t:new e(t):t}function dg(e){var t;return((t=e==null?void 0:e.prototype)==null?void 0:t.declaredClass)||"unknown"}const O6=new WeakMap;function F6(e){switch(e){case Number:return t=>wc(t);case je:return f$;case Boolean:return M6;case String:return dh;case Date:return T6;case pg:return E6;default:return h$(O6,e,()=>y$.bind(null,e))}}function Zt(e,t){const r=F6(e);return arguments.length===1?r:r(t)}function kp(e,t,r){return arguments.length===1?kp.bind(null,e):t&&(Array.isArray(t)?t.map(i=>e(i,r)):[e(t,r)])}function k6(e,t){return arguments.length===1?kp(r=>Zt(e,r)):kp(r=>Zt(e,r),t)}function _C(e,t,r){return t!==0&&Array.isArray(r)?r.map(i=>_C(e,t-1,i)):e(r)}function lm(e,t,r){if(arguments.length===2)return n=>lm(e,t,n);if(!r)return r;r=_C(e,t,r);let i=t,s=r;for(;i>0&&Array.isArray(s);)i--,s=s[0];if(s!==void 0)for(let n=0;n<i;n++)r=[r];return r}function P6(e,t,r){return arguments.length===2?lm(i=>Zt(e,i),t):lm(i=>Zt(e,i),t,r)}function $C(e){return!!Array.isArray(e)&&!e.some(t=>{const r=typeof t;return!(r==="string"||r==="number"||r==="function"&&e.length>1)})}function Hv(e,t){if(arguments.length===2)return Hv(e).call(null,t);const r=new Set,i=e.filter(l=>typeof l!="function"),s=e.filter(l=>typeof l=="function");for(const l of e)typeof l!="string"&&typeof l!="number"||r.add(l);let n=null,o=null;return(l,c)=>{if(l==null)return l;const p=typeof l,h=p==="string"||p==="number";return h&&(r.has(l)||s.some(f=>p==="string"&&f===String||p==="number"&&f===Number))||p==="object"&&s.some(f=>!am(l,f))?l:(h&&i.length?(n||(n=i.map(f=>typeof f=="string"?`'${f}'`:`${f}`).join(", ")),ju().error("Accessor#set",`'${l}' is not a valid value for this property, only the following values are valid: ${n}`)):typeof l=="object"&&s.length?(o||(o=s.map(f=>dg(f)).join(", ")),ju().error("Accessor#set",`'${l}' is not a valid value for this property, value must be one of ${o}`)):ju().error("Accessor#set",`'${l}' is not a valid value for this property`),c&&(c.valid=!1),null)}}function Ti(e,t){if(arguments.length===2)return Ti(e).call(null,t);const r={},i=[],s=[];for(const c in e.typeMap){const p=e.typeMap[c];r[c]=Zt(p),i.push(dg(p)),s.push(c)}const n=()=>`'${i.join("', '")}'`,o=()=>`'${s.join("', '")}'`,l=typeof e.key=="string"?c=>c[e.key]:e.key;return c=>{if(e.base&&!am(e.base,c)||c==null)return c;const p=l(c)||e.defaultKeyValue,h=r[p];if(!h)return ju().error("Accessor#set",`Invalid property value, value needs to be one of ${n()}, or a plain object that can autocast (having .type = ${o()})`),null;if(!am(e.typeMap[p],c))return c;if(typeof e.key=="string"&&!bC(c)){const f={};for(const y in c)y!==e.key&&(f[y]=c[y]);return h(f)}return h(c)}}let je=class{},pg=class{};const Fae={native:e=>({type:"native",value:e}),array:e=>({type:"array",value:e}),oneOf:e=>({type:"one-of",values:e})};function L6(e){if(!e||!("type"in e))return!1;switch(e.type){case"native":case"array":case"one-of":return!0}return!1}function SC(e){switch(e.type){case"native":return Zt(e.value);case"array":return kp(SC(e.value));case"one-of":return N6(e);default:return null}}function N6(e){let t=null;return(r,i)=>Zv(r,e)?r:(t==null&&(t=Jv(e)),ju().error("Accessor#set",`Invalid property value, value needs to be of type ${t}`),i&&(i.valid=!1),null)}function Jv(e){switch(e.type){case"native":switch(e.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case je:return"integer";case Date:return"date";case pg:return"null";default:return dg(e.value)}case"array":return`array of ${Jv(e.value)}`;case"one-of":{const t=e.values.map(r=>Jv(r));return`one of ${t.slice(0,-1)} or ${t[t.length-1]}`}}return"unknown"}function Zv(e,t){if(e==null)return!0;switch(t.type){case"native":switch(t.value){case Number:case je:return typeof e=="number";case Boolean:return typeof e=="boolean";case String:return typeof e=="string";case pg:return e===null}return e instanceof t.value;case"array":return!!Array.isArray(e)&&!e.some(r=>!Zv(r,t.value));case"one-of":return t.values.some(r=>Zv(e,r))}}function u(e={}){return(t,r)=>{if(t===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${t.name}.${r}. Accessor does not support static properties.`);const i=Object.getOwnPropertyDescriptor(t,r),s=og(t,r);i&&(i.get||i.set?(s.get=i.get||s.get,s.set=i.set||s.set):"value"in i&&("value"in e&&G.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${r}" on "${t.constructor.name}" already defined in the metadata`,e),s.value=e.value=i.value)),e.readOnly!=null&&(s.readOnly=e.readOnly);const n=e.aliasOf;if(n){const c=typeof n=="string"?n:n.source,p=typeof n=="string"?null:n.overridable===!0;let h;s.dependsOn=[c],s.get=function(){let f=Po(this,c);if(typeof f=="function"){h||(h=c.split(".").slice(0,-1).join("."));const y=Po(this,h);y&&(f=f.bind(y))}return f},s.readOnly||(s.set=p?function(f){this._override(r,f)}:function(f){em(this,c,f)})}const o=e.type,l=e.types;if(!s.cast){let c;o?c=R6(o):l&&(c=Array.isArray(l)?kp(Ti(l[0])):Ti(l)),e.cast=j6(e.cast,c)}Aj(s,e),e.range&&(s.cast=A6(s.cast,e.range))}}function xC(e,t,r){const i=og(e,r);i.json||(i.json={});let s=i.json;return t!==void 0&&(s.origins||(s.origins={}),s.origins[t]||(s.origins[t]={}),s=s.origins[t]),s}function R6(e){let t=0,r=e;if(L6(e))return SC(e);for(;Array.isArray(r)&&r.length===1&&typeof r[0]!="string"&&typeof r[0]!="number";)r=r[0],t++;const i=r;if($C(i))return t===0?Hv(i):lm(Hv(i),t);if(t===1)return k6(i);if(t>1)return P6(i,t);const s=e;return s.from?s.from:Zt(s)}function j6(e,t){if(e||t)return e?t?(r,i)=>t(e(r,i),i):e:t}function D6(e){if(e.json&&e.json.origins){const t=e.json.origins,r={"web-document":["web-scene","web-map"]};for(const i in r)if(t[i]){const s=t[i];r[i].forEach(n=>{t[n]=s}),delete t[i]}}}let os=class extends nC{constructor(t,r,i){super(t,r,i)}};os.prototype.type="warning";function IC(e){var t;return!!e&&((t=e.prototype)==null?void 0:t.declaredClass)&&e.prototype.declaredClass.indexOf("esri.core.Collection")===0}const Yv=()=>G.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function hx(e,t,r){var i,s;e&&(!r&&!t.read||(i=t.read)!=null&&i.reader||((s=t.read)==null?void 0:s.enabled)===!1||z6(e)&&pr("read.reader",_c(e),t))}function _c(e){var r,i;const t=e.ndimArray??0;if(t>1)return U6(e);if(t===1)return fx(e);if("type"in e&&MC(e.type)){const s=(i=(r=e.type.prototype)==null?void 0:r.itemType)==null?void 0:i.Type,n=fx(typeof s=="function"?{type:s}:{types:s});return(o,l,c)=>{const p=n(o,l,c);return p&&new e.type(p)}}return m$(e)}function m$(e){return"type"in e?V6(e.type):q6(e.types)}function V6(e){return e.prototype.read?(t,r,i)=>{if(t==null)return t;const s=typeof t;if(s!=="object")return void Yv().error(`Expected JSON value of type 'object' to deserialize type '${e.prototype.declaredClass}', but got '${s}'`);const n=new e;return n.read(t,i),n}:e.fromJSON}function TC(e,t,r,i){return i!==0&&Array.isArray(t)?t.map(s=>TC(e,s,r,i-1)):e(t,void 0,r)}function U6(e){const t=m$(e),r=TC.bind(null,t),i=e.ndimArray??0;return(s,n,o)=>{if(s==null)return s;s=r(s,o,i);let l=i,c=s;for(;l>0&&Array.isArray(c);)l--,c=c[0];if(c!==void 0)for(let p=0;p<l;p++)s=[s];return s}}function fx(e){const t=m$(e);return(r,i,s)=>{if(r==null)return r;if(Array.isArray(r)){const o=[];for(const l of r){const c=t(l,void 0,s);c!==void 0&&o.push(c)}return o}const n=t(r,void 0,s);return n!==void 0?[n]:void 0}}function MC(e){if(!IC(e))return!1;const t=e.prototype.itemType;return!(!t||!t.Type)&&(typeof t.Type=="function"?g$(t.Type):EC(t.Type))}function z6(e){return"types"in e?EC(e.types):g$(e.type)}function g$(e){return!Array.isArray(e)&&!!e&&e.prototype&&("read"in e.prototype||"fromJSON"in e||MC(e))}function EC(e){for(const t in e.typeMap)if(!g$(e.typeMap[t]))return!1;return!0}function q6(e){let t=null;const r=e.errorContext??"type",i=e.validate;return(s,n,o)=>{if(s==null)return s;const l=typeof s;if(l!=="object")return void Yv().error(`Expected JSON value of type 'object' to deserialize, but got '${l}'`);t||(t=G6(e));const c=e.key;if(typeof c!="string")return;const p=s[c],h=p?t[p]:e.defaultKeyValue?e.typeMap[e.defaultKeyValue]:void 0;if(!h){const y=`Type '${p||"unknown"}' is not supported`;return o!=null&&o.messages&&s&&o.messages.push(new os(`${r}:unsupported`,y,{definition:s,context:o})),void Yv().error(y)}const f=new h;return f.read(s,o),i?i(f):f}}function G6(e){var r,i;const t={};for(const s in e.typeMap){const n=e.typeMap[s],o=ah(n.prototype);if(typeof e.key=="function")continue;const l=o[e.key];if(!l)continue;if((r=l.json)!=null&&r.type&&Array.isArray(l.json.type)&&l.json.type.length===1&&typeof l.json.type[0]=="string"){t[l.json.type[0]]=n;continue}const c=(i=l.json)==null?void 0:i.write;if(!(c!=null&&c.writer)){t[s]=n;continue}const p=c.target,h=typeof p=="string"?p:e.key,f={};c.writer(s,f,h),f[h]&&(t[f[h]]=n)}return t}function B6(e){if(e.json||(e.json={}),mx(e.json),gx(e.json),yx(e.json),e.json.origins)for(const t in e.json.origins)mx(e.json.origins[t]),gx(e.json.origins[t]),yx(e.json.origins[t]);return!0}function yx(e){e.name&&(e.read&&typeof e.read=="object"?e.read.source===void 0&&(e.read.source=e.name):e.read={source:e.name},e.write&&typeof e.write=="object"?e.write.target===void 0&&(e.write.target=e.name):e.write={target:e.name})}function mx(e){typeof e.read=="boolean"?e.read={enabled:e.read}:typeof e.read=="function"?e.read={enabled:!0,reader:e.read}:e.read&&typeof e.read=="object"&&e.read.enabled===void 0&&(e.read.enabled=!0)}function gx(e){typeof e.write=="boolean"?e.write={enabled:e.write}:typeof e.write=="function"?e.write={enabled:!0,writer:e.write}:e.write&&typeof e.write=="object"&&e.write.enabled===void 0&&(e.write.enabled=!0)}function vx(e,t){if(!t.write||t.write.writer||t.write.enabled===!1&&!t.write.overridePolicy)return;const r=(e==null?void 0:e.ndimArray)??0;e&&(r===1||"type"in e&&IC(e.type))?t.write.writer=J6:r>1?t.write.writer=Z6(r):t.types?Array.isArray(t.types)?t.write.writer=H6(t.types[0]):t.write.writer=W6(t.types):t.write.writer=Pp}function W6(e){return(t,r,i,s)=>t?AC(t,e,s)?Pp(t,r,i,s):void 0:Pp(t,r,i,s)}function AC(e,t,r){for(const i in t.typeMap)if(e instanceof t.typeMap[i])return!0;if(r!=null&&r.messages){const i=t.errorContext??"type",s=`Values of type '${(typeof t.key!="function"?e[t.key]:e.declaredClass)??"Unknown"}' cannot be written`;r&&r.messages&&e&&r.messages.push(new O(`${i}:unsupported`,s,{definition:e,context:r})),G.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer").error(s)}return!1}function H6(e){return(t,r,i,s)=>!t||!Array.isArray(t)?Pp(t,r,i,s):Pp(t.filter(n=>AC(n,e,s)),r,i,s)}function Pp(e,t,r,i){pr(r,um(e,i),t)}function um(e,t){return e&&typeof e.write=="function"?e.write({},t):e&&typeof e.toJSON=="function"?e.toJSON():typeof e=="number"?cm(e):e}function cm(e){return e===-1/0?-Number.MAX_VALUE:e===1/0?Number.MAX_VALUE:isNaN(e)?null:e}function J6(e,t,r,i){let s;e===null?s=null:e&&typeof e.map=="function"?(s=e.map(n=>um(n,i)),typeof s.toArray=="function"&&(s=s.toArray())):s=[um(e,i)],pr(r,s,t)}function CC(e,t,r){return r!==0&&Array.isArray(e)?e.map(i=>CC(i,t,r-1)):um(e,t)}function Z6(e){return(t,r,i,s)=>{let n;if(t===null)n=null;else{n=CC(t,s,e);let o=e,l=n;for(;o>0&&Array.isArray(l);)o--,l=l[0];if(l!==void 0)for(let c=0;c<o;c++)n=[n]}pr(i,n,r)}}function Y6(e,t){return v$(e,"any",t==null?void 0:t.origin)}function Qv(e,t){return v$(e,"read",t==null?void 0:t.origin)}function OC(e,t){return v$(e,"write",t==null?void 0:t.origin)}function v$(e,t,r){let i=e==null?void 0:e.json;if(i!=null&&i.origins&&r){let s;s=r==="link-chart"?i.origins[r]&&(t==="any"||t in i.origins[r])?i.origins[r]:i.origins["web-map"]:i.origins[r],s&&(t==="any"||t in s)&&(i=s)}return i}function Q6(e){var r;const t=K6(e);if(e.json.origins)for(const i in e.json.origins){const s=e.json.origins[i],n=s.types?X6(s):t;hx(n,s,!1),s.types&&!s.write&&((r=e.json.write)!=null&&r.enabled)&&(s.write={...e.json.write}),vx(n,s)}hx(t,e.json,!0),vx(t,e.json)}function K6(e){return e.json.types?Kv(e.json):e.type?FC(e):Kv(e)}function X6(e){return e.type?FC(e):Kv(e)}function FC(e){if(!e.type)return;let t=0,r=e.type;for(;Array.isArray(r)&&!$C(r);)r=r[0],t++;return{type:r,ndimArray:t}}function Kv(e){if(!e.types)return;let t=0,r=e.types;for(;Array.isArray(r);)r=r[0],t++;return{types:r,ndimArray:t}}function eD(e){B6(e)&&(D6(e),Q6(e))}const h0=new Set,f0=new Set;function _(e){return t=>{e??(e="esri.core.Accessor"),t.prototype.declaredClass=e,rD(t);const r=[],i=[];let s=t.prototype;for(;s;)s.hasOwnProperty("initialize")&&!h0.has(s.initialize)&&(h0.add(s.initialize),r.push(s.initialize)),s.hasOwnProperty("destroy")&&!f0.has(s.destroy)&&(f0.add(s.destroy),i.push(s.destroy)),s=Object.getPrototypeOf(s);h0.clear(),f0.clear();const n=class extends t{constructor(...l){if(super(...l),this.constructor===n&&typeof this.postscript=="function"){if(r.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let c=r.length-1;c>=0;c--)r[c].call(this)}}),i.length){let c=!1;const p=this[JA];Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!c){c=!0,p.call(this);for(let h=0;h<i.length;h++)i[h].call(this)}}})}Object.defineProperty(this,Symbol.dispose,{enumerable:!1,configurable:!0,value(){this.destroy()}}),this.postscript()}}};n.__accessorMetadata__=ah(t.prototype),n.prototype.declaredClass=e;const o=(e||"AccessorSubclass").split(".").slice(-1)[0];return Object.defineProperty(n,"name",{value:o,configurable:!0}),n}}function tD(e,t){return t.get==null?function(){const r=this.__accessor__,i=r.propertiesByName.get(e);if(i===void 0)return;r.mutable&&X(i);const s=r.store;return s.has(e)?s.get(e):i.metadata.value}:function(){const r=this.__accessor__,i=r.propertiesByName.get(e);if(i!==void 0)return i.getComputed(r)}}function rD(e){const t=e.prototype,r=ah(t),i={};for(const s of Object.getOwnPropertyNames(r)){const n=r[s];eD(n),i[s]={enumerable:!0,configurable:!0,get:tD(s,n),set(o){const l=this.__accessor__;if(l!==void 0){if(l.mutable)return l.initialized&&n.readOnly?bx("read-only",s):l.lifecycle===kr.CONSTRUCTED&&n.constructOnly?bx("construct-only",s):void l.set(s,o)}else Object.defineProperty(this,s,{enumerable:!0,configurable:!0,writable:!0,value:o})}}}Object.defineProperties(e.prototype,i)}const bx=(e,t)=>{G.getLogger("esri.core.Accessor").error(`cannot assign to ${e} property '${t}'`)};var kC,PC;function iD(e){var t;if(e==null)return{value:e};if(Array.isArray(e))return{type:[e[0]],value:null};switch(typeof e){case"object":return(t=e.constructor)!=null&&t.__accessorMetadata__||e instanceof Date?{type:e.constructor,value:e}:e;case"boolean":return{type:Boolean,value:e};case"string":return{type:String,value:e};case"number":return{type:Number,value:e};case"function":return{type:e,value:null};default:return}}const ps=Symbol("Accessor-Handles"),Xv=Symbol("Accessor-Initialized");let $e=class Uf{static createSubclass(t={}){if(Array.isArray(t))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:r,declaredClass:i,constructor:s}=t;delete t.declaredClass,delete t.properties,delete t.constructor;const n=this;class o extends n{constructor(...c){super(...c),this.inherited=null,s&&s.apply(this,c)}}ah(o.prototype);for(const l in t){const c=t[l];o.prototype[l]=typeof c=="function"?function(...p){const h=this.inherited;let f;this.inherited=function(...y){if(n.prototype[l])return n.prototype[l].apply(this,y)};try{f=c.apply(this,p)}catch(y){throw this.inherited=h,y}return this.inherited=h,f}:t[l]}for(const l in r){const c=iD(r[l]);u(c)(o.prototype,l)}return _(i)(o)}static freeze(t){return t instanceof Uf?t.__accessor__.mutable=!1:Object.freeze(t),t}static isFrozen(t){return t instanceof Uf?!t.__accessor__.mutable:Object.isFrozen(t)}constructor(...t){var i;if(this[kC]=null,this[PC]=!1,this.constructor===Uf)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");const r=new Vj(this);Object.defineProperty(this,"__accessor__",{enumerable:!1,value:r}),t.length>0&&(r.ctorArgs=((i=this.normalizeCtorArgs)==null?void 0:i.apply(this,t))??t[0])}postscript(){const t=this.__accessor__,r=t.ctorArgs;t.initialize(),r&&(this.set(r),t.ctorArgs=null),t.constructed(),this.initialize(),this[Xv]=!0}initialize(){}[JA](){this[ps]=Ps(this[ps])}destroy(){var t;this.destroyed||(m6(this),this.__accessor__.destroy(),(t=Hj())==null||t.onInstanceDestroy(this))}[Symbol.dispose](){this.destroy()}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[Xv]}get destroyed(){var t;return((t=this.__accessor__)==null?void 0:t.lifecycle)===kr.DESTROYED||!1}commitProperty(t){Po(this,t)}get(t){return xA(G.getLogger(this),"`Accessor.get` is deprecated in favor of using optional chaining",{version:"4.28",see:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Optional_chaining"}),Po(this,t)}hasOwnProperty(t){return this.__accessor__?this.__accessor__.has(t):Object.prototype.hasOwnProperty.call(this,t)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(t,r){return em(this,t,r),this}watch(t,r,i){return $6(this,t,r,i)}addHandles(t,r){if(this.destroyed){const i=Array.isArray(t)?t:[t];for(const s of i)s.remove();return}(this[ps]??(this[ps]=new i$)).add(t,r)}removeHandles(t){var r;(r=this[ps])==null||r.remove(t)}removeAllHandles(){var t;(t=this[ps])==null||t.removeAll()}removeHandlesReference(t){var r;(r=this[ps])==null||r.removeReference(t)}hasHandles(t){var r;return((r=this[ps])==null?void 0:r.has(t))===!0}_override(t,r){r===void 0?this.__accessor__.clearOverride(t):this.__accessor__.override(t,r)}_clearOverride(t){return this.__accessor__.clearOverride(t)}_overrideIfSome(t,r){r==null?this.__accessor__.clearOverride(t):this.__accessor__.override(t,r)}_isOverridden(t){return this.__accessor__.isOverridden(t)}notifyChange(t){this.__accessor__.notifyChange(t)}_get(t){return this.__accessor__.internalGet(t)}_set(t,r){return this.__accessor__.internalSet(t,r),this}};kC=ps,PC=Xv;const Oe=e=>{let t=class extends e{clone(){var c;const r=jr(this);WA(r,"unable to clone instance of non-accessor class");const i=r.metadata,s=r.store,n={},o=new Map;for(const p in i){const h=i[p],f=s==null?void 0:s.originOf(p),y=h.clonable;if(h.readOnly||y===!1||f!==me.USER&&f!==me.DEFAULTS&&f!==me.WEB_MAP&&f!==me.WEB_SCENE)continue;const m=this[p];let g=null;g=typeof y=="function"?y(m):y==="reference"?m:jv(m),m!=null&&g==null||(f===me.DEFAULTS?o.set(p,g):n[p]=g)}const l=new(Object.getPrototypeOf(this)).constructor(n);if(o.size){const p=(c=jr(l))==null?void 0:c.store;if(p)for(const[h,f]of o)p.set(h,f,me.DEFAULTS)}return l}};return t=a([_("esri.core.Clonable")],t),t};let wx=class extends Oe($e){};wx=a([_("esri.core.Clonable")],wx);let eb=class LC{constructor(){this._emitter=new LC.EventEmitter(this)}emit(t,r){return this._emitter.emit(t,r)}on(t,r){return this._emitter.on(t,r)}once(t,r){return this._emitter.once(t,r)}hasEventListener(t){return this._emitter.hasEventListener(t)}};(function(e){class t{constructor(s=null){this._target=s,this._listenersMap=null}clear(){var s;(s=this._listenersMap)==null||s.clear(),this._listenersMap=null}destroy(){this.clear()}emit(s,n){var p;let o=(p=this._listenersMap)==null?void 0:p.get(s);if(!o)return!1;const l=this._target||this;let c=!1;for(const h of o.slice()){const f="deref"in h?h.deref():h;f?f==null||f.call(l,n):c=!0}return c&&(o=o.filter(h=>!("deref"in h)||h.deref()!=null),this._listenersMap.set(s,o)),o.length>0}on(s,n){if(Array.isArray(s)){const l=s.map(c=>this.on(c,n));return nh(l)}if(s.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap??(this._listenersMap=new Map);const o=this._listenersMap.get(s)||[];return o.push(n),this._listenersMap.set(s,o),pt(()=>{var p;const l=(p=this._listenersMap)==null?void 0:p.get(s),c=(l==null?void 0:l.indexOf(n))??-1;c>=0&&l.splice(c,1)})}once(s,n){const o=this.on(s,l=>{o.remove();const c="deref"in n?n.deref():n;c==null||c.call(null,l)});return o}hasEventListener(s){var o;const n=(o=this._listenersMap)==null?void 0:o.get(s);return n!=null&&n.length>0}}e.EventEmitter=t,e.EventedMixin=i=>{let s=class extends i{constructor(){super(...arguments),this._emitter=new t}destroy(){this._emitter.clear()}emit(n,o){return this._emitter.emit(n,o)}on(n,o){return this._emitter.on(n,o)}once(n,o){return this._emitter.once(n,o)}hasEventListener(n){return this._emitter.hasEventListener(n)}};return s=a([_("esri.core.Evented")],s),s};let r=class extends $e{constructor(){super(...arguments),this._emitter=new eb.EventEmitter(this)}destroy(){this._emitter.clear()}emit(i,s){return this._emitter.emit(i,s)}on(i,s){return this._emitter.on(i,s)}once(i,s){return this._emitter.once(i,s)}hasEventListener(i){return this._emitter.hasEventListener(i)}};r=a([_("esri.core.Evented.EventedAccessor")],r),e.EventedAccessor=r})(eb);const ph=eb;var Me;(function(e){e[e.ADD=1]="ADD",e[e.REMOVE=2]="REMOVE",e[e.MOVE=4]="MOVE"})(Me||(Me={}));function NC(e){return(t,r)=>{t[r]=e}}let hh=class extends XA{notify(){const t=this._observers;if(t&&t.length>0){const r=t.slice();for(const i of r)i.onInvalidated(),i.onCommitted()}}};var hn;let sD=class{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(t){this.defaultPrevented=!1,this.item=t}},nD=class{constructor(t,r,i,s,n){this.target=t,this.added=r,this.removed=i,this.start=s,this.deleteCount=n}};const li=new bc(sD,void 0,e=>{e.item=null,e.target=null,e.defaultPrevented=!1,e.cancellable=!1});function _x(e){e&&typeof e=="object"&&"destroy"in e&&typeof e.destroy=="function"&&e.destroy()}function y0(e){return e?e instanceof un?e.toArray():e.length?Array.prototype.slice.apply(e):[]:[]}function m0(e){if(e!=null&&e.length)return e[0]}function oD(e,t,r,i){const s=Math.min(e.length-r,t.length-i);let n=0;for(;n<s&&e[r+n]===t[i+n];)n++;return n}function RC(e,t,r,i){t&&t.forEach((s,n,o)=>{e.push(s),RC(e,r.call(i,s,n,o),r,i)})}const kn=new Set,Pn=new Set,Ln=new Set,g0=new Map;let aD=0,un=hn=class extends ph.EventedAccessor{static isCollection(e){return e!=null&&e instanceof hn}constructor(e){super(e),this._chgListeners=[],this._notifications=null,this._updating=!1,this._timer=null,this._observable=new hh,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:aD++})}normalizeCtorArgs(e){return e?Array.isArray(e)||e instanceof hn?{items:e}:e:{}}destroy(){this._removeAllRaw(),this._timer&&this._timer.remove(),this._emitter.destroy(),this._notifications=null}*[Symbol.iterator](){yield*this.items}get items(){return X(this._observable),this._items}set items(e){this._emitBeforeChanges(Me.ADD)||(this._splice(0,this.length,y0(e)),this._emitAfterChanges(Me.ADD))}hasEventListener(e){return!this.destroyed&&(e==="change"?this._chgListeners.length>0:this._emitter.hasEventListener(e))}on(e,t){if(this.destroyed)return pt();if(e==="change"){const r=this._chgListeners,i={removed:!1,callback:t};return r.push(i),this._notifications&&this._notifications.push({listeners:r.slice(),items:this._items.slice(),changes:[]}),pt(()=>{i.removed=!0,r.splice(r.indexOf(i),1)})}return this._emitter.on(e,t)}once(e,t){const r="deref"in t?()=>t.deref():()=>t,i=this.on(e,s=>{var n;(n=r())==null||n.call(null,s),i.remove()});return i}add(e,t){if(X(this._observable),this._emitBeforeChanges(Me.ADD))return this;const r=this.getNextIndex(t??null);return this._splice(r,0,[e]),this._emitAfterChanges(Me.ADD),this}addMany(e,t=this._items.length){if(X(this._observable),!(e!=null&&e.length))return this;if(this._emitBeforeChanges(Me.ADD))return this;const r=this.getNextIndex(t);return this._splice(r,0,y0(e)),this._emitAfterChanges(Me.ADD),this}at(e){if(X(this._observable),(e=Math.trunc(e)||0)<0&&(e+=this.length),!(e<0||e>=this.length))return this._items[e]}removeAll(){if(X(this._observable),!this.length||this._emitBeforeChanges(Me.REMOVE))return[];const e=this._removeAllRaw();return this._emitAfterChanges(Me.REMOVE),e}_removeAllRaw(){return this.length===0?[]:this._splice(0,this.length)||[]}clone(){return X(this._observable),this._createNewInstance({items:this._items.map(M)})}concat(...e){X(this._observable);const t=e.map(y0);return this._createNewInstance({items:this._items.concat(...t)})}drain(e,t){if(X(this._observable),!this.length||this._emitBeforeChanges(Me.REMOVE))return;const r=this._splice(0,this.length),i=r.length;for(let s=0;s<i;s++)e.call(t,r[s],s,r);this._emitAfterChanges(Me.REMOVE)}destroyAll(){this.drain(_x)}destroyMany(e){const t=this.removeMany(e);return t.forEach(_x),t}every(e,t){return X(this._observable),this._items.every(e,t)}filter(e,t){let r;return X(this._observable),r=arguments.length===2?this._items.filter(e,t):this._items.filter(e),this._createNewInstance({items:r})}find(e,t){return X(this._observable),this._items.find(e,t)}findIndex(e,t){return X(this._observable),this._items.findIndex(e,t)}flatten(e,t){X(this._observable);const r=[];return RC(r,this,e,t),new hn(r)}forEach(e,t){return X(this._observable),this._items.forEach(e,t)}getItemAt(e){return X(this._observable),this._items[e]}getNextIndex(e){X(this._observable);const t=this.length;return(e=e??t)<0?e=0:e>t&&(e=t),e}includes(e,t=0){return X(this._observable),this._items.includes(e,t)}indexOf(e,t=0){return X(this._observable),this._items.indexOf(e,t)}join(e=","){return X(this._observable),this._items.join(e)}lastIndexOf(e,t=this.length-1){return X(this._observable),this._items.lastIndexOf(e,t)}map(e,t){X(this._observable);const r=this._items.map(e,t);return new hn({items:r})}reorder(e,t=this.length-1){X(this._observable);const r=this.indexOf(e);if(r!==-1){if(t<0?t=0:t>=this.length&&(t=this.length-1),r!==t){if(this._emitBeforeChanges(Me.MOVE))return e;this._splice(r,1),this._splice(t,0,[e]),this._emitAfterChanges(Me.MOVE)}return e}}pop(){if(X(this._observable),!this.length||this._emitBeforeChanges(Me.REMOVE))return;const e=m0(this._splice(this.length-1,1));return this._emitAfterChanges(Me.REMOVE),e}push(...e){return X(this._observable),this._emitBeforeChanges(Me.ADD)||(this._splice(this.length,0,e),this._emitAfterChanges(Me.ADD)),this.length}reduce(e,t){X(this._observable);const r=this._items;return arguments.length===2?r.reduce(e,t):r.reduce(e)}reduceRight(e,t){X(this._observable);const r=this._items;return arguments.length===2?r.reduceRight(e,t):r.reduceRight(e)}remove(e){return X(this._observable),this.removeAt(this.indexOf(e))}removeAt(e){if(X(this._observable),e<0||e>=this.length||this._emitBeforeChanges(Me.REMOVE))return;const t=m0(this._splice(e,1));return this._emitAfterChanges(Me.REMOVE),t}removeMany(e){if(X(this._observable),!(e!=null&&e.length)||this._emitBeforeChanges(Me.REMOVE))return[];const t=e instanceof hn?e.toArray():e,r=this._items,i=[],s=t.length;for(let n=0;n<s;n++){const o=t[n],l=r.indexOf(o);if(l>-1){const c=1+oD(t,r,n+1,l+1),p=this._splice(l,c);p&&p.length>0&&i.push.apply(i,p),n+=c-1}}return this._emitAfterChanges(Me.REMOVE),i}reverse(){if(X(this._observable),this._emitBeforeChanges(Me.MOVE))return this;const e=this._splice(0,this.length);return e&&(e.reverse(),this._splice(0,0,e)),this._emitAfterChanges(Me.MOVE),this}shift(){if(X(this._observable),!this.length||this._emitBeforeChanges(Me.REMOVE))return;const e=m0(this._splice(0,1));return this._emitAfterChanges(Me.REMOVE),e}slice(e=0,t=this.length){return X(this._observable),this._createNewInstance({items:this._items.slice(e,t)})}some(e,t){return X(this._observable),this._items.some(e,t)}sort(e){if(X(this._observable),!this.length||this._emitBeforeChanges(Me.MOVE))return this;const t=this._splice(0,this.length);return arguments.length?t.sort(e):t.sort(),this._splice(0,0,t),this._emitAfterChanges(Me.MOVE),this}splice(e,t,...r){X(this._observable);const i=(t?Me.REMOVE:0)|(r.length?Me.ADD:0);if(this._emitBeforeChanges(i))return[];const s=this._splice(e,t,r)||[];return this._emitAfterChanges(i),s}toArray(){return X(this._observable),this._items.slice()}toJSON(){return X(this._observable),this.toArray()}toLocaleString(){return X(this._observable),this._items.toLocaleString()}toString(){return X(this._observable),this._items.toString()}unshift(...e){return X(this._observable),!e.length||this._emitBeforeChanges(Me.ADD)||(this._splice(0,0,e),this._emitAfterChanges(Me.ADD)),this.length}_createNewInstance(e){return new this.constructor(e)}_splice(e,t,r){const i=this._items,s=this.itemType;let n,o;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._updating=!0,this._timer=pC(()=>this._dispatchChange())),e<0&&(e+=this.length),t){if(o=i.splice(e,t),this.hasEventListener("before-remove")){const l=li.acquire();l.target=this,l.cancellable=!0;for(let c=0,p=o.length;c<p;c++)n=o[c],l.reset(n),this.emit("before-remove",l),l.defaultPrevented&&(o.splice(c,1),i.splice(e,0,n),e+=1,c-=1,p-=1);li.release(l)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const l=li.acquire();l.target=this,l.cancellable=!1;const c=o.length;for(let p=0;p<c;p++)l.reset(o[p]),this.emit("after-remove",l);li.release(l)}}if(r!=null&&r.length){if(s){const h=[];for(const f of r){const y=s.ensureType(f);y==null&&f!=null||h.push(y)}r=h}const l=this.hasEventListener("before-add"),c=this.hasEventListener("after-add"),p=e===this.length;if(l||c){const h=li.acquire();h.target=this,h.cancellable=!0;const f=li.acquire();f.target=this,f.cancellable=!1;for(const y of r)l?(h.reset(y),this.emit("before-add",h),h.defaultPrevented||(p?i.push(y):i.splice(e++,0,y),this._set("length",i.length),c&&(f.reset(y),this.emit("after-add",f)))):(p?i.push(y):i.splice(e++,0,y),this._set("length",i.length),f.reset(y),this.emit("after-add",f));li.release(f),li.release(h)}else{if(p)for(const h of r)i.push(h);else i.splice(e,0,...r);this._set("length",i.length)}}if((r!=null&&r.length||o!=null&&o.length)&&this._notifyChangeEvent(r,o),this.hasEventListener("after-splice")){const l=new nD(this,r,o,e,t);this.emit("after-splice",l)}return o}_emitBeforeChanges(e){let t=!1;if(this.hasEventListener("before-changes")){const r=li.acquire();r.target=this,r.cancellable=!0,r.type=e,this.emit("before-changes",r),t=r.defaultPrevented,li.release(r)}return t}_emitAfterChanges(e){if(this.hasEventListener("after-changes")){const t=li.acquire();t.target=this,t.cancellable=!1,t.type=e,this.emit("after-changes",t),li.release(t)}this._observable.notify()}_notifyChangeEvent(e,t){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:e,removed:t})}get updating(){return this._updating}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),this._updating=!1,!this._notifications)return;const e=this._notifications;this._notifications=null;for(const t of e){const r=t.changes;kn.clear(),Pn.clear(),Ln.clear();for(const{added:c,removed:p}of r){if(c)if(Ln.size===0&&Pn.size===0)for(const h of c)kn.add(h);else for(const h of c)Pn.has(h)?(Ln.add(h),Pn.delete(h)):Ln.has(h)||kn.add(h);if(p)if(Ln.size===0&&kn.size===0)for(const h of p)Pn.add(h);else for(const h of p)kn.has(h)?kn.delete(h):(Ln.delete(h),Pn.add(h))}const i=Os.acquire();kn.forEach(c=>{i.push(c)});const s=Os.acquire();Pn.forEach(c=>{s.push(c)});const n=this._items,o=t.items,l=Os.acquire();if(Ln.forEach(c=>{o.indexOf(c)!==n.indexOf(c)&&l.push(c)}),t.listeners&&(i.length||s.length||l.length)){const c={target:this,added:i,removed:s,moved:l},p=t.listeners.length;for(let h=0;h<p;h++){const f=t.listeners[h];f.removed||f.callback.call(this,c)}}Os.release(i),Os.release(s),Os.release(l)}kn.clear(),Pn.clear(),Ln.clear()}};un.ofType=e=>{if(!e)return hn;if(g0.has(e))return g0.get(e);let t=null;if(typeof e=="function")t=e.prototype.declaredClass;else if(e.base)t=e.base.prototype.declaredClass;else for(const i in e.typeMap){const s=e.typeMap[i].prototype.declaredClass;t?t+=` | ${s}`:t=s}let r=class extends hn{};return a([NC({Type:e,ensureType:typeof e=="function"?Zt(e):Ti(e)})],r.prototype,"itemType",void 0),r=a([_(`esri.core.Collection<${t}>`)],r),g0.set(e,r),r},a([u()],un.prototype,"_updating",void 0),a([u()],un.prototype,"length",void 0),a([u()],un.prototype,"items",null),a([u({readOnly:!0})],un.prototype,"updating",null),un=hn=a([_("esri.core.Collection")],un);const ne=un;let lD=class jC{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const r=new jC;return this._values.forEach((i,s)=>{t&&t.has(s)||r.set(s,M(i.value),i.origin)}),r}get(t,r){r=this._normalizeOrigin(r);const i=this._values.get(t);return r==null||(i==null?void 0:i.origin)===r?i==null?void 0:i.value:void 0}originOf(t){var r;return((r=this._values.get(t))==null?void 0:r.origin)??me.USER}keys(t){t=this._normalizeOrigin(t);const r=[...this._values.keys()];return t==null?r:r.filter(i=>{var s;return((s=this._values.get(i))==null?void 0:s.origin)===t})}set(t,r,i){if((i=this._normalizeOrigin(i))===me.DEFAULTS){const s=this._values.get(t);if((s==null?void 0:s.origin)!=null&&s.origin>i)return}this._values.set(t,new uD(r,i))}delete(t,r){var i;(r=this._normalizeOrigin(r))!=null&&((i=this._values.get(t))==null?void 0:i.origin)!==r||this._values.delete(t)}has(t,r){var i;return(r=this._normalizeOrigin(r))!=null?((i=this._values.get(t))==null?void 0:i.origin)===r:this._values.has(t)}forEach(t){this._values.forEach(({value:r},i)=>t(r,i))}_normalizeOrigin(t){if(t!=null)return t===me.DEFAULTS?t:me.USER}},uD=class{constructor(t,r){this.value=t,this.origin=r}};function DC(e,t,r){t.keys().forEach(s=>{r.set(s,t.get(s),me.DEFAULTS)});const i=e.metadata;Object.keys(i).forEach(s=>{e.internalGet(s)&&r.set(s,e.internalGet(s),me.DEFAULTS)})}function cD(e,t,r){if(!(e!=null&&e.read)||e.read.enabled===!1||!e.read.source)return!1;const i=e.read.source;if(typeof i=="string"){if(i===t||i.includes(".")&&i.indexOf(t)===0&&ex(i,r))return!0}else for(const s of i)if(s===t||s.includes(".")&&s.indexOf(t)===0&&ex(s,r))return!0;return!1}function dD(e){return e&&(!e.read||e.read.enabled!==!1&&!e.read.source)}function pD(e,t,r,i,s){let n=Qv(t[r],s);dD(n)&&(e[r]=!0);for(const o of Object.getOwnPropertyNames(t))n=Qv(t[o],s),cD(n,r,i)&&(e[o]=!0)}function hD(e,t,r,i){const s=r.metadata,n=Y6(s[t],i),o=n==null?void 0:n.default;if(o===void 0)return;const l=typeof o=="function"?o.call(e,t,i):o;l!==void 0&&r.set(t,l)}const VC={origin:"service"};function UC(e,t,r=VC){if(!t||typeof t!="object")return;const i=jr(e),s=i.metadata,n={};for(const o of Object.getOwnPropertyNames(t))pD(n,s,o,t,r);i.setDefaultOrigin(r.origin);for(const o of Object.getOwnPropertyNames(n)){const l=Qv(s[o],r).read,c=l==null?void 0:l.source;let p;p=c&&typeof c=="string"?oh(t,c):t[o],l!=null&&l.reader&&(p=l.reader.call(e,p,t,r)),p!==void 0&&i.set(o,p)}if(!r||!r.ignoreDefaults){i.setDefaultOrigin("defaults");for(const o of Object.getOwnPropertyNames(s))n[o]||hD(e,o,i,r)}i.setDefaultOrigin("user")}function fD(e,t,r,i=VC){var n;const s={...i,messages:[]};r(s),(n=s.messages)==null||n.forEach(o=>{o.type!=="warning"||e.loaded?i!=null&&i.messages&&i.messages.push(o):e.loadWarnings.push(o)})}function yD(e,t,r,i,s){var o,l;const n={};return(l=(o=t.write)==null?void 0:o.writer)==null||l.call(e,i,n,r,s),n}function zC(e,t,r,i,s,n){if(!(i!=null&&i.write))return!1;const o=Po(e,r);if(!s&&i.write.overridePolicy){const l=i.write.overridePolicy.call(e,o,r,n??void 0);l!==void 0&&(s=l)}if(s||(s=i.write),!s||s.enabled===!1||s.layerContainerTypes&&(n!=null&&n.layerContainerType)&&!s.layerContainerTypes.includes(n.layerContainerType))return!1;if((o===null&&!s.allowNull&&!s.writerEnsuresNonNull||o===void 0)&&s.isRequired){const l=new O("web-document-write:property-required",`Missing value for required property '${r}' on '${e.declaredClass}'`,{propertyName:r,target:e});return l&&(n!=null&&n.messages)?n.messages.push(l):l&&!n&&G.getLogger("esri.core.accessorSupport.write").error(l.name,l.message),!1}return!(o===void 0||o===null&&!s.allowNull&&!s.writerEnsuresNonNull||!s.alwaysWriteDefaults&&(!t.store.multipleOriginsSupported||t.store.originOf(r)===me.DEFAULTS)&&mD(e,r,n,i,o)||!s.ignoreOrigin&&(n!=null&&n.origin)&&t.store.multipleOriginsSupported&&t.store.originOf(r)<wo(n.origin))}function mD(e,t,r,i,s){const n=i.default;if(n===void 0)return!1;if(i.defaultEquals!=null)return i.defaultEquals(s);if(typeof n=="function"){if(Array.isArray(s)){const o=n.call(e,t,r??void 0);return ig(o,s)}return!1}return n===s}function gD(e,t,r,i){const s=jr(e),n=s.metadata,o=OC(n[t],i);return!!o&&zC(e,s,t,o,r,i)}function qC(e,t,r){var n,o;if(e&&typeof e.toJSON=="function"&&(!e.toJSON.isDefaultToJSON||!e.write))return Nf(t,e.toJSON(r));const i=jr(e),s=i.metadata;for(const l in s){const c=OC(s[l],r);if(!zC(e,i,l,c,void 0,r))continue;const p=Po(e,l),h=yD(e,c,c.write&&typeof c.write.target=="string"?c.write.target:l,p,r);Object.keys(h).length>0&&(t=Nf(t,h),(o=(n=r==null?void 0:r.resources)==null?void 0:n.pendingOperations)!=null&&o.length&&r.resources.pendingOperations.push(Promise.all(r.resources.pendingOperations).then(()=>Nf(t,h,()=>"replace-arrays"))),r!=null&&r.writtenProperties&&r.writtenProperties.push({target:e,propName:l,oldOrigin:Nj(i.store.originOf(l)),newOrigin:r.origin}))}return t}const hg=e=>{let t=class extends e{constructor(...r){super(...r);const i=jr(this),s=i.store,n=new lD;i.store=n,DC(i,s,n)}read(r,i){UC(this,r,i)}write(r,i){return qC(this,r??{},i)}toJSON(r){return this.write({},r)}static fromJSON(r,i){return vD.call(this,r,i)}};return t=a([_("esri.core.JSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function vD(e,t){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const r=new this;return r.read(e,t),r}function dm(e){return e&&typeof e=="object"&&"toJSON"in e&&typeof e.toJSON=="function"}let R=class extends hg($e){};R=a([_("esri.core.JSONSupport")],R);const bD=Object.prototype.toString;function wD(e){const t="__accessorMetadata__"in e?Zt(e):e;return function(...r){if(r.push(t),typeof r[2]=="number")throw new Error("Using @cast has parameter decorator is not supported since 4.16");return _D.apply(this,r)}}function _D(e,t,r,i){og(e,t).cast=i}function $D(e){return(t,r)=>{og(t,e).cast=t[r]}}function Ce(...e){if(e.length!==3||typeof e[1]!="string")return e.length===1&&bD.call(e[0])==="[object Function]"?wD(e[0]):e.length===1&&typeof e[0]=="string"?$D(e[0]):void 0}function D(e,t,r){let i,s;return t===void 0||Array.isArray(t)?(s=e,r=t,i=[void 0]):(s=t,i=Array.isArray(e)?e:[e]),(n,o)=>{const l=n.constructor.prototype;i.forEach(c=>{const p=xC(n,c,s);p.read&&typeof p.read=="object"||(p.read={}),p.read.reader=l[o],r&&(p.read.source=(p.read.source||[]).concat(r))})}}function B(e,t,r){let i,s;return t===void 0?(s=e,i=[void 0]):typeof t!="string"?(s=e,i=[void 0],r=t):(s=t,i=Array.isArray(e)?e:[e]),(n,o)=>{const l=n.constructor.prototype;for(const c of i){const p=xC(n,c,s);p.write&&typeof p.write=="object"||(p.write={}),r&&(p.write.target=r),p.write.writer=l[o]}}}async function SD(e,t){const{WhereClause:r}=await j(()=>import("./WhereClause-Dm4_COZf.js").then(i=>i.W),[]);return r.create(e,{fieldsIndex:t})}function xD(e,t){return e==="1=1"?t??e:t==="1=1"?e??t:e!=null&&e!==""?t!=null&&t!==""?`(${e}) AND (${t})`:e:t}let ve=class{constructor(t,r={ignoreUnknown:!1,useNumericKeys:!1}){this._jsonToAPI=t,this._options=r,this.apiValues=[],this.jsonValues=[],this._apiToJSON=ID(t),this.apiValues=$x(this._apiToJSON),this.jsonValues=$x(this._jsonToAPI),this.read=i=>this.fromJSON(i),this.write=(i,s,n)=>{const o=this.toJSON(i);o!==void 0&&pr(n,o,s)},this.write.isJSONMapWriter=!0}toJSON(t){if(t==null)return null;if(this._apiToJSON.hasOwnProperty(t)){const r=this._apiToJSON[t];return this._options.useNumericKeys?+r:r}return this._options.ignoreUnknown?void 0:t}fromJSON(t){return t!=null&&this._jsonToAPI.hasOwnProperty(t)?this._jsonToAPI[t]:this._options.ignoreUnknown?void 0:t}};function ID(e){const t={};for(const r in e)t[e[r]]=r;return t}function $x(e){const t=[];for(const r in e)t.push(r);return t.sort(),t}function Kt(){return function(e,t){return new ve(e,{ignoreUnknown:!0,...t})}}let lp;var wA,_A;const TD=((wA=globalThis.esriConfig)==null?void 0:wA.locale)??((_A=globalThis.dojoConfig)==null?void 0:_A.locale);var $A;const up=($A=globalThis.document)==null?void 0:$A.documentElement;function GC(){var r;const e=up==null?void 0:up.getAttribute("lang"),t=(r=globalThis.navigator)==null?void 0:r.language;return TD??e??t??"en"}function Nr(){return lp===void 0&&(lp=GC()),lp}function MD(e=Nr()){const t=/^([a-zA-Z]{2,3})(?:[_-][a-zA-Z0-9]+)*$/.exec(e);return t==null?void 0:t[1].toLowerCase()}const zf=[];function ED(e){return zf.push(e),pt(()=>zf.splice(zf.indexOf(e),1))}const qf=[];function b$(e){return qf.push(e),pt(()=>qf.splice(qf.indexOf(e),1))}function Sx(){const e=GC();lp!==e&&([...qf].forEach(t=>t(e)),lp=e,[...zf].forEach(t=>t(e)))}var SA;(SA=globalThis.addEventListener)==null||SA.call(globalThis,"languagechange",Sx),up&&new MutationObserver(()=>{Sx()}).observe(up,{attributeFilter:["lang"]});const xx=new Map([["AUS Central Standard Time","Australia/Darwin"],["AUS Eastern Standard Time","Australia/Sydney"],["Afghanistan Standard Time","Asia/Kabul"],["Alaskan Standard Time","America/Anchorage"],["Aleutian Standard Time","America/Adak"],["Altai Standard Time","Asia/Barnaul"],["Arab Standard Time","Asia/Riyadh"],["Arabian Standard Time","Asia/Dubai"],["Arabic Standard Time","Asia/Baghdad"],["Argentina Standard Time","America/Buenos_Aires"],["Astrakhan Standard Time","Europe/Astrakhan"],["Atlantic Standard Time","America/Halifax"],["Aus Central W. Standard Time","Australia/Eucla"],["Azerbaijan Standard Time","Asia/Baku"],["Azores Standard Time","Atlantic/Azores"],["Bahia Standard Time","America/Bahia"],["Bangladesh Standard Time","Asia/Dhaka"],["Belarus Standard Time","Europe/Minsk"],["Bougainville Standard Time","Pacific/Bougainville"],["Canada Central Standard Time","America/Regina"],["Cape Verde Standard Time","Atlantic/Cape_Verde"],["Caucasus Standard Time","Asia/Yerevan"],["Cen. Australia Standard Time","Australia/Adelaide"],["Central America Standard Time","America/Guatemala"],["Central Asia Standard Time","Asia/Bishkek"],["Central Brazilian Standard Time","America/Cuiaba"],["Central Europe Standard Time","Europe/Budapest"],["Central European Standard Time","Europe/Warsaw"],["Central Pacific Standard Time","Pacific/Guadalcanal"],["Central Standard Time","America/Chicago"],["Central Standard Time (Mexico)","America/Mexico_City"],["Chatham Islands Standard Time","Pacific/Chatham"],["China Standard Time","Asia/Shanghai"],["Cuba Standard Time","America/Havana"],["Dateline Standard Time","Etc/GMT+12"],["E. Africa Standard Time","Africa/Nairobi"],["E. Australia Standard Time","Australia/Brisbane"],["E. Europe Standard Time","Europe/Chisinau"],["E. South America Standard Time","America/Sao_Paulo"],["Easter Island Standard Time","Pacific/Easter"],["Eastern Standard Time","America/New_York"],["Eastern Standard Time (Mexico)","America/Cancun"],["Egypt Standard Time","Africa/Cairo"],["Ekaterinburg Standard Time","Asia/Yekaterinburg"],["FLE Standard Time","Europe/Kiev"],["Fiji Standard Time","Pacific/Fiji"],["GMT Standard Time","Europe/London"],["GTB Standard Time","Europe/Bucharest"],["Georgian Standard Time","Asia/Tbilisi"],["Greenland Standard Time","America/Godthab"],["Greenwich Standard Time","Atlantic/Reykjavik"],["Haiti Standard Time","America/Port-au-Prince"],["Hawaiian Standard Time","Pacific/Honolulu"],["India Standard Time","Asia/Calcutta"],["Iran Standard Time","Asia/Tehran"],["Israel Standard Time","Asia/Jerusalem"],["Jordan Standard Time","Asia/Amman"],["Kaliningrad Standard Time","Europe/Kaliningrad"],["Korea Standard Time","Asia/Seoul"],["Libya Standard Time","Africa/Tripoli"],["Line Islands Standard Time","Pacific/Kiritimati"],["Lord Howe Standard Time","Australia/Lord_Howe"],["Magadan Standard Time","Asia/Magadan"],["Magallanes Standard Time","America/Punta_Arenas"],["Marquesas Standard Time","Pacific/Marquesas"],["Mauritius Standard Time","Indian/Mauritius"],["Middle East Standard Time","Asia/Beirut"],["Montevideo Standard Time","America/Montevideo"],["Morocco Standard Time","Africa/Casablanca"],["Mountain Standard Time","America/Denver"],["Mountain Standard Time (Mexico)","America/Mazatlan"],["Myanmar Standard Time","Asia/Rangoon"],["N. Central Asia Standard Time","Asia/Novosibirsk"],["Namibia Standard Time","Africa/Windhoek"],["Nepal Standard Time","Asia/Katmandu"],["New Zealand Standard Time","Pacific/Auckland"],["Newfoundland Standard Time","America/St_Johns"],["Norfolk Standard Time","Pacific/Norfolk"],["North Asia East Standard Time","Asia/Irkutsk"],["North Asia Standard Time","Asia/Krasnoyarsk"],["North Korea Standard Time","Asia/Pyongyang"],["Omsk Standard Time","Asia/Omsk"],["Pacific SA Standard Time","America/Santiago"],["Pacific Standard Time","America/Los_Angeles"],["Pacific Standard Time (Mexico)","America/Tijuana"],["Pakistan Standard Time","Asia/Karachi"],["Paraguay Standard Time","America/Asuncion"],["Qyzylorda Standard Time","Asia/Qyzylorda"],["Romance Standard Time","Europe/Paris"],["Russia Time Zone 10","Asia/Srednekolymsk"],["Russia Time Zone 11","Asia/Kamchatka"],["Russia Time Zone 3","Europe/Samara"],["Russian Standard Time","Europe/Moscow"],["SA Eastern Standard Time","America/Cayenne"],["SA Pacific Standard Time","America/Bogota"],["SA Western Standard Time","America/La_Paz"],["SE Asia Standard Time","Asia/Bangkok"],["Saint Pierre Standard Time","America/Miquelon"],["Sakhalin Standard Time","Asia/Sakhalin"],["Samoa Standard Time","Pacific/Apia"],["Sao Tome Standard Time","Africa/Sao_Tome"],["Saratov Standard Time","Europe/Saratov"],["Singapore Standard Time","Asia/Singapore"],["South Africa Standard Time","Africa/Johannesburg"],["South Sudan Standard Time","Africa/Juba"],["Sri Lanka Standard Time","Asia/Colombo"],["Sudan Standard Time","Africa/Khartoum"],["Syria Standard Time","Asia/Damascus"],["Taipei Standard Time","Asia/Taipei"],["Tasmania Standard Time","Australia/Hobart"],["Tocantins Standard Time","America/Araguaina"],["Tokyo Standard Time","Asia/Tokyo"],["Tomsk Standard Time","Asia/Tomsk"],["Tonga Standard Time","Pacific/Tongatapu"],["Transbaikal Standard Time","Asia/Chita"],["Turkey Standard Time","Europe/Istanbul"],["Turks And Caicos Standard Time","America/Grand_Turk"],["US Eastern Standard Time","America/Indianapolis"],["US Mountain Standard Time","America/Phoenix"],["UTC","Etc/GMT"],["UTC+01","Etc/GMT-1"],["UTC+02","Etc/GMT-2"],["UTC+03","Etc/GMT-3"],["UTC+04","Etc/GMT-4"],["UTC+05","Etc/GMT-5"],["UTC+06","Etc/GMT-6"],["UTC+07","Etc/GMT-7"],["UTC+08","Etc/GMT-8"],["UTC+09","Etc/GMT-9"],["UTC+10","Etc/GMT-10"],["UTC+11","Etc/GMT-11"],["UTC+12","Etc/GMT-12"],["UTC+13","Etc/GMT-13"],["UTC+14","Etc/GMT-14"],["UTC-01","Etc/GMT+1"],["UTC-02","Etc/GMT+2"],["UTC-03","Etc/GMT+3"],["UTC-04","Etc/GMT+4"],["UTC-05","Etc/GMT+5"],["UTC-06","Etc/GMT+6"],["UTC-07","Etc/GMT+7"],["UTC-08","Etc/GMT+8"],["UTC-09","Etc/GMT+9"],["UTC-10","Etc/GMT+10"],["UTC-11","Etc/GMT+11"],["UTC-12","Etc/GMT+12"],["Ulaanbaatar Standard Time","Asia/Ulaanbaatar"],["Venezuela Standard Time","America/Caracas"],["Vladivostok Standard Time","Asia/Vladivostok"],["Volgograd Standard Time","Europe/Volgograd"],["W. Australia Standard Time","Australia/Perth"],["W. Central Africa Standard Time","Africa/Lagos"],["W. Europe Standard Time","Europe/Berlin"],["W. Mongolia Standard Time","Asia/Hovd"],["West Asia Standard Time","Asia/Tashkent"],["West Bank Standard Time","Asia/Hebron"],["West Pacific Standard Time","Pacific/Port_Moresby"],["Yakutsk Standard Time","Asia/Yakutsk"],["Yukon Standard Time","America/Whitehorse"]]);class vl extends Error{}class AD extends vl{constructor(t){super(`Invalid DateTime: ${t.toMessage()}`)}}class CD extends vl{constructor(t){super(`Invalid Interval: ${t.toMessage()}`)}}class OD extends vl{constructor(t){super(`Invalid Duration: ${t.toMessage()}`)}}class Tu extends vl{}class BC extends vl{constructor(t){super(`Invalid unit ${t}`)}}class lr extends vl{}class Nn extends vl{constructor(){super("Zone is an abstract class")}}const J="numeric",as="short",ei="long",pm={year:J,month:J,day:J},WC={year:J,month:as,day:J},FD={year:J,month:as,day:J,weekday:as},HC={year:J,month:ei,day:J},JC={year:J,month:ei,day:J,weekday:ei},ZC={hour:J,minute:J},YC={hour:J,minute:J,second:J},QC={hour:J,minute:J,second:J,timeZoneName:as},KC={hour:J,minute:J,second:J,timeZoneName:ei},XC={hour:J,minute:J,hourCycle:"h23"},eO={hour:J,minute:J,second:J,hourCycle:"h23"},tO={hour:J,minute:J,second:J,hourCycle:"h23",timeZoneName:as},rO={hour:J,minute:J,second:J,hourCycle:"h23",timeZoneName:ei},iO={year:J,month:J,day:J,hour:J,minute:J},sO={year:J,month:J,day:J,hour:J,minute:J,second:J},nO={year:J,month:as,day:J,hour:J,minute:J},oO={year:J,month:as,day:J,hour:J,minute:J,second:J},kD={year:J,month:as,day:J,weekday:as,hour:J,minute:J},aO={year:J,month:ei,day:J,hour:J,minute:J,timeZoneName:as},lO={year:J,month:ei,day:J,hour:J,minute:J,second:J,timeZoneName:as},uO={year:J,month:ei,day:J,weekday:ei,hour:J,minute:J,timeZoneName:ei},cO={year:J,month:ei,day:J,weekday:ei,hour:J,minute:J,second:J,timeZoneName:ei};class bl{get type(){throw new Nn}get name(){throw new Nn}get ianaName(){return this.name}get isUniversal(){throw new Nn}offsetName(t,r){throw new Nn}formatOffset(t,r){throw new Nn}offset(t){throw new Nn}equals(t){throw new Nn}get isValid(){throw new Nn}}let v0=null;class fg extends bl{static get instance(){return v0===null&&(v0=new fg),v0}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(t,{format:r,locale:i}){return bO(t,r,i)}formatOffset(t,r){return cp(this.offset(t),r)}offset(t){return-new Date(t).getTimezoneOffset()}equals(t){return t.type==="system"}get isValid(){return!0}}let Gf={};function PD(e){return Gf[e]||(Gf[e]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),Gf[e]}const LD={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function ND(e,t){const r=e.format(t).replace(/\u200E/g,""),i=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(r),[,s,n,o,l,c,p,h]=i;return[o,s,n,l,c,p,h]}function RD(e,t){const r=e.formatToParts(t),i=[];for(let s=0;s<r.length;s++){const{type:n,value:o}=r[s],l=LD[n];n==="era"?i[l]=o:ue(l)||(i[l]=parseInt(o,10))}return i}let Wh={};class Dr extends bl{static create(t){return Wh[t]||(Wh[t]=new Dr(t)),Wh[t]}static resetCache(){Wh={},Gf={}}static isValidSpecifier(t){return this.isValidZone(t)}static isValidZone(t){if(!t)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:t}).format(),!0}catch{return!1}}constructor(t){super(),this.zoneName=t,this.valid=Dr.isValidZone(t)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(t,{format:r,locale:i}){return bO(t,r,i,this.name)}formatOffset(t,r){return cp(this.offset(t),r)}offset(t){const r=new Date(t);if(isNaN(r))return NaN;const i=PD(this.name);let[s,n,o,l,c,p,h]=i.formatToParts?RD(i,r):ND(i,r);l==="BC"&&(s=-Math.abs(s)+1);const y=mg({year:s,month:n,day:o,hour:c===24?0:c,minute:p,second:h,millisecond:0});let m=+r;const g=m%1e3;return m-=g>=0?g:1e3+g,(y-m)/(60*1e3)}equals(t){return t.type==="iana"&&t.name===this.name}get isValid(){return this.valid}}let Ix={};function jD(e,t={}){const r=JSON.stringify([e,t]);let i=Ix[r];return i||(i=new Intl.ListFormat(e,t),Ix[r]=i),i}let tb={};function rb(e,t={}){const r=JSON.stringify([e,t]);let i=tb[r];return i||(i=new Intl.DateTimeFormat(e,t),tb[r]=i),i}let ib={};function DD(e,t={}){const r=JSON.stringify([e,t]);let i=ib[r];return i||(i=new Intl.NumberFormat(e,t),ib[r]=i),i}let sb={};function VD(e,t={}){const{base:r,...i}=t,s=JSON.stringify([e,i]);let n=sb[s];return n||(n=new Intl.RelativeTimeFormat(e,t),sb[s]=n),n}let cd=null;function UD(){return cd||(cd=new Intl.DateTimeFormat().resolvedOptions().locale,cd)}let Tx={};function zD(e){let t=Tx[e];if(!t){const r=new Intl.Locale(e);t="getWeekInfo"in r?r.getWeekInfo():r.weekInfo,Tx[e]=t}return t}function qD(e){const t=e.indexOf("-x-");t!==-1&&(e=e.substring(0,t));const r=e.indexOf("-u-");if(r===-1)return[e];{let i,s;try{i=rb(e).resolvedOptions(),s=e}catch{const c=e.substring(0,r);i=rb(c).resolvedOptions(),s=c}const{numberingSystem:n,calendar:o}=i;return[s,n,o]}}function GD(e,t,r){return(r||t)&&(e.includes("-u-")||(e+="-u"),r&&(e+=`-ca-${r}`),t&&(e+=`-nu-${t}`)),e}function BD(e){const t=[];for(let r=1;r<=12;r++){const i=Z.utc(2009,r,1);t.push(e(i))}return t}function WD(e){const t=[];for(let r=1;r<=7;r++){const i=Z.utc(2016,11,13+r);t.push(e(i))}return t}function Hh(e,t,r,i){const s=e.listingMode();return s==="error"?null:s==="en"?r(t):i(t)}function HD(e){return e.numberingSystem&&e.numberingSystem!=="latn"?!1:e.numberingSystem==="latn"||!e.locale||e.locale.startsWith("en")||new Intl.DateTimeFormat(e.intl).resolvedOptions().numberingSystem==="latn"}class JD{constructor(t,r,i){this.padTo=i.padTo||0,this.floor=i.floor||!1;const{padTo:s,floor:n,...o}=i;if(!r||Object.keys(o).length>0){const l={useGrouping:!1,...i};i.padTo>0&&(l.minimumIntegerDigits=i.padTo),this.inf=DD(t,l)}}format(t){if(this.inf){const r=this.floor?Math.floor(t):t;return this.inf.format(r)}else{const r=this.floor?Math.floor(t):x$(t,3);return It(r,this.padTo)}}}class ZD{constructor(t,r,i){this.opts=i,this.originalZone=void 0;let s;if(this.opts.timeZone)this.dt=t;else if(t.zone.type==="fixed"){const o=-1*(t.offset/60),l=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;t.offset!==0&&Dr.create(l).valid?(s=l,this.dt=t):(s="UTC",this.dt=t.offset===0?t:t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone)}else t.zone.type==="system"?this.dt=t:t.zone.type==="iana"?(this.dt=t,s=t.zone.name):(s="UTC",this.dt=t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone);const n={...this.opts};n.timeZone=n.timeZone||s,this.dtf=rb(r,n)}format(){return this.originalZone?this.formatToParts().map(({value:t})=>t).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const t=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?t.map(r=>{if(r.type==="timeZoneName"){const i=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...r,value:i}}else return r}):t}resolvedOptions(){return this.dtf.resolvedOptions()}}class YD{constructor(t,r,i){this.opts={style:"long",...i},!r&&gO()&&(this.rtf=VD(t,i))}format(t,r){return this.rtf?this.rtf.format(t,r):b9(r,t,this.opts.numeric,this.opts.style!=="long")}formatToParts(t,r){return this.rtf?this.rtf.formatToParts(t,r):[]}}const QD={firstDay:1,minimalDays:4,weekend:[6,7]};class Re{static fromOpts(t){return Re.create(t.locale,t.numberingSystem,t.outputCalendar,t.weekSettings,t.defaultToEN)}static create(t,r,i,s,n=!1){const o=t||dt.defaultLocale,l=o||(n?"en-US":UD()),c=r||dt.defaultNumberingSystem,p=i||dt.defaultOutputCalendar,h=nb(s)||dt.defaultWeekSettings;return new Re(l,c,p,h,o)}static resetCache(){cd=null,tb={},ib={},sb={}}static fromObject({locale:t,numberingSystem:r,outputCalendar:i,weekSettings:s}={}){return Re.create(t,r,i,s)}constructor(t,r,i,s,n){const[o,l,c]=qD(t);this.locale=o,this.numberingSystem=r||l||null,this.outputCalendar=i||c||null,this.weekSettings=s,this.intl=GD(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=n,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=HD(this)),this.fastNumbersCached}listingMode(){const t=this.isEnglish(),r=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return t&&r?"en":"intl"}clone(t){return!t||Object.getOwnPropertyNames(t).length===0?this:Re.create(t.locale||this.specifiedLocale,t.numberingSystem||this.numberingSystem,t.outputCalendar||this.outputCalendar,nb(t.weekSettings)||this.weekSettings,t.defaultToEN||!1)}redefaultToEN(t={}){return this.clone({...t,defaultToEN:!0})}redefaultToSystem(t={}){return this.clone({...t,defaultToEN:!1})}months(t,r=!1){return Hh(this,t,$O,()=>{const i=r?{month:t,day:"numeric"}:{month:t},s=r?"format":"standalone";return this.monthsCache[s][t]||(this.monthsCache[s][t]=BD(n=>this.extract(n,i,"month"))),this.monthsCache[s][t]})}weekdays(t,r=!1){return Hh(this,t,IO,()=>{const i=r?{weekday:t,year:"numeric",month:"long",day:"numeric"}:{weekday:t},s=r?"format":"standalone";return this.weekdaysCache[s][t]||(this.weekdaysCache[s][t]=WD(n=>this.extract(n,i,"weekday"))),this.weekdaysCache[s][t]})}meridiems(){return Hh(this,void 0,()=>TO,()=>{if(!this.meridiemCache){const t={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Z.utc(2016,11,13,9),Z.utc(2016,11,13,19)].map(r=>this.extract(r,t,"dayperiod"))}return this.meridiemCache})}eras(t){return Hh(this,t,MO,()=>{const r={era:t};return this.eraCache[t]||(this.eraCache[t]=[Z.utc(-40,1,1),Z.utc(2017,1,1)].map(i=>this.extract(i,r,"era"))),this.eraCache[t]})}extract(t,r,i){const s=this.dtFormatter(t,r),n=s.formatToParts(),o=n.find(l=>l.type.toLowerCase()===i);return o?o.value:null}numberFormatter(t={}){return new JD(this.intl,t.forceSimple||this.fastNumbers,t)}dtFormatter(t,r={}){return new ZD(t,this.intl,r)}relFormatter(t={}){return new YD(this.intl,this.isEnglish(),t)}listFormatter(t={}){return jD(this.intl,t)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:vO()?zD(this.locale):QD}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(t){return this.locale===t.locale&&this.numberingSystem===t.numberingSystem&&this.outputCalendar===t.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let b0=null;class Tt extends bl{static get utcInstance(){return b0===null&&(b0=new Tt(0)),b0}static instance(t){return t===0?Tt.utcInstance:new Tt(t)}static parseSpecifier(t){if(t){const r=t.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(r)return new Tt(gg(r[1],r[2]))}return null}constructor(t){super(),this.fixed=t}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${cp(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${cp(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(t,r){return cp(this.fixed,r)}get isUniversal(){return!0}offset(){return this.fixed}equals(t){return t.type==="fixed"&&t.fixed===this.fixed}get isValid(){return!0}}class KD extends bl{constructor(t){super(),this.zoneName=t}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function mo(e,t){if(ue(e)||e===null)return t;if(e instanceof bl)return e;if(s9(e)){const r=e.toLowerCase();return r==="default"?t:r==="local"||r==="system"?fg.instance:r==="utc"||r==="gmt"?Tt.utcInstance:Tt.parseSpecifier(r)||Dr.create(e)}else return Co(e)?Tt.instance(e):typeof e=="object"&&"offset"in e&&typeof e.offset=="function"?e:new KD(e)}const w$={arab:"[Ù -Ù©]",arabext:"[Û°-Û¹]",bali:"[á­-á­™]",beng:"[à§¦-à§¯]",deva:"[à¥¦-à¥¯]",fullwide:"[ï¼-ï¼™]",gujr:"[à«¦-à«¯]",hanidec:"[ã€‡|ä¸€|äºŒ|ä¸‰|å››|äº”|å…­|ä¸ƒ|å…«|ä¹]",khmr:"[áŸ -áŸ©]",knda:"[à³¦-à³¯]",laoo:"[à»-à»™]",limb:"[á¥†-á¥]",mlym:"[àµ¦-àµ¯]",mong:"[á -á ™]",mymr:"[á€-á‰]",orya:"[à­¦-à­¯]",tamldec:"[à¯¦-à¯¯]",telu:"[à±¦-à±¯]",thai:"[à¹-à¹™]",tibt:"[à¼ -à¼©]",latn:"\\d"},Mx={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},XD=w$.hanidec.replace(/[\[|\]]/g,"").split("");function e9(e){let t=parseInt(e,10);if(isNaN(t)){t="";for(let r=0;r<e.length;r++){const i=e.charCodeAt(r);if(e[r].search(w$.hanidec)!==-1)t+=XD.indexOf(e[r]);else for(const s in Mx){const[n,o]=Mx[s];i>=n&&i<=o&&(t+=i-n)}}return parseInt(t,10)}else return t}let ql={};function t9(){ql={}}function Oi({numberingSystem:e},t=""){const r=e||"latn";return ql[r]||(ql[r]={}),ql[r][t]||(ql[r][t]=new RegExp(`${w$[r]}${t}`)),ql[r][t]}let Ex=()=>Date.now(),Ax="system",Cx=null,Ox=null,Fx=null,kx=60,Px,Lx=null;class dt{static get now(){return Ex}static set now(t){Ex=t}static set defaultZone(t){Ax=t}static get defaultZone(){return mo(Ax,fg.instance)}static get defaultLocale(){return Cx}static set defaultLocale(t){Cx=t}static get defaultNumberingSystem(){return Ox}static set defaultNumberingSystem(t){Ox=t}static get defaultOutputCalendar(){return Fx}static set defaultOutputCalendar(t){Fx=t}static get defaultWeekSettings(){return Lx}static set defaultWeekSettings(t){Lx=nb(t)}static get twoDigitCutoffYear(){return kx}static set twoDigitCutoffYear(t){kx=t%100}static get throwOnInvalid(){return Px}static set throwOnInvalid(t){Px=t}static resetCaches(){Re.resetCache(),Dr.resetCache(),Z.resetCache(),t9()}}class es{constructor(t,r){this.reason=t,this.explanation=r}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const dO=[0,31,59,90,120,151,181,212,243,273,304,334],pO=[0,31,60,91,121,152,182,213,244,274,305,335];function $i(e,t){return new es("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${e}, which is invalid`)}function _$(e,t,r){const i=new Date(Date.UTC(e,t-1,r));e<100&&e>=0&&i.setUTCFullYear(i.getUTCFullYear()-1900);const s=i.getUTCDay();return s===0?7:s}function hO(e,t,r){return r+(fh(e)?pO:dO)[t-1]}function fO(e,t){const r=fh(e)?pO:dO,i=r.findIndex(n=>n<t),s=t-r[i];return{month:i+1,day:s}}function $$(e,t){return(e-t+7)%7+1}function hm(e,t=4,r=1){const{year:i,month:s,day:n}=e,o=hO(i,s,n),l=$$(_$(i,s,n),r);let c=Math.floor((o-l+14-t)/7),p;return c<1?(p=i-1,c=Lp(p,t,r)):c>Lp(i,t,r)?(p=i+1,c=1):p=i,{weekYear:p,weekNumber:c,weekday:l,...vg(e)}}function Nx(e,t=4,r=1){const{weekYear:i,weekNumber:s,weekday:n}=e,o=$$(_$(i,1,t),r),l=Du(i);let c=s*7+n-o-7+t,p;c<1?(p=i-1,c+=Du(p)):c>l?(p=i+1,c-=Du(i)):p=i;const{month:h,day:f}=fO(p,c);return{year:p,month:h,day:f,...vg(e)}}function w0(e){const{year:t,month:r,day:i}=e,s=hO(t,r,i);return{year:t,ordinal:s,...vg(e)}}function Rx(e){const{year:t,ordinal:r}=e,{month:i,day:s}=fO(t,r);return{year:t,month:i,day:s,...vg(e)}}function jx(e,t){if(!ue(e.localWeekday)||!ue(e.localWeekNumber)||!ue(e.localWeekYear)){if(!ue(e.weekday)||!ue(e.weekNumber)||!ue(e.weekYear))throw new Tu("Cannot mix locale-based week fields with ISO-based week fields");return ue(e.localWeekday)||(e.weekday=e.localWeekday),ue(e.localWeekNumber)||(e.weekNumber=e.localWeekNumber),ue(e.localWeekYear)||(e.weekYear=e.localWeekYear),delete e.localWeekday,delete e.localWeekNumber,delete e.localWeekYear,{minDaysInFirstWeek:t.getMinDaysInFirstWeek(),startOfWeek:t.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function r9(e,t=4,r=1){const i=yg(e.weekYear),s=Si(e.weekNumber,1,Lp(e.weekYear,t,r)),n=Si(e.weekday,1,7);return i?s?n?!1:$i("weekday",e.weekday):$i("week",e.weekNumber):$i("weekYear",e.weekYear)}function i9(e){const t=yg(e.year),r=Si(e.ordinal,1,Du(e.year));return t?r?!1:$i("ordinal",e.ordinal):$i("year",e.year)}function yO(e){const t=yg(e.year),r=Si(e.month,1,12),i=Si(e.day,1,fm(e.year,e.month));return t?r?i?!1:$i("day",e.day):$i("month",e.month):$i("year",e.year)}function mO(e){const{hour:t,minute:r,second:i,millisecond:s}=e,n=Si(t,0,23)||t===24&&r===0&&i===0&&s===0,o=Si(r,0,59),l=Si(i,0,59),c=Si(s,0,999);return n?o?l?c?!1:$i("millisecond",s):$i("second",i):$i("minute",r):$i("hour",t)}function ue(e){return typeof e>"u"}function Co(e){return typeof e=="number"}function yg(e){return typeof e=="number"&&e%1===0}function s9(e){return typeof e=="string"}function n9(e){return Object.prototype.toString.call(e)==="[object Date]"}function gO(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function vO(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function o9(e){return Array.isArray(e)?e:[e]}function Dx(e,t,r){if(e.length!==0)return e.reduce((i,s)=>{const n=[t(s),s];return i&&r(i[0],n[0])===i[0]?i:n},null)[1]}function a9(e,t){return t.reduce((r,i)=>(r[i]=e[i],r),{})}function tc(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function nb(e){if(e==null)return null;if(typeof e!="object")throw new lr("Week settings must be an object");if(!Si(e.firstDay,1,7)||!Si(e.minimalDays,1,7)||!Array.isArray(e.weekend)||e.weekend.some(t=>!Si(t,1,7)))throw new lr("Invalid week settings");return{firstDay:e.firstDay,minimalDays:e.minimalDays,weekend:Array.from(e.weekend)}}function Si(e,t,r){return yg(e)&&e>=t&&e<=r}function l9(e,t){return e-t*Math.floor(e/t)}function It(e,t=2){const r=e<0;let i;return r?i="-"+(""+-e).padStart(t,"0"):i=(""+e).padStart(t,"0"),i}function lo(e){if(!(ue(e)||e===null||e===""))return parseInt(e,10)}function Yo(e){if(!(ue(e)||e===null||e===""))return parseFloat(e)}function S$(e){if(!(ue(e)||e===null||e==="")){const t=parseFloat("0."+e)*1e3;return Math.floor(t)}}function x$(e,t,r=!1){const i=10**t;return(r?Math.trunc:Math.round)(e*i)/i}function fh(e){return e%4===0&&(e%100!==0||e%400===0)}function Du(e){return fh(e)?366:365}function fm(e,t){const r=l9(t-1,12)+1,i=e+(t-r)/12;return r===2?fh(i)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][r-1]}function mg(e){let t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t),t.setUTCFullYear(e.year,e.month-1,e.day)),+t}function Vx(e,t,r){return-$$(_$(e,1,t),r)+t-1}function Lp(e,t=4,r=1){const i=Vx(e,t,r),s=Vx(e+1,t,r);return(Du(e)-i+s)/7}function ob(e){return e>99?e:e>dt.twoDigitCutoffYear?1900+e:2e3+e}function bO(e,t,r,i=null){const s=new Date(e),n={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};i&&(n.timeZone=i);const o={timeZoneName:t,...n},l=new Intl.DateTimeFormat(r,o).formatToParts(s).find(c=>c.type.toLowerCase()==="timezonename");return l?l.value:null}function gg(e,t){let r=parseInt(e,10);Number.isNaN(r)&&(r=0);const i=parseInt(t,10)||0,s=r<0||Object.is(r,-0)?-i:i;return r*60+s}function wO(e){const t=Number(e);if(typeof e=="boolean"||e===""||Number.isNaN(t))throw new lr(`Invalid unit value ${e}`);return t}function ym(e,t){const r={};for(const i in e)if(tc(e,i)){const s=e[i];if(s==null)continue;r[t(i)]=wO(s)}return r}function cp(e,t){const r=Math.trunc(Math.abs(e/60)),i=Math.trunc(Math.abs(e%60)),s=e>=0?"+":"-";switch(t){case"short":return`${s}${It(r,2)}:${It(i,2)}`;case"narrow":return`${s}${r}${i>0?`:${i}`:""}`;case"techie":return`${s}${It(r,2)}${It(i,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function vg(e){return a9(e,["hour","minute","second","millisecond"])}const u9=["January","February","March","April","May","June","July","August","September","October","November","December"],_O=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],c9=["J","F","M","A","M","J","J","A","S","O","N","D"];function $O(e){switch(e){case"narrow":return[...c9];case"short":return[..._O];case"long":return[...u9];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const SO=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],xO=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],d9=["M","T","W","T","F","S","S"];function IO(e){switch(e){case"narrow":return[...d9];case"short":return[...xO];case"long":return[...SO];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const TO=["AM","PM"],p9=["Before Christ","Anno Domini"],h9=["BC","AD"],f9=["B","A"];function MO(e){switch(e){case"narrow":return[...f9];case"short":return[...h9];case"long":return[...p9];default:return null}}function y9(e){return TO[e.hour<12?0:1]}function m9(e,t){return IO(t)[e.weekday-1]}function g9(e,t){return $O(t)[e.month-1]}function v9(e,t){return MO(t)[e.year<0?0:1]}function b9(e,t,r="always",i=!1){const s={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},n=["hours","minutes","seconds"].indexOf(e)===-1;if(r==="auto"&&n){const f=e==="days";switch(t){case 1:return f?"tomorrow":`next ${s[e][0]}`;case-1:return f?"yesterday":`last ${s[e][0]}`;case 0:return f?"today":`this ${s[e][0]}`}}const o=Object.is(t,-0)||t<0,l=Math.abs(t),c=l===1,p=s[e],h=i?c?p[1]:p[2]||p[1]:c?s[e][0]:e;return o?`${l} ${h} ago`:`in ${l} ${h}`}function Ux(e,t){let r="";for(const i of e)i.literal?r+=i.val:r+=t(i.val);return r}const w9={D:pm,DD:WC,DDD:HC,DDDD:JC,t:ZC,tt:YC,ttt:QC,tttt:KC,T:XC,TT:eO,TTT:tO,TTTT:rO,f:iO,ff:nO,fff:aO,ffff:uO,F:sO,FF:oO,FFF:lO,FFFF:cO};class cr{static create(t,r={}){return new cr(t,r)}static parseFormat(t){let r=null,i="",s=!1;const n=[];for(let o=0;o<t.length;o++){const l=t.charAt(o);l==="'"?(i.length>0&&n.push({literal:s||/^\s+$/.test(i),val:i}),r=null,i="",s=!s):s||l===r?i+=l:(i.length>0&&n.push({literal:/^\s+$/.test(i),val:i}),i=l,r=l)}return i.length>0&&n.push({literal:s||/^\s+$/.test(i),val:i}),n}static macroTokenToFormatOpts(t){return w9[t]}constructor(t,r){this.opts=r,this.loc=t,this.systemLoc=null}formatWithSystemDefault(t,r){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(t,{...this.opts,...r}).format()}dtFormatter(t,r={}){return this.loc.dtFormatter(t,{...this.opts,...r})}formatDateTime(t,r){return this.dtFormatter(t,r).format()}formatDateTimeParts(t,r){return this.dtFormatter(t,r).formatToParts()}formatInterval(t,r){return this.dtFormatter(t.start,r).dtf.formatRange(t.start.toJSDate(),t.end.toJSDate())}resolvedOptions(t,r){return this.dtFormatter(t,r).resolvedOptions()}num(t,r=0){if(this.opts.forceSimple)return It(t,r);const i={...this.opts};return r>0&&(i.padTo=r),this.loc.numberFormatter(i).format(t)}formatDateTimeFromString(t,r){const i=this.loc.listingMode()==="en",s=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",n=(m,g)=>this.loc.extract(t,m,g),o=m=>t.isOffsetFixed&&t.offset===0&&m.allowZ?"Z":t.isValid?t.zone.formatOffset(t.ts,m.format):"",l=()=>i?y9(t):n({hour:"numeric",hourCycle:"h12"},"dayperiod"),c=(m,g)=>i?g9(t,m):n(g?{month:m}:{month:m,day:"numeric"},"month"),p=(m,g)=>i?m9(t,m):n(g?{weekday:m}:{weekday:m,month:"long",day:"numeric"},"weekday"),h=m=>{const g=cr.macroTokenToFormatOpts(m);return g?this.formatWithSystemDefault(t,g):m},f=m=>i?v9(t,m):n({era:m},"era"),y=m=>{switch(m){case"S":return this.num(t.millisecond);case"u":case"SSS":return this.num(t.millisecond,3);case"s":return this.num(t.second);case"ss":return this.num(t.second,2);case"uu":return this.num(Math.floor(t.millisecond/10),2);case"uuu":return this.num(Math.floor(t.millisecond/100));case"m":return this.num(t.minute);case"mm":return this.num(t.minute,2);case"h":return this.num(t.hour%12===0?12:t.hour%12);case"hh":return this.num(t.hour%12===0?12:t.hour%12,2);case"H":return this.num(t.hour);case"HH":return this.num(t.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return t.zone.offsetName(t.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return t.zone.offsetName(t.ts,{format:"long",locale:this.loc.locale});case"z":return t.zoneName;case"a":return l();case"d":return s?n({day:"numeric"},"day"):this.num(t.day);case"dd":return s?n({day:"2-digit"},"day"):this.num(t.day,2);case"c":return this.num(t.weekday);case"ccc":return p("short",!0);case"cccc":return p("long",!0);case"ccccc":return p("narrow",!0);case"E":return this.num(t.weekday);case"EEE":return p("short",!1);case"EEEE":return p("long",!1);case"EEEEE":return p("narrow",!1);case"L":return s?n({month:"numeric",day:"numeric"},"month"):this.num(t.month);case"LL":return s?n({month:"2-digit",day:"numeric"},"month"):this.num(t.month,2);case"LLL":return c("short",!0);case"LLLL":return c("long",!0);case"LLLLL":return c("narrow",!0);case"M":return s?n({month:"numeric"},"month"):this.num(t.month);case"MM":return s?n({month:"2-digit"},"month"):this.num(t.month,2);case"MMM":return c("short",!1);case"MMMM":return c("long",!1);case"MMMMM":return c("narrow",!1);case"y":return s?n({year:"numeric"},"year"):this.num(t.year);case"yy":return s?n({year:"2-digit"},"year"):this.num(t.year.toString().slice(-2),2);case"yyyy":return s?n({year:"numeric"},"year"):this.num(t.year,4);case"yyyyyy":return s?n({year:"numeric"},"year"):this.num(t.year,6);case"G":return f("short");case"GG":return f("long");case"GGGGG":return f("narrow");case"kk":return this.num(t.weekYear.toString().slice(-2),2);case"kkkk":return this.num(t.weekYear,4);case"W":return this.num(t.weekNumber);case"WW":return this.num(t.weekNumber,2);case"n":return this.num(t.localWeekNumber);case"nn":return this.num(t.localWeekNumber,2);case"ii":return this.num(t.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(t.localWeekYear,4);case"o":return this.num(t.ordinal);case"ooo":return this.num(t.ordinal,3);case"q":return this.num(t.quarter);case"qq":return this.num(t.quarter,2);case"X":return this.num(Math.floor(t.ts/1e3));case"x":return this.num(t.ts);default:return h(m)}};return Ux(cr.parseFormat(r),y)}formatDurationFromString(t,r){const i=c=>{switch(c[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},s=c=>p=>{const h=i(p);return h?this.num(c.get(h),p.length):p},n=cr.parseFormat(r),o=n.reduce((c,{literal:p,val:h})=>p?c:c.concat(h),[]),l=t.shiftTo(...o.map(i).filter(c=>c));return Ux(n,s(l))}}const EO=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function $c(...e){const t=e.reduce((r,i)=>r+i.source,"");return RegExp(`^${t}$`)}function Sc(...e){return t=>e.reduce(([r,i,s],n)=>{const[o,l,c]=n(t,s);return[{...r,...o},l||i,c]},[{},null,1]).slice(0,2)}function xc(e,...t){if(e==null)return[null,null];for(const[r,i]of t){const s=r.exec(e);if(s)return i(s)}return[null,null]}function AO(...e){return(t,r)=>{const i={};let s;for(s=0;s<e.length;s++)i[e[s]]=lo(t[r+s]);return[i,null,r+s]}}const CO=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,_9=`(?:${CO.source}?(?:\\[(${EO.source})\\])?)?`,I$=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,OO=RegExp(`${I$.source}${_9}`),T$=RegExp(`(?:T${OO.source})?`),$9=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,S9=/(\d{4})-?W(\d\d)(?:-?(\d))?/,x9=/(\d{4})-?(\d{3})/,I9=AO("weekYear","weekNumber","weekDay"),T9=AO("year","ordinal"),M9=/(\d{4})-(\d\d)-(\d\d)/,FO=RegExp(`${I$.source} ?(?:${CO.source}|(${EO.source}))?`),E9=RegExp(`(?: ${FO.source})?`);function Vu(e,t,r){const i=e[t];return ue(i)?r:lo(i)}function A9(e,t){return[{year:Vu(e,t),month:Vu(e,t+1,1),day:Vu(e,t+2,1)},null,t+3]}function Ic(e,t){return[{hours:Vu(e,t,0),minutes:Vu(e,t+1,0),seconds:Vu(e,t+2,0),milliseconds:S$(e[t+3])},null,t+4]}function yh(e,t){const r=!e[t]&&!e[t+1],i=gg(e[t+1],e[t+2]),s=r?null:Tt.instance(i);return[{},s,t+3]}function mh(e,t){const r=e[t]?Dr.create(e[t]):null;return[{},r,t+1]}const C9=RegExp(`^T?${I$.source}$`),O9=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function F9(e){const[t,r,i,s,n,o,l,c,p]=e,h=t[0]==="-",f=c&&c[0]==="-",y=(m,g=!1)=>m!==void 0&&(g||m&&h)?-m:m;return[{years:y(Yo(r)),months:y(Yo(i)),weeks:y(Yo(s)),days:y(Yo(n)),hours:y(Yo(o)),minutes:y(Yo(l)),seconds:y(Yo(c),c==="-0"),milliseconds:y(S$(p),f)}]}const k9={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function M$(e,t,r,i,s,n,o){const l={year:t.length===2?ob(lo(t)):lo(t),month:_O.indexOf(r)+1,day:lo(i),hour:lo(s),minute:lo(n)};return o&&(l.second=lo(o)),e&&(l.weekday=e.length>3?SO.indexOf(e)+1:xO.indexOf(e)+1),l}const P9=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function L9(e){const[,t,r,i,s,n,o,l,c,p,h,f]=e,y=M$(t,s,i,r,n,o,l);let m;return c?m=k9[c]:p?m=0:m=gg(h,f),[y,new Tt(m)]}function N9(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const R9=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,j9=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,D9=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function zx(e){const[,t,r,i,s,n,o,l]=e;return[M$(t,s,i,r,n,o,l),Tt.utcInstance]}function V9(e){const[,t,r,i,s,n,o,l]=e;return[M$(t,l,r,i,s,n,o),Tt.utcInstance]}const U9=$c($9,T$),z9=$c(S9,T$),q9=$c(x9,T$),G9=$c(OO),kO=Sc(A9,Ic,yh,mh),B9=Sc(I9,Ic,yh,mh),W9=Sc(T9,Ic,yh,mh),H9=Sc(Ic,yh,mh);function J9(e){return xc(e,[U9,kO],[z9,B9],[q9,W9],[G9,H9])}function Z9(e){return xc(N9(e),[P9,L9])}function Y9(e){return xc(e,[R9,zx],[j9,zx],[D9,V9])}function Q9(e){return xc(e,[O9,F9])}const K9=Sc(Ic);function X9(e){return xc(e,[C9,K9])}const e8=$c(M9,E9),t8=$c(FO),r8=Sc(Ic,yh,mh);function i8(e){return xc(e,[e8,kO],[t8,r8])}const qx="Invalid Duration",PO={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},s8={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...PO},ui=146097/400,Cl=146097/4800,n8={years:{quarters:4,months:12,weeks:ui/7,days:ui,hours:ui*24,minutes:ui*24*60,seconds:ui*24*60*60,milliseconds:ui*24*60*60*1e3},quarters:{months:3,weeks:ui/28,days:ui/4,hours:ui*24/4,minutes:ui*24*60/4,seconds:ui*24*60*60/4,milliseconds:ui*24*60*60*1e3/4},months:{weeks:Cl/7,days:Cl,hours:Cl*24,minutes:Cl*24*60,seconds:Cl*24*60*60,milliseconds:Cl*24*60*60*1e3},...PO},Ua=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],o8=Ua.slice(0).reverse();function Rn(e,t,r=!1){const i={values:r?t.values:{...e.values,...t.values||{}},loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy,matrix:t.matrix||e.matrix};return new Te(i)}function LO(e,t){let r=t.milliseconds??0;for(const i of o8.slice(1))t[i]&&(r+=t[i]*e[i].milliseconds);return r}function Gx(e,t){const r=LO(e,t)<0?-1:1;Ua.reduceRight((i,s)=>{if(ue(t[s]))return i;if(i){const n=t[i]*r,o=e[s][i],l=Math.floor(n/o);t[s]+=l*r,t[i]-=l*o*r}return s},null),Ua.reduce((i,s)=>{if(ue(t[s]))return i;if(i){const n=t[i]%1;t[i]-=n,t[s]+=n*e[i][s]}return s},null)}function a8(e){const t={};for(const[r,i]of Object.entries(e))i!==0&&(t[r]=i);return t}class Te{constructor(t){const r=t.conversionAccuracy==="longterm"||!1;let i=r?n8:s8;t.matrix&&(i=t.matrix),this.values=t.values,this.loc=t.loc||Re.create(),this.conversionAccuracy=r?"longterm":"casual",this.invalid=t.invalid||null,this.matrix=i,this.isLuxonDuration=!0}static fromMillis(t,r){return Te.fromObject({milliseconds:t},r)}static fromObject(t,r={}){if(t==null||typeof t!="object")throw new lr(`Duration.fromObject: argument expected to be an object, got ${t===null?"null":typeof t}`);return new Te({values:ym(t,Te.normalizeUnit),loc:Re.fromObject(r),conversionAccuracy:r.conversionAccuracy,matrix:r.matrix})}static fromDurationLike(t){if(Co(t))return Te.fromMillis(t);if(Te.isDuration(t))return t;if(typeof t=="object")return Te.fromObject(t);throw new lr(`Unknown duration argument ${t} of type ${typeof t}`)}static fromISO(t,r){const[i]=Q9(t);return i?Te.fromObject(i,r):Te.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static fromISOTime(t,r){const[i]=X9(t);return i?Te.fromObject(i,r):Te.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static invalid(t,r=null){if(!t)throw new lr("need to specify a reason the Duration is invalid");const i=t instanceof es?t:new es(t,r);if(dt.throwOnInvalid)throw new OD(i);return new Te({invalid:i})}static normalizeUnit(t){const r={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[t&&t.toLowerCase()];if(!r)throw new BC(t);return r}static isDuration(t){return t&&t.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(t,r={}){const i={...r,floor:r.round!==!1&&r.floor!==!1};return this.isValid?cr.create(this.loc,i).formatDurationFromString(this,t):qx}toHuman(t={}){if(!this.isValid)return qx;const r=Ua.map(i=>{const s=this.values[i];return ue(s)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...t,unit:i.slice(0,-1)}).format(s)}).filter(i=>i);return this.loc.listFormatter({type:"conjunction",style:t.listStyle||"narrow",...t}).format(r)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let t="P";return this.years!==0&&(t+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(t+=this.months+this.quarters*3+"M"),this.weeks!==0&&(t+=this.weeks+"W"),this.days!==0&&(t+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(t+="T"),this.hours!==0&&(t+=this.hours+"H"),this.minutes!==0&&(t+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(t+=x$(this.seconds+this.milliseconds/1e3,3)+"S"),t==="P"&&(t+="T0S"),t}toISOTime(t={}){if(!this.isValid)return null;const r=this.toMillis();return r<0||r>=864e5?null:(t={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...t,includeOffset:!1},Z.fromMillis(r,{zone:"UTC"}).toISOTime(t))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?LO(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(t){if(!this.isValid)return this;const r=Te.fromDurationLike(t),i={};for(const s of Ua)(tc(r.values,s)||tc(this.values,s))&&(i[s]=r.get(s)+this.get(s));return Rn(this,{values:i},!0)}minus(t){if(!this.isValid)return this;const r=Te.fromDurationLike(t);return this.plus(r.negate())}mapUnits(t){if(!this.isValid)return this;const r={};for(const i of Object.keys(this.values))r[i]=wO(t(this.values[i],i));return Rn(this,{values:r},!0)}get(t){return this[Te.normalizeUnit(t)]}set(t){if(!this.isValid)return this;const r={...this.values,...ym(t,Te.normalizeUnit)};return Rn(this,{values:r})}reconfigure({locale:t,numberingSystem:r,conversionAccuracy:i,matrix:s}={}){const o={loc:this.loc.clone({locale:t,numberingSystem:r}),matrix:s,conversionAccuracy:i};return Rn(this,o)}as(t){return this.isValid?this.shiftTo(t).get(t):NaN}normalize(){if(!this.isValid)return this;const t=this.toObject();return Gx(this.matrix,t),Rn(this,{values:t},!0)}rescale(){if(!this.isValid)return this;const t=a8(this.normalize().shiftToAll().toObject());return Rn(this,{values:t},!0)}shiftTo(...t){if(!this.isValid)return this;if(t.length===0)return this;t=t.map(o=>Te.normalizeUnit(o));const r={},i={},s=this.toObject();let n;for(const o of Ua)if(t.indexOf(o)>=0){n=o;let l=0;for(const p in i)l+=this.matrix[p][o]*i[p],i[p]=0;Co(s[o])&&(l+=s[o]);const c=Math.trunc(l);r[o]=c,i[o]=(l*1e3-c*1e3)/1e3}else Co(s[o])&&(i[o]=s[o]);for(const o in i)i[o]!==0&&(r[n]+=o===n?i[o]:i[o]/this.matrix[n][o]);return Gx(this.matrix,r),Rn(this,{values:r},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const t={};for(const r of Object.keys(this.values))t[r]=this.values[r]===0?0:-this.values[r];return Rn(this,{values:t},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(t){if(!this.isValid||!t.isValid||!this.loc.equals(t.loc))return!1;function r(i,s){return i===void 0||i===0?s===void 0||s===0:i===s}for(const i of Ua)if(!r(this.values[i],t.values[i]))return!1;return!0}}const Ol="Invalid Interval";function l8(e,t){return!e||!e.isValid?ct.invalid("missing or invalid start"):!t||!t.isValid?ct.invalid("missing or invalid end"):t<e?ct.invalid("end before start",`The end of an interval must be after its start, but you had start=${e.toISO()} and end=${t.toISO()}`):null}class ct{constructor(t){this.s=t.start,this.e=t.end,this.invalid=t.invalid||null,this.isLuxonInterval=!0}static invalid(t,r=null){if(!t)throw new lr("need to specify a reason the Interval is invalid");const i=t instanceof es?t:new es(t,r);if(dt.throwOnInvalid)throw new CD(i);return new ct({invalid:i})}static fromDateTimes(t,r){const i=Bc(t),s=Bc(r),n=l8(i,s);return n??new ct({start:i,end:s})}static after(t,r){const i=Te.fromDurationLike(r),s=Bc(t);return ct.fromDateTimes(s,s.plus(i))}static before(t,r){const i=Te.fromDurationLike(r),s=Bc(t);return ct.fromDateTimes(s.minus(i),s)}static fromISO(t,r){const[i,s]=(t||"").split("/",2);if(i&&s){let n,o;try{n=Z.fromISO(i,r),o=n.isValid}catch{o=!1}let l,c;try{l=Z.fromISO(s,r),c=l.isValid}catch{c=!1}if(o&&c)return ct.fromDateTimes(n,l);if(o){const p=Te.fromISO(s,r);if(p.isValid)return ct.after(n,p)}else if(c){const p=Te.fromISO(i,r);if(p.isValid)return ct.before(l,p)}}return ct.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static isInterval(t){return t&&t.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(t="milliseconds"){return this.isValid?this.toDuration(t).get(t):NaN}count(t="milliseconds",r){if(!this.isValid)return NaN;const i=this.start.startOf(t,r);let s;return r!=null&&r.useLocaleWeeks?s=this.end.reconfigure({locale:i.locale}):s=this.end,s=s.startOf(t,r),Math.floor(s.diff(i,t).get(t))+(s.valueOf()!==this.end.valueOf())}hasSame(t){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,t):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(t){return this.isValid?this.s>t:!1}isBefore(t){return this.isValid?this.e<=t:!1}contains(t){return this.isValid?this.s<=t&&this.e>t:!1}set({start:t,end:r}={}){return this.isValid?ct.fromDateTimes(t||this.s,r||this.e):this}splitAt(...t){if(!this.isValid)return[];const r=t.map(Bc).filter(o=>this.contains(o)).sort((o,l)=>o.toMillis()-l.toMillis()),i=[];let{s}=this,n=0;for(;s<this.e;){const o=r[n]||this.e,l=+o>+this.e?this.e:o;i.push(ct.fromDateTimes(s,l)),s=l,n+=1}return i}splitBy(t){const r=Te.fromDurationLike(t);if(!this.isValid||!r.isValid||r.as("milliseconds")===0)return[];let{s:i}=this,s=1,n;const o=[];for(;i<this.e;){const l=this.start.plus(r.mapUnits(c=>c*s));n=+l>+this.e?this.e:l,o.push(ct.fromDateTimes(i,n)),i=n,s+=1}return o}divideEqually(t){return this.isValid?this.splitBy(this.length()/t).slice(0,t):[]}overlaps(t){return this.e>t.s&&this.s<t.e}abutsStart(t){return this.isValid?+this.e==+t.s:!1}abutsEnd(t){return this.isValid?+t.e==+this.s:!1}engulfs(t){return this.isValid?this.s<=t.s&&this.e>=t.e:!1}equals(t){return!this.isValid||!t.isValid?!1:this.s.equals(t.s)&&this.e.equals(t.e)}intersection(t){if(!this.isValid)return this;const r=this.s>t.s?this.s:t.s,i=this.e<t.e?this.e:t.e;return r>=i?null:ct.fromDateTimes(r,i)}union(t){if(!this.isValid)return this;const r=this.s<t.s?this.s:t.s,i=this.e>t.e?this.e:t.e;return ct.fromDateTimes(r,i)}static merge(t){const[r,i]=t.sort((s,n)=>s.s-n.s).reduce(([s,n],o)=>n?n.overlaps(o)||n.abutsStart(o)?[s,n.union(o)]:[s.concat([n]),o]:[s,o],[[],null]);return i&&r.push(i),r}static xor(t){let r=null,i=0;const s=[],n=t.map(c=>[{time:c.s,type:"s"},{time:c.e,type:"e"}]),o=Array.prototype.concat(...n),l=o.sort((c,p)=>c.time-p.time);for(const c of l)i+=c.type==="s"?1:-1,i===1?r=c.time:(r&&+r!=+c.time&&s.push(ct.fromDateTimes(r,c.time)),r=null);return ct.merge(s)}difference(...t){return ct.xor([this].concat(t)).map(r=>this.intersection(r)).filter(r=>r&&!r.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} â€“ ${this.e.toISO()})`:Ol}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(t=pm,r={}){return this.isValid?cr.create(this.s.loc.clone(r),t).formatInterval(this):Ol}toISO(t){return this.isValid?`${this.s.toISO(t)}/${this.e.toISO(t)}`:Ol}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Ol}toISOTime(t){return this.isValid?`${this.s.toISOTime(t)}/${this.e.toISOTime(t)}`:Ol}toFormat(t,{separator:r=" â€“ "}={}){return this.isValid?`${this.s.toFormat(t)}${r}${this.e.toFormat(t)}`:Ol}toDuration(t,r){return this.isValid?this.e.diff(this.s,t,r):Te.invalid(this.invalidReason)}mapEndpoints(t){return ct.fromDateTimes(t(this.s),t(this.e))}}class Jh{static hasDST(t=dt.defaultZone){const r=Z.now().setZone(t).set({month:12});return!t.isUniversal&&r.offset!==r.set({month:6}).offset}static isValidIANAZone(t){return Dr.isValidZone(t)}static normalizeZone(t){return mo(t,dt.defaultZone)}static getStartOfWeek({locale:t=null,locObj:r=null}={}){return(r||Re.create(t)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:t=null,locObj:r=null}={}){return(r||Re.create(t)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:t=null,locObj:r=null}={}){return(r||Re.create(t)).getWeekendDays().slice()}static months(t="long",{locale:r=null,numberingSystem:i=null,locObj:s=null,outputCalendar:n="gregory"}={}){return(s||Re.create(r,i,n)).months(t)}static monthsFormat(t="long",{locale:r=null,numberingSystem:i=null,locObj:s=null,outputCalendar:n="gregory"}={}){return(s||Re.create(r,i,n)).months(t,!0)}static weekdays(t="long",{locale:r=null,numberingSystem:i=null,locObj:s=null}={}){return(s||Re.create(r,i,null)).weekdays(t)}static weekdaysFormat(t="long",{locale:r=null,numberingSystem:i=null,locObj:s=null}={}){return(s||Re.create(r,i,null)).weekdays(t,!0)}static meridiems({locale:t=null}={}){return Re.create(t).meridiems()}static eras(t="short",{locale:r=null}={}){return Re.create(r,null,"gregory").eras(t)}static features(){return{relative:gO(),localeWeek:vO()}}}function Bx(e,t){const r=s=>s.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),i=r(t)-r(e);return Math.floor(Te.fromMillis(i).as("days"))}function u8(e,t,r){const i=[["years",(c,p)=>p.year-c.year],["quarters",(c,p)=>p.quarter-c.quarter+(p.year-c.year)*4],["months",(c,p)=>p.month-c.month+(p.year-c.year)*12],["weeks",(c,p)=>{const h=Bx(c,p);return(h-h%7)/7}],["days",Bx]],s={},n=e;let o,l;for(const[c,p]of i)r.indexOf(c)>=0&&(o=c,s[c]=p(e,t),l=n.plus(s),l>t?(s[c]--,e=n.plus(s),e>t&&(l=e,s[c]--,e=n.plus(s))):e=l);return[e,s,l,o]}function c8(e,t,r,i){let[s,n,o,l]=u8(e,t,r);const c=t-s,p=r.filter(f=>["hours","minutes","seconds","milliseconds"].indexOf(f)>=0);p.length===0&&(o<t&&(o=s.plus({[l]:1})),o!==s&&(n[l]=(n[l]||0)+c/(o-s)));const h=Te.fromObject(n,i);return p.length>0?Te.fromMillis(c,i).shiftTo(...p).plus(h):h}const d8="missing Intl.DateTimeFormat.formatToParts support";function Fe(e,t=r=>r){return{regex:e,deser:([r])=>t(e9(r))}}const p8="Â ",NO=`[ ${p8}]`,RO=new RegExp(NO,"g");function h8(e){return e.replace(/\./g,"\\.?").replace(RO,NO)}function Wx(e){return e.replace(/\./g,"").replace(RO," ").toLowerCase()}function Fi(e,t){return e===null?null:{regex:RegExp(e.map(h8).join("|")),deser:([r])=>e.findIndex(i=>Wx(r)===Wx(i))+t}}function Hx(e,t){return{regex:e,deser:([,r,i])=>gg(r,i),groups:t}}function Zh(e){return{regex:e,deser:([t])=>t}}function f8(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function y8(e,t){const r=Oi(t),i=Oi(t,"{2}"),s=Oi(t,"{3}"),n=Oi(t,"{4}"),o=Oi(t,"{6}"),l=Oi(t,"{1,2}"),c=Oi(t,"{1,3}"),p=Oi(t,"{1,6}"),h=Oi(t,"{1,9}"),f=Oi(t,"{2,4}"),y=Oi(t,"{4,6}"),m=w=>({regex:RegExp(f8(w.val)),deser:([S])=>S,literal:!0}),b=(w=>{if(e.literal)return m(w);switch(w.val){case"G":return Fi(t.eras("short"),0);case"GG":return Fi(t.eras("long"),0);case"y":return Fe(p);case"yy":return Fe(f,ob);case"yyyy":return Fe(n);case"yyyyy":return Fe(y);case"yyyyyy":return Fe(o);case"M":return Fe(l);case"MM":return Fe(i);case"MMM":return Fi(t.months("short",!0),1);case"MMMM":return Fi(t.months("long",!0),1);case"L":return Fe(l);case"LL":return Fe(i);case"LLL":return Fi(t.months("short",!1),1);case"LLLL":return Fi(t.months("long",!1),1);case"d":return Fe(l);case"dd":return Fe(i);case"o":return Fe(c);case"ooo":return Fe(s);case"HH":return Fe(i);case"H":return Fe(l);case"hh":return Fe(i);case"h":return Fe(l);case"mm":return Fe(i);case"m":return Fe(l);case"q":return Fe(l);case"qq":return Fe(i);case"s":return Fe(l);case"ss":return Fe(i);case"S":return Fe(c);case"SSS":return Fe(s);case"u":return Zh(h);case"uu":return Zh(l);case"uuu":return Fe(r);case"a":return Fi(t.meridiems(),0);case"kkkk":return Fe(n);case"kk":return Fe(f,ob);case"W":return Fe(l);case"WW":return Fe(i);case"E":case"c":return Fe(r);case"EEE":return Fi(t.weekdays("short",!1),1);case"EEEE":return Fi(t.weekdays("long",!1),1);case"ccc":return Fi(t.weekdays("short",!0),1);case"cccc":return Fi(t.weekdays("long",!0),1);case"Z":case"ZZ":return Hx(new RegExp(`([+-]${l.source})(?::(${i.source}))?`),2);case"ZZZ":return Hx(new RegExp(`([+-]${l.source})(${i.source})?`),2);case"z":return Zh(/[a-z_+-/]{1,256}?/i);case" ":return Zh(/[^\S\n\r]/);default:return m(w)}})(e)||{invalidReason:d8};return b.token=e,b}const m8={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function g8(e,t,r){const{type:i,value:s}=e;if(i==="literal"){const c=/^\s+$/.test(s);return{literal:!c,val:c?" ":s}}const n=t[i];let o=i;i==="hour"&&(t.hour12!=null?o=t.hour12?"hour12":"hour24":t.hourCycle!=null?t.hourCycle==="h11"||t.hourCycle==="h12"?o="hour12":o="hour24":o=r.hour12?"hour12":"hour24");let l=m8[o];if(typeof l=="object"&&(l=l[n]),l)return{literal:!1,val:l}}function v8(e){return[`^${e.map(r=>r.regex).reduce((r,i)=>`${r}(${i.source})`,"")}$`,e]}function b8(e,t,r){const i=e.match(t);if(i){const s={};let n=1;for(const o in r)if(tc(r,o)){const l=r[o],c=l.groups?l.groups+1:1;!l.literal&&l.token&&(s[l.token.val[0]]=l.deser(i.slice(n,n+c))),n+=c}return[i,s]}else return[i,{}]}function w8(e){const t=n=>{switch(n){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let r=null,i;return ue(e.z)||(r=Dr.create(e.z)),ue(e.Z)||(r||(r=new Tt(e.Z)),i=e.Z),ue(e.q)||(e.M=(e.q-1)*3+1),ue(e.h)||(e.h<12&&e.a===1?e.h+=12:e.h===12&&e.a===0&&(e.h=0)),e.G===0&&e.y&&(e.y=-e.y),ue(e.u)||(e.S=S$(e.u)),[Object.keys(e).reduce((n,o)=>{const l=t(o);return l&&(n[l]=e[o]),n},{}),r,i]}let _0=null;function _8(){return _0||(_0=Z.fromMillis(1555555555555)),_0}function $8(e,t){if(e.literal)return e;const r=cr.macroTokenToFormatOpts(e.val),i=UO(r,t);return i==null||i.includes(void 0)?e:i}function jO(e,t){return Array.prototype.concat(...e.map(r=>$8(r,t)))}class DO{constructor(t,r){if(this.locale=t,this.format=r,this.tokens=jO(cr.parseFormat(r),t),this.units=this.tokens.map(i=>y8(i,t)),this.disqualifyingUnit=this.units.find(i=>i.invalidReason),!this.disqualifyingUnit){const[i,s]=v8(this.units);this.regex=RegExp(i,"i"),this.handlers=s}}explainFromTokens(t){if(this.isValid){const[r,i]=b8(t,this.regex,this.handlers),[s,n,o]=i?w8(i):[null,null,void 0];if(tc(i,"a")&&tc(i,"H"))throw new Tu("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:this.tokens,regex:this.regex,rawMatches:r,matches:i,result:s,zone:n,specificOffset:o}}else return{input:t,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function VO(e,t,r){return new DO(e,r).explainFromTokens(t)}function S8(e,t,r){const{result:i,zone:s,specificOffset:n,invalidReason:o}=VO(e,t,r);return[i,s,n,o]}function UO(e,t){if(!e)return null;const i=cr.create(t,e).dtFormatter(_8()),s=i.formatToParts(),n=i.resolvedOptions();return s.map(o=>g8(o,e,n))}const $0="Invalid DateTime",Jx=864e13;function dd(e){return new es("unsupported zone",`the zone "${e.name}" is not supported`)}function S0(e){return e.weekData===null&&(e.weekData=hm(e.c)),e.weekData}function x0(e){return e.localWeekData===null&&(e.localWeekData=hm(e.c,e.loc.getMinDaysInFirstWeek(),e.loc.getStartOfWeek())),e.localWeekData}function Qo(e,t){const r={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new Z({...r,...t,old:r})}function zO(e,t,r){let i=e-t*60*1e3;const s=r.offset(i);if(t===s)return[i,t];i-=(s-t)*60*1e3;const n=r.offset(i);return s===n?[i,s]:[e-Math.min(s,n)*60*1e3,Math.max(s,n)]}function Yh(e,t){e+=t*60*1e3;const r=new Date(e);return{year:r.getUTCFullYear(),month:r.getUTCMonth()+1,day:r.getUTCDate(),hour:r.getUTCHours(),minute:r.getUTCMinutes(),second:r.getUTCSeconds(),millisecond:r.getUTCMilliseconds()}}function Bf(e,t,r){return zO(mg(e),t,r)}function Zx(e,t){const r=e.o,i=e.c.year+Math.trunc(t.years),s=e.c.month+Math.trunc(t.months)+Math.trunc(t.quarters)*3,n={...e.c,year:i,month:s,day:Math.min(e.c.day,fm(i,s))+Math.trunc(t.days)+Math.trunc(t.weeks)*7},o=Te.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),l=mg(n);let[c,p]=zO(l,r,e.zone);return o!==0&&(c+=o,p=e.zone.offset(c)),{ts:c,o:p}}function Fl(e,t,r,i,s,n){const{setZone:o,zone:l}=r;if(e&&Object.keys(e).length!==0||t){const c=t||l,p=Z.fromObject(e,{...r,zone:c,specificOffset:n});return o?p:p.setZone(l)}else return Z.invalid(new es("unparsable",`the input "${s}" can't be parsed as ${i}`))}function Qh(e,t,r=!0){return e.isValid?cr.create(Re.create("en-US"),{allowZ:r,forceSimple:!0}).formatDateTimeFromString(e,t):null}function I0(e,t){const r=e.c.year>9999||e.c.year<0;let i="";return r&&e.c.year>=0&&(i+="+"),i+=It(e.c.year,r?6:4),t?(i+="-",i+=It(e.c.month),i+="-",i+=It(e.c.day)):(i+=It(e.c.month),i+=It(e.c.day)),i}function Yx(e,t,r,i,s,n){let o=It(e.c.hour);return t?(o+=":",o+=It(e.c.minute),(e.c.millisecond!==0||e.c.second!==0||!r)&&(o+=":")):o+=It(e.c.minute),(e.c.millisecond!==0||e.c.second!==0||!r)&&(o+=It(e.c.second),(e.c.millisecond!==0||!i)&&(o+=".",o+=It(e.c.millisecond,3))),s&&(e.isOffsetFixed&&e.offset===0&&!n?o+="Z":e.o<0?(o+="-",o+=It(Math.trunc(-e.o/60)),o+=":",o+=It(Math.trunc(-e.o%60))):(o+="+",o+=It(Math.trunc(e.o/60)),o+=":",o+=It(Math.trunc(e.o%60)))),n&&(o+="["+e.zone.ianaName+"]"),o}const qO={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},x8={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},I8={ordinal:1,hour:0,minute:0,second:0,millisecond:0},GO=["year","month","day","hour","minute","second","millisecond"],T8=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],M8=["year","ordinal","hour","minute","second","millisecond"];function E8(e){const t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new BC(e);return t}function Qx(e){switch(e.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return E8(e)}}function A8(e){return Hf[e]||(Wf===void 0&&(Wf=dt.now()),Hf[e]=e.offset(Wf)),Hf[e]}function Kx(e,t){const r=mo(t.zone,dt.defaultZone);if(!r.isValid)return Z.invalid(dd(r));const i=Re.fromObject(t);let s,n;if(ue(e.year))s=dt.now();else{for(const c of GO)ue(e[c])&&(e[c]=qO[c]);const o=yO(e)||mO(e);if(o)return Z.invalid(o);const l=A8(r);[s,n]=Bf(e,l,r)}return new Z({ts:s,zone:r,loc:i,o:n})}function Xx(e,t,r){const i=ue(r.round)?!0:r.round,s=(o,l)=>(o=x$(o,i||r.calendary?0:2,!0),t.loc.clone(r).relFormatter(r).format(o,l)),n=o=>r.calendary?t.hasSame(e,o)?0:t.startOf(o).diff(e.startOf(o),o).get(o):t.diff(e,o).get(o);if(r.unit)return s(n(r.unit),r.unit);for(const o of r.units){const l=n(o);if(Math.abs(l)>=1)return s(l,o)}return s(e>t?-0:0,r.units[r.units.length-1])}function eI(e){let t={},r;return e.length>0&&typeof e[e.length-1]=="object"?(t=e[e.length-1],r=Array.from(e).slice(0,e.length-1)):r=Array.from(e),[t,r]}let Wf,Hf={};class Z{constructor(t){const r=t.zone||dt.defaultZone;let i=t.invalid||(Number.isNaN(t.ts)?new es("invalid input"):null)||(r.isValid?null:dd(r));this.ts=ue(t.ts)?dt.now():t.ts;let s=null,n=null;if(!i)if(t.old&&t.old.ts===this.ts&&t.old.zone.equals(r))[s,n]=[t.old.c,t.old.o];else{const l=Co(t.o)&&!t.old?t.o:r.offset(this.ts);s=Yh(this.ts,l),i=Number.isNaN(s.year)?new es("invalid input"):null,s=i?null:s,n=i?null:l}this._zone=r,this.loc=t.loc||Re.create(),this.invalid=i,this.weekData=null,this.localWeekData=null,this.c=s,this.o=n,this.isLuxonDateTime=!0}static now(){return new Z({})}static local(){const[t,r]=eI(arguments),[i,s,n,o,l,c,p]=r;return Kx({year:i,month:s,day:n,hour:o,minute:l,second:c,millisecond:p},t)}static utc(){const[t,r]=eI(arguments),[i,s,n,o,l,c,p]=r;return t.zone=Tt.utcInstance,Kx({year:i,month:s,day:n,hour:o,minute:l,second:c,millisecond:p},t)}static fromJSDate(t,r={}){const i=n9(t)?t.valueOf():NaN;if(Number.isNaN(i))return Z.invalid("invalid input");const s=mo(r.zone,dt.defaultZone);return s.isValid?new Z({ts:i,zone:s,loc:Re.fromObject(r)}):Z.invalid(dd(s))}static fromMillis(t,r={}){if(Co(t))return t<-Jx||t>Jx?Z.invalid("Timestamp out of range"):new Z({ts:t,zone:mo(r.zone,dt.defaultZone),loc:Re.fromObject(r)});throw new lr(`fromMillis requires a numerical input, but received a ${typeof t} with value ${t}`)}static fromSeconds(t,r={}){if(Co(t))return new Z({ts:t*1e3,zone:mo(r.zone,dt.defaultZone),loc:Re.fromObject(r)});throw new lr("fromSeconds requires a numerical input")}static fromObject(t,r={}){t=t||{};const i=mo(r.zone,dt.defaultZone);if(!i.isValid)return Z.invalid(dd(i));const s=Re.fromObject(r),n=ym(t,Qx),{minDaysInFirstWeek:o,startOfWeek:l}=jx(n,s),c=dt.now(),p=ue(r.specificOffset)?i.offset(c):r.specificOffset,h=!ue(n.ordinal),f=!ue(n.year),y=!ue(n.month)||!ue(n.day),m=f||y,g=n.weekYear||n.weekNumber;if((m||h)&&g)throw new Tu("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(y&&h)throw new Tu("Can't mix ordinal dates with month/day");const b=g||n.weekday&&!m;let w,S,x=Yh(c,p);b?(w=T8,S=x8,x=hm(x,o,l)):h?(w=M8,S=I8,x=w0(x)):(w=GO,S=qO);let E=!1;for(const Y of w){const se=n[Y];ue(se)?E?n[Y]=S[Y]:n[Y]=x[Y]:E=!0}const C=b?r9(n,o,l):h?i9(n):yO(n),P=C||mO(n);if(P)return Z.invalid(P);const L=b?Nx(n,o,l):h?Rx(n):n,[V,q]=Bf(L,p,i),H=new Z({ts:V,zone:i,o:q,loc:s});return n.weekday&&m&&t.weekday!==H.weekday?Z.invalid("mismatched weekday",`you can't specify both a weekday of ${n.weekday} and a date of ${H.toISO()}`):H.isValid?H:Z.invalid(H.invalid)}static fromISO(t,r={}){const[i,s]=J9(t);return Fl(i,s,r,"ISO 8601",t)}static fromRFC2822(t,r={}){const[i,s]=Z9(t);return Fl(i,s,r,"RFC 2822",t)}static fromHTTP(t,r={}){const[i,s]=Y9(t);return Fl(i,s,r,"HTTP",r)}static fromFormat(t,r,i={}){if(ue(t)||ue(r))throw new lr("fromFormat requires an input string and a format");const{locale:s=null,numberingSystem:n=null}=i,o=Re.fromOpts({locale:s,numberingSystem:n,defaultToEN:!0}),[l,c,p,h]=S8(o,t,r);return h?Z.invalid(h):Fl(l,c,i,`format ${r}`,t,p)}static fromString(t,r,i={}){return Z.fromFormat(t,r,i)}static fromSQL(t,r={}){const[i,s]=i8(t);return Fl(i,s,r,"SQL",t)}static invalid(t,r=null){if(!t)throw new lr("need to specify a reason the DateTime is invalid");const i=t instanceof es?t:new es(t,r);if(dt.throwOnInvalid)throw new AD(i);return new Z({invalid:i})}static isDateTime(t){return t&&t.isLuxonDateTime||!1}static parseFormatForOpts(t,r={}){const i=UO(t,Re.fromObject(r));return i?i.map(s=>s?s.val:null).join(""):null}static expandFormat(t,r={}){return jO(cr.parseFormat(t),Re.fromObject(r)).map(s=>s.val).join("")}static resetCache(){Wf=void 0,Hf={}}get(t){return this[t]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?S0(this).weekYear:NaN}get weekNumber(){return this.isValid?S0(this).weekNumber:NaN}get weekday(){return this.isValid?S0(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?x0(this).weekday:NaN}get localWeekNumber(){return this.isValid?x0(this).weekNumber:NaN}get localWeekYear(){return this.isValid?x0(this).weekYear:NaN}get ordinal(){return this.isValid?w0(this.c).ordinal:NaN}get monthShort(){return this.isValid?Jh.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Jh.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Jh.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Jh.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const t=864e5,r=6e4,i=mg(this.c),s=this.zone.offset(i-t),n=this.zone.offset(i+t),o=this.zone.offset(i-s*r),l=this.zone.offset(i-n*r);if(o===l)return[this];const c=i-o*r,p=i-l*r,h=Yh(c,o),f=Yh(p,l);return h.hour===f.hour&&h.minute===f.minute&&h.second===f.second&&h.millisecond===f.millisecond?[Qo(this,{ts:c}),Qo(this,{ts:p})]:[this]}get isInLeapYear(){return fh(this.year)}get daysInMonth(){return fm(this.year,this.month)}get daysInYear(){return this.isValid?Du(this.year):NaN}get weeksInWeekYear(){return this.isValid?Lp(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?Lp(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(t={}){const{locale:r,numberingSystem:i,calendar:s}=cr.create(this.loc.clone(t),t).resolvedOptions(this);return{locale:r,numberingSystem:i,outputCalendar:s}}toUTC(t=0,r={}){return this.setZone(Tt.instance(t),r)}toLocal(){return this.setZone(dt.defaultZone)}setZone(t,{keepLocalTime:r=!1,keepCalendarTime:i=!1}={}){if(t=mo(t,dt.defaultZone),t.equals(this.zone))return this;if(t.isValid){let s=this.ts;if(r||i){const n=t.offset(this.ts),o=this.toObject();[s]=Bf(o,n,t)}return Qo(this,{ts:s,zone:t})}else return Z.invalid(dd(t))}reconfigure({locale:t,numberingSystem:r,outputCalendar:i}={}){const s=this.loc.clone({locale:t,numberingSystem:r,outputCalendar:i});return Qo(this,{loc:s})}setLocale(t){return this.reconfigure({locale:t})}set(t){if(!this.isValid)return this;const r=ym(t,Qx),{minDaysInFirstWeek:i,startOfWeek:s}=jx(r,this.loc),n=!ue(r.weekYear)||!ue(r.weekNumber)||!ue(r.weekday),o=!ue(r.ordinal),l=!ue(r.year),c=!ue(r.month)||!ue(r.day),p=l||c,h=r.weekYear||r.weekNumber;if((p||o)&&h)throw new Tu("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(c&&o)throw new Tu("Can't mix ordinal dates with month/day");let f;n?f=Nx({...hm(this.c,i,s),...r},i,s):ue(r.ordinal)?(f={...this.toObject(),...r},ue(r.day)&&(f.day=Math.min(fm(f.year,f.month),f.day))):f=Rx({...w0(this.c),...r});const[y,m]=Bf(f,this.o,this.zone);return Qo(this,{ts:y,o:m})}plus(t){if(!this.isValid)return this;const r=Te.fromDurationLike(t);return Qo(this,Zx(this,r))}minus(t){if(!this.isValid)return this;const r=Te.fromDurationLike(t).negate();return Qo(this,Zx(this,r))}startOf(t,{useLocaleWeeks:r=!1}={}){if(!this.isValid)return this;const i={},s=Te.normalizeUnit(t);switch(s){case"years":i.month=1;case"quarters":case"months":i.day=1;case"weeks":case"days":i.hour=0;case"hours":i.minute=0;case"minutes":i.second=0;case"seconds":i.millisecond=0;break}if(s==="weeks")if(r){const n=this.loc.getStartOfWeek(),{weekday:o}=this;o<n&&(i.weekNumber=this.weekNumber-1),i.weekday=n}else i.weekday=1;if(s==="quarters"){const n=Math.ceil(this.month/3);i.month=(n-1)*3+1}return this.set(i)}endOf(t,r){return this.isValid?this.plus({[t]:1}).startOf(t,r).minus(1):this}toFormat(t,r={}){return this.isValid?cr.create(this.loc.redefaultToEN(r)).formatDateTimeFromString(this,t):$0}toLocaleString(t=pm,r={}){return this.isValid?cr.create(this.loc.clone(r),t).formatDateTime(this):$0}toLocaleParts(t={}){return this.isValid?cr.create(this.loc.clone(t),t).formatDateTimeParts(this):[]}toISO({format:t="extended",suppressSeconds:r=!1,suppressMilliseconds:i=!1,includeOffset:s=!0,extendedZone:n=!1}={}){if(!this.isValid)return null;const o=t==="extended";let l=I0(this,o);return l+="T",l+=Yx(this,o,r,i,s,n),l}toISODate({format:t="extended"}={}){return this.isValid?I0(this,t==="extended"):null}toISOWeekDate(){return Qh(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:t=!1,suppressSeconds:r=!1,includeOffset:i=!0,includePrefix:s=!1,extendedZone:n=!1,format:o="extended"}={}){return this.isValid?(s?"T":"")+Yx(this,o==="extended",r,t,i,n):null}toRFC2822(){return Qh(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return Qh(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?I0(this,!0):null}toSQLTime({includeOffset:t=!0,includeZone:r=!1,includeOffsetSpace:i=!0}={}){let s="HH:mm:ss.SSS";return(r||t)&&(i&&(s+=" "),r?s+="z":t&&(s+="ZZ")),Qh(this,s,!0)}toSQL(t={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(t)}`:null}toString(){return this.isValid?this.toISO():$0}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(t={}){if(!this.isValid)return{};const r={...this.c};return t.includeConfig&&(r.outputCalendar=this.outputCalendar,r.numberingSystem=this.loc.numberingSystem,r.locale=this.loc.locale),r}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(t,r="milliseconds",i={}){if(!this.isValid||!t.isValid)return Te.invalid("created by diffing an invalid DateTime");const s={locale:this.locale,numberingSystem:this.numberingSystem,...i},n=o9(r).map(Te.normalizeUnit),o=t.valueOf()>this.valueOf(),l=o?this:t,c=o?t:this,p=c8(l,c,n,s);return o?p.negate():p}diffNow(t="milliseconds",r={}){return this.diff(Z.now(),t,r)}until(t){return this.isValid?ct.fromDateTimes(this,t):this}hasSame(t,r,i){if(!this.isValid)return!1;const s=t.valueOf(),n=this.setZone(t.zone,{keepLocalTime:!0});return n.startOf(r,i)<=s&&s<=n.endOf(r,i)}equals(t){return this.isValid&&t.isValid&&this.valueOf()===t.valueOf()&&this.zone.equals(t.zone)&&this.loc.equals(t.loc)}toRelative(t={}){if(!this.isValid)return null;const r=t.base||Z.fromObject({},{zone:this.zone}),i=t.padding?this<r?-t.padding:t.padding:0;let s=["years","months","days","hours","minutes","seconds"],n=t.unit;return Array.isArray(t.unit)&&(s=t.unit,n=void 0),Xx(r,this.plus(i),{...t,numeric:"always",units:s,unit:n})}toRelativeCalendar(t={}){return this.isValid?Xx(t.base||Z.fromObject({},{zone:this.zone}),this,{...t,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...t){if(!t.every(Z.isDateTime))throw new lr("min requires all arguments be DateTimes");return Dx(t,r=>r.valueOf(),Math.min)}static max(...t){if(!t.every(Z.isDateTime))throw new lr("max requires all arguments be DateTimes");return Dx(t,r=>r.valueOf(),Math.max)}static fromFormatExplain(t,r,i={}){const{locale:s=null,numberingSystem:n=null}=i,o=Re.fromOpts({locale:s,numberingSystem:n,defaultToEN:!0});return VO(o,t,r)}static fromStringExplain(t,r,i={}){return Z.fromFormatExplain(t,r,i)}static buildFormatParser(t,r={}){const{locale:i=null,numberingSystem:s=null}=r,n=Re.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0});return new DO(n,t)}static fromFormatParser(t,r,i={}){if(ue(t)||ue(r))throw new lr("fromFormatParser requires an input string and a format parser");const{locale:s=null,numberingSystem:n=null}=i,o=Re.fromOpts({locale:s,numberingSystem:n,defaultToEN:!0});if(!o.equals(r.locale))throw new lr(`fromFormatParser called with a locale of ${o}, but the format parser was created for ${r.locale}`);const{result:l,zone:c,specificOffset:p,invalidReason:h}=r.explainFromTokens(t);return h?Z.invalid(h):Fl(l,c,i,`format ${r.format}`,t,p)}static get DATE_SHORT(){return pm}static get DATE_MED(){return WC}static get DATE_MED_WITH_WEEKDAY(){return FD}static get DATE_FULL(){return HC}static get DATE_HUGE(){return JC}static get TIME_SIMPLE(){return ZC}static get TIME_WITH_SECONDS(){return YC}static get TIME_WITH_SHORT_OFFSET(){return QC}static get TIME_WITH_LONG_OFFSET(){return KC}static get TIME_24_SIMPLE(){return XC}static get TIME_24_WITH_SECONDS(){return eO}static get TIME_24_WITH_SHORT_OFFSET(){return tO}static get TIME_24_WITH_LONG_OFFSET(){return rO}static get DATETIME_SHORT(){return iO}static get DATETIME_SHORT_WITH_SECONDS(){return sO}static get DATETIME_MED(){return nO}static get DATETIME_MED_WITH_SECONDS(){return oO}static get DATETIME_MED_WITH_WEEKDAY(){return kD}static get DATETIME_FULL(){return aO}static get DATETIME_FULL_WITH_SECONDS(){return lO}static get DATETIME_HUGE(){return uO}static get DATETIME_HUGE_WITH_SECONDS(){return cO}}function Bc(e){if(Z.isDateTime(e))return e;if(e&&e.valueOf&&Co(e.valueOf()))return Z.fromJSDate(e);if(e&&typeof e=="object")return Z.fromObject(e);throw new lr(`Unknown datetime argument: ${e}, of type ${typeof e}`)}const ls="system",tl="unknown",js="UTC",C8=Intl.DateTimeFormat().resolvedOptions().timeZone,O8="shortOffset";function F8(e){return"timeZoneIANA"in e}function k8(e){return e.startsWith("UTC")}function mm(e,t=!1){return{json:{read:{source:e,reader:(r,i)=>i[e]?Jf(i[e]):null},write:!!t&&{allowNull:!0,writer(r,i){i[e]=r?P8(r):null}}}}}function Jf(e,t=ls){return e?F8(e)?e.timeZoneIANA:L8(e,t):t}function P8(e){return{timeZoneIANA:e}}function L8(e,t=ls){if(!e||!xx.has(e.timeZone))return t;const r=xx.get(e.timeZone);return k8(e.timeZone)||e.respectsDaylightSaving?r:N8(r)}function N8(e){const t=Z.local().setZone(e),r=Math.min(t.set({month:1,day:1}).offset,t.set({month:5}).offset);return r===0?"Etc/UTC":`Etc/GMT${Tt.instance(-r).formatOffset(0,"narrow")}`}function BO(e,t,r,i,s){if(t&&s==="date")return{timeZone:js,timeZoneName:void 0};const n=i.timeStyle||i.hour,o=r===tl;return{timeZone:o?s==="timestamp-offset"?void 0:e??js:r,timeZoneName:o&&n?O8:void 0}}function Uae(e){const t=new Set(["etc/utc","etc/gmt","gmt"]),r=new Set(Intl.supportedValuesOf("timeZone").map(i=>i.toLowerCase()));return e===ls||e===tl||t.has(e.toLowerCase())||r.has(e.toLowerCase())}const R8={year:void 0,month:void 0,day:void 0,weekday:void 0},j8={hour:void 0,minute:void 0,second:void 0},WO={timeZone:js},cs={year:"numeric",month:"numeric",day:"numeric"},Wc={year:"numeric",month:"long",day:"numeric"},Hc={year:"numeric",month:"short",day:"numeric"},Jc={year:"numeric",month:"long",weekday:"long",day:"numeric"},uo={hour:"numeric",minute:"numeric"},ra={...uo,second:"numeric"},HO={hourCycle:"h23"},Zc={...uo,...HO},Yc={...ra,...HO},JO={"short-date":cs,"short-date-short-time":{...cs,...uo},"short-date-short-time-24":{...cs,...Zc},"short-date-long-time":{...cs,...ra},"short-date-long-time-24":{...cs,...Yc},"short-date-le":cs,"short-date-le-short-time":{...cs,...uo},"short-date-le-short-time-24":{...cs,...Zc},"short-date-le-long-time":{...cs,...ra},"short-date-le-long-time-24":{...cs,...Yc},"long-month-day-year":Wc,"long-month-day-year-short-time":{...Wc,...uo},"long-month-day-year-short-time-24":{...Wc,...Zc},"long-month-day-year-long-time":{...Wc,...ra},"long-month-day-year-long-time-24":{...Wc,...Yc},"day-short-month-year":Hc,"day-short-month-year-short-time":{...Hc,...uo},"day-short-month-year-short-time-24":{...Hc,...Zc},"day-short-month-year-long-time":{...Hc,...ra},"day-short-month-year-long-time-24":{...Hc,...Yc},"long-date":Jc,"long-date-short-time":{...Jc,...uo},"long-date-short-time-24":{...Jc,...Zc},"long-date-long-time":{...Jc,...ra},"long-date-long-time-24":{...Jc,...Yc},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":uo,"long-time":ra},D8=Kt()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"}),ZO={ar:"ar-u-nu-latn-ca-gregory"};let ab=new WeakMap;const bg=JO["short-date-short-time"];function V8(e){let t=ab.get(e);if(!t){const r=Nr(),i=ZO[r]||r,s=E$(e.timeZone??ls),n={...e,timeZone:s};t=new Intl.DateTimeFormat(i,n),ab.set(e,t)}return t}function La(e){return JO[e]}function Xr(e,t=bg){return V8(t).format(e)}function U8(e,t=bg){return Xr(new Date(e),{...t,...WO,...j8})}function z8(e,t=bg){return Xr(new Date(`1970-01-01T${e}Z`),{...t,...WO,...R8})}function q8(e,t=bg){if(t.timeZone)return Xr(new Date(e),t);const r=Z.fromISO(e,{setZone:!0}),i=Nr(),s=ZO[i]??i,n=r.offset===0?js:t.timeZone,o={...t,timeZone:n};return r.toLocaleString(o,{locale:s})}function E$(e){switch(e){case ls:return C8;case tl:return js;default:return e}}b$(()=>{ab=new WeakMap});const G8={ar:"ar-u-nu-latn"};let Zf=new WeakMap,YO={};function B8(e){const t=e||YO;if(!Zf.has(t)){const r=Nr(),i=G8[Nr()]||r;Zf.set(t,new Intl.NumberFormat(i,e))}return Zf.get(t)}function Np(e={}){const t={};return e.digitSeparator!=null&&(t.useGrouping=e.digitSeparator),e.places!=null&&(t.minimumFractionDigits=t.maximumFractionDigits=e.places),t}function br(e,t){return Object.is(e,-0)&&(e=0),B8(t).format(e)}b$(()=>{Zf=new WeakMap,YO={}});const QO=()=>G.getLogger("esri.intl.substitute");function bi(e,t,r={}){const{format:i={}}=r;return ns(e,s=>W8(s,t,i))}function W8(e,t,r){let i,s;const n=e.indexOf(":");if(n===-1?i=e.trim():(i=e.slice(0,n).trim(),s=e.slice(n+1).trim()),!i)return"";const o=sh(i,t);if(o==null)return"";const l=(s?r==null?void 0:r[s]:null)??(r==null?void 0:r[i]);return l?H8(o,l):s?J8(o,s):A$(o)}function H8(e,t){switch(t.type){case"date":return Xr(e,t.intlOptions);case"number":return br(e,t.intlOptions);default:return QO().warn("missing format descriptor for key {key}"),A$(e)}}function J8(e,t){switch(t.toLowerCase()){case"dateformat":return Xr(e);case"numberformat":return br(e);default:return QO().warn(`inline format is unsupported since 4.12: ${t}`),/^(dateformat|datestring)/i.test(t)?Xr(e):/^numberformat/i.test(t)?br(e):A$(e)}}function A$(e){switch(typeof e){case"string":return e;case"number":return br(e);case"boolean":return""+e;default:return e instanceof Date?Xr(e):""}}const tI=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,Z8={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:!0,nl:!0,pl:!0,"pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,"zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function rI(e){return e in Z8}const pd=[],Uu=new Map;function iI(e){for(const t of Uu.keys())XO(e.pattern,t)&&Uu.delete(t)}function Y8(e){return pd.includes(e)||(iI(e),pd.unshift(e)),pt(()=>{const t=pd.indexOf(e);t>-1&&(pd.splice(t,1),iI(e))})}async function KO(e){const t=Nr();Uu.has(e)||Uu.set(e,K8(e,t));const r=Uu.get(e);return r&&await X8.add(r),r}function Q8(e){if(!tI.test(e))return null;const t=tI.exec(e);if(t===null)return null;const[,r,i]=t,s=r+(i?"-"+i.toUpperCase():"");return rI(s)?s:rI(r)?r:null}async function K8(e,t){const r=[];for(const i of pd)if(XO(i.pattern,e))try{return await i.fetchMessageBundle(e,t)}catch(s){r.push(s)}throw r.length?new O("intl:message-bundle-error",`Errors occurred while loading "${e}"`,{errors:r}):new O("intl:no-message-bundle-loader",`No loader found for message bundle "${e}"`)}function XO(e,t){return typeof e=="string"?t.startsWith(e):e.test(t)}b$(()=>{Uu.clear()});const X8=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(e){return this._increase(),e.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=No())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}},eV=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,tV={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};function sI(e){const t=e==null?void 0:e.match(eV);if(!t)return null;const[,r,i,s]=t;if(!r)return null;let n=null,o=null,l=null;const{devext:c,qaext:p,www:h}=tV;if(i)if(n=r,s)switch(s.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:l}=c);break;case"qa":({customBaseUrl:o,portalHostname:l}=p);break;default:return null}else({customBaseUrl:o,portalHostname:l}=h);else switch(r.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:l}=c);break;case"qaext":({customBaseUrl:o,portalHostname:l}=p);break;case"www":({customBaseUrl:o,portalHostname:l}=h);break;default:return null}return{customBaseUrl:o,isPortal:!1,portalHostname:l,urlKey:n}}function rV(e){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(e)}function eF(e){const t=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,r=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,i=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;return t.test(e)?e=e.replace(t,"https://www.arcgis.com"):r.test(e)?e=e.replace(r,"https://devext.arcgis.com"):i.test(e)&&(e=e.replace(i,"https://qaext.arcgis.com")),e}function iV(e){const t=atob(e),r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r.buffer}function sV(e){const t=new Uint8Array(e);let r="";for(let i=0;i<t.length;i++)r+=String.fromCharCode(t[i]);return btoa(r)}const nV=()=>G.getLogger("esri.core.urlUtils"),Tc=Le.request,nI="esri/config: esriConfig.request.proxyUrl is not set.",tF=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,rF=/^\s*http:/i,oV=/^\s*https:/i,aV=/^\s*file:/i,lV=/:\d+$/,uV=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,cV=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),dV=new RegExp("^((([^[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^[:]*))(:([0-9]+))?$");let zu=class{constructor(t=""){this.uri=t,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let r=this.uri.match(cV);this.scheme=r[2]||(r[1]?"":null),this.authority=r[4]||(r[3]?"":null),this.path=r[5],this.query=r[7]||(r[6]?"":null),this.fragment=r[9]||(r[8]?"":null),this.authority!=null&&(r=this.authority.match(dV),this.user=r[3]||null,this.password=r[4]||null,this.host=r[6]||r[7],this.port=r[9]||null)}toString(){return this.uri}};const Kh={},pV=new zu(Le.applicationUrl);let dr=pV;const hV=fV();let C$=hV;const O$=()=>dr,qae=()=>C$;function fV(){const e=dr.path,t=e.slice(0,e.lastIndexOf("/")+1);return`${`${dr.scheme}://${dr.host}${dr.port!=null?`:${dr.port}`:""}`}${t}`}function Yt(e){if(!e)return null;const t={path:null,query:null},r=new zu(e),i=e.indexOf("?");return r.query===null?t.path=e:(t.path=e.slice(0,i),t.query=F$(r.query)),r.fragment&&(t.hash=r.fragment,r.query===null&&(t.path=t.path.slice(0,t.path.length-(r.fragment.length+1)))),t}function F$(e){const t=e.split("&"),r={};for(const i of t){if(!i)continue;const s=i.indexOf("=");let n,o;s<0?(n=decodeURIComponent(i),o=""):(n=decodeURIComponent(i.slice(0,s)),o=decodeURIComponent(i.slice(s+1)));let l=r[n];typeof l=="string"&&(l=r[n]=[l]),Array.isArray(l)?l.push(o):r[n]=o}return r}function Rp(e,t){return e?Object.keys(e).map(r=>{const i=e[r];if(i==null)return"";const s=encodeURIComponent(r)+"=",n=t==null?void 0:t[r];return n?s+encodeURIComponent(n(i)):Array.isArray(i)?i.map(o=>dm(o)?s+encodeURIComponent(JSON.stringify(o)):s+encodeURIComponent(o)).join("&"):dm(i)?s+encodeURIComponent(JSON.stringify(i)):s+encodeURIComponent(i)}).filter(r=>r).join("&"):""}function iF(e=!1){let t,r=Tc.proxyUrl;if(typeof e=="string"){t=wV(e);const i=wg(e);i&&(r=i.proxyUrl)}else t=!!e;if(!r)throw nV().warn(nI),new O("urlUtils:proxy-not-set",nI);return t&&ub()&&(r=R$(r)),Yt(r)}function Gae(e,t=!1){const r=wg(e);let i,s;if(r){const n=k$(r.proxyUrl);i=n.path,s=n.query?F$(n.query):null}else if(t){const n=iF(e);i=n.path,s=n.query}if(i){const n=Yt(e);e=i+"?"+n.path;const o=Rp({...s,...n.query});o&&(e=`${e}?${o}`)}return e}const Qc={path:"",query:""};function k$(e){const t=e.indexOf("?");return t!==-1?(Qc.path=e.slice(0,t),Qc.query=e.slice(t+1)):(Qc.path=e,Qc.query=null),Qc}function sF(e){return e=(e=vm(e=TV(e=k$(e).path),!0)).toLowerCase()}function yV(e){const t={proxyUrl:e.proxyUrl,urlPrefix:sF(e.urlPrefix)},r=Tc.proxyRules,i=t.urlPrefix;let s=r.length;for(let n=0;n<r.length;n++){const o=r[n].urlPrefix;if(i.indexOf(o)===0){if(i.length===o.length)return-1;s=n;break}o.indexOf(i)===0&&(s=n+1)}return r.splice(s,0,t),s}function wg(e){const t=Tc.proxyRules,r=sF(e);for(let i=0;i<t.length;i++)if(r.indexOf(t[i].urlPrefix)===0)return t[i]}function mV(e,t){if(!e||!t)return!1;e=gm(e),t=gm(t);const r=sI(e),i=sI(t);return r!=null&&i!=null?r.portalHostname===i.portalHostname:r==null&&i==null&&rc(e,t,!0)}function nF(e,t){return e=gm(e),t=gm(t),vm(e)===vm(t)}function gm(e){const t=(e=rs(e)).indexOf("/sharing");return t>0?e.slice(0,t):e.replace(/\/+$/,"")}function lb(e,t=Tc.interceptors){const r=i=>i==null||i instanceof RegExp&&i.test(e)||typeof i=="string"&&e.startsWith(i);if(t){for(const i of t)if(Array.isArray(i.urls)){if(i.urls.some(r))return i}else if(r(i.urls))return i}return null}function rc(e,t,r=!1){if(!e||!t)return!1;const i=db(e),s=db(t);return!(!r&&i.scheme!==s.scheme)&&i.host!=null&&s.host!=null&&i.host.toLowerCase()===s.host.toLowerCase()&&i.port===s.port}function P$(e){if(typeof e=="string"){if(!ti(e))return!0;e=db(e)}if(rc(e,dr))return!0;const t=Tc.trustedServers||[];for(let r=0;r<t.length;r++){const i=gV(t[r]);for(let s=0;s<i.length;s++)if(rc(e,i[s]))return!0}return!1}function gV(e){return Kh[e]||(N$(e)||Ds(e)?Kh[e]=[new zu(wi(e))]:Kh[e]=[new zu(`http://${e}`),new zu(`https://${e}`)]),Kh[e]}function wi(e,t=C$,r){return Ds(e)?r!=null&&r.preserveProtocolRelative?e:dr.scheme==="http"&&dr.authority===Ii(e).slice(2)?`http:${e}`:`https:${e}`:N$(e)?e:rl(e[0]==="/"?xV(t):t,e)}function L$(e,t=C$,r){if(e==null||!ti(e))return e;const i=rs(e),s=i.toLowerCase(),n=rs(t).toLowerCase().replace(/\/+$/,""),o=r?rs(r).toLowerCase().replace(/\/+$/,""):null;if(o&&n.indexOf(o)!==0)return e;const l=(f,y,m)=>(m=f.indexOf(y,m))===-1?f.length:m;let c=l(s,"/",s.indexOf("//")+2),p=-1;for(;s.slice(0,c+1)===n.slice(0,c)+"/"&&(p=c+1,c!==s.length);)c=l(s,"/",c+1);if(p===-1||o&&p<o.length)return e;e=i.slice(p);const h=n.slice(p-1).replaceAll(/[^/]+/g,"").length;if(h>0)for(let f=0;f<h;f++)e=`../${e}`;else e=`./${e}`;return e}function rs(e){return e=AV(e=EV(e=MV(e=wi(e=e.trim()))))}function rl(...e){const t=e.filter(gl);if(!(t!=null&&t.length))return;const r=[];if(ti(t[0])){const s=t[0],n=s.indexOf("//");n!==-1&&(r.push(s.slice(0,n+1)),$V(t[0])&&(r[0]+="/"),t[0]=s.slice(n+2))}else t[0][0]==="/"&&r.push("");const i=t.reduce((s,n)=>n?s.concat(n.split("/")):s,[]);for(let s=0;s<i.length;s++){const n=i[s];n===".."&&r.length>0&&r[r.length-1]!==".."?r.pop():(!n&&s===i.length-1||n&&(n!=="."||r.length===0))&&r.push(n)}return r.join("/")}function Ii(e,t=!1){if(e==null||_g(e)||wl(e))return null;let r=e.indexOf("://");if(r===-1&&Ds(e))r=2;else{if(r===-1)return null;r+=3}const i=e.indexOf("/",r);return i!==-1&&(e=e.slice(0,i)),t&&(e=vm(e,!0)),e}function ti(e){return Ds(e)||N$(e)}function _g(e){return e!=null&&e.slice(0,5)==="blob:"}function wl(e){return e!=null&&e.slice(0,5)==="data:"}function vV(e){const t=jp(e);return t!=null&&t.isBase64?iV(t.data):null}function Bae(e){return sV(e).replaceAll("+","-").replaceAll("/","_").replace(/=+$/,"")}const bV=/^data:(.*?)(;base64)?,(.*)$/;function jp(e){const t=e.match(bV);if(!t)return null;const[,r,i,s]=t;return{mediaType:r,isBase64:!!i,data:s}}function oF(e){return e.isBase64?`data:${e.mediaType};base64,${e.data}`:`data:${e.mediaType},${e.data}`}async function Wae(e){return(await fetch(e)).blob()}function Hae(e){const t=vV(e);if(!t)return null;const r=jp(e);return new Blob([t],{type:r.mediaType})}function Ds(e){return e!=null&&e[0]==="/"&&e[1]==="/"}function N$(e){return e!=null&&tF.test(e)}function wV(e){return e!=null&&oV.test(e)||dr.scheme==="https"&&Ds(e)}function _V(e){return e!=null&&rF.test(e)||dr.scheme==="http"&&Ds(e)}function $V(e){return e!=null&&aV.test(e)}function R$(e){return Ds(e)?`https:${e}`:e.replace(rF,"https:")}function SV(){return dr.scheme==="http"}function ub(){return dr.scheme==="https"}function vm(e,t=!1){return Ds(e)?e.slice(2):(e=e.replace(tF,""),t&&e.length>1&&e[0]==="/"&&e[1]==="/"&&(e=e.slice(2)),e)}function xV(e){const t=e.indexOf("//"),r=e.indexOf("/",t+2);return r===-1?e:e.slice(0,r)}function IV(e){let t=0;if(ti(e)){const i=e.indexOf("//");i!==-1&&(t=i+2)}const r=e.lastIndexOf("/");return r<t?e:e.slice(0,r+1)}function Jae(e,t){if(!e)return"";const r=Yt(e).path.replace(/\/+$/,""),i=r.slice(r.lastIndexOf("/")+1);if(!(t!=null&&t.length))return i;const s=new RegExp(`\\.(${t.join("|")})$`,"i");return i.replace(s,"")}function TV(e){return e.endsWith("/")?e:`${e}/`}function aF(e){return e.replace(/\/+$/,"")}function MV(e){if(/^https?:\/\//i.test(e)){const t=k$(e);e=(e=t.path.replaceAll(/\/{2,}/g,"/")).replace("/","//"),t.query&&(e+=`?${t.query}`)}return e}function EV(e){return e.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function AV(e){const t=Tc.httpsDomains;if(!_V(e))return e;const r=e.indexOf("/",7);let i;if(i=r===-1?e:e.slice(0,r),i=i.toLowerCase().slice(7),lV.test(i)){if(!i.endsWith(":80"))return e;i=i.slice(0,-3),e=e.replace(":80","")}return SV()&&i===dr.authority&&!uV.test(e)||(ub()&&i===dr.authority||t&&t.some(s=>i===s||i.endsWith(`.${s}`))||ub()&&!wg(e))&&(e=R$(e)),e}function cb(e,t,r){if(!(t&&r&&e&&ti(e)))return e;const i=e.indexOf("//"),s=e.indexOf("/",i+2),n=e.indexOf(":",i+2),o=Math.min(s<0?e.length:s,n<0?e.length:n);return e.slice(i+2,o).toLowerCase()!==t.toLowerCase()?e:`${e.slice(0,i+2)}${r}${e.slice(o)}`}function db(e){return typeof e=="string"?new zu(wi(e)):(e.scheme||(e.scheme=dr.scheme),e)}function lF(e,t){const r=Yt(e),i=Object.keys(r.query||{});return i.length>0&&t&&t.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${i.join(", ")}.`),r.path}function CV(e,t,r){const i=Yt(e),s=i.query||{};return s[t]=String(r),`${i.path}?${Rp(s)}`}function T0(e,t){if(!t)return e;const r=Yt(e),i=r.query||{};for(const[n,o]of Object.entries(t))o!=null&&(i[n]=o);const s=Rp(i);return s?`${r.path}?${s}`:r.path}function Zae(e){if(e==null)return null;const t=e.match(uF);return t?t[2]:null}function oI(e){if(e==null)return null;const t=e.match(uF);return t?{path:t[1],extension:t[2]}:{path:e,extension:null}}async function Yae(e){return typeof e=="string"?jp(e)??{data:e}:new Promise((t,r)=>{const i=new FileReader;i.readAsDataURL(e),i.onload=()=>t(jp(i.result)),i.onerror=s=>r(s)})}const uF=/([^.]*)\.([^/]*)$/,cF="20241122",dF="f6f7099a0e79cf518abdcf87c5aa8b6f24ecdcd8";Symbol.dispose??(Symbol.dispose=Symbol("Symbol.dispose")),Symbol.asyncDispose??(Symbol.asyncDispose=Symbol("Symbol.asyncDispose"));const OV="4.31";let ye,j$=OV;j$="4.31.6";function Qae(e){ye=e}function Kae(e){const t=ye==null?void 0:ye.findCredential(e);return t!=null&&t.token?CV(e,"token",t.token):e}k("host-webworker")||globalThis.$arcgis||Object.defineProperty(globalThis,"$arcgis",{configurable:!1,enumerable:!0,writable:!1,value:{}}),k("host-webworker");const FV=new Set(["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"]);function kV(e){const t=Ii(e,!0);return!!t&&t.endsWith(".arcgis.com")&&!FV.has(t)&&!e.endsWith("/sharing/rest/generateToken")}function pF(e,t){return!(!Le.apiKey||!kV(e))}function PV(e,t,r=!1,i){return new Promise((s,n)=>{if(Lo(i))return void n(aI());let o=()=>{p(),n(new Error(`Unable to load ${t}`))},l=()=>{const h=e;p(),s(h)},c=()=>{if(!e)return;const h=e;p(),h.src="",n(aI())};const p=()=>{k("esri-image-decode")||(e.removeEventListener("error",o),e.removeEventListener("load",l)),o=null,l=null,e=null,i!=null&&i.removeEventListener("abort",c),c=null,r&&URL.revokeObjectURL(t)};i!=null&&i.addEventListener("abort",c),k("esri-image-decode")?e.decode().then(l,o):(e.addEventListener("error",o),e.addEventListener("load",l))})}function aI(){try{return new DOMException("Aborted","AbortError")}catch{const e=new Error;return e.name="AbortError",e}}const hF="Timeout exceeded";function LV(){return new Error(hF)}function Xae(e){return typeof e=="object"&&!!e&&"message"in e&&e.message===hF}function NV(e){Le.request.crossOriginNoCorsDomains||(Le.request.crossOriginNoCorsDomains={});const t=Le.request.crossOriginNoCorsDomains;for(let r of e)r=r.toLowerCase(),/^https?:\/\//.test(r)?t[Ii(r)??""]=0:(t[Ii("http://"+r)??""]=0,t[Ii("https://"+r)??""]=0)}function RV(e){const t=Le.request.crossOriginNoCorsDomains;if(t){let r=Ii(e);if(r)return r=r.toLowerCase(),!rc(r,O$())&&t[r]<Date.now()-36e5}return!1}async function jV(e){var s;const t=Yt(e);e=t.path,((s=t.query)==null?void 0:s.f)==="json"&&(e+="?f=json");try{await fetch(e,{mode:"no-cors",credentials:"include"})}catch{}const r=Le.request.crossOriginNoCorsDomains,i=Ii(e);r&&i&&(r[i.toLowerCase()]=Date.now())}async function Ge(e,t){var y;e instanceof URL&&(e=e.toString()),(t==null?void 0:t.query)instanceof URLSearchParams&&(t.query=F$(t.query.toString().replaceAll("+"," ")));const r=wl(e),i=_g(e);i||r||(e=rs(e));const s={url:e,requestOptions:{...t}},n=m=>({data:m,getAllHeaders:ic,getHeader:ic,httpStatus:200,requestOptions:s.requestOptions,url:s.url}),o=lb(e,vi.internalInterceptors);if(o){const m=await uI(o,s);if(m!=null)return n(m)}let l=lb(e);if(l){const m=await uI(l,s);if(m!=null)return n(m);l.after||l.error||(l=null)}if(e=s.url,(t=s.requestOptions).responseType==="image"&&(k("host-webworker")||k("host-node")))throw Ls("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),s);if(t.method==="head"){if(t.body)throw Ls("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),s);if(r||i)throw Ls("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),s)}if(await qV(),bm)return bm.execute(e,t);const c=new AbortController,p=el(t,()=>c.abort()),h={controller:c,credential:void 0,credentialToken:void 0,fetchOptions:void 0,hasToken:!1,interceptor:l,params:s,redoRequest:!1,useIdentity:vi.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},f=await HV(h).finally(()=>p==null?void 0:p.remove());return(y=l==null?void 0:l.after)==null||y.call(l,f),f}let bm;const vi=Le.request,fF="FormData"in globalThis,DV=new Set([499,498,403,401]),VV=new Set(["COM_0056","COM_0057","SB_0008"]),UV=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],ic=()=>null,wm=Symbol();function zV(e){const t=Ii(e);t&&!Ge._corsServers.includes(t)&&Ge._corsServers.push(t)}function lI(e){const t=Ii(e);return!t||t.endsWith(".arcgis.com")||Ge._corsServers.includes(t)||P$(t)}function Ls(e,t,r,i){let s="Error";const n={url:r.url,requestOptions:r.requestOptions,getAllHeaders:ic,getHeader:ic,ssl:!1};if(t instanceof O)return t.details?(t.details=M(t.details),t.details.url=r.url,t.details.requestOptions=r.requestOptions):t.details=n,t;if(t){const o=i&&(()=>Array.from(i.headers)),l=i&&(h=>i.headers.get(h)),c=i==null?void 0:i.status,p=t.message;p&&(s=p),o&&l&&(n.getAllHeaders=o,n.getHeader=l),n.httpStatus=(t.httpCode!=null?t.httpCode:t.code)||c||0,n.subCode=t.subcode,n.messageCode=t.messageCode,typeof t.details=="string"?n.messages=[t.details]:n.messages=t.details,n.raw=wm in t?t[wm]:t}return vr(t)?Jt():new O(e,s,n)}async function qV(){k("host-webworker")&&!bm&&(bm=await j(()=>import("./request-Bw6-3BCs.js"),[]))}async function pb(){ye||await j(()=>import("./IdentityManager-CWpeIUm0.js"),[])}async function GV(e){var l;const t=e.params.url,r=e.params.requestOptions,i=e.controller.signal,s=r.body;let n=null,o=null;if(fF&&"HTMLFormElement"in globalThis&&(s instanceof FormData?n=s:s instanceof HTMLFormElement&&(n=new FormData(s))),typeof s=="string"&&(o=s),e.fetchOptions={cache:r.cacheBust?"no-cache":"default",credentials:"same-origin",headers:r.headers||{},method:r.method==="head"?"HEAD":"GET",mode:"cors",priority:vi.priority,redirect:"follow",signal:i},(n||o)&&(e.fetchOptions.body=n||o),r.authMode==="anonymous"&&(e.useIdentity=!1),e.hasToken=!!(/token=/i.test(t)||(l=r.query)!=null&&l.token||n!=null&&n.get("token")),!e.hasToken&&pF(t)&&(r.query||(r.query={}),r.query.token=Le.apiKey,e.hasToken=!0),e.useIdentity&&!e.hasToken&&!e.credentialToken&&!yF(t)&&!Lo(i)){let c;r.authMode==="immediate"?(await pb(),c=await ye.getCredential(t,{signal:i}),e.credential=c):r.authMode==="no-prompt"?(await pb(),c=await ye.getCredential(t,{prompt:!1,signal:i}).catch(()=>{}),e.credential=c):ye&&(c=ye.findCredential(t)),c&&(e.credentialToken=c.token,e.useSSL=!!c.ssl)}}function yF(e){return UV.some(t=>t.test(e))}async function BV(e){let t=e.params.url;const r=e.params.requestOptions,i=e.fetchOptions??{},s=_g(t)||wl(t),n=r.responseType||"json",o=s?0:r.timeout!=null?r.timeout:vi.timeout;let l=!1;if(!s){e.useSSL&&(t=R$(t));let y={...r.query};e.credentialToken&&(y.token=e.credentialToken);let m=Rp(y);k("esri-url-encodes-apostrophe")&&(m=m.replaceAll("'","%27"));const g=t.length+1+m.length;let b;l=r.method==="delete"||r.method==="post"||r.method==="put"||!!r.body||g>vi.maxUrlLength;const w=r.useProxy||!!wg(t);if(w){const S=iF(t);b=S.path,!l&&b.length+1+g>vi.maxUrlLength&&(l=!0),S.query&&(y={...S.query,...y})}if(i.method==="HEAD"&&(l||w)){if(l)throw g>vi.maxUrlLength?Ls("request:invalid-parameters",new Error("URL exceeds maximum length"),e.params):Ls("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),e.params);if(w)throw Ls("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),e.params)}if(l?(i.method=r.method==="delete"?"DELETE":r.method==="put"?"PUT":"POST",r.body?t=T0(t,y):(i.body=Rp(y),i.headers||(i.headers={}),i.headers["Content-Type"]="application/x-www-form-urlencoded")):t=T0(t,y),w&&(e.useProxy=!0,t=`${b}?${t}`),y.token&&fF&&i.body instanceof FormData&&!rV(t)&&i.body.set("token",y.token),r.hasOwnProperty("withCredentials"))e.withCredentials=r.withCredentials;else if(!rc(t,O$())){if(P$(t))e.withCredentials=!0;else if(ye){const S=ye.findServerInfo(t);S!=null&&S.webTierAuth&&(e.withCredentials=!0)}}e.withCredentials&&(i.credentials="include",RV(t)&&await jV(l?T0(t,y):t))}let c,p,h=0,f=!1;o>0&&(h=setTimeout(()=>{f=!0,e.controller.abort()},o));try{if(r.responseType==="native-request-init")p=i,p.url=t,r.signal?p.signal=r.signal:delete p.signal;else if(r.responseType!=="image"||i.cache!=="default"||i.method!=="GET"||l||WV(r.headers)||!s&&!e.useProxy&&vi.proxyUrl&&!lI(t)){if(Ge._beforeFetch&&await Ge._beforeFetch(t,i),c=await fetch(t,i),Ge._afterFetch&&await Ge._afterFetch(c),e.useProxy||zV(t),r.responseType==="native")p=c;else if(i.method!=="HEAD")if(c.ok){switch(n){case"array-buffer":p=await c.arrayBuffer();break;case"blob":case"image":p=await c.blob();break;default:p=await c.text()}if(h&&(clearTimeout(h),h=0),n==="json"||n==="xml"||n==="document")if(p)switch(n){case"json":p=JSON.parse(p);break;case"xml":p=cI(p,"application/xml");break;case"document":p=cI(p,"text/html")}else p=null;if(p){if(n==="array-buffer"||n==="blob"){const y=c.headers.get("Content-Type");if(y&&/application\/json|text\/plain/i.test(y)&&p[n==="blob"?"size":"byteLength"]<=750)try{const m=await new Response(p).json();m.error&&(p=m)}catch{}}n==="image"&&p instanceof Blob&&(p=await dI(URL.createObjectURL(p),e,!0))}}else{p=await c.text();try{p=JSON.parse(p)}catch{}}}else p=await dI(t,e)}catch(y){if(y.name==="AbortError")throw f?LV():Jt("Request canceled");if(!(!c&&y instanceof TypeError&&vi.proxyUrl)||r.body||r.method==="delete"||r.method==="head"||r.method==="post"||r.method==="put"||e.useProxy||lI(t))throw y;e.redoRequest=!0,yV({proxyUrl:vi.proxyUrl,urlPrefix:Ii(t)??""})}finally{h&&clearTimeout(h)}return[c,p]}async function uI(e,t){if(e.responseData!=null)return e.responseData;if(e.headers&&(t.requestOptions.headers={...t.requestOptions.headers,...e.headers}),e.query&&(t.requestOptions.query={...t.requestOptions.query,...e.query}),e.before){let r,i;try{i=await e.before(t)}catch(s){r=Ls("request:interceptor",s,t)}if((i instanceof Error||i instanceof O)&&(r=Ls("request:interceptor",i,t)),r)throw e.error&&e.error(r),r;return i}}function WV(e){if(e){for(const t of Object.getOwnPropertyNames(e))if(e[t])return!0}return!1}function cI(e,t){let r;try{r=new DOMParser().parseFromString(e,t)}catch{}if(!r||r.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return r}async function HV(e){var n,o;let t,r;await GV(e);try{do[t,r]=await BV(e);while(!await JV(e,t,r))}catch(l){const c=Ls("request:server",l,e.params,t);throw c.details.ssl=e.useSSL,(n=e.interceptor)!=null&&n.error&&e.interceptor.error(c),c}const i=e.params.url;if(r&&/\/sharing\/rest\/(accounts|portals)\/self/i.test(i)){if(!e.hasToken&&!e.credentialToken&&((o=r.user)!=null&&o.username)&&!P$(i)){const l=Ii(i,!0);l&&vi.trustedServers.push(l)}Array.isArray(r.authorizedCrossOriginNoCorsDomains)&&NV(r.authorizedCrossOriginNoCorsDomains)}const s=e.credential;if(s&&ye){const l=ye.findServerInfo(s.server);let c=l==null?void 0:l.owningSystemUrl;if(c){c=c.replace(/\/?$/,"/sharing");const p=ye.findCredential(c,s.userId);p&&ye._getIdenticalSvcIdx(c,p)===-1&&p.resources.unshift(c)}}return{data:r,getAllHeaders:t?()=>Array.from(t.headers):ic,getHeader:t?l=>t.headers.get(l):ic,httpStatus:(t==null?void 0:t.status)??200,requestOptions:e.params.requestOptions,ssl:e.useSSL,url:e.params.url}}async function JV(e,t,r){var p;if(e.redoRequest)return e.redoRequest=!1,!1;const i=e.params.requestOptions;if(!t||i.responseType==="native"||i.responseType==="native-request-init")return!0;let s,n;if(r&&(r.error&&typeof r.error=="object"?s=r.error:r.status==="error"&&Array.isArray(r.messages)&&(s={...r},s[wm]=r,s.details=r.messages)),!s&&!t.ok)throw s=new Error(`Unable to load ${t.url} status: ${t.status}`),s[wm]=r,s;let o,l=null;s&&(n=Number(s.code),l=s.hasOwnProperty("subcode")?Number(s.subcode):null,o=s.messageCode,o=o==null?void 0:o.toUpperCase());const c=i.authMode;if(n===403&&(l===4||(p=s.message)!=null&&p.toLowerCase().includes("ssl")&&!s.message.toLowerCase().includes("permission"))){if(!e.useSSL)return e.useSSL=!0,!1}else if(!e.hasToken&&e.useIdentity&&(c!=="no-prompt"||n===498)&&n!==void 0&&DV.has(n)&&!yF(e.params.url)&&(n!==403||(!o||!VV.has(o))&&(l==null||l===2&&e.credentialToken))){await pb();try{const h=await ye.getCredential(e.params.url,{error:Ls("request:server",s,e.params),prompt:c!=="no-prompt",signal:e.controller.signal,token:e.credentialToken});return e.credential=h,e.credentialToken=h.token,e.useSSL=e.useSSL||h.ssl,!1}catch(h){if(c==="no-prompt")return e.credential=void 0,e.credentialToken=void 0,!1;s=h}}if(s)throw s;return!0}function dI(e,t,r=!1){const i=t.controller.signal,s=new Image;return t.withCredentials?s.crossOrigin="use-credentials":s.crossOrigin="anonymous",s.alt="",s.fetchPriority=vi.priority,s.src=e,PV(s,e,r,i)}Ge._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"],Ge._beforeFetch=void 0,Ge._afterFetch=void 0;async function ZV(e,t,r,i){const s=t.exec(r);if(!s)throw new O("esri-intl:invalid-bundle",`Bundle id "${r}" is not compatible with the pattern "${t}"`);const n=s[1]?`${s[1]}/`:"",o=s[2],l=Q8(i),c=`${n}${o}.json`,p=l?`${n}${o}_${l}.json`:c;let h;try{h=await pI(e(p))}catch(f){if(p===c)throw new O("intl:unknown-bundle",`Bundle "${r}" cannot be loaded`,{error:f});try{h=await pI(e(c))}catch(y){throw new O("intl:unknown-bundle",`Bundle "${r}" cannot be loaded`,{error:y})}}return h}async function pI(e){if(hI.fetchBundleAsset!=null)return hI.fetchBundleAsset(e);const t=await Ge(e,{responseType:"text"});return JSON.parse(t.data)}let YV=class{constructor({base:t="",pattern:r,location:i=new URL(window.location.href)}){let s;s=typeof i=="string"?n=>new URL(n,new URL(i,window.location.href)).href:i instanceof URL?n=>new URL(n,i).href:i,this.pattern=typeof r=="string"?new RegExp(`^${r}`):r,this.getAssetUrl=s,t=t?t.endsWith("/")?t:t+"/":"",this.matcher=new RegExp(`^${t}(?:(.*)\\/)?(.*)$`)}fetchMessageBundle(t,r){return ZV(this.getAssetUrl,this.matcher,t,r)}};function QV(e){return new YV(e)}const hI={};function Ie(e){if(!Le.assetsPath)throw G.getLogger("esri.assets").errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new O("assets:path-not-set","config.assetsPath is not set");return rl(Le.assetsPath,e)}Y8(QV({pattern:"esri/",location:Ie}));const fI=new Float32Array(1);function tle(e){--e;for(let t=1;t<32;t<<=1)e|=e>>t;return e+1}function _l(e,t,r){return Math.min(Math.max(e,t),r)}function KV(e,t,r){return e+(t-e)*r}function rle(e,t,r,i,s){return KV(i,s,(e-t)/(r-t))}function XV(e){return e*Math.PI/180}function e7(e){return 180*e/Math.PI}function ile(e){return Math.acos(_l(e,-1,1))}function t7(e){return Math.asin(_l(e,-1,1))}function M0(e,t,r=1e-6){return e===t?!0:!Number.isFinite(e)||!Number.isFinite(t)?!1:(e>t?e-t:t-e)<=r}const _m=new DataView(new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT));function hb(e){return _m.setFloat64(0,e),_m.getBigInt64(0)}function r7(e){return _m.setBigInt64(0,e),_m.getFloat64(0)}const Yf=BigInt("1000000"),i7=mF(1);function mF(e){const t=hb(e=Math.abs(e)),r=r7(t<=Yf?Yf:t-Yf);return Math.abs(e-r)}function sle(e,t,r=i7){if(e===t)return!0;if(!Number.isFinite(e)||!Number.isFinite(t))return!1;if(r!=null&&mF(Math.min(Math.abs(e),Math.abs(t)))<r)return Math.abs(e-t)<=r;const i=hb(e),s=hb(t);return i<0!=s<0?!1:!((i<s?s-i:i-s)>Yf)}function nle(e){return gF(Math.max(-yI,Math.min(e,yI)))}function gF(e){return fI[0]=e,fI[0]}function ole(e){const t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[3]*e[3]+e[4]*e[4]+e[5]*e[5],i=e[6]*e[6]+e[7]*e[7]+e[8]*e[8];return!(M0(t,1)&&M0(r,1)&&M0(i,1))}const yI=gF(34028234663852886e22);function ale(e,t,r){if(r===void 0||+r==0)return Math[e](t);if(t=+t,r=+r,isNaN(t)||typeof r!="number"||r%1!=0)return NaN;let i=t.toString().split("e");return i=(t=Math[e](+(i[0]+"e"+(i[1]?+i[1]-r:-r)))).toString().split("e"),+(i[0]+"e"+(i[1]?+i[1]+r:r))}function D$(e){return typeof e=="string"||e instanceof String}var qu;(function(e){e.HM="HH:mm",e.HMS="HH:mm:ss",e.HMS_MS="HH:mm:ss.SSS"})(qu||(qu={}));const s7=[qu.HMS_MS,qu.HMS,qu.HM,"TT"],n7="yyyy-MM-dd";qu.HMS;function mI(e){if(!e||!D$(e))return null;const t=Z.fromFormat(e,n7);return t.isValid?t:null}function gI(e){return e&&D$(e)?xj(s7,t=>{const r=Z.fromFormat(e,t);return r.isValid?r:null})??null:null}function vI(e){if(!e||!D$(e))return null;const t=Z.fromISO(e);return t.isValid?t:null}var sc;(function(e){e.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",e.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(sc||(sc={}));const o7=new Set(["integer","small-integer","big-integer","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeBigInteger"]);function a7(e){return e!=null&&o7.has(e.type)}function vF(e){return e!=null&&(e.type==="date-only"||e.type==="esriFieldTypeDateOnly")}function bF(e){return e!=null&&(e.type==="timestamp-offset"||e.type==="esriFieldTypeTimestampOffset")}function wF(e){return e!=null&&(e.type==="time-only"||e.type==="esriFieldTypeTimeOnly")}function l7(e,t,r){const i=e==null?void 0:e.domain;if(!i)return null;switch(i.type){case"range":{const{min:s,max:n}=u7(e);if(s!=null&&+t<s||n!=null&&+t>n)return sc.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(i.codedValues==null||i.codedValues.every(s=>s==null||s.code!==t))return sc.INVALID_CODED_VALUE}return null}function u7(e,t){const r=e==null?void 0:e.domain;if(!r||r.type!=="range")return;const i="range"in r?r.range[0]:r.minValue,s="range"in r?r.range[1]:r.maxValue,n=a7(e);return vF(e)||wF(e)||bF(e)?{...c7(e,s,i),isInteger:n}:{min:i!=null&&typeof i=="number"?i:null,max:s!=null&&typeof s=="number"?s:null,rawMin:i,rawMax:s,isInteger:n}}function c7(e,t,r){var i,s,n,o,l,c;return vF(e)?{min:(i=mI(r))==null?void 0:i.toMillis(),max:(s=mI(t))==null?void 0:s.toMillis(),rawMin:r,rawMax:t}:wF(e)?{min:(n=gI(r))==null?void 0:n.toMillis(),max:(o=gI(t))==null?void 0:o.toMillis(),rawMin:r,rawMax:t}:bF(e)?{min:(l=vI(r))==null?void 0:l.toMillis(),max:(c=vI(t))==null?void 0:c.toMillis(),rawMin:r,rawMax:t}:{max:null,min:null}}let V$=class{constructor(t,r,i,s,n,o){this.semiMajorAxis=t,this.flattening=r,this.outerAtmosphereRimWidth=i,this.atmosphereHeight=s,this.scaleHeight=n;const l=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*l,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=o||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}};const rt=new V$(6378137,1/298.257223563,3e5,1e5,.085,.006694379990137799),Ns=new V$(3396190,1/169.8944472236118,23e4,6e4,.111),Ro=new V$(1737400,0,0,0,0);let E0,I=null;function _F(){return!!I}function d7(){return!!k("esri-wasm")}function $F(){return E0||(E0=j(()=>import("./pe-wasm-CazZvah8.js"),__vite__mapDeps([0,1])).then(e=>e.p).then(({default:e})=>e({locateFile:t=>Ie(`esri/geometry/support/${t}`)})).then(e=>{IF(e)}),E0)}var fb,Ze;(function(e){function t(n,o,l){I.ensureCache.prepare();const c=Na(l),p=l===c,h=I.ensureFloat64(c),f=I._pe_geog_to_proj(I.getPointer(n),o,h);return f&&go(l,o,h,p),f}function r(n,o,l,c){switch(c){case Ze.PE_TRANSFORM_P_TO_G:return i(n,o,l);case Ze.PE_TRANSFORM_G_TO_P:return t(n,o,l)}return 0}function i(n,o,l){return s(n,o,l,0)}function s(n,o,l,c){I.ensureCache.prepare();const p=Na(l),h=l===p,f=I.ensureFloat64(p),y=I._pe_proj_to_geog_center(I.getPointer(n),o,f,c);return y&&go(l,o,f,h),y}e.geogToProj=t,e.projGeog=r,e.projToGeog=i,e.projToGeogCenter=s})(fb||(fb={})),function(e){function t(){e.PE_BUFFER_MAX=I.PeDefs.prototype.PE_BUFFER_MAX,e.PE_NAME_MAX=I.PeDefs.prototype.PE_NAME_MAX,e.PE_MGRS_MAX=I.PeDefs.prototype.PE_MGRS_MAX,e.PE_USNG_MAX=I.PeDefs.prototype.PE_USNG_MAX,e.PE_DD_MAX=I.PeDefs.prototype.PE_DD_MAX,e.PE_DDM_MAX=I.PeDefs.prototype.PE_DDM_MAX,e.PE_DMS_MAX=I.PeDefs.prototype.PE_DMS_MAX,e.PE_UTM_MAX=I.PeDefs.prototype.PE_UTM_MAX,e.PE_PARM_MAX=I.PeDefs.prototype.PE_PARM_MAX,e.PE_TYPE_NONE=I.PeDefs.prototype.PE_TYPE_NONE,e.PE_TYPE_GEOGCS=I.PeDefs.prototype.PE_TYPE_GEOGCS,e.PE_TYPE_PROJCS=I.PeDefs.prototype.PE_TYPE_PROJCS,e.PE_TYPE_GEOGTRAN=I.PeDefs.prototype.PE_TYPE_GEOGTRAN,e.PE_TYPE_COORDSYS=I.PeDefs.prototype.PE_TYPE_COORDSYS,e.PE_TYPE_UNIT=I.PeDefs.prototype.PE_TYPE_UNIT,e.PE_TYPE_LINUNIT=I.PeDefs.prototype.PE_TYPE_LINUNIT,e.PE_STR_OPTS_NONE=I.PeDefs.prototype.PE_STR_OPTS_NONE,e.PE_STR_AUTH_NONE=I.PeDefs.prototype.PE_STR_AUTH_NONE,e.PE_STR_AUTH_TOP=I.PeDefs.prototype.PE_STR_AUTH_TOP,e.PE_STR_NAME_CANON=I.PeDefs.prototype.PE_STR_NAME_CANON,e.PE_STR_FMT_WKT=I.PeDefs.prototype.PE_STR_FMT_WKT,e.PE_STR_FMT_WKT2=I.PeDefs.prototype.PE_STR_FMT_WKT2,e.PE_PARM_X0=I.PeDefs.prototype.PE_PARM_X0,e.PE_PARM_ND=I.PeDefs.prototype.PE_PARM_ND,e.PE_TRANSFORM_1_TO_2=I.PeDefs.prototype.PE_TRANSFORM_1_TO_2,e.PE_TRANSFORM_2_TO_1=I.PeDefs.prototype.PE_TRANSFORM_2_TO_1,e.PE_TRANSFORM_P_TO_G=I.PeDefs.prototype.PE_TRANSFORM_P_TO_G,e.PE_TRANSFORM_G_TO_P=I.PeDefs.prototype.PE_TRANSFORM_G_TO_P,e.PE_HORIZON_RECT=I.PeDefs.prototype.PE_HORIZON_RECT,e.PE_HORIZON_POLY=I.PeDefs.prototype.PE_HORIZON_POLY,e.PE_HORIZON_LINE=I.PeDefs.prototype.PE_HORIZON_LINE,e.PE_HORIZON_DELTA=I.PeDefs.prototype.PE_HORIZON_DELTA}e.init=t}(Ze||(Ze={}));let SF=null;var yb;(function(e){const t={},r={},i=m=>{const g=m.getType();switch(g){case Ze.PE_TYPE_GEOGCS:m=I.castObject(m,I.PeGeogcs);break;case Ze.PE_TYPE_PROJCS:m=I.castObject(m,I.PeProjcs);break;case Ze.PE_TYPE_GEOGTRAN:m=I.castObject(m,I.PeGeogtran);break;default:g&Ze.PE_TYPE_UNIT&&(m=I.castObject(m,I.PeUnit))}return m};function s(){I.PeFactory.prototype.initialize(null)}function n(m){return o(Ze.PE_TYPE_COORDSYS,m)}function o(m,g){let b=null,w=t[m];if(w||(w={},t[m]=w),w.hasOwnProperty(String(g))&&(b=w[g],I.compare(b,I.NULL)&&(b=null)),!b){const S=I.PeFactory.prototype.factoryByType(m,g);I.compare(S,I.NULL)||(b=i(S),w[g]=b)}return b}function l(m,g){let b=null,w=r[m];if(w||(w={},r[m]=w),w.hasOwnProperty(g)&&(b=w[g],I.compare(b,I.NULL)&&(b=null)),!b){const S=I.PeFactory.prototype.fromString(m,g);I.compare(S,I.NULL)||(b=i(S),w[g]=b)}return b}function c(m){return o(Ze.PE_TYPE_GEOGCS,m)}function p(m){return o(Ze.PE_TYPE_GEOGTRAN,m)}function h(m){return I.PeFactory.prototype.getCode(m)}function f(m){return o(Ze.PE_TYPE_PROJCS,m)}function y(m){return o(Ze.PE_TYPE_UNIT,m)}e.initialize=s,e.coordsys=n,e.factoryByType=o,e.fromString=l,e.geogcs=c,e.geogtran=p,e.getCode=h,e.projcs=f,e.unit=y})(yb||(yb={}));let xF=null;var $m,mb,gb,vb,bb,wb,Sm,_b,xm,Im,$b;function IF(e){function t(n,o,l){n[o]=l(n[o])}I=e,Ze.init(),$m.init(),Sm.init(),xm.init(),Im.init(),SF=class extends I.PeDouble{constructor(n=NaN){super(n)}destroy(){I.destroy(this)}[Symbol.dispose](){this.destroy()}},xF=class extends I.PeGCSExtent{destroy(){I.destroy(this)}[Symbol.dispose](){this.destroy()}};const r=[I.PeAngunit,I.PeDatum,I.PeGeogcs,I.PeGeogtran,I.PeObject,I.PeParameter,I.PePrimem,I.PeProjcs,I.PeSpheroid,I.PeUnit];for(const n of r)t(n.prototype,"getName",o=>function(){return o.call(this,new Array(Ze.PE_NAME_MAX))});for(const n of[I.PeGeogtran,I.PeProjcs])t(n.prototype,"getParameters",o=>function(){const l=new Array(Ze.PE_PARM_MAX);let c=o.call(this);for(let p=0;p<l.length;p++){const h=I.getValue(c,"*");l[p]=h?I.wrapPointer(h,I.PeParameter):null,c+=Int32Array.BYTES_PER_ELEMENT}return l});t(I.PeHorizon.prototype,"getCoord",n=>function(o=!1){const l=this.getSize();if(!l)return null;const c=[];return go(c,l,n.call(this),o),c}),t(I.PeGTlistExtendedEntry.prototype,"getEntries",n=>{const o=I._pe_getPeGTlistExtendedGTsSize();return function(){let l=null;const c=n.call(this);if(!I.compare(c,I.NULL)){l=[c];const p=this.getSteps();if(p>1){const h=I.getPointer(c);for(let f=1;f<p;f++)l.push(I.wrapPointer(h+o*f,I.PeGTlistExtendedGTs))}}return l}});const i=I._pe_getPeHorizonSize(),s=n=>function(){let o=this._cache;if(o||(o=new Map,this._cache=o),o.has(n))return o.get(n);let l=null;const c=n.call(this);if(!I.compare(c,I.NULL)){l=[c];const p=c.getNump();if(p>1){const h=I.getPointer(c);for(let f=1;f<p;f++)l.push(I.wrapPointer(h+i*f,I.PeHorizon))}}return o.set(n,l),l};t(I.PeProjcs.prototype,"horizonGcsGenerate",s),t(I.PeProjcs.prototype,"horizonPcsGenerate",s),I.PeObject.prototype.toString=function(n=Ze.PE_STR_OPTS_NONE){I.ensureCache.prepare();const o=I.getPointer(this),l=I.ensureInt8(new Array(Ze.PE_BUFFER_MAX));return I.UTF8ToString(I._pe_object_to_string_ext(o,n,l))},I.PeGeogcs.prototype.destroy=function(){this.Delete(),Ji(this),this.ptr=0},I.PeGeogcs.prototype[Symbol.dispose]=function(){this.destroy()},I.PeProjcs.prototype.destroy=function(){this.Delete(),Ji(this),this.ptr=0},I.PeProjcs.prototype[Symbol.dispose]=function(){this.destroy()}}function Ji(e){if(!e)return;const t=I.getClass(e);if(!t)return;const r=I.getCache(t);if(!r)return;const i=I.getPointer(e);i&&delete r[i]}function Xh(e,t){const r=[],i=new Array(t);for(let s=0;s<e;s++)r.push(I.ensureInt8(i));return r}function Na(e){return ArrayBuffer.isView(e)?e:Array.isArray(e[0])?e.flat():e}function go(e,t,r,i=!1){if(i)for(let s=0;s<2*t;s++)e[s]=I.getValue(r+s*Float64Array.BYTES_PER_ELEMENT,"double");else{const s=e.length===0;for(let n=0;n<t;n++)s&&(e[n]=new Array(2)),e[n][0]=I.getValue(r,"double"),e[n][1]=I.getValue(r+Float64Array.BYTES_PER_ELEMENT,"double"),r+=2*Float64Array.BYTES_PER_ELEMENT}}(function(e){let t;function r(){e.PE_GTLIST_OPTS_COMMON=I.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,t=I._pe_getPeGTlistExtendedEntrySize()}function i(s,n,o,l,c,p){let h=null;const f=new I.PeInteger(p);try{const y=I.PeGTlistExtended.prototype.getGTlist(s,n,o,l,c,f);if((p=f.val)&&(h=[y],p>1)){const m=I.getPointer(y);for(let g=1;g<p;g++)h.push(I.wrapPointer(m+t*g,I.PeGTlistExtendedEntry))}}finally{I.destroy(f)}return h}e.init=r,e.getGTlist=i})($m||($m={})),function(e){function t(r){if(r!=null&&r.length){for(const i of r)Ji(i),i.getEntries().forEach(s=>{Ji(s);const n=s.getGeogtran();Ji(n),n.getParameters().forEach(Ji),[n.getGeogcs1(),n.getGeogcs2()].forEach(o=>{Ji(o);const l=o.getDatum();Ji(l),Ji(l.getSpheroid()),Ji(o.getPrimem()),Ji(o.getUnit())})});I.PeGTlistExtendedEntry.prototype.Delete(r[0])}}e.destroy=t}(mb||(mb={})),function(e){function t(r,i,s,n,o){I.ensureCache.prepare();const l=Na(s),c=s===l,p=I.ensureFloat64(l);let h=0;n&&(h=I.ensureFloat64(n));const f=I._pe_geog_to_geog(I.getPointer(r),i,p,h,o);return f&&go(s,i,p,c),f}e.geogToGeog=t}(gb||(gb={})),function(e){function t(n,o,l,c,p,h,f,y){I.PeLineType.prototype.geodesic_coordinate(n,o,l,c,p,h,f,y)}function r(n,o,l,c,p,h,f,y,m){I.PeLineType.prototype.geodetic_coordinate(n,o,l,c,p,h,f,y,m)}function i(n,o,l,c,p,h,f,y,m,g){I.PeLineType.prototype.geodetic_distance(n,o,l,c,p,h,f,y,m,g)}function s(n,o,l,c,p,h,f,y,m){I.PeLineType.prototype.great_elliptic_distance(n,o,l,c,p,h,f,y,m)}e.geodesicCoordinate=t,e.geodeticCoordinate=r,e.geodeticDistance=i,e.greatEllipticDistance=s}(vb||(vb={})),function(e){function t(o,l){return I.PeMath.prototype.phi_to_eta(o,l)}function r(o,l){return I.PeMath.prototype.eta_to_phi(o,l)}function i(o,l){return I.PeMath.prototype.phi_to_phig(o,l)}function s(o,l,c){return I.PeMath.prototype.q(o,l,c)}function n(o,l){return I.PeMath.prototype.q90(o,l)}e.phiToEta=t,e.etaToPhi=r,e.phiToPhig=i,e.q=s,e.q90=n}(bb||(bb={})),function(e){const t=(p,h,f,y,m,g)=>{let b,w;switch(I.ensureCache.prepare(),p){case"dd":b=I._pe_geog_to_dd,w=Ze.PE_DD_MAX;break;case"ddm":b=I._pe_geog_to_ddm,w=Ze.PE_DDM_MAX;break;case"dms":b=I._pe_geog_to_dms,w=Ze.PE_DMS_MAX}let S=0;h&&(S=I.getPointer(h));const x=Na(y),E=I.ensureFloat64(x),C=Xh(f,w),P=b(S,f,E,m,I.ensureInt32(C));if(P)for(let L=0;L<f;L++)g[L]=I.UTF8ToString(C[L]);return P},r=(p,h,f,y,m)=>{let g;switch(I.ensureCache.prepare(),p){case"dd":g=I._pe_dd_to_geog;break;case"ddm":g=I._pe_ddm_to_geog;break;case"dms":g=I._pe_dms_to_geog}let b=0;h&&(b=I.getPointer(h));const w=y.map(C=>I.ensureString(C)),S=I.ensureInt32(w),x=I.ensureFloat64(new Array(2*f)),E=g(b,f,S,x);return E&&go(m,f,x),E};function i(p,h,f,y,m){return t("dms",p,h,f,y,m)}function s(p,h,f,y){return r("dms",p,h,f,y)}function n(p,h,f,y,m){return t("ddm",p,h,f,y,m)}function o(p,h,f,y){return r("ddm",p,h,f,y)}function l(p,h,f,y,m){return t("dd",p,h,f,y,m)}function c(p,h,f,y){return r("dd",p,h,f,y)}e.geogToDms=i,e.dmsToGeog=s,e.geogToDdm=n,e.ddmToGeog=o,e.geogToDd=l,e.ddToGeog=c}(wb||(wb={})),function(e){function t(){e.PE_MGRS_STYLE_NEW=I.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,e.PE_MGRS_STYLE_OLD=I.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,e.PE_MGRS_STYLE_AUTO=I.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,e.PE_MGRS_180_ZONE_1_PLUS=I.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,e.PE_MGRS_ADD_SPACES=I.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}function r(s,n,o,l,c,p,h){I.ensureCache.prepare();let f=0;s&&(f=I.getPointer(s));const y=Na(o),m=I.ensureFloat64(y),g=Xh(n,Ze.PE_MGRS_MAX),b=I.ensureInt32(g),w=I._pe_geog_to_mgrs_extended(f,n,m,l,c,p,b);if(w)for(let S=0;S<n;S++)h[S]=I.UTF8ToString(g[S]);return w}function i(s,n,o,l,c){I.ensureCache.prepare();let p=0;s&&(p=I.getPointer(s));const h=o.map(g=>I.ensureString(g)),f=I.ensureInt32(h),y=I.ensureFloat64(new Array(2*n)),m=I._pe_mgrs_to_geog_extended(p,n,f,l,y);return m&&go(c,n,y),m}e.init=t,e.geogToMgrsExtended=r,e.mgrsToGeogExtended=i}(Sm||(Sm={})),function(e){function t(i,s,n,o,l,c,p){I.ensureCache.prepare();let h=0;i&&(h=I.getPointer(i));const f=Na(n),y=I.ensureFloat64(f),m=Xh(s,Ze.PE_MGRS_MAX),g=I.ensureInt32(m),b=I._pe_geog_to_usng(h,s,y,o,l,c,g);if(b)for(let w=0;w<s;w++)p[w]=I.UTF8ToString(m[w]);return b}function r(i,s,n,o){I.ensureCache.prepare();let l=0;i&&(l=I.getPointer(i));const c=n.map(y=>I.ensureString(y)),p=I.ensureInt32(c),h=I.ensureFloat64(new Array(2*s)),f=I._pe_usng_to_geog(l,s,p,h);return f&&go(o,s,h),f}e.geogToUsng=t,e.usngToGeog=r}(_b||(_b={})),function(e){function t(){e.PE_UTM_OPTS_NONE=I.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,e.PE_UTM_OPTS_ADD_SPACES=I.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,e.PE_UTM_OPTS_NS=I.PeNotationUtm.prototype.PE_UTM_OPTS_NS}function r(s,n,o,l,c){I.ensureCache.prepare();let p=0;s&&(p=I.getPointer(s));const h=Na(o),f=I.ensureFloat64(h),y=Xh(n,Ze.PE_UTM_MAX),m=I.ensureInt32(y),g=I._pe_geog_to_utm(p,n,f,l,m);if(g)for(let b=0;b<n;b++)c[b]=I.UTF8ToString(y[b]);return g}function i(s,n,o,l,c){I.ensureCache.prepare();let p=0;s&&(p=I.getPointer(s));const h=o.map(g=>I.ensureString(g)),f=I.ensureInt32(h),y=I.ensureFloat64(new Array(2*n)),m=I._pe_utm_to_geog(p,n,f,l,y);return m&&go(c,n,y),m}e.init=t,e.geogToUtm=r,e.utmToGeog=i}(xm||(xm={})),function(e){const t=new Map;function r(){e.PE_PCSINFO_OPTION_NONE=I.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,e.PE_PCSINFO_OPTION_DOMAIN=I.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,e.PE_POLE_OUTSIDE_BOUNDARY=I.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,e.PE_POLE_POINT=I.PePCSInfo.prototype.PE_POLE_POINT}function i(s,n=e.PE_PCSINFO_OPTION_DOMAIN){let o=null,l=null;return t.has(s)&&(l=t.get(s),l[n]&&(o=l[n])),o||(o=I.PePCSInfo.prototype.generate(s,n),l||(l=[],t.set(s,l)),l[n]=o),o}e.init=r,e.generate=i}(Im||(Im={})),function(e){function t(){return I.PeVersion.prototype.version_string()}e.versionString=t}($b||($b={}));const p7=Object.freeze(Object.defineProperty({__proto__:null,get PeCSTransformations(){return fb},get PeDefs(){return Ze},get PeDouble(){return SF},get PeFactory(){return yb},get PeGCSExtent(){return xF},get PeGTTransformations(){return gb},get PeGTlistExtended(){return $m},get PeGTlistExtendedEntry(){return mb},get PeLineType(){return vb},get PeMath(){return bb},get PeNotationDms(){return wb},get PeNotationMgrs(){return Sm},get PeNotationUsng(){return _b},get PeNotationUtm(){return xm},get PePCSInfo(){return Im},get PeVersion(){return $b},_init:IF,get _pe(){return I},isLoaded:_F,isSupported:d7,load:$F},Symbol.toStringTag,{value:"Module"}));var il;(function(e){e[e.CGCS2000=4490]="CGCS2000",e[e.GCSMARS2000=104971]="GCSMARS2000",e[e.GCSMARS2000_SPHERE=104905]="GCSMARS2000_SPHERE",e[e.GCSMOON2000=104903]="GCSMOON2000"})(il||(il={}));let d;const v={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5041:0,5042:0,5048:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,9793:0,9794:0,9869:0,9874:0,9875:0,9880:0,9895:0,9943:0,9945:0,9947:0,9967:0,9972:0,9977:0,10160:0,10183:0,10188:0,10194:0,10199:0,10207:0,10212:0,10217:0,10222:0,10227:0,10235:0,10240:0,10250:0,10254:0,10270:0,10275:0,10280:0,10306:0,10329:0,10471:0,10477:0,10481:2,10516:2,20002:0,20042:0,20050:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22239:0,22240:0,22332:0,22337:0,22338:0,22391:0,22392:0,22639:0,22700:0,22739:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102731:0,102732:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2,103897:1};for(d=2e3;d<=2045;d++)v[d]=0;for(d=2056;d<=2065;d++)v[d]=0;for(d=2067;d<=2135;d++)v[d]=0;for(d=2137;d<=2154;d++)v[d]=0;for(d=2161;d<=2170;d++)v[d]=0;for(d=2172;d<=2193;d++)v[d]=0;for(d=2195;d<=2198;d++)v[d]=0;for(d=2200;d<=2203;d++)v[d]=0;for(d=2205;d<=2217;d++)v[d]=0;for(d=2222;d<=2224;d++)v[d]=1;for(d=2225;d<=2250;d++)v[d]=2;for(d=2251;d<=2253;d++)v[d]=1;for(d=2257;d<=2264;d++)v[d]=2;for(d=2274;d<=2279;d++)v[d]=2;for(d=2280;d<=2282;d++)v[d]=1;for(d=2283;d<=2289;d++)v[d]=2;for(d=2290;d<=2292;d++)v[d]=0;for(d=2308;d<=2313;d++)v[d]=0;for(d=2315;d<=2491;d++)v[d]=0;for(d=2494;d<=2866;d++)v[d]=0;for(d=2867;d<=2869;d++)v[d]=1;for(d=2870;d<=2888;d++)v[d]=2;for(d=2891;d<=2895;d++)v[d]=2;for(d=2896;d<=2898;d++)v[d]=1;for(d=2902;d<=2908;d++)v[d]=2;for(d=2915;d<=2920;d++)v[d]=2;for(d=2921;d<=2923;d++)v[d]=1;for(d=2924;d<=2930;d++)v[d]=2;for(d=2931;d<=2962;d++)v[d]=0;for(d=2964;d<=2968;d++)v[d]=2;for(d=2969;d<=2973;d++)v[d]=0;for(d=2975;d<=2991;d++)v[d]=0;for(d=2995;d<=3051;d++)v[d]=0;for(d=3054;d<=3079;d++)v[d]=0;for(d=3081;d<=3088;d++)v[d]=0;for(d=3092;d<=3101;d++)v[d]=0;for(d=3106;d<=3138;d++)v[d]=0;for(d=3146;d<=3151;d++)v[d]=0;for(d=3153;d<=3166;d++)v[d]=0;for(d=3168;d<=3172;d++)v[d]=0;for(d=3174;d<=3203;d++)v[d]=0;for(d=3294;d<=3358;d++)v[d]=0;for(d=3367;d<=3403;d++)v[d]=0;for(d=3408;d<=3416;d++)v[d]=0;for(d=3417;d<=3438;d++)v[d]=2;for(d=3441;d<=3446;d++)v[d]=2;for(d=3447;d<=3450;d++)v[d]=0;for(d=3451;d<=3459;d++)v[d]=2;for(d=3460;d<=3478;d++)v[d]=0;for(d=3554;d<=3559;d++)v[d]=0;for(d=3560;d<=3570;d++)v[d]=2;for(d=3571;d<=3581;d++)v[d]=0;for(d=3594;d<=3597;d++)v[d]=0;for(d=3601;d<=3604;d++)v[d]=0;for(d=3637;d<=3639;d++)v[d]=0;for(d=3665;d<=3667;d++)v[d]=0;for(d=3693;d<=3695;d++)v[d]=0;for(d=3701;d<=3727;d++)v[d]=0;for(d=3728;d<=3739;d++)v[d]=2;for(d=3740;d<=3751;d++)v[d]=0;for(d=3753;d<=3760;d++)v[d]=2;for(d=3761;d<=3773;d++)v[d]=0;for(d=3775;d<=3777;d++)v[d]=0;for(d=3779;d<=3781;d++)v[d]=0;for(d=3783;d<=3785;d++)v[d]=0;for(d=3788;d<=3791;d++)v[d]=0;for(d=3797;d<=3802;d++)v[d]=0;for(d=3814;d<=3816;d++)v[d]=0;for(d=3825;d<=3829;d++)v[d]=0;for(d=3832;d<=3841;d++)v[d]=0;for(d=3844;d<=3852;d++)v[d]=0;for(d=3873;d<=3885;d++)v[d]=0;for(d=3890;d<=3893;d++)v[d]=0;for(d=3907;d<=3912;d++)v[d]=0;for(d=3942;d<=3950;d++)v[d]=0;for(d=3968;d<=3970;d++)v[d]=0;for(d=3973;d<=3976;d++)v[d]=0;for(d=3986;d<=3989;d++)v[d]=0;for(d=3994;d<=3997;d++)v[d]=0;for(d=4048;d<=4051;d++)v[d]=0;for(d=4056;d<=4063;d++)v[d]=0;for(d=4093;d<=4096;d++)v[d]=0;for(d=4390;d<=4398;d++)v[d]=0;for(d=4399;d<=4413;d++)v[d]=2;for(d=4418;d<=4433;d++)v[d]=2;for(d=4455;d<=4457;d++)v[d]=2;for(d=4484;d<=4489;d++)v[d]=0;for(d=4491;d<=4554;d++)v[d]=0;for(d=4568;d<=4589;d++)v[d]=0;for(d=4652;d<=4656;d++)v[d]=0;for(d=4766;d<=4800;d++)v[d]=0;for(d=5014;d<=5016;d++)v[d]=0;for(d=5069;d<=5072;d++)v[d]=0;for(d=5105;d<=5130;d++)v[d]=0;for(d=5167;d<=5188;d++)v[d]=0;for(d=5253;d<=5259;d++)v[d]=0;for(d=5269;d<=5275;d++)v[d]=0;for(d=5292;d<=5311;d++)v[d]=0;for(d=5329;d<=5331;d++)v[d]=0;for(d=5343;d<=5349;d++)v[d]=0;for(d=5355;d<=5357;d++)v[d]=0;for(d=5387;d<=5389;d++)v[d]=0;for(d=5459;d<=5463;d++)v[d]=0;for(d=5479;d<=5482;d++)v[d]=0;for(d=5518;d<=5520;d++)v[d]=0;for(d=5530;d<=5539;d++)v[d]=0;for(d=5550;d<=5552;d++)v[d]=0;for(d=5562;d<=5583;d++)v[d]=0;for(d=5623;d<=5625;d++)v[d]=2;for(d=5631;d<=5639;d++)v[d]=0;for(d=5649;d<=5653;d++)v[d]=0;for(d=5663;d<=5680;d++)v[d]=0;for(d=5682;d<=5685;d++)v[d]=0;for(d=5875;d<=5877;d++)v[d]=0;for(d=5896;d<=5899;d++)v[d]=0;for(d=5921;d<=5940;d++)v[d]=0;for(d=6050;d<=6125;d++)v[d]=0;for(d=6244;d<=6275;d++)v[d]=0;for(d=6328;d<=6348;d++)v[d]=0;for(d=6350;d<=6356;d++)v[d]=0;for(d=6366;d<=6372;d++)v[d]=0;for(d=6381;d<=6387;d++)v[d]=0;for(d=6393;d<=6404;d++)v[d]=0;for(d=6480;d<=6483;d++)v[d]=0;for(d=6511;d<=6514;d++)v[d]=0;for(d=6579;d<=6581;d++)v[d]=0;for(d=6619;d<=6624;d++)v[d]=0;for(d=6625;d<=6627;d++)v[d]=2;for(d=6628;d<=6632;d++)v[d]=0;for(d=6634;d<=6637;d++)v[d]=0;for(d=6669;d<=6692;d++)v[d]=0;for(d=6707;d<=6709;d++)v[d]=0;for(d=6720;d<=6723;d++)v[d]=0;for(d=6732;d<=6738;d++)v[d]=0;for(d=6931;d<=6933;d++)v[d]=0;for(d=6956;d<=6959;d++)v[d]=0;for(d=7005;d<=7007;d++)v[d]=0;for(d=7057;d<=7070;d++)v[d]=2;for(d=7074;d<=7082;d++)v[d]=0;for(d=7109;d<=7118;d++)v[d]=0;for(d=7119;d<=7127;d++)v[d]=1;for(d=7374;d<=7376;d++)v[d]=0;for(d=7528;d<=7586;d++)v[d]=0;for(d=7587;d<=7645;d++)v[d]=2;for(d=7692;d<=7696;d++)v[d]=0;for(d=7755;d<=7787;d++)v[d]=0;for(d=7791;d<=7795;d++)v[d]=0;for(d=7799;d<=7801;d++)v[d]=0;for(d=7803;d<=7805;d++)v[d]=0;for(d=7825;d<=7831;d++)v[d]=0;for(d=7845;d<=7859;d++)v[d]=0;for(d=8013;d<=8032;d++)v[d]=0;for(d=8065;d<=8068;d++)v[d]=1;for(d=8518;d<=8529;d++)v[d]=2;for(d=8533;d<=8536;d++)v[d]=2;for(d=8538;d<=8540;d++)v[d]=2;for(d=8677;d<=8679;d++)v[d]=0;for(d=8836;d<=8840;d++)v[d]=0;for(d=8857;d<=8859;d++)v[d]=0;for(d=8908;d<=8910;d++)v[d]=0;for(d=9154;d<=9159;d++)v[d]=0;for(d=9205;d<=9218;d++)v[d]=0;for(d=9271;d<=9273;d++)v[d]=0;for(d=9295;d<=9297;d++)v[d]=0;for(d=9356;d<=9360;d++)v[d]=0;for(d=9404;d<=9407;d++)v[d]=0;for(d=9476;d<=9482;d++)v[d]=0;for(d=9487;d<=9494;d++)v[d]=0;for(d=9697;d<=9699;d++)v[d]=0;for(d=9821;d<=9865;d++)v[d]=0;for(d=10285;d<=10291;d++)v[d]=0;for(d=10314;d<=10317;d++)v[d]=0;for(d=10448;d<=10465;d++)v[d]=0;for(d=10731;d<=10733;d++)v[d]=0;for(d=11114;d<=11118;d++)v[d]=0;for(d=20004;d<=20032;d++)v[d]=0;for(d=20047;d<=20049;d++)v[d]=0;for(d=20062;d<=20092;d++)v[d]=0;for(d=20135;d<=20138;d++)v[d]=0;for(d=20248;d<=20258;d++)v[d]=0;for(d=20348;d<=20358;d++)v[d]=0;for(d=20436;d<=20440;d++)v[d]=0;for(d=20822;d<=20824;d++)v[d]=0;for(d=20904;d<=20932;d++)v[d]=0;for(d=20934;d<=20936;d++)v[d]=0;for(d=21004;d<=21032;d++)v[d]=0;for(d=21035;d<=21037;d++)v[d]=0;for(d=21095;d<=21097;d++)v[d]=0;for(d=21148;d<=21150;d++)v[d]=0;for(d=21207;d<=21264;d++)v[d]=0;for(d=21307;d<=21364;d++)v[d]=0;for(d=21413;d<=21423;d++)v[d]=0;for(d=21453;d<=21463;d++)v[d]=0;for(d=21473;d<=21483;d++)v[d]=0;for(d=21780;d<=21782;d++)v[d]=0;for(d=21891;d<=21894;d++)v[d]=0;for(d=21896;d<=21899;d++)v[d]=0;for(d=22171;d<=22177;d++)v[d]=0;for(d=22181;d<=22187;d++)v[d]=0;for(d=22191;d<=22197;d++)v[d]=0;for(d=22207;d<=22222;d++)v[d]=0;for(d=22229;d<=22232;d++)v[d]=0;for(d=22234;d<=22236;d++)v[d]=0;for(d=22243;d<=22250;d++)v[d]=0;for(d=22262;d<=22265;d++)v[d]=0;for(d=22307;d<=22322;d++)v[d]=0;for(d=22348;d<=22357;d++)v[d]=0;for(d=22407;d<=22422;d++)v[d]=0;for(d=22462;d<=22465;d++)v[d]=0;for(d=22521;d<=22525;d++)v[d]=0;for(d=22607;d<=22622;d++)v[d]=0;for(d=22641;d<=22646;d++)v[d]=0;for(d=22648;d<=22657;d++)v[d]=0;for(d=22707;d<=22722;d++)v[d]=0;for(d=22762;d<=22765;d++)v[d]=0;for(d=22807;d<=22822;d++)v[d]=0;for(d=22991;d<=22994;d++)v[d]=0;for(d=23028;d<=23038;d++)v[d]=0;for(d=23301;d<=23333;d++)v[d]=2;for(d=23830;d<=23853;d++)v[d]=0;for(d=23866;d<=23872;d++)v[d]=0;for(d=23877;d<=23884;d++)v[d]=0;for(d=23886;d<=23894;d++)v[d]=0;for(d=23946;d<=23948;d++)v[d]=0;for(d=24311;d<=24313;d++)v[d]=0;for(d=24342;d<=24347;d++)v[d]=0;for(d=24370;d<=24374;d++)v[d]=10;for(d=24375;d<=24381;d++)v[d]=0;for(d=24718;d<=24721;d++)v[d]=0;for(d=24817;d<=24821;d++)v[d]=0;for(d=24877;d<=24882;d++)v[d]=0;for(d=24891;d<=24893;d++)v[d]=0;for(d=25391;d<=25395;d++)v[d]=0;for(d=25828;d<=25838;d++)v[d]=0;for(d=26191;d<=26195;d++)v[d]=0;for(d=26391;d<=26393;d++)v[d]=0;for(d=26701;d<=26722;d++)v[d]=0;for(d=26729;d<=26799;d++)v[d]=2;for(d=26801;d<=26803;d++)v[d]=2;for(d=26811;d<=26813;d++)v[d]=2;for(d=26847;d<=26870;d++)v[d]=2;for(d=26891;d<=26899;d++)v[d]=0;for(d=26901;d<=26923;d++)v[d]=0;for(d=26929;d<=26946;d++)v[d]=0;for(d=26948;d<=26998;d++)v[d]=0;for(d=27037;d<=27040;d++)v[d]=0;for(d=27205;d<=27232;d++)v[d]=0;for(d=27258;d<=27260;d++)v[d]=0;for(d=27391;d<=27398;d++)v[d]=0;for(d=27561;d<=27564;d++)v[d]=0;for(d=27571;d<=27574;d++)v[d]=0;for(d=27581;d<=27584;d++)v[d]=0;for(d=27591;d<=27594;d++)v[d]=0;for(d=27700;d<=27707;d++)v[d]=0;for(d=28191;d<=28193;d++)v[d]=0;for(d=28348;d<=28358;d++)v[d]=0;for(d=28402;d<=28432;d++)v[d]=0;for(d=28462;d<=28492;d++)v[d]=0;for(d=29118;d<=29122;d++)v[d]=0;for(d=29168;d<=29172;d++)v[d]=0;for(d=29177;d<=29185;d++)v[d]=0;for(d=29187;d<=29195;d++)v[d]=0;for(d=29900;d<=29903;d++)v[d]=0;for(d=30161;d<=30179;d++)v[d]=0;for(d=30491;d<=30494;d++)v[d]=0;for(d=30729;d<=30732;d++)v[d]=0;for(d=31251;d<=31259;d++)v[d]=0;for(d=31265;d<=31268;d++)v[d]=0;for(d=31275;d<=31279;d++)v[d]=0;for(d=31281;d<=31297;d++)v[d]=0;for(d=31461;d<=31469;d++)v[d]=0;for(d=31491;d<=31495;d++)v[d]=0;for(d=31917;d<=31922;d++)v[d]=0;for(d=31965;d<=32e3;d++)v[d]=0;for(d=32001;d<=32003;d++)v[d]=2;for(d=32005;d<=32031;d++)v[d]=2;for(d=32033;d<=32060;d++)v[d]=2;for(d=32064;d<=32067;d++)v[d]=2;for(d=32074;d<=32077;d++)v[d]=2;for(d=32081;d<=32086;d++)v[d]=0;for(d=32107;d<=32130;d++)v[d]=0;for(d=32133;d<=32159;d++)v[d]=0;for(d=32164;d<=32167;d++)v[d]=2;for(d=32180;d<=32199;d++)v[d]=0;for(d=32201;d<=32260;d++)v[d]=0;for(d=32301;d<=32360;d++)v[d]=0;for(d=32401;d<=32460;d++)v[d]=0;for(d=32501;d<=32560;d++)v[d]=0;for(d=32601;d<=32662;d++)v[d]=0;for(d=32664;d<=32667;d++)v[d]=2;for(d=32701;d<=32761;d++)v[d]=0;for(d=53001;d<=53004;d++)v[d]=0;for(d=53008;d<=53019;d++)v[d]=0;for(d=53021;d<=53032;d++)v[d]=0;for(d=53034;d<=53037;d++)v[d]=0;for(d=53042;d<=53046;d++)v[d]=0;for(d=53074;d<=53080;d++)v[d]=0;for(d=54001;d<=54004;d++)v[d]=0;for(d=54008;d<=54019;d++)v[d]=0;for(d=54021;d<=54032;d++)v[d]=0;for(d=54034;d<=54037;d++)v[d]=0;for(d=54042;d<=54046;d++)v[d]=0;for(d=54048;d<=54053;d++)v[d]=0;for(d=54074;d<=54080;d++)v[d]=0;for(d=54098;d<=54101;d++)v[d]=0;for(d=102001;d<=102040;d++)v[d]=0;for(d=102042;d<=102063;d++)v[d]=0;for(d=102065;d<=102067;d++)v[d]=0;for(d=102070;d<=102117;d++)v[d]=0;for(d=102122;d<=102216;d++)v[d]=0;for(d=102221;d<=102377;d++)v[d]=0;for(d=102382;d<=102388;d++)v[d]=0;for(d=102389;d<=102398;d++)v[d]=2;for(d=102399;d<=102444;d++)v[d]=0;for(d=102445;d<=102447;d++)v[d]=2;for(d=102448;d<=102458;d++)v[d]=0;for(d=102459;d<=102468;d++)v[d]=2;for(d=102469;d<=102499;d++)v[d]=0;for(d=102500;d<=102519;d++)v[d]=1;for(d=102520;d<=102524;d++)v[d]=0;for(d=102525;d<=102529;d++)v[d]=2;for(d=102530;d<=102588;d++)v[d]=0;for(d=102590;d<=102598;d++)v[d]=0;for(d=102601;d<=102603;d++)v[d]=0;for(d=102605;d<=102628;d++)v[d]=0;for(d=102629;d<=102646;d++)v[d]=2;for(d=102648;d<=102700;d++)v[d]=2;for(d=102701;d<=102703;d++)v[d]=0;for(d=102707;d<=102730;d++)v[d]=2;for(d=102733;d<=102758;d++)v[d]=2;for(d=102767;d<=102900;d++)v[d]=0;for(d=102901;d<=102933;d++)v[d]=2;for(d=102934;d<=102950;d++)v[d]=13;for(d=102951;d<=102963;d++)v[d]=0;for(d=102965;d<=102969;d++)v[d]=0;for(d=102971;d<=102973;d++)v[d]=0;for(d=102975;d<=102989;d++)v[d]=0;for(d=102990;d<=102992;d++)v[d]=1;for(d=102997;d<=103002;d++)v[d]=0;for(d=103003;d<=103008;d++)v[d]=2;for(d=103009;d<=103011;d++)v[d]=0;for(d=103012;d<=103014;d++)v[d]=2;for(d=103019;d<=103021;d++)v[d]=0;for(d=103022;d<=103024;d++)v[d]=2;for(d=103029;d<=103031;d++)v[d]=0;for(d=103032;d<=103034;d++)v[d]=2;for(d=103065;d<=103068;d++)v[d]=0;for(d=103074;d<=103076;d++)v[d]=0;for(d=103077;d<=103079;d++)v[d]=1;for(d=103080;d<=103082;d++)v[d]=0;for(d=103083;d<=103085;d++)v[d]=2;for(d=103090;d<=103093;d++)v[d]=0;for(d=103097;d<=103099;d++)v[d]=0;for(d=103100;d<=103102;d++)v[d]=2;for(d=103107;d<=103109;d++)v[d]=0;for(d=103110;d<=103112;d++)v[d]=2;for(d=103113;d<=103116;d++)v[d]=0;for(d=103117;d<=103120;d++)v[d]=2;for(d=103153;d<=103157;d++)v[d]=0;for(d=103158;d<=103162;d++)v[d]=2;for(d=103163;d<=103165;d++)v[d]=0;for(d=103166;d<=103168;d++)v[d]=1;for(d=103169;d<=103171;d++)v[d]=2;for(d=103186;d<=103188;d++)v[d]=0;for(d=103189;d<=103191;d++)v[d]=2;for(d=103192;d<=103195;d++)v[d]=0;for(d=103196;d<=103199;d++)v[d]=2;for(d=103200;d<=103224;d++)v[d]=0;for(d=103225;d<=103227;d++)v[d]=1;for(d=103232;d<=103237;d++)v[d]=0;for(d=103238;d<=103243;d++)v[d]=2;for(d=103244;d<=103246;d++)v[d]=0;for(d=103247;d<=103249;d++)v[d]=2;for(d=103254;d<=103256;d++)v[d]=0;for(d=103257;d<=103259;d++)v[d]=2;for(d=103264;d<=103266;d++)v[d]=0;for(d=103267;d<=103269;d++)v[d]=2;for(d=103300;d<=103375;d++)v[d]=0;for(d=103381;d<=103383;d++)v[d]=0;for(d=103384;d<=103386;d++)v[d]=1;for(d=103387;d<=103389;d++)v[d]=0;for(d=103390;d<=103392;d++)v[d]=2;for(d=103397;d<=103399;d++)v[d]=0;for(d=103400;d<=103471;d++)v[d]=2;for(d=103476;d<=103478;d++)v[d]=0;for(d=103479;d<=103481;d++)v[d]=2;for(d=103486;d<=103488;d++)v[d]=0;for(d=103489;d<=103491;d++)v[d]=2;for(d=103492;d<=103495;d++)v[d]=0;for(d=103496;d<=103499;d++)v[d]=2;for(d=103528;d<=103543;d++)v[d]=0;for(d=103544;d<=103548;d++)v[d]=2;for(d=103549;d<=103551;d++)v[d]=0;for(d=103552;d<=103554;d++)v[d]=1;for(d=103555;d<=103557;d++)v[d]=2;for(d=103558;d<=103560;d++)v[d]=0;for(d=103571;d<=103573;d++)v[d]=0;for(d=103574;d<=103576;d++)v[d]=2;for(d=103577;d<=103580;d++)v[d]=0;for(d=103581;d<=103583;d++)v[d]=2;for(d=103595;d<=103694;d++)v[d]=0;for(d=103696;d<=103699;d++)v[d]=0;for(d=103700;d<=103793;d++)v[d]=2;for(d=103794;d<=103890;d++)v[d]=0;for(d=103891;d<=103896;d++)v[d]=2;for(d=103900;d<=103971;d++)v[d]=2;for(d=103972;d<=103977;d++)v[d]=0;for(d=112e3;d<=112101;d++)v[d]=0;const TF=[102100,102113,3857,3785,900913],h7=[104905,104971],f7=[4326,...TF,...h7],Dp=[-20037508342788905e-9,20037508342788905e-9],Sb=[-20037508342787e-6,20037508342787e-6],A0={wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:Dp,origin:Sb,dx:1e-5},MF={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:Dp,origin:Sb,dx:1e-5},102100:A0,3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:Dp,origin:Sb,dx:1e-5},3857:A0,4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},900913:A0};function wr(e,t){if(e===t)return!0;if(e==null||t==null)return!1;const r=e.wkid,i=t.wkid;if(r!=null||i!=null){if(r===i||Vs(e)&&Vs(t))return!0;const o=e.latestWkid;if(o!=null&&i===o)return!0;const l=t.latestWkid;return l!=null&&r===l}let s,n;return e.wkt2&&t.wkt2?(s=e.wkt2,n=t.wkt2):e.wkt&&t.wkt&&(s=e.wkt,n=t.wkt),!(!s||!n)&&s.toUpperCase()===n.toUpperCase()}function dp(e){const t=e==null?void 0:e.wkid;return t!=null&&t>=2e3&&MF[t]||null}function Tm(e){if(!e)return;const{wkid:t,vcsWkid:r}=e;if(t)return r?JSON.stringify({wkid:t,vcsWkid:r}):String(t);const i=e.wkt||e.wkt2;return JSON.stringify(i?r?{wkt:i,vcsWkid:r}:{wkt:i}:{})}function U$(e){if(!ks(e))return!1;const{wkid:t}=e;if(t)return v[t]==null;const r=e.wkt2||e.wkt;return!!r&&/^\s*(?:GEOGCS|GEOGCRS|GEOGRAPHICCRS)/i.test(r)}function y7(e){return!(EF(e)||AF(e))}function sl(e){return(e==null?void 0:e.wkid)===4326}function ule(e){return/^\s*(?:GEOD|GEODETIC|GEOG|GEOGRAPHIC|PROJ|PROJECTED|VERT|VERTICAL|ENG|ENGINEERING|PARAMETRIC|TIME|DERIVEDPROJ|COMPOUND|BOUND)CRS/i.test(e)}function bI(e){return(e==null?void 0:e.wkid)===il.CGCS2000}function Vs(e){const t=e==null?void 0:e.wkid;return t!=null&&t>=2e3&&TF.includes(t)}function m7(e){return(e==null?void 0:e.wkid)===32662}function $g(e){return e===il.GCSMARS2000||e===il.GCSMARS2000_SPHERE}function EF(e){return $g(e==null?void 0:e.wkid)}function Sg(e){return e===il.GCSMOON2000}function AF(e){return Sg(e==null?void 0:e.wkid)}function g7(e){const t=e==null?void 0:e.wkid;return t!=null&&t>=2e3&&f7.includes(t)}function ks(e){if(e==null)return!1;const t=e.wkid;return t!=null&&t>=2e3||e.wkt2!=null||e.wkt!=null}const CF={wkid:4326,wkt:ns(MF[4326].wkTemplate,{Central_Meridian:"0.0"})},OF={wkid:102100,latestWkid:3857},v7={wkid:32662};function z$(e){return{wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${e.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`}}const b7=z$(rt),q$=z$(Ns),G$=z$(Ro),w7={wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${rt.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`},_7=q$.wkt.toUpperCase(),$7=G$.wkt.toUpperCase();function S7(e){if(e!=null&&ks(e)){const t=e.wkid,r=e.wkt2??e.wkt;if($g(t))return Ns;const i=r==null?void 0:r.toUpperCase();if(r&&i===_7)return Ns;if(Sg(t)||i&&i===$7)return Ro}return rt}function cle(e){return $g(e)?Ns:Sg(e)?Ro:rt}function Mm(e){return wr(e,b7)}function jo(e){return Mm(e)||wr(e,q$)||wr(e,G$)}const dle=39.37,x7=rt.radius*Math.PI/200,FF=/(?:LENGTH)?UNIT\[([^\]]+)]]$/i,Ja=v,kF=/UNIT\[([^\]]+)]/i,I7=new Set([4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104025,104026,104139,104140]),T7=Kt()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain:"chains",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),ds=e=>e*e,jn=e=>e*e*e,Vp={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937},"clarke-feet":{inBaseUnits:.3047972654},"clarke-yards":{inBaseUnits:.9143917962},"clarke-links":{inBaseUnits:.201166195164},"sears-yards":{inBaseUnits:.9143984146160287},"sears-feet":{inBaseUnits:.3047994715386762},"sears-chains":{inBaseUnits:20.11676512155263},"benoit-1895-b-chains":{inBaseUnits:20.11678249437587},"indian-yards":{inBaseUnits:.9143985307444408},"indian-1937-yards":{inBaseUnits:.91439523},"gold-coast-feet":{inBaseUnits:.3047997101815088},chains:{inBaseUnits:20.1168},"sears-1922-truncated-chains":{inBaseUnits:20.116756},"50-kilometers":{inBaseUnits:5e4},"150-kilometers":{inBaseUnits:15e4}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:ds(.001)},"square-centimeters":{inBaseUnits:ds(.01)},"square-decimeters":{inBaseUnits:ds(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:ds(1e3)},"square-inches":{inBaseUnits:ds(.0254)},"square-feet":{inBaseUnits:ds(.3048)},"square-yards":{inBaseUnits:ds(.9144)},"square-miles":{inBaseUnits:ds(1609.344)},"square-us-feet":{inBaseUnits:ds(1200/3937)},acres:{inBaseUnits:.0015625*ds(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*jn(.001)},"cubic-centimeters":{inBaseUnits:1e3*jn(.01)},"cubic-decimeters":{inBaseUnits:1e3*jn(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*jn(1e3)},"cubic-inches":{inBaseUnits:1e3*jn(.0254)},"cubic-feet":{inBaseUnits:1e3*jn(.3048)},"cubic-yards":{inBaseUnits:1e3*jn(.9144)},"cubic-miles":{inBaseUnits:1e3*jn(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},M7=(()=>{const e={};for(const t in Vp)for(const r in Vp[t].units)e[r]=t;return e})();function E7(e,t,r){return e*Vp[r].units[t].inBaseUnits}function A7(e,t,r){return e/Vp[r].units[t].inBaseUnits}function nc(e){const t=M7[e];if(!t)throw new Error("unknown type");return t}function wI(e,t=null){return t=t||nc(e),Vp[t].baseUnit===e}function ci(e,t,r){if(t===r)return e;const i=nc(t);if(i!==nc(r))throw new Error("incompatible units");const s=wI(t,i)?e:E7(e,t,i);return wI(r,i)?s:A7(s,r,i)}function C7(e,t,r){return ci(e,t,"meters")/(r*Math.PI/180)}function PF(e){return T7.fromJSON(e.toLowerCase())||null}function oc(e){if(e!=null&&!y7(e))return 1;const t=gh(e);return t>1e5?1:t}function O7(e){return gh(e)>=S7(e).metersPerDegree?"meters":NF(e)}function gh(e,t=rt.metersPerDegree){return F7(e,!0)??t}function F7(e,t=!1){const r=(e==null?void 0:e.wkid)??null,i=(e==null?void 0:e.wkt2)??(e==null?void 0:e.wkt)??null;let s=null;if(r){if($g(r))return Ns.metersPerDegree;if(Sg(r))return Ro.metersPerDegree;s=Ja.values[Ja[r]],!s&&t&&I7.has(r)&&(s=x7)}else i&&(jF(i)?s=_I(FF.exec(i),s):RF(i)&&(s=_I(kF.exec(i),s)));return s}function ple(e){return U$(e)?1:gh(e)}function _I(e,t){return e!=null&&e[1]?LF(e[1]):t}function LF(e){return parseFloat(e.split(",")[1])}function NF(e){const t=(e==null?void 0:e.wkid)??null,r=(e==null?void 0:e.wkt2)??(e==null?void 0:e.wkt)??null;let i=null;if(t)i=Ja.units[Ja[t]];else if(r){const s=jF(r)?FF:RF(r)?kF:null;if(s){const n=s.exec(r);n!=null&&n[1]&&(i=P7(n[1]))}}return i!=null?PF(i):null}function RF(e){return/^GEOCCS/i.test(e)}function jF(e){return/^\s*(?:PROJCS|PROJCRS|PROJECTEDCRS)/i.test(e)}const k7=1e-7;function P7(e){const t=/[\\"']{1}([^\\"']+)/.exec(e);let r=t==null?void 0:t[1];if(!r||!Ja.units.includes(r)){const i=LF(e);r=null;const s=Ja.values;for(let n=0;n<s.length;++n)if(Math.abs(i-s[n])<k7){r=Ja.units[n];break}}return r}const L7={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},N7={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},R7={esriDUDecimalDegrees:"degrees",esriDURadians:"radians"},j7=Kt()(L7),D7=Kt()(N7),hle=Kt()(R7);var hs;let Ne=hs=class extends R{static fromJSON(e){if(!e)return null;if((e==null?void 0:e.wkid)===102100)return hs.WebMercator;if((e==null?void 0:e.wkid)===4326)return hs.WGS84;const t=new hs;return t.read(e),t}constructor(e){super(e),this.latestWkid=null,this.wkid=null,this.wkt=null,this.wkt2=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}normalizeCtorArgs(e){return e&&typeof e=="object"?e:{[typeof e=="string"?"wkt":"wkid"]:e}}get isWGS84(){return sl(this)}get isWebMercator(){return Vs(this)}get isGeographic(){return U$(this)}get isWrappable(){return g7(this)}get metersPerUnit(){return gh(this)}get unit(){return NF(this)||(this.isGeographic?"degrees":null)}writeWkt(e,t){this.wkid||(t.wkt=e)}clone(){if(this===hs.WGS84)return new hs(CF);if(this===hs.WebMercator)return new hs(OF);const e=new hs;return this.wkid!=null?(e.wkid=this.wkid,this.latestWkid!=null&&(e.latestWkid=this.latestWkid),this.vcsWkid!=null&&(e.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(e.latestVcsWkid=this.latestVcsWkid)):(this.wkt!=null&&(e.wkt=this.wkt),this.wkt2!=null&&(e.wkt2=this.wkt2)),this.imageCoordinateSystem&&(e.imageCoordinateSystem=M(this.imageCoordinateSystem)),e}equals(e){if(e==null)return!1;if(this.imageCoordinateSystem||e.imageCoordinateSystem){if(this.imageCoordinateSystem==null||e.imageCoordinateSystem==null)return!1;const{id:t,referenceServiceName:r}=e.imageCoordinateSystem,{geodataXform:i}=e.imageCoordinateSystem,s=this.imageCoordinateSystem;return t==null||i?JSON.stringify(s)===JSON.stringify(e.imageCoordinateSystem):r?s.id===t&&s.referenceServiceName===r:s.id===t}return wr(this,e)}toJSON(e){return this.write(void 0,e)}};Ne.GCS_NAD_1927=null,Ne.WGS84=null,Ne.WebMercator=null,Ne.PlateCarree=null,a([u({readOnly:!0})],Ne.prototype,"isWGS84",null),a([u({readOnly:!0})],Ne.prototype,"isWebMercator",null),a([u({readOnly:!0})],Ne.prototype,"isGeographic",null),a([u({readOnly:!0})],Ne.prototype,"isWrappable",null),a([u({type:je,json:{write:!0}})],Ne.prototype,"latestWkid",void 0),a([u({readOnly:!0})],Ne.prototype,"metersPerUnit",null),a([u({readOnly:!0})],Ne.prototype,"unit",null),a([u({type:je,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt==null}}}}}}})],Ne.prototype,"wkid",void 0),a([u({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid==null}}}}}}})],Ne.prototype,"wkt",void 0),a([B("wkt"),B("web-scene","wkt")],Ne.prototype,"writeWkt",null),a([u({type:String,json:{write:!1}})],Ne.prototype,"wkt2",void 0),a([u({type:je,json:{write:!0}})],Ne.prototype,"vcsWkid",void 0),a([u({type:je,json:{write:!0}})],Ne.prototype,"latestVcsWkid",void 0),a([u()],Ne.prototype,"imageCoordinateSystem",void 0),Ne=hs=a([_("esri.geometry.SpatialReference")],Ne),Ne.prototype.toJSON.isDefaultToJSON=!0,Ne.GCS_NAD_1927=$e.freeze(new Ne({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'})),Ne.WGS84=$e.freeze(new Ne(CF)),Ne.WebMercator=$e.freeze(new Ne(OF)),Ne.PlateCarree=$e.freeze(new Ne(v7));const ge=Ne;let fs=class extends R{constructor(...t){super(...t),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=ge.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(t,r){if(t instanceof ge)return t;if(t!=null){const i=new ge;return i.read(t,r),i}return t}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(t){return this.cache[t]}setCacheValue(t,r){this.cache[t]=r}};a([u()],fs.prototype,"type",void 0),a([u({readOnly:!0})],fs.prototype,"cache",null),a([u({readOnly:!0})],fs.prototype,"extent",null),a([u({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],fs.prototype,"hasM",void 0),a([u({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],fs.prototype,"hasZ",void 0),a([u({type:ge,json:{write:!0},value:ge.WGS84})],fs.prototype,"spatialReference",void 0),a([D("spatialReference")],fs.prototype,"readSpatialReference",null),fs=a([_("esri.geometry.Geometry")],fs);const $l=fs,V7=57.29577951308232,U7=.017453292519943;function $I(e){return e*V7}function SI(e){return e*U7}function yle(e){return Math.PI/2-2*Math.atan(Math.exp(-e/rt.radius))}function xb(e){return e.wkid!=null||e.wkt!=null}const C0=[0,0];function Em(e,t,r,i,s){const n=e,o=s;if(o.spatialReference=r,"x"in n&&"x"in o)[o.x,o.y]=t(n.x,n.y,C0,i);else if("xmin"in n&&"xmin"in o)[o.xmin,o.ymin]=t(n.xmin,n.ymin,C0,i),[o.xmax,o.ymax]=t(n.xmax,n.ymax,C0,i);else if("paths"in n&&"paths"in o||"rings"in n&&"rings"in o){const l="paths"in n?n.paths:n.rings,c=[];let p;for(let h=0;h<l.length;h++){const f=l[h];p=[],c.push(p);for(let y=0;y<f.length;y++)p.push(t(f[y][0],f[y][1],[0,0],i)),f[y].length>2&&p[y].push(f[y][2]),f[y].length>3&&p[y].push(f[y][3])}"paths"in o?o.paths=c:o.rings=c}else if("points"in n&&"points"in o){const l=n.points,c=[];for(let p=0;p<l.length;p++)c[p]=t(l[p][0],l[p][1],[0,0],i),l[p].length>2&&c[p].push(l[p][2]),l[p].length>3&&c[p].push(l[p][3]);o.points=c}return s}function Qf(e,t){const r=e&&(xb(e)?e:e.spatialReference),i=t&&(xb(t)?t:t.spatialReference);return!(e&&"type"in e&&e.type==="mesh"||t&&"type"in t&&t.type==="mesh"||!r||!i)&&(!!wr(i,r)||Vs(i)&&sl(r)||Vs(r)&&sl(i))}function DF(e,t){if(e==null)return null;const r=e.spatialReference,i=t&&(xb(t)?t:t.spatialReference);return Qf(r,i)?wr(r,i)?M(e):Vs(i)?Em(e,Mu,ge.WebMercator,!1,M(e)):sl(i)?Em(e,xg,ge.WGS84,!1,M(e)):null:null}function Mu(e,t,r=[0,0]){t>89.99999?t=89.99999:t<-89.99999&&(t=-89.99999);const i=SI(t);return r[0]=SI(e)*rt.radius,r[1]=rt.halfSemiMajorAxis*Math.log((1+Math.sin(i))/(1-Math.sin(i))),r}function xg(e,t,r=[0,0],i=!1){if(e===Dp[0])r[0]=-180;else if(e===Dp[1])r[0]=180;else{const s=$I(e/rt.radius);r[0]=i?s:s-360*Math.floor((s+180)/360)}return r[1]=$I(Math.PI/2-2*Math.atan(Math.exp(-t/rt.radius))),r}function Za(e,t=!1,r=M(e)){return Em(e,Mu,ge.WebMercator,t,r)}function Eu(e,t=!1,r=M(e)){return Em(e,xg,ge.WGS84,t,r)}function z7(e,t){const r=e.x-t.x,i=e.y-t.y,s=e.z!=null&&t.z!=null?e.z-t.z:0;return Math.sqrt(r*r+i*i+s*s)}function q7(e){var t;return((t=VF(e,UF))==null?void 0:t[0])??null}function G7(e){var t;return((t=VF(e,UF))==null?void 0:t[1])??null}function VF({x:e,y:t,spatialReference:r},i=[0,0]){if(r){if(Vs(r))return xg(e,t,i);if(U$(r))return i[0]=e,i[1]=t,i}return null}const UF=[0,0];var Kf;const O0=[0,0];function xI(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}let fr=Kf=class extends $l{static copy(e,t){t._set("x",e._get("x")),t._set("y",e._get("y")),t._set("z",e._get("z")),t._set("m",e._get("m"));const r=e._get("spatialReference");t._set("spatialReference",$e.isFrozen(r)?r:r.clone())}constructor(...e){super(...e),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}normalizeCtorArgs(e,t,r,i,s){let n;if(Array.isArray(e))n=e,s=t,e=n[0],t=n[1],r=n[2],i=n[3];else if(e&&typeof e=="object"){if(n=e,e=n.x!=null?n.x:n.longitude,t=n.y!=null?n.y:n.latitude,r=n.z,i=n.m,(s=n.spatialReference)&&s.declaredClass!=="esri.geometry.SpatialReference"&&(s=new ge(s)),n.longitude!=null||n.latitude!=null){if(n.longitude==null)G.getLogger(this).warn(".longitude=","Latitude was defined without longitude");else if(n.latitude==null)G.getLogger(this).warn(".latitude=","Longitude was defined without latitude");else if(!n.declaredClass&&(s!=null&&s.isWebMercator)){const l=Mu(n.longitude,n.latitude,O0);e=l[0],t=l[1]}}}else xI(r)?(s=r,r=null):xI(i)&&(s=i,i=null);const o={x:e,y:t};return o.x==null&&o.y!=null?G.getLogger(this).warn(".y=","Y coordinate was defined without an X coordinate"):o.y==null&&o.x!=null&&G.getLogger(this).warn(".x=","X coordinate was defined without a Y coordinate"),s!=null&&(o.spatialReference=s),r!=null&&(o.z=r),i!=null&&(o.m=i),o}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(e){e!==(this._get("m")!==void 0)&&(this._set("m",e?0:void 0),this._set("hasM",e))}get hasZ(){return this.z!==void 0}set hasZ(e){e!==(this._get("z")!==void 0)&&(this._set("z",e?0:void 0),this._set("hasZ",e))}get latitude(){return G7(this)}set latitude(e){const{spatialReference:t,x:r}=this;e!=null&&t&&(t.isWebMercator?this._set("y",Mu(r,e,O0)[1]):t.isGeographic&&this._set("y",e),this._set("latitude",e))}get longitude(){return q7(this)}set longitude(e){const{y:t,spatialReference:r}=this;e!=null&&r&&(r.isWebMercator?this._set("x",Mu(e,t,O0)[0]):r.isGeographic&&this._set("x",e),this._set("longitude",e))}writeX(e,t,r){t[r]=isNaN(e)?"NaN":e}readX(e){return typeof e=="string"?NaN:e}clone(){const e=new Kf;return e.x=this.x,e.y=this.y,e.z=this.z,e.m=this.m,e.spatialReference=this.spatialReference,e}copy(e){return Kf.copy(e,this),this}equals(e){if(e==null)return!1;const{x:t,y:r,z:i,m:s,spatialReference:n}=this,{z:o,m:l}=e;let{x:c,y:p,spatialReference:h}=e;if(!n.equals(h))if(n.isWebMercator&&h.isWGS84)[c,p]=Mu(c,p),h=n;else{if(!n.isWGS84||!h.isWebMercator)return!1;[c,p]=xg(c,p),h=n}return t===c&&r===p&&i===o&&s===l&&n.wkid===h.wkid}offset(e,t,r){return this.x+=e,this.y+=t,r!=null&&(this.z=(this.z??0)+r),this}normalize(){if(!this.spatialReference)return this;const e=dp(this.spatialReference);if(!e)return this;let t=this.x;const[r,i]=e.valid,s=2*i;let n;return t>i?(n=Math.ceil(Math.abs(t-i)/s),t-=n*s):t<r&&(n=Math.ceil(Math.abs(t-r)/s),t+=n*s),this._set("x",t),this}distance(e){return z7(this,e)}toArray(){const e=this.hasZ,t=this.hasM;return e&&t?[this.x,this.y,this.z,this.m]:e?[this.x,this.y,this.z]:t?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(e){return this.write({},e)}};a([u({readOnly:!0})],fr.prototype,"cache",null),a([u({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],fr.prototype,"hasM",null),a([u({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],fr.prototype,"hasZ",null),a([u({type:Number})],fr.prototype,"latitude",null),a([u({type:Number})],fr.prototype,"longitude",null),a([u({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),Ce(e=>isNaN(e)?e:wc(e))],fr.prototype,"x",void 0),a([B("x")],fr.prototype,"writeX",null),a([D("x")],fr.prototype,"readX",null),a([u({type:Number,json:{write:!0}})],fr.prototype,"y",void 0),a([u({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],fr.prototype,"z",void 0),a([u({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],fr.prototype,"m",void 0),fr=Kf=a([_("esri.geometry.Point")],fr),fr.prototype.toJSON.isDefaultToJSON=!0;const Ye=fr,F0=[0,0];function zF(e,t){return t!=null&&gr(e,t.x,t.y,t.z)}function mle(e,t){if(!t.points||t.points.length)return!1;for(const r of t.points)if(!ac(e,r))return!1;return!0}function B7(e,t){const{xmin:r,ymin:i,zmin:s,xmax:n,ymax:o,zmax:l}=t;return e.hasZ&&t.hasZ?gr(e,r,i,s)&&gr(e,r,o,s)&&gr(e,n,o,s)&&gr(e,n,i,s)&&gr(e,r,i,l)&&gr(e,r,o,l)&&gr(e,n,o,l)&&gr(e,n,i,l):gr(e,r,i)&&gr(e,r,o)&&gr(e,n,o)&&gr(e,n,i)}function ac(e,t){return gr(e,t[0],t[1])}function W7(e,t){return gr(e,t[0],t[1],t[2])}function gr(e,t,r,i){return t>=e.xmin&&t<=e.xmax&&r>=e.ymin&&r<=e.ymax&&(i==null||!e.hasZ||i>=e.zmin&&i<=e.zmax)}function H7(e,t){return F0[1]=t.y,F0[0]=t.x,J7(e,F0)}function J7(e,t){return qF(e.rings,t)}function qF(e,t){if(!e)return!1;if(Z7(e))return II(!1,e,t);let r=!1;for(let i=0,s=e.length;i<s;i++)r=II(r,e[i],t);return r}function Z7(e){return!Array.isArray(e[0][0])}function II(e,t,r){const[i,s]=r;let n=e,o=0;for(let l=0,c=t.length;l<c;l++){o++,o===c&&(o=0);const[p,h]=t[l],[f,y]=t[o];(h<s&&y>=s||y<s&&h>=s)&&p+(s-h)/(y-h)*(f-p)<i&&(n=!n)}return n}function Y7(e,t){return zF(e,t)}function Q7(e,t){const r=e.hasZ&&t.hasZ;let i,s,n;if(e.xmin<=t.xmin){if(i=t.xmin,e.xmax<i)return!1}else if(i=e.xmin,t.xmax<i)return!1;if(e.ymin<=t.ymin){if(s=t.ymin,e.ymax<s)return!1}else if(s=e.ymin,t.ymax<s)return!1;if(r&&t.hasZ){if(e.zmin<=t.zmin){if(n=t.zmin,e.zmax<n)return!1}else if(n=e.zmin,t.zmax<n)return!1}return!0}function K7(e,t){const{points:r,hasZ:i}=t,s=i?W7:ac;for(const n of r)if(s(e,n))return!0;return!1}const nl=[0,0],ol=[0,0],al=[0,0],ll=[0,0],X7=[nl,ol,al,ll],GF=[[al,nl],[nl,ol],[ol,ll],[ll,al]];function eU(e,t){return tU(e,t.rings)}function tU(e,t){nl[0]=e.xmin,nl[1]=e.ymax,ol[0]=e.xmax,ol[1]=e.ymax,al[0]=e.xmin,al[1]=e.ymin,ll[0]=e.xmax,ll[1]=e.ymin;for(const r of X7)if(qF(t,r))return!0;for(const r of t){if(!r.length)continue;let i=r[0];if(ac(e,i))return!0;for(let s=1;s<r.length;s++){const n=r[s];if(ac(e,n)||BF(i,n,GF))return!0;i=n}}return!1}function rU(e,t){nl[0]=e.xmin,nl[1]=e.ymax,ol[0]=e.xmax,ol[1]=e.ymax,al[0]=e.xmin,al[1]=e.ymin,ll[0]=e.xmax,ll[1]=e.ymin;const r=t.paths;for(const i of r){if(!r.length)continue;let s=i[0];if(ac(e,s))return!0;for(let n=1;n<i.length;n++){const o=i[n];if(ac(e,o)||BF(s,o,GF))return!0;s=o}}return!1}const kt=[0,0];function iU(e){for(let t=0;t<e.length;t++){const r=e[t];for(let s=0;s<r.length-1;s++){const n=r[s],o=r[s+1];for(let l=t+1;l<e.length;l++)for(let c=0;c<e[l].length-1;c++){const p=e[l][c],h=e[l][c+1];if(Ib(n,o,p,h,kt)&&!(kt[0]===n[0]&&kt[1]===n[1]||kt[0]===p[0]&&kt[1]===p[1]||kt[0]===o[0]&&kt[1]===o[1]||kt[0]===h[0]&&kt[1]===h[1]))return!0}}const i=r.length;if(!(i<=4))for(let s=0;s<i-3;s++){let n=i-1;s===0&&(n=i-2);const o=r[s],l=r[s+1];for(let c=s+2;c<n;c++){const p=r[c],h=r[c+1];if(Ib(o,l,p,h,kt)&&!(kt[0]===o[0]&&kt[1]===o[1]||kt[0]===p[0]&&kt[1]===p[1]||kt[0]===l[0]&&kt[1]===l[1]||kt[0]===h[0]&&kt[1]===h[1]))return!0}}}return!1}function BF(e,t,r){for(let i=0;i<r.length;i++)if(Ib(e,t,r[i][0],r[i][1]))return!0;return!1}function Ib(e,t,r,i,s){const[n,o]=e,[l,c]=t,[p,h]=r,[f,y]=i,m=f-p,g=n-p,b=l-n,w=y-h,S=o-h,x=c-o,E=w*b-m*x;if(E===0)return!1;const C=(m*S-w*g)/E,P=(b*S-x*g)/E;return C>=0&&C<=1&&P>=0&&P<=1&&(s&&(s[0]=n+C*(l-n),s[1]=o+C*(c-o)),!0)}function sU(e){switch(e){case"esriGeometryEnvelope":case"extent":return Q7;case"esriGeometryMultipoint":case"multipoint":return K7;case"esriGeometryPoint":case"point":return Y7;case"esriGeometryMultiPatch":case"multipatch":case"esriGeometryPolygon":case"polygon":return eU;case"esriGeometryPolyline":case"polyline":return rU}}var di;function nU(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}function Dn(e,t,r){return t==null?r:r==null?t:e(t,r)}let Et=di=class extends $l{constructor(...e){super(...e),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(e,t,r,i,s){return nU(e)?{spatialReference:e,xmin:0,ymin:0,xmax:0,ymax:0}:typeof e=="object"?(e.spatialReference=e.spatialReference==null?ge.WGS84:e.spatialReference,e):{xmin:e,ymin:t,xmax:r,ymax:i,spatialReference:s??ge.WGS84}}static fromBounds(e,t){return new di({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}static fromPoint(e){return new di({xmin:e.x,ymin:e.y,zmin:e.z,xmax:e.x,ymax:e.y,zmax:e.z,spatialReference:e.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const e=new Ye({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(e.z=.5*(this.zmin+this.zmax)),this.hasM&&(e.m=.5*(this.mmin+this.mmax)),e}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(e){const t=this.center;return e.z!=null&&this.hasZ?this.offset(e.x-t.x,e.y-t.y,e.z-t.z):this.offset(e.x-t.x,e.y-t.y)}clone(){const e=new di;return e.xmin=this.xmin,e.ymin=this.ymin,e.xmax=this.xmax,e.ymax=this.ymax,e.spatialReference=this.spatialReference,this.zmin!=null&&(e.zmin=this.zmin,e.zmax=this.zmax),this.mmin!=null&&(e.mmin=this.mmin,e.mmax=this.mmax),e}contains(e){if(!e)return!1;const t=this.spatialReference,r=e.spatialReference;return t&&r&&!t.equals(r)&&Qf(t,r)&&(e=t.isWebMercator?Za(e):Eu(e,!0)),e.type==="point"?zF(this,e):e.type==="extent"&&B7(this,e)}equals(e){if(this===e)return!0;if(e==null)return!1;const t=this.spatialReference,r=e.spatialReference;return t&&r&&!t.equals(r)&&Qf(t,r)&&(e=t.isWebMercator?Za(e):Eu(e,!0)),this.xmin===e.xmin&&this.ymin===e.ymin&&this.zmin===e.zmin&&this.mmin===e.mmin&&this.xmax===e.xmax&&this.ymax===e.ymax&&this.zmax===e.zmax&&this.mmax===e.mmax}expand(e){const t=.5*(1-e),r=this.width*t,i=this.height*t;if(this.xmin+=r,this.ymin+=i,this.xmax-=r,this.ymax-=i,this.hasZ){const s=(this.zmax-this.zmin)*t;this.zmin+=s,this.zmax-=s}if(this.hasM){const s=(this.mmax-this.mmin)*t;this.mmin+=s,this.mmax-=s}return this}intersects(e){if(e==null)return!1;e.type==="mesh"&&(e=e.extent);const t=this.spatialReference,r=e.spatialReference;return t&&r&&!wr(t,r)&&Qf(t,r)&&(e=t.isWebMercator?Za(e):Eu(e,!0)),sU(e.type)(this,e)}normalize(){const e=this._normalize(!1,!0);return Array.isArray(e)?e:[e]}offset(e,t,r){return this.xmin+=e,this.ymin+=t,this.xmax+=e,this.ymax+=t,r!=null&&(this.zmin+=r,this.zmax+=r),this}shiftCentralMeridian(){return this._normalize(!0)}union(e){return this===e||(this.xmin=Math.min(this.xmin,e.xmin),this.ymin=Math.min(this.ymin,e.ymin),this.xmax=Math.max(this.xmax,e.xmax),this.ymax=Math.max(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=Dn(Math.min,this.zmin,e.zmin),this.zmax=Dn(Math.max,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=Dn(Math.min,this.mmin,e.mmin),this.mmax=Dn(Math.max,this.mmax,e.mmax))),this}intersection(e){return this===e?this:e!=null&&this.intersects(e)?(this.xmin=Math.max(this.xmin,e.xmin),this.ymin=Math.max(this.ymin,e.ymin),this.xmax=Math.min(this.xmax,e.xmax),this.ymax=Math.min(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=Dn(Math.max,this.zmin,e.zmin),this.zmax=Dn(Math.min,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=Dn(Math.max,this.mmin,e.mmin),this.mmax=Dn(Math.min,this.mmax,e.mmax)),this):null}toJSON(e){return this.write({},e)}_shiftCM(e=dp(this.spatialReference)){if(!e||!this.spatialReference)return this;const t=this.spatialReference,r=this._getCM(e);if(r){const i=t.isWebMercator?Eu(r):r;this.xmin-=r.x,this.xmax-=r.x,t.isWebMercator||(i.x=k0(i.x,e).x),this.spatialReference=new ge(ns((t.isWGS84?e.altTemplate:null)??e.wkTemplate,{Central_Meridian:i.x}))}return this}_getCM(e){let t=null;const[r,i]=e.valid,s=this.xmin,n=this.xmax;return s>=r&&s<=i&&n>=r&&n<=i||(t=this.center),t}_normalize(e,t,r){const i=this.spatialReference;if(!i)return this;const s=r??dp(i);if(s==null)return this;const n=this._getParts(s).map(c=>c.extent);if(n.length<2)return n[0]||this;if(n.length>2)return e?this._shiftCM(s):this.set({xmin:s.valid[0],xmax:s.valid[1]});if(e)return this._shiftCM(s);if(t)return n;let o=!0,l=!0;return n.forEach(c=>{c.hasZ||(o=!1),c.hasM||(l=!1)}),{rings:n.map(c=>{const p=[[c.xmin,c.ymin],[c.xmin,c.ymax],[c.xmax,c.ymax],[c.xmax,c.ymin],[c.xmin,c.ymin]];if(o){const h=(c.zmax-c.zmin)/2;for(let f=0;f<p.length;f++)p[f].push(h)}if(l){const h=(c.mmax-c.mmin)/2;for(let f=0;f<p.length;f++)p[f].push(h)}return p}),hasZ:o,hasM:l,spatialReference:i}}_getParts(e){let t=this.cache._parts;if(!t){t=[];const{ymin:s,ymax:n,spatialReference:o}=this,l=this.width,c=this.xmin,p=this.xmax;let h;e=e||dp(o);const[f,y]=e.valid;h=k0(this.xmin,e);const m=h.x,g=h.frameId;h=k0(this.xmax,e);const b=h.x,w=h.frameId,S=m===b&&l>0;if(l>2*y){const x=new di(c<p?m:b,s,y,n,o),E=new di(f,s,c<p?b:m,n,o),C=new di(0,s,y,n,o),P=new di(f,s,0,n,o),L=[],V=[];x.contains(C)&&L.push(g),x.contains(P)&&V.push(g),E.contains(C)&&L.push(w),E.contains(P)&&V.push(w);for(let q=g+1;q<w;q++)L.push(q),V.push(q);t.push({extent:x,frameIds:[g]},{extent:E,frameIds:[w]},{extent:C,frameIds:L},{extent:P,frameIds:V})}else m>b||S?t.push({extent:new di(m,s,y,n,o),frameIds:[g]},{extent:new di(f,s,b,n,o),frameIds:[w]}):t.push({extent:new di(m,s,b,n,o),frameIds:[g]});this.cache._parts=t}const r=this.hasZ,i=this.hasM;if(r||i){const s={};r&&(s.zmin=this.zmin,s.zmax=this.zmax),i&&(s.mmin=this.mmin,s.mmax=this.mmax);for(let n=0;n<t.length;n++)t[n].extent.set(s)}return t}};function k0(e,t){const[r,i]=t.valid,s=2*i;let n,o=0;return e>i?(n=Math.ceil(Math.abs(e-i)/s),e-=n*s,o=n):e<r&&(n=Math.ceil(Math.abs(e-r)/s),e+=n*s,o=-n),{x:e,frameId:o}}a([u({readOnly:!0})],Et.prototype,"cache",null),a([u({readOnly:!0})],Et.prototype,"center",null),a([u({readOnly:!0})],Et.prototype,"extent",null),a([u({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Et.prototype,"hasM",null),a([u({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Et.prototype,"hasZ",null),a([u({readOnly:!0})],Et.prototype,"height",null),a([u({readOnly:!0})],Et.prototype,"width",null),a([u({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],Et.prototype,"xmin",void 0),a([u({type:Number,json:{write:!0}})],Et.prototype,"ymin",void 0),a([u({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],Et.prototype,"mmin",void 0),a([u({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Et.prototype,"zmin",void 0),a([u({type:Number,json:{write:!0}})],Et.prototype,"xmax",void 0),a([u({type:Number,json:{write:!0}})],Et.prototype,"ymax",void 0),a([u({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],Et.prototype,"mmax",void 0),a([u({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Et.prototype,"zmax",void 0),Et=di=a([_("esri.geometry.Extent")],Et),Et.prototype.toJSON.isDefaultToJSON=!0;const it=Et;function lc(e,t,r=!1){let{hasM:i,hasZ:s}=e;Array.isArray(t)?t.length!==4||i||s?t.length===3&&r&&!i?(s=!0,i=!1):t.length===3&&i&&s&&(i=!1,s=!1):(i=!0,s=!0):(s=!s&&t.hasZ&&(!i||t.hasM),i=!i&&t.hasM&&(!s||t.hasZ)),e.hasZ=s,e.hasM=i}var Tb;function TI(e){return(t,r)=>t==null?r:r==null?t:e(t,r)}function oU(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}let Bn=Tb=class extends $l{constructor(...e){super(...e),this.points=[],this.type="multipoint"}normalizeCtorArgs(e,t){var s;if(!e&&!t)return{};const r={};Array.isArray(e)?(r.points=e,r.spatialReference=t):oU(e)?r.spatialReference=e:(e.points&&(r.points=e.points),e.spatialReference&&(r.spatialReference=e.spatialReference),e.hasZ&&(r.hasZ=e.hasZ),e.hasM&&(r.hasM=e.hasM));const i=(s=r.points)==null?void 0:s[0];return i&&(r.hasZ===void 0&&r.hasM===void 0?(r.hasZ=i.length>2,r.hasM=!1):r.hasZ===void 0?r.hasZ=i.length>3:r.hasM===void 0&&(r.hasM=i.length>3)),r}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const e=this.points;if(!e.length)return null;const t=new it,r=this.hasZ,i=this.hasM,s=r?3:2,n=e[0],o=TI(Math.min),l=TI(Math.max);let c,p,h,f,[y,m]=n,[g,b]=n;for(let w=0,S=e.length;w<S;w++){const x=e[w],[E,C]=x;if(y=o(y,E),m=o(m,C),g=l(g,E),b=l(b,C),r&&x.length>2){const P=x[2];c=o(c,P),h=l(h,P)}if(i&&x.length>s){const P=x[s];p=o(p,P),f=l(f,P)}}return t.xmin=y,t.ymin=m,t.xmax=g,t.ymax=b,t.spatialReference=this.spatialReference,r?(t.zmin=c,t.zmax=h):(t.zmin=void 0,t.zmax=void 0),i?(t.mmin=p,t.mmax=f):(t.mmin=void 0,t.mmax=void 0),t}writePoints(e,t){t.points=M(this.points)}addPoint(e){return lc(this,e),Array.isArray(e)?this.points.push(e):this.points.push(e.toArray()),this.notifyChange("points"),this}clone(){const e={points:M(this.points),spatialReference:this.spatialReference};return this.hasZ&&(e.hasZ=!0),this.hasM&&(e.hasM=!0),new Tb(e)}getPoint(e){if(!this._validateInputs(e))return null;const t=this.points[e],r={x:t[0],y:t[1],spatialReference:this.spatialReference};let i=2;return this.hasZ&&(r.z=t[2],i=3),this.hasM&&(r.m=t[i]),new Ye(r)}removePoint(e){if(!this._validateInputs(e))return null;const t=new Ye(this.points.splice(e,1)[0],this.spatialReference);return this.notifyChange("points"),t}setPoint(e,t){return this._validateInputs(e)?(lc(this,t),Array.isArray(t)||(t=t.toArray()),this.points[e]=t,this.notifyChange("points"),this):this}toJSON(e){return this.write({},e)}_validateInputs(e){return e!=null&&e>=0&&e<this.points.length}};a([u({readOnly:!0})],Bn.prototype,"cache",null),a([u()],Bn.prototype,"extent",null),a([u({type:[[Number]],json:{write:{isRequired:!0}}})],Bn.prototype,"points",void 0),a([B("points")],Bn.prototype,"writePoints",null),Bn=Tb=a([_("esri.geometry.Multipoint")],Bn),Bn.prototype.toJSON.isDefaultToJSON=!0;const Ig=Bn;function gle(e){const t=[];for(e.reset();e.nextPath();){const r=[];for(;e.nextPoint();)r.push([e.x,e.y]);t.push(r)}return e.reset(),t}function aU(e){const t=[];for(;e.nextPoint();)t.push([e.x,e.y]);return e.seekPathStart(),t}var Am;(function(e){e[e.X=0]="X",e[e.Y=1]="Y",e[e.Z=2]="Z"})(Am||(Am={}));function B$(e,t){const r=t[0]-e[0],i=t[1]-e[1];if(e.length>2&&t.length>2){const s=e[2]-t[2];return Math.sqrt(r*r+i*i+s*s)}return Math.sqrt(r*r+i*i)}function lU(e,t,r){const i=e[0]+r*(t[0]-e[0]),s=e[1]+r*(t[1]-e[1]);return e.length>2&&t.length>2?[i,s,e[2]+r*(t[2]-e[2])]:[i,s]}function vle(e,t,r,i){const[s,n]=t,[o,l]=r,[c,p]=i,h=c-o,f=p-l,y=h*h+f*f,m=(s-o)*h+(n-l)*f,g=Math.min(1,Math.max(0,m/y));return e[0]=o+h*g,e[1]=l+f*g,e}function ble(e,t,r,i,s,n){let o=r,l=i,c=s-o,p=n-l;if(c!==0||p!==0){const h=((e-o)*c+(t-l)*p)/(c*c+p*p);h>1?(o=s,l=n):h>0&&(o+=c*h,l+=p*h)}return c=e-o,p=t-l,c*c+p*p}function WF(e,t){return lU(e,t,.5)}function wle(e){const t=e.length;let r=0;for(let i=0;i<t-1;++i)r+=B$(e[i],e[i+1]);return r}function uU(e,t=Am.X,r=Am.Y){let i=0;const s=e.length;let n=e[0];for(let o=1;o<s;o++){const l=e[o];i+=(l[t]-n[t])*(l[r]+n[r]),n=l}if(!HF(e)){const o=e[0];i+=(o[t]-n[t])*(o[r]+n[r])}return i>=0}function HF(e){const t=e.length;return t<3||ig(e[0],e[t-1])}function _le(e){if(!("rings"in e))return!1;let t=!1;for(const r of e.rings)HF(r)||(r.push(r[0].slice()),t=!0);return t}function $le(e){return e?e.hasZ?[e.xmax-e.xmin/2,e.ymax-e.ymin/2,e.zmax-e.zmin/2]:[e.xmax-e.xmin/2,e.ymax-e.ymin/2]:null}function cU(e){return e?dU(e.rings,e.hasZ??!1):null}function dU(e,t){if(!(e!=null&&e.length))return null;const r=[],i=[],s=t?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let n=0,o=e.length;n<o;n++){const l=JF(e[n],t,s);l&&i.push(l)}if(i.sort((n,o)=>{let l=n[2]-o[2];return l===0&&t&&(l=n[4]-o[4]),l}),i.length&&(r[0]=i[0][0],r[1]=i[0][1],t&&(r[2]=i[0][3]),(r[0]<s[0]||r[0]>s[1]||r[1]<s[2]||r[1]>s[3]||t&&(r[2]<s[4]||r[2]>s[5]))&&(r.length=0)),!r.length){const n=e[0]&&e[0].length?pU(e[0],t):null;if(!n)return null;r[0]=n[0],r[1]=n[1],t&&n.length>2&&(r[2]=n[2])}return r}function JF(e,t,r){let i=0,s=0,n=0,o=0,l=0;const c=e.length?e[0][0]:0,p=e.length?e[0][1]:0,h=e.length&&t?e[0][2]:0;for(let y=0;y<e.length;y++){const m=e[y],g=e[(y+1)%e.length],[b,w,S]=m,x=b-c,E=w-p,[C,P,L]=g,V=C-c,q=P-p,H=x*q-V*E;if(o+=H,i+=(x+V)*H,s+=(E+q)*H,t&&m.length>2&&g.length>2){const Y=S-h,se=L-h,de=x*se-V*Y;n+=(Y+se)*de,l+=de}b<r[0]&&(r[0]=b),b>r[1]&&(r[1]=b),w<r[2]&&(r[2]=w),w>r[3]&&(r[3]=w),t&&(S<r[4]&&(r[4]=S),S>r[5]&&(r[5]=S))}if(o>0&&(o*=-1),l>0&&(l*=-1),!o)return null;o*=.5,l*=.5;const f=[i/(6*o)+c,s/(6*o)+p,o];return t&&(r[4]===r[5]||l===0?(f[3]=(r[4]+r[5])/2,f[4]=0):(f[3]=n/(6*l)+h,f[4]=l)),f}function Sle(e,t){let r=0,i=0,s=0;e.nextPoint();const n=e.pathSize?e.x:0,o=e.pathSize?e.y:0;for(let l=0;l<e.pathSize;l++){e.seekInPath(l);const c=[e.x,e.y];e.seekInPath((l+1)%e.pathSize);const p=[e.x,e.y],[h,f]=c,y=h-n,m=f-o,[g,b]=p,w=g-n,S=b-o,x=y*S-w*m;s+=x,r+=(y+w)*x,i+=(m+S)*x,h<t[0]&&(t[0]=h),h>t[1]&&(t[1]=h),f<t[2]&&(t[2]=f),f>t[3]&&(t[3]=f)}return s>0&&(s*=-1),s?(s*=.5,[r/(6*s)+n,i/(6*s)+o,s]):null}function pU(e,t){const r=t?[0,0,0]:[0,0],i=t?[0,0,0]:[0,0];let s=0,n=0,o=0,l=0;for(let c=0,p=e.length;c<p-1;c++){const h=e[c],f=e[c+1];if(h&&f){r[0]=h[0],r[1]=h[1],i[0]=f[0],i[1]=f[1],t&&h.length>2&&f.length>2&&(r[2]=h[2],i[2]=f[2]);const y=B$(r,i);if(y){s+=y;const m=WF(h,f);n+=y*m[0],o+=y*m[1],t&&m.length>2&&(l+=y*m[2])}}}return s>0?t?[n/s,o/s,l/s]:[n/s,o/s]:e.length?e[0]:null}function hU(e){const{hasZ:t,totalSize:r}=e;if(r===0)return null;const i=[],s=[],n=t?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(e.reset();e.nextPath();){const o=JF(aU(e),e.hasZ,n);o&&s.push(o)}if(s.sort((o,l)=>{let c=o[2]-l[2];return c===0&&t&&(c=o[4]-l[4]),c}),s.length&&(i[0]=s[0][0],i[1]=s[0][1],t&&(i[2]=s[0][3]),(i[0]<n[0]||i[0]>n[1]||i[1]<n[2]||i[1]>n[3]||t&&(i[2]<n[4]||i[2]>n[5]))&&(i.length=0)),!i.length){e.reset(),e.nextPath();const o=e.pathSize?fU(e):null;if(!o)return null;i[0]=o[0],i[1]=o[1],t&&o.length>2&&(i[2]=o[2])}return i}function fU(e){const{hasZ:t}=e,r=t?[0,0,0]:[0,0],i=t?[0,0,0]:[0,0];let s=0,n=0,o=0,l=0;if(e.nextPoint()){let c=e.x,p=e.y,h=e.z;for(;e.nextPoint();){const f=e.x,y=e.y,m=e.z;r[0]=c,r[1]=p,i[0]=f,i[1]=y,t&&(r[2]=h,i[2]=m);const g=B$(r,i);if(g){s+=g;const b=WF(r,i);n+=g*b[0],o+=g*b[1],t&&b.length>2&&(l+=g*b[2])}c=f,p=y,h=m}}return s>0?t?[n/s,o/s,l/s]:[n/s,o/s]:e.pathSize?(e.seekPathStart(),e.nextPoint(),[e.x,e.y]):null}const yU=1e-6;function xle(e){let t=0;for(e.reset();e.nextPath();)t+=e.getCurrentRingArea();if(t<yU){const s=hU(e);return s?[s[0],s[1]]:null}const r=[0,0];if(e.reset(),!e.nextPath()||!e.nextPoint())return null;const i=[e.x,e.y];for(e.reset();e.nextPath();)gU(r,i,e);return r[0]*=1/t,r[1]*=1/t,r[0]+=i[0],r[1]+=i[1],r}const mU=1/3;function gU(e,t,r){if(!e||!r||r.pathSize<3)return null;r.nextPoint();const i=r.x,s=r.y;r.nextPoint();let n,o=r.x-i,l=r.y-s,c=0,p=0;for(;r.nextPoint();)c=r.x-i,p=r.y-s,n=.5*mU*(c*l-p*o),e[0]+=n*(o+c),e[1]+=n*(l+p),o=c,l=p;const h=r.getCurrentRingArea(),f=[i,s];return f[0]-=t[0],f[1]-=t[1],f[0]*=h,f[1]*=h,e[0]+=f[0],e[1]+=f[1],e}function vh(e=wU){return[e[0],e[1],e[2],e[3]]}function ZF(e,t){return e!==t&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]),e}function Ile(e,t,r,i,s=vh()){return s[0]=e,s[1]=t,s[2]=r,s[3]=i,s}function Tle(e,t=vh()){return t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax,t}function Mle(e,t){return new it({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}function Ele(e,t,r){if(t!=null)if("length"in t)Mb(t)?(r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[2]=Math.max(e[2],t[2]),r[3]=Math.max(e[3],t[3])):t.length!==2&&t.length!==3||(r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[2]=Math.max(e[2],t[0]),r[3]=Math.max(e[3],t[1]));else switch(t.type){case"extent":r[0]=Math.min(e[0],t.xmin),r[1]=Math.min(e[1],t.ymin),r[2]=Math.max(e[2],t.xmax),r[3]=Math.max(e[3],t.ymax);break;case"point":r[0]=Math.min(e[0],t.x),r[1]=Math.min(e[1],t.y),r[2]=Math.max(e[2],t.x),r[3]=Math.max(e[3],t.y)}else ZF(r,e)}function vU(e){return e==null||e[0]>=e[2]?0:e[2]-e[0]}function bU(e){return e==null||e[1]>=e[3]?0:e[3]-e[1]}function Ale(e){return vU(e)*bU(e)}function Cle(e,t=[0,0]){return t[0]=(e[0]+e[2])/2,t[1]=(e[1]+e[3])/2,t}function Ole(e,t,r){return t>=e[0]&&r>=e[1]&&t<=e[2]&&r<=e[3]}function Fle(e,t){return Math.max(t[0],e[0])<=Math.min(t[2],e[2])&&Math.max(t[1],e[1])<=Math.min(t[3],e[3])}function kle(e,t){return t[0]>=e[0]&&t[2]<=e[2]&&t[1]>=e[1]&&t[3]<=e[3]}function Ple(e){return e?ZF(e,MI):vh(MI)}function Mb(e){return e!=null&&e.length===4}function Lle(e,t){return Mb(e)&&Mb(t)?e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]:e===t}const MI=[1/0,1/0,-1/0,-1/0],wU=[0,0,0,0];function YF(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function QF(e){return e.points!==void 0}function KF(e){return e.x!==void 0&&e.y!==void 0}function XF(e){return e.paths!==void 0}function ek(e){return e.rings!==void 0}function tk(e){function t(r,i){return r==null?i:i==null?r:e(r,i)}return t}const _o=tk(Math.min),$o=tk(Math.max);function Nle(e,t){return XF(t)?uc(e,t.paths,!1,!1):ek(t)?uc(e,t.rings,!1,!1):QF(t)?W$(e,t.points,!1,!1,!1,!1):YF(t)?rk(e,t):(KF(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.x,e[3]=t.y),e)}function Rle(e){let t,r,i,s;for(e.reset(),t=i=1/0,r=s=-1/0;e.nextPath();){const n=_U(e);t=Math.min(n[0],t),i=Math.min(n[1],i),r=Math.max(n[2],r),s=Math.max(n[3],s)}return vh([t,i,r,s])}function _U(e){let t,r,i,s;for(t=i=1/0,r=s=-1/0;e.nextPoint();)t=Math.min(e.x,t),i=Math.min(e.y,i),r=Math.max(e.x,r),s=Math.max(e.y,s);return vh([t,i,r,s])}function jle(e,t){return XF(t)?uc(e,t.paths,!0,!1):ek(t)?uc(e,t.rings,!0,!1):QF(t)?W$(e,t.points,!0,!1,!0,!1):YF(t)?rk(e,t,!0,!1,!0,!1):(KF(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.x,e[4]=t.y,e[5]=t.z),e)}function uc(e,t,r,i){const s=r?3:2;if(!t.length||!t[0].length)return null;let n,o,l,c,[p,h]=t[0][0],[f,y]=t[0][0];for(let m=0;m<t.length;m++){const g=t[m];for(let b=0;b<g.length;b++){const w=g[b],[S,x]=w;if(p=_o(p,S),h=_o(h,x),f=$o(f,S),y=$o(y,x),r&&w.length>2){const E=w[2];n=_o(n,E),o=$o(o,E)}if(i&&w.length>s){const E=w[s];l=_o(n,E),c=$o(o,E)}}}return r?i?(e[0]=p,e[1]=h,e[2]=n,e[3]=l,e[4]=f,e[5]=y,e[6]=o,e[7]=c,e.length=8,e):(e[0]=p,e[1]=h,e[2]=n,e[3]=f,e[4]=y,e[5]=o,e.length=6,e):i?(e[0]=p,e[1]=h,e[2]=l,e[3]=f,e[4]=y,e[5]=c,e.length=6,e):(e[0]=p,e[1]=h,e[2]=f,e[3]=y,e.length=4,e)}function rk(e,t,r,i,s,n){const o=t.xmin,l=t.xmax,c=t.ymin,p=t.ymax;let h=t.zmin,f=t.zmax,y=t.mmin,m=t.mmax;return s?(h=h||0,f=f||0,n?(y=y||0,m=m||0,e[0]=o,e[1]=c,e[2]=h,e[3]=y,e[4]=l,e[5]=p,e[6]=f,e[7]=m,e):(e[0]=o,e[1]=c,e[2]=h,e[3]=l,e[4]=p,e[5]=f,e)):n?(y=y||0,m=m||0,e[0]=o,e[1]=c,e[2]=y,e[3]=l,e[4]=p,e[5]=m,e):(e[0]=o,e[1]=c,e[2]=l,e[3]=p,e)}function W$(e,t,r,i,s,n){const o=r?3:2,l=i&&n,c=r&&s;if(!t.length||!t[0].length)return null;let p,h,f,y,[m,g]=t[0],[b,w]=t[0];for(let S=0;S<t.length;S++){const x=t[S],[E,C]=x;if(m=_o(m,E),g=_o(g,C),b=$o(b,E),w=$o(w,C),c&&x.length>2){const P=x[2];p=_o(p,P),h=$o(h,P)}if(l&&x.length>o){const P=x[o];f=_o(p,P),y=$o(h,P)}}return s?(p=p||0,h=h||0,n?(f=f||0,y=y||0,e[0]=m,e[1]=g,e[2]=p,e[3]=f,e[4]=b,e[5]=w,e[6]=h,e[7]=y,e):(e[0]=m,e[1]=g,e[2]=p,e[3]=b,e[4]=w,e[5]=h,e)):n?(f=f||0,y=y||0,e[0]=m,e[1]=g,e[2]=f,e[3]=b,e[4]=w,e[5]=y,e):(e[0]=m,e[1]=g,e[2]=b,e[3]=w,e)}function $U(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function SU(e){return e.points!==void 0}function xU(e){return e.x!==void 0&&e.y!==void 0}function IU(e){return e.paths!==void 0}function TU(e){return e.rings!==void 0}const H$=[];function ik(e,t,r,i){return{xmin:e,ymin:t,xmax:r,ymax:i}}function sk(e,t,r,i,s,n){return{xmin:e,ymin:t,zmin:r,xmax:i,ymax:s,zmax:n}}function nk(e,t,r,i,s,n){return{xmin:e,ymin:t,mmin:r,xmax:i,ymax:s,mmax:n}}function ok(e,t,r,i,s,n,o,l){return{xmin:e,ymin:t,zmin:r,mmin:i,xmax:s,ymax:n,zmax:o,mmax:l}}function J$(e,t=!1,r=!1){return t?r?ok(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]):sk(e[0],e[1],e[2],e[3],e[4],e[5]):r?nk(e[0],e[1],e[2],e[3],e[4],e[5]):ik(e[0],e[1],e[2],e[3])}function Dle(e){return e?$U(e)?e:xU(e)?EU(e):TU(e)?ak(e):IU(e)?lk(e):SU(e)?MU(e):null:null}function MU(e){const{hasZ:t,hasM:r,points:i}=e;return J$(W$(H$,i,t??!1,r??!1),t,r)}function EU(e){const{x:t,y:r,z:i,m:s}=e,n=s!=null;return i!=null?n?ok(t,r,i,s,t,r,i,s):sk(t,r,i,t,r,i):n?nk(t,r,s,t,r,s):ik(t,r,t,r)}function ak(e){const{hasZ:t,hasM:r,rings:i}=e,s=uc(H$,i,t??!1,r??!1);return s?J$(s,t,r):null}function lk(e){const{hasZ:t,hasM:r,paths:i}=e,s=uc(H$,i,t??!1,r??!1);return s?J$(s,t,r):null}var Xf;function EI(e){return!Array.isArray(e[0])}function AU(e){var t;return typeof((t=e[0])==null?void 0:t[0])=="number"}function CU(e){var n,o;if(!e)return;let{rings:t,hasM:r,hasZ:i,spatialReference:s}=e;switch(t??(t=[]),AU(t)&&(t=[t]),(o=(n=t[0])==null?void 0:n[0])==null?void 0:o.length){case 4:i??(i=!0),r??(r=!0);break;case 3:i??(i=r!==!0),r??(r=!i);break;default:i??(i=!1),r??(r=!1)}return s??(s=ge.WGS84),{...e,hasM:r,hasZ:i,rings:t,spatialReference:s}}let Ts=Xf=class extends $l{static fromExtent(e){const t=e.clone().normalize(),{spatialReference:r}=e;let i=!1,s=!1;for(const o of t)o.hasZ&&(i=!0),o.hasM&&(s=!0);const n={rings:t.map(o=>{const l=[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]];if(i&&o.hasZ){const c=o.zmin+.5*(o.zmax-o.zmin);for(let p=0;p<l.length;p++)l[p].push(c)}if(s&&o.hasM){const c=o.mmin+.5*(o.mmax-o.mmin);for(let p=0;p<l.length;p++)l[p].push(c)}return l}),spatialReference:r};return i&&(n.hasZ=!0),s&&(n.hasM=!0),new Xf(n)}constructor(e){super(CU(e)),this.rings=[],this.type="polygon"}get cache(){return this.commitProperty("rings"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get centroid(){const e=cU(this);if(!e||isNaN(e[0])||isNaN(e[1])||this.hasZ&&isNaN(e[2]))return null;const t=new Ye;return t.x=e[0],t.y=e[1],t.spatialReference=this.spatialReference,this.hasZ&&(t.z=e[2]),t}get extent(){const{spatialReference:e}=this,t=ak(this);if(!t)return null;const r=new it(t);return r.spatialReference=e,r}get isSelfIntersecting(){return iU(this.rings)}writeRings(e,t){t.rings=M(this.rings)}addRing(e){if(!e)return;const t=this.rings,r=t.length;if(EI(e)){const i=[];for(let s=0,n=e.length;s<n;s++)i[s]=e[s].toArray();t[r]=i}else t[r]=e.slice();return this.notifyChange("rings"),this}clone(){const e=new Xf;return e.spatialReference=this.spatialReference,e.rings=M(this.rings),e.hasZ=this.hasZ,e.hasM=this.hasM,e}equals(e){if(this===e)return!0;if(e==null)return!1;const t=this.spatialReference,r=e.spatialReference;if(t!=null!=(r!=null)||t!=null&&r!=null&&!t.equals(r)||this.rings.length!==e.rings.length)return!1;const i=([s,n,o,l],[c,p,h,f])=>s===c&&n===p&&(o==null&&h==null||o===h)&&(l==null&&f==null||l===f);for(let s=0;s<this.rings.length;s++){const n=this.rings[s],o=e.rings[s];if(!ig(n,o,i))return!1}return!0}contains(e){if(!e)return!1;const t=DF(e,this.spatialReference);return H7(this,t??e)}isClockwise(e){const t=EI(e)?e.map(r=>this.hasZ?this.hasM?[r.x,r.y,r.z,r.m]:[r.x,r.y,r.z]:[r.x,r.y]):e;return uU(t)}getPoint(e,t){if(!this._validateInputs(e,t))return null;const r=this.rings[e][t],i=this.hasZ,s=this.hasM;return i&&!s?new Ye(r[0],r[1],r[2],void 0,this.spatialReference):s&&!i?new Ye(r[0],r[1],void 0,r[2],this.spatialReference):i&&s?new Ye(r[0],r[1],r[2],r[3],this.spatialReference):new Ye(r[0],r[1],this.spatialReference)}insertPoint(e,t,r){return this._validateInputs(e,t,!0)?(lc(this,r),Array.isArray(r)||(r=r.toArray()),this.rings[e].splice(t,0,r),this.notifyChange("rings"),this):this}removePoint(e,t){if(!this._validateInputs(e,t))return null;const r=new Ye(this.rings[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("rings"),r}removeRing(e){if(!this._validateInputs(e,null))return null;const t=this.rings.splice(e,1)[0],r=this.spatialReference,i=t.map(s=>new Ye(s,r));return this.notifyChange("rings"),i}setPoint(e,t,r){return this._validateInputs(e,t)?(lc(this,r),Array.isArray(r)||(r=r.toArray()),this.rings[e][t]=r,this.notifyChange("rings"),this):this}_validateInputs(e,t,r=!1){if(e==null||e<0||e>=this.rings.length)return!1;if(t!=null){const i=this.rings[e];if(r&&(t<0||t>i.length)||!r&&(t<0||t>=i.length))return!1}return!0}toJSON(e){return this.write({},e)}};a([u({readOnly:!0})],Ts.prototype,"cache",null),a([u({readOnly:!0})],Ts.prototype,"centroid",null),a([u({readOnly:!0})],Ts.prototype,"extent",null),a([u({readOnly:!0})],Ts.prototype,"isSelfIntersecting",null),a([u({type:[[[Number]]],json:{write:{isRequired:!0}}})],Ts.prototype,"rings",void 0),a([B("rings")],Ts.prototype,"writeRings",null),Ts=Xf=a([_("esri.geometry.Polygon")],Ts);const xn=Ts;Ts.prototype.toJSON.isDefaultToJSON=!0;var Eb;function OU(e){return!Array.isArray(e[0])}function FU(e){var t;return typeof((t=e[0])==null?void 0:t[0])=="number"}function kU(e){var n,o;if(!e)return;let{paths:t,hasM:r,hasZ:i,spatialReference:s}=e;switch(t??(t=[]),FU(t)&&(t=[t]),(o=(n=t[0])==null?void 0:n[0])==null?void 0:o.length){case 4:i??(i=!0),r??(r=!0);break;case 3:i??(i=r!==!0),r??(r=!i);break;default:i??(i=!1),r??(r=!1)}return s??(s=ge.WGS84),{...e,hasM:r,hasZ:i,paths:t,spatialReference:s}}let co=Eb=class extends $l{constructor(e){super(kU(e)),this.paths=[],this.type="polyline"}get cache(){return this.commitProperty("paths"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const{spatialReference:e}=this,t=lk(this);if(!t)return null;const r=new it(t);return r.spatialReference=e,r}writePaths(e,t){t.paths=M(this.paths)}addPath(e){if(!e)return;const t=this.paths,r=t.length;if(OU(e)){const i=[];for(let s=0,n=e.length;s<n;s++)i[s]=e[s].toArray();t[r]=i}else t[r]=e.slice();return this.notifyChange("paths"),this}clone(){const e=new Eb;return e.spatialReference=this.spatialReference,e.paths=M(this.paths),e.hasZ=this.hasZ,e.hasM=this.hasM,e}getPoint(e,t){if(!this._validateInputs(e,t))return null;const r=this.paths[e][t],i=this.hasZ,s=this.hasM;return i&&!s?new Ye(r[0],r[1],r[2],void 0,this.spatialReference):s&&!i?new Ye(r[0],r[1],void 0,r[2],this.spatialReference):i&&s?new Ye(r[0],r[1],r[2],r[3],this.spatialReference):new Ye(r[0],r[1],this.spatialReference)}insertPoint(e,t,r){return this._validateInputs(e,t,!0)?(lc(this,r),Array.isArray(r)||(r=r.toArray()),this.paths[e].splice(t,0,r),this.notifyChange("paths"),this):this}removePath(e){if(!this._validateInputs(e,null))return null;const t=this.paths.splice(e,1)[0],r=this.spatialReference,i=t.map(s=>new Ye(s,r));return this.notifyChange("paths"),i}removePoint(e,t){if(!this._validateInputs(e,t))return null;const r=new Ye(this.paths[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("paths"),r}setPoint(e,t,r){return this._validateInputs(e,t)?(lc(this,r),Array.isArray(r)||(r=r.toArray()),this.paths[e][t]=r,this.notifyChange("paths"),this):this}_validateInputs(e,t,r=!1){if(e==null||e<0||e>=this.paths.length)return!1;if(t!=null){const i=this.paths[e];if(r&&(t<0||t>i.length)||!r&&(t<0||t>=i.length))return!1}return!0}toJSON(e){return this.write({},e)}};a([u({readOnly:!0})],co.prototype,"cache",null),a([u({readOnly:!0})],co.prototype,"extent",null),a([u({type:[[[Number]]],json:{write:{isRequired:!0}}})],co.prototype,"paths",void 0),a([B("paths")],co.prototype,"writePaths",null),co=Eb=a([_("esri.geometry.Polyline")],co);const xi=co;co.prototype.toJSON.isDefaultToJSON=!0;const PU=Kt()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),AI=Kt()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"});function uk(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function ck(e){return e.points!==void 0}function dk(e){return e.x!==void 0&&e.y!==void 0}function Z$(e){return e.paths!==void 0}function Ya(e){return e.rings!==void 0}function bh(e){return e==null?null:e instanceof $l?e:dk(e)?Ye.fromJSON(e):Z$(e)?xi.fromJSON(e):Ya(e)?xn.fromJSON(e):ck(e)?Ig.fromJSON(e):uk(e)?it.fromJSON(e):null}function Tg(e){return e?dk(e)?"esriGeometryPoint":Z$(e)?"esriGeometryPolyline":Ya(e)?"esriGeometryPolygon":uk(e)?"esriGeometryEnvelope":ck(e)?"esriGeometryMultipoint":null:null}const LU={esriGeometryPoint:Ye,esriGeometryPolyline:xi,esriGeometryPolygon:xn,esriGeometryEnvelope:it,esriGeometryMultipoint:Ig,esriGeometryMultiPatch:xn};function NU(e){return e&&LU[e]||null}const wh={base:$l,key:"type",typeMap:{extent:it,multipoint:Ig,point:Ye,polyline:xi,polygon:xn}};Ti(wh);const RU=()=>G.getLogger("esri.support.arcadeOnDemand");let P0;function In(){return P0||(P0=(async()=>{const e=await j(()=>import("./arcadeUtils-e4Pa2B2w.js").then(t=>t.as),__vite__mapDeps([2,3,4,5]));return{arcade:e.arcade,arcadeUtils:e,Dictionary:e.Dictionary,Feature:e.arcadeFeature}})()),P0}const jU=(e,t,r)=>pk.create(e,t,r,null,["$feature","$view"],[]),DU=(e,t,r,i)=>pk.create(e,t,r,i,["$feature","$view"],[]);let pk=class hk{constructor(t,r,i,s,n,o,l){this.services=null,this.script=t,this.evaluate=s;const c=Array.isArray(o)?o:o==null?void 0:o.fields;this.fields=c??[],this._syntaxTree=i,this._arcade=r,this._arcadeFeature=n,this._spatialReference=l,this._referencesGeometry=r.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}static async create(t,r,i,s,n,o){const{arcade:l,Feature:c,Dictionary:p}=await In(),h=r instanceof ge?r:ge.fromJSON(r);let f;try{f=l.parseScript(t,o)}catch(q){return RU().error(new O("arcade-bad-expression","Failed to parse arcade script",{script:t,error:q})),null}const y=n.reduce((q,H)=>({...q,[H]:null}),{});let m=null;s!=null&&(m=new p(s),m.immutable=!0,y.$config=null);const g=l.scriptUsesGeometryEngine(f),b=g&&l.enableGeometrySupport(),w=l.scriptUsesFeatureSet(f)&&l.enableFeatureSetSupport(),S=l.scriptIsAsync(f),x=S&&l.enableAsyncSupport(),E={vars:y,spatialReference:h,useAsync:!!x};await Promise.all([b,w,x]);const C=new Set;await l.loadDependentModules(C,f,null,S,g);const P=new p;P.immutable=!1,P.setField("scale",0);const L=l.compileScript(f,E),V=(q,H)=>{var se;const Y=(se=q.$view)==null?void 0:se.timeZone;return"$view"in q&&q.$view&&(P.setField("scale",typeof q.$view=="object"&&"scale"in q.$view?q.$view.scale:void 0),q.$view=P),m&&(q.$config=m),L({vars:q,spatialReference:h,services:H,timeZone:Y})};return new hk(t,l,f,V,new c,i,h)}repurposeFeature(t){return t.geometry&&!t.geometry.spatialReference&&(t.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(t.geometry,t.attributes,{fields:this.fields}),this._arcadeFeature}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}};const VU=/^([0-9_])/,UU=/[^a-z0-9_\u0080-\uffff]+/gi;function zU(e){return e==null?null:e.trim().replaceAll(UU,"_").replace(VU,"F$1")||null}const qU=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],GU=["field","normalizationField"];function CI(e,t){if(e!=null&&t!=null){for(const r of Array.isArray(e)?e:[e])if(OI(qU,r,t),"visualVariables"in r&&r.visualVariables)for(const i of r.visualVariables)OI(GU,i,t)}}function OI(e,t,r){if(e)for(const i of e){const s=sh(i,t),n=s&&typeof s!="function"&&r.get(s);n&&pr(i,n.name,t)}}function fk(e,t){var r;if(e!=null&&((r=t==null?void 0:t.fields)!=null&&r.length))if("startField"in e){const i=t.get(e.startField),s=t.get(e.endField);e.startField=(i==null?void 0:i.name)??null,e.endField=(s==null?void 0:s.name)??null}else{const i=t.get(e.startTimeField),s=t.get(e.endTimeField);e.startTimeField=(i==null?void 0:i.name)??null,e.endTimeField=(s==null?void 0:s.name)??null}}const L0=new Set;function Y$(e,t){return e&&t?(L0.clear(),Mg(L0,e,t),Array.from(L0).sort()):[]}function Mg(e,t,r){var i;if(r)if((i=t==null?void 0:t.fields)!=null&&i.length)if(r.includes("*"))for(const{name:s}of t.fields)e.add(s);else for(const s of r)ri(e,t,s);else{if(r.includes("*"))return e.clear(),void e.add("*");for(const s of r)s!=null&&e.add(s)}}function ri(e,t,r){if(typeof r=="string")if(t){const i=t.get(r);i&&e.add(i.name)}else e.add(r)}function Vle(e,t){return t==null||e==null?[]:t.includes("*")?(e.fields??[]).map(r=>r.name):t}async function us(e,t,r){var n;if(!r)return;const{arcadeUtils:i}=await In(),s=i.extractFieldNames(r,(n=t==null?void 0:t.fields)==null?void 0:n.map(o=>o.name));for(const o of s)ri(e,t,o)}function BU({displayField:e,fields:t}){return e||(t!=null&&t.length?N0(t,"name-or-title")||N0(t,"unique-identifier")||N0(t,"type-or-category")||WU(t):null)}function WU(e){for(const t of e){if(!(t!=null&&t.name))continue;const r=t.name.toLowerCase();if(r.includes("name")||r.includes("title"))return t.name}return null}function N0(e,t){for(const r of e)if(r!=null&&r.valueType&&r.valueType===t)return r.name;return null}function Ule(e){return e?Y$(e.fieldsIndex,yk(e)):[]}function HU(e){if(!e)return[];const t=e.geometryFieldsInfo;return t?Y$(e.fieldsIndex,[t.shapeAreaField,t.shapeLengthField]):[]}const JU=new Set(["oid","global-id","guid"]),ZU=new Set(["oid","global-id"]),YU=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^shape$/i,/^shape_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/perimeter/i,/objectid/i,/_i$/i];function QU(e){const t=new Set;mk(e).forEach(i=>t.add(i)),HU(e).forEach(i=>t.add(i.toLowerCase()));const r=e&&"infoFor3D"in e?e.infoFor3D:void 0;return r&&(Object.values(r.assetMapFieldRoles).forEach(i=>t.add(i.toLowerCase())),Object.values(r.transformFieldRoles).forEach(i=>t.add(i.toLowerCase()))),Array.from(t)}function yk(e){if(!e)return[];const t="editFieldsInfo"in e&&e.editFieldsInfo;if(!t)return[];const{creationDateField:r,creatorField:i,editDateField:s,editorField:n}=t;return[r,i,s,n].filter(Boolean)}function mk(e){return yk(e).map(t=>t.toLowerCase())}function KU(e,t){var r;return e.editable&&!JU.has(e.type)&&!mk(t).includes(((r=e.name)==null?void 0:r.toLowerCase())??"")}function XU(e,t){var i;const r=((i=e.name)==null?void 0:i.toLowerCase())??"";return!((t==null?void 0:t.objectIdField)!=null&&r===t.objectIdField.toLowerCase()||(t==null?void 0:t.globalIdField)!=null&&r===t.globalIdField.toLowerCase()||QU(t).includes(r)||ZU.has(e.type)||YU.some(s=>s.test(r)))}function ez(e){const t=e.defaultValue;return t!==void 0&&bk(e,t)?t:e.nullable?null:void 0}function zle(e){const t=typeof e=="string"?{type:e}:e;return _k(t)?255:t.type==="esriFieldTypeDate"||t.type==="date"?8:void 0}function gk(e){return typeof e=="number"&&!isNaN(e)&&isFinite(e)}function tz(e){return e===null||gk(e)}function rz(e){return e===null||Number.isInteger(e)}function vk(e){return e!=null&&typeof e=="string"}function iz(e){return e===null||vk(e)}function sz(){return!0}function bk(e,t){let r;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"big-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":case"esriFieldTypeBigInteger":r=e.nullable?rz:Number.isInteger;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":r=e.nullable?tz:gk;break;case"string":case"esriFieldTypeString":r=e.nullable?iz:vk;break;default:r=sz}return arguments.length===1?r:r(t)}const nz=["integer","small-integer","big-integer"],oz=["single","double"],az=["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeBigInteger"],lz=["esriFieldTypeSingle","esriFieldTypeDouble"],wk=new Set([...nz,...az]),uz=new Set([...oz,...lz]),cz=c6(wk,uz);function dz(e){return e!=null&&wk.has(e.type)}function Q$(e){return e!=null&&cz.has(e.type)}function _k(e){return e!=null&&(e.type==="string"||e.type==="esriFieldTypeString")}function $k(e){return e!=null&&(e.type==="date"||e.type==="esriFieldTypeDate")}function pz(e){return e!=null&&(e.type==="date-only"||e.type==="esriFieldTypeDateOnly")}function hz(e){return e!=null&&(e.type==="timestamp-offset"||e.type==="esriFieldTypeTimestampOffset")}function Sk(e){return e!=null&&(e.type==="time-only"||e.type==="esriFieldTypeTimeOnly")}function FI(e){return e!=null&&(e.type==="oid"||e.type==="esriFieldTypeOID")}function kI(e){return e!=null&&(e.type==="global-id"||e.type==="esriFieldTypeGlobalID")}function qle(e,t){return fz(e,t)===null}var Cm,Om;function Gle(e){return e==null||typeof e=="number"&&isNaN(e)?null:e}function fz(e,t){return e==null||e.nullable&&t===null?null:Q$(e)&&!yz(e.type,Number(t))?Cm.OUT_OF_RANGE:bk(e,t)?e.domain?l7(e,t):null:Om.INVALID_TYPE}function yz(e,t){const r=typeof e=="string"?xk(e):e;if(!r)return!1;const i=r.min,s=r.max;return r.isInteger?Number.isInteger(t)&&t>=i&&t<=s:t>=i&&t<=s}function xk(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return mz;case"esriFieldTypeInteger":case"integer":return gz;case"esriFieldTypeBigInteger":case"big-integer":return vz;case"esriFieldTypeSingle":case"single":return bz;case"esriFieldTypeDouble":case"double":return wz}}(function(e){e.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"})(Cm||(Cm={})),function(e){e.INVALID_TYPE="type-validation-error::invalid-type"}(Om||(Om={}));const mz={min:-32768,max:32767,isInteger:!0,rawMin:-32768,rawMax:32767},gz={min:-2147483648,max:2147483647,isInteger:!0,rawMin:-2147483648,rawMax:2147483647},vz={min:-Number.MAX_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,isInteger:!0,rawMin:-Number.MAX_SAFE_INTEGER,rawMax:Number.MAX_SAFE_INTEGER},bz={min:-34e37,max:12e37,isInteger:!1,rawMin:-34e37,rawMax:12e37},wz={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1,rawMin:-Number.MAX_VALUE,rawMax:Number.MAX_VALUE};function Ble(e,t,r){switch(e){case sc.INVALID_CODED_VALUE:return`Value ${r} is not in the coded domain - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case sc.VALUE_OUT_OF_RANGE:return`Value ${r} is out of the range of valid values - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case Om.INVALID_TYPE:return`Value ${r} is not a valid value for the field type - field: ${t.name}, type: ${t.type}, nullable: ${t.nullable}`;case Cm.OUT_OF_RANGE:{const{min:i,max:s}=xk(t.type);return`Value ${r} is out of range for the number type - field: ${t.name}, type: ${t.type}, value range is ${i} to ${s}`}}}function _z(e,t){return!$z(e,t,null)}function $z(e,t,r){if(!(t!=null&&t.attributes)||!e)return!0;const i=new Set(Object.keys(t.attributes));let s=!1;for(const n of e)if(!i.has(n)&&(s=!0,r==null))break;return s}function Ab(e){return!!e&&["raster.itempixelvalue","raster.servicepixelvalue"].some(t=>e.toLowerCase().startsWith(t))}function Ik(e){const t=e==null?void 0:e.match(/{[^}]+}/g);return t?t.map(r=>r.slice(1,-1).split(":")[0].trim()):[]}let ey=class extends R{constructor(t){super(t),this.type=null}};a([u({type:["attachments","custom","fields","media","text","expression","relationship","utility-network-associations"],readOnly:!0,json:{read:!1,write:!0}})],ey.prototype,"type",void 0),ey=a([_("esri.popup.content.Content")],ey);const Tn=ey;var Cb;let ia=Cb=class extends Tn{constructor(e){super(e),this.description=null,this.displayType="auto",this.title=null,this.type="attachments"}clone(){return new Cb({description:this.description,displayType:this.displayType,title:this.title})}};a([u({type:String,json:{write:!0}})],ia.prototype,"description",void 0),a([u({type:["auto","preview","list"],json:{write:!0}})],ia.prototype,"displayType",void 0),a([u({type:String,json:{write:!0}})],ia.prototype,"title",void 0),a([u({type:["attachments"],readOnly:!0,json:{read:!1,write:!0}})],ia.prototype,"type",void 0),ia=Cb=a([_("esri.popup.content.AttachmentsContent")],ia);const cc=ia;var Ob;let sa=Ob=class extends Tn{constructor(e){super(e),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new Ob({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?M(this.outFields):null})}};a([u()],sa.prototype,"creator",void 0),a([u()],sa.prototype,"destroyer",void 0),a([u()],sa.prototype,"outFields",void 0),a([u({type:["custom"],readOnly:!0})],sa.prototype,"type",void 0),sa=Ob=a([_("esri.popup.content.CustomContent")],sa);const Fb=sa;var kb;let Gl=kb=class extends R{constructor(e){super(e),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new kb({title:this.title,expression:this.expression})}};a([u({type:String,json:{write:!0}})],Gl.prototype,"title",void 0),a([u({type:String,json:{write:!0}})],Gl.prototype,"expression",void 0),a([u({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],Gl.prototype,"returnType",void 0),Gl=kb=a([_("esri.popup.ElementExpressionInfo")],Gl);const Tk=Gl;var Pb;let hd=Pb=class extends Tn{constructor(e){super(e),this.expressionInfo=null,this.type="expression"}clone(){var e;return new Pb({expressionInfo:(e=this.expressionInfo)==null?void 0:e.clone()})}};a([u({type:Tk,json:{write:!0}})],hd.prototype,"expressionInfo",void 0),a([u({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],hd.prototype,"type",void 0),hd=Pb=a([_("esri.popup.content.ExpressionContent")],hd);const Qa=hd;function re(e,t={}){const r=e instanceof ve?e:new ve(e,t),{alwaysWriteDefaults:i,default:s,ignoreUnknown:n=!0,name:o,nonNullable:l,readOnly:c=!1}=t;return u({type:n?r.apiValues:String,json:{type:r.jsonValues,default:s,name:o,read:!c&&{reader:r.read},write:{writer:r.write,alwaysWriteDefaults:i}},nonNullable:l,readOnly:c})}let Bl=class extends Oe(R){constructor(t){super(t),this.dateFormat=null,this.digitSeparator=!1,this.places=null}};a([re(D8)],Bl.prototype,"dateFormat",void 0),a([u({type:Boolean,json:{write:!0}})],Bl.prototype,"digitSeparator",void 0),a([u({type:je,json:{write:!0}})],Bl.prototype,"places",void 0),Bl=a([_("esri.popup.support.FieldInfoFormat")],Bl);const pp=Bl;var Lb;let Pi=Lb=class extends R{constructor(e){super(e),this.fieldName=null,this.format=void 0,this.isEditable=!0,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){var e;return new Lb({fieldName:this.fieldName,format:(e=this.format)==null?void 0:e.clone(),isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};a([u({type:String,json:{write:!0}})],Pi.prototype,"fieldName",void 0),a([u({type:pp,json:{write:!0}})],Pi.prototype,"format",void 0),a([u({type:Boolean,json:{write:{alwaysWriteDefaults:!0},default:!0}})],Pi.prototype,"isEditable",void 0),a([u({type:String,json:{write:!0}})],Pi.prototype,"label",void 0),a([re(new ve({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],Pi.prototype,"stringFieldOption",void 0),a([u({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],Pi.prototype,"statisticType",void 0),a([u({type:String,json:{write:!0}})],Pi.prototype,"tooltip",void 0),a([u({type:Boolean,json:{write:!0}})],Pi.prototype,"visible",void 0),Pi=Lb=a([_("esri.popup.FieldInfo")],Pi);const Mc=Pi;var Nb;let Ws=Nb=class extends Tn{constructor(e){super(e),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}writeFieldInfos(e,t){t.fieldInfos=e&&e.map(r=>r.toJSON())}clone(){return new Nb(M({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};a([u({type:Object,json:{write:!0}})],Ws.prototype,"attributes",void 0),a([u({type:String,json:{write:!0}})],Ws.prototype,"description",void 0),a([u({type:[Mc]})],Ws.prototype,"fieldInfos",void 0),a([B("fieldInfos")],Ws.prototype,"writeFieldInfos",null),a([u({type:String,json:{write:!0}})],Ws.prototype,"title",void 0),a([u({type:["fields"],readOnly:!0,json:{read:!1,write:!0}})],Ws.prototype,"type",void 0),Ws=Nb=a([_("esri.popup.content.FieldsContent")],Ws);const ul=Ws;let na=class extends R{constructor(t){super(t),this.altText=null,this.caption="",this.title="",this.type=null}};a([u({type:String,json:{write:!0}})],na.prototype,"altText",void 0),a([u({type:String,json:{write:!0}})],na.prototype,"caption",void 0),a([u({type:String,json:{write:!0}})],na.prototype,"title",void 0),a([u({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],na.prototype,"type",void 0),na=a([_("esri.popup.content.mixins.MediaInfo")],na);const K$=na,Fm={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function Mk(e){return!!Fm[e]||!!Fm[e.toLowerCase()]}function X$(e){return Fm[e]??Fm[e.toLowerCase()]}function Sz(e){return[...X$(e)]}function R0(e,t,r){r<0&&++r,r>1&&--r;const i=6*r;return i<1?e+(t-e)*i:2*r<1?t:3*r<2?e+(t-e)*(2/3-r)*6:e}function Ek(e,t,r,i=1){const s=(e%360+360)%360/360,n=r<=.5?r*(t+1):r+t-r*t,o=2*r-n;return[Math.round(255*R0(o,n,s+1/3)),Math.round(255*R0(o,n,s)),Math.round(255*R0(o,n,s-1/3)),i]}function xz(e){const t=e.length>5,r=t?8:4,i=(1<<r)-1,s=t?1:17,n=t?e.length===9:e.length===5;let o=+("0x"+e.slice(1));if(isNaN(o))return null;const l=[0,0,0,1];let c;return n&&(c=o&i,o>>=r,l[3]=s*c/255),c=o&i,o>>=r,l[2]=s*c,c=o&i,o>>=r,l[1]=s*c,c=o&i,o>>=r,l[0]=s*c,l}function ef(e){return _l(f$(e),0,255)}function tf(e,t,r){return e=Number(e),isNaN(e)?r:e<t?t:e>r?r:e}function rf(e,t){const r=e.toString(16).padStart(2,"0");return t?r.slice(0,1):r}let Rb=class At{static blendColors(t,r,i,s=new At){return s.r=Math.round(t.r+(r.r-t.r)*i),s.g=Math.round(t.g+(r.g-t.g)*i),s.b=Math.round(t.b+(r.b-t.b)*i),s.a=t.a+(r.a-t.a)*i,s._sanitize()}static fromRgb(t,r){const i=t.toLowerCase().match(/^(rgba?|hsla?)\(([\s.\-,%0-9]+)\)/);if(i){const s=i[2].split(/\s*,\s*/),n=i[1];if(n==="rgb"&&s.length===3||n==="rgba"&&s.length===4){const o=s[0];if(o.charAt(o.length-1)==="%"){const l=s.map(c=>2.56*parseFloat(c));return s.length===4&&(l[3]=parseFloat(s[3])),At.fromArray(l,r)}return At.fromArray(s.map(l=>parseFloat(l)),r)}if(n==="hsl"&&s.length===3||n==="hsla"&&s.length===4)return At.fromArray(Ek(parseFloat(s[0]),parseFloat(s[1])/100,parseFloat(s[2])/100,parseFloat(s[3])),r)}return null}static fromHex(t,r=new At){if(t[0]!=="#"||isNaN(+`0x${t.slice(1)}`))return null;switch(t.length){case 4:case 5:{const i=parseInt(t.slice(1,2),16),s=parseInt(t.slice(2,3),16),n=parseInt(t.slice(3,4),16),o=t.length===5?15:parseInt(t.slice(4),16);return At.fromArray([i+16*i,s+16*s,n+16*n,(o+16*o)/255],r)}case 7:case 9:{const i=parseInt(t.slice(1,3),16),s=parseInt(t.slice(3,5),16),n=parseInt(t.slice(5,7),16),o=t.length===7?255:parseInt(t.slice(7),16);return At.fromArray([i,s,n,o/255],r)}default:return null}}static fromArray(t,r=new At){return r._set(Number(t[0]),Number(t[1]),Number(t[2]),Number(t[3])),isNaN(r.a)&&(r.a=1),r._sanitize()}static fromString(t,r){const i=Mk(t)?X$(t):null;return i&&At.fromArray(i,r)||At.fromRgb(t,r)||At.fromHex(t,r)}static fromJSON(t){return t!=null?new At([t[0],t[1],t[2],(t[3]??255)/255]):void 0}static toUnitRGB(t){return t!=null?[t.r/255,t.g/255,t.b/255]:null}static toUnitRGBA(t){return t!=null?[t.r/255,t.g/255,t.b/255,t.a!=null?t.a:1]:null}constructor(t){this.r=255,this.g=255,this.b=255,this.a=1,t&&this.setColor(t)}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(t){return typeof t=="string"?At.fromString(t,this):Array.isArray(t)?At.fromArray(t,this):(this._set(t.r??0,t.g??0,t.b??0,t.a??1),t instanceof At||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(t){const r=(t==null?void 0:t.capitalize)??!1,i=(t==null?void 0:t.digits)??6,s=i===3||i===4,n=i===4||i===8,o=`#${rf(this.r,s)}${rf(this.g,s)}${rf(this.b,s)}${n?rf(Math.round(255*this.a),s):""}`;return r?o.toUpperCase():o}toCss(t=!1){const r=this.r+", "+this.g+", "+this.b;return t?`rgba(${r}, ${this.a})`:`rgb(${r})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(t=At.AlphaMode.ALWAYS){const r=ef(this.r),i=ef(this.g),s=ef(this.b);return t===At.AlphaMode.ALWAYS||this.a!==1?[r,i,s,ef(255*this.a)]:[r,i,s]}clone(){return new At(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(t){return t!=null&&t.r===this.r&&t.g===this.g&&t.b===this.b&&t.a===this.a}_sanitize(){return this.r=Math.round(tf(this.r,0,255)),this.g=Math.round(tf(this.g,0,255)),this.b=Math.round(tf(this.b,0,255)),this.a=tf(this.a,0,1),this}_set(t,r,i,s){this.r=t,this.g=r,this.b=i,this.a=s}};Rb.prototype.declaredClass="esri.Color",function(e){var t;(t=e.AlphaMode||(e.AlphaMode={}))[t.ALWAYS=0]="ALWAYS",t[t.UNLESS_OPAQUE=1]="UNLESS_OPAQUE"}(Rb);const ee=Rb;var jb;let oa=jb=class extends $e{constructor(e){super(e),this.color=null,this.fieldName=null,this.tooltip=null,this.value=null}clone(){var e;return new jb({color:(e=this.color)==null?void 0:e.clone(),fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};a([u()],oa.prototype,"color",void 0),a([u()],oa.prototype,"fieldName",void 0),a([u()],oa.prototype,"tooltip",void 0),a([u()],oa.prototype,"value",void 0),oa=jb=a([_("esri.popup.content.support.ChartMediaInfoValueSeries")],oa);const Ak=oa;var Db;let Wn=Db=class extends R{constructor(e){super(e),this.colors=null,this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new Db({colors:M(this.colors),fields:M(this.fields),normalizeField:this.normalizeField,series:M(this.series),tooltipField:this.tooltipField})}};a([u({type:[ee],json:{type:[[je]],write:!0}})],Wn.prototype,"colors",void 0),a([u({type:[String],json:{write:!0}})],Wn.prototype,"fields",void 0),a([u({type:String,json:{write:!0}})],Wn.prototype,"normalizeField",void 0),a([u({type:[Ak],json:{read:!1}})],Wn.prototype,"series",void 0),a([u({type:String,json:{write:!0}})],Wn.prototype,"tooltipField",void 0),Wn=Db=a([_("esri.popup.content.support.ChartMediaInfoValue")],Wn);const Iz=Wn;let fd=class extends K${constructor(t){super(t),this.type=null,this.value=void 0}};a([u({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],fd.prototype,"type",void 0),a([u({type:Iz,json:{write:!0}})],fd.prototype,"value",void 0),fd=a([_("esri.popup.content.mixins.ChartMediaInfo")],fd);const Eg=fd,Ag=Kt()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var Vb;let ty=Vb=class extends Eg{constructor(e){super(e),this.type="bar-chart"}clone(){var e;return new Vb({altText:this.altText,title:this.title,caption:this.caption,value:(e=this.value)==null?void 0:e.clone()})}};a([u({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:Ag.write}})],ty.prototype,"type",void 0),ty=Vb=a([_("esri.popup.content.BarChartMediaInfo")],ty);const Ck=ty;var Ub;let ry=Ub=class extends Eg{constructor(e){super(e),this.type="column-chart"}clone(){var e;return new Ub({altText:this.altText,title:this.title,caption:this.caption,value:(e=this.value)==null?void 0:e.clone()})}};a([u({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:Ag.write}})],ry.prototype,"type",void 0),ry=Ub=a([_("esri.popup.content.ColumnChartMediaInfo")],ry);const Ok=ry;var zb;let yd=zb=class extends R{constructor(e){super(e),this.linkURL=null,this.sourceURL=null}clone(){return new zb({linkURL:this.linkURL,sourceURL:this.sourceURL})}};a([u({type:String,json:{write:!0}})],yd.prototype,"linkURL",void 0),a([u({type:String,json:{write:!0}})],yd.prototype,"sourceURL",void 0),yd=zb=a([_("esri.popup.content.support.ImageMediaInfoValue")],yd);const Tz=yd;var qb;let Wl=qb=class extends K${constructor(e){super(e),this.refreshInterval=0,this.type="image",this.value=void 0}clone(){var e;return new qb({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:(e=this.value)==null?void 0:e.clone()})}};a([u({type:Number,json:{write:!0}})],Wl.prototype,"refreshInterval",void 0),a([u({type:["image"],readOnly:!0,json:{read:!1,write:!0}})],Wl.prototype,"type",void 0),a([u({type:Tz,json:{write:!0}})],Wl.prototype,"value",void 0),Wl=qb=a([_("esri.popup.content.ImageMediaInfo")],Wl);const Fk=Wl;var Gb;let iy=Gb=class extends Eg{constructor(e){super(e),this.type="line-chart"}clone(){var e;return new Gb({altText:this.altText,title:this.title,caption:this.caption,value:(e=this.value)==null?void 0:e.clone()})}};a([u({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:Ag.write}})],iy.prototype,"type",void 0),iy=Gb=a([_("esri.popup.content.LineChartMediaInfo")],iy);const kk=iy;var Bb;let sy=Bb=class extends Eg{constructor(e){super(e),this.type="pie-chart"}clone(){var e;return new Bb({altText:this.altText,title:this.title,caption:this.caption,value:(e=this.value)==null?void 0:e.clone()})}};a([u({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:Ag.write}})],sy.prototype,"type",void 0),sy=Bb=a([_("esri.popup.content.PieChartMediaInfo")],sy);const Pk=sy,Wb={base:K$,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":Ck,"column-chart":Ok,"line-chart":kk,"pie-chart":Pk,image:Fk}};var Hb;let Li=Hb=class extends Tn{constructor(e){super(e),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(e){return e&&e.map(t=>t.type==="image"?Fk.fromJSON(t):t.type==="barchart"?Ck.fromJSON(t):t.type==="columnchart"?Ok.fromJSON(t):t.type==="linechart"?kk.fromJSON(t):t.type==="piechart"?Pk.fromJSON(t):void 0).filter(Boolean)}writeMediaInfos(e,t){t.mediaInfos=e&&e.map(r=>r.toJSON())}clone(){return new Hb(M({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};a([u()],Li.prototype,"activeMediaInfoIndex",void 0),a([u({type:Object,json:{write:!0}})],Li.prototype,"attributes",void 0),a([u({type:String,json:{write:!0}})],Li.prototype,"description",void 0),a([u({types:[Wb]})],Li.prototype,"mediaInfos",void 0),a([D("mediaInfos")],Li.prototype,"readMediaInfos",null),a([B("mediaInfos")],Li.prototype,"writeMediaInfos",null),a([u({type:String,json:{write:!0}})],Li.prototype,"title",void 0),a([u({type:["media"],readOnly:!0,json:{read:!1,write:!0}})],Li.prototype,"type",void 0),Li=Hb=a([_("esri.popup.content.MediaContent")],Li);const dc=Li;var Jb;let md=Jb=class extends R{constructor(e){super(e),this.field=null,this.order=null}clone(){return new Jb({field:this.field,order:this.order})}};a([u({type:String,json:{write:!0}})],md.prototype,"field",void 0),a([u({type:["asc","desc"],json:{write:!0}})],md.prototype,"order",void 0),md=Jb=a([_("esri.popup.support.RelatedRecordsInfoFieldOrder")],md);const eS=md;let ys=class extends Oe(Tn){constructor(t){super(t),this.description=null,this.displayCount=null,this.displayType="list",this.orderByFields=null,this.relationshipId=null,this.title=null,this.type="relationship"}};a([u({type:String,json:{write:!0}})],ys.prototype,"description",void 0),a([u({type:Number,json:{type:je,write:!0}})],ys.prototype,"displayCount",void 0),a([u({type:["list"],json:{write:!0}})],ys.prototype,"displayType",void 0),a([u({type:[eS],json:{write:!0}})],ys.prototype,"orderByFields",void 0),a([u({type:Number,json:{type:je,write:!0}})],ys.prototype,"relationshipId",void 0),a([u({type:String,json:{write:!0}})],ys.prototype,"title",void 0),a([u({type:["relationship"],readOnly:!0,json:{read:!1,write:!0}})],ys.prototype,"type",void 0),ys=a([_("esri.popup.content.RelationshipContent")],ys);const Up=ys;var Zb;let gd=Zb=class extends Tn{constructor(e){super(e),this.text=null,this.type="text"}clone(){return new Zb({text:this.text})}};a([u({type:String,json:{write:!0}})],gd.prototype,"text",void 0),a([u({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],gd.prototype,"type",void 0),gd=Zb=a([_("esri.popup.content.TextContent")],gd);const cl=gd;let ms=class extends Oe(R){constructor(t){super(t),this.title=null,this.description=null,this.type=null,this.open=!1,this.associatedNetworkSourceId=null,this.associatedAssetGroup=null,this.associatedAssetType=null}};a([u({type:String,json:{write:!0}})],ms.prototype,"title",void 0),a([u({type:String,json:{write:!0}})],ms.prototype,"description",void 0),a([u({type:["attachment","connectivity","container","content","structure"],json:{write:!0}})],ms.prototype,"type",void 0),a([u({type:Boolean,json:{read:!1}})],ms.prototype,"open",void 0),a([u({type:Number,json:{type:je,write:!0}})],ms.prototype,"associatedNetworkSourceId",void 0),a([u({type:Number,json:{type:je,write:!0}})],ms.prototype,"associatedAssetGroup",void 0),a([u({type:Number,json:{type:je,write:!0}})],ms.prototype,"associatedAssetType",void 0),ms=a([_("esri.popup.support.UtilityNetworkAssociationType")],ms);const Mz=ms;let aa=class extends Oe(Tn){constructor(t){super(t),this.description=null,this.title=null,this.associationTypes=[],this.type="utility-network-associations"}};a([u({type:String,json:{write:!0}})],aa.prototype,"description",void 0),a([u({type:String,json:{write:!0}})],aa.prototype,"title",void 0),a([u({type:[Mz],json:{write:!0}})],aa.prototype,"associationTypes",void 0),a([re({utilityNetworkAssociations:"utility-network-associations"})],aa.prototype,"type",void 0),aa=a([_("esri.popup.content.UtilityNetworkAssociationsContent")],aa);const tS=aa,Ez={base:null,key:"type",typeMap:{attachment:cc,media:dc,text:cl,expression:Qa,field:ul,relationship:Up,utilityNetworkAssociations:tS}},Az={base:null,key:"type",typeMap:{attachment:cc,media:dc,text:cl,expression:Qa,field:ul,relationship:Up}};var Yb;let la=Yb=class extends R{constructor(e){super(e),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new Yb({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};a([u({type:String,json:{write:!0}})],la.prototype,"name",void 0),a([u({type:String,json:{write:!0}})],la.prototype,"title",void 0),a([u({type:String,json:{write:!0}})],la.prototype,"expression",void 0),a([u({type:["string","number"],json:{write:!0}})],la.prototype,"returnType",void 0),la=Yb=a([_("esri.popup.ExpressionInfo")],la);const Lk=la;var Qb;let vd=Qb=class extends R{constructor(e){super(e),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new Qb({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};a([u({type:Boolean,json:{write:!0}})],vd.prototype,"returnTopmostRaster",void 0),a([u({type:Boolean,json:{write:!0}})],vd.prototype,"showNoDataRecords",void 0),vd=Qb=a([_("esri.popup.LayerOptions")],vd);const Cz=vd;var Kb;let bd=Kb=class extends R{constructor(e){super(e),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new Kb({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?M(this.orderByFields):null})}};a([u({type:Boolean,json:{write:!0}})],bd.prototype,"showRelatedRecords",void 0),a([u({type:[eS],json:{write:!0}})],bd.prototype,"orderByFields",void 0),bd=Kb=a([_("esri.popup.RelatedRecordsInfo")],bd);const PI=bd;let Nk=0;const Ec=e=>{let t=class extends e{constructor(...r){super(...r),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+Nk++})}};return t=a([_("esri.core.Identifiable")],t),t},Xle=e=>{let t=class extends e{constructor(...r){super(...r),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Nk++})}};return t=a([_("esri.core.Identifiable.NumericIdentifiable")],t),t};let LI=class extends Ec(class{}){};LI=a([_("esri.core.Identifiable")],LI);var Xb;let pi=Xb=class extends Ec($e){constructor(e){super(e),this.active=!1,this.className=null,this.disabled=!1,this.icon=null,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new Xb({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};a([u()],pi.prototype,"active",void 0),a([u()],pi.prototype,"className",void 0),a([u()],pi.prototype,"disabled",void 0),a([u()],pi.prototype,"icon",void 0),a([u()],pi.prototype,"id",void 0),a([u()],pi.prototype,"indicator",void 0),a([u()],pi.prototype,"title",void 0),a([u()],pi.prototype,"type",void 0),a([u()],pi.prototype,"visible",void 0),pi=Xb=a([_("esri.support.actions.ActionBase")],pi);const Cg=pi;var e1;let ny=e1=class extends Cg{constructor(e){super(e),this.image=null,this.type="button"}clone(){return new e1({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};a([u()],ny.prototype,"image",void 0),ny=e1=a([_("esri.support.actions.ActionButton")],ny);const Ac=ny;var t1;let wd=t1=class extends Cg{constructor(e){super(e),this.image=null,this.type="toggle",this.value=!1}clone(){return new t1({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};a([u()],wd.prototype,"image",void 0),a([u()],wd.prototype,"value",void 0),wd=t1=a([_("esri.support.actions.ActionToggle")],wd);const rS=wd,Kc="relationships/",NI="expression/",Oz=ne.ofType({key:"type",defaultKeyValue:"button",base:Cg,typeMap:{button:Ac,toggle:rS}}),Fz={base:Tn,key:"type",typeMap:{media:dc,custom:Fb,text:cl,attachments:cc,fields:ul,expression:Qa,relationship:Up,utilityNetworkAssociations:tS}},Rk=new Set(["attachments","fields","media","text","expression","relationship"]),kz=new Set([...Rk,"utility-network-associations"]);let bt=class extends Oe(R){constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title=""}castContent(t){return Array.isArray(t)?t.map(r=>Ti(Fz,r)):typeof t=="string"||typeof t=="function"||t instanceof HTMLElement||ch(t)?t:(G.getLogger(this).error("content error","unsupported content value",{value:t}),null)}readContent(t,r){const{popupElements:i}=r;return Array.isArray(i)&&i.length>0?this._readPopupInfoElements(r.description,r.mediaInfos,i):this._readPopupInfo(r)}writeWebSceneContent(t,r,i,s){this._writePopupTemplateContent(t,r,s)}writeWebMapContent(t,r,i,s){this._writePopupTemplateContent(t,r,s)}writeFieldInfos(t,r,i,s){const{content:n}=this,o=Array.isArray(n)?n:null;if(t){const l=o?o.filter(p=>p.type==="fields"):[],c=l.length&&l.every(p=>{var h;return(h=p.fieldInfos)==null?void 0:h.length});r.fieldInfos=t.filter(Boolean).map(p=>{const h=p.toJSON(s);return c&&(h.visible=!1),h})}if(o)for(const l of o)l.type==="fields"&&this._writeFieldsContent(l,r)}writeLayerOptions(t,r,i,s){r[i]=!t||t.showNoDataRecords===null&&t.returnTopmostRaster===null?null:t.toJSON(s)}writeTitle(t,r){r.title=t||""}async collectRequiredFields(t,r){const i=this.expressionInfos||[];await this._collectExpressionInfoFields(t,r,[...i,...this._getContentExpressionInfos(this.content,i)]),Mg(t,r,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(t){const r=new Set;return await this.collectRequiredFields(r,t),[...r].sort()}_writePopupTemplateContent(t,r,i){typeof t!="string"?Array.isArray(t)&&(r.popupElements=t.filter(s=>(i==null?void 0:i.origin)==="web-scene"?Rk.has(s.type):kz.has(s.type)).map(s=>s==null?void 0:s.toJSON(i)),r.popupElements.forEach(s=>{s.type==="attachments"?this._writeAttachmentContent(r):s.type==="media"?this._writeMediaContent(s,r):s.type==="text"?this._writeTextContent(s,r):s.type==="relationship"&&this._writeRelationshipContent(s,r)})):r.description=t}_writeFieldsContent(t,r){if(!Array.isArray(t.fieldInfos)||!t.fieldInfos.length)return;const i=M(t.fieldInfos);Array.isArray(r.fieldInfos)?i.forEach(s=>{const n=r.fieldInfos.find(o=>{var l,c;return((l=o.fieldName)==null?void 0:l.toLowerCase())===((c=s.fieldName)==null?void 0:c.toLowerCase())});n?n.visible=!0:r.fieldInfos.push(s)}):r.fieldInfos=i}_writeAttachmentContent(t){t.showAttachments||(t.showAttachments=!0)}_writeRelationshipContent(t,r){var n,o;const i=((n=t.orderByFields)==null?void 0:n.map(l=>this._toFieldOrderJSON(l,t.relationshipId)))||[],s=[...((o=r.relatedRecordsInfo)==null?void 0:o.orderByFields)||[],...i];r.relatedRecordsInfo={showRelatedRecords:!0,...(s==null?void 0:s.length)&&{orderByFields:s}}}_writeTextContent(t,r){!r.description&&t.text&&(r.description=t.text)}_writeMediaContent(t,r){if(!Array.isArray(t.mediaInfos)||!t.mediaInfos.length)return;const i=M(t.mediaInfos);Array.isArray(r.mediaInfos)?r.mediaInfos=[...r.mediaInfos,...i]:r.mediaInfos=i}_readPopupInfoElements(t,r,i){const s={description:!1,mediaInfos:!1};return i.map(n=>n.type==="media"?(n.mediaInfos||!r||s.mediaInfos||(n.mediaInfos=r,s.mediaInfos=!0),dc.fromJSON(n)):n.type==="text"?(n.text||!t||s.description||(n.text=t,s.description=!0),cl.fromJSON(n)):n.type==="attachments"?cc.fromJSON(n):n.type==="fields"?ul.fromJSON(n):n.type==="expression"?Qa.fromJSON(n):n.type==="relationship"?Up.fromJSON(n):n.type==="utilityNetworkAssociations"?tS.fromJSON(n):void 0).filter(Boolean)}_toRelationshipContent(t){const{field:r,order:i}=t;if(!(r!=null&&r.startsWith(Kc)))return null;const s=r.replace(Kc,"").split("/");if(s.length!==2)return null;const n=parseInt(s[0],10),o=s[1];return typeof n=="number"&&o?Up.fromJSON({relationshipId:n,orderByFields:[{field:o,order:i}]}):null}_toFieldOrderJSON(t,r){const{order:i,field:s}=t;return{field:`${Kc}${r}/${s}`,order:i}}_readPopupInfo({description:t,mediaInfos:r,showAttachments:i,relatedRecordsInfo:s={showRelatedRecords:!1}}){const n=[];t?n.push(new cl({text:t})):n.push(new ul),Array.isArray(r)&&r.length&&n.push(dc.fromJSON({mediaInfos:r})),i&&n.push(cc.fromJSON({displayType:"auto"}));const{showRelatedRecords:o,orderByFields:l}=s;return o&&(l!=null&&l.length)&&l.forEach(c=>{const p=this._toRelationshipContent(c);p&&n.push(p)}),n.length?n:t}_getContentElementFields(t){const r=t==null?void 0:t.type;if(r==="attachments")return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description)];if(r==="custom")return t.outFields||[];if(r==="fields")return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description),...this._getFieldInfoFields(t.fieldInfos??this.fieldInfos)];if(r==="media"){const i=t.mediaInfos||[];return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description),...i.reduce((s,n)=>[...s,...this._getMediaInfoFields(n)],[])]}return r==="text"?this._extractFieldNames(t.text):r==="relationship"||r==="utility-network-associations"?[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description)]:[]}_getMediaInfoFields(t){const{caption:r,title:i,value:s}=t,n=s||{},{fields:o,normalizeField:l,tooltipField:c,sourceURL:p,linkURL:h}=n,f=[...this._extractFieldNames(i),...this._extractFieldNames(r),...this._extractFieldNames(p),...this._extractFieldNames(h),...o??[]];return l&&f.push(l),c&&f.push(c),f}_getContentExpressionInfos(t,r){return Array.isArray(t)?t.reduce((i,s)=>[...i,...s.type==="expression"&&s.expressionInfo?[s.expressionInfo]:[]],r):[]}_getContentFields(t){return typeof t=="string"?this._extractFieldNames(t):Array.isArray(t)?t.reduce((r,i)=>[...r,...this._getContentElementFields(i)],[]):[]}async _collectExpressionInfoFields(t,r,i){i&&await Promise.all(i.map(s=>us(t,r,s.expression)))}_getFieldInfoFields(t){return t?t.filter(({fieldName:r,visible:i})=>!(i!==void 0&&!i||!r||r.startsWith(Kc)||r.startsWith(NI))).map(r=>r.fieldName):[]}_getActionsFields(t){return t?t.toArray().reduce((r,i)=>[...r,...this._getActionFields(i)],[]):[]}_getActionFields(t){const{className:r,title:i,type:s}=t,n=s==="button"||s==="toggle"?t.image:"";return[...this._extractFieldNames(i),...this._extractFieldNames(r),...this._extractFieldNames(n)]}_getTitleFields(t){return typeof t=="string"?this._extractFieldNames(t):[]}_extractFieldNames(t){return Ik(t).filter(r=>!(r.indexOf(Kc)===0||r.indexOf(NI)===0))}};a([u({type:Oz})],bt.prototype,"actions",void 0),a([u()],bt.prototype,"content",void 0),a([Ce("content")],bt.prototype,"castContent",null),a([D("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments","relatedRecordsInfo"])],bt.prototype,"readContent",null),a([B("web-scene","content",{popupElements:{type:ne.ofType(Az)},showAttachments:{type:Boolean},mediaInfos:{type:ne.ofType(Wb)},description:{type:String},relatedRecordsInfo:{type:PI}})],bt.prototype,"writeWebSceneContent",null),a([B("content",{popupElements:{type:ne.ofType(Ez)},showAttachments:{type:Boolean},mediaInfos:{type:ne.ofType(Wb)},description:{type:String},relatedRecordsInfo:{type:PI}})],bt.prototype,"writeWebMapContent",null),a([u({type:[Lk],json:{write:!0}})],bt.prototype,"expressionInfos",void 0),a([u({type:[Mc]})],bt.prototype,"fieldInfos",void 0),a([B("fieldInfos")],bt.prototype,"writeFieldInfos",null),a([u({type:Cz})],bt.prototype,"layerOptions",void 0),a([B("layerOptions")],bt.prototype,"writeLayerOptions",null),a([u({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],bt.prototype,"lastEditInfoEnabled",void 0),a([u()],bt.prototype,"outFields",void 0),a([u()],bt.prototype,"overwriteActions",void 0),a([u()],bt.prototype,"returnGeometry",void 0),a([u({json:{type:String}})],bt.prototype,"title",void 0),a([B("title")],bt.prototype,"writeTitle",null),bt=a([_("esri.PopupTemplate")],bt);const Cc=bt,RI=new ve({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let Pz=0,Hl=class extends R{constructor(t){super(t),this.id="sym"+Pz++,this.type=null,this.color=new ee([0,0,0,1])}readColor(t){return(t==null?void 0:t[0])!=null?[t[0],t[1],t[2],t[3]/255]:t}async collectRequiredFields(t,r){}hash(){return JSON.stringify(this.toJSON())}clone(){}};a([u({type:RI.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:RI.write}}})],Hl.prototype,"type",void 0),a([u({type:ee,json:{write:{allowNull:!0}}})],Hl.prototype,"color",void 0),a([D("color")],Hl.prototype,"readColor",null),Hl=a([_("esri.symbols.Symbol")],Hl);const Xt=Hl;var r1;let Hn=r1=class extends Xt{constructor(e){super(e),this.data=null,this.type="cim"}readData(e,t){return t}writeData(e,t){Object.assign(t,e)}async collectRequiredFields(e,t){var r;if(((r=this.data)==null?void 0:r.type)==="CIMSymbolReference"){const i=this.data.primitiveOverrides;if(i){const s=i.map(n=>{const o=n.valueExpressionInfo;return o?us(e,t,o.expression):null});await Promise.all(s)}}}clone(){return new r1({data:M(this.data)})}hash(){return BA(JSON.stringify(this.data)).toString()}};a([u({json:{write:!1}})],Hn.prototype,"color",void 0),a([u({json:{write:!0}})],Hn.prototype,"data",void 0),a([D("data",["symbol"])],Hn.prototype,"readData",null),a([B("data",{})],Hn.prototype,"writeData",null),a([re({CIMSymbolReference:"cim"},{readOnly:!0})],Hn.prototype,"type",void 0),Hn=r1=a([_("esri.symbols.CIMSymbol")],Hn);const Mn=Hn;let Jl=class extends R{constructor(t){super(t),this.enabled=!0,this.type=null,this.ignoreDrivers=!1}writeEnabled(t,r,i){t||(r[i]=t)}};a([u({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],Jl.prototype,"enabled",void 0),a([B("enabled")],Jl.prototype,"writeEnabled",null),a([u({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0})],Jl.prototype,"type",void 0),Jl=a([_("esri.symbols.Symbol3DLayer")],Jl);const zs=Jl,Lz=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,Nz="screenUtils.toPt: input not recognized!",jk=96;function Rz(e){return e?e/72*jk:0}function Mi(e){return e?72*e/jk:0}function Se(e){if(typeof e=="string"){const t=e.match(Lz);if(t){const r=Number(t[1]),i=t[3]&&t[3].toLowerCase(),s=e.charAt(0)==="-",n=i==="px"?Mi(r):r;return s?-n:n}return console.warn(Nz),null}return e}function sue(e=0,t=0){return{x:e,y:t}}function nue(e=0,t=0){return[e,t]}function oue(e=0,t=0,r=0){return[e,t,r]}function iS(e){const t=f$(100*(1-e));return Math.max(0,Math.min(t,100))}function km(e){const t=1-e/100;return Math.max(0,Math.min(t,1))}function jz(e,t){const r=t.transparency!=null?km(t.transparency):1,i=t.color;return i&&Array.isArray(i)?new ee([i[0]||0,i[1]||0,i[2]||0,r]):null}function Dz(e,t){t.color=e.toJSON().slice(0,3);const r=iS(e.a);r!==0&&(t.transparency=r)}const qo={type:ee,json:{type:[je],default:null,read:{source:["color","transparency"],reader:jz},write:{target:{color:{type:[je]},transparency:{type:je}},writer:Dz}}},Us={type:Number,cast:Se,json:{write:!0}};let ua=class extends R{constructor(t){super(t),this.color=new ee([0,0,0,1]),this.extensionLength=0,this.size=Mi(1)}clone(){}cloneProperties(){return{color:M(this.color),size:this.size,extensionLength:this.extensionLength}}};a([u({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],ua.prototype,"type",void 0),a([u(qo)],ua.prototype,"color",void 0),a([u({...Us,json:{write:{overridePolicy:e=>({enabled:!!e})}}})],ua.prototype,"extensionLength",void 0),a([u(Us)],ua.prototype,"size",void 0),ua=a([_("esri.symbols.edges.Edges3D")],ua);const sS=ua;var i1;let oy=i1=class extends sS{constructor(e){super(e),this.type="sketch"}clone(){return new i1(this.cloneProperties())}};a([re({sketch:"sketch"},{readOnly:!0})],oy.prototype,"type",void 0),oy=i1=a([_("esri.symbols.edges.SketchEdges3D")],oy);const Vz=oy;var s1;let ay=s1=class extends sS{constructor(e){super(e),this.type="solid"}clone(){return new s1(this.cloneProperties())}};a([re({solid:"solid"},{readOnly:!0})],ay.prototype,"type",void 0),ay=s1=a([_("esri.symbols.edges.SolidEdges3D")],ay);const Dk=ay,Vk={types:{key:"type",base:sS,typeMap:{solid:Dk,sketch:Vz}},json:{write:!0}};function Oc(){return[0,0,0]}function nS(e){return[e[0],e[1],e[2]]}function Fc(e,t,r){return[e,t,r]}function Uz(e,t,r){return[e,t,r]}function zz(e,t=Oc()){const r=Math.min(3,e.length);for(let i=0;i<r;++i)t[i]=e[i];return t}function qz(e,t){return new Float64Array(e,t,3)}function Uk(){return Oc()}function zk(){return Fc(1,1,1)}function qk(){return Fc(1,0,0)}function Gk(){return Fc(0,1,0)}function Bk(){return Fc(0,0,1)}const Gz=Uk(),Wk=zk(),Bz=qk(),Wz=Gk(),Hz=Bk();Object.freeze(Object.defineProperty({__proto__:null,ONES:Wk,UNIT_X:Bz,UNIT_Y:Wz,UNIT_Z:Hz,ZEROS:Gz,clone:nS,create:Oc,createView:qz,freeze:Uz,fromArray:zz,fromValues:Fc,ones:zk,unitX:qk,unitY:Gk,unitZ:Bk,zeros:Uk},Symbol.toStringTag,{value:"Module"}));var n1;let Lr=n1=class extends R{constructor(e){super(e),this.color=null,this.emissiveFactor=null}clone(){var t;const e={color:((t=this.color)==null?void 0:t.clone())??null,emissiveFactor:this.emissiveFactor?nS(this.emissiveFactor):null};return new n1(e)}};a([u(qo)],Lr.prototype,"color",void 0),a([u({type:[Number],json:{write:!1}})],Lr.prototype,"emissiveFactor",void 0),Lr=n1=a([_("esri.symbols.support.Symbol3DMaterial")],Lr);var o1;let Jn=o1=class extends zs{constructor(e){super(e),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){var e,t;return new o1({edges:(e=this.edges)==null?void 0:e.clone(),enabled:this.enabled,material:(t=this.material)==null?void 0:t.clone(),castShadows:this.castShadows,size:this.size})}};a([re({Extrude:"extrude"},{readOnly:!0})],Jn.prototype,"type",void 0),a([u({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],Jn.prototype,"size",void 0),a([u({type:Lr,json:{write:!0}})],Jn.prototype,"material",void 0),a([u({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Jn.prototype,"castShadows",void 0),a([u(Vk)],Jn.prototype,"edges",void 0),Jn=o1=a([_("esri.symbols.ExtrudeSymbol3DLayer")],Jn);const Hk=Jn;let _d=class extends Xt{constructor(t){super(t),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};a([re({esriSLS:"simple-line"},{readOnly:!0})],_d.prototype,"type",void 0),a([u({type:Number,cast:Se,json:{write:!0}})],_d.prototype,"width",void 0),_d=a([_("esri.symbols.LineSymbol")],_d);const Jz=_d,Zz=["begin","end","begin-end"],Jk=["arrow","circle","square","diamond","cross","x"];var a1;let gs=a1=class extends R{constructor(e){super(e),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(e,t,r,i){t[r]=(i==null?void 0:i.origin)==="web-map"?"arrow":e}set color(e){this._set("color",e)}readColor(e){return(e==null?void 0:e[0])!=null?[e[0],e[1],e[2],e[3]/255]:e}writeColor(e,t,r,i){(i==null?void 0:i.origin)==="web-map"||(t[r]=e)}clone(){return new a1({color:M(this.color),placement:this.placement,style:this.style})}hash(){var e;return`${this.placement}.${(e=this.color)==null?void 0:e.hash()}.${this.style}`}};a([u({type:["begin","end","begin-end"],json:{write:!0}})],gs.prototype,"placement",void 0),a([re({"line-marker":"line-marker"},{readOnly:!0}),u({json:{origins:{"web-map":{write:!1}}}})],gs.prototype,"type",void 0),a([u({type:Jk})],gs.prototype,"style",void 0),a([B("style")],gs.prototype,"writeStyle",null),a([u({type:ee,value:null,json:{write:{allowNull:!0}}})],gs.prototype,"color",null),a([D("color")],gs.prototype,"readColor",null),a([B("color")],gs.prototype,"writeColor",null),gs=a1=a([_("esri.symbols.LineSymbolMarker")],gs);const Yz=gs;var l1;const j0=new ve({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let Hs=l1=class extends Jz{constructor(...e){super(...e),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(e,t,r,i,s,n){if(e&&typeof e!="string")return e;const o={};return e!=null&&(o.style=e),t!=null&&(o.color=t),r!=null&&(o.width=Se(r)),i!=null&&(o.cap=i),s!=null&&(o.join=s),n!=null&&(o.miterLimit=Se(n)),o}clone(){var e;return new l1({color:M(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:(e=this.marker)==null?void 0:e.clone()})}hash(){var e,t;return`${super.hash()}.${(e=this.color)==null?void 0:e.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${(t=this.marker)==null?void 0:t.hash()}`}};a([re({esriSLS:"simple-line"},{readOnly:!0})],Hs.prototype,"type",void 0),a([u({type:j0.apiValues,json:{read:j0.read,write:j0.write}})],Hs.prototype,"style",void 0),a([u({type:["butt","round","square"],json:{write:{overridePolicy:(e,t,r)=>({enabled:e!=="round"&&(r==null?void 0:r.origin)==null})}}})],Hs.prototype,"cap",void 0),a([u({type:["miter","round","bevel"],json:{write:{overridePolicy:(e,t,r)=>({enabled:e!=="round"&&(r==null?void 0:r.origin)==null})}}})],Hs.prototype,"join",void 0),a([u({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":Yz}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],Hs.prototype,"marker",void 0),a([u({type:Number,json:{read:!1,write:!1}})],Hs.prototype,"miterLimit",void 0),Hs=l1=a([_("esri.symbols.SimpleLineSymbol")],Hs);const Ur=Hs;let $d=class extends Xt{constructor(t){super(t),this.outline=null,this.type=null}hash(){var t;return`${this.type}.${(t=this.outline)==null?void 0:t.hash()}`}};a([u({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":Ur}},json:{default:null,write:!0}})],$d.prototype,"outline",void 0),a([u({type:["simple-fill","picture-fill"],readOnly:!0})],$d.prototype,"type",void 0),$d=a([_("esri.symbols.FillSymbol")],$d);const Zk=$d;let ly=class extends R{constructor(t){super(t)}clone(){throw new Error("Subclasses of LinePattern3D should implement their own clone method.")}};a([u({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],ly.prototype,"type",void 0),ly=a([_("esri.symbols.patterns.LinePattern3D")],ly);const Yk=ly,Qz=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var u1;const Kz=Kt()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let Sd=u1=class extends Yk{constructor(e){super(e),this.type="style",this.style="solid"}clone(){const e={style:this.style};return new u1(e)}};a([u({type:["style"]})],Sd.prototype,"type",void 0),a([re(Kz),u({type:Qz})],Sd.prototype,"style",void 0),Sd=u1=a([_("esri.symbols.patterns.LineStylePattern3D")],Sd);const oS=Sd;let uy=class extends R{constructor(t){super(t),this.type="style"}clone(){throw new Error("Subclasses of Pattern3D should implement their own clone method.")}};a([u({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],uy.prototype,"type",void 0),uy=a([_("esri.symbols.patterns.Pattern3D")],uy);const Qk=uy,Xz=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var c1;let xd=c1=class extends Qk{constructor(e){super(e),this.type="style",this.style="solid"}clone(){return new c1({style:this.style})}};a([u({type:["style"]})],xd.prototype,"type",void 0),a([u({type:Xz,json:{read:!0,write:!0}})],xd.prototype,"style",void 0),xd=c1=a([_("esri.symbols.patterns.StylePattern3D")],xd);const Kk=xd,eq={types:{key:"type",base:Qk,typeMap:{style:Kk}},json:{write:!0}},Xk={types:{key:"type",base:Yk,typeMap:{style:oS}},json:{write:!0}},hp=new ee("white");new ee("black");const tq=new ee([255,255,255,0]);function rq(e){return e.r===0&&e.g===0&&e.b===0}var d1;let fp=d1=class extends Lr{constructor(e){super(e),this.colorMixMode=null}clone(){var t;const e={color:((t=this.color)==null?void 0:t.clone())??null,emissiveFactor:this.emissiveFactor?nS(this.emissiveFactor):null,colorMixMode:this.colorMixMode};return new d1(e)}};a([re({multiply:"multiply",replace:"replace",tint:"tint"})],fp.prototype,"colorMixMode",void 0),fp=d1=a([_("esri.symbols.support.Symbol3DFillMaterial")],fp);function iq(e,t=!1){return e<=DA?t?new Array(e).fill(0):new Array(e):new Float64Array(e)}function pue(e){return(jA(e)?e.length:e.byteLength/8)<=DA?Array.from(e):new Float64Array(e)}function hue(e,t,r){return Array.isArray(e)?e.slice(t,t+r):e.subarray(t,t+r)}function _h(e=oq){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function aS(e,t,r,i,s,n,o=_h()){return o[0]=e,o[1]=t,o[2]=r,o[3]=i,o[4]=s,o[5]=n,o}function fue(e,t=_h()){return sq(e,0,e.length/3,t)}function sq(e,t,r,i=_h()){return eP(i,p1),nq(i,e,t,r),i}function yue(e,t=iq(24)){const[r,i,s,n,o,l]=e;return t[0]=r,t[1]=i,t[2]=s,t[3]=r,t[4]=i,t[5]=l,t[6]=r,t[7]=o,t[8]=s,t[9]=r,t[10]=o,t[11]=l,t[12]=n,t[13]=i,t[14]=s,t[15]=n,t[16]=i,t[17]=l,t[18]=n,t[19]=o,t[20]=s,t[21]=n,t[22]=o,t[23]=l,t}function mue(e,t){const r=isFinite(e[2])||isFinite(e[5]);return new it(r?{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],zmin:e[2],zmax:e[5],spatialReference:t}:{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],spatialReference:t})}function gue(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[3]),e[4]=Math.max(e[4],t[4]),e[5]=Math.max(e[5],t[5])}function vue(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[0]),e[4]=Math.max(e[4],t[1]),e[5]=Math.max(e[5],t[2])}function nq(e,t,r=0,i=t.length/3){let s=e[0],n=e[1],o=e[2],l=e[3],c=e[4],p=e[5];for(let h=0;h<i;h++)s=Math.min(s,t[r+3*h]),n=Math.min(n,t[r+3*h+1]),o=Math.min(o,t[r+3*h+2]),l=Math.max(l,t[r+3*h]),c=Math.max(c,t[r+3*h+1]),p=Math.max(p,t[r+3*h+2]);e[0]=s,e[1]=n,e[2]=o,e[3]=l,e[4]=c,e[5]=p}function lS(e){return e[0]>=e[3]?0:e[3]-e[0]}function uS(e){return e[1]>=e[4]?0:e[4]-e[1]}function cS(e){return e[2]>=e[5]?0:e[5]-e[2]}function bue(e){const t=lS(e),r=cS(e),i=uS(e);return Math.sqrt(t*t+r*r+i*i)}function wue(e,t=[0,0,0]){return t[0]=e[0]+lS(e)/2,t[1]=e[1]+uS(e)/2,t[2]=e[2]+cS(e)/2,t}function _ue(e,t=[0,0,0]){return t[0]=lS(e),t[1]=uS(e),t[2]=cS(e),t}function $ue(e,t,r=e){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r!==e&&(r[3]=e[3],r[4]=e[4],r[5]=e[5]),r}function Sue(e,t,r=e){return r[3]=t[0],r[4]=t[1],r[5]=t[2],r!==e&&(r[0]=e[0],r[1]=e[1],r[2]=e[2]),e}function eP(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function xue(e){return e?eP(e,p1):_h(p1)}function Iue(e,t){return e[0]=t[0],e[1]=t[1],e[2]=Number.NEGATIVE_INFINITY,e[3]=t[2],e[4]=t[3],e[5]=Number.POSITIVE_INFINITY,e}function Tue(e,t,r,i,s){return e[0]=t,e[1]=r,e[2]=Number.NEGATIVE_INFINITY,e[3]=i,e[4]=s,e[5]=Number.POSITIVE_INFINITY,e}function jI(e){return e.length===6}function Mue(e,t,r){if(e==null||t==null)return e===t;if(!jI(e)||!jI(t))return!1;for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}const p1=[1/0,1/0,1/0,-1/0,-1/0,-1/0],oq=[0,0,0,0,0,0];_h();function Eue(e,{isPrimitive:t,width:r,depth:i,height:s}){const n=t?10:1;if(r==null&&s==null&&i==null)return[n*e[0],n*e[1],n*e[2]];const o=Fc(r,i,s);let l;for(let c=0;c<3;c++){const p=o[c];if(p!=null){l=p/e[c];break}}for(let c=0;c<3;c++)o[c]==null&&(o[c]=e[c]*l);return o}const aq=aS(-.5,-.5,-.5,.5,.5,.5),lq=aS(-.5,-.5,0,.5,.5,1),uq=aS(-.5,-.5,0,.5,.5,.5);function Aue(e){switch(e){case"sphere":case"cube":case"diamond":return aq;case"cylinder":case"cone":case"inverted-cone":return lq;case"tetrahedron":return uq;default:return}}const dS=["butt","square","round"],cq=[...dS,"none"],tP=["miter","bevel","round"];var h1;let ca=h1=class extends R{constructor(e){super(e),this.color=new ee([0,0,0,1]),this.size=Mi(1),this.pattern=null,this.patternCap="butt"}clone(){const e={color:this.color!=null?this.color.clone():null,size:this.size,pattern:this.pattern!=null?this.pattern.clone():null,patternCap:this.patternCap};return new h1(e)}};a([u(qo)],ca.prototype,"color",void 0),a([u(Us)],ca.prototype,"size",void 0),a([u(Xk)],ca.prototype,"pattern",void 0),a([u({type:dS,json:{default:"butt",write:{overridePolicy(){return{enabled:this.pattern!=null}}}}})],ca.prototype,"patternCap",void 0),ca=h1=a([_("esri.symbols.support.Symbol3DOutline")],ca);var cy;let Js=cy=class extends zs{constructor(e){super(e),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const e={edges:this.edges!=null?this.edges.clone():null,enabled:this.enabled,material:this.material!=null?this.material.clone():null,pattern:this.pattern!=null?this.pattern.clone():null,castShadows:this.castShadows,outline:this.outline!=null?this.outline.clone():null};return new cy(e)}static fromSimpleFillSymbol(e){var i,s,n;const t=e.outline&&e.outline.style&&e.outline.style!=="solid"?new oS({style:e.outline.style}):null,r={size:((i=e.outline)==null?void 0:i.width)??0,color:(((s=e.outline)==null?void 0:s.color)??hp).clone(),pattern:t};return t&&((n=e.outline)!=null&&n.cap)&&(r.patternCap=e.outline.cap),new cy({material:new fp({color:(e.color??tq).clone()}),pattern:e.style&&e.style!=="solid"?new Kk({style:e.style}):null,outline:r})}};a([re({Fill:"fill"},{readOnly:!0})],Js.prototype,"type",void 0),a([u({type:fp,json:{write:!0}})],Js.prototype,"material",void 0),a([u(eq)],Js.prototype,"pattern",void 0),a([u({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Js.prototype,"castShadows",void 0),a([u({type:ca,json:{write:!0}})],Js.prototype,"outline",void 0),a([u(Vk)],Js.prototype,"edges",void 0),Js=cy=a([_("esri.symbols.FillSymbol3DLayer")],Js);const Sl=Js,dq=["none","underline","line-through"],pq=["normal","italic","oblique"],hq=["normal","lighter","bold","bolder"],rP={type:Number,cast:e=>{const t=wc(e);return t===0?1:_l(t,.1,4)},nonNullable:!0},fq=["left","right","center"],yq=["baseline","top","middle","bottom"],iP={type:fq,nonNullable:!0},sP={type:yq,nonNullable:!0};var f1;let Zs=f1=class extends R{constructor(e){super(e),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(e){return Se(e)}clone(){return new f1({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};a([u({type:dq,json:{default:"none",write:!0}})],Zs.prototype,"decoration",void 0),a([u({type:String,json:{write:!0}})],Zs.prototype,"family",void 0),a([u({type:Number,json:{write:{overridePolicy:(e,t,r)=>({enabled:!r||!r.textSymbol3D})}}})],Zs.prototype,"size",void 0),a([Ce("size")],Zs.prototype,"castSize",null),a([u({type:pq,json:{default:"normal",write:!0}})],Zs.prototype,"style",void 0),a([u({type:hq,json:{default:"normal",write:!0}})],Zs.prototype,"weight",void 0),Zs=f1=a([_("esri.symbols.Font")],Zs);const Og=Zs;function kc(e,t){var i;const r=(i=t==null?void 0:t.url)==null?void 0:i.path;if(e&&r&&(e=wi(e,r,{preserveProtocolRelative:!0}),t.portalItem&&t.readResourcePaths)){const s=L$(e,t.portalItem.itemUrl);s!=null&&mq.test(s)&&t.readResourcePaths.push(t.portalItem.resourceFromPath(s).path)}return(e=y1(e,t==null?void 0:t.portal))&&Fg.test(e)?hS(e):e}function $h(e,t,r=zp.YES){var s,n;if((e=e&&Fg.test(e)?oP(e):e)==null)return e;!ti(e)&&(t!=null&&t.blockedRelativeUrls)&&t.blockedRelativeUrls.push(e);let i=wi(e);if(t){const o=((s=t.verifyItemRelativeUrls)==null?void 0:s.rootPath)||((n=t.url)==null?void 0:n.path);if(o){const l=y1(o,t.portal),c=y1(i,t.portal);i=L$(c,l,l),i!=null&&i!==c&&i!==e&&t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.writtenUrls.push(i)}}return i=nP(i,t==null?void 0:t.portal),ti(i)&&(i=rs(i)),t!=null&&t.resources&&(t!=null&&t.portalItem)&&!ti(i)&&!wl(i)&&r===zp.YES&&t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(i),compress:!1}),i}function pS(e,t,r){return kc(e,r)}function dl(e,t,r,i){const s=$h(e,i);s!==void 0&&(t[r]=s)}const Fg=/\/items\/([^/]+)\/resources\/(.*)/,mq=/^\.\/resources\//;function gq(e){const t=(e==null?void 0:e.match(Fg))??null;return(t==null?void 0:t[1])??null}function vq(e){const t=(e==null?void 0:e.match(Fg))??null;if(t==null)return null;const r=t[2],i=r.lastIndexOf("/");if(i===-1){const{path:o,extension:l}=oI(r);return{prefix:null,filename:o,extension:l}}const{path:s,extension:n}=oI(r.slice(i+1));return{prefix:r.slice(0,i),filename:s,extension:n}}function nP(e,t){return t&&!t.isPortal&&t.urlKey&&t.customBaseUrl?cb(e,`${t.urlKey}.${t.customBaseUrl}`,t.portalHostname):e}function y1(e,t){if(!t||t.isPortal||!t.urlKey||!t.customBaseUrl)return e;const r=`${t.urlKey}.${t.customBaseUrl}`,i=O$();return rc(i,`${i.scheme}://${r}`)?cb(e,t.portalHostname,r):cb(e,r,t.portalHostname)}function hS(e){if(!e)return e||null;let t=e;return t&&ye&&!ye.findCredential(t)&&(t=eF(t),t=t.replace(/^https?:\/\/www\.arcgis\.com/,"https://cdn.arcgis.com"),t=t.replace(/^https?:\/\/devext\.arcgis\.com/,"https://cdndev.arcgis.com"),t=t.replace(/^https?:\/\/qaext\.arcgis\.com/,"https://cdnqa.arcgis.com")),t}function oP(e){if(!e)return e||null;let t=e;return t=t.replace(/^https?:\/\/cdn\.arcgis\.com/,"https://www.arcgis.com"),t=t.replace(/^https?:\/\/cdndev\.arcgis\.com/,"https://devext.arcgis.com"),t=t.replace(/^https?:\/\/cdnqa\.arcgis\.com/,"https://qaext.arcgis.com"),t&&ye&&!ye.findCredential(t)&&(t=eF(t)),t}var zp;(function(e){e[e.YES=0]="YES",e[e.NO=1]="NO"})(zp||(zp={}));const Cue=Object.freeze(Object.defineProperty({__proto__:null,get MarkKeep(){return zp},ensureMainOnlineDomain:nP,fromCDNUrl:oP,fromJSON:kc,itemIdFromResourceUrl:gq,prefixAndFilenameFromResourceUrl:vq,read:pS,toCDNUrl:hS,toJSON:$h,write:dl},Symbol.toStringTag,{value:"Module"}));var m1;const bq=Kt()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let da=m1=class extends R{constructor(e){super(e)}readHref(e,t,r){return e?kc(e,r):t.dataURI}writeHref(e,t,r,i){e&&(wl(e)?t.dataURI=e:(t.href=$h(e,i),ti(t.href)&&(t.href=rs(t.href))))}clone(){return new m1({href:this.href,primitive:this.primitive})}};a([u({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],da.prototype,"href",void 0),a([D("href")],da.prototype,"readHref",null),a([B("href",{href:{type:String},dataURI:{type:String}})],da.prototype,"writeHref",null),a([re(bq)],da.prototype,"primitive",void 0),da=m1=a([_("esri.symbols.support.IconSymbol3DLayerResource")],da);var g1;let Au=g1=class extends $e{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new g1({x:this.x,y:this.y})}};a([u({type:Number})],Au.prototype,"x",void 0),a([u({type:Number})],Au.prototype,"y",void 0),Au=g1=a([_("esri.symbols.support.Symbol3DAnchorPosition2D")],Au);var v1;let Id=v1=class extends R{constructor(e){super(e),this.color=new ee([0,0,0,1]),this.size=Mi(1)}clone(){const e={color:this.color!=null?this.color.clone():null,size:this.size};return new v1(e)}};a([u(qo)],Id.prototype,"color",void 0),a([u(Us)],Id.prototype,"size",void 0),Id=v1=a([_("esri.symbols.support.Symbol3DIconOutline")],Id);var Zl;const aP="esri.symbols.IconSymbol3DLayer";let Ni=Zl=class extends zs{constructor(e){super(e),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=null,this.outline=null,this.angle=0}clone(){return new Zl({anchor:this.anchor,anchorPosition:M(this.anchorPosition),enabled:this.enabled,material:M(this.material),outline:M(this.outline),resource:M(this.resource),angle:this.angle,size:this.size})}static fromSimpleMarkerSymbol(e){const t=e.color||hp,r=DI(e),i=e.outline&&e.outline.width>0?{size:e.outline.width,color:(e.outline.color||hp).clone()}:null;return new Zl({size:e.size,angle:e.angle,resource:{primitive:_q(e.style)},material:{color:t},outline:i,anchor:r?"relative":void 0,anchorPosition:r})}static fromPictureMarkerSymbol(e){const t=!e.color||rq(e.color)?hp:e.color,r=DI(e);return new Zl({size:e.width<=e.height?e.height:e.width,angle:e.angle,resource:{href:e.url},material:{color:t.clone()},anchor:r?"relative":void 0,anchorPosition:r})}static fromCIMSymbol(e){return new Zl({resource:{href:oF({mediaType:"application/json",data:JSON.stringify(e.data)})}})}};a([u({type:Lr,json:{write:!0}})],Ni.prototype,"material",void 0),a([u({type:da,json:{write:!0}})],Ni.prototype,"resource",void 0),a([re({Icon:"icon"},{readOnly:!0})],Ni.prototype,"type",void 0),a([u(Us)],Ni.prototype,"size",void 0),a([re({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"},{default:"center"})],Ni.prototype,"anchor",void 0),a([u({type:Au,json:{type:[Number],read:{reader:e=>new Au({x:e[0],y:e[1]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],Ni.prototype,"anchorPosition",void 0),a([u({type:Id,json:{write:!0}})],Ni.prototype,"outline",void 0),a([u({type:Number,json:{write:!0,default:0}})],Ni.prototype,"angle",void 0),Ni=Zl=a([_(aP)],Ni);const za=Ni;function DI(e){const t="width"in e?e.width:e.size,r="height"in e?e.height:e.size,i=VI(e.xoffset),s=VI(e.yoffset);return(i||s)&&t&&r?{x:-i/t,y:s/r}:null}function VI(e){return isFinite(e)?e:0}const wq={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function _q(e){return wq[e]||(G.getLogger(aP).warn(`${e} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}function b1(e,t,r=ne){return t||(t=new r),t===e||(t.removeAll(),Sq(e)?t.addMany(e):e&&t.add(e)),t}function $q(e){return e}function Sq(e){return e&&(Array.isArray(e)||"items"in e&&Array.isArray(e.items))}var po;(function(e){e[e.PENDING=0]="PENDING",e[e.RESOLVED=1]="RESOLVED",e[e.REJECTED=2]="REJECTED"})(po||(po={}));let xq=class{constructor(){this._resolver=No(),this._status=po.PENDING,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=po.RESOLVED,this._cleanUp()},()=>{this._status=po.REJECTED,this._cleanUp()}),this.promise=this._resolver.promise}destroy(){this._cleanUp()}addResolvingPromise(t){this._resolvingPromises.push(t),this._tryResolve()}isResolved(){return this._status===po.RESOLVED}isRejected(){return this._status===po.REJECTED}isFulfilled(){return this._status!==po.PENDING}abort(){this._resolver.reject(Jt())}_cleanUp(){this._allPromise=null,this._resolvingPromises=null}_tryResolve(){if(this.isFulfilled())return;const t=No(),r=[...this._resolvingPromises,t.promise],i=this._allPromise=Promise.all(r);i.then(()=>{this.isFulfilled()||this._allPromise!==i||this._resolver.resolve()},s=>{this.isFulfilled()||this._allPromise!==i||vr(s)||this._resolver.reject(s)}),t.resolve()}};const fS=e=>{let t=class extends e{constructor(...r){super(...r),this._promiseProps=new xq,this.addResolvingPromise(Promise.resolve())}destroy(){this._promiseProps.destroy()}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(r,i){return this._promiseProps.promise.then(()=>this).then(r,i)}catch(r){return this.when(null,r)}addResolvingPromise(r){r&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in r?r.when():r)}};return t=a([_("esri.core.Promise")],t),t};let w1=class extends fS($e){};w1=a([_("esri.core.Promise")],w1);const Iq="not-loaded",Tq="loading",Mq="failed",UI="loaded",lP=e=>{let t=class extends e{constructor(...r){super(...r),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(i=>{const s=this.load.bind(this);this.load=n=>{const o=new Promise((l,c)=>{const p=cC(n,c);this.destroyed&&c(new O("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this.when(l,c).finally(()=>{p&&p.remove()})});if(this.loadStatus===Iq){this._set("loadStatus",Tq);const l=this._loadController=new AbortController;s({signal:l.signal})}return i(),o}})),this.when(()=>{this._set("loadStatus",UI),this._loadController=null},i=>{this._set("loadStatus",Mq),this._set("loadError",i),this._loadController=null})}destroy(){this._loadController&&(this._loadController=HA(this._loadController),this._promiseProps.abort()),this._set("loadError",null),this._set("loadWarnings",[])}get loaded(){return this.loadStatus===UI}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){var r;return this.isFulfilled()||(this._set("loadError",new O("load:cancelled","Cancelled")),(r=this._loadController)==null||r.abort(),this._promiseProps.abort()),this}};return a([u({readOnly:!0})],t.prototype,"loaded",null),a([u({readOnly:!0})],t.prototype,"loadError",void 0),a([u({clonable:!1})],t.prototype,"loadStatus",void 0),a([u({type:[os],readOnly:!0})],t.prototype,"loadWarnings",null),t=a([_("esri.core.Loadable")],t),t};let Td=class extends lP(w1){};Td=a([_("esri.core.Loadable")],Td),function(e){function t(r){return!(!r||!r.load)}e.LoadableMixin=lP,e.isLoadable=t}(Td||(Td={}));const Pc=Td;let sf;function Eq(e){return sf&&!sf.destroyed||(sf=e()),sf}var _1;const Aq=new ve({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let hi=_1=class extends $e{constructor(e){super(e),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(e){e!=="asc"&&e!=="desc"||this._set("sortOrder",e)}clone(){return new _1({categories:this.categories?M(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(e,t){let r=[];this.categories&&(r=this.categories.map(o=>Array.isArray(o)?JSON.stringify(o):o));let i="";if(this.extent){const o=DF(this.extent,ge.WGS84);o!=null&&(i=`${o.xmin},${o.ymin},${o.xmax},${o.ymax}`)}let s=this.query;!this.disableExtraQuery&&e.extraQuery&&(s="("+s+")"+e.extraQuery);const n={categories:r,bbox:i,q:s,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(n.sortField=this.sortField.split(",").map(o=>Aq.toJSON(o.trim())).join(","),n.sortOrder=this.sortOrder),{query:{...t,...n}}}};a([u()],hi.prototype,"categories",void 0),a([u()],hi.prototype,"disableExtraQuery",void 0),a([u({type:it})],hi.prototype,"extent",void 0),a([u()],hi.prototype,"filter",void 0),a([u()],hi.prototype,"num",void 0),a([u()],hi.prototype,"query",void 0),a([u()],hi.prototype,"sortField",void 0),a([u()],hi.prototype,"sortOrder",null),a([u()],hi.prototype,"start",void 0),hi=_1=a([_("esri.portal.PortalQueryParams")],hi);const Xi=hi;var $1;let wt=$1=class extends R{constructor(e){super(e),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.sourceJSON=null,this.tags=null,this.title=null}get thumbnailUrl(){var r;const e=this.url,t=this.thumbnail;return e&&t&&this.portal?(r=this.portal)==null?void 0:r.normalizeUrl(`${e}/info/${t}?f=json`):null}get url(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e?e+"/community/groups/"+this.id:null}fetchCategorySchema(e){return this.portal.request(this.url+"/categorySchema",e).then(t=>{const r=t.categorySchema||[];return r.some(i=>i.source==="contentCategorySetsGroupQuery.LivingAtlas")?this._fetchCategorySchemaSet("LivingAtlas",e):r})}fetchMembers(e){return this.portal.request(this.url+"/users",e)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}toJSON(){throw new O("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const t=new $1({sourceJSON:e});return t.read(e),t}queryItems(e,t){let r=Zt(Xi,e);const i=this.portal;return parseFloat(i.currentVersion)>5?(r=r||new Xi,i.queryPortal(`/content/groups/${this.id}/search`,r,"PortalItem",t)):(r=r?r.clone():new Xi,r.query="group:"+this.id+(r.query?" "+r.query:""),i.queryItems(r,t))}_fetchCategorySchemaSet(e,t){const r=this.portal;return r.fetchSelf(r.authMode,!0,t).then(i=>{const s=i.contentCategorySetsGroupQuery;if(s){const n=new Xi({disableExtraQuery:!0,num:1,query:s});return r.queryGroups(n,t)}throw new O("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(i=>{if(i.total){const s=i.results[0],n=new Xi({num:1,query:`typekeywords:"${e}"`});return s.queryItems(n,t)}throw new O("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(i=>i.total?i.results[0].fetchData("json",t).then(s=>{const n=s==null?void 0:s.categorySchema;return n!=null&&n.length?n:[]}):[])}};a([u()],wt.prototype,"access",void 0),a([u({type:Date})],wt.prototype,"created",void 0),a([u()],wt.prototype,"description",void 0),a([u()],wt.prototype,"id",void 0),a([u()],wt.prototype,"isInvitationOnly",void 0),a([u({type:Date})],wt.prototype,"modified",void 0),a([u()],wt.prototype,"owner",void 0),a([u()],wt.prototype,"portal",void 0),a([u()],wt.prototype,"snippet",void 0),a([u()],wt.prototype,"sortField",void 0),a([u()],wt.prototype,"sortOrder",void 0),a([u()],wt.prototype,"sourceJSON",void 0),a([u()],wt.prototype,"tags",void 0),a([u()],wt.prototype,"thumbnail",void 0),a([u({readOnly:!0})],wt.prototype,"thumbnailUrl",null),a([u()],wt.prototype,"title",void 0),a([u({readOnly:!0})],wt.prototype,"url",null),wt=$1=a([_("esri.portal.PortalGroup")],wt);const S1=wt;let pa=class extends $e{constructor(t){super(t),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};a([u()],pa.prototype,"nextQueryParams",void 0),a([u()],pa.prototype,"queryParams",void 0),a([u()],pa.prototype,"results",void 0),a([u()],pa.prototype,"total",void 0),pa=a([_("esri.portal.PortalQueryResult")],pa);const Cq=pa;let Ys=class extends R{constructor(t){super(t),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){var r;const t=(r=this.portal)==null?void 0:r.restUrl;return t?`${t}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new O("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};a([u({type:Date})],Ys.prototype,"created",void 0),a([u()],Ys.prototype,"id",void 0),a([u()],Ys.prototype,"portal",void 0),a([u()],Ys.prototype,"title",void 0),a([u({readOnly:!0})],Ys.prototype,"url",null),a([u()],Ys.prototype,"username",void 0),Ys=a([_("esri.portal.PortalFolder")],Ys);const Oq=Ys;var x1;let ze=x1=class extends R{constructor(e){super(e),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userLicenseTypeId=null,this.userType=null}get thumbnailUrl(){const e=this.url,t=this.thumbnail;return e&&t?this.portal.normalizeUrl(`${e}/info/${t}?f=json`):null}get userContentUrl(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e?`${e}/content/users/${this.username}`:null}get url(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e?`${e}/community/users/${this.username}`:null}addItem(e){const t=e&&e.item,r=e==null?void 0:e.data,i=e==null?void 0:e.folder,s={method:"post"};t&&(s.query=t.createPostQuery(),r!=null&&(typeof r=="string"?s.query.text=r:typeof r=="object"&&(s.query.text=JSON.stringify(r))));let n=this.userContentUrl;return i&&(n+="/"+(typeof i=="string"?i:i.id)),this.portal.request(n+"/addItem",s).then(o=>(t.id=o.id,t.portal=this.portal,t.loaded?t.reload():t.load()))}async deleteItem(e,t=!1){let r=this.userContentUrl;e.ownerFolder&&(r+="/"+e.ownerFolder);const i=t?{permanentDelete:!0}:{};await this.portal.request(r+`/items/${e.id}/delete`,{method:"post",query:i}),e.id=null,e.portal=null}async deleteItems(e,t=!1){e=e.slice();const r=this.userContentUrl+"/deleteItems",i=[],s=e.map(n=>n.id);if(s.length){const n={method:"post",query:{items:s.join(","),permanentDelete:t}},o=await this.portal.request(r,n);for(const l of o.results){const c=e.find(f=>l.itemId===f.id),p=l.success;let h=null;p?(c.id=null,c.portal=null):l.error&&(h=new O("portal:delete-item-failed",l.error.message,l.error)),i.push({item:c,success:p,error:h})}}return i}fetchFolders(){const e={query:{num:1}};return this.portal.request(this.userContentUrl??"",e).then(t=>{let r;return r=t&&t.folders?t.folders.map(i=>{const s=Oq.fromJSON(i);return s.portal=this.portal,s}):[],r})}fetchGroups(){return this.portal.request(this.url??"").then(e=>{let t;return t=e&&e.groups?e.groups.map(r=>{const i=S1.fromJSON(r);return i.portal=this.portal,i}):[],t})}async fetchItems(e){e??(e={});let t=this.userContentUrl??"";e.folder&&(t+="/"+e.folder.id);const{default:r}=await j(()=>Promise.resolve().then(()=>GN),void 0),i={folders:!1,inRecycleBin:!!e.inRecycleBin||null,foldersContent:!(e.folder||!e.includeSubfolderItems)||null,num:e.num||10,start:e.start||1,sortField:e.sortField||"created",sortOrder:e.sortOrder||"asc"},s=await this.portal.request(t,{query:i});let n;return s!=null&&s.items?(n=s.items.map(o=>{const l=r.fromJSON(o);return l.portal=this.portal,l}),await Promise.all(n.map(o=>o.load())),{items:n,nextStart:s.nextStart,total:s.total}):{items:[],nextStart:-1,total:0}}fetchTags(){return this.portal.request(this.url+"/tags").then(e=>e.tags)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}queryFavorites(e){return this.favGroupId?(this._favGroup||(this._favGroup=new S1({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(e)):Promise.reject(new O("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}async restoreItem(e,t){const r=this.userContentUrl,i=t?{folderID:typeof t=="string"?t:t.id}:null;await this.portal.request(r+`/items/${e.id}/restore`,{method:"post",query:i})}toJSON(){throw new O("internal:not-yet-implemented","PortalUser.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const t=new x1({sourceJSON:e});return t.read(e),t}};a([u()],ze.prototype,"access",void 0),a([u({type:Date})],ze.prototype,"created",void 0),a([u()],ze.prototype,"culture",void 0),a([u()],ze.prototype,"description",void 0),a([u()],ze.prototype,"email",void 0),a([u()],ze.prototype,"favGroupId",void 0),a([u()],ze.prototype,"fullName",void 0),a([u({type:Date})],ze.prototype,"modified",void 0),a([u()],ze.prototype,"orgId",void 0),a([u()],ze.prototype,"portal",void 0),a([u()],ze.prototype,"preferredView",void 0),a([u()],ze.prototype,"privileges",void 0),a([u()],ze.prototype,"region",void 0),a([u()],ze.prototype,"role",void 0),a([u()],ze.prototype,"roleId",void 0),a([u()],ze.prototype,"sourceJSON",void 0),a([u()],ze.prototype,"thumbnail",void 0),a([u({readOnly:!0})],ze.prototype,"thumbnailUrl",null),a([u()],ze.prototype,"units",void 0),a([u({readOnly:!0})],ze.prototype,"userContentUrl",null),a([u({readOnly:!0})],ze.prototype,"url",null),a([u()],ze.prototype,"username",void 0),a([u()],ze.prototype,"userLicenseTypeId",void 0),a([u()],ze.prototype,"userType",void 0),ze=x1=a([_("esri.portal.PortalUser")],ze);const yS=ze;var Gr;let Xc;const zI={PortalGroup:()=>Promise.resolve({default:S1}),PortalItem:()=>j(()=>Promise.resolve().then(()=>GN),void 0),PortalUser:()=>Promise.resolve({default:yS})};let U=Gr=class extends hg(Pc){constructor(e){super(e),this._esriIdCredentialCreateHandle=null,this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.basemapGalleryGroupQuery3D=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.default3DBasemapQuery=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.layoutGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.hasClassificationSchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.recycleBinEnabled=!1,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=Le.portalUrl,this.urlKey=null,this.user=null,this.use3dBasemaps=!0,this.useDefault3dBasemap=!1,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(e){return typeof e=="string"?{url:e}:e}destroy(){qI.unregister(this),this.defaultBasemap=Ps(this.defaultBasemap),this.defaultDevBasemap=Ps(this.defaultDevBasemap),this.defaultVectorBasemap=Ps(this.defaultVectorBasemap),this._esriIdCredentialCreateHandle=ts(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(e){if(e)for(const t of e)Le.request.trustedServers.includes(t)||Le.request.trustedServers.push(t);return e}readDefaultBasemap(e){return this._readBasemap(e)}readDefaultDevBasemap(e){return this._readBasemap(e)}readDefaultVectorBasemap(e){return this._readBasemap(e)}get extraQuery(){var r;const e=(r=this.user)==null?void 0:r.orgId,t=!e||this.canSearchPublic;return this.id&&!t?` AND orgid:${this.id}`:null}get hasAPIKey(){return pF(this.url)}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get restUrl(){let e=this.url;if(e){const t=e.indexOf("/sharing");e=t>0?e.slice(0,t):this.url.replace(/\/+$/,""),e+="/sharing/rest"}return e}get thumbnailUrl(){const e=this.restUrl,t=this.thumbnail;return e&&t?this._normalizeSSL(e+"/portals/self/resources/"+t):null}readUrlKey(e){return e&&e.toLowerCase()}readUser(e){let t=null;return e&&(t=yS.fromJSON(e),t.portal=this),t}load(e){const t=j(()=>Promise.resolve().then(()=>Mre),void 0).then(({default:r})=>{si(e),Xc=r}).then(()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,e)).then(r=>{var i;if(!this.hasAPIKey&&ye){const s=ye;this.credential=s.findCredential(this.restUrl),this.credential||this.authMode!==Gr.AUTH_MODE_AUTO&&this.authMode!==Gr.AUTH_MODE_NO_PROMPT||((i=this._esriIdCredentialCreateHandle)==null||i.remove(),this._esriIdCredentialCreateHandle=s.on("credential-create",Fq(new WeakRef(this))),qI.register(this,this._esriIdCredentialCreateHandle,this))}this.sourceJSON=r,this.read(r)});return this.addResolvingPromise(t),Promise.resolve(this)}async createElevationLayers(){await this.load();const e=this._getHelperService("defaultElevationLayers"),t=(await j(async()=>{const{default:r}=await import("./ElevationLayer-BTqYvFyM.js");return{default:r}},__vite__mapDeps([6,7,8,9,10]))).default;return e?e.map(r=>new t({id:r.id,url:r.url})):[]}async fetchBasemaps(e,t){const r=await this._fetchBasemaps(e,t);if((t==null?void 0:t.include3d)===!0&&this.use3dBasemaps!==!1){const i=await this._fetchBasemaps3D(e,t);r.unshift(...i)}return r}async fetchDefault3DBasemap(e){if(!this.useDefault3dBasemap||!this.default3DBasemapQuery||this.default3DBasemapQuery==="none")return null;const t=new Xi;t.query=this.default3DBasemapQuery,t.disableExtraQuery=!0;const r=(await this.queryItems(t,e)).results.find(i=>i.type==="Web Scene");return r?new Xc({portalItem:r}):null}fetchCategorySchema(e){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",e).then(t=>t.categorySchema):Lo(e)?Promise.reject(Jt()):Promise.resolve([])}fetchFeaturedGroups(e){const t=this.featuredGroups,r=new Xi({num:100,sortField:"title"});if(t!=null&&t.length){const i=[];for(const s of t)i.push(`(title:"${s.title}" AND owner:${s.owner})`);return r.query=i.join(" OR "),this.queryGroups(r,e).then(s=>s.results)}return Lo(e)?Promise.reject(Jt()):Promise.resolve([])}fetchRegions(e){var r;const t=((r=this.user)==null?void 0:r.culture)||this.culture||Nr();return this.request(this.restUrl+"/portals/regions",{...e,query:{culture:t}})}fetchSettings(e){var r;const t=((r=this.user)==null?void 0:r.culture)||this.culture||Nr();return this.request(this.restUrl+"/portals/self/settings",{...e,query:{culture:t}})}static getDefault(){return Eq(()=>new Gr)}queryGroups(e,t){return this.queryPortal("/community/groups",e,"PortalGroup",t)}queryItems(e,t){return this.queryPortal("/search",e,"PortalItem",t)}queryUsers(e,t){return e.sortField||(e.sortField="username"),this.queryPortal("/community/users",e,"PortalUser",t)}fetchSelf(e=this.authMode,t=!1,r){const i=this.restUrl+"/portals/self",s={authMode:e,query:{culture:Nr().toLowerCase()},withCredentials:!0,...r};return s.authMode==="auto"&&(s.authMode="no-prompt"),t&&(s.query.default=!0),this.request(i,s)}queryPortal(e,t,r,i){const s=Zt(Xi,t),n=o=>this.request(this.restUrl+e,{...s.toRequestOptions(this),...i}).then(l=>{const c=s.clone();return c.start=l.nextStart,new Cq({nextQueryParams:c,queryParams:s,total:l.total,results:Gr._resultsToTypedArray(o,{portal:this},l,i)})}).then(l=>Promise.all(l.results.map(c=>typeof c.when=="function"?c.when():l)).then(()=>l,c=>(Fs(c),l)));return r&&zI[r]?zI[r]().then(({default:o})=>(si(i),n(o))):n()}signIn(){if(this.hasAPIKey)return this.load().then(()=>{if(!this.user)throw new O("portal:not-authenticated","Unable to authenticate user. Portal.user is missing")});if(this.authMode===Gr.AUTH_MODE_ANONYMOUS||this.authMode===Gr.AUTH_MODE_NO_PROMPT&&!ye)return Promise.reject(new O("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const e=t=>Promise.resolve().then(()=>this.loadStatus==="not-loaded"?(t||(this.authMode="immediate"),this.load().then(()=>null)):this.loadStatus==="loading"?this.load().then(()=>this.credential?null:(this.credential=t,this.fetchSelf("immediate"))):this.user&&this.credential===t?null:(this.credential=t,this.fetchSelf("immediate"))).then(r=>{r&&(this.sourceJSON=r,this.read(r))});return ye?ye.getCredential(this.restUrl,{prompt:this.authMode!==Gr.AUTH_MODE_NO_PROMPT}).then(t=>e(t)):e(this.credential)}normalizeUrl(e){var r;const t=(r=this.credential)==null?void 0:r.token;return this._normalizeSSL(t?e+(e.includes("?")?"&":"?")+"token="+t:e)}requestToTypedArray(e,t,r){return this.request(e,t).then(i=>{const s=Gr._resultsToTypedArray(r,{portal:this},i);return Promise.all(s.map(n=>typeof n.when=="function"?n.when():i)).then(()=>s,()=>s)})}request(e,t={}){const r={f:"json",...t.query},{authMode:i=this.authMode===Gr.AUTH_MODE_ANONYMOUS||this.authMode===Gr.AUTH_MODE_NO_PROMPT?this.authMode:"auto",body:s=null,cacheBust:n=!1,method:o="auto",responseType:l="json",signal:c}=t,p={authMode:i,body:s,cacheBust:n,method:o,query:r,responseType:l,timeout:0,signal:c};return t.withCredentials&&(p.withCredentials=!0),Ge(this._normalizeSSL(e),p).then(h=>h.data)}toJSON(){throw new O("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new Gr({sourceJSON:e})}_getHelperService(e){const t=this.helperServices&&this.helperServices[e];if(!t)throw new O("portal:service-not-found",`The \`helperServices\` do not include an entry named "${e}"`);return t}async _fetchBasemaps(e,t){const r=new Xi;r.query=e||(this.hasAPIKey?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),r.disableExtraQuery=!0;const i=await this.queryGroups(r,t);if(!i.total)return[];const s=i.results[0];r.num=100,r.query='type:"Web Map" -type:"Web Application"',r.sortField=s.sortField||"name",r.sortOrder=s.sortOrder||"desc";const n=await s.queryItems(r,t);return n.total?n.results.filter(o=>o.type==="Web Map").map(o=>new Xc({portalItem:o})):[]}async _fetchBasemaps3D(e,t){const r=e||this.basemapGalleryGroupQuery3D;if(!r)return[];const i=new Xi({query:r,disableExtraQuery:!0}),s=await this.queryGroups(i,t);if(!s.total)return[];const n=s.results[0];i.num=100,i.query='type:"Web Scene"',i.sortField=n.sortField||"name",i.sortOrder=n.sortOrder||"desc";const o=await n.queryItems(i,t);return o.total?o.results.filter(l=>l.type==="Web Scene").map(l=>new Xc({portalItem:l})):[]}_normalizeSSL(e){return e.replace(/^http:/i,"https:").replace(":7080",":7443")}_readBasemap(e){if(e){const t=Xc.fromJSON(e);return t.portalItem={portal:this},t}return null}static _resultsToTypedArray(e,t,r,i){let s;if(r){const n=i!=null?i.signal:null;s=r.listings||r.notifications||r.userInvitations||r.tags||r.items||r.groups||r.comments||r.provisions||r.results||r.relatedItems||r,(e||t)&&(s=s.map(o=>{const l=Object.assign(e?e.fromJSON(o):o,t);return typeof l.load=="function"&&l.load(n),l}))}else s=[];return s}};U.AUTH_MODE_ANONYMOUS="anonymous",U.AUTH_MODE_AUTO="auto",U.AUTH_MODE_IMMEDIATE="immediate",U.AUTH_MODE_NO_PROMPT="no-prompt",a([u()],U.prototype,"access",void 0),a([u()],U.prototype,"allSSL",void 0),a([u()],U.prototype,"authMode",void 0),a([u()],U.prototype,"authorizedCrossOriginDomains",void 0),a([D("authorizedCrossOriginDomains")],U.prototype,"readAuthorizedCrossOriginDomains",null),a([u()],U.prototype,"basemapGalleryGroupQuery",void 0),a([u({json:{name:"3DBasemapGalleryGroupQuery"}})],U.prototype,"basemapGalleryGroupQuery3D",void 0),a([u()],U.prototype,"bingKey",void 0),a([u()],U.prototype,"canListApps",void 0),a([u()],U.prototype,"canListData",void 0),a([u()],U.prototype,"canListPreProvisionedItems",void 0),a([u()],U.prototype,"canProvisionDirectPurchase",void 0),a([u()],U.prototype,"canSearchPublic",void 0),a([u()],U.prototype,"canShareBingPublic",void 0),a([u()],U.prototype,"canSharePublic",void 0),a([u()],U.prototype,"canSignInArcGIS",void 0),a([u()],U.prototype,"canSignInIDP",void 0),a([u()],U.prototype,"colorSetsGroupQuery",void 0),a([u()],U.prototype,"commentsEnabled",void 0),a([u({type:Date})],U.prototype,"created",void 0),a([u()],U.prototype,"credential",void 0),a([u()],U.prototype,"culture",void 0),a([u()],U.prototype,"currentVersion",void 0),a([u()],U.prototype,"customBaseUrl",void 0),a([u()],U.prototype,"default3DBasemapQuery",void 0),a([u()],U.prototype,"defaultBasemap",void 0),a([D("defaultBasemap")],U.prototype,"readDefaultBasemap",null),a([u()],U.prototype,"defaultDevBasemap",void 0),a([D("defaultDevBasemap")],U.prototype,"readDefaultDevBasemap",null),a([u({type:it})],U.prototype,"defaultExtent",void 0),a([u()],U.prototype,"defaultVectorBasemap",void 0),a([D("defaultVectorBasemap")],U.prototype,"readDefaultVectorBasemap",null),a([u()],U.prototype,"description",void 0),a([u()],U.prototype,"devBasemapGalleryGroupQuery",void 0),a([u()],U.prototype,"eueiEnabled",void 0),a([u({readOnly:!0})],U.prototype,"extraQuery",null),a([u()],U.prototype,"featuredGroups",void 0),a([u()],U.prototype,"featuredItemsGroupQuery",void 0),a([u()],U.prototype,"galleryTemplatesGroupQuery",void 0),a([u()],U.prototype,"layoutGroupQuery",void 0),a([u()],U.prototype,"livingAtlasGroupQuery",void 0),a([u({readOnly:!0})],U.prototype,"hasAPIKey",null),a([u()],U.prototype,"hasCategorySchema",void 0),a([u()],U.prototype,"hasClassificationSchema",void 0),a([u()],U.prototype,"helpBase",void 0),a([u()],U.prototype,"helperServices",void 0),a([u()],U.prototype,"helpMap",void 0),a([u()],U.prototype,"homePageFeaturedContent",void 0),a([u()],U.prototype,"homePageFeaturedContentCount",void 0),a([u()],U.prototype,"httpPort",void 0),a([u()],U.prototype,"httpsPort",void 0),a([u()],U.prototype,"id",void 0),a([u()],U.prototype,"ipCntryCode",void 0),a([u({readOnly:!0})],U.prototype,"isOrganization",null),a([u()],U.prototype,"isPortal",void 0),a([u()],U.prototype,"isReadOnly",void 0),a([u({readOnly:!0})],U.prototype,"itemPageUrl",null),a([u()],U.prototype,"layerTemplatesGroupQuery",void 0),a([u()],U.prototype,"maxTokenExpirationMinutes",void 0),a([u({type:Date})],U.prototype,"modified",void 0),a([u()],U.prototype,"name",void 0),a([u()],U.prototype,"portalHostname",void 0),a([u()],U.prototype,"portalMode",void 0),a([u()],U.prototype,"portalProperties",void 0),a([u()],U.prototype,"region",void 0),a([u()],U.prototype,"recycleBinEnabled",void 0),a([u({readOnly:!0})],U.prototype,"restUrl",null),a([u()],U.prototype,"rotatorPanels",void 0),a([u()],U.prototype,"showHomePageDescription",void 0),a([u()],U.prototype,"sourceJSON",void 0),a([u()],U.prototype,"staticImagesUrl",void 0),a([u({json:{name:"2DStylesGroupQuery"}})],U.prototype,"stylesGroupQuery2d",void 0),a([u({json:{name:"stylesGroupQuery"}})],U.prototype,"stylesGroupQuery3d",void 0),a([u()],U.prototype,"supportsHostedServices",void 0),a([u()],U.prototype,"symbolSetsGroupQuery",void 0),a([u()],U.prototype,"templatesGroupQuery",void 0),a([u()],U.prototype,"thumbnail",void 0),a([u({readOnly:!0})],U.prototype,"thumbnailUrl",null),a([u()],U.prototype,"units",void 0),a([u()],U.prototype,"url",void 0),a([u()],U.prototype,"urlKey",void 0),a([D("urlKey")],U.prototype,"readUrlKey",null),a([u()],U.prototype,"user",void 0),a([D("user")],U.prototype,"readUser",null),a([u()],U.prototype,"use3dBasemaps",void 0),a([u()],U.prototype,"useDefault3dBasemap",void 0),a([u()],U.prototype,"useStandardizedQuery",void 0),a([u()],U.prototype,"useVectorBasemaps",void 0),a([u()],U.prototype,"vectorBasemapGalleryGroupQuery",void 0),U=Gr=a([_("esri.portal.Portal")],U);const Vr=U,qI=new FinalizationRegistry(e=>{e.remove()});function Fq(e){const t=ye;return()=>{const r=e.deref();r&&t.findCredential(r.restUrl)&&r.signIn().catch(()=>{})}}let ha=class extends Oe(R){constructor(t){super(t),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(t){return t!=null&&t.placement===this.placement&&t.style===this.style&&(this.color==null&&t.color==null||this.color!=null&&t.color!=null&&this.color.toJSON()===t.color.toJSON())}};a([u({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],ha.prototype,"type",void 0),a([u({type:Zz,json:{default:"begin-end",write:!0}})],ha.prototype,"placement",void 0),a([u({type:Jk,json:{default:"arrow",write:!0}})],ha.prototype,"style",void 0),a([u({type:ee,json:{type:[je],default:null,write:!0}})],ha.prototype,"color",void 0),ha=a([_("esri.symbols.LineStyleMarker3D")],ha);const I1=ha;var dy;let vs=dy=class extends zs{constructor(e){super(e),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=Mi(1),this.pattern=null,this.marker=null}clone(){const e={enabled:this.enabled,material:this.material!=null?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:this.pattern!=null?this.pattern.clone():null,marker:this.marker!=null?this.marker.clone():null};return new dy(e)}static fromSimpleLineSymbol(e){var r;const t={enabled:!0,size:e.width??Mi(1),cap:e.cap||"butt",join:e.join||"miter",pattern:e.style?new oS({style:e.style}):null,material:new Lr({color:(e.color||hp).clone()}),marker:e.marker?new I1({placement:e.marker.placement,style:e.marker.style,color:((r=e.marker.color)==null?void 0:r.clone())??null}):null};return new dy(t)}};a([u({type:Lr,json:{write:!0}})],vs.prototype,"material",void 0),a([re({Line:"line"},{readOnly:!0})],vs.prototype,"type",void 0),a([u({type:tP,json:{write:!0,default:"miter"}})],vs.prototype,"join",void 0),a([u({type:dS,json:{write:!0,default:"butt"}})],vs.prototype,"cap",void 0),a([u(Us)],vs.prototype,"size",void 0),a([u(Xk)],vs.prototype,"pattern",void 0),a([u({types:{key:"type",base:I1,typeMap:{style:I1}},json:{write:!0}})],vs.prototype,"marker",void 0),vs=dy=a([_("esri.symbols.LineSymbol3DLayer")],vs);const Lc=vs;var T1;const kq=Kt()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let Md=T1=class extends R{clone(){return new T1({href:this.href,primitive:this.primitive})}};a([u({type:String,json:{read:pS,write:dl}})],Md.prototype,"href",void 0),a([re(kq)],Md.prototype,"primitive",void 0),Md=T1=a([_("esri.symbols.support.ObjectSymbol3DLayerResource")],Md);var M1;let Ra=M1=class extends $e{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new M1({x:this.x,y:this.y,z:this.z})}};a([u({type:Number})],Ra.prototype,"x",void 0),a([u({type:Number})],Ra.prototype,"y",void 0),a([u({type:Number})],Ra.prototype,"z",void 0),Ra=M1=a([_("esri.symbols.support.Symbol3DAnchorPosition3D")],Ra);var E1;let nr=E1=class extends zs{constructor(e){super(e),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){var e,t,r;return new E1({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:(e=this.anchorPosition)==null?void 0:e.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:((t=this.material)==null?void 0:t.clone())??null,castShadows:this.castShadows,resource:(r=this.resource)==null?void 0:r.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}};a([u({type:Lr,json:{write:!0}})],nr.prototype,"material",void 0),a([u({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],nr.prototype,"castShadows",void 0),a([u({type:Md,json:{write:!0}})],nr.prototype,"resource",void 0),a([re({Object:"object"},{readOnly:!0})],nr.prototype,"type",void 0),a([u({type:Number,json:{write:!0}})],nr.prototype,"width",void 0),a([u({type:Number,json:{write:!0}})],nr.prototype,"height",void 0),a([u({type:Number,json:{write:!0}})],nr.prototype,"depth",void 0),a([re({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"},{default:"origin"})],nr.prototype,"anchor",void 0),a([u({type:Ra,json:{type:[Number],read:{reader:e=>new Ra({x:e[0],y:e[1],z:e[2]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y,e.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],nr.prototype,"anchorPosition",void 0),a([u({type:Number,json:{write:!0}})],nr.prototype,"heading",void 0),a([u({type:Number,json:{write:!0}})],nr.prototype,"tilt",void 0),a([u({type:Number,json:{write:!0}})],nr.prototype,"roll",void 0),a([u({readOnly:!0})],nr.prototype,"isPrimitive",null),nr=E1=a([_("esri.symbols.ObjectSymbol3DLayer")],nr);const mS=nr;var A1;let yr=A1=class extends zs{constructor(e){super(e),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(e,t){return e??(t.height==null&&t.size!=null?t.size:void 0)}readHeight(e,t){return e??(t.width==null&&t.size!=null?t.size:void 0)}clone(){return new A1({enabled:this.enabled,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}};a([u({type:Lr,json:{write:!0}})],yr.prototype,"material",void 0),a([u({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],yr.prototype,"castShadows",void 0),a([re({Path:"path"},{readOnly:!0})],yr.prototype,"type",void 0),a([u({type:["circle","quad"],json:{write:!0,default:"circle"}})],yr.prototype,"profile",void 0),a([u({type:tP,json:{write:!0,default:"miter"}})],yr.prototype,"join",void 0),a([u({type:cq,json:{write:!0,default:"butt"}})],yr.prototype,"cap",void 0),a([u({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],yr.prototype,"width",void 0),a([D("width",["width","size","height"])],yr.prototype,"readWidth",null),a([u({type:Number,json:{write:!0}})],yr.prototype,"height",void 0),a([D("height",["height","size","width"])],yr.prototype,"readHeight",null),a([u({type:["center","bottom","top"],json:{write:!0,default:"center"}})],yr.prototype,"anchor",void 0),a([u({type:["heading","all"],json:{write:!0,default:"all"}})],yr.prototype,"profileRotation",void 0),yr=A1=a([_("esri.symbols.PathSymbol3DLayer")],yr);const gS=yr;var C1;let Cu=C1=class extends R{constructor(){super(...arguments),this.color=new ee([0,0,0,1]),this.size=0}clone(){const e={color:M(this.color),size:this.size};return new C1(e)}};a([u(qo)],Cu.prototype,"color",void 0),a([u(Us)],Cu.prototype,"size",void 0),Cu=C1=a([_("esri.symbols.support.Symbol3DHalo")],Cu);let yp=class extends Oe(R){constructor(t){super(t),this.color=null}};a([u(qo)],yp.prototype,"color",void 0),yp=a([_("esri.symbols.support.Symbol3DTextBackground")],yp);var py;let Sr=py=class extends zs{constructor(e){super(e),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline"}get font(){return this._get("font")||null}set font(e){e!=null&&this._userSize!=null&&(e.size=this._userSize),this._set("font",e)}writeFont(e,t,r,i){const s={...i,textSymbol3D:!0};t.font=e.write({},s),delete t.font.size}get size(){var e;return this._userSize!=null?this._userSize:((e=this.font)==null?void 0:e.size)!=null?this.font.size:9}set size(e){this._userSize=e,this.font!=null&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const e=new py({enabled:this.enabled,font:this.font&&M(this.font),halo:this.halo&&M(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:this.material!=null?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:M(this.background)});return e._userSize=this._userSize,e}static fromTextSymbol(e){return new py({font:e.font!=null?e.font.clone():new Og,halo:Pq(e.haloColor,e.haloSize),horizontalAlignment:e.horizontalAlignment,lineHeight:e.lineHeight,material:e.color?new Lr({color:e.color.clone()}):null,text:e.text,verticalAlignment:e.verticalAlignment,background:e.backgroundColor?new yp({color:e.backgroundColor.clone()}):null})}};function Pq(e,t){return e&&t!=null&&t>0?new Cu({color:M(e),size:t}):null}a([u({type:Og,json:{write:!0}})],Sr.prototype,"font",null),a([B("font")],Sr.prototype,"writeFont",null),a([u({type:Cu,json:{write:!0}})],Sr.prototype,"halo",void 0),a([u({...iP,json:{default:"center",write:!0}})],Sr.prototype,"horizontalAlignment",void 0),a([u({...rP,json:{default:1,write:!0}})],Sr.prototype,"lineHeight",void 0),a([u({type:Lr,json:{write:!0}})],Sr.prototype,"material",void 0),a([u({type:yp,json:{write:!0}})],Sr.prototype,"background",void 0),a([u(Us)],Sr.prototype,"size",null),a([u({type:String,json:{write:!0}})],Sr.prototype,"text",void 0),a([re({Text:"text"},{readOnly:!0})],Sr.prototype,"type",void 0),a([u({...sP,json:{default:"baseline",write:!0}})],Sr.prototype,"verticalAlignment",void 0),Sr=py=a([_("esri.symbols.TextSymbol3DLayer")],Sr);const Nc=Sr;var O1;let Zn=O1=class extends zs{constructor(e){super(e),this.color=F1.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new O1({color:M(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}};a([u({type:ee,nonNullable:!0,json:{type:[je],write:(e,t,r)=>t[r]=e.toArray(ee.AlphaMode.UNLESS_OPAQUE),default:()=>F1.clone(),defaultEquals:e=>e.toCss(!0)===F1.toCss(!0)}})],Zn.prototype,"color",void 0),a([re({Water:"water"},{readOnly:!0})],Zn.prototype,"type",void 0),a([u({type:["small","medium","large"],json:{write:!0,default:"medium"}})],Zn.prototype,"waterbodySize",void 0),a([u({type:Number,json:{write:!0,default:null}})],Zn.prototype,"waveDirection",void 0),a([u({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],Zn.prototype,"waveStrength",void 0),Zn=O1=a([_("esri.symbols.WaterSymbol3DLayer")],Zn);const uP=Zn,F1=new ee([0,119,190]);var k1;let fa=k1=class extends $e{constructor(e){super(e),this.name=null,this.styleUrl=null,this.styleName=null,this.portal=null}clone(){return new k1({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};a([u({type:String})],fa.prototype,"name",void 0),a([u({type:String})],fa.prototype,"styleUrl",void 0),a([u({type:String})],fa.prototype,"styleName",void 0),a([u({type:Vr})],fa.prototype,"portal",void 0),fa=k1=a([_("esri.symbols.support.StyleOrigin")],fa);const P1=fa;var L1;let mp=L1=class extends $e{constructor(){super(...arguments),this.url=""}clone(){return new L1({url:this.url})}};a([u({type:String})],mp.prototype,"url",void 0),mp=L1=a([_("esri.symbols.support.Thumbnail")],mp);const cP={icon:za,object:mS,line:Lc,path:gS,fill:Sl,extrude:Hk,text:Nc,water:uP},Lq=ne.ofType({base:zs,key:"type",typeMap:cP,errorContext:"symbol-layer"});let bs=class extends Xt{constructor(t){super(t),this.styleOrigin=null,this.thumbnail=null,this.type=null;const r=this.__accessor__&&this.__accessor__.metadata&&this.__accessor__.metadata.symbolLayers,i=r==null?void 0:r.type,s=i||ne;this._set("symbolLayers",new s)}get color(){return null}set color(t){this.constructed&&G.getLogger(this).error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(t){b1(t,this._get("symbolLayers"))}readStyleOrigin(t,r,i){if(t.styleUrl&&t.name){const s=kc(t.styleUrl,i);return new P1({styleUrl:s,name:t.name})}if(t.styleName&&t.name)return new P1({portal:(i==null?void 0:i.portal)||Vr.getDefault(),styleName:t.styleName,name:t.name});i!=null&&i.messages&&i.messages.push(new os("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:i,definition:t}))}writeStyleOrigin(t,r,i,s){if(t.styleUrl&&t.name){let n=$h(t.styleUrl,s);ti(n)&&(n=rs(n)),r.styleOrigin={styleUrl:n,name:t.name}}else t.styleName&&t.name&&(t.portal&&(s!=null&&s.portal)&&!nF(t.portal.restUrl,s.portal.restUrl)?s!=null&&s.messages&&s.messages.push(new os("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):r.styleOrigin={styleName:t.styleName,name:t.name})}normalizeCtorArgs(t){return t instanceof zs||t&&cP[t.type]?{symbolLayers:[t]}:Array.isArray(t)?{symbolLayers:t}:t}};a([u({json:{read:!1,write:!1}})],bs.prototype,"color",null),a([u({type:Lq,nonNullable:!0,json:{write:!0}}),Ce($q)],bs.prototype,"symbolLayers",null),a([u({type:P1})],bs.prototype,"styleOrigin",void 0),a([D("styleOrigin")],bs.prototype,"readStyleOrigin",null),a([B("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],bs.prototype,"writeStyleOrigin",null),a([u({type:mp,json:{read:!1}})],bs.prototype,"thumbnail",void 0),a([u({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],bs.prototype,"type",void 0),bs=a([_("esri.symbols.Symbol3D")],bs);const xl=bs;let Ed=class extends R{constructor(t){super(t),this.visible=!0}clone(){throw new Error("Subclasses of Callout3D should implement their own clone method.")}};a([u({type:["line"],constructOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],Ed.prototype,"type",void 0),a([u({readOnly:!0})],Ed.prototype,"visible",void 0),Ed=a([_("esri.symbols.callouts.Callout3D")],Ed);const dP=Ed;var N1;let hy=N1=class extends R{constructor(e){super(e),this.color=new ee("white")}clone(){return new N1({color:M(this.color)})}};a([u(qo)],hy.prototype,"color",void 0),hy=N1=a([_("esri.symbols.callouts.LineCallout3DBorder")],hy);const Nq=hy;var R1;let Yn=R1=class extends dP{constructor(e){super(e),this.type="line",this.color=new ee([0,0,0,1]),this.size=Mi(1),this.border=null}get visible(){return this.size>0&&this.color!=null&&this.color.a>0}clone(){return new R1({color:M(this.color),size:this.size,border:M(this.border)})}};a([re({line:"line"})],Yn.prototype,"type",void 0),a([u(qo)],Yn.prototype,"color",void 0),a([u(Us)],Yn.prototype,"size",void 0),a([u({type:Nq,json:{write:!0}})],Yn.prototype,"border",void 0),a([u({readOnly:!0})],Yn.prototype,"visible",null),Yn=R1=a([_("esri.symbols.callouts.LineCallout3D")],Yn);const pP=Yn;function vS(e){if(!e)return!1;const t=e.verticalOffset;return!!t&&!(t.screenLength<=0||t.maxWorldLength!=null&&t.maxWorldLength<=0)}function hP(e){if(!e||!e.supportsCallout||!e.supportsCallout())return!1;const t=e.callout;return!!t&&!!t.visible&&!!vS(e)}const fP={types:{key:"type",base:dP,typeMap:{line:pP}},json:{write:!0}};var j1;let Yl=j1=class extends R{constructor(e){super(e),this.screenLength=0,this.minWorldLength=0,this.maxWorldLength=null}clone(){return new j1({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};a([u(Us)],Yl.prototype,"screenLength",void 0),a([u({type:Number,nonNullable:!0,json:{write:!0,default:0}})],Yl.prototype,"minWorldLength",void 0),a([u({type:Number,json:{write:!0}})],Yl.prototype,"maxWorldLength",void 0),Yl=j1=a([_("esri.symbols.support.Symbol3DVerticalOffset")],Yl);const bS=Yl;var fy;const yP=ne.ofType({base:null,key:"type",typeMap:{text:Nc}});let Qn=fy=class extends xl{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new yP,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return hP(this)}hasVisibleVerticalOffset(){return vS(this)}clone(){return new fy({styleOrigin:M(this.styleOrigin),symbolLayers:M(this.symbolLayers),thumbnail:M(this.thumbnail),callout:M(this.callout),verticalOffset:M(this.verticalOffset)})}static fromTextSymbol(e){return new fy({symbolLayers:new ne([Nc.fromTextSymbol(e)])})}};a([u({type:bS,json:{write:!0}})],Qn.prototype,"verticalOffset",void 0),a([u(fP)],Qn.prototype,"callout",void 0),a([u({json:{read:!1,write:!1}})],Qn.prototype,"styleOrigin",void 0),a([u({type:yP})],Qn.prototype,"symbolLayers",void 0),a([re({LabelSymbol3D:"label-3d"},{readOnly:!0})],Qn.prototype,"type",void 0),Qn=fy=a([_("esri.symbols.LabelSymbol3D")],Qn);const kg=Qn;var yy;const mP=ne.ofType({base:null,key:"type",typeMap:{line:Lc,path:gS}}),Rq=ne.ofType({base:null,key:"type",typeMap:{line:Lc,path:gS}});let Ad=yy=class extends xl{constructor(e){super(e),this.symbolLayers=new mP,this.type="line-3d"}clone(){return new yy({styleOrigin:M(this.styleOrigin),symbolLayers:M(this.symbolLayers),thumbnail:M(this.thumbnail)})}static fromSimpleLineSymbol(e){return new yy({symbolLayers:new ne([Lc.fromSimpleLineSymbol(e)])})}};a([u({type:mP,json:{type:Rq}})],Ad.prototype,"symbolLayers",void 0),a([re({LineSymbol3D:"line-3d"},{readOnly:!0})],Ad.prototype,"type",void 0),Ad=yy=a([_("esri.symbols.LineSymbol3D")],Ad);const Il=Ad;let Kn=class extends Xt{constructor(t){super(t),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};a([u({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],Kn.prototype,"angle",void 0),a([u({type:["simple-marker","picture-marker"],readOnly:!0})],Kn.prototype,"type",void 0),a([u({type:Number,cast:Se,json:{write:!0}})],Kn.prototype,"xoffset",void 0),a([u({type:Number,cast:Se,json:{write:!0}})],Kn.prototype,"yoffset",void 0),a([u({cast:e=>e==="auto"?e:wc(Se(e)),json:{write:!0}})],Kn.prototype,"size",void 0),Kn=a([_("esri.symbols.MarkerSymbol")],Kn);const gP=Kn;var my;const vP=ne.ofType({base:null,key:"type",typeMap:{fill:Sl}});let Cd=my=class extends xl{constructor(e){super(e),this.symbolLayers=new vP,this.type="mesh-3d"}clone(){return new my({styleOrigin:M(this.styleOrigin),symbolLayers:M(this.symbolLayers),thumbnail:M(this.thumbnail)})}static fromSimpleFillSymbol(e){return new my({symbolLayers:new ne([Sl.fromSimpleFillSymbol(e)])})}};a([u({type:vP})],Cd.prototype,"symbolLayers",void 0),a([re({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],Cd.prototype,"type",void 0),Cd=my=a([_("esri.symbols.MeshSymbol3D")],Cd);const Sh=Cd;function jq(e,t,r){return t.imageData?oF({mediaType:t.contentType||"image/png",isBase64:!0,data:t.imageData}):bP(t.url,r)}function bP(e,t){if(!ti(e)){const r=Vq(t);if(r)return rl(r,"images",e)}return kc(e,t)}function Dq(e,t,r,i){if(wl(e)){const s=jp(e);if(!s)return;t.contentType=s.mediaType,t.imageData=s.data,r&&r.imageData===t.imageData&&r.url&&dl(r.url,t,"url",i)}else dl(e,t,"url",i)}const wP={json:{read:{source:["imageData","url"],reader:jq},write:{writer(e,t,r,i){Dq(e,t,this.source,i)}}}},_P={readOnly:!0,json:{read:{source:["imageData","url"],reader(e,t,r){const i={};return t.imageData&&(i.imageData=t.imageData),t.contentType&&(i.contentType=t.contentType),t.url&&(i.url=bP(t.url,r)),i}}}};function Vq(e){var s,n;if(!e)return null;const{origin:t,layer:r}=e;if(t!=="service"&&t!=="portal-item")return null;const i=r==null?void 0:r.type;return i==="feature"||i==="stream"?(s=r.parsedUrl)==null?void 0:s.path:i==="map-image"||i==="tile"?(n=e.url)==null?void 0:n.path:null}var D1;let fi=D1=class extends Zk{constructor(...e){super(...e),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(e,t,r,i){if(e&&typeof e!="string"&&e.imageData==null)return e;const s={};return e&&(s.url=e),t&&(s.outline=t),r!=null&&(s.width=Se(r)),i!=null&&(s.height=Se(i)),s}clone(){const e=new D1({color:M(this.color),height:this.height,outline:M(this.outline),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return e._set("source",M(this.source)),e}hash(){var e;return`${super.hash()}.${(e=this.color)==null?void 0:e.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};a([re({esriPFS:"picture-fill"},{readOnly:!0})],fi.prototype,"type",void 0),a([u(wP)],fi.prototype,"url",void 0),a([u({type:Number,json:{write:!0}})],fi.prototype,"xscale",void 0),a([u({type:Number,json:{write:!0}})],fi.prototype,"yscale",void 0),a([u({type:Number,cast:Se,json:{write:!0}})],fi.prototype,"width",void 0),a([u({type:Number,cast:Se,json:{write:!0}})],fi.prototype,"height",void 0),a([u({type:Number,cast:Se,json:{write:!0}})],fi.prototype,"xoffset",void 0),a([u({type:Number,cast:Se,json:{write:!0}})],fi.prototype,"yoffset",void 0),a([u(_P)],fi.prototype,"source",void 0),fi=D1=a([_("esri.symbols.PictureFillSymbol")],fi);const wS=fi;var V1;let Ri=V1=class extends gP{constructor(...e){super(...e),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(e,t,r){if(e&&typeof e!="string"&&e.imageData==null)return e;const i={};return e&&(i.url=e),t!=null&&(i.width=Se(t)),r!=null&&(i.height=Se(r)),i}readHeight(e,t){return t.size||e}readWidth(e,t){return t.size||e}clone(){const e=new V1({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return e._set("source",M(this.source)),e}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};a([u({json:{write:!1}})],Ri.prototype,"color",void 0),a([re({esriPMS:"picture-marker"},{readOnly:!0})],Ri.prototype,"type",void 0),a([u(wP)],Ri.prototype,"url",void 0),a([u(_P)],Ri.prototype,"source",void 0),a([u({type:Number,cast:Se,json:{write:!0}})],Ri.prototype,"height",void 0),a([D("height",["height","size"])],Ri.prototype,"readHeight",null),a([u({type:Number,cast:Se,json:{write:!0}})],Ri.prototype,"width",void 0),a([u({json:{write:!1}})],Ri.prototype,"size",void 0),Ri=V1=a([_("esri.symbols.PictureMarkerSymbol")],Ri);const xh=Ri;var ya;const $P=ne.ofType({base:null,key:"type",typeMap:{icon:za,object:mS,text:Nc}});let ma=ya=class extends xl{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.symbolLayers=new $P,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const e of this.symbolLayers.items)switch(e.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return hP(this)}hasVisibleVerticalOffset(){return vS(this)}clone(){return new ya({verticalOffset:M(this.verticalOffset),callout:M(this.callout),styleOrigin:M(this.styleOrigin),symbolLayers:M(this.symbolLayers),thumbnail:M(this.thumbnail)})}static fromSimpleMarkerSymbol(e){return new ya({symbolLayers:new ne([za.fromSimpleMarkerSymbol(e)])})}static fromPictureMarkerSymbol(e){return new ya({symbolLayers:new ne([za.fromPictureMarkerSymbol(e)])})}static fromCIMSymbol(e){var i,s;if(((s=(i=e.data)==null?void 0:i.symbol)==null?void 0:s.type)!=="CIMPointSymbol")return null;const r=e.data.symbol;return new ya(r!=null&&r.callout?{symbolLayers:new ne([za.fromCIMSymbol(e)]),callout:new pP({size:.5,color:new ee([0,0,0])}),verticalOffset:new bS({screenLength:40})}:{symbolLayers:new ne([za.fromCIMSymbol(e)])})}static fromTextSymbol(e){return new ya({symbolLayers:new ne([Nc.fromTextSymbol(e)])})}};a([u({type:bS,json:{write:!0}})],ma.prototype,"verticalOffset",void 0),a([u(fP)],ma.prototype,"callout",void 0),a([u({type:$P,json:{origins:{"web-scene":{write:!0}}}})],ma.prototype,"symbolLayers",void 0),a([re({PointSymbol3D:"point-3d"},{readOnly:!0})],ma.prototype,"type",void 0),ma=ya=a([_("esri.symbols.PointSymbol3D")],ma);const mn=ma;function Uq(e,t,r){return Rs(e.map((i,s)=>t.apply(r,[i,s])))}async function zq(e,t,r){return(await Rs(e.map((i,s)=>t.apply(r,[i,s])))).map(i=>i.value)}function _S(e){return{ok:!0,value:e}}function $S(e){return{ok:!1,error:e}}function qq(e){return e!=null&&e.ok===!0?e.value:null}function Gq(e){return e!=null&&e.ok===!1?e.error:null}async function SS(e){if(e==null)return{ok:!1,error:new Error("no promise provided")};try{return _S(await e)}catch(t){return $S(t)}}async function Bq(e){try{return _S(await e)}catch(t){return Fs(t),$S(t)}}function Uue(e,t){return new Xn(e,t)}let Xn=class extends $e{get value(){return qq(this._result)}get error(){return Gq(this._result)}get finished(){return this._result!=null}constructor(t,r){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=HA(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:i}=this._abortController;this.promise=t(i),this.promise.then(s=>{this._result=_S(s),this._cleanup()},s=>{this._result=$S(s),this._cleanup()}),this._abortHandle=el(r,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=ts(this._abortHandle),this._abortController=null}};a([u()],Xn.prototype,"value",null),a([u()],Xn.prototype,"error",null),a([u()],Xn.prototype,"finished",null),a([u()],Xn.prototype,"promise",void 0),a([u()],Xn.prototype,"_result",void 0),Xn=a([_("esri.core.asyncUtils.ReactiveTask")],Xn);function W(e,t,r={}){return xS(e,t,r,Hq)}function Oo(e,t,r={}){return xS(e,t,r,xP)}function xS(e,t,r={},i){let s=null;const n=r.once?(o,l)=>{i(o)&&(ts(s),t(o,l))}:(o,l)=>{i(o)&&t(o,l)};if(s=I6(e,n,r.sync,r.equals),r.initial){const o=e();n(o,o)}return s}function pc(e,t,r,i={}){let s=null,n=null,o=null;function l(){var h;s&&n&&(n.remove(),(h=i.onListenerRemove)==null||h.call(i,s),s=null,n=null)}function c(h){i.once&&i.once&&ts(o),r(h)}const p=W(e,(h,f)=>{var y;l(),lg(h)&&(s=h,n=ug(h,t,c),(y=i.onListenerAdd)==null||y.call(i,h))},{sync:i.sync,initial:!0});return o=pt(()=>{p.remove(),l()}),o}function SP(e,t){return Wq(e,xP,t)}function Wq(e,t,r){if(Lo(r))return Promise.reject(Jt());const i=e();if(t!=null&&t(i))return Promise.resolve(i);let s=null;function n(){s=ts(s)}return new Promise((o,l)=>{s=nh([el(r,()=>{n(),l(Jt())}),xS(e,c=>{n(),o(c)},{sync:!1,once:!0},t)])})}function Hq(e){return!0}function xP(e){return!!e}const Pg={sync:!0},Ae={initial:!0},IP={sync:!0,initial:!0};var Od;const TP=ne.ofType({base:null,key:"type",typeMap:{extrude:Hk,fill:Sl,icon:za,line:Lc,object:mS,text:Nc,water:uP}});let Fd=Od=class extends xl{constructor(e){super(e),this.symbolLayers=new TP,this.type="polygon-3d"}initialize(){const e=t=>{t.type==="line"&&Cp(G.getLogger(this),"LineSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use FillSymbol3DLayer.outline instead.",version:"4.28"}),t.type==="text"&&Cp(G.getLogger(this),"TextSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use Labels instead.",version:"4.28"})};for(const t of this.symbolLayers)e(t);this.addHandles(pc(()=>this.symbolLayers,"after-add",({item:t})=>e(t),Pg))}clone(){return new Od({styleOrigin:M(this.styleOrigin),symbolLayers:M(this.symbolLayers),thumbnail:M(this.thumbnail)})}static fromJSON(e){var r;const t=new Od;if(t.read(e),t.symbolLayers.length===2&&t.symbolLayers.at(0).type==="fill"&&t.symbolLayers.at(1).type==="line"){const i=t.symbolLayers.at(0),s=t.symbolLayers.at(1);!s.enabled||(r=e.symbolLayers)!=null&&r[1]&&e.symbolLayers[1].enable===!1||(i.outline={size:s.size,color:s.material!=null?s.material.color:null}),t.symbolLayers.removeAt(1)}return t}static fromSimpleFillSymbol(e){return new Od({symbolLayers:new ne([Sl.fromSimpleFillSymbol(e)])})}};a([u({type:TP,json:{write:!0}})],Fd.prototype,"symbolLayers",void 0),a([re({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],Fd.prototype,"type",void 0),Fd=Od=a([_("esri.symbols.PolygonSymbol3D")],Fd);const Go=Fd;var U1;const D0=new ve({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let ga=U1=class extends Zk{constructor(...e){super(...e),this.color=new ee([0,0,0,.25]),this.outline=new Ur,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(e,t,r){if(e&&typeof e!="string")return e;const i={};return e&&(i.style=e),t&&(i.outline=t),r&&(i.color=r),i}clone(){return new U1({color:M(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};a([u()],ga.prototype,"color",void 0),a([u()],ga.prototype,"outline",void 0),a([re({esriSFS:"simple-fill"},{readOnly:!0})],ga.prototype,"type",void 0),a([u({type:D0.apiValues,json:{read:D0.read,write:D0.write}})],ga.prototype,"style",void 0),ga=U1=a([_("esri.symbols.SimpleFillSymbol")],ga);const En=ga;var z1;const V0=new ve({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let ws=z1=class extends gP{constructor(...e){super(...e),this.color=new ee([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new Ur}normalizeCtorArgs(e,t,r,i){if(e&&typeof e!="string")return e;const s={};return e&&(s.style=e),t!=null&&(s.size=Se(t)),r&&(s.outline=r),i&&(s.color=i),s}writeColor(e,t){e&&this.style!=="x"&&this.style!=="cross"&&(t.color=e.toJSON()),e===null&&(t.color=null)}set path(e){this.style="path",this._set("path",e)}clone(){return new z1({angle:this.angle,color:M(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var e;return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${(e=this.outline)==null?void 0:e.hash()}`}};a([u()],ws.prototype,"color",void 0),a([B("color")],ws.prototype,"writeColor",null),a([re({esriSMS:"simple-marker"},{readOnly:!0})],ws.prototype,"type",void 0),a([u()],ws.prototype,"size",void 0),a([u({type:V0.apiValues,json:{read:V0.read,write:V0.write}})],ws.prototype,"style",void 0),a([u({type:String,json:{write:!0}})],ws.prototype,"path",null),a([u({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":Ur}},json:{default:null,write:!0}})],ws.prototype,"outline",void 0),ws=z1=a([_("esri.symbols.SimpleMarkerSymbol")],ws);const qs=ws;var q1;let Be=q1=class extends Xt{constructor(...e){super(...e),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new Og,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(e,t,r){if(e&&typeof e!="string")return e;const i={};return e&&(i.text=e),t&&(i.font=t),r&&(i.color=r),i}writeLineWidth(e,t,r,i){i&&typeof i!="string"?i.origin:t[r]=e}castLineWidth(e){return Se(e)}writeLineHeight(e,t,r,i){i&&typeof i!="string"?i.origin:t[r]=e}clone(){return new q1({angle:this.angle,backgroundColor:M(this.backgroundColor),borderLineColor:M(this.borderLineColor),borderLineSize:this.borderLineSize,color:M(this.color),font:this.font&&this.font.clone(),haloColor:M(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var e,t,r;return`${(e=this.backgroundColor)==null?void 0:e.hash()}.${this.borderLineColor}.${this.borderLineSize}.${(t=this.color)==null?void 0:t.hash()}.${this.font&&this.font.hash()}.${(r=this.haloColor)==null?void 0:r.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};a([u({type:ee,json:{write:!0}})],Be.prototype,"backgroundColor",void 0),a([u({type:ee,json:{write:!0}})],Be.prototype,"borderLineColor",void 0),a([u({type:Number,json:{write:!0},cast:Se})],Be.prototype,"borderLineSize",void 0),a([u({type:Og,json:{write:!0}})],Be.prototype,"font",void 0),a([u({...iP,json:{write:!0}})],Be.prototype,"horizontalAlignment",void 0),a([u({type:Boolean,json:{write:!0}})],Be.prototype,"kerning",void 0),a([u({type:ee,json:{write:!0}})],Be.prototype,"haloColor",void 0),a([u({type:Number,cast:Se,json:{write:!0}})],Be.prototype,"haloSize",void 0),a([u({type:Boolean,json:{write:!0}})],Be.prototype,"rightToLeft",void 0),a([u({type:Boolean,json:{write:!0}})],Be.prototype,"rotated",void 0),a([u({type:String,json:{write:!0}})],Be.prototype,"text",void 0),a([re({esriTS:"text"},{readOnly:!0})],Be.prototype,"type",void 0),a([u({...sP,json:{write:!0}})],Be.prototype,"verticalAlignment",void 0),a([u({type:Number,cast:Se,json:{write:!0}})],Be.prototype,"xoffset",void 0),a([u({type:Number,cast:Se,json:{write:!0}})],Be.prototype,"yoffset",void 0),a([u({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],Be.prototype,"angle",void 0),a([u({type:Number,json:{write:!0}})],Be.prototype,"width",void 0),a([u({type:Number})],Be.prototype,"lineWidth",void 0),a([B("lineWidth")],Be.prototype,"writeLineWidth",null),a([Ce("lineWidth")],Be.prototype,"castLineWidth",null),a([u(rP)],Be.prototype,"lineHeight",void 0),a([B("lineHeight")],Be.prototype,"writeLineHeight",null),Be=q1=a([_("esri.symbols.TextSymbol")],Be);const Rc=Be;var G1;let ji=G1=class extends Xt{constructor(e){super(e),this.color=null,this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get _fetchCacheKey(){const e=this.portal!=null?this.portal:Vr.getDefault(),t=e.user?e.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${t}:${e.url}`}read(e,t){this.portal=t==null?void 0:t.portal,super.read(e,t)}clone(){return new G1({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(e){return this._fetchSymbol("webRef",e)}fetchCIMSymbol(e){return this._fetchSymbol("cimRef",e)}async _fetchSymbol(e,t){const r=t!=null?t.cache:null,i=r?this._fetchCacheKey:null;if(r!=null){const l=i&&r.get(i);if(l)return l.clone()}const{resolveWebStyleSymbol:s}=await j(()=>import("./webStyleSymbolUtils-Dr1LS95c.js"),__vite__mapDeps([11,12]));si(t);const n=s(this,{portal:this.portal},e,t);n.catch(l=>{G.getLogger(this).error("#fetchSymbol()","Failed to create symbol from style",l)});const o=await n;return e==="webRef"&&o.type==="point-3d"||e==="cimRef"&&o.type==="cim"?(r!=null&&r.set(i,o.clone()),o):null}};a([u({json:{write:!1}})],ji.prototype,"color",void 0),a([u({type:String,json:{write:!0}})],ji.prototype,"styleName",void 0),a([u({type:Vr,json:{write:!1}})],ji.prototype,"portal",void 0),a([u({type:String,json:{read:pS,write:dl}})],ji.prototype,"styleUrl",void 0),a([u({type:mp,json:{read:!1}})],ji.prototype,"thumbnail",void 0),a([u({type:String,json:{write:!0}})],ji.prototype,"name",void 0),a([re({styleSymbolReference:"web-style"},{readOnly:!0})],ji.prototype,"type",void 0),a([u()],ji.prototype,"_fetchCacheKey",null),ji=G1=a([_("esri.symbols.WebStyleSymbol")],ji);const Tl=ji;function Lg(e){if(!e)return!1;switch(e.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function hc(e){if(!e)return!1;switch(e.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const So={base:Xt,key:"type",typeMap:{"simple-fill":En,"picture-fill":wS,"picture-marker":xh,"simple-line":Ur,"simple-marker":qs,text:Rc,"label-3d":kg,"line-3d":Il,"mesh-3d":Sh,"point-3d":mn,"polygon-3d":Go,"web-style":Tl,cim:Mn},errorContext:"symbol"},que={base:Xt,key:"type",typeMap:{"picture-marker":xh,"simple-marker":qs,"point-3d":mn,cim:Mn},errorContext:"symbol"},Gue={base:Xt,key:"type",typeMap:{"simple-line":Ur,"line-3d":Il,cim:Mn},errorContext:"symbol"},Bue={base:Xt,key:"type",typeMap:{"simple-fill":En,"picture-fill":wS,"polygon-3d":Go,cim:Mn},errorContext:"symbol"},Jq={base:Xt,key:"type",typeMap:{"picture-marker":xh,"simple-marker":qs,text:Rc,"web-style":Tl,cim:Mn},errorContext:"symbol"},Zq=_c({types:So}),MP={base:Xt,key:"type",typeMap:{"simple-fill":En,"picture-fill":wS,"picture-marker":xh,"simple-line":Ur,"simple-marker":qs,text:Rc,"line-3d":Il,"mesh-3d":Sh,"point-3d":mn,"polygon-3d":Go,"web-style":Tl,cim:Mn},errorContext:"symbol"},Yq={base:Xt,key:"type",typeMap:{text:Rc,"label-3d":kg},errorContext:"symbol"},GI={base:Xt,key:"type",typeMap:{"line-3d":Il,"mesh-3d":Sh,"point-3d":mn,"polygon-3d":Go,"web-style":Tl,cim:Mn},errorContext:"symbol"},Qq={base:Xt,key:"type",typeMap:{"label-3d":kg},errorContext:"symbol"},EP=Ti(So);var B1;let kd=B1=class extends R{constructor(e){super(e),this.minValue=0,this.maxValue=0}clone(){return new B1({minValue:this.minValue,maxValue:this.maxValue})}};a([u({type:Number,json:{write:!0}})],kd.prototype,"minValue",void 0),a([u({type:Number,json:{write:!0}})],kd.prototype,"maxValue",void 0),kd=B1=a([_("esri.renderers.support.AuthoringInfoClassBreakInfo")],kd);var W1;let ho=W1=class extends R{constructor(e){super(e),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=new Array}clone(){return new W1({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:M(this.classBreakInfos)})}};a([u({type:String,json:{write:!0}})],ho.prototype,"field",void 0),a([u({type:String,json:{write:!0}})],ho.prototype,"normalizationField",void 0),a([u({type:String,json:{write:!0}})],ho.prototype,"label",void 0),a([u({type:[kd],json:{write:!0}})],ho.prototype,"classBreakInfos",void 0),ho=W1=a([_("esri.renderers.support.AuthoringInfoFieldInfo")],ho);var H1;let Ql=H1=class extends R{constructor(e){super(e),this.label=null,this.size=null,this.value=null}clone(){return new H1({label:this.label,value:this.value,size:this.size})}};a([u({type:String,json:{write:!0}})],Ql.prototype,"label",void 0),a([u({type:Number,json:{write:!0}})],Ql.prototype,"size",void 0),a([u({type:Number,json:{write:!0}})],Ql.prototype,"value",void 0),Ql=H1=a([_("esri.renderers.support.AuthoringInfoSizeStop")],Ql);const Kq=Ql;var J1;const nf=new ve({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),of=new ve({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),BI={key:e=>typeof e=="number"?"number":"string",typeMap:{number:Number,string:String},base:null},WI=["high-to-low","above-and-below","centered-on","extremes"],HI=[...new Set(["high-to-low","above-and-below","centered-on","extremes","above","below","high-to-low","above-and-below","above","below","reference-size"])],JI=["seconds","minutes","hours","days","months","years"],Xq=["circle","diamond","hexagon-flat","hexagon-pointy","square"];let Pt=J1=class extends R{constructor(e){super(e),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(e){return typeof e=="string"||typeof e=="number"?e:null}get normalizationField(){return this.theme==="reference-size"?this._get("normalizationField"):null}set normalizationField(e){this._set("normalizationField",e)}get referenceSizeScale(){return this.theme==="reference-size"?this._get("referenceSizeScale"):null}set referenceSizeScale(e){this._set("referenceSizeScale",e)}get referenceSizeSymbolStyle(){return this.theme==="reference-size"?this._get("referenceSizeSymbolStyle"):null}set referenceSizeSymbolStyle(e){this._set("referenceSizeSymbolStyle",e)}castStartTime(e){return typeof e=="string"||typeof e=="number"?e:null}get sizeStops(){return this.theme==="reference-size"?this._get("sizeStops"):null}set sizeStops(e){this._set("sizeStops",e)}get style(){return this.type==="color"?this._get("style"):null}set style(e){this._set("style",e)}get theme(){return this.type==="color"||this.type==="size"?this._get("theme")||"high-to-low":null}set theme(e){this._set("theme",e)}clone(){return new J1({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,normalizationField:this.normalizationField,referenceSizeScale:this.referenceSizeScale,referenceSizeSymbolStyle:this.referenceSizeSymbolStyle,sizeStops:M(this.sizeStops),startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};a([u({types:BI,json:{write:!0}})],Pt.prototype,"endTime",void 0),a([Ce("endTime")],Pt.prototype,"castEndTime",null),a([u({type:String,json:{write:!0}})],Pt.prototype,"field",void 0),a([u({type:Number,json:{write:!0}})],Pt.prototype,"maxSliderValue",void 0),a([u({type:Number,json:{write:!0}})],Pt.prototype,"minSliderValue",void 0),a([u({type:String,json:{origins:{"web-scene":{write:!1}},write:!0}})],Pt.prototype,"normalizationField",null),a([u({type:Number,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],Pt.prototype,"referenceSizeScale",null),a([u({type:Xq,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],Pt.prototype,"referenceSizeSymbolStyle",null),a([u({types:BI,json:{write:!0}})],Pt.prototype,"startTime",void 0),a([Ce("startTime")],Pt.prototype,"castStartTime",null),a([u({type:[Kq],json:{origins:{"web-scene":{write:!1}},write:!0}})],Pt.prototype,"sizeStops",null),a([u({type:nf.apiValues,value:null,json:{type:nf.jsonValues,read:nf.read,write:nf.write}})],Pt.prototype,"style",null),a([u({type:HI,value:null,json:{type:HI,origins:{"web-scene":{type:WI,write:{writer:(e,t)=>{WI.includes(e)&&(t.theme=e)}}}},write:!0}})],Pt.prototype,"theme",null),a([u({type:of.apiValues,json:{type:of.jsonValues,read:of.read,write:of.write}})],Pt.prototype,"type",void 0),a([u({type:JI,json:{type:JI,write:!0}})],Pt.prototype,"units",void 0),Pt=J1=a([_("esri.renderers.support.AuthoringInfoVisualVariable")],Pt);const eG=Pt;let gy=class extends R{constructor(t){super(t),this.type=null}};a([u({readOnly:!0,json:{read:!1,write:!0}})],gy.prototype,"type",void 0),gy=a([_("esri.rest.support.ColorRamp")],gy);const IS=gy;var Z1;let va=Z1=class extends IS{constructor(e){super(e),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new Z1({fromColor:M(this.fromColor),toColor:M(this.toColor),algorithm:this.algorithm})}};a([re({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],va.prototype,"algorithm",void 0),a([u({type:ee,json:{type:[je],write:!0}})],va.prototype,"fromColor",void 0),a([u({type:ee,json:{type:[je],write:!0}})],va.prototype,"toColor",void 0),a([u({type:["algorithmic"]})],va.prototype,"type",void 0),va=Z1=a([_("esri.rest.support.AlgorithmicColorRamp")],va);const TS=va;var Y1;let Pd=Y1=class extends IS{constructor(e){super(e),this.colorRamps=null,this.type="multipart"}clone(){return new Y1({colorRamps:M(this.colorRamps)})}};a([u({type:[TS],json:{write:!0}})],Pd.prototype,"colorRamps",void 0),a([u({type:["multipart"]})],Pd.prototype,"type",void 0),Pd=Y1=a([_("esri.rest.support.MultipartColorRamp")],Pd);const AP=Pd,tG={key:"type",base:IS,typeMap:{algorithmic:TS,multipart:AP}};function rG(e){return e!=null&&e.type?e.type==="algorithmic"?TS.fromJSON(e):e.type==="multipart"?AP.fromJSON(e):null:null}var Q1;const Ko=new ve({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),af=new ve({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),ZI=new ve({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),YI=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers"],iG=["high-to-low","above-and-below","above","below"],sG=["flow-line","wave-front"],nG=["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"];let et=Q1=class extends R{constructor(e){super(e),this.colorRamp=null,this.fadeRatio=null,this.isAutoGenerated=!1,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const e=this._get("classificationMethod"),t=this.type;return t&&t!=="relationship"?t==="class-breaks-size"||t==="class-breaks-color"?e||"manual":null:e}set classificationMethod(e){this._set("classificationMethod",e)}readColorRamp(e){return e?rG(e):void 0}get fields(){return this.type&&this.type!=="predominance"?null:this._get("fields")}set fields(e){this._set("fields",e)}get field1(){return this.type&&this.type!=="relationship"?null:this._get("field1")}set field1(e){this._set("field1",e)}get field2(){return this.type&&this.type!=="relationship"?null:this._get("field2")}set field2(e){this._set("field2",e)}get flowTheme(){return this.type==="flow"?this._get("flowTheme"):null}set flowTheme(e){this._set("flowTheme",e)}get focus(){return this.type&&this.type!=="relationship"?null:this._get("focus")}set focus(e){this._set("focus",e)}get numClasses(){return this.type&&this.type!=="relationship"?null:this._get("numClasses")}set numClasses(e){this._set("numClasses",e)}get statistics(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("statistics"):null}set statistics(e){this._set("statistics",e)}get standardDeviationInterval(){const e=this.type;return e&&e!=="relationship"&&e!=="class-breaks-size"&&e!=="class-breaks-color"||this.classificationMethod&&this.classificationMethod!=="standard-deviation"?null:this._get("standardDeviationInterval")}set standardDeviationInterval(e){this._set("standardDeviationInterval",e)}get type(){return this._get("type")}set type(e){let t=e;e==="classed-size"?t="class-breaks-size":e==="classed-color"&&(t="class-breaks-color"),this._set("type",t)}get univariateSymbolStyle(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(e){this._set("univariateSymbolStyle",e)}get univariateTheme(){return this.type==="univariate-color-size"?this._get("univariateTheme"):null}set univariateTheme(e){this._set("univariateTheme",e)}clone(){var e;return new Q1({classificationMethod:this.classificationMethod,colorRamp:M(this.colorRamp),fadeRatio:M(this.fadeRatio),fields:(e=this.fields)==null?void 0:e.slice(),field1:M(this.field1),field2:M(this.field2),isAutoGenerated:this.isAutoGenerated,focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(t=>t.clone()),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}};a([u({type:Ko.apiValues,value:null,json:{type:Ko.jsonValues,read:Ko.read,write:Ko.write,origins:{"web-document":{default:"manual",type:Ko.jsonValues,read:Ko.read,write:Ko.write}}}})],et.prototype,"classificationMethod",null),a([u({types:tG,json:{write:!0}})],et.prototype,"colorRamp",void 0),a([D("colorRamp")],et.prototype,"readColorRamp",null),a([u({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],et.prototype,"fadeRatio",void 0),a([u({type:[String],value:null,json:{write:!0}})],et.prototype,"fields",null),a([u({type:ho,value:null,json:{write:!0}})],et.prototype,"field1",null),a([u({type:ho,value:null,json:{write:!0}})],et.prototype,"field2",null),a([u({type:sG,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],et.prototype,"flowTheme",null),a([u({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],et.prototype,"focus",null),a([u({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],et.prototype,"isAutoGenerated",void 0),a([u({type:Number,value:null,json:{type:je,write:!0}})],et.prototype,"numClasses",null),a([u({type:YI,json:{type:YI,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],et.prototype,"lengthUnit",void 0),a([u({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],et.prototype,"maxSliderValue",void 0),a([u({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],et.prototype,"minSliderValue",void 0),a([u({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],et.prototype,"statistics",null),a([u({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],et.prototype,"standardDeviationInterval",null),a([u({type:af.apiValues,value:null,json:{type:af.jsonValues,read:af.read,write:af.write,origins:{"web-scene":{type:ZI.jsonValues,write:{writer:ZI.write,overridePolicy:e=>({enabled:e!=="flow"})}}}}})],et.prototype,"type",null),a([u({type:[eG],json:{write:!0}})],et.prototype,"visualVariables",void 0),a([u({type:nG,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],et.prototype,"univariateSymbolStyle",null),a([u({type:iG,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],et.prototype,"univariateTheme",null),et=Q1=a([_("esri.renderers.support.AuthoringInfo")],et);const MS=et,U0=new ve({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary",pieChart:"pie-chart"},{ignoreUnknown:!0});let Ld=class extends R{constructor(t){super(t),this.authoringInfo=null,this.type=null}async getRequiredFields(t){if(!this.collectRequiredFields)return[];const r=new Set;return await this.collectRequiredFields(r,t),Array.from(r).sort()}getSymbol(t,r){}async getSymbolAsync(t,r){}getSymbols(){return[]}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};a([u({type:MS,json:{write:!0}})],Ld.prototype,"authoringInfo",void 0),a([u({type:U0.apiValues,readOnly:!0,json:{type:U0.jsonValues,read:!1,write:{writer:U0.write,ignoreOrigin:!0}}})],Ld.prototype,"type",void 0),Ld=a([_("esri.renderers.Renderer")],Ld);const An=Ld;function oG(e){var t,r;return((r=(t=e.match(aG))==null?void 0:t[1])==null?void 0:r.replace(/\\'/g,"'"))??null}const aG=/^hash\(\$feature\['((\\'|[^'])+)'\]\) \* 8\.381e-8$/;let Nd=class extends Oe(R){constructor(){super(...arguments),this.showLegend=null,this.title=null}};a([u({type:Boolean,json:{write:!0}})],Nd.prototype,"showLegend",void 0),a([u({type:String,json:{write:!0}})],Nd.prototype,"title",void 0),Nd=a([_("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],Nd);const CP=Nd,z0=new ve({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let Di=class extends R{constructor(t){super(t),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(t){return t==null?t:typeof t=="function"?(G.getLogger(this).error(".field: field must be a string value"),null):dh(t)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};a([u()],Di.prototype,"index",void 0),a([u({type:z0.apiValues,readOnly:!0,json:{read:z0.read,write:z0.write}})],Di.prototype,"type",void 0),a([u({type:String,json:{write:!0}})],Di.prototype,"field",void 0),a([Ce("field")],Di.prototype,"castField",null),a([u({type:String,json:{write:!0}})],Di.prototype,"valueExpression",void 0),a([u({type:String,json:{write:!0}})],Di.prototype,"valueExpressionTitle",void 0),a([u({readOnly:!0})],Di.prototype,"arcadeRequired",null),a([u({type:CP,json:{write:!0}})],Di.prototype,"legendOptions",void 0),Di=a([_("esri.renderers.visualVariables.VisualVariable")],Di);const jc=Di;var K1;let ba=K1=class extends R{constructor(e){super(e),this.color=null,this.label=null,this.value=null}writeValue(e,t,r){t[r]=e??0}clone(){return new K1({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};a([u({type:ee,json:{type:[je],write:!0}})],ba.prototype,"color",void 0),a([u({type:String,json:{write:!0}})],ba.prototype,"label",void 0),a([u({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],ba.prototype,"value",void 0),a([B("value")],ba.prototype,"writeValue",null),ba=K1=a([_("esri.renderers.visualVariables.support.ColorStop")],ba);const lG=ba;var X1;let wa=X1=class extends jc{constructor(e){super(e),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,r)=>t.value-r.value),this._set("stops",e)}clone(){var e;return new X1({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(t=>t.clone()),legendOptions:(e=this.legendOptions)==null?void 0:e.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};a([u({readOnly:!0})],wa.prototype,"cache",null),a([u({type:["color"],json:{type:["colorInfo"]}})],wa.prototype,"type",void 0),a([u({type:String,json:{write:!0}})],wa.prototype,"normalizationField",void 0),a([u({type:[lG],json:{write:!0}})],wa.prototype,"stops",null),wa=X1=a([_("esri.renderers.visualVariables.ColorVariable")],wa);const OP=wa;var ew;let eo=ew=class extends R{constructor(e){super(e),this.label=null,this.opacity=null,this.value=null}readOpacity(e,t){return km(t.transparency)}writeOpacity(e,t,r){t[r]=iS(e)}clone(){return new ew({label:this.label,opacity:this.opacity,value:this.value})}};a([u({type:String,json:{write:!0}})],eo.prototype,"label",void 0),a([u({type:Number,json:{type:je,write:{target:"transparency"}}})],eo.prototype,"opacity",void 0),a([D("opacity",["transparency"])],eo.prototype,"readOpacity",null),a([B("opacity")],eo.prototype,"writeOpacity",null),a([u({type:Number,json:{write:!0}})],eo.prototype,"value",void 0),eo=ew=a([_("esri.renderers.visualVariables.support.OpacityStop")],eo);const uG=eo;var tw;let _a=tw=class extends jc{constructor(e){super(e),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,r)=>t.value-r.value),this._set("stops",e)}clone(){var e;return new tw({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(t=>t.clone()),legendOptions:(e=this.legendOptions)==null?void 0:e.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};a([u({readOnly:!0})],_a.prototype,"cache",null),a([u({type:["opacity"],json:{type:["transparencyInfo"]}})],_a.prototype,"type",void 0),a([u({type:String,json:{write:!0}})],_a.prototype,"normalizationField",void 0),a([u({type:[uG],json:{write:!0}})],_a.prototype,"stops",null),_a=tw=a([_("esri.renderers.visualVariables.OpacityVariable")],_a);const ES=_a;var rw;let $a=rw=class extends jc{constructor(e){super(e),this.axis=null,this.type="rotation",this.rotationType="geographic"}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}clone(){var e;return new rw({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:(e=this.legendOptions)==null?void 0:e.clone()})}};a([u({readOnly:!0})],$a.prototype,"cache",null),a([u({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],$a.prototype,"axis",void 0),a([u({type:["rotation"],json:{type:["rotationInfo"]}})],$a.prototype,"type",void 0),a([u({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],$a.prototype,"rotationType",void 0),$a=rw=a([_("esri.renderers.visualVariables.RotationVariable")],$a);const FP=$a;function cG(e){return Se(e)}var iw;let to=iw=class extends R{constructor(e){super(e),this.label=null,this.size=null,this.value=null,this.useMinValue=null,this.useMaxValue=null}clone(){return new iw({label:this.label,size:this.size,value:this.value,useMaxValue:this.useMaxValue,useMinValue:this.useMinValue})}};a([u({type:String,json:{write:!0}})],to.prototype,"label",void 0),a([u({type:Number,cast:Se,json:{write:!0}})],to.prototype,"size",void 0),a([u({type:Number,json:{write:!0}})],to.prototype,"value",void 0),a([u({type:Boolean,json:{write:!1}})],to.prototype,"useMinValue",void 0),a([u({type:Boolean,json:{write:!1}})],to.prototype,"useMaxValue",void 0),to=iw=a([_("esri.renderers.visualVariables.support.SizeStop")],to);const vy=to;let by=class extends CP{constructor(){super(...arguments),this.customValues=null}};a([u({type:[Number],json:{write:!0}})],by.prototype,"customValues",void 0),by=a([_("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],by);const dG=by;var _n,Ct;function Ou(e){return e&&e.declaredClass==="esri.renderers.visualVariables.SizeVariable"}function qp(e){return e!=null&&!isNaN(e)&&isFinite(e)}function kP(e){return e.valueExpression?_n.Expression:e.field&&typeof e.field=="string"?_n.Field:_n.Unknown}function pG(e,t){const r=t||kP(e),i=e.valueUnit||"unknown";return r===_n.Unknown?Ct.Constant:e.stops?Ct.Stops:e.minSize!=null&&e.maxSize!=null&&e.minDataValue!=null&&e.maxDataValue!=null?Ct.ClampedLinear:i==="unknown"?e.minSize!=null&&e.minDataValue!=null?e.minSize&&e.minDataValue?Ct.Proportional:Ct.Additive:Ct.Identity:Ct.RealWorldSize}(function(e){e.Unknown="unknown",e.Expression="expression",e.Field="field"})(_n||(_n={})),function(e){e.Unknown="unknown",e.Stops="stops",e.ClampedLinear="clamped-linear",e.Proportional="proportional",e.Additive="additive",e.Constant="constant",e.Identity="identity",e.RealWorldSize="real-world-size"}(Ct||(Ct={}));var sw;function hG(e){if(!e)return null;const t={};for(const r in e){const i=bh(e[r]);i&&(t[r]=i)}return Object.keys(t).length!==0?t:null}function fG(e){if(e==null)return null;const t={};for(const r in e){const i=e[r];i&&(t[r]=i.toJSON())}return Object.keys(t).length!==0?t:null}let xr=sw=class extends Oe(R){constructor(e){super(e),this.isAggregate=!1,this.layer=null,this.origin=null,this.popupTemplate=null,this.sourceLayer=null,this._version=0,Object.defineProperty(this,"uid",{value:Df(),configurable:!0}),Object.defineProperty(this,"_lastMeshTransform",{value:{},configurable:!0,writable:!0,enumerable:!1}),arguments.length>1&&aj(G.getLogger(this),"Graphic",{version:"4.30"})}initialize(){this._watchMeshGeometryChanges()}set aggregateGeometries(e){const t=this._get("aggregateGeometries");JSON.stringify(t)!==JSON.stringify(e)&&this._set("aggregateGeometries",e)}set attributes(e){const t=this._get("attributes");t!==e&&(this._set("attributes",e),this._notifyLayer("attributes",t,e))}set geometry(e){const t=this._get("geometry");t!==e&&(this._set("geometry",e),(e==null?void 0:e.type)!=="mesh"&&this._notifyLayer("geometry",t,e))}set symbol(e){const t=this._get("symbol");t!==e&&(this._set("symbol",e),this._notifyLayer("symbol",t,e))}get version(){return this._version}set visible(e){const t=this._get("visible");t!==e&&(this._set("visible",e),this._notifyLayer("visible",t,e))}cloneShallow(){return new sw({aggregateGeometries:this.aggregateGeometries,attributes:this.attributes,geometry:this.geometry,isAggregate:this.isAggregate,layer:this.layer,popupTemplate:this.popupTemplate,sourceLayer:this.sourceLayer,symbol:this.symbol,visible:this.visible,origin:this.origin})}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;const t=this.origin&&"layer"in this.origin?this.origin.layer:null;for(const r of[t,this.sourceLayer,this.layer])if(r){if("popupTemplate"in r&&r.popupTemplate)return r.popupTemplate;if(e&&"defaultPopupTemplate"in r&&r.defaultPopupTemplate!=null)return r.defaultPopupTemplate}return null}getAttribute(e){var t;return(t=this.attributes)==null?void 0:t[e]}setAttribute(e,t){if(this.attributes){const r=this.getAttribute(e);this.attributes[e]=t,this._notifyLayer("attributes",r,t,e)}else this.attributes={[e]:t},this._notifyLayer("attributes",void 0,t,e)}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){var e;return{aggregateGeometries:fG(this.aggregateGeometries),geometry:this.geometry!=null?this.geometry.toJSON():null,symbol:this.symbol!=null?this.symbol.toJSON():null,attributes:dm(this.attributes)?this.attributes.toJSON():{...this.attributes},popupTemplate:((e=this.popupTemplate)==null?void 0:e.toJSON())??null}}notifyMeshTransformChanged(e={}){const{geometry:t}=this;if((t==null?void 0:t.type)==="mesh"){const r={origin:t.origin,transform:t.transform};this._notifyLayer("origin-transform",r,r,e.action)}}_notifyLayer(e,t,r,i){if(this._version++,!this.layer||!("graphicChanged"in this.layer))return;const s={graphic:this,property:e,oldValue:t,newValue:r};e==="origin-transform"&&(s.action=i),e==="attributes"&&(s.attributeName=i),this.layer.graphicChanged(s)}_watchMeshGeometryChanges(){this.addHandles([Oo(()=>{var e,t;return((e=this.geometry)==null?void 0:e.type)==="mesh"&&this.geometry.vertexSpace.origin?{localMatrix:(t=this.geometry.transform)==null?void 0:t.localMatrix,origin:this.geometry.vertexSpace.origin}:void 0},({localMatrix:e,origin:t})=>{this._lastMeshTransform.localMatrix===e&&this._lastMeshTransform.origin===t||(this._lastMeshTransform.localMatrix=e,this._lastMeshTransform.origin=t,this.notifyMeshTransformChanged())}),Oo(()=>{var e;return((e=this.geometry)==null?void 0:e.type)==="mesh"?{vertexAttributes:this.geometry.vertexAttributes}:void 0},()=>{var t;const e=this.geometry;(e==null?void 0:e.type)==="mesh"&&e.vertexSpace.origin?(this._lastMeshTransform.localMatrix=(t=e.transform)==null?void 0:t.localMatrix,this._lastMeshTransform.origin=e.vertexSpace.origin):(this._lastMeshTransform.localMatrix=void 0,this._lastMeshTransform.origin=void 0),this._notifyLayer("geometry",this.geometry,this.geometry)},{equals:(e,t)=>e===t,sync:!0})])}};a([u({value:null,json:{read:hG}})],xr.prototype,"aggregateGeometries",null),a([u({value:null})],xr.prototype,"attributes",null),a([u({value:null,types:wh,json:{read:bh}})],xr.prototype,"geometry",null),a([u({type:Boolean})],xr.prototype,"isAggregate",void 0),a([u({clonable:"reference"})],xr.prototype,"layer",void 0),a([u({clonable:"reference"})],xr.prototype,"origin",void 0),a([u({type:Cc})],xr.prototype,"popupTemplate",void 0),a([u({clonable:"reference"})],xr.prototype,"sourceLayer",void 0),a([u({value:null,types:So})],xr.prototype,"symbol",null),a([u({clonable:!1,json:{read:!1,write:!1}})],xr.prototype,"_version",void 0),a([u({type:Boolean,value:!0})],xr.prototype,"visible",null),xr=sw=a([_("esri.Graphic")],xr);const ni=xr;function Que(e){}const AS={unknown:1,inches:ci(1,"meters","inches"),feet:ci(1,"meters","feet"),"us-feet":ci(1,"meters","us-feet"),yards:ci(1,"meters","yards"),miles:ci(1,"meters","miles"),"nautical-miles":ci(1,"meters","nautical-miles"),millimeters:ci(1,"meters","millimeters"),centimeters:ci(1,"meters","centimeters"),decimeters:ci(1,"meters","decimeters"),meters:ci(1,"meters","meters"),kilometers:ci(1,"meters","kilometers"),"decimal-degrees":1/C7(1,"meters",rt.radius)},PP=()=>G.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),Ng=e=>PP().warn(`The visualVariable should be an instance of esri.renderers.visualVariables.${e}`),Rg=()=>PP().error("Use of arcade expressions requires an arcade context"),QI=new ni,wy=Math.PI,LP=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function NP(e,t,r){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.find(g=>g.type==="color"):e;if(!i)return;if(i.declaredClass!=="esri.renderers.visualVariables.ColorVariable")return void Ng("ColorVariable");const s=typeof t=="number",n=s?null:t,o=n==null?void 0:n.attributes;let l=s?t:null;const c=i.field,{ipData:p,hasExpression:h}=i.cache;let f=i.cache.compiledFunc;if(!c&&!h){const g=i.stops;return g&&g[0]&&g[0].color}if(typeof l!="number")if(h){if((r==null?void 0:r.arcade)==null)return void Rg();const g={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},b=r.arcade.arcadeUtils,w=b.getViewInfo(g),S=b.createExecContext(n,w,r.timeZone);if(!f){const x=b.createSyntaxTree(i.valueExpression);f=b.createFunction(x),i.cache.compiledFunc=f}l=b.executeFunction(f,S)}else o&&(l=o[c]);const y=i.normalizationField,m=o!=null&&y!=null?parseFloat(o[y]):void 0;if(l!=null&&(!y||s||!isNaN(m)&&m!==0)){isNaN(m)||s||(l/=m);const g=CS(l,p);if(g){const b=g[0],w=g[1],S=b===w?i.stops[b].color:ee.blendColors(i.stops[b].color,i.stops[w].color,g[2],r!=null?r.color:void 0);return new ee(S)}}}function RP(e,t,r){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.find(g=>g.type==="opacity"):e;if(!i)return;if(i.declaredClass!=="esri.renderers.visualVariables.OpacityVariable")return void Ng("OpacityVariable");const s=typeof t=="number",n=s?null:t,o=n==null?void 0:n.attributes;let l=s?t:null;const c=i.field,{ipData:p,hasExpression:h}=i.cache;let f=i.cache.compiledFunc;if(!c&&!h){const g=i.stops;return g&&g[0]&&g[0].opacity}if(typeof l!="number")if(h){if((r==null?void 0:r.arcade)==null)return void Rg();const g={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},b=r.arcade.arcadeUtils,w=b.getViewInfo(g),S=b.createExecContext(n,w,r.timeZone);if(!f){const x=b.createSyntaxTree(i.valueExpression);f=b.createFunction(x),i.cache.compiledFunc=f}l=b.executeFunction(f,S)}else o&&(l=o[c]);const y=i.normalizationField,m=o!=null&&y!=null?parseFloat(o[y]):void 0;if(l!=null&&(!y||s||!isNaN(m)&&m!==0)){isNaN(m)||s||(l/=m);const g=CS(l,p);if(g){const b=g[0],w=g[1];if(b===w)return i.stops[b].opacity;{const S=i.stops[b].opacity;return S+(i.stops[w].opacity-S)*g[2]}}}}function jP(e,t,r){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.find(m=>m.type==="rotation"):e;if(!i)return;if(i.declaredClass!=="esri.renderers.visualVariables.RotationVariable")return void Ng("RotationVariable");const s=i.axis||"heading",n=s==="heading"&&i.rotationType==="arithmetic"?90:0,o=s==="heading"&&i.rotationType==="arithmetic"?-1:1,l=typeof t=="number"?null:t,c=l==null?void 0:l.attributes,p=i.field,{hasExpression:h}=i.cache;let f=i.cache.compiledFunc,y=0;if(!p&&!h)return y;if(h){if((r==null?void 0:r.arcade)==null)return void Rg();const m={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},g=r.arcade.arcadeUtils,b=g.getViewInfo(m),w=g.createExecContext(l,b,r.timeZone);if(!f){const S=g.createSyntaxTree(i.valueExpression);f=g.createFunction(S),i.cache.compiledFunc=f}y=g.executeFunction(f,w)}else c&&(y=c[p]||0);return y=typeof y!="number"||isNaN(y)?null:n+o*y,y}function yG(e,t,r){const i=typeof t=="number",s=i?null:t,n=s==null?void 0:s.attributes;let o=i?t:null;const{isScaleDriven:l}=e.cache;let c=e.cache.compiledFunc;if(l){const h=r!=null?r.scale:void 0,f=r!=null?r.view:void 0;o=h==null||f==="3d"?mG(e):h}else if(!i)switch(e.inputValueType){case _n.Expression:{if((r==null?void 0:r.arcade)==null)return void Rg();const h={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},f=r.arcade.arcadeUtils,y=f.getViewInfo(h),m=f.createExecContext(s,y,r.timeZone);if(!c){const g=f.createSyntaxTree(e.valueExpression);c=f.createFunction(g),e.cache.compiledFunc=c}o=f.executeFunction(c,m);break}case _n.Field:n&&(o=n[e.field]);break;case _n.Unknown:o=null}if(!qp(o))return null;if(i||!e.normalizationField)return o;const p=n?parseFloat(n[e.normalizationField]):null;return qp(p)&&p!==0?o/p:null}function mG(e){let t=null,r=null;const i=e.stops;return i?(t=i[0].value,r=i[i.length-1].value):(t=e.minDataValue||0,r=e.maxDataValue||0),(t+r)/2}function jg(e,t,r){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.find(n=>n.type==="size"):e;if(!i)return;if(i.declaredClass!=="esri.renderers.visualVariables.SizeVariable")return void Ng("SizeVariable");const s=VP(yG(i,t,r),i,t,r,i.cache.ipData);return s==null||isNaN(s)?0:s}function Rr(e,t,r){return e==null?null:Ou(e)?jg(e,t,r):qp(e)?e:null}function DP(e,t,r){return qp(r)&&e>r?r:qp(t)&&e<t?t:e}function gG(e,t,r,i){return e+((Rr(t.minSize,r,i)||t.minDataValue)??0)}function vG(e,t,r){const i=e.stops;let s=(i==null?void 0:i.length)&&i[0].size;return s==null&&(s=e.minSize),Rr(s,t,r)}function bG(e,t,r,i){const s=(e-t.minDataValue)/(t.maxDataValue-t.minDataValue),n=Rr(t.minSize,r,i),o=Rr(t.maxSize,r,i),l=i!=null?i.shape:void 0;if(e<=t.minDataValue)return n;if(e>=t.maxDataValue)return o;if(n==null||o==null)return null;if(t.scaleBy==="area"&&l){const c=l==="circle",p=c?wy*(n/2)**2:n*n,h=p+s*((c?wy*(o/2)**2:o*o)-p);return c?2*Math.sqrt(h/wy):Math.sqrt(h)}return n+s*(o-n)}function wG(e,t,r,i){const s=i!=null?i.shape:void 0,n=e/t.minDataValue,o=Rr(t.minSize,r,i),l=Rr(t.maxSize,r,i);let c=null;return c=s==="circle"?2*Math.sqrt(n*(o/2)**2):s==="square"||s==="diamond"||s==="image"?Math.sqrt(n*o**2):n*o,DP(c,o,l)}function _G(e,t,r,i,s){var c,p,h;const[n,o,l]=CS(e,s);if(n===o)return Rr((c=t.stops)==null?void 0:c[n].size,r,i);{const f=Rr((p=t.stops)==null?void 0:p[n].size,r,i);return f+(Rr((h=t.stops)==null?void 0:h[o].size,r,i)-f)*l}}function $G(e,t,r,i){const s=((i==null?void 0:i.resolution)??1)*AS[t.valueUnit],n=Rr(t.minSize,r,i),o=Rr(t.maxSize,r,i),{valueRepresentation:l}=t;let c=null;return c=l==="area"?2*Math.sqrt(e/wy)/s:l==="radius"||l==="distance"?2*e/s:e/s,DP(c,n,o)}function VP(e,t,r,i,s){switch(t.transformationType){case Ct.Additive:return gG(e,t,r,i);case Ct.Constant:return vG(t,r,i);case Ct.ClampedLinear:return bG(e,t,r,i);case Ct.Proportional:return wG(e,t,r,i);case Ct.Stops:return _G(e,t,r,i,s);case Ct.RealWorldSize:return $G(e,t,r,i);case Ct.Identity:return e;case Ct.Unknown:return null}}function SG(e,t,r){const{isScaleDriven:i}=e.cache;if(!(i&&r==="3d"||t))return null;const s={scale:t,view:r};let n=Rr(e.minSize,QI,s),o=Rr(e.maxSize,QI,s);if(n!=null||o!=null){if(n>o){const l=o;o=n,n=l}return{minSize:n,maxSize:o}}}function xG(e,t,r){if(!e.visualVariables)return;const i=[],s=[],n=[],o=[],l=[];for(const c of e.visualVariables)switch(c.type){case"color":s.push(c);break;case"opacity":n.push(c);break;case"rotation":l.push(c);break;case"size":o.push(c)}return s.forEach(c=>{const p=NP(c,t,r);i.push({variable:c,value:p})}),n.forEach(c=>{const p=RP(c,t,r);i.push({variable:c,value:p})}),l.forEach(c=>{const p=jP(c,t,r);i.push({variable:c,value:p})}),o.forEach(c=>{const p=jg(c,t,r);i.push({variable:c,value:p})}),i.filter(c=>c.value!=null)}function CS(e,t){if(!t)return;let r=0,i=t.length-1;return t.some((s,n)=>e<s?(i=n,!0):(r=n,!1)),[r,i,(e-t[r])/(t[i]-t[r])]}function IG(e,t,r){const i=["proportional","proportional","proportional"];for(const s of e){const n=s.useSymbolValue?"symbol-value":jg(s,t,r);switch(s.axis){case"width":i[0]=n;break;case"depth":i[1]=n;break;case"height":i[2]=n;break;case"width-and-depth":i[0]=n,i[1]=n;break;case"all":case void 0:case null:i[0]=n,i[1]=n,i[2]=n;break;default:s.axis}}return i}const OS=Object.freeze(Object.defineProperty({__proto__:null,getAllSizes:IG,getColor:NP,getOpacity:RP,getRotationAngle:jP,getSize:jg,getSizeForValue:VP,getSizeFromNumberOrVariable:Rr,getSizeRangeAtScale:SG,getVisualVariableValues:xG,viewScaleRE:LP},Symbol.toStringTag,{value:"Module"}));var nw;const lf=new ve({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),ow=new ve({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers"});function KI(e){if(e!=null)return typeof e=="string"||typeof e=="number"?cG(e):e.type==="size"?Ou(e)?e:(delete(e={...e}).type,new Ee(e)):void 0}function XI(e,t,r){if(typeof e!="object")return e;const i=new Ee;return i.read(e,r),i}let Ee=nw=class extends jc{constructor(e){super(e),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:this.valueExpression!=null&&LP.test(this.valueExpression)}}set index(e){Ou(this.maxSize)&&(this.maxSize.index=`visualVariables[${e}].maxSize`),Ou(this.minSize)&&(this.minSize.index=`visualVariables[${e}].minSize`),this._set("index",e)}get inputValueType(){return kP(this)}set maxDataValue(e){e&&this.stops&&(G.getLogger(this).warn("cannot set maxDataValue when stops is not null."),e=null),this._set("maxDataValue",e)}set maxSize(e){e&&this.stops&&(G.getLogger(this).warn("cannot set maxSize when stops is not null."),e=null),this._set("maxSize",e)}castMaxSize(e){return KI(e)}readMaxSize(e,t,r){return XI(e,t,r)}set minDataValue(e){e&&this.stops&&(G.getLogger(this).warn("cannot set minDataValue when stops is not null."),e=null),this._set("minDataValue",e)}set minSize(e){e&&this.stops&&(G.getLogger(this).warn("cannot set minSize when stops is not null."),e=null),this._set("minSize",e)}castMinSize(e){return KI(e)}readMinSize(e,t,r){return XI(e,t,r)}get arcadeRequired(){return!!this.valueExpression||this.minSize!=null&&typeof this.minSize=="object"&&this.minSize.arcadeRequired||this.maxSize!=null&&typeof this.maxSize=="object"&&this.maxSize.arcadeRequired}set stops(e){this.minDataValue==null&&this.maxDataValue==null&&this.minSize==null&&this.maxSize==null?e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,r)=>t.value-r.value):e&&(G.getLogger(this).warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),e=null),this._set("stops",e)}get transformationType(){return pG(this,this.inputValueType)}readValueExpression(e,t){return e||t.expression&&"$view.scale"}writeValueExpressionWebScene(e,t,r,i){if(e==="$view.scale"){if(i!=null&&i.messages){const s=this.index,n=typeof s=="string"?s:`visualVariables[${s}]`;i.messages.push(new O("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:n+".valueExpression",context:i}))}}else t[r]=e}readValueUnit(e){return e?ow.read(e):null}clone(){var e,t;return new nw({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:Ou(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:Ou(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:(e=this.stops)==null?void 0:e.map(r=>r.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:(t=this.legendOptions)==null?void 0:t.clone()})}flipSizes(){if(this.transformationType===Ct.ClampedLinear){const{minSize:e,maxSize:t}=this;return this.minSize=t,this.maxSize=e,this}if(this.transformationType===Ct.Stops){const e=this.stops;if(!e)return this;const t=e.map(i=>i.size).reverse(),r=e.length;for(let i=0;i<r;i++)e[i].size=t[i];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){var e;return(e=this.stops)==null?void 0:e.map(t=>t.value||0)}};a([u({readOnly:!0})],Ee.prototype,"cache",null),a([u({type:lf.apiValues,json:{type:lf.jsonValues,origins:{"web-map":{read:!1}},read:lf.read,write:lf.write}})],Ee.prototype,"axis",void 0),a([u()],Ee.prototype,"index",null),a([u({type:String,readOnly:!0})],Ee.prototype,"inputValueType",null),a([u({type:dG,json:{write:!0}})],Ee.prototype,"legendOptions",void 0),a([u({type:Number,value:null,json:{write:!0}})],Ee.prototype,"maxDataValue",null),a([u({type:Number,value:null,json:{write:!0}})],Ee.prototype,"maxSize",null),a([Ce("maxSize")],Ee.prototype,"castMaxSize",null),a([D("maxSize")],Ee.prototype,"readMaxSize",null),a([u({type:Number,value:null,json:{write:!0}})],Ee.prototype,"minDataValue",null),a([u({type:Number,value:null,json:{write:!0}})],Ee.prototype,"minSize",null),a([Ce("minSize")],Ee.prototype,"castMinSize",null),a([D("minSize")],Ee.prototype,"readMinSize",null),a([u({type:String,json:{write:!0}})],Ee.prototype,"normalizationField",void 0),a([u({readOnly:!0})],Ee.prototype,"arcadeRequired",null),a([u({type:String})],Ee.prototype,"scaleBy",void 0),a([u({type:[vy],value:null,json:{write:!0}})],Ee.prototype,"stops",null),a([u({type:["outline"],json:{write:!0}})],Ee.prototype,"target",void 0),a([u({type:String,readOnly:!0})],Ee.prototype,"transformationType",null),a([u({type:["size"],json:{type:["sizeInfo"]}})],Ee.prototype,"type",void 0),a([u({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],Ee.prototype,"useSymbolValue",void 0),a([u({type:String,json:{write:!0}})],Ee.prototype,"valueExpression",void 0),a([D("valueExpression",["valueExpression","expression"])],Ee.prototype,"readValueExpression",null),a([B("web-scene","valueExpression")],Ee.prototype,"writeValueExpressionWebScene",null),a([u({type:["radius","diameter","area","width","distance"],json:{write:!0}})],Ee.prototype,"valueRepresentation",void 0),a([u({type:ow.apiValues,json:{write:ow.write,origins:{"web-map":{read:!1},"web-scene":{write:!0},"portal-item":{write:!0}}}})],Ee.prototype,"valueUnit",void 0),a([D("valueUnit")],Ee.prototype,"readValueUnit",null),Ee=nw=a([_("esri.renderers.visualVariables.SizeVariable")],Ee);const Dg=Ee,TG={color:OP,size:Dg,opacity:ES,rotation:FP},MG=new ve({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),EG=/^\[([^\]]+)\]$/i;let _y=class extends $e{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(t){if(this._resetVariables(),t=t==null?void 0:t.filter(r=>!!r),t==null?void 0:t.length){for(const r of t)switch(r.type){case"color":this.colorVariables.push(r);break;case"opacity":this.opacityVariables.push(r);break;case"rotation":this.rotationVariables.push(r);break;case"size":this.sizeVariables.push(r)}this.sizeVariables.length&&this.sizeVariables.some(r=>!!r.target)&&t.sort((r,i)=>{let s=null;return s=r.target===i.target?0:r.target?1:-1,s});for(let r=0;r<t.length;r++)t[r].index=r;this._set("visualVariables",t)}else this._set("visualVariables",t)}readVariables(t,r,i){const{rotationExpression:s,rotationType:n}=r,o=s==null?void 0:s.match(EG),l=o==null?void 0:o[1];if(l&&(t||(t=[]),t.push({type:"rotationInfo",rotationType:n,field:l})),t)return t.map(c=>{const p=MG.read(c.type),h=TG[p];h||(G.getLogger(this).warn(`Unknown variable type: ${p}`),i!=null&&i.messages&&i.messages.push(new os("visual-variable:unsupported",`visualVariable of type '${p}' is not supported`,{definition:c,context:i})));const f=new h;return f.read(c,i),f})}writeVariables(t,r){const i=[];for(const s of t){const n=s.toJSON(r);n&&i.push(n)}return i}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};a([u()],_y.prototype,"visualVariables",null),_y=a([_("esri.renderers.visualVariables.VisualVariableFactory")],_y);const AG=_y,CG={base:jc,key:"type",typeMap:{opacity:ES,color:OP,rotation:FP,size:Dg}},Dc=e=>{let t=class extends e{constructor(){super(...arguments),this._vvFactory=new AG}set visualVariables(r){this._vvFactory.visualVariables=r,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(r,i,s){return this._vvFactory.readVariables(r,i,s)}writeVisualVariables(r,i,s,n){i[s]=this._vvFactory.writeVariables(r,n)}get arcadeRequiredForVisualVariables(){if(!this.visualVariables)return!1;for(const r of this.visualVariables)if(r.arcadeRequired)return!0;return!1}hasVisualVariables(r,i){return r?this.getVisualVariablesForType(r,i).length>0:this.getVisualVariablesForType("size",i).length>0||this.getVisualVariablesForType("color",i).length>0||this.getVisualVariablesForType("opacity",i).length>0||this.getVisualVariablesForType("rotation",i).length>0}getVisualVariablesForType(r,i){const s=this.visualVariables;return s?s.filter(n=>n.type===r&&(typeof i=="string"?n.target===i:i!==!1||!n.target)):[]}async collectVVRequiredFields(r,i){let s=[];this.visualVariables&&(s=s.concat(this.visualVariables));for(const n of s)n&&(n.field&&ri(r,i,n.field),n.normalizationField&&ri(r,i,n.normalizationField),n.valueExpression&&(OG(n.valueExpression,r,i)||await us(r,i,n.valueExpression)))}};return a([u({types:[CG],value:null,json:{write:!0}})],t.prototype,"visualVariables",null),a([D("visualVariables",["visualVariables","rotationType","rotationExpression"])],t.prototype,"readVisualVariables",null),a([B("visualVariables")],t.prototype,"writeVisualVariables",null),t=a([_("esri.renderers.mixins.VisualVariablesMixin")],t),t};function OG(e,t,r){const i=oG(e);return i!=null&&(ri(t,r,i),!0)}const Xue={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};function aw(e){const t=e==null?void 0:e.type;return t==="building-scene"||t==="integrated-mesh"||t==="point-cloud"||t==="scene"}function Vg(e){var t;return(e==null?void 0:e.type)==="feature"&&!e.url&&((t=e.source)==null?void 0:t.type)==="memory"}function ece(e){var r;const t=e==null?void 0:e.type;return(t==="feature"||t==="subtype-group"||t==="oriented-imagery")&&((r=e.source)==null?void 0:r.type)==="feature-layer"}async function UP(e,t){const r=ye==null?void 0:ye.findServerInfo(e);if((r==null?void 0:r.currentVersion)!=null)return r.owningSystemUrl||null;const i=e.toLowerCase().indexOf("/rest/services");if(i===-1)return null;const s=`${e.slice(0,i)}/rest/info`,n=t!=null?t.signal:null,{data:o}=await Ge(s,{query:{f:"json"},responseType:"json",signal:n});return(o==null?void 0:o.owningSystemUrl)||null}function FG(e){if(!("capabilities"in e))return!1;switch(e.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"imagery":case"knowledge-graph-sublayer":case"ogc-feature":case"oriented-imagery":case"scene":case"sublayer":case"subtype-group":case"subtype-sublayer":case"wfs":return!0;default:return!1}}function kG(e){return FG(e)?"effectiveCapabilities"in e?e.effectiveCapabilities:e.capabilities:null}function PG(e){if(!("editingEnabled"in e))return!1;switch(e.type){case"csv":case"feature":case"geojson":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":return!0;default:return!1}}function tce(e){return!!PG(e)&&("effectiveEditingEnabled"in e?e.effectiveEditingEnabled:e.editingEnabled)}const FS=[252,146,31,255],LG=[153,153,153,255],NG={type:"esriSMS",style:"esriSMSCircle",size:6,color:FS,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},RG={type:"esriSLS",style:"esriSLSSolid",width:.75,color:FS},jG={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},DG={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},VG={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},UG={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},zG={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null},qG=qs.fromJSON(NG),GG=Ur.fromJSON(RG),BG=En.fromJSON(jG),WG=Rc.fromJSON(DG);qs.fromJSON(VG);Ur.fromJSON(UG);En.fromJSON(zG);mn.fromSimpleMarkerSymbol(qG);Il.fromSimpleLineSymbol(GG);Go.fromSimpleFillSymbol(BG);new Sh({symbolLayers:new ne([new Sl({material:{color:FS},edges:new Dk({size:Mi(1),color:new ee(LG)})})])});const HG=new Il({symbolLayers:new ne([new Lc({material:{color:new ee([0,0,0])},size:Mi(1)})])}),JG=new Go({symbolLayers:new ne([new Sl({outline:{color:new ee([0,0,0]),size:Mi(1)}})])}),eT="#useCIMFallbackSymbology()",kl={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function ZG(e,t=kl){var c,p,h,f;if(!e)return{symbol:null};const{retainId:r=kl.retainId,ignoreDrivers:i=kl.ignoreDrivers,hasLabelingContext:s=kl.hasLabelingContext,retainCIM:n=kl.retainCIM,cimFallbackEnabled:o=kl.cimFallbackEnabled}=t;let l=null;if(hc(e)||e instanceof Tl)l=e.clone();else if(e.type==="cim"){const y=(p=(c=e.data)==null?void 0:c.symbol)==null?void 0:p.type;switch(y){case"CIMPointSymbol":l=n?e.clone():mn.fromCIMSymbol(e);break;case"CIMLineSymbol":o&&(l=HG.clone(),(h=t==null?void 0:t.logWarning)==null||h.call(t,eT,"Unsupported CIM line symbology converted to fallback 3D line symbology"));break;case"CIMPolygonSymbol":o&&(l=JG.clone(),(f=t==null?void 0:t.logWarning)==null||f.call(t,eT,"Unsupported CIM polygon symbology converted to fallback 3D polygon symbology"))}if(!l)return{error:new O("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${y||"unknown"}' is unsupported in 3D`,{symbol:e})}}else if(e instanceof Ur)l=Il.fromSimpleLineSymbol(e);else if(e instanceof qs)l=mn.fromSimpleMarkerSymbol(e);else if(e instanceof xh)l=mn.fromPictureMarkerSymbol(e);else if(e instanceof En)l=t.geometryType&&t.geometryType==="mesh"?Sh.fromSimpleFillSymbol(e):Go.fromSimpleFillSymbol(e);else{if(!(e instanceof Rc))return{error:new O("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${e.type||e.declaredClass}' is unsupported in 3D`,{symbol:e})};l=s?kg.fromTextSymbol(e):mn.fromTextSymbol(e)}return r&&l&&l.type!=="cim"&&(l.id=e.id),i&&hc(l)&&l.symbolLayers.forEach(y=>y.ignoreDrivers=!0),{symbol:l}}function Pm(e,t,r,i){const s=zP(e,{},{context:i,isLabelSymbol:!1});s!=null&&(t[r]=s)}function tT(e,t,r,i){const s=zP(e,{},{context:i,isLabelSymbol:!0});s!=null&&(t[r]=s)}function rT(e){return e instanceof xl||e instanceof Tl}function YG(e){return e instanceof xl&&(e.type==="polygon-3d"||e.type==="line-3d")}function zP(e,t,r){var l;if(e==null)return null;const{context:i,isLabelSymbol:s}=r,n=i==null?void 0:i.origin,o=i==null?void 0:i.messages;if(n==="web-scene"&&!rT(e)){const c=ZG(e,{retainCIM:!0,hasLabelingContext:s});return c.symbol!=null?c.symbol.write(t,i):(o==null||o.push(new O("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:e,context:i,error:c.error})),null)}return aw(i==null?void 0:i.layer)&&YG(e)?(o==null||o.push(new O("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported on layers of type '${(l=i==null?void 0:i.layer)==null?void 0:l.declaredClass}'.`,{symbol:e,context:i})),null):(n==="web-map"||n==="portal-item"&&!aw(i==null?void 0:i.layer))&&rT(e)?(o==null||o.push(new O("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:e,context:i})),null):e.write(t,i)}function rce(e,t){return Zq(e,null,t)}const Ug={types:MP,json:{write:{writer:Pm},origins:{"web-scene":{types:GI,write:{writer:Pm},read:{reader:_c({types:GI})}}}}},kS=c$({json:{origins:{"web-scene":{write:{isRequired:!0}}}}},Ug),PS={types:{base:Xt,key:"type",typeMap:{"simple-fill":So.typeMap["simple-fill"],"picture-fill":So.typeMap["picture-fill"],"polygon-3d":So.typeMap["polygon-3d"],cim:So.typeMap.cim}},json:{write:{writer:Pm},origins:{"web-scene":{type:Go,write:{writer:Pm}}}}},$y={cast:e=>e==null||typeof e=="string"||typeof e=="number"?e:`${e}`,json:{type:String,write:{writer:(e,t)=>{t.value=e==null?void 0:e.toString()}}}};var lw;let ro=lw=class extends R{constructor(e){super(e),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){var e;return new lw({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:((e=this.symbol)==null?void 0:e.clone())??null})}getMeshHash(){const e=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${e}`}};a([u({type:String,json:{write:!0}})],ro.prototype,"description",void 0),a([u({type:String,json:{write:!0}})],ro.prototype,"label",void 0),a([u({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],ro.prototype,"minValue",void 0),a([u({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],ro.prototype,"maxValue",void 0),a([u(kS)],ro.prototype,"symbol",void 0),ro=lw=a([_("esri.renderers.support.ClassBreakInfo")],ro);const Lm=ro,QG=Kt()({ascendingValues:"ascending-values",descendingValues:"descending-values"});let Rd=class extends Oe(R){constructor(t){super(t),this.title=null,this.order=null}};a([u({type:String,json:{write:!0}})],Rd.prototype,"title",void 0),a([re(QG)],Rd.prototype,"order",void 0),Rd=a([_("esri.renderers.support.RendererLegendOptions")],Rd);const LS=Rd;var uw;const qP="log",Sy="percent-of-total",xy="field",uf=new ve({esriNormalizeByLog:qP,esriNormalizeByPercentOfTotal:Sy,esriNormalizeByField:xy}),KG=Zt(Lm);let _t=uw=class extends Dc(An){constructor(e){super(e),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(e,t,r){if(!Array.isArray(e))return;let i=t.minValue;return e.map(s=>{const n=new Lm;return n.read(s,r),n.minValue==null&&(n.minValue=i),n.maxValue==null&&(n.maxValue=n.minValue),i=n.maxValue,n})}writeClassBreakInfos(e,t,r,i){const s=e.map(n=>n.write({},i));this._areClassBreaksConsecutive()&&s.forEach(n=>delete n.classMinValue),t[r]=s}castField(e){return e==null?e:typeof e=="function"?(G.getLogger(this).error(".field: field must be a string value"),null):dh(e)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let e=this._get("normalizationType");const t=!!this.normalizationField,r=this.normalizationTotal!=null;return t||r?(e=t&&xy||r&&Sy||null,t&&r&&G.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):e!==xy&&e!==Sy||(e=null),e}set normalizationType(e){this._set("normalizationType",e)}addClassBreakInfo(e,t,r){let i=null;i=typeof e=="number"?new Lm({minValue:e,maxValue:t,symbol:EP(r)}):KG(M(e)),this.classBreakInfos.push(i),this.classBreakInfos.length===1&&this.notifyChange("minValue")}removeClassBreakInfo(e,t){const r=this.classBreakInfos.length;for(let i=0;i<r;i++){const s=[this.classBreakInfos[i].minValue,this.classBreakInfos[i].maxValue];if(s[0]===e&&s[1]===t){this.classBreakInfos.splice(i,1);break}}}getBreakIndex(e,t){return this.valueExpression&&(t==null?void 0:t.arcade)==null&&G.getLogger(this).warn(""),this.valueExpression?this._getBreakIndexForExpression(e,t):this._getBreakIndexForField(e)}async getClassBreakInfo(e,t){let r=t;this.valueExpression&&(t==null?void 0:t.arcade)==null&&(r={...r,arcade:await In()});const i=this.getBreakIndex(e,r);return i!==-1?this.classBreakInfos[i]:null}getSymbol(e,t){if(this.valueExpression&&(t==null?void 0:t.arcade)==null)return void G.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const r=this.getBreakIndex(e,t);return r>-1?this.classBreakInfos[r].symbol:this.defaultSymbol}async getSymbolAsync(e,t){let r=t;if(this.valueExpression&&(t==null?void 0:t.arcade)==null){const s=await In(),{arcadeUtils:n}=s;n.hasGeometryOperations(this.valueExpression)&&await n.enableGeometryOperations(),r={...r,arcade:s}}const i=this.getBreakIndex(e,r);return i>-1?this.classBreakInfos[i].symbol:this.defaultSymbol}getSymbols(){const e=[];return this.classBreakInfos.forEach(t=>{t.symbol&&e.push(t.symbol)}),this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){var e;return((e=this.visualVariables)==null?void 0:e.reduce((t,r)=>t+r.getAttributeHash(),""))??""}getMeshHash(){const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),r=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${e}.${t}.${this.classBreakInfos.reduce((i,s)=>i+s.getMeshHash(),"")}.${r}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){var e,t;return new uw({field:this.field,backgroundFillSymbol:(e=this.backgroundFillSymbol)==null?void 0:e.clone(),defaultLabel:this.defaultLabel,defaultSymbol:(t=this.defaultSymbol)==null?void 0:t.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:M(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:M(this.visualVariables),legendOptions:M(this.legendOptions),authoringInfo:M(this.authoringInfo)})}async collectRequiredFields(e,t){const r=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(r)}async collectSymbolFields(e,t){const r=[...this.getSymbols().map(i=>i.collectRequiredFields(e,t)),us(e,t,this.valueExpression)];ri(e,t,this.field),ri(e,t,this.normalizationField),await Promise.all(r)}_getBreakIndexForExpression(e,t){const{viewingMode:r,scale:i,spatialReference:s,arcade:n,timeZone:o}=t??{},{valueExpression:l}=this;let c=this._compiledValueExpression.valueExpression===l?this._compiledValueExpression.compiledFunction:null;const p=n.arcadeUtils;if(!c){const f=p.createSyntaxTree(l);c=p.createFunction(f),this._compiledValueExpression.compiledFunction=c}this._compiledValueExpression.valueExpression=l;const h=p.executeFunction(c,p.createExecContext(e,p.getViewInfo({viewingMode:r,scale:i,spatialReference:s}),o));return this._getBreakIndexfromInfos(h)}_getBreakIndexForField(e){const t=this.field,r=e.attributes,i=this.normalizationType;let s=parseFloat(r[t]);if(i){const n=this.normalizationTotal,o=parseFloat(this.normalizationField?r[this.normalizationField]:void 0);if(i===qP)s=Math.log(s)*Math.LOG10E;else if(i!==Sy||n==null||isNaN(n)){if(i===xy&&!isNaN(o)){if(isNaN(s)||isNaN(o))return-1;s/=o}}else s=s/n*100}return this._getBreakIndexfromInfos(s)}_getBreakIndexfromInfos(e){const t=this.isMaxInclusive;if(e!=null&&typeof e=="number"&&!isNaN(e))for(let r=0;r<this.classBreakInfos.length;r++){const i=[this.classBreakInfos[r].minValue,this.classBreakInfos[r].maxValue];if(i[0]<=e&&(t?e<=i[1]:e<i[1]))return r}return-1}_areClassBreaksConsecutive(){const e=this.classBreakInfos,t=e.length;for(let r=1;r<t;r++)if(e[r-1].maxValue!==e[r].minValue)return!1;return!0}};a([u(PS)],_t.prototype,"backgroundFillSymbol",void 0),a([u({type:[Lm]})],_t.prototype,"classBreakInfos",void 0),a([D("classBreakInfos")],_t.prototype,"readClassBreakInfos",null),a([B("classBreakInfos")],_t.prototype,"writeClassBreakInfos",null),a([u({type:String,json:{write:!0}})],_t.prototype,"defaultLabel",void 0),a([u(Ug)],_t.prototype,"defaultSymbol",void 0),a([u({type:String,json:{write:!0}})],_t.prototype,"field",void 0),a([Ce("field")],_t.prototype,"castField",null),a([u({type:Boolean})],_t.prototype,"isMaxInclusive",void 0),a([u({type:LS,json:{write:!0}})],_t.prototype,"legendOptions",void 0),a([u({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return this.classBreakInfos.length!==0&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],_t.prototype,"minValue",null),a([u({type:String,json:{write:!0}})],_t.prototype,"normalizationField",void 0),a([u({type:Number,json:{write:!0}})],_t.prototype,"normalizationTotal",void 0),a([u({type:uf.apiValues,value:null,json:{type:uf.jsonValues,read:uf.read,write:uf.write}})],_t.prototype,"normalizationType",null),a([re({classBreaks:"class-breaks"})],_t.prototype,"type",void 0),a([u({type:String,json:{write:!0}})],_t.prototype,"valueExpression",void 0),a([u({type:String,json:{write:!0}})],_t.prototype,"valueExpressionTitle",void 0),_t=uw=a([_("esri.renderers.ClassBreaksRenderer")],_t);const GP=_t,cw=-3,XG=cw-1;var cn;(function(e){e[e.ALL=0]="ALL",e[e.SOME=1]="SOME"})(cn||(cn={}));let eB=class{get size(){return this._size}constructor(t=10485760){this._maxSize=t,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new rm,this._users=new rm}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(t){this._users.push(t)}deregister(t){this._users.removeUnordered(t)}registerRemoveFunc(t,r){this._removeFuncs.push([t,r])}deregisterRemoveFunc(t){this._removeFuncs.filterInPlace(r=>r[0]!==t)}get maxSize(){return this._maxSize}set maxSize(t){this._maxSize=Math.max(t,-1),this._checkSize()}getSize(t,r){const i=this._db.get(t.id+r);return(i==null?void 0:i.size)??0}put(t,r,i,s,n){r=t.id+r;const o=this._db.get(r);if(o&&(this._size-=o.size,t.size-=o.size,this._db.delete(r),o.entry!==i&&this._notifyRemove(r,o.entry,o.size,cn.ALL)),s>this._maxSize)return void this._notifyRemove(r,i,s,cn.ALL);if(i===void 0)return void console.warn("Refusing to cache undefined entry ");if(!s||s<0)return console.warn(`Refusing to cache entry with size ${s} for key ${r}`),void this._notifyRemove(r,i,0,cn.ALL);const l=1+Math.max(n,XG)-cw;this._db.set(r,new tB(i,s,l)),this._size+=s,t.size+=s,this._checkSize()}updateSize(t,r,i,s){r=t.id+r;const n=this._db.get(r);if(n&&n.entry===i){for(this._size-=n.size,t.size-=n.size;s>this._maxSize;){const o=this._notifyRemove(r,i,s,cn.SOME);if(!(o!=null&&o>0))return void this._db.delete(r);s=o}n.size=s,this._size+=s,t.size+=s,this._checkSize()}}pop(t,r){r=t.id+r;const i=this._db.get(r);if(i)return this._size-=i.size,t.size-=i.size,this._db.delete(r),++this._hit,i.entry;++this._miss}get(t,r){r=t.id+r;const i=this._db.get(r);if(i!==void 0)return this._db.delete(r),i.lives=i.lifetime,this._db.set(r,i),++this._hit,i.entry;++this._miss}peek(t,r){const i=this._db.get(t.id+r);return i?++this._hit:++this._miss,i==null?void 0:i.entry}get performanceInfo(){const t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},r={},i=new Array;this._db.forEach((o,l)=>{const c=o.lifetime;i[c]=(i[c]||0)+o.size,this._users.forAll(p=>{const{id:h,name:f}=p;if(l.startsWith(h)){const y=r[f]||0;r[f]=y+o.size}})});const s={};this._users.forAll(o=>{const l=o.name;if("hitRate"in o&&typeof o.hitRate=="number"&&!isNaN(o.hitRate)&&o.hitRate>0){const c=r[l]||0;r[l]=c,s[l]=Math.round(100*o.hitRate)+"%"}else s[l]="0%"});const n=Object.keys(r);n.sort((o,l)=>r[l]-r[o]),n.forEach(o=>t[o]=Math.round(r[o]/2**20)+"MB / "+s[o]);for(let o=i.length-1;o>=0;--o){const l=i[o];l&&(t["Priority "+(o+cw-1)]=Math.round(l/this._size*100)+"%")}return t}resetStats(){this._hit=this._miss=0,this._users.forAll(t=>t.resetHitRate())}clear(t){const r=t.id;this._db.forEach((i,s)=>{s.startsWith(r)&&(this._size-=i.size,this._db.delete(s),this._notifyRemove(s,i.entry,i.size,cn.ALL))}),t.size=0}clearAll(){this._db.forEach((t,r)=>this._notifyRemove(r,t.entry,t.size,cn.ALL)),this._users.forAll(t=>t.size=0),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(t,r,i,s){let n;return this._removeFuncs.some(o=>{if(t.startsWith(o[0])){const l=o[1](r,s,i);return typeof l=="number"&&(n=l),!0}return!1}),n}_checkSize(){this._users.forAll(t=>this._checkSizeLimits(t)),this._checkSizeLimits()}_checkSizeLimits(t){const r=t??this;if(r.maxSize<0||r.size<=r.maxSize)return;const i=t==null?void 0:t.id;let s=!0;for(;s;){s=!1;for(const[n,o]of this._db)if(o.lifetime===0&&(!i||n.startsWith(i))){if(this._purgeItem(n,o,t),r.size<=.9*r.maxSize)return;s||(s=this._db.has(n))}}for(const[n,o]of this._db)if((!i||n.startsWith(i))&&(this._purgeItem(n,o,t),r.size<=.9*r.maxSize))return}_purgeItem(t,r,i=this._users.find(s=>t.startsWith(s.id))){if(this._db.delete(t),r.lives<=1){this._size-=r.size,i&&(i.size-=r.size);const s=this._notifyRemove(t,r.entry,r.size,cn.SOME);s!=null&&s>0&&(this._size+=s,i&&(i.size+=s),r.lives=r.lifetime,r.size=s,this._db.set(t,r))}else--r.lives,this._db.set(t,r)}},tB=class{constructor(t,r,i){this.entry=t,this.size=r,this.lifetime=i,this.lives=i}},BP=class{constructor(t,r){this._storage=new eB,this.id="",this.name="",this.size=0,this._storage.maxSize=t,this._storage.register(this),r&&this._storage.registerRemoveFunc("",r)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(t,r,i=1){this._storage.put(this,t,r,i,1)}pop(t){return this._storage.pop(this,t)}get(t){return this._storage.get(this,t)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(t){this._storage.maxSize=t}resetHitRate(){}},rB=class dw{constructor(t,r,i=""){this.major=t,this.minor=r,this._context=i}lessThan(t,r){return this.major<t||t===this.major&&this.minor<r}greaterEqual(t,r){return!this.lessThan(t,r)}validate(t){if(this.major!==t.major){const r=this._context&&this._context+":",i=this._context&&this._context+" ";throw new O(r+"unsupported-version",`Required major ${i}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:t})}}clone(){return new dw(this.major,this.minor,this._context)}static parse(t,r=""){const[i,s]=t.split("."),n=/^\s*\d+\s*$/;if(!(i!=null&&i.match)||!n.test(i))throw new O((r&&r+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:t});if(!(s!=null&&s.match)||!n.test(s))throw new O((r&&r+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:t});const o=parseInt(i,10),l=parseInt(s,10);return new dw(o,l,r)}},Ki=class{};function iB(e){return e instanceof bl?e===Ki.instance:(e==null?void 0:e.toString().toLowerCase())==="unknown"}function lce(e){return iB(e)?Ki.instance:e}Ki.instance=new Dr("Etc/UTC");function sB(e){return"timeZone"in e}function nB(e){return"timeZone"in e}function oB(e){return"dateFieldsTimeZone"in e}const aB=new Map;let WP=class Iy{static fromJSON(t){return new Iy(t.fields,t.timeZoneByFieldName)}static fromLayer(t){return new Iy(t.fields??[],sT(t))}static fromLayerJSON(t){return new Iy(t.fields??[],sT(t))}constructor(t=[],r){var s;this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=t||[],this._timeZoneByFieldName=r?new Map(r):null;const i=[];for(const n of this.fields){const o=n==null?void 0:n.name,l=iT(o);if(o&&l){const c=ja(o);this._fieldsMap.set(o,n),this._fieldsMap.set(c,n),this._normalizedFieldsMap.set(l,n),i.push(`${c}:${n.type}:${(s=this._timeZoneByFieldName)==null?void 0:s.get(o)}`),$k(n)?(this.dateFields.push(n),this._dateFieldsSet.add(n)):Q$(n)&&(this._numericFieldsSet.add(n),this.numericFields.push(n)),FI(n)||kI(n)||(n.editable=n.editable==null||!!n.editable,n.nullable=n.nullable==null||!!n.nullable)}}i.sort(),this.uid=i.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const t of this.fields)FI(t)||kI(t)||t.nullable||ez(t)!==void 0||this._requiredFields.push(t)}return this._requiredFields}equals(t){return this.uid===(t==null?void 0:t.uid)}has(t){return this.get(t)!=null}get(t){if(!t)return;let r=this._fieldsMap.get(t);return r||(r=this._fieldsMap.get(ja(t))??this._normalizedFieldsMap.get(iT(t)),r&&this._fieldsMap.set(t,r),r)}getTimeZone(t){const r=this.get(t&&typeof t!="string"?t.name:t);return r?this._timeZoneByFieldName?this._timeZoneByFieldName.get(r.name):r.type==="date"||r.type==="esriFieldTypeDate"?(G.getLogger("esri.layers.support.FieldsIndex").error(new O("getTimeZone:no-timezone-information",`no time zone information for field '${r.name}'`)),js):HP.has(r.type)?tl:null:null}getLuxonTimeZone(t){const r=this.getTimeZone(t);return r?r===tl?Ki.instance:r===js?Tt.utcInstance:h$(aB,r,()=>Dr.create(r)):null}isDateField(t){return this._dateFieldsSet.has(this.get(t))}isTimeOnlyField(t){return Sk(this.get(t))}isNumericField(t){return this._numericFieldsSet.has(this.get(t))}normalizeFieldName(t){var r;return((r=this.get(t))==null?void 0:r.name)??void 0}toJSON(){return{fields:this.fields.map(t=>dm(t)?t.toJSON():t),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}};function ja(e){return e.trim().toLowerCase()}function iT(e){var t;return((t=zU(e))==null?void 0:t.toLowerCase())??""}const HP=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function sT(e){const t=new Map;if(!e.fields)return t;const r=e.datesInUnknownTimezone===!0,{timeInfo:i,editFieldsInfo:s}=e,n=(i?"startField"in i?i.startField:i.startTimeField:"")??"",o=(i?"endField"in i?i.endField:i.endTimeField:"")??"",l=oB(e)?e.dateFieldsTimeZone??null:e.dateFieldsTimeReference?Jf(e.dateFieldsTimeReference):null,c=s?sB(s)?s.timeZone??l:s.dateFieldsTimeReference?Jf(s.dateFieldsTimeReference):l??js:null,p=i?nB(i)?i.timeZone??l:i.timeReference?Jf(i.timeReference):l:null,h=new Map([[ja((s==null?void 0:s.creationDateField)??""),c],[ja((s==null?void 0:s.editDateField)??""),c],[ja(n),p],[ja(o),p]]);for(const{name:f,type:y}of e.fields)if(HP.has(y))t.set(f,tl);else if(y!=="date"&&y!=="esriFieldTypeDate")t.set(f,null);else if(r)t.set(f,tl);else{const m=h.get(ja(f??""))??l;t.set(f,m)}return t}let NS=1e-6;function Bo(){return NS}function lB(e){NS=e}const JP=Math.random,uB=Math.PI/180,cB=180/Math.PI;function dB(e){return e*uB}function pB(e){return e*cB}function hB(e,t){return Math.abs(e-t)<=NS*Math.max(1,Math.abs(e),Math.abs(t))}Object.freeze(Object.defineProperty({__proto__:null,RANDOM:JP,equals:hB,getEpsilon:Bo,setEpsilon:lB,toDegree:pB,toRadian:dB},Symbol.toStringTag,{value:"Module"}));function fB(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function yB(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function mB(e,t,r,i,s){return e[0]=t,e[1]=r,e[2]=i,e[3]=s,e}function gB(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e}function ZP(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e}function YP(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e[3]=t[3]*r[3],e}function QP(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e[3]=t[3]/r[3],e}function vB(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e}function bB(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e}function wB(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e[3]=Math.min(t[3],r[3]),e}function _B(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e[3]=Math.max(t[3],r[3]),e}function $B(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e}function SB(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e}function xB(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e}function KP(e,t){const r=t[0]-e[0],i=t[1]-e[1],s=t[2]-e[2],n=t[3]-e[3];return Math.sqrt(r*r+i*i+s*s+n*n)}function XP(e,t){const r=t[0]-e[0],i=t[1]-e[1],s=t[2]-e[2],n=t[3]-e[3];return r*r+i*i+s*s+n*n}function eL(e){const t=e[0],r=e[1],i=e[2],s=e[3];return Math.sqrt(t*t+r*r+i*i+s*s)}function tL(e){const t=e[0],r=e[1],i=e[2],s=e[3];return t*t+r*r+i*i+s*s}function IB(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function TB(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}function MB(e,t){const r=t[0],i=t[1],s=t[2],n=t[3];let o=r*r+i*i+s*s+n*n;return o>0&&(o=1/Math.sqrt(o),e[0]=r*o,e[1]=i*o,e[2]=s*o,e[3]=n*o),e}function EB(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function AB(e,t,r,i){const s=t[0],n=t[1],o=t[2],l=t[3];return e[0]=s+i*(r[0]-s),e[1]=n+i*(r[1]-n),e[2]=o+i*(r[2]-o),e[3]=l+i*(r[3]-l),e}function CB(e,t=1){const r=JP;let i,s,n,o,l,c;do i=2*r()-1,s=2*r()-1,l=i*i+s*s;while(l>=1);do n=2*r()-1,o=2*r()-1,c=n*n+o*o;while(c>=1);const p=Math.sqrt((1-l)/c);return e[0]=t*i,e[1]=t*s,e[2]=t*n*p,e[3]=t*o*p,e}function OB(e,t,r){const i=t[0],s=t[1],n=t[2],o=t[3];return e[0]=r[0]*i+r[4]*s+r[8]*n+r[12]*o,e[1]=r[1]*i+r[5]*s+r[9]*n+r[13]*o,e[2]=r[2]*i+r[6]*s+r[10]*n+r[14]*o,e[3]=r[3]*i+r[7]*s+r[11]*n+r[15]*o,e}function FB(e,t,r){const i=t[0],s=t[1],n=t[2],o=r[0],l=r[1],c=r[2],p=r[3],h=p*i+l*n-c*s,f=p*s+c*i-o*n,y=p*n+o*s-l*i,m=-o*i-l*s-c*n;return e[0]=h*p+m*-o+f*-c-y*-l,e[1]=f*p+m*-l+y*-o-h*-c,e[2]=y*p+m*-c+h*-l-f*-o,e[3]=t[3],e}function kB(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function PB(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function LB(e,t){const r=e[0],i=e[1],s=e[2],n=e[3],o=t[0],l=t[1],c=t[2],p=t[3],h=Bo();return Math.abs(r-o)<=h*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(i-l)<=h*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(s-c)<=h*Math.max(1,Math.abs(s),Math.abs(c))&&Math.abs(n-p)<=h*Math.max(1,Math.abs(n),Math.abs(p))}const NB=ZP,RB=YP,jB=QP,DB=KP,VB=XP,UB=eL,zB=tL;Object.freeze(Object.defineProperty({__proto__:null,add:gB,ceil:vB,copy:fB,copyVec3:yB,dist:DB,distance:KP,div:jB,divide:QP,dot:EB,equals:LB,exactEquals:PB,floor:bB,inverse:TB,len:UB,length:eL,lerp:AB,max:_B,min:wB,mul:RB,multiply:YP,negate:IB,normalize:MB,random:CB,round:$B,scale:SB,scaleAndAdd:xB,set:mB,sqrDist:VB,sqrLen:zB,squaredDistance:XP,squaredLength:tL,str:kB,sub:NB,subtract:ZP,transformMat4:OB,transformQuat:FB},Symbol.toStringTag,{value:"Module"}));function RS(){return[0,0,0,0]}function qB(e){return[e[0],e[1],e[2],e[3]]}function Vc(e,t,r,i){return[e,t,r,i]}function GB(e,t,r,i){return[e,t,r,i]}function BB(e,t=RS()){const r=Math.min(4,e.length);for(let i=0;i<r;++i)t[i]=e[i];return t}function WB(e,t){return new Float64Array(e,t,4)}function rL(){return RS()}function iL(){return Vc(1,1,1,1)}function sL(){return Vc(1,0,0,0)}function nL(){return Vc(0,1,0,0)}function oL(){return Vc(0,0,1,0)}function aL(){return Vc(0,0,0,1)}const HB=rL(),JB=iL(),ZB=sL(),YB=nL(),QB=oL(),KB=aL();Object.freeze(Object.defineProperty({__proto__:null,ONES:JB,UNIT_W:KB,UNIT_X:ZB,UNIT_Y:YB,UNIT_Z:QB,ZEROS:HB,clone:qB,create:RS,createView:WB,freeze:GB,fromArray:BB,fromValues:Vc,ones:iL,unitW:aL,unitX:sL,unitY:nL,unitZ:oL,zeros:rL},Symbol.toStringTag,{value:"Module"}));function lL(e){return"r"in e&&"g"in e&&"b"in e}function uL(e){return"h"in e&&"s"in e&&"v"in e}function cL(e){return"l"in e&&"a"in e&&"b"in e}function dL(e){return"l"in e&&"c"in e&&"h"in e}function XB(e){return"x"in e&&"y"in e&&"z"in e}const eW=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],tW=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function pL(e,t){const r=[];let i,s;if(e[0].length!==t.length)throw new Error("dimensions do not match");const n=e.length,o=e[0].length;let l=0;for(i=0;i<n;i++){for(l=0,s=0;s<o;s++)l+=e[i][s]*t[s];r.push(l)}return r}function hL(e){const t=[e.r/255,e.g/255,e.b/255].map(i=>i<=.04045?i/12.92:((i+.055)/1.055)**2.4),r=pL(eW,t);return{x:100*r[0],y:100*r[1],z:100*r[2]}}function jS(e){const t=pL(tW,[e.x/100,e.y/100,e.z/100]).map(r=>{const i=r<=.0031308?12.92*r:1.055*r**.4166666666666667-.055;return Math.min(1,Math.max(i,0))});return{r:Math.round(255*t[0]),g:Math.round(255*t[1]),b:Math.round(255*t[2])}}function fL(e){const t=[e.x/95.047,e.y/100,e.z/108.883].map(r=>r>.008856451679035631?r**.3333333333333333:7.787037037037035*r+.13793103448275862);return{l:116*t[1]-16,a:500*(t[0]-t[1]),b:200*(t[1]-t[2])}}function yL(e){const t=e.l,r=[(t+16)/116+e.a/500,(t+16)/116,(t+16)/116-e.b/200].map(i=>i>6/29?i**3:3*(6/29)**2*(i-4/29));return{x:95.047*r[0],y:100*r[1],z:108.883*r[2]}}function rW(e){const t=e.l,r=e.a,i=e.b,s=Math.sqrt(r*r+i*i);let n=Math.atan2(i,r);return n=n>0?n:n+2*Math.PI,{l:t,c:s,h:n}}function iW(e){const t=e.l,r=e.c,i=e.h;return{l:t,a:r*Math.cos(i),b:r*Math.sin(i)}}function sW(e){return fL(hL(e))}function nW(e){return jS(yL(e))}function oW(e){return rW(fL(hL(e)))}function aW(e){return jS(yL(iW(e)))}function lW(e){const t=e.r,r=e.g,i=e.b,s=Math.max(t,r,i),n=s-Math.min(t,r,i);let o=s,l=n===0?0:s===t?(r-i)/n%6:s===r?(i-t)/n+2:(t-r)/n+4,c=n===0?0:n/o;return l<0&&(l+=6),l*=60,c*=100,o*=100/255,{h:l,s:c,v:o}}function uW(e){const t=(e.h+360)%360/60,r=e.s/100,i=e.v/100*255,s=i*r,n=s*(1-Math.abs(t%2-1));let o;switch(Math.floor(t)){case 0:o={r:s,g:n,b:0};break;case 1:o={r:n,g:s,b:0};break;case 2:o={r:0,g:s,b:n};break;case 3:o={r:0,g:n,b:s};break;case 4:o={r:n,g:0,b:s};break;case 5:case 6:o={r:s,g:0,b:n};break;default:o={r:0,g:0,b:0}}return o.r=Math.round(o.r+i-s),o.g=Math.round(o.g+i-s),o.b=Math.round(o.b+i-s),o}function DS(e){return lL(e)?e:dL(e)?aW(e):cL(e)?nW(e):XB(e)?jS(e):uL(e)?uW(e):e}function uce(e){return uL(e)?e:lW(DS(e))}function cce(e){return cL(e)?e:sW(DS(e))}function dce(e){return dL(e)?e:oW(DS(e))}var nT;function pce(e,t,r={}){if(e.length===0||t<=0)return[];if((e=e.map(i=>typeof i=="string"?new ee(i):i)).length===1||t===1){const i=[],s=e[0];for(let n=0;n<t;n++)i.push(s.clone());return i}if(r.shuffle&&(e=EA(M(e),r.seed)),e.length>=t){const i=[],s=(e.length-1)/(t-1);for(let n=0;n<t;n++){const o=Math.round(n*s);i.push(e[o].clone())}return i}return cW(e,t,r)}function cW(e,t,r={}){const i=[],s=e.length-1,n=Math.ceil((t-e.length)/s);e:for(let o=0;o<s;o++){const l=e[o],c=e[o+1];for(let p=1;p<=n;p++){const h=p/(n+1);if(i.push(dW(l,c,h,r)),i.length+e.length===t)break e}}return[...e.map(o=>o.clone()),...EA(i,r.seed??1)]}(function(e){e[e.Low=160]="Low",e[e.High=225]="High"})(nT||(nT={}));const q0=(e,t)=>{const r=Math.floor(10*t())-5;return Math.min(255,Math.max(0,e+r))};function dW(e,t,r,i={}){const s=e.r,n=e.g,o=e.b,l=t.r,c=t.g,p=t.b,h=Math.round(s+(l-s)*r),f=Math.round(n+(c-n)*r),y=Math.round(o+(p-o)*r);if(!i.offset)return new ee([h,f,y]);const m=MA(i.seed);return new ee([q0(h,m),q0(f,m),q0(y,m)])}var oT,aT,lT,uT,cT,dT,pT,hT,fT,yT,pw,hw,mT,gT,vT,bT,wT,_T,$T,ST,xT,IT,TT,MT,ET,AT,CT,OT,FT,kT,PT,LT,NT,RT,jT,DT,VT,UT,zT,qT,GT,BT,WT,HT,JT,ZT,YT,QT,KT,XT,eM,tM,rM,iM,sM,nM,oM,aM,lM,uM,cM,dM;(function(e){e[e.BUTT=0]="BUTT",e[e.ROUND=1]="ROUND",e[e.SQUARE=2]="SQUARE",e[e.UNKNOWN=4]="UNKNOWN"})(oT||(oT={})),function(e){e[e.BEVEL=0]="BEVEL",e[e.ROUND=1]="ROUND",e[e.MITER=2]="MITER",e[e.UNKNOWN=4]="UNKNOWN"}(aT||(aT={})),function(e){e[e.SCREEN=0]="SCREEN",e[e.MAP=1]="MAP"}(lT||(lT={})),function(e){e[e.Tint=0]="Tint",e[e.Ignore=1]="Ignore",e[e.Multiply=99]="Multiply"}(uT||(uT={})),function(e){e.Both="Both",e.JustBegin="JustBegin",e.JustEnd="JustEnd",e.None="None"}(cT||(cT={})),function(e){e[e.Mosaic=0]="Mosaic",e[e.Centered=1]="Centered"}(dT||(dT={})),function(e){e[e.Normal=0]="Normal",e[e.Superscript=1]="Superscript",e[e.Subscript=2]="Subscript"}(pT||(pT={})),function(e){e[e.MSSymbol=0]="MSSymbol",e[e.Unicode=1]="Unicode"}(hT||(hT={})),function(e){e[e.Unspecified=0]="Unspecified",e[e.TrueType=1]="TrueType",e[e.PSOpenType=2]="PSOpenType",e[e.TTOpenType=3]="TTOpenType",e[e.Type1=4]="Type1"}(fT||(fT={})),function(e){e[e.Display=0]="Display",e[e.Map=1]="Map"}(yT||(yT={})),function(e){e.None="None",e.Loop="Loop",e.Oscillate="Oscillate"}(pw||(pw={})),function(e){e.Linear="Linear",e.EaseIn="EaseIn",e.EaseOut="EaseOut",e.EaseInOut="EaseInOut"}(hw||(hw={})),function(e){e[e.Z=0]="Z",e[e.X=1]="X",e[e.Y=2]="Y"}(mT||(mT={})),function(e){e[e.XYZ=0]="XYZ",e[e.ZXY=1]="ZXY",e[e.YXZ=2]="YXZ"}(gT||(gT={})),function(e){e[e.Rectangle=0]="Rectangle",e[e.RoundedRectangle=1]="RoundedRectangle",e[e.Oval=2]="Oval"}(vT||(vT={})),function(e){e[e.None=0]="None",e[e.Alpha=1]="Alpha",e[e.Screen=2]="Screen",e[e.Multiply=3]="Multiply",e[e.Add=4]="Add"}(bT||(bT={})),function(e){e[e.TTB=0]="TTB",e[e.RTL=1]="RTL",e[e.BTT=2]="BTT"}(wT||(wT={})),function(e){e[e.None=0]="None",e[e.SignPost=1]="SignPost",e[e.FaceNearPlane=2]="FaceNearPlane"}(_T||(_T={})),function(e){e[e.Float=0]="Float",e[e.String=1]="String",e[e.Boolean=2]="Boolean"}($T||($T={})),function(e){e[e.Intersect=0]="Intersect",e[e.Subtract=1]="Subtract"}(ST||(ST={})),function(e){e.OpenEnded="OpenEnded",e.Block="Block",e.Crossed="Crossed"}(xT||(xT={})),function(e){e.FullGeometry="FullGeometry",e.PerpendicularFromFirstSegment="PerpendicularFromFirstSegment",e.ReversedFirstSegment="ReversedFirstSegment",e.PerpendicularToSecondSegment="PerpendicularToSecondSegment",e.SecondSegmentWithTicks="SecondSegmentWithTicks",e.DoublePerpendicular="DoublePerpendicular",e.OppositeToFirstSegment="OppositeToFirstSegment",e.TriplePerpendicular="TriplePerpendicular",e.HalfCircleFirstSegment="HalfCircleFirstSegment",e.HalfCircleSecondSegment="HalfCircleSecondSegment",e.HalfCircleExtended="HalfCircleExtended",e.OpenCircle="OpenCircle",e.CoverageEdgesWithTicks="CoverageEdgesWithTicks",e.GapExtentWithDoubleTicks="GapExtentWithDoubleTicks",e.GapExtentMidline="GapExtentMidline",e.Chevron="Chevron",e.PerpendicularWithArc="PerpendicularWithArc",e.ClosedHalfCircle="ClosedHalfCircle",e.TripleParallelExtended="TripleParallelExtended",e.ParallelWithTicks="ParallelWithTicks",e.Parallel="Parallel",e.PerpendicularToFirstSegment="PerpendicularToFirstSegment",e.ParallelOffset="ParallelOffset",e.OffsetOpposite="OffsetOpposite",e.OffsetSame="OffsetSame",e.CircleWithArc="CircleWithArc",e.DoubleJog="DoubleJog",e.PerpendicularOffset="PerpendicularOffset",e.LineExcludingLastSegment="LineExcludingLastSegment",e.MultivertexArrow="MultivertexArrow",e.CrossedArrow="CrossedArrow",e.ChevronArrow="ChevronArrow",e.ChevronArrowOffset="ChevronArrowOffset",e.PartialFirstSegment="PartialFirstSegment",e.Arch="Arch",e.CurvedParallelTicks="CurvedParallelTicks",e.Arc90Degrees="Arc90Degrees",e.TipWithPerpendicularAndTicks="TipWithPerpendicularAndTicks",e.ConcentricCircles="ConcentricCircles",e.DoubleJogArrow="DoubleJogArrow",e.LinkedChevrons="LinkedChevrons",e.SegmentThenHalfCircle="SegmentThenHalfCircle",e.LineWithStraightTicks="LineWithStraightTicks",e.DoubleCurve="DoubleCurve",e.ParallelWithTicksByWidth="ParallelWithTicksByWidth",e.EnclosingRoundedRectangle="EnclosingRoundedRectangle"}(IT||(IT={})),function(e){e.Mitered="Mitered",e.Bevelled="Bevelled",e.Rounded="Rounded",e.Square="Square",e.TrueBuffer="TrueBuffer"}(TT||(TT={})),function(e){e.ClosePath="ClosePath",e.ConvexHull="ConvexHull",e.RectangularBox="RectangularBox"}(MT||(MT={})),function(e){e.BeginningOfLine="BeginningOfLine",e.EndOfLine="EndOfLine"}(ET||(ET={})),function(e){e.Mitered="Mitered",e.Bevelled="Bevelled",e.Rounded="Rounded",e.Square="Square"}(AT||(AT={})),function(e){e.Fast="Fast",e.Accurate="Accurate"}(CT||(CT={})),function(e){e.BeginningOfLine="BeginningOfLine",e.EndOfLine="EndOfLine"}(OT||(OT={})),function(e){e.Sinus="Sinus",e.Square="Square",e.Triangle="Triangle",e.Random="Random"}(FT||(FT={})),function(e){e[e.None=0]="None",e[e.Default=1]="Default",e[e.Force=2]="Force"}(kT||(kT={})),function(e){e[e.Buffered=0]="Buffered",e[e.Left=1]="Left",e[e.Right=2]="Right",e[e.AlongLine=3]="AlongLine"}(PT||(PT={})),function(e){e[e.Linear=0]="Linear",e[e.Rectangular=1]="Rectangular",e[e.Circular=2]="Circular",e[e.Buffered=3]="Buffered"}(LT||(LT={})),function(e){e[e.Discrete=0]="Discrete",e[e.Continuous=1]="Continuous"}(NT||(NT={})),function(e){e[e.AcrossLine=0]="AcrossLine",e[e.AloneLine=1]="AloneLine"}(RT||(RT={})),function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.Center=2]="Center",e[e.Justify=3]="Justify"}(jT||(jT={})),function(e){e[e.Base=0]="Base",e[e.MidPoint=1]="MidPoint",e[e.ThreePoint=2]="ThreePoint",e[e.FourPoint=3]="FourPoint",e[e.Underline=4]="Underline",e[e.CircularCW=5]="CircularCW",e[e.CircularCCW=6]="CircularCCW"}(DT||(DT={})),function(e){e.Butt="Butt",e.Round="Round",e.Square="Square"}(VT||(VT={})),function(e){e.NoConstraint="NoConstraint",e.HalfPattern="HalfPattern",e.HalfGap="HalfGap",e.FullPattern="FullPattern",e.FullGap="FullGap",e.Custom="Custom"}(UT||(UT={})),function(e){e[e.None=-1]="None",e[e.Custom=0]="Custom",e[e.Circle=1]="Circle",e[e.OpenArrow=2]="OpenArrow",e[e.ClosedArrow=3]="ClosedArrow",e[e.Diamond=4]="Diamond"}(zT||(zT={})),function(e){e[e.ExtraLeading=0]="ExtraLeading",e[e.Multiple=1]="Multiple",e[e.Exact=2]="Exact"}(qT||(qT={})),function(e){e.Bevel="Bevel",e.Round="Round",e.Miter="Miter"}(GT||(GT={})),function(e){e[e.Default=0]="Default",e[e.String=1]="String",e[e.Numeric=2]="Numeric"}(BT||(BT={})),function(e){e[e.InsidePolygon=0]="InsidePolygon",e[e.PolygonCenter=1]="PolygonCenter",e[e.RandomlyInsidePolygon=2]="RandomlyInsidePolygon"}(WT||(WT={})),function(e){e[e.Tint=0]="Tint",e[e.Replace=1]="Replace",e[e.Multiply=2]="Multiply"}(HT||(HT={})),function(e){e[e.ClipAtBoundary=0]="ClipAtBoundary",e[e.RemoveIfCenterOutsideBoundary=1]="RemoveIfCenterOutsideBoundary",e[e.DoNotTouchBoundary=2]="DoNotTouchBoundary",e[e.DoNotClip=3]="DoNotClip"}(JT||(JT={})),function(e){e.NoConstraint="NoConstraint",e.WithMarkers="WithMarkers",e.WithFullGap="WithFullGap",e.WithHalfGap="WithHalfGap",e.Custom="Custom"}(ZT||(ZT={})),function(e){e.Fixed="Fixed",e.Random="Random",e.RandomFixedQuantity="RandomFixedQuantity"}(YT||(YT={})),function(e){e.LineMiddle="LineMiddle",e.LineBeginning="LineBeginning",e.LineEnd="LineEnd",e.SegmentMidpoint="SegmentMidpoint"}(QT||(QT={})),function(e){e.OnPolygon="OnPolygon",e.CenterOfMass="CenterOfMass",e.BoundingBoxCenter="BoundingBoxCenter"}(KT||(KT={})),function(e){e[e.Low=0]="Low",e[e.Medium=1]="Medium",e[e.High=2]="High"}(XT||(XT={})),function(e){e[e.MarkerCenter=0]="MarkerCenter",e[e.MarkerBounds=1]="MarkerBounds"}(eM||(eM={})),function(e){e[e.None=0]="None",e[e.PropUniform=1]="PropUniform",e[e.PropNonuniform=2]="PropNonuniform",e[e.DifUniform=3]="DifUniform",e[e.DifNonuniform=4]="DifNonuniform"}(tM||(tM={})),function(e){e.Tube="Tube",e.Strip="Strip",e.Wall="Wall"}(rM||(rM={})),function(e){e[e.Random=0]="Random",e[e.Increasing=1]="Increasing",e[e.Decreasing=2]="Decreasing",e[e.IncreasingThenDecreasing=3]="IncreasingThenDecreasing"}(iM||(iM={})),function(e){e[e.Relative=0]="Relative",e[e.Absolute=1]="Absolute"}(sM||(sM={})),function(e){e[e.Normal=0]="Normal",e[e.LowerCase=1]="LowerCase",e[e.Allcaps=2]="Allcaps"}(nM||(nM={})),function(e){e[e.LTR=0]="LTR",e[e.RTL=1]="RTL"}(oM||(oM={})),function(e){e.Draft="Draft",e.Picture="Picture",e.Text="Text"}(aM||(aM={})),function(e){e[e.Top=0]="Top",e[e.Center=1]="Center",e[e.Baseline=2]="Baseline",e[e.Bottom=3]="Bottom"}(lM||(lM={})),function(e){e[e.Right=0]="Right",e[e.Upright=1]="Upright"}(uM||(uM={})),function(e){e[e.Small=0]="Small",e[e.Medium=1]="Medium",e[e.Large=2]="Large"}(cM||(cM={})),function(e){e[e.Calm=0]="Calm",e[e.Rippled=1]="Rippled",e[e.Slight=2]="Slight",e[e.Moderate=3]="Moderate"}(dM||(dM={}));pw.Loop,hw.Linear;const pW=` /-,
`;function pM(e){let t=e.length;for(;t--;)if(!pW.includes(e.charAt(t)))return!1;return!0}function hW(e,t){const r=[];let i=0,s=-1;do if(s=e.indexOf("[",i),s>=i){if(s>i){const n=e.slice(i,s);r.push([n,null,pM(n)])}if(i=s+1,s=e.indexOf("]",i),s>=i){if(s>i){const n=t[e.slice(i,s)];n&&r.push([null,n,!1])}i=s+1}}while(s!==-1);if(i<e.length){const n=e.slice(i);r.push([n,null,pM(n)])}return r}function fW(e,t,r,i){let s="",n=null;for(const o of t){const[l,c,p]=o;if(l)p?n=l:(n&&(s+=n,n=null),s+=l);else{let h=c;r!=null&&(h=wL(c,r));const f=e.attributes[h];f&&(n&&(s+=n,n=null),s+=f)}}return yW(s,i)}function yW(e,t){switch(typeof e!="string"&&(e=String(e)),t){case"LowerCase":return e.toLowerCase();case"Allcaps":return e.toUpperCase();default:return e}}function mW(e){return e?[e[0],e[1],e[2],e[3]/255]:[0,0,0,0]}function mL(e){var t;return((t=e.data)==null?void 0:t.symbol)??null}function gL(e){return e.type==="CIMVectorMarker"||e.type==="CIMPictureMarker"||e.type==="CIMBarChartMarker"||e.type==="CIMCharacterMarker"||e.type==="CIMPieChartMarker"||e.type==="CIMStackedBarChartMarker"}function vL(e){return e.type==="CIMGradientStroke"||e.type==="CIMPictureStroke"||e.type==="CIMSolidStroke"}function bL(e){return e!=null&&(e.type==="CIMMarkerPlacementAlongLineRandomSize"||e.type==="CIMMarkerPlacementAlongLineSameSize"||e.type==="CIMMarkerPlacementAlongLineVariableSize"||e.type==="CIMMarkerPlacementAtExtremities"||e.type==="CIMMarkerPlacementAtMeasuredUnits"||e.type==="CIMMarkerPlacementAtRatioPositions"||e.type==="CIMMarkerPlacementOnLine"||e.type==="CIMMarkerPlacementOnVertices")}const hce=(e,t=0)=>e==null||isNaN(e)?t:e;function gW(e){return(e?Object.keys(e):[]).map(t=>({name:t,alias:t,type:typeof e[t]=="string"?"esriFieldTypeString":"esriFieldTypeDouble"}))}function VS(e){return e&&e.charAt(0).toLowerCase()+e.slice(1)}function fce(e,t,r,i,s,n,o=!0){const{infos:l}=n;let c=1,p=0,h=0,f=0,y=1;for(const{absoluteAnchorPoint:b,offsetX:w,offsetY:S,rotation:x,size:E,frameHeight:C,rotateClockWise:P,scaleSymbolsProportionally:L}of l)y=b?1:c,h=yM(w,S,p,y,h),f=fM(w,S,p,y,f),C&&(L||o)&&(c*=E/C),p=mM(x,P,p);const m=yM(i,s,p,y,h),g=fM(i,s,p,y,f);return{size:e*c,rotation:mM(t,r,p),offsetX:m,offsetY:g}}function vW(e){return e.split(" ").map(t=>Number(t))}function bW(e){return typeof e=="string"?vW(e):e}function wW(e){return e!=null&&e.dashTemplate&&(e.dashTemplate=bW(e.dashTemplate)),e}function fw(e){if(e==null)return"Normal";switch(e.type){case"CIMTextSymbol":return e.textCase??"Normal";case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const t=e.symbolLayers;if(!t)return"Normal";for(const r of t)if(r.type==="CIMVectorMarker")return fw(r)}break;case"CIMVectorMarker":{const t=e.markerGraphics;if(!t)return"Normal";for(const r of t)if(r.symbol)return fw(r.symbol)}}return"Normal"}function wL(e,t){if(t!==null){const r=t.get(e);return r?r.name:e}return e}function _W(e){return e.map(t=>({...t,propertyName:VS(t.propertyName)}))}function hM(e){const t={};for(const r in e){const i=e[r];t[VS(r)]=i}return t}function fM(e,t,r,i,s){const n=r*Math.PI/180;if(n){const o=Math.cos(n);return(Math.sin(n)*e+o*t)*i+s}return t*i+s}function yM(e,t,r,i,s){const n=r*Math.PI/180;return n?(Math.cos(n)*e-Math.sin(n)*t)*i+s:e*i+s}function mM(e,t,r){return t?r-e:r+e}function yce(e){return e?{originPosition:e.originPosition==="upper-left"?"upperLeft":e.originPosition==="lower-left"?"lowerLeft":e.originPosition,scale:e.tolerance?[e.tolerance,e.tolerance,1,1]:[1,1,1,1],translate:e.extent!=null?[e.extent.xmin,e.extent.ymax,e.extent.zmin??0,e.extent.mmin??0]:[0,0,0,0]}:null}function $W(e){return e.originPosition==="lowerLeft"&&e.scale.length===4&&e.translate.length===4}function Ih(e){if($W(e))return e;const{originPosition:t,scale:r,translate:i}=e,s=r[0]??1,n=r[1]??1;return{originPosition:"lowerLeft",scale:[s,t==="lowerLeft"?n:-n,r[2]??1,r[3]??1],translate:[i[0]??0,i[1]??0,i[2]??0,i[3]??0]}}function SW({scale:e,translate:t},r){return Math.round((r-t[0])/e[0])}function xW({scale:e,translate:t},r){return Math.round((r-t[1])/e[1])}function IW({scale:e,translate:t},r){return Math.round(((r??0)-t[2])/e[2])}function TW({scale:e,translate:t},r){return r?Math.round((r-t[3])/e[3]):0}function Th({scale:e,translate:t},r){return r*e[0]+t[0]}function Mh({scale:e,translate:t},r){return r*e[1]+t[1]}function Gp({scale:e,translate:t},r){return(r??0)*e[2]+t[2]}function Bp({scale:e,translate:t},r){return r?r*e[3]+t[3]:0}function US(e,t){return e&&t?CW:e&&!t?EW:!e&&t?AW:MW}const MW=(e,t)=>{const r=new Array(t.length);if(!t.length)return r;const i=t[0];let s=Th(e,i[0]),n=Mh(e,i[1]);r[0]=[s,n];const{scale:o,originPosition:l}=e,c=o[0],p=l==="lowerLeft"?o[1]:-o[1];for(let h=1;h<t.length;h++){const[f,y]=t[h];s+=c*f,n+=p*y,r[h]=[s,n]}return r},EW=(e,t)=>{const r=new Array(t.length);if(!t.length)return r;const i=t[0];let s=Th(e,i[0]),n=Mh(e,i[1]);r[0]=[s,n,Gp(e,i[2])];const{scale:o,originPosition:l}=e,c=o[0],p=l==="lowerLeft"?o[1]:-o[1];for(let h=1;h<t.length;h++){const[f,y,m]=t[h];s+=c*f,n+=p*y,r[h]=[s,n,Gp(e,m)]}return r},AW=(e,t)=>{const r=new Array(t.length);if(!t.length)return r;const i=t[0];let s=Th(e,i[0]),n=Mh(e,i[1]);r[0]=[s,n,Bp(e,i[2])];const{scale:o,originPosition:l}=e,c=o[0],p=l==="lowerLeft"?o[1]:-o[1];for(let h=1;h<t.length;h++){const[f,y,m]=t[h];s+=c*f,n+=p*y,r[h]=[s,n,Bp(e,m)]}return r},CW=(e,t)=>{const r=new Array(t.length);if(!t.length)return r;const i=t[0];let s=Th(e,i[0]),n=Mh(e,i[1]);r[0]=[s,n,Gp(e,i[2]),Bp(e,i[3])];const{scale:o,originPosition:l}=e,c=o[0],p=l==="lowerLeft"?o[1]:-o[1];for(let h=1;h<t.length;h++){const[f,y,m,g]=t[h];s+=c*f,n+=p*y,r[h]=[s,n,Gp(e,m),Bp(e,g)]}return r};function _L(e,t,r){const i=new Array(r.length);for(let s=0;s<r.length;s++)i[s]=t(e,r[s]);return i}function mce(e,t,r){const i=Ih(e);return t.x=SW(i,r.x),t.y=xW(i,r.y),r.z!=null&&(t.z=IW(i,r.z)),r.m!=null&&(t.m=TW(i,r.m)),t}function OW(e,t,r,i=(r==null?void 0:r.hasZ)??!1,s=(r==null?void 0:r.hasM)??!1){if(r!=null){const n=Ih(e);t.points=US(i,s)(n,r.points),t.hasZ=i,t.hasM=s}return t}function FW(e,t,r,i=(r==null?void 0:r.z)!=null,s=(r==null?void 0:r.m)!=null){if(r==null)return t;const n=Ih(e);return t.x=Th(n,r.x),t.y=Mh(n,r.y),i&&(t.z=Gp(n,r.z)),s&&(t.m=Bp(n,r.m)),t}function kW(e,t,r,i=(r==null?void 0:r.hasZ)??!1,s=(r==null?void 0:r.hasM)??!1){if(r!=null){const n=Ih(e);t.rings=_L(n,US(i,s),r.rings),t.hasZ=i,t.hasM=s}return t}function PW(e,t,r,i=(r==null?void 0:r.hasZ)??!1,s=(r==null?void 0:r.hasM)??!1){if(r!=null){const n=Ih(e);t.paths=_L(n,US(i,s),r.paths),t.hasZ=i,t.hasM=s}return t}function LW(e,t,r,i,s){if(e==null)return null;const n=e.referencesGeometry()&&s?NW(t,i,s):t,o=e.repurposeFeature(n);try{return e.evaluate({...r,$feature:o},e.services)}catch(l){return G.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",l),null}}const G0=new Map;function NW(e,t,r){const{transform:i,hasZ:s,hasM:n}=r;G0.has(t)||G0.set(t,RW(t));const o=G0.get(t)(e.geometry,i,s,n);return{...e,geometry:o}}function RW(e){const t={};switch(e){case"esriGeometryPoint":return(r,i,s,n)=>FW(i,t,r,s,n);case"esriGeometryPolygon":return(r,i,s,n)=>kW(i,t,r,s,n);case"esriGeometryPolyline":return(r,i,s,n)=>PW(i,t,r,s,n);case"esriGeometryMultipoint":return(r,i,s,n)=>OW(i,t,r,s,n);default:return G.getLogger("esri.views.2d.support.arcadeOnDemand").error(new O("mapview-arcade",`Unable to handle geometryType: ${e}`)),r=>r}}const jW=e=>{if(!e)return[0,0,0,0];const{r:t,g:r,b:i,a:s}=e;return[t,r,i,255*s]};let $L=class Ke{static findApplicableOverrides(t,r,i){if(t&&r){if(t.primitiveName){let s=!1;for(const n of i)if(n.primitiveName===t.primitiveName){s=!0;break}if(!s)for(const n of r)n.primitiveName===t.primitiveName&&i.push(n)}switch(t.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(t.effects)for(const s of t.effects)Ke.findApplicableOverrides(s,r,i);if(t.symbolLayers)for(const s of t.symbolLayers)Ke.findApplicableOverrides(s,r,i);break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":case"CIMSolidFill":case"CIMPictureFill":case"CIMHatchFill":case"CIMGradientFill":case"CIMVectorMarker":case"CIMCharacterMarker":case"CIMPictureMarker":if(t.effects)for(const s of t.effects)Ke.findApplicableOverrides(s,r,i);if(t.markerPlacement&&Ke.findApplicableOverrides(t.markerPlacement,r,i),t.type==="CIMVectorMarker"){if(t.markerGraphics)for(const s of t.markerGraphics)Ke.findApplicableOverrides(s,r,i),Ke.findApplicableOverrides(s.symbol,r,i)}else t.type==="CIMCharacterMarker"?Ke.findApplicableOverrides(t.symbol,r,i):t.type==="CIMHatchFill"?Ke.findApplicableOverrides(t.lineSymbol,r,i):t.type==="CIMPictureMarker"&&Ke.findApplicableOverrides(t.animatedSymbolProperties,r,i)}}}static findEffectOverrides(t,r){if(!t)return null;if(t.type==="CIMGeometricEffectDashes"&&wW(t),!r||!t.primitiveName)return{type:"cim-effect-param",effect:t,overrides:[]};const i=hM(t),s=t.primitiveName,n=[];for(const o of r)o.primitiveName===s&&n.push(hM(o));return{type:"cim-effect-param",effect:i,overrides:_W(n)}}static async resolveSymbolOverrides(t,r,i,s,n,o,l){if(!(t!=null&&t.symbol))return null;let{symbol:c,primitiveOverrides:p}=t;const h=!!p;if(!h&&!s)return c;c=M(c),p=M(p);let f=!0;if(r||(r={attributes:{}},f=!1),h){if(f||(p=p.filter(y=>{var m;return!((m=y.valueExpressionInfo)!=null&&m.expression.includes("$feature"))})),l||(p=p.filter(y=>{var m;return!((m=y.valueExpressionInfo)!=null&&m.expression.includes("$view"))})),p.length>0){const y={spatialReference:i,fields:gW(r.attributes),geometryType:n};await Ke.createRenderExpressions(p,y),Ke.evaluateOverrides(p,r,n??"esriGeometryPoint",o,l)}Ke.applyOverrides(c,p)}return s&&Ke.applyDictionaryTextOverrides(c,r,s,null),c}static async createRenderExpressions(t,r){const i=[];for(const s of t){const n=s.valueExpressionInfo;if(!n||Ke._expressionToRenderExpression.has(n.expression))continue;const o=jU(n.expression,r.spatialReference,r.fields);i.push(o),o.then(l=>Ke._expressionToRenderExpression.set(n.expression,l))}i.length>0&&await Promise.all(i)}static evaluateOverrides(t,r,i,s,n){const o={$view:{scale:n==null?void 0:n.scale}};for(const l of t){l.value&&typeof l.value=="object"&&lL(l.value)&&(l.propertyName==="Color"||l.propertyName==="StrokeColor")&&(l.value=jW(l.value));const c=l.valueExpressionInfo;if(!c)continue;const p=Ke._expressionToRenderExpression.get(c.expression);p&&(l.value=LW(p,r,o,i,s))}}static applyDictionaryTextOverrides(t,r,i,s,n="Normal"){if(t!=null&&t.type)switch(t.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":case"CIMTextSymbol":{const o=t.symbolLayers;if(!o)return;for(const l of o)l&&l.type==="CIMVectorMarker"&&Ke.applyDictionaryTextOverrides(l,r,i,s,t.type==="CIMTextSymbol"?t.textCase:n)}break;case"CIMVectorMarker":{const o=t.markerGraphics;if(!o)return;for(const l of o)l&&Ke.applyDictionaryTextOverrides(l,r,i,s)}break;case"CIMMarkerGraphic":{const o=t.textString;if(o&&o.includes("[")){const l=hW(o,i);t.textString=fW(r,l,s,n)}}}}static applyOverrides(t,r,i,s){if(t.primitiveName){for(const n of r)if(n.primitiveName===t.primitiveName){const o=VS(n.propertyName);if(s&&s.push({cim:t,nocapPropertyName:o,value:t[o]}),i){let l=!1;for(const c of i)c.primitiveName===t.primitiveName&&(l=!0);l||i.push(n)}n.value!=null&&(t[o]=n.value)}}switch(t.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(t.effects)for(const n of t.effects)Ke.applyOverrides(n,r,i,s);if(t.symbolLayers)for(const n of t.symbolLayers)Ke.applyOverrides(n,r,i,s);break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMSolidFill":case"CIMVectorMarker":if(t.effects)for(const n of t.effects)Ke.applyOverrides(n,r,i,s);if(t.type==="CIMVectorMarker"&&t.markerGraphics)for(const n of t.markerGraphics)Ke.applyOverrides(n,r,i,s),Ke.applyOverrides(n.symbol,r,i,s)}}static restoreOverrides(t){for(const r of t)r.cim[r.nocapPropertyName]=r.value}static buildOverrideKey(t){let r="";for(const i of t)i.value!==void 0&&(r+=`${i.primitiveName}${i.propertyName}${JSON.stringify(i.value)}`);return r}static toValue(t,r){if(t==="DashTemplate")return r.split(" ").map(i=>Number(i));if(t==="Color"){const i=new ee(r).toRgba();return i[3]*=255,i}return r}};$L._expressionToRenderExpression=new Map;const gM="esri.renderers.support.DictionaryLoader",DW={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};let SL=class{constructor(t,r,i){this.config=null,this.fieldMap=null,this.url=null,this._ongoingRequests=new Map,this._symbolCache=new BP(100),this._dictionaryVersion=null,this._fieldIndex=null,this._dictionaryPromise=null,this.url=t,this.config=r,this.fieldMap=i}getSymbolFields(){return this._symbolFields}async getSymbolAsync(t,r){var f;let i;this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(r));try{i=await this._dictionaryPromise}catch(y){if(vr(y))return this._dictionaryPromise=null,null}const s=(f=this._dictionaryVersion)==null?void 0:f.greaterEqual(4,0),n={};if(this.fieldMap)for(const y of this._symbolFields){const m=wL(this.fieldMap[y],this._fieldIndex);if(m){const g=t.attributes[m];n[y]=s?g:g!=null?""+t.attributes[m]:""}else n[y]=""}let o=null;try{o=i==null?void 0:i(n,r)}catch{return null}if(!o||typeof o!="string"||o==="invalid")return null;const l=o.split(";"),c=[],p=[];for(let y=0;y<l.length;y++){const m=l[y];if(m){if(m.includes("po:")){const g=m.slice(3).split("|");if(g.length===3){const b=g[0],w=g[1];let S=g[2];const x="countrylabel";if(b===x&&w==="TextString"){if(this.fieldMap!=null){let E=this.fieldMap[x];E==null&&(E=x,this.fieldMap[E]=E),t.attributes[E]=S}continue}if(w==="DashTemplate")S=S.split(" ").map(E=>Number(E));else if(w==="Color"){const E=new ee(S).toRgba();S=[E[0],E[1],E[2],255*E[3]]}else S=Number(S);p.push({primitiveName:b,propertyName:w,value:S,defaultValue:null})}}else if(m.includes("|")){for(const g of m.split("|"))if(this._itemNames.has(g)){c.push(g);break}}else if(this._itemNames.has(m))c.push(m);else if(y===0){c.length=0;let g="Invalid_P";t.geometry!=null&&(Ya(t.geometry)?g="Invalid_A":Z$(t.geometry)&&(g="Invalid_L")),c.push(g);break}}}const h=t.geometry==null||!t.geometry.hasZ&&t.geometry.type==="point";return this._cimPartsToCIMSymbol(t,c,p,h,r)}async fetchResources(t){if(this._dictionaryPromise)return this._dictionaryPromise;if(!this.url)return void G.getLogger(gM).error("no valid URL!");const r=Ge(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"},signal:t!=null?t.signal:null}),[{data:i}]=await Promise.all([r,In()]);if(!i)throw this._dictionaryPromise=null,new O("esri.renderers.DictionaryRenderer","Bad dictionary data!");const{authoringInfo:s,dictionary_version:n,expression:o,itemsNames:l}=i,c=o;let p=!1;n&&(this._dictionaryVersion=rB.parse(n),p=this._dictionaryVersion.greaterEqual(4,0)),this._refSymbolUrlTemplate=this.url+"/"+i.cimRefTemplateUrl,this._itemNames=new Set(l),this._symbolFields=s.symbol;const h={};if(this.config){const m=this.config;for(const g in m)h[g]=m[g]}if(s.configuration)for(const m of s.configuration)h.hasOwnProperty(m.name)||(h[m.name]=m.value);const f=[];if(t!=null&&t.fields&&this.fieldMap)for(const m in this.fieldMap){const g=this.fieldMap[m],b=t.fields.filter(w=>w.name.toLowerCase()===(g==null?void 0:g.toLowerCase()));b.length>0&&f.push({...b[0],type:p?b[0].type:"esriFieldTypeString"})}f.length>0&&(this._fieldIndex=new WP(f));const y=DU(c,t!=null?t.spatialReference:null,f,h).then(m=>{const g={scale:0};return(b,w)=>{if(m==null)return null;const S=m.repurposeFeature({geometry:null,attributes:b});return g.scale=w!=null?w.scale??void 0:void 0,m.evaluate({$feature:S,$view:g},m.services)}}).catch(m=>(G.getLogger(gM).error("Creating dictionary expression failed:",m),null));return this._dictionaryPromise=y,y}async _cimPartsToCIMSymbol(t,r,i,s,n){const o=new Array(r.length);for(let p=0;p<r.length;p++)o[p]=this._getSymbolPart(r[p],n);let l=await Promise.all(o);const c=this.fieldMap;if(c){l=M(l);for(const p of l)$L.applyDictionaryTextOverrides(p,t,c,this._fieldIndex,fw(p))}return new Mn({data:VW(l,i,s)})}async _getSymbolPart(t,r){const i=this._symbolCache.get(t);if(i)return i;if(this._ongoingRequests.has(t))return this._ongoingRequests.get(t).then(o=>o.data);const s=this._refSymbolUrlTemplate.replaceAll(/\{itemName\}/gi,t),n=Ge(s,{responseType:"json",query:{f:"json"},...r});this._ongoingRequests.set(t,n),n.finally(()=>this._ongoingRequests.delete(t));try{const o=await n;return this._symbolCache.put(t,o.data),o.data}catch(o){throw o}}};function VW(e,t,r){if(!e||e.length===0)return null;const i={...e[0]};if(e.length>1){i.effects=null,i.symbolLayers=[];for(const s of e){const n=s;if(n.effects!=null)for(const o of n.symbolLayers)o.effects==null?o.effects=n.effects:o.effects.unshift(...n.effects);i.symbolLayers.unshift(...n.symbolLayers)}}return r&&(i.callout=DW),{type:"CIMSymbolReference",symbol:i,primitiveOverrides:t}}var yw;let Vi=yw=class extends Dc(An){constructor(e){super(e),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}get _loader(){return new SL(this.url,this.config,this.fieldMap)}writeData(e,t){e&&(t.scalingExpressionInfo={expression:e,returnType:"number"})}writeVisualVariables(e,t,r,i){i!=null&&i.origin||super.writeVisualVariables(e,t,r,i)}clone(){return new yw({config:M(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:M(this.fieldMap),url:M(this.url),visualVariables:M(this.visualVariables)})}async getSymbolAsync(e,t){return this._loader.getSymbolAsync(e,t)}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t),this.scaleExpression&&await us(e,t,this.scaleExpression);for(const r in this.fieldMap){const i=this.fieldMap[r];t.has(i)&&e.add(i)}}get arcadeRequired(){return!0}getSymbol(){return null}getSymbols(){return[]}getAttributeHash(){var e;return((e=this.visualVariables)==null?void 0:e.reduce((t,r)=>t+r.getAttributeHash(),""))??""}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}getSymbolFields(){return this._loader.getSymbolFields()}};a([u({type:SL})],Vi.prototype,"_loader",null),a([u({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],Vi.prototype,"config",void 0),a([u({type:Object,json:{write:!0}})],Vi.prototype,"fieldMap",void 0),a([u({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],Vi.prototype,"scaleExpression",void 0),a([B("scaleExpression")],Vi.prototype,"writeData",null),a([u({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(e){return{enabled:!!e&&!!this.scaleExpression}}}}})],Vi.prototype,"scaleExpressionTitle",void 0),a([u({type:String,json:{write:!0}})],Vi.prototype,"url",void 0),a([B("visualVariables")],Vi.prototype,"writeVisualVariables",null),Vi=yw=a([_("esri.renderers.DictionaryRenderer")],Vi);const UW=Vi;var mw;let Qs=mw=class extends R{constructor(e){super(e),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(e){return e==null?e:typeof e=="function"?(G.getLogger(this).error(".field: field must be a string value"),null):dh(e)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){var e;return new mw({color:(e=this.color)==null?void 0:e.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};a([u({type:ee,json:{type:[Number],write:!0}})],Qs.prototype,"color",void 0),a([u({type:String,json:{write:!0}})],Qs.prototype,"field",void 0),a([Ce("field")],Qs.prototype,"castField",null),a([u({type:String,json:{write:!0}})],Qs.prototype,"label",void 0),a([u({type:String,json:{write:!0}})],Qs.prototype,"valueExpression",void 0),a([u({type:String,json:{write:!0}})],Qs.prototype,"valueExpressionTitle",void 0),Qs=mw=a([_("esri.renderers.support.AttributeColorInfo")],Qs);const xL=Qs;var gw;let Ty=gw=class extends R{constructor(){super(...arguments),this.unit=null}clone(){return new gw({unit:this.unit})}};a([u({type:String,json:{write:!0}})],Ty.prototype,"unit",void 0),Ty=gw=a([_("esri.renderers.support.DotDensityLegendOptions")],Ty);const zW=Ty;var vw;let Ir=vw=class extends Dc(An){constructor(e){super(e),this.attributes=null,this.backgroundColor=new ee([0,0,0,0]),this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new Ur,this.dotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}calculateDotValue(e){if(this.referenceScale==null)return this.dotValue;const t=e/this.referenceScale*this.dotValue;return t<1?1:t}getSymbol(){return new En({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}getAttributeHash(){var e;return((e=this.attributes)==null?void 0:e.reduce((t,r)=>t+r.getAttributeHash(),""))??""}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new vw({attributes:M(this.attributes),backgroundColor:M(this.backgroundColor),dotBlendingEnabled:M(this.dotBlendingEnabled),dotShape:M(this.dotShape),dotSize:M(this.dotSize),dotValue:M(this.dotValue),legendOptions:M(this.legendOptions),outline:M(this.outline),referenceScale:M(this.referenceScale),seed:M(this.seed),visualVariables:M(this.visualVariables),authoringInfo:M(this.authoringInfo)})}getControllerHash(){var t;return`${(t=this.attributes)==null?void 0:t.map(r=>r.field||r.valueExpression||"")}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t);for(const r of this.attributes??[])r.valueExpression&&await us(e,t,r.valueExpression),r.field&&e.add(r.field)}};a([u({type:[xL],json:{write:!0}})],Ir.prototype,"attributes",void 0),a([u({type:ee,json:{write:!0}})],Ir.prototype,"backgroundColor",void 0),a([u({type:Boolean,json:{write:!0}})],Ir.prototype,"dotBlendingEnabled",void 0),a([u({type:String,json:{write:!1}})],Ir.prototype,"dotShape",void 0),a([u({type:Number,json:{write:!0}})],Ir.prototype,"dotSize",void 0),a([u({type:zW,json:{write:!0}})],Ir.prototype,"legendOptions",void 0),a([u({type:Ur,json:{default:null,write:!0}})],Ir.prototype,"outline",void 0),a([u({type:Number,json:{write:!0}})],Ir.prototype,"dotValue",void 0),a([u({type:Number,json:{write:!0}})],Ir.prototype,"referenceScale",void 0),a([u({type:Number,json:{write:!0}})],Ir.prototype,"seed",void 0),a([re({dotDensity:"dot-density"})],Ir.prototype,"type",void 0),Ir=vw=a([_("esri.renderers.DotDensityRenderer")],Ir);const qW=Ir;var bw;let jd=bw=class extends R{constructor(e){super(e),this.color=null,this.ratio=null}clone(){return new bw({color:this.color&&this.color.clone(),ratio:this.ratio})}};a([u({type:ee,json:{type:[je],default:null,write:!0}})],jd.prototype,"color",void 0),a([u({type:Number,json:{write:!0}})],jd.prototype,"ratio",void 0),jd=bw=a([_("esri.renderers.support.HeatmapColorStop")],jd);const gp=jd;let Kl=class extends Oe(R){constructor(){super(...arguments),this.minLabel=null,this.maxLabel=null,this.title=null}};a([u({type:String,json:{write:!0}})],Kl.prototype,"minLabel",void 0),a([u({type:String,json:{write:!0}})],Kl.prototype,"maxLabel",void 0),a([u({type:String,json:{write:!0}})],Kl.prototype,"title",void 0),Kl=a([_("esri.renderers.support.HeatmapLegendOptions")],Kl);const zS=2.4;function GW(e){return Mi(e*zS)}function BW(e){return Rz(e)/zS}function bce(e,t,r){const i=Math.sqrt(e**2+t**2)/r;return i>1?0:3/(Math.PI*r**2)*(1-i**2)**2}function wce(e){return typeof e=="function"?e:e?t=>+t[e]:()=>1}var ww;function vM(e){if(e!=null){const{maxDensity:t,minDensity:r,radius:i}=e;if(t!=null||r!=null||i!=null){const{blurRadius:s,maxPixelIntensity:n,minPixelIntensity:o,...l}=e;return l}}return e}let Lt=ww=class extends An{constructor(e){super(e),this.authoringInfo=null,this.colorStops=[new gp({ratio:0,color:new ee("rgba(255, 140, 0, 0)")}),new gp({ratio:.75,color:new ee("rgba(255, 140, 0, 1)")}),new gp({ratio:.9,color:new ee("rgba(255, 0,   0, 1)")})],this.field=null,this.legendOptions=null,this.maxDensity=.04,this.minDensity=0,this.radius=18,this.referenceScale=0,this.type="heatmap",this.valueExpression=null,this.valueExpressionTitle=null}normalizeCtorArgs(e){return vM(e)}get blurRadius(){return BW(this.radius)}set blurRadius(e){const t=this.maxPixelIntensity,r=this.minPixelIntensity;this._set("radius",GW(e)),this._set("maxDensity",t*this._pixelIntensityToDensity),this._set("minDensity",r*this._pixelIntensityToDensity)}get maxPixelIntensity(){return this.maxDensity/this._pixelIntensityToDensity}set maxPixelIntensity(e){this._set("maxDensity",e*this._pixelIntensityToDensity)}get minPixelIntensity(){return this.minDensity/this._pixelIntensityToDensity}set minPixelIntensity(e){this._set("minDensity",e*this._pixelIntensityToDensity)}get _pixelIntensityToDensity(){return 24/(zS**2*this.blurRadius**4)}read(e,t){e=vM(e),super.read(e,t)}getSymbol(){return new qs}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}async collectRequiredFields(e,t){const r=this.field,i=this.valueExpression;r&&typeof r=="string"&&ri(e,t,r),i&&typeof i=="string"&&await us(e,t,i)}getAttributeHash(){return""}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new ww({authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),colorStops:M(this.colorStops),field:this.field,legendOptions:M(this.legendOptions),maxDensity:this.maxDensity,minDensity:this.minDensity,radius:this.radius,referenceScale:this.referenceScale,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};a([u({type:MS,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Lt.prototype,"authoringInfo",void 0),a([u({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Lt.prototype,"blurRadius",null),a([u({type:[gp],json:{write:!0}})],Lt.prototype,"colorStops",void 0),a([u({type:String,json:{write:!0}})],Lt.prototype,"field",void 0),a([u({type:Kl,json:{write:!0}})],Lt.prototype,"legendOptions",void 0),a([u({type:Number,json:{write:!0}})],Lt.prototype,"maxDensity",void 0),a([u({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Lt.prototype,"maxPixelIntensity",null),a([u({type:Number,json:{write:!0}})],Lt.prototype,"minDensity",void 0),a([u({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Lt.prototype,"minPixelIntensity",null),a([u({type:Number,cast:Se,json:{write:!0}})],Lt.prototype,"radius",void 0),a([u({type:Number,range:{min:0},json:{default:0,write:!0}})],Lt.prototype,"referenceScale",void 0),a([re({heatmap:"heatmap"})],Lt.prototype,"type",void 0),a([u({type:String,json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],Lt.prototype,"valueExpression",void 0),a([u({type:String})],Lt.prototype,"valueExpressionTitle",void 0),a([u({readOnly:!0})],Lt.prototype,"_pixelIntensityToDensity",null),Lt=ww=a([_("esri.renderers.HeatmapRenderer")],Lt);const IL=Lt;let Da=class extends Oe(R){constructor(){super(...arguments),this.color=new ee([0,0,0,0]),this.label=null,this.threshold=0}};a([u({type:ee,json:{write:!0}})],Da.prototype,"color",void 0),a([u({type:String,json:{write:!0}})],Da.prototype,"label",void 0),a([u({type:Number,range:{min:0,max:1},json:{write:!0}})],Da.prototype,"threshold",void 0),Da=a([_("esri.renderers.support.OthersCategory")],Da);const WW={base:jc,key:"type",typeMap:{size:Dg,opacity:ES}};let Tr=class extends Dc(Oe(An)){constructor(t){super(t),this.attributes=null,this.backgroundFillSymbol=null,this.defaultColor=new ee([0,0,0,0]),this.defaultLabel=null,this.holePercentage=0,this.othersCategory=new Da,this.legendOptions=null,this.outline=null,this.size=12,this.type="pie-chart",this.visualVariables=null}getSymbol(){var t;return new qs({size:this.size?this.size/2+(((t=this.outline)==null?void 0:t.width)||0):0})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol(),this.backgroundFillSymbol].filter(gl)}getAttributeHash(){var t;return((t=this.visualVariables)==null?void 0:t.reduce((r,i)=>r+i.getAttributeHash(),""))??""}getMeshHash(){return this.getSymbols().reduce((t,r)=>t+JSON.stringify(r),"")}async collectRequiredFields(t,r){await this.collectVVRequiredFields(t,r);for(const i of this.attributes)i.valueExpression&&await us(t,r,i.valueExpression),i.field&&t.add(i.field)}};a([u({type:[xL],json:{write:!0}})],Tr.prototype,"attributes",void 0),a([u(PS)],Tr.prototype,"backgroundFillSymbol",void 0),a([u({type:ee,json:{write:!0}})],Tr.prototype,"defaultColor",void 0),a([u({type:String,json:{write:!0}})],Tr.prototype,"defaultLabel",void 0),a([u({type:Number,range:{min:0,max:1},json:{write:!0}})],Tr.prototype,"holePercentage",void 0),a([u({type:Da,json:{write:!0}})],Tr.prototype,"othersCategory",void 0),a([u({type:LS,json:{write:!0}})],Tr.prototype,"legendOptions",void 0),a([u({type:Ur,json:{default:null,write:!0}})],Tr.prototype,"outline",void 0),a([u({type:Number,cast:Se,json:{write:!0}})],Tr.prototype,"size",void 0),a([re({pieChart:"pie-chart"})],Tr.prototype,"type",void 0),a([u({types:[WW]})],Tr.prototype,"visualVariables",void 0),Tr=a([_("esri.renderers.PieChartRenderer")],Tr);const HW=Tr;var _w;let Sa=_w=class extends Dc(An){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.type="simple"}async collectRequiredFields(e,t){await Promise.all([this.collectSymbolFields(e,t),this.collectVVRequiredFields(e,t)])}async collectSymbolFields(e,t){await Promise.all(this.getSymbols().map(r=>r.collectRequiredFields(e,t)))}getSymbol(e,t){return this.symbol}async getSymbolAsync(e,t){return this.symbol}getSymbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){var e;return((e=this.visualVariables)==null?void 0:e.reduce((t,r)=>t+r.getAttributeHash(),""))??""}getMeshHash(){return this.getSymbols().reduce((e,t)=>e+JSON.stringify(t),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new _w({description:this.description,label:this.label,symbol:M(this.symbol),visualVariables:M(this.visualVariables),authoringInfo:M(this.authoringInfo)})}};a([u({type:String,json:{write:!0}})],Sa.prototype,"description",void 0),a([u({type:String,json:{write:!0}})],Sa.prototype,"label",void 0),a([u(kS)],Sa.prototype,"symbol",void 0),a([re({simple:"simple"})],Sa.prototype,"type",void 0),Sa=_w=a([_("esri.renderers.SimpleRenderer")],Sa);const Wo=Sa,JW=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function $w(e){return e instanceof $e}function bM(e){return e instanceof ne?Object.keys(e.items):$w(e)?jr(e).keys():e?Object.keys(e):[]}function cf(e,t){return e instanceof ne?e.items[t]:e[t]}function ZW(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}function vp(e){return e?e.declaredClass:null}function TL(e,t){var f;const r=e.diff;if(r&&typeof r=="function")return r(e,t);const i=bM(e),s=bM(t);if(i.length===0&&s.length===0)return;if(!i.length||!s.length||ZW(e,t))return{type:"complete",oldValue:e,newValue:t};const n=s.filter(y=>!i.includes(y)),o=i.filter(y=>!s.includes(y)),l=i.filter(y=>s.includes(y)&&cf(e,y)!==cf(t,y)).concat(n,o).sort(),c=vp(e);if(c&&JW.has(c)&&l.length)return{type:"complete",oldValue:e,newValue:t};let p;const h=$w(e)&&$w(t);for(const y of l){const m=cf(e,y),g=cf(t,y);let b;if((h||typeof m!="function"&&typeof g!="function")&&m!==g&&(m!=null||g!=null)){if(r&&r[y]&&typeof r[y]=="function")b=(f=r[y])==null?void 0:f.call(r,m,g);else if(m instanceof Date&&g instanceof Date){if(m.getTime()===g.getTime())continue;b={type:"complete",oldValue:m,newValue:g}}else b=typeof m=="object"&&typeof g=="object"&&vp(m)===vp(g)?TL(m,g):{type:"complete",oldValue:m,newValue:g};b!=null&&(p!=null?p.diff[y]=b:p={type:"partial",diff:{[y]:b}})}}return p}function Sce(e,t){return YW(e,t)}function YW(e,t){if(e==null)return!1;const r=t.split(".");let i=e;for(const s of r){if(i.type==="complete")return!0;if(i.type!=="partial")return!1;{const n=i.diff[s];if(!n)return!1;i=n}}return!0}function xce(e,t){if(!e)return!1;if(e.type==="partial"){const r=Object.keys(e.diff);return r.length===1&&r[0]===t}return!1}function QW(e,t){if(typeof e!="function"&&typeof t!="function"&&(e!=null||t!=null))return e==null||t==null||typeof e=="object"&&typeof t=="object"&&vp(e)!==vp(t)?{type:"complete",oldValue:e,newValue:t}:TL(e,t)}let Xl=class extends Oe(R){constructor(t){super(t),this.value=null,this.value2=null,this.value3=null}};a([u($y)],Xl.prototype,"value",void 0),a([u($y)],Xl.prototype,"value2",void 0),a([u($y)],Xl.prototype,"value3",void 0),Xl=a([_("esri.renderers.support.UniqueValue")],Xl);const Gu=Xl;let io=class extends Oe(R){constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.values=null}castValues(t){if(t==null)return null;const r=typeof(t=Array.isArray(t)?t:[t])[0];return r==="string"||r==="number"?t.map(i=>new Gu({value:i})):r==="object"?t[0]instanceof Gu?t:t.map(i=>new Gu(i)):null}};a([u({type:String,json:{write:!0}})],io.prototype,"description",void 0),a([u({type:String,json:{write:!0}})],io.prototype,"label",void 0),a([u(Ug)],io.prototype,"symbol",void 0),a([u({type:[Gu],json:{type:[[String]],read:{reader:e=>e?e.map(t=>new Gu({value:t[0],value2:t[1],value3:t[2]})):null},write:{writer:(e,t)=>{const r=[];for(const i of e){const s=[i.value,i.value2,i.value3].filter(gl).map(n=>n.toString());r.push(s)}t.values=r}}}})],io.prototype,"values",void 0),a([Ce("values")],io.prototype,"castValues",null),io=a([_("esri.renderers.support.UniqueValueClass")],io);const ML=io;let Dd=class extends Oe(R){constructor(t){super(t),this.heading=null,this.classes=null}};a([u({type:String,json:{write:!0}})],Dd.prototype,"heading",void 0),a([u({type:[ML],json:{write:!0}})],Dd.prototype,"classes",void 0),Dd=a([_("esri.renderers.support.UniqueValueGroup")],Dd);const Sw=Dd;var xw;let xa=xw=class extends R{constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.value=null}clone(){return new xw({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){var t;const e=JSON.stringify((t=this.symbol)==null?void 0:t.toJSON());return`${this.value}.${e}`}};a([u({type:String,json:{write:!0}})],xa.prototype,"description",void 0),a([u({type:String,json:{write:!0}})],xa.prototype,"label",void 0),a([u(kS)],xa.prototype,"symbol",void 0),a([u($y)],xa.prototype,"value",void 0),xa=xw=a([_("esri.renderers.support.UniqueValueInfo")],xa);const bp=xa,wM=new Map;async function KW(e,t){try{return{data:(await rH(e,t)).data,baseUrl:IV(e),styleUrl:e}}catch(r){return Fs(r),null}}function XW(e,t,r){var c;const i=t.portal!=null?t.portal:Vr.getDefault();let s;const n=`${i.url} - ${(c=i.user)==null?void 0:c.username} - ${e}`,o=wM.get(n);if(o)return o;const l=eH(e,i,r).then(p=>(s=p,p.fetchData())).then(p=>({data:p,baseUrl:s.itemUrl??"",styleName:e}));return wM.set(n,l),l}function eH(e,t,r){return t.load(r).then(()=>{const i=new Xi({disableExtraQuery:!0,query:`owner:${_M} AND type:${$M} AND typekeywords:"${e}"`});return t.queryItems(i,r)}).then(({results:i})=>{var o;let s=null;const n=e.toLowerCase();if(i&&Array.isArray(i)){for(const l of i)if(((o=l.typeKeywords)==null?void 0:o.some(p=>p.toLowerCase()===n))&&l.type===$M&&l.owner===_M){s=l;break}}if(!s)throw new O("symbolstyleutils:style-not-found",`The style '${e}' could not be found`,{styleName:e});return s.load(r)})}function tH(e,t,r){return(e==null?void 0:e.styleUrl)!=null?KW(e.styleUrl,r):(e==null?void 0:e.styleName)!=null?XW(e.styleName,t,r):Promise.reject(new O("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function Ece(e){return e===null||e.type==="CIMSymbolReference"?e:{type:"CIMSymbolReference",symbol:e}}function Ace(e,t,r=["gltf"]){if(t==="cimRef")return encodeURI(e.cimRef);if(e.formatInfos&&!k("enable-feature:force-wosr"))for(const i of r){const s=e.formatInfos.find(n=>n.type===i);if(s)return s.href}return encodeURI(e.webRef)}function rH(e,t){const r={responseType:"json",query:{f:"json"},...t};return Ge(rs(e),r)}const _M="esri_en",$M="Style",Cce="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";var Vd;const EL="esri.renderers.UniqueValueRenderer",Vn=()=>G.getLogger(EL),SM="uvInfos-watcher",xM="uvGroups-watcher",iH=",",sH=Zt(bp);function nH(e){const{field1:t,field2:r,field3:i,fieldDelimiter:s,uniqueValueInfos:n,valueExpression:o}=e,l=!(!t||!r);return[{classes:(n??[]).map(c=>{var S;const{symbol:p,label:h,value:f,description:y}=c,[m,g,b]=l?((S=f==null?void 0:f.toString())==null?void 0:S.split(s||""))||[]:[f],w=[];return(t||o)&&w.push(m),r&&w.push(g),i&&w.push(b),{symbol:p,label:h,values:[w],description:y}})}]}function Pl(e){return e!=null&&e!==""&&(typeof e!="string"||e.trim()!==""&&e.toLowerCase()!=="<null>")||(e=null),e+""}let We=Vd=class extends Dc(An){constructor(e){super(e),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this._isInfosSource=null,this.type="unique-value",this.backgroundFillSymbol=null,this.orderByClassesEnabled=!1,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(t,r){if(!t&&!r)return;if(!t||!r)return{type:"complete",oldValue:t,newValue:r};let i=!1;const s={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let n=0;n<r.length;n++){const o=t.find(l=>l.value===r[n].value);o?QW(o,r[n])?(s.changed.push({type:"complete",oldValue:o,newValue:r[n]}),i=!0):s.unchanged.push({oldValue:o,newValue:r[n]}):(s.added.push(r[n]),i=!0)}for(let n=0;n<t.length;n++)r.find(o=>o.value===t[n].value)||(s.removed.push(t[n]),i=!0);return i?s:void 0}},this._set("uniqueValueInfos",[]),this._set("uniqueValueGroups",[])}get _cache(){return{compiledFunc:null}}set field(e){this._set("field",e),this._updateFieldDelimiter(),this._updateUniqueValues()}castField(e){return e==null||typeof e=="function"?e:dh(e)}writeField(e,t,r,i){typeof e=="string"?t[r]=e:i!=null&&i.messages?i.messages.push(new O("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):Vn().error(".field: cannot write field to JSON since it's not a string value")}set field2(e){this._set("field2",e),this._updateFieldDelimiter(),this._updateUniqueValues()}set field3(e){this._set("field3",e),this._updateUniqueValues()}set valueExpression(e){this._set("valueExpression",e),this._updateUniqueValues()}set defaultSymbol(e){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",e)}set fieldDelimiter(e){this._set("fieldDelimiter",e),this._updateUniqueValues()}readPortal(e,t,r){return r.portal||Vr.getDefault()}readStyleOrigin(e,t,r){if(t.styleName)return Object.freeze({styleName:t.styleName});if(t.styleUrl){const i=kc(t.styleUrl,r);return Object.freeze({styleUrl:i})}}writeStyleOrigin(e,t,r,i){e.styleName?t.styleName=e.styleName:e.styleUrl&&(t.styleUrl=$h(e.styleUrl,i))}set uniqueValueGroups(e){this.styleOrigin?Vn().error("#uniqueValueGroups=","Cannot modify unique value groups of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueGroups",e),this._updateInfosFromGroups(),this._isInfosSource=!1,this._watchUniqueValueGroups())}set uniqueValueInfos(e){this.styleOrigin?Vn().error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",e),this._updateValueInfoMap(),this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos())}addUniqueValueInfo(e,t){var i;if(this.styleOrigin)return void Vn().error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let r;r=typeof e=="object"?sH(e):new bp({value:e,symbol:EP(t)}),(i=this.uniqueValueInfos)==null||i.push(r),this._valueInfoMap[Pl(r.value)]=r,this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}removeUniqueValueInfo(e){if(this.styleOrigin)return void Vn().error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");const t=this.uniqueValueInfos;if(t)for(let r=0;r<t.length;r++){const i=t[r];if(String(i.value)===String(e)){delete this._valueInfoMap[Pl(e)],t.splice(r,1);break}}this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}async getUniqueValueInfo(e,t){let r=t;return this.valueExpression&&(t==null?void 0:t.arcade)==null&&(r={...r,arcade:await In()}),this._getUniqueValueInfo(e,r)}getSymbol(e,t){if(this.valueExpression&&(t==null?void 0:t.arcade)==null)return void Vn().error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const r=this._getUniqueValueInfo(e,t);return(r==null?void 0:r.symbol)||this.defaultSymbol}async getSymbolAsync(e,t){let r=t;if(this.valueExpression&&(r==null?void 0:r.arcade)==null){const s=await In(),{arcadeUtils:n}=s;n.hasGeometryOperations(this.valueExpression)&&await n.enableGeometryOperations(),r={...r,arcade:s}}const i=this._getUniqueValueInfo(e,r);return(i==null?void 0:i.symbol)||this.defaultSymbol}getSymbols(){const e=[];for(const t of this.uniqueValueInfos??[])t.symbol&&e.push(t.symbol);return this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){var e;return((e=this.visualVariables)==null?void 0:e.reduce((t,r)=>t+r.getAttributeHash(),""))??""}getMeshHash(){var i;const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),r=(i=this.uniqueValueInfos)==null?void 0:i.reduce((s,n)=>s+n.getMeshHash(),"");return`${e}.${t}.${r}.${`${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}`}.${this.valueExpression}`}clone(){const e=new Vd({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:M(this.defaultSymbol),orderByClassesEnabled:this.orderByClassesEnabled,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:M(this.visualVariables),legendOptions:M(this.legendOptions),authoringInfo:M(this.authoringInfo),backgroundFillSymbol:M(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(e._isDefaultSymbolDerived=!0),e._set("portal",this.portal);const t=M(this.uniqueValueInfos),r=M(this.uniqueValueGroups);return this.styleOrigin&&(e._set("styleOrigin",Object.freeze(M(this.styleOrigin))),Object.freeze(t),Object.freeze(r)),e._set("uniqueValueInfos",t),e._updateValueInfoMap(),e._set("uniqueValueGroups",r),e._isInfosSource=this._isInfosSource,e._watchUniqueValueInfosAndGroups(),e}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}async collectRequiredFields(e,t){const r=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(r)}async collectSymbolFields(e,t){const r=[...this.getSymbols().map(i=>i.collectRequiredFields(e,t)),us(e,t,this.valueExpression)];ri(e,t,this.field),ri(e,t,this.field2),ri(e,t,this.field3),await Promise.all(r)}populateFromStyle(){return tH(this.styleOrigin,{portal:this.portal}).then(e=>{var r;const t=[];return this._valueInfoMap={},e!=null&&e.data&&Array.isArray(e.data.items)&&e.data.items.forEach(i=>{const s=new Tl({styleUrl:e.styleUrl,styleName:e.styleName,portal:this.portal,name:i.name});this.defaultSymbol||i.name!==e.data.defaultItem||(this.defaultSymbol=s,this._isDefaultSymbolDerived=!0);const n=new bp({value:i.name,symbol:s});t.push(n),this._valueInfoMap[Pl(i.name)]=n}),this._set("uniqueValueInfos",Object.freeze(t)),this._updateGroupsFromInfos(!0),this._isInfosSource=null,this._watchUniqueValueInfos(),!this.defaultSymbol&&((r=this.uniqueValueInfos)!=null&&r.length)&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this})}_updateFieldDelimiter(){this.field&&this.field2&&!this.fieldDelimiter&&this._set("fieldDelimiter",iH)}_updateUniqueValues(){this._isInfosSource!=null&&(this._isInfosSource?this._updateGroupsFromInfos():this._updateInfosFromGroups())}_updateValueInfoMap(){this._valueInfoMap={};const{uniqueValueInfos:e}=this;if(e)for(const t of e)this._valueInfoMap[Pl(t.value)]=t}_watchUniqueValueInfosAndGroups(){this._watchUniqueValueInfos(),this._watchUniqueValueGroups()}_watchUniqueValueInfos(){this.removeHandles(SM);const{uniqueValueInfos:e}=this;if(e){const t=[];for(const r of e)t.push(W(()=>({symbol:r.symbol,value:r.value,label:r.label,description:r.description}),(i,s)=>{i!==s&&(this._updateGroupsFromInfos(),this._isInfosSource=!0)},{sync:!0}));this.addHandles(t,SM)}}_watchUniqueValueGroups(){this.removeHandles(xM);const{uniqueValueGroups:e}=this;if(e){const t=[];for(const r of e){t.push(W(()=>({classes:r.classes}),(i,s)=>{i!==s&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}));for(const i of r.classes??[])t.push(W(()=>({symbol:i.symbol,values:i.values,label:i.label,description:i.description}),(s,n)=>{s!==n&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}))}this.addHandles(t,xM)}}_updateInfosFromGroups(){if(!this.uniqueValueGroups)return this._set("uniqueValueInfos",null),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const e=[],{field:t,field2:r,field3:i,fieldDelimiter:s,uniqueValueGroups:n,valueExpression:o}=this;if(!t&&!o)return this._set("uniqueValueInfos",e),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const l=!(!t||!r);for(const c of n)for(const p of c.classes??[]){const{symbol:h,label:f,values:y,description:m}=p;for(const g of y??[]){const{value:b,value2:w,value3:S}=g,x=[b];r&&x.push(w),i&&x.push(S);const E=l?x.join(s||""):x[0]??void 0;e.push(new bp({symbol:h,label:f,value:E,description:m}))}}this._set("uniqueValueInfos",e),this._updateValueInfoMap(),this._watchUniqueValueInfos()}_updateGroupsFromInfos(e=!1){if(!this.uniqueValueInfos)return this._set("uniqueValueGroups",null),void this._watchUniqueValueGroups();const{field:t,field2:r,valueExpression:i,fieldDelimiter:s,uniqueValueInfos:n}=this;if(!t&&!i||!n.length)return this._set("uniqueValueGroups",[]),void this._watchUniqueValueGroups();const o=!(!t||!r),l=n.map(p=>{var S;const{symbol:h,label:f,value:y,description:m}=p,[g,b,w]=o?((S=y==null?void 0:y.toString())==null?void 0:S.split(s||""))||[]:[y];return new ML({symbol:h,label:f,description:m,values:[new Gu({value:g,value2:b,value3:w})]})}),c=[new Sw({classes:l})];e&&Object.freeze(c),this._set("uniqueValueGroups",c),this._watchUniqueValueGroups()}_getUniqueValueInfo(e,t){return this.valueExpression?this._getUnqiueValueInfoForExpression(e,t):this._getUnqiueValueInfoForFields(e)}_getUnqiueValueInfoForExpression(e,t){const{viewingMode:r,scale:i,spatialReference:s,arcade:n,timeZone:o}=t??{};let l=this._cache.compiledFunc;const c=n.arcadeUtils;if(!l){const h=c.createSyntaxTree(this.valueExpression);l=c.createFunction(h),this._cache.compiledFunc=l}const p=c.executeFunction(l,c.createExecContext(e,c.getViewInfo({viewingMode:r,scale:i,spatialReference:s}),o));return this._valueInfoMap[Pl(p)]}_getUnqiueValueInfoForFields(e){const t=this.field,r=e.attributes;let i;if(this.field2){const s=this.field2,n=this.field3,o=[];t&&o.push(r[t]),s&&o.push(r[s]),n&&o.push(r[n]),i=o.join(this.fieldDelimiter||"")}else t&&(i=r[t]);return this._valueInfoMap[Pl(i)]}static fromPortalStyle(e,t){const r=new Vd(t==null?void 0:t.properties);r._set("styleOrigin",Object.freeze({styleName:e})),r._set("portal",(t==null?void 0:t.portal)||Vr.getDefault());const i=r.populateFromStyle();return i.catch(s=>{Vn().error(`#fromPortalStyle('${e}'[, ...])`,"Failed to create unique value renderer from style name",s)}),i}static fromStyleUrl(e,t){const r=new Vd(t==null?void 0:t.properties);r._set("styleOrigin",Object.freeze({styleUrl:e}));const i=r.populateFromStyle();return i.catch(s=>{Vn().error(`#fromStyleUrl('${e}'[, ...])`,"Failed to create unique value renderer from style URL",s)}),i}};a([u({readOnly:!0})],We.prototype,"_cache",null),a([re({uniqueValue:"unique-value"})],We.prototype,"type",void 0),a([u(PS)],We.prototype,"backgroundFillSymbol",void 0),a([u({value:null,json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],We.prototype,"field",null),a([Ce("field")],We.prototype,"castField",null),a([B("field")],We.prototype,"writeField",null),a([u({type:String,value:null,json:{write:!0}})],We.prototype,"field2",null),a([u({type:String,value:null,json:{write:!0}})],We.prototype,"field3",null),a([u({type:Boolean,json:{name:"drawInClassOrder",default:!1,write:!0,origins:{"web-scene":{write:!1}}}})],We.prototype,"orderByClassesEnabled",void 0),a([u({type:String,value:null,json:{write:!0}})],We.prototype,"valueExpression",null),a([u({type:String,json:{write:!0}})],We.prototype,"valueExpressionTitle",void 0),a([u({type:LS,json:{write:!0}})],We.prototype,"legendOptions",void 0),a([u({type:String,json:{write:!0}})],We.prototype,"defaultLabel",void 0),a([u(c$({...Ug},{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],We.prototype,"defaultSymbol",null),a([u({type:String,value:null,json:{write:!0}})],We.prototype,"fieldDelimiter",null),a([u({type:Vr,readOnly:!0})],We.prototype,"portal",void 0),a([D("portal",["styleName"])],We.prototype,"readPortal",null),a([u({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],We.prototype,"styleOrigin",void 0),a([D("styleOrigin",["styleName","styleUrl"])],We.prototype,"readStyleOrigin",null),a([B("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],We.prototype,"writeStyleOrigin",null),a([u({type:[Sw],json:{read:{source:["uniqueValueGroups","uniqueValueInfos"],reader:(e,t,r)=>(t.uniqueValueGroups||nH(t)).map(i=>Sw.fromJSON(i,r))},write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],We.prototype,"uniqueValueGroups",null),a([u({type:[bp],json:{read:!1,write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],We.prototype,"uniqueValueInfos",null),We=Vd=a([_(EL)],We);const qS=We,zg={key:"type",base:An,typeMap:{heatmap:IL,simple:Wo,"unique-value":qS,"class-breaks":GP,"dot-density":qW,dictionary:UW,"pie-chart":HW},errorContext:"renderer"},oH={key:"type",base:An,typeMap:{simple:Wo,"unique-value":qS,"class-breaks":GP,heatmap:IL},errorContext:"renderer",validate:aH};function aH(e){switch(e.type){case"simple":return lH(e);case"unique-value":return uH(e);case"class-breaks":return cH(e);case"heatmap":return e}}function lH(e){if(e.symbol)return e;G.getLogger("esri.renderers.support.types").error("Removed invalid 'simple' renderer without a symbol from web scene.")}function uH(e){const t=e.uniqueValueInfos,r=t==null?void 0:t.filter(({symbol:i,label:s},n)=>(i||G.getLogger("esri.renderers.support.types").error(`Removed invalid unique value info ([${n}] ${s}) without a symbol from web scene.`),!!i));return(r==null?void 0:r.length)!==(t==null?void 0:t.length)&&(e.uniqueValueInfos=r),e}function cH(e){const t=e.classBreakInfos,r=t==null?void 0:t.filter(({symbol:i,label:s},n)=>(i||G.getLogger("esri.renderers.support.types").error(`Removed invalid class break info ([${n}] ${s}) without a symbol from web scene.`),!!i));return(r==null?void 0:r.length)!==(t==null?void 0:t.length)&&(e.classBreakInfos=r),e}function Oce(e,t){return Wp(e,null,t)}const dH=_c({types:zg});function Wp(e,t,r){return e?e&&(e.styleName||e.styleUrl)&&e.type!=="uniqueValue"?(r!=null&&r.messages&&r.messages.push(new os("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+e.type+"'",{definition:e,context:r})),null):dH(e,t,r):null}let pH=class AL{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(Vv),this._values=new Map,this.multipleOriginsSupported=!0}clone(t){const r=new AL,i=this._originStores[me.DEFAULTS];i&&i.forEach((s,n)=>{r.set(n,M(s),me.DEFAULTS)});for(let s=me.SERVICE;s<Vv;s++){const n=this._originStores[s];n&&n.forEach((o,l)=>{t&&t.has(l)||r.set(l,M(o),s)})}return r}get(t,r){const i=r===void 0?this._values:this._originStores[r];return i?i.get(t):void 0}keys(t){const r=t==null?this._values:this._originStores[t];return r?[...r.keys()]:[]}set(t,r,i=me.USER){let s=this._originStores[i];if(s||(s=new Map,this._originStores[i]=s),s.set(t,r),!this._values.has(t)||this._propertyOriginMap.get(t)<=i){const n=this._values.get(t);return this._values.set(t,r),this._propertyOriginMap.set(t,i),n!==r}return!1}delete(t,r=me.USER){const i=this._originStores[r];if(!i)return;const s=i.get(t);if(i.delete(t),this._values.has(t)&&this._propertyOriginMap.get(t)===r){this._values.delete(t);for(let n=r-1;n>=0;n--){const o=this._originStores[n];if(o&&o.has(t)){this._values.set(t,o.get(t)),this._propertyOriginMap.set(t,n);break}}}return s}has(t,r){const i=r===void 0?this._values:this._originStores[r];return!!i&&i.has(t)}revert(t,r){for(;r>0&&!this.has(t,r);)--r;const i=this._originStores[r],s=i==null?void 0:i.get(t),n=this._values.get(t);return this._values.set(t,s),this._propertyOriginMap.set(t,r),n!==s}originOf(t){return this._propertyOriginMap.get(t)||me.DEFAULTS}forEach(t){this._values.forEach(t)}};const CL=e=>{let t=class extends e{constructor(...r){super(...r);const i=jr(this),s=i.store,n=new pH;i.store=n,DC(i,s,n)}read(r,i){UC(this,r,i)}getAtOrigin(r,i){const s=B0(this),n=wo(i);if(typeof r=="string")return s.get(r,n);const o={};return r.forEach(l=>{o[l]=s.get(l,n)}),o}originOf(r){return Ky(this.originIdOf(r))}originIdOf(r){return B0(this).originOf(r)}revert(r,i){const s=B0(this),n=wo(i),o=jr(this);let l;l=typeof r=="string"?r==="*"?s.keys(n):[r]:r,l.forEach(c=>{o.invalidate(c),s.revert(c,n),o.commit(c)})}};return t=a([_("esri.core.ReadOnlyMultiOriginJSONSupport")],t),t};function B0(e){return jr(e).store}let IM=class extends CL($e){};IM=a([_("esri.core.ReadOnlyMultiOriginJSONSupport")],IM);const hH=e=>{let t=class extends e{constructor(...r){super(...r)}clear(r,i="user"){return W0(this).delete(r,wo(i))}write(r,i){return qC(this,r=r||{},i),r}setAtOrigin(r,i,s){jr(this).setAtOrigin(r,i,wo(s))}removeOrigin(r){const i=W0(this),s=wo(r),n=i.keys(s);for(const o of n)i.originOf(o)===s&&i.set(o,i.get(o,s),me.USER)}updateOrigin(r,i){const s=W0(this),n=wo(i),o=Po(this,r);for(let l=n+1;l<Vv;++l)s.delete(r,l);s.set(r,o,n)}toJSON(r){return this.write({},r)}};return t=a([_("esri.core.MultiOriginJSONSupport.WriteableMultiOriginJSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function W0(e){return jr(e).store}const OL=e=>{let t=class extends hH(CL(e)){constructor(...r){super(...r)}};return t=a([_("esri.core.MultiOriginJSONSupport")],t),t};let TM=class extends OL($e){};TM=a([_("esri.core.MultiOriginJSONSupport")],TM);const Ut=(e=>e)(["operational-layers","basemap","ground"]);var Iw;let Ia=Iw=class extends R{constructor(e){super(e),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new Iw({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};a([u({type:String,json:{write:!0}})],Ia.prototype,"expression",void 0),a([u({type:String,json:{write:!0}})],Ia.prototype,"name",void 0),a([u({type:["boolean","date","number","string"],json:{write:!0}})],Ia.prototype,"returnType",void 0),a([u({type:String,json:{write:!0}})],Ia.prototype,"title",void 0),Ia=Iw=a([_("esri.form.ExpressionInfo")],Ia);const fH=Ia;let Ta=class extends R{constructor(t){super(t),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};a([u({type:String,json:{write:!0}})],Ta.prototype,"description",void 0),a([u({type:String,json:{write:!0}})],Ta.prototype,"label",void 0),a([u()],Ta.prototype,"type",void 0),a([u({type:String,json:{write:!0}})],Ta.prototype,"visibilityExpression",void 0),Ta=a([_("esri.form.elements.Element")],Ta);const pl=Ta;let My=class extends Oe(R){constructor(t){super(t),this.type=null}};a([u()],My.prototype,"type",void 0),My=a([_("esri.form.elements.inputs.attachments.Input")],My);const Do=My,qg=["any","capture","upload"];let eu=class extends Do{constructor(t){super(t),this.type="audio",this.inputMethod="any",this.maxDuration=null}};a([u({type:["audio"],readOnly:!0,json:{write:!0}})],eu.prototype,"type",void 0),a([u({type:qg,json:{write:!0}})],eu.prototype,"inputMethod",void 0),a([u({type:Number,json:{write:!0}})],eu.prototype,"maxDuration",void 0),eu=a([_("esri.form.elements.inputs.attachments.AudioInput")],eu);const MM=eu;let Ud=class extends Do{constructor(t){super(t),this.type="document",this.maxFileSize=null}};a([u({type:["document"],readOnly:!0,json:{write:!0}})],Ud.prototype,"type",void 0),a([u({type:Number,json:{write:!0}})],Ud.prototype,"maxFileSize",void 0),Ud=a([_("esri.form.elements.inputs.attachments.DocumentInput")],Ud);const EM=Ud;let tu=class extends Do{constructor(t){super(t),this.type="image",this.inputMethod="any",this.maxImageSize=null}};a([u({type:["image"],readOnly:!0,json:{write:!0}})],tu.prototype,"type",void 0),a([u({type:qg,json:{write:!0}})],tu.prototype,"inputMethod",void 0),a([u({type:Number,json:{write:!0}})],tu.prototype,"maxImageSize",void 0),tu=a([_("esri.form.elements.inputs.attachments.ImageInput")],tu);const AM=tu;let zd=class extends Do{constructor(t){super(t),this.type="signature",this.inputMethod="any"}};a([u({type:["signature"],readOnly:!0,json:{write:!0}})],zd.prototype,"type",void 0),a([u({type:qg,json:{write:!0}})],zd.prototype,"inputMethod",void 0),zd=a([_("esri.form.elements.inputs.attachments.SignatureInput")],zd);const CM=zd;let ru=class extends Do{constructor(t){super(t),this.type="video",this.inputMethod="any",this.maxDuration=null}};a([u({type:["video"],readOnly:!0,json:{write:!0}})],ru.prototype,"type",void 0),a([u({type:qg,json:{write:!0}})],ru.prototype,"inputMethod",void 0),a([u({type:Number,json:{write:!0}})],ru.prototype,"maxDuration",void 0),ru=a([_("esri.form.elements.inputs.attachments.VideoInput")],ru);const OM=ru;function FL(e){return{nestableTypes:{base:Do,key:"type",typeMap:{audio:MM,document:EM,image:AM,signature:CM,video:OM}},allTypes:{base:Do,key:"type",typeMap:{attachment:e,audio:MM,document:EM,image:AM,signature:CM,video:OM}}}}function yH(e,t,r){return e?e.map(i=>Ti(t.nestableTypes,i)):null}function mH(e,t,r){if(!e)return null;const i=t.nestableTypes.typeMap;return e.filter(s=>i[s.type]).map(s=>i[s.type].fromJSON(s))}function gH(e,t,r){if(!e)return null;const i=t.nestableTypes.typeMap;return e.filter(s=>i[s.type]).map(s=>s.toJSON())}let Ms=class extends Do{constructor(t){super(t),this.type="attachment",this.attachmentAssociationType="exact",this.inputTypes=null}castInputs(t){return yH(t,H0)}readInputs(t,r){return mH(r.inputTypes,H0)}writeInputs(t,r){r.inputTypes=gH(t,H0)}};a([u({type:["attachment"],readOnly:!0,json:{write:!0}})],Ms.prototype,"type",void 0),a([u({type:["any","exact","exactOrNone"],json:{write:!0}})],Ms.prototype,"attachmentAssociationType",void 0),a([u({json:{write:{isRequired:!0}}})],Ms.prototype,"inputTypes",void 0),a([Ce("inputTypes")],Ms.prototype,"castInputs",null),a([D("inputTypes")],Ms.prototype,"readInputs",null),a([B("inputTypes")],Ms.prototype,"writeInputs",null),Ms=a([_("esri.form.elements.inputs.attachments.AttachmentInput")],Ms);const H0=FL(Ms),vH=Ms;var Tw;const bH=FL(vH);let Br=Tw=class extends pl{constructor(e){super(e),this.allowUserRename=!0,this.attachmentKeyword=null,this.displayFilename=!1,this.editableExpression=null,this.filenameExpression="{attachmentKeyword}_{now}",this.input=null,this.maxAttachmentCount=null,this.minAttachmentCount=null,this.type="attachment",this.useOriginalFilename=!0}clone(){var e;return new Tw({allowUserRename:this.allowUserRename,attachmentKeyword:this.attachmentKeyword,description:this.description,displayFilename:this.displayFilename,editableExpression:this.editableExpression,filenameExpression:this.filenameExpression,input:(e=this.input)==null?void 0:e.clone(),label:this.label,maxAttachmentCount:this.maxAttachmentCount,minAttachmentCount:this.minAttachmentCount,useOriginalFilename:this.useOriginalFilename,visibilityExpression:this.visibilityExpression})}};a([u({type:Boolean,json:{write:!0}})],Br.prototype,"allowUserRename",void 0),a([u({type:String,json:{write:{isRequired:!0}}})],Br.prototype,"attachmentKeyword",void 0),a([u({type:Boolean,json:{write:!0}})],Br.prototype,"displayFilename",void 0),a([u({type:String,json:{write:!0}})],Br.prototype,"editableExpression",void 0),a([u({type:String,json:{write:!0}})],Br.prototype,"filenameExpression",void 0),a([u({types:bH.allTypes,json:{read:{source:"inputType"},write:{target:"inputType",isRequired:!0}}})],Br.prototype,"input",void 0),a([u({type:Number,json:{write:!0}})],Br.prototype,"maxAttachmentCount",void 0),a([u({type:Number,json:{write:!0}})],Br.prototype,"minAttachmentCount",void 0),a([u({type:["attachment"],readOnly:!0,json:{read:!1,write:!0}})],Br.prototype,"type",void 0),a([u({type:Boolean,json:{write:!0}})],Br.prototype,"useOriginalFilename",void 0),Br=Tw=a([_("esri.form.elements.AttachmentElement")],Br);const FM=Br;let Ey=class extends R{constructor(t){super(t),this.type=null}};a([u()],Ey.prototype,"type",void 0),Ey=a([_("esri.form.elements.inputs.Input")],Ey);const Cn=Ey;let qd=class extends Cn{constructor(t){super(t),this.maxLength=null,this.minLength=0}};a([u({type:Number,json:{write:!0}})],qd.prototype,"maxLength",void 0),a([u({type:Number,json:{write:!0}})],qd.prototype,"minLength",void 0),qd=a([_("esri.form.elements.inputs.TextInput")],qd);const GS=qd;var Mw;let Ay=Mw=class extends GS{constructor(e){super(e),this.type="barcode-scanner"}clone(){return new Mw({maxLength:this.maxLength,minLength:this.minLength})}};a([u({type:["barcode-scanner"],json:{read:!1,write:!0}})],Ay.prototype,"type",void 0),Ay=Mw=a([_("esri.form.elements.inputs.BarcodeScannerInput")],Ay);const wH=Ay;var Ew;let iu=Ew=class extends Cn{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="combo-box"}clone(){return new Ew({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};a([u({type:String,json:{write:!0}})],iu.prototype,"noValueOptionLabel",void 0),a([u({type:Boolean,json:{write:!0}})],iu.prototype,"showNoValueOption",void 0),a([u({type:["combo-box"],json:{read:!1,write:!0}})],iu.prototype,"type",void 0),iu=Ew=a([_("esri.form.elements.inputs.ComboBoxInput")],iu);const _H=iu;var Aw;function kM(e){return e??null}function PM(e){return e??null}let _s=Aw=class extends Cn{constructor(e){super(e),this.max=null,this.min=null,this.type="date-picker"}readMax(e,t){return kM(t.max)}writeMax(e,t){t.max=PM(e)}readMin(e,t){return kM(t.min)}writeMin(e,t){t.min=PM(e)}clone(){return new Aw({max:this.max,min:this.min})}};a([u({type:String,json:{type:String,write:!0}})],_s.prototype,"max",void 0),a([D("max")],_s.prototype,"readMax",null),a([B("max")],_s.prototype,"writeMax",null),a([u({type:String,json:{type:String,write:!0}})],_s.prototype,"min",void 0),a([D("min")],_s.prototype,"readMin",null),a([B("min")],_s.prototype,"writeMin",null),a([u({type:["date-picker"],json:{read:!1,write:!0}})],_s.prototype,"type",void 0),_s=Aw=a([_("esri.form.elements.inputs.DatePickerInput")],_s);const $H=_s;var Cw;function J0(e){return e??null}function Z0(e){return e??null}let Mr=Cw=class extends Cn{constructor(e){super(e),this.includeTimeOffset=!0,this.max=null,this.min=null,this.timeResolution="minutes",this.type="datetimeoffset-picker"}readMax(e,t){return J0(t.max)}writeMax(e,t){t.max=Z0(e)}readMin(e,t){return J0(t.min)}writeMin(e,t){t.min=Z0(e)}readTimeResolution(e,t){return J0(t.timeResolution)}writeTimeResolution(e,t){t.timeResolution=Z0(e)}clone(){return new Cw({includeTimeOffset:this.includeTimeOffset,max:this.max,min:this.min,timeResolution:this.timeResolution})}};a([u({type:Boolean,json:{write:!0}})],Mr.prototype,"includeTimeOffset",void 0),a([u({type:String,json:{type:String,write:!0}})],Mr.prototype,"max",void 0),a([D("max")],Mr.prototype,"readMax",null),a([B("max")],Mr.prototype,"writeMax",null),a([u({type:String,json:{type:String,write:!0}})],Mr.prototype,"min",void 0),a([D("min")],Mr.prototype,"readMin",null),a([B("min")],Mr.prototype,"writeMin",null),a([u({type:String,json:{type:String,write:!0}})],Mr.prototype,"timeResolution",void 0),a([D("timeResolution")],Mr.prototype,"readTimeResolution",null),a([B("timeResolution")],Mr.prototype,"writeTimeResolution",null),a([u({type:["datetimeoffset-picker"],json:{read:!1,write:!0}})],Mr.prototype,"type",void 0),Mr=Cw=a([_("esri.form.elements.inputs.DateTimeOffsetPickerInput")],Mr);const SH=Mr;var Ow;function LM(e){return e!=null?new Date(e):null}function NM(e){return e?e.getTime():null}let Ui=Ow=class extends Cn{constructor(e){super(e),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(e,t){return LM(t.max)}writeMax(e,t){t.max=NM(e)}readMin(e,t){return LM(t.min)}writeMin(e,t){t.min=NM(e)}clone(){return new Ow({includeTime:this.includeTime,max:this.max,min:this.min})}};a([u({type:Boolean,json:{write:!0}})],Ui.prototype,"includeTime",void 0),a([u({type:Date,json:{type:Number,write:!0}})],Ui.prototype,"max",void 0),a([D("max")],Ui.prototype,"readMax",null),a([B("max")],Ui.prototype,"writeMax",null),a([u({type:Date,json:{type:Number,write:!0}})],Ui.prototype,"min",void 0),a([D("min")],Ui.prototype,"readMin",null),a([B("min")],Ui.prototype,"writeMin",null),a([u({type:["datetime-picker"],json:{read:!1,write:!0}})],Ui.prototype,"type",void 0),Ui=Ow=a([_("esri.form.elements.inputs.DateTimePickerInput")],Ui);const xH=Ui;var Fw;let su=Fw=class extends Cn{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="radio-buttons"}clone(){return new Fw({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};a([u({type:String,json:{write:!0}})],su.prototype,"noValueOptionLabel",void 0),a([u({type:Boolean,json:{write:!0}})],su.prototype,"showNoValueOption",void 0),a([u({type:["radio-buttons"],json:{read:!1,write:!0}})],su.prototype,"type",void 0),su=Fw=a([_("esri.form.elements.inputs.RadioButtonsInput")],su);const IH=su;var kw;let nu=kw=class extends Cn{constructor(e){super(e),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new kw({offValue:this.offValue,onValue:this.onValue})}};a([u({type:[String,Number],json:{write:!0}})],nu.prototype,"offValue",void 0),a([u({type:[String,Number],json:{write:!0}})],nu.prototype,"onValue",void 0),a([u({type:["switch"],json:{read:!1,write:!0}})],nu.prototype,"type",void 0),nu=kw=a([_("esri.form.elements.inputs.SwitchInput")],nu);const TH=nu;var Pw;let Cy=Pw=class extends GS{constructor(e){super(e),this.type="text-area"}clone(){return new Pw({maxLength:this.maxLength,minLength:this.minLength})}};a([u({type:["text-area"],json:{read:!1,write:!0}})],Cy.prototype,"type",void 0),Cy=Pw=a([_("esri.form.elements.inputs.TextAreaInput")],Cy);const MH=Cy;var Lw;let Oy=Lw=class extends GS{constructor(e){super(e),this.type="text-box"}clone(){return new Lw({maxLength:this.maxLength,minLength:this.minLength})}};a([u({type:["text-box"],json:{read:!1,write:!0}})],Oy.prototype,"type",void 0),Oy=Lw=a([_("esri.form.elements.inputs.TextBoxInput")],Oy);const EH=Oy;var Nw;function Y0(e){return e??null}function Q0(e){return e??null}let Wr=Nw=class extends Cn{constructor(e){super(e),this.max=null,this.min=null,this.timeResolution="minutes",this.type="time-picker"}readMax(e,t){return Y0(t.max)}writeMax(e,t){t.max=Q0(e)}readMin(e,t){return Y0(t.min)}writeMin(e,t){t.min=Q0(e)}readTimeResolution(e,t){return Y0(t.timeResolution)}writeTimeResolution(e,t){t.timeResolution=Q0(e)}clone(){return new Nw({max:this.max,min:this.min,timeResolution:this.timeResolution})}};a([u({type:String,json:{type:String,write:!0}})],Wr.prototype,"max",void 0),a([D("max")],Wr.prototype,"readMax",null),a([B("max")],Wr.prototype,"writeMax",null),a([u({type:String,json:{type:String,write:!0}})],Wr.prototype,"min",void 0),a([D("min")],Wr.prototype,"readMin",null),a([B("min")],Wr.prototype,"writeMin",null),a([u({type:String,json:{type:String,write:!0}})],Wr.prototype,"timeResolution",void 0),a([D("timeResolution")],Wr.prototype,"readTimeResolution",null),a([B("timeResolution")],Wr.prototype,"writeTimeResolution",null),a([u({type:["time-picker"],json:{read:!1,write:!0}})],Wr.prototype,"type",void 0),Wr=Nw=a([_("esri.form.elements.inputs.TimePickerInput")],Wr);const AH=Wr,CH={base:Cn,key:"type",typeMap:{"barcode-scanner":wH,"combo-box":_H,"date-picker":$H,"datetime-picker":xH,"datetimeoffset-picker":SH,"radio-buttons":IH,switch:TH,"text-area":MH,"text-box":EH,"time-picker":AH}};var Rw;let qa=Rw=class extends R{constructor(e){super(e),this.name=null,this.code=null}clone(){return new Rw({name:this.name,code:this.code})}};a([u({type:String,json:{write:!0}})],qa.prototype,"name",void 0),a([u({type:[String,Number],json:{write:!0}})],qa.prototype,"code",void 0),qa=Rw=a([_("esri.layers.support.CodedValue")],qa);const OH=new ve({inherited:"inherited",codedValue:"coded-value",range:"range"});let Gd=class extends R{constructor(t){super(t),this.name=null,this.type=null}};a([u({type:String,json:{write:!0}})],Gd.prototype,"name",void 0),a([re(OH)],Gd.prototype,"type",void 0),Gd=a([_("esri.layers.support.Domain")],Gd);const Gg=Gd;var jw;let Bd=jw=class extends Gg{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let t=null;if(this.codedValues){const r=String(e);this.codedValues.some(i=>(String(i.code)===r&&(t=i.name),!!t))}return t}clone(){return new jw({codedValues:M(this.codedValues),name:this.name})}};a([u({type:[qa],json:{write:!0}})],Bd.prototype,"codedValues",void 0),a([re({codedValue:"coded-value"})],Bd.prototype,"type",void 0),Bd=jw=a([_("esri.layers.support.CodedValueDomain")],Bd);const Bg=Bd;var Dw;let Fy=Dw=class extends Gg{constructor(e){super(e),this.type="inherited"}clone(){return new Dw}};a([re({inherited:"inherited"})],Fy.prototype,"type",void 0),Fy=Dw=a([_("esri.layers.support.InheritedDomain")],Fy);const kL=Fy;var Vw;let ou=Vw=class extends Gg{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new Vw({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};a([u({json:{type:[Number],read:{source:"range",reader:(e,t)=>{var r;return(r=t.range)==null?void 0:r[1]}},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:"range",writer(e,t,r){t[r]=[this.minValue||0,e]}}}})],ou.prototype,"maxValue",void 0),a([u({json:{type:[Number],read:{source:"range",reader:(e,t)=>{var r;return(r=t.range)==null?void 0:r[0]}},write:{target:"range",writer(e,t,r){t[r]=[e,this.maxValue||0]}}}})],ou.prototype,"minValue",void 0),a([re({range:"range"})],ou.prototype,"type",void 0),ou=Vw=a([_("esri.layers.support.RangeDomain")],ou);const PL=ou,LL={key:"type",base:Gg,typeMap:{range:PL,"coded-value":Bg,inherited:kL}};function Wg(e){if(!(e!=null&&e.type))return null;switch(e.type){case"range":return PL.fromJSON(e);case"codedValue":return Bg.fromJSON(e);case"inherited":return kL.fromJSON(e)}return null}var Uw;let yi=Uw=class extends pl{constructor(e){super(e),this.domain=null,this.editable=null,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field",this.valueExpression=null}clone(){return new Uw({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};a([u({types:LL,json:{read:{reader:Wg},write:!0}})],yi.prototype,"domain",void 0),a([u({type:Boolean,json:{write:!0}})],yi.prototype,"editable",void 0),a([u({type:String,json:{write:!0}})],yi.prototype,"editableExpression",void 0),a([u({type:String,json:{write:!0}})],yi.prototype,"fieldName",void 0),a([u({type:String,json:{write:!0}})],yi.prototype,"hint",void 0),a([u({types:CH,json:{read:{source:"inputType"},write:{target:"inputType"}}})],yi.prototype,"input",void 0),a([u({type:String,json:{write:!0}})],yi.prototype,"requiredExpression",void 0),a([u({type:String,json:{read:!1,write:!0}})],yi.prototype,"type",void 0),a([u({type:String,json:{write:!0}})],yi.prototype,"valueExpression",void 0),yi=Uw=a([_("esri.form.elements.FieldElement")],yi);const RM=yi;var zw;let Ks=zw=class extends pl{constructor(e){super(e),this.displayCount=null,this.displayType="list",this.editableExpression=null,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new zw({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editableExpression:this.editableExpression,label:this.label,orderByFields:M(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};a([u({type:Number,json:{write:!0}})],Ks.prototype,"displayCount",void 0),a([u({type:["list"],json:{write:!0}})],Ks.prototype,"displayType",void 0),a([u({type:String,json:{write:!0}})],Ks.prototype,"editableExpression",void 0),a([u({type:[eS],json:{write:!0}})],Ks.prototype,"orderByFields",void 0),a([u({type:Number,json:{write:!0}})],Ks.prototype,"relationshipId",void 0),a([u({type:["relationship"],json:{read:!1,write:!0}})],Ks.prototype,"type",void 0),Ks=zw=a([_("esri.form.elements.RelationshipElement")],Ks);const jM=Ks;var qw;let au=qw=class extends pl{constructor(e){super(e),this.text=null,this.textFormat="plain-text",this.type="text"}clone(){return new qw({text:this.text,textFormat:this.textFormat,visibilityExpression:this.visibilityExpression})}};a([u({type:String,json:{write:!0}})],au.prototype,"text",void 0),a([u({type:String,json:{write:!0}})],au.prototype,"textFormat",void 0),a([u({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],au.prototype,"type",void 0),au=qw=a([_("esri.form.elements.TextElement")],au);const DM=au;function NL(e){return{typesWithGroup:{base:pl,key:"type",typeMap:{attachment:FM,field:RM,group:e,relationship:jM,text:DM}},typesWithoutGroup:{base:pl,key:"type",typeMap:{attachment:FM,field:RM,relationship:jM,text:DM}}}}function RL(e,t,r=!0){if(!e)return null;const i=r?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(s=>i[s.type]).map(s=>i[s.type].fromJSON(s))}function jL(e,t,r=!0){if(!e)return null;const i=r?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(s=>i[s.type]).map(s=>s.toJSON())}function DL(e,t,r=!0){return e?e.map(i=>Ti(r?t.typesWithGroup:t.typesWithoutGroup,i)):null}var Gw;let Es=Gw=class extends pl{constructor(e){super(e),this.elements=null,this.initialState="expanded",this.type="group"}castElements(e){return DL(e,K0,!1)}readElements(e,t){return RL(t.formElements,K0,!1)}writeElements(e,t){t.formElements=jL(e,K0,!1)}clone(){return new Gw({description:this.description,elements:M(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};a([u({json:{write:!0}})],Es.prototype,"elements",void 0),a([Ce("elements")],Es.prototype,"castElements",null),a([D("elements",["formElements"])],Es.prototype,"readElements",null),a([B("elements")],Es.prototype,"writeElements",null),a([u({type:["collapsed","expanded"],json:{write:!0}})],Es.prototype,"initialState",void 0),a([u({type:String,json:{read:!1,write:!0}})],Es.prototype,"type",void 0),Es=Gw=a([_("esri.form.elements.GroupElement")],Es);const K0=NL(Es),FH=Es,kH=e=>e.type==="field",PH=e=>e.type==="group",LH=e=>e.type==="text";var Bw;const X0=NL(FH);let zi=Bw=class extends R{constructor(e){super(e),this.description=null,this.elements=null,this.expressionInfos=null,this.preserveFieldValuesWhenHidden=!1,this.title=null}castElements(e){return DL(e,X0)}readElements(e,t){return RL(t.formElements,X0)}writeElements(e,t){t.formElements=jL(e,X0)}clone(){return new Bw({description:this.description,expressionInfos:M(this.expressionInfos),elements:M(this.elements),title:this.title,preserveFieldValuesWhenHidden:this.preserveFieldValuesWhenHidden})}async getFieldsUsed(e,t){const r=new Set,{description:i,elements:s,expressionInfos:n,title:o}=this;if(wp(r,e,i),wp(r,e,o),!s)return[];const l=NH(s,n).map(c=>us(r,e,c));await Promise.all(l);for(const c of s)VL(r,{fieldsIndex:e,relationships:t},c);return Array.from(r).sort()}};function VL(e,t,r){var s;const{fieldsIndex:i}=t;if(!i||i.fields.length!==e.size)switch(wp(e,i,r.label),wp(e,i,r.description),r.type){case"field":ri(e,i,r.fieldName);break;case"group":r.elements.forEach(n=>VL(e,t,n));break;case"relationship":if(t.relationships){const n=t.relationships.find(o=>o.id===r.relationshipId);n&&ri(e,i,n.keyField)}Mg(e,i,(s=r.orderByFields)==null?void 0:s.map(n=>n.field));break;case"text":wp(e,i,r.text)}}function NH(e,t){if(!t||t.length===0)return[];const r=UL(e),i=[];for(const s of t)r.has(s.name)&&i.push(s.expression);return i}function UL(e){const t=new Set;for(const r of e)if(cx(t,r.visibilityExpression),!LH(r)){if(PH(r))im(t,UL(r.elements));else if(cx(t,r.editableExpression),kH(r)){const{requiredExpression:i,valueExpression:s}=r;im(t,[i,s])}}return t}function wp(e,t,r){Mg(e,t,Ik(r))}a([u({type:String,json:{write:!0}})],zi.prototype,"description",void 0),a([u({json:{write:!0}})],zi.prototype,"elements",void 0),a([Ce("elements")],zi.prototype,"castElements",null),a([D("elements",["formElements"])],zi.prototype,"readElements",null),a([B("elements")],zi.prototype,"writeElements",null),a([u({type:[fH],json:{write:!0}})],zi.prototype,"expressionInfos",void 0),a([u({type:Boolean,json:{default:!1,write:!0}})],zi.prototype,"preserveFieldValuesWhenHidden",void 0),a([u({type:String,json:{write:!0}})],zi.prototype,"title",void 0),zi=Bw=a([_("esri.form.FormTemplate")],zi);const RH=zi;async function jH(e){var i;const t="portalItem"in e?e:{portalItem:e},{fromItem:r}=await j(async()=>{const{fromItem:s}=await import("./portalLayers-C-JOs0aZ.js").then(n=>n.p);return{fromItem:s}},__vite__mapDeps([13,14,15]));try{return await r(t)}catch(s){const n=t==null?void 0:t.portalItem,o=(n==null?void 0:n.id)||"unset",l=((i=n==null?void 0:n.portal)==null?void 0:i.url)||Le.portalUrl;throw G.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+l+"', id: '"+o+"')",s),s}}const VM={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8};function ev(e,t,r,i=ls){const s=new Dr(E$(i)),n=Z.fromJSDate(e,{zone:s}),o=r==="decades"||r==="centuries"?"year":qL(r);return r==="decades"&&(t*=10),r==="centuries"&&(t*=100),n.plus({[o]:t}).toJSDate()}function Bce(e,t,r="milliseconds"){const i=e.getTime(),s=zL(t,r,"milliseconds");return new Date(i+s)}function UM(e,t,r=ls){const i=new Dr(E$(r)),s=Z.fromJSDate(e,{zone:i});if(t==="decades"||t==="centuries"){const o=s.startOf("year"),{year:l}=o,c=l-l%(t==="decades"?10:100);return o.set({year:c}).toJSDate()}const n=qL(t);return s.startOf(n).toJSDate()}function zL(e,t,r){return e===0?0:e*VM[t]/VM[r]}function qL(e){switch(e){case"milliseconds":return"millisecond";case"seconds":return"second";case"minutes":return"minute";case"hours":return"hour";case"days":return"day";case"weeks":return"week";case"months":return"month";case"years":return"year"}}var mi;let Qr=mi=class extends R{static get allTime(){return zM}static get empty(){return DH}static fromArray(e){return new mi({start:e[0]!=null?new Date(e[0]):e[0],end:e[1]!=null?new Date(e[1]):e[1]})}constructor(e){super(e),this.end=null,this.start=null}readEnd(e,t){return t.end!=null?new Date(t.end):null}writeEnd(e,t){t.end=(e==null?void 0:e.getTime())??null}get isAllTime(){return this.equals(mi.allTime)}get isEmpty(){return this.equals(mi.empty)}readStart(e,t){return t.start!=null?new Date(t.start):null}writeStart(e,t){t.start=(e==null?void 0:e.getTime())??null}clone(){return new mi({end:this.end,start:this.start})}equals(e){var n,o,l,c;if(!e)return!1;const t=((n=this.start)==null?void 0:n.getTime())??this.start,r=((o=this.end)==null?void 0:o.getTime())??this.end,i=((l=e.start)==null?void 0:l.getTime())??e.start,s=((c=e.end)==null?void 0:c.getTime())??e.end;return t===i&&r===s}expandTo(e,t=ls){if(this.isEmpty||this.isAllTime)return this.clone();let r=this.start;r&&(r=UM(r,e,t));let i=this.end;if(i){const s=UM(i,e,t);i=i.getTime()===s.getTime()?s:ev(s,1,e,t)}return new mi({start:r,end:i})}intersection(e){var l,c,p,h;if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return mi.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const t=((l=this.start)==null?void 0:l.getTime())??-1/0,r=((c=this.end)==null?void 0:c.getTime())??1/0,i=((p=e.start)==null?void 0:p.getTime())??-1/0,s=((h=e.end)==null?void 0:h.getTime())??1/0;let n,o;return i>=t&&i<=r?n=i:t>=i&&t<=s&&(n=t),r>=i&&r<=s?o=r:s>=t&&s<=r&&(o=s),n==null||o==null||isNaN(n)||isNaN(o)?mi.empty:new mi({start:n===-1/0?null:new Date(n),end:o===1/0?null:new Date(o)})}offset(e,t,r=ls){if(this.isEmpty||this.isAllTime)return this.clone();const i=new mi,{start:s,end:n}=this;return s!=null&&(i.start=ev(s,e,t,r)),n!=null&&(i.end=ev(n,e,t,r)),i}toArray(){var e,t;return this.isEmpty?[void 0,void 0]:[((e=this.start)==null?void 0:e.getTime())??null,((t=this.end)==null?void 0:t.getTime())??null]}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return zM.clone();const t=this.start!=null&&e.start!=null?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,r=this.end!=null&&e.end!=null?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new mi({start:t,end:r})}};a([u({type:Date,json:{write:{allowNull:!0}}})],Qr.prototype,"end",void 0),a([D("end")],Qr.prototype,"readEnd",null),a([B("end")],Qr.prototype,"writeEnd",null),a([u({readOnly:!0,json:{read:!1}})],Qr.prototype,"isAllTime",null),a([u({readOnly:!0,json:{read:!1}})],Qr.prototype,"isEmpty",null),a([u({type:Date,json:{write:{allowNull:!0}}})],Qr.prototype,"start",void 0),a([D("start")],Qr.prototype,"readStart",null),a([B("start")],Qr.prototype,"writeStart",null),Qr=mi=a([_("esri.time.TimeExtent")],Qr);const Vo=Qr,zM=new Qr,DH=new Qr({start:void 0,end:void 0});let VH=0,at=class extends ph.EventedMixin(Ec(Pc)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new it(-180,-90,180,90,ge.WGS84),this.id=Date.now().toString(16)+"-layer-"+VH++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.persistenceEnabled=!1,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=ge.WGS84,this.title=null,this.type=null,this.url=null,this.visibilityTimeExtent=null,this.visible=!0}static async fromArcGISServerUrl(t){const r=typeof t=="string"?{url:t}:t;return(await j(async()=>{const{fromUrl:i}=await import("./arcgisLayers-DZsY2YJ1.js");return{fromUrl:i}},__vite__mapDeps([16,14,15]))).fromUrl(r)}static fromPortalItem(t){return jH(t)}initialize(){this.when().catch(t=>{vr(t)||G.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:t})})}destroy(){const t=this.parent;if(t){const r=this;"layers"in t&&t.layers.includes(r)?t.layers.remove(r):"tables"in t&&t.tables.includes(r)?t.tables.remove(r):"baseLayers"in t&&t.baseLayers.includes(r)?t.baseLayers.remove(r):"referenceLayers"in t&&t.referenceLayers.includes(r)&&t.referenceLayers.remove(r),this._set("parent",null)}}get effectiveVisible(){let t=this.visible;const r=this.parent;return t&&r&&"effectiveVisible"in r&&t&&(t=r.effectiveVisible),t}get hasAttributionData(){return this.attributionDataUrl!=null}get parsedUrl(){return Yt(this.url)}async fetchAttributionData(){const t=this.attributionDataUrl;if(this.hasAttributionData&&t)return(await Ge(t,{query:{f:"json"},responseType:"json"})).data;throw new O("layer:no-attribution-data","Layer does not have attribution data")}};a([u({type:String})],at.prototype,"attributionDataUrl",void 0),a([u({readOnly:!0})],at.prototype,"effectiveVisible",null),a([u({type:it})],at.prototype,"fullExtent",void 0),a([u({readOnly:!0})],at.prototype,"hasAttributionData",null),a([u({type:String,clonable:!1})],at.prototype,"id",void 0),a([u({type:Boolean,nonNullable:!0})],at.prototype,"legendEnabled",void 0),a([u({type:["show","hide","hide-children"]})],at.prototype,"listMode",void 0),a([u({type:Number,range:{min:0,max:1},nonNullable:!0})],at.prototype,"opacity",void 0),a([u({clonable:!1})],at.prototype,"parent",void 0),a([u({readOnly:!0})],at.prototype,"parsedUrl",null),a([u({type:Boolean,readOnly:!0})],at.prototype,"persistenceEnabled",void 0),a([u({type:Boolean})],at.prototype,"popupEnabled",void 0),a([u({type:Boolean})],at.prototype,"attributionVisible",void 0),a([u({type:ge})],at.prototype,"spatialReference",void 0),a([u({type:String})],at.prototype,"title",void 0),a([u({readOnly:!0,json:{read:!1}})],at.prototype,"type",void 0),a([u()],at.prototype,"url",void 0),a([u({type:Vo})],at.prototype,"visibilityTimeExtent",void 0),a([u({type:Boolean,nonNullable:!0})],at.prototype,"visible",void 0),at=a([_("esri.layers.Layer")],at);const Ww=at;let UH=class{constructor(t=r=>r.values().next().value){this._peeker=t,this._observable=new hh,this._items=new Set}get length(){return X(this._observable),this._items.size}clear(){this.length!==0&&(this._items.clear(),this._observable.notify())}last(){if(this.length===0)return;let t;for(t of this._items);return t}peek(){if(this.length!==0)return this._peeker(this._items)}push(t){this.contains(t)||(this._items.add(t),this._observable.notify())}contains(t){return X(this._observable),this._items.has(t)}pop(){if(this.length===0)return;const t=this.peek();return this._items.delete(t),this._observable.notify(),t}popLast(){if(this.length===0)return;const t=this.last();return this._items.delete(t),this._observable.notify(),t}remove(t){this.contains(t)&&(this._items.delete(t),this._observable.notify())}filter(t){const r=this.length;return this._items.forEach(i=>{t(i)||this._items.delete(i)}),r!==this._items.size&&this._observable.notify(),this}*[Symbol.iterator](){X(this._observable),yield*this._items}};const GL=new FinalizationRegistry(e=>{e.close()});function zH(e,t){GL.register(e,t,t)}function qH(e){GL.unregister(e)}function BL(e,t){return new Proxy({},{get:(r,i,s)=>(...n)=>{let o,l;const c=n[n.length-1];return GH(c)&&(o=c.signal,l=c.transferList,n.pop()),e.apply(t?`${t}.${i.toString()}`:i.toString(),n,{transferList:l,signal:o})}})}function GH(e){return typeof e=="object"&&!Array.isArray(e)&&e!=null&&("signal"in e||"transferList"in e||Object.keys(e).length===0)}const BH={statsWorker:()=>j(()=>import("./statsWorker-DyxlnDdY.js"),__vite__mapDeps([17,18,19,20])),geometryEngineWorker:()=>j(()=>import("./geometryEngineWorker-BiqU-FdE.js"),__vite__mapDeps([21,22,23,1,24])),CSVSourceWorker:()=>j(()=>import("./CSVSourceWorker-eCRMQABd.js"),__vite__mapDeps([25,26,24,27,5,28,29,30,31,32,33,34,18,19,20,35,36,4,37,38])),EdgeProcessingWorker:()=>j(()=>import("./EdgeProcessingWorker-D5XxXvwc.js"),__vite__mapDeps([39,40,41,42,43,44,45,46,47,48,49,50,51,52,53])),ElevationSamplerWorker:()=>j(()=>import("./ElevationSamplerWorker-2MIahXaT.js"),__vite__mapDeps([54,29,30,55,56,57,58,59,43,60,61,62,63,64,41,42,65])),FeatureServiceSnappingSourceWorker:()=>j(()=>import("./FeatureServiceSnappingSourceWorker-CX5m2310.js"),__vite__mapDeps([66,67,27,5,28,29,30,31,32,33,24,34,18,19,20,35,36,8])),GeoJSONSourceWorker:()=>j(()=>import("./GeoJSONSourceWorker-BnzTq9M2.js"),__vite__mapDeps([68,5,27,28,29,30,31,32,33,24,34,18,19,20,35,36,69,26,37,38,70])),LercWorker:()=>j(()=>import("./LercWorker-D4aRDW5q.js"),[]),MemorySourceWorker:()=>j(()=>import("./MemorySourceWorker-DbeNgIJQ.js"),__vite__mapDeps([71,5,72,27,28,29,30,31,32,33,24,34,18,19,20,35,36,37,38,70,26])),PBFDecoderWorker:()=>j(()=>import("./PBFDecoderWorker-SbgTEtQx.js"),__vite__mapDeps([73,5])),FeaturePipelineWorker:()=>j(()=>import("./FeaturePipelineWorker-DmBcXF2z.js"),__vite__mapDeps([74,8,75,42,76,35,77,78,52,79,80,81,82,45,46,5,33,24,36,31,32,34,18,19,20,30,83,69,26,37,38,70,84,67])),PointCloudWorker:()=>j(()=>import("./PointCloudWorker-DTdaKsDw.js"),__vite__mapDeps([85,86,58,87,43,88,89,90,50,91,57,59,60,61,92,46])),RasterWorker:()=>j(()=>import("./RasterWorker-C1CBJtq4.js"),__vite__mapDeps([93,94,1,95])),SceneLayerSnappingSourceWorker:()=>j(()=>import("./SceneLayerSnappingSourceWorker-DVhGHy8N.js"),__vite__mapDeps([96,43,97,98,57,58,92,59,87,46,99,45,47,48,49,40,41,42,44,50,51,52,53])),SceneLayerWorker:()=>j(()=>import("./SceneLayerWorker-kpfpLixu.js"),__vite__mapDeps([100,55,64,98,43,57,58,92,59,87,46,101,102,62,90,50,103,82,91,86,60,61])),WFSSourceWorker:()=>j(()=>import("./WFSSourceWorker-cMrZ68Br.js"),__vite__mapDeps([104,5,27,28,29,30,31,32,33,24,34,18,19,20,35,36,69,26,70,105,106])),WorkerTileHandler:()=>j(()=>import("./WorkerTileHandler-7rIsjkn7.js"),__vite__mapDeps([107,108,77,52,53,80,81])),Lyr3DWorker:()=>j(()=>import("./Lyr3DWorker-DFHUlBju.js"),[]),Feature3DPipelineWorker:()=>j(()=>import("./Feature3DPipelineWorker-B0Cu29aS.js"),__vite__mapDeps([109,31,5,32,33,24,34,18,19,20,35,29,30,91,57,58,59,86,87,43,60,61,92,46,49,42,110,111,52,78,45,40,41,44,103,50,98,82,97,112,51,53,99,113,102,62,55,88]))},WL="worker:port-closed";var Vt;(function(e){e[e.HANDSHAKE=0]="HANDSHAKE",e[e.OPEN=1]="OPEN",e[e.OPENED=2]="OPENED",e[e.RESPONSE=3]="RESPONSE",e[e.INVOKE=4]="INVOKE",e[e.ABORT=5]="ABORT",e[e.CLOSE=6]="CLOSE",e[e.OPEN_PORT=7]="OPEN_PORT",e[e.ON=8]="ON"})(Vt||(Vt={}));let WH=0;function HL(){return WH++}function HH(e){return e&&typeof e=="object"&&("result"in e||"transferList"in e)}function Hp(e){return e?typeof e=="string"?JSON.stringify({name:"message",message:e}):e.toJSON?JSON.stringify(e):JSON.stringify({name:e.name,message:e.message,details:e.details||{stack:e.stack}}):null}function BS(e,t,r,i){if(t.type===Vt.OPEN_PORT)return void e.postMessage(t,[t.port]);if(t.type!==Vt.INVOKE&&t.type!==Vt.RESPONSE)return void e.postMessage(t);let s;if(HH(r)?(s=qM(r.transferList),t.data=r.result):(s=qM(i),t.data=r),s){if(k("ff")){for(const n of s)if("byteLength"in n&&n.byteLength>267386880){const o="Worker call with large ArrayBuffer would crash Firefox";switch(t.type){case Vt.INVOKE:throw o;case Vt.RESPONSE:return void BS(e,{type:Vt.RESPONSE,jobId:t.jobId,error:Hp(o)})}}}e.postMessage(t,s)}else e.postMessage(t)}function Jp(e){if(!e)return null;const t=e.data;return t?typeof t=="string"?JSON.parse(t):t:null}function qM(e){if(!(e!=null&&e.length))return null;if(k("esri-workers-arraybuffer-transfer"))return e;const t=e.filter(r=>!JH(r));return t.length?t:null}function JH(e){var t;return e instanceof ArrayBuffer||((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="ArrayBuffer"}async function Jce(e){try{return await e}catch(t){const r=(t==null?void 0:t.name)===WL;if(!(vr(t)||r))throw t;return}}const{CLOSE:GM,ABORT:BM,INVOKE:WM,RESPONSE:ed,OPEN_PORT:HM,ON:ZH}=Vt,YH=2;let QH=class{constructor(t){this._invoke=t,this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._timer=null,this._process=this._process.bind(this)}push(t){t.type===Vt.ABORT?this._cancelledJobIds.add(t.jobId):(this._invokeMessages.push(t),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const t of this._invokeMessages)this._cancelledJobIds.has(t.jobId)||this._invoke(t);this._cancelledJobIds.clear(),this._invokeMessages.length=0}},Uo=class lu{static connect(t,r){const i=new MessageChannel;let s;s=typeof t=="function"?new t:"default"in t&&typeof t.default=="function"?new t.default:t;const n=new lu(i.port1,{channel:i,client:s,schedule:r});return typeof s=="object"&&"remoteClient"in s&&(s.remoteClient=n),lu.clients.set(n,s),i.port2}static loadWorker(t){const r=BH[t];return r?r():Promise.resolve(null)}constructor(t,r,i){this._port=t,this._jobQueue=i,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new QH(s=>this._onInvokeMessage(s)),this._client=r.client,this._onMessage=this._onMessage.bind(this),this._channel=r.channel,this._schedule=r.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}close(){this._post({type:GM}),this._close()}isBusy(){return this._outJobs.size>0}invoke(t,r,i){return this.apply(t,[r],i)}apply(t,r,i){const s=i==null?void 0:i.signal,n=i==null?void 0:i.transferList;if(!this._port)return Promise.reject(new O(WL,`Cannot call invoke('${t}'), port is closed`,{methodName:t,data:r}));const o=HL();return new Promise((l,c)=>{if(Lo(s))return this._processWork(),void c(Jt());const p=el(s,()=>{const f=this._outJobs.get(o);f&&(this._outJobs.delete(o),this._processWork(),ts(f.abortHandle),this._post({type:BM,jobId:o}),c(Jt()))}),h={resolve:l,reject:c,abortHandle:p,debugInfo:t};this._outJobs.set(o,h),this._post({type:WM,jobId:o,methodName:t,abortable:s!=null},r,n)})}createInvokeProxy(t){return BL(this,t)}on(t,r){const i=new MessageChannel;function s(n){r(n.data)}return this._port.postMessage({type:Vt.ON,eventType:t,port:i.port2},[i.port2]),i.port1.addEventListener("message",s),i.port1.start(),pt(()=>{i.port1.postMessage({type:Vt.CLOSE}),i.port1.close(),i.port1.removeEventListener("message",s)})}jobAdded(){this._processWork()}openPort(){const t=new MessageChannel;return this._post({type:HM,port:t.port2}),t.port1}_processWork(){var o;if(this._outJobs.size>=YH)return;const t=(o=this._jobQueue)==null?void 0:o.pop();if(!t)return;const{methodName:r,data:i,invokeOptions:s,resolver:n}=t;this.apply(r,i,s).then(l=>n.resolve(l)).catch(l=>n.reject(l))}_close(){this._channel&&(this._channel=void 0),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(t=>{ts(t.abortHandle),t.reject(Jt(`Worker closing, aborting job calling '${t.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=null,this._client=null,this._schedule=null}_onMessage(t){this._schedule!=null?this._schedule(()=>this._processMessage(t,!0)):this._processMessage(t,!1)}_processMessage(t,r){const i=Jp(t);if(i)switch(i.type){case ed:this._onResponseMessage(i);break;case WM:r?this._onInvokeMessage(i):this._invokeQueue.push(i);break;case BM:this._onAbortMessage(i);break;case GM:this._onCloseMessage();break;case HM:this._onOpenPortMessage(i);break;case ZH:this._onOnMessage(i)}}_onAbortMessage(t){const r=this._inJobs,i=t.jobId,s=r.get(i);this._invokeQueue.push(t),s&&(s.controller&&s.controller.abort(),r.delete(i))}_onCloseMessage(){const t=this._client;this._close(),t&&"destroy"in t&&lu.clients.get(this)===t&&t.destroy(),lu.clients.delete(this),t!=null&&t.remoteClient&&(t.remoteClient=null)}_onInvokeMessage(t){const{methodName:r,jobId:i,data:s=[],abortable:n}=t,o=n?new AbortController:null,l=this._inJobs;let c,p=this._client,h=p[r];try{if(!h&&r&&r.includes(".")){const f=r.split(".");for(let y=0;y<f.length-1;y++)p=p[f[y]],h=p[f[y+1]]}if(typeof h!="function")throw new TypeError(`${r} is not a function`);s.push({client:this,signal:o?o.signal:null}),c=h.apply(p,s)}catch(f){return void this._post({type:ed,jobId:i,error:Hp(f)})}ch(c)?(l.set(i,{controller:o,promise:c}),c.then(f=>{l.has(i)&&(l.delete(i),this._post({type:ed,jobId:i},f))},f=>{l.has(i)&&(l.delete(i),vr(f)||this._post({type:ed,jobId:i,error:Hp(f||{message:`Error encountered at method ${r}`})}))})):this._post({type:ed,jobId:i},c)}_onOpenPortMessage(t){new lu(t.port,{client:this._client})}_onOnMessage(t){const{port:r}=t,i=this._client.on(t.eventType,n=>{r.postMessage(n)}),s=ug(t.port,"message",n=>{const o=Jp(n);(o==null?void 0:o.type)===Vt.CLOSE&&(s.remove(),i.remove(),r.close())})}_onResponseMessage(t){const{jobId:r,error:i,data:s}=t,n=this._outJobs;if(!n.has(r))return;const o=n.get(r);n.delete(r),this._processWork(),ts(o.abortHandle),i?o.reject(O.fromJSON(JSON.parse(i))):o.resolve(s)}_post(t,r,i){return BS(this._port,t,r,i)}};Uo.kernelInfo={buildDate:cF,fullVersion:j$,revision:dF},Uo.clients=new Map;let KH=class{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new UH}destroy(){this.close()}get closed(){var t;return!((t=this._clients)!=null&&t.length)}open(t,r){return new Promise((i,s)=>{let n=!0;const o=l=>{si(r.signal),n&&(n=!1,l())};this._clients.length=t.length,this._clientPromises.length=t.length,this._inUseClients.length=t.length;for(let l=0;l<t.length;++l){const c=t[l];ch(c)?this._clientPromises[l]=c.then(p=>(this._clients[l]=new Uo(p,r,this._ongoingJobsQueue),o(i),this._clients[l]),()=>(o(s),null)):(this._clients[l]=new Uo(c,r,this._ongoingJobsQueue),this._clientPromises[l]=Promise.resolve(this._clients[l]),o(i))}})}broadcast(t,r,i){const s=new Array(this._clientPromises.length);for(let n=0;n<this._clientPromises.length;++n){const o=this._clientPromises[n];s[n]=o.then(l=>l==null?void 0:l.invoke(t,r,i))}return s}close(){let t;for(;t=this._ongoingJobsQueue.pop();)t.resolver.reject(Jt(`Worker closing, aborting job calling '${t.methodName}'`));for(const r of this._clientPromises)r.then(i=>i==null?void 0:i.close());this._clients.length=0,this._clientPromises.length=0,this._inUseClients.length=0,qH(this)}invoke(t,r,i){return this.apply(t,[r],i)}apply(t,r,i){const s=No();this._ongoingJobsQueue.push({methodName:t,data:r,invokeOptions:i,resolver:s});for(let n=0;n<this._clientPromises.length;n++){const o=this._clients[n];o?o.jobAdded():this._clientPromises[n].then(l=>l==null?void 0:l.jobAdded())}return s.promise}createInvokeProxy(t){return BL(this,t)}on(t,r){return Promise.all(this._clientPromises).then(()=>nh(this._clients.map(i=>i.on(t,r))))}openPorts(){return new Promise(t=>{const r=new Array(this._clientPromises.length);let i=r.length;for(let s=0;s<this._clientPromises.length;++s)this._clientPromises[s].then(n=>{n&&(r[s]=n.openPort()),--i==0&&t(r)})})}get test(){}};const XH={async request(e,t){var o,l;const r=e.options,i=r.responseType;r.signal=t==null?void 0:t.signal,r.responseType=i==="native"||i==="native-request-init"?"native-request-init":i&&["blob","json","text"].includes(i)&&((o=lb(e.url))!=null&&o.after)?i:"array-buffer";const s=await Ge(e.url,r),n={data:s.data,httpStatus:s.httpStatus,ssl:s.ssl};switch((l=s.requestOptions)==null?void 0:l.responseType){case"native-request-init":return delete n.data.signal,n;case"blob":n.data=await n.data.arrayBuffer();break;case"json":n.data=new TextEncoder().encode(JSON.stringify(n.data)).buffer;break;case"text":n.data=new TextEncoder().encode(n.data).buffer}return{result:n,transferList:[n.data]}}},JM={};function eJ(e){var r;const t={async:e.async,isDebug:e.isDebug,locale:e.locale,baseUrl:e.baseUrl,has:{...e.has},map:{...e.map},packages:((r=e.packages)==null?void 0:r.slice())||[],paths:{...JM.paths,...e.paths}};return e.hasOwnProperty("async")||(t.async=!0),e.hasOwnProperty("isDebug")||(t.isDebug=!1),e.baseUrl||(t.baseUrl=JM.baseUrl),t}let tJ=class{constructor(){const t=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(r=>{this[r]=(...i)=>t[r](...i)})}},ky=class{constructor(){this._dispatcher=new tJ,this._workerPostMessage({type:Vt.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(t){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=t,t&&this.addEventListener("message",t)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(t){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=t,t&&this.addEventListener("messageerror",t)}get onerror(){return this._onerrorHandler}set onerror(t){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=t,t&&this.addEventListener("error",t)}postMessage(t){tm(()=>{this._workerMessageHandler(new MessageEvent("message",{data:t}))})}dispatchEvent(t){return this._dispatcher.dispatchEvent(t)}addEventListener(t,r,i){this._dispatcher.addEventListener(t,r,i)}removeEventListener(t,r,i){this._dispatcher.removeEventListener(t,r,i)}_workerPostMessage(t){tm(()=>{this.dispatchEvent(new MessageEvent("message",{data:t}))})}async _workerMessageHandler(t){const r=Jp(t);if(r&&r.type===Vt.OPEN){const{modulePath:i,jobId:s}=r;let n=await Uo.loadWorker(i);n||(n=await import(i));const o=Uo.connect(n);this._workerPostMessage({type:Vt.OPENED,jobId:s,data:o})}}};const Hw=()=>G.getLogger("esri.core.workers.workerFactory"),{HANDSHAKE:rJ}=Vt,iJ='let globalId=0;const outgoing=new Map,configuration={CONFIGURATION};self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;let s=null;return new Promise(((r,i)=>{if(t){if(t.aborted)return i(createAbortError());s=()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))},t.addEventListener("abort",s)}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})})).finally((()=>{t&&t.removeEventListener("abort",s)}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,fullVersion:r}=configuration.kernelInfo,{revision:t,fullVersion:n,version:s}=e.kernelInfo;esriConfig.assetsPath!==esriConfig.defaultAssetsPath&&o!==t&&console.warn(`Version mismatch detected between ArcGIS Maps SDK for JavaScript modules and assets. For more information visit https://bit.ly/3QnsuSo.\nModules version: ${r}\nAssets version: ${n??s}\nAssets path: ${esriConfig.assetsPath}`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let n;function t(e){const o=n.connect(e);self.postMessage({type:2,jobId:r,data:o},[o])}"function"==typeof define&&define.amd?require([workerPath],(e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((e=>(n=e.default,checkWorkerRevision(n),n.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then((e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||import(o.modulePath))).then(t)})):(self.RemoteClient||importScripts(workerPath),n=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const s=outgoing.get(r);outgoing.delete(r),o.error?s.reject(JSON.parse(o.error)):s.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let df,pf;const ZM="Failed to create Worker. Fallback to execute module in main thread";async function sJ(){if(!k("esri-workers"))return YM(new ky);if(!df&&!pf)try{const t=iJ.split("{CONFIGURATION}").join(nJ());df=URL.createObjectURL(new Blob([t],{type:"text/javascript"}))}catch(t){pf=t||{}}let e;if(df)try{e=new Worker(df,{name:"esri-worker-"+oJ++})}catch{Hw().warn(ZM,pf),e=new ky}else Hw().warn(ZM,pf),e=new ky;return YM(e)}async function YM(e){return new Promise(t=>{function r(s){const n=Jp(s);n&&n.type===rJ&&(e.removeEventListener("message",r),e.removeEventListener("error",i),t(e))}function i(s){s.preventDefault(),e.removeEventListener("message",r),e.removeEventListener("error",i),Hw().warn("Failed to create Worker. Fallback to execute module in main thread",s),(e=new ky).addEventListener("message",r),e.addEventListener("error",i)}e.addEventListener("message",r),e.addEventListener("error",i)})}function nJ(){let e;if(Le.default!=null){const s={...Le};delete s.default,e=JSON.parse(JSON.stringify(s))}else e=JSON.parse(JSON.stringify(Le));e.assetsPath=wi(e.assetsPath),e.defaultAssetsPath=e.defaultAssetsPath?wi(e.defaultAssetsPath):void 0,e.request.interceptors=[],e.log.interceptors=[],e.locale=Nr(),e.has={"esri-csp-restrictions":k("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":k("esri-2d-update-debug"),"esri-2d-log-updating":k("esri-2d-log-updating"),"featurelayer-pbf":k("featurelayer-pbf"),"featurelayer-fast-triangulation-enabled":k("featurelayer-fast-triangulation-enabled"),"featurelayer-simplify-thresholds":k("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":k("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":k("featurelayer-simplify-mobile-factor"),"featurelayer-query-max-depth":k("featurelayer-query-max-depth"),"featurelayer-query-pausing-enabled":k("featurelayer-query-pausing-enabled"),"featurelayer-snapshot-enabled":k("featurelayer-snapshot-enabled"),"esri-atomics":k("esri-atomics"),"esri-shared-array-buffer":k("esri-shared-array-buffer"),"esri-tiles-debug":k("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":k("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":k("feature-polyline-generalization-factor"),"host-webworker":1},e.workers.loaderUrl&&(e.workers.loaderUrl=wi(e.workers.loaderUrl)),e.workers.workerPath?e.workers.workerPath=wi(e.workers.workerPath):e.workers.workerPath=wi(Ie("esri/core/workers/RemoteClient.js")),e.workers.useDynamicImport=!1;const t=Le.workers.loaderConfig,r=eJ({baseUrl:t==null?void 0:t.baseUrl,locale:Nr(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...t==null?void 0:t.has},map:{...t==null?void 0:t.map},paths:{...t==null?void 0:t.paths},packages:(t==null?void 0:t.packages)||[]});return JSON.stringify({esriConfig:e,loaderConfig:r,kernelInfo:{buildDate:cF,fullVersion:j$,revision:dF}})}let oJ=0;const{ABORT:QM,INVOKE:aJ,OPEN:lJ,OPENED:uJ,RESPONSE:td}=Vt;let cJ=class JL{static async create(t){const r=await sJ();return new JL(r,t)}constructor(t,r){this._outJobs=new Map,this._inJobs=new Map,this.worker=t,this.id=r,t.addEventListener("message",this._onMessage.bind(this)),t.addEventListener("error",i=>{i.preventDefault(),G.getLogger("esri.core.workers.WorkerOwner").error(i)})}terminate(){this.worker.terminate()}async open(t,r={}){const{signal:i}=r,s=HL();return new Promise((n,o)=>{const l={resolve:n,reject:o,abortHandle:cC(i,()=>{this._outJobs.delete(s),this._post({type:QM,jobId:s})})};this._outJobs.set(s,l),this._post({type:lJ,jobId:s,modulePath:t})})}_onMessage(t){const r=Jp(t);if(r)switch(r.type){case uJ:this._onOpenedMessage(r);break;case td:this._onResponseMessage(r);break;case QM:this._onAbortMessage(r);break;case aJ:this._onInvokeMessage(r)}}_onAbortMessage(t){const r=this._inJobs,i=t.jobId,s=r.get(i);s&&(s.controller&&s.controller.abort(),r.delete(i))}_onInvokeMessage(t){const{methodName:r,jobId:i,data:s,abortable:n}=t,o=n?new AbortController:null,l=this._inJobs,c=XH[r];let p;try{if(typeof c!="function")throw new TypeError(`${r} is not a function`);p=c.call(null,s,{signal:o?o.signal:null})}catch(h){return void this._post({type:td,jobId:i,error:Hp(h)})}ch(p)?(l.set(i,{controller:o,promise:p}),p.then(h=>{l.has(i)&&(l.delete(i),this._post({type:td,jobId:i},h))},h=>{l.has(i)&&(l.delete(i),h||(h={message:"Error encountered at method"+r}),vr(h)||this._post({type:td,jobId:i,error:Hp(h||{message:`Error encountered at method ${r}`})}))})):this._post({type:td,jobId:i},p)}_onOpenedMessage(t){const{jobId:r,data:i}=t,s=this._outJobs.get(r);s&&(this._outJobs.delete(r),ts(s.abortHandle),s.resolve(i))}_onResponseMessage(t){const{jobId:r,error:i,data:s}=t,n=this._outJobs.get(r);n&&(this._outJobs.delete(r),ts(n.abortHandle),i?n.reject(O.fromJSON(JSON.parse(i))):n.resolve(s))}_post(t,r,i){return BS(this.worker,t,r,i)}};const KM=k("host-browser")?Math.min(navigator.hardwareConcurrency-1,k("workers-pool-size")??8):0;let Ga=k("esri-mobile")?Math.min(KM,3):KM;Ga||(Ga=k("safari")&&k("mac")?7:2);let XM=0;const Py=[];async function hf(e,t){const r=new KH,{registryTarget:i,...s}=t;return await r.open(e,s),i&&zH(i,r),r}async function dJ(e,t={}){if(typeof e!="string")throw new O("workers:undefined-module","modulePath is missing");let r=t.strategy||"distributed";if(k("host-webworker")&&!k("esri-workers")&&(r="local"),r==="local"){let i=await Uo.loadWorker(e);i||(i=await import(e)),si(t.signal);const s=t.client||i;return hf([Uo.connect(i,t.schedule)],{...t,client:s})}if(await pJ(),si(t.signal),r==="dedicated"){const i=XM++%Ga;return hf([await Py[i].open(e,t)],t)}if(t.maxNumWorkers&&t.maxNumWorkers>0){const i=Math.min(t.maxNumWorkers,Ga);if(i<Ga){const s=new Array(i);for(let n=0;n<i;++n){const o=XM++%Ga;s[n]=Py[o].open(e,t)}return hf(s,t)}}return hf(Py.map(i=>i.open(e,t)),t)}let ff=null;async function pJ(){if(ff)return ff;new AbortController;const e=[];for(let t=0;t<Ga;t++){const r=cJ.create(t).then(i=>(Py[t]=i,i));e.push(r)}return ff=Promise.all(e),ff}function eE(e,t,r){if(e.hasM==null||e.hasZ)for(const i of t)for(const s of i)s.length>2&&(s[2]*=r)}function hJ(e,t,r){if(!e&&!t||!r)return;const i=oc(r);tE(e,r,i),tE(t,r,i)}function tE(e,t,r){if(e)for(const i of e)fJ(i.geometry,t,r)}function fJ(e,t,r){if(!(e!=null&&e.spatialReference)||wr(e.spatialReference,t))return;const i=oc(e.spatialReference)/r;if(i!==1){if("x"in e)e.z!=null&&(e.z*=i);else if("rings"in e)eE(e,e.rings,i);else if("paths"in e)eE(e,e.paths,i);else if("points"in e&&(e.hasM==null||e.hasZ))for(const s of e.points)s.length>2&&(s[2]*=i)}}function ZL(e,t,r){if(t==null||r==null||r.vcsWkid||wr(t,r)||jo(t)||jo(r))return null;const i=oc(t)/oc(r);if(i===1)return null;switch(e){case"point":case"esriGeometryPoint":return s=>yJ(s,i);case"polyline":case"esriGeometryPolyline":return s=>gJ(s,i);case"polygon":case"esriGeometryPolygon":return s=>mJ(s,i);case"multipoint":case"esriGeometryMultipoint":return s=>vJ(s,i);case"extent":case"esriGeometryEnvelope":return s=>bJ(s,i);default:return null}}function yJ(e,t){(e==null?void 0:e.z)!=null&&(e.z*=t)}function mJ(e,t){if(e)for(const r of e.rings)for(const i of r)i.length>2&&(i[2]*=t)}function gJ(e,t){if(e)for(const r of e.paths)for(const i of r)i.length>2&&(i[2]*=t)}function vJ(e,t){if(e)for(const r of e.points)r.length>2&&(r[2]*=t)}function bJ(e,t){e&&e.zmin!=null&&e.zmax!=null&&(e.zmin*=t,e.zmax*=t)}function Jw(e,t,r){if(!(r!=null&&r.features)||!r.hasZ)return;const i=ZL(r.geometryType,t,e.outSpatialReference);if(i!=null)for(const s of r.features)i(s.geometry)}const wJ=new ve({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"});var Zw;const _J=new ve({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let or=Zw=class extends R{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=void 0,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(e,{description:t}){let r=null;try{r=t?JSON.parse(t):null}catch{}return(r==null?void 0:r.value)??null}readValueType(e,{description:t}){let r=null;try{r=t?JSON.parse(t):null}catch{}return r?_J.fromJSON(r.fieldValueType):null}clone(){var e;return new Zw({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:((e=this.domain)==null?void 0:e.clone())??null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}};a([u({type:String,json:{write:!0}})],or.prototype,"alias",void 0),a([u({type:[String,Number],json:{write:{allowNull:!0}}})],or.prototype,"defaultValue",void 0),a([u()],or.prototype,"description",void 0),a([D("description")],or.prototype,"readDescription",null),a([u({types:LL,json:{read:{reader:Wg},write:!0}})],or.prototype,"domain",void 0),a([u({type:Boolean,json:{write:!0}})],or.prototype,"editable",void 0),a([u({type:je,json:{write:{overridePolicy:e=>({enabled:Number.isFinite(e)})}}})],or.prototype,"length",void 0),a([u({type:String,json:{write:!0}})],or.prototype,"name",void 0),a([u({type:Boolean,json:{write:!0}})],or.prototype,"nullable",void 0),a([re(wJ)],or.prototype,"type",void 0),a([u()],or.prototype,"valueType",void 0),a([D("valueType",["description"])],or.prototype,"readValueType",null),a([u({type:Boolean,json:{read:!1}})],or.prototype,"visible",void 0),or=Zw=a([_("esri.layers.support.Field")],or);const Hg=or;var Yw;const Qw=new ve({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let Nt=Yw=class extends R{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(e,t){var s;const r=ge.fromJSON(t.spatialReference),i=[];for(let n=0;n<e.length;n++){const o=e[n],l=ni.fromJSON(o),c=(s=o.geometry)==null?void 0:s.spatialReference;l.geometry==null||c||(l.geometry.spatialReference=r);const p=o.aggregateGeometries,h=l.aggregateGeometries;if(p&&h!=null)for(const f in h){const y=h[f],m=p[f],g=m==null?void 0:m.spatialReference;y==null||g||(y.spatialReference=r)}i.push(l)}return i}writeGeometryType(e,t,r,i){if(e)return void Qw.write(e,t,r,i);const{features:s}=this;if(s){for(const n of s)if((n==null?void 0:n.geometry)!=null)return void Qw.write(n.geometry.type,t,r,i)}}readQueryGeometry(e,t){if(!e)return null;const r=!!e.spatialReference,i=bh(e);return i&&!r&&t.spatialReference&&(i.spatialReference=ge.fromJSON(t.spatialReference)),i}writeSpatialReference(e,t){if(e)return void(t.spatialReference=e.toJSON());const{features:r}=this;if(r){for(const i of r)if(i&&i.geometry!=null&&i.geometry.spatialReference)return void(t.spatialReference=i.geometry.spatialReference.toJSON())}}clone(){return new Yw(this.cloneProperties())}cloneProperties(){return M({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(e){const t=this.write();if(t.features&&Array.isArray(e)&&e.length>0)for(let r=0;r<t.features.length;r++){const i=t.features[r];if(i.geometry){const s=e==null?void 0:e[r];i.geometry=(s==null?void 0:s.toJSON())||i.geometry}}return t}quantize(e){const{scale:[t,r],translate:[i,s]}=e,n=p=>Math.round((p-i)/t),o=p=>Math.round((s-p)/r),l=this.features,c=this._getQuantizationFunction(this.geometryType,n,o);for(let p=0,h=l.length;p<h;p++)c!=null&&c(l[p].geometry)||(l.splice(p,1),p--,h--);return this.transform=e,this}unquantize(){var y,m;const{geometryType:e,features:t,transform:r}=this;if(!r)return this;const{translate:[i,s],scale:[n,o]}=r,l=g=>g*n+i,c=g=>s-g*o;let p=null,h=null;if(this.hasZ&&((y=r==null?void 0:r.scale)==null?void 0:y[2])!=null){const{translate:[,,g],scale:[,,b]}=r;p=w=>w*b+g}if(this.hasM&&((m=r==null?void 0:r.scale)==null?void 0:m[3])!=null){const{translate:[,,,g],scale:[,,,b]}=r;h=w=>w==null?w:w*b+g}const f=this._getHydrationFunction(e,l,c,p,h);for(const{geometry:g}of t)g!=null&&f&&f(g);return this.transform=null,this}_quantizePoints(e,t,r){let i,s;const n=[];for(let o=0,l=e.length;o<l;o++){const c=e[o];if(o>0){const p=t(c[0]),h=r(c[1]);p===i&&h===s||(n.push([p-i,h-s]),i=p,s=h)}else i=t(c[0]),s=r(c[1]),n.push([i,s])}return n.length>0?n:null}_getQuantizationFunction(e,t,r){return e==="point"?i=>(i.x=t(i.x),i.y=r(i.y),i):e==="polyline"||e==="polygon"?i=>{const s=Ya(i)?i.rings:i.paths,n=[];for(let o=0,l=s.length;o<l;o++){const c=s[o],p=this._quantizePoints(c,t,r);p&&n.push(p)}return n.length>0?(Ya(i)?i.rings=n:i.paths=n,i):null}:e==="multipoint"?i=>{const s=this._quantizePoints(i.points,t,r);return s&&s.length>0?(i.points=s,i):null}:e==="extent"?i=>i:null}_getHydrationFunction(e,t,r,i,s){return e==="point"?n=>{n.x=t(n.x),n.y=r(n.y),i&&(n.z=i(n.z))}:e==="polyline"||e==="polygon"?n=>{const o=Ya(n)?n.rings:n.paths;let l,c;for(let p=0,h=o.length;p<h;p++){const f=o[p];for(let y=0,m=f.length;y<m;y++){const g=f[y];y>0?(l+=g[0],c+=g[1]):(l=g[0],c=g[1]),g[0]=t(l),g[1]=r(c)}}if(i&&s)for(let p=0,h=o.length;p<h;p++){const f=o[p];for(let y=0,m=f.length;y<m;y++){const g=f[y];g[2]=i(g[2]),g[3]=s(g[3])}}else if(i)for(let p=0,h=o.length;p<h;p++){const f=o[p];for(let y=0,m=f.length;y<m;y++){const g=f[y];g[2]=i(g[2])}}else if(s)for(let p=0,h=o.length;p<h;p++){const f=o[p];for(let y=0,m=f.length;y<m;y++){const g=f[y];g[2]=s(g[2])}}}:e==="extent"?n=>{n.xmin=t(n.xmin),n.ymin=r(n.ymin),n.xmax=t(n.xmax),n.ymax=r(n.ymax),i&&n.zmax!=null&&n.zmin!=null&&(n.zmax=i(n.zmax),n.zmin=i(n.zmin)),s&&n.mmax!=null&&n.mmin!=null&&(n.mmax=s(n.mmax),n.mmin=s(n.mmin))}:e==="multipoint"?n=>{const o=n.points;let l,c;for(let p=0,h=o.length;p<h;p++){const f=o[p];p>0?(l+=f[0],c+=f[1]):(l=f[0],c=f[1]),f[0]=t(l),f[1]=r(c)}if(i&&s)for(let p=0,h=o.length;p<h;p++){const f=o[p];f[2]=i(f[2]),f[3]=s(f[3])}else if(i)for(let p=0,h=o.length;p<h;p++){const f=o[p];f[2]=i(f[2])}else if(s)for(let p=0,h=o.length;p<h;p++){const f=o[p];f[2]=s(f[2])}}:null}};a([u({type:String,json:{write:!0}})],Nt.prototype,"displayFieldName",void 0),a([u({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Nt.prototype,"exceededTransferLimit",void 0),a([u({type:[ni],json:{write:!0}})],Nt.prototype,"features",void 0),a([D("features")],Nt.prototype,"readFeatures",null),a([u({type:[Hg],json:{write:!0}})],Nt.prototype,"fields",void 0),a([u({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:Qw.read}}})],Nt.prototype,"geometryType",void 0),a([B("geometryType")],Nt.prototype,"writeGeometryType",null),a([u({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Nt.prototype,"hasM",void 0),a([u({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Nt.prototype,"hasZ",void 0),a([u({types:wh,json:{write:!0}})],Nt.prototype,"queryGeometry",void 0),a([D("queryGeometry")],Nt.prototype,"readQueryGeometry",null),a([u({type:ge,json:{write:!0}})],Nt.prototype,"spatialReference",void 0),a([B("spatialReference")],Nt.prototype,"writeSpatialReference",null),a([u({json:{write:!0}})],Nt.prototype,"transform",void 0),Nt=Yw=a([_("esri.rest.support.FeatureSet")],Nt),Nt.prototype.toJSON.isDefaultToJSON=!0;const WS=Nt;let $J=0,dn=class extends Pc.LoadableMixin(fS(ne)){constructor(t){super(t),this._idToClientGraphic=null,this.type="memory"}load(t){const r=t!=null?t.signal:null;return this.addResolvingPromise(this._startWorker(r)),Promise.resolve(this)}destroy(){var t;(t=this._connection)==null||t.close(),this._connection=null}get _workerGeometryType(){var r;const t=(r=this.layer)==null?void 0:r.geometryType;return t?this._geometryTypeRequiresClientGraphicMapping(t)?"polygon":t:null}applyEdits(t){return this.load().then(()=>this._applyEdits(t))}openPorts(){return this.load().then(()=>this._connection.openPorts())}async queryFeatures(t,r={}){await this.load(r);const i=await this._connection.invoke("queryFeatures",t?t.toJSON():null,r);Jw(t,this.layer.spatialReference,i);const s=WS.fromJSON(i);if(!this._requiresClientGraphicMapping())return s;const n=this.layer.objectIdField;for(const o of s.features){const l=o.attributes[n],c=this._idToClientGraphic.get(l);c&&(o.geometry=c.geometry)}return s.geometryType=this.layer.geometryType,s}async queryFeaturesJSON(t,r={}){if(this._requiresClientGraphicMapping())throw new O("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");await this.load(r);const i=await this._connection.invoke("queryFeatures",t?t.toJSON():null,r);return Jw(t,this.layer.spatialReference,i),i}queryFeatureCount(t,r={}){return this.load(r).then(()=>this._connection.invoke("queryFeatureCount",t?t.toJSON():null,r))}queryObjectIds(t,r={}){return this.load(r).then(()=>this._connection.invoke("queryObjectIds",t?t.toJSON():null,r))}queryExtent(t,r={}){return this.load(r).then(()=>this._connection.invoke("queryExtent",t?t.toJSON():null,r)).then(i=>({count:i.count,extent:it.fromJSON(i.extent)}))}querySnapping(t,r={}){return this.load(r).then(()=>this._connection.invoke("querySnapping",t,r))}async _applyEdits(t){if(!this._connection)throw new O("feature-layer-source:edit-failure","Memory source not loaded");const r=this.layer.objectIdField;let i=null;const s=[],n=[];await Promise.all([this._prepareClientMapping(t.addFeatures,null),this._prepareClientMapping(t.updateFeatures,null)]);const o=h=>"objectId"in h&&h.objectId!=null?h.objectId:"attributes"in h&&h.attributes[r]!=null?h.attributes[r]:null;if(t.addFeatures&&(i=this._prepareAddFeatures(t.addFeatures)),t.deleteFeatures)for(const h of t.deleteFeatures){const f=o(h);f!=null&&s.push(f)}const l=t.updateFeatures&&this._idToClientGraphic?new Map:null;if(t.updateFeatures){for(const h of t.updateFeatures)if(n.push(this._serializeFeature(h)),l){const f=o(h);f!=null&&l.set(f,h)}}hJ(i?i.features:null,n,this.layer.spatialReference);const{fullExtent:c,featureEditResults:p}=await this._connection.invoke("applyEdits",{adds:i?i.features:[],updates:n,deletes:s});return this.fullExtent=c,i&&i.finish(p.uidToObjectId),this._updateClientGraphicIds(l,p),this._createEditsResult(p)}async _prepareClientMapping(t,r){if(this._layerOrSourceGeometryType!=="mesh"||t==null)return;const i=[];for(const{geometry:s}of t)s==null||s.type!=="mesh"||s.hasExtent||s.loaded||i.push(s.load({signal:r}));i.length&&await Promise.all(i)}_updateClientGraphicIds(t,r){if(this._idToClientGraphic){if(t)for(const i of r.updateResults){if(!i.success)continue;const s=t.get(i.objectId);s!=null&&this._addIdToClientGraphic(s)}for(const i of r.deleteResults)i.success&&this._idToClientGraphic.delete(i.objectId)}}_createEditsResult(t){return{addFeatureResults:t.addResults?t.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:t.updateResults?t.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:t.deleteResults?t.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(t){const r=t.success===!0?null:t.error||{code:void 0,description:void 0};return{objectId:t.objectId,globalId:t.globalId,error:r?new O("feature-layer-source:edit-failure",r.description,{code:r.code}):null}}_prepareAddFeatures(t){const r=new Map,i=new Array(t.length);let s=null;for(let o=0;o<t.length;o++){const l=t[o],c=this._serializeFeature(l);s||l.geometry==null||(s=l.geometry.type),i[o]=c,r.set(`${c.uid}`,l)}const n=this;return{features:i,inferredGeometryType:s,finish(o){const l=n.sourceJSON.objectIdField;for(const c in o){const p=o[c],h=r.get(c);h&&(h.attributes||(h.attributes={}),p===-1?delete h.attributes[l]:h.attributes[l]=p,n._addIdToClientGraphic(h))}}}}_addIdToClientGraphic(t){var s;if(!this._idToClientGraphic)return;const r=this.sourceJSON.objectIdField,i=(s=t.attributes)==null?void 0:s[r];i!=null&&this._idToClientGraphic.set(i,t)}get _layerOrSourceGeometryType(){var t,r;return((t=this.layer)==null?void 0:t.geometryType)??((r=this.sourceJSON)==null?void 0:r.geometryType)}_requiresClientGraphicMapping(){return this._geometryTypeRequiresClientGraphicMapping(this._layerOrSourceGeometryType)}_geometryRequiresClientGraphicMapping(t){return this._geometryTypeRequiresClientGraphicMapping(t.type)}_geometryTypeRequiresClientGraphicMapping(t){return t==="mesh"||t==="multipatch"||t==="extent"}_serializeFeature(t){const{attributes:r}=t,i=this._geometryForSerialization(t),s=($J++).toString();return i?{uid:s,geometry:i.toJSON(),attributes:r}:{uid:s,attributes:r}}_geometryForSerialization(t){const{geometry:r}=t;return r==null?null:this._geometryRequiresClientGraphicMapping(r)?r.extent?xn.fromExtent(r.extent):null:r}async _startWorker(t){this._connection=await dJ("MemorySourceWorker",{strategy:k("feature-layers-workers")?"dedicated":"local",signal:t,registryTarget:this});const{fields:r,spatialReference:i,objectIdField:s,hasM:n,hasZ:o,timeInfo:l,dateFieldsTimeZone:c}=this.layer,p=this.layer.originOf("spatialReference")==="defaults";await this._prepareClientMapping(this.items,t);const h=this._prepareAddFeatures(this.items);this.addHandles(this.on("before-changes",g=>{G.getLogger(this).error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),g.preventDefault()}));const f={features:h.features,fields:r==null?void 0:r.map(g=>g.toJSON()),geometryType:AI.toJSON(this._workerGeometryType),hasM:this._layerOrSourceGeometryType!=="mesh"&&n,hasZ:this._layerOrSourceGeometryType==="mesh"||o,objectIdField:s,spatialReference:p?null:i&&i.toJSON(),timeInfo:(l==null?void 0:l.toJSON())??null,dateFieldsTimeZone:c},y=await this._connection.invoke("load",f,{signal:t});for(const g of y.warnings)G.getLogger(this.layer).warn("#load()",`${g.message} (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{warning:g});y.featureErrors.length&&G.getLogger(this.layer).warn("#load()",`Encountered ${y.featureErrors.length} validation errors while loading features. (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{errors:y.featureErrors});const m=y.layerDefinition;this._geometryTypeRequiresClientGraphicMapping(h.inferredGeometryType)&&(m.geometryType=AI.toJSON(h.inferredGeometryType)),this.sourceJSON=m,this._requiresClientGraphicMapping()&&(this._idToClientGraphic=new Map),h.finish(y.assignedObjectIds)}};a([NC({Type:ni,ensureType:Zt(ni)})],dn.prototype,"itemType",void 0),a([u()],dn.prototype,"type",void 0),a([u({constructOnly:!0})],dn.prototype,"layer",void 0),a([u({readOnly:!0})],dn.prototype,"_workerGeometryType",null),a([u()],dn.prototype,"sourceJSON",void 0),dn=a([_("esri.layers.graphics.sources.MemorySource")],dn);function SJ(e){return"portalItem"in e}const xJ=e=>{let t=class extends e{get apiKey(){var r;return this._isOverridden("apiKey")?this._get("apiKey"):SJ(this)?(r=this.portalItem)==null?void 0:r.apiKey:null}set apiKey(r){r!=null?this._override("apiKey",r):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return a([u({type:String})],t.prototype,"apiKey",null),t=a([_("esri.layers.mixins.APIKeyMixin")],t),t},YL={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",knowledgegraphserver:"KnowledgeGraphServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer","3dtilesserver":"3DTilesServer",videoserver:"VideoServer"},QL=Object.values(YL),KL=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${QL.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),IJ=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^/\\n]+)\\/(${QL.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),TJ=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function ede(e){return KL.test(e)}function Eh(e){if(e==null)return null;const t=Yt(e),r=(t==null?void 0:t.path.match(KL))||(t==null?void 0:t.path.match(IJ));if(!r)return null;const[,i,s,n,o]=r,l=s.indexOf("/");return{title:HS(l!==-1?s.slice(l+1):s),serverType:YL[n.toLowerCase()],sublayer:o!=null&&o!==""?parseInt(o,10):null,url:{path:i}}}function MJ(e){const t=Yt(e).path.match(TJ);return t?{serviceUrl:t[1],sublayerId:Number(t[2])}:null}function HS(e){return(e=e.replaceAll(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function EJ(e,t){const r=[];if(e){const i=Eh(e);i!=null&&i.title&&r.push(i.title)}if(t){const i=HS(t);r.push(i)}if(r.length===2){if(r[0].toLowerCase().includes(r[1].toLowerCase()))return r[0];if(r[1].toLowerCase().includes(r[0].toLowerCase()))return r[1]}return r.join(" - ")}function XL(e){let t=Ii(e,!0);return!!t&&(t=t.toLowerCase(),t.endsWith(".arcgis.com")&&(t.startsWith("services")||t.startsWith("tiles")||t.startsWith("features")))}function AJ(e,t){return e&&aF(lF(e,t))}function CJ(e){let{url:t}=e;if(!t)return{url:t};t=lF(t,e.logger);const r=Yt(t),i=Eh(r.path);let s;if(i!=null)i.sublayer!=null&&e.layer.layerId==null&&(s=i.sublayer),t=i.url.path;else if(e.nonStandardUrlAllowed){const n=MJ(r.path);n!=null&&(t=n.serviceUrl,s=n.sublayerId)}return{url:aF(t),layerId:s}}function OJ(e,t,r,i,s){dl(t,i,"url",s),i.url&&e.layerId!=null&&(i.url=rl(i.url,r,e.layerId.toString()))}function tde(e){if(!e)return!1;const t=e.toLowerCase(),r=t.includes("/services/"),i=t.includes("/mapserver/wmsserver"),s=t.includes("/imageserver/wmsserver"),n=t.includes("/wmsserver");return r&&(i||s||n)}const FJ=e=>{let t=class extends e{get title(){if(this._get("title")&&this.originOf("title")!=="defaults")return this._get("title");if(this.url){const r=Eh(this.url);if(r!=null&&r.title)return r.title}return this._get("title")||""}set title(r){this._set("title",r)}set url(r){this._set("url",AJ(r,G.getLogger(this)))}};return a([u()],t.prototype,"title",null),a([u({type:String})],t.prototype,"url",null),t=a([_("esri.layers.mixins.ArcGISService")],t),t};function Jg(){const e=new Float32Array(16);return e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function kJ(e){const t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function PJ(e,t,r,i,s,n,o,l,c,p,h,f,y,m,g,b){const w=new Float32Array(16);return w[0]=e,w[1]=t,w[2]=r,w[3]=i,w[4]=s,w[5]=n,w[6]=o,w[7]=l,w[8]=c,w[9]=p,w[10]=h,w[11]=f,w[12]=y,w[13]=m,w[14]=g,w[15]=b,w}function LJ(e,t){return new Float32Array(e,t,16)}const NJ=Jg();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:NJ,clone:kJ,create:Jg,createView:LJ,fromValues:PJ},Symbol.toStringTag,{value:"Module"}));function eN(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Ho(e,t,r,i,s,n,o,l,c,p,h,f,y,m,g,b,w){return e[0]=t,e[1]=r,e[2]=i,e[3]=s,e[4]=n,e[5]=o,e[6]=l,e[7]=c,e[8]=p,e[9]=h,e[10]=f,e[11]=y,e[12]=m,e[13]=g,e[14]=b,e[15]=w,e}function Zg(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Jo(e,t){if(e===t){const r=t[1],i=t[2],s=t[3],n=t[6],o=t[7],l=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=i,e[9]=n,e[11]=t[14],e[12]=s,e[13]=o,e[14]=l}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function RJ(e,t){return tN(e,t)||Zg(e),e}function tN(e,t){const r=t[0],i=t[1],s=t[2],n=t[3],o=t[4],l=t[5],c=t[6],p=t[7],h=t[8],f=t[9],y=t[10],m=t[11],g=t[12],b=t[13],w=t[14],S=t[15],x=r*l-i*o,E=r*c-s*o,C=r*p-n*o,P=i*c-s*l,L=i*p-n*l,V=s*p-n*c,q=h*b-f*g,H=h*w-y*g,Y=h*S-m*g,se=f*w-y*b,de=f*S-m*b,De=y*S-m*w;let pe=x*De-E*de+C*se+P*Y-L*H+V*q;return pe?(pe=1/pe,e[0]=(l*De-c*de+p*se)*pe,e[1]=(s*de-i*De-n*se)*pe,e[2]=(b*V-w*L+S*P)*pe,e[3]=(y*L-f*V-m*P)*pe,e[4]=(c*Y-o*De-p*H)*pe,e[5]=(r*De-s*Y+n*H)*pe,e[6]=(w*C-g*V-S*E)*pe,e[7]=(h*V-y*C+m*E)*pe,e[8]=(o*de-l*Y+p*q)*pe,e[9]=(i*Y-r*de-n*q)*pe,e[10]=(g*L-b*C+S*x)*pe,e[11]=(f*C-h*L-m*x)*pe,e[12]=(l*H-o*se-c*q)*pe,e[13]=(r*se-i*H+s*q)*pe,e[14]=(b*E-g*P-w*x)*pe,e[15]=(h*P-f*E+y*x)*pe,e):null}function jJ(e,t){const r=t[0],i=t[1],s=t[2],n=t[3],o=t[4],l=t[5],c=t[6],p=t[7],h=t[8],f=t[9],y=t[10],m=t[11],g=t[12],b=t[13],w=t[14],S=t[15];return e[0]=l*(y*S-m*w)-f*(c*S-p*w)+b*(c*m-p*y),e[1]=-(i*(y*S-m*w)-f*(s*S-n*w)+b*(s*m-n*y)),e[2]=i*(c*S-p*w)-l*(s*S-n*w)+b*(s*p-n*c),e[3]=-(i*(c*m-p*y)-l*(s*m-n*y)+f*(s*p-n*c)),e[4]=-(o*(y*S-m*w)-h*(c*S-p*w)+g*(c*m-p*y)),e[5]=r*(y*S-m*w)-h*(s*S-n*w)+g*(s*m-n*y),e[6]=-(r*(c*S-p*w)-o*(s*S-n*w)+g*(s*p-n*c)),e[7]=r*(c*m-p*y)-o*(s*m-n*y)+h*(s*p-n*c),e[8]=o*(f*S-m*b)-h*(l*S-p*b)+g*(l*m-p*f),e[9]=-(r*(f*S-m*b)-h*(i*S-n*b)+g*(i*m-n*f)),e[10]=r*(l*S-p*b)-o*(i*S-n*b)+g*(i*p-n*l),e[11]=-(r*(l*m-p*f)-o*(i*m-n*f)+h*(i*p-n*l)),e[12]=-(o*(f*w-y*b)-h*(l*w-c*b)+g*(l*y-c*f)),e[13]=r*(f*w-y*b)-h*(i*w-s*b)+g*(i*y-s*f),e[14]=-(r*(l*w-c*b)-o*(i*w-s*b)+g*(i*c-s*l)),e[15]=r*(l*y-c*f)-o*(i*y-s*f)+h*(i*c-s*l),e}function DJ(e){const t=e[0],r=e[1],i=e[2],s=e[3],n=e[4],o=e[5],l=e[6],c=e[7],p=e[8],h=e[9],f=e[10],y=e[11],m=e[12],g=e[13],b=e[14],w=e[15];return(t*o-r*n)*(f*w-y*b)-(t*l-i*n)*(h*w-y*g)+(t*c-s*n)*(h*b-f*g)+(r*l-i*o)*(p*w-y*m)-(r*c-s*o)*(p*b-f*m)+(i*c-s*l)*(p*g-h*m)}function rN(e,t,r){const i=t[0],s=t[1],n=t[2],o=t[3],l=t[4],c=t[5],p=t[6],h=t[7],f=t[8],y=t[9],m=t[10],g=t[11],b=t[12],w=t[13],S=t[14],x=t[15];let E=r[0],C=r[1],P=r[2],L=r[3];return e[0]=E*i+C*l+P*f+L*b,e[1]=E*s+C*c+P*y+L*w,e[2]=E*n+C*p+P*m+L*S,e[3]=E*o+C*h+P*g+L*x,E=r[4],C=r[5],P=r[6],L=r[7],e[4]=E*i+C*l+P*f+L*b,e[5]=E*s+C*c+P*y+L*w,e[6]=E*n+C*p+P*m+L*S,e[7]=E*o+C*h+P*g+L*x,E=r[8],C=r[9],P=r[10],L=r[11],e[8]=E*i+C*l+P*f+L*b,e[9]=E*s+C*c+P*y+L*w,e[10]=E*n+C*p+P*m+L*S,e[11]=E*o+C*h+P*g+L*x,E=r[12],C=r[13],P=r[14],L=r[15],e[12]=E*i+C*l+P*f+L*b,e[13]=E*s+C*c+P*y+L*w,e[14]=E*n+C*p+P*m+L*S,e[15]=E*o+C*h+P*g+L*x,e}function VJ(e,t,r){const i=r[0],s=r[1],n=r[2];if(t===e)e[12]=t[0]*i+t[4]*s+t[8]*n+t[12],e[13]=t[1]*i+t[5]*s+t[9]*n+t[13],e[14]=t[2]*i+t[6]*s+t[10]*n+t[14],e[15]=t[3]*i+t[7]*s+t[11]*n+t[15];else{const o=t[0],l=t[1],c=t[2],p=t[3],h=t[4],f=t[5],y=t[6],m=t[7],g=t[8],b=t[9],w=t[10],S=t[11];e[0]=o,e[1]=l,e[2]=c,e[3]=p,e[4]=h,e[5]=f,e[6]=y,e[7]=m,e[8]=g,e[9]=b,e[10]=w,e[11]=S,e[12]=o*i+h*s+g*n+t[12],e[13]=l*i+f*s+b*n+t[13],e[14]=c*i+y*s+w*n+t[14],e[15]=p*i+m*s+S*n+t[15]}return e}function UJ(e,t,r){const i=r[0],s=r[1],n=r[2];return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*s,e[5]=t[5]*s,e[6]=t[6]*s,e[7]=t[7]*s,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function zJ(e,t,r,i){let s=i[0],n=i[1],o=i[2],l=Math.sqrt(s*s+n*n+o*o);if(l<=Bo())return void eN(e,t);l=1/l,s*=l,n*=l,o*=l;const c=Math.sin(r),p=Math.cos(r),h=1-p,f=t[0],y=t[1],m=t[2],g=t[3],b=t[4],w=t[5],S=t[6],x=t[7],E=t[8],C=t[9],P=t[10],L=t[11],V=s*s*h+p,q=n*s*h+o*c,H=o*s*h-n*c,Y=s*n*h-o*c,se=n*n*h+p,de=o*n*h+s*c,De=s*o*h+n*c,pe=n*o*h-s*c,nt=o*o*h+p;e[0]=f*V+b*q+E*H,e[1]=y*V+w*q+C*H,e[2]=m*V+S*q+P*H,e[3]=g*V+x*q+L*H,e[4]=f*Y+b*se+E*de,e[5]=y*Y+w*se+C*de,e[6]=m*Y+S*se+P*de,e[7]=g*Y+x*se+L*de,e[8]=f*De+b*pe+E*nt,e[9]=y*De+w*pe+C*nt,e[10]=m*De+S*pe+P*nt,e[11]=g*De+x*pe+L*nt,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15])}function qJ(e,t,r){const i=Math.sin(r),s=Math.cos(r),n=t[4],o=t[5],l=t[6],c=t[7],p=t[8],h=t[9],f=t[10],y=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=n*s+p*i,e[5]=o*s+h*i,e[6]=l*s+f*i,e[7]=c*s+y*i,e[8]=p*s-n*i,e[9]=h*s-o*i,e[10]=f*s-l*i,e[11]=y*s-c*i,e}function GJ(e,t,r){const i=Math.sin(r),s=Math.cos(r),n=t[0],o=t[1],l=t[2],c=t[3],p=t[8],h=t[9],f=t[10],y=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=n*s-p*i,e[1]=o*s-h*i,e[2]=l*s-f*i,e[3]=c*s-y*i,e[8]=n*i+p*s,e[9]=o*i+h*s,e[10]=l*i+f*s,e[11]=c*i+y*s,e}function BJ(e,t,r){const i=Math.sin(r),s=Math.cos(r),n=t[0],o=t[1],l=t[2],c=t[3],p=t[4],h=t[5],f=t[6],y=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=n*s+p*i,e[1]=o*s+h*i,e[2]=l*s+f*i,e[3]=c*s+y*i,e[4]=p*s-n*i,e[5]=h*s-o*i,e[6]=f*s-l*i,e[7]=y*s-c*i,e}function WJ(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function HJ(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function JJ(e,t,r){if(t===0)return Zg(e);let i=r[0],s=r[1],n=r[2],o=Math.sqrt(i*i+s*s+n*n);if(o<=Bo())return null;o=1/o,i*=o,s*=o,n*=o;const l=Math.sin(t),c=Math.cos(t),p=1-c;return e[0]=i*i*p+c,e[1]=s*i*p+n*l,e[2]=n*i*p-s*l,e[3]=0,e[4]=i*s*p-n*l,e[5]=s*s*p+c,e[6]=n*s*p+i*l,e[7]=0,e[8]=i*n*p+s*l,e[9]=s*n*p-i*l,e[10]=n*n*p+c,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function ZJ(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function YJ(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function QJ(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function iN(e,t,r){const i=t[0],s=t[1],n=t[2],o=t[3],l=i+i,c=s+s,p=n+n,h=i*l,f=i*c,y=i*p,m=s*c,g=s*p,b=n*p,w=o*l,S=o*c,x=o*p;return e[0]=1-(m+b),e[1]=f+x,e[2]=y-S,e[3]=0,e[4]=f-x,e[5]=1-(h+b),e[6]=g+w,e[7]=0,e[8]=y+S,e[9]=g-w,e[10]=1-(h+m),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function KJ(e,t){const r=XJ,i=-t[0],s=-t[1],n=-t[2],o=t[3],l=t[4],c=t[5],p=t[6],h=t[7],f=i*i+s*s+n*n+o*o;return f>0?(r[0]=2*(l*o+h*i+c*n-p*s)/f,r[1]=2*(c*o+h*s+p*i-l*n)/f,r[2]=2*(p*o+h*n+l*s-c*i)/f):(r[0]=2*(l*o+h*i+c*n-p*s),r[1]=2*(c*o+h*s+p*i-l*n),r[2]=2*(p*o+h*n+l*s-c*i)),iN(e,t,r),e}const XJ=Oc();function eZ(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function tZ(e,t){const r=t[0],i=t[1],s=t[2],n=t[4],o=t[5],l=t[6],c=t[8],p=t[9],h=t[10];return e[0]=Math.sqrt(r*r+i*i+s*s),e[1]=Math.sqrt(n*n+o*o+l*l),e[2]=Math.sqrt(c*c+p*p+h*h),e}function rZ(e,t){const r=t[0]+t[5]+t[10];let i=0;return r>0?(i=2*Math.sqrt(r+1),e[3]=.25*i,e[0]=(t[6]-t[9])/i,e[1]=(t[8]-t[2])/i,e[2]=(t[1]-t[4])/i):t[0]>t[5]&&t[0]>t[10]?(i=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/i,e[0]=.25*i,e[1]=(t[1]+t[4])/i,e[2]=(t[8]+t[2])/i):t[5]>t[10]?(i=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/i,e[0]=(t[1]+t[4])/i,e[1]=.25*i,e[2]=(t[6]+t[9])/i):(i=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/i,e[0]=(t[8]+t[2])/i,e[1]=(t[6]+t[9])/i,e[2]=.25*i),e}function iZ(e,t,r,i){const s=t[0],n=t[1],o=t[2],l=t[3],c=s+s,p=n+n,h=o+o,f=s*c,y=s*p,m=s*h,g=n*p,b=n*h,w=o*h,S=l*c,x=l*p,E=l*h,C=i[0],P=i[1],L=i[2];return e[0]=(1-(g+w))*C,e[1]=(y+E)*C,e[2]=(m-x)*C,e[3]=0,e[4]=(y-E)*P,e[5]=(1-(f+w))*P,e[6]=(b+S)*P,e[7]=0,e[8]=(m+x)*L,e[9]=(b-S)*L,e[10]=(1-(f+g))*L,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function sZ(e,t,r,i,s){const n=t[0],o=t[1],l=t[2],c=t[3],p=n+n,h=o+o,f=l+l,y=n*p,m=n*h,g=n*f,b=o*h,w=o*f,S=l*f,x=c*p,E=c*h,C=c*f,P=i[0],L=i[1],V=i[2],q=s[0],H=s[1],Y=s[2],se=(1-(b+S))*P,de=(m+C)*P,De=(g-E)*P,pe=(m-C)*L,nt=(1-(y+S))*L,Ei=(w+x)*L,oi=(g+E)*V,ht=(w-x)*V,zc=(1-(y+b))*V;return e[0]=se,e[1]=de,e[2]=De,e[3]=0,e[4]=pe,e[5]=nt,e[6]=Ei,e[7]=0,e[8]=oi,e[9]=ht,e[10]=zc,e[11]=0,e[12]=r[0]+q-(se*q+pe*H+oi*Y),e[13]=r[1]+H-(de*q+nt*H+ht*Y),e[14]=r[2]+Y-(De*q+Ei*H+zc*Y),e[15]=1,e}function nZ(e,t){const r=t[0],i=t[1],s=t[2],n=t[3],o=r+r,l=i+i,c=s+s,p=r*o,h=i*o,f=i*l,y=s*o,m=s*l,g=s*c,b=n*o,w=n*l,S=n*c;return e[0]=1-f-g,e[1]=h+S,e[2]=y-w,e[3]=0,e[4]=h-S,e[5]=1-p-g,e[6]=m+b,e[7]=0,e[8]=y+w,e[9]=m-b,e[10]=1-p-f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function oZ(e,t,r,i,s,n,o){const l=1/(r-t),c=1/(s-i),p=1/(n-o);return e[0]=2*n*l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*n*c,e[6]=0,e[7]=0,e[8]=(r+t)*l,e[9]=(s+i)*c,e[10]=(o+n)*p,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*n*2*p,e[15]=0,e}function aZ(e,t,r,i,s){const n=1/Math.tan(t/2);let o;return e[0]=n/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,s!=null&&s!==1/0?(o=1/(i-s),e[10]=(s+i)*o,e[14]=2*s*i*o):(e[10]=-1,e[14]=-2*i),e}function lZ(e,t,r,i){const s=Math.tan(t.upDegrees*Math.PI/180),n=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),l=Math.tan(t.rightDegrees*Math.PI/180),c=2/(o+l),p=2/(s+n);return e[0]=c,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=p,e[6]=0,e[7]=0,e[8]=-(o-l)*c*.5,e[9]=(s-n)*p*.5,e[10]=i/(r-i),e[11]=-1,e[12]=0,e[13]=0,e[14]=i*r/(r-i),e[15]=0,e}function uZ(e,t,r,i,s,n,o){const l=1/(t-r),c=1/(i-s),p=1/(n-o);return e[0]=-2*l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*c,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*p,e[11]=0,e[12]=(t+r)*l,e[13]=(s+i)*c,e[14]=(o+n)*p,e[15]=1,e}function cZ(e,t,r,i){const s=t[0],n=t[1],o=t[2];let l=s-r[0],c=n-r[1],p=o-r[2];const h=Bo();if(Math.abs(l)<h&&Math.abs(c)<h&&Math.abs(p)<h)return void Zg(e);let f=1/Math.sqrt(l*l+c*c+p*p);l*=f,c*=f,p*=f;const y=i[0],m=i[1],g=i[2];let b=m*p-g*c,w=g*l-y*p,S=y*c-m*l;f=Math.sqrt(b*b+w*w+S*S),f?(f=1/f,b*=f,w*=f,S*=f):(b=0,w=0,S=0);let x=c*S-p*w,E=p*b-l*S,C=l*w-c*b;f=Math.sqrt(x*x+E*E+C*C),f?(f=1/f,x*=f,E*=f,C*=f):(x=0,E=0,C=0),e[0]=b,e[1]=x,e[2]=l,e[3]=0,e[4]=w,e[5]=E,e[6]=c,e[7]=0,e[8]=S,e[9]=C,e[10]=p,e[11]=0,e[12]=-(b*s+w*n+S*o),e[13]=-(x*s+E*n+C*o),e[14]=-(l*s+c*n+p*o),e[15]=1}function dZ(e,t,r,i){const s=t[0],n=t[1],o=t[2],l=i[0],c=i[1],p=i[2];let h=s-r[0],f=n-r[1],y=o-r[2],m=h*h+f*f+y*y;m>0&&(m=1/Math.sqrt(m),h*=m,f*=m,y*=m);let g=c*y-p*f,b=p*h-l*y,w=l*f-c*h;return m=g*g+b*b+w*w,m>0&&(m=1/Math.sqrt(m),g*=m,b*=m,w*=m),e[0]=g,e[1]=b,e[2]=w,e[3]=0,e[4]=f*w-y*b,e[5]=y*g-h*w,e[6]=h*b-f*g,e[7]=0,e[8]=h,e[9]=f,e[10]=y,e[11]=0,e[12]=s,e[13]=n,e[14]=o,e[15]=1,e}function pZ(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function hZ(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2+e[9]**2+e[10]**2+e[11]**2+e[12]**2+e[13]**2+e[14]**2+e[15]**2)}function fZ(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e[9]=t[9]+r[9],e[10]=t[10]+r[10],e[11]=t[11]+r[11],e[12]=t[12]+r[12],e[13]=t[13]+r[13],e[14]=t[14]+r[14],e[15]=t[15]+r[15],e}function sN(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e[9]=t[9]-r[9],e[10]=t[10]-r[10],e[11]=t[11]-r[11],e[12]=t[12]-r[12],e[13]=t[13]-r[13],e[14]=t[14]-r[14],e[15]=t[15]-r[15],e}function yZ(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e[9]=t[9]*r,e[10]=t[10]*r,e[11]=t[11]*r,e[12]=t[12]*r,e[13]=t[13]*r,e[14]=t[14]*r,e[15]=t[15]*r,e}function mZ(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e[4]=t[4]+r[4]*i,e[5]=t[5]+r[5]*i,e[6]=t[6]+r[6]*i,e[7]=t[7]+r[7]*i,e[8]=t[8]+r[8]*i,e[9]=t[9]+r[9]*i,e[10]=t[10]+r[10]*i,e[11]=t[11]+r[11]*i,e[12]=t[12]+r[12]*i,e[13]=t[13]+r[13]*i,e[14]=t[14]+r[14]*i,e[15]=t[15]+r[15]*i,e}function gZ(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function vZ(e,t){if(e===t)return!0;const r=e[0],i=e[1],s=e[2],n=e[3],o=e[4],l=e[5],c=e[6],p=e[7],h=e[8],f=e[9],y=e[10],m=e[11],g=e[12],b=e[13],w=e[14],S=e[15],x=t[0],E=t[1],C=t[2],P=t[3],L=t[4],V=t[5],q=t[6],H=t[7],Y=t[8],se=t[9],de=t[10],De=t[11],pe=t[12],nt=t[13],Ei=t[14],oi=t[15],ht=Bo();return Math.abs(r-x)<=ht*Math.max(1,Math.abs(r),Math.abs(x))&&Math.abs(i-E)<=ht*Math.max(1,Math.abs(i),Math.abs(E))&&Math.abs(s-C)<=ht*Math.max(1,Math.abs(s),Math.abs(C))&&Math.abs(n-P)<=ht*Math.max(1,Math.abs(n),Math.abs(P))&&Math.abs(o-L)<=ht*Math.max(1,Math.abs(o),Math.abs(L))&&Math.abs(l-V)<=ht*Math.max(1,Math.abs(l),Math.abs(V))&&Math.abs(c-q)<=ht*Math.max(1,Math.abs(c),Math.abs(q))&&Math.abs(p-H)<=ht*Math.max(1,Math.abs(p),Math.abs(H))&&Math.abs(h-Y)<=ht*Math.max(1,Math.abs(h),Math.abs(Y))&&Math.abs(f-se)<=ht*Math.max(1,Math.abs(f),Math.abs(se))&&Math.abs(y-de)<=ht*Math.max(1,Math.abs(y),Math.abs(de))&&Math.abs(m-De)<=ht*Math.max(1,Math.abs(m),Math.abs(De))&&Math.abs(g-pe)<=ht*Math.max(1,Math.abs(g),Math.abs(pe))&&Math.abs(b-nt)<=ht*Math.max(1,Math.abs(b),Math.abs(nt))&&Math.abs(w-Ei)<=ht*Math.max(1,Math.abs(w),Math.abs(Ei))&&Math.abs(S-oi)<=ht*Math.max(1,Math.abs(S),Math.abs(oi))}function bZ(e){const t=Bo(),r=e[0],i=e[1],s=e[2],n=e[4],o=e[5],l=e[6],c=e[8],p=e[9],h=e[10];return Math.abs(1-(r*r+n*n+c*c))<=t&&Math.abs(1-(i*i+o*o+p*p))<=t&&Math.abs(1-(s*s+l*l+h*h))<=t}function wZ(e){return e[0]===1&&e[1]===0&&e[2]===0&&e[4]===0&&e[5]===1&&e[6]===0&&e[8]===0&&e[9]===0&&e[10]===1}const _Z=rN,$Z=sN;Object.freeze(Object.defineProperty({__proto__:null,add:fZ,adjoint:jJ,copy:eN,determinant:DJ,equals:vZ,exactEquals:gZ,frob:hZ,fromQuat:nZ,fromQuat2:KJ,fromRotation:JJ,fromRotationTranslation:iN,fromRotationTranslationScale:iZ,fromRotationTranslationScaleOrigin:sZ,fromScaling:HJ,fromTranslation:WJ,fromXRotation:ZJ,fromYRotation:YJ,fromZRotation:QJ,frustum:oZ,getRotation:rZ,getScaling:tZ,getTranslation:eZ,hasIdentityRotation:wZ,identity:Zg,invert:tN,invertOrIdentity:RJ,isOrthoNormal:bZ,lookAt:cZ,mul:_Z,multiply:rN,multiplyScalar:yZ,multiplyScalarAndAdd:mZ,ortho:uZ,perspective:aZ,perspectiveFromFieldOfView:lZ,rotate:zJ,rotateX:qJ,rotateY:GJ,rotateZ:BJ,scale:UJ,set:Ho,str:pZ,sub:$Z,subtract:sN,targetTo:dZ,translate:VJ,transpose:Jo},Symbol.toStringTag,{value:"Module"}));const SZ=(e,t)=>{const r=Ho(e,t,0,0,0,0,t,0,0,0,0,t,0,0,0,0,1);return Jo(r,r)},xZ=(e,t)=>{const r=Ho(e,t,0,0,.5-.5*t,0,t,0,.5-.5*t,0,0,t,.5-.5*t,0,0,0,1);return Jo(r,r)},IZ=(e,t)=>{const r=1-t,i=Ho(e,.2126+.7874*r,.7152-.7152*r,.0722-.0722*r,0,.2126-.2126*r,.7152+.2848*r,.0722-.0722*r,0,.2126-.2126*r,.7152-.7152*r,.0722+.9278*r,0,0,0,0,1);return Jo(i,i)},TZ=(e,t)=>{const r=Math.sin(t*Math.PI/180),i=Math.cos(t*Math.PI/180),s=Ho(e,.213+.787*i-.213*r,.715-.715*i-.715*r,.072-.072*i+.928*r,0,.213-.213*i+.143*r,.715+.285*i+.14*r,.072-.072*i-.283*r,0,.213-.213*i-.787*r,.715-.715*i+.715*r,.072+.928*i+.072*r,0,0,0,0,1);return Jo(s,s)},MZ=(e,t)=>{const r=1-2*t,i=Ho(e,r,0,0,t,0,r,0,t,0,0,r,t,0,0,0,1);return Jo(i,i)},EZ=(e,t)=>{const r=Ho(e,.213+.787*t,.715-.715*t,.072-.072*t,0,.213-.213*t,.715+.285*t,.072-.072*t,0,.213-.213*t,.715-.715*t,.072+.928*t,0,0,0,0,1);return Jo(r,r)},AZ=(e,t)=>{const r=1-t,i=Ho(e,.393+.607*r,.769-.769*r,.189-.189*r,0,.349-.349*r,.686+.314*r,.168-.168*r,0,.272-.272*r,.534-.534*r,.131+.869*r,0,0,0,0,1);return Jo(i,i)};let nN=class oN{constructor(t,r,i){this.strength=t,this.radius=r,this.threshold=i,this.type="bloom"}interpolate(t,r,i){this.strength=Fr(t.strength,r.strength,i),this.radius=Fr(t.radius,r.radius,i),this.threshold=Fr(t.threshold,r.threshold,i)}clone(){return new oN(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:_p(this.radius),strength:this.strength,threshold:this.threshold}}},aN=class lN{constructor(t){this.radius=t,this.type="blur"}interpolate(t,r,i){this.radius=Math.round(Fr(t.radius,r.radius,i))}clone(){return new lN(this.radius)}toJSON(){return{type:"blur",radius:_p(this.radius)}}},Kw=class uN{constructor(t,r){this.type=t,this.amount=r,this.type!=="invert"&&this.type!=="grayscale"&&this.type!=="sepia"||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,r,i){this.amount=Fr(t.amount,r.amount,i),this._updateMatrix()}clone(){return new uN(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const t=this._colorMatrix||Jg();switch(this.type){case"brightness":this._colorMatrix=SZ(t,this.amount);break;case"contrast":this._colorMatrix=xZ(t,this.amount);break;case"grayscale":this._colorMatrix=IZ(t,this.amount);break;case"invert":this._colorMatrix=MZ(t,this.amount);break;case"saturate":this._colorMatrix=EZ(t,this.amount);break;case"sepia":this._colorMatrix=AZ(t,this.amount)}}},cN=class dN{constructor(t,r,i,s){this.offsetX=t,this.offsetY=r,this.blurRadius=i,this.color=s,this.type="drop-shadow"}interpolate(t,r,i){this.offsetX=Fr(t.offsetX,r.offsetX,i),this.offsetY=Fr(t.offsetY,r.offsetY,i),this.blurRadius=Fr(t.blurRadius,r.blurRadius,i),this.color[0]=Math.round(Fr(t.color[0],r.color[0],i)),this.color[1]=Math.round(Fr(t.color[1],r.color[1],i)),this.color[2]=Math.round(Fr(t.color[2],r.color[2],i)),this.color[3]=Fr(t.color[3],r.color[3],i)}clone(){return new dN(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const t=[...this.color];return t[3]*=255,{type:"drop-shadow",xoffset:_p(this.offsetX),yoffset:_p(this.offsetY),blurRadius:_p(this.blurRadius),color:t}}},pN=class hN{constructor(t){this.angle=t,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,r,i){this.angle=Fr(t.angle,r.angle,i),this._updateMatrix()}clone(){return new hN(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const t=this._colorMatrix||Jg();this._colorMatrix=TZ(t,this.angle)}},fN=class yN{constructor(t){this.amount=t,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(t,r,i){this.amount=Fr(t.amount,r.amount,i)}clone(){return new yN(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}};function Fr(e,t,r){return e+(t-e)*r}function _p(e){return Math.round(1e3*Mi(e))/1e3}function CZ(e){switch(e.type){case"grayscale":case"sepia":case"invert":return new Kw(e.type,0);case"saturate":case"brightness":case"contrast":return new Kw(e.type,1);case"opacity":return new fN(1);case"hue-rotate":return new pN(0);case"blur":return new aN(0);case"drop-shadow":return new cN(0,0,0,[...X$("transparent")]);case"bloom":return new nN(0,0,1)}}function OZ(e,t){const r=e.length>t.length?e:t;return(e.length>t.length?t:e).every((i,s)=>i.type===r[s].type)}function FZ(e,t){const r=e.length>t.length?e:t,i=e.length>t.length?t:e;for(let s=i.length;s<r.length;s++)i.push(CZ(r[s]))}function kZ(e){const t=e[0];return!!t&&"type"in t}function PZ(e,t){function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r}function Bu(e,t,r,i){var s=Error.call(this,e);return Object.setPrototypeOf&&Object.setPrototypeOf(s,Bu.prototype),s.expected=t,s.found=r,s.location=i,s.name="SyntaxError",s}function tv(e,t,r){return r=r||" ",e.length>t?e:(t-=e.length,e+(r+=r.repeat(t)).slice(0,t))}function LZ(e,t){var r,i={},s=(t=t!==void 0?t:{}).grammarSource,n={start:D2},o=D2,l="none",c=")",p=",",h="(",f="%",y="px",m="cm",g="mm",b="in",w="pt",S="pc",x="deg",E="rad",C="grad",P="turn",L="#",V=".",q="e",H=/^[ \t\n\r]/,Y=/^[a-z\-]/,se=/^[0-9a-fA-F]/,de=/^[+\-]/,De=/^[0-9]/,pe=Gs("none"),nt=Ot("none",!1),Ei=Ot(")",!1),oi=Ot(",",!1),ht=Gs("whitespace"),zc=qc([" ","	",`
`,"\r"],!1,!1),e4=Gs("function"),t4=Ot("(",!1),r4=Gs("identifier"),P2=qc([["a","z"],"-"],!1,!1),i4=Gs("percentage"),s4=Ot("%",!1),n4=Gs("length"),o4=Ot("px",!1),a4=Ot("cm",!1),l4=Ot("mm",!1),u4=Ot("in",!1),c4=Ot("pt",!1),d4=Ot("pc",!1),p4=Gs("angle"),h4=Ot("deg",!1),f4=Ot("rad",!1),y4=Ot("grad",!1),m4=Ot("turn",!1),g4=Gs("number"),v4=Gs("color"),b4=Ot("#",!1),L2=qc([["0","9"],["a","f"],["A","F"]],!1,!1),N2=qc(["+","-"],!1,!1),Fn=qc([["0","9"]],!1,!1),w4=Ot(".",!1),_4=Ot("e",!1),$4=function(){return[]},S4=function($,N){return{type:"function",name:$,parameters:N||[]}},x4=function($,N){return N.length>0?ij($,N,3):[$]},I4=function($){return{type:"quantity",value:$.value,unit:$.unit}},T4=function($){return{type:"color",colorType:$.type,value:$.value}},M4=function($){return $},E4=function(){return Vh()},A4=function($){return{value:$,unit:"%"}},C4=function($){return{value:$,unit:"px"}},O4=function($){return{value:$,unit:"cm"}},F4=function($){return{value:$,unit:"mm"}},k4=function($){return{value:$,unit:"in"}},P4=function($){return{value:$,unit:"pt"}},L4=function($){return{value:$,unit:"pc"}},N4=function($){return{value:$,unit:"deg"}},R4=function($){return{value:$,unit:"rad"}},j4=function($){return{value:$,unit:"grad"}},D4=function($){return{value:$,unit:"turn"}},V4=function($){return{value:$,unit:null}},U4=function(){return{type:"hex",value:Vh()}},z4=function($){return{type:"function",value:$}},q4=function(){return{type:"named",value:Vh()}},G4=function(){return parseFloat(Vh())},F=0|t.peg$currPos,Qe=F,Al=[{line:1,column:1}],Ai=F,Dh=t.peg$maxFailExpected||[],te=0|t.peg$silentFails;if(t.startRule){if(!(t.startRule in n))throw new Error(`Can't start parsing from rule "`+t.startRule+'".');o=n[t.startRule]}function Vh(){return e.substring(Qe,F)}function Ot($,N){return{type:"literal",text:$,ignoreCase:N}}function qc($,N,z){return{type:"class",parts:$,inverted:N,ignoreCase:z}}function B4(){return{type:"end"}}function Gs($){return{type:"other",description:$}}function R2($){var N,z=Al[$];if(z)return z;if($>=Al.length)N=Al.length-1;else for(N=$;!Al[--N];);for(z={line:(z=Al[N]).line,column:z.column};N<$;)e.charCodeAt(N)===10?(z.line++,z.column=1):z.column++,N++;return Al[$]=z,z}function j2($,N,z){var oe=R2($),Ue=R2(N);return{source:s,start:{offset:$,line:oe.line,column:oe.column},end:{offset:N,line:Ue.line,column:Ue.column}}}function ce($){F<Ai||(F>Ai&&(Ai=F,Dh=[]),Dh.push($))}function W4($,N,z){return new Bu(Bu.buildMessage($,N),$,N,z)}function D2(){var $;return($=H4())===i&&($=J4()),$}function H4(){var $,N;return te++,$=F,Ft(),e.substr(F,4)===l?(N=l,F+=4):(N=i,te===0&&ce(nt)),N!==i?(Ft(),Qe=$,$=$4()):(F=$,$=i),te--,$===i&&te===0&&ce(pe),$}function J4(){var $,N;if($=[],(N=u0())!==i)for(;N!==i;)$.push(N),N=u0();else $=i;return $}function u0(){var $,N,z,oe;return $=F,Ft(),(N=Y4())!==i?(Ft(),(z=Z4())===i&&(z=null),Ft(),e.charCodeAt(F)===41?(oe=c,F++):(oe=i,te===0&&ce(Ei)),oe!==i?(Ft(),Qe=$,$=S4(N,z)):(F=$,$=i)):(F=$,$=i),$}function Z4(){var $,N,z,oe,Ue,ot,Mt,$r;if($=F,(N=c0())!==i){for(z=[],oe=F,Ue=Ft(),e.charCodeAt(F)===44?(ot=p,F++):(ot=i,te===0&&ce(oi)),ot===i&&(ot=null),Mt=Ft(),($r=c0())!==i?oe=Ue=[Ue,ot,Mt,$r]:(F=oe,oe=i);oe!==i;)z.push(oe),oe=F,Ue=Ft(),e.charCodeAt(F)===44?(ot=p,F++):(ot=i,te===0&&ce(oi)),ot===i&&(ot=null),Mt=Ft(),($r=c0())!==i?oe=Ue=[Ue,ot,Mt,$r]:(F=oe,oe=i);Qe=$,$=x4(N,z)}else F=$,$=i;return $}function c0(){var $,N;return $=F,(N=Q4())===i&&(N=K4())===i&&(N=X4())===i&&(N=ej()),N!==i&&(Qe=$,N=I4(N)),($=N)===i&&($=F,(N=tj())!==i&&(Qe=$,N=T4(N)),$=N),$}function Ft(){var $,N;for(te++,$=[],N=e.charAt(F),H.test(N)?F++:(N=i,te===0&&ce(zc));N!==i;)$.push(N),N=e.charAt(F),H.test(N)?F++:(N=i,te===0&&ce(zc));return te--,N=i,te===0&&ce(ht),$}function Y4(){var $,N,z;return te++,$=F,(N=V2())!==i?(e.charCodeAt(F)===40?(z=h,F++):(z=i,te===0&&ce(t4)),z!==i?(Qe=$,$=M4(N)):(F=$,$=i)):(F=$,$=i),te--,$===i&&(N=i,te===0&&ce(e4)),$}function V2(){var $,N,z;if(te++,$=F,N=[],z=e.charAt(F),Y.test(z)?F++:(z=i,te===0&&ce(P2)),z!==i)for(;z!==i;)N.push(z),z=e.charAt(F),Y.test(z)?F++:(z=i,te===0&&ce(P2));else N=i;return N!==i&&(Qe=$,N=E4()),te--,($=N)===i&&(N=i,te===0&&ce(r4)),$}function Q4(){var $,N,z;return te++,$=F,Ft(),(N=ai())!==i?(e.charCodeAt(F)===37?(z=f,F++):(z=i,te===0&&ce(s4)),z!==i?(Qe=$,$=A4(N)):(F=$,$=i)):(F=$,$=i),te--,$===i&&te===0&&ce(i4),$}function K4(){var $,N,z;return te++,$=F,Ft(),(N=ai())!==i?(e.substr(F,2)===y?(z=y,F+=2):(z=i,te===0&&ce(o4)),z!==i?(Qe=$,$=C4(N)):(F=$,$=i)):(F=$,$=i),$===i&&($=F,Ft(),(N=ai())!==i?(e.substr(F,2)===m?(z=m,F+=2):(z=i,te===0&&ce(a4)),z!==i?(Qe=$,$=O4(N)):(F=$,$=i)):(F=$,$=i),$===i&&($=F,Ft(),(N=ai())!==i?(e.substr(F,2)===g?(z=g,F+=2):(z=i,te===0&&ce(l4)),z!==i?(Qe=$,$=F4(N)):(F=$,$=i)):(F=$,$=i),$===i&&($=F,Ft(),(N=ai())!==i?(e.substr(F,2)===b?(z=b,F+=2):(z=i,te===0&&ce(u4)),z!==i?(Qe=$,$=k4(N)):(F=$,$=i)):(F=$,$=i),$===i&&($=F,Ft(),(N=ai())!==i?(e.substr(F,2)===w?(z=w,F+=2):(z=i,te===0&&ce(c4)),z!==i?(Qe=$,$=P4(N)):(F=$,$=i)):(F=$,$=i),$===i&&($=F,Ft(),(N=ai())!==i?(e.substr(F,2)===S?(z=S,F+=2):(z=i,te===0&&ce(d4)),z!==i?(Qe=$,$=L4(N)):(F=$,$=i)):(F=$,$=i)))))),te--,$===i&&te===0&&ce(n4),$}function X4(){var $,N,z;return te++,$=F,(N=ai())!==i?(e.substr(F,3)===x?(z=x,F+=3):(z=i,te===0&&ce(h4)),z!==i?(Qe=$,$=N4(N)):(F=$,$=i)):(F=$,$=i),$===i&&($=F,(N=ai())!==i?(e.substr(F,3)===E?(z=E,F+=3):(z=i,te===0&&ce(f4)),z!==i?(Qe=$,$=R4(N)):(F=$,$=i)):(F=$,$=i),$===i&&($=F,(N=ai())!==i?(e.substr(F,4)===C?(z=C,F+=4):(z=i,te===0&&ce(y4)),z!==i?(Qe=$,$=j4(N)):(F=$,$=i)):(F=$,$=i),$===i&&($=F,(N=ai())!==i?(e.substr(F,4)===P?(z=P,F+=4):(z=i,te===0&&ce(m4)),z!==i?(Qe=$,$=D4(N)):(F=$,$=i)):(F=$,$=i)))),te--,$===i&&(N=i,te===0&&ce(p4)),$}function ej(){var $,N;return te++,$=F,Ft(),(N=ai())!==i?(Qe=$,$=V4(N)):(F=$,$=i),te--,$===i&&te===0&&ce(g4),$}function tj(){var $,N,z,oe;if(te++,$=F,e.charCodeAt(F)===35?(N=L,F++):(N=i,te===0&&ce(b4)),N!==i){if(z=[],oe=e.charAt(F),se.test(oe)?F++:(oe=i,te===0&&ce(L2)),oe!==i)for(;oe!==i;)z.push(oe),oe=e.charAt(F),se.test(oe)?F++:(oe=i,te===0&&ce(L2));else z=i;z!==i?(Qe=$,$=U4()):(F=$,$=i)}else F=$,$=i;return $===i&&($=F,(N=u0())!==i&&(Qe=$,N=z4(N)),($=N)===i&&($=F,(N=V2())!==i&&(Qe=$,N=q4()),$=N)),te--,$===i&&(N=i,te===0&&ce(v4)),$}function ai(){var $,N,z,oe,Ue,ot,Mt,$r;for($=F,N=e.charAt(F),de.test(N)?F++:(N=i,te===0&&ce(N2)),N===i&&(N=null),z=F,oe=[],Ue=e.charAt(F),De.test(Ue)?F++:(Ue=i,te===0&&ce(Fn));Ue!==i;)oe.push(Ue),Ue=e.charAt(F),De.test(Ue)?F++:(Ue=i,te===0&&ce(Fn));if(e.charCodeAt(F)===46?(Ue=V,F++):(Ue=i,te===0&&ce(w4)),Ue!==i){if(ot=[],Mt=e.charAt(F),De.test(Mt)?F++:(Mt=i,te===0&&ce(Fn)),Mt!==i)for(;Mt!==i;)ot.push(Mt),Mt=e.charAt(F),De.test(Mt)?F++:(Mt=i,te===0&&ce(Fn));else ot=i;ot!==i?z=oe=[oe,Ue,ot]:(F=z,z=i)}else F=z,z=i;if(z===i)if(z=[],oe=e.charAt(F),De.test(oe)?F++:(oe=i,te===0&&ce(Fn)),oe!==i)for(;oe!==i;)z.push(oe),oe=e.charAt(F),De.test(oe)?F++:(oe=i,te===0&&ce(Fn));else z=i;if(z!==i){if(oe=F,e.charCodeAt(F)===101?(Ue=q,F++):(Ue=i,te===0&&ce(_4)),Ue!==i){if(ot=e.charAt(F),de.test(ot)?F++:(ot=i,te===0&&ce(N2)),ot===i&&(ot=null),Mt=[],$r=e.charAt(F),De.test($r)?F++:($r=i,te===0&&ce(Fn)),$r!==i)for(;$r!==i;)Mt.push($r),$r=e.charAt(F),De.test($r)?F++:($r=i,te===0&&ce(Fn));else Mt=i;Mt!==i?oe=Ue=[Ue,ot,Mt]:(F=oe,oe=i)}else F=oe,oe=i;oe===i&&(oe=null),Qe=$,$=G4()}else F=$,$=i;return $}function rj($,N){return $.map(function(z){return z[N]})}function ij($,N,z){return[$].concat(rj(N,z))}if(r=o(),t.peg$library)return{peg$result:r,peg$currPos:F,peg$FAILED:i,peg$maxFailExpected:Dh,peg$maxFailPos:Ai};if(r!==i&&F===e.length)return r;throw r!==i&&F<e.length&&ce(B4()),W4(Dh,Ai<e.length?e.charAt(Ai):null,Ai<e.length?j2(Ai,Ai+1):j2(Ai,Ai))}function mN(e){if(!e||e.length===0)return null;if(typeof e=="string"){const r=rE(e);return r&&r.length!==0?r:null}const t=e.map(r=>{if(!Number.isFinite(r.scale)||r.scale<=0)throw new O("effect:invalid-scale","scale must be finite and greater than 0",{stop:r});return{scale:r.scale,effects:rE(r.value)}});t.sort((r,i)=>i.effects.length-r.effects.length);for(let r=0;r<t.length-1;r++){if(!OZ(t[r].effects,t[r+1].effects))throw new O("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:t[r].effects,b:t[r+1].effects});FZ(t[r].effects,t[r+1].effects)}return t.sort((r,i)=>i.scale-r.scale),t}function rE(e){let t;if(!e)return[];try{t=LZ(e)}catch(r){throw new O("effect:invalid-syntax","Invalid effect syntax",{value:e,error:r})}return t.map(r=>NZ(r))}function NZ(e){try{switch(e.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return RZ(e);case"opacity":return jZ(e);case"hue-rotate":return DZ(e);case"blur":return VZ(e);case"drop-shadow":return UZ(e);case"bloom":return zZ(e)}}catch(t){throw t.details.filter=e,t}throw new O("effect:unknown-effect",`Effect '${e.name}' is not supported`,{effect:e})}function RZ(e){let t=1;return Uc(e.parameters,1),e.parameters.length===1&&(t=Yi(e.parameters[0])),new Kw(e.name,t)}function jZ(e){let t=1;return Uc(e.parameters,1),e.parameters.length===1&&(t=Yi(e.parameters[0])),new fN(t)}function DZ(e){let t=0;return Uc(e.parameters,1),e.parameters.length===1&&(t=JZ(e.parameters[0])),new pN(t)}function VZ(e){let t=0;return Uc(e.parameters,1),e.parameters.length===1&&(t=YS(e.parameters[0]),Ah(t,e.parameters[0])),new aN(t)}function UZ(e){const t=[];let r=null;for(const i of e.parameters)if(i.type==="color"){if(t.length&&Object.freeze(t),r)throw new O("effect:type-error","Accepts only one color",{});r=ZZ(i)}else{const s=YS(i);if(Object.isFrozen(t))throw new O("effect:type-error","<length> parameters not consecutive",{lengths:t});t.push(s),t.length===3&&Ah(s,i)}if(t.length<2||t.length>3)throw new O("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${t.length}}`,{lengths:t});return new cN(t[0],t[1],t[2]||0,r||gN("black"))}function zZ(e){let t=1,r=0,i=0;return Uc(e.parameters,3),e.parameters[0]&&(t=Yi(e.parameters[0])),e.parameters[1]&&(r=YS(e.parameters[1]),Ah(r,e.parameters[1])),e.parameters[2]&&(i=Yi(e.parameters[2])),new nN(t,r,i)}function Uc(e,t){if(e.length>t)throw new O("effect:type-error",`Function supports up to ${t} parameters, Actual: ${e.length}`,{parameters:e})}function Yg(e){if(e.type==="color")return"<color>";if(e.unit){if(e.unit in ZS)return"<length>";if(e.unit in JS)return"<angle>";if(e.unit==="%")return"<percentage>"}return"<double>"}function Ah(e,t){if(e<0)throw new O("effect:type-error",`Negative values are not allowed, Actual: ${e}`,{term:t})}function qZ(e){if(e.type!=="quantity"||e.unit!==null)throw new O("effect:type-error",`Expected <double>, Actual: ${Yg(e)}`,{term:e})}function GZ(e){if(e.type!=="quantity"||e.unit!==null&&e.unit!=="%")throw new O("effect:type-error",`Expected <double> or <percentage>, Actual: ${Yg(e)}`,{term:e})}PZ(Bu,Error),Bu.prototype.format=function(e){var t="Error: "+this.message;if(this.location){var r,i=null;for(r=0;r<e.length;r++)if(e[r].source===this.location.source){i=e[r].text.split(/\r\n|\n|\r/g);break}var s=this.location.start,n=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(s):s,o=this.location.source+":"+n.line+":"+n.column;if(i){var l=this.location.end,c=tv("",n.line.toString().length," "),p=i[s.line-1],h=(s.line===l.line?l.column:p.length+1)-s.column||1;t+=`
 --> `+o+`
`+c+` |
`+n.line+" | "+p+`
`+c+" | "+tv("",s.column-1," ")+tv("",h,"^")}else t+=`
 at `+o}return t},Bu.buildMessage=function(e,t){var r={literal:function(p){return'"'+s(p.text)+'"'},class:function(p){var h=p.parts.map(function(f){return Array.isArray(f)?n(f[0])+"-"+n(f[1]):n(f)});return"["+(p.inverted?"^":"")+h.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(p){return p.description}};function i(p){return p.charCodeAt(0).toString(16).toUpperCase()}function s(p){return p.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(h){return"\\x0"+i(h)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(h){return"\\x"+i(h)})}function n(p){return p.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(h){return"\\x0"+i(h)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(h){return"\\x"+i(h)})}function o(p){return r[p.type](p)}function l(p){var h,f,y=p.map(o);if(y.sort(),y.length>0){for(h=1,f=1;h<y.length;h++)y[h-1]!==y[h]&&(y[f]=y[h],f++);y.length=f}switch(y.length){case 1:return y[0];case 2:return y[0]+" or "+y[1];default:return y.slice(0,-1).join(", ")+", or "+y[y.length-1]}}function c(p){return p?'"'+s(p)+'"':"end of input"}return"Expected "+l(e)+" but "+c(t)+" found."};const JS={deg:1,grad:.9,rad:180/Math.PI,turn:360};function BZ(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&JS[e.unit]!=null))throw new O("effect:type-error",`Expected <angle>, Actual: ${Yg(e)}`,{term:e})}const ZS={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function WZ(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&ZS[e.unit]!=null))throw new O("effect:type-error",`Expected <length>, Actual: ${Yg(e)}`,{term:e})}function Yi(e){GZ(e);const t=e.value;return Ah(t,e),e.unit==="%"?.01*t:t}function HZ(e){return qZ(e),Ah(e.value,e),e.value}function JZ(e){return BZ(e),e.value*JS[e.unit]||0}function YS(e){return WZ(e),e.value*ZS[e.unit]||0}function ZZ(e){switch(e.colorType){case"hex":return xz(e.value);case"named":return gN(e.value);case"function":return KZ(e.value)}}function gN(e){if(!Mk(e))throw new O("effect:unknown-color",`color '${e}' isn't valid`,{namedColor:e});return Sz(e)}const YZ=/^rgba?/i,QZ=/^hsla?/i;function KZ(e){if(Uc(e.parameters,4),YZ.test(e.name))return[Yi(e.parameters[0]),Yi(e.parameters[1]),Yi(e.parameters[2]),e.parameters[3]?Yi(e.parameters[3]):1];if(QZ.test(e.name))return Ek(HZ(e.parameters[0]),Yi(e.parameters[1]),Yi(e.parameters[2]),e.parameters[3]?Yi(e.parameters[3]):1);throw new O("effect:syntax-error",`Invalid color function '${e.name}'`,{colorFunction:e})}function Zp(e,t,r){var i;try{return eY(e)}catch(s){(i=r==null?void 0:r.messages)==null||i.push(s)}return null}function Yp(e,t,r,i){try{const s=XZ(e);pr(r,s,t)}catch(s){i.messages&&i.messages.push(s)}}function XZ(e){const t=mN(e);return t?kZ(t)?t.map(r=>r.toJSON()):t.map(({scale:r,effects:i})=>({scale:r,value:i.map(s=>s.toJSON())})):null}function eY(e){if(!e||e.length===0)return null;if(tY(e)){const t=[];for(const r of e)t.push({scale:r.scale,value:iE(r.value)});return t}return iE(e)}function tY(e){const t=e[0];return!!t&&"scale"in t}function iE(e){if(!(e!=null&&e.length))return"";const t=[];for(const r of e){let i=[];switch(r.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":i=[Bs(r,"amount")];break;case"blur":i=[Bs(r,"radius","pt")];break;case"hue-rotate":i=[Bs(r,"angle","deg")];break;case"drop-shadow":i=[Bs(r,"xoffset","pt"),Bs(r,"yoffset","pt"),Bs(r,"blurRadius","pt"),rY(r,"color")];break;case"bloom":i=[Bs(r,"strength"),Bs(r,"radius","pt"),Bs(r,"threshold")]}const s=`${r.type}(${i.filter(Boolean).join(" ")})`;mN(s),t.push(s)}return t.join(" ")}function Bs(e,t,r){if(e[t]==null)throw new O("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});return r?e[t]+r:""+e[t]}function rY(e,t){if(e[t]==null)throw new O("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});const r=e[t];return`rgba(${r[0]||0}, ${r[1]||0}, ${r[2]||0}, ${r[3]/255||0})`}const iY={type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:!0},"portal-item":{read:!0,write:!0}}}},sE={read:{reader:Zp},write:{allowNull:!0,writer:Yp}},sY={json:{read:!1,write:!1,origins:{"web-map":sE,"portal-item":sE}}},nY=e=>{let t=class extends e{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return a([u(iY)],t.prototype,"blendMode",void 0),a([u(sY)],t.prototype,"effect",void 0),t=a([_("esri.layers.mixins.BlendLayer")],t),t},oY=e=>{let t=class extends e{constructor(){super(...arguments),this.customParameters=null}};return a([u({type:Object,json:{write:{overridePolicy:r=>({enabled:!!(r&&Object.keys(r).length>0)})}}})],t.prototype,"customParameters",void 0),t=a([_("esri.layers.mixins.CustomParametersMixin")],t),t},aY="randomUUID"in crypto;function QS(){if(aY)return crypto.randomUUID();const e=crypto.getRandomValues(new Uint16Array(8));e[3]=4095&e[3]|16384,e[4]=16383&e[4]|32768;const t=r=>e[r].toString(16).padStart(4,"0");return t(0)+t(1)+"-"+t(2)+"-"+t(3)+"-"+t(4)+"-"+t(5)+t(6)+t(7)}function rde(){return`{${QS().toUpperCase()}}`}function lY(){return`{${QS()}}`}function uY(e){const t=e.toUpperCase();return e[0]!=="{"?`{${t}}`:t}const cY=lY(),vN=new Map,bN=new Map;async function ide(e,t,r){if(!e||!r)return!1;if(!t)return!0;const i=new URL(e).host;let s=vN.get(i);if(!s){const n=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,"");s=(await Ge(n,{responseType:"json",query:{f:"json"}})).data.defaultVersionName}return s===t}async function sde(e,t,r=!1){var n,o,l;if(!e||!t)return!0;const i=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),s=(n=bN.get(i))==null?void 0:n.entries();if(s){for(const[c,p]of s)if(p.name===t){const h=!((o=p.stack)!=null&&o.hasForwardEdits());if(!h&&r){const[{deleteForwardEdits:f},{default:y}]=await Promise.all([j(()=>import("./deleteForwardEdits-BC5PPGL4.js"),[]),j(()=>import("./DeleteForwardEditsParameters-S_lCgXkx.js"),[])]),m=await f(i,c,new y({sessionId:cY,moment:p.moment}));return m.success&&((l=p.stack)==null||l.clearForwardEdits()),m.success}return h}}return!0}function dY(e,t){var s;if(!e)return!1;const r=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),i=(s=bN.get(r))==null?void 0:s.entries();if(i){for(const[n,o]of i)if(o.name===t)return o.lockType==="edit"}return!1}const KS=new ph.EventEmitter;function pY(e){return KS.on("apply-edits",new WeakRef(e))}function hY(e){return KS.on("update-moment",new WeakRef(e))}function nde(e,t,r=null,i=!1){const s=No();return i=t==null||i,KS.emit("apply-edits",{serviceUrl:e,layerId:t,gdbVersion:r,mayReceiveServiceEdits:i,result:s.promise}),s}const wN=Symbol();function ode(e){return e!=null&&typeof e=="object"&&wN in e}function rd(e){return e!=null&&typeof e=="object"&&"gdbVersion"in e}function rv(e,t,r){const i=new URL(e).host,s=vN.get(i),n=o=>!o||o===s;return n(t)&&n(r)||t===r}const fY=e=>{var t;let r=class extends e{constructor(...i){super(...i),this[t]=!0,this._applyEditsHandler=s=>{const{serviceUrl:n,layerId:o,gdbVersion:l,mayReceiveServiceEdits:c,result:p}=s,h=n===this.url,f=o!=null&&this.layerId!=null&&o===this.layerId,y=rd(this),m=rd(this)&&rv(n,l,this.gdbVersion);if(!h||y&&!m||!f&&!c)return;const g=p.then(b=>{var x;if(this.lastEditsEventDate=new Date,f&&(b.addedFeatures.length||b.updatedFeatures.length||b.deletedFeatures.length||b.addedAttachments.length||b.updatedAttachments.length||b.deletedAttachments.length))return this.emit("edits",M(b)),b;const w=(x=b.editedFeatures)==null?void 0:x.find(({layerId:E})=>E===this.layerId);if(w){const{adds:E,updates:C,deletes:P}=w.editedFeatures,L={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:E?E.map(({attributes:V})=>({objectId:this.objectIdField&&V[this.objectIdField],globalId:this.globalIdField&&V[this.globalIdField]})):[],deletedFeatures:P?P.map(({attributes:V})=>({objectId:this.objectIdField&&V[this.objectIdField],globalId:this.globalIdField&&V[this.globalIdField]})):[],updatedFeatures:C?C.map(({current:{attributes:V}})=>({objectId:this.objectIdField&&V[this.objectIdField],globalId:this.globalIdField&&V[this.globalIdField]})):[],editedFeatures:M(b.editedFeatures),exceededTransferLimit:!1,historicMoment:M(b.historicMoment)};return this.emit("edits",L),L}const S={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:[],deletedFeatures:[],updatedFeatures:[],editedFeatures:M(b.editedFeatures),exceededTransferLimit:!1,historicMoment:M(b.historicMoment)};return"historicMoment"in this&&this._shouldUpdateHistoricMoment(n,l,S.historicMoment)&&this.emit("edits",S),S}).then(b=>("historicMoment"in this&&this._shouldUpdateHistoricMoment(n,l,b.historicMoment)&&(this.historicMoment=b.historicMoment),b));this.emit("apply-edits",{result:g})},this._updateMomentHandler=s=>{const{serviceUrl:n,gdbVersion:o,moment:l}=s,c=n===this.url,p=rd(this),h=rd(this)&&rv(n,o,this.gdbVersion),f=rd(this)&&!rv(n,this.gdbVersion,null);c&&p&&h&&f&&"historicMoment"in this&&this.historicMoment!==l&&(this.historicMoment=l)},this.when().then(()=>{this.addHandles(pY(this._applyEditsHandler)),"historicMoment"in this&&this.addHandles(hY(this._updateMomentHandler))},()=>{})}_shouldUpdateHistoricMoment(i,s,n){return"historicMoment"in this&&this.historicMoment!==n&&dY(i,s)}};return t=wN,a([u()],r.prototype,"lastEditsEventDate",void 0),r=a([_("esri.layers.mixins.EditBusLayer")],r),r};var Xw;let uu=Xw=class extends R{constructor(e){super(e),this.type="map-layer"}clone(){const{mapLayerId:e,gdbVersion:t}=this;return new Xw({mapLayerId:e,gdbVersion:t})}};a([re({mapLayer:"map-layer"})],uu.prototype,"type",void 0),a([u({type:je,json:{write:!0}})],uu.prototype,"mapLayerId",void 0),a([u({type:String,json:{write:!0}})],uu.prototype,"gdbVersion",void 0),uu=Xw=a([_("esri.layers.support.source.MapLayerSource")],uu);var e_;let Xs=e_=class extends R{constructor(e){super(e),this.type="query-table"}clone(){const{workspaceId:e,query:t,oidFields:r,spatialReference:i,geometryType:s}=this,n={workspaceId:e,query:t,oidFields:r,spatialReference:(i==null?void 0:i.clone())??void 0,geometryType:s};return new e_(n)}};a([re({queryTable:"query-table"})],Xs.prototype,"type",void 0),a([u({type:String,json:{write:!0}})],Xs.prototype,"workspaceId",void 0),a([u({type:String,json:{write:!0}})],Xs.prototype,"query",void 0),a([u({type:String,json:{write:!0}})],Xs.prototype,"oidFields",void 0),a([u({type:ge,json:{write:!0}})],Xs.prototype,"spatialReference",void 0),a([re(PU)],Xs.prototype,"geometryType",void 0),Xs=e_=a([_("esri.layers.support.source.QueryTableDataSource")],Xs);var t_;let cu=t_=class extends R{constructor(e){super(e),this.type="raster"}clone(){const{workspaceId:e,dataSourceName:t}=this;return new t_({workspaceId:e,dataSourceName:t})}};a([re({raster:"raster"})],cu.prototype,"type",void 0),a([u({type:String,json:{write:!0}})],cu.prototype,"dataSourceName",void 0),a([u({type:String,json:{write:!0}})],cu.prototype,"workspaceId",void 0),cu=t_=a([_("esri.layers.support.source.RasterDataSource")],cu);var r_;let Ma=r_=class extends R{constructor(e){super(e),this.type="table"}clone(){const{workspaceId:e,gdbVersion:t,dataSourceName:r}=this;return new r_({workspaceId:e,gdbVersion:t,dataSourceName:r})}};a([re({table:"table"})],Ma.prototype,"type",void 0),a([u({type:String,json:{write:!0}})],Ma.prototype,"workspaceId",void 0),a([u({type:String,json:{write:!0}})],Ma.prototype,"gdbVersion",void 0),a([u({type:String,json:{write:!0}})],Ma.prototype,"dataSourceName",void 0),Ma=r_=a([_("esri.layers.support.source.TableDataSource")],Ma);var i_,s_;const yY=Kt()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let Hr=i_=class extends R{constructor(e){super(e),this.type="join-table"}readLeftTableSource(e,t,r){return nE()(e,t,r)}castLeftTableSource(e){return Ti(n_(),e)}readRightTableSource(e,t,r){return nE()(e,t,r)}castRightTableSource(e){return Ti(n_(),e)}clone(){const{leftTableKey:e,rightTableKey:t,leftTableSource:r,rightTableSource:i,joinType:s}=this,n={leftTableKey:e,rightTableKey:t,leftTableSource:(r==null?void 0:r.clone())??void 0,rightTableSource:(i==null?void 0:i.clone())??void 0,joinType:s};return new i_(n)}};a([re({joinTable:"join-table"})],Hr.prototype,"type",void 0),a([u({type:String,json:{write:!0}})],Hr.prototype,"leftTableKey",void 0),a([u({type:String,json:{write:!0}})],Hr.prototype,"rightTableKey",void 0),a([u({json:{write:!0}})],Hr.prototype,"leftTableSource",void 0),a([D("leftTableSource")],Hr.prototype,"readLeftTableSource",null),a([Ce("leftTableSource")],Hr.prototype,"castLeftTableSource",null),a([u({json:{write:!0}})],Hr.prototype,"rightTableSource",void 0),a([D("rightTableSource")],Hr.prototype,"readRightTableSource",null),a([Ce("rightTableSource")],Hr.prototype,"castRightTableSource",null),a([re(yY)],Hr.prototype,"joinType",void 0),Hr=i_=a([_("esri.layers.support.source.JoinTableDataSource")],Hr);let iv=null;function nE(){return iv||(iv=_c({types:n_()})),iv}let sv=null;function n_(){return sv||(sv={key:"type",base:null,typeMap:{"data-layer":Qi,"map-layer":uu}}),sv}const mY={key:"type",base:null,typeMap:{"join-table":Hr,"query-table":Xs,raster:cu,table:Ma}};let Qi=s_=class extends R{constructor(e){super(e),this.type="data-layer"}clone(){const{fields:e,dataSource:t}=this;return new s_({fields:e,dataSource:t})}};a([re({dataLayer:"data-layer"})],Qi.prototype,"type",void 0),a([u({type:[Hg],json:{write:!0}})],Qi.prototype,"fields",void 0),a([u({types:mY,json:{write:!0}})],Qi.prototype,"dataSource",void 0),Qi=s_=a([_("esri.layers.support.source.DataLayerSource")],Qi),Qi.from=Zt(Qi);let Ea=class extends Oe(R){constructor(t){super(t),this.onFields=null,this.operator=null,this.searchTerm=null,this.searchType=null}};a([u({type:[String],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.onFields!=null&&this.onFields.length>0}}}}})],Ea.prototype,"onFields",void 0),a([u({type:String,json:{write:!0}})],Ea.prototype,"operator",void 0),a([u({type:String,json:{write:!0}})],Ea.prototype,"searchTerm",void 0),a([u({type:String,json:{write:!0}})],Ea.prototype,"searchType",void 0),Ea=a([_("esri.rest.support.FullTextSearch")],Ea);const gY=Ea;var o_;const oE=new ve({upperLeft:"upper-left",lowerLeft:"lower-left"});let Aa=o_=class extends R{constructor(e){super(e),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new o_(M({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};a([u({type:it,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],Aa.prototype,"extent",void 0),a([u({type:["view","edit"],json:{write:!0}})],Aa.prototype,"mode",void 0),a([u({type:String,json:{read:oE.read,write:oE.write}})],Aa.prototype,"originPosition",void 0),a([u({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],Aa.prototype,"tolerance",void 0),Aa=o_=a([_("esri.rest.support.QuantizationParameters")],Aa);const vY=Aa,bY=new ve({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"});var a_;const aE=new ve({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let qi=a_=class extends R{constructor(e){super(e),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(e,t){this.statisticType!=="percentile-continuous"&&this.statisticType!=="percentile-discrete"||(t.statisticParameters=M(e))}clone(){return new a_({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:M(this.statisticParameters)})}};a([u({type:Number,json:{write:!0}})],qi.prototype,"maxPointCount",void 0),a([u({type:Number,json:{write:!0}})],qi.prototype,"maxRecordCount",void 0),a([u({type:Number,json:{write:!0}})],qi.prototype,"maxVertexCount",void 0),a([u({type:String,json:{write:!0}})],qi.prototype,"onStatisticField",void 0),a([u({type:String,json:{write:!0}})],qi.prototype,"outStatisticFieldName",void 0),a([u({type:String,json:{read:{source:"statisticType",reader:aE.read},write:{target:"statisticType",writer:aE.write}}})],qi.prototype,"statisticType",void 0),a([u({type:Object})],qi.prototype,"statisticParameters",void 0),a([B("statisticParameters")],qi.prototype,"writeStatisticParameters",null),qi=a_=a([_("esri.rest.support.StatisticDefinition")],qi);const _N=qi;var Ly;const wY=new ve({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let ie=Ly=class extends R{static from(e){return y$(Ly,e)}constructor(e){super(e),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.fullText=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}castDatumTransformation(e){return typeof e=="number"||typeof e=="object"?e:null}writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeParameterValues(e,t){if(e){const r={};for(const i in e){const s=e[i];Array.isArray(s)?r[i]=s.map(n=>n instanceof Date?n.getTime():n):s instanceof Date?r[i]=s.getTime():r[i]=s}t.parameterValues=r}}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,t.where="1=1"}writeWhere(e,t){t.where=e||"1=1"}clone(){return new Ly(M({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,fullText:this.fullText,formatOf3DObjects:this.formatOf3DObjects,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:this.historicMoment!=null?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}};ie.MAX_MAX_RECORD_COUNT_FACTOR=5,a([u({json:{write:!0}})],ie.prototype,"aggregateIds",void 0),a([u({type:Boolean,json:{write:!0}})],ie.prototype,"cacheHint",void 0),a([u({type:Boolean,json:{default:!1,write:!0}})],ie.prototype,"compactGeometryEnabled",void 0),a([u({json:{write:!0}})],ie.prototype,"datumTransformation",void 0),a([Ce("datumTransformation")],ie.prototype,"castDatumTransformation",null),a([u({type:Boolean,json:{default:!1,write:!0}})],ie.prototype,"defaultSpatialReferenceEnabled",void 0),a([u({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],ie.prototype,"distance",void 0),a([u({type:Qi,json:{write:!0}})],ie.prototype,"dynamicDataSource",void 0),a([u({type:String,json:{write:!0}})],ie.prototype,"formatOf3DObjects",void 0),a([u({type:[gY],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.fullText!=null&&this.fullText.length>0}}}}})],ie.prototype,"fullText",void 0),a([u({type:String,json:{write:!0}})],ie.prototype,"gdbVersion",void 0),a([u({types:wh,json:{read:bh,write:!0}})],ie.prototype,"geometry",void 0),a([u({type:Number,json:{write:!0}})],ie.prototype,"geometryPrecision",void 0),a([u({type:[String],json:{write:!0}})],ie.prototype,"groupByFieldsForStatistics",void 0),a([u({type:String,json:{write:!0}})],ie.prototype,"having",void 0),a([u({type:Date})],ie.prototype,"historicMoment",void 0),a([B("historicMoment")],ie.prototype,"writeHistoricMoment",null),a([u({type:Number,json:{write:!0}})],ie.prototype,"maxAllowableOffset",void 0),a([u({type:Number,cast:e=>e<1?1:e>ie.MAX_MAX_RECORD_COUNT_FACTOR?ie.MAX_MAX_RECORD_COUNT_FACTOR:e,json:{write:{overridePolicy:e=>({enabled:e>1})}}})],ie.prototype,"maxRecordCountFactor",void 0),a([u({type:["xyFootprint"],json:{write:!0}})],ie.prototype,"multipatchOption",void 0),a([u({type:Number,json:{read:{source:"resultRecordCount"}}})],ie.prototype,"num",void 0),a([u({json:{write:!0}})],ie.prototype,"objectIds",void 0),a([u({type:[String],json:{write:!0}})],ie.prototype,"orderByFields",void 0),a([u({type:[String],json:{write:!0}})],ie.prototype,"outFields",void 0),a([u({type:ge,json:{name:"outSR",write:!0}})],ie.prototype,"outSpatialReference",void 0),a([u({type:[_N],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.outStatistics!=null&&this.outStatistics.length>0}}}}})],ie.prototype,"outStatistics",void 0),a([u({json:{write:!0}})],ie.prototype,"parameterValues",void 0),a([B("parameterValues")],ie.prototype,"writeParameterValues",null),a([u({type:Ye,json:{write:!0}})],ie.prototype,"pixelSize",void 0),a([u({type:vY,json:{write:!0}})],ie.prototype,"quantizationParameters",void 0),a([u({type:[Object],json:{write:!0}})],ie.prototype,"rangeValues",void 0),a([u({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:this.spatialRelationship==="relation"}}}}})],ie.prototype,"relationParameter",void 0),a([u({type:String,json:{write:!0}})],ie.prototype,"resultType",void 0),a([u({type:Boolean,json:{default:!1,write:!0}})],ie.prototype,"returnCentroid",void 0),a([u({type:Boolean,json:{default:!1,write:!0}})],ie.prototype,"returnDistinctValues",void 0),a([u({type:Boolean,json:{default:!0,write:!0}})],ie.prototype,"returnExceededLimitFeatures",void 0),a([u({type:Boolean,json:{write:!0}})],ie.prototype,"returnGeometry",void 0),a([u({type:Boolean,json:{default:!1,write:!0}})],ie.prototype,"returnQueryGeometry",void 0),a([u({type:Boolean,json:{default:!1,write:!0}})],ie.prototype,"returnM",void 0),a([u({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],ie.prototype,"returnZ",void 0),a([u({type:ge,json:{write:!0}})],ie.prototype,"sourceSpatialReference",void 0),a([re(bY,{ignoreUnknown:!1,name:"spatialRel"})],ie.prototype,"spatialRelationship",void 0),a([u({type:Number,json:{read:{source:"resultOffset"}}})],ie.prototype,"start",void 0),a([B("start"),B("num")],ie.prototype,"writeStart",null),a([u({type:String,json:{write:!0}})],ie.prototype,"sqlFormat",void 0),a([u({type:String,json:{write:!0}})],ie.prototype,"text",void 0),a([u({type:Vo,json:{write:!0}})],ie.prototype,"timeExtent",void 0),a([u({type:Boolean,json:{default:!1,write:!0}})],ie.prototype,"timeReferenceUnknownClient",void 0),a([re(wY,{ignoreUnknown:!1}),u({json:{write:{overridePolicy(e){return{enabled:!!e&&this.distance!=null&&this.distance>0}}}}})],ie.prototype,"units",void 0),a([u({type:String,json:{write:{overridePolicy(e){return{enabled:e!=null||this.start!=null&&this.start>0}}}}})],ie.prototype,"where",void 0),a([B("where")],ie.prototype,"writeWhere",null),ie=Ly=a([_("esri.rest.support.Query")],ie);const ii=ie;var l_;const nv=new ve({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),ov=new ve({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let $s=l_=class extends R{constructor(e){super(e),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(e={}){const{where:t,geometry:r,spatialRelationship:i,timeExtent:s,objectIds:n,units:o,distance:l}=this;return new ii({geometry:M(r),objectIds:M(n),spatialRelationship:i,timeExtent:M(s),where:t,units:o,distance:l,...e})}clone(){const{where:e,geometry:t,spatialRelationship:r,timeExtent:i,objectIds:s,units:n,distance:o}=this;return new l_({geometry:M(t),objectIds:M(s),spatialRelationship:r,timeExtent:M(i),where:e,units:n,distance:o})}};a([u({type:String,json:{write:!0}})],$s.prototype,"where",void 0),a([u({types:wh,json:{write:!0}})],$s.prototype,"geometry",void 0),a([u({type:nv.apiValues,json:{name:"spatialRel",read:{reader:nv.read},write:{allowNull:!1,writer:nv.write,overridePolicy(){return{enabled:this.geometry!=null}}}}})],$s.prototype,"spatialRelationship",void 0),a([u({type:Number,json:{write:{overridePolicy(e){return{enabled:e!=null&&this.geometry!=null}}}}})],$s.prototype,"distance",void 0),a([u({type:[Number],json:{write:!0}})],$s.prototype,"objectIds",void 0),a([u({type:ov.apiValues,json:{read:ov.read,write:{writer:ov.write,overridePolicy(e){return{enabled:e!=null&&this.geometry!=null}}}}})],$s.prototype,"units",void 0),a([u({type:Vo,json:{write:!0}})],$s.prototype,"timeExtent",void 0),$s=l_=a([_("esri.layers.support.FeatureFilter")],$s);const _Y=$s;var u_;const lE={read:{reader:Zp},write:{writer:Yp,overridePolicy(){return{allowNull:this.excludedEffect!=null,isRequired:this.excludedEffect==null}}}},uE={read:{reader:Zp},write:{writer:Yp,overridePolicy(){return{allowNull:this.includedEffect!=null,isRequired:this.includedEffect==null}}}},cE={name:"showExcludedLabels",default:!0};let Ca=u_=class extends R{constructor(e){super(e),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}write(e,t){var i,s;const r=super.write(e,t);if(t!=null&&t.origin){if(r.filter){const n=Object.keys(r.filter);if(n.length>1||n[0]!=="where")return(i=t.messages)==null||i.push(new O("web-document-write:unsupported-feature-effect","Invalid feature effect 'filter'. A filter can only contain a 'where' property",{layer:t.layer,effect:this})),null}if("showExcludedLabels"in r)return(s=t.messages)==null||s.push(new O("web-document-write:unsupported-feature-effect","Invalid value for property 'excludedLabelsVisible' which should always be 'true'",{layer:t.layer,effect:this})),null}return r}clone(){return new u_({filter:this.filter!=null?this.filter.clone():null,includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};a([u({type:_Y,json:{write:{allowNull:!0,writer(e,t,r,i){const s=e==null?void 0:e.write({},i);s&&Object.keys(s).length!==0?pr(r,s,t):pr(r,null,t)}}}})],Ca.prototype,"filter",void 0),a([u({json:{read:Zp,write:{writer:Yp,allowNull:!0},origins:{"web-map":lE,"portal-item":lE}}})],Ca.prototype,"includedEffect",void 0),a([u({json:{read:Zp,write:{writer:Yp,allowNull:!0},origins:{"web-map":uE,"portal-item":uE}}})],Ca.prototype,"excludedEffect",void 0),a([u({type:Boolean,json:{write:!0,name:"showExcludedLabels",origins:{"web-map":cE,"portal-item":cE}}})],Ca.prototype,"excludedLabelsVisible",void 0),Ca=u_=a([_("esri.layers.support.FeatureEffect")],Ca);const $Y=Ca,dE={write:{allowNull:!0}},SY={type:$Y,json:{origins:{"web-map":dE,"portal-item":dE}}},xY=e=>{let t=class extends e{constructor(){super(...arguments),this.featureEffect=null}};return a([u(SY)],t.prototype,"featureEffect",void 0),t=a([_("esri.layers.mixins.FeatureEffectLayer")],t),t};var Wd;const Nm=Kt()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),$N=Nm.jsonValues.slice();uj($N,"orthometric");const $p=Kt()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let Gi=Wd=class extends R{constructor(e){super(e),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(e,t,r){return Nm.write(e,t,r)}readHeightModel(e,t,r){return Nm.read(e)||(r!=null&&r.messages&&r.messages.push(IY(e,{context:r})),null)}readHeightUnit(e,t,r){return $p.read(e)||(r!=null&&r.messages&&r.messages.push(pE(e,{context:r})),null)}readHeightUnitService(e,t,r){return PF(e)||$p.read(e)||(r!=null&&r.messages&&r.messages.push(pE(e,{context:r})),null)}readVertCRS(e,t){return t.vertCRS||t.ellipsoid||t.geoid}clone(){return new Wd({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(e){return!!e&&(this===e||this.heightModel===e.heightModel&&this.heightUnit===e.heightUnit&&this.vertCRS===e.vertCRS)}static deriveUnitFromSR(e,t){const r=O7(t);return new Wd({heightModel:e.heightModel,heightUnit:r??void 0,vertCRS:e.vertCRS})}write(e,t){return t={origin:"web-scene",...t},super.write(e,t)}static fromJSON(e){if(!e)return null;const t=new Wd;return t.read(e,{origin:"web-scene"}),t}};function pE(e,t){return new os("height-unit:unsupported",`Height unit of value '${e}' is not supported`,t)}function IY(e,t){return new os("height-model:unsupported",`Height model of value '${e}' is not supported`,t)}a([u({type:Nm.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:$N,default:"ellipsoidal"}}}})],Gi.prototype,"heightModel",void 0),a([B("web-scene","heightModel")],Gi.prototype,"writeHeightModel",null),a([D(["web-scene","service"],"heightModel")],Gi.prototype,"readHeightModel",null),a([u({type:$p.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:$p.jsonValues,write:$p.write}}}})],Gi.prototype,"heightUnit",void 0),a([D("web-scene","heightUnit")],Gi.prototype,"readHeightUnit",null),a([D("service","heightUnit")],Gi.prototype,"readHeightUnitService",null),a([u({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],Gi.prototype,"vertCRS",void 0),a([D("service","vertCRS",["vertCRS","ellipsoid","geoid"])],Gi.prototype,"readVertCRS",null),Gi=Wd=a([_("esri.geometry.HeightModelInfo")],Gi);const TY=Gi;var c_;let Hd=c_=class extends R{constructor(e){super(e)}async collectRequiredFields(e,t){return us(e,t,this.expression)}clone(){return new c_({expression:this.expression,title:this.title})}equals(e){return this.expression===e.expression&&this.title===e.title}};a([u({type:String,json:{write:!0}})],Hd.prototype,"expression",void 0),a([u({type:String,json:{write:!0}})],Hd.prototype,"title",void 0),Hd=c_=a([_("esri.symbols.support.FeatureExpressionInfo")],Hd);const hE=Hd;function lde(e){return 1/(AS[e]||1)}function MY(){const e=Object.keys(AS);return AA(e,"decimal-degrees"),e.sort(),e}const EY=MY();var d_;const yf=Kt()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),fE=new ve({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let en=d_=class extends R{constructor(e){super(e),this.offset=null}readFeatureExpressionInfo(e,t){return e??(t.featureExpression&&t.featureExpression.value===0?{expression:"0"}:void 0)}writeFeatureExpressionInfo(e,t,r,i){t[r]=e.write({},i),e.expression==="0"&&(t.featureExpression={value:0})}get mode(){const{offset:e,featureExpressionInfo:t}=this;return this._isOverridden("mode")?this._get("mode"):e!=null||t?"relative-to-ground":"on-the-ground"}set mode(e){this._override("mode",e)}set unit(e){this._set("unit",e)}write(e,t){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(e,t):null}clone(){return new d_({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}equals(e){return this.mode===e.mode&&this.offset===e.offset&&this.unit===e.unit&&Sj(this.featureExpressionInfo,e.featureExpressionInfo)}};a([u({type:hE,json:{write:!0}})],en.prototype,"featureExpressionInfo",void 0),a([D("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],en.prototype,"readFeatureExpressionInfo",null),a([B("featureExpressionInfo",{featureExpressionInfo:{type:hE},"featureExpression.value":{type:[0]}})],en.prototype,"writeFeatureExpressionInfo",null),a([u({type:yf.apiValues,nonNullable:!0,json:{type:yf.jsonValues,read:yf.read,write:{writer:yf.write,isRequired:!0}}})],en.prototype,"mode",null),a([u({type:Number,json:{write:!0}})],en.prototype,"offset",void 0),a([u({type:EY,json:{type:String,read:fE.read,write:fE.write}})],en.prototype,"unit",null),en=d_=a([_("esri.symbols.support.ElevationInfo")],en);const AY=en;let du=class extends R{constructor(t){super(t),this.description=null,this.label=null,this.type=null}};a([u({type:String,json:{write:!0}})],du.prototype,"description",void 0),a([u({type:String,json:{write:!0}})],du.prototype,"label",void 0),a([u()],du.prototype,"type",void 0),du=a([_("esri.tables.elements.AttributeTableElement")],du);const fc=du;var p_;let Jd=p_=class extends fc{constructor(e){super(e),this.displayType="auto",this.type="attachment"}clone(){return new p_({description:this.description,displayType:this.displayType,label:this.label})}};a([u({type:["auto"],json:{write:!0}})],Jd.prototype,"displayType",void 0),a([u({type:["attachment"],readOnly:!0,json:{read:!1,write:!0}})],Jd.prototype,"type",void 0),Jd=p_=a([_("esri.tables.elements.AttributeTableAttachmentElement")],Jd);const yE=Jd;var h_;let Zd=h_=class extends fc{constructor(e){super(e),this.fieldName=null,this.type="field"}clone(){return new h_({description:this.description,fieldName:this.fieldName,label:this.label})}};a([u({type:String,json:{write:!0}})],Zd.prototype,"fieldName",void 0),a([u({type:String,json:{read:!1,write:!0}})],Zd.prototype,"type",void 0),Zd=h_=a([_("esri.tables.elements.AttributeTableFieldElement")],Zd);const mE=Zd;var f_;let Yd=f_=class extends fc{constructor(e){super(e),this.relationshipId=null,this.type="relationship"}clone(){return new f_({description:this.description,label:this.label,relationshipId:this.relationshipId})}};a([u({type:Number,json:{write:!0}})],Yd.prototype,"relationshipId",void 0),a([u({type:["relationship"],json:{read:!1,write:!0}})],Yd.prototype,"type",void 0),Yd=f_=a([_("esri.tables.elements.AttributeTableRelationshipElement")],Yd);const gE=Yd;function SN(e){return{typesWithGroup:{base:fc,key:"type",typeMap:{attachment:yE,field:mE,group:e,relationship:gE}},typesWithoutGroup:{base:fc,key:"type",typeMap:{attachment:yE,field:mE,relationship:gE}}}}function xN(e,t,r=!0){if(!e)return null;const i=r?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(s=>i[s.type]).map(s=>i[s.type].fromJSON(s))}function IN(e,t,r=!0){if(!e)return null;const i=r?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(s=>i[s.type]).map(s=>s.toJSON())}function TN(e,t,r=!0){return e?e.map(i=>Ti(r?t.typesWithGroup:t.typesWithoutGroup,i)):null}var y_;let pn=y_=class extends fc{constructor(e){super(e),this.elements=null,this.type="group"}castElements(e){return TN(e,av,!1)}readElements(e,t){return xN(t.attributeTableElements,av,!1)}writeElements(e,t){t.attributeTableElements=IN(e,av,!1)}clone(){return new y_({description:this.description,elements:M(this.elements),label:this.label})}};a([u({json:{write:!0}})],pn.prototype,"elements",void 0),a([Ce("elements")],pn.prototype,"castElements",null),a([D("elements",["attributeTableElements"])],pn.prototype,"readElements",null),a([B("elements")],pn.prototype,"writeElements",null),a([u({type:String,json:{read:!1,write:!0}})],pn.prototype,"type",void 0),pn=y_=a([_("esri.tables.elements.AttributeTableGroupElement")],pn);const av=SN(pn),CY=pn;var m_;const lv=SN(CY);let so=m_=class extends R{constructor(e){super(e),this.elements=null,this.orderByFields=null}castElements(e){return TN(e,lv)}readElements(e,t){return xN(t.attributeTableElements,lv)}writeElements(e,t){t.attributeTableElements=IN(e,lv)}clone(){return new m_({elements:M(this.elements),orderByFields:this.orderByFields})}};a([u({json:{write:!0}})],so.prototype,"elements",void 0),a([Ce("elements")],so.prototype,"castElements",null),a([D("elements",["attributeTableElements"])],so.prototype,"readElements",null),a([B("elements")],so.prototype,"writeElements",null),a([u({type:[Object],json:{write:!0}})],so.prototype,"orderByFields",void 0),so=m_=a([_("esri.tables.AttributeTableTemplate")],so);const OY=so,FY={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:{enabled:!0,layerContainerTypes:Ut}}},XS={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(e,t)=>!t.disablePopup},write:{enabled:!0,writer(e,t,r){t[r]=!e}}}},e2={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:{enabled:!0,layerContainerTypes:Ut}}},kY={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:dl}}},PY={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:{enabled:!0,layerContainerTypes:Ut}}},LY={value:null,type:AY,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:{enabled:!0,layerContainerTypes:Ut}}};function cde(e){return{type:e,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const MN={write:{enabled:!0,layerContainerTypes:Ut},read:!0},g_={type:Number,json:{origins:{"web-document":MN,"portal-item":{write:!0}}}},NY={...g_,json:{...g_.json,origins:{"web-document":{...MN,write:{enabled:!0,layerContainerTypes:Ut,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(e,t,r)=>{var i;return r&&r.origin!=="service"||!t.drawingInfo||t.drawingInfo.transparency===void 0?(i=t.layerDefinition)!=null&&i.drawingInfo&&t.layerDefinition.drawingInfo.transparency!==void 0?km(t.layerDefinition.drawingInfo.transparency):void 0:km(t.drawingInfo.transparency)}}}},dde={type:it,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(e,t)=>{const r=it.fromJSON(e);return t.spatialReference!=null&&typeof t.spatialReference=="object"&&(r.spatialReference=ge.fromJSON(t.spatialReference)),r}}}},read:!1}},RY={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},jY={type:Number,json:{origins:{service:{write:{enabled:!1}},"web-scene":{name:"layerDefinition.minScale",write:{enabled:!0,layerContainerTypes:Ut}}},name:"layerDefinition.minScale",write:!0}},DY={type:Number,json:{origins:{service:{write:{enabled:!1}},"web-scene":{name:"layerDefinition.maxScale",write:{enabled:!0,layerContainerTypes:Ut}}},name:"layerDefinition.maxScale",write:!0}},EN={json:{write:{ignoreOrigin:!0,layerContainerTypes:Ut},origins:{"web-map":{read:!1,write:!1}}}},VY={type:OY,json:{name:"attributeTableInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}};let tn=class extends Oe(R){constructor(t){super(t),this.creatorField=null,this.creationDateField=null,this.editorField=null,this.editDateField=null,this.realm=null,this.timeZone=null}};a([u()],tn.prototype,"creatorField",void 0),a([u()],tn.prototype,"creationDateField",void 0),a([u()],tn.prototype,"editorField",void 0),a([u()],tn.prototype,"editDateField",void 0),a([u()],tn.prototype,"realm",void 0),a([u(mm("dateFieldsTimeReference",!0))],tn.prototype,"timeZone",void 0),tn=a([_("esri.layers.support.EditFieldsInfo")],tn);const UY=tn;let As=class extends Oe(R){constructor(t){super(t)}};a([u({constructOnly:!0,json:{write:!0}})],As.prototype,"name",void 0),a([u({constructOnly:!0,json:{write:!0}})],As.prototype,"fields",void 0),a([u({constructOnly:!0,json:{write:!0}})],As.prototype,"isAscending",void 0),a([u({constructOnly:!0,json:{write:!0}})],As.prototype,"indexType",void 0),a([u({constructOnly:!0,json:{write:!0}})],As.prototype,"isUnique",void 0),a([u({constructOnly:!0,json:{write:!0}})],As.prototype,"description",void 0),As=a([_("esri.layers.support.FeatureIndex")],As);async function zY(e,t,r){t=t.clone(),e.capabilities.query.supportsMaxRecordCountFactor&&(t.maxRecordCountFactor=AN(e));const i=qY(e),s=e.capabilities.query.supportsPagination;t.start=0,t.num=i;let n=null;for(;;){const o=await e.source.queryFeaturesJSON(t,r);if(n==null?n=o:n.features=n.features.concat(o.features),n.exceededTransferLimit=o.exceededTransferLimit,!s||!o.exceededTransferLimit)break;t.start+=i}return n}function qY(e){return AN(e)*GY(e)}function GY(e){return e.capabilities.query.maxRecordCount||2e3}function AN(e){return e.capabilities.query.supportsMaxRecordCountFactor?ii.MAX_MAX_RECORD_COUNT_FACTOR:1}var v_;let Rt=v_=class extends R{constructor(e){super(e),this.attachmentTypes=null,this.attachmentsWhere=null,this.cacheHint=void 0,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}clone(){return new v_(M({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,cacheHint:this.cacheHint,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}};a([u({type:[String],json:{write:!0}})],Rt.prototype,"attachmentTypes",void 0),a([u({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],Rt.prototype,"attachmentsWhere",void 0),a([u({type:Boolean,json:{write:!0}})],Rt.prototype,"cacheHint",void 0),a([u({type:[String],json:{write:!0}})],Rt.prototype,"keywords",void 0),a([u({type:[String],json:{write:!0}})],Rt.prototype,"globalIds",void 0),a([u({json:{write:!0}})],Rt.prototype,"name",void 0),a([u({type:Number,json:{read:{source:"resultRecordCount"}}})],Rt.prototype,"num",void 0),a([u({type:[Number],json:{write:!0}})],Rt.prototype,"objectIds",void 0),a([u({type:Boolean,json:{default:!1,write:!0}})],Rt.prototype,"returnMetadata",void 0),a([u({type:[Number],json:{write:!0}})],Rt.prototype,"size",void 0),a([u({type:Number,json:{read:{source:"resultOffset"}}})],Rt.prototype,"start",void 0),a([B("start"),B("num")],Rt.prototype,"writeStart",null),a([u({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],Rt.prototype,"where",void 0),Rt=v_=a([_("esri.rest.support.AttachmentQuery")],Rt),Rt.from=Zt(Rt);const b_=Rt;var w_;let Xe=w_=class extends R{constructor(e){super(e),this.cacheHint=void 0,this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,this.start>0&&this.where==null&&(t.definitionExpression="1=1")}clone(){return new w_(M({cacheHint:this.cacheHint,dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}};a([u({type:Boolean,json:{write:!0}})],Xe.prototype,"cacheHint",void 0),a([u({type:Qi,json:{write:!0}})],Xe.prototype,"dynamicDataSource",void 0),a([u({type:String,json:{write:!0}})],Xe.prototype,"gdbVersion",void 0),a([u({type:Number,json:{write:!0}})],Xe.prototype,"geometryPrecision",void 0),a([u({type:Date})],Xe.prototype,"historicMoment",void 0),a([B("historicMoment")],Xe.prototype,"_writeHistoricMoment",null),a([u({type:Number,json:{write:!0}})],Xe.prototype,"maxAllowableOffset",void 0),a([u({json:{write:!0}})],Xe.prototype,"objectIds",void 0),a([u({type:[String],json:{write:!0}})],Xe.prototype,"orderByFields",void 0),a([u({type:[String],json:{write:!0}})],Xe.prototype,"outFields",void 0),a([u({type:ge,json:{read:{source:"outSR"},write:{target:"outSR"}}})],Xe.prototype,"outSpatialReference",void 0),a([u({json:{write:!0}})],Xe.prototype,"relationshipId",void 0),a([u({type:Number,json:{read:{source:"resultOffset"}}})],Xe.prototype,"start",void 0),a([B("start"),B("num")],Xe.prototype,"writeStart",null),a([u({type:Number,json:{read:{source:"resultRecordCount"}}})],Xe.prototype,"num",void 0),a([u({json:{write:!0}})],Xe.prototype,"returnGeometry",void 0),a([u({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Xe.prototype,"returnM",void 0),a([u({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Xe.prototype,"returnZ",void 0),a([u({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],Xe.prototype,"where",void 0),Xe=w_=a([_("esri.rest.support.RelationshipQuery")],Xe),Xe.from=Zt(Xe);const yc=Xe,fde=Object.freeze(Object.defineProperty({__proto__:null,default:yc},Symbol.toStringTag,{value:"Module"})),__=new ve({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"});async function BY(e,t,r,i){const s=await Zo(e);if(await t2(e,t,i),!s.addAttachment)throw new O(i,"Layer source does not support addAttachment capability");return s.addAttachment(t,r)}function t2(e,t,r){var n,o;const{attributes:i}=t,{objectIdField:s}=e;return(o=(n=e.capabilities)==null?void 0:n.data)!=null&&o.supportsAttachment?t?i?s&&i[s]?Promise.resolve():Promise.reject(new O(r,`feature is missing the identifying attribute ${s}`)):Promise.reject(new O(r,"'attributes' are required on a feature to query attachments")):Promise.reject(new O(r,"A feature is required to add/delete/update attachments")):Promise.reject(new O(r,"this layer doesn't support attachments"))}async function WY(e,t,r,i,s){const n=await Zo(e);if(await t2(e,t,s),!n.updateAttachment)throw new O(s,"Layer source does not support updateAttachment capability");return n.updateAttachment(t,r,i)}async function HY(e,t,r){const{applyEdits:i}=await j(()=>import("./editingSupport-r7-urApN.js"),__vite__mapDeps([114,115])),s=await e.load();let n=r;return s.type==="feature"&&s.infoFor3D&&t.deleteFeatures!=null&&s.globalIdField!=null&&(n={...n,globalIdToObjectId:await hQ(s,t.deleteFeatures,s.globalIdField)}),i(s,s.source,t,r)}async function JY(e,t,r){const{uploadAssets:i}=await j(()=>import("./editingSupport-r7-urApN.js"),__vite__mapDeps([114,115])),s=await e.load();return i(s,s.source,t,r)}async function ZY(e,t,r,i){const s=await Zo(e);if(await t2(e,t,i),!s.deleteAttachments)throw new O(i,"Layer source does not support deleteAttachments capability");return s.deleteAttachments(t,r)}async function YY(e,t,r){const i=(await e.load({signal:t==null?void 0:t.signal})).source;if(!i.fetchRecomputedExtents)throw new O(r,"Layer source does not support fetchUpdates capability");return i.fetchRecomputedExtents(t)}async function QY(e,t,r,i){var m,g;t=b_.from(t),await e.load();const s=e.source,n=e.capabilities;if(!((m=n==null?void 0:n.data)!=null&&m.supportsAttachment))throw new O(i,"this layer doesn't support attachments");const{attachmentTypes:o,objectIds:l,globalIds:c,num:p,size:h,start:f,where:y}=t;if(!((g=n==null?void 0:n.operations)!=null&&g.supportsQueryAttachments)&&((o==null?void 0:o.length)>0||(c==null?void 0:c.length)>0||(h==null?void 0:h.length)>0||p||f||y))throw new O(i,"when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",t);if(!(l!=null&&l.length||c!=null&&c.length||y))throw new O(i,"'objectIds', 'globalIds', or 'where' are required to perform attachment query",t);if(!s.queryAttachments)throw new O(i,"Layer source does not support queryAttachments capability",t);return s.queryAttachments(t)}async function KY(e,t,r,i){const s=await Zo(e);if(!s.queryObjectIds)throw new O(i,"Layer source does not support queryObjectIds capability");return s.queryObjectIds(ii.from(t)??e.createQuery(),r)}async function XY(e,t,r,i){const s=await Zo(e);if(!s.queryFeatureCount)throw new O(i,"Layer source does not support queryFeatureCount capability");return s.queryFeatureCount(ii.from(t)??e.createQuery(),r)}async function eQ(e,t,r,i){const s=await Zo(e);if(!s.queryExtent)throw new O(i,"Layer source does not support queryExtent capability");return s.queryExtent(ii.from(t)??e.createQuery(),r)}async function tQ(e,t,r,i){const s=await Zo(e);if(!s.queryRelatedFeatures)throw new O(i,"Layer source does not support queryRelatedFeatures capability");return s.queryRelatedFeatures(yc.from(t),r)}async function rQ(e,t,r,i){const s=await Zo(e);if(!s.queryRelatedFeaturesCount)throw new O(i,"Layer source does not support queryRelatedFeaturesCount capability");return s.queryRelatedFeaturesCount(yc.from(t),r)}async function iQ(e){const t=e.source;if(t!=null&&t.refresh)try{const{dataChanged:r,updates:i}=await t.refresh();if(i!=null&&(e.sourceJSON={...e.sourceJSON,...i},e.read(i,{origin:"service",url:e.parsedUrl})),r)return!0}catch{}if(e.definitionExpression)try{return(await SD(e.definitionExpression,e.fieldsIndex)).hasDateFunctions}catch{}return!1}function sQ(e){var o,l;const t=new ii,r=(o=e.capabilities)==null?void 0:o.data,i=(l=e.capabilities)==null?void 0:l.query;t.historicMoment=e.historicMoment,t.gdbVersion=e.gdbVersion,t.returnGeometry=!0,i&&(t.compactGeometryEnabled=i.supportsCompactGeometry,t.defaultSpatialReferenceEnabled=i.supportsDefaultSpatialReference),r&&(r.supportsZ&&e.returnZ!=null&&(t.returnZ=e.returnZ),r.supportsM&&e.returnM!=null&&(t.returnM=e.returnM)),t.outFields=["*"];const{timeOffset:s,timeExtent:n}=e;return t.timeExtent=s!=null&&n!=null?n.offset(-s.value,s.unit):n||null,t.multipatchOption=e.geometryType==="multipatch"?"xyFootprint":null,t}function CN(e){const{globalIdField:t,fields:r}=e;if(t)return t;if(r){for(const i of r)if(i.type==="esriFieldTypeGlobalID")return i.name}}function ON(e){const{objectIdField:t,fields:r}=e;if(t)return t;if(r){for(const i of r)if(i.type==="esriFieldTypeOID")return i.name}}function nQ(e){return e.currentVersion?e.currentVersion:e.hasOwnProperty("capabilities")||e.hasOwnProperty("drawingInfo")||e.hasOwnProperty("hasAttachments")||e.hasOwnProperty("htmlPopupType")||e.hasOwnProperty("relationships")||e.hasOwnProperty("timeInfo")||e.hasOwnProperty("typeIdField")||e.hasOwnProperty("types")?10:9.3}function oQ(e,t){const{subtypes:r,subtypeField:i}=e;if(!(t!=null&&t.attributes)||!(r!=null&&r.length)||!i)return null;const s=t.attributes[i];return s==null?null:r.find(n=>n.code===s)}function aQ(e,t){var o,l;const{fieldsIndex:r,subtypeField:i}=e,{name:s,type:n}=r.get(t)??{};if(!s)return null;if((i&&((o=r.get(i))==null?void 0:o.name))===s&&((l=e.subtypes)!=null&&l.length)){const c=e.subtypes.map(p=>new qa({code:FN(p.code,n),name:p.name}));if(c!=null&&c.length)return new Bg({codedValues:c})}return null}function lQ(e,t){var n,o;const{fieldsIndex:r}=e,{name:i,type:s}=r.get(t)??{};if(!i)return null;if(("typeIdField"in e?(n=r.get(e.typeIdField))==null?void 0:n.name:null)===i&&"types"in e&&((o=e.types)!=null&&o.length)){const l=e.types.map(c=>new qa({code:FN(c.id,s),name:c.name}));return new Bg({codedValues:l})}return null}function FN(e,t){return t?_k({type:t})&&typeof e=="number"?`${e}`:dz({type:t})&&typeof e=="string"?Number.parseInt(e,10):e:e}async function Zo(e){return(await e.load()).source}async function uQ(e,t){if(!ye||ye.findCredential(e))return;let r;try{const i=await UP(e,t);i&&(r=await ye.checkSignInStatus(`${i}/sharing`))}catch{}if(r)try{const i=t!=null?t.signal:null;await ye.getCredential(e,{signal:i})}catch{}}async function cQ(e,t,r){var s;const i=(s=e.parsedUrl)==null?void 0:s.path;i&&e.authenticationTriggerEvent===t&&await uQ(i,r)}function dQ(e){return!Ny(e)&&(e.userHasUpdateItemPrivileges||e.editingEnabled)}const uv=_c({types:MP});function r2(e,t){var r;if(e.defaultSymbol)return(r=e.types)!=null&&r.length?new qS({defaultSymbol:uv(e.defaultSymbol,e,t),field:e.typeIdField,uniqueValueInfos:e.types.map(i=>({id:i.id,symbol:uv(i.symbol,i,t)}))}):new Wo({symbol:uv(e.defaultSymbol,e,t)})}function pQ(e){var i,s,n;let t=(i=e.sourceJSON)==null?void 0:i.cacheMaxAge;if(!t)return!1;const r=(n=(s=e.editingInfo)==null?void 0:s.lastEditDate)==null?void 0:n.getTime();return r==null||(t*=1e3,Date.now()-r<t)}async function hQ(e,t,r){if(t==null)return null;const i=[],{objectIdField:s}=e;if(t.forEach(p=>{let h=null;if("attributes"in p){const{attributes:f}=p;h={globalId:f[r],objectId:f[s]!=null&&f[s]!==-1?f[s]:null}}else h={globalId:p.globalId,objectId:p.objectId!=null&&p.objectId!==-1?p.objectId:null};h.globalId!=null&&(h.objectId!=null&&h.objectId!==-1||i.push(h.globalId))}),i.length===0)return null;const n=e.createQuery();n.where=i.map(p=>`${r}='${p}'`).join(" OR "),n.returnGeometry=!1,n.outFields=[s,r],n.cacheHint=!1;const o=await Bq(zY(e,n));if(!o.ok)return null;const l=new Map,c=o.value.features;for(const p of c){const h=p.attributes[r],f=p.attributes[s];h!=null&&f!=null&&f!==-1&&l.set(uY(h),f)}return l}function fQ(e,t,r){if(!t||!r||!e)return null;const i=r.getAttribute(t);return i==null?null:e.find(s=>{const{id:n}=s;return n!=null&&n.toString()===i.toString()})??null}function Ny(e){var t;return((t=e.sourceJSON)==null?void 0:t.isMultiServicesView)||yQ(e)}function yQ(e){var t,r;return!!((r=(t=e.sourceJSON)==null?void 0:t.capabilities)!=null&&r.toLowerCase().split(",").map(i=>i.trim()).includes("map"))}function mQ(e,t,r){const i=t==null?void 0:t.queryBins;if(!i)throw new O(r,"Layer source does not support binning");switch(e.binParameters.type){case"auto-interval":if(!i.supportsAutoInterval)throw new O(r,"Layer source does not support auto-interval binning");break;case"date":if(!i.supportsDate)throw new O(r,"Layer source does not support date binning");break;case"fixed-boundaries":if(!i.supportsFixedBoundaries)throw new O(r,"Layer source does not support fixed-boundaries binning");break;case"fixed-interval":if(!i.supportsFixedInterval)throw new O(r,"Layer source does not support fixed-interval binning")}const s=i==null?void 0:i.supportedStatistics;if(e.outStatistics&&s){const n=new Map([["count","count"],["sum","sum"],["min","min"],["max","max"],["avg","avg"],["stddev","stddev"],["var","var"],["percentile-continuous","percentileContinuous"],["percentile-discrete","percentileDiscrete"],["centroid-aggregate","centroid"],["convex-hull-aggregate","convexHull"],["envelope-aggregate","envelope"]]);for(const{statisticType:o}of e.outStatistics){const l=n.get(o);if(l&&!s[l])throw new O(r,`Layer source does not support ${o} statistic type`)}}}let pu=class extends Oe(R){constructor(t){super(t),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};a([u({type:String,json:{read:{source:"shapeAreaFieldName"}}})],pu.prototype,"shapeAreaField",void 0),a([u({type:String,json:{read:{source:"shapeLengthFieldName"}}})],pu.prototype,"shapeLengthField",void 0),a([u({type:String,json:{read:e=>j7.read(e)||D7.read(e)}})],pu.prototype,"units",void 0),pu=a([_("esri.layers.support.GeometryFieldsInfo")],pu);const gQ=pu;var $_;let hu=$_=class extends R{constructor(e){super(e),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new ne}clone(){return new $_({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};a([u({type:String,json:{write:!0}})],hu.prototype,"floorField",void 0),a([u({json:{read:!1,write:!1}})],hu.prototype,"viewAllMode",void 0),a([u({json:{read:!1,write:!1}})],hu.prototype,"viewAllLevelIds",void 0),hu=$_=a([_("esri.layers.support.LayerFloorInfo")],hu);const vQ=hu,vE=new ve({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),bE=new ve({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let gi=class extends Oe(R){constructor(t){super(t),this.cardinality=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};a([u({json:{read:vE.read,write:vE.write}})],gi.prototype,"cardinality",void 0),a([u({json:{read:!0,write:!0}})],gi.prototype,"composite",void 0),a([u({json:{read:!0,write:!0}})],gi.prototype,"id",void 0),a([u({json:{read:!0,write:!0}})],gi.prototype,"keyField",void 0),a([u({json:{read:!0,write:!0}})],gi.prototype,"keyFieldInRelationshipTable",void 0),a([u({json:{read:!0,write:!0}})],gi.prototype,"name",void 0),a([u({json:{read:!0,write:!0}})],gi.prototype,"relatedTableId",void 0),a([u({json:{read:!0,write:!0}})],gi.prototype,"relationshipTableId",void 0),a([u({json:{read:bE.read,write:bE.write}})],gi.prototype,"role",void 0),gi=a([_("esri.layers.support.Relationship")],gi);const bQ=gi;function K(e,t,r){return!!kN(e,t,r)}function Qd(e,t,r){return kN(e,t,r)}function kN(e,t,r){return e&&e.hasOwnProperty(t)?e[t]:r}const wQ={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function _Q(e){var r;const t=(r=e==null?void 0:e.supportedSpatialAggregationStatistics)==null?void 0:r.map(i=>i.toLowerCase());return{envelope:!!(t!=null&&t.includes("envelopeaggregate")),centroid:!!(t!=null&&t.includes("centroidaggregate")),convexHull:!!(t!=null&&t.includes("convexhullaggregate"))}}function Ch(e,t){var i;const r=(i=e==null?void 0:e.supportedOperationsWithCacheHint)==null?void 0:i.map(s=>s.toLowerCase());return!!(r!=null&&r.includes(t.toLowerCase()))}function $Q(e){var r;const t=(r=e==null?void 0:e.supportedStatisticTypes)==null?void 0:r.map(i=>i.toLowerCase());return{count:!!(t!=null&&t.includes("count")),sum:!!(t!=null&&t.includes("sum")),min:!!(t!=null&&t.includes("min")),max:!!(t!=null&&t.includes("max")),avg:!!(t!=null&&t.includes("avg")),var:!!(t!=null&&t.includes("var")),stddev:!!(t!=null&&t.includes("stddev")),percentileContinuous:!!(t!=null&&t.includes("percentile_continuous")),percentileDiscrete:!!(t!=null&&t.includes("percentile_discrete")),envelope:!!(t!=null&&t.includes("envelopeaggregate")),centroid:!!(t!=null&&t.includes("centroidaggregate")),convexHull:!!(t!=null&&t.includes("convexhullaggregate"))}}function PN(e,t){return{analytics:SQ(e),attachment:xQ(e),data:IQ(e),metadata:TQ(e),operations:MQ(e.capabilities,e,t),query:EQ(e,t),queryBins:OQ(e),queryRelated:AQ(e),queryTopFeatures:CQ(e),editing:FQ(e)}}function SQ(e){return{supportsCacheHint:Ch(e.advancedQueryCapabilities,"queryAnalytics")}}function xQ(e){const t=e.attachmentProperties,r={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:Ch(e.advancedQueryCapabilities,"queryAttachments"),supportsResize:K(e,"supportsAttachmentsResizing",!1)};return t&&Array.isArray(t)&&t.forEach(i=>{const s=wQ[i.name];s&&(r[s]=!!i.isEnabled)}),r}function IQ(e){return{isVersioned:K(e,"isDataVersioned",!1),isBranchVersioned:K(e,"isDataBranchVersioned",!1),supportsAttachment:K(e,"hasAttachments",!1),supportsM:K(e,"hasM",!1),supportsZ:K(e,"hasZ",!1)}}function TQ(e){return{supportsAdvancedFieldProperties:K(e,"supportsFieldDescriptionProperty",!1)}}function MQ(e,t,r){const i=e?e.toLowerCase().split(",").map(y=>y.trim()):[],s=r?Eh(r):null,n=i.includes(s!=null&&s.serverType==="MapServer"?"data":"query"),o=i.includes("editing")&&!t.datesInUnknownTimezone;let l=o&&i.includes("create"),c=o&&i.includes("delete"),p=o&&i.includes("update");const h=i.includes("changetracking"),f=t.advancedQueryCapabilities;return o&&!(l||c||p)&&(l=c=p=!0),{supportsCalculate:K(t,"supportsCalculate",!1),supportsTruncate:K(t,"supportsTruncate",!1),supportsValidateSql:K(t,"supportsValidateSql",!1),supportsAdd:l,supportsDelete:c,supportsEditing:o,supportsChangeTracking:h,supportsQuery:n,supportsQueryAnalytics:K(f,"supportsQueryAnalytic",!1),supportsQueryAttachments:K(f,"supportsQueryAttachments",!1),supportsQueryBins:K(f,"supportsQueryBins",!1),supportsQueryTopFeatures:K(f,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:K(t,"supportsAttachmentsResizing",!1),supportsSync:i.includes("sync"),supportsUpdate:p,supportsExceedsLimitStatistics:K(t,"supportsExceedsLimitStatistics",!1),supportsAsyncConvert3D:K(t,"supportsAsyncConvert3D",!1)}}function EQ(e,t){const r=e.advancedQueryCapabilities,i=e.ownershipBasedAccessControlForFeatures,s=e.archivingInfo,n=e.currentVersion,o=t==null?void 0:t.includes("MapServer"),l=!o||n>=k("mapserver-pbf-version-support"),c=XL(t),p=new Set((e.supportedQueryFormats??"").split(",").map(h=>h.toLowerCase().trim()));return{maxRecordCount:Qd(e,"maxRecordCount",void 0),maxRecordCountFactor:Qd(e,"maxRecordCountFactor",void 0),standardMaxRecordCount:Qd(e,"standardMaxRecordCount",void 0),supportedSpatialAggregationStatistics:_Q(r),supportsCacheHint:K(r,"supportsQueryWithCacheHint",!1)||Ch(r,"query"),supportsCentroid:K(r,"supportsReturningGeometryCentroid",!1),supportsCompactGeometry:c,supportsDefaultSpatialReference:K(r,"supportsDefaultSR",!1),supportsDisjointSpatialRelationship:K(r,"supportsDisjointSpatialRel",!1),supportsDistance:K(r,"supportsQueryWithDistance",!1),supportsDistinct:K(r,"supportsDistinct",e.supportsAdvancedQueries),supportsExtent:K(r,"supportsReturningQueryExtent",!1),supportsFormatPBF:l&&p.has("pbf"),supportsFullTextSearch:K(r,"supportsFullTextSearch",!1),supportsGeometryProperties:K(r,"supportsReturningGeometryProperties",!1),supportsHavingClause:K(r,"supportsHavingClause",!1),supportsHistoricMoment:K(s,"supportsQueryWithHistoricMoment",!1),supportsMaxRecordCountFactor:K(r,"supportsMaxRecordCountFactor",!1),supportsOrderBy:K(r,"supportsOrderBy",e.supportsAdvancedQueries),supportsPagination:K(r,"supportsPagination",!1),supportsPercentileStatistics:K(r,"supportsPercentileStatistics",!1),supportsQuantization:K(e,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:K(e,"supportsQuantizationEditMode",!1),supportsQueryByAnonymous:K(i,"allowAnonymousToQuery",!0),supportsQueryByOthers:K(i,"allowOthersToQuery",!0),supportsQueryGeometry:K(e,"supportsReturningQueryGeometry",!1),supportsResultType:K(r,"supportsQueryWithResultType",!1),supportsSpatialAggregationStatistics:K(r,"supportsSpatialAggregationStatistics",!1),supportsSqlExpression:K(r,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:K(e,"useStandardizedQueries",!1),supportsStatistics:K(r,"supportsStatistics",e.supportsStatistics),supportsTopFeaturesQuery:K(r,"supportsTopFeaturesQuery",!1),tileMaxRecordCount:Qd(e,"tileMaxRecordCount",void 0)}}function AQ(e){const t=e.advancedQueryCapabilities,r=K(t,"supportsAdvancedQueryRelated",!1);return{supportsPagination:K(t,"supportsQueryRelatedPagination",!1),supportsCount:r,supportsOrderBy:r,supportsCacheHint:Ch(t,"queryRelated")}}function CQ(e){return{supportsCacheHint:Ch(e.advancedQueryCapabilities,"queryTopFilter")}}function OQ(e){const t=e?e.queryBinsCapabilities:void 0;return{supportsDate:K(t,"supportsDateBin",!1),supportsFixedInterval:K(t,"supportsFixedIntervalBin",!1),supportsAutoInterval:K(t,"supportsAutoIntervalBin",!1),supportsFixedBoundaries:K(t,"supportsFixedBoundariesBin",!1),supportedStatistics:$Q(t)}}function FQ(e){const t=e.ownershipBasedAccessControlForFeatures,r=e?e.advancedEditingCapabilities:void 0;return{supportsGeometryUpdate:K(e,"allowGeometryUpdates",!0),supportsGlobalId:K(e,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:K(e,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:K(e,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:K(e,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:K(e,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:K(t,"allowAnonymousToDelete",!0),supportsDeleteByOthers:K(t,"allowOthersToDelete",!0),supportsUpdateByAnonymous:K(t,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:K(t,"allowOthersToUpdate",!0),supportsAsyncApplyEdits:K(r,"supportsAsyncApplyEdits",!1),zDefault:Qd(e,"zDefault",void 0)}}function gde(e){var t;return{operations:{supportsAppend:K(e,"supportsAppend",!1),supportsCoverageQuery:((t=e==null?void 0:e.playbackInfo)==null?void 0:t.klv["0601"])??!1,supportsExportClip:K(e,"supportsExportClip",!1),supportsExportFrameset:K(e,"supportsExportFrameset",!1),supportsMensuration:K(e,"supportsMensuration",!1),supportsUpdate:K(e,"supportsUpdate",!1)}}}let rn=class extends Oe(R){constructor(t){super(t),this.code=null,this.defaultValues={},this.domains=null,this.name=null}readDomains(t){if(!t)return null;const r={};for(const i of Object.keys(t))r[i]=Wg(t[i]);return r}writeDomains(t,r){var s;if(!t)return;const i={};for(const n of Object.keys(t))t[n]&&(i[n]=(s=t[n])==null?void 0:s.toJSON());r.domains=i}};a([u({type:Number,json:{write:!0}})],rn.prototype,"code",void 0),a([u({type:Object,json:{write:!0}})],rn.prototype,"defaultValues",void 0),a([u({json:{write:!0}})],rn.prototype,"domains",void 0),a([D("domains")],rn.prototype,"readDomains",null),a([B("domains")],rn.prototype,"writeDomains",null),a([u({type:String,json:{write:!0}})],rn.prototype,"name",void 0),rn=a([_("esri.layers.support.Subtype")],rn);const kQ=rn,PQ=e=>{let t=class extends e{constructor(){super(...arguments),this.copyright=null,this.capabilities=null,this.dateFieldsTimeZone=null,this.datesInUnknownTimezone=!1,this.definitionExpression=null,this.displayField=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.floorInfo=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.globalIdField=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.indexes=new(ne.ofType(As)),this.isTable=!1,this.layerId=void 0,this.maxScale=0,this.minScale=0,this.objectIdField=null,this.preferredTimeZone=null,this.relationships=null,this.returnM=void 0,this.returnZ=void 0,this.serviceDefinitionExpression=null,this.serviceItemId=null,this.sourceJSON=null,this.spatialReference=ge.WGS84,this.subtypeField=null,this.subtypes=null,this.trackIdField=null,this.version=void 0}get authenticationTriggerEvent(){var s;if(!this.url)return null;const{capabilities:r}=this;if(r){const{query:n,operations:o,editing:l}=r;if(!n.supportsQueryByOthers||!n.supportsQueryByAnonymous||o.supportsEditing&&!(l.supportsUpdateByOthers&&l.supportsUpdateByAnonymous&&l.supportsDeleteByOthers&&l.supportsDeleteByAnonymous))return"load"}if((s=this.serviceDefinitionExpression)!=null&&s.toLowerCase().includes("current_user"))return"load";if(this.userHasUpdateItemPrivileges){if(pQ(this))return"load";if(this.hasUpdateItemRestrictions)return r.operations.supportsQuery?"editing":"load"}if(this.userHasFullEditingPrivileges&&this.hasFullEditingRestrictions)return"editing";const i=this.editFieldsInfo;return(i!=null&&i.creatorField||i!=null&&i.editorField)&&(r!=null&&r.operations.supportsEditing)?"editing":null}readCapabilitiesFromService(r,i){return PN(i,this.url)}readEditingInfo(r,i){const{editingInfo:s}=i;return s?{lastEditDate:s.lastEditDate!=null?new Date(s.lastEditDate):null}:null}get effectiveCapabilities(){const r=this.capabilities;if(!r)return null;const i=M(r),{operations:s,editing:n}=i;return Ny(this)?(this.userHasUpdateItemPrivileges&&(s.supportsQuery=!0),i):this.userHasUpdateItemPrivileges?(s.supportsAdd=s.supportsDelete=s.supportsEditing=s.supportsQuery=s.supportsUpdate=n.supportsDeleteByOthers=n.supportsGeometryUpdate=n.supportsUpdateByOthers=!0,i):(this.userHasFullEditingPrivileges&&s.supportsEditing&&(s.supportsAdd=s.supportsDelete=s.supportsUpdate=n.supportsGeometryUpdate=!0),i)}readGlobalIdFieldFromService(r,i){return CN(i)}get hasFullEditingRestrictions(){const r=this.capabilities;if(!r||Ny(this))return!1;const{operations:i,editing:s}=r;return i.supportsEditing&&!(i.supportsAdd&&i.supportsDelete&&i.supportsUpdate&&s.supportsGeometryUpdate)}get hasUpdateItemRestrictions(){const r=this.capabilities;if(!r)return!1;const{operations:i,editing:s}=r;return Ny(this)?!i.supportsQuery:!(i.supportsAdd&&i.supportsDelete&&i.supportsEditing&&i.supportsQuery&&i.supportsUpdate&&s.supportsDeleteByOthers&&s.supportsGeometryUpdate&&s.supportsUpdateByOthers)}readIsTableFromService(r,i){return i.type==="Table"}readMaxScale(r,i){return i.effectiveMaxScale||r||0}readMinScale(r,i){return i.effectiveMinScale||r||0}readObjectIdFieldFromService(r,i){return ON(i)}readServiceDefinitionExpression(r,i){return i.definitionQuery||i.definitionExpression}set url(r){if(r==null)return void this._set("url",r);const i=CJ({layer:this,url:r,nonStandardUrlAllowed:!0,logger:G.getLogger(this)});this._set("url",i.url),i.layerId!=null&&this._set("layerId",i.layerId)}writeUrl(r,i,s,n){OJ(this,r,null,i,n)}readVersion(r,i){return nQ(i)}};return a([u({readOnly:!0})],t.prototype,"authenticationTriggerEvent",null),a([u({type:String,json:{origins:{service:{read:{source:"copyrightText"}}}}})],t.prototype,"copyright",void 0),a([u({readOnly:!0,json:{read:!1,origins:{service:{read:{source:["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","isDataBranchVersioned","isDataVersioned","maxRecordCount","maxRecordCountFactor","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"]}}}}})],t.prototype,"capabilities",void 0),a([D("service","capabilities")],t.prototype,"readCapabilitiesFromService",null),a([u(mm("dateFieldsTimeReference"))],t.prototype,"dateFieldsTimeZone",void 0),a([u({type:Boolean})],t.prototype,"datesInUnknownTimezone",void 0),a([u({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],t.prototype,"definitionExpression",void 0),a([u({type:String,json:{origins:{service:{read:{source:"displayField"}}}}})],t.prototype,"displayField",void 0),a([u({readOnly:!0,type:UY})],t.prototype,"editFieldsInfo",void 0),a([u({readOnly:!0})],t.prototype,"editingInfo",void 0),a([D("editingInfo")],t.prototype,"readEditingInfo",null),a([u({readOnly:!0})],t.prototype,"effectiveCapabilities",null),a([u((()=>{const r=M(LY),i=r.json.origins;return i["web-map"]={read:!1,write:!1},i["portal-item"]={read:!1,write:!1},r})())],t.prototype,"elevationInfo",void 0),a([u({type:vQ,json:{name:"layerDefinition.floorInfo",write:!0,origins:{"web-scene":{name:"layerDefinition.floorInfo",write:{enabled:!0,layerContainerTypes:Ut}}}}})],t.prototype,"floorInfo",void 0),a([u({type:it,json:{origins:{service:{read:{source:"extent"}}}}})],t.prototype,"fullExtent",void 0),a([u()],t.prototype,"gdbVersion",void 0),a([u({readOnly:!0,type:gQ,json:{read:{source:"geometryProperties"}}})],t.prototype,"geometryFieldsInfo",void 0),a([u({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:__.read}}}})],t.prototype,"geometryType",void 0),a([u({type:String})],t.prototype,"globalIdField",void 0),a([D("service","globalIdField",["globalIdField","fields"])],t.prototype,"readGlobalIdFieldFromService",null),a([u({readOnly:!0})],t.prototype,"hasFullEditingRestrictions",null),a([u({type:Boolean,json:{origins:{service:{read:!0}}}})],t.prototype,"hasM",void 0),a([u({readOnly:!0})],t.prototype,"hasUpdateItemRestrictions",null),a([u({type:Boolean,json:{origins:{service:{read:!0}}}})],t.prototype,"hasZ",void 0),a([u({readOnly:!0,type:TY})],t.prototype,"heightModelInfo",void 0),a([u({type:Date})],t.prototype,"historicMoment",void 0),a([u({type:ne.ofType(As),readOnly:!0})],t.prototype,"indexes",void 0),a([u({readOnly:!0})],t.prototype,"isTable",void 0),a([D("service","isTable",["type"])],t.prototype,"readIsTableFromService",null),a([u({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{read:!1,write:{target:"id"}}},read:!1}})],t.prototype,"layerId",void 0),a([u(DY)],t.prototype,"maxScale",void 0),a([D("service","maxScale",["maxScale","effectiveMaxScale"])],t.prototype,"readMaxScale",null),a([u(jY)],t.prototype,"minScale",void 0),a([D("service","minScale",["minScale","effectiveMinScale"])],t.prototype,"readMinScale",null),a([u({type:String})],t.prototype,"objectIdField",void 0),a([D("service","objectIdField",["objectIdField","fields"])],t.prototype,"readObjectIdFieldFromService",null),a([u(mm("preferredTimeReference"))],t.prototype,"preferredTimeZone",void 0),a([u({type:[bQ],readOnly:!0})],t.prototype,"relationships",void 0),a([u({type:Boolean})],t.prototype,"returnM",void 0),a([u({type:Boolean})],t.prototype,"returnZ",void 0),a([u({readOnly:!0,json:{write:!1}})],t.prototype,"serverGens",void 0),a([u({readOnly:!0})],t.prototype,"serviceDefinitionExpression",void 0),a([D("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],t.prototype,"readServiceDefinitionExpression",null),a([u({type:String,readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],t.prototype,"serviceItemId",void 0),a([u()],t.prototype,"sourceJSON",void 0),a([u({type:ge,json:{origins:{service:{read:{source:"extent.spatialReference"}}}}})],t.prototype,"spatialReference",void 0),a([u({type:String,readOnly:!0,json:{origins:{service:{read:!0}}}})],t.prototype,"subtypeField",void 0),a([u({type:[kQ],readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],t.prototype,"subtypes",void 0),a([u({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],t.prototype,"trackIdField",void 0),a([u(kY)],t.prototype,"url",null),a([B("url")],t.prototype,"writeUrl",null),a([u({json:{origins:{service:{read:!0}},read:!1}})],t.prototype,"version",void 0),a([D("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],t.prototype,"readVersion",null),t=a([_("esri.layers.mixins.FeatureLayerBase")],t),t};let fu=class extends Oe(R){constructor(t){super(t),this.expression=null,this.title=null,this.returnType=null}};a([u({type:String,json:{write:!0}})],fu.prototype,"expression",void 0),a([u({type:String,json:{write:!0}})],fu.prototype,"title",void 0),a([u({type:String,json:{write:!0}})],fu.prototype,"returnType",void 0),fu=a([_("esri.layers.support.ExpressionInfo")],fu);const i2=fu;var S_;let sn=S_=class extends R{constructor(e){super(e),this.isAutoGenerated=!1,this.name=null,this.alias=null,this.onStatisticField=null,this.onStatisticExpression=null,this.statisticType=null}clone(){return new S_({name:this.name,alias:this.alias,isAutoGenerated:this.isAutoGenerated,onStatisticExpression:M(this.onStatisticExpression),onStatisticField:this.onStatisticField,statisticType:this.statisticType})}};a([u({type:Boolean,json:{write:!0}})],sn.prototype,"isAutoGenerated",void 0),a([u({type:String,json:{write:!0}})],sn.prototype,"name",void 0),a([u({type:String,json:{write:!0}})],sn.prototype,"alias",void 0),a([u({type:String,json:{write:!0}})],sn.prototype,"onStatisticField",void 0),a([u({type:i2,json:{write:!0}})],sn.prototype,"onStatisticExpression",void 0),a([u({type:String,json:{write:!0}})],sn.prototype,"statisticType",void 0),sn=S_=a([_("esri.layers.support.AggregateField")],sn);const hl=sn;let Fo=class extends R{constructor(){super(...arguments),this.type=null}};a([u({type:["selection","cluster","binning"],readOnly:!0,json:{read:!1,write:!0}})],Fo.prototype,"type",void 0),Fo=a([_("esri.layers.support.FeatureReduction")],Fo);const s2="__begin__",n2="__end__",LQ=new RegExp(s2,"ig"),NQ=new RegExp(n2,"ig"),wE=new RegExp("^"+s2,"i"),_E=new RegExp(n2+"$","i"),Rm='"',RQ=Rm+" + ",jQ=" + "+Rm;function DQ(e){return e.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function VQ(e){return e.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function o2(e){const t={expression:"",type:"none"};return e.labelExpressionInfo?e.labelExpressionInfo.value?(t.expression=e.labelExpressionInfo.value,t.type="conventional"):e.labelExpressionInfo.expression&&(t.expression=e.labelExpressionInfo.expression,t.type="arcade"):e.labelExpression!=null&&(t.expression=DQ(e.labelExpression),t.type="conventional"),t}function UQ(e){const t=o2(e);if(!t)return null;switch(t.type){case"conventional":return x_(t.expression);case"arcade":return t.expression}return null}function zQ(e){const t=o2(e);if(!t)return null;switch(t.type){case"conventional":return GQ(t.expression);case"arcade":return LN(t.expression)}return null}function x_(e){let t;return e?(t=ns(e,r=>s2+'$feature["'+r+'"]'+n2),t=wE.test(t)?t.replace(wE,""):Rm+t,t=_E.test(t)?t.replace(_E,""):t+Rm,t=t.replaceAll(LQ,RQ).replaceAll(NQ,jQ)):t='""',t}const qQ=/^\s*\{([^}]+)\}\s*$/i;function GQ(e){const t=e==null?void 0:e.match(qQ);return(t==null?void 0:t[1].trim())||null}const BQ=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*$/i,WQ=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,HQ=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(.+)(\1)\s*\));?\s*$/i;function LN(e){if(!e)return null;let t=BQ.exec(e)||WQ.exec(e);return t?t[1]||t[3]:(t=HQ.exec(e),t?t[2]:null)}var I_;let no=I_=class extends R{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(e,t){return t.value?x_(t.value):e}writeExpression(e,t,r){this.value!=null&&(e=x_(this.value)),e!=null&&(t[r]=e)}clone(){return new I_({expression:this.expression,title:this.title,value:this.value})}};a([u({type:String,json:{write:{writerEnsuresNonNull:!0}}})],no.prototype,"expression",void 0),a([D("expression",["expression","value"])],no.prototype,"readExpression",null),a([B("expression")],no.prototype,"writeExpression",null),a([u({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],no.prototype,"title",void 0),a([u({json:{read:!1,write:!1}})],no.prototype,"value",void 0),no=I_=a([_("esri.layers.support.LabelExpressionInfo")],no);const NN=no;var T_;const mf=new ve({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function gf(e,t,r){return{enabled:!aw(r==null?void 0:r.layer)}}function RN(e){var t;return!e||e.origin!=="service"&&((t=e.layer)==null?void 0:t.type)!=="map-image"}function JQ(e){return(e==null?void 0:e.type)==="map-image"}function jN(e){var t,r;return!!JQ(e)&&!!((r=(t=e.capabilities)==null?void 0:t.exportMap)!=null&&r.supportsArcadeExpressionForLabeling)}function ZQ(e){return RN(e)||jN(e==null?void 0:e.layer)}let lt=T_=class extends R{static evaluateWhere(e,t){const r=(i,s,n)=>{switch(s){case"=":return i==n;case"<>":return i!=n;case">":return i>n;case">=":return i>=n;case"<":return i<n;case"<=":return i<=n}return!1};try{if(e==null)return!0;const i=e.split(" ");if(i.length===3)return r(t[i[0]],i[1],i[2]);if(i.length===7){const s=r(t[i[0]],i[1],i[2]),n=i[3],o=r(t[i[4]],i[5],i[6]);switch(n){case"AND":return s&&o;case"OR":return s||o}}return!1}catch{}}constructor(e){super(e),this.type="label",this.name=null,this.allowOverrun=!1,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition="curved",this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.repeatLabelDistance=null,this.symbol=WG,this.useCodedValues=void 0,this.where=null}readLabelExpression(e,t){const r=t.labelExpressionInfo;if(!r||!r.value&&!r.expression)return e}writeLabelExpression(e,t,r){if(this.labelExpressionInfo){if(this.labelExpressionInfo.value!=null)e=VQ(this.labelExpressionInfo.value);else if(this.labelExpressionInfo.expression!=null){const i=LN(this.labelExpressionInfo.expression);i&&(e="["+i+"]")}}e!=null&&(t[r]=e)}writeLabelExpressionInfo(e,t,r,i){if(e==null&&this.labelExpression!=null&&RN(i))e=new NN({expression:this.getLabelExpressionArcade()});else if(!e)return;const s=e.toJSON(i);s.expression&&(t[r]=s)}writeMaxScale(e,t){(e||this.minScale)&&(t.maxScale=e)}writeMinScale(e,t){(e||this.maxScale)&&(t.minScale=e)}getLabelExpression(){return o2(this)}getLabelExpressionArcade(){return UQ(this)}getLabelExpressionSingleField(){return zQ(this)}hash(){return JSON.stringify(this)}clone(){return new T_({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:M(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:M(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}};a([u({type:String,json:{write:!0}})],lt.prototype,"name",void 0),a([u({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1},"portal-item":{default:!1,write:{overridePolicy:gf}}}}})],lt.prototype,"allowOverrun",void 0),a([u({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1},"portal-item":{default:"static",write:{overridePolicy:gf}}}}})],lt.prototype,"deconflictionStrategy",void 0),a([u({type:String,json:{write:{overridePolicy(e,t,r){return this.labelExpressionInfo&&(r==null?void 0:r.origin)==="service"&&jN(r.layer)?{enabled:!1}:{allowNull:!0}}}}})],lt.prototype,"labelExpression",void 0),a([D("labelExpression")],lt.prototype,"readLabelExpression",null),a([B("labelExpression")],lt.prototype,"writeLabelExpression",null),a([u({type:NN,json:{write:{overridePolicy:(e,t,r)=>ZQ(r)?{allowNull:!0}:{enabled:!1}}}})],lt.prototype,"labelExpressionInfo",void 0),a([B("labelExpressionInfo")],lt.prototype,"writeLabelExpressionInfo",null),a([u({type:mf.apiValues,json:{type:mf.jsonValues,read:mf.read,write:mf.write}})],lt.prototype,"labelPlacement",void 0),a([u({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],lt.prototype,"labelPosition",void 0),a([u({type:Number})],lt.prototype,"maxScale",void 0),a([B("maxScale")],lt.prototype,"writeMaxScale",null),a([u({type:Number})],lt.prototype,"minScale",void 0),a([B("minScale")],lt.prototype,"writeMinScale",null),a([u({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:gf}}}}})],lt.prototype,"repeatLabel",void 0),a([u({type:Number,cast:Se,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:gf}}}}})],lt.prototype,"repeatLabelDistance",void 0),a([u({types:Yq,json:{origins:{"web-scene":{types:Qq,write:tT,default:null}},write:tT,default:null}})],lt.prototype,"symbol",void 0),a([u({type:Boolean,json:{write:!0}})],lt.prototype,"useCodedValues",void 0),a([u({type:String,json:{write:!0}})],lt.prototype,"where",void 0),lt=T_=a([_("esri.layers.support.LabelClass")],lt);const Qg=lt;var M_;let ar=M_=class extends Fo{constructor(e){super(e),this.type="binning",this.binType="geohash",this.fixedBinLevel=null,this.labelingInfo=null,this.labelsVisible=!0,this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.size=Se("12px"),this.fields=[],this.renderer=null}writeFields(e,t,r){const i=e.filter(s=>s.statisticType!=="avg_angle").map(s=>s.toJSON());pr(r,i,t)}readRenderer(e,t,r){var s;const i=(s=t.drawingInfo)==null?void 0:s.renderer;return i?Wp(i,t,r)??void 0:r2(t,r)}clone(){return new M_({fields:M(this.fields),fixedBinLevel:this.fixedBinLevel,labelingInfo:M(this.labelingInfo),labelsVisible:this.labelsVisible,maxScale:this.maxScale,popupEnabled:this.popupEnabled,popupTemplate:M(this.popupTemplate),renderer:M(this.renderer),binType:M(this.binType),size:this.size})}};a([re({binning:"binning"})],ar.prototype,"type",void 0),a([re({geohash:"geohash",square:"square"}),u({type:["geohash","square"]})],ar.prototype,"binType",void 0),a([u({type:Number,json:{write:!0}})],ar.prototype,"fixedBinLevel",void 0),a([u({type:[Qg],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],ar.prototype,"labelingInfo",void 0),a([u(e2)],ar.prototype,"labelsVisible",void 0),a([u({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],ar.prototype,"maxScale",void 0),a([u(XS)],ar.prototype,"popupEnabled",void 0),a([u({type:Cc,json:{name:"popupInfo",write:!0}})],ar.prototype,"popupTemplate",void 0),a([u({cast:e=>e==="auto"?e:wc(Se(e))})],ar.prototype,"size",void 0),a([u({type:[hl],json:{write:!0}})],ar.prototype,"fields",void 0),a([B("fields")],ar.prototype,"writeFields",null),a([u({types:zg,json:{write:{target:"drawingInfo.renderer"}}})],ar.prototype,"renderer",void 0),a([D("renderer",["drawingInfo.renderer"])],ar.prototype,"readRenderer",null),ar=M_=a([_("esri.layers.support.FeatureReductionBinning")],ar);const DN=ar;var E_;function $E(e){var t;return e.type==="simple"&&!((t=e.visualVariables)!=null&&t.length)}let $t=E_=class extends R{constructor(e){super(e),this.type="cluster",this.clusterRadius=Se("80px"),this.clusterMinSize=Se("12px"),this.clusterMaxSize=Se("50px"),this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.renderer=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=[]}readRenderer(e,t,r){var s,n;const i=(s=t.drawingInfo)==null?void 0:s.renderer;return(n=i==null?void 0:i.authoringInfo)!=null&&n.isAutoGenerated?null:i?$E(i)?null:Wp(i,t,r)??void 0:r2(t,r)}readSymbol(e,t,r){var s,n;const i=(s=t.drawingInfo)==null?void 0:s.renderer;if((n=i==null?void 0:i.authoringInfo)!=null&&n.isAutoGenerated)return null;if(i&&$E(i)){const o=Wp(i,t,r);return o==null?void 0:o.symbol}return null}writeSymbol(e,t,r,i){var n,o;const s=(o=(n=this.renderer)==null?void 0:n.authoringInfo)==null?void 0:o.isAutoGenerated;if(!this.renderer||s){const l=new Wo({symbol:e});t.drawingInfo={renderer:l.write({},i)}}}writeFields(e,t,r){const i=e.filter(s=>s.statisticType!=="avg_angle").map(s=>s.toJSON());pr(r,i,t)}readFields(e,t,r){return e.filter(i=>!i.isAutoGenerated).map(i=>hl.fromJSON(i))}clone(){return new E_({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:M(this.labelingInfo),labelsVisible:this.labelsVisible,fields:M(this.fields),maxScale:this.maxScale,renderer:M(this.renderer),symbol:M(this.symbol),popupEnabled:this.popupEnabled,popupTemplate:M(this.popupTemplate)})}};a([u({type:["cluster"],readOnly:!0,json:{write:!0}})],$t.prototype,"type",void 0),a([u({cast:e=>e==="auto"?e:wc(Se(e)),json:{write:!0}})],$t.prototype,"clusterRadius",void 0),a([u({type:Number,cast:Se,json:{write:!0}})],$t.prototype,"clusterMinSize",void 0),a([u({type:Number,cast:Se,json:{write:!0}})],$t.prototype,"clusterMaxSize",void 0),a([u({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],$t.prototype,"maxScale",void 0),a([u(XS)],$t.prototype,"popupEnabled",void 0),a([u({type:Cc,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],$t.prototype,"popupTemplate",void 0),a([u({types:zg,json:{write:{target:"drawingInfo.renderer"}}})],$t.prototype,"renderer",void 0),a([D("renderer",["drawingInfo.renderer"])],$t.prototype,"readRenderer",null),a([u({types:Jq})],$t.prototype,"symbol",void 0),a([D("symbol",["drawingInfo.renderer"])],$t.prototype,"readSymbol",null),a([B("symbol")],$t.prototype,"writeSymbol",null),a([u({type:[Qg],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],$t.prototype,"labelingInfo",void 0),a([u(e2)],$t.prototype,"labelsVisible",void 0),a([u({type:[hl],json:{write:!0}})],$t.prototype,"fields",void 0),a([B("fields")],$t.prototype,"writeFields",null),a([D("fields")],$t.prototype,"readFields",null),$t=E_=a([_("esri.layers.support.FeatureReductionCluster")],$t);const VN=$t;var A_;let Ry=A_=class extends Fo{constructor(e){super(e),this.type="selection"}clone(){return new A_}};a([u({type:["selection"]})],Ry.prototype,"type",void 0),Ry=A_=a([_("esri.layers.support.FeatureReductionSelection")],Ry);const SE=Ry,xE={key:"type",base:Fo,typeMap:{cluster:VN,binning:DN}},YQ={types:{key:"type",base:Fo,typeMap:{selection:SE,cluster:VN,binning:DN}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:xE},"portal-item":{types:xE},"web-scene":{types:{key:"type",base:Fo,typeMap:{selection:SE}},name:"layerDefinition.featureReduction",write:{layerContainerTypes:Ut}}}}},Ll={Base64:0,Hex:1,String:2,Raw:3},Wu=8,UN=(1<<Wu)-1;function xo(e,t){const r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function QQ(e){const t=[];for(let r=0,i=e.length*Wu;r<i;r+=Wu)t[r>>5]|=(e.charCodeAt(r/Wu)&UN)<<r%32;return t}function KQ(e){const t=[];for(let r=0,i=32*e.length;r<i;r+=Wu)t.push(String.fromCharCode(e[r>>5]>>>r%32&UN));return t.join("")}function XQ(e){const t="0123456789abcdef",r=[];for(let i=0,s=4*e.length;i<s;i++)r.push(t.charAt(e[i>>2]>>i%4*8+4&15)+t.charAt(e[i>>2]>>i%4*8&15));return r.join("")}function eK(e){const t="=",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=[];for(let s=0,n=4*e.length;s<n;s+=3){const o=(e[s>>2]>>s%4*8&255)<<16|(e[s+1>>2]>>(s+1)%4*8&255)<<8|e[s+2>>2]>>(s+2)%4*8&255;for(let l=0;l<4;l++)8*s+6*l>32*e.length?i.push(t):i.push(r.charAt(o>>6*(3-l)&63))}return i.join("")}function tK(e,t){return e<<t|e>>>32-t}function Kg(e,t,r,i,s,n){return xo(tK(xo(xo(t,e),xo(i,n)),s),r)}function er(e,t,r,i,s,n,o){return Kg(t&r|~t&i,e,t,s,n,o)}function tr(e,t,r,i,s,n,o){return Kg(t&i|r&~i,e,t,s,n,o)}function rr(e,t,r,i,s,n,o){return Kg(t^r^i,e,t,s,n,o)}function ir(e,t,r,i,s,n,o){return Kg(r^(t|~i),e,t,s,n,o)}function rK(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;let r=1732584193,i=-271733879,s=-1732584194,n=271733878;for(let o=0;o<e.length;o+=16){const l=r,c=i,p=s,h=n;r=er(r,i,s,n,e[o],7,-680876936),n=er(n,r,i,s,e[o+1],12,-389564586),s=er(s,n,r,i,e[o+2],17,606105819),i=er(i,s,n,r,e[o+3],22,-1044525330),r=er(r,i,s,n,e[o+4],7,-176418897),n=er(n,r,i,s,e[o+5],12,1200080426),s=er(s,n,r,i,e[o+6],17,-1473231341),i=er(i,s,n,r,e[o+7],22,-45705983),r=er(r,i,s,n,e[o+8],7,1770035416),n=er(n,r,i,s,e[o+9],12,-1958414417),s=er(s,n,r,i,e[o+10],17,-42063),i=er(i,s,n,r,e[o+11],22,-1990404162),r=er(r,i,s,n,e[o+12],7,1804603682),n=er(n,r,i,s,e[o+13],12,-40341101),s=er(s,n,r,i,e[o+14],17,-1502002290),i=er(i,s,n,r,e[o+15],22,1236535329),r=tr(r,i,s,n,e[o+1],5,-165796510),n=tr(n,r,i,s,e[o+6],9,-1069501632),s=tr(s,n,r,i,e[o+11],14,643717713),i=tr(i,s,n,r,e[o],20,-373897302),r=tr(r,i,s,n,e[o+5],5,-701558691),n=tr(n,r,i,s,e[o+10],9,38016083),s=tr(s,n,r,i,e[o+15],14,-660478335),i=tr(i,s,n,r,e[o+4],20,-405537848),r=tr(r,i,s,n,e[o+9],5,568446438),n=tr(n,r,i,s,e[o+14],9,-1019803690),s=tr(s,n,r,i,e[o+3],14,-187363961),i=tr(i,s,n,r,e[o+8],20,1163531501),r=tr(r,i,s,n,e[o+13],5,-1444681467),n=tr(n,r,i,s,e[o+2],9,-51403784),s=tr(s,n,r,i,e[o+7],14,1735328473),i=tr(i,s,n,r,e[o+12],20,-1926607734),r=rr(r,i,s,n,e[o+5],4,-378558),n=rr(n,r,i,s,e[o+8],11,-2022574463),s=rr(s,n,r,i,e[o+11],16,1839030562),i=rr(i,s,n,r,e[o+14],23,-35309556),r=rr(r,i,s,n,e[o+1],4,-1530992060),n=rr(n,r,i,s,e[o+4],11,1272893353),s=rr(s,n,r,i,e[o+7],16,-155497632),i=rr(i,s,n,r,e[o+10],23,-1094730640),r=rr(r,i,s,n,e[o+13],4,681279174),n=rr(n,r,i,s,e[o],11,-358537222),s=rr(s,n,r,i,e[o+3],16,-722521979),i=rr(i,s,n,r,e[o+6],23,76029189),r=rr(r,i,s,n,e[o+9],4,-640364487),n=rr(n,r,i,s,e[o+12],11,-421815835),s=rr(s,n,r,i,e[o+15],16,530742520),i=rr(i,s,n,r,e[o+2],23,-995338651),r=ir(r,i,s,n,e[o],6,-198630844),n=ir(n,r,i,s,e[o+7],10,1126891415),s=ir(s,n,r,i,e[o+14],15,-1416354905),i=ir(i,s,n,r,e[o+5],21,-57434055),r=ir(r,i,s,n,e[o+12],6,1700485571),n=ir(n,r,i,s,e[o+3],10,-1894986606),s=ir(s,n,r,i,e[o+10],15,-1051523),i=ir(i,s,n,r,e[o+1],21,-2054922799),r=ir(r,i,s,n,e[o+8],6,1873313359),n=ir(n,r,i,s,e[o+15],10,-30611744),s=ir(s,n,r,i,e[o+6],15,-1560198380),i=ir(i,s,n,r,e[o+13],21,1309151649),r=ir(r,i,s,n,e[o+4],6,-145523070),n=ir(n,r,i,s,e[o+11],10,-1120210379),s=ir(s,n,r,i,e[o+2],15,718787259),i=ir(i,s,n,r,e[o+9],21,-343485551),r=xo(r,l),i=xo(i,c),s=xo(s,p),n=xo(n,h)}return[r,i,s,n]}function zN(e,t=Ll.Hex){const r=t||Ll.Base64,i=rK(QQ(e),e.length*Wu);switch(r){case Ll.Raw:return i;case Ll.Hex:return XQ(i);case Ll.String:return KQ(i);case Ll.Base64:return eK(i)}}const iK=()=>G.getLogger("esri.views.2d.layers.support.clusterUtils");k.add("esri-cluster-arcade-enabled",!0);const sK=k("esri-cluster-arcade-enabled"),nK=new Set(["simple-line","simple-fill","picture-fill"]);function IE(e,t){let r=t.clone();if(!oK(r))return r;if(t.getSymbols().some(i=>nK.has(i.type))&&(r=new Wo({symbol:new qs})),r.authoringInfo||(r.authoringInfo=new MS),r.authoringInfo.isAutoGenerated=!0,"visualVariables"in r){const i=(r.visualVariables||[]).filter(s=>s.valueExpression!=="$view.scale");i.forEach(s=>{s.type==="rotation"?s.field?s.field=Xo(e,s.field,"avg_angle","number"):s.valueExpression&&(s.field=id(e,s.valueExpression,"avg_angle","number"),s.valueExpression=null):s.normalizationField?(s.field=Xo(e,s.field,"avg_norm","number",s.normalizationField),s.normalizationField=null):s.field?s.field=Xo(e,s.field,"avg","number"):s.valueExpression&&(s.field=id(e,s.valueExpression,"avg","number"),s.valueExpression=null)}),r.visualVariables=i}switch(r.type){case"simple":break;case"pie-chart":for(const i of r.attributes)i.field?i.field=Xo(e,i.field,"sum","number"):i.valueExpression&&(i.field=id(e,i.valueExpression,"sum","number"),i.valueExpression=null);break;case"unique-value":r.field?r.field=Xo(e,r.field,"mode","string"):r.valueExpression&&(r.field=id(e,r.valueExpression,"mode","string"),r.valueExpression=null);break;case"class-breaks":r.normalizationField?(r.field=Xo(e,r.field,"avg_norm","number",r.normalizationField),r.normalizationField=null):r.field?r.field=Xo(e,r.field,"avg","number"):r.valueExpression&&(r.field=id(e,r.valueExpression,"avg","number"),r.valueExpression=null)}return r}const oK=e=>{const t=r=>iK().error(new O("Unsupported-renderer",r,{renderer:e}));if(!e)return!1;switch(e.type){case"unique-value":if(e.field2||e.field3)return t("FeatureReductionCluster does not support multi-field UniqueValueRenderers"),!1;break;case"class-breaks":if(e.normalizationField){const r=e.normalizationType;if(r!=="field")return t(`FeatureReductionCluster does not support a normalizationType of ${r}`),!1}break;case"simple":case"pie-chart":break;default:return t(`FeatureReductionCluster does not support renderers of type ${e.type}`),!1}if(!sK){if("valueExpression"in e&&e.valueExpression)return t("FeatureReductionCluster does not currently support renderer.valueExpression. Support will be added in a future release"),!1;if(("visualVariables"in e&&e.visualVariables||[]).some(r=>!(!("valueExpression"in r)||!r.valueExpression)))return t("FeatureReductionCluster does not currently support visualVariables with a valueExpression. Support will be added in a future release"),!1}return!0};function aK(e,t,r){switch(e){case"sum":return`cluster_sum_${t}`;case"avg":case"avg_angle":return`cluster_avg_${t}`;case"mode":return`cluster_type_${t}`;case"avg_norm":{const i=r,s="field",n=t.toLowerCase()+",norm:"+s+","+i.toLowerCase();return"cluster_avg_"+zN(n)}}}function id(e,t,r,i){const s=zN(t),n=r==="mode"?`cluster_type_${s}`:r==="sum"?`cluster_sum_${s}`:`cluster_avg_${s}`;return e.some(o=>o.name===n)||e.push(new hl({name:n,isAutoGenerated:!0,onStatisticExpression:new i2({expression:t,returnType:i}),statisticType:r})),n}function Xo(e,t,r,i,s){if(t==="cluster_count"||e.some(o=>o.name===t))return t;const n=aK(r,t,s);return e.some(o=>o.name===n)||(r==="avg_norm"?e.push(new hl({name:n,isAutoGenerated:!0,onStatisticExpression:new i2({expression:`$feature.${t} / $feature.${s}`,returnType:i}),statisticType:"avg"})):e.push(new hl({name:n,isAutoGenerated:!0,onStatisticField:t,statisticType:r}))),n}const lK=e=>{let t=class extends e{constructor(...r){super(...r),this.addHandles(W(()=>this.renderer,()=>{if(this.featureReduction){const i=this._normalizeFeatureReduction(this.featureReduction);this._set("featureReduction",i)}},Pg))}set featureReduction(r){const i=this._normalizeFeatureReduction(r);this._set("featureReduction",i)}set renderer(r){}_withClusterVariable(r,i,s){const n=r.clone();return"visualVariables"in n&&(n.visualVariables||(n.visualVariables=[]),n.visualVariables.some(o=>o.type==="size")||n.visualVariables.push(new Dg({field:"cluster_count",stops:[new vy({value:1}),new vy({useMinValue:!0,size:i}),new vy({useMaxValue:!0,size:s})]}))),n}_normalizeFeatureReduction(r){var f;if((r==null?void 0:r.type)!=="cluster")return r;const i=r.clone(),s=[new hl({name:"cluster_count",alias:"cluster_count",isAutoGenerated:!0,statisticType:"count"})],n=(i.fields??[]).filter(y=>!y.isAutoGenerated),o=r.renderer&&!((f=r.renderer.authoringInfo)!=null&&f.isAutoGenerated),{clusterMinSize:l,clusterMaxSize:c}=i;if(o){i.fields=[...s,...n];const y=this._withClusterVariable(i.renderer,l,c);return i.effectiveFeatureRenderer=y,i.effectiveClusterRenderer=y,i}if(r.symbol){if(i.fields=[...s,...n],i.renderer=null,!this.renderer)return i.effectiveFeatureRenderer=null,i.effectiveClusterRenderer=null,i;const y=IE(s,this.renderer),m=this._withClusterVariable(y,l,c),g="visualVariables"in m&&m.visualVariables?m.visualVariables:[],b=new Wo({symbol:r.symbol,visualVariables:g});return i.fields=[...s,...n],i.effectiveFeatureRenderer=m,i.effectiveClusterRenderer=b,i}if(!this.renderer)return r;const p=IE(s,this.renderer);i.fields=[...s,...n],i.renderer=p;const h=this._withClusterVariable(p,l,c);return i.effectiveFeatureRenderer=h,i.effectiveClusterRenderer=h,i}};return a([u(YQ)],t.prototype,"featureReduction",null),t=a([_("esri.layers.mixins.FeatureReductionLayer")],t),t},TE={ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GeoRSS:!0,GroupLayer:!0,KML:!0,KnowledgeGraphLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},ME={ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0},EE={ArcGISFeatureLayer:!0,SubtypeGroupTable:!0},uK={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GroupLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,KML:!0,LineOfSightLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,RasterDataLayer:!0,VectorTileLayer:!0,ViewshedLayer:!0,Voxel:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/basemap":{ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-scene/tables":{ArcGISFeatureLayer:!0},"web-map/operational-layers":TE,"web-map/basemap":ME,"web-map/tables":EE,"link-chart/operational-layers":{...TE,LinkChartLayer:!0},"link-chart/basemap":ME,"link-chart/tables":EE,"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,BuildingSceneLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,MediaLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,SubtypeGroupLayer:!0}},cK=e=>{let t=class extends e{constructor(){super(...arguments),this.persistenceEnabled=!0,this.title=null}readId(r,i,s){var n;return((n=s==null?void 0:s.portalItem)==null?void 0:n.type)==="Group Layer"?void 0:r}writeListMode(r,i,s,n){(n&&n.layerContainerType==="ground"||r&&gD(this,s,{},n))&&(i[s]=r)}writeOperationalLayerType(r,i,s,n){r&&(n==null?void 0:n.layerContainerType)!=="tables"&&(i.layerType=r)}writeTitle(r,i){i.title=r??"Layer"}readTimeExtent(r){return r?Vo.fromArray(r):null}writeTimeExtent(r,i,s,n){r&&n.layerContainerType!=="tables"&&(r.isEmpty?n!=null&&n.messages&&n.messages.push(new O("layer:invalid-visibilityTimeExtent","visibilityTimeExtent cannot be empty")):i[s]=r.toArray())}read(r,i){i&&(i.layer=this),fD(this,r,s=>super.read(r,s),i)}write(r,i){var o,l;if(!this.persistenceEnabled&&!(i!=null&&i.ignorePersistenceEnabled))return null;if(i!=null&&i.origin){const c=`${i.origin}/${i.layerContainerType||"operational-layers"}`,p=uK[c];let h=!!(p!=null&&p[this.operationalLayerType]);if(this.operationalLayerType==="ArcGISTiledElevationServiceLayer"&&c==="web-scene/operational-layers"&&(h=!1),this.operationalLayerType==="ArcGISDimensionLayer"&&c==="web-map/operational-layers"&&(h=!1),!h)return(o=i.messages)==null||o.push(new O("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${c}'`,{layer:this})),null}const s=super.write(r,{...i,layer:this}),n=!!i&&!!i.messages&&!!i.messages.filter(c=>c instanceof O&&c.name==="web-document-write:property-required").length;return _g(s==null?void 0:s.url)?((l=i==null?void 0:i.messages)==null||l.push(new O("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&n?null:s}beforeSave(){}};return a([u({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],t.prototype,"id",void 0),a([D("id",["id"])],t.prototype,"readId",null),a([u(EN)],t.prototype,"listMode",void 0),a([B("listMode")],t.prototype,"writeListMode",null),a([u({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1},"web-scene":{name:"layerType",read:!1,write:{enabled:!0,ignoreOrigin:!0,layerContainerTypes:Ut}}}}})],t.prototype,"operationalLayerType",void 0),a([B("operationalLayerType")],t.prototype,"writeOperationalLayerType",null),a([u(g_)],t.prototype,"opacity",void 0),a([u({type:Boolean,readOnly:!1})],t.prototype,"persistenceEnabled",void 0),a([u({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],t.prototype,"title",void 0),a([B("title"),B(["web-scene"],"title")],t.prototype,"writeTitle",null),a([u({type:Vo,json:{origins:{"web-scene":{write:{layerContainerTypes:Ut}}}}})],t.prototype,"visibilityTimeExtent",void 0),a([D("visibilityTimeExtent")],t.prototype,"readTimeExtent",null),a([B(["portal-item","web-map","web-scene"],"visibilityTimeExtent",{visibilityTimeExtent:{type:[[je,pg]]}})],t.prototype,"writeTimeExtent",null),a([u({type:Boolean,json:{origins:{"web-scene":{name:"visibility",write:{enabled:!0,layerContainerTypes:Ut}}},name:"visibility",write:!0}})],t.prototype,"visible",void 0),t=a([_("esri.layers.mixins.OperationalLayer")],t),t};var C_;const vf=new ve({asc:"ascending",desc:"descending"});let yu=C_=class extends R{constructor(e){super(e),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new C_({field:this.field,valueExpression:this.valueExpression,order:this.order})}};a([u({type:String,json:{write:!0}})],yu.prototype,"field",void 0),a([u({type:String,json:{write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],yu.prototype,"valueExpression",void 0),a([u({type:vf.apiValues,json:{type:vf.jsonValues,read:vf.read,write:vf.write}})],yu.prototype,"order",void 0),yu=C_=a([_("esri.layers.support.OrderByInfo")],yu);const qN=yu;function dK(e,t,r){if(!e)return null;const i=e.find(n=>!!n.field);if(!i)return null;const s=new qN;return s.read(i,r),[s]}function pK(e,t,r,i){const s=e.find(n=>!!n.field);s&&pr(r,[s.toJSON()],t)}const hK={type:[qN],json:{origins:{"web-scene":{write:!1,read:!1}},name:"layerDefinition.orderBy",read:{reader:dK},write:{writer:pK}}},fK=e=>{let t=class extends e{constructor(){super(...arguments),this.orderBy=null}};return a([u(hK)],t.prototype,"orderBy",void 0),t=a([_("esri.layers.mixins.OrderedLayer")],t),t};let nn=class extends $e{constructor(t){super(t),this.portalItem=null}normalizeCtorArgs(t){return t!=null&&t.portalItem&&t.path?{...t,path:AE(t.path,t.portalItem)}:t}set path(t){t!=null&&ti(t)?G.getLogger(this).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",t)}_castPath(t){return AE(t,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get cdnUrl(){return this.portalItem&&this.path?`${this.portalItem.itemCdnUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(t="json",r){const i=this.cdnUrl;if(i==null)throw new O("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(i,{responseType:t,query:{token:this.portalItem.apiKey,_ts:r!=null&&r.cacheBust?Date.now():null},signal:r==null?void 0:r.signal})}async update(t,r){const{addOrUpdateResources:i}=await j(()=>import("./resourceUtils-CVHf2dlv.js"),[]);return await i(this.portalItem,[{resource:this,content:t,compress:r==null?void 0:r.compress,access:r==null?void 0:r.access}],"update",r),this}hasPath(){return this.path!=null}};function AE(e,t){return e==null?e:(e=e.replace(/^\/+/,""),t!=null&&ti(e)&&(e=L$(e,t.itemUrl)),e==null?void 0:e.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}a([u()],nn.prototype,"portalItem",void 0),a([u({type:String,value:null})],nn.prototype,"path",null),a([Ce("path")],nn.prototype,"_castPath",null),a([u({type:String,readOnly:!0})],nn.prototype,"url",null),a([u({type:String,readOnly:!0})],nn.prototype,"cdnUrl",null),a([u({type:String,readOnly:!0})],nn.prototype,"itemRelativeUrl",null),nn=a([_("esri.portal.PortalItemResource")],nn);const yK=nn;let Kd=class extends $e{constructor(t){super(t),this.created=null,this.rating=null}};a([u()],Kd.prototype,"created",void 0),a([u()],Kd.prototype,"rating",void 0),Kd=a([_("esri.portal.PortalRating")],Kd);const cv=Kd;var Oa;const mK=new Set(["3DTiles Service","CSV","Feature Collection","Feature Service","Feed","GeoJson","Group Layer","Image Service","KML","Map Service","Media Layer","Scene Service","Stream Service","Vector Tile Service","WFS","WMS","WMTS"]),gK=new Set(["KML","GeoJson","CSV"]);let le=Oa=class extends hg(Pc){static from(e){return y$(Oa,e)}constructor(e){super(e),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.classification=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.isOrgItem=!1,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.sourceUrl=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}destroy(){this.portal=null}get displayName(){const e=this.type,t=this.typeKeywords||[];let r=e;return e==="Feature Service"||e==="Feature Collection"?r=t.includes("Table")?"Table":t.includes("Route Layer")?"Route Layer":t.includes("Markup")?"Markup":"Feature Layer":e==="Image Service"?r=t.includes("Elevation 3D Layer")?"Elevation Layer":t.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":e==="Scene Service"?r="Scene Layer":e==="Video Service"?r="Video Layer":e==="Scene Package"?r="Scene Layer Package":e==="Stream Service"?r="Feature Layer":e==="Geoprocessing Service"?r=t.includes("Web Tool")?"Tool":"Geoprocessing Service":e==="Geoenrichment Service"?r="GeoEnrichment Service":e==="Geocoding Service"?r="Locator":e==="Microsoft Powerpoint"?r="Microsoft PowerPoint":e==="GeoJson"?r="GeoJSON":e==="Globe Service"?r="Globe Layer":e==="Vector Tile Service"?r="Tile Layer":e==="netCDF"?r="NetCDF":e==="Map Service"?r=t.includes("Spatiotemporal")||!t.includes("Hosted Service")&&!t.includes("Tiled")||t.includes("Relational")?"Map Image Layer":"Tile Layer":e!=null&&e.toLowerCase().includes("add in")?r=e.replaceAll(/(add in)/gi,"Add-In"):e==="datastore catalog service"?r="Big Data File Share":e==="Compact Tile Package"?r="Tile Package (tpkx)":e==="Raster function template"?r="Raster Function Template":e==="OGCFeatureServer"?r="OGC Feature Layer":e==="web mapping application"&&t.includes("configurableApp")?r="Instant App":e==="Insights Page"?r="Insights Report":e==="Excalibur Imagery Project"?r="Excalibur Project":e==="3DTiles Service"?r="3D tiles layer":e==="3DTiles Package"&&(r="3D tiles package"),r}readExtent(e){return e&&e.length?new it(e[0][0],e[0][1],e[1][0],e[1][1]):null}get iconUrl(){var m;const e=((m=this.type)==null?void 0:m.toLowerCase())||"",t=this.typeKeywords||[],r="esri/images/portal/",i="16";let s,n=!1,o=!1,l=!1,c=!1,p=!1,h=!1,f=!1,y=!1;return e.indexOf("service")>0||e==="feature collection"||e==="kml"||e==="wms"||e==="wmts"||e==="wfs"?(n=t.includes("Hosted Service"),e==="feature service"||e==="feature collection"||e==="kml"||e==="wfs"?(o=t.includes("Table"),l=t.includes("Route Layer"),c=t.includes("Markup"),p=t.includes("Spatiotemporal"),h=t.includes("UtilityNetwork"),s=p&&o?"spatiotemporaltable":o?"table":l?"routelayer":c?"markup":p?"spatiotemporal":h?"utilitynetwork":n?"featureshosted":"features"):e==="map service"||e==="wms"||e==="wmts"?(p=t.includes("Spatiotemporal"),f=t.includes("Relational"),s=p||f?"mapimages":n||t.includes("Tiled")||e==="wmts"?"maptiles":"mapimages"):s=e==="scene service"?t.includes("Line")?"sceneweblayerline":t.includes("3DObject")?"sceneweblayermultipatch":t.includes("Point")?"sceneweblayerpoint":t.includes("IntegratedMesh")?"sceneweblayermesh":t.includes("PointCloud")?"sceneweblayerpointcloud":t.includes("Polygon")?"sceneweblayerpolygon":t.includes("Building")?"sceneweblayerbuilding":t.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":e==="image service"?t.includes("Elevation 3D Layer")?"elevationlayer":t.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":e==="stream service"?"streamlayer":e==="vector tile service"?"vectortile":e==="datastore catalog service"?"datastorecollection":e==="geocoding service"?"geocodeservice":e==="video service"?t.includes("Live Stream")?"livestreamvideolayer":"videolayer":e==="geoprocessing service"?t.includes("Web Tool")?"tool":"layers":e==="geodata service"?"geodataservice":e==="3dtiles service"?t.includes("3DObject")?"3dobjecttileslayer":t.includes("IntegratedMesh")?"integratedmeshtileslayer":"3dtileslayer":"layers"):e==="web map"||e==="cityengine web scene"?s="maps":e==="web scene"?s=t.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":e==="web mapping application"&&t.includes("configurableApp")?s="instantapps":e==="web mapping application"||e==="mobile application"||e==="application"||e==="operation view"||e==="desktop application"?s="apps":e==="map document"||e==="map package"||e==="published map"||e==="scene document"||e==="globe document"||e==="basemap package"||e==="mobile basemap package"||e==="mobile map package"||e==="project package"||e==="project template"||e==="pro map"||e==="layout"||e==="layer"&&t.includes("ArcGIS Pro")||e==="explorer map"&&t.indexOf("Explorer Document")?s="mapsgray":e==="service definition"||e==="shapefile"||e==="cad drawing"||e==="geojson"||e==="netcdf"||e==="administrative report"?s="datafiles":e==="360 vr experience"?s="360vr":e==="explorer add in"||e==="desktop add in"||e==="windows viewer add in"||e==="windows viewer configuration"?s="appsgray":e==="arcgis pro add in"||e==="arcgis pro configuration"?s="addindesktop":e==="pdf"?s="pdf":e==="microsoft word"?s="word":e==="microsoft excel"?s="excel":e==="microsoft powerpoint"?s="ppt":e==="rule package"||e==="file geodatabase"||e==="sqlite geodatabase"||e==="csv collection"||e==="kml collection"||e==="windows mobile package"||e==="map template"||e==="desktop application template"||e==="gml"||e==="arcpad package"||e==="code sample"||e==="document link"||e==="earth configuration"||e==="operations dashboard add in"||e==="rules package"||e==="workflow manager package"||e==="explorer map"&&t.includes("Explorer Mapping Application")||t.includes("Document")?s="datafilesgray":e==="network analysis service"||e==="geoprocessing service"||e==="geodata service"||e==="geometry service"||e==="geoprocessing package"||e==="locator package"||e==="geoprocessing sample"||e==="workflow manager service"?s="toolsgray":e==="layer"||e==="layer package"||e==="explorer layer"?s="layersgray":e==="analysis model"?s="analysismodel":e==="scene package"?s="scenepackage":e==="3dtiles package"?s="3dtileslayerpackage":e==="3dtiles service"?s="3dtileslayer":e==="mobile scene package"?s="mobilescenepackage":e==="tile package"||e==="compact tile package"?s="tilepackage":e==="task file"?s="taskfile":e==="report template"?s="report-template":e==="statistical data collection"?s="statisticaldatacollection":e==="insights workbook"?s="workbook":e==="insights model"?s="insightsmodel":e==="insights page"?s="insightspage":e==="insights theme"?s="insightstheme":e==="hub initiative"?s="hubinitiative":e==="hub page"?s="hubpage":e==="hub site application"?s="hubsite":e==="hub event"?s="hubevent":e==="hub project"?s="hubproject":e==="relational database connection"?s="relationaldatabaseconnection":e==="big data file share"?s="datastorecollection":e==="image collection"?s="imagecollection":e==="desktop style"?s="desktopstyle":e==="style"?s=t.includes("Dictionary")?"dictionarystyle":"style":e==="dashboard"?s="dashboard":e==="raster function template"?s="rasterprocessingtemplate":e==="vector tile package"?s="vectortilepackage":e==="ortho mapping project"?s="orthomappingproject":e==="ortho mapping template"?s="orthomappingtemplate":e==="solution"?s="solutions":e==="geopackage"?s="geopackage":e==="deep learning package"?s="deeplearningpackage":e==="real time analytic"?s="realtimeanalytics":e==="reality mapping project"?s="realitymappingproject":e==="big data analytic"?s="bigdataanalytics":e==="feed"?s="feed":e==="excalibur imagery project"?s="excaliburimageryproject":e==="notebook"?s="notebook":e==="storymap"?s="storymap":e==="survey123 add in"?s="survey123addin":e==="mission"?s="mission":e==="mission report"?s="missionreport":e==="mission template"?s="missiontemplate":e==="quickcapture project"?s="quickcaptureproject":e==="pro report"?s="proreport":e==="pro report template"?s="proreporttemplate":e==="urban model"?s="urbanmodel":e==="urban project"?s="urbanproject":e==="web experience"?s="experiencebuilder":e==="web experience template"?s="webexperiencetemplate":e==="experience builder widget"?s="experiencebuilderwidget":e==="experience builder widget package"?s="experiencebuilderwidgetpackage":e==="workflow"?s="workflow":e==="kernel gateway connection"?s="kernelgatewayconnection":e==="insights script"?s="insightsscript":e==="hub initiative template"?s="hubinitiativetemplate":e==="storymap theme"?s="storymaptheme":e==="knowledge graph"?s="knowledgegraph":e==="knowledge graph layer"?s="knowledgegraphlayer":e==="knowledge studio project"?s="knowledgestudio":e==="native application"?s="nativeapp":e==="native application installer"?s="nativeappinstaller":e==="web link chart"?s="linkchart":e==="knowledge graph web investigation"?s="investigation":e==="ogcfeatureserver"?s="features":e==="pro presentation"?s="propresentation":e==="pro project"?s="proproject":e==="insights workbook package"?s="insightsworkbookpackage":e==="apache parquet"?s="apacheparquet":e==="notebook code snippet library"?s="notebookcodesnippets":e==="suitability model"?s="suitabilitymodel":e==="esri classifier definition"?s="classifierdefinition":e==="esri classification schema"?s="classificationschema":e==="insights data engineering workbook"?s="dataengineeringworkbook":e==="insights data engineering model"?s="dataengineeringmodel":e==="deep learning studio project"?s="deeplearningproject":e==="discussion"?s="discussion":e==="allsource project"?s="allsourceproject":e==="api key"?s="apikey":e==="data pipeline"?s="datapipelines":e==="group layer"?(y=t.includes("Map"),s=y?"layergroup2d":"layergroup"):s=e==="media layer"?"onlinemedialayer":e==="form"?t.includes("Survey123")?"survey":"datafilesgray":e==="csv"?"csv":e==="image"?"image":"maps",s?Ie(r+s+i+".png"):null}get isLayer(){return this.type!=null&&mK.has(this.type)}get itemCdnUrl(){return hS(this.itemUrl)}get itemPageUrl(){var t;const e=(t=this.portal)==null?void 0:t.itemPageUrl;return e&&this.id?`${e}?id=${this.id}`:null}get itemUrl(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e&&this.id?`${e}/content/items/${this.id}`:null}get thumbnailUrl(){var r;const e=this.itemUrl,t=this.thumbnail;return e&&t?((r=this.portal)==null?void 0:r.normalizeUrl(`${e}/info/${t}?f=json`))??null:null}get userItemUrl(){var r,i,s;const e=(r=this.portal)==null?void 0:r.restUrl;if(!e)return null;const t=this.owner||((s=(i=this.portal)==null?void 0:i.user)==null?void 0:s.username);return t?`${e}/content/users/${this.ownerFolder?`${t}/${this.ownerFolder}`:t}/items/${this.id}`:null}load(e){const t=this.portal??(this.portal=Vr.getDefault()),r=t.load(e).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?t.request(this.itemUrl,{signal:e!=null?e.signal:null,query:{token:this.apiKey}}):{}).then(i=>{this.sourceJSON=i,this.read(i)});return this.addResolvingPromise(r),Promise.resolve(this)}async addRating(e){const t={method:"post",query:{}};return e instanceof cv&&(e=e.rating),e==null||isNaN(e)||typeof e!="number"||(t.query.rating=e),this.portal?(await this.portal.request(this.itemUrl+"/addRating",t),new cv({rating:e,created:new Date})):null}clone(){const e={access:this.access,accessInformation:this.accessInformation,applicationProxies:M(this.applicationProxies),avgRating:this.avgRating,categories:M(this.categories),classification:M(this.classification),created:M(this.created),culture:this.culture,description:this.description,extent:M(this.extent),groupCategories:M(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:M(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:M(this.screenshots),size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:M(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:M(this.typeKeywords),url:this.url};this.loaded&&(e.loadStatus="loaded");const t=new Oa({sourceJSON:this.sourceJSON}).set(e);return t._set("isOrgItem",this.isOrgItem),t}createPostQuery(){var t;const e=this.toJSON();for(const r of["tags","typeKeywords","categories"])e[r]=(t=e[r])==null?void 0:t.join(", ");for(const r of["extent","classification"]){const i=e[r];i&&(e[r]=JSON.stringify(i))}return e}async deleteRating(){await this.portal.request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(e="json",t){return this.portal.request(this.itemUrl+"/data",{responseType:e,...t,query:{token:this.apiKey}})}async fetchRating(e){const t=await this.portal.request(this.itemUrl+"/rating",{query:{token:this.apiKey},...e});return t.rating!=null?(t.created=new Date(t.created),new cv(t)):null}fetchRelatedItems(e,t){return this.portal.requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...e,token:this.apiKey},...t},Oa)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}reload(){return this.portal.request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then(e=>(this.applicationProxies&&!Object.hasOwn(e,"appProxies")&&(this.applicationProxies=null),this.sourceJSON=e,this.read(e),this))}update(e){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const t=e==null?void 0:e.data,r={method:"post"};r.query=this.createPostQuery();for(const i in r.query)r.query[i]===null&&(r.query[i]="");return r.query.clearEmptyFields=!0,t!=null&&(typeof t=="string"?r.query.text=t:typeof t=="object"&&(r.query.text=JSON.stringify(t))),this.portal.request(`${this.userItemUrl}/update`,r).then(()=>this.reload())}):Promise.reject(new O("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async copy(e){if(!this.id)throw new O("portal:item-does-not-exist","The item does not exist yet");await this.load();const{portal:t,itemUrl:r}=this;await t.signIn();const{copyResources:i,folder:s,tags:n,title:o}=e||{},l={method:"post",query:{copyPrivateResources:i==="all",folder:typeof s=="string"?s:s==null?void 0:s.id,includeResources:!!i,tags:n==null?void 0:n.join(","),title:o}},{itemId:c}=await t.request(`${r}/copy`,l);return new Oa({id:c,portal:t})}updateThumbnail(e){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const t=e.thumbnail,r=e.filename,i={method:"post"};if(typeof t=="string")wl(t)?i.query={data:t}:i.query={url:wi(t)},r!=null&&(i.query.filename=r);else{const s=new FormData;r!=null?s.append("file",t,r):s.append("file",t),i.body=s}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,i).then(()=>this.reload())}):Promise.reject(new O("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(e={},t){const{fetchResources:r}=await j(()=>import("./resourceUtils-CVHf2dlv.js"),[]);return r(this,e,t)}async addResource(e,t,r){const{addOrUpdateResources:i}=await j(()=>import("./resourceUtils-CVHf2dlv.js"),[]);return e.portalItem=this,await i(this,[{resource:e,content:t,compress:r==null?void 0:r.compress,access:r==null?void 0:r.access}],"add",r),e}async removeResource(e,t){const{removeResource:r}=await j(()=>import("./resourceUtils-CVHf2dlv.js"),[]);if(e.portalItem&&e.portalItem.itemUrl!==this.itemUrl)throw new O("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return r(this,e,t)}async removeAllResources(e){const{removeAllResources:t}=await j(()=>import("./resourceUtils-CVHf2dlv.js"),[]);return t(this,e)}resourceFromPath(e){return new yK({portalItem:this,path:e})}toJSON(){var r,i;const e=this.extent,t={accessInformation:this.accessInformation,categories:M(this.categories),classification:M(this.classification),created:(r=this.created)==null?void 0:r.getTime(),description:this.description,extent:e&&[[e.xmin,e.ymin],[e.xmax,e.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:(i=this.modified)==null?void 0:i.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:M(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:M(this.typeKeywords),url:this.url};return yj(t)}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new Oa({sourceJSON:e})}_getPostQuery(){const e=this.toJSON();for(const t in e)t==="tags"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="typeKeywords"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="extent"&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}};a([u({type:["private","shared","org","public"]})],le.prototype,"access",void 0),a([u()],le.prototype,"accessInformation",void 0),a([u({type:String})],le.prototype,"apiKey",void 0),a([u({json:{read:{source:"appProxies"}}})],le.prototype,"applicationProxies",void 0),a([u()],le.prototype,"avgRating",void 0),a([u()],le.prototype,"categories",void 0),a([u()],le.prototype,"classification",void 0),a([u({type:Date})],le.prototype,"created",void 0),a([u()],le.prototype,"culture",void 0),a([u()],le.prototype,"description",void 0),a([u({readOnly:!0})],le.prototype,"displayName",null),a([u({type:it})],le.prototype,"extent",void 0),a([D("extent")],le.prototype,"readExtent",null),a([u()],le.prototype,"groupCategories",void 0),a([u({readOnly:!0})],le.prototype,"iconUrl",null),a([u()],le.prototype,"id",void 0),a([u({readOnly:!0})],le.prototype,"isLayer",null),a([u({type:Boolean,readOnly:!0})],le.prototype,"isOrgItem",void 0),a([u()],le.prototype,"itemControl",void 0),a([u({readOnly:!0})],le.prototype,"itemPageUrl",null),a([u({readOnly:!0})],le.prototype,"itemUrl",null),a([u()],le.prototype,"licenseInfo",void 0),a([u({type:Date})],le.prototype,"modified",void 0),a([u()],le.prototype,"name",void 0),a([u()],le.prototype,"numComments",void 0),a([u()],le.prototype,"numRatings",void 0),a([u()],le.prototype,"numViews",void 0),a([u()],le.prototype,"owner",void 0),a([u()],le.prototype,"ownerFolder",void 0),a([u({type:Vr})],le.prototype,"portal",void 0),a([u()],le.prototype,"screenshots",void 0),a([u()],le.prototype,"size",void 0),a([u()],le.prototype,"snippet",void 0),a([u()],le.prototype,"sourceJSON",void 0),a([u({type:String})],le.prototype,"sourceUrl",void 0),a([u({type:String})],le.prototype,"spatialReference",void 0),a([u()],le.prototype,"tags",void 0),a([u()],le.prototype,"thumbnail",void 0),a([u({readOnly:!0})],le.prototype,"thumbnailUrl",null),a([u()],le.prototype,"title",void 0),a([u()],le.prototype,"type",void 0),a([u()],le.prototype,"typeKeywords",void 0),a([u({type:String,json:{read(e,t){var r;if(gK.has(t.type)){const i=(r=this.portal)==null?void 0:r.restUrl;e||(e=i&&this.id?`${i}/content/items/${this.id}/data`:null)}return e}}})],le.prototype,"url",void 0),a([u({readOnly:!0})],le.prototype,"userItemUrl",null),le=Oa=a([_("esri.portal.PortalItem")],le);const Sp=le,GN=Object.freeze(Object.defineProperty({__proto__:null,default:Sp},Symbol.toStringTag,{value:"Module"})),Un=rt.radius,ki=rt.eccentricitySquared,vK={a1:Un*ki,a2:Un*ki*Un*ki,a3:Un*ki*ki/2,a4:Un*ki*Un*ki*2.5,a5:Un*ki+Un*ki*ki/2,a6:1-ki};1/294.9786982,1/298.257222101,rt.radius,rt.flattening,1/298.257222101,Ro.radius,Ro.flattening,1/192.0430107526882,Ns.radius,Ns.flattening,1/10.2079945799458,1/43.61604095563141,Ns.radius;var A;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",e[e.WGS84=2]="WGS84",e[e.WEB_MERCATOR=3]="WEB_MERCATOR",e[e.WGS84_ECEF=4]="WGS84_ECEF",e[e.CGCS2000=5]="CGCS2000",e[e.SPHERICAL_MARS_PCPF=6]="SPHERICAL_MARS_PCPF",e[e.GCSMARS2000=7]="GCSMARS2000",e[e.SPHERICAL_MOON_PCPF=8]="SPHERICAL_MOON_PCPF",e[e.GCSMOON2000=9]="GCSMOON2000",e[e.LON_LAT=10]="LON_LAT",e[e.PLATE_CARREE=11]="PLATE_CARREE"})(A||(A={}));const bK={[A.WGS84]:{[A.CGCS2000]:Je,[A.GCSMARS2000]:null,[A.GCSMOON2000]:null,[A.LON_LAT]:Je,[A.SPHERICAL_ECEF]:Ip,[A.SPHERICAL_MARS_PCPF]:null,[A.SPHERICAL_MOON_PCPF]:null,[A.UNKNOWN]:null,[A.WEB_MERCATOR]:Hu,[A.PLATE_CARREE]:Ju,[A.WGS84]:Je,[A.WGS84_ECEF]:Qu},[A.CGCS2000]:{[A.CGCS2000]:Je,[A.GCSMARS2000]:null,[A.GCSMOON2000]:null,[A.LON_LAT]:Je,[A.SPHERICAL_ECEF]:Ip,[A.SPHERICAL_MARS_PCPF]:null,[A.SPHERICAL_MOON_PCPF]:null,[A.UNKNOWN]:null,[A.WEB_MERCATOR]:Hu,[A.PLATE_CARREE]:Ju,[A.WGS84]:Je,[A.WGS84_ECEF]:Qu},[A.GCSMARS2000]:{[A.CGCS2000]:null,[A.GCSMARS2000]:Je,[A.GCSMOON2000]:null,[A.LON_LAT]:Je,[A.SPHERICAL_ECEF]:null,[A.SPHERICAL_MARS_PCPF]:FE,[A.SPHERICAL_MOON_PCPF]:null,[A.UNKNOWN]:null,[A.WEB_MERCATOR]:null,[A.PLATE_CARREE]:null,[A.WGS84]:null,[A.WGS84_ECEF]:null},[A.GCSMOON2000]:{[A.CGCS2000]:null,[A.GCSMARS2000]:null,[A.GCSMOON2000]:Je,[A.LON_LAT]:Je,[A.SPHERICAL_ECEF]:null,[A.SPHERICAL_MARS_PCPF]:null,[A.SPHERICAL_MOON_PCPF]:OE,[A.UNKNOWN]:null,[A.WEB_MERCATOR]:null,[A.PLATE_CARREE]:null,[A.WGS84]:null,[A.WGS84_ECEF]:null},[A.WEB_MERCATOR]:{[A.CGCS2000]:xp,[A.GCSMARS2000]:null,[A.GCSMOON2000]:null,[A.LON_LAT]:xp,[A.SPHERICAL_ECEF]:wK,[A.SPHERICAL_MARS_PCPF]:null,[A.SPHERICAL_MOON_PCPF]:null,[A.UNKNOWN]:null,[A.WEB_MERCATOR]:Je,[A.PLATE_CARREE]:SK,[A.WGS84]:xp,[A.WGS84_ECEF]:_K},[A.WGS84_ECEF]:{[A.CGCS2000]:Ku,[A.GCSMARS2000]:null,[A.GCSMOON2000]:null,[A.LON_LAT]:Ku,[A.SPHERICAL_ECEF]:FK,[A.SPHERICAL_MARS_PCPF]:null,[A.SPHERICAL_MOON_PCPF]:null,[A.UNKNOWN]:null,[A.WEB_MERCATOR]:kK,[A.PLATE_CARREE]:xK,[A.WGS84]:Ku,[A.WGS84_ECEF]:Je},[A.SPHERICAL_ECEF]:{[A.CGCS2000]:Yu,[A.GCSMARS2000]:null,[A.GCSMOON2000]:null,[A.LON_LAT]:Yu,[A.SPHERICAL_ECEF]:Je,[A.SPHERICAL_MARS_PCPF]:null,[A.SPHERICAL_MOON_PCPF]:null,[A.UNKNOWN]:null,[A.WEB_MERCATOR]:AK,[A.PLATE_CARREE]:IK,[A.WGS84]:Yu,[A.WGS84_ECEF]:CK},[A.SPHERICAL_MARS_PCPF]:{[A.CGCS2000]:null,[A.GCSMARS2000]:PE,[A.GCSMOON2000]:null,[A.LON_LAT]:PE,[A.SPHERICAL_ECEF]:null,[A.SPHERICAL_MARS_PCPF]:Je,[A.SPHERICAL_MOON_PCPF]:null,[A.UNKNOWN]:null,[A.WEB_MERCATOR]:null,[A.PLATE_CARREE]:null,[A.WGS84]:null,[A.WGS84_ECEF]:null},[A.SPHERICAL_MOON_PCPF]:{[A.CGCS2000]:null,[A.GCSMARS2000]:null,[A.GCSMOON2000]:kE,[A.LON_LAT]:kE,[A.SPHERICAL_ECEF]:null,[A.SPHERICAL_MARS_PCPF]:null,[A.SPHERICAL_MOON_PCPF]:Je,[A.UNKNOWN]:null,[A.WEB_MERCATOR]:null,[A.PLATE_CARREE]:null,[A.WGS84]:null,[A.WGS84_ECEF]:null},[A.UNKNOWN]:{[A.CGCS2000]:null,[A.GCSMARS2000]:null,[A.GCSMOON2000]:null,[A.LON_LAT]:null,[A.SPHERICAL_ECEF]:null,[A.SPHERICAL_MARS_PCPF]:null,[A.SPHERICAL_MOON_PCPF]:null,[A.UNKNOWN]:Je,[A.WEB_MERCATOR]:null,[A.PLATE_CARREE]:null,[A.WGS84]:null,[A.WGS84_ECEF]:null},[A.LON_LAT]:{[A.CGCS2000]:Je,[A.GCSMARS2000]:Je,[A.GCSMOON2000]:Je,[A.LON_LAT]:Je,[A.SPHERICAL_ECEF]:Ip,[A.SPHERICAL_MARS_PCPF]:FE,[A.SPHERICAL_MOON_PCPF]:OE,[A.UNKNOWN]:null,[A.WEB_MERCATOR]:Hu,[A.PLATE_CARREE]:Ju,[A.WGS84]:Je,[A.WGS84_ECEF]:Qu},[A.PLATE_CARREE]:{[A.CGCS2000]:Zu,[A.GCSMARS2000]:null,[A.GCSMOON2000]:null,[A.LON_LAT]:Zu,[A.SPHERICAL_ECEF]:TK,[A.SPHERICAL_MARS_PCPF]:null,[A.SPHERICAL_MOON_PCPF]:null,[A.UNKNOWN]:null,[A.WEB_MERCATOR]:MK,[A.PLATE_CARREE]:Je,[A.WGS84]:Zu,[A.WGS84_ECEF]:EK}};function BN(e,t,r=WN()){return e==null||t==null?null:PK(e,t,r).projector}function CE(e,t){return e?t.spatialReference===e?t.spatialReferenceId:(t.spatialReference=e,"metersPerUnit"in t&&(t.metersPerUnit=gh(e,1)),Mm(e)?t.spatialReferenceId=A.SPHERICAL_ECEF:sl(e)?t.spatialReferenceId=A.WGS84:Vs(e)?t.spatialReferenceId=A.WEB_MERCATOR:m7(e)?t.spatialReferenceId=A.PLATE_CARREE:e.wkt===w7.wkt?t.spatialReferenceId=A.WGS84_ECEF:e.wkid===il.CGCS2000?t.spatialReferenceId=A.CGCS2000:e.wkt===q$.wkt?t.spatialReferenceId=A.SPHERICAL_MARS_PCPF:e.wkt===G$.wkt?t.spatialReferenceId=A.SPHERICAL_MOON_PCPF:EF(e)?t.spatialReferenceId=A.GCSMARS2000:AF(e)?t.spatialReferenceId=A.GCSMOON2000:t.spatialReferenceId=A.UNKNOWN):A.UNKNOWN}function Je(e,t,r,i){e!==r&&(r[i++]=e[t++],r[i++]=e[t++],r[i]=e[t])}function xp(e,t,r,i){r[i]=gc*(e[t]/Ka),r[i+1]=gc*(JN-2*Math.atan(Math.exp(-e[t+1]/Ka))),r[i+2]=e[t+2]}function wK(e,t,r,i){const s=e[t]/Ka,n=JN-2*Math.atan(Math.exp(-e[t+1]/Ka)),o=Ka+e[t+2],l=Math.cos(n)*o;r[i]=Math.cos(s)*l,r[i+1]=Math.sin(s)*l,r[i+2]=Math.sin(n)*o}function _K(e,t,r,i){xp(e,t,r,i),Qu(r,i,r,i)}function $K(e,t,r,i,s){const n=.4999999*Xg,o=_l(mc*e[t+1],-n,n),l=Math.sin(o);r[i++]=mc*e[t]*s.radius,r[i++]=s.halfSemiMajorAxis*Math.log((1+l)/(1-l)),r[i]=e[t+2]}function Hu(e,t,r,i){$K(e,t,r,i,rt)}function Ju(e,t,r,i){r[i]=e[t]*LE,r[i+1]=e[t+1]*LE,r[i+2]=e[t+2]}function Zu(e,t,r,i){r[i]=e[t]*NE,r[i+1]=e[t+1]*NE,r[i+2]=e[t+2]}function SK(e,t,r,i){xp(e,t,r,i),Ju(r,i,r,i)}function xK(e,t,r,i){Ku(e,t,r,i),Ju(r,i,r,i)}function IK(e,t,r,i){Yu(e,t,r,i),Ju(r,i,r,i)}function TK(e,t,r,i){Zu(e,t,r,i),Ip(r,i,r,i)}function MK(e,t,r,i){Zu(e,t,r,i),Hu(r,i,r,i)}function EK(e,t,r,i){Zu(e,t,r,i),Qu(r,i,r,i)}function a2(e,t,r,i,s){const n=s+e[t+2],o=mc*e[t+1],l=mc*e[t],c=Math.cos(o)*n;r[i]=Math.cos(l)*c,r[i+1]=Math.sin(l)*c,r[i+2]=Math.sin(o)*n}function OE(e,t,r,i){a2(e,t,r,i,Ro.radius)}function FE(e,t,r,i){a2(e,t,r,i,Ns.radius)}function Ip(e,t,r,i){a2(e,t,r,i,rt.radius)}function l2(e,t,r,i,s){const n=e[t],o=e[t+1],l=e[t+2],c=Math.sqrt(n*n+o*o+l*l),p=t7(l/(c===0?1:c)),h=Math.atan2(o,n);r[i++]=gc*h,r[i++]=gc*p,r[i]=c-s}function kE(e,t,r,i){l2(e,t,r,i,Ro.radius)}function PE(e,t,r,i){l2(e,t,r,i,Ns.radius)}function Yu(e,t,r,i){l2(e,t,r,i,rt.radius)}function AK(e,t,r,i){Yu(e,t,r,i),Hu(r,i,r,i)}function CK(e,t,r,i){Yu(e,t,r,i),Qu(r,i,r,i)}function OK(e,t,r,i,s){const n=mc*e[t],o=mc*e[t+1],l=e[t+2],c=Math.sin(o),p=Math.cos(o),h=s.radius/Math.sqrt(1-s.eccentricitySquared*c*c);r[i++]=(h+l)*p*Math.cos(n),r[i++]=(h+l)*p*Math.sin(n),r[i++]=(h*(1-s.eccentricitySquared)+l)*c}function Qu(e,t,r,i){OK(e,t,r,i,rt)}function Ku(e,t,r,i){const s=vK,n=e[t],o=e[t+1],l=e[t+2];let c,p,h,f,y,m,g,b,w,S,x,E,C,P,L,V,q,H,Y,se,de;c=Math.abs(l),p=n*n+o*o,h=Math.sqrt(p),f=p+l*l,y=Math.sqrt(f),se=Math.atan2(o,n),m=l*l/f,g=p/f,P=s.a2/y,L=s.a3-s.a4/y,g>.3?(b=c/y*(1+g*(s.a1+P+m*L)/y),Y=Math.asin(b),S=b*b,w=Math.sqrt(1-S)):(w=h/y*(1-m*(s.a5-P-g*L)/y),Y=Math.acos(w),S=1-w*w,b=Math.sqrt(S)),x=1-rt.eccentricitySquared*S,E=rt.radius/Math.sqrt(x),C=s.a6*E,P=h-E*w,L=c-C*b,q=w*P+b*L,V=w*L-b*P,H=V/(C/x+q),Y+=H,de=q+V*H/2,l<0&&(Y=-Y),r[i++]=gc*se,r[i++]=gc*Y,r[i]=de}function FK(e,t,r,i){Ku(e,t,r,i),Ip(r,i,r,i)}function kK(e,t,r,i){Ku(e,t,r,i),Hu(r,i,r,i)}function PK(e,t,r){if(e==null||t==null||r.source.spatialReference===e&&r.dest.spatialReference===t)return r;const i=CE(e,r.source),s=CE(t,r.dest);return i===A.UNKNOWN&&s===A.UNKNOWN?wr(e,t)?r.projector=Je:r.projector=null:r.projector=bK[i][s],r}function WN(){return{source:{spatialReference:null,spatialReferenceId:A.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:A.UNKNOWN,metersPerUnit:1},projector:Je}}const Sde={spatialReference:null,spatialReferenceId:A.UNKNOWN},xde={spatialReference:null,spatialReferenceId:A.UNKNOWN},HN=WN(),mc=XV(1),gc=e7(1),Xg=Math.PI,JN=.5*Xg,Ka=rt.radius,LE=Ka*Xg/180,NE=180/(Ka*Xg);function Oh(e,t,r,i,s,n,o=Math.floor(e.length/3)){const l=BN(t,s,HN);if(l==null)return!1;if(l===Je){if(e===i&&r===n)return!0;const p=r+3*o;for(let h=r,f=n;h<p;h++,f++)i[f]=e[h];return!0}const c=r+3*o;for(let p=r,h=n;p<c;p+=3,h+=3)l(e,p,i,h);return!0}const Ide=Object.freeze(Object.defineProperty({__proto__:null,projectBuffer:Oh},Symbol.toStringTag,{value:"Module"}));function RE(e,t,r,i,s,n){return bf[0]=e,bf[1]=t,bf[2]=r,Oh(bf,i,0,s,n,0)}const bf=Oc();let wf=0,dv=class O_{static fromGE(t){const r=new O_;return r._wkt=t.wkt,r._wkid=t.wkid,r._isInverse=t.isInverse,r}constructor(t){this.uid=wf++,t?(this._wkt=t.wkt!=null?t.wkt:null,this._wkid=t.wkid!=null?t.wkid:-1,this._isInverse=t.isInverse!=null&&t.isInverse===!0):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}get wkt(){return this._wkt}set wkt(t){this._wkt=t,this.uid=wf++}get wkid(){return this._wkid}set wkid(t){this._wkid=t,this.uid=wf++}get isInverse(){return this._isInverse}set isInverse(t){this._isInverse=t,this.uid=wf++}getInverse(){const t=new O_;return t._wkt=this.wkt,t._wkid=this._wkid,t._isInverse=!this.isInverse,t}},jm=class Xd{static cacheKey(t,r){var i,s,n,o,l,c;return[((i=t.wkid)==null?void 0:i.toString())??"-1",((s=t.wkt)==null?void 0:s.toString())??"",((n=t.wkt2)==null?void 0:n.toString())??"",((o=r.wkid)==null?void 0:o.toString())??"-1",((l=r.wkt)==null?void 0:l.toString())??"",((c=r.wkt2)==null?void 0:c.toString())??""].join()}static fromGE(t){const r=new Xd;let i="";for(const s of t.steps){const n=dv.fromGE(s);r.steps.push(n),i+=n.uid.toString()+","}return r._cachedProjection={},r._gtlistentry=null,r._chain=i,r}constructor(t){if(this.steps=[],this._cachedProjection={},this._chain="",this._gtlistentry=null,t==null?void 0:t.steps)for(const r of t.steps)r instanceof dv?this.steps.push(r):this.steps.push(new dv({wkid:r.wkid,wkt:r.wkt,isInverse:r.isInverse}))}getInverse(){const t=new Xd;t.steps=[];for(let r=this.steps.length-1;r>=0;r--){const i=this.steps[r];t.steps.push(i.getInverse())}return t}getGTListEntry(){let t="";for(const r of this.steps)t+=r.uid.toString()+",";return t!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=t),this._gtlistentry}assignCachedGe(t,r,i){this._cachedProjection[Xd.cacheKey(t,r)]=i}getCachedGeTransformation(t,r){let i="";for(const n of this.steps)i+=n.uid.toString()+",";i!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=i);const s=this._cachedProjection[Xd.cacheKey(t,r)];return s===void 0?null:s}},is=null,zo=null,Tp=null,jy={};const u2=new hh;function Fh(){return!!is&&_F()}function ZN(){return!!Fh()||(X(u2),Qp(),!1)}function LK(e,t){return!e||!t||fl(e,t)||ZN()}function NK(e,t){return!fl(e,t)&&!Fh()}function Qp(e){return Tp==null&&(Tp=Promise.all([$F(),j(()=>import("./geometryEngineBase-yFIvKOkM.js"),__vite__mapDeps([23,1])).then(t=>t.g),j(()=>import("./hydrated-BVFG1Akg.js"),[])])),Tp.then(([,t,{hydratedAdapter:r}])=>{si(e),zo=r,is=t.default,is._enableProjection(p7),u2.notify()})}function e0(e,t,r=null,i=null){return Array.isArray(e)?e.length===0?[]:F_(zo,e,e[0].spatialReference,t,r,i):F_(zo,[e],e.spatialReference,t,r,i)[0]}function F_(e,t,r,i,s=null,n=null){if(r==null||i==null)return t;if(fl(r,i,s))return t.map(o=>Dy(o,r,i));if(s==null&&Mm(r))return t.map(o=>Dy(o,r,ge.WGS84)).map(o=>Kp(o,i));if(s==null&&Mm(i))return t.map(o=>Kp(o,ge.WGS84)).map(o=>Dy(o,ge.WGS84,i));if(s==null){const o=jm.cacheKey(r,i);jy[o]!==void 0?s=jy[o]:((s=KN(r,i,void 0))==null&&(s=new jm),jy[o]=s)}if(is==null||e==null)throw new t0;return n!=null?is._project(e,t,r,i,s,n):is._project(e,t,r,i,s)}function YN(e,t){const r=QN([e],t);return r.pending!=null?{pending:r.pending,geometry:null}:r.geometries!=null?{pending:null,geometry:r.geometries[0]}:{pending:null,geometry:null}}function QN(e,t){if(!Fh()){for(const r of e)if(r!=null&&!wr(r.spatialReference,t)&&ks(r.spatialReference)&&ks(t)&&!fl(r.spatialReference,t))return X(u2),{pending:Qp(),geometries:null}}return{pending:null,geometries:e.map(r=>r==null?null:wr(r.spatialReference,t)?r:ks(r.spatialReference)&&ks(t)?Kp(r,t):null)}}function KN(e,t,r=null){if(e==null||t==null)return null;if(is==null||zo==null)throw new t0;const i=is._getTransformation(zo,e,t,r,r==null?void 0:r.spatialReference);return i!==null?jm.fromGE(i):null}function RK(e,t,r=null){if(is==null||zo==null)throw new t0;const i=is._getTransformationBySuitability(zo,e,t,r,r==null?void 0:r.spatialReference);if(i!==null){const s=[];for(const n of i)s.push(jm.fromGE(n));return s}return[]}let t0=class extends O{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}};function jK(){is=null,zo=null,Tp=null,jy={}}const DK={get loadPromise(){return Tp}};function Kp(e,t){try{const r=e0(e,t);if(r==null)return null;"xmin"in e&&"xmin"in r&&(r.zmin=e.zmin,r.zmax=e.zmax);const i=ZL(r.type,e.spatialReference,t);return i!=null&&i(r),r}catch(r){if(!(r instanceof t0))throw r;return null}}async function VK(e,t,r){const i=e.spatialReference;return i!=null&&t!=null&&await r0(i,t,null,r),Kp(e,t)}function fl(e,t,r){return!r&&(!!wr(e,t)||ks(e)&&ks(t)&&!!BN(e,t,HN))}function UK(e,t){if(wr(e,t))return!0;if(!ks(e)||!ks(t))return!1;const r=sl(e)||Vs(e)||bI(e),i=sl(t)||Vs(t)||bI(t);return r&&i}async function r0(e,t,r,i){if(Fh())return lx(i);if(Array.isArray(e)){for(const{source:s,dest:n,geographicTransformation:o}of e)if(s&&n&&!fl(s,n,o))return Qp(i)}else if(e&&t&&!fl(e,t,r))return Qp(i);return lx(i)}function Dy(e,t,r){return e?"x"in e?XN(e,t,new Ye,r,0):"xmin"in e?iR(e,t,new it,r,0):"rings"in e?rR(e,t,new xn,r,0):"paths"in e?tR(e,t,new xi,r,0):"points"in e?eR(e,t,new Ig,r,0):null:null}function zK(e,t,r=t.spatialReference,i=0){return r!=null&&e.spatialReference!=null&&XN(e,e.spatialReference,t,r,i)!=null}function XN(e,t,r,i,s){ur[0]=e.x,ur[1]=e.y;const n=e.z;return ur[2]=n!==void 0?n:s,Oh(ur,t,0,ur,i,0)?(r.x=ur[0],r.y=ur[1],r.spatialReference=i,n!==void 0||jo(i)?(r.z=ur[2],r.hasZ=!0):(r.z=void 0,r.hasZ=!1),e.m===void 0?(r.m=void 0,r.hasM=!1):(r.m=e.m,r.hasM=!0),r):null}function qK(e,t,r=t.spatialReference,i=0){return e.spatialReference!=null&&r!=null&&eR(e,e.spatialReference,t,r,i)!=null}function eR(e,t,r,i,s){const{points:n,hasZ:o,hasM:l}=e,c=[],p=n.length,h=[];for(const y of n)h.push(y[0],y[1],o?y[2]:s);if(!Oh(h,t,0,h,i,0,p))return null;const f=o||jo(i);for(let y=0;y<p;++y){const m=3*y,g=h[m],b=h[m+1];f&&l?c.push([g,b,h[m+2],n[y][3]]):f?c.push([g,b,h[m+2]]):l?c.push([g,b,n[y][2]]):c.push([g,b])}return r.points=c,r.spatialReference=i,r.hasZ=o,r.hasM=l,r}function GK(e,t,r=t.spatialReference,i=0){return e.spatialReference!=null&&r!=null&&tR(e,e.spatialReference,t,r,i)!=null}function tR(e,t,r,i,s){const{paths:n,hasZ:o,hasM:l}=e,c=[];if(!sR(n,o??!1,l??!1,t,c,i,s))return null;const p=o||jo(i);return r.paths=c,r.spatialReference=i,r.hasZ=p,r.hasM=l,r}function BK(e,t,r=t.spatialReference,i=0){return e.spatialReference!=null&&r!=null&&rR(e,e.spatialReference,t,r,i)!=null}function rR(e,t,r,i,s){const{rings:n,hasZ:o,hasM:l}=e,c=[];if(!sR(n,o??!1,l??!1,t,c,i,s))return null;const p=o||jo(i);return r.rings=c,r.spatialReference=i,r.hasZ=p,r.hasM=l,r}function WK(e,t,r=t.spatialReference,i=0){return e.spatialReference!=null&&r!=null&&iR(e,e.spatialReference,t,r,i)!=null}function iR(e,t,r,i,s){const{xmin:n,ymin:o,xmax:l,ymax:c,hasZ:p,hasM:h}=e,f=p?e.zmin:s;if(!RE(n,o,f,t,ur,i))return null;const y=p||jo(i);r.xmin=ur[0],r.ymin=ur[1],y&&(r.zmin=ur[2]);const m=p?e.zmax:s;return RE(l,c,m,t,ur,i)?(r.xmax=ur[0],r.ymax=ur[1],y&&(r.zmax=ur[2]),h&&(r.mmin=e.mmin,r.mmax=e.mmax),r.spatialReference=i,r):null}function sR(e,t,r,i,s,n,o=0){const l=new Array;for(const h of e)for(const f of h)l.push(f[0],f[1],t?f[2]:o);if(!Oh(l,i,0,l,n,0))return!1;let c=0;s.length=0;const p=t||jo(n);for(const h of e){const f=new Array;for(const y of h)p&&r?f.push([l[c++],l[c++],l[c++],y[3]]):p?f.push([l[c++],l[c++],l[c++]]):r?(f.push([l[c++],l[c++],y[2]]),c++):(f.push([l[c++],l[c++]]),c++);s.push(f)}return!0}const ur=Oc(),Mde=Object.freeze(Object.defineProperty({__proto__:null,canProjectWithoutEngine:fl,getTransformation:KN,getTransformations:RK,initializeProjection:r0,isEqualBaseGCS:UK,isLoaded:Fh,isLoadedOrLoad:ZN,isLoadedOrLoadFor:LK,load:Qp,project:e0,projectExtent:WK,projectMany:F_,projectMultipoint:qK,projectOrLoad:YN,projectOrLoadMany:QN,projectPoint:zK,projectPolygon:BK,projectPolyline:GK,projectWithZConversion:VK,projectWithoutEngine:Dy,requiresLoad:NK,test:DK,tryProjectWithZConversion:Kp,unload:jK},Symbol.toStringTag,{value:"Module"}));async function HK(e){const t=e.spatialReference;if(t.isWGS84)return e.clone();if(t.isWebMercator)return Eu(e);const r=ge.WGS84;return await r0(t,r),e0(e,r)}function JK(e,t){if(!nR(e,t)){const r=e.typeKeywords;r?r.push(t):e.typeKeywords=[t]}}function nR(e,t){var r;return!!((r=e.typeKeywords)!=null&&r.includes(t))}function Ede(e){return nR(e,YK.HOSTED_SERVICE)}function ZK(e,t){const r=e.typeKeywords;if(r){const i=r.indexOf(t);i>-1&&r.splice(i,1)}}function Ade(e,t,r){r?JK(e,t):ZK(e,t)}async function Cde(e){const t=e.clone().normalize();let r;if(t.length>1)for(const i of t)r?i.width>r.width&&(r=i):r=i;else r=t[0];return HK(r)}const YK={DEVELOPER_BASEMAP:"DeveloperBasemap",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",SINGLE_LAYER:"Singlelayer",TABLE:"Table",HOSTED_SERVICE:"Hosted Service",LOCAL_SCENE:"ViewingMode-Local",TILED_IMAGERY:"Tiled Imagery",GROUP_LAYER_MAP:"Map",ORIENTED_IMAGERY_LAYER:"OrientedImageryLayer"};function jE(e){var c;const{portal:t,isOrgItem:r,itemControl:i}=e,s=(c=t.user)==null?void 0:c.privileges;let n=!s||s.includes("features:user:edit"),o=!!r&&!!(s!=null&&s.includes("features:user:fullEdit"));const l=i==="update"||i==="admin";return l?o=n=!0:o&&(n=!0),{features:{edit:n,fullEdit:o},content:{updateItem:l}}}const QK=e=>{let t=class extends e{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=Ps(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(r){r!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",r))}readPortalItem(r,i,s){if(i.itemId)return new Sp({id:i.itemId,portal:s==null?void 0:s.portal})}writePortalItem(r,i){r!=null&&r.id&&(i.itemId=r.id)}async loadFromPortal(r,i){var s;if((s=this.portalItem)!=null&&s.id)try{const{load:n}=await j(()=>import("./layersLoader-C23WMPhZ.js"),__vite__mapDeps([116,15,13,14,117,118]));return si(i),await n({instance:this,supportedTypes:r.supportedTypes,validateItem:r.validateItem,supportsData:r.supportsData,layerModuleTypeMap:r.layerModuleTypeMap},i)}catch(n){throw vr(n)||G.getLogger(this).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})
  ${n}`),n}}async finishLoadEditablePortalLayer(r){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(r).catch(i=>(Fs(i),!0)))}async setUserPrivileges(r,i){if(!Le.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(i);if(this.url)try{const{features:{edit:s,fullEdit:n},content:{updateItem:o}}=await this._fetchUserPrivileges(r,i);this._set("userHasEditingPrivileges",s),this._set("userHasFullEditingPrivileges",n),this._set("userHasUpdateItemPrivileges",o)}catch(s){Fs(s)}}async _fetchUserPrivileges(r,i){let s=this.portalItem;if(!r||!s||!s.loaded||s.sourceUrl)return this._fetchFallbackUserPrivileges(i);const n=r===s.id;if(n&&s.portal.user)return jE(s);let o,l;if(n)o=s.portal.url;else try{o=await UP(this.url,i)}catch(f){Fs(f)}if(!o||!mV(o,s.portal.url))return this._fetchFallbackUserPrivileges(i);try{const f=i!=null?i.signal:null;l=await(ye==null?void 0:ye.getCredential(`${o}/sharing`,{prompt:!1,signal:f}))}catch(f){Fs(f)}const c=!0,p=!1,h=!1;if(!l)return{features:{edit:c,fullEdit:p},content:{updateItem:h}};try{if(n?await s.reload():(s=new Sp({id:r,portal:{url:o}}),await s.load(i)),s.portal.user)return jE(s)}catch(f){Fs(f)}return{features:{edit:c,fullEdit:p},content:{updateItem:h}}}async _fetchFallbackUserPrivileges(r){let i=!0;try{i=await this._fetchUserHasEditingPrivileges(r)}catch(s){Fs(s)}return{features:{edit:i,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(r){const i=this.url?ye==null?void 0:ye.findCredential(this.url):null;if(!i)return!0;const s=_f.credential===i?_f.user:await this._fetchEditingUser(r);return _f.credential=i,_f.user=s,(s==null?void 0:s.privileges)==null||s.privileges.includes("features:user:edit")}async _fetchEditingUser(r){var h,f;const i=(f=(h=this.portalItem)==null?void 0:h.portal)==null?void 0:f.user;if(i)return i;const s=ye==null?void 0:ye.findServerInfo(this.url??"");if(!(s!=null&&s.owningSystemUrl))return null;const n=`${s.owningSystemUrl}/sharing/rest`,o=Vr.getDefault();if(o&&o.loaded&&rs(o.restUrl)===rs(n))return o.user;const l=`${n}/community/self`,c=r!=null?r.signal:null,p=await SS(Ge(l,{authMode:"no-prompt",query:{f:"json"},signal:c}));return p.ok?yS.fromJSON(p.value.data):null}read(r,i){i&&(i.layer=this),super.read(r,i)}write(r,i){var o;const s=i==null?void 0:i.portal,n=((o=this.portalItem)==null?void 0:o.id)&&(this.portalItem.portal||Vr.getDefault());return s&&n&&!nF(n.restUrl,s.restUrl)?(i.messages&&i.messages.push(new O("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(r,{...i,layer:this})}};return a([u({type:Sp})],t.prototype,"portalItem",null),a([D("web-document","portalItem",["itemId"])],t.prototype,"readPortalItem",null),a([B("web-document","portalItem",{itemId:{type:String}})],t.prototype,"writePortalItem",null),a([u({clonable:!1})],t.prototype,"resourceReferences",void 0),a([u({type:Boolean,readOnly:!0})],t.prototype,"userHasEditingPrivileges",void 0),a([u({type:Boolean,readOnly:!0})],t.prototype,"userHasFullEditingPrivileges",void 0),a([u({type:Boolean,readOnly:!0})],t.prototype,"userHasUpdateItemPrivileges",void 0),t=a([_("esri.layers.mixins.PortalLayer")],t),t},_f={credential:null,user:null};let ep=class extends $e{constructor(){super(...arguments),this.updating=!1,this.status="unknown"}};a([u()],ep.prototype,"updating",void 0),a([u()],ep.prototype,"status",void 0),ep=a([_("esri.layers.support.PublishingInfo")],ep);const KK=ep,XK=Symbol(),eX=e=>{var t;let r=class extends e{constructor(){super(...arguments),this[t]=!0}get publishingInfo(){if(this.destroyed)return null;const i=this._get("publishingInfo");if(i)return i;const s=new KK;return this._checkPublishingStatus(s),s}_checkPublishingStatus(i){let o=0;const l=async p=>{let h;i.updating=!0;try{h=await this.fetchPublishingStatus()}catch{h="unavailable"}h!=="published"&&h!=="unavailable"||(i.status==="publishing"&&this.refresh(),c.remove()),i.status=h,i.updating=!1,c.removed||(o=setTimeout(l,p,p+125))},c={removed:!1,remove(){this.removed=!0,clearTimeout(o)}};this.when().catch(()=>c.remove()),l(250),this.addHandles(c)}};return t=XK,a([u({readOnly:!0,clonable:!1})],r.prototype,"publishingInfo",null),r=a([_("esri.layers.mixins.PublishableLayer")],r),r},Io=new ne,Mp=new WeakMap;function tX(e){iX(e)&&Io.push(new WeakRef(e))}function rX(e){const t=Io.find(r=>r.deref()===e);t&&Io.remove(t)}function iX(e){return e!=null&&typeof e=="object"&&"refreshInterval"in e&&"refresh"in e}function oR(e,t){return Number.isFinite(e)&&Number.isFinite(t)?t<=0?e:oR(t,e%t):0}let pv=0,$f=0;function sX(){const e=Date.now();let t=!1;for(const r of Io){const i=r.deref();i?i.refreshInterval&&e-(Mp.get(i)??0)+5>=6e4*i.refreshInterval&&(Mp.set(i,e),i.refresh(e)):t=!0}if(t)for(let r=Io.length-1;r>=0;r--)Io.at(r).deref()||Io.removeAt(r)}f6(()=>{const e=Date.now();let t=0;for(const r of Io){const i=r.deref();i&&(t=oR(Math.round(6e4*i.refreshInterval),t),i.refreshInterval?Mp.get(i)||Mp.set(i,e):Mp.delete(i))}if(t!==$f){if($f=t,clearInterval(pv),$f===0)return void(pv=0);pv=setInterval(sX,$f)}},Pg);const DE=.1,nX=e=>{let t=class extends e{constructor(...r){super(...r),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=wn(()=>this.hasDataChanged()),this.when().then(()=>{this.destroyed||tX(this)},()=>{})}destroy(){rX(this)}castRefreshInterval(r){return r>=DE?r:r<=0?0:DE}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(r=Date.now()){bn(this._debounceHasDataChanged()).then(i=>{i&&this._set("refreshTimestamp",r),this.emit("refresh",{dataChanged:i})},i=>{G.getLogger(this).error(i),this.emit("refresh",{dataChanged:!1,error:i})})}async hasDataChanged(){return!0}get test(){}};return a([u({type:Number,json:{write:!0,origins:{"web-scene":{write:{enabled:!0,layerContainerTypes:Ut}}}}})],t.prototype,"refreshInterval",void 0),a([Ce("refreshInterval")],t.prototype,"castRefreshInterval",null),a([u({readOnly:!0})],t.prototype,"refreshTimestamp",void 0),a([u({readOnly:!0})],t.prototype,"refreshParameters",null),t=a([_("esri.layers.mixins.RefreshableLayer")],t),t},oX=e=>{let t=class extends e{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const r={minScale:this.minScale,maxScale:this.maxScale},i=this.parent;i&&"effectiveScaleRange"in i&&aX(r,i.effectiveScaleRange);const s=this._get("effectiveScaleRange");return s&&s.minScale===r.minScale&&s.maxScale===r.maxScale?s:r}};return a([u({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"minScale",void 0),a([u({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"maxScale",void 0),a([u({readOnly:!0})],t.prototype,"effectiveScaleRange",null),t=a([_("esri.layers.mixins.ScaleRangeLayer")],t),t};function aX(e,t){return e.minScale=e.minScale>0?t.minScale>0?Math.min(e.minScale,t.minScale):e.minScale:t.minScale,e.maxScale=e.maxScale>0?t.maxScale>0?Math.max(e.maxScale,t.maxScale):e.maxScale:t.maxScale,e}const aR=Kt()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0});let tp=class extends Oe(R){constructor(t){super(t),this.unit="milliseconds",this.value=0}toMilliseconds(){return zL(this.value,this.unit,"milliseconds")}};a([re(aR,{nonNullable:!0})],tp.prototype,"unit",void 0),a([u({type:Number,json:{write:!0},nonNullable:!0})],tp.prototype,"value",void 0),tp=a([_("esri.time.TimeInterval")],tp);const Dm=tp;function VE(e,t){return Dm.fromJSON({value:e,unit:t})}let Bt=class extends Oe(R){constructor(t){super(t),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeZone=null,this.trackIdField=null,this.useTime=!0,this.stops=null}readFullTimeExtent(t,r){return r.timeExtent&&Array.isArray(r.timeExtent)&&r.timeExtent.length===2?Vo.fromArray(r.timeExtent):null}writeFullTimeExtent(t,r){(t==null?void 0:t.start)!=null&&t.end!=null?r.timeExtent=t.toArray():r.timeExtent=null}readInterval(t,r){return r.timeInterval&&r.timeIntervalUnits?VE(r.timeInterval,r.timeIntervalUnits):r.defaultTimeInterval&&r.defaultTimeIntervalUnits?VE(r.defaultTimeInterval,r.defaultTimeIntervalUnits):null}writeInterval(t,r){r.timeInterval=(t==null?void 0:t.toJSON().value)??null,r.timeIntervalUnits=(t==null?void 0:t.toJSON().unit)??null}};a([u({type:Boolean,json:{name:"exportOptions.timeDataCumulative",write:!0}})],Bt.prototype,"cumulative",void 0),a([u({type:String,json:{name:"endTimeField",write:{enabled:!0,allowNull:!0}}})],Bt.prototype,"endField",void 0),a([u({type:Vo,json:{write:{enabled:!0,allowNull:!0}}})],Bt.prototype,"fullTimeExtent",void 0),a([D("fullTimeExtent",["timeExtent"])],Bt.prototype,"readFullTimeExtent",null),a([B("fullTimeExtent")],Bt.prototype,"writeFullTimeExtent",null),a([u({type:Boolean,json:{write:!0}})],Bt.prototype,"hasLiveData",void 0),a([u({type:Dm,json:{write:{enabled:!0,allowNull:!0}}})],Bt.prototype,"interval",void 0),a([D("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],Bt.prototype,"readInterval",null),a([B("interval")],Bt.prototype,"writeInterval",null),a([u({type:String,json:{name:"startTimeField",write:{enabled:!0,allowNull:!0}}})],Bt.prototype,"startField",void 0),a([u(mm("timeReference",!0))],Bt.prototype,"timeZone",void 0),a([u({type:String,json:{write:{enabled:!0,allowNull:!0}}})],Bt.prototype,"trackIdField",void 0),a([u({type:Boolean,json:{name:"exportOptions.useTime",write:!0}})],Bt.prototype,"useTime",void 0),a([u({type:[Date],json:{read:!1}})],Bt.prototype,"stops",void 0),Bt=a([_("esri.layers.support.TimeInfo")],Bt);const lR=Bt,lX={type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation",layerContainerTypes:Ut}}},uX=e=>{let t=class extends e{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(r,i){const s=i.timeInfo.exportOptions;if(!s)return null;const n=s.timeOffset,o=aR.fromJSON(s.timeOffsetUnits);return n&&o?new Dm({value:n,unit:o}):null}set timeInfo(r){fk(r,this.fieldsIndex),this._set("timeInfo",r)}};return a([u({type:Vo,json:{write:!1}})],t.prototype,"timeExtent",void 0),a([u({type:Dm})],t.prototype,"timeOffset",void 0),a([D("service","timeOffset",["timeInfo.exportOptions"])],t.prototype,"readOffset",null),a([u({value:null,type:lR,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],t.prototype,"timeInfo",null),a([u(lX)],t.prototype,"useViewTime",void 0),t=a([_("esri.layers.mixins.TemporalLayer")],t),t},UE=new ve({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let oo=class extends Oe(R){constructor(t){super(t),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};a([u({json:{write:!0}})],oo.prototype,"name",void 0),a([u({json:{write:!0}})],oo.prototype,"description",void 0),a([u({json:{read:UE.read,write:UE.write}})],oo.prototype,"drawingTool",void 0),a([u({json:{write:!0}})],oo.prototype,"prototype",void 0),a([u({json:{write:!0}})],oo.prototype,"thumbnail",void 0),oo=a([_("esri.layers.support.FeatureTemplate")],oo);const c2=oo;let on=class extends Oe(R){constructor(t){super(t),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(t){const r={};for(const i of Object.keys(t))r[i]=Wg(t[i]);return r}writeDomains(t,r){var s;const i={};for(const n of Object.keys(t))t[n]&&(i[n]=(s=t[n])==null?void 0:s.toJSON());r.domains=i}};a([u({json:{write:!0}})],on.prototype,"id",void 0),a([u({json:{write:!0}})],on.prototype,"name",void 0),a([u({json:{write:!0}})],on.prototype,"domains",void 0),a([D("domains")],on.prototype,"readDomains",null),a([B("domains")],on.prototype,"writeDomains",null),a([u({type:[c2],json:{write:!0}})],on.prototype,"templates",void 0),on=a([_("esri.layers.support.FeatureType")],on);const uR=on;function cX(){return{fields:{type:[Hg],value:null,set:function(e){if(e&&k("big-integer-warning-enabled")){const t=e.filter(r=>r.type==="big-integer"||r.type==="oid"&&(r.length||0)>=8);if(t.length){const r=t.map(i=>`'${i.name}'`).join(", ");G.getLogger(this).warn("#fields",`Layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}') references big-integer field(s): ${r}, support for which is experimental. Only integers less than ${Number.MAX_SAFE_INTEGER} (Number.MAX_SAFE_INTEGER) are supported.`)}}this._set("fields",e)}},fieldsIndex:{readOnly:!0,get(){return WP.fromLayer(this)}},outFields:{type:[String],json:{read:!1},set:function(e){this._userOutFields=e,this.notifyChange("outFields")},get:function(){var t;const e=this._userOutFields;if(!(e!=null&&e.length))return null;if(e.includes("*"))return["*"];if(!this.fields)return e;for(const r of e)((t=this.fieldsIndex)==null?void 0:t.has(r))||G.getLogger("esri.layers.support.fieldProperties").error("field-attributes-layer:invalid-field",`Invalid field ${r} found in outFields`,{layer:this,outFields:e});return Y$(this.fieldsIndex,e)}}}}const hv=()=>G.getLogger("esri.layers.support.labelingInfo"),dX=/\[([^[\]]+)\]/gi;function fv(e,t,r){return e?e.map(i=>{var n;const s=new Qg;if(s.read(i,r),s.labelExpression){const o=t.fields||((n=t.layerDefinition)==null?void 0:n.fields)||this.fields;s.labelExpression=s.labelExpression.replaceAll(dX,(l,c)=>`[${pX(c,o)}]`)}return s}):null}function pX(e,t){if(!t)return e;const r=e.toLowerCase();for(let i=0;i<t.length;i++){const s=t[i].name;if(s.toLowerCase()===r)return s}return e}const hX={esriGeometryPoint:["above-right","above-center","above-left","center-center","center-left","center-right","below-center","below-left","below-right"],esriGeometryMultiPatch:["always-horizontal"],esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:["center-along","above-along","below-along"],esriGeometryMultipoint:null,esriGeometryEnvelope:null};function Nde(e,t){const r=[];for(const i of e){const s=i.labelPlacement,n=hX[t];if(!i.symbol)return hv().warn("No ILabelClass symbol specified."),[];if(!n)return hv().error(new O("labeling:unsupported-geometry-type",`Unable to create labels for layer, geometry type '${t}' is not supported`)),[];if(n.includes(s))r.push(i);else{const o=n[0];s&&hv().warn(`Found invalid label placement type ${s} for ${t}. Defaulting to ${o}`);const l=i.clone();l.labelPlacement=o,r.push(l)}}return r}const mu=[];function fX(e,t){if(XL(e.url??""))return!0;const{wkid:r}=t;for(const i of mu){if((e.version??0)>=i[0])return!0;if(typeof i[1]=="function"&&(i[1]=i[1]()),i[1].has(r))return!1}return!0}mu.push([10.91,()=>{const e=new Set([9709,9716,9741,9761,9766]);for(let t=9712;t<=9713;t++)e.add(t);for(let t=9748;t<=9749;t++)e.add(t);for(let t=20904;t<=20932;t++)e.add(t);for(let t=21004;t<=21032;t++)e.add(t);for(let t=21207;t<=21264;t++)e.add(t);for(let t=21307;t<=21364;t++)e.add(t);for(let t=23301;t<=23333;t++)e.add(t);for(let t=102759;t<=102760;t++)e.add(t);for(let t=102934;t<=102955;t++)e.add(t);return e}]),mu.push([10.9,()=>{const e=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let t=9356;t<=9360;t++)e.add(t);for(let t=9404;t<=9407;t++)e.add(t);for(let t=9476;t<=9482;t++)e.add(t);for(let t=9487;t<=9494;t++)e.add(t);for(let t=9697;t<=9699;t++)e.add(t);return e}]),mu.push([10.81,()=>{const e=new Set([9265,9333,103598,103699]);for(let t=9248;t<=9254;t++)e.add(t);for(let t=9271;t<=9273;t++)e.add(t);for(let t=9284;t<=9285;t++)e.add(t);for(let t=21453;t<=21463;t++)e.add(t);return e}]),mu.push([10.8,()=>{const e=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let t=8035;t<=8036;t++)e.add(t);for(let t=8455;t<=8456;t++)e.add(t);for(let t=8518;t<=8529;t++)e.add(t);for(let t=8533;t<=8536;t++)e.add(t);for(let t=8538;t<=8540;t++)e.add(t);for(let t=8677;t<=8679;t++)e.add(t);for(let t=8902;t<=8903;t++)e.add(t);for(let t=8907;t<=8910;t++)e.add(t);for(let t=8949;t<=8951;t++)e.add(t);for(let t=8972;t<=8987;t++)e.add(t);for(let t=9039;t<=9040;t++)e.add(t);for(let t=9068;t<=9069;t++)e.add(t);for(let t=9140;t<=9141;t++)e.add(t);for(let t=9148;t<=9150;t++)e.add(t);for(let t=9153;t<=9159;t++)e.add(t);for(let t=9205;t<=9218;t++)e.add(t);for(let t=9221;t<=9222;t++)e.add(t);for(let t=54098;t<=54101;t++)e.add(t);return e}]),mu.push([10.71,()=>{const e=new Set([6316]);for(let t=8351;t<=8353;t++)e.add(t);for(let t=9294;t<=9297;t++)e.add(t);for(let t=22619;t<=22621;t++)e.add(t);for(let t=103586;t<=103594;t++)e.add(t);return e}]);async function yX(e,t,r){const i=e&&e.getAtOrigin&&e.getAtOrigin("renderer",t.origin);if(i&&i.type==="unique-value"&&i.styleOrigin){const s=await SS(i.populateFromStyle());if(si(r),s.ok===!1){const n=s.error;t!=null&&t.messages&&t.messages.push(new os("renderer:style-reference",`Failed to create unique value renderer from style reference: ${n.message}`,{error:n,context:t})),e.clear("renderer",t==null?void 0:t.origin)}}}function mX({displayField:e,editFieldsInfo:t,fields:r,objectIdField:i,title:s},n){if(!r)return null;const o=wX({editFieldsInfo:t,fields:r,objectIdField:i},n);if(!o.length)return null;const l=SX({titleBase:s,fields:r,displayField:e}),c=$X();return new Cc({title:l,content:c,fieldInfos:o})}function Vm(e){var c;const{title:t,graphic:r}=e??{},{attributes:i,sourceLayer:s}=r??{},n=s&&"displayField"in s?s.displayField:null,o=n?i==null?void 0:i[n]:null,l=(c=r==null?void 0:r.getObjectId())==null?void 0:c.toString();return t||o||l||""}const gX=(e,t)=>t.visibleFieldNames?t.visibleFieldNames.has(e.name):XU(e,t);function vX({fields:e,ignoreFieldTypes:t,sortDisabled:r}){const i=e;return t&&(e=e.filter(s=>!t.includes(s.type))),e===i&&(e=e.slice()),r!==!0&&e.sort(bX),e}function bX(e,t){return e.type==="oid"?-1:t.type==="oid"?1:zE(e)?-1:zE(t)?1:(e.alias||e.name).toLocaleLowerCase().localeCompare((t.alias||t.name).toLocaleLowerCase())}function wX(e,t){const r=t==null?void 0:t.visibleFieldNames;return vX({fields:e.fields??[],ignoreFieldTypes:(t==null?void 0:t.ignoreFieldTypes)||xX,sortDisabled:t==null?void 0:t.sortDisabled}).map(i=>new Mc({fieldName:i.name,isEditable:KU(i,e),label:i.alias,format:_X(i),visible:gX(i,{...e,visibleFieldNames:r})}))}function _X(e){switch(e.type){case"small-integer":case"integer":case"single":return new pp({digitSeparator:!0,places:0});case"double":return new pp({digitSeparator:!0,places:2});case"string":return Ab(e.name)?new pp({digitSeparator:!0,places:0}):void 0;default:return}}function $X(){return[new ul,new cc]}function SX(e){const t=BU(e),{titleBase:r}=e;return t?`${r}: {${t.trim()}}`:r??""}function zE(e){var r;return(e.name&&e.name.toLowerCase())==="name"?!0:((r=e.alias)==null?void 0:r.toLowerCase())==="name"}const xX=["geometry","blob","raster","guid","xml"],IX=1/255.5;var Fu;(function(e){e[e.SAVE=0]="SAVE",e[e.SAVE_AS=1]="SAVE_AS"})(Fu||(Fu={}));const qt="FeatureLayer";function Sf(e,t){return new O("layer:unsupported",`Layer (${e.title}, ${e.id}) of type '${e.declaredClass}' ${t}`,{layer:e})}function qE(e){return e&&e instanceof ne}const yv=cX();function mv(e,t,r){const i=!!(r!=null&&r.writeLayerSchema);return{enabled:i,ignoreOrigin:i}}let Q=class extends PQ(lK(xY(eX(fY(nY(fK(uX(oX(nX(FJ(cK(QK(OL(oY(xJ(Oe(Ww))))))))))))))))){constructor(...e){super(...e),this.attributeTableTemplate=null,this.charts=null,this.copyright=null,this.displayField=null,this.dynamicDataSource=null,this.fields=null,this.fieldsIndex=null,this.formTemplate=null,this.fullExtent=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.infoFor3D=null,this.isTable=!1,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.objectIdField=null,this.outFields=null,this.path=null,this.popupEnabled=!0,this.popupTemplate=null,this.resourceInfo=null,this.screenSizePerspectiveEnabled=!0,this.spatialReference=ge.WGS84,this.subtypeCode=null,this.supportedSourceTypes=new Set(["Feature Layer","Oriented Imagery Layer","Table","Catalog Layer"]),this.templates=null,this.timeInfo=null,this.title=null,this.sublayerTitleMode="item-title",this.type="feature",this.typeIdField=null,this.types=null,this.visible=!0,this._debouncedSaveOperations=wn(async(t,r,i)=>{const{save:s,saveAs:n}=await j(()=>import("./featureLayerUtils-BrcEjFXU.js"),__vite__mapDeps([119,120,121,122,118,123,15]));switch(t){case Fu.SAVE:return s(this,r);case Fu.SAVE_AS:return n(this,i,r)}})}destroy(){var e;(e=this.source)==null||e.destroy()}normalizeCtorArgs(e,t){return typeof e=="string"?{url:e,...t}:e}load(e){var i;const t=e!=null?e.signal:null;if((i=this.portalItem)!=null&&i.loaded&&this.source)return this.addResolvingPromise(this.createGraphicsSource(t).then(s=>this.initLayerProperties(s))),Promise.resolve(this);const r=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection","Scene Service"]},e).catch(Fs).then(async()=>{if(this.url&&this.layerId==null&&/FeatureServer|MapServer\/*$/i.test(this.url)){const s=await this._fetchFirstValidLayerId(t);s!=null&&(this.layerId=s)}if(!this.url&&!this._hasMemorySource())throw new O("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return this.initLayerProperties(await this.createGraphicsSource(t))}).then(()=>cQ(this,"load",e));return this.addResolvingPromise(r),Promise.resolve(this)}warnInvisibleDrapedSymbols(){var e,t,r;((e=this.elevationInfo)==null?void 0:e.mode)==="on-the-ground"&&((t=this.renderer)==null?void 0:t.type)==="simple"&&((r=this.renderer.symbol)==null?void 0:r.type)==="polygon-3d"&&this.renderer.symbol.symbolLayers.some(i=>i.type==="fill"&&i.material!=null&&(!i.material.color||i.material.color.a*this.opacity<IX)&&(this.loadWarnings.push(new os("feature-layer:invisible-draped-symbols","FeatureLayer has fully transparent symbols which will no longer render or highlight",{layer:this})),!0))}readCapabilities(e,t){return t=t.layerDefinition||t,PN(t,this.url)}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")??0)+1}get editingEnabled(){var e;return!(this.loaded&&!((e=this.capabilities)!=null&&e.operations.supportsEditing))&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)}set editingEnabled(e){this._overrideIfSome("editingEnabled",e)}readEditingEnabled(e,t){return this._readEditingEnabled(t,!1)}readEditingEnabledFromWebMap(e,t,r){return this._readEditingEnabled(t,!0,r)}writeEditingEnabled(e,t){this._writeEditingEnabled(e,t,!1)}writeEditingEnabledToWebMap(e,t,r,i){this._writeEditingEnabled(e,t,!0,i)}get effectiveEditingEnabled(){return dQ(this)}readIsTable(e,t){return(t=(t==null?void 0:t.layerDefinition)??t).type==="Table"||!t.geometryType}writeIsTable(e,t,r,i){i!=null&&i.writeLayerSchema&&pr(r,e?"Table":"Feature Layer",t)}readGlobalIdField(e,t){return CN(t.layerDefinition||t)}readObjectIdField(e,t){return ON(t.layerDefinition||t)}get parsedUrl(){const e=Yt(this.url);return e!=null&&(this.dynamicDataSource!=null?e.path=rl(e.path,"dynamicLayer"):this.layerId!=null&&(e.path=rl(e.path,this.layerId.toString()))),e}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){CI(e,this.fieldsIndex),this._set("renderer",e)}readRenderer(e,t,r){var s;t=t.layerDefinition||t;const i=(s=t.drawingInfo)==null?void 0:s.renderer;if(i){const n=Wp(i,t,r)??void 0;return n||G.getLogger(this).error("Failed to create renderer",{rendererDefinition:t.drawingInfo.renderer,layer:this,context:r}),n}return r2(t,r)}set source(e){const t=this._get("source");t!==e&&(qE(t)&&this._resetMemorySource(t),qE(e)&&this._initMemorySource(e),this._set("source",e))}castSource(e){return e?Array.isArray(e)||e instanceof ne?new dn({layer:this,items:e}):e:null}readSource(e,t){const r=WS.fromJSON(t.featureSet);return new dn({layer:this,items:(r==null?void 0:r.features)??[]})}readTemplates(e,t){const r=t.editFieldsInfo,i=r==null?void 0:r.creatorField,s=r==null?void 0:r.editorField;return e=e==null?void 0:e.map(n=>c2.fromJSON(n)),this._fixTemplates(e,i),this._fixTemplates(e,s),e}readTitle(e,t){var s,n,o;const r=((s=t.layerDefinition)==null?void 0:s.name)??t.name,i=t.title||((n=t.layerDefinition)==null?void 0:n.title);if(r){const l=(o=this.portalItem)==null?void 0:o.title;if(this.sublayerTitleMode==="item-title")return this.url?EJ(this.url,r):r;let c=r;if(!c&&this.url){const p=Eh(this.url);p!=null&&(c=p.title)}return c?(this.sublayerTitleMode==="item-title-and-service-name"&&l&&l!==c&&(c=l+" - "+c),HS(c)):void 0}if(this.sublayerTitleMode==="item-title"&&i)return i}readTitleFromWebMap(e,t){var r;return t.title||((r=t.layerDefinition)==null?void 0:r.name)}readTypeIdField(e,t){let r=(t=t.layerDefinition||t).typeIdField;if(r&&t.fields){r=r.toLowerCase();const i=t.fields.find(s=>s.name.toLowerCase()===r);i&&(r=i.name)}return r}readTypes(e,t){e=(t=t.layerDefinition||t).types;const r=t.editFieldsInfo,i=r==null?void 0:r.creatorField,s=r==null?void 0:r.editorField;return e==null?void 0:e.map(n=>(n=uR.fromJSON(n),this._fixTemplates(n.templates,i),this._fixTemplates(n.templates,s),n))}readVisible(e,t){var r;return((r=t.layerDefinition)==null?void 0:r.defaultVisibility)!=null?!!t.layerDefinition.defaultVisibility:t.visibility!=null?!!t.visibility:void 0}async addAttachment(e,t){const r=await BY(this,e,t,qt);return this.lastEditsEventDate=new Date,r}async updateAttachment(e,t,r){const i=await WY(this,e,t,r,qt);return this.lastEditsEventDate=new Date,i}async applyEdits(e,t){return HY(this,e,t)}async uploadAssets(e,t){return JY(this,e,t)}on(e,t){return super.on(e,t)}createPopupTemplate(e){return mX(this,e)}async createGraphicsSource(e){if(this._hasMemorySource()&&this.source)return this.source.load({signal:e});const{default:t}=await dC(j(()=>import("./FeatureLayerSource-DhBJYN8V.js"),__vite__mapDeps([124,55,63,43,125,115,59,86,58,87,114,37,34,38,126,127,5])),e);return new t({layer:this,supportedSourceTypes:this.supportedSourceTypes}).load({signal:e})}createQuery(){const e=sQ(this);e.dynamicDataSource=this.dynamicDataSource;const t=this.subtypeCode!=null?`${this.subtypeField} = ${this.subtypeCode}`:null,r=xD(this.definitionExpression,t);return e.where=r||"1=1",e}async deleteAttachments(e,t){const r=await ZY(this,e,t,qt);return this.lastEditsEventDate=new Date,r}async fetchRecomputedExtents(e){return YY(this,e,qt)}getFeatureType(e){return fQ(this.types,this.typeIdField,e)}getFieldDomain(e,t){var l,c;const r=t==null?void 0:t.feature,i=!!((l=this.subtypes)!=null&&l.length);if(i&&!(t!=null&&t.excludeImpliedDomains)){const p=aQ(this,e);if(p)return p}const s=i&&oQ(this,r);if(s){const p=(c=s==null?void 0:s.domains)==null?void 0:c[e];return(p==null?void 0:p.type)==="inherited"?this._getLayerDomain(e):p}const n=this.getFeatureType(r),o=this._getLayerDomain(e);if(n){const p=n.domains&&n.domains[e];if(p&&(p==null?void 0:p.type)!=="inherited")return p}if(o)return o;if(!(t!=null&&t.excludeImpliedDomains)){const p=lQ(this,e);if(p)return p}return null}getField(e){return this.fieldsIndex.get(e)}async queryAttachments(e,t){return QY(this,e,t,qt)}async queryFeatures(e,t){const r=await this.load(),i=await r.source.queryFeatures(ii.from(e)??r.createQuery(),t);if(i!=null&&i.features)for(const s of i.features)s.layer=s.sourceLayer=r;return i}async queryObjectIds(e,t){return KY(this,e,t,qt)}async queryFeatureCount(e,t){return XY(this,e,t,qt)}async queryExtent(e,t){return eQ(this,e,t,qt)}async queryRelatedFeatures(e,t){return tQ(this,e,t,qt)}async queryRelatedFeaturesCount(e,t){return rQ(this,e,t,qt)}async queryTopFeatures(e,t){var o;const{source:r,capabilities:i}=await this.load();if(!r.queryTopFeatures||!((o=i==null?void 0:i.query)!=null&&o.supportsTopFeaturesQuery))throw new O(qt,"Layer source does not support queryTopFeatures capability");const s=await j(()=>import("./TopFeaturesQuery-DhO9-ZI7.js"),[]),n=await r.queryTopFeatures(s.default.from(e),t);if(n!=null&&n.features)for(const l of n.features)l.layer=l.sourceLayer=this;return n}async queryBins(e,t){var o;const{source:r,capabilities:i}=await this.load();if(!r.queryBins||!((o=i==null?void 0:i.operations)!=null&&o.supportsQueryBins))throw new O(qt,"Layer source does not support queryBins capability");mQ(e,i,qt);const s=await j(()=>import("./BinsQuery-D4xbd1hK.js"),__vite__mapDeps([128,33,24])),n=await r.queryBins(s.default.from(e),t);if(n.features)for(const l of n.features)l.layer=l.sourceLayer=this;return n}async queryTopObjectIds(e,t){const{source:r,capabilities:i}=await this.load();if(!r.queryTopObjectIds||!(i!=null&&i.query.supportsTopFeaturesQuery))throw new O(qt,"Layer source does not support queryTopObjectIds capability");const s=await j(()=>import("./TopFeaturesQuery-DhO9-ZI7.js"),[]);return r.queryTopObjectIds(s.default.from(e),t)}async queryTopFeaturesExtent(e,t){var n;const{source:r,capabilities:i}=await this.load();if(!r.queryTopExtents||!((n=i==null?void 0:i.query)!=null&&n.supportsTopFeaturesQuery))throw new O(qt,"Layer source does not support queryTopExtents capability");const s=await j(()=>import("./TopFeaturesQuery-DhO9-ZI7.js"),[]);return r.queryTopExtents(s.default.from(e),t)}async queryTopFeatureCount(e,t){var n;const{source:r,capabilities:i}=await this.load();if(!r.queryTopCount||!((n=i==null?void 0:i.query)!=null&&n.supportsTopFeaturesQuery))throw new O(qt,"Layer source does not support queryFeatureCount capability");const s=await j(()=>import("./TopFeaturesQuery-DhO9-ZI7.js"),[]);return r.queryTopCount(s.default.from(e),t)}read(e,t){const r=e.featureCollection;if((r||e.type==="Feature Collection")&&(this.resourceInfo=e),r){const i=r.layers;i&&i.length===1&&(super.read(i[0],t),r.showLegend!=null&&super.read({showLegend:r.showLegend},t))}super.read(e,t),t&&t.origin==="service"&&(this.revert(["objectIdField","fields","timeInfo","dateFieldsTimeZone"],"service"),this.spatialReference||this.revert(["spatialReference"],"service"))}write(e,t){t={...t,origin:(t==null?void 0:t.origin)??void 0,writeLayerSchema:(t==null?void 0:t.writeLayerSchema)??this._hasMemorySource()};const{origin:r,layerContainerType:i,messages:s}=t;if(this.dynamicDataSource)return s==null||s.push(Sf(this,"using a dynamic data source cannot be written to web scenes, web maps and feature service items")),null;if(this.isTable){if((r==="web-map"||r==="web-scene")&&i!=="tables")return s==null||s.push(Sf(this,`a table source can only be written to tables, not ${i}`)),null;if(this._hasMemorySource())return s==null||s.push(Sf(this,"using an in-memory table source cannot be written to web scenes and web maps")),null}else if(this.loaded&&(r==="web-map"||r==="web-scene")&&i==="tables")return s==null||s.push(Sf(this,"using a non-table source cannot be written to tables in web maps or web scenes")),null;return super.write(e,t)}clone(){if(this._hasMemorySource())throw new O(qt,`FeatureLayer (title: ${this.title}, id: ${this.id}) created using in-memory source cannot be cloned`);return super.clone()}serviceSupportsSpatialReference(e){var t;return!!this.loaded&&(((t=this.source)==null?void 0:t.type)==="memory"||fX(this,e))}async save(e){return this._debouncedSaveOperations(Fu.SAVE,e)}async saveAs(e,t){return this._debouncedSaveOperations(Fu.SAVE_AS,t,e)}_readEditingEnabled(e,t,r){var s;let i=(s=e.layerDefinition)==null?void 0:s.capabilities;return i?this._hasEditingCapability(i):(i=e.capabilities,t&&(r==null?void 0:r.origin)==="web-map"&&!this._hasMemorySource()&&i?this._hasEditingCapability(i):void 0)}_hasEditingCapability(e){return e.toLowerCase().split(",").map(t=>t.trim()).includes("editing")}_writeEditingEnabled(e,t,r,i){var s,n;if(!e){const o=(n=(s=this.capabilities)==null?void 0:s.operations)!=null&&n.supportsSync?"Query,Sync":"Query";pr("layerDefinition.capabilities",o,t),r&&!(i!=null&&i.writeLayerSchema)&&(t.capabilities=o)}}_getLayerDomain(e){const t=this.fieldsIndex.get(e);return t?t.domain:null}_fetchFirstValidLayerId(e){return Ge(this.url??"",{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:e}).then(t=>{const r=t.data;if(r)return this.findFirstValidLayerId(r)})}async initLayerProperties(e){var t;return this._set("source",e),e.sourceJSON&&(this.sourceJSON=e.sourceJSON,this.read(e.sourceJSON,{origin:"service",portalItem:this.portalItem,portal:(t=this.portalItem)==null?void 0:t.portal,url:this.parsedUrl})),this._verifySource(),this._verifyFields(),CI(this.renderer,this.fieldsIndex),fk(this.timeInfo,this.fieldsIndex),yX(this,{origin:"service"})}async hasDataChanged(){return iQ(this)}async fetchPublishingStatus(){const e=this.source;return e!=null&&e.fetchPublishingStatus?e.fetchPublishingStatus():"unavailable"}_verifyFields(){var t,r;const e=((t=this.parsedUrl)==null?void 0:t.path)??"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+e+")"),this.isTable||this._hasMemorySource()||e.search(/\/FeatureServer\//i)!==-1||(r=this.fields)!=null&&r.some(i=>i.type==="geometry")||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+e+")")}_fixTemplates(e,t){e&&e.forEach(r=>{var s;const i=(s=r.prototype)==null?void 0:s.attributes;i&&t&&delete i[t]})}_verifySource(){if(this._hasMemorySource()){if(this.url)throw new O("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new O("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}_initMemorySource(e){e.forEach(t=>{t.layer=this,t.sourceLayer=this}),this.addHandles([e.on("after-add",t=>{t.item.layer=this,t.item.sourceLayer=this}),e.on("after-remove",t=>{t.item.layer=null,t.item.sourceLayer=null})],"fl-source")}_resetMemorySource(e){e.forEach(t=>{t.layer=null,t.sourceLayer=null}),this.removeHandles("fl-source")}_hasMemorySource(){return!(this.url||!this.source)}findFirstValidLayerId(e){return Array.isArray(e.layers)&&e.layers.length>0?e.layers[0].id:Array.isArray(e.tables)&&e.tables.length>0?e.tables[0].id:void 0}};a([u(VY)],Q.prototype,"attributeTableTemplate",void 0),a([D("service","capabilities")],Q.prototype,"readCapabilities",null),a([u({json:{origins:{"web-scene":{write:!1}},write:!0}})],Q.prototype,"charts",void 0),a([u({readOnly:!0})],Q.prototype,"createQueryVersion",null),a([u({json:{read:{source:"layerDefinition.copyrightText"}}})],Q.prototype,"copyright",void 0),a([u({json:{read:{source:"layerDefinition.displayField"}}})],Q.prototype,"displayField",void 0),a([u({types:So,readOnly:!0})],Q.prototype,"defaultSymbol",void 0),a([u({type:Qi})],Q.prototype,"dynamicDataSource",void 0),a([u({type:Boolean})],Q.prototype,"editingEnabled",null),a([D(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],Q.prototype,"readEditingEnabled",null),a([D("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],Q.prototype,"readEditingEnabledFromWebMap",null),a([B(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],Q.prototype,"writeEditingEnabled",null),a([B("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],Q.prototype,"writeEditingEnabledToWebMap",null),a([u({readOnly:!0})],Q.prototype,"effectiveEditingEnabled",null),a([u({...yv.fields,json:{read:{source:"layerDefinition.fields"},origins:{service:{name:"fields"},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:mv}}}}})],Q.prototype,"fields",void 0),a([u(yv.fieldsIndex)],Q.prototype,"fieldsIndex",void 0),a([u({type:RH,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],Q.prototype,"formTemplate",void 0),a([u({json:{read:{source:"layerDefinition.extent"}}})],Q.prototype,"fullExtent",void 0),a([u({json:{origins:{"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:mv,writer(e,t,r){const i=e?__.toJSON(e):null;i&&pr(r,i,t)}}}},read:{source:"layerDefinition.geometryType",reader:__.read}}})],Q.prototype,"geometryType",void 0),a([u({json:{read:{source:"layerDefinition.hasM"}}})],Q.prototype,"hasM",void 0),a([u({json:{read:{source:"layerDefinition.hasZ"}}})],Q.prototype,"hasZ",void 0),a([u(RY)],Q.prototype,"id",void 0),a([u({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],Q.prototype,"infoFor3D",void 0),a([u({json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],Q.prototype,"isTable",void 0),a([D("service","isTable",["type","geometryType"]),D("isTable",["layerDefinition.type","layerDefinition.geometryType"])],Q.prototype,"readIsTable",null),a([B("web-map","isTable")],Q.prototype,"writeIsTable",null),a([u(e2)],Q.prototype,"labelsVisible",void 0),a([u({type:[Qg],json:{origins:{service:{name:"drawingInfo.labelingInfo",read:fv,write:!1},"web-scene":{name:"layerDefinition.drawingInfo.labelingInfo",read:fv,write:{enabled:!0,layerContainerTypes:Ut}}},name:"layerDefinition.drawingInfo.labelingInfo",read:fv,write:!0}})],Q.prototype,"labelingInfo",void 0),a([u((()=>{const e=M(NY);return e.json.origins["portal-item"]={write:{target:"layerDefinition.drawingInfo.transparency",writer(t,r,i){pr(i,iS(t),r)}}},e})())],Q.prototype,"opacity",void 0),a([u(PY)],Q.prototype,"legendEnabled",void 0),a([u({type:["show","hide"],json:(()=>{const e=M(EN.json);return e.origins["portal-item"]={read:!1,write:!1},e})()})],Q.prototype,"listMode",void 0),a([D("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],Q.prototype,"readGlobalIdField",null),a([u({json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:mv}}}}})],Q.prototype,"objectIdField",void 0),a([D("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],Q.prototype,"readObjectIdField",null),a([u({value:"ArcGISFeatureLayer",type:["ArcGISFeatureLayer"]})],Q.prototype,"operationalLayerType",void 0),a([u(yv.outFields)],Q.prototype,"outFields",void 0),a([u({readOnly:!0})],Q.prototype,"parsedUrl",null),a([u({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],Q.prototype,"path",void 0),a([u(XS)],Q.prototype,"popupEnabled",void 0),a([u({type:Cc,json:{name:"popupInfo",write:!0}})],Q.prototype,"popupTemplate",void 0),a([u({readOnly:!0})],Q.prototype,"defaultPopupTemplate",null),a([u({types:zg,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:oH,name:"layerDefinition.drawingInfo.renderer",write:{layerContainerTypes:Ut,overridePolicy:(e,t,r)=>({ignoreOrigin:r==null?void 0:r.writeLayerSchema})}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:(e,t,r)=>({ignoreOrigin:r==null?void 0:r.writeLayerSchema})}}})],Q.prototype,"renderer",null),a([D("service","renderer",["drawingInfo.renderer","defaultSymbol"]),D("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],Q.prototype,"readRenderer",null),a([u()],Q.prototype,"resourceInfo",void 0),a([u((()=>{const e=M(FY);return e.json.origins["portal-item"]={read:!1,write:!1},e})())],Q.prototype,"screenSizePerspectiveEnabled",void 0),a([u({clonable:!1})],Q.prototype,"source",null),a([Ce("source")],Q.prototype,"castSource",null),a([D("portal-item","source",["featureSet"]),D("web-map","source",["featureSet"])],Q.prototype,"readSource",null),a([u({json:{read:{source:"layerDefinition.extent.spatialReference"}}})],Q.prototype,"spatialReference",void 0),a([u({type:Number})],Q.prototype,"subtypeCode",void 0),a([u({type:[c2]})],Q.prototype,"templates",void 0),a([D("templates",["editFieldsInfo","creatorField","editorField","templates"])],Q.prototype,"readTemplates",null),a([u({type:lR})],Q.prototype,"timeInfo",void 0),a([u()],Q.prototype,"title",void 0),a([D("service","title",["name"]),D("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],Q.prototype,"readTitle",null),a([D("web-map","title",["layerDefinition.name","title"])],Q.prototype,"readTitleFromWebMap",null),a([u({type:String})],Q.prototype,"sublayerTitleMode",void 0),a([u({json:{read:!1}})],Q.prototype,"type",void 0),a([u({type:String})],Q.prototype,"typeIdField",void 0),a([D("service","typeIdField"),D("typeIdField",["layerDefinition.typeIdField"])],Q.prototype,"readTypeIdField",null),a([u({type:[uR]})],Q.prototype,"types",void 0),a([D("service","types",["types"]),D("types",["layerDefinition.types"])],Q.prototype,"readTypes",null),a([u({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],Q.prototype,"visible",void 0),a([D("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],Q.prototype,"readVisible",null),Q=a([_("esri.layers.FeatureLayer")],Q);const Xu=Q,Rde=Object.freeze(Object.defineProperty({__proto__:null,default:Xu},Symbol.toStringTag,{value:"Module"}));function d2(e,t,r,i){let s=null,n=1e3;typeof t=="number"?(n=t,i=r):(s=t??null,n=r);let o,l=0;const c=()=>{l=0,e.apply(i,o)},p=(...h)=>{s&&s.apply(i,h),o=h,n?l||(l=setTimeout(c,n)):c()};return p.remove=()=>{l&&(clearTimeout(l),l=0)},p.forceUpdate=()=>{l&&(clearTimeout(l),c())},p.hasPendingUpdates=()=>!!l,p}function k_(e){var t;switch(e==null?void 0:e.type){case"point":return e;case"extent":return e.center;case"polygon":return e.centroid;case"multipoint":case"polyline":return(t=e.extent)==null?void 0:t.center;default:return null}}function TX(e){return e?{backgroundImage:`url(${e})`}:{}}function MX({action:e,feature:t}){const r=t==null?void 0:t.attributes,i="image"in e?e.image:void 0;return i&&r?bi(i,r):i??""}function EX(e){return typeof e=="string"?document.getElementById(e):e??null}/*!
 * @esri/arcgis-html-sanitizer - v4.1.0 - Tue Dec 03 2024 09:13:28 GMT-0500 (Eastern Standard Time)
 * Copyright (c) 2024 - Environmental Systems Research Institute, Inc.
 * Apache-2.0
 * 
 * js-xss
 * Copyright (c) 2012-2018 Zongmin Lei(é›·å®—æ°‘) <leizongmin@gmail.com>
 * http://ucdok.com
 * MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Um=function(){return Um=Object.assign||function(t){for(var r,i=1,s=arguments.length;i<s;i++){r=arguments[i];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Um.apply(this,arguments)},P_={exports:{}},st={},L_={exports:{}},Ml={};function cR(){var e={};return e["align-content"]=!1,e["align-items"]=!1,e["align-self"]=!1,e["alignment-adjust"]=!1,e["alignment-baseline"]=!1,e.all=!1,e["anchor-point"]=!1,e.animation=!1,e["animation-delay"]=!1,e["animation-direction"]=!1,e["animation-duration"]=!1,e["animation-fill-mode"]=!1,e["animation-iteration-count"]=!1,e["animation-name"]=!1,e["animation-play-state"]=!1,e["animation-timing-function"]=!1,e.azimuth=!1,e["backface-visibility"]=!1,e.background=!0,e["background-attachment"]=!0,e["background-clip"]=!0,e["background-color"]=!0,e["background-image"]=!0,e["background-origin"]=!0,e["background-position"]=!0,e["background-repeat"]=!0,e["background-size"]=!0,e["baseline-shift"]=!1,e.binding=!1,e.bleed=!1,e["bookmark-label"]=!1,e["bookmark-level"]=!1,e["bookmark-state"]=!1,e.border=!0,e["border-bottom"]=!0,e["border-bottom-color"]=!0,e["border-bottom-left-radius"]=!0,e["border-bottom-right-radius"]=!0,e["border-bottom-style"]=!0,e["border-bottom-width"]=!0,e["border-collapse"]=!0,e["border-color"]=!0,e["border-image"]=!0,e["border-image-outset"]=!0,e["border-image-repeat"]=!0,e["border-image-slice"]=!0,e["border-image-source"]=!0,e["border-image-width"]=!0,e["border-left"]=!0,e["border-left-color"]=!0,e["border-left-style"]=!0,e["border-left-width"]=!0,e["border-radius"]=!0,e["border-right"]=!0,e["border-right-color"]=!0,e["border-right-style"]=!0,e["border-right-width"]=!0,e["border-spacing"]=!0,e["border-style"]=!0,e["border-top"]=!0,e["border-top-color"]=!0,e["border-top-left-radius"]=!0,e["border-top-right-radius"]=!0,e["border-top-style"]=!0,e["border-top-width"]=!0,e["border-width"]=!0,e.bottom=!1,e["box-decoration-break"]=!0,e["box-shadow"]=!0,e["box-sizing"]=!0,e["box-snap"]=!0,e["box-suppress"]=!0,e["break-after"]=!0,e["break-before"]=!0,e["break-inside"]=!0,e["caption-side"]=!1,e.chains=!1,e.clear=!0,e.clip=!1,e["clip-path"]=!1,e["clip-rule"]=!1,e.color=!0,e["color-interpolation-filters"]=!0,e["column-count"]=!1,e["column-fill"]=!1,e["column-gap"]=!1,e["column-rule"]=!1,e["column-rule-color"]=!1,e["column-rule-style"]=!1,e["column-rule-width"]=!1,e["column-span"]=!1,e["column-width"]=!1,e.columns=!1,e.contain=!1,e.content=!1,e["counter-increment"]=!1,e["counter-reset"]=!1,e["counter-set"]=!1,e.crop=!1,e.cue=!1,e["cue-after"]=!1,e["cue-before"]=!1,e.cursor=!1,e.direction=!1,e.display=!0,e["display-inside"]=!0,e["display-list"]=!0,e["display-outside"]=!0,e["dominant-baseline"]=!1,e.elevation=!1,e["empty-cells"]=!1,e.filter=!1,e.flex=!1,e["flex-basis"]=!1,e["flex-direction"]=!1,e["flex-flow"]=!1,e["flex-grow"]=!1,e["flex-shrink"]=!1,e["flex-wrap"]=!1,e.float=!1,e["float-offset"]=!1,e["flood-color"]=!1,e["flood-opacity"]=!1,e["flow-from"]=!1,e["flow-into"]=!1,e.font=!0,e["font-family"]=!0,e["font-feature-settings"]=!0,e["font-kerning"]=!0,e["font-language-override"]=!0,e["font-size"]=!0,e["font-size-adjust"]=!0,e["font-stretch"]=!0,e["font-style"]=!0,e["font-synthesis"]=!0,e["font-variant"]=!0,e["font-variant-alternates"]=!0,e["font-variant-caps"]=!0,e["font-variant-east-asian"]=!0,e["font-variant-ligatures"]=!0,e["font-variant-numeric"]=!0,e["font-variant-position"]=!0,e["font-weight"]=!0,e.grid=!1,e["grid-area"]=!1,e["grid-auto-columns"]=!1,e["grid-auto-flow"]=!1,e["grid-auto-rows"]=!1,e["grid-column"]=!1,e["grid-column-end"]=!1,e["grid-column-start"]=!1,e["grid-row"]=!1,e["grid-row-end"]=!1,e["grid-row-start"]=!1,e["grid-template"]=!1,e["grid-template-areas"]=!1,e["grid-template-columns"]=!1,e["grid-template-rows"]=!1,e["hanging-punctuation"]=!1,e.height=!0,e.hyphens=!1,e.icon=!1,e["image-orientation"]=!1,e["image-resolution"]=!1,e["ime-mode"]=!1,e["initial-letters"]=!1,e["inline-box-align"]=!1,e["justify-content"]=!1,e["justify-items"]=!1,e["justify-self"]=!1,e.left=!1,e["letter-spacing"]=!0,e["lighting-color"]=!0,e["line-box-contain"]=!1,e["line-break"]=!1,e["line-grid"]=!1,e["line-height"]=!1,e["line-snap"]=!1,e["line-stacking"]=!1,e["line-stacking-ruby"]=!1,e["line-stacking-shift"]=!1,e["line-stacking-strategy"]=!1,e["list-style"]=!0,e["list-style-image"]=!0,e["list-style-position"]=!0,e["list-style-type"]=!0,e.margin=!0,e["margin-bottom"]=!0,e["margin-left"]=!0,e["margin-right"]=!0,e["margin-top"]=!0,e["marker-offset"]=!1,e["marker-side"]=!1,e.marks=!1,e.mask=!1,e["mask-box"]=!1,e["mask-box-outset"]=!1,e["mask-box-repeat"]=!1,e["mask-box-slice"]=!1,e["mask-box-source"]=!1,e["mask-box-width"]=!1,e["mask-clip"]=!1,e["mask-image"]=!1,e["mask-origin"]=!1,e["mask-position"]=!1,e["mask-repeat"]=!1,e["mask-size"]=!1,e["mask-source-type"]=!1,e["mask-type"]=!1,e["max-height"]=!0,e["max-lines"]=!1,e["max-width"]=!0,e["min-height"]=!0,e["min-width"]=!0,e["move-to"]=!1,e["nav-down"]=!1,e["nav-index"]=!1,e["nav-left"]=!1,e["nav-right"]=!1,e["nav-up"]=!1,e["object-fit"]=!1,e["object-position"]=!1,e.opacity=!1,e.order=!1,e.orphans=!1,e.outline=!1,e["outline-color"]=!1,e["outline-offset"]=!1,e["outline-style"]=!1,e["outline-width"]=!1,e.overflow=!1,e["overflow-wrap"]=!1,e["overflow-x"]=!1,e["overflow-y"]=!1,e.padding=!0,e["padding-bottom"]=!0,e["padding-left"]=!0,e["padding-right"]=!0,e["padding-top"]=!0,e.page=!1,e["page-break-after"]=!1,e["page-break-before"]=!1,e["page-break-inside"]=!1,e["page-policy"]=!1,e.pause=!1,e["pause-after"]=!1,e["pause-before"]=!1,e.perspective=!1,e["perspective-origin"]=!1,e.pitch=!1,e["pitch-range"]=!1,e["play-during"]=!1,e.position=!1,e["presentation-level"]=!1,e.quotes=!1,e["region-fragment"]=!1,e.resize=!1,e.rest=!1,e["rest-after"]=!1,e["rest-before"]=!1,e.richness=!1,e.right=!1,e.rotation=!1,e["rotation-point"]=!1,e["ruby-align"]=!1,e["ruby-merge"]=!1,e["ruby-position"]=!1,e["shape-image-threshold"]=!1,e["shape-outside"]=!1,e["shape-margin"]=!1,e.size=!1,e.speak=!1,e["speak-as"]=!1,e["speak-header"]=!1,e["speak-numeral"]=!1,e["speak-punctuation"]=!1,e["speech-rate"]=!1,e.stress=!1,e["string-set"]=!1,e["tab-size"]=!1,e["table-layout"]=!1,e["text-align"]=!0,e["text-align-last"]=!0,e["text-combine-upright"]=!0,e["text-decoration"]=!0,e["text-decoration-color"]=!0,e["text-decoration-line"]=!0,e["text-decoration-skip"]=!0,e["text-decoration-style"]=!0,e["text-emphasis"]=!0,e["text-emphasis-color"]=!0,e["text-emphasis-position"]=!0,e["text-emphasis-style"]=!0,e["text-height"]=!0,e["text-indent"]=!0,e["text-justify"]=!0,e["text-orientation"]=!0,e["text-overflow"]=!0,e["text-shadow"]=!0,e["text-space-collapse"]=!0,e["text-transform"]=!0,e["text-underline-position"]=!0,e["text-wrap"]=!0,e.top=!1,e.transform=!1,e["transform-origin"]=!1,e["transform-style"]=!1,e.transition=!1,e["transition-delay"]=!1,e["transition-duration"]=!1,e["transition-property"]=!1,e["transition-timing-function"]=!1,e["unicode-bidi"]=!1,e["vertical-align"]=!1,e.visibility=!1,e["voice-balance"]=!1,e["voice-duration"]=!1,e["voice-family"]=!1,e["voice-pitch"]=!1,e["voice-range"]=!1,e["voice-rate"]=!1,e["voice-stress"]=!1,e["voice-volume"]=!1,e.volume=!1,e["white-space"]=!1,e.widows=!1,e.width=!0,e["will-change"]=!1,e["word-break"]=!0,e["word-spacing"]=!0,e["word-wrap"]=!0,e["wrap-flow"]=!1,e["wrap-through"]=!1,e["writing-mode"]=!1,e["z-index"]=!1,e}function AX(e,t,r){}function CX(e,t,r){}var OX=/javascript\s*\:/img;function FX(e,t){return OX.test(t)?"":t}Ml.whiteList=cR();Ml.getDefaultWhiteList=cR;Ml.onAttr=AX;Ml.onIgnoreAttr=CX;Ml.safeAttrValue=FX;var kX={indexOf:function(e,t){var r,i;if(Array.prototype.indexOf)return e.indexOf(t);for(r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1},forEach:function(e,t,r){var i,s;if(Array.prototype.forEach)return e.forEach(t,r);for(i=0,s=e.length;i<s;i++)t.call(r,e[i],i,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}},sd=kX;function PX(e,t){e=sd.trimRight(e),e[e.length-1]!==";"&&(e+=";");var r=e.length,i=!1,s=0,n=0,o="";function l(){if(!i){var h=sd.trim(e.slice(s,n)),f=h.indexOf(":");if(f!==-1){var y=sd.trim(h.slice(0,f)),m=sd.trim(h.slice(f+1));if(y){var g=t(s,o.length,y,m,h);g&&(o+=g+"; ")}}}s=n+1}for(;n<r;n++){var c=e[n];if(c==="/"&&e[n+1]==="*"){var p=e.indexOf("*/",n+2);if(p===-1)break;n=p+1,s=n+1,i=!1}else c==="("?i=!0:c===")"?i=!1:c===";"?i||l():c===`
`&&l()}return sd.trim(o)}var LX=PX,xf=Ml,NX=LX;function GE(e){return e==null}function RX(e){var t={};for(var r in e)t[r]=e[r];return t}function dR(e){e=RX(e||{}),e.whiteList=e.whiteList||xf.whiteList,e.onAttr=e.onAttr||xf.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||xf.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||xf.safeAttrValue,this.options=e}dR.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,r=t.options,i=r.whiteList,s=r.onAttr,n=r.onIgnoreAttr,o=r.safeAttrValue,l=NX(e,function(c,p,h,f,y){var m=i[h],g=!1;if(m===!0?g=m:typeof m=="function"?g=m(f):m instanceof RegExp&&(g=m.test(f)),g!==!0&&(g=!1),f=o(h,f),!!f){var b={position:p,sourcePosition:c,source:y,isWhite:g};if(g){var w=s(h,f,b);return GE(w)?h+":"+f:w}else{var w=n(h,f,b);if(!GE(w))return w}}});return l};var jX=dR;(function(e,t){var r=Ml,i=jX;function s(o,l){var c=new i(l);return c.process(o)}t=e.exports=s,t.FilterCSS=i;for(var n in r)t[n]=r[n]})(L_,L_.exports);var p2=L_.exports,h2={indexOf:function(e,t){var r,i;if(Array.prototype.indexOf)return e.indexOf(t);for(r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1},forEach:function(e,t,r){var i,s;if(Array.prototype.forEach)return e.forEach(t,r);for(i=0,s=e.length;i<s;i++)t.call(r,e[i],i,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/,r=t.exec(e);return r?r.index:-1}},DX=p2.FilterCSS,VX=p2.getDefaultWhiteList,zm=h2;function pR(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var hR=new DX;function UX(e,t,r){}function zX(e,t,r){}function qX(e,t,r){}function GX(e,t,r){}function fR(e){return e.replace(WX,"&lt;").replace(HX,"&gt;")}function BX(e,t,r,i){if(r=wR(r),t==="href"||t==="src"){if(r=zm.trim(r),r==="#")return"#";if(!(r.substr(0,7)==="http://"||r.substr(0,8)==="https://"||r.substr(0,7)==="mailto:"||r.substr(0,4)==="tel:"||r.substr(0,11)==="data:image/"||r.substr(0,6)==="ftp://"||r.substr(0,2)==="./"||r.substr(0,3)==="../"||r[0]==="#"||r[0]==="/"))return""}else if(t==="background"){if(If.lastIndex=0,If.test(r))return""}else if(t==="style"){if(BE.lastIndex=0,BE.test(r)||(WE.lastIndex=0,WE.test(r)&&(If.lastIndex=0,If.test(r))))return"";i!==!1&&(i=i||hR,r=i.process(r))}return r=_R(r),r}var WX=/</g,HX=/>/g,JX=/"/g,ZX=/&quot;/g,YX=/&#([a-zA-Z0-9]*);?/gim,QX=/&colon;?/gim,KX=/&newline;?/gim,If=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,BE=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,WE=/u\s*r\s*l\s*\(.*/gi;function yR(e){return e.replace(JX,"&quot;")}function mR(e){return e.replace(ZX,'"')}function gR(e){return e.replace(YX,function(r,i){return i[0]==="x"||i[0]==="X"?String.fromCharCode(parseInt(i.substr(1),16)):String.fromCharCode(parseInt(i,10))})}function vR(e){return e.replace(QX,":").replace(KX," ")}function bR(e){for(var t="",r=0,i=e.length;r<i;r++)t+=e.charCodeAt(r)<32?" ":e.charAt(r);return zm.trim(t)}function wR(e){return e=mR(e),e=gR(e),e=vR(e),e=bR(e),e}function _R(e){return e=yR(e),e=fR(e),e}function XX(){return""}function eee(e,t){typeof t!="function"&&(t=function(){});var r=!Array.isArray(e);function i(o){return r?!0:zm.indexOf(e,o)!==-1}var s=[],n=!1;return{onIgnoreTag:function(o,l,c){if(i(o))if(c.isClosing){var p="[/removed]",h=c.position+p.length;return s.push([n!==!1?n:c.position,h]),n=!1,p}else return n||(n=c.position),"[removed]";else return t(o,l,c)},remove:function(o){var l="",c=0;return zm.forEach(s,function(p){l+=o.slice(c,p[0]),c=p[1]}),l+=o.slice(c),l}}}function tee(e){for(var t="",r=0;r<e.length;){var i=e.indexOf("<!--",r);if(i===-1){t+=e.slice(r);break}t+=e.slice(r,i);var s=e.indexOf("-->",i);if(s===-1)break;r=s+3}return t}function ree(e){var t=e.split("");return t=t.filter(function(r){var i=r.charCodeAt(0);return i===127?!1:i<=31?i===10||i===13:!0}),t.join("")}st.whiteList=pR();st.getDefaultWhiteList=pR;st.onTag=UX;st.onIgnoreTag=zX;st.onTagAttr=qX;st.onIgnoreTagAttr=GX;st.safeAttrValue=BX;st.escapeHtml=fR;st.escapeQuote=yR;st.unescapeQuote=mR;st.escapeHtmlEntities=gR;st.escapeDangerHtml5Entities=vR;st.clearNonPrintableCharacter=bR;st.friendlyAttrValue=wR;st.escapeAttrValue=_R;st.onIgnoreTagStripAll=XX;st.StripTagBody=eee;st.stripCommentTag=tee;st.stripBlankChar=ree;st.cssFilter=hR;st.getDefaultCSSWhiteList=VX;var i0={},fo=h2;function iee(e){var t=fo.spaceIndex(e),r;return t===-1?r=e.slice(1,-1):r=e.slice(1,t+1),r=fo.trim(r).toLowerCase(),r.slice(0,1)==="/"&&(r=r.slice(1)),r.slice(-1)==="/"&&(r=r.slice(0,-1)),r}function see(e){return e.slice(0,2)==="</"}function nee(e,t,r){var i="",s=0,n=!1,o=!1,l=0,c=e.length,p="",h="";e:for(l=0;l<c;l++){var f=e.charAt(l);if(n===!1){if(f==="<"){n=l;continue}}else if(o===!1){if(f==="<"){i+=r(e.slice(s,l)),n=l,s=l;continue}if(f===">"){i+=r(e.slice(s,n)),h=e.slice(n,l+1),p=iee(h),i+=t(n,i.length,p,h,see(h)),s=l+1,n=!1;continue}if(f==='"'||f==="'")for(var y=1,m=e.charAt(l-y);m.trim()===""||m==="=";){if(m==="="){o=f;continue e}m=e.charAt(l-++y)}}else if(f===o){o=!1;continue}}return s<e.length&&(i+=r(e.substr(s))),i}var oee=/[^a-zA-Z0-9\\_:.-]/gim;function aee(e,t){var r=0,i=0,s=[],n=!1,o=e.length;function l(y,m){if(y=fo.trim(y),y=y.replace(oee,"").toLowerCase(),!(y.length<1)){var g=t(y,m||"");g&&s.push(g)}}for(var c=0;c<o;c++){var p=e.charAt(c),h,f;if(n===!1&&p==="="){n=e.slice(r,c),r=c+1,i=e.charAt(r)==='"'||e.charAt(r)==="'"?r:uee(e,c+1);continue}if(n!==!1&&c===i){if(f=e.indexOf(p,c+1),f===-1)break;h=fo.trim(e.slice(i+1,f)),l(n,h),n=!1,c=f,r=c+1;continue}if(/\s|\n|\t/.test(p))if(e=e.replace(/\s|\n|\t/g," "),n===!1)if(f=lee(e,c),f===-1){h=fo.trim(e.slice(r,c)),l(h),n=!1,r=c+1;continue}else{c=f-1;continue}else if(f=cee(e,c-1),f===-1){h=fo.trim(e.slice(r,c)),h=HE(h),l(n,h),n=!1,r=c+1;continue}else continue}return r<e.length&&(n===!1?l(e.slice(r)):l(n,HE(fo.trim(e.slice(r))))),fo.trim(s.join(" "))}function lee(e,t){for(;t<e.length;t++){var r=e[t];if(r!==" ")return r==="="?t:-1}}function uee(e,t){for(;t<e.length;t++){var r=e[t];if(r!==" ")return r==="'"||r==='"'?t:-1}}function cee(e,t){for(;t>0;t--){var r=e[t];if(r!==" ")return r==="="?t:-1}}function dee(e){return e[0]==='"'&&e[e.length-1]==='"'||e[0]==="'"&&e[e.length-1]==="'"}function HE(e){return dee(e)?e.substr(1,e.length-2):e}i0.parseTag=nee;i0.parseAttr=aee;var pee=p2.FilterCSS,Zi=st,$R=i0,hee=$R.parseTag,fee=$R.parseAttr,Vy=h2;function Tf(e){return e==null}function yee(e){var t=Vy.spaceIndex(e);if(t===-1)return{html:"",closing:e[e.length-2]==="/"};e=Vy.trim(e.slice(t+1,-1));var r=e[e.length-1]==="/";return r&&(e=Vy.trim(e.slice(0,-1))),{html:e,closing:r}}function mee(e){var t={};for(var r in e)t[r]=e[r];return t}function gee(e){var t={};for(var r in e)Array.isArray(e[r])?t[r.toLowerCase()]=e[r].map(function(i){return i.toLowerCase()}):t[r.toLowerCase()]=e[r];return t}function SR(e){e=mee(e||{}),e.stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=Zi.onIgnoreTagStripAll),e.whiteList||e.allowList?e.whiteList=gee(e.whiteList||e.allowList):e.whiteList=Zi.whiteList,e.onTag=e.onTag||Zi.onTag,e.onTagAttr=e.onTagAttr||Zi.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||Zi.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||Zi.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||Zi.safeAttrValue,e.escapeHtml=e.escapeHtml||Zi.escapeHtml,this.options=e,e.css===!1?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new pee(e.css))}SR.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,r=t.options,i=r.whiteList,s=r.onTag,n=r.onIgnoreTag,o=r.onTagAttr,l=r.onIgnoreTagAttr,c=r.safeAttrValue,p=r.escapeHtml,h=t.cssFilter;r.stripBlankChar&&(e=Zi.stripBlankChar(e)),r.allowCommentTag||(e=Zi.stripCommentTag(e));var f=!1;r.stripIgnoreTagBody&&(f=Zi.StripTagBody(r.stripIgnoreTagBody,n),n=f.onIgnoreTag);var y=hee(e,function(m,g,b,w,S){var x={sourcePosition:m,position:g,isClosing:S,isWhite:Object.prototype.hasOwnProperty.call(i,b)},E=s(b,w,x);if(!Tf(E))return E;if(x.isWhite){if(x.isClosing)return"</"+b+">";var C=yee(w),P=i[b],L=fee(C.html,function(V,q){var H=Vy.indexOf(P,V)!==-1,Y=o(b,V,q,H);return Tf(Y)?H?(q=c(b,V,q,h),q?V+'="'+q+'"':V):(Y=l(b,V,q,H),Tf(Y)?void 0:Y):Y});return w="<"+b,L&&(w+=" "+L),C.closing&&(w+=" /"),w+=">",w}else return E=n(b,w,x),Tf(E)?p(w):E},p);return f&&(y=f.remove(y)),y};var vee=SR;(function(e,t){var r=st,i=i0,s=vee;function n(l,c){var p=new s(c);return p.process(l)}t=e.exports=n,t.filterXSS=n,t.FilterXSS=s,function(){for(var l in r)t[l]=r[l];for(var c in i)t[c]=i[c]}();function o(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}o()&&(self.filterXSS=e.exports)})(P_,P_.exports);var Nl=P_.exports,bee=function(e){if(typeof e!="object"||e===null||Object.prototype.toString.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t},wee=function(){function e(t,r){var i=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],article:["style"],aside:["style"],audio:["autoplay","controls","loop","muted","preload"],b:[],blockquote:["style"],br:[],code:["style"],dd:["style"],del:["style"],details:["open","style"],div:["align","aria-hidden","aria-label","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],footer:["style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],header:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],main:["style"],mark:["style"],nav:["style"],ol:[],p:["style"],pre:["style"],section:["style"],source:["media","src","type"],span:["aria-hidden","aria-label","style"],strong:[],sub:["style"],summary:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],time:["style"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.arcgisCSSWhiteList=Um(Um({},Nl.getDefaultCSSWhiteList()),{"align-items":!0,"align-self":!0,flex:!0,"flex-basis":!0,"flex-direction":!0,"flex-flow":!0,"flex-grow":!0,"flex-shrink":!0,"flex-wrap":!0,float:!0,gap:!0,grid:!0,"grid-area":!0,"grid-auto-columns":!0,"grid-auto-flow":!0,"grid-auto-rows":!0,"grid-column":!0,"grid-column-end":!0,"grid-column-start":!0,"grid-row":!0,"grid-row-end":!0,"grid-row-start":!0,"grid-template":!0,"grid-template-areas":!0,"grid-template-columns":!0,"grid-template-rows":!0,"justify-content":!0,"justify-items":!0,"justify-self":!0,"line-height":!0,overflow:!0}),this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(n,o,l,c){return n==="a"&&o==="href"||(n==="img"||n==="source")&&o==="src"?i.sanitizeUrl(l):Nl.safeAttrValue(n,o,l,c)}},this._entityMap={"&":"&#x38;","<":"&#x3C;",">":"&#x3E;",'"':"&#x22;","'":"&#x27;","/":"&#x2F;"};var s;t&&!r?s=t:t&&r?(s=Object.create(this.arcgisFilterOptions),s.css={whiteList:this.arcgisCSSWhiteList},Object.keys(t).forEach(function(n){if(n==="whiteList")s.whiteList=i._extendObjectOfArrays([i.arcgisWhiteList,t.whiteList||{}]);else if(n==="css"){var o=t.css.whiteList;o!=null&&t.css instanceof Object&&Object.keys(o).forEach(function(l){return s.css.whiteList[l]=o[l]})}else s[n]=t[n]})):(s=Object.create(this.arcgisFilterOptions),s.whiteList=this.arcgisWhiteList,s.css={whiteList:this.arcgisCSSWhiteList}),this.xssFilterOptions=s,this._xssFilter=new Nl.FilterXSS(s)}return e.prototype.sanitize=function(t,r){switch(r===void 0&&(r={}),typeof t){case"number":return isNaN(t)||!isFinite(t)?null:t;case"boolean":return t;case"string":return this._xssFilter.process(t);case"object":return this._iterateOverObject(t,r);default:return r.allowUndefined&&typeof t>"u"?void 0:null}},e.prototype.sanitizeUrl=function(t,r){var i=(r??{}).isProtocolRequired,s=i===void 0?!0:i,n=this._trim(t.substring(0,t.indexOf(":"))),o=t==="/",l=/^#/.test(t),c=n&&this.allowedProtocols.indexOf(n.toLowerCase())>-1;return o||l||c?Nl.escapeAttrValue(t):!n&&!s?Nl.escapeAttrValue("https://".concat(t)):""},e.prototype.sanitizeHTMLAttribute=function(t,r,i,s){return typeof this.xssFilterOptions.safeAttrValue=="function"?this.xssFilterOptions.safeAttrValue(t,r,i,s):Nl.safeAttrValue(t,r,i,s)},e.prototype.validate=function(t,r){r===void 0&&(r={});var i=this.sanitize(t,r);return{isValid:t===i,sanitized:i}},e.prototype.encodeHTML=function(t){var r=this;return String(t).replace(/[&<>"'\/]/g,function(i){return r._entityMap[i]})},e.prototype.encodeAttrValue=function(t){var r=/^[a-zA-Z0-9]$/;return String(t).replace(/[\x00-\xFF]/g,function(i,s){return r.test(i)?i:"&#x".concat(Number(t.charCodeAt(s)).toString(16),";")})},e.prototype._extendObjectOfArrays=function(t){var r={};return t.forEach(function(i){Object.keys(i).forEach(function(s){Array.isArray(i[s])&&Array.isArray(r[s])?r[s]=r[s].concat(i[s]):r[s]=i[s]})}),r},e.prototype._iterateOverObject=function(t,r){var i=this;r===void 0&&(r={});try{var s=!1,n=void 0;if(Array.isArray(t))n=t.reduce(function(l,c){var p=i.validate(c,r);return p.isValid?l.concat([c]):(s=!0,l.concat([p.sanitized]))},[]);else if(bee(t)){var o=Object.keys(t);n=o.reduce(function(l,c){var p=t[c],h=i.validate(p,r);return h.isValid?l[c]=p:(s=!0,l[c]=h.sanitized),l},{})}else return r.allowUndefined&&typeof t>"u"?void 0:null;return s?n:t}catch{return null}},e.prototype._trim=function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},e}();const s0=new Map;function xR(){s0.clear()}function _ee(e){return s0.get(e)}function $ee(e,t){s0.set(e,t)}function gv(e){s0.delete(e)}function IR(...e){const t=Os.acquire();for(let i=0;i<e.length;i++){const s=e[i],n=typeof s;if(n==="string")t.push(s);else if(Array.isArray(s))t.push.apply(t,s);else if(n==="object")for(const o in s)s[o]&&t.push(o)}const r=t.join(" ");return Os.release(t),r}(()=>{const e=new Map,t=new ResizeObserver(i=>{var s;xR();for(const n of i)(s=e.get(n.target))==null||s(n)}),r=(i,s,n)=>(e.set(i,s),t.observe(i,n),pt(()=>{t.unobserve(i),e.delete(i)}));return(i,s,n)=>{let o=null;return nh([W(()=>typeof i=="function"?i():i,l=>{o==null||o.remove(),l&&(o=r(l,s,n))},IP),pt(()=>o==null?void 0:o.remove())])}})();function gn(e){const t=e==null?void 0:e.closest("[dir]");return t!==null&&t instanceof HTMLElement&&t.dir==="rtl"||document.dir==="rtl"}function JE(e){const t="data-node-ref";this[e.getAttribute(t)]=null}function ZE(e){const t="data-node-ref";this[e.getAttribute(t)]=e}const See=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"],xee=See.reduce((e,t)=>(e[t]=[],e),{}),Iee=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],TR=new wee({whiteList:xee,onTagAttr:(e,t,r)=>{const i=`${t}="${r}"`;if(Iee.includes(t))return i},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);async function Tee(e,t){await p$(lh(t));const r=typeof e=="function"?e():e;r&&("setFocus"in r&&typeof r.setFocus=="function"?await r.setFocus():r instanceof HTMLElement&&r.focus())}const MR="http://www.w3.org/",n0=`${MR}2000/svg`,ER=`${MR}1999/xlink`;let YE=[],f2=(e,t)=>{let r={};return Object.keys(e).forEach(i=>{r[i]=e[i]}),t&&Object.keys(t).forEach(i=>{r[i]=t[i]}),r},y2=(e,t)=>e.vnodeSelector===t.vnodeSelector&&(e.properties&&t.properties?e.properties.key===t.properties.key&&e.properties.bind===t.properties.bind:!e.properties&&!t.properties),AR=e=>{if(typeof e!="string")throw new Error("Style values must be strings")},Mee=(e,t,r)=>{if(t.vnodeSelector!==""){for(let i=r;i<e.length;i++)if(y2(e[i],t))return i}return-1},vv=(e,t,r,i)=>{let s=e[t];if(s.vnodeSelector==="")return;let n=s.properties;if(!(n&&(n.key===void 0?n.bind:n.key))){for(let o=0;o<e.length;o++)if(o!==t){let l=e[o];if(y2(l,s))throw new Error(`${r.vnodeSelector} had a ${s.vnodeSelector} child ${i==="added"?i:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},Eee=e=>{if(e.properties){let t=e.properties.enterAnimation;t&&t(e.domNode,e.properties)}},N_=[],R_=!1,CR=e=>{(e.children||[]).forEach(CR),e.properties&&e.properties.afterRemoved&&e.properties.afterRemoved.apply(e.properties.bind||e.properties,[e.domNode])},QE=()=>{R_=!1,N_.forEach(CR),N_.length=0},KE=e=>{N_.push(e),R_||(R_=!0,typeof window<"u"&&"requestIdleCallback"in window?window.requestIdleCallback(QE,{timeout:16}):setTimeout(QE,16))},XE=e=>{let t=e.domNode;if(e.properties){let r=e.properties.exitAnimation;if(r)return t.style.pointerEvents="none",void r(t,()=>{t.parentNode&&(t.parentNode.removeChild(t),KE(e))},e.properties)}t.parentNode&&(t.parentNode.removeChild(t),KE(e))},Aee=(e,t,r)=>{if(!t)return;let i=r.eventHandlerInterceptor,s=Object.keys(t),n=s.length;for(let o=0;o<n;o++){let l=s[o],c=t[l];if(l==="className")throw new Error('Property "className" is not supported, use "class".');if(l==="class")D_(e,c,!0);else if(l==="classes"){let p=Object.keys(c),h=p.length;for(let f=0;f<h;f++){let y=p[f];c[y]&&e.classList.add(y)}}else if(l==="styles"){let p=Object.keys(c),h=p.length;for(let f=0;f<h;f++){let y=p[f],m=c[y];m&&(AR(m),r.styleApplyer(e,y,m))}}else if(l!=="key"&&c!=null){let p=typeof c;p==="function"?(l.lastIndexOf("on",0)===0&&(i&&(c=i(l,c,e,t)),l==="oninput"&&function(){let h=c;c=function(f){h.apply(this,[f]),f.target["oninput-value"]=f.target.value}}()),e[l]=c):r.namespace===n0?l==="href"?e.setAttributeNS(ER,l,c):e.setAttribute(l,c):p==="string"&&l!=="value"?l==="innerHTML"?e[l]=TR.sanitize(c):j_(e)&&l in e?e[l]=c:e.setAttribute(l,c):e[l]=c}}};function j_(e){if(!(e instanceof Element&&e.tagName.includes("-")))return!1;const t=window.customElements.get(e.tagName.toLowerCase());return!!t&&e instanceof t}let qm,Cee=(e,t,r)=>{if(t)for(let i of t)ku(i,e,void 0,r)},OR=(e,t,r)=>{Cee(e,t.children,r),t.text&&(e.textContent=t.text),Aee(e,t.properties,r),t.properties&&t.properties.afterCreate&&t.properties.afterCreate.apply(t.properties.bind||t.properties,[e,r,t.vnodeSelector,t.properties,t.children])},ku=(e,t,r,i)=>{let s,n=0,o=e.vnodeSelector,l=t.ownerDocument;if(o==="")s=e.domNode=l.createTextNode(e.text),r!==void 0?t.insertBefore(s,r):t.appendChild(s);else{for(let c=0;c<=o.length;++c){let p=o.charAt(c);if(c===o.length||p==="."||p==="#"){let h=o.charAt(n-1),f=o.slice(n,c);h==="."?s.classList.add(f):h==="#"?s.id=f:(f==="svg"&&(i=f2(i,{namespace:n0})),i.namespace!==void 0?s=e.domNode=l.createElementNS(i.namespace,f):(s=e.domNode=e.domNode||l.createElement(f),f==="input"&&e.properties&&e.properties.type!==void 0&&s.setAttribute("type",e.properties.type)),r!==void 0?t.insertBefore(s,r):s.parentNode!==t&&t.appendChild(s)),n=c+1}}OR(s,e,i)}},D_=(e,t,r)=>{t&&t.split(" ").forEach(i=>{i&&e.classList.toggle(i,r)})},Oee=(e,t,r,i)=>{if(!r)return;let s=!1,n=Object.keys(r),o=n.length;for(let l=0;l<o;l++){let c=n[l],p=r[c],h=t[c];if(c==="class")h!==p&&(D_(e,h,!1),D_(e,p,!0));else if(c==="classes"){let f=e.classList,y=Object.keys(p),m=y.length;for(let g=0;g<m;g++){let b=y[g],w=!!p[b];w!==!!h[b]&&(s=!0,w?f.add(b):f.remove(b))}}else if(c==="styles"){let f=Object.keys(p),y=f.length;for(let m=0;m<y;m++){let g=f[m],b=p[g];b!==h[g]&&(s=!0,b?(AR(b),i.styleApplyer(e,g,b)):i.styleApplyer(e,g,""))}}else if(p||typeof h!="string"||(p=""),c!=="value"||j_(e)){if(p!==h){let f=typeof p;f==="function"&&i.eventHandlerInterceptor||(i.namespace===n0?c==="href"?e.setAttributeNS(ER,c,p):e.setAttribute(c,p):f==="string"?c==="innerHTML"?e[c]=TR.sanitize(p):c==="role"&&p===""?e.removeAttribute(c):j_(e)&&c in e?e[c]=p:e.setAttribute(c,p):e[c]!==p&&(e[c]=p),s=!0)}}else{let f=e[c];f!==p&&(e["oninput-value"]?f===e["oninput-value"]:p!==h)&&(e[c]=p,e["oninput-value"]=void 0),p!==h&&(s=!0)}}return s},Fee=(e,t,r,i,s)=>{if(r===i)return!1;i=i||YE;let n,o=(r=r||YE).length,l=i.length,c=0,p=0,h=!1;for(;p<l;){let f=c<o?r[c]:void 0,y=i[p];if(f!==void 0&&y2(f,y))h=qm(f,y,s)||h,c++;else{let m=Mee(r,y,c+1);if(m>=0){for(n=c;n<m;n++)XE(r[n]),vv(r,n,e,"removed");h=qm(r[m],y,s)||h,c=m+1}else ku(y,t,c<o?r[c].domNode:void 0,s),Eee(y),vv(i,p,e,"added")}p++}if(o>c)for(n=c;n<o;n++)XE(r[n]),vv(r,n,e,"removed");return h};qm=(e,t,r)=>{let i=e.domNode,s=!1;if(e===t)return!1;let n=!1;if(t.vnodeSelector===""){if(t.text!==e.text){let o=i.ownerDocument.createTextNode(t.text);return i.parentNode.replaceChild(o,i),t.domNode=o,s=!0,s}t.domNode=i}else t.vnodeSelector.lastIndexOf("svg",0)===0&&(r=f2(r,{namespace:n0})),e.text!==t.text&&(n=!0,t.text===void 0?i.removeChild(i.firstChild):i.textContent=t.text),t.domNode=i,n=Fee(t,i,e.children,t.children,r)||n,n=Oee(i,e.properties,t.properties,r)||n,t.properties&&t.properties.afterUpdate&&t.properties.afterUpdate.apply(t.properties.bind||t.properties,[i,r,t.vnodeSelector,t.properties,t.children]);return n&&t.properties&&t.properties.updateAnimation&&t.properties.updateAnimation(i,t.properties,e.properties),s};let nd=(e,t)=>({getLastRender:()=>e,update:r=>{if(e.vnodeSelector!==r.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let i=e;e=r,qm(i,r,t)},domNode:e.domNode});const kee={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,r)=>{t.charAt(0)==="-"?e.style.setProperty(t,r):e.style[t]=r}};let gu=e=>f2(kee,e),To={create:(e,t)=>(t=gu(t),ku(e,document.createElement("div"),void 0,t),nd(e,t)),append:(e,t,r)=>(r=gu(r),ku(t,e,void 0,r),nd(t,r)),insertBefore:(e,t,r)=>(r=gu(r),ku(t,e.parentNode,e,r),nd(t,r)),merge:(e,t,r)=>(r=gu(r),t.domNode=e,OR(e,t,r),nd(t,r)),replace:(e,t,r)=>(r=gu(r),ku(t,e.parentNode,e,r),e.parentNode.removeChild(e),nd(t,r))},FR,Pee=(e,t)=>{let r=[];for(;e&&e!==t;)r.push(e),e=e.parentNode;return r};FR=Array.prototype.find?(e,t)=>e.find(t):(e,t)=>e.filter(t)[0];let Lee=(e,t)=>{let r=e;return t.forEach(i=>{r=r&&r.children?FR(r.children,s=>s.domNode===i):void 0}),r},Nee=(e,t,r)=>{let i=function(s){r("domEvent",s);let n=t(),o=Pee(s.currentTarget,n.domNode);o.reverse();let l,c=Lee(n.getLastRender(),o);return e.scheduleRender(),c&&(l=c.properties[`on${s.type}`].apply(c.properties.bind||this,arguments)),r("domEventProcessed",s),l};return(s,n,o,l)=>i},Ree=e=>{let t,r,i=gu(e),s=i.performanceLogger,n=!0,o=!1,l=[],c=[],p=(f,y,m)=>{let g,b=()=>g;i.eventHandlerInterceptor=Nee(t,b,s),g=f(y,m(),i),l.push(g),c.push(m)},h=()=>{if(r=void 0,n){n=!1,s("renderStart",void 0);for(let f=0;f<l.length;f++){let y=c[f]();s("rendered",void 0),l[f].update(y),s("patched",void 0)}s("renderDone",void 0),n=!0}};return t={renderNow:h,scheduleRender:()=>{r||o||(r=requestAnimationFrame(h))},stop:()=>{r&&(cancelAnimationFrame(r),r=void 0),o=!0},resume:()=>{o=!1,n=!0,t.scheduleRender()},append:(f,y)=>{p(To.append,f,y)},insertBefore:(f,y)=>{p(To.insertBefore,f,y)},merge:(f,y)=>{p(To.merge,f,y)},replace:(f,y)=>{p(To.replace,f,y)},detach:f=>{for(let y=0;y<c.length;y++)if(c[y]===f)return c.splice(y,1),l.splice(y,1)[0];throw new Error("renderFunction was not found")}},t};const jee={handleInterceptedEvent:(e,t,r,i)=>(e.scheduleRender(),t.properties[`on${i.type}`].apply(t.properties.bind||r,[i]))},Dee={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,r)=>{t.charAt(0)==="-"?e.style.setProperty(t,r):e.style[t]=r}},Vee=e=>({...Dee,...e}),Uee=(e,t)=>{const r=[];for(;e&&e!==t;)r.push(e),e=e.parentNode;return r},zee=(e,t)=>e.find(t),e3=(e,t,r=!1)=>{let i=e;return t.forEach((s,n)=>{const o=i!=null&&i.children?zee(i.children,l=>l.domNode===s):void 0;r&&!o&&n!==t.length-1||(i=o)}),i},qee=e=>{let t;const r={...jee,...e},i=Vee(r),s=i.performanceLogger;let n,o=!0,l=!1;const c=[],p=[],h=(y,m,g)=>{var S;let b;i.eventHandlerInterceptor=(x,E,C,P)=>function(L){let V;s("domEvent",L);const q=Uee(L.currentTarget,b.domNode),H=q.some(se=>{var de;return customElements.get((de=se==null?void 0:se.tagName)==null?void 0:de.toLowerCase())});if(L.eventPhase===Event.CAPTURING_PHASE||!H)q.reverse(),V=e3(b.getLastRender(),q);else{const se=L.composedPath(),de=se.slice(se.indexOf(L.currentTarget),se.indexOf(b.domNode)).reverse();V=e3(b.getLastRender(),de,!0)}let Y;return V&&(Y=r.handleInterceptedEvent(t,V,this,L)),s("domEventProcessed",L),Y},(S=r.postProcessProjectionOptions)==null||S.call(r,i);const w=g();b=y(m,w,i),i.eventHandlerInterceptor=void 0,c.push(b),p.push(g),r.afterFirstVNodeRendered&&r.afterFirstVNodeRendered(b,w)};let f=()=>{if(n=void 0,o){o=!1,s("renderStart",void 0);for(let y=0;y<c.length;y++){const m=p[y]();s("rendered",void 0);try{c[y].update(m)}catch(g){console.error(g)}s("patched",void 0)}s("renderDone",void 0),o=!0}};return r.modifyDoRenderImplementation&&(f=r.modifyDoRenderImplementation(f,c,p)),t={renderNow:f,scheduleRender:()=>{n||l||(n=requestAnimationFrame(f))},stop:()=>{n&&(cancelAnimationFrame(n),n=void 0),l=!0},resume:()=>{l=!1,o=!0,t.scheduleRender()},append:(y,m)=>{h(To.append,y,m)},insertBefore:(y,m)=>{h(To.insertBefore,y,m)},merge:(y,m)=>{h(To.merge,y,m)},replace:(y,m)=>{h(To.replace,y,m)},detach:y=>{for(let m=0;m<p.length;m++)if(p[m]===y)return p.splice(m,1),c.splice(m,1)[0];throw new Error("renderFunction was not found")}},t};/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const kR="calcite-mode-auto",PR="calcite-mode-dark",Gee="calcite-mode-light",jde={autoMode:kR,darkMode:PR,lightMode:Gee,rtl:"calcite--rtl",calciteAnimate:"calcite-animate",calciteAnimateIn:"calcite-animate__in",calciteAnimateInUp:"calcite-animate__in-up",calciteAnimateInDown:"calcite-animate__in-down",calciteAnimateInRight:"calcite-animate__in-right",calciteAnimateInLeft:"calcite-animate__in-left",calciteAnimateInScale:"calcite-animate__in-scale"},Dde={filter:250,nextTick:0,resize:150,reposition:100};var _i={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,formAssociated:!1,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0,experimentalSlotFixes:!1},Bee=Object.defineProperty,Wee=(e,t)=>{for(var r in t)Bee(e,r,{get:t[r],enumerable:!0})},LR=new WeakMap,El=e=>LR.get(e),Hee=(e,t)=>{const r={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};return LR.set(e,r)},t3=(e,t)=>t in e,kh=(e,t)=>(0,console.error)(e,t),Gm=new Map,Jee=[],Zee="slot-fb{display:contents}slot-fb[hidden]{display:none}",r3="http://www.w3.org/1999/xlink",Ph=typeof window<"u"?window:{},ss=Ph.document||{head:{}},Vde=Ph.HTMLElement||class{},zt={$flags$:0,$resourcesUrl$:"",jmp:e=>e(),raf:e=>requestAnimationFrame(e),ael:(e,t,r,i)=>e.addEventListener(t,r,i),rel:(e,t,r,i)=>e.removeEventListener(t,r,i),ce:(e,t)=>new CustomEvent(e,t)},Yee=(()=>{let e=!1;try{ss.addEventListener("e",null,Object.defineProperty({},"passive",{get(){e=!0}}))}catch{}return e})(),Qee=e=>Promise.resolve(e),Kee=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch{}return!1})(),V_=!1,U_=[],NR=[],RR=(e,t)=>r=>{e.push(r),V_||(V_=!0,t&&zt.$flags$&4?Xee(z_):zt.raf(z_))},i3=e=>{for(let t=0;t<e.length;t++)try{e[t](performance.now())}catch(r){kh(r)}e.length=0},z_=()=>{i3(U_),i3(NR),(V_=U_.length>0)&&zt.raf(z_)},Xee=e=>Qee().then(e),Ude=RR(U_,!1),ete=RR(NR,!0),tte=e=>{const t=new URL(e,zt.$resourcesUrl$);return t.origin!==Ph.location.origin?t.href:t.pathname},rte=e=>zt.$resourcesUrl$=e,s3={},ite="http://www.w3.org/2000/svg",ste="http://www.w3.org/1999/xhtml",nte=e=>e!=null,m2=e=>(e=typeof e,e==="object"||e==="function");function ote(e){var t,r,i;return(i=(r=(t=e.head)==null?void 0:t.querySelector('meta[name="csp-nonce"]'))==null?void 0:r.getAttribute("content"))!=null?i:void 0}var ate={};Wee(ate,{err:()=>jR,map:()=>lte,ok:()=>q_,unwrap:()=>ute,unwrapErr:()=>cte});var q_=e=>({isOk:!0,isErr:!1,value:e}),jR=e=>({isOk:!1,isErr:!0,value:e});function lte(e,t){if(e.isOk){const r=t(e.value);return r instanceof Promise?r.then(i=>q_(i)):q_(r)}if(e.isErr){const r=e.value;return jR(r)}throw"should never get here"}var ute=e=>{if(e.isOk)return e.value;throw e.value},cte=e=>{if(e.isErr)return e.value;throw e.value},yl=(e,t="")=>()=>{},DR=(e,t,...r)=>{let i=null,s=null,n=null,o=!1,l=!1;const c=[],p=f=>{for(let y=0;y<f.length;y++)i=f[y],Array.isArray(i)?p(i):i!=null&&typeof i!="boolean"&&((o=typeof e!="function"&&!m2(i))&&(i=String(i)),o&&l?c[c.length-1].$text$+=i:c.push(o?Bm(null,i):i),l=o)};if(p(r),t){t.key&&(s=t.key),t.name&&(n=t.name);{const f=t.className||t.class;f&&(t.class=typeof f!="object"?f:Object.keys(f).filter(y=>f[y]).join(" "))}}if(typeof e=="function")return e(t===null?{}:t,c,hte);const h=Bm(e,null);return h.$attrs$=t,c.length>0&&(h.$children$=c),h.$key$=s,h.$name$=n,h},Bm=(e,t)=>{const r={$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null};return r.$attrs$=null,r.$key$=null,r.$name$=null,r},dte={},pte=e=>e&&e.$tag$===dte,hte={forEach:(e,t)=>e.map(n3).forEach(t),map:(e,t)=>e.map(n3).map(t).map(fte)},n3=e=>({vattrs:e.$attrs$,vchildren:e.$children$,vkey:e.$key$,vname:e.$name$,vtag:e.$tag$,vtext:e.$text$}),fte=e=>{if(typeof e.vtag=="function"){const r={...e.vattrs};return e.vkey&&(r.key=e.vkey),e.vname&&(r.name=e.vname),DR(e.vtag,r,...e.vchildren||[])}const t=Bm(e.vtag,e.vtext);return t.$attrs$=e.vattrs,t.$children$=e.vchildren,t.$key$=e.vkey,t.$name$=e.vname,t},yte=e=>Jee.map(t=>t(e)).find(t=>!!t),mte=(e,t)=>e!=null&&!m2(e)?t&4?e==="false"?!1:e===""||!!e:t&2?parseFloat(e):t&1?String(e):e:e,gte=e=>e,zde=(e,t,r)=>{const i=gte(e);return{emit:s=>vte(i,t,{bubbles:!!(r&4),composed:!!(r&2),cancelable:!!(r&1),detail:s})}},vte=(e,t,r)=>{const i=zt.ce(t,r);return e.dispatchEvent(i),i},o3=new WeakMap,bte=(e,t,r)=>{let i=Gm.get(e);Kee&&r?(i=i||new CSSStyleSheet,typeof i=="string"?i=t:i.replaceSync(t)):i=t,Gm.set(e,i)},wte=(e,t,r)=>{var i;const s=VR(t,r),n=Gm.get(s);if(e=e.nodeType===11?e:ss,n)if(typeof n=="string"){e=e.head||e;let o=o3.get(e),l;if(o||o3.set(e,o=new Set),!o.has(s)){{l=ss.createElement("style"),l.innerHTML=n;const c=(i=zt.$nonce$)!=null?i:ote(ss);c!=null&&l.setAttribute("nonce",c),(!(t.$flags$&1)||t.$flags$&1&&e.nodeName!=="HEAD")&&e.insertBefore(l,e.querySelector("link"))}t.$flags$&4&&(l.innerHTML+=Zee),o&&o.add(s)}}else e.adoptedStyleSheets.includes(n)||(e.adoptedStyleSheets=[...e.adoptedStyleSheets,n]);return s},_te=e=>{const t=e.$cmpMeta$,r=e.$hostElement$,i=t.$flags$,s=yl("attachStyles",t.$tagName$),n=wte(r.shadowRoot?r.shadowRoot:r.getRootNode(),t,e.$modeName$);i&10&&i&2&&(r["s-sc"]=n,r.classList.add(n+"-h"),i&2&&r.classList.add(n+"-s")),s()},VR=(e,t)=>"sc-"+(t&&e.$flags$&32?e.$tagName$+"-"+t:e.$tagName$),a3=(e,t,r,i,s,n)=>{if(r!==i){let o=t3(e,t),l=t.toLowerCase();if(t==="class"){const c=e.classList,p=l3(r),h=l3(i);c.remove(...p.filter(f=>f&&!h.includes(f))),c.add(...h.filter(f=>f&&!p.includes(f)))}else if(t==="style"){for(const c in r)(!i||i[c]==null)&&(c.includes("-")?e.style.removeProperty(c):e.style[c]="");for(const c in i)(!r||i[c]!==r[c])&&(c.includes("-")?e.style.setProperty(c,i[c]):e.style[c]=i[c])}else if(t!=="key")if(t==="ref")i&&i(e);else if(!e.__lookupSetter__(t)&&t[0]==="o"&&t[1]==="n"){if(t[2]==="-"?t=t.slice(3):t3(Ph,l)?t=l.slice(2):t=l[2]+t.slice(3),r||i){const c=t.endsWith(UR);t=t.replace(Ste,""),r&&zt.rel(e,t,r,c),i&&zt.ael(e,t,i,c)}}else{const c=m2(i);if((o||c&&i!==null)&&!s)try{if(e.tagName.includes("-"))e[t]=i;else{const h=i??"";t==="list"?o=!1:(r==null||e[t]!=h)&&(e[t]=h)}}catch{}let p=!1;l!==(l=l.replace(/^xlink\:?/,""))&&(t=l,p=!0),i==null||i===!1?(i!==!1||e.getAttribute(t)==="")&&(p?e.removeAttributeNS(r3,t):e.removeAttribute(t)):(!o||n&4||s)&&!c&&(i=i===!0?"":i,p?e.setAttributeNS(r3,t,i):e.setAttribute(t,i))}}},$te=/\s/,l3=e=>e?e.split($te):[],UR="Capture",Ste=new RegExp(UR+"$"),zR=(e,t,r)=>{const i=t.$elm$.nodeType===11&&t.$elm$.host?t.$elm$.host:t.$elm$,s=e&&e.$attrs$||s3,n=t.$attrs$||s3;for(const o of u3(Object.keys(s)))o in n||a3(i,o,s[o],void 0,r,t.$flags$);for(const o of u3(Object.keys(n)))a3(i,o,s[o],n[o],r,t.$flags$)};function u3(e){return e.includes("ref")?[...e.filter(t=>t!=="ref"),"ref"]:e}var vu,G_,Xp,Wm=!1,Hm=!1,g2=!1,Kr=!1,Jm=(e,t,r,i)=>{var s;const n=t.$children$[r];let o=0,l,c,p;if(Wm||(g2=!0,n.$tag$==="slot"&&(vu&&i.classList.add(vu+"-s"),n.$flags$|=n.$children$?2:1)),n.$text$!==null)l=n.$elm$=ss.createTextNode(n.$text$);else if(n.$flags$&1)l=n.$elm$=ss.createTextNode("");else{if(Kr||(Kr=n.$tag$==="svg"),l=n.$elm$=ss.createElementNS(Kr?ite:ste,!Wm&&_i.slotRelocation&&n.$flags$&2?"slot-fb":n.$tag$),Kr&&n.$tag$==="foreignObject"&&(Kr=!1),zR(null,n,Kr),!!l.getRootNode().querySelector("body")&&_i.scoped&&nte(vu)&&l["s-si"]!==vu&&l.classList.add(l["s-si"]=vu),b2(l,i),n.$children$)for(o=0;o<n.$children$.length;++o)c=Jm(e,n,o,l),c&&l.appendChild(c);n.$tag$==="svg"?Kr=!1:l.tagName==="foreignObject"&&(Kr=!0)}return l["s-hn"]=Xp,n.$flags$&3&&(l["s-sr"]=!0,l["s-cr"]=G_,l["s-sn"]=n.$name$||"",l["s-rf"]=(s=n.$attrs$)==null?void 0:s.ref,p=e&&e.$children$&&e.$children$[r],p&&p.$tag$===n.$tag$&&e.$elm$&&eh(e.$elm$,!1)),l},eh=(e,t)=>{zt.$flags$|=1;const r=Array.from(e.childNodes);e["s-sr"]&&_i.experimentalSlotFixes;for(let i=r.length-1;i>=0;i--){const s=r[i];s["s-hn"]!==Xp&&s["s-ol"]&&(ko(BR(s),s,v2(s)),s["s-ol"].remove(),s["s-ol"]=void 0,s["s-sh"]=void 0,g2=!0),t&&eh(s,t)}zt.$flags$&=-2},qR=(e,t,r,i,s,n)=>{let o=e["s-cr"]&&e["s-cr"].parentNode||e,l;for(o.shadowRoot&&o.tagName===Xp&&(o=o.shadowRoot);s<=n;++s)i[s]&&(l=Jm(null,r,s,e),l&&(i[s].$elm$=l,ko(o,l,v2(t))))},GR=(e,t,r)=>{for(let i=t;i<=r;++i){const s=e[i];if(s){const n=s.$elm$;JR(s),n&&(Hm=!0,n["s-ol"]?n["s-ol"].remove():eh(n,!0),n.remove())}}},xte=(e,t,r,i,s=!1)=>{let n=0,o=0,l=0,c=0,p=t.length-1,h=t[0],f=t[p],y=i.length-1,m=i[0],g=i[y],b,w;for(;n<=p&&o<=y;)if(h==null)h=t[++n];else if(f==null)f=t[--p];else if(m==null)m=i[++o];else if(g==null)g=i[--y];else if(Mf(h,m,s))bu(h,m,s),h=t[++n],m=i[++o];else if(Mf(f,g,s))bu(f,g,s),f=t[--p],g=i[--y];else if(Mf(h,g,s))(h.$tag$==="slot"||g.$tag$==="slot")&&eh(h.$elm$.parentNode,!1),bu(h,g,s),ko(e,h.$elm$,f.$elm$.nextSibling),h=t[++n],g=i[--y];else if(Mf(f,m,s))(h.$tag$==="slot"||g.$tag$==="slot")&&eh(f.$elm$.parentNode,!1),bu(f,m,s),ko(e,f.$elm$,h.$elm$),f=t[--p],m=i[++o];else{for(l=-1,c=n;c<=p;++c)if(t[c]&&t[c].$key$!==null&&t[c].$key$===m.$key$){l=c;break}l>=0?(w=t[l],w.$tag$!==m.$tag$?b=Jm(t&&t[o],r,l,e):(bu(w,m,s),t[l]=void 0,b=w.$elm$),m=i[++o]):(b=Jm(t&&t[o],r,o,e),m=i[++o]),b&&ko(BR(h.$elm$),b,v2(h.$elm$))}n>p?qR(e,i[y+1]==null?null:i[y+1].$elm$,r,i,o,y):o>y&&GR(t,n,p)},Mf=(e,t,r=!1)=>e.$tag$===t.$tag$?e.$tag$==="slot"?"$nodeId$"in e&&r&&e.$elm$.nodeType!==8?!1:e.$name$===t.$name$:r?!0:e.$key$===t.$key$:!1,v2=e=>e&&e["s-ol"]||e,BR=e=>(e["s-ol"]?e["s-ol"]:e).parentNode,bu=(e,t,r=!1)=>{const i=t.$elm$=e.$elm$,s=e.$children$,n=t.$children$,o=t.$tag$,l=t.$text$;let c;l===null?(Kr=o==="svg"?!0:o==="foreignObject"?!1:Kr,o==="slot"&&!Wm||zR(e,t,Kr),s!==null&&n!==null?xte(i,s,t,n,r):n!==null?(e.$text$!==null&&(i.textContent=""),qR(i,null,t,n,0,n.length-1)):!r&&_i.updatable&&s!==null&&GR(s,0,s.length-1),Kr&&o==="svg"&&(Kr=!1)):(c=i["s-cr"])?c.parentNode.textContent=l:e.$text$!==l&&(i.data=l)},WR=e=>{const t=e.childNodes;for(const r of t)if(r.nodeType===1){if(r["s-sr"]){const i=r["s-sn"];r.hidden=!1;for(const s of t)if(s!==r){if(s["s-hn"]!==r["s-hn"]||i!==""){if(s.nodeType===1&&(i===s.getAttribute("slot")||i===s["s-sn"])||s.nodeType===3&&i===s["s-sn"]){r.hidden=!0;break}}else if(s.nodeType===1||s.nodeType===3&&s.textContent.trim()!==""){r.hidden=!0;break}}}WR(r)}},fn=[],HR=e=>{let t,r,i;for(const s of e.childNodes){if(s["s-sr"]&&(t=s["s-cr"])&&t.parentNode){r=t.parentNode.childNodes;const n=s["s-sn"];for(i=r.length-1;i>=0;i--)if(t=r[i],!t["s-cn"]&&!t["s-nr"]&&t["s-hn"]!==s["s-hn"]&&!_i.experimentalSlotFixes)if(c3(t,n)){let o=fn.find(l=>l.$nodeToRelocate$===t);Hm=!0,t["s-sn"]=t["s-sn"]||n,o?(o.$nodeToRelocate$["s-sh"]=s["s-hn"],o.$slotRefNode$=s):(t["s-sh"]=s["s-hn"],fn.push({$slotRefNode$:s,$nodeToRelocate$:t})),t["s-sr"]&&fn.map(l=>{c3(l.$nodeToRelocate$,t["s-sn"])&&(o=fn.find(c=>c.$nodeToRelocate$===t),o&&!l.$slotRefNode$&&(l.$slotRefNode$=o.$slotRefNode$))})}else fn.some(o=>o.$nodeToRelocate$===t)||fn.push({$nodeToRelocate$:t})}s.nodeType===1&&HR(s)}},c3=(e,t)=>e.nodeType===1?e.getAttribute("slot")===null&&t===""||e.getAttribute("slot")===t:e["s-sn"]===t?!0:t==="",JR=e=>{e.$attrs$&&e.$attrs$.ref&&e.$attrs$.ref(null),e.$children$&&e.$children$.map(JR)},ko=(e,t,r)=>{const i=e==null?void 0:e.insertBefore(t,r);return b2(t,e),i},ZR=e=>{const t=[];return e&&t.push(...e["s-scs"]||[],e["s-si"],e["s-sc"],...ZR(e.parentElement)),t},b2=(e,t,r=!1)=>{var i;if(e&&t&&e.nodeType===1){const s=new Set(ZR(t).filter(Boolean));if(s.size&&((i=e.classList)==null||i.add(...e["s-scs"]=[...s]),e["s-ol"]||r))for(const n of Array.from(e.childNodes))b2(n,e,!0)}},Ite=(e,t,r=!1)=>{var i,s,n,o,l;const c=e.$hostElement$,p=e.$cmpMeta$,h=e.$vnode$||Bm(null,null),f=pte(t)?t:DR(null,null,t);if(Xp=c.tagName,p.$attrsToReflect$&&(f.$attrs$=f.$attrs$||{},p.$attrsToReflect$.map(([y,m])=>f.$attrs$[m]=c[y])),r&&f.$attrs$)for(const y of Object.keys(f.$attrs$))c.hasAttribute(y)&&!["key","ref","style","class"].includes(y)&&(f.$attrs$[y]=c[y]);f.$tag$=null,f.$flags$|=4,e.$vnode$=f,f.$elm$=h.$elm$=c.shadowRoot||c,vu=c["s-sc"],Wm=(p.$flags$&1)!==0,G_=c["s-cr"],Hm=!1,bu(h,f,r);{if(zt.$flags$|=1,g2){HR(f.$elm$);for(const y of fn){const m=y.$nodeToRelocate$;if(!m["s-ol"]){const g=ss.createTextNode("");g["s-nr"]=m,ko(m.parentNode,m["s-ol"]=g,m)}}for(const y of fn){const m=y.$nodeToRelocate$,g=y.$slotRefNode$;if(g){const b=g.parentNode;let w=g.nextSibling;{let S=(i=m["s-ol"])==null?void 0:i.previousSibling;for(;S;){let x=(s=S["s-nr"])!=null?s:null;if(x&&x["s-sn"]===m["s-sn"]&&b===x.parentNode){for(x=x.nextSibling;x===m||x!=null&&x["s-sr"];)x=x==null?void 0:x.nextSibling;if(!x||!x["s-nr"]){w=x;break}}S=S.previousSibling}}(!w&&b!==m.parentNode||m.nextSibling!==w)&&m!==w&&(!m["s-hn"]&&m["s-ol"]&&(m["s-hn"]=m["s-ol"].parentNode.nodeName),ko(b,m,w),m.nodeType===1&&(m.hidden=(n=m["s-ih"])!=null?n:!1)),m&&typeof g["s-rf"]=="function"&&g["s-rf"](m)}else m.nodeType===1&&(r&&(m["s-ih"]=(o=m.hidden)!=null?o:!1),m.hidden=!0)}}Hm&&WR(f.$elm$),zt.$flags$&=-2,fn.length=0}if(_i.experimentalScopedSlotChanges&&p.$flags$&2)for(const y of f.$elm$.childNodes)y["s-hn"]!==Xp&&!y["s-sh"]&&(r&&y["s-ih"]==null&&(y["s-ih"]=(l=y.hidden)!=null?l:!1),y.hidden=!0);G_=void 0},Tte=(e,t)=>{},w2=(e,t)=>(e.$flags$|=16,Tte(e,e.$ancestorComponent$),ete(()=>Mte(e,t))),Mte=(e,t)=>{const r=e.$hostElement$,i=yl("scheduleUpdate",e.$cmpMeta$.$tagName$),s=r;if(!s)throw new Error(`Can't render component <${r.tagName.toLowerCase()} /> with invalid Stencil runtime! Make sure this imported component is compiled with a \`externalRuntime: true\` flag. For more information, please refer to https://stenciljs.com/docs/custom-elements#externalruntime`);let n;return t?n=ec(s,"componentWillLoad"):n=ec(s,"componentWillUpdate"),n=d3(n,()=>ec(s,"componentWillRender")),i(),d3(n,()=>Ate(e,s,t))},d3=(e,t)=>Ete(e)?e.then(t).catch(r=>{console.error(r),t()}):t(),Ete=e=>e instanceof Promise||e&&e.then&&typeof e.then=="function",Ate=async(e,t,r)=>{const i=e.$hostElement$,s=yl("update",e.$cmpMeta$.$tagName$);i["s-rc"],r&&_te(e);const n=yl("render",e.$cmpMeta$.$tagName$);Cte(e,t,i,r),n(),s(),Ote(e)},p3=null,Cte=(e,t,r,i)=>{try{p3=t,t=t.render&&t.render(),e.$flags$&=-17,e.$flags$|=2,(_i.hasRenderFn||_i.reflect)&&(_i.vdomRender||_i.reflect)&&(_i.hydrateServerSide||Ite(e,t,i))}catch(c){kh(c,e.$hostElement$)}return p3=null,null},Ote=e=>{const t=e.$cmpMeta$.$tagName$,r=e.$hostElement$,i=yl("postUpdate",t),s=r;e.$ancestorComponent$,ec(s,"componentDidRender"),e.$flags$&64?(ec(s,"componentDidUpdate"),i()):(e.$flags$|=64,ec(s,"componentDidLoad"),i())},qde=e=>{{const t=El(e),r=t.$hostElement$.isConnected;return r&&(t.$flags$&18)===2&&w2(t,!1),r}},ec=(e,t,r)=>{if(e&&e[t])try{return e[t](r)}catch(i){kh(i)}},Fte=(e,t)=>El(e).$instanceValues$.get(t),kte=(e,t,r,i)=>{const s=El(e),n=e,o=s.$instanceValues$.get(t),l=s.$flags$,c=n;r=mte(r,i.$members$[t][0]);const p=Number.isNaN(o)&&Number.isNaN(r);if(r!==o&&!p){s.$instanceValues$.set(t,r);{if(i.$watchers$&&l&128){const f=i.$watchers$[t];f&&f.map(y=>{try{c[y](r,o,t)}catch(m){kh(m,n)}})}if((l&18)===2){if(c.componentShouldUpdate&&c.componentShouldUpdate(r,o,t)===!1)return;w2(s,!1)}}}},Pte=(e,t,r)=>{var i,s;const n=e.prototype;if(t.$members$||t.$watchers$||e.watchers){e.watchers&&!t.$watchers$&&(t.$watchers$=e.watchers);const o=Object.entries((i=t.$members$)!=null?i:{});o.map(([l,[c]])=>{(c&31||c&32)&&Object.defineProperty(n,l,{get(){return Fte(this,l)},set(p){kte(this,l,p,t)},configurable:!0,enumerable:!0})});{const l=new Map;n.attributeChangedCallback=function(c,p,h){zt.jmp(()=>{var f;const y=l.get(c);if(this.hasOwnProperty(y))h=this[y],delete this[y];else{if(n.hasOwnProperty(y)&&typeof this[y]=="number"&&this[y]==h)return;if(y==null){const m=El(this),g=m==null?void 0:m.$flags$;if(g&&!(g&8)&&g&128&&h!==p){const w=this,S=(f=t.$watchers$)==null?void 0:f[c];S==null||S.forEach(x=>{w[x]!=null&&w[x].call(w,h,p,c)})}return}}this[y]=h===null&&typeof this[y]=="boolean"?!1:h})},e.observedAttributes=Array.from(new Set([...Object.keys((s=t.$watchers$)!=null?s:{}),...o.filter(([c,p])=>p[0]&15).map(([c,p])=>{var h;const f=p[1]||c;return l.set(f,c),p[0]&512&&((h=t.$attrsToReflect$)==null||h.push([c,f])),f})]))}}return e},Lte=async(e,t,r,i)=>{let s;if(!(t.$flags$&32)){t.$flags$|=32,r.$lazyBundleId$;{s=e.constructor;const o=e.localName;customElements.whenDefined(o).then(()=>t.$flags$|=128)}if(s&&s.style){let o;typeof s.style=="string"?o=s.style:typeof s.style!="string"&&(t.$modeName$=yte(e),t.$modeName$&&(o=s.style[t.$modeName$]));const l=VR(r,t.$modeName$);if(!Gm.has(l)){const c=yl("registerStyles",r.$tagName$);bte(l,o,!!(r.$flags$&1)),c()}}}t.$ancestorComponent$,w2(t,!0)},h3=e=>{},Nte=e=>{if(!(zt.$flags$&1)){const t=El(e),r=t.$cmpMeta$,i=yl("connectedCallback",r.$tagName$);t.$flags$&1?(YR(e,t,r.$listeners$),t!=null&&t.$lazyInstance$?h3(t.$lazyInstance$):t!=null&&t.$onReadyPromise$&&t.$onReadyPromise$.then(()=>h3(t.$lazyInstance$))):(t.$flags$|=1,r.$flags$&12&&Rte(e),r.$members$&&Object.entries(r.$members$).map(([s,[n]])=>{if(n&31&&e.hasOwnProperty(s)){const o=e[s];delete e[s],e[s]=o}}),Lte(e,t,r)),i()}},Rte=e=>{const t=e["s-cr"]=ss.createComment("");t["s-cn"]=!0,ko(e,t,e.firstChild)},jte=async e=>{if(!(zt.$flags$&1)){const t=El(e);t.$rmListeners$&&(t.$rmListeners$.map(r=>r()),t.$rmListeners$=void 0)}},Gde=(e,t)=>{const r={$flags$:t[0],$tagName$:t[1]};r.$members$=t[2],r.$listeners$=t[3],r.$watchers$=e.$watchers$,r.$attrsToReflect$=[];const i=e.prototype.connectedCallback,s=e.prototype.disconnectedCallback;return Object.assign(e.prototype,{__registerHost(){Hee(this,r)},connectedCallback(){const n=El(this);YR(this,n,r.$listeners$),Nte(this),i&&i.call(this)},disconnectedCallback(){jte(this),s&&s.call(this)},__attachShadow(){if(!this.shadowRoot)this.attachShadow({mode:"open",delegatesFocus:!!(r.$flags$&16)});else if(this.shadowRoot.mode!=="open")throw new Error(`Unable to re-use existing shadow root for ${r.$tagName$}! Mode is set to ${this.shadowRoot.mode} but Stencil only supports open shadow roots.`)}}),e.is=r.$tagName$,Pte(e,r)},Bde=(e,t)=>t,YR=(e,t,r,i)=>{r&&r.map(([s,n,o])=>{const l=Vte(e,s),c=Dte(t,o),p=Ute(s);zt.ael(l,n,c,p),(t.$rmListeners$=t.$rmListeners$||[]).push(()=>zt.rel(l,n,c,p))})},Dte=(e,t)=>r=>{var i;try{_i.lazyLoad||e.$hostElement$[t](r)}catch(s){kh(s)}},Vte=(e,t)=>t&4?ss:t&8?Ph:t&16?ss.body:e,Ute=e=>Yee?{passive:(e&1)!==0,capture:(e&2)!==0}:(e&2)!==0;/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const $n=globalThis.calciteConfig,Wde=($n==null?void 0:$n.focusTrapStack)||[];$n!=null&&$n.logLevel;const f3="2.13.2",zte="2024-10-24",qte="e38e2977d";function Gte(){if($n&&$n.version)return;console.info(`Using Calcite Components ${f3} [Date: ${zte}, Revision: ${qte}]`);const e=$n||globalThis.calciteConfig||{};Object.defineProperty(e,"version",{value:f3,writable:!1}),globalThis.calciteConfig=e}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const Bte=()=>typeof navigator<"u"&&typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */function y3(){const{classList:e}=document.body,t=window.matchMedia("(prefers-color-scheme: dark)").matches,r=()=>e.contains(PR)||e.contains(kR)&&t?"dark":"light",i=o=>document.body.dispatchEvent(new CustomEvent("calciteModeChange",{bubbles:!0,detail:{mode:o}})),s=o=>{n!==o&&i(o),n=o};let n=r();i(n),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",o=>s(o.matches?"dark":"light")),new MutationObserver(()=>s(r())).observe(document.body,{attributes:!0,attributeFilter:["class"]})}function Wte(){Bte()&&(document.readyState==="interactive"?y3():document.addEventListener("DOMContentLoaded",()=>y3(),{once:!0})),Gte()}const Hte=Wte;Hte();let QR;function Jte(){try{tte(".")}catch{rte(wi(Ie(QR)))}}function On(e){var r;const t=[];for(const i of Object.keys(e))customElements.get(`calcite-${i}`)||t.push((r=e[i])==null?void 0:r.call(e));return t.length>0?Promise.all(t):null}QR="components/assets";const KR=Symbol("widget"),XR=Symbol("widget-test-data"),Zte=[],Yte={},Zm=new WeakMap;function e5(e,t){let r=t.children;if(r!=null&&r.length)for(let s=0;s<r.length;++s)r[s]=e5(e,r[s]);else r=Zte;const i=t.vnodeSelector;if(Ym(i)){const s=t.properties||Yte,n=s.key||i,o={key:n,afterCreate:Qte,afterUpdate:Kte,afterRemoved:t5,parentWidget:e,widgetConstructor:i,widgetProperties:{...s,key:n,children:r}};return{vnodeSelector:i.vnodeSelector,properties:o,children:void 0,text:void 0,domNode:null}}return t}function Qte(e,t,r,{parentWidget:i,widgetConstructor:s,widgetProperties:n}){var l;const o=new s(n);o.container=e,Zm.set(e,o),(l=o.afterCreate)==null||l.call(o,o,e),i.addHandles(pt(()=>t5(e))),queueMicrotask(()=>{o[XR].projector.renderNow()})}function Kte(e,t,r,{widgetProperties:i}){var n;const s=Zm.get(e);s&&(s.set(i),(n=s.afterUpdate)==null||n.call(s,s,e))}function t5(e){var r;const t=Zm.get(e);t&&((r=t.afterRemoved)==null||r.call(t,t,e),t.destroy(),Zm.delete(e))}function Ym(e){return typeof e=="function"&&e[KR]}const m3=new Set;function Xte(e){m3.add(e),e.finally(()=>m3.delete(e))}var r5;const ere="esri.widgets.Widget";let tre=0;function i5(e,t){const r=Object.prototype.hasOwnProperty;for(const i in t)r.call(t,i)&&r.call(e,i)&&(e[i]!=null&&t[i]!=null&&typeof e[i]=="object"&&typeof t[i]=="object"?i5(e[i],t[i]):e[i]=t[i]);return e}const rre=qee({postProcessProjectionOptions(e){const t=e.eventHandlerInterceptor,r=/capture$/i;e.eventHandlerInterceptor=(i,s,n,o)=>{const l=t==null?void 0:t(i,s,n,o),c=r.test(i);if(!((i=i.replace(r,"")).toLowerCase()in n)||c){const p=i[2].toLowerCase()+i.slice(3),h=m=>l==null?void 0:l.call(n,m);n.addEventListener(p,h,c);const f=()=>n.removeEventListener(p,h,c),y=o.afterRemoved;o.afterRemoved=m=>{y==null||y(m),f()}}return l}},handleInterceptedEvent(e,t,r,i){const{eventPhase:s,type:n}=i,o=s===Event.CAPTURING_PHASE;let l=`on${n}${o?"capture":""}`;const c=t.properties;(c&&l in c||(l=`on${n[0].toUpperCase()}${n.slice(1)}${o?"Capture":""}`,c&&l in c))&&(xR(),e.scheduleRender(),c[l].call(c.bind||r,i))}});let bv=!1,St=class extends fS(ph.EventedAccessor){constructor(t,r){super(t,r),this._attached=!1,this._projector=rre,this._readyForTrueRender=!1,this.key=this,this.autoRenderingEnabled=!0,this._loadLocale=wn(async()=>{var c;if((c=this._messageBundleProps)!=null&&c.length){const p=await Promise.allSettled(this._messageBundleProps.map(async({bundlePath:h,propertyName:f})=>{if(this.destroyed)return;let y=await KO(h);this.uiStrings&&Object.keys(this.uiStrings)&&(y=i5(M(y),this.uiStrings)),this[f]=y}));if(this.destroyed)return;for(const h of p)h.status==="rejected"&&G.getLogger(this).error("widget-intl:locale-error",this.declaredClass,h.reason)}await this.loadLocale()}),Jte();const i="esri-widget-uid-"+QS(),s=this.render.bind(this);this._trackingTarget=new cg(()=>{this.autoRenderingEnabled&&this.scheduleRender()});const n=()=>({vnodeSelector:"div",properties:{key:`${i}-hidden`,class:"",styles:{display:"none"}},domNode:null,children:void 0,text:void 0}),o=()=>{var f,y;if(!this._readyForTrueRender||this.destroyed)return null;const c=s()??n(),p=c.properties??(c.properties={});if(p.key??(p.key=i),Ym(c.vnodeSelector)){if(!this.visible)return n()}else this.visible?p.styles||(p.styles={}):(p.class="",p.styles={display:"none"}),(f=p.styles).display??(f.display="");let h=0;return(y=c.children)==null||y.forEach(m=>{var g;Ym(m.vnodeSelector)||(m.properties??(m.properties={}),(g=m.properties).key??(g.key=`${this.id}--${h++}`))}),e5(this,c)};this.render=()=>{if(bv)return o();let c=_ee(this)??null;if(c)return c;this._trackingTarget.clear(),bv=!0;try{c=Sn(this._trackingTarget,o)}catch(p){throw G.getLogger(this).error(p),p}finally{bv=!1}return c&&$ee(this,c),c};const l=this.beforeFirstRender();l?this._resourcesFetch=l.then(()=>{this._readyForTrueRender=!0,this._postInitialize()}):(this._resourcesFetch=Promise.resolve().then(()=>{this._postInitialize()}),this._readyForTrueRender=!0),this.addResolvingPromise(this._resourcesFetch),Xte(this._resourcesFetch)}normalizeCtorArgs(t,r){const i={...t};return r&&(i.container=r),i}postInitialize(){}beforeFirstRender(){var r;const t=this.loadDependencies();return(r=this._messageBundleProps)!=null&&r.length||t?Promise.all([t,this._loadLocale()]).then(()=>{}).catch(zv):null}loadDependencies(){return null}loadLocale(){return null}destroy(){this.destroyed||(Ps(this._trackingTarget),Ps(this.viewModel),this._detach(this.container),this._set("container",null),this._emitter.clear(),this.render=()=>null,this._projector=null,gv(this))}set container(t){this._get("container")||this._set("container",t)}castContainer(t){return EX(t)}get domNode(){return this.container}set domNode(t){this.container=t}get icon(){return null}set icon(t){this._overrideIfSome("icon",t)}get id(){var t;return this._get("id")||((t=this.container)==null?void 0:t.id)||Date.now().toString(16)+"-widget-"+tre++}set id(t){t&&this._set("id",t)}get label(){return this.declaredClass.split(".").pop()}set label(t){this._overrideIfSome("label",t)}get renderable(){return this._resourcesFetch}get visible(){return this._get("visible")}set visible(t){this._set("visible",t)}get[(r5=KR,XR)](){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(gv(this),this._projector.scheduleRender())}own(t){xA(G.getLogger(this),"`Widget.own()` is deprecated in favor of 'Widget.addHandles()'",{replacement:"Widget.addHandles()",version:"4.28"}),this.addHandles(t)}classes(...t){return IR.apply(this,t)}renderNow(){gv(this),this._projector.renderNow()}_postInitialize(){var r;if(this.destroyed)return;this.scheduleRender(),(r=this._delegatedEventNames)!=null&&r.length&&this.addHandles(W(()=>this.viewModel,(i,s)=>{s&&this.removeHandles("delegated-events"),i&&lg(i)&&this.addHandles(this._delegatedEventNames.map(n=>ug(i,n,o=>{this.emit(n,o)})),"delegated-events")},IP)),this.postInitialize();const t=async()=>{await this._loadLocale().catch(zv),this.scheduleRender()};this.addHandles([ED(t),W(()=>this.uiStrings,t),Oo(()=>this.container,i=>{this.destroyed||this._attach(i)},{initial:!0,once:!0})])}_attach(t){t&&(this._projector.merge(t,this.render),this._attached=!0)}_detach(t){var r;this._attached&&(this._projector.detach(this.render),this._attached=!1),(r=t==null?void 0:t.parentNode)==null||r.removeChild(t)}};St[r5]=!0,St.vnodeSelector="div",a([u()],St.prototype,"_readyForTrueRender",void 0),a([u({value:null})],St.prototype,"container",null),a([Ce("container")],St.prototype,"castContainer",null),a([u()],St.prototype,"icon",null),a([u()],St.prototype,"id",null),a([u()],St.prototype,"label",null),a([u()],St.prototype,"renderable",null),a([u()],St.prototype,"uiStrings",void 0),a([u()],St.prototype,"viewModel",void 0),a([u({value:!0})],St.prototype,"visible",null),a([u()],St.prototype,"key",void 0),a([u()],St.prototype,"children",void 0),a([u()],St.prototype,"afterCreate",void 0),a([u()],St.prototype,"afterUpdate",void 0),a([u()],St.prototype,"afterRemoved",void 0),St=a([_(ere)],St);const _r=St;var Qm;(function(e){e[e.KILOBYTES=1024]="KILOBYTES",e[e.MEGABYTES=1048576]="MEGABYTES",e[e.GIGABYTES=1073741824]="GIGABYTES"})(Qm||(Qm={}));function ire(e,t){return{type:nc(t),value:e,unit:t}}function sre(e,t){return{type:nc(t),value:e,unit:t}}function _2(e,t,r="arithmetic"){return{type:nc(t),value:e,unit:t,rotationType:r}}ire(0,"meters");sre(0,"square-meters");_2(0,"radians");_2(0,"degrees");_2(0,"degrees","geographic");const g3=["B","kB","MB","GB","TB"];function nre(e,t){let r=(t=Math.round(t))===0?0:Math.floor(Math.log(t)/Math.log(Qm.KILOBYTES));r=_l(r,0,g3.length-1);const i=br(t/Qm.KILOBYTES**r,{maximumFractionDigits:2});return ns(e.units.bytes[g3[r]],{fileSize:i})}function ore(e){const{exifInfo:t,exifName:r,tagName:i}=e;if(!t||!r||!i)return null;const s=t.find(n=>n.name===r);return s?are({tagName:i,tags:s.tags}):null}function are(e){const{tagName:t,tags:r}=e;if(!r||!t)return null;const i=r.find(s=>s.name===t);return(i==null?void 0:i.value)||null}var B_;const lre={1:{id:1,rotation:0,mirrored:!1},2:{id:2,rotation:0,mirrored:!0},3:{id:3,rotation:180,mirrored:!1},4:{id:4,rotation:180,mirrored:!0},5:{id:5,rotation:-90,mirrored:!0},6:{id:6,rotation:90,mirrored:!1},7:{id:7,rotation:90,mirrored:!0},8:{id:8,rotation:-90,mirrored:!1}};let Er=B_=class extends R{constructor(e){super(e),this.contentType=null,this.exifInfo=null,this.id=null,this.globalId=null,this.keywords=null,this.name=null,this.parentGlobalId=null,this.parentObjectId=null,this.size=null,this.url=null}get orientationInfo(){const{exifInfo:e}=this,t=ore({exifName:"Exif IFD0",tagName:"Orientation",exifInfo:e});return lre[t]||null}clone(){return new B_({contentType:this.contentType,exifInfo:this.exifInfo,id:this.id,globalId:this.globalId,keywords:this.keywords,name:this.name,parentGlobalId:this.parentGlobalId,parentObjectId:this.parentObjectId,size:this.size,url:this.url})}};a([u({type:String})],Er.prototype,"contentType",void 0),a([u()],Er.prototype,"exifInfo",void 0),a([u({readOnly:!0})],Er.prototype,"orientationInfo",null),a([u({type:je})],Er.prototype,"id",void 0),a([u({type:String})],Er.prototype,"globalId",void 0),a([u({type:String})],Er.prototype,"keywords",void 0),a([u({type:String})],Er.prototype,"name",void 0),a([u({json:{read:!1}})],Er.prototype,"parentGlobalId",void 0),a([u({json:{read:!1}})],Er.prototype,"parentObjectId",void 0),a([u({type:je})],Er.prototype,"size",void 0),a([u({json:{read:!1}})],Er.prototype,"url",void 0),Er=B_=a([_("esri.rest.query.support.AttachmentInfo")],Er);const ure=Er;async function cre(e,t){return await e.load(),dre(e,t)}async function dre(e,t){const r=[],i=(...n)=>{for(const o of n)o!=null&&(Array.isArray(o)?i(...o):ne.isCollection(o)?o.forEach(l=>i(l)):Pc.isLoadable(o)&&r.push(o))};t(i);let s=null;if(await zq(r,async n=>{const o=await SS(pre(n)?n.loadAll():n.load());o.ok!==!1||s||(s=o)}),s)throw s.error;return e}function pre(e){return"loadAll"in e&&typeof e.loadAll=="function"}async function hre(e){if(!e)return;const t=e.includes("-vector")?e.slice(0,e.indexOf("-vector")):e.includes("-3d")?e.slice(0,e.indexOf("-3d")):e,r=await KO("esri/t9n/basemaps");return r[e]||r[t]}const fre={satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return Ie("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return Ie("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return Ie("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return Ie("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return Ie("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return Ie("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get"dark-gray"(){return{...this["dark-gray-vector"],id:"dark-gray"}},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return Ie("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get gray(){return{...this["gray-vector"],id:"gray"}},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return Ie("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},get streets(){return{...this["streets-vector"],id:"streets"}},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return Ie("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},get topo(){return{...this["topo-vector"],id:"topo"}},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return Ie("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return Ie("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return Ie("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"topo-3d":{id:"topo-3d",is3d:!0,get thumbnailUrl(){return Ie("esri/images/basemap/topo-3d.png")},baseMapLayers:[{id:"topo-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/1e7d1784d1ef4b79ba6764d0bd6c3150/resources/styles/root.json",layerType:"VectorTileLayer",title:"Topographic",visibility:!0,opacity:1},{id:"topo-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-3d":{id:"navigation-3d",is3d:!0,get thumbnailUrl(){return Ie("esri/images/basemap/navigation-3d.jpg")},baseMapLayers:[{id:"navigation-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/ccc904ff872b4144b94934e55e32784b/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation",visibility:!0,opacity:1},{id:"navigation-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-3d":{id:"streets-3d",is3d:!0,get thumbnailUrl(){return Ie("esri/images/basemap/streets-3d.png")},baseMapLayers:[{id:"streets-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/198298c4c64c4cb19de5b46aa00c198d/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"streets-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"streets-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"osm-3d":{id:"osm-3d",is3d:!0,get thumbnailUrl(){return Ie("esri/images/basemap/osm-3d.png")},baseMapLayers:[{id:"osm-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/8628d259c9d14bdc848771c23c513940/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap",visibility:!0,opacity:1},{id:"osm-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"gray-3d":{id:"gray-3d",is3d:!0,get thumbnailUrl(){return Ie("esri/images/basemap/gray-3d.png")},baseMapLayers:[{id:"gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/01a14b466345455ba4176d2e6390db92/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-dark-3d":{id:"navigation-dark-3d",itemId:"5a1365328b4943f09a54cf5fd1205707",is3d:!0,baseMapLayers:[{id:"navigation-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/451a1777ab3f4bf095fae24a117439d9/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation Dark"},{id:"navigation-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-dark-3d":{id:"streets-dark-3d",itemId:"8a4efa2c20484ec9b4557895e65736ff",is3d:!0,baseMapLayers:[{id:"streets-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/bc599b6d741a4ac084b7eea7bf8c5938/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Streets Night (for 3D)"},{id:"streets-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"streets-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"dark-gray-3d":{id:"dark-gray-3d",itemId:"a8b7322a5fe94002bb0f5e0eeb0c5c18",is3d:!0,baseMapLayers:[{id:"dark-gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/4178f71acb934fb89f169e7d667c20c6/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Dark Gray Canvas (for 3D)"},{id:"dark-gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"dark-gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"arcgis-imagery":{get thumbnailUrl(){return Ie("esri/images/basemap/hybrid.jpg")},title:"Imagery Hybrid",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-imagery-standard":{get thumbnailUrl(){return Ie("esri/images/basemap/satellite.jpg")},title:"Imagery",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}]},"arcgis-imagery-labels":{title:"Hybrid [Reference]",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-light-gray":{get thumbnailUrl(){return Ie("esri/images/basemap/gray-vector.jpg")},title:"Light Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Base",title:"Light Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Labels",title:"Light Gray Canvas Labels",isReference:!0}]},"arcgis-dark-gray":{get thumbnailUrl(){return Ie("esri/images/basemap/dark-gray.jpg")},title:"Dark Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Base",title:"Dark Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Labels",title:"Dark Gray Canvas Labels",isReference:!0}]},"arcgis-navigation":{get thumbnailUrl(){return Ie("esri/images/basemap/streets-navigation.jpg")},title:"Navigation",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Navigation",title:"World Navigation Map"}]},"arcgis-navigation-night":{title:"Navigation (Dark Mode)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:NavigationNight",title:"World Navigation Map (Dark Mode)"}]},"arcgis-streets":{get thumbnailUrl(){return Ie("esri/images/basemap/streets-vector.jpg")},title:"Streets",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Streets",title:"World Street Map"}]},"arcgis-streets-night":{get thumbnailUrl(){return Ie("esri/images/basemap/streets-night.jpg")},title:"Streets (Night)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsNight",title:"World Street Map (Night)"}]},"arcgis-streets-relief":{get thumbnailUrl(){return Ie("esri/images/basemap/streets-relief.jpg")},title:"Streets (with Relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsRelief:Base",title:"World Street Map (with Relief)"}]},"arcgis-topographic":{get thumbnailUrl(){return Ie("esri/images/basemap/topo.jpg")},title:"Topographic",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Topographic:Base",title:"World Topographic Map"}]},"arcgis-oceans":{get thumbnailUrl(){return Ie("esri/images/basemap/oceans.jpg")},title:"Oceans",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Ocean Base",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Oceans:Labels",title:"World Ocean Reference",isReference:!0}]},"osm-standard":{title:"OpenStreetMap",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Standard",title:"OpenStreetMap"}]},"osm-standard-relief":{title:"OpenStreetMap (with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StandardRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-streets":{title:"OpenStreetMap (Streets)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Streets",title:"OpenStreetMap (Streets)"}]},"osm-streets-relief":{title:"OpenStreetMap (Streets with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StreetsRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-light-gray":{title:"OpenStreetMap (Light Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Base",title:"OSM (Light Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Labels",title:"OSM (Light Gray Reference)",isReference:!0}]},"osm-dark-gray":{title:"OpenStreetMap (Dark Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Base",title:"OSM (Dark Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Labels",title:"OSM (Dark Gray Reference)",isReference:!0}]},"arcgis-terrain":{title:"Terrain with Labels",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Base",title:"World Terrain Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Detail",title:"World Terrain Reference",isReference:!0}]},"arcgis-community":{title:"Community",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Community",title:"Community"}]},"arcgis-charted-territory":{title:"Charted Territory",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ChartedTerritory:Base",title:"Charted Territory"}]},"arcgis-colored-pencil":{title:"Colored Pencil",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ColoredPencil",title:"Colored Pencil"}]},"arcgis-nova":{title:"Nova",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Nova",title:"Nova"}]},"arcgis-modern-antique":{title:"Modern Antique",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ModernAntique:Base",title:"Modern Antique"}]},"arcgis-midcentury":{title:"Mid-Century",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Midcentury",title:"Mid-Century"}]},"arcgis-newspaper":{title:"Newspaper",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Newspaper",title:"Newspaper"}]},"arcgis-hillshade-light":{title:"Hillshade",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}]},"arcgis-hillshade-dark":{title:"Hillshade (Dark)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade (Dark)",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade_Dark/MapServer"}]},"arcgis-human-geography":{title:"Human Geography",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Base",title:"Human Geography Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Detail",title:"Human Geography Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Label",title:"Human Geography Label",isReference:!0}]},"arcgis-human-geography-dark":{title:"Human Geography (Dark)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Base",title:"Human Geography Dark Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Detail",title:"Human Geography Dark Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Label",title:"Human Geography Dark Label",isReference:!0}]}},yre=new Set(["ar","bs","ca","hr","cs","da","nl","en","et","fi","fr","de","el","he","hu","id","it","ja","ko","lv","lt","nb","pl","ro","ru","sr","es","sv","th","tr","uk","vi"]);let an=class extends $e{constructor(t){super(t),this.apiKey=null,this.id=null,this.language=null,this.places=null,this.serviceUrl="https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2/webmaps",this.worldview=null}getLanguageParamValue(){if(this.language)return this.language;const t=Nr().toLowerCase();switch(t){case"pt-br":return"pt-BR";case"pt-pt":return"pt-PT";case"zh-cn":return"zh-CN";case"zh-hk":return"zh-HK";case"zh-tw":return"zh-TW"}const r=MD(t);return r==="pt"?"pt-BR":r&&yre.has(r)?r:"global"}};a([u()],an.prototype,"apiKey",void 0),a([u()],an.prototype,"id",void 0),a([u()],an.prototype,"language",void 0),a([u()],an.prototype,"places",void 0),a([u()],an.prototype,"serviceUrl",void 0),a([u()],an.prototype,"worldview",void 0),an=a([_("esri.support.BasemapStyle")],an);const mre=an,gre=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wms","wmts"]),vre=new Set(["catalog","csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","knowledge-graph","map-image","map-notes","media","ogc-feature","oriented-imagery","route","stream","subtype-group","tile","unknown","unsupported","vector-tile","web-tile","wfs","wms","wmts"]);function bre(e){return e.layerContainerType==="basemap"?gre:e.layerContainerType==="operational-layers"?vre:null}function wre(e,t){if(t.restrictedWebMapWriting){const r=bre(t);return r==null||r.has(e.type)&&!Vg(e)}return!0}function _re(e,t){var r;if(t)if(Vg(e)){const i=sh("featureCollection.layers",t),s=(r=i==null?void 0:i[0])==null?void 0:r.layerDefinition;s&&v3(e,s)}else e.type!=="group"&&v3(e,t)}function v3(e,t){"maxScale"in e&&(t.maxScale=cm(e.maxScale)??void 0),"minScale"in e&&(t.minScale=cm(e.minScale)??void 0)}function $re(e,t){if(_re(e,t),t&&(t.id=e.id,"blendMode"in e&&(t.blendMode=e.blendMode,t.blendMode==="normal"&&delete t.blendMode),t.opacity=cm(e.opacity)??void 0,t.title=e.title||"Layer",t.visibility=e.visible,"legendEnabled"in e&&e.type!=="wmts"))if(Vg(e)){const r=t.featureCollection;r&&(r.showLegend=e.legendEnabled)}else t.showLegend=e.legendEnabled}function b3(e,t,r){if(!e.persistenceEnabled)return null;if(!("write"in e)||!e.write)return r!=null&&r.messages&&r.messages.push(new O("layer:unsupported",`Layers (${e.title}, ${e.id}) of type '${e.declaredClass}' cannot be persisted`,{layer:e})),null;if(Vg(e)&&!e.isTable)t=e.resourceInfo;else if(wre(e,r)){const i={};return e.write(i,r)?i:null}return t!=null&&$re(e,t=M(t)),t}var rp;let Sre=0,Jr=rp=class extends hg(Pc){constructor(e){super(e),this.id=null,this.portalItem=null,this.spatialReference=null,this.style=null,this.thumbnailUrl=null,this.title="Basemap",this.id=Date.now().toString(16)+"-basemap-"+Sre++,this.baseLayers=new ne,this.referenceLayers=new ne;const t=i=>{i.parent&&i.parent!==this&&"remove"in i.parent&&i.parent.remove(i),i.parent=this,i.type==="elevation"&&G.getLogger(this).error(`Layer '${i.title}, id:${i.id}' of type '${i.type}' is not supported as a basemap layer and will therefore be ignored.`)},r=i=>{i.parent=null};this.addHandles([this.baseLayers.on("after-add",i=>t(i.item)),this.referenceLayers.on("after-add",i=>t(i.item)),this.baseLayers.on("after-remove",i=>r(i.item)),this.referenceLayers.on("after-remove",i=>r(i.item))])}initialize(){this.when().catch(e=>{G.getLogger(this).error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.baseLayers.toArray();for(const r of e)r.destroy();const t=this.referenceLayers.toArray();for(const r of t)r.destroy();this.baseLayers.destroy(),this.referenceLayers.destroy(),this.portalItem=Ps(this.portalItem)}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set baseLayers(e){this._set("baseLayers",b1(e,this._get("baseLayers")))}_writeBaseLayers(e,t,r){const i=[];e&&(r={...r,layerContainerType:"basemap"},this.baseLayers.forEach(s=>{const n=b3(s,r.webmap?r.webmap.getLayerJSONFromResourceInfo(s):null,r);n!=null&&i.push(n)}),this.referenceLayers.forEach(s=>{const n=b3(s,r.webmap?r.webmap.getLayerJSONFromResourceInfo(s):null,r);n!=null&&(s.type!=="scene"&&(n.isReference=!0),i.push(n))})),t.baseMapLayers=i}set referenceLayers(e){this._set("referenceLayers",b1(e,this._get("referenceLayers")))}writeTitle(e,t){t.title=e||"Basemap"}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return cre(this,e=>{e(this.baseLayers,this.referenceLayers)})}clone(){const e={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.map(t=>Yy(t)?t.clone():t),referenceLayers:this.referenceLayers.map(t=>Yy(t)?t.clone():t)};return this.loaded&&(e.loadStatus="loaded"),new rp({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}write(e,t){var r;return e=e||{},t!=null&&t.origin||(t={origin:"web-map",...t}),super.write(e,t),!this.loaded&&((r=this.resourceInfo)!=null&&r.data.baseMapLayers)&&(e.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(i=>{const s=M(i);return s.url&&Ds(s.url)&&(s.url=`https:${s.url}`),s.templateUrl&&Ds(s.templateUrl)&&(s.templateUrl=`https:${s.templateUrl}`),s})),e}async _loadFromSource(e){const{resourceInfo:t,portalItem:r,style:i}=this;si(e);const s=[];if(t){const n=t.context?t.context.url:null;if(s.push(this._loadLayersFromJSON(t.data,n,e)),t.data.id&&!t.data.title){const o=t.data.id;s.push(hre(o).then(l=>{l&&this.read({title:l},t.context)}))}}else r?s.push(this._loadFromItem(r,e)):i&&s.push(this._loadFromStylesService(i,e));await Promise.all(s)}async _loadLayersFromJSON(e,t,r){var c,p;const i=(c=this.resourceInfo)==null?void 0:c.context,s=((p=this.portalItem)==null?void 0:p.portal)||(i==null?void 0:i.portal)||null,n=Ire[(i==null?void 0:i.origin)||""]??"web-map",{populateOperationalLayers:o}=await j(async()=>{const{populateOperationalLayers:h}=await import("./layersCreator-tA0kWKQ8.js");return{populateOperationalLayers:h}},__vite__mapDeps([117,13,14,15])),l=[];if(si(r),e.baseMapLayers&&Array.isArray(e.baseMapLayers)){const h={context:{...i,origin:n,url:t,portal:s,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},f=g=>n==="web-scene"&&g.layerType==="ArcGISSceneServiceLayer"||g.isReference,y=o(this.baseLayers,e.baseMapLayers.filter(g=>!f(g)),h);l.push(y);const m=o(this.referenceLayers,e.baseMapLayers.filter(f),h);l.push(m)}await Promise.allSettled(l)}async _loadFromItem(e,t){const r=await e.load(t),i=await r.fetchData("json",t),s=Yt(e.itemUrl??"");return this._set("resourceInfo",{data:i.baseMap??{},context:{origin:xre[e.type||""]??"web-map",portal:e.portal||Vr.getDefault(),url:s}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:i.spatialReference},this.resourceInfo.context),this.read({title:e.title,thumbnailUrl:e.thumbnailUrl},{origin:"portal-item",portal:e.portal||Vr.getDefault(),url:s}),this._loadLayersFromJSON(this.resourceInfo.data,s,t)}async _loadFromStylesService(e,t){const r=`${e.serviceUrl}/${e.id}`,i=(await Ge(r,{query:{language:e.getLanguageParamValue(),places:e.places,worldview:e.worldview,token:e.apiKey},signal:t==null?void 0:t.signal})).data,s=Yt(r);if(this._set("resourceInfo",{data:i.baseMap??{},context:{origin:"web-map",url:s}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:i.spatialReference},this.resourceInfo.context),await this._loadLayersFromJSON(this.resourceInfo.data,s,t),e.apiKey)for(const n of[...this.baseLayers,...this.referenceLayers])"apiKey"in n&&(n.apiKey=e.apiKey)}static fromId(e){const t=fre[e];return t?t.itemId?new rp({portalItem:{id:t.itemId,portal:{url:"https://www.arcgis.com"}}}):rp.fromJSON(t,{origin:t.is3d?"web-scene":"web-map"}):null}};a([u({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(e,t,r,i){this._writeBaseLayers(e,t,i)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:ne}},writer(e,t,r,i){this._writeBaseLayers(e,t,i)}}}}}})],Jr.prototype,"baseLayers",null),a([u({type:String,json:{origins:{"web-scene":{write:!0}}}})],Jr.prototype,"id",void 0),a([u({type:Sp})],Jr.prototype,"portalItem",void 0),a([u()],Jr.prototype,"referenceLayers",null),a([u({readOnly:!0})],Jr.prototype,"resourceInfo",void 0),a([u({type:ge})],Jr.prototype,"spatialReference",void 0),a([u({type:mre})],Jr.prototype,"style",void 0),a([u()],Jr.prototype,"thumbnailUrl",void 0),a([u({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],Jr.prototype,"title",void 0),a([B("title")],Jr.prototype,"writeTitle",null),Jr=rp=a([_("esri.Basemap")],Jr);const xre={"Web Scene":"web-scene","Web Map":"web-map","Link Chart":"link-chart"},Ire={"web-scene":"web-scene","web-map":"web-map","link-chart":"link-chart"},Tre=Jr,Mre=Object.freeze(Object.defineProperty({__proto__:null,default:Tre},Symbol.toStringTag,{value:"Module"}));function Ere(e){return $k(e)||pz(e)||hz(e)}function s5(e,t){const{format:r,timeZoneOptions:i,fieldType:s}=t??{};let n,o;if(i&&({timeZone:n,timeZoneName:o}=BO(i.layerTimeZone,i.datesInUnknownTimezone,i.viewTimeZone,La(r||"short-date-short-time"),s)),typeof e=="string"&&isNaN(Date.parse(s==="time-only"?`1970-01-01T${e}Z`:e)))return e;switch(s){case"date-only":{const l=La(r||"short-date");return typeof e=="string"?U8(e,{...l}):Xr(e,{...l,timeZone:js})}case"time-only":{const l=La(r||"short-time");return typeof e=="string"?z8(e,l):Xr(e,{...l,timeZone:js})}case"timestamp-offset":{if(!n&&typeof e=="string"&&new Date(e).toISOString()!==e)return e;const l=r||i?La(r||"short-date-short-time"):void 0,c=l?{...l,timeZone:n,timeZoneName:o}:void 0;return typeof e=="string"?q8(e,c):Xr(e,c)}default:{const l=r||i?La(r||"short-date-short-time"):void 0;return Xr(typeof e=="string"?new Date(e):e,l?{...l,timeZone:n,timeZoneName:o}:void 0)}}}const Are="esri.widgets.Feature.support.featureUtils",W_=()=>G.getLogger(Are),Cre=/href=(""|'')/gi,Ore=/(\{([^{\r\n]+)\})/g,Fre=/'/g,n5=/^\s*expression\//i,kre=/(\n)/gi,Pre=/[\u00A0-\u9999<>&]/gim,Lre=/href\s*=\s*(?:"([^"]+)"|'([^']+)')/gi,Nre=/^(?:mailto:|tel:)/,o5="relationships/",w3=La("short-date-short-time");function a5(e){if(e!=null)return(e.sourceLayer||e.layer)??void 0}async function Km({type:e,value:t,event:r}){try{return typeof t=="function"?t(r):await t}catch(i){return void W_().error("error",`An error occurred when calling the "${e}" function`,{error:i,graphic:r.graphic,value:t})}}function l5(e=""){if(e)return!Nre.test(e.trim().toLowerCase())}function $2(e){return!!e&&n5.test(e)}function Rre(e,t){if(!t||!$2(t)||!e)return;const r=t.replace(n5,"").toLowerCase();return e.find(({name:i})=>i.toLowerCase()===r)}function u5(e,t){const r=Rre(t,e==null?void 0:e.fieldName);return r?r.title||null:e?e.label||e.fieldName:null}function jre(e,t){const r=t.get(e.toLowerCase());return`{${(r==null?void 0:r.fieldName)||e}}`}function Dre(e){return e.replaceAll(Cre,"")}function th(e,t){const r=S2(t,e);return r?r.name:e}function Vre(e,t){return e&&e.map(r=>th(r,t))}function S2(e,t){return e&&typeof e.getField=="function"&&t?e.getField(t)??null:null}function c5(e){return`${e}`.trim()}function Ba({attributes:e,globalAttributes:t,layer:r,text:i,expressionAttributes:s,fieldInfoMap:n}){return i?H_({formattedAttributes:t,template:Gre(i,{...t,...s,...e},r),fieldInfoMap:n}):""}function H_({formattedAttributes:e,template:t,fieldInfoMap:r}){return c5(Dre(ns(ns(t,i=>jre(i,r)),e)))}function Ure(e,t,r=!1){const i=t[e];if(typeof i=="string"){const s="%27",n=(r?encodeURIComponent(i):i).replaceAll(Fre,s);t[e]=n}}function zre(e,t=!1){const r={...e};return Object.keys(r).forEach(i=>Ure(i,r,t)),r}function qre(e,t,r){const i=(t=c5(t))&&t[0]!=="{";return ns(e,zre(r,i||!1))}function J_(e,t){return e.replaceAll(Ore,(r,i,s)=>{const n=S2(t,s);return n?`{${n.name}}`:i})}function Gre(e,t,r){const i=J_(e,r);return i&&i.replaceAll(Lre,(s,n,o)=>qre(s,n||o,t))}function Bre(e,t){if(typeof e=="string"&&t&&t.dateFormat==null&&(t.places!=null||t.digitSeparator!=null)){const r=Number(e);if(!isNaN(r))return r}return e}function d5(e){return e!=null&&typeof e=="object"&&"fieldsIndex"in e&&"geometryType"in e&&"getField"in e&&"load"in e&&"loaded"in e&&"objectIdField"in e&&"spatialReference"in e&&"type"in e&&(e.type==="feature"||e.type==="scene"||e.type==="subtype-sublayer"||e.type==="sublayer")&&"when"in e}function Wre(e){return e!=null&&typeof e=="object"&&"createQuery"in e&&"queryFeatureCount"in e&&"queryObjectIds"in e&&"queryRelatedFeatures"in e&&"queryRelatedFeaturesCount"in e&&"relationships"in e}function Hre(e){return!!(e&&typeof e=="object"&&"createQuery"in e&&"queryFeatureCount"in e&&"type"in e)&&(e.type==="subtype-sublayer"&&"parent"in e&&e.parent&&typeof e.parent=="object"?"globalIdField"in e.parent:"globalIdField"in e)}function p5(e){return d5(e)&&Wre(e)}function Jre(e){return d5(e)&&Hre(e)}function Zre(e,t){var h;const{fieldInfos:r,fieldName:i,preventPlacesFormatting:s,layer:n,timeZone:o}=t,l=h5(r,i),c=S2(n,i);if(l&&!Ab(i)){const f=c==null?void 0:c.type,y=(h=l.format)==null?void 0:h.dateFormat;if(f==="date"||f==="date-only"||f==="time-only"||f==="timestamp-offset"||y)return s5(e,{format:y,fieldType:f,timeZoneOptions:{layerTimeZone:n&&"preferredTimeZone"in n?n.preferredTimeZone:null,viewTimeZone:o,datesInUnknownTimezone:!(!n||!("datesInUnknownTimezone"in n))&&!!n.datesInUnknownTimezone}})}const p=l==null?void 0:l.format;return typeof e=="string"&&Ab(i)&&p?Yre(e,p):typeof(e=Bre(e,p))=="string"||e==null||p==null?Lh(e):br(e,s?{...Np(p),minimumFractionDigits:0,maximumFractionDigits:20}:Np(p))}function Yre(e,t){return e=e.trim(),/\d{2}-\d{2}/.test(e)?e:e.includes(",")?wv(e,",",", ",t):e.includes(";")?wv(e,";","; ",t):e.includes(" ")?wv(e," "," ",t):br(Number(e),Np(t))}function wv(e,t,r,i){return e.trim().split(t).map(s=>br(Number(s),Np(i))).join(r)}function h5(e,t){if(e!=null&&e.length&&t)return e.find(r=>{var i;return((i=r.fieldName)==null?void 0:i.toLowerCase())===t.toLowerCase()})}function Qre({fieldName:e,graphic:t,layer:r}){if(vn(e)||!r||typeof r.getFeatureType!="function")return null;const{typeIdField:i}=r;if(!i||e!==i)return null;const s=r.getFeatureType(t);return s?s.name:null}function Kre({fieldName:e,value:t,graphic:r,layer:i}){if(vn(e)||!i||typeof i.getFieldDomain!="function")return null;const s=r&&i.getFieldDomain(e,{feature:r,excludeImpliedDomains:k("esri-widget-legacy-field-domain-calculation")});return s&&s.type==="coded-value"?s.getName(t):null}function Xre(e,t,r,i){const{creatorField:s,creationDateField:n,editorField:o,editDateField:l}=e;if(!t)return;const c=BO(i&&"preferredTimeZone"in i?i.preferredTimeZone:null,!(!i||!("datesInUnknownTimezone"in i))&&!!i.datesInUnknownTimezone,r,w3,"date"),p={...w3,...c},h=t[l];if(typeof h=="number"){const y=t[o];return{type:"edit",date:Xr(h,p),user:y}}const f=t[n];if(typeof f=="number"){const y=t[s];return{type:"create",date:Xr(f,p),user:y}}return null}function eie(e,t){const r=new Map;if(!e)return r;for(const i of e){if(!i.fieldName)continue;const s=th(i.fieldName,t);i.fieldName=s,r.set(s.toLowerCase(),i)}return r}function _3(e){const t=[];if(!e)return t;const{fieldInfos:r,content:i}=e;return r&&t.push(...r),i&&Array.isArray(i)&&i.forEach(s=>{if(s.type==="fields"){const n=s==null?void 0:s.fieldInfos;n&&t.push(...n)}}),t}function x2(e){return e.replaceAll(Pre,t=>`&#${t.charCodeAt(0)};`)}function Lh(e){return typeof e=="string"?e.replaceAll(kre,'<br class="esri-text-new-line" />'):e}function f5(e){var f;const{value:t,fieldName:r,fieldInfos:i,fieldInfoMap:s,layer:n,graphic:o,timeZone:l}=e;if(t==null)return"";const c=Kre({fieldName:r,value:t,graphic:o,layer:n});if(c)return c;const p=Qre({fieldName:r,graphic:o,layer:n});if(p)return p;if(s.get(r.toLowerCase()))return Zre(t,{fieldInfos:i||Array.from(s.values()),fieldName:r,layer:n,timeZone:l});const h=(f=n==null?void 0:n.fieldsIndex)==null?void 0:f.get(r);return h&&(Ere(h)||Sk(h))?s5(t,{fieldType:h.type,timeZoneOptions:{layerTimeZone:n&&"preferredTimeZone"in n?n.preferredTimeZone:null,viewTimeZone:l,datesInUnknownTimezone:!(!n||!("datesInUnknownTimezone"in n))&&!!n.datesInUnknownTimezone}}):Lh(t)}function _v({fieldInfos:e,attributes:t,layer:r,graphic:i,fieldInfoMap:s,relatedInfos:n,timeZone:o}){const l={};return n==null||n.forEach(c=>sie({attributes:l,relatedInfo:c,fieldInfoMap:s,fieldInfos:e,layer:r,timeZone:o})),t&&Object.keys(t).forEach(c=>{const p=t[c];l[c]=f5({fieldName:c,fieldInfos:e,fieldInfoMap:s,layer:r,value:p,graphic:i,timeZone:o})}),l}async function y5(e,t){var h,f;const{layer:r,graphic:i,outFields:s,objectIds:n,returnGeometry:o,spatialReference:l}=e,c=n[0];if(typeof c!="number"&&typeof c!="string"){const y="Could not query required fields for the specified feature. The feature's ID is invalid.",m={layer:r,graphic:i,objectId:c,requiredFields:s};return W_().warn(y,m),null}if(!((f=(h=kG(r))==null?void 0:h.operations)!=null&&f.supportsQuery)){const y="The specified layer cannot be queried. The following fields will not be available.",m={layer:r,graphic:i,requiredFields:s,returnGeometry:o};return W_().warn(y,m),null}const p=r.createQuery();return p.objectIds=n,p.outFields=s!=null&&s.length?s:[r.objectIdField],p.returnGeometry=!!o,p.returnZ=!!o,p.returnM=!!o,p.outSpatialReference=l,(await r.queryFeatures(p,t)).features[0]}async function tie(e){var i;if(!((i=e.expressionInfos)!=null&&i.length))return!1;const t=await In(),{arcadeUtils:{hasGeometryFunctions:r}}=t;return r(e)}async function rie({graphic:e,popupTemplate:t,layer:r,spatialReference:i},s){if(!r||!t||(typeof r.load=="function"&&await r.load(s),!e.attributes))return;const n=r.objectIdField,o=e.attributes[n];if(o==null)return;const l=[o],c=await t.getRequiredFields(r.fieldsIndex),p=_z(c,e),h=p?[]:c.includes(n)?c:[...c,n],f=t.returnGeometry||await tie(t);if(p&&!f)return;const y=await y5({layer:r,graphic:e,outFields:h,objectIds:l,returnGeometry:f,spatialReference:i},s);y&&(y.geometry&&(e.geometry=y.geometry),y.attributes&&(e.attributes={...e.attributes,...y.attributes}))}function vn(e=""){return!!e&&e.includes(o5)}function iie(e){return`${o5}${e.layerId}/${e.fieldName}`}function $3({attributes:e,graphic:t,relatedInfo:r,fieldInfos:i,fieldInfoMap:s,layer:n,timeZone:o}){e&&t&&r&&Object.keys(t.attributes).forEach(l=>{const c=iie({layerId:r.relation.id.toString(),fieldName:l}),p=t.attributes[l];e[c]=f5({fieldName:c,fieldInfos:i,fieldInfoMap:s,layer:n,value:p,graphic:t,timeZone:o})})}function sie({attributes:e,relatedInfo:t,fieldInfoMap:r,fieldInfos:i,layer:s,timeZone:n}){var o,l;e&&t&&((o=t.relatedFeatures)==null||o.forEach(c=>$3({attributes:e,graphic:c,relatedInfo:t,fieldInfoMap:r,fieldInfos:i,layer:s,timeZone:n})),(l=t.relatedStatsFeatures)==null||l.forEach(c=>$3({attributes:e,graphic:c,relatedInfo:t,fieldInfoMap:r,fieldInfos:i,layer:s,timeZone:n})))}const S3=e=>{if(!e)return!1;const t=e.toUpperCase();return t.includes("CURRENT_TIMESTAMP")||t.includes("CURRENT_DATE")||t.includes("CURRENT_TIME")},m5=({layer:e,method:t,query:r,definitionExpression:i})=>{var o,l;if(!((l=(o=e.capabilities)==null?void 0:o.query)!=null&&l.supportsCacheHint)||t==="attachments")return;const s=r.where!=null?r.where:null,n=r.geometry!=null?r.geometry:null;S3(i)||S3(s)||(n==null?void 0:n.type)==="extent"||r.resultType==="tile"||(r.cacheHint=!0)},nie=({query:e,layer:t,method:r})=>{m5({layer:t,method:r,query:e,definitionExpression:`${t.definitionExpression} ${t.serviceDefinitionExpression??""}`})},oie=({queryPayload:e,layer:t,method:r})=>{m5({layer:t,method:r,query:e,definitionExpression:`${t.definitionExpression} ${t.serviceDefinitionExpression??""}`})};function aie(e,t,r){var i,s;return e&&t&&r?t.type==="sublayer"?Pu({layers:(i=t.layer)==null?void 0:i.sublayers,map:e,relatedLayer:t,relationship:r})||Pu({layers:(s=t.layer)==null?void 0:s.subtables,map:e,relatedLayer:t,relationship:r}):Pu({layers:e.allLayers,map:e,relatedLayer:t,relationship:r})||Pu({layers:e.allTables,map:e,relatedLayer:t,relationship:r}):null}function x3(e,t){var r;return e&&"utilityNetworks"in e&&t?(r=e.utilityNetworks)==null?void 0:r.find(i=>i.isUtilityLayer(t)):null}function I3(e,t){return e==null?void 0:e.allTables.find(r=>{var i;return r.type==="feature"&&r.layerId===t.id&&r.url===((i=t.layer)==null?void 0:i.url)})}function Pu({map:e,relationship:t,relationship:{relatedTableId:r},relatedLayer:i,layers:s}){var n;if(!s)return null;for(const o of s){if(o.type==="map-image"){const c=Pu({layers:o.sublayers,map:e,relatedLayer:i,relationship:t})||Pu({layers:o.subtables,map:e,relatedLayer:i,relationship:t});if(c)return c;continue}if(!p5(o))continue;if(i.type==="sublayer"){if(o!==i&&o.id===r)return o.isTable?I3(e,o):o;continue}const l=i.type==="scene"&&i.associatedLayer?i.associatedLayer.url:i.url;if(!l)return null;if(o.type!=="sublayer"){if(o!==i&&o.url===l&&o.layerId===r)return o}else if(o!==i&&((n=o.layer)==null?void 0:n.url)===l&&o.id===r)return o.isTable?I3(e,o):o}return null}const T3={editing:!1,operations:{add:!0,update:!0,delete:!0}},g5=ne.ofType(ure);let Ar=class extends $e{constructor(t){super(t),this._getAttachmentsPromise=null,this._attachmentLayer=null,this.capabilities={...T3},this.activeAttachmentInfo=null,this.activeFileInfo=null,this.attachmentInfos=new g5,this.fileInfos=new ne,this.graphic=null,this.mode="view",this.filesEnabled=!1,this.addHandles(W(()=>this.graphic,()=>this._graphicChanged(),Ae))}destroy(){this._attachmentLayer=null,this.graphic=null}castCapabilities(t){return{...T3,...t}}get state(){return this._getAttachmentsPromise?"loading":this.graphic?"ready":"disabled"}get supportsResizeAttachments(){const{graphic:t}=this;if(!t)return!1;const r=t.layer||t.sourceLayer;return(r==null?void 0:r.loaded)&&"capabilities"in r&&r.capabilities&&"operations"in r.capabilities&&"supportsResizeAttachments"in r.capabilities.operations&&r.capabilities.operations.supportsResizeAttachments||!1}async getAttachments(){const{_attachmentLayer:t,attachmentInfos:r}=this;if(!t||typeof t.queryAttachments!="function")throw new O("invalid-layer","getAttachments(): A valid layer is required.");const i=this._getObjectId();if(typeof i!="number")throw new O("invalid-object-id","getAttachments(): Numeric object id is required");const s=new b_({objectIds:[i],returnMetadata:!0}),n=[],o=t.queryAttachments(s).then(c=>c[i]||n).catch(()=>n);this._getAttachmentsPromise=o,this.notifyChange("state");const l=await o;return r.destroyAll(),l.length&&r.addMany(l),this._getAttachmentsPromise=null,this.notifyChange("state"),l}async addAttachment(t,r=this.graphic){var c;const{_attachmentLayer:i,attachmentInfos:s,capabilities:n}=this;if(!r)throw new O("invalid-graphic","addAttachment(): A valid graphic is required.",{graphic:r});if(!t)throw new O("invalid-attachment","addAttachment(): An attachment is required.",{attachment:t});if(!((c=n.operations)!=null&&c.add))throw new O("invalid-capabilities","addAttachment(): add capabilities are required.");if(!i||typeof i.addAttachment!="function")throw new O("invalid-layer","addAttachment(): A valid layer is required.");const o=i.addAttachment(r,t).then(p=>this._queryAttachment(p.objectId,r)),l=await o;return s.add(l),l}async deleteAttachment(t){var c;const{_attachmentLayer:r,attachmentInfos:i,graphic:s,capabilities:n}=this;if(!t)throw new O("invalid-attachment-info","deleteAttachment(): An attachmentInfo is required.",{attachmentInfo:t});if(!((c=n.operations)!=null&&c.delete))throw new O("invalid-capabilities","deleteAttachment(): delete capabilities are required.");if(!r||typeof r.deleteAttachments!="function")throw new O("invalid-layer","deleteAttachment(): A valid layer is required.");if(!s)throw new O("invalid-graphic","deleteAttachment(): A graphic is required.");const o=r.deleteAttachments(s,[t.id]).then(()=>t),l=await o;return i.remove(l),l.destroy(),l}async updateAttachment(t,r=this.activeAttachmentInfo){var h;const{_attachmentLayer:i,attachmentInfos:s,graphic:n,capabilities:o}=this;if(!t)throw new O("invalid-attachment","updateAttachment(): An attachment is required.",{attachment:t});if(!r)throw new O("invalid-attachment-info","updateAttachment(): An attachmentInfo is required.",{attachmentInfo:r});if(!((h=o.operations)!=null&&h.update))throw new O("invalid-capabilities","updateAttachment(): Update capabilities are required.");const l=s.indexOf(r);if(!i||typeof i.updateAttachment!="function")throw new O("invalid-layer","updateAttachment(): A valid layer is required.");if(!n)throw new O("invalid-graphic","updateAttachment(): A graphic is required.");const c=i.updateAttachment(n,r.id,t).then(f=>this._queryAttachment(f.objectId)),p=await c;return s.splice(l,1,p),p}async commitFiles(){return await Promise.all(this.fileInfos.items.map(t=>this.addAttachment(t.form))),this.fileInfos.removeAll(),this.getAttachments()}addFile(t,r){if(!t||!r)return null;const i={file:t,form:r};return this.fileInfos.add(i),i}updateFile(t,r,i=this.activeFileInfo){if(!t||!r||!i)return null;const s=this.fileInfos.indexOf(i);return s>-1&&this.fileInfos.splice(s,1,{file:t,form:r}),this.fileInfos.items[s]}deleteFile(t){const r=this.fileInfos.find(i=>i.file===t);return r?(this.fileInfos.remove(r),r):null}async _queryAttachment(t,r){const{_attachmentLayer:i}=this;if(!t||!(i!=null&&i.queryAttachments))throw new O("invalid-attachment-id","Could not query attachment.");const s=this._getObjectId(r);if(typeof s!="number")throw new O("invalid-object-id","getAttachments(): Numeric object id is required");const n=new b_({objectIds:[s],attachmentsWhere:`AttachmentId=${t}`,returnMetadata:!0});return i.queryAttachments(n).then(o=>o[s][0])}_getObjectId(t=this.graphic){return(t==null?void 0:t.getObjectId())??null}_graphicChanged(){this.graphic&&(this._setAttachmentLayer(),this.getAttachments().catch(()=>this.attachmentInfos.destroyAll()))}_setAttachmentLayer(){const{graphic:t}=this,r=a5(t);this._attachmentLayer=r?r.type==="scene"&&r.associatedLayer!=null?r.associatedLayer:r:null}};a([u()],Ar.prototype,"capabilities",void 0),a([Ce("capabilities")],Ar.prototype,"castCapabilities",null),a([u()],Ar.prototype,"activeAttachmentInfo",void 0),a([u()],Ar.prototype,"activeFileInfo",void 0),a([u({readOnly:!0,type:g5})],Ar.prototype,"attachmentInfos",void 0),a([u()],Ar.prototype,"fileInfos",void 0),a([u({type:ni})],Ar.prototype,"graphic",void 0),a([u()],Ar.prototype,"mode",void 0),a([u({readOnly:!0})],Ar.prototype,"state",null),a([u()],Ar.prototype,"filesEnabled",void 0),a([u({readOnly:!0})],Ar.prototype,"supportsResizeAttachments",null),Ar=a([_("esri.widgets.Attachments.AttachmentsViewModel")],Ar);const I2=Ar;function M3(e){const t=e.toLowerCase();return t==="image/bmp"||t==="image/emf"||t==="image/exif"||t==="image/gif"||t==="image/x-icon"||t==="image/jpeg"||t==="image/png"||t==="image/tiff"||t==="image/x-wmf"}function lie(e){const t=Ie("esri/themes/base/images/files/");return e?e==="text/plain"?`${t}text-32.svg`:e==="application/pdf"?`${t}pdf-32.svg`:e==="text/csv"?`${t}csv-32.svg`:e==="application/gpx+xml"?`${t}gpx-32.svg`:e==="application/x-dwf"?`${t}cad-32.svg`:e==="application/postscript"||e==="application/json"||e==="text/xml"||e==="model/vrml"?`${t}code-32.svg`:e==="application/x-zip-compressed"||e==="application/x-7z-compressed"||e==="application/x-gzip"||e==="application/x-tar"||e==="application/x-gtar"||e==="application/x-bzip2"||e==="application/gzip"||e==="application/x-compress"||e==="application/x-apple-diskimage"||e==="application/x-rar-compressed"||e==="application/zip"?`${t}zip-32.svg`:e.includes("image/")?`${t}image-32.svg`:e.includes("audio/")?`${t}sound-32.svg`:e.includes("video/")?`${t}video-32.svg`:e.includes("msexcel")||e.includes("ms-excel")||e.includes("spreadsheetml")?`${t}excel-32.svg`:e.includes("msword")||e.includes("ms-word")||e.includes("wordprocessingml")?`${t}word-32.svg`:e.includes("powerpoint")||e.includes("presentationml")?`${t}report-32.svg`:`${t}generic-32.svg`:`${t}generic-32.svg`}const fe={anchor:"esri-widget__anchor",anchorDisabled:"esri-widget__anchor--disabled",button:"esri-button",buttonDisabled:"esri-button--disabled",buttonHalf:"esri-button--half",buttonSecondary:"esri-button--secondary",buttonSmall:"esri-button--small",buttonTertiary:"esri-button--tertiary",buttonThird:"esri-button--third",disabled:"esri-disabled",empty:"esri-widget__content--empty",emptyIllustration:"esri-widget__content-illustration--empty",heading:"esri-widget__heading",hidden:"esri-hidden",input:"esri-input",interactive:"esri-interactive",loader:"esri-widget__loader",loaderAnimation:"esri-widget__loader-animation",loaderText:"esri-widget__loader-text",menu:"esri-menu",menuHeader:"esri-menu__header",menuItem:"esri-menu__list-item",menuItemActive:"esri-menu__list-item--active",menuItemFocus:"esri-menu__list-item--focus",menuList:"esri-menu__list",panel:"esri-widget--panel",panelHeightOnly:"esri-widget--panel-height-only",primaryTick:"primary-tick",primaryTickAmPm:"primary-tick__ampm",primaryTickLabel:"primary-tick__label",rotating:"esri-rotating",secondaryTick:"secondary-tick",select:"esri-select",table:"esri-widget__table",widget:"esri-widget",widgetButton:"esri-widget--button",widgetButtonActive:"esri-widget--button-active",widgetDisabled:"esri-widget--disabled"},yn={close:"esri-icon-close",collapse:"esri-icon-collapse",down:"esri-icon-down",downArrow:"esri-icon-down-arrow",dragHorizontal:"esri-icon-drag-horizontal",dragVertical:"esri-icon-drag-vertical",duplicate:"esri-icon-duplicate",expand:"esri-icon-expand",fontFallbackText:"esri-icon-font-fallback-text",forward:"esri-icon-forward",handleVertical:"esri-icon-handle-vertical",icon:"esri-icon",left:"esri-icon-left",locateCircled:"esri-icon-locate-circled",noticeTriangle:"esri-icon-notice-triangle",pause:"esri-icon-pause",play:"esri-icon-play",plus:"esri-icon-plus",radioChecked:"esri-icon-radio-checked",radioUnchecked:"esri-icon-radio-unchecked",refresh:"esri-icon-refresh",reverse:"esri-icon-reverse",right:"esri-icon-right",search:"esri-icon-search",swap:"esri-icon-swap",table:"esri-icon-table",trash:"esri-icon-trash",up:"esri-icon-up",upArrow:"esri-icon-up-arrow",upDownArrows:"esri-icon-up-down-arrows",urbanModel:"esri-icon-urban-model",zoomInMagnifyingGlass:"esri-icon-zoom-in-magnifying-glass",zoomToObject:"esri-icon-zoom-to-object"};function Qt(e){return(t,r)=>{t.hasOwnProperty("_messageBundleProps")||(t._messageBundleProps=t._messageBundleProps?t._messageBundleProps.slice():[]),t._messageBundleProps.push({bundlePath:e,propertyName:r})}}var uie=function(e){return{vnodeSelector:"",properties:void 0,children:void 0,text:e.toString(),domNode:null}},v5=function(e,t){for(var r=0,i=e.length;r<i;r++){var s=e[r];Array.isArray(s)?v5(s,t):s!=null&&s!==!1&&(s.hasOwnProperty("vnodeSelector")||(s=uie(s)),t.push(s))}},cie=function(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(r.length===1&&typeof r[0]=="string")return{vnodeSelector:e,properties:t||void 0,children:void 0,text:r[0],domNode:null};var s=[];return v5(r,s),{vnodeSelector:e,properties:t||void 0,children:s,text:void 0,domNode:null}};function T(e,t,...r){return typeof e!="function"||Ym(e)?cie(e,t,...r):e(t,...r)}function b5(...e){return e}const E3={addButton:!0,addSubmitButton:!0,cancelAddButton:!0,cancelUpdateButton:!0,deleteButton:!0,errorMessage:!0,progressBar:!0,updateButton:!0},xe="esri-attachments",ae={base:xe,loaderContainer:`${xe}__loader-container`,loader:`${xe}__loader`,fadeIn:`${xe}--fade-in`,container:`${xe}__container`,containerList:`${xe}__container--list`,containerPreview:`${xe}__container--preview`,actions:`${xe}__actions`,deleteButton:`${xe}__delete-button`,addAttachmentButton:`${xe}__add-attachment-button`,errorMessage:`${xe}__error-message`,items:`${xe}__items`,item:`${xe}__item`,itemButton:`${xe}__item-button`,itemMask:`${xe}__item-mask`,itemMaskIcon:`${xe}__item-mask--icon`,itemImage:`${xe}__image`,itemImageResizable:`${xe}__image--resizable`,itemLabel:`${xe}__label`,itemFilename:`${xe}__filename`,itemChevronIcon:`${xe}__item-chevron-icon`,itemLink:`${xe}__item-link`,itemLinkOverlay:`${xe}__item-link-overlay`,itemLinkOverlayIcon:`${xe}__item-link-overlay-icon`,itemEditIcon:`${xe}__item-edit-icon`,itemAddIcon:`${xe}__item-add-icon`,itemAddButton:`${xe}__item-add-button`,formNode:`${xe}__form-node`,fileFieldset:`${xe}__file-fieldset`,fileLabel:`${xe}__file-label`,fileName:`${xe}__file-name`,fileInput:`${xe}__file-input`,metadata:`${xe}__metadata`,metadataFieldset:`${xe}__metadata-fieldset`,progressBar:`${xe}__progress-bar`},$v=window.CSS;let Wt=class extends _r{constructor(t,r){super(t,r),this.displayType="auto",this.messages=null,this.messagesUnits=null,this.selectedFile=null,this.submitting=!1,this.viewModel=null,this.visibleElements={...E3},this._supportsImageOrientation=$v&&$v.supports&&$v.supports("image-orientation","from-image"),this._addAttachmentForm=null,this._updateAttachmentForm=null}normalizeCtorArgs(t){return t!=null&&t.viewModel||(t={viewModel:new I2,...t}),t}initialize(){this.addHandles([pc(()=>{var t;return(t=this.viewModel)==null?void 0:t.attachmentInfos},"change",()=>this.scheduleRender()),pc(()=>{var t;return(t=this.viewModel)==null?void 0:t.fileInfos},"change",()=>this.scheduleRender()),W(()=>{var t;return(t=this.viewModel)==null?void 0:t.mode},()=>this._modeChanged(),Ae)])}loadDependencies(){return On({icon:()=>j(()=>import("./calcite-icon-z5p-Wr8S.js"),__vite__mapDeps([129,130,131,132]))})}get capabilities(){return this.viewModel.capabilities}set capabilities(t){this.viewModel.capabilities=t}get effectiveDisplayType(){const{displayType:t}=this;return t&&t!=="auto"?t:this.viewModel.supportsResizeAttachments?"preview":"list"}get graphic(){return this.viewModel.graphic}set graphic(t){this.viewModel.graphic=t}get icon(){return"attachment"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}castVisibleElements(t){return{...E3,...t}}addAttachment(){const{_addAttachmentForm:t,viewModel:r}=this;return this._set("submitting",!0),this._set("error",null),r.addAttachment(t).then(i=>(this._set("submitting",!1),this._set("error",null),r.mode="view",i)).catch(i=>{throw this._set("submitting",!1),this._set("error",new O("attachments:add-attachment",this.messages.addErrorMessage,i)),i})}deleteAttachment(t){const{viewModel:r}=this;return this._set("submitting",!0),this._set("error",null),r.deleteAttachment(t).then(i=>(this._set("submitting",!1),this._set("error",null),r.mode="view",i)).catch(i=>{throw this._set("submitting",!1),this._set("error",new O("attachments:delete-attachment",this.messages.deleteErrorMessage,i)),i})}updateAttachment(){const{viewModel:t}=this,{_updateAttachmentForm:r}=this;return this._set("submitting",!0),this._set("error",null),t.updateAttachment(r).then(i=>(this._set("submitting",!1),this._set("error",null),t.mode="view",i)).catch(i=>{throw this._set("submitting",!1),this._set("error",new O("attachments:update-attachment",this.messages.updateErrorMessage,i)),i})}addFile(){const t=this.viewModel.addFile(this.selectedFile,this._addAttachmentForm);return this.viewModel.mode="view",t}updateFile(){const{viewModel:t}=this,r=t.updateFile(this.selectedFile,this._updateAttachmentForm,t.activeFileInfo);return t.mode="view",r}deleteFile(t){var i;const r=this.viewModel.deleteFile(t||((i=this.viewModel.activeFileInfo)==null?void 0:i.file));return this.viewModel.mode="view",r}render(){const{submitting:t,viewModel:r}=this,{state:i}=r;return T("div",{class:this.classes(ae.base,fe.widget)},t?this._renderProgressBar():null,i==="loading"?this._renderLoading():this._renderAttachments(),this._renderErrorMessage())}_renderErrorMessage(){const{error:t,visibleElements:r}=this;return t&&r.errorMessage?T("div",{class:ae.errorMessage,key:"error-message"},t.message):null}_renderAttachments(){const{activeFileInfo:t,mode:r,activeAttachmentInfo:i}=this.viewModel;return r==="add"?this._renderAddForm():r==="edit"?this._renderDetailsForm(i||t):this._renderAttachmentContainer()}_renderLoading(){return T("div",{class:ae.loaderContainer,key:"loader"},T("div",{class:ae.loader}))}_renderProgressBar(){return this.visibleElements.progressBar?T("div",{class:ae.progressBar,key:"progress-bar"}):null}_renderAddForm(){const{submitting:t,selectedFile:r}=this,i=t||!r,s=this.visibleElements.cancelAddButton?T("button",{bind:this,class:this.classes(fe.button,fe.buttonTertiary,fe.buttonSmall,fe.buttonHalf,t&&fe.buttonDisabled),disabled:t,onclick:this._cancelForm,type:"button"},this.messages.cancel):null,n=this.visibleElements.addSubmitButton?T("button",{class:this.classes(fe.button,fe.buttonSecondary,fe.buttonSmall,fe.buttonHalf,{[fe.buttonDisabled]:i}),disabled:i,type:"submit"},this.messages.add):null,o=r?T("span",{class:ae.fileName,key:"file-name"},r.name):null,l=T("form",{afterCreate:ZE,afterRemoved:JE,bind:this,"data-node-ref":"_addAttachmentForm",onsubmit:this._submitAddAttachment},T("fieldset",{class:ae.fileFieldset},o,T("label",{class:this.classes(ae.fileLabel,fe.button,fe.buttonSecondary)},r?this.messages.changeFile:this.messages.selectFile,T("input",{bind:this,class:ae.fileInput,name:"attachment",onchange:this._handleFileInputChange,type:"file"}))),n,s);return T("div",{class:ae.formNode,key:"add-form-container"},l)}_renderDetailsForm(t){var C,P,L;const{visibleElements:r,viewModel:i,selectedFile:s,submitting:n}=this,{capabilities:o}=i,l=n||!s;let c,p,h,f;s?(c=s.type,p=s.name,h=s.size):t&&"file"in t?(c=t.file.type,p=t.file.name,h=t.file.size):t&&"contentType"in t&&(c=t.contentType,p=t.name,h=t.size,f=t.url);const y=o.editing&&((C=o.operations)!=null&&C.delete)&&r.deleteButton?T("button",{bind:this,class:this.classes(fe.button,fe.buttonSmall,fe.buttonTertiary,ae.deleteButton,{[fe.buttonDisabled]:n}),disabled:n,key:"delete-button",onclick:V=>this._submitDeleteAttachment(V,t),type:"button"},this.messages.delete):void 0,m=o.editing&&((P=o.operations)!=null&&P.update)&&r.updateButton?T("button",{class:this.classes(fe.button,fe.buttonSmall,fe.buttonThird,{[fe.buttonDisabled]:l}),disabled:l,key:"update-button",type:"submit"},this.messages.update):void 0,g=this.visibleElements.cancelUpdateButton?T("button",{bind:this,class:this.classes(fe.button,fe.buttonSmall,fe.buttonTertiary,fe.buttonThird,{[fe.buttonDisabled]:n}),disabled:n,key:"cancel-button",onclick:this._cancelForm,type:"button"},this.messages.cancel):void 0,b=o.editing&&((L=o.operations)!=null&&L.update)?T("fieldset",{class:ae.fileFieldset,key:"file"},T("span",{class:ae.fileName,key:"file-name"},p),T("label",{class:this.classes(ae.fileLabel,fe.button,fe.buttonSecondary)},this.messages.changeFile,T("input",{bind:this,class:ae.fileInput,name:"attachment",onchange:this._handleFileInputChange,type:"file"}))):void 0,w=T("fieldset",{class:ae.metadataFieldset,key:"size"},T("label",null,nre(this.messagesUnits,h??0))),S=T("fieldset",{class:ae.metadataFieldset,key:"content-type"},T("label",null,c)),x=f!=null?T("a",{class:ae.itemLink,href:f,rel:"noreferrer",target:"_blank"},this._renderImageMask(t,400),T("div",{class:ae.itemLinkOverlay},T("span",{class:ae.itemLinkOverlayIcon},T("calcite-icon",{icon:"launch"})))):this._renderImageMask(t,400),E=T("form",{afterCreate:ZE,afterRemoved:JE,bind:this,"data-node-ref":"_updateAttachmentForm",onsubmit:V=>this._submitUpdateAttachment(V,t)},T("div",{class:ae.metadata},w,S),b,T("div",{class:ae.actions},y,g,m));return T("div",{class:ae.formNode,key:"edit-form-container"},x,E)}_renderImageMask(t,r){return t?"file"in t?this._renderGenericImageMask(t.file.name,t.file.type):this._renderImageMaskForAttachment(t,r):null}_renderGenericImageMask(t,r){const{supportsResizeAttachments:i}=this.viewModel,s=lie(r),n={[ae.itemImageResizable]:i};return T("div",{class:this.classes(ae.itemMaskIcon,ae.itemMask),key:s},T("img",{alt:t,class:this.classes(n,ae.itemImage),src:s,title:t}))}_renderImageMaskForAttachment(t,r){const{supportsResizeAttachments:i}=this.viewModel;if(!t)return null;const{contentType:s,name:n,url:o}=t;if(!i||!M3(s))return this._renderGenericImageMask(n,s);const l=this._getCSSTransform(t),c=l?{transform:l,"image-orientation":"none"}:{},p=`${o}${o!=null&&o.includes("?")?"&":"?"}w=${r}`,h={[ae.itemImageResizable]:i};return T("div",{class:this.classes(ae.itemMask),key:p},T("img",{alt:n,class:this.classes(h,ae.itemImage),src:p,styles:c,title:n}))}_renderFile(t){const{file:r}=t;return T("li",{class:ae.item,key:r},T("button",{"aria-label":this.messages.attachmentDetails,bind:this,class:ae.itemButton,key:"details-button",onclick:()=>this._startEditFile(t),title:this.messages.attachmentDetails,type:"button"},this._renderImageMask(t),T("label",{class:ae.itemLabel},T("span",{class:ae.itemFilename},r.name||this.messages.noTitle),T("span",{"aria-hidden":"true",class:this.classes(ae.itemChevronIcon,gn(this.container)?yn.left:yn.right)}))))}_renderAttachmentInfo({attachmentInfo:t,displayType:r}){const{viewModel:i,effectiveDisplayType:s}=this,{capabilities:n,supportsResizeAttachments:o}=i,{contentType:l,name:c,url:p}=t,h=this._renderImageMask(t,r==="list"?48:400),f=n.editing?T("span",{"aria-hidden":"true",class:this.classes(ae.itemChevronIcon,gn(this.container)?yn.left:yn.right)}):null,y=[h,s==="preview"&&o&&M3(l)?null:T("label",{class:ae.itemLabel},T("span",{class:ae.itemFilename},c||this.messages.noTitle),f)],m=n.editing?T("button",{"aria-label":this.messages.attachmentDetails,bind:this,class:ae.itemButton,"data-attachment-info-id":t.id,key:"details-button",onclick:()=>this._startEditAttachment(t),title:this.messages.attachmentDetails,type:"button"},y):T("a",{class:ae.itemButton,href:p??void 0,key:"details-link",rel:"noreferrer",target:"_blank"},y);return T("li",{class:ae.item,key:t},m)}_renderAttachmentContainer(){var g;const{effectiveDisplayType:t,viewModel:r,visibleElements:i}=this,{attachmentInfos:s,capabilities:n,fileInfos:o}=r,l=!!(s!=null&&s.length),c=!!(o!=null&&o.length),p={[ae.containerList]:t!=="preview",[ae.containerPreview]:t==="preview"},h=n.editing&&((g=n.operations)!=null&&g.add)&&i.addButton?T("button",{bind:this,class:this.classes(fe.button,fe.buttonTertiary,ae.addAttachmentButton),onclick:()=>this._startAddAttachment(),type:"button"},T("span",{"aria-hidden":"true",class:this.classes(ae.itemAddIcon,yn.plus)}),this.messages.add):void 0,f=l?T("ul",{class:ae.items,key:"attachments-list"},s.toArray().map(b=>this._renderAttachmentInfo({attachmentInfo:b,displayType:t}))):void 0,y=c?T("ul",{class:ae.items,key:"file-list"},o.toArray().map(b=>this._renderFile(b))):void 0,m=c||l?void 0:T("div",{class:fe.empty},this.messages.noAttachments);return T("div",{class:this.classes(ae.container,p),key:"attachments-container"},f,y,m,h)}_modeChanged(){this._set("error",null),this._set("selectedFile",null)}_handleFileInputChange(t){var s;const r=t.target,i=(s=r.files)==null?void 0:s.item(0);this._set("selectedFile",i)}_submitDeleteAttachment(t,r){t.preventDefault(),r&&("file"in r?this.deleteFile(r.file):r&&this.deleteAttachment(r))}_submitAddAttachment(t){t.preventDefault(),this.viewModel.filesEnabled?this.addFile():this.addAttachment()}_submitUpdateAttachment(t,r){t.preventDefault(),r&&"file"in r?this.updateFile():this.updateAttachment()}_startEditAttachment(t){const{viewModel:r}=this;r.activeFileInfo=null,r.activeAttachmentInfo=t,r.mode="edit"}_startEditFile(t){const{viewModel:r}=this;r.activeAttachmentInfo=null,r.activeFileInfo=t,r.mode="edit"}_startAddAttachment(){this.viewModel.mode="add"}_cancelForm(t){t.preventDefault(),this.viewModel.mode="view"}_getCSSTransform(t){const{orientationInfo:r}=t;return!this._supportsImageOrientation&&r?[r.rotation?`rotate(${r.rotation}deg)`:"",r.mirrored?"scaleX(-1)":""].join(" "):""}};a([u()],Wt.prototype,"capabilities",null),a([u()],Wt.prototype,"displayType",void 0),a([u({readOnly:!0})],Wt.prototype,"effectiveDisplayType",null),a([u()],Wt.prototype,"graphic",null),a([u()],Wt.prototype,"icon",null),a([u()],Wt.prototype,"label",null),a([u(),Qt("esri/widgets/Attachments/t9n/Attachments")],Wt.prototype,"messages",void 0),a([u(),Qt("esri/core/t9n/Units")],Wt.prototype,"messagesUnits",void 0),a([u({readOnly:!0})],Wt.prototype,"selectedFile",void 0),a([u({readOnly:!0})],Wt.prototype,"submitting",void 0),a([u({readOnly:!0})],Wt.prototype,"error",void 0),a([u({type:I2})],Wt.prototype,"viewModel",void 0),a([u()],Wt.prototype,"visibleElements",void 0),a([Ce("visibleElements")],Wt.prototype,"castVisibleElements",null),Wt=a([_("esri.widgets.Attachments")],Wt);const die=Wt;let ip=class extends I2{constructor(t){super(t),this.description=null,this.title=null}};a([u()],ip.prototype,"description",void 0),a([u()],ip.prototype,"title",void 0),ip=a([_("esri.widgets.Feature.FeatureAttachments.FeatureAttachmentsViewModel")],ip);const T2=ip;function M2({level:e,class:t,...r},i){const s=pie(e);return T(`h${s}`,{...r,"aria-level":String(s),class:IR(fe.heading,t),role:"heading"},i)}function pie(e){return _l(Math.ceil(e),1,6)}const Sv="esri-feature-element-info",xv={base:Sv,title:`${Sv}__title`,description:`${Sv}__description`};let wu=class extends _r{constructor(t,r){super(t,r),this.description=null,this.headingLevel=2,this.title=null}render(){return T("div",{class:xv.base},this._renderTitle(),this._renderDescription())}_renderTitle(){const{title:t}=this;return t?T(M2,{class:xv.title,innerHTML:t,level:this.headingLevel}):null}_renderDescription(){const{description:t}=this;return t?T("div",{class:xv.description,innerHTML:t,key:"description"}):null}};a([u()],wu.prototype,"description",void 0),a([u()],wu.prototype,"headingLevel",void 0),a([u()],wu.prototype,"title",void 0),wu=a([_("esri.widgets.Feature.support.FeatureElementInfo")],wu);const Nh=wu,hie={base:"esri-feature-attachments"};let Ss=class extends _r{constructor(t,r){super(t,r),this._featureElementInfo=null,this.attachmentsWidget=new die,this.headingLevel=2,this.viewModel=new T2}initialize(){this._featureElementInfo=new Nh,this.addHandles([W(()=>{var t,r;return[(t=this.viewModel)==null?void 0:t.description,(r=this.viewModel)==null?void 0:r.title,this.headingLevel]},()=>this._setupFeatureElementInfo(),Ae),W(()=>this.viewModel,t=>this.attachmentsWidget.viewModel=t,Ae)])}destroy(){var t;this.attachmentsWidget.viewModel=null,this.attachmentsWidget.destroy(),(t=this._featureElementInfo)==null||t.destroy()}get description(){return this.viewModel.description}set description(t){this.viewModel.description=t}get displayType(){return this.attachmentsWidget.displayType}set displayType(t){this.attachmentsWidget.displayType=t}get graphic(){return this.viewModel.graphic}set graphic(t){this.viewModel.graphic=t}get title(){return this.viewModel.title}set title(t){this.viewModel.title=t}render(){var r;const{attachmentsWidget:t}=this;return T("div",{class:hie.base},(r=this._featureElementInfo)==null?void 0:r.render(),t==null?void 0:t.render())}_setupFeatureElementInfo(){var s;const{description:t,title:r,headingLevel:i}=this;(s=this._featureElementInfo)==null||s.set({description:t,title:r,headingLevel:i})}};a([u({readOnly:!0})],Ss.prototype,"attachmentsWidget",void 0),a([u()],Ss.prototype,"description",null),a([u()],Ss.prototype,"displayType",null),a([u()],Ss.prototype,"graphic",null),a([u()],Ss.prototype,"headingLevel",void 0),a([u()],Ss.prototype,"title",null),a([u({type:T2})],Ss.prototype,"viewModel",void 0),Ss=a([_("esri.widgets.Feature.FeatureAttachments")],Ss);const fie=Ss;let ao=class extends $e{constructor(t){super(t),this._loadingPromise=null,this.created=null,this.creator=null,this.destroyer=null,this.graphic=null,this.addHandles(W(()=>this.creator,r=>{this._destroyContent(),this._createContent(r)},Ae))}destroy(){this._destroyContent()}get state(){return this._loadingPromise?"loading":"ready"}_destroyContent(){const{created:t,graphic:r,destroyer:i}=this;t&&r&&(Km({type:"content",value:i,event:{graphic:r}}),this._set("created",null))}async _createContent(t){const r=this.graphic;if(!r||!t)return;const i=Km({type:"content",value:t,event:{graphic:r}});this._loadingPromise=i,this.notifyChange("state");const s=await i;i===this._loadingPromise&&(this._loadingPromise=null,this.notifyChange("state"),this._set("created",s))}};a([u({readOnly:!0})],ao.prototype,"created",void 0),a([u()],ao.prototype,"creator",void 0),a([u()],ao.prototype,"destroyer",void 0),a([u({type:ni})],ao.prototype,"graphic",void 0),a([u({readOnly:!0})],ao.prototype,"state",null),ao=a([_("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],ao);const Xm=ao;function w5(e){return t=>{t.hasOwnProperty("_delegatedEventNames")||(t._delegatedEventNames=t._delegatedEventNames?t._delegatedEventNames.slice():[]);const r=t._delegatedEventNames,i=Array.isArray(e)?e:yie(e);r.push(...i)}}function yie(e){return e.split(",").map(t=>t.trim())}const mie="calcite-mode-";function gie(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-mode-name").replaceAll(/\s|'|"/g,"")}function _5(){return gie().startsWith("dark")}function tpe(){return`${mie}${_5()?"dark":"light"}`}function $5(e){return e&&typeof e.render=="function"}function vie(e){return e&&typeof e.postMixInProperties=="function"&&typeof e.buildRendering=="function"&&typeof e.postCreate=="function"&&typeof e.startup=="function"}const Iv="esri-feature-content",Tv={base:Iv,loaderContainer:`${Iv}__loader-container`,loader:`${Iv}__loader`};let _u=class extends _r{constructor(t,r){super(t,r),this.viewModel=null,this._addTargetToAnchors=i=>{Array.from(i.querySelectorAll("a")).forEach(s=>{l5(s.href)&&!s.hasAttribute("target")&&s.setAttribute("target","_blank")})}}get creator(){var t;return(t=this.viewModel)==null?void 0:t.creator}set creator(t){this.viewModel&&(this.viewModel.creator=t)}get graphic(){var t;return(t=this.viewModel)==null?void 0:t.graphic}set graphic(t){this.viewModel&&(this.viewModel.graphic=t)}render(){var r;const t=(r=this.viewModel)==null?void 0:r.state;return T("div",{class:Tv.base},t==="loading"?this._renderLoading():this._renderCreated())}_renderLoading(){return T("div",{class:Tv.loaderContainer,key:"loader"},T("div",{class:Tv.loader}))}_renderCreated(){var r;const t=(r=this.viewModel)==null?void 0:r.created;return t?t instanceof HTMLElement?T("div",{afterCreate:this._attachToNode,bind:t,key:t}):$5(t)?T("div",{key:t},!t.destroyed&&t.render()):T("div",{afterCreate:this._addTargetToAnchors,innerHTML:t,key:t}):null}_attachToNode(t){const r=this;t.appendChild(r)}};a([u()],_u.prototype,"creator",null),a([u()],_u.prototype,"graphic",null),a([u({type:Xm})],_u.prototype,"viewModel",void 0),_u=a([_("esri.widgets.Feature.FeatureContent")],_u);const Uy=_u;let ln=class extends $e{constructor(t){super(t),this.attributes=null,this.expressionInfos=null,this.description=null,this.fieldInfos=null,this.title=null}get formattedFieldInfos(){const{expressionInfos:t,fieldInfos:r}=this,i=[];return r==null||r.forEach(s=>{if(!(!s.hasOwnProperty("visible")||s.visible))return;const n=s.clone();n.label=u5(n,t),i.push(n)}),i}};a([u()],ln.prototype,"attributes",void 0),a([u({type:[Lk]})],ln.prototype,"expressionInfos",void 0),a([u()],ln.prototype,"description",void 0),a([u({type:[Mc]})],ln.prototype,"fieldInfos",void 0),a([u({readOnly:!0})],ln.prototype,"formattedFieldInfos",null),a([u()],ln.prototype,"title",void 0),ln=a([_("esri.widgets.Feature.FeatureFields.FeatureFieldsViewModel")],ln);const o0=ln,bie=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,target:"_blank",label:"{messages.view}"},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"App Studio Player"},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Collector"},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Explorer"},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Navigator"},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Survey123"},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Trek2There"},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Workforce"},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"iForm"},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"FlowFinity"},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Laserfische"},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Microsoft Power Bi"}];function wie(e,t){if(typeof t!="string"||!t)return t;const r=bie.find(c=>c.pattern.test(t));if(!r)return t;const i=t.match(r.pattern),s=i==null?void 0:i[2],n=ns(ns(r.label,{messages:e,hierPart:s}),{appName:r.appName}),o=r.target?` target="${r.target}"`:"",l=r.target==="_blank"?' rel="noreferrer"':"";return t.replace(r.pattern,`<a${o} href="$1"${l}>${n}</a>`)}const Ef="esri-feature-fields",Af={base:Ef,fieldHeader:`${Ef}__field-header`,fieldData:`${Ef}__field-data`,fieldDataDate:`${Ef}__field-data--date`};let Bi=class extends _r{constructor(t,r){super(t,r),this._featureElementInfo=null,this.viewModel=new o0,this.messages=null,this.messagesURIUtils=null}initialize(){this._featureElementInfo=new Nh,this.addHandles(W(()=>{var t,r;return[(t=this.viewModel)==null?void 0:t.description,(r=this.viewModel)==null?void 0:r.title]},()=>this._setupFeatureElementInfo(),Ae))}destroy(){var t;(t=this._featureElementInfo)==null||t.destroy()}get attributes(){return this.viewModel.attributes}set attributes(t){this.viewModel.attributes=t}get description(){return this.viewModel.description}set description(t){this.viewModel.description=t}get expressionInfos(){return this.viewModel.expressionInfos}set expressionInfos(t){this.viewModel.expressionInfos=t}get fieldInfos(){return this.viewModel.fieldInfos}set fieldInfos(t){this.viewModel.fieldInfos=t}get title(){return this.viewModel.title}set title(t){this.viewModel.title=t}render(){var t;return T("div",{class:Af.base},(t=this._featureElementInfo)==null?void 0:t.render(),this._renderFields())}_renderFieldInfo(t,r){var h;const{attributes:i}=this.viewModel,s=t.fieldName||"",n=t.label||s,o=i?i[s]==null?"":i[s]:"",l=!!((h=t.format)!=null&&h.dateFormat),c=typeof o=="number"&&!l?this._forceLTR(o):wie(this.messagesURIUtils,o),p={[Af.fieldDataDate]:l};return T("tr",{key:`fields-element-info-row-${s}-${r}`},T("th",{class:Af.fieldHeader,innerHTML:n,key:`fields-element-info-row-header-${s}-${r}`}),T("td",{class:this.classes(Af.fieldData,p),innerHTML:c,key:`fields-element-info-row-data-${s}-${r}`}))}_renderFields(){const{formattedFieldInfos:t}=this.viewModel;return t!=null&&t.length?T("table",{class:fe.table,summary:this.messages.fieldsSummary},T("tbody",null,t.map((r,i)=>this._renderFieldInfo(r,i)))):null}_setupFeatureElementInfo(){var i;const{description:t,title:r}=this;(i=this._featureElementInfo)==null||i.set({description:t,title:r})}_forceLTR(t){return`&lrm;${t}`}};a([u()],Bi.prototype,"attributes",null),a([u()],Bi.prototype,"description",null),a([u()],Bi.prototype,"expressionInfos",null),a([u()],Bi.prototype,"fieldInfos",null),a([u()],Bi.prototype,"title",null),a([u({type:o0,nonNullable:!0})],Bi.prototype,"viewModel",void 0),a([u(),Qt("esri/widgets/Feature/t9n/Feature")],Bi.prototype,"messages",void 0),a([u(),Qt("esri/widgets/support/t9n/uriUtils")],Bi.prototype,"messagesURIUtils",void 0),Bi=a([_("esri.widgets.Feature.FeatureFields")],Bi);const S5=Bi,_ie=()=>Le.respectPrefersReducedMotion&&window.matchMedia("(prefers-reduced-motion: reduce)").matches,$ie={maximumFractionDigits:20};function Sie(e){return br(e,$ie)}function xie(e){const t=[];return Z_(mL(e),t),t.length?new ee(mW(t[0])):null}function Z_(e,t){var s;if(!e)return;let r;r=e.type==="CIMTextSymbol"?e.symbol:e;const i=e.type==="CIMPolygonSymbol";if(r!=null&&r.symbolLayers){for(const n of r.symbolLayers)if(!(n.colorLocked||i&&(vL(n)||gL(n)&&n.markerPlacement&&bL(n.markerPlacement))))switch(n.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":n.tintColor&&A3(t,n.tintColor);break;case"CIMVectorMarker":(s=n.markerGraphics)==null||s.forEach(o=>{Z_(o.symbol,t)});break;case"CIMSolidStroke":case"CIMSolidFill":A3(t,n.color);break;case"CIMHatchFill":Z_(n.lineSymbol,t)}}}function A3(e,t){for(const r of e)if(r.join(".")===t.join("."))return;e.push(t)}function npe(e,t,r){t instanceof ee||(t=new ee(t));const i=mL(e);i&&Y_(i,t)}function Y_(e,t,r){var n;if(!e)return;let i;i=e.type==="CIMTextSymbol"?e.symbol:e;const s=(i==null?void 0:i.type)==="CIMPolygonSymbol";if(i!=null&&i.symbolLayers)for(const o of i.symbolLayers){if(o.colorLocked||s&&(vL(o)||gL(o)&&o.markerPlacement&&bL(o.markerPlacement)))continue;const l=t.toArray();switch(o.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":o.tintColor=l;break;case"CIMVectorMarker":(n=o.markerGraphics)==null||n.forEach(c=>{Y_(c.symbol,t)});break;case"CIMSolidStroke":case"CIMSolidFill":o.color=l;break;case"CIMHatchFill":Y_(o.lineSymbol,t)}}}new BP(1e3);new ee([128,128,128]);const Iie=new ee("white");function Rl(e,t){if(!e)return null;let r=null;return hc(e)?r=Tie(e):Lg(e)&&(r=e.type==="cim"?xie(e):e.color?new ee(e.color):null),r?rh(r,t):null}function Tie(e){const t=e.symbolLayers;if(!t)return null;let r=null;return t.forEach(i=>{var s;i.type==="object"&&((s=i.resource)!=null&&s.href)||(r=i.type==="water"?i.color:i.material?i.material.color:null)}),r?new ee(r):null}function rh(e,t){if(t==null||e==null)return e;const r=e.toRgba();return r[3]=r[3]*t,new ee(r)}function Mie(e,t,r){const i=e.symbolLayers;if(!i)return;const s=n=>rh(t=t??n??(r!=null?Iie:null),r);i.forEach(n=>{var o,l;if(n.type!=="object"||!((o=n.resource)!=null&&o.href)||t)if(n.type==="water")n.color=s(n.color);else{const c=n.material!=null?n.material.color:null,p=s(c);n.material==null?n.material=new Lr({color:p}):n.material.color=p,r!=null&&"outline"in n&&((l=n.outline)==null?void 0:l.color)!=null&&(n.outline.color=rh(n.outline.color,r))}})}function Eie(e,t,r){var i;(t=t??e.color)&&(e.color=rh(t,r)),r!=null&&"outline"in e&&((i=e.outline)!=null&&i.color)&&(e.outline.color=rh(e.outline.color,r))}function Mv(e,t,r){e&&(t||r!=null)&&(t&&(t=new ee(t)),hc(e)?Mie(e,t,r):Lg(e)&&Eie(e,t,r))}async function Aie(e,t){const r=e.symbolLayers;r&&await Uq(r,async i=>Cie(i,t))}async function Cie(e,t){switch(e.type){case"extrude":Fie(e,t);break;case"icon":case"line":case"text":Oie(e,t);break;case"path":Pie(e,t);break;case"object":await kie(e,t)}}function Oie(e,t){const r=x5(t);r!=null&&(e.size=r)}function x5(e){for(const t of e)if(typeof t=="number")return t;return null}function Fie(e,t){e.size=typeof t[2]=="number"?t[2]:0}async function kie(e,t){const{resourceSize:r,symbolSize:i}=await Lie(e),s=I5(t,r,i);e.width=Ep(t[0],i[0],r[0],s),e.depth=Ep(t[1],i[1],r[1],s),e.height=Ep(t[2],i[2],r[2],s)}function Pie(e,t){const r=I5(t,Wk,[e.width,void 0,e.height]);e.width=Ep(t[0],e.width,1,r),e.height=Ep(t[2],e.height,1,r)}function I5(e,t,r){for(let i=0;i<3;i++){const s=e[i];switch(s){case"symbol-value":{const n=r[i];return n!=null?n/t[i]:1}case"proportional":break;default:if(s&&t[i])return s/t[i]}}return 1}async function Lie(e){const{computeObjectLayerResourceSize:t}=await j(()=>import("./symbolLayerUtils-C3UN-yN2.js"),[]),r=await t(e,10),{width:i,height:s,depth:n}=e,o=[i,n,s];let l=1;for(let c=0;c<3;c++){const p=o[c];if(p!=null){l=p/r[c];break}}for(let c=0;c<3;c++)o[c]==null&&(o[c]=r[c]*l);return{resourceSize:r,symbolSize:o}}function Ep(e,t,r,i){switch(e){case"proportional":return r*i;case"symbol-value":return t??r;default:return e}}function Nie(e,t){const r=x5(t);if(r!=null)switch(e.type){case"simple-marker":e.size=r;break;case"picture-marker":{const i=e.width/e.height;i>1?(e.width=r,e.height=r*i):(e.width=r*i,e.height=r);break}case"simple-line":e.width=r;break;case"text":e.font.size=r}}async function Rie(e,t){if(e&&t)return hc(e)?Aie(e,t):void(Lg(e)&&Nie(e,t))}function jie(e,t,r){if(e&&t!=null)if(hc(e)){const i=e.symbolLayers;i&&i.forEach(s=>{if(s.type==="object")switch(r){case"tilt":s.tilt=(s.tilt??0)+t;break;case"roll":s.roll=(s.roll??0)+t;break;default:s.heading=(s.heading??0)+t}s.type==="icon"&&(s.angle+=t)})}else Lg(e)&&(e.type!=="simple-marker"&&e.type!=="picture-marker"&&e.type!=="text"||(e.angle+=t))}async function Die(e,t){return await e.fetchSymbol(t)||e.fetchCIMSymbol(t)}const Vie="<",Uie=">";function zie(e,t,r,i){let s="";return t===0?s=`${Vie} `:t===r&&(s=`${Uie} `),s+Sie(e)}const qie=new ee([64,64,64]);function Gie(e,t){const r=[],i=e.length-1;return e.length===5?r.push(0,2,4):r.push(0,i),e.map((s,n)=>r.includes(n)?zie(s,n,i):null)}async function Bie(e,t,r){let i=!1,s=[],n=[];if(e.stops){const p=e.stops;s=p.map(h=>h.value),i=p.some(h=>!!h.label),i&&(n=p.map(h=>h.label))}const o=s[0],l=s[s.length-1];if(o==null&&l==null)return null;const c=i?null:Gie(s);return(await Promise.all(s.map(async(p,h)=>({value:p,color:e.type==="opacity"?await Wie(p,e):(await j(async()=>{const{getColor:f}=await Promise.resolve().then(()=>OS);return{getColor:f}},void 0)).getColor(e,p),label:i?n[h]:(c==null?void 0:c[h])??""})))).reverse()}async function Wie(e,t,r){const i=new ee(qie),s=(await j(async()=>{const{getOpacity:n}=await Promise.resolve().then(()=>OS);return{getOpacity:n}},void 0)).getOpacity(t,e);return s!=null&&(i.a=s),i}function Hie(e){if(!e.colorStops)return[];const t=[...e.colorStops].filter(i=>{var s;return((s=i.color)==null?void 0:s.a)>0});let r=t.length-1;if(t[0]){const i=t[r];i&&i.ratio!==1&&(t.push(new gp({ratio:1,color:i.color})),r++)}return t.map((i,s)=>{var o,l;let n="";return s===0?n=((o=e.legendOptions)==null?void 0:o.minLabel)||"low":s===r&&(n=((l=e.legendOptions)==null?void 0:l.maxLabel)||"high"),{color:i.color,label:n,ratio:i.ratio}}).reverse()}La("short-date");async function zr(e,t,r){h$(e,t,()=>[]).push(...r)}async function Jie(e){var r,i;const t=new Map;if(!e)return t;if("visualVariables"in e&&e.visualVariables){const s=e.visualVariables.filter(n=>n.type==="color");for(const n of s){const o=(await Bie(n)??[]).map(l=>l.color);await zr(t,n.field||n.valueExpression,o)}}if(e.type==="heatmap"){const s=Hie(e).map(n=>n.color);await zr(t,e.field||e.valueExpression,s)}else if(e.type==="pie-chart"){for(const s of e.attributes)await zr(t,s.field||s.valueExpression,[s.color]);await zr(t,"default",[(r=e==null?void 0:e.othersCategory)==null?void 0:r.color,Rl(e.backgroundFillSymbol,null)])}else if(e.type==="dot-density"){for(const s of e.attributes)await zr(t,s.field||s.valueExpression,[s.color]);await zr(t,"default",[e.backgroundColor])}else if(e.type==="unique-value")if(((i=e.authoringInfo)==null?void 0:i.type)==="predominance")for(const s of e.uniqueValueInfos??[])await zr(t,s.value.toString(),[Rl(s.symbol,null)]);else{const s=(e.uniqueValueInfos??[]).map(p=>Rl(p.symbol,null)),{field:n,field2:o,field3:l,valueExpression:c}=e;(n||c)&&await zr(t,n||c,s),o&&await zr(t,o,s),l&&await zr(t,l,s)}else if(e.type==="class-breaks"){const s=e.classBreakInfos.map(l=>Rl(l.symbol,null)),{field:n,valueExpression:o}=e;await zr(t,n??o,s)}else e.type==="simple"&&await zr(t,"default",[Rl(e.symbol,null)]);return"defaultSymbol"in e&&e.defaultSymbol&&await zr(t,"default",[Rl(e.defaultSymbol,null)]),t.forEach((s,n)=>{const o=s$(s.filter(Boolean),(l,c)=>JSON.stringify(l)===JSON.stringify(c));t.set(n,o)}),t}function ope(e,t){return t?{...t,query:{...e??{},...t.query}}:{query:e}}function T5(e){return typeof e=="string"?Yt(e):M(e)}function Zie(e,t,r){const i={};for(const s in e){if(s==="declaredClass")continue;const n=e[s];if(n!=null&&typeof n!="function")if(Array.isArray(n))i[s]=n.map(o=>Zie(o));else if(typeof n=="object")if(n.toJSON){const o=n.toJSON(r==null?void 0:r[s]);i[s]=JSON.stringify(o)}else i[s]=JSON.stringify(n);else i[s]=n}return i}const Cf={102100:{maxX:20037508342788905e-9,minX:-20037508342788905e-9,plus180Line:new xi({paths:[[[20037508342788905e-9,-20037508342788905e-9],[20037508342788905e-9,20037508342788905e-9]]],spatialReference:ge.WebMercator}),minus180Line:new xi({paths:[[[-20037508342788905e-9,-20037508342788905e-9],[-20037508342788905e-9,20037508342788905e-9]]],spatialReference:ge.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new xi({paths:[[[180,-180],[180,180]]],spatialReference:ge.WGS84}),minus180Line:new xi({paths:[[[-180,-180],[-180,180]]],spatialReference:ge.WGS84})}};function Wa(e,t){return Math.ceil((e-t)/(2*t))}function M5(e,t){const r=Ap(e);for(const i of r)for(const s of i)s[0]+=t;return e}function Ap(e){return Ya(e)?e.rings:e.paths}async function Yie(e,t,r,i){const s=T5(e),n=t[0].spatialReference,o={...i,responseType:"json",query:{...s.query,f:"json",sr:Tm(n),target:JSON.stringify({geometryType:Tg(t[0]),geometries:t}),cutter:JSON.stringify(r)}},l=await Ge(s.path+"/cut",o),{cutIndexes:c,geometries:p=[]}=l.data;return{cutIndexes:c,geometries:p.map(h=>{const f=bh(h);return f.spatialReference=n,f})}}function Qie(e){return{geometryType:Tg(e[0]),geometries:e.map(t=>t.toJSON())}}function Kie(e,t,r){const i=NU(t);return e.map(s=>{const n=i.fromJSON(s);return n.spatialReference=r,n})}async function Xie(e,t,r){const i=typeof e=="string"?Yt(e):e,s=t[0].spatialReference,n=Tg(t[0]),o={...r,query:{...i.query,f:"json",sr:Tm(s),geometries:JSON.stringify(Qie(t))}},{data:l}=await Ge(i.path+"/simplify",o);return Kie(l.geometries,n,s)}const E5=()=>G.getLogger("esri.geometry.support.normalizeUtils");function ese(e){return e.type==="polygon"}function tse(e){return e[0].type==="polygon"}function rse(e){return e[0].type==="polyline"}function ise(e,t){if(!(e instanceof xi||e instanceof xn)){const s="straightLineDensify: the input geometry is neither polyline nor polygon";throw E5().error(s),new O(s)}const r=Ap(e),i=[];for(const s of r){const n=[];i.push(n),n.push([s[0][0],s[0][1]]);for(let o=0;o<s.length-1;o++){const l=s[o][0],c=s[o][1],p=s[o+1][0],h=s[o+1][1],f=Math.sqrt((p-l)*(p-l)+(h-c)*(h-c)),y=(h-c)/f,m=(p-l)/f,g=f/t;if(g>1){for(let x=1;x<=g-1;x++){const E=x*t,C=m*E+l,P=y*E+c;n.push([C,P])}const b=(f+Math.floor(g-1)*t)/2,w=m*b+l,S=y*b+c;n.push([w,S])}n.push([p,h])}}return ese(e)?new xn({rings:i,spatialReference:e.spatialReference}):new xi({paths:i,spatialReference:e.spatialReference})}function C3(e,t,r){if(t){const i=ise(e,1e6);e=Eu(i,!0)}return r&&(e=M5(e,r)),e}function O3(e,t,r){if(Array.isArray(e)){const i=e[0];if(i>t){const s=Wa(i,t);e[0]=i+s*(-2*t)}else if(i<r){const s=Wa(i,r);e[0]=i+s*(-2*r)}}else{const i=e.x;if(i>t){const s=Wa(i,t);e=e.clone().offset(s*(-2*t),0)}else if(i<r){const s=Wa(i,r);e=e.clone().offset(s*(-2*r),0)}}return e}function sse(e,t){let r=-1;for(let i=0;i<t.cutIndexes.length;i++){const s=t.cutIndexes[i],n=t.geometries[i],o=Ap(n);for(let l=0;l<o.length;l++){const c=o[l];c.some(p=>{if(p[0]<180)return!0;{let h=0;for(let y=0;y<c.length;y++){const m=c[y][0];h=m>h?m:h}h=Number(h.toFixed(9));const f=-360*Wa(h,180);for(let y=0;y<c.length;y++){const m=n.getPoint(l,y);n.setPoint(l,y,m.clone().offset(f,0))}return!0}})}if(s===r){if(tse(e))for(const l of Ap(n))e[s]=e[s].addRing(l);else if(rse(e))for(const l of Ap(n))e[s]=e[s].addPath(l)}else r=s,e[s]=n}return e}async function A5(e,t,r){if(!Array.isArray(e))return A5([e],t);t&&typeof t!="string"&&E5().warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const i=typeof t=="string"?t:(t==null?void 0:t.url)??Le.geometryServiceUrl;let s,n,o,l,c,p,h,f,y=0;const m=[],g=[];for(const C of e)if(C!=null)if(s||(s=C.spatialReference,n=dp(s),o=s.isWebMercator,p=o?102100:4326,l=Cf[p].maxX,c=Cf[p].minX,h=Cf[p].plus180Line,f=Cf[p].minus180Line),n)if(C.type==="mesh")g.push(C);else if(C.type==="point")g.push(O3(C.clone(),l,c));else if(C.type==="multipoint"){const P=C.clone();P.points=P.points.map(L=>O3(L,l,c)),g.push(P)}else if(C.type==="extent"){const P=C.clone()._normalize(!1,!1,n);g.push(P.rings?new xn(P):P)}else if(C.extent){const P=C.extent,L=Wa(P.xmin,c)*(2*l);let V=L===0?C.clone():M5(C.clone(),L);P.offset(L,0);let{xmin:q,xmax:H}=P;q=Number(q.toFixed(9)),H=Number(H.toFixed(9)),P.intersects(h)&&H!==l?(y=H>y?H:y,V=C3(V,o),m.push(V),g.push("cut")):P.intersects(f)&&q!==c?(y=H*(2*l)>y?H*(2*l):y,V=C3(V,o,360),m.push(V),g.push("cut")):g.push(V)}else g.push(C.clone());else g.push(C);else g.push(C);let b=Wa(y,l),w=-90;const S=b,x=new xi;for(;b>0;){const C=360*b-180;x.addPath([[C,w],[C,-1*w]]),w*=-1,b--}if(m.length>0&&S>0){const C=sse(m,await Yie(i,m,x,r)),P=[],L=[];for(let H=0;H<g.length;H++){const Y=g[H];if(Y!=="cut")L.push(Y);else{const se=C.shift(),de=e[H];de!=null&&de.type==="polygon"&&de.rings&&de.rings.length>1&&se.rings.length>=de.rings.length?(P.push(se),L.push("simplify")):L.push(o?Za(se):se)}}if(!P.length)return L;const V=await Xie(i,P,r),q=[];for(let H=0;H<L.length;H++){const Y=L[H];Y!=="simplify"?q.push(Y):q.push(o?Za(V.shift()):V.shift())}return q}const E=[];for(let C=0;C<g.length;C++){const P=g[C];if(P!=="cut")E.push(P);else{const L=m.shift();E.push(o===!0?Za(L):L)}}return E}function C5(e){const t={};for(const r in e){if(r==="declaredClass")continue;const i=e[r];if(i!=null&&typeof i!="function")if(Array.isArray(i)){t[r]=[];for(let s=0;s<i.length;s++)t[r][s]=C5(i[s])}else typeof i=="object"?i.toJSON&&(t[r]=JSON.stringify(i)):t[r]=i}return t}var yo;(function(e){e[e.varint=0]="varint",e[e.fixed64=1]="fixed64",e[e.delimited=2]="delimited",e[e.fixed32=5]="fixed32",e[e.unknown=99]="unknown"})(yo||(yo={}));const F3=4294967296,nse=new TextDecoder("utf-8"),ose=k("safari")||k("ios")?6:k("ff")?12:32;let Q_=class zy{constructor(t,r,i=0,s=t?t.byteLength:0){this._tag=0,this._dataType=yo.unknown,this._init(t,r,i,s)}_init(t,r,i,s){this._data=t,this._dataView=r,this._pos=i,this._end=s}asUnsafe(){return this}clone(){return new zy(this._data,this._dataView,this._pos,this._end)}pos(){return this._pos}move(t){this._pos=t}nextTag(t){for(;;){if(this._pos===this._end)return!1;const r=this._decodeVarint();if(this._tag=r>>3,this._dataType=7&r,!t||t===this._tag)break;this.skip()}return!0}next(){if(this._pos===this._end)return!1;const t=this._decodeVarint();return this._tag=t>>3,this._dataType=7&t,!0}empty(){return this._pos>=this._end}tag(){return this._tag}getInt32(){return this._decodeVarint()}getInt64(){return this._decodeVarint()}getUInt32(){let t=4294967295;if(t=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128||(t=(t|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128)||(t=(t|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128)||(t=(t|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128)||(t=(t|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128))return t;throw new Error("Varint overflow")}getUInt64(){return this._decodeVarint()}getSInt32(){const t=this.getUInt32();return t>>>1^-(1&t)}getSInt64(){return this._decodeSVarint()}getBool(){const t=this._data[this._pos]!==0;return this._skip(1),t}getEnum(){return this._decodeVarint()}getFixed64(){const t=this._dataView,r=this._pos,i=t.getUint32(r,!0)+t.getUint32(r+4,!0)*F3;return this._skip(8),i}getSFixed64(){const t=this._dataView,r=this._pos,i=t.getUint32(r,!0)+t.getInt32(r+4,!0)*F3;return this._skip(8),i}getDouble(){const t=this._dataView.getFloat64(this._pos,!0);return this._skip(8),t}getFixed32(){const t=this._dataView.getUint32(this._pos,!0);return this._skip(4),t}getSFixed32(){const t=this._dataView.getInt32(this._pos,!0);return this._skip(4),t}getFloat(){const t=this._dataView.getFloat32(this._pos,!0);return this._skip(4),t}getString(){const t=this._getLength(),r=this._pos,i=this._toString(this._data,r,r+t);return this._skip(t),i}getBytes(){const t=this._getLength(),r=this._pos,i=this._toBytes(this._data,r,r+t);return this._skip(t),i}getLength(){return this._getLengthUnsafe()}processMessageWithArgs(t,r,i,s){const n=this.getMessage(),o=t(n,r,i,s);return n.release(),o}processMessage(t){const r=this.getMessage(),i=t(r);return r.release(),i}getMessage(){const t=this._getLength(),r=zy.pool.acquire();return r._init(this._data,this._dataView,this._pos,this._pos+t),this._skip(t),r}release(){zy.pool.release(this)}dataType(){return this._dataType}skip(){switch(this._dataType){case yo.varint:this._decodeVarint();break;case yo.fixed64:this._skip(8);break;case yo.delimited:this._skip(this._getLength());break;case yo.fixed32:this._skip(4);break;default:throw new Error("Invalid data type!")}}skipLen(t){this._skip(t)}_skip(t){if(this._pos+t>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=t}_decodeVarint(){const t=this._data;let r=this._pos,i=0,s=0;if(this._end-r>=10)do{if(s=t[r++],i|=127&s,!(128&s)||(s=t[r++],i|=(127&s)<<7,!(128&s))||(s=t[r++],i|=(127&s)<<14,!(128&s))||(s=t[r++],i|=(127&s)<<21,!(128&s))||(s=t[r++],i+=268435456*(127&s),!(128&s))||(s=t[r++],i+=34359738368*(127&s),!(128&s))||(s=t[r++],i+=4398046511104*(127&s),!(128&s))||(s=t[r++],i+=562949953421312*(127&s),!(128&s))||(s=t[r++],i+=72057594037927940*(127&s),!(128&s))||(s=t[r++],i+=9223372036854776e3*(127&s),!(128&s)))break;throw new Error("Varint too long!")}while(!1);else{let n=1;for(;r!==this._end&&(s=t[r],128&s);)++r,i+=(127&s)*n,n*=128;if(r===this._end)throw new Error("Varint overrun!");++r,i+=s*n}return this._pos=r,i}_decodeSVarint(){const t=this._data;let r,i=0,s=0;const n=1&t[this._pos];if(s=t[this._pos++],i|=127&s,!(128&s)||(s=t[this._pos++],i|=(127&s)<<7,!(128&s))||(s=t[this._pos++],i|=(127&s)<<14,!(128&s))||(s=t[this._pos++],i|=(127&s)<<21,!(128&s))||(s=t[this._pos++],i+=268435456*(127&s),!(128&s))||(s=t[this._pos++],i+=34359738368*(127&s),!(128&s))||(s=t[this._pos++],i+=4398046511104*(127&s),!(128&s)))return n?-(i+1)/2:i/2;if(r=BigInt(i),s=t[this._pos++],r+=0x2000000000000n*BigInt(127&s),!(128&s)||(s=t[this._pos++],r+=0x100000000000000n*BigInt(127&s),!(128&s))||(s=t[this._pos++],r+=0x8000000000000000n*BigInt(127&s),!(128&s)))return Number(n?-(r+1n)/2n:r/2n);throw new Error("Varint too long!")}_getLength(){if(this._dataType!==yo.delimited)throw new Error("Not a delimited data type!");return this._decodeVarint()}_getLengthUnsafe(){return this.getUInt32()}_toString(t,r,i){if((i=Math.min(this._end,i))-r>ose){const o=t.subarray(r,i);return nse.decode(o)}let s="",n="";for(let o=r;o<i;++o){const l=t[o];128&l?n+="%"+l.toString(16):(s+=decodeURIComponent(n)+String.fromCharCode(l),n="")}return n.length&&(s+=decodeURIComponent(n)),s}_toBytes(t,r,i){return i=Math.min(this._end,i),new Uint8Array(t.buffer,r,i-r)}};Q_.pool=new bc(Q_,void 0,e=>{e._data=null,e._dataView=null});const Ev=2;let ih=class $u{constructor(t=[],r=[]){this.lengths=t??[],this.coords=r??[]}static fromJSON(t){return new $u(t.lengths,t.coords)}static fromRect(t){const[r,i,s,n]=t,o=s-r,l=n-i;return new $u([5],[r,i,o,0,0,l,-o,0,0,-l])}get isPoint(){return this.lengths.length===0&&this.coords.length>=2}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce((t,r)=>t+r)}forEachVertex(t){let r=0;this.lengths.length||t(this.coords[0],this.coords[1]);for(let i=0;i<this.lengths.length;i++){const s=this.lengths[i];for(let n=0;n<s;n++)t(this.coords[Ev*(n+r)],this.coords[Ev*(n+r)+1]);r+=s}}deltaDecode(){const t=this.clone(),{coords:r,lengths:i}=t;let s=0;for(const n of i){for(let o=1;o<n;o++)r[2*(s+o)]+=r[2*(s+o)-2],r[2*(s+o)+1]+=r[2*(s+o)-1];s+=n}return t}clone(t){if(this.lengths.length===0)return new $u([],[this.coords[0],this.coords[1]]);const r=(this.lengths.length===0?1:this.lengths.reduce((s,n)=>s+n))*Ev,i=this.coords.slice(0,r);return t?(t.set(i),new $u(this.lengths,t)):new $u(Array.from(this.lengths),Array.from(i))}},ase=class qy{constructor(t=null,r={},i,s){this.geometry=t,this.attributes=r,this.centroid=i,this.objectId=s,this.displayId=0,this.geohashX=0,this.geohashY=0}static fromJSON(t,r){const i=t.geometry?ih.fromJSON(t.geometry):null,s=t.centroid?ih.fromJSON(t.centroid):null,n=t.attributes[r];return new qy(i,t.attributes,s,n)}weakClone(){const t=new qy(this.geometry,this.attributes,this.centroid,this.objectId);return t.displayId=this.displayId,t.geohashX=this.geohashX,t.geohashY=this.geohashY,t}clone(){var i,s;const t=(i=this.geometry)==null?void 0:i.clone(),r=new qy(t,{...this.attributes},(s=this.centroid)==null?void 0:s.clone(),this.objectId);return r.displayId=this.displayId,r.geohashX=this.geohashX,r.geohashY=this.geohashY,r}};function lse(e){var t,r;return!!((r=(t=e.geometry)==null?void 0:t.coords)!=null&&r.length)}let use=class O5{constructor(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){const t=new O5;return t.objectIdFieldName=this.objectIdFieldName,t.globalIdFieldName=this.globalIdFieldName,t.geohashFieldName=this.geohashFieldName,t.geometryProperties=this.geometryProperties,t.geometryType=this.geometryType,t.spatialReference=this.spatialReference,t.hasZ=this.hasZ,t.hasM=this.hasM,t.features=this.features,t.fields=this.fields,t.transform=this.transform,t.exceededTransferLimit=this.exceededTransferLimit,t.uniqueIdField=this.uniqueIdField,t.queryGeometry=this.queryGeometry,t.queryGeometryType=this.queryGeometryType,t}};const F5=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"];let ape=class{constructor(t){this._options=t,this.geometryTypes=F5,this._coordinatePtr=0,this._vertexDimension=0}createFeatureResult(){return new use}prepareFeatures(t){this._vertexDimension=2,t.hasZ&&this._vertexDimension++,t.hasM&&this._vertexDimension++}finishFeatureResult(t){if(!(t!=null&&t.features)||!t.hasZ||!this._options.sourceSpatialReference||!t.spatialReference||wr(t.spatialReference,this._options.sourceSpatialReference)||t.spatialReference.vcsWkid)return;const r=oc(this._options.sourceSpatialReference)/oc(t.spatialReference);if(r!==1)for(const i of t.features){if(!lse(i))continue;const s=i.geometry.coords;for(let n=2;n<s.length;n+=3)s[n]*=r}}addFeature(t,r){t.features.push(r)}createFeature(){return new ase}createSpatialReference(){return{wkid:0}}createGeometry(){return new ih}addField(t,r){t.fields.push(r)}allocateCoordinates(t){t.coords.length=t.lengths.reduce((r,i)=>r+i,0)*this._vertexDimension,this._coordinatePtr=0}addCoordinate(t,r){t.coords[this._coordinatePtr++]=r}addCoordinatePoint(t,r){t.coords.push(r)}addLength(t,r){t.lengths.push(r)}addQueryGeometry(t,r){t.queryGeometry=r.queryGeometry,t.queryGeometryType=r.queryGeometryType}createPointGeometry(){return new ih}};const k3=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGeometry","esriFieldTypeBlob","esriFieldTypeRaster","esriFieldTypeGUID","esriFieldTypeGlobalID","esriFieldTypeXML","esriFieldTypeBigInteger","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"],P3=["sqlTypeBigInt","sqlTypeBinary","sqlTypeBit","sqlTypeChar","sqlTypeDate","sqlTypeDecimal","sqlTypeDouble","sqlTypeFloat","sqlTypeGeometry","sqlTypeGUID","sqlTypeInteger","sqlTypeLongNVarchar","sqlTypeLongVarbinary","sqlTypeLongVarchar","sqlTypeNChar","sqlTypeNVarchar","sqlTypeOther","sqlTypeReal","sqlTypeSmallInt","sqlTypeSqlXml","sqlTypeTime","sqlTypeTimestamp","sqlTypeTimestamp2","sqlTypeTinyInt","sqlTypeVarbinary","sqlTypeVarchar"],L3=["upperLeft","lowerLeft"];function N3(e){return e>=k3.length?null:k3[e]}function cse(e){return e>=P3.length?null:P3[e]}function R3(e){return e>=L3.length?null:L3[e]}function j3(e,t){return t>=e.geometryTypes.length?null:e.geometryTypes[t]}function dse(e,t,r){const s=e.asUnsafe(),n=t.createPointGeometry(r);for(;s.next();)switch(s.tag()){case 3:{const o=s.getUInt32(),l=s.pos()+o;let c=0;for(;s.pos()<l;)t.addCoordinatePoint(n,s.getSInt64(),c++);break}default:s.skip()}return n}function pse(e,t,r){const n=e.asUnsafe(),o=t.createGeometry(r),l=2+(r.hasZ?1:0)+(r.hasM?1:0);for(;n.next();)switch(n.tag()){case 2:{const c=n.getUInt32(),p=n.pos()+c;let h=0;for(;n.pos()<p;)t.addLength(o,n.getUInt32(),h++);break}case 3:{const c=n.getUInt32(),p=n.pos()+c;let h=0;for(t.allocateCoordinates(o);n.pos()<p;)t.addCoordinate(o,n.getSInt64(),h),h++,h===l&&(h=0);break}default:n.skip()}return o}function hse(e){const s=e.asUnsafe(),n=new ih;let o="esriGeometryPoint";for(;s.next();)switch(s.tag()){case 2:{const l=s.getUInt32(),c=s.pos()+l;for(;s.pos()<c;)n.lengths.push(s.getUInt32());break}case 3:{const l=s.getUInt32(),c=s.pos()+l;for(;s.pos()<c;)n.coords.push(s.getSInt64());break}case 1:o=F5[s.getEnum()];break;default:s.skip()}return{queryGeometry:n,queryGeometryType:o}}function fse(e){const h=e.asUnsafe();for(;h.next();)switch(h.tag()){case 1:return h.getString();case 2:return h.getFloat();case 3:return h.getDouble();case 4:return h.getSInt32();case 5:return h.getUInt32();case 6:return h.getInt64();case 7:return h.getUInt64();case 8:return h.getSInt64();case 9:return h.getBool();default:return h.skip(),null}return null}function yse(e){const l=e.asUnsafe(),c={type:N3(0)};for(;l.next();)switch(l.tag()){case 1:c.name=l.getString();break;case 2:c.type=N3(l.getEnum());break;case 3:c.alias=l.getString();break;case 4:c.sqlType=cse(l.getEnum());break;case 5:l.skip();break;case 6:c.defaultValue=l.getString();break;default:l.skip()}return c}function mse(e){const i={},s=e.asUnsafe();for(;s.next();)switch(s.tag()){case 1:i.name=s.getString();break;case 2:i.isSystemMaintained=s.getBool();break;default:s.skip()}return i}function gse(e,t,r,i){const l=t.createFeature(r);let c=0;for(;e.next();)switch(e.tag()){case 1:{const p=i[c++].name;l.attributes[p]=e.processMessage(fse);break}case 2:l.geometry=e.processMessageWithArgs(pse,t,r);break;case 4:l.centroid=e.processMessageWithArgs(dse,t,r);break;default:e.skip()}return l}function vse(e){const n=[1,1,1,1],o=e.asUnsafe();for(;o.next();)switch(o.tag()){case 1:n[0]=o.getDouble();break;case 2:n[1]=o.getDouble();break;case 4:n[2]=o.getDouble();break;case 3:n[3]=o.getDouble();break;default:o.skip()}return n}function bse(e){const n=[0,0,0,0],o=e.asUnsafe();for(;o.next();)switch(o.tag()){case 1:n[0]=o.getDouble();break;case 2:n[1]=o.getDouble();break;case 4:n[2]=o.getDouble();break;case 3:n[3]=o.getDouble();break;default:o.skip()}return n}function wse(e){const s={originPosition:R3(0)},n=e.asUnsafe();for(;n.next();)switch(n.tag()){case 1:s.originPosition=R3(n.getEnum());break;case 2:s.scale=n.processMessage(vse);break;case 3:s.translate=n.processMessage(bse);break;default:n.skip()}return s}function _se(e){const s={},n=e.asUnsafe();for(;n.next();)switch(n.tag()){case 1:s.shapeAreaFieldName=n.getString();break;case 2:s.shapeLengthFieldName=n.getString();break;case 3:s.units=n.getString();break;default:n.skip()}return s}function $se(e,t){const l=t.createSpatialReference();for(;e.next();)switch(e.tag()){case 1:l.wkid=e.getUInt32();break;case 5:l.wkt=e.getString();break;case 2:l.latestWkid=e.getUInt32();break;case 3:l.vcsWkid=e.getUInt32();break;case 4:l.latestVcsWkid=e.getUInt32();break;default:e.skip()}return l}function Sse(e,t){const b=t.createFeatureResult(),w=e.asUnsafe();b.geometryType=j3(t,0);let S=!1;for(;w.next();)switch(w.tag()){case 1:b.objectIdFieldName=w.getString();break;case 3:b.globalIdFieldName=w.getString();break;case 4:b.geohashFieldName=w.getString();break;case 5:b.geometryProperties=w.processMessage(_se);break;case 7:b.geometryType=j3(t,w.getEnum());break;case 8:b.spatialReference=w.processMessageWithArgs($se,t);break;case 10:b.hasZ=w.getBool();break;case 11:b.hasM=w.getBool();break;case 12:b.transform=w.processMessage(wse);break;case 9:b.exceededTransferLimit=w.getBool();break;case 13:t.addField(b,w.processMessage(yse));break;case 15:S||(t.prepareFeatures(b),S=!0),t.addFeature(b,w.processMessageWithArgs(gse,t,b,b.fields));break;case 2:b.uniqueIdField=w.processMessage(mse);break;default:w.skip()}return t.finishFeatureResult(b),b}function xse(e,t){const s={};let n=null;for(;e.next();)switch(e.tag()){case 4:n=e.processMessageWithArgs(hse);break;case 1:s.featureResult=e.processMessageWithArgs(Sse,t);break;default:e.skip()}return n!=null&&s.featureResult&&t.addQueryGeometry(s,n),s}function Ise(e,t){try{const i=new Q_(new Uint8Array(e),new DataView(e)),s={};for(;i.next();)i.tag()===2?s.queryResult=i.processMessageWithArgs(xse,t):i.skip();return s}catch(r){throw new O("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:r})}}function Tse(e,t){const r=Ise(e,t),i=r.queryResult.featureResult,s=r.queryResult.queryGeometry,n=r.queryResult.queryGeometryType;if(i&&i.features&&i.features.length&&i.objectIdFieldName){const o=i.objectIdFieldName;for(const l of i.features)l.attributes&&(l.objectId=l.attributes[o])}return i&&(i.queryGeometry=s,i.queryGeometryType=n),i}const D3="Layer does not support extent calculation.";function Mse(e,t){if(t&&e.type==="extent")return`${e.xmin},${e.ymin},${e.xmax},${e.ymax}`;if(t&&e.type==="point")return`${e.x},${e.y}`;const r=e.toJSON();return delete r.spatialReference,JSON.stringify(r)}function Ese(e,t){var c;const r=e.geometry,i=e.toJSON();delete i.compactGeometryEnabled,delete i.defaultSpatialReferenceEnabled;const s=i;let n,o,l;if(r!=null&&(o=r.spatialReference,l=Tm(o),s.geometryType=Tg(r),s.geometry=Mse(r,e.compactGeometryEnabled),s.inSR=l),i.groupByFieldsForStatistics&&(s.groupByFieldsForStatistics=i.groupByFieldsForStatistics.join(",")),i.objectIds&&(s.objectIds=i.objectIds.join(",")),i.orderByFields&&(s.orderByFields=i.orderByFields.join(",")),!i.outFields||!i.returnDistinctValues&&(t!=null&&t.returnCountOnly||t!=null&&t.returnExtentOnly||t!=null&&t.returnIdsOnly)?delete s.outFields:i.outFields.includes("*")?s.outFields="*":s.outFields=i.outFields.join(","),i.outSR?(s.outSR=Tm(i.outSR),n=e.outSpatialReference):r&&(i.returnGeometry||i.returnCentroid)&&(s.outSR=s.inSR,n=o),i.returnGeometry&&delete i.returnGeometry,i.outStatistics&&(s.outStatistics=JSON.stringify(i.outStatistics)),i.fullText&&(s.fullText=JSON.stringify(i.fullText)),i.pixelSize&&(s.pixelSize=JSON.stringify(i.pixelSize)),i.quantizationParameters&&(e.defaultSpatialReferenceEnabled&&o!=null&&((c=e.quantizationParameters)==null?void 0:c.extent)!=null&&o.equals(e.quantizationParameters.extent.spatialReference)&&delete i.quantizationParameters.extent.spatialReference,s.quantizationParameters=JSON.stringify(i.quantizationParameters)),i.parameterValues&&(s.parameterValues=JSON.stringify(i.parameterValues)),i.rangeValues&&(s.rangeValues=JSON.stringify(i.rangeValues)),i.dynamicDataSource&&(s.layer=JSON.stringify({source:i.dynamicDataSource}),delete i.dynamicDataSource),i.timeExtent){const p=i.timeExtent,{start:h,end:f}=p;h==null&&f==null||(s.time=h===f?h:`${h??"null"},${f??"null"}`),delete i.timeExtent}return e.defaultSpatialReferenceEnabled&&o!=null&&n!=null&&o.equals(n)&&(s.defaultSR=s.inSR,delete s.inSR,delete s.outSR),s}async function Ase(e,t,r,i){const s=t.timeExtent!=null&&t.timeExtent.isEmpty?{data:{features:[]}}:await Rh(e,t,"json",i);return Jw(t,r,s.data),s}async function upe(e,t,r,i){if(t.timeExtent!=null&&t.timeExtent.isEmpty)return{data:r.createFeatureResult()};const s=await Cse(e,t,i),n=s;return n.data=Tse(s.data,r),n}function Cse(e,t,r){return Rh(e,t,"pbf",r)}function cpe(e,t,r){return t.timeExtent!=null&&t.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):Rh(e,t,"json",r,{returnIdsOnly:!0})}function dpe(e,t,r){return t.timeExtent!=null&&t.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):Rh(e,t,"json",r,{returnIdsOnly:!0,returnCountOnly:!0})}async function ppe(e,t,r){if(t.timeExtent!=null&&t.timeExtent.isEmpty)return{data:{count:0,extent:null}};const i=await Rh(e,t,"json",r,{returnExtentOnly:!0,returnCountOnly:!0}),s=i.data;if(s.hasOwnProperty("extent"))return i;if(s.features)throw new Error(D3);if(s.hasOwnProperty("count"))throw new Error(D3);return i}async function Rh(e,t,r,i={},s={}){const n=typeof e=="string"?Yt(e):e,o=t.geometry?[t.geometry]:[],l=await A5(o,null,{signal:i.signal}),c=l==null?void 0:l[0];c!=null&&((t=t.clone()).geometry=c);const p=C5({...n.query,f:r,...s,...Ese(t,s)});return Ge(rl(n.path,Ose(t,s)?"query3d":"query"),{...i,responseType:r==="pbf"?"array-buffer":"json",query:{...p,...i.query}})}function Ose(e,t){return e.formatOf3DObjects!=null&&!(t.returnCountOnly||t.returnExtentOnly||t.returnIdsOnly)}async function Av(e,t,r){const i=await Fse(e,t,r);return WS.fromJSON(i)}async function Fse(e,t,r){const i=T5(e),s={...r},n=ii.from(t),{data:o}=await Ase(i,n,n.sourceSpatialReference,s);return o}const kse="esri.widgets.Feature.support.relatedFeatureUtils",V3=()=>G.getLogger(kse),U3=new Map;function Gy(e){if(!vn(e))return null;const[t,r]=e.split("/").slice(1);return{layerId:t,fieldName:r}}function Pse(e,t){if(!t.relationships)return null;let r=null;const{relationships:i}=t;return i.some(s=>s.id===parseInt(e,10)&&(r=s,!0)),r}function Lse({originRelationship:e,relationships:t,layerId:r}){return t.find(({relatedTableId:i,id:s})=>`${i}`===r&&s===(e==null?void 0:e.id))??null}function Nse(e,t){const r=t.toLowerCase();for(const i in e)if(i.toLowerCase()===r)return e[i];return null}function Rse(e,t){const r=Pse(e,t);if(r)return{url:`${t.url}/${r.relatedTableId}`,sourceSpatialReference:t.spatialReference,relation:r,relatedFields:[],outStatistics:[]}}function jse(e,t){if(!t||!e)return;const{features:r,statsFeatures:i}=e,s=r==null?void 0:r.value;t.relatedFeatures=s?s.features:[];const n=i==null?void 0:i.value;t.relatedStatsFeatures=n?n.features:[]}function Dse(e,t,r,i){var n;const s=new yc;return s.outFields=["*"],s.relationshipId=typeof t.id=="number"?t.id:parseInt(t.id,10),s.objectIds=[e.attributes[r.objectIdField]],s.gdbVersion=r.gdbVersion??null,s.historicMoment=r.historicMoment??null,((n=r.queryRelatedFeatures)==null?void 0:n.call(r,s,i))??Promise.resolve({})}function Vse(e,t,r){let i=0;const s=[];for(;i<t.length;)s.push(`${e} IN (${t.slice(i,r+i)})`),i+=r;return s.join(" OR ")}function Use(e){return e?s$(e):void 0}function zse(e){return e?s$(e,(t,r)=>JSON.stringify(t.toJSON())===JSON.stringify(r.toJSON())):void 0}async function qse(e,t,r,i){const s=r.layerId.toString(),{layerInfo:n,relation:o,relatedFields:l,outStatistics:c,url:p,sourceSpatialReference:h}=t,f=Use(l),y=zse(c);if(!n||!o)return null;const m=Lse({originRelationship:o,relationships:n.relationships,layerId:s});if(m!=null&&m.relationshipTableId&&m.keyFieldInRelationshipTable){const b=(await Dse(e,m,r,i))[e.attributes[r.objectIdField]];if(!b)return null;const w=b.features.map(S=>S.attributes[n.objectIdField]);if(y!=null&&y.length&&n.supportsStatistics){const S=new ii;S.where=Vse(n.objectIdField,w,1e3),S.outFields=f,S.outStatistics=y,S.sourceSpatialReference=h;const x={features:Promise.resolve(b),statsFeatures:Av(p,S)};return Rs(x)}}const g=m==null?void 0:m.keyField;if(g){const b=Q$(Jse(n.fields,g)),w=Nse(e.attributes,o.keyField),S=b?`${g}=${w}`:`${g}='${w}'`,x=r.historicMoment,E=r.gdbVersion,C=Av(p,new ii({where:S,outFields:f,sourceSpatialReference:h,historicMoment:x,gdbVersion:E}),i),P=y!=null&&y.length&&n.supportsStatistics?Av(p,new ii({where:S,outFields:f,outStatistics:y,sourceSpatialReference:h}),i):null,L={features:C};return P&&(L.statsFeatures=P),Rs(L)}return null}function Gse(e,t){return Ge(e,{query:{f:"json"},signal:t==null?void 0:t.signal})}function Bse({relatedInfos:e,layer:t},r){const i={};return e.forEach((s,n)=>{const{relation:o}=s;if(!o){const f=new O("relation-required","A relation is required on a layer to retrieve related records.");throw V3().error(f),f}const{relatedTableId:l}=o;if(typeof l!="number"){const f=new O("A related table ID is required on a layer to retrieve related records.");throw V3().error(f),f}const c=`${t.url}/${l}`,p=U3.get(c),h=p??Gse(c);p||U3.set(c,h),i[n]=h}),dC(Rs(i),r)}function Wse({graphic:e,relatedInfos:t,layer:r},i){const s={};return t.forEach((n,o)=>{n.layerInfo&&(s[o]=qse(e,n,r,i))}),Rs(s)}function Hse({relatedInfo:e,fieldName:t,fieldInfo:r}){var i,s;if((i=e.relatedFields)==null||i.push(t),r.statisticType){const n=new _N({statisticType:r.statisticType,onStatisticField:t,outStatisticFieldName:t});(s=e.outStatistics)==null||s.push(n)}}function Jse(e,t){if(e!=null){t=t.toLowerCase();for(const r of e)if(r&&r.name.toLowerCase()===t)return r}return null}const z3={chartAnimation:!0};let xt=class extends $e{constructor(t){super(t),this.abilities={...z3},this.activeMediaInfoIndex=0,this.attributes=null,this.description=null,this.fieldInfoMap=null,this.formattedAttributes=null,this.expressionAttributes=null,this.isAggregate=!1,this.layer=null,this.mediaInfos=null,this.popupTemplate=null,this.relatedInfos=null,this.title=null}castAbilities(t){return{...z3,...t}}get activeMediaInfo(){return this.formattedMediaInfos[this.activeMediaInfoIndex]||null}get formattedMediaInfos(){return this._formatMediaInfos()||[]}get formattedMediaInfoCount(){return this.formattedMediaInfos.length}setActiveMedia(t){this._setContentElementMedia(t)}next(){this._pageContentElementMedia(1)}previous(){this._pageContentElementMedia(-1)}_setContentElementMedia(t){const{formattedMediaInfoCount:r}=this,i=(t+r)%r;this.activeMediaInfoIndex=i}_pageContentElementMedia(t){const{activeMediaInfoIndex:r}=this,i=r+t;this._setContentElementMedia(i)}_formatMediaInfos(){const{mediaInfos:t,layer:r}=this,i=this.attributes??{},s=this.formattedAttributes??{},n=this.expressionAttributes??{},o=this.fieldInfoMap??new Map;return(t==null?void 0:t.map(l=>{const c=l==null?void 0:l.clone();return c?(c.title=Ba({attributes:i,fieldInfoMap:o,globalAttributes:s,expressionAttributes:n,layer:r,text:c.title}),c.caption=Ba({attributes:i,fieldInfoMap:o,globalAttributes:s,expressionAttributes:n,layer:r,text:c.caption}),c.altText=Ba({attributes:i,fieldInfoMap:o,globalAttributes:s,expressionAttributes:n,layer:r,text:c.altText}),c.type==="image"?c.value?(this._setImageValue({value:c.value,formattedAttributes:s,layer:r}),c.value.sourceURL?c:void 0):void 0:c.type==="pie-chart"||c.type==="line-chart"||c.type==="column-chart"||c.type==="bar-chart"?c.value?(this._setChartValue({value:c.value,chartType:c.type,attributes:i,formattedAttributes:s,layer:r,expressionAttributes:n}),c):void 0:null):null}).filter(gl))??[]}_setImageValue(t){const r=this.fieldInfoMap??new Map,{value:i,formattedAttributes:s,layer:n}=t,{linkURL:o,sourceURL:l}=i;if(l){const c=J_(l,n);i.sourceURL=H_({formattedAttributes:s,template:c,fieldInfoMap:r})}if(o){const c=J_(o,n);i.linkURL=H_({formattedAttributes:s,template:c,fieldInfoMap:r})}}_setChartValue(t){const{value:r,attributes:i,formattedAttributes:s,chartType:n,layer:o,expressionAttributes:l}=t,{popupTemplate:c,relatedInfos:p}=this,{fields:h,normalizeField:f}=r,y=o;if(r.fields=Vre(h,y),f&&(r.normalizeField=th(f,y)),!h.some(g=>!!(s[g]!=null||vn(g)&&(p!=null&&p.size))))return;const m=(c==null?void 0:c.fieldInfos)??[];h.forEach((g,b)=>{var x;const w=(x=r.colors)==null?void 0:x[b];if(vn(g))return void(r.series=[...r.series,...this._getRelatedChartInfos({fieldInfos:m,fieldName:g,formattedAttributes:s,chartType:n,value:r,color:w})]);const S=this._getChartOption({value:r,attributes:i,chartType:n,formattedAttributes:s,expressionAttributes:l,fieldName:g,fieldInfos:m,color:w});r.series.push(S)})}_getRelatedChartInfos(t){var g;const{fieldInfos:r,fieldName:i,formattedAttributes:s,chartType:n,value:o,color:l}=t,c=[],p=Gy(i),h=p&&((g=this.relatedInfos)==null?void 0:g.get(p.layerId.toString()));if(!h)return c;const{relatedFeatures:f,relation:y}=h;if(!y||!f)return c;const{cardinality:m}=y;return f.forEach(b=>{const{attributes:w}=b;w&&Object.keys(w).forEach(S=>{S===p.fieldName&&c.push(this._getChartOption({value:o,attributes:w,formattedAttributes:s,fieldName:i,chartType:n,relatedFieldName:S,hasMultipleRelatedFeatures:(f==null?void 0:f.length)>1,fieldInfos:r,color:l}))})}),m==="one-to-many"||m==="many-to-many"?c:[c[0]]}_getTooltip({label:t,value:r,chartType:i}){return i==="pie-chart"?`${t}`:`${t}: ${r}`}_getChartOption(t){var V;const{value:r,attributes:i,formattedAttributes:s,expressionAttributes:n,fieldName:o,relatedFieldName:l,fieldInfos:c,chartType:p,hasMultipleRelatedFeatures:h,color:f}=t,y=this.layer,m=this.fieldInfoMap??new Map,{normalizeField:g,tooltipField:b}=r,w=g?vn(g)?i[Gy(g).fieldName]:i[g]:null,S=$2(o)&&n&&n[o]!==void 0?n[o]:l&&i[l]!==void 0?i[l]:i[o]!==void 0?i[o]:s[o],x=new Ak({fieldName:o,color:f,value:S===void 0?null:S&&w?S/w:S});if(vn(o)){const q=m.get(o.toLowerCase()),H=b&&m.get(b.toLowerCase()),Y=(q==null?void 0:q.fieldName)??o,se=h&&b?Gy(b).fieldName:(H==null?void 0:H.fieldName)??b,de=h&&se?i[se]:s[se]??(q==null?void 0:q.label)??(q==null?void 0:q.fieldName)??l,De=h&&l?i[l]:s[Y];return x.tooltip=this._getTooltip({label:de,value:De,chartType:p}),x}const E=h5(c,o),C=th(o,y),P=b&&s[b]!==void 0?s[b]:u5(E||new Mc({fieldName:C}),(V=this.popupTemplate)==null?void 0:V.expressionInfos),L=s[C];return x.tooltip=this._getTooltip({label:P,value:L,chartType:p}),x}};a([u()],xt.prototype,"abilities",void 0),a([Ce("abilities")],xt.prototype,"castAbilities",null),a([u()],xt.prototype,"activeMediaInfoIndex",void 0),a([u({readOnly:!0})],xt.prototype,"activeMediaInfo",null),a([u()],xt.prototype,"attributes",void 0),a([u()],xt.prototype,"description",void 0),a([u()],xt.prototype,"fieldInfoMap",void 0),a([u()],xt.prototype,"formattedAttributes",void 0),a([u()],xt.prototype,"expressionAttributes",void 0),a([u({readOnly:!0})],xt.prototype,"formattedMediaInfos",null),a([u()],xt.prototype,"isAggregate",void 0),a([u()],xt.prototype,"layer",void 0),a([u({readOnly:!0})],xt.prototype,"formattedMediaInfoCount",null),a([u()],xt.prototype,"mediaInfos",void 0),a([u()],xt.prototype,"popupTemplate",void 0),a([u()],xt.prototype,"relatedInfos",void 0),a([u()],xt.prototype,"title",void 0),xt=a([_("esri.widgets.Feature.FeatureMedia.FeatureMediaViewModel")],xt);const Ha=xt,vt="esri-feature-media",hr={base:vt,mediaContainer:`${vt}__container`,mediaItemContainer:`${vt}__item-container`,mediaItem:`${vt}__item`,mediaItemText:`${vt}__item-text`,mediaItemTitle:`${vt}__item-title`,mediaItemCaption:`${vt}__item-caption`,mediaNavigation:`${vt}__item-navigation`,mediaPagination:`${vt}__pagination`,mediaPaginationText:`${vt}__pagination-text`,mediaPrevious:`${vt}__previous`,mediaPreviousIconLTR:`${vt}__previous-icon`,mediaPreviousIconRTL:`${vt}__previous-icon--rtl`,mediaNext:`${vt}__next`,mediaNextIconLTR:`${vt}__next-icon`,mediaNextIconRTL:`${vt}__next-icon--rtl`,mediaChart:`${vt}__chart`,mediaPaginationButton:`${vt}__pagination-button`,mediaPaginationIcon:`${vt}__pagination-icon`,mediaChartRendered:`${vt}__chart--rendered`},Cv=15,zn="category",od="value",Zse="rgba(50, 50, 50, 1)",Yse=250,Qse=500,Kse=200;let mr=class extends _r{constructor(t,r){super(t,r),this._refreshTimer=null,this._refreshIntervalInfo=null,this._featureElementInfo=null,this._chartRootMap=new WeakMap,this.viewModel=new Ha,this.messages=null,this._disposeChart=i=>{var s;(s=this._chartRootMap.get(i))==null||s.dispose(),this._chartRootMap.delete(i)},this._createChart=async i=>{const{destroyed:s,viewModel:n}=this;if(s||!n||!i)return;const{createRoot:o}=await j(()=>import("./chartUtilsAm5-BwdWpuer.js"),__vite__mapDeps([133,134,135,136])),l=await o(i);this._chartRootMap.set(i,l),this._renderChart({mediaInfo:n.activeMediaInfo,root:l})}}initialize(){this._featureElementInfo=new Nh,this.addHandles([W(()=>{var t,r;return[(t=this.viewModel)==null?void 0:t.activeMediaInfo,(r=this.viewModel)==null?void 0:r.activeMediaInfoIndex]},()=>this._setupMediaRefreshTimer(),Ae),W(()=>{var t,r;return[(t=this.viewModel)==null?void 0:t.description,(r=this.viewModel)==null?void 0:r.title]},()=>this._setupFeatureElementInfo(),Ae)])}loadDependencies(){return On({icon:()=>j(()=>import("./calcite-icon-z5p-Wr8S.js"),__vite__mapDeps([129,130,131,132]))})}destroy(){var t;this._clearMediaRefreshTimer(),(t=this._featureElementInfo)==null||t.destroy()}get attributes(){return this.viewModel.attributes}set attributes(t){this.viewModel.attributes=t}get activeMediaInfoIndex(){return this.viewModel.activeMediaInfoIndex}set activeMediaInfoIndex(t){this.viewModel.activeMediaInfoIndex=t}get description(){return this.viewModel.description}set description(t){this.viewModel.description=t}get fieldInfoMap(){return this.viewModel.fieldInfoMap}set fieldInfoMap(t){this.viewModel.fieldInfoMap=t}get layer(){return this.viewModel.layer}set layer(t){this.viewModel.layer=t}get mediaInfos(){return this.viewModel.mediaInfos}set mediaInfos(t){this.viewModel.mediaInfos=t}get popupTemplate(){return this.viewModel.popupTemplate}set popupTemplate(t){this.viewModel.popupTemplate=t}get relatedInfos(){return this.viewModel.relatedInfos}set relatedInfos(t){this.viewModel.relatedInfos=t}get title(){return this.viewModel.title}set title(t){this.viewModel.title=t}render(){var t;return T("div",{bind:this,class:hr.base,onkeyup:this._handleMediaKeyup},(t=this._featureElementInfo)==null?void 0:t.render(),this._renderMedia())}_renderMedia(){const{formattedMediaInfoCount:t,activeMediaInfoIndex:r}=this.viewModel,i=this._renderMediaText();return t?T("div",{class:hr.mediaContainer,key:"media-element-container"},this._renderMediaInfo(),T("div",{class:hr.mediaNavigation},i,t>1?T("div",{class:hr.mediaPagination},this._renderMediaPageButton("previous"),T("span",{class:hr.mediaPaginationText},bi(this.messages.pageText,{index:r+1,total:t})),this._renderMediaPageButton("next")):null)):null}_renderMediaText(){const{activeMediaInfo:t}=this.viewModel;if(!t)return null;const r=t&&t.title?T("div",{class:hr.mediaItemTitle,innerHTML:t.title,key:"media-title"}):null,i=t&&t.caption?T("div",{class:hr.mediaItemCaption,innerHTML:t.caption,key:"media-caption"}):null;return r||i?T("div",{class:hr.mediaItemText,key:"media-text"},r,i):null}_renderImageMediaInfo(t){if(!t.value)return null;const{_refreshIntervalInfo:r}=this,{activeMediaInfoIndex:i,formattedMediaInfoCount:s}=this.viewModel,{value:n,refreshInterval:o,altText:l,title:c,type:p}=t,{sourceURL:h,linkURL:f}=n,y=l5(f??void 0)?"_blank":"_self",m=y==="_blank"?"noreferrer":"",g=o?r:null,b=g?g.timestamp:0,w=g?g.sourceURL:h,S=T("img",{alt:l||c,key:`media-${p}-${i}-${s}-${b}`,src:w??void 0});return(f?T("a",{href:f,rel:m,target:y,title:c},S):null)??S}_renderChartMediaInfo(t){const{activeMediaInfoIndex:r,formattedMediaInfoCount:i}=this.viewModel;return T("div",{afterCreate:this._createChart,afterRemoved:this._disposeChart,bind:this,class:hr.mediaChart,key:`media-${t.type}-${r}-${i}`})}_renderMediaInfoType(){const{activeMediaInfo:t}=this.viewModel;return t?t.type==="image"?this._renderImageMediaInfo(t):t.type.includes("chart")?this._renderChartMediaInfo(t):null:null}_renderMediaInfo(){const{activeMediaInfo:t}=this.viewModel;return t?T("div",{class:hr.mediaItemContainer,key:"media-container"},T("div",{class:hr.mediaItem,key:"media-item-container"},this._renderMediaInfoType())):null}_renderMediaPageButton(t){if(this.viewModel.formattedMediaInfoCount<2)return null;const r=t==="previous",i=r?this.messages.previous:this.messages.next,s=r?"chevron-left":"chevron-right",n=r?"media-previous":"media-next",o=r?this._previous:this._next;return T("button",{"aria-label":i,bind:this,class:hr.mediaPaginationButton,key:n,onclick:o,tabIndex:0,title:i,type:"button"},T("calcite-icon",{class:hr.mediaPaginationIcon,icon:s,scale:"s"}))}_setupFeatureElementInfo(){var i;const{description:t,title:r}=this;(i=this._featureElementInfo)==null||i.set({description:t,title:r})}_next(){this.viewModel.next()}_previous(){this.viewModel.previous()}_getRenderer(){if(!this.viewModel)return;const{isAggregate:t,layer:r}=this.viewModel;return t&&(r!=null&&r.featureReduction)&&"renderer"in r.featureReduction?r.featureReduction.renderer:r==null?void 0:r.renderer}async _getSeriesColors(t){const{colorAm5:r}=await j(()=>import("./chartCommon-CCA65vag.js"),__vite__mapDeps([137,134,138,135,139])),i=new Map;return t.forEach(s=>{s.color&&i.set(s,r(s.color.toCss(!0)))}),i}async _getRendererColors(){const{colorAm5:t}=await j(()=>import("./chartCommon-CCA65vag.js"),__vite__mapDeps([137,134,138,135,139])),r=new Map,i=this._getRenderer(),s="default";if(!i)return r;const n=await Jie(i);return n.delete(s),Array.from(n.values()).every(o=>(o==null?void 0:o.length)===1)&&Array.from(n.keys()).forEach(o=>{var c,p;const l=(p=(c=n.get(o))==null?void 0:c[0])==null?void 0:p.toCss(!0);l&&r.set(o,t(l))}),r}_handleMediaKeyup(t){const{key:r}=t;r==="ArrowLeft"&&(t.stopPropagation(),this.viewModel.previous()),r==="ArrowRight"&&(t.stopPropagation(),this.viewModel.next())}_canAnimateChart(){return!!this.viewModel&&!!this.viewModel.abilities.chartAnimation&&!_ie()}_getChartAnimationMS(){return this._canAnimateChart()?Yse:0}_getChartSeriesAnimationMS(){return this._canAnimateChart()?Qse:0}async _renderChart(t){const{root:r,mediaInfo:i}=t,{value:s,type:n}=i,{ResponsiveThemeAm5:o,DarkThemeAm5:l,AnimatedThemeAm5:c,ColorSetAm5:p,ThemeAm5:h,esriChartColorSet:f}=await j(async()=>{const{ResponsiveThemeAm5:C,DarkThemeAm5:P,AnimatedThemeAm5:L,ColorSetAm5:V,ThemeAm5:q,esriChartColorSet:H}=await import("./chartCommon-CCA65vag.js");return{ResponsiveThemeAm5:C,DarkThemeAm5:P,AnimatedThemeAm5:L,ColorSetAm5:V,ThemeAm5:q,esriChartColorSet:H}},__vite__mapDeps([137,134,138,135,139])),y=h.new(r);y.rule("ColorSet").set("colors",f),y.rule("ColorSet").set("reuse",!0);const m=[o.new(r),y];_5()&&m.push(l.new(r)),this._canAnimateChart()&&m.push(c.new(r)),r.setThemes(m);const g=await this._getRendererColors(),b=await this._getSeriesColors(s.series),w=p.new(r,{}),S=b.get(s.series[0]),x=S?{lineSettings:{stroke:S}}:void 0,E=s.series.map((C,P)=>{const L=b.get(C)||g.get(C.fieldName)||w.getIndex(P);return{[zn]:C.tooltip,[od]:C.value,columnSettings:{fill:L,stroke:L},...x}}).filter(C=>n!=="pie-chart"||C.value!=null&&C.value>0);n==="pie-chart"?this._createPieChart(t,E):this._createXYChart(t,E)}_getDirection(){return gn(this.container)?"rtl":"ltr"}async _customizeChartTooltip(t,r="horizontal"){var s;const{colorAm5:i}=await j(()=>import("./chartCommon-CCA65vag.js"),__vite__mapDeps([137,134,138,135,139]));t.setAll({pointerOrientation:r}),(s=t.get("background"))==null||s.setAll({stroke:i(Zse)}),t.label.setAll({direction:this._getDirection(),oversizedBehavior:"wrap",maxWidth:Kse})}async _createPieChart(t,r){const{TooltipAm5:i}=await j(()=>import("./chartCommon-CCA65vag.js"),__vite__mapDeps([137,134,138,135,139])),{PieChartAm5:s,PieSeriesAm5:n}=await j(async()=>{const{PieChartAm5:b,PieSeriesAm5:w}=await import("./pieChart-_rh-VWTv.js");return{PieChartAm5:b,PieSeriesAm5:w}},__vite__mapDeps([140,141,134,139,136])),{mediaInfo:o,root:l}=t,{title:c}=o,p=5,h=(o==null?void 0:o.altText)||(o==null?void 0:o.title)||"",f=l.container.children.push(s.new(l,{ariaLabel:h,focusable:!0,paddingBottom:p,paddingTop:p,paddingLeft:p,paddingRight:p})),y=`{category}: {valuePercentTotal.formatNumber('0.00')}%
 ({value})`,m=i.new(l,{labelText:y}),g=f.series.push(n.new(l,{name:c,valueField:od,categoryField:zn,tooltip:m}));g.ticks.template.set("forceHidden",!0),g.labels.template.set("forceHidden",!0),g.slices.template.states.create("active",{shiftRadius:p}),this._customizeChartTooltip(m),g.slices.template.setAll({ariaLabel:y,focusable:!0,templateField:"columnSettings"}),g.data.setAll(r),g.appear(this._getChartSeriesAnimationMS()),f.appear(this._getChartAnimationMS()),f.root.dom.classList.toggle(hr.mediaChartRendered,!0)}_getMinSeriesValue(t){let r=0;return t.forEach(i=>r=Math.min(i.value,r)),r}async _createColumnChart(t,r,i){const{TooltipAm5:s,ScrollbarAm5:n}=await j(()=>import("./chartCommon-CCA65vag.js"),__vite__mapDeps([137,134,138,135,139])),{CategoryAxisAm5:o,AxisRendererXAm5:l,ValueAxisAm5:c,AxisRendererYAm5:p,ColumnSeriesAm5:h}=await j(async()=>{const{CategoryAxisAm5:C,AxisRendererXAm5:P,ValueAxisAm5:L,AxisRendererYAm5:V,ColumnSeriesAm5:q}=await import("./xyChart-C3qE8iws.js");return{CategoryAxisAm5:C,AxisRendererXAm5:P,ValueAxisAm5:L,AxisRendererYAm5:V,ColumnSeriesAm5:q}},__vite__mapDeps([142,134,139,136,141,138])),{mediaInfo:f,root:y}=r,{value:m,title:g}=f;t.setAll({wheelX:"panX",wheelY:"zoomX"});const b=t.xAxes.push(o.new(y,{renderer:l.new(y,{inversed:gn(this.container)}),categoryField:zn}));b.get("renderer").labels.template.setAll({forceHidden:!0});const w=t.yAxes.push(c.new(y,{renderer:p.new(y,{inside:!1}),min:this._getMinSeriesValue(m.series)}));w.get("renderer").labels.template.setAll({direction:this._getDirection()});const S="{categoryX}",x=s.new(y,{labelText:S}),E=t.series.push(h.new(y,{name:g,xAxis:b,yAxis:w,valueYField:od,categoryXField:zn,tooltip:x}));this._customizeChartTooltip(x),E.columns.template.setAll({ariaLabel:S,focusable:!0,templateField:"columnSettings"}),m.series.length>Cv&&t.set("scrollbarX",n.new(y,{orientation:"horizontal"})),b.data.setAll(i),E.data.setAll(i),E.appear(this._getChartSeriesAnimationMS()),t.appear(this._getChartAnimationMS())}async _createBarChart(t,r,i){const{TooltipAm5:s,ScrollbarAm5:n}=await j(()=>import("./chartCommon-CCA65vag.js"),__vite__mapDeps([137,134,138,135,139])),{CategoryAxisAm5:o,AxisRendererXAm5:l,ValueAxisAm5:c,AxisRendererYAm5:p,ColumnSeriesAm5:h}=await j(async()=>{const{CategoryAxisAm5:C,AxisRendererXAm5:P,ValueAxisAm5:L,AxisRendererYAm5:V,ColumnSeriesAm5:q}=await import("./xyChart-C3qE8iws.js");return{CategoryAxisAm5:C,AxisRendererXAm5:P,ValueAxisAm5:L,AxisRendererYAm5:V,ColumnSeriesAm5:q}},__vite__mapDeps([142,134,139,136,141,138])),{mediaInfo:f,root:y}=r,{value:m,title:g}=f;t.setAll({wheelX:"panY",wheelY:"zoomY"});const b=t.yAxes.push(o.new(y,{renderer:p.new(y,{inversed:!0}),categoryField:zn}));b.get("renderer").labels.template.setAll({forceHidden:!0});const w=t.xAxes.push(c.new(y,{renderer:l.new(y,{inside:!1,inversed:gn(this.container)}),min:this._getMinSeriesValue(m.series)}));w.get("renderer").labels.template.setAll({direction:this._getDirection()});const S="{categoryY}",x=s.new(y,{labelText:S}),E=t.series.push(h.new(y,{name:g,xAxis:w,yAxis:b,valueXField:od,categoryYField:zn,tooltip:x}));this._customizeChartTooltip(x,"vertical"),E.columns.template.setAll({ariaLabel:S,focusable:!0,templateField:"columnSettings"}),m.series.length>Cv&&t.set("scrollbarY",n.new(y,{orientation:"vertical"})),b.data.setAll(i),E.data.setAll(i),E.appear(this._getChartSeriesAnimationMS()),t.appear(this._getChartAnimationMS())}async _createLineChart(t,r,i){var P,L,V;const{TooltipAm5:s,ScrollbarAm5:n}=await j(()=>import("./chartCommon-CCA65vag.js"),__vite__mapDeps([137,134,138,135,139])),{CategoryAxisAm5:o,AxisRendererXAm5:l,ValueAxisAm5:c,AxisRendererYAm5:p,LineSeriesAm5:h}=await j(async()=>{const{CategoryAxisAm5:q,AxisRendererXAm5:H,ValueAxisAm5:Y,AxisRendererYAm5:se,LineSeriesAm5:de}=await import("./xyChart-C3qE8iws.js");return{CategoryAxisAm5:q,AxisRendererXAm5:H,ValueAxisAm5:Y,AxisRendererYAm5:se,LineSeriesAm5:de}},__vite__mapDeps([142,134,139,136,141,138])),{root:f,mediaInfo:y}=r,{value:m,title:g}=y;t.setAll({wheelX:"panX",wheelY:"zoomX"});const b=t.xAxes.push(o.new(f,{renderer:l.new(f,{inversed:gn(this.container)}),categoryField:zn}));b.get("renderer").labels.template.setAll({forceHidden:!0});const w=t.yAxes.push(c.new(f,{renderer:p.new(f,{inside:!1}),min:this._getMinSeriesValue(m.series)}));w.get("renderer").labels.template.setAll({direction:this._getDirection()});const S="{categoryX}",x=(L=(P=i[0])==null?void 0:P.lineSettings)==null?void 0:L.stroke,E=s.new(f,{getFillFromSprite:!x,labelText:S});x&&((V=E.get("background"))==null||V.setAll({fill:x}));const C=t.series.push(h.new(f,{name:g,xAxis:b,yAxis:w,valueYField:od,categoryXField:zn,tooltip:E}));C.strokes.template.setAll({templateField:"lineSettings"}),this._customizeChartTooltip(E,"vertical"),m.series.length>Cv&&t.set("scrollbarX",n.new(f,{orientation:"horizontal"})),b.data.setAll(i),C.data.setAll(i),C.appear(this._getChartSeriesAnimationMS()),t.appear(this._getChartAnimationMS())}async _createXYChart(t,r){const{XYChartAm5:i,XYCursorAm5:s}=await j(()=>import("./xyChart-C3qE8iws.js"),__vite__mapDeps([142,134,139,136,141,138])),{root:n,mediaInfo:o}=t,{type:l}=o,c=(o==null?void 0:o.altText)||(o==null?void 0:o.title)||"",p=n.container.children.push(i.new(n,{ariaLabel:c,focusable:!0,panX:!0,panY:!0}));p.set("cursor",s.new(n,{})),l==="column-chart"&&await this._createColumnChart(p,t,r),l==="bar-chart"&&await this._createBarChart(p,t,r),l==="line-chart"&&await this._createLineChart(p,t,r),p.root.dom.classList.toggle(hr.mediaChartRendered,!0)}_clearMediaRefreshTimer(){const{_refreshTimer:t}=this;t&&(clearTimeout(t),this._refreshTimer=null)}_updateMediaInfoTimestamp(t){const r=Date.now();this._refreshIntervalInfo={timestamp:r,sourceURL:t&&this._getImageSource(t,r)}}_setupMediaRefreshTimer(){this._clearMediaRefreshTimer();const{activeMediaInfo:t}=this.viewModel;(t==null?void 0:t.type)==="image"&&(t==null?void 0:t.refreshInterval)>0&&this._setRefreshTimeout(t)}_setRefreshTimeout(t){const{refreshInterval:r,value:i}=t,s=6e4*r;this._updateMediaInfoTimestamp(i.sourceURL);const n=setInterval(()=>{this._updateMediaInfoTimestamp(i.sourceURL)},s);this._refreshTimer=n}_getImageSource(t,r){const i=t.includes("?")?"&":"?",[s,n=""]=t.split("#");return`${s}${i}timestamp=${r}${n?"#":""}${n}`}};a([u()],mr.prototype,"_refreshIntervalInfo",void 0),a([u()],mr.prototype,"attributes",null),a([u()],mr.prototype,"activeMediaInfoIndex",null),a([u()],mr.prototype,"description",null),a([u()],mr.prototype,"fieldInfoMap",null),a([u()],mr.prototype,"layer",null),a([u()],mr.prototype,"mediaInfos",null),a([u()],mr.prototype,"popupTemplate",null),a([u()],mr.prototype,"relatedInfos",null),a([u()],mr.prototype,"title",null),a([u({type:Ha})],mr.prototype,"viewModel",void 0),a([u(),Qt("esri/widgets/Feature/t9n/Feature")],mr.prototype,"messages",void 0),mr=a([_("esri.widgets.Feature.FeatureMedia")],mr);const k5=mr;var eg;(function(e){e.TimeZoneNotRecognized="TimeZoneNotRecognized"})(eg||(eg={}));const Xse={[eg.TimeZoneNotRecognized]:"Timezone identifier has not been recognized."};let ene=class P5 extends Error{constructor(t,r){super(ns(Xse[t],r)),this.declaredRootClass="esri.arcade.arcadedate.dateerror",Error.captureStackTrace&&Error.captureStackTrace(this,P5)}};function jl(e,t,r){return e<t?e-t:e>r?e-r:0}function Dl(e,t,r){return e<t?t:e>r?r:e}let K_=class gt{constructor(t){this._date=t,this.declaredRootClass="esri.arcade.arcadedate"}static fromParts(t=0,r=1,i=1,s=0,n=0,o=0,l=0,c){if(isNaN(t)||isNaN(r)||isNaN(i)||isNaN(s)||isNaN(n)||isNaN(o)||isNaN(l))return null;const p=Z.local(t,r).daysInMonth;let h=Z.fromObject({day:Dl(i,1,p),year:t,month:Dl(r,1,12),hour:Dl(s,0,23),minute:Dl(n,0,59),second:Dl(o,0,59),millisecond:Dl(l,0,999)},{zone:Cs(c)});return h=h.plus({months:jl(r,1,12),days:jl(i,1,p),hours:jl(s,0,23),minutes:jl(n,0,59),seconds:jl(o,0,59),milliseconds:jl(l,0,999)}),new gt(h)}static get systemTimeZoneCanonicalName(){return Intl.DateTimeFormat().resolvedOptions().timeZone??"system"}static arcadeDateAndZoneToArcadeDate(t,r){const i=Cs(r);return t.isUnknownTimeZone||i===Ki.instance?gt.fromParts(t.year,t.monthJS+1,t.day,t.hour,t.minute,t.second,t.millisecond,i):new gt(t._date.setZone(i))}static dateJSToArcadeDate(t){return new gt(Z.fromJSDate(t,{zone:"system"}))}static dateJSAndZoneToArcadeDate(t,r="system"){const i=Cs(r);return new gt(Z.fromJSDate(t,{zone:i}))}static unknownEpochToArcadeDate(t){return new gt(Z.fromMillis(t,{zone:Ki.instance}))}static unknownDateJSToArcadeDate(t){return new gt(Z.fromMillis(t.getTime(),{zone:Ki.instance}))}static epochToArcadeDate(t,r="system"){const i=Cs(r);return new gt(Z.fromMillis(t,{zone:i}))}static dateTimeToArcadeDate(t){return new gt(t)}clone(){return new gt(this._date)}changeTimeZone(t){const r=Cs(t);return gt.dateTimeToArcadeDate(this._date.setZone(r))}static dateTimeAndZoneToArcadeDate(t,r){const i=Cs(r);return t.zone===Ki.instance||i===Ki.instance?gt.fromParts(t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond,i):new gt(t.setZone(i))}static nowToArcadeDate(t){const r=Cs(t);return new gt(Z.fromJSDate(new Date,{zone:r}))}static nowUTCToArcadeDate(){return new gt(Z.utc())}get isSystem(){return this.timeZone==="system"||this.timeZone===gt.systemTimeZoneCanonicalName}equals(t){return this.isSystem&&t.isSystem?this.toNumber()===t.toNumber():this.isUnknownTimeZone===t.isUnknownTimeZone&&this._date.equals(t._date)}get isUnknownTimeZone(){return this._date.zone===Ki.instance}get isValid(){return this._date.isValid}get hour(){return this._date.hour}get second(){return this._date.second}get day(){return this._date.day}get dayOfWeekISO(){return this._date.weekday}get dayOfWeekJS(){let t=this._date.weekday;return t>6&&(t=0),t}get millisecond(){return this._date.millisecond}get monthISO(){return this._date.month}get weekISO(){return this._date.weekNumber}get yearISO(){return this._date.weekYear}get monthJS(){return this._date.month-1}get year(){return this._date.year}get minute(){return this._date.minute}get zone(){return this._date.zone}get timeZoneOffset(){return this.isUnknownTimeZone?0:this._date.offset}get timeZone(){if(this.isUnknownTimeZone)return"unknown";if(this._date.zone.type==="system")return"system";const t=this.zone;return t.type==="fixed"?t.fixed===0?"UTC":t.formatOffset(0,"short"):t.name}stringify(){return JSON.stringify(this.toJSDate())}plus(t){return new gt(this._date.plus(t))}diff(t,r="milliseconds"){return this._date.diff(t._date,r)[r]}toISODate(){return this._date.toISODate()}toISOString(t){return t?this._date.toISO({suppressMilliseconds:!0,includeOffset:!this.isUnknownTimeZone}):this._date.toISO({includeOffset:!this.isUnknownTimeZone})}toISOTime(t,r){return this._date.toISOTime({suppressMilliseconds:t,includeOffset:r&&!this.isUnknownTimeZone})}toFormat(t,r){return this.isUnknownTimeZone&&(t=t.replaceAll("Z","")),this._date.toFormat(t,r)}toJSDate(){return this._date.toJSDate()}toSQLValue(){return this._date.toFormat("yyyy-LL-dd HH:mm:ss")}toSQLWithKeyword(){return`timestamp '${this.toSQLValue()}'`}toDateTime(){return this._date}toNumber(){return this._date.toMillis()}getTime(){return this._date.toMillis()}toUTC(){return new gt(this._date.toUTC())}toLocal(){return new gt(this._date.toLocal())}toString(){return this.toISOString(!0)}static fromReaderAsTimeStampOffset(t){if(!t)return null;const r=Z.fromISO(t,{setZone:!0});return new gt(r)}};function Cs(e,t=!0){if(e instanceof bl)return e;if(e.toLowerCase()==="system")return"system";if(e.toLowerCase()==="utc")return"UTC";if(e.toLowerCase()==="unknown")return Ki.instance;if(/^[+-]?[0-9]{1,2}([:][0-9]{2})?$/.test(e)){const i=Tt.parseSpecifier("UTC"+(e.startsWith("+")||e.startsWith("-")?"":"+")+e);if(i)return i}const r=Dr.create(e);if(!r.isValid){if(t)throw new ene(eg.TimeZoneNotRecognized);return null}return r}function q3(e){e=e.replaceAll(/LTS|LT|L{1,4}|l{1,4}/g,"[$&]");let t="";const r=/(\[[^[]*\])|(\\)?([Hh]mm(ss)?|Mo|M{1,4}|Do|DDDo|D{1,4}|d{2,4}|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;for(const i of e.match(r)||[])switch(i){case"D":t+="d";break;case"DD":t+="dd";break;case"DDD":t+="o";break;case"d":t+="c";break;case"ddd":t+="ccc";break;case"dddd":t+="cccc";break;case"M":t+="L";break;case"MM":t+="LL";break;case"MMM":t+="LLL";break;case"MMMM":t+="LLLL";break;case"YY":t+="yy";break;case"Y":case"YYYY":t+="yyyy";break;case"Q":t+="q";break;case"X":case"x":t+=i;break;default:i.length>=2&&i.slice(0,1)==="["&&i.slice(-1)==="]"?t+=`'${i.slice(1,-1)}'`:t+=`'${i}'`}return t}let tne=class Zr{constructor(t,r,i){this._year=t,this._month=r,this._day=i,this.declaredRootClass="esri.core.sql.dateonly"}get month(){return this._month}get monthJS(){return this._month-1}get year(){return this._year}get day(){return this._day}get isValid(){return this.toDateTime("unknown").isValid}equals(t){return t instanceof Zr&&t.day===this.day&&t.month===this.month&&t.year===this.year}clone(){return new Zr(this._year,this._month,this._day)}toDateTime(t){return Z.fromObject({day:this.day,month:this.month,year:this.year},{zone:Cs(t)})}toDateTimeLuxon(t){return Z.fromObject({day:this.day,month:this.month,year:this.year},{zone:Cs(t)})}toString(){return`${this.year.toString().padStart(4,"0")}-${this.month.toString().padStart(2,"0")}-${this.day.toString().padStart(2,"0")}`}toFormat(t=null,r=!0){if(t===null||t==="")return this.toString();if(r&&(t=q3(t)),!t)return"";const i=this.toDateTime("unknown");return K_.dateTimeToArcadeDate(i).toFormat(t,{locale:Nr(),numberingSystem:"latn"})}toArcadeDate(){const t=this.toDateTime("unknown");return K_.dateTimeToArcadeDate(t)}toNumber(){return this.toDateTime("unknown").toMillis()}toJSDate(){return this.toDateTime("unknown").toJSDate()}toStorageFormat(){return this.toFormat("yyyy-LL-dd",!1)}toSQLValue(){return this.toFormat("yyyy-LL-dd",!1)}toSQLWithKeyword(){return"date '"+this.toFormat("yyyy-LL-dd",!1)+"'"}plus(t,r){return Zr.fromDateTime(this.toUTCDateTime().plus({[t]:r}))}toUTCDateTime(){return Z.utc(this.year,this.month,this.day,0,0,0,0)}difference(t,r){switch(r.toLowerCase()){case"days":case"day":case"d":return this.toUTCDateTime().diff(t.toUTCDateTime(),"days").days;case"months":case"month":return this.toUTCDateTime().diff(t.toUTCDateTime(),"months").months;case"minutes":case"minute":case"m":return r==="M"?this.toUTCDateTime().diff(t.toUTCDateTime(),"months").months:this.toUTCDateTime().diff(t.toUTCDateTime(),"minutes").minutes;case"seconds":case"second":case"s":return this.toUTCDateTime().diff(t.toUTCDateTime(),"seconds").seconds;case"milliseconds":case"millisecond":case"ms":default:return this.toUTCDateTime().diff(t.toUTCDateTime(),"milliseconds").milliseconds;case"hours":case"hour":case"h":return this.toUTCDateTime().diff(t.toUTCDateTime(),"hours").hours;case"years":case"year":case"y":return this.toUTCDateTime().diff(t.toUTCDateTime(),"years").years}}static fromMilliseconds(t){const r=Z.fromMillis(t,{zone:Tt.utcInstance});return r.isValid?Zr.fromParts(r.year,r.month,r.day):null}static fromSeconds(t){const r=Z.fromSeconds(t,{zone:Tt.utcInstance});return r.isValid?Zr.fromParts(r.year,r.month,r.day):null}static fromReader(t){if(!t)return null;const r=t.split("-");return r.length!==3?null:new Zr(parseInt(r[0],10),parseInt(r[1],10),parseInt(r[2],10))}static fromParts(t,r,i){const s=new Zr(t,r,i);return s.isValid===!1?null:s}static fromDateJS(t){return Zr.fromParts(t.getFullYear(),t.getMonth()+1,t.getDay())}static fromDateTime(t){return Zr.fromParts(t.year,t.month,t.day)}static fromSqlTimeStampOffset(t){return this.fromDateTime(t.toDateTime())}static fromString(t,r=null){if(t===""||t===null)return null;const i=[];if(r)(r=q3(r))&&i.push(r);else if(r===null||r===""){const s=Z.fromISO(t,{setZone:!0});return s.isValid?Zr.fromParts(s.year,s.month,s.day):null}for(const s of i){const n=Z.fromFormat(t,r??s);if(n.isValid)return new Zr(n.year,n.month,n.day)}return null}static fromNow(t="system"){const r=Z.fromJSDate(new Date).setZone(Cs(t));return new Zr(r.year,r.month,r.day)}};function ype(e){if(e==null)return null;if(typeof e=="number")return e;let t=e.toLowerCase();switch(t=t.replaceAll(/\s/g,""),t=t.replaceAll("-",""),t){case"meters":case"meter":case"m":case"squaremeters":case"squaremeter":return 109404;case"miles":case"mile":case"squaremile":case"squaremiles":return 109439;case"kilometers":case"kilometer":case"squarekilometers":case"squarekilometer":case"km":return 109414;case"acres":case"acre":case"ac":return 109402;case"hectares":case"hectare":case"ha":return 109401;case"yard":case"yd":case"yards":case"squareyards":case"squareyard":return 109442;case"feet":case"ft":case"foot":case"squarefeet":case"squarefoot":return 109405;case"nmi":case"nauticalmile":case"nauticalmiles":case"squarenauticalmile":case"squarenauticalmiles":return 109409}return null}function mpe(e){if(e==null)return null;switch(e.type){case"polygon":case"multipoint":case"polyline":return e.extent;case"point":return new it({xmin:e.x,ymin:e.y,xmax:e.x,ymax:e.y,spatialReference:e.spatialReference});case"extent":return e}return null}function gpe(e){if(e==null)return null;if(typeof e=="number")return e;let t=e.toLowerCase();switch(t=t.replaceAll(/\s/g,""),t=t.replaceAll("-",""),t){case"meters":case"meter":case"m":case"squaremeters":case"squaremeter":return 9001;case"miles":case"mile":case"squaremile":case"squaremiles":return 9093;case"kilometers":case"kilometer":case"squarekilometers":case"squarekilometer":case"km":return 9036;case"yard":case"yd":case"yards":case"squareyards":case"squareyard":return 9096;case"feet":case"ft":case"foot":case"squarefeet":case"squarefoot":return 9002;case"nmi":case"nauticalmile":case"nauticalmiles":case"squarenauticalmile":case"squarenauticalmiles":return 9030}return null}function vpe(e){if(e==null)return null;const t=e.clone();return e.cache._geVersion!==void 0&&(t.cache._geVersion=e.cache._geVersion),t}function Of(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e}function G3(e){if(!e)return"";const t=/(a|A|hh?|HH?|mm?|ss?|SSS|S|.)/g;let r="";for(const i of e.match(t)||[])switch(i){case"SSS":case"m":case"mm":case"h":case"hh":case"H":case"HH":case"s":case"ss":r+=i;break;case"A":case"a":r+="a";break;default:r+=`'${i}'`}return r}let rne=class xs{constructor(t,r,i,s){this._hour=t,this._minute=r,this._second=i,this._millisecond=s,this.declaredRootClass="esri.core.sql.timeonly"}get hour(){return this._hour}get minute(){return this._minute}get second(){return this._second}get millisecond(){return this._millisecond}equals(t){return t instanceof xs&&t.hour===this.hour&&t.minute===this.minute&&t.second===this.second&&t.millisecond===this.millisecond}clone(){return new xs(this.hour,this.minute,this.second,this.millisecond)}isValid(){return Of(this.hour)&&Of(this.minute)&&Of(this.second)&&Of(this.millisecond)&&this.hour>=0&&this.hour<24&&this.minute>=0&&this.minute<60&&this.second>=0&&this.second<60&&this.millisecond>=0&&this.millisecond<1e3}toString(){return`${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}`+(this.millisecond>0?"."+this.millisecond.toString().padStart(3,"0"):"")}toSQLValue(){return this.toString()}toSQLWithKeyword(){return`time '${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}${this.millisecond>0?"."+this.millisecond.toString().padStart(3,"0"):""}'`}toStorageString(){return`${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}`}toFormat(t=null){return t===null||t===""?this.toString():(t=G3(t))?Z.local(1970,1,1,this._hour,this._minute,this._second,this._millisecond).toFormat(t,{locale:Nr(),numberingSystem:"latn"}):""}toNumber(){return this.millisecond+1e3*this.second+1e3*this.minute*60+60*this.hour*60*1e3}static fromParts(t,r,i,s){const n=new xs(t,r,i,s);return n.isValid()?n:null}static fromReader(t){if(!t)return null;const r=t.split(":");return r.length!==3?null:new xs(parseInt(r[0],10),parseInt(r[1],10),parseInt(r[2],10),0)}static fromMilliseconds(t){if(t>864e5||t<0)return null;const r=Math.floor(t/1e3%60),i=Math.floor(t/6e4%60),s=Math.floor(t/36e5%24),n=Math.floor(t%1e3);return new xs(s,i,r,n)}static fromDateJS(t){return new xs(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds())}static fromDateTime(t){return new xs(t.hour,t.minute,t.second,t.millisecond)}static fromSqlTimeStampOffset(t){return this.fromDateTime(t.toDateTime())}static fromString(t,r=null){if(t===""||t===null)return null;const i=[];r?(r=G3(r))&&i.push(r):r!==null&&r!==""||(i.push("HH:mm:ss"),i.push("HH:mm:ss.SSS"),i.push("hh:mm:ss a"),i.push("hh:mm:ss.SSS a"),i.push("HH:mm"),i.push("hh:mm a"),i.push("H:mm"),i.push("h:mm a"),i.push("H:mm:ss"),i.push("h:mm:ss a"),i.push("H:mm:ss.SSS"),i.push("h:mm:ss.SSS a"));for(const s of i){const n=Z.fromFormat(t,s);if(n.isValid)return new xs(n.hour,n.minute,n.second,n.millisecond)}return null}plus(t,r){switch(t){case"days":case"years":case"months":return this.clone();case"hours":case"minutes":case"seconds":case"milliseconds":return xs.fromDateTime(this.toUTCDateTime().plus({[t]:r}))}return null}toUTCDateTime(){return Z.utc(1970,1,1,this.hour,this.minute,this.second,this.millisecond)}difference(t,r){switch(r.toLowerCase()){case"days":case"day":case"d":return this.toUTCDateTime().diff(t.toUTCDateTime(),"days").days;case"months":case"month":return this.toUTCDateTime().diff(t.toUTCDateTime(),"months").months;case"minutes":case"minute":case"m":return r==="M"?this.toUTCDateTime().diff(t.toUTCDateTime(),"months").months:this.toUTCDateTime().diff(t.toUTCDateTime(),"minutes").minutes;case"seconds":case"second":case"s":return this.toUTCDateTime().diff(t.toUTCDateTime(),"seconds").seconds;case"milliseconds":case"millisecond":case"ms":default:return this.toUTCDateTime().diff(t.toUTCDateTime(),"milliseconds").milliseconds;case"hours":case"hour":case"h":return this.toUTCDateTime().diff(t.toUTCDateTime(),"hours").hours;case"years":case"year":case"y":return this.toUTCDateTime().diff(t.toUTCDateTime(),"years").years}}};var B3,W3;function bpe(e){return Hg.fromJSON(e.toJSON())}function wpe(e){return e.toJSON?e.toJSON():e}function _pe(e){return e instanceof Date}function $pe(e){return e instanceof Z}function Spe(e){return e instanceof K_}function xpe(e){return e instanceof tne}function Ipe(e){return e instanceof rne}function Tpe(e){if(e==null)return null;if(typeof e=="number")return e;switch(e.toLowerCase()){case"meters":case"meter":return 109404;case"miles":case"mile":return 109439;case"kilometers":case"kilometer":case"km":return 109414}return null}function Mpe(e){if(e==null)return null;switch(e.type){case"polygon":case"multipoint":case"polyline":return e.extent;case"point":return new it({xmin:e.x,ymin:e.y,xmax:e.x,ymax:e.y,spatialReference:e.spatialReference});case"extent":return e}return null}function Epe(e){if(e==null)return null;if(typeof e=="number"||typeof e=="number")return e;switch(e.toLowerCase()){case"meters":case"meter":return 9001;case"miles":case"mile":return 9093;case"kilometers":case"kilometer":case"km":return 9036}return null}(function(e){e[e.Standardised=0]="Standardised",e[e.StandardisedNoInterval=1]="StandardisedNoInterval",e[e.SqlServer=2]="SqlServer",e[e.Oracle=3]="Oracle",e[e.Postgres=4]="Postgres",e[e.PGDB=5]="PGDB",e[e.FILEGDB=6]="FILEGDB",e[e.NotEvaluated=7]="NotEvaluated"})(B3||(B3={})),function(e){e[e.InFeatureSet=0]="InFeatureSet",e[e.NotInFeatureSet=1]="NotInFeatureSet",e[e.Unknown=2]="Unknown"}(W3||(W3={}));const Ape=1e3,Cpe={point:"point",polygon:"polygon",polyline:"polyline",multipoint:"multipoint",extent:"extent",esriGeometryPoint:"point",esriGeometryPolygon:"polygon",esriGeometryPolyline:"polyline",esriGeometryMultipoint:"multipoint",esriGeometryEnvelope:"extent",envelope:"extent"},Ope={point:"esriGeometryPoint",polygon:"esriGeometryPolygon",polyline:"esriGeometryPolyline",multipoint:"esriGeometryMultipoint",extent:"esriGeometryEnvelope",esriGeometryPoint:"esriGeometryPoint",esriGeometryPolygon:"esriGeometryPolygon",esriGeometryPolyline:"esriGeometryPolyline",esriGeometryMultipoint:"esriGeometryMultipoint",esriGeometryEnvelope:"esriGeometryEnvelope",envelope:"esriGeometryEnvelope"},Fpe={"small-integer":"esriFieldTypeSmallInteger",integer:"esriFieldTypeInteger",long:"esriFieldTypeLong",single:"esriFieldTypeSingle",double:"esriFieldTypeDouble",string:"esriFieldTypeString",date:"esriFieldTypeDate","date-only":"esriFieldTypeDateOnly","time-only":"esriFieldTypeTimeOnly","timestamp-offset":"esriFieldTypeTimestampOffset",oid:"esriFieldTypeOID",geometry:"esriFieldTypeGeometry",blob:"esriFieldTypeBlob",raster:"esriFieldTypeRaster",guid:"esriFieldTypeGUID","global-id":"esriFieldTypeGlobalID",xml:"esriFieldTypeXML","big-integer":"esriFieldTypeBigInteger",esriFieldTypeSmallInteger:"esriFieldTypeSmallInteger",esriFieldTypeInteger:"esriFieldTypeInteger",esriFieldTypeLong:"esriFieldTypeLong",esriFieldTypeSingle:"esriFieldTypeSingle",esriFieldTypeDouble:"esriFieldTypeDouble",esriFieldTypeString:"esriFieldTypeString",esriFieldTypeDate:"esriFieldTypeDate",esriFieldTypeDateOnly:"esriFieldTypeDateOnly",esriFieldTypeTimeOnly:"esriFieldTypeTimeOnly",esriFieldTypeTimestampOffset:"esriFieldTypeTimestampOffset",esriFieldTypeOID:"esriFieldTypeOID",esriFieldTypeGeometry:"esriFieldTypeGeometry",esriFieldTypeBlob:"esriFieldTypeBlob",esriFieldTypeRaster:"esriFieldTypeRaster",esriFieldTypeGUID:"esriFieldTypeGUID",esriFieldTypeGlobalID:"esriFieldTypeGlobalID",esriFieldTypeXML:"esriFieldTypeXML",esriFieldTypeBigInteger:"esriFieldTypeBigInteger"};function kpe(e){return e===void 0?"":e=(e=(e=e.replace(/\/featureserver\/[0-9]*/i,"/FeatureServer")).replace(/\/mapserver\/[0-9]*/i,"/MapServer")).split("?")[0]}function Ppe(e,t){t||(t={}),typeof t=="function"&&(t={cmp:t});const r=typeof t.cycles=="boolean"&&t.cycles,i=t.cmp&&(s=t.cmp,function(o){return function(l,c){const p={key:l,value:o[l]},h={key:c,value:o[c]};return s(p,h)}});var s;const n=[];return function o(l){if(l!=null&&l.toJSON&&typeof l.toJSON=="function"&&(l=l.toJSON()),l===void 0)return;if(typeof l=="number")return isFinite(l)?""+l:"null";if(typeof l!="object")return JSON.stringify(l);let c,p;if(Array.isArray(l)){for(p="[",c=0;c<l.length;c++)c&&(p+=","),p+=o(l[c])||"null";return p+"]"}if(l===null)return"null";if(n.includes(l)){if(r)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}const h=n.push(l)-1,f=Object.keys(l).sort(i==null?void 0:i(l));for(p="",c=0;c<f.length;c++){const y=f[c],m=o(l[y]);m&&(p&&(p+=","),p+=JSON.stringify(y)+":"+m)}return n.splice(h,1),"{"+p+"}"}(e)}function ine(e){switch(e.type){case"catalog":case"csv":case"feature":case"geojson":case"oriented-imagery":case"subtype-group":case"wfs":return!0;default:return!1}}function sne(e){switch(e.type){case"catalog-footprint":case"subtype-sublayer":return!0;default:return ine(e)}}const nne="esri.widgets.Feature.support.arcadeFeatureUtils",H3=()=>G.getLogger(nne);function one(e){return typeof e=="string"?Lh(x2(e)):Array.isArray(e)?ane(e):(e==null?void 0:e.declaredClass)==="esri.arcade.Dictionary"?lne(e):e}function ane(e){return`<ul class="esri-widget__list">${e.map(t=>`<li>${typeof t=="string"?Lh(x2(t)):t}</li>`).join("")}</ul>`}function lne(e){const t=e.keys().map(r=>{const i=e.field(r);return`<tr><th>${r}</th><td>${typeof i=="string"?Lh(x2(i)):i}</td></tr>`}).join("");return`<table class="${fe.table}">${t}</table>`}function L5(){return j(()=>import("./arcade-D-OWhQSS.js"),__vite__mapDeps([143,3]))}function une(e){return"createQuery"in e&&"queryFeatures"in e}async function cne({graphic:e,view:t,options:r}){const{isAggregate:i,layer:s}=e;if(!i||!s||(t==null?void 0:t.type)!=="2d")return[];const n=await t.whenLayerView(s);if(!une(n))return[];const o=n.createQuery(),l=e.getObjectId();o.aggregateIds=l!=null?[l]:[];const{features:c}=await n.queryFeatures(o,r);return c}function dne({layer:e,aggregatedFeatures:t,interceptor:r}){const{fields:i,objectIdField:s,geometryType:n,spatialReference:o,displayField:l}=e;return new Xu({fields:i,objectIdField:s,geometryType:n,spatialReference:o,displayField:l,interceptor:r,...e.type==="feature"?{templates:e.templates,typeIdField:e.typeIdField,types:e.types}:null,source:t})}async function N5({expressionInfo:e,arcade:t,interceptor:r,spatialReference:i,map:s,graphic:n,location:o,view:l,options:c}){var E;if(!(e!=null&&e.expression))return null;const{isAggregate:p}=n,h=(n.sourceLayer||n.layer)??void 0,f=p?"feature-reduction-popup":"popup",y=t.createArcadeProfile(f),m=t.createArcadeExecutor(e.expression,y).catch(C=>H3().error("arcade-executor-error",{error:C,expressionInfo:e})),[g,b]=await Promise.all([cne({graphic:n,view:l,options:c}),m]);if(!b)return null;const w=f==="feature-reduction-popup"?dne({layer:h,aggregatedFeatures:g,interceptor:r}):void 0,S={...f==="feature-reduction-popup"?{$aggregatedFeatures:w}:{$datastore:h==null?void 0:h.url,$layer:h!=null&&sne(h)?h:(h==null?void 0:h.type)==="scene"&&h.associatedLayer!=null?h.associatedLayer:void 0,$map:s,$userInput:o,$graph:(h==null?void 0:h.type)==="knowledge-graph-sublayer"?(E=h==null?void 0:h.parentCompositeLayer)==null?void 0:E.knowledgeGraph:void 0},$feature:n},x={abortSignal:(c==null?void 0:c.signal)??void 0,interceptor:r??void 0,rawOutput:!0,spatialReference:i??void 0,timeZone:l==null?void 0:l.timeZone};return await b.executeAsync(S,x).catch(C=>H3().error("arcade-execution-error",{error:C,graphic:n,expressionInfo:e})).finally(()=>w==null?void 0:w.destroy())}async function pne({expressionInfos:e,spatialReference:t,graphic:r,interceptor:i,map:s,view:n,location:o,options:l}){if(!(e!=null&&e.length))return{};const c=await L5(),p={};for(const y of e)p[`expression/${y.name}`]=N5({expressionInfo:y,arcade:c,interceptor:i,spatialReference:t,map:s,graphic:r,location:o,view:n,options:l});const h=await Rs(p),f={};for(const y in h)f[y]=one(h[y].value);return f}const hne=1;let Cr=class extends $e{constructor(t){super(t),this._abortController=null,this.expressionInfo=null,this.graphic=null,this.contentElement=null,this.contentElementViewModel=null,this.interceptor=null,this.location=null,this.view=null,this._cancelQuery=()=>{const{_abortController:r}=this;r&&r.abort(),this._abortController=null},this._createVM=()=>{var s,n;const r=(s=this.contentElement)==null?void 0:s.type;(n=this.contentElementViewModel)==null||n.destroy();const i=r==="fields"?new o0:r==="media"?new Ha:r==="text"?new Xm:null;this._set("contentElementViewModel",i)},this._compile=async()=>{this._cancelQuery();const r=new AbortController;this._abortController=r,await this._compileExpression(),this._abortController===r&&(this._abortController=null)},this._compileThrottled=d2(this._compile,hne,this),this._compileExpression=async()=>{const{expressionInfo:r,graphic:i,interceptor:s,spatialReference:n,map:o,location:l,view:c,_abortController:p}=this;if(!r||!i)return void this._set("contentElement",null);const h=await L5();if(p!==this._abortController)return;const f=await N5({arcade:h,expressionInfo:r,graphic:i,location:l,interceptor:s,map:o,spatialReference:n,view:c});if(!f||f.declaredClass!=="esri.arcade.Dictionary")return void this._set("contentElement",null);const y=await f.castAsJsonAsync(p==null?void 0:p.signal),m=y==null?void 0:y.type,g=m==="media"?dc.fromJSON(y):m==="text"?cl.fromJSON(y):m==="fields"?ul.fromJSON(y):null;g.type==="media"&&!g.mediaInfos||g.type==="fields"&&!g.fieldInfos||g.type==="text"&&!g.text?this._set("contentElement",null):this._set("contentElement",g)},this.addHandles([W(()=>[this.expressionInfo,this.graphic,this.map,this.spatialReference,this.view],()=>this._compileThrottled(),Ae),W(()=>[this.contentElement],()=>this._createVM(),Ae)])}initialize(){this.addHandles(this._compileThrottled)}destroy(){var t;this._cancelQuery(),(t=this.contentElementViewModel)==null||t.destroy(),this._set("contentElementViewModel",null),this._set("contentElement",null)}get spatialReference(){var t;return((t=this.view)==null?void 0:t.spatialReference)??null}set spatialReference(t){this._override("spatialReference",t)}get state(){const{_abortController:t,contentElement:r,contentElementViewModel:i}=this;return t?"loading":r||i?"ready":"disabled"}get map(){var t;return((t=this.view)==null?void 0:t.map)??null}set map(t){this._override("map",t)}};a([u()],Cr.prototype,"_abortController",void 0),a([u({type:Tk})],Cr.prototype,"expressionInfo",void 0),a([u({type:ni})],Cr.prototype,"graphic",void 0),a([u({readOnly:!0})],Cr.prototype,"contentElement",void 0),a([u({readOnly:!0})],Cr.prototype,"contentElementViewModel",void 0),a([u()],Cr.prototype,"interceptor",void 0),a([u({type:Ye})],Cr.prototype,"location",void 0),a([u()],Cr.prototype,"spatialReference",null),a([u({readOnly:!0})],Cr.prototype,"state",null),a([u()],Cr.prototype,"map",null),a([u()],Cr.prototype,"view",void 0),Cr=a([_("esri.widgets.Feature.FeatureExpression.FeatureExpressionViewModel")],Cr);const E2=Cr,J3="esri-feature",Z3={base:`${J3}-expression`,loadingSpinnerContainer:`${J3}__loading-container`};let By=class extends _r{constructor(t,r){super(t,r),this._contentWidget=null,this.viewModel=new E2}initialize(){this.addHandles(W(()=>{var t;return(t=this.viewModel)==null?void 0:t.contentElementViewModel},()=>this._setupExpressionWidget(),Ae))}loadDependencies(){return On({loader:()=>j(()=>import("./calcite-loader-BM0UX4gd.js"),__vite__mapDeps([144,145,146,147,131,132]))})}destroy(){this._destroyContentWidget()}render(){var r;const{state:t}=this.viewModel;return T("div",{class:Z3.base},t==="loading"?this._renderLoading():t==="disabled"?null:(r=this._contentWidget)==null?void 0:r.render())}_renderLoading(){return T("div",{class:Z3.loadingSpinnerContainer,key:"loading-container"},T("calcite-loader",{inline:!0,label:""}))}_destroyContentWidget(){const{_contentWidget:t}=this;t&&(t.viewModel=null,t.destroy()),this._contentWidget=null}_setupExpressionWidget(){const{contentElementViewModel:t,contentElement:r}=this.viewModel,i=r==null?void 0:r.type;this._destroyContentWidget();const s=t?i==="fields"?new S5({viewModel:t}):i==="media"?new k5({viewModel:t}):i==="text"?new Uy({viewModel:t}):null:null;this._contentWidget=s,this.scheduleRender()}};a([u({type:E2})],By.prototype,"viewModel",void 0),By=a([_("esri.widgets.Feature.FeatureExpression")],By);const fne=By;var Y3;(function(e){e.TOO_SHORT="length-validation-error::too-short",e.TOO_LONG="length-validation-error::too-long"})(Y3||(Y3={}));const yne=e=>{var r;const t=[];if(e.formTemplate){const{description:i,title:s}=e.formTemplate;(r=e.fields)==null||r.forEach(n=>{const o=s&&Q2(s,n.name),l=i&&Q2(i,n.name);(o||l)&&t.push(n.name)})}return t},Ov=100;let ke=class extends Oe(Ec($e)){constructor(t){super(t),this._loaded=!1,this._queryAbortController=null,this._queryPageAbortController=null,this._queryFeatureCountAbortController=null,this.featuresPerPage=10,this.description=null,this.graphic=null,this.layer=null,this.map=null,this.orderByFields=null,this.featureCount=0,this.relationshipId=null,this.showAllEnabled=!1,this.title=null,this._cancelQuery=()=>{const{_queryAbortController:r}=this;r&&r.abort(),this._queryAbortController=null},this._cancelQueryFeatureCount=()=>{const{_queryFeatureCountAbortController:r}=this;r&&r.abort(),this._queryFeatureCountAbortController=null},this._cancelQueryPage=()=>{const{_queryPageAbortController:r}=this;r&&r.abort(),this._queryPageAbortController=null},this._queryController=async()=>{this._cancelQuery();const r=new AbortController;this._queryAbortController=r,await bn(this._query()),this._queryAbortController===r&&(this._queryAbortController=null)},this._queryFeatureCountController=async()=>{this._loaded=!1,this._cancelQueryFeatureCount();const r=new AbortController;this._queryFeatureCountAbortController=r,await bn(this._queryFeatureCount()),this._queryFeatureCountAbortController===r&&(this._queryFeatureCountAbortController=null),this._loaded=!0},this._queryPageController=async()=>{const r=new AbortController;this._queryPageAbortController=r,await bn(this._queryPage()),this._queryPageAbortController===r&&(this._queryPageAbortController=null)},this._queryDebounced=wn(this._queryController,Ov),this._queryFeatureCountDebounced=wn(this._queryFeatureCountController,Ov),this._queryPageDebounced=wn(this._queryPageController,Ov),this._query=async()=>{const{_queryAbortController:r,relatedFeatures:i}=this;this.featureCount&&(this._destroyRelatedFeatureViewModels(),this.featurePage=1,i.destroyAll(),this.destroyed||i.addMany(this._sliceFeatures(await this._queryRelatedFeatures({signal:r==null?void 0:r.signal}))))},this.addHandles([W(()=>{var r;return[this.displayCount,this.graphic,this.layer,(r=this.layer)==null?void 0:r.loaded,this.map,this.orderByFields,this.relationshipId,this.featuresPerPage,this.showAllEnabled,this.canQuery,this.featureCount]},()=>this._queryDebounced(),Ae),W(()=>[this.featurePage,this.showAllEnabled],()=>this._queryPageDebounced()),W(()=>[this.layer,this.relationshipId,this.objectId,this.canQuery],()=>this._queryFeatureCountDebounced())])}destroy(){this._destroyRelatedFeatureViewModels(),this.relatedFeatures.destroyAll(),this._cancelQuery(),this._cancelQueryFeatureCount(),this._cancelQueryPage()}set featurePage(t){const{featuresPerPage:r,featureCount:i}=this,s=1,n=Math.ceil(i/r)||1;this._set("featurePage",Math.min(Math.max(t,s),n))}get featurePage(){return this._get("featurePage")}get orderByFieldsFixedCasing(){const{orderByFields:t,relatedLayer:r}=this;return t&&(r!=null&&r.loaded)?t.map(i=>{const s=i.clone();return s.field=th(i.field,r),s}):t??[]}get supportsCacheHint(){var t,r,i;return!!((i=(r=(t=this.layer)==null?void 0:t.capabilities)==null?void 0:r.queryRelated)!=null&&i.supportsCacheHint)}get canLoad(){return!!this.map&&this.relationshipId!=null&&typeof this.objectId=="number"}get canQuery(){var r,i;const t=(i=(r=this.layer)==null?void 0:r.capabilities)==null?void 0:i.queryRelated;return!!(this.relatedLayer&&this.relationship&&this.relationshipId!=null&&this.objectId!=null&&(t!=null&&t.supportsCount)&&(t!=null&&t.supportsPagination))}get itemDescriptionFieldName(){var t;return((t=this.orderByFieldsFixedCasing[0])==null?void 0:t.field)||null}set displayCount(t){this._set("displayCount",Math.min(Math.max(t,0),10))}get displayCount(){return this._get("displayCount")}get objectId(){var t,r;return(this.objectIdField&&((r=(t=this.graphic)==null?void 0:t.attributes)==null?void 0:r[this.objectIdField]))??null}get objectIdField(){var t;return((t=this.layer)==null?void 0:t.objectIdField)||null}get relatedFeatures(){return this._get("relatedFeatures")||new ne}get relatedLayer(){const{layer:t,map:r,relationship:i}=this;return t!=null&&t.loaded&&r&&i?aie(r,t,i)??null:null}get relationship(){var i;const{relationshipId:t,layer:r}=this;return t!=null?((i=r==null?void 0:r.relationships)==null?void 0:i.find(({id:s})=>s===t))??null:null}get relatedFeatureViewModels(){return this._get("relatedFeatureViewModels")||new ne}get state(){const{_queryAbortController:t,_queryFeatureCountAbortController:r,_queryPageAbortController:i,canQuery:s,_loaded:n,canLoad:o}=this;return r||o&&!n?"loading":t||i?"querying":s?"ready":"disabled"}getRelatedFeatureByObjectId(t){return this.relatedFeatures.find(r=>r.getObjectId()===t)}refresh(){this._queryFeatureCountDebounced()}_destroyRelatedFeatureViewModels(){var t;(t=this.relatedFeatureViewModels)==null||t.destroyAll()}async _queryFeatureCount(){const{layer:t,relatedLayer:r,relationshipId:i,objectId:s,_queryFeatureCountAbortController:n,canQuery:o,supportsCacheHint:l}=this;if(await(t==null?void 0:t.load()),await(r==null?void 0:r.load()),!o||!t||!r||s==null)return void this._set("featureCount",0);const c=r.createQuery(),{historicMoment:p,gdbVersion:h}=t,f=new yc({cacheHint:l,gdbVersion:h,historicMoment:p,relationshipId:i,returnGeometry:!1,objectIds:[s],where:c.where??void 0}),y=await t.queryRelatedFeaturesCount(f,{signal:n==null?void 0:n.signal});this._set("featureCount",y[s]||0)}_sliceFeatures(t){const{showAllEnabled:r,displayCount:i}=this;return r?t:i?t.slice(0,i):[]}async _queryPage(){const{relatedFeatures:t,featurePage:r,showAllEnabled:i,_queryPageAbortController:s,featureCount:n}=this;!i||r<2||!n||t.addMany(await this._queryRelatedFeatures({signal:s==null?void 0:s.signal}))}async _queryRelatedFeatures(t){var H;const{orderByFieldsFixedCasing:r,showAllEnabled:i,featuresPerPage:s,displayCount:n,layer:o,relationshipId:l,featurePage:c,featureCount:p,relatedLayer:h,supportsCacheHint:f}=this,{canQuery:y,objectId:m}=this;if(!y||!o||!h||m==null)return[];const g=i?((c-1)*s+p)%p:0,b=i?s:n,w=h.objectIdField,S=[...r.map(Y=>Y.field),...yne(h),w].filter(gl),x=r.map(Y=>`${Y.field} ${Y.order}`),E=h.createQuery(),{historicMoment:C,gdbVersion:P}=o,L=new yc({orderByFields:x,start:g,num:b,outFields:S,cacheHint:f,historicMoment:C,gdbVersion:P,relationshipId:l,returnGeometry:!1,objectIds:[m],where:E.where??void 0}),V=await o.queryRelatedFeatures(L,{signal:t==null?void 0:t.signal}),q=((H=V[m])==null?void 0:H.features)||[];return q.forEach(Y=>{Y.sourceLayer=h,Y.layer=h}),q}};a([u()],ke.prototype,"_loaded",void 0),a([u()],ke.prototype,"_queryAbortController",void 0),a([u()],ke.prototype,"_queryPageAbortController",void 0),a([u()],ke.prototype,"_queryFeatureCountAbortController",void 0),a([u({value:1})],ke.prototype,"featurePage",null),a([u()],ke.prototype,"featuresPerPage",void 0),a([u({readOnly:!0})],ke.prototype,"orderByFieldsFixedCasing",null),a([u({readOnly:!0})],ke.prototype,"supportsCacheHint",null),a([u({readOnly:!0})],ke.prototype,"canLoad",null),a([u({readOnly:!0})],ke.prototype,"canQuery",null),a([u()],ke.prototype,"description",void 0),a([u({readOnly:!0})],ke.prototype,"itemDescriptionFieldName",null),a([u({value:3})],ke.prototype,"displayCount",null),a([u({type:ni})],ke.prototype,"graphic",void 0),a([u()],ke.prototype,"layer",void 0),a([u()],ke.prototype,"map",void 0),a([u({readOnly:!0})],ke.prototype,"objectId",null),a([u({readOnly:!0})],ke.prototype,"objectIdField",null),a([u()],ke.prototype,"orderByFields",void 0),a([u({readOnly:!0})],ke.prototype,"relatedFeatures",null),a([u({readOnly:!0})],ke.prototype,"relatedLayer",null),a([u({readOnly:!0})],ke.prototype,"relationship",null),a([u()],ke.prototype,"featureCount",void 0),a([u({readOnly:!0})],ke.prototype,"relatedFeatureViewModels",null),a([u()],ke.prototype,"relationshipId",void 0),a([u()],ke.prototype,"showAllEnabled",void 0),a([u()],ke.prototype,"state",null),a([u()],ke.prototype,"title",void 0),ke=a([_("esri.widgets.Feature.FeatureRelationship.FeatureRelationshipViewModel")],ke);const A2=ke;var X_;const Wy="esri-feature",ad=`${Wy}-relationship`,qn={base:ad,listContainer:`${ad}__list`,listItem:`${ad}__list-item`,listItemHidden:`${ad}__list-item--hidden`,listContainerQuerying:`${ad}__list--querying`,featureObserver:`${Wy}__feature-observer`,stickySpinnerContainer:`${Wy}__sticky-loading-container`,loadingSpinnerContainer:`${Wy}__loading-container`},Q3={title:!0,description:!0};let jt=X_=class extends _r{constructor(e,t){super(e,t),this._featureElementInfo=null,this._relatedFeatureIntersectionObserverNode=null,this._relatedFeatureIntersectionObserver=new IntersectionObserver(([r])=>{r!=null&&r.isIntersecting&&this._increaseFeaturePage()},{root:window.document}),this.flowItems=null,this.flowType="feature-relationship",this.headingLevel=2,this.viewModel=new A2,this.messages=null,this.messagesCommon=null,this.visibleElements={...Q3},this._increaseFeaturePage=()=>{const{state:r,showAllEnabled:i,relatedFeatures:s,featuresPerPage:n,featurePage:o}=this.viewModel;r==="ready"&&i&&s.length>=n*o&&this.viewModel.featurePage++}}initialize(){this._featureElementInfo=new Nh,this.addHandles([W(()=>[this.viewModel.description,this.viewModel.title,this.headingLevel],()=>this._setupFeatureElementInfo(),Ae),W(()=>[this.viewModel.state,this.viewModel.showAllEnabled,this._relatedFeatureIntersectionObserverNode],()=>this._handleRelatedFeatureObserverChange()),pc(()=>this.viewModel.relatedFeatureViewModels,"change",()=>this._setupRelatedFeatureViewModels())])}loadDependencies(){return On({icon:()=>j(()=>import("./calcite-icon-z5p-Wr8S.js"),__vite__mapDeps([129,130,131,132])),list:()=>j(()=>import("./calcite-list-DjA-Chsk.js"),__vite__mapDeps([148,131,149,132,150,151,152,153,147,154,130,155,156,157,158,145,146,159])),"list-item":()=>j(()=>import("./calcite-list-item-plo1rlZi.js"),__vite__mapDeps([160,131,149,147,132,153,152,151,150,161,146,158,130,145])),loader:()=>j(()=>import("./calcite-loader-BM0UX4gd.js"),__vite__mapDeps([144,145,146,147,131,132])),notice:()=>j(()=>import("./calcite-notice-DntFkz7C.js"),__vite__mapDeps([162,163,132,131,152,147,153,164,158,130]))})}destroy(){this._unobserveRelatedFeatureObserver(),this._featureElementInfo=Ps(this._featureElementInfo)}get displayShowAllButton(){const{showAllEnabled:e,featureCount:t,displayCount:r,state:i}=this.viewModel;return!e&&!!t&&i==="ready"&&(t>r||r===0)}get displayListItems(){return this.displayShowAllButton||this.viewModel.relatedFeatureViewModels.length>0}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get featureCountDescription(){const{messages:e}=this,{featureCount:t}=this.viewModel;return bi(e==null?void 0:e.numberRecords,{number:t})}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}castVisibleElements(e){return{...Q3,...e}}render(){var t;const{state:e}=this.viewModel;return T("div",{class:this.classes(qn.base,fe.widget)},(t=this._featureElementInfo)==null?void 0:t.render(),e==="loading"?this._renderLoading():e==="disabled"?this._renderRelationshipNotFound():this._renderRelatedFeatures())}async _selectRecord(e){const{flowItems:t,featureVisibleElements:r}=this;if(!t)return;e.abilities={relationshipContent:!0};const{default:i}=await j(()=>Promise.resolve().then(()=>V5),void 0);t.push(new i({flowItems:t,flowType:this.flowType,viewModel:e,visibleElements:r}))}_showAllRecords(){const{flowItems:e}=this;if(!e)return;const{viewModel:t,featureVisibleElements:r}=this;t.showAllEnabled=!0;const i=new X_({flowItems:e,featureVisibleElements:r,visibleElements:{title:!1,description:!1},viewModel:t});e.push(i)}_renderStickyLoading(){return this.viewModel.state==="querying"?T("div",{class:qn.stickySpinnerContainer,key:"sticky-loader"},this._renderLoadingIcon()):null}_renderLoadingIcon(){return T("calcite-loader",{inline:!0,label:""})}_renderLoading(){return T("div",{class:qn.loadingSpinnerContainer,key:"loading-container"},this._renderLoadingIcon())}_renderShowAllIconNode(){return T("calcite-icon",{icon:"list",scale:"s",slot:"content-end"})}_renderChevronIconNode(){const e=gn(this.container)?"chevron-left":"chevron-right";return T("calcite-icon",{icon:e,scale:"s",slot:"content-end"})}_renderRelatedFeature(e){var s;const{itemDescriptionFieldName:t}=this.viewModel,r=e.title;e.description=t&&((s=e.formattedAttributes)==null?void 0:s.global[t]);const i=e.state==="loading";return T("calcite-list-item",{class:this.classes(qn.listItem,{[qn.listItemHidden]:i}),description:e.description??"",key:e.uid,label:r,onCalciteListItemSelect:()=>this._selectRecord(e)},this._renderChevronIconNode())}_renderShowAllListItem(){var e;return this.displayShowAllButton?T("calcite-list-item",{description:this.featureCountDescription,key:"show-all-item",label:(e=this.messages)==null?void 0:e.showAll,onCalciteListItemSelect:()=>this._showAllRecords()},this._renderShowAllIconNode()):null}_renderNoRelatedFeaturesMessage(){var e;return T("calcite-notice",{icon:"information",key:"no-related-features-message",kind:"brand",open:!0,scale:"s",width:"full"},T("div",{slot:"message"},(e=this.messages)==null?void 0:e.noRelatedFeatures))}_renderFeatureObserver(){return T("div",{afterCreate:this._relatedFeatureIntersectionObserverCreated,bind:this,class:qn.featureObserver,key:"feature-observer"})}_renderList(){const{relatedFeatureViewModels:e}=this.viewModel;return T("calcite-list",null,e.toArray().map(t=>this._renderRelatedFeature(t)),this._renderShowAllListItem())}_renderRelatedFeatures(){const{displayListItems:e}=this,{state:t}=this.viewModel;return T("div",{class:this.classes(qn.listContainer,{[qn.listContainerQuerying]:t==="querying"}),key:"list-container"},e?this._renderList():t==="ready"?this._renderNoRelatedFeaturesMessage():null,this._renderStickyLoading(),this._renderFeatureObserver())}_renderRelationshipNotFound(){var e;return T("calcite-notice",{icon:"exclamation-mark-triangle",key:"relationship-not-found",kind:"danger",open:!0,scale:"s",width:"full"},T("div",{slot:"message"},(e=this.messages)==null?void 0:e.relationshipNotFound))}_setupRelatedFeatureViewModels(){const{relatedFeatureViewModels:e}=this.viewModel,t="related-feature-viewmodels";this.removeHandles(t),e==null||e.forEach(r=>{this.addHandles(W(()=>[r.title,r.state],()=>this.scheduleRender(),Ae),t)}),this.scheduleRender()}_setupFeatureElementInfo(){var s;const{headingLevel:e,visibleElements:t}=this,r=t.description&&this.description,i=t.title&&this.title;(s=this._featureElementInfo)==null||s.set({description:r,title:i,headingLevel:e})}async _handleRelatedFeatureObserverChange(){this._unobserveRelatedFeatureObserver();const{state:e,showAllEnabled:t}=this.viewModel;await uh(0),this._relatedFeatureIntersectionObserverNode&&e==="ready"&&t&&this._relatedFeatureIntersectionObserver.observe(this._relatedFeatureIntersectionObserverNode)}_relatedFeatureIntersectionObserverCreated(e){this._relatedFeatureIntersectionObserverNode=e}_unobserveRelatedFeatureObserver(){this._relatedFeatureIntersectionObserverNode&&this._relatedFeatureIntersectionObserver.unobserve(this._relatedFeatureIntersectionObserverNode)}};a([u()],jt.prototype,"_relatedFeatureIntersectionObserverNode",void 0),a([u({readOnly:!0})],jt.prototype,"displayShowAllButton",null),a([u({readOnly:!0})],jt.prototype,"displayListItems",null),a([u()],jt.prototype,"description",null),a([u({readOnly:!0})],jt.prototype,"featureCountDescription",null),a([u()],jt.prototype,"featureVisibleElements",void 0),a([u()],jt.prototype,"flowItems",void 0),a([u()],jt.prototype,"flowType",void 0),a([u()],jt.prototype,"headingLevel",void 0),a([u()],jt.prototype,"title",null),a([u({type:A2})],jt.prototype,"viewModel",void 0),a([u(),Qt("esri/widgets/Feature/t9n/Feature")],jt.prototype,"messages",void 0),a([u(),Qt("esri/t9n/common")],jt.prototype,"messagesCommon",void 0),a([u()],jt.prototype,"visibleElements",void 0),a([Ce("visibleElements")],jt.prototype,"castVisibleElements",null),jt=X_=a([_("esri.widgets.Feature.FeatureRelationship")],jt);const mne=jt;let R5=class{constructor(t){this._observable=new hh,this._map=new Map(t)}get size(){return X(this._observable),this._map.size}clear(){this._map.size>0&&(this._map.clear(),this._observable.notify())}delete(t){const r=this._map.delete(t);return r&&this._observable.notify(),r}entries(){return X(this._observable),this._map.entries()}forEach(t,r){X(this._observable),this._map.forEach((i,s)=>t.call(r,i,s,this),r)}get(t){return X(this._observable),this._map.get(t)}has(t){return X(this._observable),this._map.has(t)}keys(){return X(this._observable),this._map.keys()}set(t,r){return this._map.set(t,r),this._observable.notify(),this}values(){return X(this._observable),this._map.values()}[Symbol.iterator](){return X(this._observable),this._map[Symbol.iterator]()}get[Symbol.toStringTag](){return this._map[Symbol.toStringTag]}};var K3;(function(e){e[e.RTJunctionJunctionConnectivity=1]="RTJunctionJunctionConnectivity",e[e.RTAttachment=2]="RTAttachment",e[e.RTContainment=3]="RTContainment",e[e.RTJunctionEdgeConnectivity=4]="RTJunctionEdgeConnectivity",e[e.RTEdgeJunctionEdgeConnectivity=5]="RTEdgeJunctionEdgeConnectivity"})(K3||(K3={}));new ve({connected:"connected",upstream:"upstream",downstream:"downstream",shortestPath:"shortest-path",subnetwork:"subnetwork",subnetworkController:"subnetwork-controller",loops:"loops",isolation:"isolation"});const Ff=new ve({junctionJunctionConnectivity:"junction-junction-connectivity",connectivity:"connectivity",attachment:"attachment",containment:"containment",junctionEdgeFromConnectivity:"junction-edge-from-connectivity",junctionMidspanConnectivity:"junction-midspan-connectivity",junctionEdgeToConnectivity:"junction-edge-to-connectivity"}),gne=Array.from({length:33},(e,t)=>2*t),vne=new Map([[1,"connectivity"],[2,"containment"],[3,"attachment"],[4,"junction-edge-from-connectivity"],[5,"junction-midspan-connectivity"],[6,"junction-edge-to-connectivity"]]);new ve({normal:"normal",rebuild:"rebuild",forceRebuild:"force-rebuild"});let Wi=class extends R{constructor(t){super(t),this.assetGroupCode=null,this.assetTypeCode=null,this.globalId=null,this.networkSourceId=null,this.objectId=null,this.positionFrom=null,this.positionTo=null,this.terminalId=null}};a([u({type:Number,json:{write:!0}})],Wi.prototype,"assetGroupCode",void 0),a([u({type:Number,json:{write:!0}})],Wi.prototype,"assetTypeCode",void 0),a([u({type:String,json:{write:!0}})],Wi.prototype,"globalId",void 0),a([u({type:Number,json:{write:!0}})],Wi.prototype,"networkSourceId",void 0),a([u({type:Number,json:{write:!0}})],Wi.prototype,"objectId",void 0),a([u({type:Number,json:{write:!0}})],Wi.prototype,"positionFrom",void 0),a([u({type:Number,json:{write:!0}})],Wi.prototype,"positionTo",void 0),a([u({type:Number,json:{write:!0}})],Wi.prototype,"terminalId",void 0),Wi=a([_("esri.rest.networks.support.NetworkElement")],Wi);const vc=Wi;let Ht=class extends R{constructor(t){super(t),this.globalId=null,this.associationType=null,this.fromNetworkElement=null,this.toNetworkElement=null,this.geometry=null,this.errorMessage=null,this.percentAlong=null,this.errorCode=null,this.isContentVisible=null,this.status=null}readFromNetworkElement(t,r){return new vc({globalId:r.fromGlobalId,networkSourceId:r.fromNetworkSourceId,terminalId:r.fromTerminalId})}writeFromNetworkElement(t,r){t&&(r.fromGlobalId=t.globalId,r.fromNetworkSourceId=t.networkSourceId,r.fromTerminalId=t.terminalId)}readToNetworkElement(t,r){return new vc({globalId:r.toGlobalId,networkSourceId:r.toNetworkSourceId,terminalId:r.toTerminalId})}writeToNetworkElement(t,r){t&&(r.toGlobalId=t.globalId,r.toNetworkSourceId=t.networkSourceId,r.toTerminalId=t.terminalId)}};a([u({type:String,json:{write:!0}})],Ht.prototype,"globalId",void 0),a([u({type:Ff.apiValues,json:{type:Ff.jsonValues,read:Ff.read,write:Ff.write}})],Ht.prototype,"associationType",void 0),a([u({type:vc,json:{write:{target:{fromGlobalId:{type:String},fromNetworkSourceId:{type:Number},fromTerminalId:{type:Number}}},read:{source:["fromGlobalId","fromNetworkSourceId","fromTerminalId"]}}})],Ht.prototype,"fromNetworkElement",void 0),a([D("fromNetworkElement")],Ht.prototype,"readFromNetworkElement",null),a([B("fromNetworkElement")],Ht.prototype,"writeFromNetworkElement",null),a([u({type:vc,json:{write:{target:{toGlobalId:{type:String},toNetworkSourceId:{type:Number},toTerminalId:{type:Number}}},read:{source:["toGlobalId","toNetworkSourceId","toTerminalId"]}}})],Ht.prototype,"toNetworkElement",void 0),a([D("toNetworkElement")],Ht.prototype,"readToNetworkElement",null),a([B("toNetworkElement")],Ht.prototype,"writeToNetworkElement",null),a([u({type:xi,json:{write:!0}})],Ht.prototype,"geometry",void 0),a([u({type:String,json:{write:!0}})],Ht.prototype,"errorMessage",void 0),a([u({type:Number,json:{write:!0}})],Ht.prototype,"percentAlong",void 0),a([u({type:Number,json:{write:!0}})],Ht.prototype,"errorCode",void 0),a([u({type:Boolean,json:{write:!0}})],Ht.prototype,"isContentVisible",void 0),a([u({type:Number,json:{write:!0}})],Ht.prototype,"status",void 0),Ht=a([_("esri.rest.networks.support.Association")],Ht);const bne=Ht,qe={fromGlobalId:"fromglobalid",fromNetworkSourceId:"fromnetworksourceid",fromTerminalId:"fromterminalid",toGlobalId:"toglobalid",toNetworkSourceId:"tonetworksourceid",toTerminalId:"toterminalid",associationType:"associationtype",globalId:"globalid",status:"status",isContentVisible:"iscontentvisible",percentAlong:"percentalong",assetGroup:"assetgroup",assetType:"assettype"},X3=100;let be=class extends Oe(Ec($e)){constructor(t){super(t),this._loaded=!1,this._queryAbortController=null,this._queryPageAbortController=null,this._queryFeatureCountAbortController=null,this.networkSourceIdsInUse=new Set,this.description=null,this.graphic=null,this.layer=null,this.map=null,this.featureCount=0,this.associationTypes=null,this.showAllEnabled=!1,this.title=null,this.attachmentsFeatureCount=0,this.structureFeatureCount=0,this.contentFeatureCount=0,this.containerFeatureCount=0,this.connectivityFeatureCount=0,this._cancelQuery=()=>{const{_queryAbortController:r}=this;r&&r.abort(),this._queryAbortController=null},this._cancelQueryFeatureCount=()=>{const{_queryFeatureCountAbortController:r}=this;r&&r.abort(),this._queryFeatureCountAbortController=null},this._queryController=async r=>{this._cancelQuery();const i=new AbortController;this._queryAbortController=i,await bn(this._query(r)),this._queryAbortController===i&&(this._queryAbortController=null)},this._queryFeatureCountController=async()=>{this._loaded=!1,this._cancelQueryFeatureCount();const r=new AbortController;this._queryFeatureCountAbortController=r,await bn(this._queryFeatureCount()),this._queryFeatureCountAbortController===r&&(this._queryFeatureCountAbortController=null),this._loaded=!0},this._queryDebounced=wn(this._queryController,X3),this._queryFeatureCountDebounced=wn(this._queryFeatureCountController,X3)}initialize(){var t,r;(t=this.associationTypes)==null||t.forEach(i=>{i.open=!1}),this.addHandles([...((r=this.associationTypes)==null?void 0:r.map(i=>W(()=>i.open,()=>{i.open&&this._queryDebounced(i)})))??[],W(()=>[this.graphic,this.layer,this.map,this.associationTypes,this.objectId,this.globalId,this.canQuery],()=>this._queryFeatureCountDebounced(),Ae)])}destroy(){this._cancelQuery(),this._cancelQueryFeatureCount(),this._destroyAssociatedFeatureViewModels()}get supportsCacheHint(){var t,r,i;return!!((i=(r=(t=this.layer)==null?void 0:t.capabilities)==null?void 0:r.query)!=null&&i.supportsCacheHint)}get canLoad(){return!!this.map&&!!this.associationTypes&&typeof this.globalId=="string"}get canQuery(){var r,i;const t=(i=(r=this.layer)==null?void 0:r.capabilities)==null?void 0:i.query;return!!this.associationTypes&&typeof this.globalId=="string"&&!!(t!=null&&t.supportsPagination)}get objectId(){var t,r;return(this.objectIdField&&((r=(t=this.graphic)==null?void 0:t.attributes)==null?void 0:r[this.objectIdField]))??null}get objectIdField(){var t;return((t=this.layer)==null?void 0:t.objectIdField)||null}get globalId(){var t,r;return(this.globalIdField&&((r=(t=this.graphic)==null?void 0:t.attributes)==null?void 0:r[this.globalIdField]))??null}get globalIdField(){const{layer:t}=this;return(t==null?void 0:t.type)==="subtype-sublayer"&&(t!=null&&t.parent)?t.parent.globalIdField??null:(t==null?void 0:t.globalIdField)??null}get state(){const{_queryAbortController:t,_queryFeatureCountAbortController:r,_queryPageAbortController:i,canQuery:s,_loaded:n,canLoad:o}=this;return r||o&&!n?"loading":t||i?"querying":s&&this.featureCount!==0?"ready":"disabled"}get utilityNetwork(){const{layer:t,map:r}=this;return t!=null&&t.loaded&&r?(t==null?void 0:t.type)==="subtype-sublayer"&&(t!=null&&t.parent)?x3(r,t.parent)??null:x3(r,t)??null:null}get associationsLayer(){const{utilityNetwork:t}=this;return t!=null&&t.loaded?new Xu({url:t.networkSystemLayers.associationsTableUrl,gdbVersion:t.gdbVersion}):null}get attachmentsAssociations(){return this._get("attachmentsAssociations")||new ne}get structureAssociations(){return this._get("structureAssociations")||new ne}get contentAssociations(){return this._get("contentAssociations")||new ne}get containerAssociations(){return this._get("containerAssociations")||new ne}get connectivityAssociations(){return this._get("connectivityAssociations")||new ne}get associationFeatures(){return this._get("associationFeatures")||new R5}get associationViewModels(){return this._get("associationViewModels")||new Map}refresh(){this._queryFeatureCountDebounced()}_destroyAssociatedFeatureViewModels(){this.associationViewModels.forEach(t=>t.destroyAll())}_generateGlobalIdWhereClause(t,r){const{globalId:i,networkSourceIdsInUse:s}=this,{associatedNetworkSourceId:n}=t,o=r.fieldsIndex.get(qe.fromGlobalId),l=r.fieldsIndex.get(qe.toGlobalId),c=r.fieldsIndex.get(qe.fromNetworkSourceId),p=r.fieldsIndex.get(qe.toNetworkSourceId),h=n!=null,f=`(${Array.from(s.values())})`,y=h?` AND ${p.name} = ${n} AND ${p.name} IN ${f}`:"",m=h?` AND ${c.name} = ${n} AND ${c.name} IN ${f}`:"";switch(t.type){case"connectivity":return`((${o.name} = '${i}'${y}) OR (${l.name} = '${i}'${m}))`;case"attachment":case"content":return`${o.name} = '${i}'${y}`;case"container":case"structure":return`${l.name} = '${i}'${m}`;default:return""}}_generateNetworkSourceIdWhereClause(t){const{networkSourceIdsInUse:r}=this,i=`(${Array.from(r.values())})`,s=t.fieldsIndex.get(qe.fromNetworkSourceId),n=t.fieldsIndex.get(qe.toNetworkSourceId);return`(${s.name} IN ${i} AND ${n.name} IN ${i})`}_generateAssociationTypeWhereClause(t,r){const i=r.fieldsIndex.get(qe.associationType);switch(t.type){case"attachment":case"structure":return`${i.name} = 3`;case"connectivity":return`${i.name} IN  (1, 4, 5, 6)`;case"container":case"content":return`${i.name} = 2`;default:return""}}_generateWhereClause(t,r){const i=r.fieldsIndex.get(qe.status),s=`(${gne.join(",")})`,n=`${i.name} IN ${s}`;return`(${this._generateGlobalIdWhereClause(t,r)} AND ${n} AND ${this._generateAssociationTypeWhereClause(t,r)})`}async _loadUtiltyNetworks(){var s;const t=this.map;if(!t)return;await Promise.allSettled(((s=t.utilityNetworks)==null?void 0:s.map(async n=>{await n.load()}))??[]);const r=n=>{if("layerId"in n&&i.isUtilityLayer(n)){const o=i.getSourceIdByLayerId(n.layerId);o!==null&&this.networkSourceIdsInUse.add(o)}},i=this.utilityNetwork;this._set("networkSourceIdsInUse",new Set),t.allLayers.forEach(r),t.allTables.forEach(r)}async _findLayersBySourceId(t){const{utilityNetwork:r,map:i}=this,s=p=>{const h=p;return p.url&&h.layerId===n?p.url.replace(/\/\d+$/,"")===(r==null?void 0:r.featureServiceUrl):!1};await(r==null?void 0:r.load());const n=r.getLayerIdBySourceId(t),o=i.allLayers.filter(s),l=i.allTables.filter(s),c=o.concat(l).toArray();return await Promise.allSettled(c.map(p=>p.load())),c}_clearAssociations(){this.attachmentsAssociations.removeAll(),this.structureAssociations.removeAll(),this.contentAssociations.removeAll(),this.containerAssociations.removeAll(),this.connectivityAssociations.removeAll()}_clearFeatures(){this.associationFeatures.forEach(t=>t.removeAll()),this.associationFeatures.clear()}_getAssociationsByType(t){switch(t){case"attachment":return this.attachmentsAssociations;case"structure":return this.structureAssociations;case"connectivity":return this.connectivityAssociations;case"container":return this.containerAssociations;case"content":return this.contentAssociations}}_createAssociationFromFeature(t,r){if(!t)return null;const i=vne.get(r.attributes[t.fieldsIndex.get(qe.associationType).name]);return new bne({globalId:r.attributes[t.fieldsIndex.get(qe.globalId).name],fromNetworkElement:new vc({globalId:r.attributes[t.fieldsIndex.get(qe.fromGlobalId).name],networkSourceId:r.attributes[t.fieldsIndex.get(qe.fromNetworkSourceId).name],terminalId:r.attributes[t.fieldsIndex.get(qe.fromTerminalId).name]}),toNetworkElement:new vc({globalId:r.attributes[t.fieldsIndex.get(qe.toGlobalId).name],networkSourceId:r.attributes[t.fieldsIndex.get(qe.toNetworkSourceId).name],terminalId:r.attributes[t.fieldsIndex.get(qe.toTerminalId).name]}),associationType:i,status:r.attributes[t.fieldsIndex.get(qe.status).name],isContentVisible:r.attributes[t.fieldsIndex.get(qe.isContentVisible).name],percentAlong:r.attributes[t.fieldsIndex.get(qe.percentAlong).name]})}async _queryLayer(t,r,i,s,n){const o=t.fieldsIndex.get(qe.assetGroup),l=t.fieldsIndex.get(qe.assetType),c=i!=null,p=s!=null,h="("+r.map(b=>`'${b}'`).join(", ")+")",f=c?` AND ${o==null?void 0:o.name} = ${i}`:"",y=c&&p?` AND ${l==null?void 0:l.name} = ${s}`:"",m=`${t.globalIdField} IN ${h}`+f+y,g=new ii({outFields:["*"],cacheHint:this.supportsCacheHint,where:m});return await this._queryAll(g,t,{signal:n==null?void 0:n.signal})}async _createAssociationFeatureObjects(t,r,i,s,n,o){if(t.length===0)return[];const l=new Map;for(const[p,h]of r){const f=await this._findLayersBySourceId(p);for(const y of f)(await this._queryLayer(y,h,s,n,o)).forEach(m=>{if(m.getEffectivePopupTemplate()&&m.layer){const g=l.get(m.attributes[y.globalIdField])??[];g.push(m),l.set(m.attributes[y.globalIdField],g)}})}const c=[];return t.toArray().forEach(p=>{const h=p.fromNetworkElement.globalId===i?p.toNetworkElement:p.fromNetworkElement;(l.get(h.globalId)??[]).forEach(f=>{var m,g;const y=(g=(m=this.utilityNetwork)==null?void 0:m.getTerminalById(h==null?void 0:h.terminalId))==null?void 0:g.name;c.push({association:p,feature:f,terminalName:y})})}),c}_parseFeatureObjects(t,r){t.forEach(i=>{const s=i==null?void 0:i.feature,n=s.layer,o=r.get(n)??new ne;o.add(i),r.set(n,o)})}async _queryAll(t,r,i){var l;const s=[];let n=0,o=!1;t.num=((l=r.sourceJSON)==null?void 0:l.maxRecordCount)??2e3;do{t.start=n;const c=await r.queryFeatures(t,i);s.push(...c.features),o=c.exceededTransferLimit,o&&(n+=c.features.length)}while(o);return s}async _queryAssociatedFeatureCount(t){const{layer:r,globalId:i,supportsCacheHint:s,associationTypes:n,associationsLayer:o,utilityNetwork:l,canQuery:c}=this;if(await Promise.allSettled([r==null?void 0:r.load(),l==null?void 0:l.load(),o==null?void 0:o.load()]),this._clearAssociations(),!(c&&r&&n&&o))return;const p=o.fieldsIndex.get(qe.toGlobalId).name,h=o.fieldsIndex.get(qe.fromGlobalId).name,f=n.map(x=>this._generateWhereClause(x,o)),y=this._generateNetworkSourceIdWhereClause(o),m=f.join(" OR "),g=new ii({outFields:["*"],cacheHint:s,returnGeometry:!1,where:`(${m}) AND (${y})`}),b=await this._queryAll(g,o,{signal:t==null?void 0:t.signal}),w=new Map;n.forEach(x=>{w.set(x.type,[])}),b.forEach(x=>{const E=o.fieldsIndex.get(qe.associationType);switch(x.attributes[E.name]){case 1:case 4:case 5:case 6:x.attributes[h]===i?w.get("connectivity").push(x.attributes[p]):w.get("connectivity").push(x.attributes[h]),this.connectivityAssociations.add(this._createAssociationFromFeature(o,x));break;case 2:x.attributes[h]===i?(w.get("content").push(x.attributes[p]),this.contentAssociations.add(this._createAssociationFromFeature(o,x))):(w.get("container").push(x.attributes[h]),this.containerAssociations.add(this._createAssociationFromFeature(o,x)));break;case 3:x.attributes[h]===i?(w.get("attachment").push(x.attributes[p]),this.attachmentsAssociations.add(this._createAssociationFromFeature(o,x))):(w.get("structure").push(x.attributes[h]),this.structureAssociations.add(this._createAssociationFromFeature(o,x)))}});const S=n.map(async x=>{const{associatedNetworkSourceId:E,associatedAssetGroup:C,associatedAssetType:P}=x,L=w.get(x.type),V=C!=null?await this._countAssociatedFeatures(E,L,C,P,t):L.length;switch(x.type){case"attachment":this._set("attachmentsFeatureCount",V);break;case"structure":this._set("structureFeatureCount",V);break;case"content":this._set("contentFeatureCount",V);break;case"container":this._set("containerFeatureCount",V);break;case"connectivity":this._set("connectivityFeatureCount",V)}});await Promise.allSettled(S)}async _countAssociatedFeatureCount(t,r,i,s,n){const o=t.fieldsIndex.get(qe.assetGroup),l=t.fieldsIndex.get(qe.assetType),c=s!=null,p="("+r.map(m=>`'${m}'`).join(", ")+")",h=` AND ${o==null?void 0:o.name} = ${i}`,f=c?` AND ${l==null?void 0:l.name} = ${s}`:"",y=`${t.globalIdField} IN ${p}`+h+f;return t.queryFeatureCount({where:y,outFields:["*"],returnGeometry:!1},{signal:n==null?void 0:n.signal})}async _countAssociatedFeatures(t,r,i,s,n){if(r.length===0)return 0;const o=(await this._findLayersBySourceId(t)).map(async l=>this._countAssociatedFeatureCount(l,r,i,s,n));return(await Promise.all(o)).reduce((l,c)=>l+c,0)}async _queryAssociatedFeatures(t,r){const{layer:i,globalId:s,associationTypes:n,associationsLayer:o,utilityNetwork:l,canQuery:c,associationFeatures:p}=this;if(await Promise.allSettled([i==null?void 0:i.load(),l==null?void 0:l.load(),o==null?void 0:o.load()]),!(c&&i&&n&&o))return;const h=this._getAssociationsByType(t.type),{associatedAssetGroup:f,associatedAssetType:y}=t,m=new Map;h.forEach(b=>{const{networkSourceId:w,elementGlobalId:S}=b.fromNetworkElement.globalId===s?{networkSourceId:b.toNetworkElement.networkSourceId,elementGlobalId:b.toNetworkElement.globalId}:{networkSourceId:b.fromNetworkElement.networkSourceId,elementGlobalId:b.fromNetworkElement.globalId},x=m.get(w)||[];x.push(S),m.set(w,x)});const g=await this._createAssociationFeatureObjects(h,m,s,f,y,r);this._parseFeatureObjects(g,p)}async _queryFeatureCount(){await this._loadUtiltyNetworks();const{_queryFeatureCountAbortController:t,canQuery:r}=this;r?(await this._queryAssociatedFeatureCount(t),this._set("featureCount",this.attachmentsFeatureCount+this.structureFeatureCount+this.contentFeatureCount+this.containerFeatureCount+this.connectivityFeatureCount)):this._set("featureCount",0)}async _query(t){await this._loadUtiltyNetworks();const{_queryAbortController:r}=this;this.featureCount&&(this._destroyAssociatedFeatureViewModels(),this._clearFeatures(),this.destroyed||await this._queryAssociatedFeatures(t,{signal:r==null?void 0:r.signal}))}};a([u()],be.prototype,"_loaded",void 0),a([u()],be.prototype,"_queryAbortController",void 0),a([u()],be.prototype,"_queryPageAbortController",void 0),a([u()],be.prototype,"_queryFeatureCountAbortController",void 0),a([u({readOnly:!0})],be.prototype,"supportsCacheHint",null),a([u({readOnly:!0})],be.prototype,"canLoad",null),a([u({readOnly:!0})],be.prototype,"canQuery",null),a([u()],be.prototype,"networkSourceIdsInUse",void 0),a([u()],be.prototype,"description",void 0),a([u({type:ni})],be.prototype,"graphic",void 0),a([u()],be.prototype,"layer",void 0),a([u()],be.prototype,"map",void 0),a([u({readOnly:!0})],be.prototype,"objectId",null),a([u({readOnly:!0})],be.prototype,"objectIdField",null),a([u({readOnly:!0})],be.prototype,"globalId",null),a([u({readOnly:!0})],be.prototype,"globalIdField",null),a([u()],be.prototype,"featureCount",void 0),a([u()],be.prototype,"associationTypes",void 0),a([u()],be.prototype,"showAllEnabled",void 0),a([u()],be.prototype,"state",null),a([u()],be.prototype,"title",void 0),a([u({readOnly:!0})],be.prototype,"utilityNetwork",null),a([u({readOnly:!0})],be.prototype,"associationsLayer",null),a([u({readOnly:!0})],be.prototype,"attachmentsFeatureCount",void 0),a([u({readOnly:!0})],be.prototype,"structureFeatureCount",void 0),a([u({readOnly:!0})],be.prototype,"attachmentsAssociations",null),a([u({readOnly:!0})],be.prototype,"structureAssociations",null),a([u({readOnly:!0})],be.prototype,"contentFeatureCount",void 0),a([u({readOnly:!0})],be.prototype,"containerFeatureCount",void 0),a([u({readOnly:!0})],be.prototype,"contentAssociations",null),a([u({readOnly:!0})],be.prototype,"containerAssociations",null),a([u({readOnly:!0})],be.prototype,"connectivityFeatureCount",void 0),a([u({readOnly:!0})],be.prototype,"connectivityAssociations",null),a([u({readOnly:!0})],be.prototype,"associationFeatures",null),a([u({readOnly:!0})],be.prototype,"associationViewModels",null),be=a([_("esri.widgets.Feature.FeatureUtilityNetworkAssociations.FeatureUtilityNetworkAssociationsViewModel")],be);const jh=be;let sp=class extends $e{constructor(t){super(t),this.title=!0,this.description=!0}};a([u({type:Boolean,nonNullable:!0})],sp.prototype,"title",void 0),a([u({type:Boolean,nonNullable:!0})],sp.prototype,"description",void 0),sp=a([_("esri.widgets.Feature.FeatureUtilityNetworkAssociations.VisibleElements")],sp);const a0=sp;var e$;const np="esri-feature",Vl=`${np}-relationship`,Ul={base:Vl,listContainer:`${Vl}__list`,listItem:`${Vl}__list-item`,listItemHidden:`${Vl}__list-item--hidden`,listContainerQuerying:`${Vl}__list--querying`,featureObserver:`${np}__feature-observer`,stickySpinnerContainer:`${np}__sticky-loading-container`,loadingSpinnerContainer:`${np}__loading-container`,expander:`${Vl}__expander`,filterContainer:`${np}__filter-container`};let He=e$=class extends _r{constructor(e,t){super(e,t),this.flowType="feature-utility-network-association-type",this.description=null,this.headingLevel=2,this.title=null,this.viewModel=new jh,this.parentFeatureViewModel=null,this.listType=null,this.selectedLayer=null,this.flowItems=null,this.messages=null,this.messagesCommon=null,this.visibleElements=new a0,this._featuresPerPage=50,this._maxNumFeatures=1e3,this._currentFeaturePage=1,this._previewDisplayCount=3,this._associatedFeatureIntersectionObserverNode=null,this._associatedFeatureIntersectionObserver=new IntersectionObserver(([r])=>{r!=null&&r.isIntersecting&&this._increaseFeaturePage()},{root:window.document}),this._tooltipReferenceMap=new R5,this._filterText=""}initialize(){this.addHandles([W(()=>[this._associatedFeatureIntersectionObserverNode],()=>this._handleAssociatedFeatureObserverChange())])}loadDependencies(){return On({chip:()=>j(()=>import("./calcite-chip-Dc85UrsC.js"),__vite__mapDeps([165,131,152,153,147,132,149,158,130])),icon:()=>j(()=>import("./calcite-icon-z5p-Wr8S.js"),__vite__mapDeps([129,130,131,132])),input:()=>j(()=>import("./calcite-input-CMcftKHH.js"),__vite__mapDeps([166,155,131,156,149,147,132,157,158,152,153,130])),loader:()=>j(()=>import("./calcite-loader-BM0UX4gd.js"),__vite__mapDeps([144,145,146,147,131,132])),list:()=>j(()=>import("./calcite-list-DjA-Chsk.js"),__vite__mapDeps([148,131,149,132,150,151,152,153,147,154,130,155,156,157,158,145,146,159])),"list-item":()=>j(()=>import("./calcite-list-item-plo1rlZi.js"),__vite__mapDeps([160,131,149,147,132,153,152,151,150,161,146,158,130,145])),tooltip:()=>j(()=>import("./calcite-tooltip-DUUuAU1S.js"),__vite__mapDeps([167,131,168,154,146,164]))})}destroy(){this._tooltipReferenceMap.clear()}get _numAssociatedFeatures(){const e=this.viewModel.associationViewModels;return this.selectedLayer?e.get(this.selectedLayer).length:0}set currentFeaturePage(e){const{_featuresPerPage:t,_numAssociatedFeatures:r}=this,i=1,s=Math.ceil(r/t)||1;this._currentFeaturePage=Math.max(Math.min(e,s),i)}get currentFeaturePage(){return this._currentFeaturePage}render(){const e=this.viewModel.associationViewModels,{state:t,showAllEnabled:r}=this.viewModel,{state:i}=this.parentFeatureViewModel??{};return T("div",{class:this.classes(Ul.base,fe.widget)},t==="loading"||t==="querying"||i==="loading"?this._renderLoading():T("calcite-list",null,r&&this.selectedLayer?T(b5,null,this._renderFilter(),this._renderAssociatedFeatureListPage(),this._renderFeatureObserver()):Array.from(e.keys(),s=>this._renderTypeList(s,e.get(s)))))}_renderFilter(){return T("div",{class:Ul.filterContainer,key:"filter"},T("calcite-input",{icon:"search",placeholder:this.messages.associationFilterPlaceholder,type:"search",onCalciteInputInput:e=>{this._filterText=e.target.value.trim().toLowerCase(),this._currentFeaturePage=1}}))}_showAllAssociations(e){const{flowItems:t,viewModel:r,description:i}=this;if(!t||!e)return;r.showAllEnabled=!0;const s=new e$({selectedLayer:e,title:e==null?void 0:e.title,flowItems:t,parentFeatureViewModel:this.parentFeatureViewModel,featureVisibleElements:this.featureVisibleElements,description:i,visibleElements:{title:!1,description:!1},viewModel:r});t.push(s)}_renderAssociatedFeatureListPage(){const{currentFeaturePage:e,_featuresPerPage:t,_maxNumFeatures:r,_filterText:i}=this,s=Math.min(e*t,r),n=this.viewModel.associationViewModels.get(this.selectedLayer).filter(o=>Vm(o.featureViewModel).toLowerCase().includes(i)).slice(0,s);return[...this._renderTooltips(n),...this._renderAssociatedFeatureList(n)]}async _handleAssociatedFeatureObserverChange(){this._associatedFeatureIntersectionObserverNode&&this._associatedFeatureIntersectionObserver.unobserve(this._associatedFeatureIntersectionObserverNode);const{state:e,showAllEnabled:t}=this.viewModel;await uh(0),this._associatedFeatureIntersectionObserverNode&&e==="ready"&&t&&this._associatedFeatureIntersectionObserver.observe(this._associatedFeatureIntersectionObserverNode)}_associatedFeatureIntersectionObserverCreated(e){this._associatedFeatureIntersectionObserverNode=e}_renderFeatureObserver(){return T("div",{afterCreate:this._associatedFeatureIntersectionObserverCreated,bind:this,class:Ul.featureObserver,key:"feature-observer"})}_increaseFeaturePage(){this.currentFeaturePage++}_renderLoading(){return T("div",{class:Ul.loadingSpinnerContainer,key:"loading-container"},this._renderLoadingIcon())}_renderLoadingIcon(){return T("calcite-loader",{inline:!0,label:""})}isConnectivity(e){return["connectivity","junction-junction-connectivity","junction-edge-from-connectivity","junction-midspan-connectivity","junction-edge-to-connectivity"].includes(e.association.associationType)}_getConnectivityTooltip(e){switch(e){case"connectivity":case"junction-junction-connectivity":return this.messages.associationsJunctionJunction;case"junction-edge-from-connectivity":return this.messages.associationsJunctionEdgeFrom;case"junction-midspan-connectivity":return this.messages.associationsJunctionEdgeMidspan;case"junction-edge-to-connectivity":return this.messages.associationsJunctionEdgeTo;default:return""}}_renderItemTooltip(e){const{_tooltipReferenceMap:t}=this;return this.isConnectivity(e)?T("calcite-tooltip",{key:`tooltip-${e.featureViewModel.uid}`,referenceElement:t.get(e.featureViewModel.uid)},this._getConnectivityTooltip(e.association.associationType)):null}_renderConnectivityIcon(e,t){let r;switch(e){case"junction-edge-from-connectivity":r="connection-end-left";break;case"junction-edge-to-connectivity":r="connection-end-right";break;case"junction-midspan-connectivity":r="connection-middle";break;default:r="connection-to-connection"}return T("calcite-icon",{afterCreate:i=>this._tooltipReferenceMap.set(t,i),afterRemoved:()=>this._tooltipReferenceMap.delete(t),icon:r,scale:"s",slot:"content-start"})}_formatPercentAlong(e){return`${br(e.association.percentAlong,{style:"percent",maximumFractionDigits:2})}`}_renderAssociatedFeature(e){const{featureViewModel:t}=e,r=Vm(t),i=t.state==="loading",s=this._findFlowItem(t),n=s<0&&this._isParentFeature(t),o=n||s>=0,l=this.isConnectivity(e),c=l&&e.association.associationType==="junction-midspan-connectivity";return T("calcite-list-item",{class:this.classes(Ul.listItem,{[Ul.listItemHidden]:i}),description:e.terminalName??"",key:`associated-feature-type-${t.uid}`,label:r,onCalciteListItemSelect:()=>this._handleFeatureClick(n,s,t)},l?this._renderConnectivityIcon(e.association.associationType,e.featureViewModel.uid):null,c?T("calcite-chip",{scale:"s",slot:"content-end",value:e.association.percentAlong},this._formatPercentAlong(e)):null,this._renderChevronIconNode(o))}async _selectAssociation(e){const{flowItems:t,featureVisibleElements:r}=this;if(!t)return;e.abilities={utilityNetworkAssociationsContent:!0};const{default:i}=await j(()=>Promise.resolve().then(()=>V5),void 0);t.push(new i({flowItems:t,flowType:"feature-association",viewModel:e,visibleElements:r}))}_handleFeatureClick(e,t,r){if(e)this.flowItems.drain(i=>{"showAllEnabled"in i.viewModel&&(i.viewModel.showAllEnabled=!1),i.viewModel=null,i.destroy()});else if(t<0||!this.flowItems)this._selectAssociation(r);else for(;this.flowItems.length>t+1;){const i=this.flowItems.pop();i&&("showAllEnabled"in i.viewModel&&(i.viewModel.showAllEnabled=!1),i.viewModel=null,i.destroy())}}_featureViewModelMatch(e,t){const r=e.graphic,i=r==null?void 0:r.layer;let s=null;(i==null?void 0:i.type)==="subtype-sublayer"&&i.parent?s=i.parent.globalIdField??null:i&&"globalIdField"in i&&(s=i.globalIdField);const n=s?r==null?void 0:r.attributes[s]:null,o=t.graphic,l=o==null?void 0:o.layer;let c=null;(l==null?void 0:l.type)==="subtype-sublayer"&&l.parent?c=l.parent.globalIdField??null:l&&"globalIdField"in l&&(c=l.globalIdField);const p=c?o==null?void 0:o.attributes[c]:null;return n&&p&&n===p}_isParentFeature(e){var i;const t=(i=this.flowItems)==null?void 0:i.getItemAt(0);if(!t)return!1;const r=t.parentFeatureViewModel;return this._featureViewModelMatch(r,e)}_findFlowItem(e){var t;return((t=this.flowItems)==null?void 0:t.findIndex(r=>{if(r.flowType!=="feature")return!1;const i=r.viewModel;return this._featureViewModelMatch(i,e)}))??-1}_renderTooltips(e){return e.toArray().map(t=>this._renderItemTooltip(t))}_renderAssociatedFeatureList(e){return e.toArray().map(t=>this._renderAssociatedFeature(t))}_renderChevronIconNode(e){return T("calcite-icon",{flipRtl:!0,icon:e?"move-up":"chevron-right",scale:"s",slot:"content-end"})}_renderTypeList(e,t){const{messages:r}=this,i=t.slice(0,this._previewDisplayCount),s=i.length<t.length;return T("calcite-list-item",{key:"show-all",label:e.title,open:!0,value:e.id},T("calcite-chip",{scale:"s",slot:"actions-end",value:e.id},t.length),T("calcite-list",{group:e.id},[this._renderTooltips(i),this._renderAssociatedFeatureList(i)],s?T("calcite-list-item",{description:bi(r==null?void 0:r.numberRecords,{number:t.length.toString()}),key:"show-all-item",label:r.showAll,onCalciteListItemSelect:()=>this._showAllAssociations(e)},T("calcite-icon",{icon:"list",scale:"s",slot:"content-end"})):null))}};a([u()],He.prototype,"flowType",void 0),a([u()],He.prototype,"description",void 0),a([u()],He.prototype,"headingLevel",void 0),a([u()],He.prototype,"title",void 0),a([u({type:jh})],He.prototype,"viewModel",void 0),a([u()],He.prototype,"parentFeatureViewModel",void 0),a([u()],He.prototype,"listType",void 0),a([u()],He.prototype,"selectedLayer",void 0),a([u()],He.prototype,"featureVisibleElements",void 0),a([u()],He.prototype,"flowItems",void 0),a([u(),Qt("esri/widgets/Feature/t9n/Feature")],He.prototype,"messages",void 0),a([u(),Qt("esri/t9n/common")],He.prototype,"messagesCommon",void 0),a([u({type:a0,nonNullable:!0})],He.prototype,"visibleElements",void 0),a([u()],He.prototype,"_featuresPerPage",void 0),a([u()],He.prototype,"_maxNumFeatures",void 0),a([u()],He.prototype,"_numAssociatedFeatures",null),a([u()],He.prototype,"_currentFeaturePage",void 0),a([u()],He.prototype,"currentFeaturePage",null),a([u()],He.prototype,"_previewDisplayCount",void 0),a([u()],He.prototype,"_associatedFeatureIntersectionObserverNode",void 0),a([u()],He.prototype,"_tooltipReferenceMap",void 0),a([u()],He.prototype,"_filterText",void 0),He=e$=a([_("esri.widgets.Feature.FeatureUtilityNetworkAssociationType")],He);const wne=He,Hy="esri-feature",zl=`${Hy}-relationship`,ld={base:zl,listContainer:`${zl}__list`,listItem:`${zl}__list-item`,listItemHidden:`${zl}__list-item--hidden`,listContainerQuerying:`${zl}__list--querying`,featureObserver:`${Hy}__feature-observer`,stickySpinnerContainer:`${Hy}__sticky-loading-container`,loadingSpinnerContainer:`${Hy}__loading-container`,expander:`${zl}__expander`};let Or=class extends _r{constructor(t,r){super(t,r),this._featureElementInfo=null,this.flowType="feature-utility-network-associations",this.flowItems=null,this.parentFeatureViewModel=null,this.headingLevel=2,this.viewModel=new jh,this.messages=null,this.messagesCommon=null,this.visibleElements=new a0}initialize(){this._featureElementInfo=new Nh,this.addHandles([W(()=>[this.viewModel.description,this.viewModel.title,this.headingLevel],()=>this._setupFeatureElementInfo(),Ae)])}loadDependencies(){return On({chip:()=>j(()=>import("./calcite-chip-Dc85UrsC.js"),__vite__mapDeps([165,131,152,153,147,132,149,158,130])),icon:()=>j(()=>import("./calcite-icon-z5p-Wr8S.js"),__vite__mapDeps([129,130,131,132])),loader:()=>j(()=>import("./calcite-loader-BM0UX4gd.js"),__vite__mapDeps([144,145,146,147,131,132])),notice:()=>j(()=>import("./calcite-notice-DntFkz7C.js"),__vite__mapDeps([162,163,132,131,152,147,153,164,158,130])),list:()=>j(()=>import("./calcite-list-DjA-Chsk.js"),__vite__mapDeps([148,131,149,132,150,151,152,153,147,154,130,155,156,157,158,145,146,159])),"list-item":()=>j(()=>import("./calcite-list-item-plo1rlZi.js"),__vite__mapDeps([160,131,149,147,132,153,152,151,150,161,146,158,130,145]))})}destroy(){this._featureElementInfo=Ps(this._featureElementInfo)}get description(){return this.viewModel.description}set description(t){this.viewModel.description=t}get title(){return this.viewModel.title}set title(t){this.viewModel.title=t}render(){var r;const{state:t}=this.viewModel;return T("div",{class:this.classes(ld.base,fe.widget)},(r=this._featureElementInfo)==null?void 0:r.render(),t==="loading"?this._renderLoading():t==="disabled"?this._renderAssociationNotFound():this._renderContent())}_renderStickyLoading(){return this.viewModel.state==="querying"?T("div",{class:ld.stickySpinnerContainer,key:"sticky-loader"},this._renderLoadingIcon()):null}_renderLoadingIcon(){return T("calcite-loader",{inline:!0,label:""})}_renderLoading(){return T("div",{class:ld.loadingSpinnerContainer,key:"loading-container"},this._renderLoadingIcon())}_renderAssociationNotFound(){var t;return T("calcite-notice",{icon:"exclamation-mark-triangle",key:"association-not-found",kind:"danger",open:!0,scale:"s",width:"full"},T("div",{slot:"message"},(t=this.messages)==null?void 0:t.noAssociations))}_setupFeatureElementInfo(){var n;const{headingLevel:t,visibleElements:r}=this,i=r.description&&this.description,s=r.title&&this.title;(n=this._featureElementInfo)==null||n.set({description:i,title:s,headingLevel:t})}_getAssociationTypeTitle(t){const{messages:r}=this;if(t.title)return t.title;switch(t.type){case"attachment":return r.associationsAttachments;case"connectivity":return r.associationsConnectivity;case"structure":return r.associationsStructure;case"content":return r.associationsContents;case"container":return r.associationsContainer}}_selectAssociationType(t){var l;const{viewModel:r,flowItems:i,parentFeatureViewModel:s}=this;if(!i)return;const{associationTypes:n}=r;n.forEach(c=>{c.type===t.type?c.open=!0:c.open=!1});const o=new wne({viewModel:r,parentFeatureViewModel:s,listType:t,title:this._getAssociationTypeTitle(t),featureVisibleElements:this.featureVisibleElements,description:(l=this.parentFeatureViewModel)==null?void 0:l.title,flowItems:i});i.push(o)}_renderAssociationType(t){const r=this._getAssociationTypeTitle(t);return T("calcite-list-item",{description:t.description,key:`association-type-${t.type}`,label:r,value:t.type,onCalciteListItemSelect:()=>this._selectAssociationType(t)},T("calcite-chip",{scale:"s",slot:"content-end",value:t.type},this._getFeatureCount(t.type)),T("calcite-icon",{flipRtl:!0,icon:"chevron-right",scale:"s",slot:"content-end"}))}_getFeatureCount(t){switch(t){case"attachment":return this.viewModel.attachmentsFeatureCount;case"structure":return this.viewModel.structureFeatureCount;case"content":return this.viewModel.contentFeatureCount;case"container":return this.viewModel.containerFeatureCount;case"connectivity":return this.viewModel.connectivityFeatureCount}}_renderAssociations(t){return T("div",null,this._getFeatureCount(t.type)>0?this._renderAssociationType(t):null)}_renderContent(){const{state:t,associationTypes:r}=this.viewModel;return T("div",{class:this.classes(ld.listContainer,{[ld.listContainerQuerying]:t==="querying"}),key:"list-container"},t==="ready"?T("calcite-list",null,r.map(i=>this._renderAssociations(i))):null,this._renderStickyLoading())}};a([u()],Or.prototype,"flowType",void 0),a([u()],Or.prototype,"flowItems",void 0),a([u()],Or.prototype,"parentFeatureViewModel",void 0),a([u()],Or.prototype,"featureVisibleElements",void 0),a([u()],Or.prototype,"description",null),a([u()],Or.prototype,"headingLevel",void 0),a([u()],Or.prototype,"title",null),a([u({type:jh})],Or.prototype,"viewModel",void 0),a([u(),Qt("esri/widgets/Feature/t9n/Feature")],Or.prototype,"messages",void 0),a([u(),Qt("esri/t9n/common")],Or.prototype,"messagesCommon",void 0),a([u({type:a0,nonNullable:!0})],Or.prototype,"visibleElements",void 0),Or=a([_("esri.widgets.Feature.FeatureUtilityNetworkAssociations")],Or);const _ne=Or;let $ne=class{constructor(t,r){this.preLayerQueryCallback=t,this.preRequestCallback=r,this.preLayerQueryCallback||(this.preLayerQueryCallback=i=>{}),this.preRequestCallback||(this.preLayerQueryCallback=i=>{})}};var Su;const Sne=1,eA="content-view-models",tA="relationship-view-models",xne="association-view-models",rA={attachmentsContent:!0,chartAnimation:!0,customContent:!0,expressionContent:!0,fieldsContent:!0,mediaContent:!0,textContent:!0,relationshipContent:!0,utilityNetworkAssociationsContent:!0};let Ve=Su=class extends Ec($e){constructor(e){super(e),this._error=null,this._featureAbortController=null,this._associationVMAbortController=null,this._graphicChangedThrottled=d2(this._graphicChanged,Sne,this),this._expressionAttributes=null,this._graphicExpressionAttributes=null,this.abilities={...rA},this.content=null,this.contentViewModels=[],this.description=null,this.defaultPopupTemplateEnabled=!1,this.formattedAttributes=null,this.lastEditInfo=null,this.location=null,this.relatedInfos=new Map,this.title="",this.view=null,this._isAllowedContentType=t=>{const{abilities:r}=this;return t.type==="attachments"&&!!r.attachmentsContent||t.type==="custom"&&!!r.customContent||t.type==="fields"&&!!r.fieldsContent||t.type==="media"&&!!r.mediaContent||t.type==="text"&&!!r.textContent||t.type==="expression"&&!!r.expressionContent||t.type==="relationship"&&!!r.relationshipContent||t.type==="utility-network-associations"&&!!r.utilityNetworkAssociationsContent},this.addHandles(W(()=>[this.graphic,this._effectivePopupTemplate,this.abilities,this.timeZone],()=>this._graphicChangedThrottled(),Ae))}initialize(){this.addHandles(this._graphicChangedThrottled)}destroy(){this._clear(),this._cancelFeatureQuery(),this._error=null,this.graphic=null,this._destroyContentViewModels(),this.relatedInfos.clear()}get _effectivePopupTemplate(){return this.graphic!=null?this.graphic.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled):null}get _fieldInfoMap(){return eie(_3(this._effectivePopupTemplate),this._sourceLayer)}get _sourceLayer(){return a5(this.graphic)}castAbilities(e){return{...rA,...e}}get isTable(){var e;return((e=this._sourceLayer)==null?void 0:e.isTable)||!1}get state(){return this.graphic?this._error?"error":this.waitingForContent?"loading":"ready":"disabled"}set graphic(e){this._featureAbortController=new AbortController,this._set("graphic",(e==null?void 0:e.clone())??null)}get spatialReference(){var e;return((e=this.view)==null?void 0:e.spatialReference)??null}set spatialReference(e){this._override("spatialReference",e)}get timeZone(){var e;return((e=this.view)==null?void 0:e.timeZone)??ls}set timeZone(e){this._overrideIfSome("timeZone",e)}get map(){var e;return((e=this.view)==null?void 0:e.map)||null}set map(e){this._override("map",e)}get waitingForContent(){return!(!this._featureAbortController&&!this._associationVMAbortController)}setActiveMedia(e,t){const r=this.contentViewModels[e];r instanceof Ha&&r.setActiveMedia(t)}nextMedia(e){const t=this.contentViewModels[e];t instanceof Ha&&t.next()}previousMedia(e){const t=this.contentViewModels[e];t instanceof Ha&&t.previous()}async updateGeometry(){var o;const{graphic:e,spatialReference:t,_sourceLayer:r}=this;await(r==null?void 0:r.load());const i=r==null?void 0:r.objectIdField;if(!i||!e||!r)return;const s=(o=e==null?void 0:e.attributes)==null?void 0:o[i];if(s==null)return;const n=[s];if(!e.geometry){const l=await y5({layer:r,graphic:e,outFields:[],objectIds:n,returnGeometry:!0,spatialReference:t}),c=l==null?void 0:l.geometry;c&&(e.geometry=c)}}_clear(){this._set("title",""),this._set("content",null),this._set("formattedAttributes",null)}async _graphicChanged(){this._cancelFeatureQuery(),this._error=null,this._clear();const{graphic:e}=this;if(!e)return;const t=new AbortController;this._featureAbortController=t;try{await this._queryFeature({signal:t.signal})}catch(r){vr(r)||(this._error=r,G.getLogger(this).error("error","The popupTemplate could not be displayed for this feature.",{error:r,graphic:e,popupTemplate:this._effectivePopupTemplate}))}this._featureAbortController===t&&(this._featureAbortController=null)}_cancelFeatureQuery(){const{_featureAbortController:e}=this;e&&e.abort(),this._featureAbortController=null}_compileContentElement(e,t){return e.type==="attachments"?this._compileAttachments(e,t):e.type==="custom"?this._compileCustom(e,t):e.type==="fields"?this._compileFields(e,t):e.type==="media"?this._compileMedia(e,t):e.type==="text"?this._compileText(e,t):e.type==="expression"?this._compileExpression(e,t):e.type==="relationship"?this._compileRelationship(e,t):e.type==="utility-network-associations"?this._compileUtilityNetworkAssociation(e,t):void 0}_compileContent(e){if(this._destroyContentViewModels(),this.graphic)return Array.isArray(e)?e.filter(this._isAllowedContentType).map((t,r)=>this._compileContentElement(t,r)).filter(gl):typeof e=="string"?this._compileText(new cl({text:e}),0).text:e}_destroyContentViewModels(){this.removeHandles(tA),this.removeHandles(eA),this.contentViewModels.forEach(e=>e&&!e.destroyed&&e.destroy()),this._set("contentViewModels",[])}_matchesFeature(e,t){var s;const r=(s=e==null?void 0:e.graphic)==null?void 0:s.getObjectId(),i=t==null?void 0:t.getObjectId();return r!=null&&i!=null&&r===i}_setRelatedFeaturesViewModels({relatedFeatureViewModels:e,relatedFeatures:t,map:r}){const{view:i,spatialReference:s,timeZone:n}=this;t==null||t.filter(Boolean).forEach(o=>{e.some(l=>this._matchesFeature(l,o))||e.add(new Su({abilities:{relationshipContent:!1},map:r,view:i,spatialReference:s,timeZone:n,graphic:o}))}),e.forEach(o=>{(t==null?void 0:t.find(c=>this._matchesFeature(o,c)))||e.remove(o)})}_setExpressionContentVM(e,t){const r=this.formattedAttributes,{contentElement:i,contentElementViewModel:s}=e,n=i==null?void 0:i.type;s&&n&&(n==="fields"&&(this._createFieldsFormattedAttributes({contentElement:i,contentElementIndex:t,formattedAttributes:r}),s.set(this._createFieldsVMParams(i,t))),n==="media"&&(this._createMediaFormattedAttributes({contentElement:i,contentElementIndex:t,formattedAttributes:r}),s.set(this._createMediaVMParams(i,t))),n==="text"&&s.set(this._createTextVMParams(i)))}_compileRelationship(e,t){const{displayCount:r,orderByFields:i,relationshipId:s,title:n,description:o}=e,{_sourceLayer:l,graphic:c,map:p}=this;if(!p5(l))return;const h=new A2({displayCount:r,graphic:c,orderByFields:i,relationshipId:s,layer:l,map:p,...this._compileTitleAndDesc({title:n,description:o})});return this.contentViewModels[t]=h,this.addHandles(pc(()=>h.relatedFeatures,"change",()=>this._setRelatedFeaturesViewModels(h)),tA),e}_matchesGlobalFeature(e,t){const r=e==null?void 0:e.association.globalId,i=t==null?void 0:t.association.globalId;return r!=null&&i!=null&&r===i}async _setUpUtilityNetworkAssociationsViewModels(e,t,r){const{view:i,spatialReference:s,timeZone:n}=this;e.forEach((l,c)=>{const p=t.get(c);p?l.forEach(h=>{p.find(f=>this._matchesGlobalFeature(h,f))||(l.remove(h),l.length===0&&e.delete(c))}):(l.removeAll(),e.delete(c))}),t.forEach((l,c)=>{const p=e.get(c)||new ne;l==null||l.filter(Boolean).forEach(h=>{p.some(f=>this._matchesGlobalFeature(f,h))||p.add({association:h.association,featureViewModel:new Su({abilities:{utilityNetworkAssociationsContent:!1},map:r,view:i,spatialReference:s,timeZone:n,graphic:h.feature}),terminalName:h.terminalName})}),e.set(c,p)});const o=new AbortController;this._associationVMAbortController=o,await this._sortListObjectsByTitle(e,{signal:o.signal}),this._associationVMAbortController===o&&(this._associationVMAbortController=null)}async _sortListObjectsByTitle(e,t){for(const r of e.values()){const i=r.map(s=>SP(()=>s.featureViewModel.state==="ready",t==null?void 0:t.signal));await Promise.all(i),r.sort(this._compareByFeatureTitle)}}_compareByFeatureTitle(e,t){const r=Vm(e.featureViewModel),i=Vm(t.featureViewModel);return r.localeCompare(i,void 0,{numeric:!0})}_compileUtilityNetworkAssociation(e,t){const{title:r,description:i,associationTypes:s}=e,{_sourceLayer:n,graphic:o,map:l}=this;if(!Jre(n))return;const c=new jh({graphic:o,associationTypes:s,layer:n,map:l,...this._compileTitleAndDesc({title:r,description:i})});return this.contentViewModels[t]=c,this.addHandles([W(()=>c.associationFeatures.values(),()=>this._setUpUtilityNetworkAssociationsViewModels(c.associationViewModels,c.associationFeatures,c.map))],xne),e}_compileExpression(e,t){const{expressionInfo:r}=e,{graphic:i,map:s,spatialReference:n,view:o,location:l}=this,c=new E2({expressionInfo:r,graphic:i,interceptor:Su.interceptor,map:s,spatialReference:n,view:o,location:l});return this.contentViewModels[t]=c,this.addHandles(W(()=>c.contentElementViewModel,()=>this._setExpressionContentVM(c,t),Ae),eA),e}_compileAttachments(e,t){const{graphic:r}=this,{description:i,title:s}=e;return this.contentViewModels[t]=new T2({graphic:r,...this._compileTitleAndDesc({title:s,description:i})}),e}_compileCustom(e,t){const{graphic:r}=this,{creator:i,destroyer:s}=e;return this.contentViewModels[t]=new Xm({graphic:r,creator:i,destroyer:s}),e}_compileTitleAndDesc({title:e,description:t}){const{_fieldInfoMap:r,_sourceLayer:i,graphic:s,formattedAttributes:n}=this,o=s==null?void 0:s.attributes,l=this._expressionAttributes,c=n.global;return{title:Ba({attributes:o,fieldInfoMap:r,globalAttributes:c,expressionAttributes:l,layer:i,text:e}),description:Ba({attributes:o,fieldInfoMap:r,globalAttributes:c,expressionAttributes:l,layer:i,text:t})}}_createFieldsVMParams(e,t){const r=this._effectivePopupTemplate,i=this.formattedAttributes,s={...i==null?void 0:i.global,...i==null?void 0:i.content[t]},n=(e==null?void 0:e.fieldInfos)||(r==null?void 0:r.fieldInfos),o=n==null?void 0:n.filter(({fieldName:h})=>!!h&&($2(h)||vn(h)||s.hasOwnProperty(h))),l=r==null?void 0:r.expressionInfos,{description:c,title:p}=e;return{attributes:s,expressionInfos:l,fieldInfos:o,...this._compileTitleAndDesc({title:p,description:c})}}_compileFields(e,t){const r=e.clone(),i=new o0(this._createFieldsVMParams(e,t));return this.contentViewModels[t]=i,r.fieldInfos=i.formattedFieldInfos.slice(),r}_createMediaVMParams(e,t){const{abilities:r,graphic:i,_fieldInfoMap:s,_effectivePopupTemplate:n,relatedInfos:o,_sourceLayer:l,_expressionAttributes:c}=this,p=this.formattedAttributes,h=(i==null?void 0:i.attributes)??{},{description:f,mediaInfos:y,title:m}=e;return{abilities:{chartAnimation:r.chartAnimation},activeMediaInfoIndex:e.activeMediaInfoIndex||0,attributes:h,isAggregate:i==null?void 0:i.isAggregate,layer:l,fieldInfoMap:s,formattedAttributes:{...p==null?void 0:p.global,...p==null?void 0:p.content[t]},expressionAttributes:c,mediaInfos:y,popupTemplate:n,relatedInfos:o,...this._compileTitleAndDesc({title:m,description:f})}}_compileMedia(e,t){const r=e.clone(),i=new Ha(this._createMediaVMParams(e,t));return r.mediaInfos=i.formattedMediaInfos.slice(),this.contentViewModels[t]=i,r}_createTextVMParams(e){var n;const{graphic:t,_fieldInfoMap:r,_sourceLayer:i,_expressionAttributes:s}=this;if(e&&e.text){const o=(t==null?void 0:t.attributes)??{},l=((n=this.formattedAttributes)==null?void 0:n.global)??{};e.text=Ba({attributes:o,fieldInfoMap:r,globalAttributes:l,expressionAttributes:s,layer:i,text:e.text})}return{graphic:t,creator:e.text}}_compileText(e,t){const r=e.clone();return this.contentViewModels[t]=new Xm(this._createTextVMParams(r)),r}_compileLastEditInfo(){const{_effectivePopupTemplate:e,_sourceLayer:t,graphic:r,timeZone:i}=this;if(!e)return;const{lastEditInfoEnabled:s}=e,n=t==null?void 0:t.editFieldsInfo;return s&&n?Xre(n,r==null?void 0:r.attributes,i,t):void 0}_compileTitle(e){var l;const{_fieldInfoMap:t,_sourceLayer:r,graphic:i,_expressionAttributes:s}=this,n=(i==null?void 0:i.attributes)??{},o=((l=this.formattedAttributes)==null?void 0:l.global)??{};return Ba({attributes:n,fieldInfoMap:t,globalAttributes:o,expressionAttributes:s,layer:r,text:e})}async _getTitle(){const{_effectivePopupTemplate:e,graphic:t}=this;return t?Km({type:"title",value:e==null?void 0:e.title,event:{graphic:t}}):null}async _getContent(){const{_effectivePopupTemplate:e,graphic:t}=this;return t?Km({type:"content",value:e==null?void 0:e.content,event:{graphic:t}}):null}async _queryFeature(e){const{_featureAbortController:t,_sourceLayer:r,graphic:i,_effectivePopupTemplate:s}=this,n=this.map,o=this.view,l=this.spatialReference,c=this.location;if(t!==this._featureAbortController||!i)return;await rie({graphic:i,popupTemplate:s,layer:r,spatialReference:l},e);const{content:{value:p},title:{value:h}}=await Rs({content:this._getContent(),title:this._getTitle()}),{expressionAttributes:{value:f}}=await Rs({checkForRelatedFeatures:this._checkForRelatedFeatures(e),expressionAttributes:pne({expressionInfos:s==null?void 0:s.expressionInfos,spatialReference:l,graphic:i,map:n,interceptor:Su.interceptor,view:o,options:e,location:c})});t===this._featureAbortController&&i&&(this._expressionAttributes=f,this._graphicExpressionAttributes={...i.attributes,...f},this._set("formattedAttributes",this._createFormattedAttributes(p)),this._set("title",this._compileTitle(h)),this._set("lastEditInfo",this._compileLastEditInfo()||null),this._set("content",this._compileContent(p)||null))}_createMediaFormattedAttributes({contentElement:e,contentElementIndex:t,formattedAttributes:r}){const{_effectivePopupTemplate:i,graphic:s,relatedInfos:n,_sourceLayer:o,_fieldInfoMap:l,_graphicExpressionAttributes:c,timeZone:p}=this;r.content[t]=_v({fieldInfos:i==null?void 0:i.fieldInfos,graphic:s,attributes:{...c,...e.attributes},layer:o,fieldInfoMap:l,relatedInfos:n,timeZone:p})}_createFieldsFormattedAttributes({contentElement:e,contentElementIndex:t,formattedAttributes:r}){if(e.fieldInfos){const{graphic:i,relatedInfos:s,_sourceLayer:n,_fieldInfoMap:o,_graphicExpressionAttributes:l,timeZone:c}=this;r.content[t]=_v({fieldInfos:e.fieldInfos,graphic:i,attributes:{...l,...e.attributes},layer:n,fieldInfoMap:o,relatedInfos:s,timeZone:c})}}_createFormattedAttributes(e){const{_effectivePopupTemplate:t,graphic:r,relatedInfos:i,_sourceLayer:s,_fieldInfoMap:n,_graphicExpressionAttributes:o,timeZone:l}=this,c=t==null?void 0:t.fieldInfos,p={global:_v({fieldInfos:c,graphic:r,attributes:o,layer:s,fieldInfoMap:n,relatedInfos:i,timeZone:l}),content:[]};return Array.isArray(e)&&e.forEach((h,f)=>{h.type==="fields"&&this._createFieldsFormattedAttributes({contentElement:h,contentElementIndex:f,formattedAttributes:p}),h.type==="media"&&this._createMediaFormattedAttributes({contentElement:h,contentElementIndex:f,formattedAttributes:p})}),p}_checkForRelatedFeatures(e){const{graphic:t,_effectivePopupTemplate:r}=this;return this._queryRelatedInfos(t,_3(r),e)}async _queryRelatedInfos(e,t,r){const{relatedInfos:i,_sourceLayer:s}=this;i.clear();const n=(s==null?void 0:s.associatedLayer)!=null?await(s==null?void 0:s.associatedLayer.load(r)):s;if(!n||!e)return;const o=t.filter(p=>!!p.fieldName&&vn(p.fieldName));if(!(o!=null&&o.length))return;t.forEach(p=>this._configureRelatedInfo(p,n));const l=await Bse({relatedInfos:i,layer:n},r);Object.keys(l).forEach(p=>{var y;const h=i.get(p.toString()),f=(y=l[p])==null?void 0:y.value;h&&f&&(h.layerInfo=f.data)});const c=await Wse({graphic:e,relatedInfos:i,layer:n},r);Object.keys(c).forEach(p=>{var h;jse((h=c[p])==null?void 0:h.value,i.get(p.toString()))})}_configureRelatedInfo(e,t){const{relatedInfos:r}=this,i=Gy(e.fieldName||"");if(!i)return;const{layerId:s,fieldName:n}=i;if(!s)return;const o=r.get(s.toString())||Rse(s,t);o&&(Hse({relatedInfo:o,fieldName:n,fieldInfo:e}),this.relatedInfos.set(s,o))}};Ve.interceptor=new $ne(nie,oie),a([u()],Ve.prototype,"_error",void 0),a([u()],Ve.prototype,"_featureAbortController",void 0),a([u()],Ve.prototype,"_associationVMAbortController",void 0),a([u({readOnly:!0})],Ve.prototype,"_effectivePopupTemplate",null),a([u({readOnly:!0})],Ve.prototype,"_fieldInfoMap",null),a([u({readOnly:!0})],Ve.prototype,"_sourceLayer",null),a([u()],Ve.prototype,"abilities",void 0),a([Ce("abilities")],Ve.prototype,"castAbilities",null),a([u({readOnly:!0})],Ve.prototype,"content",void 0),a([u({readOnly:!0})],Ve.prototype,"contentViewModels",void 0),a([u()],Ve.prototype,"description",void 0),a([u({type:Boolean})],Ve.prototype,"defaultPopupTemplateEnabled",void 0),a([u({readOnly:!0})],Ve.prototype,"isTable",null),a([u({readOnly:!0})],Ve.prototype,"state",null),a([u({readOnly:!0})],Ve.prototype,"formattedAttributes",void 0),a([u({type:ni,value:null})],Ve.prototype,"graphic",null),a([u({readOnly:!0})],Ve.prototype,"lastEditInfo",void 0),a([u({type:Ye})],Ve.prototype,"location",void 0),a([u({readOnly:!0})],Ve.prototype,"relatedInfos",void 0),a([u()],Ve.prototype,"spatialReference",null),a([u()],Ve.prototype,"timeZone",null),a([u({readOnly:!0})],Ve.prototype,"title",void 0),a([u()],Ve.prototype,"map",null),a([u({readOnly:!0})],Ve.prototype,"waitingForContent",null),a([u()],Ve.prototype,"view",void 0),Ve=Su=a([_("esri.widgets.Feature.FeatureViewModel")],Ve);const C2=Ve,Gt="esri-feature",tt={base:Gt,container:`${Gt}__size-container`,title:`${Gt}__title`,main:`${Gt}__main-container`,btn:`${Gt}__button`,icon:`${Gt}__icon`,content:`${Gt}__content`,contentNode:`${Gt}__content-node`,contentNodeText:`${Gt}__content-node--text`,contentElement:`${Gt}__content-element`,text:`${Gt}__text`,lastEditedInfo:`${Gt}__last-edited-info`,fields:`${Gt}__fields`,fieldHeader:`${Gt}__field-header`,fieldData:`${Gt}__field-data`,fieldDataDate:`${Gt}__field-data--date`,loadingSpinnerContainer:`${Gt}__loading-container`},j5=e=>{let t=class extends e{constructor(){super(...arguments),this.renderNodeContent=r=>$5(r)&&!r.destroyed?T("div",{class:tt.contentNode,key:r},r.render()):r instanceof HTMLElement?T("div",{afterCreate:this._attachToNode,bind:r,class:tt.contentNode,key:r}):vie(r)?T("div",{afterCreate:this._attachToNode,bind:r.domNode,class:tt.contentNode,key:r}):null}_attachToNode(r){const i=this;r.appendChild(i)}};return t=a([_("esri.widgets.Feature.support.FeatureContentMixin")],t),t},iA={title:!0,content:!0,lastEditedInfo:!0};let ut=class extends j5(_r){constructor(e,t){super(e,t),this._contentWidgets=[],this.flowType="feature",this.flowItems=null,this.headingLevel=2,this.messages=null,this.messagesCommon=null,this.visibleElements={...iA},this.viewModel=new C2}initialize(){this.addHandles(W(()=>{var e;return(e=this.viewModel)==null?void 0:e.contentViewModels},()=>this._setupContentWidgets(),Ae))}loadDependencies(){return On({notice:()=>j(()=>import("./calcite-notice-DntFkz7C.js"),__vite__mapDeps([162,163,132,131,152,147,153,164,158,130])),loader:()=>j(()=>import("./calcite-loader-BM0UX4gd.js"),__vite__mapDeps([144,145,146,147,131,132]))})}destroy(){this._destroyContentWidgets()}get graphic(){return this.viewModel.graphic}set graphic(e){this.viewModel.graphic=e}get defaultPopupTemplateEnabled(){return this.viewModel.defaultPopupTemplateEnabled}set defaultPopupTemplateEnabled(e){this.viewModel.defaultPopupTemplateEnabled=e}get isTable(){return this.viewModel.isTable}get icon(){return"polygon"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get location(){return this.viewModel.location}set location(e){this.viewModel.location=e}get spatialReference(){return this.viewModel.spatialReference}set spatialReference(e){this.viewModel.spatialReference=e}get timeZone(){return this.viewModel.timeZone}set timeZone(e){this.viewModel.timeZone=e}get title(){return this.viewModel.title}castVisibleElements(e){return{...iA,...e}}get map(){return this.viewModel.map}set map(e){this.viewModel.map=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}setActiveMedia(e,t){return this.viewModel.setActiveMedia(e,t)}nextMedia(e){return this.viewModel.nextMedia(e)}previousMedia(e){return this.viewModel.previousMedia(e)}render(){const{state:e}=this.viewModel,t=T("div",{class:tt.container,key:"container"},this._renderTitle(),e==="error"?this._renderError():e==="loading"?this._renderLoading():this._renderContentContainer());return T("div",{class:this.classes(tt.base,fe.widget)},t)}_renderError(){const{messagesCommon:e,messages:t,visibleElements:r}=this;return T("calcite-notice",{icon:"exclamation-mark-circle",kind:"danger",open:!0,scale:"s"},r.title?T("div",{key:"error-title",slot:"title"},e.errorMessage):null,T("div",{key:"error-message",slot:"message"},t.loadingError))}_renderLoading(){return T("div",{class:tt.loadingSpinnerContainer,key:"loading-container"},T("calcite-loader",{inline:!0,label:""}))}_renderContentContainer(){const{visibleElements:e}=this;return e.content?T("div",{class:tt.main},[this._renderContent(),this._renderLastEditInfo()]):null}_renderTitle(){const{visibleElements:e,title:t}=this;return e.title?T(M2,{class:tt.title,innerHTML:t,level:this.headingLevel}):null}_renderContent(){const e=this.viewModel.content,t="content";if(!e)return null;if(Array.isArray(e))return e.length?T("div",{class:tt.contentNode,key:`${t}-content-elements`},e.map(this._renderContentElement,this)):null;if(typeof e=="string"){const r=this._contentWidgets[0];return!r||r.destroyed?null:T("div",{class:this.classes(tt.contentNode,tt.contentNodeText),key:`${t}-content`},r.render())}return this.renderNodeContent(e)}_renderContentElement(e,t){var i;const{visibleElements:r}=this;if(typeof r.content!="boolean"&&!((i=r.content)!=null&&i[e.type]))return null;switch(e.type){case"attachments":return this._renderAttachments(t);case"custom":return this._renderCustom(e,t);case"fields":return this._renderFields(t);case"media":return this._renderMedia(t);case"text":return this._renderText(e,t);case"expression":return this._renderExpression(t);case"relationship":return this._renderRelationship(t);case"utility-network-associations":return this._renderAssociation(t);default:return null}}_renderAttachments(e){const t=this._contentWidgets[e];if(!t||t.destroyed)return null;const{state:r,attachmentInfos:i}=t.viewModel;return r==="loading"||i.length>0?T("div",{class:this.classes(tt.contentElement),key:this._buildKey("attachments-element",e)},t.render()):null}_renderRelationship(e){const t=this._contentWidgets[e];return t&&!t.destroyed&&this.flowItems?T("div",{class:tt.contentElement,key:this._buildKey("relationship-element",e)},t.render()):null}_renderAssociation(e){const t=this._contentWidgets[e];return t&&!t.destroyed&&this.flowItems?T("div",{class:tt.contentElement,key:this._buildKey("utility-network-association-element",e)},t.render()):null}_renderExpression(e){const t=this._contentWidgets[e];return t&&!t.destroyed&&t.viewModel.contentElement?T("div",{class:tt.contentElement,key:this._buildKey("expression-element",e)},t.render()):null}_renderCustom(e,t){const{creator:r}=e,i=this._contentWidgets[t];return!i||i.destroyed?null:r?T("div",{class:tt.contentElement,key:this._buildKey("custom-element",t)},i.render()):null}_renderFields(e){const t=this._contentWidgets[e];return!t||t.destroyed?null:T("div",{class:tt.contentElement,key:this._buildKey("fields-element",e)},t.render())}_renderMedia(e){const t=this._contentWidgets[e];return!t||t.destroyed?null:T("div",{class:tt.contentElement,key:this._buildKey("media-element",e)},t.render())}_renderLastEditInfo(){const{visibleElements:e,messages:t}=this,{lastEditInfo:r}=this.viewModel;if(!r||!e.lastEditedInfo)return null;const{date:i,user:s}=r,n=r.type==="edit"?s?t.lastEditedByUser:t.lastEdited:s?t.lastCreatedByUser:t.lastCreated,o=bi(n,{date:i,user:s});return T("div",{class:this.classes(tt.lastEditedInfo,tt.contentElement),key:"edit-info-element"},o)}_renderText(e,t){const r=e.text,i=this._contentWidgets[t];return!i||i.destroyed?null:r?T("div",{class:this.classes(tt.contentElement,tt.text),key:this._buildKey("text-element",t)},i.render()):null}_buildKey(e,...t){var r,i;return`${e}__${((i=(r=this.viewModel)==null?void 0:r.graphic)==null?void 0:i.uid)||"0"}-${t.join("-")}`}_destroyContentWidget(e){e&&(e.viewModel=null,!e.destroyed&&e.destroy())}_destroyContentWidgets(){this._contentWidgets.forEach(e=>this._destroyContentWidget(e)),this._contentWidgets=[]}_setupContentWidgets(){this._destroyContentWidgets();const{headingLevel:e,visibleElements:t,flowItems:r,viewModel:i}=this,s=i==null?void 0:i.content,{contentViewModels:n}=i;if(Array.isArray(s))s.forEach((o,l)=>{if(o.type==="attachments"&&(this._contentWidgets[l]=new fie({displayType:o.displayType,headingLevel:t.title&&e<6?e+1:e,viewModel:n[l]})),o.type==="fields"&&(this._contentWidgets[l]=new S5({viewModel:n[l]})),o.type==="media"&&(this._contentWidgets[l]=new k5({viewModel:n[l]})),o.type==="text"&&(this._contentWidgets[l]=new Uy({viewModel:n[l]})),o.type==="custom"&&(this._contentWidgets[l]=new Uy({viewModel:n[l]})),o.type==="expression"&&(this._contentWidgets[l]=new fne({viewModel:n[l]})),o.type==="relationship"){const c=new mne({flowItems:r,featureVisibleElements:t,viewModel:n[l]});this._contentWidgets[l]=c}if(o.type==="utility-network-associations"){const c=new _ne({flowItems:r,parentFeatureViewModel:i,featureVisibleElements:t,viewModel:n[l]});this._contentWidgets[l]=c}},this);else{const o=n[0];o&&!o.destroyed&&(this._contentWidgets[0]=new Uy({viewModel:o}))}this.scheduleRender()}};a([u()],ut.prototype,"flowType",void 0),a([u()],ut.prototype,"graphic",null),a([u()],ut.prototype,"defaultPopupTemplateEnabled",null),a([u()],ut.prototype,"flowItems",void 0),a([u()],ut.prototype,"headingLevel",void 0),a([u({readOnly:!0})],ut.prototype,"isTable",null),a([u()],ut.prototype,"icon",null),a([u()],ut.prototype,"label",null),a([u()],ut.prototype,"location",null),a([u(),Qt("esri/widgets/Feature/t9n/Feature")],ut.prototype,"messages",void 0),a([u(),Qt("esri/t9n/common")],ut.prototype,"messagesCommon",void 0),a([u()],ut.prototype,"spatialReference",null),a([u()],ut.prototype,"timeZone",null),a([u({readOnly:!0})],ut.prototype,"title",null),a([u()],ut.prototype,"visibleElements",void 0),a([Ce("visibleElements")],ut.prototype,"castVisibleElements",null),a([u()],ut.prototype,"map",null),a([u()],ut.prototype,"view",null),a([u({type:C2})],ut.prototype,"viewModel",void 0),ut=a([_("esri.widgets.Feature")],ut);const D5=ut,V5=Object.freeze(Object.defineProperty({__proto__:null,default:D5},Symbol.toStringTag,{value:"Module"}));let Fa=class extends ph.EventedAccessor{constructor(t){super(t),this.location=null,this.screenLocationEnabled=!1,this.view=null,this.addHandles([Oo(()=>{const r=this.screenLocationEnabled?this.view:null;return r?[r.size,r.type==="3d"?r.camera:r.viewpoint]:null},()=>this.notifyChange("screenLocation")),W(()=>this.screenLocation,(r,i)=>{r!=null&&i!=null&&this.emit("view-change")})])}destroy(){this.view=null}get screenLocation(){const{location:t,view:r,screenLocationEnabled:i}=this,s=r==null?void 0:r.spatialReference,n=s?YN(t,s).geometry:null;return i&&n&&(r!=null&&r.ready)?r.toScreen(n):null}};a([u()],Fa.prototype,"location",void 0),a([u()],Fa.prototype,"screenLocation",null),a([u()],Fa.prototype,"screenLocationEnabled",void 0),a([u()],Fa.prototype,"view",void 0),Fa=a([_("esri.widgets.support.AnchorElementViewModel")],Fa);const U5=Fa;let Jy=class extends U5{constructor(t){super(t),this.visible=!1}};a([u()],Jy.prototype,"visible",void 0),Jy=a([_("esri.widgets.Spinner.SpinnerViewModel")],Jy);const z5=Jy,Fv="esri-spinner",kv={base:Fv,spinnerStart:`${Fv}--start`,spinnerFinish:`${Fv}--finish`};let ka=class extends _r{constructor(t,r){super(t,r),this._animationDelay=500,this._animationPromise=null,this.viewModel=new z5}initialize(){this.addHandles(W(()=>this.visible,t=>this._visibleChange(t)))}destroy(){this._animationPromise=null}get location(){return this.viewModel.location}set location(t){this.viewModel.location=t}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}get visible(){return this.viewModel.visible}set visible(t){this.viewModel.visible=t}show(t){const{location:r,promise:i}=t??{};r&&(this.viewModel.location=r),this.visible=!0;const s=()=>this.hide();i&&i.catch(()=>{}).then(s)}hide(){this.visible=!1}render(){const{visible:t}=this,{screenLocation:r}=this.viewModel,i=!!r,s=t&&i,n=!t&&i,o={[kv.spinnerStart]:s,[kv.spinnerFinish]:n},l=this._getPositionStyles();return T("div",{class:this.classes(kv.base,o),styles:l})}_visibleChange(t){if(t)return void(this.viewModel.screenLocationEnabled=!0);const r=uh(this._animationDelay);this._animationPromise=r,r.catch(()=>{}).then(()=>{this._animationPromise===r&&(this.viewModel.screenLocationEnabled=!1,this._animationPromise=null)})}_getPositionStyles(){const{screenLocation:t,view:r}=this.viewModel;if(r==null||t==null)return{};const{padding:i}=r;return{left:t.x-i.left+"px",top:t.y-i.top+"px"}}};a([u()],ka.prototype,"location",null),a([u()],ka.prototype,"view",null),a([u({type:z5})],ka.prototype,"viewModel",void 0),a([u()],ka.prototype,"visible",null),ka=a([_("esri.widgets.Spinner")],ka);const Ine=ka,sr="esri-features",Dt={icon:`${sr}__icon`,actionImage:`${sr}__action-image`,base:sr,container:`${sr}__container`,contentContainer:`${sr}__content-container`,contentFeature:`${sr}__content-feature`,flowItemCollapsed:`${sr}__flow-item--collapsed`,header:`${sr}__header`,footer:`${sr}__footer`,featureMenuObserver:`${sr}__feature-menu-observer`,actionExit:`${sr}__action--exit`,loader:`${sr}__loader`,featuresHeading:`${sr}__heading`,paginationActionBar:`${sr}__pagination-action-bar`,paginationPrevious:`${sr}__pagination-previous`,paginationNext:`${sr}__pagination-next`},Xa=ne.ofType({key:"type",defaultKeyValue:"button",base:Cg,typeMap:{button:Ac,toggle:rS}}),Mo=new Ac({icon:"magnifying-glass-plus",id:"zoom-to-feature",title:"{messages.zoom}",className:yn.zoomInMagnifyingGlass}),sA=new Ac({icon:"trash",id:"remove-selected-feature",title:"{messages.remove}",className:yn.trash}),Lu=new Ac({icon:"magnifying-glass-plus",id:"zoom-to-clustered-features",title:"{messages.zoom}",className:yn.zoomInMagnifyingGlass}),vo=new rS({icon:"table",id:"browse-clustered-features",title:"{messages.browseClusteredFeatures}",className:yn.table,value:!1}),Gn=Mo.clone();let Pa=class extends _r{constructor(t,r){super(t,r),this.messages=null,this.closed=!1,this.closable=!0,this._handleOpenFeature=i=>{this.emit("open-feature",{feature:i})},this._handleZoomToFeature=i=>{this.emit("zoom-to-feature",{featureWidget:i})}}loadDependencies(){return On({action:()=>j(()=>import("./calcite-action-kWOdnWuJ.js"),__vite__mapDeps([169,161,131,146,149,152,147,132,158,153,130,145])),"action-bar":()=>j(()=>import("./calcite-action-bar-B-Oiwcmw.js"),__vite__mapDeps([170,163,132,131,152,147,153,171,172,146,161,149,158,130,145,168,154,164])),"action-group":()=>j(()=>import("./calcite-action-group-BFnE1IxA.js"),__vite__mapDeps([173,171,163,132,152,147,131,153,172,146,161,149,158,130,145,168,154,164])),"flow-item":()=>j(()=>import("./calcite-flow-item-DbxiwvRZ.js"),__vite__mapDeps([174,131,149,152,147,132,153,175,172,146,161,158,130,145,168,154,164,159]))})}render(){const{flowItems:t}=this,r=t==null?void 0:t.toArray();return T(b5,null,r==null?void 0:r.map(i=>this._renderFlowItem(i)))}_handleCloseClick(){this.emit("close")}_handleExitClick(){this.emit("exit")}_handleDrillInBackClick(){var r;const t=(r=this.flowItems)==null?void 0:r.pop();t&&("showAllEnabled"in t.viewModel&&(t.viewModel.showAllEnabled=!1),t&&(t.viewModel=null,t.destroy()))}_getExitMessage(t){switch(t.flowType){case"feature":case"feature-association":return"";case"feature-relationship":return this.messages.exitRelatedRecords;case"feature-utility-network-associations":case"feature-utility-network-association-type":return this.messages.exitAssociations}}_renderFlowItem(t){const{messages:r,closable:i,closed:s}=this,n="graphic"in t&&!t.isTable,o=t.flowType==="feature-association",l=this._getExitMessage(t),c=r.selectFeature;return T("calcite-flow-item",{bind:this,closable:i,closed:s,description:this._getDrillInFlowItemDescription(t),heading:t.title??"",key:`flow-item-${t.viewModel.uid}`,onCalciteFlowItemBack:p=>{p.preventDefault(),this._handleDrillInBackClick()},onCalciteFlowItemClose:this._handleCloseClick},T("calcite-action",{appearance:"transparent",bind:this,class:Dt.actionExit,icon:"move-up",key:"exit-action",onclick:this._handleExitClick,slot:"header-actions-start",text:l,title:l}),n?T("calcite-action",{appearance:"transparent",bind:this,icon:"zoom-to-object",key:"open-feature-action",onclick:()=>this._handleOpenFeature(t),slot:"header-actions-end",text:c,title:c}):null,o?T("calcite-action-bar",{expandDisabled:!0,expanded:!0,key:"header-action-bar",scale:"s",slot:"action-bar"},T("calcite-action-group",{overlayPositioning:"fixed",scale:"s"},this._renderDefaultActions(t))):null,T("div",{class:Dt.container},t.render()))}_renderDefaultActions(t){const r=this._getActionTitle(Gn);return T("calcite-action",{active:Gn.active,appearance:"solid",bind:this,"data-action-uid":Gn.uid,disabled:Gn.disabled,icon:Gn.icon??"question",indicator:Gn.indicator,key:`action-${Gn.uid}`,loading:Gn.active,onclick:()=>this._handleZoomToFeature(t),scale:"s",text:r,textEnabled:!0,title:r})}_getActionTitle(t){const{messages:r}=this,{id:i}=t,s=t.title??"";return i==="zoom-to-feature"?bi(s,{messages:r}):s}_getDrillInFlowItemDescription(t){switch(t.flowType){case"feature":case"feature-association":case"feature-utility-network-associations":return t.viewModel.description??"";case"feature-relationship":return t.featureCountDescription;case"feature-utility-network-association-type":return t.description??""}}};a([u()],Pa.prototype,"flowItems",void 0),a([u(),Qt("esri/widgets/Features/t9n/Features")],Pa.prototype,"messages",void 0),a([u()],Pa.prototype,"closed",void 0),a([u()],Pa.prototype,"closable",void 0),Pa=a([_("esri.widgets.Features.FeaturesDrillIn")],Pa);const Tne=Pa;let Mne=class{constructor(t){this._observable=new hh,this._set=new Set(t)}get size(){return X(this._observable),this._set.size}add(t){const r=this._set.size;return this._set.add(t),this._set.size!==r&&this._observable.notify(),this}clear(){this._set.size>0&&(this._set.clear(),this._observable.notify())}delete(t){const r=this._set.delete(t);return r&&this._observable.notify(),r}entries(){return X(this._observable),this._set.entries()}forEach(t,r){X(this._observable),this._set.forEach((i,s)=>t.call(r,i,s,this),r)}has(t){return X(this._observable),this._set.has(t)}keys(){return X(this._observable),this._set.keys()}values(){return X(this._observable),this._set.values()}[Symbol.iterator](){return X(this._observable),this._set[Symbol.iterator]()}get[Symbol.toStringTag](){return this._set[Symbol.toStringTag]}};const Ene="OBJECTID";var ml;(function(e){e[e.size=22]="size",e[e.lineWidth=50]="lineWidth",e[e.maxSize=120]="maxSize",e[e.maxOutlineSize=80]="maxOutlineSize",e[e.tallSymbolWidth=20]="tallSymbolWidth"})(ml||(ml={}));function Ane(){const e=new Float32Array(6);return e[0]=1,e[3]=1,e}function Cne(e){const t=new Float32Array(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function One(e,t,r,i,s,n){const o=new Float32Array(6);return o[0]=e,o[1]=t,o[2]=r,o[3]=i,o[4]=s,o[5]=n,o}function Fne(e,t){return new Float32Array(e,t,6)}function q5(e,t,r,i){const s=t[i],n=t[i+1];e[i]=r[0]*s+r[2]*n+r[4],e[i+1]=r[1]*s+r[3]*n+r[5]}function kne(e,t,r,i=0,s=0,n=2){const o=s||t.length/n;for(let l=i;l<o;l++)q5(e,t,r,l*n)}Object.freeze(Object.defineProperty({__proto__:null,clone:Cne,create:Ane,createView:Fne,fromValues:One,transform:q5,transformMany:kne},Symbol.toStringTag,{value:"Module"}));function Pne(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function Lne(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function Nne(e,t,r,i,s,n,o){return e[0]=t,e[1]=r,e[2]=i,e[3]=s,e[4]=n,e[5]=o,e}function Rne(e,t){const r=t[0],i=t[1],s=t[2],n=t[3],o=t[4],l=t[5];let c=r*n-i*s;return c?(c=1/c,e[0]=n*c,e[1]=-i*c,e[2]=-s*c,e[3]=r*c,e[4]=(s*l-n*o)*c,e[5]=(i*o-r*l)*c,e):null}function jne(e){return e[0]*e[3]-e[1]*e[2]}function G5(e,t,r){const i=t[0],s=t[1],n=t[2],o=t[3],l=t[4],c=t[5],p=r[0],h=r[1],f=r[2],y=r[3],m=r[4],g=r[5];return e[0]=i*p+n*h,e[1]=s*p+o*h,e[2]=i*f+n*y,e[3]=s*f+o*y,e[4]=i*m+n*g+l,e[5]=s*m+o*g+c,e}function Dne(e,t,r){const i=t[0],s=t[1],n=t[2],o=t[3],l=t[4],c=t[5],p=Math.sin(r),h=Math.cos(r);return e[0]=i*h+n*p,e[1]=s*h+o*p,e[2]=i*-p+n*h,e[3]=s*-p+o*h,e[4]=l,e[5]=c,e}function Vne(e,t,r){const i=t[0],s=t[1],n=t[2],o=t[3],l=t[4],c=t[5],p=r[0],h=r[1];return e[0]=i*p,e[1]=s*p,e[2]=n*h,e[3]=o*h,e[4]=l,e[5]=c,e}function Une(e,t,r){const i=t[0],s=t[1],n=t[2],o=t[3],l=t[4],c=t[5],p=r[0],h=r[1];return e[0]=i,e[1]=s,e[2]=n,e[3]=o,e[4]=i*p+n*h+l,e[5]=s*p+o*h+c,e}function zne(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=r,e[2]=-r,e[3]=i,e[4]=0,e[5]=0,e}function qne(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function Gne(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e}function Bne(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"}function Wne(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+1)}function Hne(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e}function B5(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e}function Jne(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e}function Zne(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e[4]=t[4]+r[4]*i,e[5]=t[5]+r[5]*i,e}function Yne(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]}function Qne(e,t){const r=e[0],i=e[1],s=e[2],n=e[3],o=e[4],l=e[5],c=t[0],p=t[1],h=t[2],f=t[3],y=t[4],m=t[5],g=Bo();return Math.abs(r-c)<=g*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(i-p)<=g*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(s-h)<=g*Math.max(1,Math.abs(s),Math.abs(h))&&Math.abs(n-f)<=g*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(o-y)<=g*Math.max(1,Math.abs(o),Math.abs(y))&&Math.abs(l-m)<=g*Math.max(1,Math.abs(l),Math.abs(m))}const Kne=G5,Xne=B5;Object.freeze(Object.defineProperty({__proto__:null,add:Hne,copy:Pne,determinant:jne,equals:Qne,exactEquals:Yne,frob:Wne,fromRotation:zne,fromScaling:qne,fromTranslation:Gne,identity:Lne,invert:Rne,mul:Kne,multiply:G5,multiplyScalar:Jne,multiplyScalarAndAdd:Zne,rotate:Dne,scale:Vne,set:Nne,str:Bne,sub:Xne,subtract:B5,translate:Une},Symbol.toStringTag,{value:"Module"}));const nA=k("android");k("chrome")||nA&&nA>=4;Ree();ml.size;ml.maxSize;ml.maxOutlineSize;ml.lineWidth;ml.tallSymbolWidth;function W5(e){return e&&"opacity"in e?e.opacity*W5(e.parent):1}async function oA(e,t){var E;if(!e)return;const r=e.sourceLayer,i=(t!=null&&t.useSourceLayer?r:e.layer)??r,s=W5(i);if(e.symbol!=null&&(t==null||t.ignoreGraphicSymbol!==!0)){const C=e.symbol.type==="web-style"?await Die(e.symbol,{...t,cache:t!=null?t.webStyleCache:null}):e.symbol.clone();return Mv(C,null,s),C}const n=(t==null?void 0:t.renderer)??eoe(i);let o=n&&"getSymbolAsync"in n?await n.getSymbolAsync(e,t):null;if(!o)return;if(o=o.type==="web-style"?await o.fetchSymbol({...t,cache:t!=null?t.webStyleCache:null}):o.clone(),!n||!("visualVariables"in n)||!((E=n.visualVariables)!=null&&E.length))return Mv(o,null,s),o;if("arcadeRequiredForVisualVariables"in n&&n.arcadeRequiredForVisualVariables&&(t==null?void 0:t.arcade)==null){const C={...t};C.arcade=await In(),t=C}const{getColor:l,getOpacity:c,getAllSizes:p,getRotationAngle:h}=await j(()=>Promise.resolve().then(()=>OS),void 0),f=[],y=[],m=[],g=[];for(const C of n.visualVariables)switch(C.type){case"color":f.push(C);break;case"opacity":y.push(C);break;case"rotation":g.push(C);break;case"size":C.target||m.push(C)}const b=!!f.length&&f[f.length-1],w=b?l(b,e,t):null,S=!!y.length&&y[y.length-1];let x=S?c(S,e,t):null;if(s!=null&&(x=x!=null?x*s:s),Mv(o,w,x),m.length){const C=p(m,e,t);await Rie(o,C)}for(const C of g)jie(o,h(C,e,t),C.axis);return o}function eoe(e){if(e)return"renderer"in e?e.renderer:void 0}function aA(e){return e&&typeof e.highlight=="function"}const toe="esri.widgets.Popup.PopupViewModel",tg=()=>G.getLogger(toe),roe=e=>{const{event:t,view:r,viewModel:i}=e,{action:s}=t;if(!s)return Promise.reject(new O("trigger-action:missing-arguments","Event has no action"));const{disabled:n,id:o}=s;if(!o)return Promise.reject(new O("trigger-action:invalid-action","action.id is missing"));if(n)return Promise.reject(new O("trigger-action:invalid-action","Action is disabled"));if(o===Mo.id)return J5(i).catch(zv);if(o===Lu.id)return soe(i);if(o===vo.id)return i.browseClusterEnabled=!i.browseClusterEnabled,i.featureMenuOpen=i.browseClusterEnabled,Promise.resolve();if(o===sA.id){i.visible=!1;const{selectedFeature:l}=i;if(!l)return Promise.reject(new O(`trigger-action:${sA.id}`,"selectedFeature is required",{selectedFeature:l}));const{sourceLayer:c}=l;return c?c.remove(l):r==null||r.graphics.remove(l),Promise.resolve()}return Promise.resolve()};function H5(e){const{selectedFeature:t,location:r,view:i}=e;return i?t??r??null:null}function Va(e){var t,r;return!!e&&e.isAggregate&&((r=(t=e.sourceLayer)==null?void 0:t.featureReduction)==null?void 0:r.type)==="cluster"}async function ioe(e,t){if((t==null?void 0:t.type)!=="3d"||!e||e.declaredClass!=="esri.Graphic")return!0;const r=t.getViewForGraphic(e);if(r&&"whenGraphicBounds"in r){let i=null;try{i=await r.whenGraphicBounds(e,{useViewElevation:!0})}catch{}return!i||!i.boundingBox||i.boundingBox[0]===i.boundingBox[3]&&i.boundingBox[1]===i.boundingBox[4]&&i.boundingBox[2]===i.boundingBox[5]}return!0}async function J5(e,t){var f,y;const{location:r,selectedFeature:i,view:s,zoomFactor:n}=e;await((f=t==null?void 0:t.viewModel)==null?void 0:f.updateGeometry());const o=t==null?void 0:t.graphic,l=o!=null&&o.geometry?o:H5(e);if(!s||!l){const m=new O("zoom-to:invalid-target-or-view","Cannot zoom to location without a target and view.",{target:l,view:s});throw tg().error(m),m}const c=s.scale/n,p=(o==null?void 0:o.geometry)??((y=e.selectedFeature)==null?void 0:y.geometry)??r,h=p!=null&&p.type==="point"&&await ioe(o??i,s);Mo.active=!0,Mo.disabled=!0;try{await e.zoomTo({target:{target:l,scale:h?c:void 0}})}catch(m){if(vr(m))return;const g=new O("zoom-to:invalid-graphic","Could not zoom to the location of the graphic.",{graphic:o??i});tg().error(g)}finally{Mo.active=!1,Mo.disabled=!1,e.zoomToLocation=null,h&&(e.location=p)}}async function soe(e){const{selectedFeature:t,view:r}=e;if((r==null?void 0:r.type)!=="2d"){const o=new O("zoomToCluster:invalid-view","View must be 2d MapView.",{view:r});throw tg().error(o),o}if(!t||!Va(t)){const o=new O("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:t});throw tg().error(o),o}const[i,s]=await O2(r,t);Lu.active=!0,Lu.disabled=!0;const{extent:n}=await i.queryExtent(s);n&&await e.zoomTo({target:n}),Lu.active=!1,Lu.disabled=!1}async function noe(e){const{view:t,selectedFeature:r}=e;if(!t||!r)return;const[i,s]=await O2(t,r),{extent:n}=await i.queryExtent(s);e.selectedClusterBoundaryFeature.geometry=n,t.graphics.add(e.selectedClusterBoundaryFeature)}async function ooe(e){const{selectedFeature:t,view:r}=e;if(!r||!t)return;const[i,s]=await O2(r,t);vo.active=!0,vo.disabled=!0;const{features:n}=await i.queryFeatures(s);vo.active=!1,vo.disabled=!1,vo.value=!0,e==null||e.open({features:[t].concat(n),featureMenuOpen:!0})}async function O2(e,t){const r=await e.whenLayerView(t.sourceLayer),i=r.createQuery(),s=t.getObjectId();return i.aggregateIds=s!=null?[s]:[],[r,i]}function aoe(e){vo.value=!1;const t=e.features.filter(r=>Va(r));t.length&&(e.features=t)}const loe=e=>{let t=class extends e{constructor(...r){super(...r),this.goToOverride=null,this.view=null}callGoTo(r){const{view:i}=this;return WA(i),this.goToOverride?this.goToOverride(i,r):i.goTo(r.target,r.options)}};return a([u()],t.prototype,"goToOverride",void 0),a([u()],t.prototype,"view",void 0),t=a([_("esri.widgets.support.GoTo")],t),t},Pv="location-scale-handle",uoe=()=>[Mo.clone()],coe=()=>[Lu.clone(),vo.clone()];let kf=null;function doe(e,t){return e==="building-scene"||t==="2d"&&(e==="map-image"||e==="tile"||e==="imagery"||e==="imagery-tile")}let he=class extends loe(U5){constructor(e){super(e),this._pendingPromises=new Mne,this._fetchFeaturesController=null,this._highlightSelectedFeaturePromise=null,this._highlightActiveFeaturePromise=null,this._selectedClusterFeature=null,this.actions=new Xa,this.activeFeature=null,this.autoCloseEnabled=!1,this.browseClusterEnabled=!1,this.content=null,this.defaultPopupTemplateEnabled=!1,this.featurePage=null,this.featuresPerPage=20,this.featureMenuOpen=!1,this.featureViewModelAbilities=null,this.featureViewModels=[],this.highlightEnabled=!0,this.includeDefaultActions=!0,this.selectedClusterBoundaryFeature=new ni({symbol:new En({outline:{width:1.5,color:"cyan"},style:"none"})}),this.title=null,this.updateLocationEnabled=!1,this.view=null,this.visible=!1,this.zoomFactor=4,this.zoomToLocation=null,this._debouncedLocationUpdate=wn(async t=>{var n,o,l,c;const{spatialReference:r}=this,i=(o=(n=this.selectedFeature)==null?void 0:n.geometry)==null?void 0:o.type,s=this.location??t;if(i&&i!=="mesh"&&r&&s&&this.selectedFeature)if(i!=="point")try{const p=this.selectedFeature;let h=p.geometry;const f=this._getHighlightLayer(p),y=p.getObjectId();if(!f||!this.view)return;if(y){const m=(l=this.view)==null?void 0:l.allLayerViews.find(w=>w.layer.uid===f.uid);if(!m||!("queryFeatures"in m))return;const g=m.createQuery();g.outSpatialReference=r,g.objectIds=[y],g.returnGeometry=!0;const{features:b}=await m.queryFeatures(g);h=(c=b[0])==null?void 0:c.geometry}if(!h||h.type==="mesh")return;if(h=e0(h,r),kf||(kf=await j(()=>import("./geometryEngineAsync-De7j1HaQ.js"),[])),!await kf.intersects(h,s)){const m=(await kf.nearestCoordinate(h,s)).coordinate??s;this.selectedFeature===p&&(this.location=m)}}catch(p){vr(p)||G.getLogger(this).error(p)}else this.location=k_(this.selectedFeature.geometry)??s})}initialize(){this.addHandles([this.on("view-change",()=>this._autoClose()),W(()=>[this.highlightEnabled,this.selectedFeature,this.visible,this.view],()=>this._highlightSelectedFeature()),W(()=>[this.highlightEnabled,this.activeFeature,this.visible,this.view],()=>this._highlightActiveFeature()),W(()=>{var e,t;return(t=(e=this.view)==null?void 0:e.animation)==null?void 0:t.state},e=>this._animationStateChange(e)),W(()=>this.location,e=>this._locationChange(e)),W(()=>this.selectedFeature,e=>this._selectedFeatureChange(e)),W(()=>[this.selectedFeatureIndex,this.featureCount,this.featuresPerPage],()=>this._selectedFeatureIndexChange()),W(()=>[this.featurePage,this.selectedFeatureIndex,this.featureCount,this.featuresPerPage,this.featureViewModels],()=>this._setGraphicOnFeatureViewModels()),W(()=>this.featureViewModels,()=>this._featureViewModelsChange()),this.on("trigger-action",e=>roe({event:e,viewModel:this,view:this.view})),Oo(()=>!this.waitingForResult,()=>this._waitingForResultChange(),Pg),W(()=>[this.features,this.map,this.spatialReference,this.timeZone],()=>this._updateFeatureVMs()),W(()=>{var e;return(e=this.view)==null?void 0:e.scale},()=>this._viewScaleChange()),Oo(()=>!this.visible,()=>this.browseClusterEnabled=!1),W(()=>this.browseClusterEnabled,e=>e?this.enableClusterBrowsing():this.disableClusterBrowsing())])}destroy(){this._cancelFetchingFeatures(),this._pendingPromises.clear(),this.browseClusterEnabled=!1,this.view=null,this.map=null,this.spatialReference=null,this.timeZone=null}get active(){return!(!this.visible||this.waitingForResult)}get allActions(){const e=this._get("allActions")||new Xa;e.removeAll();const{actions:t,defaultActions:r,defaultPopupTemplateEnabled:i,includeDefaultActions:s,selectedFeature:n}=this,o=s?r.concat(t):t,l=n&&(typeof n.getEffectivePopupTemplate=="function"&&n.getEffectivePopupTemplate(i)||n.popupTemplate),c=l==null?void 0:l.actions,p=l!=null&&l.overwriteActions?c:(c==null?void 0:c.concat(o))??o;return p==null||p.filter(Boolean).forEach(h=>e.add(h)),e}get defaultActions(){const e=this._get("defaultActions")||new Xa;return e.removeAll(),e.addMany(Va(this.selectedFeature)?coe():uoe()),e}get featureCount(){return this.features.length}set features(e){const t=e||[];this._set("features",t);const{pendingPromisesCount:r,promiseCount:i,selectedFeatureIndex:s}=this,n=i&&t.length;n&&r&&s===-1?this.selectedFeatureIndex=0:n&&s!==-1||(this.selectedFeatureIndex=t.length?0:-1)}set location(e){var s,n;let t=e;const r=(s=this.spatialReference)==null?void 0:s.isWebMercator;((n=e==null?void 0:e.spatialReference)==null?void 0:n.isWGS84)&&r&&(t=Za(e)),this._set("location",t)}get map(){var e;return((e=this.view)==null?void 0:e.map)??null}set map(e){this._override("map",e)}get pendingPromisesCount(){return this._pendingPromises.size}get promiseCount(){return this.promises.length}get promises(){return this._get("promises")||[]}set promises(e){this._pendingPromises.clear(),this.features=[],Array.isArray(e)&&e.length?(this._set("promises",e),(e=e.slice()).forEach(t=>this._pendingPromises.add(t)),e.reduce((t,r)=>t.finally(()=>r.then(i=>{this._pendingPromises.has(r)&&this._updateFeatures(i)}).finally(()=>this._pendingPromises.delete(r)).catch(()=>{})),Promise.resolve())):this._set("promises",[])}get selectedFeature(){const{features:e,selectedFeatureIndex:t}=this;return t===-1?null:e[t]||null}get selectedFeatureIndex(){const e=this._get("selectedFeatureIndex");return typeof e=="number"?e:-1}set selectedFeatureIndex(e){const{featureCount:t}=this;e=isNaN(e)||e<-1||!t?-1:(e+t)%t,this.activeFeature=null,this._set("selectedFeatureIndex",e)}get selectedFeatureViewModel(){return this.featureViewModels[this.selectedFeatureIndex]||null}get spatialReference(){var e;return((e=this.view)==null?void 0:e.spatialReference)??null}set spatialReference(e){this._override("spatialReference",e)}get state(){const{view:e,map:t}=this;return e?e.ready?"ready":"disabled":t?"ready":"disabled"}get timeZone(){var e;return((e=this.view)==null?void 0:e.timeZone)??ls}set timeZone(e){this._overrideIfSome("timeZone",e)}get waitingForContents(){return this.featureViewModels.some(e=>e.waitingForContent)}get waitingForResult(){return!(!(this._fetchFeaturesController||this.pendingPromisesCount>0)||this.featureCount!==0)}centerAtLocation(){const{view:e}=this,t=H5(this);return t&&e?this.callGoTo({target:{target:t,scale:e.scale}}):Promise.reject(new O("center-at-location:invalid-target-or-view","Cannot center at a location without a target and view.",{target:t,view:e}))}zoomTo(e){return this.callGoTo(e)}clear(){this.set({promises:[],features:[],content:null,title:null,location:null,activeFeature:null})}fetchFeatures(e,t){var i;const{view:r}=this;if(!r||!e)throw new O("fetch-features:invalid-screenpoint-or-view","Cannot fetch features without a screenPoint and view.",{screenPoint:e,view:r});return r.fetchPopupFeatures(e,{pointerType:(i=t==null?void 0:t.event)==null?void 0:i.pointerType,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,signal:t==null?void 0:t.signal})}open(e){const t={updateLocationEnabled:!1,promises:[],fetchFeatures:!1,...e,visible:!0},{fetchFeatures:r}=t;delete t.fetchFeatures,r&&this._setFetchFeaturesPromises(t.location);const i=["actionsMenuOpen","collapsed"];for(const s of i)delete t[s];this.set(t)}triggerAction(e){const t=this.allActions.at(e);t&&!t.disabled&&this.emit("trigger-action",{action:t})}next(){return this.selectedFeatureIndex++,this}previous(){return this.selectedFeatureIndex--,this}disableClusterBrowsing(){aoe(this),this._clearBrowsedClusterGraphics()}async enableClusterBrowsing(){const{view:e,selectedFeature:t}=this;(e==null?void 0:e.type)==="2d"?Va(t)?(await noe(this),await ooe(this)):G.getLogger(this).warn("enableClusterBrowsing:invalid-selectedFeature: Selected feature must represent an aggregate/cluster graphic.",t):G.getLogger(this).warn("enableClusterBrowsing:invalid-view: View must be 2d MapView.",t)}handleViewClick(e){this._fetchFeaturesAndOpen(e)}_animationStateChange(e){this.zoomToLocation||(Mo.disabled=e==="waiting-for-target")}_clearBrowsedClusterGraphics(){var t,r;const e=[this.selectedClusterBoundaryFeature,this._selectedClusterFeature].filter(gl);(r=(t=this.view)==null?void 0:t.graphics)==null||r.removeMany(e),this._selectedClusterFeature=null,this.selectedClusterBoundaryFeature.geometry=null}_viewScaleChange(){if(Va(this.selectedFeature))return this.browseClusterEnabled=!1,this.visible=!1,void this.clear();this.browseClusterEnabled&&(this.features=this.selectedFeature?[this.selectedFeature]:[])}_locationChange(e){const{selectedFeature:t,updateLocationEnabled:r,view:i}=this;i&&r&&e&&(!t||t.geometry)&&this.centerAtLocation()}_selectedFeatureIndexChange(){this.featurePage=this.featureCount>1?Math.floor(this.selectedFeatureIndex/this.featuresPerPage)+1:null}_featureViewModelsChange(){this.featurePage=this.featureCount>1?1:null}_setGraphicOnFeatureViewModels(){const{features:e,featureCount:t,featurePage:r,featuresPerPage:i,featureViewModels:s}=this;if(r===null)return;const n=((r-1)*i+t)%t,o=n+i;s.slice(n,o).forEach((l,c)=>{l&&(l.graphic??(l.graphic=e[n+c]))})}async _selectedFeatureChange(e){var n,o;const{location:t,updateLocationEnabled:r,view:i}=this;if(!e||!i)return;if(this.browseClusterEnabled)return this._selectedClusterFeature&&(i.graphics.remove(this._selectedClusterFeature),this._selectedClusterFeature=null),Va(e)?void 0:(e.symbol=await oA(e),this._selectedClusterFeature=e,void i.graphics.add(this._selectedClusterFeature));const s=(n=e.sourceLayer)==null?void 0:n.type;if(s!=="map-image"&&s!=="imagery"&&s!=="imagery-tile"||(e.symbol=await oA(e)),!r&&t||!e.geometry){if(r&&!e.geometry){await this.centerAtLocation();const l=(o=i.center)==null?void 0:o.clone();l&&(this.location=l)}}else this.location=k_(e.geometry)}_waitingForResultChange(){!this.featureCount&&this.promises&&(this.visible=!1)}async _setFetchFeaturesPromises(e){const{pendingFeatures:t}=await this._fetchFeaturesWithController({mapPoint:e});this.promises=t}_destroyFeatureVMs(){this.featureViewModels.forEach(e=>e&&!e.destroyed&&e.destroy()),this._set("featureViewModels",[])}_updateFeatureVMs(){const{selectedFeature:e,features:t,featureViewModels:r,view:i,spatialReference:s,map:n,timeZone:o,location:l}=this;if(Va(e)||(this.browseClusterEnabled=!1),this._destroyFeatureVMs(),!(t!=null&&t.length))return;const c=r.slice(),p=[];t.forEach((h,f)=>{if(!h)return;let y=null;if(c.some((m,g)=>(m&&m.graphic===h&&(y=m,c.splice(g,1)),!!y)),y)p[f]=y;else{const m=new C2({abilities:this.featureViewModelAbilities,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,spatialReference:s,graphic:h===e?h:null,location:l,map:n,view:i,timeZone:o});p[f]=m}}),c.forEach(h=>h&&!h.destroyed&&h.destroy()),this._set("featureViewModels",p)}async _getScreenPoint(e,t){const{spatialReference:r,view:i}=this;if(!i)return null;await(i==null?void 0:i.when());const s=e==null?void 0:e.spatialReference;return s&&r?(await r0(s,r,null,t),i.toScreen(e)):null}_cancelFetchingFeatures(){const e=this._fetchFeaturesController;e&&e.abort(),this._fetchFeaturesController=null}async _projectScreenPointAndFetchFeatures({mapPoint:e,screenPoint:t,event:r,signal:i}){return this.fetchFeatures(t??await this._getScreenPoint(e??this.location,{signal:i}),{signal:i,event:r})}_fetchFeaturesWithController({mapPoint:e,screenPoint:t,event:r}){this._cancelFetchingFeatures();const i=new AbortController,{signal:s}=i;this._fetchFeaturesController=i;const n=this._projectScreenPointAndFetchFeatures({mapPoint:e,screenPoint:t,signal:s,event:r});return n.catch(()=>{}).then(()=>{this._fetchFeaturesController=null}),n}async _fetchFeaturesAndOpen(e){const{mapPoint:t,screenPoint:r}=e,{view:i}=this;this.removeHandles(Pv),this.addHandles([W(()=>{var n;return(n=this.view)==null?void 0:n.scale},()=>this._debouncedLocationUpdate(t).catch(n=>{vr(n)||G.getLogger(this).error(n)})),Oo(()=>!this.visible,()=>{this.removeHandles(Pv)},{once:!0})],Pv);const{pendingFeatures:s}=await this._fetchFeaturesWithController({mapPoint:t,screenPoint:r,event:e});i!=null&&i.popup&&"open"in i.popup&&i.popup.open({location:t??void 0,promises:s})}_autoClose(){this.autoCloseEnabled&&(this.visible=!1)}async _getLayerView(e,t){return await e.when(),e.whenLayerView(t)}_getHighlightLayer(e){const{layer:t,sourceLayer:r}=e;return r&&"layer"in r&&r.layer?r.layer:(r==null?void 0:r.type)==="map-notes"||(r==null?void 0:r.type)==="subtype-group"?r:t}_getHighlightTarget(e,t,r){if(doe(t.type,r))return e;const i=e.getObjectId();if(i!=null)return i;const s=t.type==="imagery"?void 0:"objectIdField"in t?t.objectIdField||Ene:null,n=e.attributes;return n&&s&&n[s]||e}_mapIncludesLayer(e){var t,r;return!!((r=(t=this.map)==null?void 0:t.allLayers)!=null&&r.includes(e))}async _highlightActiveFeature(){const e="highlight-active-feature";this.removeHandles(e);const{highlightEnabled:t,view:r,activeFeature:i,visible:s}=this;if(!(i&&r&&t&&s))return;const n=this._getHighlightLayer(i);if(!(n&&n instanceof Ww&&this._mapIncludesLayer(n)))return;const o=this._getLayerView(r,n);this._highlightActiveFeaturePromise=o;const l=await o;if(!(l&&aA(l)&&this._highlightActiveFeaturePromise===o&&this.activeFeature&&this.highlightEnabled))return;const c=l.highlight(this._getHighlightTarget(i,n,r.type));this.addHandles(c,e)}async _highlightSelectedFeature(){const e="highlight-selected-feature";this.removeHandles(e);const{selectedFeature:t,highlightEnabled:r,view:i,visible:s}=this;if(!(t&&i&&r&&s))return;const n=this._getHighlightLayer(t);if(!(n&&n instanceof Ww&&this._mapIncludesLayer(n)))return;const o=this._getLayerView(i,n);this._highlightSelectedFeaturePromise=o;const l=await o;if(!(l&&aA(l)&&this._highlightSelectedFeaturePromise===o&&this.selectedFeature&&this.highlightEnabled&&this.visible))return;const c=l.highlight(this._getHighlightTarget(t,n,i.type));this.addHandles(c,e)}_updateFeatures(e){const{features:t}=this,r=e.filter(i=>!t.includes(i));r!=null&&r.length&&(this.features=t.concat(r))}};a([u()],he.prototype,"_fetchFeaturesController",void 0),a([u({type:Xa})],he.prototype,"actions",void 0),a([u({readOnly:!0})],he.prototype,"active",null),a([u()],he.prototype,"activeFeature",void 0),a([u({readOnly:!0})],he.prototype,"allActions",null),a([u()],he.prototype,"autoCloseEnabled",void 0),a([u()],he.prototype,"browseClusterEnabled",void 0),a([u()],he.prototype,"content",void 0),a([u({type:Xa,readOnly:!0})],he.prototype,"defaultActions",null),a([u({type:Boolean})],he.prototype,"defaultPopupTemplateEnabled",void 0),a([u({readOnly:!0})],he.prototype,"featureCount",null),a([u()],he.prototype,"featurePage",void 0),a([u({value:[]})],he.prototype,"features",null),a([u()],he.prototype,"featuresPerPage",void 0),a([u()],he.prototype,"featureMenuOpen",void 0),a([u()],he.prototype,"featureViewModelAbilities",void 0),a([u({readOnly:!0})],he.prototype,"featureViewModels",void 0),a([u()],he.prototype,"highlightEnabled",void 0),a([u()],he.prototype,"includeDefaultActions",void 0),a([u({type:Ye})],he.prototype,"location",null),a([u()],he.prototype,"map",null),a([u({readOnly:!0})],he.prototype,"pendingPromisesCount",null),a([u({readOnly:!0})],he.prototype,"promiseCount",null),a([u()],he.prototype,"promises",null),a([u({readOnly:!0})],he.prototype,"selectedClusterBoundaryFeature",void 0),a([u({value:null,readOnly:!0})],he.prototype,"selectedFeature",null),a([u({value:-1})],he.prototype,"selectedFeatureIndex",null),a([u({readOnly:!0})],he.prototype,"selectedFeatureViewModel",null),a([u({readOnly:!0})],he.prototype,"state",null),a([u()],he.prototype,"timeZone",null),a([u()],he.prototype,"title",void 0),a([u()],he.prototype,"updateLocationEnabled",void 0),a([u()],he.prototype,"view",void 0),a([u()],he.prototype,"visible",void 0),a([u({readOnly:!0})],he.prototype,"waitingForContents",null),a([u({readOnly:!0})],he.prototype,"waitingForResult",null),a([u()],he.prototype,"zoomFactor",void 0),a([u()],he.prototype,"zoomToLocation",void 0),a([u()],he.prototype,"centerAtLocation",null),he=a([_("esri.widgets.Features.FeaturesViewModel")],he);const F2=he;let Hi=class extends $e{constructor(){super(...arguments),this.actionBar=!0,this.closeButton=!0,this.collapseButton=!1,this.featureNavigation=!0,this.featureListLayerTitle=!0,this.flow=!0,this.heading=!0,this.spinner=!0}};a([u({type:Boolean,nonNullable:!0})],Hi.prototype,"actionBar",void 0),a([u({type:Boolean,nonNullable:!0})],Hi.prototype,"closeButton",void 0),a([u({type:Boolean,nonNullable:!0})],Hi.prototype,"collapseButton",void 0),a([u({type:Boolean,nonNullable:!0})],Hi.prototype,"featureNavigation",void 0),a([u({type:Boolean,nonNullable:!0})],Hi.prototype,"featureListLayerTitle",void 0),a([u({type:Boolean,nonNullable:!0})],Hi.prototype,"flow",void 0),a([u({type:Boolean,nonNullable:!0})],Hi.prototype,"heading",void 0),a([u({type:Boolean,nonNullable:!0})],Hi.prototype,"spinner",void 0),Hi=a([_("esri.widgets.Features.FeaturesVisibleElements")],Hi);const Z5=Hi,lA="selected-index",poe=0,uA="features-spinner";function cA(e){return(e==null?void 0:e.declaredClass.startsWith("esri.layers."))??!1}let we=class extends j5(_r){constructor(e,t){super(e,t),this._featureMenuIntersectionObserverCallback=([r])=>{r!=null&&r.isIntersecting&&this.viewModel.featurePage!=null&&this.viewModel.featurePage++},this._featureMenuIntersectionObserver=new IntersectionObserver(this._featureMenuIntersectionObserverCallback,{root:window.document}),this._featureMenuIntersectionObserverNode=null,this._spinner=null,this._feature=null,this._focusAbortController=null,this._drillInFlowItems=new ne,this._drillInWidget=new Tne({flowItems:this._drillInFlowItems}),this._rootFlowItemNode=null,this._featureMenuViewportNode=null,this._actionBarMenuNode=null,this.collapsed=!1,this.featureNavigationTop=!1,this.headerActions=new Xa,this.headingLevel=2,this.messages=null,this.messagesCommon=null,this.responsiveActionsEnabled=!1,this.viewModel=new F2,this.visibleElements=new Z5,this._renderAction=(r,i)=>{const s=this._getActionTitle(r),{type:n,active:o,uid:l,disabled:c,indicator:p}=r;return r.visible?T("calcite-action",{active:n==="toggle"&&r.value,appearance:"solid",bind:this,"data-action-uid":l,disabled:c,icon:this._getActionIcon(r),indicator:p,key:`action-${i}`,loading:o,onclick:this._triggerAction,scale:"s",text:s,title:this._hideActionText?s:void 0},this._getFallbackIcon(r)):null},this._openFeatureMenu=()=>{this.featureMenuOpen=!0,this._focusFlowItemNode("menu-flow-item")},this._previousFeature=()=>{this.viewModel.selectedFeatureIndex--},this._nextFeature=()=>{this.viewModel.selectedFeatureIndex++},this._handleFeatureMenuBack=()=>{this.featureMenuOpen&&(this._focusFlowItemNode("root-flow-item"),this.featureMenuOpen=!1)},this._displaySpinnerThrottled=d2(()=>this._displaySpinner(),poe),this._addSelectedFeatureIndexHandle(),this.addHandles([this._displaySpinnerThrottled,W(()=>{var r;return(r=this.viewModel)==null?void 0:r.active},()=>this._toggleScreenLocationEnabled()),W(()=>{var r;return(r=this.viewModel)==null?void 0:r.active},r=>this._drillInWidget.closed=!r),W(()=>{var r;return(r=this.visibleElements)==null?void 0:r.closeButton},r=>this._drillInWidget.closable=r),W(()=>{var r;return(r=this.visibleElements)==null?void 0:r.spinner},r=>this._spinnerEnabledChange(r)),W(()=>{var r;return(r=this.viewModel)==null?void 0:r.view},(r,i)=>this._viewChange(r,i)),W(()=>{var r,i;return(i=(r=this.viewModel)==null?void 0:r.view)==null?void 0:i.ready},(r,i)=>this._viewReadyChange(r??!1,i??!1)),W(()=>{var r,i;return[(r=this.viewModel)==null?void 0:r.waitingForResult,(i=this.viewModel)==null?void 0:i.location]},()=>{this._hideSpinner(),this._displaySpinnerThrottled()}),W(()=>{var r;return(r=this.viewModel)==null?void 0:r.screenLocation},()=>this._closeOpenActionMenu()),W(()=>this.selectedFeatureWidget,()=>this._destroyDrillInFlowItemWidgets()),W(()=>{var i;const r=(i=this.selectedFeatureWidget)==null?void 0:i.viewModel;return[r==null?void 0:r.title,r==null?void 0:r.state]},()=>this._setTitleFromFeatureWidget()),W(()=>{var i;const r=(i=this.selectedFeatureWidget)==null?void 0:i.viewModel;return[r==null?void 0:r.content,r==null?void 0:r.state]},()=>this._setContentFromFeatureWidget()),W(()=>{var r;return(r=this.viewModel)==null?void 0:r.featureViewModels},()=>this._featureMenuViewportScrollTop()),this._drillInWidget.on("close",()=>this.close()),this._drillInWidget.on("exit",()=>this._destroyDrillInFlowItemWidgets()),this._drillInWidget.on("open-feature",({feature:r})=>this._openRelatedFeature(r)),this._drillInWidget.on("zoom-to-feature",({featureWidget:r})=>J5(this.viewModel,r))])}loadDependencies(){return On({action:()=>j(()=>import("./calcite-action-kWOdnWuJ.js"),__vite__mapDeps([169,161,131,146,149,152,147,132,158,153,130,145])),"action-bar":()=>j(()=>import("./calcite-action-bar-B-Oiwcmw.js"),__vite__mapDeps([170,163,132,131,152,147,153,171,172,146,161,149,158,130,145,168,154,164])),"action-group":()=>j(()=>import("./calcite-action-group-BFnE1IxA.js"),__vite__mapDeps([173,171,163,132,152,147,131,153,172,146,161,149,158,130,145,168,154,164])),button:()=>j(()=>import("./calcite-button-BIhUpE-6.js"),__vite__mapDeps([176,156,131,149,157,158,152,147,132,153,130,145,146])),flow:()=>j(()=>import("./calcite-flow-CF8uLjCp.js"),__vite__mapDeps([177,132,152])),"flow-item":()=>j(()=>import("./calcite-flow-item-DbxiwvRZ.js"),__vite__mapDeps([174,131,149,152,147,132,153,175,172,146,161,158,130,145,168,154,164,159])),list:()=>j(()=>import("./calcite-list-DjA-Chsk.js"),__vite__mapDeps([148,131,149,132,150,151,152,153,147,154,130,155,156,157,158,145,146,159])),"list-item":()=>j(()=>import("./calcite-list-item-plo1rlZi.js"),__vite__mapDeps([160,131,149,147,132,153,152,151,150,161,146,158,130,145])),"list-item-group":()=>j(()=>import("./calcite-list-item-group-BFPtvMAW.js"),__vite__mapDeps([178,149,150])),loader:()=>j(()=>import("./calcite-loader-BM0UX4gd.js"),__vite__mapDeps([144,145,146,147,131,132]))})}destroy(){var e,t,r;this._destroyDrillInFlowItemWidgets(),this._destroySelectedFeatureWidget(),this._destroySpinner(),this._unobserveFeatureMenuObserver(),(e=this._featureMenuIntersectionObserver)==null||e.disconnect(),(t=this._drillInWidget)==null||t.destroy(),(r=this._focusAbortController)==null||r.abort()}get _hideActionText(){var t;if(!this.responsiveActionsEnabled)return!1;const e=(t=this.view)==null?void 0:t.widthBreakpoint;return e==="xsmall"||e==="small"||e==="medium"}get _featureNavigationVisible(){return this.viewModel.active&&this.viewModel.featureCount>1&&this.visibleElements.featureNavigation}get _isCollapsed(){return this._collapseEnabled&&this.collapsed}get _collapseEnabled(){return this.visibleElements.collapseButton&&!!this.title&&!!this.content}get active(){return this.viewModel.active}get content(){return this.viewModel.content}set content(e){this.viewModel.content=e}get icon(){return null}get featureMenuOpen(){return this.viewModel.featureMenuOpen}set featureMenuOpen(e){this.viewModel.featureMenuOpen=e}get features(){return this.viewModel.features}set features(e){this.viewModel.features=e}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get location(){return this.viewModel.location}set location(e){this.viewModel.location=e}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get map(){return this.viewModel.map}set map(e){this.viewModel.map=e}get promises(){return this.viewModel.promises}set promises(e){this.viewModel.promises=e}get selectedFeature(){return this.viewModel.selectedFeature}get selectedDrillInFeature(){const e=Array.from(this._drillInFlowItems).at(-1);if(!e)return null;const{flowType:t}=e;return t==="feature-association"||t==="feature-relationship"?e.graphic??null:null}get selectedFeatureIndex(){return this.viewModel.selectedFeatureIndex}set selectedFeatureIndex(e){this.viewModel.selectedFeatureIndex=e}get selectedFeatureWidget(){const{_feature:e,headingLevel:t,_drillInFlowItems:r,timeZone:i,spatialReference:s,map:n}=this,{selectedFeatureViewModel:o}=this.viewModel,l={title:!1};return o?(e?(e.viewModel=o,e.visibleElements=l):this._feature=new D5({flowItems:r,headingLevel:t+1,timeZone:i,spatialReference:s,map:n,viewModel:o,visibleElements:l}),this._feature):null}get spatialReference(){return this.viewModel.spatialReference}set spatialReference(e){this.viewModel.spatialReference=e}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}get timeZone(){return this.viewModel.timeZone}set timeZone(e){this.viewModel.timeZone=e}get updateLocationEnabled(){return this.viewModel.updateLocationEnabled}set updateLocationEnabled(e){this.viewModel.updateLocationEnabled=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}get visible(){return this.viewModel.visible}set visible(e){this.viewModel.visible=e}blur(){var t;const{active:e}=this.viewModel;e?(t=this._rootFlowItemNode)==null||t.blur():G.getLogger(this).warn("Features can only be blurred when currently active.")}clear(){return this.viewModel.clear()}close(){this.viewModel.visible=!1}fetchFeatures(e,t){return this.viewModel.fetchFeatures(e,t)}focus(){const{active:e}=this.viewModel;e?this._focusFlowItemNode(this.featureMenuOpen?"menu-flow-item":"root-flow-item"):G.getLogger(this).warn("Features can only be focused when currently active.")}next(){return this.viewModel.next()}open(e){this.removeHandles(lA);const t={collapsed:(e==null?void 0:e.collapsed)??!1};this.set(t),this.viewModel.open(e),this.addHandles(Oo(()=>!this.viewModel.waitingForResult,()=>this._addSelectedFeatureIndexHandle(),{once:!0}))}previous(){return this.viewModel.previous()}triggerAction(e){return this.viewModel.triggerAction(e)}render(){return T("div",{bind:this,class:this.classes(Dt.base,fe.widget,fe.panel),onkeydown:this._onMainKeydown},this._renderHeader(),this._renderContentContainer())}_renderFeatureNavigation(){return[this._renderPagination(),this._renderFeatureMenuButton()]}_renderHeader(){return!this.featureMenuOpen&&this.featureNavigationTop&&this._featureNavigationVisible?T("div",{class:Dt.header,key:"header-actions"},this._renderFeatureNavigation()):null}_renderFooter(){return this.featureMenuOpen||this.featureNavigationTop||!this._featureNavigationVisible?null:T("div",{class:Dt.footer,key:"footer-actions",slot:"footer"},this._renderFeatureNavigation())}_renderFeatureMenuButton(){const{messages:e,viewModel:t}=this,{featureCount:r,selectedFeatureIndex:i,pendingPromisesCount:s}=t;return T("calcite-action",{appearance:"solid",bind:this,icon:"list",key:"feature-menu-button",label:e.selectFeature,loading:s>0,onclick:this._openFeatureMenu,scale:"s",text:bi(e.pageText,{index:br(i+1),total:br(r)}),textEnabled:!0,title:e.selectFeature})}_renderPagination(){const{previous:e,next:t}=this.messagesCommon.pagination;return T("calcite-action-bar",{class:Dt.paginationActionBar,expandDisabled:!0,key:"pagination-action-bar",layout:"horizontal",overflowActionsDisabled:!0,scale:"s"},T("calcite-action-group",{scale:"s"},T("calcite-action",{appearance:"solid",class:Dt.paginationPrevious,icon:"chevron-left",iconFlipRtl:!0,label:e,onclick:this._previousFeature,scale:"s",text:e,title:e}),T("calcite-action",{appearance:"solid",icon:"chevron-right",iconFlipRtl:!0,label:t,onclick:this._nextFeature,scale:"s",text:t,title:t})))}_renderFeatureMenuItem(e){const{selectedFeatureViewModel:t,featureViewModels:r}=this.viewModel,i=e===t,s=r.indexOf(e);return T("calcite-list-item",{bind:this,"data-feature-index":s,key:`feature-menu-item-${e.uid}`,onblur:this._removeActiveFeature,onfocus:this._setActiveFeature,onmouseleave:this._removeActiveFeature,onmouseover:this._setActiveFeature,selected:i,onCalciteListItemSelect:this._selectFeature},T("span",{innerHTML:e.title||this.messagesCommon.untitled,slot:"content"}))}_groupResultsByLayer(){const{featureViewModels:e}=this.viewModel,t=new Map;return e.forEach(r=>{const i=r==null?void 0:r.graphic;if(!i)return;const{layer:s,sourceLayer:n}=i,o=(cA(s)?s:null)||(cA(n)?n:null),l=t.get(o)??[];t.set(o,[...l,r])}),t}_renderFeatureMenu(){const{featureViewModels:e}=this.viewModel,t=this._groupResultsByLayer();return e.length?T("calcite-list",{selectionAppearance:"icon",selectionMode:"single"},Array.from(t.keys(),r=>{var n;const i=(n=t.get(r))==null?void 0:n.map(o=>this._renderFeatureMenuItem(o)),s=r?r.title??this.messagesCommon.untitled:null;return this.visibleElements.featureListLayerTitle&&s!==null?T("calcite-list-item-group",{heading:s,key:(r==null?void 0:r.uid)||"map-graphics"},i):i})):null}_renderHeaderAction(e,t){const r=e.title||"";return e.visible?T("calcite-action",{active:e.type==="toggle"&&e.value,appearance:"solid",bind:this,"data-action-uid":e.uid,disabled:e.disabled,icon:e.icon??void 0,indicator:e.indicator,key:`header-action-${t}`,loading:e.active,onclick:this._triggerHeaderAction,slot:"header-actions-end",text:r,title:r}):null}_renderHeaderActions(){return this.headerActions.map((e,t)=>this._renderHeaderAction(e,t)).toArray()}_renderContentFeature(){const{headingLevel:e,visibleElements:t,_isCollapsed:r,_collapseEnabled:i,featureNavigationTop:s}=this,{title:n,active:o}=this.viewModel,l=t.heading&&n?n:"";return T("calcite-flow-item",{afterCreate:this._storeRootFlowItemNode,bind:this,class:this.classes({[Dt.contentFeature]:!0,[Dt.flowItemCollapsed]:r}),closable:t.closeButton,closed:!o,collapsed:r,collapseDirection:s?"down":"up",collapsible:i,headingLevel:e,key:"root-flow-item",onCalciteFlowItemClose:this.close,onCalciteFlowItemToggle:this._handleCollapseToggle},l?T(M2,{class:this.classes(Dt.featuresHeading,fe.heading),innerHTML:l,key:"header-content",level:this.headingLevel,slot:"header-content"}):null,this._renderHeaderActions(),this._renderActionBar(),r?null:T("div",{class:this.classes(Dt.container,Dt.contentContainer)},this._renderContent()),this._renderFooter())}_renderFeatureMenuContainer(){const{viewModel:e,featureMenuOpen:t,messages:r,messagesCommon:i}=this,{active:s,featureViewModels:n,pendingPromisesCount:o}=e;return t?T("calcite-flow-item",{afterCreate:this._storeFeatureMenuFlowItemNode,bind:this,closable:!1,closed:!s,description:bi(r.total,{total:n.length}),heading:r.selectFeature,key:"feature-menu",loading:e.waitingForContents,onCalciteFlowItemBack:l=>{l.preventDefault(),this._handleFeatureMenuBack()}},o>0?T("calcite-loader",{class:Dt.loader,inline:!0,key:"feature-menu-loader",label:i.loading,slot:"header-actions-end"}):null,T("div",{class:Dt.container},this._renderFeatureMenu()),T("div",{afterCreate:this._featureMenuIntersectionObserverCreated,bind:this,class:Dt.featureMenuObserver}),T("calcite-button",{appearance:"transparent",onclick:this._handleFeatureMenuBack,slot:"footer-actions",width:"full"},i.back)):null}_renderContentContainer(){const e=[this._renderContentFeature(),this._renderFeatureMenuContainer(),this._drillInWidget.render()];return this.visibleElements.flow?T("calcite-flow",{key:"content-container"},e):e}_getFallbackIcon(e){const{className:t,icon:r}=e;if(r)return null;const i=MX({action:e,feature:this.selectedFeature}),s={[Dt.icon]:!!t,[Dt.actionImage]:!!i};return t&&(s[t]=!0),i||t?T("span",{"aria-hidden":"true",class:this.classes(Dt.icon,s),key:"icon",styles:TX(i)}):null}_renderActionBar(){var e;return!this._isCollapsed&&this.visibleElements.actionBar&&((e=this.viewModel.allActions)!=null&&e.length)?T("calcite-action-bar",{expandDisabled:!0,expanded:!this._hideActionText,key:"header-action-bar",scale:"s",slot:"action-bar"},T("calcite-action-group",{afterCreate:t=>this._actionBarMenuNode=t,overlayPositioning:"fixed",scale:"s"},this._renderActions())):null}_renderActions(){return this.viewModel.allActions.toArray().map(this._renderAction)}_renderContent(){var t;const e=(t=this.viewModel)==null?void 0:t.content;return e?typeof e=="string"?T("div",{class:tt.contentNode,innerHTML:e,key:e}):this.renderNodeContent(e):null}_handleCollapseToggle(){this.collapsed=!this.collapsed}async _openRelatedFeature(e){await e.viewModel.updateGeometry();const t=e.graphic,r=t==null?void 0:t.geometry;if(r==null||t==null)return;this._destroyDrillInFlowItemWidgets(),await this.viewModel.zoomTo({target:r});const i=k_(r);this.open({features:[t],location:i??void 0})}async _focusFlowItemNode(e){var i;(i=this._focusAbortController)==null||i.abort(),this._focusAbortController=new AbortController;const t=this._focusAbortController.signal;await bn(p$(t));const r=e==="menu-flow-item"?this._featureMenuViewportNode:this._rootFlowItemNode;Tee(r)}_storeRootFlowItemNode(e){this._rootFlowItemNode=e}_storeFeatureMenuFlowItemNode(e){this._featureMenuViewportNode=e}_setActiveFeature(e){var i;const{viewModel:t}=this,r=e.currentTarget["data-feature-index"];t.activeFeature=((i=t.features)==null?void 0:i[r])||null}_removeActiveFeature(){this.viewModel.activeFeature=null}_selectFeature(e){const t=e.currentTarget["data-feature-index"];isNaN(t)||(this.viewModel.selectedFeatureIndex=t),this._handleFeatureMenuBack()}_unobserveFeatureMenuObserver(){this._featureMenuIntersectionObserverNode&&this._featureMenuIntersectionObserver.unobserve(this._featureMenuIntersectionObserverNode)}_featureMenuIntersectionObserverCreated(e){this._unobserveFeatureMenuObserver(),this._featureMenuIntersectionObserver.observe(e),this._featureMenuIntersectionObserverNode=e}_getActionIcon(e){return e.icon?e.icon:e.image||e.className?void 0:"question"}_getActionTitle(e){const{messages:t,selectedFeature:r,messagesCommon:i}=this,{id:s}=e,n=r==null?void 0:r.attributes,o=e.title??"",l=s==="zoom-to-feature"?bi(o,{messages:t}):s==="remove-selected-feature"?bi(o,{messages:i}):s==="zoom-to-clustered-features"||s==="browse-clustered-features"?bi(o,{messages:t}):e.title;return l&&n?bi(l,n):l??""}_onMainKeydown(e){const{key:t}=e;t==="ArrowLeft"&&(e.stopPropagation(),this._handleFeatureMenuBack(),this.previous()),t==="ArrowRight"&&(e.stopPropagation(),this._handleFeatureMenuBack(),this.next())}_featureMenuViewportScrollTop(){this._featureMenuViewportNode&&this._featureMenuViewportNode.scrollContentTo({top:0})}_setContentFromFeatureWidget(){const{selectedFeatureWidget:e}=this;e&&(this.viewModel.content=e)}_setTitleFromFeatureWidget(){const{selectedFeatureWidget:e,messagesCommon:t}=this,r=e==null?void 0:e.viewModel;e&&(this.viewModel.title=(r==null?void 0:r.state)==="error"?t==null?void 0:t.errorMessage:(r==null?void 0:r.title)||"")}_addSelectedFeatureIndexHandle(){const e=W(()=>{var t;return(t=this.viewModel)==null?void 0:t.selectedFeatureIndex},(t,r)=>this._selectedFeatureIndexUpdated(t,r));this.addHandles(e,lA)}_selectedFeatureIndexUpdated(e,t){const{featureCount:r}=this.viewModel;r&&e!==t&&e!==-1&&(this._destroyDrillInFlowItemWidgets(),this._rootFlowItemNode&&this._rootFlowItemNode.scrollContentTo({top:0}))}_triggerHeaderAction(e){const t=e.currentTarget;if(t.disabled)return;const r=t.dataset.actionUid,i=this.headerActions.find(({uid:s})=>s===r);i&&!i.disabled&&((i==null?void 0:i.type)==="toggle"&&(i.value=!i.value),this.emit("trigger-header-action",{action:i}))}_triggerAction(e){const t=e.currentTarget;if(t.disabled)return;const r=t.dataset.actionUid,{allActions:i}=this.viewModel,s=i.findIndex(o=>o.uid===r),n=i.at(s);n&&n.type==="toggle"&&(n.value=!n.value),this.viewModel.triggerAction(s)}_createSpinner(e){e&&(this._spinner=new Ine({view:e}),e.ui.add(this._spinner,{key:uA,position:"manual",internal:!0}))}_wireUpView(e){var t;this._destroySpinner(),e&&((t=this.visibleElements)!=null&&t.spinner)&&this._createSpinner(e)}_hideSpinner(){const{_spinner:e}=this;e&&(e.location=null,e.hide())}_viewReadyChange(e,t){var r;e?this._wireUpView((r=this.viewModel)==null?void 0:r.view):t&&this.viewModel.clear()}_viewChange(e,t){e&&t&&this.viewModel.clear()}_destroySelectedFeatureWidget(){const{_feature:e}=this;e&&(e.viewModel=null,!e.destroyed&&e.destroy()),this._feature=null}_closeOpenActionMenu(){const{_actionBarMenuNode:e}=this;e&&(e.menuOpen=!1)}_destroyDrillInFlowItemWidgets(){this._drillInFlowItems.drain(e=>{"showAllEnabled"in e.viewModel&&(e.viewModel.showAllEnabled=!1),e.viewModel=null,e.destroy()})}_toggleScreenLocationEnabled(){const{viewModel:e}=this;e&&(e.screenLocationEnabled=e.active)}_displaySpinner(){const{_spinner:e}=this;if(!e)return;const{location:t,waitingForResult:r}=this.viewModel;r&&t?e.show({location:t}):e.hide()}_destroySpinner(){var r;const{_spinner:e,view:t}=this;e&&((r=t==null?void 0:t.ui)==null||r.remove(e,uA),e.destroy(),this._spinner=null)}_spinnerEnabledChange(e){var t;this._destroySpinner(),e&&this._createSpinner((t=this.viewModel)==null?void 0:t.view)}};a([u()],we.prototype,"_drillInFlowItems",void 0),a([u()],we.prototype,"_hideActionText",null),a([u()],we.prototype,"_featureNavigationVisible",null),a([u()],we.prototype,"_isCollapsed",null),a([u()],we.prototype,"_collapseEnabled",null),a([u({readOnly:!0})],we.prototype,"active",null),a([u()],we.prototype,"collapsed",void 0),a([u()],we.prototype,"content",null),a([u()],we.prototype,"icon",null),a([u()],we.prototype,"featureMenuOpen",null),a([u()],we.prototype,"featureNavigationTop",void 0),a([u()],we.prototype,"features",null),a([u()],we.prototype,"goToOverride",null),a([u({type:Xa})],we.prototype,"headerActions",void 0),a([u()],we.prototype,"headingLevel",void 0),a([u()],we.prototype,"location",null),a([u()],we.prototype,"label",null),a([u()],we.prototype,"map",null),a([u(),Qt("esri/widgets/Features/t9n/Features")],we.prototype,"messages",void 0),a([u(),Qt("esri/t9n/common")],we.prototype,"messagesCommon",void 0),a([u()],we.prototype,"promises",null),a([u()],we.prototype,"responsiveActionsEnabled",void 0),a([u({readOnly:!0})],we.prototype,"selectedFeature",null),a([u({readOnly:!0})],we.prototype,"selectedDrillInFeature",null),a([u()],we.prototype,"selectedFeatureIndex",null),a([u({readOnly:!0})],we.prototype,"selectedFeatureWidget",null),a([u()],we.prototype,"spatialReference",null),a([u()],we.prototype,"title",null),a([u()],we.prototype,"timeZone",null),a([u()],we.prototype,"updateLocationEnabled",null),a([u()],we.prototype,"view",null),a([u({type:F2}),w5(["triggerAction","trigger-action"])],we.prototype,"viewModel",void 0),a([u({type:Z5,nonNullable:!0})],we.prototype,"visibleElements",void 0),a([u()],we.prototype,"visible",null),we=a([_("esri.widgets.Features")],we);const Y5=we,hoe={rings:[[[0,0],[0,10],[10,10],[10,0],[0,0]]]};function foe(e){const{primitiveName:t,color:r,donutEnabled:i,outline:s,offsetX:n}=e,o=i?{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",enable:!0,color:r,width:2.4}]}:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:r,primitiveName:t}]};s&&s.color&&o.symbolLayers.push({type:"CIMSolidStroke",enable:!0,color:s.color,width:.5});const l=10;return{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:0,y:0},anchorPointUnits:"Relative",size:l,primitiveName:t,frame:{xmin:0,ymin:0,xmax:10,ymax:10},offsetX:l*n,offsetY:0,markerGraphics:[{type:"CIMMarkerGraphic",geometry:hoe,symbol:o}],scaleSymbolsProportionally:!0,respectFrame:!0}}const yoe="1c2dfdb8c339473ab7b0ab11cb561e47",moe="f2825b56dfc14bb892604637dab45104",goe="fe9e032e4a854c74890750214a3edd8b",voe=2311162,Lv=6645106,boe=18489200,Pr=[2008,2012,2016,2020,2024],k2=Pr[0],rg=Pr[Pr.length-1],dA=new ni({geometry:new Ye({longitude:-98.5795,latitude:39.8283}),attributes:{ObjectID:1776,state:`U.S. Presidential Election Results ${k2}-${rg}`,dem_2000:50999897,rep_2000:48885097,oth_2000:3458956,rep_ev_2000:271,dem_ev_2000:266,dem_2004:59028444,rep_2004:62040610,oth_2004:2529916,rep_ev_2004:286,dem_ev_2004:251,dem_2008:69498516,rep_2008:59948323,oth_2008:2352485,rep_ev_2008:173,dem_ev_2008:365,dem_2012:65915795,rep_2012:60933504,oth_2012:2345950,rep_ev_2012:206,dem_ev_2012:332,dem_2016:65853514,rep_2016:62984828,oth_2016:750884,rep_ev_2016:304,dem_ev_2016:227,dem_2020:81268856,rep_2020:74216752,oth_2020:2922155,rep_ev_2020:232,dem_ev_2020:306,dem_2024:75019257,rep_2024:77303573,oth_2024:3101635,rep_ev_2024:312,dem_ev_2024:226}}),woe={2e3:{republican:{candidate:"Bush",electoralVotes:271},democrat:{candidate:"Gore",electoralVotes:266},other:{candidate:"Other",electoralVotes:0}},2004:{republican:{candidate:"Bush",electoralVotes:286},democrat:{candidate:"Kerry",electoralVotes:251},other:{candidate:"Other",electoralVotes:0}},2008:{republican:{candidate:"McCain",electoralVotes:173},democrat:{candidate:"Obama",electoralVotes:365},other:{candidate:"Other",electoralVotes:0}},2012:{republican:{candidate:"Romney",electoralVotes:206},democrat:{candidate:"Obama",electoralVotes:332},other:{candidate:"Other",electoralVotes:0}},2016:{republican:{candidate:"Trump",electoralVotes:304},democrat:{candidate:"Clinton",electoralVotes:227},other:{candidate:"Other",electoralVotes:0}},2020:{republican:{candidate:"Trump",electoralVotes:232},democrat:{candidate:"Biden",electoralVotes:306},other:{candidate:"Other",electoralVotes:0}},2024:{republican:{candidate:"Trump",electoralVotes:312},democrat:{candidate:"Harris",electoralVotes:226},other:{candidate:"Other",electoralVotes:0}}};let _oe={title:{state:"{state}",county:"{county} County, {state}",country:`U.S. Presidential Election Results ${k2}-${rg}`}};const xu=new ee("rgba(220, 75, 0, 1)"),Iu=new ee("rgba(60, 108, 204,1)"),Zy=new ee("rgba(181, 166, 0, 1)");new ee("#f7f7f7");const $oe=xu.toJSON(),Soe=Iu.toJSON(),xoe=Zy.toJSON(),l0="SUM_",ft=[{value:0,size:2},{value:1e4,size:4},{value:1e5,size:8},{value:5e5,size:16},{value:2e6,size:32}],yt=[{value:0,size:3},{value:1e3,size:6},{value:5e3,size:10},{value:15e3,size:14},{value:3e4,size:20}];function Ioe(e){const{year:t,primitiveName:r,fieldPrefix:i}=e;return{type:"CIMPrimitiveOverride",primitiveName:r,propertyName:"Color",valueExpressionInfo:{type:"CIMExpressionInfo",title:"Winner",expression:`
        var rColor = ${JSON.stringify($oe)};
        var dColor = ${JSON.stringify(Soe)};
        var oColor = ${JSON.stringify(xoe)};

        var demVotes = $feature.${i}dem_${t};
        var repVotes = $feature.${i}rep_${t};
        var othVotes = $feature.${i}oth_${t};

        var allVotes = [demVotes, repVotes, othVotes];

        Decode(Max(allVotes),
          demVotes, dColor,
          repVotes, rColor,
          oColor
        );
      `,returnType:"Default"}}}const Toe=`
  var scaleFactorBase = ( ${boe} / $view.scale );
  var scaleFactor = When(
    scaleFactorBase >= 1, 1,
    scaleFactorBase >= 0.5, scaleFactorBase * 0.6,
    scaleFactorBase >= 0.25, scaleFactorBase * 0.45,
    scaleFactorBase >= 0.125, scaleFactorBase * 0.3125,
    scaleFactorBase * 0.1875
  );
`,Moe=`
  var sizeFactor = When(
    value >= ${ft[4].value}, ${ft[4].size},
    value >= ${ft[3].value}, ${ft[3].size} + (${Eo(ft[3],ft[4])} * (value - ${ft[3].value})),
    value >= ${ft[2].value}, ${ft[2].size} + (${Eo(ft[2],ft[3])} * (value - ${ft[2].value})),
    value >= ${ft[1].value}, ${ft[1].size} + (${Eo(ft[1],ft[2])} * (value - ${ft[1].value})),
    value > ${ft[0].value}, ${ft[0].size} + (${Eo(ft[0],ft[1])} * value),
    0
  );
`,Q5=`
  ${Moe}

  ${Toe}
  var size = sizeFactor * scaleFactor;
`,Eoe=`
  var sizeFactor = When(
    value >= ${yt[4].value}, ${yt[4].size},
    value >= ${yt[3].value}, ${yt[3].size} + (${Eo(yt[3],yt[4])} * (value - ${yt[3].value})),
    value >= ${yt[2].value}, ${yt[2].size} + (${Eo(yt[2],yt[3])} * (value - ${yt[2].value})),
    value >= ${yt[1].value}, ${yt[1].size} + (${Eo(yt[1],yt[2])} * (value - ${yt[1].value})),
    value > ${yt[0].value}, ${yt[0].size} + (${Eo(yt[0],yt[1])} * value),
    0
  );
`,Aoe=`
  var scaleFactorBase = Round( ${voe} / $view.scale, 1 );
  var scaleFactor = When(
    scaleFactorBase >= 8, scaleFactorBase / 6,
    scaleFactorBase >= 4, scaleFactorBase / 3,
    scaleFactorBase >= 2, scaleFactorBase * 0.6,
    scaleFactorBase >= 1, scaleFactorBase * 0.6,
    scaleFactorBase >= 0.5, scaleFactorBase * 0.6,
    scaleFactorBase >= 0.25, scaleFactorBase * 0.45,
    scaleFactorBase >= 0.125, scaleFactorBase * 0.3125,
    scaleFactorBase * 0.1875
  );
`,K5=`
  ${Eoe}

  ${Aoe}
  var size = sizeFactor * scaleFactor;
`;function Eo(e,t){const r=t.size-e.size,i=t.value-e.value;return r/i}function Coe(e){const{year:t,primitiveName:r,fieldPrefix:i}=e;return{type:"CIMPrimitiveOverride",primitiveName:r,propertyName:"Size",valueExpressionInfo:{type:"CIMExpressionInfo",title:"Margin of Victory",expression:`
        var demVotes = $feature.${i}dem_${t};
        var repVotes = $feature.${i}rep_${t};
        var othVotes = $feature.${i}oth_${t};

        var allVotes = Reverse(Sort([demVotes, repVotes, othVotes]));

        var value = allVotes[0] - allVotes[1];

        ${i===l0?Q5:K5}

        return size;
      `,returnType:"Default"}}}function Ooe(e){const{year:t,primitiveName:r,fieldPrefix:i}=e;return{type:"CIMPrimitiveOverride",primitiveName:r,propertyName:"OffsetX",valueExpressionInfo:{type:"CIMExpressionInfo",title:"Margin of Victory",expression:`

        function isEven(v){
          return v % 2 == 0;
        }
        var interval = 4;
        var years = [${Pr}];
        var selectedYear = ${t};

        var numItems = Count(years);
        var isEvenItems = isEven(numItems);
        var middleIndex = Floor(numItems / 2);

        if(isEvenItems){
          middleIndex -= 0.5;
        }

        var index = IndexOf(years, selectedYear);

        if(!isEvenItems && index == middleIndex){
          return 0;
        }

        var direction = iif(index < middleIndex, -1, 1);

        var yearStart = iif(direction < 0, selectedYear, years[middleIndex]);
        var yearEnd = iif(direction < 0, years[middleIndex], selectedYear);

        var sizes = [];

        var offsetX = 0;

        for (var year = yearStart; year <= yearEnd; year+=interval){
          var demVotes = $feature[\`${i}dem_\${year}\`];
          var repVotes = $feature[\`${i}rep_\${year}\`];
          var othVotes = $feature[\`${i}oth_\${year}\`];

          var allVotes = Reverse(Sort([demVotes, repVotes, othVotes]));

          var value = allVotes[0] - allVotes[1];

          ${i===l0?Q5:K5}

          var factor = iif(
            (year == yearStart) || (year == yearEnd)
          , 0.5, 1);

          offsetX += (size * factor);
        }

        return offsetX * direction;

      `,returnType:"Default"}}}function pA(e){const{level:t}=e;return new Wo({symbol:Foe({level:t})})}function Foe(e){const{level:t}=e,r=t==="state"?l0:"";return new Mn({data:{type:"CIMSymbolReference",symbol:{type:"CIMPointSymbol",symbolLayers:[...Pr.map(i=>foe({primitiveName:`election-${i}`,offsetX:Pr.indexOf(i)-2,color:[0,0,0,255],donutEnabled:!1,outline:{color:[255,255,255,100]}}))]},primitiveOverrides:[...Pr.map(i=>Ioe({primitiveName:`election-${i}`,year:i,fieldPrefix:r})),...Pr.map(i=>Coe({primitiveName:`election-${i}`,year:i,fieldPrefix:r,level:t})),...Pr.map(i=>Ooe({primitiveName:`election-${i}`,year:i,fieldPrefix:r,level:t}))]}})}function Pf(e){const t=Np({places:0,digitSeparator:!0});return br(e,t)}function koe(e){return e.map(t=>new Mc({fieldName:t,format:new pp({places:0,digitSeparator:!0})}))}const Nv=e=>{const{level:t}=e,r=t==="state"?l0:"",i=Pr.map(n=>[`${r}rep_${n}`,`${r}dem_${n}`,`${r}oth_${n}`]).flat();let s=[];if(t==="country"){const n=new Fb({creator:()=>{const l=document.createElement("div");return l.id="instructions",l.innerHTML=`
          <calcite-block collapsible open heading="How to read this map">
            <p>
              This map shows the results of each of the previous 5 U.S. presidential elections from ${k2} to ${rg}. Each square represents the election winner for the given area in one year. The most recent election (${rg}) is represented as the right-most square. Each square's color represents the winner of the election; its size is proportional to the margin of victory for the winner. Smaller squares indicate a closer election. Larger squares indicate a larger margin of victory.
            </p>
            <img src="./trend-legend-horizontal.png" alt="Legend" />
          </calcite-block>
          <calcite-block collapsible open heading="Example trends">
            <p>
              Scroll through the symbols below to see examples of various trend patterns in the map.
            </p>
            <calcite-carousel label="Great new features">
              <calcite-carousel-item label="Gradual change">
                  <div class="custom-content">
                      <img class="examples" src="./gradual-d.png" alt="Gradual change" />
                      <span>
                        <b>Gradual change</b>. This example from Douglas County, Georgia shows a gradual swing from Republican support to Democrats over the last 5 elections. Voters showed strong support for Bush (R) in 2004. In 2008, the county leaned Democrat, and gradually increased support for Democrats in 2012, 2016, and 2020.
                      </span>
                  </div>
              </calcite-carousel-item>
              <calcite-carousel-item label="Bowtie">
                  <div class="custom-content">
                       <img class="examples" src="./flip.png" alt="Bowtie" />
                      <span>
                        <b>Bowtie</b>. In rare scenarios, some counties underwent a dramatic shift in support from one party to another. Anne Arundel County, Maryland went from strong Republican support in 2004 to strong Democrat support in 2020, creating a bowtie shape in the symbol.
                      </span>
                  </div>
              </calcite-carousel-item>
              <calcite-carousel-item label="No change">
                  <div class="custom-content">
                      <img class="examples" src="./solid-r.png" alt="No change" />
                      <span>
                          <b>No change.</b> The populations of many areas are consistent in their support for one party over another. Shelby County, Alabama is an example of a county that has shown strong Republican support in each of the last 5 elections, posting margins of victory exceeding 40% in each of the previous 5 elections.
                      </span>
                  </div>
              </calcite-carousel-item>
              <calcite-carousel-item label="Inconsistent">
                  <div class="custom-content">
                       <img class="examples" src="./contested.png" alt="Contested" />
                      <span>
                          <b>Contested</b>. A few areas, especially in traditional swing states, have shown inconsistent support for either party over the last 5 elections. For example, Macomb County, Michigan showed strong support for Obama (D) in 2008 and 2012, but otherwise sided with Republicans in other elections.
                      </span>
                  </div>
              </calcite-carousel-item>
          </calcite-carousel>
        </calcite-block>
        `,l}});s.push(n);const o=new Fb({creator:l=>{const{graphic:c}=l,p=document.createElement("div");p.id="electoral-vote-results";let h="<table class='esri-widget popup'>";h+="<tr class='head'><td>Year</td><td>Republican</td><td>Votes</td><td>+/-</td><td>Democrat</td><td>Votes</td><td>+/-</td></tr>";let f="<table class='esri-widget popup'>";f+="<tr class='head'><td>Year</td><td>Republican</td><td>Votes</td><td>%</td><td>Democrat</td><td>Votes</td><td>%</td></tr>";const y=JSON.parse(JSON.stringify(woe)),m=`rgba(${xu.toRgba()})`,g=`rgba(${Iu.toRgba()})`;Pr.forEach(w=>{var S=w.toString();const x={r:{name:y[S].republican.candidate,votes:y[S].republican.electoralVotes,weight:"normal",class:"none",margin:"-"},d:{name:y[S].democrat.candidate,votes:y[S].democrat.electoralVotes,weight:"normal",class:"none",margin:"-"}},E={r:{name:y[S].republican.candidate,votes:c.attributes[`rep_${S}`],weight:"normal",class:"none",margin:"-"},d:{name:y[S].democrat.candidate,votes:c.attributes[`dem_${S}`],weight:"normal",class:"none",margin:"-"}};let C=[x.r.votes,x.d.votes];const P=Math.max(...C),L=C.indexOf(P)===0?"r":"d";x[L].weight="bolder",L==="r"&&(x.r.class="rep"),L==="d"&&(x.d.class="dem");let V=[E.r.votes,E.d.votes];const q=Math.max(...V),H=V.indexOf(q)===0?"r":"d";E[H].weight="bolder",H==="r"&&(E.r.class="rep"),H==="d"&&(E.d.class="dem");const Y=C.sort((Ei,oi)=>oi-Ei),se=V.sort((Ei,oi)=>oi-Ei);let de=br(Y[0]-Y[1],{signDisplay:"always"}),De=br((se[0]-se[1])/(se[0]+se[1]),{style:"percent",minimumFractionDigits:1,maximumFractionDigits:1,signDisplay:"always"});x[L].margin=de,E[H].margin=De;let pe="";pe+=`<tr><td>${S}</td>`,pe+=`<td class='${x.r.class}'><span style='color:${m}; font-weight: ${x.r.weight}'>${x.r.name}</span></td>`,pe+=`<td class='${x.r.class}'><span style='color:${m}; font-weight: ${x.r.weight}'>${Pf(x.r.votes)}</span></td>`,pe+=`<td class='${x.r.class}'><span style='color:${m}; font-weight: ${x.r.weight}'>${x.r.margin}</span></td>`,pe+=`<td class='${x.d.class}'><span style='color:${g}; font-weight: ${x.d.weight}'>${x.d.name}</span></td>`,pe+=`<td class='${x.d.class}'><span style='color:${g}; font-weight: ${x.d.weight}'>${Pf(x.d.votes)}</span></td>`,pe+=`<td class='${x.d.class}'><span style='color:${g}; font-weight: ${x.d.weight}'>${x.d.margin}</span></td>`,pe+="</tr>",h+=pe;let nt="";nt+=`<tr><td>${S}</td>`,nt+=`<td class='${E.r.class}'><span style='color:${m}; font-weight: ${E.r.weight}'>${E.r.name}</span></td>`,nt+=`<td class='${E.r.class}'><span style='color:${m}; font-weight: ${E.r.weight}'>${Pf(E.r.votes)}</span></td>`,nt+=`<td class='${E.r.class}'><span style='color:${m}; font-weight: ${E.r.weight}'>${E.r.margin}</span></td>`,nt+=`<td class='${E.d.class}'><span style='color:${g}; font-weight: ${E.d.weight}'>${E.d.name}</span></td>`,nt+=`<td class='${E.d.class}'><span style='color:${g}; font-weight: ${E.d.weight}'>${Pf(E.d.votes)}</span></td>`,nt+=`<td class='${E.d.class}'><span style='color:${g}; font-weight: ${E.d.weight}'>${E.d.margin}</span></td>`,nt+="</tr>",f+=nt}),h+="</table>",f+="</table>";const b=`
          <calcite-tabs>
              <calcite-tab-nav slot="title-group">
                  <calcite-tab-title selected>
                    Elector Vote Total
                  </calcite-tab-title>
                  <calcite-tab-title>
                    Popular Vote Total
                  </calcite-tab-title>
              </calcite-tab-nav>
              <calcite-tab selected>
                  ${h}
              </calcite-tab>
              <calcite-tab>
                  ${f}
              </calcite-tab>
          </calcite-tabs>
        `;return p.innerHTML=b,p}});s.push(o)}else s.push(new Qa({expressionInfo:{expression:`
            Expects($feature, "*");

            var result = "";

            var dMargins = [];
            var rMargins = [];

            var years = [${Pr}];

            var rColorHex = "${xu.toHex()}";
            var dColorHex = "${Iu.toHex()}";
            var oColorHex = "${Zy.toHex()}";

            for (var i in years){
              var y = Text(years[i]);

              var rVotes = $feature[\`${r}rep_\${y}\`];
              var dVotes = $feature[\`${r}dem_\${y}\`];
              var oVotes = $feature[\`${r}oth_\${y}\`];

              var allVotes = Reverse(Sort([rVotes, dVotes, oVotes]));
              var sumVotes = Sum(allVotes);

              var winner = Decode(Max(allVotes),
                rVotes, "r",
                dVotes, "d",
                "o"
              );

              var marginTotal = allVotes[0] - allVotes[1];
              var marginPercent = Round(((allVotes[0] / sumVotes) - (allVotes[1] / sumVotes)) * 100, 1);

              if(winner == "r"){
                Push(rMargins, marginPercent);
              }
              if(winner == "d"){
                Push(dMargins, marginPercent);
              }
            }

            var yCount = Count(years);
            var strongThreshold = yCount * 0.75;
            var contestedThreshold = yCount * 0.5;

            var dCount = Count(dMargins);
            var dAvg = Sum(dMargins) / yCount;

            var rCount = Count(rMargins);
            var rAvg = Sum(rMargins) / yCount;


            var trend = When(
              (dCount > strongThreshold) && (dAvg > 5), \` shown <b><span style='color:\${dColorHex}'>strong Democrat</span></b> support\`,
              (dCount > strongThreshold) && (dAvg <= 5), \`<b><span style='color:\${dColorHex}'>leaned Democrat</span></b>\`,
              (dCount > contestedThreshold), \`been <b>contested</b>, but tends to <b><span style='color:\${dColorHex}'>lean Democrat</span></b>\`,

              (rCount > strongThreshold) && (rAvg > 5), \` shown <b><span style='color:\${rColorHex}'>strong Republican</span></b> support\`,
              (rCount > strongThreshold) && (rAvg <= 5), \`<b><span style='color:\${rColorHex}'>leaned Republican</span></b>\`,
              (rCount > contestedThreshold), \`been <b>contested</b>, but tend to <b><span style='color:\${rColorHex}'> lean Republican</span></b>\`,
              "contested"
            );

            var geographyName = iif(haskey($feature, "county"), \`\${$feature.county}, \${$feature.state}\`, $feature.state);

            result = \`In the last \${yCount} U.S. presidential elections, \${geographyName} voters have \${trend}.\`;

            return {
              type: "text",
              text: result
            };
          `}}),new Qa({expressionInfo:{expression:`
            Expects($feature, "*");
            var years = [${Pr}];
            var candidates = {
              "2000": {
                republican: {
                  candidate: "Bush",
                  electoralVotes: 271
                },
                democrat: {
                  candidate: "Gore",
                  electoralVotes: 266
                },
                other: {
                  candidate: "Other",
                  electoralVotes: 0
                }
              },
              "2004": {
                republican: {
                  candidate: "Bush",
                  electoralVotes: 286
                },
                democrat: {
                  candidate: "Kerry",
                  electoralVotes: 251
                },
                other: {
                  candidate: "Other",
                  electoralVotes: 0
                }
              },
              "2008": {
                republican: {
                  candidate: "McCain",
                  electoralVotes: 173
                },
                democrat: {
                  candidate: "Obama",
                  electoralVotes: 365
                },
                other: {
                  candidate: "Other",
                  electoralVotes: 0
                }
              },
              "2012": {
                republican: {
                  candidate: "Romney",
                  electoralVotes: 206
                },
                democrat: {
                  candidate: "Obama",
                  electoralVotes: 332
                },
                other: {
                  candidate: "Other",
                  electoralVotes: 0
                }
              },
              "2016": {
                republican: {
                  candidate: "Trump",
                  electoralVotes: 304
                },
                democrat: {
                  candidate: "Clinton",
                  electoralVotes: 227
                },
                other: {
                  candidate: "Other",
                  electoralVotes: 0
                }
              },
              "2020": {
                republican: {
                  candidate: "Trump",
                  electoralVotes: 232
                },
                democrat: {
                  candidate: "Biden",
                  electoralVotes: 306
                },
                other: {
                  candidate: "Other",
                  electoralVotes: 0
                }
              },
              "2024": {
                republican: {
                  candidate: "Trump",
                  electoralVotes: 312
                },
                democrat: {
                  candidate: "Harris",
                  electoralVotes: 226
                },
                other: {
                  candidate: "Other",
                  electoralVotes: 0
                }
              }
            };


            var table = "<table class='esri-widget popup'>";
            table += "<tr class='head'><td>Year</td><td>Republican</td><td>Votes</td><td>%</td><td>Democrat</td><td>Votes</td><td>%</td></tr>";

            // var results = {};

            for (var i in years){
              var y = Text(years[i]);

              var results = {
                r: {
                  name: candidates[y].republican.candidate,
                  votes: $feature[\`${r}rep_\${y}\`],
                  weight: "normal",
                  class: "none",
                  margin: "-"
                },
                d: {
                  name: candidates[y].democrat.candidate,
                  votes: $feature[\`${r}dem_\${y}\`],
                  weight: "normal",
                  class: "none",
                  margin: "-"
                },
                o: {
                  name: candidates[y].other.candidate,
                  votes: $feature[\`${r}oth_\${y}\`],
                  weight: "normal",
                  class: "none",
                  margin: "-"
                }
              };

              var allVotes = Reverse(Sort([results.r.votes, results.d.votes, results.o.votes]));
              var sumVotes = Sum(allVotes);
              var winner = Decode(Max(allVotes),
                results.r.votes, "r",
                results.d.votes, "d",
                "o"
              );

              results[winner].weight = "bolder";

              if(winner == "r"){
                results.r.class = "rep";
              }
              if(winner == "d"){
                results.d.class = "dem";
              }


              var marginTotal = Text(allVotes[0] - allVotes[1], "#,###");
              var marginPercent = Text((allVotes[0] / sumVotes) - (allVotes[1] / sumVotes), "+#.0%;-#.0%");

              results[winner].margin = marginPercent;

              var tr = "";
              tr += \`<tr><td>\${y}</td>\`;

              var rColor = "rgba(${xu.toRgba()})";
              var dColor = "rgba(${Iu.toRgba()})";

              tr += \`<td class='\${results.r.class}'><span style='color:\${rColor}; font-weight: \${results.r.weight}'>\${results.r.name}</span></td>\`;
              tr += \`<td class='\${results.r.class}'><span style='color:\${rColor}; font-weight: \${results.r.weight}'>\${Text(results.r.votes, "#,###")}</span></td>\`;
              tr += \`<td class='\${results.r.class}'><span style='color:\${rColor}; font-weight: \${results.r.weight}'>\${results.r.margin}</span></td>\`;

              tr += \`<td class='\${results.d.class}'><span style='color:\${dColor}; font-weight: \${results.d.weight}'>\${results.d.name}</span></td>\`;
              tr += \`<td class='\${results.d.class}'><span style='color:\${dColor}; font-weight: \${results.d.weight}'>\${Text(results.d.votes, "#,###")}</span></td>\`;
              tr += \`<td class='\${results.d.class}'><span style='color:\${dColor}; font-weight: \${results.d.weight}'>\${results.d.margin}</span></td>\`;

              tr += "</tr>";

              table += tr;

            }

            table += "</table>";

            return {
              type: "text",
              text: table
            }
          `}}),new Qa({expressionInfo:{expression:`
            Expects($feature, "*");
            var fieldsMargin = [];
            var fieldsTotal = [];
            var colors = [];
            var attributes = {};
            var mediaInfos = [];

            var years = [${Pr}];
            var candidates = {
              "2000": {
                republican: {
                  candidate: "Bush",
                  electoralVotes: 271
                },
                democrat: {
                  candidate: "Gore",
                  electoralVotes: 266
                },
                other: {
                  candidate: "Other",
                  electoralVotes: 0
                }
              },
              "2004": {
                republican: {
                  candidate: "Bush",
                  electoralVotes: 286
                },
                democrat: {
                  candidate: "Kerry",
                  electoralVotes: 251
                },
                other: {
                  candidate: "Other",
                  electoralVotes: 0
                }
              },
              "2008": {
                republican: {
                  candidate: "McCain",
                  electoralVotes: 173
                },
                democrat: {
                  candidate: "Obama",
                  electoralVotes: 365
                },
                other: {
                  candidate: "Other",
                  electoralVotes: 0
                }
              },
              "2012": {
                republican: {
                  candidate: "Romney",
                  electoralVotes: 206
                },
                democrat: {
                  candidate: "Obama",
                  electoralVotes: 332
                },
                other: {
                  candidate: "Other",
                  electoralVotes: 0
                }
              },
              "2016": {
                republican: {
                  candidate: "Trump",
                  electoralVotes: 304
                },
                democrat: {
                  candidate: "Clinton",
                  electoralVotes: 227
                },
                other: {
                  candidate: "Other",
                  electoralVotes: 0
                }
              },
              "2020": {
                republican: {
                  candidate: "Trump",
                  electoralVotes: 232
                },
                democrat: {
                  candidate: "Biden",
                  electoralVotes: 306
                },
                other: {
                  candidate: "Other",
                  electoralVotes: 0
                }
              },
              "2024": {
                republican: {
                  candidate: "Trump",
                  electoralVotes: 312
                },
                democrat: {
                  candidate: "Harris",
                  electoralVotes: 226
                },
                other: {
                  candidate: "Other",
                  electoralVotes: 0
                }
              }
            };

            var rColor = [${xu.toJSON()}];
            var dColor = [${Iu.toJSON()}];
            var oColor = [${Zy.toJSON()}];
            var resultsColors = [rColor, dColor, oColor];

            var rColorHex = "${xu.toHex()}";
            var dColorHex = "${Iu.toHex()}";
            var oColorHex = "${Zy.toHex()}";

            for (var i in years){
              var y = Text(years[i]);

              var results = {
                r: {
                  name: candidates[y].republican.candidate,
                  votes: $feature[\`${r}rep_\${y}\`],
                  margin: null,
                  color: rColor,
                  hexColor: rColorHex
                },
                d: {
                  name: candidates[y].democrat.candidate,
                  votes: $feature[\`${r}dem_\${y}\`],
                  margin: null,
                  color: dColor,
                  hexColor: dColorHex
                },
                o: {
                  name: candidates[y].other.candidate,
                  votes: $feature[\`${r}oth_\${y}\`],
                  margin: null,
                  color: oColor,
                  hexColor: oColorHex
                }
              };

              var allVotes = Reverse(Sort([results.r.votes, results.d.votes, results.o.votes]));
              var sumVotes = Sum(allVotes);

              var winner = Decode(Max(allVotes),
                results.r.votes, "r",
                results.d.votes, "d",
                "o"
              );

              var marginTotal = allVotes[0] - allVotes[1];
              var marginPercent = Round(((allVotes[0] / sumVotes) - (allVotes[1] / sumVotes)) * 100, 1);

              results[winner].margin = marginPercent;

              var winnerInfo = results[winner];
              var fieldNameMargin = \`\${winnerInfo.name} (\${y}) - margin\`;
              var fieldNameTotal = \`\${winnerInfo.name} (\${y}) - total\`;
              attributes[fieldNameMargin] = winnerInfo.margin;
              attributes[fieldNameTotal] = marginTotal;

              Push(fieldsMargin, fieldNameMargin);
              Push(fieldsTotal, fieldNameTotal);
              Push(colors, winnerInfo.color);

              var rCandidateName = \`\${results.r.name} (\${y}) - votes\`;
              var dCandidateName = \`\${results.d.name} (\${y}) - votes\`;
              var oCandidateName = \`\${results.o.name} (\${y}) - votes\`;

              attributes[rCandidateName] = results.r.votes;
              attributes[dCandidateName] = results.d.votes;
              attributes[oCandidateName] = results.o.votes;

              var evFieldName = \`ev_\${y}\`;

              var title = "";

              if(haskey($feature, "county")){
                title = \`<span style='color:\${winnerInfo.hexColor}'><b>\${winnerInfo.name}</b></span> won \${$feature.county}, \${$feature.state} in \${y}\`;
              } else {
                title = \`<span style='color:\${winnerInfo.hexColor}'><b>\${winnerInfo.name}</b></span> won \${$feature.state}'s \${$feature[evFieldName]} electoral votes in \${y}\`;
              }

              var resultsChart = {
                type: "barchart",
                title,
                value: {
                  fields: [
                    rCandidateName,
                    dCandidateName,
                    oCandidateName
                  ],
                  colors: resultsColors
                }
              };

              Push(mediaInfos, resultsChart);
            }

            Insert(mediaInfos, 0, {
              type: "columnchart",
              title: "Margin of victory trend (% points)",
              value: { fields: fieldsMargin, colors }
            });

            Insert(mediaInfos, 1, {
              type: "columnchart",
              title: "Margin of victory trend (total votes)",
              value: { fields: fieldsTotal, colors }
            });

            return {
              type: "media",
              attributes,
              mediaInfos
            };
          `}}));return new Cc({title:_oe.title[t],fieldInfos:koe(i),content:s})},Yr="esri-popup",ea=`${Yr}--is-docked`,mt={base:Yr,baseHidden:`${Yr}--hidden`,main:`${Yr}__main-container`,shadow:`${Yr}--shadow`,isDocked:ea,isDockedTopLeft:`${ea}-top-left`,isDockedTopCenter:`${ea}-top-center`,isDockedTopRight:`${ea}-top-right`,isDockedBottomLeft:`${ea}-bottom-left`,isDockedBottomCenter:`${ea}-bottom-center`,isDockedBottomRight:`${ea}-bottom-right`,alignTopCenter:`${Yr}--aligned-top-center`,alignBottomCenter:`${Yr}--aligned-bottom-center`,alignTopLeft:`${Yr}--aligned-top-left`,alignBottomLeft:`${Yr}--aligned-bottom-left`,alignTopRight:`${Yr}--aligned-top-right`,alignBottomRight:`${Yr}--aligned-bottom-right`,pointer:`${Yr}__pointer`,pointerDirection:`${Yr}__pointer-direction`};let t$=class extends F2{constructor(e){super(e)}};t$=a([_("esri.widgets.Popup.PopupViewModel")],t$);const X5=t$;let Is=class extends $e{constructor(){super(...arguments),this.actionBar=!0,this.closeButton=!0,this.collapseButton=!0,this.featureNavigation=!0,this.featureListLayerTitle=!0,this.heading=!0,this.spinner=!0}};a([u({type:Boolean,nonNullable:!0})],Is.prototype,"actionBar",void 0),a([u({type:Boolean,nonNullable:!0})],Is.prototype,"closeButton",void 0),a([u({type:Boolean,nonNullable:!0})],Is.prototype,"collapseButton",void 0),a([u({type:Boolean,nonNullable:!0})],Is.prototype,"featureNavigation",void 0),a([u({type:Boolean,nonNullable:!0})],Is.prototype,"featureListLayerTitle",void 0),a([u({type:Boolean,nonNullable:!0})],Is.prototype,"heading",void 0),a([u({type:Boolean,nonNullable:!0})],Is.prototype,"spinner",void 0),Is=a([_("esri.widgets.Popup.PopupVisibleElements")],Is);const r$=Is,Poe=200,hA={buttonEnabled:!0,position:"auto",breakpoint:{width:544}};let _e=class extends _r{constructor(e,t){super(e,t),this._dockAction=new Ac({id:"popup-dock-action"}),this._featuresWidget=new Y5({responsiveActionsEnabled:!0}),this._containerNode=null,this._mainContainerNode=null,this._pointerOffsetInPx=16,this._focusAbortController=null,this.alignment="auto",this.dockEnabled=!1,this.headingLevel=2,this.messages=null,this.viewModel=new X5,this.visibleElements=new r$}initialize(){this.addHandles([W(()=>{var e,t;return[(t=(e=this.viewModel)==null?void 0:e.view)==null?void 0:t.widthBreakpoint,this.dockEnabled]},()=>this._handleDockIcon(),Ae),W(()=>{var e,t;return[this.dockEnabled,(e=this.messages)==null?void 0:e.undock,(t=this.messages)==null?void 0:t.dock]},()=>this._handleDockEnabled(),Ae),W(()=>this.dockOptions,e=>{const{_dockAction:t}=this,r=this._featuresWidget.headerActions;r.remove(t),e.buttonEnabled&&r.add(t)},Ae),W(()=>{var e;return(e=this.viewModel)==null?void 0:e.screenLocation},()=>this._positionContainer()),W(()=>{var e;return[(e=this.viewModel)==null?void 0:e.active,this.dockEnabled]},()=>this._toggleScreenLocationEnabled()),W(()=>{var e,t,r,i,s,n,o;return[(e=this.viewModel)==null?void 0:e.screenLocation,(r=(t=this.viewModel)==null?void 0:t.view)==null?void 0:r.padding,(s=(i=this.viewModel)==null?void 0:i.view)==null?void 0:s.size,(n=this.viewModel)==null?void 0:n.active,(o=this.viewModel)==null?void 0:o.location,this.alignment]},()=>this.reposition()),W(()=>{var e,t;return(t=(e=this.viewModel)==null?void 0:e.view)==null?void 0:t.size},(e,t)=>this._updateDockEnabledForViewSize(e,t)),W(()=>{var e;return(e=this.viewModel)==null?void 0:e.view},(e,t)=>this._viewChange(e,t)),W(()=>{var e,t;return(t=(e=this.viewModel)==null?void 0:e.view)==null?void 0:t.ready},(e,t)=>this._viewReadyChange(e??!1,t??!1)),W(()=>this.viewModel,()=>this._featuresWidget.viewModel=this.viewModel,Ae),W(()=>this._featureNavigationTop,e=>this._featuresWidget.featureNavigationTop=e,Ae),W(()=>this.headingLevel,e=>this._featuresWidget.headingLevel=e,Ae),W(()=>this.visibleElements.actionBar,e=>this._featuresWidget.visibleElements.actionBar=!!e,Ae),W(()=>this.visibleElements.closeButton,e=>this._featuresWidget.visibleElements.closeButton=!!e,Ae),W(()=>this.visibleElements.collapseButton,e=>this._featuresWidget.visibleElements.collapseButton=!!e,Ae),W(()=>this.visibleElements.heading,e=>this._featuresWidget.visibleElements.heading=!!e,Ae),W(()=>this.visibleElements.spinner,e=>this._featuresWidget.visibleElements.spinner=!!e,Ae),W(()=>this.visibleElements.featureNavigation,e=>this._featuresWidget.visibleElements.featureNavigation=!!e,Ae),W(()=>this.visibleElements.featureListLayerTitle,e=>this._featuresWidget.visibleElements.featureListLayerTitle=!!e,Ae),pc(()=>this._featuresWidget,"trigger-header-action",e=>{e.action===this._dockAction&&(this.dockEnabled=!this.dockEnabled)})])}normalizeCtorArgs(e){const t={...e};return(e==null?void 0:e.visibleElements)!=null&&(t.visibleElements=new r$(e.visibleElements),e.collapseEnabled!=null&&(t.visibleElements.collapseButton=e.collapseEnabled),e.spinnerEnabled!=null&&(t.visibleElements.spinner=e.spinnerEnabled)),t}destroy(){var e,t;this._dockAction.destroy(),(e=this._featuresWidget)==null||e.destroy(),(t=this._focusAbortController)==null||t.abort()}get _featureNavigationTop(){const{currentAlignment:e,currentDockPosition:t}=this;return e==="bottom-left"||e==="bottom-center"||e==="bottom-right"||t==="top-left"||t==="top-center"||t==="top-right"}get actions(){return this.viewModel.actions}set actions(e){this.viewModel.actions=e}get active(){return this.viewModel.active}get autoCloseEnabled(){return this.viewModel.autoCloseEnabled}set autoCloseEnabled(e){this.viewModel.autoCloseEnabled=e}get defaultPopupTemplateEnabled(){return this.viewModel.defaultPopupTemplateEnabled}set defaultPopupTemplateEnabled(e){this.viewModel.defaultPopupTemplateEnabled=e}get content(){return this.viewModel.content}set content(e){this.viewModel.content=e}get collapsed(){return this._featuresWidget.collapsed}set collapsed(e){this._featuresWidget.collapsed=e}get collapseEnabled(){return Uh(G.getLogger(this),"collapseEnabled",{replacement:"PopupVisibleElements.collapseButton",version:"4.29"}),this.visibleElements.collapseButton}set collapseEnabled(e){Uh(G.getLogger(this),"collapseEnabled",{replacement:"PopupVisibleElements.collapseButton",version:"4.29"}),this.visibleElements.collapseButton=e}get currentAlignment(){return this._getCurrentAlignment()}get currentDockPosition(){return this._getCurrentDockPosition()}get dockOptions(){return this._get("dockOptions")||hA}set dockOptions(e){var l,c;const t={...hA},r=(c=(l=this.viewModel)==null?void 0:l.view)==null?void 0:c.breakpoints,i={};r&&(i.width=r.xsmall,i.height=r.xsmall);const s={...t,...e},n={...t.breakpoint,...i},{breakpoint:o}=s;typeof o=="object"?s.breakpoint={...n,...o}:o&&(s.breakpoint=n),this._set("dockOptions",s),this._setCurrentDockPosition(),this.reposition()}get featureCount(){return this.viewModel.featureCount}get featureMenuOpen(){return this.viewModel.featureMenuOpen}set featureMenuOpen(e){this.viewModel.featureMenuOpen=e}get features(){return this.viewModel.features}set features(e){this.viewModel.features=e}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get highlightEnabled(){return this.viewModel.highlightEnabled}set highlightEnabled(e){this.viewModel.highlightEnabled=e}get icon(){return"popup"}set icon(e){this._overrideIfSome("icon",e)}get location(){return this.viewModel.location}set location(e){this.viewModel.location=e}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get promises(){return this.viewModel.promises}set promises(e){this.viewModel.promises=e}get selectedFeature(){return this.viewModel.selectedFeature}get selectedFeatureIndex(){return this.viewModel.selectedFeatureIndex}set selectedFeatureIndex(e){this.viewModel.selectedFeatureIndex=e}get selectedFeatureWidget(){return this._featuresWidget.selectedFeatureWidget}get spinnerEnabled(){return Uh(G.getLogger(this),"spinnerEnabled",{replacement:"PopupVisibleElements.spinner",version:"4.29"}),this.visibleElements.spinner}set spinnerEnabled(e){Uh(G.getLogger(this),"spinnerEnabled",{replacement:"PopupVisibleElements.spinner",version:"4.29"}),this.visibleElements.spinner=e}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}get updateLocationEnabled(){return this.viewModel.updateLocationEnabled}set updateLocationEnabled(e){this.viewModel.updateLocationEnabled=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}get visible(){return this.viewModel.visible}set visible(e){this.viewModel.visible=e}blur(){const{active:e}=this.viewModel;e||G.getLogger(this).warn("Popup can only be blurred when currently active."),this._featuresWidget.blur()}clear(){return this.viewModel.clear()}close(){this.visible=!1}fetchFeatures(e,t){return this.viewModel.fetchFeatures(e,t)}focus(){const{active:e}=this.viewModel;e||G.getLogger(this).warn("Popup can only be focused when currently active."),this._handleFocus()}next(){return this.viewModel.next()}open(e){const t=!!e&&!!e.featureMenuOpen,r={collapsed:!!e&&!!e.collapsed,featureMenuOpen:t};this.set(r),this.viewModel.open(e),e!=null&&e.shouldFocus&&this._handleFocus(!0)}previous(){return this.viewModel.previous()}reposition(){this.renderNow(),this._positionContainer(),this._setCurrentAlignment()}triggerAction(e){return this.viewModel.triggerAction(e)}render(){var h,f,y,m;const{dockEnabled:e,currentAlignment:t,currentDockPosition:r}=this,{active:i,screenLocation:s}=this.viewModel,n=i&&e,o=i&&!e,l=(f=(h=this.selectedFeature)==null?void 0:h.layer)==null?void 0:f.title,c=(m=(y=this.selectedFeature)==null?void 0:y.layer)==null?void 0:m.id,p={[mt.alignTopCenter]:t==="top-center",[mt.alignBottomCenter]:t==="bottom-center",[mt.alignTopLeft]:t==="top-left",[mt.alignBottomLeft]:t==="bottom-left",[mt.alignTopRight]:t==="top-right",[mt.alignBottomRight]:t==="bottom-right",[mt.isDocked]:n,[mt.shadow]:o,[mt.isDockedTopLeft]:r==="top-left",[mt.isDockedTopCenter]:r==="top-center",[mt.isDockedTopRight]:r==="top-right",[mt.isDockedBottomLeft]:r==="bottom-left",[mt.isDockedBottomCenter]:r==="bottom-center",[mt.isDockedBottomRight]:r==="bottom-right"};return T("div",{afterCreate:this._positionContainer,afterUpdate:this._positionContainer,bind:this,class:this.classes(mt.base,p,{[mt.baseHidden]:!s&&!e}),"data-layer-id":c,"data-layer-title":l,role:"presentation"},i?[this._renderMainContainer(),this._renderPointer()]:null)}_renderPointer(){return this.dockEnabled?null:T("div",{class:mt.pointer,key:"popup-pointer",role:"presentation"},T("div",{class:this.classes(mt.pointerDirection,mt.shadow)}))}_renderMainContainer(){const{dockEnabled:e}=this,t={[mt.shadow]:e};return T("div",{afterCreate:this._setMainContainerNode,afterUpdate:this._setMainContainerNode,bind:this,class:this.classes(mt.main,fe.widget,t)},this._featuresWidget.render())}_getAnimationDurationMS(){const{_containerNode:e}=this;return e?1e3*parseFloat(window.getComputedStyle(e).animationDuration):Poe}async _handleFocus(e=!1){var r;(r=this._focusAbortController)==null||r.abort(),this._focusAbortController=new AbortController;const t=this._focusAbortController.signal;e&&await SP(()=>{var i;return((i=this.viewModel)==null?void 0:i.active)===!0},{signal:t}),await bn(p$(t)),await bn(uh(this._getAnimationDurationMS(),t)),this._featuresWidget.focus()}_isOutsideView(e){const{popupHeight:t,popupWidth:r,screenLocation:i,side:s,view:n}=e;if(isNaN(r)||isNaN(t)||!n||!i)return!1;const o=n.padding;return s==="right"&&i.x+r/2>n.width-o.right||s==="left"&&i.x-r/2<o.left||s==="top"&&i.y-t<o.top||s==="bottom"&&i.y+t>n.height-o.bottom}_calculateAutoAlignment(e){if(e!=="auto")return e;const{_pointerOffsetInPx:t,_containerNode:r,_mainContainerNode:i,viewModel:s}=this,{screenLocation:n,view:o}=s;if(n==null||!o||!r)return"top-center";function l(E){return parseInt(E.replaceAll(/[^-\d.]/g,""),10)}const c=i?window.getComputedStyle(i,null):null,p=c?l(c.getPropertyValue("max-height")):0,h=c?l(c.getPropertyValue("height")):0,{height:f,width:y}=r.getBoundingClientRect(),m=y+t,g=Math.max(f,p,h)+t,b=this._isOutsideView({popupHeight:g,popupWidth:m,screenLocation:n,side:"right",view:o}),w=this._isOutsideView({popupHeight:g,popupWidth:m,screenLocation:n,side:"left",view:o}),S=this._isOutsideView({popupHeight:g,popupWidth:m,screenLocation:n,side:"top",view:o}),x=this._isOutsideView({popupHeight:g,popupWidth:m,screenLocation:n,side:"bottom",view:o});return w?S?"bottom-right":"top-right":b?S?"bottom-left":"top-left":S?x?"top-center":"bottom-center":"top-center"}_callCurrentAlignment(e){return typeof e=="function"?e.call(this):e}_getCurrentAlignment(){const{alignment:e,dockEnabled:t}=this;return t||!this.viewModel.active?null:this._calculatePositionResult(this._calculateAutoAlignment(this._callCurrentAlignment(e)))}_setCurrentAlignment(){this._set("currentAlignment",this._getCurrentAlignment())}_setCurrentDockPosition(){this._set("currentDockPosition",this._getCurrentDockPosition())}_calculatePositionResult(e){const t=["left","right"];return gn(this.container)&&t.reverse(),e==null?void 0:e.replace(/leading/gi,t[0]).replaceAll(/trailing/gi,t[1])}_callDockPosition(e){return typeof e=="function"?e.call(this):e}_getDockPosition(){var e;return this._calculatePositionResult(this._calculateAutoDockPosition(this._callDockPosition((e=this.dockOptions)==null?void 0:e.position)))}_getCurrentDockPosition(){return this.dockEnabled&&this.viewModel.active?this._getDockPosition():null}_calculateAutoDockPosition(e){var o;if(e!=="auto")return e;const t=(o=this.viewModel)==null?void 0:o.view,r=gn(this.container)?"top-left":"top-right";if(!t)return r;const i=t.padding||{left:0,right:0,top:0,bottom:0},s=t.width-i.left-i.right,{breakpoints:n}=t;return n&&s<=n.xsmall?"bottom-center":r}_getDockIcon(){const e=this._getDockPosition();if(this.dockEnabled)return"minimize";switch(e){case"top-left":case"bottom-left":return"dock-left";case"top-center":return"maximize";case"bottom-center":return"dock-bottom";default:return"dock-right"}}_handleDockIcon(){this._dockAction.icon=this._getDockIcon()}_handleDockEnabled(){var e,t;this._dockAction.title=this.dockEnabled?(e=this.messages)==null?void 0:e.undock:(t=this.messages)==null?void 0:t.dock}_setMainContainerNode(e){this._mainContainerNode=e}_positionContainer(e=this._containerNode){if(e&&(this._containerNode=e),!this._containerNode)return;const{screenLocation:t}=this.viewModel,{width:r}=this._containerNode.getBoundingClientRect(),i=this._calculatePositionStyle(t,r);i&&Object.assign(this._containerNode.style,i)}_calculateFullWidth(e){const{currentAlignment:t,_pointerOffsetInPx:r}=this;return t==="top-left"||t==="bottom-left"||t==="top-right"||t==="bottom-right"?e+r:e}_calculateAlignmentPosition(e,t,r,i){const{currentAlignment:s,_pointerOffsetInPx:n}=this;if(!r)return;const{padding:o}=r,l=i/2,c=r.height-t,p=r.width-e;return s==="bottom-center"?{top:t+n-o.top,left:e-l-o.left}:s==="top-left"?{bottom:c+n-o.bottom,right:p+n-o.right}:s==="bottom-left"?{top:t+n-o.top,right:p+n-o.right}:s==="top-right"?{bottom:c+n-o.bottom,left:e+n-o.left}:s==="bottom-right"?{top:t+n-o.top,left:e+n-o.left}:s==="top-center"?{bottom:c+n-o.bottom,left:e-l-o.left}:void 0}_calculatePositionStyle(e,t){const{dockEnabled:r,view:i}=this;if(!i)return;if(r)return{left:"",top:"",right:"",bottom:""};if(e==null||!t)return;const s=this._calculateFullWidth(t),n=this._calculateAlignmentPosition(e.x,e.y,i,s);return n?{top:n.top!==void 0?`${n.top}px`:"auto",left:n.left!==void 0?`${n.left}px`:"auto",bottom:n.bottom!==void 0?`${n.bottom}px`:"auto",right:n.right!==void 0?`${n.right}px`:"auto"}:void 0}_viewChange(e,t){e&&t&&(this.close(),this.clear())}_viewReadyChange(e,t){e?this._wireUpView():t&&(this.close(),this.clear())}_wireUpView(){this._setDockEnabledForViewSize(this.dockOptions)}_dockingThresholdCrossed(e,t,r){const[i,s]=e,[n,o]=t,{width:l=0,height:c=0}=r??{};return i<=l&&n>l||i>l&&n<=l||s<=c&&o>c||s>c&&o<=c}_updateDockEnabledForViewSize(e,t){var p,h;if(!e||!t)return;const r=((h=(p=this.viewModel)==null?void 0:p.view)==null?void 0:h.padding)||{left:0,right:0,top:0,bottom:0},i=r.left+r.right,s=r.top+r.bottom,n=[],o=[];n[0]=e[0]-i,n[1]=e[1]-s,o[0]=t[0]-i,o[1]=t[1]-s;const{dockOptions:l}=this,c=l.breakpoint;this._dockingThresholdCrossed(n,o,c)&&this._setDockEnabledForViewSize(l),this._setCurrentDockPosition()}_toggleScreenLocationEnabled(){const{dockEnabled:e,viewModel:t}=this;if(!t)return;const r=t.active&&!e;t.screenLocationEnabled=r}_shouldDockAtCurrentViewSize(e){var l,c;const t=e.breakpoint,r=(c=(l=this.viewModel)==null?void 0:l.view)==null?void 0:c.ui;if(!r)return!1;const{width:i,height:s}=r;if(isNaN(i)||isNaN(s)||!t)return!1;const n=t.hasOwnProperty("width")&&i<=(t.width??0),o=t.hasOwnProperty("height")&&s<=(t.height??0);return n||o}_setDockEnabledForViewSize(e){e.breakpoint&&(this.dockEnabled=this._shouldDockAtCurrentViewSize(e))}};a([u({readOnly:!0})],_e.prototype,"_featureNavigationTop",null),a([u()],_e.prototype,"actions",null),a([u({readOnly:!0})],_e.prototype,"active",null),a([u()],_e.prototype,"alignment",void 0),a([u()],_e.prototype,"autoCloseEnabled",null),a([u()],_e.prototype,"defaultPopupTemplateEnabled",null),a([u()],_e.prototype,"content",null),a([u()],_e.prototype,"collapsed",null),a([u()],_e.prototype,"collapseEnabled",null),a([u({readOnly:!0})],_e.prototype,"currentAlignment",null),a([u({readOnly:!0})],_e.prototype,"currentDockPosition",null),a([u()],_e.prototype,"dockOptions",null),a([u()],_e.prototype,"dockEnabled",void 0),a([u({readOnly:!0})],_e.prototype,"featureCount",null),a([u()],_e.prototype,"featureMenuOpen",null),a([u()],_e.prototype,"features",null),a([u()],_e.prototype,"goToOverride",null),a([u()],_e.prototype,"headingLevel",void 0),a([u()],_e.prototype,"highlightEnabled",null),a([u()],_e.prototype,"icon",null),a([u()],_e.prototype,"location",null),a([u()],_e.prototype,"label",null),a([u(),Qt("esri/widgets/Popup/t9n/Popup")],_e.prototype,"messages",void 0),a([u()],_e.prototype,"promises",null),a([u({readOnly:!0})],_e.prototype,"selectedFeature",null),a([u()],_e.prototype,"selectedFeatureIndex",null),a([u({readOnly:!0})],_e.prototype,"selectedFeatureWidget",null),a([u()],_e.prototype,"spinnerEnabled",null),a([u()],_e.prototype,"title",null),a([u()],_e.prototype,"updateLocationEnabled",null),a([u()],_e.prototype,"view",null),a([u({type:X5}),w5(["triggerAction","trigger-action"])],_e.prototype,"viewModel",void 0),a([u()],_e.prototype,"visible",null),a([u({type:r$,nonNullable:!0})],_e.prototype,"visibleElements",void 0),_e=a([_("esri.widgets.Popup")],_e);const Loe=_e,Nu=document.getElementById("lower48map"),fA=async()=>{Nu.itemId=yoe;const e=Nu.map,t=new Xu({portalItem:{id:moe},renderer:pA({level:"state"}),popupTemplate:Nv({level:"state"}),maxScale:Lv,opacity:1,effect:"drop-shadow(2px, 2px, 2px, lightgray)"}),r=new Xu({portalItem:{id:goe},renderer:pA({level:"county"}),popupTemplate:Nv({level:"county"}),minScale:Lv,opacity:1,effect:"drop-shadow(2px, 2px, 2px, lightgray)"}),i=new Xu({portalItem:{id:"14c5450526a8430298b2fa74da12c2f4"},minScale:Lv,popupEnabled:!1,renderer:new Wo({symbol:new En({style:"none",outline:new Ur({color:[175,175,175,.35],width:.5})})})});dA.popupTemplate=Nv({level:"country"}),e.layers=new ne([t,r,i]),Nu.popup=new Loe({dockEnabled:!0,dockOptions:{breakpoint:!1,position:"top-right"}}),Nu.constraints={snapToZoom:!1,minScale:15595144*2,geometry:new it({spatialReference:{wkid:5070},xmin:-3.0351860631622137e6,ymin:-732037.6766778326,xmax:2225748801600614e-9,ymax:4149284633137403e-9})},new Y5({features:[dA],visible:!0,container:document.getElementById("legendDiv"),visibleElements:{closeButton:!1,actionBar:!1}})};Nu.ready?fA():Nu.addEventListener("arcgisViewReadyChange",fA);export{k as $,hc as A,mp as B,P1 as C,Cce as D,Ace as E,gl as F,T5 as G,Vde as H,Yt as I,ope as J,Zie as K,ece as L,a as M,u as N,_ as O,R as P,y$ as Q,IV as R,Sp as S,Ye as T,Ge as U,Cp as V,G as W,NG as X,RG as Y,jG as Z,j as _,ZK as a,tne as a$,M as a0,Oc as a1,Bo as a2,JP as a3,ode as a4,nde as a5,No as a6,tce as a7,kG as a8,jp as a9,jI as aA,Tue as aB,Ile as aC,ase as aD,WA as aE,use as aF,tte as aG,Ude as aH,Fs as aI,ye as aJ,bh as aK,dJ as aL,Nr as aM,Xoe as aN,D as aO,ge as aP,lx as aQ,vr as aR,rl as aS,Zae as aT,Roe as aU,xn as aV,xi as aW,Ig as aX,it as aY,In as aZ,rne as a_,rde as aa,A5 as ab,ne as ac,ni as ad,qle as ae,U$ as af,wr as ag,sl as ah,Vs as ai,fB as aj,mB as ak,gB as al,SB as am,EB as an,AB as ao,eL as ap,tL as aq,MB as ar,PB as as,LB as at,Fc as au,dk as av,Ya as aw,Z$ as ax,ck as ay,ih as az,DR as b,nle as b$,K_ as b0,WS as b1,Xu as b2,BP as b3,_ue as b4,_h as b5,Aue as b6,g7 as b7,dp as b8,mce as b9,Sg as bA,fl as bB,Oh as bC,Kp as bD,$e as bE,W as bF,Oo as bG,pc as bH,Pg as bI,pt as bJ,pC as bK,CF as bL,WP as bM,wJ as bN,ez as bO,zle as bP,js as bQ,Uue as bR,Tg as bS,zU as bT,Q$ as bU,fz as bV,Ble as bW,_k as bX,$k as bY,Gle as bZ,ks as b_,bce as ba,VM as bb,Sk as bc,Ere as bd,Rz as be,wce as bf,ve as bg,re as bh,ph as bi,Iue as bj,vh as bk,Ple as bl,rm as bm,Rv as bn,IA as bo,mj as bp,hh as bq,X as br,tle as bs,jA as bt,DA as bu,b7 as bv,q$ as bw,G$ as bx,w7 as by,$g as bz,ig as c,$h as c$,bc as c0,R5 as c1,UH as c2,ts as c3,el as c4,cC as c5,Jt as c6,ch as c7,wi as c8,T0 as c9,hg as cA,Oe as cB,Ec as cC,nY as cD,nX as cE,cK as cF,QK as cG,oX as cH,OL as cI,Le as cJ,RY as cK,PY as cL,kY as cM,Xt as cN,Ur as cO,xh as cP,qs as cQ,En as cR,Ww as cS,FJ as cT,oY as cU,xJ as cV,e7 as cW,LY as cX,xC as cY,og as cZ,pS as c_,DF as ca,nS as cb,_l as cc,si as cd,os as ce,joe as cf,wV as cg,rc as ch,R$ as ci,Doe as cj,r0 as ck,e0 as cl,Hg as cm,PU as cn,ede as co,ile as cp,tN as cq,Jo as cr,JJ as cs,Am as ct,f6 as cu,Ule as cv,Y$ as cw,QS as cx,yae as cy,Rs as cz,Eh as d,wh as d$,zp as d0,wo as d1,ti as d2,gq as d3,_g as d4,vq as d5,zN as d6,Wae as d7,Cue as d8,me as d9,Tm as dA,$l as dB,bpe as dC,mpe as dD,Fpe as dE,mae as dF,Dde as dG,UK as dH,Dy as dI,ple as dJ,Yae as dK,Pc as dL,wn as dM,cQ as dN,hJ as dO,sde as dP,dY as dQ,ide as dR,cY as dS,Vo as dT,AA as dU,uh as dV,ii as dW,Av as dX,dpe as dY,cpe as dZ,Zt as d_,Ky as da,h$ as db,B as dc,gh as dd,dle as de,M0 as df,Rc as dg,Ele as dh,YN as di,Lle as dj,Mle as dk,pr as dl,Fh as dm,Qp as dn,MI as dp,iV as dq,Rp as dr,cre as ds,XL as dt,Ce as du,Gae as dv,Kae as dw,ure as dx,C5 as dy,Jw as dz,zde as e,nh as e$,Mu as e0,xg as e1,Qf as e2,F_ as e3,Dle as e4,uk as e5,NF as e6,ole as e7,yle as e8,bI as e9,xY as eA,uX as eB,CI as eC,fk as eD,mX as eE,VY as eF,mm as eG,e2 as eH,Qg as eI,fv as eJ,g_ as eK,XS as eL,Cc as eM,zg as eN,oH as eO,FY as eP,c2 as eQ,cX as eR,AI as eS,uR as eT,zu as eU,TV as eV,Ds as eW,rs as eX,ns as eY,Wp as eZ,r2 as e_,EF as ea,AF as eb,gZ as ec,eN as ed,rN as ee,UJ as ef,sle as eg,ci as eh,y7 as ei,CE as ej,Sde as ek,xde as el,A as em,WJ as en,bK as eo,Zg as ep,XV as eq,Joe as er,TY as es,EJ as et,HS as eu,CJ as ev,OJ as ew,dl as ex,fK as ey,lK as ez,YK as f,npe as f$,Fu as f0,AY as f1,je as f2,DY as f3,jY as f4,NY as f5,yc as f6,vpe as f7,ype as f8,gpe as f9,RH as fA,Wo as fB,PQ as fC,fY as fD,HY as fE,fQ as fF,iQ as fG,fX as fH,eF as fI,nF as fJ,BK as fK,p1 as fL,jle as fM,gue as fN,Mue as fO,SP as fP,eae as fQ,$q as fR,b1 as fS,NC as fT,xD as fU,_c as fV,An as fW,qS as fX,GP as fY,Rl as fZ,pce as f_,Bz as fa,Wz as fb,Hz as fc,rZ as fd,zz as fe,iZ as ff,Zoe as fg,Qm as fh,Ae as fi,o6 as fj,Lo as fk,ZL as fl,Que as fm,Df as fn,Tse as fo,ble as fp,Ie as fq,oT as fr,aT as fs,tm as ft,RS as fu,jm as fv,OB as fw,Vc as fx,qN as fy,Eae as fz,dte as g,ee as g$,Mv as g0,sQ as g1,aQ as g2,OY as g3,BG as g4,GG as g5,qG as g6,dQ as g7,BY as g8,WY as g9,BN as gA,S7 as gB,Uz as gC,aS as gD,vue as gE,mue as gF,rB as gG,Ede as gH,PN as gI,f$ as gJ,uu as gK,jr as gL,b_ as gM,Nde as gN,vQ as gO,bQ as gP,TM as gQ,Z as gR,Tt as gS,tde as gT,gD as gU,gae as gV,vae as gW,Ole as gX,Tle as gY,SS as gZ,kle as g_,dC as ga,ZY as gb,YY as gc,oQ as gd,QY as ge,KY as gf,XY as gg,eQ as gh,tQ as gi,rQ as gj,lR as gk,Sj as gl,wc as gm,wx as gn,IP as go,QN as gp,Kie as gq,Eu as gr,Za as gs,rae as gt,ppe as gu,upe as gv,Qi as gw,Fse as gx,Gz as gy,m7 as gz,qoe as h,fae as h$,Wde as h0,Bde as h1,jde as h2,Ase as h3,t7 as h4,a$ as h5,l$ as h6,Se as h7,Mi as h8,b3 as h9,oc as hA,lde as hB,BA as hC,Bq as hD,Fle as hE,c6 as hF,Sae as hG,$ae as hH,uY as hI,ape as hJ,xae as hK,_ae as hL,Hoe as hM,hj as hN,Ale as hO,Lk as hP,Dm as hQ,Ps as hR,Vle as hS,hQ as hT,Fo as hU,SE as hV,km as hW,lX as hX,ZJ as hY,VJ as hZ,zJ as h_,v as ha,cle as hb,sh as hc,Qt as hd,_r as he,On as hf,T as hg,bi as hh,tpe as hi,Tee as hj,yj as hk,F$ as hl,Bae as hm,ug as hn,rV as ho,wg as hp,Qae as hq,Qoe as hr,Koe as hs,Yoe as ht,wl as hu,vV as hv,PA as hw,Lf as hx,dj as hy,xue as hz,JK as i,fS as i$,Kt as i0,Uae as i1,_N as i2,vY as i3,bY as i4,SD as i5,Uo as i6,Oce as i7,iY as i8,sY as i9,OF as iA,sI as iB,nP as iC,Xae as iD,rt as iE,gde as iF,LS as iG,lG as iH,Ll as iI,Ape as iJ,Ppe as iK,kpe as iL,ine as iM,sne as iN,Wk as iO,sue as iP,rle as iQ,dB as iR,Xle as iS,Hae as iT,dm as iU,Cf as iV,Nle as iW,M5 as iX,_le as iY,Wa as iZ,uC as i_,SY as ia,YQ as ib,hK as ic,B3 as id,_pe as ie,$pe as ig,Ipe as ih,Spe as ii,xpe as ij,Cpe as ik,W3 as il,Tpe as im,Epe as io,wpe as ip,Ope as iq,Mpe as ir,bl as is,Ki as it,lce as iu,iB as iv,ale as iw,LA as ix,aF as iy,qae as iz,Bte as j,Po as j$,eU as j0,cde as j1,dre as j2,Vk as j3,dde as j4,dce as j5,DS as j6,cce as j7,AJ as j8,Uh as j9,ax as jA,lh as jB,eP as jC,KN as jD,Os as jE,Q_ as jF,pB as jG,KV as jH,Bce as jI,Dc as jJ,MS as jK,tG as jL,rG as jM,Dg as jN,FP as jO,Rie as jP,IG as jQ,jie as jR,jP as jS,Lm as jT,Fae as jU,AP as jV,bp as jW,uce as jX,que as jY,Gue as jZ,Bue as j_,MD as ja,ule as jb,hue as jc,pue as jd,iq as je,uU as jf,yue as jg,fue as jh,L$ as ji,sZ as jj,tZ as jk,eZ as jl,oq as jm,xA as jn,pz as jo,hz as jp,yce as jq,ak as jr,cU as js,$le as jt,Q7 as ju,sU as jv,zF as jw,mle as jx,aC as jy,i$ as jz,MJ as k,wse as k$,So as k0,Cs as k1,OV as k2,Ib as k3,D7 as k4,j7 as k5,hle as k6,A6 as k7,yb as k8,Ze as k9,KT as kA,xle as kB,Ane as kC,zne as kD,G5 as kE,kne as kF,Une as kG,Dne as kH,hce as kI,Noe as kJ,fce as kK,Aae as kL,lT as kM,Lne as kN,ls as kO,tl as kP,lse as kQ,jU as kR,u7 as kS,Xr as kT,La as kU,br as kV,DQ as kW,QW as kX,J2 as kY,zv as kZ,yse as k_,fb as ka,gb as kb,Im as kc,yI as kd,wae as ke,Jce as kf,VT as kg,GT as kh,gle as ki,AT as kj,xT as kk,aU as kl,IT as km,wle as kn,wW as ko,UT as kp,TT as kq,Rle as kr,FT as ks,ZT as kt,cT as ku,YT as kv,QT as kw,_U as kx,Sle as ky,vle as kz,Cde as l,Cse as l0,KH as l1,bn as l2,xce as l3,Sce as l4,NA as l5,RA as l6,Goe as l7,Ih as l8,tae as l9,Sue as lA,wZ as lB,bZ as lC,fde as lD,Ide as lE,Mde as lF,Rde as lG,uj as la,im as lb,Woe as lc,oZ as ld,vZ as le,XP as lf,nue as lg,cZ as lh,oue as li,zoe as lj,lj as lk,Uoe as ll,fj as lm,wue as ln,bue as lo,s$ as lp,HB as lq,IX as lr,BB as ls,GB as lt,JB as lu,Cle as lv,Eue as lw,Ho as lx,PV as ly,$ue as lz,Xue as m,nR as n,Vr as o,Gde as p,Jae as q,qde as r,O as s,yX as t,Ade as u,tH as v,kc as w,rH as x,Ece as y,rce as z};
