{"version":3,"file":"LayerView-ve4zSiXH.js","sources":["../../node_modules/@arcgis/core/views/layers/LayerView.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as e}from\"tslib\";import{EventedAccessor as t}from\"../../core/Evented.js\";import{IdentifiableMixin as r}from\"../../core/Identifiable.js\";import i from\"../../core/Logger.js\";import{destroyMaybe as s}from\"../../core/maybe.js\";import{EsriPromiseMixin as n}from\"../../core/Promise.js\";import{property as l}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/RandomLCG.js\";import{subclass as o}from\"../../core/accessorSupport/decorators/subclass.js\";import{UpdatingHandles as a}from\"../../core/support/UpdatingHandles.js\";import{validateScaleRange as p}from\"../support/layerViewUtils.js\";let d=class extends(r(n(t))){get spatialReferenceSupported(){return!0}constructor(e){super(e),this._updatingHandles=new a,this.layer=null,this.parent=null}initialize(){this.when().catch(e=>{if(\"layerview:create-error\"!==e.name){const t=this.layer&&this.layer.id||\"no id\",r=this.layer?.title||\"no title\";i.getLogger(this).error(\"#resolve()\",`Failed to resolve layer view (layer title: '${r}', id: '${t}')`,e)}})}destroy(){this._updatingHandles=s(this._updatingHandles),this._set(\"parent\",null)}get fullOpacity(){return(this.layer?.opacity??1)*(this.parent?.fullOpacity??1)}get suspended(){return this.destroyed||!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer?.legendEnabled}get updating(){return!(!this._updatingHandles?.updating&&!this.isUpdating())}get updatingProgress(){return this.updating?0:1}get updateSuspended(){return this.suspended}get visible(){return!0===this.layer?.visible}set visible(e){this._overrideIfSome(\"visible\",e)}get visibleAtCurrentScale(){return!0}get visibleAtCurrentTimeExtent(){const e=this.view.timeExtent,t=this.layer?.visibilityTimeExtent;return!e||!t||!e.intersection(t).isEmpty}canResume(){const e=this.layer&&\"effectiveScaleRange\"in this.layer?this.layer.effectiveScaleRange:null;return this.visible&&this.layer?.loaded&&this.parent&&!this.parent.suspended&&this.view?.ready&&p(e)&&this.visibleAtCurrentScale&&this.visibleAtCurrentTimeExtent||!1}getSuspendInfo(){const e=this.parent?.suspended?this.parent.suspendInfo:{},t=this;t.view?.ready||(e.viewNotReady=!0),this.layer&&this.layer.loaded||(e.layerNotLoaded=!0);const r=this.layer&&\"effectiveScaleRange\"in this.layer?this.layer.effectiveScaleRange:null;return p(r)&&this.visibleAtCurrentScale||(e.outsideScaleRange=!0),this.visibleAtCurrentTimeExtent||(e.outsideVisibilityTimeExtent=!0),this.visible||(e.layerInvisible=!0),e}isUpdating(){return!1}};e([l({readOnly:!0})],d.prototype,\"spatialReferenceSupported\",null),e([l()],d.prototype,\"view\",void 0),e([l()],d.prototype,\"fullOpacity\",null),e([l()],d.prototype,\"layer\",void 0),e([l()],d.prototype,\"parent\",void 0),e([l({readOnly:!0})],d.prototype,\"suspended\",null),e([l({readOnly:!0})],d.prototype,\"suspendInfo\",null),e([l({readOnly:!0})],d.prototype,\"legendEnabled\",null),e([l({type:Boolean,readOnly:!0})],d.prototype,\"updating\",null),e([l({readOnly:!0})],d.prototype,\"updatingProgress\",null),e([l()],d.prototype,\"updateSuspended\",null),e([l()],d.prototype,\"visible\",null),e([l({readOnly:!0})],d.prototype,\"visibleAtCurrentScale\",null),e([l({readOnly:!0})],d.prototype,\"visibleAtCurrentTimeExtent\",null),d=e([o(\"esri.views.layers.LayerView\")],d);export{d as default};\n"],"names":["d","r","n","t","a","_a","i","s","_b","p","e","l","o"],"mappings":"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","x_google_ignoreList":[0]}