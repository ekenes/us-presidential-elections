import{I as u,cv as c,gn as y,H as f,ae as m,iH as p,D as v,dY as P}from"./index-Dbb7O7mW.js";import{v as g}from"./PivotQuery-Boq_Nzu7.js";function l(e){const t=p(e),o=t.outPivots;if(o!=null&&o.length){for(const i of o)i.pivotType==="Pivot"&&i.pivotParameters.outStatistic?i.pivotParameters.outStatistic=JSON.stringify(i.pivotParameters.outStatistic):i.pivotType==="Unpivot"&&(i.unPivotParameters.sourceFields=i.unPivotParameters.sourceFields.join(","));t.outPivots=JSON.stringify(o)}return t}async function S(e,t,o){return await d(e,t,o)}async function d(e,t,o={}){const i=typeof e=="string"?u(e):e,a=t.geometry?[t.geometry]:[],r=await c(a,null,{signal:o.signal}),n=r==null?void 0:r[0];n!=null&&((t=t.clone()).geometry=n);const s=y({...i.query,f:"json",...l(t)});return f(m(i.path,"queryPivot"),{...o,query:{...s,...o.query}})}async function H(e,t,o){const i=v(e),a={...o},{data:r}=await S(i,g.from(t),a);return P.fromJSON(r)}export{H as executePivotQuery};
//# sourceMappingURL=executePivotQuery-CPez_-mP.js.map
