{"version":3,"file":"dehydratedFeatures-cuUeSvI3.js","sources":["../../node_modules/@arcgis/core/views/2d/layers/graphics/densificationConstants.js","../../node_modules/@arcgis/core/layers/graphics/dehydratedFeatures.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport has from\"../../../../core/has.js\";function n(){return has(\"curve-densification-coarse-segments\")}function e(){return has(\"curve-densification-max-segments\")}function i(){return has(\"curve-densification-min-segments\")}function t(){return has(\"curve-densification-pixel-deviation\")}export{e as getApproximateMaxDensificationSegments,n as getCoarseSegmentsPerCurve,t as getMaxDeviationInPixels,i as getMinSegmentsPerCurve};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport\"../../core/has.js\";import{baseObjectMemory as e,estimateNumberArrayMemory as t,estimateNestedObjectMemory as s,estimateAttributesMemory as n}from\"../../core/memoryEstimations.js\";import{generateUID as r}from\"../../core/uid.js\";import i from\"../../geometry/SpatialReference.js\";import{empty as o,expandWithNestedArray as a}from\"../../geometry/support/aaBoundingBox.js\";import{empty as l,expandWithNestedArray as u}from\"../../geometry/support/aaBoundingRect.js\";import{unquantizePolyline as c,unquantizePolygon as p,unquantizeMultipoint as m,unquantizePoint as h}from\"../../geometry/support/quantizationUtils.js\";import{featureGeometryTypeKebabDictionary as f}from\"../../geometry/support/typeUtils.js\";import y from\"../support/Field.js\";import{getApproximateMaxDensificationSegments as g}from\"../../views/2d/layers/graphics/densificationConstants.js\";export{equals}from\"./dehydratedFeatureComparison.js\";class d{constructor(e,t,s){this.uid=e,this.geometry=t,this.attributes=s,this.visible=!0,this.objectId=null,this.centroid=null}}function b(e){return null!=e.geometry}class x{constructor(){this.exceededTransferLimit=!1,this.features=[],this.fields=[],this.hasM=!1,this.hasZ=!1,this.geometryType=null,this.objectIdFieldName=null,this.globalIdFieldName=null,this.geometryProperties=null,this.geohashFieldName=null,this.spatialReference=null,this.transform=null}}function j(e,t){const s=f.fromJSON(e.geometryType),n=i.fromJSON(e.spatialReference),r=e.transform,o=e.objectIdFieldName,a=t?.maxStringAttributeLength,l=t?.maxStringAttributeFields;let u;const g=e.features.map(t=>{const i=N(t,s,n,e.objectIdFieldName),f=i.geometry;if(w(i.attributes,l,a,e=>{u??=[];const t=R(i,o);null!=t&&u.push({objectId:t,attribute:e})}),null!=f&&r)switch(f.type){case\"point\":i.geometry=h(r,f,f);break;case\"multipoint\":i.geometry=m(r,f,f);break;case\"polygon\":i.geometry=p(r,f,f);break;case\"polyline\":i.geometry=c(r,f,f);break;case\"extent\":case\"mesh\":i.geometry=f}return i});return{geometryType:s,features:g,spatialReference:n,fields:e.fields?.map(e=>y.fromJSON(e))??[],objectIdFieldName:e.objectIdFieldName,globalIdFieldName:e.globalIdFieldName,geohashFieldName:e.geohashFieldName,geometryProperties:e.geometryProperties,hasZ:e.hasZ,hasM:e.hasM,exceededTransferLimit:e.exceededTransferLimit,transform:null,missingAttributes:u}}function N(e,t,s,n){return{uid:r(),objectId:n&&e.attributes?e.attributes[n]:null,attributes:e.attributes,geometry:Z(e.geometry,t,s),visible:!0}}function Z(e,t,s){if(null==e)return null;switch(t){case\"point\":{const t=e;return{x:t.x,y:t.y,z:t.z,m:t.m,hasZ:null!=t.z,hasM:null!=t.m,type:\"point\",spatialReference:s}}case\"polyline\":{const t=e;return{paths:t.paths,hasZ:!!t.hasZ,hasM:!!t.hasM,type:\"polyline\",spatialReference:s}}case\"polygon\":{const t=e;return{rings:t.rings,hasZ:!!t.hasZ,hasM:!!t.hasM,type:\"polygon\",spatialReference:s}}case\"multipoint\":{const t=e;return{points:t.points,hasZ:!!t.hasZ,hasM:!!t.hasM,type:\"multipoint\",spatialReference:s}}}}function F(n){if(null==n)return 0;switch(n.type){case\"point\":return e+10+8+24;case\"polyline\":case\"polygon\":{let t=0;const r=2+(n.hasZ?1:0)+(n.hasM?1:0),i=\"polyline\"===n.type?n.paths:n.rings,o=\"polyline\"===n.type?n.curvePaths:n.curveRings;if(o?.length){const e=3*g()*128;t=8*e*r+128*e+32*(i.length+1)}else t=s(i);return e+64+t+34}case\"multipoint\":{const t=s(n.points);return e+t+64+34+32}case\"extent\":return e+10+64+34;case\"mesh\":{const s=n.vertexAttributes;return e+t(s.position,s.normal,s.uv,s.tangent)}default:return e}}function I(e){let t=32;return t+=n(e.attributes),t+=3,t+=8+F(e.geometry),t}function k(e){if(null==e)return 0;switch(e.type){case\"point\":return 1;case\"polyline\":{let t=0;for(const s of e.paths)t+=s.length;return t}case\"polygon\":{let t=0;for(const s of e.rings)t+=s.length;return t}case\"multipoint\":return e.points.length;case\"extent\":return 2;case\"mesh\":{const t=e.vertexAttributes&&e.vertexAttributes.position;return t?t.length/3:0}default:return}}function M(e){if(null==e)return!1;switch(e.type){case\"extent\":case\"point\":return!0;case\"polyline\":for(const t of e.paths)if(t.length>0)return!0;return!1;case\"polygon\":for(const t of e.rings)if(t.length>0)return!0;return!1;case\"multipoint\":return e.points.length>0;case\"mesh\":return!e.loaded||e.vertexAttributes.position.length>0}}function v(e,t){switch(o(t),\"mesh\"===e.type&&(e=e.extent),e.type){case\"point\":t[0]=t[3]=e.x,t[1]=t[4]=e.y,e.hasZ&&(t[2]=t[5]=e.z);break;case\"polyline\":for(let s=0;s<e.paths.length;s++)a(t,e.paths[s],!!e.hasZ);break;case\"polygon\":for(let s=0;s<e.rings.length;s++)a(t,e.rings[s],!!e.hasZ);break;case\"multipoint\":a(t,e.points,!!e.hasZ);break;case\"extent\":t[0]=e.xmin,t[1]=e.ymin,t[3]=e.xmax,t[4]=e.ymax,null!=e.zmin&&(t[2]=e.zmin),null!=e.zmax&&(t[5]=e.zmax)}return t}function z(e,t){switch(l(t),\"mesh\"===e.type&&(e=e.extent),e.type){case\"point\":t[0]=t[2]=e.x,t[1]=t[3]=e.y;break;case\"polyline\":for(let s=0;s<e.paths.length;s++)u(t,e.paths[s]);break;case\"polygon\":for(let s=0;s<e.rings.length;s++)u(t,e.rings[s]);break;case\"multipoint\":u(t,e.points);break;case\"extent\":t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax}}function R(e,t){return null!=e.objectId?e.objectId:e.attributes&&t?e.attributes[t]:null}function w(e,t,s,n){if(t?.size&&null!=s&&e)for(const r in e){if(!t.has(r))continue;const i=e[r];\"string\"==typeof i&&i.length>s&&(n(r),e[r]=\"\")}}export{d as DehydratedFeatureClass,x as DehydratedFeatureSetClass,v as computeAABB,z as computeAABR,F as estimateGeometryMemory,I as estimateSize,j as fromFeatureSetJSON,Z as fromJSONGeometry,R as getObjectId,b as hasGeometry,M as hasVertices,k as numVertices,w as removeLargeStringAttributes};\n"],"names":["n","has","e","i","t","d","s","b","x","F","r","o","g","v","a","z","l","u","R","w"],"mappings":"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","x_google_ignoreList":[0,1]}