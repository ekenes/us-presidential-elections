{"version":3,"file":"tiles3DUtils-CmlG3CN7.js","sources":["../../node_modules/@arcgis/core/layers/support/tiles3DUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{rad2deg as e}from\"../../core/mathUtils.js\";import{e as t,g as r,t as n,d as o,A as i,z as s,a as m}from\"../../chunks/vec32.js\";import{fromValues as a,create as h}from\"../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{WGS84ECEFSpatialReferenceLike as l}from\"../../geometry/ellipsoidUtils.js\";import c from\"../../geometry/Extent.js\";import f from\"../../geometry/HeightModelInfo.js\";import x from\"../../geometry/SpatialReference.js\";import{projectBuffer as g}from\"../../geometry/projection/projectBuffer.js\";function u(e,t){if(!Array.isArray(e)||e.length<t)return!1;for(const r of e)if(\"number\"!=typeof r)return!1;return!0}const d=7645211,p={xmin:-180,ymin:-90,zmin:-450,xmax:180,ymax:90,zmax:8850},S=new Map([[5773,new f({heightModel:\"gravity-related-height\",heightUnit:\"meters\",vertCRS:\"EGM96_Geoid\"})],[3855,new f({heightModel:\"gravity-related-height\",heightUnit:\"meters\",vertCRS:\"EGM2008_Geoid\"})],[115700,new f({heightModel:\"ellipsoidal\",heightUnit:\"meters\",vertCRS:\"WGS_1984\"})],[115701,new f({heightModel:\"ellipsoidal\",heightUnit:\"meters\",vertCRS:\"ETRS_1989\"})],[6360,new f({heightModel:\"gravity-related-height\",heightUnit:\"us-feet\",vertCRS:\"NAVD88_height_(ftUS)\"})],[7837,new f({heightModel:\"gravity-related-height\",heightUnit:\"meters\",vertCRS:\"DHHN2016_(height) \"})]]);function _(e){if(!e)return null;const t=e.vcsWkid||e.latestVcsWkid;return t?S.get(t):null}function R(e){return!(!(e.extensions?.ESRI_crs?.wkid||e.extensions?.ESRI_crs?.latestWkid||e.extensions?.ESRI_crs?.wkt)||!e.root?.extensions?.ESRI_crs?.boundingVolume?.box&&!e.root?.extensions?.ESRI_crs?.boundingVolume?.sphere)}function E(f,S=!1){let _=new x({wkid:4326,vcsWkid:115700}),R=f.root?.boundingVolume,E=!1,b=f?.root?.transform;if(S&&(f.extensions?.ESRI_crs?.wkid||f.extensions?.ESRI_crs?.latestWkid||f.extensions?.ESRI_crs?.wkt)&&(f.root?.extensions?.ESRI_crs?.boundingVolume?.box||f.root?.extensions?.ESRI_crs?.boundingVolume?.sphere))_=new x(f.extensions?.ESRI_crs),R=f.root?.extensions?.ESRI_crs?.boundingVolume,b=f.root?.transform,E=!0;else if(!R)return new c(-180,-90,180,90,_);if(R.box){const e=R?.box;if(e[3]>d&&e[7]>d&&e[11]>d)return new c({...p,spatialReference:_})}const w=h();if(!E&&R.region&&u(R.region,6)){const t=R.region,r=e(t[0]),n=e(t[1]),o=t[4],i=e(t[2]),s=e(t[3]),m=t[5];return new c({xmin:r,ymin:n,zmin:o,xmax:i,ymax:s,zmax:m,spatialReference:_})}if(R.sphere&&u(R.sphere,4)){const e=R.sphere,m=a(e[0],e[1],e[2]),f=e[3]/Math.sqrt(3),d=h();t(d,m,a(f,f,f));const p=h();if(r(p,m,a(f,f,f)),b&&u(b,16)){const e=b;n(w,d,e),o(d,w),n(w,p,e),o(p,w)}E||(g(d,l,0,d,x.WGS84,0),g(p,l,0,p,x.WGS84,0));const S=h(),y=h();return i(S,d,p),s(y,d,p),new c({xmin:S[0],ymin:S[1],zmin:S[2],xmax:y[0],ymax:y[1],zmax:y[2],spatialReference:_})}if(R.box&&u(R.box,12)){const e=R.box,t=a(e[0],e[1],e[2]),o=a(e[3],e[4],e[5]),f=a(e[6],e[7],e[8]),d=a(e[9],e[10],e[11]),p=[];for(let r=0;r<8;++r)p.push(h());if(r(p[0],t,o),r(p[0],p[0],f),r(p[0],p[0],d),m(p[1],t,o),r(p[1],p[1],f),r(p[1],p[1],d),r(p[2],t,o),m(p[2],p[2],f),r(p[2],p[2],d),m(p[3],t,o),m(p[3],p[3],f),r(p[3],p[3],d),r(p[4],t,o),r(p[4],p[4],f),m(p[4],p[4],d),m(p[5],t,o),r(p[5],p[5],f),m(p[5],p[5],d),r(p[6],t,o),m(p[6],p[6],f),m(p[6],p[6],d),m(p[7],t,o),m(p[7],p[7],f),m(p[7],p[7],d),b&&u(b,16)){const e=b;for(let t=0;t<8;++t)n(p[t],p[t],e)}const S=a(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),w=a(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE);for(let r=0;r<8;++r)E||g(p[r],l,0,p[r],x.WGS84,0),i(w,w,p[r]),s(S,S,p[r]);return new c({xmin:w[0],ymin:w[1],zmin:w[2],xmax:S[0],ymax:S[1],zmax:S[2],spatialReference:_})}return new c(-180,-90,180,90,_)}export{_ as getHeightModelInfoFromVCS,R as hasEsriCrs,E as initFullExtent,u as verifyArray};\n"],"names":["u","e","t","r","d","p","f","R","_b","_a","_d","_c","_f","_e","_j","_i","_h","_g","_n","_m","_l","_k","E","S","_","x","b","_p","_o","_q","_t","_s","_r","_u","c","w","h","n","o","s","m","a","g","l","y","i"],"mappings":"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","x_google_ignoreList":[0]}