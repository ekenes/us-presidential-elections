{"version":3,"mappings":"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","names":["f","p","r","a","s","v","l","o","n","c","i","u","y","__vitePreload","__vite_default__","w","m","e","d","t","L","S","g","_b","h","_c","P","_d","_e","_f","_g","b","_a","I"],"ignoreList":[0],"sources":["../../node_modules/@arcgis/core/layers/support/arcgisLayers.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport e from\"../../core/Error.js\";import{urlToObject as r,getFilename as a}from\"../../core/urlUtils.js\";import{parse as t,parseNonStandardSublayerUrl as s}from\"./arcgisLayerUrl.js\";import{findAssociatedFeatureService as l}from\"./associatedFeatureServiceUtils.js\";import{getLayerModuleType as o,fetchFeatureService as n}from\"./fetchService.js\";import{getPreferredUrl as c,sceneServiceLayerTypeToClassName as i}from\"./layerUtils.js\";import{layerLookupMap as u}from\"./lazyLayerLoader.js\";import{fetchArcGISServiceJSON as y}from\"../../support/requestPresets.js\";const f={FeatureLayer:!0,SceneLayer:!0,VideoLayer:!0};async function p(e){const{properties:r,url:a}=e,t={...r,url:a},s=await v(a,r?.customParameters),{Constructor:l,layerId:o,sourceJSON:n,parsedUrl:c,layers:i,tables:u}=s;if(i.length+u.length===0)return null!=o&&(t.layerId=o),null!=n&&(t.sourceJSON=n),new l(t);const y=new(0,(await import(\"../GroupLayer.js\")).default)({title:c.title});return await w(y,s,t),y}function m(e,r){return e?e.find(({id:e})=>e===r):null}function d(e,r,a,t,s){const l={...s,layerId:r};return null!=e&&(l.url=e),null!=a&&(l.sourceJSON=a),\"sublayerTitleMode\"in t.prototype&&(l.sublayerTitleMode=\"service-name\"),new t(l)}async function w(e,r,a){const t=r.sublayerConstructorProvider;for(const{id:s,serverUrl:l}of r.layers){const o=m(r.sublayerInfos,s),n=d(l,s,o,(o&&t?.(o))??r.Constructor,a);e.add(n)}if(r.tables.length){const t=await L(\"FeatureLayer\");r.tables.forEach(({id:s,serverUrl:l})=>{const o=d(l,s,m(r.tableInfos,s),t,a);e.tables.add(o)})}}async function v(r,a){let s=t(r);if(null==s&&(s=await S(r,a)),null==s)throw new e(\"arcgis-layers:url-mismatch\",\"The url '${url}' is not a valid arcgis resource\",{url:r});const{serverType:l,sublayer:n}=s;let u;const p={FeatureServer:\"FeatureLayer\",KnowledgeGraphServer:\"KnowledgeGraphLayer\",StreamServer:\"StreamLayer\",VectorTileServer:\"VectorTileLayer\",VideoServer:\"VideoLayer\"},m=\"FeatureServer\"===l,d=\"SceneServer\"===l,w={parsedUrl:s,Constructor:null,layerId:m||d?n??void 0:void 0,layers:[],tables:[]};switch(l){case\"MapServer\":if(null!=n){const{type:t}=await y(r,{customParameters:a});switch(u=\"FeatureLayer\",t){case\"Catalog Layer\":u=\"CatalogLayer\";break;case\"Catalog Dynamic Group Layer\":throw new e(\"arcgis-layers:unsupported\",`fromUrl() not supported for \"${t}\" layers`)}}else{u=await g(r,a)?\"TileLayer\":\"MapImageLayer\"}break;case\"ImageServer\":{const e=await y(r,{customParameters:a}),{tileInfo:t,cacheType:s}=e;u=t?\"LERC\"!==t?.format?.toUpperCase()||s&&\"elevation\"!==s.toLowerCase()?\"ImageryTileLayer\":\"ElevationLayer\":\"ImageryLayer\";break}case\"SceneServer\":{const e=await y(s.url.path,{customParameters:a});if(u=\"SceneLayer\",e){const r=e?.layers;if(\"Voxel\"===e?.layerType)u=\"VoxelLayer\";else if(r?.length){const e=r[0]?.layerType;null!=e&&null!=i[e]&&(u=i[e])}}break}case\"3DTilesServer\":throw new e(\"arcgis-layers:unsupported\",\"fromUrl() not supported for 3DTiles layers\");case\"FeatureServer\":if(u=\"FeatureLayer\",null!=n){const e=await y(r,{customParameters:a});w.sourceJSON=e,w.preferredUrl=c(),u=o(e.type)}break;default:u=p[l]}if(f[u]&&null==n){const e=await h(r,l,a);m&&(w.preferredUrl=e.preferredUrl,w.sublayerInfos=e.layerInfos,w.tableInfos=e.tableInfos);if(1!==e.layers.length+e.tables.length)w.layers=e.layers,w.tables=e.tables,m&&e.layerInfos?.length&&(w.sublayerConstructorProvider=await P(e.layerInfos));else if(m||d){const r=e.layerInfos?.[0]??e.tableInfos?.[0];if(w.layerId=e.layers[0]?.id??e.tables[0]?.id,w.sourceJSON=r,m){const e=r?.type;u=o(e)}}}return w.Constructor=await L(u),w}async function S(e,t){const l=await y(e,{customParameters:t});let o=null,n=null;const c=l.type;if(\"Feature Layer\"===c||\"Table\"===c?(o=\"FeatureServer\",n=l.id??null):\"indexedVector\"===c?o=\"VectorTileServer\":l.hasOwnProperty(\"mapName\")?o=\"MapServer\":l.hasOwnProperty(\"bandCount\")&&l.hasOwnProperty(\"pixelSizeX\")?o=\"ImageServer\":l.hasOwnProperty(\"maxRecordCount\")&&l.hasOwnProperty(\"allowGeometryUpdates\")?o=\"FeatureServer\":l.hasOwnProperty(\"streamUrls\")?o=\"StreamServer\":b(l)?(o=\"SceneServer\",n=l.id):l.hasOwnProperty(\"layers\")&&b(l.layers?.[0])&&(o=\"SceneServer\"),!o)return null;const i=null!=n?s(e):null;return{title:null!=i&&l.name||a(e),serverType:o,sublayer:n,url:{path:null!=i?i.serviceUrl:r(e).path}}}function b(e){return null!=e&&e.hasOwnProperty(\"store\")&&e.hasOwnProperty(\"id\")&&\"number\"==typeof e.id}async function h(e,r,a){let t,s,l,o=!1;switch(r){case\"FeatureServer\":{const r=await n(e,{customParameters:a});l=c(e,{preferredHost:r.preferredHost}),o=!!r.layersJSON,t=r.layersJSON||r.serviceJSON;break}case\"SceneServer\":{const r=await I(e,a);t=r.serviceInfo,s=r.tableServerUrl;break}default:t=await y(e,{customParameters:a})}const i=t?.layers,u=t?.tables;return{preferredUrl:l,layers:i?.map(e=>({id:e.id})).reverse()||[],tables:u?.map(e=>({serverUrl:s,id:e.id})).reverse()||[],layerInfos:o?i:[],tableInfos:o?u:[]}}async function I(e,r){const a=await y(e,{customParameters:r}),t=a.layers?.[0];if(!t)return{serviceInfo:a};try{const{serverUrl:t}=await l(e),s=await y(t,{customParameters:r}).catch(()=>null);return s&&(a.tables=s.tables),{serviceInfo:a,tableServerUrl:t}}catch{return{serviceInfo:a}}}async function L(e){return(0,u[e])()}async function g(e,r){return(await y(e,{customParameters:r})).tileInfo}async function P(e){if(!e.length)return;const r=new Set,a=[];for(const{type:l}of e)r.has(l)||(r.add(l),a.push(L(o(l))));const t=await Promise.all(a),s=new Map;return Array.from(r).forEach((e,r)=>{s.set(e,t[r])}),e=>s.get(e.type)}export{p as fromUrl};\n"],"file":"assets/arcgisLayers-DXB-kwmK.js"}