{"version":3,"file":"cutOperator-Bi1AYhU9.js","sources":["../../node_modules/@arcgis/core/chunks/OperatorCut.js","../../node_modules/@arcgis/core/geometry/operators/gx/operatorCut.js","../../node_modules/@arcgis/core/chunks/cutOperator.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{G as t}from\"./SimpleGeometryCursor.js\";import{G as e,d as s,g as n}from\"./Geometry.js\";import{P as r,a as o,E as m,n as i}from\"./MultiPathImpl.js\";import{g as u,c}from\"./Envelope.js\";import{l,m as h,n as a,T as d,o as p,C as y}from\"./ProjectionTransformation.js\";var _=y;function g(t,e){return{m_geometry:t,m_side:e}}function f(t,e,s,n,r,o){if(e.isEmpty()){const t=g(e,0);return void r.push(t)}if(s.isEmpty()){const t=g(e,0);return void r.push(t)}const i=[],u=new m;{const m=u.createGeometryUserIndex(),c=u.addGeometry(e),y=u.addGeometry(s),f=new d(o);let C=0,E=null;if(u.hasCurves()){E=new _;const t=u.getEnvelope2D(o);C=l(n.total());const e=h(n.total(),t);a(u,e,n.total(),12e3,E,null,o)}u.dbgVerifyCurves(),f.setEditShapeCrackAndCluster(u,n),f.cut(t,m,c,y,i);for(const t of i){null!==E&&E.stitchCurves(u,t,C,!1);const e=g(u.getGeometry(t),p(u.getGeometryUserIndex(t,m)));r.push(e)}null!==E&&E.clearStitcher(u)}}function C(t,e,s,n,r,u){if(e.isEmpty()){const t=g(e,0);return void r.push(t)}if(s.isEmpty()){const t=g(e,0);return void r.push(t)}const c=[],p=new m;{const t=p.createGeometryUserIndex(),y=p.addGeometry(e),f=p.addGeometry(s),C=new d(u);let E=0,G=null;if(p.hasCurves()){G=new _;const t=p.getEnvelope2D(u);E=l(n.total());const e=h(n.total(),t);a(p,e,n.total(),12e3,G,null,u)}p.dbgVerifyCurves(),C.setEditShapeCrackAndCluster(p,n),C.cut(!1,t,y,f,c),null!==G&&G.stitchCurves(p,i,E,!0);let v=p.getGeometry(y);const w=new o,x=new o,I=[];for(let e=0;e<c.length;e++){let s=null;{const r=new m,o=r.addGeometry(v),d=r.addGeometry(p.getGeometry(c[e]));if(r.hasCurves()){const t=r.getEnvelope2D(u);E=l(n.total());const e=h(n.total(),t);a(r,e,n.total(),12e3,G,null,u)}C.setEditShapeCrackAndCluster(r,n);const y=C.intersection(o,d);if(null!==G&&G.stitchCurves(r,i,E,!0),s=r.getGeometry(y),s.isEmpty())continue;const _=p.getGeometryUserIndex(c[e],t);2===_?w.add(s,!1):1===_?x.add(s,!1):I.push(s)}{const t=new m,s=t.addGeometry(v),r=t.addGeometry(p.getGeometry(c[e]));if(t.hasCurves()){const e=t.getEnvelope2D(u);E=l(n.total());const s=h(n.total(),e);a(t,s,n.total(),12e3,G,null,u)}C.setEditShapeCrackAndCluster(t,n);const o=C.difference(s,r);null!==G&&G.stitchCurves(t,i,E,!0);v=t.getGeometry(o)}}if(!v.isEmpty()&&c.length>0&&I.push(v),w.isEmpty()&&x.isEmpty())return;if(!w.isEmpty()){const t=g(w,1);r.push(t)}if(!x.isEmpty()){const t=g(x,2);r.push(t)}for(let e=0,s=I.length;e<s;++e){const t=g(I[e],3);r.push(t)}}}class E{getOperatorType(){return 10005}accelerateGeometry(t,e,s){return!1}canAccelerateGeometry(t){return!1}supportsCurves(){return!0}execute(t,e,s,n,r){return new G(t,e,s,n,r)}}class G extends t{constructor(t,e,s,n,o){super(),this.m_cutIndex=-1,this.m_cuts=[],this.m_progressTracker=o,this.m_cuttee=e.clone(),this.m_cutter=new r({copy:s}),this.m_bConsiderTouch=t;const m=u(e,s);this.m_tolerance=c(n,m,!0)}next(){return-1===this.m_cutIndex&&this.generateCuts(),++this.m_cutIndex<this.m_cuts.length?this.m_cuts[this.m_cutIndex]:null}getGeometryID(){return this.m_cutIndex}tock(){return!0}getRank(){return 1}generateCuts(){switch(this.m_cuttee.getGeometryType()){case e.enumPolyline:this.generatePolylineCuts();break;case e.enumPolygon:this.generatePolygonCuts()}}generatePolylineCuts(){const t=new r,e=new r,n=new r;this.m_cuts.length=0,this.m_cuts.push(t),this.m_cuts.push(e);const o=[];f(this.m_bConsiderTouch,this.m_cuttee,this.m_cutter,this.m_tolerance,o,this.m_progressTracker);for(let r=0;r<o.length;r++){const m=o[r];1===m.m_side?t.add(m.m_geometry,!1):2===m.m_side||4===m.m_side?e.add(m.m_geometry,!1):3===m.m_side?this.m_cuts.push(m.m_geometry):0===m.m_side?n.add(m.m_geometry,!1):s(\"\")}n.isEmpty()||t.isEmpty()&&e.isEmpty()&&!(this.m_cuts.length>=3)||this.m_cuts.push(n),t.isEmpty()&&e.isEmpty()&&this.m_cuts.length<3&&(this.m_cuts.length=0)}generatePolygonCuts(){const t=new o,e=new o,r=new o;this.m_cuts.length=0,this.m_cuts.push(t),this.m_cuts.push(e);const m=[];C(this.m_bConsiderTouch,this.m_cuttee,this.m_cutter,this.m_tolerance,m,this.m_progressTracker);for(let n=0;n<m.length;n++){const o=m[n];1===o.m_side?t.add(o.m_geometry,!1):2===o.m_side?e.add(o.m_geometry,!1):3===o.m_side?this.m_cuts.push(o.m_geometry):0===o.m_side?r.add(o.m_geometry,!1):s(\"\")}n(r.isEmpty()||1===m.length),t.isEmpty()&&e.isEmpty()&&this.m_cuts.length<3&&(this.m_cuts.length=0)}}export{E as O};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{O as r}from\"../../../chunks/OperatorCut.js\";const t=new r;function n(r,n,o){const u=t.execute(!0,r,n,o,null);return Array.from(u)}function o(){return t.supportsCurves()}export{n as execute,o as supportsCurves};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{isSome as r}from\"../core/arrayUtils.js\";import{supportsCurves as e,execute as o}from\"../geometry/operators/gx/operatorCut.js\";import{getSpatialReference as t,fromSpatialReference as s,fromPolyline as p,fromGeometry as a,toGeometry as u}from\"../geometry/operators/support/apiConverter.js\";function m(e,m){const c=t(e);return o(a(e),p(m),s(c)).map((r=>u(r,c))).filter(r)}const c=e(),i=Object.freeze(Object.defineProperty({__proto__:null,execute:m,supportsCurves:c},Symbol.toStringTag,{value:\"Module\"}));export{i as c,m as e,c as s};\n"],"names":["_","y","g","t","f","s","n","r","o","i","u","m","c","d","C","E","l","e","h","a","p","G","v","w","x","I"],"mappings":"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","x_google_ignoreList":[0,1,2]}