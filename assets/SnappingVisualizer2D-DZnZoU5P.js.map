{"version":3,"file":"SnappingVisualizer2D-DZnZoU5P.js","sources":["../../node_modules/@arcgis/core/views/2d/interactive/SnappingVisualizer2D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport e from\"../../../Graphic.js\";import{makeHandle as t}from\"../../../core/handleUtils.js\";import{px2pt as r}from\"../../../core/screenUtils.js\";import{ensureClass as i}from\"../../../core/accessorSupport/ensureType.js\";import{subtract as o,cross as n}from\"../../../core/libs/gl-matrix-2/math/vec2.js\";import{create as a}from\"../../../core/libs/gl-matrix-2/factories/vec2f64.js\";import{create as l}from\"../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import s from\"../../../geometry/Point.js\";import m from\"../../../geometry/Polyline.js\";import c from\"../../../geometry/SpatialReference.js\";import p from\"../../../symbols/CIMSymbol.js\";import y from\"../../../symbols/SimpleLineSymbol.js\";import g from\"../../../symbols/SimpleMarkerSymbol.js\";import{LineJoinStyle as h,LineCapStyle as b}from\"../../../symbols/cim/enums.js\";import{asVec2 as S}from\"../../interactive/sketch/normalizedPoint.js\";import{defaults as f}from\"../../interactive/snapping/Settings.js\";import{SnappingVisualizer as u}from\"../../interactive/snapping/SnappingVisualizer.js\";class d extends u{constructor(e){super(),this._graphicsLayer=e,this._symbolPairingsByType=new Map}visualizeIntersectionPoint(e,t){return this._visualizeSnappingIndicator(new s({x:e.intersectionPoint[0],y:e.intersectionPoint[1],spatialReference:t.spatialReference}),this._getOrCreateSymbol(\"intersectionPoint\",t.view.effectiveTheme.accentColor))}visualizePoint(e,t){return this._visualizeSnappingIndicator(new s({x:e.point[0],y:e.point[1],spatialReference:t.spatialReference}),this._getOrCreateSymbol(\"point\",t.view.effectiveTheme.accentColor))}visualizeLine(e,t){return this._visualizeSnappingIndicator(new m({paths:[[[...e.lineStart],[...e.lineEnd]]],spatialReference:i(c,t.spatialReference)}),this._getOrCreateSymbol(\"line\",t.view.effectiveTheme.accentColor))}visualizeParallelSign(e,t){return this._visualizeSnappingIndicator(new m({paths:[[[...e.lineStart],[...e.lineEnd]]],spatialReference:i(c,t.spatialReference)}),this._getOrCreateSymbol(\"parallelSign\",t.view.effectiveTheme.accentColor))}visualizeRightAngleQuad(e,t){const r=a(),s=a(),p=l();o(r,S(e.centerVertex),S(e.previousVertex)),o(s,S(e.nextVertex),S(e.previousVertex)),n(p,r,s);const y=`rightAngleQuad${p[2]<0?45:225}`;return this._visualizeSnappingIndicator(new m({paths:[[[...e.previousVertex],[...e.centerVertex],[...e.nextVertex]]],spatialReference:i(c,t.spatialReference)}),this._getOrCreateSymbol(y,t.view.effectiveTheme.accentColor))}_visualizeSnappingIndicator(r,i){const o=new e({geometry:r,symbol:i});return this._graphicsLayer.add(o),t((()=>{this._graphicsLayer.remove(o)}))}_getOrCreateSymbol(e,t){const r=this._symbolPairingsByType;return r.get(e)?.color!==t&&r.set(e,{color:t,symbol:M(e,t)}),r.get(e).symbol}}function M(e,t){const i=[...t.toRgb(),255*t.a];switch(e){case\"point\":return new g({outline:{width:.5,color:[0,0,0,1]},size:10,color:t});case\"intersectionPoint\":return new g({outline:new y({width:1.5,color:t}),size:15,color:[0,0,0,0]});case\"line\":return new p({data:{type:\"CIMSymbolReference\",symbol:{type:\"CIMLineSymbol\",symbolLayers:[{type:\"CIMSolidStroke\",enable:!0,capStyle:b.Butt,joinStyle:h.Round,miterLimit:10,width:r(f.lineHintWidthTarget),color:i}]}}});case\"parallelSign\":return new p({data:{type:\"CIMSymbolReference\",symbol:{type:\"CIMLineSymbol\",symbolLayers:[{type:\"CIMVectorMarker\",enable:!0,anchorPoint:{x:0,y:-1,z:0},anchorPointUnits:\"Relative\",size:5,markerPlacement:{type:\"CIMMarkerPlacementOnLine\",placePerPart:!0,angleToLine:!0,relativeTo:\"LineMiddle\"},frame:{xmin:-5,ymin:-1.5,xmax:5,ymax:1.5},markerGraphics:[{type:\"CIMMarkerGraphic\",geometry:{rings:[[[7,0],[-7,0],[-7,1.5],[7,1.5]]]},symbol:{type:\"CIMPolygonSymbol\",symbolLayers:[{type:\"CIMSolidFill\",enable:!0,color:i}]}}],scaleSymbolsProportionally:!0,respectFrame:!0},{type:\"CIMVectorMarker\",enable:!0,anchorPoint:{x:0,y:1,z:0},anchorPointUnits:\"Relative\",size:5,markerPlacement:{type:\"CIMMarkerPlacementOnLine\",placePerPart:!0,angleToLine:!0,relativeTo:\"LineMiddle\"},frame:{xmin:-5,ymin:-1.5,xmax:5,ymax:1.5},markerGraphics:[{type:\"CIMMarkerGraphic\",geometry:{rings:[[[7,0],[-7,0],[-7,-1.5],[7,-1.5]]]},symbol:{type:\"CIMPolygonSymbol\",symbolLayers:[{type:\"CIMSolidFill\",enable:!0,color:i}]}}],scaleSymbolsProportionally:!0,respectFrame:!0}]}}});case\"rightAngleQuad45\":case\"rightAngleQuad225\":{const o=\"rightAngleQuad45\"===e?45:225;return new p({data:{type:\"CIMSymbolReference\",symbol:{type:\"CIMLineSymbol\",symbolLayers:[{type:\"CIMVectorMarker\",enable:!0,anchorPoint:{x:.5,y:.5,z:0},anchorPointUnits:\"Relative\",size:r(f.rightAngleHintSize),rotation:o,markerPlacement:{type:\"CIMMarkerPlacementOnVertices\",placePerPart:!0,angleToLine:!0,placeOnEndPoints:!1},frame:{xmin:-5,ymin:-5,xmax:5,ymax:5},markerGraphics:[{type:\"CIMMarkerGraphic\",geometry:{paths:[[[5,-5],[-5,-5],[-5,5],[5,5],[5,-5]]]},symbol:{type:\"CIMLineSymbol\",symbolLayers:[{type:\"CIMSolidStroke\",enable:!0,capStyle:\"Butt\",joinStyle:\"Round\",miterLimit:10,width:r(f.rightAngleHintOutlineSize),color:i},{type:\"CIMSolidFill\",enable:!0,color:[...t.toRgb(),255*t.a*.4]}]}}],scaleSymbolsProportionally:!0,respectFrame:!0}]}}})}}}export{d as SnappingVisualizer2D};\n"],"names":["d","u","s","m","i","c","e","a","p","l","o","S","n","y","r","t","_a","M","g","b","h","f"],"mappings":"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","x_google_ignoreList":[0]}