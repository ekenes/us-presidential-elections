{"version":3,"file":"Label-Bdj1XuoM.js","sources":["../../node_modules/@amcharts/amcharts5/.internal/core/util/List.js","../../node_modules/@amcharts/amcharts5/.internal/core/util/Children.js","../../node_modules/@amcharts/amcharts5/.internal/core/util/Math.js","../../node_modules/@amcharts/amcharts5/.internal/core/util/Ease.js","../../node_modules/@amcharts/amcharts5/.internal/core/util/States.js","../../node_modules/@amcharts/amcharts5/.internal/core/Registry.js","../../node_modules/@amcharts/amcharts5/.internal/core/util/Entity.js","../../node_modules/@amcharts/amcharts5/.internal/core/render/Sprite.js","../../node_modules/@amcharts/amcharts5/.internal/core/render/patterns/Pattern.js","../../node_modules/@amcharts/amcharts5/.internal/core/render/patterns/PicturePattern.js","../../node_modules/@amcharts/amcharts5/.internal/core/render/backend/Renderer.js","../../node_modules/@amcharts/amcharts5/.internal/core/render/Graphics.js","../../node_modules/@amcharts/amcharts5/.internal/core/render/Rectangle.js","../../node_modules/@amcharts/amcharts5/.internal/core/render/Layout.js","../../node_modules/@amcharts/amcharts5/.internal/core/render/HorizontalLayout.js","../../node_modules/@amcharts/amcharts5/.internal/core/render/VerticalLayout.js","../../node_modules/@amcharts/amcharts5/.internal/core/render/GridLayout.js","../../node_modules/@amcharts/amcharts5/.internal/core/util/TextFormatter.js","../../node_modules/@amcharts/amcharts5/.internal/core/util/PopulateString.js","../../node_modules/@amcharts/amcharts5/.internal/core/render/Container.js","../../node_modules/@amcharts/amcharts5/.internal/core/render/Text.js","../../node_modules/@amcharts/amcharts5/.internal/core/render/Label.js"],"sourcesContent":["import { EventDispatcher } from \"./EventDispatcher\";\r\nimport * as $array from \"./Array\";\r\n/**\r\n * Checks if specific index fits into length.\r\n *\r\n * @param index  Index\r\n * @param len    Length\r\n * @ignore\r\n */\r\nfunction checkBounds(index, len) {\r\n    if (!(index >= 0 && index < len)) {\r\n        throw new Error(\"Index out of bounds: \" + index);\r\n    }\r\n}\r\n/**\r\n * A List class is used to hold a number of indexed items of the same type.\r\n */\r\nexport class List {\r\n    /**\r\n     * Constructor\r\n     *\r\n     * @param initial  Inital list of values to add to list\r\n     */\r\n    constructor(initial = []) {\r\n        /**\r\n         * List values.\r\n         */\r\n        Object.defineProperty(this, \"_values\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"events\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new EventDispatcher()\r\n        });\r\n        this._values = initial;\r\n    }\r\n    /**\r\n     * An array of values in the list.\r\n     *\r\n     * Do not use this property to add values. Rather use dedicated methods, like\r\n     * `push()`, `removeIndex()`, etc.\r\n     *\r\n     * @readonly\r\n     * @return List values\r\n     */\r\n    get values() {\r\n        return this._values;\r\n    }\r\n    /**\r\n     * Checks if list contains specific item reference.\r\n     *\r\n     * @param item  Item to search for\r\n     * @return `true` if found, `false` if not found\r\n     */\r\n    contains(value) {\r\n        return this._values.indexOf(value) !== -1;\r\n    }\r\n    /**\r\n     * Removes specific item from the list.\r\n     *\r\n     * @param item An item to remove\r\n     */\r\n    removeValue(value) {\r\n        let i = 0;\r\n        let length = this._values.length;\r\n        while (i < length) {\r\n            // TODO handle NaN\r\n            if (this._values[i] === value) {\r\n                this.removeIndex(i);\r\n                --length;\r\n            }\r\n            else {\r\n                ++i;\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Searches the list for specific item and returns its index.\r\n     *\r\n     * @param item  An item to search for\r\n     * @return Index or -1 if not found\r\n     */\r\n    indexOf(value) {\r\n        return $array.indexOf(this._values, value);\r\n    }\r\n    /**\r\n     * Number of items in list.\r\n     *\r\n     * @readonly\r\n     * @return Number of items\r\n     */\r\n    get length() {\r\n        return this._values.length;\r\n    }\r\n    /**\r\n     * Checks if there's a value at specific index.\r\n     *\r\n     * @param index  Index\r\n     * @return Value exists?\r\n     */\r\n    hasIndex(index) {\r\n        return index >= 0 && index < this._values.length;\r\n    }\r\n    /**\r\n     * Returns an item at specified index.\r\n     *\r\n     * @param index  Index\r\n     * @return List item\r\n     */\r\n    getIndex(index) {\r\n        return this._values[index];\r\n    }\r\n    _onPush(newValue) {\r\n        if (this.events.isEnabled(\"push\")) {\r\n            this.events.dispatch(\"push\", {\r\n                type: \"push\",\r\n                target: this,\r\n                newValue\r\n            });\r\n        }\r\n    }\r\n    _onInsertIndex(index, newValue) {\r\n        if (this.events.isEnabled(\"insertIndex\")) {\r\n            this.events.dispatch(\"insertIndex\", {\r\n                type: \"insertIndex\",\r\n                target: this,\r\n                index,\r\n                newValue\r\n            });\r\n        }\r\n    }\r\n    _onSetIndex(index, oldValue, newValue) {\r\n        if (this.events.isEnabled(\"setIndex\")) {\r\n            this.events.dispatch(\"setIndex\", {\r\n                type: \"setIndex\",\r\n                target: this,\r\n                index,\r\n                oldValue,\r\n                newValue\r\n            });\r\n        }\r\n    }\r\n    _onSwap(a, b) {\r\n        if (this.events.isEnabled(\"swap\")) {\r\n            this.events.dispatch(\"swap\", {\r\n                type: \"swap\",\r\n                target: this,\r\n                a,\r\n                b\r\n            });\r\n        }\r\n    }\r\n    _onRemoveIndex(index, oldValue) {\r\n        if (this.events.isEnabled(\"removeIndex\")) {\r\n            this.events.dispatch(\"removeIndex\", {\r\n                type: \"removeIndex\",\r\n                target: this,\r\n                index,\r\n                oldValue\r\n            });\r\n        }\r\n    }\r\n    _onMoveIndex(oldIndex, newIndex, value) {\r\n        if (this.events.isEnabled(\"moveIndex\")) {\r\n            this.events.dispatch(\"moveIndex\", {\r\n                type: \"moveIndex\",\r\n                target: this,\r\n                oldIndex,\r\n                newIndex,\r\n                value,\r\n            });\r\n        }\r\n    }\r\n    _onClear(oldValues) {\r\n        if (this.events.isEnabled(\"clear\")) {\r\n            this.events.dispatch(\"clear\", {\r\n                type: \"clear\",\r\n                target: this,\r\n                oldValues\r\n            });\r\n        }\r\n    }\r\n    /**\r\n     * Sets value at specific index.\r\n     *\r\n     * If there's already a value at the index, it is overwritten.\r\n     *\r\n     * @param index  Index\r\n     * @param value  New value\r\n     * @return New value\r\n     */\r\n    setIndex(index, value) {\r\n        checkBounds(index, this._values.length);\r\n        const oldValue = this._values[index];\r\n        // Do nothing if the old value and the new value are the same\r\n        if (oldValue !== value) {\r\n            this._values[index] = value;\r\n            this._onSetIndex(index, oldValue, value);\r\n        }\r\n        return oldValue;\r\n    }\r\n    /**\r\n     * Adds an item to the list at a specific index, which pushes all the other\r\n     * items further down the list.\r\n     *\r\n     * @param index Index\r\n     * @param item  An item to add\r\n     */\r\n    insertIndex(index, value) {\r\n        checkBounds(index, this._values.length + 1);\r\n        $array.insertIndex(this._values, index, value);\r\n        this._onInsertIndex(index, value);\r\n        return value;\r\n    }\r\n    /**\r\n     * Swaps indexes of two items in the list.\r\n     *\r\n     * @param a  Item 1\r\n     * @param b  Item 2\r\n     */\r\n    swap(a, b) {\r\n        const len = this._values.length;\r\n        checkBounds(a, len);\r\n        checkBounds(b, len);\r\n        if (a !== b) {\r\n            const value_a = this._values[a];\r\n            const value_b = this._values[b];\r\n            this._values[a] = value_b;\r\n            this._values[b] = value_a;\r\n            this._onSwap(value_a, value_b);\r\n        }\r\n    }\r\n    /**\r\n     * Removes a value at specific index.\r\n     *\r\n     * @param index  Index of value to remove\r\n     * @return Removed value\r\n     */\r\n    removeIndex(index) {\r\n        checkBounds(index, this._values.length);\r\n        const oldValue = this._values[index];\r\n        $array.removeIndex(this._values, index);\r\n        this._onRemoveIndex(index, oldValue);\r\n        return oldValue;\r\n    }\r\n    /**\r\n     * Moves an item to a specific index within the list.\r\n     *\r\n     * If the index is not specified it will move the item to the end of the\r\n     * list.\r\n     *\r\n     * @param value  Item to move\r\n     * @param index  Index to place item at\r\n     */\r\n    moveValue(value, toIndex) {\r\n        // TODO don't do anything if the desired index is the same as the current index\r\n        let index = this.indexOf(value);\r\n        // TODO remove all old values rather than only the first ?\r\n        if (index !== -1) {\r\n            $array.removeIndex(this._values, index);\r\n            if (toIndex == null) {\r\n                const toIndex = this._values.length;\r\n                this._values.push(value);\r\n                this._onMoveIndex(index, toIndex, value);\r\n            }\r\n            else {\r\n                $array.insertIndex(this._values, toIndex, value);\r\n                this._onMoveIndex(index, toIndex, value);\r\n            }\r\n        }\r\n        else if (toIndex == null) {\r\n            this._values.push(value);\r\n            this._onPush(value);\r\n        }\r\n        else {\r\n            $array.insertIndex(this._values, toIndex, value);\r\n            this._onInsertIndex(toIndex, value);\r\n        }\r\n        return value;\r\n    }\r\n    /**\r\n     * Adds an item to the end of the list.\r\n     *\r\n     * @param item  An item to add\r\n     */\r\n    push(value) {\r\n        this._values.push(value);\r\n        this._onPush(value);\r\n        return value;\r\n    }\r\n    /**\r\n     * Adds an item as a first item in the list.\r\n     *\r\n     * @param item  An item to add\r\n     */\r\n    unshift(value) {\r\n        this.insertIndex(0, value);\r\n        return value;\r\n    }\r\n    /**\r\n     * Adds multiple items to the list.\r\n     *\r\n     * @param items  An Array of items to add\r\n     */\r\n    pushAll(values) {\r\n        $array.each(values, (value) => {\r\n            this.push(value);\r\n        });\r\n    }\r\n    /**\r\n     * Copies and adds items from abother list.\r\n     *\r\n     * @param source  A list top copy items from\r\n     */\r\n    copyFrom(source) {\r\n        this.pushAll(source._values);\r\n    }\r\n    /**\r\n     * Returns the last item from the list, and removes it.\r\n     *\r\n     * @return Item\r\n     */\r\n    pop() {\r\n        let index = this._values.length - 1;\r\n        return index < 0 ? undefined : this.removeIndex(this._values.length - 1);\r\n    }\r\n    /**\r\n     * Returns the first item from the list, and removes it.\r\n     *\r\n     * @return Item\r\n     */\r\n    shift() {\r\n        return this._values.length ? this.removeIndex(0) : undefined;\r\n    }\r\n    /**\r\n     * Sets multiple items to the list.\r\n     *\r\n     * All current items are removed.\r\n     *\r\n     * @param newArray  New items\r\n     */\r\n    setAll(newArray) {\r\n        const old = this._values;\r\n        this._values = [];\r\n        this._onClear(old);\r\n        $array.each(newArray, (value) => {\r\n            this._values.push(value);\r\n            this._onPush(value);\r\n        });\r\n    }\r\n    /**\r\n     * Removes all items from the list.\r\n     */\r\n    clear() {\r\n        this.setAll([]);\r\n    }\r\n    /**\r\n     * Returns an ES6 iterator for the list.\r\n     */\r\n    *[Symbol.iterator]() {\r\n        const length = this._values.length;\r\n        for (let i = 0; i < length; ++i) {\r\n            yield this._values[i];\r\n        }\r\n    }\r\n    /**\r\n     * Calls `f` for each element in the list.\r\n     *\r\n     * `f` should have at least one parameter defined which will get a current\r\n     * item, with optional second argument - index.\r\n     */\r\n    each(f) {\r\n        $array.each(this._values, f);\r\n    }\r\n    /**\r\n     * Calls `f` for each element in the list, from right to left.\r\n     *\r\n     * `f` should have at least one parameter defined which will get a current\r\n     * item, with optional second argument - index.\r\n     */\r\n    eachReverse(f) {\r\n        $array.eachReverse(this._values, f);\r\n    }\r\n}\r\n/**\r\n * A version of a [[List]] where the elements are disposed automatically when\r\n * removed from the list, unless `autoDispose` is set to `false`.\r\n */\r\nexport class ListAutoDispose extends List {\r\n    constructor() {\r\n        super(...arguments);\r\n        /**\r\n         * Automatically disposes elements that are removed from the list.\r\n         *\r\n         * @default true\r\n         */\r\n        Object.defineProperty(this, \"autoDispose\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: true\r\n        });\r\n        Object.defineProperty(this, \"_disposed\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n    }\r\n    /**\r\n     * Swaps indexes of two items in the list.\r\n     *\r\n     * @param a  Item 1\r\n     * @param b  Item 2\r\n     */\r\n    swap(a, b) {\r\n        const currentAutoDispose = this.autoDispose;\r\n        this.autoDispose = false;\r\n        super.swap(a, b);\r\n        this.autoDispose = currentAutoDispose;\r\n    }\r\n    _onSetIndex(index, oldValue, newValue) {\r\n        if (this.autoDispose) {\r\n            oldValue.dispose();\r\n        }\r\n        super._onSetIndex(index, oldValue, newValue);\r\n    }\r\n    _onRemoveIndex(index, oldValue) {\r\n        if (this.autoDispose) {\r\n            oldValue.dispose();\r\n        }\r\n        super._onRemoveIndex(index, oldValue);\r\n    }\r\n    _onClear(oldValues) {\r\n        if (this.autoDispose) {\r\n            $array.each(oldValues, (x) => {\r\n                x.dispose();\r\n            });\r\n        }\r\n        super._onClear(oldValues);\r\n    }\r\n    _dispose() {\r\n        if (this.autoDispose) {\r\n            $array.each(this._values, (x) => {\r\n                x.dispose();\r\n            });\r\n        }\r\n    }\r\n    isDisposed() {\r\n        return this._disposed;\r\n    }\r\n    dispose() {\r\n        if (!this._disposed) {\r\n            this._disposed = true;\r\n            this._dispose();\r\n        }\r\n    }\r\n}\r\n/**\r\n * A version of a [[List]] that is able to create new elements as well as\r\n * apply additional settings to newly created items.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/settings/list-templates/} for more info\r\n */\r\nexport class ListTemplate extends ListAutoDispose {\r\n    constructor(template, make) {\r\n        super();\r\n        Object.defineProperty(this, \"template\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"make\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        this.template = template;\r\n        this.make = make;\r\n    }\r\n    _dispose() {\r\n        super._dispose();\r\n        if (this.autoDispose) {\r\n            this.template.dispose();\r\n        }\r\n    }\r\n}\r\n//# sourceMappingURL=List.js.map","import { List } from \"./List\";\r\nimport * as $array from \"./Array\";\r\n/**\r\n * A version of [[List]] to hold children of the [[Container]].\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/containers/} for more info\r\n */\r\nexport class Children extends List {\r\n    constructor(container) {\r\n        super();\r\n        Object.defineProperty(this, \"_disposed\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_container\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_events\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        this._container = container;\r\n        this._events = this.events.onAll((change) => {\r\n            if (change.type === \"clear\") {\r\n                $array.each(change.oldValues, (x) => {\r\n                    this._onRemoved(x);\r\n                });\r\n            }\r\n            else if (change.type === \"push\") {\r\n                this._onInserted(change.newValue);\r\n            }\r\n            else if (change.type === \"setIndex\") {\r\n                this._onRemoved(change.oldValue);\r\n                this._onInserted(change.newValue, change.index);\r\n            }\r\n            else if (change.type === \"insertIndex\") {\r\n                this._onInserted(change.newValue, change.index);\r\n            }\r\n            else if (change.type === \"removeIndex\") {\r\n                this._onRemoved(change.oldValue);\r\n            }\r\n            else if (change.type === \"moveIndex\") {\r\n                this._onRemoved(change.value);\r\n                this._onInserted(change.value, change.newIndex);\r\n            }\r\n            else {\r\n                throw new Error(\"Unknown IListEvent type\");\r\n            }\r\n        });\r\n    }\r\n    _onInserted(child, index) {\r\n        child._setParent(this._container, true);\r\n        const childrenDisplay = this._container._childrenDisplay;\r\n        if (index === undefined) {\r\n            childrenDisplay.addChild(child._display);\r\n        }\r\n        else {\r\n            childrenDisplay.addChildAt(child._display, index);\r\n        }\r\n    }\r\n    _onRemoved(child) {\r\n        this._container._childrenDisplay.removeChild(child._display);\r\n        this._container.markDirtyBounds();\r\n        this._container.markDirty();\r\n    }\r\n    /**\r\n     * Returns `true` if obejct is disposed.\r\n     */\r\n    isDisposed() {\r\n        return this._disposed;\r\n    }\r\n    /**\r\n     * Permanently dispose this object.\r\n     */\r\n    dispose() {\r\n        if (!this._disposed) {\r\n            this._disposed = true;\r\n            this._events.dispose();\r\n            $array.each(this.values, (child) => {\r\n                child.dispose();\r\n            });\r\n        }\r\n    }\r\n}\r\n//# sourceMappingURL=Children.js.map","import { isNumber } from \"./Type\";\r\n/**\r\n * ============================================================================\r\n * CONSTANTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nexport const PI = Math.PI;\r\nexport const HALFPI = PI / 2;\r\nexport const RADIANS = PI / 180;\r\nexport const DEGREES = 180 / PI;\r\n/**\r\n * Rounds the numeric value to whole number or specific precision of set.\r\n *\r\n * @param value      Value\r\n * @param precision  Precision (number of decimal points)\r\n * @param floor  In case value ends with 0.5 and precision is 0, we might need to floor the value instead of ceiling it.\r\n * @return Rounded value\r\n */\r\nexport function round(value, precision, floor) {\r\n    if (!isNumber(precision) || precision <= 0) {\r\n        let rounded = Math.round(value);\r\n        if (floor) {\r\n            if (rounded - value == 0.5) {\r\n                rounded--;\r\n            }\r\n        }\r\n        return rounded;\r\n    }\r\n    else {\r\n        let d = Math.pow(10, precision);\r\n        return Math.round(value * d) / d;\r\n    }\r\n}\r\n/**\r\n * Ceils the numeric value to whole number or specific precision of set.\r\n *\r\n * @param value      Value\r\n * @param precision  Precision (number of decimal points)\r\n * @return Rounded value\r\n */\r\nexport function ceil(value, precision) {\r\n    if (!isNumber(precision) || precision <= 0) {\r\n        return Math.ceil(value);\r\n    }\r\n    else {\r\n        let d = Math.pow(10, precision);\r\n        return Math.ceil(value * d) / d;\r\n    }\r\n}\r\n/**\r\n * [getCubicControlPointA description]\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n * @param p0        [description]\r\n * @param p1        [description]\r\n * @param p2        [description]\r\n * @param p3        [description]\r\n * @param tensionX  [description]\r\n * @param tensionY  [description]\r\n * @return [description]\r\n */\r\nexport function getCubicControlPointA(p0, p1, p2, tensionX, tensionY) {\r\n    return { x: ((-p0.x + p1.x / tensionX + p2.x) * tensionX), y: ((-p0.y + p1.y / tensionY + p2.y) * tensionY) };\r\n}\r\n/**\r\n * [getCubicControlPointB description]\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n * @param p0        [description]\r\n * @param p1        [description]\r\n * @param p2        [description]\r\n * @param p3        [description]\r\n * @param tensionX  [description]\r\n * @param tensionY  [description]\r\n * @return [description]\r\n */\r\nexport function getCubicControlPointB(p1, p2, p3, tensionX, tensionY) {\r\n    return { x: ((p1.x + p2.x / tensionX - p3.x) * tensionX), y: ((p1.y + p2.y / tensionY - p3.y) * tensionY) };\r\n}\r\nexport function fitToRange(value, min, max) {\r\n    return Math.min(Math.max(value, min), max);\r\n}\r\n/**\r\n * Returns sine of an angle specified in degrees.\r\n *\r\n * @param value  Value\r\n * @return Sine\r\n */\r\nexport function sin(angle) {\r\n    return Math.sin(RADIANS * angle);\r\n}\r\n/**\r\n * Returns tan of an angle specified in degrees.\r\n *\r\n * @param value  Value\r\n * @return Sine\r\n */\r\nexport function tan(angle) {\r\n    return Math.tan(RADIANS * angle);\r\n}\r\n/**\r\n * Returns cosine of an angle specified in degrees.\r\n *\r\n * @param value  Value\r\n * @return Cosine\r\n */\r\nexport function cos(angle) {\r\n    return Math.cos(RADIANS * angle);\r\n}\r\n// 0 to 360\r\nexport function normalizeAngle(value) {\r\n    value = value % 360;\r\n    if (value < 0) {\r\n        value += 360;\r\n    }\r\n    return value;\r\n}\r\n// TODO this doesn't work properly for skewing, and it's probably broken for rotation too\r\nexport function getArcBounds(cx, cy, startAngle, endAngle, radius) {\r\n    let minX = Number.MAX_VALUE;\r\n    let minY = Number.MAX_VALUE;\r\n    let maxX = -Number.MAX_VALUE;\r\n    let maxY = -Number.MAX_VALUE;\r\n    let bpoints = [];\r\n    bpoints.push(getArcPoint(radius, startAngle));\r\n    bpoints.push(getArcPoint(radius, endAngle));\r\n    let fromAngle = Math.min(Math.floor(startAngle / 90) * 90, Math.floor(endAngle / 90) * 90);\r\n    let toAngle = Math.max(Math.ceil(startAngle / 90) * 90, Math.ceil(endAngle / 90) * 90);\r\n    for (let angle = fromAngle; angle <= toAngle; angle += 90) {\r\n        if (angle >= startAngle && angle <= endAngle) {\r\n            bpoints.push(getArcPoint(radius, angle));\r\n        }\r\n    }\r\n    for (let i = 0; i < bpoints.length; i++) {\r\n        let pt = bpoints[i];\r\n        if (pt.x < minX) {\r\n            minX = pt.x;\r\n        }\r\n        if (pt.y < minY) {\r\n            minY = pt.y;\r\n        }\r\n        if (pt.x > maxX) {\r\n            maxX = pt.x;\r\n        }\r\n        if (pt.y > maxY) {\r\n            maxY = pt.y;\r\n        }\r\n    }\r\n    return ({ left: cx + minX, top: cy + minY, right: cx + maxX, bottom: cy + maxY });\r\n}\r\n/**\r\n * Returns point on arc\r\n *\r\n * @param center point\r\n * @param radius\r\n * @param arc\r\n * @return {boolean}\r\n */\r\nexport function getArcPoint(radius, arc) {\r\n    return ({ x: radius * cos(arc), y: radius * sin(arc) });\r\n}\r\nexport function mergeBounds(bounds) {\r\n    const len = bounds.length;\r\n    if (len > 0) {\r\n        let bound = bounds[0];\r\n        let left = bound.left;\r\n        let top = bound.top;\r\n        let right = bound.right;\r\n        let bottom = bound.bottom;\r\n        if (len > 1) {\r\n            for (let i = 1; i < len; i++) {\r\n                bound = bounds[i];\r\n                left = Math.min(bound.left, left);\r\n                right = Math.max(bound.right, right);\r\n                top = Math.min(bound.top, top);\r\n                bottom = Math.max(bound.bottom, bottom);\r\n            }\r\n        }\r\n        return { left, right, top, bottom };\r\n    }\r\n    return { left: 0, right: 0, top: 0, bottom: 0 };\r\n}\r\nexport function fitAngleToRange(value, startAngle, endAngle) {\r\n    if (startAngle > endAngle) {\r\n        let temp = startAngle;\r\n        startAngle = endAngle;\r\n        endAngle = temp;\r\n    }\r\n    value = normalizeAngle(value);\r\n    let count = (startAngle - normalizeAngle(startAngle)) / 360;\r\n    if (value < startAngle) {\r\n        value += 360 * (count + 1);\r\n    }\r\n    let maxEnd = startAngle + (endAngle - startAngle) / 2 + 180;\r\n    let maxStart = startAngle + (endAngle - startAngle) / 2 - 180;\r\n    if (value > endAngle) {\r\n        if (value - 360 > startAngle) {\r\n            value -= 360;\r\n        }\r\n        else {\r\n            if (value < maxEnd) {\r\n                value = endAngle;\r\n            }\r\n            else {\r\n                value = startAngle;\r\n            }\r\n        }\r\n    }\r\n    if (value < startAngle) {\r\n        if (value > maxStart) {\r\n            value = startAngle;\r\n        }\r\n        else {\r\n            value = endAngle;\r\n        }\r\n    }\r\n    return value;\r\n}\r\nexport function inBounds(point, bounds) {\r\n    if (point.x >= bounds.left && point.y >= bounds.top && point.x <= bounds.right && point.y <= bounds.bottom) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nexport function getAngle(point1, point2) {\r\n    if (!point2) {\r\n        point2 = { x: point1.x * 2, y: point1.y * 2 };\r\n    }\r\n    let diffX = point2.x - point1.x;\r\n    let diffY = point2.y - point1.y;\r\n    let angle = Math.atan2(diffY, diffX) * DEGREES;\r\n    if (angle < 0) {\r\n        angle += 360;\r\n    }\r\n    return normalizeAngle(angle);\r\n}\r\n/**\r\n * [getPointOnQuadraticCurve description]\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n * @param pointA        [description]\r\n * @param pointB        [description]\r\n * @param controlPoint  [description]\r\n * @param position      [description]\r\n * @return [description]\r\n */\r\nexport function getPointOnQuadraticCurve(pointA, pointB, controlPoint, position) {\r\n    let x = (1 - position) * (1 - position) * pointA.x + 2 * (1 - position) * position * controlPoint.x + position * position * pointB.x;\r\n    let y = (1 - position) * (1 - position) * pointA.y + 2 * (1 - position) * position * controlPoint.y + position * position * pointB.y;\r\n    return { x: x, y: y };\r\n}\r\nexport function getPointOnLine(pointA, pointB, position) {\r\n    return { x: pointA.x + (pointB.x - pointA.x) * position, y: pointA.y + (pointB.y - pointA.y) * position };\r\n}\r\n/**\r\n * Returns the closest value from the array of values to the reference value.\r\n *\r\n * @param values  Array of values\r\n * @param value   Reference value\r\n * @return Closes value from the array\r\n */\r\nexport function closest(values, referenceValue) {\r\n    return values.reduce(function (prev, curr) {\r\n        return (Math.abs(curr - referenceValue) < Math.abs(prev - referenceValue) ? curr : prev);\r\n    });\r\n}\r\n/**\r\n * Returns true if bounds overlap\r\n * @param bounds1 IBounds\r\n * @param bounds2 IBounds\r\n * @returns boolean\r\n */\r\nexport function boundsOverlap(bounds1, bounds2) {\r\n    const horizontalOverlap = bounds1.left < bounds2.right && bounds1.right > bounds2.left;\r\n    const verticalOverlap = bounds1.top < bounds2.bottom && bounds1.bottom > bounds2.top;\r\n    return horizontalOverlap && verticalOverlap;\r\n}\r\n/**\r\n * Generates points of a spiral\r\n * @param cx\r\n * @param cy\r\n * @param radius\r\n * @param radiusY\r\n * @param innerRadius\r\n * @param step\r\n * @param radiusStep\r\n * @param startAngle\r\n * @param endAngle\r\n * @returns IPoint[]\r\n */\r\nexport function spiralPoints(cx, cy, radius, radiusY, innerRadius, step, radiusStep, startAngle, endAngle) {\r\n    let r = innerRadius + 0.01;\r\n    startAngle = normalizeAngle(startAngle);\r\n    endAngle = normalizeAngle(endAngle);\r\n    let angle = startAngle * RADIANS;\r\n    if (endAngle < startAngle) {\r\n        endAngle += 360;\r\n    }\r\n    let points = [];\r\n    while (r < radius + radiusStep) {\r\n        let stepSize = step;\r\n        if (stepSize / 2 > r) {\r\n            stepSize = 2 * r;\r\n        }\r\n        let c = Math.max(0.01, Math.min(1, r / 200));\r\n        stepSize = stepSize * c;\r\n        let degrees = angle * DEGREES;\r\n        let point = { x: cx + r * Math.cos(angle), y: cy + r * radiusY / radius * Math.sin(angle) };\r\n        points.push(point);\r\n        r = innerRadius + 0.01 + (degrees - startAngle) / 360 * radiusStep;\r\n        angle += 2 * Math.asin(stepSize / 2 / r);\r\n        if (angle * DEGREES > endAngle + 360 * Math.ceil((radius - innerRadius) / radiusStep)) {\r\n            break;\r\n        }\r\n    }\r\n    points.shift();\r\n    return points;\r\n}\r\n/**\r\n * Returns true if circles overlap\r\n * @param circle1\r\n * @param circle2\r\n * @returns boolean\r\n */\r\nexport function circlesOverlap(circle1, circle2) {\r\n    return Math.hypot(circle1.x - circle2.x, circle1.y - circle2.y) <= circle1.radius + circle2.radius;\r\n}\r\n//# sourceMappingURL=Math.js.map","/**\r\n * A collection of easing functions\r\n *\r\n * Parts of this collection are taken from D3.js library (https://d3js.org/)\r\n */\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport * as $math from \"./Math\";\r\n/**\r\n * The functions below are from D3.js library (https://d3js.org/)\r\n *\r\n * ----------------------------------------------------------------------------\r\n * Copyright 2017 Mike Bostock\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *\tthis list of conditions and the following disclaimer.\r\n *\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *\tthis list of conditions and the following disclaimer in the documentation\r\n *\tand/or other materials provided with the distribution.\r\n *\r\n * 3. Neither the name of the copyright holder nor the names of its\r\n *\tcontributors may be used to endorse or promote products derived from this\r\n *\tsoftware without specific prior written permission.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n * ----------------------------------------------------------------------------\r\n * @hidden\r\n */\r\n/**\r\n */\r\nexport function linear(t) {\r\n    return t;\r\n}\r\nexport function quad(t) {\r\n    return t * t;\r\n}\r\nexport function cubic(t) {\r\n    return t * t * t;\r\n}\r\nexport function pow(t, e) {\r\n    return Math.pow(t, e);\r\n}\r\nexport function exp(t) {\r\n    return Math.pow(2, 10 * t - 10);\r\n}\r\nexport function sine(t) {\r\n    return 1 - Math.cos(t * $math.HALFPI);\r\n}\r\nexport function circle(t) {\r\n    return 1 - Math.sqrt(1 - t * t);\r\n}\r\n/**\r\n * ============================================================================\r\n * TRANSFORMERS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n */\r\nexport function yoyo(ease) {\r\n    return function (t) {\r\n        if (t < 0.5) {\r\n            return ease(t * 2.0);\r\n        }\r\n        else {\r\n            return ease((1.0 - t) * 2.0);\r\n        }\r\n    };\r\n}\r\nexport function out(ease) {\r\n    return function (t) {\r\n        return 1.0 - ease(1.0 - t);\r\n    };\r\n}\r\nexport function inOut(ease) {\r\n    return function (t) {\r\n        if (t <= 0.5) {\r\n            return ease(t * 2.0) / 2.0;\r\n        }\r\n        else {\r\n            return 1.0 - (ease((1.0 - t) * 2.0) / 2.0);\r\n        }\r\n    };\r\n}\r\n/**\r\n * ============================================================================\r\n * BOUNCE\r\n * ============================================================================\r\n * @hidden\r\n */\r\nlet b1 = 4 / 11, b2 = 6 / 11, b3 = 8 / 11, b4 = 3 / 4, b5 = 9 / 11, b6 = 10 / 11, b7 = 15 / 16, b8 = 21 / 22, b9 = 63 / 64, b0 = 1 / b1 / b1;\r\nexport function bounce(t) {\r\n    return 1 - bounceOut(1 - t);\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction bounceOut(t) {\r\n    t = t;\r\n    if (t < b1) {\r\n        return b0 * t * t;\r\n    }\r\n    else if (t < b3) {\r\n        return b0 * (t -= b2) * t + b4;\r\n    }\r\n    else if (t < b6) {\r\n        return b0 * (t -= b5) * t + b7;\r\n    }\r\n    else {\r\n        return b0 * (t -= b8) * t + b9;\r\n    }\r\n}\r\n/**\r\n * ============================================================================\r\n * ELASTIC\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * @ignore\r\n */\r\nlet tau = 2 * Math.PI;\r\n/**\r\n * @ignore\r\n */\r\nlet amplitude = 1;\r\n/**\r\n * @ignore\r\n */\r\nlet period = 0.3 / tau;\r\n/**\r\n * @ignore\r\n */\r\nlet s = Math.asin(1 / amplitude) * period;\r\nexport function elastic(t) {\r\n    let v = t;\r\n    return amplitude * Math.pow(2, 10 * --v) * Math.sin((s - v) / period);\r\n}\r\n//# sourceMappingURL=Ease.js.map","import * as $object from \"./Object\";\r\nimport * as $ease from \"./Ease\";\r\n/**\r\n * An object representing a collection of setting values to apply as required.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/settings/states/} for more info\r\n */\r\nexport class State {\r\n    constructor(entity, settings) {\r\n        Object.defineProperty(this, \"_entity\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_settings\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_userSettings\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        this._entity = entity;\r\n        this._settings = settings;\r\n        $object.each(settings, (key) => {\r\n            this._userSettings[key] = true;\r\n        });\r\n    }\r\n    get(key, fallback) {\r\n        const value = this._settings[key];\r\n        if (value !== undefined) {\r\n            return value;\r\n        }\r\n        else {\r\n            return fallback;\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    setRaw(key, value) {\r\n        this._settings[key] = value;\r\n    }\r\n    /**\r\n     * Sets a setting `value` for the specified `key` to be set when the state\r\n     * is applied.\r\n     *\r\n     * @param   key       Setting key\r\n     * @param   value     Setting value\r\n     * @return            Setting value\r\n     */\r\n    set(key, value) {\r\n        this._userSettings[key] = true;\r\n        this.setRaw(key, value);\r\n    }\r\n    /**\r\n     * Removes a setting value for the specified `key`.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/settings/} for more info\r\n     * @param   key       Setting key\r\n     */\r\n    remove(key) {\r\n        delete this._userSettings[key];\r\n        delete this._settings[key];\r\n    }\r\n    /**\r\n     * Sets multiple settings at once.\r\n     *\r\n     * `settings` must be an object with key: value pairs.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/settings/} for more info\r\n     * @param settings Settings\r\n     */\r\n    setAll(settings) {\r\n        $object.keys(settings).forEach((key) => {\r\n            this.set(key, settings[key]);\r\n        });\r\n    }\r\n    _eachSetting(f) {\r\n        $object.each(this._settings, f);\r\n    }\r\n    /**\r\n     * Applies the state to the target element.\r\n     *\r\n     * All setting values are set immediately.\r\n     */\r\n    apply() {\r\n        const seen = {};\r\n        seen[\"stateAnimationEasing\"] = true;\r\n        seen[\"stateAnimationDuration\"] = true;\r\n        const defaultState = this._entity.states.lookup(\"default\");\r\n        this._eachSetting((key, value) => {\r\n            if (!seen[key]) {\r\n                seen[key] = true;\r\n                // save values to default state\r\n                if (this !== defaultState) {\r\n                    if (!(key in defaultState._settings)) {\r\n                        defaultState._settings[key] = this._entity.get(key);\r\n                    }\r\n                }\r\n                this._entity.set(key, value);\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Applies the state to the target element.\r\n     *\r\n     * Returns an object representing all [[Animation]] objects created for\r\n     * each setting key transition.\r\n     *\r\n     * @return           Animations\r\n     */\r\n    applyAnimate(duration) {\r\n        if (duration == null) {\r\n            duration = this._settings.stateAnimationDuration;\r\n        }\r\n        if (duration == null) {\r\n            duration = this.get(\"stateAnimationDuration\", this._entity.get(\"stateAnimationDuration\", 0));\r\n        }\r\n        let easing = this._settings.stateAnimationEasing;\r\n        if (easing == null) {\r\n            easing = this.get(\"stateAnimationEasing\", this._entity.get(\"stateAnimationEasing\", $ease.cubic));\r\n        }\r\n        const defaultState = this._entity.states.lookup(\"default\");\r\n        const seen = {};\r\n        seen[\"stateAnimationEasing\"] = true;\r\n        seen[\"stateAnimationDuration\"] = true;\r\n        const animations = {};\r\n        this._eachSetting((key, value) => {\r\n            if (!seen[key]) {\r\n                seen[key] = true;\r\n                // save values to default state\r\n                if (this != defaultState) {\r\n                    if (!(key in defaultState._settings)) {\r\n                        defaultState._settings[key] = this._entity.get(key);\r\n                    }\r\n                }\r\n                const animation = this._entity.animate({\r\n                    key: key,\r\n                    to: value,\r\n                    duration: duration,\r\n                    easing: easing\r\n                });\r\n                if (animation) {\r\n                    animations[key] = animation;\r\n                }\r\n            }\r\n        });\r\n        return animations;\r\n    }\r\n}\r\n/**\r\n * Collection of [[State]] objects for an element.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/settings/states/} for more info\r\n */\r\nexport class States {\r\n    constructor(entity) {\r\n        Object.defineProperty(this, \"_states\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_entity\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        this._entity = entity;\r\n    }\r\n    /**\r\n     * Checks if a state by `name` exists. Returns it there is one.\r\n     *\r\n     * @param  name  State name\r\n     * @return       State\r\n     */\r\n    lookup(name) {\r\n        return this._states[name];\r\n    }\r\n    /**\r\n     * Sets supplied `settings` on a state by the `name`.\r\n     *\r\n     * If such state does not yet exists, it is created.\r\n     *\r\n     * @param   name      State name\r\n     * @param   settings  Settings\r\n     * @return            New State\r\n     */\r\n    create(name, settings) {\r\n        const state = this._states[name];\r\n        if (state) {\r\n            state.setAll(settings);\r\n            return state;\r\n        }\r\n        else {\r\n            const state = new State(this._entity, settings);\r\n            this._states[name] = state;\r\n            return state;\r\n        }\r\n    }\r\n    /**\r\n     * Removes the state called `name`.\r\n     *\r\n     * @param   name      State name\r\n     */\r\n    remove(name) {\r\n        delete this._states[name];\r\n    }\r\n    /**\r\n     * Applies a named state to the target element.\r\n     *\r\n     * @param  newState  State name\r\n     */\r\n    apply(newState) {\r\n        const state = this._states[newState];\r\n        if (state) {\r\n            state.apply();\r\n        }\r\n        this._entity._applyState(newState);\r\n    }\r\n    /**\r\n     * Applies a named state to the element.\r\n     *\r\n     * Returns an object representing all [[Animation]] objects created for\r\n     * each setting key transition.\r\n     *\r\n     * @param   newState  State name\r\n     * @return            Animations\r\n     */\r\n    applyAnimate(newState, duration) {\r\n        let animations;\r\n        const state = this._states[newState];\r\n        if (state) {\r\n            animations = state.applyAnimate(duration);\r\n        }\r\n        this._entity._applyStateAnimated(newState, duration);\r\n        return animations;\r\n    }\r\n}\r\n//# sourceMappingURL=States.js.map","/**\r\n * @ignore\r\n */\r\nexport class Registry {\r\n    constructor() {\r\n        /**\r\n         * Currently running version of amCharts.\r\n         */\r\n        Object.defineProperty(this, \"version\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: \"5.14.3\"\r\n        });\r\n        /**\r\n         * List of applied licenses.\r\n         * @ignore\r\n         */\r\n        Object.defineProperty(this, \"licenses\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        /**\r\n         * Entities that have their `id` setting set.\r\n         */\r\n        Object.defineProperty(this, \"entitiesById\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        /**\r\n         * All created [[Root]] elements.\r\n         */\r\n        Object.defineProperty(this, \"rootElements\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n    }\r\n}\r\n/**\r\n    * @ignore\r\n */\r\nexport const registry = new Registry();\r\n/**\r\n * Adds a license, e.g.:\r\n *\r\n * ```TypeScript\r\n * am5.addLicense(\"xxxxxxxx\");\r\n * ```\r\n * ```JavaScript\r\n * am5.addLicense(\"xxxxxxxx\");\r\n * ```\r\n *\r\n * Multiple licenses can be added to cover for multiple products.\r\n *\r\n * @param  license  License key\r\n */\r\nexport function addLicense(license) {\r\n    registry.licenses.push(license);\r\n}\r\n/**\r\n * Disposes all [[Root]] elements.\r\n */\r\nexport function disposeAllRootElements() {\r\n    let root;\r\n    while (root = registry.rootElements.pop()) {\r\n        root.dispose();\r\n    }\r\n}\r\n/**\r\n * Finds and returns a `Root` element assigned to a container with `id`.\r\n *\r\n * @param   id  Container ID\r\n * @return      Root\r\n * @since 5.9.2\r\n */\r\nexport function getRootById(id) {\r\n    let found;\r\n    registry.rootElements.forEach((item) => {\r\n        if (item.dom.id == id) {\r\n            found = item;\r\n        }\r\n    });\r\n    return found;\r\n}\r\n//# sourceMappingURL=Registry.js.map","import { Disposer } from \"./Disposer\";\r\nimport { EventDispatcher } from \"./EventDispatcher\";\r\nimport { AnimationState, getInterpolate } from \"./Animation\";\r\nimport { States } from \"./States\";\r\nimport { registry } from \"../Registry\";\r\nimport * as $object from \"./Object\";\r\nimport * as $ease from \"./Ease\";\r\nimport * as $array from \"./Array\";\r\nimport * as $order from \"./Order\";\r\n/**\r\n * Allows to dynamically modify setting value of its target element.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/settings/adapters/} for more info\r\n */\r\nexport class Adapters {\r\n    constructor(entity) {\r\n        Object.defineProperty(this, \"_entity\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_callbacks\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_disabled\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        this._entity = entity;\r\n    }\r\n    /**\r\n     * Add a function (`callback`) that will modify value for setting `key`.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/settings/adapters/} for more info\r\n     */\r\n    add(key, callback) {\r\n        let callbacks = this._callbacks[key];\r\n        if (callbacks === undefined) {\r\n            callbacks = this._callbacks[key] = [];\r\n        }\r\n        callbacks.push(callback);\r\n        this._entity._markDirtyKey(key);\r\n        return new Disposer(() => {\r\n            if ($array.removeFirst(callbacks, callback)) {\r\n                this._entity._markDirtyKey(key);\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Removes all adapters for the specific key.\r\n     *\r\n     * @since 5.1.0\r\n     */\r\n    remove(key) {\r\n        const callbacks = this._callbacks[key];\r\n        if (callbacks !== undefined) {\r\n            delete this._callbacks[key];\r\n            if (callbacks.length !== 0) {\r\n                this._entity._markDirtyKey(key);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Enables (previously disabled) adapters for specific key.\r\n     *\r\n     * @since 5.1.0\r\n     */\r\n    enable(key) {\r\n        if (this._disabled[key]) {\r\n            delete this._disabled[key];\r\n            this._entity._markDirtyKey(key);\r\n        }\r\n    }\r\n    /**\r\n     * Disables all adapters for specific key.\r\n     *\r\n     * @since 5.1.0\r\n     */\r\n    disable(key) {\r\n        if (!this._disabled[key]) {\r\n            this._disabled[key] = true;\r\n            this._entity._markDirtyKey(key);\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    fold(key, value) {\r\n        if (!this._disabled[key]) {\r\n            const callbacks = this._callbacks[key];\r\n            if (callbacks !== undefined) {\r\n                for (let i = 0, len = callbacks.length; i < len; ++i) {\r\n                    value = callbacks[i](value, this._entity, key);\r\n                }\r\n            }\r\n        }\r\n        return value;\r\n    }\r\n}\r\n/**\r\n * Animation object.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/animations/} for more info\r\n */\r\nexport class Animation {\r\n    constructor(animation, from, to, duration, easing, loops, startingTime) {\r\n        Object.defineProperty(this, \"_animation\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_from\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_to\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_duration\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_easing\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_loops\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_interpolate\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_oldTime\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_time\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_stopped\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_playing\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: true\r\n        });\r\n        Object.defineProperty(this, \"events\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new EventDispatcher()\r\n        });\r\n        this._animation = animation;\r\n        this._from = from;\r\n        this._to = to;\r\n        this._duration = duration;\r\n        this._easing = easing;\r\n        this._loops = loops;\r\n        this._interpolate = getInterpolate(from, to);\r\n        this._oldTime = startingTime;\r\n    }\r\n    get to() {\r\n        return this._to;\r\n    }\r\n    get from() {\r\n        return this._from;\r\n    }\r\n    get playing() {\r\n        return this._playing;\r\n    }\r\n    get stopped() {\r\n        return this._stopped;\r\n    }\r\n    stop() {\r\n        if (!this._stopped) {\r\n            this._stopped = true;\r\n            this._playing = false;\r\n            if (this.events.isEnabled(\"stopped\")) {\r\n                this.events.dispatch(\"stopped\", {\r\n                    type: \"stopped\",\r\n                    target: this,\r\n                });\r\n            }\r\n        }\r\n    }\r\n    pause() {\r\n        this._playing = false;\r\n        this._oldTime = null;\r\n    }\r\n    play() {\r\n        if (!this._stopped && !this._playing) {\r\n            this._playing = true;\r\n            this._animation._startAnimation();\r\n        }\r\n    }\r\n    get percentage() {\r\n        return this._time / this._duration;\r\n    }\r\n    waitForStop() {\r\n        return new Promise((resolve, _reject) => {\r\n            if (this._stopped) {\r\n                resolve();\r\n            }\r\n            else {\r\n                const listener = () => {\r\n                    stopped.dispose();\r\n                    resolve();\r\n                };\r\n                const stopped = this.events.on(\"stopped\", listener);\r\n            }\r\n        });\r\n    }\r\n    _checkEnded() {\r\n        if (this._loops > 1) {\r\n            --this._loops;\r\n            return false;\r\n        }\r\n        else {\r\n            return true;\r\n        }\r\n    }\r\n    _run(currentTime) {\r\n        if (this._oldTime !== null) {\r\n            this._time += currentTime - this._oldTime;\r\n            if (this._time > this._duration) {\r\n                this._time = this._duration;\r\n            }\r\n        }\r\n        this._oldTime = currentTime;\r\n    }\r\n    _reset(currentTime) {\r\n        this._oldTime = currentTime;\r\n        this._time = 0;\r\n    }\r\n    _value(diff) {\r\n        return this._interpolate(this._easing(diff), this._from, this._to);\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nlet counter = 0;\r\n/**\r\n * Base class for [[Entity]] objects that support Settings.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/settings/} for more info\r\n */\r\nexport class Settings {\r\n    constructor(settings) {\r\n        /**\r\n         * Unique ID.\r\n         */\r\n        Object.defineProperty(this, \"uid\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: ++counter\r\n        });\r\n        Object.defineProperty(this, \"_settings\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_privateSettings\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_settingEvents\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_privateSettingEvents\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_prevSettings\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_prevPrivateSettings\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_animatingSettings\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_animatingPrivateSettings\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_disposed\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        // TODO move this into Entity\r\n        Object.defineProperty(this, \"_userProperties\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        /**\r\n         * If this is set to `false` then disposing does nothing, it's a no-op.\r\n         */\r\n        Object.defineProperty(this, \"enableDispose\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: true\r\n        });\r\n        this._settings = settings;\r\n    }\r\n    _checkDirty() {\r\n        $object.keys(this._settings).forEach((key) => {\r\n            this._userProperties[key] = true;\r\n            this._markDirtyKey(key);\r\n        });\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    resetUserSettings() {\r\n        this._userProperties = {};\r\n    }\r\n    _runAnimation(currentTime) {\r\n        let state = AnimationState.Stopped;\r\n        if (!this.isDisposed()) {\r\n            let playing = false;\r\n            let paused = false;\r\n            $object.each(this._animatingSettings, (key, animation) => {\r\n                if (animation.stopped) {\r\n                    this._stopAnimation(key);\r\n                }\r\n                else if (animation.playing) {\r\n                    animation._run(currentTime);\r\n                    const diff = animation.percentage;\r\n                    if (diff >= 1) {\r\n                        if (animation._checkEnded()) {\r\n                            this.set(key, animation._value(1));\r\n                        }\r\n                        else {\r\n                            playing = true;\r\n                            animation._reset(currentTime);\r\n                            this._set(key, animation._value(1));\r\n                        }\r\n                    }\r\n                    else {\r\n                        playing = true;\r\n                        this._set(key, animation._value(diff));\r\n                    }\r\n                }\r\n                else {\r\n                    paused = true;\r\n                }\r\n            });\r\n            $object.each(this._animatingPrivateSettings, (key, animation) => {\r\n                if (animation.stopped) {\r\n                    this._stopAnimationPrivate(key);\r\n                }\r\n                else if (animation.playing) {\r\n                    animation._run(currentTime);\r\n                    const diff = animation.percentage;\r\n                    if (diff >= 1) {\r\n                        if (animation._checkEnded()) {\r\n                            this.setPrivate(key, animation._value(1));\r\n                        }\r\n                        else {\r\n                            playing = true;\r\n                            animation._reset(currentTime);\r\n                            this._setPrivate(key, animation._value(1));\r\n                        }\r\n                    }\r\n                    else {\r\n                        playing = true;\r\n                        this._setPrivate(key, animation._value(diff));\r\n                    }\r\n                }\r\n                else {\r\n                    paused = true;\r\n                }\r\n            });\r\n            if (playing) {\r\n                state = AnimationState.Playing;\r\n            }\r\n            else if (paused) {\r\n                state = AnimationState.Paused;\r\n            }\r\n        }\r\n        return state;\r\n    }\r\n    _markDirtyKey(_key) {\r\n        this.markDirty();\r\n    }\r\n    _markDirtyPrivateKey(_key) {\r\n        this.markDirty();\r\n    }\r\n    /**\r\n     * Sets a callback function to invoke when specific key of settings changes\r\n     * or is set.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/events/#Settings_value_change} for more info\r\n     * @param   key       Settings key\r\n     * @param   callback  Callback\r\n     * @return            Disposer for event\r\n     */\r\n    on(key, callback) {\r\n        let events = this._settingEvents[key];\r\n        if (events === undefined) {\r\n            events = this._settingEvents[key] = [];\r\n        }\r\n        events.push(callback);\r\n        return new Disposer(() => {\r\n            $array.removeFirst(events, callback);\r\n            if (events.length === 0) {\r\n                delete this._settingEvents[key];\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Removes a callback for when value of a setting changes.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/events/#Settings_value_change} for more info\r\n     * @param   key       Private settings key\r\n     * @param   callback  Callback\r\n     * @since 5.9.2\r\n     */\r\n    off(key, callback) {\r\n        let events = this._settingEvents[key];\r\n        if (events !== undefined && callback !== undefined) {\r\n            $array.removeFirst(events, callback);\r\n        }\r\n        else {\r\n            delete this._settingEvents[key];\r\n        }\r\n    }\r\n    /**\r\n     * Sets a callback function to invoke when specific key of private settings\r\n     * changes or is set.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/events/#Settings_value_change} for more info\r\n     * @param   key       Private settings key\r\n     * @param   callback  Callback\r\n     * @return            Disposer for event\r\n     */\r\n    onPrivate(key, callback) {\r\n        let events = this._privateSettingEvents[key];\r\n        if (events === undefined) {\r\n            events = this._privateSettingEvents[key] = [];\r\n        }\r\n        events.push(callback);\r\n        return new Disposer(() => {\r\n            $array.removeFirst(events, callback);\r\n            if (events.length === 0) {\r\n                delete this._privateSettingEvents[key];\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Removes a callback for when value of a private setting changes.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/events/#Settings_value_change} for more info\r\n     * @param   key       Private settings key\r\n     * @param   callback  Callback\r\n     * @since 5.9.2\r\n     */\r\n    offPrivate(key, callback) {\r\n        let events = this._privateSettingEvents[key];\r\n        if (events !== undefined && callback !== undefined) {\r\n            $array.removeFirst(events, callback);\r\n        }\r\n        else {\r\n            delete this._privateSettingEvents[key];\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    getRaw(key, fallback) {\r\n        const value = this._settings[key];\r\n        if (value !== undefined) {\r\n            return value;\r\n        }\r\n        else {\r\n            return fallback;\r\n        }\r\n    }\r\n    /**\r\n     * Returns `true` if the setting exists.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/settings/} for more info\r\n     * @param   key        Settings key\r\n     * @return  {boolean}  Key exists\r\n     */\r\n    has(key) {\r\n        return key in this._settings;\r\n    }\r\n    get(key, fallback) {\r\n        return this.getRaw(key, fallback);\r\n    }\r\n    _sendKeyEvent(key, value) {\r\n        const events = this._settingEvents[key];\r\n        if (events !== undefined) {\r\n            $array.each(events, (callback) => {\r\n                callback(value, this, key);\r\n            });\r\n        }\r\n    }\r\n    _sendPrivateKeyEvent(key, value) {\r\n        const events = this._privateSettingEvents[key];\r\n        if (events !== undefined) {\r\n            $array.each(events, (callback) => {\r\n                callback(value, this, key);\r\n            });\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    _setRaw(key, old, value) {\r\n        this._prevSettings[key] = old;\r\n        this._sendKeyEvent(key, value);\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    setRaw(key, value) {\r\n        const old = this._settings[key];\r\n        this._settings[key] = value;\r\n        if (old !== value) {\r\n            this._setRaw(key, old, value);\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    _set(key, value) {\r\n        const old = this._settings[key];\r\n        this._settings[key] = value;\r\n        if (old !== value) {\r\n            this._setRaw(key, old, value);\r\n            this._markDirtyKey(key);\r\n        }\r\n    }\r\n    _stopAnimation(key) {\r\n        const animation = this._animatingSettings[key];\r\n        if (animation) {\r\n            delete this._animatingSettings[key];\r\n            animation.stop();\r\n        }\r\n    }\r\n    /**\r\n     * Sets a setting `value` for the specified `key`, and returns the same `value`.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/settings/} for more info\r\n     * @param   key       Setting key\r\n     * @param   value     Setting value\r\n     * @return            Setting value\r\n     */\r\n    set(key, value) {\r\n        this._set(key, value);\r\n        this._stopAnimation(key);\r\n        return value;\r\n    }\r\n    /**\r\n     * Removes a setting value for the specified `key`;\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/settings/} for more info\r\n     * @param   key       Setting key\r\n     */\r\n    remove(key) {\r\n        if (key in this._settings) {\r\n            this._prevSettings[key] = this._settings[key];\r\n            delete this._settings[key];\r\n            this._sendKeyEvent(key, undefined);\r\n            this._markDirtyKey(key);\r\n        }\r\n        this._stopAnimation(key);\r\n    }\r\n    /**\r\n     * Removes all keys;\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/settings/} for more info\r\n     */\r\n    removeAll() {\r\n        $array.each($object.keys(this._settings), (key) => {\r\n            this.remove(key);\r\n        });\r\n    }\r\n    /**\r\n     * Returns a value of a private setting.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/settings/#Private_settings} for more info\r\n     */\r\n    getPrivate(key, fallback) {\r\n        const value = this._privateSettings[key];\r\n        if (value !== undefined) {\r\n            return value;\r\n        }\r\n        else {\r\n            return fallback;\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    _setPrivateRaw(key, old, value) {\r\n        this._prevPrivateSettings[key] = old;\r\n        this._sendPrivateKeyEvent(key, value);\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    setPrivateRaw(key, value) {\r\n        const old = this._privateSettings[key];\r\n        this._privateSettings[key] = value;\r\n        if (old !== value) {\r\n            this._setPrivateRaw(key, old, value);\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    _setPrivate(key, value) {\r\n        const old = this._privateSettings[key];\r\n        this._privateSettings[key] = value;\r\n        if (old !== value) {\r\n            this._setPrivateRaw(key, old, value);\r\n            this._markDirtyPrivateKey(key);\r\n        }\r\n    }\r\n    _stopAnimationPrivate(key) {\r\n        const animation = this._animatingPrivateSettings[key];\r\n        if (animation) {\r\n            animation.stop();\r\n            delete this._animatingPrivateSettings[key];\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    setPrivate(key, value) {\r\n        this._setPrivate(key, value);\r\n        this._stopAnimationPrivate(key);\r\n        return value;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    removePrivate(key) {\r\n        if (key in this._privateSettings) {\r\n            this._prevPrivateSettings[key] = this._privateSettings[key];\r\n            delete this._privateSettings[key];\r\n            this._markDirtyPrivateKey(key);\r\n        }\r\n        this._stopAnimationPrivate(key);\r\n    }\r\n    /**\r\n     * Sets multiple settings at once.\r\n     *\r\n     * `settings` must be an object with key: value pairs.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/settings/} for more info\r\n     * @param settings Settings\r\n     */\r\n    setAll(settings) {\r\n        $object.each(settings, (key, value) => {\r\n            this.set(key, value);\r\n        });\r\n    }\r\n    /**\r\n     * Animates setting values from current/start values to new ones.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/animations/#Animating_settings} for more info\r\n     * @param   options  Animation options\r\n     * @return           Animation object\r\n     */\r\n    animate(options) {\r\n        const key = options.key;\r\n        const to = options.to;\r\n        const duration = options.duration || 0;\r\n        const loops = options.loops || 1;\r\n        const from = (options.from === undefined ? this.get(key) : options.from);\r\n        const easing = (options.easing === undefined ? $ease.linear : options.easing);\r\n        if (duration === 0) {\r\n            this.set(key, to);\r\n        }\r\n        else {\r\n            if (from === undefined || from === to) {\r\n                this.set(key, to);\r\n            }\r\n            else {\r\n                this.set(key, from);\r\n                const animation = this._animatingSettings[key] = new Animation(this, from, to, duration, easing, loops, this._animationTime());\r\n                this._startAnimation();\r\n                return animation;\r\n            }\r\n        }\r\n        const animation = new Animation(this, from, to, duration, easing, loops, null);\r\n        animation.stop();\r\n        return animation;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    animatePrivate(options) {\r\n        const key = options.key;\r\n        const to = options.to;\r\n        const duration = options.duration || 0;\r\n        const loops = options.loops || 1;\r\n        const from = (options.from === undefined ? this.getPrivate(key) : options.from);\r\n        const easing = (options.easing === undefined ? $ease.linear : options.easing);\r\n        if (duration === 0) {\r\n            this.setPrivate(key, to);\r\n        }\r\n        else {\r\n            if (from === undefined || from === to) {\r\n                this.setPrivate(key, to);\r\n            }\r\n            else {\r\n                this.setPrivate(key, from);\r\n                const animation = this._animatingPrivateSettings[key] = new Animation(this, from, to, duration, easing, loops, this._animationTime());\r\n                this._startAnimation();\r\n                return animation;\r\n            }\r\n        }\r\n        const animation = new Animation(this, from, to, duration, easing, loops, null);\r\n        animation.stop();\r\n        return animation;\r\n    }\r\n    _dispose() { }\r\n    /**\r\n     * Returns `true` if this element is disposed.\r\n     *\r\n     * @return Disposed\r\n     */\r\n    isDisposed() {\r\n        return this._disposed;\r\n    }\r\n    /**\r\n     * Disposes this object.\r\n     */\r\n    dispose() {\r\n        if (this.enableDispose && !this._disposed) {\r\n            this._disposed = true;\r\n            this._dispose();\r\n        }\r\n    }\r\n}\r\n/**\r\n * Base class.\r\n *\r\n * @important\r\n */\r\nexport class Entity extends Settings {\r\n    /**\r\n     * IMPORTANT! Do not instantiate this class via `new Class()` syntax.\r\n     *\r\n     * Use static method `Class.new()` instead.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/getting-started/#New_element_syntax} for more info\r\n     * @ignore\r\n     */\r\n    constructor(root, settings, isReal, templates = []) {\r\n        super(settings);\r\n        Object.defineProperty(this, \"_root\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_user_id\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        }); // for testing purposes\r\n        Object.defineProperty(this, \"states\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new States(this)\r\n        });\r\n        Object.defineProperty(this, \"adapters\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new Adapters(this)\r\n        });\r\n        Object.defineProperty(this, \"events\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this._createEvents()\r\n        });\r\n        Object.defineProperty(this, \"_userPrivateProperties\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_dirty\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_dirtyPrivate\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_template\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        // Templates for the themes\r\n        Object.defineProperty(this, \"_templates\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        // Internal templates which can be overridden by the user's templates\r\n        Object.defineProperty(this, \"_internalTemplates\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        // Default themes which can be overridden by the user's themes\r\n        Object.defineProperty(this, \"_defaultThemes\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        // Disposers for all of the templates\r\n        Object.defineProperty(this, \"_templateDisposers\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        Object.defineProperty(this, \"_disposers\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        // Whether the template setup function should be run\r\n        Object.defineProperty(this, \"_runSetup\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: true\r\n        });\r\n        Object.defineProperty(this, \"_disposerProperties\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        if (!isReal) {\r\n            throw new Error(\"You cannot use `new Class()`, instead use `Class.new()`\");\r\n        }\r\n        this._root = root;\r\n        this._internalTemplates = templates;\r\n        if (settings.id) {\r\n            this._registerId(settings.id);\r\n        }\r\n    }\r\n    /**\r\n     * Use this method to create an instance of this class.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/getting-started/#New_element_syntax} for more info\r\n     * @param   root      Root element\r\n     * @param   settings  Settings\r\n     * @param   template  Template\r\n     * @return            Instantiated object\r\n     */\r\n    static new(root, settings, template) {\r\n        const x = (new this(root, settings, true));\r\n        x._template = template;\r\n        x._afterNew();\r\n        return x;\r\n    }\r\n    static _new(root, settings, templates = []) {\r\n        const x = (new this(root, settings, true, templates));\r\n        x._afterNew();\r\n        return x;\r\n    }\r\n    _afterNew() {\r\n        this._checkDirty();\r\n        let shouldApply = false;\r\n        const template = this._template;\r\n        if (template) {\r\n            shouldApply = true;\r\n            template._setObjectTemplate(this);\r\n        }\r\n        $array.each(this._internalTemplates, (template) => {\r\n            shouldApply = true;\r\n            template._setObjectTemplate(this);\r\n        });\r\n        if (shouldApply) {\r\n            this._applyTemplates(false);\r\n        }\r\n        this.states.create(\"default\", {});\r\n        this._setDefaults();\r\n    }\r\n    // This is the same as _afterNew, except it also applies the themes.\r\n    // This should only be used for classes which don't have a parent (because they extend from Entity and not Sprite).\r\n    _afterNewApplyThemes() {\r\n        this._checkDirty();\r\n        const template = this._template;\r\n        if (template) {\r\n            template._setObjectTemplate(this);\r\n        }\r\n        $array.each(this._internalTemplates, (template) => {\r\n            template._setObjectTemplate(this);\r\n        });\r\n        this.states.create(\"default\", {});\r\n        this._setDefaults();\r\n        this._applyThemes();\r\n    }\r\n    _createEvents() {\r\n        return new EventDispatcher();\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    get classNames() {\r\n        return this.constructor.classNames;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    get className() {\r\n        return this.constructor.className;\r\n    }\r\n    _setDefaults() {\r\n    }\r\n    _setDefaultFn(key, f) {\r\n        const value = this.get(key);\r\n        if (value) {\r\n            return value;\r\n        }\r\n        else {\r\n            const value = f();\r\n            this.set(key, value);\r\n            return value;\r\n        }\r\n    }\r\n    _setDefault(key, value) {\r\n        if (!this.has(key)) {\r\n            super.set(key, value);\r\n        }\r\n    }\r\n    _setRawDefault(key, value) {\r\n        if (!this.has(key)) {\r\n            super.setRaw(key, value);\r\n        }\r\n    }\r\n    _clearDirty() {\r\n        $object.keys(this._dirty).forEach((key) => {\r\n            this._dirty[key] = false;\r\n        });\r\n        $object.keys(this._dirtyPrivate).forEach((key) => {\r\n            this._dirtyPrivate[key] = false;\r\n        });\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    isDirty(key) {\r\n        return !!this._dirty[key];\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    isPrivateDirty(key) {\r\n        return !!this._dirtyPrivate[key];\r\n    }\r\n    _markDirtyKey(key) {\r\n        this._dirty[key] = true;\r\n        super._markDirtyKey(key);\r\n    }\r\n    _markDirtyPrivateKey(key) {\r\n        this._dirtyPrivate[key] = true;\r\n        super._markDirtyKey(key);\r\n    }\r\n    /**\r\n     * Checks if element is of certain class (or inherits one).\r\n     *\r\n     * @param   type  Class name to check\r\n     * @return {boolean} Is of class?\r\n     */\r\n    isType(type) {\r\n        return this.classNames.indexOf(type) !== -1;\r\n    }\r\n    _pushPropertyDisposer(key, disposer) {\r\n        let disposers = this._disposerProperties[key];\r\n        if (disposers === undefined) {\r\n            disposers = this._disposerProperties[key] = [];\r\n        }\r\n        disposers.push(disposer);\r\n        return disposer;\r\n    }\r\n    _disposeProperty(key) {\r\n        const disposers = this._disposerProperties[key];\r\n        if (disposers !== undefined) {\r\n            $array.each(disposers, (disposer) => {\r\n                disposer.dispose();\r\n            });\r\n            delete this._disposerProperties[key];\r\n        }\r\n    }\r\n    /**\r\n     * @todo needs description\r\n     * @param  value  Template\r\n     */\r\n    set template(value) {\r\n        const template = this._template;\r\n        if (template !== value) {\r\n            this._template = value;\r\n            if (template) {\r\n                template._removeObjectTemplate(this);\r\n            }\r\n            if (value) {\r\n                value._setObjectTemplate(this);\r\n            }\r\n            this._applyTemplates();\r\n        }\r\n    }\r\n    get template() {\r\n        return this._template;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    markDirty() {\r\n        this._root._addDirtyEntity(this);\r\n    }\r\n    _startAnimation() {\r\n        this._root._addAnimation(this);\r\n    }\r\n    _animationTime() {\r\n        return this._root.animationTime;\r\n    }\r\n    _applyState(_name) { }\r\n    _applyStateAnimated(_name, _duration) { }\r\n    get(key, fallback) {\r\n        const value = this.adapters.fold(key, this._settings[key]);\r\n        if (value !== undefined) {\r\n            return value;\r\n        }\r\n        else {\r\n            return fallback;\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    isUserSetting(key) {\r\n        return this._userProperties[key] || false;\r\n    }\r\n    /**\r\n     * Sets a setting `value` for the specified `key`, and returns the same `value`.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/settings/} for more info\r\n     * @param   key       Setting key\r\n     * @param   value     Setting value\r\n     * @return            Setting value\r\n     */\r\n    set(key, value) {\r\n        this._userProperties[key] = true;\r\n        return super.set(key, value);\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    setRaw(key, value) {\r\n        this._userProperties[key] = true;\r\n        super.setRaw(key, value);\r\n    }\r\n    /**\r\n     * Sets a setting `value` for the specified `key` only if the value for this key was not set previously using set method, and returns the same `value`.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/settings/} for more info\r\n     * @param   key       Setting key\r\n     * @param   value     Setting value\r\n     * @return            Setting value\r\n     */\r\n    _setSoft(key, value) {\r\n        if (!this._userProperties[key]) {\r\n            return super.set(key, value);\r\n        }\r\n        return value;\r\n    }\r\n    /**\r\n     * Removes a setting value for the specified `key`.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/settings/} for more info\r\n     * @param   key       Setting key\r\n     */\r\n    remove(key) {\r\n        delete this._userProperties[key];\r\n        this._removeTemplateProperty(key);\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    setPrivate(key, value) {\r\n        this._userPrivateProperties[key] = true;\r\n        return super.setPrivate(key, value);\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    setPrivateRaw(key, value) {\r\n        this._userPrivateProperties[key] = true;\r\n        super.setPrivateRaw(key, value);\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    removePrivate(key) {\r\n        delete this._userPrivateProperties[key];\r\n        this._removeTemplatePrivateProperty(key);\r\n    }\r\n    _setTemplateProperty(template, key, value) {\r\n        if (!this._userProperties[key]) {\r\n            const match = this._findTemplateByKey(key);\r\n            if (template === match) {\r\n                super.set(key, value);\r\n            }\r\n        }\r\n    }\r\n    _setTemplatePrivateProperty(template, key, value) {\r\n        if (!this._userPrivateProperties[key]) {\r\n            const match = this._findTemplateByPrivateKey(key);\r\n            if (template === match) {\r\n                super.setPrivate(key, value);\r\n            }\r\n        }\r\n    }\r\n    _removeTemplateProperty(key) {\r\n        if (!this._userProperties[key]) {\r\n            const match = this._findTemplateByKey(key);\r\n            if (match) {\r\n                // TODO don't stop the animation if the property didn't change\r\n                super.set(key, match._settings[key]);\r\n            }\r\n            else {\r\n                super.remove(key);\r\n            }\r\n        }\r\n    }\r\n    _removeTemplatePrivateProperty(key) {\r\n        if (!this._userPrivateProperties[key]) {\r\n            const match = this._findTemplateByPrivateKey(key);\r\n            if (match) {\r\n                // TODO don't stop the animation if the property didn't change\r\n                super.setPrivate(key, match._privateSettings[key]);\r\n            }\r\n            else {\r\n                super.removePrivate(key);\r\n            }\r\n        }\r\n    }\r\n    _walkParents(f) {\r\n        f(this._root._rootContainer);\r\n        f(this);\r\n    }\r\n    // TODO faster version of this method which is specialized to just 1 key\r\n    _applyStateByKey(name) {\r\n        const other = this.states.create(name, {});\r\n        const seen = {};\r\n        this._eachTemplate((template) => {\r\n            const state = template.states.lookup(name);\r\n            if (state) {\r\n                state._apply(other, seen);\r\n            }\r\n        });\r\n        $object.each(other._settings, (key) => {\r\n            if (!seen[key] && !other._userSettings[key]) {\r\n                other.remove(key);\r\n            }\r\n        });\r\n    }\r\n    _applyTemplate(template, state) {\r\n        this._templateDisposers.push(template._apply(this, state));\r\n        $object.each(template._settings, (key, value) => {\r\n            if (!state.settings[key] && !this._userProperties[key]) {\r\n                state.settings[key] = true;\r\n                super.set(key, value);\r\n            }\r\n        });\r\n        $object.each(template._privateSettings, (key, value) => {\r\n            if (!state.privateSettings[key] && !this._userPrivateProperties[key]) {\r\n                state.privateSettings[key] = true;\r\n                super.setPrivate(key, value);\r\n            }\r\n        });\r\n        if (this._runSetup && template.setup) {\r\n            this._runSetup = false;\r\n            template.setup(this);\r\n        }\r\n    }\r\n    /**\r\n     * Calls the closure with each template and returns the first template which is true\r\n     */\r\n    _findStaticTemplate(f) {\r\n        if (this._template) {\r\n            if (f(this._template)) {\r\n                return this._template;\r\n            }\r\n        }\r\n    }\r\n    _eachTemplate(f) {\r\n        this._findStaticTemplate((template) => {\r\n            f(template);\r\n            return false;\r\n        });\r\n        // _internalTemplates is sorted with most specific to the right\r\n        $array.eachReverse(this._internalTemplates, f);\r\n        // _templates is sorted with most specific to the left\r\n        $array.each(this._templates, f);\r\n    }\r\n    _applyTemplates(remove = true) {\r\n        if (remove) {\r\n            this._disposeTemplates();\r\n        }\r\n        const state = {\r\n            settings: {},\r\n            privateSettings: {},\r\n            states: {},\r\n        };\r\n        this._eachTemplate((template) => {\r\n            this._applyTemplate(template, state);\r\n        });\r\n        if (remove) {\r\n            $object.each(this._settings, (key) => {\r\n                if (!this._userProperties[key] && !state.settings[key]) {\r\n                    super.remove(key);\r\n                }\r\n            });\r\n            $object.each(this._privateSettings, (key) => {\r\n                if (!this._userPrivateProperties[key] && !state.privateSettings[key]) {\r\n                    super.removePrivate(key);\r\n                }\r\n            });\r\n        }\r\n    }\r\n    _findTemplate(f) {\r\n        const value = this._findStaticTemplate(f);\r\n        if (value === undefined) {\r\n            // _internalTemplates is sorted with most specific to the right\r\n            const value = $array.findReverse(this._internalTemplates, f);\r\n            if (value === undefined) {\r\n                // _templates is sorted with most specific to the left\r\n                return $array.find(this._templates, f);\r\n            }\r\n            else {\r\n                return value;\r\n            }\r\n        }\r\n        else {\r\n            return value;\r\n        }\r\n    }\r\n    _findTemplateByKey(key) {\r\n        return this._findTemplate((template) => {\r\n            return key in template._settings;\r\n        });\r\n    }\r\n    _findTemplateByPrivateKey(key) {\r\n        return this._findTemplate((template) => {\r\n            return key in template._privateSettings;\r\n        });\r\n    }\r\n    _disposeTemplates() {\r\n        $array.each(this._templateDisposers, (disposer) => {\r\n            disposer.dispose();\r\n        });\r\n        this._templateDisposers.length = 0;\r\n    }\r\n    _removeTemplates() {\r\n        $array.each(this._templates, (template) => {\r\n            template._removeObjectTemplate(this);\r\n        });\r\n        this._templates.length = 0;\r\n    }\r\n    _applyThemes(force = false) {\r\n        let isConnected = false;\r\n        const defaults = [];\r\n        let themes = [];\r\n        const themeTags = new Set();\r\n        const tags = this.get(\"themeTagsSelf\");\r\n        if (tags) {\r\n            $array.each(tags, (tag) => {\r\n                themeTags.add(tag);\r\n            });\r\n        }\r\n        this._walkParents((entity) => {\r\n            if (entity === this._root._rootContainer) {\r\n                isConnected = true;\r\n            }\r\n            if (entity._defaultThemes.length > 0) {\r\n                defaults.push(entity._defaultThemes);\r\n            }\r\n            const theme = entity.get(\"themes\");\r\n            if (theme) {\r\n                themes.push(theme);\r\n            }\r\n            const tags = entity.get(\"themeTags\");\r\n            if (tags) {\r\n                $array.each(tags, (tag) => {\r\n                    themeTags.add(tag);\r\n                });\r\n            }\r\n        });\r\n        themes = defaults.concat(themes);\r\n        this._removeTemplates();\r\n        if (isConnected || force) {\r\n            $array.eachReverse(this.classNames, (name) => {\r\n                const allRules = [];\r\n                $array.each(themes, (themes) => {\r\n                    $array.each(themes, (theme) => {\r\n                        const rules = theme._lookupRules(name);\r\n                        if (rules) {\r\n                            $array.eachReverse(rules, (rule) => {\r\n                                const matches = rule.tags.every((tag) => {\r\n                                    return themeTags.has(tag);\r\n                                });\r\n                                if (matches) {\r\n                                    const result = $array.getFirstSortedIndex(allRules, (x) => {\r\n                                        const order = $order.compare(rule.tags.length, x.tags.length);\r\n                                        if (order === 0) {\r\n                                            return $order.compareArray(rule.tags, x.tags, $order.compare);\r\n                                        }\r\n                                        else {\r\n                                            return order;\r\n                                        }\r\n                                    });\r\n                                    allRules.splice(result.index, 0, rule);\r\n                                }\r\n                            });\r\n                        }\r\n                    });\r\n                });\r\n                $array.each(allRules, (rule) => {\r\n                    this._templates.push(rule.template);\r\n                    rule.template._setObjectTemplate(this);\r\n                });\r\n            });\r\n        }\r\n        this._applyTemplates();\r\n        if (isConnected || force) {\r\n            // This causes it to only run the setup function the first time that the themes are applied\r\n            this._runSetup = false;\r\n        }\r\n        return isConnected || force;\r\n    }\r\n    _changed() { }\r\n    _beforeChanged() {\r\n        if (this.isDirty(\"id\")) {\r\n            const id = this.get(\"id\");\r\n            if (id) {\r\n                this._registerId(id);\r\n            }\r\n            const prevId = this._prevSettings.id;\r\n            if (prevId) {\r\n                delete this._root.entitiesById[prevId];\r\n                delete registry.entitiesById[prevId];\r\n            }\r\n        }\r\n    }\r\n    _registerId(id) {\r\n        if (this._root.entitiesById[id] && this._root.entitiesById[id] !== this) {\r\n            throw new Error(\"An entity with id \\\"\" + id + \"\\\" already exists.\");\r\n        }\r\n        this._root.entitiesById[id] = this;\r\n        registry.entitiesById[id] = this;\r\n    }\r\n    _afterChanged() { }\r\n    /**\r\n     * @ignore\r\n     */\r\n    addDisposer(disposer) {\r\n        this._disposers.push(disposer);\r\n        return disposer;\r\n    }\r\n    _dispose() {\r\n        super._dispose();\r\n        const template = this._template;\r\n        if (template) {\r\n            template._removeObjectTemplate(this);\r\n        }\r\n        $array.each(this._internalTemplates, (template) => {\r\n            template._removeObjectTemplate(this);\r\n        });\r\n        this._removeTemplates();\r\n        this._disposeTemplates();\r\n        this.events.dispose();\r\n        this._disposers.forEach((x) => {\r\n            x.dispose();\r\n        });\r\n        $object.each(this._disposerProperties, (_, disposers) => {\r\n            $array.each(disposers, (disposer) => {\r\n                disposer.dispose();\r\n            });\r\n        });\r\n        const id = this.get(\"id\");\r\n        if (id) {\r\n            delete this._root.entitiesById[id];\r\n            delete registry.entitiesById[id];\r\n        }\r\n    }\r\n    /**\r\n     * Creates and returns a \"disposable\" timeout.\r\n     *\r\n     * @param   fn     Callback\r\n     * @param   delay  Delay in milliseconds\r\n     * @return         Timeout disposer\r\n     */\r\n    setTimeout(fn, delay) {\r\n        const id = setTimeout(() => {\r\n            this.removeDispose(disposer);\r\n            fn();\r\n        }, delay);\r\n        const disposer = new Disposer(() => {\r\n            clearTimeout(id);\r\n        });\r\n        this._disposers.push(disposer);\r\n        return disposer;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    removeDispose(target) {\r\n        if (!this.isDisposed()) {\r\n            let index = $array.indexOf(this._disposers, target);\r\n            if (index > -1) {\r\n                this._disposers.splice(index, 1);\r\n            }\r\n        }\r\n        target.dispose();\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    hasTag(tag) {\r\n        return $array.indexOf(this.get(\"themeTags\", []), tag) !== -1;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    addTag(tag) {\r\n        if (!this.hasTag(tag)) {\r\n            const tags = this.get(\"themeTags\", []);\r\n            tags.push(tag);\r\n            this.set(\"themeTags\", tags);\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    removeTag(tag) {\r\n        if (this.hasTag(tag)) {\r\n            const tags = this.get(\"themeTags\", []);\r\n            $array.remove(tags, tag);\r\n            this.set(\"themeTags\", tags);\r\n        }\r\n    }\r\n    _t(text, locale, ...rest) {\r\n        return this._root.language.translate(text, locale, ...rest);\r\n    }\r\n    /**\r\n     * An instance of [[Root]] object.\r\n     *\r\n     * @readonly\r\n     * @since 5.0.6\r\n     * @return Root object\r\n     */\r\n    get root() {\r\n        return this._root;\r\n    }\r\n}\r\nObject.defineProperty(Entity, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"Entity\"\r\n});\r\nObject.defineProperty(Entity, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: [\"Entity\"]\r\n});\r\n//# sourceMappingURL=Entity.js.map","import { __awaiter } from \"tslib\";\r\nimport { Entity } from \"../util/Entity\";\r\nimport { Template } from \"../util/Template\";\r\nimport { Percent } from \"../util/Percent\";\r\nimport { EventDispatcher } from \"../util/EventDispatcher\";\r\nimport { MultiDisposer, CounterDisposer } from \"../util/Disposer\";\r\nimport { waitForAnimations } from \"../util/Animation\";\r\nimport * as $utils from \"../util/Utils\";\r\nimport * as $array from \"../util/Array\";\r\nimport * as $type from \"../util/Type\";\r\nimport * as $object from \"../util/Object\";\r\nimport * as $math from \"../util/Math\";\r\n//import { populateString } from \"../util/PopulateString\";\r\n/**\r\n * An [[EventDispatcher]] for [[Sprite]].\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/events/} for more info\r\n */\r\nclass SpriteEventDispatcher extends EventDispatcher {\r\n    constructor(sprite) {\r\n        super();\r\n        Object.defineProperty(this, \"_sprite\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_rendererDisposers\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_dispatchParents\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: true\r\n        });\r\n        this._sprite = sprite;\r\n    }\r\n    _makePointerEvent(key, event) {\r\n        return {\r\n            type: key,\r\n            originalEvent: event.event,\r\n            point: event.point,\r\n            simulated: event.simulated,\r\n            native: event.native,\r\n            target: this._sprite\r\n        };\r\n    }\r\n    _onRenderer(key, dispatch) {\r\n        // TODO: is this OK? it'd be good not to require to set this on each individual element\r\n        this._sprite.set(\"interactive\", true);\r\n        this._sprite._display.interactive = true;\r\n        let events = this._rendererDisposers[key];\r\n        if (events === undefined) {\r\n            const disposer = this._sprite._display.on(key, (e) => {\r\n                dispatch.call(this, e);\r\n            });\r\n            events = this._rendererDisposers[key] = new CounterDisposer(() => {\r\n                delete this._rendererDisposers[key];\r\n                disposer.dispose();\r\n            });\r\n        }\r\n        return events.increment();\r\n    }\r\n    _on(once, type, callback, context, shouldClone, dispatch, debounceDelay) {\r\n        const info = super._on(once, type, callback, context, shouldClone, dispatch, debounceDelay);\r\n        const rendererEvent = SpriteEventDispatcher.RENDERER_EVENTS[type];\r\n        if (rendererEvent !== undefined) {\r\n            info.disposer = new MultiDisposer([\r\n                info.disposer,\r\n                this._onRenderer(type, rendererEvent),\r\n            ]);\r\n        }\r\n        return info;\r\n    }\r\n    /**\r\n     * Will stop any bubbling up of the event to element's parents.\r\n     *\r\n     * Should be called in an event handler, e.g.:\r\n     *\r\n     * ```TypeScript\r\n     * element.events.on(\"pointerdown\", function(ev) {\r\n     *   // Do something here and prevent from \"pointerdown\" bubbling up\r\n     *   // ...\r\n     *   ev.target.events.stopParentDispatch();\r\n     * });\r\n     * ```\r\n     * ```JavaScript\r\n     * element.events.on(\"pointerdown\", function(ev) {\r\n     *   // Do something here and prevent from \"pointerdown\" bubbling up\r\n     *   // ...\r\n     *   ev.target.events.stopParentDispatch();\r\n     * });\r\n     * ```\r\n     */\r\n    stopParentDispatch() {\r\n        this._dispatchParents = false;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    dispatchParents(type, event) {\r\n        const old = this._dispatchParents;\r\n        this._dispatchParents = true;\r\n        try {\r\n            this.dispatch(type, event);\r\n            if (this._dispatchParents && this._sprite.parent) {\r\n                this._sprite.parent.events.dispatchParents(type, event);\r\n            }\r\n        }\r\n        finally {\r\n            this._dispatchParents = old;\r\n        }\r\n    }\r\n}\r\nObject.defineProperty(SpriteEventDispatcher, \"RENDERER_EVENTS\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: {\r\n        \"click\": function (event) {\r\n            if (this.isEnabled(\"click\") && !this._sprite.isDragging() && this._sprite._hasDown() && !this._sprite._hasMoved(this._makePointerEvent(\"click\", event))) {\r\n                this.dispatch(\"click\", this._makePointerEvent(\"click\", event));\r\n            }\r\n        },\r\n        \"rightclick\": function (event) {\r\n            if (this.isEnabled(\"rightclick\")) {\r\n                this.dispatch(\"rightclick\", this._makePointerEvent(\"rightclick\", event));\r\n            }\r\n        },\r\n        \"middleclick\": function (event) {\r\n            if (this.isEnabled(\"middleclick\")) {\r\n                this.dispatch(\"middleclick\", this._makePointerEvent(\"middleclick\", event));\r\n            }\r\n        },\r\n        \"dblclick\": function (event) {\r\n            this.dispatchParents(\"dblclick\", this._makePointerEvent(\"dblclick\", event));\r\n        },\r\n        \"pointerover\": function (event) {\r\n            const sprite = this._sprite;\r\n            let dispatch = true;\r\n            if (sprite.getPrivate(\"trustBounds\")) {\r\n                sprite._getBounds();\r\n                const bounds = sprite.globalBounds();\r\n                if (sprite.isType(\"Graphics\")) {\r\n                    const strokeWidth = sprite.get(\"strokeWidth\", 1) / 2;\r\n                    if (strokeWidth >= 1) {\r\n                        bounds.left -= strokeWidth;\r\n                        bounds.right += strokeWidth;\r\n                        bounds.top -= strokeWidth;\r\n                        bounds.bottom += strokeWidth;\r\n                    }\r\n                }\r\n                if (!$math.inBounds(event.point, bounds)) {\r\n                    dispatch = false;\r\n                    sprite._root._renderer.removeHovering(sprite._display);\r\n                }\r\n            }\r\n            if (dispatch && this.isEnabled(\"pointerover\")) {\r\n                this.dispatch(\"pointerover\", this._makePointerEvent(\"pointerover\", event));\r\n            }\r\n        },\r\n        \"pointerout\": function (event) {\r\n            if (this.isEnabled(\"pointerout\")) {\r\n                this.dispatch(\"pointerout\", this._makePointerEvent(\"pointerout\", event));\r\n            }\r\n        },\r\n        \"pointerdown\": function (event) {\r\n            this.dispatchParents(\"pointerdown\", this._makePointerEvent(\"pointerdown\", event));\r\n        },\r\n        \"pointerup\": function (event) {\r\n            if (this.isEnabled(\"pointerup\")) {\r\n                this.dispatch(\"pointerup\", this._makePointerEvent(\"pointerup\", event));\r\n            }\r\n        },\r\n        \"globalpointerup\": function (event) {\r\n            if (this.isEnabled(\"globalpointerup\")) {\r\n                this.dispatch(\"globalpointerup\", this._makePointerEvent(\"globalpointerup\", event));\r\n            }\r\n        },\r\n        \"globalpointermove\": function (event) {\r\n            if (this.isEnabled(\"globalpointermove\")) {\r\n                this.dispatch(\"globalpointermove\", this._makePointerEvent(\"globalpointermove\", event));\r\n            }\r\n        },\r\n        \"wheel\": function (event) {\r\n            this.dispatchParents(\"wheel\", {\r\n                type: \"wheel\",\r\n                target: this._sprite,\r\n                originalEvent: event.event,\r\n                point: event.point,\r\n            });\r\n        },\r\n    }\r\n});\r\n/**\r\n * A base class for all visual elements.\r\n *\r\n * @important\r\n */\r\nexport class Sprite extends Entity {\r\n    constructor() {\r\n        super(...arguments);\r\n        Object.defineProperty(this, \"_adjustedLocalBounds\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: { left: 0, right: 0, top: 0, bottom: 0 }\r\n        });\r\n        Object.defineProperty(this, \"_localBounds\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: { left: 0, right: 0, top: 0, bottom: 0 }\r\n        });\r\n        Object.defineProperty(this, \"_parent\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_dataItem\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_templateField\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_sizeDirty\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        // Will be true only when dragging\r\n        Object.defineProperty(this, \"_isDragging\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        // The event when the dragging starts\r\n        Object.defineProperty(this, \"_dragEvent\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        // The position when dragging starts\r\n        Object.defineProperty(this, \"_dragPoint\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_isHidden\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_isShowing\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_isHiding\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_isDown\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_downPoint\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_downPoints\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_toggleDp\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_dragDp\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_tooltipDp\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_hoverDp\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_focusDp\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_tooltipMoveDp\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_tooltipPointerDp\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        //protected _statesHandled: boolean = false;\r\n        Object.defineProperty(this, \"_virtualParent\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n    }\r\n    _afterNew() {\r\n        this.setPrivateRaw(\"visible\", true);\r\n        super._afterNew();\r\n    }\r\n    /**\r\n     * Marks some setting as dirty. Could be used to trigger adapter.\r\n     * @param key\r\n     */\r\n    markDirtyKey(key) {\r\n        this._markDirtyKey(key);\r\n    }\r\n    _markDirtyKey(key) {\r\n        super._markDirtyKey(key);\r\n        if (key == \"x\" || key == \"y\" || key == \"dx\" || key == \"dy\") {\r\n            this.markDirtyBounds();\r\n            this._addPercentagePositionChildren();\r\n            this.markDirtyPosition();\r\n        }\r\n    }\r\n    _markDirtyPrivateKey(key) {\r\n        super._markDirtyPrivateKey(key);\r\n        if (key == \"x\" || key == \"y\") {\r\n            this.markDirtyPosition();\r\n        }\r\n    }\r\n    _removeTemplateField() {\r\n        if (this._templateField) {\r\n            this._templateField._removeObjectTemplate(this);\r\n        }\r\n    }\r\n    _createEvents() {\r\n        return new SpriteEventDispatcher(this);\r\n    }\r\n    _processTemplateField() {\r\n        let template;\r\n        const field = this.get(\"templateField\");\r\n        if (field) {\r\n            const dataItem = this.dataItem;\r\n            if (dataItem) {\r\n                const context = dataItem.dataContext;\r\n                if (context) {\r\n                    template = context[field];\r\n                    if (!(template instanceof Template) && template) {\r\n                        template = Template.new(template);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (this._templateField !== template) {\r\n            this._removeTemplateField();\r\n            this._templateField = template;\r\n            if (template) {\r\n                template._setObjectTemplate(this);\r\n            }\r\n            this._applyTemplates();\r\n        }\r\n    }\r\n    // TODO change this to run before the element is added to the parent, so that way\r\n    //      it doesn't need to apply the themes twice\r\n    _setDataItem(dataItem) {\r\n        const oldDataItem = this._dataItem;\r\n        this._dataItem = dataItem;\r\n        this._processTemplateField();\r\n        const eventType = \"dataitemchanged\";\r\n        if (dataItem != oldDataItem) {\r\n            if (this.events.isEnabled(eventType)) {\r\n                this.events.dispatch(eventType, {\r\n                    type: eventType,\r\n                    target: this,\r\n                    oldDataItem: oldDataItem,\r\n                    newDataItem: dataItem\r\n                });\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * A [[DataItem]] used for this element.\r\n     *\r\n     * NOTE: data item is being assigned automatically in most cases where it\r\n     * matters. Use this accessor to set data item only if you know what you're\r\n     * doing.\r\n     *\r\n     * @param  value  Data item\r\n     */\r\n    set dataItem(value) {\r\n        this._setDataItem(value);\r\n    }\r\n    /**\r\n     * @return DataItem\r\n     */\r\n    get dataItem() {\r\n        if (this._dataItem) {\r\n            return this._dataItem;\r\n        }\r\n        else {\r\n            let parent = this._parent;\r\n            while (parent) {\r\n                if (parent._dataItem) {\r\n                    return parent._dataItem;\r\n                }\r\n                else {\r\n                    parent = parent._parent;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    _addPercentageSizeChildren() {\r\n        let parent = this.parent;\r\n        if (parent) {\r\n            if (this.get(\"width\") instanceof Percent || this.get(\"height\") instanceof Percent) {\r\n                $array.pushOne(parent._percentageSizeChildren, this);\r\n            }\r\n            else {\r\n                $array.removeFirst(parent._percentageSizeChildren, this);\r\n            }\r\n        }\r\n    }\r\n    _addPercentagePositionChildren() {\r\n        let parent = this.parent;\r\n        if (parent) {\r\n            if (this.get(\"x\") instanceof Percent || this.get(\"y\") instanceof Percent) {\r\n                $array.pushOne(parent._percentagePositionChildren, this);\r\n            }\r\n            else {\r\n                $array.removeFirst(parent._percentagePositionChildren, this);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    markDirtyPosition() {\r\n        this._root._addDirtyPosition(this);\r\n    }\r\n    updatePivotPoint() {\r\n        const bounds = this._localBounds;\r\n        if (bounds) {\r\n            const centerX = this.get(\"centerX\");\r\n            if (centerX != null) {\r\n                this._display.pivot.x = bounds.left + $utils.relativeToValue(centerX, bounds.right - bounds.left);\r\n            }\r\n            const centerY = this.get(\"centerY\");\r\n            if (centerY != null) {\r\n                this._display.pivot.y = bounds.top + $utils.relativeToValue(centerY, bounds.bottom - bounds.top);\r\n            }\r\n        }\r\n    }\r\n    _beforeChanged() {\r\n        super._beforeChanged();\r\n        // handling states in beforeChanged, otherwise states is not applied without animated theme\r\n        this._handleStates();\r\n        if (this.isDirty(\"tooltip\")) {\r\n            const previous = this._prevSettings.tooltip;\r\n            if (previous) {\r\n                previous.dispose();\r\n            }\r\n        }\r\n        if (this.isDirty(\"layer\") || this.isDirty(\"layerMargin\")) {\r\n            this._display.setLayer(this.get(\"layer\"), this.get(\"layerMargin\"));\r\n            this.markDirtyLayer();\r\n        }\r\n        if (this.isDirty(\"tooltipPosition\")) {\r\n            const tooltipMoveDp = this._tooltipMoveDp;\r\n            if (tooltipMoveDp) {\r\n                tooltipMoveDp.dispose();\r\n                this._tooltipMoveDp = undefined;\r\n            }\r\n            const tooltipPointerDp = this._tooltipPointerDp;\r\n            if (tooltipPointerDp) {\r\n                tooltipPointerDp.dispose();\r\n                this._tooltipPointerDp = undefined;\r\n            }\r\n            if (this.get(\"tooltipPosition\") == \"pointer\") {\r\n                if (this.isHover()) {\r\n                    this._tooltipMoveDp = this.events.on(\"globalpointermove\", (e) => {\r\n                        this.showTooltip(e.point);\r\n                    });\r\n                }\r\n                this._tooltipPointerDp = new MultiDisposer([\r\n                    this.events.on(\"pointerover\", () => {\r\n                        this._tooltipMoveDp = this.events.on(\"globalpointermove\", (e) => {\r\n                            this.showTooltip(e.point);\r\n                        });\r\n                    }),\r\n                    this.events.on(\"pointerout\", () => {\r\n                        const tooltipMoveDp = this._tooltipMoveDp;\r\n                        if (tooltipMoveDp) {\r\n                            tooltipMoveDp.dispose();\r\n                            this._tooltipMoveDp = undefined;\r\n                        }\r\n                    })\r\n                ]);\r\n            }\r\n        }\r\n    }\r\n    _handleStates() {\r\n        //if (!this._statesHandled) {\r\n        if (this.isDirty(\"active\")) {\r\n            if (this.get(\"active\")) {\r\n                this.states.applyAnimate(\"active\");\r\n                this.set(\"ariaChecked\", true);\r\n            }\r\n            else {\r\n                if (!this.isHidden()) {\r\n                    this.states.applyAnimate(\"default\");\r\n                }\r\n                this.set(\"ariaChecked\", false);\r\n            }\r\n            this.markDirtyAccessibility();\r\n        }\r\n        if (this.isDirty(\"disabled\")) {\r\n            if (this.get(\"disabled\")) {\r\n                this.states.applyAnimate(\"disabled\");\r\n                this.set(\"ariaChecked\", false);\r\n            }\r\n            else {\r\n                if (!this.isHidden()) {\r\n                    this.states.applyAnimate(\"default\");\r\n                }\r\n                this.set(\"ariaChecked\", true);\r\n            }\r\n            this.markDirtyAccessibility();\r\n        }\r\n        //\tthis._statesHandled = true;\r\n        //}\r\n    }\r\n    _changed() {\r\n        super._changed();\r\n        const display = this._display;\r\n        const events = this.events;\r\n        if (this.isDirty(\"draggable\")) {\r\n            const draggable = this.get(\"draggable\");\r\n            if (draggable) {\r\n                this.set(\"interactive\", true);\r\n                this._dragDp = new MultiDisposer([\r\n                    events.on(\"pointerdown\", (ev) => {\r\n                        this.dragStart(ev);\r\n                    }),\r\n                    events.on(\"globalpointermove\", (ev) => {\r\n                        this.dragMove(ev);\r\n                    }),\r\n                    events.on(\"globalpointerup\", (ev) => {\r\n                        this.dragStop(ev);\r\n                    })\r\n                ]);\r\n            }\r\n            else {\r\n                if (this._dragDp) {\r\n                    this._dragDp.dispose();\r\n                    this._dragDp = undefined;\r\n                }\r\n            }\r\n            display.cancelTouch = draggable ? true : false;\r\n        }\r\n        if (this.isDirty(\"tooltipText\") || this.isDirty(\"tooltipHTML\") || this.isDirty(\"showTooltipOn\")) {\r\n            const tooltipText = this.get(\"tooltipText\");\r\n            const tooltipHTML = this.get(\"tooltipHTML\");\r\n            const showTooltipOn = this.get(\"showTooltipOn\", \"hover\");\r\n            if (this._tooltipDp) {\r\n                this._tooltipDp.dispose();\r\n                this._tooltipDp = undefined;\r\n            }\r\n            if (tooltipText || tooltipHTML) {\r\n                if (showTooltipOn == \"click\") {\r\n                    this._tooltipDp = new MultiDisposer([\r\n                        events.on(\"click\", () => {\r\n                            this.setTimeout(() => {\r\n                                const tooltip = this.getTooltip();\r\n                                if (tooltip && !tooltip.isHidden() && tooltip.get(\"tooltipTarget\") === this) {\r\n                                    this.hideTooltip();\r\n                                }\r\n                                else {\r\n                                    this.showTooltip();\r\n                                }\r\n                            }, 10);\r\n                        }),\r\n                        $utils.addEventListener(document, \"click\", (_ev) => {\r\n                            this.hideTooltip();\r\n                        })\r\n                    ]);\r\n                    this._disposers.push(this._tooltipDp);\r\n                }\r\n                else if (showTooltipOn == \"always\") {\r\n                    // nothing\r\n                }\r\n                else {\r\n                    this._tooltipDp = new MultiDisposer([\r\n                        events.on(\"pointerover\", () => {\r\n                            this.showTooltip();\r\n                        }),\r\n                        events.on(\"pointerout\", () => {\r\n                            this.hideTooltip();\r\n                        })\r\n                    ]);\r\n                    this._disposers.push(this._tooltipDp);\r\n                }\r\n            }\r\n        }\r\n        if (this.isDirty(\"toggleKey\")) {\r\n            let toggleKey = this.get(\"toggleKey\");\r\n            if (toggleKey && toggleKey != \"none\") {\r\n                this._toggleDp = events.on(\"click\", () => {\r\n                    if (!this._isDragging) {\r\n                        this.set(toggleKey, !this.get(toggleKey));\r\n                    }\r\n                });\r\n            }\r\n            else {\r\n                if (this._toggleDp) {\r\n                    this._toggleDp.dispose();\r\n                    this._toggleDp = undefined;\r\n                }\r\n            }\r\n        }\r\n        if (this.isDirty(\"opacity\")) {\r\n            display.alpha = Math.max(0, this.get(\"opacity\", 1));\r\n            if (this.get(\"focusable\")) {\r\n                this.markDirtyAccessibility();\r\n            }\r\n        }\r\n        if (this.isDirty(\"rotation\")) {\r\n            this.markDirtyBounds();\r\n            display.angle = this.get(\"rotation\", 0);\r\n        }\r\n        if (this.isDirty(\"scale\")) {\r\n            this.markDirtyBounds();\r\n            display.scale = this.get(\"scale\", 0);\r\n        }\r\n        if (this.isDirty(\"centerX\") || this.isDirty(\"centerY\")) {\r\n            this.markDirtyBounds();\r\n            this.updatePivotPoint();\r\n        }\r\n        if (this.isDirty(\"visible\") || this.isPrivateDirty(\"visible\") || this.isDirty(\"forceHidden\")) {\r\n            if (!this.get(\"visible\") || !this.getPrivate(\"visible\") || this.get(\"forceHidden\")) {\r\n                display.visible = false;\r\n                this.hideTooltip();\r\n            }\r\n            else {\r\n                display.visible = true;\r\n            }\r\n            this.markDirtyBounds();\r\n            if (this.get(\"focusable\")) {\r\n                this.markDirtyAccessibility();\r\n            }\r\n        }\r\n        if (this.isDirty(\"width\") || this.isDirty(\"height\")) {\r\n            this.markDirtyBounds();\r\n            this._addPercentageSizeChildren();\r\n            const parent = this.parent;\r\n            if (parent) {\r\n                if ((this.isDirty(\"width\") && this.get(\"width\") instanceof Percent) || (this.isDirty(\"height\") && this.get(\"height\") instanceof Percent)) {\r\n                    parent.markDirty();\r\n                    parent._prevWidth = 0;\r\n                }\r\n            }\r\n            this._sizeDirty = true;\r\n        }\r\n        if (this.isDirty(\"maxWidth\") || this.isDirty(\"maxHeight\") || this.isPrivateDirty(\"width\") || this.isPrivateDirty(\"height\") || this.isDirty(\"minWidth\") || this.isDirty(\"minHeight\") || this.isPrivateDirty(\"maxWidth\") || this.isPrivateDirty(\"maxHeight\") || this.isPrivateDirty(\"minWidth\") || this.isPrivateDirty(\"minHeight\") || this.isDirty(\"marginLeft\") || this.isDirty(\"marginTop\") || this.isDirty(\"marginRight\") || this.isDirty(\"marginBottom\")) {\r\n            this.markDirtyBounds();\r\n            this._sizeDirty = true;\r\n        }\r\n        if (this._sizeDirty) {\r\n            this._updateSize();\r\n        }\r\n        if (this.isDirty(\"wheelable\")) {\r\n            const wheelable = this.get(\"wheelable\");\r\n            if (wheelable) {\r\n                this.set(\"interactive\", true);\r\n            }\r\n            display.wheelable = wheelable ? true : false;\r\n        }\r\n        // Accessibility\r\n        if (this.isDirty(\"tabindexOrder\") || this.isDirty(\"focusableGroup\")) {\r\n            if (this.get(\"focusable\")) {\r\n                this._root._registerTabindexOrder(this);\r\n            }\r\n            else {\r\n                this._root._unregisterTabindexOrder(this);\r\n            }\r\n        }\r\n        if (this.isDirty(\"filter\")) {\r\n            //this.markDirtyBounds();\r\n            display.filter = this.get(\"filter\");\r\n        }\r\n        let filter = this.get(\"filter\", \"\");\r\n        if (this.isDirty(\"blur\")) {\r\n            const blur = this.get(\"blur\", 0);\r\n            if (blur != 0) {\r\n                filter += \" blur(\" + blur + \"px)\";\r\n            }\r\n        }\r\n        if (this.isDirty(\"saturate\")) {\r\n            const saturate = this.get(\"saturate\", 1);\r\n            if (saturate != 1) {\r\n                filter += \" saturate(\" + saturate + \")\";\r\n            }\r\n        }\r\n        if (this.isDirty(\"brightness\")) {\r\n            const brightness = this.get(\"brightness\", 1);\r\n            if (brightness != 1) {\r\n                filter += \" brightness(\" + brightness + \")\";\r\n            }\r\n        }\r\n        if (this.isDirty(\"contrast\")) {\r\n            const contrast = this.get(\"contrast\", 1);\r\n            if (contrast != 1) {\r\n                filter += \" contrast(\" + contrast + \")\";\r\n            }\r\n        }\r\n        if (this.isDirty(\"sepia\")) {\r\n            const sepia = this.get(\"sepia\", 0);\r\n            if (sepia != 0) {\r\n                filter += \" sepia(\" + sepia + \")\";\r\n            }\r\n        }\r\n        if (this.isDirty(\"hue\")) {\r\n            const hue = this.get(\"hue\", 0);\r\n            if (hue != 0) {\r\n                filter += \" hue-rotate(\" + hue + \"deg)\";\r\n            }\r\n        }\r\n        if (this.isDirty(\"invert\")) {\r\n            const invert = this.get(\"invert\", 0);\r\n            if (invert != 0) {\r\n                filter += \" invert(\" + invert + \")\";\r\n            }\r\n        }\r\n        if (filter) {\r\n            display.filter = filter;\r\n        }\r\n        if (this.isDirty(\"cursorOverStyle\")) {\r\n            display.cursorOverStyle = this.get(\"cursorOverStyle\");\r\n        }\r\n        if (this.isDirty(\"hoverOnFocus\")) {\r\n            if (this.get(\"hoverOnFocus\")) {\r\n                this._focusDp = new MultiDisposer([\r\n                    events.on(\"focus\", () => {\r\n                        // TODO: proper hover, not just tooltip\r\n                        this.showTooltip();\r\n                    }),\r\n                    events.on(\"blur\", () => {\r\n                        // TODO: proper hover, not just tooltip\r\n                        this.hideTooltip();\r\n                    })\r\n                ]);\r\n            }\r\n            else {\r\n                if (this._focusDp) {\r\n                    this._focusDp.dispose();\r\n                    this._focusDp = undefined;\r\n                }\r\n            }\r\n        }\r\n        if (this.isDirty(\"focusable\")) {\r\n            if (this.get(\"focusable\")) {\r\n                this._root._registerTabindexOrder(this);\r\n            }\r\n            else {\r\n                this._root._unregisterTabindexOrder(this);\r\n            }\r\n            this.markDirtyAccessibility();\r\n            this._disposers.push(events.on(\"blur\", () => {\r\n                this.setPrivateRaw(\"touchHovering\", false);\r\n            }));\r\n            this._disposers.push(events.once(\"boundschanged\", () => {\r\n                // We might need to do this to re-evaluate accessibility attributes\r\n                // once the element gains size (bounds)\r\n                this.markDirtyAccessibility();\r\n            }));\r\n        }\r\n        if (this.isPrivateDirty(\"focusable\")) {\r\n            this.markDirtyAccessibility();\r\n        }\r\n        if (this.isDirty(\"role\") || this.isDirty(\"ariaLive\") || this.isDirty(\"ariaChecked\") || this.isDirty(\"ariaHidden\") || this.isDirty(\"ariaOrientation\") || this.isDirty(\"ariaValueNow\") || this.isDirty(\"ariaValueMin\") || this.isDirty(\"ariaValueMax\") || this.isDirty(\"ariaValueText\") || this.isDirty(\"ariaLabel\") || this.isDirty(\"ariaControls\")) {\r\n            // display.accessibility.ariaLabel = populateString(this, this.get(\"ariaLabel\", \"\"));\r\n            // @todo make sure ariaLabel gets populated in Root\r\n            this.markDirtyAccessibility();\r\n        }\r\n        if (this.isDirty(\"exportable\")) {\r\n            display.exportable = this.get(\"exportable\");\r\n        }\r\n        if (this.isDirty(\"interactive\")) {\r\n            const events = this.events;\r\n            if (this.get(\"interactive\") && !events.isDisposed()) {\r\n                this._hoverDp = new MultiDisposer([\r\n                    events.on(\"click\", (ev) => {\r\n                        if ($utils.isTouchEvent(ev.originalEvent)) {\r\n                            if (!this.getPrivate(\"touchHovering\")) {\r\n                                this.setTimeout(() => {\r\n                                    this._handleOver();\r\n                                    if (this.get(\"tooltipText\") || this.get(\"tooltipHTML\")) {\r\n                                        this.showTooltip();\r\n                                    }\r\n                                    this.setPrivateRaw(\"touchHovering\", true);\r\n                                    this.events.dispatch(\"pointerover\", {\r\n                                        type: \"pointerover\",\r\n                                        target: ev.target,\r\n                                        originalEvent: ev.originalEvent,\r\n                                        point: ev.point,\r\n                                        simulated: ev.simulated\r\n                                    });\r\n                                }, 10);\r\n                            }\r\n                        }\r\n                    }),\r\n                    events.on(\"globalpointerup\", (ev) => {\r\n                        if ($utils.isTouchEvent(ev.originalEvent)) {\r\n                            if (this.getPrivate(\"touchHovering\")) {\r\n                                this._handleOut();\r\n                                if (this.get(\"tooltipText\") || this.get(\"tooltipHTML\")) {\r\n                                    this.hideTooltip();\r\n                                }\r\n                                this.setPrivateRaw(\"touchHovering\", false);\r\n                                this.events.dispatch(\"pointerout\", {\r\n                                    type: \"pointerout\",\r\n                                    target: ev.target,\r\n                                    originalEvent: ev.originalEvent,\r\n                                    point: ev.point,\r\n                                    simulated: ev.simulated\r\n                                });\r\n                            }\r\n                        }\r\n                        if (this._isDown) {\r\n                            this._handleUp(ev);\r\n                        }\r\n                        //this._isDown = false;\r\n                    }),\r\n                    events.on(\"pointerover\", () => {\r\n                        this._handleOver();\r\n                    }),\r\n                    events.on(\"pointerout\", () => {\r\n                        this._handleOut();\r\n                    }),\r\n                    events.on(\"pointerdown\", (e) => {\r\n                        this._handleDown(e);\r\n                    })\r\n                ]);\r\n            }\r\n            else {\r\n                this._display.interactive = false;\r\n                if (this._hoverDp) {\r\n                    this._hoverDp.dispose();\r\n                    this._hoverDp = undefined;\r\n                }\r\n            }\r\n        }\r\n        if (this.isDirty(\"forceInactive\")) {\r\n            this._display.inactive = this.get(\"forceInactive\", null);\r\n        }\r\n        if (this.get(\"showTooltipOn\") == \"always\" && this._display.visible) {\r\n            this.showTooltip();\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     * @todo should this be user-accessible?\r\n     */\r\n    dragStart(e) {\r\n        this._dragEvent = e;\r\n        this.events.stopParentDispatch();\r\n    }\r\n    /**\r\n     * @ignore\r\n     * @todo should this be user-accessible?\r\n     */\r\n    dragStop(e) {\r\n        this._dragEvent = undefined;\r\n        this._dragPoint = undefined;\r\n        this.events.stopParentDispatch();\r\n        if (this._isDragging) {\r\n            this._isDragging = false;\r\n            const type = \"dragstop\";\r\n            if (this.events.isEnabled(type)) {\r\n                this.events.dispatch(type, {\r\n                    type: type,\r\n                    target: this,\r\n                    originalEvent: e.originalEvent,\r\n                    point: e.point,\r\n                    simulated: e.simulated,\r\n                });\r\n            }\r\n        }\r\n    }\r\n    _handleOver() {\r\n        if (!this.isHidden()) {\r\n            if (this.get(\"active\") && this.states.lookup(\"hoverActive\")) {\r\n                this.states.applyAnimate(\"hoverActive\");\r\n            }\r\n            else if (this.get(\"disabled\") && this.states.lookup(\"hoverDisabled\")) {\r\n                this.states.applyAnimate(\"hoverDisabled\");\r\n            }\r\n            else {\r\n                this.states.applyAnimate(\"hover\");\r\n            }\r\n            if (this.get(\"draggable\") && this._isDown && this.states.lookup(\"down\")) {\r\n                this.states.applyAnimate(\"down\");\r\n            }\r\n        }\r\n    }\r\n    _handleOut() {\r\n        if (!this.isHidden()) {\r\n            if (this.get(\"active\") && this.states.lookup(\"active\")) {\r\n                this.states.applyAnimate(\"active\");\r\n            }\r\n            else if (this.get(\"disabled\") && this.states.lookup(\"disabled\")) {\r\n                this.states.applyAnimate(\"disabled\");\r\n            }\r\n            else {\r\n                if (this.states.lookup(\"hover\") || this.states.lookup(\"hoverActive\")) {\r\n                    this.states.applyAnimate(\"default\");\r\n                }\r\n            }\r\n            if (this.get(\"draggable\") && this._isDown && this.states.lookup(\"down\")) {\r\n                this.states.applyAnimate(\"down\");\r\n            }\r\n        }\r\n    }\r\n    _handleUp(e) {\r\n        if (!this.isHidden()) {\r\n            if (this.get(\"active\") && this.states.lookup(\"active\")) {\r\n                this.states.applyAnimate(\"active\");\r\n            }\r\n            else if (this.get(\"disabled\") && this.states.lookup(\"disabled\")) {\r\n                this.states.applyAnimate(\"disabled\");\r\n            }\r\n            else if (this.states.lookup(\"down\")) {\r\n                if (this.isHover()) {\r\n                    this.states.applyAnimate(\"hover\");\r\n                }\r\n                else {\r\n                    this.states.applyAnimate(\"default\");\r\n                }\r\n            }\r\n            // @todo remove this once migrated to _downPoints\r\n            this._downPoint = undefined;\r\n            const pointerId = $utils.getPointerId(e.originalEvent);\r\n            delete this._downPoints[pointerId];\r\n            if ($object.keys(this._downPoints).length == 0) {\r\n                this._isDown = false;\r\n            }\r\n        }\r\n    }\r\n    _hasMoved(e) {\r\n        // @todo remove this once migrated to _downPoints\r\n        // if (this._downPoint) {\r\n        // \tconst x = Math.abs(this._downPoint.x - e.point.x);\r\n        // \tconst y = Math.abs(this._downPoint.y - e.point.y);\r\n        // \treturn (x > 5) || (y > 5);\r\n        // }\r\n        const pointerId = $utils.getPointerId(e.originalEvent);\r\n        const downPoint = this._downPoints[pointerId];\r\n        if (downPoint) {\r\n            const x = Math.abs(downPoint.x - e.point.x);\r\n            const y = Math.abs(downPoint.y - e.point.y);\r\n            return (x > 5) || (y > 5);\r\n        }\r\n        return false;\r\n    }\r\n    _hasDown() {\r\n        return $object.keys(this._downPoints).length > 0;\r\n    }\r\n    _handleDown(e) {\r\n        const parent = this.parent;\r\n        if (parent && !this.get(\"draggable\")) {\r\n            parent._handleDown(e);\r\n        }\r\n        if (this.get(\"interactive\") && !this.isHidden()) {\r\n            if (this.states.lookup(\"down\")) {\r\n                this.states.applyAnimate(\"down\");\r\n            }\r\n            this._downPoint = {\r\n                x: e.point.x,\r\n                y: e.point.y\r\n            };\r\n            // @todo remove this once migrated to _downPoints\r\n            this._isDown = true;\r\n            const pointerId = $utils.getPointerId(e.originalEvent);\r\n            this._downPoints[pointerId] = {\r\n                x: e.point.x,\r\n                y: e.point.y\r\n            };\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     * @todo should this be user-accessible?\r\n     */\r\n    dragMove(e) {\r\n        let dragEvent = this._dragEvent;\r\n        if (dragEvent) {\r\n            if (dragEvent.simulated && !e.simulated) {\r\n                return true;\r\n            }\r\n            let angle = 0;\r\n            let parent = this.parent;\r\n            let scale = 1;\r\n            while (parent != null) {\r\n                angle += parent.get(\"rotation\", 0);\r\n                parent = parent.parent;\r\n                if (parent) {\r\n                    scale *= parent.get(\"scale\", 1);\r\n                }\r\n            }\r\n            let x = (e.point.x - dragEvent.point.x) / scale;\r\n            let y = (e.point.y - dragEvent.point.y) / scale;\r\n            const events = this.events;\r\n            if (dragEvent.simulated && !this._isDragging) {\r\n                this._isDragging = true;\r\n                this._dragEvent = e;\r\n                this._dragPoint = {\r\n                    x: this.x(),\r\n                    y: this.y()\r\n                };\r\n                const type = \"dragstart\";\r\n                if (events.isEnabled(type)) {\r\n                    events.dispatch(type, {\r\n                        type: type,\r\n                        target: this,\r\n                        originalEvent: e.originalEvent,\r\n                        point: e.point,\r\n                        simulated: e.simulated,\r\n                    });\r\n                }\r\n            }\r\n            if (this._isDragging) {\r\n                let dragPoint = this._dragPoint;\r\n                this.set(\"x\", dragPoint.x + x * $math.cos(angle) + y * $math.sin(angle));\r\n                this.set(\"y\", dragPoint.y + y * $math.cos(angle) - x * $math.sin(angle));\r\n                const type = \"dragged\";\r\n                if (events.isEnabled(type)) {\r\n                    events.dispatch(type, {\r\n                        type: type,\r\n                        target: this,\r\n                        originalEvent: e.originalEvent,\r\n                        point: e.point,\r\n                        simulated: e.simulated,\r\n                    });\r\n                }\r\n            }\r\n            else {\r\n                if (Math.hypot(x, y) > 5) {\r\n                    this._isDragging = true;\r\n                    this._dragEvent = e;\r\n                    this._dragPoint = {\r\n                        x: this.x(),\r\n                        y: this.y()\r\n                    };\r\n                    const type = \"dragstart\";\r\n                    if (events.isEnabled(type)) {\r\n                        events.dispatch(type, {\r\n                            type: type,\r\n                            target: this,\r\n                            originalEvent: e.originalEvent,\r\n                            point: e.point,\r\n                            simulated: e.simulated\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    _updateSize() {\r\n    }\r\n    _getBounds() {\r\n        this._localBounds = this._display.getLocalBounds();\r\n    }\r\n    /**\r\n     * Returns depth (how deep in the hierachy of the content tree) of this\r\n     * element.\r\n     *\r\n     * @return Depth\r\n     */\r\n    depth() {\r\n        let self = this.parent;\r\n        let depth = 0;\r\n        while (true) {\r\n            if (self) {\r\n                ++depth;\r\n                self = self.parent;\r\n            }\r\n            else {\r\n                return depth;\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    markDirtySize() {\r\n        this._sizeDirty = true;\r\n        this.markDirty();\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    markDirtyBounds() {\r\n        const display = this._display;\r\n        if (this.get(\"isMeasured\")) {\r\n            this._root._addDirtyBounds(this);\r\n            display.isMeasured = true;\r\n            display.invalidateBounds();\r\n            const parent = this.parent;\r\n            if (parent && this.get(\"position\") != \"absolute\") {\r\n                if (parent.get(\"width\") == null || parent.get(\"height\") == null || parent.get(\"layout\")) {\r\n                    parent.markDirtyBounds();\r\n                }\r\n            }\r\n            if (this.get(\"focusable\")) {\r\n                this.markDirtyAccessibility();\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    markDirtyAccessibility() {\r\n        //if (this._root.focused(this)) {\r\n        this._root._invalidateAccessibility(this);\r\n        //}\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    markDirtyLayer() {\r\n        //this._display.markDirtyLayer(this.isDirty(\"opacity\") || this.isDirty(\"visible\")); https://codepen.io/team/amcharts/pen/gOWZPmP <- problems\r\n        this._display.markDirtyLayer(true);\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    markDirty() {\r\n        super.markDirty();\r\n        this.markDirtyLayer();\r\n    }\r\n    _updateBounds() {\r\n        const oldBounds = this._adjustedLocalBounds;\r\n        let newBounds;\r\n        // if display.visible == false, it still returns bounds\r\n        if (!this.get(\"visible\") || !this.getPrivate(\"visible\") || this.get(\"forceHidden\")) {\r\n            newBounds = {\r\n                left: 0,\r\n                right: 0,\r\n                top: 0,\r\n                bottom: 0\r\n            };\r\n            this._localBounds = newBounds;\r\n            this._adjustedLocalBounds = newBounds;\r\n        }\r\n        else {\r\n            this._getBounds();\r\n            this._fixMinBounds(this._localBounds);\r\n            this.updatePivotPoint();\r\n            this._adjustedLocalBounds = this._display.getAdjustedBounds(this._localBounds);\r\n            newBounds = this._adjustedLocalBounds;\r\n        }\r\n        if (!oldBounds || (oldBounds.left !== newBounds.left || oldBounds.top !== newBounds.top || oldBounds.right !== newBounds.right || oldBounds.bottom !== newBounds.bottom)) {\r\n            const eventType = \"boundschanged\";\r\n            if (this.events.isEnabled(eventType)) {\r\n                this.events.dispatch(eventType, { type: eventType, target: this });\r\n            }\r\n            if (this.parent) {\r\n                this.parent.markDirty();\r\n                this.parent.markDirtyBounds();\r\n            }\r\n            // Update tooltip position together with the Sprite\r\n            if (this.getPrivate(\"showingTooltip\")) {\r\n                this.showTooltip();\r\n            }\r\n        }\r\n    }\r\n    _fixMinBounds(bounds) {\r\n        let minWidth = this.get(\"minWidth\", this.getPrivate(\"minWidth\"));\r\n        let minHeight = this.get(\"minHeight\", this.getPrivate(\"minHeight\"));\r\n        if ($type.isNumber(minWidth)) {\r\n            if (bounds.right - bounds.left < minWidth) {\r\n                bounds.right = bounds.left + minWidth;\r\n            }\r\n        }\r\n        if ($type.isNumber(minHeight)) {\r\n            if (bounds.bottom - bounds.top < minHeight) {\r\n                bounds.bottom = bounds.top + minHeight;\r\n            }\r\n        }\r\n        let privateWidth = this.getPrivate(\"width\");\r\n        let privateHeight = this.getPrivate(\"height\");\r\n        if ($type.isNumber(privateWidth)) {\r\n            if (privateWidth > 0) {\r\n                bounds.right = bounds.left + privateWidth;\r\n            }\r\n            else {\r\n                bounds.left = bounds.right + privateWidth;\r\n            }\r\n        }\r\n        if ($type.isNumber(privateHeight)) {\r\n            if (privateHeight > 0) {\r\n                bounds.bottom = bounds.top + privateHeight;\r\n            }\r\n            else {\r\n                bounds.top = bounds.bottom + privateHeight;\r\n            }\r\n        }\r\n    }\r\n    _removeParent(parent) {\r\n        if (parent) {\r\n            parent.children.removeValue(this);\r\n            $array.removeFirst(parent._percentageSizeChildren, this);\r\n            $array.removeFirst(parent._percentagePositionChildren, this);\r\n        }\r\n    }\r\n    _clearDirty() {\r\n        super._clearDirty();\r\n        this._sizeDirty = false;\r\n        //this._statesHandled = false;\r\n    }\r\n    /**\r\n     * Simulate hover over element.\r\n     */\r\n    hover() {\r\n        if (!this.isDisposed()) {\r\n            this.showTooltip();\r\n            this._handleOver();\r\n        }\r\n    }\r\n    /**\r\n     * Simulate unhover over element.\r\n     */\r\n    unhover() {\r\n        if (!this.isDisposed()) {\r\n            this.hideTooltip();\r\n            this._handleOut();\r\n        }\r\n    }\r\n    /**\r\n     * Shows element's [[Tooltip]].\r\n     */\r\n    showTooltip(point) {\r\n        if (!this.isDisposed()) {\r\n            const tooltip = this.getTooltip();\r\n            const tooltipText = this.get(\"tooltipText\");\r\n            const tooltipHTML = this.get(\"tooltipHTML\");\r\n            if ((tooltipText || tooltipHTML) && tooltip) {\r\n                const tooltipPosition = this.get(\"tooltipPosition\");\r\n                const tooltipTarget = this.getPrivate(\"tooltipTarget\", this);\r\n                if (tooltipPosition == \"fixed\" || !point) {\r\n                    this._display._setMatrix();\r\n                    point = this.toGlobal(tooltipTarget._getTooltipPoint());\r\n                }\r\n                if (tooltipPosition == \"pointer\") {\r\n                    const lastTooltipCoords = this.getPrivate(\"lastTooltipCoords\");\r\n                    if (lastTooltipCoords && lastTooltipCoords.x == point.x && lastTooltipCoords.y == point.y) {\r\n                        return;\r\n                    }\r\n                    else {\r\n                        this.setPrivate(\"lastTooltipCoords\", point);\r\n                    }\r\n                }\r\n                tooltip.set(\"pointTo\", point);\r\n                tooltip.set(\"tooltipTarget\", tooltipTarget);\r\n                if (!tooltip.get(\"x\")) {\r\n                    tooltip.set(\"x\", point.x);\r\n                }\r\n                if (!tooltip.get(\"y\")) {\r\n                    tooltip.set(\"y\", point.y);\r\n                }\r\n                if (tooltipText) {\r\n                    tooltip.label.set(\"text\", tooltipText);\r\n                }\r\n                if (tooltipHTML) {\r\n                    tooltip.label.set(\"html\", tooltipHTML);\r\n                }\r\n                const dataItem = this.dataItem;\r\n                if (dataItem) {\r\n                    tooltip.label._setDataItem(dataItem);\r\n                }\r\n                if (this.get(\"showTooltipOn\") == \"always\" && (point.x < 0 || point.x > this._root.width() || point.y < 0 || point.y > this._root.height())) {\r\n                    this.hideTooltip();\r\n                    return;\r\n                }\r\n                tooltip.label.text.markDirtyText();\r\n                const promise = tooltip.show();\r\n                this.setPrivateRaw(\"showingTooltip\", true);\r\n                return promise;\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Hides element's [[Tooltip]].\r\n     */\r\n    hideTooltip() {\r\n        const tooltip = this.getTooltip();\r\n        if (tooltip) {\r\n            this.removePrivate(\"lastTooltipCoords\");\r\n            if (tooltip.get(\"tooltipTarget\") == this.getPrivate(\"tooltipTarget\", this) || this.get(\"tooltip\") == tooltip) {\r\n                let timeout = tooltip.get(\"keepTargetHover\") && tooltip.get(\"stateAnimationDuration\", 0) == 0 ? 400 : undefined;\r\n                const promise = tooltip.hide(timeout);\r\n                this.setPrivateRaw(\"showingTooltip\", false);\r\n                return promise;\r\n            }\r\n        }\r\n    }\r\n    _getTooltipPoint() {\r\n        const bounds = this._localBounds;\r\n        if (bounds) {\r\n            let x = 0;\r\n            let y = 0;\r\n            if (!this.get(\"isMeasured\")) {\r\n                x = $utils.relativeToValue(this.get(\"tooltipX\", 0), this.width());\r\n                y = $utils.relativeToValue(this.get(\"tooltipY\", 0), this.height());\r\n            }\r\n            else {\r\n                x = bounds.left + $utils.relativeToValue(this.get(\"tooltipX\", 0), bounds.right - bounds.left);\r\n                y = bounds.top + $utils.relativeToValue(this.get(\"tooltipY\", 0), bounds.bottom - bounds.top);\r\n            }\r\n            return { x, y };\r\n        }\r\n        return { x: 0, y: 0 };\r\n    }\r\n    /**\r\n     * Returns [[Tooltip]] used for this element.\r\n     *\r\n     * @return Tooltip\r\n     */\r\n    getTooltip() {\r\n        let tooltip = this.get(\"tooltip\");\r\n        if (!tooltip) {\r\n            let parent = this.parent;\r\n            if (parent) {\r\n                return parent.getTooltip();\r\n            }\r\n        }\r\n        else {\r\n            return tooltip;\r\n        }\r\n    }\r\n    _updatePosition() {\r\n        const parent = this.parent;\r\n        let dx = this.get(\"dx\", 0);\r\n        let dy = this.get(\"dy\", 0);\r\n        let x = this.get(\"x\");\r\n        let _x = this.getPrivate(\"x\");\r\n        let xx = 0;\r\n        let yy = 0;\r\n        const position = this.get(\"position\");\r\n        if (x instanceof Percent) {\r\n            if (parent) {\r\n                x = parent.innerWidth() * x.value + parent.get(\"paddingLeft\", 0);\r\n            }\r\n            else {\r\n                x = 0;\r\n            }\r\n        }\r\n        if ($type.isNumber(x)) {\r\n            xx = x + dx;\r\n        }\r\n        else {\r\n            if (_x != null) {\r\n                xx = _x;\r\n            }\r\n            else if (parent) {\r\n                if (position == \"relative\") {\r\n                    xx = parent.get(\"paddingLeft\", 0) + dx;\r\n                }\r\n            }\r\n        }\r\n        let y = this.get(\"y\");\r\n        let _y = this.getPrivate(\"y\");\r\n        if (y instanceof Percent) {\r\n            if (parent) {\r\n                y = parent.innerHeight() * y.value + parent.get(\"paddingTop\", 0);\r\n            }\r\n            else {\r\n                y = 0;\r\n            }\r\n        }\r\n        if ($type.isNumber(y)) {\r\n            yy = y + dy;\r\n        }\r\n        else {\r\n            if (_y != null) {\r\n                yy = _y;\r\n            }\r\n            else if (parent) {\r\n                if (position == \"relative\") {\r\n                    yy = parent.get(\"paddingTop\", 0) + dy;\r\n                }\r\n            }\r\n        }\r\n        const display = this._display;\r\n        if (display.x != xx || display.y != yy) {\r\n            display.invalidateBounds();\r\n            display.x = xx;\r\n            display.y = yy;\r\n            const eventType = \"positionchanged\";\r\n            if (this.events.isEnabled(eventType)) {\r\n                this.events.dispatch(eventType, { type: eventType, target: this });\r\n            }\r\n        }\r\n        // Update tooltip position together with the Sprite\r\n        if (this.getPrivate(\"showingTooltip\")) {\r\n            this.showTooltip();\r\n        }\r\n    }\r\n    /**\r\n     * Returns element's actual X position in pixels.\r\n     *\r\n     * @return X (px)\r\n     */\r\n    x() {\r\n        let x = this.get(\"x\");\r\n        let _x = this.getPrivate(\"x\");\r\n        const parent = this.parent;\r\n        if (parent) {\r\n            if (x instanceof Percent) {\r\n                return $utils.relativeToValue(x, parent.innerWidth()) + parent.get(\"paddingLeft\", 0);\r\n            }\r\n            else {\r\n                if (!$type.isNumber(x)) {\r\n                    if (_x != null) {\r\n                        return _x;\r\n                    }\r\n                    else {\r\n                        return parent.get(\"paddingLeft\", this._display.x);\r\n                    }\r\n                }\r\n                else {\r\n                    return x;\r\n                }\r\n            }\r\n        }\r\n        return this._display.x;\r\n    }\r\n    /**\r\n     * Returns element's actual Y position in pixels.\r\n     *\r\n     * @return Y (px)\r\n     */\r\n    y() {\r\n        let _y = this.getPrivate(\"y\");\r\n        if (_y != null) {\r\n            return _y;\r\n        }\r\n        let y = this.get(\"y\");\r\n        const parent = this.parent;\r\n        if (parent) {\r\n            if (y instanceof Percent) {\r\n                return $utils.relativeToValue(y, parent.innerHeight()) + parent.get(\"paddingTop\", 0);\r\n            }\r\n            else {\r\n                if (!$type.isNumber(y)) {\r\n                    if (_y != null) {\r\n                        return _y;\r\n                    }\r\n                    else {\r\n                        return parent.get(\"paddingTop\", this._display.y);\r\n                    }\r\n                }\r\n                else {\r\n                    return y;\r\n                }\r\n            }\r\n        }\r\n        return this._display.y;\r\n    }\r\n    _dispose() {\r\n        super._dispose();\r\n        this._display.dispose();\r\n        this._removeTemplateField();\r\n        this._removeParent(this.parent);\r\n        this._root._removeFocusElement(this);\r\n        const tooltip = this.get(\"tooltip\");\r\n        if (tooltip) {\r\n            tooltip.dispose();\r\n        }\r\n        this.markDirty();\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    adjustedLocalBounds() {\r\n        this._fixMinBounds(this._adjustedLocalBounds);\r\n        return this._adjustedLocalBounds;\r\n    }\r\n    /**\r\n     * Returns local coordinates of the element's bounds.\r\n     *\r\n     * @ignore\r\n     * @return Global bounds\r\n     */\r\n    localBounds() {\r\n        return this._localBounds;\r\n    }\r\n    /**\r\n     * Returns adjusted local coordinates of the element's bounds.\r\n     *\r\n     * @ignore\r\n     * @return Global bounds\r\n     */\r\n    bounds() {\r\n        const bounds = this._adjustedLocalBounds;\r\n        const x = this.x();\r\n        const y = this.y();\r\n        return { left: bounds.left + x, right: bounds.right + x, top: bounds.top + y, bottom: bounds.bottom + y };\r\n    }\r\n    /**\r\n     * Returns global coordinates of the element's bounds.\r\n     *\r\n     * @ignore\r\n     * @return Global bounds\r\n     */\r\n    globalBounds() {\r\n        const bounds = this.localBounds();\r\n        const p0 = this.toGlobal({ x: bounds.left, y: bounds.top });\r\n        const p1 = this.toGlobal({ x: bounds.right, y: bounds.top });\r\n        const p2 = this.toGlobal({ x: bounds.right, y: bounds.bottom });\r\n        const p3 = this.toGlobal({ x: bounds.left, y: bounds.bottom });\r\n        return {\r\n            left: Math.min(p0.x, p1.x, p2.x, p3.x),\r\n            top: Math.min(p0.y, p1.y, p2.y, p3.y),\r\n            right: Math.max(p0.x, p1.x, p2.x, p3.x),\r\n            bottom: Math.max(p0.y, p1.y, p2.y, p3.y)\r\n        };\r\n    }\r\n    _onShow(_duration) {\r\n    }\r\n    _onHide(_duration) {\r\n    }\r\n    /**\r\n     * Plays initial reveal animation regardless if element is currently hidden\r\n     * or visible.\r\n     *\r\n     * @param   duration  Duration of the animation in milliseconds\r\n     * @param   delay     Delay showing of the element by X milliseconds\r\n     * @return            Promise\r\n     */\r\n    appear(duration, delay) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            yield this.hide(0);\r\n            if (delay) {\r\n                return new Promise((success, _error) => {\r\n                    this.setTimeout(() => {\r\n                        success(this.show(duration));\r\n                    }, delay);\r\n                });\r\n            }\r\n            else {\r\n                return this.show(duration);\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Shows currently hidden element and returns a `Promise` which completes\r\n     * when all showing animations are finished.\r\n     *\r\n     * ```TypeScript\r\n     * series.show().then(function(ev) {\r\n     *   console.log(\"Series is now fully visible\");\r\n     * })\r\n     * ```\r\n     * ```JavaScript\r\n     * series.show().then(function(ev) {\r\n     *   console.log(\"Series is now fully visible\");\r\n     * })\r\n     * ```\r\n     *\r\n     * @return Promise\r\n     */\r\n    show(duration) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!this._isShowing) {\r\n                this._isHidden = false;\r\n                this._isShowing = true;\r\n                this._isHiding = false;\r\n                if (this.states.lookup(\"default\").get(\"visible\")) {\r\n                    this.set(\"visible\", true);\r\n                }\r\n                this._onShow(duration);\r\n                const animations = this.states.applyAnimate(\"default\", duration);\r\n                yield waitForAnimations(animations);\r\n                this._isShowing = false;\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Hides the element and returns a `Promise` which completes when all hiding\r\n     * animations are finished.\r\n     *\r\n     * ```TypeScript\r\n     * series.hide().then(function(ev) {\r\n     *   console.log(\"Series finished hiding\");\r\n     * })\r\n     * ```\r\n     * ```JavaScript\r\n     * series.hide().then(function(ev) {\r\n     *   console.log(\"Series finished hiding\");\r\n     * })\r\n     * ```\r\n     *\r\n     * @return Promise\r\n     */\r\n    hide(duration) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!this._isHiding && !this._isHidden) {\r\n                this._isHiding = true;\r\n                this._isShowing = false;\r\n                let state = this.states.lookup(\"hidden\");\r\n                if (!state) {\r\n                    state = this.states.create(\"hidden\", {\r\n                        \"opacity\": 0,\r\n                        \"visible\": false\r\n                    });\r\n                }\r\n                this._isHidden = true;\r\n                this._onHide(duration);\r\n                const animations = this.states.applyAnimate(\"hidden\", duration);\r\n                yield waitForAnimations(animations);\r\n                this._isHiding = false;\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Returns `true` if this element is currently hidden.\r\n     *\r\n     * @return Is hidden?\r\n     */\r\n    isHidden() {\r\n        return this._isHidden;\r\n    }\r\n    /**\r\n     * Returns `true` if this element is currently animating to a default state.\r\n     *\r\n     * @return Is showing?\r\n     */\r\n    isShowing() {\r\n        return this._isShowing;\r\n    }\r\n    /**\r\n     * Returns `true` if this element is currently animating to a hidden state.\r\n     *\r\n     * @return Is hiding?\r\n     */\r\n    isHiding() {\r\n        return this._isHiding;\r\n    }\r\n    /**\r\n     * Returns `true` if this element is currently hovered by a pointer.\r\n     *\r\n     * @return Is hovered?\r\n     */\r\n    isHover() {\r\n        return this._display.hovering();\r\n    }\r\n    /**\r\n     * Returns `true` if this element does currently have focus.\r\n     *\r\n     * @return Is focused?\r\n     */\r\n    isFocus() {\r\n        return this._root.focused(this);\r\n    }\r\n    /**\r\n     * Returns `true` if this element is currently being dragged.\r\n     *\r\n     * @return Is dragged?\r\n     */\r\n    isDragging() {\r\n        return this._isDragging;\r\n    }\r\n    /**\r\n     * Returns `false` if if either public or private setting `visible` is set\r\n     * to `false`, or `forceHidden` is set to `true`.\r\n     *\r\n     * @return Visible?\r\n     */\r\n    isVisible() {\r\n        if (this.get(\"visible\") && this.getPrivate(\"visible\") && !this.get(\"forceHidden\")) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    /**\r\n     * Same as `isVisible()`, except it checks all ascendants, too.\r\n     *\r\n     * @since 5.2.7\r\n     * @return Visible?\r\n     */\r\n    isVisibleDeep() {\r\n        return this._parent ? (this._parent.isVisibleDeep() && this.isVisible()) : this.isVisible();\r\n    }\r\n    /**\r\n     * Returns an actual opacity of the element, taking into account all parents.\r\n     *\r\n     * @return Opacity\r\n     * @since 5.2.11\r\n     */\r\n    compositeOpacity() {\r\n        const opacity = this.get(\"opacity\", 1);\r\n        return this._parent ? (this._parent.compositeOpacity() * opacity) : opacity;\r\n    }\r\n    /**\r\n     * Returns an actual scale of the element, taking into account all parents.\r\n     *\r\n     * @return Opacity\r\n     * @since 5.9.2\r\n     */\r\n    compositeScale() {\r\n        const scale = this.get(\"scale\", 1);\r\n        return this._parent ? (this._parent.compositeScale() * scale) : scale;\r\n    }\r\n    /**\r\n     * Returns an actual roation of the element, taking into account all parents.\r\n     *\r\n     * @return Opacity\r\n     * @since 5.9.2\r\n     */\r\n    compositeRotation() {\r\n        const rotation = this.get(\"rotation\", 0);\r\n        return this._parent ? (this._parent.compositeRotation() + rotation) : rotation;\r\n    }\r\n    /**\r\n     * Returns width of this element in pixels.\r\n     *\r\n     * @return Width (px)\r\n     */\r\n    width() {\r\n        let width = this.get(\"width\");\r\n        let maxWidth = this.get(\"maxWidth\", this.getPrivate(\"maxWidth\"));\r\n        let minWidth = this.get(\"minWidth\", this.getPrivate(\"minWidth\"));\r\n        let privateWidth = this.getPrivate(\"width\");\r\n        let w = 0;\r\n        if ($type.isNumber(privateWidth)) {\r\n            w = privateWidth;\r\n        }\r\n        else {\r\n            if (width == null) {\r\n                if (this._adjustedLocalBounds) {\r\n                    w = this._adjustedLocalBounds.right - this._adjustedLocalBounds.left;\r\n                }\r\n            }\r\n            else {\r\n                if (width instanceof Percent) {\r\n                    const parent = this.parent;\r\n                    if (parent) {\r\n                        w = parent.innerWidth() * width.value;\r\n                    }\r\n                    else {\r\n                        w = this._root.width() * width.value;\r\n                    }\r\n                }\r\n                else if ($type.isNumber(width)) {\r\n                    w = width;\r\n                }\r\n            }\r\n        }\r\n        if ($type.isNumber(minWidth)) {\r\n            w = Math.max(minWidth, w);\r\n        }\r\n        if ($type.isNumber(maxWidth)) {\r\n            w = Math.min(maxWidth, w);\r\n        }\r\n        return w;\r\n    }\r\n    /**\r\n     * Returns maximum allowed width of this element in pixels.\r\n     *\r\n     * @return Maximum width (px)\r\n     */\r\n    maxWidth() {\r\n        let maxWidth = this.get(\"maxWidth\", this.getPrivate(\"maxWidth\"));\r\n        if ($type.isNumber(maxWidth)) {\r\n            return maxWidth;\r\n        }\r\n        else {\r\n            let width = this.get(\"width\");\r\n            if ($type.isNumber(width)) {\r\n                return width;\r\n            }\r\n        }\r\n        const parent = this.parent;\r\n        if (parent) {\r\n            return parent.innerWidth();\r\n        }\r\n        return this._root.width();\r\n    }\r\n    /**\r\n     * Returns maximum allowed height of this element in pixels.\r\n     *\r\n     * @return Maximum height (px)\r\n     */\r\n    maxHeight() {\r\n        let maxHeight = this.get(\"maxHeight\", this.getPrivate(\"maxHeight\"));\r\n        if ($type.isNumber(maxHeight)) {\r\n            return maxHeight;\r\n        }\r\n        else {\r\n            let height = this.get(\"height\");\r\n            if ($type.isNumber(height)) {\r\n                return height;\r\n            }\r\n        }\r\n        const parent = this.parent;\r\n        if (parent) {\r\n            return parent.innerHeight();\r\n        }\r\n        return this._root.height();\r\n    }\r\n    /**\r\n     * Returns height of this element in pixels.\r\n     *\r\n     * @return Height (px)\r\n     */\r\n    height() {\r\n        let height = this.get(\"height\");\r\n        let maxHeight = this.get(\"maxHeight\", this.getPrivate(\"maxHeight\"));\r\n        let minHeight = this.get(\"minHeight\", this.getPrivate(\"minHeight\"));\r\n        let privateHeight = this.getPrivate(\"height\");\r\n        let h = 0;\r\n        if ($type.isNumber(privateHeight)) {\r\n            h = privateHeight;\r\n        }\r\n        else {\r\n            if (height == null) {\r\n                if (this._adjustedLocalBounds) {\r\n                    h = this._adjustedLocalBounds.bottom - this._adjustedLocalBounds.top;\r\n                }\r\n            }\r\n            else {\r\n                if (height instanceof Percent) {\r\n                    const parent = this.parent;\r\n                    if (parent) {\r\n                        h = parent.innerHeight() * height.value;\r\n                    }\r\n                    else {\r\n                        h = this._root.height() * height.value;\r\n                    }\r\n                }\r\n                else if ($type.isNumber(height)) {\r\n                    h = height;\r\n                }\r\n            }\r\n        }\r\n        if ($type.isNumber(minHeight)) {\r\n            h = Math.max(minHeight, h);\r\n        }\r\n        if ($type.isNumber(maxHeight)) {\r\n            h = Math.min(maxHeight, h);\r\n        }\r\n        return h;\r\n    }\r\n    _findStaticTemplate(f) {\r\n        // templateField overrides template\r\n        if (this._templateField && f(this._templateField)) {\r\n            return this._templateField;\r\n        }\r\n        return super._findStaticTemplate(f);\r\n    }\r\n    _walkParents(f) {\r\n        if (this._parent || this._virtualParent) {\r\n            this._walkParent(f);\r\n        }\r\n    }\r\n    _walkParent(f) {\r\n        if (this._parent) {\r\n            this._parent._walkParent(f);\r\n        }\r\n        else {\r\n            if (this._virtualParent) {\r\n                this._virtualParent._walkParent(f);\r\n            }\r\n        }\r\n        f(this);\r\n    }\r\n    set virtualParent(parent) {\r\n        this._virtualParent = parent;\r\n        this._applyThemes();\r\n    }\r\n    /**\r\n     * Parent [[Container]] of this element.\r\n     *\r\n     * @return Parent container\r\n     */\r\n    get parent() {\r\n        return this._parent;\r\n    }\r\n    _setParent(parent, updateChildren = false) {\r\n        const prevParent = this._parent;\r\n        if (parent !== prevParent) {\r\n            this.markDirtyBounds();\r\n            parent.markDirty();\r\n            this._parent = parent;\r\n            if (updateChildren) {\r\n                this._removeParent(prevParent);\r\n                if (parent) {\r\n                    this._addPercentageSizeChildren();\r\n                    this._addPercentagePositionChildren();\r\n                }\r\n            }\r\n            this.markDirtyPosition();\r\n            this._applyThemes();\r\n        }\r\n    }\r\n    /**\r\n     * Returns an instance of [[NumberFormatter]] used in this element.\r\n     *\r\n     * If this element does not have it set, global one form [[Root]] is used.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/using-formatters/} for more info\r\n     * @return NumberFormatter instace\r\n     */\r\n    getNumberFormatter() {\r\n        return this.get(\"numberFormatter\", this._root.numberFormatter);\r\n    }\r\n    /**\r\n     * Returns an instance of [[DateFormatter]] used in this element.\r\n     *\r\n     * If this element does not have it set, global one form [[Root]] is used.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/using-formatters/} for more info\r\n     * @return DateFormatter instace\r\n     */\r\n    getDateFormatter() {\r\n        return this.get(\"dateFormatter\", this._root.dateFormatter);\r\n    }\r\n    /**\r\n     * Returns an instance of [[DurationFormatter]] used in this element.\r\n     *\r\n     * If this element does not have it set, global one form [[Root]] is used.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/using-formatters/} for more info\r\n     * @return DurationFormatter instace\r\n     */\r\n    getDurationFormatter() {\r\n        return this.get(\"durationFormatter\", this._root.durationFormatter);\r\n    }\r\n    /**\r\n     * Converts X/Y coordinate within this element to a global coordinate.\r\n     *\r\n     * @param  point  Local coordinate\r\n     * @return        Global coordinate\r\n     */\r\n    toGlobal(point) {\r\n        return this._display.toGlobal(point);\r\n    }\r\n    /**\r\n     * Converts global X/Y coordinate to a coordinate within this element.\r\n     *\r\n     * @param  point  Global coordinate\r\n     * @return        Local coordinate\r\n     */\r\n    toLocal(point) {\r\n        return this._display.toLocal(point);\r\n    }\r\n    _getDownPoint() {\r\n        const id = this._getDownPointId();\r\n        if (id) {\r\n            return this._downPoints[id];\r\n        }\r\n    }\r\n    _getDownPointId() {\r\n        if (this._downPoints) {\r\n            return $object.keysOrdered(this._downPoints, (a, b) => {\r\n                if (a > b) {\r\n                    return 1;\r\n                }\r\n                if (a < b) {\r\n                    return -1;\r\n                }\r\n                return 0;\r\n            })[0];\r\n        }\r\n    }\r\n    /**\r\n     * Moves sprite to the end of the parent's children array.\r\n     *\r\n     * Depending on `layout` setting of the parten container, it may effect the\r\n     * positioning or overlapping order of the elements.\r\n     */\r\n    toFront() {\r\n        const parent = this.parent;\r\n        if (parent) {\r\n            parent.children.moveValue(this, parent.children.length - 1);\r\n        }\r\n    }\r\n    /**\r\n     * Moves sprite to the beginning of the parent's children array.\r\n     *\r\n     * Depending on `layout` setting of the parten container, it may effect the\r\n     * positioning or overlapping order of the elements.\r\n     */\r\n    toBack() {\r\n        const parent = this.parent;\r\n        if (parent) {\r\n            parent.children.moveValue(this, 0);\r\n        }\r\n    }\r\n}\r\nObject.defineProperty(Sprite, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"Sprite\"\r\n});\r\nObject.defineProperty(Sprite, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Entity.classNames.concat([Sprite.className])\r\n});\r\n//# sourceMappingURL=Sprite.js.map","import { Entity } from \"../../util/Entity\";\r\n/**\r\n * Base class for patterns.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/colors-gradients-and-patterns/patterns/} for more info\r\n */\r\nexport class Pattern extends Entity {\r\n    constructor() {\r\n        super(...arguments);\r\n        Object.defineProperty(this, \"_display\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this._root._renderer.makeGraphics()\r\n        });\r\n        Object.defineProperty(this, \"_backgroundDisplay\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this._root._renderer.makeGraphics()\r\n        });\r\n        Object.defineProperty(this, \"_clear\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_pattern\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n    }\r\n    _afterNew() {\r\n        // Applying themes because pattern will not have parent\r\n        super._afterNewApplyThemes();\r\n    }\r\n    get pattern() {\r\n        return this._pattern;\r\n    }\r\n    _draw() { }\r\n    _beforeChanged() {\r\n        super._beforeChanged();\r\n        if (this.isDirty(\"repetition\") || this.isDirty(\"width\") || this.isDirty(\"height\") || this.isDirty(\"rotation\") || this.isDirty(\"strokeWidth\") || this.isDirty(\"strokeDasharray\") || this.isDirty(\"strokeDashoffset\") || this.isDirty(\"colorOpacity\") || this.isDirty(\"fillOpacity\")) {\r\n            this._clear = true;\r\n        }\r\n        this._checkDirtyFill();\r\n    }\r\n    _checkDirtyFill() {\r\n        if (this.isDirty(\"color\") || this.isDirty(\"fill\")) {\r\n            this._clear = true;\r\n        }\r\n    }\r\n    _changed() {\r\n        super._changed();\r\n        if (this._clear) {\r\n            const repetition = this.get(\"repetition\", \"\");\r\n            const width = this.get(\"width\", 100);\r\n            const height = this.get(\"height\", 100);\r\n            const fill = this.get(\"fill\");\r\n            const fillOpacity = this.get(\"fillOpacity\", 1);\r\n            const backgroundDisplay = this._backgroundDisplay;\r\n            const display = this._display;\r\n            display.clear();\r\n            backgroundDisplay.clear();\r\n            if (fill && (fillOpacity > 0)) {\r\n                backgroundDisplay.beginFill(fill, fillOpacity);\r\n                backgroundDisplay.drawRect(0, 0, width, height);\r\n                backgroundDisplay.endFill();\r\n            }\r\n            display.angle = this.get(\"rotation\", 0);\r\n            //display.pivot = { x: width / 2, y: height / 2 };\r\n            this._draw();\r\n            this._pattern = this._root._renderer.createPattern(display, backgroundDisplay, repetition, width, height);\r\n        }\r\n        this._clear = false;\r\n    }\r\n}\r\nObject.defineProperty(Pattern, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"Pattern\"\r\n});\r\nObject.defineProperty(Pattern, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Entity.classNames.concat([Pattern.className])\r\n});\r\n//# sourceMappingURL=Pattern.js.map","import { Pattern } from \"./Pattern\";\r\n/**\r\n * Picture pattern.\r\n *\r\n * @since 5.2.15\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/colors-gradients-and-patterns/patterns/} for more info\r\n */\r\nexport class PicturePattern extends Pattern {\r\n    constructor() {\r\n        super(...arguments);\r\n        Object.defineProperty(this, \"_image\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n    }\r\n    _beforeChanged() {\r\n        super._beforeChanged();\r\n        this._clear = true;\r\n        if (this.isDirty(\"src\")) {\r\n            this._load();\r\n        }\r\n        const canvas = this.get(\"canvas\");\r\n        if (canvas) {\r\n            this.set(\"width\", canvas.width);\r\n            this.set(\"height\", canvas.height);\r\n        }\r\n    }\r\n    _draw() {\r\n        super._draw();\r\n        const colorOpacity = this.get(\"colorOpacity\");\r\n        if (colorOpacity !== undefined) {\r\n            this._display.alpha = Math.max(0, colorOpacity);\r\n        }\r\n        const image = this._image;\r\n        if (image) {\r\n            const patternWidth = this.get(\"width\", 100);\r\n            const patternHeight = this.get(\"height\", 100);\r\n            // Fit\r\n            const fit = this.get(\"fit\", \"image\");\r\n            let width = 0;\r\n            let height = 0;\r\n            if (fit == \"pattern\") {\r\n                width = patternWidth;\r\n                height = patternHeight;\r\n                this.markDirty();\r\n            }\r\n            else {\r\n                width = image.width;\r\n                height = image.height;\r\n                if (fit == \"image\") {\r\n                    this.set(\"width\", width);\r\n                    this.set(\"height\", height);\r\n                }\r\n            }\r\n            // Position\r\n            const centered = this.get(\"centered\", true);\r\n            let x = 0;\r\n            let y = 0;\r\n            if (centered) {\r\n                x = patternWidth / 2 - width / 2;\r\n                y = patternHeight / 2 - height / 2;\r\n            }\r\n            this._display.image(image, width, height, x, y);\r\n        }\r\n        const canvas = this.get(\"canvas\");\r\n        if (canvas) {\r\n            this._display.image(canvas, canvas.width, canvas.height, 0, 0);\r\n        }\r\n    }\r\n    _load() {\r\n        const src = this.get(\"src\");\r\n        if (src) {\r\n            const image = new Image();\r\n            //image.crossOrigin = \"Anonymous\";\r\n            image.src = src;\r\n            image.decode().then(() => {\r\n                this._image = image;\r\n                this._draw();\r\n                if (this.events.isEnabled(\"loaded\")) {\r\n                    this.events.dispatch(\"loaded\", { type: \"loaded\", target: this });\r\n                }\r\n            }).catch((_error) => {\r\n                // TODO: maybe raise error?\r\n            });\r\n        }\r\n    }\r\n}\r\nObject.defineProperty(PicturePattern, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"PicturePattern\"\r\n});\r\nObject.defineProperty(PicturePattern, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Pattern.classNames.concat([PicturePattern.className])\r\n});\r\n//# sourceMappingURL=PicturePattern.js.map","/**\r\n * From https://github.com/pixijs/pixi.js/blob/3dd0ff9a935f0bc13a09aefff9eb2872f02c51b9/packages/canvas/canvas-renderer/src/utils/mapCanvasBlendModesToPixi.ts#L13\r\n */\r\nexport var BlendMode;\r\n(function (BlendMode) {\r\n    BlendMode[\"ADD\"] = \"lighter\";\r\n    BlendMode[\"COLOR\"] = \"color\";\r\n    BlendMode[\"COLOR_BURN\"] = \"color-burn\";\r\n    BlendMode[\"COLOR_DODGE\"] = \"color-dodge\";\r\n    BlendMode[\"DARKEN\"] = \"darken\";\r\n    BlendMode[\"DIFFERENCE\"] = \"difference\";\r\n    BlendMode[\"DST_OVER\"] = \"destination-over\";\r\n    BlendMode[\"EXCLUSION\"] = \"exclusion\";\r\n    BlendMode[\"HARD_LIGHT\"] = \"hard-light\";\r\n    BlendMode[\"HUE\"] = \"hue\";\r\n    BlendMode[\"LIGHTEN\"] = \"lighten\";\r\n    BlendMode[\"LUMINOSITY\"] = \"luminosity\";\r\n    BlendMode[\"MULTIPLY\"] = \"multiply\";\r\n    BlendMode[\"NORMAL\"] = \"source-over\";\r\n    BlendMode[\"OVERLAY\"] = \"overlay\";\r\n    BlendMode[\"SATURATION\"] = \"saturation\";\r\n    BlendMode[\"SCREEN\"] = \"screen\";\r\n    BlendMode[\"SOFT_LIGHT\"] = \"soft-light\";\r\n    BlendMode[\"SRC_ATOP\"] = \"source-atop\";\r\n    BlendMode[\"XOR\"] = \"xor\";\r\n})(BlendMode || (BlendMode = {}));\r\n//# sourceMappingURL=Renderer.js.map","import { PicturePattern } from \"../render/patterns/PicturePattern\";\r\nimport { Sprite } from \"./Sprite\";\r\nimport { BlendMode } from \"./backend/Renderer\";\r\nimport * as $type from \"../util/Type\";\r\nimport * as $array from \"../util/Array\";\r\nexport const visualSettings = [\"fill\", \"fillOpacity\", \"stroke\", \"strokeWidth\", \"strokeOpacity\", \"fillPattern\", \"strokePattern\", \"fillGradient\", \"strokeGradient\", \"strokeDasharray\", \"strokeDashoffset\", \"shadowBlur\", \"shadowColor\", \"shadowOpacity\", \"shadowOffsetX\", \"shadowOffsetY\", \"blur\", \"sepia\", \"invert\", \"brightness\", \"hue\", \"contrast\", \"saturate\"];\r\n/**\r\n * Base class used for drawing shapes.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/graphics/} for more info\r\n * @important\r\n */\r\nexport class Graphics extends Sprite {\r\n    constructor() {\r\n        super(...arguments);\r\n        Object.defineProperty(this, \"_display\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this._root._renderer.makeGraphics()\r\n        });\r\n        Object.defineProperty(this, \"_clear\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n    }\r\n    _beforeChanged() {\r\n        super._beforeChanged();\r\n        if (this.isDirty(\"draw\") || this.isDirty(\"svgPath\")) {\r\n            this.markDirtyBounds();\r\n        }\r\n        if (this.isDirty(\"fill\") || this.isDirty(\"stroke\") || this.isDirty(\"visible\") || this.isDirty(\"forceHidden\") || this.isDirty(\"scale\") || this.isDirty(\"fillGradient\") || this.isDirty(\"strokeGradient\") || this.isDirty(\"fillPattern\") || this.isDirty(\"strokePattern\") || this.isDirty(\"fillOpacity\") || this.isDirty(\"strokeOpacity\") || this.isDirty(\"strokeWidth\") || this.isDirty(\"draw\") || this.isDirty(\"blendMode\") || this.isDirty(\"strokeDasharray\") || this.isDirty(\"strokeDashoffset\") || this.isDirty(\"svgPath\") || this.isDirty(\"lineJoin\") || this.isDirty(\"lineCap\") || this.isDirty(\"shadowColor\") || this.isDirty(\"shadowBlur\") || this.isDirty(\"shadowOffsetX\") || this.isDirty(\"shadowOffsetY\")) {\r\n            this._clear = true;\r\n        }\r\n        this._display.crisp = this.get(\"crisp\", false);\r\n        if (this.isDirty(\"fillGradient\")) {\r\n            const gradient = this.get(\"fillGradient\");\r\n            if (gradient) {\r\n                this._display.isMeasured = true;\r\n                const gradientTarget = gradient.get(\"target\");\r\n                if (gradientTarget) {\r\n                    this._disposers.push(gradientTarget.events.on(\"boundschanged\", () => {\r\n                        this._markDirtyKey(\"fill\");\r\n                    }));\r\n                    this._disposers.push(gradientTarget.events.on(\"positionchanged\", () => {\r\n                        this._markDirtyKey(\"fill\");\r\n                    }));\r\n                }\r\n            }\r\n        }\r\n        if (this.isDirty(\"strokeGradient\")) {\r\n            const gradient = this.get(\"strokeGradient\");\r\n            if (gradient) {\r\n                this._display.isMeasured = true;\r\n                const gradientTarget = gradient.get(\"target\");\r\n                if (gradientTarget) {\r\n                    this._disposers.push(gradientTarget.events.on(\"boundschanged\", () => {\r\n                        this._markDirtyKey(\"stroke\");\r\n                    }));\r\n                    this._disposers.push(gradientTarget.events.on(\"positionchanged\", () => {\r\n                        this._markDirtyKey(\"stroke\");\r\n                    }));\r\n                }\r\n            }\r\n        }\r\n    }\r\n    _changed() {\r\n        super._changed();\r\n        if (this._clear) {\r\n            this.markDirtyBounds();\r\n            this.markDirtyLayer();\r\n            this._display.clear();\r\n            let strokeDasharray = this.get(\"strokeDasharray\");\r\n            if ($type.isNumber(strokeDasharray)) {\r\n                if (strokeDasharray < 0.5) {\r\n                    strokeDasharray = [0];\r\n                }\r\n                else {\r\n                    strokeDasharray = [strokeDasharray];\r\n                }\r\n            }\r\n            this._display.setLineDash(strokeDasharray);\r\n            const strokeDashoffset = this.get(\"strokeDashoffset\");\r\n            if (strokeDashoffset) {\r\n                this._display.setLineDashOffset(strokeDashoffset);\r\n            }\r\n            const blendMode = this.get(\"blendMode\", BlendMode.NORMAL);\r\n            this._display.blendMode = blendMode;\r\n            const draw = this.get(\"draw\");\r\n            if (draw && typeof draw === \"function\") {\r\n                draw(this._display, this);\r\n            }\r\n            const svgPath = this.get(\"svgPath\");\r\n            if (svgPath != null) {\r\n                this._display.svgPath(svgPath);\r\n            }\r\n        }\r\n    }\r\n    _afterChanged() {\r\n        super._afterChanged();\r\n        if (this._clear) {\r\n            const fill = this.get(\"fill\");\r\n            const fillGradient = this.get(\"fillGradient\");\r\n            const fillPattern = this.get(\"fillPattern\");\r\n            const fillOpacity = this.get(\"fillOpacity\");\r\n            const stroke = this.get(\"stroke\");\r\n            const strokeGradient = this.get(\"strokeGradient\");\r\n            const strokePattern = this.get(\"strokePattern\");\r\n            const shadowColor = this.get(\"shadowColor\");\r\n            const shadowBlur = this.get(\"shadowBlur\");\r\n            const shadowOffsetX = this.get(\"shadowOffsetX\");\r\n            const shadowOffsetY = this.get(\"shadowOffsetY\");\r\n            const shadowOpacity = this.get(\"shadowOpacity\");\r\n            if (shadowColor && (shadowBlur || shadowOffsetX || shadowOffsetY)) {\r\n                this._display.shadow(shadowColor, shadowBlur, shadowOffsetX, shadowOffsetY, shadowOpacity);\r\n            }\r\n            if (fill && !fillGradient) {\r\n                this._display.beginFill(fill, fillOpacity);\r\n                this._display.endFill();\r\n            }\r\n            if (fillGradient) {\r\n                if (fill) {\r\n                    const stops = fillGradient.get(\"stops\", []);\r\n                    if (stops.length) {\r\n                        $array.each(stops, (stop) => {\r\n                            if ((!stop.color || stop.colorInherited) && fill) {\r\n                                stop.color = fill;\r\n                                stop.colorInherited = true;\r\n                            }\r\n                            if (stop.opacity == null || stop.opacityInherited) {\r\n                                stop.opacity = fillOpacity;\r\n                                stop.opacityInherited = true;\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n                const gradient = fillGradient.getFill(this);\r\n                if (gradient) {\r\n                    this._display.beginFill(gradient, fillOpacity);\r\n                    this._display.endFill();\r\n                }\r\n            }\r\n            if (fillPattern) {\r\n                const pattern = fillPattern.pattern;\r\n                if (pattern) {\r\n                    this._display.beginFill(pattern, fillOpacity);\r\n                    this._display.endFill();\r\n                    if (fillPattern instanceof PicturePattern) {\r\n                        fillPattern.events.once(\"loaded\", () => {\r\n                            this._clear = true;\r\n                            this.markDirty();\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n            if (stroke || strokeGradient || strokePattern) {\r\n                const strokeOpacity = this.get(\"strokeOpacity\");\r\n                let strokeWidth = this.get(\"strokeWidth\", 1);\r\n                if (this.get(\"nonScalingStroke\")) {\r\n                    strokeWidth = strokeWidth / this.get(\"scale\", 1);\r\n                }\r\n                if (this.get(\"crisp\")) {\r\n                    strokeWidth /= this._root._renderer.resolution;\r\n                }\r\n                const lineJoin = this.get(\"lineJoin\");\r\n                const lineCap = this.get(\"lineCap\");\r\n                if (stroke && !strokeGradient) {\r\n                    this._display.lineStyle(strokeWidth, stroke, strokeOpacity, lineJoin, lineCap);\r\n                    this._display.endStroke();\r\n                }\r\n                if (strokeGradient) {\r\n                    const stops = strokeGradient.get(\"stops\", []);\r\n                    if (stops.length) {\r\n                        $array.each(stops, (stop) => {\r\n                            if ((!stop.color || stop.colorInherited) && stroke) {\r\n                                stop.color = stroke;\r\n                                stop.colorInherited = true;\r\n                            }\r\n                            if (stop.opacity == null || stop.opacityInherited) {\r\n                                stop.opacity = strokeOpacity;\r\n                                stop.opacityInherited = true;\r\n                            }\r\n                        });\r\n                    }\r\n                    const gradient = strokeGradient.getFill(this);\r\n                    if (gradient) {\r\n                        this._display.lineStyle(strokeWidth, gradient, strokeOpacity, lineJoin, lineCap);\r\n                        this._display.endStroke();\r\n                    }\r\n                }\r\n                if (strokePattern) {\r\n                    /*\r\n                    let changed = false;\r\n                    \r\n                    if (stroke && (!strokePattern.get(\"color\") || strokePattern.get(\"colorInherited\"))) {\r\n                        strokePattern.set(\"color\", stroke);\r\n                        strokePattern.set(\"colorInherited\", true);\r\n                        changed = true;\r\n                    }\r\n                    if (changed) {\r\n                        // @todo: is this OK?\r\n                        strokePattern._changed();\r\n                    }\r\n                    */\r\n                    let pattern = strokePattern.pattern;\r\n                    if (pattern) {\r\n                        this._display.lineStyle(strokeWidth, pattern, strokeOpacity, lineJoin, lineCap);\r\n                        this._display.endStroke();\r\n                        if (strokePattern instanceof PicturePattern) {\r\n                            strokePattern.events.once(\"loaded\", () => {\r\n                                this._clear = true;\r\n                                this.markDirty();\r\n                            });\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            if (this.getPrivate(\"showingTooltip\")) {\r\n                this.showTooltip();\r\n            }\r\n        }\r\n        this._clear = false;\r\n    }\r\n}\r\nObject.defineProperty(Graphics, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"Graphics\"\r\n});\r\nObject.defineProperty(Graphics, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Sprite.classNames.concat([Graphics.className])\r\n});\r\n//# sourceMappingURL=Graphics.js.map","import { Graphics } from \"./Graphics\";\r\n/**\r\n * Draws a rectangle.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/graphics/} for more info\r\n * @important\r\n */\r\nexport class Rectangle extends Graphics {\r\n    _afterNew() {\r\n        super._afterNew();\r\n        this._display.isMeasured = true;\r\n        this.setPrivateRaw(\"trustBounds\", true);\r\n    }\r\n    _beforeChanged() {\r\n        super._beforeChanged();\r\n        if (this.isDirty(\"width\") || this.isDirty(\"height\") || this.isPrivateDirty(\"width\") || this.isPrivateDirty(\"height\")) {\r\n            this._clear = true;\r\n        }\r\n    }\r\n    _changed() {\r\n        super._changed();\r\n        if (this._clear && !this.get(\"draw\")) {\r\n            this._draw();\r\n        }\r\n    }\r\n    _draw() {\r\n        let w = this.width();\r\n        let h = this.height();\r\n        let x = 0;\r\n        let y = 0;\r\n        let wSign = w / Math.abs(w);\r\n        let hSign = h / Math.abs(h);\r\n        if (this.get(\"containStroke\", false)) {\r\n            const strokeWidth = this.get(\"strokeWidth\", 0);\r\n            w -= strokeWidth * wSign;\r\n            h -= strokeWidth * hSign;\r\n            x += strokeWidth / 2 * wSign;\r\n            y += strokeWidth / 2 * hSign;\r\n        }\r\n        this._display.drawRect(x, y, w, h);\r\n    }\r\n    _updateSize() {\r\n        this.markDirty();\r\n        this._clear = true;\r\n    }\r\n}\r\nObject.defineProperty(Rectangle, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"Rectangle\"\r\n});\r\nObject.defineProperty(Rectangle, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Graphics.classNames.concat([Rectangle.className])\r\n});\r\n//# sourceMappingURL=Rectangle.js.map","import { Entity } from \"../util/Entity\";\r\nexport function eachChildren(container, f) {\r\n    if (container.get(\"reverseChildren\", false)) {\r\n        container.children.eachReverse(f);\r\n    }\r\n    else {\r\n        container.children.each(f);\r\n    }\r\n}\r\n/**\r\n * Base class for [[Container]] layouts.\r\n */\r\nexport class Layout extends Entity {\r\n}\r\nObject.defineProperty(Layout, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"Layout\"\r\n});\r\nObject.defineProperty(Layout, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Entity.classNames.concat([Layout.className])\r\n});\r\n//# sourceMappingURL=Layout.js.map","import { Layout, eachChildren } from \"./Layout\";\r\nimport * as $type from \"../util/Type\";\r\nimport { Percent } from \"../util/Percent\";\r\n/**\r\n * A horizontal children layout for [[Container]].\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/containers/#Layout} for more info\r\n */\r\nexport class HorizontalLayout extends Layout {\r\n    /**\r\n     * @ignore\r\n     */\r\n    updateContainer(container) {\r\n        let paddingLeft = container.get(\"paddingLeft\", 0);\r\n        let availableWidth = container.innerWidth();\r\n        let totalPercent = 0;\r\n        eachChildren(container, (child) => {\r\n            if (child.isVisible()) {\r\n                if (child.get(\"position\") == \"relative\") {\r\n                    let childWidth = child.get(\"width\");\r\n                    if (childWidth instanceof Percent) {\r\n                        totalPercent += childWidth.value;\r\n                        let w = availableWidth * childWidth.value;\r\n                        let minWidth = child.get(\"minWidth\", child.getPrivate(\"minWidth\", -Infinity));\r\n                        if (minWidth > w) {\r\n                            availableWidth -= minWidth;\r\n                            totalPercent -= childWidth.value;\r\n                        }\r\n                        let maxWidth = child.get(\"maxWidth\", child.getPrivate(\"maxWidth\", Infinity));\r\n                        if (w > maxWidth) {\r\n                            availableWidth -= maxWidth;\r\n                            totalPercent -= childWidth.value;\r\n                        }\r\n                    }\r\n                    else {\r\n                        if (!$type.isNumber(childWidth)) {\r\n                            childWidth = child.width();\r\n                        }\r\n                        availableWidth -= childWidth + child.get(\"marginLeft\", 0) + child.get(\"marginRight\", 0);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        if (availableWidth <= 0 || availableWidth == Infinity) {\r\n            availableWidth = .1;\r\n        }\r\n        //if (availableWidth > 0) {\r\n        eachChildren(container, (child) => {\r\n            if (child.isVisible()) {\r\n                if (child.get(\"position\") == \"relative\") {\r\n                    let childWidth = child.get(\"width\");\r\n                    if (childWidth instanceof Percent) {\r\n                        let privateWidth = availableWidth * childWidth.value / totalPercent - child.get(\"marginLeft\", 0) - child.get(\"marginRight\", 0);\r\n                        let minWidth = child.get(\"minWidth\", child.getPrivate(\"minWidth\", -Infinity));\r\n                        let maxWidth = child.get(\"maxWidth\", child.getPrivate(\"maxWidth\", Infinity));\r\n                        privateWidth = Math.min(Math.max(minWidth, privateWidth), maxWidth);\r\n                        child.setPrivate(\"width\", privateWidth);\r\n                    }\r\n                    else {\r\n                        if (child._prevSettings.width instanceof Percent) {\r\n                            child.setPrivate(\"width\", undefined);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        //}\r\n        let prevX = paddingLeft;\r\n        eachChildren(container, (child) => {\r\n            if (child.get(\"position\") == \"relative\") {\r\n                if (child.isVisible()) {\r\n                    let bounds = child.adjustedLocalBounds();\r\n                    let marginLeft = child.get(\"marginLeft\", 0);\r\n                    let marginRight = child.get(\"marginRight\", 0);\r\n                    let maxWidth = child.get(\"maxWidth\");\r\n                    let left = bounds.left;\r\n                    let right = bounds.right;\r\n                    if (maxWidth) {\r\n                        if (right - left > maxWidth) {\r\n                            right = left + maxWidth;\r\n                        }\r\n                    }\r\n                    let x = prevX + marginLeft - left;\r\n                    child.setPrivate(\"x\", x);\r\n                    prevX = x + right + marginRight;\r\n                }\r\n                else {\r\n                    child.setPrivate(\"x\", undefined);\r\n                }\r\n            }\r\n        });\r\n    }\r\n}\r\nObject.defineProperty(HorizontalLayout, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"HorizontalLayout\"\r\n});\r\nObject.defineProperty(HorizontalLayout, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Layout.classNames.concat([HorizontalLayout.className])\r\n});\r\n//# sourceMappingURL=HorizontalLayout.js.map","import { Layout, eachChildren } from \"./Layout\";\r\nimport * as $type from \"../util/Type\";\r\nimport { Percent } from \"../util/Percent\";\r\n/**\r\n * A vertical children layout for [[Container]].\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/containers/#Layout} for more info\r\n */\r\nexport class VerticalLayout extends Layout {\r\n    /**\r\n     * @ignore\r\n     */\r\n    updateContainer(container) {\r\n        let paddingTop = container.get(\"paddingTop\", 0);\r\n        let availableHeight = container.innerHeight();\r\n        let totalPercent = 0;\r\n        eachChildren(container, (child) => {\r\n            if (child.isVisible()) {\r\n                if (child.get(\"position\") == \"relative\") {\r\n                    let childHeight = child.get(\"height\");\r\n                    if (childHeight instanceof Percent) {\r\n                        totalPercent += childHeight.value;\r\n                        let h = availableHeight * childHeight.value;\r\n                        let minHeight = child.get(\"minHeight\", child.getPrivate(\"minHeight\", -Infinity));\r\n                        if (minHeight > h) {\r\n                            availableHeight -= minHeight;\r\n                            totalPercent -= childHeight.value;\r\n                        }\r\n                        let maxHeight = child.get(\"maxHeight\", child.getPrivate(\"maxHeight\", Infinity));\r\n                        if (h > maxHeight) {\r\n                            availableHeight -= maxHeight;\r\n                            totalPercent -= childHeight.value;\r\n                        }\r\n                    }\r\n                    else {\r\n                        if (!$type.isNumber(childHeight)) {\r\n                            childHeight = child.height();\r\n                        }\r\n                        availableHeight -= childHeight + child.get(\"marginTop\", 0) + child.get(\"marginBottom\", 0);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        if (availableHeight <= 0 || availableHeight == Infinity) {\r\n            availableHeight = .1;\r\n        }\r\n        //if (availableHeight > 0) {\r\n        eachChildren(container, (child) => {\r\n            if (child.isVisible()) {\r\n                if (child.get(\"position\") == \"relative\") {\r\n                    let childHeight = child.get(\"height\");\r\n                    if (childHeight instanceof Percent) {\r\n                        let privateHeight = availableHeight * childHeight.value / totalPercent - child.get(\"marginTop\", 0) - child.get(\"marginBottom\", 0);\r\n                        let minHeight = child.get(\"minHeight\", child.getPrivate(\"minHeight\", -Infinity));\r\n                        let maxHeight = child.get(\"maxHeight\", child.getPrivate(\"maxHeight\", Infinity));\r\n                        privateHeight = Math.min(Math.max(minHeight, privateHeight), maxHeight);\r\n                        child.setPrivate(\"height\", privateHeight);\r\n                    }\r\n                    else {\r\n                        if (child._prevSettings.height instanceof Percent) {\r\n                            child.setPrivate(\"height\", undefined);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        //}\r\n        let prevY = paddingTop;\r\n        eachChildren(container, (child) => {\r\n            if (child.get(\"position\") == \"relative\") {\r\n                if (child.isVisible()) {\r\n                    let bounds = child.adjustedLocalBounds();\r\n                    let marginTop = child.get(\"marginTop\", 0);\r\n                    let top = bounds.top;\r\n                    let bottom = bounds.bottom;\r\n                    let maxHeight = child.get(\"maxHeight\");\r\n                    if (maxHeight) {\r\n                        if (bottom - top > maxHeight) {\r\n                            bottom = top + maxHeight;\r\n                        }\r\n                    }\r\n                    let marginBottom = child.get(\"marginBottom\", 0);\r\n                    let y = prevY + marginTop - top;\r\n                    child.setPrivate(\"y\", y);\r\n                    prevY = y + bottom + marginBottom;\r\n                }\r\n                else {\r\n                    child.setPrivate(\"y\", undefined);\r\n                }\r\n            }\r\n        });\r\n    }\r\n}\r\nObject.defineProperty(VerticalLayout, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"VerticalLayout\"\r\n});\r\nObject.defineProperty(VerticalLayout, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Layout.classNames.concat([VerticalLayout.className])\r\n});\r\n//# sourceMappingURL=VerticalLayout.js.map","import { Layout, eachChildren } from \"./Layout\";\r\nimport * as $array from \"../util/Array\";\r\nimport * as $math from \"../util/Math\";\r\n/**\r\n * A grid children layout for [[Container]].\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/containers/#Layout} for more info\r\n */\r\nexport class GridLayout extends Layout {\r\n    _afterNew() {\r\n        this._setRawDefault(\"maxColumns\", Number.MAX_VALUE);\r\n        super._afterNew();\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    updateContainer(container) {\r\n        let paddingLeft = container.get(\"paddingLeft\", 0);\r\n        let paddingRight = container.get(\"paddingRight\", 0);\r\n        let paddingTop = container.get(\"paddingTop\", 0);\r\n        let availableWidth = container.maxWidth() - paddingLeft - paddingRight;\r\n        let minCellWidth = availableWidth;\r\n        let maxCellWidth = 1;\r\n        eachChildren(container, (child) => {\r\n            if (child.get(\"visible\") && child.getPrivate(\"visible\") && !child.get(\"forceHidden\")) {\r\n                if (child.get(\"position\") != \"absolute\") {\r\n                    let childWidth = child.width();\r\n                    if (childWidth < minCellWidth) {\r\n                        minCellWidth = childWidth;\r\n                    }\r\n                    if (childWidth > maxCellWidth) {\r\n                        maxCellWidth = childWidth;\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        minCellWidth = $math.fitToRange(minCellWidth, 1, availableWidth);\r\n        maxCellWidth = $math.fitToRange(maxCellWidth, 1, availableWidth);\r\n        let columnCount = 1;\r\n        if (this.get(\"fixedWidthGrid\")) {\r\n            columnCount = availableWidth / maxCellWidth;\r\n        }\r\n        else {\r\n            columnCount = availableWidth / minCellWidth;\r\n        }\r\n        columnCount = Math.max(1, Math.floor(columnCount));\r\n        columnCount = Math.min(this.get(\"maxColumns\", Number.MAX_VALUE), columnCount);\r\n        let columnWidths = this.getColumnWidths(container, columnCount, maxCellWidth, availableWidth);\r\n        let prevY = paddingTop;\r\n        let column = 0;\r\n        let maxRowHeight = 0;\r\n        columnCount = columnWidths.length;\r\n        let prevX = paddingLeft;\r\n        eachChildren(container, (child) => {\r\n            if (child.get(\"position\") == \"relative\" && child.isVisible()) {\r\n                const marginTop = child.get(\"marginTop\", 0);\r\n                const marginBottom = child.get(\"marginBottom\", 0);\r\n                let bounds = child.adjustedLocalBounds();\r\n                let marginLeft = child.get(\"marginLeft\", 0);\r\n                let marginRight = child.get(\"marginRight\", 0);\r\n                let x = prevX + marginLeft - bounds.left;\r\n                let y = prevY + marginTop - bounds.top;\r\n                child.setPrivate(\"x\", x);\r\n                child.setPrivate(\"y\", y);\r\n                prevX += columnWidths[column] + marginRight;\r\n                maxRowHeight = Math.max(maxRowHeight, child.height() + marginTop + marginBottom);\r\n                column++;\r\n                if (column >= columnCount) {\r\n                    column = 0;\r\n                    prevX = paddingLeft;\r\n                    prevY += maxRowHeight;\r\n                    maxRowHeight = 0;\r\n                }\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    getColumnWidths(container, columnCount, maxCellWidth, availableWidth) {\r\n        let totalWidth = 0;\r\n        let columnWidths = [];\r\n        let column = 0;\r\n        eachChildren(container, (child) => {\r\n            let bounds = child.adjustedLocalBounds();\r\n            if (child.get(\"position\") != \"absolute\" && child.isVisible()) {\r\n                if (this.get(\"fixedWidthGrid\")) {\r\n                    columnWidths[column] = maxCellWidth;\r\n                }\r\n                else {\r\n                    columnWidths[column] = Math.max(columnWidths[column] | 0, bounds.right - bounds.left + child.get(\"marginLeft\", 0) + child.get(\"marginRight\", 0));\r\n                }\r\n                if (column < container.children.length - 1) {\r\n                    column++;\r\n                    if (column == columnCount) {\r\n                        column = 0;\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        $array.each(columnWidths, (w) => {\r\n            totalWidth += w;\r\n        });\r\n        if (totalWidth > availableWidth) {\r\n            if (columnCount > 2) {\r\n                columnCount -= 1;\r\n                return this.getColumnWidths(container, columnCount, maxCellWidth, availableWidth);\r\n            }\r\n            else {\r\n                return [availableWidth];\r\n            }\r\n        }\r\n        return columnWidths;\r\n    }\r\n}\r\nObject.defineProperty(GridLayout, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"GridLayout\"\r\n});\r\nObject.defineProperty(GridLayout, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Layout.classNames.concat([GridLayout.className])\r\n});\r\n//# sourceMappingURL=GridLayout.js.map","import { Color } from \"./Color\";\r\nimport * as $type from \"./Type\";\r\nexport class TextFormatter {\r\n    /**\r\n     * Replaces brackets with temporary placeholders.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param text  Input text\r\n     * @return Escaped text\r\n     */\r\n    static escape(text) {\r\n        return text.\r\n            replace(/\\[\\[/g, this.prefix + \"1\").\r\n            replace(/([^\\/\\]]{1})\\]\\]/g, \"$1\" + this.prefix + \"2\").\r\n            replace(/\\]\\]/g, this.prefix + \"2\").\r\n            replace(/\\{\\{/g, this.prefix + \"3\").\r\n            replace(/\\}\\}/g, this.prefix + \"4\").\r\n            replace(/\\'\\'/g, this.prefix + \"5\");\r\n    }\r\n    /**\r\n     * Replaces placeholders back to brackets.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param text  Escaped text\r\n     * @return Unescaped text\r\n     */\r\n    static unescape(text) {\r\n        return text.\r\n            replace(new RegExp(this.prefix + \"1\", \"g\"), \"[[\").\r\n            replace(new RegExp(this.prefix + \"2\", \"g\"), \"]]\").\r\n            replace(new RegExp(this.prefix + \"3\", \"g\"), \"{{\").\r\n            replace(new RegExp(this.prefix + \"4\", \"g\"), \"}}\").\r\n            replace(new RegExp(this.prefix + \"5\", \"g\"), \"''\");\r\n    }\r\n    /**\r\n     * Cleans up the text text for leftover double square brackets.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param text  Input text\r\n     * @return Cleaned up text\r\n     */\r\n    static cleanUp(text) {\r\n        return text.\r\n            replace(/\\[\\[/g, \"[\").\r\n            replace(/\\]\\]/g, \"]\").\r\n            replace(/\\{\\{/g, \"{\").\r\n            replace(/\\}\\}/g, \"}\").\r\n            replace(/\\'\\'/g, \"'\");\r\n    }\r\n    /**\r\n     * Splits string into chunks. (style blocks, quoted blocks, regular blocks)\r\n     *\r\n     * If the second parameter `quotedBlocks` is set to `true` this method will\r\n     * also single out text blocks enclosed within single quotes that no\r\n     * formatting should be applied to, and they should be displayed as is.\r\n     *\r\n     * Default for the above is `false`, so that you can use single quote in text\r\n     * without escaping it.\r\n     *\r\n     * If enabled, single quotes can be escaped by doubling it - adding two\r\n     * single quotes, which will be replaced by a one single quote in the final\r\n     * output.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param text          Text to chunk\r\n     * @param quotedBlocks  Use quoted blocks\r\n     * @param noFormatting  Formatting blocks will be treated as regular text\r\n     * @return Array of string chunks\r\n     */\r\n    static chunk(text, quotedBlocks = false, noFormatting = false) {\r\n        // Init result\r\n        let res = [];\r\n        // Replace double (escaped) square spaces and quotes with temporary codes\r\n        text = this.escape(text);\r\n        // Deal with style blocks\r\n        let chunks = quotedBlocks ? text.split(\"'\") : [text];\r\n        for (let i = 0; i < chunks.length; i++) {\r\n            let chunk = chunks[i];\r\n            // Empty?\r\n            if (chunk === \"\") {\r\n                continue;\r\n            }\r\n            if ((i % 2) === 0) {\r\n                // Text outside quotes\r\n                // Parse for style blocks which are \"text\" chunks, the rest chunks are\r\n                // \"value\"\r\n                chunk = chunk.replace(/\\]\\[/g, \"]\" + $type.PLACEHOLDER + \"[\");\r\n                chunk = chunk.replace(/\\[\\]/g, \"[ ]\");\r\n                let chunks2 = chunk.split(/[\\[\\]]+/);\r\n                for (let i2 = 0; i2 < chunks2.length; i2++) {\r\n                    let chunk2 = this.cleanUp(this.unescape(chunks2[i2]));\r\n                    // Placeholder?\r\n                    if (chunk2 === $type.PLACEHOLDER) {\r\n                        continue;\r\n                    }\r\n                    // Empty?\r\n                    if (chunk2 === \"\") {\r\n                        continue;\r\n                    }\r\n                    // Block or value\r\n                    if ((i2 % 2) === 0) {\r\n                        res.push({\r\n                            \"type\": \"value\",\r\n                            \"text\": chunk2\r\n                        });\r\n                    }\r\n                    else {\r\n                        res.push({\r\n                            \"type\": noFormatting ? \"value\" : \"format\",\r\n                            \"text\": \"[\" + chunk2 + \"]\"\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                // A text within doublequotes\r\n                // All chunks are \"text\"\r\n                let chunks2 = chunk.split(/[\\[\\]]+/);\r\n                for (let i2 = 0; i2 < chunks2.length; i2++) {\r\n                    let chunk2 = this.cleanUp(this.unescape(chunks2[i2]));\r\n                    // Empty?\r\n                    if (chunk2 === \"\") {\r\n                        continue;\r\n                    }\r\n                    // Block or text\r\n                    if ((i2 % 2) === 0) {\r\n                        res.push({\r\n                            \"type\": \"text\",\r\n                            \"text\": chunk2\r\n                        });\r\n                    }\r\n                    else if (this.isImage(chunk2)) {\r\n                        res.push({\r\n                            \"type\": \"image\",\r\n                            \"text\": \"[\" + chunk2 + \"]\"\r\n                        });\r\n                    }\r\n                    else {\r\n                        res.push({\r\n                            \"type\": \"format\",\r\n                            \"text\": \"[\" + chunk2 + \"]\"\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return res;\r\n    }\r\n    /**\r\n     * Checks if supplied format contains image information and should be\r\n     * formatted as such.\r\n     * I.e.: `[img: myImage.png]`\r\n     *\r\n     * @ignore\r\n     * @param  text  Format\r\n     * @return true if it is an image\r\n     */\r\n    static isImage(text) {\r\n        return text.match(/img[ ]?:/) ? true : false;\r\n    }\r\n    static getTextStyle(style) {\r\n        // let textStyle: string[] = [];\r\n        // let textFill: string | undefined;\r\n        let format = {};\r\n        if (style == \"\" || style == \"[ ]\") {\r\n            return {};\r\n        }\r\n        // Pre-process quoted text\r\n        const q = style.match(/('[^']*')|(\"[^\"]*\")/gi);\r\n        if (q) {\r\n            for (let i = 0; i < q.length; i++) {\r\n                style = style.replace(q[i], q[i].replace(/['\"]*/g, \"\").replace(/[ ]+/g, \"+\"));\r\n            }\r\n        }\r\n        // Get style parts\r\n        let b = style.match(/([\\w\\-]*:[\\s]?[^;\\s\\]]*)|(\\#[\\w]{1,6})|([\\w\\-]+)|(\\/)/gi);\r\n        // Empty?\r\n        if (!b) {\r\n            return {};\r\n        }\r\n        // Check each part\r\n        for (let i = 0; i < b.length; i++) {\r\n            if (b[i].match(/^(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)$/i)) {\r\n                format.fontWeight = b[i];\r\n            }\r\n            else if (b[i].match(/^(underline|line-through)$/i)) {\r\n                format.textDecoration = b[i];\r\n            }\r\n            else if (b[i] == \"/\") {\r\n                // Just closing tag\r\n                // Do nothing\r\n            }\r\n            else if (!b[i].match(/:/)) {\r\n                // Color\r\n                format.fill = Color.fromString(b[i]);\r\n            }\r\n            else {\r\n                const p = b[i].replace(\"+\", \" \").split(/:[ ]*/);\r\n                format[p[0]] = p[1];\r\n                //textStyle.push(b[i].replace(/^[a-zA-Z]:[ ]*/, \"\"));\r\n                //b[i] = b[i].replace(/\\+/g, \" \");\r\n            }\r\n        }\r\n        return format;\r\n    }\r\n}\r\nObject.defineProperty(TextFormatter, \"prefix\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"__amcharts__\"\r\n});\r\n//# sourceMappingURL=TextFormatter.js.map","/** @ignore */ /** */\r\nimport * as $type from \"./Type\";\r\nimport * as $utils from \"./Utils\";\r\nimport { Sprite } from \"../render/Sprite\";\r\nimport { TextFormatter } from \"./TextFormatter\";\r\n/**\r\n * @ignore\r\n */\r\nexport function populateString(target, string) {\r\n    if (string != null) {\r\n        string = \"\" + string;\r\n        string = TextFormatter.escape(string);\r\n        let tags = string.match(/\\{([^}]+)\\}/g);\r\n        let i;\r\n        if (tags) {\r\n            for (i = 0; i < tags.length; i++) {\r\n                let tag = tags[i].replace(/\\{([^}]+)\\}/, \"$1\");\r\n                let value = getTagValue(target, tag, \"\");\r\n                if (value == null) {\r\n                    value = \"\";\r\n                }\r\n                string = string.split(tags[i]).join(value);\r\n            }\r\n        }\r\n        string = TextFormatter.unescape(string);\r\n    }\r\n    else {\r\n        string = \"\";\r\n    }\r\n    // TODO: apply adapter?\r\n    return string;\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction getTagValue(target, tagName, format) {\r\n    let value;\r\n    const dataItem = target.dataItem;\r\n    // Parse parts\r\n    let parts = [];\r\n    let reg = /(format[a-zA-Z]*)\\((.*)\\)|([^.]+)/g;\r\n    let matches;\r\n    while (true) {\r\n        matches = reg.exec(tagName);\r\n        if (matches === null) {\r\n            break;\r\n        }\r\n        if (matches[3]) {\r\n            // Simple property\r\n            parts.push({\r\n                prop: matches[3]\r\n            });\r\n            // Check if maybe we should force a formatter on this value\r\n            const dateFields = target.getDateFormatter().get(\"dateFields\", []);\r\n            const numericFields = target.getNumberFormatter().get(\"numericFields\", []);\r\n            const durationFields = target.getDurationFormatter().get(\"durationFields\", []);\r\n            if (dateFields.indexOf(matches[3]) !== -1) {\r\n                parts.push({\r\n                    method: \"formatDate\",\r\n                    params: []\r\n                });\r\n            }\r\n            else if (numericFields.indexOf(matches[3]) !== -1) {\r\n                parts.push({\r\n                    method: \"formatNumber\",\r\n                    params: []\r\n                });\r\n            }\r\n            else if (durationFields.indexOf(matches[3]) !== -1) {\r\n                parts.push({\r\n                    method: \"formatDuration\",\r\n                    params: []\r\n                });\r\n            }\r\n        }\r\n        else {\r\n            // Method\r\n            // Parse parameters\r\n            let params = [];\r\n            if ($utils.trim(matches[2]) != \"\") {\r\n                let reg2 = /'([^']*)'|\"([^\"]*)\"|([0-9\\-]+)/g;\r\n                let matches2;\r\n                while (true) {\r\n                    matches2 = reg2.exec(matches[2]);\r\n                    if (matches2 === null) {\r\n                        break;\r\n                    }\r\n                    params.push(matches2[1] || matches2[2] || matches2[3]);\r\n                }\r\n            }\r\n            parts.push({\r\n                method: matches[1],\r\n                params: params\r\n            });\r\n        }\r\n    }\r\n    // Check if we can retrieve the value from data item\r\n    if (dataItem) {\r\n        // Check values\r\n        value = getTagValueFromObject(target, parts, dataItem._settings);\r\n        // Check properties\r\n        if (value == null || $type.isObject(value)) { // isObject helps to solve problem with date axis, as for example dateX will get dateX from values object and won't get to the dateX date.\r\n            value = getTagValueFromObject(target, parts, dataItem);\r\n        }\r\n        // Check data context\r\n        let dataContext = dataItem.dataContext;\r\n        if (value == null && dataContext) {\r\n            value = getTagValueFromObject(target, parts, dataContext);\r\n            // Maybe it's a literal dot-separated name of the key in dataContext?\r\n            if (value == null) {\r\n                value = getTagValueFromObject(target, [{\r\n                        prop: tagName\r\n                    }], dataContext);\r\n            }\r\n            // scond data context level sometimes exist (tree map)\r\n            if (value == null && dataContext.dataContext) {\r\n                value = getTagValueFromObject(target, parts, dataContext.dataContext);\r\n            }\r\n        }\r\n        // Check component's data item\r\n        if (value == null && dataItem.component && dataItem.component.dataItem !== dataItem) {\r\n            value = getTagValue(dataItem.component, tagName, format);\r\n        }\r\n    }\r\n    // Check sprite's properties\r\n    if (value == null) {\r\n        value = getTagValueFromObject(target, parts, target);\r\n    }\r\n    // Finally, check the parent\r\n    if (value == null && target.parent) {\r\n        value = getTagValue(target.parent, tagName, format);\r\n    }\r\n    return value;\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction getCustomDataValue(target, prop) {\r\n    const customData = target.getPrivate(\"customData\");\r\n    if ($type.isObject(customData)) {\r\n        return customData[prop];\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport function getTagValueFromObject(target, parts, object, format) {\r\n    let current = object;\r\n    let formatApplied = false;\r\n    for (let i = 0, len = parts.length; i < len; i++) {\r\n        let part = parts[i];\r\n        if (part.prop) {\r\n            // Regular property\r\n            if (current instanceof Sprite) {\r\n                let tmp = current.get(part.prop);\r\n                if (tmp == null)\r\n                    tmp = current.getPrivate(part.prop);\r\n                if (tmp == null)\r\n                    tmp = getCustomDataValue(current, part.prop);\r\n                if (tmp == null)\r\n                    tmp = current[part.prop];\r\n                current = tmp;\r\n            }\r\n            else if (current.get) {\r\n                let tmp = current.get(part.prop);\r\n                if (tmp == null)\r\n                    tmp = current[part.prop];\r\n                current = tmp;\r\n            }\r\n            else {\r\n                current = current[part.prop];\r\n            }\r\n            if (current == null) {\r\n                // Not set, return undefined\r\n                return;\r\n            }\r\n        }\r\n        else {\r\n            // Method\r\n            switch (part.method) {\r\n                case \"formatNumber\":\r\n                    let numberValue = $type.toNumber(current);\r\n                    if (numberValue != null) {\r\n                        current = target.getNumberFormatter().format(numberValue, format || part.params[0] || undefined);\r\n                        formatApplied = true;\r\n                    }\r\n                    break;\r\n                case \"formatDate\":\r\n                    let dateValue = $type.toDate(current);\r\n                    if (!$type.isDate(dateValue) || $type.isNaN(dateValue.getTime())) {\r\n                        // Was not able to get date out of value, quitting and letting\r\n                        // calling method try another value\r\n                        return;\r\n                    }\r\n                    if (dateValue != null) {\r\n                        current = target.getDateFormatter().format(dateValue, format || part.params[0] || undefined);\r\n                        formatApplied = true;\r\n                    }\r\n                    break;\r\n                case \"formatDuration\":\r\n                    let durationValue = $type.toNumber(current);\r\n                    if (durationValue != null) {\r\n                        current = target.getDurationFormatter().format(durationValue, format || part.params[0] || undefined, part.params[1] || undefined);\r\n                        formatApplied = true;\r\n                    }\r\n                    break;\r\n                case \"urlEncode\":\r\n                case \"encodeURIComponent\":\r\n                    current = encodeURIComponent(current);\r\n                    break;\r\n                default:\r\n                    if (current[part.method]) {\r\n                        current[part.method].apply(object, part.params);\r\n                    }\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n    // Apply default format if it wasn't applied explicitly\r\n    if (!formatApplied) {\r\n        let formatParts = [{\r\n                method: \"\",\r\n                params: format\r\n            }];\r\n        if (format == null) {\r\n            // Format is not set\r\n            // Determine from the type of the value\r\n            if ($type.isNumber(current)) {\r\n                formatParts[0].method = \"formatNumber\";\r\n                formatParts[0].params = \"\";\r\n            }\r\n            else if ($type.isDate(current)) {\r\n                formatParts[0].method = \"formatDate\";\r\n                formatParts[0].params = \"\";\r\n            }\r\n        }\r\n        else {\r\n            // Format set\r\n            // Try to determine formatter based on the format\r\n            let formatterType = $utils.getFormat(format);\r\n            // format\r\n            if (formatterType === \"number\") {\r\n                formatParts[0].method = \"formatNumber\";\r\n            }\r\n            else if (formatterType === \"date\") {\r\n                formatParts[0].method = \"formatDate\";\r\n            }\r\n            else if (formatterType === \"duration\") {\r\n                formatParts[0].method = \"formatDuration\";\r\n            }\r\n        }\r\n        // Apply format\r\n        if (formatParts[0].method) {\r\n            current = getTagValueFromObject(target, formatParts, current);\r\n        }\r\n    }\r\n    return current;\r\n}\r\n//# sourceMappingURL=PopulateString.js.map","import { Children } from \"../util/Children\";\r\nimport { Percent } from \"../util/Percent\";\r\nimport { Sprite } from \"./Sprite\";\r\nimport { Rectangle } from \"./Rectangle\";\r\nimport { HorizontalLayout } from \"./HorizontalLayout\";\r\nimport { VerticalLayout } from \"./VerticalLayout\";\r\nimport { GridLayout } from \"./GridLayout\";\r\nimport { populateString } from \"../util/PopulateString\";\r\nimport * as $array from \"../util/Array\";\r\nimport * as $type from \"../util/Type\";\r\nimport * as $utils from \"../util/Utils\";\r\n/**\r\n * A basic element that can have child elements, maintain their layout, and\r\n * have a background.\r\n *\r\n * It can have any [[Sprite]] element as a child, from very basic shapes, to\r\n * full-fledged charts.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/containers/} for more info\r\n * @important\r\n */\r\nexport class Container extends Sprite {\r\n    constructor() {\r\n        super(...arguments);\r\n        Object.defineProperty(this, \"_display\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this._root._renderer.makeContainer()\r\n        });\r\n        Object.defineProperty(this, \"_childrenDisplay\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this._root._renderer.makeContainer()\r\n        });\r\n        /**\r\n         * List of Container's child elements.\r\n         */\r\n        Object.defineProperty(this, \"children\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new Children(this)\r\n        });\r\n        Object.defineProperty(this, \"_percentageSizeChildren\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        Object.defineProperty(this, \"_percentagePositionChildren\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        Object.defineProperty(this, \"_prevWidth\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_prevHeight\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_contentWidth\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_contentHeight\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_contentMask\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_vsbd0\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_vsbd1\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_hsbd0\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_hsbd1\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_childrenPrep\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_childrenUpdt\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n    }\r\n    _afterNew() {\r\n        super._afterNew();\r\n        this._display.addChild(this._childrenDisplay);\r\n    }\r\n    _afterChanged() {\r\n        super._afterChanged();\r\n        this._childrenPrep = false;\r\n        this._childrenUpdt = false;\r\n    }\r\n    _dispose() {\r\n        $array.eachReverse(this.allChildren(), (child) => {\r\n            child.dispose();\r\n        });\r\n        if (this.getPrivate(\"htmlElement\")) {\r\n            this._root._removeHTMLContent(this);\r\n        }\r\n        super._dispose();\r\n    }\r\n    _beforeChanged() {\r\n        if (!this._childrenPrep) {\r\n            this._prepareChildren();\r\n        }\r\n        if (!this._childrenUpdt) {\r\n            this._updateChildren();\r\n        }\r\n        super._beforeChanged();\r\n    }\r\n    _changed() {\r\n        super._changed();\r\n        if (this.isDirty(\"interactiveChildren\")) {\r\n            this._display.interactiveChildren = this.get(\"interactiveChildren\", false);\r\n        }\r\n        if (this.isDirty(\"layout\")) {\r\n            this._prevWidth = 0;\r\n            this._prevHeight = 0;\r\n            this.markDirtyBounds();\r\n            if (this._prevSettings.layout) {\r\n                this.children.each((child) => {\r\n                    child.removePrivate(\"x\");\r\n                    child.removePrivate(\"y\");\r\n                });\r\n            }\r\n        }\r\n        if (this.isDirty(\"paddingTop\") || this.isDirty(\"paddingBottom\") || this.isDirty(\"paddingLeft\") || this.isDirty(\"paddingRight\")) {\r\n            this.children.each((child) => {\r\n                child.markDirtyPosition();\r\n            });\r\n        }\r\n        if (this.isDirty(\"maskContent\")) {\r\n            const childrenDisplay = this._childrenDisplay;\r\n            let contentMask = this._contentMask;\r\n            if (this.get(\"maskContent\")) {\r\n                if (!contentMask) {\r\n                    contentMask = Rectangle.new(this._root, {\r\n                        x: -.5,\r\n                        y: -.5,\r\n                        width: this.width() + 1,\r\n                        height: this.height() + 1\r\n                    });\r\n                    this._contentMask = contentMask;\r\n                    childrenDisplay.addChildAt(contentMask._display, 0);\r\n                    childrenDisplay.mask = contentMask._display;\r\n                }\r\n            }\r\n            else {\r\n                if (contentMask) {\r\n                    childrenDisplay.removeChild(contentMask._display);\r\n                    childrenDisplay.mask = null;\r\n                    contentMask.dispose();\r\n                    this._contentMask = undefined;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    _updateSize() {\r\n        super._updateSize();\r\n        $array.each(this._percentageSizeChildren, (child) => {\r\n            child._updateSize();\r\n        });\r\n        $array.each(this._percentagePositionChildren, (child) => {\r\n            child.markDirtyPosition();\r\n            child._updateSize();\r\n        });\r\n        this.updateBackground();\r\n    }\r\n    updateBackground() {\r\n        const background = this.get(\"background\");\r\n        let bounds = this._localBounds;\r\n        if (bounds && !this.isHidden()) {\r\n            let x = bounds.left;\r\n            let y = bounds.top;\r\n            let w = bounds.right - x;\r\n            let h = bounds.bottom - y;\r\n            let maxWidth = this.get(\"maxWidth\");\r\n            let maxHeight = this.get(\"maxHeight\");\r\n            if (maxHeight) {\r\n                if (h > maxHeight) {\r\n                    h = maxHeight;\r\n                }\r\n            }\r\n            if (maxWidth) {\r\n                if (w > maxWidth) {\r\n                    w = maxWidth;\r\n                }\r\n            }\r\n            let width = this.width();\r\n            let height = this.height();\r\n            if (background) {\r\n                background.setAll({ width: w, height: h, x: x, y: y });\r\n                if (this._display.interactive) {\r\n                    background._display.interactive = true;\r\n                }\r\n            }\r\n            const contentMask = this._contentMask;\r\n            if (contentMask) {\r\n                contentMask.setAll({ width: width + 1, height: height + 1 });\r\n            }\r\n            const verticalScrollbar = this.get(\"verticalScrollbar\");\r\n            if (verticalScrollbar) {\r\n                verticalScrollbar.set(\"height\", height);\r\n                verticalScrollbar.set(\"x\", width - verticalScrollbar.width() - verticalScrollbar.get(\"marginRight\", 0));\r\n                let start = verticalScrollbar.get(\"start\", 0);\r\n                let end = verticalScrollbar.get(\"end\", 1);\r\n                if (start > 1 - end) {\r\n                    verticalScrollbar.set(\"start\", Math.max(0, end - height / this._contentHeight));\r\n                }\r\n                else {\r\n                    verticalScrollbar.set(\"end\", Math.min(1, start + height / this._contentHeight));\r\n                }\r\n                const bg = verticalScrollbar.get(\"background\");\r\n                if (bg) {\r\n                    bg.setAll({ width: verticalScrollbar.width(), height: height });\r\n                }\r\n                let visible = true;\r\n                if (this._contentHeight <= height) {\r\n                    visible = false;\r\n                }\r\n                verticalScrollbar.setPrivate(\"visible\", visible);\r\n            }\r\n        }\r\n    }\r\n    _applyThemes(force = false) {\r\n        if (super._applyThemes(force)) {\r\n            this.eachChildren((child) => {\r\n                child._applyThemes(force);\r\n            });\r\n            return true;\r\n        }\r\n        else {\r\n            return false;\r\n        }\r\n    }\r\n    _applyState(name) {\r\n        super._applyState(name);\r\n        if (this.get(\"setStateOnChildren\")) {\r\n            this.eachChildren((child) => {\r\n                child.states.apply(name);\r\n            });\r\n        }\r\n    }\r\n    _applyStateAnimated(name, duration) {\r\n        super._applyStateAnimated(name, duration);\r\n        if (this.get(\"setStateOnChildren\")) {\r\n            this.eachChildren((child) => {\r\n                child.states.applyAnimate(name, duration);\r\n            });\r\n        }\r\n    }\r\n    /**\r\n     * Returns container's inner width (width without padding) in pixels.\r\n     *\r\n     * @return Inner width (px)\r\n     */\r\n    innerWidth() {\r\n        return this.width() - this.get(\"paddingRight\", 0) - this.get(\"paddingLeft\", 0);\r\n    }\r\n    /**\r\n     * Returns container's inner height (height without padding) in pixels.\r\n     *\r\n     * @return Inner height (px)\r\n     */\r\n    innerHeight() {\r\n        return this.height() - this.get(\"paddingTop\", 0) - this.get(\"paddingBottom\", 0);\r\n    }\r\n    _getBounds() {\r\n        if (!this.get(\"html\")) {\r\n            let width = this.get(\"width\");\r\n            let height = this.get(\"height\");\r\n            let pWidth = this.getPrivate(\"width\");\r\n            let pHeight = this.getPrivate(\"height\");\r\n            let bounds = {\r\n                left: 0,\r\n                top: 0,\r\n                right: this.width(),\r\n                bottom: this.height()\r\n            };\r\n            let layout = this.get(\"layout\");\r\n            let horizontal = false;\r\n            let vertical = false;\r\n            if (layout instanceof HorizontalLayout || layout instanceof GridLayout) {\r\n                horizontal = true;\r\n            }\r\n            if (layout instanceof VerticalLayout) {\r\n                vertical = true;\r\n            }\r\n            if ((width != null || pWidth != null) && (height != null || pHeight != null) && !this.get(\"verticalScrollbar\")) {\r\n                // void\r\n            }\r\n            else {\r\n                let m = Number.MAX_VALUE;\r\n                let l = m;\r\n                let r = -m;\r\n                let t = m;\r\n                let b = -m;\r\n                const paddingLeft = this.get(\"paddingLeft\", 0);\r\n                const paddingTop = this.get(\"paddingTop\", 0);\r\n                const paddingRight = this.get(\"paddingRight\", 0);\r\n                const paddingBottom = this.get(\"paddingBottom\", 0);\r\n                this.children.each((child) => {\r\n                    if (child.get(\"position\") != \"absolute\" && child.get(\"isMeasured\")) {\r\n                        let childBounds = child.adjustedLocalBounds();\r\n                        let childX = child.x();\r\n                        let childY = child.y();\r\n                        let cl = childX + childBounds.left;\r\n                        let cr = childX + childBounds.right;\r\n                        let ct = childY + childBounds.top;\r\n                        let cb = childY + childBounds.bottom;\r\n                        if (horizontal) {\r\n                            cl -= child.get(\"marginLeft\", 0);\r\n                            cr += child.get(\"marginRight\", 0);\r\n                        }\r\n                        if (vertical) {\r\n                            ct -= child.get(\"marginTop\", 0);\r\n                            cb += child.get(\"marginBottom\", 0);\r\n                        }\r\n                        if (cl < l) {\r\n                            l = cl;\r\n                        }\r\n                        if (cr > r) {\r\n                            r = cr;\r\n                        }\r\n                        if (ct < t) {\r\n                            t = ct;\r\n                        }\r\n                        if (cb > b) {\r\n                            b = cb;\r\n                        }\r\n                    }\r\n                });\r\n                if (l == m) {\r\n                    l = 0;\r\n                }\r\n                if (r == -m) {\r\n                    r = 0;\r\n                }\r\n                if (t == m) {\r\n                    t = 0;\r\n                }\r\n                if (b == -m) {\r\n                    b = 0;\r\n                }\r\n                bounds.left = l - paddingLeft;\r\n                bounds.top = t - paddingTop;\r\n                bounds.right = r + paddingRight;\r\n                bounds.bottom = b + paddingBottom;\r\n                const minWidth = this.get(\"minWidth\");\r\n                if ($type.isNumber(minWidth) && minWidth > 0) {\r\n                    if (bounds.right - bounds.left < minWidth) {\r\n                        if (bounds.right >= minWidth) {\r\n                            bounds.left = bounds.right - minWidth;\r\n                        }\r\n                        else {\r\n                            bounds.right = bounds.left + minWidth;\r\n                        }\r\n                    }\r\n                }\r\n                const minHeight = this.get(\"minHeight\");\r\n                if ($type.isNumber(minHeight) && minHeight > 0) {\r\n                    if (bounds.bottom - bounds.top < minHeight) {\r\n                        if (bounds.bottom >= minHeight) {\r\n                            bounds.top = bounds.bottom - minHeight;\r\n                        }\r\n                        else {\r\n                            bounds.bottom = bounds.top + minHeight;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            this._contentWidth = bounds.right - bounds.left;\r\n            this._contentHeight = bounds.bottom - bounds.top;\r\n            if ($type.isNumber(width)) {\r\n                bounds.left = 0;\r\n                bounds.right = width;\r\n            }\r\n            if ($type.isNumber(pWidth)) {\r\n                bounds.left = 0;\r\n                bounds.right = pWidth;\r\n            }\r\n            if ($type.isNumber(height)) {\r\n                bounds.top = 0;\r\n                bounds.bottom = height;\r\n            }\r\n            if ($type.isNumber(pHeight)) {\r\n                bounds.top = 0;\r\n                bounds.bottom = pHeight;\r\n            }\r\n            this._localBounds = bounds;\r\n        }\r\n        else {\r\n            let bounds = this._localBounds;\r\n            if (bounds) {\r\n                this._contentWidth = bounds.right - bounds.left;\r\n                this._contentHeight = bounds.bottom - bounds.top;\r\n            }\r\n        }\r\n    }\r\n    _updateBounds() {\r\n        const layout = this.get(\"layout\");\r\n        if (layout) {\r\n            layout.updateContainer(this);\r\n        }\r\n        super._updateBounds();\r\n        this.updateBackground();\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    markDirty() {\r\n        super.markDirty();\r\n        this._root._addDirtyParent(this);\r\n    }\r\n    _prepareChildren() {\r\n        this._childrenPrep = true;\r\n        const innerWidth = this.innerWidth();\r\n        const innerHeight = this.innerHeight();\r\n        if (innerWidth != this._prevWidth || innerHeight != this._prevHeight) {\r\n            let layout = this.get(\"layout\");\r\n            let horizontal = false;\r\n            let vertical = false;\r\n            if (layout) {\r\n                if (layout instanceof HorizontalLayout || layout instanceof GridLayout) {\r\n                    horizontal = true;\r\n                }\r\n                if (layout instanceof VerticalLayout) {\r\n                    vertical = true;\r\n                }\r\n            }\r\n            $array.each(this._percentageSizeChildren, (child) => {\r\n                if (!horizontal) {\r\n                    let width = child.get(\"width\");\r\n                    if (width instanceof Percent) {\r\n                        child.setPrivate(\"width\", width.value * innerWidth);\r\n                    }\r\n                }\r\n                if (!vertical) {\r\n                    let height = child.get(\"height\");\r\n                    if (height instanceof Percent) {\r\n                        child.setPrivate(\"height\", height.value * innerHeight);\r\n                    }\r\n                }\r\n            });\r\n            $array.each(this._percentagePositionChildren, (child) => {\r\n                child.markDirtyPosition();\r\n                child.markDirtyBounds();\r\n            });\r\n            this._prevWidth = innerWidth;\r\n            this._prevHeight = innerHeight;\r\n            this._sizeDirty = true;\r\n            this.updateBackground();\r\n        }\r\n        //this._handleStates();\r\n    }\r\n    _updateHTMLContent() {\r\n        const html = this.get(\"html\", \"\");\r\n        if (html && html !== \"\") {\r\n            this._root._setHTMLContent(this, populateString(this, html));\r\n        }\r\n        else {\r\n            this._root._removeHTMLContent(this);\r\n        }\r\n        this._root._positionHTMLElement(this);\r\n    }\r\n    /**\r\n     * If scrolling is enabled on the Container (by adding `verticalScrollbar`)\r\n     * the Container will scroll in such way so that target element becomes\r\n     * visible if its currently outside of view.\r\n     *\r\n     * @param  child  Target child\r\n     * @since 5.10.5\r\n     */\r\n    scrollToChild(child) {\r\n        const verticalScrollbar = this.get(\"verticalScrollbar\");\r\n        if (verticalScrollbar) {\r\n            let y = child.y();\r\n            let h = this.innerHeight();\r\n            let ch = child.height();\r\n            let contentH = this._contentHeight;\r\n            let max = 1 - (h - ch / 2) / contentH;\r\n            if (y + ch * .7 + this._childrenDisplay.y > h || y - ch * .3 + this._childrenDisplay.y < 0) {\r\n                let pos = Math.max(0, Math.min(max, (y - ch / 2) / contentH));\r\n                verticalScrollbar.animate({ key: \"start\", to: pos, duration: verticalScrollbar.get(\"animationDuration\", 0), easing: verticalScrollbar.get(\"animationEasing\") });\r\n            }\r\n        }\r\n    }\r\n    _updateChildren() {\r\n        this._childrenUpdt = true;\r\n        if (this.isDirty(\"html\")) {\r\n            this._updateHTMLContent();\r\n        }\r\n        if (this.isDirty(\"verticalScrollbar\")) {\r\n            const verticalScrollbar = this.get(\"verticalScrollbar\");\r\n            if (verticalScrollbar) {\r\n                verticalScrollbar._setParent(this);\r\n                verticalScrollbar.startGrip.setPrivate(\"visible\", false);\r\n                verticalScrollbar.endGrip.setPrivate(\"visible\", false);\r\n                this.set(\"maskContent\", true);\r\n                this.set(\"paddingRight\", verticalScrollbar.width() + verticalScrollbar.get(\"marginRight\", 0) + verticalScrollbar.get(\"marginLeft\", 0));\r\n                let background = this.get(\"background\");\r\n                if (!background) {\r\n                    background = this.set(\"background\", Rectangle.new(this._root, {\r\n                        themeTags: [\"background\"],\r\n                        fillOpacity: 0,\r\n                        fill: this._root.interfaceColors.get(\"alternativeBackground\")\r\n                    }));\r\n                }\r\n                this._vsbd0 = this.events.on(\"wheel\", (event) => {\r\n                    const wheelEvent = event.originalEvent;\r\n                    // Ignore wheel event if it is happening on a non-chart element, e.g. if\r\n                    // some page element is over the chart.\r\n                    if ($utils.isLocalEvent(wheelEvent, this)) {\r\n                        wheelEvent.preventDefault();\r\n                    }\r\n                    else {\r\n                        return;\r\n                    }\r\n                    let shiftY = wheelEvent.deltaY / 5000;\r\n                    const start = verticalScrollbar.get(\"start\", 0);\r\n                    const end = verticalScrollbar.get(\"end\", 1);\r\n                    if (start + shiftY <= 0) {\r\n                        shiftY = -start;\r\n                    }\r\n                    if (end + shiftY >= 1) {\r\n                        shiftY = 1 - end;\r\n                    }\r\n                    if (start + shiftY >= 0 && end + shiftY <= 1) {\r\n                        verticalScrollbar.set(\"start\", start + shiftY);\r\n                        verticalScrollbar.set(\"end\", end + shiftY);\r\n                    }\r\n                });\r\n                this._disposers.push(this._vsbd0);\r\n                this._vsbd1 = verticalScrollbar.events.on(\"rangechanged\", () => {\r\n                    let h = this._contentHeight;\r\n                    const childrenDisplay = this._childrenDisplay;\r\n                    const contentMask = this._contentMask;\r\n                    childrenDisplay.y = -verticalScrollbar.get(\"start\", 0) * h;\r\n                    childrenDisplay.markDirtyLayer();\r\n                    if (contentMask) {\r\n                        contentMask._display.y = -childrenDisplay.y;\r\n                        childrenDisplay.mask = contentMask._display;\r\n                    }\r\n                });\r\n                this._disposers.push(this._vsbd1);\r\n                this._display.addChild(verticalScrollbar._display);\r\n            }\r\n            else {\r\n                const previous = this._prevSettings.verticalScrollbar;\r\n                if (previous) {\r\n                    this._display.removeChild(previous._display);\r\n                    if (this._vsbd0) {\r\n                        this._vsbd0.dispose();\r\n                    }\r\n                    if (this._vsbd1) {\r\n                        this._vsbd1.dispose();\r\n                    }\r\n                    const childrenDisplay = this._childrenDisplay;\r\n                    childrenDisplay.y = 0;\r\n                    this.setPrivate(\"height\", undefined);\r\n                    this.set(\"maskContent\", false);\r\n                    this.set(\"paddingRight\", undefined);\r\n                }\r\n            }\r\n        }\r\n        if (this.isDirty(\"background\")) {\r\n            // TODO maybe this should dispose ?\r\n            const previous = this._prevSettings[\"background\"];\r\n            if (previous) {\r\n                this._display.removeChild(previous._display);\r\n            }\r\n            const background = this.get(\"background\");\r\n            if (background instanceof Sprite) {\r\n                background.set(\"isMeasured\", false);\r\n                background._setParent(this);\r\n                this._display.addChildAt(background._display, 0);\r\n            }\r\n        }\r\n        if (this.isDirty(\"mask\")) {\r\n            const mask = this.get(\"mask\");\r\n            const previous = this._prevSettings[\"mask\"];\r\n            if (previous) {\r\n                this._display.removeChild(previous._display);\r\n                if (previous != mask) {\r\n                    previous.dispose();\r\n                }\r\n            }\r\n            if (mask) {\r\n                const parent = mask.parent;\r\n                if (parent) {\r\n                    parent.children.removeValue(mask);\r\n                }\r\n                mask._setParent(this);\r\n                this._display.addChildAt(mask._display, 0);\r\n                this._childrenDisplay.mask = mask._display;\r\n            }\r\n        }\r\n    }\r\n    _processTemplateField() {\r\n        super._processTemplateField();\r\n        this.children.each((child) => {\r\n            child._processTemplateField();\r\n        });\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    walkChildren(f) {\r\n        this.children.each((child) => {\r\n            if (child instanceof Container) {\r\n                child.walkChildren(f);\r\n            }\r\n            f(child);\r\n        });\r\n    }\r\n    eachChildren(f) {\r\n        const background = this.get(\"background\");\r\n        if (background) {\r\n            f(background);\r\n        }\r\n        const verticalScrollbar = this.get(\"verticalScrollbar\");\r\n        if (verticalScrollbar) {\r\n            f(verticalScrollbar);\r\n        }\r\n        const mask = this.get(\"mask\");\r\n        if (mask) {\r\n            f(mask);\r\n        }\r\n        this.children.values.forEach((child) => {\r\n            f(child);\r\n        });\r\n    }\r\n    allChildren() {\r\n        const output = [];\r\n        this.eachChildren((x) => {\r\n            output.push(x);\r\n        });\r\n        return output;\r\n    }\r\n    _setDataItem(dataItem) {\r\n        const updated = (dataItem !== this._dataItem);\r\n        super._setDataItem(dataItem);\r\n        const html = this.get(\"html\", \"\");\r\n        if (html && html !== \"\" && updated) {\r\n            this._root._setHTMLContent(this, populateString(this, html));\r\n        }\r\n    }\r\n    contentWidth() {\r\n        return this._contentWidth;\r\n    }\r\n    contentHeight() {\r\n        return this._contentHeight;\r\n    }\r\n}\r\nObject.defineProperty(Container, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"Container\"\r\n});\r\nObject.defineProperty(Container, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Sprite.classNames.concat([Container.className])\r\n});\r\n//# sourceMappingURL=Container.js.map","import { Sprite } from \"./Sprite\";\r\nimport { populateString } from \"../util/PopulateString\";\r\nimport * as $array from \"../util/Array\";\r\nimport * as $utils from \"../util/Utils\";\r\nimport { Disposer } from \"../util/Disposer\";\r\n/**\r\n * @ignore Text is an internal class. Use Label instead.\r\n */\r\nexport class Text extends Sprite {\r\n    constructor() {\r\n        super(...arguments);\r\n        Object.defineProperty(this, \"textStyle\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this._root._renderer.makeTextStyle()\r\n        });\r\n        Object.defineProperty(this, \"_display\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this._root._renderer.makeText(\"\", this.textStyle)\r\n        });\r\n        Object.defineProperty(this, \"_textStyles\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: [\r\n                \"textAlign\",\r\n                \"fontFamily\",\r\n                \"fontSize\",\r\n                \"fontStyle\",\r\n                \"fontWeight\",\r\n                \"fontStyle\",\r\n                \"fontVariant\",\r\n                \"textDecoration\",\r\n                \"shadowColor\",\r\n                \"shadowBlur\",\r\n                \"shadowOffsetX\",\r\n                \"shadowOffsetY\",\r\n                \"shadowOpacity\",\r\n                // \"leading\",\r\n                // \"letterSpacing\",\r\n                \"lineHeight\",\r\n                \"baselineRatio\",\r\n                //\"padding\",\r\n                // \"stroke\",\r\n                // \"strokeThickness\",\r\n                // \"trim\",\r\n                // \"wordWrap\",\r\n                \"direction\",\r\n                \"textBaseline\",\r\n                \"oversizedBehavior\",\r\n                \"breakWords\",\r\n                \"ellipsis\",\r\n                \"minScale\",\r\n                \"maxChars\"\r\n            ]\r\n        });\r\n        Object.defineProperty(this, \"_originalScale\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n    }\r\n    _updateBounds() {\r\n        if (!this.get(\"text\")) {\r\n            let newBounds = {\r\n                left: 0,\r\n                right: 0,\r\n                top: 0,\r\n                bottom: 0,\r\n            };\r\n            this._adjustedLocalBounds = newBounds;\r\n        }\r\n        else {\r\n            super._updateBounds();\r\n            let fillGradient = this.get(\"fillGradient\");\r\n            if (fillGradient) {\r\n                this._display.style.fill = fillGradient.getFill(this);\r\n            }\r\n        }\r\n    }\r\n    _changed() {\r\n        super._changed();\r\n        this._display.clear();\r\n        let textStyle = this.textStyle;\r\n        if (this.isDirty(\"opacity\")) {\r\n            let opacity = this.get(\"opacity\", 1);\r\n            this._display.alpha = opacity;\r\n        }\r\n        if (this.isDirty(\"text\") || this.isDirty(\"populateText\")) {\r\n            this._display.text = this._getText();\r\n            this.markDirtyBounds();\r\n            if (this.get(\"role\") == \"tooltip\") {\r\n                this._root.updateTooltip(this);\r\n            }\r\n        }\r\n        if (this.isPrivateDirty(\"tooltipElement\")) {\r\n            const tooltipElement = this.getPrivate(\"tooltipElement\");\r\n            if (tooltipElement) {\r\n                this._disposers.push(new Disposer(() => {\r\n                    this._root._removeTooltipElement(this);\r\n                }));\r\n            }\r\n        }\r\n        if (this.isDirty(\"width\")) {\r\n            textStyle.wordWrapWidth = this.width();\r\n            this.markDirtyBounds();\r\n        }\r\n        if (this.isDirty(\"oversizedBehavior\")) {\r\n            textStyle.oversizedBehavior = this.get(\"oversizedBehavior\", \"none\");\r\n            this._display.invalidateVisibility();\r\n            this.markDirtyBounds();\r\n        }\r\n        if (this.isDirty(\"breakWords\")) {\r\n            textStyle.breakWords = this.get(\"breakWords\", false);\r\n            this.markDirtyBounds();\r\n        }\r\n        if (this.isDirty(\"ellipsis\")) {\r\n            textStyle.ellipsis = this.get(\"ellipsis\");\r\n            this.markDirtyBounds();\r\n        }\r\n        if (this.isDirty(\"ignoreFormatting\")) {\r\n            textStyle.ignoreFormatting = this.get(\"ignoreFormatting\", false);\r\n            this.markDirtyBounds();\r\n        }\r\n        if (this.isDirty(\"minScale\")) {\r\n            textStyle.minScale = this.get(\"minScale\", 0);\r\n            this.markDirtyBounds();\r\n        }\r\n        if (this.isDirty(\"fill\") || this.isDirty(\"fillGradient\")) {\r\n            const fill = this.get(\"fill\");\r\n            const fillGradient = this.get(\"fillGradient\");\r\n            const fillOpacity = this.get(\"fillOpacity\");\r\n            if (fillGradient) {\r\n                if (fill) {\r\n                    const stops = fillGradient.get(\"stops\", []);\r\n                    if (stops.length) {\r\n                        $array.each(stops, (stop) => {\r\n                            if ((!stop.color || stop.colorInherited) && fill) {\r\n                                stop.color = fill;\r\n                                stop.colorInherited = true;\r\n                            }\r\n                            if (stop.opacity == null || stop.opacityInherited) {\r\n                                stop.opacity = fillOpacity;\r\n                                stop.opacityInherited = true;\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n                textStyle.fill = fillGradient.getFill(this);\r\n            }\r\n            else if (fill) {\r\n                textStyle.fill = fill;\r\n            }\r\n        }\r\n        if (this.isDirty(\"fillOpacity\")) {\r\n            let fillOpacity = this.get(\"fillOpacity\", 1);\r\n            if (fillOpacity) {\r\n                textStyle.fillOpacity = fillOpacity;\r\n            }\r\n        }\r\n        if (this.isDirty(\"maxWidth\") || this.isPrivateDirty(\"maxWidth\")) {\r\n            textStyle.maxWidth = this.get(\"maxWidth\", this.getPrivate(\"maxWidth\"));\r\n            this.markDirtyBounds();\r\n        }\r\n        if (this.isDirty(\"maxHeight\") || this.isPrivateDirty(\"maxHeight\")) {\r\n            textStyle.maxHeight = this.get(\"maxHeight\", this.getPrivate(\"maxHeight\"));\r\n            this.markDirtyBounds();\r\n        }\r\n        $array.each(this._textStyles, (styleName) => {\r\n            if (this._dirty[styleName]) {\r\n                textStyle[styleName] = this.get(styleName);\r\n                this.markDirtyBounds();\r\n            }\r\n        });\r\n        textStyle[\"fontSize\"] = this.get(\"fontSize\");\r\n        textStyle[\"fontFamily\"] = this.get(\"fontFamily\");\r\n        this._display.style = textStyle;\r\n        if (this.isDirty(\"role\") && this.get(\"role\") == \"tooltip\") {\r\n            this._root.updateTooltip(this);\r\n        }\r\n    }\r\n    _getText() {\r\n        let text = this.get(\"text\", \"\");\r\n        if (this.get(\"maxChars\")) {\r\n            text = $utils.truncateTextWithEllipsis(text, this.get(\"maxChars\", 100000000), this.get(\"breakWords\"), this.get(\"ellipsis\"));\r\n        }\r\n        return this.get(\"populateText\") ? populateString(this, text) : text;\r\n    }\r\n    _getAccessibleText() {\r\n        const ariaLabel = this.get(\"ariaLabel\");\r\n        if (ariaLabel !== undefined) {\r\n            return this.get(\"populateText\") ? populateString(this, ariaLabel) : ariaLabel;\r\n        }\r\n        return this._getText();\r\n    }\r\n    /**\r\n     * Forces the text to be re-evaluated and re-populated.\r\n     */\r\n    markDirtyText() {\r\n        this._display.text = this._getText();\r\n        if (this.get(\"role\") == \"tooltip\") {\r\n            this._root.updateTooltip(this);\r\n        }\r\n        this.markDirtyBounds();\r\n        this.markDirty();\r\n    }\r\n    _setDataItem(dataItem) {\r\n        super._setDataItem(dataItem);\r\n        if (this.get(\"populateText\")) {\r\n            this.markDirtyText();\r\n        }\r\n    }\r\n    getNumberFormatter() {\r\n        if (this.parent) {\r\n            return this.parent.getNumberFormatter();\r\n        }\r\n        else {\r\n            return super.getNumberFormatter();\r\n        }\r\n    }\r\n    getDateFormatter() {\r\n        if (this.parent) {\r\n            return this.parent.getDateFormatter();\r\n        }\r\n        else {\r\n            return super.getDateFormatter();\r\n        }\r\n    }\r\n    getDurationFormatter() {\r\n        if (this.parent) {\r\n            return this.parent.getDurationFormatter();\r\n        }\r\n        else {\r\n            return super.getDurationFormatter();\r\n        }\r\n    }\r\n}\r\nObject.defineProperty(Text, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"Text\"\r\n});\r\nObject.defineProperty(Text, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Sprite.classNames.concat([Text.className])\r\n});\r\n//# sourceMappingURL=Text.js.map","import { Text } from \"../render/Text\";\r\nimport { p50, p100 } from \"../util/Percent\";\r\nimport { Container } from \"./Container\";\r\nimport * as $array from \"../../core/util/Array\";\r\nimport * as $type from \"../../core/util/Type\";\r\n/**\r\n * Creates a label with support for in-line styling and data bindings.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/labels/} for more info\r\n */\r\nexport class Label extends Container {\r\n    constructor() {\r\n        super(...arguments);\r\n        Object.defineProperty(this, \"_text\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_textKeys\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: [\r\n                \"text\",\r\n                \"fill\",\r\n                \"fillGradient\",\r\n                \"fillOpacity\",\r\n                \"textAlign\",\r\n                \"fontFamily\",\r\n                \"fontSize\",\r\n                \"fontStyle\",\r\n                \"fontWeight\",\r\n                \"fontStyle\",\r\n                \"fontVariant\",\r\n                \"textDecoration\",\r\n                \"shadowColor\",\r\n                \"shadowBlur\",\r\n                \"shadowOffsetX\",\r\n                \"shadowOffsetY\",\r\n                \"shadowOpacity\",\r\n                // \"leading\",\r\n                // \"letterSpacing\",\r\n                \"lineHeight\",\r\n                \"baselineRatio\",\r\n                //\"padding\",\r\n                // \"stroke\",\r\n                // \"strokeThickness\",\r\n                // \"trim\",\r\n                // \"wordWrap\",\r\n                \"direction\",\r\n                \"textBaseline\",\r\n                \"oversizedBehavior\",\r\n                \"breakWords\",\r\n                \"ellipsis\",\r\n                \"minScale\",\r\n                \"populateText\",\r\n                \"role\",\r\n                \"ignoreFormatting\",\r\n                \"maxChars\",\r\n                \"ariaLabel\"\r\n            ]\r\n        });\r\n    }\r\n    /**\r\n     * @ignore Text is not to be used directly\r\n     */\r\n    get text() {\r\n        return this._text;\r\n    }\r\n    _afterNew() {\r\n        super._afterNew();\r\n        this._makeText();\r\n        $array.each(this._textKeys, (property) => {\r\n            const propValue = this.get(property);\r\n            if (propValue != undefined) {\r\n                this._text.set(property, propValue);\r\n            }\r\n        });\r\n        if (this.get(\"html\", \"\") !== \"\") {\r\n            this._text.set(\"text\", \"\");\r\n        }\r\n        this.onPrivate(\"maxWidth\", () => {\r\n            this._setMaxDimentions();\r\n        });\r\n        this.onPrivate(\"maxHeight\", () => {\r\n            this._setMaxDimentions();\r\n        });\r\n    }\r\n    _makeText() {\r\n        this._text = this.children.push(Text.new(this._root, {}));\r\n    }\r\n    _updateChildren() {\r\n        super._updateChildren();\r\n        const text = this._text;\r\n        $array.each(this._textKeys, (property) => {\r\n            this._text.set(property, this.get(property));\r\n        });\r\n        if (this.isDirty(\"maxWidth\") || this.isDirty(\"maxHeight\") || this.isDirty(\"rotation\")) {\r\n            this._setMaxDimentions();\r\n        }\r\n        // Do not show regular text if HTML is used\r\n        if (this.get(\"html\", \"\") !== \"\") {\r\n            text.set(\"text\", \"\");\r\n        }\r\n        else {\r\n            text.set(\"text\", this.get(\"text\"));\r\n            this._maybeUpdateHTMLColor();\r\n        }\r\n        if (this.isDirty(\"fill\") || this.isDirty(\"fillGradient\")) {\r\n            this._maybeUpdateHTMLColor();\r\n        }\r\n        if (this.isDirty(\"textAlign\") || this.isDirty(\"width\")) {\r\n            const textAlign = this.get(\"textAlign\");\r\n            let x;\r\n            if (this.get(\"width\") != null) {\r\n                if (textAlign == \"right\") {\r\n                    x = p100;\r\n                }\r\n                else if (textAlign == \"center\") {\r\n                    x = p50;\r\n                }\r\n                else {\r\n                    x = 0;\r\n                }\r\n            }\r\n            else {\r\n                if (textAlign == \"left\" || textAlign == \"start\") {\r\n                    x = this.get(\"paddingLeft\", 0);\r\n                }\r\n                else if (textAlign == \"right\" || textAlign == \"end\") {\r\n                    x = -this.get(\"paddingRight\", 0);\r\n                }\r\n            }\r\n            text.set(\"x\", x);\r\n        }\r\n        const background = this.get(\"background\");\r\n        if (background) {\r\n            background.setPrivate(\"visible\", text._display.textVisible);\r\n        }\r\n    }\r\n    _maybeUpdateHTMLColor() {\r\n        const htmlElement = this.getPrivate(\"htmlElement\");\r\n        if (htmlElement && this.get(\"fill\")) {\r\n            htmlElement.style.color = this.get(\"fill\").toCSSHex();\r\n            //@todo support gradient\r\n        }\r\n    }\r\n    _setMaxDimentions() {\r\n        const rotation = this.get(\"rotation\");\r\n        const vertical = rotation == 90 || rotation == 270 || rotation == -90;\r\n        const text = this._text;\r\n        const maxWidth = this.get(\"maxWidth\", this.getPrivate(\"maxWidth\", Infinity));\r\n        if ($type.isNumber(maxWidth)) {\r\n            text.set(vertical ? \"maxHeight\" : \"maxWidth\", maxWidth - this.get(\"paddingTop\", 0) - this.get(\"paddingBottom\", 0));\r\n        }\r\n        else {\r\n            text.set(vertical ? \"maxHeight\" : \"maxWidth\", undefined);\r\n        }\r\n        const maxHeight = this.get(\"maxHeight\", this.getPrivate(\"maxHeight\", Infinity));\r\n        if ($type.isNumber(maxHeight)) {\r\n            text.set(vertical ? \"maxWidth\" : \"maxHeight\", maxHeight - this.get(\"paddingLeft\", 0) - this.get(\"paddingRight\", 0));\r\n        }\r\n        else {\r\n            text.set(vertical ? \"maxWidth\" : \"maxHeight\", undefined);\r\n        }\r\n        this.root.events.once(\"frameended\", () => {\r\n            text.markDirtyBounds();\r\n        });\r\n    }\r\n    _setDataItem(dataItem) {\r\n        super._setDataItem(dataItem);\r\n        this._markDirtyKey(\"text\");\r\n        this._markDirtyKey(\"html\");\r\n        const text = this._text;\r\n        if (text.get(\"populateText\")) {\r\n            text.markDirtyText();\r\n        }\r\n        const html = this.get(\"html\");\r\n        if (html && html !== \"\") {\r\n            this._updateHTMLContent();\r\n        }\r\n    }\r\n    /**\r\n     * Returns text with populated placeholders and formatting if `populateText` is\r\n     * set to `true`.\r\n     *\r\n     * @return Populated text\r\n     */\r\n    getText() {\r\n        return this._text._getText();\r\n    }\r\n    /**\r\n     * Returns \"aria-label\" text with populated placeholders and formatting\r\n     * if `populateText` is set to `true`.\r\n     *\r\n     * @return Populated text\r\n     */\r\n    getAccessibleText() {\r\n        return this._text._getAccessibleText();\r\n    }\r\n}\r\nObject.defineProperty(Label, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"Label\"\r\n});\r\nObject.defineProperty(Label, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Container.classNames.concat([Label.className])\r\n});\r\n//# sourceMappingURL=Label.js.map"],"names":["checkBounds","index","len","List","initial","EventDispatcher","value","i","length","$array.indexOf","newValue","oldValue","a","b","oldIndex","newIndex","oldValues","$array.insertIndex","value_a","value_b","$array.removeIndex","toIndex","values","$array.each","source","newArray","old","f","$array.eachReverse","ListAutoDispose","currentAutoDispose","x","ListTemplate","template","make","Children","container","change","child","childrenDisplay","PI","HALFPI","RADIANS","DEGREES","round","precision","floor","isNumber","rounded","d","ceil","getCubicControlPointA","p0","p1","p2","tensionX","tensionY","getCubicControlPointB","p3","fitToRange","min","max","sin","angle","tan","cos","normalizeAngle","getArcBounds","cx","cy","startAngle","endAngle","radius","minX","minY","maxX","maxY","bpoints","getArcPoint","fromAngle","toAngle","pt","arc","mergeBounds","bounds","bound","left","top","right","bottom","fitAngleToRange","temp","count","maxEnd","maxStart","inBounds","point","getAngle","point1","point2","diffX","diffY","getPointOnQuadraticCurve","pointA","pointB","controlPoint","position","y","getPointOnLine","closest","referenceValue","prev","curr","boundsOverlap","bounds1","bounds2","horizontalOverlap","verticalOverlap","spiralPoints","radiusY","innerRadius","step","radiusStep","r","points","stepSize","c","degrees","circlesOverlap","circle1","circle2","linear","t","quad","cubic","pow","e","exp","sine","$math.HALFPI","circle","yoyo","ease","out","inOut","b1","b2","b3","b4","b5","b6","b7","b8","b9","b0","bounce","bounceOut","tau","amplitude","period","s","elastic","v","State","entity","settings","$object.each","key","fallback","$object.keys","seen","defaultState","duration","easing","$ease.cubic","animations","animation","States","name","state","newState","Registry","registry","addLicense","license","disposeAllRootElements","root","getRootById","id","found","item","Adapters","callback","callbacks","Disposer","$array.removeFirst","Animation","from","to","loops","startingTime","getInterpolate","resolve","_reject","listener","stopped","currentTime","diff","counter","Settings","AnimationState","playing","paused","_key","events","options","$ease.linear","Entity","isReal","templates","shouldApply","type","disposer","disposers","_name","_duration","match","other","remove","$array.findReverse","$array.find","force","isConnected","defaults","themes","themeTags","tags","tag","theme","allRules","rules","rule","result","$array.getFirstSortedIndex","order","$order.compare","$order.compareArray","prevId","_","fn","delay","target","$array.remove","text","locale","rest","SpriteEventDispatcher","sprite","event","dispatch","CounterDisposer","once","context","shouldClone","debounceDelay","info","rendererEvent","MultiDisposer","strokeWidth","$math.inBounds","Sprite","field","dataItem","Template","oldDataItem","eventType","parent","Percent","$array.pushOne","centerX","$utils.relativeToValue","centerY","previous","tooltipMoveDp","tooltipPointerDp","display","draggable","ev","tooltipText","tooltipHTML","showTooltipOn","tooltip","$utils.addEventListener","_ev","toggleKey","wheelable","filter","blur","saturate","brightness","contrast","sepia","hue","invert","$utils.isTouchEvent","pointerId","$utils.getPointerId","downPoint","dragEvent","scale","dragPoint","$math.cos","$math.sin","self","depth","oldBounds","newBounds","minWidth","minHeight","$type.isNumber","privateWidth","privateHeight","tooltipPosition","tooltipTarget","lastTooltipCoords","promise","timeout","dx","dy","_x","xx","yy","_y","__awaiter","success","_error","waitForAnimations","opacity","rotation","width","maxWidth","w","maxHeight","height","h","updateChildren","prevParent","$object.keysOrdered","Pattern","repetition","fill","fillOpacity","backgroundDisplay","PicturePattern","canvas","colorOpacity","image","patternWidth","patternHeight","fit","centered","src","BlendMode","visualSettings","Graphics","gradient","gradientTarget","strokeDasharray","strokeDashoffset","blendMode","draw","svgPath","fillGradient","fillPattern","stroke","strokeGradient","strokePattern","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","shadowOpacity","stops","stop","pattern","strokeOpacity","lineJoin","lineCap","Rectangle","wSign","hSign","eachChildren","Layout","HorizontalLayout","paddingLeft","availableWidth","totalPercent","childWidth","prevX","marginLeft","marginRight","VerticalLayout","paddingTop","availableHeight","childHeight","prevY","marginTop","marginBottom","GridLayout","paddingRight","minCellWidth","maxCellWidth","$math.fitToRange","columnCount","columnWidths","column","maxRowHeight","totalWidth","TextFormatter","quotedBlocks","noFormatting","res","chunks","chunk","$type.PLACEHOLDER","chunks2","i2","chunk2","style","format","q","Color","p","populateString","string","getTagValue","tagName","parts","reg","matches","dateFields","numericFields","durationFields","params","$utils.trim","reg2","matches2","getTagValueFromObject","$type.isObject","dataContext","getCustomDataValue","prop","customData","object","current","formatApplied","part","tmp","numberValue","$type.toNumber","dateValue","$type.toDate","$type.isDate","$type.isNaN","durationValue","formatParts","Container","contentMask","background","verticalScrollbar","start","end","bg","visible","pWidth","pHeight","layout","horizontal","vertical","m","l","paddingBottom","childBounds","childX","childY","cl","cr","ct","cb","innerWidth","innerHeight","html","ch","contentH","pos","wheelEvent","$utils.isLocalEvent","shiftY","mask","output","updated","Text","textStyle","styleName","$utils.truncateTextWithEllipsis","ariaLabel","Label","property","propValue","textAlign","p100","p50","htmlElement"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21]}