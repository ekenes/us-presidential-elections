const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/statsWorker-DIL38ROO.js","assets/utils-BZSYreii.js","assets/utils-BSxu_jqj.js","assets/ClassBreaksDefinition-TU-4A8pe.js","assets/geometryEngineWorker-DEn4VCml.js","assets/geometryEngineJSON-DL3F1sAR.js","assets/geometryEngineBase-D6T6UVvj.js","assets/_commonjsHelpers-DCkdB7M8.js","assets/CSVSourceWorker-VzZ3bcSQ.js","assets/date-Ctp1FiBW.js","assets/FeatureStore-CHAf_bHD.js","assets/featureConversionUtils-Dln3pnt-.js","assets/BoundsStore-D6aTGEbb.js","assets/PooledRBush-CX2ZBF1b.js","assets/timeSupport-5zAx123e.js","assets/queryUtils-D-HZ5YDK.js","assets/optimizedFeatureQueryEngineAdapter-Bca8zjFG.js","assets/QueryEngine-CIHVEyKC.js","assets/WhereClauseCache-rqiS6qCp.js","assets/WhereClause-DgMqtFS8.js","assets/QueryEngineCapabilities-DJC_YILC.js","assets/SnappingCandidate-DGkpYqI6.js","assets/FixedIntervalBinParameters-DTPHp65-.js","assets/number-BkNT4OA7.js","assets/locationUtils-DvZv6xap.js","assets/clientSideDefaults-C8feNS48.js","assets/EdgeProcessingWorker-CzNw-TTw.js","assets/workerHelper-BeV91iFQ.js","assets/InterleavedLayout-OYuqqRAc.js","assets/BufferView-DndiIhod.js","assets/types-BKo2foNY.js","assets/VertexElementDescriptor-BLyltQyJ.js","assets/VertexAttributeLocations-BfZbt_DV.js","assets/edgeProcessing-BkBiPu4b.js","assets/deduplicate-gK0Qi2FD.js","assets/Indices-CHUCG9D2.js","assets/Normals-Dd7DkG1z.js","assets/ElevationSamplerWorker-98SD_N2h.js","assets/MeshLocalVertexSpace-pAy03R0K.js","assets/vertexSpaceConversion-CRqsU2Uw.js","assets/spatialReferenceEllipsoidUtils-Dgc8kWE0.js","assets/computeTranslationToOriginAndRotation-Dr4-bDVY.js","assets/projectPointToVector-bjjyNjEP.js","assets/meshVertexSpaceUtils-DIjddc9q.js","assets/vec3-DFU4hjBG.js","assets/vec4-C_QpMy9Z.js","assets/FeatureServiceSnappingSourceWorker-oZHSv3Pw.js","assets/symbologySnappingCandidates-BsxC-0cm.js","assets/GeoJSONSourceWorker-HZvvc26n.js","assets/geojson-CcNWVCnN.js","assets/sourceUtils-9JIl9vro.js","assets/MemorySourceWorker-DsxsmweK.js","assets/objectIdUtils-4dd1rf9p.js","assets/PBFDecoderWorker-C8-63--h.js","assets/dehydratedFeatures-cuUeSvI3.js","assets/FeaturePipelineWorker-BrNFIwca.js","assets/AttributeStore-CwjpHlEt.js","assets/Utils-DhRiA7VG.js","assets/UpdateTracking2D-CSoImFwq.js","assets/FeatureStoreQueryAdapter-DDmPyMfx.js","assets/constants-BBnGEY1d.js","assets/MeshWriterRegistry-DYzmtxSs.js","assets/TexturedLineMeshWriter-SdajbS47.js","assets/TurboLine-DdmJw3RP.js","assets/grouping-Cdccl8XE.js","assets/QueueProcessor-Dvs9xJZ0.js","assets/FeatureMetadata-BBekJdtf.js","assets/SourceChunkStore-Bbc1BavO.js","assets/parquet-D1i39W_i.js","assets/operatorGeodeticDensify-YGcdW-_u.js","assets/geodeticCurveType-CirnHLSB.js","assets/normalizeUtilsSync-DxWwatV2.js","assets/FeatureIdInfo-DBAgjFtd.js","assets/ogcFeatureUtils-BBn9rhBc.js","assets/CircularArray-CujHzHWW.js","assets/createConnection-BBYTQUmL.js","assets/PointCloudWorker-BzHAitJv.js","assets/quat-DpRUP51L.js","assets/quatf64-aQ5IuZRd.js","assets/vec3f32-WCVSSNPR.js","assets/PointCloudUniqueValueRenderer-CbnRbuPh.js","assets/I3SBinaryReader-CqLjQ9du.js","assets/orientedBoundingBox-ClInAgwu.js","assets/plane-CUzQw0AH.js","assets/vectorStacks-BmOovNVB.js","assets/RasterWorker-DJZetCdD.js","assets/PixelBlock-ByEguVmI.js","assets/RasterSymbolizer-BYtjZ-pk.js","assets/vectorFieldUtils-BEi961FH.js","assets/rasterFunctionHelper-C1L9smFw.js","assets/clipUtils-lCa9pluv.js","assets/rasterProjectionHelper-C-rwhXaC.js","assets/PolynomialTransform-BUBG86xP.js","assets/dataUtils-CvKMsKO0.js","assets/SceneLayerSnappingSourceWorker-DMcGJCC2.js","assets/lineSegment-CHMw0J3i.js","assets/sphere-WBgYUZLb.js","assets/Octree-CFebdWQq.js","assets/frustum-ZcfnLqRM.js","assets/SceneLayerWorker-rPlhdvfm.js","assets/projectVectorToVector-BOHy-Mcb.js","assets/WFSSourceWorker-CM1YZT4L.js","assets/wfsUtils-BIpA_81r.js","assets/xmlUtils-CtUoQO7q.js","assets/WorkerTileHandler-BDKy3gEs.js","assets/constants-BHYAGdRm.js","assets/config-BOD8--da.js","assets/SourceLayerData-C8bZuyk-.js","assets/StyleRepository-BTGYt_Ub.js","assets/earcut-D9gy186-.js","assets/Feature3DPipelineWorker-D9LAvvXk.js","assets/HUDMaterial.glsl-DT-uVdGW.js","assets/hydratedFeatures-aAAEHLs1.js","assets/OutputColorHighlightOID.glsl-Bb5eIU1Y.js","assets/triangle-WUHt8h8O.js","assets/renderState-CKc66y4x.js","assets/glsl-B5bJgrnA.js","assets/ShaderBuilder-DFa8n0xM.js","assets/placementUtils-DYOhadJQ.js","assets/sdfPrimitives-DBEswSA-.js","assets/Texture-CqwXuIeY.js","assets/videoUtils-SWd0bQry.js","assets/requestImageUtils-C-euesO1.js","assets/primitiveObjectSymbolUtils-CmYiQW7t.js","assets/RealisticTree.glsl-BFLouIwe.js","assets/VertexBuffer-DfZtpXmq.js","assets/BufferObject-BVvxrpYg.js","assets/boundedPlane-Cnnvlbal.js","assets/FlowWorker--mGeoq1Y.js","assets/ParquetSourceWorker-CmSU1Jdg.js","assets/parquetUtils-CCEqbD_c.js","assets/PanoramicMeshWorker-BbW8cxn7.js","assets/ElevationLayer-hOzwxFiv.js","assets/ArcGISCachedService-Ifoeu-Q7.js","assets/TileInfoTilemapCache-BMbOdH8o.js","assets/TilemapCache-CIoBunHc.js","assets/WorkerHandle-DcLFdUPb.js","assets/portalLayers-Cua1NVN6.js","assets/associatedFeatureServiceUtils-BWmQQZKn.js","assets/fetchService-D5n_X7QV.js","assets/loadUtils-B4iZ5zWg.js","assets/lazyLayerLoader-oAeiDOgE.js","assets/arcgisLayers-DXB-kwmK.js","assets/layersCreator-DOi_yp3u.js","assets/ElevationQuery-BxCDqhYT.js","assets/GeometryDescriptor-D1E3Fp6K.js","assets/arcadeUtils-Bn4k5G5e.js","assets/arcade-DmcJSf2H.js","assets/arcadeEnvironment-lvoL_XWW.js","assets/Dictionary-omfL9qEL.js","assets/ImmutableArray-BPVd6ESQ.js","assets/Feature-D1tiPxwC.js","assets/aiServices-ldZZvE2J.js","assets/commonProperties-DHiB1uzW.js","assets/unitConversion-BsI8IypS.js","assets/rasterFieldUtils-ycN2GpUO.js","assets/batchExec-ByiXnxxr.js","assets/webglDeps-B9UV4QWC.js","assets/FramebufferObject-DQSczNCE.js","assets/ProgramTemplate-BblbN4al.js","assets/VertexArrayObject-DjYKuFUx.js","assets/mapViewDeps-BNWjabwT.js","assets/FeatureCommandQueue-C_ruq-2w.js","assets/GraphShaderModule-DTemm87T.js","assets/utils-945yB59m.js","assets/WGLContainer-D_mUxT1G.js","assets/Container-AUxsy2dy.js","assets/SDFHelper-3Gui52y8.js","assets/GridShader-D59aBDAW.js","assets/testSVGPremultipliedAlpha-eLL2OGVI.js","assets/SymbolFader-BZyLW7MO.js","assets/RenderingContext-BtetAT-E.js","assets/utils-C2BRh8Kk.js","assets/utils-DDjZAYSk.js","assets/GraphicsView2D-CofYbWSs.js","assets/densifyCurvedGeometry-7c5qHepK.js","assets/GraphicContainer-CcnDAtet.js","assets/AGraphicContainer-CJWJd71l.js","assets/TechniqueInstance-CFqkekWW.js","assets/TileContainer-AtOx6F5H.js","assets/gridUtils-Dn3kdLOs.js","assets/geodesicUtils-7BQ2MlXq.js","assets/TileLayerView2D-D4_wqQQ7.js","assets/imageUtils-kAwSdYVv.js","assets/BitmapTechnique-Dz7ngbv0.js","assets/bitmapUtils-DLFy1dXU.js","assets/LayerView2D-klPISEoS.js","assets/HighlightGraphicContainer-Cjz4CaHu.js","assets/LayerView-kfUuqxC7.js","assets/RefreshableLayerView-CBRmMpUf.js","assets/MapServiceLayerViewHelper-CW6MIFJg.js","assets/drapedUtils-S4-JqsaV.js","assets/popupUtils-vV4-4oK8.js","assets/highlightOptionsUtils-PKQFUVjz.js","assets/FeatureLayerView2D-mQe_2ZAC.js","assets/timeSupport-CfjYBsLI.js","assets/AttributeBinsFeatureSet-CaplE7Ro.js","assets/AttributeBinsQuery-CevscO_v.js","assets/constants-SxxbBSOD.js","assets/BaseDynamicLayerView2D-Cx_5r74t.js","assets/BitmapContainer-ByBkeZcq.js","assets/ExportStrategy-Bkovs2Aw.js","assets/CatalogLayerView2D-GezakRe6.js","assets/CatalogDynamicGroupLayerView2D-DiAPzIPh.js","assets/CatalogFootprintLayerView2D-CLGNXIgv.js","assets/GeoRSSLayerView2D-CAv53u2_.js","assets/GraphicsLayerView2D-DjI_aj-b.js","assets/GroupLayerView2D-CpIPIH9-.js","assets/ImageryLayerView2D-sKIla4aM.js","assets/RasterVFDisplayObject-CZx6KAiI.js","assets/ImageryTileLayerView2D-CIbAh54a.js","assets/datasetUtils-mOfUWxj8.js","assets/rasterUtils-Cxav4Gak.js","assets/RawBlockCache-CKnwop7g.js","assets/KMLLayerView2D-C1SjoPVe.js","assets/kmlUtils-DW4lJMOZ.js","assets/KnowledgeGraphLayerView2D-CiAl4k6-.js","assets/MapImageLayerView2D-CEo-Q5Jj.js","assets/MapNotesLayerView2D--zx0iKJb.js","assets/MediaLayerView2D-Dum-mBi2.js","assets/mediaLayerUtils-Dz9s7KIm.js","assets/OverlayContainer-C29CPDmv.js","assets/OGCFeatureLayerView2D-CX9z90jS.js","assets/RouteLayerView2D-ChUP7X8i.js","assets/Stop-C2py5q4X.js","assets/networkEnums-BokaFueD.js","assets/StreamLayerView2D-Cjml_-OB.js","assets/SubtypeGroupLayerView2D-S-H2X8Vq.js","assets/VectorTileLayerView2D-Dd5wViUw.js","assets/VideoLayerView2D-DvE__SdD.js","assets/GraphicsLayer-CMJ_9jCE.js","assets/videoUtils-Ct68v-5z.js","assets/ControlPoint-D-UTw2m5.js","assets/WMSLayerView2D-B5jmO19H.js","assets/ExportWMSImageParameters-C6qlk9Kd.js","assets/WMTSLayerView2D-BRmFNSwL.js","assets/ElevationProfileAnalysisView2D-x6seYSy-.js","assets/createUtils-C-LvDFAh.js","assets/distanceOperator-BA78u_AP.js","assets/Point2D-DewhMC-H.js","assets/Distance2DCalculator-CXhBP-8I-DxldXzYD.js","assets/ProjectionTransformation-BjICI2__.js","assets/Envelope2D-DhnmXslf.js","assets/Transformation2D-DTzxNXMI.js","assets/OperatorDefinitions-DP7_WWTp.js","assets/apiConverter-CaBQWwuZ.js","assets/jsonConverter-DOUnKb69.js","assets/simplifyOperator-Dgj41VYV.js","assets/operatorSimplify-BEAEgUG8.js","assets/mapCollectionUtils-DSBkb5W4.js","assets/elevationInfoUtils-CdSOKd0B.js","assets/getDefaultUnitForView-D_xKnKLZ.js","assets/SketchViewModel-DGaJMiWB.js","assets/hitTestSelectUtils-DZnJmvcO.js","assets/geodeticLengthOperator-BGk2z1mA.js","assets/apng-DB_3C4gK.js","assets/webdocSaveUtils-B4uV4hlx.js","assets/originUtils-Qb4UeCkV.js","assets/basemapUtils-Dgfn7xV1.js","assets/resourceUtils-DMnKB_cb.js","assets/resourceUtils-BEhOaxNn.js","assets/saveUtils-DG23wXky.js","assets/layersLoader-BXO3031Y.js","assets/featureLayerUtils-DjlPt6aE.js","assets/utils-aMFfmmqB.js","assets/FeatureLayerSource-wQQ2LQkD.js","assets/External-BWvqkTvX.js","assets/applyEditsUtils-rP-yPN_T.js","assets/MeshTransform-BJgPzVUq.js","assets/axisAngleDegrees-DeUMpRGO.js","assets/editingSupport-wmKPSbCn.js","assets/QueryTask-DNXT9ajc.js","assets/executeForIds-CQynkqZv.js","assets/queryAssociations-B_4BMMAG.js","assets/Association-CmNVaanu.js","assets/synthesizeAssociationGeometries-iiapp96k.js","assets/chartUtilsAm5-BFLXFauQ.js","assets/Root-DTTsQKFO.js","assets/Animation-Ba41gx0U.js","assets/Percent-COgn7Xel.js","assets/Disposer-BLqPJqHQ.js","assets/Label-Ctv5Liib.js","assets/Theme-B9_efM8T.js","assets/Tooltip-BEI-dFbu.js","assets/DefaultTheme-EBUTbqHS.js","assets/chartCommon-CWNwZ3ay.js","assets/AnimatedTheme-MgBbLxnQ.js","assets/DarkTheme-BiPIrl5d.js","assets/ResponsiveTheme-n7racEDt.js","assets/ColorSet-Do04bnG7.js","assets/Scrollbar-iLIUgJ9-.js","assets/Button-CRRY_Mgi.js","assets/pieChart-D0a_BFfU.js","assets/Tick-B227RkYt.js","assets/Slice-B0pvADDV.js","assets/RadialLabel-Dz4mc7oV.js","assets/xyChart-COapCVwo.js","assets/arcade-CLsHsfal.js","assets/uniqueValues-yH2Emd2h.js","assets/PivotQuery-Boq_Nzu7.js","assets/previewSymbol2D-CYhM-ky2.js","assets/intersectsOperator-DR0qWay3.js","assets/OperatorIntersects-BHwja3FM.js","assets/proximityOperator-CdHCeVZd.js","assets/OperatorProximity-DMimHqNp.js","assets/bufferOperator-BTFd2oYo.js","assets/operatorBuffer-DKEcbYhJ.js","assets/Bufferer-Dw9Qi4T1-SFB9vCg6.js","assets/GeometryCleaner-BEJM7I4l-DzY8Gz1L.js","assets/OperatorSimplifyOGC-BDTF3nLO.js","assets/OperatorGeneralize-B2R5Y1Cb.js","assets/convexHullOperator-ZK4O-VI2.js","assets/operatorConvexHull-W0N7SAO-.js","assets/lengthOperator-DapHQGiH.js","assets/generalizeOperator-WyeF11aU.js","assets/operatorGeneralize-8XDWwOkQ.js","assets/graphicBufferOperator-CPj7p5ij.js","assets/offsetOperator-CECtQxvv.js","assets/operatorOffset-lc9-Ezzm.js","assets/simplifyOperator-BhIiMmT9.js","assets/projectionTransformation-Cy5HcPOT.js","assets/index-Dw3c3eoD.js","assets/EditableLabel-CZT0lLjI.js","assets/chart-utils-CIbIZsNW.js","assets/percent-Ckq0ojOu.js","assets/xy-7QUQz7B8.js","assets/Animated-DeOY3L2D.js","assets/Dark-C90LJxE0.js","assets/Responsive-DqCxxR1j.js","assets/chartCommon-B5PTeQ1O.js"])))=>i.map(i=>d[i]);
var HCe=Object.getPrototypeOf;var GCe=Reflect.get;var Gee=t=>{throw TypeError(t)};var dV=(t,e,i)=>e.has(t)||Gee("Cannot "+i);var Ze=(t,e,i)=>(dV(t,e,"read from private field"),i?i.call(t):e.get(t)),bi=(t,e,i)=>e.has(t)?Gee("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,i),oi=(t,e,i,r)=>(dV(t,e,"write to private field"),r?r.call(t,i):e.set(t,i),i),Vu=(t,e,i)=>(dV(t,e,"access private method"),i);var Wee=(t,e,i)=>GCe(HCe(t),i,e);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function i(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(n){if(n.ep)return;n.ep=!0;const s=i(n);fetch(n.href,s)}})();var hV={exports:{}},tM={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zee;function WCe(){if(Zee)return tM;Zee=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(r,n,s){var a=null;if(s!==void 0&&(a=""+s),n.key!==void 0&&(a=""+n.key),"key"in n){s={};for(var o in n)o!=="key"&&(s[o]=n[o])}else s=n;return n=s.ref,{$$typeof:t,type:r,key:a,ref:n!==void 0?n:null,props:s}}return tM.Fragment=e,tM.jsx=i,tM.jsxs=i,tM}var Yee;function ZCe(){return Yee||(Yee=1,hV.exports=WCe()),hV.exports}var pe=ZCe(),pV={exports:{}},ni={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jee;function YCe(){if(Jee)return ni;Jee=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),n=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),a=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),g=Symbol.iterator;function v(oe){return oe===null||typeof oe!="object"?null:(oe=g&&oe[g]||oe["@@iterator"],typeof oe=="function"?oe:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,$={};function M(oe,ze,Ke){this.props=oe,this.context=ze,this.refs=$,this.updater=Ke||b}M.prototype.isReactComponent={},M.prototype.setState=function(oe,ze){if(typeof oe!="object"&&typeof oe!="function"&&oe!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,oe,ze,"setState")},M.prototype.forceUpdate=function(oe){this.updater.enqueueForceUpdate(this,oe,"forceUpdate")};function k(){}k.prototype=M.prototype;function A(oe,ze,Ke){this.props=oe,this.context=ze,this.refs=$,this.updater=Ke||b}var L=A.prototype=new k;L.constructor=A,x(L,M.prototype),L.isPureReactComponent=!0;var z=Array.isArray;function U(){}var B={H:null,A:null,T:null,S:null},X=Object.prototype.hasOwnProperty;function J(oe,ze,Ke){var at=Ke.ref;return{$$typeof:t,type:oe,key:ze,ref:at!==void 0?at:null,props:Ke}}function Q(oe,ze){return J(oe.type,ze,oe.props)}function le(oe){return typeof oe=="object"&&oe!==null&&oe.$$typeof===t}function ie(oe){var ze={"=":"=0",":":"=2"};return"$"+oe.replace(/[=:]/g,function(Ke){return ze[Ke]})}var re=/\/+/g;function se(oe,ze){return typeof oe=="object"&&oe!==null&&oe.key!=null?ie(""+oe.key):ze.toString(36)}function Te(oe){switch(oe.status){case"fulfilled":return oe.value;case"rejected":throw oe.reason;default:switch(typeof oe.status=="string"?oe.then(U,U):(oe.status="pending",oe.then(function(ze){oe.status==="pending"&&(oe.status="fulfilled",oe.value=ze)},function(ze){oe.status==="pending"&&(oe.status="rejected",oe.reason=ze)})),oe.status){case"fulfilled":return oe.value;case"rejected":throw oe.reason}}throw oe}function ne(oe,ze,Ke,at,kt){var Wt=typeof oe;(Wt==="undefined"||Wt==="boolean")&&(oe=null);var ui=!1;if(oe===null)ui=!0;else switch(Wt){case"bigint":case"string":case"number":ui=!0;break;case"object":switch(oe.$$typeof){case t:case e:ui=!0;break;case h:return ui=oe._init,ne(ui(oe._payload),ze,Ke,at,kt)}}if(ui)return kt=kt(oe),ui=at===""?"."+se(oe,0):at,z(kt)?(Ke="",ui!=null&&(Ke=ui.replace(re,"$&/")+"/"),ne(kt,ze,Ke,"",function(Wo){return Wo})):kt!=null&&(le(kt)&&(kt=Q(kt,Ke+(kt.key==null||oe&&oe.key===kt.key?"":(""+kt.key).replace(re,"$&/")+"/")+ui)),ze.push(kt)),1;ui=0;var Tr=at===""?".":at+":";if(z(oe))for(var it=0;it<oe.length;it++)at=oe[it],Wt=Tr+se(at,it),ui+=ne(at,ze,Ke,Wt,kt);else if(it=v(oe),typeof it=="function")for(oe=it.call(oe),it=0;!(at=oe.next()).done;)at=at.value,Wt=Tr+se(at,it++),ui+=ne(at,ze,Ke,Wt,kt);else if(Wt==="object"){if(typeof oe.then=="function")return ne(Te(oe),ze,Ke,at,kt);throw ze=String(oe),Error("Objects are not valid as a React child (found: "+(ze==="[object Object]"?"object with keys {"+Object.keys(oe).join(", ")+"}":ze)+"). If you meant to render a collection of children, use an array instead.")}return ui}function _e(oe,ze,Ke){if(oe==null)return oe;var at=[],kt=0;return ne(oe,at,"","",function(Wt){return ze.call(Ke,Wt,kt++)}),at}function Oe(oe){if(oe._status===-1){var ze=oe._result;ze=ze(),ze.then(function(Ke){(oe._status===0||oe._status===-1)&&(oe._status=1,oe._result=Ke)},function(Ke){(oe._status===0||oe._status===-1)&&(oe._status=2,oe._result=Ke)}),oe._status===-1&&(oe._status=0,oe._result=ze)}if(oe._status===1)return oe._result.default;throw oe._result}var He=typeof reportError=="function"?reportError:function(oe){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ze=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof oe=="object"&&oe!==null&&typeof oe.message=="string"?String(oe.message):String(oe),error:oe});if(!window.dispatchEvent(ze))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",oe);return}console.error(oe)},ft={map:_e,forEach:function(oe,ze,Ke){_e(oe,function(){ze.apply(this,arguments)},Ke)},count:function(oe){var ze=0;return _e(oe,function(){ze++}),ze},toArray:function(oe){return _e(oe,function(ze){return ze})||[]},only:function(oe){if(!le(oe))throw Error("React.Children.only expected to receive a single React element child.");return oe}};return ni.Activity=m,ni.Children=ft,ni.Component=M,ni.Fragment=i,ni.Profiler=n,ni.PureComponent=A,ni.StrictMode=r,ni.Suspense=l,ni.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=B,ni.__COMPILER_RUNTIME={__proto__:null,c:function(oe){return B.H.useMemoCache(oe)}},ni.cache=function(oe){return function(){return oe.apply(null,arguments)}},ni.cacheSignal=function(){return null},ni.cloneElement=function(oe,ze,Ke){if(oe==null)throw Error("The argument must be a React element, but you passed "+oe+".");var at=x({},oe.props),kt=oe.key;if(ze!=null)for(Wt in ze.key!==void 0&&(kt=""+ze.key),ze)!X.call(ze,Wt)||Wt==="key"||Wt==="__self"||Wt==="__source"||Wt==="ref"&&ze.ref===void 0||(at[Wt]=ze[Wt]);var Wt=arguments.length-2;if(Wt===1)at.children=Ke;else if(1<Wt){for(var ui=Array(Wt),Tr=0;Tr<Wt;Tr++)ui[Tr]=arguments[Tr+2];at.children=ui}return J(oe.type,kt,at)},ni.createContext=function(oe){return oe={$$typeof:a,_currentValue:oe,_currentValue2:oe,_threadCount:0,Provider:null,Consumer:null},oe.Provider=oe,oe.Consumer={$$typeof:s,_context:oe},oe},ni.createElement=function(oe,ze,Ke){var at,kt={},Wt=null;if(ze!=null)for(at in ze.key!==void 0&&(Wt=""+ze.key),ze)X.call(ze,at)&&at!=="key"&&at!=="__self"&&at!=="__source"&&(kt[at]=ze[at]);var ui=arguments.length-2;if(ui===1)kt.children=Ke;else if(1<ui){for(var Tr=Array(ui),it=0;it<ui;it++)Tr[it]=arguments[it+2];kt.children=Tr}if(oe&&oe.defaultProps)for(at in ui=oe.defaultProps,ui)kt[at]===void 0&&(kt[at]=ui[at]);return J(oe,Wt,kt)},ni.createRef=function(){return{current:null}},ni.forwardRef=function(oe){return{$$typeof:o,render:oe}},ni.isValidElement=le,ni.lazy=function(oe){return{$$typeof:h,_payload:{_status:-1,_result:oe},_init:Oe}},ni.memo=function(oe,ze){return{$$typeof:c,type:oe,compare:ze===void 0?null:ze}},ni.startTransition=function(oe){var ze=B.T,Ke={};B.T=Ke;try{var at=oe(),kt=B.S;kt!==null&&kt(Ke,at),typeof at=="object"&&at!==null&&typeof at.then=="function"&&at.then(U,He)}catch(Wt){He(Wt)}finally{ze!==null&&Ke.types!==null&&(ze.types=Ke.types),B.T=ze}},ni.unstable_useCacheRefresh=function(){return B.H.useCacheRefresh()},ni.use=function(oe){return B.H.use(oe)},ni.useActionState=function(oe,ze,Ke){return B.H.useActionState(oe,ze,Ke)},ni.useCallback=function(oe,ze){return B.H.useCallback(oe,ze)},ni.useContext=function(oe){return B.H.useContext(oe)},ni.useDebugValue=function(){},ni.useDeferredValue=function(oe,ze){return B.H.useDeferredValue(oe,ze)},ni.useEffect=function(oe,ze){return B.H.useEffect(oe,ze)},ni.useEffectEvent=function(oe){return B.H.useEffectEvent(oe)},ni.useId=function(){return B.H.useId()},ni.useImperativeHandle=function(oe,ze,Ke){return B.H.useImperativeHandle(oe,ze,Ke)},ni.useInsertionEffect=function(oe,ze){return B.H.useInsertionEffect(oe,ze)},ni.useLayoutEffect=function(oe,ze){return B.H.useLayoutEffect(oe,ze)},ni.useMemo=function(oe,ze){return B.H.useMemo(oe,ze)},ni.useOptimistic=function(oe,ze){return B.H.useOptimistic(oe,ze)},ni.useReducer=function(oe,ze,Ke){return B.H.useReducer(oe,ze,Ke)},ni.useRef=function(oe){return B.H.useRef(oe)},ni.useState=function(oe){return B.H.useState(oe)},ni.useSyncExternalStore=function(oe,ze,Ke){return B.H.useSyncExternalStore(oe,ze,Ke)},ni.useTransition=function(){return B.H.useTransition()},ni.version="19.2.0",ni}var Xee;function oW(){return Xee||(Xee=1,pV.exports=YCe()),pV.exports}var Td=oW(),fV={exports:{}},iM={},mV={exports:{}},gV={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qee;function JCe(){return Qee||(Qee=1,(function(t){function e(ne,_e){var Oe=ne.length;ne.push(_e);e:for(;0<Oe;){var He=Oe-1>>>1,ft=ne[He];if(0<n(ft,_e))ne[He]=_e,ne[Oe]=ft,Oe=He;else break e}}function i(ne){return ne.length===0?null:ne[0]}function r(ne){if(ne.length===0)return null;var _e=ne[0],Oe=ne.pop();if(Oe!==_e){ne[0]=Oe;e:for(var He=0,ft=ne.length,oe=ft>>>1;He<oe;){var ze=2*(He+1)-1,Ke=ne[ze],at=ze+1,kt=ne[at];if(0>n(Ke,Oe))at<ft&&0>n(kt,Ke)?(ne[He]=kt,ne[at]=Oe,He=at):(ne[He]=Ke,ne[ze]=Oe,He=ze);else if(at<ft&&0>n(kt,Oe))ne[He]=kt,ne[at]=Oe,He=at;else break e}}return _e}function n(ne,_e){var Oe=ne.sortIndex-_e.sortIndex;return Oe!==0?Oe:ne.id-_e.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],c=[],h=1,m=null,g=3,v=!1,b=!1,x=!1,$=!1,M=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function L(ne){for(var _e=i(c);_e!==null;){if(_e.callback===null)r(c);else if(_e.startTime<=ne)r(c),_e.sortIndex=_e.expirationTime,e(l,_e);else break;_e=i(c)}}function z(ne){if(x=!1,L(ne),!b)if(i(l)!==null)b=!0,U||(U=!0,ie());else{var _e=i(c);_e!==null&&Te(z,_e.startTime-ne)}}var U=!1,B=-1,X=5,J=-1;function Q(){return $?!0:!(t.unstable_now()-J<X)}function le(){if($=!1,U){var ne=t.unstable_now();J=ne;var _e=!0;try{e:{b=!1,x&&(x=!1,k(B),B=-1),v=!0;var Oe=g;try{t:{for(L(ne),m=i(l);m!==null&&!(m.expirationTime>ne&&Q());){var He=m.callback;if(typeof He=="function"){m.callback=null,g=m.priorityLevel;var ft=He(m.expirationTime<=ne);if(ne=t.unstable_now(),typeof ft=="function"){m.callback=ft,L(ne),_e=!0;break t}m===i(l)&&r(l),L(ne)}else r(l);m=i(l)}if(m!==null)_e=!0;else{var oe=i(c);oe!==null&&Te(z,oe.startTime-ne),_e=!1}}break e}finally{m=null,g=Oe,v=!1}_e=void 0}}finally{_e?ie():U=!1}}}var ie;if(typeof A=="function")ie=function(){A(le)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,se=re.port2;re.port1.onmessage=le,ie=function(){se.postMessage(null)}}else ie=function(){M(le,0)};function Te(ne,_e){B=M(function(){ne(t.unstable_now())},_e)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ne){ne.callback=null},t.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<ne?Math.floor(1e3/ne):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_next=function(ne){switch(g){case 1:case 2:case 3:var _e=3;break;default:_e=g}var Oe=g;g=_e;try{return ne()}finally{g=Oe}},t.unstable_requestPaint=function(){$=!0},t.unstable_runWithPriority=function(ne,_e){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var Oe=g;g=ne;try{return _e()}finally{g=Oe}},t.unstable_scheduleCallback=function(ne,_e,Oe){var He=t.unstable_now();switch(typeof Oe=="object"&&Oe!==null?(Oe=Oe.delay,Oe=typeof Oe=="number"&&0<Oe?He+Oe:He):Oe=He,ne){case 1:var ft=-1;break;case 2:ft=250;break;case 5:ft=1073741823;break;case 4:ft=1e4;break;default:ft=5e3}return ft=Oe+ft,ne={id:h++,callback:_e,priorityLevel:ne,startTime:Oe,expirationTime:ft,sortIndex:-1},Oe>He?(ne.sortIndex=Oe,e(c,ne),i(l)===null&&ne===i(c)&&(x?(k(B),B=-1):x=!0,Te(z,Oe-He))):(ne.sortIndex=ft,e(l,ne),b||v||(b=!0,U||(U=!0,ie()))),ne},t.unstable_shouldYield=Q,t.unstable_wrapCallback=function(ne){var _e=g;return function(){var Oe=g;g=_e;try{return ne.apply(this,arguments)}finally{g=Oe}}}})(gV)),gV}var Kee;function XCe(){return Kee||(Kee=1,mV.exports=JCe()),mV.exports}var yV={exports:{}},Va={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ete;function QCe(){if(ete)return Va;ete=1;var t=oW();function e(l){var c="https://react.dev/errors/"+l;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)c+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var r={d:{f:i,r:function(){throw Error(e(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},n=Symbol.for("react.portal");function s(l,c,h){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:n,key:m==null?null:""+m,children:l,containerInfo:c,implementation:h}}var a=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(l,c){if(l==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return Va.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Va.createPortal=function(l,c){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(e(299));return s(l,c,null,h)},Va.flushSync=function(l){var c=a.T,h=r.p;try{if(a.T=null,r.p=2,l)return l()}finally{a.T=c,r.p=h,r.d.f()}},Va.preconnect=function(l,c){typeof l=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,r.d.C(l,c))},Va.prefetchDNS=function(l){typeof l=="string"&&r.d.D(l)},Va.preinit=function(l,c){if(typeof l=="string"&&c&&typeof c.as=="string"){var h=c.as,m=o(h,c.crossOrigin),g=typeof c.integrity=="string"?c.integrity:void 0,v=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;h==="style"?r.d.S(l,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:m,integrity:g,fetchPriority:v}):h==="script"&&r.d.X(l,{crossOrigin:m,integrity:g,fetchPriority:v,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},Va.preinitModule=function(l,c){if(typeof l=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var h=o(c.as,c.crossOrigin);r.d.M(l,{crossOrigin:h,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&r.d.M(l)},Va.preload=function(l,c){if(typeof l=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var h=c.as,m=o(h,c.crossOrigin);r.d.L(l,h,{crossOrigin:m,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},Va.preloadModule=function(l,c){if(typeof l=="string")if(c){var h=o(c.as,c.crossOrigin);r.d.m(l,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:h,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else r.d.m(l)},Va.requestFormReset=function(l){r.d.r(l)},Va.unstable_batchedUpdates=function(l,c){return l(c)},Va.useFormState=function(l,c,h){return a.H.useFormState(l,c,h)},Va.useFormStatus=function(){return a.H.useHostTransitionStatus()},Va.version="19.2.0",Va}var tte;function KCe(){if(tte)return yV.exports;tte=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),yV.exports=QCe(),yV.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ite;function e2e(){if(ite)return iM;ite=1;var t=XCe(),e=oW(),i=KCe();function r(u){var p="https://react.dev/errors/"+u;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)p+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+u+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)}function s(u){var p=u,y=u;if(u.alternate)for(;p.return;)p=p.return;else{u=p;do p=u,(p.flags&4098)!==0&&(y=p.return),u=p.return;while(u)}return p.tag===3?y:null}function a(u){if(u.tag===13){var p=u.memoizedState;if(p===null&&(u=u.alternate,u!==null&&(p=u.memoizedState)),p!==null)return p.dehydrated}return null}function o(u){if(u.tag===31){var p=u.memoizedState;if(p===null&&(u=u.alternate,u!==null&&(p=u.memoizedState)),p!==null)return p.dehydrated}return null}function l(u){if(s(u)!==u)throw Error(r(188))}function c(u){var p=u.alternate;if(!p){if(p=s(u),p===null)throw Error(r(188));return p!==u?null:u}for(var y=u,_=p;;){var I=y.return;if(I===null)break;var C=I.alternate;if(C===null){if(_=I.return,_!==null){y=_;continue}break}if(I.child===C.child){for(C=I.child;C;){if(C===y)return l(I),u;if(C===_)return l(I),p;C=C.sibling}throw Error(r(188))}if(y.return!==_.return)y=I,_=C;else{for(var N=!1,Z=I.child;Z;){if(Z===y){N=!0,y=I,_=C;break}if(Z===_){N=!0,_=I,y=C;break}Z=Z.sibling}if(!N){for(Z=C.child;Z;){if(Z===y){N=!0,y=C,_=I;break}if(Z===_){N=!0,_=C,y=I;break}Z=Z.sibling}if(!N)throw Error(r(189))}}if(y.alternate!==_)throw Error(r(190))}if(y.tag!==3)throw Error(r(188));return y.stateNode.current===y?u:p}function h(u){var p=u.tag;if(p===5||p===26||p===27||p===6)return u;for(u=u.child;u!==null;){if(p=h(u),p!==null)return p;u=u.sibling}return null}var m=Object.assign,g=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),$=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),k=Symbol.for("react.consumer"),A=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),U=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),X=Symbol.for("react.lazy"),J=Symbol.for("react.activity"),Q=Symbol.for("react.memo_cache_sentinel"),le=Symbol.iterator;function ie(u){return u===null||typeof u!="object"?null:(u=le&&u[le]||u["@@iterator"],typeof u=="function"?u:null)}var re=Symbol.for("react.client.reference");function se(u){if(u==null)return null;if(typeof u=="function")return u.$$typeof===re?null:u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case x:return"Fragment";case M:return"Profiler";case $:return"StrictMode";case z:return"Suspense";case U:return"SuspenseList";case J:return"Activity"}if(typeof u=="object")switch(u.$$typeof){case b:return"Portal";case A:return u.displayName||"Context";case k:return(u._context.displayName||"Context")+".Consumer";case L:var p=u.render;return u=u.displayName,u||(u=p.displayName||p.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case B:return p=u.displayName||null,p!==null?p:se(u.type)||"Memo";case X:p=u._payload,u=u._init;try{return se(u(p))}catch{}}return null}var Te=Array.isArray,ne=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_e=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Oe={pending:!1,data:null,method:null,action:null},He=[],ft=-1;function oe(u){return{current:u}}function ze(u){0>ft||(u.current=He[ft],He[ft]=null,ft--)}function Ke(u,p){ft++,He[ft]=u.current,u.current=p}var at=oe(null),kt=oe(null),Wt=oe(null),ui=oe(null);function Tr(u,p){switch(Ke(Wt,p),Ke(kt,u),Ke(at,null),p.nodeType){case 9:case 11:u=(u=p.documentElement)&&(u=u.namespaceURI)?mee(u):0;break;default:if(u=p.tagName,p=p.namespaceURI)p=mee(p),u=gee(p,u);else switch(u){case"svg":u=1;break;case"math":u=2;break;default:u=0}}ze(at),Ke(at,u)}function it(){ze(at),ze(kt),ze(Wt)}function Wo(u){u.memoizedState!==null&&Ke(ui,u);var p=at.current,y=gee(p,u.type);p!==y&&(Ke(kt,u),Ke(at,y))}function ks(u){kt.current===u&&(ze(at),ze(kt)),ui.current===u&&(ze(ui),XI._currentValue=Oe)}var Zo,Cc;function qs(u){if(Zo===void 0)try{throw Error()}catch(y){var p=y.stack.trim().match(/\n( *(at )?)/);Zo=p&&p[1]||"",Cc=-1<y.stack.indexOf(`
    at`)?" (<anonymous>)":-1<y.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Zo+u+Cc}var ha=!1;function Hs(u,p){if(!u||ha)return"";ha=!0;var y=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var _={DetermineComponentFrameRoot:function(){try{if(p){var Be=function(){throw Error()};if(Object.defineProperty(Be.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Be,[])}catch(Le){var ke=Le}Reflect.construct(u,[],Be)}else{try{Be.call()}catch(Le){ke=Le}u.call(Be.prototype)}}else{try{throw Error()}catch(Le){ke=Le}(Be=u())&&typeof Be.catch=="function"&&Be.catch(function(){})}}catch(Le){if(Le&&ke&&typeof Le.stack=="string")return[Le.stack,ke.stack]}return[null,null]}};_.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var I=Object.getOwnPropertyDescriptor(_.DetermineComponentFrameRoot,"name");I&&I.configurable&&Object.defineProperty(_.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var C=_.DetermineComponentFrameRoot(),N=C[0],Z=C[1];if(N&&Z){var ce=N.split(`
`),Ee=Z.split(`
`);for(I=_=0;_<ce.length&&!ce[_].includes("DetermineComponentFrameRoot");)_++;for(;I<Ee.length&&!Ee[I].includes("DetermineComponentFrameRoot");)I++;if(_===ce.length||I===Ee.length)for(_=ce.length-1,I=Ee.length-1;1<=_&&0<=I&&ce[_]!==Ee[I];)I--;for(;1<=_&&0<=I;_--,I--)if(ce[_]!==Ee[I]){if(_!==1||I!==1)do if(_--,I--,0>I||ce[_]!==Ee[I]){var De=`
`+ce[_].replace(" at new "," at ");return u.displayName&&De.includes("<anonymous>")&&(De=De.replace("<anonymous>",u.displayName)),De}while(1<=_&&0<=I);break}}}finally{ha=!1,Error.prepareStackTrace=y}return(y=u?u.displayName||u.name:"")?qs(y):""}function E_(u,p){switch(u.tag){case 26:case 27:case 5:return qs(u.type);case 16:return qs("Lazy");case 13:return u.child!==p&&p!==null?qs("Suspense Fallback"):qs("Suspense");case 19:return qs("SuspenseList");case 0:case 15:return Hs(u.type,!1);case 11:return Hs(u.type.render,!1);case 1:return Hs(u.type,!0);case 31:return qs("Activity");default:return""}}function Hd(u){try{var p="",y=null;do p+=E_(u,y),y=u,u=u.return;while(u);return p}catch(_){return`
Error generating stack: `+_.message+`
`+_.stack}}var hg=Object.prototype.hasOwnProperty,Mu=t.unstable_scheduleCallback,pa=t.unstable_cancelCallback,k_=t.unstable_shouldYield,A_=t.unstable_requestPaint,cs=t.unstable_now,P_=t.unstable_getCurrentPriorityLevel,Gd=t.unstable_ImmediatePriority,O_=t.unstable_UserBlockingPriority,Wd=t.unstable_NormalPriority,lI=t.unstable_LowPriority,pg=t.unstable_IdlePriority,Wv=t.log,Zv=t.unstable_setDisableYieldValue,Zd=null,Gs=null;function po(u){if(typeof Wv=="function"&&Zv(u),Gs&&typeof Gs.setStrictMode=="function")try{Gs.setStrictMode(Zd,u)}catch{}}var Ws=Math.clz32?Math.clz32:Yp,L_=Math.log,Zp=Math.LN2;function Yp(u){return u>>>=0,u===0?32:31-(L_(u)/Zp|0)|0}var Nl=256,Jp=262144,Yd=4194304;function Ec(u){var p=u&42;if(p!==0)return p;switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return u&261888;case 262144:case 524288:case 1048576:case 2097152:return u&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return u&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return u}}function Jd(u,p,y){var _=u.pendingLanes;if(_===0)return 0;var I=0,C=u.suspendedLanes,N=u.pingedLanes;u=u.warmLanes;var Z=_&134217727;return Z!==0?(_=Z&~C,_!==0?I=Ec(_):(N&=Z,N!==0?I=Ec(N):y||(y=Z&~u,y!==0&&(I=Ec(y))))):(Z=_&~C,Z!==0?I=Ec(Z):N!==0?I=Ec(N):y||(y=_&~u,y!==0&&(I=Ec(y)))),I===0?0:p!==0&&p!==I&&(p&C)===0&&(C=I&-I,y=p&-p,C>=y||C===32&&(y&4194048)!==0)?p:I}function Cu(u,p){return(u.pendingLanes&~(u.suspendedLanes&~u.pingedLanes)&p)===0}function F_(u,p){switch(u){case 1:case 2:case 4:case 8:case 64:return p+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ae(){var u=Yd;return Yd<<=1,(Yd&62914560)===0&&(Yd=4194304),u}function cr(u){for(var p=[],y=0;31>y;y++)p.push(u);return p}function Na(u,p){u.pendingLanes|=p,p!==268435456&&(u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0)}function Eu(u,p,y,_,I,C){var N=u.pendingLanes;u.pendingLanes=y,u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0,u.expiredLanes&=y,u.entangledLanes&=y,u.errorRecoveryDisabledLanes&=y,u.shellSuspendCounter=0;var Z=u.entanglements,ce=u.expirationTimes,Ee=u.hiddenUpdates;for(y=N&~y;0<y;){var De=31-Ws(y),Be=1<<De;Z[De]=0,ce[De]=-1;var ke=Ee[De];if(ke!==null)for(Ee[De]=null,De=0;De<ke.length;De++){var Le=ke[De];Le!==null&&(Le.lane&=-536870913)}y&=~Be}_!==0&&Da(u,_,0),C!==0&&I===0&&u.tag!==0&&(u.suspendedLanes|=C&~(N&~p))}function Da(u,p,y){u.pendingLanes|=p,u.suspendedLanes&=~p;var _=31-Ws(p);u.entangledLanes|=p,u.entanglements[_]=u.entanglements[_]|1073741824|y&261930}function Xp(u,p){var y=u.entangledLanes|=p;for(u=u.entanglements;y;){var _=31-Ws(y),I=1<<_;I&p|u[_]&p&&(u[_]|=p),y&=~I}}function wt(u,p){var y=p&-p;return y=(y&42)!==0?1:Zs(y),(y&(u.suspendedLanes|p))!==0?0:y}function Zs(u){switch(u){case 2:u=1;break;case 8:u=4;break;case 32:u=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:u=128;break;case 268435456:u=134217728;break;default:u=0}return u}function Dl(u){return u&=-u,2<u?8<u?(u&134217727)!==0?32:268435456:8:2}function er(){var u=_e.p;return u!==0?u:(u=window.event,u===void 0?32:Dee(u.type))}function Xd(u,p){var y=_e.p;try{return _e.p=u,p()}finally{_e.p=y}}var kc=Math.random().toString(36).slice(2),vr="__reactFiber$"+kc,jr="__reactProps$"+kc,At="__reactContainer$"+kc,Ut="__reactEvents$"+kc,R_="__reactListeners$"+kc,z_="__reactHandles$"+kc,N_="__reactResources$"+kc,jl="__reactMarker$"+kc;function ku(u){delete u[vr],delete u[jr],delete u[Ut],delete u[R_],delete u[z_]}function Qd(u){var p=u[vr];if(p)return p;for(var y=u.parentNode;y;){if(p=y[At]||y[vr]){if(y=p.alternate,p.child!==null||y!==null&&y.child!==null)for(u=$ee(u);u!==null;){if(y=u[vr])return y;u=$ee(u)}return p}u=y,y=u.parentNode}return null}function Ac(u){if(u=u[vr]||u[At]){var p=u.tag;if(p===5||p===6||p===13||p===31||p===26||p===27||p===3)return u}return null}function Vr(u){var p=u.tag;if(p===5||p===26||p===27||p===6)return u.stateNode;throw Error(r(33))}function Au(u){var p=u[N_];return p||(p=u[N_]={hoistableStyles:new Map,hoistableScripts:new Map}),p}function hn(u){u[jl]=!0}var Yv=new Set,Jv={};function Yo(u,p){Pu(u,p),Pu(u+"Capture",p)}function Pu(u,p){for(Jv[u]=p,u=0;u<p.length;u++)Yv.add(p[u])}var Xv=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ys={},D_={};function Qv(u){return hg.call(D_,u)?!0:hg.call(Ys,u)?!1:Xv.test(u)?D_[u]=!0:(Ys[u]=!0,!1)}function Kd(u,p,y){if(Qv(p))if(y===null)u.removeAttribute(p);else{switch(typeof y){case"undefined":case"function":case"symbol":u.removeAttribute(p);return;case"boolean":var _=p.toLowerCase().slice(0,5);if(_!=="data-"&&_!=="aria-"){u.removeAttribute(p);return}}u.setAttribute(p,""+y)}}function Ou(u,p,y){if(y===null)u.removeAttribute(p);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(p);return}u.setAttribute(p,""+y)}}function te(u,p,y,_){if(_===null)u.removeAttribute(y);else{switch(typeof _){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(y);return}u.setAttributeNS(p,y,""+_)}}function Me(u){switch(typeof u){case"bigint":case"boolean":case"number":case"string":case"undefined":return u;case"object":return u;default:return""}}function Ye(u){var p=u.type;return(u=u.nodeName)&&u.toLowerCase()==="input"&&(p==="checkbox"||p==="radio")}function Pt(u,p,y){var _=Object.getOwnPropertyDescriptor(u.constructor.prototype,p);if(!u.hasOwnProperty(p)&&typeof _<"u"&&typeof _.get=="function"&&typeof _.set=="function"){var I=_.get,C=_.set;return Object.defineProperty(u,p,{configurable:!0,get:function(){return I.call(this)},set:function(N){y=""+N,C.call(this,N)}}),Object.defineProperty(u,p,{enumerable:_.enumerable}),{getValue:function(){return y},setValue:function(N){y=""+N},stopTracking:function(){u._valueTracker=null,delete u[p]}}}}function Ai(u){if(!u._valueTracker){var p=Ye(u)?"checked":"value";u._valueTracker=Pt(u,p,""+u[p])}}function Ir(u){if(!u)return!1;var p=u._valueTracker;if(!p)return!0;var y=p.getValue(),_="";return u&&(_=Ye(u)?u.checked?"true":"false":u.value),u=_,u!==y?(p.setValue(u),!0):!1}function br(u){if(u=u||(typeof document<"u"?document:void 0),typeof u>"u")return null;try{return u.activeElement||u.body}catch{return u.body}}var Wr=/[\n"\\]/g;function ja(u){return u.replace(Wr,function(p){return"\\"+p.charCodeAt(0).toString(16)+" "})}function fg(u,p,y,_,I,C,N,Z){u.name="",N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?u.type=N:u.removeAttribute("type"),p!=null?N==="number"?(p===0&&u.value===""||u.value!=p)&&(u.value=""+Me(p)):u.value!==""+Me(p)&&(u.value=""+Me(p)):N!=="submit"&&N!=="reset"||u.removeAttribute("value"),p!=null?Qp(u,N,Me(p)):y!=null?Qp(u,N,Me(y)):_!=null&&u.removeAttribute("value"),I==null&&C!=null&&(u.defaultChecked=!!C),I!=null&&(u.checked=I&&typeof I!="function"&&typeof I!="symbol"),Z!=null&&typeof Z!="function"&&typeof Z!="symbol"&&typeof Z!="boolean"?u.name=""+Me(Z):u.removeAttribute("name")}function Lu(u,p,y,_,I,C,N,Z){if(C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(u.type=C),p!=null||y!=null){if(!(C!=="submit"&&C!=="reset"||p!=null)){Ai(u);return}y=y!=null?""+Me(y):"",p=p!=null?""+Me(p):y,Z||p===u.value||(u.value=p),u.defaultValue=p}_=_??I,_=typeof _!="function"&&typeof _!="symbol"&&!!_,u.checked=Z?u.checked:!!_,u.defaultChecked=!!_,N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"&&(u.name=N),Ai(u)}function Qp(u,p,y){p==="number"&&br(u.ownerDocument)===u||u.defaultValue===""+y||(u.defaultValue=""+y)}function mg(u,p,y,_){if(u=u.options,p){p={};for(var I=0;I<y.length;I++)p["$"+y[I]]=!0;for(y=0;y<u.length;y++)I=p.hasOwnProperty("$"+u[y].value),u[y].selected!==I&&(u[y].selected=I),I&&_&&(u[y].defaultSelected=!0)}else{for(y=""+Me(y),p=null,I=0;I<u.length;I++){if(u[I].value===y){u[I].selected=!0,_&&(u[I].defaultSelected=!0);return}p!==null||u[I].disabled||(p=u[I])}p!==null&&(p.selected=!0)}}function cI(u,p,y){if(p!=null&&(p=""+Me(p),p!==u.value&&(u.value=p),y==null)){u.defaultValue!==p&&(u.defaultValue=p);return}u.defaultValue=y!=null?""+Me(y):""}function uI(u,p,y,_){if(p==null){if(_!=null){if(y!=null)throw Error(r(92));if(Te(_)){if(1<_.length)throw Error(r(93));_=_[0]}y=_}y==null&&(y=""),p=y}y=Me(p),u.defaultValue=y,_=u.textContent,_===y&&_!==""&&_!==null&&(u.value=_),Ai(u)}function eh(u,p){if(p){var y=u.firstChild;if(y&&y===u.lastChild&&y.nodeType===3){y.nodeValue=p;return}}u.textContent=p}var nj=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function hA(u,p,y){var _=p.indexOf("--")===0;y==null||typeof y=="boolean"||y===""?_?u.setProperty(p,""):p==="float"?u.cssFloat="":u[p]="":_?u.setProperty(p,y):typeof y!="number"||y===0||nj.has(p)?p==="float"?u.cssFloat=y:u[p]=(""+y).trim():u[p]=y+"px"}function dI(u,p,y){if(p!=null&&typeof p!="object")throw Error(r(62));if(u=u.style,y!=null){for(var _ in y)!y.hasOwnProperty(_)||p!=null&&p.hasOwnProperty(_)||(_.indexOf("--")===0?u.setProperty(_,""):_==="float"?u.cssFloat="":u[_]="");for(var I in p)_=p[I],p.hasOwnProperty(I)&&y[I]!==_&&hA(u,I,_)}else for(var C in p)p.hasOwnProperty(C)&&hA(u,C,p[C])}function hI(u){if(u.indexOf("-")===-1)return!1;switch(u){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sj=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),pA=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Kv(u){return pA.test(""+u)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":u}function Fu(){}var eb=null;function pI(u){return u=u.target||u.srcElement||window,u.correspondingUseElement&&(u=u.correspondingUseElement),u.nodeType===3?u.parentNode:u}var Kp=null,gg=null;function tb(u){var p=Ac(u);if(p&&(u=p.stateNode)){var y=u[jr]||null;e:switch(u=p.stateNode,p.type){case"input":if(fg(u,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name),p=y.name,y.type==="radio"&&p!=null){for(y=u;y.parentNode;)y=y.parentNode;for(y=y.querySelectorAll('input[name="'+ja(""+p)+'"][type="radio"]'),p=0;p<y.length;p++){var _=y[p];if(_!==u&&_.form===u.form){var I=_[jr]||null;if(!I)throw Error(r(90));fg(_,I.value,I.defaultValue,I.defaultValue,I.checked,I.defaultChecked,I.type,I.name)}}for(p=0;p<y.length;p++)_=y[p],_.form===u.form&&Ir(_)}break e;case"textarea":cI(u,y.value,y.defaultValue);break e;case"select":p=y.value,p!=null&&mg(u,!!y.multiple,p,!1)}}}var fI=!1;function mI(u,p,y){if(fI)return u(p,y);fI=!0;try{var _=u(p);return _}finally{if(fI=!1,(Kp!==null||gg!==null)&&(cP(),Kp&&(p=Kp,u=gg,gg=Kp=null,tb(p),u)))for(p=0;p<u.length;p++)tb(u[p])}}function yg(u,p){var y=u.stateNode;if(y===null)return null;var _=y[jr]||null;if(_===null)return null;y=_[p];e:switch(p){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(_=!_.disabled)||(u=u.type,_=!(u==="button"||u==="input"||u==="select"||u==="textarea")),u=!_;break e;default:u=!1}if(u)return null;if(y&&typeof y!="function")throw Error(r(231,p,typeof y));return y}var Ru=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),j_=!1;if(Ru)try{var vg={};Object.defineProperty(vg,"passive",{get:function(){j_=!0}}),window.addEventListener("test",vg,vg),window.removeEventListener("test",vg,vg)}catch{j_=!1}var th=null,ef=null,tf=null;function fA(){if(tf)return tf;var u,p=ef,y=p.length,_,I="value"in th?th.value:th.textContent,C=I.length;for(u=0;u<y&&p[u]===I[u];u++);var N=y-u;for(_=1;_<=N&&p[y-_]===I[C-_];_++);return tf=I.slice(u,1<_?1-_:void 0)}function bg(u){var p=u.keyCode;return"charCode"in u?(u=u.charCode,u===0&&p===13&&(u=13)):u=p,u===10&&(u=13),32<=u||u===13?u:0}function ib(){return!0}function mA(){return!1}function Js(u){function p(y,_,I,C,N){this._reactName=y,this._targetInst=I,this.type=_,this.nativeEvent=C,this.target=N,this.currentTarget=null;for(var Z in u)u.hasOwnProperty(Z)&&(y=u[Z],this[Z]=y?y(C):C[Z]);return this.isDefaultPrevented=(C.defaultPrevented!=null?C.defaultPrevented:C.returnValue===!1)?ib:mA,this.isPropagationStopped=mA,this}return m(p.prototype,{preventDefault:function(){this.defaultPrevented=!0;var y=this.nativeEvent;y&&(y.preventDefault?y.preventDefault():typeof y.returnValue!="unknown"&&(y.returnValue=!1),this.isDefaultPrevented=ib)},stopPropagation:function(){var y=this.nativeEvent;y&&(y.stopPropagation?y.stopPropagation():typeof y.cancelBubble!="unknown"&&(y.cancelBubble=!0),this.isPropagationStopped=ib)},persist:function(){},isPersistent:ib}),p}var ih={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(u){return u.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rb=Js(ih),rf=m({},ih,{view:0,detail:0}),aj=Js(rf),gI,Pc,nb,V_=m({},rf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wg,button:0,buttons:0,relatedTarget:function(u){return u.relatedTarget===void 0?u.fromElement===u.srcElement?u.toElement:u.fromElement:u.relatedTarget},movementX:function(u){return"movementX"in u?u.movementX:(u!==nb&&(nb&&u.type==="mousemove"?(gI=u.screenX-nb.screenX,Pc=u.screenY-nb.screenY):Pc=gI=0,nb=u),gI)},movementY:function(u){return"movementY"in u?u.movementY:Pc}}),gA=Js(V_),yA=m({},V_,{dataTransfer:0}),vA=Js(yA),fa=m({},rf,{relatedTarget:0}),yI=Js(fa),oj=m({},ih,{animationName:0,elapsedTime:0,pseudoElement:0}),lj=Js(oj),cj=m({},ih,{clipboardData:function(u){return"clipboardData"in u?u.clipboardData:window.clipboardData}}),uj=Js(cj),dj=m({},ih,{data:0}),bA=Js(dj),hj={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},U_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nf(u){var p=this.nativeEvent;return p.getModifierState?p.getModifierState(u):(u=U_[u])?!!p[u]:!1}function wg(){return nf}var pj=m({},rf,{key:function(u){if(u.key){var p=hj[u.key]||u.key;if(p!=="Unidentified")return p}return u.type==="keypress"?(u=bg(u),u===13?"Enter":String.fromCharCode(u)):u.type==="keydown"||u.type==="keyup"?wA[u.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wg,charCode:function(u){return u.type==="keypress"?bg(u):0},keyCode:function(u){return u.type==="keydown"||u.type==="keyup"?u.keyCode:0},which:function(u){return u.type==="keypress"?bg(u):u.type==="keydown"||u.type==="keyup"?u.keyCode:0}}),_A=Js(pj),xA=m({},V_,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vI=Js(xA),sb=m({},rf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wg}),fj=Js(sb),mj=m({},ih,{propertyName:0,elapsedTime:0,pseudoElement:0}),gj=Js(mj),yj=m({},V_,{deltaX:function(u){return"deltaX"in u?u.deltaX:"wheelDeltaX"in u?-u.wheelDeltaX:0},deltaY:function(u){return"deltaY"in u?u.deltaY:"wheelDeltaY"in u?-u.wheelDeltaY:"wheelDelta"in u?-u.wheelDelta:0},deltaZ:0,deltaMode:0}),vj=Js(yj),bj=m({},ih,{newState:0,oldState:0}),bI=Js(bj),wj=[9,13,27,32],_g=Ru&&"CompositionEvent"in window,ab=null;Ru&&"documentMode"in document&&(ab=document.documentMode);var wI=Ru&&"TextEvent"in window&&!ab,$A=Ru&&(!_g||ab&&8<ab&&11>=ab),SA=" ",_I=!1;function xg(u,p){switch(u){case"keyup":return wj.indexOf(p.keyCode)!==-1;case"keydown":return p.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zu(u){return u=u.detail,typeof u=="object"&&"data"in u?u.data:null}var sf=!1;function xI(u,p){switch(u){case"compositionend":return zu(p);case"keypress":return p.which!==32?null:(_I=!0,SA);case"textInput":return u=p.data,u===SA&&_I?null:u;default:return null}}function _j(u,p){if(sf)return u==="compositionend"||!_g&&xg(u,p)?(u=fA(),tf=ef=th=null,sf=!1,u):null;switch(u){case"paste":return null;case"keypress":if(!(p.ctrlKey||p.altKey||p.metaKey)||p.ctrlKey&&p.altKey){if(p.char&&1<p.char.length)return p.char;if(p.which)return String.fromCharCode(p.which)}return null;case"compositionend":return $A&&p.locale!=="ko"?null:p.data;default:return null}}var xj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function TA(u){var p=u&&u.nodeName&&u.nodeName.toLowerCase();return p==="input"?!!xj[u.type]:p==="textarea"}function IA(u,p,y,_){Kp?gg?gg.push(_):gg=[_]:Kp=_,p=gP(p,"onChange"),0<p.length&&(y=new rb("onChange","change",null,y,_),u.push({event:y,listeners:p}))}var ob=null,lb=null;function $j(u){cee(u,0)}function B_(u){var p=Vr(u);if(Ir(p))return u}function MA(u,p){if(u==="change")return p}var CA=!1;if(Ru){var T;if(Ru){var S="oninput"in document;if(!S){var E=document.createElement("div");E.setAttribute("oninput","return;"),S=typeof E.oninput=="function"}T=S}else T=!1;CA=T&&(!document.documentMode||9<document.documentMode)}function P(){ob&&(ob.detachEvent("onpropertychange",R),lb=ob=null)}function R(u){if(u.propertyName==="value"&&B_(lb)){var p=[];IA(p,lb,u,pI(u)),mI($j,p)}}function j(u,p,y){u==="focusin"?(P(),ob=p,lb=y,ob.attachEvent("onpropertychange",R)):u==="focusout"&&P()}function W(u){if(u==="selectionchange"||u==="keyup"||u==="keydown")return B_(lb)}function Y(u,p){if(u==="click")return B_(p)}function K(u,p){if(u==="input"||u==="change")return B_(p)}function fe(u,p){return u===p&&(u!==0||1/u===1/p)||u!==u&&p!==p}var ee=typeof Object.is=="function"?Object.is:fe;function we(u,p){if(ee(u,p))return!0;if(typeof u!="object"||u===null||typeof p!="object"||p===null)return!1;var y=Object.keys(u),_=Object.keys(p);if(y.length!==_.length)return!1;for(_=0;_<y.length;_++){var I=y[_];if(!hg.call(p,I)||!ee(u[I],p[I]))return!1}return!0}function Fe(u){for(;u&&u.firstChild;)u=u.firstChild;return u}function Je(u,p){var y=Fe(u);u=0;for(var _;y;){if(y.nodeType===3){if(_=u+y.textContent.length,u<=p&&_>=p)return{node:y,offset:p-u};u=_}e:{for(;y;){if(y.nextSibling){y=y.nextSibling;break e}y=y.parentNode}y=void 0}y=Fe(y)}}function We(u,p){return u&&p?u===p?!0:u&&u.nodeType===3?!1:p&&p.nodeType===3?We(u,p.parentNode):"contains"in u?u.contains(p):u.compareDocumentPosition?!!(u.compareDocumentPosition(p)&16):!1:!1}function Qe(u){u=u!=null&&u.ownerDocument!=null&&u.ownerDocument.defaultView!=null?u.ownerDocument.defaultView:window;for(var p=br(u.document);p instanceof u.HTMLIFrameElement;){try{var y=typeof p.contentWindow.location.href=="string"}catch{y=!1}if(y)u=p.contentWindow;else break;p=br(u.document)}return p}function yt(u){var p=u&&u.nodeName&&u.nodeName.toLowerCase();return p&&(p==="input"&&(u.type==="text"||u.type==="search"||u.type==="tel"||u.type==="url"||u.type==="password")||p==="textarea"||u.contentEditable==="true")}var ht=Ru&&"documentMode"in document&&11>=document.documentMode,Tt=null,ti=null,di=null,Vt=!1;function ri(u,p,y){var _=y.window===y?y.document:y.nodeType===9?y:y.ownerDocument;Vt||Tt==null||Tt!==br(_)||(_=Tt,"selectionStart"in _&&yt(_)?_={start:_.selectionStart,end:_.selectionEnd}:(_=(_.ownerDocument&&_.ownerDocument.defaultView||window).getSelection(),_={anchorNode:_.anchorNode,anchorOffset:_.anchorOffset,focusNode:_.focusNode,focusOffset:_.focusOffset}),di&&we(di,_)||(di=_,_=gP(ti,"onSelect"),0<_.length&&(p=new rb("onSelect","select",null,p,y),u.push({event:p,listeners:_}),p.target=Tt)))}function pn(u,p){var y={};return y[u.toLowerCase()]=p.toLowerCase(),y["Webkit"+u]="webkit"+p,y["Moz"+u]="moz"+p,y}var tr={animationend:pn("Animation","AnimationEnd"),animationiteration:pn("Animation","AnimationIteration"),animationstart:pn("Animation","AnimationStart"),transitionrun:pn("Transition","TransitionRun"),transitionstart:pn("Transition","TransitionStart"),transitioncancel:pn("Transition","TransitionCancel"),transitionend:pn("Transition","TransitionEnd")},ma={},Jo={};Ru&&(Jo=document.createElement("div").style,"AnimationEvent"in window||(delete tr.animationend.animation,delete tr.animationiteration.animation,delete tr.animationstart.animation),"TransitionEvent"in window||delete tr.transitionend.transition);function ga(u){if(ma[u])return ma[u];if(!tr[u])return u;var p=tr[u],y;for(y in p)if(p.hasOwnProperty(y)&&y in Jo)return ma[u]=p[y];return u}var cb=ga("animationend"),$g=ga("animationiteration"),VX=ga("animationstart"),TMe=ga("transitionrun"),IMe=ga("transitionstart"),MMe=ga("transitioncancel"),UX=ga("transitionend"),BX=new Map,Sj="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Sj.push("scrollEnd");function Nu(u,p){BX.set(u,p),Yo(p,[u])}var EA=typeof reportError=="function"?reportError:function(u){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var p=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof u=="object"&&u!==null&&typeof u.message=="string"?String(u.message):String(u),error:u});if(!window.dispatchEvent(p))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",u);return}console.error(u)},Oc=[],q_=0,Tj=0;function kA(){for(var u=q_,p=Tj=q_=0;p<u;){var y=Oc[p];Oc[p++]=null;var _=Oc[p];Oc[p++]=null;var I=Oc[p];Oc[p++]=null;var C=Oc[p];if(Oc[p++]=null,_!==null&&I!==null){var N=_.pending;N===null?I.next=I:(I.next=N.next,N.next=I),_.pending=I}C!==0&&qX(y,I,C)}}function AA(u,p,y,_){Oc[q_++]=u,Oc[q_++]=p,Oc[q_++]=y,Oc[q_++]=_,Tj|=_,u.lanes|=_,u=u.alternate,u!==null&&(u.lanes|=_)}function Ij(u,p,y,_){return AA(u,p,y,_),PA(u)}function ub(u,p){return AA(u,null,null,p),PA(u)}function qX(u,p,y){u.lanes|=y;var _=u.alternate;_!==null&&(_.lanes|=y);for(var I=!1,C=u.return;C!==null;)C.childLanes|=y,_=C.alternate,_!==null&&(_.childLanes|=y),C.tag===22&&(u=C.stateNode,u===null||u._visibility&1||(I=!0)),u=C,C=C.return;return u.tag===3?(C=u.stateNode,I&&p!==null&&(I=31-Ws(y),u=C.hiddenUpdates,_=u[I],_===null?u[I]=[p]:_.push(p),p.lane=y|536870912),C):null}function PA(u){if(50<qI)throw qI=0,F4=null,Error(r(185));for(var p=u.return;p!==null;)u=p,p=u.return;return u.tag===3?u.stateNode:null}var H_={};function CMe(u,p,y,_){this.tag=u,this.key=y,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=_,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vl(u,p,y,_){return new CMe(u,p,y,_)}function Mj(u){return u=u.prototype,!(!u||!u.isReactComponent)}function af(u,p){var y=u.alternate;return y===null?(y=Vl(u.tag,p,u.key,u.mode),y.elementType=u.elementType,y.type=u.type,y.stateNode=u.stateNode,y.alternate=u,u.alternate=y):(y.pendingProps=p,y.type=u.type,y.flags=0,y.subtreeFlags=0,y.deletions=null),y.flags=u.flags&65011712,y.childLanes=u.childLanes,y.lanes=u.lanes,y.child=u.child,y.memoizedProps=u.memoizedProps,y.memoizedState=u.memoizedState,y.updateQueue=u.updateQueue,p=u.dependencies,y.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},y.sibling=u.sibling,y.index=u.index,y.ref=u.ref,y.refCleanup=u.refCleanup,y}function HX(u,p){u.flags&=65011714;var y=u.alternate;return y===null?(u.childLanes=0,u.lanes=p,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=y.childLanes,u.lanes=y.lanes,u.child=y.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=y.memoizedProps,u.memoizedState=y.memoizedState,u.updateQueue=y.updateQueue,u.type=y.type,p=y.dependencies,u.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext}),u}function OA(u,p,y,_,I,C){var N=0;if(_=u,typeof u=="function")Mj(u)&&(N=1);else if(typeof u=="string")N=OCe(u,y,at.current)?26:u==="html"||u==="head"||u==="body"?27:5;else e:switch(u){case J:return u=Vl(31,y,p,I),u.elementType=J,u.lanes=C,u;case x:return db(y.children,I,C,p);case $:N=8,I|=24;break;case M:return u=Vl(12,y,p,I|2),u.elementType=M,u.lanes=C,u;case z:return u=Vl(13,y,p,I),u.elementType=z,u.lanes=C,u;case U:return u=Vl(19,y,p,I),u.elementType=U,u.lanes=C,u;default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case A:N=10;break e;case k:N=9;break e;case L:N=11;break e;case B:N=14;break e;case X:N=16,_=null;break e}N=29,y=Error(r(130,u===null?"null":typeof u,"")),_=null}return p=Vl(N,y,p,I),p.elementType=u,p.type=_,p.lanes=C,p}function db(u,p,y,_){return u=Vl(7,u,_,p),u.lanes=y,u}function Cj(u,p,y){return u=Vl(6,u,null,p),u.lanes=y,u}function GX(u){var p=Vl(18,null,null,0);return p.stateNode=u,p}function Ej(u,p,y){return p=Vl(4,u.children!==null?u.children:[],u.key,p),p.lanes=y,p.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},p}var WX=new WeakMap;function Lc(u,p){if(typeof u=="object"&&u!==null){var y=WX.get(u);return y!==void 0?y:(p={value:u,source:p,stack:Hd(p)},WX.set(u,p),p)}return{value:u,source:p,stack:Hd(p)}}var G_=[],W_=0,LA=null,$I=0,Fc=[],Rc=0,Sg=null,rh=1,nh="";function of(u,p){G_[W_++]=$I,G_[W_++]=LA,LA=u,$I=p}function ZX(u,p,y){Fc[Rc++]=rh,Fc[Rc++]=nh,Fc[Rc++]=Sg,Sg=u;var _=rh;u=nh;var I=32-Ws(_)-1;_&=~(1<<I),y+=1;var C=32-Ws(p)+I;if(30<C){var N=I-I%5;C=(_&(1<<N)-1).toString(32),_>>=N,I-=N,rh=1<<32-Ws(p)+I|y<<I|_,nh=C+u}else rh=1<<C|y<<I|_,nh=u}function kj(u){u.return!==null&&(of(u,1),ZX(u,1,0))}function Aj(u){for(;u===LA;)LA=G_[--W_],G_[W_]=null,$I=G_[--W_],G_[W_]=null;for(;u===Sg;)Sg=Fc[--Rc],Fc[Rc]=null,nh=Fc[--Rc],Fc[Rc]=null,rh=Fc[--Rc],Fc[Rc]=null}function YX(u,p){Fc[Rc++]=rh,Fc[Rc++]=nh,Fc[Rc++]=Sg,rh=p.id,nh=p.overflow,Sg=u}var ya=null,Zr=null,Ri=!1,Tg=null,zc=!1,Pj=Error(r(519));function Ig(u){var p=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw SI(Lc(p,u)),Pj}function JX(u){var p=u.stateNode,y=u.type,_=u.memoizedProps;switch(p[vr]=u,p[jr]=_,y){case"dialog":Ci("cancel",p),Ci("close",p);break;case"iframe":case"object":case"embed":Ci("load",p);break;case"video":case"audio":for(y=0;y<GI.length;y++)Ci(GI[y],p);break;case"source":Ci("error",p);break;case"img":case"image":case"link":Ci("error",p),Ci("load",p);break;case"details":Ci("toggle",p);break;case"input":Ci("invalid",p),Lu(p,_.value,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name,!0);break;case"select":Ci("invalid",p);break;case"textarea":Ci("invalid",p),uI(p,_.value,_.defaultValue,_.children)}y=_.children,typeof y!="string"&&typeof y!="number"&&typeof y!="bigint"||p.textContent===""+y||_.suppressHydrationWarning===!0||pee(p.textContent,y)?(_.popover!=null&&(Ci("beforetoggle",p),Ci("toggle",p)),_.onScroll!=null&&Ci("scroll",p),_.onScrollEnd!=null&&Ci("scrollend",p),_.onClick!=null&&(p.onclick=Fu),p=!0):p=!1,p||Ig(u,!0)}function XX(u){for(ya=u.return;ya;)switch(ya.tag){case 5:case 31:case 13:zc=!1;return;case 27:case 3:zc=!0;return;default:ya=ya.return}}function Z_(u){if(u!==ya)return!1;if(!Ri)return XX(u),Ri=!0,!1;var p=u.tag,y;if((y=p!==3&&p!==27)&&((y=p===5)&&(y=u.type,y=!(y!=="form"&&y!=="button")||J4(u.type,u.memoizedProps)),y=!y),y&&Zr&&Ig(u),XX(u),p===13){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(r(317));Zr=xee(u)}else if(p===31){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(r(317));Zr=xee(u)}else p===27?(p=Zr,jg(u.type)?(u=tV,tV=null,Zr=u):Zr=p):Zr=ya?Dc(u.stateNode.nextSibling):null;return!0}function hb(){Zr=ya=null,Ri=!1}function Oj(){var u=Tg;return u!==null&&(el===null?el=u:el.push.apply(el,u),Tg=null),u}function SI(u){Tg===null?Tg=[u]:Tg.push(u)}var Lj=oe(null),pb=null,lf=null;function Mg(u,p,y){Ke(Lj,p._currentValue),p._currentValue=y}function cf(u){u._currentValue=Lj.current,ze(Lj)}function Fj(u,p,y){for(;u!==null;){var _=u.alternate;if((u.childLanes&p)!==p?(u.childLanes|=p,_!==null&&(_.childLanes|=p)):_!==null&&(_.childLanes&p)!==p&&(_.childLanes|=p),u===y)break;u=u.return}}function Rj(u,p,y,_){var I=u.child;for(I!==null&&(I.return=u);I!==null;){var C=I.dependencies;if(C!==null){var N=I.child;C=C.firstContext;e:for(;C!==null;){var Z=C;C=I;for(var ce=0;ce<p.length;ce++)if(Z.context===p[ce]){C.lanes|=y,Z=C.alternate,Z!==null&&(Z.lanes|=y),Fj(C.return,y,u),_||(N=null);break e}C=Z.next}}else if(I.tag===18){if(N=I.return,N===null)throw Error(r(341));N.lanes|=y,C=N.alternate,C!==null&&(C.lanes|=y),Fj(N,y,u),N=null}else N=I.child;if(N!==null)N.return=I;else for(N=I;N!==null;){if(N===u){N=null;break}if(I=N.sibling,I!==null){I.return=N.return,N=I;break}N=N.return}I=N}}function Y_(u,p,y,_){u=null;for(var I=p,C=!1;I!==null;){if(!C){if((I.flags&524288)!==0)C=!0;else if((I.flags&262144)!==0)break}if(I.tag===10){var N=I.alternate;if(N===null)throw Error(r(387));if(N=N.memoizedProps,N!==null){var Z=I.type;ee(I.pendingProps.value,N.value)||(u!==null?u.push(Z):u=[Z])}}else if(I===ui.current){if(N=I.alternate,N===null)throw Error(r(387));N.memoizedState.memoizedState!==I.memoizedState.memoizedState&&(u!==null?u.push(XI):u=[XI])}I=I.return}u!==null&&Rj(p,u,y,_),p.flags|=262144}function FA(u){for(u=u.firstContext;u!==null;){if(!ee(u.context._currentValue,u.memoizedValue))return!0;u=u.next}return!1}function fb(u){pb=u,lf=null,u=u.dependencies,u!==null&&(u.firstContext=null)}function va(u){return QX(pb,u)}function RA(u,p){return pb===null&&fb(u),QX(u,p)}function QX(u,p){var y=p._currentValue;if(p={context:p,memoizedValue:y,next:null},lf===null){if(u===null)throw Error(r(308));lf=p,u.dependencies={lanes:0,firstContext:p},u.flags|=524288}else lf=lf.next=p;return y}var EMe=typeof AbortController<"u"?AbortController:function(){var u=[],p=this.signal={aborted:!1,addEventListener:function(y,_){u.push(_)}};this.abort=function(){p.aborted=!0,u.forEach(function(y){return y()})}},kMe=t.unstable_scheduleCallback,AMe=t.unstable_NormalPriority,us={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function zj(){return{controller:new EMe,data:new Map,refCount:0}}function TI(u){u.refCount--,u.refCount===0&&kMe(AMe,function(){u.controller.abort()})}var II=null,Nj=0,J_=0,X_=null;function PMe(u,p){if(II===null){var y=II=[];Nj=0,J_=V4(),X_={status:"pending",value:void 0,then:function(_){y.push(_)}}}return Nj++,p.then(KX,KX),p}function KX(){if(--Nj===0&&II!==null){X_!==null&&(X_.status="fulfilled");var u=II;II=null,J_=0,X_=null;for(var p=0;p<u.length;p++)(0,u[p])()}}function OMe(u,p){var y=[],_={status:"pending",value:null,reason:null,then:function(I){y.push(I)}};return u.then(function(){_.status="fulfilled",_.value=p;for(var I=0;I<y.length;I++)(0,y[I])(p)},function(I){for(_.status="rejected",_.reason=I,I=0;I<y.length;I++)(0,y[I])(void 0)}),_}var eQ=ne.S;ne.S=function(u,p){zK=cs(),typeof p=="object"&&p!==null&&typeof p.then=="function"&&PMe(u,p),eQ!==null&&eQ(u,p)};var mb=oe(null);function Dj(){var u=mb.current;return u!==null?u:Fr.pooledCache}function zA(u,p){p===null?Ke(mb,mb.current):Ke(mb,p.pool)}function tQ(){var u=Dj();return u===null?null:{parent:us._currentValue,pool:u}}var Q_=Error(r(460)),jj=Error(r(474)),NA=Error(r(542)),DA={then:function(){}};function iQ(u){return u=u.status,u==="fulfilled"||u==="rejected"}function rQ(u,p,y){switch(y=u[y],y===void 0?u.push(p):y!==p&&(p.then(Fu,Fu),p=y),p.status){case"fulfilled":return p.value;case"rejected":throw u=p.reason,sQ(u),u;default:if(typeof p.status=="string")p.then(Fu,Fu);else{if(u=Fr,u!==null&&100<u.shellSuspendCounter)throw Error(r(482));u=p,u.status="pending",u.then(function(_){if(p.status==="pending"){var I=p;I.status="fulfilled",I.value=_}},function(_){if(p.status==="pending"){var I=p;I.status="rejected",I.reason=_}})}switch(p.status){case"fulfilled":return p.value;case"rejected":throw u=p.reason,sQ(u),u}throw yb=p,Q_}}function gb(u){try{var p=u._init;return p(u._payload)}catch(y){throw y!==null&&typeof y=="object"&&typeof y.then=="function"?(yb=y,Q_):y}}var yb=null;function nQ(){if(yb===null)throw Error(r(459));var u=yb;return yb=null,u}function sQ(u){if(u===Q_||u===NA)throw Error(r(483))}var K_=null,MI=0;function jA(u){var p=MI;return MI+=1,K_===null&&(K_=[]),rQ(K_,u,p)}function CI(u,p){p=p.props.ref,u.ref=p!==void 0?p:null}function VA(u,p){throw p.$$typeof===g?Error(r(525)):(u=Object.prototype.toString.call(p),Error(r(31,u==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":u)))}function aQ(u){function p(xe,ye){if(u){var Ce=xe.deletions;Ce===null?(xe.deletions=[ye],xe.flags|=16):Ce.push(ye)}}function y(xe,ye){if(!u)return null;for(;ye!==null;)p(xe,ye),ye=ye.sibling;return null}function _(xe){for(var ye=new Map;xe!==null;)xe.key!==null?ye.set(xe.key,xe):ye.set(xe.index,xe),xe=xe.sibling;return ye}function I(xe,ye){return xe=af(xe,ye),xe.index=0,xe.sibling=null,xe}function C(xe,ye,Ce){return xe.index=Ce,u?(Ce=xe.alternate,Ce!==null?(Ce=Ce.index,Ce<ye?(xe.flags|=67108866,ye):Ce):(xe.flags|=67108866,ye)):(xe.flags|=1048576,ye)}function N(xe){return u&&xe.alternate===null&&(xe.flags|=67108866),xe}function Z(xe,ye,Ce,Ve){return ye===null||ye.tag!==6?(ye=Cj(Ce,xe.mode,Ve),ye.return=xe,ye):(ye=I(ye,Ce),ye.return=xe,ye)}function ce(xe,ye,Ce,Ve){var zt=Ce.type;return zt===x?De(xe,ye,Ce.props.children,Ve,Ce.key):ye!==null&&(ye.elementType===zt||typeof zt=="object"&&zt!==null&&zt.$$typeof===X&&gb(zt)===ye.type)?(ye=I(ye,Ce.props),CI(ye,Ce),ye.return=xe,ye):(ye=OA(Ce.type,Ce.key,Ce.props,null,xe.mode,Ve),CI(ye,Ce),ye.return=xe,ye)}function Ee(xe,ye,Ce,Ve){return ye===null||ye.tag!==4||ye.stateNode.containerInfo!==Ce.containerInfo||ye.stateNode.implementation!==Ce.implementation?(ye=Ej(Ce,xe.mode,Ve),ye.return=xe,ye):(ye=I(ye,Ce.children||[]),ye.return=xe,ye)}function De(xe,ye,Ce,Ve,zt){return ye===null||ye.tag!==7?(ye=db(Ce,xe.mode,Ve,zt),ye.return=xe,ye):(ye=I(ye,Ce),ye.return=xe,ye)}function Be(xe,ye,Ce){if(typeof ye=="string"&&ye!==""||typeof ye=="number"||typeof ye=="bigint")return ye=Cj(""+ye,xe.mode,Ce),ye.return=xe,ye;if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case v:return Ce=OA(ye.type,ye.key,ye.props,null,xe.mode,Ce),CI(Ce,ye),Ce.return=xe,Ce;case b:return ye=Ej(ye,xe.mode,Ce),ye.return=xe,ye;case X:return ye=gb(ye),Be(xe,ye,Ce)}if(Te(ye)||ie(ye))return ye=db(ye,xe.mode,Ce,null),ye.return=xe,ye;if(typeof ye.then=="function")return Be(xe,jA(ye),Ce);if(ye.$$typeof===A)return Be(xe,RA(xe,ye),Ce);VA(xe,ye)}return null}function ke(xe,ye,Ce,Ve){var zt=ye!==null?ye.key:null;if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number"||typeof Ce=="bigint")return zt!==null?null:Z(xe,ye,""+Ce,Ve);if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case v:return Ce.key===zt?ce(xe,ye,Ce,Ve):null;case b:return Ce.key===zt?Ee(xe,ye,Ce,Ve):null;case X:return Ce=gb(Ce),ke(xe,ye,Ce,Ve)}if(Te(Ce)||ie(Ce))return zt!==null?null:De(xe,ye,Ce,Ve,null);if(typeof Ce.then=="function")return ke(xe,ye,jA(Ce),Ve);if(Ce.$$typeof===A)return ke(xe,ye,RA(xe,Ce),Ve);VA(xe,Ce)}return null}function Le(xe,ye,Ce,Ve,zt){if(typeof Ve=="string"&&Ve!==""||typeof Ve=="number"||typeof Ve=="bigint")return xe=xe.get(Ce)||null,Z(ye,xe,""+Ve,zt);if(typeof Ve=="object"&&Ve!==null){switch(Ve.$$typeof){case v:return xe=xe.get(Ve.key===null?Ce:Ve.key)||null,ce(ye,xe,Ve,zt);case b:return xe=xe.get(Ve.key===null?Ce:Ve.key)||null,Ee(ye,xe,Ve,zt);case X:return Ve=gb(Ve),Le(xe,ye,Ce,Ve,zt)}if(Te(Ve)||ie(Ve))return xe=xe.get(Ce)||null,De(ye,xe,Ve,zt,null);if(typeof Ve.then=="function")return Le(xe,ye,Ce,jA(Ve),zt);if(Ve.$$typeof===A)return Le(xe,ye,Ce,RA(ye,Ve),zt);VA(ye,Ve)}return null}function $t(xe,ye,Ce,Ve){for(var zt=null,Gi=null,Mt=ye,gi=ye=0,Oi=null;Mt!==null&&gi<Ce.length;gi++){Mt.index>gi?(Oi=Mt,Mt=null):Oi=Mt.sibling;var Wi=ke(xe,Mt,Ce[gi],Ve);if(Wi===null){Mt===null&&(Mt=Oi);break}u&&Mt&&Wi.alternate===null&&p(xe,Mt),ye=C(Wi,ye,gi),Gi===null?zt=Wi:Gi.sibling=Wi,Gi=Wi,Mt=Oi}if(gi===Ce.length)return y(xe,Mt),Ri&&of(xe,gi),zt;if(Mt===null){for(;gi<Ce.length;gi++)Mt=Be(xe,Ce[gi],Ve),Mt!==null&&(ye=C(Mt,ye,gi),Gi===null?zt=Mt:Gi.sibling=Mt,Gi=Mt);return Ri&&of(xe,gi),zt}for(Mt=_(Mt);gi<Ce.length;gi++)Oi=Le(Mt,xe,gi,Ce[gi],Ve),Oi!==null&&(u&&Oi.alternate!==null&&Mt.delete(Oi.key===null?gi:Oi.key),ye=C(Oi,ye,gi),Gi===null?zt=Oi:Gi.sibling=Oi,Gi=Oi);return u&&Mt.forEach(function(Hg){return p(xe,Hg)}),Ri&&of(xe,gi),zt}function Bt(xe,ye,Ce,Ve){if(Ce==null)throw Error(r(151));for(var zt=null,Gi=null,Mt=ye,gi=ye=0,Oi=null,Wi=Ce.next();Mt!==null&&!Wi.done;gi++,Wi=Ce.next()){Mt.index>gi?(Oi=Mt,Mt=null):Oi=Mt.sibling;var Hg=ke(xe,Mt,Wi.value,Ve);if(Hg===null){Mt===null&&(Mt=Oi);break}u&&Mt&&Hg.alternate===null&&p(xe,Mt),ye=C(Hg,ye,gi),Gi===null?zt=Hg:Gi.sibling=Hg,Gi=Hg,Mt=Oi}if(Wi.done)return y(xe,Mt),Ri&&of(xe,gi),zt;if(Mt===null){for(;!Wi.done;gi++,Wi=Ce.next())Wi=Be(xe,Wi.value,Ve),Wi!==null&&(ye=C(Wi,ye,gi),Gi===null?zt=Wi:Gi.sibling=Wi,Gi=Wi);return Ri&&of(xe,gi),zt}for(Mt=_(Mt);!Wi.done;gi++,Wi=Ce.next())Wi=Le(Mt,xe,gi,Wi.value,Ve),Wi!==null&&(u&&Wi.alternate!==null&&Mt.delete(Wi.key===null?gi:Wi.key),ye=C(Wi,ye,gi),Gi===null?zt=Wi:Gi.sibling=Wi,Gi=Wi);return u&&Mt.forEach(function(qCe){return p(xe,qCe)}),Ri&&of(xe,gi),zt}function Er(xe,ye,Ce,Ve){if(typeof Ce=="object"&&Ce!==null&&Ce.type===x&&Ce.key===null&&(Ce=Ce.props.children),typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case v:e:{for(var zt=Ce.key;ye!==null;){if(ye.key===zt){if(zt=Ce.type,zt===x){if(ye.tag===7){y(xe,ye.sibling),Ve=I(ye,Ce.props.children),Ve.return=xe,xe=Ve;break e}}else if(ye.elementType===zt||typeof zt=="object"&&zt!==null&&zt.$$typeof===X&&gb(zt)===ye.type){y(xe,ye.sibling),Ve=I(ye,Ce.props),CI(Ve,Ce),Ve.return=xe,xe=Ve;break e}y(xe,ye);break}else p(xe,ye);ye=ye.sibling}Ce.type===x?(Ve=db(Ce.props.children,xe.mode,Ve,Ce.key),Ve.return=xe,xe=Ve):(Ve=OA(Ce.type,Ce.key,Ce.props,null,xe.mode,Ve),CI(Ve,Ce),Ve.return=xe,xe=Ve)}return N(xe);case b:e:{for(zt=Ce.key;ye!==null;){if(ye.key===zt)if(ye.tag===4&&ye.stateNode.containerInfo===Ce.containerInfo&&ye.stateNode.implementation===Ce.implementation){y(xe,ye.sibling),Ve=I(ye,Ce.children||[]),Ve.return=xe,xe=Ve;break e}else{y(xe,ye);break}else p(xe,ye);ye=ye.sibling}Ve=Ej(Ce,xe.mode,Ve),Ve.return=xe,xe=Ve}return N(xe);case X:return Ce=gb(Ce),Er(xe,ye,Ce,Ve)}if(Te(Ce))return $t(xe,ye,Ce,Ve);if(ie(Ce)){if(zt=ie(Ce),typeof zt!="function")throw Error(r(150));return Ce=zt.call(Ce),Bt(xe,ye,Ce,Ve)}if(typeof Ce.then=="function")return Er(xe,ye,jA(Ce),Ve);if(Ce.$$typeof===A)return Er(xe,ye,RA(xe,Ce),Ve);VA(xe,Ce)}return typeof Ce=="string"&&Ce!==""||typeof Ce=="number"||typeof Ce=="bigint"?(Ce=""+Ce,ye!==null&&ye.tag===6?(y(xe,ye.sibling),Ve=I(ye,Ce),Ve.return=xe,xe=Ve):(y(xe,ye),Ve=Cj(Ce,xe.mode,Ve),Ve.return=xe,xe=Ve),N(xe)):y(xe,ye)}return function(xe,ye,Ce,Ve){try{MI=0;var zt=Er(xe,ye,Ce,Ve);return K_=null,zt}catch(Mt){if(Mt===Q_||Mt===NA)throw Mt;var Gi=Vl(29,Mt,null,xe.mode);return Gi.lanes=Ve,Gi.return=xe,Gi}finally{}}}var vb=aQ(!0),oQ=aQ(!1),Cg=!1;function Vj(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Uj(u,p){u=u.updateQueue,p.updateQueue===u&&(p.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,callbacks:null})}function Eg(u){return{lane:u,tag:0,payload:null,callback:null,next:null}}function kg(u,p,y){var _=u.updateQueue;if(_===null)return null;if(_=_.shared,(ir&2)!==0){var I=_.pending;return I===null?p.next=p:(p.next=I.next,I.next=p),_.pending=p,p=PA(u),qX(u,null,y),p}return AA(u,_,p,y),PA(u)}function EI(u,p,y){if(p=p.updateQueue,p!==null&&(p=p.shared,(y&4194048)!==0)){var _=p.lanes;_&=u.pendingLanes,y|=_,p.lanes=y,Xp(u,y)}}function Bj(u,p){var y=u.updateQueue,_=u.alternate;if(_!==null&&(_=_.updateQueue,y===_)){var I=null,C=null;if(y=y.firstBaseUpdate,y!==null){do{var N={lane:y.lane,tag:y.tag,payload:y.payload,callback:null,next:null};C===null?I=C=N:C=C.next=N,y=y.next}while(y!==null);C===null?I=C=p:C=C.next=p}else I=C=p;y={baseState:_.baseState,firstBaseUpdate:I,lastBaseUpdate:C,shared:_.shared,callbacks:_.callbacks},u.updateQueue=y;return}u=y.lastBaseUpdate,u===null?y.firstBaseUpdate=p:u.next=p,y.lastBaseUpdate=p}var qj=!1;function kI(){if(qj){var u=X_;if(u!==null)throw u}}function AI(u,p,y,_){qj=!1;var I=u.updateQueue;Cg=!1;var C=I.firstBaseUpdate,N=I.lastBaseUpdate,Z=I.shared.pending;if(Z!==null){I.shared.pending=null;var ce=Z,Ee=ce.next;ce.next=null,N===null?C=Ee:N.next=Ee,N=ce;var De=u.alternate;De!==null&&(De=De.updateQueue,Z=De.lastBaseUpdate,Z!==N&&(Z===null?De.firstBaseUpdate=Ee:Z.next=Ee,De.lastBaseUpdate=ce))}if(C!==null){var Be=I.baseState;N=0,De=Ee=ce=null,Z=C;do{var ke=Z.lane&-536870913,Le=ke!==Z.lane;if(Le?(Pi&ke)===ke:(_&ke)===ke){ke!==0&&ke===J_&&(qj=!0),De!==null&&(De=De.next={lane:0,tag:Z.tag,payload:Z.payload,callback:null,next:null});e:{var $t=u,Bt=Z;ke=p;var Er=y;switch(Bt.tag){case 1:if($t=Bt.payload,typeof $t=="function"){Be=$t.call(Er,Be,ke);break e}Be=$t;break e;case 3:$t.flags=$t.flags&-65537|128;case 0:if($t=Bt.payload,ke=typeof $t=="function"?$t.call(Er,Be,ke):$t,ke==null)break e;Be=m({},Be,ke);break e;case 2:Cg=!0}}ke=Z.callback,ke!==null&&(u.flags|=64,Le&&(u.flags|=8192),Le=I.callbacks,Le===null?I.callbacks=[ke]:Le.push(ke))}else Le={lane:ke,tag:Z.tag,payload:Z.payload,callback:Z.callback,next:null},De===null?(Ee=De=Le,ce=Be):De=De.next=Le,N|=ke;if(Z=Z.next,Z===null){if(Z=I.shared.pending,Z===null)break;Le=Z,Z=Le.next,Le.next=null,I.lastBaseUpdate=Le,I.shared.pending=null}}while(!0);De===null&&(ce=Be),I.baseState=ce,I.firstBaseUpdate=Ee,I.lastBaseUpdate=De,C===null&&(I.shared.lanes=0),Fg|=N,u.lanes=N,u.memoizedState=Be}}function lQ(u,p){if(typeof u!="function")throw Error(r(191,u));u.call(p)}function cQ(u,p){var y=u.callbacks;if(y!==null)for(u.callbacks=null,u=0;u<y.length;u++)lQ(y[u],p)}var e1=oe(null),UA=oe(0);function uQ(u,p){u=vf,Ke(UA,u),Ke(e1,p),vf=u|p.baseLanes}function Hj(){Ke(UA,vf),Ke(e1,e1.current)}function Gj(){vf=UA.current,ze(e1),ze(UA)}var Ul=oe(null),Nc=null;function Ag(u){var p=u.alternate;Ke(Zn,Zn.current&1),Ke(Ul,u),Nc===null&&(p===null||e1.current!==null||p.memoizedState!==null)&&(Nc=u)}function Wj(u){Ke(Zn,Zn.current),Ke(Ul,u),Nc===null&&(Nc=u)}function dQ(u){u.tag===22?(Ke(Zn,Zn.current),Ke(Ul,u),Nc===null&&(Nc=u)):Pg()}function Pg(){Ke(Zn,Zn.current),Ke(Ul,Ul.current)}function Bl(u){ze(Ul),Nc===u&&(Nc=null),ze(Zn)}var Zn=oe(0);function BA(u){for(var p=u;p!==null;){if(p.tag===13){var y=p.memoizedState;if(y!==null&&(y=y.dehydrated,y===null||K4(y)||eV(y)))return p}else if(p.tag===19&&(p.memoizedProps.revealOrder==="forwards"||p.memoizedProps.revealOrder==="backwards"||p.memoizedProps.revealOrder==="unstable_legacy-backwards"||p.memoizedProps.revealOrder==="together")){if((p.flags&128)!==0)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===u)break;for(;p.sibling===null;){if(p.return===null||p.return===u)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}var uf=0,hi=null,Mr=null,ds=null,qA=!1,t1=!1,bb=!1,HA=0,PI=0,i1=null,LMe=0;function kn(){throw Error(r(321))}function Zj(u,p){if(p===null)return!1;for(var y=0;y<p.length&&y<u.length;y++)if(!ee(u[y],p[y]))return!1;return!0}function Yj(u,p,y,_,I,C){return uf=C,hi=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,ne.H=u===null||u.memoizedState===null?ZQ:u4,bb=!1,C=y(_,I),bb=!1,t1&&(C=pQ(p,y,_,I)),hQ(u),C}function hQ(u){ne.H=FI;var p=Mr!==null&&Mr.next!==null;if(uf=0,ds=Mr=hi=null,qA=!1,PI=0,i1=null,p)throw Error(r(300));u===null||hs||(u=u.dependencies,u!==null&&FA(u)&&(hs=!0))}function pQ(u,p,y,_){hi=u;var I=0;do{if(t1&&(i1=null),PI=0,t1=!1,25<=I)throw Error(r(301));if(I+=1,ds=Mr=null,u.updateQueue!=null){var C=u.updateQueue;C.lastEffect=null,C.events=null,C.stores=null,C.memoCache!=null&&(C.memoCache.index=0)}ne.H=YQ,C=p(y,_)}while(t1);return C}function FMe(){var u=ne.H,p=u.useState()[0];return p=typeof p.then=="function"?OI(p):p,u=u.useState()[0],(Mr!==null?Mr.memoizedState:null)!==u&&(hi.flags|=1024),p}function Jj(){var u=HA!==0;return HA=0,u}function Xj(u,p,y){p.updateQueue=u.updateQueue,p.flags&=-2053,u.lanes&=~y}function Qj(u){if(qA){for(u=u.memoizedState;u!==null;){var p=u.queue;p!==null&&(p.pending=null),u=u.next}qA=!1}uf=0,ds=Mr=hi=null,t1=!1,PI=HA=0,i1=null}function fo(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ds===null?hi.memoizedState=ds=u:ds=ds.next=u,ds}function Yn(){if(Mr===null){var u=hi.alternate;u=u!==null?u.memoizedState:null}else u=Mr.next;var p=ds===null?hi.memoizedState:ds.next;if(p!==null)ds=p,Mr=u;else{if(u===null)throw hi.alternate===null?Error(r(467)):Error(r(310));Mr=u,u={memoizedState:Mr.memoizedState,baseState:Mr.baseState,baseQueue:Mr.baseQueue,queue:Mr.queue,next:null},ds===null?hi.memoizedState=ds=u:ds=ds.next=u}return ds}function GA(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function OI(u){var p=PI;return PI+=1,i1===null&&(i1=[]),u=rQ(i1,u,p),p=hi,(ds===null?p.memoizedState:ds.next)===null&&(p=p.alternate,ne.H=p===null||p.memoizedState===null?ZQ:u4),u}function WA(u){if(u!==null&&typeof u=="object"){if(typeof u.then=="function")return OI(u);if(u.$$typeof===A)return va(u)}throw Error(r(438,String(u)))}function Kj(u){var p=null,y=hi.updateQueue;if(y!==null&&(p=y.memoCache),p==null){var _=hi.alternate;_!==null&&(_=_.updateQueue,_!==null&&(_=_.memoCache,_!=null&&(p={data:_.data.map(function(I){return I.slice()}),index:0})))}if(p==null&&(p={data:[],index:0}),y===null&&(y=GA(),hi.updateQueue=y),y.memoCache=p,y=p.data[p.index],y===void 0)for(y=p.data[p.index]=Array(u),_=0;_<u;_++)y[_]=Q;return p.index++,y}function df(u,p){return typeof p=="function"?p(u):p}function ZA(u){var p=Yn();return e4(p,Mr,u)}function e4(u,p,y){var _=u.queue;if(_===null)throw Error(r(311));_.lastRenderedReducer=y;var I=u.baseQueue,C=_.pending;if(C!==null){if(I!==null){var N=I.next;I.next=C.next,C.next=N}p.baseQueue=I=C,_.pending=null}if(C=u.baseState,I===null)u.memoizedState=C;else{p=I.next;var Z=N=null,ce=null,Ee=p,De=!1;do{var Be=Ee.lane&-536870913;if(Be!==Ee.lane?(Pi&Be)===Be:(uf&Be)===Be){var ke=Ee.revertLane;if(ke===0)ce!==null&&(ce=ce.next={lane:0,revertLane:0,gesture:null,action:Ee.action,hasEagerState:Ee.hasEagerState,eagerState:Ee.eagerState,next:null}),Be===J_&&(De=!0);else if((uf&ke)===ke){Ee=Ee.next,ke===J_&&(De=!0);continue}else Be={lane:0,revertLane:Ee.revertLane,gesture:null,action:Ee.action,hasEagerState:Ee.hasEagerState,eagerState:Ee.eagerState,next:null},ce===null?(Z=ce=Be,N=C):ce=ce.next=Be,hi.lanes|=ke,Fg|=ke;Be=Ee.action,bb&&y(C,Be),C=Ee.hasEagerState?Ee.eagerState:y(C,Be)}else ke={lane:Be,revertLane:Ee.revertLane,gesture:Ee.gesture,action:Ee.action,hasEagerState:Ee.hasEagerState,eagerState:Ee.eagerState,next:null},ce===null?(Z=ce=ke,N=C):ce=ce.next=ke,hi.lanes|=Be,Fg|=Be;Ee=Ee.next}while(Ee!==null&&Ee!==p);if(ce===null?N=C:ce.next=Z,!ee(C,u.memoizedState)&&(hs=!0,De&&(y=X_,y!==null)))throw y;u.memoizedState=C,u.baseState=N,u.baseQueue=ce,_.lastRenderedState=C}return I===null&&(_.lanes=0),[u.memoizedState,_.dispatch]}function t4(u){var p=Yn(),y=p.queue;if(y===null)throw Error(r(311));y.lastRenderedReducer=u;var _=y.dispatch,I=y.pending,C=p.memoizedState;if(I!==null){y.pending=null;var N=I=I.next;do C=u(C,N.action),N=N.next;while(N!==I);ee(C,p.memoizedState)||(hs=!0),p.memoizedState=C,p.baseQueue===null&&(p.baseState=C),y.lastRenderedState=C}return[C,_]}function fQ(u,p,y){var _=hi,I=Yn(),C=Ri;if(C){if(y===void 0)throw Error(r(407));y=y()}else y=p();var N=!ee((Mr||I).memoizedState,y);if(N&&(I.memoizedState=y,hs=!0),I=I.queue,n4(yQ.bind(null,_,I,u),[u]),I.getSnapshot!==p||N||ds!==null&&ds.memoizedState.tag&1){if(_.flags|=2048,r1(9,{destroy:void 0},gQ.bind(null,_,I,y,p),null),Fr===null)throw Error(r(349));C||(uf&127)!==0||mQ(_,p,y)}return y}function mQ(u,p,y){u.flags|=16384,u={getSnapshot:p,value:y},p=hi.updateQueue,p===null?(p=GA(),hi.updateQueue=p,p.stores=[u]):(y=p.stores,y===null?p.stores=[u]:y.push(u))}function gQ(u,p,y,_){p.value=y,p.getSnapshot=_,vQ(p)&&bQ(u)}function yQ(u,p,y){return y(function(){vQ(p)&&bQ(u)})}function vQ(u){var p=u.getSnapshot;u=u.value;try{var y=p();return!ee(u,y)}catch{return!0}}function bQ(u){var p=ub(u,2);p!==null&&tl(p,u,2)}function i4(u){var p=fo();if(typeof u=="function"){var y=u;if(u=y(),bb){po(!0);try{y()}finally{po(!1)}}}return p.memoizedState=p.baseState=u,p.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:df,lastRenderedState:u},p}function wQ(u,p,y,_){return u.baseState=y,e4(u,Mr,typeof _=="function"?_:df)}function RMe(u,p,y,_,I){if(XA(u))throw Error(r(485));if(u=p.action,u!==null){var C={payload:I,action:u,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(N){C.listeners.push(N)}};ne.T!==null?y(!0):C.isTransition=!1,_(C),y=p.pending,y===null?(C.next=p.pending=C,_Q(p,C)):(C.next=y.next,p.pending=y.next=C)}}function _Q(u,p){var y=p.action,_=p.payload,I=u.state;if(p.isTransition){var C=ne.T,N={};ne.T=N;try{var Z=y(I,_),ce=ne.S;ce!==null&&ce(N,Z),xQ(u,p,Z)}catch(Ee){r4(u,p,Ee)}finally{C!==null&&N.types!==null&&(C.types=N.types),ne.T=C}}else try{C=y(I,_),xQ(u,p,C)}catch(Ee){r4(u,p,Ee)}}function xQ(u,p,y){y!==null&&typeof y=="object"&&typeof y.then=="function"?y.then(function(_){$Q(u,p,_)},function(_){return r4(u,p,_)}):$Q(u,p,y)}function $Q(u,p,y){p.status="fulfilled",p.value=y,SQ(p),u.state=y,p=u.pending,p!==null&&(y=p.next,y===p?u.pending=null:(y=y.next,p.next=y,_Q(u,y)))}function r4(u,p,y){var _=u.pending;if(u.pending=null,_!==null){_=_.next;do p.status="rejected",p.reason=y,SQ(p),p=p.next;while(p!==_)}u.action=null}function SQ(u){u=u.listeners;for(var p=0;p<u.length;p++)(0,u[p])()}function TQ(u,p){return p}function IQ(u,p){if(Ri){var y=Fr.formState;if(y!==null){e:{var _=hi;if(Ri){if(Zr){t:{for(var I=Zr,C=zc;I.nodeType!==8;){if(!C){I=null;break t}if(I=Dc(I.nextSibling),I===null){I=null;break t}}C=I.data,I=C==="F!"||C==="F"?I:null}if(I){Zr=Dc(I.nextSibling),_=I.data==="F!";break e}}Ig(_)}_=!1}_&&(p=y[0])}}return y=fo(),y.memoizedState=y.baseState=p,_={pending:null,lanes:0,dispatch:null,lastRenderedReducer:TQ,lastRenderedState:p},y.queue=_,y=HQ.bind(null,hi,_),_.dispatch=y,_=i4(!1),C=c4.bind(null,hi,!1,_.queue),_=fo(),I={state:p,dispatch:null,action:u,pending:null},_.queue=I,y=RMe.bind(null,hi,I,C,y),I.dispatch=y,_.memoizedState=u,[p,y,!1]}function MQ(u){var p=Yn();return CQ(p,Mr,u)}function CQ(u,p,y){if(p=e4(u,p,TQ)[0],u=ZA(df)[0],typeof p=="object"&&p!==null&&typeof p.then=="function")try{var _=OI(p)}catch(N){throw N===Q_?NA:N}else _=p;p=Yn();var I=p.queue,C=I.dispatch;return y!==p.memoizedState&&(hi.flags|=2048,r1(9,{destroy:void 0},zMe.bind(null,I,y),null)),[_,C,u]}function zMe(u,p){u.action=p}function EQ(u){var p=Yn(),y=Mr;if(y!==null)return CQ(p,y,u);Yn(),p=p.memoizedState,y=Yn();var _=y.queue.dispatch;return y.memoizedState=u,[p,_,!1]}function r1(u,p,y,_){return u={tag:u,create:y,deps:_,inst:p,next:null},p=hi.updateQueue,p===null&&(p=GA(),hi.updateQueue=p),y=p.lastEffect,y===null?p.lastEffect=u.next=u:(_=y.next,y.next=u,u.next=_,p.lastEffect=u),u}function kQ(){return Yn().memoizedState}function YA(u,p,y,_){var I=fo();hi.flags|=u,I.memoizedState=r1(1|p,{destroy:void 0},y,_===void 0?null:_)}function JA(u,p,y,_){var I=Yn();_=_===void 0?null:_;var C=I.memoizedState.inst;Mr!==null&&_!==null&&Zj(_,Mr.memoizedState.deps)?I.memoizedState=r1(p,C,y,_):(hi.flags|=u,I.memoizedState=r1(1|p,C,y,_))}function AQ(u,p){YA(8390656,8,u,p)}function n4(u,p){JA(2048,8,u,p)}function NMe(u){hi.flags|=4;var p=hi.updateQueue;if(p===null)p=GA(),hi.updateQueue=p,p.events=[u];else{var y=p.events;y===null?p.events=[u]:y.push(u)}}function PQ(u){var p=Yn().memoizedState;return NMe({ref:p,nextImpl:u}),function(){if((ir&2)!==0)throw Error(r(440));return p.impl.apply(void 0,arguments)}}function OQ(u,p){return JA(4,2,u,p)}function LQ(u,p){return JA(4,4,u,p)}function FQ(u,p){if(typeof p=="function"){u=u();var y=p(u);return function(){typeof y=="function"?y():p(null)}}if(p!=null)return u=u(),p.current=u,function(){p.current=null}}function RQ(u,p,y){y=y!=null?y.concat([u]):null,JA(4,4,FQ.bind(null,p,u),y)}function s4(){}function zQ(u,p){var y=Yn();p=p===void 0?null:p;var _=y.memoizedState;return p!==null&&Zj(p,_[1])?_[0]:(y.memoizedState=[u,p],u)}function NQ(u,p){var y=Yn();p=p===void 0?null:p;var _=y.memoizedState;if(p!==null&&Zj(p,_[1]))return _[0];if(_=u(),bb){po(!0);try{u()}finally{po(!1)}}return y.memoizedState=[_,p],_}function a4(u,p,y){return y===void 0||(uf&1073741824)!==0&&(Pi&261930)===0?u.memoizedState=p:(u.memoizedState=y,u=DK(),hi.lanes|=u,Fg|=u,y)}function DQ(u,p,y,_){return ee(y,p)?y:e1.current!==null?(u=a4(u,y,_),ee(u,p)||(hs=!0),u):(uf&42)===0||(uf&1073741824)!==0&&(Pi&261930)===0?(hs=!0,u.memoizedState=y):(u=DK(),hi.lanes|=u,Fg|=u,p)}function jQ(u,p,y,_,I){var C=_e.p;_e.p=C!==0&&8>C?C:8;var N=ne.T,Z={};ne.T=Z,c4(u,!1,p,y);try{var ce=I(),Ee=ne.S;if(Ee!==null&&Ee(Z,ce),ce!==null&&typeof ce=="object"&&typeof ce.then=="function"){var De=OMe(ce,_);LI(u,p,De,Gl(u))}else LI(u,p,_,Gl(u))}catch(Be){LI(u,p,{then:function(){},status:"rejected",reason:Be},Gl())}finally{_e.p=C,N!==null&&Z.types!==null&&(N.types=Z.types),ne.T=N}}function DMe(){}function o4(u,p,y,_){if(u.tag!==5)throw Error(r(476));var I=VQ(u).queue;jQ(u,I,p,Oe,y===null?DMe:function(){return UQ(u),y(_)})}function VQ(u){var p=u.memoizedState;if(p!==null)return p;p={memoizedState:Oe,baseState:Oe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:df,lastRenderedState:Oe},next:null};var y={};return p.next={memoizedState:y,baseState:y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:df,lastRenderedState:y},next:null},u.memoizedState=p,u=u.alternate,u!==null&&(u.memoizedState=p),p}function UQ(u){var p=VQ(u);p.next===null&&(p=u.alternate.memoizedState),LI(u,p.next.queue,{},Gl())}function l4(){return va(XI)}function BQ(){return Yn().memoizedState}function qQ(){return Yn().memoizedState}function jMe(u){for(var p=u.return;p!==null;){switch(p.tag){case 24:case 3:var y=Gl();u=Eg(y);var _=kg(p,u,y);_!==null&&(tl(_,p,y),EI(_,p,y)),p={cache:zj()},u.payload=p;return}p=p.return}}function VMe(u,p,y){var _=Gl();y={lane:_,revertLane:0,gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null},XA(u)?GQ(p,y):(y=Ij(u,p,y,_),y!==null&&(tl(y,u,_),WQ(y,p,_)))}function HQ(u,p,y){var _=Gl();LI(u,p,y,_)}function LI(u,p,y,_){var I={lane:_,revertLane:0,gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null};if(XA(u))GQ(p,I);else{var C=u.alternate;if(u.lanes===0&&(C===null||C.lanes===0)&&(C=p.lastRenderedReducer,C!==null))try{var N=p.lastRenderedState,Z=C(N,y);if(I.hasEagerState=!0,I.eagerState=Z,ee(Z,N))return AA(u,p,I,0),Fr===null&&kA(),!1}catch{}finally{}if(y=Ij(u,p,I,_),y!==null)return tl(y,u,_),WQ(y,p,_),!0}return!1}function c4(u,p,y,_){if(_={lane:2,revertLane:V4(),gesture:null,action:_,hasEagerState:!1,eagerState:null,next:null},XA(u)){if(p)throw Error(r(479))}else p=Ij(u,y,_,2),p!==null&&tl(p,u,2)}function XA(u){var p=u.alternate;return u===hi||p!==null&&p===hi}function GQ(u,p){t1=qA=!0;var y=u.pending;y===null?p.next=p:(p.next=y.next,y.next=p),u.pending=p}function WQ(u,p,y){if((y&4194048)!==0){var _=p.lanes;_&=u.pendingLanes,y|=_,p.lanes=y,Xp(u,y)}}var FI={readContext:va,use:WA,useCallback:kn,useContext:kn,useEffect:kn,useImperativeHandle:kn,useLayoutEffect:kn,useInsertionEffect:kn,useMemo:kn,useReducer:kn,useRef:kn,useState:kn,useDebugValue:kn,useDeferredValue:kn,useTransition:kn,useSyncExternalStore:kn,useId:kn,useHostTransitionStatus:kn,useFormState:kn,useActionState:kn,useOptimistic:kn,useMemoCache:kn,useCacheRefresh:kn};FI.useEffectEvent=kn;var ZQ={readContext:va,use:WA,useCallback:function(u,p){return fo().memoizedState=[u,p===void 0?null:p],u},useContext:va,useEffect:AQ,useImperativeHandle:function(u,p,y){y=y!=null?y.concat([u]):null,YA(4194308,4,FQ.bind(null,p,u),y)},useLayoutEffect:function(u,p){return YA(4194308,4,u,p)},useInsertionEffect:function(u,p){YA(4,2,u,p)},useMemo:function(u,p){var y=fo();p=p===void 0?null:p;var _=u();if(bb){po(!0);try{u()}finally{po(!1)}}return y.memoizedState=[_,p],_},useReducer:function(u,p,y){var _=fo();if(y!==void 0){var I=y(p);if(bb){po(!0);try{y(p)}finally{po(!1)}}}else I=p;return _.memoizedState=_.baseState=I,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:I},_.queue=u,u=u.dispatch=VMe.bind(null,hi,u),[_.memoizedState,u]},useRef:function(u){var p=fo();return u={current:u},p.memoizedState=u},useState:function(u){u=i4(u);var p=u.queue,y=HQ.bind(null,hi,p);return p.dispatch=y,[u.memoizedState,y]},useDebugValue:s4,useDeferredValue:function(u,p){var y=fo();return a4(y,u,p)},useTransition:function(){var u=i4(!1);return u=jQ.bind(null,hi,u.queue,!0,!1),fo().memoizedState=u,[!1,u]},useSyncExternalStore:function(u,p,y){var _=hi,I=fo();if(Ri){if(y===void 0)throw Error(r(407));y=y()}else{if(y=p(),Fr===null)throw Error(r(349));(Pi&127)!==0||mQ(_,p,y)}I.memoizedState=y;var C={value:y,getSnapshot:p};return I.queue=C,AQ(yQ.bind(null,_,C,u),[u]),_.flags|=2048,r1(9,{destroy:void 0},gQ.bind(null,_,C,y,p),null),y},useId:function(){var u=fo(),p=Fr.identifierPrefix;if(Ri){var y=nh,_=rh;y=(_&~(1<<32-Ws(_)-1)).toString(32)+y,p="_"+p+"R_"+y,y=HA++,0<y&&(p+="H"+y.toString(32)),p+="_"}else y=LMe++,p="_"+p+"r_"+y.toString(32)+"_";return u.memoizedState=p},useHostTransitionStatus:l4,useFormState:IQ,useActionState:IQ,useOptimistic:function(u){var p=fo();p.memoizedState=p.baseState=u;var y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return p.queue=y,p=c4.bind(null,hi,!0,y),y.dispatch=p,[u,p]},useMemoCache:Kj,useCacheRefresh:function(){return fo().memoizedState=jMe.bind(null,hi)},useEffectEvent:function(u){var p=fo(),y={impl:u};return p.memoizedState=y,function(){if((ir&2)!==0)throw Error(r(440));return y.impl.apply(void 0,arguments)}}},u4={readContext:va,use:WA,useCallback:zQ,useContext:va,useEffect:n4,useImperativeHandle:RQ,useInsertionEffect:OQ,useLayoutEffect:LQ,useMemo:NQ,useReducer:ZA,useRef:kQ,useState:function(){return ZA(df)},useDebugValue:s4,useDeferredValue:function(u,p){var y=Yn();return DQ(y,Mr.memoizedState,u,p)},useTransition:function(){var u=ZA(df)[0],p=Yn().memoizedState;return[typeof u=="boolean"?u:OI(u),p]},useSyncExternalStore:fQ,useId:BQ,useHostTransitionStatus:l4,useFormState:MQ,useActionState:MQ,useOptimistic:function(u,p){var y=Yn();return wQ(y,Mr,u,p)},useMemoCache:Kj,useCacheRefresh:qQ};u4.useEffectEvent=PQ;var YQ={readContext:va,use:WA,useCallback:zQ,useContext:va,useEffect:n4,useImperativeHandle:RQ,useInsertionEffect:OQ,useLayoutEffect:LQ,useMemo:NQ,useReducer:t4,useRef:kQ,useState:function(){return t4(df)},useDebugValue:s4,useDeferredValue:function(u,p){var y=Yn();return Mr===null?a4(y,u,p):DQ(y,Mr.memoizedState,u,p)},useTransition:function(){var u=t4(df)[0],p=Yn().memoizedState;return[typeof u=="boolean"?u:OI(u),p]},useSyncExternalStore:fQ,useId:BQ,useHostTransitionStatus:l4,useFormState:EQ,useActionState:EQ,useOptimistic:function(u,p){var y=Yn();return Mr!==null?wQ(y,Mr,u,p):(y.baseState=u,[u,y.queue.dispatch])},useMemoCache:Kj,useCacheRefresh:qQ};YQ.useEffectEvent=PQ;function d4(u,p,y,_){p=u.memoizedState,y=y(_,p),y=y==null?p:m({},p,y),u.memoizedState=y,u.lanes===0&&(u.updateQueue.baseState=y)}var h4={enqueueSetState:function(u,p,y){u=u._reactInternals;var _=Gl(),I=Eg(_);I.payload=p,y!=null&&(I.callback=y),p=kg(u,I,_),p!==null&&(tl(p,u,_),EI(p,u,_))},enqueueReplaceState:function(u,p,y){u=u._reactInternals;var _=Gl(),I=Eg(_);I.tag=1,I.payload=p,y!=null&&(I.callback=y),p=kg(u,I,_),p!==null&&(tl(p,u,_),EI(p,u,_))},enqueueForceUpdate:function(u,p){u=u._reactInternals;var y=Gl(),_=Eg(y);_.tag=2,p!=null&&(_.callback=p),p=kg(u,_,y),p!==null&&(tl(p,u,y),EI(p,u,y))}};function JQ(u,p,y,_,I,C,N){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(_,C,N):p.prototype&&p.prototype.isPureReactComponent?!we(y,_)||!we(I,C):!0}function XQ(u,p,y,_){u=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(y,_),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(y,_),p.state!==u&&h4.enqueueReplaceState(p,p.state,null)}function wb(u,p){var y=p;if("ref"in p){y={};for(var _ in p)_!=="ref"&&(y[_]=p[_])}if(u=u.defaultProps){y===p&&(y=m({},y));for(var I in u)y[I]===void 0&&(y[I]=u[I])}return y}function QQ(u){EA(u)}function KQ(u){console.error(u)}function eK(u){EA(u)}function QA(u,p){try{var y=u.onUncaughtError;y(p.value,{componentStack:p.stack})}catch(_){setTimeout(function(){throw _})}}function tK(u,p,y){try{var _=u.onCaughtError;_(y.value,{componentStack:y.stack,errorBoundary:p.tag===1?p.stateNode:null})}catch(I){setTimeout(function(){throw I})}}function p4(u,p,y){return y=Eg(y),y.tag=3,y.payload={element:null},y.callback=function(){QA(u,p)},y}function iK(u){return u=Eg(u),u.tag=3,u}function rK(u,p,y,_){var I=y.type.getDerivedStateFromError;if(typeof I=="function"){var C=_.value;u.payload=function(){return I(C)},u.callback=function(){tK(p,y,_)}}var N=y.stateNode;N!==null&&typeof N.componentDidCatch=="function"&&(u.callback=function(){tK(p,y,_),typeof I!="function"&&(Rg===null?Rg=new Set([this]):Rg.add(this));var Z=_.stack;this.componentDidCatch(_.value,{componentStack:Z!==null?Z:""})})}function UMe(u,p,y,_,I){if(y.flags|=32768,_!==null&&typeof _=="object"&&typeof _.then=="function"){if(p=y.alternate,p!==null&&Y_(p,y,I,!0),y=Ul.current,y!==null){switch(y.tag){case 31:case 13:return Nc===null?uP():y.alternate===null&&An===0&&(An=3),y.flags&=-257,y.flags|=65536,y.lanes=I,_===DA?y.flags|=16384:(p=y.updateQueue,p===null?y.updateQueue=new Set([_]):p.add(_),N4(u,_,I)),!1;case 22:return y.flags|=65536,_===DA?y.flags|=16384:(p=y.updateQueue,p===null?(p={transitions:null,markerInstances:null,retryQueue:new Set([_])},y.updateQueue=p):(y=p.retryQueue,y===null?p.retryQueue=new Set([_]):y.add(_)),N4(u,_,I)),!1}throw Error(r(435,y.tag))}return N4(u,_,I),uP(),!1}if(Ri)return p=Ul.current,p!==null?((p.flags&65536)===0&&(p.flags|=256),p.flags|=65536,p.lanes=I,_!==Pj&&(u=Error(r(422),{cause:_}),SI(Lc(u,y)))):(_!==Pj&&(p=Error(r(423),{cause:_}),SI(Lc(p,y))),u=u.current.alternate,u.flags|=65536,I&=-I,u.lanes|=I,_=Lc(_,y),I=p4(u.stateNode,_,I),Bj(u,I),An!==4&&(An=2)),!1;var C=Error(r(520),{cause:_});if(C=Lc(C,y),BI===null?BI=[C]:BI.push(C),An!==4&&(An=2),p===null)return!0;_=Lc(_,y),y=p;do{switch(y.tag){case 3:return y.flags|=65536,u=I&-I,y.lanes|=u,u=p4(y.stateNode,_,u),Bj(y,u),!1;case 1:if(p=y.type,C=y.stateNode,(y.flags&128)===0&&(typeof p.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Rg===null||!Rg.has(C))))return y.flags|=65536,I&=-I,y.lanes|=I,I=iK(I),rK(I,u,y,_),Bj(y,I),!1}y=y.return}while(y!==null);return!1}var f4=Error(r(461)),hs=!1;function ba(u,p,y,_){p.child=u===null?oQ(p,null,y,_):vb(p,u.child,y,_)}function nK(u,p,y,_,I){y=y.render;var C=p.ref;if("ref"in _){var N={};for(var Z in _)Z!=="ref"&&(N[Z]=_[Z])}else N=_;return fb(p),_=Yj(u,p,y,N,C,I),Z=Jj(),u!==null&&!hs?(Xj(u,p,I),hf(u,p,I)):(Ri&&Z&&kj(p),p.flags|=1,ba(u,p,_,I),p.child)}function sK(u,p,y,_,I){if(u===null){var C=y.type;return typeof C=="function"&&!Mj(C)&&C.defaultProps===void 0&&y.compare===null?(p.tag=15,p.type=C,aK(u,p,C,_,I)):(u=OA(y.type,null,_,p,p.mode,I),u.ref=p.ref,u.return=p,p.child=u)}if(C=u.child,!x4(u,I)){var N=C.memoizedProps;if(y=y.compare,y=y!==null?y:we,y(N,_)&&u.ref===p.ref)return hf(u,p,I)}return p.flags|=1,u=af(C,_),u.ref=p.ref,u.return=p,p.child=u}function aK(u,p,y,_,I){if(u!==null){var C=u.memoizedProps;if(we(C,_)&&u.ref===p.ref)if(hs=!1,p.pendingProps=_=C,x4(u,I))(u.flags&131072)!==0&&(hs=!0);else return p.lanes=u.lanes,hf(u,p,I)}return m4(u,p,y,_,I)}function oK(u,p,y,_){var I=_.children,C=u!==null?u.memoizedState:null;if(u===null&&p.stateNode===null&&(p.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),_.mode==="hidden"){if((p.flags&128)!==0){if(C=C!==null?C.baseLanes|y:y,u!==null){for(_=p.child=u.child,I=0;_!==null;)I=I|_.lanes|_.childLanes,_=_.sibling;_=I&~C}else _=0,p.child=null;return lK(u,p,C,y,_)}if((y&536870912)!==0)p.memoizedState={baseLanes:0,cachePool:null},u!==null&&zA(p,C!==null?C.cachePool:null),C!==null?uQ(p,C):Hj(),dQ(p);else return _=p.lanes=536870912,lK(u,p,C!==null?C.baseLanes|y:y,y,_)}else C!==null?(zA(p,C.cachePool),uQ(p,C),Pg(),p.memoizedState=null):(u!==null&&zA(p,null),Hj(),Pg());return ba(u,p,I,y),p.child}function RI(u,p){return u!==null&&u.tag===22||p.stateNode!==null||(p.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),p.sibling}function lK(u,p,y,_,I){var C=Dj();return C=C===null?null:{parent:us._currentValue,pool:C},p.memoizedState={baseLanes:y,cachePool:C},u!==null&&zA(p,null),Hj(),dQ(p),u!==null&&Y_(u,p,_,!0),p.childLanes=I,null}function KA(u,p){return p=tP({mode:p.mode,children:p.children},u.mode),p.ref=u.ref,u.child=p,p.return=u,p}function cK(u,p,y){return vb(p,u.child,null,y),u=KA(p,p.pendingProps),u.flags|=2,Bl(p),p.memoizedState=null,u}function BMe(u,p,y){var _=p.pendingProps,I=(p.flags&128)!==0;if(p.flags&=-129,u===null){if(Ri){if(_.mode==="hidden")return u=KA(p,_),p.lanes=536870912,RI(null,u);if(Wj(p),(u=Zr)?(u=_ee(u,zc),u=u!==null&&u.data==="&"?u:null,u!==null&&(p.memoizedState={dehydrated:u,treeContext:Sg!==null?{id:rh,overflow:nh}:null,retryLane:536870912,hydrationErrors:null},y=GX(u),y.return=p,p.child=y,ya=p,Zr=null)):u=null,u===null)throw Ig(p);return p.lanes=536870912,null}return KA(p,_)}var C=u.memoizedState;if(C!==null){var N=C.dehydrated;if(Wj(p),I)if(p.flags&256)p.flags&=-257,p=cK(u,p,y);else if(p.memoizedState!==null)p.child=u.child,p.flags|=128,p=null;else throw Error(r(558));else if(hs||Y_(u,p,y,!1),I=(y&u.childLanes)!==0,hs||I){if(_=Fr,_!==null&&(N=wt(_,y),N!==0&&N!==C.retryLane))throw C.retryLane=N,ub(u,N),tl(_,u,N),f4;uP(),p=cK(u,p,y)}else u=C.treeContext,Zr=Dc(N.nextSibling),ya=p,Ri=!0,Tg=null,zc=!1,u!==null&&YX(p,u),p=KA(p,_),p.flags|=4096;return p}return u=af(u.child,{mode:_.mode,children:_.children}),u.ref=p.ref,p.child=u,u.return=p,u}function eP(u,p){var y=p.ref;if(y===null)u!==null&&u.ref!==null&&(p.flags|=4194816);else{if(typeof y!="function"&&typeof y!="object")throw Error(r(284));(u===null||u.ref!==y)&&(p.flags|=4194816)}}function m4(u,p,y,_,I){return fb(p),y=Yj(u,p,y,_,void 0,I),_=Jj(),u!==null&&!hs?(Xj(u,p,I),hf(u,p,I)):(Ri&&_&&kj(p),p.flags|=1,ba(u,p,y,I),p.child)}function uK(u,p,y,_,I,C){return fb(p),p.updateQueue=null,y=pQ(p,_,y,I),hQ(u),_=Jj(),u!==null&&!hs?(Xj(u,p,C),hf(u,p,C)):(Ri&&_&&kj(p),p.flags|=1,ba(u,p,y,C),p.child)}function dK(u,p,y,_,I){if(fb(p),p.stateNode===null){var C=H_,N=y.contextType;typeof N=="object"&&N!==null&&(C=va(N)),C=new y(_,C),p.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,C.updater=h4,p.stateNode=C,C._reactInternals=p,C=p.stateNode,C.props=_,C.state=p.memoizedState,C.refs={},Vj(p),N=y.contextType,C.context=typeof N=="object"&&N!==null?va(N):H_,C.state=p.memoizedState,N=y.getDerivedStateFromProps,typeof N=="function"&&(d4(p,y,N,_),C.state=p.memoizedState),typeof y.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(N=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),N!==C.state&&h4.enqueueReplaceState(C,C.state,null),AI(p,_,C,I),kI(),C.state=p.memoizedState),typeof C.componentDidMount=="function"&&(p.flags|=4194308),_=!0}else if(u===null){C=p.stateNode;var Z=p.memoizedProps,ce=wb(y,Z);C.props=ce;var Ee=C.context,De=y.contextType;N=H_,typeof De=="object"&&De!==null&&(N=va(De));var Be=y.getDerivedStateFromProps;De=typeof Be=="function"||typeof C.getSnapshotBeforeUpdate=="function",Z=p.pendingProps!==Z,De||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(Z||Ee!==N)&&XQ(p,C,_,N),Cg=!1;var ke=p.memoizedState;C.state=ke,AI(p,_,C,I),kI(),Ee=p.memoizedState,Z||ke!==Ee||Cg?(typeof Be=="function"&&(d4(p,y,Be,_),Ee=p.memoizedState),(ce=Cg||JQ(p,y,ce,_,ke,Ee,N))?(De||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(p.flags|=4194308)):(typeof C.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=_,p.memoizedState=Ee),C.props=_,C.state=Ee,C.context=N,_=ce):(typeof C.componentDidMount=="function"&&(p.flags|=4194308),_=!1)}else{C=p.stateNode,Uj(u,p),N=p.memoizedProps,De=wb(y,N),C.props=De,Be=p.pendingProps,ke=C.context,Ee=y.contextType,ce=H_,typeof Ee=="object"&&Ee!==null&&(ce=va(Ee)),Z=y.getDerivedStateFromProps,(Ee=typeof Z=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(N!==Be||ke!==ce)&&XQ(p,C,_,ce),Cg=!1,ke=p.memoizedState,C.state=ke,AI(p,_,C,I),kI();var Le=p.memoizedState;N!==Be||ke!==Le||Cg||u!==null&&u.dependencies!==null&&FA(u.dependencies)?(typeof Z=="function"&&(d4(p,y,Z,_),Le=p.memoizedState),(De=Cg||JQ(p,y,De,_,ke,Le,ce)||u!==null&&u.dependencies!==null&&FA(u.dependencies))?(Ee||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(_,Le,ce),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(_,Le,ce)),typeof C.componentDidUpdate=="function"&&(p.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof C.componentDidUpdate!="function"||N===u.memoizedProps&&ke===u.memoizedState||(p.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||N===u.memoizedProps&&ke===u.memoizedState||(p.flags|=1024),p.memoizedProps=_,p.memoizedState=Le),C.props=_,C.state=Le,C.context=ce,_=De):(typeof C.componentDidUpdate!="function"||N===u.memoizedProps&&ke===u.memoizedState||(p.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||N===u.memoizedProps&&ke===u.memoizedState||(p.flags|=1024),_=!1)}return C=_,eP(u,p),_=(p.flags&128)!==0,C||_?(C=p.stateNode,y=_&&typeof y.getDerivedStateFromError!="function"?null:C.render(),p.flags|=1,u!==null&&_?(p.child=vb(p,u.child,null,I),p.child=vb(p,null,y,I)):ba(u,p,y,I),p.memoizedState=C.state,u=p.child):u=hf(u,p,I),u}function hK(u,p,y,_){return hb(),p.flags|=256,ba(u,p,y,_),p.child}var g4={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function y4(u){return{baseLanes:u,cachePool:tQ()}}function v4(u,p,y){return u=u!==null?u.childLanes&~y:0,p&&(u|=Hl),u}function pK(u,p,y){var _=p.pendingProps,I=!1,C=(p.flags&128)!==0,N;if((N=C)||(N=u!==null&&u.memoizedState===null?!1:(Zn.current&2)!==0),N&&(I=!0,p.flags&=-129),N=(p.flags&32)!==0,p.flags&=-33,u===null){if(Ri){if(I?Ag(p):Pg(),(u=Zr)?(u=_ee(u,zc),u=u!==null&&u.data!=="&"?u:null,u!==null&&(p.memoizedState={dehydrated:u,treeContext:Sg!==null?{id:rh,overflow:nh}:null,retryLane:536870912,hydrationErrors:null},y=GX(u),y.return=p,p.child=y,ya=p,Zr=null)):u=null,u===null)throw Ig(p);return eV(u)?p.lanes=32:p.lanes=536870912,null}var Z=_.children;return _=_.fallback,I?(Pg(),I=p.mode,Z=tP({mode:"hidden",children:Z},I),_=db(_,I,y,null),Z.return=p,_.return=p,Z.sibling=_,p.child=Z,_=p.child,_.memoizedState=y4(y),_.childLanes=v4(u,N,y),p.memoizedState=g4,RI(null,_)):(Ag(p),b4(p,Z))}var ce=u.memoizedState;if(ce!==null&&(Z=ce.dehydrated,Z!==null)){if(C)p.flags&256?(Ag(p),p.flags&=-257,p=w4(u,p,y)):p.memoizedState!==null?(Pg(),p.child=u.child,p.flags|=128,p=null):(Pg(),Z=_.fallback,I=p.mode,_=tP({mode:"visible",children:_.children},I),Z=db(Z,I,y,null),Z.flags|=2,_.return=p,Z.return=p,_.sibling=Z,p.child=_,vb(p,u.child,null,y),_=p.child,_.memoizedState=y4(y),_.childLanes=v4(u,N,y),p.memoizedState=g4,p=RI(null,_));else if(Ag(p),eV(Z)){if(N=Z.nextSibling&&Z.nextSibling.dataset,N)var Ee=N.dgst;N=Ee,_=Error(r(419)),_.stack="",_.digest=N,SI({value:_,source:null,stack:null}),p=w4(u,p,y)}else if(hs||Y_(u,p,y,!1),N=(y&u.childLanes)!==0,hs||N){if(N=Fr,N!==null&&(_=wt(N,y),_!==0&&_!==ce.retryLane))throw ce.retryLane=_,ub(u,_),tl(N,u,_),f4;K4(Z)||uP(),p=w4(u,p,y)}else K4(Z)?(p.flags|=192,p.child=u.child,p=null):(u=ce.treeContext,Zr=Dc(Z.nextSibling),ya=p,Ri=!0,Tg=null,zc=!1,u!==null&&YX(p,u),p=b4(p,_.children),p.flags|=4096);return p}return I?(Pg(),Z=_.fallback,I=p.mode,ce=u.child,Ee=ce.sibling,_=af(ce,{mode:"hidden",children:_.children}),_.subtreeFlags=ce.subtreeFlags&65011712,Ee!==null?Z=af(Ee,Z):(Z=db(Z,I,y,null),Z.flags|=2),Z.return=p,_.return=p,_.sibling=Z,p.child=_,RI(null,_),_=p.child,Z=u.child.memoizedState,Z===null?Z=y4(y):(I=Z.cachePool,I!==null?(ce=us._currentValue,I=I.parent!==ce?{parent:ce,pool:ce}:I):I=tQ(),Z={baseLanes:Z.baseLanes|y,cachePool:I}),_.memoizedState=Z,_.childLanes=v4(u,N,y),p.memoizedState=g4,RI(u.child,_)):(Ag(p),y=u.child,u=y.sibling,y=af(y,{mode:"visible",children:_.children}),y.return=p,y.sibling=null,u!==null&&(N=p.deletions,N===null?(p.deletions=[u],p.flags|=16):N.push(u)),p.child=y,p.memoizedState=null,y)}function b4(u,p){return p=tP({mode:"visible",children:p},u.mode),p.return=u,u.child=p}function tP(u,p){return u=Vl(22,u,null,p),u.lanes=0,u}function w4(u,p,y){return vb(p,u.child,null,y),u=b4(p,p.pendingProps.children),u.flags|=2,p.memoizedState=null,u}function fK(u,p,y){u.lanes|=p;var _=u.alternate;_!==null&&(_.lanes|=p),Fj(u.return,p,y)}function _4(u,p,y,_,I,C){var N=u.memoizedState;N===null?u.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:_,tail:y,tailMode:I,treeForkCount:C}:(N.isBackwards=p,N.rendering=null,N.renderingStartTime=0,N.last=_,N.tail=y,N.tailMode=I,N.treeForkCount=C)}function mK(u,p,y){var _=p.pendingProps,I=_.revealOrder,C=_.tail;_=_.children;var N=Zn.current,Z=(N&2)!==0;if(Z?(N=N&1|2,p.flags|=128):N&=1,Ke(Zn,N),ba(u,p,_,y),_=Ri?$I:0,!Z&&u!==null&&(u.flags&128)!==0)e:for(u=p.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&fK(u,y,p);else if(u.tag===19)fK(u,y,p);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===p)break e;for(;u.sibling===null;){if(u.return===null||u.return===p)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}switch(I){case"forwards":for(y=p.child,I=null;y!==null;)u=y.alternate,u!==null&&BA(u)===null&&(I=y),y=y.sibling;y=I,y===null?(I=p.child,p.child=null):(I=y.sibling,y.sibling=null),_4(p,!1,I,y,C,_);break;case"backwards":case"unstable_legacy-backwards":for(y=null,I=p.child,p.child=null;I!==null;){if(u=I.alternate,u!==null&&BA(u)===null){p.child=I;break}u=I.sibling,I.sibling=y,y=I,I=u}_4(p,!0,y,null,C,_);break;case"together":_4(p,!1,null,null,void 0,_);break;default:p.memoizedState=null}return p.child}function hf(u,p,y){if(u!==null&&(p.dependencies=u.dependencies),Fg|=p.lanes,(y&p.childLanes)===0)if(u!==null){if(Y_(u,p,y,!1),(y&p.childLanes)===0)return null}else return null;if(u!==null&&p.child!==u.child)throw Error(r(153));if(p.child!==null){for(u=p.child,y=af(u,u.pendingProps),p.child=y,y.return=p;u.sibling!==null;)u=u.sibling,y=y.sibling=af(u,u.pendingProps),y.return=p;y.sibling=null}return p.child}function x4(u,p){return(u.lanes&p)!==0?!0:(u=u.dependencies,!!(u!==null&&FA(u)))}function qMe(u,p,y){switch(p.tag){case 3:Tr(p,p.stateNode.containerInfo),Mg(p,us,u.memoizedState.cache),hb();break;case 27:case 5:Wo(p);break;case 4:Tr(p,p.stateNode.containerInfo);break;case 10:Mg(p,p.type,p.memoizedProps.value);break;case 31:if(p.memoizedState!==null)return p.flags|=128,Wj(p),null;break;case 13:var _=p.memoizedState;if(_!==null)return _.dehydrated!==null?(Ag(p),p.flags|=128,null):(y&p.child.childLanes)!==0?pK(u,p,y):(Ag(p),u=hf(u,p,y),u!==null?u.sibling:null);Ag(p);break;case 19:var I=(u.flags&128)!==0;if(_=(y&p.childLanes)!==0,_||(Y_(u,p,y,!1),_=(y&p.childLanes)!==0),I){if(_)return mK(u,p,y);p.flags|=128}if(I=p.memoizedState,I!==null&&(I.rendering=null,I.tail=null,I.lastEffect=null),Ke(Zn,Zn.current),_)break;return null;case 22:return p.lanes=0,oK(u,p,y,p.pendingProps);case 24:Mg(p,us,u.memoizedState.cache)}return hf(u,p,y)}function gK(u,p,y){if(u!==null)if(u.memoizedProps!==p.pendingProps)hs=!0;else{if(!x4(u,y)&&(p.flags&128)===0)return hs=!1,qMe(u,p,y);hs=(u.flags&131072)!==0}else hs=!1,Ri&&(p.flags&1048576)!==0&&ZX(p,$I,p.index);switch(p.lanes=0,p.tag){case 16:e:{var _=p.pendingProps;if(u=gb(p.elementType),p.type=u,typeof u=="function")Mj(u)?(_=wb(u,_),p.tag=1,p=dK(null,p,u,_,y)):(p.tag=0,p=m4(null,p,u,_,y));else{if(u!=null){var I=u.$$typeof;if(I===L){p.tag=11,p=nK(null,p,u,_,y);break e}else if(I===B){p.tag=14,p=sK(null,p,u,_,y);break e}}throw p=se(u)||u,Error(r(306,p,""))}}return p;case 0:return m4(u,p,p.type,p.pendingProps,y);case 1:return _=p.type,I=wb(_,p.pendingProps),dK(u,p,_,I,y);case 3:e:{if(Tr(p,p.stateNode.containerInfo),u===null)throw Error(r(387));_=p.pendingProps;var C=p.memoizedState;I=C.element,Uj(u,p),AI(p,_,null,y);var N=p.memoizedState;if(_=N.cache,Mg(p,us,_),_!==C.cache&&Rj(p,[us],y,!0),kI(),_=N.element,C.isDehydrated)if(C={element:_,isDehydrated:!1,cache:N.cache},p.updateQueue.baseState=C,p.memoizedState=C,p.flags&256){p=hK(u,p,_,y);break e}else if(_!==I){I=Lc(Error(r(424)),p),SI(I),p=hK(u,p,_,y);break e}else{switch(u=p.stateNode.containerInfo,u.nodeType){case 9:u=u.body;break;default:u=u.nodeName==="HTML"?u.ownerDocument.body:u}for(Zr=Dc(u.firstChild),ya=p,Ri=!0,Tg=null,zc=!0,y=oQ(p,null,_,y),p.child=y;y;)y.flags=y.flags&-3|4096,y=y.sibling}else{if(hb(),_===I){p=hf(u,p,y);break e}ba(u,p,_,y)}p=p.child}return p;case 26:return eP(u,p),u===null?(y=Mee(p.type,null,p.pendingProps,null))?p.memoizedState=y:Ri||(y=p.type,u=p.pendingProps,_=yP(Wt.current).createElement(y),_[vr]=p,_[jr]=u,wa(_,y,u),hn(_),p.stateNode=_):p.memoizedState=Mee(p.type,u.memoizedProps,p.pendingProps,u.memoizedState),null;case 27:return Wo(p),u===null&&Ri&&(_=p.stateNode=See(p.type,p.pendingProps,Wt.current),ya=p,zc=!0,I=Zr,jg(p.type)?(tV=I,Zr=Dc(_.firstChild)):Zr=I),ba(u,p,p.pendingProps.children,y),eP(u,p),u===null&&(p.flags|=4194304),p.child;case 5:return u===null&&Ri&&((I=_=Zr)&&(_=wCe(_,p.type,p.pendingProps,zc),_!==null?(p.stateNode=_,ya=p,Zr=Dc(_.firstChild),zc=!1,I=!0):I=!1),I||Ig(p)),Wo(p),I=p.type,C=p.pendingProps,N=u!==null?u.memoizedProps:null,_=C.children,J4(I,C)?_=null:N!==null&&J4(I,N)&&(p.flags|=32),p.memoizedState!==null&&(I=Yj(u,p,FMe,null,null,y),XI._currentValue=I),eP(u,p),ba(u,p,_,y),p.child;case 6:return u===null&&Ri&&((u=y=Zr)&&(y=_Ce(y,p.pendingProps,zc),y!==null?(p.stateNode=y,ya=p,Zr=null,u=!0):u=!1),u||Ig(p)),null;case 13:return pK(u,p,y);case 4:return Tr(p,p.stateNode.containerInfo),_=p.pendingProps,u===null?p.child=vb(p,null,_,y):ba(u,p,_,y),p.child;case 11:return nK(u,p,p.type,p.pendingProps,y);case 7:return ba(u,p,p.pendingProps,y),p.child;case 8:return ba(u,p,p.pendingProps.children,y),p.child;case 12:return ba(u,p,p.pendingProps.children,y),p.child;case 10:return _=p.pendingProps,Mg(p,p.type,_.value),ba(u,p,_.children,y),p.child;case 9:return I=p.type._context,_=p.pendingProps.children,fb(p),I=va(I),_=_(I),p.flags|=1,ba(u,p,_,y),p.child;case 14:return sK(u,p,p.type,p.pendingProps,y);case 15:return aK(u,p,p.type,p.pendingProps,y);case 19:return mK(u,p,y);case 31:return BMe(u,p,y);case 22:return oK(u,p,y,p.pendingProps);case 24:return fb(p),_=va(us),u===null?(I=Dj(),I===null&&(I=Fr,C=zj(),I.pooledCache=C,C.refCount++,C!==null&&(I.pooledCacheLanes|=y),I=C),p.memoizedState={parent:_,cache:I},Vj(p),Mg(p,us,I)):((u.lanes&y)!==0&&(Uj(u,p),AI(p,null,null,y),kI()),I=u.memoizedState,C=p.memoizedState,I.parent!==_?(I={parent:_,cache:_},p.memoizedState=I,p.lanes===0&&(p.memoizedState=p.updateQueue.baseState=I),Mg(p,us,_)):(_=C.cache,Mg(p,us,_),_!==I.cache&&Rj(p,[us],y,!0))),ba(u,p,p.pendingProps.children,y),p.child;case 29:throw p.pendingProps}throw Error(r(156,p.tag))}function pf(u){u.flags|=4}function $4(u,p,y,_,I){if((p=(u.mode&32)!==0)&&(p=!1),p){if(u.flags|=16777216,(I&335544128)===I)if(u.stateNode.complete)u.flags|=8192;else if(BK())u.flags|=8192;else throw yb=DA,jj}else u.flags&=-16777217}function yK(u,p){if(p.type!=="stylesheet"||(p.state.loading&4)!==0)u.flags&=-16777217;else if(u.flags|=16777216,!Pee(p))if(BK())u.flags|=8192;else throw yb=DA,jj}function iP(u,p){p!==null&&(u.flags|=4),u.flags&16384&&(p=u.tag!==22?Ae():536870912,u.lanes|=p,o1|=p)}function zI(u,p){if(!Ri)switch(u.tailMode){case"hidden":p=u.tail;for(var y=null;p!==null;)p.alternate!==null&&(y=p),p=p.sibling;y===null?u.tail=null:y.sibling=null;break;case"collapsed":y=u.tail;for(var _=null;y!==null;)y.alternate!==null&&(_=y),y=y.sibling;_===null?p||u.tail===null?u.tail=null:u.tail.sibling=null:_.sibling=null}}function Yr(u){var p=u.alternate!==null&&u.alternate.child===u.child,y=0,_=0;if(p)for(var I=u.child;I!==null;)y|=I.lanes|I.childLanes,_|=I.subtreeFlags&65011712,_|=I.flags&65011712,I.return=u,I=I.sibling;else for(I=u.child;I!==null;)y|=I.lanes|I.childLanes,_|=I.subtreeFlags,_|=I.flags,I.return=u,I=I.sibling;return u.subtreeFlags|=_,u.childLanes=y,p}function HMe(u,p,y){var _=p.pendingProps;switch(Aj(p),p.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yr(p),null;case 1:return Yr(p),null;case 3:return y=p.stateNode,_=null,u!==null&&(_=u.memoizedState.cache),p.memoizedState.cache!==_&&(p.flags|=2048),cf(us),it(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(u===null||u.child===null)&&(Z_(p)?pf(p):u===null||u.memoizedState.isDehydrated&&(p.flags&256)===0||(p.flags|=1024,Oj())),Yr(p),null;case 26:var I=p.type,C=p.memoizedState;return u===null?(pf(p),C!==null?(Yr(p),yK(p,C)):(Yr(p),$4(p,I,null,_,y))):C?C!==u.memoizedState?(pf(p),Yr(p),yK(p,C)):(Yr(p),p.flags&=-16777217):(u=u.memoizedProps,u!==_&&pf(p),Yr(p),$4(p,I,u,_,y)),null;case 27:if(ks(p),y=Wt.current,I=p.type,u!==null&&p.stateNode!=null)u.memoizedProps!==_&&pf(p);else{if(!_){if(p.stateNode===null)throw Error(r(166));return Yr(p),null}u=at.current,Z_(p)?JX(p):(u=See(I,_,y),p.stateNode=u,pf(p))}return Yr(p),null;case 5:if(ks(p),I=p.type,u!==null&&p.stateNode!=null)u.memoizedProps!==_&&pf(p);else{if(!_){if(p.stateNode===null)throw Error(r(166));return Yr(p),null}if(C=at.current,Z_(p))JX(p);else{var N=yP(Wt.current);switch(C){case 1:C=N.createElementNS("http://www.w3.org/2000/svg",I);break;case 2:C=N.createElementNS("http://www.w3.org/1998/Math/MathML",I);break;default:switch(I){case"svg":C=N.createElementNS("http://www.w3.org/2000/svg",I);break;case"math":C=N.createElementNS("http://www.w3.org/1998/Math/MathML",I);break;case"script":C=N.createElement("div"),C.innerHTML="<script><\/script>",C=C.removeChild(C.firstChild);break;case"select":C=typeof _.is=="string"?N.createElement("select",{is:_.is}):N.createElement("select"),_.multiple?C.multiple=!0:_.size&&(C.size=_.size);break;default:C=typeof _.is=="string"?N.createElement(I,{is:_.is}):N.createElement(I)}}C[vr]=p,C[jr]=_;e:for(N=p.child;N!==null;){if(N.tag===5||N.tag===6)C.appendChild(N.stateNode);else if(N.tag!==4&&N.tag!==27&&N.child!==null){N.child.return=N,N=N.child;continue}if(N===p)break e;for(;N.sibling===null;){if(N.return===null||N.return===p)break e;N=N.return}N.sibling.return=N.return,N=N.sibling}p.stateNode=C;e:switch(wa(C,I,_),I){case"button":case"input":case"select":case"textarea":_=!!_.autoFocus;break e;case"img":_=!0;break e;default:_=!1}_&&pf(p)}}return Yr(p),$4(p,p.type,u===null?null:u.memoizedProps,p.pendingProps,y),null;case 6:if(u&&p.stateNode!=null)u.memoizedProps!==_&&pf(p);else{if(typeof _!="string"&&p.stateNode===null)throw Error(r(166));if(u=Wt.current,Z_(p)){if(u=p.stateNode,y=p.memoizedProps,_=null,I=ya,I!==null)switch(I.tag){case 27:case 5:_=I.memoizedProps}u[vr]=p,u=!!(u.nodeValue===y||_!==null&&_.suppressHydrationWarning===!0||pee(u.nodeValue,y)),u||Ig(p,!0)}else u=yP(u).createTextNode(_),u[vr]=p,p.stateNode=u}return Yr(p),null;case 31:if(y=p.memoizedState,u===null||u.memoizedState!==null){if(_=Z_(p),y!==null){if(u===null){if(!_)throw Error(r(318));if(u=p.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(r(557));u[vr]=p}else hb(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;Yr(p),u=!1}else y=Oj(),u!==null&&u.memoizedState!==null&&(u.memoizedState.hydrationErrors=y),u=!0;if(!u)return p.flags&256?(Bl(p),p):(Bl(p),null);if((p.flags&128)!==0)throw Error(r(558))}return Yr(p),null;case 13:if(_=p.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(I=Z_(p),_!==null&&_.dehydrated!==null){if(u===null){if(!I)throw Error(r(318));if(I=p.memoizedState,I=I!==null?I.dehydrated:null,!I)throw Error(r(317));I[vr]=p}else hb(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;Yr(p),I=!1}else I=Oj(),u!==null&&u.memoizedState!==null&&(u.memoizedState.hydrationErrors=I),I=!0;if(!I)return p.flags&256?(Bl(p),p):(Bl(p),null)}return Bl(p),(p.flags&128)!==0?(p.lanes=y,p):(y=_!==null,u=u!==null&&u.memoizedState!==null,y&&(_=p.child,I=null,_.alternate!==null&&_.alternate.memoizedState!==null&&_.alternate.memoizedState.cachePool!==null&&(I=_.alternate.memoizedState.cachePool.pool),C=null,_.memoizedState!==null&&_.memoizedState.cachePool!==null&&(C=_.memoizedState.cachePool.pool),C!==I&&(_.flags|=2048)),y!==u&&y&&(p.child.flags|=8192),iP(p,p.updateQueue),Yr(p),null);case 4:return it(),u===null&&H4(p.stateNode.containerInfo),Yr(p),null;case 10:return cf(p.type),Yr(p),null;case 19:if(ze(Zn),_=p.memoizedState,_===null)return Yr(p),null;if(I=(p.flags&128)!==0,C=_.rendering,C===null)if(I)zI(_,!1);else{if(An!==0||u!==null&&(u.flags&128)!==0)for(u=p.child;u!==null;){if(C=BA(u),C!==null){for(p.flags|=128,zI(_,!1),u=C.updateQueue,p.updateQueue=u,iP(p,u),p.subtreeFlags=0,u=y,y=p.child;y!==null;)HX(y,u),y=y.sibling;return Ke(Zn,Zn.current&1|2),Ri&&of(p,_.treeForkCount),p.child}u=u.sibling}_.tail!==null&&cs()>oP&&(p.flags|=128,I=!0,zI(_,!1),p.lanes=4194304)}else{if(!I)if(u=BA(C),u!==null){if(p.flags|=128,I=!0,u=u.updateQueue,p.updateQueue=u,iP(p,u),zI(_,!0),_.tail===null&&_.tailMode==="hidden"&&!C.alternate&&!Ri)return Yr(p),null}else 2*cs()-_.renderingStartTime>oP&&y!==536870912&&(p.flags|=128,I=!0,zI(_,!1),p.lanes=4194304);_.isBackwards?(C.sibling=p.child,p.child=C):(u=_.last,u!==null?u.sibling=C:p.child=C,_.last=C)}return _.tail!==null?(u=_.tail,_.rendering=u,_.tail=u.sibling,_.renderingStartTime=cs(),u.sibling=null,y=Zn.current,Ke(Zn,I?y&1|2:y&1),Ri&&of(p,_.treeForkCount),u):(Yr(p),null);case 22:case 23:return Bl(p),Gj(),_=p.memoizedState!==null,u!==null?u.memoizedState!==null!==_&&(p.flags|=8192):_&&(p.flags|=8192),_?(y&536870912)!==0&&(p.flags&128)===0&&(Yr(p),p.subtreeFlags&6&&(p.flags|=8192)):Yr(p),y=p.updateQueue,y!==null&&iP(p,y.retryQueue),y=null,u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),_=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(_=p.memoizedState.cachePool.pool),_!==y&&(p.flags|=2048),u!==null&&ze(mb),null;case 24:return y=null,u!==null&&(y=u.memoizedState.cache),p.memoizedState.cache!==y&&(p.flags|=2048),cf(us),Yr(p),null;case 25:return null;case 30:return null}throw Error(r(156,p.tag))}function GMe(u,p){switch(Aj(p),p.tag){case 1:return u=p.flags,u&65536?(p.flags=u&-65537|128,p):null;case 3:return cf(us),it(),u=p.flags,(u&65536)!==0&&(u&128)===0?(p.flags=u&-65537|128,p):null;case 26:case 27:case 5:return ks(p),null;case 31:if(p.memoizedState!==null){if(Bl(p),p.alternate===null)throw Error(r(340));hb()}return u=p.flags,u&65536?(p.flags=u&-65537|128,p):null;case 13:if(Bl(p),u=p.memoizedState,u!==null&&u.dehydrated!==null){if(p.alternate===null)throw Error(r(340));hb()}return u=p.flags,u&65536?(p.flags=u&-65537|128,p):null;case 19:return ze(Zn),null;case 4:return it(),null;case 10:return cf(p.type),null;case 22:case 23:return Bl(p),Gj(),u!==null&&ze(mb),u=p.flags,u&65536?(p.flags=u&-65537|128,p):null;case 24:return cf(us),null;case 25:return null;default:return null}}function vK(u,p){switch(Aj(p),p.tag){case 3:cf(us),it();break;case 26:case 27:case 5:ks(p);break;case 4:it();break;case 31:p.memoizedState!==null&&Bl(p);break;case 13:Bl(p);break;case 19:ze(Zn);break;case 10:cf(p.type);break;case 22:case 23:Bl(p),Gj(),u!==null&&ze(mb);break;case 24:cf(us)}}function NI(u,p){try{var y=p.updateQueue,_=y!==null?y.lastEffect:null;if(_!==null){var I=_.next;y=I;do{if((y.tag&u)===u){_=void 0;var C=y.create,N=y.inst;_=C(),N.destroy=_}y=y.next}while(y!==I)}}catch(Z){_r(p,p.return,Z)}}function Og(u,p,y){try{var _=p.updateQueue,I=_!==null?_.lastEffect:null;if(I!==null){var C=I.next;_=C;do{if((_.tag&u)===u){var N=_.inst,Z=N.destroy;if(Z!==void 0){N.destroy=void 0,I=p;var ce=y,Ee=Z;try{Ee()}catch(De){_r(I,ce,De)}}}_=_.next}while(_!==C)}}catch(De){_r(p,p.return,De)}}function bK(u){var p=u.updateQueue;if(p!==null){var y=u.stateNode;try{cQ(p,y)}catch(_){_r(u,u.return,_)}}}function wK(u,p,y){y.props=wb(u.type,u.memoizedProps),y.state=u.memoizedState;try{y.componentWillUnmount()}catch(_){_r(u,p,_)}}function DI(u,p){try{var y=u.ref;if(y!==null){switch(u.tag){case 26:case 27:case 5:var _=u.stateNode;break;case 30:_=u.stateNode;break;default:_=u.stateNode}typeof y=="function"?u.refCleanup=y(_):y.current=_}}catch(I){_r(u,p,I)}}function sh(u,p){var y=u.ref,_=u.refCleanup;if(y!==null)if(typeof _=="function")try{_()}catch(I){_r(u,p,I)}finally{u.refCleanup=null,u=u.alternate,u!=null&&(u.refCleanup=null)}else if(typeof y=="function")try{y(null)}catch(I){_r(u,p,I)}else y.current=null}function _K(u){var p=u.type,y=u.memoizedProps,_=u.stateNode;try{e:switch(p){case"button":case"input":case"select":case"textarea":y.autoFocus&&_.focus();break e;case"img":y.src?_.src=y.src:y.srcSet&&(_.srcset=y.srcSet)}}catch(I){_r(u,u.return,I)}}function S4(u,p,y){try{var _=u.stateNode;fCe(_,u.type,y,p),_[jr]=p}catch(I){_r(u,u.return,I)}}function xK(u){return u.tag===5||u.tag===3||u.tag===26||u.tag===27&&jg(u.type)||u.tag===4}function T4(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||xK(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.tag===27&&jg(u.type)||u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function I4(u,p,y){var _=u.tag;if(_===5||_===6)u=u.stateNode,p?(y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y).insertBefore(u,p):(p=y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y,p.appendChild(u),y=y._reactRootContainer,y!=null||p.onclick!==null||(p.onclick=Fu));else if(_!==4&&(_===27&&jg(u.type)&&(y=u.stateNode,p=null),u=u.child,u!==null))for(I4(u,p,y),u=u.sibling;u!==null;)I4(u,p,y),u=u.sibling}function rP(u,p,y){var _=u.tag;if(_===5||_===6)u=u.stateNode,p?y.insertBefore(u,p):y.appendChild(u);else if(_!==4&&(_===27&&jg(u.type)&&(y=u.stateNode),u=u.child,u!==null))for(rP(u,p,y),u=u.sibling;u!==null;)rP(u,p,y),u=u.sibling}function $K(u){var p=u.stateNode,y=u.memoizedProps;try{for(var _=u.type,I=p.attributes;I.length;)p.removeAttributeNode(I[0]);wa(p,_,y),p[vr]=u,p[jr]=y}catch(C){_r(u,u.return,C)}}var ff=!1,ps=!1,M4=!1,SK=typeof WeakSet=="function"?WeakSet:Set,Xs=null;function WMe(u,p){if(u=u.containerInfo,Z4=SP,u=Qe(u),yt(u)){if("selectionStart"in u)var y={start:u.selectionStart,end:u.selectionEnd};else e:{y=(y=u.ownerDocument)&&y.defaultView||window;var _=y.getSelection&&y.getSelection();if(_&&_.rangeCount!==0){y=_.anchorNode;var I=_.anchorOffset,C=_.focusNode;_=_.focusOffset;try{y.nodeType,C.nodeType}catch{y=null;break e}var N=0,Z=-1,ce=-1,Ee=0,De=0,Be=u,ke=null;t:for(;;){for(var Le;Be!==y||I!==0&&Be.nodeType!==3||(Z=N+I),Be!==C||_!==0&&Be.nodeType!==3||(ce=N+_),Be.nodeType===3&&(N+=Be.nodeValue.length),(Le=Be.firstChild)!==null;)ke=Be,Be=Le;for(;;){if(Be===u)break t;if(ke===y&&++Ee===I&&(Z=N),ke===C&&++De===_&&(ce=N),(Le=Be.nextSibling)!==null)break;Be=ke,ke=Be.parentNode}Be=Le}y=Z===-1||ce===-1?null:{start:Z,end:ce}}else y=null}y=y||{start:0,end:0}}else y=null;for(Y4={focusedElem:u,selectionRange:y},SP=!1,Xs=p;Xs!==null;)if(p=Xs,u=p.child,(p.subtreeFlags&1028)!==0&&u!==null)u.return=p,Xs=u;else for(;Xs!==null;){switch(p=Xs,C=p.alternate,u=p.flags,p.tag){case 0:if((u&4)!==0&&(u=p.updateQueue,u=u!==null?u.events:null,u!==null))for(y=0;y<u.length;y++)I=u[y],I.ref.impl=I.nextImpl;break;case 11:case 15:break;case 1:if((u&1024)!==0&&C!==null){u=void 0,y=p,I=C.memoizedProps,C=C.memoizedState,_=y.stateNode;try{var $t=wb(y.type,I);u=_.getSnapshotBeforeUpdate($t,C),_.__reactInternalSnapshotBeforeUpdate=u}catch(Bt){_r(y,y.return,Bt)}}break;case 3:if((u&1024)!==0){if(u=p.stateNode.containerInfo,y=u.nodeType,y===9)Q4(u);else if(y===1)switch(u.nodeName){case"HEAD":case"HTML":case"BODY":Q4(u);break;default:u.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((u&1024)!==0)throw Error(r(163))}if(u=p.sibling,u!==null){u.return=p.return,Xs=u;break}Xs=p.return}}function TK(u,p,y){var _=y.flags;switch(y.tag){case 0:case 11:case 15:gf(u,y),_&4&&NI(5,y);break;case 1:if(gf(u,y),_&4)if(u=y.stateNode,p===null)try{u.componentDidMount()}catch(N){_r(y,y.return,N)}else{var I=wb(y.type,p.memoizedProps);p=p.memoizedState;try{u.componentDidUpdate(I,p,u.__reactInternalSnapshotBeforeUpdate)}catch(N){_r(y,y.return,N)}}_&64&&bK(y),_&512&&DI(y,y.return);break;case 3:if(gf(u,y),_&64&&(u=y.updateQueue,u!==null)){if(p=null,y.child!==null)switch(y.child.tag){case 27:case 5:p=y.child.stateNode;break;case 1:p=y.child.stateNode}try{cQ(u,p)}catch(N){_r(y,y.return,N)}}break;case 27:p===null&&_&4&&$K(y);case 26:case 5:gf(u,y),p===null&&_&4&&_K(y),_&512&&DI(y,y.return);break;case 12:gf(u,y);break;case 31:gf(u,y),_&4&&CK(u,y);break;case 13:gf(u,y),_&4&&EK(u,y),_&64&&(u=y.memoizedState,u!==null&&(u=u.dehydrated,u!==null&&(y=iCe.bind(null,y),xCe(u,y))));break;case 22:if(_=y.memoizedState!==null||ff,!_){p=p!==null&&p.memoizedState!==null||ps,I=ff;var C=ps;ff=_,(ps=p)&&!C?yf(u,y,(y.subtreeFlags&8772)!==0):gf(u,y),ff=I,ps=C}break;case 30:break;default:gf(u,y)}}function IK(u){var p=u.alternate;p!==null&&(u.alternate=null,IK(p)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(p=u.stateNode,p!==null&&ku(p)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}var rn=null,Xo=!1;function mf(u,p,y){for(y=y.child;y!==null;)MK(u,p,y),y=y.sibling}function MK(u,p,y){if(Gs&&typeof Gs.onCommitFiberUnmount=="function")try{Gs.onCommitFiberUnmount(Zd,y)}catch{}switch(y.tag){case 26:ps||sh(y,p),mf(u,p,y),y.memoizedState?y.memoizedState.count--:y.stateNode&&(y=y.stateNode,y.parentNode.removeChild(y));break;case 27:ps||sh(y,p);var _=rn,I=Xo;jg(y.type)&&(rn=y.stateNode,Xo=!1),mf(u,p,y),ZI(y.stateNode),rn=_,Xo=I;break;case 5:ps||sh(y,p);case 6:if(_=rn,I=Xo,rn=null,mf(u,p,y),rn=_,Xo=I,rn!==null)if(Xo)try{(rn.nodeType===9?rn.body:rn.nodeName==="HTML"?rn.ownerDocument.body:rn).removeChild(y.stateNode)}catch(C){_r(y,p,C)}else try{rn.removeChild(y.stateNode)}catch(C){_r(y,p,C)}break;case 18:rn!==null&&(Xo?(u=rn,bee(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,y.stateNode),m1(u)):bee(rn,y.stateNode));break;case 4:_=rn,I=Xo,rn=y.stateNode.containerInfo,Xo=!0,mf(u,p,y),rn=_,Xo=I;break;case 0:case 11:case 14:case 15:Og(2,y,p),ps||Og(4,y,p),mf(u,p,y);break;case 1:ps||(sh(y,p),_=y.stateNode,typeof _.componentWillUnmount=="function"&&wK(y,p,_)),mf(u,p,y);break;case 21:mf(u,p,y);break;case 22:ps=(_=ps)||y.memoizedState!==null,mf(u,p,y),ps=_;break;default:mf(u,p,y)}}function CK(u,p){if(p.memoizedState===null&&(u=p.alternate,u!==null&&(u=u.memoizedState,u!==null))){u=u.dehydrated;try{m1(u)}catch(y){_r(p,p.return,y)}}}function EK(u,p){if(p.memoizedState===null&&(u=p.alternate,u!==null&&(u=u.memoizedState,u!==null&&(u=u.dehydrated,u!==null))))try{m1(u)}catch(y){_r(p,p.return,y)}}function ZMe(u){switch(u.tag){case 31:case 13:case 19:var p=u.stateNode;return p===null&&(p=u.stateNode=new SK),p;case 22:return u=u.stateNode,p=u._retryCache,p===null&&(p=u._retryCache=new SK),p;default:throw Error(r(435,u.tag))}}function nP(u,p){var y=ZMe(u);p.forEach(function(_){if(!y.has(_)){y.add(_);var I=rCe.bind(null,u,_);_.then(I,I)}})}function Qo(u,p){var y=p.deletions;if(y!==null)for(var _=0;_<y.length;_++){var I=y[_],C=u,N=p,Z=N;e:for(;Z!==null;){switch(Z.tag){case 27:if(jg(Z.type)){rn=Z.stateNode,Xo=!1;break e}break;case 5:rn=Z.stateNode,Xo=!1;break e;case 3:case 4:rn=Z.stateNode.containerInfo,Xo=!0;break e}Z=Z.return}if(rn===null)throw Error(r(160));MK(C,N,I),rn=null,Xo=!1,C=I.alternate,C!==null&&(C.return=null),I.return=null}if(p.subtreeFlags&13886)for(p=p.child;p!==null;)kK(p,u),p=p.sibling}var Du=null;function kK(u,p){var y=u.alternate,_=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:Qo(p,u),Ko(u),_&4&&(Og(3,u,u.return),NI(3,u),Og(5,u,u.return));break;case 1:Qo(p,u),Ko(u),_&512&&(ps||y===null||sh(y,y.return)),_&64&&ff&&(u=u.updateQueue,u!==null&&(_=u.callbacks,_!==null&&(y=u.shared.hiddenCallbacks,u.shared.hiddenCallbacks=y===null?_:y.concat(_))));break;case 26:var I=Du;if(Qo(p,u),Ko(u),_&512&&(ps||y===null||sh(y,y.return)),_&4){var C=y!==null?y.memoizedState:null;if(_=u.memoizedState,y===null)if(_===null)if(u.stateNode===null){e:{_=u.type,y=u.memoizedProps,I=I.ownerDocument||I;t:switch(_){case"title":C=I.getElementsByTagName("title")[0],(!C||C[jl]||C[vr]||C.namespaceURI==="http://www.w3.org/2000/svg"||C.hasAttribute("itemprop"))&&(C=I.createElement(_),I.head.insertBefore(C,I.querySelector("head > title"))),wa(C,_,y),C[vr]=u,hn(C),_=C;break e;case"link":var N=kee("link","href",I).get(_+(y.href||""));if(N){for(var Z=0;Z<N.length;Z++)if(C=N[Z],C.getAttribute("href")===(y.href==null||y.href===""?null:y.href)&&C.getAttribute("rel")===(y.rel==null?null:y.rel)&&C.getAttribute("title")===(y.title==null?null:y.title)&&C.getAttribute("crossorigin")===(y.crossOrigin==null?null:y.crossOrigin)){N.splice(Z,1);break t}}C=I.createElement(_),wa(C,_,y),I.head.appendChild(C);break;case"meta":if(N=kee("meta","content",I).get(_+(y.content||""))){for(Z=0;Z<N.length;Z++)if(C=N[Z],C.getAttribute("content")===(y.content==null?null:""+y.content)&&C.getAttribute("name")===(y.name==null?null:y.name)&&C.getAttribute("property")===(y.property==null?null:y.property)&&C.getAttribute("http-equiv")===(y.httpEquiv==null?null:y.httpEquiv)&&C.getAttribute("charset")===(y.charSet==null?null:y.charSet)){N.splice(Z,1);break t}}C=I.createElement(_),wa(C,_,y),I.head.appendChild(C);break;default:throw Error(r(468,_))}C[vr]=u,hn(C),_=C}u.stateNode=_}else Aee(I,u.type,u.stateNode);else u.stateNode=Eee(I,_,u.memoizedProps);else C!==_?(C===null?y.stateNode!==null&&(y=y.stateNode,y.parentNode.removeChild(y)):C.count--,_===null?Aee(I,u.type,u.stateNode):Eee(I,_,u.memoizedProps)):_===null&&u.stateNode!==null&&S4(u,u.memoizedProps,y.memoizedProps)}break;case 27:Qo(p,u),Ko(u),_&512&&(ps||y===null||sh(y,y.return)),y!==null&&_&4&&S4(u,u.memoizedProps,y.memoizedProps);break;case 5:if(Qo(p,u),Ko(u),_&512&&(ps||y===null||sh(y,y.return)),u.flags&32){I=u.stateNode;try{eh(I,"")}catch($t){_r(u,u.return,$t)}}_&4&&u.stateNode!=null&&(I=u.memoizedProps,S4(u,I,y!==null?y.memoizedProps:I)),_&1024&&(M4=!0);break;case 6:if(Qo(p,u),Ko(u),_&4){if(u.stateNode===null)throw Error(r(162));_=u.memoizedProps,y=u.stateNode;try{y.nodeValue=_}catch($t){_r(u,u.return,$t)}}break;case 3:if(wP=null,I=Du,Du=vP(p.containerInfo),Qo(p,u),Du=I,Ko(u),_&4&&y!==null&&y.memoizedState.isDehydrated)try{m1(p.containerInfo)}catch($t){_r(u,u.return,$t)}M4&&(M4=!1,AK(u));break;case 4:_=Du,Du=vP(u.stateNode.containerInfo),Qo(p,u),Ko(u),Du=_;break;case 12:Qo(p,u),Ko(u);break;case 31:Qo(p,u),Ko(u),_&4&&(_=u.updateQueue,_!==null&&(u.updateQueue=null,nP(u,_)));break;case 13:Qo(p,u),Ko(u),u.child.flags&8192&&u.memoizedState!==null!=(y!==null&&y.memoizedState!==null)&&(aP=cs()),_&4&&(_=u.updateQueue,_!==null&&(u.updateQueue=null,nP(u,_)));break;case 22:I=u.memoizedState!==null;var ce=y!==null&&y.memoizedState!==null,Ee=ff,De=ps;if(ff=Ee||I,ps=De||ce,Qo(p,u),ps=De,ff=Ee,Ko(u),_&8192)e:for(p=u.stateNode,p._visibility=I?p._visibility&-2:p._visibility|1,I&&(y===null||ce||ff||ps||_b(u)),y=null,p=u;;){if(p.tag===5||p.tag===26){if(y===null){ce=y=p;try{if(C=ce.stateNode,I)N=C.style,typeof N.setProperty=="function"?N.setProperty("display","none","important"):N.display="none";else{Z=ce.stateNode;var Be=ce.memoizedProps.style,ke=Be!=null&&Be.hasOwnProperty("display")?Be.display:null;Z.style.display=ke==null||typeof ke=="boolean"?"":(""+ke).trim()}}catch($t){_r(ce,ce.return,$t)}}}else if(p.tag===6){if(y===null){ce=p;try{ce.stateNode.nodeValue=I?"":ce.memoizedProps}catch($t){_r(ce,ce.return,$t)}}}else if(p.tag===18){if(y===null){ce=p;try{var Le=ce.stateNode;I?wee(Le,!0):wee(ce.stateNode,!1)}catch($t){_r(ce,ce.return,$t)}}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===u)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===u)break e;for(;p.sibling===null;){if(p.return===null||p.return===u)break e;y===p&&(y=null),p=p.return}y===p&&(y=null),p.sibling.return=p.return,p=p.sibling}_&4&&(_=u.updateQueue,_!==null&&(y=_.retryQueue,y!==null&&(_.retryQueue=null,nP(u,y))));break;case 19:Qo(p,u),Ko(u),_&4&&(_=u.updateQueue,_!==null&&(u.updateQueue=null,nP(u,_)));break;case 30:break;case 21:break;default:Qo(p,u),Ko(u)}}function Ko(u){var p=u.flags;if(p&2){try{for(var y,_=u.return;_!==null;){if(xK(_)){y=_;break}_=_.return}if(y==null)throw Error(r(160));switch(y.tag){case 27:var I=y.stateNode,C=T4(u);rP(u,C,I);break;case 5:var N=y.stateNode;y.flags&32&&(eh(N,""),y.flags&=-33);var Z=T4(u);rP(u,Z,N);break;case 3:case 4:var ce=y.stateNode.containerInfo,Ee=T4(u);I4(u,Ee,ce);break;default:throw Error(r(161))}}catch(De){_r(u,u.return,De)}u.flags&=-3}p&4096&&(u.flags&=-4097)}function AK(u){if(u.subtreeFlags&1024)for(u=u.child;u!==null;){var p=u;AK(p),p.tag===5&&p.flags&1024&&p.stateNode.reset(),u=u.sibling}}function gf(u,p){if(p.subtreeFlags&8772)for(p=p.child;p!==null;)TK(u,p.alternate,p),p=p.sibling}function _b(u){for(u=u.child;u!==null;){var p=u;switch(p.tag){case 0:case 11:case 14:case 15:Og(4,p,p.return),_b(p);break;case 1:sh(p,p.return);var y=p.stateNode;typeof y.componentWillUnmount=="function"&&wK(p,p.return,y),_b(p);break;case 27:ZI(p.stateNode);case 26:case 5:sh(p,p.return),_b(p);break;case 22:p.memoizedState===null&&_b(p);break;case 30:_b(p);break;default:_b(p)}u=u.sibling}}function yf(u,p,y){for(y=y&&(p.subtreeFlags&8772)!==0,p=p.child;p!==null;){var _=p.alternate,I=u,C=p,N=C.flags;switch(C.tag){case 0:case 11:case 15:yf(I,C,y),NI(4,C);break;case 1:if(yf(I,C,y),_=C,I=_.stateNode,typeof I.componentDidMount=="function")try{I.componentDidMount()}catch(Ee){_r(_,_.return,Ee)}if(_=C,I=_.updateQueue,I!==null){var Z=_.stateNode;try{var ce=I.shared.hiddenCallbacks;if(ce!==null)for(I.shared.hiddenCallbacks=null,I=0;I<ce.length;I++)lQ(ce[I],Z)}catch(Ee){_r(_,_.return,Ee)}}y&&N&64&&bK(C),DI(C,C.return);break;case 27:$K(C);case 26:case 5:yf(I,C,y),y&&_===null&&N&4&&_K(C),DI(C,C.return);break;case 12:yf(I,C,y);break;case 31:yf(I,C,y),y&&N&4&&CK(I,C);break;case 13:yf(I,C,y),y&&N&4&&EK(I,C);break;case 22:C.memoizedState===null&&yf(I,C,y),DI(C,C.return);break;case 30:break;default:yf(I,C,y)}p=p.sibling}}function C4(u,p){var y=null;u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),u=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(u=p.memoizedState.cachePool.pool),u!==y&&(u!=null&&u.refCount++,y!=null&&TI(y))}function E4(u,p){u=null,p.alternate!==null&&(u=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==u&&(p.refCount++,u!=null&&TI(u))}function ju(u,p,y,_){if(p.subtreeFlags&10256)for(p=p.child;p!==null;)PK(u,p,y,_),p=p.sibling}function PK(u,p,y,_){var I=p.flags;switch(p.tag){case 0:case 11:case 15:ju(u,p,y,_),I&2048&&NI(9,p);break;case 1:ju(u,p,y,_);break;case 3:ju(u,p,y,_),I&2048&&(u=null,p.alternate!==null&&(u=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==u&&(p.refCount++,u!=null&&TI(u)));break;case 12:if(I&2048){ju(u,p,y,_),u=p.stateNode;try{var C=p.memoizedProps,N=C.id,Z=C.onPostCommit;typeof Z=="function"&&Z(N,p.alternate===null?"mount":"update",u.passiveEffectDuration,-0)}catch(ce){_r(p,p.return,ce)}}else ju(u,p,y,_);break;case 31:ju(u,p,y,_);break;case 13:ju(u,p,y,_);break;case 23:break;case 22:C=p.stateNode,N=p.alternate,p.memoizedState!==null?C._visibility&2?ju(u,p,y,_):jI(u,p):C._visibility&2?ju(u,p,y,_):(C._visibility|=2,n1(u,p,y,_,(p.subtreeFlags&10256)!==0||!1)),I&2048&&C4(N,p);break;case 24:ju(u,p,y,_),I&2048&&E4(p.alternate,p);break;default:ju(u,p,y,_)}}function n1(u,p,y,_,I){for(I=I&&((p.subtreeFlags&10256)!==0||!1),p=p.child;p!==null;){var C=u,N=p,Z=y,ce=_,Ee=N.flags;switch(N.tag){case 0:case 11:case 15:n1(C,N,Z,ce,I),NI(8,N);break;case 23:break;case 22:var De=N.stateNode;N.memoizedState!==null?De._visibility&2?n1(C,N,Z,ce,I):jI(C,N):(De._visibility|=2,n1(C,N,Z,ce,I)),I&&Ee&2048&&C4(N.alternate,N);break;case 24:n1(C,N,Z,ce,I),I&&Ee&2048&&E4(N.alternate,N);break;default:n1(C,N,Z,ce,I)}p=p.sibling}}function jI(u,p){if(p.subtreeFlags&10256)for(p=p.child;p!==null;){var y=u,_=p,I=_.flags;switch(_.tag){case 22:jI(y,_),I&2048&&C4(_.alternate,_);break;case 24:jI(y,_),I&2048&&E4(_.alternate,_);break;default:jI(y,_)}p=p.sibling}}var VI=8192;function s1(u,p,y){if(u.subtreeFlags&VI)for(u=u.child;u!==null;)OK(u,p,y),u=u.sibling}function OK(u,p,y){switch(u.tag){case 26:s1(u,p,y),u.flags&VI&&u.memoizedState!==null&&LCe(y,Du,u.memoizedState,u.memoizedProps);break;case 5:s1(u,p,y);break;case 3:case 4:var _=Du;Du=vP(u.stateNode.containerInfo),s1(u,p,y),Du=_;break;case 22:u.memoizedState===null&&(_=u.alternate,_!==null&&_.memoizedState!==null?(_=VI,VI=16777216,s1(u,p,y),VI=_):s1(u,p,y));break;default:s1(u,p,y)}}function LK(u){var p=u.alternate;if(p!==null&&(u=p.child,u!==null)){p.child=null;do p=u.sibling,u.sibling=null,u=p;while(u!==null)}}function UI(u){var p=u.deletions;if((u.flags&16)!==0){if(p!==null)for(var y=0;y<p.length;y++){var _=p[y];Xs=_,RK(_,u)}LK(u)}if(u.subtreeFlags&10256)for(u=u.child;u!==null;)FK(u),u=u.sibling}function FK(u){switch(u.tag){case 0:case 11:case 15:UI(u),u.flags&2048&&Og(9,u,u.return);break;case 3:UI(u);break;case 12:UI(u);break;case 22:var p=u.stateNode;u.memoizedState!==null&&p._visibility&2&&(u.return===null||u.return.tag!==13)?(p._visibility&=-3,sP(u)):UI(u);break;default:UI(u)}}function sP(u){var p=u.deletions;if((u.flags&16)!==0){if(p!==null)for(var y=0;y<p.length;y++){var _=p[y];Xs=_,RK(_,u)}LK(u)}for(u=u.child;u!==null;){switch(p=u,p.tag){case 0:case 11:case 15:Og(8,p,p.return),sP(p);break;case 22:y=p.stateNode,y._visibility&2&&(y._visibility&=-3,sP(p));break;default:sP(p)}u=u.sibling}}function RK(u,p){for(;Xs!==null;){var y=Xs;switch(y.tag){case 0:case 11:case 15:Og(8,y,p);break;case 23:case 22:if(y.memoizedState!==null&&y.memoizedState.cachePool!==null){var _=y.memoizedState.cachePool.pool;_!=null&&_.refCount++}break;case 24:TI(y.memoizedState.cache)}if(_=y.child,_!==null)_.return=y,Xs=_;else e:for(y=u;Xs!==null;){_=Xs;var I=_.sibling,C=_.return;if(IK(_),_===y){Xs=null;break e}if(I!==null){I.return=C,Xs=I;break e}Xs=C}}}var YMe={getCacheForType:function(u){var p=va(us),y=p.data.get(u);return y===void 0&&(y=u(),p.data.set(u,y)),y},cacheSignal:function(){return va(us).controller.signal}},JMe=typeof WeakMap=="function"?WeakMap:Map,ir=0,Fr=null,Mi=null,Pi=0,wr=0,ql=null,Lg=!1,a1=!1,k4=!1,vf=0,An=0,Fg=0,xb=0,A4=0,Hl=0,o1=0,BI=null,el=null,P4=!1,aP=0,zK=0,oP=1/0,lP=null,Rg=null,As=0,zg=null,l1=null,bf=0,O4=0,L4=null,NK=null,qI=0,F4=null;function Gl(){return(ir&2)!==0&&Pi!==0?Pi&-Pi:ne.T!==null?V4():er()}function DK(){if(Hl===0)if((Pi&536870912)===0||Ri){var u=Jp;Jp<<=1,(Jp&3932160)===0&&(Jp=262144),Hl=u}else Hl=536870912;return u=Ul.current,u!==null&&(u.flags|=32),Hl}function tl(u,p,y){(u===Fr&&(wr===2||wr===9)||u.cancelPendingCommit!==null)&&(c1(u,0),Ng(u,Pi,Hl,!1)),Na(u,y),((ir&2)===0||u!==Fr)&&(u===Fr&&((ir&2)===0&&(xb|=y),An===4&&Ng(u,Pi,Hl,!1)),ah(u))}function jK(u,p,y){if((ir&6)!==0)throw Error(r(327));var _=!y&&(p&127)===0&&(p&u.expiredLanes)===0||Cu(u,p),I=_?KMe(u,p):z4(u,p,!0),C=_;do{if(I===0){a1&&!_&&Ng(u,p,0,!1);break}else{if(y=u.current.alternate,C&&!XMe(y)){I=z4(u,p,!1),C=!1;continue}if(I===2){if(C=p,u.errorRecoveryDisabledLanes&C)var N=0;else N=u.pendingLanes&-536870913,N=N!==0?N:N&536870912?536870912:0;if(N!==0){p=N;e:{var Z=u;I=BI;var ce=Z.current.memoizedState.isDehydrated;if(ce&&(c1(Z,N).flags|=256),N=z4(Z,N,!1),N!==2){if(k4&&!ce){Z.errorRecoveryDisabledLanes|=C,xb|=C,I=4;break e}C=el,el=I,C!==null&&(el===null?el=C:el.push.apply(el,C))}I=N}if(C=!1,I!==2)continue}}if(I===1){c1(u,0),Ng(u,p,0,!0);break}e:{switch(_=u,C=I,C){case 0:case 1:throw Error(r(345));case 4:if((p&4194048)!==p)break;case 6:Ng(_,p,Hl,!Lg);break e;case 2:el=null;break;case 3:case 5:break;default:throw Error(r(329))}if((p&62914560)===p&&(I=aP+300-cs(),10<I)){if(Ng(_,p,Hl,!Lg),Jd(_,0,!0)!==0)break e;bf=p,_.timeoutHandle=yee(VK.bind(null,_,y,el,lP,P4,p,Hl,xb,o1,Lg,C,"Throttled",-0,0),I);break e}VK(_,y,el,lP,P4,p,Hl,xb,o1,Lg,C,null,-0,0)}}break}while(!0);ah(u)}function VK(u,p,y,_,I,C,N,Z,ce,Ee,De,Be,ke,Le){if(u.timeoutHandle=-1,Be=p.subtreeFlags,Be&8192||(Be&16785408)===16785408){Be={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Fu},OK(p,C,Be);var $t=(C&62914560)===C?aP-cs():(C&4194048)===C?zK-cs():0;if($t=FCe(Be,$t),$t!==null){bf=C,u.cancelPendingCommit=$t(YK.bind(null,u,p,C,y,_,I,N,Z,ce,De,Be,null,ke,Le)),Ng(u,C,N,!Ee);return}}YK(u,p,C,y,_,I,N,Z,ce)}function XMe(u){for(var p=u;;){var y=p.tag;if((y===0||y===11||y===15)&&p.flags&16384&&(y=p.updateQueue,y!==null&&(y=y.stores,y!==null)))for(var _=0;_<y.length;_++){var I=y[_],C=I.getSnapshot;I=I.value;try{if(!ee(C(),I))return!1}catch{return!1}}if(y=p.child,p.subtreeFlags&16384&&y!==null)y.return=p,p=y;else{if(p===u)break;for(;p.sibling===null;){if(p.return===null||p.return===u)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function Ng(u,p,y,_){p&=~A4,p&=~xb,u.suspendedLanes|=p,u.pingedLanes&=~p,_&&(u.warmLanes|=p),_=u.expirationTimes;for(var I=p;0<I;){var C=31-Ws(I),N=1<<C;_[C]=-1,I&=~N}y!==0&&Da(u,y,p)}function cP(){return(ir&6)===0?(HI(0),!1):!0}function R4(){if(Mi!==null){if(wr===0)var u=Mi.return;else u=Mi,lf=pb=null,Qj(u),K_=null,MI=0,u=Mi;for(;u!==null;)vK(u.alternate,u),u=u.return;Mi=null}}function c1(u,p){var y=u.timeoutHandle;y!==-1&&(u.timeoutHandle=-1,yCe(y)),y=u.cancelPendingCommit,y!==null&&(u.cancelPendingCommit=null,y()),bf=0,R4(),Fr=u,Mi=y=af(u.current,null),Pi=p,wr=0,ql=null,Lg=!1,a1=Cu(u,p),k4=!1,o1=Hl=A4=xb=Fg=An=0,el=BI=null,P4=!1,(p&8)!==0&&(p|=p&32);var _=u.entangledLanes;if(_!==0)for(u=u.entanglements,_&=p;0<_;){var I=31-Ws(_),C=1<<I;p|=u[I],_&=~C}return vf=p,kA(),y}function UK(u,p){hi=null,ne.H=FI,p===Q_||p===NA?(p=nQ(),wr=3):p===jj?(p=nQ(),wr=4):wr=p===f4?8:p!==null&&typeof p=="object"&&typeof p.then=="function"?6:1,ql=p,Mi===null&&(An=1,QA(u,Lc(p,u.current)))}function BK(){var u=Ul.current;return u===null?!0:(Pi&4194048)===Pi?Nc===null:(Pi&62914560)===Pi||(Pi&536870912)!==0?u===Nc:!1}function qK(){var u=ne.H;return ne.H=FI,u===null?FI:u}function HK(){var u=ne.A;return ne.A=YMe,u}function uP(){An=4,Lg||(Pi&4194048)!==Pi&&Ul.current!==null||(a1=!0),(Fg&134217727)===0&&(xb&134217727)===0||Fr===null||Ng(Fr,Pi,Hl,!1)}function z4(u,p,y){var _=ir;ir|=2;var I=qK(),C=HK();(Fr!==u||Pi!==p)&&(lP=null,c1(u,p)),p=!1;var N=An;e:do try{if(wr!==0&&Mi!==null){var Z=Mi,ce=ql;switch(wr){case 8:R4(),N=6;break e;case 3:case 2:case 9:case 6:Ul.current===null&&(p=!0);var Ee=wr;if(wr=0,ql=null,u1(u,Z,ce,Ee),y&&a1){N=0;break e}break;default:Ee=wr,wr=0,ql=null,u1(u,Z,ce,Ee)}}QMe(),N=An;break}catch(De){UK(u,De)}while(!0);return p&&u.shellSuspendCounter++,lf=pb=null,ir=_,ne.H=I,ne.A=C,Mi===null&&(Fr=null,Pi=0,kA()),N}function QMe(){for(;Mi!==null;)GK(Mi)}function KMe(u,p){var y=ir;ir|=2;var _=qK(),I=HK();Fr!==u||Pi!==p?(lP=null,oP=cs()+500,c1(u,p)):a1=Cu(u,p);e:do try{if(wr!==0&&Mi!==null){p=Mi;var C=ql;t:switch(wr){case 1:wr=0,ql=null,u1(u,p,C,1);break;case 2:case 9:if(iQ(C)){wr=0,ql=null,WK(p);break}p=function(){wr!==2&&wr!==9||Fr!==u||(wr=7),ah(u)},C.then(p,p);break e;case 3:wr=7;break e;case 4:wr=5;break e;case 7:iQ(C)?(wr=0,ql=null,WK(p)):(wr=0,ql=null,u1(u,p,C,7));break;case 5:var N=null;switch(Mi.tag){case 26:N=Mi.memoizedState;case 5:case 27:var Z=Mi;if(N?Pee(N):Z.stateNode.complete){wr=0,ql=null;var ce=Z.sibling;if(ce!==null)Mi=ce;else{var Ee=Z.return;Ee!==null?(Mi=Ee,dP(Ee)):Mi=null}break t}}wr=0,ql=null,u1(u,p,C,5);break;case 6:wr=0,ql=null,u1(u,p,C,6);break;case 8:R4(),An=6;break e;default:throw Error(r(462))}}eCe();break}catch(De){UK(u,De)}while(!0);return lf=pb=null,ne.H=_,ne.A=I,ir=y,Mi!==null?0:(Fr=null,Pi=0,kA(),An)}function eCe(){for(;Mi!==null&&!k_();)GK(Mi)}function GK(u){var p=gK(u.alternate,u,vf);u.memoizedProps=u.pendingProps,p===null?dP(u):Mi=p}function WK(u){var p=u,y=p.alternate;switch(p.tag){case 15:case 0:p=uK(y,p,p.pendingProps,p.type,void 0,Pi);break;case 11:p=uK(y,p,p.pendingProps,p.type.render,p.ref,Pi);break;case 5:Qj(p);default:vK(y,p),p=Mi=HX(p,vf),p=gK(y,p,vf)}u.memoizedProps=u.pendingProps,p===null?dP(u):Mi=p}function u1(u,p,y,_){lf=pb=null,Qj(p),K_=null,MI=0;var I=p.return;try{if(UMe(u,I,p,y,Pi)){An=1,QA(u,Lc(y,u.current)),Mi=null;return}}catch(C){if(I!==null)throw Mi=I,C;An=1,QA(u,Lc(y,u.current)),Mi=null;return}p.flags&32768?(Ri||_===1?u=!0:a1||(Pi&536870912)!==0?u=!1:(Lg=u=!0,(_===2||_===9||_===3||_===6)&&(_=Ul.current,_!==null&&_.tag===13&&(_.flags|=16384))),ZK(p,u)):dP(p)}function dP(u){var p=u;do{if((p.flags&32768)!==0){ZK(p,Lg);return}u=p.return;var y=HMe(p.alternate,p,vf);if(y!==null){Mi=y;return}if(p=p.sibling,p!==null){Mi=p;return}Mi=p=u}while(p!==null);An===0&&(An=5)}function ZK(u,p){do{var y=GMe(u.alternate,u);if(y!==null){y.flags&=32767,Mi=y;return}if(y=u.return,y!==null&&(y.flags|=32768,y.subtreeFlags=0,y.deletions=null),!p&&(u=u.sibling,u!==null)){Mi=u;return}Mi=u=y}while(u!==null);An=6,Mi=null}function YK(u,p,y,_,I,C,N,Z,ce){u.cancelPendingCommit=null;do hP();while(As!==0);if((ir&6)!==0)throw Error(r(327));if(p!==null){if(p===u.current)throw Error(r(177));if(C=p.lanes|p.childLanes,C|=Tj,Eu(u,y,C,N,Z,ce),u===Fr&&(Mi=Fr=null,Pi=0),l1=p,zg=u,bf=y,O4=C,L4=I,NK=_,(p.subtreeFlags&10256)!==0||(p.flags&10256)!==0?(u.callbackNode=null,u.callbackPriority=0,nCe(Wd,function(){return eee(),null})):(u.callbackNode=null,u.callbackPriority=0),_=(p.flags&13878)!==0,(p.subtreeFlags&13878)!==0||_){_=ne.T,ne.T=null,I=_e.p,_e.p=2,N=ir,ir|=4;try{WMe(u,p,y)}finally{ir=N,_e.p=I,ne.T=_}}As=1,JK(),XK(),QK()}}function JK(){if(As===1){As=0;var u=zg,p=l1,y=(p.flags&13878)!==0;if((p.subtreeFlags&13878)!==0||y){y=ne.T,ne.T=null;var _=_e.p;_e.p=2;var I=ir;ir|=4;try{kK(p,u);var C=Y4,N=Qe(u.containerInfo),Z=C.focusedElem,ce=C.selectionRange;if(N!==Z&&Z&&Z.ownerDocument&&We(Z.ownerDocument.documentElement,Z)){if(ce!==null&&yt(Z)){var Ee=ce.start,De=ce.end;if(De===void 0&&(De=Ee),"selectionStart"in Z)Z.selectionStart=Ee,Z.selectionEnd=Math.min(De,Z.value.length);else{var Be=Z.ownerDocument||document,ke=Be&&Be.defaultView||window;if(ke.getSelection){var Le=ke.getSelection(),$t=Z.textContent.length,Bt=Math.min(ce.start,$t),Er=ce.end===void 0?Bt:Math.min(ce.end,$t);!Le.extend&&Bt>Er&&(N=Er,Er=Bt,Bt=N);var xe=Je(Z,Bt),ye=Je(Z,Er);if(xe&&ye&&(Le.rangeCount!==1||Le.anchorNode!==xe.node||Le.anchorOffset!==xe.offset||Le.focusNode!==ye.node||Le.focusOffset!==ye.offset)){var Ce=Be.createRange();Ce.setStart(xe.node,xe.offset),Le.removeAllRanges(),Bt>Er?(Le.addRange(Ce),Le.extend(ye.node,ye.offset)):(Ce.setEnd(ye.node,ye.offset),Le.addRange(Ce))}}}}for(Be=[],Le=Z;Le=Le.parentNode;)Le.nodeType===1&&Be.push({element:Le,left:Le.scrollLeft,top:Le.scrollTop});for(typeof Z.focus=="function"&&Z.focus(),Z=0;Z<Be.length;Z++){var Ve=Be[Z];Ve.element.scrollLeft=Ve.left,Ve.element.scrollTop=Ve.top}}SP=!!Z4,Y4=Z4=null}finally{ir=I,_e.p=_,ne.T=y}}u.current=p,As=2}}function XK(){if(As===2){As=0;var u=zg,p=l1,y=(p.flags&8772)!==0;if((p.subtreeFlags&8772)!==0||y){y=ne.T,ne.T=null;var _=_e.p;_e.p=2;var I=ir;ir|=4;try{TK(u,p.alternate,p)}finally{ir=I,_e.p=_,ne.T=y}}As=3}}function QK(){if(As===4||As===3){As=0,A_();var u=zg,p=l1,y=bf,_=NK;(p.subtreeFlags&10256)!==0||(p.flags&10256)!==0?As=5:(As=0,l1=zg=null,KK(u,u.pendingLanes));var I=u.pendingLanes;if(I===0&&(Rg=null),Dl(y),p=p.stateNode,Gs&&typeof Gs.onCommitFiberRoot=="function")try{Gs.onCommitFiberRoot(Zd,p,void 0,(p.current.flags&128)===128)}catch{}if(_!==null){p=ne.T,I=_e.p,_e.p=2,ne.T=null;try{for(var C=u.onRecoverableError,N=0;N<_.length;N++){var Z=_[N];C(Z.value,{componentStack:Z.stack})}}finally{ne.T=p,_e.p=I}}(bf&3)!==0&&hP(),ah(u),I=u.pendingLanes,(y&261930)!==0&&(I&42)!==0?u===F4?qI++:(qI=0,F4=u):qI=0,HI(0)}}function KK(u,p){(u.pooledCacheLanes&=p)===0&&(p=u.pooledCache,p!=null&&(u.pooledCache=null,TI(p)))}function hP(){return JK(),XK(),QK(),eee()}function eee(){if(As!==5)return!1;var u=zg,p=O4;O4=0;var y=Dl(bf),_=ne.T,I=_e.p;try{_e.p=32>y?32:y,ne.T=null,y=L4,L4=null;var C=zg,N=bf;if(As=0,l1=zg=null,bf=0,(ir&6)!==0)throw Error(r(331));var Z=ir;if(ir|=4,FK(C.current),PK(C,C.current,N,y),ir=Z,HI(0,!1),Gs&&typeof Gs.onPostCommitFiberRoot=="function")try{Gs.onPostCommitFiberRoot(Zd,C)}catch{}return!0}finally{_e.p=I,ne.T=_,KK(u,p)}}function tee(u,p,y){p=Lc(y,p),p=p4(u.stateNode,p,2),u=kg(u,p,2),u!==null&&(Na(u,2),ah(u))}function _r(u,p,y){if(u.tag===3)tee(u,u,y);else for(;p!==null;){if(p.tag===3){tee(p,u,y);break}else if(p.tag===1){var _=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof _.componentDidCatch=="function"&&(Rg===null||!Rg.has(_))){u=Lc(y,u),y=iK(2),_=kg(p,y,2),_!==null&&(rK(y,_,p,u),Na(_,2),ah(_));break}}p=p.return}}function N4(u,p,y){var _=u.pingCache;if(_===null){_=u.pingCache=new JMe;var I=new Set;_.set(p,I)}else I=_.get(p),I===void 0&&(I=new Set,_.set(p,I));I.has(y)||(k4=!0,I.add(y),u=tCe.bind(null,u,p,y),p.then(u,u))}function tCe(u,p,y){var _=u.pingCache;_!==null&&_.delete(p),u.pingedLanes|=u.suspendedLanes&y,u.warmLanes&=~y,Fr===u&&(Pi&y)===y&&(An===4||An===3&&(Pi&62914560)===Pi&&300>cs()-aP?(ir&2)===0&&c1(u,0):A4|=y,o1===Pi&&(o1=0)),ah(u)}function iee(u,p){p===0&&(p=Ae()),u=ub(u,p),u!==null&&(Na(u,p),ah(u))}function iCe(u){var p=u.memoizedState,y=0;p!==null&&(y=p.retryLane),iee(u,y)}function rCe(u,p){var y=0;switch(u.tag){case 31:case 13:var _=u.stateNode,I=u.memoizedState;I!==null&&(y=I.retryLane);break;case 19:_=u.stateNode;break;case 22:_=u.stateNode._retryCache;break;default:throw Error(r(314))}_!==null&&_.delete(p),iee(u,y)}function nCe(u,p){return Mu(u,p)}var pP=null,d1=null,D4=!1,fP=!1,j4=!1,Dg=0;function ah(u){u!==d1&&u.next===null&&(d1===null?pP=d1=u:d1=d1.next=u),fP=!0,D4||(D4=!0,aCe())}function HI(u,p){if(!j4&&fP){j4=!0;do for(var y=!1,_=pP;_!==null;){if(u!==0){var I=_.pendingLanes;if(I===0)var C=0;else{var N=_.suspendedLanes,Z=_.pingedLanes;C=(1<<31-Ws(42|u)+1)-1,C&=I&~(N&~Z),C=C&201326741?C&201326741|1:C?C|2:0}C!==0&&(y=!0,aee(_,C))}else C=Pi,C=Jd(_,_===Fr?C:0,_.cancelPendingCommit!==null||_.timeoutHandle!==-1),(C&3)===0||Cu(_,C)||(y=!0,aee(_,C));_=_.next}while(y);j4=!1}}function sCe(){ree()}function ree(){fP=D4=!1;var u=0;Dg!==0&&gCe()&&(u=Dg);for(var p=cs(),y=null,_=pP;_!==null;){var I=_.next,C=nee(_,p);C===0?(_.next=null,y===null?pP=I:y.next=I,I===null&&(d1=y)):(y=_,(u!==0||(C&3)!==0)&&(fP=!0)),_=I}As!==0&&As!==5||HI(u),Dg!==0&&(Dg=0)}function nee(u,p){for(var y=u.suspendedLanes,_=u.pingedLanes,I=u.expirationTimes,C=u.pendingLanes&-62914561;0<C;){var N=31-Ws(C),Z=1<<N,ce=I[N];ce===-1?((Z&y)===0||(Z&_)!==0)&&(I[N]=F_(Z,p)):ce<=p&&(u.expiredLanes|=Z),C&=~Z}if(p=Fr,y=Pi,y=Jd(u,u===p?y:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),_=u.callbackNode,y===0||u===p&&(wr===2||wr===9)||u.cancelPendingCommit!==null)return _!==null&&_!==null&&pa(_),u.callbackNode=null,u.callbackPriority=0;if((y&3)===0||Cu(u,y)){if(p=y&-y,p===u.callbackPriority)return p;switch(_!==null&&pa(_),Dl(y)){case 2:case 8:y=O_;break;case 32:y=Wd;break;case 268435456:y=pg;break;default:y=Wd}return _=see.bind(null,u),y=Mu(y,_),u.callbackPriority=p,u.callbackNode=y,p}return _!==null&&_!==null&&pa(_),u.callbackPriority=2,u.callbackNode=null,2}function see(u,p){if(As!==0&&As!==5)return u.callbackNode=null,u.callbackPriority=0,null;var y=u.callbackNode;if(hP()&&u.callbackNode!==y)return null;var _=Pi;return _=Jd(u,u===Fr?_:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),_===0?null:(jK(u,_,p),nee(u,cs()),u.callbackNode!=null&&u.callbackNode===y?see.bind(null,u):null)}function aee(u,p){if(hP())return null;jK(u,p,!0)}function aCe(){vCe(function(){(ir&6)!==0?Mu(Gd,sCe):ree()})}function V4(){if(Dg===0){var u=J_;u===0&&(u=Nl,Nl<<=1,(Nl&261888)===0&&(Nl=256)),Dg=u}return Dg}function oee(u){return u==null||typeof u=="symbol"||typeof u=="boolean"?null:typeof u=="function"?u:Kv(""+u)}function lee(u,p){var y=p.ownerDocument.createElement("input");return y.name=p.name,y.value=p.value,u.id&&y.setAttribute("form",u.id),p.parentNode.insertBefore(y,p),u=new FormData(u),y.parentNode.removeChild(y),u}function oCe(u,p,y,_,I){if(p==="submit"&&y&&y.stateNode===I){var C=oee((I[jr]||null).action),N=_.submitter;N&&(p=(p=N[jr]||null)?oee(p.formAction):N.getAttribute("formAction"),p!==null&&(C=p,N=null));var Z=new rb("action","action",null,_,I);u.push({event:Z,listeners:[{instance:null,listener:function(){if(_.defaultPrevented){if(Dg!==0){var ce=N?lee(I,N):new FormData(I);o4(y,{pending:!0,data:ce,method:I.method,action:C},null,ce)}}else typeof C=="function"&&(Z.preventDefault(),ce=N?lee(I,N):new FormData(I),o4(y,{pending:!0,data:ce,method:I.method,action:C},C,ce))},currentTarget:I}]})}}for(var U4=0;U4<Sj.length;U4++){var B4=Sj[U4],lCe=B4.toLowerCase(),cCe=B4[0].toUpperCase()+B4.slice(1);Nu(lCe,"on"+cCe)}Nu(cb,"onAnimationEnd"),Nu($g,"onAnimationIteration"),Nu(VX,"onAnimationStart"),Nu("dblclick","onDoubleClick"),Nu("focusin","onFocus"),Nu("focusout","onBlur"),Nu(TMe,"onTransitionRun"),Nu(IMe,"onTransitionStart"),Nu(MMe,"onTransitionCancel"),Nu(UX,"onTransitionEnd"),Pu("onMouseEnter",["mouseout","mouseover"]),Pu("onMouseLeave",["mouseout","mouseover"]),Pu("onPointerEnter",["pointerout","pointerover"]),Pu("onPointerLeave",["pointerout","pointerover"]),Yo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Yo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Yo("onBeforeInput",["compositionend","keypress","textInput","paste"]),Yo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Yo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Yo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var GI="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uCe=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(GI));function cee(u,p){p=(p&4)!==0;for(var y=0;y<u.length;y++){var _=u[y],I=_.event;_=_.listeners;e:{var C=void 0;if(p)for(var N=_.length-1;0<=N;N--){var Z=_[N],ce=Z.instance,Ee=Z.currentTarget;if(Z=Z.listener,ce!==C&&I.isPropagationStopped())break e;C=Z,I.currentTarget=Ee;try{C(I)}catch(De){EA(De)}I.currentTarget=null,C=ce}else for(N=0;N<_.length;N++){if(Z=_[N],ce=Z.instance,Ee=Z.currentTarget,Z=Z.listener,ce!==C&&I.isPropagationStopped())break e;C=Z,I.currentTarget=Ee;try{C(I)}catch(De){EA(De)}I.currentTarget=null,C=ce}}}}function Ci(u,p){var y=p[Ut];y===void 0&&(y=p[Ut]=new Set);var _=u+"__bubble";y.has(_)||(uee(p,u,2,!1),y.add(_))}function q4(u,p,y){var _=0;p&&(_|=4),uee(y,u,_,p)}var mP="_reactListening"+Math.random().toString(36).slice(2);function H4(u){if(!u[mP]){u[mP]=!0,Yv.forEach(function(y){y!=="selectionchange"&&(uCe.has(y)||q4(y,!1,u),q4(y,!0,u))});var p=u.nodeType===9?u:u.ownerDocument;p===null||p[mP]||(p[mP]=!0,q4("selectionchange",!1,p))}}function uee(u,p,y,_){switch(Dee(p)){case 2:var I=NCe;break;case 8:I=DCe;break;default:I=aV}y=I.bind(null,p,y,u),I=void 0,!j_||p!=="touchstart"&&p!=="touchmove"&&p!=="wheel"||(I=!0),_?I!==void 0?u.addEventListener(p,y,{capture:!0,passive:I}):u.addEventListener(p,y,!0):I!==void 0?u.addEventListener(p,y,{passive:I}):u.addEventListener(p,y,!1)}function G4(u,p,y,_,I){var C=_;if((p&1)===0&&(p&2)===0&&_!==null)e:for(;;){if(_===null)return;var N=_.tag;if(N===3||N===4){var Z=_.stateNode.containerInfo;if(Z===I)break;if(N===4)for(N=_.return;N!==null;){var ce=N.tag;if((ce===3||ce===4)&&N.stateNode.containerInfo===I)return;N=N.return}for(;Z!==null;){if(N=Qd(Z),N===null)return;if(ce=N.tag,ce===5||ce===6||ce===26||ce===27){_=C=N;continue e}Z=Z.parentNode}}_=_.return}mI(function(){var Ee=C,De=pI(y),Be=[];e:{var ke=BX.get(u);if(ke!==void 0){var Le=rb,$t=u;switch(u){case"keypress":if(bg(y)===0)break e;case"keydown":case"keyup":Le=_A;break;case"focusin":$t="focus",Le=yI;break;case"focusout":$t="blur",Le=yI;break;case"beforeblur":case"afterblur":Le=yI;break;case"click":if(y.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Le=gA;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Le=vA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Le=fj;break;case cb:case $g:case VX:Le=lj;break;case UX:Le=gj;break;case"scroll":case"scrollend":Le=aj;break;case"wheel":Le=vj;break;case"copy":case"cut":case"paste":Le=uj;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Le=vI;break;case"toggle":case"beforetoggle":Le=bI}var Bt=(p&4)!==0,Er=!Bt&&(u==="scroll"||u==="scrollend"),xe=Bt?ke!==null?ke+"Capture":null:ke;Bt=[];for(var ye=Ee,Ce;ye!==null;){var Ve=ye;if(Ce=Ve.stateNode,Ve=Ve.tag,Ve!==5&&Ve!==26&&Ve!==27||Ce===null||xe===null||(Ve=yg(ye,xe),Ve!=null&&Bt.push(WI(ye,Ve,Ce))),Er)break;ye=ye.return}0<Bt.length&&(ke=new Le(ke,$t,null,y,De),Be.push({event:ke,listeners:Bt}))}}if((p&7)===0){e:{if(ke=u==="mouseover"||u==="pointerover",Le=u==="mouseout"||u==="pointerout",ke&&y!==eb&&($t=y.relatedTarget||y.fromElement)&&(Qd($t)||$t[At]))break e;if((Le||ke)&&(ke=De.window===De?De:(ke=De.ownerDocument)?ke.defaultView||ke.parentWindow:window,Le?($t=y.relatedTarget||y.toElement,Le=Ee,$t=$t?Qd($t):null,$t!==null&&(Er=s($t),Bt=$t.tag,$t!==Er||Bt!==5&&Bt!==27&&Bt!==6)&&($t=null)):(Le=null,$t=Ee),Le!==$t)){if(Bt=gA,Ve="onMouseLeave",xe="onMouseEnter",ye="mouse",(u==="pointerout"||u==="pointerover")&&(Bt=vI,Ve="onPointerLeave",xe="onPointerEnter",ye="pointer"),Er=Le==null?ke:Vr(Le),Ce=$t==null?ke:Vr($t),ke=new Bt(Ve,ye+"leave",Le,y,De),ke.target=Er,ke.relatedTarget=Ce,Ve=null,Qd(De)===Ee&&(Bt=new Bt(xe,ye+"enter",$t,y,De),Bt.target=Ce,Bt.relatedTarget=Er,Ve=Bt),Er=Ve,Le&&$t)t:{for(Bt=dCe,xe=Le,ye=$t,Ce=0,Ve=xe;Ve;Ve=Bt(Ve))Ce++;Ve=0;for(var zt=ye;zt;zt=Bt(zt))Ve++;for(;0<Ce-Ve;)xe=Bt(xe),Ce--;for(;0<Ve-Ce;)ye=Bt(ye),Ve--;for(;Ce--;){if(xe===ye||ye!==null&&xe===ye.alternate){Bt=xe;break t}xe=Bt(xe),ye=Bt(ye)}Bt=null}else Bt=null;Le!==null&&dee(Be,ke,Le,Bt,!1),$t!==null&&Er!==null&&dee(Be,Er,$t,Bt,!0)}}e:{if(ke=Ee?Vr(Ee):window,Le=ke.nodeName&&ke.nodeName.toLowerCase(),Le==="select"||Le==="input"&&ke.type==="file")var Gi=MA;else if(TA(ke))if(CA)Gi=K;else{Gi=W;var Mt=j}else Le=ke.nodeName,!Le||Le.toLowerCase()!=="input"||ke.type!=="checkbox"&&ke.type!=="radio"?Ee&&hI(Ee.elementType)&&(Gi=MA):Gi=Y;if(Gi&&(Gi=Gi(u,Ee))){IA(Be,Gi,y,De);break e}Mt&&Mt(u,ke,Ee),u==="focusout"&&Ee&&ke.type==="number"&&Ee.memoizedProps.value!=null&&Qp(ke,"number",ke.value)}switch(Mt=Ee?Vr(Ee):window,u){case"focusin":(TA(Mt)||Mt.contentEditable==="true")&&(Tt=Mt,ti=Ee,di=null);break;case"focusout":di=ti=Tt=null;break;case"mousedown":Vt=!0;break;case"contextmenu":case"mouseup":case"dragend":Vt=!1,ri(Be,y,De);break;case"selectionchange":if(ht)break;case"keydown":case"keyup":ri(Be,y,De)}var gi;if(_g)e:{switch(u){case"compositionstart":var Oi="onCompositionStart";break e;case"compositionend":Oi="onCompositionEnd";break e;case"compositionupdate":Oi="onCompositionUpdate";break e}Oi=void 0}else sf?xg(u,y)&&(Oi="onCompositionEnd"):u==="keydown"&&y.keyCode===229&&(Oi="onCompositionStart");Oi&&($A&&y.locale!=="ko"&&(sf||Oi!=="onCompositionStart"?Oi==="onCompositionEnd"&&sf&&(gi=fA()):(th=De,ef="value"in th?th.value:th.textContent,sf=!0)),Mt=gP(Ee,Oi),0<Mt.length&&(Oi=new bA(Oi,u,null,y,De),Be.push({event:Oi,listeners:Mt}),gi?Oi.data=gi:(gi=zu(y),gi!==null&&(Oi.data=gi)))),(gi=wI?xI(u,y):_j(u,y))&&(Oi=gP(Ee,"onBeforeInput"),0<Oi.length&&(Mt=new bA("onBeforeInput","beforeinput",null,y,De),Be.push({event:Mt,listeners:Oi}),Mt.data=gi)),oCe(Be,u,Ee,y,De)}cee(Be,p)})}function WI(u,p,y){return{instance:u,listener:p,currentTarget:y}}function gP(u,p){for(var y=p+"Capture",_=[];u!==null;){var I=u,C=I.stateNode;if(I=I.tag,I!==5&&I!==26&&I!==27||C===null||(I=yg(u,y),I!=null&&_.unshift(WI(u,I,C)),I=yg(u,p),I!=null&&_.push(WI(u,I,C))),u.tag===3)return _;u=u.return}return[]}function dCe(u){if(u===null)return null;do u=u.return;while(u&&u.tag!==5&&u.tag!==27);return u||null}function dee(u,p,y,_,I){for(var C=p._reactName,N=[];y!==null&&y!==_;){var Z=y,ce=Z.alternate,Ee=Z.stateNode;if(Z=Z.tag,ce!==null&&ce===_)break;Z!==5&&Z!==26&&Z!==27||Ee===null||(ce=Ee,I?(Ee=yg(y,C),Ee!=null&&N.unshift(WI(y,Ee,ce))):I||(Ee=yg(y,C),Ee!=null&&N.push(WI(y,Ee,ce)))),y=y.return}N.length!==0&&u.push({event:p,listeners:N})}var hCe=/\r\n?/g,pCe=/\u0000|\uFFFD/g;function hee(u){return(typeof u=="string"?u:""+u).replace(hCe,`
`).replace(pCe,"")}function pee(u,p){return p=hee(p),hee(u)===p}function Cr(u,p,y,_,I,C){switch(y){case"children":typeof _=="string"?p==="body"||p==="textarea"&&_===""||eh(u,_):(typeof _=="number"||typeof _=="bigint")&&p!=="body"&&eh(u,""+_);break;case"className":Ou(u,"class",_);break;case"tabIndex":Ou(u,"tabindex",_);break;case"dir":case"role":case"viewBox":case"width":case"height":Ou(u,y,_);break;case"style":dI(u,_,C);break;case"data":if(p!=="object"){Ou(u,"data",_);break}case"src":case"href":if(_===""&&(p!=="a"||y!=="href")){u.removeAttribute(y);break}if(_==null||typeof _=="function"||typeof _=="symbol"||typeof _=="boolean"){u.removeAttribute(y);break}_=Kv(""+_),u.setAttribute(y,_);break;case"action":case"formAction":if(typeof _=="function"){u.setAttribute(y,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof C=="function"&&(y==="formAction"?(p!=="input"&&Cr(u,p,"name",I.name,I,null),Cr(u,p,"formEncType",I.formEncType,I,null),Cr(u,p,"formMethod",I.formMethod,I,null),Cr(u,p,"formTarget",I.formTarget,I,null)):(Cr(u,p,"encType",I.encType,I,null),Cr(u,p,"method",I.method,I,null),Cr(u,p,"target",I.target,I,null)));if(_==null||typeof _=="symbol"||typeof _=="boolean"){u.removeAttribute(y);break}_=Kv(""+_),u.setAttribute(y,_);break;case"onClick":_!=null&&(u.onclick=Fu);break;case"onScroll":_!=null&&Ci("scroll",u);break;case"onScrollEnd":_!=null&&Ci("scrollend",u);break;case"dangerouslySetInnerHTML":if(_!=null){if(typeof _!="object"||!("__html"in _))throw Error(r(61));if(y=_.__html,y!=null){if(I.children!=null)throw Error(r(60));u.innerHTML=y}}break;case"multiple":u.multiple=_&&typeof _!="function"&&typeof _!="symbol";break;case"muted":u.muted=_&&typeof _!="function"&&typeof _!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(_==null||typeof _=="function"||typeof _=="boolean"||typeof _=="symbol"){u.removeAttribute("xlink:href");break}y=Kv(""+_),u.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",y);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":_!=null&&typeof _!="function"&&typeof _!="symbol"?u.setAttribute(y,""+_):u.removeAttribute(y);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":_&&typeof _!="function"&&typeof _!="symbol"?u.setAttribute(y,""):u.removeAttribute(y);break;case"capture":case"download":_===!0?u.setAttribute(y,""):_!==!1&&_!=null&&typeof _!="function"&&typeof _!="symbol"?u.setAttribute(y,_):u.removeAttribute(y);break;case"cols":case"rows":case"size":case"span":_!=null&&typeof _!="function"&&typeof _!="symbol"&&!isNaN(_)&&1<=_?u.setAttribute(y,_):u.removeAttribute(y);break;case"rowSpan":case"start":_==null||typeof _=="function"||typeof _=="symbol"||isNaN(_)?u.removeAttribute(y):u.setAttribute(y,_);break;case"popover":Ci("beforetoggle",u),Ci("toggle",u),Kd(u,"popover",_);break;case"xlinkActuate":te(u,"http://www.w3.org/1999/xlink","xlink:actuate",_);break;case"xlinkArcrole":te(u,"http://www.w3.org/1999/xlink","xlink:arcrole",_);break;case"xlinkRole":te(u,"http://www.w3.org/1999/xlink","xlink:role",_);break;case"xlinkShow":te(u,"http://www.w3.org/1999/xlink","xlink:show",_);break;case"xlinkTitle":te(u,"http://www.w3.org/1999/xlink","xlink:title",_);break;case"xlinkType":te(u,"http://www.w3.org/1999/xlink","xlink:type",_);break;case"xmlBase":te(u,"http://www.w3.org/XML/1998/namespace","xml:base",_);break;case"xmlLang":te(u,"http://www.w3.org/XML/1998/namespace","xml:lang",_);break;case"xmlSpace":te(u,"http://www.w3.org/XML/1998/namespace","xml:space",_);break;case"is":Kd(u,"is",_);break;case"innerText":case"textContent":break;default:(!(2<y.length)||y[0]!=="o"&&y[0]!=="O"||y[1]!=="n"&&y[1]!=="N")&&(y=sj.get(y)||y,Kd(u,y,_))}}function W4(u,p,y,_,I,C){switch(y){case"style":dI(u,_,C);break;case"dangerouslySetInnerHTML":if(_!=null){if(typeof _!="object"||!("__html"in _))throw Error(r(61));if(y=_.__html,y!=null){if(I.children!=null)throw Error(r(60));u.innerHTML=y}}break;case"children":typeof _=="string"?eh(u,_):(typeof _=="number"||typeof _=="bigint")&&eh(u,""+_);break;case"onScroll":_!=null&&Ci("scroll",u);break;case"onScrollEnd":_!=null&&Ci("scrollend",u);break;case"onClick":_!=null&&(u.onclick=Fu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Jv.hasOwnProperty(y))e:{if(y[0]==="o"&&y[1]==="n"&&(I=y.endsWith("Capture"),p=y.slice(2,I?y.length-7:void 0),C=u[jr]||null,C=C!=null?C[y]:null,typeof C=="function"&&u.removeEventListener(p,C,I),typeof _=="function")){typeof C!="function"&&C!==null&&(y in u?u[y]=null:u.hasAttribute(y)&&u.removeAttribute(y)),u.addEventListener(p,_,I);break e}y in u?u[y]=_:_===!0?u.setAttribute(y,""):Kd(u,y,_)}}}function wa(u,p,y){switch(p){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ci("error",u),Ci("load",u);var _=!1,I=!1,C;for(C in y)if(y.hasOwnProperty(C)){var N=y[C];if(N!=null)switch(C){case"src":_=!0;break;case"srcSet":I=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,p));default:Cr(u,p,C,N,y,null)}}I&&Cr(u,p,"srcSet",y.srcSet,y,null),_&&Cr(u,p,"src",y.src,y,null);return;case"input":Ci("invalid",u);var Z=C=N=I=null,ce=null,Ee=null;for(_ in y)if(y.hasOwnProperty(_)){var De=y[_];if(De!=null)switch(_){case"name":I=De;break;case"type":N=De;break;case"checked":ce=De;break;case"defaultChecked":Ee=De;break;case"value":C=De;break;case"defaultValue":Z=De;break;case"children":case"dangerouslySetInnerHTML":if(De!=null)throw Error(r(137,p));break;default:Cr(u,p,_,De,y,null)}}Lu(u,C,Z,ce,Ee,N,I,!1);return;case"select":Ci("invalid",u),_=N=C=null;for(I in y)if(y.hasOwnProperty(I)&&(Z=y[I],Z!=null))switch(I){case"value":C=Z;break;case"defaultValue":N=Z;break;case"multiple":_=Z;default:Cr(u,p,I,Z,y,null)}p=C,y=N,u.multiple=!!_,p!=null?mg(u,!!_,p,!1):y!=null&&mg(u,!!_,y,!0);return;case"textarea":Ci("invalid",u),C=I=_=null;for(N in y)if(y.hasOwnProperty(N)&&(Z=y[N],Z!=null))switch(N){case"value":_=Z;break;case"defaultValue":I=Z;break;case"children":C=Z;break;case"dangerouslySetInnerHTML":if(Z!=null)throw Error(r(91));break;default:Cr(u,p,N,Z,y,null)}uI(u,_,I,C);return;case"option":for(ce in y)if(y.hasOwnProperty(ce)&&(_=y[ce],_!=null))switch(ce){case"selected":u.selected=_&&typeof _!="function"&&typeof _!="symbol";break;default:Cr(u,p,ce,_,y,null)}return;case"dialog":Ci("beforetoggle",u),Ci("toggle",u),Ci("cancel",u),Ci("close",u);break;case"iframe":case"object":Ci("load",u);break;case"video":case"audio":for(_=0;_<GI.length;_++)Ci(GI[_],u);break;case"image":Ci("error",u),Ci("load",u);break;case"details":Ci("toggle",u);break;case"embed":case"source":case"link":Ci("error",u),Ci("load",u);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ee in y)if(y.hasOwnProperty(Ee)&&(_=y[Ee],_!=null))switch(Ee){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,p));default:Cr(u,p,Ee,_,y,null)}return;default:if(hI(p)){for(De in y)y.hasOwnProperty(De)&&(_=y[De],_!==void 0&&W4(u,p,De,_,y,void 0));return}}for(Z in y)y.hasOwnProperty(Z)&&(_=y[Z],_!=null&&Cr(u,p,Z,_,y,null))}function fCe(u,p,y,_){switch(p){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var I=null,C=null,N=null,Z=null,ce=null,Ee=null,De=null;for(Le in y){var Be=y[Le];if(y.hasOwnProperty(Le)&&Be!=null)switch(Le){case"checked":break;case"value":break;case"defaultValue":ce=Be;default:_.hasOwnProperty(Le)||Cr(u,p,Le,null,_,Be)}}for(var ke in _){var Le=_[ke];if(Be=y[ke],_.hasOwnProperty(ke)&&(Le!=null||Be!=null))switch(ke){case"type":C=Le;break;case"name":I=Le;break;case"checked":Ee=Le;break;case"defaultChecked":De=Le;break;case"value":N=Le;break;case"defaultValue":Z=Le;break;case"children":case"dangerouslySetInnerHTML":if(Le!=null)throw Error(r(137,p));break;default:Le!==Be&&Cr(u,p,ke,Le,_,Be)}}fg(u,N,Z,ce,Ee,De,C,I);return;case"select":Le=N=Z=ke=null;for(C in y)if(ce=y[C],y.hasOwnProperty(C)&&ce!=null)switch(C){case"value":break;case"multiple":Le=ce;default:_.hasOwnProperty(C)||Cr(u,p,C,null,_,ce)}for(I in _)if(C=_[I],ce=y[I],_.hasOwnProperty(I)&&(C!=null||ce!=null))switch(I){case"value":ke=C;break;case"defaultValue":Z=C;break;case"multiple":N=C;default:C!==ce&&Cr(u,p,I,C,_,ce)}p=Z,y=N,_=Le,ke!=null?mg(u,!!y,ke,!1):!!_!=!!y&&(p!=null?mg(u,!!y,p,!0):mg(u,!!y,y?[]:"",!1));return;case"textarea":Le=ke=null;for(Z in y)if(I=y[Z],y.hasOwnProperty(Z)&&I!=null&&!_.hasOwnProperty(Z))switch(Z){case"value":break;case"children":break;default:Cr(u,p,Z,null,_,I)}for(N in _)if(I=_[N],C=y[N],_.hasOwnProperty(N)&&(I!=null||C!=null))switch(N){case"value":ke=I;break;case"defaultValue":Le=I;break;case"children":break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(r(91));break;default:I!==C&&Cr(u,p,N,I,_,C)}cI(u,ke,Le);return;case"option":for(var $t in y)if(ke=y[$t],y.hasOwnProperty($t)&&ke!=null&&!_.hasOwnProperty($t))switch($t){case"selected":u.selected=!1;break;default:Cr(u,p,$t,null,_,ke)}for(ce in _)if(ke=_[ce],Le=y[ce],_.hasOwnProperty(ce)&&ke!==Le&&(ke!=null||Le!=null))switch(ce){case"selected":u.selected=ke&&typeof ke!="function"&&typeof ke!="symbol";break;default:Cr(u,p,ce,ke,_,Le)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Bt in y)ke=y[Bt],y.hasOwnProperty(Bt)&&ke!=null&&!_.hasOwnProperty(Bt)&&Cr(u,p,Bt,null,_,ke);for(Ee in _)if(ke=_[Ee],Le=y[Ee],_.hasOwnProperty(Ee)&&ke!==Le&&(ke!=null||Le!=null))switch(Ee){case"children":case"dangerouslySetInnerHTML":if(ke!=null)throw Error(r(137,p));break;default:Cr(u,p,Ee,ke,_,Le)}return;default:if(hI(p)){for(var Er in y)ke=y[Er],y.hasOwnProperty(Er)&&ke!==void 0&&!_.hasOwnProperty(Er)&&W4(u,p,Er,void 0,_,ke);for(De in _)ke=_[De],Le=y[De],!_.hasOwnProperty(De)||ke===Le||ke===void 0&&Le===void 0||W4(u,p,De,ke,_,Le);return}}for(var xe in y)ke=y[xe],y.hasOwnProperty(xe)&&ke!=null&&!_.hasOwnProperty(xe)&&Cr(u,p,xe,null,_,ke);for(Be in _)ke=_[Be],Le=y[Be],!_.hasOwnProperty(Be)||ke===Le||ke==null&&Le==null||Cr(u,p,Be,ke,_,Le)}function fee(u){switch(u){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function mCe(){if(typeof performance.getEntriesByType=="function"){for(var u=0,p=0,y=performance.getEntriesByType("resource"),_=0;_<y.length;_++){var I=y[_],C=I.transferSize,N=I.initiatorType,Z=I.duration;if(C&&Z&&fee(N)){for(N=0,Z=I.responseEnd,_+=1;_<y.length;_++){var ce=y[_],Ee=ce.startTime;if(Ee>Z)break;var De=ce.transferSize,Be=ce.initiatorType;De&&fee(Be)&&(ce=ce.responseEnd,N+=De*(ce<Z?1:(Z-Ee)/(ce-Ee)))}if(--_,p+=8*(C+N)/(I.duration/1e3),u++,10<u)break}}if(0<u)return p/u/1e6}return navigator.connection&&(u=navigator.connection.downlink,typeof u=="number")?u:5}var Z4=null,Y4=null;function yP(u){return u.nodeType===9?u:u.ownerDocument}function mee(u){switch(u){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function gee(u,p){if(u===0)switch(p){case"svg":return 1;case"math":return 2;default:return 0}return u===1&&p==="foreignObject"?0:u}function J4(u,p){return u==="textarea"||u==="noscript"||typeof p.children=="string"||typeof p.children=="number"||typeof p.children=="bigint"||typeof p.dangerouslySetInnerHTML=="object"&&p.dangerouslySetInnerHTML!==null&&p.dangerouslySetInnerHTML.__html!=null}var X4=null;function gCe(){var u=window.event;return u&&u.type==="popstate"?u===X4?!1:(X4=u,!0):(X4=null,!1)}var yee=typeof setTimeout=="function"?setTimeout:void 0,yCe=typeof clearTimeout=="function"?clearTimeout:void 0,vee=typeof Promise=="function"?Promise:void 0,vCe=typeof queueMicrotask=="function"?queueMicrotask:typeof vee<"u"?function(u){return vee.resolve(null).then(u).catch(bCe)}:yee;function bCe(u){setTimeout(function(){throw u})}function jg(u){return u==="head"}function bee(u,p){var y=p,_=0;do{var I=y.nextSibling;if(u.removeChild(y),I&&I.nodeType===8)if(y=I.data,y==="/$"||y==="/&"){if(_===0){u.removeChild(I),m1(p);return}_--}else if(y==="$"||y==="$?"||y==="$~"||y==="$!"||y==="&")_++;else if(y==="html")ZI(u.ownerDocument.documentElement);else if(y==="head"){y=u.ownerDocument.head,ZI(y);for(var C=y.firstChild;C;){var N=C.nextSibling,Z=C.nodeName;C[jl]||Z==="SCRIPT"||Z==="STYLE"||Z==="LINK"&&C.rel.toLowerCase()==="stylesheet"||y.removeChild(C),C=N}}else y==="body"&&ZI(u.ownerDocument.body);y=I}while(y);m1(p)}function wee(u,p){var y=u;u=0;do{var _=y.nextSibling;if(y.nodeType===1?p?(y._stashedDisplay=y.style.display,y.style.display="none"):(y.style.display=y._stashedDisplay||"",y.getAttribute("style")===""&&y.removeAttribute("style")):y.nodeType===3&&(p?(y._stashedText=y.nodeValue,y.nodeValue=""):y.nodeValue=y._stashedText||""),_&&_.nodeType===8)if(y=_.data,y==="/$"){if(u===0)break;u--}else y!=="$"&&y!=="$?"&&y!=="$~"&&y!=="$!"||u++;y=_}while(y)}function Q4(u){var p=u.firstChild;for(p&&p.nodeType===10&&(p=p.nextSibling);p;){var y=p;switch(p=p.nextSibling,y.nodeName){case"HTML":case"HEAD":case"BODY":Q4(y),ku(y);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(y.rel.toLowerCase()==="stylesheet")continue}u.removeChild(y)}}function wCe(u,p,y,_){for(;u.nodeType===1;){var I=y;if(u.nodeName.toLowerCase()!==p.toLowerCase()){if(!_&&(u.nodeName!=="INPUT"||u.type!=="hidden"))break}else if(_){if(!u[jl])switch(p){case"meta":if(!u.hasAttribute("itemprop"))break;return u;case"link":if(C=u.getAttribute("rel"),C==="stylesheet"&&u.hasAttribute("data-precedence"))break;if(C!==I.rel||u.getAttribute("href")!==(I.href==null||I.href===""?null:I.href)||u.getAttribute("crossorigin")!==(I.crossOrigin==null?null:I.crossOrigin)||u.getAttribute("title")!==(I.title==null?null:I.title))break;return u;case"style":if(u.hasAttribute("data-precedence"))break;return u;case"script":if(C=u.getAttribute("src"),(C!==(I.src==null?null:I.src)||u.getAttribute("type")!==(I.type==null?null:I.type)||u.getAttribute("crossorigin")!==(I.crossOrigin==null?null:I.crossOrigin))&&C&&u.hasAttribute("async")&&!u.hasAttribute("itemprop"))break;return u;default:return u}}else if(p==="input"&&u.type==="hidden"){var C=I.name==null?null:""+I.name;if(I.type==="hidden"&&u.getAttribute("name")===C)return u}else return u;if(u=Dc(u.nextSibling),u===null)break}return null}function _Ce(u,p,y){if(p==="")return null;for(;u.nodeType!==3;)if((u.nodeType!==1||u.nodeName!=="INPUT"||u.type!=="hidden")&&!y||(u=Dc(u.nextSibling),u===null))return null;return u}function _ee(u,p){for(;u.nodeType!==8;)if((u.nodeType!==1||u.nodeName!=="INPUT"||u.type!=="hidden")&&!p||(u=Dc(u.nextSibling),u===null))return null;return u}function K4(u){return u.data==="$?"||u.data==="$~"}function eV(u){return u.data==="$!"||u.data==="$?"&&u.ownerDocument.readyState!=="loading"}function xCe(u,p){var y=u.ownerDocument;if(u.data==="$~")u._reactRetry=p;else if(u.data!=="$?"||y.readyState!=="loading")p();else{var _=function(){p(),y.removeEventListener("DOMContentLoaded",_)};y.addEventListener("DOMContentLoaded",_),u._reactRetry=_}}function Dc(u){for(;u!=null;u=u.nextSibling){var p=u.nodeType;if(p===1||p===3)break;if(p===8){if(p=u.data,p==="$"||p==="$!"||p==="$?"||p==="$~"||p==="&"||p==="F!"||p==="F")break;if(p==="/$"||p==="/&")return null}}return u}var tV=null;function xee(u){u=u.nextSibling;for(var p=0;u;){if(u.nodeType===8){var y=u.data;if(y==="/$"||y==="/&"){if(p===0)return Dc(u.nextSibling);p--}else y!=="$"&&y!=="$!"&&y!=="$?"&&y!=="$~"&&y!=="&"||p++}u=u.nextSibling}return null}function $ee(u){u=u.previousSibling;for(var p=0;u;){if(u.nodeType===8){var y=u.data;if(y==="$"||y==="$!"||y==="$?"||y==="$~"||y==="&"){if(p===0)return u;p--}else y!=="/$"&&y!=="/&"||p++}u=u.previousSibling}return null}function See(u,p,y){switch(p=yP(y),u){case"html":if(u=p.documentElement,!u)throw Error(r(452));return u;case"head":if(u=p.head,!u)throw Error(r(453));return u;case"body":if(u=p.body,!u)throw Error(r(454));return u;default:throw Error(r(451))}}function ZI(u){for(var p=u.attributes;p.length;)u.removeAttributeNode(p[0]);ku(u)}var jc=new Map,Tee=new Set;function vP(u){return typeof u.getRootNode=="function"?u.getRootNode():u.nodeType===9?u:u.ownerDocument}var wf=_e.d;_e.d={f:$Ce,r:SCe,D:TCe,C:ICe,L:MCe,m:CCe,X:kCe,S:ECe,M:ACe};function $Ce(){var u=wf.f(),p=cP();return u||p}function SCe(u){var p=Ac(u);p!==null&&p.tag===5&&p.type==="form"?UQ(p):wf.r(u)}var h1=typeof document>"u"?null:document;function Iee(u,p,y){var _=h1;if(_&&typeof p=="string"&&p){var I=ja(p);I='link[rel="'+u+'"][href="'+I+'"]',typeof y=="string"&&(I+='[crossorigin="'+y+'"]'),Tee.has(I)||(Tee.add(I),u={rel:u,crossOrigin:y,href:p},_.querySelector(I)===null&&(p=_.createElement("link"),wa(p,"link",u),hn(p),_.head.appendChild(p)))}}function TCe(u){wf.D(u),Iee("dns-prefetch",u,null)}function ICe(u,p){wf.C(u,p),Iee("preconnect",u,p)}function MCe(u,p,y){wf.L(u,p,y);var _=h1;if(_&&u&&p){var I='link[rel="preload"][as="'+ja(p)+'"]';p==="image"&&y&&y.imageSrcSet?(I+='[imagesrcset="'+ja(y.imageSrcSet)+'"]',typeof y.imageSizes=="string"&&(I+='[imagesizes="'+ja(y.imageSizes)+'"]')):I+='[href="'+ja(u)+'"]';var C=I;switch(p){case"style":C=p1(u);break;case"script":C=f1(u)}jc.has(C)||(u=m({rel:"preload",href:p==="image"&&y&&y.imageSrcSet?void 0:u,as:p},y),jc.set(C,u),_.querySelector(I)!==null||p==="style"&&_.querySelector(YI(C))||p==="script"&&_.querySelector(JI(C))||(p=_.createElement("link"),wa(p,"link",u),hn(p),_.head.appendChild(p)))}}function CCe(u,p){wf.m(u,p);var y=h1;if(y&&u){var _=p&&typeof p.as=="string"?p.as:"script",I='link[rel="modulepreload"][as="'+ja(_)+'"][href="'+ja(u)+'"]',C=I;switch(_){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":C=f1(u)}if(!jc.has(C)&&(u=m({rel:"modulepreload",href:u},p),jc.set(C,u),y.querySelector(I)===null)){switch(_){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(y.querySelector(JI(C)))return}_=y.createElement("link"),wa(_,"link",u),hn(_),y.head.appendChild(_)}}}function ECe(u,p,y){wf.S(u,p,y);var _=h1;if(_&&u){var I=Au(_).hoistableStyles,C=p1(u);p=p||"default";var N=I.get(C);if(!N){var Z={loading:0,preload:null};if(N=_.querySelector(YI(C)))Z.loading=5;else{u=m({rel:"stylesheet",href:u,"data-precedence":p},y),(y=jc.get(C))&&iV(u,y);var ce=N=_.createElement("link");hn(ce),wa(ce,"link",u),ce._p=new Promise(function(Ee,De){ce.onload=Ee,ce.onerror=De}),ce.addEventListener("load",function(){Z.loading|=1}),ce.addEventListener("error",function(){Z.loading|=2}),Z.loading|=4,bP(N,p,_)}N={type:"stylesheet",instance:N,count:1,state:Z},I.set(C,N)}}}function kCe(u,p){wf.X(u,p);var y=h1;if(y&&u){var _=Au(y).hoistableScripts,I=f1(u),C=_.get(I);C||(C=y.querySelector(JI(I)),C||(u=m({src:u,async:!0},p),(p=jc.get(I))&&rV(u,p),C=y.createElement("script"),hn(C),wa(C,"link",u),y.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},_.set(I,C))}}function ACe(u,p){wf.M(u,p);var y=h1;if(y&&u){var _=Au(y).hoistableScripts,I=f1(u),C=_.get(I);C||(C=y.querySelector(JI(I)),C||(u=m({src:u,async:!0,type:"module"},p),(p=jc.get(I))&&rV(u,p),C=y.createElement("script"),hn(C),wa(C,"link",u),y.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},_.set(I,C))}}function Mee(u,p,y,_){var I=(I=Wt.current)?vP(I):null;if(!I)throw Error(r(446));switch(u){case"meta":case"title":return null;case"style":return typeof y.precedence=="string"&&typeof y.href=="string"?(p=p1(y.href),y=Au(I).hoistableStyles,_=y.get(p),_||(_={type:"style",instance:null,count:0,state:null},y.set(p,_)),_):{type:"void",instance:null,count:0,state:null};case"link":if(y.rel==="stylesheet"&&typeof y.href=="string"&&typeof y.precedence=="string"){u=p1(y.href);var C=Au(I).hoistableStyles,N=C.get(u);if(N||(I=I.ownerDocument||I,N={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},C.set(u,N),(C=I.querySelector(YI(u)))&&!C._p&&(N.instance=C,N.state.loading=5),jc.has(u)||(y={rel:"preload",as:"style",href:y.href,crossOrigin:y.crossOrigin,integrity:y.integrity,media:y.media,hrefLang:y.hrefLang,referrerPolicy:y.referrerPolicy},jc.set(u,y),C||PCe(I,u,y,N.state))),p&&_===null)throw Error(r(528,""));return N}if(p&&_!==null)throw Error(r(529,""));return null;case"script":return p=y.async,y=y.src,typeof y=="string"&&p&&typeof p!="function"&&typeof p!="symbol"?(p=f1(y),y=Au(I).hoistableScripts,_=y.get(p),_||(_={type:"script",instance:null,count:0,state:null},y.set(p,_)),_):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,u))}}function p1(u){return'href="'+ja(u)+'"'}function YI(u){return'link[rel="stylesheet"]['+u+"]"}function Cee(u){return m({},u,{"data-precedence":u.precedence,precedence:null})}function PCe(u,p,y,_){u.querySelector('link[rel="preload"][as="style"]['+p+"]")?_.loading=1:(p=u.createElement("link"),_.preload=p,p.addEventListener("load",function(){return _.loading|=1}),p.addEventListener("error",function(){return _.loading|=2}),wa(p,"link",y),hn(p),u.head.appendChild(p))}function f1(u){return'[src="'+ja(u)+'"]'}function JI(u){return"script[async]"+u}function Eee(u,p,y){if(p.count++,p.instance===null)switch(p.type){case"style":var _=u.querySelector('style[data-href~="'+ja(y.href)+'"]');if(_)return p.instance=_,hn(_),_;var I=m({},y,{"data-href":y.href,"data-precedence":y.precedence,href:null,precedence:null});return _=(u.ownerDocument||u).createElement("style"),hn(_),wa(_,"style",I),bP(_,y.precedence,u),p.instance=_;case"stylesheet":I=p1(y.href);var C=u.querySelector(YI(I));if(C)return p.state.loading|=4,p.instance=C,hn(C),C;_=Cee(y),(I=jc.get(I))&&iV(_,I),C=(u.ownerDocument||u).createElement("link"),hn(C);var N=C;return N._p=new Promise(function(Z,ce){N.onload=Z,N.onerror=ce}),wa(C,"link",_),p.state.loading|=4,bP(C,y.precedence,u),p.instance=C;case"script":return C=f1(y.src),(I=u.querySelector(JI(C)))?(p.instance=I,hn(I),I):(_=y,(I=jc.get(C))&&(_=m({},y),rV(_,I)),u=u.ownerDocument||u,I=u.createElement("script"),hn(I),wa(I,"link",_),u.head.appendChild(I),p.instance=I);case"void":return null;default:throw Error(r(443,p.type))}else p.type==="stylesheet"&&(p.state.loading&4)===0&&(_=p.instance,p.state.loading|=4,bP(_,y.precedence,u));return p.instance}function bP(u,p,y){for(var _=y.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),I=_.length?_[_.length-1]:null,C=I,N=0;N<_.length;N++){var Z=_[N];if(Z.dataset.precedence===p)C=Z;else if(C!==I)break}C?C.parentNode.insertBefore(u,C.nextSibling):(p=y.nodeType===9?y.head:y,p.insertBefore(u,p.firstChild))}function iV(u,p){u.crossOrigin==null&&(u.crossOrigin=p.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=p.referrerPolicy),u.title==null&&(u.title=p.title)}function rV(u,p){u.crossOrigin==null&&(u.crossOrigin=p.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=p.referrerPolicy),u.integrity==null&&(u.integrity=p.integrity)}var wP=null;function kee(u,p,y){if(wP===null){var _=new Map,I=wP=new Map;I.set(y,_)}else I=wP,_=I.get(y),_||(_=new Map,I.set(y,_));if(_.has(u))return _;for(_.set(u,null),y=y.getElementsByTagName(u),I=0;I<y.length;I++){var C=y[I];if(!(C[jl]||C[vr]||u==="link"&&C.getAttribute("rel")==="stylesheet")&&C.namespaceURI!=="http://www.w3.org/2000/svg"){var N=C.getAttribute(p)||"";N=u+N;var Z=_.get(N);Z?Z.push(C):_.set(N,[C])}}return _}function Aee(u,p,y){u=u.ownerDocument||u,u.head.insertBefore(y,p==="title"?u.querySelector("head > title"):null)}function OCe(u,p,y){if(y===1||p.itemProp!=null)return!1;switch(u){case"meta":case"title":return!0;case"style":if(typeof p.precedence!="string"||typeof p.href!="string"||p.href==="")break;return!0;case"link":if(typeof p.rel!="string"||typeof p.href!="string"||p.href===""||p.onLoad||p.onError)break;switch(p.rel){case"stylesheet":return u=p.disabled,typeof p.precedence=="string"&&u==null;default:return!0}case"script":if(p.async&&typeof p.async!="function"&&typeof p.async!="symbol"&&!p.onLoad&&!p.onError&&p.src&&typeof p.src=="string")return!0}return!1}function Pee(u){return!(u.type==="stylesheet"&&(u.state.loading&3)===0)}function LCe(u,p,y,_){if(y.type==="stylesheet"&&(typeof _.media!="string"||matchMedia(_.media).matches!==!1)&&(y.state.loading&4)===0){if(y.instance===null){var I=p1(_.href),C=p.querySelector(YI(I));if(C){p=C._p,p!==null&&typeof p=="object"&&typeof p.then=="function"&&(u.count++,u=_P.bind(u),p.then(u,u)),y.state.loading|=4,y.instance=C,hn(C);return}C=p.ownerDocument||p,_=Cee(_),(I=jc.get(I))&&iV(_,I),C=C.createElement("link"),hn(C);var N=C;N._p=new Promise(function(Z,ce){N.onload=Z,N.onerror=ce}),wa(C,"link",_),y.instance=C}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(y,p),(p=y.state.preload)&&(y.state.loading&3)===0&&(u.count++,y=_P.bind(u),p.addEventListener("load",y),p.addEventListener("error",y))}}var nV=0;function FCe(u,p){return u.stylesheets&&u.count===0&&$P(u,u.stylesheets),0<u.count||0<u.imgCount?function(y){var _=setTimeout(function(){if(u.stylesheets&&$P(u,u.stylesheets),u.unsuspend){var C=u.unsuspend;u.unsuspend=null,C()}},6e4+p);0<u.imgBytes&&nV===0&&(nV=62500*mCe());var I=setTimeout(function(){if(u.waitingForImages=!1,u.count===0&&(u.stylesheets&&$P(u,u.stylesheets),u.unsuspend)){var C=u.unsuspend;u.unsuspend=null,C()}},(u.imgBytes>nV?50:800)+p);return u.unsuspend=y,function(){u.unsuspend=null,clearTimeout(_),clearTimeout(I)}}:null}function _P(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)$P(this,this.stylesheets);else if(this.unsuspend){var u=this.unsuspend;this.unsuspend=null,u()}}}var xP=null;function $P(u,p){u.stylesheets=null,u.unsuspend!==null&&(u.count++,xP=new Map,p.forEach(RCe,u),xP=null,_P.call(u))}function RCe(u,p){if(!(p.state.loading&4)){var y=xP.get(u);if(y)var _=y.get(null);else{y=new Map,xP.set(u,y);for(var I=u.querySelectorAll("link[data-precedence],style[data-precedence]"),C=0;C<I.length;C++){var N=I[C];(N.nodeName==="LINK"||N.getAttribute("media")!=="not all")&&(y.set(N.dataset.precedence,N),_=N)}_&&y.set(null,_)}I=p.instance,N=I.getAttribute("data-precedence"),C=y.get(N)||_,C===_&&y.set(null,I),y.set(N,I),this.count++,_=_P.bind(this),I.addEventListener("load",_),I.addEventListener("error",_),C?C.parentNode.insertBefore(I,C.nextSibling):(u=u.nodeType===9?u.head:u,u.insertBefore(I,u.firstChild)),p.state.loading|=4}}var XI={$$typeof:A,Provider:null,Consumer:null,_currentValue:Oe,_currentValue2:Oe,_threadCount:0};function zCe(u,p,y,_,I,C,N,Z,ce){this.tag=1,this.containerInfo=u,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=cr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cr(0),this.hiddenUpdates=cr(null),this.identifierPrefix=_,this.onUncaughtError=I,this.onCaughtError=C,this.onRecoverableError=N,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ce,this.incompleteTransitions=new Map}function Oee(u,p,y,_,I,C,N,Z,ce,Ee,De,Be){return u=new zCe(u,p,y,N,ce,Ee,De,Be,Z),p=1,C===!0&&(p|=24),C=Vl(3,null,null,p),u.current=C,C.stateNode=u,p=zj(),p.refCount++,u.pooledCache=p,p.refCount++,C.memoizedState={element:_,isDehydrated:y,cache:p},Vj(C),u}function Lee(u){return u?(u=H_,u):H_}function Fee(u,p,y,_,I,C){I=Lee(I),_.context===null?_.context=I:_.pendingContext=I,_=Eg(p),_.payload={element:y},C=C===void 0?null:C,C!==null&&(_.callback=C),y=kg(u,_,p),y!==null&&(tl(y,u,p),EI(y,u,p))}function Ree(u,p){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var y=u.retryLane;u.retryLane=y!==0&&y<p?y:p}}function sV(u,p){Ree(u,p),(u=u.alternate)&&Ree(u,p)}function zee(u){if(u.tag===13||u.tag===31){var p=ub(u,67108864);p!==null&&tl(p,u,67108864),sV(u,67108864)}}function Nee(u){if(u.tag===13||u.tag===31){var p=Gl();p=Zs(p);var y=ub(u,p);y!==null&&tl(y,u,p),sV(u,p)}}var SP=!0;function NCe(u,p,y,_){var I=ne.T;ne.T=null;var C=_e.p;try{_e.p=2,aV(u,p,y,_)}finally{_e.p=C,ne.T=I}}function DCe(u,p,y,_){var I=ne.T;ne.T=null;var C=_e.p;try{_e.p=8,aV(u,p,y,_)}finally{_e.p=C,ne.T=I}}function aV(u,p,y,_){if(SP){var I=oV(_);if(I===null)G4(u,p,_,TP,y),jee(u,_);else if(VCe(I,u,p,y,_))_.stopPropagation();else if(jee(u,_),p&4&&-1<jCe.indexOf(u)){for(;I!==null;){var C=Ac(I);if(C!==null)switch(C.tag){case 3:if(C=C.stateNode,C.current.memoizedState.isDehydrated){var N=Ec(C.pendingLanes);if(N!==0){var Z=C;for(Z.pendingLanes|=2,Z.entangledLanes|=2;N;){var ce=1<<31-Ws(N);Z.entanglements[1]|=ce,N&=~ce}ah(C),(ir&6)===0&&(oP=cs()+500,HI(0))}}break;case 31:case 13:Z=ub(C,2),Z!==null&&tl(Z,C,2),cP(),sV(C,2)}if(C=oV(_),C===null&&G4(u,p,_,TP,y),C===I)break;I=C}I!==null&&_.stopPropagation()}else G4(u,p,_,null,y)}}function oV(u){return u=pI(u),lV(u)}var TP=null;function lV(u){if(TP=null,u=Qd(u),u!==null){var p=s(u);if(p===null)u=null;else{var y=p.tag;if(y===13){if(u=a(p),u!==null)return u;u=null}else if(y===31){if(u=o(p),u!==null)return u;u=null}else if(y===3){if(p.stateNode.current.memoizedState.isDehydrated)return p.tag===3?p.stateNode.containerInfo:null;u=null}else p!==u&&(u=null)}}return TP=u,null}function Dee(u){switch(u){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(P_()){case Gd:return 2;case O_:return 8;case Wd:case lI:return 32;case pg:return 268435456;default:return 32}default:return 32}}var cV=!1,Vg=null,Ug=null,Bg=null,QI=new Map,KI=new Map,qg=[],jCe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function jee(u,p){switch(u){case"focusin":case"focusout":Vg=null;break;case"dragenter":case"dragleave":Ug=null;break;case"mouseover":case"mouseout":Bg=null;break;case"pointerover":case"pointerout":QI.delete(p.pointerId);break;case"gotpointercapture":case"lostpointercapture":KI.delete(p.pointerId)}}function eM(u,p,y,_,I,C){return u===null||u.nativeEvent!==C?(u={blockedOn:p,domEventName:y,eventSystemFlags:_,nativeEvent:C,targetContainers:[I]},p!==null&&(p=Ac(p),p!==null&&zee(p)),u):(u.eventSystemFlags|=_,p=u.targetContainers,I!==null&&p.indexOf(I)===-1&&p.push(I),u)}function VCe(u,p,y,_,I){switch(p){case"focusin":return Vg=eM(Vg,u,p,y,_,I),!0;case"dragenter":return Ug=eM(Ug,u,p,y,_,I),!0;case"mouseover":return Bg=eM(Bg,u,p,y,_,I),!0;case"pointerover":var C=I.pointerId;return QI.set(C,eM(QI.get(C)||null,u,p,y,_,I)),!0;case"gotpointercapture":return C=I.pointerId,KI.set(C,eM(KI.get(C)||null,u,p,y,_,I)),!0}return!1}function Vee(u){var p=Qd(u.target);if(p!==null){var y=s(p);if(y!==null){if(p=y.tag,p===13){if(p=a(y),p!==null){u.blockedOn=p,Xd(u.priority,function(){Nee(y)});return}}else if(p===31){if(p=o(y),p!==null){u.blockedOn=p,Xd(u.priority,function(){Nee(y)});return}}else if(p===3&&y.stateNode.current.memoizedState.isDehydrated){u.blockedOn=y.tag===3?y.stateNode.containerInfo:null;return}}}u.blockedOn=null}function IP(u){if(u.blockedOn!==null)return!1;for(var p=u.targetContainers;0<p.length;){var y=oV(u.nativeEvent);if(y===null){y=u.nativeEvent;var _=new y.constructor(y.type,y);eb=_,y.target.dispatchEvent(_),eb=null}else return p=Ac(y),p!==null&&zee(p),u.blockedOn=y,!1;p.shift()}return!0}function Uee(u,p,y){IP(u)&&y.delete(p)}function UCe(){cV=!1,Vg!==null&&IP(Vg)&&(Vg=null),Ug!==null&&IP(Ug)&&(Ug=null),Bg!==null&&IP(Bg)&&(Bg=null),QI.forEach(Uee),KI.forEach(Uee)}function MP(u,p){u.blockedOn===p&&(u.blockedOn=null,cV||(cV=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,UCe)))}var CP=null;function Bee(u){CP!==u&&(CP=u,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){CP===u&&(CP=null);for(var p=0;p<u.length;p+=3){var y=u[p],_=u[p+1],I=u[p+2];if(typeof _!="function"){if(lV(_||y)===null)continue;break}var C=Ac(y);C!==null&&(u.splice(p,3),p-=3,o4(C,{pending:!0,data:I,method:y.method,action:_},_,I))}}))}function m1(u){function p(ce){return MP(ce,u)}Vg!==null&&MP(Vg,u),Ug!==null&&MP(Ug,u),Bg!==null&&MP(Bg,u),QI.forEach(p),KI.forEach(p);for(var y=0;y<qg.length;y++){var _=qg[y];_.blockedOn===u&&(_.blockedOn=null)}for(;0<qg.length&&(y=qg[0],y.blockedOn===null);)Vee(y),y.blockedOn===null&&qg.shift();if(y=(u.ownerDocument||u).$$reactFormReplay,y!=null)for(_=0;_<y.length;_+=3){var I=y[_],C=y[_+1],N=I[jr]||null;if(typeof C=="function")N||Bee(y);else if(N){var Z=null;if(C&&C.hasAttribute("formAction")){if(I=C,N=C[jr]||null)Z=N.formAction;else if(lV(I)!==null)continue}else Z=N.action;typeof Z=="function"?y[_+1]=Z:(y.splice(_,3),_-=3),Bee(y)}}}function qee(){function u(C){C.canIntercept&&C.info==="react-transition"&&C.intercept({handler:function(){return new Promise(function(N){return I=N})},focusReset:"manual",scroll:"manual"})}function p(){I!==null&&(I(),I=null),_||setTimeout(y,20)}function y(){if(!_&&!navigation.transition){var C=navigation.currentEntry;C&&C.url!=null&&navigation.navigate(C.url,{state:C.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var _=!1,I=null;return navigation.addEventListener("navigate",u),navigation.addEventListener("navigatesuccess",p),navigation.addEventListener("navigateerror",p),setTimeout(y,100),function(){_=!0,navigation.removeEventListener("navigate",u),navigation.removeEventListener("navigatesuccess",p),navigation.removeEventListener("navigateerror",p),I!==null&&(I(),I=null)}}}function uV(u){this._internalRoot=u}EP.prototype.render=uV.prototype.render=function(u){var p=this._internalRoot;if(p===null)throw Error(r(409));var y=p.current,_=Gl();Fee(y,_,u,p,null,null)},EP.prototype.unmount=uV.prototype.unmount=function(){var u=this._internalRoot;if(u!==null){this._internalRoot=null;var p=u.containerInfo;Fee(u.current,2,null,u,null,null),cP(),p[At]=null}};function EP(u){this._internalRoot=u}EP.prototype.unstable_scheduleHydration=function(u){if(u){var p=er();u={blockedOn:null,target:u,priority:p};for(var y=0;y<qg.length&&p!==0&&p<qg[y].priority;y++);qg.splice(y,0,u),y===0&&Vee(u)}};var Hee=e.version;if(Hee!=="19.2.0")throw Error(r(527,Hee,"19.2.0"));_e.findDOMNode=function(u){var p=u._reactInternals;if(p===void 0)throw typeof u.render=="function"?Error(r(188)):(u=Object.keys(u).join(","),Error(r(268,u)));return u=c(p),u=u!==null?h(u):null,u=u===null?null:u.stateNode,u};var BCe={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:ne,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var kP=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!kP.isDisabled&&kP.supportsFiber)try{Zd=kP.inject(BCe),Gs=kP}catch{}}return iM.createRoot=function(u,p){if(!n(u))throw Error(r(299));var y=!1,_="",I=QQ,C=KQ,N=eK;return p!=null&&(p.unstable_strictMode===!0&&(y=!0),p.identifierPrefix!==void 0&&(_=p.identifierPrefix),p.onUncaughtError!==void 0&&(I=p.onUncaughtError),p.onCaughtError!==void 0&&(C=p.onCaughtError),p.onRecoverableError!==void 0&&(N=p.onRecoverableError)),p=Oee(u,1,!1,null,null,y,_,null,I,C,N,qee),u[At]=p.current,H4(u),new uV(p)},iM.hydrateRoot=function(u,p,y){if(!n(u))throw Error(r(299));var _=!1,I="",C=QQ,N=KQ,Z=eK,ce=null;return y!=null&&(y.unstable_strictMode===!0&&(_=!0),y.identifierPrefix!==void 0&&(I=y.identifierPrefix),y.onUncaughtError!==void 0&&(C=y.onUncaughtError),y.onCaughtError!==void 0&&(N=y.onCaughtError),y.onRecoverableError!==void 0&&(Z=y.onRecoverableError),y.formState!==void 0&&(ce=y.formState)),p=Oee(u,1,!0,p,y??null,_,I,ce,C,N,Z,qee),p.context=Lee(null),y=p.current,_=Gl(),_=Zs(_),I=Eg(_),I.callback=null,kg(y,I,_),y=_,p.current.lanes=y,Na(p,y),ah(p),u[At]=p.current,H4(u),new EP(p)},iM.version="19.2.0",iM}var rte;function t2e(){if(rte)return fV.exports;rte=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),fV.exports=e2e(),fV.exports}var i2e=t2e();const wn=(t,e,...i)=>{try{return t==null?void 0:t.call(e,...i)}catch(r){console.error(r,t)}},LB=async(t,e,...i)=>{try{return await(t==null?void 0:t.call(e,...i))}catch(r){console.error(r,t)}},lW=Symbol.for("controller"),r2e=t=>typeof t=="object"&&t!==null&&(lW in t||"hostConnected"in t||"hostDisconnected"in t||"hostUpdate"in t||"hostUpdated"in t),n2e=t=>typeof(t==null?void 0:t.then)=="function",s2e=t=>t.M.length;let WM;const h$=t=>{WM!==t&&(WM=t,queueMicrotask(()=>WM===t?WM=void 0:0))},_T=t=>WM;let Bb=[];const cW=t=>{if(t===void 0){Bb=[];return}const e=Bb.indexOf(t);Bb=e===-1?[...Bb,t]:Bb.slice(0,e+1),queueMicrotask(()=>Bb=[])},uW=()=>Bb;let p$;const a2e=t=>{p$!==t&&(p$=t,queueMicrotask(()=>p$===t?p$=void 0:0))},o2e=()=>{const t=p$;return p$=void 0,t},l2e=async(t,e)=>{const i=dW(t);if(i===void 0)return t;if(await i.ready,typeof e=="function"){const r=i.watchExports(n=>e(n,r))}return i.exports},c2e=async t=>{const e=dW(t);return await e.ready,e},dW=t=>{const i=_T().manager.X(t);if(i!==void 0)return i;if(r2e(t))return t;const r=o2e();if(r!==void 0)return r};let FB=!1;const u2e=t=>{FB=!0;try{return t()}finally{FB=!1}};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const A3=globalThis,hW=A3.ShadowRoot&&(A3.ShadyCSS===void 0||A3.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,pW=Symbol(),nte=new WeakMap;let qde=class{constructor(e,i,r){if(this._$cssResult$=!0,r!==pW)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=i}get styleSheet(){let e=this.o;const i=this.t;if(hW&&e===void 0){const r=i!==void 0&&i.length===1;r&&(e=nte.get(i)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&nte.set(i,e))}return e}toString(){return this.cssText}};const d2e=t=>new qde(typeof t=="string"?t:t+"",void 0,pW),ct=(t,...e)=>{const i=t.length===1?t[0]:e.reduce(((r,n,s)=>r+(a=>{if(a._$cssResult$===!0)return a.cssText;if(typeof a=="number")return a;throw Error("Value passed to 'css' function must be a 'css' function result: "+a+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(n)+t[s+1]),t[0]);return new qde(i,t,pW)},h2e=(t,e)=>{if(hW)t.adoptedStyleSheets=e.map((i=>i instanceof CSSStyleSheet?i:i.styleSheet));else for(const i of e){const r=document.createElement("style"),n=A3.litNonce;n!==void 0&&r.setAttribute("nonce",n),r.textContent=i.cssText,t.appendChild(r)}},ste=hW?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let i="";for(const r of e.cssRules)i+=r.cssText;return d2e(i)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:p2e,defineProperty:f2e,getOwnPropertyDescriptor:m2e,getOwnPropertyNames:g2e,getOwnPropertySymbols:y2e,getPrototypeOf:v2e}=Object,fv=globalThis,ate=fv.trustedTypes,b2e=ate?ate.emptyScript:"",vV=fv.reactiveElementPolyfillSupport,t2=(t,e)=>t,RB={toAttribute(t,e){switch(e){case Boolean:t=t?b2e:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let i=t;switch(e){case Boolean:i=t!==null;break;case Number:i=t===null?null:Number(t);break;case Object:case Array:try{i=JSON.parse(t)}catch{i=null}}return i}},fW=(t,e)=>!p2e(t,e),ote={attribute:!0,type:String,converter:RB,reflect:!1,useDefault:!1,hasChanged:fW};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),fv.litPropertyMetadata??(fv.litPropertyMetadata=new WeakMap);let nx=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,i=ote){if(i.state&&(i.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((i=Object.create(i)).wrapped=!0),this.elementProperties.set(e,i),!i.noAccessor){const r=Symbol(),n=this.getPropertyDescriptor(e,r,i);n!==void 0&&f2e(this.prototype,e,n)}}static getPropertyDescriptor(e,i,r){const{get:n,set:s}=m2e(this.prototype,e)??{get(){return this[i]},set(a){this[i]=a}};return{get:n,set(a){const o=n==null?void 0:n.call(this);s==null||s.call(this,a),this.requestUpdate(e,o,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??ote}static _$Ei(){if(this.hasOwnProperty(t2("elementProperties")))return;const e=v2e(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(t2("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(t2("properties"))){const i=this.properties,r=[...g2e(i),...y2e(i)];for(const n of r)this.createProperty(n,i[n])}const e=this[Symbol.metadata];if(e!==null){const i=litPropertyMetadata.get(e);if(i!==void 0)for(const[r,n]of i)this.elementProperties.set(r,n)}this._$Eh=new Map;for(const[i,r]of this.elementProperties){const n=this._$Eu(i,r);n!==void 0&&this._$Eh.set(n,i)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const i=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const n of r)i.unshift(ste(n))}else e!==void 0&&i.push(ste(e));return i}static _$Eu(e,i){const r=i.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise((i=>this.enableUpdating=i)),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach((i=>i(this)))}addController(e){var i;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((i=e.hostConnected)==null||i.call(e))}removeController(e){var i;(i=this._$EO)==null||i.delete(e)}_$E_(){const e=new Map,i=this.constructor.elementProperties;for(const r of i.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return h2e(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach((i=>{var r;return(r=i.hostConnected)==null?void 0:r.call(i)}))}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach((i=>{var r;return(r=i.hostDisconnected)==null?void 0:r.call(i)}))}attributeChangedCallback(e,i,r){this._$AK(e,r)}_$ET(e,i){var s;const r=this.constructor.elementProperties.get(e),n=this.constructor._$Eu(e,r);if(n!==void 0&&r.reflect===!0){const a=(((s=r.converter)==null?void 0:s.toAttribute)!==void 0?r.converter:RB).toAttribute(i,r.type);this._$Em=e,a==null?this.removeAttribute(n):this.setAttribute(n,a),this._$Em=null}}_$AK(e,i){var s,a;const r=this.constructor,n=r._$Eh.get(e);if(n!==void 0&&this._$Em!==n){const o=r.getPropertyOptions(n),l=typeof o.converter=="function"?{fromAttribute:o.converter}:((s=o.converter)==null?void 0:s.fromAttribute)!==void 0?o.converter:RB;this._$Em=n;const c=l.fromAttribute(i,o.type);this[n]=c??((a=this._$Ej)==null?void 0:a.get(n))??c,this._$Em=null}}requestUpdate(e,i,r){var n;if(e!==void 0){const s=this.constructor,a=this[e];if(r??(r=s.getPropertyOptions(e)),!((r.hasChanged??fW)(a,i)||r.useDefault&&r.reflect&&a===((n=this._$Ej)==null?void 0:n.get(e))&&!this.hasAttribute(s._$Eu(e,r))))return;this.C(e,i,r)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,i,{useDefault:r,reflect:n,wrapped:s},a){r&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,a??i??this[e]),s!==!0||a!==void 0)||(this._$AL.has(e)||(this.hasUpdated||r||(i=void 0),this._$AL.set(e,i)),n===!0&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(i){Promise.reject(i)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var r;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[s,a]of this._$Ep)this[s]=a;this._$Ep=void 0}const n=this.constructor.elementProperties;if(n.size>0)for(const[s,a]of n){const{wrapped:o}=a,l=this[s];o!==!0||this._$AL.has(s)||l===void 0||this.C(s,void 0,a,l)}}let e=!1;const i=this._$AL;try{e=this.shouldUpdate(i),e?(this.willUpdate(i),(r=this._$EO)==null||r.forEach((n=>{var s;return(s=n.hostUpdate)==null?void 0:s.call(n)})),this.update(i)):this._$EM()}catch(n){throw e=!1,this._$EM(),n}e&&this._$AE(i)}willUpdate(e){}_$AE(e){var i;(i=this._$EO)==null||i.forEach((r=>{var n;return(n=r.hostUpdated)==null?void 0:n.call(r)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach((i=>this._$ET(i,this[i])))),this._$EM()}updated(e){}firstUpdated(e){}};nx.elementStyles=[],nx.shadowRootOptions={mode:"open"},nx[t2("elementProperties")]=new Map,nx[t2("finalized")]=new Map,vV==null||vV({ReactiveElement:nx}),(fv.reactiveElementVersions??(fv.reactiveElementVersions=[])).push("2.1.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const i2=globalThis,LF=i2.trustedTypes,lte=LF?LF.createPolicy("lit-html",{createHTML:t=>t}):void 0,Hde="$lit$",Uy=`lit$${Math.random().toFixed(9).slice(2)}$`,Gde="?"+Uy,w2e=`<${Gde}>`,qw=document,nE=()=>qw.createComment(""),sE=t=>t===null||typeof t!="object"&&typeof t!="function",mW=Array.isArray,_2e=t=>mW(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",bV=`[ 	
\f\r]`,rM=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,cte=/-->/g,ute=/>/g,$b=RegExp(`>|${bV}(?:([^\\s"'>=/]+)(${bV}*=${bV}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),dte=/'/g,hte=/"/g,Wde=/^(?:script|style|textarea|title)$/i,Zde=t=>(e,...i)=>({_$litType$:t,strings:e,values:i}),q=Zde(1),Xi=Zde(2),vc=Symbol.for("lit-noChange"),Xe=Symbol.for("lit-nothing"),pte=new WeakMap,R0=qw.createTreeWalker(qw,129);function Yde(t,e){if(!mW(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return lte!==void 0?lte.createHTML(e):e}const x2e=(t,e)=>{const i=t.length-1,r=[];let n,s=e===2?"<svg>":e===3?"<math>":"",a=rM;for(let o=0;o<i;o++){const l=t[o];let c,h,m=-1,g=0;for(;g<l.length&&(a.lastIndex=g,h=a.exec(l),h!==null);)g=a.lastIndex,a===rM?h[1]==="!--"?a=cte:h[1]!==void 0?a=ute:h[2]!==void 0?(Wde.test(h[2])&&(n=RegExp("</"+h[2],"g")),a=$b):h[3]!==void 0&&(a=$b):a===$b?h[0]===">"?(a=n??rM,m=-1):h[1]===void 0?m=-2:(m=a.lastIndex-h[2].length,c=h[1],a=h[3]===void 0?$b:h[3]==='"'?hte:dte):a===hte||a===dte?a=$b:a===cte||a===ute?a=rM:(a=$b,n=void 0);const v=a===$b&&t[o+1].startsWith("/>")?" ":"";s+=a===rM?l+w2e:m>=0?(r.push(c),l.slice(0,m)+Hde+l.slice(m)+Uy+v):l+Uy+(m===-2?o:v)}return[Yde(t,s+(t[i]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),r]};let zB=class Jde{constructor({strings:e,_$litType$:i},r){let n;this.parts=[];let s=0,a=0;const o=e.length-1,l=this.parts,[c,h]=x2e(e,i);if(this.el=Jde.createElement(c,r),R0.currentNode=this.el.content,i===2||i===3){const m=this.el.content.firstChild;m.replaceWith(...m.childNodes)}for(;(n=R0.nextNode())!==null&&l.length<o;){if(n.nodeType===1){if(n.hasAttributes())for(const m of n.getAttributeNames())if(m.endsWith(Hde)){const g=h[a++],v=n.getAttribute(m).split(Uy),b=/([.?@])?(.*)/.exec(g);l.push({type:1,index:s,name:b[2],strings:v,ctor:b[1]==="."?S2e:b[1]==="?"?T2e:b[1]==="@"?I2e:tD}),n.removeAttribute(m)}else m.startsWith(Uy)&&(l.push({type:6,index:s}),n.removeAttribute(m));if(Wde.test(n.tagName)){const m=n.textContent.split(Uy),g=m.length-1;if(g>0){n.textContent=LF?LF.emptyScript:"";for(let v=0;v<g;v++)n.append(m[v],nE()),R0.nextNode(),l.push({type:2,index:++s});n.append(m[g],nE())}}}else if(n.nodeType===8)if(n.data===Gde)l.push({type:2,index:s});else{let m=-1;for(;(m=n.data.indexOf(Uy,m+1))!==-1;)l.push({type:7,index:s}),m+=Uy.length-1}s++}}static createElement(e,i){const r=qw.createElement("template");return r.innerHTML=e,r}};function qS(t,e,i=t,r){var a,o;if(e===vc)return e;let n=r!==void 0?(a=i._$Co)==null?void 0:a[r]:i._$Cl;const s=sE(e)?void 0:e._$litDirective$;return(n==null?void 0:n.constructor)!==s&&((o=n==null?void 0:n._$AO)==null||o.call(n,!1),s===void 0?n=void 0:(n=new s(t),n._$AT(t,i,r)),r!==void 0?(i._$Co??(i._$Co=[]))[r]=n:i._$Cl=n),n!==void 0&&(e=qS(t,n._$AS(t,e.values),n,r)),e}let $2e=class{constructor(e,i){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=i}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:i},parts:r}=this._$AD,n=((e==null?void 0:e.creationScope)??qw).importNode(i,!0);R0.currentNode=n;let s=R0.nextNode(),a=0,o=0,l=r[0];for(;l!==void 0;){if(a===l.index){let c;l.type===2?c=new eD(s,s.nextSibling,this,e):l.type===1?c=new l.ctor(s,l.name,l.strings,this,e):l.type===6&&(c=new M2e(s,this,e)),this._$AV.push(c),l=r[++o]}a!==(l==null?void 0:l.index)&&(s=R0.nextNode(),a++)}return R0.currentNode=qw,n}p(e){let i=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,i),i+=r.strings.length-2):r._$AI(e[i])),i++}},eD=class Xde{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,i,r,n){this.type=2,this._$AH=Xe,this._$AN=void 0,this._$AA=e,this._$AB=i,this._$AM=r,this.options=n,this._$Cv=(n==null?void 0:n.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const i=this._$AM;return i!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=i.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,i=this){e=qS(this,e,i),sE(e)?e===Xe||e==null||e===""?(this._$AH!==Xe&&this._$AR(),this._$AH=Xe):e!==this._$AH&&e!==vc&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):_2e(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==Xe&&sE(this._$AH)?this._$AA.nextSibling.data=e:this.T(qw.createTextNode(e)),this._$AH=e}$(e){var s;const{values:i,_$litType$:r}=e,n=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=zB.createElement(Yde(r.h,r.h[0]),this.options)),r);if(((s=this._$AH)==null?void 0:s._$AD)===n)this._$AH.p(i);else{const a=new $2e(n,this),o=a.u(this.options);a.p(i),this.T(o),this._$AH=a}}_$AC(e){let i=pte.get(e.strings);return i===void 0&&pte.set(e.strings,i=new zB(e)),i}k(e){mW(this._$AH)||(this._$AH=[],this._$AR());const i=this._$AH;let r,n=0;for(const s of e)n===i.length?i.push(r=new Xde(this.O(nE()),this.O(nE()),this,this.options)):r=i[n],r._$AI(s),n++;n<i.length&&(this._$AR(r&&r._$AB.nextSibling,n),i.length=n)}_$AR(e=this._$AA.nextSibling,i){var r;for((r=this._$AP)==null?void 0:r.call(this,!1,!0,i);e!==this._$AB;){const n=e.nextSibling;e.remove(),e=n}}setConnected(e){var i;this._$AM===void 0&&(this._$Cv=e,(i=this._$AP)==null||i.call(this,e))}},tD=class{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,i,r,n,s){this.type=1,this._$AH=Xe,this._$AN=void 0,this.element=e,this.name=i,this._$AM=n,this.options=s,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=Xe}_$AI(e,i=this,r,n){const s=this.strings;let a=!1;if(s===void 0)e=qS(this,e,i,0),a=!sE(e)||e!==this._$AH&&e!==vc,a&&(this._$AH=e);else{const o=e;let l,c;for(e=s[0],l=0;l<s.length-1;l++)c=qS(this,o[r+l],i,l),c===vc&&(c=this._$AH[l]),a||(a=!sE(c)||c!==this._$AH[l]),c===Xe?e=Xe:e!==Xe&&(e+=(c??"")+s[l+1]),this._$AH[l]=c}a&&!n&&this.j(e)}j(e){e===Xe?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}},S2e=class extends tD{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===Xe?void 0:e}},T2e=class extends tD{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==Xe)}},I2e=class extends tD{constructor(e,i,r,n,s){super(e,i,r,n,s),this.type=5}_$AI(e,i=this){if((e=qS(this,e,i,0)??Xe)===vc)return;const r=this._$AH,n=e===Xe&&r!==Xe||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,s=e!==Xe&&(r===Xe||n);n&&this.element.removeEventListener(this.name,this,r),s&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var i;typeof this._$AH=="function"?this._$AH.call(((i=this.options)==null?void 0:i.host)??this.element,e):this._$AH.handleEvent(e)}},M2e=class{constructor(e,i,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=i,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){qS(this,e)}};const C2e={I:eD},wV=i2.litHtmlPolyfillSupport;wV==null||wV(zB,eD),(i2.litHtmlVersions??(i2.litHtmlVersions=[])).push("3.3.1");const Qde=(t,e,i)=>{const r=(i==null?void 0:i.renderBefore)??e;let n=r._$litPart$;if(n===void 0){const s=(i==null?void 0:i.renderBefore)??null;r._$litPart$=n=new eD(e.insertBefore(nE(),s),s,void 0,i??{})}return n._$AI(t),n};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Q0=globalThis;let O$=class extends nx{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var i;const e=super.createRenderRoot();return(i=this.renderOptions).renderBefore??(i.renderBefore=e.firstChild),e}update(e){const i=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=Qde(i,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return vc}};var Ede;O$._$litElement$=!0,O$.finalized=!0,(Ede=Q0.litElementHydrateSupport)==null||Ede.call(Q0,{LitElement:O$});const _V=Q0.litElementPolyfillSupport;_V==null||_V({LitElement:O$});(Q0.litElementVersions??(Q0.litElementVersions=[])).push("4.2.1");class aE{constructor(){this.promise=new Promise((e,i)=>{this.resolve=e,this.reject=i})}}const E2e=(t,e)=>{const i=e/k2e;let r=0;const n=setInterval(()=>{r+=i,r>=e&&(clearInterval(n),t())},i);return n},k2e=4,A2e=(t,e,i)=>{const r=Object.keys(t),n=r.length;Xy===void 0&&queueMicrotask(iD),Xy??(Xy=new Map);let s=Xy.get(t);return s===void 0&&(s={callbacks:[],keyCount:n},Xy.set(t,s)),s.keyCount!==n&&(s.callbacks.forEach(a=>a(r)),s.callbacks=[],s.keyCount=n),s.callbacks.push(a=>{const o=c=>wn(e,null,c),l=a[n];l===void 0?o(void 0):t[l]===i?o(l):o(void 0)}),i};let Xy;const iD=()=>{Xy==null||Xy.forEach(({callbacks:t},e)=>{const i=Object.keys(e);t.forEach(r=>r(i))}),Xy=void 0},gW=(t,e,i)=>{const r=t.manager;return r.V!==Xe&&r.V!==i&&r.S(void 0,void 0),r.T.length===0&&queueMicrotask(()=>r.S(void 0,void 0)),r.V=i,r.T.push((n,s)=>wn(e,void 0,i===s?n:void 0)),i},yW=(t=[_T(),...uW()],e,i)=>{const r=Array.isArray(t)?t:[t];let n=r.length+1;const s=a=>{n-=1,a!==void 0&&(n=Math.min(n,0)),n===0&&e(a)};r.forEach(a=>A2e(a,o=>s(o===void 0?void 0:{key:o,host:a,isReactive:!1}),i));for(const a of r)if("manager"in a&&a.manager.component===a){gW(a,o=>s(o===void 0?void 0:{key:o,host:a,isReactive:!0}),i);break}return i},vW=(t="",e={},i=_T())=>{const r={emit:n=>{t===""&&iD();const s=new CustomEvent(t,{detail:n,cancelable:!0,bubbles:!0,composed:!0,...e});return i.el.dispatchEvent(s),s}};return t===""&&yW(void 0,n=>t=n.key,r),r},Re=vW.bind(null,"");var Kde;Kde=lW;var rS,nS,W0,sS,aS,oS,lS,cS,Yy,Z0,_l,Dh,Im,uS,P3;class rD{constructor(e){bi(this,uS);bi(this,rS);bi(this,nS);bi(this,W0);bi(this,sS);bi(this,aS);bi(this,oS);bi(this,lS);bi(this,cS);bi(this,Yy);bi(this,Z0);bi(this,_l);bi(this,Dh);bi(this,Im);oi(this,rS,[]),oi(this,nS,[]),oi(this,W0,[]),oi(this,sS,[]),oi(this,aS,[]),oi(this,oS,[]),oi(this,lS,[]),oi(this,cS,[]),oi(this,Yy,[]),oi(this,Z0,!1),this.P=new aE,this.connectedCalled=!1,this.loadedCalled=!1,this[Kde]=!0,oi(this,Im,[]);const i=this,r=e??_T();oi(i,_l,r),i.ready=i.P.promise,oi(i,Dh,mte(i)),i.component=r,Ze(i,_l).addController(i),Ze(i,_l).manager===void 0||(cW(i),queueMicrotask(()=>i.catchUpLifecycle()))}catchUpLifecycle(){const{manager:e}=Ze(this,_l);e.connectedCalled&&!this.connectedCalled&&this.triggerConnected(),Ze(e,Z0)&&this.triggerLoad().then(()=>e.loadedCalled&&this.triggerLoaded()).catch(console.error)}get exports(){return Ze(this,Dh)}set exports(e){const i=Ze(this,Dh);i!==e&&(oi(this,Dh,e),Ze(this,Im).forEach(wn),this.connectedCalled&&this.O!==!1&&Ze(this,_l).requestUpdate(this.O,i)),this.P.resolve(e)}setProvisionalExports(e,i=!0){oi(this,Dh,i?mte(e):e),Ze(this,Im).forEach(wn)}watchExports(e){const i=()=>e(Ze(this,Dh));return Ze(this,Im).push(i),()=>void Ze(this,Im).splice(Ze(this,Im).indexOf(i),1)}get use(){return h$(Ze(this,_l)),l2e}get useRef(){return h$(Ze(this,_l)),c2e}get useRefSync(){return h$(Ze(this,_l)),dW}controllerRemoved(){Ze(this,_l).el.isConnected&&this.triggerDisconnected(),this.triggerDestroy()}onConnected(e){Ze(this,rS).push(e)}onDisconnected(e){Ze(this,nS).push(e)}onLoad(e){Ze(this,W0).push(e)}onLoaded(e){Ze(this,sS).push(e)}onUpdate(e){Ze(this,aS).push(e)}onUpdated(e){Ze(this,oS).push(e)}onDestroy(e){Ze(this,lS).push(e)}onLifecycle(e){Ze(this,cS).push(e),this.connectedCalled&&Ze(this,_l).el.isConnected&&Vu(this,uS,P3).call(this,e)}triggerConnected(){const e=this;e.hostConnected&&wn(e.hostConnected,e),Ze(e,rS).forEach(wn),e.triggerLifecycle(),e.connectedCalled=!0}triggerDisconnected(){const e=this;e.hostDisconnected&&wn(e.hostDisconnected,e),Ze(e,nS).forEach(wn),Ze(e,Yy).forEach(wn),oi(e,Yy,[])}async triggerLoad(){if(Ze(this,Z0))return;oi(this,Z0,!0);const e=this;e.hostLoad&&await LB(e.hostLoad,e),Ze(this,W0).length>0&&await Promise.allSettled(Ze(this,W0).map(LB)),this.P.resolve(Ze(this,Dh))}triggerLoaded(){this.loadedCalled||(this.hostLoaded&&wn(this.hostLoaded,this),Ze(this,sS).forEach(wn),this.loadedCalled=!0)}triggerUpdate(e){this.hostUpdate&&wn(this.hostUpdate,this,e),Ze(this,aS).forEach(fte,e)}triggerUpdated(e){this.hostUpdated&&wn(this.hostUpdated,this,e),Ze(this,oS).forEach(fte,e)}triggerDestroy(){this.hostDestroy&&wn(this.hostDestroy,this),Ze(this,lS).forEach(wn)}triggerLifecycle(){this.hostLifecycle&&Vu(this,uS,P3).call(this,()=>this.hostLifecycle()),Ze(this,cS).forEach(Vu(this,uS,P3),this)}}rS=new WeakMap,nS=new WeakMap,W0=new WeakMap,sS=new WeakMap,aS=new WeakMap,oS=new WeakMap,lS=new WeakMap,cS=new WeakMap,Yy=new WeakMap,Z0=new WeakMap,_l=new WeakMap,Dh=new WeakMap,Im=new WeakMap,uS=new WeakSet,P3=function(e){h$(Ze(this,_l));const i=wn(e);(Array.isArray(i)?i:[i]).forEach(n=>{typeof n=="function"?Ze(this,Yy).push(n):typeof n=="object"&&typeof n.remove=="function"&&Ze(this,Yy).push(n.remove)})};function fte(t){wn(t,void 0,this)}const fk=rD,mte=t=>{if(typeof t!="object"&&typeof t!="function"||t===null)return t;const e={get(r,n,s){if(!((n==="exports"||n==="_exports")&&n in r&&r[n]===i)&&(n in r||n in Promise.prototype||typeof n=="symbol"))return typeof r=="function"?r[n]:Reflect.get(r,n,s)}},i=new Proxy(t,e);return i},P2e=t=>t.replace(O2e,(e,i)=>`${i===0?"":"-"}${e.toLowerCase()}`),O2e=/[A-Z]+(?![a-z])|[A-Z]/gu,L2e=t=>`${t??""}`,F2e=1,R2e=2,z2e=4,N2e=8,D2e=16,j2e=32,V2e=64,ehe=t=>{var i,r;let e=t;for(;e=e.parentNode??e.host;)if((i=e==null?void 0:e.constructor)!=null&&i.lumina){const n=e;return(r=n.manager)!=null&&r.loadedCalled||(n.J??n._offspring).push(t),(n.I??n._postLoad).promise}return!1},gte={};function the(){}const O3=Object.defineProperty,U2e=globalThis.HTMLElement??the;var xl,Mm,dS,ak,NB;const jX=class jX extends U2e{constructor(){var n,s;super();bi(this,ak);bi(this,xl);bi(this,Mm);bi(this,dS);oi(this,Mm,{}),oi(this,dS,[]),this.I=new aE,this.H=new aE,this.J=[];const i=this,r=i.constructor;i._offspring=i.J,i._postLoad=i.I,(n=r.C)==null||n.forEach(a=>{Object.hasOwn(i,a)&&(Ze(i,Mm)[a]=i[a],delete i[a])}),r.A?Vu(s=i,ak,NB).call(s,{a:r.A}):r.B.then(async a=>{var o,l;await r.K.p,Vu(l=i,ak,NB).call(l,await(((o=a.default)==null?void 0:o.then(c=>typeof c=="function"?{a:c}:c))??a))}).catch(a=>{i.H.reject(a),setTimeout(()=>{throw a})})}static F(){for(const i of this.C??[])O3(this.prototype,i,{configurable:!0,enumerable:!0,get(){return Ze(this,Mm)[i]},set(r){Ze(this,Mm)[i]=r}});for(const i of this.E??[])O3(this.prototype,i,{async value(...r){return Ze(this,xl)||await this.H.promise,await Ze(this,xl)[i](...r)},configurable:!0});for(const i of this.D??[])O3(this.prototype,i,{value(...r){return Ze(this,xl)[i](...r)},configurable:!0})}get manager(){var i;return(i=Ze(this,xl))==null?void 0:i.manager}attributeChangedCallback(i,r,n){var s;(s=Ze(this,xl))==null||s.attributeChangedCallback(i,r,n),Ze(this,xl)||Ze(this,dS).push(i)}connectedCallback(){var i,r;Ze(this,xl)?(r=(i=Ze(this,xl)).connectedCallback)==null||r.call(i):queueMicrotask(()=>this.G=ehe(this))}disconnectedCallback(){var i,r;(r=(i=Ze(this,xl))==null?void 0:i.disconnectedCallback)==null||r.call(i)}async componentOnReady(){return await this.H.promise,this}addController(){}requestUpdate(){var i;(i=Ze(this,xl))==null||i.requestUpdate()}};xl=new WeakMap,Mm=new WeakMap,dS=new WeakMap,ak=new WeakSet,NB=function(i){var g;const r=this.constructor,n=r.L,s=Ze(this,Mm),a=Object.values(i).find(v=>v.L===n),o=`${n}--lazy`;let l=a;for(;l&&!Object.hasOwn(l,"lumina");)l=Object.getPrototypeOf(l);q2e(l),!r.A&&(r.A=a,customElements.define(o,a)),a.N=this;const h=document.createElement(o);a.N=void 0,oi(this,xl,h),oi(this,Mm,h),Ze(this,dS).forEach(v=>h.attributeChangedCallback(v,null,this.getAttribute(v))),Object.entries(s).forEach(B2e,h);const m=this.isConnected;(m||this.G)&&((g=h.connectedCallback)==null||g.call(h),m||h.disconnectedCallback())},jX.lumina=!0;let yte=jX;function B2e([t,e]){this[t]=e}const q2e=t=>{const e=t.prototype,i=Element.prototype;Object.hasOwn(e,"isConnected")||(e.setAttribute=function(n,s){i.setAttribute.call(this.el,n,s)},e.removeAttribute=function(n){i.removeAttribute.call(this.el,n)},O3(e,"isConnected",{get(){return Reflect.get(i,"isConnected",this.el)}}))};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Vh={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4},xT=t=>(...e)=>({_$litDirective$:t,values:e});let $T=class{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,i,r){this._$Ct=e,this._$AM=i,this._$Ci=r}_$AS(e,i){return this.update(e,i)}update(e,i){return this.render(...i)}};/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const H2e=xT(class extends $T{constructor(t){var e;if(super(t),t.type!==Vh.ATTRIBUTE||t.name!=="class"||((e=t.strings)==null?void 0:e.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(t){return" "+Object.keys(t).filter((e=>t[e])).join(" ")+" "}update(t,[e]){var r,n;if(this.st===void 0){this.st=new Set,t.strings!==void 0&&(this.nt=new Set(t.strings.join(" ").split(/\s/).filter((s=>s!==""))));for(const s in e)e[s]&&!((r=this.nt)!=null&&r.has(s))&&this.st.add(s);return this.render(e)}const i=t.element.classList;for(const s of this.st)s in e||(i.remove(s),this.st.delete(s));for(const s in e){const a=!!e[s];a===this.st.has(s)||(n=this.nt)!=null&&n.has(s)||(a?(i.add(s),this.st.add(s)):(i.remove(s),this.st.delete(s)))}return vc}});/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ihe="important",G2e=" !"+ihe,W2e=xT(class extends $T{constructor(t){var e;if(super(t),t.type!==Vh.ATTRIBUTE||t.name!=="style"||((e=t.strings)==null?void 0:e.length)>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(t){return Object.keys(t).reduce(((e,i)=>{const r=t[i];return r==null?e:e+`${i=i.includes("-")?i:i.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${r};`}),"")}update(t,[e]){const{style:i}=t.element;if(this.ft===void 0)return this.ft=new Set(Object.keys(e)),this.render(e);for(const r of this.ft)e[r]==null&&(this.ft.delete(r),r.includes("-")?i.removeProperty(r):i[r]=null);for(const r in e){const n=e[r];if(n!=null){this.ft.add(r);const s=typeof n=="string"&&n.endsWith(G2e);r.includes("-")||s?i.setProperty(r,s?n.slice(0,-11):n,s?ihe:""):i[r]=n}}return vc}});/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{I:Z2e}=C2e,rhe=t=>t.strings===void 0,vte=()=>document.createComment(""),nM=(t,e,i)=>{var s;const r=t._$AA.parentNode,n=e===void 0?t._$AB:e._$AA;if(i===void 0){const a=r.insertBefore(vte(),n),o=r.insertBefore(vte(),n);i=new Z2e(a,o,t,t.options)}else{const a=i._$AB.nextSibling,o=i._$AM,l=o!==t;if(l){let c;(s=i._$AQ)==null||s.call(i,t),i._$AM=t,i._$AP!==void 0&&(c=t._$AU)!==o._$AU&&i._$AP(c)}if(a!==n||l){let c=i._$AA;for(;c!==a;){const h=c.nextSibling;r.insertBefore(c,n),c=h}}}return i},Sb=(t,e,i=t)=>(t._$AI(e,i),t),Y2e={},bW=(t,e=Y2e)=>t._$AH=e,J2e=t=>t._$AH,xV=t=>{t._$AR(),t._$AA.remove()};/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const bte=xT(class extends $T{constructor(t){if(super(t),t.type!==Vh.PROPERTY&&t.type!==Vh.ATTRIBUTE&&t.type!==Vh.BOOLEAN_ATTRIBUTE)throw Error("The `live` directive is not allowed on child or event bindings");if(!rhe(t))throw Error("`live` bindings can only contain a single expression")}render(t){return t}update(t,[e]){if(e===vc||e===Xe)return e;const i=t.element,r=t.name;if(t.type===Vh.PROPERTY){if(e===i[r])return vc}else if(t.type===Vh.BOOLEAN_ATTRIBUTE){if(!!e===i.hasAttribute(r))return vc}else if(t.type===Vh.ATTRIBUTE&&i.getAttribute(r)===e+"")return vc;return bW(t),e}});/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const r2=(t,e)=>{var r;const i=t._$AN;if(i===void 0)return!1;for(const n of i)(r=n._$AO)==null||r.call(n,e,!1),r2(n,e);return!0},FF=t=>{let e,i;do{if((e=t._$AM)===void 0)break;i=e._$AN,i.delete(t),t=e}while((i==null?void 0:i.size)===0)},nhe=t=>{for(let e;e=t._$AM;t=e){let i=e._$AN;if(i===void 0)e._$AN=i=new Set;else if(i.has(t))break;i.add(t),K2e(e)}};function X2e(t){this._$AN!==void 0?(FF(this),this._$AM=t,nhe(this)):this._$AM=t}function Q2e(t,e=!1,i=0){const r=this._$AH,n=this._$AN;if(n!==void 0&&n.size!==0)if(e)if(Array.isArray(r))for(let s=i;s<r.length;s++)r2(r[s],!1),FF(r[s]);else r!=null&&(r2(r,!1),FF(r));else r2(this,t)}const K2e=t=>{t.type==Vh.CHILD&&(t._$AP??(t._$AP=Q2e),t._$AQ??(t._$AQ=X2e))};let eEe=class extends $T{constructor(){super(...arguments),this._$AN=void 0}_$AT(e,i,r){super._$AT(e,i,r),nhe(this),this.isConnected=e._$AU}_$AO(e,i=!0){var r,n;e!==this.isConnected&&(this.isConnected=e,e?(r=this.reconnected)==null||r.call(this):(n=this.disconnected)==null||n.call(this)),i&&(r2(this,e),FF(this))}setValue(e){if(rhe(this._$Ct))this._$Ct._$AI(e,this);else{const i=[...this._$Ct._$AH];i[this._$Ci]=e,this._$Ct._$AI(i,this,0)}}disconnected(){}reconnected(){}};/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const vi=()=>new tEe;let tEe=class{};const $V=new WeakMap,gt=xT(class extends eEe{render(t){return Xe}update(t,[e]){var r;const i=e!==this.G;return i&&this.G!==void 0&&this.rt(void 0),(i||this.lt!==this.ct)&&(this.G=e,this.ht=(r=t.options)==null?void 0:r.host,this.rt(this.ct=t.element)),Xe}rt(t){if(this.isConnected||(t=void 0),typeof this.G=="function"){const e=this.ht??globalThis;let i=$V.get(e);i===void 0&&(i=new WeakMap,$V.set(e,i)),i.get(this.G)!==void 0&&this.G.call(this.ht,void 0),i.set(this.G,t),t!==void 0&&this.G.call(this.ht,t)}else this.G.value=t}get lt(){var t,e;return typeof this.G=="function"?(t=$V.get(this.ht??globalThis))==null?void 0:t.get(this.G):(e=this.G)==null?void 0:e.value}disconnected(){this.lt===this.ct&&this.rt(void 0)}reconnected(){this.rt(this.ct)}});var Cm,fd,hS;class iEe extends fk{constructor(i){super(i);bi(this,Cm);bi(this,fd);bi(this,hS);this.destroyed=!1,this.R=!1,this.V=Xe,this.T=[],oi(this,hS,new WeakMap),oi(this,fd,i),this.exports=void 0,this.hasDestroy=DB in i&&typeof i.destroy=="function",O$.prototype.addController.call(i,{hostConnected:()=>{if(this.destroyed){const r=i.el.localName;throw i.el.remove(),new Error(`The ${r} component has already been destroyed. It cannot be used again. If you meant to disconnect and reconnect a component without automatic destroy, set the ${DB} prop.`)}Ze(this,Cm)!==void 0&&clearTimeout(Ze(this,Cm)),iD();for(const r of i.M)"triggerConnected"in r?r.triggerConnected():wn(r.hostConnected,r)},hostDisconnected:()=>{for(const r of i.M)"triggerDisconnected"in r?r.triggerDisconnected():wn(r.hostDisconnected,r);this.hasDestroy&&!this.destroyed&&this.U()},hostUpdate:()=>{for(const r of i.M)"triggerUpdate"in r?r.triggerUpdate(this.Q):wn(r.hostUpdate,r,this.Q)},hostUpdated:()=>{for(const r of i.M)"triggerUpdated"in r?r.triggerUpdated(this.Q):wn(r.hostUpdated,r,this.Q);this.Q=void 0}}),queueMicrotask(()=>this.R=!0),h$(i)}async destroy(){if(!this.destroyed){Ze(this,fd).el.isConnected&&(this.hasDestroy=!1,Ze(this,fd).el.remove()),oi(this,Cm,void 0),this.destroyed=!0;for(const i of Ze(this,fd).M)"triggerDestroy"in i?i.triggerDestroy():wn(i.hostDestroy,i);Ze(this,fd).M.splice(0)}}U(){Ze(this,Cm)!==void 0&&clearTimeout(Ze(this,Cm)),!Ze(this,fd).el.isConnected&&!Ze(this,fd).autoDestroyDisabled&&oi(this,Cm,E2e(()=>void Ze(this,fd).destroy(),rEe))}S(i,r){const n=this.T;this.V=Xe,this.T=[],n.forEach(s=>s(i,r))}W(i,r){(typeof r=="object"&&r!==null||typeof r=="function")&&Ze(this,hS).set(r,i)}X(i){if(typeof i=="object"&&i!==null||typeof i=="function")return Ze(this,hS).get(i)}}Cm=new WeakMap,fd=new WeakMap,hS=new WeakMap;let rEe=1e3;const DB="autoDestroyDisabled";var Y0,ok,lk,J0,jh,wT,she,ahe;const Q2=class Q2 extends O${constructor(){super();bi(this,wT);bi(this,Y0);bi(this,ok);bi(this,lk);bi(this,J0);bi(this,jh);this.M=[],this.manager=new iEe(this);const i=this,r=i.constructor,n=r.N,s=r.K.o,a=Q2.prototype.shouldUpdate;oi(i,J0,(n==null?void 0:n.H)??new aE),i.I=(n==null?void 0:n.I)??new aE,i.J=(n==null?void 0:n.J)??[],i._offspring=i.J,i._postLoad=i.I,i.el=n??i,oi(i,lk,i.enableUpdating),i.enableUpdating=the,i.shouldUpdate!==a&&(oi(i,ok,i.shouldUpdate),i.shouldUpdate=a),s&&(oi(i,Y0,new Map),r.elementProperties.forEach((o,l)=>Ze(i,Y0).set(l,s())))}static finalizeStyles(i){var s;const r=super.finalizeStyles(i),n=this.shadowRootOptions===gte;return((s=this.K)==null?void 0:s.commonStyles)===void 0||n?r:[this.K.commonStyles,...r]}static createProperty(i,r){const n=typeof r=="number"?r:Array.isArray(r)?r[0]:0,s=Array.isArray(r)?r[1]:void 0,a=(s==null?void 0:s.hasChanged)??fW,o={attribute:n&F2e&&typeof i=="string"?P2e(i):!1,reflect:!!(n&R2e),type:n&z2e?Boolean:n&N2e?Number:void 0,state:!!(n&D2e),readOnly:!!(n&j2e),noAccessor:!!(n&V2e),c:!1,...s,hasChanged(l,c){const h=a(l,c);return o.c=h,h}};super.createProperty(i,o)}static getPropertyDescriptor(i,r,n){const s=this.K,a=super.getPropertyDescriptor(i,r,n);return n.d=a,{...a,get(){var o,l;return(o=s.t)==null||o.call(s,Ze(this,Y0).get(i)),(l=a.get)==null?void 0:l.call(this)},set(o){var c,h;const l=this.manager;if(n.readOnly&&!FB&&(l.R||l.connectedCalled))throw Error(`Cannot assign to read-only property "${i}" of ${this.el.localName}. Trying to assign "${o}"`);a.set.call(this,o??void 0),n.c&&((h=(c=Ze(this,Y0))==null?void 0:c.get(i))==null||h.notify()),l.T.length>0&&(iD(),l==null||l.S(i,o))}}}connectedCallback(){var n,s;if(this.el.hasAttribute("defer-hydration"))return;const i=(s=(n=this.constructor.K).c)==null?void 0:s.call(n,()=>this.requestUpdate());oi(this,jh,i);const r=!this.manager.connectedCalled;super.connectedCallback(),r?queueMicrotask(()=>Vu(this,wT,ahe).call(this).catch(a=>{Ze(this,J0).reject(a),setTimeout(()=>{throw a})})):i&&this.requestUpdate()}disconnectedCallback(){var i;super.disconnectedCallback(),(i=Ze(this,jh))==null||i.destroy(),oi(this,jh,void 0)}createRenderRoot(){const i=this.el.shadowRoot,r=this.constructor,n=r.shadowRootOptions,a=i??(n===gte?this.el:this.el.attachShadow(n));if(this.isConnected){const o=a.getRootNode();o.adoptedStyleSheets=[...o.adoptedStyleSheets,...r.elementStyles.map(l=>"styleSheet"in l?l.styleSheet:l)]}return a}shouldUpdate(i){var r;return this.manager.Q=i,((r=Ze(this,ok))==null?void 0:r.call(this,i))??!0}update(i){Ze(this,jh)?Vu(this,wT,she).call(this,i):super.update(i)}listen(i,r,n){const s=(r==null?void 0:r.bind(this))??r;this.manager.onLifecycle(()=>(this.el.addEventListener(i,s,n),()=>this.el.removeEventListener(i,s,n)))}listenOn(i,r,n,s){const a=(n==null?void 0:n.bind(this))??n;this.manager.onLifecycle(()=>(i.addEventListener(r,a,s),()=>i.removeEventListener(r,a,s)))}async componentOnReady(){return await Ze(this,J0).promise,this}addController(i){var r;this.M.push(i),!(lW in i)&&this.renderRoot&&this.el.isConnected&&((r=i.hostConnected)==null||r.call(i))}removeController(i){var r;this.M.splice(this.M.indexOf(i),1),(r=i.controllerRemoved)==null||r.call(i)}};Y0=new WeakMap,ok=new WeakMap,lk=new WeakMap,J0=new WeakMap,jh=new WeakMap,wT=new WeakSet,she=function(i){try{Ze(this,jh).clear(),this.constructor.K.r(Ze(this,jh),()=>Wee(Q2.prototype,this,"update").call(this,i))}catch(r){throw Ze(this,jh).clear(),r}},ahe=async function(){var s,a;const i=this.el.G??ehe(this.el);i&&await i;const r=[];for(const o of this.M)"triggerLoad"in o?r.push(o.triggerLoad()):r.push(LB(o.hostLoad,o));await Promise.all(r),await((s=this.load)==null?void 0:s.call(this)),this.manager.hasDestroy&&this.manager.onUpdate(o=>o.has(DB)&&this.manager.U()),Ze(this,lk).call(this,!0),this.performUpdate(),this.I.resolve(),await Promise.resolve();const n=this.J.filter(o=>{var l;return!((l=o.manager)!=null&&l.loadedCalled)});n.length&&await Promise.allSettled(n.map(async o=>await o.componentOnReady())),this.J.length=0,this.el.setAttribute(this.constructor.K.hydratedAttribute,"");for(const o of this.M)"triggerLoaded"in o?o.triggerLoaded():wn(o.hostLoaded,o);(a=this.loaded)==null||a.call(this),Ze(this,J0).resolve()},Q2.lumina=!0;let dt=Q2;const ohe=t=>{let e;const i=n=>{var s;e=new URL(n,((s=globalThis.location)==null?void 0:s.href)||void 0).href},r={...t,getAssetPath(n){var a;const s=new URL(n,e);return s.origin!==((a=globalThis.location)==null?void 0:a.origin)?s.href:s.pathname},setAssetPath:i,customElement(n,s){s.K=r,s.L=n,customElements.get(n)||customElements.define(n,s)}};return i(t.defaultAssetPath),r},H=t=>typeof t=="object"&&t!=null?H2e(t):t,qt=t=>typeof t=="object"&&t!=null?W2e(t):t,Pe=Xe;function wu(t,e,i){i==null?t.removeAttribute(e):t.setAttribute(e,i)}const Hm={toAttribute:t=>t===!0?"":t===!1?null:t},Hw=t=>{const e=document.createElement("div");return Qde(t,e),e.firstElementChild},nEe="calcite-mode-auto",sEe="calcite-mode-dark",Uh={rtl:"calcite--rtl",calciteAnimate:"calcite-animate",calciteAnimateInUp:"calcite-animate__in-up",calciteAnimateInDown:"calcite-animate__in-down",calciteAnimateInRight:"calcite-animate__in-right",calciteAnimateInLeft:"calcite-animate__in-left"},nD={filter:250,nextTick:0,resize:150,reposition:100},aEe=10,oEe=25;function wte(){const{classList:t}=document.body,e=window.matchMedia("(prefers-color-scheme: dark)").matches,i=()=>t.contains(sEe)||t.contains(nEe)&&e?"dark":"light",r=a=>document.body.dispatchEvent(new CustomEvent("calciteModeChange",{bubbles:!0,detail:{mode:a}})),n=a=>{s!==a&&r(a),s=a};let s=i();r(s),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",a=>n(a.matches?"dark":"light")),new MutationObserver(()=>n(i())).observe(document.body,{attributes:!0,attributeFilter:["class"]})}const zm=globalThis.calciteConfig,lEe=(zm==null?void 0:zm.focusTrapStack)||[],cEe=(zm==null?void 0:zm.logLevel)||"info",_te="3.3.3",uEe="2025-10-08",dEe="7391af08e";function hEe(){if(zm&&zm.version)return;console.info(`Using Calcite Components ${_te} [Date: ${uEe}, Revision: ${dEe}]`);const t=zm||globalThis.calciteConfig||{};Object.defineProperty(t,"version",{value:_te,writable:!1}),globalThis.calciteConfig=t}document.readyState==="interactive"?wte():document.addEventListener("DOMContentLoaded",wte,{once:!0});queueMicrotask(hEe);const pEe=ohe({defaultAssetPath:"https://js.arcgis.com/calcite-components/3.3.3/",hydratedAttribute:"calcite-hydrated"}),{customElement:ci,getAssetPath:lhe,setAssetPath:fEe}=pEe;/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */function mEe(t){return t.map(e=>{let i="";for(let r=0;r<e;r++)i+=((1+Math.random())*65536|0).toString(16).substring(1);return i}).join("-")}const Mc=()=>mEe([2,1,1,1,3]);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 *//*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var gEe=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],jB=gEe.join(","),che=typeof Element>"u",oE=che?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,RF=!che&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t==null?void 0:t.ownerDocument},zF=function t(e,i){var r;i===void 0&&(i=!0);var n=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),s=n===""||n==="true",a=s||i&&e&&t(e.parentNode);return a},yEe=function(e){var i,r=e==null||(i=e.getAttribute)===null||i===void 0?void 0:i.call(e,"contenteditable");return r===""||r==="true"},uhe=function(e,i,r){if(zF(e))return[];var n=Array.prototype.slice.apply(e.querySelectorAll(jB));return i&&oE.call(e,jB)&&n.unshift(e),n=n.filter(r),n},dhe=function t(e,i,r){for(var n=[],s=Array.from(e);s.length;){var a=s.shift();if(!zF(a,!1))if(a.tagName==="SLOT"){var o=a.assignedElements(),l=o.length?o:a.children,c=t(l,!0,r);r.flatten?n.push.apply(n,c):n.push({scopeParent:a,candidates:c})}else{var h=oE.call(a,jB);h&&r.filter(a)&&(i||!e.includes(a))&&n.push(a);var m=a.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(a),g=!zF(m,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(a));if(m&&g){var v=t(m===!0?a.children:m.children,!0,r);r.flatten?n.push.apply(n,v):n.push({scopeParent:a,candidates:v})}else s.unshift.apply(s,a.children)}}return n},hhe=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},phe=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||yEe(e))&&!hhe(e)?0:e.tabIndex},vEe=function(e,i){var r=phe(e);return r<0&&i&&!hhe(e)?0:r},bEe=function(e,i){return e.tabIndex===i.tabIndex?e.documentOrder-i.documentOrder:e.tabIndex-i.tabIndex},fhe=function(e){return e.tagName==="INPUT"},wEe=function(e){return fhe(e)&&e.type==="hidden"},_Ee=function(e){var i=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return i},xEe=function(e,i){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===i)return e[r]},$Ee=function(e){if(!e.name)return!0;var i=e.form||RF(e),r=function(o){return i.querySelectorAll('input[type="radio"][name="'+o+'"]')},n;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")n=r(window.CSS.escape(e.name));else try{n=r(e.name)}catch(a){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",a.message),!1}var s=xEe(n,e.form);return!s||s===e},SEe=function(e){return fhe(e)&&e.type==="radio"},TEe=function(e){return SEe(e)&&!$Ee(e)},IEe=function(e){var i,r=e&&RF(e),n=(i=r)===null||i===void 0?void 0:i.host,s=!1;if(r&&r!==e){var a,o,l;for(s=!!((a=n)!==null&&a!==void 0&&(o=a.ownerDocument)!==null&&o!==void 0&&o.contains(n)||e!=null&&(l=e.ownerDocument)!==null&&l!==void 0&&l.contains(e));!s&&n;){var c,h,m;r=RF(n),n=(c=r)===null||c===void 0?void 0:c.host,s=!!((h=n)!==null&&h!==void 0&&(m=h.ownerDocument)!==null&&m!==void 0&&m.contains(n))}}return s},xte=function(e){var i=e.getBoundingClientRect(),r=i.width,n=i.height;return r===0&&n===0},MEe=function(e,i){var r=i.displayCheck,n=i.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var s=oE.call(e,"details>summary:first-of-type"),a=s?e.parentElement:e;if(oE.call(a,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof n=="function"){for(var o=e;e;){var l=e.parentElement,c=RF(e);if(l&&!l.shadowRoot&&n(l)===!0)return xte(e);e.assignedSlot?e=e.assignedSlot:!l&&c!==e.ownerDocument?e=c.host:e=l}e=o}if(IEe(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return xte(e);return!1},CEe=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var i=e.parentElement;i;){if(i.tagName==="FIELDSET"&&i.disabled){for(var r=0;r<i.children.length;r++){var n=i.children.item(r);if(n.tagName==="LEGEND")return oE.call(i,"fieldset[disabled] *")?!0:!n.contains(e)}return!0}i=i.parentElement}return!1},VB=function(e,i){return!(i.disabled||zF(i)||wEe(i)||MEe(i,e)||_Ee(i)||CEe(i))},$te=function(e,i){return!(TEe(i)||phe(i)<0||!VB(e,i))},EEe=function(e){var i=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(i)||i>=0)},kEe=function t(e){var i=[],r=[];return e.forEach(function(n,s){var a=!!n.scopeParent,o=a?n.scopeParent:n,l=vEe(o,a),c=a?t(n.candidates):o;l===0?a?i.push.apply(i,c):i.push(o):r.push({documentOrder:s,tabIndex:l,item:n,isScope:a,content:c})}),r.sort(bEe).reduce(function(n,s){return s.isScope?n.push.apply(n,s.content):n.push(s.content),n},[]).concat(i)},AEe=function(e,i){i=i||{};var r;return i.getShadowRoot?r=dhe([e],i.includeContainer,{filter:$te.bind(null,i),flatten:!1,getShadowRoot:i.getShadowRoot,shadowRootFilter:EEe}):r=uhe(e,i.includeContainer,$te.bind(null,i)),kEe(r)},PEe=function(e,i){i=i||{};var r;return i.getShadowRoot?r=dhe([e],i.includeContainer,{filter:VB.bind(null,i),flatten:!0,getShadowRoot:i.getShadowRoot}):r=uhe(e,i.includeContainer,VB.bind(null,i)),r};const wW={getShadowRoot:!0};function mhe(t){return Array.isArray(t)?t:Array.from(t)}function Uo(t){const r=ST(t,"[dir]");return r?r.getAttribute("dir"):"ltr"}function mk(t){return t.getRootNode()}function OEe(t){const e=mk(t);return"host"in e?e:null}function ghe(t){return t.host||null}function gk(t,{selector:e,id:i}){if(!t)return null;t.assignedSlot&&(t=t.assignedSlot);const r=mk(t);return(i?"getElementById"in r?r.getElementById(i):null:e?r.querySelector(e):null)||gk(ghe(r),{selector:e,id:i})}function ST(t,e){return t?t.closest(e)||ST(ghe(mk(t)),e):null}function LEe(t){return typeof(t==null?void 0:t.setFocus)=="function"}async function HS(t,e=!1,i="tabbable",r,n){return t?LEe(t)&&r!==t?t.setFocus(n):(i==="tabbable"?FEe:zEe)(t,e,n):void 0}function yhe(t,e){if(t)return AEe(t,{...wW,includeContainer:e})[0]??t}function FEe(t,e,i){var r;(r=yhe(t,e))==null||r.focus(i)}function REe(t,e){if(t)return PEe(t,{...wW,includeContainer:e})[0]??t}function zEe(t,e,i){var r;(r=REe(t,e))==null||r.focus(i)}function Ste(t,e){return Array.from(t.children).filter(i=>i.matches(e))}function NEe(t,e){return t.filter(i=>i.matches(e))}function Gw(t,e,i){if(typeof e=="string"&&e!=="")return e;if(e===""||e===!0)return t[i]}function Tte(t,e){return!(e.left>t.right||e.right<t.left||e.top>t.bottom||e.bottom<t.top)}function yk(t){return(!!t).toString()}function DEe(t){return ii(t)||UEe(t)}function jEe(t){return BEe(t).filter(e=>e.nodeType===Node.TEXT_NODE).map(e=>e.textContent).join("").trim()}function VEe(t){var e;for(const i of t.childNodes)if(i.nodeType===Node.TEXT_NODE&&((e=i.textContent)==null?void 0:e.trim())!==""||i.nodeType===Node.ELEMENT_NODE)return!0;return!1}function UEe(t){return!!jEe(t)}function BEe(t){return t.currentTarget.assignedNodes({flatten:!0})}function ii(t){return!!fu(t).length}function fu(t,e){return vhe(t.currentTarget,e)}function vhe(t,e){const i=t.assignedElements({flatten:!0});return e?NEe(i,e):i}function n2(t){return!!(t.isPrimary&&t.button===0)}function qEe(t){return t.detail===0}const Pm=(t,e,i,r=!0,n=!0,s=!1)=>{const a=t.indexOf(e),o=a===0,l=a===t.length-1;r&&(i=i==="previous"&&o?"last":i==="next"&&l?"first":i);let c;return i==="previous"?c=t[a-1]||t[r?t.length-1:a]:i==="next"?c=t[a+1]||t[r?0:a]:i==="last"?c=t[t.length-1]:c=t[0],HS(c,n,"tabbable",s?c:void 0),c};function HEe(t,e){if(t.parentNode!==e.parentNode)return!1;const i=Array.from(t.parentNode.children);return i.indexOf(t)<i.indexOf(e)}async function bhe(t,e){return whe(t,e,"animation")}async function GEe(t,e){return whe(t,e,"transition")}function Ite(t,e,i){const r=e==="transition"?"transitionProperty":"animationName";return t.getAnimations().find(n=>n[r]===i)}async function whe(t,e,i){let r=Ite(t,i,e);if(r||(await UB(),r=Ite(t,i,e)),!!r)try{await r.finished}catch{}}async function UB(){await new Promise(t=>requestAnimationFrame(()=>t()))}function g1(t){return t.endsWith("px")?parseFloat(t):t.endsWith("vw")?Mte(parseFloat(t),window.innerWidth):t.endsWith("vh")?Mte(parseFloat(t),window.innerHeight):0}function Mte(t,e){return t*e/100}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */function Gn(t,e,i){const r=WEe(t);return new r(e,i)}function WEe(t){class e extends window.MutationObserver{constructor(r){super(r),this.observedEntry=[],this.callback=r}observe(r,n){return this.observedEntry.push({target:r,options:n}),super.observe(r,n)}unobserve(r){const n=this.observedEntry.filter(s=>s.target!==r);this.observedEntry=[],this.callback(super.takeRecords(),this),this.disconnect(),n.forEach(s=>this.observe(s.target,s.options))}}return(function(){return t==="intersection"?window.IntersectionObserver:t==="mutation"?e:window.ResizeObserver})()}function lE(t,e,i,r){if(t&&(e&&t.unobserve(e),!!i)){if(t instanceof MutationObserver){t.observe(i,r);return}t.observe(i)}}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Cte=new Set,Ete={trace:0,debug:1,info:2,warn:4,error:8,off:10};function ZEe(t){return Ete[t]>=Ete[cEe]}function sx(t,...e){if(!ZEe(t))return;console[t].call(this,"%ccalcite","background: #007AC2; color: #fff; border-radius: 4px; padding: 2px 4px;",...e)}let SV;const NF={debug:t=>sx("debug",t),info:t=>sx("info",t),warn:t=>sx("warn",t),error:t=>sx("error",t),trace:t=>sx("trace",t),deprecated:YEe};function YEe(t,{component:e,name:i,suggested:r,removalVersion:n}){const s=`${t}:${t==="component"?"":e}${i}`;if(Cte.has(s))return;Cte.add(s);const a=Array.isArray(r);a&&!SV&&(SV=new Intl.ListFormat("en",{style:"long",type:"disjunction"}));const o=`[${i}] ${t} is deprecated and will be removed in ${n==="future"?"a future version":`v${n}`}.${r?` Use ${a?SV.format(r.map(l=>`"${l}"`)):`"${r}"`} instead.`:""}`;sx("warn",o)}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const kte={flipRtl:"flip-rtl",svg:"svg"},_he={},TV={},xhe={s:16,m:24,l:32};function $he({icon:t,scale:e}){const i=xhe[e],r=QEe(t),n=r.charAt(r.length-1)==="F";return`${n?r.substring(0,r.length-1):r}${i}${n?"F":""}`}async function JEe(t){const e=$he(t),i=She(e);if(i)return i;TV[e]||(TV[e]=fetch(lhe(`./assets/icon/${e}.json`)).then(n=>n.json()).catch(()=>(NF.error(`${t.icon} (${t.scale}) icon failed to load`),"")));const r=await TV[e];return _he[e]=r,r}function XEe(t){return She($he(t))}function She(t){return _he[t]}function QEe(t){const e=!isNaN(Number(t.charAt(0))),i=t.split("-");if(i.length>0){const n=/[a-z]/i;t=i.map((s,a)=>s.replace(n,function(l,c){return a===0&&c===0?l:l.toUpperCase()})).join("")}return e?`i${t}`:t}const KEe=ct`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{display:inline-flex;color:var(--calcite-icon-color, var(--calcite-ui-icon-color, currentColor))}:host([scale=s]){inline-size:16px;block-size:16px;min-inline-size:16px;min-block-size:16px}:host([scale=m]){inline-size:24px;block-size:24px;min-inline-size:24px;min-block-size:24px}:host([scale=l]){inline-size:32px;block-size:32px;min-inline-size:32px;min-block-size:32px}.flip-rtl{transform:scaleX(-1)}.svg{display:block}:host([hidden]){display:none}[hidden]{display:none}`,cN=class cN extends dt{constructor(){super(...arguments),this.visible=!1,this.flipRtl=!1,this.icon=null,this.preload=!1,this.scale="m"}connectedCallback(){if(super.connectedCallback(),this.preload){this.visible=!0,this.loadIconPathData();return}this.visible||this.waitUntilVisible(()=>{this.visible=!0,this.loadIconPathData()})}willUpdate(e){(e.has("icon")&&(this.hasUpdated||this.icon!==null)||e.has("scale")&&(this.hasUpdated||this.scale!=="m"))&&this.loadIconPathData()}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this.intersectionObserver)==null||e.disconnect(),this.intersectionObserver=null}async loadIconPathData(){const{icon:e,scale:i,visible:r}=this;if(!e||!r)return;const n={icon:e,scale:i},s=XEe(n)||await JEe(n);e===this.icon&&(this.pathData=s)}waitUntilVisible(e){if(this.intersectionObserver=Gn("intersection",i=>{i.forEach(r=>{r.isIntersecting&&(this.intersectionObserver.disconnect(),this.intersectionObserver=null,e())})},{rootMargin:"50px"}),!this.intersectionObserver){e();return}this.intersectionObserver.observe(this.el)}render(){const{el:e,flipRtl:i,pathData:r,scale:n,textLabel:s}=this,a=Uo(e),o=xhe[n],l=!!s,c=[].concat(r||"");return this.el.ariaHidden=yk(!l),this.el.ariaLabel=l?s:null,this.el.role=l?"img":null,q`<svg aria-hidden=true class=${H({[kte.flipRtl]:a==="rtl"&&i,[kte.svg]:!0})} fill=currentColor height=100% viewBox=${`0 0 ${o} ${o}`} width=100% xmlns=http://www.w3.org/2000/svg>${c.map(h=>typeof h=="string"?Xi`<path d=${h??Xe} />`:Xi`<path d=${h.d??Xe} opacity=${("opacity"in h?h.opacity:1)??Xe} />`)}</svg>`}};cN.properties={pathData:[16,{},{state:!0}],visible:[16,{},{state:!0}],flipRtl:[7,{},{reflect:!0,type:Boolean}],icon:[3,{},{reflect:!0}],preload:[7,{},{reflect:!0,type:Boolean}],scale:[3,{},{reflect:!0}],textLabel:1},cN.styles=KEe;let DF=cN;ci("calcite-icon",DF);const TT=Object.freeze(Object.defineProperty({__proto__:null,Icon:DF},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */function eke(){const{disabled:t}=this;t||HTMLElement.prototype.click.call(this)}function The(t){t.target.disabled&&t.preventDefault()}const Ihe=["mousedown","mouseup","click"];function Mhe(t){t.target.disabled&&(t.stopImmediatePropagation(),t.preventDefault())}const jF={capture:!0};function Vs(t){if(t.disabled){t.el.setAttribute("aria-disabled","true"),t.el.contains(document.activeElement)&&document.activeElement.blur(),tke(t);return}rke(t),t.el.removeAttribute("aria-disabled")}function tke(t){t.el.click=eke,ike(t.el)}function ike(t){t.addEventListener("pointerdown",The,jF),Ihe.forEach(e=>t.addEventListener(e,Mhe,jF))}function rke(t){delete t.el.click,nke(t.el)}function nke(t){t.removeEventListener("pointerdown",The,jF),Ihe.forEach(e=>t.removeEventListener(e,Mhe,jF))}const ske={container:"interaction-container"},Us=({children:t,disabled:e})=>q`<div class=${H(ske.container)} .inert=${e}>${t}</div>`;/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */function vk(t){return t==="Enter"||t===" "}const sD=["0","1","2","3","4","5","6","7","8","9"];/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */function gr(t){return t==="l"?"m":"s"}async function ake(t){await t.componentOnReady(),await t.updateComplete}const bk=t=>(...e)=>{const i=uW(),r=new t(...e),n=r.exports;cW(i.at(-1));const s=r.component.manager;s.W(r,n),r.watchExports(s.W.bind(s,r)),a2e(r);const a=[r.component,...i].reverse();return yW(a,o=>o===void 0?void 0:oke(r,o,n),n)},oke=(t,{host:e,key:i,isReactive:r},n)=>{var m;const s=e,a=s[i]!==t.exports,o=s[i]!==n,l=n!==t.exports;if(a&&!o&&l&&(s[i]=t.exports),e===t.component){if(r){const g=t.component.manager;o&&g.W(t,s[i]),t.onUpdate(v=>{if(v.has(i)){const b=s[i];b!==t.exports&&g.W(t,b)}})}t.O=r?void 0:i}const h=(m=t.component.constructor.elementProperties.get(i))==null?void 0:m.readOnly;t.watchExports(()=>{s[i]!==t.exports&&(h?u2e(()=>{s[i]=t.exports}):s[i]=t.exports)})};function lke(t,e){return t.assignedElements({flatten:!0}).filter(r=>r.matches(e))}const ar=(...t)=>{const e=[];for(let r=0;r<t.length;r++){const n=t[r];if(typeof n=="string")e.push(n);else if(Array.isArray(n))e.push.apply(e,n);else if(typeof n=="object")for(const s in n)n[s]&&e.push(s)}const i=e.join(" ");return e.length=0,i},cke=(t,e)=>{let i=t;for(;i;){if(i===e)return!0;if(!i.parentNode)return!1;i.parentNode instanceof ShadowRoot?i=i.parentNode.host:i=i.parentNode}return!1},Che=(t,e,i)=>{const r=uke(e).subscribe;return r(n=>{n.some(a=>cke(t,a.target))&&i()})},IV={},uke=t=>{const e=t.join(","),i=IV[e];if(i!==void 0)return i;const r=new Set,n=new MutationObserver(a=>r.forEach(o=>o(a)));globalThis.document&&n.observe(document.documentElement,{attributes:!0,attributeFilter:t,subtree:!0});const s={subscribe:a=>(r.add(a),()=>{r.delete(a),r.size===0&&(n.disconnect(),IV[e]=void 0)})};return IV[e]=s,s},Ehe=(t,e)=>{var r,n;let i=t;for(;i;){const s=(r=i.closest)==null?void 0:r.call(i,e);if(s)return s;const a=(n=i.getRootNode)==null?void 0:n.call(i);if(a===globalThis.document)return;i=a.host}};function khe(t){const e=Ehe(t,".calcite-mode-dark, .calcite-mode-light, .calcite-mode-auto");return e!=null&&e.classList.contains("calcite-mode-dark")||e!=null&&e.classList.contains("calcite-mode-auto")&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}const Ahe=(t,e,i)=>{const r=Ehe(t,`[${e}]`);return(r==null?void 0:r.getAttribute(e))??i},dke="ar,bg,bs,ca,cs,da,de,el,en,es,et,fi,fr,he,hr,hu,id,it,ja,ko,lt,lv,nl,nb,no,pl,pt-BR,pt-PT,ro,ru,sk,sl,sr,sv,th,tr,uk,vi,zh-CN,zh-HK,zh-TW".split(","),hke=new Set(dke),VF="en",pke={pt:"pt-PT",nb:"no",nn:"no",zh:"zh-CN"},fke=async(t,e,i="")=>{const r=`${e}/${i}`,n=`${r}${t}.json`;return MV[n]??(MV[n]=Phe(t,r)),await MV[n]},MV={},Phe=async(t,e)=>{const i=`${e}${t}.json`;try{const r=await fetch(i);if(r.ok)return await r.json()}catch(r){return console.error(r),{}}return t===VF?{}:await Phe(VF,e)},Ohe=t=>{var i;const e=Ahe(t,"lang",((i=globalThis.navigator)==null?void 0:i.language)||VF);return{lang:e,t9nLocale:Lhe(e)}},Lhe=t=>{const[e,i]=t.split("-"),r=e.toLowerCase();let n=r;return i&&(n=`${r}-${i.toUpperCase()}`),n=pke[n]??n,hke.has(n)?n:i?Lhe(r):VF},mke=(t,e,i,r)=>{let n;const s=()=>gke(t,e(),r).then(a=>{((n==null?void 0:n.lang)!==a.lang||n.t9nLocale!==a.t9nLocale||n.t9nStrings!==a.t9nStrings)&&i(a),n=a}).catch(console.error);return queueMicrotask(s),Che(t,["lang"],s)},gke=async(t,e,i=t.localName.split("-").slice(1).join("-"))=>{const{lang:r,t9nLocale:n}=Ohe(t),s=`${e}/${i}/t9n`,o=i===null?{}:await fke(n,s,"messages.");return{lang:r,t9nLocale:n,t9nStrings:o}},_W=t=>Fhe(void 0,t),wk=t=>e=>Fhe(e,t);class yke extends rD{constructor(e,i){super(e);const r=this.exports;try{h$(this.component);const n=i(this.component,this),s=this.exports!==r;if(n2e(n)){s||this.setProvisionalExports(n);const a=n.then(o=>{this.exports=o,super.catchUpLifecycle()}).catch(o=>{this.P.reject(o),console.error(o)});this.onLoad(async()=>await a)}else(!s||n!==void 0)&&(this.exports=n),queueMicrotask(()=>super.catchUpLifecycle())}catch(n){this.P.reject(n),console.error(n)}}catchUpLifecycle(){}}const Fhe=bk(yke),Rhe=(t,e)=>new vke(t,e);var pS,fS,ck;class vke extends rD{constructor(i,r){super();bi(this,pS);bi(this,fS);bi(this,ck);oi(this,fS,i),oi(this,ck,r),oi(this,pS,new MutationObserver(n=>{n.forEach(s=>{i.includes(s.attributeName)&&r.call(this.component,this.component.el.getAttribute(s.attributeName),s.oldValue,s.attributeName)})}))}hostConnected(){Ze(this,fS).forEach(i=>{this.component.el.hasAttribute(i)&&Ze(this,ck).call(this.component,null,this.component.el.getAttribute(i),i)}),Ze(this,pS).observe(this.component.el,{attributes:!0,attributeOldValue:!0,attributeFilter:Ze(this,fS)})}hostDisconnected(){Ze(this,pS).disconnect()}}pS=new WeakMap,fS=new WeakMap,ck=new WeakMap;const bke=t=>(...e)=>{const i=uW(),r=new t(...e);return cW(i.at(-1)),r},wke=t=>_W((e,i)=>{const r=globalThis.matchMedia(t),n=()=>{i.exports=r.matches};n(),i.onLifecycle(()=>(r.addEventListener("change",n),()=>r.removeEventListener("change",n)))}),Ate="ltr",_k=()=>_W((t,e)=>{e.exports=Ate,e.onLifecycle(()=>{const i=()=>{const r=Ahe(t.el,"dir",Ate);e.exports=r==="rtl"?"rtl":"ltr"};return i(),Che(t.el,["dir"],i)})}),zhe=t=>(e={})=>_W((i,r)=>{const n=Ohe(i.el),s={_lang:n.lang,_t9nLocale:n.t9nLocale,_loading:!0},a=i;r.onLifecycle(()=>mke(i.el,()=>t("./assets"),({t9nLocale:l,t9nStrings:c,lang:h})=>{const m={...c,_lang:h,_t9nLocale:l,_loading:!1};r.exports=m;const g=c.componentLabel;typeof g=="string"&&"label"in i&&i.label==null&&(i.label??(i.label=g)),o(a.messageOverrides)},e.name));const o=l=>{const c=r.exports,h=c._original??c,m=Nhe(h,l);l&&(m._original=h),r.exports=m};return"messageOverrides"in a&&r.onUpdate(l=>{l.has("messageOverrides")&&o(a.messageOverrides)}),e.blocking?(r.setProvisionalExports(s,!1),r.ready):s}),Nhe=(t,e)=>{if(!e)return t;const i={...t};return Object.entries(e).forEach(([r,n])=>{typeof n=="object"?i[r]=Nhe(t[r],n):i[r]=n??t[r]}),i},aD=t=>xke,_ke="arcgisPropertyChange",xke=(...t)=>{const e=_T(),i=vW(_ke,void 0,e);let r=!0;return e.manager.onUpdated(n=>{if(r||!e.el.isConnected){r=!1;return}for(const s of t)n.has(s)&&i.emit({name:s})}),i};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const un=zhe(lhe);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const dn=()=>wk((t,e)=>{let i;function r(){i==null||i.abort()}return e.onLoad(()=>{t.listen("focus",()=>{i=new AbortController,t.el.addEventListener("focusout",r,{signal:i.signal})})}),e.onDisconnected(()=>{t.el.removeEventListener("focusout",r)}),async(n,s)=>{if(t.disabled)return;const a=Ske(n());if(!a)return;const{target:o,includeContainer:l,strategy:c}=a,h=mk(t.el),m=h.activeElement;if(await ake(t),!(m!==h.activeElement||i&&!(i!=null&&i.signal.aborted)))return t.el.removeEventListener("focus",r),HS(o,l,c,t.el,s)}});function $ke(t){return"target"in t&&("includeContainer"in t||"strategy"in t)}function Ske(t){if(t)return $ke(t)?t:{target:t}}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Ua={title:"title",close:"close",imageContainer:"image-container",chipIcon:"chip-icon",textSlotted:"text--slotted",container:"container",imageSlotted:"image--slotted",closable:"closable",multiple:"multiple",single:"single",selectable:"selectable",selectIcon:"select-icon",selectIconActive:"select-icon--active",nonInteractive:"non-interactive",isCircle:"is-circle",selected:"selected"},Tke={image:"image"},AP={close:"x",checkedSingle:"circle-f",uncheckedMultiple:"square",checkedMultiple:"check-square-f"},Ike=ct`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:inline-flex;cursor:default;border-radius:var(--calcite-chip-corner-radius, 9999px)}:host([closed]){display:none}:host([appearance=outline]) .container,:host([appearance=outline-fill]) .container{color:var(--calcite-chip-text-color, var(--calcite-color-text-1))}:host([appearance=outline]) .close,:host([appearance=outline-fill]) .close{color:var(--calcite-chip-close-icon-color, var(--calcite-close-icon-color, var(--calcite-color-text-3)))}:host([appearance=outline]):host([kind=brand]),:host([appearance=outline-fill]):host([kind=brand]){--calcite-internal-chip-border-color: var(--calcite-chip-border-color, var(--calcite-color-brand));--calcite-internal-chip-selectable-hover-border-color: var(--calcite-chip-border-color, var(--calcite-color-brand));--calcite-internal-chip-selectable-active-border-color: var( --calcite-chip-border-color, var(--calcite-color-brand) )}:host([appearance=outline]):host([kind=inverse]),:host([appearance=outline-fill]):host([kind=inverse]){--calcite-internal-chip-border-color: var(--calcite-chip-border-color, var(--calcite-color-border-inverse))}:host([appearance=outline]):host([kind=neutral]),:host([appearance=outline-fill]):host([kind=neutral]){--calcite-internal-chip-border-color: var(--calcite-chip-border-color, var(--calcite-color-border-1))}:host([appearance=outline]){--calcite-internal-chip-background-color: transparent}:host([appearance=outline-fill]){--calcite-internal-chip-background-color: var(--calcite-chip-background-color, var(--calcite-color-foreground-1))}:host([appearance=solid]){--calcite-internal-chip-border-color: transparent;--calcite-internal-chip-selectable-hover-border-color: transparent;--calcite-internal-chip-selectable-active-border-color: transparent}:host([appearance=solid]):host([kind=brand]) .container,:host([appearance=solid]):host([kind=inverse]) .container{color:var(--calcite-chip-text-color, var(--calcite-color-text-inverse))}:host([appearance=solid]):host([kind=brand]) .close,:host([appearance=solid]):host([kind=inverse]) .close{outline-color:var(--calcite-color-text-inverse)}:host([appearance=solid]):host([kind=brand]){--calcite-internal-chip-background-color: var(--calcite-chip-background-color, var(--calcite-color-brand))}:host([appearance=solid]):host([kind=inverse]){--calcite-internal-chip-background-color: var(--calcite-chip-background-color, var(--calcite-color-inverse))}:host([appearance=solid]):host([kind=inverse]) .close:hover{background-color:var(--calcite-color-inverse-hover)}:host([appearance=solid]):host([kind=inverse]) .close:active{background-color:var(--calcite-color-inverse-press)}:host([appearance=solid]):host([kind=neutral]){--calcite-internal-chip-background-color: var(--calcite-chip-background-color, var(--calcite-color-foreground-2))}:host([kind=neutral]) .container{color:var(--calcite-chip-text-color, var(--calcite-color-text-1))}:host([kind=neutral]) .close{color:var(--calcite-chip-close-icon-color, var(--calcite-close-icon-color, var(--calcite-color-text-3)))}:host([selected]) .select-icon{opacity:1}:host([appearance=solid]):host([kind=neutral]){--calcite-internal-chip-selectable-hover-background-color: var(--calcite-color-foreground-3);--calcite-internal-chip-selectable-active-background-color: var(--calcite-color-border-3)}:host([appearance=solid]):host([kind=inverse]){--calcite-internal-chip-selectable-hover-background-color: var(--calcite-color-inverse-hover);--calcite-internal-chip-selectable-active-background-color: var(--calcite-color-inverse-press)}:host([appearance=solid]):host([kind=brand]){--calcite-internal-chip-selectable-hover-background-color: var(--calcite-color-brand-hover);--calcite-internal-chip-selectable-active-background-color: var(--calcite-color-brand-press)}:host([appearance=outline-fill]):host([kind=neutral]){--calcite-internal-chip-selectable-hover-background-color: var(--calcite-color-foreground-2);--calcite-internal-chip-selectable-hover-border-color: var(--calcite-color-border-input);--calcite-internal-chip-selectable-active-background-color: var(--calcite-color-foreground-3);--calcite-internal-chip-selectable-active-border-color: var(--calcite-color-text-3)}:host([appearance=outline-fill]):host([kind=inverse]),:host([appearance=outline-fill]):host([kind=brand]){--calcite-internal-chip-selectable-hover-background-color: var(--calcite-color-foreground-2);--calcite-internal-chip-selectable-active-background-color: var(--calcite-color-foreground-3)}:host([appearance=outline]):host([kind=neutral]){--calcite-internal-chip-selectable-hover-background-color: var(--calcite-color-transparent-hover);--calcite-internal-chip-selectable-hover-border-color: var(--calcite-color-border-input);--calcite-internal-chip-selectable-active-background-color: var(--calcite-color-transparent-press);--calcite-internal-chip-selectable-active-border-color: var(--calcite-color-text-3)}:host([appearance=outline]):host([kind=inverse]),:host([appearance=outline]):host([kind=brand]){--calcite-internal-chip-selectable-hover-background-color: var(--calcite-color-transparent-hover);--calcite-internal-chip-selectable-active-background-color: var(--calcite-color-transparent-press)}:host([scale=s]) .container{--calcite-internal-chip-block-size: var(--calcite-size-sm, 1.5rem) ;--calcite-internal-chip-container-space-x-end: var(--calcite-spacing-xxs, .25rem) ;--calcite-internal-chip-container-space-x-start: var(--calcite-spacing-xxs, .25rem) ;--calcite-internal-chip-font-size: var(--calcite-font-size--2);--calcite-internal-chip-icon-size: var(--calcite-size-xs, 1rem) ;--calcite-internal-chip-icon-space: var(--calcite-spacing-xxs, .25rem) ;--calcite-internal-chip-image-size: var(--calcite-spacing-xl, 1.25rem) ;--calcite-internal-chip-title-space: var(--calcite-spacing-xxs, .25rem) ;--calcite-internal-close-size: var(--calcite-size-xs, 1rem) }:host([scale=s]) .container:not(.closable).is-circle{--calcite-internal-chip-container-space-x-start: var(--calcite-spacing-px);--calcite-internal-chip-container-space-x-end: var(--calcite-spacing-px)}:host([scale=s]) .container.image--slotted:has(.chip-icon),:host([scale=s]) .container.image--slotted.text--slotted,:host([scale=s]) .container.image--slotted.closable{--calcite-internal-chip-image-space-x-end: var(--calcite-spacing-xxs, .25rem) }:host([scale=s]) .container.image--slotted:not(.text--slotted,:has(.chip-icon)),:host([scale=s]) .container.image--slotted:not(.selectable){--calcite-internal-chip-container-space-x-start: var(--calcite-spacing-px)}:host([scale=s]) .container.selectable.single:not(.is-circle).image--slotted{--calcite-internal-chip-container-space-x-start: var(--calcite-spacing-px)}:host([scale=s]) .container.selectable.single:not(.is-circle).selected{--calcite-internal-chip-select-space-x-end: var(--calcite-spacing-xs, .375rem) ;--calcite-internal-chip-select-space-x-start: var(--calcite-spacing-none, 0)}:host([scale=s]) .container.selectable.single:not(.is-circle).selected.image--slotted{--calcite-internal-chip-select-space-x-end: .5rem ;--calcite-internal-chip-select-space-x-start: .125rem }:host([scale=s]) .container.multiple:not(.is-circle){--calcite-internal-chip-container-space-x-start: var(--calcite-spacing-xxs, .25rem) ;--calcite-internal-chip-select-space-x-end: var(--calcite-spacing-xxs, .25rem) ;--calcite-internal-chip-select-space-x-start: var(--calcite-spacing-xxs, .25rem) }:host([scale=s]) .container.multiple:not(.is-circle).image--slotted{--calcite-internal-chip-select-space-x-end: .5rem ;--calcite-internal-chip-select-space-x-start: var(--calcite-spacing-xs, .375rem) ;--calcite-internal-chip-container-space-x-start: var(--calcite-spacing-px)}:host([scale=s]) .container.multiple:not(.is-circle).image--slotted:not(.text--slotted){--calcite-internal-chip-select-space-x-start: var(--calcite-spacing-xs, .375rem) }:host([scale=m]) .container{--calcite-internal-chip-block-size: var(--calcite-size-md, 2rem) ;--calcite-internal-chip-container-space-x-end: var(--calcite-spacing-xs, .375rem) ;--calcite-internal-chip-container-space-x-start: var(--calcite-spacing-xs, .375rem) ;--calcite-internal-chip-font-size: var(--calcite-font-size--1);--calcite-internal-chip-icon-size: var(--calcite-size-sm, 1.5rem) ;--calcite-internal-chip-icon-space: var(--calcite-spacing-xs, .375rem) ;--calcite-internal-chip-image-size: var(--calcite-size-sm, 1.5rem) ;--calcite-internal-chip-title-space: var(--calcite-spacing-xs, .375rem) ;--calcite-internal-close-size: var(--calcite-size-sm, 1.5rem) }:host([scale=m]) .container:not(.closable).is-circle{--calcite-internal-chip-container-space-x-end: var(--calcite-spacing-px);--calcite-internal-chip-container-space-x-start: var(--calcite-spacing-px)}:host([scale=m]) .container.image--slotted:not(.is-circle){--calcite-internal-chip-container-space-x-start: var(--calcite-spacing-xxs, .25rem) }:host([scale=m]) .container.image--slotted:has(.chip-icon),:host([scale=m]) .container.image--slotted.text--slotted,:host([scale=m]) .container.image--slotted.closable{--calcite-internal-chip-image-space-x-end: var(--calcite-spacing-xs, .375rem) }:host([scale=m]) .container.selectable.single:not(.is-circle).image--slotted{--calcite-internal-chip-container-space-x-start: var(--calcite-spacing-xxs, .25rem) }:host([scale=m]) .container.selectable.single:not(.is-circle).selected{--calcite-internal-chip-select-space-x-end: var(--calcite-spacing-px);--calcite-internal-chip-select-space-x-start: var(--calcite-spacing-none, 0)}:host([scale=m]) .container.selectable.single:not(.is-circle).selected.image--slotted{--calcite-internal-chip-select-space-x-end: var(--calcite-spacing-xxs, .25rem) ;--calcite-internal-chip-select-space-x-start: var(--calcite-spacing-xs, .375rem) }:host([scale=m]) .container.multiple:not(.is-circle){--calcite-internal-chip-select-space-x-end: .125rem ;--calcite-internal-chip-select-space-x-start: .125rem }:host([scale=m]) .container.multiple:not(.is-circle).image--slotted{--calcite-internal-chip-select-space-x-end: .5rem ;--calcite-internal-chip-select-space-x-start: var(--calcite-spacing-xxs, .25rem) }:host([scale=m]) .container.closable:not(.is-circle){--calcite-internal-chip-container-space-x-end: var(--calcite-spacing-xxs, .25rem) }:host([scale=l]) .container{--calcite-internal-chip-block-size: 2.75rem ;--calcite-internal-chip-container-space-x-end: .5rem ;--calcite-internal-chip-container-space-x-start: .5rem ;--calcite-internal-chip-font-size: var(--calcite-font-size-0);--calcite-internal-chip-icon-size: var(--calcite-size-md, 2rem) ;--calcite-internal-chip-icon-space: .5rem ;--calcite-internal-chip-image-size: var(--calcite-size-md, 2rem) ;--calcite-internal-chip-title-space: .5rem ;--calcite-internal-close-size: var(--calcite-size-md, 2rem) }:host([scale=l]) .container:not(.closable).is-circle{--calcite-internal-chip-container-space-x-end: var(--calcite-spacing-xxs, .25rem) ;--calcite-internal-chip-container-space-x-start: var(--calcite-spacing-xxs, .25rem) }:host([scale=l]) .container.image--slotted:not(.is-circle){--calcite-internal-chip-container-space-x-start: var(--calcite-spacing-xs, .375rem) }:host([scale=l]) .container.image--slotted:has(.chip-icon),:host([scale=l]) .container.image--slotted.text--slotted,:host([scale=l]) .container.image--slotted.closable{--calcite-internal-chip-image-space-x-end: .5rem }:host([scale=l]) .container.selectable.single:not(.is-circle).image--slotted{--calcite-internal-chip-container-space-x-start: var(--calcite-spacing-xs, .375rem) }:host([scale=l]) .container.selectable.single:not(.is-circle).selected{--calcite-internal-chip-select-space-x-end: var(--calcite-spacing-xxs, .25rem) ;--calcite-internal-chip-select-space-x-start: var(--calcite-spacing-none, 0)}:host([scale=l]) .container.selectable.single:not(.is-circle).selected.image--slotted{--calcite-internal-chip-select-space-x-end: var(--calcite-spacing-xs, .375rem) ;--calcite-internal-chip-select-space-x-start: .5rem }:host([scale=l]) .container.multiple:not(.is-circle){--calcite-internal-chip-container-space-x-start: .5rem ;--calcite-internal-chip-select-space-x-end: var(--calcite-spacing-xxs, .25rem) ;--calcite-internal-chip-select-space-x-start: var(--calcite-spacing-xxs, .25rem) }:host([scale=l]) .container.multiple:not(.is-circle).image--slotted{--calcite-internal-chip-select-space-x-end: .75rem }:host([scale=l]) .container.closable:not(.is-circle){--calcite-internal-chip-container-space-x-end: var(--calcite-spacing-xs, .375rem) }.container{box-sizing:border-box;display:inline-flex;block-size:100%;max-inline-size:100%;align-items:center;justify-content:center;font-weight:var(--calcite-font-weight-medium);outline-color:transparent;background-color:var(--calcite-internal-chip-background-color);border-color:var(--calcite-internal-chip-border-color);border-radius:var(--calcite-chip-corner-radius, 9999px);border-width:var(--calcite-border-width-sm);border-style:solid;font-size:var(--calcite-internal-chip-font-size, var(--calcite-font-size));padding-inline-start:var(--calcite-internal-chip-container-space-x-start);padding-inline-end:var(--calcite-internal-chip-container-space-x-end);block-size:var(--calcite-internal-chip-block-size, auto);inline-size:var(--calcite-internal-chip-inline-size, auto);min-inline-size:var(--calcite-internal-chip-block-size, auto)}.container:hover .select-icon--active{opacity:var(--calcite-opacity-full, 1)}.container.selectable{cursor:pointer}.container.selectable:hover{background-color:var(--calcite-internal-chip-selectable-hover-background-color);border-color:var(--calcite-internal-chip-selectable-hover-border-color)}.container.selectable:active{background-color:var(--calcite-internal-chip-selectable-active-background-color);border-color:var(--calcite-internal-chip-selectable-active-border-color)}.container:not(.non-interactive):focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(var(--calcite-spacing-base) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.container.text--slotted .title{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.container:not(.text--slotted) .title,.container:not(.image--slotted) .image-container{display:none}.container.is-circle .chip-icon,.container.is-circle .image-container{padding:var(--calcite-spacing-none, 0)}.title{padding-inline:var(--calcite-internal-chip-title-space)}.image-container{display:inline-flex;overflow:hidden;align-items:center;justify-content:center;pointer-events:none;block-size:var(--calcite-internal-chip-image-size, var(--calcite-spacing-xxl, 1.5rem));inline-size:var(--calcite-internal-chip-image-size, var(--calcite-spacing-xxl, 1.5rem));padding-inline-start:var(--calcite-spacing-none, 0);padding-inline-end:var(--calcite-internal-chip-image-space-x-end, 0)}.chip-icon{position:relative;margin-block:0px;display:inline-flex;transition-timing-function:cubic-bezier(.4,0,.2,1);color:var(--calcite-chip-icon-color, var(--calcite-chip-text-color, var(--calcite-icon-color, currentColor)));padding-inline:var(--calcite-internal-chip-icon-space, var(--calcite-spacing-xs, .375rem))}.select-icon{align-self:center;justify-content:center;align-items:center;display:flex;inset-block-start:-1px;position:absolute;visibility:hidden;inline-size:auto;opacity:0;transition:opacity .15s ease-in-out,inline-size .15s ease-in-out;color:var(--calcite-chip-select-icon-color, currentColor)}.select-icon.select-icon--active{position:relative;visibility:visible;opacity:var(--calcite-opacity-half, .5);color:var(--calcite-chip-select-icon-color-press, var(--calcite-chip-select-icon-color-pressed, var(--calcite-chip-select-icon-color, currentColor)))}.multiple .select-icon{display:flex;align-items:center;justify-content:center}.multiple .select-icon,.single .select-icon--active{padding-inline-start:var(--calcite-internal-chip-select-space-x-start);padding-inline-end:var(--calcite-internal-chip-select-space-x-end);block-size:var(--calcite-internal-chip-icon-size, var(--calcite-spacing-xxl, 1.5rem));inline-size:var(--calcite-internal-chip-icon-size, var(--calcite-spacing-xxl, 1.5rem))}slot[name=image]::slotted(*){display:flex;block-size:100%;inline-size:100%;overflow:hidden;border-radius:50%}.close{margin:0;cursor:pointer;align-items:center;border-radius:50%;border-style:none;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;outline-color:transparent;background-color:var(--calcite-close-background-color, var(--calcite-color-transparent));-webkit-appearance:none;display:flex;align-content:center;justify-content:center;color:var(--calcite-chip-close-icon-color, var(--calcite-close-icon-color, currentColor));block-size:var(--calcite-internal-close-size, var(--calcite-spacing-xxl, 1.5rem));inline-size:var(--calcite-internal-close-size, var(--calcite-spacing-xxl, 1.5rem));padding:0}.close:hover,.close:focus{background-color:var(--calcite-close-background-color-hover, var(--calcite-color-transparent-hover))}.close:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.close:active{background-color:var(--calcite-close-background-color-press, var(--calcite-color-transparent-press))}.close calcite-icon{color:inherit}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host([hidden]){display:none}[hidden]{display:none}`,uN=class uN extends dt{constructor(){super(),this.closeButtonRef=vi(),this.containerRef=vi(),this.messages=un(),this.focusSetter=dn()(this),this.hasImage=!1,this.hasText=!1,this.appearance="solid",this.closable=!1,this.closed=!1,this.closeOnDelete=!1,this.disabled=!1,this.iconFlipRtl=!1,this.interactive=!1,this.kind="neutral",this.scale="m",this.selected=!1,this.selectionMode="none",this.calciteChipClose=Re({cancelable:!1}),this.calciteChipSelect=Re({cancelable:!1}),this.calciteInternalChipKeyEvent=Re({cancelable:!1}),this.calciteInternalChipSelect=Re({cancelable:!1}),this.calciteInternalSyncSelectedChips=Re({cancelable:!1}),this.listen("keydown",this.keyDownHandler),this.listen("click",this.clickHandler)}async setFocus(e){return this.focusSetter(()=>{if(this.interactive)return this.containerRef.value;if(this.closable)return this.closeButtonRef.value},e)}async load(){this.updateHasText()}willUpdate(e){e.has("selected")&&this.hasUpdated&&this.watchSelected(this.selected)}updated(){Vs(this)}loaded(){this.selectionMode!=="none"&&this.interactive&&this.selected&&this.handleSelectionPropertyChange(this.selected)}watchSelected(e){this.selectionMode!=="none"&&this.handleSelectionPropertyChange(e)}keyDownHandler(e){if(e.target===this.el)switch(e.key){case" ":case"Enter":this.handleEmittingEvent(),e.preventDefault();break;case"Backspace":case"Delete":this.closable&&!this.closed&&this.closeOnDelete&&(e.preventDefault(),this.close());break;case"ArrowRight":case"ArrowLeft":case"Home":case"End":this.calciteInternalChipKeyEvent.emit(e),e.preventDefault();break}}clickHandler(){!this.interactive&&this.closable&&HS(this.closeButtonRef.value)}handleDefaultSlotChange(){this.updateHasText()}close(){this.calciteChipClose.emit(),this.selected=!1,this.closed=!0}closeButtonKeyDownHandler(e){vk(e.key)&&(e.preventDefault(),this.close())}updateHasText(){this.hasText=this.el.textContent.trim().length>0}handleSlotImageChange(e){this.hasImage=ii(e)}handleEmittingEvent(){this.interactive&&this.calciteChipSelect.emit()}handleSelectionPropertyChange(e){this.selectionMode==="single"&&this.calciteInternalSyncSelectedChips.emit(),!this.parentChipGroup.selectedItems.includes(this.el)&&e&&this.selectionMode!=="multiple"&&this.calciteInternalChipSelect.emit(),this.selectionMode!=="single"&&this.calciteInternalSyncSelectedChips.emit()}renderChipImage(){return q`<div class=${H(Ua.imageContainer)}><slot name=${Tke.image} @slotchange=${this.handleSlotImageChange}></slot></div>`}renderSelectionIcon(){const e=this.selectionMode==="multiple"?this.selected?AP.checkedMultiple:AP.uncheckedMultiple:this.selected?AP.checkedSingle:void 0;return q`<div class=${H({[Ua.selectIcon]:!0,[Ua.selectIconActive]:this.selectionMode==="multiple"||this.selected})}>${e?q`<calcite-icon .icon=${e} .scale=${gr(this.scale)}></calcite-icon>`:null}</div>`}renderCloseButton(){return q`<button .ariaLabel=${this.messages.dismissLabel} class=${H(Ua.close)} @click=${this.close} @keydown=${this.closeButtonKeyDownHandler} .tabIndex=${this.disabled?-1:0} ${gt(this.closeButtonRef)}><calcite-icon .icon=${AP.close} .scale=${gr(this.scale)}></calcite-icon></button>`}renderIcon(){return q`<calcite-icon class=${H(Ua.chipIcon)} .flipRtl=${this.iconFlipRtl} .icon=${this.icon} .scale=${gr(this.scale)}></calcite-icon>`}render(){const{disabled:e}=this,i=e||!e&&!this.interactive,r=this.selectionMode==="multiple"&&this.interactive?"checkbox":this.selectionMode!=="none"&&this.interactive?"radio":this.interactive?"button":"img";return Us({disabled:e,children:q`<div .ariaChecked=${this.selectionMode!=="none"&&this.interactive?this.selected:void 0} .ariaLabel=${this.label} class=${H({[Ua.container]:!0,[Ua.textSlotted]:this.hasText,[Ua.imageSlotted]:this.hasImage,[Ua.selectable]:this.selectionMode!=="none",[Ua.multiple]:this.selectionMode==="multiple",[Ua.single]:this.selectionMode==="single"||this.selectionMode==="single-persist",[Ua.selected]:this.selected,[Ua.closable]:this.closable,[Ua.nonInteractive]:!this.interactive,[Ua.isCircle]:!this.closable&&!this.hasText&&(!this.icon||!this.hasImage)&&(this.selectionMode==="none"||!!this.selectionMode&&this.selectionMode!=="multiple"&&!this.selected)})} @click=${this.handleEmittingEvent} .role=${r} .tabIndex=${i?-1:0} ${gt(this.containerRef)}>${this.selectionMode!=="none"&&this.renderSelectionIcon()||""}${this.renderChipImage()}${this.icon&&this.renderIcon()||""}<span class=${H(Ua.title)}><slot @slotchange=${this.handleDefaultSlotChange}></slot></span>${this.closable&&this.renderCloseButton()||""}</div>`})}};uN.properties={hasImage:[16,{},{state:!0}],hasText:[16,{},{state:!0}],appearance:[3,{},{reflect:!0}],closable:[7,{},{reflect:!0,type:Boolean}],closed:[7,{},{reflect:!0,type:Boolean}],closeOnDelete:[7,{},{reflect:!0,type:Boolean}],disabled:[7,{},{reflect:!0,type:Boolean}],icon:[3,{},{reflect:!0}],iconFlipRtl:[7,{},{reflect:!0,type:Boolean}],interactive:[5,{},{type:Boolean}],kind:[3,{},{reflect:!0}],label:1,messageOverrides:[0,{},{attribute:!1}],parentChipGroup:[0,{},{attribute:!1}],scale:[3,{},{reflect:!0}],selected:[7,{},{reflect:!0,type:Boolean}],selectionMode:1,value:1},uN.styles=Ike;let UF=uN;ci("calcite-chip",UF);const Mke=Object.freeze(Object.defineProperty({__proto__:null,Chip:UF},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const nt=xT(class extends $T{constructor(){super(...arguments),this.key=Xe}render(t,e){return this.key=t,e}update(t,[e,i]){return e!==this.key&&(bW(t),this.key=e),i}});/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Cke=new RegExp("\\.(0+)?$"),Eke=new RegExp("0+$"),xr=class xr{constructor(e){if(e instanceof xr)return e;const[i,r]=Nke(e).split(".").concat("");this.value=BigInt(i+r.padEnd(xr.DECIMALS,"0").slice(0,xr.DECIMALS))+BigInt(xr.ROUNDED&&r[xr.DECIMALS]>="5"),this.isNegative=e.charAt(0)==="-"}getIntegersAndDecimals(){const e=this.value.toString().replace("-","").padStart(xr.DECIMALS+1,"0"),i=e.slice(0,-xr.DECIMALS),r=e.slice(-xr.DECIMALS).replace(Eke,"");return{integers:i,decimals:r}}toString(){const{integers:e,decimals:i}=this.getIntegersAndDecimals();return`${this.isNegative?"-":""}${e}${i.length?"."+i:""}`}formatToParts(e){const{integers:i,decimals:r}=this.getIntegersAndDecimals(),n=e.numberFormatter.formatToParts(BigInt(i));return this.isNegative&&n.unshift({type:"minusSign",value:e.minusSign}),r.length&&(n.push({type:"decimal",value:e.decimal}),r.split("").forEach(s=>n.push({type:"fraction",value:s}))),n}format(e){const{integers:i,decimals:r}=this.getIntegersAndDecimals(),n=`${this.isNegative?e.minusSign:""}${e.numberFormatter.format(BigInt(i))}`,s=r.length?`${e.decimal}${r.split("").map(a=>e.numberFormatter.format(Number(a))).join("")}`:"";return`${n}${s}`}add(e){return xr.fromBigInt(this.value+new xr(e).value)}subtract(e){return xr.fromBigInt(this.value-new xr(e).value)}multiply(e){return xr._divRound(this.value*new xr(e).value,xr.SHIFT)}divide(e){return xr._divRound(this.value*xr.SHIFT,new xr(e).value)}};xr.DECIMALS=100,xr.ROUNDED=!0,xr.SHIFT=BigInt("1"+"0".repeat(xr.DECIMALS)),xr._divRound=(e,i)=>xr.fromBigInt(e/i+(xr.ROUNDED?e*BigInt(2)/i%BigInt(2):BigInt(0))),xr.fromBigInt=e=>Object.assign(Object.create(xr.prototype),{value:e,isNegative:e<BigInt(0)});let Ww=xr;function bm(t){return!(!t||isNaN(Number(t)))}function kke(t){return!t||!Dke(t)?"":BF(t,e=>{let i=!1;const r=e.split("").filter((n,s)=>n.match(/\./g)&&!i?(i=!0,!0):n.match(/-/g)&&s===0?!0:sD.includes(n)).join("");return bm(r)?new Ww(r).toString():""})}const Dhe=/^([-0])0+(?=\d)/,Ake=/(?!^\.)\.$/,Pke=/(?!^-)-/g,Oke=/^-\b0\b\.?0*$/,Lke=/0*$/,Fke=new Set(["e","E","-",",",".",...sD]),Rke=t=>{const e=Array.from(t).filter(i=>Fke.has(i)).join("");return BF(e,i=>{const r=i.replace(Pke,"").replace(Ake,"").replace(Dhe,"$1");return bm(r)?Oke.test(r)?r:zke(r):i})};function zke(t){const e=t.split(".")[1],i=new Ww(t).toString(),[r,n]=i.split(".");return e&&n!==e?`${r}.${e}`:i}function BF(t,e){if(!t)return t;const i=t.toLowerCase().indexOf("e")+1;return i?t.replace(/[eE]*$/g,"").substring(0,i).concat(t.slice(i).replace(/[eE]/g,"")).split(/[eE]/).map((r,n)=>e(n===1?r.replace(/\./g,""):r)).join("e").replace(/^e/,"1e"):e(t)}function Nke(t){const e=t.split(/[eE]/);if(e.length===1)return t;const i=+t;if(Number.isSafeInteger(i))return`${i}`;const r=t.charAt(0)==="-",n=+e[1],s=e[0].split("."),a=(r?s[0].substring(1):s[0])||"",o=s[1]||"",l=(m,g)=>{const v=Math.abs(g)-m.length,b=v>0?`${"0".repeat(v)}${m}`:m;return`${b.slice(0,g)}.${b.slice(g)}`},c=(m,g)=>{const v=g>m.length?`${m}${"0".repeat(g-m.length)}`:m;return`${v.slice(0,g)}.${v.slice(g)}`},h=n>0?`${a}${c(o,n)}`:`${l(a,n)}${o}`;return`${r?"-":""}${h.charAt(0)==="."?"0":""}${h.replace(Cke,"").replace(Dhe,"")}`}function Dke(t){return sD.some(e=>t.includes(e))}function jke(t,e,i){const r=e.split(".")[1];if(r){const n=r.match(Lke)[0];if(n&&i.delocalize(t).length!==e.length&&r.indexOf("e")===-1){const s=i.decimal;return t=t.includes(s)?t:`${t}${s}`,t.padEnd(t.length+n.length,i.localize("0"))}}return t}const qF="en",Vke=["ar","bg","bs","ca","cs","da","de","de-AT","de-CH","el",qF,"en-AU","en-CA","en-GB","es","es-MX","et","fi","fr","fr-CH","he","hi","hr","hu","id","it","it-CH","ja","ko","lt","lv","mk","no","nl","pl","pt","pt-PT","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-CN","zh-HK","zh-TW"];new Map(Object.entries({bg:{am:"..",pm:".."},bs:{am:"prijepodne",pm:"popodne"},ca:{am:"a.m.",pm:"p.m."},cs:{am:"dop.",pm:"odp."},es:{am:"a.m.",pm:"p.m."},"es-mx":{am:"a.m.",pm:"p.m."},"es-MX":{am:"a.m.",pm:"p.m."},fi:{am:"ap.",pm:"ip."},he:{am:"",pm:""},hu:{am:"de. ",pm:"du."},lt:{am:"priepiet",pm:"popiet"},lv:{am:"priekpusdien",pm:"pcpusdien"},mk:{am:".",pm:"."},no:{am:"a.m.",pm:"p.m."},nl:{am:"a.m.",pm:"p.m."},"pt-pt":{am:"da manh",pm:"da tarde"},"pt-PT":{am:"da manh",pm:"da tarde"},ro:{am:"a.m.",pm:"p.m."},sl:{am:"dop.",pm:"pop."},sv:{am:"fm",pm:"em"},th:{am:"",pm:""},tr:{am:"",pm:"S"},uk:{am:"",pm:""},vi:{am:"SA",pm:"CH"}}));const Uke=["arab","arabext","latn"],CV=[...Vke],jhe=t=>Uke.includes(t),EV=new Intl.NumberFormat().resolvedOptions().numberingSystem,Vhe=EV==="arab"||!jhe(EV)?"latn":EV,Bke=t=>jhe(t)?t:Vhe;function qke(t){return t?CV.includes(t)?t:(t=t.toLowerCase(),t.includes("-")&&(t=t.replace(/(\w+)-(\w+)/,(e,i,r)=>`${i}-${r.toUpperCase()}`),CV.includes(t)||(t=t.split("-")[0])),t==="nb"||t==="nn"?"no":t==="zh"?"zh-CN":CV.includes(t)?t:(console.warn(`Translations for the "${t}" locale are not available and will fall back to the default, English (en).`),qF)):qF}class Uhe{constructor(){this.delocalize=e=>this._numberFormatOptions?BF(e,i=>i.replace(new RegExp(`[${this._minusSign}]`,"g"),"-").replace(new RegExp(`[${this._group}]`,"g"),"").replace(new RegExp(`[${this._decimal}]`,"g"),".").replace(new RegExp(`[${this._digits.join("")}]`,"g"),this._getDigitIndex)):e,this.localize=e=>this._numberFormatOptions?BF(e,i=>bm(i.trim())?new Ww(i.trim()).format(this).replace(new RegExp(`[${this._actualGroup}]`,"g"),this._group):i):e}get group(){return this._group}get decimal(){return this._decimal}get minusSign(){return this._minusSign}get digits(){return this._digits}get numberFormatter(){return this._numberFormatter}get numberFormatOptions(){return this._numberFormatOptions}set numberFormatOptions(e){if(e.locale=qke(e==null?void 0:e.locale),e.numberingSystem=Bke(e==null?void 0:e.numberingSystem),!this._numberFormatOptions&&e.locale===qF&&e.numberingSystem===Vhe&&Object.keys(e).length===2||JSON.stringify(this._numberFormatOptions)===JSON.stringify(e))return;this._numberFormatOptions=e,this._numberFormatter=new Intl.NumberFormat(this._numberFormatOptions.locale,this._numberFormatOptions),this._digits=[...new Intl.NumberFormat(this._numberFormatOptions.locale,{useGrouping:!1,numberingSystem:this._numberFormatOptions.numberingSystem}).format(9876543210)].reverse();const i=new Map(this._digits.map((n,s)=>[n,s])),r=new Intl.NumberFormat(this._numberFormatOptions.locale,{numberingSystem:this._numberFormatOptions.numberingSystem}).formatToParts(-123456789e-1);this._actualGroup=r.find(n=>n.type==="group").value,this._group=this._actualGroup.trim().length===0||this._actualGroup==" "?"":this._actualGroup,this._decimal=e.locale==="bs"||e.locale==="mk"?",":r.find(n=>n.type==="decimal").value,this._minusSign=r.find(n=>n.type==="minusSign").value,this._getDigitIndex=n=>i.get(n)}}const $l=new Uhe;/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */function Pte(t){return t[t.openProp||"open"]}async function IT(t){await t.updateComplete,Pte(t)?t.onBeforeOpen():t.onBeforeClose(),await t.updateComplete,t.transitionEl&&await GEe(t.transitionEl,t.transitionProp),Pte(t)?t.onOpen():t.onClose()}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const BB={brand:"lightbulb",danger:"exclamationMarkTriangle",info:"information",success:"checkCircle",warning:"exclamationMarkTriangle"};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const kV={slow:14e3,medium:1e4,fast:6e3},PP={actionsEnd:"actions-end",title:"title",message:"message",link:"link"},Vc={actionsEnd:"actions-end",close:"close",container:"container",containerActive:"container--active",dismissProgress:"dismiss-progress",icon:"icon",containerEmbedded:"container--embedded",queueCount:"queue-count",queueCountActive:"queue-count--active",textContainer:"text-container",focused:"focused"},Hke=300;class Gke{constructor(){this.registeredElements=[],this.queueTimeoutId=null}registerElement(e){const{registeredElements:i}=this;if(!i.includes(e)){switch(e.queue){case"immediate":i.unshift(e);break;case"next":i.splice(1,0,e);break;case"last":i.push(e);break}this.updateAlerts()}}unregisterElement(e){const{registeredElements:i}=this,r=i.indexOf(e);r!==-1&&i.splice(r,1),e.active=!1,this.updateAlerts()}updateAlerts(){window.clearTimeout(this.queueTimeoutId),this.queueTimeoutId=null,this.registeredElements.forEach((e,i)=>{e.openAlertCount=this.registeredElements.length,i===0?this.queueTimeoutId=window.setTimeout(()=>e.active=!0,Hke):e.active=!1})}}const Wke=ct`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{display:block;inline-size:var(--calcite-alert-width)}.container{pointer-events:none;position:fixed;z-index:var(--calcite-z-index-toast);margin-inline:auto;margin-block:0px;box-sizing:border-box;display:flex;inline-size:100%;min-inline-size:min-content;align-items:center;justify-content:center;text-align:start;opacity:0;--tw-shadow: 0 6px 20px -4px rgba(0, 0, 0, .1), 0 4px 12px -2px rgba(0, 0, 0, .08);--tw-shadow-colored: 0 6px 20px -4px var(--tw-shadow-color), 0 4px 12px -2px var(--tw-shadow-color);box-shadow:var(--calcite-alert-shadow, var(--tw-ring-offset-shadow, 0 0 rgba(0, 0, 0, 0)), var(--tw-ring-shadow, 0 0 rgba(0, 0, 0, 0)), var(--tw-shadow));background-color:var(--calcite-alert-background-color, var(--calcite-color-foreground-1));border-radius:var(--calcite-alert-corner-radius, var(--calcite-border-radius));border-block-start:0 solid transparent;border-inline:1px solid var(--calcite-color-border-3);border-block-end:1px solid var(--calcite-color-border-3);max-inline-size:calc(100% - var(--calcite-alert-offset-size, 2rem) * 2);transition:opacity var(--calcite-internal-animation-timing-slow) cubic-bezier(.215,.44,.42,.88),all var(--calcite-animation-timing) ease-in-out}.container--bottom,.container--top{inset-inline-end:0;inset-inline-start:0}.container[class*=bottom]{transform:translate3d(0,var(--calcite-alert-offset-size, 2rem),0);inset-block-end:var(--calcite-alert-offset-size, 2rem)}.container[class*=top]{transform:translate3d(0,calc(-1 * var(--calcite-alert-offset-size, 2rem)),0);inset-block-start:var(--calcite-alert-offset-size, 2rem)}.container[class*=start]{inset-inline-start:var(--calcite-alert-offset-size, 2rem);inset-inline-end:auto}.container[class*=end]{inset-inline-end:var(--calcite-alert-offset-size, 2rem);inset-inline-start:auto}.icon{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:0;margin-block:auto;margin-inline-end:auto}.close{display:flex;cursor:pointer;align-items:center;justify-content:flex-end;align-self:stretch;border-style:none;background-color:transparent;color:var(--calcite-color-text-3);outline:2px solid transparent;outline-offset:2px;-webkit-appearance:none;border-start-end-radius:var(--calcite-alert-corner-radius, var(--calcite-border-radius));border-end-end-radius:var(--calcite-alert-corner-radius, var(--calcite-border-radius));outline-color:transparent}.close:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.close:hover,.close:focus{color:var(--calcite-color-text-1);background-color:var(--calcite-color-foreground-2)}.close:active{background-color:var(--calcite-color-foreground-3)}.queue-count{visibility:hidden;display:flex;min-inline-size:min-content;cursor:default;align-items:center;justify-content:space-around;align-self:stretch;overflow:hidden;text-align:center;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-2);opacity:0;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;border-inline:0 solid transparent;border-start-end-radius:0}.queue-count--active{visibility:visible;opacity:1}.dismiss-progress{position:absolute;display:block;inline-size:100%;overflow:hidden;inset-inline:0;inset-block-start:-2px;block-size:2px;border-radius:var(--calcite-border-radius) var(--calcite-border-radius) 0 0}.dismiss-progress:after{position:absolute;inset-block-start:0px;display:block;block-size:2px;content:"";background-color:var(--calcite-color-transparent-tint);inset-inline-end:0}.actions-end{display:flex;align-self:stretch}.text-container{box-sizing:border-box;display:flex;min-inline-size:0px;flex:1 1 auto;flex-direction:column;overflow-wrap:break-word}.footer{position:relative;display:flex;inline-size:auto;justify-content:flex-end;align-self:stretch;padding-block-start:1px;block-size:inherit}:host([scale=s]) slot[name=title]::slotted(*),:host([scale=s]) *::slotted([slot=title]){font-size:var(--calcite-font-size--1);line-height:1.375}:host([scale=s]) slot[name=message]::slotted(*),:host([scale=s]) *::slotted([slot=message]){font-size:var(--calcite-font-size--2);line-height:1.375}:host([scale=s]) slot[name=link]::slotted(*),:host([scale=s]) *::slotted([slot=link]){font-size:var(--calcite-font-size--2);line-height:1.375}:host([scale=s]) .queue-count{margin-inline:.5rem}:host([scale=s]) .container{--calcite-internal-alert-min-height: 3.5rem;inline-size:var(--calcite-alert-width, 40em)}:host([scale=s]) .close{padding:.75rem}:host([scale=s]) .icon{padding-inline-start:.75rem}:host([scale=s]) .text-container{padding-block:.5rem;padding-inline:.75rem .5rem}:host([scale=m]) slot[name=title]::slotted(*),:host([scale=m]) *::slotted([slot=title]){font-size:var(--calcite-font-size-0);line-height:1.375}:host([scale=m]) slot[name=message]::slotted(*),:host([scale=m]) *::slotted([slot=message]){font-size:var(--calcite-font-size--1);line-height:1.375}:host([scale=m]) slot[name=link]::slotted(*),:host([scale=m]) *::slotted([slot=link]){font-size:var(--calcite-font-size--1);line-height:1.375}:host([scale=m]) .queue-count{margin-inline:.75rem}:host([scale=m]) .container{--calcite-internal-alert-min-height: 4.1875rem;inline-size:var(--calcite-alert-width, 50em)}:host([scale=m]) .close{padding:1rem}:host([scale=m]) .icon{padding-inline-start:1rem}:host([scale=m]) .text-container{padding-block:.75rem;padding-inline:1rem .75rem}:host([scale=l]) slot[name=title]::slotted(*),:host([scale=l]) *::slotted([slot=title]){margin-block-end:.25rem;font-size:var(--calcite-font-size-1);line-height:1.375}:host([scale=l]) slot[name=message]::slotted(*),:host([scale=l]) *::slotted([slot=message]){font-size:var(--calcite-font-size-0);line-height:1.375}:host([scale=l]) slot[name=link]::slotted(*),:host([scale=l]) *::slotted([slot=link]){font-size:var(--calcite-font-size-0);line-height:1.375}:host([scale=l]) .queue-count{margin-inline:1rem}:host([scale=l]) .container{--calcite-internal-alert-min-height: 5.625rem;inline-size:var(--calcite-alert-width, 60em)}:host([scale=l]) .close{padding:1.25rem}:host([scale=l]) .icon{padding-inline-start:1.25rem}:host([scale=l]) .text-container{padding-block:1rem;padding-inline:1.25rem 1rem}:host([open]) .container--active{border-block-start-width:2px;opacity:1;pointer-events:initial}:host([open]) .container--active[class*=bottom]{transform:translate3d(0,calc(-1 * var(--calcite-alert-offset-size, 2rem)),inherit)}:host([open]) .container--active[class*=top]{transform:translate3d(0,var(--calcite-alert-offset-size, 2rem),inherit)}:host([auto-close])>.queue-count{border-inline-end:0 solid transparent}slot[name=title]::slotted(*),*::slotted([slot=title]){font-size:var(--calcite-font-size-0);line-height:1.375;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-1)}slot[name=message]::slotted(*),*::slotted([slot=message]){margin:0;display:inline;font-size:var(--calcite-font-size--1);line-height:1.375;font-weight:var(--calcite-font-weight-normal);margin-inline-end:.5rem;color:var(--calcite-color-text-2)}slot[name=link]::slotted(*),*::slotted([slot=link]){display:inline-flex;color:var(--calcite-color-text-link)}:host([kind=brand]) .container{border-block-start-color:var(--calcite-color-brand)}:host([kind=brand]) .container .icon{color:var(--calcite-color-brand)}:host([kind=info]) .container{border-block-start-color:var(--calcite-color-status-info)}:host([kind=info]) .container .icon{color:var(--calcite-color-status-info)}:host([kind=danger]) .container{border-block-start-color:var(--calcite-color-status-danger)}:host([kind=danger]) .container .icon{color:var(--calcite-color-status-danger)}:host([kind=success]) .container{border-block-start-color:var(--calcite-color-status-success)}:host([kind=success]) .container .icon{color:var(--calcite-color-status-success)}:host([kind=warning]) .container{border-block-start-color:var(--calcite-color-status-warning)}:host([kind=warning]) .container .icon{color:var(--calcite-color-status-warning)}:host([auto-close-duration=fast]) .dismiss-progress:after{animation:dismissProgress 6s ease-out}:host(:hover[auto-close-duration=fast]) .dismiss-progress:after,:host(:focus[auto-close-duration=fast]) .dismiss-progress:after{animation-play-state:paused}:host([auto-close-duration=medium]) .dismiss-progress:after{animation:dismissProgress 10s ease-out}:host(:hover[auto-close-duration=medium]) .dismiss-progress:after,:host(:focus[auto-close-duration=medium]) .dismiss-progress:after{animation-play-state:paused}:host([auto-close-duration=slow]) .dismiss-progress:after{animation:dismissProgress 14s ease-out}:host(:hover[auto-close-duration=slow]) .dismiss-progress:after,:host(:focus[auto-close-duration=slow]) .dismiss-progress:after{animation-play-state:paused}.container.focused .dismiss-progress:after{animation-play-state:paused}@keyframes dismissProgress{0%{inline-size:0px;opacity:.75}to{inline-size:100%;opacity:1}}.container--embedded{position:absolute}:host([hidden]){display:none}[hidden]{display:none}:host([calcite-hydrated-hidden]){visibility:hidden!important;pointer-events:none}`,y1=new Gke,dN=class dN extends dt{constructor(){super(...arguments),this.autoCloseTimeoutId=null,this.transitionProp="opacity",this.totalHoverTime=0,this.totalOpenTime=0,this.messages=un(),this.focusSetter=dn()(this),this.hasEndActions=!1,this.isFocused=!1,this.numberStringFormatter=new Uhe,this.active=!1,this.autoClose=!1,this.autoCloseDuration="medium",this.embedded=!1,this.iconFlipRtl=!1,this.kind="brand",this.open=!1,this.openAlertCount=0,this.placement="bottom",this.queue="last",this.scale="m",this.calciteAlertBeforeClose=Re({cancelable:!1}),this.calciteAlertBeforeOpen=Re({cancelable:!1}),this.calciteAlertClose=Re({cancelable:!1}),this.calciteAlertOpen=Re({cancelable:!1})}async setFocus(e){return this.focusSetter(()=>this.el,e)}connectedCallback(){super.connectedCallback(),this.open&&y1.registerElement(this.el),this.numberStringFormatter.numberFormatOptions={locale:this.messages._lang,numberingSystem:this.numberingSystem,signDisplay:"always"}}willUpdate(e){e.has("open")&&(this.hasUpdated||this.open!==!1)&&this.openHandler(),e.has("active")&&(this.hasUpdated||this.active!==!1)&&this.handleActiveChange(),e.has("autoCloseDuration")&&(this.hasUpdated||this.autoCloseDuration!=="medium")&&this.updateDuration(),e.has("queue")&&(this.hasUpdated||this.queue!=="last")&&this.handleQueueChange(),e.has("numberingSystem")&&this.numberingSystemChange(),e.has("messages")&&this.effectiveLocaleChange()}disconnectedCallback(){super.disconnectedCallback(),y1.unregisterElement(this.el),this.clearAutoCloseTimeout(),this.embedded=!1}handleActiveChange(){IT(this),this.clearAutoCloseTimeout(),this.active&&this.autoClose&&!this.autoCloseTimeoutId&&(this.initialOpenTime=Date.now(),this.autoCloseTimeoutId=window.setTimeout(()=>this.closeAlert(),kV[this.autoCloseDuration]))}openHandler(){this.open?y1.registerElement(this.el):y1.unregisterElement(this.el)}updateDuration(){this.autoClose&&this.autoCloseTimeoutId&&(this.clearAutoCloseTimeout(),this.autoCloseTimeoutId=window.setTimeout(()=>this.closeAlert(),kV[this.autoCloseDuration]))}handleQueueChange(){this.open&&(y1.unregisterElement(this.el),y1.registerElement(this.el))}handleKeyBoardFocus(){this.isFocused=!0,this.handleFocus()}handleKeyBoardBlur(){this.isFocused=!1,this.isHovered||this.handleBlur()}effectiveLocaleChange(){this.numberStringFormatter.numberFormatOptions={locale:this.messages._lang,numberingSystem:this.numberingSystem,signDisplay:"always"}}numberingSystemChange(){this.numberStringFormatter.numberFormatOptions={locale:this.messages._lang,numberingSystem:this.numberingSystem,signDisplay:"always"}}clearAutoCloseTimeout(){window.clearTimeout(this.autoCloseTimeoutId),this.autoCloseTimeoutId=null}setTransitionEl(e){e&&(this.transitionEl=e)}closeAlert(){this.open=!1,this.clearAutoCloseTimeout()}onBeforeOpen(){this.calciteAlertBeforeOpen.emit()}onOpen(){this.calciteAlertOpen.emit()}onBeforeClose(){this.calciteAlertBeforeClose.emit()}onClose(){this.calciteAlertClose.emit()}actionsEndSlotChangeHandler(e){this.hasEndActions=ii(e)}handleMouseOver(){this.isHovered=!0,this.handleFocus()}handleMouseLeave(){this.isHovered=!1,this.isFocused||this.handleBlur()}handleFocus(){this.clearAutoCloseTimeout(),this.totalOpenTime=Date.now()-this.initialOpenTime,this.lastMouseOverBegin=Date.now()}handleBlur(){const e=Date.now()-this.lastMouseOverBegin,i=kV[this.autoCloseDuration]-this.totalOpenTime+this.totalHoverTime;this.totalHoverTime=this.totalHoverTime?e+this.totalHoverTime:e,this.autoCloseTimeoutId=window.setTimeout(()=>this.closeAlert(),i)}render(){const{open:e,autoClose:i,label:r,placement:n,active:s,openAlertCount:a}=this,o=i?"alert":"alertdialog",l=!e,c=Gw(BB,this.icon,this.kind),h=a>1;return this.el.inert=l,this.el.ariaLabel=r,this.el.toggleAttribute("calcite-hydrated-hidden",l),this.el.role=o,q`<div class=${H({[Vc.container]:!0,[Vc.containerActive]:s,[`${Vc.container}--${n}`]:!0,[Vc.containerEmbedded]:this.embedded,[Vc.focused]:this.isFocused})} @pointerenter=${this.autoClose&&this.autoCloseTimeoutId?this.handleMouseOver:null} @pointerleave=${this.autoClose?this.handleMouseLeave:null} ${gt(this.setTransitionEl)}>${c&&this.renderIcon(c)||""}<div class=${H(Vc.textContainer)} @focusin=${this.autoClose&&this.autoCloseTimeoutId?this.handleKeyBoardFocus:null} @focusout=${this.autoClose?this.handleKeyBoardBlur:null}><slot name=${PP.title}></slot><slot name=${PP.message}></slot><slot name=${PP.link}></slot></div>${this.renderActionsEnd()}${h?this.renderQueueCount():null}${this.renderCloseButton()}${e&&s&&i?q`<div class=${H(Vc.dismissProgress)}></div>`:null}</div>`}renderCloseButton(){return nt("close",q`<button .ariaLabel=${this.messages.close} class=${H(Vc.close)} @click=${this.closeAlert} @focusin=${this.autoClose?this.handleKeyBoardFocus:null} @focusout=${this.autoClose?this.handleKeyBoardBlur:null} type=button><calcite-icon icon=x .scale=${gr(this.scale)}></calcite-icon></button>`)}renderQueueCount(){const{openAlertCount:e}=this,i=e>2?e-1:1,r=this.numberStringFormatter.numberFormatter.format(i);return nt("queue-count",q`<div class=${H({[Vc.queueCount]:!0,[Vc.queueCountActive]:e>1})}><calcite-chip .label=${r} .scale=${this.scale} .value=${r}>${r}</calcite-chip></div>`)}renderActionsEnd(){return q`<div class=${H(Vc.actionsEnd)}><slot name=${PP.actionsEnd} @slotchange=${this.actionsEndSlotChangeHandler}></slot></div>`}renderIcon(e){return q`<div class=${H(Vc.icon)}><calcite-icon .flipRtl=${this.iconFlipRtl} .icon=${e} .scale=${gr(this.scale)}></calcite-icon></div>`}};dN.properties={hasEndActions:[16,{},{state:!0}],isFocused:[16,{},{state:!0}],numberStringFormatter:[16,{},{state:!0}],active:[5,{},{type:Boolean}],autoClose:[7,{},{reflect:!0,type:Boolean}],autoCloseDuration:[3,{},{reflect:!0}],embedded:[5,{},{type:Boolean}],icon:[3,{converter:Hm},{reflect:!0}],iconFlipRtl:[7,{},{reflect:!0,type:Boolean}],kind:[3,{},{reflect:!0}],label:1,messageOverrides:[0,{},{attribute:!1}],numberingSystem:[3,{},{reflect:!0}],open:[7,{},{reflect:!0,type:Boolean}],openAlertCount:[9,{},{type:Number}],placement:[3,{},{reflect:!0}],queue:[3,{},{reflect:!0}],scale:[3,{},{reflect:!0}]},dN.styles=Wke;let qB=dN;ci("calcite-alert",qB);/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const xW=Symbol.for(""),Zke=t=>{if((t==null?void 0:t.r)===xW)return t==null?void 0:t._$litStatic$},Bhe=t=>({_$litStatic$:t,r:xW}),Zw=(t,...e)=>({_$litStatic$:e.reduce(((i,r,n)=>i+(s=>{if(s._$litStatic$!==void 0)return s._$litStatic$;throw Error(`Value passed to 'literal' function must be a 'literal' result: ${s}. Use 'unsafeStatic' to pass non-literal values, but
            take care to ensure page security.`)})(r)+t[n+1]),t[0]),r:xW}),Ote=new Map,Yke=t=>(e,...i)=>{const r=i.length;let n,s;const a=[],o=[];let l,c=0,h=!1;for(;c<r;){for(l=e[c];c<r&&(s=i[c],(n=Zke(s))!==void 0);)l+=n+e[++c],h=!0;c!==r&&o.push(s),a.push(l),c++}if(c===r&&a.push(e[r]),h){const m=a.join("$$lit$$");(e=Ote.get(m))===void 0&&(a.raw=a,Ote.set(m,e=a)),i=o}return t(e,...i)},xk=Yke(q);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Jke=ct`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:inline}:host a,:host button{position:relative;display:flex;cursor:pointer;align-items:center;justify-content:center;border-radius:0;border-style:none;font-family:inherit;text-decoration:none;line-height:inherit;font-size:inherit;-webkit-appearance:none}:host a:hover,:host button:hover{text-decoration:none}:host a,:host button{transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform,background-size;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;outline-color:transparent}:host a:focus,:host button:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(var(--calcite-spacing-base) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}calcite-icon{inline-size:1em;block-size:1em;min-inline-size:unset;min-block-size:unset}.calcite-link--icon{vertical-align:middle;margin-block-start:-.25em}:host .calcite-link--icon.icon-start{margin-inline-end:.5rem}:host .calcite-link--icon.icon-end{margin-inline-start:.5rem}:host button,:host a{position:relative;display:inline;border-style:none;background-color:transparent;padding:0;color:var(--calcite-link-text-color, var(--calcite-color-text-link));line-height:inherit;white-space:initial;background-image:linear-gradient(currentColor,currentColor),linear-gradient(var(--calcite-color-brand-underline),var(--calcite-color-brand-underline));background-position-x:0%,100%;background-position-y:min(1.5em,100%);background-repeat:no-repeat,no-repeat;background-size:0% 1px,100% 1px}:host button:hover,:host button:focus,:host a:hover,:host a:focus{background-size:100% 1px,100% 1px}:host button:active,:host a:active{background-size:100% 2px,100% 2px}:host button.calcite--rtl,:host a.calcite--rtl{background-position:100% 100%,100% 100%}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host([hidden]){display:none}[hidden]{display:none}`,OP={calciteLinkIcon:"calcite-link--icon",iconStart:"icon-start",iconEnd:"icon-end"},hN=class hN extends dt{constructor(){super(),this.childRef=vi(),this.focusSetter=dn()(this),this.disabled=!1,this.download=!1,this.listen("click",this.clickHandler)}async setFocus(e){return this.focusSetter(()=>this.childRef.value,e)}updated(){Vs(this)}clickHandler(e){this.disabled||e.isTrusted||this.childRef.value.click()}childElClickHandler(e){e.isTrusted||e.stopPropagation()}render(){const{download:e,el:i}=this,r=Uo(i),n=this.href?"a":"button",s=q`<calcite-icon class=${H({[OP.calciteLinkIcon]:!0,[OP.iconStart]:!0})} .flipRtl=${this.iconFlipRtl==="start"||this.iconFlipRtl==="both"} .icon=${this.iconStart} scale=s></calcite-icon>`,a=q`<calcite-icon class=${H({[OP.calciteLinkIcon]:!0,[OP.iconEnd]:!0})} .flipRtl=${this.iconFlipRtl==="end"||this.iconFlipRtl==="both"} .icon=${this.iconEnd} scale=s></calcite-icon>`,o=n==="button"?Zw`button`:Zw`a`,l=n==="button"?0:null;return this.el.role="presentation",Us({disabled:this.disabled,children:xk`<${o} class=${H({[Uh.rtl]:r==="rtl"})} download=${(n==="a"?e===!0||e===""?"":e||null:null)??Pe} href=${(n==="a"&&this.href)??Pe} @click=${this.childElClickHandler} rel=${(n==="a"&&this.rel)??Pe} tabindex=${l} target=${(n==="a"&&this.target)??Pe} ${gt(this.childRef)}>${q`${this.iconStart?s:null}<slot></slot>${this.iconEnd?a:null}`}</${o}>`})}};hN.properties={disabled:[7,{},{reflect:!0,type:Boolean}],download:[3,{converter:Hm},{reflect:!0}],href:[3,{},{reflect:!0}],iconEnd:[3,{},{reflect:!0}],iconFlipRtl:[3,{},{reflect:!0}],iconStart:[3,{},{reflect:!0}],rel:1,target:1},hN.styles=Jke;let HB=hN;ci("calcite-link",HB);let Qy;const Ia=globalThis;function ve(t){return typeof Qy[t]=="function"?Qy[t]=Qy[t](Ia):Qy[t]}var kde,Ade,Pde,Ode;Qy=(kde=Ia.dojoConfig)!=null&&kde.has||(Ade=Ia.esriConfig)!=null&&Ade.has?{...(Pde=Ia.dojoConfig)==null?void 0:Pde.has,...(Ode=Ia.esriConfig)==null?void 0:Ode.has}:{},ve.add=(t,e,i,r)=>{(r||Qy[t]===void 0)&&(Qy[t]=e),i&&ve(t)},ve.cache=Qy,ve.add("big-integer-warning-enabled",!0),ve.add("esri-deprecation-warnings",!0),ve.add("esri-tests-disable-screenshots",!1),ve.add("esri-tests-use-full-window",!1),ve.add("esri-tests-post-to-influx",!0),ve.add("esri-cim-animations-enable-status","enabled"),ve.add("esri-cim-animations-spotlight",!1),ve.add("esri-cim-animations-freeze-time",!1),(()=>{var e;ve.add("host-webworker",Ia.WorkerGlobalScope!==void 0&&self instanceof Ia.WorkerGlobalScope);const t=typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;if(ve.add("host-browser",t),ve.add("host-node",!(typeof Ia.process!="object"||!((e=Ia.process.versions)!=null&&e.node)||!Ia.process.versions.v8)),ve.add("dom",t),ve("host-browser")){const i=navigator,r=i.userAgent,n=i.appVersion,s=parseFloat(n);if(ve.add("wp",parseFloat(r.split("Windows Phone")[1])||void 0),ve.add("msapp",parseFloat(r.split("MSAppHost/")[1])||void 0),ve.add("khtml",n.includes("Konqueror")?s:void 0),ve.add("edge",parseFloat(r.split("Edge/")[1])||void 0),ve.add("opr",parseFloat(r.split("OPR/")[1])||void 0),ve.add("webkit",!ve("wp")&&!ve("edge")&&parseFloat(r.split("WebKit/")[1])||void 0),ve.add("chrome",!ve("edge")&&!ve("opr")&&parseFloat(r.split("Chrome/")[1])||void 0),ve.add("android",!ve("wp")&&parseFloat(r.split("Android ")[1])||void 0),ve.add("safari",!n.includes("Safari")||ve("wp")||ve("chrome")||ve("android")||ve("edge")||ve("opr")?void 0:parseFloat(n.split("Version/")[1])),ve.add("mac",n.includes("Macintosh")),!ve("wp")&&/(iPhone|iPod|iPad)/.test(r)){const a=RegExp.$1.replace(/P/,"p"),o=/OS ([\d_]+)/.test(r)?RegExp.$1:"1",l=parseFloat(o.replace(/_/,".").replaceAll("_",""));ve.add(a,l),ve.add("ios",l)}ve("webkit")||(!r.includes("Gecko")||ve("wp")||ve("khtml")||ve("edge")||ve.add("mozilla",s),ve("mozilla")&&ve.add("ff",parseFloat(r.split("Firefox/")[1]||r.split("Minefield/")[1])||void 0))}})(),(()=>{if(Ia.navigator){const t=navigator.userAgent,e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(t),i=/iPhone/i.test(t);e&&ve.add("esri-mobile",e),i&&ve.add("esri-iPhone",i),ve.add("esri-geolocation",!!navigator.geolocation)}ve.add("esri-wasm","WebAssembly"in Ia),ve.add("esri-performance-mode-frames-between-render",20),ve.add("esri-force-performance-mode",!1),ve.add("esri-shared-array-buffer",()=>{const t="SharedArrayBuffer"in Ia,e=Ia.crossOriginIsolated===!1;return t&&!e}),ve.add("wasm-simd",()=>{const t=[0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11];return WebAssembly.validate(new Uint8Array(t))}),ve.add("esri-atomics","Atomics"in Ia),ve.add("esri-workers","Worker"in Ia),ve.add("web-feat:cache","caches"in Ia),ve.add("esri-workers-arraybuffer-transfer",!ve("safari")||Number(ve("safari"))>=12),ve.add("workers-pool-size",8),ve.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),ve.add("featurelayer-simplify-payload-size-factors",[1,1,4]),ve.add("featurelayer-fast-triangulation-enabled",!0),ve.add("featurelayer-animation-enabled",!0),ve.add("featurelayer-snapshot-enabled",!0),ve.add("featurelayer-snapshot-initial-tolerance",0),ve.add("featurelayer-snapshot-point-min-threshold",8e4),ve.add("featurelayer-snapshot-point-max-threshold",4e5),ve.add("featurelayer-snapshot-multipoint-min-threshold",2e4),ve.add("featurelayer-snapshot-multipoint-max-threshold",1e5),ve.add("featurelayer-snapshot-polygon-min-threshold",2e3),ve.add("featurelayer-snapshot-polygon-max-threshold",2e3),ve.add("featurelayer-snapshot-polyline-min-threshold",2e3),ve.add("featurelayer-snapshot-polyline-max-threshold",2e3),ve.add("featurelayer-snapshot-max-vertex-count",25e4),ve.add("featurelayer-snapshot-non-hosted-exceedslimit-enabled",!0),ve.add("featurelayer-snapshot-concurrency",4),ve.add("featurelayer-snapshot-coverage",.1),ve.add("featurelayer-query-max-depth",4),ve.add("featurelayer-query-pausing-enabled",!1),ve.add("featurelayer-query-tile-concurrency",4),ve.add("featurelayer-query-tile-max-features",6e5),ve.add("featurelayer-advanced-symbols",!1),ve.add("featurelayer-pbf",!0),ve.add("featurelayer-pbf-statistics",!1),ve.add("feature-layers-workers",!0),ve.add("feature-polyline-generalization-factor",1),ve.add("parquetlayer-full-query-feature-count",2e4),ve.add("parquetlayer-hittest-max-feature-count",1),ve.add("mapview-transitions-duration",200),ve.add("mapview-essential-goto-duration",200),ve.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),ve.add("mapserver-pbf-version-support",10.81),ve.add("mapservice-popup-identify-max-tolerance",20),ve.add("request-queue-concurrency-hosted",16),ve.add("request-queue-concurrency-non-hosted",4),ve.add("curve-densification-coarse-segments",128),ve.add("curve-densification-max-segments",2e3),ve.add("curve-densification-min-segments",3),ve.add("curve-densification-pixel-deviation",.5),ve.add("view-readyState-waiting-delay",1e3),ve.add("gradient-depth-bias",.01),ve.add("gradient-depth-epsilon",1e-8),ve.add("enable-feature:esri-compress-textures",!0),ve("host-webworker")||ve("host-browser")&&(ve.add("esri-csp-restrictions",()=>{try{new Function}catch{return!0}return!1}),ve.add("esri-url-encodes-apostrophe",()=>{const t=window.document.createElement("a");return t.href="?'",t.href.includes("?%27")}))})();function Owt(t){}function Xke(t){return()=>t}function Lwt(t){return t}var Tl;let $W=(Tl=class{constructor(e=1){this._seed=e}set seed(e){this._seed=e??Math.random()*Tl._m}getInt(){return this._seed=(Tl._a*this._seed+Tl._c)%Tl._m,this._seed}getFloat(){return this.getInt()/(Tl._m-1)}getIntRange(e,i){return Math.round(this.getFloatRange(e,i))}getFloatRange(e,i){const r=i-e;return e+this.getInt()/Tl._m*r}},Tl._m=2147483647,Tl._a=48271,Tl._c=0,Tl);const Qke=1.5,Fwt=1/Qke,Rwt=.5;function qhe(t){return t}function Kke(t,e=qhe){if(!t||t.length===0)return;let i=t[0],r=e(i);for(let n=1;n<t.length;++n){const s=t[n],a=Number(e(s));a>r&&(r=a,i=s)}return i}function zwt(t,e=qhe){return Kke(t,i=>-e(i))}function oD(t,e){return e?t.filter((i,r,n)=>n.findIndex(e.bind(null,i))===r):Array.from(new Set(t))}function eAe(t,e,i,r,n,s,a){if(t==null&&r==null)return!0;e=Math.max(0,e),n=Math.max(0,n),i=Math.max(0,i<0?((t==null?void 0:t.length)??0)+i:i),s=Math.max(0,s<0?((r==null?void 0:r.length)??0)+s:s);const o=i-e;if(t==null||r==null||o!==s-n)return!1;if(a){for(let l=0;l<o;l++)if(!a(t[e+l],r[n+l]))return!1}else for(let l=0;l<o;l++)if(t[e+l]!==r[n+l])return!1;return!0}function lD(t,e,i){return eAe(t,0,(t==null?void 0:t.length)??0,e,0,(e==null?void 0:e.length)??0,i)}function Nwt(){return(t,e)=>{if(t==null&&e==null)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}}function Lte(t,e,i){let r,n;return i?(r=e.filter(s=>!t.some(a=>i(a,s))),n=t.filter(s=>!e.some(a=>i(a,s)))):(r=e.filter(s=>!t.includes(s)),n=t.filter(s=>!e.includes(s))),{added:r,removed:n}}function Dwt(t){return t&&typeof t.length=="number"}function jwt(t,e){const i=t.length;if(i===0)return[];const r=[];for(let n=0;n<i;n+=e)r.push(t.slice(n,n+e));return r}let Hhe=class{constructor(){this.last=0}};const Ghe=new Hhe;function GB(t,e,i,r){r=r||Ghe;const n=Math.max(0,r.last-10);for(let a=n;a<i;++a)if(t[a]===e)return r.last=a,a;const s=Math.min(n,i);for(let a=0;a<s;++a)if(t[a]===e)return r.last=a,a;return-1}function WB(t,e,i,r){const n=t.length,s=GB(t,e,n,r);if(s!==-1)return t[s]=t[n-1],t.pop(),e}const Uu=new Set;function tAe(t,e,i=t.length,r=e.length,n,s){if(r===0||i===0)return i;Uu.clear();for(let o=0;o<r;++o)Uu.add(e[o]);n=n||Ghe;const a=Math.max(0,n.last-10);for(let o=a;o<i;++o)if(Uu.has(t[o])&&(s==null||s.push(t[o]),Uu.delete(t[o]),t[o]=t[i-1],--i,--o,Uu.size===0||i===0))return Uu.clear(),i;for(let o=0;o<a;++o)if(Uu.has(t[o])&&(s==null||s.push(t[o]),Uu.delete(t[o]),t[o]=t[i-1],--i,--o,Uu.size===0||i===0))return Uu.clear(),i;return Uu.clear(),i}function iAe(t,e){let i=0;for(let r=0;r<t.length;++r){const n=t[r];e(n,r)&&(t[i]=n,i++)}return t.length=i,t}function Uwt(t,e,i){const r=t.length;if(e>=r)return t.slice();const n=SW(i),s=new Set,a=[];for(;a.length<e;){const o=Math.floor(n()*r);s.has(o)||(s.add(o),a.push(t[o]))}return a}function SW(t){return t?(Fte.seed=t,()=>Fte.getFloat()):Math.random}const Fte=new $W;function Whe(t,e){if(!t)return t;const i=SW(e);for(let r=t.length-1;r>0;r--){const n=Math.floor(i()*(r+1)),s=t[r];t[r]=t[n],t[n]=s}return t}function TW(t,e){const i=t.indexOf(e);return i!==-1?(t.splice(i,1),e):null}function ln(t,e){return t!=null}const Bwt=[];function qwt(t){return t instanceof ArrayBuffer}function IW(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Int8Array"}function Zhe(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint8Array"}function Yhe(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint8ClampedArray"}function MW(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Int16Array"}function Jhe(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint16Array"}function CW(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Int32Array"}function Xhe(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint32Array"}function rAe(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Float16Array"}function cD(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Float32Array"}function uD(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Float64Array"}function Qhe(t){return"buffer"in t}const Khe=1024;function Hwt(t){return uD(t)||cD(t)||CW(t)||MW(t)||IW(t)}function Gwt(t){return uD(t)||cD(t)}function Wwt(t){return uD(t)?179769e303:rAe(t)?65504:cD(t)?3402823e32:Xhe(t)?4294967295:Jhe(t)?65535:Zhe(t)||Yhe(t)?255:CW(t)?2147483647:MW(t)?32767:IW(t)?127:256}const Zwt=-32768,Ywt=-2147483648;function Jwt(t){return t}function nAe(t,e){let i;for(i in t)t.hasOwnProperty(i)&&t[i]===void 0&&delete t[i];return t}function he(t){if(!t||typeof t!="object"||typeof t=="function")return t;const e=ipe(t);if(e!=null)return e;if(s2(t))return t.clone();if(epe(t))return t.map(he);if(tpe(t))throw new Error("Trying to clone an unclonable Accessor instance");const i={};for(const r of Object.getOwnPropertyNames(t))i[r]=he(t[r]);return i}function ZB(t,e){if(!t||typeof t!="object"||typeof t=="function"||"HTMLElement"in globalThis&&t instanceof HTMLElement)return t;const i=ipe(t);if(i!=null)return i;if(epe(t)){let n=!0;const s=t.map(a=>{const o=ZB(a,e);return a!=null&&o==null&&(n=!1),o});return n?s:null}if(s2(t))return t.clone(e);if(t instanceof File||t instanceof Blob)return t;if(tpe(t))return null;const r=new(Object.getPrototypeOf(t)).constructor;for(const n of Object.getOwnPropertyNames(t)){const s=t[n],a=ZB(s);if(s!=null&&a==null)return null;r[n]=a}return r}function s2(t){return typeof t.clone=="function"}function epe(t){return typeof t.map=="function"&&typeof t.forEach=="function"}function tpe(t){return typeof t.notifyChange=="function"&&typeof t.watch=="function"}function Rte(t){if(Object.prototype.toString.call(t)!=="[object Object]")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function ipe(t){if(IW(t)||Zhe(t)||Yhe(t)||MW(t)||Jhe(t)||CW(t)||Xhe(t)||cD(t)||uD(t))return t.slice();if(t instanceof Date)return new Date(t);if(t instanceof ArrayBuffer)return t.slice(0,t.byteLength);if(t instanceof Map){const e=new Map;for(const[i,r]of t)e.set(i,he(r));return e}if(t instanceof Set){const e=new Set;for(const i of t)e.add(he(i));return e}return null}function EW(t,e){return t===e||typeof t=="number"&&isNaN(t)&&typeof e=="number"&&isNaN(e)||typeof(t==null?void 0:t.getTime)=="function"&&typeof(e==null?void 0:e.getTime)=="function"&&t.getTime()===e.getTime()||!1}function rpe(t,e){return t===e||(t==null||typeof t=="string"?t===e:typeof t=="number"?t===e||typeof e=="number"&&isNaN(t)&&isNaN(e):t instanceof Date?e instanceof Date&&t.getTime()===e.getTime():Array.isArray(t)?Array.isArray(e)&&lD(t,e):t instanceof Set?e instanceof Set&&aAe(t,e):t instanceof Map?e instanceof Map&&oAe(t,e):!!Rte(t)&&Rte(e)&&sAe(t,e))}function sAe(t,e){if(t===null||e===null)return!1;const i=Object.keys(t);if(e===null||Object.keys(e).length!==i.length)return!1;for(const r of i)if(t[r]!==e[r]||!Object.prototype.hasOwnProperty.call(e,r))return!1;return!0}function aAe(t,e){if(t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0}function oAe(t,e){if(t.size!==e.size)return!1;for(const[i,r]of t){const n=e.get(i);if(n!==r||n===void 0&&!e.has(i))return!1}return!0}function kW(t,e,i=!1){return spe(t,e,i)}function $k(t,e){if(e!=null)return e[t]||npe(t.split("."),!1,e)}function qn(t,e,i){const r=t.split("."),n=r.pop(),s=npe(r,!0,i);s&&n&&(s[n]=e)}function zte(t,e){if(t==null&&e==null)return!1;if(t==null||e==null)return!0;if(typeof t=="object"){if(Array.isArray(t)){const i=e;if(t.length!==i.length)return!0;for(let r=0;r<t.length;r++)if(zte(t[r],i[r]))return!0;return!1}if(Object.keys(t).length!==Object.keys(e).length)return!0;for(const i in t)if(zte(t[i],e[i]))return!0;return!1}return t!==e}function npe(t,e,i){let r=i;for(const n of t){if(r==null)return;if(!(n in r)){if(!e)return;r[n]={}}r=r[n]}return r}function spe(t,e,i){return e?Object.keys(e).reduce((r,n)=>{if(n==="__proto__")return r;let s=r[n],a=e[n];return s===a?r:s===void 0?(r[n]=he(a),r):(Array.isArray(a)||Array.isArray(r)?(s=s?Array.isArray(s)?r[n]=s.slice():r[n]=[s]:r[n]=[],a&&(Array.isArray(a)||(a=[a]),i?a.forEach(o=>{s.includes(o)||s.push(o)}):r[n]=a.slice())):a&&typeof a=="object"?r[n]=spe(s,a,i):r.hasOwnProperty(n)&&!e.hasOwnProperty(n)||(r[n]=a),r)},t||{}):t}function Xwt(t,e){for(const i of Object.entries(t))if(e===i[1])return i[0]}function dD(t,e){return Object.values(t).includes(e)}var Lde;const Ti={apiKey:void 0,apiKeys:{scopes:[]},applicationName:"",applicationUrl:(Lde=globalThis.location)==null?void 0:Lde.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",userPrivilegesApplied:!0,portalUrl:"https://www.arcgis.com",respectPrefersReducedMotion:!0,routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],internalInterceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:62e3,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(kW(Ti,globalThis.esriConfig,!0),delete Ti.has),!Ti.assetsPath){{const t="4.34";Ti.assetsPath=`https://js.arcgis.com/${t}/@arcgis/core/assets`}Ti.defaultAssetsPath=Ti.assetsPath}const lAe=/\{([^}]+)\}/g;function Nte(t){return t??""}function Ho(t,e){return e?t.replaceAll(lAe,typeof e=="object"?(i,r)=>Nte($k(r,e)):(i,r)=>Nte(e(r))):t}function Qwt(t,e){return t.replaceAll(/([.$?*|{}()[\]\\/+\-^])/g,i=>e!=null&&e.includes(i)?i:`\\${i}`)}function ape(t){let e=0;for(let i=0;i<t.length;i++)e=(e<<5)-e+t.charCodeAt(i),e|=0;return e}let Dte;function Iv(t){return Dte??(Dte=new DOMParser),Dte.parseFromString(t||"","text/html").body.innerText||""}function YB(t,e){return new RegExp(`{${e}}`,"ig").test(t)}function Kwt(t,...e){let i=t[0];for(let r=0;r<e.length;++r)i+=e[r]+t[r+1];return i}const jte={info:0,warn:1,error:2,none:3};var os;let Ie=(os=class{constructor(e){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},e.level!=null&&(this.level=e.level),e.writer!=null&&(this.writer=e.writer),this._module=e.module,os._loggers.set(this.module,this);const i=this.module.lastIndexOf(".");i!==-1&&(this._parent=os.getLogger(this.module.slice(0,i)))}get module(){return this._module}get parent(){return this._parent}error(...e){this._log("error","always",...e)}warn(...e){this._log("warn","always",...e)}info(...e){this._log("info","always",...e)}errorOnce(...e){this._log("error","once",...e)}warnOnce(...e){this._log("warn","once",...e)}infoOnce(...e){this._log("info","once",...e)}errorOncePerTick(...e){this._log("error","oncePerTick",...e)}warnOncePerTick(...e){this._log("warn","oncePerTick",...e)}infoOncePerTick(...e){this._log("info","oncePerTick",...e)}get test(){}static get test(){}static getLogger(e){return e=typeof e!="string"?e.declaredClass:e,os._loggers.get(e)||new os({module:e})}_log(e,i,...r){if(this._matchLevel(e)){if(i!=="always"&&!os._throttlingDisabled){const n=uAe(r),s=this._loggedMessages[e].get(n);if(i==="once"&&s!=null||i==="oncePerTick"&&s&&s>=os._tickCounter)return;this._loggedMessages[e].set(n,os._tickCounter),os._scheduleTickCounterIncrement()}for(const n of Ti.log.interceptors)if(n(e,this.module,...r))return;this._inheritedWriter()(e,this.module,...r)}}_parentWithMember(e,i){let r=this;for(;r!=null;){const n=r[e];if(n!=null)return n;r=r.parent}return i}_inheritedWriter(){return this._parentWithMember("writer",cAe)}_matchLevel(e){const i=Ti.log.level||"warn";return jte[this._parentWithMember("level",i)]<=jte[e]}static _scheduleTickCounterIncrement(){os._tickCounterScheduled||(os._tickCounterScheduled=!0,Promise.resolve().then(()=>{os._tickCounter++,os._tickCounterScheduled=!1}))}},os._loggers=new Map,os._tickCounter=0,os._tickCounterScheduled=!1,os._throttlingDisabled=!1,os);function cAe(t,e,...i){console[t](`[${e}]`,...i)}function uAe(...t){return ape(JSON.stringify(t,(i,r)=>typeof r!="object"||Array.isArray(r)?r:"[Object]"))}const dAe={remove:()=>{}};function Ii(t){return t?{remove(){t&&(t(),t=void 0)}}:dAe}function ope(t){t.forEach(e=>e==null?void 0:e.remove())}function e_t(t){ope(t),t.length=0}function h_(t){return Ii(()=>ope(t))}function t_t(t){return Ii(()=>{var e;return(e=t())==null?void 0:e.remove()})}function hAe(t){return Ii(()=>t==null?void 0:t.abort())}function i_t(t){return Ii(t!=null?()=>t.destroy():void 0)}function pAe(t){return typeof t=="object"&&!!t&&"remove"in t&&typeof t.remove=="function"}function r_t(t){pAe(t)&&t.remove()}function n_t(t){return{[Symbol.dispose](){t.remove()}}}function Go(t){return t.__accessor__??null}function fAe(t,e){var i;return((i=t==null?void 0:t.metadata)==null?void 0:i[e])!=null}function L3(t,e,i){return i?HF(t,e,{policy:i,path:""}):HF(t,e,null)}function HF(t,e,i){return e?Object.keys(e).reduce((r,n)=>{const s=n;if(s==="__proto__")return r;let a=null,o="merge";if(i&&(a=i.path?`${i.path}.${n}`:n,o=i.policy(a)),o==="replace"||o==="replace-arrays"&&Array.isArray(r[s]))return r[s]=e[s],r;if(r[s]===void 0)return r[s]=he(e[s]),r;let l=r[s],c=e[s];if(l===c)return r;if(Array.isArray(c)||Array.isArray(r))l=l?Array.isArray(l)?r[s]=l.slice():r[s]=[l]:r[s]=[],c&&(Array.isArray(c)||(c=[c]),c.forEach(h=>{l.includes(h)||l.push(h)}));else if(c&&typeof c=="object")if(i){const h=i.path;i.path=a,r[s]=HF(l,c,i),i.path=h}else r[s]=HF(l,c,null);else r.hasOwnProperty(n)&&!e.hasOwnProperty(n)||(r[s]=c);return r},t||{}):t}function lpe(t){return Array.isArray(t)?t:t.split(".")}function Vte(t){return t.includes(",")?t.split(",").map(e=>e.trim()):[t.trim()]}function mAe(t){if(Array.isArray(t)){const e=[];for(const i of t)e.push(...Vte(i));return e}return Vte(t)}function cpe(t,e,i,r){const n=mAe(e);if(n.length!==1){const s=n.map(a=>r(t,a,i));return h_(s)}return r(t,n[0],i)}const en={Dirty:1,Overridden:2,Computing:4,NonNullable:8,HasDefaultValue:16,DepTrackingInitialized:32,AutoTracked:64,ExplicitlyTracking:128};let hD=class{constructor(e){this.accessed=void 0,this._handles=void 0,this._observer=e}destroy(){var e;(e=this.accessed)==null||e.clear(),this.clear()}onAccessed(e){this._observer!=null&&e!==this._observer&&(this.accessed==null&&(this.accessed=new Set),this.accessed.add(e))}onTrackingEnd(){this._observer!=null&&(this.clear(),this.accessed!=null&&(this._handles==null&&(this._handles=[]),this.accessed.forEach(e=>{this._handles.push(e.observe(this._observer))}),this.accessed.clear()))}clear(){if(this._handles!=null){for(let e=0;e<this._handles.length;++e)this._handles[e].remove();this._handles.length=0}}};const GF=new hD,ZM=[];let a2=GF;function xt(t){a2.onAccessed(t)}let F3=!1,R3=!1;function Fp(t,e,i){if(F3)return AW(t,e,i);let r=null;return upe(t),r=e.call(i),dpe(),r}function gAe(t,e){return Fp(GF,t,e)}function AW(t,e,i){const r=F3;F3=!0,upe(t);let n=null;try{n=e.call(i)}catch(s){R3&&Ie.getLogger("esri.core.accessorSupport.tracking").error(s)}return dpe(),F3=r,n}function upe(t){a2=t,ZM.push(t)}function dpe(){const t=ZM.length;if(t>1){const e=ZM.pop();a2=ZM[t-2],e.onTrackingEnd()}else if(t===1){const e=ZM.pop();a2=GF,e.onTrackingEnd()}else a2=GF}function hpe(t,e){if(e.flags&en.DepTrackingInitialized)return;e.flags|=en.DepTrackingInitialized;const i=R3;R3=!1,e.flags&en.AutoTracked?AW(e.trackingTarget,e.metadata.get,t):ppe(t,e),R3=i}const yAe=[];function ppe(t,e){e.flags&en.ExplicitlyTracking||(e.flags|=en.ExplicitlyTracking,AW(e.trackingTarget,()=>{const i=e.metadata.dependsOn||yAe;for(const r of i)if(typeof r!="string"||r.includes(".")){const n=lpe(r);for(let s=0,a=t;s<n.length&&a!=null&&typeof a=="object";++s)a=Ute(a,n[s],s!==n.length-1)}else Ute(t,r,!1)}),e.flags&=-129)}function Ute(t,e,i){const r=e.endsWith("?")?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const s=parseInt(r,10);if(!isNaN(s))return Array.isArray(t)?t[s]:t.at(s)}const n=Go(t);if(n){const s=n.propertiesByName.get(r);s&&(xt(s),hpe(t,s))}return i?t[r]:void 0}let vAe=class{constructor(e,i){this._observers=e,this._observer=i}remove(){TW(this._observers,this._observer)}},fpe=class{constructor(){this._observers=null,this.destroyed=!1}observe(e){if(this.destroyed||e.destroyed)return bAe;this._observers==null&&(this._observers=[]);const i=this._observers;let r=!1,n=!1;const s=i.length;for(let a=0;a<s;++a){const o=i[a];if(o.destroyed)n=!0;else if(o===e){r=!0;break}}return r||(i.push(e),n&&this._removeDestroyedObservers()),new vAe(i,e)}_removeDestroyedObservers(){const e=this._observers;if(!e||e.length===0)return;const i=e.length;let r=0;for(let n=0;n<i;++n){for(;n+r<i&&e[n+r].destroyed;)++r;if(r>0){if(!(n+r<i))break;e[n]=e[n+r]}}e.length=i-r}destroy(){if(this.destroyed)return;this.destroyed=!0;const e=this._observers;if(e!=null){for(const i of e)i.onCommitted();this._observers=null}}};const bAe=Ii();let p_=class extends fpe{notify(){const e=this._observers;if(e&&e.length>0){const i=e.slice();for(const r of i)r.onInvalidated(),r.onCommitted()}}},wAe=class{constructor(e,i){this._observable=new p_,this._value=e,this._equalityFunction=i}get value(){return xt(this._observable),this._value}set value(e){this._equalityFunction(e,this._value)||(this._value=e,this._observable.notify())}mutate(e){e(this._value),this._observable.notify()}};function Yw(t,e=rpe){return new wAe(t,e)}let Sk=class extends hD{constructor(e){super(new _Ae(e)),this._observer&&Bte.register(this,new WeakRef(this._observer),this)}destroy(){var e,i;this._observer&&Bte.unregister(this._observer),(e=this.accessed)==null||e.clear(),this.clear(),(i=this._observer)==null||i.destroy()}},_Ae=class{constructor(e){this._notify=e,this._invalidCount=0,this.destroyed=!1}onInvalidated(){this._invalidCount++}onCommitted(){if(this.destroyed)return;const e=this._invalidCount;if(e===1)return this._invalidCount=0,void this._notify();this._invalidCount=e>0?e-1:0}destroy(){this.destroyed=!0,this._notify=xAe}};const Bte=new FinalizationRegistry(t=>{var e;(e=t.deref())==null||e.destroy()});function xAe(){}function mpe(){return new p_}function $Ae(t){return new Sk(t)}function gpe(t){xt(t)}function SAe(t,e){return Fp(t,e)}/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.7 */const TAe=ct`:host{display:block;box-sizing:border-box;*,*:before,*:after{box-sizing:inherit}}:host([hidden]){display:none}:host(:not(arcgis-basemap-gallery-item,arcgis-layer-list-item,arcgis-print-custom-text-elements,arcgis-print-dpi-input,arcgis-print-export-button,arcgis-print-exported-link,arcgis-print-exports-panel,arcgis-print-format-select,arcgis-print-layout-advanced-options,arcgis-print-layout-panel,arcgis-print-main-panel,arcgis-print-map-only-advanced-options,arcgis-print-map-only-panel,arcgis-print-out-spatial-reference-input,arcgis-print-preview-input,arcgis-print-scale-section,arcgis-print-template-select,arcgis-print-template-selector,arcgis-labeled-switch,arcgis-measurement-content,arcgis-version-management-service-item,arcgis-version-management-version-item,arcgis-version-management-version-list,arcgis-version-management-version-properties,arcgis-video-player-action-bar,arcgis-video-player-actions-group,arcgis-video-player-controls-group,arcgis-video-player-metadata,arcgis-video-player-settings,arcgis-video-player-slider)){font-family:var(--calcite-font-family)}`,Tk=ohe({defaultAssetPath:"https://js.arcgis.com/4.34/map-components/",hydratedAttribute:"hydrated",commonStyles:TAe}),{customElement:yr,getAssetPath:IAe,setAssetPath:h_t}=Tk;Tk.t=gpe;Tk.o=mpe;Tk.c=$Ae;Tk.r=SAe;function pD(t){return MAe(t)||ype(t)}function MAe(t){return t!=null&&typeof t=="object"&&"on"in t&&typeof t.on=="function"}function ype(t){return t!=null&&typeof t=="object"&&"addEventListener"in t&&typeof t.addEventListener=="function"}function MT(t,e,i){if(!pD(t))throw new TypeError("target is not a Evented or EventTarget object");return ype(t)?CAe(t,e,i):t.on(e,i)}function CAe(t,e,i,r){if(Array.isArray(e)){const n=e.slice();for(const s of n)t.addEventListener(s,i,r);return Ii(()=>{for(const s of n)t.removeEventListener(s,i,r)})}return t.addEventListener(e,i,r),Ii(()=>t.removeEventListener(e,i,r))}function vpe(t,e,i){if(!pD(t))throw new TypeError("target is not a Evented or EventTarget object");if("once"in t)return t.once(e,i);const r=MT(t,e,n=>{r.remove(),i.call(t,n)});return r}function Ik(t,e){if(t==null)throw new Error(e??"value is None")}function Or(t){return t==null||t.destroy(),null}function p_t(t){return t==null||t.dispose(),null}function Dr(t){return t==null||t.remove(),null}function Fa(t){return t==null||t.abort(),null}function f_t(t){return t==null||t.release(),null}function EAe(t,e,i){return t!=null&&e!=null?i!=null?i(t,e):t.equals(e):t===e}function kAe(t,e){let i;return t.some((r,n)=>(i=e(r,n),i!=null)),i??void 0}function AAe(t){return{setTimeout:(e,i)=>{const r=t.setTimeout(e,i);return Ii(()=>t.clearTimeout(r))}}}const CT=AAe(globalThis);function PAe(t,e){return t.replaceAll(/\$\{([^\s:}]*)(?::([^\s:}]+))?\}/g,(i,r)=>r===""?"$":($k(r,e)??"").toString())}let bpe=class{constructor(e,i,r=void 0){this.name=e,this.details=r,this.message=(i&&PAe(i,r))??""}toString(){return"["+this.name+"]: "+this.message}},ae=class wpe extends bpe{constructor(e,i,r){super(e,i,r)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(e,i)=>{if(i&&typeof i=="object"&&typeof i.toJSON=="function")return i;try{return he(i)}catch{return"[object]"}}))}}catch(e){throw Ie.getLogger("esri.core.Error").error(e),e}return{name:this.name,message:this.message,details:this.details}}static fromJSON(e){return new wpe(e.name,e.message,e.details)}};ae.prototype.type="error";function Hi(t="Aborted"){return new ae("AbortError",t)}function lr(t,e="Aborted"){if(co(t))throw Hi(e)}function Mk(t){return t instanceof AbortSignal?t:(t==null?void 0:t.signal)??void 0}function co(t){const e=Mk(t);return e!=null&&e.aborted}function Bh(t){if(In(t))throw t}function JB(t){if(!In(t))throw t}function _u(t,e){const i=Mk(t);if(i!=null){if(!i.aborted)return vpe(i,"abort",()=>e());e()}}function PW(t,e){const i=Mk(t);if(i!=null)return lr(i),vpe(i,"abort",()=>e(Hi()))}function OW(t,e){return Mk(e)==null?t:new Promise((i,r)=>{let n=_u(e,()=>r(Hi()));const s=()=>{n=Dr(n)};t.then(s,s),t.then(i,r)})}function In(t){return(t==null?void 0:t.name)==="AbortError"}async function la(t){try{return await t}catch(e){if(!In(e))throw e;return}}async function Gm(t){if(!t)return;if(typeof t.forEach!="function"){const i=Object.keys(t),r=i.map(a=>t[a]),n=await Gm(r),s={};return i.map((a,o)=>s[a]=n[o]),s}const e=t;return Promise.allSettled(e).then(i=>Array.from(e,(r,n)=>{const s=i[n];return s.status==="fulfilled"?{promise:r,value:s.value}:{promise:r,error:s.reason}}))}async function OAe(t){return(await Promise.allSettled(t)).filter(e=>e.status==="fulfilled").map(e=>e.value)}async function g_t(t){return(await Promise.allSettled(t)).filter(e=>e.status==="rejected").map(e=>e.reason)}function Ck(t,e=void 0,i){const r=new AbortController;return _u(i,()=>r.abort()),new Promise((n,s)=>{let a=setTimeout(()=>{a=0,n(e)},t);_u(r,()=>{a&&(clearTimeout(a),s(Hi()))})})}function y_t(t,e,i,r){const n=i&&"abort"in i?i:null;r!=null||n||(r=i);let s=setTimeout(()=>{s=0,n==null||n.abort()},e);const a=()=>r||new ae("promiseUtils:timeout","The wrapped promise did not resolve within "+e+" ms");return t.then(o=>{if(s===0)throw a();return clearTimeout(s),o},o=>{throw clearTimeout(s),s===0?a():o})}function LAe(t,e){const i=new AbortController,r=setTimeout(()=>i.abort(),e);return _u(t,()=>{i.abort(),clearTimeout(r)}),{...t,signal:i.signal}}function uo(t){return t&&typeof t.then=="function"}function XB(t){return uo(t)?t:Promise.resolve(t)}function Od(t,e=-1){let i,r,n,s,a=null;const o=(...l)=>{if(i){r=l,s&&s.reject(Hi()),s=Fl();const g=s.promise;if(a){const v=a;a=null,v.abort()}return g}if(n=s||Fl(),s=null,e>0){const g=new AbortController;i=XB(t(...l,g.signal));const v=i;Ck(e).then(()=>{i===v&&(s?g.abort():a=g)})}else i=1,i=XB(t(...l));const c=()=>{const g=r;r=n=i=a=null,g!=null&&o(...g)},h=i,m=n;return h.then(c,c),h.then(m.resolve,m.reject),m.promise};return o}function Fl(){let t,e;const i=new Promise((n,s)=>{t=n,e=s}),r=n=>{t(n)};return r.resolve=n=>t(n),r.reject=n=>e(n),r.timeout=(n,s)=>CT.setTimeout(()=>r.reject(s),n),r.promise=i,r}function v_t(t,e){e.then(t.resolve,t.reject)}async function qte(t){await Promise.resolve(),lr(t)}function FAe(t){return(t==null?void 0:t.release)&&typeof t.release=="function"}function RAe(t){return(t==null?void 0:t.acquire)&&typeof t.acquire=="function"}var $v;let Vv=($v=class{constructor(e,i,r,n=1,s=0){this._creator=e,this._acquireFunction=i,this._releaseFunction=r,this.allocationSize=n,this._pool=new Array(s),this._initialSize=s;for(let a=0;a<s;a++)this._pool[a]=this._creator();this.allocationSize=Math.max(n,1)}destroy(){this.prune(0)}acquire(...e){let i;if($v.test.disabled)i=this._creator();else{if(this._pool.length===0){const r=this.allocationSize;for(let n=0;n<r;n++)this._pool[n]=this._creator()}i=this._pool.pop()}return this._acquireFunction?this._acquireFunction(i,...e):RAe(i)&&i.acquire(...e),i}release(e){e&&!$v.test.disabled&&(this._releaseFunction?this._releaseFunction(e):FAe(e)&&e.release(),this._pool.push(e))}prune(e=this._initialSize){if(!(e>=this._pool.length)){for(let i=e;i<this._pool.length;++i){const r=this._pool[i];this._dispose(r)}this._pool.length=e}}_dispose(e){e.dispose&&typeof e.dispose=="function"&&e.dispose()}},$v.test={disabled:!!ve("esri-tests-disable-memory-pools")},$v);function zAe(t){t.length=0}let zo=class{constructor(e=50,i=50){this._pool=new Vv(()=>[],void 0,zAe,i,e)}acquire(){return this._pool.acquire()}release(e){this._pool.release(e)}prune(){this._pool.prune(0)}static acquire(){return AV.acquire()}static release(e){return AV.release(e)}static prune(){AV.prune()}};const AV=new zo(100);let _pe=class extends Vv{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=null}acquire(...e){const i=super.acquire(...e);return this._set.delete(i),i}release(e){e&&!this._set.has(e)&&(super.release(e),this._set.add(e))}_dispose(e){this._set.delete(e),super._dispose(e)}};const LP=[];function WF(t){LP.push(t),LP.length===1&&queueMicrotask(()=>{const e=LP.slice();LP.length=0;for(const i of e)i()})}let o2=class{constructor(e,i=30){this.name=e,this._counter=0,this._samples=new Array(i)}push(e){e!=null&&(this._samples[++this._counter%this._samples.length]=e)}set(e){e!=null&&(this._samples[this._counter%this._samples.length]=e)}get median(){return this._samples.slice().sort((e,i)=>e-i)[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce((e,i)=>e+i,0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}};const ZF=(t,e,i,r)=>{let n=e,s=e;const a=i>>>1,o=t[n-1];for(;s<=a;){s=n<<1,s<i&&r(t[s-1],t[s])<0&&++s;const l=t[s-1];if(r(l,o)<=0)break;t[n-1]=l,n=s}t[n-1]=o},xpe=(t,e)=>t<e?-1:t>e?1:0;function NAe(t,e,i,r){i===void 0&&(i=t.length),r===void 0&&(r=xpe);for(let s=i>>>1;s>e;s--)ZF(t,s,i,r);const n=e+1;for(let s=i-1;s>e;s--){const a=t[e];t[e]=t[s],t[s]=a,ZF(t,n,s,r)}}function*DAe(t,e,i,r){i===void 0&&(i=t.length),r===void 0&&(r=xpe);for(let s=i>>>1;s>e;s--)ZF(t,s,i,r),yield;const n=e+1;for(let s=i-1;s>e;s--){const a=t[e];t[e]=t[s],t[s]=a,ZF(t,n,s,r),yield}}const jAe=1.5,VAe=1.1;let $pe=class{constructor(e){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new Hhe,e&&(e.initialSize&&(this.data=new Array(e.initialSize)),e.allocator&&(this._allocator=e.allocator),e.deallocator!==void 0&&(this._deallocator=e.deallocator),e.shrink&&(this._shrink=()=>Hte(this)))}toArray(){return this.data.slice(0,this.length)}filter(e){const i=new Array;for(let r=0;r<this._length;r++){const n=this.data[r];e(n)&&i.push(n)}return i}at(e){if((e=Math.trunc(e)||0)<0&&(e+=this._length),!(e<0||e>=this._length))return this.data[e]}includes(e,i){const r=this.data.indexOf(e,i);return r!==-1&&r<this.length}get length(){return this._length}set length(e){if(e>this._length){if(this._allocator){for(;this._length<e;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=e}else{if(this._deallocator)for(let i=e;i<this._length;++i)this.data[i]=this._deallocator(this.data[i]);this._length=e,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(e){this.data[this._length++]=e}pushArray(e,i=e.length){for(let r=0;r<i;r++)this.data[this._length++]=e[r]}fill(e,i){for(let r=0;r<i;r++)this.data[this._length++]=e}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const e=this.data[this._length];return++this._length,e}unshift(e){this.data.unshift(e),this._length++,Hte(this)}pop(){if(this.length===0)return;const e=this.data[this.length-1];return this.length=this.length-1,this._shrink(),e}remove(e){const i=GB(this.data,e,this.length,this._hint);if(i!==-1)return this.data.splice(i,1),this.length=this.length-1,e}removeUnordered(e){return this.removeUnorderedIndex(GB(this.data,e,this.length,this._hint))}removeUnorderedIndex(e){if(!(e>=this.length||e<0))return this.swapElements(e,this.length-1),this.pop()}removeUnorderedMany(e,i=e.length,r){this.length=tAe(this.data,e,this.length,i,this._hint,r),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(e,i){if(e>=this.length||i>=this.length||e===i)return;const r=this.data[e];this.data[e]=this.data[i],this.data[i]=r}sort(e){NAe(this.data,0,this.length,e)}iterableSort(e){return DAe(this.data,0,this.length,e)}some(e,i){for(let r=0;r<this.length;++r)if(e.call(i,this.data[r],r,this.data))return!0;return!1}find(e,i){const{data:r,length:n}=this;for(let s=0;s<n;++s)if(e.call(i,r[s]))return r[s]}filterInPlace(e,i){let r=0;for(let n=0;n<this._length;++n){const s=this.data[n];e.call(i,s,n,this.data)&&(this.data[n]=this.data[r],this.data[r]=s,r++)}if(this._deallocator)for(let n=r;n<this._length;n++)this.data[n]=this._deallocator(this.data[n]);return this._length=r,this._shrink(),this}forAll(e,i){const{data:r,length:n}=this;for(let s=0;s<n;++s)e.call(i,r[s],s,r)}forEach(e,i){this.data.slice(0,this.length).forEach(e,i)}map(e,i){const r=new Array(this.length);for(let n=0;n<this.length;++n)r[n]=e.call(i,this.data[n],n,this.data);return r}reduce(e,i){let r=i;for(let n=0;n<this.length;++n)r=e(r,this.data[n],n,this.data);return r}has(e){const i=this.length,r=this.data;for(let n=0;n<i;++n)if(r[n]===e)return!0;return!1}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.data[e]}};function Hte(t){t.data.length>jAe*t.length&&(t.data.length=Math.floor(t.length*VAe))}function $_t(t){return t}function UAe(t){return 1e3*t}function S_t(t){return t}function T_t(t){return .001*t}let BAe=class{constructor(e){this.phases=e,this.paused=!1,this.ticks=-1,this.removed=!1}},qAe=class{constructor(e){this.callback=e,this.isActive=!0}remove(){this.isActive=!1}},QB=0;const sM={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},KB=["prepare","preRender","render","postRender","update","finish"],e8=[],Jw=new $pe;let HAe=class{constructor(e){this._task=e}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1,Spe()}};function GAe(){K0!=null&&(cancelAnimationFrame(K0),K0=requestAnimationFrame(LW))}function Spe(){K0==null&&(QB=performance.now(),K0=requestAnimationFrame(LW))}const YF={frameTasks:Jw,willDispatch:!1,clearFrameTasks:WAe,dispatch:Ipe,executeFrameTasks:ZAe,reschedule:GAe};function ET(t){const e=new qAe(t);return e8.push(e),YF.willDispatch||(YF.willDispatch=!0,WF(Ipe)),e}function GS(t){const e=new BAe(t);return Jw.push(e),Spe(),new HAe(e)}let K0=null;function WAe(t=!1){Jw.forAll(e=>{e.removed=!0}),t&&Tpe()}function LW(){const t=performance.now();K0=null,K0=Jw.some(i=>!i.paused&&!i.removed)?requestAnimationFrame(LW):null,YF.executeFrameTasks(t)}function ZAe(t){const e=t-QB;QB=t;const i=1e3/60,r=Math.max(0,e-i);sM.time=t,sM.frameDuration=i-r;for(let n=0;n<KB.length;n++){const s=performance.now(),a=KB[n];Jw.forAll(o=>{var l;o.paused||o.removed||(n===0&&o.ticks++,o.phases[a]&&(sM.elapsedFrameTime=performance.now()-t,sM.deltaTime=o.ticks===0?0:e,(l=o.phases[a])==null||l.call(o,sM)))}),XAe[n].push(performance.now()-s)}Tpe(),QAe.push(performance.now()-t)}const FP=new $pe;function Tpe(){Jw.forAll(t=>{t.removed&&FP.push(t)}),Jw.removeUnorderedMany(FP.data,FP.length),FP.clear()}function Ipe(){for(;e8.length;){const t=e8.shift();t.isActive&&t.callback()}YF.willDispatch=!1}function YAe(t=1,e){const i=Fl(),r=()=>{co(e)?i.reject(Hi()):t===0?i():(--t,WF(()=>r()))};return r(),i.promise}function JAe(t){return YAe(1,t)}async function FW(t){await JAe(t),await new Promise(e=>requestAnimationFrame(()=>{t!=null&&t.aborted||e()}))}const XAe=KB.map(t=>new o2(t)),QAe=new o2("total");function Mpe(t,e){for(const i of t.values())if(e(i))return!0;return!1}function JF(t,e){if(!e)return t;for(const i of e)i!=null&&t.add(i);return t}function Gte(t,e){return e!=null&&t.add(e),t}function RW(t,e){const i=new Set;return JF(i,t),JF(i,e),i}function KAe(t,e){const i=new Set;for(const r of e)t.has(r)&&i.add(r);return i}function E_t(t,e){if(!t||!e)return!1;if(t===e)return!0;for(const i of t)if(!e.has(i))return!1;return!0}function k_t(t,e){if(t==null&&e==null)return!0;if(t==null||e==null||t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0}function ePe(t,e){const i=new Set(t);for(const r of e)i.delete(r);return i}function tPe(t,e){return ePe(RW(t,e),KAe(t,e))}let iPe=0;function z3(){return++iPe}function Cpe(t,e){const i=t.endsWith("?")?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const n=parseInt(i,10);if(!isNaN(n))return Array.isArray(e)?e[n]:e.at(n)}const r=Go(e);return fAe(r,i)?r.get(i):e[i]}function Epe(t,e,i){if(t==null)return t;const r=Cpe(e[i],t);return!r&&i<e.length-1?void 0:i===e.length-1?r:Epe(r,e,i+1)}function Ek(t,e,i=0){return typeof e!="string"||e.includes(".")?Epe(t,lpe(e),i):Cpe(e,t)}function mu(t,e){return Ek(t,e)}function Wte(t,e){return Ek(e,t)!==void 0}const mc={INITIALIZING:0,CONSTRUCTING:1,CONSTRUCTED:2,DESTROYING:3,DESTROYED:4};let L$=!1;const XF=[];function kpe(t,e){let i=new Sk(s),r=null,n=!1;function s(){if(!i||n)return;if(L$)return void Ope(s);const o=r;i.clear(),L$=!0,n=!0,r=Fp(i,t),n=!1,L$=!1,e(r,o),Lpe()}function a(){i&&(i.destroy(),i=null,r=null)}return n=!0,r=Fp(i,t),n=!1,Ii(a)}function Ape(t,e){let i=new Sk(n),r=null;function n(){e(r,a)}function s(){i&&(i.destroy(),i=null),r=null}function a(){return i?(i.clear(),r=Fp(i,t),r):null}return a(),Ii(s)}function Ppe(t,e){let i=!1,r=!1;const n=!!(e!=null&&e.sync);let s=new Sk(()=>{i||r||(r=!0,n?a():queueMicrotask(a))});function a(){r=!1,s&&!i&&(L$?Ope(a):(s.clear(),L$=!0,i=!0,Fp(s,t),i=!1,L$=!1,Lpe()))}function o(){s&&(s.destroy(),s=null)}return i=!0,Fp(s,t),i=!1,Ii(o)}function Ope(t){XF.includes(t)||XF.unshift(t)}function Lpe(){for(;XF.length;)XF.pop()()}var fw;let zW=(fw=class{constructor(){this.uid=z3(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(e,i,r,n,s){return this.pool.acquire(0,e,i,r,n,s,EW)}static acquireTracked(e,i,r,n){return this.pool.acquire(1,e,i,r,null,null,n)}notify(e,i){this.type===0?this.callback.call(this.target,e,i,this.path,this.target):this.callback.call(null,e,i,void 0,void 0)}acquire(e,i,r,n,s,a,o){this.uid=z3(),this.removed=!1,this.type=e,this.oldValue=i,this.callback=r,this.getValue=n,this.target=s,this.path=a,this.equals=o}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=z3(),this.removed=!0}},fw.pool=new _pe(()=>new fw),fw);const N3=new zo,Nm=new Set;let QF;function KF(t){Nm.delete(t),Nm.add(t),Fpe()}function Fpe(){QF||(QF=ET(sPe))}function rPe(t){if(t.removed)return;const e=t.oldValue,i=t.getValue();t.equals(e,i)||(t.oldValue=i,t.notify(i,e))}function nPe(t){for(const e of Nm.values())e.target===t&&(e.removed=!0)}function sPe(){let t=10;for(;QF&&t--;){QF=null;const e=aPe(),i=N3.acquire();for(const r of e){const n=r.uid;rPe(r),n===r.uid&&r.removed&&i.push(r)}for(const r of Nm)r.removed&&(i.push(r),Nm.delete(r));for(const r of i)zW.pool.release(r);N3.release(i),N3.release(e),t8.forEach(r=>r())}}function aPe(){const t=N3.acquire();t.length=Nm.size;let e=0;for(const i of Nm)t[e]=i,++e;return Nm.clear(),t}const t8=new Set;function oPe(t){return t8.add(t),Ii(()=>t8.delete(t))}function lPe(t,e,i){let r=cpe(t,e,i,(n,s,a)=>{let o,l,c=Ape(()=>Ek(n,s),(h,m)=>{var g;((g=n.__accessor__)==null?void 0:g.lifecycle)===mc.DESTROYED||o&&o.uid!==l?r.remove():(o||(o=zW.acquireUntracked(h,a,m,n,s),l=o.uid),KF(o))});return Ii(()=>{c.remove(),o&&(o.uid!==l||o.removed||(o.removed=!0,KF(o)),o=null),r=c=null})});return r}function cPe(t,e,i){const r=cpe(t,e,i,(n,s,a)=>{let o=!1;return kpe(()=>Ek(n,s),(l,c)=>{n.__accessor__.lifecycle!==mc.DESTROYED?o||(o=!0,EW(c,l)||a.call(n,l,c,s,n),o=!1):r.remove()})});return r}function uPe(t,e,i,r=!1){return t.__accessor__&&t.__accessor__.lifecycle!==mc.DESTROYED?r?cPe(t,e,i):lPe(t,e,i):Ii()}function dPe(t,e,i){let r,n,s=Ape(t,(a,o)=>{r&&r.uid!==n?s.remove():(r||(r=zW.acquireTracked(a,e,o,i),n=r.uid),KF(r))});return Ii(()=>{s.remove(),r&&(r.uid!==n||r.removed||(r.removed=!0,KF(r)),r=null),s=null})}function hPe(t,e,i){let r=!1;return kpe(t,(n,s)=>{r||(r=!0,i(s,n)||e(n,s),r=!1)})}function pPe(t,e,i=!1,r=rpe){return i?hPe(t,e,r):dPe(t,e,r)}function Zte(t){return Mpe(Nm,e=>e.oldValue===t)}function be(t,e,i={}){return NW(t,e,i,Rpe)}function cn(t,e,i={}){return NW(t,e,i,zpe)}function NW(t,e,i={},r){let n=null;const s=i.once?(a,o)=>{r(a)&&(Dr(n),e(a,o))}:(a,o)=>{r(a)&&e(a,o)};if(n=pPe(t,s,i.sync,i.equals),i.initial){const a=t();s(a,a)}return n}function ca(t,e,i,r={}){let n=null,s=null,a=null;function o(){var h;n&&s&&(s.remove(),(h=r.onListenerRemove)==null||h.call(r,n),n=null,s=null)}function l(h){r.once&&r.once&&Dr(a),i(h)}const c=be(t,(h,m)=>{var g;o(),pD(h)&&(n=h,s=MT(h,e,l),(g=r.onListenerAdd)==null||g.call(r,h))},{sync:r.sync,initial:!0});return a=Ii(()=>{c.remove(),o()}),a}function kT(t,e){return fPe(t,zpe,e)}function fPe(t,e,i){if(co(i))return Promise.reject(Hi());const r=t();if(e!=null&&e(r))return Promise.resolve(r);let n=null;function s(){n=Dr(n)}return new Promise((a,o)=>{n=h_([_u(i,()=>{s(),o(Hi())}),NW(t,l=>{s(),a(l)},{sync:!1,once:!0},e??Rpe)])})}function Rpe(t){return!0}function zpe(t){return!!t}function A_t(t,e,i={}){let r=!1;const n=be(t,(s,a)=>{r||e(s,a)},i);return{remove(){n.remove()},pause(){r=!0},resume(){r=!1}}}const Nd={sync:!0},Ft={initial:!0},Ka={sync:!0,initial:!0};function d(t,e,i,r){var n=arguments.length,s=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,i):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(a=t[o])&&(s=(n<3?a(s):n>3?a(e,i,s):a(e,i))||s);return n>3&&s&&Object.defineProperty(e,i,s),s}function P_t(t,e){return function(i,r){e(i,r,t)}}function O_t(t,e,i,r){function n(s){return s instanceof i?s:new i(function(a){a(s)})}return new(i||(i=Promise))(function(s,a){function o(h){try{c(r.next(h))}catch(m){a(m)}}function l(h){try{c(r.throw(h))}catch(m){a(m)}}function c(h){h.done?s(h.value):n(h.value).then(o,l)}c((r=r.apply(t,e||[])).next())})}function mPe(t,e,i){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,n;if(i){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],i&&(n=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");n&&(r=function(){try{n.call(this)}catch(s){return Promise.reject(s)}}),t.stack.push({value:e,dispose:r,async:i})}else i&&t.stack.push({async:!0});return e}var gPe=typeof SuppressedError=="function"?SuppressedError:function(t,e,i){var r=new Error(i);return r.name="SuppressedError",r.error=t,r.suppressed=e,r};function yPe(t){function e(s){t.error=t.hasError?new gPe(s,t.error,"An error was suppressed during disposal."):s,t.hasError=!0}var i,r=0;function n(){for(;i=t.stack.pop();)try{if(!i.async&&r===1)return r=0,t.stack.push(i),Promise.resolve().then(n);if(i.dispose){var s=i.dispose.call(i.value);if(i.async)return r|=2,Promise.resolve(s).then(n,function(a){return e(a),n()})}else r|=1}catch(a){e(a)}if(r===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return n()}function vPe(t,e){for(const i of t.values())if(e(i))return!0;return!1}function L_t(t,e){for(const i of t.values())if(!e(i))return!1;return!0}function F_t(t,e){for(const i of t.values())if(e(i))return i;return null}function Gp(t,e,i){const r=t.get(e);if(r!==void 0)return r;const n=i();return t.set(e,n),n}function R_t(t){const e=new Map;return i=>(e.has(i)||e.set(i,t(i)),e.get(i))}const ew=()=>Ie.getLogger("esri.core.accessorSupport.ensureTypes");function bPe(t){if(t==null)return t;const e=new Date(t);return isNaN(e.getTime())?(ew().error("Accessor#set",`Invalid date value: '${t}', falling back to current date`),new Date):e}function wPe(t){return t==null?t:!!t}function kk(t){return t==null?t:t.toString()}function No(t,e=0){return t==null?t:(t=parseFloat(t),isNaN(t)?e:t)}function DW(t){return t==null?t:Math.round(parseFloat(t))}function _Pe(t){return null}function xPe(t,e){return i=>{let r=t(i);return e.step!=null&&(r=Math.round(r/e.step)*e.step),e.min!=null&&(r=Math.max(e.min,r)),e.max!=null&&(r=Math.min(e.max,r)),r}}function Npe(t){return(t==null?void 0:t.constructor)&&t.constructor.__accessorMetadata__!==void 0}function eR(t,e){return e!=null&&t&&!(e instanceof t)}function Dpe(t){return t&&"isCollection"in t}function Yte(t){return t!=null&&t.Type?typeof t.Type=="function"?t.Type:t.Type.base:null}function $Pe(t,e){if(!(e!=null&&e.constructor)||!Dpe(e.constructor))return i8(t,e)?e:new t(e);const i=Yte(t.prototype.itemType),r=Yte(e.constructor.prototype.itemType);return i?r?i===r?e:i.prototype.isPrototypeOf(r.prototype)?new t(e):(i8(t,e),e):new t(e):e}function i8(t,e){return!!Npe(e)&&(ew().error("Accessor#set","Assigning an instance of '"+(e.declaredClass||"unknown")+"' which is not a subclass of '"+fD(t)+"'"),!0)}function AT(t,e){return e==null?e:Dpe(t)?$Pe(t,e):eR(t,e)?i8(t,e)?e:new t(e):e}function fD(t){var e;return((e=t==null?void 0:t.prototype)==null?void 0:e.declaredClass)||"unknown"}const SPe=new WeakMap;function TPe(t){switch(t){case Number:return e=>No(e);case ei:return DW;case Boolean:return wPe;case String:return kk;case Date:return bPe;case PT:return _Pe;default:return Gp(SPe,t,()=>AT.bind(null,t))}}function Wn(t,e){const i=TPe(t);return arguments.length===1?i:i(e)}function cE(t,e,i){return arguments.length===1?cE.bind(null,t):e&&(Array.isArray(e)?e.map(r=>t(r,i)):[t(e,i)])}function IPe(t,e){return arguments.length===1?cE(i=>Wn(t,i)):cE(i=>Wn(t,i),e)}function jpe(t,e,i){return e!==0&&Array.isArray(i)?i.map(r=>jpe(t,e-1,r)):t(i)}function tR(t,e,i){if(arguments.length===2)return s=>tR(t,e,s);if(!i)return i;i=jpe(t,e,i);let r=e,n=i;for(;r>0&&Array.isArray(n);)r--,n=n[0];if(n!==void 0)for(let s=0;s<r;s++)i=[i];return i}function MPe(t,e,i){return arguments.length===2?tR(r=>Wn(t,r),e):tR(r=>Wn(t,r),e,i)}function Vpe(t){return!!Array.isArray(t)&&!t.some(e=>{const i=typeof e;return!(i==="string"||i==="number"||i==="function"&&t.length>1)})}function r8(t,e){if(arguments.length===2)return r8(t).call(null,e);const i=new Set,r=t.filter(o=>typeof o!="function"),n=t.filter(o=>typeof o=="function");for(const o of t)typeof o!="string"&&typeof o!="number"||i.add(o);let s=null,a=null;return(o,l)=>{if(o==null)return o;const c=typeof o,h=c==="string"||c==="number";return h&&(i.has(o)||n.some(m=>c==="string"&&m===String||c==="number"&&m===Number))||c==="object"&&n.some(m=>!eR(m,o))?o:(h&&r.length?(s||(s=r.map(m=>typeof m=="string"?`'${m}'`:`${m}`).join(", ")),ew().error("Accessor#set",`'${o}' is not a valid value for this property, only the following values are valid: ${s}`)):typeof o=="object"&&n.length?(a||(a=n.map(m=>fD(m)).join(", ")),ew().error("Accessor#set",`'${o}' is not a valid value for this property, value must be one of ${a}`)):ew().error("Accessor#set",`'${o}' is not a valid value for this property`),l&&(l.valid=!1),null)}}function Rp(t,e){if(arguments.length===2)return Rp(t).call(null,e);const i={},r=[],n=[];for(const l in t.typeMap){const c=t.typeMap[l];i[l]=Wn(c),r.push(fD(c)),n.push(l)}const s=()=>`'${r.join("', '")}'`,a=()=>`'${n.join("', '")}'`,o=typeof t.key=="string"?l=>l[t.key]:t.key;return l=>{if(t.base&&!eR(t.base,l)||l==null)return l;const c=o(l)||t.defaultKeyValue,h=i[c];if(!h)return ew().error("Accessor#set",`Invalid property value, value needs to be one of ${s()}, or a plain object that can autocast (having .type = ${a()})`),null;if(!eR(t.typeMap[c],l))return l;if(typeof t.key=="string"&&!Npe(l)){const m={};for(const g in l)g!==t.key&&(m[g]=l[g]);return h(m)}return h(l)}}let ei=class{},PT=class{};const D_t={native:t=>({type:"native",value:t}),array:t=>({type:"array",value:t}),oneOf:t=>({type:"one-of",values:t})};function CPe(t){if(!t||!("type"in t))return!1;switch(t.type){case"native":case"array":case"one-of":return!0}return!1}function Upe(t){switch(t.type){case"native":return Wn(t.value);case"array":return cE(Upe(t.value));case"one-of":return EPe(t);default:return null}}function EPe(t){let e=null;return(i,r)=>s8(i,t)?i:(e==null&&(e=n8(t)),ew().error("Accessor#set",`Invalid property value, value needs to be of type ${e}`),r&&(r.valid=!1),null)}function n8(t){switch(t.type){case"native":switch(t.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case ei:return"integer";case Date:return"date";case PT:return"null";default:return fD(t.value)}case"array":return`array of ${n8(t.value)}`;case"one-of":{const e=t.values.map(i=>n8(i));return`one of ${e.slice(0,-1)} or ${e[e.length-1]}`}}return"unknown"}function s8(t,e){if(t==null)return!0;switch(e.type){case"native":switch(e.value){case Number:case ei:return typeof t=="number";case Boolean:return typeof t=="boolean";case String:return typeof t=="string";case PT:return t===null}return t instanceof e.value;case"array":return!!Array.isArray(t)&&!t.some(i=>!s8(i,e.value));case"one-of":return e.values.some(i=>s8(t,i))}}function OT(t){let e=t.constructor.__accessorMetadata__;const i=Object.prototype.hasOwnProperty.call(t.constructor,"__accessorMetadata__");if(e){if(!i){e=Object.create(e);for(const r in e)e[r]=he(e[r]);Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0})}}else e={},Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0});return t.constructor.__accessorMetadata__}function Ak(t,e){const i=OT(t);let r=i[e];return r||(r=i[e]={}),r}function kPe(t,e){return L3(t,e,PPe)}const APe=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function PPe(t){return APe.test(t)?"replace":"merge"}function iR(t,e,i){if(t&&e)if(typeof e=="object")for(const r of Object.getOwnPropertyNames(e))iR(t,r,e[r]);else{if(e.includes(".")){const n=e.split("."),s=n.splice(-1,1)[0];return void iR(mu(t,n),s,i)}const r=t.__accessor__;r!=null&&OPe(e,r),t[e]=i}}function OPe(t,e){if(ve("esri-unknown-property-errors")&&!LPe(t,e))throw new ae("set:unknown-property",FPe(t,e))}function LPe(t,e){return e.metadata[t]!=null}function FPe(t,e){return"setting unknown property '"+t+"' on instance of "+e.host.declaredClass}function f(t={}){return(e,i)=>{if(e===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${e.name}.${i}. Accessor does not support static properties.`);const r=Object.getOwnPropertyDescriptor(e,i),n=Ak(e,i);r&&(r.get||r.set?(n.get=r.get||n.get,n.set=r.set||n.set):"value"in r&&("value"in t&&Ie.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${i}" on "${e.constructor.name}" already defined in the metadata`,t),n.value=t.value=r.value)),t.readOnly!=null&&(n.readOnly=t.readOnly);const s=t.aliasOf;if(s){const l=typeof s=="string"?s:s.source,c=typeof s=="string"?null:s.overridable===!0;let h;n.dependsOn=[l],n.get=function(){let m=mu(this,l);if(typeof m=="function"){h||(h=l.split(".").slice(0,-1).join("."));const g=mu(this,h);g&&(m=m.bind(g))}return m},n.readOnly||(n.set=c?function(m){this._override(i,m)}:function(m){iR(this,l,m)})}const a=t.type,o=t.types;if(!n.cast){let l;a?l=RPe(a):o&&(l=Array.isArray(o)?cE(Rp(o[0])):Rp(o)),t.cast=zPe(t.cast,l)}kPe(n,t),t.range&&(n.cast=xPe(n.cast,t.range))}}function jW(t,e,i){const r=Ak(t,i);r.json||(r.json={});let n=r.json;return e!==void 0&&(n.origins||(n.origins={}),n.origins[e]||(n.origins[e]={}),n=n.origins[e]),n}function RPe(t){let e=0,i=t;if(CPe(t))return Upe(t);for(;Array.isArray(i)&&i.length===1&&typeof i[0]!="string"&&typeof i[0]!="number";)i=i[0],e++;const r=i;if(Vpe(r))return e===0?r8(r):tR(r8(r),e);if(e===1)return IPe(r);if(e>1)return MPe(r,e);const n=t;return n.from?n.from:Wn(n)}function zPe(t,e){if(t||e)return t?e?(i,r)=>e(t(i,r),r):t:e}const Bpe=Symbol("Accessor-beforeDestroy");function NPe(t){if(t.json&&t.json.origins){const e=t.json.origins,i={"web-document":["web-scene","web-map"]};for(const r in i)if(e[r]){const n=e[r];i[r].forEach(s=>{e[s]=n}),delete e[r]}}}let Ic=class extends bpe{constructor(e,i,r){super(e,i,r)}};Ic.prototype.type="warning";function qpe(t){var e;return!!t&&((e=t.prototype)==null?void 0:e.declaredClass)&&t.prototype.declaredClass.indexOf("esri.core.Collection")===0}function DPe(t,e){return VW(t,"any",e==null?void 0:e.origin)}function rR(t,e){return VW(t,"read",e==null?void 0:e.origin)}function Hpe(t,e){return VW(t,"write",e==null?void 0:e.origin)}function VW(t,e,i){let r=t==null?void 0:t.json;if(r!=null&&r.origins&&i){let n;n=i==="link-chart"?r.origins[i]&&(e==="any"||e in r.origins[i])?r.origins[i]:r.origins["web-map"]:r.origins[i],n&&(e==="any"||e in n)&&(r=n)}return r}const a8=()=>Ie.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function Jte(t,e,i){var r,n;t&&(!i&&!e.read||(r=e.read)!=null&&r.reader||((n=e.read)==null?void 0:n.enabled)===!1||UPe(t)&&qn("read.reader",LT(t),e))}function LT(t){var i,r;const e=t.ndimArray??0;if(e>1)return VPe(t);if(e===1)return Xte(t);if("type"in t&&Wpe(t.type)){const n=(r=(i=t.type.prototype)==null?void 0:i.itemType)==null?void 0:r.Type,s=Xte(typeof n=="function"?{type:n}:{types:n});return(a,o,l)=>{const c=s(a,o,l);return c&&new t.type(c)}}return UW(t)}function UW(t){return"type"in t?jPe(t.type):BPe(t.types)}function jPe(t){return t.prototype.read?(e,i,r)=>{if(e==null)return e;const n=typeof e;if(n!=="object")return void a8().error(`Expected JSON value of type 'object' to deserialize type '${t.prototype.declaredClass}', but got '${n}'`);const s=new t;return s.read(e,r),s}:t.fromJSON}function Gpe(t,e,i,r){return r!==0&&Array.isArray(e)?e.map(n=>Gpe(t,n,i,r-1)):t(e,void 0,i)}function VPe(t){const e=UW(t),i=Gpe.bind(null,e),r=t.ndimArray??0;return(n,s,a)=>{if(n==null)return n;n=i(n,a,r);let o=r,l=n;for(;o>0&&Array.isArray(l);)o--,l=l[0];if(l!==void 0)for(let c=0;c<o;c++)n=[n];return n}}function Xte(t){const e=UW(t);return(i,r,n)=>{if(i==null)return i;if(Array.isArray(i)){const a=[];for(const o of i){const l=e(o,void 0,n);l!==void 0&&a.push(l)}return a}const s=e(i,void 0,n);return s!==void 0?[s]:void 0}}function Wpe(t){if(!qpe(t))return!1;const e=t.prototype.itemType;return!(!e||!e.Type)&&(typeof e.Type=="function"?BW(e.Type):Zpe(e.Type))}function UPe(t){return"types"in t?Zpe(t.types):BW(t.type)}function BW(t){return!Array.isArray(t)&&!!t&&t.prototype&&("read"in t.prototype||"fromJSON"in t||Wpe(t))}function Zpe(t){for(const e in t.typeMap)if(!BW(t.typeMap[e]))return!1;return!0}function BPe(t){let e=null;const i=t.errorContext??"type",r=t.validate;return(n,s,a)=>{if(n==null)return n;const o=typeof n;if(o!=="object")return void a8().error(`Expected JSON value of type 'object' to deserialize, but got '${o}'`);e||(e=HPe(t));const l=t.key;if(typeof l!="string")return;const c=n[qPe(l,e,a)],h=c?e[c]:t.defaultKeyValue?t.typeMap[t.defaultKeyValue]:void 0;if(!h){const g=`Type '${c||"unknown"}' is not supported`;return a!=null&&a.messages&&n&&a.messages.push(new Ic(`${i}:unsupported`,g,{definition:n,context:a})),void a8().error(g)}const m=new h;return m.read(n,a),r?r(m):m}}function qPe(t,e,i){var o;const r=Object.values(e)[0],n=OT(r.prototype)[t],s=rR(n,i),a=(o=s==null?void 0:s.read)==null?void 0:o.source;return a&&typeof a=="string"?a:t}function HPe(t){var i,r;const e={};for(const n in t.typeMap){const s=t.typeMap[n],a=OT(s.prototype);if(typeof t.key=="function")continue;const o=a[t.key];if(!o)continue;if((i=o.json)!=null&&i.type&&Array.isArray(o.json.type)&&o.json.type.length===1&&typeof o.json.type[0]=="string"){e[o.json.type[0]]=s;continue}const l=(r=o.json)==null?void 0:r.write;if(!(l!=null&&l.writer)){e[n]=s;continue}const c=l.target,h=typeof c=="string"?c:t.key,m={};l.writer(n,m,h),m[h]&&(e[m[h]]=s)}return e}function GPe(t){if(t.json||(t.json={}),Kte(t.json),eie(t.json),Qte(t.json),t.json.origins)for(const e in t.json.origins)Kte(t.json.origins[e]),eie(t.json.origins[e]),Qte(t.json.origins[e]);return!0}function Qte(t){t.name&&(t.read&&typeof t.read=="object"?t.read.source===void 0&&(t.read.source=t.name):t.read={source:t.name},t.write&&typeof t.write=="object"?t.write.target===void 0&&(t.write.target=t.name):t.write={target:t.name})}function Kte(t){typeof t.read=="boolean"?t.read={enabled:t.read}:typeof t.read=="function"?t.read={enabled:!0,reader:t.read}:t.read&&typeof t.read=="object"&&t.read.enabled===void 0&&(t.read.enabled=!0)}function eie(t){typeof t.write=="boolean"?t.write={enabled:t.write}:typeof t.write=="function"?t.write={enabled:!0,writer:t.write}:t.write&&typeof t.write=="object"&&t.write.enabled===void 0&&(t.write.enabled=!0)}function tie(t,e){if(!e.write||e.write.writer||e.write.enabled===!1&&!e.write.overridePolicy)return;const i=(t==null?void 0:t.ndimArray)??0;t&&(i===1||"type"in t&&qpe(t.type))?e.write.writer=YPe:i>1?e.write.writer=JPe(i):e.types?Array.isArray(e.types)?e.write.writer=ZPe(e.types[0]):e.write.writer=WPe(e.types):e.write.writer=uE}function WPe(t){return(e,i,r,n)=>e?Ype(e,t,n)?uE(e,i,r,n):void 0:uE(e,i,r,n)}function Ype(t,e,i){for(const r in e.typeMap)if(t instanceof e.typeMap[r])return!0;if(i!=null&&i.messages){const r=e.errorContext??"type",n=`Values of type '${(typeof e.key!="function"?t[e.key]:t.declaredClass)??"Unknown"}' cannot be written`;i&&i.messages&&t&&i.messages.push(new ae(`${r}:unsupported`,n,{definition:t,context:i})),Ie.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer").error(n)}return!1}function ZPe(t){return(e,i,r,n)=>!e||!Array.isArray(e)?uE(e,i,r,n):uE(e.filter(s=>Ype(s,t,n)),i,r,n)}function uE(t,e,i,r){qn(i,nR(t,r),e)}function nR(t,e){return t&&typeof t.write=="function"?t.write({},e):t&&typeof t.toJSON=="function"?t.toJSON():typeof t=="number"?sR(t):t}function sR(t){return t===-1/0?-Number.MAX_VALUE:t===1/0?Number.MAX_VALUE:isNaN(t)?null:t}function YPe(t,e,i,r){let n;t===null?n=null:t&&typeof t.map=="function"?(n=t.map(s=>nR(s,r)),typeof n.toArray=="function"&&(n=n.toArray())):n=[nR(t,r)],qn(i,n,e)}function Jpe(t,e,i){return i!==0&&Array.isArray(t)?t.map(r=>Jpe(r,e,i-1)):nR(t,e)}function JPe(t){return(e,i,r,n)=>{let s;if(e===null)s=null;else{s=Jpe(e,n,t);let a=t,o=s;for(;a>0&&Array.isArray(o);)a--,o=o[0];if(o!==void 0)for(let l=0;l<a;l++)s=[s]}qn(r,s,i)}}function XPe(t){var i;const e=QPe(t);if(t.json.origins)for(const r in t.json.origins){const n=t.json.origins[r],s=n.types?KPe(n):e;Jte(s,n,!1),n.types&&!n.write&&((i=t.json.write)!=null&&i.enabled)&&(n.write={...t.json.write}),tie(s,n)}Jte(e,t.json,!0),tie(e,t.json)}function QPe(t){return t.json.types?o8(t.json):t.type?Xpe(t):o8(t)}function KPe(t){return t.type?Xpe(t):o8(t)}function Xpe(t){if(!t.type)return;let e=0,i=t.type;for(;Array.isArray(i)&&!Vpe(i);)i=i[0],e++;return{type:i,ndimArray:e}}function o8(t){if(!t.types)return;let e=0,i=t.types;for(;Array.isArray(i);)i=i[0],e++;return{types:i,ndimArray:e}}function eOe(t){GPe(t)&&(NPe(t),XPe(t))}const PV=new Set,OV=new Set;function V(t){return e=>{t??(t="esri.core.Accessor"),e.prototype.declaredClass=t,iOe(e);const i=[],r=[];let n=e.prototype;for(;n;)n.hasOwnProperty("initialize")&&!PV.has(n.initialize)&&(PV.add(n.initialize),i.push(n.initialize)),n.hasOwnProperty("destroy")&&!OV.has(n.destroy)&&(OV.add(n.destroy),r.push(n.destroy)),n=Object.getPrototypeOf(n);PV.clear(),OV.clear();const s=class extends e{constructor(...o){if(super(...o),this.constructor===s&&typeof this.postscript=="function"){if(i.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let l=i.length-1;l>=0;l--)i[l].call(this)}}),r.length){let l=!1;const c=this[Bpe];Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!l){this.__accessor__.lifecycle=mc.DESTROYING,l=!0,c.call(this);for(let h=0;h<r.length;h++)r[h].call(this)}}})}Object.defineProperty(this,Symbol.dispose,{enumerable:!1,configurable:!0,value(){this.destroy()}}),this.postscript()}}};s.__accessorMetadata__=OT(e.prototype),s.prototype.declaredClass=t;const a=(t||"AccessorSubclass").split(".").slice(-1)[0];return Object.defineProperty(s,"name",{value:a,configurable:!0}),s}}function tOe(t,e){return e.get==null?function(){const i=this.__accessor__,r=i.propertiesByName.get(t);if(r===void 0)return;i.mutable&&xt(r);const n=i.store;return n.has(t)?n.get(t):r.metadata.value}:function(){const i=this.__accessor__,r=i.propertiesByName.get(t);if(r!==void 0)return r.getComputed(i)}}function iOe(t){const e=t.prototype,i=OT(e),r={};for(const n of Object.getOwnPropertyNames(i)){const s=i[n];eOe(s),r[n]={enumerable:!0,configurable:!0,get:tOe(n,s),set(a){const o=this.__accessor__;if(o!==void 0){if(o.mutable)return o.initialized&&s.readOnly?iie("read-only",n):o.lifecycle===mc.CONSTRUCTED&&s.constructOnly?iie("construct-only",n):void o.set(n,a)}else Object.defineProperty(this,n,{enumerable:!0,configurable:!0,writable:!0,value:a})}}}Object.defineProperties(t.prototype,r)}const iie=(t,e)=>{Ie.getLogger("esri.core.Accessor").error(`cannot assign to ${t} property '${e}'`)},rOe="modulepreload",nOe=function(t){return"/us-presidential-elections/"+t},rie={},de=function(e,i,r){let n=Promise.resolve();if(i&&i.length>0){let a=function(c){return Promise.all(c.map(h=>Promise.resolve(h).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));n=a(i.map(c=>{if(c=nOe(c),c in rie)return;rie[c]=!0;const h=c.endsWith(".css"),m=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${m}`))return;const g=document.createElement("link");if(g.rel=h?"stylesheet":rOe,h||(g.as="script"),g.crossOrigin="",g.href=c,l&&g.setAttribute("nonce",l),document.head.appendChild(g),h)return new Promise((v,b)=>{g.addEventListener("load",v),g.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return n.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})},nie=new WeakMap;function sOe(t,e,i=!1){const r=` DEPRECATED - ${e}`;if(!i)return void t.warn(r);let n=nie.get(t);n||(n=new Set,nie.set(t,n)),n.has(e)||(n.add(e),t.warn(r))}const aR="https://www.esriurl.com/";function aOe(t,e,i,r={}){ve("esri-deprecation-warnings")&&Mv(t,`This widget is deprecated. Use the ${e} component instead.`,{see:[`${e} component reference: ${aR}${i}/`,`Esri's move to web components: ${aR}components-transition-plan/`],replacement:`<${i}></${i}>`,warnOnce:!0,...r})}function oOe(t,e,i,r={}){ve("esri-deprecation-warnings")&&Mv(t,`This view model is deprecated. Use the ${e} component directly instead.`,{see:[`${e} component reference: ${aR}${i}/`,`Esri's move to web components: ${aR}components-transition-plan/`],replacement:`<${i}></${i}>`,warnOnce:!0,...r})}function V_t(t,e,i={}){ve("esri-deprecation-warnings")&&Mv(t,`Module: ${e}`,i)}function Qpe(t,e,i={}){if(ve("esri-deprecation-warnings")){const{moduleName:r}=i;Mv(t,`Function: ${(r?r+"::":"")+e+"()"}`,i)}}function l8(t,e,i={}){if(ve("esri-deprecation-warnings")){const{moduleName:r}=i;Mv(t,`Property: ${(r?r+"::":"")+e}`,i)}}function lOe(t,e,i={}){ve("esri-deprecation-warnings")&&Mv(t,`Multiple argument constructor: ${e}`,{warnOnce:!0,replacement:`new ${e}({ <your properties here> })`,...i})}function Mv(t,e,i={}){if(ve("esri-deprecation-warnings")){const{replacement:r,version:n,see:s,warnOnce:a}=i;let o=e;if(r&&(o+=`
	 Replacement: ${r}`),n&&(o+=`
	 Version: ${n}`),s)if(Array.isArray(s)){o+=`
	 See for more details:`;for(const l of s)o+=`
		${l}`}else o+=`
	 See ${s} for more details.`;sOe(t,o,a)}}function U_t(t){const e=[];return function*(){yield*e;let i,r=e.length;for(;!(i=t.next()).done;)for(e.push(i.value),yield i.value;++r<e.length;)yield e[r]}}function cOe(t,e){for(const i of t)if(i!=null&&e(i))return i}function oR(t){return t!=null&&typeof t[Symbol.iterator]=="function"}let FT=class{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let e=0;return this._groups.forEach(i=>{e+=i.length}),e}add(e,i){if(oR(e)){const r=this._getOrCreateGroup(i);for(const n of e)aie(n)&&r.push(n)}else aie(e)&&this._getOrCreateGroup(i).push(e);return this}forEach(e,i){if(typeof e=="function")this._groups.forEach(r=>r.forEach(e));else{const r=this._getGroup(e);r&&i&&r.forEach(i)}}has(e){return this._groups.has(RP(e))}remove(e){if(typeof e!="string"&&oR(e)){for(const i of e)this.remove(i);return this}return this.has(e)?(sie(this._getGroup(e)),this._groups.delete(RP(e)),this):this}removeAll(){return this._groups.forEach(sie),this._groups.clear(),this}removeReference(e){return this._groups.delete(e),this}_getOrCreateGroup(e){if(this.has(e))return this._getGroup(e);const i=[];return this._groups.set(RP(e),i),i}_getGroup(e){return this._groups.get(RP(e))}};function RP(t){return t||"_default_"}function sie(t){for(const e of t)e instanceof FT?e.removeAll():e.remove()}function aie(t){return t!=null&&(!!t.remove||t instanceof FT)}let oie=class extends fpe{constructor(e,i){super(),this.propertyName=e,this.metadata=i,this.trackingTarget=new hD(this),this.flags=0,this.flags=en.Dirty|(i.nonNullable?en.NonNullable:0)|(i.hasOwnProperty("value")?en.HasDefaultValue:0)|(i.get===void 0?en.DepTrackingInitialized:0)|(i.dependsOn===void 0?en.AutoTracked:0)}destroy(){this.flags&en.Dirty&&this.onCommitted(),super.destroy(),this.trackingTarget.destroy()}getComputed(e){e.mutable&&xt(this);const i=e.store,r=this.propertyName,n=this.flags,s=i.get(r);if(n&en.Computing||~n&en.Dirty&&i.has(r))return s;this.flags|=en.Computing;const a=e.host;let o;n&en.AutoTracked?o=Fp(this.trackingTarget,this.metadata.get,a):(ppe(a,this),o=this.metadata.get.call(a)),this.flags|=en.DepTrackingInitialized,i.set(r,o,1);const l=i.get(r);return l===s?this.flags&=-2:gAe(this.commit,this),this.flags&=-5,l}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}commit(){this.flags&=-2,this.onCommitted()}onInvalidated(){~this.flags&en.Overridden&&(this.flags|=en.Dirty);const e=this._observers;if(e&&e.length>0)for(const i of e)i.onInvalidated()}onCommitted(){const e=this._observers;if(e&&e.length>0){const i=e.slice();for(const r of i)r.onCommitted()}}};const c8=8;function Om(t){switch(t){case"defaults":return 0;case"service":return 2;case"portal-item":return 3;case"web-scene":return 4;case"web-map":return 5;case"link-chart":return 6;case"user":return 7;default:return null}}function dE(t){switch(t){case 0:return"defaults";case 2:return"service";case 3:return"portal-item";case 4:return"web-scene";case 5:return"web-map";case 6:return"link-chart";case 7:return"user"}}function uOe(t){return dE(t)}let dOe=class Kpe{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){const i=new Kpe;return this._values.forEach((r,n)=>{e&&e.has(n)||i.set(n,he(r))}),i}get(e){return this._values.get(e)}originOf(){return 7}keys(){return[...this._values.keys()]}set(e,i){this._values.set(e,i)}delete(e){this._values.delete(e)}has(e){return this._values.has(e)}isAtOrigin(e,i){return this.has(e)}isBelowOrigin(e,i){return!this.has(e)}forEach(e){this._values.forEach(e)}};function v1(t,e,i){return t!==void 0}function lie(t,e,i,r){return t!==void 0&&(!(i==null&&t.flags&en.NonNullable)||(r.lifecycle,!1))}let hOe=class{constructor(e){this.host=e,this.propertiesByName=new Map,this.ctorArgs=null,this.lifecycle=mc.INITIALIZING,this.store=new dOe,this.mutable=!0,this._origin=7;const i=this.host.constructor.__accessorMetadata__;for(const r in i){const n=new oie(r,i[r]);this.propertiesByName.set(r,n)}this.metadata=i}initialize(){this.lifecycle=mc.CONSTRUCTING}constructed(){this.lifecycle=mc.CONSTRUCTED}destroy(){this.lifecycle=mc.DESTROYED,this.propertiesByName.forEach(e=>e.destroy())}get initialized(){return this.lifecycle!==mc.INITIALIZING}get(e){const i=this.propertiesByName.get(e);if(!v1(i))return;if(i.metadata.get)return i.getComputed(this);this.mutable&&xt(i);const r=this.store;return r.has(e)?r.get(e):i.metadata.value}originOf(e){const i=this.store.originOf(e);if(i===void 0){const r=this.propertiesByName.get(e);if(r!==void 0&&r.flags&en.HasDefaultValue)return"defaults"}return dE(i)}has(e){return this.propertiesByName.has(e)&&this.store.has(e)}keys(){return[...this.propertiesByName.keys()]}internalGet(e){const i=this.propertiesByName.get(e);if(v1(i))return this.store.has(e)?this.store.get(e):i.metadata.value}internalSet(e,i){const r=this.propertiesByName.get(e);v1(r)&&this._internalSet(r,i)}getDependsInfo(e,i,r){const n=this.propertiesByName.get(i);if(!v1(n))return"";const s=new hD,a=Fp(s,()=>{var c;return(c=n.metadata.get)==null?void 0:c.call(e)});let o=`${r}${e.declaredClass.split(".").pop()}.${i}: ${a}
`;const l=s.accessed??new Set;if(l.size===0)return o;r+="  ";for(const c of l)c instanceof oie&&(o+=`${r}${c.propertyName}: undefined
`);return o}setAtOrigin(e,i,r){const n=this.propertiesByName.get(e);if(v1(n))return this._setAtOrigin(n,i,r)}isOverridden(e){const i=this.propertiesByName.get(e);return i!==void 0&&!!(i.flags&en.Overridden)}clearOrigin(e,i){const r=this.store,n=this.propertiesByName.get(e);if(!v1(n))return;const s=r.isAtOrigin(e,i)&&!(n.flags&en.Overridden);r.delete(e,i),s&&n.notifyChange()}clearOverride(e){const i=this.propertiesByName.get(e);i&&i.flags&en.Overridden&&(i.flags&=-3,i.notifyChange())}override(e,i){const r=this.propertiesByName.get(e);if(!lie(r,e,i,this))return;const n=r.metadata.cast;if(n){const s=this._cast(n,i),{valid:a,value:o}=s;if(LV.release(s),!a)return;i=o}r.flags|=en.Overridden,this._internalSet(r,i)}set(e,i){const r=this.propertiesByName.get(e);if(!lie(r,e,i,this))return;const n=r.metadata.cast;if(n){const a=this._cast(n,i),{valid:o,value:l}=a;if(LV.release(a),!o)return;i=l}const s=r.metadata.set;s?s.call(this.host,i):this._internalSet(r,i)}setDefaultOrigin(e){this._origin=Om(e)}getDefaultOrigin(){return dE(this._origin)}notifyChange(e){const i=this.propertiesByName.get(e);i!==void 0&&i.notifyChange()}invalidate(e){const i=this.propertiesByName.get(e);i!==void 0&&i.invalidate()}commit(e){const i=this.propertiesByName.get(e);i!==void 0&&i.commit()}_internalSet(e,i){const r=this.lifecycle!==mc.INITIALIZING?this._origin:0;this._setAtOrigin(e,i,r)}_setAtOrigin(e,i,r){const n=this.store,s=e.propertyName;if(n.isAtOrigin(s,r)&&EW(i,n.get(s))&&~e.flags&en.Overridden)return;const a=n.isBelowOrigin(s,r)||n.isAtOrigin(s,r);a&&e.invalidate(),n.set(s,i,r),a&&e.commit(),hpe(this.host,e)}_cast(e,i){const r=LV.acquire();return r.valid=!0,r.value=i,e&&(r.value=e.call(this.host,i,r)),r}},pOe=class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}};const LV=new Vv(()=>new pOe);let fOe;function mOe(){return fOe}var cie,uie;function gOe(t){var e;if(t==null)return{value:t};if(Array.isArray(t))return{type:[t[0]],value:null};switch(typeof t){case"object":return(e=t.constructor)!=null&&e.__accessorMetadata__||t instanceof Date?{type:t.constructor,value:t}:t;case"boolean":return{type:Boolean,value:t};case"string":return{type:String,value:t};case"number":return{type:Number,value:t};case"function":return{type:t,value:null};default:return}}const oh=Symbol("Accessor-Handles"),FV=Symbol("Accessor-Initialized");var Sv;let et=(Sv=class{static createSubclass(e={}){if(Array.isArray(e))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:i,declaredClass:r,constructor:n}=e;delete e.declaredClass,delete e.properties,delete e.constructor;const s=this;class a extends s{constructor(...l){super(...l),this.inherited=null,n&&n.apply(this,l)}}OT(a.prototype);for(const o in e){const l=e[o];a.prototype[o]=typeof l=="function"?function(...c){const h=this.inherited;let m;this.inherited=function(...g){if(s.prototype[o])return s.prototype[o].apply(this,g)};try{m=l.apply(this,c)}catch(g){throw this.inherited=h,g}return this.inherited=h,m}:e[o]}for(const o in i){const l=gOe(i[o]);f(l)(a.prototype,o)}return V(r)(a)}static freeze(e){return e instanceof Sv?e.__accessor__.mutable=!1:Object.freeze(e),e}static isFrozen(e){return e instanceof Sv?!e.__accessor__.mutable:Object.isFrozen(e)}constructor(...e){var r;if(this[cie]=null,this[uie]=!1,this.constructor===Sv)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");const i=new hOe(this);Object.defineProperty(this,"__accessor__",{enumerable:!1,value:i}),e.length>0&&(i.ctorArgs=((r=this.normalizeCtorArgs)==null?void 0:r.apply(this,e))??e[0])}postscript(){const e=this.__accessor__,i=e.ctorArgs;e.initialize(),i&&(this.set(i),e.ctorArgs=null),e.constructed(),this.initialize(),this[FV]=!0}initialize(){}[Bpe](){this[oh]=Or(this[oh])}destroy(){var e;this.destroyed||(nPe(this),this.__accessor__.destroy(),(e=mOe())==null||e.onInstanceDestroy(this))}[Symbol.dispose](){this.destroy()}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[FV]}get destroyed(){var e;return((e=this.__accessor__)==null?void 0:e.lifecycle)===mc.DESTROYED||!1}get destroying(){var e;return((e=this.__accessor__)==null?void 0:e.lifecycle)===mc.DESTROYING||!1}commitProperty(e){mu(this,e)}hasOwnProperty(e){return this.__accessor__?this.__accessor__.has(e):Object.prototype.hasOwnProperty.call(this,e)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(e,i){return iR(this,e,i),this}watch(e,i,r){return Qpe(Ie.getLogger(this),"`watch` is deprecated in favor of reactiveUtils.watch",{replacement:"reactiveUtils.watch",version:"4.32",see:"https://arcg.is/1vaqf42#watch",warnOnce:!0}),uPe(this,e,i,r)}addHandles(e,i){if(this.destroyed){const r=Array.isArray(e)?e:[e];for(const n of r)n.remove();return}(this[oh]??(this[oh]=new FT)).add(e,i)}removeHandles(e){var i;(i=this[oh])==null||i.remove(e)}removeAllHandles(){var e;(e=this[oh])==null||e.removeAll()}removeHandlesReference(e){var i;(i=this[oh])==null||i.removeReference(e)}hasHandles(e){var i;return((i=this[oh])==null?void 0:i.has(e))===!0}_override(e,i){i===void 0?this.__accessor__.clearOverride(e):this.__accessor__.override(e,i)}_clearOverride(e){return this.__accessor__.clearOverride(e)}_overrideIfSome(e,i){i==null?this.__accessor__.clearOverride(e):this.__accessor__.override(e,i)}_isOverridden(e){return this.__accessor__.isOverridden(e)}notifyChange(e){this.__accessor__.notifyChange(e)}_get(e){return this.__accessor__.internalGet(e)}_set(e,i){return this.__accessor__.internalSet(e,i),this}},cie=oh,uie=FV,Sv);const yOe=Symbol("ClonableMixin"),bt=t=>{var n;var e;const i=t;let r=(n=class extends i{constructor(){super(...arguments),this[e]=!0}clone(s){var g;const a=Go(this);Ik(a,"unable to clone instance of non-accessor class");const o=a.metadata,l=a.store,c={},h=new Map;for(const v in o){const b=o[v],x=l==null?void 0:l.originOf(v),$=b.clonable;if(b.readOnly||$===!1||x!==7&&x!==0&&x!==5&&x!==4)continue;const M=this[v];let k=null;if(typeof $=="function")k=$(M,s);else if($==="reference")k=M;else if(k=ZB(M,s),M!=null&&k==null)continue;x===0?h.set(v,k):c[v]=k}const m=new(Object.getPrototypeOf(this)).constructor(c);if(h.size){const v=(g=Go(m))==null?void 0:g.store;if(v)for(const[b,x]of h)v.set(b,x,0)}return m}},e=yOe,n);return r=d([V("esri.core.Clonable")],r),r},qW=bt(et);let qb=class extends qW{constructor(e){super(e),this.row=0,this.column=0,this.rows=1,this.columns=1}equals(e){return e!=null&&this.row===e.row&&this.rows===e.rows&&this.column===e.column&&this.columns===e.columns}};d([f({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],qb.prototype,"row",void 0),d([f({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],qb.prototype,"column",void 0),d([f({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],qb.prototype,"rows",void 0),d([f({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],qb.prototype,"columns",void 0),qb=d([V("esri.CameraLayout")],qb);const efe=qb,die=new Float32Array(1);function Z_t(t){--t;for(let e=1;e<32;e<<=1)t|=t>>e;return t+1}function ua(t,e,i){return Math.min(Math.max(t,e),i)}function Y_t(t){return!(t&t-1)}function vOe(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,++t}function YM(t,e,i){return t+(e-t)*i}function J_t(t,e,i,r,n){return YM(r,n,(t-e)/(i-e))}function RT(t){return t*Math.PI/180}function tfe(t){return 180*t/Math.PI}function X_t(t,e=1e-6){return(t<0?-1:1)/Math.max(Math.abs(t),e)}function Q_t(t){return Math.acos(ua(t,-1,1))}function bOe(t){return Math.asin(ua(t,-1,1))}function xc(t,e,i=1e-6){return t===e?!0:!Number.isFinite(t)||!Number.isFinite(e)?!1:(t>e?t-e:e-t)<=i}function ife(t,e,i=1e-6){return!xc(t,e,i)&&t>e}function u8(t,e,i=1e-6){return!xc(t,e,i)&&t<e}function wOe(t,e,i=1e-6){return xc(t,e,i)||t>e}const lR=new DataView(new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT));function d8(t){return lR.setFloat64(0,t),lR.getBigInt64(0)}function _Oe(t){return lR.setBigInt64(0,t),lR.getFloat64(0)}const D3=1000000n,xOe=rfe(1);function rfe(t){const e=d8(t=Math.abs(t)),i=_Oe(e<=D3?D3:e-D3);return Math.abs(t-i)}function K_t(t,e,i=xOe){if(t===e)return!0;if(!Number.isFinite(t)||!Number.isFinite(e))return!1;if(i!=null&&rfe(Math.min(Math.abs(t),Math.abs(e)))<i)return Math.abs(t-e)<=i;const r=d8(t),n=d8(e);return r<0!=n<0?!1:!((r<n?n-r:r-n)>D3)}function nfe(t,e,i=1e-6){if(t===e)return!0;if(!Number.isFinite(t)||!Number.isFinite(e))return!1;const r=Math.abs(t-e),n=Math.abs(t),s=Math.abs(e);if(t===0||e===0||n<1e-12&&s<1e-12){if(r>.01*i)return!1}else if(r/(n+s)>i)return!1;return!0}function e1t(t){return sfe(Math.max(-hie,Math.min(t,hie)))}function sfe(t){return die[0]=t,die[0]}function t1t(t){const e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[3]*t[3]+t[4]*t[4]+t[5]*t[5],r=t[6]*t[6]+t[7]*t[7]+t[8]*t[8];return!(xc(e,1)&&xc(i,1)&&xc(r,1))}function i1t(t,e){return(t%e+e)%e}const hie=sfe(34028234663852886e22);function r1t(t,e,i){if(i===void 0||+i==0)return Math[t](e);if(e=+e,i=+i,isNaN(e)||typeof i!="number"||i%1!=0)return NaN;let r=e.toString().split("e");return r=(e=Math[t](+(r[0]+"e"+(r[1]?+r[1]-i:-i)))).toString().split("e"),+(r[0]+"e"+(r[1]?+r[1]+i:i))}let mD=class{constructor(e,i){this.min=e,this.max=i,this.range=i-e}normalize(e,i=0,r=!1){return pie(this.range,this.min,this.max,e,i,r)}clamp(e,i=0){return ua(e-i,this.min,this.max)+i}monotonic(e,i,r){return e<i?i:i+h8(this.range,e-i,r)}minimalMonotonic(e,i,r){return pie(this.range,e,e+this.range,i,r)}center(e,i,r){return i=this.monotonic(e,i,r),this.normalize((e+i)/2,r)}diff(e,i,r){return this.monotonic(e,i,r)-e}shortestSignedDiff(e,i){e=this.normalize(e);const r=(i=this.normalize(i))-e,n=i<e?this.minimalMonotonic(e,i)-e:i-this.minimalMonotonic(i,e);return Math.abs(r)<Math.abs(n)?r:n}contains(e,i,r){return i=this.minimalMonotonic(e,i),(r=this.minimalMonotonic(e,r))>e&&r<i}};function pie(t,e,i,r,n=0,s=!1){return(r-=n)<e?r+=h8(t,e-r):r>i&&(r-=h8(t,r-i)),s&&r===i&&(r=e),r+n}function h8(t,e,i=0){return Math.ceil((e-i)/t)*t+i}const s1t=new mD(0,2*Math.PI),a1t=new mD(-Math.PI,Math.PI),afe=new mD(0,360);let $Oe=class ofe{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){const i=new ofe;return this._values.forEach((r,n)=>{e&&e.has(n)||i.set(n,he(r.value),r.origin)}),i}get(e,i){i=this._normalizeOrigin(i);const r=this._values.get(e);return i==null||(r==null?void 0:r.origin)===i?r==null?void 0:r.value:void 0}originOf(e){var i;return((i=this._values.get(e))==null?void 0:i.origin)??7}keys(e){e=this._normalizeOrigin(e);const i=[...this._values.keys()];return e==null?i:i.filter(r=>{var n;return((n=this._values.get(r))==null?void 0:n.origin)===e})}set(e,i,r){if((r=this._normalizeOrigin(r))===0){const n=this._values.get(e);if((n==null?void 0:n.origin)!=null&&n.origin>r)return}this._values.set(e,new SOe(i,r))}delete(e,i){var r;(i=this._normalizeOrigin(i))!=null&&((r=this._values.get(e))==null?void 0:r.origin)!==i||this._values.delete(e)}has(e,i){var r;return(i=this._normalizeOrigin(i))!=null?((r=this._values.get(e))==null?void 0:r.origin)===i:this._values.has(e)}isAtOrigin(e,i){return i=this._normalizeOrigin(i),this.has(e,i)&&this.originOf(e)===i}isBelowOrigin(e,i){return i=this._normalizeOrigin(i),!this.has(e)||this.originOf(e)<i}forEach(e){this._values.forEach(({value:i},r)=>e(i,r))}_normalizeOrigin(e){if(e!=null)return e===0?e:7}},SOe=class{constructor(e,i){this.value=e,this.origin=i}};function lfe(t,e,i){e.keys().forEach(n=>{i.set(n,e.get(n),0)});const r=t.metadata;Object.keys(r).forEach(n=>{t.internalGet(n)&&i.set(n,t.internalGet(n),0)})}function TOe(t,e,i){if(!(t!=null&&t.read)||t.read.enabled===!1||!t.read.source)return!1;const r=t.read.source;if(typeof r=="string"){if(r===e||r.includes(".")&&r.startsWith(e)&&Wte(r,i))return!0}else for(const n of r)if(n===e||n.includes(".")&&n.startsWith(e)&&Wte(n,i))return!0;return!1}function IOe(t){return t&&(!t.read||t.read.enabled!==!1&&!t.read.source)}function MOe(t,e,i,r,n){let s=rR(e[i],n);IOe(s)&&(t[i]=!0);for(const a of Object.getOwnPropertyNames(e))s=rR(e[a],n),TOe(s,i,r)&&(t[a]=!0)}function COe(t,e,i,r){const n=i.metadata,s=DPe(n[e],r),a=s==null?void 0:s.default;if(a===void 0)return;const o=typeof a=="function"?a.call(t,e,r):a;o!==void 0&&i.set(e,o)}const cfe={origin:"service"};function ufe(t,e,i=cfe){if(!e||typeof e!="object")return;const r=Go(t),n=r.metadata,s={};for(const a of Object.getOwnPropertyNames(e))MOe(s,n,a,e,i);r.setDefaultOrigin(i.origin);for(const a of Object.getOwnPropertyNames(s)){const o=rR(n[a],i).read,l=o==null?void 0:o.source;let c;c=l&&typeof l=="string"?Ek(e,l):e[a],o!=null&&o.reader&&(c=o.reader.call(t,c,e,i)),c!==void 0&&r.set(a,c)}if(!i||!i.ignoreDefaults){r.setDefaultOrigin("defaults");for(const a of Object.getOwnPropertyNames(n))s[a]||COe(t,a,r,i)}r.setDefaultOrigin("user")}function dfe(t,e,i,r=cfe){var s;const n={...r,messages:[]};i(n),(s=n.messages)==null||s.forEach(a=>{a.type!=="warning"||t.loaded?r!=null&&r.messages&&r.messages.push(a):t.loadWarnings.push(a)})}function EOe(t,e,i,r,n){var a,o;const s={};return(o=(a=e.write)==null?void 0:a.writer)==null||o.call(t,r,s,i,n),s}function hfe(t,e,i,r,n,s){if(!(r!=null&&r.write))return!1;const a=mu(t,i);if(!n&&r.write.overridePolicy){const o=r.write.overridePolicy.call(t,a,i,s??void 0);o!==void 0&&(n=o)}if(n||(n=r.write),!n||n.enabled===!1||n.layerContainerTypes&&(s!=null&&s.layerContainerType)&&!n.layerContainerTypes.includes(s.layerContainerType))return!1;if((a===null&&!n.allowNull&&!n.writerEnsuresNonNull||a===void 0)&&n.isRequired){const o=new ae("web-document-write:property-required",`Missing value for required property '${i}' on '${t.declaredClass}'`,{propertyName:i,target:t});return o&&(s!=null&&s.messages)?s.messages.push(o):o&&!s&&Ie.getLogger("esri.core.accessorSupport.write").error(o.name,o.message),!1}return!(a===void 0||a===null&&!n.allowNull&&!n.writerEnsuresNonNull||!n.alwaysWriteDefaults&&(!e.store.multipleOriginsSupported||e.store.originOf(i)===0)&&kOe(t,i,s,r,a)||!n.ignoreOrigin&&(s!=null&&s.origin)&&e.store.multipleOriginsSupported&&e.store.originOf(i)<Om(s.origin))}function kOe(t,e,i,r,n){const s=r.default;if(s===void 0)return!1;if(r.defaultEquals!=null)return r.defaultEquals(n);if(typeof s=="function"){if(Array.isArray(n)){const a=s.call(t,e,i??void 0);return lD(a,n)}return!1}return s===n}function AOe(t,e,i,r){const n=Go(t),s=n.metadata,a=Hpe(s[e],r);return!!a&&hfe(t,n,e,a,i,r)}function pfe(t,e,i){var s,a;if(t&&typeof t.toJSON=="function"&&(!t.toJSON.isDefaultToJSON||!t.write))return L3(e,t.toJSON(i));const r=Go(t),n=r.metadata;for(const o in n){const l=Hpe(n[o],i);if(!hfe(t,r,o,l,void 0,i))continue;const c=mu(t,o),h=EOe(t,l,l.write&&typeof l.write.target=="string"?l.write.target:o,c,i);Object.keys(h).length>0&&(e=L3(e,h),(a=(s=i==null?void 0:i.resources)==null?void 0:s.pendingOperations)!=null&&a.length&&i.resources.pendingOperations.push(Promise.all(i.resources.pendingOperations).then(()=>L3(e,h,()=>"replace-arrays"))),i!=null&&i.writtenProperties&&i.writtenProperties.push({target:t,propName:o,oldOrigin:uOe(r.store.originOf(o)),newOrigin:i.origin}))}return e}const ig=t=>{const e=t;let i=class extends e{constructor(...r){super(...r);const n=Go(this),s=n.store,a=new $Oe;n.store=a,lfe(n,s,a)}read(r,n){ufe(this,r,n)}write(r,n){return pfe(this,r??{},n)}toJSON(r){return this.write({},r)}static fromJSON(r,n){return POe.call(this,r,n)}};return i=d([V("esri.core.JSONSupport")],i),i.prototype.toJSON.isDefaultToJSON=!0,i};function POe(t,e){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const i=new this;return i.read(t,e),i}const $e=ig(et),OOe=Object.prototype.toString;function LOe(t){const e="__accessorMetadata__"in t?Wn(t):t;return function(...i){if(i.push(e),typeof i[2]=="number")throw new Error("Using @cast has parameter decorator is not supported since 4.16");return FOe.apply(this,i)}}function FOe(t,e,i,r){Ak(t,e).cast=r}function ROe(t){return(e,i)=>{Ak(e,t).cast=e[i]}}function _i(...t){if(t.length!==3||typeof t[1]!="string")return t.length===1&&OOe.call(t[0])==="[object Function]"?LOe(t[0]):t.length===1&&typeof t[0]=="string"?ROe(t[0]):void 0}function je(t,e,i){let r,n;return e===void 0||Array.isArray(e)?(n=t,i=e,r=[void 0]):(n=e,r=Array.isArray(t)?t:[t]),(s,a)=>{const o=s.constructor.prototype;r.forEach(l=>{const c=jW(s,l,n);c.read&&typeof c.read=="object"||(c.read={}),c.read.reader=o[a],i&&(c.read.source=(c.read.source||[]).concat(i))})}}function Ge(t,e,i){let r,n;return e===void 0?(n=t,r=[void 0]):typeof e!="string"?(n=t,r=[void 0],i=e):(n=e,r=Array.isArray(t)?t:[t]),(s,a)=>{const o=s.constructor.prototype;for(const l of r){const c=jW(s,l,n);c.write&&typeof c.write=="object"||(c.write={}),i&&(c.write.target=i),c.write.writer=o[a]}}}let jt=class{constructor(e,i={ignoreUnknown:!1,useNumericKeys:!1}){this._jsonToAPI=e,this._options=i,this.apiValues=[],this.jsonValues=[],this._apiToJSON=zOe(e),this.apiValues=fie(this._apiToJSON),this.jsonValues=fie(this._jsonToAPI),this.read=r=>this.fromJSON(r),this.write=(r,n,s)=>{const a=this.toJSON(r);a!==void 0&&qn(s,a,n)},this.write.isJSONMapWriter=!0}toJSON(e){if(e==null)return null;if(this._apiToJSON.hasOwnProperty(e)){const i=this._apiToJSON[e];return this._options.useNumericKeys?+i:i}return this._options.ignoreUnknown?null:e}fromJSON(e){return e!=null&&this._jsonToAPI.hasOwnProperty(e)?this._jsonToAPI[e]:this._options.ignoreUnknown?void 0:e}};function zOe(t){const e={};for(const i in t)e[t[i]]=i;return e}function fie(t){const e=[];for(const i in t)e.push(i);return e.sort(),e}function Es(){return function(t,e){return new jt(t,{ignoreUnknown:!0,...e})}}let HW=class{constructor(e,i,r,n,s,a){this.semiMajorAxis=e,this.flattening=i,this.outerAtmosphereRimWidth=r,this.atmosphereHeight=n,this.scaleHeight=s;const o=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*o,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=a||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}};const Mn=new HW(6378137,1/298.257223563,3e5,1e5,.085,.006694379990137799),Tp=new HW(3396190,1/169.8944472236118,23e4,6e4,.111),Cv=new HW(1737400,0,0,0,0);function hE(t){return t&&typeof t=="object"&&"toJSON"in t&&typeof t.toJSON=="function"}const NOe=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,DOe={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};function mie(t){const e=t==null?void 0:t.match(NOe);if(!e)return null;const[,i,r,n]=e;if(!i)return null;let s=null,a=null,o=null;const{devext:l,qaext:c,www:h}=DOe;if(r)if(s=i,n)switch(n.toLowerCase()){case"devext":({customBaseUrl:a,portalHostname:o}=l);break;case"qa":({customBaseUrl:a,portalHostname:o}=c);break;default:return null}else({customBaseUrl:a,portalHostname:o}=h);else switch(i.toLowerCase()){case"devext":({customBaseUrl:a,portalHostname:o}=l);break;case"qaext":({customBaseUrl:a,portalHostname:o}=c);break;case"www":({customBaseUrl:a,portalHostname:o}=h);break;default:return null}return{customBaseUrl:a,isPortal:!1,portalHostname:o,urlKey:s}}function ffe(t){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(t)}function mfe(t){const e=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,i=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,r=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;return e.test(t)?t=t.replace(e,"https://www.arcgis.com"):i.test(t)?t=t.replace(i,"https://devext.arcgis.com"):r.test(t)&&(t=t.replace(r,"https://qaext.arcgis.com")),t}function gfe(t){const e=atob(t),i=new Uint8Array(e.length);for(let r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i.buffer}function jOe(t){const e=new Uint8Array(t);let i="";for(let r=0;r<e.length;r++)i+=String.fromCharCode(e[r]);return btoa(i)}const VOe=()=>Ie.getLogger("esri.core.urlUtils"),zT=Ti.request,gie="esri/config: esriConfig.request.proxyUrl is not set.",yfe=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,vfe=/^\s*http:/i,UOe=/^\s*https:/i,BOe=/^\s*file:/i,bfe=/:\d+$/,qOe=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,HOe=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),GOe=new RegExp("^((([^[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^[:]*))(:([0-9]+))?$");let tw=class{constructor(e=""){this.uri=e,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let i=this.uri.match(HOe);this.scheme=i[2]||(i[1]?"":null),this.authority=i[4]||(i[3]?"":null),this.path=i[5],this.query=i[7]||(i[6]?"":null),this.fragment=i[9]||(i[8]?"":null),this.authority!=null&&(i=this.authority.match(GOe),this.user=i[3]||null,this.password=i[4]||null,this.host=i[6]||i[7],this.port=i[9]||null)}toString(){return this.uri}};const zP={},WOe=new tw(Ti.applicationUrl);let ao=WOe;const ZOe=YOe();let GW=ZOe;const WW=()=>ao,d1t=()=>GW;function YOe(){const t=ao.path,e=t.slice(0,t.lastIndexOf("/")+1);return`${`${ao.scheme}://${ao.host}${ao.port!=null?`:${ao.port}`:""}`}${e}`}function Cn(t){if(!t)return null;const e={path:null,query:null},i=new tw(t),r=t.indexOf("?");return i.query===null?e.path=t:(e.path=t.slice(0,r),e.query=ZW(i.query)),i.fragment&&(e.hash=i.fragment,i.query===null&&(e.path=e.path.slice(0,e.path.length-(i.fragment.length+1)))),e}function ZW(t){const e=t.split("&"),i={};for(const r of e){if(!r)continue;const n=r.indexOf("=");let s,a;n<0?(s=decodeURIComponent(r),a=""):(s=decodeURIComponent(r.slice(0,n)),a=decodeURIComponent(r.slice(n+1)));let o=i[s];typeof o=="string"&&(o=i[s]=[o]),Array.isArray(o)?o.push(a):i[s]=a}return i}function pE(t,e){return t?Object.keys(t).map(i=>{const r=t[i];if(r==null)return"";const n=encodeURIComponent(i)+"=",s=e==null?void 0:e[i];return s?n+encodeURIComponent(s(r)):Array.isArray(r)?r.map(a=>hE(a)?n+encodeURIComponent(JSON.stringify(a)):n+encodeURIComponent(a)).join("&"):hE(r)?n+encodeURIComponent(JSON.stringify(r)):n+encodeURIComponent(r)}).filter(i=>i).join("&"):""}function wfe(t=!1){let e,i=zT.proxyUrl;if(typeof t=="string"){e=Sfe(t);const r=gD(t);r&&(i=r.proxyUrl)}else e=!!t;if(!i)throw VOe().warn(gie),new ae("urlUtils:proxy-not-set",gie);return e&&f8()&&(i=KW(i)),Cn(i)}function h1t(t,e=!1){const i=gD(t);let r,n;if(i){const s=YW(i.proxyUrl);r=s.path,n=s.query?ZW(s.query):null}else if(e){const s=wfe(t);r=s.path,n=s.query}if(r){const s=Cn(t);t=r+"?"+s.path;const a=pE({...n,...s.query});a&&(t=`${t}?${a}`)}return t}const aM={path:"",query:""};function YW(t){const e=t.indexOf("?");return e!==-1?(aM.path=t.slice(0,e),aM.query=t.slice(e+1)):(aM.path=t,aM.query=null),aM}function _fe(t){return t=(t=uR(t=a3e(t=YW(t).path),!0)).toLowerCase()}function JOe(t){const e={proxyUrl:t.proxyUrl,urlPrefix:_fe(t.urlPrefix)},i=zT.proxyRules,r=e.urlPrefix;let n=i.length;for(let s=0;s<i.length;s++){const a=i[s].urlPrefix;if(r.startsWith(a)){if(r.length===a.length)return-1;n=s;break}a.startsWith(r)&&(n=s+1)}return i.splice(n,0,e),n}function gD(t){const e=zT.proxyRules,i=_fe(t);for(let r=0;r<e.length;r++)if(i.startsWith(e[r].urlPrefix))return e[r]}function XOe(t,e){if(!t||!e)return!1;t=cR(t),e=cR(e);const i=mie(t),r=mie(e);return i!=null&&r!=null?i.portalHostname===r.portalHostname:i==null&&r==null&&Ip(t,e,!0)}function xfe(t,e){return t=cR(t),e=cR(e),uR(t)===uR(e)}function cR(t){const e=(t=Ld(t)).indexOf("/sharing");return e>0?t.slice(0,e):t.replace(/\/+$/,"")}function p8(t,e=zT.interceptors){const i=r=>r instanceof RegExp?r.test(t):typeof r=="string"?t.startsWith(r):r==null;if(e){for(const r of e)if(Array.isArray(r.urls)){if(r.urls.some(i))return r}else if(i(r.urls))return r}return null}function Ip(t,e,i=!1){if(!t||!e)return!1;const r=g8(t),n=g8(e);return!(!i&&r.scheme!==n.scheme)&&r.host!=null&&n.host!=null&&r.host.toLowerCase()===n.host.toLowerCase()&&r.port===n.port}function JW(t){if(typeof t=="string"){if(!Pl(t))return!0;t=g8(t)}if(Ip(t,ao))return!0;const e=zT.trustedServers||[];for(let i=0;i<e.length;i++){const r=QOe(e[i]);for(let n=0;n<r.length;n++)if(Ip(t,r[n]))return!0}return!1}function QOe(t){return zP[t]||(QW(t)||zp(t)?zP[t]=[new tw(El(t))]:zP[t]=[new tw(`http://${t}`),new tw(`https://${t}`)]),zP[t]}function El(t,e=GW,i){return zp(t)?i!=null&&i.preserveProtocolRelative?t:ao.scheme==="http"&&ao.authority===$c(t).slice(2)?`http:${t}`:`https:${t}`:QW(t)?t:Ev(t.startsWith("/")?s3e(e):e,t)}function XW(t,e=GW,i){if(t==null||!Pl(t))return t;const r=Ld(t),n=r.toLowerCase(),s=Ld(e).toLowerCase().replace(/\/+$/,""),a=i?Ld(i).toLowerCase().replace(/\/+$/,""):null;if(a&&!s.startsWith(a))return t;const o=(m,g,v)=>(v=m.indexOf(g,v))===-1?m.length:v;let l=o(n,"/",n.indexOf("//")+2),c=-1;for(;n.slice(0,l+1)===s.slice(0,l)+"/"&&(c=l+1,l!==n.length);)l=o(n,"/",l+1);if(c===-1||a&&c<a.length)return t;t=r.slice(c);const h=s.slice(c-1).replaceAll(/[^/]+/g,"").length;if(h>0)for(let m=0;m<h;m++)t=`../${t}`;else t=`./${t}`;return t}function Ld(t){return t=c3e(t=l3e(t=o3e(t=El(t=t.trim()))))}function Ev(...t){const e=t.filter(ln);if(!(e!=null&&e.length))return;const i=[];if(Pl(e[0])){const n=e[0],s=n.indexOf("//");s!==-1&&(i.push(n.slice(0,s+1)),r3e(e[0])&&(i[0]+="/"),e[0]=n.slice(s+2))}else e[0].startsWith("/")&&i.push("");const r=e.reduce((n,s)=>s?n.concat(s.split("/")):n,[]);for(let n=0;n<r.length;n++){const s=r[n];s===".."&&i.length>0&&i[i.length-1]!==".."?i.pop():(!s&&n===r.length-1||s&&(s!=="."||i.length===0))&&i.push(s)}return i.join("/")}function $c(t,e=!1){if(t==null||NT(t)||rg(t))return null;let i=t.indexOf("://");if(i===-1&&zp(t))i=2;else{if(i===-1)return null;i+=3}const r=t.indexOf("/",i);return r!==-1&&(t=t.slice(0,r)),e&&(t=uR(t,!0)),t}function Pl(t){return zp(t)||QW(t)}function NT(t){return t!=null&&t.startsWith("blob:")}function rg(t){return t!=null&&t.startsWith("data:")}function KOe(t){const e=Xw(t);return e!=null&&e.isBase64?gfe(e.data):null}function p1t(t){return jOe(t).replaceAll("+","-").replaceAll("/","_").replace(/=+$/,"")}const e3e=/^data:(.*?)(;base64)?,(.*)$/;function Xw(t){const e=t.match(e3e);if(!e)return null;const[,i,r,n]=e;return{mediaType:i,isBase64:!!r,data:n}}function $fe(t){return t.isBase64?`data:${t.mediaType};base64,${t.data}`:`data:${t.mediaType},${t.data}`}async function t3e(t){return(await fetch(t)).blob()}function f1t(t){const e=KOe(t);if(!e)return null;const i=Xw(t);return new Blob([e],{type:i.mediaType})}function zp(t){return t!=null&&t.startsWith("/")&&t[1]==="/"}function QW(t){return t!=null&&yfe.test(t)}function Sfe(t){return t!=null&&UOe.test(t)||ao.scheme==="https"&&zp(t)}function i3e(t){return t!=null&&vfe.test(t)||ao.scheme==="http"&&zp(t)}function r3e(t){return t!=null&&BOe.test(t)}function KW(t){return zp(t)?`https:${t}`:t.replace(vfe,"https:")}function n3e(){return ao.scheme==="http"}function f8(){return ao.scheme==="https"}function uR(t,e=!1){return zp(t)?t.slice(2):(t=t.replace(yfe,""),e&&t.length>1&&t.startsWith("/")&&t[1]==="/"&&(t=t.slice(2)),t)}function s3e(t){const e=t.indexOf("//"),i=t.indexOf("/",e+2);return i===-1?t:t.slice(0,i)}function eZ(t){let e=0;if(Pl(t)){const r=t.indexOf("//");r!==-1&&(e=r+2)}const i=t.lastIndexOf("/");return i<e?t:t.slice(0,i+1)}function m1t(t,e){if(!t)return"";const i=Cn(t).path.replace(/\/+$/,""),r=i.slice(i.lastIndexOf("/")+1);if(!(e!=null&&e.length))return r;const n=new RegExp(`\\.(${e.join("|")})$`,"i");return r.replace(n,"")}function a3e(t){return t.endsWith("/")?t:`${t}/`}function Tfe(t){return t.replace(/\/+$/,"")}function o3e(t){if(/^https?:\/\//i.test(t)){const e=YW(t);t=(t=e.path.replaceAll(/\/{2,}/g,"/")).replace("/","//"),e.query&&(t+=`?${e.query}`)}return t}function l3e(t){return t.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function c3e(t){const e=zT.httpsDomains;if(!i3e(t))return t;const i=t.indexOf("/",7);let r;if(r=i===-1?t:t.slice(0,i),r=r.toLowerCase().slice(7),bfe.test(r)){if(!r.endsWith(":80"))return t;r=r.slice(0,-3),t=t.replace(":80","")}return n3e()&&r===ao.authority&&!qOe.test(t)||(f8()&&r===ao.authority||e&&e.some(n=>r===n||r.endsWith(`.${n}`))||f8()&&!gD(t))&&(t=KW(t)),t}function m8(t,e,i){if(!(e&&i&&t&&Pl(t)))return t;const r=t.indexOf("//"),n=t.indexOf("/",r+2),s=t.indexOf(":",r+2),a=Math.min(n<0?t.length:n,s<0?t.length:s);return t.slice(r+2,a).toLowerCase()!==e.toLowerCase()?t:`${t.slice(0,r+2)}${i}${t.slice(a)}`}function Ife(t,e){const i=new URL(t);return i.host=e,i.port&&!bfe.test(e)&&(i.port=""),i.toString()}function u3e(t){return new URL(t).host}function g8(t){return typeof t=="string"?new tw(El(t)):(t.scheme||(t.scheme=ao.scheme),t)}function g1t(t){return d3e.test(t)}function Mfe(t,e){const i=Cn(t),r=Object.keys(i.query||{});return r.length>0&&e&&e.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${r.join(", ")}.`),i.path}function Cfe(t,e,i){const r=Cn(t),n=r.query||{};return n[e]=String(i),`${r.path}?${pE(n)}`}function j3(t,e){if(!e)return t;const i=Cn(t),r=i.query||{};for(const[s,a]of Object.entries(e))a!=null&&(r[s]=a);const n=pE(r);return n?`${i.path}?${n}`:i.path}function Efe(t){if(t==null)return null;const e=t.match(kfe);return e?e[2]:null}function yie(t){if(t==null)return null;const e=t.match(kfe);return e?{path:e[1],extension:e[2]}:{path:t,extension:null}}async function y1t(t){return typeof t=="string"?Xw(t)??{data:t}:new Promise((e,i)=>{const r=new FileReader;r.readAsDataURL(t),r.onload=()=>e(Xw(r.result)),r.onerror=n=>i(n)})}const kfe=/([^.]*)\.([^/]*)$/,d3e=/(^data:image\/svg|\.svg$)/i,Afe="20251104",Pfe="f2c42760a996a580f8999c5703b35b2e3deaac4c";Symbol.dispose??(Symbol.dispose=Symbol("Symbol.dispose")),Symbol.asyncDispose??(Symbol.asyncDispose=Symbol("Symbol.asyncDispose"));const Ofe="4.34";let Rt,tZ=Ofe;function v1t(t){Rt=t}function h3e(t){const e=Rt==null?void 0:Rt.findCredential(t);return e!=null&&e.token?Cfe(t,"token",e.token):t}tZ="4.34.7",ve("host-webworker")||globalThis.$arcgis||Object.defineProperty(globalThis,"$arcgis",{configurable:!1,enumerable:!0,writable:!1,value:{}}),ve("host-webworker");function Wm(t,e){var r;const i=(r=e==null?void 0:e.url)==null?void 0:r.path;if(t&&i&&(t=El(t,i,{preserveProtocolRelative:!0}),e.portalItem&&e.readResourcePaths)){const n=XW(t,e.portalItem.itemUrl);n!=null&&n.startsWith(p3e)&&e.readResourcePaths.push(e.portalItem.resourceFromPath(n).path)}return(t=y8(t,e==null?void 0:e.portal))&&vD.test(t)?iZ(t):t}function Qw(t,e,i=0){var n,s;if((t=t&&vD.test(t)?zfe(t):t)==null)return t;!Pl(t)&&(e!=null&&e.blockedRelativeUrls)&&e.blockedRelativeUrls.push(t);let r=El(t);if(e){const a=((n=e.verifyItemRelativeUrls)==null?void 0:n.rootPath)||((s=e.url)==null?void 0:s.path);if(a){const o=y8(a,e.portal),l=y8(r,e.portal);r=XW(l,o,o),r!=null&&r!==l&&r!==t&&e.verifyItemRelativeUrls&&e.verifyItemRelativeUrls.writtenUrls.push(r)}}return r=Rfe(r,e==null?void 0:e.portal),Pl(r)&&(r=Ld(r)),e!=null&&e.resources&&(e!=null&&e.portalItem)&&!Pl(r)&&!rg(r)&&i===0&&e.resources.toKeep.push({resource:e.portalItem.resourceFromPath(r),compress:!1}),r}function yD(t,e,i){return Wm(t,i)}function Kw(t,e,i,r){const n=Qw(t,r);n!==void 0&&(e[i]=n)}const vD=/\/items\/([^/]+)\/resources\/(.*)/,p3e="./resources/";function Lfe(t){const e=(t==null?void 0:t.match(vD))??null;return(e==null?void 0:e[1])??null}function Ffe(t){const e=(t==null?void 0:t.match(vD))??null;if(e==null)return null;const i=e[2],r=i.lastIndexOf("/");if(r===-1){const{path:a,extension:o}=yie(i);return{prefix:null,filename:a,extension:o}}const{path:n,extension:s}=yie(i.slice(r+1));return{prefix:i.slice(0,r),filename:n,extension:s}}function Rfe(t,e){return e&&!e.isPortal&&e.urlKey&&e.customBaseUrl?m8(t,`${e.urlKey}.${e.customBaseUrl}`,e.portalHostname):t}function y8(t,e){if(!e||e.isPortal||!e.urlKey||!e.customBaseUrl)return t;const i=`${e.urlKey}.${e.customBaseUrl}`,r=WW();return Ip(r,`${r.scheme}://${i}`)?m8(t,e.portalHostname,i):m8(t,i,e.portalHostname)}function iZ(t){if(!t)return t||null;let e=t;return e&&Rt&&!Rt.findCredential(e)&&(e=mfe(e),e=e.replace(/^https?:\/\/www\.arcgis\.com/,"https://cdn.arcgis.com"),e=e.replace(/^https?:\/\/devext\.arcgis\.com/,"https://cdndev.arcgis.com"),e=e.replace(/^https?:\/\/qaext\.arcgis\.com/,"https://cdnqa.arcgis.com")),e}function zfe(t){if(!t)return t||null;let e=t;return e=e.replace(/^https?:\/\/cdn\.arcgis\.com/,"https://www.arcgis.com"),e=e.replace(/^https?:\/\/cdndev\.arcgis\.com/,"https://devext.arcgis.com"),e=e.replace(/^https?:\/\/cdnqa\.arcgis\.com/,"https://qaext.arcgis.com"),e&&Rt&&!Rt.findCredential(e)&&(e=mfe(e)),e}const f3e=Object.freeze(Object.defineProperty({__proto__:null,ensureMainOnlineDomain:Rfe,fromCDNUrl:zfe,fromJSON:Wm,itemIdFromResourceUrl:Lfe,prefixAndFilenameFromResourceUrl:Ffe,read:yD,toCDNUrl:iZ,toJSON:Qw,write:Kw},Symbol.toStringTag,{value:"Module"})),Nfe={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",knowledgegraphserver:"KnowledgeGraphServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer","3dtilesserver":"3DTilesServer",videoserver:"VideoServer"},Dfe=Object.values(Nfe),jfe=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${Dfe.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),m3e=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^/\\n]+)\\/(${Dfe.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),g3e=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function b1t(t){return jfe.test(t)}function Np(t){if(t==null)return null;const e=Cn(t),i=(e==null?void 0:e.path.match(jfe))||(e==null?void 0:e.path.match(m3e));if(!i)return null;const[,r,n,s,a]=i,o=n.indexOf("/");return{title:rZ(o!==-1?n.slice(o+1):n),serverType:Nfe[s.toLowerCase()],sublayer:a!=null&&a!==""?parseInt(a,10):null,url:{path:r}}}function y3e(t){const e=Cn(t).path.match(g3e);return e?{serviceUrl:e[1],sublayerId:Number(e[2])}:null}function rZ(t){return(t=t.replaceAll(/\s*[/_]+\s*/g," "))[0].toUpperCase()+t.slice(1)}function v3e(t,e){const i=[];if(t){const r=Np(t);r!=null&&r.title&&i.push(r.title)}if(e){const r=rZ(e);i.push(r)}if(i.length===2){if(i[0].toLowerCase().includes(i[1].toLowerCase()))return i[0];if(i[1].toLowerCase().includes(i[0].toLowerCase()))return i[1]}return i.join(" - ")}function dR(t){let e=$c(t,!0);return!!e&&(e=e.toLowerCase(),e.endsWith(".arcgis.com")&&(e.startsWith("services")||e.startsWith("tiles")||e.startsWith("features")||/^[a-z\d-]+\.svcs[a-z\d-]*\./.test(e)))}function b3e(t,e){return t&&Tfe(Mfe(t,e))}function w3e(t){let{url:e}=t;if(!e)return{url:e};e=Mfe(e,t.logger);const i=Cn(e),r=Np(i.path);let n;if(r!=null)r.sublayer!=null&&t.layer.layerId==null&&(n=r.sublayer),e=r.url.path;else if(t.nonStandardUrlAllowed){const s=y3e(i.path);s!=null&&(e=s.serviceUrl,n=s.sublayerId)}return{url:Tfe(e),layerId:n}}function _3e(t,e,i,r,n){Kw(e,r,"url",n),r.url&&t.layerId!=null&&(r.url=Ev(r.url,i,t.layerId.toString()))}function w1t(t){if(!t)return!1;const e=t.toLowerCase(),i=e.includes("/services/"),r=e.includes("/mapserver/wmsserver"),n=e.includes("/imageserver/wmsserver"),s=e.includes("/wmsserver");return i&&(r||n||s)}function _1t(t){var r;if(!t)return!1;const e=new tw(El(t)),i=(r=e.authority)==null?void 0:r.toLowerCase();return i==="server.arcgisonline.com"||i==="services.arcgisonline.com"}const x3e=new Set(["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"]);function nZ(t){if(!sZ(t))return null;const e=r=>r instanceof RegExp?r.test(t):typeof r=="string"&&t.startsWith(r),i=Ti.apiKeys;if(Array.isArray(i.scopes)){for(const r of i.scopes)if(Array.isArray(r.urls)){if(r.urls.some(e))return r.token}else if(e(r.urls))return r.token}return i.basemapStyles&&/^https?:\/\/(i?basemaps|basemapstyles)-api\.arcgis\.com\//i.test(t)?i.basemapStyles:Ti.apiKey&&/^https?:\/\/.+\.arcgis\.com(\/|$)/i.test(t)?Ti.apiKey:null}function v8(){return Ti.apiKey!=null||Ti.apiKeys.basemapStyles!=null}function $3e(t,e){return e?sZ(t):nZ(t)!=null}function sZ(t){const e=$c(t,!0);return!!e&&!x3e.has(e)&&!t.endsWith("/sharing/rest/generateToken")}function S3e(t,e,i=!1,r){return new Promise((n,s)=>{if(co(r))return void s(vie());let a=()=>{c(),s(new Error(`Unable to load ${e}`))},o=async()=>{const h=t;try{await h.decode()}catch{}c(),n(h)},l=()=>{if(!t)return;const h=t;c(),h.src="",s(vie())};const c=()=>{t&&(t.removeEventListener("error",a),t.removeEventListener("load",o),a=null,o=null,t=null,r==null||r.removeEventListener("abort",l),l=null,i&&URL.revokeObjectURL(e))};r==null||r.addEventListener("abort",l),t.addEventListener("error",a),t.addEventListener("load",o)})}function vie(){try{return new DOMException("Aborted","AbortError")}catch{const t=new Error;return t.name="AbortError",t}}const Vfe="Timeout exceeded";function T3e(){return new Error(Vfe)}function x1t(t){return typeof t=="object"&&!!t&&"message"in t&&t.message===Vfe}function I3e(t){Ti.request.crossOriginNoCorsDomains||(Ti.request.crossOriginNoCorsDomains={});const e=Ti.request.crossOriginNoCorsDomains;for(let i of t)i=i.toLowerCase(),/^https?:\/\//.test(i)?e[$c(i)??""]=0:(e[$c("http://"+i)??""]=0,e[$c("https://"+i)??""]=0)}function M3e(t){const e=Ti.request.crossOriginNoCorsDomains;if(e){let i=$c(t);if(i)return i=i.toLowerCase(),!Ip(i,WW())&&e[i]<Date.now()-36e5}return!1}async function C3e(t){var n;const e=Cn(t);t=e.path,((n=e.query)==null?void 0:n.f)==="json"&&(t+="?f=json");try{await fetch(t,{mode:"no-cors",credentials:"include"})}catch{}const i=Ti.request.crossOriginNoCorsDomains,r=$c(t);i&&r&&(i[r.toLowerCase()]=Date.now())}const b8=new Map;function E3e(t,e){const i=e==null?void 0:e.preferredHost;if(!i||Ip(t,`https://${i}`,!0))return;const r=Np(t);if(!r||r.serverType!=="FeatureServer"||ffe(t))return;const n=r.url.path.toLowerCase();b8.has(n)||b8.set(n,i)}function bie(t){var r;const e=(r=Np(t))==null?void 0:r.url.path.toLowerCase();if(!e)return t;const i=b8.get(e);return i?Ife(t,i):t}async function mi(t,e){var v;t instanceof URL&&(t=t.toString()),(e==null?void 0:e.query)instanceof URLSearchParams&&(e.query=ZW(e.query.toString().replaceAll("+"," ")));const i=rg(t),r=NT(t);r||i||(t=Ld(t));const n={url:t,requestOptions:{...e}},s=b=>({data:b,getAllHeaders:WS,getHeader:WS,httpStatus:200,requestOptions:n.requestOptions,url:n.url}),a=p8(t,ou.internalInterceptors);if(a){const b=await _ie(a,n);if(b!=null)return s(b)}let o=p8(t);if(o){const b=await _ie(o,n);if(b!=null)return s(b);o.after||o.error||(o=null)}if(t=n.url,(e=n.requestOptions).responseType==="image"&&(ve("host-webworker")||ve("host-node")))throw Fd("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),n);if(e.method==="head"){if(e.body)throw Fd("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),n);if(i||r)throw Fd("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),n)}if(await L3e(),hR)return hR.execute(t,e);const l=new AbortController,c=_u(e,()=>l.abort()),h={controller:l,credential:void 0,credentialToken:void 0,fetchOptions:void 0,hasToken:!1,interceptor:o,params:n,redoRequest:!1,useIdentity:ou.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},m=e.useRequestQueue?D3e(h):_8(h),g=await m.finally(()=>c==null?void 0:c.remove());return(v=o==null?void 0:o.after)==null||v.call(o,g),g}let hR,Ufe=!1;const ou=Ti.request,Bfe="FormData"in globalThis,k3e=new Set([499,498,403,401]),A3e=new Set(["COM_0056","COM_0057","SB_0008"]),P3e=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],WS=()=>null,pR=Symbol();function O3e(t){const e=$c(t);e&&!mi._corsServers.includes(e)&&mi._corsServers.push(e)}function wie(t){const e=$c(t);return!e||e.endsWith(".arcgis.com")||mi._corsServers.includes(e)||JW(e)}function Fd(t,e,i,r){var a;let n;const s={url:i.url,requestOptions:i.requestOptions,getAllHeaders:WS,getHeader:WS,ssl:!1};if(e instanceof ae)return e.details?(e.details=he(e.details),e.details.url=i.url,e.details.requestOptions=i.requestOptions):e.details=s,e;if(e){const o=r&&(()=>Array.from(r.headers)),l=r&&(m=>r.headers.get(m)),c=r==null?void 0:r.status,h=e.message;h&&(n=h),o&&l&&(s.getAllHeaders=o,s.getHeader=l),s.httpStatus=(e.httpCode!=null?e.httpCode:e.code)||c||0,s.subCode=e.subcode,s.messageCode=e.messageCode,typeof e.details=="string"?(s.messages=[e.details],n??(n=e.details)):(s.messages=e.details,n??(n=(a=s.messages)==null?void 0:a[0])),s.raw=pR in e?e[pR]:e}return n??(n="Error"),In(e)?Hi():new ae(t,n,s)}async function L3e(){ve("host-webworker")&&(!hR&&globalThis.invokeStaticMessage?hR=await de(()=>import("./request-BH9vn-5_.js"),[]):Ufe=!0)}async function w8(){Rt||await de(()=>import("./IdentityManager-BACaG2Yp.js"),[])}async function F3e(t){var o;const e=t.params.url,i=t.params.requestOptions,r=t.controller.signal,n=i.body;let s=null,a=null;if(Bfe&&"HTMLFormElement"in globalThis&&(n instanceof FormData?s=n:n instanceof HTMLFormElement&&(s=new FormData(n))),typeof n=="string"&&(a=n),t.fetchOptions={cache:i.cacheBust?"no-cache":"default",credentials:"same-origin",headers:i.headers||{},keepalive:i.keepAlive??!1,method:i.method==="head"?"HEAD":"GET",mode:"cors",priority:ou.priority,redirect:"follow",signal:r},(s||a)&&(t.fetchOptions.body=s||a),(Ufe||i.authMode==="anonymous")&&(t.useIdentity=!1),t.hasToken=!!(/token=/i.test(e)||(o=i.query)!=null&&o.token||s!=null&&s.get("token")),!t.hasToken){const l=nZ(e);l&&(i.query??(i.query={}),i.query.token=l,t.hasToken=!0)}if(t.useIdentity&&!t.hasToken&&!t.credential&&!t.credentialToken&&!qfe(e)&&!co(r)){let l;i.authMode==="immediate"?(await w8(),l=await Rt.getCredential(e,{signal:r})):i.authMode==="no-prompt"?(await w8(),l=await Rt.getCredential(e,{prompt:!1,signal:r}).catch(()=>{})):Rt&&(l=Rt.findCredential(e)),l&&(t.credential=l,t.credentialToken=l.token,t.useSSL=!!l.ssl)}}function qfe(t){return P3e.some(e=>e.test(t))}async function R3e(t){let e=t.params.url,i=bie(e);const r=t.params.requestOptions,n=t.fetchOptions??{},s=NT(e)||rg(e),a=r.responseType||"json",o=s?0:r.timeout!=null?r.timeout:ou.timeout;let l=!1;if(!s){t.useSSL&&(e=KW(e));let v={...r.query};t.credentialToken&&(v.token=t.credentialToken);let b=pE(v);ve("esri-url-encodes-apostrophe")&&(b=b.replaceAll("'","%27"));const x=i.length+1+b.length;let $;l=r.method==="delete"||r.method==="post"||r.method==="put"||!!r.body||x>ou.maxUrlLength;const M=r.useProxy||!!gD(e);if(M){const k=wfe(e);$=k.path,!l&&$.length+1+x>ou.maxUrlLength&&(l=!0),k.query&&(v={...k.query,...v})}if(n.method==="HEAD"&&(l||M)){if(l)throw x>ou.maxUrlLength?Fd("request:invalid-parameters",new Error("URL exceeds maximum length"),t.params):Fd("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),t.params);if(M)throw Fd("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),t.params)}if(l?(n.method=r.method==="delete"?"DELETE":r.method==="put"?"PUT":"POST",r.body?e=j3(e,v):(n.body=pE(v),n.headers||(n.headers={}),n.headers["Content-Type"]="application/x-www-form-urlencoded")):e=j3(e,v),M&&(t.useProxy=!0,e=`${$}?${e}`),v.token&&Bfe&&n.body instanceof FormData&&!ffe(e)&&n.body.set("token",v.token),r.hasOwnProperty("withCredentials"))t.withCredentials=r.withCredentials;else if(!Ip(e,WW())){if(JW(e))t.withCredentials=!0;else if(Rt){const k=Rt.findServerInfo(e);k!=null&&k.webTierAuth&&(t.withCredentials=!0)}}t.withCredentials&&(n.credentials="include",M3e(e)&&await C3e(l?j3(e,v):e)),i=bie(e)}let c,h,m=0,g=!1;o>0&&(m=setTimeout(()=>{g=!0,t.controller.abort()},o));try{if(r.responseType==="native-request-init")h=n,h.url=i,r.signal?h.signal=r.signal:delete h.signal;else if(r.responseType!=="image"||n.cache!=="default"||n.keepalive||n.method!=="GET"||l||z3e(r.headers)||!s&&!t.useProxy&&ou.proxyUrl&&!wie(e)){if(mi._beforeFetch&&await mi._beforeFetch(e,n),c=await fetch(i,n),mi._afterFetch&&await mi._afterFetch(c),t.useProxy||O3e(e),r.responseType==="native")h=c;else if(n.method!=="HEAD")if(c.ok){switch(a){case"array-buffer":h=await c.arrayBuffer();break;case"blob":case"image":h=await c.blob();break;default:h=await c.text()}if(m&&(clearTimeout(m),m=0),a==="json"||a==="xml"||a==="document")if(h)switch(a){case"json":h=JSON.parse(h);break;case"xml":h=xie(h,"application/xml");break;case"document":h=xie(h,"text/html")}else h=null;if(h){if(a==="array-buffer"||a==="blob"){const v=c.headers.get("Content-Type");if(v&&/application\/json|text\/plain/i.test(v)&&h[a==="blob"?"size":"byteLength"]<=750)try{const b=await new Response(h).json();b.error&&(h=b)}catch{}}a==="image"&&h instanceof Blob&&(h=await $ie(URL.createObjectURL(h),t,!0))}}else{h=await c.text();try{h=JSON.parse(h)}catch{}}}else h=await $ie(i,t)}catch(v){if(v.name==="AbortError")throw g?T3e():Hi("Request canceled");if(!(!c&&v instanceof TypeError&&ou.proxyUrl)||r.body||r.method==="delete"||r.method==="head"||r.method==="post"||r.method==="put"||t.useProxy||wie(e))throw v;t.redoRequest=!0,JOe({proxyUrl:ou.proxyUrl,urlPrefix:$c(e)??""})}finally{m&&clearTimeout(m)}return[c,h]}async function _ie(t,e){if(t.responseData!=null)return t.responseData;if(t.headers&&(e.requestOptions.headers={...e.requestOptions.headers,...t.headers}),t.query&&(e.requestOptions.query={...e.requestOptions.query,...t.query}),t.before){let i,r;try{r=await t.before(e)}catch(n){i=Fd("request:interceptor",n,e)}if((r instanceof Error||r instanceof ae)&&(i=Fd("request:interceptor",r,e)),i)throw t.error&&t.error(i),i;return r}}function z3e(t){if(t){for(const e of Object.getOwnPropertyNames(t))if(t[e])return!0}return!1}function xie(t,e){let i;try{i=new DOMParser().parseFromString(t,e)}catch{}if(!i||i.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return i}mi._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"],mi._beforeFetch=void 0,mi._afterFetch=void 0;const N3e=new Map;async function D3e(t){const e=V3e(t.params.url);if(!e)return _8(t);const{QueueProcessor:i}=await de(()=>import("./QueueProcessor-Dvs9xJZ0.js"),[]);return Gp(N3e,e.origin,()=>{const n=e.isHosted?ve("request-queue-concurrency-hosted"):ve("request-queue-concurrency-non-hosted");return new i({concurrency:n,process:s=>{if(co(s.params.requestOptions))throw Fd("",Hi("Request canceled"),s.params);return _8(s)}})}).push(t)}async function _8(t){var s,a;let e,i;await F3e(t);try{do[e,i]=await R3e(t);while(!await j3e(t,e,i))}catch(o){const l=Fd("request:server",o,t.params,e);throw l.details.ssl=t.useSSL,(s=t.interceptor)!=null&&s.error&&t.interceptor.error(l),l}const r=t.params.url;if(i)if(/\/sharing\/rest\/(accounts|portals)\/self/i.test(r)){if(!t.hasToken&&!t.credentialToken&&((a=i.user)!=null&&a.username)&&!JW(r)){const o=$c(r,!0);o&&ou.trustedServers.push(o)}Array.isArray(i.authorizedCrossOriginNoCorsDomains)&&I3e(i.authorizedCrossOriginNoCorsDomains)}else(t.params.requestOptions.responseType||"json")==="json"&&E3e(r,i);const n=t.credential;if(n&&Rt){const o=Rt.findServerInfo(n.server);let l=o==null?void 0:o.owningSystemUrl;if(l){l=l.replace(/\/?$/,"/sharing");const c=Rt.findCredential(l,n.userId);c&&Rt._getIdenticalSvcIdx(l,c)===-1&&c.resources.unshift(l)}}return{data:i,getAllHeaders:e?()=>Array.from(e.headers):WS,getHeader:e?o=>e.headers.get(o):WS,httpStatus:(e==null?void 0:e.status)??200,requestOptions:t.params.requestOptions,ssl:t.useSSL,url:t.params.url}}async function j3e(t,e,i){var c;if(t.redoRequest)return t.redoRequest=!1,!1;const r=t.params.requestOptions;if(!e||r.responseType==="native"||r.responseType==="native-request-init")return!0;let n,s;if(i&&(i.error&&typeof i.error=="object"?n=i.error:i.status==="error"&&Array.isArray(i.messages)&&(n={...i},n[pR]=i,n.details=i.messages)),!n&&!e.ok)throw n=new Error(`Unable to load ${e.url} status: ${e.status}`),n[pR]=i,n;let a,o=null;n&&(s=Number(n.code),o=n.hasOwnProperty("subcode")?Number(n.subcode):null,a=n.messageCode,a=a==null?void 0:a.toUpperCase());const l=r.authMode;if(s===403&&(o===4||(c=n.message)!=null&&c.toLowerCase().includes("ssl")&&!n.message.toLowerCase().includes("permission"))){if(!t.useSSL)return t.useSSL=!0,!1}else if(!t.hasToken&&t.useIdentity&&(l!=="no-prompt"||s===498)&&s!==void 0&&k3e.has(s)&&!qfe(t.params.url)&&(s!==403||(!a||!A3e.has(a))&&(o==null||o===2&&t.credentialToken))){await w8();try{const h=await Rt.getCredential(t.params.url,{error:Fd("request:server",n,t.params),credential:t.credential,prompt:l!=="no-prompt",signal:t.controller.signal,token:t.credentialToken});return t.credential=h,t.credentialToken=h.token,t.useSSL=t.useSSL||h.ssl,!1}catch(h){if(l==="no-prompt")return t.credential=void 0,t.credentialToken=void 0,!1;n=h}}if(n)throw n;return!0}function $ie(t,e,i=!1){const r=e.controller.signal,n=new Image;return e.withCredentials?n.crossOrigin="use-credentials":n.crossOrigin="anonymous",n.alt="",n.fetchPriority=ou.priority,n.src=t,S3e(n,t,i,r)}function V3e(t){let e,i;return typeof t=="string"?(e=$c(t,!0),i=dR(t)):(e=t.origin,i=dR(t.toString())),e==null?null:{origin:e,isHosted:i}}function Hr(t){if(!Ti.assetsPath)throw Ie.getLogger("esri.assets").errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new ae("assets:path-not-set","config.assetsPath is not set");return Ev(Ti.assetsPath,t)}let RV,ge=null;function aZ(){return!!ge}function U3e(){return!!ve("esri-wasm")}function Hfe(){return RV||(RV=de(async()=>{const{default:t}=await import("./pe-wasm-CyV_MJXv.js");return{default:t}},[]).then(({default:t})=>t({locateFile:e=>Hr(`esri/geometry/support/${e}`)})).then(t=>{Xfe(t)}),RV)}const V3={geogToProj(t,e,i){ge.ensureCache.prepare();const r=e_(i),n=i===r,s=ge.ensureFloat64(r),a=ge._pe_geog_to_proj(ge.getPointer(t),e,s);return a&&kv(i,e,s,n),a},projGeog(t,e,i,r){switch(r){case Sn.PE_TRANSFORM_P_TO_G:return V3.projToGeog(t,e,i);case Sn.PE_TRANSFORM_G_TO_P:return V3.geogToProj(t,e,i)}return 0},projToGeog:(t,e,i)=>V3.projToGeogCenter(t,e,i,0),projToGeogCenter(t,e,i,r){ge.ensureCache.prepare();const n=e_(i),s=i===n,a=ge.ensureFloat64(n),o=ge._pe_proj_to_geog_center(ge.getPointer(t),e,a,r);return o&&kv(i,e,a,s),o}};let Sn=class Ui{static init(){Ui.PE_BUFFER_MAX=ge.PeDefs.prototype.PE_BUFFER_MAX,Ui.PE_NAME_MAX=ge.PeDefs.prototype.PE_NAME_MAX,Ui.PE_MGRS_MAX=ge.PeDefs.prototype.PE_MGRS_MAX,Ui.PE_USNG_MAX=ge.PeDefs.prototype.PE_USNG_MAX,Ui.PE_DD_MAX=ge.PeDefs.prototype.PE_DD_MAX,Ui.PE_DDM_MAX=ge.PeDefs.prototype.PE_DDM_MAX,Ui.PE_DMS_MAX=ge.PeDefs.prototype.PE_DMS_MAX,Ui.PE_UTM_MAX=ge.PeDefs.prototype.PE_UTM_MAX,Ui.PE_PARM_MAX=ge.PeDefs.prototype.PE_PARM_MAX,Ui.PE_TYPE_NONE=ge.PeDefs.prototype.PE_TYPE_NONE,Ui.PE_TYPE_GEOGCS=ge.PeDefs.prototype.PE_TYPE_GEOGCS,Ui.PE_TYPE_PROJCS=ge.PeDefs.prototype.PE_TYPE_PROJCS,Ui.PE_TYPE_GEOGTRAN=ge.PeDefs.prototype.PE_TYPE_GEOGTRAN,Ui.PE_TYPE_COORDSYS=ge.PeDefs.prototype.PE_TYPE_COORDSYS,Ui.PE_TYPE_UNIT=ge.PeDefs.prototype.PE_TYPE_UNIT,Ui.PE_TYPE_LINUNIT=ge.PeDefs.prototype.PE_TYPE_LINUNIT,Ui.PE_STR_OPTS_NONE=ge.PeDefs.prototype.PE_STR_OPTS_NONE,Ui.PE_STR_AUTH_NONE=ge.PeDefs.prototype.PE_STR_AUTH_NONE,Ui.PE_STR_AUTH_TOP=ge.PeDefs.prototype.PE_STR_AUTH_TOP,Ui.PE_STR_NAME_CANON=ge.PeDefs.prototype.PE_STR_NAME_CANON,Ui.PE_STR_FMT_WKT=ge.PeDefs.prototype.PE_STR_FMT_WKT,Ui.PE_STR_FMT_WKT2=ge.PeDefs.prototype.PE_STR_FMT_WKT2,Ui.PE_PARM_X0=ge.PeDefs.prototype.PE_PARM_X0,Ui.PE_PARM_ND=ge.PeDefs.prototype.PE_PARM_ND,Ui.PE_TRANSFORM_1_TO_2=ge.PeDefs.prototype.PE_TRANSFORM_1_TO_2,Ui.PE_TRANSFORM_2_TO_1=ge.PeDefs.prototype.PE_TRANSFORM_2_TO_1,Ui.PE_TRANSFORM_P_TO_G=ge.PeDefs.prototype.PE_TRANSFORM_P_TO_G,Ui.PE_TRANSFORM_G_TO_P=ge.PeDefs.prototype.PE_TRANSFORM_G_TO_P,Ui.PE_HORIZON_RECT=ge.PeDefs.prototype.PE_HORIZON_RECT,Ui.PE_HORIZON_POLY=ge.PeDefs.prototype.PE_HORIZON_POLY,Ui.PE_HORIZON_LINE=ge.PeDefs.prototype.PE_HORIZON_LINE,Ui.PE_HORIZON_DELTA=ge.PeDefs.prototype.PE_HORIZON_DELTA}},Gfe=null;const Sie={},Tie={},Iie=t=>{const e=t.getType();switch(e){case Sn.PE_TYPE_GEOGCS:t=ge.castObject(t,ge.PeGeogcs);break;case Sn.PE_TYPE_PROJCS:t=ge.castObject(t,ge.PeProjcs);break;case Sn.PE_TYPE_GEOGTRAN:t=ge.castObject(t,ge.PeGeogtran);break;default:e&Sn.PE_TYPE_UNIT&&(t=ge.castObject(t,ge.PeUnit))}return t},ax={initialize(){ge.PeFactory.prototype.initialize(null)},coordsys:t=>ax.factoryByType(Sn.PE_TYPE_COORDSYS,t),factoryByType(t,e){let i=null,r=Sie[t];if(r||(r={},Sie[t]=r),r.hasOwnProperty(String(e))&&(i=r[e],ge.compare(i,ge.NULL)&&(i=null)),!i){const n=ge.PeFactory.prototype.factoryByType(t,e);ge.compare(n,ge.NULL)||(i=Iie(n),r[e]=i)}return i},fromString(t,e){let i=null,r=Tie[t];if(r||(r={},Tie[t]=r),r.hasOwnProperty(e)&&(i=r[e],ge.compare(i,ge.NULL)&&(i=null)),!i){const n=ge.PeFactory.prototype.fromString(t,e);ge.compare(n,ge.NULL)||(i=Iie(n),r[e]=i)}return i},geogcs:t=>ax.factoryByType(Sn.PE_TYPE_GEOGCS,t),geogtran:t=>ax.factoryByType(Sn.PE_TYPE_GEOGTRAN,t),getCode:t=>ge.PeFactory.prototype.getCode(t),projcs:t=>ax.factoryByType(Sn.PE_TYPE_PROJCS,t),unit:t=>ax.factoryByType(Sn.PE_TYPE_UNIT,t)};let Mie,Wfe=null;const oZ={PE_GTLIST_OPTS_COMMON:0,init(){oZ.PE_GTLIST_OPTS_COMMON=ge.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,Mie=ge._pe_getPeGTlistExtendedEntrySize()},getGTlist(t,e,i,r,n,s){let a=null;const o=new ge.PeInteger(s);try{const l=ge.PeGTlistExtended.prototype.getGTlist(t,e,i,r,n,o);if((s=o.val)&&(a=[l],s>1)){const c=ge.getPointer(l);for(let h=1;h<s;h++)a.push(ge.wrapPointer(c+Mie*h,ge.PeGTlistExtendedEntry))}}finally{ge.destroy(o)}return a}},B3e={destroy(t){if(t!=null&&t.length){for(const e of t)hd(e),e.getEntries().forEach(i=>{hd(i);const r=i.getGeogtran();hd(r),r.getParameters().forEach(hd),[r.getGeogcs1(),r.getGeogcs2()].forEach(n=>{hd(n);const s=n.getDatum();hd(s),hd(s.getSpheroid()),hd(n.getPrimem()),hd(n.getUnit())})});ge.PeGTlistExtendedEntry.prototype.Delete(t[0])}}},q3e={geogToGeog(t,e,i,r,n){ge.ensureCache.prepare();const s=e_(i),a=i===s,o=ge.ensureFloat64(s);let l=0;r&&(l=ge.ensureFloat64(r));const c=ge._pe_geog_to_geog(ge.getPointer(t),e,o,l,n);return c&&kv(i,e,o,a),c}},H3e={geodesicCoordinate(t,e,i,r,n,s,a,o){ge.PeLineType.prototype.geodesic_coordinate(t,e,i,r,n,s,a,o)},geodeticCoordinate(t,e,i,r,n,s,a,o,l){ge.PeLineType.prototype.geodetic_coordinate(t,e,i,r,n,s,a,o,l)},geodeticDistance(t,e,i,r,n,s,a,o,l,c){ge.PeLineType.prototype.geodetic_distance(t,e,i,r,n,s,a,o,l,c)},greatEllipticDistance(t,e,i,r,n,s,a,o,l){ge.PeLineType.prototype.great_elliptic_distance(t,e,i,r,n,s,a,o,l)}},G3e={phiToEta:(t,e)=>ge.PeMath.prototype.phi_to_eta(t,e),etaToPhi:(t,e)=>ge.PeMath.prototype.eta_to_phi(t,e),phiToPhig:(t,e)=>ge.PeMath.prototype.phi_to_phig(t,e),q:(t,e,i)=>ge.PeMath.prototype.q(t,e,i),q90:(t,e)=>ge.PeMath.prototype.q90(t,e)},zV=(t,e,i,r,n,s)=>{let a,o;switch(ge.ensureCache.prepare(),t){case"dd":a=ge._pe_geog_to_dd,o=Sn.PE_DD_MAX;break;case"ddm":a=ge._pe_geog_to_ddm,o=Sn.PE_DDM_MAX;break;case"dms":a=ge._pe_geog_to_dms,o=Sn.PE_DMS_MAX}let l=0;e&&(l=ge.getPointer(e));const c=e_(r),h=ge.ensureFloat64(c),m=bD(i,o),g=a(l,i,h,n,ge.ensureInt32(m));if(g)for(let v=0;v<i;v++)s[v]=ge.UTF8ToString(m[v]);return g},NV=(t,e,i,r,n)=>{let s;switch(ge.ensureCache.prepare(),t){case"dd":s=ge._pe_dd_to_geog;break;case"ddm":s=ge._pe_ddm_to_geog;break;case"dms":s=ge._pe_dms_to_geog}let a=0;e&&(a=ge.getPointer(e));const o=r.map(m=>ge.ensureString(m)),l=ge.ensureInt32(o),c=ge.ensureFloat64(new Array(2*i)),h=s(a,i,l,c);return h&&kv(n,i,c),h},W3e={geogToDms:(t,e,i,r,n)=>zV("dms",t,e,i,r,n),dmsToGeog:(t,e,i,r)=>NV("dms",t,e,i,r),geogToDdm:(t,e,i,r,n)=>zV("ddm",t,e,i,r,n),ddmToGeog:(t,e,i,r)=>NV("ddm",t,e,i,r),geogToDd:(t,e,i,r,n)=>zV("dd",t,e,i,r,n),ddToGeog:(t,e,i,r)=>NV("dd",t,e,i,r)};let Zfe=class ox{static init(){ox.PE_MGRS_STYLE_NEW=ge.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,ox.PE_MGRS_STYLE_OLD=ge.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,ox.PE_MGRS_STYLE_AUTO=ge.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,ox.PE_MGRS_180_ZONE_1_PLUS=ge.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,ox.PE_MGRS_ADD_SPACES=ge.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}static geogToMgrsExtended(e,i,r,n,s,a,o){ge.ensureCache.prepare();let l=0;e&&(l=ge.getPointer(e));const c=e_(r),h=ge.ensureFloat64(c),m=bD(i,Sn.PE_MGRS_MAX),g=ge.ensureInt32(m),v=ge._pe_geog_to_mgrs_extended(l,i,h,n,s,a,g);if(v)for(let b=0;b<i;b++)o[b]=ge.UTF8ToString(m[b]);return v}static mgrsToGeogExtended(e,i,r,n,s){ge.ensureCache.prepare();let a=0;e&&(a=ge.getPointer(e));const o=r.map(m=>ge.ensureString(m)),l=ge.ensureInt32(o),c=ge.ensureFloat64(new Array(2*i)),h=ge._pe_mgrs_to_geog_extended(a,i,l,n,c);return h&&kv(s,i,c),h}};const Z3e={geogToUsng(t,e,i,r,n,s,a){ge.ensureCache.prepare();let o=0;t&&(o=ge.getPointer(t));const l=e_(i),c=ge.ensureFloat64(l),h=bD(e,Sn.PE_MGRS_MAX),m=ge.ensureInt32(h),g=ge._pe_geog_to_usng(o,e,c,r,n,s,m);if(g)for(let v=0;v<e;v++)a[v]=ge.UTF8ToString(h[v]);return g},usngToGeog(t,e,i,r){ge.ensureCache.prepare();let n=0;t&&(n=ge.getPointer(t));const s=i.map(c=>ge.ensureString(c)),a=ge.ensureInt32(s),o=ge.ensureFloat64(new Array(2*e)),l=ge._pe_usng_to_geog(n,e,a,o);return l&&kv(r,e,o),l}};let Yfe=class U3{static init(){U3.PE_UTM_OPTS_NONE=ge.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,U3.PE_UTM_OPTS_ADD_SPACES=ge.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,U3.PE_UTM_OPTS_NS=ge.PeNotationUtm.prototype.PE_UTM_OPTS_NS}static geogToUtm(e,i,r,n,s){ge.ensureCache.prepare();let a=0;e&&(a=ge.getPointer(e));const o=e_(r),l=ge.ensureFloat64(o),c=bD(i,Sn.PE_UTM_MAX),h=ge.ensureInt32(c),m=ge._pe_geog_to_utm(a,i,l,n,h);if(m)for(let g=0;g<i;g++)s[g]=ge.UTF8ToString(c[g]);return m}static utmToGeog(e,i,r,n,s){ge.ensureCache.prepare();let a=0;e&&(a=ge.getPointer(e));const o=r.map(m=>ge.ensureString(m)),l=ge.ensureInt32(o),c=ge.ensureFloat64(new Array(2*i)),h=ge._pe_utm_to_geog(a,i,l,n,c);return h&&kv(s,i,c),h}};var Il;let Jfe=(Il=class{static init(){Il.PE_PCSINFO_OPTION_NONE=ge.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,Il.PE_PCSINFO_OPTION_DOMAIN=ge.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,Il.PE_POLE_OUTSIDE_BOUNDARY=ge.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,Il.PE_POLE_POINT=ge.PePCSInfo.prototype.PE_POLE_POINT}static generate(e,i=Il.PE_PCSINFO_OPTION_DOMAIN){let r=null,n=null;return Il.cache.has(e)&&(n=Il.cache.get(e),n[i]&&(r=n[i])),r||(r=ge.PePCSInfo.prototype.generate(e,i),n||(n=[],Il.cache.set(e,n)),n[i]=r),r}},Il.cache=new Map,Il);const Y3e={versionString:()=>ge.PeVersion.prototype.version_string()};function Xfe(t){function e(s,a,o){s[a]=o(s[a])}ge=t,Sn.init(),oZ.init(),Zfe.init(),Yfe.init(),Jfe.init(),Gfe=class extends ge.PeDouble{constructor(s=NaN){super(s)}destroy(){ge.destroy(this)}[Symbol.dispose](){this.destroy()}},Wfe=class extends ge.PeGCSExtent{destroy(){ge.destroy(this)}[Symbol.dispose](){this.destroy()}};const i=[ge.PeAngunit,ge.PeDatum,ge.PeGeogcs,ge.PeGeogtran,ge.PeObject,ge.PeParameter,ge.PePrimem,ge.PeProjcs,ge.PeSpheroid,ge.PeUnit];for(const s of i)e(s.prototype,"getName",a=>function(){return a.call(this,new Array(Sn.PE_NAME_MAX))});for(const s of[ge.PeGeogtran,ge.PeProjcs])e(s.prototype,"getParameters",a=>function(){const o=new Array(Sn.PE_PARM_MAX);let l=a.call(this);for(let c=0;c<o.length;c++){const h=ge.getValue(l,"*");o[c]=h?ge.wrapPointer(h,ge.PeParameter):null,l+=Int32Array.BYTES_PER_ELEMENT}return o});e(ge.PeHorizon.prototype,"getCoord",s=>function(a=!1){const o=this.getSize();if(!o)return null;const l=[];return kv(l,o,s.call(this),a),l}),e(ge.PeGTlistExtendedEntry.prototype,"getEntries",s=>{const a=ge._pe_getPeGTlistExtendedGTsSize();return function(){let o=null;const l=s.call(this);if(!ge.compare(l,ge.NULL)){o=[l];const c=this.getSteps();if(c>1){const h=ge.getPointer(l);for(let m=1;m<c;m++)o.push(ge.wrapPointer(h+a*m,ge.PeGTlistExtendedGTs))}}return o}});const r=ge._pe_getPeHorizonSize(),n=s=>function(){let a=this._cache;if(a||(a=new Map,this._cache=a),a.has(s))return a.get(s);let o=null;const l=s.call(this);if(!ge.compare(l,ge.NULL)){o=[l];const c=l.getNump();if(c>1){const h=ge.getPointer(l);for(let m=1;m<c;m++)o.push(ge.wrapPointer(h+r*m,ge.PeHorizon))}}return a.set(s,o),o};e(ge.PeProjcs.prototype,"horizonGcsGenerate",n),e(ge.PeProjcs.prototype,"horizonPcsGenerate",n),ge.PeObject.prototype.toString=function(s=Sn.PE_STR_OPTS_NONE){ge.ensureCache.prepare();const a=ge.getPointer(this),o=ge.ensureInt8(new Array(Sn.PE_BUFFER_MAX));return ge.UTF8ToString(ge._pe_object_to_string_ext(a,s,o))},ge.PeGeogcs.prototype.destroy=function(){this.Delete(),hd(this),this.ptr=0},ge.PeGeogcs.prototype[Symbol.dispose]=function(){this.destroy()},ge.PeProjcs.prototype.destroy=function(){this.Delete(),hd(this),this.ptr=0},ge.PeProjcs.prototype[Symbol.dispose]=function(){this.destroy()}}function hd(t){if(!t)return;const e=ge.getClass(t);if(!e)return;const i=ge.getCache(e);if(!i)return;const r=ge.getPointer(t);r&&delete i[r]}function bD(t,e){const i=[],r=new Array(e);for(let n=0;n<t;n++)i.push(ge.ensureInt8(r));return i}function e_(t){return ArrayBuffer.isView(t)?t:Array.isArray(t[0])?t.flat():t}function kv(t,e,i,r=!1){if(r)for(let n=0;n<2*e;n++)t[n]=ge.getValue(i+n*Float64Array.BYTES_PER_ELEMENT,"double");else{const n=t.length===0;for(let s=0;s<e;s++)n&&(t[s]=new Array(2)),t[s][0]=ge.getValue(i,"double"),t[s][1]=ge.getValue(i+Float64Array.BYTES_PER_ELEMENT,"double"),i+=2*Float64Array.BYTES_PER_ELEMENT}}const J3e=Object.freeze(Object.defineProperty({__proto__:null,PeCSTransformations:V3,PeDefs:Sn,get PeDouble(){return Gfe},PeFactory:ax,get PeGCSExtent(){return Wfe},PeGTTransformations:q3e,PeGTlistExtended:oZ,PeGTlistExtendedEntry:B3e,PeLineType:H3e,PeMath:G3e,PeNotationDms:W3e,PeNotationMgrs:Zfe,PeNotationUsng:Z3e,PeNotationUtm:Yfe,PePCSInfo:Jfe,PeVersion:Y3e,_init:Xfe,get _pe(){return ge},isLoaded:aZ,isSupported:U3e,load:Hfe},Symbol.toStringTag,{value:"Module"}));let w;const G={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5041:0,5042:0,5048:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,9793:0,9794:0,9869:0,9874:0,9875:0,9880:0,9895:0,9943:0,9945:0,9947:0,9967:0,9972:0,9977:0,10160:0,10183:0,10188:0,10194:0,10199:0,10207:0,10212:0,10217:0,10222:0,10227:0,10235:0,10240:0,10250:0,10254:0,10270:0,10275:0,10280:0,10306:0,10329:0,10471:0,10477:0,10481:2,10516:2,10592:0,10594:0,10596:0,10598:0,10601:0,10603:0,10626:0,10632:0,10641:0,10665:0,10674:0,10744:0,10745:0,10759:0,10773:0,10802:0,10820:0,20002:0,20042:0,20050:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22239:0,22240:0,22332:0,22337:0,22338:0,22391:0,22392:0,22639:0,22700:0,22739:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,65061:2,65062:2,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102731:0,102732:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2,103897:1,103978:2,103979:0,103980:2,103981:0};for(w=2e3;w<=2045;w++)G[w]=0;for(w=2056;w<=2065;w++)G[w]=0;for(w=2067;w<=2135;w++)G[w]=0;for(w=2137;w<=2154;w++)G[w]=0;for(w=2161;w<=2170;w++)G[w]=0;for(w=2172;w<=2193;w++)G[w]=0;for(w=2195;w<=2198;w++)G[w]=0;for(w=2200;w<=2203;w++)G[w]=0;for(w=2205;w<=2217;w++)G[w]=0;for(w=2222;w<=2224;w++)G[w]=1;for(w=2225;w<=2250;w++)G[w]=2;for(w=2251;w<=2253;w++)G[w]=1;for(w=2257;w<=2264;w++)G[w]=2;for(w=2274;w<=2279;w++)G[w]=2;for(w=2280;w<=2282;w++)G[w]=1;for(w=2283;w<=2289;w++)G[w]=2;for(w=2290;w<=2292;w++)G[w]=0;for(w=2308;w<=2313;w++)G[w]=0;for(w=2315;w<=2491;w++)G[w]=0;for(w=2494;w<=2866;w++)G[w]=0;for(w=2867;w<=2869;w++)G[w]=1;for(w=2870;w<=2888;w++)G[w]=2;for(w=2891;w<=2895;w++)G[w]=2;for(w=2896;w<=2898;w++)G[w]=1;for(w=2902;w<=2908;w++)G[w]=2;for(w=2915;w<=2920;w++)G[w]=2;for(w=2921;w<=2923;w++)G[w]=1;for(w=2924;w<=2930;w++)G[w]=2;for(w=2931;w<=2962;w++)G[w]=0;for(w=2964;w<=2968;w++)G[w]=2;for(w=2969;w<=2973;w++)G[w]=0;for(w=2975;w<=2991;w++)G[w]=0;for(w=2995;w<=3051;w++)G[w]=0;for(w=3054;w<=3079;w++)G[w]=0;for(w=3081;w<=3088;w++)G[w]=0;for(w=3092;w<=3101;w++)G[w]=0;for(w=3106;w<=3138;w++)G[w]=0;for(w=3146;w<=3151;w++)G[w]=0;for(w=3153;w<=3166;w++)G[w]=0;for(w=3168;w<=3172;w++)G[w]=0;for(w=3174;w<=3203;w++)G[w]=0;for(w=3294;w<=3358;w++)G[w]=0;for(w=3367;w<=3403;w++)G[w]=0;for(w=3408;w<=3416;w++)G[w]=0;for(w=3417;w<=3438;w++)G[w]=2;for(w=3441;w<=3446;w++)G[w]=2;for(w=3447;w<=3450;w++)G[w]=0;for(w=3451;w<=3459;w++)G[w]=2;for(w=3460;w<=3478;w++)G[w]=0;for(w=3554;w<=3559;w++)G[w]=0;for(w=3560;w<=3570;w++)G[w]=2;for(w=3571;w<=3581;w++)G[w]=0;for(w=3594;w<=3597;w++)G[w]=0;for(w=3601;w<=3604;w++)G[w]=0;for(w=3637;w<=3639;w++)G[w]=0;for(w=3665;w<=3667;w++)G[w]=0;for(w=3693;w<=3695;w++)G[w]=0;for(w=3701;w<=3727;w++)G[w]=0;for(w=3728;w<=3739;w++)G[w]=2;for(w=3740;w<=3751;w++)G[w]=0;for(w=3753;w<=3760;w++)G[w]=2;for(w=3761;w<=3773;w++)G[w]=0;for(w=3775;w<=3777;w++)G[w]=0;for(w=3779;w<=3781;w++)G[w]=0;for(w=3783;w<=3785;w++)G[w]=0;for(w=3788;w<=3791;w++)G[w]=0;for(w=3797;w<=3802;w++)G[w]=0;for(w=3814;w<=3816;w++)G[w]=0;for(w=3825;w<=3829;w++)G[w]=0;for(w=3832;w<=3841;w++)G[w]=0;for(w=3844;w<=3852;w++)G[w]=0;for(w=3873;w<=3885;w++)G[w]=0;for(w=3890;w<=3893;w++)G[w]=0;for(w=3907;w<=3912;w++)G[w]=0;for(w=3942;w<=3950;w++)G[w]=0;for(w=3968;w<=3970;w++)G[w]=0;for(w=3973;w<=3976;w++)G[w]=0;for(w=3986;w<=3989;w++)G[w]=0;for(w=3994;w<=3997;w++)G[w]=0;for(w=4048;w<=4051;w++)G[w]=0;for(w=4056;w<=4063;w++)G[w]=0;for(w=4093;w<=4096;w++)G[w]=0;for(w=4390;w<=4398;w++)G[w]=0;for(w=4399;w<=4413;w++)G[w]=2;for(w=4418;w<=4433;w++)G[w]=2;for(w=4455;w<=4457;w++)G[w]=2;for(w=4484;w<=4489;w++)G[w]=0;for(w=4491;w<=4554;w++)G[w]=0;for(w=4568;w<=4589;w++)G[w]=0;for(w=4652;w<=4656;w++)G[w]=0;for(w=4766;w<=4800;w++)G[w]=0;for(w=5014;w<=5016;w++)G[w]=0;for(w=5069;w<=5072;w++)G[w]=0;for(w=5105;w<=5130;w++)G[w]=0;for(w=5167;w<=5188;w++)G[w]=0;for(w=5253;w<=5259;w++)G[w]=0;for(w=5269;w<=5275;w++)G[w]=0;for(w=5292;w<=5311;w++)G[w]=0;for(w=5329;w<=5331;w++)G[w]=0;for(w=5343;w<=5349;w++)G[w]=0;for(w=5355;w<=5357;w++)G[w]=0;for(w=5387;w<=5389;w++)G[w]=0;for(w=5459;w<=5463;w++)G[w]=0;for(w=5479;w<=5482;w++)G[w]=0;for(w=5518;w<=5520;w++)G[w]=0;for(w=5530;w<=5539;w++)G[w]=0;for(w=5550;w<=5552;w++)G[w]=0;for(w=5562;w<=5583;w++)G[w]=0;for(w=5623;w<=5625;w++)G[w]=2;for(w=5631;w<=5639;w++)G[w]=0;for(w=5649;w<=5653;w++)G[w]=0;for(w=5663;w<=5680;w++)G[w]=0;for(w=5682;w<=5685;w++)G[w]=0;for(w=5875;w<=5877;w++)G[w]=0;for(w=5896;w<=5899;w++)G[w]=0;for(w=5921;w<=5940;w++)G[w]=0;for(w=6050;w<=6125;w++)G[w]=0;for(w=6244;w<=6275;w++)G[w]=0;for(w=6328;w<=6348;w++)G[w]=0;for(w=6350;w<=6356;w++)G[w]=0;for(w=6366;w<=6372;w++)G[w]=0;for(w=6381;w<=6387;w++)G[w]=0;for(w=6393;w<=6404;w++)G[w]=0;for(w=6480;w<=6483;w++)G[w]=0;for(w=6511;w<=6514;w++)G[w]=0;for(w=6579;w<=6581;w++)G[w]=0;for(w=6619;w<=6624;w++)G[w]=0;for(w=6625;w<=6627;w++)G[w]=2;for(w=6628;w<=6632;w++)G[w]=0;for(w=6634;w<=6637;w++)G[w]=0;for(w=6669;w<=6692;w++)G[w]=0;for(w=6707;w<=6709;w++)G[w]=0;for(w=6720;w<=6723;w++)G[w]=0;for(w=6732;w<=6738;w++)G[w]=0;for(w=6931;w<=6933;w++)G[w]=0;for(w=6956;w<=6959;w++)G[w]=0;for(w=7005;w<=7007;w++)G[w]=0;for(w=7057;w<=7070;w++)G[w]=2;for(w=7074;w<=7082;w++)G[w]=0;for(w=7109;w<=7118;w++)G[w]=0;for(w=7119;w<=7127;w++)G[w]=1;for(w=7374;w<=7376;w++)G[w]=0;for(w=7528;w<=7586;w++)G[w]=0;for(w=7587;w<=7645;w++)G[w]=2;for(w=7692;w<=7696;w++)G[w]=0;for(w=7755;w<=7787;w++)G[w]=0;for(w=7791;w<=7795;w++)G[w]=0;for(w=7799;w<=7801;w++)G[w]=0;for(w=7803;w<=7805;w++)G[w]=0;for(w=7825;w<=7831;w++)G[w]=0;for(w=7845;w<=7859;w++)G[w]=0;for(w=8013;w<=8032;w++)G[w]=0;for(w=8065;w<=8068;w++)G[w]=1;for(w=8518;w<=8529;w++)G[w]=2;for(w=8533;w<=8536;w++)G[w]=2;for(w=8538;w<=8540;w++)G[w]=2;for(w=8677;w<=8679;w++)G[w]=0;for(w=8836;w<=8840;w++)G[w]=0;for(w=8857;w<=8859;w++)G[w]=0;for(w=8908;w<=8910;w++)G[w]=0;for(w=9154;w<=9159;w++)G[w]=0;for(w=9205;w<=9218;w++)G[w]=0;for(w=9271;w<=9273;w++)G[w]=0;for(w=9295;w<=9297;w++)G[w]=0;for(w=9356;w<=9360;w++)G[w]=0;for(w=9404;w<=9407;w++)G[w]=0;for(w=9476;w<=9482;w++)G[w]=0;for(w=9487;w<=9494;w++)G[w]=0;for(w=9697;w<=9699;w++)G[w]=0;for(w=9821;w<=9865;w++)G[w]=0;for(w=10285;w<=10291;w++)G[w]=0;for(w=10314;w<=10317;w++)G[w]=0;for(w=10448;w<=10465;w++)G[w]=0;for(w=10726;w<=10729;w++)G[w]=0;for(w=10731;w<=10733;w++)G[w]=0;for(w=11114;w<=11118;w++)G[w]=0;for(w=20004;w<=20032;w++)G[w]=0;for(w=20047;w<=20049;w++)G[w]=0;for(w=20062;w<=20092;w++)G[w]=0;for(w=20135;w<=20138;w++)G[w]=0;for(w=20248;w<=20258;w++)G[w]=0;for(w=20348;w<=20358;w++)G[w]=0;for(w=20436;w<=20440;w++)G[w]=0;for(w=20822;w<=20824;w++)G[w]=0;for(w=20904;w<=20932;w++)G[w]=0;for(w=20934;w<=20936;w++)G[w]=0;for(w=21004;w<=21032;w++)G[w]=0;for(w=21035;w<=21037;w++)G[w]=0;for(w=21095;w<=21097;w++)G[w]=0;for(w=21148;w<=21150;w++)G[w]=0;for(w=21207;w<=21264;w++)G[w]=0;for(w=21307;w<=21364;w++)G[w]=0;for(w=21413;w<=21423;w++)G[w]=0;for(w=21453;w<=21463;w++)G[w]=0;for(w=21473;w<=21483;w++)G[w]=0;for(w=21780;w<=21782;w++)G[w]=0;for(w=21891;w<=21894;w++)G[w]=0;for(w=21896;w<=21899;w++)G[w]=0;for(w=22171;w<=22177;w++)G[w]=0;for(w=22181;w<=22187;w++)G[w]=0;for(w=22191;w<=22197;w++)G[w]=0;for(w=22207;w<=22222;w++)G[w]=0;for(w=22229;w<=22232;w++)G[w]=0;for(w=22234;w<=22236;w++)G[w]=0;for(w=22243;w<=22250;w++)G[w]=0;for(w=22262;w<=22265;w++)G[w]=0;for(w=22307;w<=22322;w++)G[w]=0;for(w=22348;w<=22357;w++)G[w]=0;for(w=22407;w<=22422;w++)G[w]=0;for(w=22462;w<=22465;w++)G[w]=0;for(w=22521;w<=22525;w++)G[w]=0;for(w=22607;w<=22622;w++)G[w]=0;for(w=22641;w<=22646;w++)G[w]=0;for(w=22648;w<=22657;w++)G[w]=0;for(w=22707;w<=22722;w++)G[w]=0;for(w=22762;w<=22765;w++)G[w]=0;for(w=22807;w<=22822;w++)G[w]=0;for(w=22991;w<=22994;w++)G[w]=0;for(w=23028;w<=23038;w++)G[w]=0;for(w=23301;w<=23333;w++)G[w]=2;for(w=23830;w<=23853;w++)G[w]=0;for(w=23866;w<=23872;w++)G[w]=0;for(w=23877;w<=23884;w++)G[w]=0;for(w=23886;w<=23894;w++)G[w]=0;for(w=23946;w<=23948;w++)G[w]=0;for(w=24311;w<=24313;w++)G[w]=0;for(w=24342;w<=24347;w++)G[w]=0;for(w=24370;w<=24374;w++)G[w]=10;for(w=24375;w<=24381;w++)G[w]=0;for(w=24718;w<=24721;w++)G[w]=0;for(w=24817;w<=24821;w++)G[w]=0;for(w=24877;w<=24882;w++)G[w]=0;for(w=24891;w<=24893;w++)G[w]=0;for(w=25391;w<=25395;w++)G[w]=0;for(w=25828;w<=25838;w++)G[w]=0;for(w=26191;w<=26195;w++)G[w]=0;for(w=26391;w<=26393;w++)G[w]=0;for(w=26701;w<=26722;w++)G[w]=0;for(w=26729;w<=26799;w++)G[w]=2;for(w=26801;w<=26803;w++)G[w]=2;for(w=26811;w<=26813;w++)G[w]=2;for(w=26847;w<=26870;w++)G[w]=2;for(w=26891;w<=26899;w++)G[w]=0;for(w=26901;w<=26923;w++)G[w]=0;for(w=26929;w<=26946;w++)G[w]=0;for(w=26948;w<=26998;w++)G[w]=0;for(w=27037;w<=27040;w++)G[w]=0;for(w=27205;w<=27232;w++)G[w]=0;for(w=27258;w<=27260;w++)G[w]=0;for(w=27391;w<=27398;w++)G[w]=0;for(w=27561;w<=27564;w++)G[w]=0;for(w=27571;w<=27574;w++)G[w]=0;for(w=27581;w<=27584;w++)G[w]=0;for(w=27591;w<=27594;w++)G[w]=0;for(w=27700;w<=27707;w++)G[w]=0;for(w=28191;w<=28193;w++)G[w]=0;for(w=28348;w<=28358;w++)G[w]=0;for(w=28402;w<=28432;w++)G[w]=0;for(w=28462;w<=28492;w++)G[w]=0;for(w=29118;w<=29122;w++)G[w]=0;for(w=29168;w<=29172;w++)G[w]=0;for(w=29177;w<=29185;w++)G[w]=0;for(w=29187;w<=29195;w++)G[w]=0;for(w=29900;w<=29903;w++)G[w]=0;for(w=30161;w<=30179;w++)G[w]=0;for(w=30491;w<=30494;w++)G[w]=0;for(w=30729;w<=30732;w++)G[w]=0;for(w=31251;w<=31259;w++)G[w]=0;for(w=31265;w<=31268;w++)G[w]=0;for(w=31275;w<=31279;w++)G[w]=0;for(w=31281;w<=31297;w++)G[w]=0;for(w=31461;w<=31469;w++)G[w]=0;for(w=31491;w<=31495;w++)G[w]=0;for(w=31917;w<=31922;w++)G[w]=0;for(w=31965;w<=32e3;w++)G[w]=0;for(w=32001;w<=32003;w++)G[w]=2;for(w=32005;w<=32031;w++)G[w]=2;for(w=32033;w<=32060;w++)G[w]=2;for(w=32064;w<=32067;w++)G[w]=2;for(w=32074;w<=32077;w++)G[w]=2;for(w=32081;w<=32086;w++)G[w]=0;for(w=32107;w<=32130;w++)G[w]=0;for(w=32133;w<=32159;w++)G[w]=0;for(w=32164;w<=32167;w++)G[w]=2;for(w=32180;w<=32199;w++)G[w]=0;for(w=32201;w<=32260;w++)G[w]=0;for(w=32301;w<=32360;w++)G[w]=0;for(w=32401;w<=32460;w++)G[w]=0;for(w=32501;w<=32560;w++)G[w]=0;for(w=32601;w<=32662;w++)G[w]=0;for(w=32664;w<=32667;w++)G[w]=2;for(w=32701;w<=32761;w++)G[w]=0;for(w=53001;w<=53004;w++)G[w]=0;for(w=53008;w<=53019;w++)G[w]=0;for(w=53021;w<=53032;w++)G[w]=0;for(w=53034;w<=53037;w++)G[w]=0;for(w=53042;w<=53046;w++)G[w]=0;for(w=53074;w<=53080;w++)G[w]=0;for(w=54001;w<=54004;w++)G[w]=0;for(w=54008;w<=54019;w++)G[w]=0;for(w=54021;w<=54032;w++)G[w]=0;for(w=54034;w<=54037;w++)G[w]=0;for(w=54042;w<=54046;w++)G[w]=0;for(w=54048;w<=54053;w++)G[w]=0;for(w=54074;w<=54080;w++)G[w]=0;for(w=54090;w<=54096;w++)G[w]=0;for(w=54098;w<=54101;w++)G[w]=0;for(w=65161;w<=65163;w++)G[w]=0;for(w=102001;w<=102040;w++)G[w]=0;for(w=102042;w<=102063;w++)G[w]=0;for(w=102065;w<=102067;w++)G[w]=0;for(w=102070;w<=102117;w++)G[w]=0;for(w=102122;w<=102216;w++)G[w]=0;for(w=102221;w<=102377;w++)G[w]=0;for(w=102382;w<=102388;w++)G[w]=0;for(w=102389;w<=102398;w++)G[w]=2;for(w=102399;w<=102444;w++)G[w]=0;for(w=102445;w<=102447;w++)G[w]=2;for(w=102448;w<=102458;w++)G[w]=0;for(w=102459;w<=102468;w++)G[w]=2;for(w=102469;w<=102499;w++)G[w]=0;for(w=102500;w<=102519;w++)G[w]=1;for(w=102520;w<=102524;w++)G[w]=0;for(w=102525;w<=102529;w++)G[w]=2;for(w=102530;w<=102588;w++)G[w]=0;for(w=102590;w<=102598;w++)G[w]=0;for(w=102601;w<=102603;w++)G[w]=0;for(w=102605;w<=102628;w++)G[w]=0;for(w=102629;w<=102646;w++)G[w]=2;for(w=102648;w<=102700;w++)G[w]=2;for(w=102701;w<=102703;w++)G[w]=0;for(w=102707;w<=102730;w++)G[w]=2;for(w=102733;w<=102758;w++)G[w]=2;for(w=102767;w<=102900;w++)G[w]=0;for(w=102901;w<=102933;w++)G[w]=2;for(w=102934;w<=102950;w++)G[w]=13;for(w=102951;w<=102963;w++)G[w]=0;for(w=102965;w<=102969;w++)G[w]=0;for(w=102971;w<=102973;w++)G[w]=0;for(w=102975;w<=102989;w++)G[w]=0;for(w=102990;w<=102992;w++)G[w]=1;for(w=102997;w<=103002;w++)G[w]=0;for(w=103003;w<=103008;w++)G[w]=2;for(w=103009;w<=103011;w++)G[w]=0;for(w=103012;w<=103014;w++)G[w]=2;for(w=103019;w<=103021;w++)G[w]=0;for(w=103022;w<=103024;w++)G[w]=2;for(w=103029;w<=103031;w++)G[w]=0;for(w=103032;w<=103034;w++)G[w]=2;for(w=103065;w<=103068;w++)G[w]=0;for(w=103074;w<=103076;w++)G[w]=0;for(w=103077;w<=103079;w++)G[w]=1;for(w=103080;w<=103082;w++)G[w]=0;for(w=103083;w<=103085;w++)G[w]=2;for(w=103090;w<=103093;w++)G[w]=0;for(w=103097;w<=103099;w++)G[w]=0;for(w=103100;w<=103102;w++)G[w]=2;for(w=103107;w<=103109;w++)G[w]=0;for(w=103110;w<=103112;w++)G[w]=2;for(w=103113;w<=103116;w++)G[w]=0;for(w=103117;w<=103120;w++)G[w]=2;for(w=103153;w<=103157;w++)G[w]=0;for(w=103158;w<=103162;w++)G[w]=2;for(w=103163;w<=103165;w++)G[w]=0;for(w=103166;w<=103168;w++)G[w]=1;for(w=103169;w<=103171;w++)G[w]=2;for(w=103186;w<=103188;w++)G[w]=0;for(w=103189;w<=103191;w++)G[w]=2;for(w=103192;w<=103195;w++)G[w]=0;for(w=103196;w<=103199;w++)G[w]=2;for(w=103200;w<=103224;w++)G[w]=0;for(w=103225;w<=103227;w++)G[w]=1;for(w=103232;w<=103237;w++)G[w]=0;for(w=103238;w<=103243;w++)G[w]=2;for(w=103244;w<=103246;w++)G[w]=0;for(w=103247;w<=103249;w++)G[w]=2;for(w=103254;w<=103256;w++)G[w]=0;for(w=103257;w<=103259;w++)G[w]=2;for(w=103264;w<=103266;w++)G[w]=0;for(w=103267;w<=103269;w++)G[w]=2;for(w=103300;w<=103375;w++)G[w]=0;for(w=103381;w<=103383;w++)G[w]=0;for(w=103384;w<=103386;w++)G[w]=1;for(w=103387;w<=103389;w++)G[w]=0;for(w=103390;w<=103392;w++)G[w]=2;for(w=103397;w<=103399;w++)G[w]=0;for(w=103400;w<=103471;w++)G[w]=2;for(w=103476;w<=103478;w++)G[w]=0;for(w=103479;w<=103481;w++)G[w]=2;for(w=103486;w<=103488;w++)G[w]=0;for(w=103489;w<=103491;w++)G[w]=2;for(w=103492;w<=103495;w++)G[w]=0;for(w=103496;w<=103499;w++)G[w]=2;for(w=103528;w<=103543;w++)G[w]=0;for(w=103544;w<=103548;w++)G[w]=2;for(w=103549;w<=103551;w++)G[w]=0;for(w=103552;w<=103554;w++)G[w]=1;for(w=103555;w<=103557;w++)G[w]=2;for(w=103558;w<=103560;w++)G[w]=0;for(w=103571;w<=103573;w++)G[w]=0;for(w=103574;w<=103576;w++)G[w]=2;for(w=103577;w<=103580;w++)G[w]=0;for(w=103581;w<=103583;w++)G[w]=2;for(w=103595;w<=103694;w++)G[w]=0;for(w=103696;w<=103699;w++)G[w]=0;for(w=103700;w<=103793;w++)G[w]=2;for(w=103794;w<=103890;w++)G[w]=0;for(w=103891;w<=103896;w++)G[w]=2;for(w=103900;w<=103971;w++)G[w]=2;for(w=103972;w<=103977;w++)G[w]=0;for(w=112e3;w<=112101;w++)G[w]=0;const Qfe=[102100,102113,3857,3785,900913],X3e=[104905,104971],Q3e=[104903],K3e=[4326,...Qfe,...X3e,...Q3e],fE=[-20037508342788905e-9,20037508342788905e-9],x8=[-20037508342787e-6,20037508342787e-6],DV={wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:fE,origin:x8,dx:1e-5},Kfe={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:fE,origin:x8,dx:1e-5},102100:DV,3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:fE,origin:x8,dx:1e-5},3857:DV,4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},900913:DV,104903:{wkTemplate:'GEOGCS["GCS_Moon_2000",DATUM["D_Moon_2000",SPHEROID["Moon_2000_IAU_IAG",1737400,0,AUTHORITY["ESRI","107903"]],AUTHORITY["ESRI","106903"]],PRIMEM["Reference_Meridian",0,AUTHORITY["ESRI","108900"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],AUTHORITY["ESRI","104903"]]',valid:[-180,180],origin:[-180,90],dx:1e-5}};function Cs(t,e){if(t===e)return!0;if(t==null||e==null)return!1;const i=t.wkid,r=e.wkid;if(i!=null||r!=null){if(i===r||Dp(t)&&Dp(e))return!0;const a=t.latestWkid;if(a!=null&&r===a)return!0;const o=e.latestWkid;return o!=null&&i===o}let n,s;return t.wkt2&&e.wkt2?(n=t.wkt2,s=e.wkt2):t.wkt&&e.wkt&&(n=t.wkt,s=e.wkt),!(!n||!s)&&n.toUpperCase()===s.toUpperCase()}function Bo(t){const e=t==null?void 0:t.wkid;return e!=null&&e>=2e3&&Kfe[e]||null}function ZS(t){if(!t)return;const{wkid:e,vcsWkid:i}=t;if(e)return i?JSON.stringify({wkid:e,vcsWkid:i}):String(e);const r=t.wkt||t.wkt2;return JSON.stringify(r?i?{wkt:r,vcsWkid:i}:{wkt:r}:{})}function DT(t){if(!bc(t))return!1;const{wkid:e}=t;if(e)return G[e]==null;const i=t.wkt2||t.wkt;return!!i&&/^\s*(?:GEOGCS|GEOGCRS|GEOGRAPHICCRS)/i.test(i)}function eLe(t){return!(eme(t)||tme(t))}function t_(t){return(t==null?void 0:t.wkid)===4326}function $1t(t){return/^\s*(?:GEOD|GEODETIC|GEOG|GEOGRAPHIC|PROJ|PROJECTED|VERT|VERTICAL|ENG|ENGINEERING|PARAMETRIC|TIME|DERIVEDPROJ|COMPOUND|BOUND)CRS/i.test(t)}function Cie(t){return(t==null?void 0:t.wkid)===4490}function Dp(t){const e=t==null?void 0:t.wkid;return e!=null&&e>=2e3&&Qfe.includes(e)}function tLe(t){return(t==null?void 0:t.wkid)===32662}function wD(t){return t===104971||t===104905}function eme(t){return wD(t==null?void 0:t.wkid)}function _D(t){return t===104903}function tme(t){return _D(t==null?void 0:t.wkid)}function iLe(t){const e=t==null?void 0:t.wkid;return e!=null&&e>=2e3&&K3e.includes(e)}function bc(t){if(t==null)return!1;const e=t.wkid;return e!=null&&e>=2e3||t.wkt2!=null||t.wkt!=null}const ime={wkid:4326,wkt:Ho(Kfe[4326].wkTemplate,{Central_Meridian:"0.0"})},rme={wkid:102100,latestWkid:3857},rLe={wkid:32662};function lZ(t){return{wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${t.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`}}const nLe=lZ(Mn),cZ=lZ(Tp),uZ=lZ(Cv),sLe={wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${Mn.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`},aLe=cZ.wkt.toUpperCase(),oLe=uZ.wkt.toUpperCase();function lLe(t){if(t!=null&&bc(t)){const e=t.wkid,i=t.wkt2??t.wkt;if(wD(e))return Tp;const r=i==null?void 0:i.toUpperCase();if(i&&r===aLe)return Tp;if(_D(e)||r&&r===oLe)return Cv}return Mn}function S1t(t){return wD(t)?Tp:_D(t)?Cv:Mn}function fR(t){return Cs(t,nLe)}function Av(t){return fR(t)||Cs(t,cZ)||Cs(t,uZ)}const nme=39.37,cLe=Mn.radius*Math.PI/200,sme=/(?:LENGTH)?UNIT\[([^\]]+)]]$/i,YS=G,ame=/UNIT\[([^\]]+)]/i,uLe=new Set([4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104025,104026,104139,104140]),dLe=Es()({millimeter:"millimeters",centimeter:"centimeters",meter:"meters",meter_german:"german-meters",kilometer:"kilometers",decimeter:"decimeters",micrometer:"micrometers",nanometer:"nanometers","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",fathom:"fathoms",nautical_mile:"nautical-miles",chain_us:"us-chains",link_us:"us-links",mile_us:"us-miles",yard_clarke:"clarke-yards",chain_clarke:"clarke-chains",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",link_sears:"sears-links",yard_benoit_1895_a:"benoit-1895-a-yards",foot_benoit_1895_a:"benoit-1895-a-feet",chain_benoit_1895_a:"benoit-1895-a-chains",link_benoit_1895_a:"benoit-1895-a-links",yard_benoit_1895_b:"benoit-1895-b-yards",foot_benoit_1895_b:"benoit-1895-b-feet",chain_benoit_1895_b:"benoit-1895-b-chains",link_benoit_1895_b:"benoit-1895-b-links",foot_1865:"1865-feet",foot_indian:"indian-feet",foot_indian_1937:"indian-1937-feet",foot_indian_1962:"indian-1962-feet",foot_indian_1975:"indian-1975-feet",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",yard_indian_1962:"indian-1962-yards",yard_indian_1975:"indian-1975-yards",statute_mile:"statute-miles",foot_gold_coast:"gold-coast-feet",foot_british_1936:"british-1936-feet",yard:"yards",chain:"chains",link:"links",yard_sears_1922_truncated:"sears-1922-truncated-yards",foot_sears_1922_truncated:"sears-1922-truncated-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains",link_sears_1922_truncated:"sears-1922-truncated-links",yard_us:"us-yards",inch:"inches",inch_us:"us-inches",rod:"rods",rod_us:"us-rods",nautical_mile_us:"us-nautical-miles",nautical_mile_uk:"uk-nautical-miles",smoot:"smoots",vara_tx:"tx-vara",point:"points"}),Bu=t=>t*t,Gg=t=>t*t*t,mE={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},meters:{inBaseUnits:1},feet:{inBaseUnits:.3048},"us-feet":{inBaseUnits:.3048006096012192},"clarke-feet":{inBaseUnits:.3047972654},fathoms:{inBaseUnits:1.8288},"nautical-miles":{inBaseUnits:1852},"german-meters":{inBaseUnits:1.0000135965},"us-chains":{inBaseUnits:20.11684023368047},"us-links":{inBaseUnits:.2011684023368047},"us-miles":{inBaseUnits:1609.347218694438},kilometers:{inBaseUnits:1e3},"clarke-yards":{inBaseUnits:.9143917962},"clarke-chains":{inBaseUnits:20.1166195164},"clarke-links":{inBaseUnits:.201166195164},"sears-yards":{inBaseUnits:.9143984146160287},"sears-feet":{inBaseUnits:.3047994715386762},"sears-chains":{inBaseUnits:20.11676512155263},"sears-links":{inBaseUnits:.2011676512155263},"benoit-1895-a-yards":{inBaseUnits:.9143992},"benoit-1895-a-feet":{inBaseUnits:.3047997333333333},"benoit-1895-a-chains":{inBaseUnits:20.1167824},"benoit-1895-a-links":{inBaseUnits:.201167824},"benoit-1895-b-yards":{inBaseUnits:.9143992042898124},"benoit-1895-b-feet":{inBaseUnits:.3047997347632708},"benoit-1895-b-chains":{inBaseUnits:20.11678249437587},"benoit-1895-b-links":{inBaseUnits:.2011678249437587},"1865-feet":{inBaseUnits:.3048008333333334},"indian-feet":{inBaseUnits:.3047995102481469},"indian-1937-feet":{inBaseUnits:.30479841},"indian-1962-feet":{inBaseUnits:.3047996},"indian-1975-feet":{inBaseUnits:.3047995},"indian-yards":{inBaseUnits:.9143985307444408},"indian-1937-yards":{inBaseUnits:.91439523},"indian-1962-yards":{inBaseUnits:.9143988},"indian-1975-yards":{inBaseUnits:.9143985},miles:{inBaseUnits:1609.344},"statute-miles":{inBaseUnits:1609.344},"gold-coast-feet":{inBaseUnits:.3047997101815088},"british-1936-feet":{inBaseUnits:.3048007491},yards:{inBaseUnits:.9144},chains:{inBaseUnits:20.1168},links:{inBaseUnits:.201168},"sears-1922-truncated-yards":{inBaseUnits:.914398},"sears-1922-truncated-feet":{inBaseUnits:.3047993333333334},"sears-1922-truncated-chains":{inBaseUnits:20.116756},"sears-1922-truncated-links":{inBaseUnits:.20116756},"us-yards":{inBaseUnits:.9144018288036576},decimeters:{inBaseUnits:.1},inches:{inBaseUnits:.0254},"us-inches":{inBaseUnits:.0254000508001016},rods:{inBaseUnits:5.0292},"us-rods":{inBaseUnits:5.029210058420118},"us-nautical-miles":{inBaseUnits:1853.248},"uk-nautical-miles":{inBaseUnits:1853.184},smoots:{inBaseUnits:1.7018},"tx-vara":{inBaseUnits:.8466683600033867},points:{inBaseUnits:.0003527777777777778},micrometers:{inBaseUnits:1e-6},nanometers:{inBaseUnits:1e-9},"50-kilometers":{inBaseUnits:5e4},"150-kilometers":{inBaseUnits:15e4}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:Bu(.001)},"square-centimeters":{inBaseUnits:Bu(.01)},"square-decimeters":{inBaseUnits:Bu(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:Bu(1e3)},"square-inches":{inBaseUnits:Bu(.0254)},"square-feet":{inBaseUnits:Bu(.3048)},"square-yards":{inBaseUnits:Bu(.9144)},"square-miles":{inBaseUnits:Bu(1609.344)},"square-nautical-miles":{inBaseUnits:Bu(1852)},"square-us-feet":{inBaseUnits:Bu(1200/3937)},acres:{inBaseUnits:.0015625*Bu(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*Gg(.001)},"cubic-centimeters":{inBaseUnits:1e3*Gg(.01)},"cubic-decimeters":{inBaseUnits:1e3*Gg(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*Gg(1e3)},"cubic-inches":{inBaseUnits:1e3*Gg(.0254)},"cubic-feet":{inBaseUnits:1e3*Gg(.3048)},"cubic-yards":{inBaseUnits:1e3*Gg(.9144)},"cubic-miles":{inBaseUnits:1e3*Gg(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},hLe=(()=>{const t={};for(const e in mE)for(const i in mE[e].units)t[i]=e;return t})();function pLe(t,e,i){return t*mE[i].units[e].inBaseUnits}function fLe(t,e,i){return t/mE[i].units[e].inBaseUnits}const mLe=["inches","feet","yards","miles","nautical-miles","us-feet","millimeters","centimeters","decimeters","meters","kilometers"],gLe=["metric","imperial"],ome=[...gLe,...mLe],yLe=new Map([["meters","square-meters"],["feet","square-feet"],["us-feet","square-us-feet"]]);function i_(t){const e=hLe[t];if(!e)throw new Error("unknown type");return e}function Eie(t,e=null){return e=e||i_(t),mE[e].baseUnit===t}function Ni(t,e,i){if(e===i)return t;const r=i_(e);if(r!==i_(i))throw new Error("incompatible units");const n=Eie(e,r)?t:pLe(t,e,r);return Eie(i,r)?n:fLe(n,i,r)}function T1t(t,e,i,r=!1){if(!r&&DT(e))throw new Error("Unable to convert from an angular unit to a linear unit.");const n=f_(e);return n!==i&&(t=n?Ni(t,n,i):Ni(t*=$u(e),"meters",i)),t}function I1t(t,e,i,r=!1){if(!r&&DT(i))throw new Error("Unable to convert from a linear unit to an angular unit.");const n=f_(i);return e!==n&&(t=n?Ni(t,e,n):Ni(t,e,"meters")/$u(i)),t}function vLe(t){switch(t){case"metric":return"meters";case"imperial":return"feet";default:return t}}function M1t(t){return vLe(t)}function C1t(t){switch(t){case"metric":return"square-meters";case"imperial":return"square-feet";default:return t}}function E1t(t,e,i){switch(i){case"metric":return dZ(t,e);case"imperial":return pZ(t,e);default:return i}}function k1t(t,e,i){switch(i){case"metric":return hZ(t,e);case"imperial":return fZ(t,e);default:return i}}function dZ(t,e){const i=Ni(t,e,"meters");return Math.abs(i)<3e3?"meters":"kilometers"}function hZ(t,e){const i=Ni(t,e,"meters");return Math.abs(i)<1e5?"meters":"kilometers"}function pZ(t,e){const i=Ni(t,e,"feet");return Math.abs(i)<1e3?"feet":"miles"}function fZ(t,e){const i=Ni(t,e,"feet");return Math.abs(i)<1e5?"feet":"miles"}function bLe(t,e){const i=Ni(t,e,"square-meters");return Math.abs(i)<3e6?"square-meters":"square-kilometers"}function wLe(t,e){const i=Ni(t,e,"square-feet");return Math.abs(i)<1e6?"square-feet":"square-miles"}function _Le(t,e,i){return Ni(t,e,"meters")/(i*Math.PI/180)}function mZ(t){return dLe.fromJSON(t.toLowerCase())||null}function JS(t){if(t!=null&&!eLe(t))return 1;const e=$u(t);return e>1e5?1:e}function lme(t){return $u(t)>=lLe(t).metersPerDegree?"meters":f_(t)}function $u(t,e=Mn.metersPerDegree){return xLe(t,!0)??e}function xLe(t,e=!1){const i=(t==null?void 0:t.wkid)??null,r=(t==null?void 0:t.wkt2)??(t==null?void 0:t.wkt)??null;let n=null;if(i){if(wD(i))return Tp.metersPerDegree;if(_D(i))return Cv.metersPerDegree;n=YS.values[YS[i]],!n&&e&&uLe.has(i)&&(n=cLe)}else r&&(dme(r)?n=kie(sme.exec(r),n):ume(r)&&(n=kie(ame.exec(r),n)));return n}function A1t(t){return DT(t)?1:$u(t)}function kie(t,e){return t!=null&&t[1]?cme(t[1]):e}function cme(t){return parseFloat(t.split(",")[1])}function f_(t){const e=(t==null?void 0:t.wkid)??null,i=(t==null?void 0:t.wkt2)??(t==null?void 0:t.wkt)??null;let r=null;if(e)r=YS.units[YS[e]];else if(i){const n=dme(i)?sme:ume(i)?ame:null;if(n){const s=n.exec(i);s!=null&&s[1]&&(r=SLe(s[1]))}}return r!=null?mZ(r):null}function P1t(t){const e=f_(t);return e!=null&&ome.includes(e)?e:null}function O1t(t){const e=lme(t);return e!=null&&ome.includes(e)?e:null}function L1t(t){const e=f_(t);return e==null?null:yLe.get(e)}function ume(t){return/^GEOCCS/i.test(t)}function dme(t){return/^\s*(?:PROJCS|PROJCRS|PROJECTEDCRS)/i.test(t)}const $Le=1e-7;function SLe(t){const e=/[\\"']([^\\"']+)/.exec(t);let i=e==null?void 0:e[1];if(!i||!mZ(i)){const r=cme(t);i=null;const n=YS.values;for(let s=0;s<n.length;++s)if(Math.abs(r-n[s])<$Le){i=YS.units[s];break}}return i}function F1t(t){const e=f_(t);if(e==null)return null;switch(e){case"feet":case"us-feet":case"clarke-feet":case"fathoms":case"nautical-miles":case"us-chains":case"us-links":case"us-miles":case"clarke-yards":case"clarke-chains":case"clarke-links":case"sears-yards":case"sears-feet":case"sears-chains":case"sears-links":case"benoit-1895-a-yards":case"benoit-1895-a-feet":case"benoit-1895-a-chains":case"benoit-1895-a-links":case"benoit-1895-b-yards":case"benoit-1895-b-feet":case"benoit-1895-b-chains":case"benoit-1895-b-links":case"1865-feet":case"indian-feet":case"indian-1937-feet":case"indian-1962-feet":case"indian-1975-feet":case"indian-yards":case"indian-1937-yards":case"indian-1962-yards":case"indian-1975-yards":case"statute-miles":case"gold-coast-feet":case"british-1936-feet":case"yards":case"chains":case"links":case"sears-1922-truncated-yards":case"sears-1922-truncated-feet":case"sears-1922-truncated-chains":case"sears-1922-truncated-links":case"us-yards":case"inches":case"us-inches":case"rods":case"us-rods":case"us-nautical-miles":case"uk-nautical-miles":case"smoots":case"tx-vara":case"points":return"imperial";case"millimeters":case"centimeters":case"meters":case"german-meters":case"kilometers":case"decimeters":case"micrometers":case"nanometers":case"50-kilometers":case"150-kilometers":return"metric"}return null}const TLe={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},ILe={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},MLe={esriDUDecimalDegrees:"degrees",esriDURadians:"radians"},CLe=Es()(TLe),ELe=Es()(ILe),R1t=Es()(MLe);var mh,Zh;let tt=(Zh=class extends $e{static fromJSON(e){if(!e)return null;if((e==null?void 0:e.wkid)===102100)return mh.WebMercator;if((e==null?void 0:e.wkid)===4326)return mh.WGS84;const i=new mh;return i.read(e),i}constructor(e){super(e),this.latestWkid=null,this.wkid=null,this.wkt=null,this.wkt2=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}normalizeCtorArgs(e){return e&&typeof e=="object"?e:{[typeof e=="string"?"wkt":"wkid"]:e}}get isWGS84(){return t_(this)}get isWebMercator(){return Dp(this)}get isGeographic(){return DT(this)}get isWrappable(){return iLe(this)}get metersPerUnit(){return $u(this)}get unit(){return f_(this)||(this.isGeographic?"degrees":null)}writeWkt(e,i){this.wkid||(i.wkt=e)}clone(){if(this===mh.WGS84)return new mh(ime);if(this===mh.WebMercator)return new mh(rme);const e=new mh;return this.wkid!=null?(e.wkid=this.wkid,this.latestWkid!=null&&(e.latestWkid=this.latestWkid),this.vcsWkid!=null&&(e.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(e.latestVcsWkid=this.latestVcsWkid)):(this.wkt!=null&&(e.wkt=this.wkt),this.wkt2!=null&&(e.wkt2=this.wkt2)),this.imageCoordinateSystem&&(e.imageCoordinateSystem=he(this.imageCoordinateSystem)),e}equals(e){if(e==null)return!1;if(this.imageCoordinateSystem||e.imageCoordinateSystem){if(this.imageCoordinateSystem==null||e.imageCoordinateSystem==null)return!1;const{id:i,referenceServiceName:r}=e.imageCoordinateSystem,{geodataXform:n}=e.imageCoordinateSystem,s=this.imageCoordinateSystem;return i==null||n?JSON.stringify(s)===JSON.stringify(e.imageCoordinateSystem):r?s.id===i&&s.referenceServiceName===r:s.id===i}return Cs(this,e)}toJSON(e){return this.write(void 0,e)}},mh=Zh,Zh.GCS_NAD_1927=null,Zh.WGS84=null,Zh.WebMercator=null,Zh.PlateCarree=null,Zh);d([f({readOnly:!0})],tt.prototype,"isWGS84",null),d([f({readOnly:!0})],tt.prototype,"isWebMercator",null),d([f({readOnly:!0})],tt.prototype,"isGeographic",null),d([f({readOnly:!0})],tt.prototype,"isWrappable",null),d([f({type:ei,json:{write:!0}})],tt.prototype,"latestWkid",void 0),d([f({readOnly:!0})],tt.prototype,"metersPerUnit",null),d([f({readOnly:!0})],tt.prototype,"unit",null),d([f({type:ei,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt==null}}}}}}})],tt.prototype,"wkid",void 0),d([f({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid==null}}}}}}})],tt.prototype,"wkt",void 0),d([Ge("wkt"),Ge("web-scene","wkt")],tt.prototype,"writeWkt",null),d([f({type:String,json:{write:!1}})],tt.prototype,"wkt2",void 0),d([f({type:ei,json:{write:!0}})],tt.prototype,"vcsWkid",void 0),d([f({type:ei,json:{write:!0}})],tt.prototype,"latestVcsWkid",void 0),d([f()],tt.prototype,"imageCoordinateSystem",void 0),tt=mh=d([V("esri.geometry.SpatialReference")],tt),tt.prototype.toJSON.isDefaultToJSON=!0,tt.GCS_NAD_1927=et.freeze(new tt({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'})),tt.WGS84=et.freeze(new tt(ime)),tt.WebMercator=et.freeze(new tt(rme)),tt.PlateCarree=et.freeze(new tt(rLe));let Rs=class extends $e{constructor(...e){super(...e),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=tt.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(e,i){if(e instanceof tt)return e;if(e!=null){const r=new tt;return r.read(e,i),r}return e}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(e){return this.cache[e]}setCacheValue(e,i){this.cache[e]=i}};d([f()],Rs.prototype,"type",void 0),d([f({readOnly:!0})],Rs.prototype,"cache",null),d([f({readOnly:!0})],Rs.prototype,"extent",null),d([f({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Rs.prototype,"hasM",void 0),d([f({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Rs.prototype,"hasZ",void 0),d([f({type:tt,json:{write:!0},value:tt.WGS84})],Rs.prototype,"spatialReference",void 0),d([je("spatialReference")],Rs.prototype,"readSpatialReference",null),Rs=d([V("esri.geometry.Geometry")],Rs);function XS(t){if(t&&typeof t=="object"&&"type"in t&&t.type==="mesh")throw new ae("internal:mesh","Mesh geometries are not supported for this operation")}function kLe(t){t.forEach(XS)}const ALe=57.29577951308232,PLe=.017453292519943;function Aie(t){return t*ALe}function Pie(t){return t*PLe}function N1t(t){return Math.PI/2-2*Math.atan(Math.exp(-t/Mn.radius))}function $8(t){return t.wkid!=null||t.wkt!=null}const jV=[0,0];function mR(t,e,i,r,n){const s=t,a=n;if(a.spatialReference=i,"x"in s&&"x"in a)[a.x,a.y]=e(s.x,s.y,jV,r);else if("xmin"in s&&"xmin"in a)[a.xmin,a.ymin]=e(s.xmin,s.ymin,jV,r),[a.xmax,a.ymax]=e(s.xmax,s.ymax,jV,r);else if("paths"in s&&"paths"in a||"rings"in s&&"rings"in a){const o="paths"in s?s.paths:s.rings,l=[];let c;for(let h=0;h<o.length;h++){const m=o[h];c=[],l.push(c);for(let g=0;g<m.length;g++)c.push(e(m[g][0],m[g][1],[0,0],r)),m[g].length>2&&c[g].push(m[g][2]),m[g].length>3&&c[g].push(m[g][3])}"paths"in a?a.paths=l:a.rings=l}else if("points"in s&&"points"in a){const o=s.points,l=[];for(let c=0;c<o.length;c++)l[c]=e(o[c][0],o[c][1],[0,0],r),o[c].length>2&&l[c].push(o[c][2]),o[c].length>3&&l[c].push(o[c][3]);a.points=l}return n}function B3(t,e){const i=t&&($8(t)?t:t.spatialReference),r=e&&($8(e)?e:e.spatialReference);return!(t&&"type"in t&&t.type==="mesh"||e&&"type"in e&&e.type==="mesh"||!i||!r)&&(!!Cs(r,i)||Dp(r)&&t_(i)||Dp(i)&&t_(r))}function xD(t,e){if(t==null)return null;const i=t.spatialReference,r=e&&($8(e)?e:e.spatialReference);return B3(i,r)?Cs(i,r)?he(t):Dp(r)?mR(t,f$,tt.WebMercator,!1,he(t)):t_(r)?mR(t,$D,tt.WGS84,!1,he(t)):null:null}function f$(t,e,i=[0,0]){e>89.99999?e=89.99999:e<-89.99999&&(e=-89.99999);const r=Pie(e);return i[0]=Pie(t)*Mn.radius,i[1]=Mn.halfSemiMajorAxis*Math.log((1+Math.sin(r))/(1-Math.sin(r))),i}function $D(t,e,i=[0,0],r=!1){if(t===fE[0])i[0]=-180;else if(t===fE[1])i[0]=180;else{const n=Aie(t/Mn.radius);i[0]=r?n:n-360*Math.floor((n+180)/360)}return i[1]=Aie(Math.PI/2-2*Math.atan(Math.exp(-e/Mn.radius))),i}function Dm(t,e=!1,i=he(t)){return XS(t),XS(i),mR(t,f$,tt.WebMercator,e,i)}function m$(t,e=!1,i=he(t)){return XS(t),XS(i),mR(t,$D,tt.WGS84,e,i)}function hme(t,e){const i=t.x-e.x,r=t.y-e.y,n=t.z!=null&&e.z!=null?t.z-e.z:0;return Math.sqrt(i*i+r*r+n*n)}function OLe(t){var e;return((e=pme(t,fme))==null?void 0:e[0])??null}function LLe(t){var e;return((e=pme(t,fme))==null?void 0:e[1])??null}function pme({x:t,y:e,spatialReference:i},r=[0,0]){if(i){if(Dp(i))return $D(t,e,r);if(DT(i))return r[0]=t,r[1]=e,r}return null}const fme=[0,0];var q3;const VV=[0,0];function Oie(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}let St=q3=class extends Rs{static copy(t,e){e._set("x",t._get("x")),e._set("y",t._get("y")),e._set("z",t._get("z")),e._set("m",t._get("m"));const i=t._get("spatialReference");e._set("spatialReference",et.isFrozen(i)?i:i.clone())}constructor(...t){super(...t),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}normalizeCtorArgs(t,e,i,r,n){let s;if(Array.isArray(t))s=t,n=e,t=s[0],e=s[1],i=s[2],r=s[3];else if(t&&typeof t=="object"){if(s=t,t=s.x!=null?s.x:s.longitude,e=s.y!=null?s.y:s.latitude,i=s.z,r=s.m,(n=s.spatialReference)&&n.declaredClass!=="esri.geometry.SpatialReference"&&(n=new tt(n)),s.longitude!=null||s.latitude!=null){if(s.longitude==null)Ie.getLogger(this).warn(".longitude=","Latitude was defined without longitude");else if(s.latitude==null)Ie.getLogger(this).warn(".latitude=","Longitude was defined without latitude");else if(!s.declaredClass&&(n!=null&&n.isWebMercator)){const o=f$(s.longitude,s.latitude,VV);t=o[0],e=o[1]}}}else Oie(i)?(n=i,i=null):Oie(r)&&(n=r,r=null);const a={x:t,y:e};return a.x==null&&a.y!=null?Ie.getLogger(this).warn(".y=","Y coordinate was defined without an X coordinate"):a.y==null&&a.x!=null&&Ie.getLogger(this).warn(".x=","X coordinate was defined without a Y coordinate"),n!=null&&(a.spatialReference=n),i!=null&&(a.z=i),r!=null&&(a.m=r),a}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(t){t!==(this._get("m")!==void 0)&&(this._set("m",t?0:void 0),this._set("hasM",t))}get hasZ(){return this.z!==void 0}set hasZ(t){t!==(this._get("z")!==void 0)&&(this._set("z",t?0:void 0),this._set("hasZ",t))}get latitude(){return LLe(this)}set latitude(t){const{spatialReference:e,x:i}=this;t!=null&&e&&(e.isWebMercator?this._set("y",f$(i,t,VV)[1]):e.isGeographic&&this._set("y",t),this._set("latitude",t))}get longitude(){return OLe(this)}set longitude(t){const{y:e,spatialReference:i}=this;t!=null&&i&&(i.isWebMercator?this._set("x",f$(t,e,VV)[0]):i.isGeographic&&this._set("x",t),this._set("longitude",t))}writeX(t,e,i){e[i]=isNaN(t)?"NaN":t}readX(t){return typeof t=="string"?NaN:t}clone(){const t=new q3;return t.x=this.x,t.y=this.y,t.z=this.z,t.m=this.m,t.spatialReference=this.spatialReference,t}copy(t){return q3.copy(t,this),this}equals(t){if(t==null)return!1;const{x:e,y:i,z:r,m:n,spatialReference:s}=this,{z:a,m:o}=t;let{x:l,y:c,spatialReference:h}=t;if(!s.equals(h))if(s.isWebMercator&&h.isWGS84)[l,c]=f$(l,c),h=s;else{if(!s.isWGS84||!h.isWebMercator)return!1;[l,c]=$D(l,c),h=s}return e===l&&i===c&&r===a&&n===o&&s.wkid===h.wkid}offset(t,e,i){return this.x+=t,this.y+=e,i!=null&&(this.z=(this.z??0)+i),this}normalize(){if(!this.spatialReference)return this;const t=Bo(this.spatialReference);if(!t)return this;let e=this.x;const[i,r]=t.valid,n=2*r;let s;return e>r?(s=Math.ceil(Math.abs(e-r)/n),e-=s*n):e<i&&(s=Math.ceil(Math.abs(e-i)/n),e+=s*n),this._set("x",e),this}distance(t){return hme(this,t)}toArray(){const t=this.hasZ,e=this.hasM;return t&&e?[this.x,this.y,this.z,this.m]:t?[this.x,this.y,this.z]:e?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(t){return this.write({},t)}};d([f({readOnly:!0})],St.prototype,"cache",null),d([f({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],St.prototype,"hasM",null),d([f({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],St.prototype,"hasZ",null),d([f({type:Number})],St.prototype,"latitude",null),d([f({type:Number})],St.prototype,"longitude",null),d([f({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),_i(t=>isNaN(t)?t:No(t))],St.prototype,"x",void 0),d([Ge("x")],St.prototype,"writeX",null),d([je("x")],St.prototype,"readX",null),d([f({type:Number,json:{write:!0}})],St.prototype,"y",void 0),d([f({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],St.prototype,"z",void 0),d([f({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],St.prototype,"m",void 0),St=q3=d([V("esri.geometry.Point")],St),St.prototype.toJSON.isDefaultToJSON=!0;let gh=class extends bt($e){constructor(...e){super(...e),this.position=new St([0,0,0]),this.heading=0,this.tilt=0,this.fov=55,this.layout=new efe}normalizeCtorArgs(e,i,r,n){if(e&&typeof e=="object"&&("x"in e||Array.isArray(e))){const s={position:e};return i!=null&&(s.heading=i),r!=null&&(s.tilt=r),n!=null&&(s.fov=n),s}return e}writePosition(e,i,r,n){const s=e.clone();s.x=No(e.x||0),s.y=No(e.y||0),s.z=e.hasZ?No(e.z||0):e.z,i[r]=s.write({},n)}readPosition(e,i){const r=new St;return r.read(e,i),r.x=No(r.x||0),r.y=No(r.y||0),r.z=r.hasZ?No(r.z||0):r.z,r}equals(e){return e!=null&&this.tilt===e.tilt&&this.heading===e.heading&&this.fov===e.fov&&this.position.equals(e.position)&&this.layout.equals(e.layout)}};d([f({type:St,json:{write:{isRequired:!0}}})],gh.prototype,"position",void 0),d([Ge("position")],gh.prototype,"writePosition",null),d([je("position")],gh.prototype,"readPosition",null),d([f({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),_i(t=>afe.normalize(No(t)))],gh.prototype,"heading",void 0),d([f({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),_i(t=>ua(No(t),-180,180))],gh.prototype,"tilt",void 0),d([f({type:Number,nonNullable:!0,json:{default:55,write:!0}}),_i(t=>ua(No(t,55),1,170))],gh.prototype,"fov",void 0),d([f({type:efe,nonNullable:!0,json:{read:!1,write:!1}})],gh.prototype,"layout",void 0),gh=d([V("esri.Camera")],gh);const FLe=gh,UV=[0,0];function Pk(t,e){return e!=null&&Eo(t,e.x,e.y,e.z)}function j1t(t,e){var i;if(!((i=e.points)!=null&&i.length))return!1;for(const r of e.points)if(!QS(t,r))return!1;return!0}function RLe(t,e){const{xmin:i,ymin:r,zmin:n,xmax:s,ymax:a,zmax:o}=e;return t.hasZ&&e.hasZ?Eo(t,i,r,n)&&Eo(t,i,a,n)&&Eo(t,s,a,n)&&Eo(t,s,r,n)&&Eo(t,i,r,o)&&Eo(t,i,a,o)&&Eo(t,s,a,o)&&Eo(t,s,r,o):Eo(t,i,r)&&Eo(t,i,a)&&Eo(t,s,a)&&Eo(t,s,r)}function QS(t,e){return Eo(t,e[0],e[1])}function zLe(t,e){return Eo(t,e[0],e[1],e[2])}function Eo(t,e,i,r){return e>=t.xmin&&e<=t.xmax&&i>=t.ymin&&i<=t.ymax&&(r==null||!t.hasZ||r>=t.zmin&&r<=t.zmax)}function gZ(t,e){return UV[1]=e.y,UV[0]=e.x,NLe(t,UV)}function NLe(t,e){return yZ(t.rings,e)}function yZ(t,e){if(!t||t.length<1)return!1;if(DLe(t))return Lie(!1,t,e);let i=!1;for(let r=0,n=t.length;r<n;r++)i=Lie(i,t[r],e);return i}function DLe(t){return!Array.isArray(t[0][0])}function Lie(t,e,i){const[r,n]=i;let s=t,a=0;for(let o=0,l=e.length;o<l;o++){a++,a===l&&(a=0);const[c,h]=e[o],[m,g]=e[a];(h<n&&g>=n||g<n&&h>=n)&&c+(n-h)/(g-h)*(m-c)<r&&(s=!s)}return s}function jLe(t,e){return Pk(t,e)}function VLe(t,e){const i=t.hasZ&&e.hasZ;let r,n,s;if(t.xmin<=e.xmin){if(r=e.xmin,t.xmax<r)return!1}else if(r=t.xmin,e.xmax<r)return!1;if(t.ymin<=e.ymin){if(n=e.ymin,t.ymax<n)return!1}else if(n=t.ymin,e.ymax<n)return!1;if(i&&e.hasZ){if(t.zmin<=e.zmin){if(s=e.zmin,t.zmax<s)return!1}else if(s=t.zmin,e.zmax<s)return!1}return!0}function ULe(t,e){const{points:i,hasZ:r}=e,n=r?zLe:QS;for(const s of i)if(n(t,s))return!0;return!1}const r_=[0,0],n_=[0,0],s_=[0,0],a_=[0,0],BLe=[r_,n_,s_,a_],mme=[[s_,r_],[r_,n_],[n_,a_],[a_,s_]];function qLe(t,e){return HLe(t,e.rings)}function HLe(t,e){r_[0]=t.xmin,r_[1]=t.ymax,n_[0]=t.xmax,n_[1]=t.ymax,s_[0]=t.xmin,s_[1]=t.ymin,a_[0]=t.xmax,a_[1]=t.ymin;for(const i of BLe)if(yZ(e,i))return!0;for(const i of e){if(!i.length)continue;let r=i[0];if(QS(t,r))return!0;for(let n=1;n<i.length;n++){const s=i[n];if(QS(t,s)||gme(r,s,mme))return!0;r=s}}return!1}function GLe(t,e){r_[0]=t.xmin,r_[1]=t.ymax,n_[0]=t.xmax,n_[1]=t.ymax,s_[0]=t.xmin,s_[1]=t.ymin,a_[0]=t.xmax,a_[1]=t.ymin;const i=e.paths;for(const r of i){if(!i.length)continue;let n=r[0];if(QS(t,n))return!0;for(let s=1;s<r.length;s++){const a=r[s];if(QS(t,a)||gme(n,a,mme))return!0;n=a}}return!1}const Qs=[0,0];function WLe(t){for(let e=0;e<t.length;e++){const i=t[e];for(let n=0;n<i.length-1;n++){const s=i[n],a=i[n+1];for(let o=e+1;o<t.length;o++)for(let l=0;l<t[o].length-1;l++){const c=t[o][l],h=t[o][l+1];if(gR(s,a,c,h,Qs)&&!(Qs[0]===s[0]&&Qs[1]===s[1]||Qs[0]===c[0]&&Qs[1]===c[1]||Qs[0]===a[0]&&Qs[1]===a[1]||Qs[0]===h[0]&&Qs[1]===h[1]))return!0}}const r=i.length;if(!(r<=4))for(let n=0;n<r-3;n++){let s=r-1;n===0&&(s=r-2);const a=i[n],o=i[n+1];for(let l=n+2;l<s;l++){const c=i[l],h=i[l+1];if(gR(a,o,c,h,Qs)&&!(Qs[0]===a[0]&&Qs[1]===a[1]||Qs[0]===c[0]&&Qs[1]===c[1]||Qs[0]===o[0]&&Qs[1]===o[1]||Qs[0]===h[0]&&Qs[1]===h[1]))return!0}}}return!1}function gme(t,e,i){for(let r=0;r<i.length;r++)if(gR(t,e,i[r][0],i[r][1]))return!0;return!1}function gR(t,e,i,r,n){const[s,a]=t,[o,l]=e,[c,h]=i,[m,g]=r,v=m-c,b=s-c,x=o-s,$=g-h,M=a-h,k=l-a,A=$*x-v*k;if(A===0)return!1;const L=(v*M-$*b)/A,z=(x*M-k*b)/A;return L>=0&&L<=1&&z>=0&&z<=1&&(n&&(n[0]=s+L*(o-s),n[1]=a+L*(l-a)),!0)}function ZLe(t){switch(t){case"esriGeometryEnvelope":case"extent":return VLe;case"esriGeometryMultipoint":case"multipoint":return ULe;case"esriGeometryPoint":case"point":return jLe;case"esriGeometryMultiPatch":case"multipatch":case"esriGeometryPolygon":case"polygon":return qLe;case"esriGeometryPolyline":case"polyline":return GLe}}var id;function YLe(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}function Wg(t,e,i){return e==null?i:i==null?e:t(e,i)}let Yt=id=class extends Rs{constructor(...t){super(...t),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(t,e,i,r,n){return YLe(t)?{spatialReference:t,xmin:0,ymin:0,xmax:0,ymax:0}:typeof t=="object"?(t.spatialReference=t.spatialReference==null?tt.WGS84:t.spatialReference,t):{xmin:t,ymin:e,xmax:i,ymax:r,spatialReference:n??tt.WGS84}}static fromPoint(t){return new id({xmin:t.x,ymin:t.y,zmin:t.z,xmax:t.x,ymax:t.y,zmax:t.z,spatialReference:t.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const t=new St({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(t.z=.5*(this.zmin+this.zmax)),this.hasM&&(t.m=.5*(this.mmin+this.mmax)),t}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(t){const e=this.center;return t.z!=null&&this.hasZ?this.offset(t.x-e.x,t.y-e.y,t.z-e.z):this.offset(t.x-e.x,t.y-e.y)}clone(){const t=new id;return t.xmin=this.xmin,t.ymin=this.ymin,t.xmax=this.xmax,t.ymax=this.ymax,t.spatialReference=this.spatialReference,this.zmin!=null&&(t.zmin=this.zmin,t.zmax=this.zmax),this.mmin!=null&&(t.mmin=this.mmin,t.mmax=this.mmax),t}contains(t){if(!t)return!1;const e=this.spatialReference,i=t.spatialReference;return e&&i&&!e.equals(i)&&B3(e,i)&&(t=e.isWebMercator?Dm(t):m$(t,!0)),t.type==="point"?Pk(this,t):t.type==="extent"&&RLe(this,t)}equals(t){if(this===t)return!0;if(t==null)return!1;const e=this.spatialReference,i=t.spatialReference;return e&&i&&!e.equals(i)&&B3(e,i)&&(t=e.isWebMercator?Dm(t):m$(t,!0)),this.xmin===t.xmin&&this.ymin===t.ymin&&this.zmin===t.zmin&&this.mmin===t.mmin&&this.xmax===t.xmax&&this.ymax===t.ymax&&this.zmax===t.zmax&&this.mmax===t.mmax}expand(t){const e=.5*(1-t),i=this.width*e,r=this.height*e;if(this.xmin+=i,this.ymin+=r,this.xmax-=i,this.ymax-=r,this.hasZ){const n=(this.zmax-this.zmin)*e;this.zmin+=n,this.zmax-=n}if(this.hasM){const n=(this.mmax-this.mmin)*e;this.mmin+=n,this.mmax-=n}return this}intersects(t){if(t==null)return!1;t.type==="mesh"&&(t=t.extent);const e=this.spatialReference,i=t.spatialReference;return e&&i&&!Cs(e,i)&&B3(e,i)&&(t=e.isWebMercator?Dm(t):m$(t,!0)),ZLe(t.type)(this,t)}normalize(){const t=this._normalize(!1,!0);return Array.isArray(t)?t:[t]}offset(t,e,i){return this.xmin+=t,this.ymin+=e,this.xmax+=t,this.ymax+=e,i!=null&&(this.zmin+=i,this.zmax+=i),this}shiftCentralMeridian(){return this._normalize(!0)}union(t){return this===t||(this.xmin=Math.min(this.xmin,t.xmin),this.ymin=Math.min(this.ymin,t.ymin),this.xmax=Math.max(this.xmax,t.xmax),this.ymax=Math.max(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=Wg(Math.min,this.zmin,t.zmin),this.zmax=Wg(Math.max,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=Wg(Math.min,this.mmin,t.mmin),this.mmax=Wg(Math.max,this.mmax,t.mmax))),this}intersection(t){return this===t?this:t!=null&&this.intersects(t)?(this.xmin=Math.max(this.xmin,t.xmin),this.ymin=Math.max(this.ymin,t.ymin),this.xmax=Math.min(this.xmax,t.xmax),this.ymax=Math.min(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=Wg(Math.max,this.zmin,t.zmin),this.zmax=Wg(Math.min,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=Wg(Math.max,this.mmin,t.mmin),this.mmax=Wg(Math.min,this.mmax,t.mmax)),this):null}toJSON(t){return this.write({},t)}_shiftCM(t=Bo(this.spatialReference)){if(!t||!this.spatialReference)return this;const e=this.spatialReference,i=this._getCM(t);if(i){const r=e.isWebMercator?m$(i):i;this.xmin-=i.x,this.xmax-=i.x,e.isWebMercator||(r.x=BV(r.x,t).x),this.spatialReference=new tt(Ho((e.isWGS84?t.altTemplate:null)??t.wkTemplate,{Central_Meridian:r.x}))}return this}_getCM(t){let e=null;const[i,r]=t.valid,n=this.xmin,s=this.xmax;return n>=i&&n<=r&&s>=i&&s<=r||(e=this.center),e}_normalize(t,e,i){const r=this.spatialReference;if(!r)return this;const n=i??Bo(r);if(n==null)return this;const s=this._getParts(n).map(l=>l.extent);if(s.length<2)return s[0]||this;if(s.length>2)return t?this._shiftCM(n):this.set({xmin:n.valid[0],xmax:n.valid[1]});if(t)return this._shiftCM(n);if(e)return s;let a=!0,o=!0;return s.forEach(l=>{l.hasZ||(a=!1),l.hasM||(o=!1)}),{rings:s.map(l=>{const c=[[l.xmin,l.ymin],[l.xmin,l.ymax],[l.xmax,l.ymax],[l.xmax,l.ymin],[l.xmin,l.ymin]];if(a){const h=(l.zmax-l.zmin)/2;for(let m=0;m<c.length;m++)c[m].push(h)}if(o){const h=(l.mmax-l.mmin)/2;for(let m=0;m<c.length;m++)c[m].push(h)}return c}),hasZ:a,hasM:o,spatialReference:r}}_getParts(t){let e=this.cache._parts;if(!e){e=[];const{ymin:n,ymax:s,spatialReference:a}=this,o=this.width,l=this.xmin,c=this.xmax;let h;t=t||Bo(a);const[m,g]=t.valid;h=BV(this.xmin,t);const v=h.x,b=h.frameId;h=BV(this.xmax,t);const x=h.x,$=h.frameId,M=v===x&&o>0;if(o>2*g){const k=new id(l<c?v:x,n,g,s,a),A=new id(m,n,l<c?x:v,s,a),L=new id(0,n,g,s,a),z=new id(m,n,0,s,a),U=[],B=[];k.contains(L)&&U.push(b),k.contains(z)&&B.push(b),A.contains(L)&&U.push($),A.contains(z)&&B.push($);for(let X=b+1;X<$;X++)U.push(X),B.push(X);e.push({extent:k,frameIds:[b]},{extent:A,frameIds:[$]},{extent:L,frameIds:U},{extent:z,frameIds:B})}else v>x||M?e.push({extent:new id(v,n,g,s,a),frameIds:[b]},{extent:new id(m,n,x,s,a),frameIds:[$]}):e.push({extent:new id(v,n,x,s,a),frameIds:[b]});this.cache._parts=e}const i=this.hasZ,r=this.hasM;if(i||r){const n={};i&&(n.zmin=this.zmin,n.zmax=this.zmax),r&&(n.mmin=this.mmin,n.mmax=this.mmax);for(let s=0;s<e.length;s++)e[s].extent.set(n)}return e}};function BV(t,e){const[i,r]=e.valid,n=2*r;let s,a=0;return t>r?(s=Math.ceil(Math.abs(t-r)/n),t-=s*n,a=s):t<i&&(s=Math.ceil(Math.abs(t-i)/n),t+=s*n,a=-s),{x:t,frameId:a}}d([f({readOnly:!0})],Yt.prototype,"cache",null),d([f({readOnly:!0})],Yt.prototype,"center",null),d([f({readOnly:!0})],Yt.prototype,"extent",null),d([f({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Yt.prototype,"hasM",null),d([f({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Yt.prototype,"hasZ",null),d([f({readOnly:!0})],Yt.prototype,"height",null),d([f({readOnly:!0})],Yt.prototype,"width",null),d([f({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],Yt.prototype,"xmin",void 0),d([f({type:Number,json:{write:!0}})],Yt.prototype,"ymin",void 0),d([f({type:Number,json:{origins:{"web-scene":{write:!1}},read:t=>t??void 0,write:{overridePolicy(){return{enabled:this.hasM}}}}})],Yt.prototype,"mmin",void 0),d([f({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Yt.prototype,"zmin",void 0),d([f({type:Number,json:{write:!0}})],Yt.prototype,"xmax",void 0),d([f({type:Number,json:{write:!0}})],Yt.prototype,"ymax",void 0),d([f({type:Number,json:{origins:{"web-scene":{write:!1}},read:t=>t??void 0,write:{overridePolicy(){return{enabled:this.hasM}}}}})],Yt.prototype,"mmax",void 0),d([f({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Yt.prototype,"zmax",void 0),Yt=id=d([V("esri.geometry.Extent")],Yt),Yt.prototype.toJSON.isDefaultToJSON=!0;function ls(t=iFe){return[t[0],t[1],t[2],t[3]]}function yme(t,e){return t!==e&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3]),t}function vme(t,e,i,r,n=ls()){return n[0]=t,n[1]=e,n[2]=i,n[3]=r,n}function V1t(t,e=ls()){return e[0]=t.xmin,e[1]=t.ymin,e[2]=t.xmax,e[3]=t.ymax,e}function JLe(t,e,i=new Yt){return i.xmin=t[0],i.ymin=t[1],i.xmax=t[2],i.ymax=t[3],i.spatialReference=e,i}function Ra(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function XLe(t,e){e<t[0]&&(t[0]=e),e>t[2]&&(t[2]=e)}function QLe(t,e){e<t[1]&&(t[1]=e),e>t[3]&&(t[3]=e)}function U1t(t,e,i){if(e!=null)if("length"in e)T8(e)?(i[0]=Math.min(t[0],e[0]),i[1]=Math.min(t[1],e[1]),i[2]=Math.max(t[2],e[2]),i[3]=Math.max(t[3],e[3])):e.length!==2&&e.length!==3||(i[0]=Math.min(t[0],e[0]),i[1]=Math.min(t[1],e[1]),i[2]=Math.max(t[2],e[0]),i[3]=Math.max(t[3],e[1]));else switch(e.type){case"extent":i[0]=Math.min(t[0],e.xmin),i[1]=Math.min(t[1],e.ymin),i[2]=Math.max(t[2],e.xmax),i[3]=Math.max(t[3],e.ymax);break;case"point":i[0]=Math.min(t[0],e.x),i[1]=Math.min(t[1],e.y),i[2]=Math.max(t[2],e.x),i[3]=Math.max(t[3],e.y)}else yme(i,t)}function B1t(t,e,i=t){const r=e.length;let n=t[0],s=t[1],a=t[2],o=t[3];for(let l=0;l<r;l++){const c=e[l];n=Math.min(n,c[0]),s=Math.min(s,c[1]),a=Math.max(a,c[0]),o=Math.max(o,c[1])}return i[0]=n,i[1]=s,i[2]=a,i[3]=o,i}function q1t(t){for(let e=0;e<4;e++)if(!isFinite(t[e]))return!1;return!0}function SD(t){return t==null||t[0]>=t[2]?0:t[2]-t[0]}function TD(t){return t==null||t[1]>=t[3]?0:t[3]-t[1]}function H1t(t){return SD(t)*TD(t)}function Fie(t,e=[0,0]){return e[0]=(t[0]+t[2])/2,e[1]=(t[1]+t[3])/2,e}function KLe(t){const e=SD(t),i=TD(t);return Math.sqrt(e*e+i*i)}function G1t(t,e){return!!t&&S8(t,e.x,e.y)}function S8(t,e,i){return e>=t[0]&&i>=t[1]&&e<=t[2]&&i<=t[3]}function W1t(t,e){return Math.max(e[0],t[0])<=Math.min(e[2],t[2])&&Math.max(e[1],t[1])<=Math.min(e[3],t[3])}function Z1t(t,e,i){return Math.max(e[0],t[0])-i<=Math.min(e[2],t[2])&&Math.max(e[1],t[1])-i<=Math.min(e[3],t[3])}function eFe(t,e){return e[0]>=t[0]&&e[2]<=t[2]&&e[1]>=t[1]&&e[3]<=t[3]}function Y1t(t,e,i,r){return r??(r=t),r[0]=t[0]+e,r[1]=t[1]+i,r[2]=t[2]+e,r[3]=t[3]+i,r}function tFe(t){return t?yme(t,Rie):ls(Rie)}function T8(t){return t!=null&&t.length===4}function J1t(t,e){return T8(t)&&T8(e)?t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]:t===e}const Rie=[1/0,1/0,-1/0,-1/0],iFe=[0,0,0,0];let vZ=1e-6;function qo(){return vZ}function rFe(t){vZ=t}const ID=Math.random,nFe=Math.PI/180,sFe=180/Math.PI;function bZ(t){return t*nFe}function aFe(t){return t*sFe}function oFe(t,e){return Math.abs(t-e)<=vZ*Math.max(1,Math.abs(t),Math.abs(e))}Object.freeze(Object.defineProperty({__proto__:null,RANDOM:ID,equals:oFe,getEpsilon:qo,setEpsilon:rFe,toDegree:aFe,toRadian:bZ},Symbol.toStringTag,{value:"Module"}));function F$(t,e){return t[0]=e[0],t[1]=e[1],t}function Vn(t,e,i){return t[0]=e,t[1]=i,t}function bme(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t}function gE(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t}function wme(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t}function _me(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t}function lFe(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function cFe(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function uFe(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t}function dFe(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t}function hFe(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function Ok(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t}function pFe(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t}function MD(t,e){const i=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(i*i+r*r)}function yE(t,e){const i=e[0]-t[0],r=e[1]-t[1];return i*i+r*r}function yR(t){const e=t[0],i=t[1];return Math.sqrt(e*e+i*i)}function xme(t){const e=t[0],i=t[1];return e*e+i*i}function $me(t,e){return t[0]=-e[0],t[1]=-e[1],t}function fFe(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function I8(t,e){const i=e[0],r=e[1];let n=i*i+r*r;return n>0&&(n=1/Math.sqrt(n),t[0]=e[0]*n,t[1]=e[1]*n),t}function Sme(t,e){return t[0]*e[0]+t[1]*e[1]}function Tme(t,e,i){const r=e[0]*i[1]-e[1]*i[0];return t[0]=t[1]=0,t[2]=r,t}function mFe(t,e,i,r){const n=e[0],s=e[1];return t[0]=n+r*(i[0]-n),t[1]=s+r*(i[1]-s),t}function gFe(t,e=1){const i=2*ID()*Math.PI;return t[0]=Math.cos(i)*e,t[1]=Math.sin(i)*e,t}function yFe(t,e,i){const r=e[0],n=e[1];return t[0]=i[0]*r+i[2]*n,t[1]=i[1]*r+i[3]*n,t}function ro(t,e,i){const r=e[0],n=e[1];return t[0]=i[0]*r+i[2]*n+i[4],t[1]=i[1]*r+i[3]*n+i[5],t}function H3(t,e,i){const r=e[0],n=e[1];return t[0]=i[0]*r+i[3]*n+i[6],t[1]=i[1]*r+i[4]*n+i[7],t}function vFe(t,e,i){const r=e[0],n=e[1];return t[0]=i[0]*r+i[4]*n+i[12],t[1]=i[1]*r+i[5]*n+i[13],t}function bFe(t,e,i,r){const n=e[0]-i[0],s=e[1]-i[1],a=Math.sin(r),o=Math.cos(r);return t[0]=n*o-s*a+i[0],t[1]=n*a+s*o+i[1],t}function wFe(t,e){const i=t[0],r=t[1],n=e[0],s=e[1];let a=i*i+r*r;a>0&&(a=1/Math.sqrt(a));let o=n*n+s*s;o>0&&(o=1/Math.sqrt(o));const l=(i*n+r*s)*a*o;return l>1?0:l<-1?Math.PI:Math.acos(l)}function _Fe(t){return"vec2("+t[0]+", "+t[1]+")"}function xFe(t,e){return t[0]===e[0]&&t[1]===e[1]}function $Fe(t,e){const i=t[0],r=t[1],n=e[0],s=e[1],a=qo();return Math.abs(i-n)<=a*Math.max(1,Math.abs(i),Math.abs(n))&&Math.abs(r-s)<=a*Math.max(1,Math.abs(r),Math.abs(s))}function SFe(t,e,i,r,n){let s=e[0]-i[0],a=e[1]-i[1];const o=(r[0]*s+r[1]*a)*(n-1);return s=r[0]*o,a=r[1]*o,t[0]=e[0]+s,t[1]=e[1]+a,t}const TFe=yR,wZ=gE,IFe=wme,MFe=_me,CFe=MD,EFe=yE,kFe=xme;Object.freeze(Object.defineProperty({__proto__:null,add:bme,angle:wFe,ceil:lFe,copy:F$,cross:Tme,dist:CFe,distance:MD,div:MFe,divide:_me,dot:Sme,equals:$Fe,exactEquals:xFe,floor:cFe,inverse:fFe,len:TFe,length:yR,lerp:mFe,max:dFe,min:uFe,mul:IFe,multiply:wme,negate:$me,normalize:I8,projectAndScale:SFe,random:gFe,rotate:bFe,round:hFe,scale:Ok,scaleAndAdd:pFe,set:Vn,sqrDist:EFe,sqrLen:kFe,squaredDistance:yE,squaredLength:xme,str:_Fe,sub:wZ,subtract:gE,transformMat2:yFe,transformMat2d:ro,transformMat3:H3,transformMat4:vFe},Symbol.toStringTag,{value:"Module"}));function wm(t,e,i,r){return t[0]=e[0]*(1-r)+i[0]*r,t[1]=e[1]*(1-r)+i[1]*r,t}function Vo(t,e){return yE(t,e)}function X1t(t,e,i){const r=Vo(e,i);if(r===0)return Vo(e,t);const n=(e[0]-t[0])*(i[1]-t[1])-(e[1]-t[1])*(i[0]-t[0]);return n*n/r}function AFe(t,e,i,r,n){const[s,a]=e,[o,l]=i,[c,h]=r,[m,g]=n,v=(s-o)*(h-g)-(a-l)*(c-m);if(v===0)return null;const b=(s*l-a*o)*(c-m)-(s-o)*(c*g-h*m),x=(s*l-a*o)*(h-g)-(a-l)*(c*g-h*m);return t[0]=b/v,t[1]=x/v,t}const Cd=2*Math.PI;function iw(t,e){const i=Math.atan2(t,e);return i<0?i+Cd:i}function Ime(t){return Math.abs(t)%Cd}function zie(t){const e=Ime(t);return e<Math.PI?e:Cd-e}function CD(t,e){return{min:Math.min(t,e),max:Math.max(t,e)}}function Mme(t,e,i,r){if(xc(Ime(t-e),0))return i?[t,t]:[t,r?t-Cd:t+Cd];const[n,s]=r?[t-Cd,t]:[t,t+Cd];return[t,Lk({min:n,max:s},e)]}function Lk({min:t,max:e},i){let r;return r=e-i,r>=Cd?(r-=r%Cd,i+r):(r=i-t,r>=Cd?(r-=r%Cd,i-r):i)}function PFe(t,e){const i=Lk(t,e);return i>t.min&&i<t.max?i:zie(i-t.min)<zie(i-t.max)?t.min:t.max}function Cme(t,e,i,r=10){return e.map(n=>{let s=n;for(let a=0;a<r;a++){const[o,l,c,h,m,g]=i(s),v=t[0]-o,b=t[1]-l,x=-c,$=-h;s+=-(2*v*x+2*b*$)/(2*x*x+2*v*-m+2*$*$+2*b*-g||1e-6)}return s})}const OFe=[0,0];function Eme(t){const e=1-t,i=e*e,r=t*t;return[i*e,3*t*i,3*r*e,r*t]}function M8(t,e,i,r,n){const[s,a,o,l]=Eme(n);return[t[0]*s+e[0]*a+i[0]*o+r[0]*l,t[1]*s+e[1]*a+i[1]*o+r[1]*l]}function Nie(t,e,i,r,n){const[s,a,o,l]=Eme(n);return t*s+e*a+i*o+r*l}function Q1t(t,e,i){const r=t,[n,s,a]=e.b;return M8(r,s,a,n,i)}function LFe(t,e,i){const r=t,[n,s,a]=e.b,o=wm([0,0],r,s,i),l=wm(OFe,s,a,i),c=wm([0,0],a,n,i),h=wm([0,0],o,l,i),m=wm([0,0],l,c,i);return[{b:[wm([],h,m,i),o,h]},{b:[[...n],m,c]}]}function K1t(t,e,i){const r=t,[n,s,a]=e.b,o=Cme(i,[.1,.5,.9],m=>{const g=1-m,[v,b]=M8(r,s,a,n,m);return[v,b,3*g*g*(s[0]-r[0])+6*g*m*(a[0]-s[0])+3*m*m*(n[0]-a[0]),3*g*g*(s[1]-r[1])+6*g*m*(a[1]-s[1])+3*m*m*(n[1]-a[1]),6*g*(a[0]-2*s[0]+r[0])+6*m*(n[0]-2*a[0]+s[0]),6*g*(a[1]-2*s[1]+r[1])+6*m*(n[1]-2*a[1]+s[1])]}).map(m=>Math.min(1,Math.max(0,m)));o.push(0,1);let l=1/0;const c=o.map(m=>{const g=M8(r,s,a,n,m),[v,b]=g,x=i[0]-v,$=i[1]-b,M=Math.sqrt(x*x+$*$);return l=Math.min(M,l),{t:m,curvePoint:g,distance:M}}),h=[];for(const m of c){const{t:g,distance:v}=m;nfe(v,l)&&!h.some(({t:b})=>xc(b,g))&&h.push(m)}return h}function FFe(t,e,i){const r=e,[n,s,a]=i.b;if(Ra(t,r),Ra(t,n),S8(t,s[0],s[1])&&S8(t,a[0],a[1]))return t;for(const o of Die(r[0],s[0],a[0],n[0]))o>0&&o<1&&XLe(t,Nie(r[0],s[0],a[0],n[0],o));for(const o of Die(r[1],s[1],a[1],n[1]))o>0&&o<1&&QLe(t,Nie(r[1],s[1],a[1],n[1],o));return t}function Die(t,e,i,r){const n=3*(3*(e-i)-t+r),s=6*(t-2*e+i),a=3*(e-t);if(n===0)return s!==0?[-a/s]:[];const o=Math.sqrt(s*s-4*n*a);return[(-s+o)/(2*n),(-s-o)/(2*n)]}function ext(t,e,i){let n=0,s=[e];for(let a=0;a<16;a++){let o=t;const l=[];for(const h of s)l.push(...LFe(o,h,.5)),o=h.b[0];s=l,o=t,n=0;let c=0;for(const h of s){const[m,g,v]=h.b,b=Math.sqrt(Vo(o,m));n+=(b+(Math.sqrt(Vo(o,g))+Math.sqrt(Vo(g,v))+Math.sqrt(Vo(v,m))))/2,c+=b,o=m}if(n-c<i)return n}return n}function RFe(t,e,i){const[r,n]=t,[s,a]=e,[o,l]=i,[c,h]=[s-r,a-n];let m=c*(o-r)+h*(l-n);m/=c**2+h**2,m=ua(m,0,1);const g=wm([0,0],t,e,m);return{t:m,curvePoint:g,distance:Math.sqrt(Vo(g,i))}}let kme=class{constructor(e,i,r,n,s,a){this.cx=e,this.cy=i,this.radius=r,this.thetaStart=n,this.thetaEnd=s,this.isInvalid=a}get startPoint(){const{cx:e,cy:i,radius:r,thetaStart:n}=this;return[e+r*Math.cos(n),i+r*Math.sin(n)]}get endPoint(){const{cx:e,cy:i,radius:r,thetaEnd:n}=this;return[e+r*Math.cos(n),i+r*Math.sin(n)]}};function vR(t,e){const{cx:i,cy:r,radius:n}=t;return[i+n*Math.cos(e),r+n*Math.sin(e)]}function G3(t,e){if(t.isInvalid)return wm([0,0],t.startPoint,t.endPoint,e);const{thetaStart:i,thetaEnd:r}=t;return vR(t,i*(1-e)+r*e)}function ixt(t,e){if(t.isInvalid)return RFe(t.startPoint,t.endPoint,e);const{cx:i,cy:r,thetaStart:n,thetaEnd:s}=t,[a,o]=e,l=PFe(CD(n,s),Math.atan2(o-r,a-i)),c=vR(t,l);return{t:(l-n)/(s-n),curvePoint:c,distance:Math.sqrt(Vo(e,c))}}function jie(t,e){if(e.isInvalid)return Ra(t,e.startPoint),Ra(t,e.endPoint),t;const{cx:i,cy:r,radius:n,thetaStart:s,thetaEnd:a}=e;Ra(t,vR(e,s)),Ra(t,vR(e,a));const o=CD(s,a),l=Math.PI/2;let c=0;for(const h of[[i+n,r],[i,r+n],[i-n,r],[i,r-n]])c=Lk(o,c),c>o.min&&c<o.max&&Ra(t,h),c+=l;return t}function rxt(t){if(t.isInvalid)return 2*t.radius;const{radius:e,thetaStart:i,thetaEnd:r}=t;return e*Math.abs(r-i)}function zFe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function NFe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function R$(t,e,i,r,n,s,a,o,l,c){return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t[4]=s,t[5]=a,t[6]=o,t[7]=l,t[8]=c,t}function Ame(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Pme(t,e){if(t===e){const i=e[1],r=e[2],n=e[5];t[1]=e[3],t[2]=e[6],t[3]=i,t[5]=e[7],t[6]=r,t[7]=n}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function Ome(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],h=e[8],m=h*a-o*c,g=-h*s+o*l,v=c*s-a*l;let b=i*m+r*g+n*v;return b?(b=1/b,t[0]=m*b,t[1]=(-h*r+n*c)*b,t[2]=(o*r-n*a)*b,t[3]=g*b,t[4]=(h*i-n*l)*b,t[5]=(-o*i+n*s)*b,t[6]=v*b,t[7]=(-c*i+r*l)*b,t[8]=(a*i-r*s)*b,t):null}function DFe(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],h=e[8];return t[0]=a*h-o*c,t[1]=n*c-r*h,t[2]=r*o-n*a,t[3]=o*l-s*h,t[4]=i*h-n*l,t[5]=n*s-i*o,t[6]=s*c-a*l,t[7]=r*l-i*c,t[8]=i*a-r*s,t}function W3(t){const e=t[0],i=t[1],r=t[2],n=t[3],s=t[4],a=t[5],o=t[6],l=t[7],c=t[8];return e*(c*s-a*l)+i*(-c*n+a*o)+r*(l*n-s*o)}function vE(t,e,i){const r=e[0],n=e[1],s=e[2],a=e[3],o=e[4],l=e[5],c=e[6],h=e[7],m=e[8],g=i[0],v=i[1],b=i[2],x=i[3],$=i[4],M=i[5],k=i[6],A=i[7],L=i[8];return t[0]=g*r+v*a+b*c,t[1]=g*n+v*o+b*h,t[2]=g*s+v*l+b*m,t[3]=x*r+$*a+M*c,t[4]=x*n+$*o+M*h,t[5]=x*s+$*l+M*m,t[6]=k*r+A*a+L*c,t[7]=k*n+A*o+L*h,t[8]=k*s+A*l+L*m,t}function C8(t,e,i){const r=e[0],n=e[1],s=e[2],a=e[3],o=e[4],l=e[5],c=e[6],h=e[7],m=e[8],g=i[0],v=i[1];return t[0]=r,t[1]=n,t[2]=s,t[3]=a,t[4]=o,t[5]=l,t[6]=g*r+v*a+c,t[7]=g*n+v*o+h,t[8]=g*s+v*l+m,t}function Lme(t,e,i){const r=e[0],n=e[1],s=e[2],a=e[3],o=e[4],l=e[5],c=e[6],h=e[7],m=e[8],g=Math.sin(i),v=Math.cos(i);return t[0]=v*r+g*a,t[1]=v*n+g*o,t[2]=v*s+g*l,t[3]=v*a-g*r,t[4]=v*o-g*n,t[5]=v*l-g*s,t[6]=c,t[7]=h,t[8]=m,t}function jFe(t,e,i){const r=i[0],n=i[1],s=i[2];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=n*e[3],t[4]=n*e[4],t[5]=n*e[5],t[6]=s*e[6],t[7]=s*e[7],t[8]=s*e[8],t}function VFe(t,e,i){const r=i[0],n=i[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=n*e[3],t[4]=n*e[4],t[5]=n*e[5],t}function UFe(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function BFe(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=i,t[2]=0,t[3]=-i,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function qFe(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function HFe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function GFe(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],a=i+i,o=r+r,l=n+n,c=i*a,h=r*a,m=r*o,g=n*a,v=n*o,b=n*l,x=s*a,$=s*o,M=s*l;return t[0]=1-m-b,t[3]=h-M,t[6]=g+$,t[1]=h+M,t[4]=1-c-b,t[7]=v-x,t[2]=g-$,t[5]=v+x,t[8]=1-c-m,t}function WFe(t,e){const i=e[0],r=e[1],n=e[2],s=e[4],a=e[5],o=e[6],l=e[8],c=e[9],h=e[10],m=h*a-o*c,g=-h*s+o*l,v=c*s-a*l,b=i*m+r*g+n*v;if(!b)return null;const x=1/b;return t[0]=m*x,t[1]=(-h*r+n*c)*x,t[2]=(o*r-n*a)*x,t[3]=g*x,t[4]=(h*i-n*l)*x,t[5]=(-o*i+n*s)*x,t[6]=v*x,t[7]=(-c*i+r*l)*x,t[8]=(a*i-r*s)*x,t}function ZFe(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],h=e[8],m=e[9],g=e[10],v=e[11],b=e[12],x=e[13],$=e[14],M=e[15],k=i*o-r*a,A=i*l-n*a,L=i*c-s*a,z=r*l-n*o,U=r*c-s*o,B=n*c-s*l,X=h*x-m*b,J=h*$-g*b,Q=h*M-v*b,le=m*$-g*x,ie=m*M-v*x,re=g*M-v*$;let se=k*re-A*ie+L*le+z*Q-U*J+B*X;return se?(se=1/se,t[0]=(o*re-l*ie+c*le)*se,t[1]=(l*Q-a*re-c*J)*se,t[2]=(a*ie-o*Q+c*X)*se,t[3]=(n*ie-r*re-s*le)*se,t[4]=(i*re-n*Q+s*J)*se,t[5]=(r*Q-i*ie-s*X)*se,t[6]=(x*B-$*U+M*z)*se,t[7]=($*L-b*B-M*A)*se,t[8]=(b*U-x*L+M*k)*se,t):null}function YFe(t,e,i){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/i,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function JFe(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function XFe(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2)}function QFe(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t}function Fme(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t}function KFe(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t}function eRe(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t[4]=e[4]+i[4]*r,t[5]=e[5]+i[5]*r,t[6]=e[6]+i[6]*r,t[7]=e[7]+i[7]*r,t[8]=e[8]+i[8]*r,t}function tRe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function iRe(t,e){const i=t[0],r=t[1],n=t[2],s=t[3],a=t[4],o=t[5],l=t[6],c=t[7],h=t[8],m=e[0],g=e[1],v=e[2],b=e[3],x=e[4],$=e[5],M=e[6],k=e[7],A=e[8],L=qo();return Math.abs(i-m)<=L*Math.max(1,Math.abs(i),Math.abs(m))&&Math.abs(r-g)<=L*Math.max(1,Math.abs(r),Math.abs(g))&&Math.abs(n-v)<=L*Math.max(1,Math.abs(n),Math.abs(v))&&Math.abs(s-b)<=L*Math.max(1,Math.abs(s),Math.abs(b))&&Math.abs(a-x)<=L*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(o-$)<=L*Math.max(1,Math.abs(o),Math.abs($))&&Math.abs(l-M)<=L*Math.max(1,Math.abs(l),Math.abs(M))&&Math.abs(c-k)<=L*Math.max(1,Math.abs(c),Math.abs(k))&&Math.abs(h-A)<=L*Math.max(1,Math.abs(h),Math.abs(A))}function rRe(t){const e=qo(),i=t[0],r=t[1],n=t[2],s=t[3],a=t[4],o=t[5],l=t[6],c=t[7],h=t[8];return Math.abs(1-(i*i+s*s+l*l))<=e&&Math.abs(1-(r*r+a*a+c*c))<=e&&Math.abs(1-(n*n+o*o+h*h))<=e}const nRe=vE,sRe=Fme;Object.freeze(Object.defineProperty({__proto__:null,add:QFe,adjoint:DFe,copy:NFe,determinant:W3,equals:iRe,exactEquals:tRe,frob:XFe,fromMat2d:HFe,fromMat4:zFe,fromQuat:GFe,fromRotation:BFe,fromScaling:qFe,fromTranslation:UFe,identity:Ame,invert:Ome,isOrthoNormal:rRe,mul:nRe,multiply:vE,multiplyScalar:KFe,multiplyScalarAndAdd:eRe,normalFromMat4:ZFe,normalFromMat4Legacy:WFe,projection:YFe,rotate:Lme,scale:jFe,scaleByVec2:VFe,set:R$,str:JFe,sub:sRe,subtract:Fme,translate:C8,transpose:Pme},Symbol.toStringTag,{value:"Module"}));function m_(){return[1,0,0,0,1,0,0,0,1]}function aRe(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]}function oRe(t,e,i,r,n,s,a,o,l){return[t,e,i,r,n,s,a,o,l]}const lRe=m_();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:lRe,clone:aRe,create:m_,fromValues:oRe},Symbol.toStringTag,{value:"Module"}));const b1=m_();function cRe(t,e,i){const[r,n]=t,[s,a]=e,[o,l]=i;R$(b1,r,s,o,n,a,l,1,1,1);const c=W3(b1),h=4*c/(Vo(t,e)+Vo(e,i)+Vo(i,t));if(!isFinite(h)||Math.abs(h)<1e-8)return null;const m=r**2+n**2,g=s**2+a**2,v=o**2+l**2;R$(b1,m,g,v,n,a,l,1,1,1);const b=W3(b1);return R$(b1,m,g,v,r,s,o,1,1,1),[b/c*.5,W3(b1)/c*-.5]}function Rme(t,e){const[i,r]=e.c,n=cRe(t,r,i),s=n==null,a=n??wm([],t,i,.5),[o,l]=t,[c,h]=r,[m,g]=i,[v,b]=a,x=o-v,$=l-b,M=Math.sqrt(x*x+$*$),k=iw(l-b,o-v),A=iw(h-b,c-v);let L=iw(g-b,m-v);return(A-k)*(L-A)<0&&(L+=2*Math.sign(k-L)*Math.PI),new kme(v,b,M,k,L,s)}function nxt(t,e,i){const r=G3(t,i/2),n=G3(t,i),s=G3(t,(i+1)/2);return[{c:[n,r]},{c:[[...e.c[0]],s]}]}function sxt(t,e){const[i]=e.c,{cx:r,cy:n,thetaStart:s,thetaEnd:a,radius:o,isInvalid:l}=Rme(t,e);return{a:[i,[r,n],Math.abs(a-s)<Math.PI?1:0,s>a?1:0,l?s:0,o,l?0:1]}}function axt(t){var e,i;return"curveRings"in t&&!!((e=t.curveRings)!=null&&e.length)||"curvePaths"in t&&!!((i=t.curvePaths)!=null&&i.length)}function oxt(t){return"curveRings"in t?t.curveRings:t.curvePaths}function _Z(t){return"b"in t}function xZ(t){return"c"in t}function ED(t){return Array.isArray(t)}function lxt(t){return"a"in t}function zme(t){return"a"in t&&t.a.length===4}function uRe(t){return"a"in t&&t.a.length===7}function qV(t){return ED(t)?t:_Z(t)?t.b[0]:xZ(t)?t.c[0]:t.a[0]}function dRe(t){if(_Z(t)){const[e,i,r]=t.b;return{b:[[...e],[...i],[...r]]}}if(xZ(t)){const[e,i]=t.c;return{c:[[...e],[...i]]}}if(ED(t))return[...t];if(zme(t)){const[e,i,r,n]=t.a;return{a:[[...e],[...i],r,n]}}if(uRe(t)){const[e,i,r,n,s,a,o]=t.a;return{a:[[...e],[...i],r,n,s,a,o]}}return t}function hRe(t,e){const[i,r,n,s]=e.a,[a,o]=t,[l,c]=i,[h,m]=r,g=a-h,v=o-m,b=Math.sqrt(g*g+v*v),x=l-h,$=c-m,M=Math.sqrt(x*x+$*$),k=b===0||M===0||!nfe(b,M),A=b,[L,z]=Mme(iw(o-m,a-h),Math.atan2(c-m,l-h),n,s);return new kme(h,m,A,L,z,k)}function cxt(t,e,i){const{cx:r,cy:n,thetaStart:s,thetaEnd:a}=t,[o,l,c,h]=e.a,m=s*(1-i)+a*i;return[{a:[G3(t,i),[r,n],Math.abs(m-s)<Math.PI?1:0,h]},{a:[[...o],[r,n],Math.abs(a-m)<Math.PI?1:0,h]}]}let pRe=class{constructor(e,i,r,n,s,a,o,l,c){this.cx=e,this.cy=i,this.a=r,this.b=n,this.cosR=s,this.sinR=a,this.u1=o,this.u2=l,this.isInvalid=c}};function $Z(t,e){const[i,r,n,s,a,o,l]=e.a,[c,h]=t,[m,g]=i,[v,b]=r,x=o*l,$=Math.cos(a),M=Math.sin(a),[k,A]=Mme(iw(1/x*(h-b)*$-1/x*(c-v)*M,1/o*(h-b)*M+1/o*(c-v)*$),Math.atan2(1/x*(g-b)*$-1/x*(m-v)*M,1/o*(g-b)*M+1/o*(m-v)*$),n,s);return new pRe(v,b,o,x,$,M,k,A,o===0||x===0)}function bE(t,e){const{a:i,b:r,cosR:n,sinR:s,cx:a,cy:o}=t,l=Math.cos(e),c=Math.sin(e);return[i*l*n-r*c*s+a,i*l*s+r*c*n+o]}function lx(t,e){const{u1:i,u2:r}=t;return bE(t,i*(1-e)+r*e)}function dxt(t,e,i){if(i<0||i>1)return[];if(i===0||i===1)return[dRe(e)];const[r,[n,s],a,o,l,c,h]=e.a,{u1:m,u2:g}=t,v=m*(1-i)+g*i;return[{a:[[...lx(t,i)],[n,s],Math.abs(v-m)<Math.PI?1:0,o,l,c,h]},{a:[[...r],[n,s],Math.abs(g-v)<Math.PI?1:0,o,l,c,h]}]}function hxt(t,e){const{a:i,b:r,cosR:n,sinR:s,u1:a,u2:o}=t,l=Math.PI/6,c=Cme(e,[1*l,2*l,4*l,5*l,7*l,8*l,10*l,11*l],x=>{const $=Math.cos(x),M=Math.sin(x),[k,A]=bE(t,x);return[k,A,-i*n*M-r*s*$,-i*s*M+r*n*$,-i*n*$+r*s*M,-i*s*$-r*n*M]}),h=CD(a,o),m=new Set(c.map(x=>Lk(h,x)).filter(x=>x>h.min&&x<h.max));m.add(a),m.add(o);let g,v,b=1/0;for(const x of m){const $=bE(t,x),[M,k]=$,A=e[0]-M,L=e[1]-k,z=A*A+L*L;z<b&&(g=(x-a)/(o-a),v=$,b=z)}return{t:g,curvePoint:v,distance:Math.sqrt(b)}}function fRe(t,e,i){const r=$Z(e,i),{a:n,b:s,u1:a,u2:o,cosR:l,sinR:c,isInvalid:h}=r,m=i.a[0];if(Ra(t,e),Ra(t,m),h)return t;const g=Math.atan2(-s*c,n*l),v=g+Math.PI,b=Math.atan2(s*l,n*c),x=b+Math.PI,$=CD(a,o);for(const M of[g,v,b,x].map(k=>Lk($,k)))M>$.min&&M<$.max&&Ra(t,bE(r,M));return t}function pxt(t,e,i){const[r,n,s,a,o,l,c]=e.a,h=$Z(t,e),{u1:m,u2:g,isInvalid:v}=h,b=g-m;if(v)return Math.sqrt(Vo(t,r));const x=14,$=[0,0];let M=0,k=[lx(h,0),lx(h,.25),lx(h,.5),lx(h,.75),lx(h,1)];for(let A=0;A<x;A++){const L=k.length-1,z=b/(2*L),U=[];for(let X=0;X<L;X++)U.push(k[X]),U.push(bE(h,m+(2*X+1)*z));U.push(k[k.length-1]),k=U,M=0;let B=0;for(let X=1;X<k.length;X++){const J=k[X-1],Q=k[X];if(M+=Math.sqrt(Vo(J,Q)),X>1){const le=k[X-2],ie=AFe($,le,J,n,Q);B+=ie?Math.sqrt(Vo(J,ie)):Math.abs(Q[0]-J[0])+Math.abs(Q[1]-J[1])}else B+=M}if(B-M<i)return M}return M}const Vie=m_(),NP=m_(),Uie=m_(),Zg=m_();function fxt(t,e,i){const[r,n,s,a,o,l,c]=e.a,h=$Z(t,e),{cosR:m,sinR:g,a:v,b,cx:x,cy:$}=h,M=H3([0,0],r,i),k=H3([0,0],n,i),A=i[0]*i[4]<0?1-a:a;{const L=v*v*g*g+b*b*m*m,z=2*(b*b-v*v)*g*m,U=v*v*m*m+b*b*g*g,B=-2*L*x-z*$,X=-z*x-2*U*$;R$(Vie,L,z/2,B/2,z/2,U,X/2,B/2,X/2,L*x*x+z*x*$+U*$*$-v*v*b*b)}if(Ome(NP,i),NP==null){const L=H3([0,0],t,i);return{a:[M,k,s,a,iw(M[1],M[0]),Math.sqrt(Vo(M,L))/2,0]}}Pme(Uie,NP),vE(Zg,vE(Zg,Uie,Vie),NP);{const L=Zg[0],z=2*Zg[1],U=Zg[4],B=2*Zg[2],X=2*Zg[5],J=z*z-4*L*U,Q=2*(L*X*X+U*B*B-z*B*X+J*Zg[8]),le=Math.sqrt((L-U)**2+z*z),ie=-Math.sqrt(Q*(L+U+le))/J,re=-Math.sqrt(Q*(L+U-le))/J;return{a:[M,k,s,A,.5*iw(-z,U-L),ie,re/ie]}}}function mRe(t,e,i){if(ED(i))return Ra(t,e),Ra(t,i),t;if(_Z(i))return FFe(t,e,i);if(xZ(i)){const r=Rme(e,i);return jie(t,r)}if(zme(i)){const r=hRe(e,i);return jie(t,r)}return fRe(t,e,i)}function Nme(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function Dme(t){return t.points!==void 0}function jme(t){return t.x!==void 0&&t.y!==void 0}function Vme(t){return t.paths!==void 0}function Ume(t){return t.rings!==void 0}function Bme(t){function e(i,r){return i==null?r:r==null?i:t(i,r)}return e}const Ky=Bme(Math.min),ev=Bme(Math.max);function SZ(t,e){return Vme(e)?KS(t,e.curvePaths??e.paths,!1,!1)??t:Ume(e)?KS(t,e.curveRings??e.rings,!1,!1)??t:Dme(e)?TZ(t,e.points,!1,!1,!1,!1):Nme(e)?Hme(t,e):(jme(e)&&(t[0]=e.x,t[1]=e.y,t[2]=e.x,t[3]=e.y),t)}function Fk(t){let e,i,r,n;for(t.reset(),e=r=1/0,i=n=-1/0;t.nextPath();){const s=qme(t);e=Math.min(s[0],e),r=Math.min(s[1],r),i=Math.max(s[2],i),n=Math.max(s[3],n)}return ls([e,r,i,n])}function qme(t){let e,i,r,n;for(e=r=1/0,i=n=-1/0;t.nextPoint();)e=Math.min(t.x,e),r=Math.min(t.y,r),i=Math.max(t.x,i),n=Math.max(t.y,n);return ls([e,r,i,n])}function mxt(t,e){return Vme(e)?KS(t,e.curvePaths??e.paths,!0,!1)??t:Ume(e)?KS(t,e.curveRings??e.rings,!0,!1)??t:Dme(e)?TZ(t,e.points,!0,!1,!0,!1):Nme(e)?Hme(t,e,!0,!1,!0,!1):(jme(e)&&(t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.x,t[4]=e.y,t[5]=e.z),t)}function KS(t,e,i,r){const n=i?3:2;if(!e.length||!e[0].length)return null;let s,a,o,l,[c,h]=qV(e[0][0]),m=c,g=h;for(let v=0;v<e.length;v++){const b=e[v];for(let x=0;x<b.length;x++){const $=qV(b[x]),[M,k]=$;if(c=Ky(c,M),h=Ky(h,k),m=ev(m,M),g=ev(g,k),i&&$.length>2){const U=$[2];s=Ky(s,U),a=ev(a,U)}if(r&&$.length>n){const U=$[n];o=Ky(s,U),l=ev(a,U)}const A=b[x];if(ED(A)||x<1)continue;const L=qV(b[x-1]),z=vme(c,h,m,g);[c,h,m,g]=mRe(z,L,A)}}return i?r?(t[0]=c,t[1]=h,t[2]=s,t[3]=o,t[4]=m,t[5]=g,t[6]=a,t[7]=l,t.length=8,t):(t[0]=c,t[1]=h,t[2]=s,t[3]=m,t[4]=g,t[5]=a,t.length=6,t):r?(t[0]=c,t[1]=h,t[2]=o,t[3]=m,t[4]=g,t[5]=l,t.length=6,t):(t[0]=c,t[1]=h,t[2]=m,t[3]=g,t.length=4,t)}function Hme(t,e,i,r,n,s){const a=e.xmin,o=e.xmax,l=e.ymin,c=e.ymax;let h=e.zmin,m=e.zmax,g=e.mmin,v=e.mmax;return n?(h=h||0,m=m||0,s?(g=g||0,v=v||0,t[0]=a,t[1]=l,t[2]=h,t[3]=g,t[4]=o,t[5]=c,t[6]=m,t[7]=v,t):(t[0]=a,t[1]=l,t[2]=h,t[3]=o,t[4]=c,t[5]=m,t)):s?(g=g||0,v=v||0,t[0]=a,t[1]=l,t[2]=g,t[3]=o,t[4]=c,t[5]=v,t):(t[0]=a,t[1]=l,t[2]=o,t[3]=c,t)}function TZ(t,e,i,r,n,s){const a=i?3:2,o=r&&s,l=i&&n;if(!e.length||!e[0].length)return null;let c,h,m,g,[v,b]=e[0],[x,$]=e[0];for(let M=0;M<e.length;M++){const k=e[M],[A,L]=k;if(v=Ky(v,A),b=Ky(b,L),x=ev(x,A),$=ev($,L),l&&k.length>2){const z=k[2];c=Ky(c,z),h=ev(h,z)}if(o&&k.length>a){const z=k[a];m=Ky(c,z),g=ev(h,z)}}return n?(c=c||0,h=h||0,s?(m=m||0,g=g||0,t[0]=v,t[1]=b,t[2]=c,t[3]=m,t[4]=x,t[5]=$,t[6]=h,t[7]=g,t):(t[0]=v,t[1]=b,t[2]=c,t[3]=x,t[4]=$,t[5]=h,t)):s?(m=m||0,g=g||0,t[0]=v,t[1]=b,t[2]=m,t[3]=x,t[4]=$,t[5]=g,t):(t[0]=v,t[1]=b,t[2]=x,t[3]=$,t)}function gRe(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function yRe(t){return t.points!==void 0}function vRe(t){return t.x!==void 0&&t.y!==void 0}function bRe(t){return t.paths!==void 0}function wRe(t){return t.rings!==void 0}const IZ=[];function Gme(t,e,i,r){return{xmin:t,ymin:e,xmax:i,ymax:r}}function Wme(t,e,i,r,n,s){return{xmin:t,ymin:e,zmin:i,xmax:r,ymax:n,zmax:s}}function Zme(t,e,i,r,n,s){return{xmin:t,ymin:e,mmin:i,xmax:r,ymax:n,mmax:s}}function Yme(t,e,i,r,n,s,a,o){return{xmin:t,ymin:e,zmin:i,mmin:r,xmax:n,ymax:s,zmax:a,mmax:o}}function MZ(t,e=!1,i=!1){return e?i?Yme(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]):Wme(t[0],t[1],t[2],t[3],t[4],t[5]):i?Zme(t[0],t[1],t[2],t[3],t[4],t[5]):Gme(t[0],t[1],t[2],t[3])}function gxt(t){return t?gRe(t)?t:vRe(t)?_Re(t):wRe(t)?Xme(t):bRe(t)?Qme(t):yRe(t)?Jme(t):null:null}function Jme(t){const{hasZ:e,hasM:i,points:r}=t,n=TZ(IZ,r,e??!1,i??!1,e??!1,i??!1);return n?MZ(n,e,i):null}function _Re(t){const{x:e,y:i,z:r,m:n}=t,s=n!=null;return r!=null?s?Yme(e,i,r,n,e,i,r,n):Wme(e,i,r,e,i,r):s?Zme(e,i,n,e,i,n):Gme(e,i,e,i)}function Xme(t){const{hasZ:e,hasM:i,rings:r,curveRings:n}=t,s=KS(IZ,n??r,e??!1,i??!1);return s?MZ(s,e,i):null}function Qme(t){const{hasZ:e,hasM:i,paths:r,curvePaths:n}=t,s=KS(IZ,n??r,e??!1,i??!1);return s?MZ(s,e,i):null}function eT(t,e,i=!1){let{hasM:r,hasZ:n}=t;Array.isArray(e)?e.length!==4||r||n?e.length===3&&i&&!r?(n=!0,r=!1):e.length===3&&r&&n&&(r=!1,n=!1):(r=!0,n=!0):(n=!n&&e.hasZ&&(!r||e.hasM),r=!r&&e.hasM&&(!n||e.hasZ)),t.hasZ=n,t.hasM=r}var E8;function xRe(t){var s;if(!t)return;let{points:e,hasM:i,hasZ:r,spatialReference:n}=t;switch(e??(e=[]),(s=e==null?void 0:e.at(0))==null?void 0:s.length){case 4:r??(r=!0),i??(i=!0);break;case 3:r??(r=i!==!0),i??(i=!r);break;default:r??(r=!1),i??(i=!1)}return n??(n=tt.WGS84),{...t,hasM:i,hasZ:r,points:e,spatialReference:n}}let lu=E8=class extends Rs{constructor(t){super(xRe(t)),this.points=[],this.type="multipoint"}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const t=Jme(this);return t?new Yt({...t,spatialReference:this.spatialReference}):null}writePoints(t,e){e.points=he(this.points)}clone(){const{points:t,spatialReference:e,hasM:i,hasZ:r}=this;return new E8({points:he(t),spatialReference:e.clone(),hasM:i,hasZ:r})}addPoint(t){return eT(this,t),Array.isArray(t)?this.points.push(t):this.points.push(t.toArray()),this.notifyChange("points"),this}getPoint(t){if(!this._validateInputs(t))return null;const e=this.points[t],i={x:e[0],y:e[1],spatialReference:this.spatialReference};let r=2;return this.hasZ&&(i.z=e[2],r=3),this.hasM&&(i.m=e[r]),new St(i)}removePoint(t){if(!this._validateInputs(t))return null;const e=new St(this.points.splice(t,1)[0],this.spatialReference);return this.notifyChange("points"),e}setPoint(t,e){return this._validateInputs(t)?(eT(this,e),Array.isArray(e)||(e=e.toArray()),this.points[t]=e,this.notifyChange("points"),this):this}toJSON(t){return this.write({},t)}_validateInputs(t){return t!=null&&t>=0&&t<this.points.length}};d([f({readOnly:!0})],lu.prototype,"cache",null),d([f({readOnly:!0})],lu.prototype,"extent",null),d([f({type:[[Number]],json:{write:{isRequired:!0}}})],lu.prototype,"points",void 0),d([Ge("points")],lu.prototype,"writePoints",null),lu=E8=d([V("esri.geometry.Multipoint")],lu),lu.prototype.toJSON.isDefaultToJSON=!0;function kD(t){const e=[];for(t.reset();t.nextPath();){const i=[];for(;t.nextPoint();)i.push([t.x,t.y]);e.push(i)}return t.reset(),e}function mv(t){const e=[];for(;t.nextPoint();)e.push([t.x,t.y]);return t.seekPathStart(),e}function yxt(t){if(!t)return null;if(Array.isArray(t))return t;const e=t.hasZ,i=t.hasM;if(t.type==="point")return i&&e?[t.x,t.y,t.z,t.m]:e?[t.x,t.y,t.z]:i?[t.x,t.y,t.m]:[t.x,t.y];if(t.type==="polygon")return t.rings.slice();if(t.type==="polyline")return t.paths.slice();if(t.type==="multipoint")return t.points.map(r=>[r]);if(t.type==="extent"){const r=t.clone().normalize();if(!r)return null;let n=!1,s=!1;return r.forEach(a=>{a.hasZ&&(n=!0),a.hasM&&(s=!0)}),r.map(a=>{const o=[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]];if(n&&a.hasZ){const l=.5*(a.zmax-a.zmin);for(let c=0;c<o.length;c++)o[c].push(l)}if(s&&a.hasM){const l=.5*(a.mmax-a.mmin);for(let c=0;c<o.length;c++)o[c].push(l)}return o})}return null}function AD(t,e){const i=e[0]-t[0],r=e[1]-t[1];if(t.length>2&&e.length>2){const n=t[2]-e[2];return Math.sqrt(i*i+r*r+n*n)}return Math.sqrt(i*i+r*r)}function Kme(t,e,i){const r=t[0]+i*(e[0]-t[0]),n=t[1]+i*(e[1]-t[1]);return t.length>2&&e.length>2?[r,n,t[2]+i*(e[2]-t[2])]:[r,n]}function $Re(t,e,i,r){return ege(t,e,i[r],i[r+1])}function ege(t,e,i,r){const[n,s]=e,[a,o]=i,[l,c]=r,h=l-a,m=c-o,g=h*h+m*m,v=(n-a)*h+(s-o)*m,b=Math.min(1,Math.max(0,v/g));return t[0]=a+h*b,t[1]=o+m*b,t}function SRe(t,e,i,r,n,s){let a=i,o=r,l=n-a,c=s-o;if(l!==0||c!==0){const h=((t-a)*l+(e-o)*c)/(l*l+c*c);h>1?(a=n,o=s):h>0&&(a+=l*h,o+=c*h)}return l=t-a,c=e-o,l*l+c*c}function tge(t,e){return Kme(t,e,.5)}function TRe(t){const e=t.length;let i=0;for(let r=0;r<e-1;++r)i+=AD(t[r],t[r+1]);return i}function vxt(t,e){if(e<=0)return t[0];const i=t.length;let r=0;for(let n=0;n<i-1;++n){const s=AD(t[n],t[n+1]);if(e-r<s){const a=(e-r)/s;return Kme(t[n],t[n+1],a)}r+=s}return t[i-1]}function ige(t,e=0,i=1){let r=0;const n=t.length;let s=t[0];for(let a=1;a<n;a++){const o=t[a];r+=(o[e]-s[e])*(o[i]+s[i]),s=o}if(rge(t)){const a=t[0];r+=(a[e]-s[e])*(a[i]+s[i])}return r>=0}function rge(t){const e=t.length;return e>0&&!lD(t[0],t[e-1])}function bxt(t){"rings"in t&&(IRe(t),MRe(t))}function IRe(t){if("rings"in t)for(const e of t.rings)rge(e)&&e.push(e[0].slice())}function MRe(t){if(!("rings"in t)||t.rings.length===0||ige(t.rings[0]))return!1;for(const e of t.rings)e.reverse();return!0}function wxt(t){return t.type!=="polygon"&&t.type!=="polyline"||CRe(t.type==="polygon"?t.rings:t.paths,t.spatialReference),t}function CRe(t,e){const i=Bo(e);if(!i)return;const r=i.valid[0],n=i.valid[1],s=n-r;for(const a of t){let o=1/0,l=-1/0;for(const h of a){const m=ERe(h[0],r,n);o=Math.min(o,m),l=Math.max(l,m),h[0]=m}const c=l-o;s-c<c&&a.forEach(h=>{h[0]<0&&(h[0]+=s)})}}function ERe(t,e,i){const r=i-e;return t<e?i-(e-t)%r:t>i?e+(t-e)%r:t}function _xt(t,e){if(t===e)return!0;if(t.type!==e.type)return!1;if(t.type==="point"||t.type==="mesh"||t.type==="extent")return!0;if(t.type==="multipoint")return t.points.length===e.points.length;const[i,r]=t.type==="polyline"?[t.paths,e.paths]:[t.rings,e.rings];return i.length===r.length&&i.every((n,s)=>n.length===r[s].length)}function xxt(t){return t?t.hasZ?[t.xmax-t.xmin/2,t.ymax-t.ymin/2,t.zmax-t.zmin/2]:[t.xmax-t.xmin/2,t.ymax-t.ymin/2]:null}function nge(t){return kRe(t.rings,t.hasZ??!1)}function sge(t){const e=nge(t);if(!e)return null;const{hasZ:i,spatialReference:r}=t,[n,s,a]=e;return isNaN(n)||isNaN(s)||i&&isNaN(a)?null:{x:n,y:s,z:i?a:void 0,spatialReference:r}}function kRe(t,e){if(!(t!=null&&t.length))return null;const i=[],r=[],n=e?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let s=0,a=t.length;s<a;s++){const o=age(t[s],e,n);o&&r.push(o)}if(r.sort((s,a)=>{let o=s[2]-a[2];return o===0&&e&&(o=s[4]-a[4]),o}),r.length&&(i[0]=r[0][0],i[1]=r[0][1],e&&(i[2]=r[0][3]),(i[0]<n[0]||i[0]>n[1]||i[1]<n[2]||i[1]>n[3]||e&&(i[2]<n[4]||i[2]>n[5]))&&(i.length=0)),!i.length){const s=t[0]&&t[0].length?PRe(t[0],e):null;if(!s)return null;i[0]=s[0],i[1]=s[1],e&&s.length>2&&(i[2]=s[2])}return i}function age(t,e,i){let r=0,n=0,s=0,a=0,o=0;const l=t.length?t[0][0]:0,c=t.length?t[0][1]:0,h=t.length&&e?t[0][2]:0;for(let g=0;g<t.length;g++){const v=t[g],b=t[(g+1)%t.length],[x,$,M]=v,k=x-l,A=$-c,[L,z,U]=b,B=L-l,X=z-c,J=k*X-B*A;if(a+=J,r+=(k+B)*J,n+=(A+X)*J,e&&v.length>2&&b.length>2){const Q=M-h,le=U-h,ie=k*le-B*Q;s+=(Q+le)*ie,o+=ie}x<i[0]&&(i[0]=x),x>i[1]&&(i[1]=x),$<i[2]&&(i[2]=$),$>i[3]&&(i[3]=$),e&&(M<i[4]&&(i[4]=M),M>i[5]&&(i[5]=M))}if(a>0&&(a*=-1),o>0&&(o*=-1),!a)return null;a*=.5,o*=.5;const m=[r/(6*a)+l,n/(6*a)+c,a];return e&&(i[4]===i[5]||o===0?(m[3]=(i[4]+i[5])/2,m[4]=0):(m[3]=s/(6*o)+h,m[4]=o)),m}function ARe(t,e){let i=0,r=0,n=0;t.nextPoint();const s=t.pathSize?t.x:0,a=t.pathSize?t.y:0;for(let o=0;o<t.pathSize;o++){t.seekInPath(o);const l=[t.x,t.y];t.seekInPath((o+1)%t.pathSize);const c=[t.x,t.y],[h,m]=l,g=h-s,v=m-a,[b,x]=c,$=b-s,M=x-a,k=g*M-$*v;n+=k,i+=(g+$)*k,r+=(v+M)*k,h<e[0]&&(e[0]=h),h>e[1]&&(e[1]=h),m<e[2]&&(e[2]=m),m>e[3]&&(e[3]=m)}return n>0&&(n*=-1),n?(n*=.5,[i/(6*n)+s,r/(6*n)+a,n]):null}function PRe(t,e){const i=e?[0,0,0]:[0,0],r=e?[0,0,0]:[0,0];let n=0,s=0,a=0,o=0;for(let l=0,c=t.length;l<c-1;l++){const h=t[l],m=t[l+1];if(h&&m){i[0]=h[0],i[1]=h[1],r[0]=m[0],r[1]=m[1],e&&h.length>2&&m.length>2&&(i[2]=h[2],r[2]=m[2]);const g=AD(i,r);if(g){n+=g;const v=tge(h,m);s+=g*v[0],a+=g*v[1],e&&v.length>2&&(o+=g*v[2])}}}return n>0?e?[s/n,a/n,o/n]:[s/n,a/n]:t.length?t[0]:null}function oge(t){const{hasZ:e,totalSize:i}=t;if(i===0)return null;const r=[],n=[],s=e?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(t.reset();t.nextPath();){const a=age(mv(t),t.hasZ,s);a&&n.push(a)}if(n.sort((a,o)=>{let l=a[2]-o[2];return l===0&&e&&(l=a[4]-o[4]),l}),n.length&&(r[0]=n[0][0],r[1]=n[0][1],e&&(r[2]=n[0][3]),(r[0]<s[0]||r[0]>s[1]||r[1]<s[2]||r[1]>s[3]||e&&(r[2]<s[4]||r[2]>s[5]))&&(r.length=0)),!r.length){t.reset(),t.nextPath();const a=t.pathSize?ORe(t):null;if(!a)return null;r[0]=a[0],r[1]=a[1],e&&a.length>2&&(r[2]=a[2])}return r}function ORe(t){const{hasZ:e}=t,i=e?[0,0,0]:[0,0],r=e?[0,0,0]:[0,0];let n=0,s=0,a=0,o=0;if(t.nextPoint()){let l=t.x,c=t.y,h=t.z;for(;t.nextPoint();){const m=t.x,g=t.y,v=t.z;i[0]=l,i[1]=c,r[0]=m,r[1]=g,e&&(i[2]=h,r[2]=v);const b=AD(i,r);if(b){n+=b;const x=tge(i,r);s+=b*x[0],a+=b*x[1],e&&x.length>2&&(o+=b*x[2])}l=m,c=g,h=v}}return n>0?e?[s/n,a/n,o/n]:[s/n,a/n]:t.pathSize?(t.seekPathStart(),t.nextPoint(),[t.x,t.y]):null}const LRe=1e-6;function FRe(t){let e=0;for(t.reset();t.nextPath();)e+=t.getCurrentRingArea();if(e<LRe){const n=oge(t);return n?[n[0],n[1]]:null}const i=[0,0];if(t.reset(),!t.nextPath()||!t.nextPoint())return null;const r=[t.x,t.y];for(t.reset();t.nextPath();)zRe(i,r,t);return i[0]*=1/e,i[1]*=1/e,i[0]+=r[0],i[1]+=r[1],i}const RRe=1/3;function zRe(t,e,i){if(!t||!i||i.pathSize<3)return null;i.nextPoint();const r=i.x,n=i.y;i.nextPoint();let s,a=i.x-r,o=i.y-n,l=0,c=0;for(;i.nextPoint();)l=i.x-r,c=i.y-n,s=.5*RRe*(l*o-c*a),t[0]+=s*(a+l),t[1]+=s*(o+c),a=l,o=c;const h=i.getCurrentRingArea(),m=[r,n];return m[0]-=e[0],m[1]-=e[1],m[0]*=h,m[1]*=h,t[0]+=m[0],t[1]+=m[1],t}var Z3;function Bie(t){return!Array.isArray(t[0])}function NRe(t){var e;return typeof((e=t[0])==null?void 0:e[0])=="number"}function DRe(t){var s,a;if(!t)return;let{rings:e,hasM:i,hasZ:r,spatialReference:n}=t;switch(e??(e=[]),NRe(e)&&(e=[e]),(a=(s=e[0])==null?void 0:s[0])==null?void 0:a.length){case 4:r??(r=!0),i??(i=!0);break;case 3:r??(r=i!==!0),i??(i=!r);break;default:r??(r=!1),i??(i=!1)}return n??(n=tt.WGS84),{...t,hasM:i,hasZ:r,rings:e,spatialReference:n}}let Nr=Z3=class extends Rs{static fromExtent(t){const e=t.clone().normalize(),{spatialReference:i}=t;let r=!1,n=!1;for(const a of e)a.hasZ&&(r=!0),a.hasM&&(n=!0);const s={rings:e.map(a=>{const o=[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]];if(r&&a.hasZ){const l=a.zmin+.5*(a.zmax-a.zmin);for(let c=0;c<o.length;c++)o[c].push(l)}if(n&&a.hasM){const l=a.mmin+.5*(a.mmax-a.mmin);for(let c=0;c<o.length;c++)o[c].push(l)}return o}),spatialReference:i};return r&&(s.hasZ=!0),n&&(s.hasM=!0),new Z3(s)}constructor(t){super(DRe(t)),this.curveRings=void 0,this.rings=[],this.type="polygon"}get cache(){return this.commitProperty("curveRings"),this.commitProperty("hasM"),this.commitProperty("hasZ"),this.commitProperty("rings"),this.commitProperty("spatialReference"),{}}get centroid(){l8(Ie.getLogger(this),"centroid",{replacement:"Please use centroidOperator.execute() instead.",version:"4.34",warnOnce:!0});const t=sge(this);return t?St.fromJSON(t):null}writeCurveRings(t,e){e.curveRings=he(t)}get extent(){const t=Xme(this),{spatialReference:e}=this;return t?new Yt({...t,spatialReference:e}):null}get isSelfIntersecting(){return l8(Ie.getLogger(this),"isSelfIntersecting",{replacement:"Please use simplifyOperator.isSimple() instead.",version:"4.33",warnOnce:!0}),WLe(this.rings)}writeRings(t,e){e.rings=he(this.rings)}addRing(t){if(!t)return;const e=this.rings,i=e.length;if(Bie(t)){const r=[];for(let n=0,s=t.length;n<s;n++)r[n]=t[n].toArray();e[i]=r}else e[i]=t.slice();return this.notifyChange("rings"),this}clone(){const t=new Z3;return t.spatialReference=this.spatialReference,t.rings=he(this.rings),t.curveRings=he(this.curveRings),t.hasZ=this.hasZ,t.hasM=this.hasM,t}equals(t){if(this===t)return!0;if(t==null)return!1;const e=this.spatialReference,i=t.spatialReference;if(e!=null!=(i!=null)||e!=null&&i!=null&&!e.equals(i)||this.rings.length!==t.rings.length)return!1;const r=([n,s,a,o],[l,c,h,m])=>n===l&&s===c&&(a==null&&h==null||a===h)&&(o==null&&m==null||o===m);for(let n=0;n<this.rings.length;n++){const s=this.rings[n],a=t.rings[n];if(!lD(s,a,r))return!1}return!0}contains(t){if(!t)return!1;const e=xD(t,this.spatialReference);return gZ(this,e??t)}isClockwise(t){const e=Bie(t)?t.map(i=>this.hasZ?this.hasM?[i.x,i.y,i.z,i.m]:[i.x,i.y,i.z]:[i.x,i.y]):t;return ige(e)}getPoint(t,e){if(!this._validateInputs(t,e))return null;const i=this.rings[t][e],r=this.hasZ,n=this.hasM;return r&&!n?new St(i[0],i[1],i[2],void 0,this.spatialReference):n&&!r?new St(i[0],i[1],void 0,i[2],this.spatialReference):r&&n?new St(i[0],i[1],i[2],i[3],this.spatialReference):new St(i[0],i[1],this.spatialReference)}insertPoint(t,e,i){return this._validateInputs(t,e,!0)?(eT(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[t].splice(e,0,i),this.notifyChange("rings"),this):this}removePoint(t,e){if(!this._validateInputs(t,e))return null;const i=new St(this.rings[t].splice(e,1)[0],this.spatialReference);return this.notifyChange("rings"),i}removeRing(t){if(!this._validateInputs(t,null))return null;const e=this.rings.splice(t,1)[0],i=this.spatialReference,r=e.map(n=>new St(n,i));return this.notifyChange("rings"),r}setPoint(t,e,i){return this._validateInputs(t,e)?(eT(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[t][e]=i,this.notifyChange("rings"),this):this}_validateInputs(t,e,i=!1){if(t==null||t<0||t>=this.rings.length)return!1;if(e!=null){const r=this.rings[t];if(i&&(e<0||e>r.length)||!i&&(e<0||e>=r.length))return!1}return!0}toJSON(t){return this.write({},t)}};d([f({readOnly:!0})],Nr.prototype,"cache",null),d([f({readOnly:!0})],Nr.prototype,"centroid",null),d([f({json:{write:!0,origins:{"portal-item":{write:!1},"web-map":{write:!1},"web-scene":{write:!1}}}})],Nr.prototype,"curveRings",void 0),d([Ge("curveRings")],Nr.prototype,"writeCurveRings",null),d([f({readOnly:!0})],Nr.prototype,"extent",null),d([f({readOnly:!0})],Nr.prototype,"isSelfIntersecting",null),d([f({type:[[[Number]]],json:{write:{isRequired:!0}}})],Nr.prototype,"rings",void 0),d([Ge("rings")],Nr.prototype,"writeRings",null),Nr=Z3=d([V("esri.geometry.Polygon")],Nr),Nr.prototype.toJSON.isDefaultToJSON=!0;var k8;function jRe(t){return!Array.isArray(t[0])}function VRe(t){var e;return typeof((e=t[0])==null?void 0:e[0])=="number"}function URe(t){var s,a;if(!t)return;let{paths:e,hasM:i,hasZ:r,spatialReference:n}=t;switch(e??(e=[]),VRe(e)&&(e=[e]),(a=(s=e[0])==null?void 0:s[0])==null?void 0:a.length){case 4:r??(r=!0),i??(i=!0);break;case 3:r??(r=i!==!0),i??(i=!r);break;default:r??(r=!1),i??(i=!1)}return n??(n=tt.WGS84),{...t,hasM:i,hasZ:r,paths:e,spatialReference:n}}let _n=k8=class extends Rs{constructor(t){super(URe(t)),this.curvePaths=void 0,this.paths=[],this.type="polyline"}get cache(){return this.commitProperty("curvePaths"),this.commitProperty("hasM"),this.commitProperty("hasZ"),this.commitProperty("paths"),this.commitProperty("spatialReference"),{}}writeCurvePaths(t,e){e.curvePaths=he(t)}get extent(){const t=Qme(this),{spatialReference:e}=this;return t?new Yt({...t,spatialReference:e}):null}writePaths(t,e){e.paths=he(this.paths)}addPath(t){if(!t)return;const e=this.paths,i=e.length;if(jRe(t)){const r=[];for(let n=0,s=t.length;n<s;n++)r[n]=t[n].toArray();e[i]=r}else e[i]=t.slice();return this.notifyChange("paths"),this}clone(){const t=new k8;return t.spatialReference=this.spatialReference,t.paths=he(this.paths),t.curvePaths=he(this.curvePaths),t.hasZ=this.hasZ,t.hasM=this.hasM,t}getPoint(t,e){if(!this._validateInputs(t,e))return null;const i=this.paths[t][e],r=this.hasZ,n=this.hasM;return r&&!n?new St(i[0],i[1],i[2],void 0,this.spatialReference):n&&!r?new St(i[0],i[1],void 0,i[2],this.spatialReference):r&&n?new St(i[0],i[1],i[2],i[3],this.spatialReference):new St(i[0],i[1],this.spatialReference)}insertPoint(t,e,i){return this._validateInputs(t,e,!0)?(eT(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[t].splice(e,0,i),this.notifyChange("paths"),this):this}removePath(t){if(!this._validateInputs(t,null))return null;const e=this.paths.splice(t,1)[0],i=this.spatialReference,r=e.map(n=>new St(n,i));return this.notifyChange("paths"),r}removePoint(t,e){if(!this._validateInputs(t,e))return null;const i=new St(this.paths[t].splice(e,1)[0],this.spatialReference);return this.notifyChange("paths"),i}setPoint(t,e,i){return this._validateInputs(t,e)?(eT(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[t][e]=i,this.notifyChange("paths"),this):this}_validateInputs(t,e,i=!1){if(t==null||t<0||t>=this.paths.length)return!1;if(e!=null){const r=this.paths[t];if(i&&(e<0||e>r.length)||!i&&(e<0||e>=r.length))return!1}return!0}toJSON(t){return this.write({},t)}};d([f({readOnly:!0})],_n.prototype,"cache",null),d([f({json:{write:!0,origins:{"portal-item":{write:!1},"web-map":{write:!1},"web-scene":{write:!1}}}})],_n.prototype,"curvePaths",void 0),d([Ge("curvePaths")],_n.prototype,"writeCurvePaths",null),d([f({readOnly:!0})],_n.prototype,"extent",null),d([f({type:[[[Number]]],json:{write:{isRequired:!0}}})],_n.prototype,"paths",void 0),d([Ge("paths")],_n.prototype,"writePaths",null),_n=k8=d([V("esri.geometry.Polyline")],_n),_n.prototype.toJSON.isDefaultToJSON=!0;function Ro(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function z$(t){return t.points!==void 0}function wE(t){return t.x!==void 0&&t.y!==void 0}function La(t){return t.paths!==void 0||t.curvePaths!==void 0}function Un(t){return t.rings!==void 0||t.curveRings!==void 0}function jp(t){return t==null?null:t instanceof Rs?t:wE(t)?St.fromJSON(t):La(t)?_n.fromJSON(t):Un(t)?Nr.fromJSON(t):z$(t)?lu.fromJSON(t):Ro(t)?Yt.fromJSON(t):null}function g_(t){return t?wE(t)?"esriGeometryPoint":La(t)?"esriGeometryPolyline":Un(t)?"esriGeometryPolygon":Ro(t)?"esriGeometryEnvelope":z$(t)?"esriGeometryMultipoint":null:null}const BRe={esriGeometryPoint:St,esriGeometryPolyline:_n,esriGeometryPolygon:Nr,esriGeometryEnvelope:Yt,esriGeometryMultipoint:lu,esriGeometryMultiPatch:Nr};function qRe(t){return t&&BRe[t]||null}const HRe=Es()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),qie=Es()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"}),jT={base:Rs,key:"type",typeMap:{extent:Yt,multipoint:lu,point:St,polyline:_n,polygon:Nr}};function $xt(t){return t.type==="point"}function Sxt(t){return t.type==="multipoint"}function Txt(t){return t.type==="polygon"}function Ixt(t){return t.type==="polyline"}var A8;let hy=A8=class extends $e{constructor(t){super(t),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(t){return(t%=360)<0&&(t+=360),t}clone(){return new A8({rotation:this.rotation,scale:this.scale,targetGeometry:this.targetGeometry!=null?this.targetGeometry.clone():null,camera:this.camera!=null?this.camera.clone():null})}};d([f({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:HV}}}}})],hy.prototype,"rotation",void 0),d([_i("rotation")],hy.prototype,"castRotation",null),d([f({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:HV}}}}})],hy.prototype,"scale",void 0),d([f({types:jT,json:{read:jp,write:!0,origins:{"web-scene":{read:jp,write:{overridePolicy:HV}}}}})],hy.prototype,"targetGeometry",void 0),d([f({type:FLe,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}})],hy.prototype,"camera",void 0),hy=A8=d([V("esri.Viewpoint")],hy);const Ds=hy;function HV(){return{enabled:!this.camera}}const PD=t=>{const e=t;class i extends e{constructor(){super(...arguments),this._listenersMap=null}clearEvents(){var n;(n=this._listenersMap)==null||n.clear(),this._listenersMap=null}destroy(){this.clearEvents()}emit(n,s){var l;let a=(l=this._listenersMap)==null?void 0:l.get(n);if(!a)return!1;let o=!1;for(const c of a.slice()){const h="deref"in c?c.deref():c;h?h==null||h.call(this,s):o=!0}return o&&(a=a.filter(c=>!("deref"in c)||c.deref()!=null),this._listenersMap.set(n,a)),a.length>0}on(n,s){if(Array.isArray(n)){const o=n.map(l=>this.on(l,s));return h_(o)}if(n.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap??(this._listenersMap=new Map);const a=this._listenersMap.get(n)||[];return a.push(s),this._listenersMap.set(n,a),Ii(()=>{var c;const o=(c=this._listenersMap)==null?void 0:c.get(n),l=(o==null?void 0:o.indexOf(s))??-1;l>=0&&o.splice(l,1)})}once(n,s){const a=this.on(n,o=>{a.remove();const l="deref"in s?s.deref():s;l==null||l.call(null,o)});return a}hasEventListener(n){var a;const s=(a=this._listenersMap)==null?void 0:a.get(n);return s!=null&&s.length>0}}return i},lge=PD(class{}),cge=lge,VT=PD(et);function CZ(t){return(e,i)=>{e[i]=t}}var Rf;let GRe=class{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(e){this.defaultPrevented=!1,this.item=e}},WRe=class{constructor(e,i,r,n,s){this.target=e,this.added=i,this.removed=r,this.start=n,this.deleteCount=s}};const Uc=new Vv(()=>new GRe,void 0,t=>{t.item=null,t.target=null,t.defaultPrevented=!1,t.cancellable=!1});function Hie(t){t&&typeof t=="object"&&"destroy"in t&&typeof t.destroy=="function"&&t.destroy()}function GV(t){return t?t instanceof Ay?t.toArray():t.length?Array.prototype.slice.apply(t):[]:[]}function WV(t){if(t!=null&&t.length)return t[0]}function ZRe(t,e,i,r){const n=Math.min(t.length-i,e.length-r);let s=0;for(;s<n&&t[i+s]===e[r+s];)s++;return s}function uge(t,e,i,r){e&&e.forEach((n,s,a)=>{t.push(n),uge(t,i.call(r,n,s,a),i,r)})}const Yg=new Set,Jg=new Set,Xg=new Set,ZV=new Map;let YRe=0,Ay=Rf=class extends VT{static ofType(t){if(!t)return Rf;if(ZV.has(t))return ZV.get(t);let e=null;if(typeof t=="function")e=t.prototype.declaredClass;else if(t.base)e=t.base.prototype.declaredClass;else for(const r in t.typeMap){const n=t.typeMap[r].prototype.declaredClass;e?e+=` | ${n}`:e=n}let i=class extends Rf{};return d([CZ({Type:t,ensureType:typeof t=="function"?Wn(t):Rp(t)})],i.prototype,"itemType",void 0),i=d([V(`esri.core.Collection<${e}>`)],i),ZV.set(t,i),i}static isCollection(t){return t!=null&&t instanceof Rf}constructor(t){super(t),this._chgListeners=[],this._notifications=null,this._updating=!1,this._timer=null,this._observable=new p_,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:YRe++})}normalizeCtorArgs(t){return t?Array.isArray(t)||t instanceof Rf?{items:t}:t:{}}destroy(){this._removeAllRaw(),this._timer&&this._timer.remove(),super.destroy(),this._notifications=null}*[Symbol.iterator](){yield*this.items}get items(){return xt(this._observable),this._items}set items(t){this._emitBeforeChanges(1)||(this._splice(0,this.length,GV(t)),this._emitAfterChanges(1))}hasEventListener(t){return!this.destroyed&&(t==="change"?this._chgListeners.length>0:super.hasEventListener(t))}on(t,e){if(this.destroyed)return Ii();if(t==="change"){const i=this._chgListeners,r={removed:!1,callback:e};return i.push(r),this._notifications&&this._notifications.push({listeners:i.slice(),items:this._items.slice(),changes:[]}),Ii(()=>{r.removed=!0,i.splice(i.indexOf(r),1)})}return super.on(t,e)}once(t,e){const i="deref"in e?()=>e.deref():()=>e,r=this.on(t,n=>{var s;(s=i())==null||s.call(null,n),r.remove()});return r}add(t,e){if(xt(this._observable),this._emitBeforeChanges(1))return this;const i=this.getNextIndex(e??null);return this._splice(i,0,[t]),this._emitAfterChanges(1),this}addMany(t,e=this._items.length){if(xt(this._observable),!(t!=null&&t.length))return this;if(this._emitBeforeChanges(1))return this;const i=this.getNextIndex(e);return this._splice(i,0,GV(t)),this._emitAfterChanges(1),this}at(t){if(xt(this._observable),(t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this._items[t]}removeAll(){if(xt(this._observable),!this.length||this._emitBeforeChanges(2))return[];const t=this._removeAllRaw();return this._emitAfterChanges(2),t}_removeAllRaw(){return this.length===0?[]:this._splice(0,this.length)||[]}clone(){return xt(this._observable),this._createNewInstance({items:this._items.map(he)})}concat(...t){xt(this._observable);const e=t.map(GV);return this._createNewInstance({items:this._items.concat(...e)})}drain(t,e){if(xt(this._observable),!this.length||this._emitBeforeChanges(2))return;const i=this._splice(0,this.length),r=i.length;for(let n=0;n<r;n++)t.call(e,i[n],n,i);this._emitAfterChanges(2)}destroyAll(){this.drain(Hie)}destroyMany(t){const e=this.removeMany(t);return e.forEach(Hie),e}every(t,e){return xt(this._observable),this._items.every(t,e)}filter(t,e){xt(this._observable);const i=arguments.length===2?this._items.filter(t,e):this._items.filter(t);return this._createNewInstance({items:i})}find(t,e){return xt(this._observable),this._items.find(t,e)}findIndex(t,e){return xt(this._observable),this._items.findIndex(t,e)}flatten(t,e){xt(this._observable);const i=[];return uge(i,this,t,e),new Rf(i)}forEach(t,e){return xt(this._observable),this._items.forEach(t,e)}getItemAt(t){return xt(this._observable),this._items[t]}getNextIndex(t){xt(this._observable);const e=this.length;return(t=t??e)<0?t=0:t>e&&(t=e),t}includes(t,e=0){return xt(this._observable),this._items.includes(t,e)}indexOf(t,e=0){return xt(this._observable),this._items.indexOf(t,e)}join(t=","){return xt(this._observable),this._items.join(t)}lastIndexOf(t,e=this.length-1){return xt(this._observable),this._items.lastIndexOf(t,e)}map(t,e){xt(this._observable);const i=this._items.map(t,e);return new Rf({items:i})}reorder(t,e=this.length-1){xt(this._observable);const i=this.indexOf(t);if(i!==-1){if(e<0?e=0:e>=this.length&&(e=this.length-1),i!==e){if(this._emitBeforeChanges(4))return t;this._splice(i,1),this._splice(e,0,[t]),this._emitAfterChanges(4)}return t}}pop(){if(xt(this._observable),!this.length||this._emitBeforeChanges(2))return;const t=WV(this._splice(this.length-1,1));return this._emitAfterChanges(2),t}push(...t){return xt(this._observable),this._emitBeforeChanges(1)||(this._splice(this.length,0,t),this._emitAfterChanges(1)),this.length}reduce(t,e){xt(this._observable);const i=this._items;return arguments.length===2?i.reduce(t,e):i.reduce(t)}reduceRight(t,e){xt(this._observable);const i=this._items;return arguments.length===2?i.reduceRight(t,e):i.reduceRight(t)}remove(t){return xt(this._observable),this.removeAt(this.indexOf(t))}removeAt(t){if(xt(this._observable),t<0||t>=this.length||this._emitBeforeChanges(2))return;const e=WV(this._splice(t,1));return this._emitAfterChanges(2),e}removeMany(t){if(xt(this._observable),!(t!=null&&t.length)||this._emitBeforeChanges(2))return[];const e=t instanceof Rf?t.toArray():t,i=this._items,r=[],n=e.length;for(let s=0;s<n;s++){const a=e[s],o=i.indexOf(a);if(o>-1){const l=1+ZRe(e,i,s+1,o+1),c=this._splice(o,l);c&&c.length>0&&r.push.apply(r,c),s+=l-1}}return this._emitAfterChanges(2),r}reverse(){if(xt(this._observable),this._emitBeforeChanges(4))return this;const t=this._splice(0,this.length);return t&&(t.reverse(),this._splice(0,0,t)),this._emitAfterChanges(4),this}shift(){if(xt(this._observable),!this.length||this._emitBeforeChanges(2))return;const t=WV(this._splice(0,1));return this._emitAfterChanges(2),t}slice(t=0,e=this.length){return xt(this._observable),this._createNewInstance({items:this._items.slice(t,e)})}some(t,e){return xt(this._observable),this._items.some(t,e)}sort(t){if(xt(this._observable),!this.length||this._emitBeforeChanges(4)||!this._requiresSort(t))return this;const e=this._splice(0,this.length);return arguments.length?e.sort(t):e.sort(),this._splice(0,0,e),this._emitAfterChanges(4),this}_requiresSort(t=(e,i)=>e===i?0:e<i?-1:1){const e=this.length-1;for(let i=0;i<e;i++)if(t(this.items[i],this.items[i+1])>0)return!0;return!1}splice(t,e,...i){xt(this._observable),arguments.length===1&&(e=this.length),e??(e=0);const r=(e?2:0)|(i.length?1:0);if(this._emitBeforeChanges(r))return[];const n=this._splice(t,e,i)||[];return this._emitAfterChanges(r),n}toArray(){return xt(this._observable),this._items.slice()}toJSON(t){return xt(this._observable),this.toArray().map(e=>hE(e)?e.toJSON(t):e)}toLocaleString(){return xt(this._observable),this._items.toLocaleString()}toString(){return xt(this._observable),this._items.toString()}unshift(...t){return xt(this._observable),!t.length||this._emitBeforeChanges(1)||(this._splice(0,0,t),this._emitAfterChanges(1)),this.length}_createNewInstance(t){return new this.constructor(t)}_splice(t,e,i){const r=this._items,n=this.itemType;let s,a;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._updating=!0,this._timer=ET(()=>this._dispatchChange())),t<0&&(t+=this.length),e){if(a=r.splice(t,e),this.hasEventListener("before-remove")){const o=Uc.acquire();o.target=this,o.cancellable=!0;for(let l=0,c=a.length;l<c;l++)s=a[l],o.reset(s),this.emit("before-remove",o),o.defaultPrevented&&(a.splice(l,1),r.splice(t,0,s),t+=1,l-=1,c-=1);Uc.release(o)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const o=Uc.acquire();o.target=this,o.cancellable=!1;const l=a.length;for(let c=0;c<l;c++)o.reset(a[c]),this.emit("after-remove",o);Uc.release(o)}}if(i!=null&&i.length){if(n){const h=[];for(const m of i){const g=n.ensureType(m);g==null&&m!=null||h.push(g)}i=h}const o=this.hasEventListener("before-add"),l=this.hasEventListener("after-add"),c=t===this.length;if(o||l){const h=Uc.acquire();h.target=this,h.cancellable=!0;const m=Uc.acquire();m.target=this,m.cancellable=!1;for(const g of i)o?(h.reset(g),this.emit("before-add",h),h.defaultPrevented||(c?r.push(g):r.splice(t++,0,g),this._set("length",r.length),l&&(m.reset(g),this.emit("after-add",m)))):(c?r.push(g):r.splice(t++,0,g),this._set("length",r.length),m.reset(g),this.emit("after-add",m));Uc.release(m),Uc.release(h)}else{if(c)for(const h of i)r.push(h);else r.splice(t,0,...i);this._set("length",r.length)}}if((i!=null&&i.length||a!=null&&a.length)&&this._notifyChangeEvent(i,a),this.hasEventListener("after-splice")){const o=new WRe(this,i,a,t,e);this.emit("after-splice",o)}return a}_emitBeforeChanges(t){let e=!1;if(this.hasEventListener("before-changes")){const i=Uc.acquire();i.target=this,i.cancellable=!0,i.type=t,this.emit("before-changes",i),e=i.defaultPrevented,Uc.release(i)}return e}_emitAfterChanges(t){if(this.hasEventListener("after-changes")){const e=Uc.acquire();e.target=this,e.cancellable=!1,e.type=t,this.emit("after-changes",e),Uc.release(e)}this._observable.notify()}_notifyChangeEvent(t,e){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:t,removed:e})}get updating(){return this._updating}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),this._updating=!1,!this._notifications)return;const t=this._notifications;this._notifications=null;for(const e of t){const i=e.changes;Yg.clear(),Jg.clear(),Xg.clear();for(const{added:l,removed:c}of i){if(l)if(Xg.size===0&&Jg.size===0)for(const h of l)Yg.add(h);else for(const h of l)Jg.has(h)?(Xg.add(h),Jg.delete(h)):Xg.has(h)||Yg.add(h);if(c)if(Xg.size===0&&Yg.size===0)for(const h of c)Jg.add(h);else for(const h of c)Yg.has(h)?Yg.delete(h):(Xg.delete(h),Jg.add(h))}const r=zo.acquire();Yg.forEach(l=>{r.push(l)});const n=zo.acquire();Jg.forEach(l=>{n.push(l)});const s=this._items,a=e.items,o=zo.acquire();if(Xg.forEach(l=>{a.indexOf(l)!==s.indexOf(l)&&o.push(l)}),e.listeners&&(r.length||n.length||o.length)){const l={target:this,added:r,removed:n,moved:o},c=e.listeners.length;for(let h=0;h<c;h++){const m=e.listeners[h];m.removed||m.callback.call(this,l)}}zo.release(r),zo.release(n),zo.release(o)}Yg.clear(),Jg.clear(),Xg.clear()}};d([f()],Ay.prototype,"_updating",void 0),d([f()],Ay.prototype,"length",void 0),d([f()],Ay.prototype,"items",null),d([f({readOnly:!0})],Ay.prototype,"updating",null),Ay=Rf=d([V("esri.core.Collection")],Ay);const Ue=Ay;let Id=class extends Ue{constructor(e){super(e),this.getCollections=null}initialize(){this.addHandles(Ppe(()=>this._refresh(),Nd))}destroy(){this.getCollections=null}_refresh(){var r;const e=(r=this.getCollections)==null?void 0:r.call(this);if(e==null)return void this.removeAll();let i=0;for(const n of e)n!=null&&(i=this._processCollection(i,n));this.splice(i)}_createNewInstance(e){return new Ue(e)}_processCollection(e,i){if(!i)return e;const r=this.itemFilterFunction??(n=>!!n);for(const n of i)if(n){if(r(n)){const s=this.indexOf(n,e);s>=0?s!==e&&this.reorder(n,e):this.add(n,e),++e}if(this.getChildrenFunction){const s=this.getChildrenFunction(n);if(Array.isArray(s))for(const a of s)e=this._processCollection(e,a);else e=this._processCollection(e,s)}}return e}};d([f()],Id.prototype,"getCollections",void 0),d([f()],Id.prototype,"getChildrenFunction",void 0),d([f()],Id.prototype,"itemFilterFunction",void 0),Id=d([V("esri.core.CollectionFlattener")],Id);let _E=class{constructor(e=i=>i.values().next().value){this._peeker=e,this._observable=new p_,this._items=new Set}get length(){return xt(this._observable),this._items.size}clear(){this.length!==0&&(this._items.clear(),this._observable.notify())}last(){if(this.length===0)return;let e;for(e of this._items);return e}peek(){if(this.length!==0)return this._peeker(this._items)}push(e){this.contains(e)||(this._items.add(e),this._observable.notify())}contains(e){return xt(this._observable),this._items.has(e)}pop(){if(this.length===0)return;const e=this.peek();return this._items.delete(e),this._observable.notify(),e}popLast(){if(this.length===0)return;const e=this.last();return this._items.delete(e),this._observable.notify(),e}remove(e){this.contains(e)&&(this._items.delete(e),this._observable.notify())}filter(e){const i=this.length;return this._items.forEach(r=>{e(r)||this._items.delete(r)}),i!==this._items.size&&this._observable.notify(),this}*[Symbol.iterator](){xt(this._observable),yield*this._items}};const dge=new FinalizationRegistry(t=>{t.close()});function JRe(t,e){dge.register(t,e,e)}function XRe(t){dge.unregister(t)}function hge(t,e){return new Proxy({},{get:(i,r,n)=>(...s)=>{let a,o;const l=s[s.length-1];return QRe(l)&&(a=l.signal,o=l.transferList,s.pop()),t.apply(e?`${e}.${r.toString()}`:r.toString(),s,{transferList:o,signal:a})}})}function QRe(t){return typeof t=="object"&&!Array.isArray(t)&&t!=null&&("signal"in t||"transferList"in t||Object.keys(t).length===0)}const KRe={statsWorker:()=>de(()=>import("./statsWorker-DIL38ROO.js"),__vite__mapDeps([0,1,2,3])),geometryEngineWorker:()=>de(()=>import("./geometryEngineWorker-DEn4VCml.js"),__vite__mapDeps([4,5,6,7])),arcadeGeometryOperatorsWorker:()=>de(()=>import("./operatorsWorker-36Gpvjp-.js"),[]),CSVSourceWorker:()=>de(()=>import("./CSVSourceWorker-VzZ3bcSQ.js"),__vite__mapDeps([8,9,10,11,12,13,14,15,16,17,18,19,20,1,2,3,21,22,23,24,25])),EdgeProcessingWorker:()=>de(()=>import("./EdgeProcessingWorker-CzNw-TTw.js"),__vite__mapDeps([26,27,28,29,30,31,32,33,34,35,36])),ElevationSamplerWorker:()=>de(()=>import("./ElevationSamplerWorker-98SD_N2h.js"),__vite__mapDeps([37,13,38,39,40,41,42,43,44,29,45])),FeatureServiceSnappingSourceWorker:()=>de(()=>import("./FeatureServiceSnappingSourceWorker-oZHSv3Pw.js"),__vite__mapDeps([46,10,11,12,13,14,15,16,17,18,19,20,1,2,3,21,22,47])),GaussianSplatSortWorker:()=>de(()=>import("./GaussianSplatSortWorker-QQPlimXW.js"),[]),GeoJSONSourceWorker:()=>de(()=>import("./GeoJSONSourceWorker-HZvvc26n.js"),__vite__mapDeps([48,11,10,12,13,14,15,16,17,18,19,20,1,2,3,21,22,49,9,25,50])),LercWorker:()=>de(()=>import("./LercWorker-BkOQBcuV.js"),[]),MemorySourceWorker:()=>de(()=>import("./MemorySourceWorker-DsxsmweK.js"),__vite__mapDeps([51,11,52,10,12,13,14,15,16,17,18,19,20,1,2,3,21,22,25,50,9])),PBFDecoderWorker:()=>de(()=>import("./PBFDecoderWorker-C8-63--h.js"),__vite__mapDeps([53,54,11])),FeaturePipelineWorker:()=>de(()=>import("./FeaturePipelineWorker-BrNFIwca.js"),__vite__mapDeps([55,56,57,31,58,59,11,60,15,14,61,62,63,64,65,16,17,18,19,20,1,2,3,21,22,66,67,68,69,70,71,72,73,49,9,25,50,74,75])),PointCloudWorker:()=>de(()=>import("./PointCloudWorker-BzHAitJv.js"),__vite__mapDeps([76,77,78,79,80,81,82,40,41,83,84])),RasterWorker:()=>de(()=>import("./RasterWorker-DJZetCdD.js"),__vite__mapDeps([85,86,87,7,88,89,90,91,92,93])),SceneLayerSnappingSourceWorker:()=>de(()=>import("./SceneLayerSnappingSourceWorker-DMcGJCC2.js"),__vite__mapDeps([94,95,96,84,78,97,98,83,29,33,34,35,28,30,31,32,36])),SceneLayerWorker:()=>de(()=>import("./SceneLayerWorker-rPlhdvfm.js"),__vite__mapDeps([99,38,44,100,42])),WFSSourceWorker:()=>de(()=>import("./WFSSourceWorker-CM1YZT4L.js"),__vite__mapDeps([101,11,10,12,13,14,15,16,17,18,19,20,1,2,3,21,22,49,9,50,102,103])),WorkerTileHandler:()=>de(()=>import("./WorkerTileHandler-BDKy3gEs.js"),__vite__mapDeps([104,105,106,63,107,108,32,31,109])),Lyr3DWorker:()=>de(()=>import("./Lyr3DWorker-D8pNqNvC.js"),[]),Feature3DPipelineWorker:()=>de(()=>import("./Feature3DPipelineWorker-D9LAvvXk.js"),__vite__mapDeps([110,17,11,18,19,14,15,20,1,2,3,21,22,111,43,38,100,42,112,79,113,35,29,114,96,84,78,95,115,116,98,83,82,77,40,41,32,31,28,30,117,118,119,120,121,122,123,124,125,126,13,127])),TextureCompressionWorker:()=>de(()=>import("./TextureCompressionWorker-BJqRMU_v.js"),[]),FlowWorker:()=>de(()=>import("./FlowWorker--mGeoq1Y.js"),__vite__mapDeps([128,93])),ParquetSourceWorker:()=>de(()=>import("./ParquetSourceWorker-CmSU1Jdg.js"),__vite__mapDeps([129,65,17,11,18,19,14,15,20,1,2,3,21,22,25,130,24,68,59,67,66])),PanoramicMeshWorker:()=>de(()=>import("./PanoramicMeshWorker-BbW8cxn7.js"),__vite__mapDeps([131,86]))},pge="worker:port-closed",jm={HANDSHAKE:0,OPEN:1,OPENED:2,RESPONSE:3,INVOKE:4,ABORT:5,CLOSE:6,OPEN_PORT:7,ON:8};let eze=0;function fge(){return eze++}function tze(t){return t&&typeof t=="object"&&("result"in t||"transferList"in t)}function bR(t){return t?typeof t=="string"?JSON.stringify({name:"message",message:t}):t.toJSON?JSON.stringify(t):JSON.stringify({name:t.name,message:t.message,details:t.details||{stack:t.stack}}):null}function mge(t,e,i,r){if(e.type===jm.OPEN_PORT)return void t.postMessage(e,[e.port]);if(e.type!==jm.INVOKE&&e.type!==jm.RESPONSE)return void t.postMessage(e);let n;tze(i)?(n=Gie(i.transferList),e.data=i.result):(n=Gie(r),e.data=i),n?t.postMessage(e,n):t.postMessage(e)}function xE(t){if(!t)return null;const e=t.data;return e?typeof e=="string"?JSON.parse(e):e:null}function Gie(t){if(!(t!=null&&t.length))return null;if(ve("esri-workers-arraybuffer-transfer"))return t;const e=t.filter(i=>!ize(i));return e.length?e:null}function ize(t){var e;return t instanceof ArrayBuffer||((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="ArrayBuffer"}async function Axt(t){try{return await t}catch(e){const i=(e==null?void 0:e.name)===pge;if(!(In(e)||i))throw e;return}}const{CLOSE:DP,ABORT:P8,INVOKE:Wie,RESPONSE:oM,OPEN_PORT:Zie,ON:Yie}=jm,rze=2;let nze=class{constructor(e){this._invoke=e,this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._timer=null,this._process=this._process.bind(this)}push(e){e.type===P8?this._cancelledJobIds.add(e.jobId):(this._invokeMessages.push(e),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const e of this._invokeMessages)this._cancelledJobIds.has(e.jobId)||this._invoke(e);this._cancelledJobIds.clear(),this._invokeMessages.length=0}};var cu;let tT=(cu=class{static connect(e,i){const r=new MessageChannel;let n;n=typeof e=="function"?new e:"default"in e&&typeof e.default=="function"?new e.default:e;const s=new cu(r.port1,{channel:r,client:n,schedule:i});return typeof n=="object"&&"remoteClient"in n&&(n.remoteClient=s),cu.clients.set(s,n),r.port2}static loadWorker(e){const i=KRe[e];return i?i():Promise.resolve(null)}constructor(e,i,r,n){this._port=e,this._jobQueue=r,this._lowPriorityJobQueue=n,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new nze(s=>this._onInvokeMessage(s)),this._client=i.client,this._onMessage=this._onMessage.bind(this),this._channel=i.channel,this._schedule=i.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}close(){this._post({type:DP}),this._close()}isBusy(){return this._outJobs.size>0}invoke(e,i,r){return this.apply(e,[i],r)}apply(e,i,r){const n=r==null?void 0:r.signal,s=r==null?void 0:r.transferList;if(!this._port)return Promise.reject(new ae(pge,`Cannot call invoke('${e}'), port is closed`,{methodName:e,data:i}));const a=fge();return new Promise((o,l)=>{if(co(n))return this._processWork(),void l(Hi());const c=_u(n,()=>{const m=this._outJobs.get(a);m&&(this._outJobs.delete(a),this._processWork(),Dr(m.abortHandle),this._post({type:P8,jobId:a}),l(Hi()))}),h={resolve:o,reject:l,abortHandle:c,debugInfo:e};this._outJobs.set(a,h),this._post({type:Wie,jobId:a,methodName:e,abortable:n!=null},i,s)})}createInvokeProxy(e){return hge(this,e)}on(e,i){const r=new MessageChannel;function n(s){i(s.data)}return this._port.postMessage({type:Yie,eventType:e,port:r.port2},[r.port2]),r.port1.addEventListener("message",n),r.port1.start(),Ii(()=>{r.port1.postMessage({type:DP}),r.port1.close(),r.port1.removeEventListener("message",n)})}jobAdded(){this._processWork()}openPort(){const e=new MessageChannel;return this._post({type:Zie,port:e.port2}),e.port1}_processWork(){var a,o;if(this._outJobs.size>=rze)return;const e=((a=this._jobQueue)==null?void 0:a.pop())??((o=this._lowPriorityJobQueue)==null?void 0:o.pop());if(!e)return;const{methodName:i,data:r,invokeOptions:n,resolver:s}=e;this.apply(i,r,n).then(l=>s.resolve(l)).catch(l=>s.reject(l))}_close(){this._channel&&(this._channel=void 0),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(e=>{Dr(e.abortHandle),e.reject(Hi(`Worker closing, aborting job calling '${e.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=null,this._client=null,this._schedule=null,this._onMessage=null,this._channel=null,this._jobQueue=void 0,this._invokeQueue=void 0,this._lowPriorityJobQueue=void 0}_onMessage(e){this._schedule!=null?this._schedule(()=>this._processMessage(e,!0)):this._processMessage(e,!1)}_processMessage(e,i){const r=xE(e);if(r)switch(r.type){case oM:this._onResponseMessage(r);break;case Wie:i?this._onInvokeMessage(r):this._invokeQueue.push(r);break;case P8:this._onAbortMessage(r);break;case DP:this._onCloseMessage();break;case Zie:this._onOpenPortMessage(r);break;case Yie:this._onOnMessage(r)}}_onAbortMessage(e){const i=this._inJobs,r=e.jobId,n=i.get(r);this._invokeQueue.push(e),n&&(n.controller&&n.controller.abort(),i.delete(r))}_onCloseMessage(){const e=this._client;this._close(),e&&"destroy"in e&&cu.clients.get(this)===e&&e.destroy(),cu.clients.delete(this),e!=null&&e.remoteClient&&(e.remoteClient=null)}_onInvokeMessage(e){const{methodName:i,jobId:r,data:n=[],abortable:s}=e,a=s?new AbortController:null,o=this._inJobs;let l,c=this._client,h=c[i];try{if(!h&&i&&i.includes(".")){const m=i.split(".");for(let g=0;g<m.length-1;g++)c=c[m[g]],h=c[m[g+1]]}if(typeof h!="function")throw new TypeError(`${i} is not a function`);n.push({client:this,signal:a?a.signal:null}),l=h.apply(c,n)}catch(m){return void this._post({type:oM,jobId:r,error:bR(m)})}uo(l)?(o.set(r,{controller:a,promise:l}),l.then(m=>{o.has(r)&&(o.delete(r),this._post({type:oM,jobId:r},m))},m=>{o.has(r)&&(o.delete(r),In(m)||this._post({type:oM,jobId:r,error:bR(m||{message:`Error encountered at method ${i}`})}))})):this._post({type:oM,jobId:r},l)}_onOpenPortMessage(e){new cu(e.port,{client:this._client})}_onOnMessage(e){const{port:i}=e,r=this._client.on(e.eventType,s=>{i.postMessage(s)}),n=MT(e.port,"message",s=>{const a=xE(s);(a==null?void 0:a.type)===DP&&(n.remove(),r.remove(),i.close())})}_onResponseMessage(e){const{jobId:i,error:r,data:n}=e,s=this._outJobs;if(!s.has(i))return;const a=s.get(i);s.delete(i),this._processWork(),Dr(a.abortHandle),r?a.reject(ae.fromJSON(JSON.parse(r))):a.resolve(n)}_post(e,i,r){return mge(this._port,e,i,r)}},cu.kernelInfo={buildDate:Afe,fullVersion:tZ,revision:Pfe},cu.clients=new Map,cu),sze=class{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new _E,this._ongoingLowPriorityJobsQueue=new _E}destroy(){this.close()}get closed(){var e;return!((e=this._clients)!=null&&e.length)}open(e,i){return new Promise((r,n)=>{let s=!0;const a=o=>{lr(i.signal),s&&(s=!1,o())};this._clients.length=e.length,this._clientPromises.length=e.length,this._inUseClients.length=e.length;for(let o=0;o<e.length;++o){const l=e[o];uo(l)?this._clientPromises[o]=l.then(c=>(this._clients[o]=new tT(c,i,this._ongoingJobsQueue,this._ongoingLowPriorityJobsQueue),a(r),this._clients[o]),()=>(a(n),null)):(this._clients[o]=new tT(l,i,this._ongoingJobsQueue,this._ongoingLowPriorityJobsQueue),this._clientPromises[o]=Promise.resolve(this._clients[o]),a(r))}})}broadcast(e,i,r){const n=new Array(this._clientPromises.length);for(let s=0;s<this._clientPromises.length;++s){const a=this._clientPromises[s];n[s]=a.then(o=>o==null?void 0:o.invoke(e,i,r))}return n}close(){let e;for(;e=this._ongoingJobsQueue.pop();)e.resolver.reject(Hi(`Worker closing, aborting job calling '${e.methodName}'`));for(;e=this._ongoingLowPriorityJobsQueue.pop();)e.resolver.reject(Hi(`Worker closing, aborting job calling '${e.methodName}'`));for(const i of this._clientPromises)i.then(r=>r==null?void 0:r.close());this._clients.length=0,this._clientPromises.length=0,this._inUseClients.length=0,XRe(this)}invoke(e,i,r){return this.apply(e,[i],r)}apply(e,i,r){const n=Fl();((r==null?void 0:r.priority)==="low"?this._ongoingLowPriorityJobsQueue:this._ongoingJobsQueue).push({methodName:e,data:i,invokeOptions:r,resolver:n});for(let s=0;s<this._clientPromises.length;s++){const a=this._clients[s];a?a.jobAdded():this._clientPromises[s].then(o=>o==null?void 0:o.jobAdded())}return n.promise}createInvokeProxy(e){return hge(this,e)}on(e,i){return Promise.all(this._clientPromises).then(()=>h_(this._clients.map(r=>r.on(e,i))))}openPorts(){return new Promise(e=>{const i=new Array(this._clientPromises.length);let r=i.length;for(let n=0;n<this._clientPromises.length;++n)this._clientPromises[n].then(s=>{s&&(i[n]=s.openPort()),--r===0&&e(i)})})}get test(){}};const aze={async request(t,e){var a,o;const i=t.options,r=i.responseType;i.signal=e==null?void 0:e.signal,i.responseType=r==="native"||r==="native-request-init"?"native-request-init":r&&["blob","json","text"].includes(r)&&((a=p8(t.url))!=null&&a.after)?r:"array-buffer";const n=await mi(t.url,i),s={data:n.data,httpStatus:n.httpStatus,ssl:n.ssl};switch((o=n.requestOptions)==null?void 0:o.responseType){case"native-request-init":return delete s.data.signal,s;case"blob":s.data=await s.data.arrayBuffer();break;case"json":s.data=new TextEncoder().encode(JSON.stringify(s.data)).buffer;break;case"text":s.data=new TextEncoder().encode(s.data).buffer}return{result:s,transferList:[s.data]}}};let l2;var Fde,Rde;const oze=((Fde=globalThis.esriConfig)==null?void 0:Fde.locale)??((Rde=globalThis.dojoConfig)==null?void 0:Rde.locale);var zde;const c2=(zde=globalThis.document)==null?void 0:zde.documentElement;function gge(){var i;const t=c2==null?void 0:c2.getAttribute("lang"),e=(i=globalThis.navigator)==null?void 0:i.language;return oze??t??e??"en"}function Ol(){return l2===void 0&&(l2=gge()),l2}const lze=/^(?<language>[a-z]{2,3})(?:-(?<extlang>[a-z]{3}))?(?:-[A-Z][a-z]{3})?(?:-(?<region>[A-Z]{2}|\d{3}))?(?:-.*)?$/;function EZ(t=Ol()){var e;return(e=vge(t))==null?void 0:e.language}function yge(t=Ol()){const e=vge(t);return e!=null&&e.language&&(e!=null&&e.extlang)?t.replace(`${e.language}-`,""):t}function vge(t=Ol()){var e;return(e=lze.exec(t))==null?void 0:e.groups}const Y3=[];function kZ(t){return Y3.push(t),Ii(()=>{Y3.splice(Y3.indexOf(t),1)})}const J3=[];function AZ(t){return J3.push(t),Ii(()=>J3.splice(J3.indexOf(t),1))}function Jie(){const t=gge();l2!==t&&([...J3].forEach(e=>e(t)),l2=t,[...Y3].forEach(e=>e(t)))}var Nde;(Nde=globalThis.addEventListener)==null||Nde.call(globalThis,"languagechange",Jie),c2&&new MutationObserver(()=>{Jie()}).observe(c2,{attributeFilter:["lang"]});const Rl="system",Pv="unknown",Vp="UTC",cze=Intl.DateTimeFormat().resolvedOptions().timeZone,Xie=new Map([["AUS Central Standard Time","Australia/Darwin"],["AUS Eastern Standard Time","Australia/Sydney"],["Afghanistan Standard Time","Asia/Kabul"],["Alaskan Standard Time","America/Anchorage"],["Aleutian Standard Time","America/Adak"],["Altai Standard Time","Asia/Barnaul"],["Arab Standard Time","Asia/Riyadh"],["Arabian Standard Time","Asia/Dubai"],["Arabic Standard Time","Asia/Baghdad"],["Argentina Standard Time","America/Buenos_Aires"],["Astrakhan Standard Time","Europe/Astrakhan"],["Atlantic Standard Time","America/Halifax"],["Aus Central W. Standard Time","Australia/Eucla"],["Azerbaijan Standard Time","Asia/Baku"],["Azores Standard Time","Atlantic/Azores"],["Bahia Standard Time","America/Bahia"],["Bangladesh Standard Time","Asia/Dhaka"],["Belarus Standard Time","Europe/Minsk"],["Bougainville Standard Time","Pacific/Bougainville"],["Canada Central Standard Time","America/Regina"],["Cape Verde Standard Time","Atlantic/Cape_Verde"],["Caucasus Standard Time","Asia/Yerevan"],["Cen. Australia Standard Time","Australia/Adelaide"],["Central America Standard Time","America/Guatemala"],["Central Asia Standard Time","Asia/Bishkek"],["Central Brazilian Standard Time","America/Cuiaba"],["Central Europe Standard Time","Europe/Budapest"],["Central European Standard Time","Europe/Warsaw"],["Central Pacific Standard Time","Pacific/Guadalcanal"],["Central Standard Time","America/Chicago"],["Central Standard Time (Mexico)","America/Mexico_City"],["Chatham Islands Standard Time","Pacific/Chatham"],["China Standard Time","Asia/Shanghai"],["Cuba Standard Time","America/Havana"],["Dateline Standard Time","Etc/GMT+12"],["E. Africa Standard Time","Africa/Nairobi"],["E. Australia Standard Time","Australia/Brisbane"],["E. Europe Standard Time","Europe/Chisinau"],["E. South America Standard Time","America/Sao_Paulo"],["Easter Island Standard Time","Pacific/Easter"],["Eastern Standard Time","America/New_York"],["Eastern Standard Time (Mexico)","America/Cancun"],["Egypt Standard Time","Africa/Cairo"],["Ekaterinburg Standard Time","Asia/Yekaterinburg"],["FLE Standard Time","Europe/Kiev"],["Fiji Standard Time","Pacific/Fiji"],["GMT Standard Time","Europe/London"],["GTB Standard Time","Europe/Bucharest"],["Georgian Standard Time","Asia/Tbilisi"],["Greenland Standard Time","America/Godthab"],["Greenwich Standard Time","Atlantic/Reykjavik"],["Haiti Standard Time","America/Port-au-Prince"],["Hawaiian Standard Time","Pacific/Honolulu"],["India Standard Time","Asia/Calcutta"],["Iran Standard Time","Asia/Tehran"],["Israel Standard Time","Asia/Jerusalem"],["Jordan Standard Time","Asia/Amman"],["Kaliningrad Standard Time","Europe/Kaliningrad"],["Korea Standard Time","Asia/Seoul"],["Libya Standard Time","Africa/Tripoli"],["Line Islands Standard Time","Pacific/Kiritimati"],["Lord Howe Standard Time","Australia/Lord_Howe"],["Magadan Standard Time","Asia/Magadan"],["Magallanes Standard Time","America/Punta_Arenas"],["Marquesas Standard Time","Pacific/Marquesas"],["Mauritius Standard Time","Indian/Mauritius"],["Middle East Standard Time","Asia/Beirut"],["Montevideo Standard Time","America/Montevideo"],["Morocco Standard Time","Africa/Casablanca"],["Mountain Standard Time","America/Denver"],["Mountain Standard Time (Mexico)","America/Mazatlan"],["Myanmar Standard Time","Asia/Rangoon"],["N. Central Asia Standard Time","Asia/Novosibirsk"],["Namibia Standard Time","Africa/Windhoek"],["Nepal Standard Time","Asia/Katmandu"],["New Zealand Standard Time","Pacific/Auckland"],["Newfoundland Standard Time","America/St_Johns"],["Norfolk Standard Time","Pacific/Norfolk"],["North Asia East Standard Time","Asia/Irkutsk"],["North Asia Standard Time","Asia/Krasnoyarsk"],["North Korea Standard Time","Asia/Pyongyang"],["Omsk Standard Time","Asia/Omsk"],["Pacific SA Standard Time","America/Santiago"],["Pacific Standard Time","America/Los_Angeles"],["Pacific Standard Time (Mexico)","America/Tijuana"],["Pakistan Standard Time","Asia/Karachi"],["Paraguay Standard Time","America/Asuncion"],["Qyzylorda Standard Time","Asia/Qyzylorda"],["Romance Standard Time","Europe/Paris"],["Russia Time Zone 10","Asia/Srednekolymsk"],["Russia Time Zone 11","Asia/Kamchatka"],["Russia Time Zone 3","Europe/Samara"],["Russian Standard Time","Europe/Moscow"],["SA Eastern Standard Time","America/Cayenne"],["SA Pacific Standard Time","America/Bogota"],["SA Western Standard Time","America/La_Paz"],["SE Asia Standard Time","Asia/Bangkok"],["Saint Pierre Standard Time","America/Miquelon"],["Sakhalin Standard Time","Asia/Sakhalin"],["Samoa Standard Time","Pacific/Apia"],["Sao Tome Standard Time","Africa/Sao_Tome"],["Saratov Standard Time","Europe/Saratov"],["Singapore Standard Time","Asia/Singapore"],["South Africa Standard Time","Africa/Johannesburg"],["South Sudan Standard Time","Africa/Juba"],["Sri Lanka Standard Time","Asia/Colombo"],["Sudan Standard Time","Africa/Khartoum"],["Syria Standard Time","Asia/Damascus"],["Taipei Standard Time","Asia/Taipei"],["Tasmania Standard Time","Australia/Hobart"],["Tocantins Standard Time","America/Araguaina"],["Tokyo Standard Time","Asia/Tokyo"],["Tomsk Standard Time","Asia/Tomsk"],["Tonga Standard Time","Pacific/Tongatapu"],["Transbaikal Standard Time","Asia/Chita"],["Turkey Standard Time","Europe/Istanbul"],["Turks And Caicos Standard Time","America/Grand_Turk"],["US Eastern Standard Time","America/Indianapolis"],["US Mountain Standard Time","America/Phoenix"],["UTC","Etc/GMT"],["UTC+01","Etc/GMT-1"],["UTC+02","Etc/GMT-2"],["UTC+03","Etc/GMT-3"],["UTC+04","Etc/GMT-4"],["UTC+05","Etc/GMT-5"],["UTC+06","Etc/GMT-6"],["UTC+07","Etc/GMT-7"],["UTC+08","Etc/GMT-8"],["UTC+09","Etc/GMT-9"],["UTC+10","Etc/GMT-10"],["UTC+11","Etc/GMT-11"],["UTC+12","Etc/GMT-12"],["UTC+13","Etc/GMT-13"],["UTC+14","Etc/GMT-14"],["UTC-01","Etc/GMT+1"],["UTC-02","Etc/GMT+2"],["UTC-03","Etc/GMT+3"],["UTC-04","Etc/GMT+4"],["UTC-05","Etc/GMT+5"],["UTC-06","Etc/GMT+6"],["UTC-07","Etc/GMT+7"],["UTC-08","Etc/GMT+8"],["UTC-09","Etc/GMT+9"],["UTC-10","Etc/GMT+10"],["UTC-11","Etc/GMT+11"],["UTC-12","Etc/GMT+12"],["Ulaanbaatar Standard Time","Asia/Ulaanbaatar"],["Venezuela Standard Time","America/Caracas"],["Vladivostok Standard Time","Asia/Vladivostok"],["Volgograd Standard Time","Europe/Volgograd"],["W. Australia Standard Time","Australia/Perth"],["W. Central Africa Standard Time","Africa/Lagos"],["W. Europe Standard Time","Europe/Berlin"],["W. Mongolia Standard Time","Asia/Hovd"],["West Asia Standard Time","Asia/Tashkent"],["West Bank Standard Time","Asia/Hebron"],["West Pacific Standard Time","Pacific/Port_Moresby"],["Yakutsk Standard Time","Asia/Yakutsk"],["Yukon Standard Time","America/Whitehorse"]]);class y_ extends Error{}class uze extends y_{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class dze extends y_{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class hze extends y_{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class g$ extends y_{}class bge extends y_{constructor(e){super(`Invalid unit ${e}`)}}class eo extends y_{}class Qg extends y_{constructor(){super("Zone is an abstract class")}}const lt="numeric",Dd="short",Sc="long",wR={year:lt,month:lt,day:lt},wge={year:lt,month:Dd,day:lt},pze={year:lt,month:Dd,day:lt,weekday:Dd},_ge={year:lt,month:Sc,day:lt},xge={year:lt,month:Sc,day:lt,weekday:Sc},$ge={hour:lt,minute:lt},Sge={hour:lt,minute:lt,second:lt},Tge={hour:lt,minute:lt,second:lt,timeZoneName:Dd},Ige={hour:lt,minute:lt,second:lt,timeZoneName:Sc},Mge={hour:lt,minute:lt,hourCycle:"h23"},Cge={hour:lt,minute:lt,second:lt,hourCycle:"h23"},Ege={hour:lt,minute:lt,second:lt,hourCycle:"h23",timeZoneName:Dd},kge={hour:lt,minute:lt,second:lt,hourCycle:"h23",timeZoneName:Sc},Age={year:lt,month:lt,day:lt,hour:lt,minute:lt},Pge={year:lt,month:lt,day:lt,hour:lt,minute:lt,second:lt},Oge={year:lt,month:Dd,day:lt,hour:lt,minute:lt},Lge={year:lt,month:Dd,day:lt,hour:lt,minute:lt,second:lt},fze={year:lt,month:Dd,day:lt,weekday:Dd,hour:lt,minute:lt},Fge={year:lt,month:Sc,day:lt,hour:lt,minute:lt,timeZoneName:Dd},Rge={year:lt,month:Sc,day:lt,hour:lt,minute:lt,second:lt,timeZoneName:Dd},zge={year:lt,month:Sc,day:lt,weekday:Sc,hour:lt,minute:lt,timeZoneName:Sc},Nge={year:lt,month:Sc,day:lt,weekday:Sc,hour:lt,minute:lt,second:lt,timeZoneName:Sc};class v_{get type(){throw new Qg}get name(){throw new Qg}get ianaName(){return this.name}get isUniversal(){throw new Qg}offsetName(e,i){throw new Qg}formatOffset(e,i){throw new Qg}offset(e){throw new Qg}equals(e){throw new Qg}get isValid(){throw new Qg}}let YV=null;class OD extends v_{static get instance(){return YV===null&&(YV=new OD),YV}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:i,locale:r}){return Yge(e,i,r)}formatOffset(e,i){return u2(this.offset(e),i)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}const O8=new Map;function mze(t){let e=O8.get(t);return e===void 0&&(e=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}),O8.set(t,e)),e}const gze={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function yze(t,e){const i=t.format(e).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(i),[,n,s,a,o,l,c,h]=r;return[a,n,s,o,l,c,h]}function vze(t,e){const i=t.formatToParts(e),r=[];for(let n=0;n<i.length;n++){const{type:s,value:a}=i[n],o=gze[s];s==="era"?r[o]=a:Kt(o)||(r[o]=parseInt(a,10))}return r}const JV=new Map;class zl extends v_{static create(e){let i=JV.get(e);return i===void 0&&JV.set(e,i=new zl(e)),i}static resetCache(){JV.clear(),O8.clear()}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=zl.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:i,locale:r}){return Yge(e,i,r,this.name)}formatOffset(e,i){return u2(this.offset(e),i)}offset(e){if(!this.valid)return NaN;const i=new Date(e);if(isNaN(i))return NaN;const r=mze(this.name);let[n,s,a,o,l,c,h]=r.formatToParts?vze(r,i):yze(r,i);o==="BC"&&(n=-Math.abs(n)+1);const g=FD({year:n,month:s,day:a,hour:l===24?0:l,minute:c,second:h,millisecond:0});let v=+i;const b=v%1e3;return v-=b>=0?b:1e3+b,(g-v)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let Qie={};function bze(t,e={}){const i=JSON.stringify([t,e]);let r=Qie[i];return r||(r=new Intl.ListFormat(t,e),Qie[i]=r),r}const L8=new Map;function F8(t,e={}){const i=JSON.stringify([t,e]);let r=L8.get(i);return r===void 0&&(r=new Intl.DateTimeFormat(t,e),L8.set(i,r)),r}const R8=new Map;function wze(t,e={}){const i=JSON.stringify([t,e]);let r=R8.get(i);return r===void 0&&(r=new Intl.NumberFormat(t,e),R8.set(i,r)),r}const z8=new Map;function _ze(t,e={}){const{base:i,...r}=e,n=JSON.stringify([t,r]);let s=z8.get(n);return s===void 0&&(s=new Intl.RelativeTimeFormat(t,e),z8.set(n,s)),s}let JM=null;function xze(){return JM||(JM=new Intl.DateTimeFormat().resolvedOptions().locale,JM)}const N8=new Map;function Dge(t){let e=N8.get(t);return e===void 0&&(e=new Intl.DateTimeFormat(t).resolvedOptions(),N8.set(t,e)),e}const D8=new Map;function $ze(t){let e=D8.get(t);if(!e){const i=new Intl.Locale(t);e="getWeekInfo"in i?i.getWeekInfo():i.weekInfo,"minimalDays"in e||(e={...jge,...e}),D8.set(t,e)}return e}function Sze(t){const e=t.indexOf("-x-");e!==-1&&(t=t.substring(0,e));const i=t.indexOf("-u-");if(i===-1)return[t];{let r,n;try{r=F8(t).resolvedOptions(),n=t}catch{const l=t.substring(0,i);r=F8(l).resolvedOptions(),n=l}const{numberingSystem:s,calendar:a}=r;return[n,s,a]}}function Tze(t,e,i){return(i||e)&&(t.includes("-u-")||(t+="-u"),i&&(t+=`-ca-${i}`),e&&(t+=`-nu-${e}`)),t}function Ize(t){const e=[];for(let i=1;i<=12;i++){const r=ut.utc(2009,i,1);e.push(t(r))}return e}function Mze(t){const e=[];for(let i=1;i<=7;i++){const r=ut.utc(2016,11,13+i);e.push(t(r))}return e}function jP(t,e,i,r){const n=t.listingMode();return n==="error"?null:n==="en"?i(e):r(e)}function Cze(t){return t.numberingSystem&&t.numberingSystem!=="latn"?!1:t.numberingSystem==="latn"||!t.locale||t.locale.startsWith("en")||Dge(t.locale).numberingSystem==="latn"}class Eze{constructor(e,i,r){this.padTo=r.padTo||0,this.floor=r.floor||!1;const{padTo:n,floor:s,...a}=r;if(!i||Object.keys(a).length>0){const o={useGrouping:!1,...r};r.padTo>0&&(o.minimumIntegerDigits=r.padTo),this.inf=wze(e,o)}}format(e){if(this.inf){const i=this.floor?Math.floor(e):e;return this.inf.format(i)}else{const i=this.floor?Math.floor(e):RZ(e,3);return xs(i,this.padTo)}}}class kze{constructor(e,i,r){this.opts=r,this.originalZone=void 0;let n;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const a=-1*(e.offset/60),o=a>=0?`Etc/GMT+${a}`:`Etc/GMT${a}`;e.offset!==0&&zl.create(o).valid?(n=o,this.dt=e):(n="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,n=e.zone.name):(n="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const s={...this.opts};s.timeZone=s.timeZone||n,this.dtf=F8(i,s)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(i=>{if(i.type==="timeZoneName"){const r=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...i,value:r}}else return i}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class Aze{constructor(e,i,r){this.opts={style:"long",...r},!i&&Wge()&&(this.rtf=_ze(e,r))}format(e,i){return this.rtf?this.rtf.format(e,i):Kze(i,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,i){return this.rtf?this.rtf.formatToParts(e,i):[]}}const jge={firstDay:1,minimalDays:4,weekend:[6,7]};class mr{static fromOpts(e){return mr.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,i,r,n,s=!1){const a=e||jn.defaultLocale,o=a||(s?"en-US":xze()),l=i||jn.defaultNumberingSystem,c=r||jn.defaultOutputCalendar,h=V8(n)||jn.defaultWeekSettings;return new mr(o,l,c,h,a)}static resetCache(){JM=null,L8.clear(),R8.clear(),z8.clear(),N8.clear(),D8.clear()}static fromObject({locale:e,numberingSystem:i,outputCalendar:r,weekSettings:n}={}){return mr.create(e,i,r,n)}constructor(e,i,r,n,s){const[a,o,l]=Sze(e);this.locale=a,this.numberingSystem=i||o||null,this.outputCalendar=r||l||null,this.weekSettings=n,this.intl=Tze(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=s,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=Cze(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),i=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&i?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:mr.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,V8(e.weekSettings)||this.weekSettings,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,i=!1){return jP(this,e,Qge,()=>{const r=this.intl==="ja"||this.intl.startsWith("ja-");i&=!r;const n=i?{month:e,day:"numeric"}:{month:e},s=i?"format":"standalone";if(!this.monthsCache[s][e]){const a=r?o=>this.dtFormatter(o,n).format():o=>this.extract(o,n,"month");this.monthsCache[s][e]=Ize(a)}return this.monthsCache[s][e]})}weekdays(e,i=!1){return jP(this,e,tye,()=>{const r=i?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},n=i?"format":"standalone";return this.weekdaysCache[n][e]||(this.weekdaysCache[n][e]=Mze(s=>this.extract(s,r,"weekday"))),this.weekdaysCache[n][e]})}meridiems(){return jP(this,void 0,()=>iye,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[ut.utc(2016,11,13,9),ut.utc(2016,11,13,19)].map(i=>this.extract(i,e,"dayperiod"))}return this.meridiemCache})}eras(e){return jP(this,e,rye,()=>{const i={era:e};return this.eraCache[e]||(this.eraCache[e]=[ut.utc(-40,1,1),ut.utc(2017,1,1)].map(r=>this.extract(r,i,"era"))),this.eraCache[e]})}extract(e,i,r){const n=this.dtFormatter(e,i),s=n.formatToParts(),a=s.find(o=>o.type.toLowerCase()===r);return a?a.value:null}numberFormatter(e={}){return new Eze(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,i={}){return new kze(e,this.intl,i)}relFormatter(e={}){return new Aze(this.intl,this.isEnglish(),e)}listFormatter(e={}){return bze(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||Dge(this.intl).locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:Zge()?$ze(this.locale):jge}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let XV=null;class Ms extends v_{static get utcInstance(){return XV===null&&(XV=new Ms(0)),XV}static instance(e){return e===0?Ms.utcInstance:new Ms(e)}static parseSpecifier(e){if(e){const i=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(i)return new Ms(RD(i[1],i[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${u2(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${u2(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,i){return u2(this.fixed,i)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class Pze extends v_{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function By(t,e){if(Kt(t)||t===null)return e;if(t instanceof v_)return t;if(Nze(t)){const i=t.toLowerCase();return i==="default"?e:i==="local"||i==="system"?OD.instance:i==="utc"||i==="gmt"?Ms.utcInstance:Ms.parseSpecifier(i)||zl.create(t)}else return gv(t)?Ms.instance(t):typeof t=="object"&&"offset"in t&&typeof t.offset=="function"?t:new Pze(t)}const PZ={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},Kie={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},Oze=PZ.hanidec.replace(/[\[|\]]/g,"").split("");function Lze(t){let e=parseInt(t,10);if(isNaN(e)){e="";for(let i=0;i<t.length;i++){const r=t.charCodeAt(i);if(t[i].search(PZ.hanidec)!==-1)e+=Oze.indexOf(t[i]);else for(const n in Kie){const[s,a]=Kie[n];r>=s&&r<=a&&(e+=r-s)}}return parseInt(e,10)}else return e}const j8=new Map;function Fze(){j8.clear()}function qu({numberingSystem:t},e=""){const i=t||"latn";let r=j8.get(i);r===void 0&&(r=new Map,j8.set(i,r));let n=r.get(e);return n===void 0&&(n=new RegExp(`${PZ[i]}${e}`),r.set(e,n)),n}let ere=()=>Date.now(),tre="system",ire=null,rre=null,nre=null,sre=60,are,ore=null;class jn{static get now(){return ere}static set now(e){ere=e}static set defaultZone(e){tre=e}static get defaultZone(){return By(tre,OD.instance)}static get defaultLocale(){return ire}static set defaultLocale(e){ire=e}static get defaultNumberingSystem(){return rre}static set defaultNumberingSystem(e){rre=e}static get defaultOutputCalendar(){return nre}static set defaultOutputCalendar(e){nre=e}static get defaultWeekSettings(){return ore}static set defaultWeekSettings(e){ore=V8(e)}static get twoDigitCutoffYear(){return sre}static set twoDigitCutoffYear(e){sre=e%100}static get throwOnInvalid(){return are}static set throwOnInvalid(e){are=e}static resetCaches(){mr.resetCache(),zl.resetCache(),ut.resetCache(),Fze()}}class Ed{constructor(e,i){this.reason=e,this.explanation=i}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const Vge=[0,31,59,90,120,151,181,212,243,273,304,334],Uge=[0,31,60,91,121,152,182,213,244,274,305,335];function gu(t,e){return new Ed("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${t}, which is invalid`)}function OZ(t,e,i){const r=new Date(Date.UTC(t,e-1,i));t<100&&t>=0&&r.setUTCFullYear(r.getUTCFullYear()-1900);const n=r.getUTCDay();return n===0?7:n}function Bge(t,e,i){return i+(Rk(t)?Uge:Vge)[e-1]}function qge(t,e){const i=Rk(t)?Uge:Vge,r=i.findIndex(s=>s<e),n=e-i[r];return{month:r+1,day:n}}function LZ(t,e){return(t-e+7)%7+1}function _R(t,e=4,i=1){const{year:r,month:n,day:s}=t,a=Bge(r,n,s),o=LZ(OZ(r,n,s),i);let l=Math.floor((a-o+14-e)/7),c;return l<1?(c=r-1,l=$E(c,e,i)):l>$E(r,e,i)?(c=r+1,l=1):c=r,{weekYear:c,weekNumber:l,weekday:o,...zD(t)}}function lre(t,e=4,i=1){const{weekYear:r,weekNumber:n,weekday:s}=t,a=LZ(OZ(r,1,e),i),o=N$(r);let l=n*7+s-a-7+e,c;l<1?(c=r-1,l+=N$(c)):l>o?(c=r+1,l-=N$(r)):c=r;const{month:h,day:m}=qge(c,l);return{year:c,month:h,day:m,...zD(t)}}function QV(t){const{year:e,month:i,day:r}=t,n=Bge(e,i,r);return{year:e,ordinal:n,...zD(t)}}function cre(t){const{year:e,ordinal:i}=t,{month:r,day:n}=qge(e,i);return{year:e,month:r,day:n,...zD(t)}}function ure(t,e){if(!Kt(t.localWeekday)||!Kt(t.localWeekNumber)||!Kt(t.localWeekYear)){if(!Kt(t.weekday)||!Kt(t.weekNumber)||!Kt(t.weekYear))throw new g$("Cannot mix locale-based week fields with ISO-based week fields");return Kt(t.localWeekday)||(t.weekday=t.localWeekday),Kt(t.localWeekNumber)||(t.weekNumber=t.localWeekNumber),Kt(t.localWeekYear)||(t.weekYear=t.localWeekYear),delete t.localWeekday,delete t.localWeekNumber,delete t.localWeekYear,{minDaysInFirstWeek:e.getMinDaysInFirstWeek(),startOfWeek:e.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function Rze(t,e=4,i=1){const r=LD(t.weekYear),n=yu(t.weekNumber,1,$E(t.weekYear,e,i)),s=yu(t.weekday,1,7);return r?n?s?!1:gu("weekday",t.weekday):gu("week",t.weekNumber):gu("weekYear",t.weekYear)}function zze(t){const e=LD(t.year),i=yu(t.ordinal,1,N$(t.year));return e?i?!1:gu("ordinal",t.ordinal):gu("year",t.year)}function Hge(t){const e=LD(t.year),i=yu(t.month,1,12),r=yu(t.day,1,xR(t.year,t.month));return e?i?r?!1:gu("day",t.day):gu("month",t.month):gu("year",t.year)}function Gge(t){const{hour:e,minute:i,second:r,millisecond:n}=t,s=yu(e,0,23)||e===24&&i===0&&r===0&&n===0,a=yu(i,0,59),o=yu(r,0,59),l=yu(n,0,999);return s?a?o?l?!1:gu("millisecond",n):gu("second",r):gu("minute",i):gu("hour",e)}function Kt(t){return typeof t>"u"}function gv(t){return typeof t=="number"}function LD(t){return typeof t=="number"&&t%1===0}function Nze(t){return typeof t=="string"}function Dze(t){return Object.prototype.toString.call(t)==="[object Date]"}function Wge(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function Zge(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function jze(t){return Array.isArray(t)?t:[t]}function dre(t,e,i){if(t.length!==0)return t.reduce((r,n)=>{const s=[e(n),n];return r&&i(r[0],s[0])===r[0]?r:s},null)[1]}function Vze(t,e){return e.reduce((i,r)=>(i[r]=t[r],i),{})}function iT(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function V8(t){if(t==null)return null;if(typeof t!="object")throw new eo("Week settings must be an object");if(!yu(t.firstDay,1,7)||!yu(t.minimalDays,1,7)||!Array.isArray(t.weekend)||t.weekend.some(e=>!yu(e,1,7)))throw new eo("Invalid week settings");return{firstDay:t.firstDay,minimalDays:t.minimalDays,weekend:Array.from(t.weekend)}}function yu(t,e,i){return LD(t)&&t>=e&&t<=i}function Uze(t,e){return t-e*Math.floor(t/e)}function xs(t,e=2){const i=t<0;let r;return i?r="-"+(""+-t).padStart(e,"0"):r=(""+t).padStart(e,"0"),r}function Py(t){if(!(Kt(t)||t===null||t===""))return parseInt(t,10)}function Tb(t){if(!(Kt(t)||t===null||t===""))return parseFloat(t)}function FZ(t){if(!(Kt(t)||t===null||t==="")){const e=parseFloat("0."+t)*1e3;return Math.floor(e)}}function RZ(t,e,i="round"){const r=10**e;switch(i){case"expand":return t>0?Math.ceil(t*r)/r:Math.floor(t*r)/r;case"trunc":return Math.trunc(t*r)/r;case"round":return Math.round(t*r)/r;case"floor":return Math.floor(t*r)/r;case"ceil":return Math.ceil(t*r)/r;default:throw new RangeError(`Value rounding ${i} is out of range`)}}function Rk(t){return t%4===0&&(t%100!==0||t%400===0)}function N$(t){return Rk(t)?366:365}function xR(t,e){const i=Uze(e-1,12)+1,r=t+(e-i)/12;return i===2?Rk(r)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][i-1]}function FD(t){let e=Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond);return t.year<100&&t.year>=0&&(e=new Date(e),e.setUTCFullYear(t.year,t.month-1,t.day)),+e}function hre(t,e,i){return-LZ(OZ(t,1,e),i)+e-1}function $E(t,e=4,i=1){const r=hre(t,e,i),n=hre(t+1,e,i);return(N$(t)-r+n)/7}function U8(t){return t>99?t:t>jn.twoDigitCutoffYear?1900+t:2e3+t}function Yge(t,e,i,r=null){const n=new Date(t),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(s.timeZone=r);const a={timeZoneName:e,...s},o=new Intl.DateTimeFormat(i,a).formatToParts(n).find(l=>l.type.toLowerCase()==="timezonename");return o?o.value:null}function RD(t,e){let i=parseInt(t,10);Number.isNaN(i)&&(i=0);const r=parseInt(e,10)||0,n=i<0||Object.is(i,-0)?-r:r;return i*60+n}function Jge(t){const e=Number(t);if(typeof t=="boolean"||t===""||!Number.isFinite(e))throw new eo(`Invalid unit value ${t}`);return e}function $R(t,e){const i={};for(const r in t)if(iT(t,r)){const n=t[r];if(n==null)continue;i[e(r)]=Jge(n)}return i}function u2(t,e){const i=Math.trunc(Math.abs(t/60)),r=Math.trunc(Math.abs(t%60)),n=t>=0?"+":"-";switch(e){case"short":return`${n}${xs(i,2)}:${xs(r,2)}`;case"narrow":return`${n}${i}${r>0?`:${r}`:""}`;case"techie":return`${n}${xs(i,2)}${xs(r,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function zD(t){return Vze(t,["hour","minute","second","millisecond"])}const Bze=["January","February","March","April","May","June","July","August","September","October","November","December"],Xge=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],qze=["J","F","M","A","M","J","J","A","S","O","N","D"];function Qge(t){switch(t){case"narrow":return[...qze];case"short":return[...Xge];case"long":return[...Bze];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const Kge=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],eye=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],Hze=["M","T","W","T","F","S","S"];function tye(t){switch(t){case"narrow":return[...Hze];case"short":return[...eye];case"long":return[...Kge];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const iye=["AM","PM"],Gze=["Before Christ","Anno Domini"],Wze=["BC","AD"],Zze=["B","A"];function rye(t){switch(t){case"narrow":return[...Zze];case"short":return[...Wze];case"long":return[...Gze];default:return null}}function Yze(t){return iye[t.hour<12?0:1]}function Jze(t,e){return tye(e)[t.weekday-1]}function Xze(t,e){return Qge(e)[t.month-1]}function Qze(t,e){return rye(e)[t.year<0?0:1]}function Kze(t,e,i="always",r=!1){const n={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=["hours","minutes","seconds"].indexOf(t)===-1;if(i==="auto"&&s){const m=t==="days";switch(e){case 1:return m?"tomorrow":`next ${n[t][0]}`;case-1:return m?"yesterday":`last ${n[t][0]}`;case 0:return m?"today":`this ${n[t][0]}`}}const a=Object.is(e,-0)||e<0,o=Math.abs(e),l=o===1,c=n[t],h=r?l?c[1]:c[2]||c[1]:l?n[t][0]:t;return a?`${o} ${h} ago`:`in ${o} ${h}`}function pre(t,e){let i="";for(const r of t)r.literal?i+=r.val:i+=e(r.val);return i}const eNe={D:wR,DD:wge,DDD:_ge,DDDD:xge,t:$ge,tt:Sge,ttt:Tge,tttt:Ige,T:Mge,TT:Cge,TTT:Ege,TTTT:kge,f:Age,ff:Oge,fff:Fge,ffff:zge,F:Pge,FF:Lge,FFF:Rge,FFFF:Nge};class oo{static create(e,i={}){return new oo(e,i)}static parseFormat(e){let i=null,r="",n=!1;const s=[];for(let a=0;a<e.length;a++){const o=e.charAt(a);o==="'"?((r.length>0||n)&&s.push({literal:n||/^\s+$/.test(r),val:r===""?"'":r}),i=null,r="",n=!n):n||o===i?r+=o:(r.length>0&&s.push({literal:/^\s+$/.test(r),val:r}),r=o,i=o)}return r.length>0&&s.push({literal:n||/^\s+$/.test(r),val:r}),s}static macroTokenToFormatOpts(e){return eNe[e]}constructor(e,i){this.opts=i,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,i){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...i}).format()}dtFormatter(e,i={}){return this.loc.dtFormatter(e,{...this.opts,...i})}formatDateTime(e,i){return this.dtFormatter(e,i).format()}formatDateTimeParts(e,i){return this.dtFormatter(e,i).formatToParts()}formatInterval(e,i){return this.dtFormatter(e.start,i).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,i){return this.dtFormatter(e,i).resolvedOptions()}num(e,i=0,r=void 0){if(this.opts.forceSimple)return xs(e,i);const n={...this.opts};return i>0&&(n.padTo=i),r&&(n.signDisplay=r),this.loc.numberFormatter(n).format(e)}formatDateTimeFromString(e,i){const r=this.loc.listingMode()==="en",n=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",s=(v,b)=>this.loc.extract(e,v,b),a=v=>e.isOffsetFixed&&e.offset===0&&v.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,v.format):"",o=()=>r?Yze(e):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),l=(v,b)=>r?Xze(e,v):s(b?{month:v}:{month:v,day:"numeric"},"month"),c=(v,b)=>r?Jze(e,v):s(b?{weekday:v}:{weekday:v,month:"long",day:"numeric"},"weekday"),h=v=>{const b=oo.macroTokenToFormatOpts(v);return b?this.formatWithSystemDefault(e,b):v},m=v=>r?Qze(e,v):s({era:v},"era"),g=v=>{switch(v){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return a({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return a({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return a({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return o();case"d":return n?s({day:"numeric"},"day"):this.num(e.day);case"dd":return n?s({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return c("short",!0);case"cccc":return c("long",!0);case"ccccc":return c("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return c("short",!1);case"EEEE":return c("long",!1);case"EEEEE":return c("narrow",!1);case"L":return n?s({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return n?s({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return l("short",!0);case"LLLL":return l("long",!0);case"LLLLL":return l("narrow",!0);case"M":return n?s({month:"numeric"},"month"):this.num(e.month);case"MM":return n?s({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return l("short",!1);case"MMMM":return l("long",!1);case"MMMMM":return l("narrow",!1);case"y":return n?s({year:"numeric"},"year"):this.num(e.year);case"yy":return n?s({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return n?s({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return n?s({year:"numeric"},"year"):this.num(e.year,6);case"G":return m("short");case"GG":return m("long");case"GGGGG":return m("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return h(v)}};return pre(oo.parseFormat(i),g)}formatDurationFromString(e,i){const r=this.opts.signMode==="negativeLargestOnly"?-1:1,n=h=>{switch(h[0]){case"S":return"milliseconds";case"s":return"seconds";case"m":return"minutes";case"h":return"hours";case"d":return"days";case"w":return"weeks";case"M":return"months";case"y":return"years";default:return null}},s=(h,m)=>g=>{const v=n(g);if(v){const b=m.isNegativeDuration&&v!==m.largestUnit?r:1;let x;return this.opts.signMode==="negativeLargestOnly"&&v!==m.largestUnit?x="never":this.opts.signMode==="all"?x="always":x="auto",this.num(h.get(v)*b,g.length,x)}else return g},a=oo.parseFormat(i),o=a.reduce((h,{literal:m,val:g})=>m?h:h.concat(g),[]),l=e.shiftTo(...o.map(n).filter(h=>h)),c={isNegativeDuration:l<0,largestUnit:Object.keys(l.values)[0]};return pre(a,s(l,c))}}const nye=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function UT(...t){const e=t.reduce((i,r)=>i+r.source,"");return RegExp(`^${e}$`)}function BT(...t){return e=>t.reduce(([i,r,n],s)=>{const[a,o,l]=s(e,n);return[{...i,...a},o||r,l]},[{},null,1]).slice(0,2)}function qT(t,...e){if(t==null)return[null,null];for(const[i,r]of e){const n=i.exec(t);if(n)return r(n)}return[null,null]}function sye(...t){return(e,i)=>{const r={};let n;for(n=0;n<t.length;n++)r[t[n]]=Py(e[i+n]);return[r,null,i+n]}}const aye=/(?:([Zz])|([+-]\d\d)(?::?(\d\d))?)/,tNe=`(?:${aye.source}?(?:\\[(${nye.source})\\])?)?`,zZ=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,oye=RegExp(`${zZ.source}${tNe}`),NZ=RegExp(`(?:[Tt]${oye.source})?`),iNe=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,rNe=/(\d{4})-?W(\d\d)(?:-?(\d))?/,nNe=/(\d{4})-?(\d{3})/,sNe=sye("weekYear","weekNumber","weekDay"),aNe=sye("year","ordinal"),oNe=/(\d{4})-(\d\d)-(\d\d)/,lye=RegExp(`${zZ.source} ?(?:${aye.source}|(${nye.source}))?`),lNe=RegExp(`(?: ${lye.source})?`);function D$(t,e,i){const r=t[e];return Kt(r)?i:Py(r)}function cNe(t,e){return[{year:D$(t,e),month:D$(t,e+1,1),day:D$(t,e+2,1)},null,e+3]}function HT(t,e){return[{hours:D$(t,e,0),minutes:D$(t,e+1,0),seconds:D$(t,e+2,0),milliseconds:FZ(t[e+3])},null,e+4]}function zk(t,e){const i=!t[e]&&!t[e+1],r=RD(t[e+1],t[e+2]),n=i?null:Ms.instance(r);return[{},n,e+3]}function Nk(t,e){const i=t[e]?zl.create(t[e]):null;return[{},i,e+1]}const uNe=RegExp(`^T?${zZ.source}$`),dNe=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function hNe(t){const[e,i,r,n,s,a,o,l,c]=t,h=e[0]==="-",m=l&&l[0]==="-",g=(v,b=!1)=>v!==void 0&&(b||v&&h)?-v:v;return[{years:g(Tb(i)),months:g(Tb(r)),weeks:g(Tb(n)),days:g(Tb(s)),hours:g(Tb(a)),minutes:g(Tb(o)),seconds:g(Tb(l),l==="-0"),milliseconds:g(FZ(c),m)}]}const pNe={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function DZ(t,e,i,r,n,s,a){const o={year:e.length===2?U8(Py(e)):Py(e),month:Xge.indexOf(i)+1,day:Py(r),hour:Py(n),minute:Py(s)};return a&&(o.second=Py(a)),t&&(o.weekday=t.length>3?Kge.indexOf(t)+1:eye.indexOf(t)+1),o}const fNe=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function mNe(t){const[,e,i,r,n,s,a,o,l,c,h,m]=t,g=DZ(e,n,r,i,s,a,o);let v;return l?v=pNe[l]:c?v=0:v=RD(h,m),[g,new Ms(v)]}function gNe(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const yNe=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,vNe=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,bNe=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function fre(t){const[,e,i,r,n,s,a,o]=t;return[DZ(e,n,r,i,s,a,o),Ms.utcInstance]}function wNe(t){const[,e,i,r,n,s,a,o]=t;return[DZ(e,o,i,r,n,s,a),Ms.utcInstance]}const _Ne=UT(iNe,NZ),xNe=UT(rNe,NZ),$Ne=UT(nNe,NZ),SNe=UT(oye),cye=BT(cNe,HT,zk,Nk),TNe=BT(sNe,HT,zk,Nk),INe=BT(aNe,HT,zk,Nk),MNe=BT(HT,zk,Nk);function CNe(t){return qT(t,[_Ne,cye],[xNe,TNe],[$Ne,INe],[SNe,MNe])}function ENe(t){return qT(gNe(t),[fNe,mNe])}function kNe(t){return qT(t,[yNe,fre],[vNe,fre],[bNe,wNe])}function ANe(t){return qT(t,[dNe,hNe])}const PNe=BT(HT);function ONe(t){return qT(t,[uNe,PNe])}const LNe=UT(oNe,lNe),FNe=UT(lye),RNe=BT(HT,zk,Nk);function zNe(t){return qT(t,[LNe,cye],[FNe,RNe])}const mre="Invalid Duration",uye={weeks:{days:7,hours:168,minutes:10080,seconds:10080*60,milliseconds:10080*60*1e3},days:{hours:24,minutes:1440,seconds:1440*60,milliseconds:1440*60*1e3},hours:{minutes:60,seconds:3600,milliseconds:3600*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},NNe={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:2184*60,seconds:2184*60*60,milliseconds:2184*60*60*1e3},months:{weeks:4,days:30,hours:720,minutes:720*60,seconds:720*60*60,milliseconds:720*60*60*1e3},...uye},Bc=146097/400,w1=146097/4800,DNe={years:{quarters:4,months:12,weeks:Bc/7,days:Bc,hours:Bc*24,minutes:Bc*24*60,seconds:Bc*24*60*60,milliseconds:Bc*24*60*60*1e3},quarters:{months:3,weeks:Bc/28,days:Bc/4,hours:Bc*24/4,minutes:Bc*24*60/4,seconds:Bc*24*60*60/4,milliseconds:Bc*24*60*60*1e3/4},months:{weeks:w1/7,days:w1,hours:w1*24,minutes:w1*24*60,seconds:w1*24*60*60,milliseconds:w1*24*60*60*1e3},...uye},z0=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],jNe=z0.slice(0).reverse();function _f(t,e,i=!1){const r={values:i?e.values:{...t.values,...e.values||{}},loc:t.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||t.conversionAccuracy,matrix:e.matrix||t.matrix};return new qi(r)}function dye(t,e){let i=e.milliseconds??0;for(const r of jNe.slice(1))e[r]&&(i+=e[r]*t[r].milliseconds);return i}function gre(t,e){const i=dye(t,e)<0?-1:1;z0.reduceRight((r,n)=>{if(Kt(e[n]))return r;if(r){const s=e[r]*i,a=t[n][r],o=Math.floor(s/a);e[n]+=o*i,e[r]-=o*a*i}return n},null),z0.reduce((r,n)=>{if(Kt(e[n]))return r;if(r){const s=e[r]%1;e[r]-=s,e[n]+=s*t[r][n]}return n},null)}function yre(t){const e={};for(const[i,r]of Object.entries(t))r!==0&&(e[i]=r);return e}class qi{constructor(e){const i=e.conversionAccuracy==="longterm"||!1;let r=i?DNe:NNe;e.matrix&&(r=e.matrix),this.values=e.values,this.loc=e.loc||mr.create(),this.conversionAccuracy=i?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=r,this.isLuxonDuration=!0}static fromMillis(e,i){return qi.fromObject({milliseconds:e},i)}static fromObject(e,i={}){if(e==null||typeof e!="object")throw new eo(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new qi({values:$R(e,qi.normalizeUnit),loc:mr.fromObject(i),conversionAccuracy:i.conversionAccuracy,matrix:i.matrix})}static fromDurationLike(e){if(gv(e))return qi.fromMillis(e);if(qi.isDuration(e))return e;if(typeof e=="object")return qi.fromObject(e);throw new eo(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,i){const[r]=ANe(e);return r?qi.fromObject(r,i):qi.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,i){const[r]=ONe(e);return r?qi.fromObject(r,i):qi.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,i=null){if(!e)throw new eo("need to specify a reason the Duration is invalid");const r=e instanceof Ed?e:new Ed(e,i);if(jn.throwOnInvalid)throw new hze(r);return new qi({invalid:r})}static normalizeUnit(e){const i={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!i)throw new bge(e);return i}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,i={}){const r={...i,floor:i.round!==!1&&i.floor!==!1};return this.isValid?oo.create(this.loc,r).formatDurationFromString(this,e):mre}toHuman(e={}){if(!this.isValid)return mre;const i=e.showZeros!==!1,r=z0.map(n=>{const s=this.values[n];return Kt(s)||s===0&&!i?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:n.slice(0,-1)}).format(s)}).filter(n=>n);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(r)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=RZ(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const i=this.toMillis();return i<0||i>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},ut.fromMillis(i,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?dye(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const i=qi.fromDurationLike(e),r={};for(const n of z0)(iT(i.values,n)||iT(this.values,n))&&(r[n]=i.get(n)+this.get(n));return _f(this,{values:r},!0)}minus(e){if(!this.isValid)return this;const i=qi.fromDurationLike(e);return this.plus(i.negate())}mapUnits(e){if(!this.isValid)return this;const i={};for(const r of Object.keys(this.values))i[r]=Jge(e(this.values[r],r));return _f(this,{values:i},!0)}get(e){return this[qi.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const i={...this.values,...$R(e,qi.normalizeUnit)};return _f(this,{values:i})}reconfigure({locale:e,numberingSystem:i,conversionAccuracy:r,matrix:n}={}){const a={loc:this.loc.clone({locale:e,numberingSystem:i}),matrix:n,conversionAccuracy:r};return _f(this,a)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return gre(this.matrix,e),_f(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=yre(this.normalize().shiftToAll().toObject());return _f(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(a=>qi.normalizeUnit(a));const i={},r={},n=this.toObject();let s;for(const a of z0)if(e.indexOf(a)>=0){s=a;let o=0;for(const c in r)o+=this.matrix[c][a]*r[c],r[c]=0;gv(n[a])&&(o+=n[a]);const l=Math.trunc(o);i[a]=l,r[a]=(o*1e3-l*1e3)/1e3}else gv(n[a])&&(r[a]=n[a]);for(const a in r)r[a]!==0&&(i[s]+=a===s?r[a]:r[a]/this.matrix[s][a]);return gre(this.matrix,i),_f(this,{values:i},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const i of Object.keys(this.values))e[i]=this.values[i]===0?0:-this.values[i];return _f(this,{values:e},!0)}removeZeros(){if(!this.isValid)return this;const e=yre(this.values);return _f(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function i(r,n){return r===void 0||r===0?n===void 0||n===0:r===n}for(const r of z0)if(!i(this.values[r],e.values[r]))return!1;return!0}}const _1="Invalid Interval";function VNe(t,e){return!t||!t.isValid?Rn.invalid("missing or invalid start"):!e||!e.isValid?Rn.invalid("missing or invalid end"):e<t?Rn.invalid("end before start",`The end of an interval must be after its start, but you had start=${t.toISO()} and end=${e.toISO()}`):null}class Rn{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,i=null){if(!e)throw new eo("need to specify a reason the Interval is invalid");const r=e instanceof Ed?e:new Ed(e,i);if(jn.throwOnInvalid)throw new dze(r);return new Rn({invalid:r})}static fromDateTimes(e,i){const r=lM(e),n=lM(i),s=VNe(r,n);return s??new Rn({start:r,end:n})}static after(e,i){const r=qi.fromDurationLike(i),n=lM(e);return Rn.fromDateTimes(n,n.plus(r))}static before(e,i){const r=qi.fromDurationLike(i),n=lM(e);return Rn.fromDateTimes(n.minus(r),n)}static fromISO(e,i){const[r,n]=(e||"").split("/",2);if(r&&n){let s,a;try{s=ut.fromISO(r,i),a=s.isValid}catch{a=!1}let o,l;try{o=ut.fromISO(n,i),l=o.isValid}catch{l=!1}if(a&&l)return Rn.fromDateTimes(s,o);if(a){const c=qi.fromISO(n,i);if(c.isValid)return Rn.after(s,c)}else if(l){const c=qi.fromISO(r,i);if(c.isValid)return Rn.before(o,c)}}return Rn.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get lastDateTime(){return this.isValid&&this.e?this.e.minus(1):null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",i){if(!this.isValid)return NaN;const r=this.start.startOf(e,i);let n;return i!=null&&i.useLocaleWeeks?n=this.end.reconfigure({locale:r.locale}):n=this.end,n=n.startOf(e,i),Math.floor(n.diff(r,e).get(e))+(n.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:i}={}){return this.isValid?Rn.fromDateTimes(e||this.s,i||this.e):this}splitAt(...e){if(!this.isValid)return[];const i=e.map(lM).filter(a=>this.contains(a)).sort((a,o)=>a.toMillis()-o.toMillis()),r=[];let{s:n}=this,s=0;for(;n<this.e;){const a=i[s]||this.e,o=+a>+this.e?this.e:a;r.push(Rn.fromDateTimes(n,o)),n=o,s+=1}return r}splitBy(e){const i=qi.fromDurationLike(e);if(!this.isValid||!i.isValid||i.as("milliseconds")===0)return[];let{s:r}=this,n=1,s;const a=[];for(;r<this.e;){const o=this.start.plus(i.mapUnits(l=>l*n));s=+o>+this.e?this.e:o,a.push(Rn.fromDateTimes(r,s)),r=s,n+=1}return a}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const i=this.s>e.s?this.s:e.s,r=this.e<e.e?this.e:e.e;return i>=r?null:Rn.fromDateTimes(i,r)}union(e){if(!this.isValid)return this;const i=this.s<e.s?this.s:e.s,r=this.e>e.e?this.e:e.e;return Rn.fromDateTimes(i,r)}static merge(e){const[i,r]=e.sort((n,s)=>n.s-s.s).reduce(([n,s],a)=>s?s.overlaps(a)||s.abutsStart(a)?[n,s.union(a)]:[n.concat([s]),a]:[n,a],[[],null]);return r&&i.push(r),i}static xor(e){let i=null,r=0;const n=[],s=e.map(l=>[{time:l.s,type:"s"},{time:l.e,type:"e"}]),a=Array.prototype.concat(...s),o=a.sort((l,c)=>l.time-c.time);for(const l of o)r+=l.type==="s"?1:-1,r===1?i=l.time:(i&&+i!=+l.time&&n.push(Rn.fromDateTimes(i,l.time)),i=null);return Rn.merge(n)}difference(...e){return Rn.xor([this].concat(e)).map(i=>this.intersection(i)).filter(i=>i&&!i.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:_1}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=wR,i={}){return this.isValid?oo.create(this.s.loc.clone(i),e).formatInterval(this):_1}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:_1}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:_1}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:_1}toFormat(e,{separator:i="  "}={}){return this.isValid?`${this.s.toFormat(e)}${i}${this.e.toFormat(e)}`:_1}toDuration(e,i){return this.isValid?this.e.diff(this.s,e,i):qi.invalid(this.invalidReason)}mapEndpoints(e){return Rn.fromDateTimes(e(this.s),e(this.e))}}class VP{static hasDST(e=jn.defaultZone){const i=ut.now().setZone(e).set({month:12});return!e.isUniversal&&i.offset!==i.set({month:6}).offset}static isValidIANAZone(e){return zl.isValidZone(e)}static normalizeZone(e){return By(e,jn.defaultZone)}static getStartOfWeek({locale:e=null,locObj:i=null}={}){return(i||mr.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:i=null}={}){return(i||mr.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:i=null}={}){return(i||mr.create(e)).getWeekendDays().slice()}static months(e="long",{locale:i=null,numberingSystem:r=null,locObj:n=null,outputCalendar:s="gregory"}={}){return(n||mr.create(i,r,s)).months(e)}static monthsFormat(e="long",{locale:i=null,numberingSystem:r=null,locObj:n=null,outputCalendar:s="gregory"}={}){return(n||mr.create(i,r,s)).months(e,!0)}static weekdays(e="long",{locale:i=null,numberingSystem:r=null,locObj:n=null}={}){return(n||mr.create(i,r,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:i=null,numberingSystem:r=null,locObj:n=null}={}){return(n||mr.create(i,r,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return mr.create(e).meridiems()}static eras(e="short",{locale:i=null}={}){return mr.create(i,null,"gregory").eras(e)}static features(){return{relative:Wge(),localeWeek:Zge()}}}function vre(t,e){const i=n=>n.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),r=i(e)-i(t);return Math.floor(qi.fromMillis(r).as("days"))}function UNe(t,e,i){const r=[["years",(l,c)=>c.year-l.year],["quarters",(l,c)=>c.quarter-l.quarter+(c.year-l.year)*4],["months",(l,c)=>c.month-l.month+(c.year-l.year)*12],["weeks",(l,c)=>{const h=vre(l,c);return(h-h%7)/7}],["days",vre]],n={},s=t;let a,o;for(const[l,c]of r)i.indexOf(l)>=0&&(a=l,n[l]=c(t,e),o=s.plus(n),o>e?(n[l]--,t=s.plus(n),t>e&&(o=t,n[l]--,t=s.plus(n))):t=o);return[t,n,o,a]}function BNe(t,e,i,r){let[n,s,a,o]=UNe(t,e,i);const l=e-n,c=i.filter(m=>["hours","minutes","seconds","milliseconds"].indexOf(m)>=0);c.length===0&&(a<e&&(a=n.plus({[o]:1})),a!==n&&(s[o]=(s[o]||0)+l/(a-n)));const h=qi.fromObject(s,r);return c.length>0?qi.fromMillis(l,r).shiftTo(...c).plus(h):h}const qNe="missing Intl.DateTimeFormat.formatToParts support";function rr(t,e=i=>i){return{regex:t,deser:([i])=>e(Lze(i))}}const HNe="",hye=`[ ${HNe}]`,pye=new RegExp(hye,"g");function GNe(t){return t.replace(/\./g,"\\.?").replace(pye,hye)}function bre(t){return t.replace(/\./g,"").replace(pye," ").toLowerCase()}function Hu(t,e){return t===null?null:{regex:RegExp(t.map(GNe).join("|")),deser:([i])=>t.findIndex(r=>bre(i)===bre(r))+e}}function wre(t,e){return{regex:t,deser:([,i,r])=>RD(i,r),groups:e}}function UP(t){return{regex:t,deser:([e])=>e}}function WNe(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function ZNe(t,e){const i=qu(e),r=qu(e,"{2}"),n=qu(e,"{3}"),s=qu(e,"{4}"),a=qu(e,"{6}"),o=qu(e,"{1,2}"),l=qu(e,"{1,3}"),c=qu(e,"{1,6}"),h=qu(e,"{1,9}"),m=qu(e,"{2,4}"),g=qu(e,"{4,6}"),v=$=>({regex:RegExp(WNe($.val)),deser:([M])=>M,literal:!0}),x=($=>{if(t.literal)return v($);switch($.val){case"G":return Hu(e.eras("short"),0);case"GG":return Hu(e.eras("long"),0);case"y":return rr(c);case"yy":return rr(m,U8);case"yyyy":return rr(s);case"yyyyy":return rr(g);case"yyyyyy":return rr(a);case"M":return rr(o);case"MM":return rr(r);case"MMM":return Hu(e.months("short",!0),1);case"MMMM":return Hu(e.months("long",!0),1);case"L":return rr(o);case"LL":return rr(r);case"LLL":return Hu(e.months("short",!1),1);case"LLLL":return Hu(e.months("long",!1),1);case"d":return rr(o);case"dd":return rr(r);case"o":return rr(l);case"ooo":return rr(n);case"HH":return rr(r);case"H":return rr(o);case"hh":return rr(r);case"h":return rr(o);case"mm":return rr(r);case"m":return rr(o);case"q":return rr(o);case"qq":return rr(r);case"s":return rr(o);case"ss":return rr(r);case"S":return rr(l);case"SSS":return rr(n);case"u":return UP(h);case"uu":return UP(o);case"uuu":return rr(i);case"a":return Hu(e.meridiems(),0);case"kkkk":return rr(s);case"kk":return rr(m,U8);case"W":return rr(o);case"WW":return rr(r);case"E":case"c":return rr(i);case"EEE":return Hu(e.weekdays("short",!1),1);case"EEEE":return Hu(e.weekdays("long",!1),1);case"ccc":return Hu(e.weekdays("short",!0),1);case"cccc":return Hu(e.weekdays("long",!0),1);case"Z":case"ZZ":return wre(new RegExp(`([+-]${o.source})(?::(${r.source}))?`),2);case"ZZZ":return wre(new RegExp(`([+-]${o.source})(${r.source})?`),2);case"z":return UP(/[a-z_+-/]{1,256}?/i);case" ":return UP(/[^\S\n\r]/);default:return v($)}})(t)||{invalidReason:qNe};return x.token=t,x}const YNe={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function JNe(t,e,i){const{type:r,value:n}=t;if(r==="literal"){const l=/^\s+$/.test(n);return{literal:!l,val:l?" ":n}}const s=e[r];let a=r;r==="hour"&&(e.hour12!=null?a=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?a="hour12":a="hour24":a=i.hour12?"hour12":"hour24");let o=YNe[a];if(typeof o=="object"&&(o=o[s]),o)return{literal:!1,val:o}}function XNe(t){return[`^${t.map(i=>i.regex).reduce((i,r)=>`${i}(${r.source})`,"")}$`,t]}function QNe(t,e,i){const r=t.match(e);if(r){const n={};let s=1;for(const a in i)if(iT(i,a)){const o=i[a],l=o.groups?o.groups+1:1;!o.literal&&o.token&&(n[o.token.val[0]]=o.deser(r.slice(s,s+l))),s+=l}return[r,n]}else return[r,{}]}function KNe(t){const e=s=>{switch(s){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let i=null,r;return Kt(t.z)||(i=zl.create(t.z)),Kt(t.Z)||(i||(i=new Ms(t.Z)),r=t.Z),Kt(t.q)||(t.M=(t.q-1)*3+1),Kt(t.h)||(t.h<12&&t.a===1?t.h+=12:t.h===12&&t.a===0&&(t.h=0)),t.G===0&&t.y&&(t.y=-t.y),Kt(t.u)||(t.S=FZ(t.u)),[Object.keys(t).reduce((s,a)=>{const o=e(a);return o&&(s[o]=t[a]),s},{}),i,r]}let KV=null;function eDe(){return KV||(KV=ut.fromMillis(1555555555555)),KV}function tDe(t,e){if(t.literal)return t;const i=oo.macroTokenToFormatOpts(t.val),r=yye(i,e);return r==null||r.includes(void 0)?t:r}function fye(t,e){return Array.prototype.concat(...t.map(i=>tDe(i,e)))}class mye{constructor(e,i){if(this.locale=e,this.format=i,this.tokens=fye(oo.parseFormat(i),e),this.units=this.tokens.map(r=>ZNe(r,e)),this.disqualifyingUnit=this.units.find(r=>r.invalidReason),!this.disqualifyingUnit){const[r,n]=XNe(this.units);this.regex=RegExp(r,"i"),this.handlers=n}}explainFromTokens(e){if(this.isValid){const[i,r]=QNe(e,this.regex,this.handlers),[n,s,a]=r?KNe(r):[null,null,void 0];if(iT(r,"a")&&iT(r,"H"))throw new g$("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:this.tokens,regex:this.regex,rawMatches:i,matches:r,result:n,zone:s,specificOffset:a}}else return{input:e,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function gye(t,e,i){return new mye(t,i).explainFromTokens(e)}function iDe(t,e,i){const{result:r,zone:n,specificOffset:s,invalidReason:a}=gye(t,e,i);return[r,n,s,a]}function yye(t,e){if(!t)return null;const r=oo.create(e,t).dtFormatter(eDe()),n=r.formatToParts(),s=r.resolvedOptions();return n.map(a=>JNe(a,t,s))}const e6="Invalid DateTime",_re=864e13;function XM(t){return new Ed("unsupported zone",`the zone "${t.name}" is not supported`)}function t6(t){return t.weekData===null&&(t.weekData=_R(t.c)),t.weekData}function i6(t){return t.localWeekData===null&&(t.localWeekData=_R(t.c,t.loc.getMinDaysInFirstWeek(),t.loc.getStartOfWeek())),t.localWeekData}function Ib(t,e){const i={ts:t.ts,zone:t.zone,c:t.c,o:t.o,loc:t.loc,invalid:t.invalid};return new ut({...i,...e,old:i})}function vye(t,e,i){let r=t-e*60*1e3;const n=i.offset(r);if(e===n)return[r,e];r-=(n-e)*60*1e3;const s=i.offset(r);return n===s?[r,n]:[t-Math.min(n,s)*60*1e3,Math.max(n,s)]}function BP(t,e){t+=e*60*1e3;const i=new Date(t);return{year:i.getUTCFullYear(),month:i.getUTCMonth()+1,day:i.getUTCDate(),hour:i.getUTCHours(),minute:i.getUTCMinutes(),second:i.getUTCSeconds(),millisecond:i.getUTCMilliseconds()}}function X3(t,e,i){return vye(FD(t),e,i)}function xre(t,e){const i=t.o,r=t.c.year+Math.trunc(e.years),n=t.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,s={...t.c,year:r,month:n,day:Math.min(t.c.day,xR(r,n))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},a=qi.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),o=FD(s);let[l,c]=vye(o,i,t.zone);return a!==0&&(l+=a,c=t.zone.offset(l)),{ts:l,o:c}}function x1(t,e,i,r,n,s){const{setZone:a,zone:o}=i;if(t&&Object.keys(t).length!==0||e){const l=e||o,c=ut.fromObject(t,{...i,zone:l,specificOffset:s});return a?c:c.setZone(o)}else return ut.invalid(new Ed("unparsable",`the input "${n}" can't be parsed as ${r}`))}function qP(t,e,i=!0){return t.isValid?oo.create(mr.create("en-US"),{allowZ:i,forceSimple:!0}).formatDateTimeFromString(t,e):null}function r6(t,e,i){const r=t.c.year>9999||t.c.year<0;let n="";if(r&&t.c.year>=0&&(n+="+"),n+=xs(t.c.year,r?6:4),i==="year")return n;if(e){if(n+="-",n+=xs(t.c.month),i==="month")return n;n+="-"}else if(n+=xs(t.c.month),i==="month")return n;return n+=xs(t.c.day),n}function $re(t,e,i,r,n,s,a){let o=!i||t.c.millisecond!==0||t.c.second!==0,l="";switch(a){case"day":case"month":case"year":break;default:if(l+=xs(t.c.hour),a==="hour")break;if(e){if(l+=":",l+=xs(t.c.minute),a==="minute")break;o&&(l+=":",l+=xs(t.c.second))}else{if(l+=xs(t.c.minute),a==="minute")break;o&&(l+=xs(t.c.second))}if(a==="second")break;o&&(!r||t.c.millisecond!==0)&&(l+=".",l+=xs(t.c.millisecond,3))}return n&&(t.isOffsetFixed&&t.offset===0&&!s?l+="Z":t.o<0?(l+="-",l+=xs(Math.trunc(-t.o/60)),l+=":",l+=xs(Math.trunc(-t.o%60))):(l+="+",l+=xs(Math.trunc(t.o/60)),l+=":",l+=xs(Math.trunc(t.o%60)))),s&&(l+="["+t.zone.ianaName+"]"),l}const bye={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},rDe={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},nDe={ordinal:1,hour:0,minute:0,second:0,millisecond:0},Q3=["year","month","day","hour","minute","second","millisecond"],sDe=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],aDe=["year","ordinal","hour","minute","second","millisecond"];function K3(t){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[t.toLowerCase()];if(!e)throw new bge(t);return e}function Sre(t){switch(t.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return K3(t)}}function oDe(t){if(QM===void 0&&(QM=jn.now()),t.type!=="iana")return t.offset(QM);const e=t.name;let i=B8.get(e);return i===void 0&&(i=t.offset(QM),B8.set(e,i)),i}function Tre(t,e){const i=By(e.zone,jn.defaultZone);if(!i.isValid)return ut.invalid(XM(i));const r=mr.fromObject(e);let n,s;if(Kt(t.year))n=jn.now();else{for(const l of Q3)Kt(t[l])&&(t[l]=bye[l]);const a=Hge(t)||Gge(t);if(a)return ut.invalid(a);const o=oDe(i);[n,s]=X3(t,o,i)}return new ut({ts:n,zone:i,loc:r,o:s})}function Ire(t,e,i){const r=Kt(i.round)?!0:i.round,n=Kt(i.rounding)?"trunc":i.rounding,s=(o,l)=>(o=RZ(o,r||i.calendary?0:2,i.calendary?"round":n),e.loc.clone(i).relFormatter(i).format(o,l)),a=o=>i.calendary?e.hasSame(t,o)?0:e.startOf(o).diff(t.startOf(o),o).get(o):e.diff(t,o).get(o);if(i.unit)return s(a(i.unit),i.unit);for(const o of i.units){const l=a(o);if(Math.abs(l)>=1)return s(l,o)}return s(t>e?-0:0,i.units[i.units.length-1])}function Mre(t){let e={},i;return t.length>0&&typeof t[t.length-1]=="object"?(e=t[t.length-1],i=Array.from(t).slice(0,t.length-1)):i=Array.from(t),[e,i]}let QM;const B8=new Map;class ut{constructor(e){const i=e.zone||jn.defaultZone;let r=e.invalid||(Number.isNaN(e.ts)?new Ed("invalid input"):null)||(i.isValid?null:XM(i));this.ts=Kt(e.ts)?jn.now():e.ts;let n=null,s=null;if(!r)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(i))[n,s]=[e.old.c,e.old.o];else{const o=gv(e.o)&&!e.old?e.o:i.offset(this.ts);n=BP(this.ts,o),r=Number.isNaN(n.year)?new Ed("invalid input"):null,n=r?null:n,s=r?null:o}this._zone=i,this.loc=e.loc||mr.create(),this.invalid=r,this.weekData=null,this.localWeekData=null,this.c=n,this.o=s,this.isLuxonDateTime=!0}static now(){return new ut({})}static local(){const[e,i]=Mre(arguments),[r,n,s,a,o,l,c]=i;return Tre({year:r,month:n,day:s,hour:a,minute:o,second:l,millisecond:c},e)}static utc(){const[e,i]=Mre(arguments),[r,n,s,a,o,l,c]=i;return e.zone=Ms.utcInstance,Tre({year:r,month:n,day:s,hour:a,minute:o,second:l,millisecond:c},e)}static fromJSDate(e,i={}){const r=Dze(e)?e.valueOf():NaN;if(Number.isNaN(r))return ut.invalid("invalid input");const n=By(i.zone,jn.defaultZone);return n.isValid?new ut({ts:r,zone:n,loc:mr.fromObject(i)}):ut.invalid(XM(n))}static fromMillis(e,i={}){if(gv(e))return e<-_re||e>_re?ut.invalid("Timestamp out of range"):new ut({ts:e,zone:By(i.zone,jn.defaultZone),loc:mr.fromObject(i)});throw new eo(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,i={}){if(gv(e))return new ut({ts:e*1e3,zone:By(i.zone,jn.defaultZone),loc:mr.fromObject(i)});throw new eo("fromSeconds requires a numerical input")}static fromObject(e,i={}){e=e||{};const r=By(i.zone,jn.defaultZone);if(!r.isValid)return ut.invalid(XM(r));const n=mr.fromObject(i),s=$R(e,Sre),{minDaysInFirstWeek:a,startOfWeek:o}=ure(s,n),l=jn.now(),c=Kt(i.specificOffset)?r.offset(l):i.specificOffset,h=!Kt(s.ordinal),m=!Kt(s.year),g=!Kt(s.month)||!Kt(s.day),v=m||g,b=s.weekYear||s.weekNumber;if((v||h)&&b)throw new g$("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(g&&h)throw new g$("Can't mix ordinal dates with month/day");const x=b||s.weekday&&!v;let $,M,k=BP(l,c);x?($=sDe,M=rDe,k=_R(k,a,o)):h?($=aDe,M=nDe,k=QV(k)):($=Q3,M=bye);let A=!1;for(const Q of $){const le=s[Q];Kt(le)?A?s[Q]=M[Q]:s[Q]=k[Q]:A=!0}const L=x?Rze(s,a,o):h?zze(s):Hge(s),z=L||Gge(s);if(z)return ut.invalid(z);const U=x?lre(s,a,o):h?cre(s):s,[B,X]=X3(U,c,r),J=new ut({ts:B,zone:r,o:X,loc:n});return s.weekday&&v&&e.weekday!==J.weekday?ut.invalid("mismatched weekday",`you can't specify both a weekday of ${s.weekday} and a date of ${J.toISO()}`):J.isValid?J:ut.invalid(J.invalid)}static fromISO(e,i={}){const[r,n]=CNe(e);return x1(r,n,i,"ISO 8601",e)}static fromRFC2822(e,i={}){const[r,n]=ENe(e);return x1(r,n,i,"RFC 2822",e)}static fromHTTP(e,i={}){const[r,n]=kNe(e);return x1(r,n,i,"HTTP",i)}static fromFormat(e,i,r={}){if(Kt(e)||Kt(i))throw new eo("fromFormat requires an input string and a format");const{locale:n=null,numberingSystem:s=null}=r,a=mr.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0}),[o,l,c,h]=iDe(a,e,i);return h?ut.invalid(h):x1(o,l,r,`format ${i}`,e,c)}static fromString(e,i,r={}){return ut.fromFormat(e,i,r)}static fromSQL(e,i={}){const[r,n]=zNe(e);return x1(r,n,i,"SQL",e)}static invalid(e,i=null){if(!e)throw new eo("need to specify a reason the DateTime is invalid");const r=e instanceof Ed?e:new Ed(e,i);if(jn.throwOnInvalid)throw new uze(r);return new ut({invalid:r})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,i={}){const r=yye(e,mr.fromObject(i));return r?r.map(n=>n?n.val:null).join(""):null}static expandFormat(e,i={}){return fye(oo.parseFormat(e),mr.fromObject(i)).map(n=>n.val).join("")}static resetCache(){QM=void 0,B8.clear()}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?t6(this).weekYear:NaN}get weekNumber(){return this.isValid?t6(this).weekNumber:NaN}get weekday(){return this.isValid?t6(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?i6(this).weekday:NaN}get localWeekNumber(){return this.isValid?i6(this).weekNumber:NaN}get localWeekYear(){return this.isValid?i6(this).weekYear:NaN}get ordinal(){return this.isValid?QV(this.c).ordinal:NaN}get monthShort(){return this.isValid?VP.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?VP.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?VP.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?VP.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,i=6e4,r=FD(this.c),n=this.zone.offset(r-e),s=this.zone.offset(r+e),a=this.zone.offset(r-n*i),o=this.zone.offset(r-s*i);if(a===o)return[this];const l=r-a*i,c=r-o*i,h=BP(l,a),m=BP(c,o);return h.hour===m.hour&&h.minute===m.minute&&h.second===m.second&&h.millisecond===m.millisecond?[Ib(this,{ts:l}),Ib(this,{ts:c})]:[this]}get isInLeapYear(){return Rk(this.year)}get daysInMonth(){return xR(this.year,this.month)}get daysInYear(){return this.isValid?N$(this.year):NaN}get weeksInWeekYear(){return this.isValid?$E(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?$E(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:i,numberingSystem:r,calendar:n}=oo.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:i,numberingSystem:r,outputCalendar:n}}toUTC(e=0,i={}){return this.setZone(Ms.instance(e),i)}toLocal(){return this.setZone(jn.defaultZone)}setZone(e,{keepLocalTime:i=!1,keepCalendarTime:r=!1}={}){if(e=By(e,jn.defaultZone),e.equals(this.zone))return this;if(e.isValid){let n=this.ts;if(i||r){const s=e.offset(this.ts),a=this.toObject();[n]=X3(a,s,e)}return Ib(this,{ts:n,zone:e})}else return ut.invalid(XM(e))}reconfigure({locale:e,numberingSystem:i,outputCalendar:r}={}){const n=this.loc.clone({locale:e,numberingSystem:i,outputCalendar:r});return Ib(this,{loc:n})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const i=$R(e,Sre),{minDaysInFirstWeek:r,startOfWeek:n}=ure(i,this.loc),s=!Kt(i.weekYear)||!Kt(i.weekNumber)||!Kt(i.weekday),a=!Kt(i.ordinal),o=!Kt(i.year),l=!Kt(i.month)||!Kt(i.day),c=o||l,h=i.weekYear||i.weekNumber;if((c||a)&&h)throw new g$("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(l&&a)throw new g$("Can't mix ordinal dates with month/day");let m;s?m=lre({..._R(this.c,r,n),...i},r,n):Kt(i.ordinal)?(m={...this.toObject(),...i},Kt(i.day)&&(m.day=Math.min(xR(m.year,m.month),m.day))):m=cre({...QV(this.c),...i});const[g,v]=X3(m,this.o,this.zone);return Ib(this,{ts:g,o:v})}plus(e){if(!this.isValid)return this;const i=qi.fromDurationLike(e);return Ib(this,xre(this,i))}minus(e){if(!this.isValid)return this;const i=qi.fromDurationLike(e).negate();return Ib(this,xre(this,i))}startOf(e,{useLocaleWeeks:i=!1}={}){if(!this.isValid)return this;const r={},n=qi.normalizeUnit(e);switch(n){case"years":r.month=1;case"quarters":case"months":r.day=1;case"weeks":case"days":r.hour=0;case"hours":r.minute=0;case"minutes":r.second=0;case"seconds":r.millisecond=0;break}if(n==="weeks")if(i){const s=this.loc.getStartOfWeek(),{weekday:a}=this;a<s&&(r.weekNumber=this.weekNumber-1),r.weekday=s}else r.weekday=1;if(n==="quarters"){const s=Math.ceil(this.month/3);r.month=(s-1)*3+1}return this.set(r)}endOf(e,i){return this.isValid?this.plus({[e]:1}).startOf(e,i).minus(1):this}toFormat(e,i={}){return this.isValid?oo.create(this.loc.redefaultToEN(i)).formatDateTimeFromString(this,e):e6}toLocaleString(e=wR,i={}){return this.isValid?oo.create(this.loc.clone(i),e).formatDateTime(this):e6}toLocaleParts(e={}){return this.isValid?oo.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:i=!1,suppressMilliseconds:r=!1,includeOffset:n=!0,extendedZone:s=!1,precision:a="milliseconds"}={}){if(!this.isValid)return null;a=K3(a);const o=e==="extended";let l=r6(this,o,a);return Q3.indexOf(a)>=3&&(l+="T"),l+=$re(this,o,i,r,n,s,a),l}toISODate({format:e="extended",precision:i="day"}={}){return this.isValid?r6(this,e==="extended",K3(i)):null}toISOWeekDate(){return qP(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:i=!1,includeOffset:r=!0,includePrefix:n=!1,extendedZone:s=!1,format:a="extended",precision:o="milliseconds"}={}){return this.isValid?(o=K3(o),(n&&Q3.indexOf(o)>=3?"T":"")+$re(this,a==="extended",i,e,r,s,o)):null}toRFC2822(){return qP(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return qP(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?r6(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:i=!1,includeOffsetSpace:r=!0}={}){let n="HH:mm:ss.SSS";return(i||e)&&(r&&(n+=" "),i?n+="z":e&&(n+="ZZ")),qP(this,n,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():e6}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const i={...this.c};return e.includeConfig&&(i.outputCalendar=this.outputCalendar,i.numberingSystem=this.loc.numberingSystem,i.locale=this.loc.locale),i}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,i="milliseconds",r={}){if(!this.isValid||!e.isValid)return qi.invalid("created by diffing an invalid DateTime");const n={locale:this.locale,numberingSystem:this.numberingSystem,...r},s=jze(i).map(qi.normalizeUnit),a=e.valueOf()>this.valueOf(),o=a?this:e,l=a?e:this,c=BNe(o,l,s,n);return a?c.negate():c}diffNow(e="milliseconds",i={}){return this.diff(ut.now(),e,i)}until(e){return this.isValid?Rn.fromDateTimes(this,e):this}hasSame(e,i,r){if(!this.isValid)return!1;const n=e.valueOf(),s=this.setZone(e.zone,{keepLocalTime:!0});return s.startOf(i,r)<=n&&n<=s.endOf(i,r)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const i=e.base||ut.fromObject({},{zone:this.zone}),r=e.padding?this<i?-e.padding:e.padding:0;let n=["years","months","days","hours","minutes","seconds"],s=e.unit;return Array.isArray(e.unit)&&(n=e.unit,s=void 0),Ire(i,this.plus(r),{...e,numeric:"always",units:n,unit:s})}toRelativeCalendar(e={}){return this.isValid?Ire(e.base||ut.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(ut.isDateTime))throw new eo("min requires all arguments be DateTimes");return dre(e,i=>i.valueOf(),Math.min)}static max(...e){if(!e.every(ut.isDateTime))throw new eo("max requires all arguments be DateTimes");return dre(e,i=>i.valueOf(),Math.max)}static fromFormatExplain(e,i,r={}){const{locale:n=null,numberingSystem:s=null}=r,a=mr.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0});return gye(a,e,i)}static fromStringExplain(e,i,r={}){return ut.fromFormatExplain(e,i,r)}static buildFormatParser(e,i={}){const{locale:r=null,numberingSystem:n=null}=i,s=mr.fromOpts({locale:r,numberingSystem:n,defaultToEN:!0});return new mye(s,e)}static fromFormatParser(e,i,r={}){if(Kt(e)||Kt(i))throw new eo("fromFormatParser requires an input string and a format parser");const{locale:n=null,numberingSystem:s=null}=r,a=mr.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0});if(!a.equals(i.locale))throw new eo(`fromFormatParser called with a locale of ${a}, but the format parser was created for ${i.locale}`);const{result:o,zone:l,specificOffset:c,invalidReason:h}=i.explainFromTokens(e);return h?ut.invalid(h):x1(o,l,r,`format ${i.format}`,e,c)}static get DATE_SHORT(){return wR}static get DATE_MED(){return wge}static get DATE_MED_WITH_WEEKDAY(){return pze}static get DATE_FULL(){return _ge}static get DATE_HUGE(){return xge}static get TIME_SIMPLE(){return $ge}static get TIME_WITH_SECONDS(){return Sge}static get TIME_WITH_SHORT_OFFSET(){return Tge}static get TIME_WITH_LONG_OFFSET(){return Ige}static get TIME_24_SIMPLE(){return Mge}static get TIME_24_WITH_SECONDS(){return Cge}static get TIME_24_WITH_SHORT_OFFSET(){return Ege}static get TIME_24_WITH_LONG_OFFSET(){return kge}static get DATETIME_SHORT(){return Age}static get DATETIME_SHORT_WITH_SECONDS(){return Pge}static get DATETIME_MED(){return Oge}static get DATETIME_MED_WITH_SECONDS(){return Lge}static get DATETIME_MED_WITH_WEEKDAY(){return fze}static get DATETIME_FULL(){return Fge}static get DATETIME_FULL_WITH_SECONDS(){return Rge}static get DATETIME_HUGE(){return zge}static get DATETIME_HUGE_WITH_SECONDS(){return Nge}}function lM(t){if(ut.isDateTime(t))return t;if(t&&t.valueOf&&gv(t.valueOf()))return ut.fromJSDate(t);if(t&&typeof t=="object")return ut.fromObject(t);throw new eo(`Unknown datetime argument: ${t}, of type ${typeof t}`)}const lDe="shortOffset";function cDe(t){return"timeZoneIANA"in t}function uDe(t){return t.startsWith("UTC")}function SR(t,e=!1){return{json:{read:{source:t,reader:(i,r)=>r[t]?eL(r[t]):null},write:!!e&&{allowNull:!0,writer(i,r){r[t]=i?dDe(i):null}}}}}function eL(t,e=Rl){return t?cDe(t)?t.timeZoneIANA:hDe(t,e):e}function dDe(t){return{timeZoneIANA:t}}function hDe(t,e=Rl){if(!t||!Xie.has(t.timeZone))return e;const i=Xie.get(t.timeZone);return uDe(t.timeZone)||t.respectsDaylightSaving?i:pDe(i)}function pDe(t){const e=ut.local().setZone(t),i=Math.min(e.set({month:1,day:1}).offset,e.set({month:5}).offset);return i===0?"Etc/UTC":`Etc/GMT${Ms.instance(-i).formatOffset(0,"narrow")}`}function wye(t,e,i,r,n){if(e&&n==="date")return{timeZone:Vp,timeZoneName:void 0};const s=r.hour,a=i===Pv;return{timeZone:a?n==="timestamp-offset"?void 0:t??Vp:i,timeZoneName:a&&s?lDe:void 0}}function fDe(t){const e=new Set(["etc/utc","etc/gmt","gmt"]),i=new Set(Intl.supportedValuesOf("timeZone").map(r=>r.toLowerCase()));return t===Rl||t===Pv||e.has(t.toLowerCase())||i.has(t.toLowerCase())}const mDe={dateStyle:void 0,year:void 0,month:void 0,day:void 0,weekday:void 0},gDe={timeStyle:void 0,hour12:void 0,hourCycle:void 0,hour:void 0,minute:void 0,second:void 0},_ye={timeZone:Vp},lh={year:"numeric",month:"numeric",day:"numeric"},cM={year:"numeric",month:"long",day:"numeric"},uM={year:"numeric",month:"short",day:"numeric"},dM={year:"numeric",month:"long",weekday:"long",day:"numeric"},Oy={hour:"numeric",minute:"numeric"},Hb={...Oy,second:"numeric"},xye={hourCycle:"h23"},hM={...Oy,...xye},pM={...Hb,...xye},$ye={"short-date":lh,"short-date-short-time":{...lh,...Oy},"short-date-short-time-24":{...lh,...hM},"short-date-long-time":{...lh,...Hb},"short-date-long-time-24":{...lh,...pM},"short-date-le":lh,"short-date-le-short-time":{...lh,...Oy},"short-date-le-short-time-24":{...lh,...hM},"short-date-le-long-time":{...lh,...Hb},"short-date-le-long-time-24":{...lh,...pM},"long-month-day-year":cM,"long-month-day-year-short-time":{...cM,...Oy},"long-month-day-year-short-time-24":{...cM,...hM},"long-month-day-year-long-time":{...cM,...Hb},"long-month-day-year-long-time-24":{...cM,...pM},"day-short-month-year":uM,"day-short-month-year-short-time":{...uM,...Oy},"day-short-month-year-short-time-24":{...uM,...hM},"day-short-month-year-long-time":{...uM,...Hb},"day-short-month-year-long-time-24":{...uM,...pM},"long-date":dM,"long-date-short-time":{...dM,...Oy},"long-date-short-time-24":{...dM,...hM},"long-date-long-time":{...dM,...Hb},"long-date-long-time-24":{...dM,...pM},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":Oy,"long-time":Hb},yDe=Es()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"}),Sye={ar:"ar-u-nu-latn-ca-gregory",nn:"no-NN"},vDe=new Intl.DateTimeFormat("bs",{month:"long"}).formatToParts(new Date(2025,2));var Dde;const bDe=(Dde=vDe.find(({type:t})=>t==="month"))==null?void 0:Dde.value.toLowerCase();function Tye(){const t=EZ();return(t&&Sye[t])??yge()}bDe!=="mart"&&(Sye.bs="sr-Latn-CS");let q8=new WeakMap;const ND=$ye["short-date-short-time"];function wDe(t){let e=q8.get(t);if(!e){const i=Tye(),r=jZ(t.timeZone??Rl),n={...t,timeZone:r};e=new Intl.DateTimeFormat(i,n),q8.set(t,e)}return e}function cx(t){return $ye[t]}function _De(t){const{dateStyle:e,timeStyle:i,hour12:r,year:n,month:s}=t,a={};return e?a.dateStyle=e:n&&(a.year=n,a.month=s||void 0),i&&!a.year&&(a.timeStyle=i,a.hour12=r==="auto"?void 0:r==="always"),a}function wc(t,e=ND){return wDe(e).format(t)}function xDe(t,e=ND){return wc(new Date(t),{...e,..._ye,...gDe})}function $De(t,e=ND){return wc(new Date(`1970-01-01T${t}Z`),{...e,..._ye,...mDe})}function SDe(t,e=ND){if(e.timeZone)return wc(new Date(t),e);const i=ut.fromISO(t,{setZone:!0}),r=i.offset===0?Vp:e.timeZone,n={...e,timeZone:r};return i.toLocaleString(n,{locale:Tye()})}function jZ(t){switch(t){case Rl:return cze;case Pv:return Vp;default:return t}}AZ(()=>{q8=new WeakMap});const TDe={ar:"ar-u-nu-latn",bs:"sr-Latn-CS",nn:"no-NN"};let tL=new WeakMap,Iye={};function H8(t){const e=t||Iye;if(!tL.has(e)){const i=EZ(),r=i&&TDe[i]||yge();tL.set(e,new Intl.NumberFormat(r,t))}return tL.get(e)}function Dk(t={}){const e={};return t.digitSeparator!=null&&(e.useGrouping=t.digitSeparator),t.places!=null&&(e.minimumFractionDigits=e.maximumFractionDigits=t.places),e}function Mye(t){const{minimumFractionDigits:e,maximumFractionDigits:i,useGrouping:r}=t;return{minimumFractionDigits:e,maximumFractionDigits:i,useGrouping:r==="auto"?"auto":r==="always"}}function or(t,e){return Object.is(t,-0)&&(t=0),H8(e).format(t)}function Lxt(t,e=Ol()){var r,n;if(!t)return null;let i=Cre.get(e);if(!i){const s=H8().formatToParts(12345.6),a=[...H8({useGrouping:!1}).format(9876543210)].reverse(),o=new Map(a.map((v,b)=>[v,b])),l=new RegExp(`[${(r=s.find(v=>v.type==="group"))==null?void 0:r.value}]`,"g"),c=new RegExp(`[${(n=s.find(v=>v.type==="decimal"))==null?void 0:n.value}]`),h=new RegExp(`[${a.join("")}]`,"g"),m=/[\u200E\u200F\u202A\u202B\u202C\u202D\u202E\u2066\u2067\u2068\u2069\u061C]/g,g=/[-\u2212\u2013\u2014\u2015]/g;i=v=>{if((v=v.trim().replaceAll(l,"").replace(c,".").replace(h,x=>String(o.get(x))).replaceAll(m,"").replaceAll(g,"-"))==="")return null;const b=Number(v);return isNaN(b)?null:b},Cre.set(e,i)}return i(t)}AZ(()=>{tL=new WeakMap,Iye={}});const Cre=new Map,Cye=()=>Ie.getLogger("esri.intl.substitute");function Sr(t,e,i={}){const{format:r={}}=i;return Ho(t,n=>IDe(n,e,r))}function IDe(t,e,i){let r,n;const s=t.indexOf(":");if(s===-1?r=t.trim():(r=t.slice(0,s).trim(),n=t.slice(s+1).trim()),!r)return"";const a=$k(r,e);if(a==null)return"";const o=(n?i==null?void 0:i[n]:null)??(i==null?void 0:i[r]);return o?MDe(a,o):n?CDe(a,n):VZ(a)}function MDe(t,e){switch(e.type){case"date":return wc(t,e.intlOptions);case"number":return or(t,e.intlOptions);default:return Cye().warn("missing format descriptor for key {key}"),VZ(t)}}function CDe(t,e){switch(e.toLowerCase()){case"dateformat":return wc(t);case"numberformat":return or(t);default:return Cye().warn(`inline format is unsupported since 4.12: ${e}`),/^(dateformat|datestring)/i.test(e)?wc(t):/^numberformat/i.test(e)?or(t):VZ(t)}}function VZ(t){switch(typeof t){case"string":return t;case"number":return or(t);case"boolean":return""+t;default:return t instanceof Date?wc(t):""}}const Eye={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:"no",nl:!0,no:!0,nn:"no",pl:!0,pt:"pt-BR","pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,zh:"zh-CN","zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function EDe(t){return t in Eye}function Ere(t){if(EDe(t)){const e=Eye[t];return e===!0?t:e}return null}const KM=[],j$=new Map;function kre(t){for(const e of j$.keys())Pye(t.pattern,e)&&j$.delete(e)}function kDe(t){return KM.includes(t)||(kre(t),KM.unshift(t)),Ii(()=>{const e=KM.indexOf(t);e>-1&&(KM.splice(e,1),kre(t))})}async function kye(t){const e=Ol();j$.has(t)||j$.set(t,ADe(t,e));const i=j$.get(t);return i&&await PDe.add(i),i}function Aye(t){const e=EZ(t);return e?Ere(t)??Ere(e):null}async function ADe(t,e){const i=[];for(const r of KM)if(Pye(r.pattern,t))try{return await r.fetchMessageBundle(t,e)}catch(n){i.push(n)}throw i.length?new ae("intl:message-bundle-error",`Errors occurred while loading "${t}"`,{errors:i}):new ae("intl:no-message-bundle-loader",`No loader found for message bundle "${t}"`)}function Pye(t,e){return typeof t=="string"?e.startsWith(t):t.test(e)}AZ(()=>{j$.clear()});const PDe=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(t){return this._increase(),t.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=Fl())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function ODe(t,e,i,r){const n=e.exec(i);if(!n)throw new ae("esri-intl:invalid-bundle",`Bundle id "${i}" is not compatible with the pattern "${e}"`);const s=n[1]?`${n[1]}/`:"",a=n[2],o=Aye(r),l=`${s}${a}.json`,c=o?`${s}${a}_${o}.json`:l;let h;try{h=await Are(t(c))}catch(m){if(c===l)throw new ae("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:m});try{h=await Are(t(l))}catch(g){throw new ae("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:g})}}return h}async function Are(t){if(Pre.fetchBundleAsset!=null)return Pre.fetchBundleAsset(t);const e=await mi(t,{responseType:"text"});return JSON.parse(e.data)}let LDe=class{constructor({base:e="",pattern:i,location:r=new URL(window.location.href)}){let n;n=typeof r=="string"?s=>new URL(s,new URL(r,window.location.href)).href:r instanceof URL?s=>new URL(s,r).href:r,this.pattern=typeof i=="string"?new RegExp(`^${i}`):i,this.getAssetUrl=n,e=e?e.endsWith("/")?e:e+"/":"",this.matcher=new RegExp(`^${e}(?:(.*)\\/)?(.*)$`)}fetchMessageBundle(e,i){return ODe(this.getAssetUrl,this.matcher,e,i)}};function FDe(t){return new LDe(t)}const Pre={};kDe(FDe({pattern:"esri/",location:Hr}));const Ore={};function RDe(t){var i;const e={async:t.async,isDebug:t.isDebug,locale:t.locale,baseUrl:t.baseUrl,has:{...t.has},map:{...t.map},packages:((i=t.packages)==null?void 0:i.slice())||[],paths:{...Ore.paths,...t.paths}};return t.hasOwnProperty("async")||(e.async=!0),t.hasOwnProperty("isDebug")||(e.isDebug=!1),t.baseUrl||(e.baseUrl=Ore.baseUrl),e}let zDe=class{constructor(){const e=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(i=>{this[i]=(...r)=>e[i](...r)})}},iL=class{constructor(){this._dispatcher=new zDe,this._workerPostMessage({type:jm.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(e){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=e,e&&this.addEventListener("message",e)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(e){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=e,e&&this.addEventListener("messageerror",e)}get onerror(){return this._onerrorHandler}set onerror(e){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=e,e&&this.addEventListener("error",e)}postMessage(e){WF(()=>{this._workerMessageHandler(new MessageEvent("message",{data:e}))})}dispatchEvent(e){return this._dispatcher.dispatchEvent(e)}addEventListener(e,i,r){this._dispatcher.addEventListener(e,i,r)}removeEventListener(e,i,r){this._dispatcher.removeEventListener(e,i,r)}_workerPostMessage(e){WF(()=>{this.dispatchEvent(new MessageEvent("message",{data:e}))})}async _workerMessageHandler(e){const i=xE(e);if(i&&i.type===jm.OPEN){const{modulePath:r,jobId:n}=i;let s=await tT.loadWorker(r);s||(s=await import(r));const a=tT.connect(s);this._workerPostMessage({type:jm.OPENED,jobId:n,data:a})}}};const G8=()=>Ie.getLogger("esri.core.workers.workerFactory"),{HANDSHAKE:NDe}=jm,DDe='let globalId=0;const outgoing=new Map,configuration={CONFIGURATION};self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;let s=null;return new Promise((r,i)=>{if(t){if(t.aborted)return i(createAbortError());s=()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))},t.addEventListener("abort",s)}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})}).finally(()=>{t&&t.removeEventListener("abort",s)})}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,fullVersion:r}=configuration.kernelInfo,{revision:t,fullVersion:n,version:s}=e.kernelInfo;esriConfig.assetsPath!==esriConfig.defaultAssetsPath&&o!==t&&console.warn(`Version mismatch detected between ArcGIS Maps SDK for JavaScript modules and assets. For more information visit https://esriurl.com/using-local-assets.\nModules version: ${r}\nAssets version: ${n??s}\nAssets path: ${esriConfig.assetsPath}`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let n;function t(e){const o=n.connect(e);self.postMessage({type:2,jobId:r,data:o},[o])}"function"==typeof define&&define.amd?require([workerPath],e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(e=>e||new Promise(e=>{require([o.modulePath],e)})).then(t)}):"System"in self&&"function"==typeof System.import?System.import(workerPath).then(e=>(n=e.default,checkWorkerRevision(n),n.loadWorker(o.modulePath))).then(e=>e||System.import(o.modulePath)).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then(e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(e=>e||import(o.modulePath)).then(t)}):(self.RemoteClient||importScripts(workerPath),n=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const s=outgoing.get(r);outgoing.delete(r),o.error?s.reject(JSON.parse(o.error)):s.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let HP,GP;const Lre="Failed to create Worker. Fallback to execute module in main thread";async function jDe(){if(!ve("esri-workers"))return Fre(new iL);if(!HP&&!GP)try{const e=DDe.split("{CONFIGURATION}").join(VDe());HP=URL.createObjectURL(new Blob([e],{type:"text/javascript"}))}catch(e){GP=e||{}}let t;if(HP)try{t=new Worker(HP,{name:"esri-worker-"+UDe++})}catch{G8().warn(Lre,GP),t=new iL}else G8().warn(Lre,GP),t=new iL;return Fre(t)}async function Fre(t){return new Promise(e=>{function i(n){const s=xE(n);s&&s.type===NDe&&(t.removeEventListener("message",i),t.removeEventListener("error",r),e(t))}function r(n){n.preventDefault(),t.removeEventListener("message",i),t.removeEventListener("error",r),G8().warn("Failed to create Worker. Fallback to execute module in main thread",n),(t=new iL).addEventListener("message",i),t.addEventListener("error",r)}t.addEventListener("message",i),t.addEventListener("error",r)})}function VDe(){let t;if(Ti.default!=null){const n={...Ti};delete n.default,t=JSON.parse(JSON.stringify(n))}else t=JSON.parse(JSON.stringify(Ti));t.assetsPath=El(t.assetsPath),t.defaultAssetsPath=t.defaultAssetsPath?El(t.defaultAssetsPath):void 0,t.request.interceptors=[],t.log.interceptors=[],t.locale=Ol(),t.has={"esri-csp-restrictions":ve("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":ve("esri-2d-update-debug"),"esri-2d-log-updating":ve("esri-2d-log-updating"),"featurelayer-pbf":ve("featurelayer-pbf"),"featurelayer-fast-triangulation-enabled":ve("featurelayer-fast-triangulation-enabled"),"featurelayer-simplify-thresholds":ve("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":ve("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":ve("featurelayer-simplify-mobile-factor"),"featurelayer-query-max-depth":ve("featurelayer-query-max-depth"),"featurelayer-query-tile-max-features":ve("featurelayer-query-tile-max-features"),"featurelayer-query-tile-concurrency":ve("featurelayer-query-tile-concurrency"),"featurelayer-query-pausing-enabled":ve("featurelayer-query-pausing-enabled"),"featurelayer-snapshot-concurrency":ve("featurelayer-snapshot-concurrency"),"featurelayer-snapshot-enabled":ve("featurelayer-snapshot-enabled"),"parquetlayer-full-query-feature-count":ve("parquetlayer-full-query-feature-count"),"esri-atomics":ve("esri-atomics"),"esri-shared-array-buffer":ve("esri-shared-array-buffer"),"esri-tiles-debug":ve("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":ve("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":ve("feature-polyline-generalization-factor"),"host-webworker":1},t.workers.loaderUrl&&(t.workers.loaderUrl=El(t.workers.loaderUrl)),t.workers.workerPath?t.workers.workerPath=El(t.workers.workerPath):t.workers.workerPath=El(Hr("esri/core/workers/RemoteClient.js")),t.workers.useDynamicImport=!1;const e=Ti.workers.loaderConfig,i=RDe({baseUrl:e==null?void 0:e.baseUrl,locale:Ol(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...e==null?void 0:e.has},map:{...e==null?void 0:e.map},paths:{...e==null?void 0:e.paths},packages:(e==null?void 0:e.packages)||[]});return JSON.stringify({esriConfig:t,loaderConfig:i,kernelInfo:{buildDate:Afe,fullVersion:tZ,revision:Pfe}})}let UDe=0;const{ABORT:Rre,INVOKE:BDe,OPEN:qDe,OPENED:HDe,RESPONSE:fM}=jm;let GDe=class Oye{static async create(e){const i=await jDe();return new Oye(i,e)}constructor(e,i){this._outJobs=new Map,this._inJobs=new Map,this.worker=e,this.id=i,e.addEventListener("message",this._onMessage.bind(this)),e.addEventListener("error",r=>{r.preventDefault(),Ie.getLogger("esri.core.workers.WorkerOwner").error(r)})}terminate(){this.worker.terminate()}async open(e,i={}){const{signal:r}=i,n=fge();return new Promise((s,a)=>{const o={resolve:s,reject:a,abortHandle:PW(r,()=>{this._outJobs.delete(n),this._post({type:Rre,jobId:n})})};this._outJobs.set(n,o),this._post({type:qDe,jobId:n,modulePath:e})})}_onMessage(e){const i=xE(e);if(i)switch(i.type){case HDe:this._onOpenedMessage(i);break;case fM:this._onResponseMessage(i);break;case Rre:this._onAbortMessage(i);break;case BDe:this._onInvokeMessage(i)}}_onAbortMessage(e){const i=this._inJobs,r=e.jobId,n=i.get(r);n&&(n.controller&&n.controller.abort(),i.delete(r))}_onInvokeMessage(e){const{methodName:i,jobId:r,data:n,abortable:s}=e,a=s?new AbortController:null,o=this._inJobs,l=aze[i];let c;try{if(typeof l!="function")throw new TypeError(`${i} is not a function`);c=l.call(null,n,{signal:a?a.signal:null})}catch(h){return void this._post({type:fM,jobId:r,error:bR(h)})}uo(c)?(o.set(r,{controller:a,promise:c}),c.then(h=>{o.has(r)&&(o.delete(r),this._post({type:fM,jobId:r},h))},h=>{o.has(r)&&(o.delete(r),h||(h={message:"Error encountered at method"+i}),In(h)||this._post({type:fM,jobId:r,error:bR(h||{message:`Error encountered at method ${i}`})}))})):this._post({type:fM,jobId:r},c)}_onOpenedMessage(e){const{jobId:i,data:r}=e,n=this._outJobs.get(i);n&&(this._outJobs.delete(i),Dr(n.abortHandle),n.resolve(r))}_onResponseMessage(e){const{jobId:i,error:r,data:n}=e,s=this._outJobs.get(i);s&&(this._outJobs.delete(i),Dr(s.abortHandle),r?s.reject(ae.fromJSON(JSON.parse(r))):s.resolve(n))}_post(e,i,r){return mge(this.worker,e,i,r)}};const zre=ve("host-browser")?Math.min(navigator.hardwareConcurrency-1,ve("workers-pool-size")??8):0;let N0=ve("esri-mobile")?Math.min(zre,3):zre;N0||(N0=ve("safari")&&ve("mac")?7:2);let Nre=0;const rL=[];function WDe(){Lye()}async function WP(t,e){const i=new sze,{registryTarget:r,...n}=e;return await i.open(t,n),r&&JRe(r,i),i}async function ZDe(t,e={}){if(typeof t!="string")throw new ae("workers:undefined-module","modulePath is missing");let i=e.strategy||"distributed";if(ve("host-webworker")&&!ve("esri-workers")&&(i="local"),i==="local"){let r=await tT.loadWorker(t);r||(r=await import(t)),lr(e.signal);const n=e.client||r;return WP([tT.connect(r,e.schedule)],{...e,client:n})}if(await Lye(),lr(e.signal),i==="dedicated"){const r=Nre++%N0;return WP([await rL[r].open(t,e)],e)}if(e.maxNumWorkers&&e.maxNumWorkers>0){const r=Math.min(e.maxNumWorkers,N0);if(r<N0){const n=new Array(r);for(let s=0;s<r;++s){const a=Nre++%N0;n[s]=rL[a].open(t,e)}return WP(n,e)}}return WP(rL.map(r=>r.open(t,e)),e)}let ZP=null;async function Lye(){if(ZP)return ZP;new AbortController;const t=[];for(let e=0;e<N0;e++){const i=GDe.create(e).then(r=>(rL[e]=r,r));t.push(i)}return ZP=Promise.all(t),ZP}function Mp(t,e,i=Ue){return e||(e=new i),e===t||e.destroyed||(e.removeAll(),YDe(t)?e.addMany(t):t&&e.add(t)),e}function Fye(t){return t}function YDe(t){return t&&(Array.isArray(t)||"items"in t&&Array.isArray(t.items))}let d2=class extends Ue{constructor(e){super(e),this.addHandles([this.on("before-add",i=>{i.item==null&&i.preventDefault()}),this.on("after-add",i=>this._own(i.item)),this.on("after-remove",i=>this._release(i.item))])}get owner(){return this._get("owner")}set owner(e){this.destroyed||e!==this._get("owner")&&(this._releaseAll(),this._set("owner",e),this._ownAll())}_ownAll(){for(const e of this.items)this._own(e)}_releaseAll(){for(const e of this.items)this._release(e)}_createNewInstance(e){return this.itemType?new(Ue.ofType(this.itemType.Type))(e):new Ue(e)}};function W8(t,e){return{type:t,cast:Fye,set(i){const r=Mp(i,this._get(e),t);r&&!r.destroyed&&(r.owner=this),this._set(e,r)}}}d([f()],d2.prototype,"owner",null),d2=d([V("esri.core.support.OwningCollection")],d2);function Uv(){return[0,0,0]}function JDe(t){return[t[0],t[1],t[2]]}function GT(t,e,i){return[t,e,i]}function XDe(t,e,i){return[t,e,i]}function QDe(t,e=Uv()){const i=Math.min(3,t.length);for(let r=0;r<i;++r)e[r]=t[r];return e}function Rye(){return Uv()}function zye(){return GT(1,1,1)}function Nye(){return GT(1,0,0)}function Dye(){return GT(0,1,0)}function jye(){return GT(0,0,1)}const KDe=Rye(),Vye=zye(),e5e=Nye(),t5e=Dye(),i5e=jye();Object.freeze(Object.defineProperty({__proto__:null,ONES:Vye,UNIT_X:e5e,UNIT_Y:t5e,UNIT_Z:i5e,ZEROS:KDe,clone:JDe,create:Uv,freeze:XDe,fromArray:QDe,fromValues:GT,ones:zye,unitX:Nye,unitY:Dye,unitZ:jye,zeros:Rye},Symbol.toStringTag,{value:"Module"}));var Z8;let ux=Z8=class extends et{constructor(t){super(t),this.isInverse=!1,this.wkt=null,this.wkid=null}getInverse(){return new Z8({isInverse:!this.isInverse,wkid:this.wkid,wkt:this.wkt})}};d([f()],ux.prototype,"isInverse",void 0),d([f()],ux.prototype,"wkt",void 0),d([f()],ux.prototype,"wkid",void 0),ux=Z8=d([V("esri.geometry.operators.support.GeographicTransformationStep")],ux);var Y8;let h2=Y8=class extends et{constructor(t){super(t),this.steps=[]}getInverse(){const t=new Y8;for(let e=this.steps.length-1;e>=0;e--){const i=this.steps[e];t.steps.push(i.getInverse())}return t}};d([f({type:[ux],nonNullable:!0})],h2.prototype,"steps",void 0),h2=Y8=d([V("esri.geometry.operators.support.GeographicTransformation")],h2);const Dxt=Math.PI/180,jxt=/(?:SPHEROID|ELLIPSOID)\[([^\]]+)]/i,Kg=Mn.radius,Gu=Mn.eccentricitySquared,r5e={a1:Kg*Gu,a2:Kg*Gu*Kg*Gu,a3:Kg*Gu*Gu/2,a4:Kg*Gu*Kg*Gu*2.5,a5:Kg*Gu+Kg*Gu*Gu/2,a6:1-Gu},Vxt={4267:{a:63782064e-1,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:Mn.radius,f:Mn.flattening},4490:{a:6378137,f:1/298.257222101},104900:{a:2439700,f:0},104901:{a:6051e3,f:0},104902:{a:6051800,f:0},104903:{a:Cv.radius,f:Cv.flattening},104904:{a:3393400,f:1/192.0430107526882},104905:{a:Tp.radius,f:Tp.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492e3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1e4,f:0},104912:{a:2409300,f:0},104913:{a:15e3,f:0},104914:{a:4e4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85e3,f:0},104918:{a:1821460,f:0},104919:{a:5e3,f:0},104920:{a:12e3,f:0},104921:{a:3e4,f:3},104922:{a:18e3,f:0},104923:{a:14e3,f:0},104924:{a:49300,f:0},104925:{a:60268e3,f:1/10.2079945799458},104926:{a:16e3,f:0},104927:{a:9500,f:0},104928:{a:56e4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16e3,f:0},104932:{a:133e3,f:0},104933:{a:718e3,f:0},104934:{a:888e3,f:0},104935:{a:1986300,f:0},104936:{a:1e4,f:0},104937:{a:41900,f:0},104938:{a:11e4,f:0},104939:{a:50100,f:0},104940:{a:764e3,f:0},104941:{a:11e3,f:0},104942:{a:529800,f:0},104943:{a:2575e3,f:0},104944:{a:25559e3,f:1/43.61604095563141},104945:{a:578900,f:0},104946:{a:33e3,f:0},104947:{a:21e3,f:0},104948:{a:13e3,f:0},104949:{a:31e3,f:0},104950:{a:27e3,f:0},104951:{a:42e3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15e3,f:0},104955:{a:54e3,f:0},104956:{a:77e3,f:0},104957:{a:27e3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764e3,f:.01708124697141011},104961:{a:74e3,f:0},104962:{a:79e3,f:0},104963:{a:104e3,f:.14423076923076922},104964:{a:29e3,f:0},104965:{a:17e4,f:0},104966:{a:208e3,f:0},104967:{a:4e4,f:0},104968:{a:1352600,f:0},104969:{a:1195e3,f:0},104970:{a:593e3,f:0},104971:{a:Tp.radius,f:0},104972:{a:47e4,f:0},104973:{a:255e3,f:0},104974:{a:2439400,f:0}},n5e={2:{5:Xr,7:null,9:null,10:Xr,1:f2,6:null,8:null,0:null,3:V$,11:U$,2:Xr,4:H$},5:{5:Xr,7:null,9:null,10:Xr,1:f2,6:null,8:null,0:null,3:V$,11:U$,2:Xr,4:H$},7:{5:null,7:Xr,9:null,10:Xr,1:null,6:Vre,8:null,0:null,3:null,11:null,2:null,4:null},9:{5:null,7:null,9:Xr,10:Xr,1:null,6:null,8:jre,0:null,3:null,11:null,2:null,4:null},3:{5:p2,7:null,9:null,10:p2,1:a5e,6:null,8:null,0:null,3:Xr,11:c5e,2:p2,4:o5e},4:{5:G$,7:null,9:null,10:G$,1:v5e,6:null,8:null,0:null,3:b5e,11:u5e,2:G$,4:Xr},1:{5:q$,7:null,9:null,10:q$,1:Xr,6:null,8:null,0:null,3:m5e,11:d5e,2:q$,4:g5e},6:{5:null,7:Bre,9:null,10:Bre,1:null,6:Xr,8:null,0:null,3:null,11:null,2:null,4:null},8:{5:null,7:null,9:Ure,10:Ure,1:null,6:null,8:Xr,0:null,3:null,11:null,2:null,4:null},0:{5:null,7:null,9:null,10:null,1:null,6:null,8:null,0:Xr,3:null,11:null,2:null,4:null},10:{5:Xr,7:Xr,9:Xr,10:Xr,1:f2,6:Vre,8:jre,0:null,3:V$,11:U$,2:Xr,4:H$},11:{5:B$,7:null,9:null,10:B$,1:h5e,6:null,8:null,0:null,3:p5e,11:Xr,2:B$,4:f5e}};function Uye(t,e){var i;return(i=s5e(t,e))==null?void 0:i.projector}function s5e(t,e){if(t==null||e==null)return null;if(xf.source.spatialReference===t&&xf.dest.spatialReference===e)return xf;const i=Dre(t,xf.source),r=Dre(e,xf.dest);return i===0&&r===0?Cs(t,e)?xf.projector=Xr:xf.projector=null:xf.projector=n5e[i][r],xf}function Dre(t,e){return t?e.spatialReference===t?e.spatialReferenceId:(e.spatialReference=t,"metersPerUnit"in e&&(e.metersPerUnit=$u(t,1)),fR(t)?e.spatialReferenceId=1:t_(t)?e.spatialReferenceId=2:Dp(t)?e.spatialReferenceId=3:tLe(t)?e.spatialReferenceId=11:t.wkt===sLe.wkt?e.spatialReferenceId=4:t.wkid===4490?e.spatialReferenceId=5:t.wkt===cZ.wkt?e.spatialReferenceId=6:t.wkt===uZ.wkt?e.spatialReferenceId=8:eme(t)?e.spatialReferenceId=7:tme(t)?e.spatialReferenceId=9:e.spatialReferenceId=0):0}function Xr(t,e,i,r){t!==i&&(i[r++]=t[e++],i[r++]=t[e++],i[r]=t[e])}function p2(t,e,i,r){i[r]=nT*(t[e]/rw),i[r+1]=nT*(Bye-2*Math.atan(Math.exp(-t[e+1]/rw))),i[r+2]=t[e+2]}function a5e(t,e,i,r){const n=t[e]/rw,s=Bye-2*Math.atan(Math.exp(-t[e+1]/rw)),a=rw+t[e+2],o=Math.cos(s)*a;i[r]=Math.cos(n)*o,i[r+1]=Math.sin(n)*o,i[r+2]=Math.sin(s)*a}function o5e(t,e,i,r){p2(t,e,i,r),H$(i,r,i,r)}function l5e(t,e,i,r,n){const s=.4999999*Math.PI,a=ua(rT*t[e+1],-s,s),o=Math.sin(a);i[r++]=rT*t[e]*n.radius,i[r++]=n.halfSemiMajorAxis*Math.log((1+o)/(1-o)),i[r]=t[e+2]}function V$(t,e,i,r){l5e(t,e,i,r,Mn)}function U$(t,e,i,r){i[r]=t[e]*qre,i[r+1]=t[e+1]*qre,i[r+2]=t[e+2]}function B$(t,e,i,r){i[r]=t[e]*Hre,i[r+1]=t[e+1]*Hre,i[r+2]=t[e+2]}function c5e(t,e,i,r){p2(t,e,i,r),U$(i,r,i,r)}function u5e(t,e,i,r){G$(t,e,i,r),U$(i,r,i,r)}function d5e(t,e,i,r){q$(t,e,i,r),U$(i,r,i,r)}function h5e(t,e,i,r){B$(t,e,i,r),f2(i,r,i,r)}function p5e(t,e,i,r){B$(t,e,i,r),V$(i,r,i,r)}function f5e(t,e,i,r){B$(t,e,i,r),H$(i,r,i,r)}function UZ(t,e,i,r,n){const s=n+t[e+2],a=rT*t[e+1],o=rT*t[e],l=Math.cos(a)*s;i[r]=Math.cos(o)*l,i[r+1]=Math.sin(o)*l,i[r+2]=Math.sin(a)*s}function jre(t,e,i,r){UZ(t,e,i,r,Cv.radius)}function Vre(t,e,i,r){UZ(t,e,i,r,Tp.radius)}function f2(t,e,i,r){UZ(t,e,i,r,Mn.radius)}function BZ(t,e,i,r,n){const s=t[e],a=t[e+1],o=t[e+2],l=Math.sqrt(s*s+a*a+o*o),c=bOe(o/(l===0?1:l)),h=Math.atan2(a,s);i[r++]=nT*h,i[r++]=nT*c,i[r]=l-n}function Ure(t,e,i,r){BZ(t,e,i,r,Cv.radius)}function Bre(t,e,i,r){BZ(t,e,i,r,Tp.radius)}function q$(t,e,i,r){BZ(t,e,i,r,Mn.radius)}function m5e(t,e,i,r){q$(t,e,i,r),V$(i,r,i,r)}function g5e(t,e,i,r){q$(t,e,i,r),H$(i,r,i,r)}function y5e(t,e,i,r,n){const s=rT*t[e],a=rT*t[e+1],o=t[e+2],l=Math.sin(a),c=Math.cos(a),h=n.radius/Math.sqrt(1-n.eccentricitySquared*l*l);i[r++]=(h+o)*c*Math.cos(s),i[r++]=(h+o)*c*Math.sin(s),i[r++]=(h*(1-n.eccentricitySquared)+o)*l}function H$(t,e,i,r){y5e(t,e,i,r,Mn)}function G$(t,e,i,r){const n=r5e,s=t[e],a=t[e+1],o=t[e+2];let l,c,h,m,g,v,b,x,$,M,k,A,L,z,U,B,X,J,Q,le,ie;l=Math.abs(o),c=s*s+a*a,h=Math.sqrt(c),m=c+o*o,g=Math.sqrt(m),le=Math.atan2(a,s),v=o*o/m,b=c/m,z=n.a2/g,U=n.a3-n.a4/g,b>.3?(x=l/g*(1+b*(n.a1+z+v*U)/g),Q=Math.asin(x),M=x*x,$=Math.sqrt(1-M)):($=h/g*(1-v*(n.a5-z-b*U)/g),Q=Math.acos($),M=1-$*$,x=Math.sqrt(M)),k=1-Mn.eccentricitySquared*M,A=Mn.radius/Math.sqrt(k),L=n.a6*A,z=h-A*$,U=l-L*x,X=$*z+x*U,B=$*U-x*z,J=B/(L/k+X),Q+=J,ie=X+B*J/2,o<0&&(Q=-Q),i[r++]=nT*le,i[r++]=nT*Q,i[r]=ie}function v5e(t,e,i,r){G$(t,e,i,r),f2(i,r,i,r)}function b5e(t,e,i,r){G$(t,e,i,r),V$(i,r,i,r)}const xf={source:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},projector:Xr},rT=RT(1),nT=tfe(1),Bye=.5*Math.PI,rw=Mn.radius,qre=rw*Math.PI/180,Hre=180/(rw*Math.PI);function jk(t,e,i,r,n,s,a=Math.floor(t.length/3)){const o=Uye(e,n);if(o==null)return!1;if(o===Xr){if(t===r&&i===s)return!0;const c=i+3*a;for(let h=i,m=s;h<c;h++,m++)r[m]=t[h];return!0}const l=i+3*a;for(let c=i,h=s;c<l;c+=3,h+=3)o(t,c,r,h);return!0}const Uxt=Object.freeze(Object.defineProperty({__proto__:null,projectBuffer:jk},Symbol.toStringTag,{value:"Module"}));function Gre(t,e,i,r,n,s){return YP[0]=t,YP[1]=e,YP[2]=i,jk(YP,r,0,n,s,0)}const YP=Uv();function qye(t,e,i){if(e==null||i==null||i.vcsWkid||Cs(e,i)||Av(e)||Av(i))return null;const r=JS(e)/JS(i);if(r===1)return null;switch(t){case"point":case"esriGeometryPoint":return n=>w5e(n,r);case"polyline":case"esriGeometryPolyline":return n=>x5e(n,r);case"polygon":case"esriGeometryPolygon":return n=>_5e(n,r);case"multipoint":case"esriGeometryMultipoint":return n=>$5e(n,r);case"extent":case"esriGeometryEnvelope":return n=>S5e(n,r);default:return null}}function w5e(t,e){(t==null?void 0:t.z)!=null&&(t.z*=e)}function _5e(t,e){if(t)for(const i of t.rings)for(const r of i)r.length>2&&(r[2]*=e)}function x5e(t,e){if(t)for(const i of t.paths)for(const r of i)r.length>2&&(r[2]*=e)}function $5e(t,e){if(t)for(const i of t.points)i.length>2&&(i[2]*=e)}function S5e(t,e){t&&t.zmin!=null&&t.zmax!=null&&(t.zmin*=e,t.zmax*=e)}let m2=null,nw=null,sw=null,yv=null,J8={};const qZ=new p_;function ng(){return!!(nw!=null&&nw.isLoaded()&&(sw!=null&&sw.isLoaded())&&(yv!=null&&yv.isLoaded()))}function Hye(){return!!ng()||(xt(qZ),Ov(),!1)}function Gye(t,e){return!t||!e||jd(t,e)||Hye()}function T5e(t,e){return!jd(t,e)&&!ng()}async function Ov(t){m2==null&&(m2=Promise.all([de(()=>Promise.resolve().then(()=>rvt),[]).then(e=>(nw=e,nw.load())),de(()=>import("./projectOperator-bBxuUuK0.js"),[]).then(e=>(sw=e,sw.load())),de(()=>import("./geographicTransformationUtils-8ShpvGqr.js"),[]).then(e=>(yv=e,yv.load()))])),await m2,lr(t),qZ.notify()}function sg(t,e,i){return Array.isArray(t)?t.length===0?[]:(kLe(t),X8(t,t[0].spatialReference,e,i)):(XS(t),X8([t],t.spatialReference,e,i)[0])}function X8(t,e,i,r){if(e==null||i==null)return t;if(jd(e,i,r))return t.map(n=>nL(n,e,i));if((r==null?void 0:r.geographicTransformation)==null&&fR(e))return t.map(n=>nL(n,e,tt.WGS84)).map(n=>SE(n,i));if((r==null?void 0:r.geographicTransformation)==null&&fR(i))return t.map(n=>SE(n,tt.WGS84)).map(n=>nL(n,tt.WGS84,i));if(!ng())throw new Yye;if(!(r!=null&&r.geographicTransformation)){if(r!=null&&r.extendedParams)r={...r,geographicTransformation:yv.getTransformation(e,i,r.areaOfInterestExtent)||new h2};else if(!(r!=null&&r.areaOfInterestExtent)){const n=I5e(e,i);let s=J8[n];s||(s=yv.getTransformation(e,i)||new h2,J8[n]=s),r={geographicTransformation:s}}}return t[0].spatialReference||(t[0].spatialReference=e),t[0]instanceof Rs?nw.executeMany(t,i,r):sw.executeMany(t,i,r)}function I5e(t,e){var i,r,n,s,a,o;return[((i=t.wkid)==null?void 0:i.toString())??"-1",((r=t.wkt)==null?void 0:r.toString())??"",((n=t.wkt2)==null?void 0:n.toString())??"",((s=e.wkid)==null?void 0:s.toString())??"-1",((a=e.wkt)==null?void 0:a.toString())??"",((o=e.wkt2)==null?void 0:o.toString())??""].join()}function Wye(t,e){const i=Zye([t],e);return i.pending!=null?{pending:i.pending,geometry:null}:i.geometries!=null?{pending:null,geometry:i.geometries[0]}:{pending:null,geometry:null}}function Zye(t,e){if(!ng()){for(const i of t)if(i!=null&&!Cs(i.spatialReference,e)&&bc(i.spatialReference)&&bc(e)&&!jd(i.spatialReference,e))return xt(qZ),{pending:Ov(),geometries:null}}return{pending:null,geometries:t.map(i=>i==null?null:Cs(i.spatialReference,e)?i:bc(i.spatialReference)&&bc(e)?SE(i,e):null)}}let Yye=class extends ae{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}};function M5e(){m2=null,nw=null,sw=null,yv=null,J8={}}const C5e={get loadPromise(){return m2}};function SE(t,e){try{const i=sg(t,e);if(i==null)return null;"xmin"in t&&"xmin"in i&&(i.zmin=t.zmin,i.zmax=t.zmax);const r=qye(i.type,t.spatialReference,e);return r!=null&&r(i),i}catch(i){if(!(i instanceof Yye))throw i;return null}}async function Jye(t,e,i){const r=t.spatialReference;return r!=null&&e!=null&&await DD(r,e,null,i),SE(t,e)}function jd(t,e,i){return!(i!=null&&i.areaOfInterestExtent||i!=null&&i.extendedParams||i!=null&&i.geographicTransformation)&&(!!Cs(t,e)||bc(t)&&bc(e)&&!!Uye(t,e))}function E5e(t,e){if(Cs(t,e))return!0;if(!bc(t)||!bc(e))return!1;const i=t_(t)||Dp(t)||Cie(t),r=t_(e)||Dp(e)||Cie(e);return i&&r}async function DD(t,e,i,r){if(ng())return qte(r);if(Array.isArray(t)){for(const{source:n,dest:s,options:a}of t)if(n&&s&&!jd(n,s,a))return Ov(r)}else if(t&&e&&!jd(t,e,i))return Ov(r);return qte(r)}function nL(t,e,i){return t?"x"in t?Xye(t,e,new St,i,0):"xmin"in t?ive(t,e,new Yt,i,0):"rings"in t?tve(t,e,new Nr,i,0):"paths"in t?Kye(t,e,new _n,i,0):"points"in t?Qye(t,e,new lu,i,0):null:null}function k5e(t,e,i=e.spatialReference,r=0){return i!=null&&t.spatialReference!=null&&Xye(t,t.spatialReference,e,i,r)!=null}function Xye(t,e,i,r,n){to[0]=t.x,to[1]=t.y;const s=t.z;return to[2]=s!==void 0?s:n,jk(to,e,0,to,r,0)?(i.x=to[0],i.y=to[1],i.spatialReference=r,s!==void 0||Av(r)?(i.z=to[2],i.hasZ=!0):(i.z=void 0,i.hasZ=!1),t.m===void 0?(i.m=void 0,i.hasM=!1):(i.m=t.m,i.hasM=!0),i):null}function A5e(t,e,i=e.spatialReference,r=0){return t.spatialReference!=null&&i!=null&&Qye(t,t.spatialReference,e,i,r)!=null}function Qye(t,e,i,r,n){const{points:s,hasZ:a,hasM:o}=t,l=[],c=s.length,h=[];for(const g of s)h.push(g[0],g[1],a?g[2]:n);if(!jk(h,e,0,h,r,0,c))return null;const m=a||Av(r);for(let g=0;g<c;++g){const v=3*g,b=h[v],x=h[v+1];m&&o?l.push([b,x,h[v+2],s[g][3]]):m?l.push([b,x,h[v+2]]):o?l.push([b,x,s[g][2]]):l.push([b,x])}return i.points=l,i.spatialReference=r,i.hasZ=a,i.hasM=o,i}function P5e(t,e,i=e.spatialReference,r=0){return t.spatialReference!=null&&i!=null&&Kye(t,t.spatialReference,e,i,r)!=null}function Kye(t,e,i,r,n){const{paths:s,hasZ:a,hasM:o}=t,l=[];if(!rve(s,a??!1,o??!1,e,l,r,n))return null;const c=a||Av(r);return i.paths=l,i.spatialReference=r,i.hasZ=c,i.hasM=o,i}function eve(t,e,i=e.spatialReference,r=0){return t.spatialReference!=null&&i!=null&&tve(t,t.spatialReference,e,i,r)!=null}function tve(t,e,i,r,n){const{rings:s,hasZ:a,hasM:o}=t,l=[];if(!rve(s,a??!1,o??!1,e,l,r,n))return null;const c=a||Av(r);return i.rings=l,i.spatialReference=r,i.hasZ=c,i.hasM=o,i}function O5e(t,e,i=e.spatialReference,r=0){return t.spatialReference!=null&&i!=null&&ive(t,t.spatialReference,e,i,r)!=null}function ive(t,e,i,r,n){const{xmin:s,ymin:a,xmax:o,ymax:l,hasZ:c,hasM:h}=t,m=c?t.zmin:n;if(!Gre(s,a,m,e,to,r))return null;const g=c||Av(r);i.xmin=to[0],i.ymin=to[1],g&&(i.zmin=to[2]);const v=c?t.zmax:n;return Gre(o,l,v,e,to,r)?(i.xmax=to[0],i.ymax=to[1],g&&(i.zmax=to[2]),h&&(i.mmin=t.mmin,i.mmax=t.mmax),i.spatialReference=r,i):null}function rve(t,e,i,r,n,s,a=0){const o=new Array;for(const h of t)for(const m of h)o.push(m[0],m[1],e?m[2]:a);if(!jk(o,r,0,o,s,0))return!1;let l=0;n.length=0;const c=e||Av(s);for(const h of t){const m=new Array;for(const g of h)c&&i?m.push([o[l++],o[l++],o[l++],g[3]]):c?m.push([o[l++],o[l++],o[l++]]):i?(m.push([o[l++],o[l++],g[2]]),l++):(m.push([o[l++],o[l++]]),l++);n.push(m)}return!0}const to=Uv(),qxt=Object.freeze(Object.defineProperty({__proto__:null,canProjectWithoutEngine:jd,initializeProjection:DD,isEqualBaseGCS:E5e,isLoaded:ng,isLoadedOrLoad:Hye,isLoadedOrLoadFor:Gye,load:Ov,project:sg,projectExtent:O5e,projectMany:X8,projectMultipoint:A5e,projectOrLoad:Wye,projectOrLoadMany:Zye,projectPoint:k5e,projectPolygon:eve,projectPolyline:P5e,projectWithZConversion:Jye,projectWithoutEngine:nL,requiresLoad:T5e,test:C5e,tryProjectWithZConversion:SE,unload:M5e},Symbol.toStringTag,{value:"Module"}));var Q8,mS;let Oa=(mS=class extends $e{constructor(e){super(e),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new Q8({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}},Q8=mS,mS);d([f({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Oa.prototype,"cols",void 0),d([f({type:ei,json:{write:!0}})],Oa.prototype,"level",void 0),d([f({type:String,json:{write:!0}})],Oa.prototype,"levelValue",void 0),d([f({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Oa.prototype,"origin",void 0),d([f({type:Number,json:{write:!0}})],Oa.prototype,"resolution",void 0),d([f({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Oa.prototype,"rows",void 0),d([f({type:Number,json:{write:!0}})],Oa.prototype,"scale",void 0),Oa=Q8=d([V("esri.layers.support.LOD")],Oa);let L5e=class nve{constructor(e,i,r,n=ls()){this._level=e,this._row=i,this._col=r,this.extent=n}get id(){return this._id??(this._id=`${this.level}/${this.row}/${this.col}`),this._id}get level(){return this._level}set level(e){this._level=e,this._id=null}get row(){return this._row}set row(e){this._row=e,this._id=null}get col(){return this._col}set col(e){this._col=e,this._id=null}toJSON(){return{level:this._level,row:this._row,col:this._col,extent:this.extent}}static fromJSON(e){return new nve(e.level,e.row,e.col,e.extent)}};var dx;const Wre=new jt({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});var gS;let So=(gS=class extends $e{static create(e={}){const{resolutionFactor:i=1,scales:r,size:n=256,spatialReference:s=tt.WebMercator,numLODs:a=24}=e;if(!bc(s)){const g=[];if(r)for(let v=0;v<r.length;v++){const b=r[v];g.push(new Oa({level:v,scale:b,resolution:b}))}else{let v=5e-4;for(let b=a-1;b>=0;b--)g.unshift(new Oa({level:b,scale:v,resolution:v})),v*=2}return new dx({dpi:96,lods:g,origin:new St(0,0,s),size:[n,n],spatialReference:s})}const o=Bo(s),l=e.origin?new St({x:e.origin.x,y:e.origin.y,spatialReference:s}):new St(o?{x:o.origin[0],y:o.origin[1],spatialReference:s}:{x:0,y:0,spatialReference:s}),c=96,h=1/($u(s)*39.37*c),m=[];if(r)for(let g=0;g<r.length;g++){const v=r[g],b=v*h;m.push(new Oa({level:g,scale:v,resolution:b}))}else{let g=DT(s)?512/n*5916575275917094e-7:256/n*591657527591555e-6;const v=Math.ceil(a/i);m.push(new Oa({level:0,scale:g,resolution:g*h}));for(let b=1;b<v;b++){const x=g/2**i,$=x*h;m.push(new Oa({level:b,scale:x,resolution:$})),g=x}}return new dx({dpi:c,lods:m,origin:l,size:[n,n],spatialReference:s})}constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.size=null,this.spatialReference=null}get isWrappable(){const{spatialReference:e,origin:i}=this;if(e&&i){const r=Bo(e);return e.isWrappable&&!!r&&Math.abs(r.origin[0]-i.x)<=r.dx}return!1}readOrigin(e,i){return St.fromJSON({spatialReference:i.spatialReference,...e})}set lods(e){let i=0,r=0;const n=[],s=this._levelToLOD={};e&&(i=-1/0,r=1/0,e.forEach(a=>{n.push(a.scale),i=a.scale>i?a.scale:i,r=a.scale<r?a.scale:r,s[a.level]=a})),this._set("scales",n),this._set("lods",e),this._initializeUpsampleLevels()}readSize(e,i){return[i.cols,i.rows]}writeSize(e,i){i.cols=e[0],i.rows=e[1]}zoomToScale(e){const i=this.scales;if(e<=0)return i[0];if(e>=i.length-1)return i[i.length-1];const r=Math.floor(e),n=r+1;return i[r]/(i[r]/i[n])**(e-r)}scaleToZoom(e){const i=this.scales,r=i.length-1;let n=0;for(;n<r;n++){const s=i[n],a=i[n+1];if(s<=e)return n;if(a===e)return n+1;if(s>e&&a<e)return n+Math.log(s/e)/Math.log(s/a)}return n}tileAt(e,i,r,n){const s=this.lodAt(e);if(!s)return null;let a,o;if(typeof i=="number")a=i,o=r;else if(Cs(i.spatialReference,this.spatialReference))a=i.x,o=i.y,n=r;else{const h=xD(i,this.spatialReference);if(h==null)return null;a=h.x,o=h.y,n=r}const l=s.resolution*this.size[0],c=s.resolution*this.size[1];return n??(n=new L5e(0,0,0)),n.level=e,n.row=Math.floor((this.origin.y-o)/c+.001),n.col=Math.floor((a-this.origin.x)/l+.001),this.updateTileInfo(n),n}updateTileInfo(e,i=0){if(!("extent"in e))return!1;let r=this.lodAt(e.level);if(!r&&i===1){const o=this.lods[this.lods.length-1];o.level<e.level&&(r=o)}if(!r)return!1;const n=e.level-r.level,s=r.resolution*this.size[0]/2**n,a=r.resolution*this.size[1]/2**n;return e.extent[0]=this.origin.x+e.col*s,e.extent[1]=this.origin.y-(e.row+1)*a,e.extent[2]=e.extent[0]+s,e.extent[3]=e.extent[1]+a,!0}upsampleTile(e){const i=this._upsampleLevels[e.level];return!(!i||i.parentLevel===-1)&&(e.level=i.parentLevel,e.row=Math.floor(e.row/i.factor+.001),e.col=Math.floor(e.col/i.factor+.001),this.updateTileInfo(e),!0)}getTileBounds(e,i){const r=this.lodAt(i.level);if(r==null)return null;const{resolution:n}=r,s=n*this.size[0],a=n*this.size[1];return e[0]=this.origin.x+i.col*s,e[1]=this.origin.y-(i.row+1)*a,e[2]=e[0]+s,e[3]=e[1]+a,e}lodAt(e){var i;return((i=this._levelToLOD)==null?void 0:i[e])??null}clone(){return dx.fromJSON(this.write({}))}getCompatibleForVTL(e){if(this.size[0]!==this.size[1]||this.size[0]===256&&e===512)return null;const i=(this.size[0]===512&&e===256?-1:0)+(this.spatialReference.isGeographic?1:0);if(this.size[0]===e&&i===0)return this;const r=[],n=this.lods.length-i;for(let s=0;s<n;s++){const a=s+i,{scale:o,resolution:l}=a>=0?this.lods[a]:{scale:2*this.lods[0].scale,resolution:2*this.lods[0].resolution};r.push(new Oa({level:s,scale:o,resolution:l}))}return new dx({size:[e,e],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:r})}_initializeUpsampleLevels(){const e=this.lods;this._upsampleLevels=[];let i=null;for(let r=0;r<e.length;r++){const n=e[r];this._upsampleLevels[n.level]={parentLevel:i?i.level:-1,factor:i?i.resolution/n.resolution:0},i=n}}},dx=gS,gS);d([f({type:Number,json:{write:!0}})],So.prototype,"compressionQuality",void 0),d([f({type:Number,json:{write:!0}})],So.prototype,"dpi",void 0),d([f({type:String,json:{read:Wre.read,write:Wre.write,origins:{"web-scene":{read:!1,write:!1}}}})],So.prototype,"format",void 0),d([f({readOnly:!0})],So.prototype,"isWrappable",null),d([f({type:St,json:{write:!0}})],So.prototype,"origin",void 0),d([je("origin")],So.prototype,"readOrigin",null),d([f({type:[Oa],value:null,json:{write:!0}})],So.prototype,"lods",null),d([f({readOnly:!0})],So.prototype,"scales",void 0),d([f({cast:t=>Array.isArray(t)?t:typeof t=="number"?[t,t]:[256,256]})],So.prototype,"size",void 0),d([je("size",["rows","cols"])],So.prototype,"readSize",null),d([Ge("size",{cols:{type:ei},rows:{type:ei}})],So.prototype,"writeSize",null),d([f({type:tt,json:{write:!0}})],So.prototype,"spatialReference",void 0),So=dx=d([V("esri.layers.support.TileInfo")],So);let sT=class extends d2{constructor(e){super(e),this.addHandles(this.on("before-add",i=>{i.item!=null&&i.item.parent===this.owner&&(Ie.getLogger(this).warn("Analysis inside the collection must be unique. Not adding this element again."),i.preventDefault())}))}_own(e){e.parent=this.owner}_release(e){e.parent=null}};sT=d([V("esri.support.AnalysesCollection")],sT);const sL={widthBreakpoint:{getValue(t){const e=t.viewSize[0],i=t.breakpoints,r=this.values;return e<=i.xsmall?r.xsmall:e<=i.small?r.small:e<=i.medium?r.medium:e<=i.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(t){const e=t.viewSize[1],i=t.breakpoints,r=this.values;return e<=i.xsmall?r.xsmall:e<=i.small?r.small:e<=i.medium?r.medium:e<=i.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(t){const e=t.viewSize,i=e[0],r=e[1],n=this.values;return r>=i?n.portrait:n.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},n6={xsmall:544,small:768,medium:992,large:1200};function F5e(t){const e=t;return e&&e.xsmall<e.small&&e.small<e.medium&&e.medium<e.large}function s6(t,e){return e?sL[t].valueToClassName[e].split(" "):[]}const R5e=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=n6}initialize(){this.addHandles(be(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),Ft))}destroy(){this.destroyed||this._removeActiveClassNames()}set breakpoints(r){if(r!==this._get("breakpoints")){if(!F5e(r)){const n=JSON.stringify(n6,null,2);console.warn("provided breakpoints are not valid, using defaults:"+n),r=n6}this._set("breakpoints",{...r})}}_updateClassNames(){if(!this.container)return;const r=zo.acquire(),n=zo.acquire();let s,a=!1;for(s in sL){const o=this[s],l=sL[s].getValue({viewSize:this.size,breakpoints:this.breakpoints});o!==l&&(a=!0,this[s]=l,s6(s,o).forEach(c=>n.push(c)),s6(s,l).forEach(c=>r.push(c)))}a&&(this._applyClassNameChanges(r,n),zo.release(r),zo.release(n))}_applyClassNameChanges(r,n){const s=this.container;s&&(n.forEach(a=>s.classList.remove(a)),r.forEach(a=>s.classList.add(a)))}_removeActiveClassNames(){const r=this.container;if(!r)return;let n;for(n in sL)s6(n,this[n]).forEach(s=>r.classList.remove(s))}};return d([f()],i.prototype,"breakpoints",null),d([f()],i.prototype,"orientation",void 0),d([f()],i.prototype,"widthBreakpoint",void 0),d([f()],i.prototype,"heightBreakpoint",void 0),i=d([V("esri.views.BreakpointsOwner")],i),i};function HZ(t){return typeof t=="string"?document.getElementById(t):t??null}function Zre(t,e){for(;;){const i=t.firstChild;if(!i)break;e.appendChild(i)}}let aw=class extends et{constructor(){super(...arguments),this.updating=!1,this._handleId=0,this._scheduleHandleId=0,this._pendingPromises=new Set}destroy(){this.removeAll()}add(e,i,r={}){return this._installWatch(e,i,r,be)}addWhen(e,i,r={}){return this._installWatch(e,i,r,cn)}addOnCollectionChange(e,i,{initial:r=!1,final:n=!1}={}){const s=++this._handleId;return this.addHandles([ca(e,"after-changes",this._createSyncUpdatingCallback(),Nd),ca(e,"change",i,{onListenerAdd:r?a=>i({added:a.toArray(),removed:[]}):void 0,onListenerRemove:n?a=>i({added:[],removed:a.toArray()}):void 0})],s),Ii(()=>this.removeHandles(s))}addPromise(e){if(e==null)return e;const i=++this._handleId;this.addHandles(Ii(()=>{this._pendingPromises.delete(e)&&(this._pendingPromises.size!==0||this.hasHandles(JP)||this._set("updating",!1))}),i),this._pendingPromises.add(e),this._set("updating",!0);const r=()=>this.removeHandles(i);return e.then(r,r),e}removeAll(){this._pendingPromises.clear(),this.removeAllHandles(),this._set("updating",!1)}_installWatch(e,i,r={},n){const s=++this._handleId;r.sync||this._installSyncUpdatingWatch(e,s);const a=n(e,i,r);return this.addHandles(a,s),Ii(()=>this.removeHandles(s))}_installSyncUpdatingWatch(e,i){const r=this._createSyncUpdatingCallback(),n=be(e,r,{sync:!0,equals:()=>!1});return this.addHandles(n,i),n}_createSyncUpdatingCallback(){return()=>{this.removeHandles(JP),++this._scheduleHandleId;const e=this._scheduleHandleId;this._get("updating")||this._set("updating",!0),this.addHandles(ET(()=>{e===this._scheduleHandleId&&(this._set("updating",this._pendingPromises.size>0),this.removeHandles(JP))}),JP)}}};d([f({readOnly:!0})],aw.prototype,"updating",void 0),aw=d([V("esri.core.support.UpdatingHandles")],aw);const JP=-42;/*!
 * @esri/arcgis-html-sanitizer - v4.1.0 - Tue Dec 03 2024 09:13:28 GMT-0500 (Eastern Standard Time)
 * Copyright (c) 2024 - Environmental Systems Research Institute, Inc.
 * Apache-2.0
 * 
 * js-xss
 * Copyright (c) 2012-2018 Zongmin Lei() <leizongmin@gmail.com>
 * http://ucdok.com
 * MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var TR=function(){return TR=Object.assign||function(e){for(var i,r=1,n=arguments.length;r<n;r++){i=arguments[r];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},TR.apply(this,arguments)},K8={exports:{}},En={},e9={exports:{}},b_={};function sve(){var t={};return t["align-content"]=!1,t["align-items"]=!1,t["align-self"]=!1,t["alignment-adjust"]=!1,t["alignment-baseline"]=!1,t.all=!1,t["anchor-point"]=!1,t.animation=!1,t["animation-delay"]=!1,t["animation-direction"]=!1,t["animation-duration"]=!1,t["animation-fill-mode"]=!1,t["animation-iteration-count"]=!1,t["animation-name"]=!1,t["animation-play-state"]=!1,t["animation-timing-function"]=!1,t.azimuth=!1,t["backface-visibility"]=!1,t.background=!0,t["background-attachment"]=!0,t["background-clip"]=!0,t["background-color"]=!0,t["background-image"]=!0,t["background-origin"]=!0,t["background-position"]=!0,t["background-repeat"]=!0,t["background-size"]=!0,t["baseline-shift"]=!1,t.binding=!1,t.bleed=!1,t["bookmark-label"]=!1,t["bookmark-level"]=!1,t["bookmark-state"]=!1,t.border=!0,t["border-bottom"]=!0,t["border-bottom-color"]=!0,t["border-bottom-left-radius"]=!0,t["border-bottom-right-radius"]=!0,t["border-bottom-style"]=!0,t["border-bottom-width"]=!0,t["border-collapse"]=!0,t["border-color"]=!0,t["border-image"]=!0,t["border-image-outset"]=!0,t["border-image-repeat"]=!0,t["border-image-slice"]=!0,t["border-image-source"]=!0,t["border-image-width"]=!0,t["border-left"]=!0,t["border-left-color"]=!0,t["border-left-style"]=!0,t["border-left-width"]=!0,t["border-radius"]=!0,t["border-right"]=!0,t["border-right-color"]=!0,t["border-right-style"]=!0,t["border-right-width"]=!0,t["border-spacing"]=!0,t["border-style"]=!0,t["border-top"]=!0,t["border-top-color"]=!0,t["border-top-left-radius"]=!0,t["border-top-right-radius"]=!0,t["border-top-style"]=!0,t["border-top-width"]=!0,t["border-width"]=!0,t.bottom=!1,t["box-decoration-break"]=!0,t["box-shadow"]=!0,t["box-sizing"]=!0,t["box-snap"]=!0,t["box-suppress"]=!0,t["break-after"]=!0,t["break-before"]=!0,t["break-inside"]=!0,t["caption-side"]=!1,t.chains=!1,t.clear=!0,t.clip=!1,t["clip-path"]=!1,t["clip-rule"]=!1,t.color=!0,t["color-interpolation-filters"]=!0,t["column-count"]=!1,t["column-fill"]=!1,t["column-gap"]=!1,t["column-rule"]=!1,t["column-rule-color"]=!1,t["column-rule-style"]=!1,t["column-rule-width"]=!1,t["column-span"]=!1,t["column-width"]=!1,t.columns=!1,t.contain=!1,t.content=!1,t["counter-increment"]=!1,t["counter-reset"]=!1,t["counter-set"]=!1,t.crop=!1,t.cue=!1,t["cue-after"]=!1,t["cue-before"]=!1,t.cursor=!1,t.direction=!1,t.display=!0,t["display-inside"]=!0,t["display-list"]=!0,t["display-outside"]=!0,t["dominant-baseline"]=!1,t.elevation=!1,t["empty-cells"]=!1,t.filter=!1,t.flex=!1,t["flex-basis"]=!1,t["flex-direction"]=!1,t["flex-flow"]=!1,t["flex-grow"]=!1,t["flex-shrink"]=!1,t["flex-wrap"]=!1,t.float=!1,t["float-offset"]=!1,t["flood-color"]=!1,t["flood-opacity"]=!1,t["flow-from"]=!1,t["flow-into"]=!1,t.font=!0,t["font-family"]=!0,t["font-feature-settings"]=!0,t["font-kerning"]=!0,t["font-language-override"]=!0,t["font-size"]=!0,t["font-size-adjust"]=!0,t["font-stretch"]=!0,t["font-style"]=!0,t["font-synthesis"]=!0,t["font-variant"]=!0,t["font-variant-alternates"]=!0,t["font-variant-caps"]=!0,t["font-variant-east-asian"]=!0,t["font-variant-ligatures"]=!0,t["font-variant-numeric"]=!0,t["font-variant-position"]=!0,t["font-weight"]=!0,t.grid=!1,t["grid-area"]=!1,t["grid-auto-columns"]=!1,t["grid-auto-flow"]=!1,t["grid-auto-rows"]=!1,t["grid-column"]=!1,t["grid-column-end"]=!1,t["grid-column-start"]=!1,t["grid-row"]=!1,t["grid-row-end"]=!1,t["grid-row-start"]=!1,t["grid-template"]=!1,t["grid-template-areas"]=!1,t["grid-template-columns"]=!1,t["grid-template-rows"]=!1,t["hanging-punctuation"]=!1,t.height=!0,t.hyphens=!1,t.icon=!1,t["image-orientation"]=!1,t["image-resolution"]=!1,t["ime-mode"]=!1,t["initial-letters"]=!1,t["inline-box-align"]=!1,t["justify-content"]=!1,t["justify-items"]=!1,t["justify-self"]=!1,t.left=!1,t["letter-spacing"]=!0,t["lighting-color"]=!0,t["line-box-contain"]=!1,t["line-break"]=!1,t["line-grid"]=!1,t["line-height"]=!1,t["line-snap"]=!1,t["line-stacking"]=!1,t["line-stacking-ruby"]=!1,t["line-stacking-shift"]=!1,t["line-stacking-strategy"]=!1,t["list-style"]=!0,t["list-style-image"]=!0,t["list-style-position"]=!0,t["list-style-type"]=!0,t.margin=!0,t["margin-bottom"]=!0,t["margin-left"]=!0,t["margin-right"]=!0,t["margin-top"]=!0,t["marker-offset"]=!1,t["marker-side"]=!1,t.marks=!1,t.mask=!1,t["mask-box"]=!1,t["mask-box-outset"]=!1,t["mask-box-repeat"]=!1,t["mask-box-slice"]=!1,t["mask-box-source"]=!1,t["mask-box-width"]=!1,t["mask-clip"]=!1,t["mask-image"]=!1,t["mask-origin"]=!1,t["mask-position"]=!1,t["mask-repeat"]=!1,t["mask-size"]=!1,t["mask-source-type"]=!1,t["mask-type"]=!1,t["max-height"]=!0,t["max-lines"]=!1,t["max-width"]=!0,t["min-height"]=!0,t["min-width"]=!0,t["move-to"]=!1,t["nav-down"]=!1,t["nav-index"]=!1,t["nav-left"]=!1,t["nav-right"]=!1,t["nav-up"]=!1,t["object-fit"]=!1,t["object-position"]=!1,t.opacity=!1,t.order=!1,t.orphans=!1,t.outline=!1,t["outline-color"]=!1,t["outline-offset"]=!1,t["outline-style"]=!1,t["outline-width"]=!1,t.overflow=!1,t["overflow-wrap"]=!1,t["overflow-x"]=!1,t["overflow-y"]=!1,t.padding=!0,t["padding-bottom"]=!0,t["padding-left"]=!0,t["padding-right"]=!0,t["padding-top"]=!0,t.page=!1,t["page-break-after"]=!1,t["page-break-before"]=!1,t["page-break-inside"]=!1,t["page-policy"]=!1,t.pause=!1,t["pause-after"]=!1,t["pause-before"]=!1,t.perspective=!1,t["perspective-origin"]=!1,t.pitch=!1,t["pitch-range"]=!1,t["play-during"]=!1,t.position=!1,t["presentation-level"]=!1,t.quotes=!1,t["region-fragment"]=!1,t.resize=!1,t.rest=!1,t["rest-after"]=!1,t["rest-before"]=!1,t.richness=!1,t.right=!1,t.rotation=!1,t["rotation-point"]=!1,t["ruby-align"]=!1,t["ruby-merge"]=!1,t["ruby-position"]=!1,t["shape-image-threshold"]=!1,t["shape-outside"]=!1,t["shape-margin"]=!1,t.size=!1,t.speak=!1,t["speak-as"]=!1,t["speak-header"]=!1,t["speak-numeral"]=!1,t["speak-punctuation"]=!1,t["speech-rate"]=!1,t.stress=!1,t["string-set"]=!1,t["tab-size"]=!1,t["table-layout"]=!1,t["text-align"]=!0,t["text-align-last"]=!0,t["text-combine-upright"]=!0,t["text-decoration"]=!0,t["text-decoration-color"]=!0,t["text-decoration-line"]=!0,t["text-decoration-skip"]=!0,t["text-decoration-style"]=!0,t["text-emphasis"]=!0,t["text-emphasis-color"]=!0,t["text-emphasis-position"]=!0,t["text-emphasis-style"]=!0,t["text-height"]=!0,t["text-indent"]=!0,t["text-justify"]=!0,t["text-orientation"]=!0,t["text-overflow"]=!0,t["text-shadow"]=!0,t["text-space-collapse"]=!0,t["text-transform"]=!0,t["text-underline-position"]=!0,t["text-wrap"]=!0,t.top=!1,t.transform=!1,t["transform-origin"]=!1,t["transform-style"]=!1,t.transition=!1,t["transition-delay"]=!1,t["transition-duration"]=!1,t["transition-property"]=!1,t["transition-timing-function"]=!1,t["unicode-bidi"]=!1,t["vertical-align"]=!1,t.visibility=!1,t["voice-balance"]=!1,t["voice-duration"]=!1,t["voice-family"]=!1,t["voice-pitch"]=!1,t["voice-range"]=!1,t["voice-rate"]=!1,t["voice-stress"]=!1,t["voice-volume"]=!1,t.volume=!1,t["white-space"]=!1,t.widows=!1,t.width=!0,t["will-change"]=!1,t["word-break"]=!0,t["word-spacing"]=!0,t["word-wrap"]=!0,t["wrap-flow"]=!1,t["wrap-through"]=!1,t["writing-mode"]=!1,t["z-index"]=!1,t}function z5e(t,e,i){}function N5e(t,e,i){}var D5e=/javascript\s*\:/img;function j5e(t,e){return D5e.test(e)?"":e}b_.whiteList=sve();b_.getDefaultWhiteList=sve;b_.onAttr=z5e;b_.onIgnoreAttr=N5e;b_.safeAttrValue=j5e;var V5e={indexOf:function(t,e){var i,r;if(Array.prototype.indexOf)return t.indexOf(e);for(i=0,r=t.length;i<r;i++)if(t[i]===e)return i;return-1},forEach:function(t,e,i){var r,n;if(Array.prototype.forEach)return t.forEach(e,i);for(r=0,n=t.length;r<n;r++)e.call(i,t[r],r,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(t){return String.prototype.trimRight?t.trimRight():t.replace(/(\s*$)/g,"")}},mM=V5e;function U5e(t,e){t=mM.trimRight(t),t[t.length-1]!==";"&&(t+=";");var i=t.length,r=!1,n=0,s=0,a="";function o(){if(!r){var h=mM.trim(t.slice(n,s)),m=h.indexOf(":");if(m!==-1){var g=mM.trim(h.slice(0,m)),v=mM.trim(h.slice(m+1));if(g){var b=e(n,a.length,g,v,h);b&&(a+=b+"; ")}}}n=s+1}for(;s<i;s++){var l=t[s];if(l==="/"&&t[s+1]==="*"){var c=t.indexOf("*/",s+2);if(c===-1)break;s=c+1,n=s+1,r=!1}else l==="("?r=!0:l===")"?r=!1:l===";"?r||o():l===`
`&&o()}return mM.trim(a)}var B5e=U5e,XP=b_,q5e=B5e;function Yre(t){return t==null}function H5e(t){var e={};for(var i in t)e[i]=t[i];return e}function ave(t){t=H5e(t||{}),t.whiteList=t.whiteList||XP.whiteList,t.onAttr=t.onAttr||XP.onAttr,t.onIgnoreAttr=t.onIgnoreAttr||XP.onIgnoreAttr,t.safeAttrValue=t.safeAttrValue||XP.safeAttrValue,this.options=t}ave.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,i=e.options,r=i.whiteList,n=i.onAttr,s=i.onIgnoreAttr,a=i.safeAttrValue,o=q5e(t,function(l,c,h,m,g){var v=r[h],b=!1;if(v===!0?b=v:typeof v=="function"?b=v(m):v instanceof RegExp&&(b=v.test(m)),b!==!0&&(b=!1),m=a(h,m),!!m){var x={position:c,sourcePosition:l,source:g,isWhite:b};if(b){var $=n(h,m,x);return Yre($)?h+":"+m:$}else{var $=s(h,m,x);if(!Yre($))return $}}});return o};var G5e=ave;(function(t,e){var i=b_,r=G5e;function n(a,o){var l=new r(o);return l.process(a)}e=t.exports=n,e.FilterCSS=r;for(var s in i)e[s]=i[s]})(e9,e9.exports);var GZ=e9.exports,WZ={indexOf:function(t,e){var i,r;if(Array.prototype.indexOf)return t.indexOf(e);for(i=0,r=t.length;i<r;i++)if(t[i]===e)return i;return-1},forEach:function(t,e,i){var r,n;if(Array.prototype.forEach)return t.forEach(e,i);for(r=0,n=t.length;r<n;r++)e.call(i,t[r],r,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(t){var e=/\s|\n|\t/,i=e.exec(t);return i?i.index:-1}},W5e=GZ.FilterCSS,Z5e=GZ.getDefaultWhiteList,IR=WZ;function ove(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var lve=new W5e;function Y5e(t,e,i){}function J5e(t,e,i){}function X5e(t,e,i){}function Q5e(t,e,i){}function cve(t){return t.replace(eje,"&lt;").replace(tje,"&gt;")}function K5e(t,e,i,r){if(i=mve(i),e==="href"||e==="src"){if(i=IR.trim(i),i==="#")return"#";if(!(i.substr(0,7)==="http://"||i.substr(0,8)==="https://"||i.substr(0,7)==="mailto:"||i.substr(0,4)==="tel:"||i.substr(0,11)==="data:image/"||i.substr(0,6)==="ftp://"||i.substr(0,2)==="./"||i.substr(0,3)==="../"||i[0]==="#"||i[0]==="/"))return""}else if(e==="background"){if(QP.lastIndex=0,QP.test(i))return""}else if(e==="style"){if(Jre.lastIndex=0,Jre.test(i)||(Xre.lastIndex=0,Xre.test(i)&&(QP.lastIndex=0,QP.test(i))))return"";r!==!1&&(r=r||lve,i=r.process(i))}return i=gve(i),i}var eje=/</g,tje=/>/g,ije=/"/g,rje=/&quot;/g,nje=/&#([a-zA-Z0-9]*);?/gim,sje=/&colon;?/gim,aje=/&newline;?/gim,QP=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,Jre=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,Xre=/u\s*r\s*l\s*\(.*/gi;function uve(t){return t.replace(ije,"&quot;")}function dve(t){return t.replace(rje,'"')}function hve(t){return t.replace(nje,function(i,r){return r[0]==="x"||r[0]==="X"?String.fromCharCode(parseInt(r.substr(1),16)):String.fromCharCode(parseInt(r,10))})}function pve(t){return t.replace(sje,":").replace(aje," ")}function fve(t){for(var e="",i=0,r=t.length;i<r;i++)e+=t.charCodeAt(i)<32?" ":t.charAt(i);return IR.trim(e)}function mve(t){return t=dve(t),t=hve(t),t=pve(t),t=fve(t),t}function gve(t){return t=uve(t),t=cve(t),t}function oje(){return""}function lje(t,e){typeof e!="function"&&(e=function(){});var i=!Array.isArray(t);function r(a){return i?!0:IR.indexOf(t,a)!==-1}var n=[],s=!1;return{onIgnoreTag:function(a,o,l){if(r(a))if(l.isClosing){var c="[/removed]",h=l.position+c.length;return n.push([s!==!1?s:l.position,h]),s=!1,c}else return s||(s=l.position),"[removed]";else return e(a,o,l)},remove:function(a){var o="",l=0;return IR.forEach(n,function(c){o+=a.slice(l,c[0]),l=c[1]}),o+=a.slice(l),o}}}function cje(t){for(var e="",i=0;i<t.length;){var r=t.indexOf("<!--",i);if(r===-1){e+=t.slice(i);break}e+=t.slice(i,r);var n=t.indexOf("-->",r);if(n===-1)break;i=n+3}return e}function uje(t){var e=t.split("");return e=e.filter(function(i){var r=i.charCodeAt(0);return r===127?!1:r<=31?r===10||r===13:!0}),e.join("")}En.whiteList=ove();En.getDefaultWhiteList=ove;En.onTag=Y5e;En.onIgnoreTag=J5e;En.onTagAttr=X5e;En.onIgnoreTagAttr=Q5e;En.safeAttrValue=K5e;En.escapeHtml=cve;En.escapeQuote=uve;En.unescapeQuote=dve;En.escapeHtmlEntities=hve;En.escapeDangerHtml5Entities=pve;En.clearNonPrintableCharacter=fve;En.friendlyAttrValue=mve;En.escapeAttrValue=gve;En.onIgnoreTagStripAll=oje;En.StripTagBody=lje;En.stripCommentTag=cje;En.stripBlankChar=uje;En.cssFilter=lve;En.getDefaultCSSWhiteList=Z5e;var jD={},Ly=WZ;function dje(t){var e=Ly.spaceIndex(t),i;return e===-1?i=t.slice(1,-1):i=t.slice(1,e+1),i=Ly.trim(i).toLowerCase(),i.slice(0,1)==="/"&&(i=i.slice(1)),i.slice(-1)==="/"&&(i=i.slice(0,-1)),i}function hje(t){return t.slice(0,2)==="</"}function pje(t,e,i){var r="",n=0,s=!1,a=!1,o=0,l=t.length,c="",h="";e:for(o=0;o<l;o++){var m=t.charAt(o);if(s===!1){if(m==="<"){s=o;continue}}else if(a===!1){if(m==="<"){r+=i(t.slice(n,o)),s=o,n=o;continue}if(m===">"){r+=i(t.slice(n,s)),h=t.slice(s,o+1),c=dje(h),r+=e(s,r.length,c,h,hje(h)),n=o+1,s=!1;continue}if(m==='"'||m==="'")for(var g=1,v=t.charAt(o-g);v.trim()===""||v==="=";){if(v==="="){a=m;continue e}v=t.charAt(o-++g)}}else if(m===a){a=!1;continue}}return n<t.length&&(r+=i(t.substr(n))),r}var fje=/[^a-zA-Z0-9\\_:.-]/gim;function mje(t,e){var i=0,r=0,n=[],s=!1,a=t.length;function o(g,v){if(g=Ly.trim(g),g=g.replace(fje,"").toLowerCase(),!(g.length<1)){var b=e(g,v||"");b&&n.push(b)}}for(var l=0;l<a;l++){var c=t.charAt(l),h,m;if(s===!1&&c==="="){s=t.slice(i,l),i=l+1,r=t.charAt(i)==='"'||t.charAt(i)==="'"?i:yje(t,l+1);continue}if(s!==!1&&l===r){if(m=t.indexOf(c,l+1),m===-1)break;h=Ly.trim(t.slice(r+1,m)),o(s,h),s=!1,l=m,i=l+1;continue}if(/\s|\n|\t/.test(c))if(t=t.replace(/\s|\n|\t/g," "),s===!1)if(m=gje(t,l),m===-1){h=Ly.trim(t.slice(i,l)),o(h),s=!1,i=l+1;continue}else{l=m-1;continue}else if(m=vje(t,l-1),m===-1){h=Ly.trim(t.slice(i,l)),h=Qre(h),o(s,h),s=!1,i=l+1;continue}else continue}return i<t.length&&(s===!1?o(t.slice(i)):o(s,Qre(Ly.trim(t.slice(i))))),Ly.trim(n.join(" "))}function gje(t,e){for(;e<t.length;e++){var i=t[e];if(i!==" ")return i==="="?e:-1}}function yje(t,e){for(;e<t.length;e++){var i=t[e];if(i!==" ")return i==="'"||i==='"'?e:-1}}function vje(t,e){for(;e>0;e--){var i=t[e];if(i!==" ")return i==="="?e:-1}}function bje(t){return t[0]==='"'&&t[t.length-1]==='"'||t[0]==="'"&&t[t.length-1]==="'"}function Qre(t){return bje(t)?t.substr(1,t.length-2):t}jD.parseTag=pje;jD.parseAttr=mje;var wje=GZ.FilterCSS,pd=En,yve=jD,_je=yve.parseTag,xje=yve.parseAttr,aL=WZ;function KP(t){return t==null}function $je(t){var e=aL.spaceIndex(t);if(e===-1)return{html:"",closing:t[t.length-2]==="/"};t=aL.trim(t.slice(e+1,-1));var i=t[t.length-1]==="/";return i&&(t=aL.trim(t.slice(0,-1))),{html:t,closing:i}}function Sje(t){var e={};for(var i in t)e[i]=t[i];return e}function Tje(t){var e={};for(var i in t)Array.isArray(t[i])?e[i.toLowerCase()]=t[i].map(function(r){return r.toLowerCase()}):e[i.toLowerCase()]=t[i];return e}function vve(t){t=Sje(t||{}),t.stripIgnoreTag&&(t.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),t.onIgnoreTag=pd.onIgnoreTagStripAll),t.whiteList||t.allowList?t.whiteList=Tje(t.whiteList||t.allowList):t.whiteList=pd.whiteList,t.onTag=t.onTag||pd.onTag,t.onTagAttr=t.onTagAttr||pd.onTagAttr,t.onIgnoreTag=t.onIgnoreTag||pd.onIgnoreTag,t.onIgnoreTagAttr=t.onIgnoreTagAttr||pd.onIgnoreTagAttr,t.safeAttrValue=t.safeAttrValue||pd.safeAttrValue,t.escapeHtml=t.escapeHtml||pd.escapeHtml,this.options=t,t.css===!1?this.cssFilter=!1:(t.css=t.css||{},this.cssFilter=new wje(t.css))}vve.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,i=e.options,r=i.whiteList,n=i.onTag,s=i.onIgnoreTag,a=i.onTagAttr,o=i.onIgnoreTagAttr,l=i.safeAttrValue,c=i.escapeHtml,h=e.cssFilter;i.stripBlankChar&&(t=pd.stripBlankChar(t)),i.allowCommentTag||(t=pd.stripCommentTag(t));var m=!1;i.stripIgnoreTagBody&&(m=pd.StripTagBody(i.stripIgnoreTagBody,s),s=m.onIgnoreTag);var g=_je(t,function(v,b,x,$,M){var k={sourcePosition:v,position:b,isClosing:M,isWhite:Object.prototype.hasOwnProperty.call(r,x)},A=n(x,$,k);if(!KP(A))return A;if(k.isWhite){if(k.isClosing)return"</"+x+">";var L=$je($),z=r[x],U=xje(L.html,function(B,X){var J=aL.indexOf(z,B)!==-1,Q=a(x,B,X,J);return KP(Q)?J?(X=l(x,B,X,h),X?B+'="'+X+'"':B):(Q=o(x,B,X,J),KP(Q)?void 0:Q):Q});return $="<"+x,U&&($+=" "+U),L.closing&&($+=" /"),$+=">",$}else return A=s(x,$,k),KP(A)?c($):A},c);return m&&(g=m.remove(g)),g};var Ije=vve;(function(t,e){var i=En,r=jD,n=Ije;function s(o,l){var c=new n(l);return c.process(o)}e=t.exports=s,e.filterXSS=s,e.FilterXSS=n,(function(){for(var o in i)e[o]=i[o];for(var l in r)e[l]=r[l]})();function a(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}a()&&(self.filterXSS=t.exports)})(K8,K8.exports);var $1=K8.exports,Mje=function(t){if(typeof t!="object"||t===null||Object.prototype.toString.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},bve=(function(){function t(e,i){var r=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],article:["style"],aside:["style"],audio:["autoplay","controls","loop","muted","preload"],b:[],blockquote:["style"],br:[],code:["style"],dd:["style"],del:["style"],details:["open","style"],div:["align","aria-hidden","aria-label","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],footer:["style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],header:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],main:["style"],mark:["style"],nav:["style"],ol:[],p:["style"],pre:["style"],section:["style"],source:["media","src","type"],span:["aria-hidden","aria-label","style"],strong:[],sub:["style"],summary:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],time:["style"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.arcgisCSSWhiteList=TR(TR({},$1.getDefaultCSSWhiteList()),{"align-items":!0,"align-self":!0,flex:!0,"flex-basis":!0,"flex-direction":!0,"flex-flow":!0,"flex-grow":!0,"flex-shrink":!0,"flex-wrap":!0,float:!0,gap:!0,grid:!0,"grid-area":!0,"grid-auto-columns":!0,"grid-auto-flow":!0,"grid-auto-rows":!0,"grid-column":!0,"grid-column-end":!0,"grid-column-start":!0,"grid-row":!0,"grid-row-end":!0,"grid-row-start":!0,"grid-template":!0,"grid-template-areas":!0,"grid-template-columns":!0,"grid-template-rows":!0,"justify-content":!0,"justify-items":!0,"justify-self":!0,"line-height":!0,overflow:!0}),this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(s,a,o,l){return s==="a"&&a==="href"||(s==="img"||s==="source")&&a==="src"?r.sanitizeUrl(o):$1.safeAttrValue(s,a,o,l)}},this._entityMap={"&":"&#x38;","<":"&#x3C;",">":"&#x3E;",'"':"&#x22;","'":"&#x27;","/":"&#x2F;"};var n;e&&!i?n=e:e&&i?(n=Object.create(this.arcgisFilterOptions),n.css={whiteList:this.arcgisCSSWhiteList},Object.keys(e).forEach(function(s){if(s==="whiteList")n.whiteList=r._extendObjectOfArrays([r.arcgisWhiteList,e.whiteList||{}]);else if(s==="css"){var a=e.css.whiteList;a!=null&&e.css instanceof Object&&Object.keys(a).forEach(function(o){return n.css.whiteList[o]=a[o]})}else n[s]=e[s]})):(n=Object.create(this.arcgisFilterOptions),n.whiteList=this.arcgisWhiteList,n.css={whiteList:this.arcgisCSSWhiteList}),this.xssFilterOptions=n,this._xssFilter=new $1.FilterXSS(n)}return t.prototype.sanitize=function(e,i){switch(i===void 0&&(i={}),typeof e){case"number":return isNaN(e)||!isFinite(e)?null:e;case"boolean":return e;case"string":return this._xssFilter.process(e);case"object":return this._iterateOverObject(e,i);default:return i.allowUndefined&&typeof e>"u"?void 0:null}},t.prototype.sanitizeUrl=function(e,i){var r=(i??{}).isProtocolRequired,n=r===void 0?!0:r,s=this._trim(e.substring(0,e.indexOf(":"))),a=e==="/",o=/^#/.test(e),l=s&&this.allowedProtocols.indexOf(s.toLowerCase())>-1;return a||o||l?$1.escapeAttrValue(e):!s&&!n?$1.escapeAttrValue("https://".concat(e)):""},t.prototype.sanitizeHTMLAttribute=function(e,i,r,n){return typeof this.xssFilterOptions.safeAttrValue=="function"?this.xssFilterOptions.safeAttrValue(e,i,r,n):$1.safeAttrValue(e,i,r,n)},t.prototype.validate=function(e,i){i===void 0&&(i={});var r=this.sanitize(e,i);return{isValid:e===r,sanitized:r}},t.prototype.encodeHTML=function(e){var i=this;return String(e).replace(/[&<>"'\/]/g,function(r){return i._entityMap[r]})},t.prototype.encodeAttrValue=function(e){var i=/^[a-zA-Z0-9]$/;return String(e).replace(/[\x00-\xFF]/g,function(r,n){return i.test(r)?r:"&#x".concat(Number(e.charCodeAt(n)).toString(16),";")})},t.prototype._extendObjectOfArrays=function(e){var i={};return e.forEach(function(r){Object.keys(r).forEach(function(n){Array.isArray(r[n])&&Array.isArray(i[n])?i[n]=i[n].concat(r[n]):i[n]=r[n]})}),i},t.prototype._iterateOverObject=function(e,i){var r=this;i===void 0&&(i={});try{var n=!1,s=void 0;if(Array.isArray(e))s=e.reduce(function(o,l){var c=r.validate(l,i);return c.isValid?o.concat([l]):(n=!0,o.concat([c.sanitized]))},[]);else if(Mje(e)){var a=Object.keys(e);s=a.reduce(function(o,l){var c=e[l],h=r.validate(c,i);return h.isValid?o[l]=c:(n=!0,o[l]=h.sanitized),o},{})}else return i.allowUndefined&&typeof e>"u"?void 0:null;return n?s:e}catch{return null}},t.prototype._trim=function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},t})();const Cje=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"],Eje=Cje.reduce((t,e)=>(t[e]=[],t),{}),kje=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],VD=new bve({whiteList:Eje,onTagAttr:(t,e,i)=>{const r=`${e}="${i}"`;if(kje.includes(e))return r},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0),Aje=new bve({whiteList:{br:[]},stripIgnoreTag:!0,escapeHtml:t=>t},!1),wve="http://www.w3.org/",UD=`${wve}2000/svg`,_ve=`${wve}1999/xlink`;let Kre=[],ZZ=(t,e)=>{let i={};return Object.keys(t).forEach(r=>{i[r]=t[r]}),e&&Object.keys(e).forEach(r=>{i[r]=e[r]}),i},YZ=(t,e)=>t.vnodeSelector===e.vnodeSelector&&(t.properties&&e.properties?t.properties.key===e.properties.key&&t.properties.bind===e.properties.bind:!t.properties&&!e.properties),xve=t=>{if(typeof t!="string")throw new Error("Style values must be strings")},Pje=(t,e,i)=>{if(e.vnodeSelector!==""){for(let r=i;r<t.length;r++)if(YZ(t[r],e))return r}return-1},a6=(t,e,i,r)=>{let n=t[e];if(n.vnodeSelector==="")return;let s=n.properties;if(!(s&&(s.key===void 0?s.bind:s.key))){for(let a=0;a<t.length;a++)if(a!==e){let o=t[a];if(YZ(o,n))throw new Error(`${i.vnodeSelector} had a ${n.vnodeSelector} child ${r==="added"?r:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},Oje=t=>{if(t.properties){let e=t.properties.enterAnimation;e&&e(t.domNode,t.properties)}},t9=[],i9=!1,$ve=t=>{(t.children||[]).forEach($ve),t.properties&&t.properties.afterRemoved&&t.properties.afterRemoved.apply(t.properties.bind||t.properties,[t.domNode])},ene=()=>{i9=!1,t9.forEach($ve),t9.length=0},tne=t=>{t9.push(t),i9||(i9=!0,typeof window<"u"&&"requestIdleCallback"in window?window.requestIdleCallback(ene,{timeout:16}):setTimeout(ene,16))},ine=t=>{let e=t.domNode;if(t.properties){let i=t.properties.exitAnimation;if(i)return e.style.pointerEvents="none",void i(e,()=>{e.parentNode&&(e.parentNode.removeChild(e),tne(t))},t.properties)}e.parentNode&&(e.parentNode.removeChild(e),tne(t))},Lje=(t,e,i)=>{if(!e)return;let r=i.eventHandlerInterceptor,n=Object.keys(e),s=n.length;for(let a=0;a<s;a++){let o=n[a],l=e[o];if(o==="className")throw new Error('Property "className" is not supported, use "class".');if(o==="class")n9(t,l,!0);else if(o==="classes"){let c=Object.keys(l),h=c.length;for(let m=0;m<h;m++){let g=c[m];l[g]&&t.classList.add(g)}}else if(o==="styles"){let c=Object.keys(l),h=c.length;for(let m=0;m<h;m++){let g=c[m],v=l[g];v&&(xve(v),i.styleApplyer(t,g,v))}}else if(o!=="key"&&l!=null){let c=typeof l;c==="function"?(o.lastIndexOf("on",0)===0&&(r&&(l=r(o,l,t,e)),o==="oninput"&&(function(){let h=l;l=function(m){h.apply(this,[m]),m.target["oninput-value"]=m.target.value}})()),t[o]=l):i.namespace===UD?o==="href"?t.setAttributeNS(_ve,o,l):t.setAttribute(o,l):c==="string"&&o!=="value"?o==="innerHTML"?t[o]=VD.sanitize(l):r9(t)&&o in t?t[o]=l:t.setAttribute(o,l):t[o]=l}}};function r9(t){if(!(t instanceof Element&&t.tagName.includes("-")))return!1;const e=window.customElements.get(t.tagName.toLowerCase());return!!e&&t instanceof e}let MR,Fje=(t,e,i)=>{if(e)for(let r of e)g2(r,t,void 0,i)},Sve=(t,e,i)=>{Fje(t,e.children,i),e.text&&(t.textContent=e.text),Lje(t,e.properties,i),e.properties&&e.properties.afterCreate&&e.properties.afterCreate.apply(e.properties.bind||e.properties,[t,i,e.vnodeSelector,e.properties,e.children])},g2=(t,e,i,r)=>{let n,s=0,a=t.vnodeSelector,o=e.ownerDocument;if(a==="")n=t.domNode=o.createTextNode(t.text),i!==void 0?e.insertBefore(n,i):e.appendChild(n);else{for(let l=0;l<=a.length;++l){let c=a.charAt(l);if(l===a.length||c==="."||c==="#"){let h=a.charAt(s-1),m=a.slice(s,l);h==="."?n.classList.add(m):h==="#"?n.id=m:(m==="svg"&&(r=ZZ(r,{namespace:UD})),r.namespace!==void 0?n=t.domNode=o.createElementNS(r.namespace,m):(n=t.domNode=t.domNode||o.createElement(m),m==="input"&&t.properties&&t.properties.type!==void 0&&n.setAttribute("type",t.properties.type)),i!==void 0?e.insertBefore(n,i):n.parentNode!==e&&e.appendChild(n)),s=l+1}}Sve(n,t,r)}},n9=(t,e,i)=>{e&&e.split(" ").forEach(r=>{r&&t.classList.toggle(r,i)})},Rje=(t,e,i,r)=>{if(!i)return;let n=!1,s=Object.keys(i),a=s.length;for(let o=0;o<a;o++){let l=s[o],c=i[l],h=e[l];if(l==="class")h!==c&&(n9(t,h,!1),n9(t,c,!0));else if(l==="classes"){let m=t.classList,g=Object.keys(c),v=g.length;for(let b=0;b<v;b++){let x=g[b],$=!!c[x];$!==!!h[x]&&(n=!0,$?m.add(x):m.remove(x))}}else if(l==="styles"){let m=Object.keys(c),g=m.length;for(let v=0;v<g;v++){let b=m[v],x=c[b];x!==h[b]&&(n=!0,x?(xve(x),r.styleApplyer(t,b,x)):r.styleApplyer(t,b,""))}}else if(c||typeof h!="string"||(c=""),l!=="value"||r9(t)){if(c!==h){let m=typeof c;m==="function"&&r.eventHandlerInterceptor||(r.namespace===UD?l==="href"?t.setAttributeNS(_ve,l,c):t.setAttribute(l,c):m==="string"?l==="innerHTML"?t[l]=VD.sanitize(c):l==="role"&&c===""?t.removeAttribute(l):r9(t)&&l in t?t[l]=c:t.setAttribute(l,c):t[l]!==c&&(t[l]=c),n=!0)}}else{let m=t[l];m!==c&&(t["oninput-value"]?m===t["oninput-value"]:c!==h)&&(t[l]=c,t["oninput-value"]=void 0),c!==h&&(n=!0)}}return n},zje=(t,e,i,r,n)=>{if(i===r)return!1;r=r||Kre;let s,a=(i=i||Kre).length,o=r.length,l=0,c=0,h=!1;for(;c<o;){let m=l<a?i[l]:void 0,g=r[c];if(m!==void 0&&YZ(m,g))h=MR(m,g,n)||h,l++;else{let v=Pje(i,g,l+1);if(v>=0){for(s=l;s<v;s++)ine(i[s]),a6(i,s,t,"removed");h=MR(i[v],g,n)||h,l=v+1}else g2(g,e,l<a?i[l].domNode:void 0,n),Oje(g),a6(r,c,t,"added")}c++}if(a>l)for(s=l;s<a;s++)ine(i[s]),a6(i,s,t,"removed");return h};MR=(t,e,i)=>{let r=t.domNode,n=!1;if(t===e)return!1;let s=!1;if(e.vnodeSelector===""){if(e.text!==t.text){let a=r.ownerDocument.createTextNode(e.text);return r.parentNode.replaceChild(a,r),e.domNode=a,n=!0,n}e.domNode=r}else e.vnodeSelector.lastIndexOf("svg",0)===0&&(i=ZZ(i,{namespace:UD})),t.text!==e.text&&(s=!0,e.text===void 0?r.removeChild(r.firstChild):r.textContent=e.text),e.domNode=r,s=zje(e,r,t.children,e.children,i)||s,s=Rje(r,t.properties,e.properties,i)||s,e.properties&&e.properties.afterUpdate&&e.properties.afterUpdate.apply(e.properties.bind||e.properties,[r,i,e.vnodeSelector,e.properties,e.children]);return s&&e.properties&&e.properties.updateAnimation&&e.properties.updateAnimation(r,e.properties,t.properties),n};let eO=(t,e)=>({getLastRender:()=>t,update:i=>{if(t.vnodeSelector!==i.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let r=t;t=i,MR(r,i,e)},domNode:t.domNode});const Nje={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(t,e,i)=>{e.charAt(0)==="-"?t.style.setProperty(e,i):t.style[e]=i}};let eC=t=>ZZ(Nje,t),tv={append:(t,e,i)=>(i=eC(i),g2(e,t,void 0,i),eO(e,i)),insertBefore:(t,e,i)=>(i=eC(i),g2(e,t.parentNode,t,i),eO(e,i)),merge:(t,e,i)=>(i=eC(i),e.domNode=t,Sve(t,e,i),eO(e,i)),replace:(t,e,i)=>(i=eC(i),g2(e,t.parentNode,t,i),t.parentNode.removeChild(t),eO(e,i))},Tve,Dje=(t,e)=>{let i=[];for(;t&&t!==e;)i.push(t),t=t.parentNode;return i};Tve=Array.prototype.find?(t,e)=>t.find(e):(t,e)=>t.filter(e)[0];let jje=(t,e)=>{let i=t;return e.forEach(r=>{i=i&&i.children?Tve(i.children,n=>n.domNode===r):void 0}),i},Vje=(t,e,i)=>{let r=function(n){i("domEvent",n);let s=e(),a=Dje(n.currentTarget,s.domNode);a.reverse();let o,l=jje(s.getLastRender(),a);return t.scheduleRender(),l&&(o=l.properties[`on${n.type}`].apply(l.properties.bind||this,arguments)),i("domEventProcessed",n),o};return(n,s,a,o)=>r},s9=t=>{let e,i,r=eC(t),n=r.performanceLogger,s=!0,a=!1,o=[],l=[],c=(m,g,v)=>{let b,x=()=>b;r.eventHandlerInterceptor=Vje(e,x,n),b=m(g,v(),r),o.push(b),l.push(v)},h=()=>{if(i=void 0,s){s=!1,n("renderStart",void 0);for(let m=0;m<o.length;m++){let g=l[m]();n("rendered",void 0),o[m].update(g),n("patched",void 0)}n("renderDone",void 0),s=!0}};return e={renderNow:h,scheduleRender:()=>{i||a||(i=requestAnimationFrame(h))},stop:()=>{i&&(cancelAnimationFrame(i),i=void 0),a=!0},resume:()=>{a=!1,s=!0,e.scheduleRender()},append:(m,g)=>{c(tv.append,m,g)},insertBefore:(m,g)=>{c(tv.insertBefore,m,g)},merge:(m,g)=>{c(tv.merge,m,g)},replace:(m,g)=>{c(tv.replace,m,g)},detach:m=>{for(let g=0;g<l.length;g++)if(l[g]===m)return l.splice(g,1),o.splice(g,1)[0];throw new Error("renderFunction was not found")}},e},py=class extends et{constructor(){super(...arguments),this.items=new Ue,this._watchUpdatingTracking=new aw,this._callbacks=new Map,this._projector=s9(),this._hiddenProjector=s9()}get needsRender(){return this.items.length>0}get updating(){var e;return((e=this._watchUpdatingTracking)==null?void 0:e.updating)??!1}initialize(){const e=document.createElement("div");e.className="esri-overlay-surface",this._set("surface",e),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),e.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,i=>{for(const r of i.added){const n=()=>r.render();this._callbacks.set(r,n),this._projector.append(this.surface,n)}for(const r of i.removed){const n=this._projector.detach(this._callbacks.get(r));this.surface.removeChild(n.domNode),this._callbacks.delete(r)}})}addItem(e){this.items.add(e)}removeItem(e){this.items.remove(e)}destroy(){this.items.removeAll(),this._callbacks.forEach(e=>this._projector.detach(e)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(e){const i=this._hiddenSurface,r=this._hiddenProjector;let n;const s=()=>(n=e.render(),n);r.append(i,s),r.renderNow();const a={left:0,top:0,right:0,bottom:0};if(n!=null&&n.domNode){const o=n.domNode.getBoundingClientRect();a.left=o.left,a.top=o.top,a.right=o.right,a.bottom=o.bottom}for(r.detach(s);i.firstChild;)i.removeChild(i.firstChild);return a}overlaps(e,i){const r=this.computeBoundingRect(e),n=this.computeBoundingRect(i);return Math.max(r.left,n.left)<=Math.min(r.right,n.right)&&Math.max(r.top,n.top)<=Math.min(r.bottom,n.bottom)}get hasVisibleItems(){return this.items.some(e=>e.visible)}async prepare(){await document.fonts.load(this._fontString()).catch(()=>{})}renderCanvas(e,i){const r=!!(i!=null&&i.disableDecorations);if(!this.items.some(s=>s.visible&&!(r&&s.isDecoration)))return;const n=e.getContext("2d");n.save(),n.font=this._fontString(),this.items.forEach(s=>{r&&s.isDecoration||(n.save(),s.renderCanvas(n),n.restore())}),n.restore()}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};d([f({readOnly:!0})],py.prototype,"surface",void 0),d([f({readOnly:!0})],py.prototype,"items",void 0),d([f({readOnly:!0})],py.prototype,"needsRender",null),d([f({readOnly:!0})],py.prototype,"_watchUpdatingTracking",void 0),d([f({readOnly:!0})],py.prototype,"updating",null),py=d([V("esri.views.overlay.ViewOverlay")],py);const rne=py,o6=[0,0];function Uje(t){const e=(t.ownerDocument||window.document).defaultView,i=t.getBoundingClientRect();return o6[0]=i.left+((e==null?void 0:e.pageXOffset)??0),o6[1]=i.top+((e==null?void 0:e.pageYOffset)??0),o6}function nne(t){t&&(t.textContent="",t.parentNode&&t.parentNode.removeChild(t))}function Bje(t){const e=document.createElement("div");return t.appendChild(e),e}const S1=16,gM=750,qje=512,Hje=2,Gje=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),this._freqInfo={freq:S1,time:gM},this._overlayRenderTaskHandle=null,this.aria={},this.height=0,this.messagesCommon=null,this.overlay=null,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.addHandles([be(()=>this.cursor,n=>{const{surface:s}=this;s&&s.setAttribute("data-cursor",n)}),be(()=>this.navigating,n=>{const{surface:s}=this;s&&s.setAttribute("data-navigating",n.toString())}),be(()=>[this.aria,this.surface],()=>this._updateAria(),{initial:!0})])}initialize(){const r=this;this.addHandles([be(()=>this.ui,(n,s)=>this._handleUIChange(n,s),Ft),r.on("focus",()=>this.notifyChange("focused")),r.on("blur",()=>this.notifyChange("focused"))])}destroy(){var r;this.destroyed||((r=this.ui)==null||r.destroy(),this.container=null)}get container(){return this._get("container")??null}set container(r){const n=this._get("container"),s=HZ(r);if(s||typeof r!="string"||Ie.getLogger(this).error("#container",`element with id '${r}' not found`),n===s)return;if(this._stopMeasuring(),n&&(n.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(nne(this.root),this._set("root",null)),this.userContent&&(Zre(this.userContent,n),nne(this.userContent),this._set("userContent",null))),!s)return this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),void this._set("container",null);s.classList.add("esri-view");const a=document.createElement("div");a.className="esri-view-user-storage",Zre(s,a),s.appendChild(a),this._set("userContent",a);const o=document.createElement("div");o.className="esri-view-root",s.insertBefore(o,s.firstChild),this._set("root",o);const l=document.createElement("div");l.className="esri-view-surface",l.setAttribute("role","application"),l.tabIndex=0,o.appendChild(l),this._set("surface",l);const c=new rne;o.appendChild(c.surface),this._set("overlay",c),this.addHandles(be(()=>c.needsRender,h=>{h&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=GS({render:()=>{var m;return(m=this.overlay)==null?void 0:m.render()}}):this._overlayRenderTaskHandle=Dr(this._overlayRenderTaskHandle)})),this.forceDOMReadyCycle(),this._set("container",s),this._startMeasuring()}get focused(){const r=document.activeElement===this.surface;return document.hasFocus()&&r}get size(){return[this.width,this.height]}set ui(r){const n=this._get("ui");n!==r&&(n==null||n.destroy()),this._set("ui",r)}blur(){var r;(r=this.surface)==null||r.blur()}focus(){var r;(r=this.surface)==null||r.focus()}pageToContainer(r,n,s){const a=this.position;return r-=a?a[0]:0,n-=a?a[1]:0,s?(s[0]=r,s[1]=n):s=[r,n],s}containerToPage(r,n,s){const a=this.position;return r+=a?a[0]:0,n+=a?a[1]:0,s?(s[0]=r,s[1]=n):s=[r,n],s}_updateAria(){const{surface:r,aria:n}=this;r&&(r.ariaLabelledByElements=(n==null?void 0:n.labelledByElements)??null,r.ariaDescribedByElements=(n==null?void 0:n.describedByElements)??null,r.ariaLabel=(n==null?void 0:n.label)??null,r.ariaDescription=(n==null?void 0:n.description)??null)}_handleUIChange(r,n){this.removeHandles("ui"),n&&n!==r&&n.destroy(),r&&(r.view=this,this.addHandles(be(()=>this.root,s=>{r.container=s?Bje(s):null},Ft),"ui")),this._set("ui",r)}_stopMeasuring(){this.removeHandles("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const r=this._freqInfo;r.freq=S1,r.time=gM;const n=GS({prepare:o=>{const l=this._measure(),c=this._freqInfo;if(c.time+=o.deltaTime,l&&(c.freq=S1,this._get("resizing")||this._set("resizing",!0)),c.time<c.freq)return;c.time=0;const h=this._position();c.freq=h||l?S1:Math.min(gM,c.freq*Hje),!l&&c.freq>=qje&&(n.pause(),this._get("resizing")&&this._set("resizing",!1))}}),s=new ResizeObserver(o=>{r.freq=S1,r.time=gM,n.resume()});this.container!=null&&s.observe(this.container);const a=Ii(()=>s.disconnect());this.addHandles([MT(window,"resize",()=>{r.freq=S1,r.time=gM,n.resume()}),a,n],"measuring"),this._measure(),this._position()}_measure(){const r=this.container,n=r?r.clientWidth:0,s=r?r.clientHeight:0;if(n===0||s===0)return this.suspended||this._set("suspended",!0),!1;const a=this.width,o=this.height;return n===a&&s===o?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",n),this._set("height",s),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:a,oldHeight:o,width:n,height:s}),!0)}_position(){const r=this.container,n=this.position,s=r&&Uje(r);return!!s&&(!n||s[0]!==n[0]||s[1]!==n[1])&&(this._set("position",[s[0],s[1]]),!0)}forceDOMReadyCycle(){}};return d([f()],i.prototype,"aria",void 0),d([f()],i.prototype,"container",null),d([f({readOnly:!0})],i.prototype,"focused",null),d([f({readOnly:!0})],i.prototype,"height",void 0),d([f()],i.prototype,"messagesCommon",void 0),d([f({type:rne})],i.prototype,"overlay",void 0),d([f({readOnly:!0})],i.prototype,"position",void 0),d([f({readOnly:!0})],i.prototype,"resizing",void 0),d([f({readOnly:!0})],i.prototype,"root",void 0),d([f({value:null,readOnly:!0})],i.prototype,"size",null),d([f({readOnly:!0})],i.prototype,"surface",void 0),d([f({readOnly:!0})],i.prototype,"suspended",void 0),d([f({nonNullable:!0})],i.prototype,"ui",null),d([f({readOnly:!0})],i.prototype,"userContent",void 0),d([f({readOnly:!0})],i.prototype,"width",void 0),d([f()],i.prototype,"widthBreakpoint",void 0),i=d([V("esri.views.DOMContainer")],i),i};function Wje(t,e,i){return Gm(t.map((r,n)=>e.apply(i,[r,n])))}async function Zje(t,e,i){return(await Gm(t.map((r,n)=>e.apply(i,[r,n])))).map(r=>r.value)}function JZ(t){return{ok:!0,value:t}}function XZ(t){return{ok:!1,error:t}}function Yje(t){return t!=null&&t.ok===!0?t.value:null}function Jje(t){return t!=null&&t.ok===!1?t.error:null}async function BD(t){if(t==null)return{ok:!1,error:new Error("no promise provided")};try{return JZ(await t)}catch(e){return XZ(e)}}async function Xje(t){try{return JZ(await t)}catch(e){return Bh(e),XZ(e)}}function Zm(t,e){return new fy(t,e)}let fy=class extends et{get value(){return Yje(this._result)}get error(){return Jje(this._result)}get finished(){return this._result!=null}constructor(e,i){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=Fa(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:r}=this._abortController;this.promise=e(r),this.promise.then(n=>{this._result=JZ(n),this._cleanup()},n=>{this._result=XZ(n),this._cleanup()}),this._abortHandle=_u(i,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=Dr(this._abortHandle),this._abortController=null}};d([f()],fy.prototype,"value",null),d([f()],fy.prototype,"error",null),d([f()],fy.prototype,"finished",null),d([f()],fy.prototype,"promise",void 0),d([f()],fy.prototype,"_result",void 0),fy=d([V("esri.core.asyncUtils.ReactiveTask")],fy);const tO="popup",sne="manual";function Cp(t){return t!=null&&"open"in t&&"declaredClass"in t}function Ym(t){return!!t&&t.tagName.toLowerCase()==="arcgis-popup"&&"open"in t}function Qje(t,e,i){const[r,n,s]=e;if(i){const[a,o,l]=i;a&&Cp(o)&&(o.view=null,a.remove(o,tO),o!==n&&n&&o.destroy()),a&&l&&Ym(l)&&(l.view=null,a.remove(l,tO),l!==s&&s&&l.remove())}r&&Cp(n)&&(n.view=t,r.add(n,{key:tO,position:sne,internal:!0})),r&&s&&Ym(s)&&(s.view=t,r.add(s,{key:tO,position:sne,internal:!0}))}async function Kje(t,e){const{popup:i,popupElement:r}=t;Cp(i)?await iO(i,null,e):r&&Ym(r)?await iO(null,r,e):e==null||e.defer(async()=>{await t.setupPopup();const{popup:n,popupElement:s}=t;Cp(n)&&!t.destroyed&&t.ready&&t.popupEnabled?await iO(n,null,e):s&&Ym(s)&&await iO(null,s,e)})}function e4e(t,e){const{popup:i,popupElement:r}=t;if(Cp(i))return i.open(e);r&&Ym(r)&&r.open(e)}function t4e(t,e){Cp(t)&&t.close(),e&&Ym(e)&&(e.visible=!1)}async function iO(t,e,i){var r,n;if(Cp(t)){const s=await t.viewModel.handleViewClick(i);return void((r=s==null?void 0:s.promises)!=null&&r.length?t.open(s):t.visible&&t.close())}if(e&&Ym(e)){const s=await e.handleViewClick(i);(n=s==null?void 0:s.promises)!=null&&n.length?e.open(s):e.visible&&(e.visible=!1)}}const i4e=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,r4e="screenUtils.toPt: input not recognized!",Ive=96;function Di(t){return t?t/72*Ive:0}function Qi(t){return t?72*t/Ive:0}function $i(t){if(typeof t=="string"){const e=t.match(i4e);if(e){const i=Number(e[1]),r=e[3]&&e[3].toLowerCase(),n=t.startsWith("-"),s=r==="px"?Qi(i):i;return n?-s:s}return console.warn(r4e),null}return t}function Ns(t=0,e=0){return{x:t,y:e}}function Yxt(t){return t?Ns(t.x,t.y):null}function Jxt(t=0,e=0){return[t,e]}function Xxt(t=0,e=0,i=0){return[t,e,i]}function Qxt(t){return t}function Kxt(t){return t}function e$t(t){return t}function t$t(t,e){return e?(e[0]=t.x,e[1]=t.y,e.length>2&&(e[2]=0),e):[t.x,t.y]}const Mve=ve("mac")?"Meta":"Control",n4e=new Set(["Alt","Control","Meta","Shift","Ctrl","Primary"]),s4e=t=>n4e.has(t);let a4e=class{constructor(e,i=[]){this.eventType=e,this.keyModifiers=i}matches(e){if(e.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const i=e.modifiers;for(const r of this.keyModifiers)if(!i.has(r))return!1;return!0}},Bs=class{constructor(e){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=e}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const e in this._incoming){const i=this._incoming[e];for(const r of i)this._incomingEventMatches.push(r.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(e=>e.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(e){this._manager||(e.setEventCallback(i=>this._handleEvent(i)),e.setUninstallCallback(()=>this._onUninstall()),this._manager=e)}onUninstall(){}registerIncoming(e,i,r){let n;typeof i=="function"?(r=i,n=[]):n=i||[];const s=typeof e=="string"?new a4e(e,n):e,a=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},o=h=>{const m=this._incoming[h.match.eventType];if(m){const g=m.indexOf(h);m.splice(g,1),a(),this._manager&&this._manager.updateDependencies()}},l=new o4e(s,r,{onPause:o,onRemove:o,onResume:h=>{const m=this._incoming[h.match.eventType];m&&!m.includes(h)&&(m.push(h),a(),this._manager&&this._manager.updateDependencies())}});let c=this._incoming[s.eventType];return c||(c=[],this._incoming[s.eventType]=c),c.push(l),a(),this._manager&&this._manager.updateDependencies(),l}registerOutgoing(e){if(this._outgoing[e])throw new Error("There is already a callback registered for this outgoing InputEvent: "+e);const i=new l4e(e,{onEmit:(r,n,s,a)=>{var o;(o=this._manager)==null||o.emit(r.eventType,n,s,a)},onRemove:r=>{var n;delete this._outgoing[r.eventType],(n=this._manager)==null||n.updateDependencies()}});return this._outgoing[e]=i,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),i}startCapturingPointer(e){var i;(i=this._manager)==null||i.setPointerCapture(e,!0)}stopCapturingPointer(e){var i;(i=this._manager)==null||i.setPointerCapture(e,!1)}refreshHasPendingInputs(){var e;(e=this._manager)==null||e.refreshHasPendingInputs()}_onUninstall(){this._manager&&(this.onUninstall(),this._manager=null)}_handleEvent(e){var r;const i=this._incoming[e.type];if(i){for(const n of i)if(n.match.matches(e)&&((r=n.callback)==null||r.call(n,e),e.shouldStopPropagation()))break}}},o4e=class{constructor(e,i,r){this.match=e,this._callback=i,this._handler=r}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}},l4e=class{constructor(e,i){this.eventType=e,this._removed=!1,this._handler=i}emit(e,i,r){this._removed||this._handler.onEmit(this,e,i,r)}remove(){this._removed=!0,this._handler.onRemove(this)}},c4e=class extends Bs{constructor(e){super(!0),this._onChange=e,this._value="mouse",this._x=null,this._y=null,this._id=null,this.registerIncoming("pointer-move",i=>this._update(i.data))}_update(e){const i=e.native.pointerType==="touch"?"touch":"mouse",{x:r,y:n,native:{pointerId:s}}=e;i===this._value&&this._x===r&&this._y===n&&this._id===s||(this._value=i,this._x=r,this._y=n,this._id=s,this._onChange(s,i,r,n))}},u4e=class extends Bs{get multiTouchActive(){return this._multiTouchActive.value}constructor(){super(!0),this._activeTouchPointerIds=new Set,this._multiTouchActive=Yw(!1),this._onPointerAdd=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.add(e.native.pointerId),this._update())},this._onPointerRemove=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.delete(e.native.pointerId),this._update())},this.registerIncoming("pointer-down",this._onPointerAdd),this.registerIncoming("pointer-up",this._onPointerRemove),this.registerIncoming("pointer-capture-lost",this._onPointerRemove),this.registerIncoming("pointer-cancel",this._onPointerRemove)}_update(){this._multiTouchActive.value=this._activeTouchPointerIds.size>1}},d4e=class{constructor(e,i){this._owner=i,this._properties={},this._afterDispatchHandle=null;for(const r in e){const n=e[r],s=new _pe(n,void 0,void 0,2,2);this._properties[r]={pool:s,acquired:[]}}this._afterDispatchHandle=oPe(()=>this._release())}destroy(){this._afterDispatchHandle&&(this._afterDispatchHandle.remove(),this._afterDispatchHandle=null);for(const e in this._properties){const i=this._properties[e];for(const r of i.acquired)Zte(r)||i.pool.release(r);i.pool.destroy(),i.pool=null,i.acquired=null}this._properties=null,this._owner=null}get(e){const i=this._owner._get(e),r=this._properties[e];let n=r.pool.acquire();for(r.acquired.push(n);n===i;)n=r.pool.acquire(),r.acquired.push(n);return Fpe(),n}_release(){for(const e in this._properties){const i=this._properties[e];let r=0;for(const n of i.acquired)Zte(n)?i.acquired[r++]=n:i.pool.release(n);i.acquired.length=r}}},h4e=class{constructor(){this.id=0,this.type="mouse",this.location=Ns()}},rd=class extends et{constructor(e){super(e),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._handlersPriority=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=Mve,this._propertiesPool=new d4e({latestPointerInfo:()=>new h4e},this),this._latestPointerInfo=void 0,this._paused=!1,this._testTimestamp=void 0}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const e=Object.keys(this._nameToGroup);for(const i of e)this.uninstallHandlers(i);this.eventSource.destroy(),this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some(e=>e.handler.hasPendingInputs)}get multiTouchActive(){return this._multiTouchHandler.multiTouchActive}get latestPointerInfo(){return this._latestPointerInfo}get updating(){return this.hasPendingInputs||this._paused}installHandlers(e,i,r=Vm.INTERNAL){if(this._nameToGroup[e]||i.length===0)return;const n={name:e,handlers:i.map(s=>({handler:s,active:!0,removed:!1,priorityIndex:0,groupPriority:r,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[e]=n;for(let s=n.handlers.length-1;s>=0;s--){const a=n.handlers[s];this._handlers.push(a),a.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(o,l,c,h,m)=>{this._emitInputEvent(a.priorityIndex+1,o,l,c,m,h)},setPointerCapture:(o,l)=>{this._setPointerCapture(n,a,o,l)},setEventCallback:o=>{a.eventCallback=o},setUninstallCallback:o=>{a.uninstallCallback=o},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(e){const i=this._nameToGroup[e];i?(i.handlers.forEach(r=>{var n;r.removed=!0,(n=r.uninstallCallback)==null||n.call(r)}),delete this._nameToGroup[e],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):Ie.getLogger(this).error("There is no InputHandler group registered under the name `"+e+"`")}hasHandlers(e){return this._nameToGroup[e]!==void 0}isModifierKeyDown(e){return this._activeKeyModifiers.has(e)}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const e=new Set,i=new Set;this._handlersPriority=[];for(let r=this._handlers.length-1;r>=0;r--){const n=this._handlers[r];n.priorityIndex=r,this._handlersPriority.push(n)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let r=this._handlersPriority.length-1;r>=0;r--){const n=this._handlersPriority[r];n.priorityIndex=r;let s=n.handler.hasSideEffects;if(!s){for(const a of n.handler.outgoingEventTypes)if(e.has(a)){s=!0;break}}if(s)for(const a of n.handler.incomingEventMatches){e.add(a.eventType);for(const o of a.keyModifiers)s4e(o)||i.add(o)}n.active=s}this._sourceEvents=e,this._keyModifiers=i,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(e,i,r,n){const s=this._latestPointerInfo;if(s==null||s.id!==e||s.type!==i||s.location.x!==r||s.location.y!==n){const a=this._propertiesPool.get("latestPointerInfo");a.id=e,a.type=i,a.location.x=r,a.location.y=n,this._latestPointerInfo=a}}_onEventReceived(e,i){var s,a;if(e==="pointer-capture-lost"){const o=i;this._pointerCaptures.delete(o.native.pointerId)}this._updateKeyModifiers(e,i);const r=this._testTimestamp??((s=i.native)==null?void 0:s.timestamp),n=(a=i.native)==null?void 0:a.cancelable;this._emitInputEventFromSource(e,i,r,n)}_updateKeyModifiers(e,i){if(!i)return;let r=!1;const n=()=>{r||(this._activeKeyModifiers=new Set(this._activeKeyModifiers),r=!0)},s=(o,l)=>{l&&!this._activeKeyModifiers.has(o)?(n(),this._activeKeyModifiers.add(o)):!l&&this._activeKeyModifiers.has(o)&&(n(),this._activeKeyModifiers.delete(o))};if(e==="key-down"||e==="key-up"){const o=i.key;this._keyModifiers.has(o)&&s(o,e==="key-down")}const a=i.native;s("Alt",!!(a!=null&&a.altKey)),s("Control",!!(a!=null&&a.ctrlKey)),s("Ctrl",!!(a!=null&&a.ctrlKey)),s("Shift",!!(a!=null&&a.shiftKey)),s("Meta",!!(a!=null&&a.metaKey)),s("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new c4e((e,i,r,n)=>this._setLatestPointer(e,i,r,n)),this._multiTouchHandler=new u4e,this.installHandlers("input-manager-logic",[this._latestPointerHandler,this._multiTouchHandler],Vm.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,Vm.INTERNAL)}_setPointerCapture(e,i,r,n){const s=e.name+"-"+i.priorityIndex,a=this._pointerCaptures.get(r.pointerId)||new Set;this._pointerCaptures.set(r.pointerId,a),n?(a.add(s),a.size===1&&this.eventSource&&this.eventSource.setPointerCapture(r,!0)):a.has(s)&&(a.delete(s),a.size===0&&(this._pointerCaptures.delete(r.pointerId),this.eventSource&&this.eventSource.setPointerCapture(r,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(e=>!e.removed),this.updateDependencies()}_emitInputEventFromSource(e,i,r,n){this._emitInputEvent(0,e,i,r,n)}_emitInputEvent(e,i,r,n,s,a){var h;const o=n??((h=this._currentPropagation)==null?void 0:h.timestamp)??performance.now(),l=s??!1,c={event:new p4e(i,r,o,a||this._activeKeyModifiers,l),priorityIndex:e};this._currentPropagation?this._currentPropagation.events.push(c):this._doNewPropagation(c)}_doNewPropagation(e){this._currentPropagation={events:new _E,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:e.event.timestamp},this._currentPropagation.events.push(e),this._continuePropagation()}_continuePropagation(){var i,r,n;this._paused=!1;const e=this._currentPropagation;if(e){for(;e.events.length>0;){const{event:s,priorityIndex:a}=e.events.pop(),o=(i=s.data)==null?void 0:i.eventId;if(!(o!=null&&this._stoppedPropagationEventIds.has(o)))for(e.currentHandler=this._handlersPriority[a];e.currentHandler;){if(e.currentHandler.removed)e.needsHandlerGarbageCollect=!0;else{if(e.currentHandler.active&&!s.shouldStopPropagation()&&((n=(r=e.currentHandler).eventCallback)==null||n.call(r,s)),s.shouldStopPropagation()){o!=null&&this._stoppedPropagationEventIds.add(o);break}if(s.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:s,priorityIndex:e.currentHandler.priorityIndex+1})}e.currentHandler=this._handlersPriority[e.currentHandler.priorityIndex+1]}}e.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}}_pausePropagation(e){const i=new _E;i.push(e);const r=this._currentPropagation;if(r){for(;r.events.length;)i.push(r.events.pop());r.events=i,r.currentHandler=null,this._paused=!0}}_compareHandlerPriority(e,i){if(e.handler.hasSideEffects!==i.handler.hasSideEffects)return e.handler.hasSideEffects?1:-1;if(e.groupPriority!==i.groupPriority)return e.groupPriority>i.groupPriority?-1:1;for(const r of e.handler.incomingEventMatches)for(const n of i.handler.incomingEventMatches){if(r.eventType!==n.eventType)continue;const s=r.keyModifiers.filter(a=>n.keyModifiers.includes(a));if(s.length===r.keyModifiers.length!=(s.length===n.keyModifiers.length))return r.keyModifiers.length>n.keyModifiers.length?-1:1}return e.priorityIndex>i.priorityIndex?-1:1}_sortHandlersPriority(e){const i=[];for(const r of e){let n=0;for(;n<i.length&&this._compareHandlerPriority(r,i[n])>=0;)n++;i.splice(n,0,r)}return i}get test(){}};d([f({readOnly:!0})],rd.prototype,"hasPendingInputs",null),d([f({constructOnly:!0})],rd.prototype,"eventSource",void 0),d([f({constructOnly:!0})],rd.prototype,"recognizers",void 0),d([f()],rd.prototype,"multiTouchActive",null),d([f()],rd.prototype,"_latestPointerInfo",void 0),d([f()],rd.prototype,"latestPointerInfo",null),d([f()],rd.prototype,"_paused",void 0),d([f({readOnly:!0})],rd.prototype,"updating",null),rd=d([V("esri.views.input.InputManager")],rd);let p4e=class{constructor(e,i,r,n,s){this.type=e,this.data=i,this.timestamp=r,this.modifiers=n,this.cancelable=s,this._propagationState=0,this._resumeCallback=null}stopPropagation(){this._propagationState|=1}shouldStopPropagation(){return!!(1&this._propagationState)}defer(e){this._propagationState|=2;const i=(r,n)=>{this._propagationState&=-3;const s=this._resumeCallback;if(this._resumeCallback=null,s&&s(),n)throw r;return r};return(typeof e=="function"?e():e).then(r=>i(r,!1),r=>i(r,!0))}shouldPausePropagation(e){return!!(2&this._propagationState)&&(this._resumeCallback=e,!0)}preventDefault(){this.data.native.preventDefault()}};const Vm={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3},f4e=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this._popupSetupTask=null,this.popup={},this.popupEnabled=!0}initialize(){this.addHandles([be(()=>[this.ui,this.popup,this.popupElement],([r,n,s],a)=>{const[o,l,c]=a??[];Qje(this,[r,n,s],[o,l,c])},Ka),this.on("click",r=>{this.popup&&this.popupEnabled&&(r.pointerType!=="mouse"||r.button===0)&&Kje(this,r)},Vm.WIDGET)]),kT(()=>this.ready&&this.popupEnabled&&!this.updating).then(()=>de(()=>Promise.resolve().then(()=>ece),void 0))}destroy(){this.destroyed||this.closePopup()}async openPopup(r){if(Cp(this.popup))return this.popup.open(r);if(this.popupElement&&Ym(this.popupElement))this.popupElement.open(r).catch(()=>{});else try{if(await this.setupPopup(),!this.popup)return void Ie.getLogger(this).error(new ae("view:null-popup","Popup is null and can't be opened"));e4e(this,r)}catch{}}closePopup(){var r;(r=this._popupSetupTask)==null||r.abort(),t4e(this.popup,this.popupElement)}async fetchPopupFeatures(r,n){return await this.when(),this._popupHitsToFeatures(await this._getPopupHits(r,n),n)}async setupPopup(){var r;if((r=this._popupSetupTask)==null||r.abort(),this.popup&&!Cp(this.popup))return this._popupSetupTask=Zm(async n=>{if(!this.popupEnabled||!Ym(this.popupElement))if(this.dependencies.popup&&typeof this.dependencies.popup=="function")await this.dependencies.popup(),lr(n),customElements.get("arcgis-popup")||Ie.getLogger(this).error(new ae("view:undefined-popup-element","`arcgis-popup` custom element is undefined and can't be opened")),this.popupElement=document.createElement("arcgis-popup");else{const{default:s}=await de(()=>Promise.resolve().then(()=>ece),void 0);if(lr(n),!this.popup||Cp(this.popup))return;const a=this.popup;if("open"in a||"close"in a){const{open:o,close:l,...c}=a;this.popup=new s({...c})}else this.popup=new s(a)}}),this._popupSetupTask.promise}async _popupHitsToFeatures({location:r,hits:n},s){const a=[],o=[];let l=!1;const c=LAe(s,ve("popup-view-fetch-timeout")??g4e),h=v=>{const b=new m4e(v);return o.push(b),a.push(b.promise),b},m=v=>{const b=o.at(-1);return b&&b.layerView===v&&!l?b:h(v)};for(const v of n)"graphic"in v?(m(v.layerView).graphics.push(v.graphic),l=!1):(a.push(v.layerView.fetchPopupFeaturesAtLocation(v.mapPoint,c)),l=!0);o.forEach(v=>v.resolve(c));const g=OAe(a).then(v=>v.filter(b=>!!b).flat());return{pendingFeatures:a,allGraphicsPromise:g,location:r}}async _getPopupHits(r,n){const{hits:s,location:a}=await this.popupHitTest(r);lr(n);const o=[];for(const l of s)if("graphic"in l){if(this._isValidPopupGraphic(l.graphic,n)){const c=this._isValidPopupGraphicsLayerView(l.layerView)?l.layerView:void 0;o.push({graphic:l.graphic,layerView:c})}}else this._isValidPopupLocationLayerView(l.layerView)&&o.push({mapPoint:l.mapPoint,layerView:l.layerView});return{hits:o,location:a}}_isValidPopupGraphic(r,n){return r&&!!r.getEffectivePopupTemplate(n==null?void 0:n.defaultPopupTemplateEnabled)}_isValidPopupGraphicsLayerView(r){return!r||(!("layer"in r)||!r.suspended)&&"fetchPopupFeaturesFromGraphics"in r}_isValidPopupLocationLayerView(r){return(!("layer"in r)||!r.suspended)&&"fetchPopupFeaturesAtLocation"in r}};return d([f()],i.prototype,"popup",void 0),d([f()],i.prototype,"popupElement",void 0),d([f()],i.prototype,"popupEnabled",void 0),i=d([V("esri.views.PopupView")],i),i};let m4e=class{constructor(e){this.layerView=e,this._resolver=Fl(),this.graphics=[]}get promise(){return this._resolver.promise}resolve(e){const{layerView:i,graphics:r,_resolver:n}=this;if(!i)return n.resolve(r),n.promise;let s;return i.fetchPopupFeaturesFromGraphics(r,e).catch(a=>(s=a,null)).then(a=>{a?n.resolve(a):n.reject(s)}),n.promise}};const g4e=5e3;let y4e=class{constructor(){this._resolver=Fl(),this._status=0,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=1,this._cleanUp()},()=>{this._status=2,this._cleanUp()}),this.promise=this._resolver.promise}destroy(){this._cleanUp()}addResolvingPromise(e){this._resolvingPromises.push(e),this._tryResolve()}isResolved(){return this._status===1}isRejected(){return this._status===2}isFulfilled(){return this._status!==0}abort(){this._resolver.reject(Hi())}_cleanUp(){this._allPromise=null,this._resolvingPromises=null}_tryResolve(){if(this.isFulfilled())return;const e=Fl(),i=[...this._resolvingPromises,e.promise],r=this._allPromise=Promise.all(i);r.then(()=>{this.isFulfilled()||this._allPromise!==r||this._resolver.resolve()},n=>{this.isFulfilled()||this._allPromise!==r||In(n)||this._resolver.reject(n)}),e.resolve()}};const qD=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),this._promiseProps=new y4e,this.addResolvingPromise(Promise.resolve())}destroy(){this._promiseProps.destroy()}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(r,n){return this._promiseProps.promise.then(()=>this).then(r,n)}catch(r){return this.when(null,r)}addResolvingPromise(r){r&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in r?r.when():r)}addResolvingTask(r){r&&!this._promiseProps.isFulfilled()&&(this.addHandles(hAe(r)),this._promiseProps.addResolvingPromise(r.promise))}};return i=d([V("esri.core.Promise")],i),i},QZ=qD(et),v4e="not-loaded",b4e="loading",w4e="failed",ane="loaded",KZ=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(n=>{const s=this.load.bind(this);this.load=a=>{const o=new Promise((l,c)=>{const h=PW(a,c);this.destroyed&&c(new ae("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this.when(l,c).finally(()=>{h&&h.remove()})});if(this.loadStatus===v4e){this._set("loadStatus",b4e);const l=this._loadController=new AbortController;s({signal:l.signal})}return n(),o}})),this.when(()=>{this._set("loadStatus",ane),this._loadController=null},n=>{this.destroyed||(this._set("loadStatus",w4e),this._set("loadError",n),this._loadController=null)})}destroy(){this._loadController&&(this._loadController=Fa(this._loadController),this._promiseProps.abort()),this._set("loadError",null),this._set("loadWarnings",[])}get loaded(){return this.loadStatus===ane}get loadWarnings(){return this._get("loadWarnings")}load(r){return null}cancelLoad(){var r;return this.isFulfilled()||(this._set("loadError",new ae("load:cancelled","Cancelled")),(r=this._loadController)==null||r.abort(),this._promiseProps.abort()),this}};return d([f({readOnly:!0})],i.prototype,"loaded",null),d([f({readOnly:!0})],i.prototype,"loadError",void 0),d([f({clonable:!1})],i.prototype,"loadStatus",void 0),d([f({type:[Ic],readOnly:!0})],i.prototype,"loadWarnings",null),i=d([V("esri.core.Loadable")],i),i},w_=KZ(QZ);function a9(t){return!(!t||!t.load)}async function HD(t,e){return await t.load(),_4e(t,e)}async function _4e(t,e){const i=[],r=(...s)=>{for(const a of s)a!=null&&(Array.isArray(a)?r(...a):Ue.isCollection(a)?a.forEach(o=>r(o)):a9(a)&&i.push(a))};e(r);let n=null;if(await Zje(i,async s=>{const a=await BD(x4e(s)?s.loadAll():s.load());a.ok!==!1||n||(n=a)}),n)throw n.error;return t}function x4e(t){return"loadAll"in t&&typeof t.loadAll=="function"}let rO;function $4e(t){return rO&&!rO.destroyed||(rO=t()),rO}var o9;const S4e=new jt({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let Dn=o9=class extends et{constructor(t){super(t),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(t){t!=="asc"&&t!=="desc"||this._set("sortOrder",t)}clone(){return new o9({categories:this.categories?he(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(t,e){let i=[];this.categories&&(i=this.categories.map(a=>Array.isArray(a)?JSON.stringify(a):a));let r="";if(this.extent){const a=xD(this.extent,tt.WGS84);a!=null&&(r=`${a.xmin},${a.ymin},${a.xmax},${a.ymax}`)}let n=this.query;!this.disableExtraQuery&&t.extraQuery&&(n="("+n+")"+t.extraQuery);const s={categories:i,bbox:r,q:n,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(s.sortField=this.sortField.split(",").map(a=>S4e.toJSON(a.trim())).join(","),s.sortOrder=this.sortOrder),{query:{...e,...s}}}};d([f()],Dn.prototype,"categories",void 0),d([f()],Dn.prototype,"disableExtraQuery",void 0),d([f({type:Yt})],Dn.prototype,"extent",void 0),d([f()],Dn.prototype,"filter",void 0),d([f()],Dn.prototype,"num",void 0),d([f()],Dn.prototype,"query",void 0),d([f()],Dn.prototype,"sortField",void 0),d([f()],Dn.prototype,"sortOrder",null),d([f()],Dn.prototype,"start",void 0),Dn=o9=d([V("esri.portal.PortalQueryParams")],Dn);var l9;let Fn=l9=class extends $e{constructor(t){super(t),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.sourceJSON=null,this.tags=null,this.title=null}get thumbnailUrl(){var i;const t=this.url,e=this.thumbnail;return t&&e&&this.portal?(i=this.portal)==null?void 0:i.normalizeUrl(`${t}/info/${e}?f=json`):null}get url(){var e;const t=(e=this.portal)==null?void 0:e.restUrl;return t?t+"/community/groups/"+this.id:null}fetchCategorySchema(t){return this.portal.request(this.url+"/categorySchema",t).then(e=>{const i=e.categorySchema||[];return i.some(r=>r.source==="contentCategorySetsGroupQuery.LivingAtlas")?this._fetchCategorySchemaSet("LivingAtlas",t):i})}fetchMembers(t){return this.portal.request(this.url+"/users",t)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}toJSON(){throw new ae("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const e=new l9({sourceJSON:t});return e.read(t),e}queryItems(t,e){let i=Wn(Dn,t);const r=this.portal;return parseFloat(r.currentVersion)>5?(i=i||new Dn,r.queryPortal(`/content/groups/${this.id}/search`,i,"PortalItem",e)):(i=i?i.clone():new Dn,i.query="group:"+this.id+(i.query?" "+i.query:""),r.queryItems(i,e))}_fetchCategorySchemaSet(t,e){const i=this.portal;return i.fetchSelf(i.authMode,!0,e).then(r=>{const n=r.contentCategorySetsGroupQuery;if(n){const s=new Dn({disableExtraQuery:!0,num:1,query:n});return i.queryGroups(s,e)}throw new ae("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(r=>{if(r.total){const n=r.results[0],s=new Dn({num:1,query:`typekeywords:"${t}"`});return n.queryItems(s,e)}throw new ae("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(r=>r.total?r.results[0].fetchData("json",e).then(n=>{const s=n==null?void 0:n.categorySchema;return s!=null&&s.length?s:[]}):[])}};d([f()],Fn.prototype,"access",void 0),d([f({type:Date})],Fn.prototype,"created",void 0),d([f()],Fn.prototype,"description",void 0),d([f()],Fn.prototype,"id",void 0),d([f()],Fn.prototype,"isInvitationOnly",void 0),d([f({type:Date})],Fn.prototype,"modified",void 0),d([f()],Fn.prototype,"owner",void 0),d([f()],Fn.prototype,"portal",void 0),d([f()],Fn.prototype,"snippet",void 0),d([f()],Fn.prototype,"sortField",void 0),d([f()],Fn.prototype,"sortOrder",void 0),d([f()],Fn.prototype,"sourceJSON",void 0),d([f()],Fn.prototype,"tags",void 0),d([f()],Fn.prototype,"thumbnail",void 0),d([f({readOnly:!0})],Fn.prototype,"thumbnailUrl",null),d([f()],Fn.prototype,"title",void 0),d([f({readOnly:!0})],Fn.prototype,"url",null),Fn=l9=d([V("esri.portal.PortalGroup")],Fn);let Gb=class extends et{constructor(e){super(e),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};d([f()],Gb.prototype,"nextQueryParams",void 0),d([f()],Gb.prototype,"queryParams",void 0),d([f()],Gb.prototype,"results",void 0),d([f()],Gb.prototype,"total",void 0),Gb=d([V("esri.portal.PortalQueryResult")],Gb);let zf=class extends $e{constructor(e){super(e),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){var i;const e=(i=this.portal)==null?void 0:i.restUrl;return e?`${e}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new ae("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};d([f({type:Date})],zf.prototype,"created",void 0),d([f()],zf.prototype,"id",void 0),d([f()],zf.prototype,"portal",void 0),d([f()],zf.prototype,"title",void 0),d([f({readOnly:!0})],zf.prototype,"url",null),d([f()],zf.prototype,"username",void 0),zf=d([V("esri.portal.PortalFolder")],zf);var c9;let ur=c9=class extends $e{constructor(t){super(t),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.id=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userLicenseTypeId=null,this.userType=null}get thumbnailUrl(){const t=this.url,e=this.thumbnail;return t&&e?this.portal.normalizeUrl(`${t}/info/${e}?f=json`):null}get userContentUrl(){var e;const t=(e=this.portal)==null?void 0:e.restUrl;return t?`${t}/content/users/${this.id}`:null}get url(){var e;const t=(e=this.portal)==null?void 0:e.restUrl;return t?`${t}/community/users/${this.id}`:null}addItem(t){const e=t&&t.item,i=t==null?void 0:t.data,r=t==null?void 0:t.folder,n={method:"post"};e&&(n.query=e.createPostQuery(),i!=null&&(typeof i=="string"?n.query.text=i:typeof i=="object"&&(n.query.text=JSON.stringify(i))));let s=this.userContentUrl;return r&&(s+="/"+(typeof r=="string"?r:r.id)),this.portal.request(s+"/addItem",n).then(a=>(e.id=a.id,e.portal=this.portal,e.loaded?e.reload():e.load()))}async deleteItem(t,e=!1){let i=this.userContentUrl;t.ownerFolder&&(i+="/"+t.ownerFolder);const r=e?{permanentDelete:!0}:{};await this.portal.request(i+`/items/${t.id}/delete`,{method:"post",query:r}),t.id=null,t.portal=null}async deleteItems(t,e=!1){t=t.slice();const i=this.userContentUrl+"/deleteItems",r=[],n=t.map(s=>s.id);if(n.length){const s={method:"post",query:{items:n.join(","),permanentDelete:e}},a=await this.portal.request(i,s);for(const o of a.results){const l=t.find(m=>o.itemId===m.id),c=o.success;let h=null;c?(l.id=null,l.portal=null):o.error&&(h=new ae("portal:delete-item-failed",o.error.message,o.error)),r.push({item:l,success:c,error:h})}}return r}fetchFolders(){const t={query:{num:1}};return this.portal.request(this.userContentUrl??"",t).then(e=>{let i;return i=e&&e.folders?e.folders.map(r=>{const n=zf.fromJSON(r);return n.portal=this.portal,n}):[],i})}fetchGroups(){return this.portal.request(this.url??"").then(t=>{let e;return e=t&&t.groups?t.groups.map(i=>{const r=Fn.fromJSON(i);return r.portal=this.portal,r}):[],e})}async fetchItems(t){t??(t={});let e=this.userContentUrl??"";t.folder&&(e+="/"+t.folder.id);const{default:i}=await de(()=>Promise.resolve().then(()=>Cve),void 0),r={folders:!1,inRecycleBin:!!t.inRecycleBin||null,foldersContent:!(t.folder||!t.includeSubfolderItems)||null,num:t.num||10,start:t.start||1,sortField:t.sortField||"created",sortOrder:t.sortOrder||"asc"},n=await this.portal.request(e,{query:r});let s;return n!=null&&n.items?(s=n.items.map(a=>{const o=i.fromJSON(a);return o.portal=this.portal,o}),await Promise.all(s.map(a=>a.load())),{items:s,nextStart:n.nextStart,total:n.total}):{items:[],nextStart:-1,total:0}}fetchTags(){return this.portal.request(this.url+"/tags").then(t=>t.tags)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}queryFavorites(t){return this.favGroupId?(this._favGroup||(this._favGroup=new Fn({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(t)):Promise.reject(new ae("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}async restoreItem(t,e){const i=this.userContentUrl,r=e?{folderID:typeof e=="string"?e:e.id}:null;await this.portal.request(i+`/items/${t.id}/restore`,{method:"post",query:r})}toJSON(){throw new ae("internal:not-yet-implemented","PortalUser.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const e=new c9({sourceJSON:t});return e.read(t),e}};d([f()],ur.prototype,"access",void 0),d([f({type:Date})],ur.prototype,"created",void 0),d([f()],ur.prototype,"culture",void 0),d([f()],ur.prototype,"description",void 0),d([f()],ur.prototype,"email",void 0),d([f()],ur.prototype,"favGroupId",void 0),d([f()],ur.prototype,"fullName",void 0),d([f()],ur.prototype,"id",void 0),d([f({type:Date})],ur.prototype,"modified",void 0),d([f()],ur.prototype,"orgId",void 0),d([f()],ur.prototype,"portal",void 0),d([f()],ur.prototype,"preferredView",void 0),d([f()],ur.prototype,"privileges",void 0),d([f()],ur.prototype,"region",void 0),d([f()],ur.prototype,"role",void 0),d([f()],ur.prototype,"roleId",void 0),d([f()],ur.prototype,"sourceJSON",void 0),d([f()],ur.prototype,"thumbnail",void 0),d([f({readOnly:!0})],ur.prototype,"thumbnailUrl",null),d([f()],ur.prototype,"units",void 0),d([f({readOnly:!0})],ur.prototype,"userContentUrl",null),d([f({readOnly:!0})],ur.prototype,"url",null),d([f()],ur.prototype,"username",void 0),d([f()],ur.prototype,"userLicenseTypeId",void 0),d([f()],ur.prototype,"userType",void 0),ur=c9=d([V("esri.portal.PortalUser")],ur);var Xl;let yM;const one={PortalGroup:()=>Promise.resolve({default:Fn}),PortalItem:()=>de(()=>Promise.resolve().then(()=>Cve),void 0),PortalUser:()=>Promise.resolve({default:ur})};var Yh;let qe=(Yh=class extends ig(w_){constructor(e){super(e),this._esriIdCredentialCreateHandle=null,this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.basemapGalleryGroupQuery3D=null,this.g3DTilesGalleryGroupQuery=null,this.g3dTilesEnabled=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.default3DBasemapQuery=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.layoutGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.hasClassificationSchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.recycleBinEnabled=!1,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=Ti.portalUrl,this.urlKey=null,this.user=null,this.use3dBasemaps=!0,this.useDefault3dBasemap=!1,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(e){return typeof e=="string"?{url:e}:e}destroy(){lne.unregister(this),this.defaultBasemap=Or(this.defaultBasemap),this.defaultDevBasemap=Or(this.defaultDevBasemap),this.defaultVectorBasemap=Or(this.defaultVectorBasemap),this._esriIdCredentialCreateHandle=Dr(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(e){if(e)for(const i of e)Ti.request.trustedServers.includes(i)||Ti.request.trustedServers.push(i);return e}readDefaultBasemap(e){return this._readBasemap(e)}readDefaultDevBasemap(e){return this._readBasemap(e)}readDefaultVectorBasemap(e){return this._readBasemap(e)}get extraQuery(){var r;const e=(r=this.user)==null?void 0:r.orgId,i=!e||this.canSearchPublic;return this.id&&!i?` AND orgid:${this.id}`:null}get hasAPIKey(){return $3e(this.restUrl)}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get loaded(){return super.loaded}get restUrl(){let e=this.url;if(e){const i=e.indexOf("/sharing");e=i>0?e.slice(0,i):this.url.replace(/\/+$/,""),e+="/sharing/rest"}return e}get thumbnailUrl(){const e=this.restUrl,i=this.thumbnail;return e&&i?this._normalizeSSL(e+"/portals/self/resources/"+i):null}readUrlKey(e){return e&&e.toLowerCase()}readUser(e){let i=null;return e&&(i=ur.fromJSON(e),i.portal=this),i}load(e){const i=de(async()=>{const{default:r}=await Promise.resolve().then(()=>Z4e);return{default:r}},void 0).then(({default:r})=>{lr(e),yM=r}).then(()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,e)).then(r=>{var n;if(!this.hasAPIKey&&Rt){const s=Rt;this.credential=s.findCredential(this.restUrl),this.credential||this.authMode!==Xl.AUTH_MODE_AUTO&&this.authMode!==Xl.AUTH_MODE_NO_PROMPT||((n=this._esriIdCredentialCreateHandle)==null||n.remove(),this._esriIdCredentialCreateHandle=s.on("credential-create",T4e(new WeakRef(this))),lne.register(this,this._esriIdCredentialCreateHandle,this))}this.sourceJSON=r,this.read(r)});return this.addResolvingPromise(i),Promise.resolve(this)}async createElevationLayers(){await this.load();const e=this._getHelperService("defaultElevationLayers"),i=(await de(async()=>{const{default:r}=await import("./ElevationLayer-hOzwxFiv.js");return{default:r}},__vite__mapDeps([132,133,134,135,136]))).default;return e?e.map(r=>new i({id:r.id,url:r.url})):[]}async fetchBasemaps(e,i){const r=await this._fetchBasemaps(e,i);if((i==null?void 0:i.include3d)===!0&&this.use3dBasemaps!==!1){const n=await this._fetchBasemaps3D(e,i);r.unshift(...n)}return r}async fetchDefault3DBasemap(e){if(!this.useDefault3dBasemap||!this.default3DBasemapQuery||this.default3DBasemapQuery==="none")return null;const i=new Dn;i.query=this.default3DBasemapQuery,i.disableExtraQuery=!0;const r=(await this.queryItems(i,e)).results.find(n=>n.type==="Web Scene");return r?new yM({portalItem:r}):null}fetchCategorySchema(e){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",e).then(i=>i.categorySchema):co(e)?Promise.reject(Hi()):Promise.resolve([])}async fetchClassificationSchema(e){return this.hasClassificationSchema?this.request(this.restUrl+"/portals/self/classification/classificationSchema",e).then(i=>i.classificationSchema):null}fetchFeaturedGroups(e){const i=this.featuredGroups,r=new Dn({num:100,sortField:"title"});if(i!=null&&i.length){const n=[];for(const s of i)n.push(`(title:"${s.title}" AND owner:${s.owner})`);return r.query=n.join(" OR "),this.queryGroups(r,e).then(s=>s.results)}return co(e)?Promise.reject(Hi()):Promise.resolve([])}fetchRegions(e){var r;const i=((r=this.user)==null?void 0:r.culture)||this.culture||Ol();return this.request(this.restUrl+"/portals/regions",{...e,query:{culture:i}})}fetchSettings(e){var r;const i=((r=this.user)==null?void 0:r.culture)||this.culture||Ol();return this.request(this.restUrl+"/portals/self/settings",{...e,query:{culture:i}})}static getDefault(){return $4e(()=>new Xl)}queryGroups(e,i){return this.queryPortal("/community/groups",e,"PortalGroup",i)}queryItems(e,i){return this.queryPortal("/search",e,"PortalItem",i)}queryUsers(e,i){return e.sortField||(e.sortField="username"),this.queryPortal("/community/users",e,"PortalUser",i)}fetchSelf(e=this.authMode,i=!1,r){const n=this.restUrl+"/portals/self",s={authMode:e,query:{culture:Ol().toLowerCase()},withCredentials:!0,...r};return s.authMode==="auto"&&(s.authMode="no-prompt"),i&&(s.query.default=!0),this.request(n,s)}queryPortal(e,i,r,n){const s=Wn(Dn,i),a=o=>this.request(this.restUrl+e,{...s.toRequestOptions(this),...n}).then(l=>{const c=s.clone();return c.start=l.nextStart,new Gb({nextQueryParams:c,queryParams:s,total:l.total,results:Xl._resultsToTypedArray(o,{portal:this},l,n)})}).then(l=>Promise.all(l.results.map(c=>typeof c.when=="function"?c.when():l)).then(()=>l,c=>(Bh(c),l)));return r&&one[r]?one[r]().then(({default:o})=>(lr(n),a(o))):a()}signIn(){if(this.hasAPIKey)return this.load().then(()=>{if(!this.user)throw new ae("portal:not-authenticated","Unable to authenticate user. Portal.user is missing")});if(this.authMode===Xl.AUTH_MODE_ANONYMOUS||this.authMode===Xl.AUTH_MODE_NO_PROMPT&&!Rt)return Promise.reject(new ae("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const e=i=>Promise.resolve().then(()=>this.loadStatus==="not-loaded"?(i||(this.authMode="immediate"),this.load().then(()=>null)):this.loadStatus==="loading"?this.load().then(()=>this.credential?null:(this.credential=i,this.fetchSelf("immediate"))):this.user&&this.credential===i?null:(this.credential=i,this.fetchSelf("immediate"))).then(r=>{r&&(this.sourceJSON=r,this.read(r))});return Rt?Rt.getCredential(this.restUrl,{prompt:this.authMode!==Xl.AUTH_MODE_NO_PROMPT}).then(i=>e(i)):e(this.credential)}normalizeUrl(e){var r;const i=(r=this.credential)==null?void 0:r.token;return this._normalizeSSL(i?e+(e.includes("?")?"&":"?")+"token="+i:e)}requestToTypedArray(e,i,r){return this.request(e,i).then(n=>{const s=Xl._resultsToTypedArray(r,{portal:this},n);return Promise.all(s.map(a=>typeof a.when=="function"?a.when():n)).then(()=>s,()=>s)})}request(e,i={}){const r={f:"json",...i.query},{authMode:n=this.authMode===Xl.AUTH_MODE_ANONYMOUS||this.authMode===Xl.AUTH_MODE_NO_PROMPT?this.authMode:"auto",body:s=null,cacheBust:a=!1,method:o="auto",responseType:l="json",signal:c}=i,h={authMode:n,body:s,cacheBust:a,method:o,query:r,responseType:l,timeout:0,signal:c};return i.withCredentials&&(h.withCredentials=!0),mi(this._normalizeSSL(e),h).then(m=>m.data)}toJSON(){throw new ae("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new Xl({sourceJSON:e})}_getHelperService(e){var r;const i=(r=this.helperServices)==null?void 0:r[e];if(!i)throw new ae("portal:service-not-found",`The \`helperServices\` do not include an entry named "${e}"`);return i}async _fetchBasemaps(e,i){const r=new Dn;r.query=e||(v8()?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),r.disableExtraQuery=!0;const n=await this.queryGroups(r,i);if(!n.total)return[];const s=n.results[0];r.num=100,r.query='type:"Web Map" -type:"Web Application"',r.sortField=s.sortField||"name",r.sortOrder=s.sortOrder||"desc";const a=await s.queryItems(r,i);return a.total?a.results.filter(o=>o.type==="Web Map").map(o=>new yM({portalItem:o})):[]}async _fetchBasemaps3D(e,i){const r=e||this.basemapGalleryGroupQuery3D;if(!r)return[];if(v8())return[];const n=new Dn({query:r,disableExtraQuery:!0}),s=await this.queryGroups(n,i);if(!s.total)return[];const a=s.results[0];n.num=100,n.query='type:"Web Scene"',n.sortField=a.sortField||"name",n.sortOrder=a.sortOrder||"desc";const o=await a.queryItems(n,i);return o.total?o.results.filter(l=>l.type==="Web Scene").map(l=>new yM({portalItem:l})):[]}_normalizeSSL(e){return e.replace(/^http:/i,"https:").replace(":7080",":7443")}_readBasemap(e){if(e){const i=yM.fromJSON(e);return i.portalItem={portal:this},i}return null}static _resultsToTypedArray(e,i,r,n){let s;if(r){const a=n!=null?n.signal:null;s=r.listings||r.notifications||r.userInvitations||r.tags||r.items||r.groups||r.comments||r.provisions||r.results||r.relatedItems||r,(e||i)&&(s=s.map(o=>{const l=Object.assign(e?e.fromJSON(o):o,i);return typeof l.load=="function"&&l.load(a),l}))}else s=[];return s}},Xl=Yh,Yh.AUTH_MODE_ANONYMOUS="anonymous",Yh.AUTH_MODE_AUTO="auto",Yh.AUTH_MODE_IMMEDIATE="immediate",Yh.AUTH_MODE_NO_PROMPT="no-prompt",Yh);d([f()],qe.prototype,"access",void 0),d([f()],qe.prototype,"allSSL",void 0),d([f()],qe.prototype,"authMode",void 0),d([f()],qe.prototype,"authorizedCrossOriginDomains",void 0),d([je("authorizedCrossOriginDomains")],qe.prototype,"readAuthorizedCrossOriginDomains",null),d([f()],qe.prototype,"basemapGalleryGroupQuery",void 0),d([f({json:{name:"3DBasemapGalleryGroupQuery"}})],qe.prototype,"basemapGalleryGroupQuery3D",void 0),d([f({json:{name:"g3DTilesGalleryGroupQuery"}})],qe.prototype,"g3DTilesGalleryGroupQuery",void 0),d([f({json:{name:"g3dTilesEnabled"}})],qe.prototype,"g3dTilesEnabled",void 0),d([f()],qe.prototype,"bingKey",void 0),d([f()],qe.prototype,"canListApps",void 0),d([f()],qe.prototype,"canListData",void 0),d([f()],qe.prototype,"canListPreProvisionedItems",void 0),d([f()],qe.prototype,"canProvisionDirectPurchase",void 0),d([f()],qe.prototype,"canSearchPublic",void 0),d([f()],qe.prototype,"canShareBingPublic",void 0),d([f()],qe.prototype,"canSharePublic",void 0),d([f()],qe.prototype,"canSignInArcGIS",void 0),d([f()],qe.prototype,"canSignInIDP",void 0),d([f()],qe.prototype,"colorSetsGroupQuery",void 0),d([f()],qe.prototype,"commentsEnabled",void 0),d([f({type:Date})],qe.prototype,"created",void 0),d([f()],qe.prototype,"credential",void 0),d([f()],qe.prototype,"culture",void 0),d([f()],qe.prototype,"currentVersion",void 0),d([f()],qe.prototype,"customBaseUrl",void 0),d([f()],qe.prototype,"default3DBasemapQuery",void 0),d([f()],qe.prototype,"defaultBasemap",void 0),d([je("defaultBasemap")],qe.prototype,"readDefaultBasemap",null),d([f()],qe.prototype,"defaultDevBasemap",void 0),d([je("defaultDevBasemap")],qe.prototype,"readDefaultDevBasemap",null),d([f({type:Yt})],qe.prototype,"defaultExtent",void 0),d([f()],qe.prototype,"defaultVectorBasemap",void 0),d([je("defaultVectorBasemap")],qe.prototype,"readDefaultVectorBasemap",null),d([f()],qe.prototype,"description",void 0),d([f()],qe.prototype,"devBasemapGalleryGroupQuery",void 0),d([f()],qe.prototype,"eueiEnabled",void 0),d([f({readOnly:!0})],qe.prototype,"extraQuery",null),d([f()],qe.prototype,"featuredGroups",void 0),d([f()],qe.prototype,"featuredItemsGroupQuery",void 0),d([f()],qe.prototype,"galleryTemplatesGroupQuery",void 0),d([f()],qe.prototype,"layoutGroupQuery",void 0),d([f()],qe.prototype,"livingAtlasGroupQuery",void 0),d([f({readOnly:!0})],qe.prototype,"hasAPIKey",null),d([f()],qe.prototype,"hasCategorySchema",void 0),d([f()],qe.prototype,"hasClassificationSchema",void 0),d([f()],qe.prototype,"helpBase",void 0),d([f()],qe.prototype,"helperServices",void 0),d([f()],qe.prototype,"helpMap",void 0),d([f()],qe.prototype,"homePageFeaturedContent",void 0),d([f()],qe.prototype,"homePageFeaturedContentCount",void 0),d([f()],qe.prototype,"httpPort",void 0),d([f()],qe.prototype,"httpsPort",void 0),d([f()],qe.prototype,"id",void 0),d([f()],qe.prototype,"ipCntryCode",void 0),d([f({readOnly:!0})],qe.prototype,"isOrganization",null),d([f()],qe.prototype,"isPortal",void 0),d([f()],qe.prototype,"isReadOnly",void 0),d([f({readOnly:!0})],qe.prototype,"itemPageUrl",null),d([f()],qe.prototype,"layerTemplatesGroupQuery",void 0),d([f()],qe.prototype,"maxTokenExpirationMinutes",void 0),d([f({type:Date})],qe.prototype,"modified",void 0),d([f()],qe.prototype,"name",void 0),d([f()],qe.prototype,"portalHostname",void 0),d([f()],qe.prototype,"portalMode",void 0),d([f()],qe.prototype,"portalProperties",void 0),d([f()],qe.prototype,"region",void 0),d([f()],qe.prototype,"recycleBinEnabled",void 0),d([f({readOnly:!0})],qe.prototype,"restUrl",null),d([f()],qe.prototype,"rotatorPanels",void 0),d([f()],qe.prototype,"showHomePageDescription",void 0),d([f()],qe.prototype,"sourceJSON",void 0),d([f()],qe.prototype,"staticImagesUrl",void 0),d([f({json:{name:"2DStylesGroupQuery"}})],qe.prototype,"stylesGroupQuery2d",void 0),d([f({json:{name:"stylesGroupQuery"}})],qe.prototype,"stylesGroupQuery3d",void 0),d([f()],qe.prototype,"supportsHostedServices",void 0),d([f()],qe.prototype,"symbolSetsGroupQuery",void 0),d([f()],qe.prototype,"templatesGroupQuery",void 0),d([f()],qe.prototype,"thumbnail",void 0),d([f({readOnly:!0})],qe.prototype,"thumbnailUrl",null),d([f()],qe.prototype,"units",void 0),d([f()],qe.prototype,"url",void 0),d([f()],qe.prototype,"urlKey",void 0),d([je("urlKey")],qe.prototype,"readUrlKey",null),d([f()],qe.prototype,"user",void 0),d([je("user")],qe.prototype,"readUser",null),d([f()],qe.prototype,"use3dBasemaps",void 0),d([f()],qe.prototype,"useDefault3dBasemap",void 0),d([f()],qe.prototype,"useStandardizedQuery",void 0),d([f()],qe.prototype,"useVectorBasemaps",void 0),d([f()],qe.prototype,"vectorBasemapGalleryGroupQuery",void 0),qe=Xl=d([V("esri.portal.Portal")],qe);const lne=new FinalizationRegistry(t=>{t.remove()});function T4e(t){const e=Rt;return()=>{const i=t.deref();i&&e.findCredential(i.restUrl)&&i.signIn().catch(()=>{})}}let Nf=class extends et{constructor(e){super(e),this.portalItem=null}normalizeCtorArgs(e){return e!=null&&e.portalItem&&e.path?{...e,path:cne(e.path,e.portalItem)}:e}set path(e){e!=null&&Pl(e)?Ie.getLogger(this).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",e)}_castPath(e){return cne(e,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get cdnUrl(){return this.portalItem&&this.path?`${this.portalItem.itemCdnUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(e="json",i){const r=this.cdnUrl;if(r==null)throw new ae("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(r,{responseType:e,query:{token:this.portalItem.apiKey,_ts:i!=null&&i.cacheBust?Date.now():null},signal:i==null?void 0:i.signal})}async update(e,i){const{addOrUpdateResources:r}=await de(()=>import("./resourceUtils-BEhOaxNn.js"),[]);return await r(this.portalItem,[{resource:this,content:e,compress:i==null?void 0:i.compress,access:i==null?void 0:i.access}],"update",i),this}hasPath(){return this.path!=null}};function cne(t,e){return t==null?t:(t=t.replace(/^\/+/,""),e!=null&&Pl(t)&&(t=XW(t,e.itemUrl)),t==null?void 0:t.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}d([f()],Nf.prototype,"portalItem",void 0),d([f({type:String,value:null})],Nf.prototype,"path",null),d([_i("path")],Nf.prototype,"_castPath",null),d([f({type:String,readOnly:!0})],Nf.prototype,"url",null),d([f({type:String,readOnly:!0})],Nf.prototype,"cdnUrl",null),d([f({type:String,readOnly:!0})],Nf.prototype,"itemRelativeUrl",null),Nf=d([V("esri.portal.PortalItemResource")],Nf);let D0=class extends et{constructor(e){super(e),this.created=null,this.rating=null}};d([f({type:Date})],D0.prototype,"created",void 0),d([f()],D0.prototype,"rating",void 0),D0=d([V("esri.portal.PortalRating")],D0);var Wb;const I4e=new Set(["3DTiles Service","CSV","Feature Collection","Feature Service","Feed","GeoJson","Group Layer","Image Service","KML","Knowledge Graph Layer","Map Service","Media Layer","Scene Service","Stream Service","Video Service","Vector Tile Service","WCS","WFS","WMS","WMTS"]),M4e=new Set(["KML","GeoJson","CSV"]);let Ot=Wb=class extends ig(w_){static from(t){return AT(Wb,t)}constructor(t){super(t),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.classification=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.isOrgItem=!1,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.sourceUrl=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}destroy(){this.portal=null}get displayName(){const t=this.type,e=this.typeKeywords||[];let i=t;return t==="Feature Service"||t==="Feature Collection"?i=e.includes("Table")?"Table":e.includes("Route Layer")?"Route Layer":e.includes("Markup")?"Markup":"Feature Layer":t==="Image Service"?i=e.includes("Elevation 3D Layer")?"Elevation Layer":e.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":t==="Scene Service"?i="Scene Layer":t==="Video Service"?i="Video Layer":t==="Scene Package"?i="Scene Layer Package":t==="Stream Service"?i="Feature Layer":t==="Geoprocessing Service"?i=e.includes("Web Tool")?"Tool":"Geoprocessing Service":t==="Geoenrichment Service"?i="GeoEnrichment Service":t==="Geocoding Service"?i="Locator":t==="Microsoft Powerpoint"?i="Microsoft PowerPoint":t==="GeoJson"?i="GeoJSON":t==="Globe Service"?i="Globe Layer":t==="Vector Tile Service"?i="Tile Layer":t==="netCDF"?i="NetCDF":t==="Map Service"?i=e.includes("Spatiotemporal")||!e.includes("Hosted Service")&&!e.includes("Tiled")||e.includes("Relational")?"Map Image Layer":"Tile Layer":t!=null&&t.toLowerCase().includes("add in")?i=t.replaceAll(/(add in)/gi,"Add-In"):t==="datastore catalog service"?i="Big Data File Share":t==="Compact Tile Package"?i="Tile Package (tpkx)":t==="Raster function template"?i="Raster Function Template":t==="OGCFeatureServer"?i="OGC Feature Layer":t==="web mapping application"&&e.includes("configurableApp")?i="Instant App":t==="Insights Page"?i="Insights Report":t==="Excalibur Imagery Project"?i="Excalibur Project":t==="3DTiles Service"?i="3D tiles layer":t==="3DTiles Package"&&(i="3D tiles package"),i}readExtent(t){return t&&t.length?new Yt(t[0][0],t[0][1],t[1][0],t[1][1]):null}get iconUrl(){var v;const t=((v=this.type)==null?void 0:v.toLowerCase())||"",e=this.typeKeywords||[],i="esri/images/portal/",r="16";let n,s=!1,a=!1,o=!1,l=!1,c=!1,h=!1,m=!1,g=!1;return t.indexOf("service")>0||t==="feature collection"||t==="kml"||t==="wms"||t==="wmts"||t==="wfs"?(s=e.includes("Hosted Service"),t==="feature service"||t==="feature collection"||t==="kml"||t==="wfs"?(a=e.includes("Table"),o=e.includes("Route Layer"),l=e.includes("Markup"),c=e.includes("Spatiotemporal"),h=e.includes("UtilityNetwork"),n=c&&a?"spatiotemporaltable":a?"table":o?"routelayer":l?"markup":c?"spatiotemporal":h?"utilitynetwork":s?"featureshosted":"features"):t==="map service"||t==="wms"||t==="wmts"?(c=e.includes("Spatiotemporal"),m=e.includes("Relational"),n=c||m?"mapimages":s||e.includes("Tiled")||t==="wmts"?"maptiles":"mapimages"):n=t==="scene service"?e.includes("Line")?"sceneweblayerline":e.includes("3DObject")?"sceneweblayermultipatch":e.includes("Point")?"sceneweblayerpoint":e.includes("IntegratedMesh")?"sceneweblayermesh":e.includes("PointCloud")?"sceneweblayerpointcloud":e.includes("Polygon")?"sceneweblayerpolygon":e.includes("Building")?"sceneweblayerbuilding":e.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":t==="image service"?e.includes("Elevation 3D Layer")?"elevationlayer":e.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":t==="stream service"?"streamlayer":t==="vector tile service"?"vectortile":t==="datastore catalog service"?"datastorecollection":t==="geocoding service"?"geocodeservice":t==="video service"?e.includes("Live Stream")?"livestreamvideolayer":"videolayer":t==="geoprocessing service"?e.includes("Web Tool")?"tool":"layers":t==="geodata service"?"geodataservice":t==="3dtiles service"?e.includes("3DObject")?"3dobjecttileslayer":e.includes("IntegratedMesh")?"integratedmeshtileslayer":e.includes("GaussianSplat")?"gaussiansplatlayer":"3dtileslayer":"layers"):t==="web map"||t==="cityengine web scene"?n="maps":t==="web scene"?n=e.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":t==="web mapping application"&&e.includes("configurableApp")?n="instantapps":t==="web mapping application"||t==="mobile application"||t==="application"||t==="operation view"||t==="desktop application"?n="apps":t==="map document"||t==="map package"||t==="published map"||t==="scene document"||t==="globe document"||t==="basemap package"||t==="mobile basemap package"||t==="mobile map package"||t==="project package"||t==="project template"||t==="pro map"||t==="layout"||t==="layer"&&e.includes("ArcGIS Pro")||t==="explorer map"&&e.indexOf("Explorer Document")?n="mapsgray":t==="service definition"||t==="shapefile"||t==="cad drawing"||t==="geojson"||t==="netcdf"||t==="administrative report"?n="datafiles":t==="360 vr experience"?n="360vr":t==="explorer add in"||t==="desktop add in"||t==="windows viewer add in"||t==="windows viewer configuration"?n="appsgray":t==="arcgis pro add in"||t==="arcgis pro configuration"?n="addindesktop":t==="pdf"?n="pdf":t==="microsoft word"?n="word":t==="microsoft excel"?n="excel":t==="microsoft powerpoint"?n="ppt":t==="rule package"||t==="file geodatabase"||t==="sqlite geodatabase"||t==="csv collection"||t==="kml collection"||t==="windows mobile package"||t==="map template"||t==="desktop application template"||t==="gml"||t==="arcpad package"||t==="code sample"||t==="document link"||t==="earth configuration"||t==="operations dashboard add in"||t==="rules package"||t==="workflow manager package"||t==="explorer map"&&e.includes("Explorer Mapping Application")||e.includes("Document")?n="datafilesgray":t==="network analysis service"||t==="geoprocessing service"||t==="geodata service"||t==="geometry service"||t==="geoprocessing package"||t==="locator package"||t==="geoprocessing sample"||t==="workflow manager service"?n="toolsgray":t==="layer"||t==="layer package"||t==="explorer layer"?n="layersgray":t==="analysis model"?n="analysismodel":t==="scene package"?n="scenepackage":t==="3dtiles package"?n="3dtileslayerpackage":t==="3dtiles service"?n="3dtileslayer":t==="mobile scene package"?n="mobilescenepackage":t==="tile package"||t==="compact tile package"?n="tilepackage":t==="task file"?n="taskfile":t==="report template"?n="report-template":t==="statistical data collection"?n="statisticaldatacollection":t==="insights workbook"?n="workbook":t==="insights model"?n="insightsmodel":t==="insights page"?n="insightspage":t==="insights theme"?n="insightstheme":t==="hub initiative"?n="hubinitiative":t==="hub page"?n="hubpage":t==="hub site application"?n="hubsite":t==="hub event"?n="hubevent":t==="hub project"?n="hubproject":t==="relational database connection"?n="relationaldatabaseconnection":t==="big data file share"?n="datastorecollection":t==="image collection"?n="imagecollection":t==="desktop style"?n="desktopstyle":t==="style"?n=e.includes("Dictionary")?"dictionarystyle":"style":t==="dashboard"?n="dashboard":t==="raster function template"?n="rasterprocessingtemplate":t==="vector tile package"?n="vectortilepackage":t==="ortho mapping project"?n="orthomappingproject":t==="ortho mapping template"?n="orthomappingtemplate":t==="solution"?n="solutions":t==="geopackage"?n="geopackage":t==="deep learning package"?n="deeplearningpackage":t==="real time analytic"?n="realtimeanalytics":t==="reality mapping project"?n="realitymappingproject":t==="big data analytic"?n="bigdataanalytics":t==="feed"?n="feed":t==="excalibur imagery project"?n="excaliburimageryproject":t==="notebook"?n="notebook":t==="storymap"?n="storymap":t==="survey123 add in"?n="survey123addin":t==="mission"?n="mission":t==="mission report"?n="missionreport":t==="mission template"?n="missiontemplate":t==="quickcapture project"?n="quickcaptureproject":t==="pro report"?n="proreport":t==="pro report template"?n="proreporttemplate":t==="urban model"?n="urbanmodel":t==="urban project"?n="urbanproject":t==="web experience"?n="experiencebuilder":t==="web experience template"?n="webexperiencetemplate":t==="experience builder widget"?n="experiencebuilderwidget":t==="experience builder widget package"?n="experiencebuilderwidgetpackage":t==="workflow"?n="workflow":t==="kernel gateway connection"?n="kernelgatewayconnection":t==="insights script"?n="insightsscript":t==="hub initiative template"?n="hubinitiativetemplate":t==="storymap theme"?n="storymaptheme":t==="knowledge graph"?n="knowledgegraph":t==="knowledge graph layer"?n="knowledgegraphlayer":t==="knowledge studio project"?n="knowledgestudio":t==="native application"?n="nativeapp":t==="native application installer"?n="nativeappinstaller":t==="web link chart"?n="linkchart":t==="knowledge graph web investigation"?n="investigation":t==="ogcfeatureserver"?n="features":t==="pro presentation"?n="propresentation":t==="pro project"?n="proproject":t==="insights workbook package"?n="insightsworkbookpackage":t==="apache parquet"?n="apacheparquet":t==="notebook code snippet library"?n="notebookcodesnippets":t==="suitability model"?n="suitabilitymodel":t==="esri classifier definition"?n="classifierdefinition":t==="esri classification schema"?n="classificationschema":t==="insights data engineering workbook"?n="dataengineeringworkbook":t==="insights data engineering model"?n="dataengineeringmodel":t==="deep learning studio project"?n="deeplearningproject":t==="discussion"?n="discussion":t==="allsource project"?n="allsourceproject":t==="api key"?n="apikey":t==="data pipeline"?n="datapipelines":t==="group layer"?(g=e.includes("Map"),n=g?"layergroup2d":"layergroup"):n=t==="media layer"?"onlinemedialayer":t==="form"?e.includes("Survey123")?"survey":"datafilesgray":t==="csv"?"csv":t==="image"?"image":t==="xr experience"?"xrexperience":"maps",n?Hr(i+n+r+".png"):null}get isLayer(){return this.type!=null&&I4e.has(this.type)}get itemCdnUrl(){return iZ(this.itemUrl)}get itemPageUrl(){var e;const t=(e=this.portal)==null?void 0:e.itemPageUrl;return t&&this.id?`${t}?id=${this.id}`:null}get itemUrl(){var e;const t=(e=this.portal)==null?void 0:e.restUrl;return t&&this.id?`${t}/content/items/${this.id}`:null}get loaded(){return super.loaded}get thumbnailUrl(){var i;const t=this.itemUrl,e=this.thumbnail;return t&&e?((i=this.portal)==null?void 0:i.normalizeUrl(`${t}/info/${e}?f=json`))??null:null}get userItemUrl(){var i,r,n;const t=(i=this.portal)==null?void 0:i.restUrl;if(!t)return null;const e=this.owner||((n=(r=this.portal)==null?void 0:r.user)==null?void 0:n.id);return e?`${t}/content/users/${this.ownerFolder?`${e}/${this.ownerFolder}`:e}/items/${this.id}`:null}load(t){const e=this.portal??(this.portal=qe.getDefault()),i=e.load(t).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?e.request(this.itemUrl,{signal:t!=null?t.signal:null,query:{token:this.apiKey}}):{}).then(r=>{this.sourceJSON=r,this.read(r)});return this.addResolvingPromise(i),Promise.resolve(this)}async addRating(t){const e={method:"post",query:{}},i=t instanceof D0?t.rating:t;return i==null||isNaN(i)||typeof t!="number"||(e.query.rating=i),this.portal?(await this.portal.request(this.itemUrl+"/addRating",e),new D0({rating:i,created:new Date})):null}clone(){const t={access:this.access,accessInformation:this.accessInformation,applicationProxies:he(this.applicationProxies),avgRating:this.avgRating,categories:he(this.categories),classification:he(this.classification),created:he(this.created),culture:this.culture,description:this.description,extent:he(this.extent),groupCategories:he(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:he(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:he(this.screenshots),size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:he(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:he(this.typeKeywords),url:this.url};this.loaded&&(t.loadStatus="loaded");const e=new Wb({sourceJSON:this.sourceJSON}).set(t);return e._set("isOrgItem",this.isOrgItem),e}createPostQuery(){var e;const t=this.toJSON();for(const i of["tags","typeKeywords","categories"])t[i]=(e=t[i])==null?void 0:e.join(", ");for(const i of["extent","classification"]){const r=t[i];r&&(t[i]=JSON.stringify(r))}return t}async deleteRating(){await this.portal.request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(t="json",e){return this.portal.request(this.itemUrl+"/data",{responseType:t,...e,query:{token:this.apiKey}})}async fetchRating(t){const e=await this.portal.request(this.itemUrl+"/rating",{query:{token:this.apiKey},...t});return e.rating!=null?(e.created=new Date(e.created),new D0(e)):null}fetchRelatedItems(t,e){return this.portal.requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...t,token:this.apiKey},...e},Wb)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}reload(){return this.portal.request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then(t=>(this.applicationProxies&&!Object.hasOwn(t,"appProxies")&&(this.applicationProxies=null),this.sourceJSON=t,this.read(t),this))}update(t){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const e=t==null?void 0:t.data,i={method:"post"};i.query=this.createPostQuery();for(const r in i.query)i.query[r]===null&&(i.query[r]="");return i.query.clearEmptyFields=!0,e!=null&&(typeof e=="string"?i.query.text=e:typeof e=="object"&&(i.query.text=JSON.stringify(e))),this.portal.request(`${this.userItemUrl}/update`,i).then(()=>this.reload())}):Promise.reject(new ae("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async copy(t){if(!this.id)throw new ae("portal:item-does-not-exist","The item does not exist yet");await this.load();const{portal:e,itemUrl:i}=this;await e.signIn();const{copyResources:r,folder:n,tags:s,title:a}=t||{},o={method:"post",query:{copyPrivateResources:r==="all",folder:typeof n=="string"?n:n==null?void 0:n.id,includeResources:!!r,tags:s==null?void 0:s.join(","),title:a}},{itemId:l}=await e.request(`${i}/copy`,o);return new Wb({id:l,portal:e})}updateThumbnail(t){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const e=t.thumbnail,i=t.filename,r={method:"post"};if(typeof e=="string")rg(e)?r.query={data:e}:r.query={url:El(e)},i!=null&&(r.query.filename=i);else{const n=new FormData;i!=null?n.append("file",e,i):n.append("file",e),r.body=n}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,r).then(()=>this.reload())}):Promise.reject(new ae("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(t={},e){const{fetchResources:i}=await de(()=>import("./resourceUtils-BEhOaxNn.js"),[]);return i(this,t,e)}async addResource(t,e,i){const{addOrUpdateResources:r}=await de(()=>import("./resourceUtils-BEhOaxNn.js"),[]);return t.portalItem=this,await r(this,[{resource:t,content:e,compress:i==null?void 0:i.compress,access:i==null?void 0:i.access}],"add",i),t}async removeResource(t,e){const{removeResource:i}=await de(()=>import("./resourceUtils-BEhOaxNn.js"),[]);if(t.portalItem&&t.portalItem.itemUrl!==this.itemUrl)throw new ae("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return i(this,t,e)}async removeAllResources(t){const{removeAllResources:e}=await de(()=>import("./resourceUtils-BEhOaxNn.js"),[]);return e(this,t)}resourceFromPath(t){return new Nf({portalItem:this,path:t})}toJSON(){var i,r;const t=this.extent,e={accessInformation:this.accessInformation,categories:he(this.categories),classification:he(this.classification),created:(i=this.created)==null?void 0:i.getTime(),description:this.description,extent:t&&[[t.xmin,t.ymin],[t.xmax,t.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:(r=this.modified)==null?void 0:r.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:he(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:he(this.typeKeywords),url:this.url};return nAe(e)}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");return new Wb({sourceJSON:t})}_getPostQuery(){const t=this.toJSON();for(const e in t)e==="tags"&&t[e]!==null&&(t[e]=t[e].join(", ")),e==="typeKeywords"&&t[e]!==null&&(t[e]=t[e].join(", ")),e==="extent"&&t[e]&&(t[e]=JSON.stringify(t[e]));return t}};d([f({type:["private","shared","org","public"]})],Ot.prototype,"access",void 0),d([f()],Ot.prototype,"accessInformation",void 0),d([f({type:String})],Ot.prototype,"apiKey",void 0),d([f({json:{read:{source:"appProxies"}}})],Ot.prototype,"applicationProxies",void 0),d([f()],Ot.prototype,"avgRating",void 0),d([f()],Ot.prototype,"categories",void 0),d([f()],Ot.prototype,"classification",void 0),d([f({type:Date})],Ot.prototype,"created",void 0),d([f()],Ot.prototype,"culture",void 0),d([f()],Ot.prototype,"description",void 0),d([f({readOnly:!0})],Ot.prototype,"displayName",null),d([f({type:Yt})],Ot.prototype,"extent",void 0),d([je("extent")],Ot.prototype,"readExtent",null),d([f()],Ot.prototype,"groupCategories",void 0),d([f({readOnly:!0})],Ot.prototype,"iconUrl",null),d([f()],Ot.prototype,"id",void 0),d([f({readOnly:!0})],Ot.prototype,"isLayer",null),d([f({type:Boolean,readOnly:!0})],Ot.prototype,"isOrgItem",void 0),d([f()],Ot.prototype,"itemControl",void 0),d([f({readOnly:!0})],Ot.prototype,"itemPageUrl",null),d([f({readOnly:!0})],Ot.prototype,"itemUrl",null),d([f()],Ot.prototype,"licenseInfo",void 0),d([f({type:Date})],Ot.prototype,"modified",void 0),d([f()],Ot.prototype,"name",void 0),d([f()],Ot.prototype,"numComments",void 0),d([f()],Ot.prototype,"numRatings",void 0),d([f()],Ot.prototype,"numViews",void 0),d([f()],Ot.prototype,"owner",void 0),d([f()],Ot.prototype,"ownerFolder",void 0),d([f({type:qe})],Ot.prototype,"portal",void 0),d([f()],Ot.prototype,"screenshots",void 0),d([f()],Ot.prototype,"size",void 0),d([f()],Ot.prototype,"snippet",void 0),d([f()],Ot.prototype,"sourceJSON",void 0),d([f({type:String})],Ot.prototype,"sourceUrl",void 0),d([f({type:String})],Ot.prototype,"spatialReference",void 0),d([f()],Ot.prototype,"tags",void 0),d([f()],Ot.prototype,"thumbnail",void 0),d([f({readOnly:!0})],Ot.prototype,"thumbnailUrl",null),d([f()],Ot.prototype,"title",void 0),d([f()],Ot.prototype,"type",void 0),d([f()],Ot.prototype,"typeKeywords",void 0),d([f({type:String,json:{read(t,e){var i;if(M4e.has(e.type)){const r=(i=this.portal)==null?void 0:i.restUrl;t||(t=r&&this.id?`${r}/content/items/${this.id}/data`:null)}return t}}})],Ot.prototype,"url",void 0),d([f({readOnly:!0})],Ot.prototype,"userItemUrl",null),Ot=Wb=d([V("esri.portal.PortalItem")],Ot);const Cve=Object.freeze(Object.defineProperty({__proto__:null,get default(){return Ot}},Symbol.toStringTag,{value:"Module"}));async function C4e(t){if(!t)return;const e=t.includes("-vector")?t.slice(0,t.indexOf("-vector")):t.includes("-3d")?t.slice(0,t.indexOf("-3d")):t,i=await kye("esri/t9n/basemaps");return i[t]||i[e]}const u9={satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return Hr("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return Hr("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return Hr("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-hillshade",url:"https://services.arcgisonline.com/ArcGIS/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1},{id:"terrain-base",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/33064a20de0c48d2bb61efa8faca93a8/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Terrain Base"},{id:"terrain-reference",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/14fbc125ccc9488888b014db09f35f67/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Reference Reference",isReference:!0}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return Hr("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/94329802cbfa44a18f423e6f1a0b875c/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return Hr("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return Hr("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get"dark-gray"(){return{...this["dark-gray-vector"],id:"dark-gray"}},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return Hr("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get gray(){return{...this["gray-vector"],id:"gray"}},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return Hr("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},get streets(){return{...this["streets-vector"],id:"streets"}},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return Hr("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},get topo(){return{...this["topo-vector"],id:"topo"}},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return Hr("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return Hr("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return Hr("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"topo-3d":{id:"topo-3d",is3d:!0,get thumbnailUrl(){return Hr("esri/images/basemap/topo-3d.png")},baseMapLayers:[{id:"topo-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/1e7d1784d1ef4b79ba6764d0bd6c3150/resources/styles/root.json",layerType:"VectorTileLayer",title:"Topographic",visibility:!0,opacity:1},{id:"topo-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Open3D_Trees_v1/SceneServer",itemId:"9d3d89d42cfe4e2c9d108a2f0d518406",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]},"navigation-3d":{id:"navigation-3d",is3d:!0,get thumbnailUrl(){return Hr("esri/images/basemap/navigation-3d.jpg")},baseMapLayers:[{id:"navigation-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/ccc904ff872b4144b94934e55e32784b/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation",visibility:!0,opacity:1},{id:"navigation-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]},"streets-3d":{id:"streets-3d",is3d:!0,get thumbnailUrl(){return Hr("esri/images/basemap/streets-3d.png")},baseMapLayers:[{id:"streets-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/198298c4c64c4cb19de5b46aa00c198d/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"streets-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"streets-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]},"osm-3d":{id:"osm-3d",is3d:!0,get thumbnailUrl(){return Hr("esri/images/basemap/osm-3d.png")},baseMapLayers:[{id:"osm-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/8628d259c9d14bdc848771c23c513940/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap",visibility:!0,opacity:1},{id:"osm-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Open3D_Trees_v1/SceneServer",itemId:"9d3d89d42cfe4e2c9d108a2f0d518406",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Open3D_Buildings_v1/SceneServer",itemId:"cd33b09dde0a419c986ca1a78a5fc06d",layerType:"ArcGISSceneServiceLayer"}]},"gray-3d":{id:"gray-3d",is3d:!0,get thumbnailUrl(){return Hr("esri/images/basemap/gray-3d.png")},baseMapLayers:[{id:"gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/01a14b466345455ba4176d2e6390db92/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]},"navigation-dark-3d":{id:"navigation-dark-3d",itemId:"5a1365328b4943f09a54cf5fd1205707",is3d:!0,baseMapLayers:[{id:"navigation-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/451a1777ab3f4bf095fae24a117439d9/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation Dark"},{id:"navigation-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]},"streets-dark-3d":{id:"streets-dark-3d",itemId:"8a4efa2c20484ec9b4557895e65736ff",is3d:!0,baseMapLayers:[{id:"streets-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/bc599b6d741a4ac084b7eea7bf8c5938/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Streets Night (for 3D)"},{id:"streets-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"streets-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]},"dark-gray-3d":{id:"dark-gray-3d",itemId:"a8b7322a5fe94002bb0f5e0eeb0c5c18",is3d:!0,baseMapLayers:[{id:"dark-gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/4178f71acb934fb89f169e7d667c20c6/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Dark Gray Canvas (for 3D)"},{id:"dark-gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"dark-gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]}};let Df=class extends et{constructor(e){super(e),this.apiKey=null,this.id=null,this.language=null,this.places=null,this.serviceUrl="https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2",this.worldview=null}get languageParameter(){const e=this.language;let i=e==="local"||e==="global"?e:Aye(e??Ol())??"global";return i=i==="no"?"nb":i,i}};d([f()],Df.prototype,"apiKey",void 0),d([f()],Df.prototype,"id",void 0),d([f()],Df.prototype,"language",void 0),d([f()],Df.prototype,"places",void 0),d([f()],Df.prototype,"serviceUrl",void 0),d([f()],Df.prototype,"worldview",void 0),Df=d([V("esri.support.BasemapStyle")],Df);const E4e=Df,Eve=Symbol("BasemapInstance");function b$t(t){return t!=null&&typeof t=="object"&&Eve in t}let kve=0;const __=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+kve++})}};return i=d([V("esri.core.Identifiable")],i),i},eY=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:kve++})}};return i=d([V("esri.core.Identifiable.NumericIdentifiable")],i),i};__(class{});async function k4e(t){var r;const e="portalItem"in t?t:{portalItem:t},{fromItem:i}=await de(async()=>{const{fromItem:n}=await import("./portalLayers-Cua1NVN6.js");return{fromItem:n}},__vite__mapDeps([137,138,139,140,141]));try{return await i(e)}catch(n){const s=e==null?void 0:e.portalItem,a=(s==null?void 0:s.id)||"unset",o=((r=s==null?void 0:s.portal)==null?void 0:r.url)||Ti.portalUrl;throw Ie.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+o+"', id: '"+a+"')",n),n}}const d9={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8};function l6(t,e,i,r=Rl){const n=new zl(jZ(r)),s=ut.fromJSDate(t,{zone:n}),a=i==="decades"||i==="centuries"?"year":Pve(i);return i==="decades"&&(e*=10),i==="centuries"&&(e*=100),s.plus({[a]:e}).toJSDate()}function w$t(t,e,i="milliseconds"){const r=t.getTime(),n=Ave(e,i,"milliseconds");return new Date(r+n)}function une(t,e,i=Rl){const r=new zl(jZ(i)),n=ut.fromJSDate(t,{zone:r});if(e==="decades"||e==="centuries"){const a=n.startOf("year"),{year:o}=a,l=o-o%(e==="decades"?10:100);return a.set({year:l}).toJSDate()}const s=Pve(e);return n.startOf(s).toJSDate()}function Ave(t,e,i){return t===0?0:t*d9[e]/d9[i]}function _$t(t,e){return t&&e?t.intersection(e):t||e}function Pve(t){switch(t){case"milliseconds":return"millisecond";case"seconds":return"second";case"minutes":return"minute";case"hours":return"hour";case"days":return"day";case"weeks":return"week";case"months":return"month";case"years":return"year"}}var Gc,yS;let Ji=(yS=class extends $e{static get allTime(){return dne}static get empty(){return A4e}static fromArray(e){return new Gc({start:e[0]!=null?new Date(e[0]):e[0],end:e[1]!=null?new Date(e[1]):e[1]})}constructor(e){super(e),this.end=null,this.start=null}readEnd(e,i){return i.end!=null?new Date(i.end):null}writeEnd(e,i){i.end=(e==null?void 0:e.getTime())??null}get isAllTime(){return this.equals(Gc.allTime)}get isEmpty(){return this.equals(Gc.empty)}readStart(e,i){return i.start!=null?new Date(i.start):null}writeStart(e,i){i.start=(e==null?void 0:e.getTime())??null}clone(){return new Gc({end:this.end,start:this.start})}equals(e){var a,o,l,c;if(!e)return!1;const i=((a=this.start)==null?void 0:a.getTime())??this.start,r=((o=this.end)==null?void 0:o.getTime())??this.end,n=((l=e.start)==null?void 0:l.getTime())??e.start,s=((c=e.end)==null?void 0:c.getTime())??e.end;return i===n&&r===s}expandTo(e,i=Rl){if(this.isEmpty||this.isAllTime)return this.clone();let r=this.start;r&&(r=une(r,e,i));let n=this.end;if(n){const s=une(n,e,i);n=n.getTime()===s.getTime()?s:l6(s,1,e,i)}return new Gc({start:r,end:n})}intersection(e){var l,c,h,m;if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return Gc.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const i=((l=this.start)==null?void 0:l.getTime())??-1/0,r=((c=this.end)==null?void 0:c.getTime())??1/0,n=((h=e.start)==null?void 0:h.getTime())??-1/0,s=((m=e.end)==null?void 0:m.getTime())??1/0;let a,o;return n>=i&&n<=r?a=n:i>=n&&i<=s&&(a=i),r>=n&&r<=s?o=r:s>=i&&s<=r&&(o=s),a==null||o==null||isNaN(a)||isNaN(o)?Gc.empty:new Gc({start:a===-1/0?null:new Date(a),end:o===1/0?null:new Date(o)})}offset(e,i,r=Rl){if(this.isEmpty||this.isAllTime)return this.clone();const n=new Gc,{start:s,end:a}=this;return s!=null&&(n.start=l6(s,e,i,r)),a!=null&&(n.end=l6(a,e,i,r)),n}toArray(){var e,i;return this.isEmpty?[void 0,void 0]:[((e=this.start)==null?void 0:e.getTime())??null,((i=this.end)==null?void 0:i.getTime())??null]}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return dne.clone();const i=this.start!=null&&e.start!=null?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,r=this.end!=null&&e.end!=null?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new Gc({start:i,end:r})}},Gc=yS,yS);d([f({type:Date,json:{write:{allowNull:!0}}})],Ji.prototype,"end",void 0),d([je("end")],Ji.prototype,"readEnd",null),d([Ge("end")],Ji.prototype,"writeEnd",null),d([f({readOnly:!0,json:{read:!1}})],Ji.prototype,"isAllTime",null),d([f({readOnly:!0,json:{read:!1}})],Ji.prototype,"isEmpty",null),d([f({type:Date,json:{write:{allowNull:!0}}})],Ji.prototype,"start",void 0),d([je("start")],Ji.prototype,"readStart",null),d([Ge("start")],Ji.prototype,"writeStart",null),Ji=Gc=d([V("esri.time.TimeExtent")],Ji);const dne=new Ji,A4e=new Ji({start:void 0,end:void 0});let P4e=0,Kr=class extends PD(__(w_)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new Yt(-180,-90,180,90,tt.WGS84),this.id=Date.now().toString(16)+"-layer-"+P4e++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.persistenceEnabled=!1,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=tt.WGS84,this.title=null,this.type=null,this.url=null,this.visibilityTimeExtent=null,this.visible=!0}static async fromArcGISServerUrl(e){const i=typeof e=="string"?{url:e}:e;return(await de(async()=>{const{fromUrl:r}=await import("./arcgisLayers-DXB-kwmK.js");return{fromUrl:r}},__vite__mapDeps([142,138,139,141]))).fromUrl(i)}static fromPortalItem(e){return k4e(e)}initialize(){this.when().catch(e=>{In(e)||Ie.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:e})})}destroy(){var i;const{parent:e}=this;e&&(this.parent=null,(i=e.removeChildLayer)==null||i.call(e,this))}get effectiveVisible(){var e;return this.visible&&(((e=this.parent)==null?void 0:e.effectiveVisible)??!0)}get hasAttributionData(){return this.attributionDataUrl!=null}get loaded(){return super.loaded}removeFromParent(){var i;const{parent:e}=this;e&&((i=e.removeChildLayer)==null||i.call(e,this),this.parent=null)}get parsedUrl(){return Cn(this.url)}createLayerView(e,i){return Promise.reject(new ae("layer:create-layer-view","Layer does not support creating a layer view"))}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await mi(e,{query:{f:"json"},responseType:"json"})).data;throw new ae("layer:no-attribution-data","Layer does not have attribution data")}};d([f({type:String})],Kr.prototype,"attributionDataUrl",void 0),d([f({readOnly:!0})],Kr.prototype,"effectiveVisible",null),d([f({type:Yt})],Kr.prototype,"fullExtent",void 0),d([f({readOnly:!0})],Kr.prototype,"hasAttributionData",null),d([f({type:String,clonable:!1})],Kr.prototype,"id",void 0),d([f({type:Boolean,nonNullable:!0})],Kr.prototype,"legendEnabled",void 0),d([f({type:["show","hide","hide-children"]})],Kr.prototype,"listMode",void 0),d([f({type:Number,range:{min:0,max:1},nonNullable:!0})],Kr.prototype,"opacity",void 0),d([f({clonable:!1})],Kr.prototype,"parent",void 0),d([f({readOnly:!0})],Kr.prototype,"parsedUrl",null),d([f({type:Boolean,readOnly:!0})],Kr.prototype,"persistenceEnabled",void 0),d([f({type:Boolean})],Kr.prototype,"popupEnabled",void 0),d([f({type:Boolean})],Kr.prototype,"attributionVisible",void 0),d([f({type:tt})],Kr.prototype,"spatialReference",void 0),d([f({type:String})],Kr.prototype,"title",void 0),d([f({readOnly:!0,json:{read:!1}})],Kr.prototype,"type",void 0),d([f()],Kr.prototype,"url",void 0),d([f({type:Ji})],Kr.prototype,"visibilityTimeExtent",void 0),d([f({type:Boolean,nonNullable:!0})],Kr.prototype,"visible",void 0),Kr=d([V("esri.layers.Layer")],Kr);const nO=new WeakMap;function tY(t){return!t.destroyed&&(nO.has(t)||t.addHandles([be(()=>{const{parent:e}=t;return!!(e&&e instanceof Kr)&&(e.type==="catalog-dynamic-group"||tY(e))},e=>nO.set(t,e),Ka),Ii(()=>nO.delete(t))]),nO.get(t))}function iY(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="feature"}function $$t(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="graphics"}function O4e(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="map-image"}function L4e(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="knowledge-graph"&&"layers"in t}function S$t(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="knowledge-graph-sublayer"}function h9(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="subtype-group"&&"sublayers"in t}function Hh(t){return(t==null?void 0:t.type)==="subtype-sublayer"}const T$t={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};function p9(t){const e=t==null?void 0:t.type;return e==="building-scene"||e==="integrated-mesh"||e==="point-cloud"||e==="scene"}function I$t(t){return t.type==="integrated-mesh"||t.type==="integrated-mesh-3dtiles"}function GD(t){var e;return(t==null?void 0:t.type)==="feature"&&!t.url&&((e=t.source)==null?void 0:e.type)==="memory"}function M$t(t){var i;const e=t==null?void 0:t.type;return(e==="feature"||e==="subtype-group"||e==="oriented-imagery")&&((i=t==null?void 0:t.source)==null?void 0:i.type)==="feature-layer"}function F4e(t){var e;return(t==null?void 0:t.type)==="feature"&&((e=t.source)==null?void 0:e.type)==="feature-layer"}function WT(t){return iY(t)&&F4e(t)}async function rY(t,e){const i=Rt==null?void 0:Rt.findServerInfo(t);if((i==null?void 0:i.currentVersion)!=null)return i.owningSystemUrl||null;const r=t.toLowerCase().indexOf("/rest/services");if(r===-1)return null;const n=`${t.slice(0,r)}/rest/info`,s=e!=null?e.signal:null,{data:a}=await mi(n,{query:{f:"json"},responseType:"json",signal:s});return(a==null?void 0:a.owningSystemUrl)||null}function Ove(t){if(!("capabilities"in t))return!1;switch(t.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"imagery":case"knowledge-graph-sublayer":case"ogc-feature":case"oriented-imagery":case"scene":case"sublayer":case"subtype-group":case"subtype-sublayer":case"wfs":return!0;default:return!1}}function Lve(t){return Ove(t)?"effectiveCapabilities"in t?t.effectiveCapabilities:t.capabilities:null}function R4e(t){if(!("editingEnabled"in t))return!1;switch(t.type){case"csv":case"feature":case"geojson":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":case"knowledge-graph-sublayer":return!0;default:return!1}}function z4e(t){return!!R4e(t)&&("effectiveEditingEnabled"in t?t.effectiveEditingEnabled:t.editingEnabled)}function C$t(t){const e=new Ue;for(const i of t.allLayers.concat(t.allTables))i.type==="csv"||tY(i)||("charts"in i&&e.push(i),i.type==="subtype-group"&&e.push(...i.sublayers));return e}function N4e(t,e){return null}function E$t(t){return null}function f9(t){return!t||t.type==="Feature Service"&&!t.sourceUrl}function k$t(t,e){!e||!f9(t)||N4e(t.url)}const D4e=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wcs","wms","wmts"]),j4e=new Set(["integrated-mesh-3dtiles"]),Fve=new Set(["catalog","csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","knowledge-graph","map-image","map-notes","media","ogc-feature","oriented-imagery","route","stream","subtype-group","tile","unknown","unsupported","vector-tile","video","web-tile","wcs","wfs","wms","wmts"]),V4e=new Set([...Fve,"link-chart"]);function U4e(t){switch(t.layerContainerType){case"basemap-base-layers":return D4e;case"basemap-ground-layers":return j4e;case"operational-layers":return t.origin==="link-chart"?V4e:Fve;default:return null}}function B4e(t,e){if(e.restrictedWebMapWriting){const i=U4e(e);return i==null||i.has(t.type)&&!GD(t)}return!0}function q4e(t,e){var i;if(e)if(GD(t)){const r=$k("featureCollection.layers",e),n=(i=r==null?void 0:r[0])==null?void 0:i.layerDefinition;n&&hne(t,n)}else t.type!=="group"&&hne(t,e)}function hne(t,e){"maxScale"in t&&(e.maxScale=sR(t.maxScale)??void 0),"minScale"in t&&(e.minScale=sR(t.minScale)??void 0)}function H4e(t,e){if(q4e(t,e),e&&(e.id=t.id,"blendMode"in t&&(e.blendMode=t.blendMode,e.blendMode==="normal"&&delete e.blendMode),e.opacity=sR(t.opacity)??void 0,e.title=t.title||"Layer",e.visibility=t.visible,"legendEnabled"in t&&t.type!=="wmts"))if(GD(t)){const i=e.featureCollection;i&&(i.showLegend=t.legendEnabled)}else e.showLegend=t.legendEnabled}function oL(t,e,i){if(!t.persistenceEnabled)return null;if(!("write"in t)||!t.write)return i!=null&&i.messages&&i.messages.push(new ae("layer:unsupported",`Layers (${t.title}, ${t.id}) of type '${t.declaredClass}' cannot be persisted`,{layer:t})),null;if(GD(t)&&!t.isTable)e=t.resourceInfo;else if(B4e(t,i)){const r={};return t.write(r,i)?r:null}return e!=null&&H4e(t,e=he(e)),e}var pne,hx,mw;let ul=(mw=class extends ig(w_){constructor(e){super(e),this[pne]=!0,this.id=null,this.portalItem=null,this.spatialReference=null,this.style=null,this.thumbnailUrl=null,this.title="Basemap",this.type="Basemap",this.id=Date.now().toString(16)+"-basemap-"+hx.idCounter++,this.baseLayers=new Ue,this.referenceLayers=new Ue,this.groundLayers=new Ue;const i=o=>{var c;const{parent:l}=o;l&&l!==this&&"remove"in l&&((c=l.remove)==null||c.call(l,o)),o.parent=this,o.type!=="elevation"&&o.type!=="integrated-mesh-3dtiles"||Ie.getLogger(this).error(`Layer '${o.title}, id:${o.id}' of type '${o.type}' is not supported as a basemap layer and will therefore be ignored.`)},r=o=>{var c;const{parent:l}=o;l&&l!==this&&"remove"in l&&((c=l.remove)==null||c.call(l,o)),o.parent=this},n=o=>{const l=o.item;return l.parent===this?(Ie.getLogger(this).error(`Layer '${l.title}, id:${l.id}' of type '${l.type}' already a ground layer, second add will be ignored.`),void o.preventDefault()):l.type!=="integrated-mesh-3dtiles"&&l.type!=="integrated-mesh"?(Ie.getLogger(this).error(`Layer '${l.title}, id:${l.id}' of type '${l.type}' is not supported as a ground layer and will therefore be ignored.`),void o.preventDefault()):void 0},s=o=>{o.parent=null},a=o=>{o.parent===this&&(o.parent=null)};this.addHandles([this.baseLayers.on("after-add",o=>i(o.item)),this.baseLayers.on("after-remove",o=>s(o.item)),this.referenceLayers.on("after-add",o=>i(o.item)),this.referenceLayers.on("after-remove",o=>s(o.item)),this.groundLayers.on("before-add",n),this.groundLayers.on("after-add",o=>r(o.item)),this.groundLayers.on("after-remove",o=>a(o.item))])}initialize(){this.when().catch(e=>{Ie.getLogger(this).error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.baseLayers.toArray();for(const n of e)n.destroyed||n.destroy();const i=this.groundLayers.toArray();for(const n of i)n.destroyed||n.destroy();const r=this.referenceLayers.toArray();for(const n of r)n.destroyed||n.destroy();this.baseLayers.destroy(),this.groundLayers.destroy(),this.referenceLayers.destroy(),this.portalItem=Or(this.portalItem)}removeChildLayer(e){for(const i of[this.baseLayers,this.referenceLayers,this.groundLayers])i.remove(e)}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set baseLayers(e){this._set("baseLayers",Mp(e,this._get("baseLayers")))}_writeBaseLayers(e,i,r){const n=[];e&&(r={...r,layerContainerType:"basemap-base-layers"},this.baseLayers.forEach(s=>{const a=oL(s,r.webmap?r.webmap.getLayerJSONFromResourceInfo(s):null,r);a!=null&&n.push(a)}),this.referenceLayers.forEach(s=>{const a=oL(s,r.webmap?r.webmap.getLayerJSONFromResourceInfo(s):null,r);a!=null&&(s.type!=="scene"&&(a.isReference=!0),n.push(a))})),i.baseMapLayers=n}set groundLayers(e){this._set("groundLayers",Mp(e,this._get("groundLayers")))}_writeGroundLayers(e,i,r){const n=[];e&&(r={...r,layerContainerType:"basemap-ground-layers"},this.groundLayers.forEach(s=>{const a=oL(s,r.webmap?r.webmap.getLayerJSONFromResourceInfo(s):null,r);a!=null&&n.push(a)}),n.length>0&&(i.groundLayers=n))}get loaded(){return super.loaded}set referenceLayers(e){this._set("referenceLayers",Mp(e,this._get("referenceLayers")))}writeTitle(e,i){i.title=e||"Basemap"}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return HD(this,e=>{e(this.baseLayers,this.groundLayers,this.referenceLayers)})}clone(){const e={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.map(i=>s2(i)?i.clone():i),groundLayers:this.groundLayers.map(i=>s2(i)?i.clone():i),referenceLayers:this.referenceLayers.map(i=>s2(i)?i.clone():i)};return this.loaded&&(e.loadStatus="loaded"),new hx({resourceInfo:this.resourceInfo}).set(e)}read(e,i){this.resourceInfo||this._set("resourceInfo",{data:e,context:i}),super.read(e,i)}write(e,i){var r;return e=e||{},i!=null&&i.origin||(i={origin:"web-map",...i}),super.write(e,i),!this.loaded&&((r=this.resourceInfo)!=null&&r.data.baseMapLayers)&&(e.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(n=>{const s=he(n);return s.url&&zp(s.url)&&(s.url=`https:${s.url}`),s.templateUrl&&zp(s.templateUrl)&&(s.templateUrl=`https:${s.templateUrl}`),s})),e}async _loadFromSource(e){const{resourceInfo:i,portalItem:r,style:n}=this;lr(e);const s=[];if(i){const a=i.context?i.context.url:null;if(s.push(this._loadLayersFromJSON(i.data,a,e)),i.data.id&&!i.data.title){const o=i.data.id;s.push(C4e(o).then(l=>{l&&this.read({title:l},i.context)}))}}else r?s.push(this._loadFromItem(r,e)):n&&s.push(this._loadFromStylesService(n,e));await Promise.all(s)}async _loadLayersFromJSON(e,i,r){var c,h;const n=(c=this.resourceInfo)==null?void 0:c.context,s=((h=this.portalItem)==null?void 0:h.portal)||(n==null?void 0:n.portal)||null,a=W4e[(n==null?void 0:n.origin)||""]??"web-map",{populateOperationalLayers:o}=await de(async()=>{const{populateOperationalLayers:m}=await import("./layersCreator-DOi_yp3u.js");return{populateOperationalLayers:m}},__vite__mapDeps([143,140,139,138,141,137])),l=[];if(lr(r),e.baseMapLayers&&Array.isArray(e.baseMapLayers)){const m={context:{...n,origin:a,url:i,portal:s,layerContainerType:"basemap-base-layers"},defaultLayerType:"DefaultTileLayer"},g=x=>a==="web-scene"&&x.layerType==="ArcGISSceneServiceLayer"||x.isReference,v=o(this.baseLayers,e.baseMapLayers.filter(x=>!g(x)),m);l.push(v);const b=o(this.referenceLayers,e.baseMapLayers.filter(g),m);l.push(b)}if(e.groundLayers&&Array.isArray(e.groundLayers)){const m={context:{...n,origin:a,url:i,portal:s,layerContainerType:"basemap-ground-layers"},defaultLayerType:"IntegratedMesh3DTilesLayer"},g=o(this.groundLayers,e.groundLayers,m);l.push(g)}await Promise.allSettled(l)}async _loadFromItem(e,i){const r=await e.load(i),n=await r.fetchData("json",i),s=Cn(e.itemUrl??"");return this._set("resourceInfo",{data:n.baseMap??{},context:{origin:G4e[e.type||""]??"web-map",portal:e.portal||qe.getDefault(),url:s}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:n.spatialReference},this.resourceInfo.context),this.read({title:e.title,thumbnailUrl:e.thumbnailUrl},{origin:"portal-item",portal:e.portal||qe.getDefault(),url:s}),this._loadLayersFromJSON(this.resourceInfo.data,s,i)}async _loadFromStylesService(e,i){const r=e.serviceUrl.endsWith("/webmaps")?e.serviceUrl.slice(0,-8):e.serviceUrl,n=`${r}/styles/${e.id}/self`,s=`${r}/webmaps/${e.id}`,a=e.apiKey??Ti.apiKeys.basemapStyles,[o,l]=await Promise.all([(await mi(n,{query:{token:a},signal:i==null?void 0:i.signal})).data,(await mi(s,{query:{language:e.languageParameter,places:e.places,worldview:e.worldview,token:a},signal:i==null?void 0:i.signal})).data]);this.thumbnailUrl??(this.thumbnailUrl=o.thumbnailUrl);const c=Cn(s);if(this._set("resourceInfo",{data:l.baseMap??{},context:{origin:"web-map",url:c}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:l.spatialReference},this.resourceInfo.context),await this._loadLayersFromJSON(this.resourceInfo.data,c,i),a)for(const h of[...this.baseLayers,...this.groundLayers,...this.referenceLayers])"apiKey"in h&&(h.apiKey=a)}static fromId(e){const i=u9[e];return i?i.itemId?new hx({portalItem:{id:i.itemId,portal:{url:"https://www.arcgis.com"}}}):hx.fromJSON(i,i.is3d?{origin:"web-scene",portal:new qe({url:"https://www.arcgis.com"})}:{origin:"web-map"}):null}},pne=Eve,hx=mw,mw.idCounter=0,mw);d([f({json:{read:!1,write:{ignoreOrigin:!0,target:"baseMapLayers",writer(t,e,i,r){this._writeBaseLayers(t,e,r)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:Ue}},writer(t,e,i,r){this._writeBaseLayers(t,e,r)}}}}}})],ul.prototype,"baseLayers",null),d([f({json:{read:!1,write:{ignoreOrigin:!0,target:"groundLayers",writer(t,e,i,r){this._writeGroundLayers(t,e,r)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{groundLayers:{type:Ue}},writer(t,e,i,r){this._writeGroundLayers(t,e,r)}}}}}})],ul.prototype,"groundLayers",null),d([f({type:String,json:{origins:{"web-scene":{write:!0}}}})],ul.prototype,"id",void 0),d([f({type:Ot})],ul.prototype,"portalItem",void 0),d([f()],ul.prototype,"referenceLayers",null),d([f({readOnly:!0})],ul.prototype,"resourceInfo",void 0),d([f({type:tt})],ul.prototype,"spatialReference",void 0),d([f({type:E4e})],ul.prototype,"style",void 0),d([f()],ul.prototype,"thumbnailUrl",void 0),d([f({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],ul.prototype,"title",void 0),d([Ge("title")],ul.prototype,"writeTitle",null),ul=hx=d([V("esri.Basemap")],ul);const G4e={"Web Scene":"web-scene","Web Map":"web-map","Link Chart":"link-chart"},W4e={"web-scene":"web-scene","web-map":"web-map","link-chart":"link-chart"},y2=ul,Z4e=Object.freeze(Object.defineProperty({__proto__:null,default:y2},Symbol.toStringTag,{value:"Module"})),CR={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function Rve(t){return!!CR[t]||!!CR[t.toLowerCase()]}function nY(t){return CR[t]??CR[t.toLowerCase()]}function Y4e(t){return[...nY(t)]}function c6(t,e,i){i<0&&++i,i>1&&--i;const r=6*i;return r<1?t+(e-t)*r:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}function zve(t,e,i,r=1){const n=(t%360+360)%360/360,s=i<=.5?i*(e+1):i+e-i*e,a=2*i-s;return[Math.round(255*c6(a,s,n+1/3)),Math.round(255*c6(a,s,n)),Math.round(255*c6(a,s,n-1/3)),r]}function J4e(t){const e=t.length>5,i=e?8:4,r=(1<<i)-1,n=e?1:17,s=e?t.length===9:t.length===5;let a=+("0x"+t.slice(1));if(isNaN(a))return null;const o=[0,0,0,1];let l;return s&&(l=a&r,a>>=i,o[3]=n*l/255),l=a&r,a>>=i,o[2]=n*l,l=a&r,a>>=i,o[1]=n*l,l=a&r,a>>=i,o[0]=n*l,o}function Nve(t){if(!t.startsWith("#")||isNaN(+`0x${t.slice(1)}`))return null;switch(t.length){case 4:case 5:{const e=parseInt(t.slice(1,2),16),i=parseInt(t.slice(2,3),16),r=parseInt(t.slice(3,4),16),n=t.length===4?15:parseInt(t.slice(4),16);return[e+16*e,i+16*i,r+16*r,(n+16*n)/255]}case 7:case 9:return[parseInt(t.slice(1,3),16),parseInt(t.slice(3,5),16),parseInt(t.slice(5,7),16),(t.length===7?255:parseInt(t.slice(7),16))/255];default:return null}}function Dve(t){const e=t.toLowerCase().match(/^(rgba?|hsla?)\(([\s.\-,%0-9]+)\)/);if(e){const i=e[2].split(/\s*,\s*/),r=e[1];if(r==="rgb"&&i.length===3||r==="rgba"&&i.length===4){if(i[0].endsWith("%")){const n=i.map(s=>2.56*parseFloat(s));return i.length===4&&(n[3]=parseFloat(i[3])),fne(n)}return fne(i.map(n=>parseFloat(n)))}if(r==="hsl"&&i.length===3||r==="hsla"&&i.length===4)return zve(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100,parseFloat(i[3]??"1"))}return null}function fne(t){return t[0]=W$(t[0]),t[1]=W$(t[1]),t[2]=W$(t[2]),t[3]=t.length===4?Vve(t[3]):1,t}function jve(t){let e=Rve(t)?nY(t):null;return e??(e=Dve(t)),e??(e=Nve(t)),e}function A$t(t){const e=jve(t);return e!=null?[e[0]/255,e[1]/255,e[2]/255,e[3]]:null}function Vve(t){return Uve(t,0,1)}function W$(t){return Math.round(Uve(t,0,255))}function Uve(t,e,i){return t=Number(t),isNaN(t)?i:t<e?e:t>i?i:t}const Bve=2.2,X4e=1/Bve;function P$t(t){return t**Bve}function O$t(t){return t**X4e}function sO(t){return ua(DW(t),0,255)}function aO(t,e){const i=t.toString(16).padStart(2,"0");return e?i.slice(0,1):i}let Se=class Wc{static blendColors(e,i,r,n=new Wc){return n.r=Math.round(e.r+(i.r-e.r)*r),n.g=Math.round(e.g+(i.g-e.g)*r),n.b=Math.round(e.b+(i.b-e.b)*r),n.a=e.a+(i.a-e.a)*r,n._sanitize()}static fromRgb(e,i){const r=Dve(e);return r?Wc.fromArray(r,i):null}static fromHex(e,i=new Wc){const r=Nve(e);return r?Wc.fromArray(r,i):null}static fromArray(e,i=new Wc){return i._set(Number(e[0]),Number(e[1]),Number(e[2]),Number(e[3])),isNaN(i.a)&&(i.a=1),i._sanitize()}static fromString(e,i){const r=jve(e);return r?Wc.fromArray(r,i):null}static fromJSON(e){return e!=null?new Wc([e[0],e[1],e[2],(e[3]??255)/255]):void 0}static toUnitRGB(e){return e!=null?[e.r/255,e.g/255,e.b/255]:null}static toUnitRGBA(e,i){return e==null?null:(i??(i=[0,0,0,0]),i[0]=e.r/255,i[1]=e.g/255,i[2]=e.b/255,i[3]=e.a!=null?e.a:1,i)}constructor(e){this.r=255,this.g=255,this.b=255,this.a=1,e&&this.setColor(e)}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(e){return typeof e=="string"?Wc.fromString(e,this):Array.isArray(e)?Wc.fromArray(e,this):(this._set(e.r??0,e.g??0,e.b??0,e.a??1),e instanceof Wc||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(e){const i=(e==null?void 0:e.capitalize)??!1,r=(e==null?void 0:e.digits)??6,n=r===3||r===4,s=r===4||r===8,a=`#${aO(this.r,n)}${aO(this.g,n)}${aO(this.b,n)}${s?aO(Math.round(255*this.a),n):""}`;return i?a.toUpperCase():a}toCss(e=!1){const i=this.r+", "+this.g+", "+this.b;return e?`rgba(${i}, ${this.a})`:`rgb(${i})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(e=0){const i=sO(this.r),r=sO(this.g),n=sO(this.b);return e===0||this.a!==1?[i,r,n,sO(255*this.a)]:[i,r,n]}clone(){return new Wc(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(e){return e!=null&&e.r===this.r&&e.g===this.g&&e.b===this.b&&e.a===this.a}_sanitize(){return this.r=W$(this.r),this.g=W$(this.g),this.b=W$(this.b),this.a=Vve(this.a),this}_set(e,i,r,n){this.r=e,this.g=i,this.b=r,this.a=n}};Se.prototype.declaredClass="esri.Color";function pt(t,e={}){const i=t instanceof jt?t:new jt(t,e),{alwaysWriteDefaults:r,default:n,ignoreUnknown:s=!0,name:a,nonNullable:o,readOnly:l=!1}=e;return f({type:s?i.apiValues:String,json:{type:i.jsonValues,default:n,name:a,read:!l&&{reader:i.read},write:{writer:i.write,alwaysWriteDefaults:r}},nonNullable:o,readOnly:l})}var m9;let lL=m9=class extends $e{constructor(t){super(t),this.type="none"}clone(){return new m9({type:this.type})}};d([pt({none:"none",stayAbove:"stay-above"}),f({json:{write:{isRequired:!0}}})],lL.prototype,"type",void 0),lL=m9=d([V("esri.ground.NavigationConstraint")],lL);const qve=Symbol("GroundInstance");function L$t(t){return t!=null&&typeof t=="object"&&qve in t}function WD(t){const e=DW(100*(1-t));return Math.max(0,Math.min(e,100))}function TE(t){const e=1-t/100;return Math.max(0,Math.min(e,1))}var mne,g9,jde;let Zc=g9=(jde=class extends ig(w_){constructor(t){super(t),this[mne]=!0,this.parent=null,this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new Ue;const e=r=>{var s;const{parent:n}=r;n&&n!==this&&"remove"in n&&((s=n.remove)==null||s.call(n,r)),r.parent=this,r.type!=="elevation"&&r.type!=="base-elevation"&&Ie.getLogger(this).error(`Layer '${r.title}, id:${r.id}' of type '${r.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},i=r=>{r.parent=null};this.addHandles([this.layers.on("after-add",r=>e(r.item)),this.layers.on("after-remove",r=>i(r.item))]),this.allLayers=new Id({getCollections:()=>{var r,n;return[this.layers,(n=(r=this.parent)==null?void 0:r.basemap)==null?void 0:n.groundLayers]}})}removeChildLayer(t){this.layers.remove(t)}initialize(){this.when().catch(t=>{In(t)||Ie.getLogger(this).error("#load()","Failed to load ground",t)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}get integratedMeshGround(){var e,i;const t=(i=(e=this.parent)==null?void 0:e.basemap)==null?void 0:i.groundLayers.at(0);return t!=null&&t.replacesTerrain?t:null}destroy(){const t=this.layers.removeAll();for(const e of t)Or(e);this.layers.destroy()}normalizeCtorArgs(t){return t&&"resourceInfo"in t&&(this._set("resourceInfo",t.resourceInfo),delete(t={...t}).resourceInfo),t}get loaded(){return super.loaded}get layers(){return this._get("layers")}set layers(t){this._set("layers",Mp(t,this._get("layers")))}writeLayers(t,e,i,r){const n=[];t&&(r={...r,layerContainerType:"ground"},t.forEach(s=>{if("write"in s){const a={};Xke(s)().write(a,r)&&n.push(a)}else r!=null&&r.messages&&r.messages.push(new ae("layer:unsupported",`Layers (${s.title}, ${s.id}) of type '${s.declaredClass}' cannot be persisted in the ground`,{layer:s}))})),e.layers=n}load(t){return this.addResolvingPromise(this._loadFromSource(t)),Promise.resolve(this)}loadAll(){return HD(this,t=>{t(this.layers)})}async queryElevation(t,e){await this.load({signal:e==null?void 0:e.signal});const{queryAll:i}=await de(()=>import("./ElevationQuery-BxCDqhYT.js"),__vite__mapDeps([144,145]));return lr(e),i(this.layers.filter(gne).toArray(),t,e)}async createElevationSampler(t,e){await this.load({signal:e==null?void 0:e.signal});const{createSampler:i}=await de(()=>import("./ElevationQuery-BxCDqhYT.js"),__vite__mapDeps([144,145]));return lr(e),i(this.layers.filter(gne).toArray(),t,e)}clone(){const t={opacity:this.opacity,surfaceColor:he(this.surfaceColor),navigationConstraint:he(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(t.loadStatus="loaded"),new g9({resourceInfo:this.resourceInfo}).set(t)}read(t,e){this.resourceInfo||this._set("resourceInfo",{data:t,context:e}),super.read(t,e)}_loadFromSource(t){const e=this.resourceInfo;return e?this._loadLayersFromJSON(e.data,e.context,t):Promise.resolve()}async _loadLayersFromJSON(t,e,i){const r=(e==null?void 0:e.origin)||"web-scene",n=(e==null?void 0:e.portal)||null,s=(e==null?void 0:e.url)||null,{populateOperationalLayers:a}=await de(async()=>{const{populateOperationalLayers:l}=await import("./layersCreator-DOi_yp3u.js");return{populateOperationalLayers:l}},__vite__mapDeps([143,140,139,138,141,137]));lr(i);const o=[];if(t.layers&&Array.isArray(t.layers)){const l={context:{origin:r,url:s,portal:n,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};o.push(a(this.layers,t.layers,l))}await Promise.allSettled(o)}},mne=qve,jde);function gne(t){return t&&"createElevationSampler"in t}d([f()],Zc.prototype,"parent",void 0),d([f()],Zc.prototype,"integratedMeshGround",null),d([f({json:{read:!1,write:{isRequired:!0}}})],Zc.prototype,"layers",null),d([f()],Zc.prototype,"allLayers",void 0),d([Ge("layers")],Zc.prototype,"writeLayers",null),d([f({readOnly:!0})],Zc.prototype,"resourceInfo",void 0),d([f({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:ei,read:{reader:TE,source:"transparency"},write:{writer:(t,e)=>{e.transparency=WD(t)},target:"transparency"}}})],Zc.prototype,"opacity",void 0),d([f({type:Se,json:{type:[ei],write:(t,e)=>{e.surfaceColor=t.toJSON().slice(0,3)}}})],Zc.prototype,"surfaceColor",void 0),d([f({type:lL,json:{write:!0}})],Zc.prototype,"navigationConstraint",void 0),Zc=g9=d([V("esri.Ground")],Zc);const ER=Zc,Q4e="randomUUID"in crypto;function ZT(){if(Q4e)return crypto.randomUUID();const t=crypto.getRandomValues(new Uint16Array(8));t[3]=4095&t[3]|16384,t[4]=16383&t[4]|32768;const e=i=>t[i].toString(16).padStart(4,"0");return e(0)+e(1)+"-"+e(2)+"-"+e(3)+"-"+e(4)+"-"+e(5)+e(6)+e(7)}function F$t(){return`{${ZT().toUpperCase()}}`}function K4e(){return`{${ZT()}}`}function eVe(t){const e=t.toUpperCase();return t.startsWith("{")?e:`{${e}}`}const T1={Base64:0,Hex:1,String:2,Raw:3},Z$=8,Hve=(1<<Z$)-1;function iv(t,e){const i=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(i>>16)<<16|65535&i}function tVe(t){const e=[];for(let i=0,r=t.length*Z$;i<r;i+=Z$)e[i>>5]|=(t.charCodeAt(i/Z$)&Hve)<<i%32;return e}function iVe(t){const e=[];for(let i=0,r=32*t.length;i<r;i+=Z$)e.push(String.fromCharCode(t[i>>5]>>>i%32&Hve));return e.join("")}function rVe(t){const e="0123456789abcdef",i=[];for(let r=0,n=4*t.length;r<n;r++)i.push(e.charAt(t[r>>2]>>r%4*8+4&15)+e.charAt(t[r>>2]>>r%4*8&15));return i.join("")}function nVe(t){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=[];for(let n=0,s=4*t.length;n<s;n+=3){const a=(t[n>>2]>>n%4*8&255)<<16|(t[n+1>>2]>>(n+1)%4*8&255)<<8|t[n+2>>2]>>(n+2)%4*8&255;for(let o=0;o<4;o++)8*n+6*o>32*t.length?r.push("="):r.push(i.charAt(a>>6*(3-o)&63))}return r.join("")}function sVe(t,e){return t<<e|t>>>32-e}function ZD(t,e,i,r,n,s){return iv(sVe(iv(iv(e,t),iv(r,s)),n),i)}function Ba(t,e,i,r,n,s,a){return ZD(e&i|~e&r,t,e,n,s,a)}function qa(t,e,i,r,n,s,a){return ZD(e&r|i&~r,t,e,n,s,a)}function Ha(t,e,i,r,n,s,a){return ZD(e^i^r,t,e,n,s,a)}function Ga(t,e,i,r,n,s,a){return ZD(i^(e|~r),t,e,n,s,a)}function aVe(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;let i=1732584193,r=-271733879,n=-1732584194,s=271733878;for(let a=0;a<t.length;a+=16){const o=i,l=r,c=n,h=s;i=Ba(i,r,n,s,t[a],7,-680876936),s=Ba(s,i,r,n,t[a+1],12,-389564586),n=Ba(n,s,i,r,t[a+2],17,606105819),r=Ba(r,n,s,i,t[a+3],22,-1044525330),i=Ba(i,r,n,s,t[a+4],7,-176418897),s=Ba(s,i,r,n,t[a+5],12,1200080426),n=Ba(n,s,i,r,t[a+6],17,-1473231341),r=Ba(r,n,s,i,t[a+7],22,-45705983),i=Ba(i,r,n,s,t[a+8],7,1770035416),s=Ba(s,i,r,n,t[a+9],12,-1958414417),n=Ba(n,s,i,r,t[a+10],17,-42063),r=Ba(r,n,s,i,t[a+11],22,-1990404162),i=Ba(i,r,n,s,t[a+12],7,1804603682),s=Ba(s,i,r,n,t[a+13],12,-40341101),n=Ba(n,s,i,r,t[a+14],17,-1502002290),r=Ba(r,n,s,i,t[a+15],22,1236535329),i=qa(i,r,n,s,t[a+1],5,-165796510),s=qa(s,i,r,n,t[a+6],9,-1069501632),n=qa(n,s,i,r,t[a+11],14,643717713),r=qa(r,n,s,i,t[a],20,-373897302),i=qa(i,r,n,s,t[a+5],5,-701558691),s=qa(s,i,r,n,t[a+10],9,38016083),n=qa(n,s,i,r,t[a+15],14,-660478335),r=qa(r,n,s,i,t[a+4],20,-405537848),i=qa(i,r,n,s,t[a+9],5,568446438),s=qa(s,i,r,n,t[a+14],9,-1019803690),n=qa(n,s,i,r,t[a+3],14,-187363961),r=qa(r,n,s,i,t[a+8],20,1163531501),i=qa(i,r,n,s,t[a+13],5,-1444681467),s=qa(s,i,r,n,t[a+2],9,-51403784),n=qa(n,s,i,r,t[a+7],14,1735328473),r=qa(r,n,s,i,t[a+12],20,-1926607734),i=Ha(i,r,n,s,t[a+5],4,-378558),s=Ha(s,i,r,n,t[a+8],11,-2022574463),n=Ha(n,s,i,r,t[a+11],16,1839030562),r=Ha(r,n,s,i,t[a+14],23,-35309556),i=Ha(i,r,n,s,t[a+1],4,-1530992060),s=Ha(s,i,r,n,t[a+4],11,1272893353),n=Ha(n,s,i,r,t[a+7],16,-155497632),r=Ha(r,n,s,i,t[a+10],23,-1094730640),i=Ha(i,r,n,s,t[a+13],4,681279174),s=Ha(s,i,r,n,t[a],11,-358537222),n=Ha(n,s,i,r,t[a+3],16,-722521979),r=Ha(r,n,s,i,t[a+6],23,76029189),i=Ha(i,r,n,s,t[a+9],4,-640364487),s=Ha(s,i,r,n,t[a+12],11,-421815835),n=Ha(n,s,i,r,t[a+15],16,530742520),r=Ha(r,n,s,i,t[a+2],23,-995338651),i=Ga(i,r,n,s,t[a],6,-198630844),s=Ga(s,i,r,n,t[a+7],10,1126891415),n=Ga(n,s,i,r,t[a+14],15,-1416354905),r=Ga(r,n,s,i,t[a+5],21,-57434055),i=Ga(i,r,n,s,t[a+12],6,1700485571),s=Ga(s,i,r,n,t[a+3],10,-1894986606),n=Ga(n,s,i,r,t[a+10],15,-1051523),r=Ga(r,n,s,i,t[a+1],21,-2054922799),i=Ga(i,r,n,s,t[a+8],6,1873313359),s=Ga(s,i,r,n,t[a+15],10,-30611744),n=Ga(n,s,i,r,t[a+6],15,-1560198380),r=Ga(r,n,s,i,t[a+13],21,1309151649),i=Ga(i,r,n,s,t[a+4],6,-145523070),s=Ga(s,i,r,n,t[a+11],10,-1120210379),n=Ga(n,s,i,r,t[a+2],15,718787259),r=Ga(r,n,s,i,t[a+9],21,-343485551),i=iv(i,o),r=iv(r,l),n=iv(n,c),s=iv(s,h)}return[i,r,n,s]}function sY(t,e=T1.Hex){const i=e||T1.Base64,r=aVe(tVe(t),t.length*Z$);switch(i){case T1.Raw:return r;case T1.Hex:return rVe(r);case T1.String:return iVe(r);case T1.Base64:return nVe(r)}}function oVe(t){return t&&"getAtOrigin"in t&&"originOf"in t}function y9(t){return aY[lVe(t)]||uVe}function lVe(t){return t.type==="json"?"application/json":t.type==="blob"?t.blob.type:cVe(t.url)}function cVe(t){const e=Efe(t);return v9[e]||Gve}const aY={},Gve="text/plain",uVe=aY[Gve],v9={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip","bin.gz":"application/octet-stream"};for(const t in v9)aY[v9[t]]=t;function dVe(t){const e=(t==null?void 0:t.origins)??[void 0];return(i,r)=>{const n=hVe(t,i,r);for(const s of e){const a=jW(i,s,r);for(const o in n)a[o]=n[o]}}}function hVe(t,e,i){if((t==null?void 0:t.type)==="resource")return pVe(t,e,i);switch((t==null?void 0:t.type)??"other"){case"other":return{read:!0,write:!0};case"url":{const{read:r,write:n}=f3e;return{read:r,write:n}}}}function pVe(t,e,i){var n,s;const r=Ak(e,i);return{type:String,read:(a,o,l)=>{const c=yD(a,o,l);return r.type===String?c:typeof r.type=="function"?new r.type({url:c}):void 0},write:{isRequired:(s=(n=r.json)==null?void 0:n.write)==null?void 0:s.isRequired,writer(a,o,l,c){if(!(c!=null&&c.resources))return typeof a=="string"?void(o[l]=Qw(a,c)):void(o[l]=a.write({},c));const h=gVe(a),m=Qw(h,{...c,verifyItemRelativeUrls:c!=null&&c.verifyItemRelativeUrls?{writtenUrls:c.verifyItemRelativeUrls.writtenUrls,rootPath:void 0}:void 0},1),g=r.type!==String&&(!oVe(this)||(c==null?void 0:c.origin)&&this.originIdOf(i)>Om(c.origin)),v={object:this,propertyName:i,value:a,targetUrl:m,dest:o,targetPropertyName:l,context:c,params:t};c!=null&&c.portalItem&&m&&!Pl(m)?g&&(t!=null&&t.contentAddressed)?b9(v):g?fVe(v):mVe(v):c!=null&&c.portalItem&&(m==null||Lfe(m)!=null||NT(m)||g)?b9(v):o[l]=m}}}}function b9(t){var b;const{targetUrl:e,params:i,value:r,context:n,dest:s,targetPropertyName:a}=t;if(!n.portalItem)return;const o=Ffe(e),l=Zve(r,e,n);if(i!=null&&i.contentAddressed&&l.type!=="json")return void((b=n.messages)==null?void 0:b.push(new ae("persistable:contentAddressingUnsupported",`Property "${a}" is trying to serializing a resource with content of type ${l.type} with content addressing. Content addressing is only supported for json resources.`,{content:l})));const c=i!=null&&i.contentAddressed&&l.type==="json"?sY(l.jsonString):(o==null?void 0:o.filename)??ZT(),h=Ev((i==null?void 0:i.prefix)??(o==null?void 0:o.prefix),c),m=`${h}.${y9(l)}`;if(i!=null&&i.contentAddressed&&n.resources&&l.type==="json"){const x=n.resources.toKeep.find(({resource:$})=>$.path===m)??n.resources.toAdd.find(({resource:$})=>$.path===m);if(x)return void(s[a]=x.resource.itemRelativeUrl)}const g=n.portalItem.resourceFromPath(m);NT(e)&&n.resources&&n.resources.pendingOperations.push(t3e(e).then(x=>{g.path=`${h}.${y9({type:"blob",blob:x})}`,s[a]=g.itemRelativeUrl}).catch(()=>{}));const v=(i==null?void 0:i.compress)??!1;n.resources&&Wve({...t,resource:g,content:l,compress:v,updates:n.resources.toAdd}),s[a]=g.itemRelativeUrl}function fVe(t){const{context:e,targetUrl:i,params:r,value:n,dest:s,targetPropertyName:a}=t;if(!e.portalItem)return;const o=e.portalItem.resourceFromPath(i),l=Zve(n,i,e),c=y9(l),h=Efe(o.path),m=(r==null?void 0:r.compress)??!1;c===h?(e.resources&&Wve({...t,resource:o,content:l,compress:m,updates:e.resources.toUpdate}),s[a]=i):b9(t)}function mVe({context:t,targetUrl:e,dest:i,targetPropertyName:r}){t.portalItem&&t.resources&&(t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(e),compress:!1}),i[r]=e)}function Wve({object:t,propertyName:e,updates:i,resource:r,content:n,compress:s}){const a=o=>{yVe(t,e,o)};i.push({resource:r,content:n,compress:s,finish:a})}function Zve(t,e,i){return typeof t=="string"?{type:"url",url:e}:{type:"json",jsonString:JSON.stringify(t.toJSON(i))}}function gVe(t){return t==null?null:typeof t=="string"?t:t.url}function yVe(t,e,i){typeof t[e]=="string"?t[e]=i.url:t[e].url=i.url}let cL=class extends bt($e){constructor(e){super(e),this.color=null}};d([f({type:Se,json:{type:[ei],write:!0}})],cL.prototype,"color",void 0),cL=d([V("esri.effects.FocusAreaOutline")],cL);const vVe=cL;var uL;let w9=uL=class extends ig(Ue.ofType(Nr)){constructor(t){super(t)}clone(){return new uL(this.items.map(t=>t.clone()))}write(t,e){return this.toJSON(e)}toJSON(t){var i;const e=(i=t==null?void 0:t.layer)==null?void 0:i.spatialReference;return e?this.toArray().map(r=>{var s;if(!e.equals(r.spatialReference)){if(!jd(r.spatialReference,e))return(s=t==null?void 0:t.messages)==null||s.push(new Ic("scenefilter:unsupported","Scene filters with incompatible spatial references are not supported",{modification:this,spatialReference:t.layer.spatialReference,context:t})),null;const a=new Nr;eve(r,a,e),r=a}const n=r.toJSON(t);return delete n.spatialReference,n}).filter(r=>r!=null):this.toArray().map(r=>r.toJSON(t))}static fromJSON(t,e){const i=new uL;return t.forEach(r=>i.add(Nr.fromJSON(r,e))),i}};w9=uL=d([V("esri.layers.support.PolygonCollection")],w9);const v2=w9;let jf=class extends ig(qW){constructor(e){super(e),this.id=`focusarea-${ZT()}`,this.title=null,this.enabled=!0,this.outline=null,this.geometries=new v2}readGeometries(e,i,r){var n,s;Array.isArray(e)?this.geometries=v2.fromJSON(e,r):r.origin!=="web-scene"&&r.origin!=="portal-item"||((s=(n=r.hooks)==null?void 0:n.onAfterLoad)==null||s.call(n,()=>this._loadGeometries(Wm(e,r),r)))}async _loadGeometries(e,i){const r=await mi(e,{responseType:"json"});this.geometries=v2.fromJSON(r.data,i)}};d([f({type:String,nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}}),f()],jf.prototype,"id",void 0),d([f({type:String,json:{write:!0}})],jf.prototype,"title",void 0),d([f({type:Boolean,nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}})],jf.prototype,"enabled",void 0),d([f({type:vVe,json:{write:!0}})],jf.prototype,"outline",void 0),d([f({type:v2,nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}},clonable:t=>new v2(t.items.map(e=>e.clone()))}),dVe({origins:["web-scene","portal-item"],type:"resource",prefix:"geometries",contentAddressed:!0})],jf.prototype,"geometries",void 0),d([je(["web-scene","portal-item","service"],"geometries")],jf.prototype,"readGeometries",null),jf=d([V("esri.effects.FocusArea")],jf);const bVe=jf;let tC=class extends ig(qW){constructor(e){super(e),this.areas=new Ue,this.style="bright"}};d([f({type:Ue.ofType(bVe),nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}},clonable:t=>new Ue(t.items.map(e=>e.clone()))})],tC.prototype,"areas",void 0),d([f({type:["bright","dark"],nonNullable:!0,json:{write:!0}})],tC.prototype,"style",void 0),tC=d([V("esri.effects.FocusAreas")],tC);const Yve=tC;function wVe(t){return typeof t=="object"&&t!=null&&"loaded"in t&&t.loaded===!0&&"type"in t}function _Ve(t){var e,i;return!(!wVe(t)||!((i=(e=Lve(t))==null?void 0:e.operations)!=null&&i.supportsEditing)||"editingEnabled"in t&&!z4e(t)||tY(t))}function YD(){const t=new Float32Array(16);return t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function xVe(t){const e=new Float32Array(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function $Ve(t,e,i,r,n,s,a,o,l,c,h,m,g,v,b,x){const $=new Float32Array(16);return $[0]=t,$[1]=e,$[2]=i,$[3]=r,$[4]=n,$[5]=s,$[6]=a,$[7]=o,$[8]=l,$[9]=c,$[10]=h,$[11]=m,$[12]=g,$[13]=v,$[14]=b,$[15]=x,$}const SVe=YD();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:SVe,clone:xVe,create:YD,fromValues:$Ve},Symbol.toStringTag,{value:"Module"}));function Jve(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Bv(t,e,i,r,n,s,a,o,l,c,h,m,g,v,b,x,$){return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t[4]=s,t[5]=a,t[6]=o,t[7]=l,t[8]=c,t[9]=h,t[10]=m,t[11]=g,t[12]=v,t[13]=b,t[14]=x,t[15]=$,t}function JD(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function qv(t,e){if(t===e){const i=e[1],r=e[2],n=e[3],s=e[6],a=e[7],o=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=i,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=s,t[11]=e[14],t[12]=n,t[13]=a,t[14]=o}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function TVe(t,e){return Xve(t,e)||JD(t),t}function Xve(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],h=e[8],m=e[9],g=e[10],v=e[11],b=e[12],x=e[13],$=e[14],M=e[15],k=i*o-r*a,A=i*l-n*a,L=i*c-s*a,z=r*l-n*o,U=r*c-s*o,B=n*c-s*l,X=h*x-m*b,J=h*$-g*b,Q=h*M-v*b,le=m*$-g*x,ie=m*M-v*x,re=g*M-v*$;let se=k*re-A*ie+L*le+z*Q-U*J+B*X;return se?(se=1/se,t[0]=(o*re-l*ie+c*le)*se,t[1]=(n*ie-r*re-s*le)*se,t[2]=(x*B-$*U+M*z)*se,t[3]=(g*U-m*B-v*z)*se,t[4]=(l*Q-a*re-c*J)*se,t[5]=(i*re-n*Q+s*J)*se,t[6]=($*L-b*B-M*A)*se,t[7]=(h*B-g*L+v*A)*se,t[8]=(a*ie-o*Q+c*X)*se,t[9]=(r*Q-i*ie-s*X)*se,t[10]=(b*U-x*L+M*k)*se,t[11]=(m*L-h*U-v*k)*se,t[12]=(o*J-a*le-l*X)*se,t[13]=(i*le-r*J+n*X)*se,t[14]=(x*A-b*z-$*k)*se,t[15]=(h*z-m*A+g*k)*se,t):null}function IVe(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],h=e[8],m=e[9],g=e[10],v=e[11],b=e[12],x=e[13],$=e[14],M=e[15];return t[0]=o*(g*M-v*$)-m*(l*M-c*$)+x*(l*v-c*g),t[1]=-(r*(g*M-v*$)-m*(n*M-s*$)+x*(n*v-s*g)),t[2]=r*(l*M-c*$)-o*(n*M-s*$)+x*(n*c-s*l),t[3]=-(r*(l*v-c*g)-o*(n*v-s*g)+m*(n*c-s*l)),t[4]=-(a*(g*M-v*$)-h*(l*M-c*$)+b*(l*v-c*g)),t[5]=i*(g*M-v*$)-h*(n*M-s*$)+b*(n*v-s*g),t[6]=-(i*(l*M-c*$)-a*(n*M-s*$)+b*(n*c-s*l)),t[7]=i*(l*v-c*g)-a*(n*v-s*g)+h*(n*c-s*l),t[8]=a*(m*M-v*x)-h*(o*M-c*x)+b*(o*v-c*m),t[9]=-(i*(m*M-v*x)-h*(r*M-s*x)+b*(r*v-s*m)),t[10]=i*(o*M-c*x)-a*(r*M-s*x)+b*(r*c-s*o),t[11]=-(i*(o*v-c*m)-a*(r*v-s*m)+h*(r*c-s*o)),t[12]=-(a*(m*$-g*x)-h*(o*$-l*x)+b*(o*g-l*m)),t[13]=i*(m*$-g*x)-h*(r*$-n*x)+b*(r*g-n*m),t[14]=-(i*(o*$-l*x)-a*(r*$-n*x)+b*(r*l-n*o)),t[15]=i*(o*g-l*m)-a*(r*g-n*m)+h*(r*l-n*o),t}function MVe(t){const e=t[0],i=t[1],r=t[2],n=t[3],s=t[4],a=t[5],o=t[6],l=t[7],c=t[8],h=t[9],m=t[10],g=t[11],v=t[12],b=t[13],x=t[14],$=t[15];return(e*a-i*s)*(m*$-g*x)-(e*o-r*s)*(h*$-g*b)+(e*l-n*s)*(h*x-m*b)+(i*o-r*a)*(c*$-g*v)-(i*l-n*a)*(c*x-m*v)+(r*l-n*o)*(c*b-h*v)}function Qve(t,e,i){const r=e[0],n=e[1],s=e[2],a=e[3],o=e[4],l=e[5],c=e[6],h=e[7],m=e[8],g=e[9],v=e[10],b=e[11],x=e[12],$=e[13],M=e[14],k=e[15];let A=i[0],L=i[1],z=i[2],U=i[3];return t[0]=A*r+L*o+z*m+U*x,t[1]=A*n+L*l+z*g+U*$,t[2]=A*s+L*c+z*v+U*M,t[3]=A*a+L*h+z*b+U*k,A=i[4],L=i[5],z=i[6],U=i[7],t[4]=A*r+L*o+z*m+U*x,t[5]=A*n+L*l+z*g+U*$,t[6]=A*s+L*c+z*v+U*M,t[7]=A*a+L*h+z*b+U*k,A=i[8],L=i[9],z=i[10],U=i[11],t[8]=A*r+L*o+z*m+U*x,t[9]=A*n+L*l+z*g+U*$,t[10]=A*s+L*c+z*v+U*M,t[11]=A*a+L*h+z*b+U*k,A=i[12],L=i[13],z=i[14],U=i[15],t[12]=A*r+L*o+z*m+U*x,t[13]=A*n+L*l+z*g+U*$,t[14]=A*s+L*c+z*v+U*M,t[15]=A*a+L*h+z*b+U*k,t}function CVe(t,e,i){const r=i[0],n=i[1],s=i[2];if(e===t)t[12]=e[0]*r+e[4]*n+e[8]*s+e[12],t[13]=e[1]*r+e[5]*n+e[9]*s+e[13],t[14]=e[2]*r+e[6]*n+e[10]*s+e[14],t[15]=e[3]*r+e[7]*n+e[11]*s+e[15];else{const a=e[0],o=e[1],l=e[2],c=e[3],h=e[4],m=e[5],g=e[6],v=e[7],b=e[8],x=e[9],$=e[10],M=e[11];t[0]=a,t[1]=o,t[2]=l,t[3]=c,t[4]=h,t[5]=m,t[6]=g,t[7]=v,t[8]=b,t[9]=x,t[10]=$,t[11]=M,t[12]=a*r+h*n+b*s+e[12],t[13]=o*r+m*n+x*s+e[13],t[14]=l*r+g*n+$*s+e[14],t[15]=c*r+v*n+M*s+e[15]}return t}function EVe(t,e,i){const r=i[0],n=i[1],s=i[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function kVe(t,e,i,r){let n=r[0],s=r[1],a=r[2],o=Math.sqrt(n*n+s*s+a*a);if(o<=qo())return void Jve(t,e);o=1/o,n*=o,s*=o,a*=o;const l=Math.sin(i),c=Math.cos(i),h=1-c,m=e[0],g=e[1],v=e[2],b=e[3],x=e[4],$=e[5],M=e[6],k=e[7],A=e[8],L=e[9],z=e[10],U=e[11],B=n*n*h+c,X=s*n*h+a*l,J=a*n*h-s*l,Q=n*s*h-a*l,le=s*s*h+c,ie=a*s*h+n*l,re=n*a*h+s*l,se=s*a*h-n*l,Te=a*a*h+c;t[0]=m*B+x*X+A*J,t[1]=g*B+$*X+L*J,t[2]=v*B+M*X+z*J,t[3]=b*B+k*X+U*J,t[4]=m*Q+x*le+A*ie,t[5]=g*Q+$*le+L*ie,t[6]=v*Q+M*le+z*ie,t[7]=b*Q+k*le+U*ie,t[8]=m*re+x*se+A*Te,t[9]=g*re+$*se+L*Te,t[10]=v*re+M*se+z*Te,t[11]=b*re+k*se+U*Te,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15])}function AVe(t,e,i){const r=Math.sin(i),n=Math.cos(i),s=e[4],a=e[5],o=e[6],l=e[7],c=e[8],h=e[9],m=e[10],g=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*n+c*r,t[5]=a*n+h*r,t[6]=o*n+m*r,t[7]=l*n+g*r,t[8]=c*n-s*r,t[9]=h*n-a*r,t[10]=m*n-o*r,t[11]=g*n-l*r,t}function PVe(t,e,i){const r=Math.sin(i),n=Math.cos(i),s=e[0],a=e[1],o=e[2],l=e[3],c=e[8],h=e[9],m=e[10],g=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*n-c*r,t[1]=a*n-h*r,t[2]=o*n-m*r,t[3]=l*n-g*r,t[8]=s*r+c*n,t[9]=a*r+h*n,t[10]=o*r+m*n,t[11]=l*r+g*n,t}function OVe(t,e,i){const r=Math.sin(i),n=Math.cos(i),s=e[0],a=e[1],o=e[2],l=e[3],c=e[4],h=e[5],m=e[6],g=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*n+c*r,t[1]=a*n+h*r,t[2]=o*n+m*r,t[3]=l*n+g*r,t[4]=c*n-s*r,t[5]=h*n-a*r,t[6]=m*n-o*r,t[7]=g*n-l*r,t}function LVe(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function FVe(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function RVe(t,e,i){if(e===0)return JD(t);let r=i[0],n=i[1],s=i[2],a=Math.sqrt(r*r+n*n+s*s);if(a<=qo())return null;a=1/a,r*=a,n*=a,s*=a;const o=Math.sin(e),l=Math.cos(e),c=1-l;return t[0]=r*r*c+l,t[1]=n*r*c+s*o,t[2]=s*r*c-n*o,t[3]=0,t[4]=r*n*c-s*o,t[5]=n*n*c+l,t[6]=s*n*c+r*o,t[7]=0,t[8]=r*s*c+n*o,t[9]=n*s*c-r*o,t[10]=s*s*c+l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function zVe(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=i,t[7]=0,t[8]=0,t[9]=-i,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function NVe(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function DVe(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=i,t[2]=0,t[3]=0,t[4]=-i,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Kve(t,e,i){const r=e[0],n=e[1],s=e[2],a=e[3],o=r+r,l=n+n,c=s+s,h=r*o,m=r*l,g=r*c,v=n*l,b=n*c,x=s*c,$=a*o,M=a*l,k=a*c;return t[0]=1-(v+x),t[1]=m+k,t[2]=g-M,t[3]=0,t[4]=m-k,t[5]=1-(h+x),t[6]=b+$,t[7]=0,t[8]=g+M,t[9]=b-$,t[10]=1-(h+v),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}function jVe(t,e){const i=VVe,r=-e[0],n=-e[1],s=-e[2],a=e[3],o=e[4],l=e[5],c=e[6],h=e[7],m=r*r+n*n+s*s+a*a;return m>0?(i[0]=2*(o*a+h*r+l*s-c*n)/m,i[1]=2*(l*a+h*n+c*r-o*s)/m,i[2]=2*(c*a+h*s+o*n-l*r)/m):(i[0]=2*(o*a+h*r+l*s-c*n),i[1]=2*(l*a+h*n+c*r-o*s),i[2]=2*(c*a+h*s+o*n-l*r)),Kve(t,e,i),t}const VVe=Uv();function UVe(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function BVe(t,e){const i=e[0],r=e[1],n=e[2],s=e[4],a=e[5],o=e[6],l=e[8],c=e[9],h=e[10];return t[0]=Math.sqrt(i*i+r*r+n*n),t[1]=Math.sqrt(s*s+a*a+o*o),t[2]=Math.sqrt(l*l+c*c+h*h),t}function qVe(t,e){const i=e[0]+e[5]+e[10];let r=0;return i>0?(r=2*Math.sqrt(i+1),t[3]=.25*r,t[0]=(e[6]-e[9])/r,t[1]=(e[8]-e[2])/r,t[2]=(e[1]-e[4])/r):e[0]>e[5]&&e[0]>e[10]?(r=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/r,t[0]=.25*r,t[1]=(e[1]+e[4])/r,t[2]=(e[8]+e[2])/r):e[5]>e[10]?(r=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/r,t[0]=(e[1]+e[4])/r,t[1]=.25*r,t[2]=(e[6]+e[9])/r):(r=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/r,t[0]=(e[8]+e[2])/r,t[1]=(e[6]+e[9])/r,t[2]=.25*r),t}function HVe(t,e,i,r){const n=e[0],s=e[1],a=e[2],o=e[3],l=n+n,c=s+s,h=a+a,m=n*l,g=n*c,v=n*h,b=s*c,x=s*h,$=a*h,M=o*l,k=o*c,A=o*h,L=r[0],z=r[1],U=r[2];return t[0]=(1-(b+$))*L,t[1]=(g+A)*L,t[2]=(v-k)*L,t[3]=0,t[4]=(g-A)*z,t[5]=(1-(m+$))*z,t[6]=(x+M)*z,t[7]=0,t[8]=(v+k)*U,t[9]=(x-M)*U,t[10]=(1-(m+b))*U,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}function GVe(t,e,i,r,n){const s=e[0],a=e[1],o=e[2],l=e[3],c=s+s,h=a+a,m=o+o,g=s*c,v=s*h,b=s*m,x=a*h,$=a*m,M=o*m,k=l*c,A=l*h,L=l*m,z=r[0],U=r[1],B=r[2],X=n[0],J=n[1],Q=n[2],le=(1-(x+M))*z,ie=(v+L)*z,re=(b-A)*z,se=(v-L)*U,Te=(1-(g+M))*U,ne=($+k)*U,_e=(b+A)*B,Oe=($-k)*B,He=(1-(g+x))*B;return t[0]=le,t[1]=ie,t[2]=re,t[3]=0,t[4]=se,t[5]=Te,t[6]=ne,t[7]=0,t[8]=_e,t[9]=Oe,t[10]=He,t[11]=0,t[12]=i[0]+X-(le*X+se*J+_e*Q),t[13]=i[1]+J-(ie*X+Te*J+Oe*Q),t[14]=i[2]+Q-(re*X+ne*J+He*Q),t[15]=1,t}function WVe(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],a=i+i,o=r+r,l=n+n,c=i*a,h=r*a,m=r*o,g=n*a,v=n*o,b=n*l,x=s*a,$=s*o,M=s*l;return t[0]=1-m-b,t[1]=h+M,t[2]=g-$,t[3]=0,t[4]=h-M,t[5]=1-c-b,t[6]=v+x,t[7]=0,t[8]=g+$,t[9]=v-x,t[10]=1-c-m,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ZVe(t,e,i,r,n,s,a){const o=1/(i-e),l=1/(n-r),c=1/(s-a);return t[0]=2*s*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*s*l,t[6]=0,t[7]=0,t[8]=(i+e)*o,t[9]=(n+r)*l,t[10]=(a+s)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*s*2*c,t[15]=0,t}function YVe(t,e,i,r,n){const s=1/Math.tan(e/2);let a;return t[0]=s/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,n!=null&&n!==1/0?(a=1/(r-n),t[10]=(n+r)*a,t[14]=2*n*r*a):(t[10]=-1,t[14]=-2*r),t}function JVe(t,e,i,r){const n=Math.tan(e.upDegrees*Math.PI/180),s=Math.tan(e.downDegrees*Math.PI/180),a=Math.tan(e.leftDegrees*Math.PI/180),o=Math.tan(e.rightDegrees*Math.PI/180),l=2/(a+o),c=2/(n+s);return t[0]=l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(a-o)*l*.5,t[9]=(n-s)*c*.5,t[10]=r/(i-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*i/(i-r),t[15]=0,t}function XVe(t,e,i,r,n,s,a){const o=1/(e-i),l=1/(r-n),c=1/(s-a);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+i)*o,t[13]=(n+r)*l,t[14]=(a+s)*c,t[15]=1,t}function QVe(t,e,i,r){const n=e[0],s=e[1],a=e[2];let o=n-i[0],l=s-i[1],c=a-i[2];const h=qo();if(Math.abs(o)<h&&Math.abs(l)<h&&Math.abs(c)<h)return void JD(t);let m=1/Math.sqrt(o*o+l*l+c*c);o*=m,l*=m,c*=m;const g=r[0],v=r[1],b=r[2];let x=v*c-b*l,$=b*o-g*c,M=g*l-v*o;m=Math.sqrt(x*x+$*$+M*M),m?(m=1/m,x*=m,$*=m,M*=m):(x=0,$=0,M=0);let k=l*M-c*$,A=c*x-o*M,L=o*$-l*x;m=Math.sqrt(k*k+A*A+L*L),m?(m=1/m,k*=m,A*=m,L*=m):(k=0,A=0,L=0),t[0]=x,t[1]=k,t[2]=o,t[3]=0,t[4]=$,t[5]=A,t[6]=l,t[7]=0,t[8]=M,t[9]=L,t[10]=c,t[11]=0,t[12]=-(x*n+$*s+M*a),t[13]=-(k*n+A*s+L*a),t[14]=-(o*n+l*s+c*a),t[15]=1}function KVe(t,e,i,r){const n=e[0],s=e[1],a=e[2],o=r[0],l=r[1],c=r[2];let h=n-i[0],m=s-i[1],g=a-i[2],v=h*h+m*m+g*g;v>0&&(v=1/Math.sqrt(v),h*=v,m*=v,g*=v);let b=l*g-c*m,x=c*h-o*g,$=o*m-l*h;return v=b*b+x*x+$*$,v>0&&(v=1/Math.sqrt(v),b*=v,x*=v,$*=v),t[0]=b,t[1]=x,t[2]=$,t[3]=0,t[4]=m*$-g*x,t[5]=g*b-h*$,t[6]=h*x-m*b,t[7]=0,t[8]=h,t[9]=m,t[10]=g,t[11]=0,t[12]=n,t[13]=s,t[14]=a,t[15]=1,t}function e6e(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function t6e(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2+t[9]**2+t[10]**2+t[11]**2+t[12]**2+t[13]**2+t[14]**2+t[15]**2)}function i6e(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t[9]=e[9]+i[9],t[10]=e[10]+i[10],t[11]=e[11]+i[11],t[12]=e[12]+i[12],t[13]=e[13]+i[13],t[14]=e[14]+i[14],t[15]=e[15]+i[15],t}function ebe(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t[9]=e[9]-i[9],t[10]=e[10]-i[10],t[11]=e[11]-i[11],t[12]=e[12]-i[12],t[13]=e[13]-i[13],t[14]=e[14]-i[14],t[15]=e[15]-i[15],t}function r6e(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12]*i,t[13]=e[13]*i,t[14]=e[14]*i,t[15]=e[15]*i,t}function n6e(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t[4]=e[4]+i[4]*r,t[5]=e[5]+i[5]*r,t[6]=e[6]+i[6]*r,t[7]=e[7]+i[7]*r,t[8]=e[8]+i[8]*r,t[9]=e[9]+i[9]*r,t[10]=e[10]+i[10]*r,t[11]=e[11]+i[11]*r,t[12]=e[12]+i[12]*r,t[13]=e[13]+i[13]*r,t[14]=e[14]+i[14]*r,t[15]=e[15]+i[15]*r,t}function s6e(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function a6e(t,e){if(t===e)return!0;const i=t[0],r=t[1],n=t[2],s=t[3],a=t[4],o=t[5],l=t[6],c=t[7],h=t[8],m=t[9],g=t[10],v=t[11],b=t[12],x=t[13],$=t[14],M=t[15],k=e[0],A=e[1],L=e[2],z=e[3],U=e[4],B=e[5],X=e[6],J=e[7],Q=e[8],le=e[9],ie=e[10],re=e[11],se=e[12],Te=e[13],ne=e[14],_e=e[15],Oe=qo();return Math.abs(i-k)<=Oe*Math.max(1,Math.abs(i),Math.abs(k))&&Math.abs(r-A)<=Oe*Math.max(1,Math.abs(r),Math.abs(A))&&Math.abs(n-L)<=Oe*Math.max(1,Math.abs(n),Math.abs(L))&&Math.abs(s-z)<=Oe*Math.max(1,Math.abs(s),Math.abs(z))&&Math.abs(a-U)<=Oe*Math.max(1,Math.abs(a),Math.abs(U))&&Math.abs(o-B)<=Oe*Math.max(1,Math.abs(o),Math.abs(B))&&Math.abs(l-X)<=Oe*Math.max(1,Math.abs(l),Math.abs(X))&&Math.abs(c-J)<=Oe*Math.max(1,Math.abs(c),Math.abs(J))&&Math.abs(h-Q)<=Oe*Math.max(1,Math.abs(h),Math.abs(Q))&&Math.abs(m-le)<=Oe*Math.max(1,Math.abs(m),Math.abs(le))&&Math.abs(g-ie)<=Oe*Math.max(1,Math.abs(g),Math.abs(ie))&&Math.abs(v-re)<=Oe*Math.max(1,Math.abs(v),Math.abs(re))&&Math.abs(b-se)<=Oe*Math.max(1,Math.abs(b),Math.abs(se))&&Math.abs(x-Te)<=Oe*Math.max(1,Math.abs(x),Math.abs(Te))&&Math.abs($-ne)<=Oe*Math.max(1,Math.abs($),Math.abs(ne))&&Math.abs(M-_e)<=Oe*Math.max(1,Math.abs(M),Math.abs(_e))}function o6e(t){const e=qo(),i=t[0],r=t[1],n=t[2],s=t[4],a=t[5],o=t[6],l=t[8],c=t[9],h=t[10];return Math.abs(1-(i*i+s*s+l*l))<=e&&Math.abs(1-(r*r+a*a+c*c))<=e&&Math.abs(1-(n*n+o*o+h*h))<=e}function l6e(t){return t[0]===1&&t[1]===0&&t[2]===0&&t[4]===0&&t[5]===1&&t[6]===0&&t[8]===0&&t[9]===0&&t[10]===1}const c6e=Qve,u6e=ebe;Object.freeze(Object.defineProperty({__proto__:null,add:i6e,adjoint:IVe,copy:Jve,determinant:MVe,equals:a6e,exactEquals:s6e,frob:t6e,fromQuat:WVe,fromQuat2:jVe,fromRotation:RVe,fromRotationTranslation:Kve,fromRotationTranslationScale:HVe,fromRotationTranslationScaleOrigin:GVe,fromScaling:FVe,fromTranslation:LVe,fromXRotation:zVe,fromYRotation:NVe,fromZRotation:DVe,frustum:ZVe,getRotation:qVe,getScale:BVe,getTranslation:UVe,hasIdentityRotation:l6e,identity:JD,invert:Xve,invertOrIdentity:TVe,isOrthoNormal:o6e,lookAt:QVe,mul:c6e,multiply:Qve,multiplyScalar:r6e,multiplyScalarAndAdd:n6e,ortho:XVe,perspective:YVe,perspectiveFromFieldOfView:JVe,rotate:kVe,rotateX:AVe,rotateY:PVe,rotateZ:OVe,scale:EVe,set:Bv,str:e6e,sub:u6e,subtract:ebe,targetTo:KVe,translate:CVe,transpose:qv},Symbol.toStringTag,{value:"Module"}));const d6e=(t,e)=>{const i=Bv(t,e,0,0,0,0,e,0,0,0,0,e,0,0,0,0,1);return qv(i,i)},h6e=(t,e)=>{const i=Bv(t,e,0,0,.5-.5*e,0,e,0,.5-.5*e,0,0,e,.5-.5*e,0,0,0,1);return qv(i,i)},p6e=(t,e)=>{const i=1-e,r=Bv(t,.2126+.7874*i,.7152-.7152*i,.0722-.0722*i,0,.2126-.2126*i,.7152+.2848*i,.0722-.0722*i,0,.2126-.2126*i,.7152-.7152*i,.0722+.9278*i,0,0,0,0,1);return qv(r,r)},f6e=(t,e)=>{const i=Math.sin(e*Math.PI/180),r=Math.cos(e*Math.PI/180),n=Bv(t,.213+.787*r-.213*i,.715-.715*r-.715*i,.072-.072*r+.928*i,0,.213-.213*r+.143*i,.715+.285*r+.14*i,.072-.072*r-.283*i,0,.213-.213*r-.787*i,.715-.715*r+.715*i,.072+.928*r+.072*i,0,0,0,0,1);return qv(n,n)},m6e=(t,e)=>{const i=1-2*e,r=Bv(t,i,0,0,e,0,i,0,e,0,0,i,e,0,0,0,1);return qv(r,r)},g6e=(t,e)=>{const i=Bv(t,.213+.787*e,.715-.715*e,.072-.072*e,0,.213-.213*e,.715+.285*e,.072-.072*e,0,.213-.213*e,.715-.715*e,.072+.928*e,0,0,0,0,1);return qv(i,i)},y6e=(t,e)=>{const i=1-e,r=Bv(t,.393+.607*i,.769-.769*i,.189-.189*i,0,.349-.349*i,.686+.314*i,.168-.168*i,0,.272-.272*i,.534-.534*i,.131+.869*i,0,0,0,0,1);return qv(r,r)};let tbe=class ibe{constructor(e,i,r){this.strength=e,this.radius=i,this.threshold=r,this.type="bloom"}interpolate(e,i,r){this.strength=Ml(e.strength,i.strength,r),this.radius=Ml(e.radius,i.radius,r),this.threshold=Ml(e.threshold,i.threshold,r)}clone(){return new ibe(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:b2(this.radius),strength:this.strength,threshold:this.threshold}}},rbe=class nbe{constructor(e){this.radius=e,this.type="blur"}interpolate(e,i,r){this.radius=Math.round(Ml(e.radius,i.radius,r))}clone(){return new nbe(this.radius)}toJSON(){return{type:"blur",radius:b2(this.radius)}}},_9=class sbe{constructor(e,i){this.type=e,this.amount=i,this.type!=="invert"&&this.type!=="grayscale"&&this.type!=="sepia"||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,i,r){this.amount=Ml(e.amount,i.amount,r),this._updateMatrix()}clone(){return new sbe(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const e=this._colorMatrix||YD();switch(this.type){case"brightness":this._colorMatrix=d6e(e,this.amount);break;case"contrast":this._colorMatrix=h6e(e,this.amount);break;case"grayscale":this._colorMatrix=p6e(e,this.amount);break;case"invert":this._colorMatrix=m6e(e,this.amount);break;case"saturate":this._colorMatrix=g6e(e,this.amount);break;case"sepia":this._colorMatrix=y6e(e,this.amount)}}},abe=class obe{constructor(e,i,r,n){this.offsetX=e,this.offsetY=i,this.blurRadius=r,this.color=n,this.type="drop-shadow"}interpolate(e,i,r){this.offsetX=Ml(e.offsetX,i.offsetX,r),this.offsetY=Ml(e.offsetY,i.offsetY,r),this.blurRadius=Ml(e.blurRadius,i.blurRadius,r),this.color[0]=Math.round(Ml(e.color[0],i.color[0],r)),this.color[1]=Math.round(Ml(e.color[1],i.color[1],r)),this.color[2]=Math.round(Ml(e.color[2],i.color[2],r)),this.color[3]=Ml(e.color[3],i.color[3],r)}clone(){return new obe(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const e=[...this.color];return e[3]*=255,{type:"drop-shadow",xoffset:b2(this.offsetX),yoffset:b2(this.offsetY),blurRadius:b2(this.blurRadius),color:e}}},lbe=class cbe{constructor(e){this.angle=e,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,i,r){this.angle=Ml(e.angle,i.angle,r),this._updateMatrix()}clone(){return new cbe(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const e=this._colorMatrix||YD();this._colorMatrix=f6e(e,this.angle)}},ube=class dbe{constructor(e){this.amount=e,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(e,i,r){this.amount=Ml(e.amount,i.amount,r)}clone(){return new dbe(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}};function Ml(t,e,i){return t+(e-t)*i}function b2(t){return Math.round(1e3*Qi(t))/1e3}function v6e(t){switch(t.type){case"grayscale":case"sepia":case"invert":return new _9(t.type,0);case"saturate":case"brightness":case"contrast":return new _9(t.type,1);case"opacity":return new ube(1);case"hue-rotate":return new lbe(0);case"blur":return new rbe(0);case"drop-shadow":return new abe(0,0,0,[...nY("transparent")]);case"bloom":return new tbe(0,0,1)}}function hbe(t,e){const i=t.length>e.length?t:e;return(t.length>e.length?e:t).every((r,n)=>r.type===i[n].type)}function pbe(t,e){const i=t.length>e.length?t:e,r=t.length>e.length?e:t;for(let n=r.length;n<i.length;n++)r.push(v6e(i[n]))}function b6e(t){const e=t[0];return!!e&&"type"in e}const u6=()=>Ie.getLogger("esri.support.basemapUtils");function w6e(){return{}}function _6e(t){for(const e in t){const i=t[e];i&&!i.destroyed&&i.destroy(),delete t[e]}}function x6e(t,e){let i;if(typeof t=="string"){const r=t in u9,n=!r&&t.includes("/");if(!r&&!n){if(v8())u6().warn(`Unable to find basemap definition for: ${t}. See available styles at https://developers.arcgis.com/rest/basemap-styles/`);else{const s=Object.entries(u9).filter(([a,o])=>o.classic||o.is3d).map(([a])=>`"${a}"`).sort().join(", ");u6().warn(`Unable to find basemap definition for: ${t}. Try one of these: ${s}`)}return null}e&&(i=e[t]),i||(i=r?y2.fromId(t):new y2({style:{id:t}}),e&&(e[t]=i))}else i=Wn(y2,t);return i!=null&&i.destroyed&&(u6().warn("The provided basemap is already destroyed",{basemap:i}),i=null),i}function $6e(t){return new Id({getCollections:()=>[t.tables,t.layers],getChildrenFunction:e=>{const i=[];return"tables"in e&&i.push(e.tables),"layers"in e&&i.push(e.layers),i},itemFilterFunction:e=>{const i=e.parent;return!!i&&"tables"in i&&i.tables.includes(e)}})}function oO(t){for(const e of t.values())e==null||e.destroy();t.clear()}const yne={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function S6e(t){let e=null;if(typeof t=="string")if(t in yne){const i=yne[t];e=new ER({resourceInfo:{data:{layers:[i]}}})}else Ie.getLogger("esri.support.groundUtils").warn(`Unable to find ground definition for: ${t}. Try "world-elevation"`);else e=Wn(ER,t);return e}function x9(t,e,i){let r,n;if(t)for(let s=0,a=t.length;s<a;s++){if(r=t.at(s),(r==null?void 0:r[e])===i)return r;if((r==null?void 0:r.type)==="group"&&(n=x9(r.layers,e,i),n))return n}}const T6e=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),this.layers=new Ue;const n=o=>{o.parent&&o.removeFromParent()},s=o=>{o.parent=this,this.layerAdded(o),o.type!=="elevation"&&o.type!=="base-elevation"||Ie.getLogger(this).error(`Layer 'title:${o.title}, id:${o.id}' of type '${o.type}' is not supported as an operational layer and will therefore be ignored.`)},a=o=>{o.parent=null,this.layerRemoved(o)};this.addHandles([this.layers.on("before-add",o=>{if(o.item===this)return o.preventDefault(),void Ie.getLogger(this).error("#add()","Cannot add layer to itself.");n(o.item)}),this.layers.on("after-add",o=>s(o.item)),this.layers.on("after-remove",o=>a(o.item))])}destroy(){const r=this.layers.toArray();for(const n of r)n.destroy();this.layers.destroy()}removeChildLayer(r){var n;this.layers.remove(r),(n=super.removeChildLayer)==null||n.call(this,r)}set layers(r){this._set("layers",Mp(r,this._get("layers")))}add(r,n){const s=this.layers;if(n=s.getNextIndex(n),r instanceof Kr){const a=r;a.parent===this?this.reorder(a,n):s.add(a,n)}else uo(r)?r.then(a=>{this.destroyed||this.add(a,n)}):Ie.getLogger(this).error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(r,n){const s=this.layers;let a=s.getNextIndex(n);r.slice().forEach(o=>{o.parent!==this?(s.add(o,a),a+=1):this.reorder(o,a)})}findLayerById(r){return x9(this.layers,"id",r)}findLayerByUid(r){return x9(this.layers,"uid",r)}remove(r){return this.layers.remove(r)}removeMany(r){return this.layers.removeMany(r)}removeAll(){return this.layers.removeAll()}reorder(r,n){return this.layers.reorder(r,n)}layerAdded(r){}layerRemoved(r){}};return d([f()],i.prototype,"layers",null),i=d([V("esri.support.LayersMixin")],i),i},I6e=new Set(["feature","subtype-group"]);function $9(t,e,i){if(t)for(let r=0,n=t.length;r<n;r++){const s=t.at(r);if(s[e]===i)return s;if((s==null?void 0:s.type)==="group"){const a=$9(s.tables,e,i);if(a)return a}}}const M6e=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),this.tables=new Ue,this.addHandles([this.tables.on("after-add",n=>{const s=n.item;s.parent&&s.parent!==this&&s.removeFromParent(),s.parent=this,I6e.has(s.type)||Ie.getLogger(this).error(`Layer 'title:${s.title}, id:${s.id}' of type '${s.type}' is not supported as a table and will therefore be ignored.`)}),this.tables.on("after-remove",n=>{n.item.parent=null})])}destroy(){const r=this.tables.toArray();for(const n of r)n.destroy();this.tables.destroy()}removeChildLayer(r){var n;this.tables.remove(r),(n=super.removeChildLayer)==null||n.call(this,r)}set tables(r){this._set("tables",Mp(r,this._get("tables")))}findTableById(r){return $9(this.tables,"id",r)}findTableByUid(r){return $9(this.tables,"uid",r)}};return d([f()],i.prototype,"tables",null),i=d([V("esri.support.TablesMixin")],i),i};let Yc=class extends M6e(T6e(VT)){constructor(e){super(e),this.allLayers=new Id({getCollections:()=>{var i,r,n,s;return[(i=this.basemap)==null?void 0:i.baseLayers,(r=this.basemap)==null?void 0:r.groundLayers,(n=this.ground)==null?void 0:n.layers,this.layers,(s=this.basemap)==null?void 0:s.referenceLayers]},getChildrenFunction:i=>"layers"in i?i.layers:null}),this.focusAreas=new Yve,this.allTables=$6e(this),this.basemap=null,this.editableLayers=new Id({getCollections:()=>[this.allLayers],itemFilterFunction:_Ve}),this.ground=new ER,this._basemapCache=w6e(),this.addHandles(cn(()=>this.ground,(i,r)=>{(r==null?void 0:r.parent)===this&&(r.parent=null),i.parent=this},{sync:!0}))}destroy(){_6e(this._basemapCache),this._basemapCache=null,this.focusAreas.destroy(),this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),this.basemap=Or(this.basemap),Or(this.ground),this._set("ground",null)}castBasemap(e){return x6e(e,this._basemapCache)}castGround(e){return S6e(e)??this._get("ground")}findLayerById(e){return this.allLayers.find(i=>i.id===e)}findTableById(e){return this.allTables.find(i=>i.id===e)}};d([f({readOnly:!0,dependsOn:[]})],Yc.prototype,"allLayers",void 0),d([f({type:Yve,nonNullable:!0,json:{write:{overridePolicy:t=>({enabled:t.areas.length>0,ignoreOrigin:!0})}}})],Yc.prototype,"focusAreas",void 0),d([f({readOnly:!0})],Yc.prototype,"allTables",void 0),d([f({type:y2,json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],Yc.prototype,"basemap",void 0),d([_i("basemap")],Yc.prototype,"castBasemap",null),d([f({readOnly:!0})],Yc.prototype,"editableLayers",void 0),d([f({type:ER,nonNullable:!0})],Yc.prototype,"ground",void 0),d([_i("ground")],Yc.prototype,"castGround",null),d([f()],Yc.prototype,"undoRedo",void 0),Yc=d([V("esri.Map")],Yc);const fbe=Yc;var iC;const kR=Es()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),mbe=kR.jsonValues.slice();WB(mbe,"orthometric");const w2=Es()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let Po=iC=class extends $e{constructor(t){super(t),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(t,e,i){return kR.write(t,e,i)}readHeightModel(t,e,i){return kR.read(t)||(i!=null&&i.messages&&i.messages.push(C6e(t,{context:i})),null)}readHeightUnit(t,e,i){return w2.read(t)||(i!=null&&i.messages&&i.messages.push(vne(t,{context:i})),null)}readHeightUnitService(t,e,i){return mZ(t)||w2.read(t)||(i!=null&&i.messages&&i.messages.push(vne(t,{context:i})),null)}readVertCRS(t,e){return e.vertCRS||e.ellipsoid||e.geoid}clone(){return new iC({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(t){return!!t&&(this===t||this.heightModel===t.heightModel&&this.heightUnit===t.heightUnit&&this.vertCRS===t.vertCRS)}static deriveUnitFromSR(t,e){const i=lme(e);return new iC({heightModel:t.heightModel,heightUnit:i??void 0,vertCRS:t.vertCRS})}write(t,e){return e={origin:"web-scene",...e},super.write(t,e)}static fromJSON(t){if(!t)return null;const e=new iC;return e.read(t,{origin:"web-scene"}),e}};function vne(t,e){return new Ic("height-unit:unsupported",`Height unit of value '${t}' is not supported`,e)}function C6e(t,e){return new Ic("height-model:unsupported",`Height model of value '${t}' is not supported`,e)}d([f({type:kR.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:mbe,default:"ellipsoidal",write:{isRequired:!0}}}}})],Po.prototype,"heightModel",void 0),d([Ge("web-scene","heightModel")],Po.prototype,"writeHeightModel",null),d([je(["web-scene","service"],"heightModel")],Po.prototype,"readHeightModel",null),d([f({type:w2.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:w2.jsonValues,write:{writer:w2.write,isRequired:!0}}}}})],Po.prototype,"heightUnit",void 0),d([je("web-scene","heightUnit")],Po.prototype,"readHeightUnit",null),d([je("service","heightUnit")],Po.prototype,"readHeightUnitService",null),d([f({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],Po.prototype,"vertCRS",void 0),d([je("service","vertCRS",["vertCRS","ellipsoid","geoid"])],Po.prototype,"readVertCRS",null),Po=iC=d([V("esri.geometry.HeightModelInfo")],Po);let d6;async function E6e(){return d6==null&&(d6=de(()=>import("./WhereClauseCache-rqiS6qCp.js"),__vite__mapDeps([18,19])).then(t=>new t.WhereClauseCache(500,500))),d6}async function oY(t,e){const i=await E6e(),r=i.get(t,e);if(r==null)throw i.getError(t,e);return r}function ow(t,e){return t||(t=null),e||(e=null),t==="1=1"?e??t:e==="1=1"?t??e:t&&e?`(${t}) AND (${e})`:t??e}function S9(t,e){return t||(t=null),e||(e=null),t==="1=1"||e==="1=1"||t===e?t==="1=1"?t:e:t&&e?`(${t}) OR (${e})`:t??e}function lY(t,e){return e.length===0?null:`${t} IN (${k6e(e)})`}function k6e(t){return t.map(e=>typeof e=="string"?A6e(e):e).join(",")}function A6e(t){return`'${t.replaceAll("'","''")}'`}function P6e(t){return typeof t=="number"}function j$t(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t}function V$t(t){return typeof t=="boolean"}function Vk(t){return typeof t=="string"||t instanceof String}function O6e(t){return t==null||Vk(t)}function U$t(t){return Array.isArray(t)}function gbe(t){return(t==null?void 0:t.declaredClass)==="esri.Graphic"}function L6e(t){return t instanceof Date}const F6e="HH:mm",R6e="HH:mm:ss",z6e="HH:mm:ss.SSS",N6e=[z6e,R6e,F6e,"TT"],D6e="yyyy-MM-dd";function bne(t){if(!t||!Vk(t))return null;const e=ut.fromFormat(t,D6e);return e.isValid?e:null}function wne(t){return t&&Vk(t)?kAe(N6e,e=>{const i=ut.fromFormat(t,e);return i.isValid?i:null})??null:null}function _ne(t){if(!t||!Vk(t))return null;const e=ut.fromISO(t);return e.isValid?e:null}const ybe=new Set(["integer","small-integer","long","big-integer","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeLong","esriFieldTypeBigInteger"]);function j6e(t){return t!=null&&ybe.has(t.type)}function vbe(t){return t!=null&&(t.type==="date-only"||t.type==="esriFieldTypeDateOnly")}function bbe(t){return t!=null&&(t.type==="timestamp-offset"||t.type==="esriFieldTypeTimestampOffset")}function wbe(t){return t!=null&&(t.type==="time-only"||t.type==="esriFieldTypeTimeOnly")}const V6e=new Set(["single","double","esriFieldTypeSingle","esriFieldTypeDouble"]);RW(ybe,V6e);function B$t(t,e){const i=t==null?void 0:t.domain;if(!i||i.type!=="range")return;const r="range"in i?i.range[0]:i.minValue,n="range"in i?i.range[1]:i.maxValue,s=j6e(t);return vbe(t)||wbe(t)||bbe(t)?{...U6e(t,n,r),isInteger:s}:{min:r!=null&&typeof r=="number"?r:null,max:n!=null&&typeof n=="number"?n:null,rawMin:r,rawMax:n,isInteger:s}}function U6e(t,e,i){var r,n,s,a,o,l;return vbe(t)?{min:(r=bne(i))==null?void 0:r.toMillis(),max:(n=bne(e))==null?void 0:n.toMillis(),rawMin:i,rawMax:e}:wbe(t)?{min:(s=wne(i))==null?void 0:s.toMillis(),max:(a=wne(e))==null?void 0:a.toMillis(),rawMin:i,rawMax:e}:bbe(t)?{min:(o=_ne(i))==null?void 0:o.toMillis(),max:(l=_ne(e))==null?void 0:l.toMillis(),rawMin:i,rawMax:e}:{max:null,min:null}}function B6e(t){if(!t)return;const e=t.match(q6e);return e!=null&&e.groups?e.groups.doubleQuoted??e.groups.singleQuoted??e.groups.dotNotation:void 0}const q6e=/^(\$feature\[(?:"(?<doubleQuoted>[^"]+)"|'(?<singleQuoted>[^']+)')\]|\$feature\.(?<dotNotation>[a-z_][a-z0-9_]*))$/i;function H6e(t){var e,i;return((i=(e=t.match(G6e))==null?void 0:e[1])==null?void 0:i.replaceAll("\\'","'"))??null}const G6e=/^hash\(\$feature\['((\\'|[^'])+)'\]\) \* 8\.381e-8$/;let h6;function Vd(){return h6||(h6=(async()=>{const[t,e,i]=await Promise.all([de(()=>import("./arcadeUtils-Bn4k5G5e.js"),__vite__mapDeps([146,147,148,149,150,23,151,11,152,153,19,154,155])),de(()=>import("./batchExec-ByiXnxxr.js"),__vite__mapDeps([156,65])),de(()=>import("./aiServices-ldZZvE2J.js").then(r=>r.a),__vite__mapDeps([152,149,150,23,153,148]))]);return{arcade:t.arcade,arcadeUtils:t,batchExec:e,aiServices:i,Dictionary:t.Dictionary,Feature:t.arcadeFeature,Voxel:t.Voxel,Pixel:t.Pixel}})()),h6}const W6e=/^([0-9_])/,Z6e=/[^a-z0-9_\u0080-\uffff]+/gi;function Y6e(t){return t==null?null:t.trim().replaceAll(Z6e,"_").replace(W6e,"F$1")||null}const J6e=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],X6e=["field","normalizationField"];function xne(t,e){if(t!=null&&e!=null){for(const i of Array.isArray(t)?t:[t])if($ne(J6e,i,e),"visualVariables"in i&&i.visualVariables)for(const r of i.visualVariables)$ne(X6e,r,e)}}function $ne(t,e,i){if(t)for(const r of t){const n=$k(r,e),s=n&&typeof n!="function"&&i.get(n);s&&qn(r,s.name,e)}}function _be(t,e){var i;if(t!=null&&((i=e==null?void 0:e.fields)!=null&&i.length))if("startField"in t){const r=e.get(t.startField),n=e.get(t.endField);t.startField=(r==null?void 0:r.name)??null,t.endField=(n==null?void 0:n.name)??null}else{const r=e.get(t.startTimeField),n=e.get(t.endTimeField);t.startTimeField=(r==null?void 0:r.name)??null,t.endTimeField=(n==null?void 0:n.name)??null}}const p6=new Set;function XD(t,e){return t&&e?(p6.clear(),Lv(p6,t,e),Array.from(p6).sort()):[]}function Lv(t,e,i){var r;if(i)if((r=e==null?void 0:e.fields)!=null&&r.length)if(i.includes("*"))for(const{name:n}of e.fields)t.add(n);else for(const n of i)ho(t,e,n);else{if(i.includes("*"))return t.clear(),void t.add("*");for(const n of i)n!=null&&t.add(n)}}function ho(t,e,i){if(typeof i=="string")if(e){const r=e.get(i);r&&t.add(r.name)}else t.add(i)}function q$t(t,e){return e==null||t==null?[]:e.includes("*")?(t.fields??[]).map(i=>i.name):e}function H$t(t,e,i=1){if(!e||!t)return[];if(e.includes("*"))return["*"];const r=XD(t,e);return r.length/t.fields.length>=i?["*"]:r}async function za(t,e,i,r){var s;if(!r)return;const n=B6e(r);if(n)ho(t,e,n);else{const{arcadeUtils:a}=await Vd(),o=a.extractFieldNames(r,(i==null?void 0:i.partitions)??((s=e==null?void 0:e.fields)==null?void 0:s.map(l=>l.name)));for(const l of o)ho(t,(i==null?void 0:i.index)??e,l)}}async function cY(t,e,i){if(i&&i!=="1=1"){const r=await oY(i,e);if(!r.isStandardized)throw new ae("fieldUtils:collectFilterFields","Where clause is not standardized",{where:i});Lv(t,e,r.fieldNames)}}function Q6e({displayField:t,fields:e}){return t||(e!=null&&e.length?K6e(e):null)}function K6e(t){return f6(t,"name-or-title")||f6(t,"unique-identifier")||f6(t,"type-or-category")||eUe(t)}function eUe(t){for(const e of t){if(!(e!=null&&e.name))continue;const i=e.name.toLowerCase();if(i.includes("name")||i.includes("title"))return e.name}return null}function f6(t,e){for(const i of t)if(i!=null&&i.valueType&&i.valueType===e)return i.name;return null}async function G$t(t,e){var r;if(!e)return;const i=(r=e.elevationInfo)==null?void 0:r.featureExpressionInfo;return i?i.collectRequiredFields(t,e.fieldsIndex):void 0}function tUe(t,e,i){i.onStatisticExpression?za(t,e,null,i.onStatisticExpression.expression):t.add(i.onStatisticField)}async function W$t(t,e,i){if(!e||!i||!("fields"in i))return;const r=[],n=i.popupTemplate;r.push(xbe(t,e,n)),i.fields&&r.push(...i.fields.map(async s=>tUe(t,e.fieldsIndex,s))),await Promise.all(r)}async function Z$t(t,e){var s,a,o;const{fieldsIndex:i,trackInfo:r}=e;if(!e||!r||!i)return;const n=[(s=r.latestObservations.renderer)==null?void 0:s.collectRequiredFields(t,i),(a=r.previousObservations.renderer)==null?void 0:a.collectRequiredFields(t,i),(o=r.trackLines.renderer)==null?void 0:o.collectRequiredFields(t,i)];r.popupTemplate&&n.push(xbe(t,e,r.popupTemplate));for(const l of[r.latestObservations.labelingInfo,r.previousObservations.labelingInfo,r.trackLines.labelingInfo])if(l)for(const c of l)n.push(Ibe(t,i,c));await Promise.all(n)}async function xbe(t,e,i){const r=[];i!=null&&i.expressionInfos&&r.push(...i.expressionInfos.map(s=>za(t,e.fieldsIndex,null,s.expression)));const n=i==null?void 0:i.content;if(Array.isArray(n))for(const s of n)s.type==="expression"&&s.expressionInfo&&r.push(za(t,e.fieldsIndex,null,s.expressionInfo.expression));await Promise.all(r)}async function Y$t(t,e,i){e&&(e.timeInfo&&(i!=null&&i.timeExtent)&&Lv(t,e.fieldsIndex,[e.timeInfo.startField,e.timeInfo.endField]),e.floorInfo&&Lv(t,e.fieldsIndex,[e.floorInfo.floorField]),(i==null?void 0:i.where)!=null&&await cY(t,e.fieldsIndex,i.where))}async function J$t(t,e,i){e&&i&&await Promise.all(i.map(r=>iUe(t,e,r)))}async function iUe(t,e,i){e&&i&&(i.valueExpression?await za(t,e.fieldsIndex,null,i.valueExpression):i.field&&ho(t,e.fieldsIndex,i.field))}function X$t(t){return t?XD(t.fieldsIndex,$be(t)):[]}function rUe(t){if(!t)return[];const e=t.geometryFieldsInfo;return e?XD(t.fieldsIndex,[e.shapeAreaField,e.shapeLengthField]):[]}async function Q$t(t,e,i){if(!e||!i)return;const r=e.fieldsIndex;await Promise.all(i.filters.map(n=>cY(t,r,n.where)))}const nUe=new Set(["oid","global-id","guid"]),sUe=new Set(["oid","global-id"]),aUe=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^shape$/i,/^shape_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/objectid/i,/^perimeter_/i,/_perimeter$/i,/_i$/i];function oUe(t){const e=new Set;Sbe(t).forEach(r=>e.add(r)),rUe(t).forEach(r=>e.add(r.toLowerCase()));const i=t&&"infoFor3D"in t?t.infoFor3D:void 0;return i&&(Object.values(i.assetMapFieldRoles).forEach(r=>e.add(r.toLowerCase())),Object.values(i.transformFieldRoles).forEach(r=>e.add(r.toLowerCase()))),Array.from(e)}function $be(t){if(!t)return[];const e="editFieldsInfo"in t&&t.editFieldsInfo;if(!e)return[];const{creationDateField:i,creatorField:r,editDateField:n,editorField:s}=e;return[i,r,n,s].filter(Boolean)}function Sbe(t){return $be(t).map(e=>e.toLowerCase())}function Tbe(t,e){var i;return t.editable&&!nUe.has(t.type)&&!Sbe(e).includes(((i=t.name)==null?void 0:i.toLowerCase())??"")}function lUe(t,e){var r;const i=((r=t.name)==null?void 0:r.toLowerCase())??"";return!((e==null?void 0:e.objectIdField)!=null&&i===e.objectIdField.toLowerCase()||(e==null?void 0:e.globalIdField)!=null&&i===e.globalIdField.toLowerCase()||oUe(e).includes(i)||sUe.has(t.type)||aUe.some(n=>n.test(i)))}async function K$t(t,e){const{labelingInfo:i,fieldsIndex:r}=e;i!=null&&i.length&&await Promise.all(i.map(n=>Ibe(t,r,n)))}async function Ibe(t,e,i){if(!i)return;const r=i.getLabelExpression(),n=i.where;if(r.type==="arcade")await za(t,e,null,r.expression);else{const s=r.expression.match(/{[^}]*}/g);s&&s.forEach(a=>{ho(t,e,a.slice(1,-1))})}await cY(t,e,n)}function cUe(t){const e=t.defaultValue;return e!==void 0&&Cbe(t,e)?e:t.nullable?null:void 0}function eSt(t){const e=typeof t=="string"?{type:t}:t;return kbe(e)?255:e.type==="esriFieldTypeDate"||e.type==="date"?8:void 0}function Mbe(t){return typeof t=="number"&&!isNaN(t)&&isFinite(t)}function uUe(t){return t===null||Mbe(t)}function dUe(t){return t===null||Number.isInteger(t)}function hUe(){return!0}function Cbe(t,e){let i;switch(t.type){case"date":case"integer":case"long":case"small-integer":case"big-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":case"esriFieldTypeBigInteger":i=t.nullable?dUe:Number.isInteger;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":i=t.nullable?uUe:Mbe;break;case"string":case"esriFieldTypeString":i=t.nullable?O6e:Vk;break;default:i=hUe}return arguments.length===1?i:i(e)}const pUe=["integer","small-integer","big-integer","long"],fUe=["single","double"],mUe=["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeLong","esriFieldTypeBigInteger"],gUe=["esriFieldTypeSingle","esriFieldTypeDouble"],Ebe=new Set([...pUe,...mUe]),yUe=new Set([...fUe,...gUe]),vUe=RW(Ebe,yUe);function bUe(t){return t!=null&&Ebe.has(t.type)}function QD(t){return t!=null&&vUe.has(t.type)}function kbe(t){return t!=null&&(t.type==="string"||t.type==="esriFieldTypeString")}function KD(t){return t!=null&&(t.type==="date"||t.type==="esriFieldTypeDate")}function Abe(t){return t!=null&&(t.type==="date-only"||t.type==="esriFieldTypeDateOnly")}function Pbe(t){return t!=null&&(t.type==="timestamp-offset"||t.type==="esriFieldTypeTimestampOffset")}function uY(t){return t!=null&&(t.type==="time-only"||t.type==="esriFieldTypeTimeOnly")}function Sne(t){return t!=null&&(t.type==="oid"||t.type==="esriFieldTypeOID")}function Tne(t){return t!=null&&(t.type==="global-id"||t.type==="esriFieldTypeGlobalID")}function tSt(t,e){return wUe(t,e)===null}function iSt(t){return t==null||typeof t=="number"&&isNaN(t)?null:t}function wUe(t,e){return t==null||t.nullable&&e===null?null:Cbe(t,e)?QD(t)&&!_Ue(t.type,Number(e))?"numeric-range-validation-error::out-of-range":null:"type-validation-error::invalid-type"}function _Ue(t,e){const i=typeof t=="string"?Obe(t):t;if(!i)return!1;const r=i.min,n=i.max;return i.isInteger?Number.isInteger(e)&&e>=r&&e<=n:e>=r&&e<=n}function Obe(t){switch(t){case"esriFieldTypeSmallInteger":case"small-integer":return xUe;case"esriFieldTypeInteger":case"esriFieldTypeLong":case"integer":case"long":return $Ue;case"esriFieldTypeBigInteger":case"big-integer":return SUe;case"esriFieldTypeSingle":case"single":return TUe;case"esriFieldTypeDouble":case"double":return IUe}}const xUe={min:-32768,max:32767,isInteger:!0,rawMin:-32768,rawMax:32767},$Ue={min:-2147483648,max:2147483647,isInteger:!0,rawMin:-2147483648,rawMax:2147483647},SUe={min:-Number.MAX_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,isInteger:!0,rawMin:-Number.MAX_SAFE_INTEGER,rawMax:Number.MAX_SAFE_INTEGER},lO=(2-2**-23)*2**127,TUe={min:-lO,max:lO,isInteger:!1,rawMin:-lO,rawMax:lO},IUe={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1,rawMin:-Number.MAX_VALUE,rawMax:Number.MAX_VALUE};function rSt(t,e,i){switch(t){case"domain-validation-error::invalid-coded-value":return`Value ${i} is not in the coded domain - field: ${e.name}, domain: ${JSON.stringify(e.domain)}`;case"domain-validation-error::value-out-of-range":return`Value ${i} is out of the range of valid values - field: ${e.name}, domain: ${JSON.stringify(e.domain)}`;case"type-validation-error::invalid-type":return`Value ${i} is not a valid value for the field type - field: ${e.name}, type: ${e.type}, nullable: ${e.nullable}`;case"numeric-range-validation-error::out-of-range":{const{min:r,max:n}=Obe(e.type);return`Value ${i} is out of range for the number type - field: ${e.name}, type: ${e.type}, value range is ${r} to ${n}`}}}function Lbe(t,e){return!MUe(t,e,null)}function MUe(t,e,i){if(!(t!=null&&t.attributes)||!e)return!0;const r=new Set(Object.keys(t.attributes));let n=!1;for(const s of e)if(!r.has(s)&&(n=!0,i==null))break;return n}function T9(t){return!!t&&["raster.itempixelvalue","raster.servicepixelvalue"].some(e=>t.toLowerCase().startsWith(e))}function dY(t){const e=t==null?void 0:t.match(/{[^}]+}/g);return e?e.map(i=>i.slice(1,-1).split(":")[0].trim()):[]}let dL=class extends $e{constructor(e){super(e),this.type=null}};d([f({type:["attachments","custom","fields","media","text","expression","relationship","utility-network-associations"],readOnly:!0,json:{read:!1,write:!0}})],dL.prototype,"type",void 0),dL=d([V("esri.popup.content.Content")],dL);const ag=dL,cO=new jt({asc:"ascending",desc:"descending"});let rC=class extends bt($e){constructor(e){super(e),this.field=null,this.order="ascending"}};d([f({type:String,json:{write:!0}})],rC.prototype,"field",void 0),d([f({type:cO.apiValues,json:{type:cO.jsonValues,read:cO.read,write:cO.write}})],rC.prototype,"order",void 0),rC=d([V("esri.popup.support.AttachmentsOrderByInfo")],rC);const Fbe=rC;let yh=class extends bt(ag){constructor(e){super(e),this.attachmentKeywords=null,this.attachmentTypes=null,this.description=null,this.displayType="auto",this.orderByFields=null,this.title=null,this.type="attachments"}};d([f({type:[String],json:{write:!0}})],yh.prototype,"attachmentKeywords",void 0),d([f({type:[["application","audio","image","model","text","video"]],json:{write:!0}})],yh.prototype,"attachmentTypes",void 0),d([f({type:String,json:{write:!0}})],yh.prototype,"description",void 0),d([f({type:["auto","preview","list"],json:{write:!0}})],yh.prototype,"displayType",void 0),d([f({type:[Fbe],json:{write:!0}})],yh.prototype,"orderByFields",void 0),d([f({type:String,json:{write:!0}})],yh.prototype,"title",void 0),d([f({type:["attachments"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],yh.prototype,"type",void 0),yh=d([V("esri.popup.content.AttachmentsContent")],yh);const aT=yh;var I9;let Zb=I9=class extends ag{constructor(t){super(t),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new I9({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?he(this.outFields):null})}};d([f()],Zb.prototype,"creator",void 0),d([f()],Zb.prototype,"destroyer",void 0),d([f()],Zb.prototype,"outFields",void 0),d([f({type:["custom"],readOnly:!0})],Zb.prototype,"type",void 0),Zb=I9=d([V("esri.popup.content.CustomContent")],Zb);const Rbe=Zb;var M9;let px=M9=class extends $e{constructor(t){super(t),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new M9({title:this.title,expression:this.expression})}};d([f({type:String,json:{write:!0}})],px.prototype,"title",void 0),d([f({type:String,json:{write:!0}})],px.prototype,"expression",void 0),d([f({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],px.prototype,"returnType",void 0),px=M9=d([V("esri.popup.ElementExpressionInfo")],px);const zbe=px;var C9;let nC=C9=class extends ag{constructor(t){super(t),this.expressionInfo=null,this.type="expression"}clone(){var t;return new C9({expressionInfo:(t=this.expressionInfo)==null?void 0:t.clone()})}};d([f({type:zbe,json:{write:!0}})],nC.prototype,"expressionInfo",void 0),d([f({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],nC.prototype,"type",void 0),nC=C9=d([V("esri.popup.content.ExpressionContent")],nC);const lw=nC;let hL=class extends bt($e){constructor(e){super(e),this.type=null}};d([f({type:["date-time","number"],nonNullable:!0,readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],hL.prototype,"type",void 0),hL=d([V("esri.layers.support.FieldFormat")],hL);const hY=hL,Nbe="auto";let Vf=class extends hY{constructor(e){super(e),this.dateStyle=null,this.hour12=Nbe,this.month=null,this.timeStyle=null,this.type="date-time",this.year=null}};d([f({type:["full","long","medium","short"],json:{write:!0}})],Vf.prototype,"dateStyle",void 0),d([f({type:["always","auto","never"],nonNullable:!0,json:{default:Nbe,write:!0}})],Vf.prototype,"hour12",void 0),d([f({type:["long","short"],json:{write:!0}})],Vf.prototype,"month",void 0),d([f({type:["full","long","medium","short"],json:{write:!0}})],Vf.prototype,"timeStyle",void 0),d([f({type:["date-time"]})],Vf.prototype,"type",void 0),d([f({type:["numeric"],json:{write:!0}})],Vf.prototype,"year",void 0),Vf=d([V("esri.layers.support.DateTimeFieldFormat")],Vf);const vv=Vf,Ine={min:0,max:20},Dbe=2,jbe=0,Vbe="decimal",Ube="auto";let my=class extends hY{constructor(e){super(e),this.maximumFractionDigits=Dbe,this.minimumFractionDigits=jbe,this.style=Vbe,this.type="number",this.useGrouping=Ube}};d([f({type:ei,nonNullable:!0,range:Ine,json:{default:Dbe,write:!0}})],my.prototype,"maximumFractionDigits",void 0),d([f({type:ei,nonNullable:!0,range:Ine,json:{default:jbe,write:!0}})],my.prototype,"minimumFractionDigits",void 0),d([f({type:["decimal"],nonNullable:!0,json:{default:Vbe,write:!0}})],my.prototype,"style",void 0),d([f({type:["number"]})],my.prototype,"type",void 0),d([f({type:["always","auto","never"],nonNullable:!0,json:{default:Ube,write:!0}})],my.prototype,"useGrouping",void 0),my=d([V("esri.layers.support.NumberFieldFormat")],my);const AR=my;let fx=class extends bt($e){constructor(e){super(e),this.dateFormat=null,this.digitSeparator=!1,this.places=null}};d([pt(yDe)],fx.prototype,"dateFormat",void 0),d([f({type:Boolean,json:{write:!0}})],fx.prototype,"digitSeparator",void 0),d([f({type:ei,json:{write:!0}})],fx.prototype,"places",void 0),fx=d([V("esri.popup.support.FieldInfoFormat")],fx);const $n=fx,Bbe={base:hY,key:"type",errorContext:"field-configuration-field-format",typeMap:{"date-time":vv,number:AR}};function qbe(t,e){const{format:i}=t;return e&&x_(e)?i?Hbe(i,e):_2(e,{hour12:"always",useGrouping:"always"}):null}function Hbe(t,e){const{dateFormat:i}=t;if(!e)return i?Cne(t):Mne(t);if(!x_(e))return;const r={hour12:"always"};switch(e.type){case"integer":case"small-integer":case"big-integer":case"long":return Gbe(t);case"single":case"double":return Mne(t);case"date":case"timestamp-offset":return i?Cne(t):_2(e,r);case"date-only":return i?CUe(t):_2(e);case"time-only":return i?EUe(t):_2(e,r)}}function x_(t){return QD(t)||KD(t)||Abe(t)||uY(t)||Pbe(t)}function Gbe(t){return new AR({useGrouping:t.digitSeparator?"always":"never"})}function Mne(t){const e=Gbe(t),{places:i}=t;return e.minimumFractionDigits=i??0,e.maximumFractionDigits=i??2,e}function Cne(t){return new vv({dateStyle:Wbe(t),year:Xbe(t),month:Ybe(t),timeStyle:Jbe(t),hour12:Zbe(t)})}function CUe(t){return new vv({dateStyle:Wbe(t),year:Xbe(t),month:Ybe(t)})}function EUe(t){return new vv({timeStyle:Jbe(t),hour12:Zbe(t)})}function Wbe(t){const{dateFormat:e}=t;return e?e.startsWith("short-date")?"short":e.startsWith("day-short-month-year")?"medium":e.startsWith("long-month-day-year")?"long":e.startsWith("long-date")?"full":null:null}function Zbe(t){var e;return(e=t.dateFormat)!=null&&e.endsWith("-24")?"never":"always"}function Ybe(t){switch(t.dateFormat){case"short-month-year":return"short";case"long-month-year":return"long";default:return null}}function Jbe(t){const{dateFormat:e}=t;return e?e.includes("short-time")?"short":e.includes("long-time")?"medium":null:null}function Xbe(t){switch(t.dateFormat){case"short-month-year":case"long-month-year":case"year":return"numeric";default:return null}}function pY(t,e){const i=t.type==="number",r=t.type==="date-time";if(!e)return i?Ene(t):r?kne(t):null;if(x_(e))switch(e.type){case"integer":case"small-integer":case"big-integer":case"long":return i?Qbe(t):null;case"single":case"double":return i?Ene(t):null;case"date":case"timestamp-offset":return r?kne(t):null;case"date-only":return r?kUe(t):null;case"time-only":return r?AUe(t):null}}function Qbe(t){return new $n({digitSeparator:t.useGrouping!=="never"})}function Ene(t){const e=Qbe(t);return e.places=t.maximumFractionDigits,e}function kne(t){let e;const i=Kbe(t),r=e0e(t),n=t.hour12==="never"?"24":null,s=t.year==="numeric"?"year":null,a=t0e(t);return i&&r&&n?e=`${i}-${r}-${n}`:i&&r?e=`${i}-${r}`:i?e=i:s&&a?e=`${a}-${s}`:s&&(e=s),e?new $n({dateFormat:e}):null}function kUe(t){let e;const i=Kbe(t),r=t.year==="numeric"?"year":null,n=t0e(t);return i?e=i:r&&n?e=`${n}-${r}`:r&&(e=r),e?new $n({dateFormat:e}):null}function AUe(t){let e;const i=e0e(t),r=t.hour12==="never"?"24":null;return i&&r?e=`short-date-${i}-${r}`:i&&(e=`short-date-${i}`),e?new $n({dateFormat:e}):null}function Kbe(t){switch(t.dateStyle){case"short":return"short-date";case"medium":return"day-short-month-year";case"long":return"long-month-day-year";case"full":return"long-date";default:return}}function e0e(t){return t.timeStyle&&(t.timeStyle==="short"?"short-time":"long-time")}function t0e(t){switch(t.month){case"short":return"short-month";case"long":return"long-month";default:return}}function _2(t,e){if(!x_(t))return;const i=(e==null?void 0:e.useGrouping)??"auto",r=(e==null?void 0:e.hour12)??"auto";switch(t.type){case"integer":case"small-integer":case"big-integer":case"long":return new AR({minimumFractionDigits:0,maximumFractionDigits:0,useGrouping:i});case"single":case"double":return new AR({minimumFractionDigits:0,maximumFractionDigits:2,useGrouping:i});case"date":case"timestamp-offset":return new vv({dateStyle:"short",timeStyle:"short",hour12:r});case"date-only":return new vv({dateStyle:"short"});case"time-only":return new vv({timeStyle:"short",hour12:r})}}let Ql=class extends bt($e){constructor(e){super(e),this.fieldName=null,this.isEditable=!0,this.label=null,this.statisticType=null,this.stringFieldOption="text-box",this.tooltip=null,this.visible=!0}set fieldFormat(e){this._set("fieldFormat",e),this._set("format",e?pY(e):null)}set format(e){this._set("format",e),this._set("fieldFormat",e?Hbe(e):null)}readFormat(e,i){if(!i.fieldFormat)return e?$n.fromJSON(e):null}clone(){var i,r;const e=super.clone();return e._set("format",(i=this.format)==null?void 0:i.clone()),e._set("fieldFormat",(r=this.fieldFormat)==null?void 0:r.clone()),e}};d([f({value:null,clonable:!1,types:Bbe,json:{write:{overridePolicy(t,e,i){const{fieldName:r}=this;return{enabled:!!r&&!r.startsWith("expression/")&&!r.startsWith("relationships/")&&!!(i!=null&&i.writeFieldFormat)}}}}})],Ql.prototype,"fieldFormat",null),d([f({type:String,json:{write:!0}})],Ql.prototype,"fieldName",void 0),d([f({value:null,clonable:!1,type:$n,json:{write:!0}})],Ql.prototype,"format",null),d([je("format")],Ql.prototype,"readFormat",null),d([f({type:Boolean,json:{write:{alwaysWriteDefaults:!0},default:!0}})],Ql.prototype,"isEditable",void 0),d([f({type:String,json:{write:!0}})],Ql.prototype,"label",void 0),d([f({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],Ql.prototype,"statisticType",void 0),d([pt(new jt({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],Ql.prototype,"stringFieldOption",void 0),d([f({type:String,json:{write:!0}})],Ql.prototype,"tooltip",void 0),d([f({type:Boolean,json:{write:!0}})],Ql.prototype,"visible",void 0),Ql=d([V("esri.popup.FieldInfo")],Ql);const Ss=Ql;var E9;let gy=E9=class extends ag{constructor(t){super(t),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}clone(){return new E9(he({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};d([f({type:Object,json:{write:!0}})],gy.prototype,"attributes",void 0),d([f({type:String,json:{write:!0}})],gy.prototype,"description",void 0),d([f({type:[Ss],json:{write:!0}})],gy.prototype,"fieldInfos",void 0),d([f({type:String,json:{write:!0}})],gy.prototype,"title",void 0),d([f({type:["fields"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],gy.prototype,"type",void 0),gy=E9=d([V("esri.popup.content.FieldsContent")],gy);const Fv=gy;let Yb=class extends $e{constructor(e){super(e),this.altText=null,this.caption="",this.title="",this.type=null}};d([f({type:String,json:{write:!0}})],Yb.prototype,"altText",void 0),d([f({type:String,json:{write:!0}})],Yb.prototype,"caption",void 0),d([f({type:String,json:{write:!0}})],Yb.prototype,"title",void 0),d([f({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],Yb.prototype,"type",void 0),Yb=d([V("esri.popup.content.mixins.MediaInfo")],Yb);const fY=Yb;var k9;let Jb=k9=class extends et{constructor(t){super(t),this.color=null,this.fieldName=null,this.tooltip=null,this.value=null}clone(){var t;return new k9({color:(t=this.color)==null?void 0:t.clone(),fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};d([f()],Jb.prototype,"color",void 0),d([f()],Jb.prototype,"fieldName",void 0),d([f()],Jb.prototype,"tooltip",void 0),d([f()],Jb.prototype,"value",void 0),Jb=k9=d([V("esri.popup.content.support.ChartMediaInfoValueSeries")],Jb);const PR=Jb;var A9;let yy=A9=class extends $e{constructor(t){super(t),this.colors=null,this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new A9({colors:he(this.colors),fields:he(this.fields),normalizeField:this.normalizeField,series:he(this.series),tooltipField:this.tooltipField})}};d([f({type:[Se],json:{type:[[ei]],write:!0}})],yy.prototype,"colors",void 0),d([f({type:[String],json:{write:{isRequired:!0}}})],yy.prototype,"fields",void 0),d([f({type:String,json:{write:!0}})],yy.prototype,"normalizeField",void 0),d([f({type:[PR],json:{read:!1}})],yy.prototype,"series",void 0),d([f({type:String,json:{write:!0}})],yy.prototype,"tooltipField",void 0),yy=A9=d([V("esri.popup.content.support.ChartMediaInfoValue")],yy);const PUe=yy;let sC=class extends fY{constructor(e){super(e),this.type=null,this.value=void 0}};d([f({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],sC.prototype,"type",void 0),d([f({type:PUe,json:{write:{isRequired:!0}}})],sC.prototype,"value",void 0),sC=d([V("esri.popup.content.mixins.ChartMediaInfo")],sC);const e5=sC,t5=Es()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var P9;let pL=P9=class extends e5{constructor(t){super(t),this.type="bar-chart"}clone(){var t;return new P9({altText:this.altText,title:this.title,caption:this.caption,value:(t=this.value)==null?void 0:t.clone()})}};d([f({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:{writer:t5.write,isRequired:!0}}})],pL.prototype,"type",void 0),pL=P9=d([V("esri.popup.content.BarChartMediaInfo")],pL);const i0e=pL;var O9;let fL=O9=class extends e5{constructor(t){super(t),this.type="column-chart"}clone(){var t;return new O9({altText:this.altText,title:this.title,caption:this.caption,value:(t=this.value)==null?void 0:t.clone()})}};d([f({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:{writer:t5.write,isRequired:!0}}})],fL.prototype,"type",void 0),fL=O9=d([V("esri.popup.content.ColumnChartMediaInfo")],fL);const r0e=fL;var L9;let aC=L9=class extends $e{constructor(t){super(t),this.linkURL=null,this.sourceURL=null}clone(){return new L9({linkURL:this.linkURL,sourceURL:this.sourceURL})}};d([f({type:String,json:{write:!0}})],aC.prototype,"linkURL",void 0),d([f({type:String,json:{write:{isRequired:!0}}})],aC.prototype,"sourceURL",void 0),aC=L9=d([V("esri.popup.content.support.ImageMediaInfoValue")],aC);const OUe=aC;var F9;let mx=F9=class extends fY{constructor(t){super(t),this.refreshInterval=0,this.type="image",this.value=void 0}clone(){var t;return new F9({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:(t=this.value)==null?void 0:t.clone()})}};d([f({type:Number,json:{write:!0}})],mx.prototype,"refreshInterval",void 0),d([f({type:["image"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],mx.prototype,"type",void 0),d([f({type:OUe,json:{write:{isRequired:!0}}})],mx.prototype,"value",void 0),mx=F9=d([V("esri.popup.content.ImageMediaInfo")],mx);const n0e=mx;var R9;let mL=R9=class extends e5{constructor(t){super(t),this.type="line-chart"}clone(){var t;return new R9({altText:this.altText,title:this.title,caption:this.caption,value:(t=this.value)==null?void 0:t.clone()})}};d([f({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:{writer:t5.write,isRequired:!0}}})],mL.prototype,"type",void 0),mL=R9=d([V("esri.popup.content.LineChartMediaInfo")],mL);const s0e=mL;var z9;let gL=z9=class extends e5{constructor(t){super(t),this.type="pie-chart"}clone(){var t;return new z9({altText:this.altText,title:this.title,caption:this.caption,value:(t=this.value)==null?void 0:t.clone()})}};d([f({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:{writer:t5.write,isRequired:!0}}})],gL.prototype,"type",void 0),gL=z9=d([V("esri.popup.content.PieChartMediaInfo")],gL);const a0e=gL,N9={base:fY,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":i0e,"column-chart":r0e,"line-chart":s0e,"pie-chart":a0e,image:n0e}};var D9;let nd=D9=class extends ag{constructor(t){super(t),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(t){return t&&t.map(e=>e.type==="image"?n0e.fromJSON(e):e.type==="barchart"?i0e.fromJSON(e):e.type==="columnchart"?r0e.fromJSON(e):e.type==="linechart"?s0e.fromJSON(e):e.type==="piechart"?a0e.fromJSON(e):void 0).filter(Boolean)}writeMediaInfos(t,e){e.mediaInfos=t&&t.map(i=>i.toJSON())}clone(){return new D9(he({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};d([f()],nd.prototype,"activeMediaInfoIndex",void 0),d([f({type:Object,json:{write:!0}})],nd.prototype,"attributes",void 0),d([f({type:String,json:{write:!0}})],nd.prototype,"description",void 0),d([f({types:[N9]})],nd.prototype,"mediaInfos",void 0),d([je("mediaInfos")],nd.prototype,"readMediaInfos",null),d([Ge("mediaInfos")],nd.prototype,"writeMediaInfos",null),d([f({type:String,json:{write:!0}})],nd.prototype,"title",void 0),d([f({type:["media"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],nd.prototype,"type",void 0),nd=D9=d([V("esri.popup.content.MediaContent")],nd);const o_=nd;var j9;let oC=j9=class extends $e{constructor(t){super(t),this.field=null,this.order=null}clone(){return new j9({field:this.field,order:this.order})}};d([f({type:String,json:{write:!0}})],oC.prototype,"field",void 0),d([f({type:["asc","desc"],json:{write:!0}})],oC.prototype,"order",void 0),oC=j9=d([V("esri.popup.support.RelatedRecordsInfoFieldOrder")],oC);const mY=oC;let vh=class extends bt(ag){constructor(e){super(e),this.description=null,this.displayCount=null,this.displayType="list",this.orderByFields=null,this.relationshipId=null,this.title=null,this.type="relationship"}};d([f({type:String,json:{write:!0}})],vh.prototype,"description",void 0),d([f({type:Number,json:{type:ei,write:!0}})],vh.prototype,"displayCount",void 0),d([f({type:["list"],json:{write:{isRequired:!0}}})],vh.prototype,"displayType",void 0),d([f({type:[mY],json:{write:!0}})],vh.prototype,"orderByFields",void 0),d([f({type:Number,json:{type:ei,write:{isRequired:!0}}})],vh.prototype,"relationshipId",void 0),d([f({type:String,json:{write:!0}})],vh.prototype,"title",void 0),d([f({type:["relationship"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],vh.prototype,"type",void 0),vh=d([V("esri.popup.content.RelationshipContent")],vh);const IE=vh;var V9;let lC=V9=class extends ag{constructor(t){super(t),this.text=null,this.type="text"}clone(){return new V9({text:this.text})}};d([f({type:String,json:{write:!0}})],lC.prototype,"text",void 0),d([f({type:["text"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],lC.prototype,"type",void 0),lC=V9=d([V("esri.popup.content.TextContent")],lC);const xu=lC;let Uf=class extends bt($e){constructor(e){super(e),this.title=null,this.description=null,this.type=null,this.associatedNetworkSourceId=null,this.associatedAssetGroup=null,this.associatedAssetType=null}};d([f({type:String,json:{write:!0}})],Uf.prototype,"title",void 0),d([f({type:String,json:{write:!0}})],Uf.prototype,"description",void 0),d([f({type:["attachment","connectivity","container","content","structure"],json:{write:!0}})],Uf.prototype,"type",void 0),d([f({type:Number,json:{type:ei,write:!0}})],Uf.prototype,"associatedNetworkSourceId",void 0),d([f({type:Number,json:{type:ei,write:!0}})],Uf.prototype,"associatedAssetGroup",void 0),d([f({type:Number,json:{type:ei,write:!0}})],Uf.prototype,"associatedAssetType",void 0),Uf=d([V("esri.popup.support.UtilityNetworkAssociationType")],Uf);const o0e=Uf;let vy=class extends bt(ag){constructor(e){super(e),this.description=null,this.displayCount=null,this.title=null,this.associationTypes=[],this.type="utility-network-associations"}};d([f({type:String,json:{write:!0}})],vy.prototype,"description",void 0),d([f({type:Number,json:{type:ei,write:!0}})],vy.prototype,"displayCount",void 0),d([f({type:String,json:{write:!0}})],vy.prototype,"title",void 0),d([f({type:[o0e],json:{write:!0}})],vy.prototype,"associationTypes",void 0),d([pt({utilityNetworkAssociations:"utility-network-associations"})],vy.prototype,"type",void 0),vy=d([V("esri.popup.content.UtilityNetworkAssociationsContent")],vy);const gY=vy,LUe={base:null,key:"type",typeMap:{attachment:aT,media:o_,text:xu,expression:lw,field:Fv,relationship:IE,utilityNetworkAssociations:gY}},FUe={base:null,key:"type",typeMap:{attachment:aT,media:o_,text:xu,expression:lw,field:Fv,relationship:IE}};var U9;let Xb=U9=class extends $e{constructor(t){super(t),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new U9({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};d([f({type:String,json:{write:!0}})],Xb.prototype,"name",void 0),d([f({type:String,json:{write:!0}})],Xb.prototype,"title",void 0),d([f({type:String,json:{write:!0}})],Xb.prototype,"expression",void 0),d([f({type:["string","number"],json:{write:!0}})],Xb.prototype,"returnType",void 0),Xb=U9=d([V("esri.popup.ExpressionInfo")],Xb);const Gt=Xb;var B9;let cC=B9=class extends $e{constructor(t){super(t),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new B9({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};d([f({type:Boolean,json:{write:!0}})],cC.prototype,"returnTopmostRaster",void 0),d([f({type:Boolean,json:{write:!0}})],cC.prototype,"showNoDataRecords",void 0),cC=B9=d([V("esri.popup.LayerOptions")],cC);const RUe=cC;var q9;let uC=q9=class extends $e{constructor(t){super(t),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new q9({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?he(this.orderByFields):null})}};d([f({type:Boolean,json:{write:!0}})],uC.prototype,"showRelatedRecords",void 0),d([f({type:[mY],json:{write:!0}})],uC.prototype,"orderByFields",void 0),uC=q9=d([V("esri.popup.RelatedRecordsInfo")],uC);const Ane=uC;var H9;let Jc=H9=class extends __(et){constructor(t){super(t),this.active=!1,this.className=null,this.disabled=!1,this.icon=null,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new H9({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};d([f()],Jc.prototype,"active",void 0),d([f()],Jc.prototype,"className",void 0),d([f()],Jc.prototype,"disabled",void 0),d([f()],Jc.prototype,"icon",void 0),d([f()],Jc.prototype,"id",void 0),d([f()],Jc.prototype,"indicator",void 0),d([f()],Jc.prototype,"title",void 0),d([f()],Jc.prototype,"type",void 0),d([f()],Jc.prototype,"visible",void 0),Jc=H9=d([V("esri.support.actions.ActionBase")],Jc);const i5=Jc;var G9;let yL=G9=class extends i5{constructor(t){super(t),this.image=null,this.type="button"}clone(){return new G9({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};d([f()],yL.prototype,"image",void 0),yL=G9=d([V("esri.support.actions.ActionButton")],yL);const og=yL;var W9;let dC=W9=class extends i5{constructor(t){super(t),this.image=null,this.type="toggle",this.value=!1}clone(){return new W9({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};d([f()],dC.prototype,"image",void 0),d([f()],dC.prototype,"value",void 0),dC=W9=d([V("esri.support.actions.ActionToggle")],dC);const r5=dC,vM="relationships/",Pne="expression/",zUe=Ue.ofType({key:"type",defaultKeyValue:"button",base:i5,typeMap:{button:og,toggle:r5}}),NUe={base:ag,key:"type",typeMap:{media:o_,custom:Rbe,text:xu,attachments:aT,fields:Fv,expression:lw,relationship:IE,utilityNetworkAssociations:gY}},l0e=new Set(["attachments","fields","media","text","expression","relationship"]),DUe=new Set([...l0e,"utility-network-associations"]);let ms=class extends bt($e){constructor(e){super(e),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title=""}castContent(e){return Array.isArray(e)?e.map(i=>Rp(NUe,i)):typeof e=="string"||typeof e=="function"||e instanceof HTMLElement||uo(e)?e:(Ie.getLogger(this).error("content error","unsupported content value",{value:e}),null)}readContent(e,i){const{popupElements:r}=i;return Array.isArray(r)&&r.length>0?this._readPopupInfoElements(i.description,i.mediaInfos,r):this._readPopupInfo(i)}writeWebSceneContent(e,i,r,n){this._writePopupTemplateContent(e,i,n)}writeWebMapContent(e,i,r,n){this._writePopupTemplateContent(e,i,n)}writeFieldInfos(e,i,r,n){const{content:s}=this,a=Array.isArray(s)?s:null,{writeFieldFormat:o,...l}=n||{};if(e){const c=a?a.filter(m=>m.type==="fields"):[],h=c.length&&c.every(m=>{var g;return(g=m.fieldInfos)==null?void 0:g.length});i.fieldInfos=e.filter(Boolean).map(m=>{const g=m.toJSON(l);return h&&(g.visible=!1),g})}if(a)for(const c of a)c.type==="fields"&&this._writeFieldsContent(c,i,l)}writeLayerOptions(e,i,r,n){i[r]=!e||e.showNoDataRecords===null&&e.returnTopmostRaster===null?null:e.toJSON(n)}writeTitle(e,i){i.title=e||""}async collectRequiredFields(e,i,r){const n=this.expressionInfos||[];await this._collectExpressionInfoFields(e,i,r,[...n,...this._getContentExpressionInfos(this.content,n)]),Lv(e,i,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(e,i){const r=new Set;return await this.collectRequiredFields(r,e,i),[...r].sort()}_writePopupTemplateContent(e,i,r){typeof e!="string"?Array.isArray(e)&&(i.popupElements=e.filter(n=>(r==null?void 0:r.origin)==="web-scene"?l0e.has(n.type):DUe.has(n.type)).map(n=>n==null?void 0:n.toJSON(r)),i.popupElements.forEach(n=>{n.type==="attachments"?this._writeAttachmentContent(i):n.type==="media"?this._writeMediaContent(n,i):n.type==="text"?this._writeTextContent(n,i):n.type==="relationship"&&this._writeRelationshipContent(n,i)})):i.description=e}_writeFieldsContent(e,i,r){const n=e.fieldInfos;if(!Array.isArray(n)||!n.length)return;const s=i.fieldInfos;if(Array.isArray(s))for(const a of n){const o=s.find(l=>{var c,h;return((c=l.fieldName)==null?void 0:c.toLowerCase())===((h=a.fieldName)==null?void 0:h.toLowerCase())});o?o.visible=!0:s.push(a.toJSON(r))}else i.fieldInfos=n.map(a=>a.toJSON(r))}_writeAttachmentContent(e){e.showAttachments||(e.showAttachments=!0)}_writeRelationshipContent(e,i){var s,a;const r=((s=e.orderByFields)==null?void 0:s.map(o=>this._toFieldOrderJSON(o,e.relationshipId)))||[],n=[...((a=i.relatedRecordsInfo)==null?void 0:a.orderByFields)||[],...r];i.relatedRecordsInfo={showRelatedRecords:!0,...(n==null?void 0:n.length)&&{orderByFields:n}}}_writeTextContent(e,i){!i.description&&e.text&&(i.description=e.text)}_writeMediaContent(e,i){if(!Array.isArray(e.mediaInfos)||!e.mediaInfos.length)return;const r=he(e.mediaInfos);Array.isArray(i.mediaInfos)?i.mediaInfos=[...i.mediaInfos,...r]:i.mediaInfos=r}_readPopupInfoElements(e,i,r){const n={description:!1,mediaInfos:!1};return r.map(s=>s.type==="media"?(s.mediaInfos||!i||n.mediaInfos||(s.mediaInfos=i,n.mediaInfos=!0),o_.fromJSON(s)):s.type==="text"?(s.text||!e||n.description||(s.text=e,n.description=!0),xu.fromJSON(s)):s.type==="attachments"?aT.fromJSON(s):s.type==="fields"?Fv.fromJSON(s):s.type==="expression"?lw.fromJSON(s):s.type==="relationship"?IE.fromJSON(s):s.type==="utilityNetworkAssociations"?gY.fromJSON(s):void 0).filter(Boolean)}_toRelationshipContent(e){const{field:i,order:r}=e;if(!(i!=null&&i.startsWith(vM)))return null;const n=i.replace(vM,"").split("/");if(n.length!==2)return null;const s=parseInt(n[0],10),a=n[1];return!Number.isNaN(s)&&a?IE.fromJSON({relationshipId:s,orderByFields:[{field:a,order:r}]}):null}_toFieldOrderJSON(e,i){const{order:r,field:n}=e;return{field:`${vM}${i}/${n}`,order:r}}_readPopupInfo({description:e,mediaInfos:i,showAttachments:r,relatedRecordsInfo:n={showRelatedRecords:!1}}){const s=[];e?s.push(new xu({text:e})):s.push(new Fv),Array.isArray(i)&&i.length&&s.push(o_.fromJSON({mediaInfos:i})),r&&s.push(aT.fromJSON({displayType:"auto"}));const{showRelatedRecords:a,orderByFields:o}=n;return a&&(o!=null&&o.length)&&o.forEach(l=>{const c=this._toRelationshipContent(l);c&&s.push(c)}),s.length?s:e}_getContentElementFields(e){const i=e==null?void 0:e.type;if(i==="attachments")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)];if(i==="custom")return e.outFields||[];if(i==="fields")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...this._getFieldInfoFields(e.fieldInfos??this.fieldInfos)];if(i==="media"){const r=e.mediaInfos||[];return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...r.reduce((n,s)=>[...n,...this._getMediaInfoFields(s)],[])]}return i==="text"?this._extractFieldNames(e.text):i==="relationship"||i==="utility-network-associations"?[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)]:[]}_getMediaInfoFields(e){const{caption:i,title:r,value:n}=e,s=n||{},{fields:a,normalizeField:o,tooltipField:l,sourceURL:c,linkURL:h}=s,m=[...this._extractFieldNames(r),...this._extractFieldNames(i),...this._extractFieldNames(c),...this._extractFieldNames(h),...a??[]];return o&&m.push(o),l&&m.push(l),m}_getContentExpressionInfos(e,i){return Array.isArray(e)?e.reduce((r,n)=>[...r,...n.type==="expression"&&n.expressionInfo?[n.expressionInfo]:[]],i):[]}_getContentFields(e){return typeof e=="string"?this._extractFieldNames(e):Array.isArray(e)?e.reduce((i,r)=>[...i,...this._getContentElementFields(r)],[]):[]}async _collectExpressionInfoFields(e,i,r,n){n&&await Promise.all(n.map(s=>za(e,i,r,s.expression)))}_getFieldInfoFields(e){return e?e.filter(({fieldName:i,visible:r})=>!(r!==void 0&&!r||!i||i.startsWith(vM)||i.startsWith(Pne))).map(i=>i.fieldName):[]}_getActionsFields(e){return e?e.toArray().reduce((i,r)=>[...i,...this._getActionFields(r)],[]):[]}_getActionFields(e){const{className:i,title:r,type:n}=e,s=n==="button"||n==="toggle"?e.image:"";return[...this._extractFieldNames(r),...this._extractFieldNames(i),...this._extractFieldNames(s)]}_getTitleFields(e){return typeof e=="string"?this._extractFieldNames(e):[]}_extractFieldNames(e){return dY(e).filter(i=>!(i.startsWith(vM)||i.startsWith(Pne)))}};d([f({type:zUe})],ms.prototype,"actions",void 0),d([f()],ms.prototype,"content",void 0),d([_i("content")],ms.prototype,"castContent",null),d([je("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments","relatedRecordsInfo"])],ms.prototype,"readContent",null),d([Ge("web-scene","content",{popupElements:{type:Ue.ofType(FUe)},showAttachments:{type:Boolean},mediaInfos:{type:Ue.ofType(N9)},description:{type:String},relatedRecordsInfo:{type:Ane}})],ms.prototype,"writeWebSceneContent",null),d([Ge("content",{popupElements:{type:Ue.ofType(LUe)},showAttachments:{type:Boolean},mediaInfos:{type:Ue.ofType(N9)},description:{type:String},relatedRecordsInfo:{type:Ane}})],ms.prototype,"writeWebMapContent",null),d([f({type:[Gt],json:{write:!0}})],ms.prototype,"expressionInfos",void 0),d([f({type:[Ss]})],ms.prototype,"fieldInfos",void 0),d([Ge("fieldInfos")],ms.prototype,"writeFieldInfos",null),d([f({type:RUe})],ms.prototype,"layerOptions",void 0),d([Ge("layerOptions")],ms.prototype,"writeLayerOptions",null),d([f({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],ms.prototype,"lastEditInfoEnabled",void 0),d([f()],ms.prototype,"outFields",void 0),d([f()],ms.prototype,"overwriteActions",void 0),d([f()],ms.prototype,"returnGeometry",void 0),d([f({json:{type:String}})],ms.prototype,"title",void 0),d([Ge("title")],ms.prototype,"writeTitle",null),ms=d([V("esri.PopupTemplate")],ms);const lg=ms,yY=Symbol("idFieldsProviderSymbol");function jUe(t){return!!t&&yY in t}function One(t){return jUe(t)?t[yY]:void 0}const Uk=Symbol("popupProvider");function vSt(t){return typeof t=="object"&&t!==null&&"popupEnabled"in t&&"popupTemplate"in t}function VUe(t){return!!t&&Uk in t}function UUe(t){return VUe(t)?t[Uk]:null}function bSt(t,e){switch(e.type){case"object-id":case"unique-id-simple":return t.attributes[e.fieldName];case"unique-id-composite":{const i=[];for(const r of e.fieldNames)i.push(t.attributes[r]??null);return JSON.stringify(i)}}}function Lne(t,e){var i,r,n;if("uniqueIdFields"in e&&((i=e.uniqueIdFields)!=null&&i.length)){if(e.uniqueIdFields.length===1)return(r=t.attributes)==null?void 0:r[e.uniqueIdFields[0]];const s=e.uniqueIdFields.map(a=>{var o;return(o=t.attributes)==null?void 0:o[a]});return JSON.stringify(s)}return"objectIdField"in e&&e.objectIdField?(n=t.attributes)==null?void 0:n[e.objectIdField]:null}const Fne=new jt({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let BUe=0,Bn=class extends $e{constructor(e){super(e),this.id="sym"+BUe++,this.type=null,this.color=new Se([0,0,0,1])}readColor(e){return(e==null?void 0:e[0])!=null?[e[0],e[1],e[2],e[3]/255]:e}async collectRequiredFields(e,i){}hash(){return JSON.stringify(this.toJSON())}clone(){}};d([f({type:Fne.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:Fne.write,isRequired:!0}}})],Bn.prototype,"type",void 0),d([f({type:Se,json:{write:{allowNull:!0}}})],Bn.prototype,"color",void 0),d([je("color")],Bn.prototype,"readColor",null),Bn=d([V("esri.symbols.Symbol")],Bn);var Z9;let zs=Z9=class extends Bn{constructor(t){super(t),this.data=null,this.type="cim"}readData(t,e){return e}writeData(t,e){Object.assign(e,t)}async collectRequiredFields(t,e){var i;if(((i=this.data)==null?void 0:i.type)==="CIMSymbolReference"){const r=this.data.primitiveOverrides;if(r){const n=r.map(s=>{const a=s.valueExpressionInfo;return a?za(t,e,null,a.expression):null});await Promise.all(n)}}}clone(){return new Z9({data:he(this.data)})}hash(){return ape(JSON.stringify(this.data)).toString()}};d([f({json:{write:!1}})],zs.prototype,"color",void 0),d([f({json:{write:!0}})],zs.prototype,"data",void 0),d([je("data",["symbol"])],zs.prototype,"readData",null),d([Ge("data",{})],zs.prototype,"writeData",null),d([pt({CIMSymbolReference:"cim"},{readOnly:!0})],zs.prototype,"type",void 0),zs=Z9=d([V("esri.symbols.CIMSymbol")],zs);let jo=class extends $e{constructor(e){super(e),this.enabled=!0,this.type=null,this.ignoreDrivers=!1}writeEnabled(e,i,r){e||(i[r]=e)}};d([f({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],jo.prototype,"enabled",void 0),d([Ge("enabled")],jo.prototype,"writeEnabled",null),d([f({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0,json:{write:{isRequired:!0}}})],jo.prototype,"type",void 0),jo=d([V("esri.symbols.Symbol3DLayer")],jo);function qUe(t,e){const i=e.transparency!=null?TE(e.transparency):1,r=e.color;return r&&Array.isArray(r)?new Se([r[0]||0,r[1]||0,r[2]||0,i]):null}function HUe(t,e){e.color=t.toJSON().slice(0,3);const i=WD(t.a);i!==0&&(e.transparency=i)}function Hv(t){return{type:Se,nonNullable:t==null?void 0:t.nonNullable,json:{type:[ei],default:null,read:{source:["color","transparency"],reader:qUe},write:{target:{color:{type:[ei],isRequired:t==null?void 0:t.colorRequiredOnWrite},transparency:{type:ei}},writer:HUe}}}}const Up={type:Number,cast:$i,json:{write:!0}};function xSt(t){return t==="emissive"?0:1}let Qb=class extends $e{constructor(e){super(e),this.color=new Se([0,0,0,1]),this.extensionLength=0,this.size=Qi(1)}clone(){}cloneProperties(){return{color:he(this.color),size:this.size,extensionLength:this.extensionLength}}};d([f({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0,isRequired:!0}}})],Qb.prototype,"type",void 0),d([f(Hv({colorRequiredOnWrite:!0}))],Qb.prototype,"color",void 0),d([f({...Up,json:{write:{overridePolicy:t=>({enabled:!!t})}}})],Qb.prototype,"extensionLength",void 0),d([f(Up)],Qb.prototype,"size",void 0),Qb=d([V("esri.symbols.edges.Edges3D")],Qb);const vY=Qb;var Y9;let vL=Y9=class extends vY{constructor(t){super(t),this.type="sketch"}clone(){return new Y9(this.cloneProperties())}};d([pt({sketch:"sketch"},{readOnly:!0})],vL.prototype,"type",void 0),vL=Y9=d([V("esri.symbols.edges.SketchEdges3D")],vL);const GUe=vL;var J9;let bL=J9=class extends vY{constructor(t){super(t),this.type="solid"}clone(){return new J9(this.cloneProperties())}};d([pt({solid:"solid"},{readOnly:!0})],bL.prototype,"type",void 0),bL=J9=d([V("esri.symbols.edges.SolidEdges3D")],bL);const c0e=bL,u0e={types:{key:"type",base:vY,typeMap:{solid:c0e,sketch:GUe}},json:{write:!0}};var X9;let y$=X9=class extends $e{constructor(){super(...arguments),this.strength=null,this.source="emissive"}clone(){const t={strength:this.strength,source:this.source};return new X9(t)}};d([f({json:{write:!1}})],y$.prototype,"strength",void 0),d([f({json:{write:!1}})],y$.prototype,"source",void 0),y$=X9=d([V("esri.symbols.support.Symbol3DEmissive")],y$);var Q9;let Al=Q9=class extends $e{constructor(t){super(t),this.color=null,this.emissive=new y$({source:"emissive"})}clone(){var e,i;const t={color:((e=this.color)==null?void 0:e.clone())??null,emissive:((i=this.emissive)==null?void 0:i.clone())??null};return new Q9(t)}};d([f(Hv())],Al.prototype,"color",void 0),d([f({type:y$,json:{write:!1}})],Al.prototype,"emissive",void 0),Al=Q9=d([V("esri.symbols.support.Symbol3DMaterial")],Al);var K9,vS;let am=(vS=class extends jo{constructor(e){super(e),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){var e,i;return new K9({edges:(e=this.edges)==null?void 0:e.clone(),enabled:this.enabled,material:(i=this.material)==null?void 0:i.clone(),castShadows:this.castShadows,size:this.size})}},K9=vS,vS);d([pt({Extrude:"extrude"},{readOnly:!0})],am.prototype,"type",void 0),d([f({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],am.prototype,"size",void 0),d([f({type:Al,json:{write:!0}})],am.prototype,"material",void 0),d([f({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],am.prototype,"castShadows",void 0),d([f(u0e)],am.prototype,"edges",void 0),am=K9=d([V("esri.symbols.ExtrudeSymbol3DLayer")],am);let x2=class extends $e{constructor(e){super(e)}clone(){throw new Error("Subclasses of LinePattern3D should implement their own clone method.")}};d([f({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],x2.prototype,"type",void 0),x2=d([V("esri.symbols.patterns.LinePattern3D")],x2);const WUe=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var eq;const ZUe=Es()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let j0=eq=class extends x2{constructor(t){super(t),this.type="style",this.style="solid"}clone(){const t={style:this.style};return new eq(t)}};d([f({type:["style"],json:{write:{isRequired:!0}}})],j0.prototype,"type",void 0),d([pt(ZUe),f({type:WUe,json:{write:{isRequired:!0}}})],j0.prototype,"style",void 0),j0=eq=d([V("esri.symbols.patterns.LineStylePattern3D")],j0);let $2=class extends $e{constructor(e){super(e),this.type="style"}clone(){throw new Error("Subclasses of Pattern3D should implement their own clone method.")}};d([f({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],$2.prototype,"type",void 0),$2=d([V("esri.symbols.patterns.Pattern3D")],$2);const YUe=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var tq;let v$=tq=class extends $2{constructor(t){super(t),this.type="style",this.style="solid"}clone(){return new tq({style:this.style})}};d([f({type:["style"],json:{write:{isRequired:!0}}})],v$.prototype,"type",void 0),d([f({type:YUe,json:{read:!0,write:{isRequired:!0}}})],v$.prototype,"style",void 0),v$=tq=d([V("esri.symbols.patterns.StylePattern3D")],v$);const JUe={types:{key:"type",base:$2,typeMap:{style:v$}},json:{write:!0}},d0e={types:{key:"type",base:x2,typeMap:{style:j0}},json:{write:!0}},S2=new Se("white"),XUe=new Se([255,255,255,0]);function QUe(t){return t.r===0&&t.g===0&&t.b===0}var iq;let T2=iq=class extends Al{constructor(t){super(t),this.colorMixMode=null}clone(){var e,i;const t={color:((e=this.color)==null?void 0:e.clone())??null,colorMixMode:this.colorMixMode,emissive:((i=this.emissive)==null?void 0:i.clone())??null};return new iq(t)}};d([pt({multiply:"multiply",replace:"replace",tint:"tint"})],T2.prototype,"colorMixMode",void 0),T2=iq=d([V("esri.symbols.support.Symbol3DFillMaterial")],T2);function bY(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function KUe(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]]}function eBe(t,e,i,r,n,s,a,o,l,c,h,m,g,v,b,x){return[t,e,i,r,n,s,a,o,l,c,h,m,g,v,b,x]}const tBe=bY();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:tBe,clone:KUe,create:bY,fromValues:eBe},Symbol.toStringTag,{value:"Module"}));function iBe(t){return t<=Khe?new Array(t).fill(0):new Float64Array(t)}function ISt(t){return(Qhe(t)?t.byteLength/8:t.length)<=Khe?Array.from(t):new Float64Array(t)}function MSt(t,e,i){return Array.isArray(t)?t.slice(e,e+i):t.subarray(e,e+i)}function CSt(t){return[...t]}function ESt(t){const e=bY();for(let i=0;i<16;++i)e[i]=t[i];return e}function Bk(t=aBe){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function wY(t,e,i,r,n,s,a=Bk()){return a[0]=t,a[1]=e,a[2]=i,a[3]=r,a[4]=n,a[5]=s,a}function kSt(t,e=Bk()){return rBe(t,0,t.length/3,e)}function rBe(t,e,i,r=Bk()){return h0e(r,rq),nBe(r,t,e,i),r}function ASt(t,e=iBe(24)){const[i,r,n,s,a,o]=t;return e[0]=i,e[1]=r,e[2]=n,e[3]=i,e[4]=r,e[5]=o,e[6]=i,e[7]=a,e[8]=n,e[9]=i,e[10]=a,e[11]=o,e[12]=s,e[13]=r,e[14]=n,e[15]=s,e[16]=r,e[17]=o,e[18]=s,e[19]=a,e[20]=n,e[21]=s,e[22]=a,e[23]=o,e}function PSt(t,e){const i=isFinite(t[2])||isFinite(t[5]);return new Yt(i?{xmin:t[0],xmax:t[3],ymin:t[1],ymax:t[4],zmin:t[2],zmax:t[5],spatialReference:e}:{xmin:t[0],xmax:t[3],ymin:t[1],ymax:t[4],spatialReference:e})}function OSt(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[3]),t[4]=Math.max(t[4],e[4]),t[5]=Math.max(t[5],e[5])}function LSt(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[3]=Math.max(t[3],e[2]),t[4]=Math.max(t[4],e[3])}function FSt(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[0]),t[4]=Math.max(t[4],e[1]),t[5]=Math.max(t[5],e[2])}function nBe(t,e,i=0,r=e.length/3){let n=t[0],s=t[1],a=t[2],o=t[3],l=t[4],c=t[5];for(let h=0;h<r;h++)n=Math.min(n,e[i+3*h]),s=Math.min(s,e[i+3*h+1]),a=Math.min(a,e[i+3*h+2]),o=Math.max(o,e[i+3*h]),l=Math.max(l,e[i+3*h+1]),c=Math.max(c,e[i+3*h+2]);t[0]=n,t[1]=s,t[2]=a,t[3]=o,t[4]=l,t[5]=c}function RSt(t,e,i){const r=e.length;let n=t[0],s=t[1],a=t[2],o=t[3],l=t[4],c=t[5];if(i)for(let h=0;h<r;h++){const m=e[h];n=Math.min(n,m[0]),s=Math.min(s,m[1]),a=Math.min(a,m[2]),o=Math.max(o,m[0]),l=Math.max(l,m[1]),c=Math.max(c,m[2])}else for(let h=0;h<r;h++){const m=e[h];n=Math.min(n,m[0]),s=Math.min(s,m[1]),o=Math.max(o,m[0]),l=Math.max(l,m[1])}t[0]=n,t[1]=s,t[2]=a,t[3]=o,t[4]=l,t[5]=c}function zSt(t){for(let e=0;e<6;e++)if(!isFinite(t[e]))return!1;return!0}function qk(t){return t[0]>=t[3]?0:t[3]-t[0]}function Hk(t){return t[1]>=t[4]?0:t[4]-t[1]}function Gk(t){return t[2]>=t[5]?0:t[5]-t[2]}function NSt(t){const e=qk(t),i=Gk(t),r=Hk(t);return Math.sqrt(e*e+i*i+r*r)}function DSt(t,e=[0,0,0]){return e[0]=t[0]+qk(t)/2,e[1]=t[1]+Hk(t)/2,e[2]=t[2]+Gk(t)/2,e}function jSt(t,e=[0,0,0]){return e[0]=qk(t),e[1]=Hk(t),e[2]=Gk(t),e}function VSt(t,e){return e[0]>=t[0]&&e[1]>=t[1]&&e[2]>=t[2]&&e[0]<=t[3]&&e[1]<=t[4]&&e[2]<=t[5]}function sBe(t,e){return Math.max(e[0],t[0])<=Math.min(e[3],t[3])&&Math.max(e[1],t[1])<=Math.min(e[4],t[4])&&Math.max(e[2],t[2])<=Math.min(e[5],t[5])}function USt(t,e){return e==null||sBe(t,e)}function BSt(t,e,i,r,n=t){return n[0]=t[0]+e,n[1]=t[1]+i,n[2]=t[2]+r,n[3]=t[3]+e,n[4]=t[4]+i,n[5]=t[5]+r,n}function qSt(t,e,i=t){const r=t[0]+qk(t)/2,n=t[1]+Hk(t)/2,s=t[2]+Gk(t)/2;return i[0]=r+(t[0]-r)*e,i[1]=n+(t[1]-n)*e,i[2]=s+(t[2]-s)*e,i[3]=r+(t[3]-r)*e,i[4]=n+(t[4]-n)*e,i[5]=s+(t[5]-s)*e,i}function HSt(t,e){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function GSt(t,e,i=t){return i[0]=e[0],i[1]=e[1],i[2]=e[2],i!==t&&(i[3]=t[3],i[4]=t[4],i[5]=t[5]),i}function WSt(t,e,i=t){return i[3]=e[0],i[4]=e[1],i[5]=e[2],i!==t&&(i[0]=t[0],i[1]=t[1],i[2]=t[2]),t}function h0e(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function ZSt(t){return t?h0e(t,rq):Bk(rq)}function YSt(t,e=ls()){return e[0]=t[0],e[1]=t[1],e[2]=t[3],e[3]=t[4],e}function JSt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=Number.NEGATIVE_INFINITY,t[3]=e[2],t[4]=e[3],t[5]=Number.POSITIVE_INFINITY,t}function XSt(t,e,i,r,n){return t[0]=e,t[1]=i,t[2]=Number.NEGATIVE_INFINITY,t[3]=r,t[4]=n,t[5]=Number.POSITIVE_INFINITY,t}function Rne(t){return t.length===6}function QSt(t){return qk(t)===0&&Hk(t)===0&&Gk(t)===0}function KSt(t,e,i){if(t==null||e==null)return t===e;if(!Rne(t)||!Rne(e))return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}const rq=[1/0,1/0,1/0,-1/0,-1/0,-1/0],aBe=[0,0,0,0,0,0];Bk();function eTt(t,{isPrimitive:e,width:i,depth:r,height:n}){const s=e?10:1;if(i==null&&n==null&&r==null)return[s*t[0],s*t[1],s*t[2]];const a=GT(i,r,n);let o;for(let l=0;l<3;l++){const c=a[l];if(c!=null){o=c/t[l];break}}for(let l=0;l<3;l++)a[l]==null&&(a[l]=t[l]*o);return a}const oBe=wY(-.5,-.5,-.5,.5,.5,.5),lBe=wY(-.5,-.5,0,.5,.5,1),cBe=wY(-.5,-.5,0,.5,.5,.5);function tTt(t){switch(t){case"sphere":case"cube":case"diamond":return oBe;case"cylinder":case"cone":case"inverted-cone":return lBe;case"tetrahedron":return cBe;default:return}}const _Y=["butt","square","round"],uBe=[..._Y,"none"],p0e=["miter","bevel","round"];var nq;let Kb=nq=class extends $e{constructor(t){super(t),this.color=new Se([0,0,0,1]),this.size=Qi(1),this.pattern=null,this.patternCap="butt"}clone(){const t={color:this.color!=null?this.color.clone():null,size:this.size,pattern:this.pattern!=null?this.pattern.clone():null,patternCap:this.patternCap};return new nq(t)}};d([f(Hv({colorRequiredOnWrite:!0}))],Kb.prototype,"color",void 0),d([f({...Up,json:{write:{isRequired:!0}}})],Kb.prototype,"size",void 0),d([f(d0e)],Kb.prototype,"pattern",void 0),d([f({type:_Y,json:{default:"butt",write:{overridePolicy(){return{enabled:this.pattern!=null}}}}})],Kb.prototype,"patternCap",void 0),Kb=nq=d([V("esri.symbols.support.Symbol3DOutline")],Kb);var wL,bS;let Fo=(bS=class extends jo{constructor(e){super(e),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const e={edges:this.edges!=null?this.edges.clone():null,enabled:this.enabled,material:this.material!=null?this.material.clone():null,pattern:this.pattern!=null?this.pattern.clone():null,castShadows:this.castShadows,outline:this.outline!=null?this.outline.clone():null};return new wL(e)}static fromSimpleFillSymbol(e){var n,s,a;const i=e.outline&&e.outline.style&&e.outline.style!=="solid"?new j0({style:e.outline.style}):null,r={size:((n=e.outline)==null?void 0:n.width)??0,color:(((s=e.outline)==null?void 0:s.color)??S2).clone(),pattern:i};return i&&((a=e.outline)!=null&&a.cap)&&(r.patternCap=e.outline.cap),new wL({material:new T2({color:(e.color??XUe).clone()}),pattern:e.style&&e.style!=="solid"?new v$({style:e.style}):null,outline:r})}},wL=bS,bS);d([pt({Fill:"fill"},{readOnly:!0})],Fo.prototype,"type",void 0),d([f({type:T2,json:{write:!0}})],Fo.prototype,"material",void 0),d([f(JUe)],Fo.prototype,"pattern",void 0),d([f({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Fo.prototype,"castShadows",void 0),d([f({type:Kb,json:{write:!0}})],Fo.prototype,"outline",void 0),d([f(u0e)],Fo.prototype,"edges",void 0),Fo=wL=d([V("esri.symbols.FillSymbol3DLayer")],Fo);var sq;const dBe=Es()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let e0=sq=class extends $e{constructor(t){super(t)}readHref(t,e,i){return t?Wm(t,i):e.dataURI}writeHref(t,e,i,r){t&&(rg(t)?e.dataURI=t:(e.href=Qw(t,r),Pl(e.href)&&(e.href=Ld(e.href))))}clone(){return new sq({href:this.href,primitive:this.primitive})}equals(t){return t.primitive===this.primitive&&t.href===this.href}};d([f({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],e0.prototype,"href",void 0),d([je("href")],e0.prototype,"readHref",null),d([Ge("href",{href:{type:String},dataURI:{type:String}})],e0.prototype,"writeHref",null),d([pt(dBe)],e0.prototype,"primitive",void 0),e0=sq=d([V("esri.symbols.support.IconSymbol3DLayerResource")],e0);const hBe="circle";let _L=class extends bt($e){constructor(e){super(e),this.mode="hidden"}equals(e){return this.mode===e.mode}};d([f({type:["adaptive","hidden","visible"],json:{write:{isRequired:!0}}})],_L.prototype,"mode",void 0),_L=d([V("esri.symbols.support.OccludedVisibility")],_L);const f0e=_L;var aq;let b$=aq=class extends et{constructor(t){super(t),this.x=0,this.y=0}clone(){return new aq({x:this.x,y:this.y})}equals(t){return t.x===this.x&&t.y===this.y}};d([f({type:Number})],b$.prototype,"x",void 0),d([f({type:Number})],b$.prototype,"y",void 0),b$=aq=d([V("esri.symbols.support.Symbol3DAnchorPosition2D")],b$);var oq;let hC=oq=class extends $e{constructor(t){super(t),this.color=new Se([0,0,0,1]),this.size=Qi(1)}clone(){const t={color:this.color!=null?this.color.clone():null,size:this.size};return new oq(t)}equals(t){return t.size===this.size&&(this.color==null?t.color==null:this.color.equals(t.color))}};d([f(Hv({colorRequiredOnWrite:!0}))],hC.prototype,"color",void 0),d([f({...Up,json:{write:{isRequired:!0}}})],hC.prototype,"size",void 0),hC=oq=d([V("esri.symbols.support.Symbol3DIconOutline")],hC);var gx,wS;let na=(wS=class extends jo{constructor(e){super(e),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=null,this.outline=null,this.angle=0,this.occludedVisibility=null}clone(){return new gx({anchor:this.anchor,anchorPosition:he(this.anchorPosition),enabled:this.enabled,material:he(this.material),outline:he(this.outline),resource:he(this.resource),angle:this.angle,size:this.size,occludedVisibility:he(this.occludedVisibility)})}static fromSimpleMarkerSymbol(e){const i=e.color||S2,r=zne(e),n=e.outline&&e.outline.width>0?{size:e.outline.width,color:(e.outline.color||S2).clone()}:null;return new gx({size:e.size,angle:e.angle,resource:{primitive:fBe(()=>Ie.getLogger(this.prototype),e.style)},material:{color:i},outline:n,anchor:r?"relative":void 0,anchorPosition:r})}static fromPictureMarkerSymbol(e){const i=!e.color||QUe(e.color)?S2:e.color,r=zne(e);return new gx({size:e.width<=e.height?e.height:e.width,angle:e.angle,resource:{href:e.url},material:{color:i.clone()},anchor:r?"relative":void 0,anchorPosition:r})}static fromCIMSymbol(e){return new gx({resource:{href:$fe({mediaType:"application/json",data:JSON.stringify(e.data)})}})}},gx=wS,wS);function zne(t){const e="width"in t?t.width:t.size,i="height"in t?t.height:t.size,r=Nne(t.xoffset),n=Nne(t.yoffset);return(r||n)&&e&&i?{x:-r/e,y:n/i}:null}function Nne(t){return isFinite(t)?t:0}d([f({type:Al,json:{write:!0}})],na.prototype,"material",void 0),d([f({type:e0,json:{write:!0}})],na.prototype,"resource",void 0),d([pt({Icon:"icon"},{readOnly:!0})],na.prototype,"type",void 0),d([f({...Up,json:{write:{isRequired:!0}}})],na.prototype,"size",void 0),d([pt({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"},{default:"center"})],na.prototype,"anchor",void 0),d([f({type:b$,json:{type:[Number],read:{reader:t=>new b$({x:t[0],y:t[1]})},write:{writer:(t,e)=>{e.anchorPosition=[t.x,t.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],na.prototype,"anchorPosition",void 0),d([f({type:hC,json:{write:!0}})],na.prototype,"outline",void 0),d([f({type:Number,json:{write:!0,default:0}})],na.prototype,"angle",void 0),d([f({type:f0e})],na.prototype,"occludedVisibility",void 0),na=gx=d([V("esri.symbols.IconSymbol3DLayer")],na);const pBe={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function fBe(t,e){return pBe[e]||(t().warn(`${e} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}const mBe=["begin","end","begin-end"],m0e=["arrow","circle","square","diamond","cross","x"];let _m=class extends bt($e){constructor(e){super(e),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(e){return e!=null&&e.placement===this.placement&&e.style===this.style&&(this.color==null&&e.color==null||this.color!=null&&e.color!=null&&this.color.toJSON()===e.color.toJSON())}};d([f({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0,isRequired:!0}}})],_m.prototype,"type",void 0),d([f({type:mBe,json:{default:"begin-end",write:!0}})],_m.prototype,"placement",void 0),d([f({type:m0e,json:{default:"arrow",write:!0}})],_m.prototype,"style",void 0),d([f({type:Se,json:{type:[ei],default:null,write:!0}})],_m.prototype,"color",void 0),_m=d([V("esri.symbols.LineStyleMarker3D")],_m);var xL,_S;let Lo=(_S=class extends jo{constructor(e){super(e),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=Qi(1),this.pattern=null,this.marker=null}clone(){const e={enabled:this.enabled,material:this.material!=null?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:this.pattern!=null?this.pattern.clone():null,marker:this.marker!=null?this.marker.clone():null};return new xL(e)}static fromSimpleLineSymbol(e){var r;const i={enabled:!0,size:e.width??Qi(1),cap:e.cap||"butt",join:e.join||"miter",pattern:e.style?new j0({style:e.style}):null,material:new Al({color:(e.color||S2).clone()}),marker:e.marker?new _m({placement:e.marker.placement,style:e.marker.style,color:((r=e.marker.color)==null?void 0:r.clone())??null}):null};return new xL(i)}},xL=_S,_S);d([f({type:Al,json:{write:!0}})],Lo.prototype,"material",void 0),d([pt({Line:"line"},{readOnly:!0})],Lo.prototype,"type",void 0),d([f({type:p0e,json:{write:!0,default:"miter"}})],Lo.prototype,"join",void 0),d([f({type:_Y,json:{write:!0,default:"butt"}})],Lo.prototype,"cap",void 0),d([f({...Up,json:{write:{isRequired:!0}}})],Lo.prototype,"size",void 0),d([f(d0e)],Lo.prototype,"pattern",void 0),d([f({types:{key:"type",base:_m,typeMap:{style:_m}},json:{write:!0}})],Lo.prototype,"marker",void 0),Lo=xL=d([V("esri.symbols.LineSymbol3DLayer")],Lo);var lq;const gBe=Es()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let pC=lq=class extends $e{clone(){return new lq({href:this.href,primitive:this.primitive})}};d([f({type:String,json:{read:yD,write:Kw}})],pC.prototype,"href",void 0),d([pt(gBe)],pC.prototype,"primitive",void 0),pC=lq=d([V("esri.symbols.support.ObjectSymbol3DLayerResource")],pC);const yBe="sphere";var cq;let I0=cq=class extends et{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new cq({x:this.x,y:this.y,z:this.z})}};d([f({type:Number})],I0.prototype,"x",void 0),d([f({type:Number})],I0.prototype,"y",void 0),d([f({type:Number})],I0.prototype,"z",void 0),I0=cq=d([V("esri.symbols.support.Symbol3DAnchorPosition3D")],I0);var uq,xS;let ra=(xS=class extends jo{constructor(e){super(e),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){var e,i,r;return new uq({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:(e=this.anchorPosition)==null?void 0:e.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:((i=this.material)==null?void 0:i.clone())??null,castShadows:this.castShadows,resource:(r=this.resource)==null?void 0:r.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}},uq=xS,xS);d([f({type:Al,json:{write:!0}})],ra.prototype,"material",void 0),d([f({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],ra.prototype,"castShadows",void 0),d([f({type:pC,json:{write:!0}})],ra.prototype,"resource",void 0),d([pt({Object:"object"},{readOnly:!0})],ra.prototype,"type",void 0),d([f({type:Number,json:{write:!0}})],ra.prototype,"width",void 0),d([f({type:Number,json:{write:!0}})],ra.prototype,"height",void 0),d([f({type:Number,json:{write:!0}})],ra.prototype,"depth",void 0),d([pt({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"},{default:"origin"})],ra.prototype,"anchor",void 0),d([f({type:I0,json:{type:[Number],read:{reader:t=>new I0({x:t[0],y:t[1],z:t[2]})},write:{writer:(t,e)=>{e.anchorPosition=[t.x,t.y,t.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],ra.prototype,"anchorPosition",void 0),d([f({type:Number,json:{write:!0}})],ra.prototype,"heading",void 0),d([f({type:Number,json:{write:!0}})],ra.prototype,"tilt",void 0),d([f({type:Number,json:{write:!0}})],ra.prototype,"roll",void 0),d([f({readOnly:!0})],ra.prototype,"isPrimitive",null),ra=uq=d([V("esri.symbols.ObjectSymbol3DLayer")],ra);var dq,$S;let Ea=($S=class extends jo{constructor(e){super(e),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(e,i){return e??(i.height==null&&i.size!=null?i.size:void 0)}readHeight(e,i){return e??(i.width==null&&i.size!=null?i.size:void 0)}clone(){return new dq({enabled:this.enabled,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}},dq=$S,$S);d([f({type:Al,json:{write:!0}})],Ea.prototype,"material",void 0),d([f({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Ea.prototype,"castShadows",void 0),d([pt({Path:"path"},{readOnly:!0})],Ea.prototype,"type",void 0),d([f({type:["circle","quad"],nonNullable:!0,json:{write:!0,default:"circle"}})],Ea.prototype,"profile",void 0),d([f({type:p0e,nonNullable:!0,json:{write:!0,default:"miter"}})],Ea.prototype,"join",void 0),d([f({type:uBe,nonNullable:!0,json:{write:!0,default:"butt"}})],Ea.prototype,"cap",void 0),d([f({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],Ea.prototype,"width",void 0),d([je("width",["width","size","height"])],Ea.prototype,"readWidth",null),d([f({type:Number,json:{write:!0}})],Ea.prototype,"height",void 0),d([je("height",["height","size","width"])],Ea.prototype,"readHeight",null),d([f({type:["center","bottom","top"],nonNullable:!0,json:{write:!0,default:"center"}})],Ea.prototype,"anchor",void 0),d([f({type:["heading","all"],nonNullable:!0,json:{write:!0,default:"all"}})],Ea.prototype,"profileRotation",void 0),Ea=dq=d([V("esri.symbols.PathSymbol3DLayer")],Ea);const vBe=["none","underline","line-through"],bBe=["normal","italic","oblique"],wBe=["normal","lighter","bold","bolder"],g0e={type:Number,cast:t=>{const e=No(t);return e===0?1:ua(e,.1,4)},nonNullable:!0},_Be=["left","right","center"],xBe=["baseline","top","middle","bottom"],y0e={type:_Be,nonNullable:!0},v0e={type:xBe,nonNullable:!0},$Be=8;var hq;let li=hq=class extends $e{constructor(t){super(t),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(t){return $i(t)}clone(){return new hq({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};d([f({type:vBe,json:{default:"none",write:!0}})],li.prototype,"decoration",void 0),d([f({type:String,json:{write:!0}})],li.prototype,"family",void 0),d([f({type:Number,json:{write:{overridePolicy:(t,e,i)=>({enabled:!i||!i.textSymbol3D})}}})],li.prototype,"size",void 0),d([_i("size")],li.prototype,"castSize",null),d([f({type:bBe,json:{default:"normal",write:!0}})],li.prototype,"style",void 0),d([f({type:wBe,json:{default:"normal",write:!0}})],li.prototype,"weight",void 0),li=hq=d([V("esri.symbols.Font")],li);var pq;let w$=pq=class extends $e{constructor(){super(...arguments),this.color=new Se([0,0,0,1]),this.size=0}clone(){const t={color:he(this.color),size:this.size};return new pq(t)}};d([f(Hv())],w$.prototype,"color",void 0),d([f(Up)],w$.prototype,"size",void 0),w$=pq=d([V("esri.symbols.support.Symbol3DHalo")],w$);let I2=class extends bt($e){constructor(e){super(e),this.color=null}};d([f(Hv())],I2.prototype,"color",void 0),I2=d([V("esri.symbols.support.Symbol3DTextBackground")],I2);var $L,SS;let _s=(SS=class extends jo{constructor(e){super(e),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline",this.occludedVisibility=null}get font(){return this._get("font")||null}set font(e){e!=null&&this._userSize!=null&&(e.size=this._userSize),this._set("font",e)}writeFont(e,i,r,n){const s={...n,textSymbol3D:!0};i.font=e.write({},s),delete i.font.size}get size(){var e;return this._userSize!=null?this._userSize:((e=this.font)==null?void 0:e.size)!=null?this.font.size:9}set size(e){this._userSize=e,this.font!=null&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const e=new $L({enabled:this.enabled,font:he(this.font),halo:he(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:this.material!=null?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:he(this.background),occludedVisibility:he(this.occludedVisibility)});return e._userSize=this._userSize,e}static fromTextSymbol(e){return new $L({font:e.font!=null?e.font.clone():new li,halo:SBe(e.haloColor,e.haloSize),horizontalAlignment:e.horizontalAlignment,lineHeight:e.lineHeight,material:e.color?new Al({color:e.color.clone()}):null,text:e.text,verticalAlignment:e.verticalAlignment,background:e.backgroundColor?new I2({color:e.backgroundColor.clone()}):null})}},$L=SS,SS);function SBe(t,e){return t&&e!=null&&e>0?new w$({color:he(t),size:e}):null}d([f({type:li,json:{write:!0}})],_s.prototype,"font",null),d([Ge("font")],_s.prototype,"writeFont",null),d([f({type:w$,json:{write:!0}})],_s.prototype,"halo",void 0),d([f({...y0e,json:{default:"center",write:!0}})],_s.prototype,"horizontalAlignment",void 0),d([f({...g0e,json:{default:1,write:!0}})],_s.prototype,"lineHeight",void 0),d([f({type:Al,json:{write:!0}})],_s.prototype,"material",void 0),d([f({type:I2,json:{write:!0}})],_s.prototype,"background",void 0),d([f(Up)],_s.prototype,"size",null),d([f({type:String,json:{write:!0}})],_s.prototype,"text",void 0),d([pt({Text:"text"},{readOnly:!0})],_s.prototype,"type",void 0),d([f({...v0e,json:{default:"baseline",write:!0}})],_s.prototype,"verticalAlignment",void 0),d([f({type:f0e})],_s.prototype,"occludedVisibility",void 0),_s=$L=d([V("esri.symbols.TextSymbol3DLayer")],_s);var fq,TS;let om=(TS=class extends jo{constructor(e){super(e),this.color=mq.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new fq({color:this.color.clone(),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}},fq=TS,TS);d([f({type:Se,nonNullable:!0,json:{type:[ei],write:(t,e,i)=>e[i]=t.toArray(1),default:()=>mq.clone(),defaultEquals:t=>t.toCss(!0)===mq.toCss(!0)}})],om.prototype,"color",void 0),d([pt({Water:"water"},{readOnly:!0})],om.prototype,"type",void 0),d([f({type:["small","medium","large"],json:{write:!0,default:"medium"}})],om.prototype,"waterbodySize",void 0),d([f({type:Number,json:{write:!0,default:null}})],om.prototype,"waveDirection",void 0),d([f({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],om.prototype,"waveStrength",void 0),om=fq=d([V("esri.symbols.WaterSymbol3DLayer")],om);const mq=new Se([0,119,190]);var gq;let $d=gq=class extends et{constructor(t){super(t),this.name=null,this.styleUrl=null,this.styleName=null,this.portal=null}clone(){return new gq({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};d([f({type:String})],$d.prototype,"name",void 0),d([f({type:String})],$d.prototype,"styleUrl",void 0),d([f({type:String})],$d.prototype,"styleName",void 0),d([f({type:qe})],$d.prototype,"portal",void 0),$d=gq=d([V("esri.symbols.support.StyleOrigin")],$d);var yq;let cw=yq=class extends et{constructor(){super(...arguments),this.url=""}clone(){return new yq({url:this.url})}};d([f({type:String})],cw.prototype,"url",void 0),cw=yq=d([V("esri.symbols.support.Thumbnail")],cw);const b0e={icon:na,object:ra,line:Lo,path:Ea,fill:Fo,extrude:am,text:_s,water:om},TBe=Ue.ofType({base:jo,key:"type",typeMap:b0e,errorContext:"symbol-layer"});let Sl=class extends Bn{constructor(e){super(e),this.styleOrigin=null,this.thumbnail=null,this.type=null;const i=this.__accessor__&&this.__accessor__.metadata&&this.__accessor__.metadata.symbolLayers,r=i==null?void 0:i.type,n=r||Ue;this._set("symbolLayers",new n)}get color(){return null}set color(e){this.constructed&&Ie.getLogger(this).error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(e){Mp(e,this._get("symbolLayers"))}readStyleOrigin(e,i,r){if(e.styleUrl&&e.name){const n=Wm(e.styleUrl,r);return new $d({styleUrl:n,name:e.name})}if(e.styleName&&e.name)return new $d({portal:(r==null?void 0:r.portal)||qe.getDefault(),styleName:e.styleName,name:e.name});r!=null&&r.messages&&r.messages.push(new Ic("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:r,definition:e}))}writeStyleOrigin(e,i,r,n){if(e.styleUrl&&e.name){let s=Qw(e.styleUrl,n);Pl(s)&&(s=Ld(s)),i.styleOrigin={styleUrl:s,name:e.name}}else e.styleName&&e.name&&(e.portal&&(n!=null&&n.portal)&&!xfe(e.portal.restUrl,n.portal.restUrl)?n!=null&&n.messages&&n.messages.push(new Ic("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):i.styleOrigin={styleName:e.styleName,name:e.name})}normalizeCtorArgs(e){return e instanceof jo||e&&b0e[e.type]?{symbolLayers:[e]}:Array.isArray(e)?{symbolLayers:e}:e}};d([f({json:{read:!1,write:!1}})],Sl.prototype,"color",null),d([f({type:TBe,nonNullable:!0,json:{write:!0}}),_i(Fye)],Sl.prototype,"symbolLayers",null),d([f({type:$d})],Sl.prototype,"styleOrigin",void 0),d([je("styleOrigin")],Sl.prototype,"readStyleOrigin",null),d([Ge("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],Sl.prototype,"writeStyleOrigin",null),d([f({type:cw,json:{read:!1}})],Sl.prototype,"thumbnail",void 0),d([f({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],Sl.prototype,"type",void 0),Sl=d([V("esri.symbols.Symbol3D")],Sl);let _$=class extends $e{constructor(e){super(e),this.visible=!0}clone(){throw new Error("Subclasses of Callout3D should implement their own clone method.")}};d([f({type:["line"],constructOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,isRequired:!0}}})],_$.prototype,"type",void 0),d([f({readOnly:!0})],_$.prototype,"visible",void 0),_$=d([V("esri.symbols.callouts.Callout3D")],_$);var vq;let SL=vq=class extends $e{constructor(t){super(t),this.color=new Se("white")}clone(){return new vq({color:he(this.color)})}};d([f(Hv({colorRequiredOnWrite:!0}))],SL.prototype,"color",void 0),SL=vq=d([V("esri.symbols.callouts.LineCallout3DBorder")],SL);const IBe=SL;var bq;let lm=bq=class extends _${constructor(t){super(t),this.type="line",this.color=new Se([0,0,0,1]),this.size=Qi(1),this.border=null}get visible(){return this.size>0&&this.color!=null&&this.color.a>0}clone(){return new bq({color:he(this.color),size:this.size,border:he(this.border)})}};d([pt({line:"line"})],lm.prototype,"type",void 0),d([f(Hv({colorRequiredOnWrite:!0}))],lm.prototype,"color",void 0),d([f({...Up,json:{write:{isRequired:!0}}})],lm.prototype,"size",void 0),d([f({type:IBe,json:{write:!0}})],lm.prototype,"border",void 0),d([f({readOnly:!0})],lm.prototype,"visible",null),lm=bq=d([V("esri.symbols.callouts.LineCallout3D")],lm);function xY(t){if(!t)return!1;const e=t.verticalOffset;return!(!e||e.screenLength<=0||e.maxWorldLength!=null&&e.maxWorldLength<=0)}function w0e(t){if(!t||!t.supportsCallout||!t.supportsCallout())return!1;const e=t.callout;return!!(e!=null&&e.visible)&&!!xY(t)}function oTt(t){return t.type==="point-3d"||t.type==="label-3d"}function lTt(t){return t.horizontalAlignment==="center"}const _0e={types:{key:"type",base:_$,typeMap:{line:lm}},json:{write:!0}};var wq;let qy=wq=class extends $e{constructor(t){super(t),this.screenLength=0,this.minWorldLength=0,this.maxWorldLength=null}clone(){return new wq({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};d([f({...Up,json:{write:{isRequired:!0}}})],qy.prototype,"screenLength",void 0),d([f({type:Number,nonNullable:!0,json:{write:!0,default:0}})],qy.prototype,"minWorldLength",void 0),d([f({type:Number,json:{write:!0}})],qy.prototype,"maxWorldLength",void 0),qy=wq=d([V("esri.symbols.support.Symbol3DVerticalOffset")],qy);var TL;const x0e=Ue.ofType({base:null,key:"type",typeMap:{text:_s}});let md=TL=class extends Sl{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new x0e,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return w0e(this)}hasVisibleVerticalOffset(){return xY(this)}clone(){return new TL({styleOrigin:he(this.styleOrigin),symbolLayers:he(this.symbolLayers),thumbnail:he(this.thumbnail),callout:he(this.callout),verticalOffset:he(this.verticalOffset)})}static fromTextSymbol(t){return new TL({symbolLayers:new Ue([_s.fromTextSymbol(t)])})}};d([f({type:qy,json:{write:!0}})],md.prototype,"verticalOffset",void 0),d([f(_0e)],md.prototype,"callout",void 0),d([f({json:{read:!1,write:!1}})],md.prototype,"styleOrigin",void 0),d([f({type:x0e})],md.prototype,"symbolLayers",void 0),d([pt({LabelSymbol3D:"label-3d"},{readOnly:!0})],md.prototype,"type",void 0),md=TL=d([V("esri.symbols.LabelSymbol3D")],md);var IL;const $0e=Ue.ofType({base:null,key:"type",typeMap:{line:Lo,path:Ea}}),MBe=Ue.ofType({base:null,key:"type",typeMap:{line:Lo,path:Ea}});let kd=IL=class extends Sl{constructor(t){super(t),this.symbolLayers=new $0e,this.type="line-3d"}clone(){return new IL({styleOrigin:he(this.styleOrigin),symbolLayers:he(this.symbolLayers),thumbnail:he(this.thumbnail)})}static fromSimpleLineSymbol(t){return new IL({symbolLayers:new Ue([Lo.fromSimpleLineSymbol(t)])})}};d([f({type:$0e,json:{type:MBe}})],kd.prototype,"symbolLayers",void 0),d([pt({LineSymbol3D:"line-3d"},{readOnly:!0})],kd.prototype,"type",void 0),kd=IL=d([V("esri.symbols.LineSymbol3D")],kd);var ML;const S0e=Ue.ofType({base:null,key:"type",typeMap:{fill:Fo}});let Lm=ML=class extends Sl{constructor(t){super(t),this.symbolLayers=new S0e,this.type="mesh-3d"}clone(){return new ML({styleOrigin:he(this.styleOrigin),symbolLayers:he(this.symbolLayers),thumbnail:he(this.thumbnail)})}static fromSimpleFillSymbol(t){return new ML({symbolLayers:new Ue([Fo.fromSimpleFillSymbol(t)])})}};d([f({type:S0e})],Lm.prototype,"symbolLayers",void 0),d([pt({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],Lm.prototype,"type",void 0),Lm=ML=d([V("esri.symbols.MeshSymbol3D")],Lm);let fC=class extends Bn{constructor(e){super(e),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};d([pt({esriSLS:"simple-line"},{readOnly:!0})],fC.prototype,"type",void 0),d([f({type:Number,cast:$i,json:{write:!0}})],fC.prototype,"width",void 0),fC=d([V("esri.symbols.LineSymbol")],fC);var _q;let bh=_q=class extends $e{constructor(t){super(t),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(t,e,i,r){e[i]=(r==null?void 0:r.origin)==="web-map"?"arrow":t}set color(t){this._set("color",t)}readColor(t){return(t==null?void 0:t[0])!=null?[t[0],t[1],t[2],t[3]/255]:t}writeColor(t,e,i,r){(r==null?void 0:r.origin)==="web-map"||(e[i]=t)}clone(){return new _q({color:he(this.color),placement:this.placement,style:this.style})}hash(){var t;return`${this.placement}.${(t=this.color)==null?void 0:t.hash()}.${this.style}`}};d([f({type:["begin","end","begin-end"],json:{write:!0}})],bh.prototype,"placement",void 0),d([pt({"line-marker":"line-marker"},{readOnly:!0}),f({json:{origins:{"web-map":{write:!1}}}})],bh.prototype,"type",void 0),d([f({type:m0e})],bh.prototype,"style",void 0),d([Ge("style")],bh.prototype,"writeStyle",null),d([f({type:Se,value:null,json:{write:{allowNull:!0}}})],bh.prototype,"color",null),d([je("color")],bh.prototype,"readColor",null),d([Ge("color")],bh.prototype,"writeColor",null),bh=_q=d([V("esri.symbols.LineSymbolMarker")],bh);const CBe=bh;var xq;const m6=new jt({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let xn=xq=class extends fC{constructor(...t){super(...t),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(t,e,i,r,n,s){if(t&&typeof t!="string")return t;const a={};return t!=null&&(a.style=t),e!=null&&(a.color=e),i!=null&&(a.width=$i(i)),r!=null&&(a.cap=r),n!=null&&(a.join=n),s!=null&&(a.miterLimit=$i(s)),a}clone(){var t;return new xq({color:he(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:(t=this.marker)==null?void 0:t.clone()})}hash(){var t,e;return`${super.hash()}.${(t=this.color)==null?void 0:t.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${(e=this.marker)==null?void 0:e.hash()}`}};d([pt({esriSLS:"simple-line"},{readOnly:!0})],xn.prototype,"type",void 0),d([f({type:m6.apiValues,json:{read:m6.read,write:m6.write}})],xn.prototype,"style",void 0),d([f({type:["butt","round","square"],json:{write:{overridePolicy:(t,e,i)=>({enabled:t!=="round"&&(i==null?void 0:i.origin)==null})}}})],xn.prototype,"cap",void 0),d([f({type:["miter","round","bevel"],json:{write:{overridePolicy:(t,e,i)=>({enabled:t!=="round"&&(i==null?void 0:i.origin)==null})}}})],xn.prototype,"join",void 0),d([f({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":CBe}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],xn.prototype,"marker",void 0),d([f({type:Number,json:{read:!1,write:!1}})],xn.prototype,"miterLimit",void 0),xn=xq=d([V("esri.symbols.SimpleLineSymbol")],xn);let x$=class extends Bn{constructor(e){super(e),this.outline=null,this.type=null}hash(){var e;return`${this.type}.${(e=this.outline)==null?void 0:e.hash()}`}};d([f({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":xn}},json:{default:null,write:!0}})],x$.prototype,"outline",void 0),d([f({type:["simple-fill","picture-fill"],readOnly:!0})],x$.prototype,"type",void 0),x$=d([V("esri.symbols.FillSymbol")],x$);function EBe(t,e,i){return e.imageData?$fe({mediaType:e.contentType||"image/png",isBase64:!0,data:e.imageData}):T0e(e.url,i)}function T0e(t,e){if(!Pl(t)){const i=ABe(e);if(i)return Ev(i,"images",t)}return Wm(t,e)}function kBe(t,e,i,r){if(rg(t)){const n=Xw(t);if(!n)return;e.contentType=n.mediaType,e.imageData=n.data,i&&i.imageData===e.imageData&&i.url&&Kw(i.url,e,"url",r)}else Kw(t,e,"url",r)}const I0e={json:{read:{source:["imageData","url"],reader:EBe},write:{writer(t,e,i,r){kBe(t,e,this.source,r)}}}},M0e={readOnly:!0,json:{read:{source:["imageData","url"],reader(t,e,i){const r={};return e.imageData&&(r.imageData=e.imageData),e.contentType&&(r.contentType=e.contentType),e.url&&(r.url=T0e(e.url,i)),r}}}};function ABe(t){var n,s;if(!t)return null;const{origin:e,layer:i}=t;if(e!=="service"&&e!=="portal-item")return null;const r=i==null?void 0:i.type;return r==="feature"||r==="stream"?(n=i.parsedUrl)==null?void 0:n.path:r==="map-image"||r==="tile"?(s=t.url)==null?void 0:s.path:null}var $q;let wl=$q=class extends x${constructor(...t){super(...t),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(t,e,i,r){if(t&&typeof t!="string"&&t.imageData==null)return t;const n={};return t&&(n.url=t),e&&(n.outline=e),i!=null&&(n.width=$i(i)),r!=null&&(n.height=$i(r)),n}clone(){const t=new $q({color:he(this.color),height:this.height,outline:he(this.outline),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return t._set("source",he(this.source)),t}hash(){var t;return`${super.hash()}.${(t=this.color)==null?void 0:t.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};d([pt({esriPFS:"picture-fill"},{readOnly:!0})],wl.prototype,"type",void 0),d([f(I0e)],wl.prototype,"url",void 0),d([f({type:Number,json:{write:!0}})],wl.prototype,"xscale",void 0),d([f({type:Number,json:{write:!0}})],wl.prototype,"yscale",void 0),d([f({type:Number,cast:$i,json:{write:!0}})],wl.prototype,"width",void 0),d([f({type:Number,cast:$i,json:{write:!0}})],wl.prototype,"height",void 0),d([f({type:Number,cast:$i,json:{write:!0}})],wl.prototype,"xoffset",void 0),d([f({type:Number,cast:$i,json:{write:!0}})],wl.prototype,"yoffset",void 0),d([f(M0e)],wl.prototype,"source",void 0),wl=$q=d([V("esri.symbols.PictureFillSymbol")],wl);let cm=class extends Bn{constructor(e){super(e),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};d([f({type:Number,json:{read:t=>t&&-1*t,write:(t,e)=>e.angle=t&&-1*t}})],cm.prototype,"angle",void 0),d([f({type:["simple-marker","picture-marker"],readOnly:!0})],cm.prototype,"type",void 0),d([f({type:Number,cast:$i,json:{write:!0}})],cm.prototype,"xoffset",void 0),d([f({type:Number,cast:$i,json:{write:!0}})],cm.prototype,"yoffset",void 0),d([f({cast:t=>t==="auto"?t:No($i(t)),json:{write:!0}})],cm.prototype,"size",void 0),cm=d([V("esri.symbols.MarkerSymbol")],cm);var Sq;let Oo=Sq=class extends cm{constructor(...t){super(...t),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string"&&t.imageData==null)return t;const r={};return t&&(r.url=t),e!=null&&(r.width=$i(e)),i!=null&&(r.height=$i(i)),r}readHeight(t,e){return e.size||t}readWidth(t,e){return e.size||t}clone(){const t=new Sq({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return t._set("source",he(this.source)),t}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};d([f({json:{write:!1}})],Oo.prototype,"color",void 0),d([pt({esriPMS:"picture-marker"},{readOnly:!0})],Oo.prototype,"type",void 0),d([f(I0e)],Oo.prototype,"url",void 0),d([f(M0e)],Oo.prototype,"source",void 0),d([f({type:Number,cast:$i,json:{write:!0}})],Oo.prototype,"height",void 0),d([je("height",["height","size"])],Oo.prototype,"readHeight",null),d([f({type:Number,cast:$i,json:{write:!0}})],Oo.prototype,"width",void 0),d([f({json:{write:!1}})],Oo.prototype,"size",void 0),Oo=Sq=d([V("esri.symbols.PictureMarkerSymbol")],Oo);var t0;const C0e=Ue.ofType({base:null,key:"type",typeMap:{icon:na,object:ra,text:_s}});let Do=t0=class extends Sl{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.symbolLayers=new C0e,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const t of this.symbolLayers.items)switch(t.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return w0e(this)}hasVisibleVerticalOffset(){return xY(this)}clone(){return new t0({verticalOffset:he(this.verticalOffset),callout:he(this.callout),styleOrigin:he(this.styleOrigin),symbolLayers:he(this.symbolLayers),thumbnail:he(this.thumbnail)})}static fromSimpleMarkerSymbol(t){return new t0({symbolLayers:new Ue([na.fromSimpleMarkerSymbol(t)])})}static fromPictureMarkerSymbol(t){return new t0({symbolLayers:new Ue([na.fromPictureMarkerSymbol(t)])})}static fromCIMSymbol(t){var r,n;if(((n=(r=t.data)==null?void 0:r.symbol)==null?void 0:n.type)!=="CIMPointSymbol")return null;const i=t.data.symbol;return new t0(i!=null&&i.callout?{symbolLayers:new Ue([na.fromCIMSymbol(t)]),callout:new lm({size:.5,color:new Se([0,0,0])}),verticalOffset:new qy({screenLength:40})}:{symbolLayers:new Ue([na.fromCIMSymbol(t)])})}static fromTextSymbol(t){return new t0({symbolLayers:new Ue([_s.fromTextSymbol(t)])})}};d([f({type:qy,json:{write:!0}})],Do.prototype,"verticalOffset",void 0),d([f(_0e)],Do.prototype,"callout",void 0),d([f({type:C0e,json:{origins:{"web-scene":{write:!0}}}})],Do.prototype,"symbolLayers",void 0),d([pt({PointSymbol3D:"point-3d"},{readOnly:!0})],Do.prototype,"type",void 0),Do=t0=d([V("esri.symbols.PointSymbol3D")],Do);var mC;const E0e=Ue.ofType({base:null,key:"type",typeMap:{extrude:am,fill:Fo,icon:na,line:Lo,object:ra,text:_s,water:om}});let vu=mC=class extends Sl{constructor(t){super(t),this.symbolLayers=new E0e,this.type="polygon-3d"}initialize(){const t=e=>{e.type==="line"&&Mv(Ie.getLogger(this),"LineSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use FillSymbol3DLayer.outline instead.",version:"4.28"}),e.type==="text"&&Mv(Ie.getLogger(this),"TextSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use Labels instead.",version:"4.28"})};for(const e of this.symbolLayers)t(e);this.addHandles(ca(()=>this.symbolLayers,"after-add",({item:e})=>t(e),Nd))}clone(){return new mC({styleOrigin:he(this.styleOrigin),symbolLayers:he(this.symbolLayers),thumbnail:he(this.thumbnail)})}static fromJSON(t){var i;const e=new mC;if(e.read(t),e.symbolLayers.length===2&&e.symbolLayers.at(0).type==="fill"&&e.symbolLayers.at(1).type==="line"){const r=e.symbolLayers.at(0),n=e.symbolLayers.at(1);!n.enabled||(i=t.symbolLayers)!=null&&i[1]&&t.symbolLayers[1].enable===!1||(r.outline={size:n.size,color:n.material!=null?n.material.color:null}),e.symbolLayers.removeAt(1)}return e}static fromSimpleFillSymbol(t){return new mC({symbolLayers:new Ue([Fo.fromSimpleFillSymbol(t)])})}};d([f({type:E0e,json:{write:!0}})],vu.prototype,"symbolLayers",void 0),d([pt({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],vu.prototype,"type",void 0),vu=mC=d([V("esri.symbols.PolygonSymbol3D")],vu);var Tq;const g6=new jt({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let no=Tq=class extends x${constructor(...t){super(...t),this.color=new Se([0,0,0,.25]),this.outline=new xn,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string")return t;const r={};return t&&(r.style=t),e&&(r.outline=e),i&&(r.color=i),r}clone(){return new Tq({color:he(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};d([f()],no.prototype,"color",void 0),d([f()],no.prototype,"outline",void 0),d([pt({esriSFS:"simple-fill"},{readOnly:!0})],no.prototype,"type",void 0),d([f({type:g6.apiValues,json:{read:g6.read,write:g6.write}})],no.prototype,"style",void 0),no=Tq=d([V("esri.symbols.SimpleFillSymbol")],no);var Iq;const y6=new jt({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let tn=Iq=class extends cm{constructor(...t){super(...t),this.color=new Se([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new xn}normalizeCtorArgs(t,e,i,r){if(t&&typeof t!="string")return t;const n={};return t&&(n.style=t),e!=null&&(n.size=$i(e)),i&&(n.outline=i),r&&(n.color=r),n}writeColor(t,e){t&&this.style!=="x"&&this.style!=="cross"&&(e.color=t.toJSON()),t===null&&(e.color=null)}set path(t){this.style="path",this._set("path",t)}clone(){return new Iq({angle:this.angle,color:he(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var t;return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${(t=this.outline)==null?void 0:t.hash()}`}};d([f()],tn.prototype,"color",void 0),d([Ge("color")],tn.prototype,"writeColor",null),d([pt({esriSMS:"simple-marker"},{readOnly:!0})],tn.prototype,"type",void 0),d([f()],tn.prototype,"size",void 0),d([f({type:y6.apiValues,json:{read:y6.read,write:y6.write}})],tn.prototype,"style",void 0),d([f({type:String,json:{write:!0}})],tn.prototype,"path",null),d([f({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":xn}},json:{default:null,write:!0}})],tn.prototype,"outline",void 0),tn=Iq=d([V("esri.symbols.SimpleMarkerSymbol")],tn);var Mq;let Et=Mq=class extends Bn{constructor(...t){super(...t),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new li,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string")return t;const r={};return t&&(r.text=t),e&&(r.font=e),i&&(r.color=i),r}writeLineWidth(t,e,i,r){r&&typeof r!="string"?r.origin:e[i]=t}castLineWidth(t){return $i(t)}writeLineHeight(t,e,i,r){r&&typeof r!="string"?r.origin:e[i]=t}clone(){return new Mq({angle:this.angle,backgroundColor:he(this.backgroundColor),borderLineColor:he(this.borderLineColor),borderLineSize:this.borderLineSize,color:he(this.color),font:this.font&&this.font.clone(),haloColor:he(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var t,e,i;return`${(t=this.backgroundColor)==null?void 0:t.hash()}.${this.borderLineColor}.${this.borderLineSize}.${(e=this.color)==null?void 0:e.hash()}.${this.font&&this.font.hash()}.${(i=this.haloColor)==null?void 0:i.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};d([f({type:Se,json:{write:!0}})],Et.prototype,"backgroundColor",void 0),d([f({type:Se,json:{write:!0}})],Et.prototype,"borderLineColor",void 0),d([f({type:Number,json:{write:!0},cast:$i})],Et.prototype,"borderLineSize",void 0),d([f({type:li,json:{write:!0}})],Et.prototype,"font",void 0),d([f({...y0e,json:{write:!0}})],Et.prototype,"horizontalAlignment",void 0),d([f({type:Boolean,json:{write:!0}})],Et.prototype,"kerning",void 0),d([f({type:Se,json:{write:!0}})],Et.prototype,"haloColor",void 0),d([f({type:Number,cast:$i,json:{write:!0}})],Et.prototype,"haloSize",void 0),d([f({type:Boolean,json:{write:!0}})],Et.prototype,"rightToLeft",void 0),d([f({type:Boolean,json:{write:!0}})],Et.prototype,"rotated",void 0),d([f({type:String,json:{write:!0}})],Et.prototype,"text",void 0),d([pt({esriTS:"text"},{readOnly:!0})],Et.prototype,"type",void 0),d([f({...v0e,json:{write:!0}})],Et.prototype,"verticalAlignment",void 0),d([f({type:Number,cast:$i,json:{write:!0}})],Et.prototype,"xoffset",void 0),d([f({type:Number,cast:$i,json:{write:!0}})],Et.prototype,"yoffset",void 0),d([f({type:Number,json:{read:t=>t&&-1*t,write:(t,e)=>e.angle=t&&-1*t}})],Et.prototype,"angle",void 0),d([f({type:Number,json:{write:!0}})],Et.prototype,"width",void 0),d([f({type:Number})],Et.prototype,"lineWidth",void 0),d([Ge("lineWidth")],Et.prototype,"writeLineWidth",null),d([_i("lineWidth")],Et.prototype,"castLineWidth",null),d([f(g0e)],Et.prototype,"lineHeight",void 0),d([Ge("lineHeight")],Et.prototype,"writeLineHeight",null),Et=Mq=d([V("esri.symbols.TextSymbol")],Et);var Cq;let Pa=Cq=class extends Bn{constructor(t){super(t),this.color=null,this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get _fetchCacheKey(){const t=this.portal!=null?this.portal:qe.getDefault(),e=t.user?t.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${e}:${t.url}`}read(t,e){this.portal=e==null?void 0:e.portal,super.read(t,e)}clone(){return new Cq({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(t){return this._fetchSymbol(t)}async fetchCIMSymbol(t){Qpe(Ie.getLogger(this),"WebStyleSymbol.fetchCIMSymbol is deprecated in favour of WebStyleSymbol.fetchSymbol which now supports both web and cim symbology",{version:"4.33",replacement:"WebStyleSymbol.fetchSymbol",see:"https://arcg.is/0CXPTr#fetchSymbol",warnOnce:!0});const e=await this._fetchSymbol({...t,acceptedFormats:["cim"]});if((e==null?void 0:e.type)!=="cim")throw new ae("webstylesymbol:fetchCIMSymbol","Resolved web style symbol is not of type 'cim'");return e}async _fetchSymbol(t){const e=t!=null?t.cache:null,i=e?this._fetchCacheKey:null;if(e!=null){const a=i&&e.get(i);if(a)return a.clone()}const{resolveWebStyleSymbol:r}=await de(()=>Promise.resolve().then(()=>Qat),void 0);lr(t);const n=r(this,{portal:this.portal},t);n.catch(a=>{Ie.getLogger(this).error("#fetchSymbol()","Failed to create symbol from style",a)});const s=await n;return e!=null&&e.set(i,s.clone()),s}};d([f({json:{write:!1}})],Pa.prototype,"color",void 0),d([f({type:String,json:{write:!0}})],Pa.prototype,"styleName",void 0),d([f({type:qe,json:{write:!1}})],Pa.prototype,"portal",void 0),d([f({type:String,json:{read:yD,write:Kw}})],Pa.prototype,"styleUrl",void 0),d([f({type:cw,json:{read:!1}})],Pa.prototype,"thumbnail",void 0),d([f({type:String,json:{write:!0}})],Pa.prototype,"name",void 0),d([pt({styleSymbolReference:"web-style"},{readOnly:!0})],Pa.prototype,"type",void 0),d([f()],Pa.prototype,"_fetchCacheKey",null),Pa=Cq=d([V("esri.symbols.WebStyleSymbol")],Pa);function n5(t){if(!t)return!1;switch(t.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function qd(t){switch(t==null?void 0:t.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const rv={base:Bn,key:"type",typeMap:{"simple-fill":no,"picture-fill":wl,"picture-marker":Oo,"simple-line":xn,"simple-marker":tn,text:Et,"label-3d":md,"line-3d":kd,"mesh-3d":Lm,"point-3d":Do,"polygon-3d":vu,"web-style":Pa,cim:zs},errorContext:"symbol"},hTt={base:Bn,key:"type",typeMap:{"picture-marker":Oo,"simple-marker":tn,"point-3d":Do,cim:zs},errorContext:"symbol"},pTt={base:Bn,key:"type",typeMap:{"simple-line":xn,"line-3d":kd,cim:zs},errorContext:"symbol"},fTt={base:Bn,key:"type",typeMap:{"simple-fill":no,"picture-fill":wl,"polygon-3d":vu,cim:zs},errorContext:"symbol"},PBe={base:Bn,key:"type",typeMap:{"picture-marker":Oo,"simple-marker":tn,text:Et,"web-style":Pa,cim:zs},errorContext:"symbol"},OBe=LT({types:rv}),k0e={base:Bn,key:"type",typeMap:{"simple-fill":no,"picture-fill":wl,"picture-marker":Oo,"simple-line":xn,"simple-marker":tn,text:Et,"line-3d":kd,"mesh-3d":Lm,"point-3d":Do,"polygon-3d":vu,"web-style":Pa,cim:zs},errorContext:"symbol"},LBe={base:Bn,key:"type",typeMap:{text:Et,"label-3d":md},errorContext:"symbol"},Dne={base:Bn,key:"type",typeMap:{"line-3d":kd,"mesh-3d":Lm,"point-3d":Do,"polygon-3d":vu,"web-style":Pa,cim:zs},errorContext:"symbol"},FBe={base:Bn,key:"type",typeMap:{"label-3d":md},errorContext:"symbol"},A0e=Rp(rv);var Eq;function RBe(t){if(!t)return null;const e={};for(const i in t){const r=jp(t[i]);r&&(e[i]=r)}return Object.keys(e).length!==0?e:null}function zBe(t){if(t==null)return null;const e={};for(const i in t){const r=t[i];r&&(e[i]=r.toJSON())}return Object.keys(e).length!==0?e:null}var IS;let sr=(IS=class extends bt($e){constructor(e){super(e),this.isAggregate=!1,this.layer=null,this.origin=null,this.sourceLayer=null,this._version=0,Object.defineProperty(this,"uid",{value:z3(),configurable:!0}),Object.defineProperty(this,"_lastMeshTransform",{value:{},configurable:!0,writable:!0,enumerable:!1}),arguments.length>1&&lOe(Ie.getLogger(this),"Graphic",{version:"4.30"})}initialize(){this._watchMeshGeometryChanges()}set aggregateGeometries(e){const i=this._get("aggregateGeometries");JSON.stringify(i)!==JSON.stringify(e)&&this._set("aggregateGeometries",e)}set attributes(e){const i=this._get("attributes");i!==e&&(this._set("attributes",e),this._notifyLayer("attributes",i,e))}set geometry(e){const i=this._get("geometry");i!==e&&(this._set("geometry",e),(e==null?void 0:e.type)!=="mesh"&&this._notifyLayer("geometry",i,e))}set popupTemplate(e){const i=this._get("popupTemplate");i!==e&&(this._set("popupTemplate",e),this._notifyLayer("popupTemplate",i,e))}set symbol(e){const i=this._get("symbol");i!==e&&(this._set("symbol",e),this._notifyLayer("symbol",i,e))}get version(){return this._version}set visible(e){const i=this._get("visible");i!==e&&(this._set("visible",e),this._notifyLayer("visible",i,e))}cloneShallow(){return new Eq({aggregateGeometries:this.aggregateGeometries,attributes:this.attributes,geometry:this.geometry,isAggregate:this.isAggregate,layer:this.layer,popupTemplate:this.popupTemplate,sourceLayer:this.sourceLayer,symbol:this.symbol,visible:this.visible,origin:this.origin})}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;const i=UUe(this.origin);if(i)return i.popupTemplate??(e?i.defaultPopupTemplate:null)??null;const r=this.origin&&"layer"in this.origin?this.origin.layer:null;for(const n of[r,this.sourceLayer,this.layer])if(n&&typeof n=="object"){if("popupTemplate"in n&&n.popupTemplate)return n.popupTemplate;if(e&&"defaultPopupTemplate"in n&&n.defaultPopupTemplate!=null)return n.defaultPopupTemplate}return null}getAttribute(e){var i;return(i=this.attributes)==null?void 0:i[e]}setAttribute(e,i){if(this.attributes){const r=this.getAttribute(e);this.attributes[e]=i,this._notifyLayer("attributes",r,i,e)}else this.attributes={[e]:i}}getObjectId(){const e=One(this.origin);if(e)return Lne(this,e);const i=this.sourceLayer??this.layer;return i?Lne(this,i):null}getGlobalId(){const e=One(this.origin);if(e!=null&&e.globalIdField)return this.getAttribute(e.globalIdField);const i=this.sourceLayer??this.layer;return i&&"globalIdField"in i&&i.globalIdField?this.getAttribute(i.globalIdField):null}toJSON(){var e;return{aggregateGeometries:zBe(this.aggregateGeometries),geometry:this.geometry!=null?this.geometry.toJSON():null,symbol:this.symbol!=null?this.symbol.toJSON():null,attributes:hE(this.attributes)?this.attributes.toJSON():{...this.attributes},popupTemplate:((e=this.popupTemplate)==null?void 0:e.toJSON())??null}}notifyMeshTransformChanged(e={}){const{geometry:i}=this;if((i==null?void 0:i.type)==="mesh"){const r={origin:i.origin,transform:i.transform};this._notifyLayer("origin-transform",r,r,e.action)}}_notifyLayer(e,i,r,n){if(this._version++,!this.layer||!("graphicChanged"in this.layer))return;const s={graphic:this,property:e,oldValue:i,newValue:r};e==="origin-transform"&&(s.action=n),e==="attributes"&&(s.attributeName=n),this.layer.graphicChanged(s)}_watchMeshGeometryChanges(){this.addHandles([cn(()=>{var e,i;return((e=this.geometry)==null?void 0:e.type)==="mesh"&&this.geometry.vertexSpace.origin?{localMatrix:(i=this.geometry.transform)==null?void 0:i.localMatrix,origin:this.geometry.vertexSpace.origin}:void 0},({localMatrix:e,origin:i})=>{this._lastMeshTransform.localMatrix===e&&this._lastMeshTransform.origin===i||(this._lastMeshTransform.localMatrix=e,this._lastMeshTransform.origin=i,this.notifyMeshTransformChanged())}),cn(()=>{var e;return((e=this.geometry)==null?void 0:e.type)==="mesh"?{vertexAttributes:this.geometry.vertexAttributes}:void 0},()=>{var i;const e=this.geometry;(e==null?void 0:e.type)==="mesh"&&e.vertexSpace.origin?(this._lastMeshTransform.localMatrix=(i=e.transform)==null?void 0:i.localMatrix,this._lastMeshTransform.origin=e.vertexSpace.origin):(this._lastMeshTransform.localMatrix=void 0,this._lastMeshTransform.origin=void 0),this._notifyLayer("geometry",this.geometry,this.geometry)},{equals:(e,i)=>e===i,sync:!0})])}},Eq=IS,IS);d([f({value:null,json:{read:RBe}})],sr.prototype,"aggregateGeometries",null),d([f({value:null})],sr.prototype,"attributes",null),d([f({value:null,types:jT,json:{read:jp}})],sr.prototype,"geometry",null),d([f({type:Boolean})],sr.prototype,"isAggregate",void 0),d([f({clonable:!1})],sr.prototype,"layer",void 0),d([f({clonable:"reference"})],sr.prototype,"origin",void 0),d([f({type:lg,value:null})],sr.prototype,"popupTemplate",null),d([f({clonable:"reference"})],sr.prototype,"sourceLayer",void 0),d([f({value:null,types:rv})],sr.prototype,"symbol",null),d([f({clonable:!1,json:{read:!1,write:!1}})],sr.prototype,"_version",void 0),d([f({type:Boolean,value:!0})],sr.prototype,"visible",null),sr=Eq=d([V("esri.Graphic")],sr);let M2=class extends d2{_own(e){e.layer&&"remove"in e.layer&&e.layer!==this.owner&&e.layer.remove(e),e.layer=this.owner}_release(e){e.layer===this.owner&&(e.layer=null)}};d([CZ({Type:sr,ensureType:Wn(sr)})],M2.prototype,"itemType",void 0),M2=d([V("esri.support.GraphicsCollection")],M2);let Bf=class extends et{constructor(e){super(e),this.view=null,this.baseLayerViews=new Ue,this.groundLayerViews=new Ue,this.referenceLayerViews=new Ue,this._loadingHandle=be(()=>{var i,r;return(r=(i=this.view)==null?void 0:i.map)==null?void 0:r.basemap},i=>{i&&i.load().catch(()=>{})},Ft)}destroy(){this._set("view",null),this._loadingHandle=Dr(this._loadingHandle),this.baseLayerViews.destroyAll(),this.groundLayerViews.destroyAll(),this.referenceLayerViews.destroyAll()}get suspended(){var e;return((e=this.view)==null?void 0:e.suspended)??!0}get updating(){var i,r,n;if((i=this.view)!=null&&i.suspended)return!1;const e=(n=(r=this.view)==null?void 0:r.map)==null?void 0:n.basemap;return!!(e!=null&&e.loaded)&&(this.baseLayerViews.some(s=>s.updating)||this.groundLayerViews.some(s=>s.updating)||this.referenceLayerViews.some(s=>s.updating))}};d([f({constructOnly:!0})],Bf.prototype,"view",void 0),d([f({readOnly:!0})],Bf.prototype,"baseLayerViews",void 0),d([f({readOnly:!0})],Bf.prototype,"groundLayerViews",void 0),d([f({readOnly:!0})],Bf.prototype,"referenceLayerViews",void 0),d([f({readOnly:!0})],Bf.prototype,"suspended",null),d([f({type:Boolean,readOnly:!0})],Bf.prototype,"updating",null),Bf=d([V("esri.views.BasemapView")],Bf);const NBe=Bf;let Kl=class extends et{constructor(e){super(e),this.factor=1.5,this.offset=Ns(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};d([f({type:Number})],Kl.prototype,"factor",void 0),d([f({nonNullable:!0})],Kl.prototype,"offset",void 0),d([f()],Kl.prototype,"position",void 0),d([f({type:Number,range:{min:0}})],Kl.prototype,"size",void 0),d([f()],Kl.prototype,"maskUrl",void 0),d([f()],Kl.prototype,"maskEnabled",void 0),d([f()],Kl.prototype,"overlayUrl",void 0),d([f()],Kl.prototype,"overlayEnabled",void 0),d([f({readOnly:!0})],Kl.prototype,"version",null),d([f({type:Boolean})],Kl.prototype,"visible",void 0),Kl=d([V("esri.views.Magnifier")],Kl);const P0e=Kl;let bv=class{constructor(e){this._observable=new p_,this._map=new Map(e)}get size(){return xt(this._observable),this._map.size}clear(){this._map.size>0&&(this._map.clear(),this._observable.notify())}delete(e){const i=this._map.delete(e);return i&&this._observable.notify(),i}entries(){return xt(this._observable),this._map.entries()}forEach(e,i){xt(this._observable),this._map.forEach((r,n)=>e.call(i,r,n,this),i)}get(e){return xt(this._observable),this._map.get(e)}has(e){return xt(this._observable),this._map.has(e)}keys(){return xt(this._observable),this._map.keys()}set(e,i){return this._map.set(e,i),this._observable.notify(),this}values(){return xt(this._observable),this._map.values()}[Symbol.iterator](){return xt(this._observable),this._map[Symbol.iterator]()}[Symbol.dispose](){this._observable.destroy()}get[Symbol.toStringTag](){return this._map[Symbol.toStringTag]}};var kq;let V0=kq=class extends $e{constructor(t){super(t),this.name=null,this.code=null}clone(){return new kq({name:this.name,code:this.code})}};d([f({type:String,json:{write:{isRequired:!0}}})],V0.prototype,"name",void 0),d([f({type:[String,Number],json:{write:{isRequired:!0}}})],V0.prototype,"code",void 0),V0=kq=d([V("esri.layers.support.CodedValue")],V0);const DBe=new jt({inherited:"inherited",codedValue:"coded-value",range:"range"});let nv=class extends $e{constructor(e){super(e),this.name=null,this.type=null}};d([f({type:String,json:{write:!0}})],nv.prototype,"name",void 0),d([pt(DBe),f({json:{write:{isRequired:!0}}})],nv.prototype,"type",void 0),nv=d([V("esri.layers.support.Domain")],nv);var Aq,MS;let sv=(MS=class extends nv{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let i=null;if(this.codedValues){const r=String(e);this.codedValues.some(n=>(String(n.code)===r&&(i=n.name),!!i))}return i}clone(){return new Aq({codedValues:he(this.codedValues),name:this.name})}},Aq=MS,MS);d([f({type:[V0],json:{write:{isRequired:!0}}})],sv.prototype,"codedValues",void 0),d([pt({codedValue:"coded-value"})],sv.prototype,"type",void 0),sv=Aq=d([V("esri.layers.support.CodedValueDomain")],sv);var Pq,CS;let C2=(CS=class extends nv{constructor(e){super(e),this.type="inherited"}clone(){return new Pq}},Pq=CS,CS);d([pt({inherited:"inherited"})],C2.prototype,"type",void 0),C2=Pq=d([V("esri.layers.support.InheritedDomain")],C2);var Oq,ES;let M0=(ES=class extends nv{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new Oq({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}},Oq=ES,ES);d([f({json:{type:[Number],read:{source:"range",reader:(t,e)=>{var i;return(i=e.range)==null?void 0:i[1]}},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:"range",writer(t,e,i){e[i]=[this.minValue||0,t]},isRequired:!0}}})],M0.prototype,"maxValue",void 0),d([f({json:{type:[Number],read:{source:"range",reader:(t,e)=>{var i;return(i=e.range)==null?void 0:i[0]}},write:{target:"range",writer(t,e,i){e[i]=[t,this.maxValue||0]},isRequired:!0}}})],M0.prototype,"minValue",void 0),d([pt({range:"range"})],M0.prototype,"type",void 0),M0=Oq=d([V("esri.layers.support.RangeDomain")],M0);const O0e={key:"type",base:nv,typeMap:{range:M0,"coded-value":sv,inherited:C2}};function s5(t){if(!(t!=null&&t.type))return null;switch(t.type){case"range":return M0.fromJSON(t);case"codedValue":return sv.fromJSON(t);case"inherited":return C2.fromJSON(t)}return null}const $Y=new jt({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"});var Lq;const jBe=new jt({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",currency:"currency",dateAndTime:"date-and-time",description:"description",emailAddress:"email-address",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",phoneNumber:"phone-number",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});var kS;let Fs=(kS=class extends $e{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=void 0,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(e,{description:i}){let r=null;try{r=i?JSON.parse(i):null}catch{}return(r==null?void 0:r.value)??null}readValueType(e,{description:i}){let r=null;try{r=i?JSON.parse(i):null}catch{}return r?jBe.fromJSON(r.fieldValueType):null}clone(){var e;return new Lq({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:((e=this.domain)==null?void 0:e.clone())??null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}},Lq=kS,kS);d([f({type:String,json:{write:!0}})],Fs.prototype,"alias",void 0),d([f({type:[String,Number],json:{write:{allowNull:!0}}})],Fs.prototype,"defaultValue",void 0),d([f()],Fs.prototype,"description",void 0),d([je("description")],Fs.prototype,"readDescription",null),d([f({types:O0e,json:{read:{reader:s5},write:!0}})],Fs.prototype,"domain",void 0),d([f({type:Boolean,json:{write:!0}})],Fs.prototype,"editable",void 0),d([f({type:ei,json:{write:{overridePolicy:t=>({enabled:Number.isFinite(t)})}}})],Fs.prototype,"length",void 0),d([f({type:String,json:{write:!0}})],Fs.prototype,"name",void 0),d([f({type:Boolean,json:{write:!0}})],Fs.prototype,"nullable",void 0),d([pt($Y)],Fs.prototype,"type",void 0),d([f()],Fs.prototype,"valueType",void 0),d([je("valueType",["description"])],Fs.prototype,"readValueType",null),d([f({type:Boolean,json:{read:!1}})],Fs.prototype,"visible",void 0),Fs=Lq=d([V("esri.layers.support.Field")],Fs);var Fq;let yx=Fq=class extends $e{constructor(t){super(t),this.type="map-layer"}clone(){const{mapLayerId:t,gdbVersion:e}=this;return new Fq({mapLayerId:t,gdbVersion:e})}};d([pt({mapLayer:"map-layer"}),f({json:{write:{isRequired:!0}}})],yx.prototype,"type",void 0),d([f({type:ei,json:{write:{isRequired:!0}}})],yx.prototype,"mapLayerId",void 0),d([f({type:String,json:{write:!0}})],yx.prototype,"gdbVersion",void 0),yx=Fq=d([V("esri.layers.support.source.MapLayerSource")],yx);var Rq;let qf=Rq=class extends $e{constructor(t){super(t),this.type="query-table"}clone(){const{workspaceId:t,query:e,oidFields:i,spatialReference:r,geometryType:n}=this,s={workspaceId:t,query:e,oidFields:i,spatialReference:(r==null?void 0:r.clone())??void 0,geometryType:n};return new Rq(s)}};d([pt({queryTable:"query-table"}),f({json:{write:{isRequired:!0}}})],qf.prototype,"type",void 0),d([f({type:String,json:{write:!0}})],qf.prototype,"workspaceId",void 0),d([f({type:String,json:{write:!0}})],qf.prototype,"query",void 0),d([f({type:String,json:{write:!0}})],qf.prototype,"oidFields",void 0),d([f({type:tt,json:{write:!0}})],qf.prototype,"spatialReference",void 0),d([pt(HRe)],qf.prototype,"geometryType",void 0),qf=Rq=d([V("esri.layers.support.source.QueryTableDataSource")],qf);var zq;let vx=zq=class extends $e{constructor(t){super(t),this.type="raster"}clone(){const{workspaceId:t,dataSourceName:e}=this;return new zq({workspaceId:t,dataSourceName:e})}};d([pt({raster:"raster"}),f({json:{write:{isRequired:!0}}})],vx.prototype,"type",void 0),d([f({type:String,json:{write:!0}})],vx.prototype,"dataSourceName",void 0),d([f({type:String,json:{write:!0}})],vx.prototype,"workspaceId",void 0),vx=zq=d([V("esri.layers.support.source.RasterDataSource")],vx);var Nq;let i0=Nq=class extends $e{constructor(t){super(t),this.type="table"}clone(){const{workspaceId:t,gdbVersion:e,dataSourceName:i}=this;return new Nq({workspaceId:t,gdbVersion:e,dataSourceName:i})}};d([pt({table:"table"}),f({json:{write:{isRequired:!0}}})],i0.prototype,"type",void 0),d([f({type:String,json:{write:!0}})],i0.prototype,"workspaceId",void 0),d([f({type:String,json:{write:!0}})],i0.prototype,"gdbVersion",void 0),d([f({type:String,json:{write:!0}})],i0.prototype,"dataSourceName",void 0),i0=Nq=d([V("esri.layers.support.source.TableDataSource")],i0);var Dq,jq;const VBe=Es()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let ec=Dq=class extends $e{constructor(t){super(t),this.type="join-table"}readLeftTableSource(t,e,i){return jne()(t,e,i)}castLeftTableSource(t){return Rp(Vq(),t)}readRightTableSource(t,e,i){return jne()(t,e,i)}castRightTableSource(t){return Rp(Vq(),t)}clone(){const{leftTableKey:t,rightTableKey:e,leftTableSource:i,rightTableSource:r,joinType:n}=this,s={leftTableKey:t,rightTableKey:e,leftTableSource:(i==null?void 0:i.clone())??void 0,rightTableSource:(r==null?void 0:r.clone())??void 0,joinType:n};return new Dq(s)}};d([pt({joinTable:"join-table"}),f({json:{write:{isRequired:!0}}})],ec.prototype,"type",void 0),d([f({type:String,json:{write:!0}})],ec.prototype,"leftTableKey",void 0),d([f({type:String,json:{write:!0}})],ec.prototype,"rightTableKey",void 0),d([f({json:{write:!0}})],ec.prototype,"leftTableSource",void 0),d([je("leftTableSource")],ec.prototype,"readLeftTableSource",null),d([_i("leftTableSource")],ec.prototype,"castLeftTableSource",null),d([f({json:{write:!0}})],ec.prototype,"rightTableSource",void 0),d([je("rightTableSource")],ec.prototype,"readRightTableSource",null),d([_i("rightTableSource")],ec.prototype,"castRightTableSource",null),d([pt(VBe)],ec.prototype,"joinType",void 0),ec=Dq=d([V("esri.layers.support.source.JoinTableDataSource")],ec);let v6=null;function jne(){return v6||(v6=LT({types:Vq()})),v6}let b6=null;function Vq(){return b6||(b6={key:"type",base:null,typeMap:{"data-layer":gd,"map-layer":yx}}),b6}const UBe={key:"type",base:null,typeMap:{"join-table":ec,"query-table":qf,raster:vx,table:i0}};var AS;let gd=(AS=class extends $e{constructor(e){super(e),this.type="data-layer"}clone(){const{fields:e,dataSource:i}=this;return new jq({fields:e,dataSource:i})}},jq=AS,AS);d([pt({dataLayer:"data-layer"}),f({json:{write:{isRequired:!0}}})],gd.prototype,"type",void 0),d([f({type:[Fs],json:{write:!0}})],gd.prototype,"fields",void 0),d([f({types:UBe,json:{write:!0}})],gd.prototype,"dataSource",void 0),gd=jq=d([V("esri.layers.support.source.DataLayerSource")],gd),gd.from=Wn(gd);let r0=class extends bt($e){constructor(e){super(e),this.onFields=null,this.operator=null,this.searchTerm=null,this.searchType=null}};d([f({type:[String],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.onFields!=null&&this.onFields.length>0}}}}})],r0.prototype,"onFields",void 0),d([f({type:String,json:{write:!0}})],r0.prototype,"operator",void 0),d([f({type:String,json:{write:!0}})],r0.prototype,"searchTerm",void 0),d([f({type:String,json:{write:!0}})],r0.prototype,"searchType",void 0),r0=d([V("esri.rest.support.FullTextSearch")],r0);const BBe=r0;var Uq;const Vne=new jt({upperLeft:"upper-left",lowerLeft:"lower-left"});let Fy=Uq=class extends $e{constructor(t){super(t),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new Uq(he({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};d([f({type:Yt,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],Fy.prototype,"extent",void 0),d([f({type:["view","edit"],json:{write:!0}})],Fy.prototype,"mode",void 0),d([f({type:String,json:{read:Vne.read,write:Vne.write}})],Fy.prototype,"originPosition",void 0),d([f({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],Fy.prototype,"tolerance",void 0),Fy=Uq=d([V("esri.rest.support.QuantizationParameters")],Fy);const qBe=t=>{const e=t;let i=class extends e{};return i=d([V("esri.rest.support.QueryMixin")],i),i},HBe=new jt({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"});var Bq;const Une=new jt({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let tu=Bq=class extends $e{constructor(t){super(t),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(t,e){this.statisticType!=="percentile-continuous"&&this.statisticType!=="percentile-discrete"||(e.statisticParameters=he(t))}clone(){return new Bq({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:he(this.statisticParameters)})}};d([f({type:Number,json:{write:!0}})],tu.prototype,"maxPointCount",void 0),d([f({type:Number,json:{write:!0}})],tu.prototype,"maxRecordCount",void 0),d([f({type:Number,json:{write:!0}})],tu.prototype,"maxVertexCount",void 0),d([f({type:String,json:{write:!0}})],tu.prototype,"onStatisticField",void 0),d([f({type:String,json:{write:!0}})],tu.prototype,"outStatisticFieldName",void 0),d([f({type:String,json:{read:{source:"statisticType",reader:Une.read},write:{target:"statisticType",writer:Une.write}}})],tu.prototype,"statisticType",void 0),d([f({type:Object})],tu.prototype,"statisticParameters",void 0),d([Ge("statisticParameters")],tu.prototype,"writeStatisticParameters",null),tu=Bq=d([V("esri.rest.support.StatisticDefinition")],tu);var CL;const GBe=new jt({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});var gw;let mt=(gw=class extends qBe($e){static from(e){return AT(CL,e)}constructor(e){super(e),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.fullText=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.returnTrueCurves=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}castDatumTransformation(e){return typeof e=="number"||typeof e=="object"?e:null}writeHistoricMoment(e,i){i.historicMoment=e&&e.getTime()}writeParameterValues(e,i){if(e){const r={};for(const n in e){const s=e[n];Array.isArray(s)?r[n]=s.map(a=>a instanceof Date?a.getTime():a):s instanceof Date?r[n]=s.getTime():r[n]=s}i.parameterValues=r}}writeStart(e,i){i.resultOffset=this.start,i.resultRecordCount=this.num||10,i.where="1=1"}writeWhere(e,i){i.where=e||"1=1"}clone(){return new CL(he({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,fullText:this.fullText,formatOf3DObjects:this.formatOf3DObjects,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:this.historicMoment!=null?new Date(this.historicMoment):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,returnTrueCurves:this.returnTrueCurves,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}},CL=gw,gw.MAX_MAX_RECORD_COUNT_FACTOR=5,gw);d([f({json:{write:!0}})],mt.prototype,"aggregateIds",void 0),d([f({type:Boolean,json:{write:!0}})],mt.prototype,"cacheHint",void 0),d([f({type:Boolean,json:{default:!1,write:!0}})],mt.prototype,"compactGeometryEnabled",void 0),d([f({json:{write:!0}})],mt.prototype,"datumTransformation",void 0),d([_i("datumTransformation")],mt.prototype,"castDatumTransformation",null),d([f({type:Boolean,json:{default:!1,write:!0}})],mt.prototype,"defaultSpatialReferenceEnabled",void 0),d([f({type:Number,json:{write:!0}})],mt.prototype,"distance",void 0),d([f({type:gd,json:{write:!0}})],mt.prototype,"dynamicDataSource",void 0),d([f({type:String,json:{write:!0}})],mt.prototype,"formatOf3DObjects",void 0),d([f({type:[BBe],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.fullText!=null&&this.fullText.length>0}}}}})],mt.prototype,"fullText",void 0),d([f({type:String,json:{write:!0}})],mt.prototype,"gdbVersion",void 0),d([f({types:jT,json:{read:jp,write:!0}})],mt.prototype,"geometry",void 0),d([f({type:Number,json:{write:!0}})],mt.prototype,"geometryPrecision",void 0),d([f({type:[String],json:{write:!0}})],mt.prototype,"groupByFieldsForStatistics",void 0),d([f({type:String,json:{write:!0}})],mt.prototype,"having",void 0),d([f({type:Date})],mt.prototype,"historicMoment",void 0),d([Ge("historicMoment")],mt.prototype,"writeHistoricMoment",null),d([f({type:Number,json:{write:!0}})],mt.prototype,"maxAllowableOffset",void 0),d([f({type:Number,cast:t=>t<1?1:t>mt.MAX_MAX_RECORD_COUNT_FACTOR?mt.MAX_MAX_RECORD_COUNT_FACTOR:t,json:{write:{overridePolicy:t=>({enabled:t>1})}}})],mt.prototype,"maxRecordCountFactor",void 0),d([f({type:["xyFootprint"],json:{write:!0}})],mt.prototype,"multipatchOption",void 0),d([f({type:Number,json:{read:{source:"resultRecordCount"}}})],mt.prototype,"num",void 0),d([f({json:{write:!0}})],mt.prototype,"objectIds",void 0),d([f({type:[String],json:{write:!0}})],mt.prototype,"orderByFields",void 0),d([f({type:[String],json:{write:!0}})],mt.prototype,"outFields",void 0),d([f({type:tt,json:{name:"outSR",write:!0}})],mt.prototype,"outSpatialReference",void 0),d([f({type:[tu],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.outStatistics!=null&&this.outStatistics.length>0}}}}})],mt.prototype,"outStatistics",void 0),d([f({json:{write:!0}})],mt.prototype,"parameterValues",void 0),d([Ge("parameterValues")],mt.prototype,"writeParameterValues",null),d([f({type:St,json:{write:!0}})],mt.prototype,"pixelSize",void 0),d([f({type:Fy,json:{write:!0}})],mt.prototype,"quantizationParameters",void 0),d([f({type:[Object],json:{write:!0}})],mt.prototype,"rangeValues",void 0),d([f({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:this.spatialRelationship==="relation"}}}}})],mt.prototype,"relationParameter",void 0),d([f({type:String,json:{write:!0}})],mt.prototype,"resultType",void 0),d([f({type:Boolean,json:{default:!1,write:!0}})],mt.prototype,"returnCentroid",void 0),d([f({type:Boolean,json:{default:!1,write:!0}})],mt.prototype,"returnDistinctValues",void 0),d([f({type:Boolean,json:{default:!0,write:!0}})],mt.prototype,"returnExceededLimitFeatures",void 0),d([f({type:Boolean,json:{write:!0}})],mt.prototype,"returnGeometry",void 0),d([f({type:Boolean,json:{default:!1,write:!0}})],mt.prototype,"returnQueryGeometry",void 0),d([f({type:Boolean,json:{default:!1,write:!0}})],mt.prototype,"returnM",void 0),d([f({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],mt.prototype,"returnZ",void 0),d([f({type:Boolean,json:{write:!0}})],mt.prototype,"returnTrueCurves",void 0),d([f({type:tt,json:{write:!0}})],mt.prototype,"sourceSpatialReference",void 0),d([pt(HBe,{ignoreUnknown:!1,name:"spatialRel"})],mt.prototype,"spatialRelationship",void 0),d([f({type:Number,json:{read:{source:"resultOffset"}}})],mt.prototype,"start",void 0),d([Ge("start"),Ge("num")],mt.prototype,"writeStart",null),d([f({type:String,json:{write:!0}})],mt.prototype,"sqlFormat",void 0),d([f({type:String,json:{write:!0}})],mt.prototype,"text",void 0),d([f({type:Ji,json:{write:!0}})],mt.prototype,"timeExtent",void 0),d([f({type:Boolean,json:{default:!1,write:!0}})],mt.prototype,"timeReferenceUnknownClient",void 0),d([pt(GBe,{ignoreUnknown:!1}),f({json:{write:{overridePolicy(t){return{enabled:!!t&&this.distance!=null}}}}})],mt.prototype,"units",void 0),d([f({type:String,json:{write:{overridePolicy(t){return{enabled:t!=null||this.start!=null&&this.start>0}}}}})],mt.prototype,"where",void 0),d([Ge("where")],mt.prototype,"writeWhere",null),mt=CL=d([V("esri.rest.support.Query")],mt);function ey(t){return!(t==null||typeof t!="object"||!("createQuery"in t)||!t.createQuery)}let Xc=class extends VT{constructor(e){super(e),this._selectionMap=new bv,this._sources=new Ue,this._trashCan=[],this._layerEditHandles=new Ue,this._vizTaskId=0,this.view=null,this.showHighlight=!0,this.highlightName="default"}initialize(){this.addHandles([be(()=>[this.view,this.showHighlight],()=>this._refreshVisualization()),be(()=>this.view,e=>{e==null||e.when().then(()=>this.syncSources())},Ft),ca(()=>this.sources,"change",e=>{var n;const i=this._selectionMap,r=[];for(const s of e.removed){const a=i.get(s);a&&(i.delete(s),(n=a.highlightHandle)==null||n.remove(),r.push({layer:s,selection:[],added:[],removed:[...a.selection]}))}this._refreshListeners(),r.length&&this._onSelectionChange(r)},{onListenerAdd:()=>this._refreshListeners()})])}destroy(){this.clear(),this._layerEditHandles.drain(Dr)}get selections(){return Array.from(this._selectionMap.entries()).map(e=>{const[i,r]=e;return{layer:i,selection:[...r.selection]}})}get count(){let e=0;for(const i of this._selectionMap.values())e+=i.selection.length;return e}get hasSelection(){return this.count>0}get sources(){return this._sources}set sources(e){Mp(e,this._sources)}syncSources(){var n;const e=new Set,i=(n=this.view)==null?void 0:n.map;if(!i)return;const r=s=>{var a,o,l,c,h;L4e(s)?((a=s.layers)==null||a.forEach(r),(o=s.tables)==null||o.forEach(r)):O4e(s)?((l=s.sublayers)==null||l.forEach(r),(c=s.subtables)==null||c.forEach(r)):h9(s)?(h=s.sublayers)==null||h.forEach(r):ey(s)&&e.add(s)};i.allLayers.forEach(r),i.allTables.forEach(r),this.sources=[...e]}async getSelectedFeatures(e,i={},r="layerView"){const{view:n,selections:s}=this;if(!n&&r==="layerView")return Ie.getLogger(this).warn("Cannot query layer views without a view."),[];const a=(e!=null&&e.length?s.filter(o=>e.includes(o.layer)):s).map(async o=>{const{layer:l,selection:c}=o;if(!c.length)return;const h=Hh(l)?l.parent:l;if(h!=null){if(n&&r==="layerView"&&!Bne(h)&&qne(h)){const m=await n.whenLayerView(h).catch(()=>null);if(m)return Hne(m,c,i)}return Hne(h,c,i)}}).filter(ln);return(await Promise.all(a)).filter(ln)}updateSelection(e){const i=new Map;for(const[s,a]of this._selectionMap)i.set(s,[...a.selection]);let r=!1;const n=e.current.concat(e.added);for(const s of n){const a=s.sourceLayer,o=s.getObjectId();if(this.sources.includes(a)&&(ey(a)||Hh(a))&&o!==null){const l=Gp(i,a,()=>[]);l.includes(o)||(l.push(o),r=!0)}}for(const s of e.removed){const a=s.sourceLayer,o=s.getObjectId();if(this.sources.includes(a)&&(ey(a)||Hh(a))&&o!==null){const l=i.get(a),c=l==null?void 0:l.indexOf(o);c!==void 0&&c>=0&&(l==null||l.splice(c,1),r=!0)}}if(r){const{_selectionMap:s,_trashCan:a}=this,o=[];for(const[l,c]of i){const h=s.get(l);h!==void 0&&a.push(h),s.set(l,{selection:c}),o.push({layer:l,selection:c,...Lte(h!==void 0?h.selection:[],c)})}this._onSelectionChange(o)}}setSelection(e,i){this._setSelection(e,i)}getSelection(e){const i=this._selectionMap.get(e);return i==null?void 0:i.selection}appendToSelection(e,i){const r=this._selectionMap.get(e),n=r!==void 0?[...r.selection]:[];for(const s of i)n.includes(s)||n.push(s);this._setSelection(e,n)}removeFromSelection(e,i){const r=this._selectionMap.get(e);if(!r)return;const n=[];for(const s of r.selection)i.includes(s)||n.push(s);this._setSelection(e,n)}toggleInSelection(e,i){const r=this._selectionMap.get(e);if(!r||r.selection.length===0)return void this._setSelection(e,i);const n=new Set(r.selection),s=new Set(i),a=tPe(n,s);this._setSelection(e,Array.from(a))}clear(){const e=this._selectionMap.values();this._trashCan.push(...e);const i=[];for(const[r,n]of this._selectionMap.entries())i.push({layer:r,added:[],removed:[...n.selection],selection:[]});this._selectionMap.clear(),this._onSelectionChange(i)}_onSelectionChange(e){this._refreshVisualization(),this.emit("selection-change",{view:this.view,changes:e})}_refreshVisualization(){var a;for(this._vizTaskId++;this._trashCan.length>0;){const o=this._trashCan.pop();(a=o==null?void 0:o.highlightHandle)==null||a.remove()}if(this.view==null)return;const{sources:e,view:i,_selectionMap:r,showHighlight:n}=this,s=this._vizTaskId;for(const o of e){const l=r.get(o),c=Hh(o)?o.parent:o;if(c!=null&&qne(c)){if(Bne(c))continue;i.whenLayerView(c).then(h=>{var m;(m=l==null?void 0:l.highlightHandle)==null||m.remove(),l!=null&&n&&s===this._vizTaskId&&"highlight"in h&&typeof h.highlight=="function"&&l.selection.length>0&&(l.highlightHandle=h.highlight(l.selection,this.highlightName))}).catch(()=>{var h;(h=l==null?void 0:l.highlightHandle)==null||h.remove()})}}}_refreshListeners(){this._layerEditHandles.drain(Dr);const e=new Set(this.sources.map(i=>Hh(i)?i.parent:i));for(const i of e)ey(i)&&"on"in i&&i.on&&this._layerEditHandles.push(i.on("edits",r=>this._onLayerEdit(r,i)))}_onLayerEdit(e,i){if(h9(i))this._onParentLayerEdit(e,i);else if(e.deletedFeatures.length&&this._selectionMap.has(i)){const r=[];e.deletedFeatures.forEach(({error:n,objectId:s})=>{s!=null&&n==null&&r.push(s)}),this.removeFromSelection(i,r)}}_onParentLayerEdit(e,i){var a;const{deletedFeatures:r,edits:n,updatedFeatures:s}=e;if((a=n==null?void 0:n.updateFeatures)==null||a.forEach(o=>{var m;const l=o.getObjectId()??o.attributes[i.objectIdField];if(l==null||(m=s.find(g=>g.objectId===l))!=null&&m.error)return;const c=i.findSublayerForFeature(o);if(!ey(c))return;const h=i.sublayers.find(g=>{var v;return!(!ey(g)||!((v=this.getSelection(g))!=null&&v.includes(l)))});ey(h)&&h!==c&&(this.removeFromSelection(h,[l]),this.appendToSelection(c,[l]))}),r.length){const o=[];r.forEach(({error:l,objectId:c})=>{c!=null&&l==null&&o.push(c)}),i.sublayers.forEach(l=>{ey(l)&&this._selectionMap.has(l)&&this.removeFromSelection(l,o)})}}_setSelection(e,i){if(!this.sources.includes(e))throw new Error(`Cannot set selection on layer ${e.title} because it is not in 'sources'`);const r=this._selectionMap.get(e);if(r===void 0||!ZBe(r,{selection:i})){r!==void 0&&this._trashCan.push(r),this._selectionMap.set(e,{selection:[...i]});const n={layer:e,selection:[...i],...Lte(r!==void 0?r.selection:[],i)};this._onSelectionChange([n])}}};d([f()],Xc.prototype,"_selectionMap",void 0),d([f()],Xc.prototype,"_sources",void 0),d([f({readOnly:!0,nonNullable:!0})],Xc.prototype,"selections",null),d([f({readOnly:!0,nonNullable:!0})],Xc.prototype,"count",null),d([f()],Xc.prototype,"view",void 0),d([f({readOnly:!0,nonNullable:!0})],Xc.prototype,"hasSelection",null),d([f()],Xc.prototype,"showHighlight",void 0),d([f()],Xc.prototype,"sources",null),d([f()],Xc.prototype,"highlightName",void 0),Xc=d([V("esri.views.SelectionManager")],Xc);const Bne=t=>{var e;return Hh(t)?((e=t.parent)==null?void 0:e.isTable)===!0:t.isTable},WBe=t=>t.layer!==void 0,qne=t=>(t==null?void 0:t.when)!==void 0,ZBe=(t,e)=>{if(t==null&&e==null)return!0;if(t!=null&&e==null||t==null&&e!=null)return!1;if(t!=null&&e!=null&&t.selection!=null&&e.selection!=null){const i=[...t.selection],r=[...e.selection];if(i.length!==r.length)return!1;i.sort(),r.sort();for(let n=0;n<i.length;n++)if(i[n]!==r[n])return!1}return!0},Hne=async(t,e,i={})=>{let r;if(WBe(t)){const n=t;r=n===void 0?null:await n.queryFeatures(new mt({...i,objectIds:e})).then(s=>({data:s,layer:t.layer}))}else{const n=t;r=n===void 0?null:await n.queryFeatures(new mt({...i,objectIds:e})).then(s=>({data:s,layer:n}))}return r},YBe=Xc;let gC=class extends bt(et){constructor(e){super(e),this.accentColor=new Se([255,127,0]),this.textColor=new Se([255,255,255])}};d([f({type:Se,nonNullable:!0})],gC.prototype,"accentColor",void 0),d([f({type:Se,nonNullable:!0})],gC.prototype,"textColor",void 0),gC=d([V("esri.views.Theme")],gC);const qq=gC,L0e=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],F0e={};function R0e(t){return!!F0e[t]}function JBe(t){for(const e of t)if(!R0e(e))return!1;return!0}L0e.forEach(t=>{F0e[t]=!0});let z0e=class{constructor(e){this._handlers=new Map,this._counter=0,this._handlerCounts=new Map,this.view=e,this.inputManager=null}connect(e){e&&this.disconnect(),this.inputManager=e,this._handlers.forEach(({handler:i,priority:r},n)=>{var s;return(s=this.inputManager)==null?void 0:s.installHandlers(n,[i],r)})}disconnect(){this.inputManager&&this._handlers.forEach((e,i)=>{var r;return(r=this.inputManager)==null?void 0:r.uninstallHandlers(i)}),this.inputManager=null}destroy(){this.disconnect(),this._handlers.clear(),this.view=null}on(e,i,r,n){const s=Array.isArray(e)?e:e.split(",");if(!JBe(s))return s.some(R0e)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let a,o;Array.isArray(i)?o=i:(a=i,o=[]),typeof r=="function"?a=r:n=r,n=n??Vm.DEFAULT;const l=this._createUniqueGroupName(),c=new XBe(this.view,s,o,a);this._handlers.set(l,{handler:c,priority:n});for(const h of s){const m=this._handlerCounts.get(h)||0;this._handlerCounts.set(h,m+1)}return this.inputManager&&this.inputManager.installHandlers(l,[c],n),Ii(()=>this._removeHandler(l,s))}hasHandler(e){return!!this._handlerCounts.get(e)}_removeHandler(e,i){if(this._handlers.has(e)){this._handlers.delete(e);for(const r of i){const n=this._handlerCounts.get(r);n===void 0||(n===1?this._handlerCounts.delete(r):this._handlerCounts.set(r,n-1))}}this.inputManager&&this.inputManager.uninstallHandlers(e)}_createUniqueGroupName(){return this._counter+=1,`viewEvents_${this._counter}`}},XBe=class extends Bs{constructor(e,i,r,n){super(!0),this._latestDragStart=void 0,this.view=e;for(const s of i)switch(s){case"click":this.registerIncoming("click",r,a=>n(e8e(e,a)));break;case"double-click":this.registerIncoming("double-click",r,a=>n(t8e(e,a)));break;case"immediate-click":this.registerIncoming("immediate-click",r,a=>n(i8e(e,a)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",r,a=>n(r8e(e,a)));break;case"hold":this.registerIncoming("hold",r,a=>n(n8e(e,a)));break;case"drag":this.registerIncoming("drag",r,a=>{const o=this._wrapDrag(a);o&&n(o)});break;case"key-down":this.registerIncoming("key-down",r,a=>n(s8e(a)));break;case"key-up":this.registerIncoming("key-up",r,a=>n(a8e(a)));break;case"pointer-down":this.registerIncoming("pointer-down",r,a=>n(bM(a,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",r,a=>n(bM(a,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",r,a=>n(bM(a,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",r,a=>n(o8e(a)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",r,a=>n(l8e(a)));break;case"pointer-enter":this.registerIncoming("pointer-enter",r,a=>n(bM(a,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",r,a=>n(bM(a,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",r,a=>{n(c8e(a))});break;case"focus":this.registerIncoming("focus",r,a=>{n(QBe(a))});break;case"blur":this.registerIncoming("blur",r,a=>{n(KBe(a))})}}_wrapDrag(e){const i=e.data,{x:r,y:n}=i.center,{action:s,pointerType:a,button:o}=i;if(s==="start"&&(this._latestDragStart=i),!this._latestDragStart)return;const l=i.pointer.native,c=i.buttons,{cancelable:h,timestamp:m}=e,g={x:this._latestDragStart.center.x,y:this._latestDragStart.center.y};return s==="end"&&(this._latestDragStart=void 0),{type:"drag",action:s,x:r,y:n,origin:g,pointerType:a,button:o,buttons:c,radius:i.radius,angle:tfe(i.angle),native:l,timestamp:m,cancelable:h,stopPropagation:()=>e.stopPropagation(),defer:v=>e.defer(v),preventDefault:()=>e.preventDefault()}}};function QBe(t){return{type:"focus",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),defer:e=>t.defer(e),preventDefault:()=>t.preventDefault()}}function KBe(t){return{type:"blur",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),defer:e=>t.defer(e),preventDefault:()=>t.preventDefault()}}function e8e(t,e){const{pointerType:i,button:r,buttons:n,x:s,y:a,native:o,eventId:l}=e.data,{cancelable:c,timestamp:h}=e;return{type:"click",pointerType:i,button:r,buttons:n,x:s,y:a,native:o,timestamp:h,screenPoint:Ns(s,a),mapPoint:Wk(t,s,a),eventId:l,cancelable:c,stopPropagation:()=>e.stopPropagation(),defer:m=>e.defer(m),preventDefault:()=>e.preventDefault()}}function t8e(t,e){const{pointerType:i,button:r,buttons:n,x:s,y:a,native:o,eventId:l}=e.data,{cancelable:c,timestamp:h}=e;return{type:"double-click",pointerType:i,button:r,buttons:n,x:s,y:a,native:o,timestamp:h,mapPoint:Wk(t,s,a),eventId:l,cancelable:c,stopPropagation:()=>e.stopPropagation(),defer:m=>e.defer(m),preventDefault:()=>e.preventDefault()}}function i8e(t,e){const{pointerType:i,button:r,buttons:n,x:s,y:a,native:o,eventId:l}=e.data,c=o.pointerId,{cancelable:h,timestamp:m}=e;return{type:"immediate-click",pointerId:c,pointerType:i,button:r,buttons:n,x:s,y:a,native:o,timestamp:m,mapPoint:Wk(t,s,a),eventId:l,cancelable:h,stopPropagation:()=>e.stopPropagation(),defer:g=>e.defer(g),preventDefault:()=>e.preventDefault()}}function r8e(t,e){const{pointerType:i,button:r,buttons:n,x:s,y:a,native:o,eventId:l}=e.data,c=o.pointerId,{cancelable:h,timestamp:m}=e;return{type:"immediate-double-click",pointerId:c,pointerType:i,button:r,buttons:n,x:s,y:a,native:o,timestamp:m,mapPoint:Wk(t,s,a),eventId:l,cancelable:h,stopPropagation:()=>e.stopPropagation(),defer:g=>e.defer(g),preventDefault:()=>e.preventDefault()}}function n8e(t,e){const{pointerType:i,button:r,buttons:n,x:s,y:a,native:o}=e.data,{cancelable:l,timestamp:c}=e;return{type:"hold",pointerType:i,button:r,buttons:n,x:s,y:a,native:o,timestamp:c,mapPoint:Wk(t,s,a),cancelable:l,stopPropagation:()=>e.stopPropagation(),defer:h=>e.defer(h),preventDefault:()=>e.preventDefault()}}function Wk(t,e,i){return t.toMap(Ns(e,i),{exclude:[]})}function s8e(t){const{key:e,repeat:i,native:r}=t.data,{cancelable:n,timestamp:s}=t;return{type:"key-down",key:e,repeat:i,native:r,timestamp:s,cancelable:n,stopPropagation:()=>t.stopPropagation(),defer:a=>t.defer(a),preventDefault:()=>t.preventDefault()}}function a8e(t){const{key:e,native:i}=t.data,{cancelable:r,timestamp:n}=t;return{type:"key-up",key:e,native:i,timestamp:n,cancelable:r,stopPropagation:()=>t.stopPropagation(),defer:s=>t.defer(s),preventDefault:()=>t.preventDefault()}}function bM(t,e){const{x:i,y:r,button:n,buttons:s,native:a,eventId:o}=t.data,l=a.pointerId,c=a.pointerType,{cancelable:h,timestamp:m}=t;return{type:e,x:i,y:r,pointerId:l,pointerType:c,button:n,buttons:s,native:a,timestamp:m,eventId:o,cancelable:h,stopPropagation:()=>t.stopPropagation(),defer:g=>t.defer(g),preventDefault:()=>t.preventDefault()}}function o8e(t){const{x:e,y:i,buttons:r,native:n,eventId:s}=t.data.currentEvent,{button:a}=t.data.startEvent,o=t.data.startEvent.native.pointerId,l=t.data.startEvent.native.pointerType,c=t.data.action,h={x:t.data.startEvent.x,y:t.data.startEvent.y},{cancelable:m,timestamp:g}=t;return{type:"pointer-drag",x:e,y:i,pointerId:o,pointerType:l,button:a,buttons:r,action:c,origin:h,native:n,timestamp:g,eventId:s,cancelable:m,stopPropagation:()=>t.stopPropagation(),defer:v=>t.defer(v),preventDefault:()=>t.preventDefault()}}function l8e(t){const{cancelable:e,data:i,timestamp:r}=t,{x:n,y:s,deltaY:a,native:o}=i;return{type:"mouse-wheel",x:n,y:s,deltaY:a,native:o,timestamp:r,cancelable:e,stopPropagation:()=>t.stopPropagation(),defer:l=>t.defer(l),preventDefault:()=>t.preventDefault()}}function c8e(t){const{action:e,state:i,device:r}=t.data,{cancelable:n,timestamp:s}=t,{buttons:a,axes:o}=i;return{type:"gamepad",device:r,timestamp:s,action:e,buttons:a,axes:o,cancelable:n,stopPropagation:()=>t.stopPropagation(),defer:l=>t.defer(l),preventDefault:()=>t.preventDefault()}}const u8e="z",d8e="r",N0e={cancel:"Escape",complete:"Enter"},TTt={...N0e,redo:d8e,undo:u8e,center:"Alt",constraint:"Shift",delete:["Backspace","Delete"],vertexAdd:"f",pan:" "},ITt={toggle:"Control"},MTt={enterInputMode:"Tab",commit:"Enter",discard:"Escape",next:"Tab"},CTt={moveUp:{key:"ArrowUp",modifier:"Shift",repeats:!0},moveDown:{key:"ArrowDown",modifier:"Shift",repeats:!0},moveLeft:{key:"ArrowLeft",modifier:"Shift",repeats:!0},moveRight:{key:"ArrowRight",modifier:"Shift",repeats:!0},scaleUp:{key:"+",modifier:"Shift"},scaleDown:{key:"-",modifier:"Shift"},factorModifier:{key:Mve,continuePropagation:!0},toggleOpacity:"t",preserveAspectRatio:{key:"Shift",continuePropagation:!0},rotateIncrements:{key:"Shift",continuePropagation:!0}};let ETt=class{constructor(){this._bindings=new Map}add(e,i){return this.addToggle(e,r=>{r.type==="key-down"&&i(r)})}addToggle(e,i){const r=h8e.fromDefinition(e,i),n=Gp(this._bindings,r.key,()=>[]);return n.push(r),Ii(()=>TW(n,r))}register(e,i=Vm.WIDGET){return h_([e.on("key-down",r=>this.dispatch(e.inputManager,r),i),e.on("key-up",r=>this.dispatch(e.inputManager,r),i)])}dispatch(e,i){const r=i.key,n=this._bindings.get(r);if(n)for(const s of n)s.process(e,i)}},h8e=class Hq{constructor(e,i,r,n,s){this.key=e,this.modifiers=i,this.repeats=r,this.continuePropagation=n,this.callback=s}process(e,i){if(!(i.key!==this.key||"repeat"in i&&i.repeat&&!this.repeats)){for(const r of this.modifiers)if(!e.isModifierKeyDown(r))return;this.continuePropagation||i.stopPropagation(),this.callback(i)}}static fromDefinition(e,i){if(typeof e=="string")return new Hq(e,[],!1,!1,i);const{key:r,modifier:n,repeats:s,continuePropagation:a}=e;return new Hq(r,n?Array.isArray(n)?n:[n]:[],!!s,!!a,i)}};function p8e(t){return[t.on("before-add",e=>{const i=e.item;if(i==null||t.includes(i))return Ie.getLogger("esri.views.interactive.interactiveToolUtils").warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void e.preventDefault();i.onAdd()}),t.on("after-remove",e=>{const i=e.item;i.active&&(i.view.activeTool=null),i.destroy()})]}function Gq(t){return t.visible&&t.getEditableFlag!=null&&t.getEditableFlag(0)&&t.getEditableFlag(1)}function f8e(t){return t.type==="key-down"&&t.key===N0e.cancel}function wh(t){return Ns(t.x,t.y)}function D0e(t,e){var r;const i=(r=t instanceof HTMLElement?t:t.surface)==null?void 0:r.getBoundingClientRect();return i?Ns(e.clientX-i.left,e.clientY-i.top):Ns(0,0)}function j0e(t,e){return e instanceof Event?D0e(t,e):wh(e)}function V0e(t){if(t instanceof Event)return!0;if(typeof t=="object"&&"type"in t)switch(t.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}let EL=class extends et{constructor(){super(...arguments),this._pointerLocations=new Map,this._hoveredManipulators=new bv,this._grabbedManipulators=new bv,this._draggedManipulators=new Map,this._stopDrag=!1,this._externallyDragging=!1,this._revertToNullActiveTool=!1}get cursor(){return this._cursorFromMap(this._grabbedManipulators,"grabbing")??this._cursorFromMap(this._hoveredManipulators,"pointer")}get hasFocusedManipulators(){return this._grabbedManipulators.size>0||this._draggedManipulators.size>0}handleInputEvent(e,i){const r=()=>e.stopPropagation();switch(e.type){case"pointer-move":Gne(e.pointerType)&&this._pointerLocations.set(e.pointerId,{x:e.x,y:e.y,pointerType:e.pointerType});break;case"drag":this._grabbedManipulators.size>0?this._stopDrag=!0:e.action==="start"?this._externallyDragging=!0:e.action==="end"&&(this._externallyDragging=!1),this._stopDrag&&(r(),e.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!Wne(e))break;const n=wh(e),s=I1(n,e.pointerType,i.tools);if(s==null)break;const a=s.manipulator,o=s.tool;a==null||o==null||!a.interactive||a.grabbable&&a.grabbableForEvent(e)||!a.grabbing||a.dragging||this._releaseManipulatorBeforeDragging(a,e,i),a!=null&&o!=null&&a.interactive&&a.grabbable&&a.grabbableForEvent(e)&&!a.grabbing&&(this._grabbedManipulators.set(e.pointerId,{manipulator:a,tool:o,start:n,pointerType:e.pointerType}),this._grabbedManipulators.size===1&&i.activeTool==null&&(this._revertToNullActiveTool=!0,i.setActiveTool(s.tool)),a.grabbing=!0,a.events.emit("grab-changed",{action:"start",pointerType:e.pointerType,screenPoint:n}),r());break}case"pointer-up":this._draggedManipulators.has(e.pointerId)||this._handlePointerEnd(e,i);break;case"pointer-drag":{if(!Wne(e))break;const n=this._grabbedManipulators.get(e.pointerId),s=n==null?void 0:n.manipulator,a=n==null?void 0:n.tool;if(s==null||a==null)break;const o=wh(e);o.x=ua(o.x,0,i.view.width),o.y=ua(o.y,0,i.view.height);const l=n.start,c=this._draggedManipulators.get(e.pointerId);switch(e.action){case"start":case"update":e.action!=="update"&&this._grabbedManipulators.size!==1||(s.dragging=!0,c?s.events.emit("drag",{action:"update",start:l,screenPoint:o}):s.events.emit("drag",{action:"start",start:l,screenPoint:o,pointerType:e.pointerType}),this._draggedManipulators.set(e.pointerId,{tool:a,manipulator:s,start:l}));break;case"end":s.dragging=!1,c&&s.events.emit("drag",{action:"end",start:l,screenPoint:o}),this._draggedManipulators.delete(e.pointerId),this._handlePointerEnd(e,i)}r();break}case"immediate-click":{const n=wh(e),s=I1(n,e.pointerType,i.tools);if(!m8e(e)){for(const c of i.tools)if((s==null||s.tool!==c||c.automaticManipulatorSelection)&&c.manipulators){let h=!1;c.manipulators.forEach(({manipulator:m})=>{m.selected&&(m.selected=!1,h=!0)}),h&&c.onManipulatorSelectionChanged&&c.onManipulatorSelectionChanged()}}if(s==null)break;const{manipulator:a,tool:o}=s;if(!a.interactive)break;a.selectable&&o.automaticManipulatorSelection&&(a.selected=!a.selected,o.onManipulatorSelectionChanged&&o.onManipulatorSelectionChanged());const l=e.native.shiftKey;a.events.emit("immediate-click",{screenPoint:n,button:e.button,pointerType:e.pointerType,shiftKey:l,stopPropagation:r}),w6(a,r);break}case"click":{const n=wh(e),s=I1(n,e.pointerType,i.tools),a=s==null?void 0:s.manipulator;if(a==null||!a.interactive)break;const o=e.native.shiftKey;a.events.emit(e.type,{screenPoint:n,button:e.button,pointerType:e.pointerType,shiftKey:o}),r();break}case"double-click":{const n=wh(e),s=I1(n,e.pointerType,i.tools),a=s!=null?s.manipulator:null;if(a==null||!a.interactive)break;const o=e.native.shiftKey;a.events.emit("double-click",{screenPoint:n,button:e.button,pointerType:e.pointerType,shiftKey:o,stopPropagation:r}),w6(a,r);break}case"immediate-double-click":{const n=wh(e),s=I1(n,e.pointerType,i.tools),a=s!=null?s.manipulator:null;if(a==null||!a.interactive)break;const o=e.native.shiftKey;a.events.emit("immediate-double-click",{screenPoint:n,button:e.button,pointerType:e.pointerType,shiftKey:o,stopPropagation:r}),e.pointerType==="mouse"&&w6(a,r);break}}this._onFocusChange(i.tools)}_releaseManipulatorBeforeDragging(e,i,r){e.grabbing=!1,e.events.emit("grab-changed",{action:"end",pointerType:i.pointerType,screenPoint:wh(i)}),this._grabbedManipulators.forEach(({manipulator:n},s)=>{n===e&&this._grabbedManipulators.delete(s)}),this._afterManipulatorRelease(r.setActiveTool)}_handlePointerEnd(e,i){var n;const r=(n=this._grabbedManipulators.get(e.pointerId))==null?void 0:n.manipulator;r!=null&&r.grabbing&&(r.grabbing=!1,r.events.emit("grab-changed",{action:"end",pointerType:e.pointerType,screenPoint:wh(e)}),this._grabbedManipulators.delete(e.pointerId),this._afterManipulatorRelease(i.setActiveTool))}_onFocusChange(e){this._updateFocusedManipulatorTools(e)}_updateFocusedManipulatorTools(e){const i=new Set,r=new Set;this._grabbedManipulators.forEach(({tool:n})=>i.add(n)),this._hoveredManipulators.forEach(({tool:n})=>r.add(n));for(const n of e){n.hasGrabbedManipulators=i.has(n),n.hasHoveredManipulators=r.has(n);const s=this._grabbedManipulators.values(),a=cOe(s,({tool:o})=>o===n);n.firstGrabbedManipulator=a!=null?a.manipulator:null}}clearPointers(e,{tools:i,setActiveTool:r},n=!0,s){const a=(o,l)=>o===e&&(s==null||s===l);this._grabbedManipulators.forEach(({tool:o,manipulator:l,pointerType:c},h)=>{a(o,l)&&(this._grabbedManipulators.delete(h),l.grabbing=!1,l.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:c}))}),this._draggedManipulators.forEach(({tool:o,manipulator:l},c)=>{a(o,l)&&(this._draggedManipulators.delete(c),l.dragging=!1,l.events.emit("drag",{action:"cancel"}))}),n&&this._hoveredManipulators.forEach(({tool:o,manipulator:l},c)=>{a(o,l)&&(this._hoveredManipulators.delete(c),l.hovering=!1)}),this._afterManipulatorRelease(r),this._onFocusChange(i)}updateHoveredStateFromKnownPointers(e){this._pointerLocations.forEach((i,r)=>{this._updateHoveredStateForPointerAtScreenPosition(Ns(i.x,i.y),r,i.pointerType,e)})}handleHoverEvent(e,i){const r=e.type;r!=="pointer-up"&&r!=="immediate-click"&&r!=="pointer-move"||!Gne(e.pointerType)||(r!=="pointer-up"&&this._externallyDragging?this._clearHoveredManipulatorStates(e.pointerId):this._updateHoveredStateForPointerAtScreenPosition(wh(e),e.pointerId,e.pointerType,i))}_updateHoveredStateForPointerAtScreenPosition(e,i,r,n){var o;let s=I1(e,r,n);const a=(o=this._hoveredManipulators.get(i))==null?void 0:o.manipulator;s==null||s.manipulator.interactive||(s=null),s!=null&&a===s.manipulator||(a!=null&&(a.hovering=!1),s!=null?(s.manipulator.hovering=!0,this._hoveredManipulators.set(i,s)):this._hoveredManipulators.delete(i),this._onFocusChange(n))}_afterManipulatorRelease(e){this._grabbedManipulators.size===0&&this._revertToNullActiveTool&&(e(null),this._revertToNullActiveTool=!1)}_clearHoveredManipulatorStates(e){this._hoveredManipulators.forEach(({manipulator:i},r)=>{e===r&&(this._hoveredManipulators.delete(e),i.hovering=!1)})}_cursorFromMap(e,i){if(!(e!=null&&e.size))return null;for(const{manipulator:r}of e.values())if(r!=null&&r.interactive){if(r.grabbing&&r.grabCursor)return r.grabCursor;if(r.cursor)return r.cursor}return i}};function I1(t,e,i){for(const r of i){if(r.manipulators==null||!Gq(r))continue;const n=r.manipulators.intersect(t,e);if(n!=null)return{tool:r,manipulator:n}}return null}function Gne(t){return t==="mouse"}function Wne(t){return t.pointerType!=="mouse"||t.button===0}function m8e(t){return!!t.native.shiftKey}function w6(t,e){t!=null&&t.consumesClicks&&e()}d([f()],EL.prototype,"cursor",null),EL=d([V("esri.views.interactive.ToolViewManagerManipulatorState")],EL);const Zne="attached",_6="tools",g8e=1e3;let _h=class extends et{constructor(e){super(e),this._updatingHandles=new aw,this._clock=CT,this._manipulatorState=new EL,this.tools=new Ue,this._interacting=!1,this._interactingTimeout=g8e,this._interactingTimeoutHandle=null}initialize(){this.addHandles([this.view.on(L0e,e=>{this._handleInputEvent(e)},Vm.TOOL),...p8e(this.tools),this.tools.on("before-add",({item:e})=>{this._updateToolEditableFlag(e)}),this.tools.on("before-remove",({item:e})=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs)}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.activeTool=null,this.tools.drain(e=>e.destroy()),this._clearInteractingTimeout(),this._interacting=!1,this._updatingHandles.destroy(),this._manipulatorState.destroy()}get _manipulatorStateEventArgs(){return{tools:this.tools,activeTool:this.activeTool,setActiveTool:e=>{this.activeTool=e},view:this.view}}set activeTool(e){if(e!=null&&!this.view.ready)return void Ie.getLogger(this).error("Cannot set active tool while view is not ready.");if(e===this.activeTool)return;const i=this.activeTool;this._set("activeTool",e),i!=null&&i.deactivate(),e!=null&&e.activate(),this._removeIncompleteTools(e);for(const r of this.tools){this._updateToolEditableFlag(r);const n=Gq(r);this.activeTool!=null&&n||this._manipulatorState.clearPointers(r,this._manipulatorStateEventArgs,!n)}}get cursor(){const e=this._manipulatorState.cursor;if(e!=null)return e;for(const i of this.tools)if(i.visible&&i.cursor!=null)return i.cursor;return null}get updating(){return this._updatingHandles.updating||this.tools.some(e=>e.updating)}get interacting(){return this._interacting}_clearInteractingTimeout(){this._interactingTimeoutHandle=Dr(this._interactingTimeoutHandle)}_startInteractingTimeout(){this._clearInteractingTimeout(),this._interactingTimeoutHandle=this._clock.setTimeout(()=>this._interacting=!1,this._interactingTimeout)}attach(){this.view.type==="3d"?this.addHandles([be(()=>{const{state:e}=this.view;return"camera"in e&&e.camera},()=>this._forEachManipulator(e=>e.onViewChange())),this.view.elevationProvider.on("elevation-change",e=>this._forEachManipulator(i=>i.onElevationChange(e)))],Zne):this.addHandles(be(()=>this.view.extent,()=>this._forEachManipulator(e=>e.onViewChange())))}detach(){this.activeTool=null,this.tools.removeAll(),this.removeHandles(Zne),this._clearInteractingTimeout(),this._interacting=!1}_forEachManipulator(e){for(const i of this.tools)i.manipulators&&i.manipulators.forEach(({manipulator:r})=>e(r,i))}_handleInputEvent(e){let i=!1;const r={...e,stopPropagation:()=>{i=!0,e.stopPropagation()}};if(this.activeTool!=null)this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(r);else for(const n of this.tools)!i&&n.visible&&n.handleInputEvent(r);!i&&f8e(e)&&this.activeTool&&(e.stopPropagation(),e.preventDefault(),this.activeTool.cancel(),this.activeTool=null),this._manipulatorState.handleInputEvent(r,this._manipulatorStateEventArgs),i||this.activeTool==null||this.activeTool.handleInputEventAfter(r),this._manipulatorState.handleHoverEvent(r,this.tools),e.type==="pointer-move"&&(this._manipulatorState.hasFocusedManipulators||this.activeTool)&&(this._interacting=!0,this._startInteractingTimeout())}_refreshToolWatchers(){this.removeHandles(_6);for(const e of this.tools){if(e instanceof et){const i=be(()=>[e.cursor,e.visible,e.editable],()=>{Gq(e)||this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs)});this.addHandles(i,_6)}e.manipulators&&this.addHandles([e.manipulators.on("after-remove",i=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs,!0,i.item.manipulator)}),e.manipulators.on("change",()=>{this._manipulatorState.updateHoveredStateFromKnownPointers(this.tools)})],_6)}this._manipulatorState.updateHoveredStateFromKnownPointers(this.tools)}_updateToolEditableFlag(e){var i;(i=e.setEditableFlag)==null||i.call(e,1,this.activeTool==null||e===this.activeTool)}_removeIncompleteTools(e){this.tools.filter(i=>(e==null||i!==e)&&!i.created&&i.removeIncompleteOnCancel).forEach(i=>{this.tools.remove(i)})}get test(){}};d([f({constructOnly:!0,nonNullable:!0})],_h.prototype,"view",void 0),d([f({value:null})],_h.prototype,"activeTool",null),d([f({readOnly:!0,type:Ue})],_h.prototype,"tools",void 0),d([f()],_h.prototype,"cursor",null),d([f({readOnly:!0})],_h.prototype,"updating",null),d([f()],_h.prototype,"_interacting",void 0),d([f({readOnly:!0})],_h.prototype,"interacting",null),_h=d([V("esri.views.ToolViewManager")],_h);const y8e=new Se("cyan"),v8e=1,b8e=.25,w8e=new Se("black"),_8e=.4,x8e=.2,OTt=.25,U0e="default",$8e="temporary",S8e=new Se("yellow");var Wq;let tc=Wq=class extends et{constructor(t){super(t),this.name=U0e,this.color=y8e.clone(),this.haloColor=null,this.haloOpacity=v8e,this.fillOpacity=b8e,this.shadowColor=w8e.clone(),this.shadowOpacity=_8e,this.shadowDifference=x8e,this.haloWidth=2.1,this.haloBlur=.8/this.haloWidth}equals(t){return this.color.equals(t.color)&&(this.haloColor||this.color).equals(t.haloColor||t.color)&&this.haloOpacity===t.haloOpacity&&this.fillOpacity===t.fillOpacity&&this.haloWidth===t.haloWidth&&this.haloBlur===t.haloBlur&&this.shadowColor.equals(t.shadowColor)&&this.shadowOpacity===t.shadowOpacity&&this.shadowDifference===t.shadowDifference}clone(){var t,e;return new Wq({...this,color:this.color.clone(),haloColor:(t=this.haloColor)==null?void 0:t.clone(),shadowColor:(e=this.shadowColor)==null?void 0:e.clone()})}assignFrom(t){var e;this.color=t.color.clone(),this.haloColor=(e=t.haloColor)==null?void 0:e.clone(),this.haloOpacity=t.haloOpacity,this.fillOpacity=t.fillOpacity,this.shadowColor=t.shadowColor.clone(),this.shadowDifference=t.shadowDifference,this.shadowOpacity=t.shadowOpacity,this.haloBlur=t.haloBlur,this.haloWidth=t.haloWidth}};d([f({type:String,constructOnly:!0,nonNullable:!0})],tc.prototype,"name",void 0),d([f({type:Se,nonNullable:!0})],tc.prototype,"color",void 0),d([f({type:Se})],tc.prototype,"haloColor",void 0),d([f({nonNullable:!0})],tc.prototype,"haloOpacity",void 0),d([f({nonNullable:!0})],tc.prototype,"fillOpacity",void 0),d([f({type:Se,nonNullable:!0})],tc.prototype,"shadowColor",void 0),d([f({nonNullable:!0})],tc.prototype,"shadowOpacity",void 0),d([f({nonNullable:!0})],tc.prototype,"shadowDifference",void 0),d([f({nonNullable:!0})],tc.prototype,"haloWidth",void 0),d([f({nonNullable:!0})],tc.prototype,"haloBlur",void 0),tc=Wq=d([V("esri.views.support.HighlightOptions")],tc);const wv=tc;function T8e(){return new(Ue.ofType(wv))([new wv({name:U0e}),new wv({name:$8e,color:S8e})])}let bx=class extends et{constructor(e){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",e.mapping==="standard"?this._detectedDeviceType="standard":I8e.test(e.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=e.index}get native(){const e=navigator.getGamepads?navigator.getGamepads():[];return this.nativeIndex!=null&&this.nativeIndex<e.length?e[this.nativeIndex]:null}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return M8e[this.deviceType]}};d([f({nonNullable:!0,readOnly:!0})],bx.prototype,"nativeIndex",void 0),d([f({type:String,readOnly:!0})],bx.prototype,"deviceType",null),d([f({type:Number,readOnly:!0})],bx.prototype,"axisThreshold",null),bx=d([V("esri.views.input.gamepad.GamepadInputDevice")],bx);const SY=bx,I8e=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),M8e={standard:.15,spacemouse:.025,unknown:0};let yC=class extends et{constructor(e){super(e),this.devices=new Ue,this.enabledFocusMode="document"}};d([f({type:Ue.ofType(SY),readOnly:!0})],yC.prototype,"devices",void 0),d([f({type:["document","view","none"]})],yC.prototype,"enabledFocusMode",void 0),yC=d([V("esri.views.input.gamepad.GamepadSettings")],yC);const C8e=yC;let kL=class extends et{constructor(){super(...arguments),this.gamepad=new C8e}};d([f({readOnly:!0})],kL.prototype,"gamepad",void 0),kL=d([V("esri.views.input.Input")],kL);const E8e=kL,x6=()=>f({type:["pan","rotate","zoom","none"],nonNullable:!0});let n0=class extends et{constructor(e){super(e),this.dragPrimary="pan",this.dragSecondary="rotate",this.dragTertiary="zoom",this.mouseWheel="zoom"}};d([x6()],n0.prototype,"dragPrimary",void 0),d([x6()],n0.prototype,"dragSecondary",void 0),d([x6()],n0.prototype,"dragTertiary",void 0),d([f({type:["zoom","none"],nonNullable:!0})],n0.prototype,"mouseWheel",void 0),n0=d([V("esri.views.navigation.NavigationActionMap")],n0);const TY=n0;let by=class extends et{constructor(e){super(e),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};d([f({type:Boolean,nonNullable:!0})],by.prototype,"enabled",void 0),d([f({type:SY})],by.prototype,"device",void 0),d([f({type:["pan","zoom"],nonNullable:!0})],by.prototype,"mode",void 0),d([f({type:["forward-down","forward-up"],nonNullable:!0})],by.prototype,"tiltDirection",void 0),d([f({type:Number,nonNullable:!0})],by.prototype,"velocityFactor",void 0),by=d([V("esri.views.navigation.gamepad.GamepadSettings")],by);const B0e=by;let wy=class extends et{constructor(e){super(e),this.actionMap=new TY,this.browserTouchPanEnabled=!0,this.gamepad=new B0e,this.momentumEnabled=!0}get mouseWheelZoomEnabled(){return this.actionMap.mouseWheel==="zoom"}set mouseWheelZoomEnabled(e){l8(Ie.getLogger(this),"mouseWheelZoomEnabled",{replacement:"actionMap.mouseWheel",version:"4.32",warnOnce:!0}),this.actionMap.mouseWheel=e?"zoom":"none"}};d([f({type:TY,nonNullable:!0})],wy.prototype,"actionMap",void 0),d([f({type:Boolean})],wy.prototype,"browserTouchPanEnabled",void 0),d([f({type:B0e,nonNullable:!0})],wy.prototype,"gamepad",void 0),d([f({type:Boolean})],wy.prototype,"momentumEnabled",void 0),d([f({type:Boolean})],wy.prototype,"mouseWheelZoomEnabled",null),wy=d([V("esri.views.navigation.Navigation")],wy);const a5=wy;function jTt(t,e,i){const r=q0e(t),n=e,s=k8e(r,n,i);if(r){const a=Po.deriveUnitFromSR(r,t.spatialReference).heightUnit;if(!i&&a!==r.heightUnit){const o=new ae("layerview:unmatched-height-unit",`The vertical units of the layer must match the horizontal units (${a})`,{horizontalUnit:a});return new ae("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:r,error:o})}}if(!A8e(t)||s===4)return new ae("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:r});switch(s){case 1:{const a=(r==null?void 0:r.heightUnit)||"unknown",o=(n==null?void 0:n.heightUnit)||"unknown",l=new ae("layerview:incompatible-height-unit",`The vertical units of the layer (${a}) must match the vertical units of the scene (${o})`,{layerUnit:a,sceneUnit:o});return new ae("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:r,sceneHeightModelInfo:n,error:l})}case 2:{const a=(r==null?void 0:r.heightModel)||"unknown",o=(n==null?void 0:n.heightModel)||"unknown",l=new ae("layerview:incompatible-height-model",`The height model of the layer (${a}) must match the height model of the scene (${o})`,{layerHeightModel:a,sceneHeightModel:o});return new ae("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:r,sceneHeightModelInfo:n,error:l})}case 3:{const a=(r==null?void 0:r.vertCRS)||"unknown",o=(n==null?void 0:n.vertCRS)||"unknown",l=new ae("layerview:incompatible-vertical-datum",`The vertical datum of the layer (${a}) must match the vertical datum of the scene (${o})`,{layerDatum:a,sceneDatum:o});return new ae("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:r,sceneHeightModelInfo:n,error:l})}}return null}function k8e(t,e,i){if(!Yne(t)||!Yne(e))return 4;if(t==null||e==null)return 0;if(!i&&t.heightUnit!==e.heightUnit)return 1;if(t.heightModel!==e.heightModel)return 2;switch(t.heightModel){case"gravity-related-height":return 0;case"ellipsoidal":return t.vertCRS===e.vertCRS?0:3;default:return 4}}function Yne(t){return t==null||t.heightModel!=null&&t.heightUnit!=null}function A8e(t){return"heightModelInfo"in t&&t.heightModelInfo!=null||t.spatialReference!=null||!W0e(t)}function q0e(t){var r;if(t.type==="integrated-mesh-3dtiles"||t.type==="gaussian-splat")return null;const e=t.url?Np(t.url):void 0;return!(((r=t.spatialReference)==null?void 0:r.vcsWkid)==null&&e!=null&&e.serverType==="ImageServer")&&H0e(t)&&t.heightModelInfo?t.heightModelInfo:W0e(t)?Po.deriveUnitFromSR(O8e,t.spatialReference):null}function H0e(t){return"heightModelInfo"in t}function G0e(t){if(t.type==="unknown"||!("capabilities"in t))return!1;switch(t.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"oriented-imagery":case"wfs":case"knowledge-graph-sublayer":return!0;default:return!1}}function W0e(t){return G0e(t)?!!(t.capabilities&&t.capabilities.data&&t.capabilities.data.supportsZ):Z0e(t)}function P8e(t){return t.layers!=null||Z0e(t)||G0e(t)||H0e(t)}function Z0e(t){switch(t.type){case"building-scene":case"elevation":case"integrated-mesh":case"integrated-mesh-3dtiles":case"point-cloud":case"scene":case"voxel":return!0;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"catalog":case"catalog-footprint":case"catalog-dynamic-group":case"csv":case"dimension":case"gaussian-splat":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"knowledge-graph":case"link-chart":case"knowledge-graph-sublayer":case"line-of-sight":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"oriented-imagery":case"parquet":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"video":case"viewshed":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}const O8e=new Po({heightModel:"gravity-related-height"});let Zq,$6=null;async function L8e(t){$6||($6=de(()=>import("./geometryServiceUtils-B6R4jVVU.js"),[]).then(e=>Zq=e)),await $6,lr(t)}async function Y0e(t,e,i,r){if(!t)return null;const n=t.spatialReference;return ng()||jd(n,e)?sg(t,e):Zq?Zq.projectGeometry(t,e,i,r):(await Promise.race([L8e(r),Ov(r)]),Y0e(t,e,i,r))}async function VTt(t,e){try{return t!=null&&t.spatialReference?await Jye(t,e):null}catch{return null}}let Ar=class extends et{constructor(e){super(e),this.required={extent:!1,heightModelInfo:!1,tileInfo:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=Fa(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return this.userSpatialReference??this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return this.userSpatialReference==null||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){var r,n,s,a,o;const e=(r=this.map)==null?void 0:r.call(this),i=[];return this.priorityCollection!=null&&i.push(this.priorityCollection),i.push({parent:e==null?void 0:e.basemap,layers:(n=e==null?void 0:e.basemap)==null?void 0:n.baseLayers},{parent:e==null?void 0:e.basemap,layers:(s=e==null?void 0:e.basemap)==null?void 0:s.groundLayers},{layers:e==null?void 0:e.layers},{parent:e==null?void 0:e.ground,layers:(a=e==null?void 0:e.ground)==null?void 0:a.layers},{parent:e==null?void 0:e.basemap,layers:(o=e==null?void 0:e.basemap)==null?void 0:o.referenceLayers}),i}get _spatialReferenceTask(){if(this.suspended)return this._get("_spatialReferenceTask")??{updating:!1};let e;if(this._collectLayers(this.mapCollections,r=>{const n=this._getSupportedSpatialReferences(r);if(n.length>0){const s=this._narrowDownSpatialReferenceCandidates(e,n);s!=null&&(e=s)}return(e==null?void 0:e.length)===1})&&(e==null?void 0:e.length)!==1)return{updating:!0};const i=this._pickSpatialReferenceCandidate(e);return{spatialReference:(i==null?void 0:i.spatialReference)??null,viewingMode:(i==null?void 0:i.viewingMode)??null,updating:!1}}get _tileInfoTask(){var s,a,o;if(!this.required.tileInfo)return this._get("_tileInfoTask")??{updating:!1};const e=(s=this.map)==null?void 0:s.call(this),i=this.spatialReference;if(!i)return{updating:this._spatialReferenceTask.updating};let r;const n=this._collectLayers([{parent:e==null?void 0:e.basemap,layers:(a=e==null?void 0:e.basemap)==null?void 0:a.baseLayers},{parent:e==null?void 0:e.basemap,layers:(o=e==null?void 0:e.basemap)==null?void 0:o.groundLayers},{layers:e==null?void 0:e.layers}],l=>{var c;return!(!("tileInfo"in l)||!((c=l.tileInfo)!=null&&c.spatialReference.equals(i)))&&(r=l,!0)},l=>"tileInfo"in l);return r?{tileInfo:r.tileInfo,updating:!1}:{updating:n}}get _heightModelInfoTask(){var r;if(!this.required.heightModelInfo||this.suspended&&((r=this._get("_heightModelInfoTask"))!=null&&r.heightModelInfo))return this._get("_heightModelInfoTask")??{updating:!1};let e={};const i=this._collectLayers(this.mapCollections,n=>{var a,o;const s=q0e(n);return!!s&&(e={heightModelInfo:s,vcsWkid:(a=n.spatialReference)==null?void 0:a.vcsWkid,latestVcsWkid:(o=n.spatialReference)==null?void 0:o.latestVcsWkid},!0)},n=>P8e(n));return{...e,updating:i}}get _extentCandidatesTask(){if(this.suspended||!this.required.extent)return this._get("_extentCandidatesTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const e=[],i=this._collectLayers(this.mapCollections,r=>{const n="fullExtents"in r&&r.fullExtents||(r.fullExtent!=null?[r.fullExtent]:[]),s=this.requiresExtentInSpatialReference?null:n[0],a=n.find(o=>o.spatialReference.equals(this.spatialReference))??s;if(a)return e.push({extent:a,layer:r}),!0;if(this._getSupportedSpatialReferences(r).length>0)for(const o of n)e.push({extent:o,layer:r});return!1});return{candidates:e,updating:i}}get _extentTask(){const{candidates:e,updating:i}=this._extentCandidatesTask;if(i)return{updating:i};if(e==null||e.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const r=this._pickExtentCandidate(e),n=this.spatialReference;return r.extent.equals(this._projectExtentTask.input)&&n.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:this._projectExtentTask.task!=null&&!this._projectExtentTask.task.finished}:(this._projectExtentTask.task!=null&&(this._projectExtentTask.task=Fa(this._projectExtentTask.task)),this._projectExtentTask={input:r.extent.clone(),output:null,spatialReference:n.clone(),task:Zm(async s=>{try{const a=await Y0e(r.extent,n,"portalItem"in r.layer?r.layer.portalItem:void 0,s);this._projectExtentTask={...this._projectExtentTask,task:null,output:a}}catch{if(co(s))return;this._projectExtentTask={...this._projectExtentTask,task:null}}})},{updating:!0})}_narrowDownSpatialReferenceCandidates(e,i){if(e==null)return i;const r=new Array;for(const n of e)for(const s of i){if(!n.spatialReference.equals(s.spatialReference))continue;const a=R8e(n.viewingMode,s.viewingMode);if(a!==!1){r.push({spatialReference:n.spatialReference,viewingMode:a});break}}return r.length>0?r:null}_pickSpatialReferenceCandidate(e){const i=this.defaultSpatialReference;return e==null||e.length<1?i?{spatialReference:i,viewingMode:null}:null:(i!=null&&e.length>1&&e.some(({spatialReference:r})=>r.equals(i))&&(e=e.filter(({spatialReference:r})=>r.equals(i))),e.length>1&&e.some(({viewingMode:r})=>r!==2)&&(e=e.filter(({viewingMode:r})=>r!==2)),e[0])}_getSupportedSpatialReferences(e){const i="supportedSpatialReferences"in e&&e.supportedSpatialReferences||(e.spatialReference?[e.spatialReference]:[]);if(i.length===0)return[];const r=[];for(const n of i){const s=this.getSpatialReferenceSupport(n,e);if(s!=null){const a=s.constraints??[{spatialReference:n,viewingMode:null}];for(const{spatialReference:o,viewingMode:l}of a)this.requiresExtentInSpatialReference&&this.userSpatialReference!=null&&!o.equals(this.userSpatialReference)||r.push({spatialReference:o,viewingMode:l})}}return r}_pickExtentCandidate(e){const i=this.spatialReference;return e.find(({extent:r})=>i.equals(r.spatialReference))||e[0]}_collectLayers(e,i,r=()=>!0){var s;switch(this._loadMaybe((s=this.map)==null?void 0:s.call(this))){case"loading":return!0;case"failed":return!1}const n=new F8e(r,i);for(const a of e)if(this._collectCollection(a,n),n.done||n.preloading===this.sourcePreloadCount)break;return n.updating}_collectCollection(e,i){if(e.layers){switch(this._loadMaybe(e.parent)){case"loading":return i.updating=!0,void++i.preloading;case"failed":return}for(const r of e.layers)if((r.type!=="graphics"||!r.internal)&&i.layerFilter(r)){switch(this._loadMaybe(r)){case"failed":continue;case"loading":i.updating=!0,++i.preloading;break;case"loaded":if(i.updating||(i.done=i.pushLayer(r)),i.done||i.preloading===this.sourcePreloadCount)break;"layers"in r&&this._collectCollection({layers:r.layers},i)}if(i.done||i.preloading===this.sourcePreloadCount)break}}}_loadMaybe(e){return e&&"loadStatus"in e&&e.loadStatus!=null?e.loadStatus==="not-loaded"?(e.load().catch(i=>{In(i)}),"loading"):e.loadStatus:"loaded"}};d([f()],Ar.prototype,"required",void 0),d([f({constructOnly:!0})],Ar.prototype,"map",void 0),d([f({constructOnly:!0})],Ar.prototype,"getSpatialReferenceSupport",void 0),d([f()],Ar.prototype,"defaultSpatialReference",void 0),d([f()],Ar.prototype,"userSpatialReference",void 0),d([f()],Ar.prototype,"sourcePreloadCount",void 0),d([f()],Ar.prototype,"priorityCollection",void 0),d([f()],Ar.prototype,"requiresExtentInSpatialReference",void 0),d([f()],Ar.prototype,"suspended",void 0),d([f({readOnly:!0})],Ar.prototype,"ready",null),d([f({readOnly:!0})],Ar.prototype,"heightModelInfoReady",null),d([f({readOnly:!0})],Ar.prototype,"spatialReference",null),d([f({readOnly:!0})],Ar.prototype,"extent",null),d([f({readOnly:!0})],Ar.prototype,"heightModelInfo",null),d([f({readOnly:!0})],Ar.prototype,"vcsWkid",null),d([f({readOnly:!0})],Ar.prototype,"latestVcsWkid",null),d([f({readOnly:!0})],Ar.prototype,"viewingMode",null),d([f({readOnly:!0})],Ar.prototype,"tileInfo",null),d([f({readOnly:!0})],Ar.prototype,"mapCollections",null),d([f({readOnly:!0})],Ar.prototype,"_spatialReferenceTask",null),d([f({readOnly:!0})],Ar.prototype,"_tileInfoTask",null),d([f({readOnly:!0})],Ar.prototype,"_heightModelInfoTask",null),d([f({readOnly:!0})],Ar.prototype,"_extentCandidatesTask",null),d([f()],Ar.prototype,"_extentTask",null),d([f()],Ar.prototype,"_projectExtentTask",void 0),Ar=d([V("esri.views.support.DefaultsFromMap")],Ar);let F8e=class{constructor(e,i){this.layerFilter=e,this.pushLayer=i,this.preloading=-1,this.updating=!1,this.done=!1}};function R8e(t,e){return t!=null?e!=null?t===e&&t:t:e}function z8e(t){return"tryRecycleWith"in t}let N8e=class{constructor(e,i,r){this.layer=e,this.view=i,this.layerViewImporter=r,this._controller=new AbortController,this._started=!1,this.done=!1,this._deferred=Fl(),this.promise=this._deferred.promise,_u(this._controller.signal,()=>{var s,a;(s=this._recycleController)==null||s.abort();const n=new ae("cancelled:layerview-create","layerview creation cancelled",{layer:e});(a=this._deferred)==null||a.reject(n)})}tryRecycle(e){var n;if(!this.done||!this.layerView||!z8e(this.layerView))return null;(n=this._recycleController)==null||n.abort(),this._recycleController=new AbortController;const i=this.layer.type,r=this._recycleController.signal;for(let s=0;s<e.length;s++){const a=e[s];if(a.type!==i)continue;const o=this.layerView.tryRecycleWith(a,{signal:r});if(o){e.splice(s,1),this.layer=a;const l=this.layerView,c=l.view;return this.promise=o.then(()=>(lr(r),a.emit("layerview-destroy",{view:c,layerView:l}),c.emit("layerview-destroy",{view:c,layerView:l}),a.emit("layerview-create",{view:c,layerView:l}),c.emit("layerview-create",{view:c,layerView:l}),l)),this.promise}}return null}destroy(){this._controller.abort();const{layerView:e}=this;if(e){const{layer:i,view:r}=this;i.emit("layerview-destroy",{view:r,layerView:e}),r.emit("layerview-destroy",{layer:i,layerView:e})}this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null,this._map=null,this.promise=null,this._deferred=null}async start(){var n,s,a,o,l;const{view:e}=this;if(this._started||!e.map)return;this._started=!0;const{_controller:{signal:i},layer:r}=this;this._map=e.map;try{let c,h;if(await r.load({signal:i}),r.prefetchResources&&await r.prefetchResources({signal:i}),D8e(r))c=await r.createLayerView(e,{signal:i});else{if(!this.layerViewImporter.hasLayerViewModule(r))throw new ae("layer:view-not-supported","No layerview implementation was found");const v=await this.layerViewImporter.importLayerView(r);lr(i),c="default"in v?new v.default({layer:r,view:e}):new v({layer:r,view:e})}const m=()=>{h=Dr(h),c.destroyed||c.destroy(),this.done=!0};h=_u(i,m),lr(i);try{await c.when()}catch(v){throw m(),v}if(!((s=(n=this._map)==null?void 0:n.allLayers)==null?void 0:s.includes(r)))return m(),void((a=this._deferred)==null?void 0:a.reject(new ae("view:no-layerview-for-layer","The layer has been removed from the map",{layer:r})));this.layerView=c,r.emit("layerview-create",{view:e,layerView:c}),e.emit("layerview-create",{layer:r,layerView:c}),this.done=!0,(o=this._deferred)==null||o.resolve(c)}catch(c){r.emit("layerview-create-error",{view:e,error:c}),e.emit("layerview-create-error",{layer:r,error:c}),this.done=!0,(l=this._deferred)==null||l.reject(new ae("layerview:create-error","layerview creation failed",{layer:r,error:c}))}}};function D8e(t){return t.createLayerView!==Kr.prototype.createLayerView}function j8e(t){return t!=null&&typeof t=="object"&&"layerViews"in t}let dl=class extends et{constructor(e){super(e),this._layerLayerViewInfoMap=new Map,this._recyclingInfoMap=new Map,this._watchUpdatingTracking=new aw,this.supportsGround=!0,this._preloadLayerViewModules=()=>{var r,n;const i=(r=this.view.map)==null?void 0:r.allLayers;if(i)for(const s of i)((n=this.layerViewFilter)==null?void 0:n.call(this,s))!==!1&&this.layerViewImporter.hasLayerViewModule(s)&&this.layerViewImporter.importLayerView(s)},this._reschedule=()=>this.destroyed?Promise.reject():(this._workPromise==null&&(this._workPromise=Fl(),this._workPromise.promise.catch(()=>{})),this.removeHandles("reschedule"),this.addHandles(ET(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{var h,m,g,v;if(this.destroyed)return;const{map:i}=this.view;if(!i)return void this.clear();if(this._map!==i&&(this.clear(),this._map=i),this._workPromise==null)return void this.notifyChange("updating");this.removeHandles("reschedule"),this.removeHandles("collection-change");const r=new Set,n=[],s=this.view.ready,a=b=>{var x;if(b!=null){for(const $ of b)if($){if(((x=this.layerViewFilter)==null?void 0:x.call(this,$))===!1)continue;r.add($);const M=this._layerLayerViewInfoMap.get($);M&&s?M.start():M||this._recyclingInfoMap.has($)||n.push($),"layers"in $&&$.layers&&a($.layers)}}};for(const b of this._rootCollectionNames)a(mu(this,b));const o=new Array,l=b=>{const x=b.tryRecycle(n);x?(this._recyclingInfoMap.set(b.layer,b),this.notifyChange("updating"),x.then(()=>{this._recyclingInfoMap.delete(b.layer),this._layerLayerViewInfoMap.set(b.layer,b),this._reschedule(),this.notifyChange("updating")}).catch($=>{In($)||(this._recyclingInfoMap.delete(b.layer),b.destroy(),this._reschedule(),this.notifyChange("updating"))})):o.push(b)};for(const b of this._layerLayerViewInfoMap.values())r.has(b.layer)||(this._layerLayerViewInfoMap.delete(b.layer),l(b));for(const b of this._recyclingInfoMap.values())r.has(b.layer)||(this._recyclingInfoMap.delete(b.layer),l(b));for(const b of n)this._createLayerView(b);this._refreshCollections(),o.forEach(b=>b.destroy());const c=[(h=i==null?void 0:i.ground)==null?void 0:h.layers,(m=i==null?void 0:i.basemap)==null?void 0:m.baseLayers,(g=i==null?void 0:i.basemap)==null?void 0:g.groundLayers,(v=i==null?void 0:i.basemap)==null?void 0:v.referenceLayers,i==null?void 0:i.layers].filter(b=>!!b);r.forEach(b=>"layers"in b&&c.push(b.layers)),this.addHandles(c.map(b=>this._watchUpdatingTracking.addOnCollectionChange(()=>b,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null},this._layersToLayerViews=new Map(e.layerviewMapping)}initialize(){this.addHandles([ca(()=>{var e,i;return(i=(e=this.view)==null?void 0:e.map)==null?void 0:i.allLayers},"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),be(()=>{const e=this.view,i=e==null?void 0:e.map;return[i==null?void 0:i.basemap,i==null?void 0:i.ground,i==null?void 0:i.layers,e==null?void 0:e.ready]},()=>this._reschedule(),Ka)]),this._preloadLayerViewModules(),this._reschedule()}clearHandles(){this._watchUpdatingTracking.removeAll()}destroy(){this.clear(),oO(this._recyclingInfoMap),oO(this._layerLayerViewInfoMap),this._watchUpdatingTracking.destroy(),this._map=null,this._workPromise!=null&&(this._workPromise.reject(Hi()),this._workPromise=null)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return this._workPromise!=null||this._watchUpdatingTracking.updating||vPe(this._layerLayerViewInfoMap,e=>!e.done)||this._recyclingInfoMap.size>0}get updatingRemaining(){let e=0;for(const i of this._layerLayerViewInfoMap.values())i.done||++e;return e}clear(){this.destroyed||(this._clearCollections(),oO(this._layerLayerViewInfoMap),oO(this._recyclingInfoMap))}async whenLayerView(e){var r,n;await this._reschedule();const i=(r=this._layerLayerViewInfoMap.get(e))==null?void 0:r.promise;if(!i){const s=(n=this._recyclingInfoMap.get(e))==null?void 0:n.promise;if(!s)throw new ae("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:e});return s}return i}isCreatingLayerViewsForLayer(e,i){var s;this.commitProperty("updatingRemaining");const r=this._layerLayerViewInfoMap.get(e);if(!(r!=null&&r.done))return!0;const n=r.layerView;return!(!n||!i||n.parent===i)||!!(r.done&&n&&"layers"in e&&((s=e.layers)!=null&&s.length))&&e.layers.some(a=>this.isCreatingLayerViewsForLayer(a,n))}_refreshCollections(){for(const[e,i]of this._layersToLayerViews)this._populateLayerViewsOwners(mu(this,e),mu(this,i),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_clearCollections(){var e;for(const i of this._layersToLayerViews.values())(e=mu(this,i))==null||e.removeAll()}_populateLayerViewsOwners(e,i,r){if(!e||!i)return void(i==null?void 0:i.removeAll());let n=0;for(const s of e){const a=this._layerLayerViewInfoMap.get(s);if(!(a!=null&&a.layerView))continue;const{layerView:o}=a;o.layer=s,o.parent=r,i.at(n)!==o&&i.splice(n,0,o),"layers"in s&&j8e(o)&&this._populateLayerViewsOwners(s.layers,o.layerViews,o),++n}n<i.length&&i.splice(n)}_createLayerView(e){var r;e.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(e)&&this.layerViewImporter.importLayerView(e);const i=new N8e(e,this.view,this.layerViewImporter);(r=i.promise)==null||r.then(()=>this._refreshCollections(),n=>{n&&(In(n)||n.name==="cancelled:layerview-create")||Ie.getLogger(this).error(`Failed to create layerview for layer title:'${e.title??"no title"}', id:'${e.id??"no id"}' of type '${e.type}'.`,{layer:e,error:n}),this.destroyed||this._refreshCollections()}),this._layerLayerViewInfoMap.set(e,i),this.view.ready&&i.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};d([f()],dl.prototype,"_workPromise",void 0),d([f({readOnly:!0})],dl.prototype,"_watchUpdatingTracking",void 0),d([f({readOnly:!0})],dl.prototype,"_layersToLayerViews",void 0),d([f({constructOnly:!0})],dl.prototype,"layerviewMapping",void 0),d([f({readOnly:!0})],dl.prototype,"_rootCollectionNames",null),d([f({constructOnly:!0})],dl.prototype,"layerViewFilter",void 0),d([f()],dl.prototype,"layerViewImporter",void 0),d([f()],dl.prototype,"supportsGround",void 0),d([f({readOnly:!0})],dl.prototype,"updating",null),d([f({readOnly:!0})],dl.prototype,"updatingRemaining",null),d([f({constructOnly:!0})],dl.prototype,"view",void 0),dl=d([V("esri.views.support.LayerViewManager")],dl);const V8e=dl;let wx=class extends et{constructor(e){super(e),this.featureTitleFields=!1,this.utilityNetworkFields=!1,this.globalIdField=!1}};d([f()],wx.prototype,"featureTitleFields",void 0),d([f()],wx.prototype,"utilityNetworkFields",void 0),d([f()],wx.prototype,"globalIdField",void 0),wx=d([V("esri.views.support.RequiredFieldsOptions")],wx);const U8e=wx;var _x,Tv;let _t=(Tv=class extends PD(QZ){constructor(e){super(e),this._userSpatialReference=null,this.handles=new FT,this.updatingHandles=new aw,this.allLayerViews=new Id({getCollections:()=>this.layerviewCollections,getChildrenFunction:q8e}),this.analyses=new sT,this.basemapView=null,this.dependencies={popup:void 0},this.displayFilterEnabled=!0,this.fatalError=null,this.graphics=new M2,this.typeSpecificPreconditionsReady=!0,this.layerViews=new Ue,this.magnifier=new P0e,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this._readyStateWaitingTask=null,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this._lowPriorityCursorHandles=new Ue,this._highPriorityCursorHandles=new Ue,this.input=new E8e,this.navigation=new a5,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new z0e(this),this.persistableViewModels=new Ue,this.requiredFieldsOptions=new U8e,this._isValid=!1,this._readyCycleForced=!1,this._lockedSpatialReference=null,this._userTimeZone=null,this._lockedTimeZone=null,this._userTimeExtent=null,this._lockedTimeExtent=null,this.theme=null,this.handles.add(be(()=>this.preconditionsReady,i=>{var n,s,a,o;const r=this.ready;if(i?(this._lockedSpatialReference=this.spatialReference,this._lockedTimeZone=this.timeZone,this._lockedTimeExtent=this.timeExtent,_x.views.add(this)):(this._lockedSpatialReference=null,_x.views.remove(this)),this.notifyChange("spatialReference"),!i&&r)(n=this.toolViewManager)==null||n.detach(),(s=this.analysisViewManager)==null||s.detach(),(a=this.layerViewManager)==null||a.clear(),this._teardown();else if(i&&!r){try{this._startup()}catch(l){return void queueMicrotask(()=>{this.fatalError=new ae("view:startup-error","View._startup failed",l)})}(o=this.analysisViewManager)==null||o.attach(),this.toolViewManager.attach()}},Nd))}initialize(){this.addResolvingPromise(Promise.all([this.loadAsyncDependencies(),this._validateWithErrorDisplay()]).then(()=>(this._isValid=!0,kT(()=>this.ready)))),this.basemapView=new NBe({view:this}),this.layerViewManager=new V8e({view:this,layerViewFilter:e=>{var i;return((i=this.layerViewFilter)==null?void 0:i.call(this,e))??!0},layerViewImporter:{importLayerView:e=>this.importLayerView(e),hasLayerViewModule:e=>this.hasLayerViewModule(e)},layerviewMapping:this._layerToLayerviewMapping}),this.toolViewManager=new _h({view:this}),this.selectionManager=new YBe({view:this}),this.addHandles([cn(()=>this.readyState==="map-content-error"&&!this.spatialReference,()=>{Ie.getLogger(this).warn("#spatialReference","no spatial reference could be derived from the currently added map layers")}),be(()=>this.initialExtentRequired,e=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:e},Ka),be(()=>this.ready,e=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=e,this.defaultsFromMap.userSpatialReference=e?this.spatialReference:this._userSpatialReference)},Nd),be(()=>this._userSpatialReference,e=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=e)},Ka)])}get _layerToLayerviewMapping(){return _x._layerToLayerview}destroy(){var e;this.destroyed||(_x.views.remove(this),this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=Or(this.graphics),this.analyses=Or(this.analyses),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),this.analysisViewManager=Or(this.analysisViewManager),this.toolViewManager=Or(this.toolViewManager),this.layerViewManager=Or(this.layerViewManager),this.selectionManager=Or(this.selectionManager),this.basemapView=Or(this.basemapView),(e=this.layerViews)==null||e.forEach(i=>i.destroy()),this.layerViews.length=0,this.invalidate(),this.handles.destroy(),this.map=Or(this.map),this.updatingHandles.destroy())}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return Ie.getLogger(this).error("#toMap()","Not implemented on this instance of View"),null}get activeTool(){var e;return(e=this.toolViewManager)==null?void 0:e.activeTool}set activeTool(e){this.toolViewManager&&(this.toolViewManager.activeTool=e)}get layerviewCollections(){var e,i,r;return[(e=this.basemapView)==null?void 0:e.baseLayerViews,(i=this.basemapView)==null?void 0:i.groundLayerViews,this.layerViews,(r=this.basemapView)==null?void 0:r.referenceLayerViews]}get animation(){return this._get("animation")}set animation(e){this._set("animation",e)}get center(){return null}get defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new Ar({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:(e,i)=>this.getSpatialReferenceSupport(e,i),...this.defaultsFromMapSettings})}get extent(){return this._get("extent")}set extent(e){this._set("extent",e)}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get highlights(){return this._get("highlights")??T8e()}set highlights(e){this._set("highlights",Mp(e,this._get("highlights"),Ue.ofType(wv)))}get interacting(){return this.navigating}get navigating(){return!1}get preconditionsReady(){var e;return!this.destroying&&!this.destroyed&&!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||a9(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._lockedSpatialReference&&!((e=this.defaultsFromMap)!=null&&e.ready)||!this.typeSpecificPreconditionsReady)}get resolution(){return 0}set map(e){e!==this._get("map")&&(e!=null&&e.destroyed&&(Ie.getLogger(this).warn("#map","The provided map is already destroyed",{map:e}),e=null),a9(e)&&e.load().catch(()=>{}),this.constructed&&!this.destroyed&&(this.forceReadyCycle(),this._lockedSpatialReference=null),this._set("map",e))}get readyState(){var e,i,r,n;if(this.destroyed)return this._get("readyState");if(!this.map)return"missing-map";if("container"in this&&!this.container)return"missing-container";if(this.fatalError)return"rendering-error";if((((e=this.defaultsFromMap)==null?void 0:e.ready)??!1)&&!this.spatialReference){const s=!("loaded"in this.map)||this.map.loaded,a=this.map.ground.loaded,o=((i=this.map.basemap)==null?void 0:i.loaded)??!0;return s&&o&&a&&!((r=this.map)!=null&&r.allLayers.length)?"empty-map":(this._readyStateWaitingTask||(this._readyStateWaitingTask=Zm(l=>Ck(ve("view-readyState-waiting-delay"),null,l)),this.addHandles(this._readyStateWaitingTask),this.addHandles(this._readyStateWaitingTask,"ready-state-task")),(n=this._readyStateWaitingTask)!=null&&n.finished?"map-content-error":"loading")}return this._readyStateWaitingTask=Fa(this._readyStateWaitingTask),this.removeHandles("ready-state-task"),this.ready?"ready":"loading"}get spatialReference(){var i,r;const e=this._userSpatialReference||this._lockedSpatialReference||this.getDefaultSpatialReference()||null;if(e&&((r=(i=this.defaultsFromMap)==null?void 0:i.required)!=null&&r.heightModelInfo)){const n=e.clone();return n.vcsWkid=this.defaultsFromMap.vcsWkid,n.latestVcsWkid=this.defaultsFromMap.latestVcsWkid,n}return e}set spatialReference(e){const i=!Cs(e,this._get("spatialReference"));this._set("_userSpatialReference",e),i&&(this._set("spatialReference",e),this._spatialReferenceChanged(e))}_spatialReferenceChanged(e){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get timeExtent(){return this._userTimeExtent??this._lockedTimeExtent??this.getDefaultTimeExtent()??null}set timeExtent(e){this._userTimeExtent=e}get timeZone(){return this._userTimeZone??this._lockedTimeZone??this.getDefaultTimeZone()??Rl}set timeZone(e){this._userTimeZone=e,fDe(e)||Ie.getLogger(this).warn("#timeZone",`the parsed value '${e}' may not be a valid IANA time zone`)}get tools(){var e;return(e=this.toolViewManager)==null?void 0:e.tools}get initialExtent(){var e;return(e=this.defaultsFromMap)==null?void 0:e.extent}get cursor(){var e,i,r;return((e=this.toolViewManager)==null?void 0:e.cursor)??((i=this._highPriorityCursorHandles.at(-1))==null?void 0:i.cursor)??((r=this._lowPriorityCursorHandles.at(-1))==null?void 0:r.cursor)??"default"}acquireCursor(e,i="low"){const r=i==="high"?this._highPriorityCursorHandles:this._lowPriorityCursorHandles,n={cursor:e},s=Ii(()=>r.remove(n));return r.add(n),this.addHandles(s),s}get size(){return[this.width,this.height]}get effectiveTheme(){return this.theme??new qq}whenLayerView(e){var i;return((i=this.layerViewManager)==null?void 0:i.whenLayerView(e))??Promise.reject()}getDefaultSpatialReference(){var e;return(e=this.defaultsFromMap)==null?void 0:e.spatialReference}getDefaultHeightModelInfo(){var e;return(this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)??((e=this.defaultsFromMap)==null?void 0:e.heightModelInfo)??null}getDefaultTimeZone(){return null}getDefaultTimeExtent(){return null}getSurface(){return null}importLayerView(e){throw new ae("view:importLayerView-missing","importLayerView() not implemented")}hasLayerViewModule(e){return!1}async validate(){}async loadAsyncDependencies(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(e){return this.getSpatialReferenceSupport(e)!=null}when(e,i){return this.isResolved()&&!this.ready&&Ie.getLogger(this).warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(e,i)}forceReadyCycle(){this.ready&&(cn(()=>this.destroyed||this.preconditionsReady===!1,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}on(e,i){return super.on(e,i)}addAndActivateTool(e){this.toolViewManager.tools.add(e),this.activeTool=e}tryFatalErrorRecovery(){this.fatalError=null}async _validateWithErrorDisplay(){try{await this.validate()}catch(e){const i=document.createElement("div");i.setAttribute("style","display: flex; flex-direction: column; gap: 8px; padding: 20px; height: 100%; justify-content: center; color: black; background: white; font-family: sans-serif;");const r=document.createElement("div");r.innerHTML="Unable to display map. WebGL2 support is required.",r.setAttribute("style","font-size: 24px; font-weight: bold;");const n=document.createElement("div");n.innerHTML="Ensure that your browser and hardware meet the minimum requirements.",n.setAttribute("style","font-size: 18px;");const s=document.createElement("a");s.innerHTML="https://esriurl.com/webgl-faq",s.target="_blank",s.setAttribute("style","font-size: 18px;"),s.href="https://esriurl.com/webgl-faq",i.appendChild(r),i.appendChild(n),i.appendChild(s);const a=this.getSurface();throw a&&a.appendChild(i),e}}},_x=Tv,Tv._layerToLayerview=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.basemap.groundLayers","view.basemapView.groundLayerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"],["view.map.layers","view.layerViews"]],Tv.views=new Ue,Tv);d([f()],_t.prototype,"_userSpatialReference",void 0),d([f()],_t.prototype,"activeTool",null),d([f({readOnly:!0})],_t.prototype,"allLayerViews",void 0),d([f({readOnly:!0})],_t.prototype,"layerviewCollections",null),d([f(W8(sT,"analyses"))],_t.prototype,"analyses",void 0),d([f()],_t.prototype,"animation",null),d([f()],_t.prototype,"basemapView",void 0),d([f()],_t.prototype,"center",null),d([f()],_t.prototype,"defaultsFromMapSettings",null),d([f()],_t.prototype,"defaultsFromMap",null),d([f()],_t.prototype,"dependencies",void 0),d([f()],_t.prototype,"displayFilterEnabled",void 0),d([f({type:Yt})],_t.prototype,"extent",null),d([f()],_t.prototype,"fatalError",void 0),d([f(W8(M2,"graphics"))],_t.prototype,"graphics",void 0),d([f({readOnly:!0,type:Po})],_t.prototype,"heightModelInfo",null),d([f({type:Ue.ofType(wv)})],_t.prototype,"highlights",null),d([f({readOnly:!0})],_t.prototype,"interacting",null),d([f({constructOnly:!0})],_t.prototype,"layerViewFilter",void 0),d([f({readOnly:!0})],_t.prototype,"navigating",null),d([f({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_lockedSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],_t.prototype,"preconditionsReady",null),d([f({readOnly:!0})],_t.prototype,"typeSpecificPreconditionsReady",void 0),d([f({type:Ue,readOnly:!0})],_t.prototype,"layerViews",void 0),d([f()],_t.prototype,"resolution",null),d([f({type:P0e})],_t.prototype,"magnifier",void 0),d([f({value:null,type:fbe})],_t.prototype,"map",null),d([f()],_t.prototype,"padding",void 0),d([f({readOnly:!0})],_t.prototype,"ready",void 0),d([f()],_t.prototype,"_readyStateWaitingTask",void 0),d([f({readOnly:!0})],_t.prototype,"readyState",null),d([f({type:tt})],_t.prototype,"spatialReference",null),d([f()],_t.prototype,"stationary",null),d([f({type:Ji})],_t.prototype,"timeExtent",null),d([f({type:String,nonNullable:!0})],_t.prototype,"timeZone",null),d([f()],_t.prototype,"tools",null),d([f()],_t.prototype,"toolViewManager",void 0),d([f({readOnly:!0})],_t.prototype,"type",void 0),d([f({type:Number})],_t.prototype,"scale",void 0),d([f({readOnly:!0})],_t.prototype,"updating",void 0),d([f({readOnly:!0})],_t.prototype,"initialExtentRequired",void 0),d([f({readOnly:!0})],_t.prototype,"initialExtent",null),d([f()],_t.prototype,"cursor",null),d([f({readOnly:!0})],_t.prototype,"input",void 0),d([f({type:a5,nonNullable:!0})],_t.prototype,"navigation",void 0),d([f()],_t.prototype,"layerViewManager",void 0),d([f()],_t.prototype,"analysisViewManager",void 0),d([f()],_t.prototype,"selectionManager",void 0),d([f()],_t.prototype,"width",void 0),d([f()],_t.prototype,"height",void 0),d([f({readOnly:!0})],_t.prototype,"resizing",void 0),d([f({value:null,readOnly:!0})],_t.prototype,"size",null),d([f({readOnly:!0})],_t.prototype,"suspended",void 0),d([f({readOnly:!0})],_t.prototype,"viewEvents",void 0),d([f({readOnly:!0})],_t.prototype,"persistableViewModels",void 0),d([f()],_t.prototype,"_isValid",void 0),d([f()],_t.prototype,"_readyCycleForced",void 0),d([f()],_t.prototype,"_lockedSpatialReference",void 0),d([f()],_t.prototype,"_userTimeZone",void 0),d([f()],_t.prototype,"_lockedTimeZone",void 0),d([f()],_t.prototype,"_userTimeExtent",void 0),d([f()],_t.prototype,"_lockedTimeExtent",void 0),d([f({type:qq})],_t.prototype,"theme",void 0),d([f({readOnly:!0,type:qq})],_t.prototype,"effectiveTheme",null),_t=_x=d([V("esri.views.View")],_t);const S6=globalThis.$arcgis;S6&&!S6.views&&Object.defineProperty(S6,"views",{configurable:!1,enumerable:!0,writable:!1,value:_t.views});const B8e=_t;function q8e(t){return t.layerViews}function Tn(){return[0,0]}function H8e(t){return[t[0],t[1]]}function Zk(t,e){return[t,e]}function G8e(t,e){return[t,e]}function W8e(t,e=Tn()){const i=Math.min(2,t.length);for(let r=0;r<i;++r)e[r]=t[r];return e}function J0e(){return Tn()}function X0e(){return Zk(1,1)}function Q0e(){return Zk(1,0)}function K0e(){return Zk(0,1)}const Z8e=J0e(),Y8e=X0e(),J8e=Q0e(),X8e=K0e();Object.freeze(Object.defineProperty({__proto__:null,ONES:Y8e,UNIT_X:J8e,UNIT_Y:X8e,ZEROS:Z8e,clone:H8e,create:Tn,freeze:G8e,fromArray:W8e,fromValues:Zk,ones:X0e,unitX:Q0e,unitY:K0e,zeros:J0e},Symbol.toStringTag,{value:"Module"}));function Q8e(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function Yk(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function K8e(t,e,i,r,n,s,a){return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t[4]=s,t[5]=a,t}function IY(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],a=e[4],o=e[5];let l=i*s-r*n;return l?(l=1/l,t[0]=s*l,t[1]=-r*l,t[2]=-n*l,t[3]=i*l,t[4]=(n*o-s*a)*l,t[5]=(r*a-i*o)*l,t):null}function e9e(t){return t[0]*t[3]-t[1]*t[2]}function Gh(t,e,i){const r=e[0],n=e[1],s=e[2],a=e[3],o=e[4],l=e[5],c=i[0],h=i[1],m=i[2],g=i[3],v=i[4],b=i[5];return t[0]=r*c+s*h,t[1]=n*c+a*h,t[2]=r*m+s*g,t[3]=n*m+a*g,t[4]=r*v+s*b+o,t[5]=n*v+a*b+l,t}function Rv(t,e,i){const r=e[0],n=e[1],s=e[2],a=e[3],o=e[4],l=e[5],c=Math.sin(i),h=Math.cos(i);return t[0]=r*h+s*c,t[1]=n*h+a*c,t[2]=r*-c+s*h,t[3]=n*-c+a*h,t[4]=o,t[5]=l,t}function Jk(t,e,i){const r=e[0],n=e[1],s=e[2],a=e[3],o=e[4],l=e[5],c=i[0],h=i[1];return t[0]=r*c,t[1]=n*c,t[2]=s*h,t[3]=a*h,t[4]=o,t[5]=l,t}function Ep(t,e,i){const r=e[0],n=e[1],s=e[2],a=e[3],o=e[4],l=e[5],c=i[0],h=i[1];return t[0]=r,t[1]=n,t[2]=s,t[3]=a,t[4]=r*c+s*h+o,t[5]=n*c+a*h+l,t}function o5(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=i,t[2]=-i,t[3]=r,t[4]=0,t[5]=0,t}function ewe(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function MY(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function t9e(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function i9e(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+1)}function r9e(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t}function twe(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t}function n9e(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t}function s9e(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t[4]=e[4]+i[4]*r,t[5]=e[5]+i[5]*r,t}function a9e(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function o9e(t,e){const i=t[0],r=t[1],n=t[2],s=t[3],a=t[4],o=t[5],l=e[0],c=e[1],h=e[2],m=e[3],g=e[4],v=e[5],b=qo();return Math.abs(i-l)<=b*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(r-c)<=b*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(n-h)<=b*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(s-m)<=b*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(a-g)<=b*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(o-v)<=b*Math.max(1,Math.abs(o),Math.abs(v))}const l9e=Gh,c9e=twe;Object.freeze(Object.defineProperty({__proto__:null,add:r9e,copy:Q8e,determinant:e9e,equals:o9e,exactEquals:a9e,frob:i9e,fromRotation:o5,fromScaling:ewe,fromTranslation:MY,identity:Yk,invert:IY,mul:l9e,multiply:Gh,multiplyScalar:n9e,multiplyScalarAndAdd:s9e,rotate:Rv,scale:Jk,set:K8e,str:t9e,sub:c9e,subtract:twe,translate:Ep},Symbol.toStringTag,{value:"Module"}));function kp(){return[1,0,0,1,0,0]}function u9e(t){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function d9e(t,e,i,r,n,s){return[t,e,i,r,n,s]}const h9e=kp();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:h9e,clone:u9e,create:kp,fromValues:d9e},Symbol.toStringTag,{value:"Module"}));const uO={102100:{maxX:20037508342788905e-9,minX:-20037508342788905e-9,plus180Line:new _n({paths:[[[20037508342788905e-9,-20037508342788905e-9],[20037508342788905e-9,20037508342788905e-9]]],spatialReference:tt.WebMercator}),minus180Line:new _n({paths:[[[-20037508342788905e-9,-20037508342788905e-9],[-20037508342788905e-9,20037508342788905e-9]]],spatialReference:tt.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new _n({paths:[[[180,-180],[180,180]]],spatialReference:tt.WGS84}),minus180Line:new _n({paths:[[[-180,-180],[-180,180]]],spatialReference:tt.WGS84})}};function U0(t,e){return Math.ceil((t-e)/(2*e))}function iwe(t,e){const i=E2(t);for(const r of i)for(const n of r)n[0]+=e;return t}function E2(t){return Un(t)?t.rings:t.paths}function p9e(t,e){return e?{...e,query:{...t,...e.query}}:{query:t}}function CY(t){return typeof t=="string"?Cn(t):he(t)}function f9e(t,e,i){const r={};for(const n in t){if(n==="declaredClass")continue;const s=t[n];if(s!=null&&typeof s!="function")if(Array.isArray(s))r[n]=s.map(a=>f9e(a));else if(typeof s=="object")if(s.toJSON){const a=s.toJSON(i==null?void 0:i[n]);r[n]=e?a:JSON.stringify(a)}else r[n]=e?s:JSON.stringify(s);else r[n]=s}return r}function m9e(t,e){var i;return t?e&&sZ(t)?e:nZ(t)??((i=Rt==null?void 0:Rt.findCredential(t))==null?void 0:i.token):null}async function WTt(t,e,i){const r=m9e(t,e);if(r)return r;!Rt&&Ti.request.useIdentity&&await de(()=>import("./IdentityManager-BACaG2Yp.js"),[]);const n=await Rt.getCredential(t,i);return n==null?void 0:n.token}async function g9e(t,e,i,r){const n=CY(t),s=e[0].spatialReference,a={...r,responseType:"json",query:{...n.query,f:"json",sr:ZS(s),target:JSON.stringify({geometryType:g_(e[0]),geometries:e}),cutter:JSON.stringify(i)}},o=await mi(n.path+"/cut",a),{cutIndexes:l,geometries:c=[]}=o.data;return{cutIndexes:l,geometries:c.map(h=>{const m=jp(h);return m.spatialReference=s,m})}}function y9e(t){return{geometryType:g_(t[0]),geometries:t.map(e=>e.toJSON())}}function rwe(t,e,i){const r=qRe(e);return t.map(n=>{const s=r.fromJSON(n);return s.spatialReference=i,s})}async function v9e(t,e,i){const r=typeof t=="string"?Cn(t):t,n=e[0].spatialReference,s=g_(e[0]),a={...i,query:{...r.query,f:"json",sr:ZS(n),geometries:JSON.stringify(y9e(e))}},{data:o}=await mi(r.path+"/simplify",a);return rwe(o.geometries,s,n)}const nwe=()=>Ie.getLogger("esri.geometry.support.normalizeUtils");function b9e(t){return t.type==="polygon"}function w9e(t){return t[0].type==="polygon"}function _9e(t){return t[0].type==="polyline"}function Jne(t){const e=[];let i=0,r=0;for(let n=0;n<t.length;n++){const s=t[n];let a=null;for(let o=0;o<s.length;o++)a=s[o],e.push(a),o===0?(i=a[0],r=i):(i=Math.min(i,a[0]),r=Math.max(r,a[0]));a&&e.push([(i+r)/2,0])}return e}function x9e(t,e){if(!(t instanceof _n||t instanceof Nr)){const n="straightLineDensify: the input geometry is neither polyline nor polygon";throw nwe().error(n),new ae("internal:geometry",n)}const i=E2(t),r=[];for(const n of i){const s=[];r.push(s),s.push([n[0][0],n[0][1]]);for(let a=0;a<n.length-1;a++){const o=n[a][0],l=n[a][1],c=n[a+1][0],h=n[a+1][1],m=Math.sqrt((c-o)*(c-o)+(h-l)*(h-l)),g=(h-l)/m,v=(c-o)/m,b=m/e;if(b>1){for(let k=1;k<=b-1;k++){const A=k*e,L=v*A+o,z=g*A+l;s.push([L,z])}const x=(m+Math.floor(b-1)*e)/2,$=v*x+o,M=g*x+l;s.push([$,M])}s.push([c,h])}}return b9e(t)?new Nr({rings:r,spatialReference:t.spatialReference}):new _n({paths:r,spatialReference:t.spatialReference})}function Xne(t,e,i){if(e){const r=x9e(t,1e6);t=m$(r,!0)}return i&&(t=iwe(t,i)),t}function Qne(t,e,i){if(Array.isArray(t)){const r=t[0];if(r>e){const n=U0(r,e);t[0]=r+n*(-2*e)}else if(r<i){const n=U0(r,i);t[0]=r+n*(-2*i)}}else{const r=t.x;if(r>e){const n=U0(r,e);t=t.clone().offset(n*(-2*e),0)}else if(r<i){const n=U0(r,i);t=t.clone().offset(n*(-2*i),0)}}return t}function $9e(t,e){let i=-1;for(let r=0;r<e.cutIndexes.length;r++){const n=e.cutIndexes[r],s=e.geometries[r],a=E2(s);for(let o=0;o<a.length;o++){const l=a[o];l.some(c=>{if(c[0]<180)return!0;{let h=0;for(let g=0;g<l.length;g++){const v=l[g][0];h=v>h?v:h}h=Number(h.toFixed(9));const m=-360*U0(h,180);for(let g=0;g<l.length;g++){const v=s.getPoint(o,g);s.setPoint(o,g,v.clone().offset(m,0))}return!0}})}if(n===i){if(w9e(t))for(const o of E2(s))t[n]=t[n].addRing(o);else if(_9e(t))for(const o of E2(s))t[n]=t[n].addPath(o)}else i=n,t[n]=s}return t}async function swe(t,e,i){if(!Array.isArray(t))return swe([t],e);e&&typeof e!="string"&&nwe().warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const r=typeof e=="string"?e:(e==null?void 0:e.url)??Ti.geometryServiceUrl;let n,s,a,o,l,c,h,m,g=0;const v=[],b=[];for(const L of t)if(L!=null)if(n||(n=L.spatialReference,s=Bo(n),a=n.isWebMercator,c=a?102100:4326,o=uO[c].maxX,l=uO[c].minX,h=uO[c].plus180Line,m=uO[c].minus180Line),s)if(L.type==="mesh")b.push(L);else if(L.type==="point")b.push(Qne(L.clone(),o,l));else if(L.type==="multipoint"){const z=L.clone();z.points=z.points.map(U=>Qne(U,o,l)),b.push(z)}else if(L.type==="extent"){const z=L.clone()._normalize(!1,!1,s);b.push(z.rings?new Nr(z):z)}else if(L.extent){const z=L.extent,U=U0(z.xmin,l)*(2*o);let B=U===0?L.clone():iwe(L.clone(),U);z.offset(U,0);let{xmin:X,xmax:J}=z;X=Number(X.toFixed(9)),J=Number(J.toFixed(9)),z.intersects(h)&&J!==o?(g=J>g?J:g,B=Xne(B,a),v.push(B),b.push("cut")):z.intersects(m)&&X!==l?(g=J*(2*o)>g?J*(2*o):g,B=Xne(B,a,360),v.push(B),b.push("cut")):b.push(B)}else b.push(L.clone());else b.push(L);else b.push(L);let x=U0(g,o),$=-90;const M=x,k=new _n;for(;x>0;){const L=360*x-180;k.addPath([[L,$],[L,-1*$]]),$*=-1,x--}if(v.length>0&&M>0){const L=$9e(v,await g9e(r,v,k,i)),z=[],U=[];for(let J=0;J<b.length;J++){const Q=b[J];if(Q!=="cut")U.push(Q);else{const le=L.shift(),ie=t[J];ie!=null&&ie.type==="polygon"&&ie.rings&&ie.rings.length>1&&le.rings.length>=ie.rings.length?(z.push(le),U.push("simplify")):U.push(a?Dm(le):le)}}if(!z.length)return U;const B=await v9e(r,z,i),X=[];for(let J=0;J<U.length;J++){const Q=U[J];Q!=="simplify"?X.push(Q):X.push(a?Dm(B.shift()):B.shift())}return X}const A=[];for(let L=0;L<b.length;L++){const z=b[L];if(z!=="cut")A.push(z);else{const U=v.shift();A.push(a===!0?Dm(U):U)}}return A}function S9e(t){if(!t)return null;const e=t.extent;if(!e)return null;const i=t.spatialReference&&Bo(t.spatialReference);if(!i)return e;const[r,n]=i.valid,s=2*n,{width:a}=e;let o,{xmin:l,xmax:c}=e;if([l,c]=[c,l],t.type==="extent"||a===0||a<=n||a>s||l<r||c>n)return e;switch(t.type){case"polygon":if(!(t.rings.length>1))return e;o=Jne(t.rings);break;case"polyline":if(!(t.paths.length>1))return e;o=Jne(t.paths);break;case"multipoint":o=t.points}const h=e.clone();for(let m=0;m<o.length;m++){let g=o[m][0];g<0?(g+=n,c=Math.max(g,c)):(g-=n,l=Math.min(g,l))}return h.xmin=l,h.xmax=c,h.width<a?(h.xmin-=n,h.xmax-=n,h):e}function EY(t,e,i){const r=Bo(i);if(r==null)return t;const[n,s]=r.valid,a=2*s;let o=0,l=0;e>s?o=Math.ceil(Math.abs(e-s)/a):e<n&&(o=-Math.ceil(Math.abs(e-n)/a)),t>s?l=Math.ceil(Math.abs(t-s)/a):t<n&&(l=-Math.ceil(Math.abs(t-n)/a));let c=t+(o-l)*a;const h=c-e;return h>s?c-=a:h<n&&(c+=a),c}function ZTt(t,e){const i=kY(e);return(i==null?void 0:i.normalize(t))??t}function kY(t){const e=Bo(t);if(e==null)return null;const[i,r]=e.valid;return new mD(i,r)}const YTt=kY(tt.WGS84);kY(tt.WebMercator);const awe=96,owe=39.37,T9e=180/Math.PI;function lwe(t){return t.wkid?t:t.spatialReference||tt.WGS84}function AY(t,e){return e.type?Vn(t,e.x,e.y):F$(t,e)}function cwe(t){return $u(t)}function l5(t,e,i=0){let r=t.width,n=t.height;if(i!==0){const o=RT(i),l=Math.abs(Math.cos(o)),c=Math.abs(Math.sin(o));r=t.width*l+t.height*c,n=t.width*c+t.height*l}const s=Math.max(1,e[0]),a=Math.max(1,e[1]);return Math.max(r/s,n/a)*O9e(t.spatialReference)}async function vC(t,e,i,r){var o,l,c;let n,s;if(!t||Array.isArray(t)&&!t.length)return null;if(Ue.isCollection(t)&&(t=t.toArray()),Array.isArray(t)&&t.length&&typeof t[0]=="object"){const h=t.every(v=>"attributes"in v),m=t.some(v=>!v.geometry);let g=t;if(h&&m&&e&&e.allLayerViews){const v=new Map;for(const M of t){const k=M.layer,A=v.get(k)||[],L=M.attributes[k.objectIdField];L!=null&&A.push(L),v.set(k,A)}const b=[];v.forEach((M,k)=>{var L;const A=(L=e.allLayerViews)==null?void 0:L.find(z=>z.layer.id===k.id);if(A&&"queryFeatures"in A){const z=k.createQuery();z.objectIds=M,z.returnGeometry=!0,b.push(A.queryFeatures(z))}});const x=await Promise.all(b),$=[];for(const M of x)if(M&&M.features&&M.features.length)for(const k of M.features)k.geometry!=null&&$.push(k.geometry);g=$}for(const v of g)r=await vC(v,e,i,r);return r}if(Array.isArray(t)&&t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number")n=new St(t);else if(t instanceof Rs)n=t;else if("geometry"in t){if(t.geometry)n=t.geometry;else if(t.layer){const h=t.layer,m=(o=e.allLayerViews)==null?void 0:o.find(g=>g.layer.id===h.id);if(m&&"queryFeatures"in m){const g=h.createQuery();g.objectIds=[t.attributes[h.objectIdField]],g.returnGeometry=!0;const v=await m.queryFeatures(g);n=(c=(l=v==null?void 0:v.features)==null?void 0:l[0])==null?void 0:c.geometry}}}if(n==null)return null;switch(n.type){case"point":s=new Yt({xmin:n.x,ymin:n.y,xmax:n.x,ymax:n.y,spatialReference:n.spatialReference});break;case"extent":case"multipoint":case"polygon":case"polyline":s=S9e(n);break;default:s=n.extent}if(!s)return null;ng()||jd(s.spatialReference,i)||await Ov();const a=sg(s,i);if(!a)return null;if(r){const h=a.center,m=h.clone();m.x=EY(h.x,r.center.x,i),m.x!==h.x&&a.centerAt(m),r=r.union(a)}else r=a;return r}function I9e(t){var e;if(t&&(!Array.isArray(t)||typeof t[0]!="number")&&(typeof t=="object"||Array.isArray(t)&&typeof t[0]=="object")){if("layer"in t&&((e=t.layer)==null?void 0:e.minScale)!=null&&t.layer.maxScale!=null){const i=t.layer;return{min:i.minScale,max:i.maxScale}}if(Array.isArray(t)&&t.length&&t.every(i=>"layer"in i)){let i=0,r=0;for(const n of t){const s=n.layer;s!=null&&s.minScale&&s.maxScale&&(i=s.minScale<i?s.minScale:i,r=s.maxScale>r?s.maxScale:r)}return i&&r?{min:i,max:r}:null}}}function Kne(t,e){const i=lwe(t);return Cs(i,e)||i.imageCoordinateSystem||e.imageCoordinateSystem?t:sg(t,e)}async function M9e(t,e){var $;if(!t||!e)return new Ds({targetGeometry:new St,scale:0,rotation:0});let i=e.spatialReference;const{constraints:r,padding:n,viewpoint:s,size:a}=e,o=[n?a[0]-n.left-n.right:a[0],n?a[1]-n.top-n.bottom:a[1]];let l=null;t instanceof Ds?l=t:t.viewpoint?l=t.viewpoint:t.target&&t.target.declaredClass==="esri.Viewpoint"&&(l=t.target);let c=null;l!=null&&l.targetGeometry?c=l.targetGeometry:t instanceof Yt?c=t:t instanceof Rs?c=await vC(t,e,i):t&&(c=await vC(t.center,e,i)||await vC(t.target,e,i)||await vC(t,e,i)),!c&&(s!=null&&s.targetGeometry)?c=s.targetGeometry:!c&&e.extent&&(c=e.extent),i||(i=lwe(e.spatialReference||e.extent||c)),ng()||Cs(c.spatialReference,i)||jd(c.spatialReference,i)||await Ov();const h=Kne(c,i),m="center"in h?h.center:h;e.pickClosestTarget!==!1&&m.type==="point"&&(($=s.targetGeometry)==null?void 0:$.type)==="point"&&(m.x=EY(m.x,s.targetGeometry.x,m.spatialReference));let g=0;l?g=l.rotation:t.hasOwnProperty("rotation")?g=t.rotation:s&&(g=s.rotation);let v=0;v=(l==null?void 0:l.targetGeometry)!=null&&l.targetGeometry.type==="point"?l.scale:"scale"in t&&t.scale?t.scale:"zoom"in t&&t.zoom!==-1&&r&&r.effectiveLODs?r.zoomToScale(t.zoom):Array.isArray(c)||c.type==="point"||c.type==="extent"&&c.width===0&&c.height===0?s.scale:l5(Kne(c.extent,i),o,g);const b=I9e(t.target??t);b&&(b.min&&b.min<v?v=b.min:b.max&&b.max>v&&(v=b.max));let x=new Ds({targetGeometry:m,scale:v,rotation:g});return r&&(x=r.fit(x),r.constrainByGeometry(x),r.rotationEnabled||(x.rotation=s.rotation)),x}function lo(t,e){const i=t.targetGeometry,r=e.targetGeometry;return i.x=r.x,i.y=r.y,i.spatialReference=r.spatialReference,t.scale=e.scale,t.rotation=e.rotation,t}function C9e(t,e,i){return i?Vn(t,.5*(e[0]-i.right+i.left),.5*(e[1]-i.bottom+i.top)):Ok(t,e,.5)}const E9e=(function(){const t=Tn();return function(e,i,r){const n=i.targetGeometry;AY(t,n);const s=.5*YT(i);return e.xmin=t[0]-s*r[0],e.ymin=t[1]-s*r[1],e.xmax=t[0]+s*r[0],e.ymax=t[1]+s*r[1],e.spatialReference=n.spatialReference,e}})();function k9e(t,e,i,r,n){var s;return Yq(t,e,i.center),t.scale=l5(i,r),(s=n==null?void 0:n.constraints)==null||s.constrain(t),t}function A9e(t,e,i,r){return LY(t,e,i,r),IY(t,t)}const uwe=(function(){const t=Tn();return function(e,i,r){return wZ(e,L9e(e,i),C9e(t,i,r))}})(),P9e=(function(){const t=kp(),e=Tn();return function(i,r,n,s){const a=YT(r),o=PY(r);return Vn(e,a,a),ewe(t,e),Rv(t,t,o),Ep(t,t,uwe(e,n,s)),Ep(t,t,[0,s.top-s.bottom]),Vn(i,t[4],t[5])}})();function YT(t){var e;return t.scale*dwe((e=t.targetGeometry)==null?void 0:e.spatialReference)}function dwe(t){return bc(t)?1/(cwe(t)*owe*awe):1}function PY(t){return bZ(t.rotation)||0}function O9e(t){return bc(t)?cwe(t)*owe*awe:1}function L9e(t,e){return Ok(t,e,.5)}const OY=(function(){const t=Tn(),e=Tn(),i=Tn();return function(r,n,s,a,o,l){return $me(t,n),Ok(e,s,.5*l),Vn(i,1/a*l,-1/a*l),MY(r,e),o&&Rv(r,r,o),Jk(r,r,i),Ep(r,r,t),r}})(),LY=(function(){const t=Tn();return function(e,i,r,n){const s=YT(i),a=PY(i);return AY(t,i.targetGeometry),OY(e,t,r,s,a,n)}})(),F9e=(function(){const t=Tn();return function(e,i,r,n){const s=YT(i);return AY(t,i.targetGeometry),OY(e,t,r,s,0,n)}})();function hwe(t){const e=Bo(t);return e?e.valid[1]-e.valid[0]:0}function R9e(t,e){return Math.round(hwe(t)/e)}const z9e=(function(){const t=Tn(),e=Tn(),i=[0,0,0];return function(r,n,s){gE(t,r,n),I8(t,t),gE(e,r,s),I8(e,e),Tme(i,t,e);let a=Math.acos(Sme(t,e)/(yR(t)*yR(e)))*T9e;return i[2]<0&&(a=-a),isNaN(a)&&(a=0),a}})(),N9e=(function(){const t=Tn();return function(e,i,r,n){const s=e.targetGeometry;return lo(e,i),P9e(t,i,r,n),s.x+=t[0],s.y+=t[1],e}})(),Yq=function(t,e,i){lo(t,e);const r=t.targetGeometry;return r.x=i.x,r.y=i.y,r.spatialReference=i.spatialReference,t},D9e=(function(){const t=Tn();return function(e,i,r,n,s){s||(s="center"),wZ(t,r,n),Ok(t,t,.5);const a=t[0],o=t[1];switch(s){case"center":Vn(t,0,0);break;case"left":Vn(t,-a,0);break;case"top":Vn(t,0,o);break;case"right":Vn(t,a,0);break;case"bottom":Vn(t,0,-o);break;case"top-left":Vn(t,-a,o);break;case"bottom-left":Vn(t,-a,-o);break;case"top-right":Vn(t,a,o);break;case"bottom-right":Vn(t,a,-o)}return c5(e,i,t),e}})();function JTt(t,e,i){return lo(t,e),t.rotation+=i,t}function j9e(t,e,i){return lo(t,e),t.rotation=i,t}const V9e=(function(){const t=Tn();return function(e,i,r,n,s){return lo(e,i),isNaN(r)||r===0||(fwe(t,n,i,s),e.scale=i.scale*r,mwe(t,t,e,s),c5(e,e,Vn(t,t[0]-n[0],n[1]-t[1]))),e}})();function ese(t,e,i){return lo(t,e),t.scale=i,t}const pwe=(function(){const t=Tn();return function(e,i,r,n,s,a){return lo(e,i),isNaN(r)||r===0||(fwe(t,s,i,a),e.scale=i.scale*r,e.rotation+=n,mwe(t,t,e,a),c5(e,e,Vn(t,t[0]-s[0],s[1]-t[1]))),e}})(),XTt=(function(){const t=Tn(),e=Tn();return function(i,r,n,s,a,o,l){return uwe(e,o,l),bme(t,a,e),s?pwe(i,r,n,s,t,o):V9e(i,r,n,t,o)}})(),fwe=(function(){const t=kp();return function(e,i,r,n){return ro(e,i,A9e(t,r,n,1))}})(),mwe=(function(){const t=kp();return function(e,i,r,n){return ro(e,i,LY(t,r,n,1))}})(),c5=(function(){const t=Tn(),e=kp();return function(i,r,n){lo(i,r);const s=YT(r),a=i.targetGeometry;return o5(e,PY(r)),Jk(e,e,Zk(s,s)),ro(t,n,e),a.x+=t[0],a.y+=t[1],i}})();function Um(){const t=new Float32Array(6);return t[0]=1,t[3]=1,t}function U9e(t){const e=new Float32Array(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function B9e(t,e,i,r,n,s){const a=new Float32Array(6);return a[0]=t,a[1]=e,a[2]=i,a[3]=r,a[4]=n,a[5]=s,a}function gwe(t,e,i,r){const n=e[r],s=e[r+1];t[r]=i[0]*n+i[2]*s+i[4],t[r+1]=i[1]*n+i[3]*s+i[5]}function ywe(t,e,i,r=0,n=0,s=2){const a=n||e.length/s;for(let o=r;o<a;o++)gwe(t,e,i,o*s)}Object.freeze(Object.defineProperty({__proto__:null,clone:U9e,create:Um,fromValues:B9e,transform:gwe,transformMany:ywe},Symbol.toStringTag,{value:"Module"}));function AL(){const t=new Float32Array(9);return t[0]=1,t[4]=1,t[8]=1,t}function q9e(t){const e=new Float32Array(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function H9e(t,e,i,r,n,s,a,o,l){const c=new Float32Array(9);return c[0]=t,c[1]=e,c[2]=i,c[3]=r,c[4]=n,c[5]=s,c[6]=a,c[7]=o,c[8]=l,c}Object.freeze(Object.defineProperty({__proto__:null,clone:q9e,create:AL,fromValues:H9e},Symbol.toStringTag,{value:"Module"}));function ME(){return new Float32Array(2)}function G9e(t){const e=new Float32Array(2);return e[0]=t[0],e[1]=t[1],e}function l_(t,e){const i=new Float32Array(2);return i[0]=t,i[1]=e,i}function vwe(){return ME()}function bwe(){return l_(1,1)}function wwe(){return l_(1,0)}function _we(){return l_(0,1)}const W9e=vwe(),Z9e=bwe(),Y9e=wwe(),J9e=_we();Object.freeze(Object.defineProperty({__proto__:null,ONES:Z9e,UNIT_X:Y9e,UNIT_Y:J9e,ZEROS:W9e,clone:G9e,create:ME,fromValues:l_,ones:bwe,unitX:wwe,unitY:_we,zeros:vwe},Symbol.toStringTag,{value:"Module"}));function X9e(t){return t instanceof Float32Array&&t.length>=2}function Q9e(t){return Array.isArray(t)&&t.length>=2}function T6(t){return X9e(t)||Q9e(t)}var Jq;const $f=[0,0];let Hf=Jq=class extends $e{constructor(t){super(t),this._viewpoint2D={center:Tn(),rotation:0,scale:0,spatialReference:void 0},this.center=[0,0],this.extent=new Yt,this.id=0,this.inverseTransform=kp(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=kp(),this.transformNoRotation=kp(),this.displayMat3=AL(),this.displayViewMat3=AL(),this.viewMat3=AL(),this.viewMat2d=Um(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(t){this._set("pixelRatio",t),this._update()}set size(t){this._set("size",t),this._update()}set viewpoint(t){if(t){const e=this._viewpoint2D,i=t.targetGeometry;e.center[0]=i.x,e.center[1]=i.y,e.rotation=t.rotation,e.scale=t.scale,e.spatialReference=i.spatialReference}this._update()}get visibleArea(){const[t,e]=this.size;return[this.toMap([0,0],0,0),this.toMap([0,0],0,e),this.toMap([0,0],t,e),this.toMap([0,0],t,0)]}copy(t){const e=this.size,i=this.viewpoint;return i&&e?(this.viewpoint=lo(i,t.viewpoint),this._set("size",F$(e,t.size))):(this.viewpoint=t.viewpoint.clone(),this._set("size",[t.size[0],t.size[1]])),this._set("pixelRatio",t.pixelRatio),this}clone(){return new Jq({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(t,e,i){return T6(e)?ro(t,e,this.inverseTransform):($f[0]=e,$f[1]=i,ro(t,$f,this.inverseTransform))}toScreen(t,e,i){return T6(e)?ro(t,e,this.transform):($f[0]=e,$f[1]=i,ro(t,$f,this.transform))}toScreenNoRotation(t,e,i){return T6(e)?ro(t,e,this.transformNoRotation):($f[0]=e,$f[1]=i,ro(t,$f,this.transformNoRotation))}wrapMapCoordinate(t,e){F$(t,e);const[i]=e,[r]=this.center,{extent:n,spatialReference:s}=this;let{xmin:a,xmax:o}=n;if(s.isWrappable){const l=hwe(s)/2;a=Math.max(a,r-l),o=Math.min(o,r+l)}return(i<a||i>o)&&(t[0]=EY(i,r,s)),t}getScreenTransform(t,e){const{center:i}=this._viewpoint2D,r=this._get("pixelRatio")||1,n=this._get("size");return OY(t,i,n,e,0,r),t}_update(){const{center:t,spatialReference:e,scale:i,rotation:r}=this._viewpoint2D,n=this._get("pixelRatio")||1,s=this._get("size"),a=new Ds({targetGeometry:new St(t[0],t[1],e),scale:i,rotation:r});if(this._set("viewpoint",a),!s||!e||!i)return;this.resolution=YT(a),this.rotation=r,this.scale=i,this.spatialReference=e,F$(this.center,t);const o=s[0]!==0?2/s[0]:0,l=s[1]!==0?-2/s[1]:0;R$(this.displayMat3,o,0,0,0,l,0,-1,1,1);const c=Ame(this.viewMat3),h=l_(s[0]/2,s[1]/2),m=l_(-s[0]/2,-s[1]/2),g=bZ(r);C8(c,c,h),Lme(c,c,g),C8(c,c,m),vE(this.displayViewMat3,this.displayMat3,c);const v=MY(this.viewMat2d,h);return Rv(v,v,g),Ep(v,v,m),E9e(this.extent,a,s),LY(this.transform,a,s,n),IY(this.inverseTransform,this.transform),F9e(this.transformNoRotation,a,s,n),this.worldScreenWidth=R9e(this.spatialReference,this.resolution),this._set("id",this.id+1),this.notifyChange("visibleArea"),this}};d([f({readOnly:!0})],Hf.prototype,"id",void 0),d([f({value:1,json:{write:!0}})],Hf.prototype,"pixelRatio",null),d([f({json:{write:!0}})],Hf.prototype,"size",null),d([f()],Hf.prototype,"spatialReference",void 0),d([f({type:Ds,json:{write:!0}})],Hf.prototype,"viewpoint",null),d([f({readOnly:!0})],Hf.prototype,"visibleArea",null),Hf=Jq=d([V("esri.views.2d.ViewState")],Hf);const tse=Hf;var Xq,Qq;let xm=Xq=class extends et{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new Xq({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};d([f()],xm.prototype,"left",void 0),d([f()],xm.prototype,"top",void 0),d([f()],xm.prototype,"right",void 0),d([f()],xm.prototype,"bottom",void 0),xm=Xq=d([V("esri.views.2d.PaddedViewState.Padding")],xm);let xx=Qq=class extends tse{constructor(...t){super(...t),this.paddedViewState=new tse,this._updateContent=(()=>{const e=Tn();return()=>{const i=this._get("size"),r=this._get("padding");if(!i||!r)return;const n=this.paddedViewState;Vn(e,r.left+r.right,r.top+r.bottom),gE(e,i,e),F$(n.size,e);const s=n.viewpoint;s&&(this.viewpoint=s)}})(),this.addHandles(be(()=>[this.size,this.padding],()=>this._updateContent(),Nd)),this.padding=new xm,this.size=[0,0]}set padding(t){this._set("padding",t||new xm)}set viewpoint(t){if(t){this.paddedViewState.viewpoint=t;let e=t;const i=this._get("padding");i&&(e=N9e(t.clone(),t,this._get("size"),i));const{targetGeometry:r,rotation:n,scale:s}=e,{x:a,y:o,spatialReference:l}=r,c=this._viewpoint2D;c.center[0]=a,c.center[1]=o,c.rotation=n,c.scale=s,c.spatialReference=l,this._update()}}clone(){return new Qq({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};d([f()],xx.prototype,"paddedViewState",void 0),d([f({type:xm})],xx.prototype,"padding",null),d([f()],xx.prototype,"viewpoint",null),xx=Qq=d([V("esri.views.2d.PaddedViewState")],xx);const FY=xx;let bC=class extends et{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};d([f()],bC.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),d([f()],bC.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),bC=d([V("esri.views.support.debugFlags")],bC);const K9e=new bC,xwe=Symbol("Yield");let eqe=class{constructor(){this._tasks=new Array,this._numPendingTasks=Yw(0),this._readyToRun=Yw(!1)}get length(){return this._tasks.length}get updating(){return this._numPendingTasks.value>0}get readyToRun(){return this._readyToRun.value}_updateReadyToRun(){this._readyToRun.value=this._tasks.length>0}destroy(){this.cancelAll()}runTask(e){if(this.length===0)return xwe;for(;!e.done&&this._process(e);)e.madeProgress()}push(e,i,r){return this._addTask((n,s)=>new rse(n,s,e,i,r),Array.prototype.push)}unshift(e,i,r){return this._addTask((n,s)=>new rse(n,s,e,i,r),Array.prototype.unshift)}pushGenerator(e,i,r){return this._addTask((n,s)=>new tqe(n,s,e,i,r),Array.prototype.push)}_process(e){if(this._tasks.length===0)return!1;const i=this._tasks.shift();this._updateReadyToRun();try{if(co(i.signal))this._cancelTask(i,Hi());else switch(i.type){case 0:this._processSimple(i,e);break;case 1:this._processGenerator(i,e);break;case 2:this._processIterator(i,e);break;default:}}catch(r){i.reject(r)}return!0}cancelAll(){const e=Hi();for(const i of this._tasks)this._cancelTask(i,e);this._tasks.length=0,this._updateReadyToRun()}_cancelTask(e,i){if(e.abortCallback){const r=e.abortCallback(i);e.type===2&&e.iterator.return&&ise(e.iterator.return()),uo(r)?r.then(e.resolve,e.reject):e.resolve(r)}else e.type===2&&e.iterator.throw&&ise(e.iterator.throw(i)),e.reject(i)}_onIteratorResult(e,i){i.done?e.resolve(i.value):(this._tasks.unshift(e),this._updateReadyToRun())}_processSimple(e,i){const r=e.callback(i);uo(r)?r.then(e.resolve,e.reject):e.resolve(r)}_processGenerator(e,i){const r=e.generatorFunction(i),n=new iqe(e.resolve,e.reject,r,e.signal,e.abortCallback);this._processIterator(n,i)}_processIterator(e,i){const r=e.iterator.next(i);uo(r)?r.then(n=>this._onIteratorResult(e,n),e.reject):this._onIteratorResult(e,r)}_addTask(e,i){return new Promise((r,n)=>{const s=e(r,n);i.call(this._tasks,s),++this._numPendingTasks.value,this._updateReadyToRun()}).finally(()=>--this._numPendingTasks.value)}};function ise(t){uo(t)?t.then(I6,I6):I6(t)}function I6(t){In(t)||t instanceof Error||t instanceof ae||t!=null&&typeof t=="object"&&"done"in t&&t.done||Ie.getLogger("esri.layers.support.PromiseQueue").warn("Generator iterator was aborted, but it is not done.")}let RY=class{constructor(e,i,r=void 0,n=void 0){this.resolve=e,this.reject=i,this.signal=r,this.abortCallback=n}},rse=class extends RY{constructor(e,i,r,n,s){super(e,i,n,s),this.callback=r,this.type=0}},tqe=class extends RY{constructor(e,i,r,n,s){super(e,i,n,s),this.generatorFunction=r,this.type=1}},iqe=class extends RY{constructor(e,i,r,n,s){super(e,i,n,s),this.iterator=r,this.type=2}};function rqe(){return new lqe}const si={RESOURCE_CONTROLLER_IMMEDIATE:"immediate",RESOURCE_CONTROLLER:"schedule",SLIDE:"slide",STREAM_DATA_LOADER:"stream loader",ELEVATION_QUERY:"elevation query",TERRAIN_SURFACE:"terrain",SURFACE_GEOMETRY_UPDATES:"surface geometry updates",LOD_RENDERER:"LoD renderer",GRAPHICS_CORE:"Graphics3D",I3S_CONTROLLER:"I3S",POINT_CLOUD_LAYER:"point cloud",FEATURE_TILE_FETCHER:"feature fetcher",STREAM_CONTROLLER:"stream controller",OVERLAY:"overlay",OVERLAY_RENDERER:"overlay renderer",STAGE:"stage",GRAPHICS_DECONFLICTOR:"graphics deconflictor",FILTER_VISIBILITY:"Graphics3D filter visibility",SCALE_VISIBILITY:"Graphics3D scale visibility",FRUSTUM_VISIBILITY:"Graphics3D frustum visibility",POINT_OF_INTEREST_FREQUENT:"POI frequent",POINT_OF_INTEREST_INFREQUENT:"POI infrequent",LABELER:"labeler",FEATURE_QUERY_ENGINE:"feature query",FEATURE_TILE_TREE:"feature tile tree",FEATURE_TILE_TREE_ACTIVE:"fast feature tile tree",ELEVATION_ALIGNMENT:"elevation alignment",ELEVATION_ALIGNMENT_SCENE:"elevation alignment scene",TEXT_TEXTURE_ATLAS:"text texture atlas",TEXTURE_UNLOAD:"texture unload",LINE_OF_SIGHT_TOOL:"line of sight tool",LINE_OF_SIGHT_TOOL_INTERACTIVE:"interactive line of sight tool",ELEVATION_PROFILE:"elevation profile",SNAPPING:"snapping",SHADOW_ACCUMULATOR:"shadow accumulator",CLOUDS_GENERATOR:"clouds generator",FLOW_GENERATOR:"flow generator",MAPVIEW_FETCH_QUEUE:"mapview fetch queue",MAPVIEW_LAYERVIEW_UPDATE:"mapview layerview update",MAPVIEW_VECTOR_TILE_PARSING_QUEUE:"mapview vector tile parsing queue",NONE:0,TEST_PRIO:1},nu=0,nse=new Map([[si.RESOURCE_CONTROLLER_IMMEDIATE,nu],[si.RESOURCE_CONTROLLER,4],[si.SLIDE,nu],[si.STREAM_DATA_LOADER,nu],[si.ELEVATION_QUERY,nu],[si.TERRAIN_SURFACE,1],[si.SURFACE_GEOMETRY_UPDATES,1],[si.LOD_RENDERER,2],[si.GRAPHICS_CORE,2],[si.I3S_CONTROLLER,2],[si.POINT_CLOUD_LAYER,2],[si.FEATURE_TILE_FETCHER,2],[si.STREAM_CONTROLLER,2],[si.CLOUDS_GENERATOR,2],[si.OVERLAY,4],[si.OVERLAY_RENDERER,4],[si.STAGE,4],[si.GRAPHICS_DECONFLICTOR,4],[si.FILTER_VISIBILITY,4],[si.SCALE_VISIBILITY,4],[si.FRUSTUM_VISIBILITY,4],[si.POINT_OF_INTEREST_FREQUENT,6],[si.POINT_OF_INTEREST_INFREQUENT,30],[si.LABELER,8],[si.FEATURE_QUERY_ENGINE,8],[si.FEATURE_TILE_TREE,16],[si.FEATURE_TILE_TREE_ACTIVE,nu],[si.ELEVATION_ALIGNMENT,12],[si.ELEVATION_ALIGNMENT_SCENE,14],[si.TEXT_TEXTURE_ATLAS,12],[si.TEXTURE_UNLOAD,12],[si.LINE_OF_SIGHT_TOOL,16],[si.LINE_OF_SIGHT_TOOL_INTERACTIVE,nu],[si.SNAPPING,nu],[si.SHADOW_ACCUMULATOR,30],[si.FLOW_GENERATOR,12],[si.MAPVIEW_FETCH_QUEUE,nu],[si.MAPVIEW_LAYERVIEW_UPDATE,2],[si.MAPVIEW_VECTOR_TILE_PARSING_QUEUE,nu]]);function sse(t){return nse.has(t)?nse.get(t):typeof t=="number"?t:1}const nqe=6.5,ase=1,sqe=30,aqe=1e3/30,oqe=100,ose=.9;let lqe=class{get updating(){return this._updating.value}_updatingChanged(){this._updating.value=this._tasks.some(e=>e.needsUpdate)}constructor(){this._updating=Yw(!0),this._microTaskQueued=!1,this._frameNumber=0,this.performanceInfo={total:new o2("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new $we,this.state=1,this._tasks=new Array,this._runQueue=new Array,this._load=0,this._forceTask=!1,this._debug=!1,this._debugHandle=be(()=>K9e.SCHEDULER_LOG_SLOW_TASKS,e=>this._debug=e,Ft);for(const e of Object.keys(si))this.performanceInfo.tasks.set(si[e],new o2(String(si[e])))}destroy(){this._tasks.forEach(e=>e.remove()),this._tasks.length=0,this._runQueue.length=0,Dr(this._debugHandle),this._microTaskQueued=!1,this._updatingChanged()}taskRunningChanged(e){this._updatingChanged(),e&&this._budget.remaining>0&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.remaining>0&&this._schedule()&&this._runFrame())}))}registerTask(e,i){const r=new cqe(this,e,i);return this._tasks.push(r),this._updatingChanged(),this.performanceInfo.tasks.has(e)||this.performanceInfo.tasks.set(e,new o2(e)),r}get load(){return this._load}frame(e){if(this._startFrameTaskTimes(),this._updateBudget(e)){const i=this._budget.now();return this._runFrame(),this._recordFrameTaskTimes(this._budget.now()-i),!0}return this._recordFrameTaskTimes(0),!1}_updateBudget(e){this._test&&(this._test.usedBudget=0),++this._frameNumber;let i=nqe,r=e.frameDuration,n=ase;switch(this.state){case 2:i=0,r=Math.max(oqe,e.frameDuration),n=sqe;break;case 1:r=Math.max(aqe,e.frameDuration)}return r=r-e.elapsedFrameTime-i,this.state!==2&&r<ase&&!this._forceTask?(this._forceTask=!0,!1):(r=Math.max(r,n),this._budget.reset(r),this._updateLoad(),this._schedule())}_runFrame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case 2:this._runIdle();break;case 1:this._runInteracting();break;default:this._runAnimating()}this._test&&(this._test.usedBudget=this._budget.elapsed)}stopFrame(){this._budget.reset(0),this._budget.madeProgress()}removeTask(e){WB(this._tasks,e),WB(this._runQueue,e),this._updatingChanged()}_updateTask(e){this._tasks.forEach(i=>{i.name===e&&i.setPriority(e)})}_getState(e){if(this._runQueue.some(r=>r.name===e))return"s";let i="i";return this._tasks.forEach(r=>{r.name===e&&r.needsUpdate&&(r.schedulePriority<=1?i="r":i!=="r"&&(i="w"))}),i}_getRuntime(e){let i=0;return this._tasks.forEach(r=>{r.name===e&&(i+=r.runtime)}),i}_resetRuntimes(){this._tasks.forEach(e=>e.runtime=0)}_getRunning(){const e=new Map;if(this._tasks.forEach(r=>{r.needsUpdate&&e.set(r.name,(e.get(r.name)||0)+1)}),e.size===0)return null;let i="";return e.forEach((r,n)=>{i+=r>1?` ${r}x ${n}`:` ${n}`}),i}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const e=this._tasks.reduce((i,r)=>r.needsUpdate?++i:i,0);this._load=this._load*ose+e*(1-ose)}_schedule(){for(iAe(this._runQueue,e=>!!e.needsUpdate||(e.schedulePriority=e.basePriority,!1)),this._tasks.forEach(e=>{e.basePriority===nu&&e.needsUpdate&&!this._runQueue.includes(e)&&e.blockFrame!==this._frameNumber&&this._runQueue.unshift(e)});this._runQueue.length===0;){let e=!1,i=0;if(this._tasks.forEach(r=>{r.needsUpdate&&r.schedulePriority!==0&&r.basePriority!==nu&&r.blockFrame!==this._frameNumber&&(e=!0,i=Math.max(i,r.basePriority),r.schedulePriority===1?(r.schedulePriority=0,this._runQueue.push(r)):--r.schedulePriority)}),!e)return this._updatingChanged(),!1}return this._updatingChanged(),!0}_run(){do for(;this._runQueue.length>0;){const e=this._budget.now(),i=this._runQueue.pop();this._budget.resetProgress();try{i.task.runTask(this._budget)===xwe&&(i.blockFrame=this._frameNumber)}catch(n){Ie.getLogger("esri.views.support.Scheduler").error(`Exception in task "${i.name}"`,n),i.blockFrame=this._frameNumber}!this._budget.hasProgressed&&i.blockFrame!==this._frameNumber&&i.needsUpdate&&(i.name,i.blockFrame=this._frameNumber),i.schedulePriority=i.basePriority;const r=this._budget.now()-e;if(i.runtime+=r,this._frameTaskTimes.set(i.priority,this._frameTaskTimes.get(i.priority)+r),this._budget.remaining<=0)return void this._updatingChanged()}while(this._schedule());this._updatingChanged()}_startFrameTaskTimes(){for(const e of Object.keys(si))this._frameTaskTimes.set(si[e],0)}_recordFrameTaskTimes(e){this._frameTaskTimes.forEach((i,r)=>this.performanceInfo.tasks.get(r).push(i)),this.performanceInfo.total.push(e)}get test(){return this._test}},cqe=class{get task(){return this._task.value}get readyToRun(){return this._queue.readyToRun}get updating(){return this._queue.updating}constructor(e,i,r){this._scheduler=e,this.name=i,this.blockFrame=0,this.runtime=0,this._queue=new eqe,this._handles=new FT,this._basePriority=sse(i),this.schedulePriority=this._basePriority,this._task=Yw(r??this._queue),this._handles.add(cn(()=>this.task.readyToRun,n=>e.taskRunningChanged(n)))}remove(){this.processQueue(k2),this._scheduler.removeTask(this),this.schedule=M6.schedule,this.reschedule=M6.reschedule,this.scheduleGenerator=M6.scheduleGenerator,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(e){if(this.name===e)return;this.name=e;const i=sse(e);this._basePriority!==nu&&this.schedulePriority===0||(this.schedulePriority=i),this._basePriority=i}get priority(){return this.name}set priority(e){this.setPriority(e)}get needsUpdate(){return this.readyToRun||!this.task.destroyed&&this.task.readyToRun}schedule(e,i,r){return this._queue.push(e,i,r)}reschedule(e,i,r){return this._queue.unshift(e,i,r)}scheduleGenerator(e,i,r){return this._queue.pushGenerator(e,i,r)}processQueue(e){return this._queue.runTask(e)}},$we=class{constructor(){this._begin=(performance==null?void 0:performance.now())??0,this._budget=0,this._done=!1,this._progressed=!1,this._enabled=!0}run(e){return!this.done&&(e()===!0&&this.madeProgress(),!0)}get done(){return this._done}get budget(){return this._budget}madeProgress(){return this._progressed=!0,this._done=this.elapsed>=this._budget&&this._enabled,this._done}get enabled(){return this._enabled}set enabled(e){this._enabled=e}reset(e){this._begin=this.now(),this._budget=e,this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return this.now()-this._begin}resetProgress(){this._progressed=!1,this._done=!1}get hasProgressed(){return this._progressed}};const k2=new $we;k2.enabled=!1;let uqe=class{remove(){}processQueue(){}schedule(e,i,r){try{if(co(i)){const n=Hi();return r?Promise.resolve(r(n)):Promise.reject(n)}return XB(e(k2))}catch(n){return Promise.reject(n)}}reschedule(e,i,r){return this.schedule(e,i,r)}async scheduleGenerator(e,i,r){if(co(i)){const s=Hi();if(r)return r(s);throw s}const n=e(k2);for(;;){const s=n.next(k2),a=uo(s)?await s:s;if(co(i)){const o=Hi();if(r){const c=r(o),h=n.return(null);return uo(h)&&await la(h),c}const l=n.throw(o);throw uo(l)&&await la(l),o}if(a.done)return a.value}}};const M6=new uqe;let dqe=class{constructor(e){this.view=e,this._stationaryHandle=null,this._frameTaskHandle=null,this._updateParameters=null,this._updateRequested=!1,this._scheduler=rqe(),this._schedulerHandle=cn(()=>this._scheduler.updating,()=>this.requestFrame()),this.stationary=!0,this.prepare=()=>{var i;this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions,this._updateParameters.targetState.copy(this.view.state),((i=this.view.animation)==null?void 0:i.target)==null||uo(this.view.animation.target)||(this._updateParameters.targetState.viewpoint=this.view.animation.target))},this.update=i=>{var o,l,c;if(this._updateRequested=!1,(o=this.view)==null?void 0:o.destroyed)return;const{allLayerViews:r,graphicsView:n,labelManager:s,state:{id:a}}=this.view;r==null||r.forEach(this._updateLayerView,this),s!=null&&(s.lastUpdateId!==a&&(s.viewChange(),s.lastUpdateId=a),s.updateRequested&&s.processUpdate(this._updateParameters)),n!=null&&(n.lastUpdateId!==a&&(n.viewChange(),n.lastUpdateId=a),n.updateRequested&&n.processUpdate(this._updateParameters)),(l=this.view.graphicsTileStore)==null||l.setViewState(this._updateParameters.state),this.view.animation?this._scheduler.state=0:this.view.interacting?this._scheduler.state=1:this._scheduler.state=2,this._scheduler.frame(i)||this._updateRequested||this._scheduler.state!==2||((c=this._frameTaskHandle)==null||c.pause())}}destroy(){this.stop(),this._schedulerHandle.remove(),this._scheduler.destroy()}get scheduler(){return this._scheduler}start(){if(this._frameTaskHandle)return;const e=this.view;this.stationary=e.stationary,this._updateParameters={state:e.state,targetState:new FY,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:e.renderingOptions},this._stationaryHandle=be(()=>e.stationary,i=>{this.stationary=i,this.requestFrame()}),this._frameTaskHandle=GS(this),this.requestUpdate()}stop(){var e;this._frameTaskHandle&&(this._updateRequested=!1,(e=this._stationaryHandle)==null||e.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(e){var n;if(!e.attached)return void this.requestUpdate();const i=this.view.state,r=e.lastUpdateId;r!=null&&(this.stationary||e.moving)||(e.moving=!0),r!==i.id&&e.viewChange(),this.stationary&&e.moving&&(e.moving=!1,e.moveEnd()),e.lastUpdateId=i.id,e.updateRequested&&e.processUpdate(this._updateParameters),"layerViews"in e&&((n=e.layerViews)==null||n.forEach(this._updateLayerView,this))}};function hqe(t,e){const{spatialReference:i}=e,r=[e.x,e.y];let n,s,a,o;const l=[0,0],c=pqe(t);for(let g=0;g<c.length;g++){const v=c[g];for(let b=0;b<v.length-1;b++){$Re(l,r,v,b);const x=MD(r,l);(n==null||x<n)&&(n=x,s=[...l],a=g,o=b)}}if(n==null||!s||a==null||o==null)throw new ae("nearest-coordinate:failed","Failed to find the nearest coordinate");const[h,m]=s;return{coordinate:new St({x:h,y:m,spatialReference:i}),distance:n}}function pqe(t){switch(t.type){case"extent":return[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]];case"polygon":return t.rings;case"polyline":return t.paths}}var Kq;let C0=Kq=class extends eY(et){constructor(t){super(t),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(this.geometry==null||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return sg(this.geometry,this.spatialReference)}catch(t){return Ie.getLogger(this).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:t}),null}return this.geometry}constrain(t,e){if(this.normalizedGeometry==null)return t;const i=t.targetGeometry;if(this.normalizedGeometry.type==="extent"?Pk(this.normalizedGeometry,i):gZ(this.normalizedGeometry,i))return t;const{coordinate:r}=hqe(this.normalizedGeometry,i);return r&&(t.targetGeometry=r),t}clone(){var t,e;return new Kq({geometry:(t=this.geometry)==null?void 0:t.clone(),spatialReference:(e=this.spatialReference)==null?void 0:e.clone()})}};d([f({constructOnly:!0})],C0.prototype,"geometry",void 0),d([f({readOnly:!0})],C0.prototype,"normalizedGeometry",null),d([f({constructOnly:!0})],C0.prototype,"spatialReference",void 0),C0=Kq=d([V("esri.views.2d.constraints.GeometryConstraint")],C0);var e7;let wC=e7=class extends eY(et){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(t,e){return this.enabled&&e&&(this.rotationEnabled||(t.rotation=e.rotation)),t}clone(){return new e7({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};d([f()],wC.prototype,"enabled",void 0),d([f()],wC.prototype,"rotationEnabled",void 0),wC=e7=d([V("esri.views.2d.constraints.RotationConstraint")],wC);const Swe=wC;var t7;let hl=t7=class extends eY(et){constructor(t){super(t),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let t,{lods:e,minScale:i,maxScale:r,minZoom:n,maxZoom:s}=this,a=-1,o=-1,l=!1,c=!1;if(i!==0&&r!==0&&i<r&&([i,r]=[r,i]),!(e!=null&&e.length))return this._set("effectiveMinScale",i),void this._set("effectiveMaxScale",r);e=e.map(h=>h.clone()),e.sort((h,m)=>m.scale-h.scale),e.forEach((h,m)=>h.level=m);for(const h of e)!l&&i>0&&i>=h.scale&&(a=h.level,l=!0),!c&&r>0&&r>=h.scale&&(o=t?t.level:-1,c=!0),t=h;n===-1&&(n=i===0?0:a),s===-1&&(s=r===0?e.length-1:o),n=Math.max(n,0),n=Math.min(n,e.length-1),s=Math.max(s,0),s=Math.min(s,e.length-1),n>s&&([n,s]=[s,n]),i=e[n].scale,r=e[s].scale,e.splice(0,n),e.splice(s-n+1),e.forEach((h,m)=>{this._lodByScale[h.scale]=h,this._scales[m]=h.scale}),this._set("effectiveLODs",e),this._set("effectiveMinZoom",n),this._set("effectiveMaxZoom",s),this._set("effectiveMinScale",i),this._set("effectiveMaxScale",r)}constrain(t,e){if(e&&t.scale===e.scale)return t;const i=this.effectiveMinScale,r=this.effectiveMaxScale,n=t.targetGeometry,s=e&&e.targetGeometry,a=r!==0&&t.scale<r,o=i!==0&&t.scale>i;if(a||o){const l=o?i:r;if(e&&s){const c=(l-e.scale)/(t.scale-e.scale);n.x=s.x+(n.x-s.x)*c,n.y=s.y+(n.y-s.y)*c}t.scale=l}return this.snapToZoom&&this.effectiveLODs&&(t.scale=this._getClosestScale(t.scale)),t}fit(t){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(t,null);const e=this.scaleToZoom(t.scale),i=Math.abs(e-Math.floor(e));return t.scale=this.zoomToScale(i>.99?Math.round(e):Math.floor(e)),t}zoomToScale(t){if(!this.effectiveLODs)return 0;t-=this.effectiveMinZoom,t=Math.max(0,t);const e=this._scales;if(t<=0)return e[0];if(t>=e.length)return e[e.length-1];const i=Math.floor(t),r=Math.ceil(t);return e[i]+(t-i)*(e[r]-e[i])}scaleToZoom(t){if(!this.effectiveLODs)return-1;const e=this._scales;let i,r;if(t>=e[0])return this.effectiveMinZoom;if(t<=e[e.length-1])return this.effectiveMaxZoom;for(let n=0;n<e.length-1;n++){if(i=e[n],r=e[n+1],r===t)return n+this.effectiveMinZoom+1;if(i>t&&r<t)return n+this.effectiveMinZoom+1-(t-r)/(i-r)}return-1}snapToClosestScale(t){if(!this.effectiveLODs)return t;const e=this.scaleToZoom(t);return this.zoomToScale(Math.round(e))}snapToNextScale(t,e=.5){if(!this.effectiveLODs)return t*e;const i=Math.round(this.scaleToZoom(t));return this.zoomToScale(i+1)}snapToPreviousScale(t,e=2){if(!this.effectiveLODs)return t*e;const i=Math.round(this.scaleToZoom(t));return this.zoomToScale(i-1)}clone(){return new t7({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(t){return this._lodByScale[t]||(t=this._scales.reduce((e,i)=>Math.abs(i-t)<=Math.abs(e-t)?i:e,this._scales[0])),this._lodByScale[t].scale}};d([f({readOnly:!0})],hl.prototype,"effectiveLODs",void 0),d([f({readOnly:!0})],hl.prototype,"effectiveMinZoom",void 0),d([f({readOnly:!0})],hl.prototype,"effectiveMaxZoom",void 0),d([f({readOnly:!0})],hl.prototype,"effectiveMinScale",void 0),d([f({readOnly:!0})],hl.prototype,"effectiveMaxScale",void 0),d([f()],hl.prototype,"lods",void 0),d([f()],hl.prototype,"minZoom",void 0),d([f()],hl.prototype,"maxZoom",void 0),d([f()],hl.prototype,"minScale",void 0),d([f()],hl.prototype,"maxScale",void 0),d([f()],hl.prototype,"snapToZoom",void 0),hl=t7=d([V("esri.views.2d.constraints.ZoomConstraint")],hl);const Twe=hl,fqe={base:null,key:"type",typeMap:{extent:Yt,polygon:Nr}};let On=class extends et{constructor(e){super(e),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0,this.customConstraints=new Ue}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(e){e?this._set("geometry",e):this._set("geometry",null)}get version(){var e,i,r;return`${(e=this._zoom)==null?void 0:e.uid}/${(i=this._rotation)==null?void 0:i.uid}/${(r=this._geometry)==null?void 0:r.uid}`}get _geometry(){var i,r;const e=this._get("_geometry");return e&&this.geometry===e.geometry&&((i=this.view)==null?void 0:i.constraintsInfo.spatialReference)===e.spatialReference?e:new C0({geometry:this.geometry,spatialReference:(r=this.view)==null?void 0:r.constraintsInfo.spatialReference})}get _rotation(){return new Swe({rotationEnabled:this.rotationEnabled})}get _zoom(){var l;const e=this._get("_zoom"),i=this.lods||((l=this.view)==null?void 0:l.constraintsInfo.lods),r=this.minZoom,n=this.maxZoom,s=this.minScale,a=this.maxScale,o=this.snapToZoom;return e&&e.lods===i&&e.minZoom===r&&e.maxZoom===n&&e.minScale===s&&e.maxScale===a&&e.snapToZoom===o?e:new Twe({lods:i,minZoom:r,maxZoom:n,minScale:s,maxScale:a,snapToZoom:o})}canZoomInTo(e){const i=this.effectiveMaxScale;return i===0||e>=i}canZoomOutTo(e){const i=this.effectiveMinScale;return i===0||e<=i}constrain(e,i){return this._zoom.constrain(e,i),this._rotation.constrain(e,i),this._geometry.constrain(e,i),this.customConstraints.forEach(r=>r.constrain(e,i)),e}constrainByGeometry(e){return this._geometry.constrain(e),this.customConstraints.forEach(i=>{var r;return(r=i.applyPanConstraint)==null?void 0:r.call(i,e)}),e}fit(e){return this._zoom.fit(e)}zoomToScale(e){return this._zoom.zoomToScale(e)}scaleToZoom(e){return this._zoom.scaleToZoom(e)}snapScale(e){return this._zoom.snapToClosestScale(e)}snapToNextScale(e){return this._zoom.snapToNextScale(e)}snapToPreviousScale(e){return this._zoom.snapToPreviousScale(e)}};d([f({readOnly:!0})],On.prototype,"effectiveLODs",null),d([f({readOnly:!0})],On.prototype,"effectiveMinScale",null),d([f({readOnly:!0})],On.prototype,"effectiveMaxScale",null),d([f({readOnly:!0})],On.prototype,"effectiveMinZoom",null),d([f({readOnly:!0})],On.prototype,"effectiveMaxZoom",null),d([f({types:fqe,value:null})],On.prototype,"geometry",null),d([f({type:[Oa]})],On.prototype,"lods",void 0),d([f()],On.prototype,"minScale",void 0),d([f()],On.prototype,"maxScale",void 0),d([f()],On.prototype,"minZoom",void 0),d([f()],On.prototype,"maxZoom",void 0),d([f()],On.prototype,"rotationEnabled",void 0),d([f()],On.prototype,"snapToZoom",void 0),d([f({type:Ue})],On.prototype,"customConstraints",void 0),d([f()],On.prototype,"view",void 0),d([f({readOnly:!0})],On.prototype,"version",null),d([f({type:C0,readOnly:!0})],On.prototype,"_geometry",null),d([f({type:Swe})],On.prototype,"_rotation",null),d([f({readOnly:!0,type:Twe})],On.prototype,"_zoom",null),On=d([V("esri.views.2d.MapViewConstraints")],On);const lse=On;let Za=class extends et{constructor(e){super(e),this.constraints=null,this.ready=!1,this.resizeAlign="center",this.addHandles([be(()=>{var i;return(i=this.constraints)==null?void 0:i.version},i=>{this.constraints&&i&&this.ready&&(this.state.viewpoint=this.constraints.fit(this.state.paddedViewState.viewpoint))},Nd)])}get center(){if(!this.ready)return this._get("center");const{center:e,spatialReference:i}=this.state.paddedViewState;return this.state.commitProperty("id"),new St({x:e[0],y:e[1],spatialReference:i})}set center(e){if(e==null)return;if(!this.ready)return void this._set("center",e);let i;try{i=this._project(e,this.state.spatialReference)}catch(n){return void Ie.getLogger(this).error(new ae("mapview:invalid-center","could not project the value in the view's spatial reference",{input:e,error:n}))}const r=this.viewpoint;Yq(r,r,i),this.viewpoint=r}get extent(){return this.ready?(this.state.commitProperty("id"),this.state.paddedViewState.extent.clone()):this._get("extent")}set extent(e){if(e==null)return;if(!e.width||!e.height)return void Ie.getLogger(this).error(new ae("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",e),this._set("center",void 0),this._set("viewpoint",void 0),this._set("scale",void 0),void this._set("zoom",void 0);let i;try{i=this._project(e,this.state.spatialReference)}catch(n){return void Ie.getLogger(this).error(new ae("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:n}))}const r=this.viewpoint;k9e(r,r,i,this.state.size,{constraints:this.constraints}),this.viewpoint=r}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(e){this.ready?(this.state.padding=e,this._set("padding",this.state.padding)):this._set("padding",e)}get resolution(){return this.ready?(this.state.commitProperty("id"),this.state.resolution):0}get rotation(){return this.ready?(this.state.commitProperty("id"),this.state.rotation):this._get("rotation")}set rotation(e){if(isNaN(e))return;if(!this.ready)return void this._set("rotation",e);const i=this.viewpoint;j9e(i,i,e),this.viewpoint=i}get scale(){return this.ready?(this.state.commitProperty("id"),this.state.scale):this._get("scale")}set scale(e){if(!e||isNaN(e))return;if(!this.ready){this._set("scale",e),this._set("zoom",void 0);const r=this._get("extent");return void(r&&(this._set("extent",void 0),this._set("center",r.center)))}const i=this.viewpoint;ese(i,i,e),this.viewpoint=i}get viewpoint(){return this.ready?this.state.paddedViewState.viewpoint.clone():this._get("viewpoint")}set viewpoint(e){var s;if(e==null)return;if(!this.ready)return this._set("viewpoint",e),this._set("extent",void 0),this._set("center",void 0),this._set("zoom",void 0),void this._set("scale",void 0);let i,r;try{i=this._project(e,this.state.spatialReference),!e.scale||isNaN(e.scale)?r=new ae("mapview:invalid-viewpoint",`invalid scale value of ${e.scale}`):e.targetGeometry==null&&(r=new ae("mapview:invalid-viewpoint","geometry not defined"))}catch(a){r=new ae("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:a})}if(r)return void Ie.getLogger(this).error(r);this._scaleBeforeChangingSpatialReference=null;const n=new Ds({targetGeometry:new St,scale:0,rotation:0});lo(n,i),(s=this.constraints)==null||s.constrain(n,this.state.paddedViewState.viewpoint),this.state.viewpoint=n,this._set("viewpoint",n)}get visibleArea(){return this.ready?this.state.visibleArea:null}get zoom(){var e;return this.ready?((e=this.constraints)==null?void 0:e.scaleToZoom(this.scale))??-1:this._get("zoom")}set zoom(e){var n,s;if(!(e>=0))return;if(!this.ready){this._set("zoom",e),this._set("scale",void 0);const a=this._get("extent");return void(a&&(this._set("extent",void 0),this._set("center",a.center)))}const i=((n=this.constraints)==null?void 0:n.zoomToScale(e))??0;if(!i)return void this._set("zoom",-1);const r=this.viewpoint;ese(r,r,i),this.viewpoint=r,this._set("zoom",((s=this.constraints)==null?void 0:s.scaleToZoom(this.scale))??-1)}getUserStartupOptions(e){if(!e[0]&&!e[1])return{center:void 0,rotation:void 0,scale:void 0};const{padding:i,constraints:r}=this,n=this._get("center"),s=this._get("extent"),a=this._get("scale"),o=this._get("rotation"),l=this._get("viewpoint"),c=this._get("zoom"),h=c!=null&&r!=null&&r.zoomToScale(c)||void 0;let m,g,v;const b=l==null?void 0:l.rotation,x=l==null?void 0:l.targetGeometry;(x==null?void 0:x.type)==="extent"?m=x:(x==null?void 0:x.type)==="point"&&(g=x,v=l==null?void 0:l.scale);const $=s??m;return{center:n??g??($==null?void 0:$.center),rotation:o??b,scale:(a??h??v??($&&l5($,[e[0]-i.left-i.right,e[1]-i.top-i.bottom])))||void 0}}startup(e,i,r,n){var a;const s=e.targetGeometry;try{this._project(e,r)}catch(o){Ie.getLogger(this).warn(new Ic("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:s.toJSON(),spatialReference:r,error:o})),e.targetGeometry=n||new St({x:0,y:0,spatialReference:r})}(a=this.constraints)==null||a.fit(e),this._set("state",new FY({padding:this.padding,size:i,viewpoint:e})),this._set("ready",!0)}teardown(){this._set("ready",!1);const{center:[e,i],spatialReference:r,rotation:n,scale:s}=this.state.paddedViewState,a=new St({x:e,y:i,spatialReference:r});this._set("viewpoint",null),this._set("extent",null),this._set("center",a),this._set("zoom",-1),this._set("rotation",n),this._set("scale",s),this._set("state",null)}changeSpatialReference(e){var l;const i=this.state.paddedViewState.clone();if(this._scaleBeforeChangingSpatialReference==null)this._scaleBeforeChangingSpatialReference=i.scale;else{const c=i.viewpoint.clone();c.scale=this._scaleBeforeChangingSpatialReference,i.viewpoint=c}const r=i.clone(),[n,s]=i.center;let a=null;try{a=this._project(new St({x:n,y:s,spatialReference:i.spatialReference}),e)}catch(c){aZ()||Ie.getLogger(this).warn(new Ic("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:a==null?void 0:a.toJSON(),spatialReference:e,error:c}))}a||(a=new St({x:0,y:0,spatialReference:e}));const o=Yq(new Ds({targetGeometry:new St,scale:0,rotation:0}),i.viewpoint,a);r.viewpoint=o;try{const h=[i.size[0]/2,i.size[1]/2],m=[h[0]+20,h[1]],g=i.toMap([0,0],m),{x:v,y:b}=this._project(new St({x:g[0],y:g[1],spatialReference:i.spatialReference}),e);g[0]=v,g[1]=b,r.toScreen(g,g);const x=z9e(h,g,m),$=Math.hypot(g[0]-h[0],g[1]-h[1])/20;!Number.isFinite($)||Math.abs($)>4?(o.rotation=0,o.targetGeometry=new St({x:0,y:0,spatialReference:e})):(o.scale*=$,o.scale>ve("mapview-srswitch-adjust-rotation-scale-threshold")?o.rotation=0:o.rotation+=Number.isFinite(x)?x:0)}catch{}(l=this._get("constraints"))==null||l.constrain(o,void 0),this._get("state").viewpoint=o}resize(e,i){var a;if(!this.ready)return;const r=this.state;let n=this.state.paddedViewState.viewpoint;const s=this.state.paddedViewState.size.slice();r.size=[e,i],D9e(n,n,s,this.state.paddedViewState.size,this.resizeAlign),n=((a=this.constraints)==null?void 0:a.constrain(n,void 0))??n,this.state.viewpoint=n}toMap(e){if(!this.ready)return null;const i=[0,0],[r,n]=this.state.toMap(i,[e.x,e.y]),s=this.state.spatialReference;return new St({x:r,y:n,spatialReference:s})}toScreen(e,i){if(!this.ready)return null;const r=this._project(e,this.state.spatialReference),n=[r.x,r.y];return(i==null?void 0:i.pickClosestTarget)===!1||this.state.paddedViewState.wrapMapCoordinate(n,n),this.state.toScreen(n,n),Ns(n[0],n[1])}_project(e,i){var s;const r=(e==null?void 0:e.targetGeometry)||e;if(!i)return e;if(!r)return null;if(i.imageCoordinateSystem||(s=r.spatialReference)!=null&&s.imageCoordinateSystem||Cs(i,r.spatialReference))return e;const n=sg(r,i);if(!n)throw new ae("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:r,spatialReference:i});return mqe(e)?(e.targetGeometry=n,e):n}};function mqe(t){return(t==null?void 0:t.declaredClass)==="esri.Viewpoint"}d([f({type:St})],Za.prototype,"center",null),d([f()],Za.prototype,"constraints",void 0),d([f({type:Yt})],Za.prototype,"extent",null),d([f({value:{top:0,right:0,bottom:0,left:0},cast:t=>({top:0,right:0,bottom:0,left:0,...t})})],Za.prototype,"padding",null),d([f()],Za.prototype,"ready",void 0),d([f()],Za.prototype,"resizeAlign",void 0),d([f({readOnly:!0})],Za.prototype,"resolution",null),d([f({type:Number})],Za.prototype,"rotation",null),d([f({type:Number})],Za.prototype,"scale",null),d([f({readOnly:!0})],Za.prototype,"state",void 0),d([f({type:Ds})],Za.prototype,"viewpoint",null),d([f({readOnly:!0})],Za.prototype,"visibleArea",null),d([f()],Za.prototype,"zoom",null),Za=d([V("esri.views.2d.ViewStateManager")],Za);const cse=160;let _C=class extends et{constructor(){super(...arguments),this._timer=void 0}get stationary(){return!this._timer}flip(){this._timestamp=performance.now(),this._timer==null&&(this._timer=setInterval(()=>{performance.now()-this._timestamp>=cse&&this.clear()},cse))}clear(){this._timer&&(clearInterval(this._timer),this._timer=void 0)}};d([f()],_C.prototype,"_timer",void 0),d([f()],_C.prototype,"stationary",null),_C=d([V("esri.views.2d.support.StationaryManager")],_C);const gqe=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),this.fullOpacity=1,this.stateManager=new Za({constraints:new lse({view:this})}),this.stationaryManager=new _C,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!1,labelsAnimationTime:0,labelCollisionsEnabled:!1},this.frameTask=new dqe(this),this.viewEvents=new z0e(this),this.padding={top:0,right:0,bottom:0,left:0},this.addHandles([be(()=>this.viewpoint,()=>this.stationaryManager.flip(),Nd)])}get constraintsInfo(){return{lods:null,spatialReference:null}}get extent(){var r;return((r=this.stateManager)==null?void 0:r.extent)??null}set extent(r){this.stateManager.extent=r}get state(){return this.stateManager.state}get interacting(){return!1}get stationary(){return!this.animation&&this.stationaryManager.stationary}set animation(r){const n=this._get("animation");if(r===n)return;if(n&&n.stop(),r!==this.animationManager.animation&&this.animationManager.stop(),!r||r.isFulfilled())return void this._set("animation",null);this._set("animation",r);const s=()=>{var a;this.destroyed||r===this._get("animation")&&(this._set("animation",null),(a=this.frameTask)==null||a.requestFrame())};r.when(s,s)}get constraints(){var r;return(r=this.stateManager)==null?void 0:r.constraints}set constraints(r){r.view=this;const n=this.stateManager.constraints;this.stateManager.constraints=r,n==null||n.destroy()}get padding(){var r;return(r=this.stateManager)==null?void 0:r.padding}set padding(r){this.stateManager&&(this.stateManager.padding=r)}get resizeAlign(){return this.stateManager.resizeAlign}set resizeAlign(r){this.stateManager.resizeAlign=r}get rotation(){return this.stateManager.rotation??0}set rotation(r){const{rotationEnabled:n}=this.constraints;this.constraints.rotationEnabled=!0,this.stateManager.rotation=r,this.constraints.rotationEnabled=n}get viewpoint(){return this.stateManager.viewpoint??null}set viewpoint(r){this.stateManager.viewpoint=r,this.frameTask.requestFrame()}};return d([f({readOnly:!0})],i.prototype,"animationManager",void 0),d([f({readOnly:!0})],i.prototype,"fullOpacity",void 0),d([f()],i.prototype,"stateManager",void 0),d([f()],i.prototype,"constraintsInfo",null),d([f()],i.prototype,"extent",null),d([f({readOnly:!0})],i.prototype,"state",null),d([f({readOnly:!0})],i.prototype,"mapViewNavigation",void 0),d([f()],i.prototype,"renderingOptions",void 0),d([f({readOnly:!0})],i.prototype,"interacting",null),d([f()],i.prototype,"stationary",null),d([f()],i.prototype,"animation",null),d([f({type:lse})],i.prototype,"constraints",null),d([f()],i.prototype,"padding",null),d([f()],i.prototype,"resizeAlign",null),d([f()],i.prototype,"rotation",null),d([f({readOnly:!0})],i.prototype,"viewEvents",void 0),d([f({type:Ds})],i.prototype,"viewpoint",null),i=d([V("esri.views.Viewport2DBaseMixin")],i),i},Iwe=()=>Ti.respectPrefersReducedMotion&&window.matchMedia("(prefers-reduced-motion: reduce)").matches;var PS;let $x=(PS=class extends QZ{constructor(e){super(e),this.state="running",this.target=null,this._resolver=null}initialize(){this._resolver=Fl(),this.addResolvingPromise(this._resolver.promise)}get done(){return this.state==="finished"||this.state==="stopped"}stop(){var e;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),(e=this._resolver)==null||e.reject(new ae("view:animation-stopped","ViewAnimation stopped")))}finish(){var e;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),(e=this._resolver)==null||e.resolve())}update(e,i){i||(i=uo(e)?"waiting-for-target":"running"),this._set("target",e),this._set("state",i)}},PS.state={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"},PS);d([f({readOnly:!0})],$x.prototype,"done",null),d([f({readOnly:!0,type:String})],$x.prototype,"state",void 0),d([f()],$x.prototype,"target",void 0),$x=d([V("esri.views.ViewAnimation")],$x);const i7=$x;let PL=class extends et{constructor(e){super(e),this._gotoTask=null}destroy(){this._gotoTask=null}async goTo(e,i){if(!e)return void Ie.getLogger(this).error("#goTo()","target cannot be null or undefined");const r=new i7;this.view.animation=r,await kT(()=>this.view.ready,i);const n={...i,animate:(i==null?void 0:i.animate)??(!Iwe()&&this.view.animationsEnabled),animationMode:(i==null?void 0:i.animationMode)??"auto"},{extent:s,spatialReference:a,size:o,viewpoint:l,constraints:c,padding:h,allLayerViews:m}=this.view,g=M9e(e,{extent:s,spatialReference:a,size:o,viewpoint:l,constraints:c,padding:h,allLayerViews:m,pickClosestTarget:(i==null?void 0:i.pickClosestTarget)??!0});return r==null||r.update(g),this._gotoTask={},n.animate?this._gotoAnimated(g,n):this._gotoImmediate(g,n)}_gotoImmediate(e,i){const r=this._gotoTask,n=this.view.animation,s=e.then(a=>{if(lr(i),r!==this._gotoTask)throw new ae("view:goto-interrupted","Goto was interrupted");this.view.viewpoint=n.target=a,n.finish()});return this._cancellableGoTo(r,n,s,i)}_gotoAnimated(e,i){const r=this._gotoTask,n=this.view.animation;if(!n)return Promise.resolve();const s=e.then(a=>{if(lr(i),r!==this._gotoTask)throw new ae("view:goto-interrupted","Goto was interrupted");return n.update(a),this.view.animationManager.animate(n,this.view.viewpoint,i),n.when().then(()=>{},()=>{})});return this._cancellableGoTo(r,n,s,i)}_cancellableGoTo(e,i,r,n){const s=()=>e===this._gotoTask;return OW(r,n).finally(()=>{s()&&(i.done||i.stop())})}};d([f({constructOnly:!0})],PL.prototype,"view",void 0),PL=d([V("esri.views.2d.GoToManager")],PL);function Mwe(t,e){switch(e){case"primary":return t.pointerType==="touch"||t.button===0;case"secondary":return t.pointerType!=="touch"&&t.button===2;case"tertiary":return t.pointerType!=="touch"&&t.button===1}}function Cwe(t,e){return e.some(i=>Mwe(t,i))}function use(t,{dragPrimary:e,dragSecondary:i,dragTertiary:r}){return[{key:"primary",value:e},{key:"secondary",value:i},{key:"tertiary",value:r}].filter(n=>n.value===t).map(n=>n.key)}let dse=class extends Bs{constructor(e,i){super(!0),this._view=e,this.registerIncoming("double-click",i,r=>this._handleDoubleClick(r,i))}_handleDoubleClick(e,i){Mwe(e.data,"primary")&&(e.stopPropagation(),i?this._view.mapViewNavigation.zoomOut([e.data.x,e.data.y]):this._view.mapViewNavigation.zoomIn([e.data.x,e.data.y]))}},yqe=class extends Bs{constructor(e,i,r){super(!0),this.view=e,this.pointerType=i,this.registerIncoming("double-tap-drag",r,n=>this._handleDoubleTapDrag(n))}_handleDoubleTapDrag(e){const{data:i}=e,{pointerType:r}=i;if(r!==this.pointerType)return;e.stopPropagation();const{action:n,delta:s}=i,{view:a}=this,{mapViewNavigation:o}=a;switch(n){case"begin":{const{scale:l}=a;this._startScale=l,this._currentScale=l,this._previousDelta=s,o.begin();break}case"update":{if(this._previousDelta.y===s.y)return;this._previousDelta=s;const l=1.015**s.y,c=this._startScale*l,h=c/this._currentScale;o.setViewpointImmediate(h),this._currentScale=c;break}case"end":{const{constraints:l}=a,{effectiveLODs:c,snapToZoom:h}=l;if(!h||!c)return void o.end();const m=l.snapScale(this._currentScale),g=(s.y>0?Math.max(m,l.snapToPreviousScale(this._startScale)):Math.min(m,l.snapToNextScale(this._startScale)))/this._currentScale;o.zoom(g).then(()=>{o.end()});break}}}},u5=class{constructor(e){this._callbacks=e,this._currentCount=0,this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(e){const i=e.data,r=i.pointers.size;switch(i.action){case"start":this._currentCount=r,this._emitStart(e);break;case"added":this._emitEnd(this._previousEvent),this._currentCount=r,this._emitStart(e);break;case"update":this._emitUpdate(e);break;case"removed":this._startEvent&&this._emitEnd(this._previousEvent),this._currentCount=r,this._emitStart(e);break;case"end":this._emitEnd(e),this._currentCount=0}this._previousEvent=e}_emitStart(e){var i,r;this._startEvent=e,(r=(i=this._callbacks).condition)!=null&&r.call(i,this._currentCount,e)&&this._callbacks.start(this._currentCount,e,this._startEvent)}_emitUpdate(e){var i,r;(r=(i=this._callbacks).condition)!=null&&r.call(i,this._currentCount,e)&&this._callbacks.update(this._currentCount,e,this._startEvent)}_emitEnd(e){var i,r;(r=(i=this._callbacks).condition)!=null&&r.call(i,this._currentCount,e)&&this._callbacks.end(this._currentCount,e,this._startEvent),this._startEvent=null}},vqe=class extends Bs{constructor(e,i,r){super(!0),this.view=e,this.pointerActions=i,this.registerIncoming("drag",r,n=>this._handleDrag(n)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(e){super.onInstall(e),this._dragEventSeparator=new u5({start:(i,r)=>{this.view.mapViewNavigation.pan.begin(this.view,r.data),r.stopPropagation()},update:(i,r)=>{this.view.mapViewNavigation.pan.update(this.view,r.data),r.stopPropagation()},end:(i,r)=>{this.view.mapViewNavigation.pan.end(this.view,r.data),r.stopPropagation()},condition:(i,r)=>i===1&&Cwe(r.data,this.pointerActions)})}_handleDrag(e){const i=this.view.mapViewNavigation;i.pinch.zoomMomentum||i.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(e)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}},bqe=class extends Bs{constructor(e,i,r){super(!0),this._view=e,this.pointerActions=i;const n=this._view.mapViewNavigation;this._dragEventSeparator=new u5({start:(s,a)=>{n.rotate.begin(this._view,a.data),a.stopPropagation()},update:(s,a)=>{n.rotate.update(this._view,a.data),a.stopPropagation()},end:(s,a)=>{n.rotate.end(),a.stopPropagation()},condition:(s,a)=>s===1&&Cwe(a.data,this.pointerActions)}),this.registerIncoming("drag",r,s=>this._dragEventSeparator.handle(s))}};function Ewe(t){const e=t[0],i=t[1],r=t[2];return Math.sqrt(e*e+i*i+r*r)}function wqe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function _qe(t,e,i,r){return t[0]=e,t[1]=i,t[2]=r,t}function xqe(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t}function kwe(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t}function Awe(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t}function Pwe(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t}function $qe(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function Sqe(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function Tqe(t,e){return t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t}function Iqe(t,e){return t[0]=Math.sign(e[0]),t[1]=Math.sign(e[1]),t[2]=Math.sign(e[2]),t}function Mqe(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t}function Cqe(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t}function Eqe(t,e=0,i=1){return t[0]=Math.min(Math.max(t[0],e),i),t[1]=Math.min(Math.max(t[1],e),i),t[2]=Math.min(Math.max(t[2],e),i),t}function kqe(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function Owe(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t}function Aqe(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t}function Lwe(t,e){const i=e[0]-t[0],r=e[1]-t[1],n=e[2]-t[2];return Math.sqrt(i*i+r*r+n*n)}function Fwe(t,e){const i=e[0]-t[0],r=e[1]-t[1],n=e[2]-t[2];return i*i+r*r+n*n}function Rwe(t){const e=t[0],i=t[1],r=t[2];return e*e+i*i+r*r}function Pqe(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function Oqe(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function r7(t,e){const i=e[0],r=e[1],n=e[2];let s=i*i+r*r+n*n;return s>0&&(s=1/Math.sqrt(s),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s),t}function zwe(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Lqe(t,e,i){const r=e[0],n=e[1],s=e[2],a=i[0],o=i[1],l=i[2];return t[0]=n*l-s*o,t[1]=s*a-r*l,t[2]=r*o-n*a,t}function Fqe(t,e,i){const r=e[0],n=e[1],s=e[2],a=i[0],o=i[1],l=i[2],c=n*l-s*o,h=s*a-r*l,m=r*o-n*a,g=Math.sqrt(c*c+h*h+m*m);return t[0]=c/g,t[1]=h/g,t[2]=m/g,t}function Rqe(t,e,i,r){const n=e[0],s=e[1],a=e[2];return t[0]=n+r*(i[0]-n),t[1]=s+r*(i[1]-s),t[2]=a+r*(i[2]-a),t}function zqe(t,e,i,r,n,s){const a=s*s,o=a*(2*s-3)+1,l=a*(s-2)+s,c=a*(s-1),h=a*(3-2*s);return t[0]=e[0]*o+i[0]*l+r[0]*c+n[0]*h,t[1]=e[1]*o+i[1]*l+r[1]*c+n[1]*h,t[2]=e[2]*o+i[2]*l+r[2]*c+n[2]*h,t}function Nqe(t,e,i,r,n,s){const a=1-s,o=a*a,l=s*s,c=o*a,h=3*s*o,m=3*l*a,g=l*s;return t[0]=e[0]*c+i[0]*h+r[0]*m+n[0]*g,t[1]=e[1]*c+i[1]*h+r[1]*m+n[1]*g,t[2]=e[2]*c+i[2]*h+r[2]*m+n[2]*g,t}function Dqe(t,e=1){const i=ID,r=2*i()*Math.PI,n=2*i()-1,s=Math.sqrt(1-n*n)*e;return t[0]=Math.cos(r)*s,t[1]=Math.sin(r)*s,t[2]=n*e,t}function jqe(t,e,i){const r=e[0],n=e[1],s=e[2];return t[0]=i[0]*r+i[4]*n+i[8]*s+i[12],t[1]=i[1]*r+i[5]*n+i[9]*s+i[13],t[2]=i[2]*r+i[6]*n+i[10]*s+i[14],t}function Vqe(t,e,i){const r=e[0],n=e[1],s=e[2];return t[0]=r*i[0]+n*i[3]+s*i[6],t[1]=r*i[1]+n*i[4]+s*i[7],t[2]=r*i[2]+n*i[5]+s*i[8],t}function Uqe(t,e,i){const r=i[0],n=i[1],s=i[2],a=i[3],o=e[0],l=e[1],c=e[2],h=n*c-s*l,m=s*o-r*c,g=r*l-n*o,v=n*g-s*m,b=s*h-r*g,x=r*m-n*h,$=2*a;return t[0]=o+h*$+2*v,t[1]=l+m*$+2*b,t[2]=c+g*$+2*x,t}function Bqe(t,e,i,r){const n=[],s=[];return n[0]=e[0]-i[0],n[1]=e[1]-i[1],n[2]=e[2]-i[2],s[0]=n[0],s[1]=n[1]*Math.cos(r)-n[2]*Math.sin(r),s[2]=n[1]*Math.sin(r)+n[2]*Math.cos(r),t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t}function qqe(t,e,i,r){const n=[],s=[];return n[0]=e[0]-i[0],n[1]=e[1]-i[1],n[2]=e[2]-i[2],s[0]=n[2]*Math.sin(r)+n[0]*Math.cos(r),s[1]=n[1],s[2]=n[2]*Math.cos(r)-n[0]*Math.sin(r),t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t}function Hqe(t,e,i,r){const n=[],s=[];return n[0]=e[0]-i[0],n[1]=e[1]-i[1],n[2]=e[2]-i[2],s[0]=n[0]*Math.cos(r)-n[1]*Math.sin(r),s[1]=n[0]*Math.sin(r)+n[1]*Math.cos(r),s[2]=n[2],t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t}function Gqe(t,e){r7(hse,t),r7(pse,e);const i=zwe(hse,pse);return i>1?0:i<-1?Math.PI:Math.acos(i)}const hse=Uv(),pse=Uv();function Wqe(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function Zqe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function Yqe(t,e){if(t===e)return!0;const i=t[0],r=t[1],n=t[2],s=e[0],a=e[1],o=e[2],l=qo();return Math.abs(i-s)<=l*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(r-a)<=l*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(n-o)<=l*Math.max(1,Math.abs(n),Math.abs(o))}function Jqe(t,e,i){const r=i[0]-e[0],n=i[1]-e[1],s=i[2]-e[2];let a=r*r+n*n+s*s;return a>0?(a=1/Math.sqrt(a),t[0]=r*a,t[1]=n*a,t[2]=s*a,t):(t[0]=0,t[1]=0,t[2]=0,t)}const Xqe=kwe,Qqe=Awe,Kqe=Pwe,e7e=Lwe,t7e=Fwe,i7e=Ewe,r7e=Rwe;Object.freeze(Object.defineProperty({__proto__:null,abs:Tqe,add:xqe,angle:Gqe,bezier:Nqe,ceil:$qe,clamp:Eqe,copy:wqe,cross:Lqe,crossAndNormalize:Fqe,direction:Jqe,dist:e7e,distance:Lwe,div:Kqe,divide:Pwe,dot:zwe,equals:Yqe,exactEquals:Zqe,floor:Sqe,hermite:zqe,inverse:Oqe,len:i7e,length:Ewe,lerp:Rqe,max:Cqe,min:Mqe,mul:Qqe,multiply:Awe,negate:Pqe,normalize:r7,random:Dqe,rotateX:Bqe,rotateY:qqe,rotateZ:Hqe,round:kqe,scale:Owe,scaleAndAdd:Aqe,set:_qe,sign:Iqe,sqrDist:t7e,sqrLen:r7e,squaredDistance:Fwe,squaredLength:Rwe,str:Wqe,sub:Xqe,subtract:kwe,transformMat3:Vqe,transformMat4:jqe,transformQuat:Uqe},Symbol.toStringTag,{value:"Module"}));function Wu(t){let e=t*t;return t<0&&(e*=-1),e}function n7e(t){return t.translation[0]=0,t.translation[1]=0,t.translation[2]=0,t.heading=0,t.tilt=0,t}function s7e(t,e,i){const r=i,n=t.state,s=t.device,a=e.tiltDirection==="forward-down"?1:-1,o=1;return s.deviceType==="standard"?(r.translation[0]=Wu(n.axes[0]),r.translation[1]=Wu(n.axes[1]),r.translation[2]=Wu(n.buttons[7])-Wu(n.buttons[6]),r.heading=Wu(n.axes[2]),r.tilt=Wu(n.axes[3])):s.deviceType==="spacemouse"&&(r.translation[0]=1.2*Wu(n.axes[0]),r.translation[1]=1.2*Wu(n.axes[1]),r.translation[2]=2*-Wu(n.axes[2]),r.heading=1.2*Wu(n.axes[5]),r.tilt=1.2*Wu(n.axes[3])),r.tilt*=a,Owe(r.translation,r.translation,o),r}function a7e(t){return t.translation[0]===0&&t.translation[1]===0&&t.translation[2]===0&&t.heading===0&&t.tilt===0&&t.zoom===0}let o7e=class extends Bs{constructor(e){super(!0),this._view=e,this._frameTask=null,this._watchHandles=new FT,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming("gamepad",i=>this._handleGamePadEvent(i)),this._handle.pause()}onInstall(e){super.onInstall(e),this._watchHandles.add([be(()=>{var i;return(i=this._view.navigation.gamepad)==null?void 0:i.enabled},i=>{i?(this._handle.resume(),this._frameTask||(this._frameTask=GS({update:r=>this._frameUpdate(r.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))},Ft)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(e){var r;const i=this._view.navigation.gamepad.device;i&&e.data.device!==i||this._currentDevice&&this._currentDevice!==e.data.device||(e.data.action==="end"?(this._currentDevice=null,n7e(this._transformation)):(this._currentDevice=e.data.device,s7e(e.data,this._view.navigation.gamepad,this._transformation)),(r=this._frameTask)==null||r.resume())}_frameUpdate(e){var m;const i=this._transformation;if(a7e(i))return void((m=this._frameTask)==null?void 0:m.pause());const r=this._view.viewpoint.clone(),n=this._view.navigation.gamepad.velocityFactor,s=c7e*n*e;c5(r,r,[i.translation[0]*s,-i.translation[1]*s]);const a=1+i.translation[2]*u7e*e,o=this._view.constraints.rotationEnabled?-i.heading*l7e*e:0,l=this._view.size,c=[l[0]/2,l[1]];pwe(r,r,a,o,c,l);const h=this._view.constraints.constrain(r,this._view.viewpoint);this._view.viewpoint=h}};const l7e=.06,c7e=.7,u7e=6e-4;function Nwe(t){const e=()=>t(document.visibilityState==="visible");return document.addEventListener("visibilitychange",e),Ii(()=>document.removeEventListener("visibilitychange",e))}let d7e=class extends Bs{constructor(e,i,r){super(!0),this.view=e,this.keys=i,this._isSticky=!1,this._pressedKeys=new Set,this._timeout=void 0,this._currentDirection=void 0,this._stickyKeyDuration=200,this._handleKey=n=>{const s=this._keyMap[n.data.key];if(n.modifiers.has("Meta")||n.modifiers.has("Control"))return void this._stopMovement();if(s==null)return;n.stopPropagation(),n.preventDefault();const a=n.type==="key-down";if(this._pressedKeys[a?"add":"delete"](s),a){if(this._direction===s)return;this._direction=s,this._isSticky=!1,this._setTimeout(()=>{this._isSticky&&this._handlePopKey()})}else{const o=this._timeout===void 0,l=this._pressedKeys.size>0;o||l?this._handlePopKey():this._isSticky=!0}},this._handlePopKey=()=>{this._direction=Array.from(this._pressedKeys).pop(),this._direction==null&&this._stopMovement()},this._stopMovement=()=>{this._isSticky=!1,this._direction=void 0,this._pressedKeys.clear(),this._setTimeout(void 0)},this._keyMap={[i.left]:"left",[i.right]:"right",[i.up]:"up",[i.down]:"down"},this.registerIncoming("key-down",r,this._handleKey),this.registerIncoming("key-up",r,this._handleKey),this.registerIncoming("blur",r,this._stopMovement),this._visibilityHandle=Nwe(n=>n?null:this._stopMovement())}onUninstall(){var e;this._stopMovement(),(e=this._visibilityHandle)==null||e.remove()}get _direction(){return this._currentDirection}set _direction(e){const i=this._currentDirection!=null;if(e!=null){if(i||this.view.mapViewNavigation.begin(),this._currentDirection!==e)switch(e){case"left":this.view.mapViewNavigation.continuousPanLeft();break;case"right":this.view.mapViewNavigation.continuousPanRight();break;case"up":this.view.mapViewNavigation.continuousPanUp();break;case"down":this.view.mapViewNavigation.continuousPanDown()}}else i&&this.view.mapViewNavigation.stop();this._currentDirection=e}_setTimeout(e){clearTimeout(this._timeout),this._timeout=e===void 0?void 0:setTimeout(()=>{this._timeout=void 0,e()},this._stickyKeyDuration)}},h7e=class extends Bs{constructor(e,i,r){super(!0),this.view=e,this.keys=i,this._keyToDirection=new Map,this._pressed=!1,this._addKeysMapping(i),this.registerIncoming("key-down",r,n=>this._handleKeyDown(n)),this.registerIncoming("key-up",r,n=>this._handleKeyUp(n)),this.registerIncoming("blur",r,()=>this._handleStop()),this._visibilityHandle=Nwe(n=>n?null:this._handleStop())}onUninstall(){var e;(e=this._visibilityHandle)==null||e.remove(),this._handleStop()}_addKeysMapping(e){this._addKeyMapping(e.clockwise,"clockwise"),this._addKeyMapping(e.counterClockwise,"counterClockwise"),this._addKeyMapping(e.reset,"reset")}_addKeyMapping(e,i){for(const r of e)this._keyToDirection.set(r,i)}_handleKeyDown(e){e.data.repeat||this._handleKey(e,!0)}_handleKeyUp(e){this._handleKey(e,!1)}_handleStop(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(e,i){const r=e.modifiers;if(r.size>0&&!r.has("Shift")||!this.view.constraints.rotationEnabled)return;const n=this._keyToDirection.get(e.data.key);if(this._pressed=n!=null,this._pressed){if(e.preventDefault(),i)switch(this.view.mapViewNavigation.begin(),n){case"clockwise":this.view.mapViewNavigation.continuousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continuousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation()}}},p7e=class extends Bs{constructor(e,i,r){super(!0),this.view=e,this.keys=i,this._keysToZoomAction={},this.registerIncoming("key-down",r,n=>this._handleKeyDown(n)),i.zoomIn.forEach(n=>this._keysToZoomAction[n]=0),i.zoomOut.forEach(n=>this._keysToZoomAction[n]=1)}_handleKeyDown(e){this._handleKey(e)}_handleKey(e){const i=e.modifiers;if(i.size>0&&!i.has("Shift"))return;const{key:r}=e.data;if(!(r in this._keysToZoomAction))return;const n=this._keysToZoomAction[r],{mapViewNavigation:s}=this.view;let a=null;switch(n){case 0:a=s.zoomIn();break;case 1:a=s.zoomOut();break;default:return}s.begin(),a.then(()=>s.end()),e.stopPropagation()}};const f7e=.6;let m7e=class extends Bs{constructor(e,i){super(!0),this._view=e,this._canZoom=!0,this.registerIncoming("mouse-wheel",i,r=>this._handleMouseWheel(r))}_handleMouseWheel(e){if(this._view.navigation.actionMap.mouseWheel!=="zoom"||(e.preventDefault(),e.stopPropagation(),!this._canZoom))return;const i=this._view.mapViewNavigation,{x:r,y:n,deltaY:s}=e.data,a=1/f7e**(1/60*s),o=i.zoom(a,[r,n]);this._canZoom=!1,o.catch(()=>{}).then(()=>{this._canZoom=!0,i.end()})}},g7e=class extends Bs{constructor(e){super(!0),this.view=e,this.registerIncoming("drag",r=>this._handleDrag(r)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const i=this.view.mapViewNavigation;this._dragEventSeparator=new u5({start:(r,n)=>{i.pinch.begin(this.view,n.data),n.stopPropagation()},update:(r,n)=>{i.pinch.update(this.view,n.data),n.stopPropagation()},end:(r,n)=>{i.pinch.end(this.view),n.stopPropagation()},condition:r=>r>=2})}_handleDrag(e){this._dragEventSeparator.handle(e)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}};function fse(t){const e=t.native;return e?{buttons:e.buttons.map(i=>i.pressed?i.value||1:0),axes:e.axes.map(i=>b7e(i,t.axisThreshold))}:{buttons:[],axes:[]}}function y7e(t,e){if(t.axes.length!==e.axes.length||t.buttons.length!==e.buttons.length)return!1;for(let i=0;i<t.axes.length;i++)if(t.axes[i]!==e.axes[i])return!1;for(let i=0;i<t.buttons.length;i++)if(t.buttons[i]!==e.buttons[i])return!1;return!0}function v7e(t){for(let e=0;e<t.axes.length;e++)if(t.axes[e]!==0)return!1;for(let e=0;e<t.buttons.length;e++)if(t.buttons[e]!==0)return!1;return!0}function b7e(t,e){const i=Math.abs(t);return i<e?0:Math.sign(t)*(i-e)/(1-e)}let w7e=class{constructor(e,i){this._element=e,this._input=i,this._hasEventListeners=!1,this._onConnectGamepad=s=>{this._connectGamepad(s.gamepad)},this._onDisconnectGamepad=s=>{const a=s.gamepad,o=a.index,l=this._inputDevices[o];l&&(this._emitGamepadEvent(a,fse(l),!1),this._inputDevices.splice(o,1),this._latestUpdate.splice(o,1),this._input.gamepad.devices.remove(l),this.ensurePollingState())},this._frameTask=null,this._latestUpdate=new Array,this._inputDevices=new Array,this._callback=null;const r="getGamepads"in window.navigator,n=window.isSecureContext;this.supported=r&&n,this.supported&&(mse(s=>this._connectGamepad(s)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(e){this._hasEventListeners!==e&&(this._hasEventListeners=e,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}set onEvent(e){this._callback=e}_connectGamepad(e){const i=new SY(e);i.deviceType!=="unknown"&&(this._inputDevices[e.index]=i,this._input.gamepad.devices.add(i)),this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this._frameTask==null&&(this._frameTask=GS({update:()=>this._readGamepadState()}))}_stopPolling(){this._frameTask!=null&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=new Array)}_readGamepadState(){const e=document.hasFocus(),i=this._element.contains(document.activeElement),r=this._input.gamepad.enabledFocusMode==="document"&&!e||this._input.gamepad.enabledFocusMode==="view"&&!i;mse(n=>{const s=this._inputDevices[n.index];if(!s)return;const a=this._latestUpdate[n.index],o=fse(s),l=r||v7e(o);a&&(a.timestamp===n.timestamp||!a.active&&l||y7e(a.state,o))||this._emitGamepadEvent(n,o,!l)})}_emitGamepadEvent(e,i,r){const n=this._latestUpdate[e.index],s=n&&n.active;if(!s&&!r)return;const a=!s&&r?"start":s&&r?"update":"end";this._latestUpdate[e.index]={timestamp:e.timestamp,state:i,active:r},this._callback&&this._callback({device:this._inputDevices[e.index],state:i,action:a})}};function _7e(t){if(!t||!t.connected)return!1;for(let e=0;e<t.axes.length;e++)if(isNaN(t.axes[e]))return!1;return!0}function mse(t){for(const e of navigator.getGamepads())_7e(e)&&t(e)}const gse=ve("edge"),x7e=ve("chrome"),$7e=ve("ff"),S7e=ve("safari"),yse="esri-view-surface",M1={touchNone:`${yse}--touch-none`,touchPan:`${yse}--touch-pan`};var yw;let T7e=(yw=class{constructor(e,i){this._active={},this._callback=()=>{},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=e,e.getAttribute("tabindex")||e.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new w7e(e,i),this._gamepadSource.onEvent=r=>this._callback("gamepad",r)}destroy(){this._callback=()=>{},this.activeEvents=null,this._activePointerCaptures.forEach(e=>this._releasePointerCaptureSafe(e)),this._activePointerCaptures.clear(),this._gamepadSource=Or(this._gamepadSource),this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(e){this._browserTouchPanningEnabled=e,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(e){this._callback=e}set activeEvents(e){for(const i in this._active)if(!e||!e.has(i)){const r=this._active[i];this._element.removeEventListener(C6[i],r),delete this._active[i]}e&&e.forEach(i=>{if(!this._active[i]&&C6[i]){const r=(this._eventHandlers[i]||this._handleDefault).bind(this,i);this._element.addEventListener(C6[i],r),this._active[i]=r}}),this._gamepadSource&&(this._gamepadSource.hasEventListeners=(e==null?void 0:e.has("gamepad"))??!1)}setPointerCapture(e,i){i?this._setPointerCaptureSafe(e.pointerId):(this._releasePointerCaptureSafe(e.pointerId),this._activePointerCaptures.delete(e.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?M1.touchNone:M1.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?M1.touchPan:M1.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(M1.touchNone),this._element.classList.remove(M1.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_setPointerCaptureSafe(e){try{this._element.setPointerCapture(e),this._activePointerCaptures.add(e)}catch{}}_releasePointerCaptureSafe(e){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(e))return;this._element.releasePointerCapture(e)}catch{}}_updateNormalizedPointerLikeEvent(e,i){const r=D0e(this._element,e);return yw.test.disableSubpixelCoordinates&&(r.x=Math.round(r.x),r.y=Math.round(r.y)),i.x=r.x,i.y=r.y,i}_handleKey(e,i){const{key:r}=i;r&&e==="key-up"&&this._keyDownState.delete(r);const n={native:i,key:r,repeat:!!r&&this._keyDownState.has(r)};r&&e==="key-down"&&this._keyDownState.add(n.key),this._callback(e,n)}_handlePointer(e,i){const r=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});this._callback(e,r)}_handlePointerPreventDefault(e,i){const r=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});i.preventDefault(),this._callback(e,r)}_getDeltaFromTrackpadOrMouseWheel(e){return e.shiftKey&&ve("mac")&&e.deltaY===0?e.deltaX:e.deltaY}_handleMouseWheel(e,i){let r=this._getDeltaFromTrackpadOrMouseWheel(i);switch(i.deltaMode){case 0:gse&&(r=r/document.documentElement.clientHeight*600);break;case 1:r*=30;break;case 2:r*=900}gse?r*=.7:x7e||S7e?r*=.6:$7e&&(r*=1.375);const n=100,s=Math.abs(r);s>n&&(r=r/s*200/(1+Math.exp(-.02*(s-n))));const a=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,deltaY:r});this._callback(e,a)}_handlePointerCaptureLost(e,i){this._activePointerCaptures.delete(i.pointerId),this._handleDefault(e,i)}_handleDefault(e,i){const r={native:i};i.preventDefault(),this._callback(e,r)}_preventAltKeyDefault(e){e.key==="Alt"&&e.preventDefault()}_preventMultiTouchPanning(e){e.touches.length>1&&e.preventDefault()}},yw.test={disableSubpixelCoordinates:!1},yw);const C6={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};let I7e=class extends Bs{constructor(){super(!0),this.registerIncoming("context-menu",e=>e.data.native.preventDefault())}};const Dwe=()=>({maximumClickDelay:300}),M7e=(t={})=>({...Dwe(),movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500,...t}),zY=(t={})=>({...Dwe(),maximumDoubleClickDistance:10,maximumDoubleTouchDistance:35,maximumDoubleClickDelay:250,maximumDoubleTouchDelay:350,...t});function OR(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)}function C7e(t,e){const i=e.x-t.x,r=e.y-t.y;return Math.sqrt(i*i+r*r)}function E7e(t,e){if(e?(e.radius=0,e.center.x=0,e.center.y=0):e={radius:0,center:Ns()},t.length===0)return e;if(t.length===1)return e.center.x=t[0].x,e.center.y=t[0].y,e;if(t.length===2){const[A,L]=t,[z,U]=[L.x-A.x,L.y-A.y];return e.radius=Math.sqrt(z*z+U*U)/2,e.center.x=(A.x+L.x)/2,e.center.y=(A.y+L.y)/2,e}let i=0,r=0;for(let A=0;A<t.length;A++)i+=t[A].x,r+=t[A].y;i/=t.length,r/=t.length;const n=t.map(A=>A.x-i),s=t.map(A=>A.y-r);let a=0,o=0,l=0,c=0,h=0,m=0,g=0;for(let A=0;A<n.length;A++){const L=n[A],z=s[A],U=L*L,B=z*z;a+=U,o+=B,l+=L*z,c+=U*L,h+=B*z,m+=L*B,g+=z*U}const v=.5*(c+m),b=.5*(h+g),x=a*o-l*l,$=(v*o-b*l)/x,M=(a*b-l*v)/x,k=Ns($+i,M+r);return{radius:Math.sqrt($*$+M*M+(a+o)/t.length),center:k}}function uw(t){const{native:e}=t,{pointerId:i,button:r,pointerType:n}=e;return n==="mouse"?`${i}:${r}`:`${n}`}let k7e=class extends Bs{constructor(e={},i=CT){super(!1),this._clock=i,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=Ns(0,0),this._pointerState=new Map,this._parameters=zY(e),this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new u5({start:(r,n)=>this._dragStart(r,n),update:(r,n)=>this._dragUpdate(n),end:(r,n)=>this._dragEnd(n)}),this.registerIncoming("drag",r=>this._dragEventSeparator.handle(r)),this.registerIncoming("pointer-down",r=>this._handlePointerDown(r)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(e=>{e.doubleTapTimeout=Dr(e.doubleTapTimeout)})}get hasPendingInputs(){for(const e of this._pointerState.values())if(e.doubleTapTimeout!=null)return!0;return!1}_clearPointerDown(e){const i=this._pointerState.get(e);i&&(i.doubleTapTimeout=Dr(i.doubleTapTimeout),this._pointerState.delete(e),this.refreshHasPendingInputs())}_dragStart(e,i){if(!this._doubleTapDragReady||e!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:r,modifiers:n}=i,{center:s}=r;this._dragStartCenter=s;const a=E6("begin",Ns(0,0),r);this._doubleTapDrag.emit(a,void 0,n),i.stopPropagation()}_dragUpdate(e){if(!this._doubleTapDragActive)return;const{data:i,modifiers:r}=e,{center:n}=i,s=E6("update",Ns(n.x-this._dragStartCenter.x,n.y-this._dragStartCenter.y),i);this._doubleTapDrag.emit(s,void 0,r),e.stopPropagation()}_dragEnd(e){if(!this._doubleTapDragActive)return;const{data:i,modifiers:r}=e,{center:n}=i,s=E6("end",Ns(n.x-this._dragStartCenter.x,n.y-this._dragStartCenter.y),i);this._doubleTapDrag.emit(s,void 0,r),this._doubleTapDragActive=!1,e.stopPropagation()}_handlePointerDown(e){const{data:i}=e,r=uw(i),n=this._pointerState.get(r),{pointerType:s}=i.native;if(n){const a=s==="touch"?this._parameters.maximumDoubleTouchDistance:this._parameters.maximumDoubleClickDistance;this._clearPointerDown(r),OR(n.event.data,i)>a?this._storePointerDown(e):this._doubleTapDragReady=!0}else this._storePointerDown(e)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(e){const{data:i}=e,{pointerType:r}=i.native,n=uw(i),s=r==="touch"?this._parameters.maximumDoubleTouchDelay:this._parameters.maximumDoubleClickDelay,a=this._clock.setTimeout(()=>this._clearPointerDown(n),s);this._pointerState.set(n,{event:e,doubleTapTimeout:a}),this.refreshHasPendingInputs()}};function E6(t,e,i){const{button:r,buttons:n,pointer:s,pointers:a,pointerType:o,timestamp:l}=i;return{action:t,delta:e,button:r,buttons:n,pointer:s,pointers:a,pointerType:o,timestamp:l}}let A7e=class extends Bs{constructor(e){super(!1),this._navigationTouch=e,this._startStateModifiers=new Set,this._activePointerMap=new Map,this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(e,i,r,n){return{action:e,pointerType:this._pointerType,button:this._mouseButton,buttons:i.buttons,timestamp:n,pointers:P7e(this._activePointerMap),pointer:i,angle:r.angle,radius:r.radius,center:r.center}}_addPointer(e){const i=e.native.pointerId,r=dO(this._activePointerMap).angle,n={event:e,initialAngle:0,lastAngle:0};this._activePointerMap.set(i,n);const s=OL(n,jwe(this._activePointerMap));n.initialAngle=s,n.lastAngle=s,this._updatePointerAngles(r)}_updatePointer(e){if(e&&e.x==null&&e.y==null)return;const i=e.native.pointerId,r=this._activePointerMap.get(i);r?r.event=e:this._addPointer(e)}_removePointer(e){const i=dO(this._activePointerMap).angle;this._activePointerMap.delete(e),this._updatePointerAngles(i)}_updatePointerAngles(e){const i=dO(this._activePointerMap);this._activePointerMap.forEach(r=>{r.initialAngle=OL(r,i)-e,r.lastAngle=OL(r,i)-e})}_emitEvent(e,i,r){const n=dO(this._activePointerMap);this._drag.emit(this._createPayload(e,i,n,r),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(e){const i=e.data.native.pointerId,r=e.timestamp;this._activePointerMap.get(i)&&(this._activePointerMap.size===1?(this._updatePointer(e.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",e.data,r),this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._removePointer(i)):(this._removePointer(i),this._emitEvent("removed",e.data,e.timestamp)))}_handlePointerDrag(e){const i=e.data,r=i.currentEvent,n=e.timestamp;switch(i.action){case"start":case"update":this._isDragging?this._activePointerMap.has(r.native.pointerId)?(this._updatePointer(r),!this._isCurrentDragSuppressed&&this._emitEvent("update",r,n)):(this._addPointer(r),this._emitEvent("added",r,n),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(r),this._pointerType=e.data.startEvent.pointerType,this._mouseButton=e.data.startEvent.button,this._startStateModifiers=e.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",r,n))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&this._pointerType==="touch"&&this._activePointerMap.size===1}};function jwe(t){const e=[];return t.forEach(i=>{e.push(Ns(i.event.x,i.event.y))}),E7e(e)}function dO(t){const e=jwe(t);let i=0;return t.forEach(r=>{let n=OL(r,e),s=n-r.lastAngle;for(;s>Math.PI;)s-=2*Math.PI;for(;s<-Math.PI;)s+=2*Math.PI;n=r.lastAngle+s,r.lastAngle=n;const a=n-r.initialAngle;i+=a}),i/=t.size||1,{angle:i,radius:e.radius,center:e.center}}function P7e(t){const e=new Map;return t.forEach((i,r)=>e.set(r,i.event)),e}function OL(t,e){const i=t.event,r=i.x-e.center.x,n=i.y-e.center.y;return Math.atan2(n,r)}let O7e=class extends Bs{constructor(e={},i=CT){super(!1),this._clock=i,this._pointerState=new Map,this._parameters=zY(e),this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach(e=>{e.immediateDoubleClick&&e.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(e){const i=e.data,r=uw(i);if(!this._pointerState.has(r)){const n={downButton:i.native.button,x:i.x,y:i.y,immediateDoubleClick:null};this._pointerState.set(r,n),this.startCapturingPointer(i.native)}}_handlePointerUp(e){const i=e.data,r=uw(i),n=this._pointerState.get(r);if(n&&n.downButton===i.native.button){const s=n.immediateDoubleClick,a=e.data.native.pointerType==="touch"?this._parameters.maximumDoubleTouchDistance:this._parameters.maximumDoubleClickDistance;s?(s.timeoutHandle.remove(),OR(s,e.data)>a?this._startImmediateDoubleClick(e,n):(this._immediateDoubleClick.emit(e.data,void 0,s.modifiers),this._removeState(i))):OR(n,e.data)>a?this._removeState(i):this._startImmediateDoubleClick(e,n)}}_startImmediateDoubleClick(e,i){const r=e.data.native.pointerType==="touch"?this._parameters.maximumDoubleTouchDelay:this._parameters.maximumDoubleClickDelay;i.immediateDoubleClick={x:e.data.x,y:e.data.y,modifiers:e.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(e.data),r)}}_removeState(e){const i=uw(e);this._pointerState.delete(i),this.stopCapturingPointer(e.native),this.refreshHasPendingInputs()}},L7e=class extends Bs{constructor(e={},i=CT){super(!1),this._clock=i,this._pointerState=new Map,this._parameters=M7e(e),this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",r=>this._handlePointerDown(r)),this.registerIncoming("pointer-up",r=>this._handlePointerLoss(r,"pointer-up")),this.registerIncoming("pointer-capture-lost",r=>this._handlePointerLoss(r,"pointer-capture-lost")),this.registerIncoming("pointer-cancel",r=>this._handlePointerLoss(r,"pointer-cancel")),this._moveHandle=this.registerIncoming("pointer-move",r=>this._handlePointerMove(r)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(e=>{e.holdTimeout=Dr(e.holdTimeout)}),super.onUninstall()}_handlePointerDown(e){const i=e.data,r=i.native.pointerId;let n=null;this._pointerState.size===0&&(n=this._clock.setTimeout(()=>{const a=this._pointerState.get(r);if(a){if(!a.isDragging){const o=a.previousEvent;this._pointerHold.emit(o,void 0,e.modifiers),a.holdEmitted=!0}a.holdTimeout=null}},this._parameters.holdDelay));const s={startEvent:i,previousEvent:i,startTimestamp:e.timestamp,isDragging:!1,downButton:i.native.button,holdTimeout:n,modifiers:new Set};this._pointerState.set(r,s),this.startCapturingPointer(i.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(e)}_handlePointerMove(e){const i=e.data,r=i.native.pointerId,n=this._pointerState.get(r);n&&(n.isDragging?this._pointerDrag.emit(hO("update",n,i),void 0,n.modifiers):C7e(i,n.startEvent)>this._getDragThreshold(i.native.pointerType)&&this._startDragging(e),n.previousEvent=i)}_getDragThreshold(e){switch(e){case"touch":return this._parameters.movementUntilTouchDrag;case"pen":return this._parameters.movementUntilPenDrag;default:return this._parameters.movementUntilMouseDrag}}_startDragging(e){const i=e.data,r=i.native.pointerId;this._pointerState.forEach(n=>{n.holdTimeout!=null&&(n.holdTimeout.remove(),n.holdTimeout=null),n.isDragging||(n.modifiers=e.modifiers,n.isDragging=!0,r===n.startEvent.native.pointerId?this._pointerDrag.emit(hO("start",n,i)):this._pointerDrag.emit(hO("start",n,n.previousEvent),e.timestamp))})}_handlePointerLoss(e,i){const r=e.data,n=r.native.pointerId,s=this._pointerState.get(n);s&&(s.holdTimeout!=null&&(s.holdTimeout.remove(),s.holdTimeout=null),s.isDragging?this._pointerDrag.emit(hO("end",s,i==="pointer-up"?r:s.previousEvent),void 0,s.modifiers):i==="pointer-up"&&s.downButton===r.native.button&&e.timestamp-s.startTimestamp<=this._parameters.maximumClickDelay&&!s.holdEmitted&&this._immediateClick.emit(r),this._pointerState.delete(n),this.stopCapturingPointer(r.native),this._pointerState.size===0&&this._moveHandle.pause())}};function hO(t,e,i){return{action:t,startEvent:e.startEvent,previousEvent:e.previousEvent,currentEvent:i}}let F7e=class extends Bs{constructor(e={},i=CT){super(!1),this._clock=i,this._pointerState=new Map,this._parameters=zY(e),this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",r=>this._handleImmediateClick(r)),this.registerIncoming("pointer-down",r=>this._handlePointerDown(r))}onUninstall(){this._pointerState.forEach(e=>e.doubleClickTimer=Dr(e.doubleClickTimer))}get hasPendingInputs(){for(const e of this._pointerState.values())if(e.doubleClickTimer!=null)return!0;return!1}_clearDoubleClickTimer(e,i){const r=this._pointerState.get(e);r&&(r.doubleClickTimer=Dr(r.doubleClickTimer),i&&this._click.emit(r.event.data,void 0,r.event.modifiers),this._pointerState.delete(e),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(e){const i=this._pointerState.get(e);i.pointerDownCount===1&&this._click.emit(i.event.data,void 0,i.event.modifiers),i.doubleClickTimer=null,this._pointerState.delete(e),this.refreshHasPendingInputs()}_handleImmediateClick(e){const i=e.data,{pointerType:r}=i.native,n=R7e(i);if(!this._pointerState.has(n))return void this._startClick(e);const s=this._pointerState.get(n),{data:a,modifiers:o}=s.event,l=r==="touch"?this._parameters.maximumDoubleTouchDistance:this._parameters.maximumDoubleClickDistance;OR(a,i)>l?(this._clearDoubleClickTimer(n,!0),this._startClick(e)):(this._clearDoubleClickTimer(n,!1),s.pointerDownCount===2&&this._doubleClick.emit(a,void 0,o))}_handlePointerDown(e){const i=uw(e.data),r=this._pointerState.get(i);r&&(r.pointerDownCount+=1)}_startClick(e){const{data:i}=e,{native:{pointerType:r}}=i,n=uw(i),s=r==="touch"?this._parameters.maximumDoubleTouchDelay:this._parameters.maximumDoubleClickDelay,a=this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(n),s);this._pointerState.set(n,{event:e,doubleClickTimer:a,pointerDownCount:1}),this.refreshHasPendingInputs()}};function R7e(t){const{pointerId:e,pointerType:i,button:r}=t.native;return i==="mouse"?`${e}:${r}`:`${i}`}const pO={counter:"Control",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwise:["a","A"],counterClockwise:["d","D"],reset:["n","N"]}},vse=Symbol("handles");let Sx=class extends et{initialize(){const e=()=>{var i;return(i=this.view)==null?void 0:i.ready};this.addHandles([cn(()=>!e(),()=>this._disconnect()),cn(e,()=>this._connect())])}destroy(){this._disconnect()}get latestPointerInfo(){var e;return(e=this._inputManager)==null?void 0:e.latestPointerInfo}get multiTouchActive(){var e;return((e=this._inputManager)==null?void 0:e.multiTouchActive)??!1}isModifierKeyDown(e){var i;return((i=this._inputManager)==null?void 0:i.isModifierKeyDown(e))??!1}_disconnect(){this.view.viewEvents.disconnect(),this.removeHandles(vse),this._inputManager=Or(this._inputManager)}_connect(){const e=this.view.surface,i=new T7e(e,this.view.input),r=[new O7e,new L7e,new F7e,new A7e(this.view.navigation),new k7e],n=new rd({eventSource:i,recognizers:r}),s=new vqe(this.view,["primary"]),a=new bqe(this.view,["secondary"]);n.installHandlers("prevent-context-menu",[new I7e],Vm.INTERNAL),n.installHandlers("navigation",[new g7e(this.view),new o7e(this.view),new m7e(this.view),new dse(this.view),new dse(this.view,[pO.counter]),s,new d7e(this.view,pO.pan),new p7e(this.view,pO.zoom),new h7e(this.view,pO.rotate),a,new yqe(this.view,"touch")],Vm.INTERNAL),this.view.viewEvents.connect(n),this._source=i,this._inputManager=n,this.addHandles([be(()=>{var o,l;return(l=(o=this.view)==null?void 0:o.navigation)==null?void 0:l.browserTouchPanEnabled},o=>{this._source&&(this._source.browserTouchPanningEnabled=!o)},Ft),be(()=>{const{actionMap:o}=this.view.navigation;return{panActions:use("pan",o),rotateActions:use("rotate",o)}},({panActions:o,rotateActions:l})=>{s.pointerActions=o,a.pointerActions=l},Ka)],vse)}get test(){}};d([f()],Sx.prototype,"view",void 0),d([f()],Sx.prototype,"latestPointerInfo",null),d([f()],Sx.prototype,"multiTouchActive",null),Sx=d([V("esri.views.2d.input.MapViewInputManager")],Sx);const z7e=Sx,N7e=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),this.goToManager=new PL({view:this}),this.animationsEnabled=!0,this.inputManager=new z7e({view:this}),this.addHandles([this.on("resize",n=>this.stateManager.resize(n.width,n.height))])}get interacting(){return this.navigating}get stationary(){return!this.animation&&!this.navigating&&!this.resizing&&this.stationaryManager.stationary}on(r,n,s,a){return this.viewEvents.on(r,n,s,a)||super.on(r,n)}hasEventListener(r){return super.hasEventListener(r)||this.viewEvents.hasHandler(r)}goTo(r,n){return this.goToManager.goTo(r,n)}toMap(r){if(!this.ready)return null;const n=V0e(r)?j0e(this,r):r;return this.stateManager.toMap(n)}};return d([f()],i.prototype,"goToManager",void 0),d([f({readOnly:!0})],i.prototype,"interacting",null),d([f()],i.prototype,"stationary",null),d([f()],i.prototype,"animationsEnabled",void 0),d([f({readOnly:!0})],i.prototype,"inputManager",void 0),i=d([V("esri.views.Viewport2DMixin")],i),i};let bse=class{constructor(e){this._view=e,this.viewpoint=new Ds({targetGeometry:new St,scale:0,rotation:0})}get view(){return this._view}get size(){const[e,i]=this._view.size;return Math.sqrt(e*e+i*i)}get scale(){return this.viewpoint.scale}get rotation(){return this.viewpoint.rotation}get center(){return this.viewpoint.targetGeometry}get scaleToResolutionFactor(){return dwe(this.center.spatialReference)}pixelsPerPanAtZoom(e){return 1/(e*this.scaleToResolutionFactor)}zoomAtPixelsPerPan(e){return 1/(e*this.scaleToResolutionFactor)}pixelsPerRotate(){return this.size/2}compareTo(e,i){i.pan=hme(this.center,e.center);let r=Math.abs(e.rotation-this.rotation);r=r>=180?360-r:r,i.rotate=RT(r),i.sourceZoom=this.scale,i.targetZoom=e.scale}interpolate(e,i,r){const{pan:n,rotate:s,zoom:a,zoomOffset:o}=r,{center:l}=this;l.spatialReference=e.center.spatialReference,l.x=YM(e.center.x,i.center.x,n),l.y=YM(e.center.y,i.center.y,n),this.viewpoint.scale=YM(e.scale,i.scale+o,a);let c=e.rotation;const h=i.rotation;Math.abs(h-c)>=180&&(c+=360*(c<h?1:-1)),this.viewpoint.rotation=YM(c,h,s)}copyFrom(e){lo(this.viewpoint,e.viewpoint),this._view=e.view}};function wM(t,e,i,r){const n=3*t,s=3*(i-t)-n,a=1-n-s,o=3*e,l=3*(r-e)-o,c=1-o-l;function h(b){return((a*b+s)*b+n)*b}function m(b){return((c*b+l)*b+o)*b}function g(b){return(3*a*b+2*s)*b+n}function v(b,x){let $,M,k,A,L,z;for(k=b,z=0;z<8;z++){if(A=h(k)-b,Math.abs(A)<x)return k;if(L=g(k),Math.abs(L)<1e-6)break;k-=A/L}if($=0,M=1,k=b,k<$)return $;if(k>M)return M;for(;$<M;){if(A=h(k),Math.abs(A-b)<x)return k;b>A?$=k:M=k,k=.5*(M-$)+$}return k}return function(b,x=1e-6){return m(v(b,x))}}const au={};au.ease=wM(.25,.1,.25,1),au.linear=wM(0,0,1,1),au.easeIn=au["ease-in"]=wM(.42,0,1,1),au.easeOut=au["ease-out"]=wM(0,0,.58,1),au.easeInOut=au["ease-in-out"]=wM(.42,0,.58,1);const D7e=t=>t,CE=t=>t*t,LR=t=>1-CE(1-t),wse=t=>t<.5?CE(2*t)/2:(LR(2*(t-.5))+1)/2,FR=t=>t*t*t,n7=t=>1-FR(1-t),_se=t=>t<.5?FR(2*t)/2:(n7(2*(t-.5))+1)/2,RR=t=>t*t*t*t,s7=t=>1-RR(1-t),xse=t=>t<.5?RR(2*t)/2:(s7(2*(t-.5))+1)/2,zR=t=>t*t*t*t*t,a7=t=>1-zR(1-t),$se=t=>t<.5?zR(2*t)/2:(a7(2*(t-.5))+1)/2,NR=t=>1-Math.cos(t*Math.PI/2),o7=t=>1-NR(1-t),Sse=t=>t<.5?NR(2*t)/2:(o7(2*(t-.5))+1)/2,DR=t=>2**(10*(t-1)),jR=t=>1-DR(1-t),Tse=t=>t<.5?DR(2*t)/2:(jR(2*(t-.5))+1)/2,VR=t=>-(Math.sqrt(1-t*t)-1),l7=t=>1-VR(1-t),Ise=t=>t<.5?VR(2*t)/2:(l7(2*(t-.5))+1)/2;function Su(t){const e=2*(t-Math.sqrt((t-1)*t)),i=e/2/t;return r=>r<i?t*r*r:e*r-e+1}function Tu(t,e){return(i,r)=>i<e?e*t(i/e,r):1-t((1-i)/(1-e),r)*(1-e)}const Mse=Tu(Su(1),1),Cse=Tu(Su(1),0),UR=Tu(Su(1),.5),Ese=Tu(Su(2),1),kse=Tu(Su(2),0),Ase=Tu(Su(2),.5),Pse=Tu(Su(3),1),Ose=Tu(Su(3),0),Lse=Tu(Su(3),.5),Fse=Tu(Su(4),1),Rse=Tu(Su(4),0),zse=Tu(Su(4),.5),Nse={linear:D7e,"in-quad":CE,"out-quad":LR,"in-out-quad":wse,"in-coast-quad":Mse,"out-coast-quad":Cse,"in-out-coast-quad":UR,"in-cubic":FR,"out-cubic":n7,"in-out-cubic":_se,"in-coast-cubic":Ese,"out-coast-cubic":kse,"in-out-coast-cubic":Ase,"in-quart":RR,"out-quart":s7,"in-out-quart":xse,"in-coast-quart":Pse,"out-coast-quart":Ose,"in-out-coast-quart":Lse,"in-quint":zR,"out-quint":a7,"in-out-quint":$se,"in-coast-quint":Fse,"out-coast-quint":Rse,"in-out-coast-quint":zse,"in-sine":NR,"out-sine":o7,"in-out-sine":Sse,"in-expo":DR,"out-expo":jR,"in-out-expo":Tse,"in-circ":VR,"out-circ":l7,"in-out-circ":Ise,"quad-in":CE,"quad-out":LR,"quad-in-out":wse,"quad-in-coast":Mse,"quad-out-coast":Cse,"quad-in-out-coast":UR,"cubic-in":FR,"cubic-out":n7,"cubic-in-out":_se,"cubic-in-coast":Ese,"cubic-out-coast":kse,"cubic-in-out-coast":Ase,"quart-in":RR,"quart-out":s7,"quart-in-out":xse,"quart-in-coast":Pse,"quart-out-coast":Ose,"quart-in-out-coast":Lse,"quint-in":zR,"quint-out":a7,"quint-in-out":$se,"quint-in-coast":Fse,"quint-out-coast":Rse,"quint-in-out-coast":zse,"sine-in":NR,"sine-out":o7,"sine-in-out":Sse,"expo-in":DR,"expo-out":jR,"expo-in-out":Tse,"circ-in":VR,"circ-out":l7,"circ-in-out":Ise,ease:t=>au.ease(t),"ease-in":t=>au.easeIn(t),"ease-out":t=>au.easeOut(t),"ease-in-out":t=>au.easeInOut(t)};let j7e=class{constructor(){this.pan=0,this.rotate=0,this.fov=0,this.sourceZoom=0,this.targetZoom=0}};const BR={desiredScreenFlow:2,minDuration:500,maxDuration:8e3},Vwe={maxDuration:4e3};let V7e=class Uwe{constructor(e){this._createCamera=e,this.compared=new j7e,this.segmentStart=0,this.segmentEnd=1,this.settings={desiredScreenFlow:BR.desiredScreenFlow},this.source=e(),this.target=e()}clone(){const e=new Uwe(this._createCamera);return e.copyFrom(this),e}copyFrom(e){this.update(e.source,e.target,e.settings)}update(e,i,r){this.source!==e&&this.source.copyFrom(e),this.target!==i&&this.target.copyFrom(i),this.source.compareTo(this.target,this.compared),this.settings.desiredScreenFlow=r.desiredScreenFlow??BR.desiredScreenFlow,this.desiredPixelFlow=this.settings.desiredScreenFlow*this.target.size,this.halfWindowSize=this.target.size/2}halfWindowPanAtZoom(e){const i=this.target.pixelsPerPanAtZoom(e);return this.halfWindowSize/i}get hasZoom(){return Math.abs(this.compared.sourceZoom-this.compared.targetZoom)>1e-5}get hasPan(){return this.compared.pan>qo()}get hasFov(){return Math.abs(this.compared.fov)>qo()}get hasRotate(){return this.compared.rotate>qo()}},U7e=class{constructor(){this.pan=0,this.rotate=0,this.zoom=0,this.fov=0,this.zoomOffset=0}},B7e=class{constructor(){this.segments=new Array}get time(){return this.segments.reduce((e,i)=>e+i.time,0)}interpolateComponentsAt(e,i){e=Math.min(Math.max(e,0),1),e*=this.time;let r=0,n=0;const s=this.definition,a=this.segments.reduce((o,l)=>o||l.definition.hasZoom,!1);for(let o=0;o<this.segments.length;o++){const l=this.segments[o],c=l.definition;if(e<=l.time||o===this.segments.length-1){if(this.segmentInterpolateComponentsAt(l,l.time===0?0:e/l.time,i),s.hasPan&&!isNaN(i.pan)&&isFinite(s.compared.pan)?i.pan=(r+c.compared.pan*i.pan)/s.compared.pan:i.pan=1,s.hasRotate&&!isNaN(i.rotate)&&isFinite(s.compared.rotate)?i.rotate=(n+c.compared.rotate*i.rotate)/s.compared.rotate:i.rotate=1,a&&!isNaN(i.zoom)&&isFinite(c.compared.targetZoom)){const{sourceZoom:h,targetZoom:m}=c.compared,g=i.zoom*(m-h)+h,v=this.segments[0].definition.compared.sourceZoom,b=this.segments[this.segments.length-1].definition.compared.targetZoom,x=Math.abs(m-v)>Math.abs(h-v)?m:h;i.zoomOffset=x-b,i.zoom=(g-v)/(x-v)}else i.zoom=1;return i}e-=l.time,r+=c.compared.pan,n+=c.compared.rotate}}segmentInterpolateComponentsAt(e,i,r){e.interpolateComponentsAt(i,r)}},k6=class{get time(){return this._time}constructor(e){e&&this.update(e)}update(e){e&&(this.definition?this.definition.copyFrom(e):this.definition=e.clone()),this._updatePrecomputedVariables(),this._updatePixelFlow()}_updatePrecomputedVariables(){const e=this.definition,i=e.compared,r=i.sourceZoom,n=i.targetZoom;this._zoomSign=r>n?1:-1,this._panPixelsAtSource=i.pan*e.source.pixelsPerPanAtZoom(r);const s=(e.source.pixelsPerRotate()+e.target.pixelsPerRotate())/2;this._rotatePixels=i.rotate*s}_updatePixelFlow(){const e=this.definition.compared.sourceZoom,i=this.definition.compared.targetZoom,{hasZoom:r,hasPan:n,hasRotate:s}=this.definition;let a=0,o=0;r&&(n&&(a=(i/e-1)/(-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2*this._panPixelsAtSource)),s&&(o=this._zoomSign*(Math.log(e/i)/Math.LN2)*this.definition.halfWindowSize/this._rotatePixels)),this._zoomPixelFlow=0,this._panPixelFlow=0,this._rotatePixelFlow=0;const l=this.definition.desiredPixelFlow;if(r&&n&&s){const c=a+o+a*o;this._zoomPixelFlow=a*o/c*l,this._panPixelFlow=o/c*l,this._rotatePixelFlow=a/c*l}else if(r&&n){const c=1+a;this._zoomPixelFlow=a/c*l,this._panPixelFlow=1/c*l}else if(r&&s){const c=1+o;this._zoomPixelFlow=o/c*l,this._rotatePixelFlow=1/c*l}else if(n&&s){const c=this._panPixelsAtSource/this._rotatePixels,h=1+c;this._panPixelFlow=c/h*l,this._rotatePixelFlow=1/h*l}else n?this._panPixelFlow=l:r?this._zoomPixelFlow=l:s&&(this._rotatePixelFlow=l);if(this._time=Math.max(this.rotateTime,this.zoomTime,this.panTime),this.fovTime>this._time){const c=this.fovTime/this._time;this._time=this.fovTime,this._zoomPixelFlow/=c,this._panPixelFlow/=c,this._rotatePixelFlow/=c}}get rotateTime(){return this.definition.hasRotate?this._rotatePixels/this._rotatePixelFlow:0}get zoomTime(){return this.definition.hasZoom?this._zoomSign*(Math.log(this.definition.compared.sourceZoom/this.definition.compared.targetZoom)/Math.LN2)*this.definition.halfWindowSize/this._zoomPixelFlow:0}get fovTime(){return this.definition.hasFov?Math.abs(this.definition.compared.fov)/q7e:0}get panTime(){if(!this.definition.hasPan)return 0;if(this.definition.hasZoom){const e=-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2,i=e*this._panPixelsAtSource;return Math.log(i*(this._zoomPixelFlow/this._panPixelFlow)+1)/(e*this._zoomPixelFlow)}return this._panPixelsAtSource/this._panPixelFlow}_interpolateComponentsZoom(e){if(e===0||e===1)return e;if(this.definition.hasZoom){const i=this.definition.compared.sourceZoom,r=this.definition.compared.targetZoom;return(i*(i/r)**-e-i)/(r-i)}return e}_interpolateComponentsFov(e){if(e===0)return this.definition.segmentStart;if(e===1)return this.definition.segmentEnd;if(this.definition.hasFov){const{segmentStart:i,segmentEnd:r}=this.definition;return i+e*(r-i)}return this.definition.segmentStart}_interpolateComponentsPan(e){if(e===0||e===1)return e;if(this.definition.hasPan&&this.definition.hasZoom){const i=-1/(this._zoomSign*this.definition.halfWindowSize)*this._zoomPixelFlow;return 1/this._panPixelsAtSource*(this._panPixelFlow*(2**(i*e*this._time)-1))/(i*Math.LN2)}return e}_interpolateComponentsRotate(e){return e}interpolateComponentsAt(e,i){e=Math.min(Math.max(e,0),1),i.zoom=this._interpolateComponentsZoom(e),i.pan=this._interpolateComponentsPan(e),i.rotate=this._interpolateComponentsRotate(e),i.zoomOffset=0,i.fov=this._interpolateComponentsFov(e)}};const q7e=RT(45);function H7e(t,e,i){const r=e-t.compared.sourceZoom,n=t.halfWindowPanAtZoom(r);return-t.halfWindowSize*(i.ascensionFactor*Math.LN2*t.compared.pan+n)*Math.log(t.compared.sourceZoom/e)/(t.desiredPixelFlow*Math.LN2*n)}function G7e(t,e,i){const r=1/e,n=Math.log(t.compared.sourceZoom*r),s=1/t.desiredPixelFlow,a=1/Math.LN2,o=e-t.compared.sourceZoom,l=1/o,c=(i.ascensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(o))/t.halfWindowPanAtZoom(1);return t.halfWindowSize*r*s*a*l*c-t.halfWindowSize*n*s*a*l+t.halfWindowSize*n*s*a*c/(o*o)}function W7e(t,e,i){const r=e-t.compared.sourceZoom,n=1/r,s=1/e,a=Math.log(t.compared.sourceZoom*s),o=(i.ascensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(r))/t.halfWindowPanAtZoom(1);return t.halfWindowSize*n*(-2*n*s*o+2*n*a+2*s-2*a*o/(r*r)-o/(e*e))/(t.desiredPixelFlow*Math.LN2)}function Z7e(t,e){return-t.halfWindowSize*Math.log(t.compared.sourceZoom/e)/(t.desiredPixelFlow*Math.LN2)}function Y7e(t,e){return t.halfWindowSize/(e*t.desiredPixelFlow*Math.LN2)}function J7e(t,e){return-t.halfWindowSize/(e*e*t.desiredPixelFlow*Math.LN2)}function X7e(t,e,i){return-t.compared.pan*t.halfWindowSize*(i.ascensionFactor+i.descensionFactor-1)/(t.desiredPixelFlow*t.halfWindowPanAtZoom(e))}function Q7e(t,e,i){return t.compared.pan*t.halfWindowSize*(i.ascensionFactor+i.descensionFactor-1)/(t.desiredPixelFlow*t.halfWindowPanAtZoom(e*e))}function K7e(t,e,i){return-2*t.compared.pan*t.halfWindowSize*(i.ascensionFactor+i.descensionFactor-1)/(t.desiredPixelFlow*t.halfWindowPanAtZoom(e*e*e))}function eHe(t,e,i){return t.halfWindowSize*(-t.halfWindowPanAtZoom(e)-i.descensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(t.compared.targetZoom))*Math.log(e/t.compared.targetZoom)/(t.desiredPixelFlow*Math.LN2*t.halfWindowPanAtZoom(-e+t.compared.targetZoom))}function tHe(t,e,i){const r=Math.log(e/t.compared.targetZoom),n=1/t.desiredPixelFlow,s=1/Math.LN2,a=-e+t.compared.targetZoom,o=1/a,l=(-t.halfWindowPanAtZoom(e)-i.descensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(t.compared.targetZoom))/t.halfWindowPanAtZoom(1);return-t.halfWindowSize*r*n*s*o+t.halfWindowSize*r*n*s*l/(a*a)+t.halfWindowSize*n*s*o*l/e}function iHe(t,e,i){const r=e-t.compared.targetZoom,n=1/r,s=1/e,a=Math.log(e/t.compared.targetZoom),o=(t.halfWindowPanAtZoom(e)+i.descensionFactor*Math.LN2*t.compared.pan-t.halfWindowPanAtZoom(t.compared.targetZoom))/t.halfWindowPanAtZoom(1);return t.halfWindowSize*n*(-2*n*s*o-2*n*a+2*s+2*a*o/(r*r)-o/(e*e))/(t.desiredPixelFlow*Math.LN2)}function rHe(t,e){return t.halfWindowSize*Math.log(e/t.compared.targetZoom)/(t.desiredPixelFlow*Math.LN2)}function nHe(t,e){return t.halfWindowSize/(e*t.desiredPixelFlow*Math.LN2)}function sHe(t,e){return-t.halfWindowSize/(e*e*t.desiredPixelFlow*Math.LN2)}function aHe(t){const e=t.compared.sourceZoom-t.compared.targetZoom;if(e===0)return t.compared.pan*t.halfWindowSize/(t.desiredPixelFlow*t.halfWindowPanAtZoom(t.compared.sourceZoom));const i=Math.LN2*t.compared.pan,r=e,n=t.halfWindowPanAtZoom(r),s=t.halfWindowSize*Math.log(t.compared.sourceZoom/t.compared.targetZoom)/(t.desiredPixelFlow*Math.LN2*n);return t.compared.sourceZoom<=t.compared.targetZoom?s*(i-n):s*(i+n)}function oHe(t,e){let i=lHe(t,e);const r={ascensionFactor:e.ascensionFactor!=null?e.ascensionFactor:.5,descensionFactor:e.descensionFactor!=null?e.descensionFactor:.5},n=r.ascensionFactor===0,s=r.descensionFactor===0,a=n?Z7e:H7e,o=n?Y7e:G7e,l=n?J7e:W7e,c=s?rHe:eHe,h=s?nHe:tHe,m=s?sHe:iHe,g=z=>a(t,z,r)+X7e(t,z,r)+c(t,z,r),v=z=>o(t,z,r)+Q7e(t,z,r)+h(t,z,r),b=z=>l(t,z,r)+K7e(t,z,r)+m(t,z,r);let x=g(i);const $=aHe(t);let M;const k=e.maximumIterations||20,A=e.maximumDistance!=null?e.maximumDistance:1/0;for(M=0;M<k;M++){const z=e.desiredSlope??1e-6;let U=v(i);Math.abs(U)>z&&(U+=z);const B=U/b(i);if(isNaN(B)||i>=A&&B<0){if(!isFinite(A))return null;i=A,x=g(i);break}if(i-=B,i<=t.compared.sourceZoom||i<=t.compared.targetZoom)return null;const X=g(i);if(Math.abs(X-x)/x<=.005)break;x=X}return isNaN(x)||x>$*(1-.3)||i<=t.compared.sourceZoom||i<=t.compared.targetZoom?null:i}function lHe(t,e){const i=Math.max(t.compared.sourceZoom,t.compared.targetZoom),r=t.source.zoomAtPixelsPerPan(t.desiredPixelFlow/t.compared.pan)/2;return r<i?e.maximumDistance!=null?i+(e.maximumDistance-i)/2:1.5*i:e.maximumDistance?Math.min(e.maximumDistance,r):r}let cHe=class extends B7e{constructor(e,i){super(),this._preallocSegments=[new k6,new k6,new k6],this._ascensionSegment=null,this._descensionSegment=null,this.update(e,i)}update(e,i){if(!e)return;this.definition?this.definition.copyFrom(e):this.definition=e.clone();const r=i!=null&&i.apex?oHe(e,i.apex):null;this.segments.length=0,this._ascensionSegment=null,this._descensionSegment=null,r?this._updateWithApex(r,i==null?void 0:i.apex):this._updateWithoutApex()}segmentInterpolateComponentsAt(e,i,r){e.interpolateComponentsAt(i,r),e===this._ascensionSegment?r.zoom=LR(r.zoom):e===this._descensionSegment&&(r.zoom=CE(r.zoom))}_updateWithApex(e,i){const[r,n,s]=this._preallocSegments,a=(i==null?void 0:i.ascensionFactor)??.5,o=Math.min(1-a,(i==null?void 0:i.ascensionFactor)!=null&&i.descensionFactor!=null?i.descensionFactor:.5),l=1-a-o;r.definition?r.definition.copyFrom(this.definition):r.definition=this.definition.clone(),r.definition.compared.targetZoom=e,r.definition.compared.pan=this.definition.compared.pan*a,r.definition.compared.rotate=this.definition.compared.rotate*a,r.definition.segmentEnd=a,r.update(),this._ascensionSegment=r,this.segments.push(r),l>0&&(n.definition?n.definition.copyFrom(this.definition):n.definition=this.definition.clone(),n.definition.copyFrom(this.definition),n.definition.compared.sourceZoom=e,n.definition.compared.targetZoom=e,n.definition.compared.pan=this.definition.compared.pan*l,n.definition.compared.rotate=this.definition.compared.rotate*l,n.definition.segmentStart=r.definition.segmentEnd,n.definition.segmentEnd=r.definition.segmentEnd+l,n.update(),this.segments.push(n)),s.definition?s.definition.copyFrom(this.definition):s.definition=this.definition.clone(),s.definition.compared.sourceZoom=e,s.definition.compared.pan=this.definition.compared.pan*o,s.definition.compared.rotate=this.definition.compared.rotate*o,s.definition.segmentStart=a+l,s.update(),this._descensionSegment=s,this.segments.push(s)}_updateWithoutApex(){const[e]=this._preallocSegments;e.update(this.definition),this.segments.push(e)}};const uHe=new U7e;let dHe=class{get time(){return this._time}get isLinear(){return this.path.segments.length===1}constructor(e){this._time=0,this._easing=UR,this.definition=new V7e(e),this.path=new cHe}update(e,i,r){this.definition.update(e,i,r),this.path.update(this.definition,r),this._time=this._applyTimeSettings(UAe(isFinite(this.path.time)?this.path.time:0),r),this._easing=r.easing??(this._time>=1e3?UR:jR)}cameraAt(e,i){e=Math.min(Math.max(0,e),1),e=this._normalizedEasing(e);const r=this.path.interpolateComponentsAt(e,uHe);i.interpolate(this.definition.source,this.definition.target,r)}_normalizedEasing(e){const i=this._easing(0,this._time),r=this._easing(1,this._time);return(this._easing(e,this._time)-i)/(r-i)}_applyTimeSettings(e,i){const r=i.speedFactor!=null?i.speedFactor:1,n=i.minDuration??BR.minDuration/r,s=i.maxDuration??BR.maxDuration/r;return e=i.duration!=null?i.duration:Math.min(Math.max(e/r,n),s)}};const hHe=2e3,pHe=64;let fHe=class{constructor(e){this._view=e,this._animation=new dHe(()=>new bse(this._view)),this._current=new bse(this._view)}get _source(){return this._animation.definition.source}get _target(){return this._animation.definition.target}get duration(){return this._animation.time}get animation(){return this._animation}update(e,i,r={}){lo(this._current.viewpoint,e),lo(this._source.viewpoint,e),lo(this._target.viewpoint,i),this._animation.update(this._source,this._target,r)}applyRatio(e,i){this._animation.cameraAt(i,this._current),lo(e,this._current.viewpoint)}},Tx=class extends et{constructor(e){super(e),this._animation=null,this._destinationViewState=new FY,this.updateFunction=null,this.easing=Nse.ease,this.viewpoint=new Ds({targetGeometry:new St,scale:0,rotation:0}),this._updateTask=GS({postRender:this._postRender.bind(this)}),this._updateTask.pause(),this._transition=new fHe(e.view)}destroy(){this._updateTask=Dr(this._updateTask)}get animation(){return this._animation}set animation(e){this._animation=e,this.view.animation=e}animate(e,i,r){this.stop();const n=this.viewpoint;lo(n,i);const s=e.target;this._transition.update(this.viewpoint,s,{apex:{maximumDistance:Math.min(Math.min(i.scale,s.scale)*pHe,this.view.constraints.effectiveMinScale),desiredSlope:5e-8},duration:r==null?void 0:r.duration,maxDuration:(r==null?void 0:r.animationMode)==="auto"?1/0:(r==null?void 0:r.maxDuration)??Vwe.maxDuration,speedFactor:r==null?void 0:r.speedFactor,easing:(typeof(r==null?void 0:r.easing)=="string"?Nse[r.easing]:r==null?void 0:r.easing)||this.easing}),(r==null?void 0:r.animationMode)==="auto"&&(this._destinationViewState.copy(this.view.state),this._destinationViewState.viewpoint=s,mHe(this._transition.animation,r,this.view.state,this._destinationViewState)||this._transition.update(this.viewpoint,s,{duration:0}));const a=()=>{this.animation===e&&this._updateTask&&(e.state==="finished"&&(this._transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return e.when(a,a),this._startTime=performance.now(),this._updateTask.resume(),this.animation=e,e}animateContinuous(e,i){this.stop(),this.updateFunction=i,this.viewpoint=e;const r=new i7({target:e.clone()}),n=()=>{this.animation===r&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return r.when(n,n),this._startTime=performance.now(),this._updateTask.resume(),this.animation=r,r}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(e){var r,n;const i=this.animation;if(i&&i.state!==i7.state.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,e.deltaTime),(r=this.animation)==null||r.update(this.viewpoint);else{const s=performance.now()-this._startTime,a=this._transition.duration,o=a>0?s/a:1,l=o>=1;this._transition.applyRatio(this.viewpoint,o),l&&((n=this.animation)==null||n.finish())}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};function mHe(t,e,i,r){if((e==null?void 0:e.duration)!=null)return!0;const{time:n,isLinear:s}=t,a=(e==null?void 0:e.speedFactor)||1;if(n>((e==null?void 0:e.maxDuration)??Vwe.maxDuration/a))return!1;if(s){const l=Tn(),c=Ns(...r.toScreen(l,...i.center)),h=Ns(...i.toScreen(l,...r.center)),m=h!=null&&h.x>-1*i.size[0]&&h.x<(1.5+.5)*i.size[0]&&h.y>-1*i.size[1]&&h.y<(1.5+.5)*i.size[1],g=c!=null&&c.x>-1*r.size[0]&&c.x<(1.5+.5)*r.size[0]&&c.y>-1*r.size[1]&&c.y<(1.5+.5)*r.size[1];if(n>hHe/a&&!m&&!g)return!1}return!0}d([f()],Tx.prototype,"easing",void 0),d([f()],Tx.prototype,"view",void 0),d([f()],Tx.prototype,"viewpoint",void 0),Tx=d([V("esri.views.2d.AnimationManager")],Tx);const gHe=Tx;function Br(){return Promise.all([de(()=>import("./webglDeps-B9UV4QWC.js"),__vite__mapDeps([157,126,158,159,160,32])),de(()=>import("./mapViewDeps-BNWjabwT.js"),__vite__mapDeps([161,162,163,126,158,159,117,58,164,60,160,32,125,31,165,57,79,166,106,109,11,65,167,62,63,157,168,74,169,170,105,171,115,116,56,59,15,14,172,64,173,61,174,66,71,175,54,176,177,178,179,122,180,181]))])}const _M=()=>Br().then(()=>de(()=>import("./TileLayerView2D-D4_wqQQ7.js"),__vite__mapDeps([182,166,165,57,31,159,160,32,125,126,79,106,109,11,168,163,158,117,164,60,74,169,170,105,162,58,65,62,63,115,116,174,56,59,15,14,66,71,175,54,183,184,185,179,186,187,177,178,188,189,190,191,192,193]))),Mb=()=>Br().then(()=>de(()=>import("./FeatureLayerView2D-mQe_2ZAC.js").then(t=>t.F),__vite__mapDeps([194,175,11,195,196,197,15,22,186,166,178,58,57,31,158,126,179,165,159,160,32,125,79,106,109,162,163,117,164,60,65,74,72,66,167,198,130,24,68,192,188,189,193]))),Dse={"base-dynamic":()=>Br().then(()=>de(()=>import("./BaseDynamicLayerView2D-Cx_5r74t.js"),__vite__mapDeps([199,200,165,57,31,159,160,32,125,126,79,166,106,109,11,184,163,158,117,185,186,201,188,189]))),"base-tile":_M,"bing-maps":_M,catalog:()=>Br().then(()=>de(()=>import("./CatalogLayerView2D-GezakRe6.js"),__vite__mapDeps([202,186,166,188]))),"catalog-dynamic-group":()=>Br().then(()=>de(()=>import("./CatalogDynamicGroupLayerView2D-DiAPzIPh.js"),__vite__mapDeps([203,186,166,188]))),"catalog-footprint":()=>Br().then(()=>de(()=>import("./CatalogFootprintLayerView2D-CLGNXIgv.js"),__vite__mapDeps([204,194,175,11,195,196,197,15,22,186,166,178,58,57,31,158,126,179,165,159,160,32,125,79,106,109,162,163,117,164,60,65,74,72,66,167,198,130,24,68,192,188,189,193]))),csv:Mb,"geo-rss":()=>Br().then(()=>de(()=>import("./GeoRSSLayerView2D-CAv53u2_.js"),__vite__mapDeps([205,186,166,176,177,178,58,57,31,158,126,179,165,159,160,32,125,79,106,109,11,162,163,117,164,60,65,174,56,59,15,14,66,71,175,54,188]))),feature:Mb,geojson:Mb,parquet:Mb,graphics:()=>Br().then(()=>de(()=>import("./GraphicsLayerView2D-DjI_aj-b.js"),__vite__mapDeps([206,186,166,176,177,178,58,57,31,158,126,179,165,159,160,32,125,79,106,109,11,162,163,117,164,60,65,174,56,59,15,14,66,71,175,54,188,193]))),group:()=>Br().then(()=>de(()=>import("./GroupLayerView2D-CpIPIH9-.js"),__vite__mapDeps([207,186,166,188]))),imagery:()=>Br().then(()=>de(()=>import("./ImageryLayerView2D-sKIla4aM.js"),__vite__mapDeps([208,209,160,32,125,126,31,93,165,57,159,79,166,106,109,11,88,86,186,174,56,58,59,60,15,14,162,163,158,117,164,65,66,71,175,54,187,177,178,179,200,184,185,201,91,155,195,192,188,189,193]))),"imagery-tile":()=>Br().then(()=>de(()=>import("./ImageryTileLayerView2D-CIbAh54a.js"),__vite__mapDeps([210,211,209,160,32,125,126,31,93,165,57,159,79,166,106,109,11,88,86,186,90,212,179,163,158,117,173,164,60,185,213,91,193,155,195,192,188,189]))),kml:()=>Br().then(()=>de(()=>import("./KMLLayerView2D-C1SjoPVe.js"),__vite__mapDeps([214,215,184,166,163,126,158,159,117,185,200,165,57,31,160,32,125,79,106,109,11,186,176,177,178,58,179,162,164,60,65,174,56,59,15,14,66,71,175,54,188,91,171,157,115,116,169,212]))),"knowledge-graph":()=>Br().then(()=>de(()=>import("./KnowledgeGraphLayerView2D-CiAl4k6-.js"),__vite__mapDeps([216,186,166,188]))),"link-chart":()=>Br().then(()=>de(()=>import("./KnowledgeGraphLayerView2D-CiAl4k6-.js"),__vite__mapDeps([216,186,166,188]))),"knowledge-graph-sublayer":Mb,"map-image":()=>Br().then(()=>de(()=>import("./MapImageLayerView2D-CEo-Q5Jj.js"),__vite__mapDeps([217,200,165,57,31,159,160,32,125,126,79,166,106,109,11,184,163,158,117,185,186,174,56,58,59,60,15,14,162,164,65,66,71,175,54,187,177,178,179,201,188,195,189,190,191,192,193]))),"map-notes":()=>Br().then(()=>de(()=>import("./MapNotesLayerView2D--zx0iKJb.js"),__vite__mapDeps([218,186,166,176,177,178,58,57,31,158,126,179,165,159,160,32,125,79,106,109,11,162,163,117,164,60,65,174,56,59,15,14,66,71,175,54,188,193]))),media:()=>Br().then(()=>de(()=>import("./MediaLayerView2D-Dum-mBi2.js"),__vite__mapDeps([219,220,71,166,165,57,31,159,160,32,125,126,79,106,109,11,168,163,158,117,164,60,74,169,170,105,162,58,65,62,63,115,116,174,56,59,15,14,66,175,54,172,64,221,173,186,188]))),"ogc-feature":()=>Br().then(()=>de(()=>import("./OGCFeatureLayerView2D-CX9z90jS.js"),__vite__mapDeps([222,194,175,11,195,196,197,15,22,186,166,178,58,57,31,158,126,179,165,159,160,32,125,79,106,109,162,163,117,164,60,65,74,72,66,167,198,130,24,68,192,188,189,193]))),"open-street-map":_M,"oriented-imagery":Mb,route:()=>Br().then(()=>de(()=>import("./RouteLayerView2D-ChUP7X8i.js"),__vite__mapDeps([223,224,225,186,166,176,177,178,58,57,31,158,126,179,165,159,160,32,125,79,106,109,11,162,163,117,164,60,65,174,56,59,15,14,66,71,175,54,188,193]))),stream:()=>Br().then(()=>de(()=>import("./StreamLayerView2D-Cjml_-OB.js"),__vite__mapDeps([226,194,175,11,195,196,197,15,22,186,166,178,58,57,31,158,126,179,165,159,160,32,125,79,106,109,162,163,117,164,60,65,74,72,66,167,198,130,24,68,192,188,189,193]))),"subtype-group":()=>Br().then(()=>de(()=>import("./SubtypeGroupLayerView2D-S-H2X8Vq.js"),__vite__mapDeps([227,194,175,11,195,196,197,15,22,186,166,178,58,57,31,158,126,179,165,159,160,32,125,79,106,109,162,163,117,164,60,65,74,72,66,167,198,130,24,68,192,188,189,193]))),tile:_M,"vector-tile":()=>Br().then(()=>de(()=>import("./VectorTileLayerView2D-Dd5wViUw.js"),__vite__mapDeps([228,105,170,106,126,160,32,125,165,57,31,159,79,166,109,11,179,13,107,108,186,188,189]))),video:()=>Br().then(()=>de(()=>import("./VideoLayerView2D-DvE__SdD.js"),__vite__mapDeps([229,230,231,221,79,165,57,31,159,160,32,125,126,166,106,109,11,162,163,158,117,58,164,60,65,173,232,186,176,177,178,179,174,56,59,15,14,66,71,175,54,188]))),wcs:()=>Br().then(()=>de(()=>import("./ImageryTileLayerView2D-CIbAh54a.js"),__vite__mapDeps([210,211,209,160,32,125,126,31,93,165,57,159,79,166,106,109,11,88,86,186,90,212,179,163,158,117,173,164,60,185,213,91,193,155,195,192,188,189]))),"web-tile":_M,wfs:Mb,wms:()=>Br().then(()=>de(()=>import("./WMSLayerView2D-B5jmO19H.js"),__vite__mapDeps([233,200,165,57,31,159,160,32,125,126,79,166,106,109,11,184,163,158,117,185,186,201,188,189,234,195]))),wmts:()=>Br().then(()=>de(()=>import("./WMTSLayerView2D-BRmFNSwL.js"),__vite__mapDeps([235,183,184,166,163,126,158,159,117,185,165,57,31,160,32,125,79,106,109,11,179,186,188,189]))),"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"gaussian-splat":null,"integrated-mesh-3dtiles":null,"integrated-mesh":null,"line-of-sight":null,"point-cloud":null,scene:null,unknown:null,unsupported:null,viewshed:null,voxel:null};function yHe(t){const e=t.declaredClass?t.declaredClass.slice(t.declaredClass.lastIndexOf(".")+1):"Unknown",i=e.replaceAll(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new ae(`${i}:view-not-supported`,`${e} is not supported in 2D`)}const jse={hasLayerViewModule:t=>Dse[t.type]!=null,importLayerView:t=>{const e=Dse[t.type];if(e==null)throw yHe(t);return e(t)}};var fc;let JT=(fc=class{static getId(e,i,r,n){return typeof e=="object"?`${e.level}/${e.row}/${e.col}/${e.world}`:`${e}/${i}/${r}/${n}`}constructor(e,i,r,n){this.set(e,i,r,n)}get key(){return this}get id(){return this.toString()}get normalizedId(){return`${this.level}/${this.row}/${this.col}`}set id(e){this.set(e)}get hash(){const e=4095&this.row,i=4095&this.col,r=63&this.level;return(3&this.world)<<30|i<<22|e<<8|r}acquire(e,i,r,n){this.set(e,i,r,n)}contains(e){const i=e.level-this.level;return i>=0&&this.row===e.row>>i&&this.col===e.col>>i&&this.world===e.world}containsChild(e){const i=e.level-this.level;return i>0&&this.row===e.row>>i&&this.col===e.col>>i&&this.world===e.world}equals(e){return this.level===e.level&&this.row===e.row&&this.col===e.col&&this.world===e.world}clone(){return new fc(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(e,i,r,n){if(e==null)this.level=0,this.row=0,this.col=0,this.world=0;else if(typeof e=="object")this.level=e.level||0,this.row=e.row||0,this.col=e.col||0,this.world=e.world||0;else if(typeof e=="string"){const[s,a,o,l]=e.split("/");this.level=parseFloat(s),this.row=parseFloat(a),this.col=parseFloat(o),this.world=parseFloat(l)}else this.level=+e,this.row=+i,this.col=+r,this.world=+n||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new fc(this.level-1,this.row>>1,this.col>>1,this.world)}getNormalizedNeighbor(e,i,r){const n=this.clone();return n.col+=e,n.row+=i,r.normalizeKey(n),n}getChildKeys(){const e=this.level+1,i=this.row<<1,r=this.col<<1,n=this.world;return[new fc(e,i,r,n),new fc(e,i,r+1,n),new fc(e,i+1,r,n),new fc(e,i+1,r+1,n)]}compareRowMajor(e){return this.row<e.row?-1:this.row>e.row?1:this.col<e.col?-1:this.col>e.col?1:0}},fc.pool=new Vv(()=>new fc(""),null,null,25,50),fc);function C1(t,e){return[t,e]}function Cb(t,e,i){return t[0]=e,t[1]=i,t}function vHe(t,e,i,r,n){return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t}const Zu=new JT("0/0/0/0");let bHe=class Bwe{static create(e,i,r=null){const n=Bo(e.spatialReference),s=i.origin||C1(e.origin.x,e.origin.y),a=C1(e.size[0]*i.resolution,e.size[1]*i.resolution),o=C1(-1/0,-1/0),l=C1(1/0,1/0),c=C1(1/0,1/0);r!=null&&(Cb(o,Math.max(0,Math.floor((r.xmin-s[0])/a[0])),Math.max(0,Math.floor((s[1]-r.ymax)/a[1]))),Cb(l,Math.max(0,Math.floor((r.xmax-s[0])/a[0])),Math.max(0,Math.floor((s[1]-r.ymin)/a[1]))),Cb(c,l[0]-o[0]+1,l[1]-o[1]+1));const{cols:h,rows:m}=i;let g,v,b,x;return!r&&h&&m&&(Cb(o,h[0],m[0]),Cb(l,h[1],m[1]),Cb(c,h[1]-h[0]+1,m[1]-m[0]+1)),e.isWrappable?(g=C1(Math.ceil(Math.round((n.valid[1]-n.valid[0])/i.resolution)/e.size[0]),c[1]),v=!0,b=n.origin,x=n.valid):(g=c,v=!1),new Bwe(i.level,i.resolution,i.scale,s,o,l,c,a,g,v,b,x)}constructor(e,i,r,n,s,a,o,l,c,h,m,g){this.level=e,this.resolution=i,this.scale=r,this.origin=n,this.first=s,this.last=a,this.size=o,this.norm=l,this.worldSize=c,this.wrap=h,this._spatialReferenceOrigin=m,this._spatialReferenceValid=g}normalizeCol(e){if(!this.wrap)return e;const i=this.worldSize[0];return e<0?i-1-Math.abs((e+1)%i):e%i}normalizeKey(e){if(!this.wrap)return;const i=this.worldSize[0],r=e.col;r<0?(e.col=r+i,e.world-=1):r>=i&&(e.col=r-i,e.world+=1)}denormalizeCol(e,i){return this.wrap?this.worldSize[0]*i+e:e}getWorldForColumn(e){return this.wrap?Math.floor(e/this.worldSize[0]):0}getFirstColumnForWorld(e){return e*this.worldSize[0]+this.first[0]}getLastColumnForWorld(e){return e*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(e){return(e-this.origin[0])/this.norm[0]}getXForColumn(e){const i=this.origin[0]+e*this.norm[0],r=this._spatialReferenceOrigin,n=this._spatialReferenceValid;return this.wrap&&r&&n?i===r[0]?n[0]:this.origin[0]===r[0]&&e===this.worldSize[0]?n[1]:i:i}getRowForY(e){return(this.origin[1]-e)/this.norm[1]}getYForRow(e){return this.origin[1]-e*this.norm[1]}getTileBounds(e,i,r=!1){Zu.set(i);const n=r?Zu.col:this.denormalizeCol(Zu.col,Zu.world),s=Zu.row;return vHe(e,this.getXForColumn(n),this.getYForRow(s+1),this.getXForColumn(n+1),this.getYForRow(s)),e}getTileCoords(e,i,r=!1){Zu.set(i);const n=r?Zu.col:this.denormalizeCol(Zu.col,Zu.world);return Array.isArray(e)?Cb(e,this.getXForColumn(n),this.getYForRow(Zu.row)):(e.x=this.getXForColumn(n),e.y=this.getYForRow(Zu.row)),e}};var vw;let NY=(vw=class{constructor(){this.spans=[]}acquire(e){this.lodInfo=e}release(){this.lodInfo=null,this.spans.length=0}*keys(){const e=this.lodInfo;for(const{row:i,colFrom:r,colTo:n}of this.spans)for(let s=r;s<=n;s++){const a=e.getWorldForColumn(s);yield new JT(e.level,i,e.normalizeCol(s),a)}}forEach(e,i){const{spans:r,lodInfo:n}=this,{level:s}=n;if(r.length!==0)for(const{row:a,colFrom:o,colTo:l}of r)for(let c=o;c<=l;c++)e.call(i,s,a,n.normalizeCol(c),n.getWorldForColumn(c))}},vw.pool=new Vv(()=>new vw),vw),A6=class{constructor(e,i,r){this.row=e,this.colFrom=i,this.colTo=r}};const Jr=new JT("0/0/0/0");let wHe=class qwe{static create(e,i){e[1]>i[1]&&([e,i]=[i,e]);const[r,n]=e,[s,a]=i,o=s-r,l=a-n,c=l!==0?o/l:0,h=(Math.ceil(n)-n)*c,m=(Math.floor(n)-n)*c;return new qwe(r,Math.floor(n),Math.ceil(a),c,o<0?h:m,o<0?m:h,o<0?s:r,o<0?r:s)}constructor(e,i,r,n,s,a,o,l){this.x=e,this.ymin=i,this.ymax=r,this.invM=n,this.leftAdjust=s,this.rightAdjust=a,this.leftBound=o,this.rightBound=l}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}};const Wl=[[0,0],[0,0],[0,0],[0,0]],_He=1e-6;let xHe=class{constructor(e,i=null,r=e.lods[0].level,n=e.lods[e.lods.length-1].level){this.tileInfo=e,this.fullExtent=i,this.scales=[],this._infoByScale={},this._infoByLevel={};const s=e.lods.filter(o=>o.level>=r&&o.level<=n);this.minScale=s[0].scale,this.maxScale=s[s.length-1].scale;const a=this._lodInfos=s.map(o=>bHe.create(e,o,i));s.forEach((o,l)=>{this._infoByLevel[o.level]=a[l],this._infoByScale[o.scale]=a[l],this.scales[l]=o.scale},this),this._wrap=e.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(e){return this._infoByLevel[typeof e=="number"?e:e.level]}getTileBounds(e,i,r=!1){Jr.set(i);const n=this._infoByLevel[Jr.level];return n?n.getTileBounds(e,Jr,r):e}getTileCoords(e,i,r=!1){Jr.set(i);const n=this._infoByLevel[Jr.level];return n?n.getTileCoords(e,Jr,r):e}getTileCoverage(e,i=192,r=!0,n="closest"){if(!r&&(e.scale>this.minScale||e.scale<this.maxScale))return null;const s=n==="closest"?this.getClosestInfoForScale(e.scale):this.getSmallestInfoForScale(e.scale),a=NY.pool.acquire(s),o=this._wrap;let l,c,h,m=1/0,g=-1/0;const v=a.spans;Wl[0][0]=Wl[0][1]=Wl[1][1]=Wl[3][0]=-i,Wl[1][0]=Wl[2][0]=e.size[0]+i,Wl[2][1]=Wl[3][1]=e.size[1]+i;for(const M of Wl)e.toMap(M,M),M[0]=s.getColumnForX(M[0]),M[1]=s.getRowForY(M[1]);const b=[];let x=3;for(let M=0;M<4;M++){if(Wl[M][1]===Wl[x][1]){x=M;continue}const k=wHe.create(Wl[M],Wl[x]);m=Math.min(k.ymin,m),g=Math.max(k.ymax,g),b[k.ymin]===void 0&&(b[k.ymin]=[]),b[k.ymin].push(k),x=M}if(m==null||g==null||g-m>100)return null;let $=[];for(l=m;l<g;){b[l]!=null&&($=$.concat(b[l])),c=1/0,h=-1/0;for(let M=$.length-1;M>=0;M--){const k=$[M];c=Math.min(c,k.getLeftCol()),h=Math.max(h,k.getRightCol())}if(c=Math.floor(c),h=Math.floor(h),l>=s.first[1]&&l<=s.last[1])if(o)if(s.size[0]<s.worldSize[0]){const M=Math.floor(h/s.worldSize[0]);for(let k=Math.floor(c/s.worldSize[0]);k<=M;k++)v.push(new A6(l,Math.max(s.getFirstColumnForWorld(k),c),Math.min(s.getLastColumnForWorld(k),h)))}else v.push(new A6(l,c,h));else c>s.last[0]||h<s.first[0]||(c=Math.max(c,s.first[0]),h=Math.min(h,s.last[0]),v.push(new A6(l,c,h)));l+=1;for(let M=$.length-1;M>=0;M--){const k=$[M];k.ymax>=l?k.incrRow():$.splice(M,1)}}return a}getTileParentId(e){Jr.set(e);const i=this._infoByLevel[Jr.level],r=this._lodInfos.indexOf(i)-1;return r<0?null:(this._getTileIdAtLOD(Jr,this._lodInfos[r],Jr),Jr.id)}getTileResolution(e){const i=this._infoByLevel[typeof e=="object"?e.level:e];return i?i.resolution:-1}getTileScale(e){const i=this._infoByLevel[e.level];return i?i.scale:-1}intersects(e,i){Jr.set(i);const r=this._infoByLevel[Jr.level],n=e.lodInfo;if(n.resolution>r.resolution){this._getTileIdAtLOD(Jr,n,Jr);const a=n.denormalizeCol(Jr.col,Jr.world);for(const o of e.spans)if(o.row===Jr.row&&o.colFrom<=a&&o.colTo>=a)return!0}if(n.resolution<r.resolution){const[a,o,l,c]=e.spans.reduce((x,$)=>(x[0]=Math.min(x[0],$.row),x[1]=Math.max(x[1],$.row),x[2]=Math.min(x[2],$.colFrom),x[3]=Math.max(x[3],$.colTo),x),[1/0,-1/0,1/0,-1/0]),h=r.denormalizeCol(Jr.col,Jr.world),m=n.getColumnForX(r.getXForColumn(h)),g=n.getRowForY(r.getYForRow(Jr.row)),v=n.getColumnForX(r.getXForColumn(h+1))-1,b=n.getRowForY(r.getYForRow(Jr.row+1))-1;return!(m>c||v<l||g>o||b<a)}const s=n.denormalizeCol(Jr.col,Jr.world);return e.spans.some(a=>a.row===Jr.row&&a.colFrom<=s&&a.colTo>=s)}normalizeBounds(e,i,r){if(e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],this._wrap){const n=Bo(this.tileInfo.spatialReference),s=-r*(n.valid[1]-n.valid[0]);e[0]+=s,e[2]+=s}return e}getSmallestInfoForScale(e){const i=this.scales;if(this._infoByScale[e])return this._infoByScale[e];if(e>i[0])return this._infoByScale[i[0]];for(let r=1;r<i.length-1;r++)if(e>i[r]+_He)return this._infoByScale[i[r-1]];return this._infoByScale[i[i.length-1]]}getClosestInfoForScale(e){const i=this.scales;return this._infoByScale[e]||(e=i.reduce((r,n)=>Math.abs(n-e)<Math.abs(r-e)?n:r,i[0])),this._infoByScale[e]}scaleToLevel(e){const i=this.scales;if(this._infoByScale[e])return this._infoByScale[e].level;for(let r=i.length-1;r>=0;r--)if(e<i[r])return r===i.length-1?this._infoByScale[i[i.length-1]].level:this._infoByScale[i[r]].level+(i[r]-e)/(i[r]-i[r+1]);return this._infoByScale[i[0]].level}scaleToZoom(e){return this.tileInfo.scaleToZoom(e)}zoomToScale(e){return this.tileInfo.zoomToScale(e)}_getTileIdAtLOD(e,i,r){const n=this._infoByLevel[r.level];return e.set(r),i.resolution<n.resolution?null:(i.resolution===n.resolution||(e.level=i.level,e.col=Math.floor(r.col*n.resolution/i.resolution+.01),e.row=Math.floor(r.row*n.resolution/i.resolution+.01)),e)}},$He=class{constructor(e,i){this.item=e,this.controller=i,this.promise=null}},SHe=class{constructor(e){this._schedule=null,this._task=null,this._deferreds=new bv,this._controllers=new bv,this._processingItems=new bv,this._pausedSignal=Yw(!1),this.concurrency=1,e.concurrency&&(this.concurrency=e.concurrency),this._queue=new _E(e.peeker),this.process=e.process;const i=e.scheduler;e.priority&&i&&(this._task=i.registerTask(e.priority,this))}destroy(){this.clear(),this._schedule=Dr(this._schedule),this._task=Dr(this._task)}get updating(){var e;return!!((e=this._task)!=null&&e.updating)||this.readyToRun}get length(){return this._processingItems.size+this._queue.length}abort(e){const i=this._controllers.get(e);i&&i.abort()}clear(){this._queue.clear();const e=[];this._controllers.forEach(i=>e.push(i)),this._controllers.clear(),e.forEach(i=>i.abort()),this._processingItems.clear(),this._cancelNext()}forEach(e){this._deferreds.forEach((i,r)=>e(r))}get(e){const i=this._deferreds.get(e);return i?i.promise:void 0}isOngoing(e){return this._processingItems.has(e)}has(e){return this._deferreds.has(e)}pause(){this._pausedSignal.value||(this._pausedSignal.value=!0,this._cancelNext())}push(e,i){const r=this.get(e);if(r)return r;const n=new AbortController;let s=null;i&&(s=_u(i,()=>n.abort()));const a=()=>{const h=this._processingItems.get(e);h&&h.controller.abort(),o(),c.reject(Hi())},o=()=>{l.remove(),s!=null&&s.remove(),this._removeItem(e),this._queue.remove(e),this._scheduleNext()},l=PW(n.signal,a),c=Fl();return this._deferreds.set(e,c),this._controllers.set(e,n),c.promise.then(o,o),this._queue.push(e),this._scheduleNext(),c.promise}last(){return this._queue.last()}lastPromise(){const e=this.last();return e?this.get(e):null}peek(){return this._queue.peek()}popLast(){var i;const e=this._queue.popLast();return e&&((i=this._deferreds.get(e))==null||i.reject(Hi()),this._removeItem(e)),e}reset(){const e=Array.from(this._processingItems.values());this._processingItems.clear();for(const i of e)this._queue.push(i.item),i.controller.abort();this._scheduleNext()}resume(){this._pausedSignal.value&&(this._pausedSignal.value=!1,this._scheduleNext())}takeAll(){const e=[];for(;this._queue.length;)e.push(this._queue.pop());return this.clear(),e}get readyToRun(){return!this._pausedSignal.value&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(e){for(;!e.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),e.madeProgress()}_removeItem(e){this._deferreds.delete(e),this._controllers.delete(e),this._processingItems.delete(e)}_scheduleNext(){this._task||this._pausedSignal.value||this._schedule||(this._schedule=ET(()=>{this._schedule=null,this._next()}))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(e,i){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).resolve(i))}_processError(e,i){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).reject(i))}_canProcessFulfillment(e){return!!this._deferreds.get(e.item)&&this._processingItems.get(e.item)===e}_process(e){if(e==null)return;let i;const r=new AbortController,n=new $He(e,r);this._processingItems.set(e,n);try{i=this.process(e,r.signal)}catch(s){this._processError(n,s)}uo(i)?(n.promise=i,i.then(s=>this._processResult(n,s),s=>this._processError(n,s))):this._processResult(n,i)}get test(){}};const Vse=[0,0];let Gf=class extends et{constructor(e){super(e),this._keyToItem=new Map,this._tilesByScale=new Map,this.concurrency=6}initialize(){const{concurrency:e,process:i,scheduler:r,priority:n}=this;this._queue=new SHe({concurrency:e,scheduler:r,priority:n,process:(s,a)=>{const o=this._keyToItem.get(s);return i(o,{signal:a})},peeker:s=>this._peek(s)})}destroy(){this.clear(),this._queue=Or(this._queue)}get length(){return this._queue?this._queue.length:0}abort(e){const i=typeof e=="string"?e:e.id;this._queue.abort(i)}clear(){this._queue.clear(),this._keyToItem.clear(),this._tilesByScale.clear()}has(e){return typeof e=="string"?this._keyToItem.has(e):this._keyToItem.has(e.id)}pause(){this._queue.pause()}push(e){const i=e.key.id;if(this._queue.has(i))return this._queue.get(i);const r=this._queue.push(i),n=this.tileInfoView.getTileScale(e.key),s=Gp(this._tilesByScale,n,()=>new Set),a=()=>{s.delete(e.key),s.size===0&&this._tilesByScale.delete(n),this._keyToItem.delete(i)};return s.add(e.key),this._keyToItem.set(i,e),r.then(a,a),r}reset(){this._queue.reset()}resume(){this._queue.resume()}_peek(e){if(!this.state)return e.values().next().value;const i=new Set;for(const a of e)i.add(this._keyToItem.get(a).key);const r=this.state.scale;let n,s=Number.POSITIVE_INFINITY;for(const[a,o]of this._tilesByScale)if(Mpe(o,l=>i.has(l))){const l=Math.abs(a-r);l<s&&(n=o,s=l)}return this._getClosestTileKey(n,e).id}_getClosestTileKey(e,i){const r=this.tileInfoView,n=this.state.center;let s,a=Number.POSITIVE_INFINITY;for(const o of e)if(i.has(o.id)){r.getTileCoords(Vse,o);const l=MD(Vse,n);l<a&&(a=l,s=o)}return s}};d([f({constructOnly:!0})],Gf.prototype,"concurrency",void 0),d([f({constructOnly:!0})],Gf.prototype,"priority",void 0),d([f({constructOnly:!0})],Gf.prototype,"process",void 0),d([f({constructOnly:!0})],Gf.prototype,"scheduler",void 0),d([f()],Gf.prototype,"state",void 0),d([f({constructOnly:!0})],Gf.prototype,"tileInfoView",void 0),Gf=d([V("esri.views.2d.tiling.TileQueue")],Gf);const GIt=Gf;let THe=class{constructor(e,i,r){this.maxSize=e,this._tileInfoView=i,this._removedFunc=r,this._tilePerId=new Map,this._tileKeysPerLevel=[]}clear(){this._tilePerId.clear(),this._tileKeysPerLevel=[]}has(e){return this._tilePerId.has(e)}get(e){return this._tilePerId.get(e)}pop(e){const i=this._tilePerId.get(e);if(!i)return;const r=i.key.level,n=this._tileKeysPerLevel[r];Use(this._tilePerId,e);for(let s=0;s<n.length;s++)if(n[s].id===e){n.splice(s,1);break}return i.visible=!0,i}add(e){e.visible=!1;const i=e.key,r=i.id;if(this._tilePerId.has(r))return;this._tilePerId.set(r,e);const n=i.level;this._tileKeysPerLevel[n]||(this._tileKeysPerLevel[n]=[]),this._tileKeysPerLevel[n].push(i)}prune(e,i,r){let n=this._tilePerId.size;if(n<=this.maxSize)return;let s=this._tileKeysPerLevel.length-1;for(;n>this.maxSize&&s>=0;)s!==e&&(n=this._pruneAroundCenterTile(n,i,r,s)),s--;n>this.maxSize&&(n=this._pruneAroundCenterTile(n,i,r,e))}_pruneAroundCenterTile(e,i,r,n){const s=this._tileKeysPerLevel[n];if(!s||s.length===0)return e;const{size:a,origin:o}=this._tileInfoView.tileInfo,l=r*a[0],c=r*a[1],h=[0,0],m=[0,0];for(s.sort((g,v)=>(h[0]=o.x+l*(g.col+.5),h[1]=o.y-c*(g.row+.5),m[0]=o.x+l*(v.col+.5),m[1]=o.y-c*(v.row+.5),yE(h,i)-yE(m,i)));s.length>0;){const g=s.pop();if(this._removeTile(g.id),--e===this.maxSize)break}return e}_removeTile(e){const i=this._tilePerId.get(e);this._removedFunc&&i&&this._removedFunc(i),Use(this._tilePerId,e)}};function Use(t,e){t.delete(e)}const Eb=new JT(0,0,0,0),Sf=new Map,xM=[],P6=[];let ZIt=class{constructor(e){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=e.acquireTile,this.releaseTile=e.releaseTile,this.tileInfoView=e.tileInfoView,e.resampling!=null&&(this.resampling=e.resampling),e.cachePolicy&&(this.cachePolicy=e.cachePolicy),e.coveragePolicy&&(this.coveragePolicy=e.coveragePolicy),e.buffer!=null&&(this.buffer=e.buffer),e.cacheSize&&(this._tileCache=new THe(e.cacheSize,this.tileInfoView,i=>{this.releaseTile(i)}))}destroy(){this.tileIndex.clear()}update(e){var M,k;const{resampling:i,tileIndex:r}=this,{scale:n,center:s,resolution:a}=e.state,{minScale:o,maxScale:l}=this.tileInfoView,c=!e.stationary&&n>this._previousScale;if(this._previousScale=n,!i&&(n>o||n<l))return this.tiles.length=0,void this.clear();const h=this.tileInfoView.getTileCoverage(e.state,this.buffer,this.resampling,this.coveragePolicy);if(!h)return this.tiles.length=0,void this.clear();const{spans:m,lodInfo:g}=h,{level:v}=g;this.tiles.length=0,r.forEach(A=>A.visible=!0);let b=0,x=0;if(m.length>0)for(const{row:A,colFrom:L,colTo:z}of m)for(let U=L;U<=z;U++){b++;const B=Eb.set(v,A,g.normalizeCol(U),g.getWorldForColumn(U)).id;let X=r.get(B);if(X)X.isReady?(Sf.set(B,X),x++):c||this._addParentTile(B,Sf);else{if((M=this._tileCache)!=null&&M.has(B)){if(X=this._tileCache.pop(B),this.tileIndex.set(B,X),X.isReady){Sf.set(B,X),x++;continue}}else X=this.acquireTile(Eb),this.tileIndex.set(B,X);c||this._addParentTile(B,Sf)}}const $=x===b;for(const[A,L]of r){if(Sf.has(A))continue;Eb.set(A);const z=this.tileInfoView.intersects(h,Eb),U=this.cachePolicy==="purge"?Eb.level!==v:Eb.level>v;!z||!c&&$?!U&&z||xM.push(L):L.isReady?U&&this.cachePolicy==="purge"&&this._hasReadyAncestor(Eb,v)?xM.push(L):P6.push(L):U&&xM.push(L)}for(const A of P6)A.isReady&&Sf.set(A.key.id,A);for(const A of xM)this._tileCache?this._tileCache.add(A):this.releaseTile(A),r.delete(A.key.id);for(const A of Sf.values())this.tiles.push(A);for(const A of r.values())Sf.has(A.key.id)||(A.visible=!1);(k=this._tileCache)==null||k.prune(v,s,a),NY.pool.release(h),P6.length=0,xM.length=0,Sf.clear()}clear(){const{tileIndex:e}=this;for(const i of e.values())this.releaseTile(i);e.clear()}refresh(e){var i;for(const r of this.tileIndex.values())e(r);(i=this._tileCache)==null||i.clear()}updateCacheSize(e){this._tileCache&&(this._tileCache.maxSize=e)}_addParentTile(e,i){var s;let r=e,n=null;for(;r=this.tileInfoView.getTileParentId(r),r;)if(this.tileIndex.has(r)){if(n=this.tileIndex.get(r),n==null?void 0:n.isReady){i.has(n.key.id)||i.set(n.key.id,n);break}}else if((s=this._tileCache)!=null&&s.has(r)&&(n=this._tileCache.pop(r),this.tileIndex.set(r,n),n==null?void 0:n.isReady)){i.has(n.key.id)||i.set(n.key.id,n);break}}_hasReadyAncestor(e,i){const r=ls();this.tileInfoView.getTileBounds(r,e,!0);for(const n of this.tileIndex.values())if(n.isReady&&n.key.level>=i&&n.key.level<e.level){const s=ls();if(this.tileInfoView.getTileBounds(s,n.key,!0),eFe(s,r))return!0}return!1}};const IHe={"area-measurement":null,dimension:null,"direct-line-measurement":null,"elevation-profile":()=>de(()=>import("./ElevationProfileAnalysisView2D-x6seYSy-.js"),__vite__mapDeps([236,230,237,181,238,239,240,241,242,243,244,245,246,247,248,77,78,249,250,251,145,252,253,100,42,83,84,96,40,254,70,109,114,95])),"line-of-sight":null,slice:null,viewshed:null,"volume-measurement":null};function MHe(t){const e=IHe[t.type];if(!e)throw new ae("analysis-view-module-import-utils:analysis-not-supported",`Analysis "${t.type}" is not supported`);return e()}let CHe=class{constructor(e,i={}){this.events=new cge,this._hasMajorPerformanceCaveat=!1,this._lastRenderFrameCounter=0,e!=null?(this._canvas=document.createElement("canvas"),this._canvas.setAttribute("style","width: 100%; height:100%; display:block; willChange:transform"),e.contains(this._canvas)||e.appendChild(this._canvas)):i.canvas!=null&&(this._canvas=i.canvas);const r={failIfMajorPerformanceCaveat:!0,alpha:!0,antialias:!1,depth:!0,stencil:!0,powerPreference:"high-performance"};let n=this._canvas.getContext("webgl2",r);n||(n=this._canvas.getContext("webgl2",{...r,failIfMajorPerformanceCaveat:!1}),this._hasMajorPerformanceCaveat=!0),this._gl=n,this._handles=h_([MT(this._canvas,"webglcontextlost",s=>this.events.emit("webgl-context-lost",s))])}destroy(){this._canvas.remove(),this._canvas=null,this._handles.remove(),this._gl=null}get gl(){return this._gl}get canvas(){return this._canvas}render(e,i){if(this._hasMajorPerformanceCaveat||ve("esri-force-performance-mode")){if(++this._lastRenderFrameCounter>=ve("esri-performance-mode-frames-between-render")&&(i(),this._lastRenderViewState=e.state.clone(),this._lastRenderFrameCounter=0),this._lastRenderViewState){const[r,n,s,a,o,l]=this._computeViewTransform(this._lastRenderViewState,e.state);this._canvas.style.transform=`matrix(${r}, ${n}, ${s}, ${a}, ${o}, ${l})`}}else i()}resize(e){const i=this._canvas,r=i.style,{state:{size:n},pixelRatio:s}=e,a=n[0],o=n[1],l=Math.round(a*s),c=Math.round(o*s);i.width===l&&i.height===c||(i.width=l,i.height=c),r.width=a+"px",r.height=o+"px"}_computeViewTransform(e,i){const[r,n]=e.center,[s,a]=i.center,[o,l]=e.toScreen([0,0],s,a),[c,h]=e.toScreen([0,0],r,n),m=c-o,g=h-l,v=e.scale/i.scale,b=i.rotation-e.rotation,x=kp();return Yk(x),Jk(x,x,[v,v]),Rv(x,x,RT(b)),Ep(x,x,[m,g]),x}};function EHe(t,e,i,r,n){Hwe(t,e,i||0,r||t.length-1,n||kHe)}function Hwe(t,e,i,r,n){for(;r>i;){if(r-i>600){var s=r-i+1,a=e-i+1,o=Math.log(s),l=.5*Math.exp(2*o/3),c=.5*Math.sqrt(o*l*(s-l)/s)*(a-s/2<0?-1:1);Hwe(t,e,Math.max(i,Math.floor(e-a*l/s+c)),Math.min(r,Math.floor(e+(s-a)*l/s+c)),n)}var h=t[e],m=i,g=r;for($M(t,i,e),n(t[r],h)>0&&$M(t,i,r);m<g;){for($M(t,m,g),m++,g--;n(t[m],h)<0;)m++;for(;n(t[g],h)>0;)g--}n(t[i],h)===0?$M(t,i,g):$M(t,++g,r),g<=e&&(i=g+1),e<=g&&(r=g-1)}}function $M(t,e,i){var r=t[e];t[e]=t[i],t[i]=r}function kHe(t,e){return t<e?-1:t>e?1:0}function qR(t,e){if(!(this instanceof qR))return new qR(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&(typeof e=="function"?this.toBBox=e:this._initFormat(e)),this.clear()}function AHe(t,e,i){if(!i)return e.indexOf(t);for(var r=0;r<e.length;r++)if(i(t,e[r]))return r;return-1}function E1(t,e){xC(t,0,t.children.length,e,t)}function xC(t,e,i,r,n){n||(n=Ix(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(var s,a=e;a<i;a++)s=t.children[a],$C(n,t.leaf?r(s):s);return n}function $C(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function Bse(t,e){return t.minX-e.minX}function qse(t,e){return t.minY-e.minY}function O6(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function fO(t){return t.maxX-t.minX+(t.maxY-t.minY)}function PHe(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function OHe(t,e){var i=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),n=Math.min(t.maxX,e.maxX),s=Math.min(t.maxY,e.maxY);return Math.max(0,n-i)*Math.max(0,s-r)}function L6(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function mO(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function Ix(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Hse(t,e,i,r,n){for(var s,a=[e,i];a.length;)(i=a.pop())-(e=a.pop())<=r||(s=e+Math.ceil((i-e)/r/2)*r,EHe(t,s,e,i,n),a.push(e,s,s,i))}qR.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,i=[],r=this.toBBox;if(!mO(t,e))return i;for(var n,s,a,o,l=[];e;){for(n=0,s=e.children.length;n<s;n++)a=e.children[n],mO(t,o=e.leaf?r(a):a)&&(e.leaf?i.push(a):L6(t,o)?this._all(a,i):l.push(a));e=l.pop()}return i},collides:function(t){var e=this.data,i=this.toBBox;if(!mO(t,e))return!1;for(var r,n,s,a,o=[];e;){for(r=0,n=e.children.length;r<n;r++)if(s=e.children[r],mO(t,a=e.leaf?i(s):s)){if(e.leaf||L6(t,a))return!0;o.push(s)}e=o.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,i=t.length;e<i;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var n=this.data;this.data=r,r=n}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t!=null&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=Ix([]),this},remove:function(t,e){if(t==null)return this;for(var i,r,n,s,a=this.data,o=this.toBBox(t),l=[],c=[];a||l.length;){if(a||(a=l.pop(),r=l[l.length-1],i=c.pop(),s=!0),a.leaf&&(n=AHe(t,a.children,e))!==-1)return a.children.splice(n,1),l.push(a),this._condense(l),this;s||a.leaf||!L6(a,o)?r?(i++,a=r.children[i],s=!1):a=null:(l.push(a),c.push(i),i=0,r=a,a=a.children[0])}return this},toBBox:function(t){return t},compareMinX:Bse,compareMinY:qse,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},_build:function(t,e,i,r){var n,s=i-e+1,a=this._maxEntries;if(s<=a)return E1(n=Ix(t.slice(e,i+1)),this.toBBox),n;r||(r=Math.ceil(Math.log(s)/Math.log(a)),a=Math.ceil(s/Math.pow(a,r-1))),(n=Ix([])).leaf=!1,n.height=r;var o,l,c,h,m=Math.ceil(s/a),g=m*Math.ceil(Math.sqrt(a));for(Hse(t,e,i,g,this.compareMinX),o=e;o<=i;o+=g)for(Hse(t,o,c=Math.min(o+g-1,i),m,this.compareMinY),l=o;l<=c;l+=m)h=Math.min(l+m-1,c),n.children.push(this._build(t,l,h,r-1));return E1(n,this.toBBox),n},_chooseSubtree:function(t,e,i,r){for(var n,s,a,o,l,c,h,m;r.push(e),!e.leaf&&r.length-1!==i;){for(h=m=1/0,n=0,s=e.children.length;n<s;n++)l=O6(a=e.children[n]),(c=PHe(t,a)-l)<m?(m=c,h=l<h?l:h,o=a):c===m&&l<h&&(h=l,o=a);e=o||e.children[0]}return e},_insert:function(t,e,i){var r=this.toBBox,n=i?t:r(t),s=[],a=this._chooseSubtree(n,this.data,e,s);for(a.children.push(t),$C(a,n);e>=0&&s[e].children.length>this._maxEntries;)this._split(s,e),e--;this._adjustParentBBoxes(n,s,e)},_split:function(t,e){var i=t[e],r=i.children.length,n=this._minEntries;this._chooseSplitAxis(i,n,r);var s=this._chooseSplitIndex(i,n,r),a=Ix(i.children.splice(s,i.children.length-s));a.height=i.height,a.leaf=i.leaf,E1(i,this.toBBox),E1(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(i,a)},_splitRoot:function(t,e){this.data=Ix([t,e]),this.data.height=t.height+1,this.data.leaf=!1,E1(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,i){var r,n,s,a,o,l,c,h;for(l=c=1/0,r=e;r<=i-e;r++)a=OHe(n=xC(t,0,r,this.toBBox),s=xC(t,r,i,this.toBBox)),o=O6(n)+O6(s),a<l?(l=a,h=r,c=o<c?o:c):a===l&&o<c&&(c=o,h=r);return h},_chooseSplitAxis:function(t,e,i){var r=t.leaf?this.compareMinX:Bse,n=t.leaf?this.compareMinY:qse;this._allDistMargin(t,e,i,r)<this._allDistMargin(t,e,i,n)&&t.children.sort(r)},_allDistMargin:function(t,e,i,r){t.children.sort(r);var n,s,a=this.toBBox,o=xC(t,0,e,a),l=xC(t,i-e,i,a),c=fO(o)+fO(l);for(n=e;n<i-e;n++)s=t.children[n],$C(o,t.leaf?a(s):s),c+=fO(o);for(n=i-e-1;n>=e;n--)s=t.children[n],$C(l,t.leaf?a(s):s),c+=fO(l);return c},_adjustParentBBoxes:function(t,e,i){for(var r=i;r>=0;r--)$C(e[r],t)},_condense:function(t){for(var e,i=t.length-1;i>=0;i--)t[i].children.length===0?i>0?(e=t[i-1].children).splice(e.indexOf(t[i]),1):this.clear():E1(t[i],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};function LHe(t,{timeZone:e,timeExtent:i}){return{$view:{scale:t,timeZone:e,timeProperties:{currentStart:i==null?void 0:i.start,currentEnd:i==null?void 0:i.end}}}}let Gse=class Gwe{constructor(e,i){this.key=new JT(0,0,0,0),this.bounds=ls(),this.objectIds=new Set,this.key.set(i);const r=e.getLODInfoAt(this.key);this.tileInfoView=e,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=r.resolution,this.level=r.level,this.scale=r.scale,this.minScale=e.zoomToScale(r.level-1),this.maxScale=e.zoomToScale(r.level+1)}get lod(){return this.tileInfoView.getLODInfoAt(this.key)}get id(){return this.key.id}get extent(){return JLe(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createArcadeEvaluationOptions(e){return LHe(this.scale,e)}createChildTiles(){const e=this.key.getChildKeys(),i=zo.acquire();for(let r=0;r<e.length;r++)i[r]=new Gwe(this.tileInfoView,e[r]);return i}getQuantizationParameters(){return Fy.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}};const kb={added:[],removed:[]},F6=new Set,FHe=new JT(0,0,0,0);function RHe(t,e){const i=Bo(e);if(!i)return null;const[r,n]=i.valid;return t[2]>n?[ls([t[0],t[1],n,t[3]]),ls([r,t[1],r+t[2]-n,t[3]])]:t[0]<r?[ls([r,t[1],t[2],t[3]]),ls([n-(r-t[0]),t[1],n,t[3]])]:null}let zHe=class extends lge{constructor(e){super(),this._tiles=new Map,this._index=qR(9,ve("esri-csp-restrictions")?i=>({minX:i.bounds[0],minY:i.bounds[1],maxX:i.bounds[2],maxY:i.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=e}destroy(){super.destroy(),this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(e){return this._tiles.has(e)}get(e){return this._tiles.get(e)}getIntersectingTiles(e){if(!e||SD(e)===0||TD(e)===0)return[];const i=RHe(e,this.tileScheme.spatialReference);return i!=null?[...new Set([...this.boundsIntersections(i[0]),...this.boundsIntersections(i[1])])]:this.boundsIntersections(e)}boundsIntersections(e){return this._index.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]})}updateTiles(e){const i={added:[],removed:[]};for(const r of e.added)if(!this.has(r)){const n=new Gse(this.tileScheme,r);this._tiles.set(r,n),this._index.insert(n),i.added.push(n)}for(const r of e.removed)if(this.has(r)){const n=this.get(r);this._tiles.delete(r),this._index.remove(n),i.removed.push(n)}this.tiles.length=0,this._tiles.forEach(r=>this.tiles.push(r)),(i.added.length||i.removed.length)&&this.emit("update",i)}setViewState(e){const i=this.tileScheme.getTileCoverage(e,0);if(!i)return;const{spans:r,lodInfo:n}=i,{level:s}=n;if(r.length>0)for(const{row:a,colFrom:o,colTo:l}of r)for(let c=o;c<=l;c++){const h=FHe.set(s,a,n.normalizeCol(c),n.getWorldForColumn(c)).id;if(F6.add(h),!this.has(h)){const m=new Gse(this.tileScheme,h);this._tiles.set(h,m),this._index.insert(m),this.tiles.push(m),kb.added.push(m)}}for(let a=this.tiles.length-1;a>=0;a--){const o=this.tiles[a];F6.has(o.id)||(this._tiles.delete(o.id),this.tiles.splice(a,1),this._index.remove(o),kb.removed.push(o))}(kb.added.length||kb.removed.length)&&this.emit("update",kb),NY.pool.release(i),F6.clear(),kb.added.length=0,kb.removed.length=0}};const QIt=1e-30,Wse=512,gO=16777216,KIt=8,Wwe=29,Zwe=24,eMt=4,tMt=0,iMt=0,rMt=0,nMt=1,sMt=2,aMt=3,oMt=4,lMt=5,cMt=6,uMt=12,dMt=13,hMt=5,NHe=6,pMt=5,fMt=6,Ywe=6,DHe=1<<Ywe,mMt=DHe<<1,gMt=1.05,yMt=3,vMt=1,jHe=3,VHe=3,bMt=5,wMt=6,_Mt=1.15,UHe=4,xMt=128,BHe=256,$Mt=BHe-2*UHe,SMt=2,TMt=128,Jwe=1,IMt=10,qHe=1024,MMt=128,CMt=4,EMt=1,kMt=1<<20,AMt=.75,PMt=10,OMt=.75,LMt=256,HHe=32,GHe=512,FMt=0,RMt=1,WHe=1,zMt=[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],NMt=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],SM=256,ZHe=()=>Ie.getLogger("esri.views.webgl.checkWebGLError");function Xwe(t){switch(t.getError()){case t.NO_ERROR:return null;case t.INVALID_ENUM:return"Invalid Enum. An unacceptable value has been specified for an enumerated argument.";case t.INVALID_VALUE:return"Invalid Value. A numeric argument is out of range.";case t.INVALID_OPERATION:return"Invalid Operation. The specified command is not allowed for the current state.";case t.INVALID_FRAMEBUFFER_OPERATION:return"Invalid Framebuffer operation. The currently bound framebuffer is not framebuffer complete when trying to render to or to read from it.";case t.OUT_OF_MEMORY:return"Out of memory. Not enough memory is left to execute the command.";case t.CONTEXT_LOST_WEBGL:return"WebGL context has been lost";default:return"Unknown error"}}const Qwe=!!ve("enable-feature:webgl-debug");function Kwe(){return Qwe}function DMt(){return Qwe}function Ab(t,e=Kwe()){if(e){const i=Xwe(t);if(i){const r=new Error().stack;ZHe().error(new ae("webgl-error","WebGL error occurred",{message:i,stack:r}))}}}const jMt={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},Pb={BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,HALF_FLOAT:5131},It={RGBA4:32854,R16F:33325,RG16F:33327,RGB32F:34837,RGBA16F:34842,R32F:33326,RG32F:33328,RGBA32F:34836,R11F_G11F_B10F:35898,RGB8:32849,RGBA8:32856,RGB5_A1:32855,R8:33321,RG8:33323,R8I:33329,R8UI:33330,R16I:33331,R16UI:33332,R32I:33333,R32UI:33334,RG8I:33335,RG8UI:33336,RG16I:33337,RG16UI:33338,RG32I:33339,RG32UI:33340,RGB16F:34843,RGB9_E5:35901,SRGB8:35905,SRGB8_ALPHA8:35907,RGB565:36194,RGBA32UI:36208,RGB32UI:36209,RGBA16UI:36214,RGB16UI:36215,RGBA8UI:36220,RGB8UI:36221,RGBA32I:36226,RGB32I:36227,RGBA16I:36232,RGB16I:36233,RGBA8I:36238,RGB8I:36239,R8_SNORM:36756,RG8_SNORM:36757,RGB8_SNORM:36758,RGBA8_SNORM:36759,RGB10_A2:32857,RGB10_A2UI:36975},YHe=Object.values(It),HR={DEPTH24_STENCIL8:35056,DEPTH32F_STENCIL8:36013},A2={DEPTH_COMPONENT16:33189,DEPTH_COMPONENT24:33190,DEPTH_COMPONENT32F:36012},c7={FLOAT:Pb.FLOAT,UNSIGNED_BYTE:Pb.UNSIGNED_BYTE,UNSIGNED_INT_24_8:34042,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,BYTE:Pb.BYTE,UNSIGNED_SHORT:Pb.UNSIGNED_SHORT,SHORT:Pb.SHORT,UNSIGNED_INT:Pb.UNSIGNED_INT,INT:Pb.INT,HALF_FLOAT:5131,UNSIGNED_INT_2_10_10_10_REV:33640,UNSIGNED_INT_10F_11F_11F_REV:35899,UNSIGNED_INT_5_9_9_9_REV:35902,FLOAT_32_UNSIGNED_INT_24_8_REV:36269},VMt=33984,Zse={Texture:0,TileTexture:1,BufferObject:2,VertexArrayObject:3,Shader:4,Program:5,FramebufferObject:6,Renderbuffer:7,TransformFeedback:8,Sync:9,UNCOUNTED:10,LinesOfCode:10,Uniform:11,COUNT:12},UMt=1029,BMt=0,qMt=36064,HMt=36065,GMt=36066,WMt=36067,ZMt=33306,YMt=36096,JMt=36128,Ja={COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_SRGB8_ETC2:37493,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37494,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37495,COMPRESSED_RGBA8_ETC2_EAC:37496,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37497};function XMt(t,e,i,r=0){const n=t.gl;t.bindBuffer(i);for(const s of i.layout){const a=e.get(s.name);if(a==null){console.warn(`There is no location for vertex attribute '${s.name}' defined.`);continue}const o=r*s.stride;if(s.count<=4)n.vertexAttribPointer(a,s.count,s.type,s.normalized,s.stride,s.offset+o),n.enableVertexAttribArray(a),s.divisor>0&&n.vertexAttribDivisor(a,s.divisor);else if(s.count===9)for(let l=0;l<3;l++)n.vertexAttribPointer(a+l,3,s.type,s.normalized,s.stride,s.offset+12*l+o),n.enableVertexAttribArray(a+l),s.divisor>0&&n.vertexAttribDivisor(a+l,s.divisor);else if(s.count===16)for(let l=0;l<4;l++)n.vertexAttribPointer(a+l,4,s.type,s.normalized,s.stride,s.offset+16*l+o),n.enableVertexAttribArray(a+l),s.divisor>0&&n.vertexAttribDivisor(a+l,s.divisor);else console.error("Unsupported vertex attribute element count: "+s.count);if(Kwe()){const l=Xwe(t.gl);l&&console.error(`Unable to bind vertex attribute "${s.name}" with baseInstanceOffset ${o}:`,l,s)}}}function QMt(t){switch(t){case 6406:case 6409:case 6403:case 36244:case 6402:case 34041:return 1;case 6410:case 33319:case 33320:return 2;case 6407:case 36248:return 3;case 6408:case 36249:return 4}return 0}function JHe(t){switch(t){case 6406:case 6409:case 6403:case 36244:case It.R8:case It.R8I:case It.R8UI:case It.R8_SNORM:case 36168:return 1;case 6410:case 33319:case 33320:case It.RGBA4:case It.R16F:case It.R16I:case It.R16UI:case It.RG8:case It.RG8I:case It.RG8UI:case It.RG8_SNORM:case It.RGB565:case It.RGB5_A1:case A2.DEPTH_COMPONENT16:return 2;case 6407:case 36248:case It.RGB8:case It.RGB8I:case It.RGB8UI:case It.RGB8_SNORM:case It.SRGB8:case A2.DEPTH_COMPONENT24:return 3;case 6408:case 36249:case It.RGBA8:case It.R32F:case It.R11F_G11F_B10F:case It.RG16F:case It.R32I:case It.R32UI:case It.RG16I:case It.RG16UI:case It.RGBA8I:case It.RGBA8UI:case It.RGBA8_SNORM:case It.SRGB8_ALPHA8:case It.RGB9_E5:case It.RGB10_A2UI:case It.RGB10_A2:case A2.DEPTH_COMPONENT32F:case HR.DEPTH24_STENCIL8:return 4;case HR.DEPTH32F_STENCIL8:return 5;case It.RGB16F:case It.RGB16I:case It.RGB16UI:return 6;case It.RG32F:case It.RG32I:case It.RG32UI:case It.RGBA16F:case It.RGBA16I:case It.RGBA16UI:return 8;case It.RGB32F:case It.RGB32I:case It.RGB32UI:return 12;case It.RGBA32F:case It.RGBA32I:case It.RGBA32UI:return 16;case Ja.COMPRESSED_RGB_S3TC_DXT1_EXT:case Ja.COMPRESSED_RGBA_S3TC_DXT1_EXT:return .5;case Ja.COMPRESSED_RGBA_S3TC_DXT3_EXT:case Ja.COMPRESSED_RGBA_S3TC_DXT5_EXT:return 1;case Ja.COMPRESSED_R11_EAC:case Ja.COMPRESSED_SIGNED_R11_EAC:case Ja.COMPRESSED_RGB8_ETC2:case Ja.COMPRESSED_SRGB8_ETC2:case Ja.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:case Ja.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:return .5;case Ja.COMPRESSED_RG11_EAC:case Ja.COMPRESSED_SIGNED_RG11_EAC:case Ja.COMPRESSED_RGBA8_ETC2_EAC:case Ja.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:return 1}return 0}let e_e=class{constructor(e=0,i=e){this.width=e,this.height=i,this.type=0,this.target=3553,this.pixelFormat=6408,this.dataType=c7.UNSIGNED_BYTE,this.samplingMode=9729,this.wrapMode=10497,this.maxAnisotropy=1,this.flipped=!1,this.hasMipmap=!1,this.isOpaque=!1,this.unpackAlignment=4,this.preMultiplyAlpha=!1,this.compareEnabled=!1,this.linearFilterDepth=!1,this.depth=1,this.isImmutable=!1}};function XHe(t){return t.width<=0||t.height<=0||t.depth<=0?0:Math.round(t.width*t.height*t.depth*(t.hasMipmap?4/3:1)*(t.internalFormat==null?4:JHe(t.internalFormat))*(t.target===34067?6:1))}const TM=()=>Ie.getLogger("esri/views/webgl/textureUtils");function IM(t){const{width:e,height:i,depth:r}=t;(e!=null&&e<0||i!=null&&i<0||r!=null&&r<0)&&TM().error("Negative dimension parameters are not allowed!");const{internalFormat:n}=t;if(n&&(t_e(n)||i_e(n))){const{linearFilterDepth:s,compareEnabled:a,samplingMode:o,hasMipmap:l}=t;l&&TM().error("Depth textures cannot have mipmaps"),s?o!==9729&&o!==9728&&TM().error("Depth textures cannot sample mipmaps"):(o!==9728&&TM().error("Depth textures without filtering must use NEAREST filtering"),a&&TM().error("Depth textures without filtering cannot use compare function"))}}function QHe(t){return YHe.includes(t)}function t_e(t){return dD(A2,t)}function i_e(t){return dD(HR,t)}function KHe(t){return t!=null&&dD(Ja,t)}function Mx(t){return t!=null&&"type"in t&&t.type==="compressed"}function eGe(t){return t!=null&&"byteLength"in t}function Yse(t){return t!=null&&!Mx(t)&&!eGe(t)}function k1(t){return t===32879||t===35866}function Jse(t,e,i,r=1){let n=Math.max(e,i);return t===32879&&(n=Math.max(n,r)),Math.floor(Math.log2(n))+1}function yO(t){if(t.internalFormat!=null)return t.internalFormat;switch(t.dataType){case c7.FLOAT:switch(t.pixelFormat){case 6408:return It.RGBA32F;case 6407:return It.RGB32F;default:throw new ae("texture:unknown-format","Unable to derive format")}case c7.UNSIGNED_BYTE:switch(t.pixelFormat){case 6408:return It.RGBA8;case 6407:return It.RGB8}}const{pixelFormat:e}=t;return t.internalFormat=e===34041?HR.DEPTH24_STENCIL8:e===6402?A2.DEPTH_COMPONENT24:e,t.internalFormat}function tGe(t){let e="width"in t?t.width:t.codedWidth,i="height"in t?t.height:t.codedHeight;return t instanceof HTMLVideoElement&&(e=t.videoWidth,i=t.videoHeight),{width:e,height:i,depth:1}}let iGe=class r_e extends e_e{constructor(e,i){switch(super(),this.context=e,Object.assign(this,i),this.internalFormat){case It.R16F:case It.R32F:case It.R8_SNORM:case It.R8:this.pixelFormat=6403;break;case It.R8I:case It.R8UI:case It.R16I:case It.R16UI:case It.R32I:case It.R32UI:this.pixelFormat=36244}}static validate(e,i){return new r_e(e,i)}};const rGe=!!ve("esri-tests-disable-gpu-memory-measurements"),Tf=()=>Ie.getLogger("esri/views/webgl/Texture");var ws;let nGe=(ws=class{constructor(e,i=null,r=null){if(this.type=1,this._glName=null,this._samplingModeDirty=!1,this._wrapModeDirty=!1,this._shadowFilterDirty=!1,this._wasImmutablyAllocated=!1,"context"in e)this._descriptor=e,r=i;else{const n=iGe.validate(e,i);if(!n)throw new ae("texture:invalid-descriptor","Texture descriptor invalid");this._descriptor=n}this._descriptor.target===34067?this._setDataCubeMap(r):this.setData(r)}get glName(){return this._glName}get descriptor(){return this._descriptor}get usedMemory(){return rGe?0:XHe(this._descriptor)}get isDirty(){return this._samplingModeDirty||this._wrapModeDirty||this._shadowFilterDirty}get hasWebGLTextureObject(){return!!this._glName}dispose(){var e;this.abortCompression(),this.hasWebGLTextureObject&&((e=this._descriptor.context)!=null&&e.gl)&&(this._descriptor.context.instanceCounter.decrement(Zse.Texture,this),this._descriptor.context.unbindTexture(this),this._descriptor.context.gl.deleteTexture(this._glName),this._glName=null,this._descriptor=null)}release(){this.dispose()}[Symbol.dispose](){this.dispose()}resize(e,i){const r=this._descriptor;if(r.width!==e||r.height!==i){if(this._wasImmutablyAllocated)throw new ae("texture:immutable-resize","Immutable textures can't be resized!");r.width=e,r.height=i,this._descriptor.target===34067?this._setDataCubeMap(null):this.setData(null)}}enableCompression(e){this._descriptor.compress=e}disableCompression(){this._descriptor.compress=void 0}setData(e){this.abortCompression(),!Mx(e)&&this._descriptor.internalFormat&&dD(Ja,this._descriptor.internalFormat)&&(this._descriptor.internalFormat=void 0),this._setData(e),!Mx(e)&&this._descriptor.compress&&this._compressOnWorker(e)}updateData(e,i,r,n,s,a,o=0){a||Tf().error("An attempt to use uninitialized data!"),this.hasWebGLTextureObject||Tf().error("An attempt to update uninitialized texture!");const l=this._descriptor;l.internalFormat=yO(l);const{context:c,pixelFormat:h,dataType:m,target:g,isImmutable:v}=l;if(v&&!this._wasImmutablyAllocated)throw new ae("texture:uninitialized","Cannot update immutable texture before allocation!");const b=c.bindTexture(this,ws.TEXTURE_UNIT_FOR_UPDATES,!0);(i<0||r<0||i+n>l.width||r+s>l.height)&&Tf().error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage();const{gl:x}=c;o&&(n&&s||Tf().warn("Must pass width and height if `UNPACK_SKIP_ROWS` is used"),x.pixelStorei(x.UNPACK_SKIP_ROWS,o)),Yse(a)?x.texSubImage2D(g,e,i,r,n,s,h,m,a):Mx(a)?x.compressedTexSubImage2D(g,e,i,r,n,s,l.internalFormat,a.levels[e]):x.texSubImage2D(g,e,i,r,n,s,h,m,a),o&&x.pixelStorei(x.UNPACK_SKIP_ROWS,0),c.bindTexture(b,ws.TEXTURE_UNIT_FOR_UPDATES)}updateData3D(e,i,r,n,s,a,o,l){l||Tf().error("An attempt to use uninitialized data!"),this.hasWebGLTextureObject||Tf().error("An attempt to update an uninitialized texture!");const c=this._descriptor;c.internalFormat=yO(c);const{context:h,pixelFormat:m,dataType:g,isImmutable:v,target:b}=c;if(v&&!this._wasImmutablyAllocated)throw new ae("texture:uninitialized","Cannot update immutable texture before allocation!");k1(b)||Tf().warn("Attempting to set 3D texture data on a non-3D texture");const x=h.bindTexture(this,ws.TEXTURE_UNIT_FOR_UPDATES);h.setActiveTexture(ws.TEXTURE_UNIT_FOR_UPDATES),(i<0||r<0||n<0||i+s>c.width||r+a>c.height||n+o>c.depth)&&Tf().error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage();const{gl:$}=h;if(Mx(l))l=l.levels[e],$.compressedTexSubImage3D(b,e,i,r,n,s,a,o,c.internalFormat,l);else{const M=l;$.texSubImage3D(b,e,i,r,n,s,a,o,m,g,M)}h.bindTexture(x,ws.TEXTURE_UNIT_FOR_UPDATES)}generateMipmap(){const e=this._descriptor;if(e.width===0||e.height===0)return;if(!e.hasMipmap){if(this._wasImmutablyAllocated)throw new ae("texture:immutable-change","Cannot add mipmaps to immutable texture after allocation");e.hasMipmap=!0,this._samplingModeDirty=!0,IM(e)}e.samplingMode===9729?(this._samplingModeDirty=!0,e.samplingMode=9985):e.samplingMode===9728&&(this._samplingModeDirty=!0,e.samplingMode=9984);const i=this._descriptor.context.bindTexture(this,ws.TEXTURE_UNIT_FOR_UPDATES);this._descriptor.context.setActiveTexture(ws.TEXTURE_UNIT_FOR_UPDATES),this._descriptor.context.gl.generateMipmap(e.target),this._descriptor.context.bindTexture(i,ws.TEXTURE_UNIT_FOR_UPDATES)}clearMipmap(){const e=this._descriptor;if(e.hasMipmap){if(this._wasImmutablyAllocated)throw new ae("texture:immutable-change","Cannot delete mipmaps to immutable texture after allocation");e.hasMipmap=!1,this._samplingModeDirty=!0,IM(e)}e.samplingMode===9985?(this._samplingModeDirty=!0,e.samplingMode=9729):e.samplingMode===9984&&(this._samplingModeDirty=!0,e.samplingMode=9728)}setSamplingMode(e){e!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=e,this._samplingModeDirty=!0)}setWrapMode(e){e!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=e,IM(this._descriptor),this._wrapModeDirty=!0)}setShadowFiltering(e){e!==this._descriptor.linearFilterDepth&&(this._descriptor.linearFilterDepth=this._descriptor.compareEnabled=e,this.setSamplingMode(e?9729:9728),IM(this._descriptor),this._shadowFilterDirty=!0)}applyChanges(){this._samplingModeDirty&&(this._applySamplingMode(),this._samplingModeDirty=!1),this._wrapModeDirty&&(this._applyWrapMode(),this._wrapModeDirty=!1),this._shadowFilterDirty&&(this._applyShadowMode(),this._shadowFilterDirty=!1)}abortCompression(){this._compressionAbortController=Fa(this._compressionAbortController)}_setData(e,i){var l;const r=this._descriptor,n=(l=r.context)==null?void 0:l.gl;if(!n)return;Ab(n),this.hasWebGLTextureObject||(this._glName=n.createTexture(),r.context.instanceCounter.increment(Zse.Texture,this)),IM(r);const s=r.context.bindTexture(this,ws.TEXTURE_UNIT_FOR_UPDATES);r.context.setActiveTexture(ws.TEXTURE_UNIT_FOR_UPDATES),this._configurePixelStorage(),Ab(n);const a=i??r.target,o=k1(a);if(Yse(e))this._setDataFromTexImageSource(e,a);else{const{width:c,height:h,depth:m}=r;if(c==null||h==null)throw new ae("texture:missing-size","Width and height must be specified!");if(o&&m==null)throw new ae("texture:missing-depth","Depth must be specified!");if(r.internalFormat=yO(r),r.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(a,r.internalFormat,r.hasMipmap,c,h,m),Mx(e)){if(!KHe(r.internalFormat))throw new ae("texture:format-mismatch","Attempting to use compressed data with an uncompressed format!");this._setDataFromCompressedSource(e,r.internalFormat,a)}else this._texImage(a,0,r.internalFormat,c,h,m,e),Ab(n),r.hasMipmap&&this.generateMipmap()}this._applySamplingMode(),this._applyWrapMode(),this._applyAnisotropicFilteringParameters(),this._applyShadowMode(),Ab(n),r.context.bindTexture(s,ws.TEXTURE_UNIT_FOR_UPDATES)}_setDataCubeMap(e=null){for(let i=34069;i<=34074;i++)this._setData(e,i)}_configurePixelStorage(){const e=this._descriptor.context.gl,{unpackAlignment:i,flipped:r,preMultiplyAlpha:n}=this._descriptor;e.pixelStorei(e.UNPACK_ALIGNMENT,i),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,r?1:0),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n?1:0)}_setDataFromTexImageSource(e,i){const{gl:r}=this._descriptor.context,n=this._descriptor;n.internalFormat=yO(n);const s=k1(i),{width:a,height:o,depth:l}=tGe(e);n.width&&n.height,n.width||(n.width=a),n.height||(n.height=o),s&&n.depth,s&&(n.depth=l),n.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(i,n.internalFormat,n.hasMipmap,a,o,l),this._texImage(i,0,n.internalFormat,a,o,l,e),Ab(r),n.hasMipmap&&(this.generateMipmap(),Ab(r))}_setDataFromCompressedSource(e,i,r){const n=this._descriptor,{width:s,height:a,depth:o}=n,l=e.levels,c=Jse(r,s,a,o),h=Math.min(c,l.length)-1;this._descriptor.context.gl.texParameteri(n.target,33085,h),this._forEachMipmapLevel((m,g,v,b)=>{const x=l[Math.min(m,l.length-1)];this._compressedTexImage(r,m,i,g,v,b,x)},h)}_texStorage(e,i,r,n,s,a){const{gl:o}=this._descriptor.context;if(!QHe(i)&&!t_e(i)&&!i_e(i))throw new ae("texture:missing-format","Immutable textures must have a sized internal format");if(!this._descriptor.isImmutable)return;const l=r?Jse(e,n,s,a):1;if(k1(e)){if(a==null)throw new ae("texture:missing-depth","Missing depth dimension for 3D texture upload");o.texStorage3D(e,l,i,n,s,a)}else o.texStorage2D(e,l,i,n,s);this._wasImmutablyAllocated=!0}_texImage(e,i,r,n,s,a,o){const l=this._descriptor.context.gl,c=k1(e),{isImmutable:h,pixelFormat:m,dataType:g}=this._descriptor;if(h){if(o!=null){const v=o;if(c){if(a==null)throw new ae("texture:missing-depth","Missing depth dimension for 3D texture upload");l.texSubImage3D(e,i,0,0,0,n,s,a,m,g,v)}else l.texSubImage2D(e,i,0,0,n,s,m,g,v)}}else{const v=o;if(c){if(a==null)throw new ae("texture:missing-depth","Missing depth dimension for 3D texture upload");l.texImage3D(e,i,r,n,s,a,0,m,g,v)}else l.texImage2D(e,i,r,n,s,0,m,g,v)}}_compressedTexImage(e,i,r,n,s,a,o){const l=this._descriptor.context.gl,c=k1(e);if(this._descriptor.isImmutable){if(o!=null)if(c){if(a==null)throw new ae("texture:missing-depth","Missing depth dimension for 3D texture upload");l.compressedTexSubImage3D(e,i,0,0,0,n,s,a,r,o)}else l.compressedTexSubImage2D(e,i,0,0,n,s,r,o)}else if(c){if(a==null)throw new ae("texture:missing-depth","Missing depth dimension for 3D texture upload");l.compressedTexImage3D(e,i,r,n,s,a,0,o)}else l.compressedTexImage2D(e,i,r,n,s,0,o)}async _compressOnWorker(e){var b,x,$,M;const{width:i,height:r,context:n,flipped:s,preMultiplyAlpha:a,hasMipmap:o}=this._descriptor,l=(b=this._descriptor.compress)==null?void 0:b.compressionTracker,c=(x=this._descriptor.compress)==null?void 0:x.compressionCallback,{compressedTextureETC:h,compressedTextureS3TC:m}=n.capabilities;if(!(($=ws.compressionWorkerHandle)!=null&&$.isCompressible(e,this._descriptor))||!h&&!m)return;this.abortCompression();const g=new AbortController;let v;this._compressionAbortController=g,l==null||l.increment();try{e instanceof Uint8Array?v=e.buffer:(v=await createImageBitmap(e,{imageOrientation:s?"flipY":"none"}),lr(g));const k={data:v,width:i,height:r,needsFlip:e instanceof Uint8Array&&this.descriptor.flipped,components:this._descriptor.pixelFormat===6408?4:3,preMultiplyAlpha:a,hasMipmap:o,hasETC:!!h,hasS3TC:!!m},A=await ws.compressionWorkerHandle.invoke(k,g.signal,"low");if(lr(g),A.compressedTexture&&this.hasWebGLTextureObject){const L=this.usedMemory;this._descriptor.internalFormat=A.internalFormat,this._setData(A.compressedTexture),c==null||c(L-this.usedMemory)}}catch(k){In(k)||Tf().error("Texture compression failed!")}finally{l==null||l.decrement(),(M=this._compressionAbortController)!=null&&M.signal.aborted&&(this._compressionAbortController=null),v instanceof ImageBitmap&&v.close()}}_forEachMipmapLevel(e,i=1/0){let{width:r,height:n,depth:s,hasMipmap:a,target:o}=this._descriptor;const l=o===32879;if(r==null||n==null||l&&s==null)throw new ae("texture:missing-size","Missing texture dimensions for mipmap calculation");for(let c=0;e(c,r,n,s),a&&(r!==1||n!==1||l&&s!==1)&&!(c>=i);++c)r=Math.max(1,r>>1),n=Math.max(1,n>>1),l&&(s=Math.max(1,s>>1))}_applySamplingMode(){var s;const e=this._descriptor,i=(s=e.context)==null?void 0:s.gl;let r=e.samplingMode,n=e.samplingMode;r===9985||r===9987?(r=9729,e.hasMipmap||(n=9729)):r!==9984&&r!==9986||(r=9728,e.hasMipmap||(n=9728)),i.texParameteri(e.target,i.TEXTURE_MAG_FILTER,r),i.texParameteri(e.target,i.TEXTURE_MIN_FILTER,n)}_applyWrapMode(){var r;const e=this._descriptor,i=(r=e.context)==null?void 0:r.gl;typeof e.wrapMode=="number"?(i.texParameteri(e.target,i.TEXTURE_WRAP_S,e.wrapMode),i.texParameteri(e.target,i.TEXTURE_WRAP_T,e.wrapMode)):(i.texParameteri(e.target,i.TEXTURE_WRAP_S,e.wrapMode.s),i.texParameteri(e.target,i.TEXTURE_WRAP_T,e.wrapMode.t))}_applyShadowMode(){var n;const e=this._descriptor,i=(n=e.context)==null?void 0:n.gl,r=e.compareEnabled?i.COMPARE_REF_TO_TEXTURE:i.NONE;i.texParameteri(e.target,i.TEXTURE_COMPARE_MODE,r),e.compareEnabled&&i.texParameteri(e.target,i.TEXTURE_COMPARE_FUNC,i.GREATER),Ab(i)}_applyAnisotropicFilteringParameters(){const e=this._descriptor,i=e.context.capabilities.textureFilterAnisotropic;i&&e.context.gl.texParameterf(e.target,i.TEXTURE_MAX_ANISOTROPY,e.maxAnisotropy??1)}},ws.TEXTURE_UNIT_FOR_UPDATES=0,ws.compressionWorkerHandle=null,ws);const R6=()=>Ie.getLogger("esri.views.2d.engine.webgl.painter.highlight.HighlightGradient");function sGe(t,e){e.fillColor[0]=t.color.r/255,e.fillColor[1]=t.color.g/255,e.fillColor[2]=t.color.b/255,e.fillColor[3]=t.color.a,t.haloColor?(e.outlineColor[0]=t.haloColor.r/255,e.outlineColor[1]=t.haloColor.g/255,e.outlineColor[2]=t.haloColor.b/255,e.outlineColor[3]=t.haloColor.a):(e.outlineColor[0]=e.fillColor[0],e.outlineColor[1]=e.fillColor[1],e.outlineColor[2]=e.fillColor[2],e.outlineColor[3]=e.fillColor[3]),e.fillColor[3]*=t.fillOpacity,e.outlineColor[3]*=t.haloOpacity,e.fillColor[0]*=e.fillColor[3],e.fillColor[1]*=e.fillColor[3],e.fillColor[2]*=e.fillColor[3],e.outlineColor[0]*=e.outlineColor[3],e.outlineColor[1]*=e.outlineColor[3],e.outlineColor[2]*=e.outlineColor[3],e.outlineWidth=(1-t.haloBlur)*t.haloWidth,e.outerHaloWidth=t.haloBlur*t.haloWidth/2,e.innerHaloWidth=t.haloBlur*t.haloWidth/2,e.outlinePosition=0}const aGe=[0,0,0,0];let n_e=class{constructor(){this.type="single",this._highlightOptions=new wv,this._convertedHighlightOptions={fillColor:[0,0,0,0],outlineColor:[0,0,0,0],outlinePosition:0,outlineWidth:0,innerHaloWidth:0,outerHaloWidth:0},this._optionsShadeTexKey="",this._texelData=new Uint8Array(4*SM),this._minMaxDistance=[0,0]}setHighlightOptions(e){this._highlightOptions=e}applyHighlightOptions(e,i){this._updateGradientTexture(e),e.bindTexture(this._shadeTex,NHe),i.setUniform2fv("u_minMaxDistance",this._minMaxDistance)}destroy(){var e;(e=this._shadeTex)==null||e.dispose(),this._shadeTex=null}getReasonsWithGradients(){return[{activeReasons:(1<<Ywe)-1,activeGradient:this}]}_updateGradientTexture(e){const i=oGe(this._highlightOptions);if(i===this._optionsShadeTexKey)return;this._optionsShadeTexKey=i,sGe(this._highlightOptions,this._convertedHighlightOptions);const r=this._convertedHighlightOptions,n=r.outlinePosition-r.outlineWidth/2-r.outerHaloWidth,s=r.outlinePosition-r.outlineWidth/2,a=r.outlinePosition+r.outlineWidth/2,o=r.outlinePosition+r.outlineWidth/2+r.innerHaloWidth,l=Math.sqrt(Math.PI/2)*WHe,c=Math.abs(n)>l?Math.round(10*(Math.abs(n)-l))/10:0,h=Math.abs(o)>l?Math.round(10*(Math.abs(o)-l))/10:0;let m;c&&!h?R6().error("The outer rim of the highlight is "+c+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards positive values (inwards)."):!c&&h?R6().error("The inner rim of the highlight is "+h+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards negative values (outwards)."):c&&h&&R6().error("The highlight is "+Math.max(c,h)+"px away from the edge of the feature; consider reducing some width values.");const g=[void 0,void 0,void 0,void 0];function v(x,$,M){g[0]=(1-M)*x[0]+M*$[0],g[1]=(1-M)*x[1]+M*$[1],g[2]=(1-M)*x[2]+M*$[2],g[3]=(1-M)*x[3]+M*$[3]}const{_texelData:b}=this;for(let x=0;x<SM;++x)m=n+x/(SM-1)*(o-n),m<n?(g[0]=0,g[1]=0,g[2]=0,g[3]=0):m<s?v(aGe,r.outlineColor,(m-n)/(s-n)):m<a?[g[0],g[1],g[2],g[3]]=r.outlineColor:m<o?v(r.outlineColor,r.fillColor,(m-a)/(o-a)):[g[0],g[1],g[2],g[3]]=r.fillColor,b[4*x]=255*g[0],b[4*x+1]=255*g[1],b[4*x+2]=255*g[2],b[4*x+3]=255*g[3];if(this._minMaxDistance[0]=n,this._minMaxDistance[1]=o,!this._shadeTex){const x=new e_e(SM,1);x.wrapMode=33071,this._shadeTex=new nGe(e,x)}this._shadeTex.updateData(0,0,0,SM,1,this._texelData)}};function oGe(t){return`${t.color};${t.haloColor};${t.haloOpacity};${t.fillOpacity};${t.haloWidth};${t.haloBlur}`}let lGe=class{constructor(){this.type="multi",this.gradients=[]}setHighlightOptions(e){for(let i=0;i<e.length;i++)this.gradients[i]||(this.gradients[i]=new n_e),this.gradients[i].setHighlightOptions(e[i]);for(let i=e.length+1;i<this.gradients.length;i++)this.gradients[i].destroy();this.gradients.length=e.length}destroy(){for(const e of this.gradients)e.destroy()}getReasonsWithGradients(){let e=1;const i=[];for(let r=0;r<this.gradients.length;r++){const n=this.gradients[r];i.push({activeReasons:e,activeGradient:n}),e<<=1}return i}};const s_e={color:{write:[!0,!0,!0,!0],blendMode:"composite"},depth:!1,stencil:{write:!1,test:{compare:514,mask:255,op:{fail:7680,zFail:7680,zPass:7681}}}},cGe={color:{write:[!0,!0,!0,!0],blendMode:"additive"},depth:!1,stencil:!1},uGe={...s_e,color:{write:[!0,!0,!0,!0],blendMode:"delete"}};function dGe({pixelRatio:t,state:e,displayLevel:i,requiredLevel:r},n){const s=1/2**(i-n.key.level),a=1/2**(r-n.key.level);return{displayMat3:e.displayMat3,displayViewMat3:e.displayViewMat3,displayViewScreenMat3:n.transforms.displayViewScreenMat3,viewMat3:e.viewMat3,tileMat3:n.transforms.tileMat3,displayZoomFactor:s,requiredZoomFactor:a,tileOffset:[n.x,n.y],currentScale:e.scale,currentZoom:i,metersPerSRUnit:$u(e.spatialReference),rotation:e.rotation,pixelRatio:t}}function a_e(t){var e;return((e=t.passOptions)==null?void 0:e.type)==="highlight"}function o_e(t){var e;return((e=t.passOptions)==null?void 0:e.type)==="hittest"}function hGe(t){if(!o_e(t))return null;const{position:e,distance:i,smallSymbolDistance:r,smallSymbolSizeThreshold:n}=t.passOptions;return{position:e,distance:i,smallSymbolDistance:r,smallSymbolSizeThreshold:n}}function pGe(t){if(!a_e(t))return null;const{activeReasons:e,highlightAll:i}=t.passOptions;return{activeReasons:e,highlightAll:i?1:0}}function iCt(t,e,i){const r={};for(const n in i)typeof i[n]!="function"?r[n]=i[n]:r[n]=i[n](t,e);return r}function rCt(t,e){const{attributeView:i,context:r}=t;return{storage:i.getUniforms(r),view:dGe(t,e),hittestRequest:hGe(t),highlight:pGe(t)}}function nCt(t){return{inside:t.selection===2,outside:t.selection===3}}function fGe(t){return o_e(t)?cGe:a_e(t)&&t.passOptions.stepType==="clear"?uGe:s_e}function sCt(t){const{row:e,col:i}=t.key,r=i*Wse,n=e*Wse;return{tileOffsetFromLocalOrigin:[r%gO,n%gO],maxIntsToLocalOrigin:[Math.floor(r/gO),Math.floor(n/gO)]}}const mGe=new jt({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch",mesh:"mesh"});function aCt(t){return mGe.toJSON(t)}function oCt(t){const{bandCount:e,attributeTable:i,colormap:r,pixelType:n}=t.raster.rasterInfo;return e===1&&(i!=null||r!=null||n==="u8"||n==="s8")}function gGe(t,e){return e==null?(t==null||t.destroy(),null):((t==null?void 0:t.type)==="single"&&Array.isArray(e)&&(t.destroy(),t=null),(t==null?void 0:t.type)!=="multi"||Array.isArray(e)||(t.destroy(),t=null),t||(t=Array.isArray(e)?new lGe:new n_e),Array.isArray(e)?t.type==="multi"&&t.setHighlightOptions(e):t.type==="single"&&t.setHighlightOptions(e),t)}function lCt(t,e,i,r){const{painter:n,highlightGradient:s}=t,{highlight:a}=n.effects;if(!s)return;const o=t.passOptions,l=s.getReasonsWithGradients();for(let c=0;c<l.length;c++){const h={...t,passOptions:{type:"highlight",activeGradient:l[c].activeGradient,activeReasons:l[c].activeReasons,stepType:"burn",highlightAll:e}};if(a.bind(h),i(h),c<l.length-1){let g=0;for(let v=c+1;v<l.length;v++)g|=l[v].activeReasons;i({...t,passOptions:{type:"highlight",activeGradient:l[c].activeGradient,activeReasons:g,stepType:"clear",highlightAll:e}})}const m={...t,passOptions:{type:"highlight",activeGradient:l[c].activeGradient,activeReasons:l[c].activeReasons,stepType:"draw",highlightAll:e}};n.setPipelineState(fGe(t)),n.updatePipelineState(t.context),a.draw(m),a.unbind()}t.passOptions=o}const vO=t=>parseFloat(t)/100;function yGe(t,e,i){const r=typeof t.left=="string"?vO(t.left)*e:t.left,n=typeof t.right=="string"?vO(t.right)*e:t.right,s=typeof t.top=="string"?vO(t.top)*i:t.top,a=typeof t.bottom=="string"?vO(t.bottom)*i:t.bottom,o=s;return{xmin:r,xmax:Math.max(e-n,r),ymin:o,ymax:Math.max(i-a,s)}}function l_e(t,e,i,r){switch(e.type){case"rect":{const{width:n,height:s}=t,{xmin:a,xmax:o,ymin:l,ymax:c}=yGe(e,n,s),{x:h,y:m}=i;return h>a&&h<o&&m>l&&m<c}case"path":return e.path.length===0||!Array.isArray(e.path[0][0])||yZ(e.path,[i.x,i.y]);case"geometry":return e.geometry==null||(e.geometry.type==="polygon"?gZ(e.geometry,r):Pk(e.geometry,r))}}function vGe(t){if(!t.highlights)return null;const e=t.highlights.findIndex(i=>i.name==="default");return e===-1?null:t.highlights.items[e]}function bGe(t,e){if(!t.highlights){if(!e)return;t.highlights=new Ue([new wv])}const i=t.highlights.findIndex(r=>r.name==="default");e?t.highlights.items[i].assignFrom(e):(t.highlights.removeAt(i),t.highlights.length===0&&(t.highlights=null))}async function wGe(t,e,i){const r=V0e(e)?j0e(t,e):e;if(!t.ready||isNaN(r.x)||isNaN(r.y))return{screenPoint:r,results:[]};let n=new Set;const s=new Set;let a=!1,o=null,l=null;i!=null&&i.include?Qse(i.include,Xse(t,g=>{n.add(g),z6(g,v=>s.add(v))},(g,v)=>{s.add(g),n.add(v)},g=>{o||(o=new Set),o.add(g)},g=>n.add(g),()=>a=!0)):(a=!0,n=new Set(t.allLayerViews),n.forEach(g=>{z6(g,v=>s.add(v))})),i!=null&&i.exclude&&Qse(i.exclude,Xse(t,g=>{n.delete(g),z6(g,v=>s.delete(v))},g=>s.delete(g),g=>{l||(l=new Set),l.add(g)}));const c=t.toMap(r),h=t.allLayerViews.filter(g=>!g.suspended&&n.has(g)&&g.clips.every(v=>l_e(t,v,r,c))).reverse();let m=[...a?t.graphicsView.hitTest(c).map(g=>({type:"graphic",graphic:g,layer:null,mapPoint:c})):[],...await Promise.all(h.map(g=>g.hitTest(c,r)).toArray())].filter(ln).flat().filter(ln);return m=m.filter(g=>{var v;return g.type!=="graphic"||((v=g.layer)==null?void 0:v.type)!=="subtype-group"||s.has(g.graphic.layer)}),o&&(m=m.filter(g=>!("graphic"in g)||!g.graphic||(o==null?void 0:o.has(u7(g.graphic))))),l&&(m=m.filter(g=>!("graphic"in g)||!g.graphic||!(l!=null&&l.has(u7(g.graphic))))),{screenPoint:r,results:m}}function Xse(t,e,i,r,n,s){return a=>{if(a instanceof sr){if(a.layer===t)s==null||s();else{const o=t.allLayerViews.find(l=>l.layer===a.layer);o&&(n==null||n(o))}r(u7(a))}else if(!("layer"in a&&"element"in a))if(a.type==="subtype-sublayer"){const o=t.allLayerViews.find(l=>l.layer===a.parent);o&&i(a,o)}else{const o=t.allLayerViews.find(l=>l.layer===a);o&&e(o)}}}function Qse(t,e){if(t)if(oR(t))for(const i of t)if(oR(i))for(const r of i)e(r);else e(i);else e(t)}function u7(t){var i,r;const e=t.getObjectId();return e?`${((i=t.layer)==null?void 0:i.uid)??((r=t.sourceLayer)==null?void 0:r.uid)??"MapView"}/${e}`:`"MapView/${t.uid}`}function z6(t,e){const i=t.layer;(i==null?void 0:i.type)==="subtype-group"&&i.sublayers.forEach(r=>{e(r)})}let MM=null,GR=!0;function _Ge(t,e,i){if(!t||!e)throw new Error("Cannot construct image data without dimensions");if(GR)try{return new ImageData(t,e)}catch{GR=!1}return c_e(t,e,i)}function cCt(t,e,i,r){if(!e||!i)throw new Error("Cannot construct image data without dimensions");if(GR)try{return new ImageData(t,e,i)}catch{GR=!1}const n=c_e(e,i,r);return n.data.set(t,0),n}function xGe(){return MM||(MM=document.createElement("canvas"),MM.width=1,MM.height=1),MM}function c_e(t,e,i){return i||(i=xGe()),i.getContext("2d").createImageData(t,e)}async function $Ge(t,e){const i=window.URL.createObjectURL(t);try{const{data:r}=await mi(i,{...e,responseType:"image"});return r}catch(r){throw In(r)?r:new ae("invalid-image",`Could not fetch requested image at ${i}`)}finally{window.URL.revokeObjectURL(i)}}async function SGe(t,e){const{arrayBuffer:i,mediaType:r}=await TGe(t,e),n=r==="image/png";if(r==="image/gif"){const{isAnimatedGIF:s,parseGif:a}=await de(()=>import("./gif-S-l7DqhI.js"),[]);if(s(i))return a(i,e)}if(n){const{isAnimatedPNG:s,parseApng:a}=await de(()=>import("./apng-DB_3C4gK.js"),__vite__mapDeps([255,7]));if(s(i))return a(i,e)}return $Ge(new Blob([i],{type:r}),e)}async function TGe(t,e){var n;const i=Xw(t);if(i!=null&&i.isBase64)return{arrayBuffer:gfe(i.data),mediaType:i.mediaType};const r=await mi(t,{responseType:"array-buffer",...e});return{arrayBuffer:r.data,mediaType:((n=r.getHeader)==null?void 0:n.call(r,"Content-Type"))??""}}function u_e(t,e,i){const{ctx:r,canvas:n}=h_e(t,i),s=r.getImageData(0,0,t.width,t.height),a=f_e(n,e);return p_e(n),{dataUrl:a,data:s}}function d_e(t,e){const{ctx:i,canvas:r}=h_e(t,e),n=i.getImageData(0,0,t.width,t.height);return p_e(r),n}function h_e(t,e){const i=IGe();e.premultipliedAlpha&&kGe(t),i.width=t.width,i.height=t.height;const r=i.getContext("2d",{willReadFrequently:!0});return r.putImageData(t,0,0),e.flipY&&EGe(r),{ctx:r,canvas:i}}function p_e(t){t.width=0,t.height=0}function IGe(){return N6==null&&(N6=document.createElement("canvas")),N6}let N6=null;function f_e(t,e){const i=AGe[e.format],r=e.quality/100;return t.toDataURL(i,r)}function m_e(t,e){const i=CGe(t),r=OGe[i];return{format:i,quality:ua(e??r,0,100)}}function g_e(t,e){return e/Math.max(t[0],t[1])}function MGe(t,e,i,r=0,n=0,s=t.width-r,a=t.height-n,o=!1){const{data:l}=t,{width:c,height:h,data:m}=e,g=s/c,v=a/h,b=Math.ceil(g/2),x=Math.ceil(v/2),$=t.width;for(let M=0;M<h;M++)for(let k=0;k<c;k++){const A=4*(k+(o?h-M-1:M)*c);let L=0,z=0,U=0,B=0,X=0,J=0;const Q=(M+.5)*v;for(let le=Math.floor(M*v);le<(M+1)*v;le++){const ie=Math.abs(Q-(le+.5))/x,re=(k+.5)*g,se=ie*ie;for(let Te=Math.floor(k*g);Te<(k+1)*g;Te++){const ne=Math.abs(re-(Te+.5))/b,_e=Math.sqrt(se+ne*ne);if(_e>=1)continue;let Oe=2*_e*_e*_e-3*_e*_e+1;const He=4*(r+Te+(n+le)*$);J+=Oe*l[He+3],z+=Oe,!i&&l[He+3]<255&&(Oe=Oe*l[He+3]/255),U+=Oe*l[He],B+=Oe*l[He+1],X+=Oe*l[He+2],L+=Oe}}m[A]=U/L,m[A+1]=B/L,m[A+2]=X/L,m[A+3]=J/z}return e}function CGe(t){switch(t){case"png":case"jpg":case"jpeg":return t;default:return PGe}}function EGe(t){t.save(),t.globalCompositeOperation="copy",t.scale(1,-1),t.translate(0,-t.canvas.height),t.drawImage(t.canvas,0,0),t.restore()}function kGe(t){const e=t.data,i=e.length;for(let r=0;r<i;r+=4){const n=e[r+3];if(n!==255&&n>0){const s=255/n;e[r]=e[r]*s,e[r+1]=e[r+1]*s,e[r+2]=e[r+2]*s}}}const AGe={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},Kse=98,PGe="png",OGe={png:100,jpg:Kse,jpeg:Kse},uCt=Object.freeze(Object.defineProperty({__proto__:null,createEmptyImageData:_Ge,encode:u_e,encodeData:d_e,getFormatAndQuality:m_e,getMaximumResolutionScale:g_e,resampleHermite:MGe,toDataUrl:f_e},Symbol.toStringTag,{value:"Module"})),y_e={flipY:!0,premultipliedAlpha:!0};async function LGe(t,e){const i=await v_e(t,e),{format:r,quality:n}=m_e(e==null?void 0:e.format,e==null?void 0:e.quality);return u_e(i,{format:r,quality:n},y_e)}async function FGe(t,e){const i=await v_e(t,e);return d_e(i,y_e)}function v_e(t,e){const i=NGe(e||{},zGe(t.stage,t.size),t.size,t.padding),r=RGe(e,t.allLayerViews);return t.stage.takeScreenshot(i,r,t.backgroundColor,e==null?void 0:e.rotation)}function RGe(t={},e){if(!t.layers)return;const i=[];return t.layers.forEach(r=>{const n=e.find(s=>s.layer.id===r.id);n!=null&&n.container&&i.push(n.container)}),i}function zGe(t,e){return Math.min(4,g_e(e,Math.min(4096,t.context.parameters.maxTextureSize)))}function NGe(t,e,i,r){t.ignorePadding&&(r={left:0,right:0,top:0,bottom:0});let n=null;t.width!=null&&t.height!=null?n=[t.width,t.height]:t.width==null&&t.height!=null?n=[t.height,t.height]:t.width!=null&&t.height==null?n=[t.width,t.width]:t.width==null&&t.height==null&&(n=null);const s=i[0]-(r.left+r.right),a=i[1]-(r.top+r.bottom);let o,l,c=t.area||{x:0,y:0,width:s,height:a};if(n){const h=s/a,m=n[0]/n[1];if(m>h){const g=c.width/m;c={x:c.x,y:Math.round(c.y+(c.height-g)/2),width:c.width,height:Math.round(g)}}else{const g=c.height*m;c={x:Math.round(c.x+(c.width-g)/2),y:c.y,width:Math.round(g),height:c.height}}}else n=[c.width,c.height];return n[0]>c.width?(o=Math.min(n[0]/c.width,e),l=n[0]/c.width/o):(o=1,l=n[0]/c.width),{cropArea:{x:Math.round((c.x+r.left)*o),y:Math.round((c.y+r.top)*o),width:Math.round(c.width*o),height:Math.round(c.height*o)},outputScale:l,resolutionScale:o}}const DGe=t=>t.includes("Brush");let b_e=class{constructor(){this._names=new Map}begin(e){this._names.has(e)||(this._names.set(e,!1),DGe(e)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${e}.Start`))}end(e){this._names.has(e)&&!this._names.get(e)&&(this._names.set(e,!0),performance.mark(`Esri.${e}.End`))}record(e){this._names.has(e)||(this._names.set(e,!0),performance.mark(`Esri.${e}`))}};const eae=Symbol("analyses-owner-handles");let _y=class extends et{constructor(e){super(e),this._allAnalysisViews=new Ue,this._creatingViewCount=0,this._attachedToViewResolver=tae(),this._items=new Map,this._moduleMap=new Map,this._scheduledUpdateHandle=null,this._emitOnView=(i,r)=>this.view.emit(i,r)}destroy(){this._disconnectOwners(),this._attachedToViewResolver.reject(Hi("AnalysisViewManager was destroyed")),this._set("view",null)}attach(){this._connectOwners(),this._attachedToViewResolver.resolve()}detach(){this._disconnectOwners(),this._attachedToViewResolver.reject(Hi()),this._attachedToViewResolver=tae()}get updating(){return!this.view.ready||this._creatingViewCount!==0||this._allAnalysisViews.some(e=>e.updating)}get testInfo(){}async whenAnalysisView(e){await this._attachedToViewResolver.promise;const i=this._items.get(e);if(i==null||i.state.list===1)throw new ae("AnalysisViewManager:no-analysis-view-for-analysis","The analysis does not exist in view.analyses",{analysis:e});return i.createAnalysisViewTask.promise}_connectOwners(){this.addHandles(this._connectAnalysesCollection(this.view.analyses),eae)}_disconnectOwners(){this.removeHandles(eae),this._update(),this._creatingViewCount=0}_connectAnalysesCollection(e){for(const n of e)this._addAnalysis(n);const i=e.on("after-add",n=>this._addAnalysis(n.item)),r=e.on("after-remove",n=>this._removeAnalysis(n.item));return Ii(()=>{i.remove(),r.remove();for(const n of e)this._removeAnalysis(n)})}_addAnalysis(e){const i=this._items.get(e);if(i==null){const r={state:{view:0,list:0},analysis:e,view:null,createAnalysisViewTask:null};this._items.set(e,r),r.createAnalysisViewTask=Zm(n=>this._createAnalysisViewPromise(r,n).then(s=>(this._emitOnView("analysis-view-create",{analysis:e,analysisView:s}),s),s=>{throw this._emitOnView("analysis-view-create-error",{analysis:e,error:s}),s}))}else i.state.list=0}_removeAnalysis(e){const i=this._items.get(e);i!=null?(i.state.list=1,this._scheduleUpdate()):Ie.getLogger(this).error("Trying to remove analysis which was not added")}_scheduleUpdate(){this._scheduledUpdateHandle==null&&(this._scheduledUpdateHandle=ET(()=>this._update()))}_update(){this._scheduledUpdateHandle=Dr(this._scheduledUpdateHandle),this._items.forEach(e=>{if(e.state.list!==1)return;const{analysis:i,view:r}=e;switch(this._items.delete(i),e.state.view){case 0:e.createAnalysisViewTask=Fa(e.createAnalysisViewTask);break;case 1:r!=null&&(this._allAnalysisViews.remove(r),e.view=Or(r),e.createAnalysisViewTask=null,this._emitOnView("analysis-view-destroy",{analysis:i,analysisView:r}))}})}async _createAnalysisViewPromise(e,i){const{analysis:r}=e;if(this._creatingViewCount+=1,!this._moduleMap.has(r.type))try{this._moduleMap.set(r.type,await this.importAnalysisViewModule(r))}catch{throw this._creatingViewCount-=1,new ae("AnalysisViewManager:no-analysis-view-for-analysis",`Analysis of type "${r.type}" is not supported`)}if(co(i))throw this._creatingViewCount-=1,Hi("AnalysisView creation aborted");const n=new(this._moduleMap.get(r.type)).default({analysis:r,view:this.view});let s=!0;_u(i,()=>{s&&this._destroyAnalysisView(r,n)});try{await n.when()}catch(a){throw s=!1,this._destroyAnalysisView(r,n),a}if(co(i))throw Hi();return s=!1,e.view=n,e.state.view=1,this._allAnalysisViews.add(n),this._creatingViewCount-=1,n}_destroyAnalysisView(e,i){i.destroyed||(this._creatingViewCount-=1,i.destroy(),this._emitOnView("analysis-view-destroy",{analysis:e,analysisView:i}))}};d([f()],_y.prototype,"updating",null),d([f({constructOnly:!0})],_y.prototype,"importAnalysisViewModule",void 0),d([f({constructOnly:!0})],_y.prototype,"view",void 0),d([f()],_y.prototype,"_allAnalysisViews",void 0),d([f()],_y.prototype,"_creatingViewCount",void 0),_y=d([V("esri.views.support.AnalysisViewManager")],_y);const jGe=_y;function tae(){const t=Fl();return t.promise.catch(()=>{}),t}let VGe=class{constructor(e){this.getUnmaskedRenderer=e}};function UGe(t){const e=t.getExtension("WEBGL_debug_renderer_info");return e?new VGe(()=>t.getParameter(e.UNMASKED_RENDERER_WEBGL)):null}let iae;function BGe(){return iae??(iae=GGe()),iae}let qGe=class{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1,this.unmaskedRenderer="unloaded"}};function HGe(t){var n;if(typeof WebGL2RenderingContext>"u")return null;const e=document.createElement("canvas");if(!e)return null;let i=e.getContext("webgl2",{failIfMajorPerformanceCaveat:!0});if(i==null&&(i=e.getContext("webgl2"),i!=null&&(t.majorPerformanceCaveat=!0,t.unmaskedRenderer=((n=UGe(i))==null?void 0:n.getUnmaskedRenderer())??"unknown")),i==null)return i;t.available=!0,t.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),t.supportsVertexShaderSamplers=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const r=i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT);return r&&(t.supportsHighPrecisionFragment=r.precision>0),i}function GGe(){const t=new qGe,e=HGe(t);return e==null||(t.supportsColorBufferFloat=e.getExtension("EXT_color_buffer_float")!==null,t.supportsColorBufferFloatBlend=e.getExtension("EXT_float_blend")!==null,t.supportsColorBufferHalfFloat=t.supportsColorBufferFloat||e.getExtension("EXT_color_buffer_half_float")!==null),t}function WGe(t){const e=BGe();return e.available?t==="3d"&&e.majorPerformanceCaveat?new ae("webgl:major-performance-caveat-detected",`Your WebGL implementation (${e.unmaskedRenderer}) doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.`):e.supportsHighPrecisionFragment?e.supportsVertexShaderSamplers?null:new ae("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new ae("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):new ae("webgl:required","WebGL2 is required but not supported.",new Error().stack)}function ZGe(t){return t&&"nodeType"in t}function YGe(t){return t&&typeof t.render=="function"}const rae={component:"esri-component"};let s0=class extends et{constructor(){super(...arguments),this.widget=null}destroy(){var e;this.node=null,(e=this.widget)==null||e.destroy()}get id(){var e,i;return this._get("id")??((e=this.widget)==null?void 0:e.id)??((i=this.node)==null?void 0:i.id)}set id(e){this._set("id",e)}set node(e){const i=this._get("node");e!==i&&(e&&e.classList.add(rae.component),i&&i.classList.remove(rae.component),this._set("node",e))}castNode(e){var i;return(i=this.widget)==null||i.destroy(),e?typeof e=="string"||ZGe(e)?(this._set("widget",null),HZ(e)):(YGe(e)&&!e.domNode&&(e.domNode=document.createElement("div")),this._set("widget",e),e.domNode):(this._set("widget",null),null)}};d([f()],s0.prototype,"id",null),d([f()],s0.prototype,"node",null),d([_i("node")],s0.prototype,"castNode",null),d([f({readOnly:!0})],s0.prototype,"widget",void 0),s0=d([V("esri.views.ui.Component")],s0);const LL=s0,JGe="--esri-calcite-mode-name";function XGe(){const t=getComputedStyle(document.body).getPropertyValue(JGe).replaceAll(/\W/g,"").toLowerCase();return t==="dark"||t==="light"?t:void 0}const w_e="calcite-mode-";function __e(t){return XGe()??khe(t??document.body)}function DY(t){return __e(t)==="dark"}function QGe(t){return`${w_e}${__e(t)}`}function KGe(t){const e=QGe(t);eWe(t),t.classList.add(e)}function eWe(t){Array.from(t.classList).forEach(e=>{e.startsWith(w_e)&&t.classList.remove(e)})}const d5=new Map;function x_e(){d5.clear()}function tWe(t){return d5.get(t)}function iWe(t,e){d5.set(t,e)}function D6(t){d5.delete(t)}function $_e(...t){const e=zo.acquire();for(let r=0;r<t.length;r++){const n=t[r],s=typeof n;if(s==="string")e.push(n);else if(Array.isArray(n))e.push.apply(e,n);else if(s==="object")for(const a in n)n[a]&&e.push(a)}const i=e.join(" ");return zo.release(e),i}(()=>{const t=new Map,e=new ResizeObserver(r=>{var n;x_e();for(const s of r)(n=t.get(s.target))==null||n(s)}),i=(r,n,s)=>(t.set(r,n),e.observe(r,s),Ii(()=>{e.unobserve(r),t.delete(r)}));return(r,n,s)=>{let a=null;return h_([be(()=>typeof r=="function"?r():r,o=>{a==null||a.remove(),o&&(a=i(o,n,s))},Ka),Ii(()=>a==null?void 0:a.remove())])}})();function xp(t){const e=t==null?void 0:t.closest("[dir]");return e!==null&&e instanceof HTMLElement&&e.dir==="rtl"||document.dir==="rtl"}function nae(t){const e="data-node-ref";this[t.getAttribute(e)]=null}function sae(t){const e="data-node-ref";this[t.getAttribute(e)]=t}function rWe(t){return t==="Enter"||t===" "}async function S_e(t,e){await FW(Mk(e));const i=typeof t=="function"?t():t;i&&("setFocus"in i&&typeof i.setFocus=="function"?await i.setFocus():i instanceof HTMLElement&&i.focus())}const nWe={left:0,top:0,bottom:0,right:0},T_e={bottom:30,top:15,right:15,left:15},If="esri-ui",il={ui:If,corner:`${If}-corner`,innerContainer:`${If}-inner-container`,manualContainer:`${If}-manual-container`,cornerContainer:`${If}-corner-container`,topLeft:`${If}-top-left`,topRight:`${If}-top-right`,bottomLeft:`${If}-bottom-left`,bottomRight:`${If}-bottom-right`};function sWe(t){return t&&!t._started&&typeof t.postMixInProperties=="function"&&typeof t.buildRendering=="function"&&typeof t.postCreate=="function"&&typeof t.startup=="function"}function bO(t){return t===0?"0":`${t}px`}function j6(t){const e=typeof t=="object"&&t!==null&&Object.getPrototypeOf(t);return(e===null||e===Object.prototype)&&("component"in t||"index"in t||"position"in t)?t:null}function V6(t,{top:e,bottom:i,left:r,right:n}){t.style.top=e,t.style.bottom=i,t.style.left=r,t.style.right=n}let xh=class extends VT{constructor(e){super(e),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentMap=new Map,this._removeWidgetHandleKey=Symbol("componentOnRemoveSymbol"),this._locale=Ol(),this.view=null,this._applyViewPadding=()=>{const i=this.container;i&&V6(i,this._toPixelPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const i=this._innerContainer;i&&V6(i,this._toPixelPosition(this.padding))},this._initContainers()}initialize(){this.addHandles([be(()=>{var e;return[(e=this.view)==null?void 0:e.padding,this.container]},this._applyViewPadding,Ft),be(()=>this.padding,this._applyUIPadding,Ft),be(()=>[this.container,this._locale],([e,i])=>{e&&e.setAttribute("lang",i)},Ft),kZ(e=>{this._locale=e})])}destroy(){this.removeAllHandles(),this.container=null;for(const e of this._components)e.destroy();this._components.length=0,this._componentMap.clear(),this.view=null,this._set("view",null)}set container(e){const i=this._get("container");e!==i&&(e&&(e.classList.add(il.ui),KGe(e),this._attachContainers(e)),i&&(i.classList.remove(il.ui),V6(i,{top:"",bottom:"",left:"",right:""}),i.textContent=""),this._set("container",e))}get height(){var s;const e=((s=this.view)==null?void 0:s.height)??0;if(e===0)return e;const i=this._getViewPadding(),{top:r,bottom:n}=i;return Math.max(e-r-n,0)}get padding(){return this._get("padding")}set padding(e){this._overrideIfSome("padding",e)}castPadding(e){return typeof e=="number"?{bottom:e,top:e,right:e,left:e}:{...T_e,...e}}get width(){var s;const e=((s=this.view)==null?void 0:s.width)??0;if(e===0)return e;const i=this._getViewPadding(),{left:r,right:n}=i;return Math.max(e-r-n,0)}add(e,i){let r,n,s;if(Array.isArray(e))return void e.forEach(o=>this.add(o,i));const a=j6(e);a&&({index:r,position:i,component:e,key:n}=a),i&&typeof i=="object"&&({index:r,key:n,position:i,internal:s}=i),!e||i&&!this._isValidPosition(i)||this._add(e,i,r??this._getNumComponentsAtPosition(i),n,s)}remove(e,i){var n;if(!e)return;if(Array.isArray(e))return e.map(s=>this.remove(s,i));const r=this._find(e);if(r){const s=this._componentMap.get(r);if(!s||s.key!==i)return;const a=this._components.indexOf(r),o=r.node.parentNode;return o==null||o.removeChild(r.node),this._componentMap.delete(r),(n=r.widget)==null||n.removeHandlesReference(this._removeWidgetHandleKey),this._components.forEach(l=>{const c=this._componentMap.get(l);c&&c.position===s.position&&c.index>s.index&&c.index--}),this._components.splice(a,1)[0]}}empty(e,i={removeInternal:!1}){if(Array.isArray(e)){for(const s of e)this.empty(s,i);return}const r=this._positionNameToContainerLookup[e??"manual"],n=Array.prototype.slice.call(r.children).map(s=>this._findByNode(s)).filter(s=>{var a;return s==null?!1:!(((a=this._componentMap.get(s))==null?void 0:a.internal)??!1)||i.removeInternal});for(const s of n)this.remove(s)}move(e,i){if(Array.isArray(e)&&e.forEach(a=>this.move(a,i)),!e)return;let r;const n=j6(e)||j6(i);if(n&&(r=n.index,i=n.position,e=n.component||e),i&&!this._isValidPosition(i))return;const s=this.remove(e);s&&this.add(s,{position:i,index:r})}find(e){if(!e)return null;const i=this._findById(e);return i&&(i.widget||i.node)}getComponents(e,i={includeInternal:!1}){return e?Array.isArray(e)?e.flatMap(r=>this._getComponentsAtPosition(r,i)):this._getComponentsAtPosition(e,i):this._components.filter(r=>{var n;return i.includeInternal||!((n=this._componentMap.get(r))!=null&&n.internal)}).map(({widget:r,node:n})=>r??n)}getPosition(e){for(const i in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[i].contains(e))return i;return null}_add(e,i,r,n,s){e instanceof LL||(e=new LL({node:e}));const{widget:a}=e;a!=null&&a instanceof et&&a.addHandles(Ii(()=>{queueMicrotask(()=>this.remove(e))}),this._removeWidgetHandleKey);const o=this._positionNameToContainerLookup[i];this._components.some(l=>{var m,g;const c=(m=this._componentMap.get(l))==null?void 0:m.position,h=c?this._positionNameToContainerLookup[c]:null;return o===h&&((g=this._componentMap.get(l))==null?void 0:g.index)===r})&&this._components.forEach(l=>{const c=this._componentMap.get(l),h=c==null?void 0:c.position,m=h?this._positionNameToContainerLookup[h]:null;c&&m===o&&c.index>=r&&c.index++}),this._place({component:e,position:i,index:r}),this._components.push(e),this._componentMap.set(e,{key:n,position:i,internal:s,index:r})}_find(e){return e?e instanceof LL?this._findByComponent(e):typeof e=="string"?this._findById(e):"domNode"in e?this._findByNode(e.domNode):this._findByNode(e):null}_getViewPadding(){var e;return((e=this.view)==null?void 0:e.padding)??nWe}_attachContainers(e){e.appendChild(this._innerContainer),e.appendChild(this._manualContainer)}_initContainers(){const e=document.createElement("div");e.classList.add(il.innerContainer,il.cornerContainer);const i=document.createElement("div");i.classList.add(il.innerContainer,il.manualContainer);const r=document.createElement("div");r.classList.add(il.topLeft,il.corner),e.appendChild(r);const n=document.createElement("div");n.classList.add(il.topRight,il.corner),e.appendChild(n);const s=document.createElement("div");s.classList.add(il.bottomLeft,il.corner),e.appendChild(s);const a=document.createElement("div");a.classList.add(il.bottomRight,il.corner),e.appendChild(a),this._innerContainer=e,this._manualContainer=i;const o=xp();this._cornerNameToContainerLookup={"top-left":r,"top-right":n,"bottom-left":s,"bottom-right":a,"top-leading":o?n:r,"top-trailing":o?r:n,"bottom-leading":o?a:s,"bottom-trailing":o?s:a},this._positionNameToContainerLookup={manual:i,...this._cornerNameToContainerLookup}}_isValidPosition(e){return!!this._positionNameToContainerLookup[e]}_place(e){var l,c;const i=e.position??"manual",{component:r,index:n}=e,s=this._positionNameToContainerLookup[i],a=n!=null&&n>-1;if(sWe(r.widget)&&r.widget.startup(),!a)return void s.appendChild(r.node);const o=Array.from(s.children);if(o.length!==0){for(const h of o){const m=this._findByNode(h);if(m&&n<(((l=this._componentMap.get(m))==null?void 0:l.index)??0))return void((c=h.parentNode)==null?void 0:c.insertBefore(r.node,h))}s.appendChild(r.node)}else s.appendChild(r.node)}_toPixelPosition(e){return{top:bO(e.top),left:bO(e.left),right:bO(e.right),bottom:bO(e.bottom)}}_findByComponent(e){return this._components.find(i=>i===e)??null}_findById(e){return this._components.find(({id:i})=>i===e)??null}_findByNode(e){return e?this._components.find(({node:i})=>i===e):null}_getComponentsAtPosition(e,i){const r=this._positionNameToContainerLookup[e];return Array.prototype.slice.call(r.children).map(n=>this._findByNode(n)).filter(ln).filter(n=>{var s;return i.includeInternal||!((s=this._componentMap.get(n))!=null&&s.internal)}).map(({widget:n,node:s})=>n??s)}_getNumComponentsAtPosition(e){const i=this._positionNameToContainerLookup[e];return(i==null?void 0:i.children.length)??0}};d([f()],xh.prototype,"_locale",void 0),d([f()],xh.prototype,"container",null),d([f()],xh.prototype,"height",null),d([f({value:T_e})],xh.prototype,"padding",null),d([_i("padding")],xh.prototype,"castPadding",null),d([f()],xh.prototype,"view",void 0),d([f()],xh.prototype,"width",null),xh=d([V("esri.views.ui.UI")],xh);const aWe=xh,oWe={handleInterceptedEvent:(t,e,i,r)=>(t.scheduleRender(),e.properties[`on${r.type}`].apply(e.properties.bind||i,[r]))},lWe={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(t,e,i)=>{e.startsWith("-")?t.style.setProperty(e,i):t.style[e]=i}},cWe=t=>({...lWe,...t}),uWe=(t,e)=>{const i=[];for(;t&&t!==e;)i.push(t),t=t.parentNode;return i},dWe=(t,e)=>t.find(e),aae=(t,e,i=!1)=>{let r=t;return e.forEach((n,s)=>{const a=r!=null&&r.children?dWe(r.children,o=>o.domNode===n):void 0;i&&!a&&s!==e.length-1||(r=a)}),r},hWe=t=>{let e;const i={...oWe,...t},r=cWe(i),n=r.performanceLogger;let s,a=!0,o=!1;const l=[],c=[],h=(g,v,b)=>{var M;let x;r.eventHandlerInterceptor=(k,A,L,z)=>function(U){let B;n("domEvent",U);const X=uWe(U.currentTarget,x.domNode),J=X.some(le=>{var ie;return customElements.get((ie=le==null?void 0:le.tagName)==null?void 0:ie.toLowerCase())});if(U.eventPhase===Event.CAPTURING_PHASE||!J)X.reverse(),B=aae(x.getLastRender(),X);else{const le=U.composedPath(),ie=le.slice(le.indexOf(U.currentTarget),le.indexOf(x.domNode)).reverse();B=aae(x.getLastRender(),ie,!0)}let Q;return B&&(Q=i.handleInterceptedEvent(e,B,this,U)),n("domEventProcessed",U),Q},(M=i.postProcessProjectionOptions)==null||M.call(i,r);const $=b();x=g(v,$,r),r.eventHandlerInterceptor=void 0,l.push(x),c.push(b),i.afterFirstVNodeRendered&&i.afterFirstVNodeRendered(x,$)};let m=()=>{if(s=void 0,a){a=!1,n("renderStart",void 0);for(let g=0;g<l.length;g++){const v=c[g]();n("rendered",void 0);try{l[g].update(v)}catch(b){console.error(b)}n("patched",void 0)}n("renderDone",void 0),a=!0}};return i.modifyDoRenderImplementation&&(m=i.modifyDoRenderImplementation(m,l,c)),e={renderNow:m,scheduleRender:()=>{s||o||(s=requestAnimationFrame(m))},stop:()=>{s&&(cancelAnimationFrame(s),s=void 0),o=!0},resume:()=>{o=!1,a=!0,e.scheduleRender()},append:(g,v)=>{h(tv.append,g,v)},insertBefore:(g,v)=>{h(tv.insertBefore,g,v)},merge:(g,v)=>{h(tv.merge,g,v)},replace:(g,v)=>{h(tv.replace,g,v)},detach:g=>{for(let v=0;v<c.length;v++)if(c[v]===g)return c.splice(v,1),l.splice(v,1)[0];throw new Error("renderFunction was not found")}},e};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */let I_e=!1;const pWe=t=>{I_e=!0,fEe(t)};let M_e;function fWe(){I_e||pWe(El(Hr(M_e)))}function Iu(t){var i;const e=[];for(const r of Object.keys(t))customElements.get(`calcite-${r}`)||e.push((i=t[r])==null?void 0:i.call(t));return e.length>0?Promise.all(e):null}M_e="components/assets";const C_e=Symbol("widget"),E_e=Symbol("widget-test-data"),mWe=[],gWe={},WR=new WeakMap;function k_e(t,e){let i=e.children;if(i!=null&&i.length)for(let n=0;n<i.length;++n)i[n]=k_e(t,i[n]);else i=mWe;const r=e.vnodeSelector;if(ZR(r)){const n=e.properties||gWe,s=n.key||r,a={key:s,afterCreate:yWe,afterUpdate:vWe,afterRemoved:A_e,parentWidget:t,widgetConstructor:r,widgetProperties:{...n,key:s,children:i}};return{vnodeSelector:r.vnodeSelector,properties:a,children:void 0,text:void 0,domNode:null}}return e}function yWe(t,e,i,{parentWidget:r,widgetConstructor:n,widgetProperties:s}){var o;const a=new n(s);a.container=t,WR.set(t,a),(o=a.afterCreate)==null||o.call(a,a,t),r.addHandles(Ii(()=>A_e(t))),queueMicrotask(()=>{var l;(l=a[E_e].projector)==null||l.renderNow()})}function vWe(t,e,i,{widgetProperties:r}){var s;const n=WR.get(t);n&&(n.set(r),(s=n.afterUpdate)==null||s.call(n,n,t))}function A_e(t){var i;const e=WR.get(t);e&&((i=e.afterRemoved)==null||i.call(e,e,t),e.destroy(),WR.delete(t))}function ZR(t){return typeof t=="function"&&t[C_e]}const oae=new Set;function bWe(t){oae.add(t),t.finally(()=>oae.delete(t))}function wWe(t){return Ii()}var lae;let _We=0;function P_e(t,e){const i=Object.prototype.hasOwnProperty;for(const r in e)i.call(e,r)&&i.call(t,r)&&(t[r]!=null&&e[r]!=null&&typeof t[r]=="object"&&typeof e[r]=="object"?P_e(t[r],e[r]):t[r]=e[r]);return t}const xWe=hWe({postProcessProjectionOptions(t){const e=t.eventHandlerInterceptor,i=/capture$/i;t.eventHandlerInterceptor=(r,n,s,a)=>{const o=e==null?void 0:e(r,n,s,a),l=i.test(r);if(!((r=r.replace(i,"")).toLowerCase()in s)||l){const c=r[2].toLowerCase()+r.slice(3),h=v=>o==null?void 0:o.call(s,v);s.addEventListener(c,h,l);const m=()=>s.removeEventListener(c,h,l),g=a.afterRemoved;a.afterRemoved=v=>{g==null||g(v),m()}}return o}},handleInterceptedEvent(t,e,i,r){const{eventPhase:n,type:s}=r,a=n===Event.CAPTURING_PHASE;let o=`on${s}${a?"capture":""}`;const l=e.properties;(l&&o in l||(o=`on${s[0].toUpperCase()}${s.slice(1)}${a?"Capture":""}`,l&&o in l))&&(x_e(),t.scheduleRender(),l[o].call(l.bind||i,r))}});let U6=!1;var bw;let ea=(bw=class extends qD(VT){constructor(e,i){super(e,i),this._attached=!1,this._projector=xWe,this._readyForTrueRender=!1,this.key=this,this.autoRenderingEnabled=!0,this._loadLocale=Od(async()=>{var l;if((l=this._messageBundleProps)!=null&&l.length){const c=await Promise.allSettled(this._messageBundleProps.map(async({bundlePath:h,propertyName:m})=>{if(this.destroyed)return;let g=await kye(h);this.destroyed||(this.uiStrings&&Object.keys(this.uiStrings)&&(g=P_e(he(g),this.uiStrings)),this[m]=g)}));if(this.destroyed)return;for(const h of c)h.status==="rejected"&&Ie.getLogger(this).error("widget-intl:locale-error",this.declaredClass,h.reason)}await this.loadLocale()}),this.addHandles(wWe()),fWe();const r="esri-widget-uid-"+ZT(),n=this.render.bind(this);this._trackingTarget=new Sk(()=>{this.autoRenderingEnabled&&this.scheduleRender()});const s=()=>({vnodeSelector:"div",properties:{key:`${r}-hidden`,class:"",styles:{display:"none"}},domNode:null,children:void 0,text:void 0}),a=()=>{var m,g;if(!this._readyForTrueRender||this.destroyed)return null;const l=n()??s(),c=l.properties??(l.properties={});if(c.key??(c.key=r),ZR(l.vnodeSelector)){if(!this.visible)return s()}else this.visible?c.styles||(c.styles={}):(c.class="",c.styles={display:"none"}),(m=c.styles).display??(m.display="");let h=0;return(g=l.children)==null||g.forEach(v=>{var b;ZR(v.vnodeSelector)||(v.properties??(v.properties={}),(b=v.properties).key??(b.key=`${this.id}--${h++}`))}),k_e(this,l)};this.render=()=>{if(U6)return a();let l=tWe(this)??null;if(l)return l;this._trackingTarget.clear(),U6=!0;try{l=Fp(this._trackingTarget,a)}catch(c){throw Ie.getLogger(this).error(c),c}finally{U6=!1}return l&&iWe(this,l),l};const o=this.beforeFirstRender();o?this._resourcesFetch=o.then(()=>{this.destroyed||(this._readyForTrueRender=!0,this._postInitialize())}):(this._resourcesFetch=Promise.resolve().then(()=>{this.destroyed||this._postInitialize()}),this._readyForTrueRender=!0),this.addResolvingPromise(this._resourcesFetch),bWe(this._resourcesFetch)}normalizeCtorArgs(e,i){const r={...e};return i&&(r.container=i),r}postInitialize(){}beforeFirstRender(){var i;const e=this.loadDependencies();return(i=this._messageBundleProps)!=null&&i.length||e?Promise.all([e,this._loadLocale()]).then(()=>{}).catch(JB):null}loadDependencies(){return null}loadLocale(){return null}destroy(){this.destroyed||(Or(this._trackingTarget),Or(this.viewModel),this._detach(this.container),this._set("container",null),this.render=()=>null,this._projector=null,D6(this))}set container(e){this._get("container")||this._set("container",e)}castContainer(e){return HZ(e)}get destroyed(){return super.destroyed}get domNode(){return this.container}set domNode(e){this.container=e}get icon(){return null}set icon(e){this._overrideIfSome("icon",e)}get id(){var e;return this._get("id")||((e=this.container)==null?void 0:e.id)||Date.now().toString(16)+"-widget-"+_We++}set id(e){e&&this._set("id",e)}get label(){return this.declaredClass.split(".").pop()}set label(e){this._overrideIfSome("label",e)}get renderable(){return this._resourcesFetch}get visible(){return this._get("visible")}set visible(e){this._set("visible",e)}get[(lae=C_e,E_e)](){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(D6(this),this._projector.scheduleRender())}classes(...e){return $_e.apply(this,e)}renderNow(){D6(this),this._projector.renderNow()}_postInitialize(){var i;if(this.destroyed)return;this.scheduleRender(),(i=this._delegatedEventNames)!=null&&i.length&&this.addHandles(be(()=>this.viewModel,(r,n)=>{n&&this.removeHandles("delegated-events"),r&&pD(r)&&this.addHandles(this._delegatedEventNames.map(s=>MT(r,s,a=>{this.emit(s,a)})),"delegated-events")},Ka)),this.postInitialize();const e=async()=>{await this._loadLocale().catch(JB),this.scheduleRender()};this.addHandles([kZ(e),be(()=>this.uiStrings,e)]),this.addHandles(cn(()=>this.container,r=>{this.destroyed||this._attach(r)},{initial:!0,once:!0}))}_attach(e){e&&(this._projector.merge(e,this.render),this._attached=!0)}_detach(e){var i;this._attached&&(this._projector.detach(this.render),this._attached=!1),(i=e==null?void 0:e.parentNode)==null||i.removeChild(e)}},bw[lae]=!0,bw.vnodeSelector="div",bw);d([f()],ea.prototype,"_readyForTrueRender",void 0),d([f({value:null})],ea.prototype,"container",null),d([_i("container")],ea.prototype,"castContainer",null),d([f()],ea.prototype,"icon",null),d([f()],ea.prototype,"id",null),d([f()],ea.prototype,"label",null),d([f()],ea.prototype,"renderable",null),d([f()],ea.prototype,"uiStrings",void 0),d([f()],ea.prototype,"viewModel",void 0),d([f({value:!0})],ea.prototype,"visible",null),d([f()],ea.prototype,"key",void 0),d([f()],ea.prototype,"children",void 0),d([f()],ea.prototype,"afterCreate",void 0),d([f()],ea.prototype,"afterUpdate",void 0),d([f()],ea.prototype,"afterRemoved",void 0),ea=d([V("esri.widgets.Widget")],ea);const da=ea,$We=new Map;function SWe(t){return $We.get(t)}function cae(t,e){return t&&"copyright"in t&&(!e||typeof t.originOf=="function"&&t.originOf("copyright")==="user")}function TWe(t,e){return t.length!==e.length||t.some((i,r)=>i.text!==e[r].text)}function wO(t,e,i){!i||!e||t.find(r=>r.layerView===e&&r.text===i)||t.push({text:i,layerView:e})}function IWe(t){return t.type==="bing-maps"}const ch=[];let Cx=class extends et{constructor(e){super(e),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.removeHandles("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new Ue,this.view=null,this._allLayerViewsChange=i=>{var n;this.removeHandles("suspension"),this.removeHandles("visible-geometry-changed");const r=(n=this.view)==null?void 0:n.allLayerViews;r&&(this.addHandles(r.map(s=>be(()=>{var a;return[s.suspended,(a=s.layer)==null?void 0:a.attributionVisible]},()=>this._updateAttributionItems())).toArray(),"suspension"),r.forEach(s=>{s.declaredClass==="esri.views.3d.layers.IntegratedMesh3DTilesLayerView3D"&&this.addHandles(s.on("visible-geometry-changed",()=>this._updateAttributionItems()),"visible-geometry-changed")})),i!=null&&i.removed&&i.removed.forEach(s=>{this._pendingAttributions.delete(s),this._fetchedAttributionData.delete(s)}),this._updateAttributionItems()},this.addHandles([ca(()=>{var i;return(i=this.view)==null?void 0:i.allLayerViews},"change",i=>this._allLayerViewsChange(i),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),cn(()=>{var i;return((i=this.view)==null?void 0:i.stationary)===!0},()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){var e;return(e=this.view)!=null&&e.ready?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const e=this.view,i=e==null?void 0:e.allLayerViews;ch.length=0;let r=!1,n=null;if(!e||!i)return void this._clear();i.forEach(a=>{var c,h;if(a.suspended||!((c=a.layer)!=null&&c.attributionVisible))return;const o=a.layer;if(cae(o,"user"))return void wO(ch,a,o.copyright);if(o.type==="integrated-mesh-3dtiles"&&o.hasGoogleUrl&&(r=!0,n=a),o.hasAttributionData){if(this._fetchedAttributionData.has(a)){const m=this._fetchedAttributionData.get(a);return void(m?wO(ch,a,this._getDynamicAttribution(m,e,o)):cae(o)&&wO(ch,a,o.copyright))}return void this._fetchAttributionData(a)}const l="portalItem"in o?(h=o.portalItem)==null?void 0:h.accessInformation:void 0;wO(ch,a,l||o.copyright)});const s=i.find(a=>{var o;return((o=a.layer)==null?void 0:o.type)==="integrated-mesh-3dtiles"});if(this.view&&s){const a=SWe(this.view);if(a){const o=a.getAttributionText();for(let l=o.length-1;l>-1;--l)ch.unshift({text:o[l],layerView:s})}}r&&n&&ch.unshift({text:"Google Maps",layerView:n}),TWe(this.items,ch)&&(this.items.removeAll(),this.items.addMany(ch)),ch.length=0,this.notifyChange("state")}async _fetchAttributionData(e){if(this._pendingAttributions.has(e))return;this._pendingAttributions.add(e);const i=await BD(e.layer.fetchAttributionData());if(this._pendingAttributions.has(e)){const r=i.ok?this._createContributionIndex(i.value,IWe(e.layer)):null;this._pendingAttributions.delete(e),this._fetchedAttributionData.set(e,r)}this._updateAttributionItems()}_createContributionIndex(e,i){const r=e.contributors,n={};if(!r)return n;for(let s=0;s<r.length;s++){const a=r[s],o=a.coverageAreas;if(!o)return;for(const l of o){const c=l.bbox,h=l.zoomMin-(i&&l.zoomMin?1:0),m=l.zoomMax-(i&&l.zoomMax?1:0),g=new Yt({xmin:c[1],ymin:c[0],xmax:c[3],ymax:c[2],spatialReference:tt.WGS84}),v={extent:Dm(g),attribution:a.attribution||"",score:l.score!=null?l.score:100,id:s};for(let b=h;b<=m;b++)n[b]??(n[b]=[]),n[b].push(v)}}return n.maxKey=Math.max.apply(null,Object.keys(n)),n}_getDynamicAttribution(e,i,r){var h;const{extent:n,scale:s}=i;let a=((h=r.tileInfo)==null?void 0:h.scaleToZoom(s))??0;if(a=Math.min(e.maxKey??0,Math.round(a)),!n||a==null||a<=-1)return"";const o=e[a],l=xD(n.center.clone().normalize(),tt.WebMercator),c=new Set;return o?o.filter(m=>{const g=m.id,v=!c.has(g)&&l&&m.extent&&Pk(m.extent,l);return v&&c.add(g),v}).sort((m,g)=>g.score-m.score||m.objectId-g.objectId).map(m=>m.attribution).join(", "):""}};d([f({readOnly:!0,type:Ue})],Cx.prototype,"items",void 0),d([f({readOnly:!0})],Cx.prototype,"state",null),d([f()],Cx.prototype,"view",void 0),Cx=d([V("esri.widgets.Attribution.AttributionViewModel")],Cx);const O_e=Cx,Ht={button:"esri-button",buttonDisabled:"esri-button--disabled",buttonHalf:"esri-button--half",buttonSecondary:"esri-button--secondary",buttonSmall:"esri-button--small",buttonTertiary:"esri-button--tertiary",buttonThird:"esri-button--third",empty:"esri-widget__content--empty",heading:"esri-widget__heading",interactive:"esri-interactive",panel:"esri-widget--panel",table:"esri-widget__table",widget:"esri-widget",widgetButton:"esri-widget--button"};function MWe(){return function(t,e){if(!t[e])throw new TypeError(`Cannot auto bind undefined function '${String(e)}'`);return{value:EWe(t[e])}}}function CWe(t){const e=t==null?void 0:t.type;return t instanceof KeyboardEvent||e==="keyup"||e==="keydown"||e==="keypress"}function EWe(t){return function(e,...i){CWe(e)?rWe(e.key)&&(e.preventDefault(),e.stopPropagation(),e.target.click()):t.call(this,e,...i)}}function js(t){return(e,i)=>{e.hasOwnProperty("_messageBundleProps")||(e._messageBundleProps=e._messageBundleProps?e._messageBundleProps.slice():[]),e._messageBundleProps.push({bundlePath:t,propertyName:i})}}var kWe=function(t){return{vnodeSelector:"",properties:void 0,children:void 0,text:t.toString(),domNode:null}},L_e=function(t,e){for(var i=0,r=t.length;i<r;i++){var n=t[i];Array.isArray(n)?L_e(n,e):n!=null&&n!==!1&&(n.hasOwnProperty("vnodeSelector")||(n=kWe(n)),e.push(n))}},AWe=function(t,e){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];if(i.length===1&&typeof i[0]=="string")return{vnodeSelector:t,properties:e||void 0,children:void 0,text:i[0],domNode:null};var n=[];return L_e(i,n),{vnodeSelector:t,properties:e||void 0,children:n,text:void 0,domNode:null}};function ue(t,e,...i){return typeof t!="function"||ZR(t)?AWe(t,e??null,...i):t(e,...i)}function PWe(...t){return t}const A1="esri-attribution",P1={base:A1,poweredBy:`${A1}__powered-by`,sources:`${A1}__sources`,open:`${A1}--open`,sourcesOpen:`${A1}__sources--open`,link:`${A1}__link`};let To=class extends da{constructor(e,i){super(e,i),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._sourcesNode=null,this._overflowRequestAnimationFrame=null,this._resizeObserver=new ResizeObserver(r=>{r.forEach(({target:n})=>{this._scheduleOverflowCheck(n)})}),this._mutationObserver=new MutationObserver(r=>{let n=!1;for(const s of r)if(s.type==="childList"||s.type==="characterData"||s.type==="attributes"){n=!0;break}n&&this._sourcesNode&&this._scheduleOverflowCheck(this._sourcesNode)}),this.itemDelimiter=" | ",this.messages=null,this.viewModel=new O_e}initialize(){this.addHandles(ca(()=>{var e;return(e=this.viewModel)==null?void 0:e.items},"change",()=>this.scheduleRender()))}destroy(){var e,i;(e=this._resizeObserver)==null||e.disconnect(),(i=this._mutationObserver)==null||i.disconnect(),this._overflowRequestAnimationFrame!=null&&(cancelAnimationFrame(this._overflowRequestAnimationFrame),this._overflowRequestAnimationFrame=null)}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}_scheduleOverflowCheck(e){this._overflowRequestAnimationFrame==null&&(this._overflowRequestAnimationFrame=requestAnimationFrame(()=>{this._overflowRequestAnimationFrame=null,this._checkSourceTextOverflow(e)}))}get attributionText(){return this.viewModel.items.reduce((e,i)=>(e.includes(i.text)||e.push(i.text),e),[]).join(this.itemDelimiter)}get icon(){return"description"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const e={[P1.open]:this._isOpen};return ue("div",{bind:this,class:this.classes(P1.base,Ht.widget,e),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this._renderSourcesNode(),this._renderPoweredBy())}_renderPoweredBy(){return ue("div",{class:P1.poweredBy},"Powered by"," ",ue("a",{class:P1.link,href:"https://www.esri.com/",rel:"noreferrer",target:"_blank"},"Esri"))}_renderSourcesNode(){const e=this._isOpen,i=this._isInteractive,r=i?0:void 0,{attributionText:n}=this,s={[P1.sourcesOpen]:e,[Ht.interactive]:i};return ue("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(P1.sources,s),innerHTML:n,tabIndex:r})}_afterSourcesNodeCreate(e){this._prevSourceNodeHeight=e.clientWidth,this._sourcesNode=e,this._resizeObserver.observe(e),this._mutationObserver.observe(e,{subtree:!0,childList:!0,characterData:!0,attributes:!0}),this._scheduleOverflowCheck(e)}_checkSourceTextOverflow(e){let i=!1;const{clientHeight:r,clientWidth:n,scrollWidth:s}=e,a=s>n,o=this._attributionTextOverflowed!==a;if(this._attributionTextOverflowed=a,o&&(i=!0),this._isOpen){const l=r<this._prevSourceNodeHeight;this._prevSourceNodeHeight=r,l&&(this._isOpen=!1,i=!0)}i&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};d([f()],To.prototype,"_isOpen",void 0),d([f()],To.prototype,"_isInteractive",null),d([f()],To.prototype,"_attributionTextOverflowed",void 0),d([f()],To.prototype,"_prevSourceNodeHeight",void 0),d([f({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],To.prototype,"attributionText",null),d([f()],To.prototype,"icon",null),d([f()],To.prototype,"itemDelimiter",void 0),d([f()],To.prototype,"label",null),d([f(),js("esri/widgets/Attribution/t9n/Attribution")],To.prototype,"messages",void 0),d([f()],To.prototype,"view",null),d([f({type:O_e})],To.prototype,"viewModel",void 0),d([MWe()],To.prototype,"_toggleState",null),To=d([V("esri.widgets.Attribution")],To);const OWe=To;function LWe(){const t=ve("mapview-essential-goto-duration");return t==null?t:t}function FWe(t){var e,i;return((e=t==null?void 0:t.spatialReference)==null?void 0:e.isWebMercator)||((i=t==null?void 0:t.spatialReference)==null?void 0:i.isGeographic)||!1}function RWe(t,e,i){return t.goTo(e,i)}const F_e=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),this.goToOverride=null,this.view=null}callGoTo(r){const{view:n}=this;return Ik(n),this.goToOverride?this.goToOverride(n,r):RWe(n,r.target,r.options)}};return d([f()],i.prototype,"goToOverride",void 0),d([f()],i.prototype,"view",void 0),i=d([V("esri.widgets.support.GoTo")],i),i};let a0=class extends F_e(et){constructor(e){super(e),this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this._watchForView(Ft)}destroy(){this.view=null}get canShowNorth(){return FWe(this.view)}get state(){var e;return!((e=this.view)!=null&&e.ready)||this.view.type==="2d"&&!this.view.constraints.rotationEnabled?"disabled":this.canShowNorth?"compass":"rotation"}reset(){var e,i;(e=this.view)!=null&&e.ready&&(((i=this.view)==null?void 0:i.type)==="2d"?this.callGoTo({target:{rotation:0},options:{animationMode:"always",duration:LWe()}}):this.callGoTo({target:{heading:0}}))}_updateForRotation(e){e!=null&&this._set("orientation",{z:e})}_updateForCamera(e){if(!e)return;const i=-e.heading;this._set("orientation",{x:0,y:0,z:i})}_updateRotationWatcher(e){this.removeAllHandles(),this._watchForView(),e&&this.addHandles(e.type==="2d"?be(()=>e==null?void 0:e.rotation,this._updateForRotation,Ft):be(()=>e==null?void 0:e.camera,this._updateForCamera,Ft))}_watchForView(e){this.addHandles(be(()=>this.view,this._updateRotationWatcher,e))}};d([f({readOnly:!0})],a0.prototype,"canShowNorth",null),d([f({readOnly:!0})],a0.prototype,"orientation",void 0),d([f({readOnly:!0})],a0.prototype,"state",null),d([f()],a0.prototype,"view",void 0),a0=d([V("esri.widgets.Compass.CompassViewModel")],a0);const R_e=a0,uae="esri-compass",dae={base:uae,iconContainer:`${uae}__icon-container`};let Wf=class extends da{constructor(e,i){super(e,i),this.messages=null,this.viewModel=new R_e,this._reset=()=>{this.viewModel.reset()},this._toRotationTransform=r=>({transform:`rotateZ(${r.z}deg)`})}loadDependencies(){return Iu({button:()=>de(()=>Promise.resolve().then(()=>K5),void 0),icon:()=>de(()=>Promise.resolve().then(()=>TT),void 0)})}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get icon(){return this.viewModel.state==="rotation"?"arrow-up":"compass-needle"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}reset(){return this.viewModel.reset()}render(){const{orientation:e,state:i}=this.viewModel,{messages:r}=this;return ue("div",{class:this.classes(dae.base,Ht.widget)},ue("calcite-button",{class:Ht.widgetButton,disabled:i==="disabled",kind:"neutral",label:r.reset,onclick:this._reset,round:!0,scale:"s",title:r.reset},ue("div",{"aria-hidden":"true",class:dae.iconContainer,title:r.reset},ue("calcite-icon",{icon:this.icon,styles:this._toRotationTransform(e)}))))}};d([f()],Wf.prototype,"goToOverride",null),d([f()],Wf.prototype,"icon",null),d([f()],Wf.prototype,"label",null),d([f(),js("esri/widgets/Compass/t9n/Compass")],Wf.prototype,"messages",void 0),d([f()],Wf.prototype,"view",null),d([f({type:R_e})],Wf.prototype,"viewModel",void 0),Wf=d([V("esri.widgets.Compass")],Wf);const zWe=Wf,hae="esri-navigation-toggle",pae={base:hae,isLayoutHorizontal:`${hae}--horizontal`};let Ex=class extends et{constructor(e){super(e),this._navigationMode="pan",this.view=null,e!=null&&e.isDefaultViewModel||oOe(Ie.getLogger(this),"Navigation Toggle","arcgis-navigation-toggle",{version:"4.33"})}normalizeCtorArgs(e={}){const{isDefaultViewModel:i,...r}=e;return r}initialize(){this.addHandles(cn(()=>{var e,i;return(i=(e=this.view)==null?void 0:e.navigation)==null?void 0:i.actionMap},()=>this._updateNavigationActionMap()))}destroy(){this.view=null}get state(){var e,i;return(e=this.view)!=null&&e.ready&&((i=this.view)==null?void 0:i.type)==="3d"?"ready":"disabled"}get navigationMode(){return this._navigationMode}set navigationMode(e){this._navigationMode=e,this._updateNavigationActionMap()}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate")}_updateNavigationActionMap(){var r,n;const e=(n=(r=this.view)==null?void 0:r.navigation)==null?void 0:n.actionMap;if(!e)return;const i=this._navigationMode==="pan";e.dragPrimary=i?"pan":"rotate",e.dragSecondary=i?"rotate":"pan"}};d([f({readOnly:!0})],Ex.prototype,"state",null),d([f()],Ex.prototype,"_navigationMode",void 0),d([f()],Ex.prototype,"view",void 0),Ex=d([V("esri.widgets.NavigationToggle.NavigationToggleViewModel")],Ex);const z_e=Ex;let Zf=class extends da{constructor(e,i){super(e,i),this.messages=null,this.viewModel=new z_e({isDefaultViewModel:!0}),this.toggle=()=>this.viewModel.toggle(),this._panButton=null,this._rotateButton=null,this._toggle=()=>{var n;const r=((n=this.viewModel)==null?void 0:n.navigationMode)==="pan"?this._rotateButton:this._panButton;S_e(r),this.toggle()},e!=null&&e.isDefaultUI||aOe(Ie.getLogger(this),"Navigation Toggle","arcgis-navigation-toggle",{version:"4.32"})}normalizeCtorArgs(e={}){const{isDefaultUI:i,...r}=e;return r}loadDependencies(){return Iu({button:()=>de(()=>Promise.resolve().then(()=>K5),void 0)})}get icon(){return"move"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){var n,s;const e=((n=this.viewModel)==null?void 0:n.state)==="disabled",i=((s=this.viewModel)==null?void 0:s.navigationMode)==="pan",r=this.messages.toggle;return ue("div",{class:this.classes(pae.base,Ht.widget,{[pae.isLayoutHorizontal]:this.layout==="horizontal"})},ue("calcite-button",{afterCreate:a=>{this._panButton=a},appearance:i?"outline-fill":"solid",class:Ht.widgetButton,disabled:e,iconStart:"move",kind:"neutral",label:r,onclick:this._toggle,tabIndex:i?void 0:-1,title:r}),ue("calcite-button",{afterCreate:a=>{this._rotateButton=a},appearance:i?"solid":"outline-fill",class:Ht.widgetButton,disabled:e,iconStart:"rotate",kind:"neutral",label:r,onclick:this._toggle,tabIndex:i?-1:void 0,title:r}))}};d([f()],Zf.prototype,"icon",null),d([f()],Zf.prototype,"label",null),d([f({value:"vertical"})],Zf.prototype,"layout",null),d([f(),js("esri/widgets/NavigationToggle/t9n/NavigationToggle")],Zf.prototype,"messages",void 0),d([f()],Zf.prototype,"view",null),d([f({type:z_e})],Zf.prototype,"viewModel",void 0),Zf=d([V("esri.widgets.NavigationToggle")],Zf);const NWe=Zf;let o0=class extends et{get canZoomIn(){var r,n,s;if(!((r=this.view)==null?void 0:r.ready))return!1;const i=(s=(n=this.view)==null?void 0:n.constraints)==null?void 0:s.effectiveMaxScale;return i===0||this._scale>i}get canZoomOut(){var n;const{view:e}=this;if(!(e==null?void 0:e.ready))return!1;const r=(n=e.constraints)==null?void 0:n.effectiveMinScale;return r===0||this._scale<r}get _scale(){var i,r,n;const e=(r=(i=this.view)==null?void 0:i.animation)==null?void 0:r.target;return(e&&"then"in e||e==null?void 0:e.scale)??((n=this.view)==null?void 0:n.scale)??0}};d([f({readOnly:!0})],o0.prototype,"canZoomIn",null),d([f({readOnly:!0})],o0.prototype,"canZoomOut",null),d([f()],o0.prototype,"view",void 0),d([f()],o0.prototype,"_scale",null),o0=d([V("esri.widgets.Zoom.ZoomConditions2D")],o0);const DWe=o0;let kx=class extends et{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};d([f({readOnly:!0})],kx.prototype,"canZoomIn",null),d([f({readOnly:!0})],kx.prototype,"canZoomOut",null),d([f()],kx.prototype,"view",void 0),kx=d([V("esri.widgets.Zoom.ZoomConditions3D")],kx);const jWe=kx;let xy=class extends et{constructor(e){super(e)}destroy(){this.view=null}get canZoomIn(){return this._zoomConditions!=null&&this._zoomConditions.canZoomIn}get canZoomOut(){var e;return this._zoomConditions!=null&&((e=this._zoomConditions)==null?void 0:e.canZoomOut)}get state(){var e;return(e=this.view)!=null&&e.ready?"ready":"disabled"}set view(e){e?e.type==="2d"?this._zoomConditions=new DWe({view:e}):e.type==="3d"&&(this._zoomConditions=new jWe({view:e})):this._zoomConditions=null,this._set("view",e)}zoomIn(){const e=this.view;this.canZoomIn&&e&&(e.type==="2d"?e.mapViewNavigation.zoomIn():la(e.goTo({zoomFactor:2})))}zoomOut(){const e=this.view;this.canZoomOut&&e&&(e.type==="2d"?e.mapViewNavigation.zoomOut():la(e.goTo({zoomFactor:.5})))}};d([f()],xy.prototype,"_zoomConditions",void 0),d([f()],xy.prototype,"canZoomIn",null),d([f()],xy.prototype,"canZoomOut",null),d([f({readOnly:!0})],xy.prototype,"state",null),d([f()],xy.prototype,"view",null),xy=d([V("esri.widgets.Zoom.ZoomViewModel")],xy);const N_e=xy,fae={base:"esri-zoom",horizontalLayout:"esri-zoom--horizontal"};let Yf=class extends da{constructor(e,i){super(e,i),this.messages=null,this.viewModel=new N_e,this.zoomIn=()=>this.viewModel.zoomIn(),this.zoomOut=()=>this.viewModel.zoomOut()}loadDependencies(){return Iu({button:()=>de(()=>Promise.resolve().then(()=>K5),void 0)})}get icon(){return"magnifying-glass-plus"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}set view(e){this.viewModel.view=e}get view(){return this.viewModel.view}render(){const e={[fae.horizontalLayout]:this.layout==="horizontal"},{canZoomIn:i,canZoomOut:r}=this.viewModel,{zoomIn:n,zoomOut:s}=this.messages;return ue("div",{class:this.classes(fae.base,Ht.widget,e)},ue("calcite-button",{class:Ht.widgetButton,disabled:!i,iconStart:"plus",kind:"neutral",label:n,onclick:this.zoomIn,title:n}),ue("calcite-button",{class:Ht.widgetButton,disabled:!r,iconStart:"minus",kind:"neutral",label:s,onclick:this.zoomOut,title:s}))}};d([f()],Yf.prototype,"icon",null),d([f()],Yf.prototype,"label",null),d([f({value:"vertical"})],Yf.prototype,"layout",null),d([f(),js("esri/widgets/Zoom/t9n/Zoom")],Yf.prototype,"messages",void 0),d([f()],Yf.prototype,"view",null),d([f({type:N_e})],Yf.prototype,"viewModel",void 0),Yf=d([V("esri.widgets.Zoom")],Yf);const VWe=Yf;function UWe(t){return(t==null?void 0:t.view)!==void 0}let FL=class extends aWe{constructor(e){super(e),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[],this._updateViewAwareWidgets=i=>{this.components.forEach(r=>{const n=this._find(r),s=n==null?void 0:n.widget;UWe(s)&&(s.view=i)})},this._componentsWatcher=(i,r)=>{this._removeComponents(r),this._addComponents(i),this._adjustPadding(i)}}initialize(){this.addHandles([be(()=>this.components,this._componentsWatcher,Ft),be(()=>this.view,this._updateViewAwareWidgets,Ft)])}_add(e,i,r,n,s){let a=e;if(typeof e=="string"&&this._defaultPositionLookup[e]){if(this._find(e))return;a=this._createComponent(e)}super._add(a,i,r,n,s)}_removeComponents(e){e.forEach(i=>{const r=this._find(i);r&&(this.remove(r),r.destroy())})}_adjustPadding(e){if(!e.includes("attribution")&&!this._isOverridden("padding")){const{top:i}=this.padding;this.padding=i}}_addComponents(e){this.constructed&&e.forEach(i=>this.add(this._createComponent(i),this._defaultPositionLookup[i]))}_createComponent(e){const i=this._createWidget(e);return new LL({id:e,node:i})}_createWidget(e){const i=this.view;switch(e){case"attribution":return new OWe({view:i});case"compass":return new zWe({view:i});case"navigation-toggle":return new NWe({view:i,isDefaultUI:!0});case"zoom":return new VWe({view:i})}}};d([f()],FL.prototype,"components",void 0),FL=d([V("esri.views.ui.DefaultUI")],FL);const D_e=FL;let RL=class extends D_e{constructor(e){super(e),this.components=["attribution","zoom"]}};d([f()],RL.prototype,"components",void 0),RL=d([V("esri.views.ui.2d.DefaultUI2D")],RL);const j_e=RL;let BWe=class{constructor(e={},i={},r=8,n=1/0){this.disabledExtensions=e,this.debugWebGLExtensions=i,this.maxAnisotropy=r,this.maxPreferredTexturePixels=n}},V_e=class d7{constructor(e,i,r=""){this.major=e,this.minor=i,this._context=r}lessThan(e,i){return this.major<e||e===this.major&&this.minor<i}greaterEqual(e,i){return!this.lessThan(e,i)}validate(e){if(this.major!==e.major){const i=this._context&&this._context+":",r=this._context&&this._context+" ";throw new ae(i+"unsupported-version",`Required major ${r}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:e})}}clone(){return new d7(this.major,this.minor,this._context)}static parse(e,i=""){const[r,n]=e.split("."),s=/^\s*\d+\s*$/;if(!(r!=null&&r.match)||!s.test(r))throw new ae((i&&i+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:e});if(!(n!=null&&n.match)||!s.test(n))throw new ae((i&&i+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:e});const a=parseInt(r,10),o=parseInt(n,10);return new d7(a,o,i)}},Y$=class extends V_e{constructor(e,i){super(e,i,"webmap")}};function B6(t){return t!=null&&typeof t=="object"&&"declaredClass"in t&&t.declaredClass==="esri.WebMap"}const U_e=new Y$(2,35);var h7;let zL=h7=class extends $e{constructor(t){super(t),this.color=new Se([0,0,0,1])}clone(){return new h7(he({color:this.color}))}};d([f({type:Se,json:{write:!0}})],zL.prototype,"color",void 0),zL=h7=d([V("esri.webmap.background.ColorBackground")],zL);const h5=zL;let B_e,q_e,H_e,G_e,W_e,Z_e,Y_e;async function qWe(){const[,{GraphicsView2D:t,GraphicContainer:e,LabelManager:i,MapViewNavigation:r,MagnifierView2D:n,GridView2D:s,Stage:a}]=await Promise.all([de(()=>import("./webglDeps-B9UV4QWC.js"),__vite__mapDeps([157,126,158,159,160,32])),de(()=>import("./mapViewDeps-BNWjabwT.js"),__vite__mapDeps([161,162,163,126,158,159,117,58,164,60,160,32,125,31,165,57,79,166,106,109,11,65,167,62,63,157,168,74,169,170,105,171,115,116,56,59,15,14,172,64,173,61,174,66,71,175,54,176,177,178,179,122,180,181]))]);q_e=t,H_e=e,G_e=i,W_e=r,Z_e=n,Y_e=s,B_e=a}var OS;let wi=(OS=class extends N7e(gqe(R5e(f4e(Gje(B8e))))){get timeZone(){return super.timeZone}set timeZone(e){super.timeZone=e}constructor(e){super(e),this._magnifierView=null,this._gridView=null,this.stage=null,this._resolveWhenReady=[],this.rootLayerViews=new Id({getCollections:()=>{var i,r;return[(i=this.basemapView)==null?void 0:i.baseLayerViews,this.layerViews,(r=this.basemapView)==null?void 0:r.referenceLayerViews]},getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.graphicsView=null,this.labelManager=null,this.navigation=new a5({actionMap:new TY({dragTertiary:"none"})}),this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.supersampleScreenshotsEnabled=!0,this.analyses=new sT,this.analysisViewManager=new jGe({importAnalysisViewModule:i=>MHe(i),view:this}),this.floors=new Ue,this.grid=null,this.map=null,this.timeline=new b_e,this.type="2d",this.view2dType=null,this.ui=new j_e,this.animationsEnabled=!0,this.test={takeScreenshot:async i=>FGe(this._getScreenshotView(i),i)},this.padding={top:0,right:0,bottom:0,left:0},WDe()}destroy(){this.layerViewManager.clear(),this._set("preconditionsReady",!1),this.frameTask=Or(this.frameTask),this.goToManager.destroy(),this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new zHe(this.featuresTilingScheme)}get constraintsInfo(){var r,n;const e=(r=this.defaultsFromMap)==null?void 0:r.tileInfo,i=this.spatialReference;return{lods:(n=e==null?void 0:e.spatialReference)!=null&&n.equals(i)?e.lods:null,spatialReference:i}}get initialExtentRequired(){var o;if(!this.stateManager)return!1;const{scale:e,constraints:i,center:r,viewpoint:n,extent:s}=this;let a=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&((o=this.map.initialViewProperties)!=null&&o.viewpoint))&&!s&&(i!=null&&i.effectiveLODs||(a=-1),(!r||e===0&&a===-1)&&((n==null?void 0:n.targetGeometry)==null||n.targetGeometry.type!=="extent"&&!n.scale))}get defaultsFromMapSettings(){return{required:{extent:!1,heightModelInfo:!1,tileInfo:!0},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get scheduler(){return this.frameTask.scheduler}get typeSpecificPreconditionsReady(){const e=this._getDefaultViewpoint();if(!e)return!1;const i=e.targetGeometry,r=this.spatialReference;return Gye(i.spatialReference,r)}get background(){return B6(this.map)?this.map.initialViewProperties.background:null}set background(e){this._override("background",e)}get center(){var e;return((e=this.stateManager)==null?void 0:e.center)??null}set center(e){this.stateManager.center=e}get constraints(){return super.constraints}set constraints(e){super.constraints=e}get highlightOptions(){return vGe(this)}set highlightOptions(e){bGe(this,e)}get padding(){var e;return(e=this.stateManager)==null?void 0:e.padding}set padding(e){this.stateManager&&(this.stateManager.padding=e)}get rendering(){var e;return((e=this.stage)==null?void 0:e.renderRequested)??!1}get resizeAlign(){return super.resizeAlign}set resizeAlign(e){super.resizeAlign=e}get resolution(){return this.stateManager.resolution??0}get rotation(){return super.rotation}set rotation(e){super.rotation=e}get scale(){var e;return((e=this.stateManager)==null?void 0:e.scale)??0}set scale(e){this.stateManager&&(this.stateManager.scale=e)}get spatialReference(){return super.spatialReference}set spatialReference(e){super.spatialReference=e}get spatialReferenceLocked(){return this._get("spatialReferenceLocked")}set spatialReferenceLocked(e){this.stage&&Ie.getLogger(this).warn("spatialReferenceLocked cannot be changed after the view has become ready"),this._set("spatialReferenceLocked",e)}get tileInfo(){var e;return(e=this.featuresTilingScheme)==null?void 0:e.tileInfo}get updating(){var r,n,s,a;const e=!(!this.magnifier.visible||this.magnifier.position===null||!((r=this._magnifierView)!=null&&r.updatingHandles.updating)),i=!this.destroyed&&(!this.analysisViewManager||!this.layerViewManager||!this.labelManager||!this.graphicsView||this.analysisViewManager.updating===!0||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some(o=>!o.destroyed&&!("layerViews"in o)&&o.updating===!0)||e);if(ve("esri-2d-log-updating")){const o=this.allLayerViews.reduce((l,c)=>({...l,[`${c.layer.id}(${c.layer.type})`]:!c.destroyed&&!("layerViews"in c)&&c.updating}),{});console.log(`Updating MapView: ${i}
-> Null LayerViewManager: ${!this.layerViewManager}
-> Null LabelManager: ${!this.labelManager}
-> Null GraphicsView: ${!this.graphicsView}
-> layerViewManager.updating: ${(n=this.layerViewManager)==null?void 0:n.updating}
-> labelManager.updating: ${(s=this.labelManager)==null?void 0:s.updating}
-> graphicsView.updating: ${(a=this.graphicsView)==null?void 0:a.updating}
-> allLayerViews: ${JSON.stringify(o)}
-> updatingMagnifier: ${e}
`)}return i}get viewpoint(){return super.viewpoint}set viewpoint(e){super.viewpoint=e}get visibleArea(){const e=this.stateManager.visibleArea;return e&&new Nr({rings:[e.map(i=>[i[0],i[1]])],spatialReference:this.spatialReference})}get zoom(){return this.stateManager.zoom??-1}set zoom(e){this.stateManager.zoom=e}get navigating(){var e;return((e=this.mapViewNavigation)==null?void 0:e.interacting)??!1}async hitTest(e,i){return wGe(this,e,i)}async takeScreenshot(e){return LGe(this._getScreenshotView(e),e)}toScreen(e,i){return this.stateManager.toScreen(e,i)}async whenAnalysisView(e){if(e.parent==null)throw new ae("view:no-analysisview-for-analysis","The analysis does not exist in view.analyses",{analysis:e});return this.analysisViewManager.whenAnalysisView(e)}whenLayerView(e){return super.whenLayerView(e)}graphicChanged(e){this.graphicsView&&this.graphicsView.graphicUpdateHandler(e)}whenReady(){return new Promise(e=>{this.ready?e(this):this._resolveWhenReady.push(e)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){var e;return this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties.spatialReference||((e=this.defaultsFromMap)==null?void 0:e.spatialReference)||null}getDefaultTimeZone(){return B6(this.map)?this.map.initialViewProperties.timeZone:null}getDefaultTimeExtent(){return B6(this.map)?this.map.initialViewProperties.timeExtent:null}getSurface(){return this.surface}hasLayerViewModule(e){return jse.hasLayerViewModule(e)}importLayerView(e){return jse.importLayerView(e)}pixelSizeAt(){return this.ready?this.resolution:(Ie.getLogger(this).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}async popupHitTest(e){var c;const i=this.toMap(e),r=await this.hitTest(e),n=this.allLayerViews.toArray().filter(h=>h.clips.every(m=>l_e(this,m,e,i))).reverse(),s=new globalThis.Map(n.map(h=>[h.layer.uid,h])),a=[];let o=0,l=0;for(;o<r.results.length||l<n.length;){const h=r.results.at(o);if(h&&h.type!=="graphic"){++o;continue}const m=s.get((c=(h==null?void 0:h.layer)??(h==null?void 0:h.graphic.layer))==null?void 0:c.uid);if((!h||m)&&l<n.length&&n.at(l)!==m){const g=n.at(l);"fetchPopupFeaturesAtLocation"in g&&a.push({mapPoint:i,layerView:g}),++l}else h&&(a.push({graphic:h.graphic,layerView:m}),++o)}return{hits:a,location:i}}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}async validate(){let e=WGe(this.type);if(ve("safari")&&ve("safari")<9&&(e=new ae("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:ve("safari")})),e!=null)throw Ie.getLogger(this).warn("#validate()",e.message),e}loadAsyncDependencies(){return qWe()}_getDefaultViewpoint(){var $;const{constraints:e,initialExtent:i,map:r,padding:n,size:s}=this;if(!e)return null;const a=r&&"initialViewProperties"in r?r.initialViewProperties:void 0,o=this.stateManager.getUserStartupOptions(this.size),l=a==null?void 0:a.viewpoint,c=(($=l==null?void 0:l.targetGeometry)==null?void 0:$.extent)??i,h=c==null?void 0:c.center,m=(l==null?void 0:l.rotation)??0,g=(l==null?void 0:l.scale)||c&&l5(c,[s[0]-n.left-n.right,s[1]-n.top-n.bottom]),v=o.center??h,b=o.rotation??m,x=o.scale??g;return v&&x?new Ds({targetGeometry:v,scale:x,rotation:b}):null}_startup(){var l;this.timeline.begin("MapView Startup");const e=this._getDefaultViewpoint();this.stateManager.startup(e,this.size,this.spatialReference,(l=this.defaultsFromMap.extent)==null?void 0:l.center),this.graphics.owner=this;const i=new CHe(this.surface),r=new B_e(this.surface,{canvas:this.renderCanvas,contextOptions:new BWe(this.deactivatedWebGLExtensions,this.debugWebGLExtensions),renderingOptions:this.renderingOptions,timeline:this.timeline},i);this.stage=r,this._magnifierView=new Z_e,this._magnifierView.magnifier=this.magnifier,this._gridView=new Y_e;const n=new G_e({view:this});this._set("labelManager",n);const s=new gHe({view:this});this._set("animationManager",s);const a=new W_e({view:this,animationManager:s});this._set("mapViewNavigation",a),this._setupSpatialReferenceDependentProperties(),this.addHandles([this.rootLayerViews.on("change",()=>this._updateStageChildren()),r.on("webgl-error",c=>this.fatalError=c.error),be(()=>this.stationary,c=>r.stationary=c,Ka),be(()=>this.background,c=>{r.backgroundColor=c==null?void 0:c.color,this._magnifierView.backgroundColor=c==null?void 0:c.color},Ka),be(()=>this.magnifier,c=>this._magnifierView.magnifier=c,Ka),be(()=>this.grid,c=>this._gridView.grid=c,Ka),be(()=>this.renderingOptions,c=>r.renderingOptions=c,Ka),be(()=>this.highlights.items.map(c=>({name:c.name,options:{fillColor:c.color,haloColor:c.haloColor,fillOpacity:c.fillOpacity,haloOpacity:c.haloOpacity,haloWidth:c.haloWidth,haloBlur:c.haloBlur}})),()=>{r.highlightGradient=gGe(r.highlightGradient,this.highlights.items)},Ka),be(()=>this.state.id,()=>r.state=this.state,Ka),be(()=>this.animationsEnabled,c=>{this.stage.animationsEnabled=c},Ka)],"map-view"),this._updateStageChildren();const o=this._resolveWhenReady;this._resolveWhenReady=[],o.forEach(c=>c(this)),this.timeline.end("MapView Startup"),this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.removeHandles("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animation=null,this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._gridView.destroy(),this.stage.destroy(),this.stage=null,this._set("graphicsView",null),this._magnifierView=null,this._gridView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask.stop(),this.stationaryManager.clear(),this._set("ready",!1),this.stateManager.teardown()}_updateStageChildren(){this.stage.removeAllChildren(),this.rootLayerViews.forEach(i=>{this.stage.addChild(i.container)});const e=this.graphicsView;this.stage.addChild(e.container),this.stage.addChild(this._magnifierView),this.stage.addChild(this._gridView)}_setupSpatialReferenceDependentProperties(){const e=new xHe(So.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",e);const i=new q_e({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new H_e(e)});this._set("graphicsView",i)}_destroySpatialReferenceDependentProperties(){const e=this.graphicsView;this._set("graphicsView",null),e.destroy(),this._set("featuresTilingScheme",null)}_getScreenshotView(e){var a;const{allLayerViews:i,padding:r,size:n,stage:s}=this;return{allLayerViews:i,backgroundColor:e!=null&&e.ignoreBackground?null:(a=this.background)==null?void 0:a.color,padding:r,size:n,stage:s}}_spatialReferenceChanged(e){if(this.ready){this.frameTask.stop();for(const i of this.allLayerViews)i.processDetach();this._destroySpatialReferenceDependentProperties(),this.stateManager.changeSpatialReference(e),this.stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const i of this.allLayerViews)i.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}}},OS.type="2d",OS);d([f({constructOnly:!0})],wi.prototype,"deactivatedWebGLExtensions",void 0),d([f({constructOnly:!0})],wi.prototype,"debugWebGLExtensions",void 0),d([f({readOnly:!0})],wi.prototype,"featuresTilingScheme",void 0),d([f({readOnly:!0})],wi.prototype,"graphicsTileStore",null),d([f()],wi.prototype,"graphicsView",void 0),d([f()],wi.prototype,"constraintsInfo",null),d([f()],wi.prototype,"initialExtentRequired",null),d([f()],wi.prototype,"labelManager",void 0),d([f({type:a5,nonNullable:!0})],wi.prototype,"navigation",void 0),d([f({constructOnly:!0})],wi.prototype,"renderCanvas",void 0),d([f()],wi.prototype,"renderingOptions",void 0),d([f({constructOnly:!0})],wi.prototype,"supersampleScreenshotsEnabled",void 0),d([f()],wi.prototype,"defaultsFromMapSettings",null),d([f({readOnly:!0})],wi.prototype,"typeSpecificPreconditionsReady",null),d([f(W8(sT,"analyses"))],wi.prototype,"analyses",void 0),d([f()],wi.prototype,"analysisViewManager",void 0),d([f({type:h5})],wi.prototype,"background",null),d([f()],wi.prototype,"center",null),d([f({type:Ue})],wi.prototype,"floors",void 0),d([f()],wi.prototype,"grid",void 0),d([f({type:wv})],wi.prototype,"highlightOptions",null),d([f()],wi.prototype,"map",void 0),d([f()],wi.prototype,"padding",null),d([f({readOnly:!0})],wi.prototype,"rendering",null),d([f({readOnly:!0})],wi.prototype,"resolution",null),d([f()],wi.prototype,"scale",null),d([f({type:Boolean,value:!1})],wi.prototype,"spatialReferenceLocked",null),d([f({readOnly:!0})],wi.prototype,"tileInfo",null),d([f({type:b_e,readOnly:!0})],wi.prototype,"timeline",void 0),d([f({readOnly:!0})],wi.prototype,"type",void 0),d([f({readOnly:!0})],wi.prototype,"updating",null),d([f({readOnly:!0})],wi.prototype,"view2dType",void 0),d([f({readOnly:!0})],wi.prototype,"visibleArea",null),d([f()],wi.prototype,"zoom",null),d([f({readOnly:!0})],wi.prototype,"navigating",null),d([f(),_i(t=>t instanceof D_e?t:AT(j_e,t))],wi.prototype,"ui",void 0),d([f()],wi.prototype,"animationsEnabled",void 0),wi=d([V("esri.views.View2D")],wi);const HWe=wi;let NL=class extends HWe{constructor(e){super(e),this.view2dType="map"}};d([f({readOnly:!0})],NL.prototype,"view2dType",void 0),NL=d([V("esri.views.MapView")],NL);const GWe=NL;let WWe=class J_e{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(c8),this._values=new Map,this.multipleOriginsSupported=!0}clone(e){const i=new J_e,r=this._originStores[0];r&&r.forEach((n,s)=>{i.set(s,he(n),0)});for(let n=2;n<c8;n++){const s=this._originStores[n];s&&s.forEach((a,o)=>{e&&e.has(o)||i.set(o,he(a),n)})}return i}get(e,i){const r=i===void 0?this._values:this._originStores[i];return r?r.get(e):void 0}keys(e){const i=e==null?this._values:this._originStores[e];return i?[...i.keys()]:[]}set(e,i,r=7){let n=this._originStores[r];if(n||(n=new Map,this._originStores[r]=n),n.set(e,i),!this._values.has(e)||this._propertyOriginMap.get(e)<=r){const s=this._values.get(e);return this._values.set(e,i),this._propertyOriginMap.set(e,r),s!==i}return!1}delete(e,i=7){const r=this._originStores[i];if(!r)return;const n=r.get(e);if(r.delete(e),this._values.has(e)&&this._propertyOriginMap.get(e)===i){this._values.delete(e);for(let s=i-1;s>=0;s--){const a=this._originStores[s];if(a&&a.has(e)){this._values.set(e,a.get(e)),this._propertyOriginMap.set(e,s);break}}}return n}has(e,i){const r=i===void 0?this._values:this._originStores[i];return!!r&&r.has(e)}revert(e,i){for(;i>0&&!this.has(e,i);)--i;const r=this._originStores[i],n=r==null?void 0:r.get(e),s=this._values.get(e);return this._values.set(e,n),this._propertyOriginMap.set(e,i),s!==n}originOf(e){return this._propertyOriginMap.get(e)||0}isAtOrigin(e,i){return this.has(e,i)&&this.originOf(e)===i}isBelowOrigin(e,i){return!this.has(e)||this.originOf(e)<i}forEach(e){this._values.forEach(e)}};const X_e=t=>{const e=t;let i=class extends e{constructor(...r){super(...r);const n=Go(this),s=n.store,a=new WWe;n.store=a,lfe(n,s,a)}read(r,n){ufe(this,r,n)}getAtOrigin(r,n){const s=q6(this),a=Om(n);if(typeof r=="string")return s.get(r,a);const o={};return r.forEach(l=>{o[l]=s.get(l,a)}),o}originOf(r){return dE(this.originIdOf(r))}originIdOf(r){return q6(this).originOf(r)}revert(r,n){const s=q6(this),a=Om(n),o=Go(this);let l;l=typeof r=="string"?r==="*"?s.keys(a):[r]:r,l.forEach(c=>{o.invalidate(c),s.revert(c,a),o.commit(c)})}};return i=d([V("esri.core.ReadOnlyMultiOriginJSONSupport")],i),i};function q6(t){return Go(t).store}X_e(et);const ZWe=t=>{const e=t;let i=class extends e{constructor(...r){super(...r)}clear(r,n="user"){Go(this).clearOrigin(r,Om(n))}write(r,n){return pfe(this,r=r||{},n),r}setAtOrigin(r,n,s){Go(this).setAtOrigin(r,n,Om(s))}removeOrigin(r){const n=mae(this),s=Om(r),a=n.keys(s);for(const o of a)n.originOf(o)===s&&n.set(o,n.get(o,s),7)}updateOrigin(r,n){const s=mae(this),a=Om(n),o=mu(this,r);for(let l=a+1;l<c8;++l)s.delete(r,l);s.set(r,o,a)}toJSON(r){return this.write({},r)}};return i=d([V("esri.core.MultiOriginJSONSupport.WriteableMultiOriginJSONSupport")],i),i.prototype.toJSON.isDefaultToJSON=!0,i};function mae(t){return Go(t).store}const p5=t=>{const e=ZWe(X_e(t));let i=class extends e{};return i=d([V("esri.core.MultiOriginJSONSupport")],i),i},YWe=p5(et);async function JWe(t){const e=t.spatialReference;if(e.isWGS84)return t.clone();if(e.isWebMercator)return m$(t);const i=tt.WGS84;return await DD(e,i),sg(t,i)}function XWe(t,e){if(!jY(t,e)){const i=t.typeKeywords;i?i.push(e):t.typeKeywords=[e]}}function jY(t,e){var i;return!!((i=t.typeKeywords)!=null&&i.includes(e))}function PCt(t){return jY(t,VY.HOSTED_SERVICE)}function QWe(t,e){const i=t.typeKeywords;if(i){const r=i.indexOf(e);r>-1&&i.splice(r,1)}}function OCt(t,e,i){i?XWe(t,e):QWe(t,e)}async function LCt(t){const e=t.clone().normalize();let i;if(e.length>1)for(const r of e)i?r.width>i.width&&(i=r):i=r;else i=e[0];return JWe(i)}const VY={CHARTS:"Charts",DYNAMIC:"Dynamic",DEVELOPER_BASEMAP:"DeveloperBasemap",GROUP_LAYER_MAP:"Map",HOSTED_SERVICE:"Hosted Service",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",ORIENTED_IMAGERY_LAYER:"OrientedImageryLayer",SINGLE_LAYER:"Singlelayer",SUBTYPE_GROUP_LAYER:"SubtypeGroupLayer",SUBTYPE_GROUP_TABLE:"SubtypeGroupTable",TABLE:"Table",TILED_IMAGERY:"Tiled Imagery"};function KWe(t){var l;const{portal:e,isOrgItem:i,itemControl:r}=t,n=(l=e.user)==null?void 0:l.privileges;let s=!n||n.includes("features:user:edit"),a=!!i&&!!(n!=null&&n.includes("features:user:fullEdit"));const o=r==="update"||r==="admin";return o?a=s=!0:a&&(s=!0),{features:{edit:s,fullEdit:a},content:{updateItem:o}}}let $y=class extends $e{constructor(e){super(e),this.facilityIdField=null,this.layerId=null,this.nameField=null,this.siteIdField=null,this.sublayerId=null}};d([f({type:String,json:{write:{isRequired:!0}}})],$y.prototype,"facilityIdField",void 0),d([f({type:String,json:{write:{isRequired:!0}}})],$y.prototype,"layerId",void 0),d([f({type:String,json:{write:{isRequired:!0}}})],$y.prototype,"nameField",void 0),d([f({type:String,json:{write:!0}})],$y.prototype,"siteIdField",void 0),d([f({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],$y.prototype,"sublayerId",void 0),$y=d([V("esri.layers.support.FacilityLayerInfo")],$y);const eZe=$y;let sd=class extends $e{constructor(e){super(e),this.facilityIdField=null,this.layerId=null,this.levelIdField=null,this.levelNumberField=null,this.longNameField=null,this.shortNameField=null,this.sublayerId=null,this.verticalOrderField=null}};d([f({type:String,json:{write:{isRequired:!0}}})],sd.prototype,"facilityIdField",void 0),d([f({type:String,json:{write:{isRequired:!0}}})],sd.prototype,"layerId",void 0),d([f({type:String,json:{write:{isRequired:!0}}})],sd.prototype,"levelIdField",void 0),d([f({type:String,json:{write:{isRequired:!0}}})],sd.prototype,"levelNumberField",void 0),d([f({type:String,json:{write:{isRequired:!0}}})],sd.prototype,"longNameField",void 0),d([f({type:String,json:{write:{isRequired:!0}}})],sd.prototype,"shortNameField",void 0),d([f({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],sd.prototype,"sublayerId",void 0),d([f({type:String,json:{write:{isRequired:!0}}})],sd.prototype,"verticalOrderField",void 0),sd=d([V("esri.layers.support.LevelLayerInfo")],sd);const tZe=sd;let l0=class extends $e{constructor(e){super(e),this.layerId=null,this.nameField=null,this.siteIdField=null,this.sublayerId=null}};d([f({type:String,json:{write:{isRequired:!0}}})],l0.prototype,"layerId",void 0),d([f({type:String,json:{write:{isRequired:!0}}})],l0.prototype,"nameField",void 0),d([f({type:String,json:{write:{isRequired:!0}}})],l0.prototype,"siteIdField",void 0),d([f({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],l0.prototype,"sublayerId",void 0),l0=d([V("esri.layers.support.SiteLayerInfo")],l0);const iZe=l0;let Ax=class extends $e{constructor(e){super(e),this.levelLayer=null,this.facilityLayer=null,this.siteLayer=null}};d([f({type:tZe,json:{write:{isRequired:!0}}})],Ax.prototype,"levelLayer",void 0),d([f({type:eZe,json:{write:{isRequired:!0}}})],Ax.prototype,"facilityLayer",void 0),d([f({type:iZe,json:{write:!0}})],Ax.prototype,"siteLayer",void 0),Ax=d([V("esri.support.MapFloorInfo")],Ax);const rZe=Ax;var p7;let Px=p7=class extends $e{constructor(t){super(t),this.activeRange=null,this.currentRangeExtent=null,this.fullRangeExtent=null}clone(){return new p7(he({activeRange:this.activeRange,currentRangeExtent:this.currentRangeExtent,fullRangeExtent:this.fullRangeExtent}))}};d([f({type:String,nonNullable:!0,json:{read:{source:"activeRangeName"},write:{target:"activeRangeName",isRequired:!0}}})],Px.prototype,"activeRange",void 0),d([f({type:[Number],json:{write:!0}})],Px.prototype,"currentRangeExtent",void 0),d([f({type:[Number],json:{write:!0}})],Px.prototype,"fullRangeExtent",void 0),Px=p7=d([V("esri.webdoc.RangeInfo")],Px);const UY=Px;var f7;let $h=f7=class extends $e{constructor(t){super(t),this.enabled=!1,this.longNames=!1,this.minimized=!1,this.pinnedLevels=!1,this.site=null,this.facility=null,this.level=null}clone(){return new f7(he({enabled:this.enabled,longNames:this.longNames,minimized:this.minimized,pinnedLevels:this.pinnedLevels,site:this.site,facility:this.facility,level:this.level}))}};d([f({type:Boolean,json:{read:{source:"enabled"},write:{target:"enabled"}}})],$h.prototype,"enabled",void 0),d([f({type:Boolean,json:{read:{source:"longNames"},write:{target:"longNames"}}})],$h.prototype,"longNames",void 0),d([f({type:Boolean,json:{read:{source:"minimized"},write:{target:"minimized"}}})],$h.prototype,"minimized",void 0),d([f({type:Boolean,json:{read:{source:"pinnedLevels"},write:{target:"pinnedLevels"}}})],$h.prototype,"pinnedLevels",void 0),d([f({type:String,json:{read:{source:"site"},write:{target:"site"}}})],$h.prototype,"site",void 0),d([f({type:String,json:{read:{source:"facility"},write:{target:"facility"}}})],$h.prototype,"facility",void 0),d([f({type:String,json:{read:{source:"level"},write:{target:"level"}}})],$h.prototype,"level",void 0),$h=f7=d([V("esri.webdoc.widgets.FloorFilter")],$h);const nZe=$h;var m7;const _O=new jt({slider:"slider",picker:"picker"});let Ox=m7=class extends $e{constructor(t){super(t),this.interactionMode=null,this.numStops=null,this.stopInterval=null}clone(){return new m7({interactionMode:this.interactionMode,numStops:this.numStops,stopInterval:this.stopInterval})}};d([f({type:_O.apiValues,nonNullable:!0,json:{type:_O.jsonValues,default:null,read:{reader:_O.read},write:{isRequired:!0,writer:_O.write}}})],Ox.prototype,"interactionMode",void 0),d([f({type:ei,json:{read:{source:"numberOfStops"},write:{target:"numberOfStops",overridePolicy(){const t=this.stopInterval!=null;return{enabled:!t,isRequired:!t}}}}})],Ox.prototype,"numStops",void 0),d([f({type:Number,json:{write:{overridePolicy(){return{isRequired:this.numStops==null}}}}})],Ox.prototype,"stopInterval",void 0),Ox=m7=d([V("esri.webdoc.widgets.Range")],Ox);const sZe=Ox,BY=Es()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0});let Ad=class extends bt($e){constructor(e){super(e),this.unit="milliseconds",this.value=0}toMilliseconds(){return Ave(this.value,this.unit,"milliseconds")}};d([pt(BY,{nonNullable:!0})],Ad.prototype,"unit",void 0),d([f({type:Number,json:{write:!0},nonNullable:!0})],Ad.prototype,"value",void 0),Ad=d([V("esri.time.TimeInterval")],Ad);var g7;let Ps=g7=class extends $e{constructor(t){super(t),this.currentTimeExtent=null,this.fullTimeExtent=null,this.loop=!1,this.numStops=null,this.numThumbs=null,this.stopDelay=null,this.stopInterval=null,this.stops=null}readCurrentTimeExtent(t){return t?Ji.fromArray(t):void 0}writeCurrentTimeExtent(t,e,i){t&&qn(i,t.toArray(),e)}readFullTimeExtent(t,e){const i=e.properties;if(!i)return;const r=i.endTime!=null?new Date(i.endTime):null,n=i.startTime!=null?new Date(i.startTime):null;return new Ji({start:n,end:r})}writeFullTimeExtent(t,e){if(!t)return;const i=e.properties=e.properties||{},r=t.end,n=t.start;r&&(i.endTime=r!=null?r.getTime():null),n&&(i.startTime=n!=null?n.getTime():null)}readStopInterval(t,e,i){return t?Ad.fromJSON({value:t.interval,unit:t.units},i):null}writeStopInterval(t,e,i,r){if(!t)return;const n=t.toJSON(r);qn("properties.timeStopInterval",{interval:n.value,units:n.unit},e)}readStops(t){return t!=null&&t.length?t.map(e=>new Date(e)):null}writeStops(t,e,i){t!=null&&t.length&&qn(i,t.map(r=>r.getTime()),e)}clone(){return new g7(he({currentTimeExtent:this.currentTimeExtent,fullTimeExtent:this.fullTimeExtent,loop:this.loop,numStops:this.numStops,numThumbs:this.numThumbs,stopDelay:this.stopDelay,stopInterval:this.stopInterval,stops:this.stops}))}};d([f({type:Ji,json:{type:[[ei,PT]],read:{source:"properties.currentTimeExtent"},write:{target:"properties.currentTimeExtent"}}})],Ps.prototype,"currentTimeExtent",void 0),d([je("currentTimeExtent")],Ps.prototype,"readCurrentTimeExtent",null),d([Ge("currentTimeExtent")],Ps.prototype,"writeCurrentTimeExtent",null),d([f({type:Ji,json:{read:{source:["properties.endTime","properties.startTime"]},write:{target:{"properties.endTime":{type:Number},"properties.startTime":{type:Number}}}}})],Ps.prototype,"fullTimeExtent",void 0),d([je("fullTimeExtent")],Ps.prototype,"readFullTimeExtent",null),d([Ge("fullTimeExtent")],Ps.prototype,"writeFullTimeExtent",null),d([f({type:Boolean,nonNullable:!0,json:{default:!1,read:{source:"properties.loop"},write:{target:"properties.loop"}}})],Ps.prototype,"loop",void 0),d([f({type:ei,json:{read:{source:"properties.numberOfStops"},write:{target:"properties.numberOfStops",overridePolicy(){var r;const t=!!this.stopInterval,e=!!((r=this.stops)!=null&&r.length),i=!(t||e);return{enabled:i,isRequired:i}}}}})],Ps.prototype,"numStops",void 0),d([f({type:[1,2],nonNullable:!0,json:{type:ei,read:{source:"properties.thumbCount"},write:{target:"properties.thumbCount",isRequired:!0}}})],Ps.prototype,"numThumbs",void 0),d([f({type:Number,nonNullable:!0,json:{read:{source:"properties.thumbMovingRate"},write:{target:"properties.thumbMovingRate",isRequired:!0}}})],Ps.prototype,"stopDelay",void 0),d([f({type:Ad,json:{read:{source:"properties.timeStopInterval"},write:{target:{"properties.timeStopInterval.interval":{type:Number},"properties.timeStopInterval.units":{type:BY.jsonValues.filter(t=>t!=="esriTimeUnitsUnknown")}},overridePolicy(){var i;const t=this.numStops!=null,e=!!((i=this.stops)!=null&&i.length);return{enabled:!e,isRequired:!(t||e)}}}}})],Ps.prototype,"stopInterval",void 0),d([je("stopInterval")],Ps.prototype,"readStopInterval",null),d([Ge("stopInterval")],Ps.prototype,"writeStopInterval",null),d([f({type:[Date],json:{type:[ei],read:{source:"properties.stops"},write:{target:"properties.stops",overridePolicy(){return{isRequired:this.numStops==null&&!this.stopInterval}}}}})],Ps.prototype,"stops",void 0),d([je("stops")],Ps.prototype,"readStops",null),d([Ge("stops")],Ps.prototype,"writeStops",null),Ps=g7=d([V("esri.webdoc.widgets.TimeSlider")],Ps);const aZe=Ps;var y7;let Lx=y7=class extends $e{constructor(t){super(t),this.range=null,this.timeSlider=null,this.floorFilter=null}clone(){return new y7(he({range:this.range,timeSlider:this.timeSlider,floorFilter:this.floorFilter}))}};d([f({type:sZe,json:{write:!0}})],Lx.prototype,"range",void 0),d([f({type:aZe,json:{write:!0}})],Lx.prototype,"timeSlider",void 0),d([f({type:nZe,json:{write:!0}})],Lx.prototype,"floorFilter",void 0),Lx=y7=d([V("esri.webdoc.Widgets")],Lx);const oZe=Lx,lZe={width:600,height:400},xO=1.5;function cZe(t,e){e=e||lZe;let{width:i,height:r}=e;const n=i/r;return n<xO?r=i/xO:n>xO&&(i=r*xO),i>t.width&&(r*=t.width/i,i=t.width),r>t.height&&(i*=t.height/r,r=t.height),{width:Math.round(i),height:Math.round(r)}}function uZe(t,e){return{...Q_e(t,e),readResourcePaths:[]}}function jCt(t,e,i){const r=Cn(t.itemUrl);return{...Q_e(t,e),messages:[],writtenProperties:[],blockedRelativeUrls:[],verifyItemRelativeUrls:r?{rootPath:r.path,writtenUrls:[]}:null,resources:i?{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}:null}}function Q_e(t,e){return{origin:e,url:Cn(t.itemUrl),portal:t.portal||qe.getDefault(),portalItem:t}}let Ry=class extends $e{constructor(e){super(e),this.geometries=[],this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){const e=this.geometries.map(n=>n.toJSON()),i=this.geometries[0],r={};return r.outSR=ZS(this.outSpatialReference),r.inSR=ZS(i.spatialReference),r.geometries=JSON.stringify({geometryType:g_(i),geometries:e}),this.transformation&&(r.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),this.transformForward!=null&&(r.transformForward=this.transformForward),r}};d([f()],Ry.prototype,"geometries",void 0),d([f({type:tt,json:{read:{source:"outSR"}}})],Ry.prototype,"outSpatialReference",void 0),d([f()],Ry.prototype,"transformation",void 0),d([f()],Ry.prototype,"transformForward",void 0),Ry=d([V("esri.rest.support.ProjectParameters")],Ry);const dZe=Wn(Ry);async function hZe(t,e,i){e=dZe(e);const r=CY(t),n={...r.query,f:"json",...e.toJSON()},s=e.outSpatialReference,a=g_(e.geometries[0]),o=p9e(n,i);return mi(r.path+"/project",o).then(({data:{geometries:l}})=>rwe(l,a,s))}function pZe(t,e){var i;return e.resourceInfo?K_e(e,e.resourceInfo,{origin:t.origin}):(i=e.portalItem)!=null&&i.id?fZe(t,e,e.portalItem):Promise.resolve()}function K_e(t,e,i){const r={context:{...i,layerContainerType:"operational-layers"}};return t.portalItem&&(r.context.portal=t.portalItem.portal||qe.getDefault()),de(async()=>{const{populateOperationalLayers:n}=await import("./layersCreator-DOi_yp3u.js");return{populateOperationalLayers:n}},__vite__mapDeps([143,140,139,138,141,137])).then(({populateOperationalLayers:n})=>{const s=[],a=e.operationalLayers;a!=null&&a.length&&s.push(n(t.layers,a,r));const o={...r,context:{...r.context,layerContainerType:"tables"},defaultLayerType:"ArcGISFeatureLayer"},l=e.tables;return l!=null&&l.length&&s.push(n(t.tables,l,o)),Promise.allSettled(s).then(()=>{})})}async function fZe(t,e,i){var a;if(await i.load().catch(o=>{throw new ae(`${t.name}:load-portal-item`,"Failed to load portal item",{error:o})}),i.type!==t.itemType)throw new ae(`${t.name}:invalid-portal-item`,`Invalid portal item type '${i.type}', expected '${t.itemType}'`,{type:i.type});const r=await i.fetchData();e.resourceInfo=r;const n=uZe(i,t.origin);await mZe(t,e,r,n),e.resourceReferences={portalItem:i,paths:n.readResourcePaths};const s=await yZe(e.initialViewProperties,i,Ie.getLogger(e));if(s){const o=((a=e.initialViewProperties)==null?void 0:a.clone())??t.createInitialViewProperties();o.viewpoint=s,e.initialViewProperties=o}}function mZe(t,e,i,r){const n=gZe(t,i);return e.read(n,r),K_e(e,n,r)}function gZe(t,e){const i=t.parseVersion(e.version||"",t.name);return t.currentVersion.validate(i),e.version=`${i.major}.${i.minor}`,e}async function yZe(t,e,i){var s;if((s=t==null?void 0:t.viewpoint)==null?void 0:s.targetGeometry)return null;const n=await vZe(t,e,i);return n?new Ds({targetGeometry:n}):null}async function vZe(t,e,i){const r=t==null?void 0:t.spatialReference,n=e==null?void 0:e.extent;if(!r||!n)return null;if(r.isWGS84)return n.clone();if(r.isWebMercator)return Dm(n);const{getGeometryServiceURL:s}=await de(()=>import("./geometryServiceUtils-B6R4jVVU.js"),[]);try{const a=await s(e),o=new Ry({geometries:[n],outSpatialReference:r});return(await hZe(a,o))[0]}catch(a){i.error("Error projecting item's extent:",a)}return null}function gae(t){return{enabled:!!(t!=null&&t.length)}}var v7;let Fx=v7=class extends $e{constructor(t){super(t),this.exactMatch=!1,this.name=null,this.type=null}clone(){return new v7({exactMatch:this.exactMatch,type:this.type,name:this.name})}};d([f({type:Boolean,json:{write:!0}})],Fx.prototype,"exactMatch",void 0),d([f({type:String,json:{write:!0}})],Fx.prototype,"name",void 0),d([pt($Y)],Fx.prototype,"type",void 0),Fx=v7=d([V("esri.webdoc.applicationProperties.SearchLayerField")],Fx);const bZe=Fx;var b7;let Rx=b7=class extends $e{constructor(t){super(t),this.field=null,this.id=null,this.subLayer=null}clone(){return new b7(he({field:this.field,id:this.id,subLayer:this.subLayer}))}};d([f({type:bZe,json:{write:{isRequired:!0}}})],Rx.prototype,"field",void 0),d([f({type:String,json:{write:{isRequired:!0}}})],Rx.prototype,"id",void 0),d([f({type:ei,json:{write:!0}})],Rx.prototype,"subLayer",void 0),Rx=b7=d([V("esri.webdoc.applicationProperties.SearchLayer")],Rx);const wZe=Rx;var w7;let zx=w7=class extends $e{constructor(t){super(t),this.exactMatch=!1,this.name=null,this.type=null}clone(){return new w7({exactMatch:this.exactMatch,type:this.type,name:this.name})}};d([f({type:Boolean,json:{write:!0}})],zx.prototype,"exactMatch",void 0),d([f({type:String,json:{write:!0}})],zx.prototype,"name",void 0),d([pt($Y)],zx.prototype,"type",void 0),zx=w7=d([V("esri.webdoc.applicationProperties.SearchTableField")],zx);const _Ze=zx;var _7;let SC=_7=class extends $e{constructor(t){super(t),this.field=null,this.id=null}clone(){return new _7(he({field:this.field,id:this.id}))}};d([f({type:_Ze,json:{write:{isRequired:!0}}})],SC.prototype,"field",void 0),d([f({type:String,json:{write:{isRequired:!0}}})],SC.prototype,"id",void 0),SC=_7=d([V("esri.webdoc.applicationProperties.SearchTable")],SC);const xZe=SC;var x7;const e1e=Ue.ofType(wZe),t1e=Ue.ofType(xZe);let Sh=x7=class extends $e{constructor(t){super(t),this.addressSearchEnabled=!0,this.enabled=!0,this.hintText=null,this.layers=new e1e,this.tables=new t1e}readAddressSearchEnabled(t){return!t}writeAddressSearchEnabled(t,e,i){e[i]=!t}clone(){return new x7(he({addressSearchEnabled:this.addressSearchEnabled,enabled:this.enabled,hintText:this.hintText,layers:this.layers,tables:this.tables}))}};d([f({type:Boolean,nonNullable:!0,json:{read:{source:"disablePlaceFinder"},write:{target:"disablePlaceFinder",isRequired:!0},origins:{"web-scene":{read:!1,write:!1}}}})],Sh.prototype,"addressSearchEnabled",void 0),d([je("addressSearchEnabled")],Sh.prototype,"readAddressSearchEnabled",null),d([Ge("addressSearchEnabled")],Sh.prototype,"writeAddressSearchEnabled",null),d([f({type:Boolean,nonNullable:!0,json:{write:!0,origins:{"web-map":{write:{isRequired:!0}},"web-scene":{default:!0,write:!0}}}})],Sh.prototype,"enabled",void 0),d([f({type:String,json:{write:!0}})],Sh.prototype,"hintText",void 0),d([f({type:e1e,json:{write:{overridePolicy:gae},origins:{"web-scene":{write:{isRequired:!0}}}}})],Sh.prototype,"layers",void 0),d([f({type:t1e,json:{read:!0,write:{overridePolicy:gae}}})],Sh.prototype,"tables",void 0),Sh=x7=d([V("esri.webdoc.applicationProperties.Search")],Sh);const $Ze=Sh;var $7;let DL=$7=class extends $e{constructor(t){super(t),this.search=null}clone(){return new $7(he({search:this.search}))}};d([f({type:$Ze,json:{write:!0}})],DL.prototype,"search",void 0),DL=$7=d([V("esri.webdoc.applicationProperties.Viewing")],DL);const SZe=DL;var S7;let Nx=S7=class extends $e{constructor(t){super(t),this.editing=null,this.offline=null,this.viewing=null}clone(){return new S7(he({editing:this.editing,offline:this.offline,viewing:this.viewing}))}};d([f({json:{write:!0}})],Nx.prototype,"editing",void 0),d([f({json:{write:!0}})],Nx.prototype,"offline",void 0),d([f({type:SZe,json:{write:!0}})],Nx.prototype,"viewing",void 0),Nx=S7=d([V("esri.webmap.ApplicationProperties")],Nx);const TZe=Nx;var T7;let Em=T7=class extends $e{constructor(){super(...arguments),this.url=""}destroy(){this.url=""}get isSecureUrl(){return Sfe(this.url)}get isDataURI(){return rg(this.url)}clone(){return new T7({url:this.url})}};d([f({type:String,json:{write:{isRequired:!0}}})],Em.prototype,"url",void 0),d([f()],Em.prototype,"isSecureUrl",null),d([f()],Em.prototype,"isDataURI",null),Em=T7=d([V("esri.webdoc.support.SlideThumbnail")],Em);const IZe={type:Ji,json:{read:{source:"timeExtent",reader:t=>t?Array.isArray(t)?Ji.fromArray(t):Ji.fromJSON(t):null},write:{writer:(t,e,i,r)=>{t&&(t.isEmpty?r!=null&&r.messages&&r.messages.push(new ae("invalid-timeExtent","TimeExtent cannot be empty")):e[i]=t.toArray())},target:{timeExtent:{type:[[ei,PT]]}}}}};var I7;let Th=I7=class extends __($e){constructor(t){super(t),this.name=null,this.thumbnail=new Em,this.timeExtent=null}castThumbnail(t){return typeof t=="string"?new Em({url:t}):Wn(Em,t)}set viewpoint(t){const{targetGeometry:e,scale:i}=t;e!=null&&e.type==="point"&&i==null&&Ie.getLogger(this).warn("Bookmark.viewpoint should include 'scale' when its targetGeometry is a point.",t),this._set("viewpoint",t)}readViewpoint(t,e){const{extent:i,viewpoint:r}=e;return Ds.fromJSON(r||{targetGeometry:i})}writeViewpoint(t,e,i,r){if(!t)return;const{targetGeometry:n}=t;if(n!=null&&n.type!=="extent"){const s="Bookmark.viewpoint cannot be written to JSON when the viewpoint's targetGeometry is not an extent.";return void(r!=null&&r.messages?r.messages.push(new ae("property:unsupported",s)):Ie.getLogger(this).error(s))}n!=null&&(e.extent=n.toJSON()),e[i]=t.toJSON()}clone(){return new I7(he({name:this.name,thumbnail:this.thumbnail,timeExtent:this.timeExtent,viewpoint:this.viewpoint}))}};d([f({type:String,nonNullable:!0,json:{write:{isRequired:!0}}})],Th.prototype,"name",void 0),d([f({type:Em,json:{write:{overridePolicy:t=>({enabled:!(!t||!t.url)})}}})],Th.prototype,"thumbnail",void 0),d([_i("thumbnail")],Th.prototype,"castThumbnail",null),d([f(IZe)],Th.prototype,"timeExtent",void 0),d([f({type:Ds,nonNullable:!0,json:{write:!0}})],Th.prototype,"viewpoint",null),d([je("viewpoint",["extent","viewpoint"])],Th.prototype,"readViewpoint",null),d([Ge("viewpoint")],Th.prototype,"writeViewpoint",null),Th=I7=d([V("esri.webmap.Bookmark")],Th);const MZe=Th;let Jf=class extends bt(et){constructor(e){super(e),this.background=null,this.rangeInfo=null,this.spatialReference=null,this.timeExtent=null,this.timeZone=Rl,this.viewpoint=null}};d([f({type:h5})],Jf.prototype,"background",void 0),d([f({type:UY})],Jf.prototype,"rangeInfo",void 0),d([f({type:tt})],Jf.prototype,"spatialReference",void 0),d([f({type:Ji})],Jf.prototype,"timeExtent",void 0),d([f({nonNullable:!0})],Jf.prototype,"timeZone",void 0),d([f({type:Ds})],Jf.prototype,"viewpoint",void 0),Jf=d([V("esri.webmap.InitialViewProperties")],Jf);const YR=Jf,i1e=Ue.ofType(MZe),CZe=new Map([["image/jpeg","jpeg"],["image/jpg","jpg"],["image/png","png"],["image/gif","gif"]]),EZe="ArcGIS Pro",kZe=VY.JSAPI;let Ur=class extends p5(KZ(qD(fbe))){constructor(e){super(e),this._isAuthoringAppSetByUser=!1,this._isAuthoringAppVersionSetByUser=!1,this._thumbnailFilename=null,this._updateFromPromise=null,this.resourceReferences={portalItem:null,paths:[]},this.applicationProperties=null,this.bookmarks=new i1e,this.floorInfo=null,this.initialViewProperties=new YR,this.portalItem=null,this.sourceVersion=null,this.widgets=null,this._debouncedSaveOperations=Od(async(i,r,n)=>{const{save:s,saveAs:a}=await de(()=>import("./webdocSaveUtils-B4uV4hlx.js"),__vite__mapDeps([256,257,258,259,260,261]));switch(i){case 0:return s(this.context,this,r);case 1:return a(this.context,this,n,r)}}),this.authoringApp=this.authoringAppVersion=null,this._isAuthoringAppSetByUser=this._isAuthoringAppVersionSetByUser=!1}destroy(){this.portalItem=Or(this.portalItem)}initialize(){if(this.when().catch(e=>{Ie.getLogger(this).error("#load()","Failed to load web map",e)}),this.resourceInfo){let e;try{e=this._validateJSON(this.resourceInfo)}catch(i){return void this.addResolvingPromise(Promise.reject(i))}this.read(e)}}set authoringApp(e){this._isAuthoringAppSetByUser=!0,this._set("authoringApp",e)}writeAuthoringApp(e,i){e&&this._isAuthoringAppSetByUser?i.authoringApp=e:i.authoringApp=kZe}set authoringAppVersion(e){this._isAuthoringAppVersionSetByUser=!0,this._set("authoringAppVersion",e)}writeAuthoringAppVersion(e,i){e&&this._isAuthoringAppVersionSetByUser?i.authoringAppVersion=e:i.authoringAppVersion=Ofe}readInitialViewProperties(e,i){var a,o;const r=new YR;i.background&&(r.background=h5.fromJSON(i.background));const n=(a=i.initialState)==null?void 0:a.timeExtent;n&&(r.timeExtent=Ji.fromArray(n));const s=(o=i.initialState)==null?void 0:o.viewpoint;return s&&(s.rotation&&Y$.parse(i.version||"","webmap").lessThan(2,20)&&i.authoringApp===EZe&&(s.rotation*=-1),r.viewpoint=Ds.fromJSON(s)),i.mapRangeInfo&&(r.rangeInfo=UY.fromJSON(i.mapRangeInfo)),i.spatialReference&&(r.spatialReference=tt.fromJSON(i.spatialReference)),i.timeZone&&(r.timeZone=i.timeZone),r}writeInitialViewProperties(e,i,r,n){var o;if(!e)return;(o=e.background)!=null&&o.color&&(i.background=e.background.write({},n));const{timeExtent:s,viewpoint:a}=e;if(a||s){const l={};a&&(l.viewpoint=a.write({},n)),s&&(l.timeExtent=s.toArray()),i.initialState=l}e.rangeInfo&&(i.mapRangeInfo=e.rangeInfo.toJSON(n)),e.spatialReference&&(i.spatialReference=e.spatialReference.write({},n)),i.timeZone=e.timeZone}writeLayers(e,i,r,n){i[r]=this._writeLayers(e,n,"operational-layers")}get loaded(){return super.loaded}readSourceVersion(e,i){const[r,n]=i.version.split(".");return new Y$(parseInt(r,10),parseInt(n,10))}writeSourceVersion(e,i,r){i[r]=`${this.context.currentVersion.major}.${this.context.currentVersion.minor}`}writeTables(e,i,r,n){const s=this._writeLayers(e,n,"tables");s.length&&(i[r]=s)}get thumbnailUrl(){var e;return((e=this.portalItem)==null?void 0:e.thumbnailUrl)||null}set thumbnailUrl(e){e?(this._override("thumbnailUrl",e),this._thumbnailFilename=this._generateCustomThumbnailFilename(e)):this._clearThumbnailOverride()}get updatingFromView(){return!!this._updateFromPromise}load(e){return this.addResolvingPromise(pZe(this.context,this)),Promise.resolve(this)}loadAll(){return HD(this,e=>{e(this.ground,this.basemap,this.layers,this.tables)})}read(e,i){i={...i,origin:this.context.origin};const r=this._getAuthoringPropsState();dfe(this,e,n=>super.read(e,n),i),this._restoreAuthoringPropsFromState(r)}write(e,i){if(this.loadStatus!=="loaded"){const r=new ae("webmap:not-loaded","Web map must be loaded before it can be serialized");throw Ie.getLogger(this).error("#toJSON()","Web map must be loaded before it can be serialized",this.loadError||this.loadStatus),r}return this._removeDanglingLayerRefs(),i={...i,origin:this.context.origin,restrictedWebMapWriting:!0,webmap:this},super.write(e,i)}async save(e){return this._debouncedSaveOperations(0,e)}async saveAs(e,i){return this._debouncedSaveOperations(1,i,e)}async updateFrom(e,i){const r=this._updateFromInternal(e,i);this._updateFromPromise=r,await r,r===this._updateFromPromise&&(this._updateFromPromise=null)}getLayerJSONFromResourceInfo(e){var r,n,s,a;const i=this.resourceInfo;return this._collectAllLayersJSON([...((r=i==null?void 0:i.baseMap)==null?void 0:r.baseMapLayers)||[],...(i==null?void 0:i.operationalLayers)||[],...((a=(s=(n=this.basemap)==null?void 0:n.resourceInfo)==null?void 0:s.data)==null?void 0:a.baseMapLayers)||[]]).find(o=>o.id===e.id)}async updateItemThumbnail(){var e;this.thumbnailUrl&&this._isOverridden("thumbnailUrl")&&(await((e=this.portalItem)==null?void 0:e.updateThumbnail({thumbnail:this.thumbnailUrl,filename:this._thumbnailFilename})),this._clearThumbnailOverride())}getThumbnailState(){let e=this.thumbnailUrl;return e&&(e=this._isOverridden("thumbnailUrl")?e:Cfe(e,"w","8192")),{thumbnailUrl:e,filename:this._thumbnailFilename}}restoreThumbnailFromState(e){this.thumbnailUrl=e.thumbnailUrl,this._thumbnailFilename=e.filename}_collectAllLayersJSON(e){return e.reduce((i,r)=>(i.push(r),r.layerType==="GroupLayer"&&(i=i.concat(this._collectAllLayersJSON(r.layers||[]))),i),[])}_writeLayers(e,i,r){return i={...i,layerContainerType:r},e.map(n=>oL(n,r==="tables"?null:this.getLayerJSONFromResourceInfo(n),i)).filter(ln).toArray()}_validateJSON(e){const i=Y$.parse(e.version||"","webmap");return this.context.currentVersion.validate(i),e.version=`${i.major}.${i.minor}`,e}_removeDanglingLayerRefs(){var a,o;const e=this.applicationProperties,i=(a=e==null?void 0:e.viewing)==null?void 0:a.search,r=l=>this.allLayers.some(c=>c.id===l);if(i!=null&&i.layers&&(i.layers=i.layers.filter(l=>r(l.id))),i!=null&&i.tables&&(i.tables=i.tables.filter(l=>this.tables.some(c=>c.id===l.id))),e){const l=(o=e.editing)==null?void 0:o.locationTracking;l!=null&&l.info&&!r(l.info.layerId)&&(e.editing=null)}const n="presentation"in this?this.presentation:null,s=n==null?void 0:n.slides;s&&s.forEach(l=>{l.visibleLayers&&(l.visibleLayers=l.visibleLayers.filter(c=>r(c.id)))})}async _updateFromInternal(e,i){if(i??(i={}),await kT(()=>e.ready),this._updateInitialViewProperties(e,i),e.map===this)for(const r of e.allLayerViews)"visible"in r&&"visible"in r.layer&&r._isOverridden("visible")&&(r.layer.visible=r.visible),"featureEffect"in r&&"featureEffect"in r.layer&&r._isOverridden("featureEffect")&&(r.layer.featureEffect=r.featureEffect);await this._updateThumbnailUrl(e,i)}_updateInitialViewProperties(e,i){var r,n;if(i.backgroundExcluded||(this.initialViewProperties.background=(r=e.background)==null?void 0:r.clone()),this.initialViewProperties.spatialReference=(n=e.spatialReference)==null?void 0:n.clone(),this.initialViewProperties.timeZone=e.timeZone,i.viewpointExcluded||(this.initialViewProperties.viewpoint=new Ds({rotation:e.rotation,scale:i.scalePreserved?e.scale:null,targetGeometry:this._getViewExtent(e)})),!i.widgetsExcluded)for(const s of e.persistableViewModels)s.updateWebDocument(this)}_getViewExtent(e){const i=e.center.clone().normalize(),r=e.extent.clone(),n=r.width/2;return r.xmin=i.x-n,r.xmax=i.x+n,r}async _updateThumbnailUrl(e,i){if(i.thumbnailExcluded)return;const r=cZe(e,i.thumbnailSize),n=await e.takeScreenshot({format:"png",width:r.width,height:r.height});this._setAutoGeneratedThumbnail(n.dataUrl)}_setAutoGeneratedThumbnail(e){this.thumbnailUrl=e,this._thumbnailFilename=null}_clearThumbnailOverride(){this._clearOverride("thumbnailUrl"),this.clear("thumbnailUrl","user"),this._thumbnailFilename=null}_generateCustomThumbnailFilename(e){if(rg(e)){const i=Xw(e),r=i==null?void 0:i.mediaType,n=r&&CZe.get(r.toLowerCase())||null,s=`thumbnail${Date.now()}`;return n?`${s}.${n}`:s}return null}_getAuthoringPropsState(){return{authoringApp:this.authoringApp,authoringAppVersion:this.authoringAppVersion,isAuthoringAppSetByUser:this._isAuthoringAppSetByUser,isAuthoringAppVersionSetByUser:this._isAuthoringAppVersionSetByUser}}_restoreAuthoringPropsFromState(e){e.isAuthoringAppSetByUser?this.authoringApp=e.authoringApp:this._isAuthoringAppSetByUser=!1,e.isAuthoringAppVersionSetByUser?this.authoringAppVersion=e.authoringAppVersion:this._isAuthoringAppVersionSetByUser=!1}};d([f()],Ur.prototype,"_updateFromPromise",void 0),d([f({type:TZe,json:{write:!0}})],Ur.prototype,"applicationProperties",void 0),d([f({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],Ur.prototype,"authoringApp",null),d([Ge("authoringApp")],Ur.prototype,"writeAuthoringApp",null),d([f({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],Ur.prototype,"authoringAppVersion",null),d([Ge("authoringAppVersion")],Ur.prototype,"writeAuthoringAppVersion",null),d([f({type:i1e,json:{write:{overridePolicy:t=>({enabled:!!(t&&t.length>0),ignoreOrigin:!0})}}})],Ur.prototype,"bookmarks",void 0),d([f({type:rZe,json:{name:"mapFloorInfo",write:!0}})],Ur.prototype,"floorInfo",void 0),d([f({type:YR,nonNullable:!0,json:{read:{source:["background","initialState.timeExtent","initialState.viewpoint","mapRangeInfo","spatialReference","timeZone"]},write:{ignoreOrigin:!0,target:{background:{type:h5},"initialState.timeExtent":{type:Ji},"initialState.viewpoint":{type:Ds},mapRangeInfo:{type:UY},spatialReference:{type:tt},"timeZone:":{type:String}}}}})],Ur.prototype,"initialViewProperties",void 0),d([je("initialViewProperties")],Ur.prototype,"readInitialViewProperties",null),d([Ge("initialViewProperties")],Ur.prototype,"writeInitialViewProperties",null),d([f({json:{read:!1,write:{target:"operationalLayers",ignoreOrigin:!0}}})],Ur.prototype,"layers",void 0),d([Ge("layers")],Ur.prototype,"writeLayers",null),d([f({type:Ot})],Ur.prototype,"portalItem",void 0),d([f()],Ur.prototype,"resourceInfo",void 0),d([f({readOnly:!0,type:Y$,json:{read:{source:"version"},write:{allowNull:!0,ignoreOrigin:!0,target:"version",isRequired:!0}}})],Ur.prototype,"sourceVersion",void 0),d([je("sourceVersion")],Ur.prototype,"readSourceVersion",null),d([Ge("sourceVersion")],Ur.prototype,"writeSourceVersion",null),d([f({json:{read:!1,write:{ignoreOrigin:!0}}})],Ur.prototype,"tables",void 0),d([Ge("tables")],Ur.prototype,"writeTables",null),d([f()],Ur.prototype,"thumbnailUrl",null),d([f()],Ur.prototype,"updatingFromView",null),d([f({type:oZe,json:{write:!0}})],Ur.prototype,"widgets",void 0),Ur=d([V("esri.WebDocument2D")],Ur);const AZe=Ur,Lr=(t=>t)(["operational-layers","basemap-base-layers","basemap-ground-layers","ground"]);var M7;let c0=M7=class extends $e{constructor(t){super(t),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new M7({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};d([f({type:String,json:{write:!0}})],c0.prototype,"expression",void 0),d([f({type:String,json:{write:!0}})],c0.prototype,"name",void 0),d([f({type:["boolean","date","number","string"],json:{write:!0}})],c0.prototype,"returnType",void 0),d([f({type:String,json:{write:!0}})],c0.prototype,"title",void 0),c0=M7=d([V("esri.form.ExpressionInfo")],c0);const PZe=c0;let Cl=class extends $e{constructor(e){super(e),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};d([f({type:String,json:{write:!0}})],Cl.prototype,"description",void 0),d([f({type:String,json:{write:!0}})],Cl.prototype,"label",void 0),d([f()],Cl.prototype,"type",void 0),d([f({type:String,json:{write:!0}})],Cl.prototype,"visibilityExpression",void 0),Cl=d([V("esri.form.elements.Element")],Cl);let jL=class extends bt($e){constructor(e){super(e),this.type=null}};d([f()],jL.prototype,"type",void 0),jL=d([V("esri.form.elements.inputs.attachments.Input")],jL);const zv=jL,f5=["any","capture","upload"];let Dx=class extends zv{constructor(e){super(e),this.type="audio",this.inputMethod="any",this.maxDuration=null}};d([f({type:["audio"],readOnly:!0,json:{write:!0}})],Dx.prototype,"type",void 0),d([f({type:f5,json:{write:!0}})],Dx.prototype,"inputMethod",void 0),d([f({type:Number,json:{write:!0}})],Dx.prototype,"maxDuration",void 0),Dx=d([V("esri.form.elements.inputs.attachments.AudioInput")],Dx);const yae=Dx;let TC=class extends zv{constructor(e){super(e),this.type="document",this.maxFileSize=null}};d([f({type:["document"],readOnly:!0,json:{write:!0}})],TC.prototype,"type",void 0),d([f({type:Number,json:{write:!0}})],TC.prototype,"maxFileSize",void 0),TC=d([V("esri.form.elements.inputs.attachments.DocumentInput")],TC);const vae=TC;let jx=class extends zv{constructor(e){super(e),this.type="image",this.inputMethod="any",this.maxImageSize=null}};d([f({type:["image"],readOnly:!0,json:{write:!0}})],jx.prototype,"type",void 0),d([f({type:f5,json:{write:!0}})],jx.prototype,"inputMethod",void 0),d([f({type:Number,json:{write:!0}})],jx.prototype,"maxImageSize",void 0),jx=d([V("esri.form.elements.inputs.attachments.ImageInput")],jx);const bae=jx;let IC=class extends zv{constructor(e){super(e),this.type="signature",this.inputMethod="any"}};d([f({type:["signature"],readOnly:!0,json:{write:!0}})],IC.prototype,"type",void 0),d([f({type:f5,json:{write:!0}})],IC.prototype,"inputMethod",void 0),IC=d([V("esri.form.elements.inputs.attachments.SignatureInput")],IC);const wae=IC;let Vx=class extends zv{constructor(e){super(e),this.type="video",this.inputMethod="any",this.maxDuration=null}};d([f({type:["video"],readOnly:!0,json:{write:!0}})],Vx.prototype,"type",void 0),d([f({type:f5,json:{write:!0}})],Vx.prototype,"inputMethod",void 0),d([f({type:Number,json:{write:!0}})],Vx.prototype,"maxDuration",void 0),Vx=d([V("esri.form.elements.inputs.attachments.VideoInput")],Vx);const _ae=Vx;function r1e(t){return{nestableTypes:{base:zv,key:"type",typeMap:{audio:yae,document:vae,image:bae,signature:wae,video:_ae}},allTypes:{base:zv,key:"type",typeMap:{attachment:t,audio:yae,document:vae,image:bae,signature:wae,video:_ae}}}}function OZe(t,e,i){return t?t.map(r=>Rp(e.nestableTypes,r)):null}function LZe(t,e,i){if(!t)return null;const r=e.nestableTypes.typeMap;return t.filter(n=>r[n.type]).map(n=>r[n.type].fromJSON(n))}function FZe(t,e,i){if(!t)return null;const r=e.nestableTypes.typeMap;return t.filter(n=>r[n.type]).map(n=>n.toJSON())}let Ah=class extends zv{constructor(e){super(e),this.type="attachment",this.attachmentAssociationType="exact",this.inputTypes=null}castInputs(e){return OZe(e,H6)}readInputs(e,i){return LZe(i.inputTypes,H6)}writeInputs(e,i){i.inputTypes=FZe(e,H6)}};d([f({type:["attachment"],readOnly:!0,json:{write:!0}})],Ah.prototype,"type",void 0),d([f({type:["any","exact","exactOrNone"],json:{write:!0}})],Ah.prototype,"attachmentAssociationType",void 0),d([f({json:{write:{isRequired:!0}}})],Ah.prototype,"inputTypes",void 0),d([_i("inputTypes")],Ah.prototype,"castInputs",null),d([je("inputTypes")],Ah.prototype,"readInputs",null),d([Ge("inputTypes")],Ah.prototype,"writeInputs",null),Ah=d([V("esri.form.elements.inputs.attachments.AttachmentInput")],Ah);const H6=r1e(Ah),RZe=Ah;var C7;const zZe=r1e(RZe);let ic=C7=class extends Cl{constructor(t){super(t),this.allowUserRename=!0,this.attachmentKeyword=null,this.displayFilename=!1,this.editableExpression=null,this.filenameExpression="{attachmentKeyword}_{now}",this.input=null,this.maxAttachmentCount=null,this.minAttachmentCount=null,this.type="attachment",this.useOriginalFilename=!0}clone(){var t;return new C7({allowUserRename:this.allowUserRename,attachmentKeyword:this.attachmentKeyword,description:this.description,displayFilename:this.displayFilename,editableExpression:this.editableExpression,filenameExpression:this.filenameExpression,input:(t=this.input)==null?void 0:t.clone(),label:this.label,maxAttachmentCount:this.maxAttachmentCount,minAttachmentCount:this.minAttachmentCount,useOriginalFilename:this.useOriginalFilename,visibilityExpression:this.visibilityExpression})}};d([f({type:Boolean,json:{write:!0}})],ic.prototype,"allowUserRename",void 0),d([f({type:String,json:{write:{isRequired:!0}}})],ic.prototype,"attachmentKeyword",void 0),d([f({type:Boolean,json:{write:!0}})],ic.prototype,"displayFilename",void 0),d([f({type:String,json:{write:!0}})],ic.prototype,"editableExpression",void 0),d([f({type:String,json:{write:!0}})],ic.prototype,"filenameExpression",void 0),d([f({types:zZe.allTypes,json:{read:{source:"inputType"},write:{target:"inputType",isRequired:!0}}})],ic.prototype,"input",void 0),d([f({type:Number,json:{write:!0}})],ic.prototype,"maxAttachmentCount",void 0),d([f({type:Number,json:{write:!0}})],ic.prototype,"minAttachmentCount",void 0),d([f({type:["attachment"],readOnly:!0,json:{read:!1,write:!0}})],ic.prototype,"type",void 0),d([f({type:Boolean,json:{write:!0}})],ic.prototype,"useOriginalFilename",void 0),ic=C7=d([V("esri.form.elements.AttachmentElement")],ic);const xae=ic;let VL=class extends $e{constructor(e){super(e),this.type=null}};d([f()],VL.prototype,"type",void 0),VL=d([V("esri.form.elements.inputs.Input")],VL);const cg=VL;let MC=class extends cg{constructor(e){super(e),this.maxLength=null,this.minLength=0}};d([f({type:Number,json:{write:!0}})],MC.prototype,"maxLength",void 0),d([f({type:Number,json:{write:!0}})],MC.prototype,"minLength",void 0),MC=d([V("esri.form.elements.inputs.TextInput")],MC);const qY=MC;var E7;let UL=E7=class extends qY{constructor(t){super(t),this.type="barcode-scanner"}clone(){return new E7({maxLength:this.maxLength,minLength:this.minLength})}};d([f({type:["barcode-scanner"],json:{read:!1,write:!0}})],UL.prototype,"type",void 0),UL=E7=d([V("esri.form.elements.inputs.BarcodeScannerInput")],UL);const NZe=UL;var k7;let Ux=k7=class extends cg{constructor(t){super(t),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="combo-box"}clone(){return new k7({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};d([f({type:String,json:{write:!0}})],Ux.prototype,"noValueOptionLabel",void 0),d([f({type:Boolean,json:{write:!0}})],Ux.prototype,"showNoValueOption",void 0),d([f({type:["combo-box"],json:{read:!1,write:!0}})],Ux.prototype,"type",void 0),Ux=k7=d([V("esri.form.elements.inputs.ComboBoxInput")],Ux);const DZe=Ux;var A7;function $ae(t){return t??null}function Sae(t){return t??null}let Ih=A7=class extends cg{constructor(t){super(t),this.max=null,this.min=null,this.type="date-picker"}readMax(t,e){return $ae(e.max)}writeMax(t,e){e.max=Sae(t)}readMin(t,e){return $ae(e.min)}writeMin(t,e){e.min=Sae(t)}clone(){return new A7({max:this.max,min:this.min})}};d([f({type:String,json:{type:String,write:!0}})],Ih.prototype,"max",void 0),d([je("max")],Ih.prototype,"readMax",null),d([Ge("max")],Ih.prototype,"writeMax",null),d([f({type:String,json:{type:String,write:!0}})],Ih.prototype,"min",void 0),d([je("min")],Ih.prototype,"readMin",null),d([Ge("min")],Ih.prototype,"writeMin",null),d([f({type:["date-picker"],json:{read:!1,write:!0}})],Ih.prototype,"type",void 0),Ih=A7=d([V("esri.form.elements.inputs.DatePickerInput")],Ih);const jZe=Ih;var P7;function G6(t){return t??null}function W6(t){return t??null}let pl=P7=class extends cg{constructor(t){super(t),this.includeTimeOffset=!0,this.max=null,this.min=null,this.timeResolution="minutes",this.type="datetimeoffset-picker"}readMax(t,e){return G6(e.max)}writeMax(t,e){e.max=W6(t)}readMin(t,e){return G6(e.min)}writeMin(t,e){e.min=W6(t)}readTimeResolution(t,e){return G6(e.timeResolution)}writeTimeResolution(t,e){e.timeResolution=W6(t)}clone(){return new P7({includeTimeOffset:this.includeTimeOffset,max:this.max,min:this.min,timeResolution:this.timeResolution})}};d([f({type:Boolean,json:{write:!0}})],pl.prototype,"includeTimeOffset",void 0),d([f({type:String,json:{type:String,write:!0}})],pl.prototype,"max",void 0),d([je("max")],pl.prototype,"readMax",null),d([Ge("max")],pl.prototype,"writeMax",null),d([f({type:String,json:{type:String,write:!0}})],pl.prototype,"min",void 0),d([je("min")],pl.prototype,"readMin",null),d([Ge("min")],pl.prototype,"writeMin",null),d([f({type:String,json:{type:String,write:!0}})],pl.prototype,"timeResolution",void 0),d([je("timeResolution")],pl.prototype,"readTimeResolution",null),d([Ge("timeResolution")],pl.prototype,"writeTimeResolution",null),d([f({type:["datetimeoffset-picker"],json:{read:!1,write:!0}})],pl.prototype,"type",void 0),pl=P7=d([V("esri.form.elements.inputs.DateTimeOffsetPickerInput")],pl);const VZe=pl;var O7;function Tae(t){return t!=null?new Date(t):null}function Iae(t){return t?t.getTime():null}let ad=O7=class extends cg{constructor(t){super(t),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(t,e){return Tae(e.max)}writeMax(t,e){e.max=Iae(t)}readMin(t,e){return Tae(e.min)}writeMin(t,e){e.min=Iae(t)}clone(){return new O7({includeTime:this.includeTime,max:this.max,min:this.min})}};d([f({type:Boolean,json:{write:!0}})],ad.prototype,"includeTime",void 0),d([f({type:Date,json:{type:Number,write:!0}})],ad.prototype,"max",void 0),d([je("max")],ad.prototype,"readMax",null),d([Ge("max")],ad.prototype,"writeMax",null),d([f({type:Date,json:{type:Number,write:!0}})],ad.prototype,"min",void 0),d([je("min")],ad.prototype,"readMin",null),d([Ge("min")],ad.prototype,"writeMin",null),d([f({type:["datetime-picker"],json:{read:!1,write:!0}})],ad.prototype,"type",void 0),ad=O7=d([V("esri.form.elements.inputs.DateTimePickerInput")],ad);const UZe=ad;var L7;let Bx=L7=class extends cg{constructor(t){super(t),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="radio-buttons"}clone(){return new L7({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};d([f({type:String,json:{write:!0}})],Bx.prototype,"noValueOptionLabel",void 0),d([f({type:Boolean,json:{write:!0}})],Bx.prototype,"showNoValueOption",void 0),d([f({type:["radio-buttons"],json:{read:!1,write:!0}})],Bx.prototype,"type",void 0),Bx=L7=d([V("esri.form.elements.inputs.RadioButtonsInput")],Bx);const BZe=Bx;var F7;let qx=F7=class extends cg{constructor(t){super(t),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new F7({offValue:this.offValue,onValue:this.onValue})}};d([f({type:[String,Number],json:{write:!0}})],qx.prototype,"offValue",void 0),d([f({type:[String,Number],json:{write:!0}})],qx.prototype,"onValue",void 0),d([f({type:["switch"],json:{read:!1,write:!0}})],qx.prototype,"type",void 0),qx=F7=d([V("esri.form.elements.inputs.SwitchInput")],qx);const qZe=qx;var R7;let BL=R7=class extends qY{constructor(t){super(t),this.type="text-area"}clone(){return new R7({maxLength:this.maxLength,minLength:this.minLength})}};d([f({type:["text-area"],json:{read:!1,write:!0}})],BL.prototype,"type",void 0),BL=R7=d([V("esri.form.elements.inputs.TextAreaInput")],BL);const HZe=BL;var z7;let qL=z7=class extends qY{constructor(t){super(t),this.type="text-box"}clone(){return new z7({maxLength:this.maxLength,minLength:this.minLength})}};d([f({type:["text-box"],json:{read:!1,write:!0}})],qL.prototype,"type",void 0),qL=z7=d([V("esri.form.elements.inputs.TextBoxInput")],qL);const GZe=qL;var N7;function Z6(t){return t??null}function Y6(t){return t??null}let rc=N7=class extends cg{constructor(t){super(t),this.max=null,this.min=null,this.timeResolution="minutes",this.type="time-picker"}readMax(t,e){return Z6(e.max)}writeMax(t,e){e.max=Y6(t)}readMin(t,e){return Z6(e.min)}writeMin(t,e){e.min=Y6(t)}readTimeResolution(t,e){return Z6(e.timeResolution)}writeTimeResolution(t,e){e.timeResolution=Y6(t)}clone(){return new N7({max:this.max,min:this.min,timeResolution:this.timeResolution})}};d([f({type:String,json:{type:String,write:!0}})],rc.prototype,"max",void 0),d([je("max")],rc.prototype,"readMax",null),d([Ge("max")],rc.prototype,"writeMax",null),d([f({type:String,json:{type:String,write:!0}})],rc.prototype,"min",void 0),d([je("min")],rc.prototype,"readMin",null),d([Ge("min")],rc.prototype,"writeMin",null),d([f({type:String,json:{type:String,write:!0}})],rc.prototype,"timeResolution",void 0),d([je("timeResolution")],rc.prototype,"readTimeResolution",null),d([Ge("timeResolution")],rc.prototype,"writeTimeResolution",null),d([f({type:["time-picker"],json:{read:!1,write:!0}})],rc.prototype,"type",void 0),rc=N7=d([V("esri.form.elements.inputs.TimePickerInput")],rc);const WZe=rc,ZZe=NZe,YZe=DZe,JZe=jZe,XZe=VZe,QZe=UZe,KZe=BZe,eYe=qZe,tYe=HZe,iYe=GZe,rYe=WZe,nYe={base:cg,key:"type",typeMap:{"barcode-scanner":ZZe,"combo-box":YZe,"date-picker":JZe,"datetime-picker":QZe,"datetimeoffset-picker":XZe,"radio-buttons":KZe,switch:eYe,"text-area":tYe,"text-box":iYe,"time-picker":rYe}};var D7;let dc=D7=class extends Cl{constructor(t){super(t),this.domain=null,this.editable=null,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field",this.valueExpression=null}clone(){return new D7({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};d([f({types:O0e,json:{read:{reader:s5},write:!0}})],dc.prototype,"domain",void 0),d([f({type:Boolean,json:{write:!0}})],dc.prototype,"editable",void 0),d([f({type:String,json:{write:!0}})],dc.prototype,"editableExpression",void 0),d([f({type:String,json:{write:!0}})],dc.prototype,"fieldName",void 0),d([f({type:String,json:{write:!0}})],dc.prototype,"hint",void 0),d([f({types:nYe,json:{read:{source:"inputType"},write:{target:"inputType"}}})],dc.prototype,"input",void 0),d([f({type:String,json:{write:!0}})],dc.prototype,"requiredExpression",void 0),d([f({type:String,json:{read:!1,write:!0}})],dc.prototype,"type",void 0),d([f({type:String,json:{write:!0}})],dc.prototype,"valueExpression",void 0),dc=D7=d([V("esri.form.elements.FieldElement")],dc);var j7;let Xf=j7=class extends Cl{constructor(t){super(t),this.displayCount=null,this.displayType="list",this.editableExpression=null,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new j7({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editableExpression:this.editableExpression,label:this.label,orderByFields:he(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};d([f({type:Number,json:{write:!0}})],Xf.prototype,"displayCount",void 0),d([f({type:["list"],json:{write:!0}})],Xf.prototype,"displayType",void 0),d([f({type:String,json:{write:!0}})],Xf.prototype,"editableExpression",void 0),d([f({type:[mY],json:{write:!0}})],Xf.prototype,"orderByFields",void 0),d([f({type:Number,json:{write:!0}})],Xf.prototype,"relationshipId",void 0),d([f({type:["relationship"],json:{read:!1,write:!0}})],Xf.prototype,"type",void 0),Xf=j7=d([V("esri.form.elements.RelationshipElement")],Xf);const Mae=Xf;var V7;let Hx=V7=class extends Cl{constructor(t){super(t),this.text=null,this.textFormat="plain-text",this.type="text"}clone(){return new V7({text:this.text,textFormat:this.textFormat,visibilityExpression:this.visibilityExpression})}};d([f({type:String,json:{write:!0}})],Hx.prototype,"text",void 0),d([f({type:String,json:{write:!0}})],Hx.prototype,"textFormat",void 0),d([f({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],Hx.prototype,"type",void 0),Hx=V7=d([V("esri.form.elements.TextElement")],Hx);const Cae=Hx;let Gx=class extends bt(Cl){constructor(e){super(e),this.associationTypes=null,this.editableExpression=null,this.type="utilityNetworkAssociations"}};d([f({type:[o0e],json:{write:{isRequired:!0}}})],Gx.prototype,"associationTypes",void 0),d([f({type:String,json:{write:!0}})],Gx.prototype,"editableExpression",void 0),d([f({type:["utilityNetworkAssociations"],json:{read:!1,write:!0}})],Gx.prototype,"type",void 0),Gx=d([V("esri.form.elements.UtilityNetworkAssociationsElement")],Gx);const Eae=Gx,sYe=t=>t.type==="field",aYe=t=>t.type==="group",oYe=t=>t.type==="text";function n1e(t){return{typesWithGroup:{base:Cl,key:"type",typeMap:{attachment:xae,field:dc,group:t,relationship:Mae,text:Cae,utilityNetworkAssociations:Eae}},typesWithoutGroup:{base:Cl,key:"type",typeMap:{attachment:xae,field:dc,relationship:Mae,text:Cae,utilityNetworkAssociations:Eae}}}}function s1e(t,e,i=!0){if(!t)return null;const r=i?e.typesWithGroup.typeMap:e.typesWithoutGroup.typeMap;return t.filter(n=>r[n.type]).map(n=>r[n.type].fromJSON(n))}function a1e(t,e,i=!0){if(!t)return null;const r=i?e.typesWithGroup.typeMap:e.typesWithoutGroup.typeMap;return t.filter(n=>r[n.type]).map(n=>n.toJSON())}function o1e(t,e,i=!0){return t?t.map(r=>Rp(i?e.typesWithGroup:e.typesWithoutGroup,r)):null}var U7;let Ph=U7=class extends Cl{constructor(t){super(t),this.elements=null,this.initialState="expanded",this.type="group"}castElements(t){return o1e(t,J6,!1)}readElements(t,e){return s1e(e.formElements,J6,!1)}writeElements(t,e){e.formElements=a1e(t,J6,!1)}clone(){return new U7({description:this.description,elements:he(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};d([f({json:{write:!0}})],Ph.prototype,"elements",void 0),d([_i("elements")],Ph.prototype,"castElements",null),d([je("elements",["formElements"])],Ph.prototype,"readElements",null),d([Ge("elements")],Ph.prototype,"writeElements",null),d([f({type:["collapsed","expanded"],json:{write:!0}})],Ph.prototype,"initialState",void 0),d([f({type:String,json:{read:!1,write:!0}})],Ph.prototype,"type",void 0),Ph=U7=d([V("esri.form.elements.GroupElement")],Ph);const J6=n1e(Ph),lYe=Ph;var B7;const X6=n1e(lYe);let od=B7=class extends $e{constructor(t){super(t),this.description=null,this.elements=null,this.expressionInfos=null,this.preserveFieldValuesWhenHidden=!1,this.title=null}castElements(t){return o1e(t,X6)}readElements(t,e){return s1e(e.formElements,X6)}writeElements(t,e){e.formElements=a1e(t,X6)}clone(){return new B7({description:this.description,expressionInfos:he(this.expressionInfos),elements:he(this.elements),title:this.title,preserveFieldValuesWhenHidden:this.preserveFieldValuesWhenHidden})}async getFieldsUsed(t,e){const i=new Set,{description:r,elements:n,expressionInfos:s,title:a}=this;if(P2(i,t,r),P2(i,t,a),!n)return[];const o=cYe(n,s).map(l=>za(i,t,null,l));await Promise.all(o);for(const l of n)l1e(i,{fieldsIndex:t,relationships:e},l);return Array.from(i).sort()}};function l1e(t,e,i){var n;const{fieldsIndex:r}=e;if(!r||r.fields.length!==t.size)switch(P2(t,r,i.label),P2(t,r,i.description),i.type){case"field":ho(t,r,i.fieldName);break;case"group":i.elements.forEach(s=>l1e(t,e,s));break;case"relationship":if(e.relationships){const s=e.relationships.find(a=>a.id===i.relationshipId);s&&ho(t,r,s.keyField)}Lv(t,r,(n=i.orderByFields)==null?void 0:n.map(s=>s.field));break;case"text":P2(t,r,i.text)}}function cYe(t,e){if(!e||e.length===0)return[];const i=c1e(t),r=[];for(const n of e)i.has(n.name)&&r.push(n.expression);return r}function c1e(t){const e=new Set;for(const i of t)if(Gte(e,i.visibilityExpression),!oYe(i)){if(aYe(i))JF(e,c1e(i.elements));else if(Gte(e,i.editableExpression),sYe(i)){const{requiredExpression:r,valueExpression:n}=i;JF(e,[r,n])}}return e}function P2(t,e,i){Lv(t,e,dY(i))}d([f({type:String,json:{write:!0}})],od.prototype,"description",void 0),d([f({json:{write:!0}})],od.prototype,"elements",void 0),d([_i("elements")],od.prototype,"castElements",null),d([je("elements",["formElements"])],od.prototype,"readElements",null),d([Ge("elements")],od.prototype,"writeElements",null),d([f({type:[PZe],json:{write:!0}})],od.prototype,"expressionInfos",void 0),d([f({type:Boolean,json:{default:!1,write:!0}})],od.prototype,"preserveFieldValuesWhenHidden",void 0),d([f({type:String,json:{write:!0}})],od.prototype,"title",void 0),od=B7=d([V("esri.form.FormTemplate")],od);const uYe=Symbol("getSliceableSymbol");let EE=class{};EE=d([V("esri.graphic.GraphicOrigin")],EE);const dYe=Symbol("isFeatureGraphicOrigin");var kae;let hYe=class extends EE{get[(kae=dYe,Uk)](){return this.layer}get[yY](){return this.layer}get[uYe](){return this.layer}constructor(e){super(),this[kae]=!0,this.type="feature",this.layer=e}get id(){return this.layer.id}};function Aae(t,e,i){if(t.hasM==null||t.hasZ)for(const r of e)for(const n of r)n.length>2&&(n[2]*=i)}function pYe(t,e,i){if(!t&&!e||!i)return;const r=JS(i);Pae(t,i,r),Pae(e,i,r)}function Pae(t,e,i){if(t)for(const r of t)fYe(r.geometry,e,i)}function fYe(t,e,i){if(!(t!=null&&t.spatialReference)||Cs(t.spatialReference,e))return;const r=JS(t.spatialReference)/i;if(r!==1){if("x"in t)t.z!=null&&(t.z*=r);else if("rings"in t)Aae(t,t.rings,r);else if("paths"in t)Aae(t,t.paths,r);else if("points"in t&&(t.hasM==null||t.hasZ))for(const n of t.points)n.length>2&&(n[2]*=r)}}function q7(t,e,i){if(!(i!=null&&i.features)||!i.hasZ)return;const r=qye(i.geometryType,e,t.outSpatialReference);if(r!=null)for(const n of i.features)r(n.geometry)}var H7;const G7=new jt({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let zn=H7=class extends $e{constructor(t){super(t),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(t,e){return this.readFeaturesWithClass(t,e,sr)}writeGeometryType(t,e,i,r){if(t)return void G7.write(t,e,i,r);const{features:n}=this;if(n){for(const s of n)if((s==null?void 0:s.geometry)!=null)return void G7.write(s.geometry.type,e,i,r)}}readQueryGeometry(t,e){if(!t)return null;const i=!!t.spatialReference,r=jp(t);return r&&!i&&e.spatialReference&&(r.spatialReference=tt.fromJSON(e.spatialReference)),r}writeSpatialReference(t,e){if(t)return void(e.spatialReference=t.toJSON());const{features:i}=this;if(i){for(const r of i)if(r&&r.geometry!=null&&r.geometry.spatialReference)return void(e.spatialReference=r.geometry.spatialReference.toJSON())}}clone(){return new H7(this.cloneProperties())}cloneProperties(){return he({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(t){const e=this.write();if(e.features&&Array.isArray(t)&&t.length>0)for(let i=0;i<e.features.length;i++){const r=e.features[i];if(r.geometry){const n=t==null?void 0:t[i];r.geometry=(n==null?void 0:n.toJSON())||r.geometry}}return e}quantize(t){const{scale:[e,i],translate:[r,n]}=t,s=c=>Math.round((c-r)/e),a=c=>Math.round((n-c)/i),o=this.features,l=this._getQuantizationFunction(this.geometryType,s,a);for(let c=0,h=o.length;c<h;c++)l!=null&&l(o[c].geometry)||(o.splice(c,1),c--,h--);return this.transform=t,this}unquantize(){var g,v;const{geometryType:t,features:e,transform:i}=this;if(!i)return this;const{translate:[r,n],scale:[s,a]}=i,o=b=>b*s+r,l=b=>n-b*a;let c=null,h=null;if(this.hasZ&&((g=i==null?void 0:i.scale)==null?void 0:g[2])!=null){const{translate:[,,b],scale:[,,x]}=i;c=$=>$*x+b}if(this.hasM&&((v=i==null?void 0:i.scale)==null?void 0:v[3])!=null){const{translate:[,,,b],scale:[,,,x]}=i;h=$=>$==null?$:$*x+b}const m=this._getHydrationFunction(t,o,l,c,h);for(const{geometry:b}of e)b!=null&&m&&m(b);return this.transform=null,this}readFeaturesWithClass(t,e,i){var s;const r=tt.fromJSON(e.spatialReference),n=[];for(let a=0;a<t.length;a++){const o=t[a],l=i.fromJSON(o),c=(s=o.geometry)==null?void 0:s.spatialReference;l.geometry==null||c||(l.geometry.spatialReference=r);const h=o.aggregateGeometries,m=l.aggregateGeometries;if(h&&m!=null)for(const g in m){const v=m[g],b=h[g],x=b==null?void 0:b.spatialReference;v==null||x||(v.spatialReference=r)}n.push(l)}return n}_quantizePoints(t,e,i){let r,n;const s=[];for(let a=0,o=t.length;a<o;a++){const l=t[a];if(a>0){const c=e(l[0]),h=i(l[1]);c===r&&h===n||(s.push([c-r,h-n]),r=c,n=h)}else r=e(l[0]),n=i(l[1]),s.push([r,n])}return s.length>0?s:null}_getQuantizationFunction(t,e,i){return t==="point"?r=>(r.x=e(r.x),r.y=i(r.y),r):t==="polyline"||t==="polygon"?r=>{const n=Un(r)?r.rings:r.paths,s=[];for(let a=0,o=n.length;a<o;a++){const l=n[a],c=this._quantizePoints(l,e,i);c&&s.push(c)}return s.length>0?(Un(r)?r.rings=s:r.paths=s,r):null}:t==="multipoint"?r=>{const n=this._quantizePoints(r.points,e,i);return n&&n.length>0?(r.points=n,r):null}:t==="extent"?r=>r:null}_getHydrationFunction(t,e,i,r,n){return t==="point"?s=>{s.x=e(s.x),s.y=i(s.y),r&&(s.z=r(s.z))}:t==="polyline"||t==="polygon"?s=>{const a=Un(s)?s.rings:s.paths;let o,l;for(let c=0,h=a.length;c<h;c++){const m=a[c];for(let g=0,v=m.length;g<v;g++){const b=m[g];g>0?(o+=b[0],l+=b[1]):(o=b[0],l=b[1]),b[0]=e(o),b[1]=i(l)}}if(r&&n)for(let c=0,h=a.length;c<h;c++){const m=a[c];for(let g=0,v=m.length;g<v;g++){const b=m[g];b[2]=r(b[2]),b[3]=n(b[3])}}else if(r)for(let c=0,h=a.length;c<h;c++){const m=a[c];for(let g=0,v=m.length;g<v;g++){const b=m[g];b[2]=r(b[2])}}else if(n)for(let c=0,h=a.length;c<h;c++){const m=a[c];for(let g=0,v=m.length;g<v;g++){const b=m[g];b[2]=n(b[2])}}}:t==="extent"?s=>{s.xmin=e(s.xmin),s.ymin=i(s.ymin),s.xmax=e(s.xmax),s.ymax=i(s.ymax),r&&s.zmax!=null&&s.zmin!=null&&(s.zmax=r(s.zmax),s.zmin=r(s.zmin)),n&&s.mmax!=null&&s.mmin!=null&&(s.mmax=n(s.mmax),s.mmin=n(s.mmin))}:t==="multipoint"?s=>{const a=s.points;let o,l;for(let c=0,h=a.length;c<h;c++){const m=a[c];c>0?(o+=m[0],l+=m[1]):(o=m[0],l=m[1]),m[0]=e(o),m[1]=i(l)}if(r&&n)for(let c=0,h=a.length;c<h;c++){const m=a[c];m[2]=r(m[2]),m[3]=n(m[3])}else if(r)for(let c=0,h=a.length;c<h;c++){const m=a[c];m[2]=r(m[2])}else if(n)for(let c=0,h=a.length;c<h;c++){const m=a[c];m[2]=n(m[2])}}:null}};d([f({type:String,json:{write:!0}})],zn.prototype,"displayFieldName",void 0),d([f({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],zn.prototype,"exceededTransferLimit",void 0),d([f({type:[sr],json:{write:!0}})],zn.prototype,"features",void 0),d([je("features")],zn.prototype,"readFeatures",null),d([f({type:[Fs],json:{write:!0}})],zn.prototype,"fields",void 0),d([f({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:G7.read}}})],zn.prototype,"geometryType",void 0),d([Ge("geometryType")],zn.prototype,"writeGeometryType",null),d([f({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],zn.prototype,"hasM",void 0),d([f({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],zn.prototype,"hasZ",void 0),d([f({types:jT,json:{write:!0}})],zn.prototype,"queryGeometry",void 0),d([je("queryGeometry")],zn.prototype,"readQueryGeometry",null),d([f({type:tt,json:{write:!0}})],zn.prototype,"spatialReference",void 0),d([Ge("spatialReference")],zn.prototype,"writeSpatialReference",null),d([f({json:{write:!0}})],zn.prototype,"transform",void 0),zn=H7=d([V("esri.rest.support.FeatureSet")],zn),zn.prototype.toJSON.isDefaultToJSON=!0;let mYe=0,um=class extends KZ(qD(Ue)){constructor(e){super(e),this._idToClientGeometry=null,this.type="memory"}load(e){const i=e!=null?e.signal:null;return this.addResolvingPromise(this._startWorker(i)),Promise.resolve(this)}destroy(){var e;(e=this._connection)==null||e.close(),this._connection=null}get _workerGeometryType(){var i;const e=(i=this.layer)==null?void 0:i.geometryType;return e?this._geometryTypeRequiresClientGraphicMapping(e)?"polygon":e:null}applyEdits(e){return this.load().then(()=>this._applyEdits(e))}openPorts(){return this.load().then(()=>this._connection.openPorts())}async queryFeatures(e,i={}){await this.load(i);const r=await this._connection.invoke("queryFeatures",e?e.toJSON():null,i);q7(e,this.layer.spatialReference,r);const n=zn.fromJSON(r);if(!this._requiresClientGraphicMapping()||!this._idToClientGeometry)return n;const s=this.layer.objectIdField;for(const a of n.features){const o=a.attributes[s],l=this._idToClientGeometry.get(o);l!==void 0&&(a.geometry=l)}return n.geometryType=this.layer.geometryType,n}async queryFeaturesJSON(e,i={}){if(this._requiresClientGraphicMapping())throw new ae("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");await this.load(i);const r=await this._connection.invoke("queryFeatures",e?e.toJSON():null,i);return q7(e,this.layer.spatialReference,r),r}queryFeatureCount(e,i={}){return this.load(i).then(()=>this._connection.invoke("queryFeatureCount",e?e.toJSON():null,i))}queryObjectIds(e,i={}){return this.load(i).then(()=>this._connection.invoke("queryObjectIds",e?e.toJSON():null,i))}queryExtent(e,i={}){return this.load(i).then(()=>this._connection.invoke("queryExtent",e?e.toJSON():null,i)).then(r=>({count:r.count,extent:Yt.fromJSON(r.extent)}))}querySnapping(e,i={}){return this.load(i).then(()=>this._connection.invoke("querySnapping",e,i))}async queryAttributeBins(e,i={}){return await this.load(),this._connection.invoke("queryAttributeBins",e==null?void 0:e.toJSON(),i)}async _applyEdits(e){if(!this._connection)throw new ae("feature-layer-source:edit-failure","Memory source not loaded");const i=this.layer.objectIdField;let r=null;const n=[],s=[];await Promise.all([this._prepareClientMapping(e.addFeatures,null),this._prepareClientMapping(e.updateFeatures,null)]);const a=h=>"objectId"in h&&h.objectId!=null?h.objectId:"attributes"in h&&h.attributes[i]!=null?h.attributes[i]:null;if(e.addFeatures&&(r=this._prepareAddFeatures(e.addFeatures)),e.deleteFeatures)for(const h of e.deleteFeatures){const m=a(h);m!=null&&n.push(m)}const o=e.updateFeatures&&this._idToClientGeometry?new Map:null;if(e.updateFeatures){for(const h of e.updateFeatures)if(s.push(this._serializeFeature(h)),o&&h.geometry!=null){const m=a(h);m!=null&&o.set(m,h)}}pYe(r?r.features:null,s,this.layer.spatialReference);const{fullExtent:l,featureEditResults:c}=await this._connection.invoke("applyEdits",{adds:r?r.features:[],updates:s,deletes:n});return this.fullExtent=l,r&&r.finish(c.uidToObjectId),this._updateIdToClientGeometries(o,c),this._createEditsResult(c)}async _prepareClientMapping(e,i){if(this._layerOrSourceGeometryType!=="mesh"||e==null)return;const r=[];for(const{geometry:n}of e)n==null||n.type!=="mesh"||n.hasExtent||n.loaded||r.push(n.load({signal:i}));r.length&&await Promise.all(r)}_updateIdToClientGeometries(e,i){if(this._idToClientGeometry){if(e)for(const r of i.updateResults){if(!r.success)continue;const n=e.get(r.objectId);n!=null&&this._addIdToClientGeometry(n)}for(const r of i.deleteResults)r.success&&this._idToClientGeometry.delete(r.objectId)}}_createEditsResult(e){return{addFeatureResults:e.addResults?e.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:e.updateResults?e.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:e.deleteResults?e.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(e){const i=e.success===!0?null:e.error||{code:void 0,description:""};return{objectId:e.objectId,globalId:e.globalId,error:i?new ae("feature-layer-source:edit-failure",i.description,{code:i.code}):null}}_prepareAddFeatures(e){const i=new Map,r=new Array(e.length);let n=null;for(let a=0;a<e.length;a++){const o=e[a],l=this._serializeFeature(o);n||o.geometry==null||(n=o.geometry.type),r[a]=l,i.set(`${l.uid}`,o)}const s=this;return{features:r,inferredGeometryType:n,finish(a){const o=s.sourceJSON.objectIdField;for(const l in a){const c=a[l],h=i.get(l);h&&(h.attributes||(h.attributes={}),c===-1?delete h.attributes[o]:h.attributes[o]=c,s._addIdToClientGeometry(h))}}}}_addIdToClientGeometry(e){var n;if(!this._idToClientGeometry)return;const i=this.sourceJSON.objectIdField,r=(n=e.attributes)==null?void 0:n[i];r!=null&&this._idToClientGeometry.set(r,e.geometry??null)}get _layerOrSourceGeometryType(){var e,i;return((e=this.layer)==null?void 0:e.geometryType)??((i=this.sourceJSON)==null?void 0:i.geometryType)}_requiresClientGraphicMapping(){return this._geometryTypeRequiresClientGraphicMapping(this._layerOrSourceGeometryType)}_geometryRequiresClientGraphicMapping(e){return this._geometryTypeRequiresClientGraphicMapping(e.type)}_geometryTypeRequiresClientGraphicMapping(e){return e==="mesh"||e==="multipatch"||e==="extent"}_serializeFeature(e){const{attributes:i}=e,r=this._geometryForSerialization(e),n=(mYe++).toString();return r?{uid:n,geometry:r.toJSON(),attributes:i}:{uid:n,attributes:i}}_geometryForSerialization(e){const{geometry:i}=e;return i==null?null:this._geometryRequiresClientGraphicMapping(i)?i.extent?Nr.fromExtent(i.extent):null:i}async _startWorker(e){this._connection=await ZDe("MemorySourceWorker",{strategy:ve("feature-layers-workers")?"dedicated":"local",signal:e,registryTarget:this});const{fields:i,spatialReference:r,objectIdField:n,hasM:s,hasZ:a,timeInfo:o,dateFieldsTimeZone:l}=this.layer,c=this.layer.originOf("spatialReference")==="defaults";await this._prepareClientMapping(this.items,e);const h=this._prepareAddFeatures(this.items);this.addHandles(this.on("before-changes",b=>{Ie.getLogger(this).error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),b.preventDefault()}));const m={features:h.features,fields:i==null?void 0:i.map(b=>b.toJSON()),geometryType:qie.toJSON(this._workerGeometryType),hasM:this._layerOrSourceGeometryType!=="mesh"&&s,hasZ:this._layerOrSourceGeometryType==="mesh"||a,objectIdField:n,spatialReference:c?null:r&&r.toJSON(),timeInfo:(o==null?void 0:o.toJSON())??null,dateFieldsTimeZone:l},g=await this._connection.invoke("load",m,{signal:e});for(const b of g.warnings)Ie.getLogger(this.layer).warn("#load()",`${b.message} (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{warning:b});g.featureErrors.length&&Ie.getLogger(this.layer).warn("#load()",`Encountered ${g.featureErrors.length} validation errors while loading features. (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{errors:g.featureErrors});const v=g.layerDefinition;this._geometryTypeRequiresClientGraphicMapping(h.inferredGeometryType)&&(v.geometryType=qie.toJSON(h.inferredGeometryType)),this.sourceJSON=v,this._requiresClientGraphicMapping()&&(this._idToClientGeometry=new Map),h.finish(g.assignedObjectIds)}};d([CZ({Type:sr,ensureType:Wn(sr)})],um.prototype,"itemType",void 0),d([f()],um.prototype,"type",void 0),d([f({constructOnly:!0})],um.prototype,"layer",void 0),d([f({readOnly:!0})],um.prototype,"_workerGeometryType",null),d([f()],um.prototype,"sourceJSON",void 0),um=d([V("esri.layers.graphics.sources.MemorySource")],um);function gYe(t){return"portalItem"in t}const yYe=t=>{const e=t;let i=class extends e{get apiKey(){var r;return this._isOverridden("apiKey")?this._get("apiKey"):gYe(this)?(r=this.portalItem)==null?void 0:r.apiKey:null}set apiKey(r){r!=null?this._override("apiKey",r):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return d([f({type:String})],i.prototype,"apiKey",null),i=d([V("esri.layers.mixins.APIKeyMixin")],i),i},vYe=t=>{const e=t;let i=class extends e{get title(){if(this._get("title")&&this.originOf("title")!=="defaults")return this._get("title");if(this.url){const r=Np(this.url);if(r!=null&&r.title)return r.title}return this._get("title")||""}set title(r){this._set("title",r)}set url(r){this._set("url",b3e(r,Ie.getLogger(this)))}};return d([f()],i.prototype,"title",null),d([f({type:String})],i.prototype,"url",null),i=d([V("esri.layers.mixins.ArcGISService")],i),i};let Oae=class extends SyntaxError{constructor(e,i,r,n){super(e),this.expected=i,this.found=r,this.location=n,this.name="SyntaxError"}format(e){let i="Error: "+this.message;if(this.location){let r=null;const n=e.find(l=>l.source===this.location.source);n&&(r=n.text.split(/\r\n|\n|\r/g));const s=this.location.start,a=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(s):s,o=this.location.source+":"+a.line+":"+a.column;if(r){const l=this.location.end,c="".padEnd(a.line.toString().length," "),h=r[s.line-1],m=(s.line===l.line?l.column:h.length+1)-s.column||1;i+=`
 --> `+o+`
`+c+` |
`+a.line+" | "+h+`
`+c+" | "+"".padEnd(s.column-1," ")+"".padEnd(m,"^")}else i+=`
 at `+o}return i}static buildMessage(e,i){function r(g){return g.codePointAt(0).toString(16).toUpperCase()}const n=Object.prototype.hasOwnProperty.call(RegExp.prototype,"unicode")?new RegExp("[\\p{C}\\p{Mn}\\p{Mc}]","gu"):null;function s(g){return n?g.replace(n,v=>"\\u{"+r(v)+"}"):g}function a(g){return s(g.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,v=>"\\x0"+r(v)).replace(/[\x10-\x1F\x7F-\x9F]/g,v=>"\\x"+r(v)))}function o(g){return s(g.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,v=>"\\x0"+r(v)).replace(/[\x10-\x1F\x7F-\x9F]/g,v=>"\\x"+r(v)))}const l={literal:g=>'"'+a(g.text)+'"',class(g){const v=g.parts.map(b=>Array.isArray(b)?o(b[0])+"-"+o(b[1]):o(b));return"["+(g.inverted?"^":"")+v.join("")+"]"+(g.unicode?"u":"")},any:()=>"any character",end:()=>"end of input",other:g=>g.description};function c(g){return l[g.type](g)}function h(g){const v=g.map(c);if(v.sort(),v.length>0){let b=1;for(let x=1;x<v.length;x++)v[x-1]!==v[x]&&(v[b]=v[x],b++);v.length=b}switch(v.length){case 1:return v[0];case 2:return v[0]+" or "+v[1];default:return v.slice(0,-1).join(", ")+", or "+v[v.length-1]}}function m(g){return g?'"'+a(g)+'"':"end of input"}return"Expected "+h(e)+" but "+m(i)+" found."}};function bYe(t,e){const i={},r=(e=e!==void 0?e:{}).grammarSource,n={start:z_};let s=z_;const a="none",o=")",l=",",c="(",h="%",m="px",g="cm",v="mm",b="in",x="pt",$="pc",M="deg",k="rad",A="grad",L="turn",z="#",U=".",B="e",X=/^[ \t\n\r]/,J=/^[a-z\-]/,Q=/^[0-9a-fA-F]/,le=/^[+\-]/,ie=/^[0-9]/,re=vr("none"),se=er("none",!1),Te=er(")",!1),ne=er(",",!1),_e=Xd([" ","	",`
`,"\r"],!1,!1,!1),Oe=vr("function"),He=er("(",!1),ft=vr("identifier"),oe=Xd([["a","z"],"-"],!1,!1,!1),ze=vr("percentage"),Ke=er("%",!1),at=vr("length"),kt=er("px",!1),Wt=er("cm",!1),ui=er("mm",!1),Tr=er("in",!1),it=er("pt",!1),Wo=er("pc",!1),ks=vr("angle"),Zo=er("deg",!1),Cc=er("rad",!1),qs=er("grad",!1),ha=er("turn",!1),Hs=vr("number"),E_=vr("color"),Hd=er("#",!1),hg=Xd([["0","9"],["a","f"],["A","F"]],!1,!1,!1),Mu=Xd(["+","-"],!1,!1,!1),pa=Xd([["0","9"]],!1,!1,!1),k_=er(".",!1),A_=er("e",!1);function cs(){return[]}function P_(te,Me){return{type:"function",name:te,parameters:Me||[]}}function Gd(te,Me){return Me.length>0?Qv(te,Me,3):[te]}function O_(te){return{type:"quantity",value:te.value,unit:te.unit}}function Wd(te){return{type:"color",colorType:te.type,value:te.value}}function lI(te){return te}function pg(){return Zs()}function Wv(te){return{value:te,unit:"%"}}function Zv(te){return{value:te,unit:"px"}}function Zd(te){return{value:te,unit:"cm"}}function Gs(te){return{value:te,unit:"mm"}}function po(te){return{value:te,unit:"in"}}function Ws(te){return{value:te,unit:"pt"}}function L_(te){return{value:te,unit:"pc"}}function Zp(te){return{value:te,unit:"deg"}}function Yp(te){return{value:te,unit:"rad"}}function Nl(te){return{value:te,unit:"grad"}}function Jp(te){return{value:te,unit:"turn"}}function Yd(te){return{value:te,unit:null}}function Ec(){return{type:"hex",value:Zs()}}function Jd(te){return{type:"function",value:te}}function Cu(){return{type:"named",value:Zs()}}function F_(){return parseFloat(Zs())}let Ae=0|e.peg$currPos,cr=Ae;const Na=[{line:1,column:1}];let Eu,Da=Ae,Xp=e.peg$maxFailExpected||[],wt=0|e.peg$silentFails;if(e.startRule){if(!(e.startRule in n))throw new Error(`Can't start parsing from rule "`+e.startRule+'".');s=n[e.startRule]}function Zs(){return t.substring(cr,Ae)}function Dl(te=Ae){const Me=t.codePointAt(te);return Me===void 0?"":String.fromCodePoint(Me)}function er(te,Me){return{type:"literal",text:te,ignoreCase:Me}}function Xd(te,Me,Ye,Pt){return{type:"class",parts:te,inverted:Me,ignoreCase:Ye,unicode:Pt}}function kc(){return{type:"end"}}function vr(te){return{type:"other",description:te}}function jr(te){let Me,Ye=Na[te];if(Ye)return Ye;if(te>=Na.length)Me=Na.length-1;else for(Me=te;!Na[--Me];);for(Ye=Na[Me],Ye={line:Ye.line,column:Ye.column};Me<te;)t.charCodeAt(Me)===10?(Ye.line++,Ye.column=1):Ye.column++,Me++;return Na[te]=Ye,Ye}function At(te,Me,Ye){const Pt=jr(te),Ai=jr(Me);return{source:r,start:{offset:te,line:Pt.line,column:Pt.column},end:{offset:Me,line:Ai.line,column:Ai.column}}}function Ut(te){Ae<Da||(Ae>Da&&(Da=Ae,Xp=[]),Xp.push(te))}function R_(te,Me,Ye){return new Oae(Oae.buildMessage(te,Me),te,Me,Ye)}function z_(){let te;return te=N_(),te===i&&(te=jl()),te}function N_(){let te,Me;return wt++,te=Ae,Vr(),t.substr(Ae,4)===a?(Me=a,Ae+=4):(Me=i,wt===0&&Ut(se)),Me!==i?(Vr(),cr=te,te=cs()):(Ae=te,te=i),wt--,te===i&&wt===0&&Ut(re),te}function jl(){let te,Me;if(te=[],Me=ku(),Me!==i)for(;Me!==i;)te.push(Me),Me=ku();else te=i;return te}function ku(){let te,Me,Ye,Pt;return te=Ae,Vr(),Me=Au(),Me!==i?(Vr(),Ye=Qd(),Ye===i&&(Ye=null),Vr(),t.charCodeAt(Ae)===41?(Pt=o,Ae++):(Pt=i,wt===0&&Ut(Te)),Pt!==i?(Vr(),cr=te,te=P_(Me,Ye)):(Ae=te,te=i)):(Ae=te,te=i),te}function Qd(){let te,Me,Ye,Pt,Ai,Ir,br,Wr;if(te=Ae,Me=Ac(),Me!==i){for(Ye=[],Pt=Ae,Ai=Vr(),t.charCodeAt(Ae)===44?(Ir=l,Ae++):(Ir=i,wt===0&&Ut(ne)),Ir===i&&(Ir=null),br=Vr(),Wr=Ac(),Wr!==i?(Ai=[Ai,Ir,br,Wr],Pt=Ai):(Ae=Pt,Pt=i);Pt!==i;)Ye.push(Pt),Pt=Ae,Ai=Vr(),t.charCodeAt(Ae)===44?(Ir=l,Ae++):(Ir=i,wt===0&&Ut(ne)),Ir===i&&(Ir=null),br=Vr(),Wr=Ac(),Wr!==i?(Ai=[Ai,Ir,br,Wr],Pt=Ai):(Ae=Pt,Pt=i);cr=te,te=Gd(Me,Ye)}else Ae=te,te=i;return te}function Ac(){let te,Me;return te=Ae,Me=Yv(),Me===i&&(Me=Jv(),Me===i&&(Me=Yo(),Me===i&&(Me=Pu()))),Me!==i&&(cr=te,Me=O_(Me)),te=Me,te===i&&(te=Ae,Me=Xv(),Me!==i&&(cr=te,Me=Wd(Me)),te=Me),te}function Vr(){let te,Me;for(wt++,te=[],Me=t.charAt(Ae),X.test(Me)?Ae++:(Me=i,wt===0&&Ut(_e));Me!==i;)te.push(Me),Me=t.charAt(Ae),X.test(Me)?Ae++:(Me=i,wt===0&&Ut(_e));return wt--,te}function Au(){let te,Me,Ye;return wt++,te=Ae,Me=hn(),Me!==i?(t.charCodeAt(Ae)===40?(Ye=c,Ae++):(Ye=i,wt===0&&Ut(He)),Ye!==i?(cr=te,te=Me):(Ae=te,te=i)):(Ae=te,te=i),wt--,te===i&&(Me=i,wt===0&&Ut(Oe)),te}function hn(){let te,Me,Ye;if(wt++,te=Ae,Me=[],Ye=t.charAt(Ae),J.test(Ye)?Ae++:(Ye=i,wt===0&&Ut(oe)),Ye!==i)for(;Ye!==i;)Me.push(Ye),Ye=t.charAt(Ae),J.test(Ye)?Ae++:(Ye=i,wt===0&&Ut(oe));else Me=i;return Me!==i&&(cr=te,Me=pg()),te=Me,wt--,te===i&&(Me=i,wt===0&&Ut(ft)),te}function Yv(){let te,Me,Ye;return wt++,te=Ae,Vr(),Me=Ys(),Me!==i?(t.charCodeAt(Ae)===37?(Ye=h,Ae++):(Ye=i,wt===0&&Ut(Ke)),Ye!==i?(cr=te,te=Wv(Me)):(Ae=te,te=i)):(Ae=te,te=i),wt--,te===i&&wt===0&&Ut(ze),te}function Jv(){let te,Me,Ye;return wt++,te=Ae,Vr(),Me=Ys(),Me!==i?(t.substr(Ae,2)===m?(Ye=m,Ae+=2):(Ye=i,wt===0&&Ut(kt)),Ye!==i?(cr=te,te=Zv(Me)):(Ae=te,te=i)):(Ae=te,te=i),te===i&&(te=Ae,Vr(),Me=Ys(),Me!==i?(t.substr(Ae,2)===g?(Ye=g,Ae+=2):(Ye=i,wt===0&&Ut(Wt)),Ye!==i?(cr=te,te=Zd(Me)):(Ae=te,te=i)):(Ae=te,te=i),te===i&&(te=Ae,Vr(),Me=Ys(),Me!==i?(t.substr(Ae,2)===v?(Ye=v,Ae+=2):(Ye=i,wt===0&&Ut(ui)),Ye!==i?(cr=te,te=Gs(Me)):(Ae=te,te=i)):(Ae=te,te=i),te===i&&(te=Ae,Vr(),Me=Ys(),Me!==i?(t.substr(Ae,2)===b?(Ye=b,Ae+=2):(Ye=i,wt===0&&Ut(Tr)),Ye!==i?(cr=te,te=po(Me)):(Ae=te,te=i)):(Ae=te,te=i),te===i&&(te=Ae,Vr(),Me=Ys(),Me!==i?(t.substr(Ae,2)===x?(Ye=x,Ae+=2):(Ye=i,wt===0&&Ut(it)),Ye!==i?(cr=te,te=Ws(Me)):(Ae=te,te=i)):(Ae=te,te=i),te===i&&(te=Ae,Vr(),Me=Ys(),Me!==i?(t.substr(Ae,2)===$?(Ye=$,Ae+=2):(Ye=i,wt===0&&Ut(Wo)),Ye!==i?(cr=te,te=L_(Me)):(Ae=te,te=i)):(Ae=te,te=i)))))),wt--,te===i&&wt===0&&Ut(at),te}function Yo(){let te,Me,Ye;return wt++,te=Ae,Me=Ys(),Me!==i?(t.substr(Ae,3)===M?(Ye=M,Ae+=3):(Ye=i,wt===0&&Ut(Zo)),Ye!==i?(cr=te,te=Zp(Me)):(Ae=te,te=i)):(Ae=te,te=i),te===i&&(te=Ae,Me=Ys(),Me!==i?(t.substr(Ae,3)===k?(Ye=k,Ae+=3):(Ye=i,wt===0&&Ut(Cc)),Ye!==i?(cr=te,te=Yp(Me)):(Ae=te,te=i)):(Ae=te,te=i),te===i&&(te=Ae,Me=Ys(),Me!==i?(t.substr(Ae,4)===A?(Ye=A,Ae+=4):(Ye=i,wt===0&&Ut(qs)),Ye!==i?(cr=te,te=Nl(Me)):(Ae=te,te=i)):(Ae=te,te=i),te===i&&(te=Ae,Me=Ys(),Me!==i?(t.substr(Ae,4)===L?(Ye=L,Ae+=4):(Ye=i,wt===0&&Ut(ha)),Ye!==i?(cr=te,te=Jp(Me)):(Ae=te,te=i)):(Ae=te,te=i)))),wt--,te===i&&(Me=i,wt===0&&Ut(ks)),te}function Pu(){let te,Me;return wt++,te=Ae,Vr(),Me=Ys(),Me!==i?(cr=te,te=Yd(Me)):(Ae=te,te=i),wt--,te===i&&wt===0&&Ut(Hs),te}function Xv(){let te,Me,Ye,Pt;if(wt++,te=Ae,t.charCodeAt(Ae)===35?(Me=z,Ae++):(Me=i,wt===0&&Ut(Hd)),Me!==i){if(Ye=[],Pt=t.charAt(Ae),Q.test(Pt)?Ae++:(Pt=i,wt===0&&Ut(hg)),Pt!==i)for(;Pt!==i;)Ye.push(Pt),Pt=t.charAt(Ae),Q.test(Pt)?Ae++:(Pt=i,wt===0&&Ut(hg));else Ye=i;Ye!==i?(cr=te,te=Ec()):(Ae=te,te=i)}else Ae=te,te=i;return te===i&&(te=Ae,Me=ku(),Me!==i&&(cr=te,Me=Jd(Me)),te=Me,te===i&&(te=Ae,Me=hn(),Me!==i&&(cr=te,Me=Cu()),te=Me)),wt--,te===i&&(Me=i,wt===0&&Ut(E_)),te}function Ys(){let te,Me,Ye,Pt,Ai,Ir,br,Wr;for(te=Ae,Me=t.charAt(Ae),le.test(Me)?Ae++:(Me=i,wt===0&&Ut(Mu)),Me===i&&(Me=null),Ye=Ae,Pt=[],Ai=t.charAt(Ae),ie.test(Ai)?Ae++:(Ai=i,wt===0&&Ut(pa));Ai!==i;)Pt.push(Ai),Ai=t.charAt(Ae),ie.test(Ai)?Ae++:(Ai=i,wt===0&&Ut(pa));if(t.charCodeAt(Ae)===46?(Ai=U,Ae++):(Ai=i,wt===0&&Ut(k_)),Ai!==i){if(Ir=[],br=t.charAt(Ae),ie.test(br)?Ae++:(br=i,wt===0&&Ut(pa)),br!==i)for(;br!==i;)Ir.push(br),br=t.charAt(Ae),ie.test(br)?Ae++:(br=i,wt===0&&Ut(pa));else Ir=i;Ir!==i?(Pt=[Pt,Ai,Ir],Ye=Pt):(Ae=Ye,Ye=i)}else Ae=Ye,Ye=i;if(Ye===i)if(Ye=[],Pt=t.charAt(Ae),ie.test(Pt)?Ae++:(Pt=i,wt===0&&Ut(pa)),Pt!==i)for(;Pt!==i;)Ye.push(Pt),Pt=t.charAt(Ae),ie.test(Pt)?Ae++:(Pt=i,wt===0&&Ut(pa));else Ye=i;if(Ye!==i){if(Pt=Ae,t.charCodeAt(Ae)===101?(Ai=B,Ae++):(Ai=i,wt===0&&Ut(A_)),Ai!==i){if(Ir=t.charAt(Ae),le.test(Ir)?Ae++:(Ir=i,wt===0&&Ut(Mu)),Ir===i&&(Ir=null),br=[],Wr=t.charAt(Ae),ie.test(Wr)?Ae++:(Wr=i,wt===0&&Ut(pa)),Wr!==i)for(;Wr!==i;)br.push(Wr),Wr=t.charAt(Ae),ie.test(Wr)?Ae++:(Wr=i,wt===0&&Ut(pa));else br=i;br!==i?(Ai=[Ai,Ir,br],Pt=Ai):(Ae=Pt,Pt=i)}else Ae=Pt,Pt=i;Pt===i&&(Pt=null),cr=te,te=F_()}else Ae=te,te=i;return te}function D_(te,Me){return te.map(function(Ye){return Ye[Me]})}function Qv(te,Me,Ye){return[te].concat(D_(Me,Ye))}Eu=s();const Kd=Eu!==i&&Ae===t.length;function Ou(){throw Eu!==i&&Ae<t.length&&Ut(kc()),R_(Xp,Da<t.length?Dl(Da):null,Da<t.length?At(Da,Da+1):At(Da,Da))}return e.peg$library?{peg$result:Eu,peg$currPos:Ae,peg$FAILED:i,peg$maxFailExpected:Xp,peg$maxFailPos:Da,peg$success:Kd,peg$throw:Kd?void 0:Ou}:Kd?Eu:void Ou()}function HY(t){if(!t||t.length===0)return null;if(typeof t=="string"){const i=Lae(t);return i&&i.length!==0?i:null}const e=t.map(i=>{if(!Number.isFinite(i.scale)||i.scale<=0)throw new ae("effect:invalid-scale","scale must be finite and greater than 0",{stop:i});return{scale:i.scale,effects:Lae(i.value)}});e.sort((i,r)=>r.effects.length-i.effects.length);for(let i=0;i<e.length-1;i++){if(!hbe(e[i].effects,e[i+1].effects))throw new ae("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:e[i].effects,b:e[i+1].effects});pbe(e[i].effects,e[i+1].effects)}return e.sort((i,r)=>r.scale-i.scale),e}function Lae(t){let e;if(!t)return[];try{e=bYe(t)}catch(i){throw new ae("effect:invalid-syntax","Invalid effect syntax",{value:t,error:i})}return e.map(i=>wYe(i))}function wYe(t){try{switch(t.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return _Ye(t);case"opacity":return xYe(t);case"hue-rotate":return $Ye(t);case"blur":return SYe(t);case"drop-shadow":return TYe(t);case"bloom":return IYe(t)}}catch(e){throw e.details.filter=t,e}throw new ae("effect:unknown-effect",`Effect '${t.name}' is not supported`,{effect:t})}function _Ye(t){let e=1;return XT(t.parameters,1),t.parameters.length===1&&(e=yd(t.parameters[0])),new _9(t.name,e)}function xYe(t){let e=1;return XT(t.parameters,1),t.parameters.length===1&&(e=yd(t.parameters[0])),new ube(e)}function $Ye(t){let e=0;return XT(t.parameters,1),t.parameters.length===1&&(e=PYe(t.parameters[0])),new lbe(e)}function SYe(t){let e=0;return XT(t.parameters,1),t.parameters.length===1&&(e=ZY(t.parameters[0]),Xk(e,t.parameters[0])),new rbe(e)}function TYe(t){const e=[];let i=null;for(const r of t.parameters)if(r.type==="color"){if(e.length&&Object.freeze(e),i)throw new ae("effect:type-error","Accepts only one color",{});i=OYe(r)}else{const n=ZY(r);if(Object.isFrozen(e))throw new ae("effect:type-error","<length> parameters not consecutive",{lengths:e});e.push(n),e.length===3&&Xk(n,r)}if(e.length<2||e.length>3)throw new ae("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${e.length}}`,{lengths:e});return new abe(e[0],e[1],e[2]||0,i||u1e("black"))}function IYe(t){let e=1,i=0,r=0;return XT(t.parameters,3),t.parameters[0]&&(e=yd(t.parameters[0])),t.parameters[1]&&(i=ZY(t.parameters[1]),Xk(i,t.parameters[1])),t.parameters[2]&&(r=yd(t.parameters[2])),new tbe(e,i,r)}function XT(t,e){if(t.length>e)throw new ae("effect:type-error",`Function supports up to ${e} parameters, Actual: ${t.length}`,{parameters:t})}function m5(t){if(t.type==="color")return"<color>";if(t.unit){if(t.unit in WY)return"<length>";if(t.unit in GY)return"<angle>";if(t.unit==="%")return"<percentage>"}return"<double>"}function Xk(t,e){if(t<0)throw new ae("effect:type-error",`Negative values are not allowed, Actual: ${t}`,{term:e})}function MYe(t){if(t.type!=="quantity"||t.unit!==null)throw new ae("effect:type-error",`Expected <double>, Actual: ${m5(t)}`,{term:t})}function CYe(t){if(t.type!=="quantity"||t.unit!==null&&t.unit!=="%")throw new ae("effect:type-error",`Expected <double> or <percentage>, Actual: ${m5(t)}`,{term:t})}const GY={deg:1,grad:.9,rad:180/Math.PI,turn:360};function EYe(t){if(t.type!=="quantity"||!(t.value===0&&t.unit===null||t.unit&&GY[t.unit]!=null))throw new ae("effect:type-error",`Expected <angle>, Actual: ${m5(t)}`,{term:t})}const WY={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function kYe(t){if(t.type!=="quantity"||!(t.value===0&&t.unit===null||t.unit&&WY[t.unit]!=null))throw new ae("effect:type-error",`Expected <length>, Actual: ${m5(t)}`,{term:t})}function yd(t){CYe(t);const e=t.value;return Xk(e,t),t.unit==="%"?.01*e:e}function AYe(t){return MYe(t),Xk(t.value,t),t.value}function PYe(t){return EYe(t),t.value*GY[t.unit]||0}function ZY(t){return kYe(t),t.value*WY[t.unit]||0}function OYe(t){switch(t.colorType){case"hex":return J4e(t.value);case"named":return u1e(t.value);case"function":return RYe(t.value)}}function u1e(t){if(!Rve(t))throw new ae("effect:unknown-color",`color '${t}' isn't valid`,{namedColor:t});return Y4e(t)}const LYe=/^rgba?/i,FYe=/^hsla?/i;function RYe(t){if(XT(t.parameters,4),LYe.test(t.name))return[yd(t.parameters[0]),yd(t.parameters[1]),yd(t.parameters[2]),t.parameters[3]?yd(t.parameters[3]):1];if(FYe.test(t.name))return zve(AYe(t.parameters[0]),yd(t.parameters[1]),yd(t.parameters[2]),t.parameters[3]?yd(t.parameters[3]):1);throw new ae("effect:syntax-error",`Invalid color function '${t.name}'`,{colorFunction:t})}function kE(t,e,i){var r;try{return NYe(t)}catch(n){(r=i==null?void 0:i.messages)==null||r.push(n)}return null}function AE(t,e,i,r){try{const n=zYe(t);qn(i,n,e)}catch(n){r.messages&&r.messages.push(n)}}function zYe(t){const e=HY(t);return e?b6e(e)?e.map(i=>i.toJSON()):e.map(({scale:i,effects:r})=>({scale:i,value:r.map(n=>n.toJSON())})):null}function NYe(t){if(!t||t.length===0)return null;if(DYe(t)){const e=[];for(const i of t)e.push({scale:i.scale,value:W7(i.value)});return e}return W7(t)}function DYe(t){const e=t[0];return!!e&&"scale"in e}function W7(t){if(!(t!=null&&t.length))return"";const e=[];for(const i of t){let r=[];switch(i.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":r=[Mf(i,"amount")];break;case"blur":r=[Mf(i,"radius","pt")];break;case"hue-rotate":r=[Mf(i,"angle","deg")];break;case"drop-shadow":r=[Mf(i,"xoffset","pt"),Mf(i,"yoffset","pt"),Mf(i,"blurRadius","pt"),jYe(i,"color")];break;case"bloom":r=[Mf(i,"strength"),Mf(i,"radius","pt"),Mf(i,"threshold")]}const n=`${i.type}(${r.filter(Boolean).join(" ")})`;HY(n),e.push(n)}return e.join(" ")}function Mf(t,e,i){if(t[e]==null)throw new ae("effect:missing-parameter",`Missing parameter '${e}' in ${t.type} effect`,{effect:t});return i?t[e]+i:""+t[e]}function jYe(t,e){if(t[e]==null)throw new ae("effect:missing-parameter",`Missing parameter '${e}' in ${t.type} effect`,{effect:t});const i=t[e];return`rgba(${i[0]||0}, ${i[1]||0}, ${i[2]||0}, ${i[3]/255||0})`}const VYe={type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:{layerContainerTypes:Lr}},"portal-item":{read:!0,write:{layerContainerTypes:Lr}}}}},Fae={read:{reader:kE},write:{allowNull:!0,writer:AE,layerContainerTypes:Lr}},UYe={json:{read:!1,write:!1,origins:{"web-map":Fae,"portal-item":Fae}}},BYe=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return d([f(VYe)],i.prototype,"blendMode",void 0),d([f(UYe)],i.prototype,"effect",void 0),i=d([V("esri.layers.mixins.BlendLayer")],i),i},qYe=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.customParameters=null}};return d([f({type:Object,json:{write:{overridePolicy:r=>({enabled:!!(r&&Object.keys(r).length>0)})}}})],i.prototype,"customParameters",void 0),i=d([V("esri.layers.mixins.CustomParametersMixin")],i),i},d1e=96;function s2t(t,e){const i=t.extent,r=t.width,n=$u(i==null?void 0:i.spatialReference);return i&&r?i.width/r*n*nme*d1e:0}function a2t(t,e){return t/($u(e)*nme*d1e)}function HYe(t,e,i){return GYe(t,e)&&WYe(t,i)}function GYe(t,e){return e===0||xc(t,e)||t<e}function WYe(t,e){return e===0||xc(t,e)||t>e}function ZYe(t,e){return xc(t,e)?0:(t||Number.POSITIVE_INFINITY)>(e||Number.POSITIVE_INFINITY)?1:-1}const Rae={write:{overridePolicy:(t,e,i)=>({enabled:!i||i.filterMode==="scale"})}};let dm=class extends bt($e){constructor(e){super(e),this.id=ZT(),this.maxScale=0,this.minScale=0,this.title="",this.where=null}};d([f({type:String,json:{write:!0}})],dm.prototype,"id",void 0),d([f({type:Number,json:Rae})],dm.prototype,"maxScale",void 0),d([f({type:Number,json:Rae})],dm.prototype,"minScale",void 0),d([f({type:String,json:{write:!0}})],dm.prototype,"title",void 0),d([f({type:String,json:{write:!0}})],dm.prototype,"where",void 0),dm=d([V("esri.layers.support.DisplayFilter")],dm);function YYe(t,e){return{...e,filterMode:t.mode}}function JYe(t,e){return h1e(t,e).next().value??null}function l2t(t,e,i){const r=XYe(t);if(r&&(ife(e,r[0])||u8(i,r[1])))return"";const n=Array.from(h1e(t,e,i)),s=QYe(n,e,i)?"1=1":n.map(a=>a.where||"1=1").reduce((a,o)=>S9(a,o),"");return s&&s!=="1=1"?s:""}function XYe(t){if(p1e(t)==="manual")return null;const e=[Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY];for(const{minScale:i,maxScale:r}of t.filters)e[0]=Math.max(e[0],PE(i)),e[1]=Math.min(e[1],JR(r));return e}function*h1e(t,e,i){if(p1e(t)==="manual"){const r=t.filters.find(n=>n.id===t.activeFilterId);r&&(yield r)}else{typeof e=="object"&&(e=e.scale);for(const r of t.filters)KYe(r.minScale,r.maxScale,e,i)&&(yield r)}}function QYe(t,e,i){var s,a;if(t.length===0)return!0;const r=PE((s=t.at(0))==null?void 0:s.minScale),n=JR((a=t.at(-1))==null?void 0:a.maxScale);if(u8(r,e)||ife(n,i))return!0;for(let o=0;o<t.length-1;o++){const l=t[o],c=t[o+1];if(u8(PE(c.minScale),JR(l.maxScale)))return!0}return!1}function KYe(t,e,i,r){return t=PE(t),i=PE(i),e=JR(e),!(!xc(i,t)&&(r??i)>t)&&!wOe(e,i)&&(r===void 0||!xc(r,t))}function p1e(t){return"mode"in t?t.mode:t.filterMode}function PE(t){return t||Number.POSITIVE_INFINITY}function JR(t){return t||0}let u0=class extends bt($e){constructor(e){super(e),this.activeFilterId=null,this.filters=new(Ue.ofType(dm)),this.mode="manual"}writeFilters(e,i,r,n){const s=e.toArray();this.mode==="scale"&&s.sort((a,o)=>{const l=ZYe(o.minScale,a.minScale),c=a.maxScale-o.maxScale;return l===0?c:l}),i[r]=s.map(a=>a.toJSON(n))}write(e,i){return super.write(e,YYe(this,i))}};d([f({type:String,json:{write:{overridePolicy:(t,e,i)=>({enabled:i.filterMode==="manual",isRequired:!0})}}})],u0.prototype,"activeFilterId",void 0),d([f({type:Ue.ofType(dm),nonNullable:!0,json:{write:!0}})],u0.prototype,"filters",void 0),d([Ge("filters")],u0.prototype,"writeFilters",null),d([f({type:["manual","scale"],nonNullable:!0,json:{name:"filterMode",write:!0}})],u0.prototype,"mode",void 0),u0=d([V("esri.layers.support.DisplayFilterInfo")],u0);const eJe=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.displayFilterEnabled=!0,this.displayFilterInfo=null}};return d([f(tJe)],i.prototype,"displayFilterEnabled",void 0),d([f(iJe)],i.prototype,"displayFilterInfo",void 0),i=d([V("esri.layers.mixins.DisplayFilteredLayer")],i),i},tJe={type:Boolean,json:{name:"layerDefinition.disableDisplayFilter",read:{reader:t=>!t},write:{layerContainerTypes:Lr,writer(t,e,i){qn(i,!t,e)}},origins:{"web-scene":{write:!1,read:!1}}}},iJe={type:u0,json:{name:"layerDefinition.displayFilterInfo",write:{enabled:!0,allowNull:!0,layerContainerTypes:Lr},origins:{"web-scene":{write:!1,read:!1}}}},Z7=K4e(),f1e=new Map,m1e=new Map;async function u2t(t,e,i){if(!t||!i)return!1;if(!e)return!0;const r=new URL(t).host;let n=f1e.get(r);if(!n){const s=t.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,"");n=(await mi(s,{responseType:"json",query:{f:"json"}})).data.defaultVersionName}return n===e}async function zae(t,e,i=!1){var s,a,o;if(!t||!e)return!0;const r=t.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),n=(s=m1e.get(r))==null?void 0:s.entries();if(n){for(const[l,c]of n)if(c.name===e){const h=!((a=c.stack)!=null&&a.hasForwardEdits());if(!h&&i){const[{deleteForwardEdits:m},{default:g}]=await Promise.all([de(()=>import("./deleteForwardEdits-1SZM1HZg.js"),[]),de(()=>import("./DeleteForwardEditsParameters-CKUAXie5.js"),[])]),v=await m(r,l,new g({sessionId:Z7,moment:c.moment}));return v.success&&((o=c.stack)==null||o.clearForwardEdits()),v.success}return h}}return!0}function HL(t,e){var n;if(!t)return!1;const i=t.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),r=(n=m1e.get(i))==null?void 0:n.entries();if(r){for(const[s,a]of r)if(a.name===e)return a.lockType==="edit"}return!1}const YY=new cge;function g1e(t){return YY.on("apply-edits",new WeakRef(t))}function y1e(t){return YY.on("update-moment",new WeakRef(t))}function Nae(t,e,i=null,r=!1){const n=Fl();return r=e==null||r,YY.emit("apply-edits",{serviceUrl:t,layerId:e,gdbVersion:i,mayReceiveServiceEdits:r,result:n.promise}),n}const v1e=Symbol();function d2t(t){return t!=null&&typeof t=="object"&&v1e in t}function CM(t){return t!=null&&typeof t=="object"&&"gdbVersion"in t}function O2(t,e,i){const r=new URL(t).host,n=f1e.get(r),s=a=>!a||a===n;return s(e)&&s(i)||e===i}const rJe=t=>{var n;var e;const i=t;let r=(n=class extends i{constructor(...s){super(...s),this[e]=!0,this._applyEditsHandler=a=>{const{serviceUrl:o,layerId:l,gdbVersion:c,mayReceiveServiceEdits:h,result:m}=a,g=o===this.url,v=l!=null&&this.layerId!=null&&l===this.layerId,b=CM(this),x=CM(this)&&O2(o,c,this.gdbVersion);if(!g||b&&!x||!v&&!h)return;const $=m.then(M=>{var L;if(this.lastEditsEventDate=new Date,v&&(M.addedFeatures.length||M.updatedFeatures.length||M.deletedFeatures.length||M.addedAttachments.length||M.updatedAttachments.length||M.deletedAttachments.length))return this.emit("edits",he(M)),M;const k=(L=M.editedFeatures)==null?void 0:L.find(({layerId:z})=>z===this.layerId);if(k){const{adds:z,updates:U,deletes:B}=k.editedFeatures,X={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:z?z.map(({attributes:J})=>({objectId:this.objectIdField&&J[this.objectIdField],globalId:this.globalIdField&&J[this.globalIdField]})):[],deletedFeatures:B?B.map(({attributes:J})=>({objectId:this.objectIdField&&J[this.objectIdField],globalId:this.globalIdField&&J[this.globalIdField]})):[],updatedFeatures:U?U.map(({current:{attributes:J}})=>({objectId:this.objectIdField&&J[this.objectIdField],globalId:this.globalIdField&&J[this.globalIdField]})):[],editedFeatures:he(M.editedFeatures),exceededTransferLimit:!1,historicMoment:he(M.historicMoment)};return this.emit("edits",X),X}const A={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:[],deletedFeatures:[],updatedFeatures:[],editedFeatures:he(M.editedFeatures),exceededTransferLimit:!1,historicMoment:he(M.historicMoment)};return"historicMoment"in this&&this._shouldUpdateHistoricMoment(o,c,A.historicMoment)&&this.emit("edits",A),A}).then(M=>("historicMoment"in this&&this._shouldUpdateHistoricMoment(o,c,M.historicMoment)&&(this.historicMoment=M.historicMoment),M));this.emit("apply-edits",{result:$})},this._updateMomentHandler=a=>{const{serviceUrl:o,gdbVersion:l,moment:c}=a,h=o===this.url,m=CM(this),g=CM(this)&&O2(o,l,this.gdbVersion),v=CM(this)&&!O2(o,this.gdbVersion,null);h&&m&&g&&v&&"historicMoment"in this&&this.historicMoment!==c&&(this.historicMoment=c)},this.when().then(()=>{this.addHandles(g1e(this._applyEditsHandler)),"historicMoment"in this&&this.addHandles(y1e(this._updateMomentHandler))},()=>{})}_shouldUpdateHistoricMoment(s,a,o){return"historicMoment"in this&&this.historicMoment!==o&&HL(s,a)}},e=v1e,n);return d([f()],r.prototype,"lastEditsEventDate",void 0),r=d([V("esri.layers.mixins.EditBusLayer")],r),r};var Y7;const Q6=new jt({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),K6=new jt({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let Mh=Y7=class extends $e{constructor(t){super(t),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(t={}){const{where:e,geometry:i,spatialRelationship:r,timeExtent:n,objectIds:s,units:a,distance:o}=this;return new mt({geometry:he(i),objectIds:he(s),spatialRelationship:r,timeExtent:he(n),where:e,units:a,distance:o,...t})}clone(){const{where:t,geometry:e,spatialRelationship:i,timeExtent:r,objectIds:n,units:s,distance:a}=this;return new Y7({geometry:he(e),objectIds:he(n),spatialRelationship:i,timeExtent:he(r),where:t,units:s,distance:a})}};d([f({type:String,json:{write:!0}})],Mh.prototype,"where",void 0),d([f({types:jT,json:{write:!0}})],Mh.prototype,"geometry",void 0),d([f({type:Q6.apiValues,json:{name:"spatialRel",read:{reader:Q6.read},write:{allowNull:!1,writer:Q6.write,overridePolicy(){return{enabled:this.geometry!=null}}}}})],Mh.prototype,"spatialRelationship",void 0),d([f({type:Number,json:{write:{overridePolicy(t){return{enabled:t!=null&&this.geometry!=null}}}}})],Mh.prototype,"distance",void 0),d([f({type:[Number],json:{write:!0}})],Mh.prototype,"objectIds",void 0),d([f({type:K6.apiValues,json:{read:K6.read,write:{writer:K6.write,overridePolicy(t){return{enabled:t!=null&&this.geometry!=null}}}}})],Mh.prototype,"units",void 0),d([f({type:Ji,json:{write:!0}})],Mh.prototype,"timeExtent",void 0),Mh=Y7=d([V("esri.layers.support.FeatureFilter")],Mh);const nJe=Mh;var J7;const Dae={read:{reader:kE},write:{writer:AE,overridePolicy(){return{allowNull:this.excludedEffect!=null,isRequired:this.excludedEffect==null}}}},jae={read:{reader:kE},write:{writer:AE,overridePolicy(){return{allowNull:this.includedEffect!=null,isRequired:this.includedEffect==null}}}},Vae={name:"showExcludedLabels",default:!0};let d0=J7=class extends $e{constructor(t){super(t),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}write(t,e){var r,n;const i=super.write(t,e);if(e!=null&&e.origin){if(i.filter){const s=Object.keys(i.filter);if(s.length>1||s[0]!=="where")return(r=e.messages)==null||r.push(new ae("web-document-write:unsupported-feature-effect","Invalid feature effect 'filter'. A filter can only contain a 'where' property",{layer:e.layer,effect:this})),null}if("showExcludedLabels"in i)return(n=e.messages)==null||n.push(new ae("web-document-write:unsupported-feature-effect","Invalid value for property 'excludedLabelsVisible' which should always be 'true'",{layer:e.layer,effect:this})),null}return i}clone(){return new J7({filter:this.filter!=null?this.filter.clone():null,includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};d([f({type:nJe,json:{write:{allowNull:!0,writer(t,e,i,r){const n=t==null?void 0:t.write({},r);n&&Object.keys(n).length!==0?qn(i,n,e):qn(i,null,e)}}}})],d0.prototype,"filter",void 0),d([f({json:{read:kE,write:{writer:AE,allowNull:!0},origins:{"web-map":Dae,"portal-item":Dae}}})],d0.prototype,"includedEffect",void 0),d([f({json:{read:kE,write:{writer:AE,allowNull:!0},origins:{"web-map":jae,"portal-item":jae}}})],d0.prototype,"excludedEffect",void 0),d([f({type:Boolean,json:{write:!0,name:"showExcludedLabels",origins:{"web-map":Vae,"portal-item":Vae}}})],d0.prototype,"excludedLabelsVisible",void 0),d0=J7=d([V("esri.layers.support.FeatureEffect")],d0);const Uae={write:{allowNull:!0}},sJe={type:d0,json:{origins:{"web-map":Uae,"portal-item":Uae}}},aJe=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.featureEffect=null}};return d([f(sJe)],i.prototype,"featureEffect",void 0),i=d([V("esri.layers.mixins.FeatureEffectLayer")],i),i};var X7;let CC=X7=class extends $e{constructor(t){super(t),this.expression=void 0,this.title=void 0}async collectRequiredFields(t,e){return za(t,e,null,this.expression)}clone(){return new X7({expression:this.expression,title:this.title})}equals(t){return this.expression===t.expression&&this.title===t.title}};d([f({type:String,json:{write:{isRequired:!0}}})],CC.prototype,"expression",void 0),d([f({type:String,json:{write:!0}})],CC.prototype,"title",void 0),CC=X7=d([V("esri.symbols.support.FeatureExpressionInfo")],CC);const Bae=CC,g5={unknown:1,inches:Ni(1,"meters","inches"),feet:Ni(1,"meters","feet"),"us-feet":Ni(1,"meters","us-feet"),yards:Ni(1,"meters","yards"),miles:Ni(1,"meters","miles"),"nautical-miles":Ni(1,"meters","nautical-miles"),millimeters:Ni(1,"meters","millimeters"),centimeters:Ni(1,"meters","centimeters"),decimeters:Ni(1,"meters","decimeters"),meters:Ni(1,"meters","meters"),kilometers:Ni(1,"meters","kilometers"),"decimal-degrees":1/_Le(1,"meters",Mn.radius)};function h2t(t){return!!t&&g5[t]!=null}function p2t(t){return 1/(g5[t]||1)}function oJe(){const t=Object.keys(g5);return TW(t,"decimal-degrees"),t.sort(),t}const lJe=oJe(),$O=Es()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),qae=new jt({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let Qf=class extends bt($e){constructor(e){super(e),this.featureExpressionInfo=void 0,this.offset=null}readFeatureExpressionInfo(e,i){return e!=null?e.expression?e:void 0:i.featureExpression&&i.featureExpression.value===0?{expression:"0"}:void 0}writeFeatureExpressionInfo(e,i,r,n){i[r]=e.write({},n),e.expression==="0"&&(i.featureExpression={value:0})}get mode(){const{offset:e,featureExpressionInfo:i}=this;return this._isOverridden("mode")?this._get("mode"):e!=null||i?"relative-to-ground":"on-the-ground"}set mode(e){this._override("mode",e)}set unit(e){this._set("unit",e)}write(e,i){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(e,i):null}equals(e){return this.mode===e.mode&&this.offset===e.offset&&this.unit===e.unit&&EAe(this.featureExpressionInfo,e.featureExpressionInfo)}};d([f({type:Bae,json:{write:!0}})],Qf.prototype,"featureExpressionInfo",void 0),d([je("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],Qf.prototype,"readFeatureExpressionInfo",null),d([Ge("featureExpressionInfo",{featureExpressionInfo:{type:Bae},"featureExpression.value":{type:[0]}})],Qf.prototype,"writeFeatureExpressionInfo",null),d([f({type:$O.apiValues,nonNullable:!0,json:{type:$O.jsonValues,read:$O.read,write:{writer:$O.write,isRequired:!0}}})],Qf.prototype,"mode",null),d([f({type:Number,json:{write:!0}})],Qf.prototype,"offset",void 0),d([f({type:lJe,json:{type:String,read:qae.read,write:qae.write}})],Qf.prototype,"unit",null),Qf=d([V("esri.symbols.support.ElevationInfo")],Qf);let Wx=class extends $e{constructor(e){super(e),this.description=null,this.label=null,this.type=null}};d([f({type:String,json:{write:!0}})],Wx.prototype,"description",void 0),d([f({type:String,json:{write:!0}})],Wx.prototype,"label",void 0),d([f()],Wx.prototype,"type",void 0),Wx=d([V("esri.tables.elements.AttributeTableElement")],Wx);const QT=Wx;let EC=class extends bt(QT){constructor(e){super(e),this.displayType="auto",this.type="attachment"}clone(){return super.clone()}};d([f({type:["auto"],json:{write:!0}})],EC.prototype,"displayType",void 0),d([f({type:["attachment"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],EC.prototype,"type",void 0),EC=d([V("esri.tables.elements.AttributeTableAttachmentElement")],EC);const b1e=EC;let h0=class extends bt(QT){constructor(e){super(e),this.description=null,this.fieldName=null,this.label=null,this.type="field"}clone(){return super.clone()}};d([f({type:String,json:{read:!1,write:!1}})],h0.prototype,"description",void 0),d([f({type:String,json:{write:{enabled:!0,isRequired:!0}}})],h0.prototype,"fieldName",void 0),d([f({type:String,json:{read:!1,write:!1}})],h0.prototype,"label",void 0),d([f({type:["field"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],h0.prototype,"type",void 0),h0=d([V("esri.tables.elements.AttributeTableFieldElement")],h0);const w1e=h0;let kC=class extends bt(QT){constructor(e){super(e),this.relationshipId=null,this.type="relationship"}clone(){return super.clone()}};d([f({type:Number,json:{type:ei,write:{enabled:!0,isRequired:!0}}})],kC.prototype,"relationshipId",void 0),d([f({type:["relationship"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],kC.prototype,"type",void 0),kC=d([V("esri.tables.elements.AttributeTableRelationshipElement")],kC);const _1e=kC,x1e={base:QT,key:"type",typeMap:{attachment:b1e,field:w1e,relationship:_1e}};function cJe(t){return{typesWithGroup:{base:QT,key:"type",typeMap:{attachment:b1e,field:w1e,group:t,relationship:_1e}},typesWithoutGroup:x1e}}let AC=class extends bt(QT){constructor(e){super(e),this.elements=null,this.type="group"}clone(){return super.clone()}};d([f({types:[x1e],json:{name:"attributeTableElements",write:!0}})],AC.prototype,"elements",void 0),d([f({type:["group"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],AC.prototype,"type",void 0),AC=d([V("esri.tables.elements.AttributeTableGroupElement")],AC);const uJe=AC;let PC=class extends bt($e){constructor(e){super(e),this.field=null,this.order=null}};d([f({type:String,json:{write:!0}})],PC.prototype,"field",void 0),d([f({type:["asc","desc"],json:{write:!0}})],PC.prototype,"order",void 0),PC=d([V("esri.tables.support.FieldOrder")],PC);const dJe=PC;var Q7;const hJe=cJe(uJe);let OC=Q7=class extends $e{constructor(t){super(t),this.elements=null,this.orderByFields=null}clone(){return new Q7({elements:he(this.elements),orderByFields:he(this.orderByFields)})}};d([f({types:[hJe.typesWithGroup],json:{name:"attributeTableElements",write:!0}})],OC.prototype,"elements",void 0),d([f({type:[dJe],json:{write:!0}})],OC.prototype,"orderByFields",void 0),OC=Q7=d([V("esri.tables.AttributeTableTemplate")],OC);const pJe=OC,fJe={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:{enabled:!0,layerContainerTypes:Lr}}},y5={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(t,e)=>!e.disablePopup},write:{enabled:!0,writer(t,e,i){e[i]=!t}}}},v5={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:{enabled:!0,layerContainerTypes:Lr}}},mJe={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:Kw}}},gJe={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:{enabled:!0,layerContainerTypes:Lr}}},yJe={value:null,type:Qf,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:{enabled:!0,layerContainerTypes:Lr}}};function _2t(t){return{type:t,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const $1e={write:{enabled:!0,layerContainerTypes:Lr},read:!0},K7={type:Number,json:{origins:{"web-document":$1e,"portal-item":{write:{layerContainerTypes:Lr}}}}},vJe={...K7,json:{...K7.json,origins:{"web-document":{...$1e,write:{enabled:!0,layerContainerTypes:Lr,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(t,e,i)=>{var r;return i&&i.origin!=="service"||!e.drawingInfo||e.drawingInfo.transparency===void 0?(r=e.layerDefinition)!=null&&r.drawingInfo&&e.layerDefinition.drawingInfo.transparency!==void 0?TE(e.layerDefinition.drawingInfo.transparency):void 0:TE(e.drawingInfo.transparency)}}}},x2t={type:Yt,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(t,e)=>{const i=Yt.fromJSON(t);return e.spatialReference!=null&&typeof e.spatialReference=="object"&&(i.spatialReference=tt.fromJSON(e.spatialReference)),i}}}},read:!1}},bJe={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},wJe={type:Number,json:{origins:{service:{write:{enabled:!1}}},name:"layerDefinition.minScale",write:{layerContainerTypes:Lr}}},_Je={type:Number,json:{origins:{service:{write:{enabled:!1}}},name:"layerDefinition.maxScale",write:{layerContainerTypes:Lr}}},S1e={json:{write:{ignoreOrigin:!0,layerContainerTypes:Lr},origins:{"web-map":{read:!1,write:!1}}}},xJe={type:pJe,json:{name:"attributeTableInfo",write:!0}};let Kf=class extends bt($e){constructor(e){super(e),this.creatorField=null,this.creationDateField=null,this.editorField=null,this.editDateField=null,this.realm=null,this.timeZone=null}};d([f()],Kf.prototype,"creatorField",void 0),d([f()],Kf.prototype,"creationDateField",void 0),d([f()],Kf.prototype,"editorField",void 0),d([f()],Kf.prototype,"editDateField",void 0),d([f()],Kf.prototype,"realm",void 0),d([f(SR("dateFieldsTimeReference",!0))],Kf.prototype,"timeZone",void 0),Kf=d([V("esri.layers.support.EditFieldsInfo")],Kf);let Oh=class extends bt($e){constructor(e){super(e)}};d([f({constructOnly:!0,json:{write:!0}})],Oh.prototype,"name",void 0),d([f({constructOnly:!0,json:{write:!0}})],Oh.prototype,"fields",void 0),d([f({constructOnly:!0,json:{write:!0}})],Oh.prototype,"isAscending",void 0),d([f({constructOnly:!0,json:{write:!0}})],Oh.prototype,"indexType",void 0),d([f({constructOnly:!0,json:{write:!0}})],Oh.prototype,"isUnique",void 0),d([f({constructOnly:!0,json:{write:!0}})],Oh.prototype,"description",void 0),Oh=d([V("esri.layers.support.FeatureIndex")],Oh);async function b5(t,e,i){e=e.clone(),t.capabilities.query.supportsMaxRecordCountFactor&&(e.maxRecordCountFactor=T1e(t));const r=$Je(t),n=t.capabilities.query.supportsPagination;e.start=0,e.num=r;let s=null;for(;;){const a=await t.source.queryFeaturesJSON(e,i);if(s==null?s=a:s.features=s.features.concat(a.features),s.exceededTransferLimit=a.exceededTransferLimit,!n||!a.exceededTransferLimit)break;e.start+=r}return s}function $Je(t){return T1e(t)*SJe(t)}function SJe(t){return t.capabilities.query.maxRecordCount||2e3}function T1e(t){return t.capabilities.query.supportsMaxRecordCountFactor?mt.MAX_MAX_RECORD_COUNT_FACTOR:1}var eH;let LC=eH=class extends $e{constructor(t){super(t),this.minValue=0,this.maxValue=0}clone(){return new eH({minValue:this.minValue,maxValue:this.maxValue})}};d([f({type:Number,json:{write:!0}})],LC.prototype,"minValue",void 0),d([f({type:Number,json:{write:!0}})],LC.prototype,"maxValue",void 0),LC=eH=d([V("esri.renderers.support.AuthoringInfoClassBreakInfo")],LC);var tH;let zy=tH=class extends $e{constructor(t){super(t),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=new Array}clone(){return new tH({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:he(this.classBreakInfos)})}};d([f({type:String,json:{write:!0}})],zy.prototype,"field",void 0),d([f({type:String,json:{write:!0}})],zy.prototype,"normalizationField",void 0),d([f({type:String,json:{write:!0}})],zy.prototype,"label",void 0),d([f({type:[LC],json:{write:!0}})],zy.prototype,"classBreakInfos",void 0),zy=tH=d([V("esri.renderers.support.AuthoringInfoFieldInfo")],zy);var iH;let Zx=iH=class extends $e{constructor(t){super(t),this.label=null,this.size=null,this.value=null}clone(){return new iH({label:this.label,value:this.value,size:this.size})}};d([f({type:String,json:{write:!0}})],Zx.prototype,"label",void 0),d([f({type:Number,json:{write:!0}})],Zx.prototype,"size",void 0),d([f({type:Number,json:{write:!0}})],Zx.prototype,"value",void 0),Zx=iH=d([V("esri.renderers.support.AuthoringInfoSizeStop")],Zx);const TJe=Zx;var rH;const SO=new jt({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),TO=new jt({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),Hae={key:t=>typeof t=="number"?"number":"string",typeMap:{number:Number,string:String},base:null},Gae=["high-to-low","above-and-below","centered-on","extremes"],Wae=[...new Set(["high-to-low","above-and-below","centered-on","extremes","above","below","high-to-low","above-and-below","above","below","reference-size","spike"])],Zae=["seconds","minutes","hours","days","months","years"],IJe=["circle","diamond","hexagon-flat","hexagon-pointy","square"],MJe=["triangle-closed-outline","triangle-gradient-fill-closed","triangle-gradient-fill-closed-outline","triangle-gradient-fill-open","triangle-gradient-fill-open-outline","triangle-open-outline","triangle-solid-fill-closed","triangle-solid-fill-closed-outline","triangle-solid-fill-open","triangle-solid-fill-open-outline"];let Os=rH=class extends $e{constructor(t){super(t),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(t){return typeof t=="string"||typeof t=="number"?t:null}get normalizationField(){return this.theme==="reference-size"||this.theme==="spike"?this._get("normalizationField"):null}set normalizationField(t){this._set("normalizationField",t)}get referenceSizeScale(){return this.theme==="reference-size"?this._get("referenceSizeScale"):null}set referenceSizeScale(t){this._set("referenceSizeScale",t)}get referenceSizeSymbolStyle(){return this.theme==="reference-size"?this._get("referenceSizeSymbolStyle"):null}set referenceSizeSymbolStyle(t){this._set("referenceSizeSymbolStyle",t)}get spikeSymbolStyle(){return this.theme==="spike"?this._get("spikeSymbolStyle"):null}set spikeSymbolStyle(t){this._set("spikeSymbolStyle",t)}castStartTime(t){return typeof t=="string"||typeof t=="number"?t:null}get sizeStops(){return this.theme==="reference-size"||this.theme==="spike"?this._get("sizeStops"):null}set sizeStops(t){this._set("sizeStops",t)}get style(){return this.type==="color"?this._get("style"):null}set style(t){this._set("style",t)}get theme(){return this.type==="color"||this.type==="size"?this._get("theme")||"high-to-low":null}set theme(t){this._set("theme",t)}clone(){return new rH({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,normalizationField:this.normalizationField,referenceSizeScale:this.referenceSizeScale,referenceSizeSymbolStyle:this.referenceSizeSymbolStyle,spikeSymbolStyle:this.spikeSymbolStyle,sizeStops:he(this.sizeStops),startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};d([f({types:Hae,json:{write:!0}})],Os.prototype,"endTime",void 0),d([_i("endTime")],Os.prototype,"castEndTime",null),d([f({type:String,json:{write:!0}})],Os.prototype,"field",void 0),d([f({type:Number,json:{write:!0}})],Os.prototype,"maxSliderValue",void 0),d([f({type:Number,json:{write:!0}})],Os.prototype,"minSliderValue",void 0),d([f({type:String,json:{origins:{"web-scene":{write:!1}},write:!0}})],Os.prototype,"normalizationField",null),d([f({type:Number,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],Os.prototype,"referenceSizeScale",null),d([f({type:IJe,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],Os.prototype,"referenceSizeSymbolStyle",null),d([f({type:MJe,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],Os.prototype,"spikeSymbolStyle",null),d([f({types:Hae,json:{write:!0}})],Os.prototype,"startTime",void 0),d([_i("startTime")],Os.prototype,"castStartTime",null),d([f({type:[TJe],json:{origins:{"web-scene":{write:!1}},write:!0}})],Os.prototype,"sizeStops",null),d([f({type:SO.apiValues,value:null,json:{type:SO.jsonValues,read:SO.read,write:SO.write}})],Os.prototype,"style",null),d([f({type:Wae,value:null,json:{type:Wae,origins:{"web-scene":{type:Gae,write:{writer:(t,e)=>{Gae.includes(t)&&(e.theme=t)}}}},write:!0}})],Os.prototype,"theme",null),d([f({type:TO.apiValues,json:{type:TO.jsonValues,read:TO.read,write:TO.write}})],Os.prototype,"type",void 0),d([f({type:Zae,json:{type:Zae,write:!0}})],Os.prototype,"units",void 0),Os=rH=d([V("esri.renderers.support.AuthoringInfoVisualVariable")],Os);const CJe=Os;let J$=class extends $e{constructor(e){super(e),this.type=null}};d([f({readOnly:!0,json:{read:!1,write:!0}})],J$.prototype,"type",void 0),J$=d([V("esri.rest.support.ColorRamp")],J$);var nH;let $m=nH=class extends J${constructor(t){super(t),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new nH({fromColor:he(this.fromColor),toColor:he(this.toColor),algorithm:this.algorithm})}};d([pt({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],$m.prototype,"algorithm",void 0),d([f({type:Se,json:{type:[ei],write:{isRequired:!0}}})],$m.prototype,"fromColor",void 0),d([f({type:Se,json:{type:[ei],write:{isRequired:!0}}})],$m.prototype,"toColor",void 0),d([f({type:["algorithmic"],json:{write:{isRequired:!0}}})],$m.prototype,"type",void 0),$m=nH=d([V("esri.rest.support.AlgorithmicColorRamp")],$m);var sH;let hm=sH=class extends J${constructor(t){super(t),this.colorRamps=null,this.type="multipart",this.weights=void 0}writeColorRamps(t,e,i,r){const n=t==null?void 0:t.map(a=>a.toJSON(r)),{weights:s}=this;if(n&&(s!=null&&s.length)&&n.length===(s==null?void 0:s.length)){const a=100/s.reduce((l,c)=>l+c);let o=0;n.forEach((l,c)=>{l.start=o,o+=s[c]*a,l.stop=o})}e.colorRamps=n}readWeights(t,e){var r;const i=(r=e.colorRamps)==null?void 0:r.map(({start:n,stop:s})=>n==null||s==null?-1:s-n);if(!(i!=null&&i.some(n=>n<0)))return i}clone(){return new sH({colorRamps:he(this.colorRamps)})}};d([f({type:[$m],json:{write:{isRequired:!0}}})],hm.prototype,"colorRamps",void 0),d([Ge("colorRamps")],hm.prototype,"writeColorRamps",null),d([f({type:["multipart"],json:{write:{isRequired:!0}}})],hm.prototype,"type",void 0),d([f({type:[Number]})],hm.prototype,"weights",void 0),d([je("weights",["colorRamps"])],hm.prototype,"readWeights",null),hm=sH=d([V("esri.rest.support.MultipartColorRamp")],hm);const EJe={key:"type",base:J$,typeMap:{algorithmic:$m,multipart:hm}};function kJe(t){return t!=null&&t.type?t.type==="algorithmic"?$m.fromJSON(t):t.type==="multipart"?hm.fromJSON(t):null:null}var aH;const Ob=new jt({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),IO=new jt({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),Yae=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers"],AJe=["high-to-low","above-and-below","above","below"],PJe=["flow-line","wave-front"],OJe=["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"];let Qr=aH=class extends $e{constructor(t){super(t),this.colorRamp=null,this.fadeRatio=null,this.isAutoGenerated=!1,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const t=this._get("classificationMethod"),e=this.type;return e&&e!=="relationship"?e==="class-breaks-size"||e==="class-breaks-color"?t||"manual":null:t}set classificationMethod(t){this._set("classificationMethod",t)}readColorRamp(t){return t?kJe(t):void 0}get fields(){return this.type&&this.type!=="predominance"?null:this._get("fields")}set fields(t){this._set("fields",t)}get field1(){return this.type&&this.type!=="relationship"?null:this._get("field1")}set field1(t){this._set("field1",t)}get field2(){return this.type&&this.type!=="relationship"?null:this._get("field2")}set field2(t){this._set("field2",t)}get flowTheme(){return this.type==="flow"?this._get("flowTheme"):null}set flowTheme(t){this._set("flowTheme",t)}get focus(){return this.type&&this.type!=="relationship"?null:this._get("focus")}set focus(t){this._set("focus",t)}get numClasses(){return this.type&&this.type!=="relationship"?null:this._get("numClasses")}set numClasses(t){this._set("numClasses",t)}get statistics(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("statistics"):null}set statistics(t){this._set("statistics",t)}get standardDeviationInterval(){const t=this.type;return t&&t!=="relationship"&&t!=="class-breaks-size"&&t!=="class-breaks-color"||this.classificationMethod&&this.classificationMethod!=="standard-deviation"?null:this._get("standardDeviationInterval")}set standardDeviationInterval(t){this._set("standardDeviationInterval",t)}get type(){return this._get("type")}set type(t){let e=t;t==="classed-size"?e="class-breaks-size":t==="classed-color"&&(e="class-breaks-color"),this._set("type",e)}get univariateSymbolStyle(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(t){this._set("univariateSymbolStyle",t)}get univariateTheme(){return this.type==="univariate-color-size"?this._get("univariateTheme"):null}set univariateTheme(t){this._set("univariateTheme",t)}clone(){var t;return new aH({classificationMethod:this.classificationMethod,colorRamp:he(this.colorRamp),fadeRatio:he(this.fadeRatio),fields:(t=this.fields)==null?void 0:t.slice(),field1:he(this.field1),field2:he(this.field2),isAutoGenerated:this.isAutoGenerated,focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(e=>e.clone()),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}};d([f({type:Ob.apiValues,value:null,json:{type:Ob.jsonValues,read:Ob.read,write:Ob.write,origins:{"web-document":{default:"manual",type:Ob.jsonValues,read:Ob.read,write:Ob.write}}}})],Qr.prototype,"classificationMethod",null),d([f({types:EJe,json:{write:!0}})],Qr.prototype,"colorRamp",void 0),d([je("colorRamp")],Qr.prototype,"readColorRamp",null),d([f({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Qr.prototype,"fadeRatio",void 0),d([f({type:[String],value:null,json:{write:!0}})],Qr.prototype,"fields",null),d([f({type:zy,value:null,json:{write:!0}})],Qr.prototype,"field1",null),d([f({type:zy,value:null,json:{write:!0}})],Qr.prototype,"field2",null),d([f({type:PJe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Qr.prototype,"flowTheme",null),d([f({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],Qr.prototype,"focus",null),d([f({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],Qr.prototype,"isAutoGenerated",void 0),d([f({type:Number,value:null,json:{type:ei,write:!0}})],Qr.prototype,"numClasses",null),d([f({type:Yae,json:{type:Yae,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],Qr.prototype,"lengthUnit",void 0),d([f({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Qr.prototype,"maxSliderValue",void 0),d([f({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Qr.prototype,"minSliderValue",void 0),d([f({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Qr.prototype,"statistics",null),d([f({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],Qr.prototype,"standardDeviationInterval",null),d([f({type:IO.apiValues,value:null,json:{type:IO.jsonValues,read:IO.read,write:IO.write}})],Qr.prototype,"type",null),d([f({type:[CJe],json:{write:!0}})],Qr.prototype,"visualVariables",void 0),d([f({type:OJe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Qr.prototype,"univariateSymbolStyle",null),d([f({type:AJe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Qr.prototype,"univariateTheme",null),Qr=aH=d([V("esri.renderers.support.AuthoringInfo")],Qr);const eU=new jt({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary",pieChart:"pie-chart"},{ignoreUnknown:!0});let _c=class extends $e{constructor(e){super(e),this.authoringInfo=null,this.type=null}async getRequiredFields(e){if(!this.collectRequiredFields)return[];const i=new Set;return await this.collectRequiredFields(i,e),Array.from(i).sort()}getSymbol(e,i){}async getSymbolAsync(e,i){}get symbols(){return[]}get arcadeRequired(){return!1}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};d([f({type:Qr,json:{write:!0}})],_c.prototype,"authoringInfo",void 0),d([f({type:eU.apiValues,readOnly:!0,json:{type:eU.jsonValues,read:!1,write:{writer:eU.write,ignoreOrigin:!0,isRequired:!0}}})],_c.prototype,"type",void 0),_c=d([V("esri.renderers.Renderer")],_c);let FC=class extends bt($e){constructor(){super(...arguments),this.showLegend=null,this.title=null}};d([f({type:Boolean,json:{write:!0}})],FC.prototype,"showLegend",void 0),d([f({type:String,json:{write:!0}})],FC.prototype,"title",void 0),FC=d([V("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],FC);const I1e=FC,tU=new jt({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let Qa=class extends $e{constructor(e){super(e),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(e){return e==null?e:typeof e=="function"?(Ie.getLogger(this).error(".field: field must be a string value"),null):kk(e)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};d([f()],Qa.prototype,"index",void 0),d([f({type:tU.apiValues,readOnly:!0,json:{read:tU.read,write:{writer:tU.write,isRequired:!0}}})],Qa.prototype,"type",void 0),d([f({type:String,json:{write:!0}})],Qa.prototype,"field",void 0),d([_i("field")],Qa.prototype,"castField",null),d([f({type:String,json:{write:!0}})],Qa.prototype,"valueExpression",void 0),d([f({type:String,json:{write:!0}})],Qa.prototype,"valueExpressionTitle",void 0),d([f({readOnly:!0})],Qa.prototype,"arcadeRequired",null),d([f({type:I1e,json:{write:!0}})],Qa.prototype,"legendOptions",void 0),Qa=d([V("esri.renderers.visualVariables.VisualVariable")],Qa);var oH;let p0=oH=class extends $e{constructor(t){super(t),this.color=null,this.label=null,this.value=null}writeValue(t,e,i){e[i]=t??0}clone(){return new oH({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};d([f({type:Se,json:{type:[ei],write:{isRequired:!0}}})],p0.prototype,"color",void 0),d([f({type:String,json:{write:!0}})],p0.prototype,"label",void 0),d([f({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],p0.prototype,"value",void 0),d([Ge("value")],p0.prototype,"writeValue",null),p0=oH=d([V("esri.renderers.visualVariables.support.ColorStop")],p0);const LJe=p0;var lH;let Ny=lH=class extends Qa{constructor(t){super(t),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(t){t&&Array.isArray(t)&&(t=t.filter(e=>!!e)).sort((e,i)=>e.value-i.value),this._set("stops",t)}clone(){var t;return new lH({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(e=>e.clone()),legendOptions:(t=this.legendOptions)==null?void 0:t.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(t=>t.value||0)}};d([f({readOnly:!0})],Ny.prototype,"cache",null),d([f({type:["color"],json:{type:["colorInfo"]}})],Ny.prototype,"type",void 0),d([f({type:String,json:{write:!0}})],Ny.prototype,"normalizationField",void 0),d([f({type:[LJe],json:{write:!0}})],Ny.prototype,"stops",null),Ny=lH=d([V("esri.renderers.visualVariables.ColorVariable")],Ny);var cH;let Sy=cH=class extends $e{constructor(t){super(t),this.label=null,this.opacity=null,this.value=null}readOpacity(t,e){return TE(e.transparency)}writeOpacity(t,e,i){e[i]=WD(t)}clone(){return new cH({label:this.label,opacity:this.opacity,value:this.value})}};d([f({type:String,json:{write:!0}})],Sy.prototype,"label",void 0),d([f({type:Number,json:{type:ei,write:{target:"transparency",isRequired:!0}}})],Sy.prototype,"opacity",void 0),d([je("opacity",["transparency"])],Sy.prototype,"readOpacity",null),d([Ge("opacity")],Sy.prototype,"writeOpacity",null),d([f({type:Number,json:{write:{isRequired:!0}}})],Sy.prototype,"value",void 0),Sy=cH=d([V("esri.renderers.visualVariables.support.OpacityStop")],Sy);const FJe=Sy;var uH;let Sm=uH=class extends Qa{constructor(t){super(t),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(t){t&&Array.isArray(t)&&(t=t.filter(e=>!!e)).sort((e,i)=>e.value-i.value),this._set("stops",t)}clone(){var t;return new uH({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(e=>e.clone()),legendOptions:(t=this.legendOptions)==null?void 0:t.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(t=>t.value||0)}};d([f({readOnly:!0})],Sm.prototype,"cache",null),d([f({type:["opacity"],json:{type:["transparencyInfo"]}})],Sm.prototype,"type",void 0),d([f({type:String,json:{write:!0}})],Sm.prototype,"normalizationField",void 0),d([f({type:[FJe],json:{write:!0}})],Sm.prototype,"stops",null),Sm=uH=d([V("esri.renderers.visualVariables.OpacityVariable")],Sm);var dH;let Dy=dH=class extends Qa{constructor(t){super(t),this.axis=null,this.type="rotation",this.rotationType="geographic"}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}clone(){var t;return new dH({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:(t=this.legendOptions)==null?void 0:t.clone()})}};d([f({readOnly:!0})],Dy.prototype,"cache",null),d([f({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],Dy.prototype,"axis",void 0),d([f({type:["rotation"],json:{type:["rotationInfo"]}})],Dy.prototype,"type",void 0),d([f({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],Dy.prototype,"rotationType",void 0),Dy=dH=d([V("esri.renderers.visualVariables.RotationVariable")],Dy);function RJe(t){return $i(t)}var hH;let vd=hH=class extends $e{constructor(t){super(t),this.label=null,this.size=null,this.value=null,this.useMinValue=null,this.useMaxValue=null}clone(){return new hH({label:this.label,size:this.size,value:this.value,useMaxValue:this.useMaxValue,useMinValue:this.useMinValue})}};d([f({type:String,json:{write:!0}})],vd.prototype,"label",void 0),d([f({type:Number,cast:$i,json:{write:{isRequired:!0}}})],vd.prototype,"size",void 0),d([f({type:Number,json:{write:{isRequired:!0}}})],vd.prototype,"value",void 0),d([f({type:Boolean,json:{write:!1}})],vd.prototype,"useMinValue",void 0),d([f({type:Boolean,json:{write:!1}})],vd.prototype,"useMaxValue",void 0),vd=hH=d([V("esri.renderers.visualVariables.support.SizeStop")],vd);let GL=class extends I1e{constructor(){super(...arguments),this.customValues=null}};d([f({type:[Number],json:{write:!0}})],GL.prototype,"customValues",void 0),GL=d([V("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],GL);const M1e=GL;function $$(t){return t&&t.declaredClass==="esri.renderers.visualVariables.SizeVariable"}function c_(t){return t!=null&&!isNaN(t)&&isFinite(t)}function C1e(t){return t.valueExpression?"expression":t.field&&typeof t.field=="string"?"field":"unknown"}function zJe(t,e){const i=e||C1e(t),r=t.valueUnit||"unknown";return i==="unknown"?"constant":t.stops?"stops":t.minSize!=null&&t.maxSize!=null&&t.minDataValue!=null&&t.maxDataValue!=null?"clamped-linear":r==="unknown"?t.minSize!=null&&t.minDataValue!=null?t.minSize&&t.minDataValue?"proportional":"additive":"identity":"real-world-size"}const E1e=()=>Ie.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),w5=t=>E1e().warn(`The visualVariable should be an instance of esri.renderers.visualVariables.${t}`),_5=()=>E1e().error("Use of arcade expressions requires an arcade context"),Jae=new sr,WL=Math.PI,k1e=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function A1e(t,e,i){var b;const r="visualVariables"in t?(b=t.visualVariables)==null?void 0:b.find(x=>x.type==="color"):t;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.ColorVariable")return void w5("ColorVariable");const n=typeof e=="number",s=n?null:e,a=s==null?void 0:s.attributes;let o=n?e:null;const l=r.field,{ipData:c,hasExpression:h}=r.cache;let m=r.cache.compiledFunc;if(!l&&!h){const x=r.stops;return x&&x[0]&&x[0].color}if(typeof o!="number")if(h){if((i==null?void 0:i.arcade)==null)return void _5();const x={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},$=i.arcade.arcadeUtils,M=$.getViewInfo(x),k=$.createExecContext(s,M,i.timeZone);if(!m){const A=$.createSyntaxTree(r.valueExpression);m=$.createFunction(A),r.cache.compiledFunc=m}o=$.executeFunction(m,k)}else a&&(o=a[l]);const g=r.normalizationField,v=a!=null&&g!=null?parseFloat(a[g]):void 0;if(o!=null&&(!g||n||!isNaN(v)&&v!==0)){c_(v)&&!n&&(o/=v);const x=JY(o,c);if(x){const $=x[0],M=x[1],k=$===M?r.stops[$].color:Se.blendColors(r.stops[$].color,r.stops[M].color,x[2],i!=null?i.color:void 0);return new Se(k)}}}function P1e(t,e,i){var b;const r="visualVariables"in t?(b=t.visualVariables)==null?void 0:b.find(x=>x.type==="opacity"):t;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.OpacityVariable")return void w5("OpacityVariable");const n=typeof e=="number",s=n?null:e,a=s==null?void 0:s.attributes;let o=n?e:null;const l=r.field,{ipData:c,hasExpression:h}=r.cache;let m=r.cache.compiledFunc;if(!l&&!h){const x=r.stops;return x&&x[0]&&x[0].opacity}if(typeof o!="number")if(h){if((i==null?void 0:i.arcade)==null)return void _5();const x={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},$=i.arcade.arcadeUtils,M=$.getViewInfo(x),k=$.createExecContext(s,M,i.timeZone);if(!m){const A=$.createSyntaxTree(r.valueExpression);m=$.createFunction(A),r.cache.compiledFunc=m}o=$.executeFunction(m,k)}else a&&(o=a[l]);const g=r.normalizationField,v=a!=null&&g!=null?parseFloat(a[g]):void 0;if(o!=null&&(!g||n||!isNaN(v)&&v!==0)){c_(v)&&!n&&(o/=v);const x=JY(o,c);if(x){const $=x[0],M=x[1];if($===M)return r.stops[$].opacity;{const k=r.stops[$].opacity;return k+(r.stops[M].opacity-k)*x[2]}}}}function O1e(t,e,i){var v;const r="visualVariables"in t?(v=t.visualVariables)==null?void 0:v.find(b=>b.type==="rotation"):t;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.RotationVariable")return void w5("RotationVariable");const n=r.axis||"heading",s=n==="heading"&&r.rotationType==="arithmetic"?90:0,a=n==="heading"&&r.rotationType==="arithmetic"?-1:1,o=typeof e=="number"?null:e,l=o==null?void 0:o.attributes,c=r.field,{hasExpression:h}=r.cache;let m=r.cache.compiledFunc,g=null;if(!c&&!h)return g;if(h){if((i==null?void 0:i.arcade)==null)return void _5();const b={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},x=i.arcade.arcadeUtils,$=x.getViewInfo(b),M=x.createExecContext(o,$,i.timeZone);if(!m){const k=x.createSyntaxTree(r.valueExpression);m=x.createFunction(k),r.cache.compiledFunc=m}g=x.executeFunction(m,M)}else l&&(g=l[c]);return g=typeof g!="number"||isNaN(g)?null:s+a*g,g}function NJe(t,e,i){const r=typeof e=="number",n=r?null:e,s=n==null?void 0:n.attributes;let a=r?e:null;const{isScaleDriven:o}=t.cache;let l=t.cache.compiledFunc;if(o){const h=i!=null?i.scale:void 0,m=i!=null?i.view:void 0;a=h==null||m==="3d"?DJe(t):h}else if(!r)switch(t.inputValueType){case"expression":{if((i==null?void 0:i.arcade)==null)return void _5();const h={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},m=i.arcade.arcadeUtils,g=m.getViewInfo(h),v=m.createExecContext(n,g,i.timeZone);if(!l){const b=m.createSyntaxTree(t.valueExpression);l=m.createFunction(b),t.cache.compiledFunc=l}a=m.executeFunction(l,v);break}case"field":s&&(a=s[t.field]);break;case"unknown":a=null}if(!c_(a))return null;if(r||!t.normalizationField)return a;const c=s?parseFloat(s[t.normalizationField]):null;return c_(c)&&c!==0?a/c:null}function DJe(t){let e=null,i=null;const r=t.stops;return r?(e=r[0].value,i=r[r.length-1].value):(e=t.minDataValue||0,i=t.maxDataValue||0),(e+i)/2}function x5(t,e,i){var s;const r="visualVariables"in t?(s=t.visualVariables)==null?void 0:s.find(a=>a.type==="size"):t;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.SizeVariable")return void w5("SizeVariable");const n=F1e(NJe(r,e,i),r,e,i,r.cache.ipData);return n==null||isNaN(n)?void 0:n}function Ll(t,e,i){return t==null?null:$$(t)?x5(t,e,i):c_(t)?t:null}function L1e(t,e,i){return c_(i)&&t>i?i:c_(e)&&t<e?e:t}function jJe(t,e,i,r){const n=Ll(e.minSize,i,r)||e.minDataValue;return t==null&&n==null?null:(t??0)+(n??0)}function VJe(t,e,i){const r=t.stops;let n=(r==null?void 0:r.length)&&r[0].size;return n==null&&(n=t.minSize),Ll(n,e,i)}function UJe(t,e,i,r){const n=Ll(e.minSize,i,r);if(t==null)return n;const{minDataValue:s,maxDataValue:a}=e;if(s==null||a==null)return null;const o=(t-s)/(a-s),l=Ll(e.maxSize,i,r),c=r!=null?r.shape:void 0;if(t<=s)return n;if(t>=a)return l;if(n==null||l==null)return null;if(e.scaleBy==="area"&&c){const h=c==="circle",m=h?WL*(n/2)**2:n*n,g=m+o*((h?WL*(l/2)**2:l*l)-m);return h?2*Math.sqrt(g/WL):Math.sqrt(g)}return n+o*(l-n)}function BJe(t,e,i,r){const n=Ll(e.minSize,i,r);if(t==null||n==null)return n;const s=r!=null?r.shape:void 0,{minDataValue:a}=e;if(a==null)return null;const o=t/a,l=Ll(e.maxSize,i,r);let c=null;return c=s==="circle"?2*Math.sqrt(o*(n/2)**2):s==="square"||s==="diamond"||s==="image"?Math.sqrt(o*n**2):o*n,L1e(c,n,l)}function qJe(t,e,i,r,n){var l,c,h;if(t==null)return null;const[s,a,o]=JY(t,n);if(s===a)return Ll((l=e.stops)==null?void 0:l[s].size,i,r);{const m=Ll((c=e.stops)==null?void 0:c[s].size,i,r),g=Ll((h=e.stops)==null?void 0:h[a].size,i,r);return m==null||g==null?null:m+(g-m)*o}}function HJe(t,e,i,r){const n=((r==null?void 0:r.resolution)??1)*g5[e.valueUnit],s=Ll(e.minSize,i,r),a=Ll(e.maxSize,i,r),{valueRepresentation:o}=e;if(t==null)return s;let l=null;return l=o==="area"?2*Math.sqrt(t/WL)/n:o==="radius"||o==="distance"?2*t/n:t/n,L1e(l,s,a)}function F1e(t,e,i,r,n){switch(e.transformationType){case"additive":return jJe(t,e,i,r);case"constant":return VJe(e,i,r);case"clamped-linear":return UJe(t,e,i,r);case"proportional":return BJe(t,e,i,r);case"stops":return qJe(t,e,i,r,n);case"real-world-size":return HJe(t,e,i,r);case"identity":return t;case"unknown":return null}}function GJe(t,e,i){const{isScaleDriven:r}=t.cache;if(!(r&&i==="3d"||e))return null;const n={scale:e,view:i};let s=Ll(t.minSize,Jae,n),a=Ll(t.maxSize,Jae,n);if(s!=null||a!=null){if(s>a){const o=a;a=s,s=o}return{minSize:s,maxSize:a}}}function WJe(t,e,i){if(!t.visualVariables)return;const r=[],n=[],s=[],a=[],o=[];for(const l of t.visualVariables)switch(l.type){case"color":n.push(l);break;case"opacity":s.push(l);break;case"rotation":o.push(l);break;case"size":a.push(l)}return n.forEach(l=>{const c=A1e(l,e,i);r.push({variable:l,value:c})}),s.forEach(l=>{const c=P1e(l,e,i);r.push({variable:l,value:c})}),o.forEach(l=>{const c=O1e(l,e,i);r.push({variable:l,value:c})}),a.forEach(l=>{const c=x5(l,e,i);r.push({variable:l,value:c})}),r}function JY(t,e){if(!e)return;let i=0,r=e.length-1;return e.some((n,s)=>t<n?(r=s,!0):(i=s,!1)),[i,r,(t-e[i])/(e[r]-e[i])]}function ZJe(t,e,i){const r=["proportional","proportional","proportional"];for(const n of t){const s=n.useSymbolValue?"symbol-value":x5(n,e,i)??"proportional";switch(n.axis){case"width":r[0]=s;break;case"depth":r[1]=s;break;case"height":r[2]=s;break;case"width-and-depth":r[0]=s,r[1]=s;break;case"all":case void 0:case null:r[0]=s,r[1]=s,r[2]=s;break;default:n.axis}}return r}const $_=Object.freeze(Object.defineProperty({__proto__:null,getAllSizes:ZJe,getColor:A1e,getOpacity:P1e,getRotationAngle:O1e,getSize:x5,getSizeForValue:F1e,getSizeFromNumberOrVariable:Ll,getSizeRangeAtScale:GJe,getVisualVariableValues:WJe,viewScaleRE:k1e},Symbol.toStringTag,{value:"Module"}));var pH;const MO=new jt({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),fH=new jt({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers"});function Xae(t){if(t!=null)return typeof t=="string"||typeof t=="number"?RJe(t):t.type==="size"?$$(t)?t:(delete(t={...t}).type,new Ei(t)):void 0}function Qae(t,e,i){if(typeof t!="object")return t;const r=new Ei;return r.read(t,i),r}let Ei=pH=class extends Qa{constructor(t){super(t),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:this.valueExpression!=null&&k1e.test(this.valueExpression)}}set index(t){$$(this.maxSize)&&(this.maxSize.index=`visualVariables[${t}].maxSize`),$$(this.minSize)&&(this.minSize.index=`visualVariables[${t}].minSize`),this._set("index",t)}get inputValueType(){return C1e(this)}set maxDataValue(t){t&&this.stops&&(Ie.getLogger(this).warn("cannot set maxDataValue when stops is not null."),t=null),this._set("maxDataValue",t)}set maxSize(t){t&&this.stops&&(Ie.getLogger(this).warn("cannot set maxSize when stops is not null."),t=null),this._set("maxSize",t)}castMaxSize(t){return Xae(t)}readMaxSize(t,e,i){return Qae(t,e,i)}set minDataValue(t){t&&this.stops&&(Ie.getLogger(this).warn("cannot set minDataValue when stops is not null."),t=null),this._set("minDataValue",t)}set minSize(t){t&&this.stops&&(Ie.getLogger(this).warn("cannot set minSize when stops is not null."),t=null),this._set("minSize",t)}castMinSize(t){return Xae(t)}readMinSize(t,e,i){return Qae(t,e,i)}get arcadeRequired(){return!!this.valueExpression||this.minSize!=null&&typeof this.minSize=="object"&&this.minSize.arcadeRequired||this.maxSize!=null&&typeof this.maxSize=="object"&&this.maxSize.arcadeRequired}set stops(t){this.minDataValue==null&&this.maxDataValue==null&&this.minSize==null&&this.maxSize==null?t&&Array.isArray(t)&&(t=t.filter(e=>!!e)).sort((e,i)=>e.value-i.value):t&&(Ie.getLogger(this).warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),t=null),this._set("stops",t)}get transformationType(){return zJe(this,this.inputValueType)}readValueExpression(t,e){return t||e.expression&&"$view.scale"}writeValueExpressionWebScene(t,e,i,r){if(t==="$view.scale"){if(r!=null&&r.messages){const n=this.index,s=typeof n=="string"?n:`visualVariables[${n}]`;r.messages.push(new ae("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:s+".valueExpression",context:r}))}}else e[i]=t}readValueUnit(t){return t?fH.read(t):null}clone(){var t,e;return new pH({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:$$(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:$$(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:(t=this.stops)==null?void 0:t.map(i=>i.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:(e=this.legendOptions)==null?void 0:e.clone()})}flipSizes(){if(this.transformationType==="clamped-linear"){const{minSize:t,maxSize:e}=this;return this.minSize=e,this.maxSize=t,this}if(this.transformationType==="stops"){const t=this.stops;if(!t)return this;const e=t.map(r=>r.size).reverse(),i=t.length;for(let r=0;r<i;r++)t[r].size=e[r];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){var t;return(t=this.stops)==null?void 0:t.map(e=>e.value||0)}};d([f({readOnly:!0})],Ei.prototype,"cache",null),d([f({type:MO.apiValues,json:{type:MO.jsonValues,origins:{"web-map":{read:!1}},read:MO.read,write:MO.write}})],Ei.prototype,"axis",void 0),d([f()],Ei.prototype,"index",null),d([f({type:String,readOnly:!0})],Ei.prototype,"inputValueType",null),d([f({type:M1e,json:{write:!0}})],Ei.prototype,"legendOptions",void 0),d([f({type:Number,value:null,json:{write:!0}})],Ei.prototype,"maxDataValue",null),d([f({type:Number,value:null,json:{write:!0}})],Ei.prototype,"maxSize",null),d([_i("maxSize")],Ei.prototype,"castMaxSize",null),d([je("maxSize")],Ei.prototype,"readMaxSize",null),d([f({type:Number,value:null,json:{write:!0}})],Ei.prototype,"minDataValue",null),d([f({type:Number,value:null,json:{write:!0}})],Ei.prototype,"minSize",null),d([_i("minSize")],Ei.prototype,"castMinSize",null),d([je("minSize")],Ei.prototype,"readMinSize",null),d([f({type:String,json:{write:!0}})],Ei.prototype,"normalizationField",void 0),d([f({readOnly:!0})],Ei.prototype,"arcadeRequired",null),d([f({type:String})],Ei.prototype,"scaleBy",void 0),d([f({type:[vd],value:null,json:{write:!0}})],Ei.prototype,"stops",null),d([f({type:["outline"],json:{write:!0}})],Ei.prototype,"target",void 0),d([f({type:String,readOnly:!0})],Ei.prototype,"transformationType",null),d([f({type:["size"],json:{type:["sizeInfo"]}})],Ei.prototype,"type",void 0),d([f({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],Ei.prototype,"useSymbolValue",void 0),d([f({type:String,json:{write:!0}})],Ei.prototype,"valueExpression",void 0),d([je("valueExpression",["valueExpression","expression"])],Ei.prototype,"readValueExpression",null),d([Ge("web-scene","valueExpression")],Ei.prototype,"writeValueExpressionWebScene",null),d([f({type:["radius","diameter","area","width","distance"],json:{write:!0}})],Ei.prototype,"valueRepresentation",void 0),d([f({type:fH.apiValues,json:{write:fH.write,origins:{"web-map":{read:!1},"web-scene":{write:!0},"portal-item":{write:!0}}}})],Ei.prototype,"valueUnit",void 0),d([je("valueUnit")],Ei.prototype,"readValueUnit",null),Ei=pH=d([V("esri.renderers.visualVariables.SizeVariable")],Ei);const YJe={color:Ny,size:Ei,opacity:Sm,rotation:Dy},JJe=new jt({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),XJe=/^\[([^\]]+)\]$/i;let ZL=class extends et{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(e){if(this._resetVariables(),e=e==null?void 0:e.filter(i=>!!i),e==null?void 0:e.length){for(const i of e)switch(i.type){case"color":this.colorVariables.push(i);break;case"opacity":this.opacityVariables.push(i);break;case"rotation":this.rotationVariables.push(i);break;case"size":this.sizeVariables.push(i)}this.sizeVariables.length&&this.sizeVariables.some(i=>!!i.target)&&e.sort((i,r)=>{let n=null;return n=i.target===r.target?0:i.target?1:-1,n});for(let i=0;i<e.length;i++)e[i].index=i;this._set("visualVariables",e)}else this._set("visualVariables",e)}readVariables(e,i,r){const{rotationExpression:n,rotationType:s}=i,a=n==null?void 0:n.match(XJe),o=a==null?void 0:a[1];if(o&&(e||(e=[]),e.push({type:"rotationInfo",rotationType:s,field:o})),e)return e.map(l=>{const c=JJe.read(l.type),h=YJe[c];h||(Ie.getLogger(this).warn(`Unknown variable type: ${c}`),r!=null&&r.messages&&r.messages.push(new Ic("visual-variable:unsupported",`visualVariable of type '${c}' is not supported`,{definition:l,context:r})));const m=new h;return m.read(l,r),m})}writeVariables(e,i){const r=[];for(const n of e){const s=n.toJSON(i);s&&r.push(s)}return r}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};d([f()],ZL.prototype,"visualVariables",null),ZL=d([V("esri.renderers.visualVariables.VisualVariableFactory")],ZL);const QJe={base:Qa,key:"type",typeMap:{opacity:Sm,color:Ny,rotation:Dy,size:Ei}},KT=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this._vvFactory=new ZL}set visualVariables(r){this._vvFactory.visualVariables=r,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(r,n,s){return this._vvFactory.readVariables(r,n,s)}writeVisualVariables(r,n,s,a){n[s]=this._vvFactory.writeVariables(r,a)}get arcadeRequiredForVisualVariables(){var r;return((r=this.visualVariables)==null?void 0:r.some(({arcadeRequired:n})=>n))??!1}hasVisualVariables(r,n){return r?this.getVisualVariablesForType(r,n).length>0:this.getVisualVariablesForType("size",n).length>0||this.getVisualVariablesForType("color",n).length>0||this.getVisualVariablesForType("opacity",n).length>0||this.getVisualVariablesForType("rotation",n).length>0}getVisualVariablesForType(r,n){var s;return((s=this.visualVariables)==null?void 0:s.filter(a=>a.type===r&&(typeof n=="string"?a.target===n:n!==!1||!a.target)))??[]}async collectVVRequiredFields(r,n){let s=[];this.visualVariables&&(s=s.concat(this.visualVariables));for(const a of s)a&&(a.field&&ho(r,n,a.field),a.normalizationField&&ho(r,n,a.normalizationField),a.valueExpression&&(KJe(a.valueExpression,r,n)||await za(r,n,null,a.valueExpression)))}};return d([f({types:[QJe],value:null,json:{write:!0}})],i.prototype,"visualVariables",null),d([je("visualVariables",["visualVariables","rotationType","rotationExpression"])],i.prototype,"readVisualVariables",null),d([Ge("visualVariables")],i.prototype,"writeVisualVariables",null),i=d([V("esri.renderers.mixins.VisualVariablesMixin")],i),i};function KJe(t,e,i){const r=H6e(t);return r!=null&&(ho(e,i,r),!0)}const XY=[252,146,31,255],eXe=[153,153,153,255],tXe={type:"esriSMS",style:"esriSMSCircle",size:6,color:XY,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},iXe={type:"esriSLS",style:"esriSLSSolid",width:.75,color:XY},rXe={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},nXe={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},sXe={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},aXe={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},oXe={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null},XR=tn.fromJSON(tXe),$5=xn.fromJSON(iXe),R1e=no.fromJSON(rXe),lXe=Et.fromJSON(nXe);function A2t(t){if(t==null)return null;switch(t.type){case"mesh":return null;case"point":case"multipoint":return XR;case"polyline":return $5;case"polygon":case"extent":return R1e}return null}const P2t=tn.fromJSON(sXe),O2t=xn.fromJSON(aXe),L2t=no.fromJSON(oXe),cXe=Do.fromSimpleMarkerSymbol(XR),uXe=kd.fromSimpleLineSymbol($5),dXe=vu.fromSimpleFillSymbol(R1e),hXe=new Lm({symbolLayers:new Ue([new Fo({material:{color:XY},edges:new c0e({size:Qi(1),color:new Se(eXe)})})])}),pXe=new kd({symbolLayers:new Ue([new Lo({material:{color:new Se([0,0,0])},size:Qi(1)})])}),fXe=new vu({symbolLayers:new Ue([new Fo({outline:{color:new Se([0,0,0]),size:Qi(1)}})])});function F2t(t){if(t==null)return null;switch(t.type){case"mesh":return hXe;case"point":case"multipoint":return cXe;case"polyline":return uXe;case"polygon":case"extent":return dXe}return null}const Kae="#useCIMFallbackSymbology()",Tm={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function oT(t,e=Tm){var l,c,h,m;if(!t)return{symbol:null};const{retainId:i=Tm.retainId,ignoreDrivers:r=Tm.ignoreDrivers,hasLabelingContext:n=Tm.hasLabelingContext,retainCIM:s=Tm.retainCIM,cimFallbackEnabled:a=Tm.cimFallbackEnabled}=e;let o=null;if(qd(t))o=t.clone();else if(t.type==="web-style")o=t.clone();else if(t.type==="cim"){const g=(c=(l=t.data)==null?void 0:l.symbol)==null?void 0:c.type;switch(g){case"CIMPointSymbol":o=s?t.clone():Do.fromCIMSymbol(t);break;case"CIMLineSymbol":a&&(o=pXe.clone(),(h=e==null?void 0:e.logWarning)==null||h.call(e,Kae,"Unsupported CIM line symbology converted to fallback 3D line symbology"));break;case"CIMPolygonSymbol":a&&(o=fXe.clone(),(m=e==null?void 0:e.logWarning)==null||m.call(e,Kae,"Unsupported CIM polygon symbology converted to fallback 3D polygon symbology"))}if(!o)return{error:new ae("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${g||"unknown"}' is unsupported in 3D`,{symbol:t})}}else if(t instanceof xn)o=kd.fromSimpleLineSymbol(t);else if(t instanceof tn)o=Do.fromSimpleMarkerSymbol(t);else if(t instanceof Oo)o=Do.fromPictureMarkerSymbol(t);else if(t instanceof no)o=e.geometryType&&e.geometryType==="mesh"?Lm.fromSimpleFillSymbol(t):vu.fromSimpleFillSymbol(t);else{if(!(t instanceof Et))return{error:new ae("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${t.type||t.declaredClass}' is unsupported in 3D`,{symbol:t})};o=n?md.fromTextSymbol(t):Do.fromTextSymbol(t)}return i&&o&&o.type!=="cim"&&(o.id=t.id),!r||o.type==="cim"||o instanceof Pa||o.symbolLayers.forEach(g=>g.ignoreDrivers=!0),{symbol:o}}function QR(t,e,i,r){const n=z1e(t,{},{context:r,isLabelSymbol:!1});n!=null&&qn(i,n,e)}function eoe(t,e,i,r){const n=z1e(t,{},{context:r,isLabelSymbol:!0});n!=null&&(e[i]=n)}function toe(t){return qd(t)||t instanceof Pa}function mXe(t){return(t==null?void 0:t.type)==="polygon-3d"||(t==null?void 0:t.type)==="line-3d"}function z1e(t,e,i){var o;if(t==null)return null;const{context:r,isLabelSymbol:n}=i,s=r==null?void 0:r.origin,a=r==null?void 0:r.messages;if(s==="web-scene"&&!toe(t)){const l=oT(t,{retainCIM:!0,hasLabelingContext:n});return l.symbol!=null?l.symbol.write(e,r):(a==null||a.push(new ae("symbol:unsupported",`Symbols of type '${t.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:t,context:r,error:l.error})),null)}return p9(r==null?void 0:r.layer)&&mXe(t)?(a==null||a.push(new ae("symbol:unsupported",`Symbols of type '${t.declaredClass}' are not supported on layers of type '${(o=r==null?void 0:r.layer)==null?void 0:o.declaredClass}'.`,{symbol:t,context:r})),null):(s==="web-map"||s==="portal-item"&&!p9(r==null?void 0:r.layer))&&toe(t)?(a==null||a.push(new ae("symbol:unsupported",`Symbols of type '${t.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:t,context:r})),null):t.write(e,r)}function N1e(t,e){return OBe(t,null,e)}const S5={types:k0e,json:{write:{writer:QR},origins:{"web-scene":{types:Dne,write:{writer:QR},read:{reader:LT({types:Dne})}}}}},QY=kW({json:{origins:{"web-scene":{write:{isRequired:!0}}}}},S5),KY={types:{base:Bn,key:"type",typeMap:{"simple-fill":rv.typeMap["simple-fill"],"picture-fill":rv.typeMap["picture-fill"],"polygon-3d":rv.typeMap["polygon-3d"],cim:rv.typeMap.cim}},json:{write:{writer:QR},origins:{"web-scene":{type:vu,write:{writer:QR}}}}},YL={cast:t=>t==null||typeof t=="string"||typeof t=="number"?t:`${t}`,json:{type:String,write:{writer:(t,e)=>{e.value=t==null?void 0:t.toString()}}}};var mH;let aa=mH=class extends KT(_c){constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.type="simple"}async collectRequiredFields(t,e){await Promise.all([this.collectSymbolFields(t,e),this.collectVVRequiredFields(t,e)])}async collectSymbolFields(t,e){await Promise.all(this.symbols.map(i=>i.collectRequiredFields(t,e)))}getSymbol(t,e){return this.symbol}async getSymbolAsync(t,e){return this.symbol}get symbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){var t;return((t=this.visualVariables)==null?void 0:t.reduce((e,i)=>e+i.getAttributeHash(),""))??""}getMeshHash(){return this.symbols.reduce((t,e)=>t+JSON.stringify(e),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new mH({description:this.description,label:this.label,symbol:he(this.symbol),visualVariables:he(this.visualVariables),authoringInfo:he(this.authoringInfo)})}};d([f({type:String,json:{write:!0}})],aa.prototype,"description",void 0),d([f({type:String,json:{write:!0}})],aa.prototype,"label",void 0),d([f(QY)],aa.prototype,"symbol",void 0),d([pt({simple:"simple"})],aa.prototype,"type",void 0),aa=mH=d([V("esri.renderers.SimpleRenderer")],aa);const gXe=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function gH(t){return t instanceof et}function ioe(t){return t instanceof Ue?Object.keys(t.items):gH(t)?Go(t).keys():t?Object.keys(t):[]}function CO(t,e){return t instanceof Ue?t.items[e]:t[e]}function yXe(t,e){return!(!Array.isArray(t)||!Array.isArray(e))&&t.length!==e.length}function L2(t){return t?t.declaredClass:null}function D1e(t,e){var m;const i=t.diff;if(i&&typeof i=="function")return i(t,e);const r=ioe(t),n=ioe(e);if(r.length===0&&n.length===0)return;if(!r.length||!n.length||yXe(t,e))return{type:"complete",oldValue:t,newValue:e};const s=n.filter(g=>!r.includes(g)),a=r.filter(g=>!n.includes(g)),o=r.filter(g=>n.includes(g)&&CO(t,g)!==CO(e,g)).concat(s,a).sort(),l=L2(t);if(l&&gXe.has(l)&&o.length)return{type:"complete",oldValue:t,newValue:e};let c;const h=gH(t)&&gH(e);for(const g of o){const v=CO(t,g),b=CO(e,g);let x;if((h||typeof v!="function"&&typeof b!="function")&&v!==b&&(v!=null||b!=null)){if(i&&i[g]&&typeof i[g]=="function")x=(m=i[g])==null?void 0:m.call(i,v,b);else if(v instanceof Date&&b instanceof Date){if(v.getTime()===b.getTime())continue;x={type:"complete",oldValue:v,newValue:b}}else x=typeof v=="object"&&typeof b=="object"&&L2(v)===L2(b)?D1e(v,b):{type:"complete",oldValue:v,newValue:b};x!=null&&(c!=null?c.diff[g]=x:c={type:"partial",diff:{[g]:x}})}}return c}function R2t(t,e){if(t==null)return!1;const i=e.split(".");let r=t;for(const n of i){if(r.type==="complete")return!0;if(r.type!=="partial")return!1;{const s=r.diff[n];if(!s)return!1;r=s}}return!0}function vXe(t,e){if(typeof t!="function"&&typeof e!="function"&&(t!=null||e!=null))return t==null||e==null||typeof t=="object"&&typeof e=="object"&&L2(t)!==L2(e)?{type:"complete",oldValue:t,newValue:e}:D1e(t,e)}function EO(t){if(t==null)return!0;switch(t.type){case"complete":return!1;case"collection":{const e=t;for(const i of e.added)if(!EO(i))return!1;for(const i of e.removed)if(!EO(i))return!1;for(const i of e.changed)if(!EO(i))return!1;return!0}case"partial":for(const e in t.diff)if(!EO(t.diff[e]))return!1;return!0}}var yH;const bXe=Es()({ascendingValues:"ascending-values",descendingValues:"descending-values"});let RC=yH=class extends bt($e){static from(t){return AT(yH,t)}constructor(t){super(t),this.title=null,this.order=null}};d([f({type:String,json:{write:!0}})],RC.prototype,"title",void 0),d([pt(bXe)],RC.prototype,"order",void 0),RC=yH=d([V("esri.renderers.support.RendererLegendOptions")],RC);const eJ=RC;let Md=class extends bt($e){constructor(e){super(e),this.value=null,this.value2=null,this.value3=null}};d([f(YL)],Md.prototype,"value",void 0),d([f(YL)],Md.prototype,"value2",void 0),d([f(YL)],Md.prototype,"value3",void 0),Md=d([V("esri.renderers.support.UniqueValue")],Md);let pm=class extends bt($e){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.values=null}castValues(e){if(e==null)return null;const i=typeof(e=Array.isArray(e)?e:[e])[0];return i==="string"||i==="number"?e.map(r=>new Md({value:r})):i==="object"?e[0]instanceof Md?e:e.map(r=>new Md(r)):null}};d([f({type:String,json:{write:!0}})],pm.prototype,"description",void 0),d([f({type:String,json:{write:!0}})],pm.prototype,"label",void 0),d([f(S5)],pm.prototype,"symbol",void 0),d([f({type:[Md],json:{type:[[String]],read:{reader:t=>t?t.map(e=>new Md({value:e[0],value2:e[1],value3:e[2]})):null},write:{writer:(t,e)=>{const i=[];for(const r of t){const n=[r.value,r.value2,r.value3].filter(ln).map(s=>s.toString());i.push(n)}e.values=i}}}})],pm.prototype,"values",void 0),d([_i("values")],pm.prototype,"castValues",null),pm=d([V("esri.renderers.support.UniqueValueClass")],pm);let B0=class extends bt($e){constructor(e){super(e),this.heading=null,this.classes=null}};d([f({type:String,json:{write:!0}})],B0.prototype,"heading",void 0),d([f({type:[pm],json:{write:{isRequired:!0}}})],B0.prototype,"classes",void 0),B0=d([V("esri.renderers.support.UniqueValueGroup")],B0);var vH;let Sd=vH=class extends $e{constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.value=null}clone(){return new vH({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){var e;const t=JSON.stringify((e=this.symbol)==null?void 0:e.toJSON());return`${this.value}.${t}`}};d([f({type:String,json:{write:!0}})],Sd.prototype,"description",void 0),d([f({type:String,json:{write:!0}})],Sd.prototype,"label",void 0),d([f(QY)],Sd.prototype,"symbol",void 0),d([f(YL)],Sd.prototype,"value",void 0),Sd=vH=d([V("esri.renderers.support.UniqueValueInfo")],Sd);const roe=new Map;async function wXe(t,e){try{return{data:(await tJ(t,e)).data,baseUrl:eZ(t),styleUrl:t}}catch(i){return Bh(i),null}}function _Xe(t,e,i){var l;const r=e.portal!=null?e.portal:qe.getDefault();let n;const s=`${r.url} - ${(l=r.user)==null?void 0:l.username} - ${t}`,a=roe.get(s);if(a)return a;const o=xXe(t,r,i).then(c=>(n=c,c.fetchData())).then(c=>({data:c,baseUrl:n.itemUrl??"",styleName:t}));return roe.set(s,o),o}function xXe(t,e,i){return e.load(i).then(()=>{const r=new Dn({disableExtraQuery:!0,query:`owner:${noe} AND type:${soe} AND typekeywords:"${t}"`});return e.queryItems(r,i)}).then(({results:r})=>{var a;let n=null;const s=t.toLowerCase();if(r&&Array.isArray(r)){for(const o of r)if(((a=o.typeKeywords)==null?void 0:a.some(c=>c.toLowerCase()===s))&&o.type===soe&&o.owner===noe){n=o;break}}if(!n)throw new ae("symbolstyleutils:style-not-found",`The style '${t}' could not be found`,{styleName:t});return n.load(i)})}function j1e(t,e,i){return(t==null?void 0:t.styleUrl)!=null?wXe(t.styleUrl,i):(t==null?void 0:t.styleName)!=null?_Xe(t.styleName,e,i):Promise.reject(new ae("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function V1e(t){return t===null||t.type==="CIMSymbolReference"?t:{type:"CIMSymbolReference",symbol:t}}function $Xe(t,e){for(const i of e)switch(i){case"cim":if(t.cimRef)return{format:i,url:encodeURI(t.cimRef)};break;case"web-gltf-basisu":{const r=iU(t,"gltf_basisu");if(r)return{format:i,url:r};break}case"web-gltf":{const r=iU(t,"gltf");if(r)return{format:i,url:r};break}case"web":{const r=iU(t,"gltf");if(r)return{format:"web-gltf",url:r};if(t.webRef)return{format:i,url:encodeURI(t.webRef)};break}}}function iU(t,e){var i,r;if(!ve("enable-feature:force-wosr"))return(r=(i=t.formatInfos)==null?void 0:i.find(n=>n.type===e))==null?void 0:r.href}function tJ(t,e){const i={responseType:"json",query:{f:"json"},...e};return mi(Ld(t),i)}const noe="esri_en",soe="Style",SXe="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";var zC;const aoe="uvInfos-watcher",ooe="uvGroups-watcher",TXe=",",IXe=Wn(Sd);function MXe(t){const{field1:e,field2:i,field3:r,fieldDelimiter:n,uniqueValueInfos:s,valueExpression:a}=t,o=!(!e||!i);return[{classes:(s??[]).map(l=>{var M;const{symbol:c,label:h,value:m,description:g}=l,[v,b,x]=o?((M=m==null?void 0:m.toString())==null?void 0:M.split(n||""))||[]:[m],$=[];return(e||a)&&$.push(v),i&&$.push(b),r&&$.push(x),{symbol:c,label:h,values:[$],description:g}})}]}function O1(t){return t!=null&&t!==""&&(typeof t!="string"||t.trim()!==""&&t.toLowerCase()!=="<null>")||(t=null),t+""}let zr=zC=class extends KT(_c){constructor(t){super(t),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this._isInfosSource=null,this.type="unique-value",this.backgroundFillSymbol=null,this.orderByClassesEnabled=!1,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(e,i){if(!e&&!i)return;if(!e||!i)return{type:"complete",oldValue:e,newValue:i};let r=!1;const n={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let s=0;s<i.length;s++){const a=e.find(o=>o.value===i[s].value);a?vXe(a,i[s])?(n.changed.push({type:"complete",oldValue:a,newValue:i[s]}),r=!0):n.unchanged.push({oldValue:a,newValue:i[s]}):(n.added.push(i[s]),r=!0)}for(let s=0;s<e.length;s++)i.find(a=>a.value===e[s].value)||(n.removed.push(e[s]),r=!0);return r?n:void 0}},this._set("uniqueValueInfos",[]),this._set("uniqueValueGroups",[])}get _cache(){return{compiledFunc:null}}set field(t){this._set("field",t),this._updateFieldDelimiter(),this._updateUniqueValues()}castField(t){return t==null||typeof t=="function"?t:kk(t)}writeField(t,e,i,r){typeof t=="string"?e[i]=t:r!=null&&r.messages?r.messages.push(new ae("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):Ie.getLogger(this).error(".field: cannot write field to JSON since it's not a string value")}set field2(t){this._set("field2",t),this._updateFieldDelimiter(),this._updateUniqueValues()}set field3(t){this._set("field3",t),this._updateUniqueValues()}set valueExpression(t){this._set("valueExpression",t),this._updateUniqueValues()}set defaultSymbol(t){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",t)}set fieldDelimiter(t){this._set("fieldDelimiter",t),this._updateUniqueValues()}readPortal(t,e,i){return i.portal||qe.getDefault()}readStyleOrigin(t,e,i){if(e.styleName)return Object.freeze({styleName:e.styleName});if(e.styleUrl){const r=Wm(e.styleUrl,i);return Object.freeze({styleUrl:r})}}writeStyleOrigin(t,e,i,r){t.styleName?e.styleName=t.styleName:t.styleUrl&&(e.styleUrl=Qw(t.styleUrl,r))}set uniqueValueGroups(t){this.styleOrigin?Ie.getLogger(this).error("#uniqueValueGroups=","Cannot modify unique value groups of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueGroups",t),this._updateInfosFromGroups(),this._isInfosSource=!1,this._watchUniqueValueGroups())}set uniqueValueInfos(t){this.styleOrigin?Ie.getLogger(this).error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",t),this._updateValueInfoMap(),this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos())}addUniqueValueInfo(t,e){var r;if(this.styleOrigin)return void Ie.getLogger(this).error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let i;i=typeof t=="object"?IXe(t):new Sd({value:t,symbol:A0e(e)}),(r=this.uniqueValueInfos)==null||r.push(i),this._valueInfoMap[O1(i.value)]=i,this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}removeUniqueValueInfo(t){if(this.styleOrigin)return void Ie.getLogger(this).error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");const e=this.uniqueValueInfos;if(e)for(let i=0;i<e.length;i++){const r=e[i];if(String(r.value)===String(t)){delete this._valueInfoMap[O1(t)],e.splice(i,1);break}}this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}async getUniqueValueInfo(t,e){let i=e;return this.valueExpression&&(e==null?void 0:e.arcade)==null&&(i={...i,arcade:await Vd()}),this._getUniqueValueInfo(t,i)}getSymbol(t,e){if(this.valueExpression&&(e==null?void 0:e.arcade)==null)return void Ie.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this._getUniqueValueInfo(t,e);return(i==null?void 0:i.symbol)||this.defaultSymbol}async getSymbolAsync(t,e){let i=e;if(this.valueExpression&&(i==null?void 0:i.arcade)==null){const n=await Vd(),{arcadeUtils:s}=n;s.hasGeometryOperations(this.valueExpression)&&await s.enableGeometryOperations(),i={...i,arcade:n}}const r=this._getUniqueValueInfo(t,i);return(r==null?void 0:r.symbol)||this.defaultSymbol}get symbols(){const t=[];if(this._isInfosSource)for(const e of this.uniqueValueInfos??[])e.symbol&&t.push(e.symbol);else for(const e of this.uniqueValueGroups??[])for(const i of e.classes??[])i.symbol&&t.push(i.symbol);return this.defaultSymbol&&t.push(this.defaultSymbol),t}getAttributeHash(){var t;return((t=this.visualVariables)==null?void 0:t.reduce((e,i)=>e+i.getAttributeHash(),""))??""}getMeshHash(){var r;const t=JSON.stringify(this.backgroundFillSymbol),e=JSON.stringify(this.defaultSymbol),i=(r=this.uniqueValueInfos)==null?void 0:r.reduce((n,s)=>n+s.getMeshHash(),"");return`${t}.${e}.${i}.${`${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}`}.${this.valueExpression}`}clone(){const t=new zC({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:he(this.defaultSymbol),orderByClassesEnabled:this.orderByClassesEnabled,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:he(this.visualVariables),legendOptions:he(this.legendOptions),authoringInfo:he(this.authoringInfo),backgroundFillSymbol:he(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(t._isDefaultSymbolDerived=!0),t._set("portal",this.portal);const e=he(this.uniqueValueInfos),i=he(this.uniqueValueGroups);return this.styleOrigin&&(t._set("styleOrigin",Object.freeze(he(this.styleOrigin))),Object.freeze(e),Object.freeze(i)),t._set("uniqueValueInfos",e),t._updateValueInfoMap(),t._set("uniqueValueGroups",i),t._isInfosSource=this._isInfosSource,t._watchUniqueValueInfosAndGroups(),t}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}async collectRequiredFields(t,e){const i=[this.collectVVRequiredFields(t,e),this.collectSymbolFields(t,e)];await Promise.all(i)}async collectSymbolFields(t,e){const i=[...this.symbols.map(r=>r.collectRequiredFields(t,e)),za(t,e,null,this.valueExpression)];ho(t,e,this.field),ho(t,e,this.field2),ho(t,e,this.field3),await Promise.all(i)}populateFromStyle(){return j1e(this.styleOrigin,{portal:this.portal}).then(t=>{var i;const e=[];return this._valueInfoMap={},t!=null&&t.data&&Array.isArray(t.data.items)&&t.data.items.forEach(r=>{const n=new Pa({styleUrl:t.styleUrl,styleName:t.styleName,portal:this.portal,name:r.name});this.defaultSymbol||r.name!==t.data.defaultItem||(this.defaultSymbol=n,this._isDefaultSymbolDerived=!0);const s=new Sd({value:r.name,symbol:n});e.push(s),this._valueInfoMap[O1(r.name)]=s}),this._set("uniqueValueInfos",Object.freeze(e)),this._updateGroupsFromInfos(!0),this._isInfosSource=null,this._watchUniqueValueInfos(),!this.defaultSymbol&&((i=this.uniqueValueInfos)!=null&&i.length)&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this})}_updateFieldDelimiter(){this.field&&this.field2&&!this.fieldDelimiter&&this._set("fieldDelimiter",TXe)}_updateUniqueValues(){this._isInfosSource!=null&&(this._isInfosSource?this._updateGroupsFromInfos():this._updateInfosFromGroups())}_updateValueInfoMap(){this._valueInfoMap={};const{uniqueValueInfos:t}=this;if(t)for(const e of t)this._valueInfoMap[O1(e.value)]=e}_watchUniqueValueInfosAndGroups(){this._watchUniqueValueInfos(),this._watchUniqueValueGroups()}_watchUniqueValueInfos(){this.removeHandles(aoe);const{uniqueValueInfos:t}=this;if(t){const e=[];for(const i of t)e.push(be(()=>({symbol:i.symbol,value:i.value,label:i.label,description:i.description}),(r,n)=>{r!==n&&(this._updateGroupsFromInfos(),this._isInfosSource=!0)},{sync:!0}));this.addHandles(e,aoe)}}_watchUniqueValueGroups(){this.removeHandles(ooe);const{uniqueValueGroups:t}=this;if(t){const e=[];for(const i of t){e.push(be(()=>({classes:i.classes}),(r,n)=>{r!==n&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}));for(const r of i.classes??[])e.push(be(()=>({symbol:r.symbol,values:r.values,label:r.label,description:r.description}),(n,s)=>{n!==s&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}))}this.addHandles(e,ooe)}}_updateInfosFromGroups(){if(!this.uniqueValueGroups)return this._set("uniqueValueInfos",null),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const t=[],{field:e,field2:i,field3:r,fieldDelimiter:n,uniqueValueGroups:s,valueExpression:a}=this;if(!e&&!a)return this._set("uniqueValueInfos",t),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const o=!(!e||!i);for(const l of s)for(const c of l.classes??[]){const{symbol:h,label:m,values:g,description:v}=c;for(const b of g??[]){const{value:x,value2:$,value3:M}=b,k=[x];i&&k.push($),r&&k.push(M);const A=o?k.join(n||""):k[0]??void 0;t.push(new Sd({symbol:h,label:m,value:A,description:v}))}}this._set("uniqueValueInfos",t),this._updateValueInfoMap(),this._watchUniqueValueInfos()}_updateGroupsFromInfos(t=!1){if(!this.uniqueValueInfos)return this._set("uniqueValueGroups",null),void this._watchUniqueValueGroups();const{field:e,field2:i,valueExpression:r,fieldDelimiter:n,uniqueValueInfos:s}=this;if(!e&&!r||!s.length)return this._set("uniqueValueGroups",[]),void this._watchUniqueValueGroups();const a=!(!e||!i),o=s.map(c=>{var M;const{symbol:h,label:m,value:g,description:v}=c,[b,x,$]=a?((M=g==null?void 0:g.toString())==null?void 0:M.split(n||""))||[]:[g];return new pm({symbol:h,label:m,description:v,values:[new Md({value:b,value2:x,value3:$})]})}),l=[new B0({classes:o})];t&&Object.freeze(l),this._set("uniqueValueGroups",l),this._watchUniqueValueGroups()}_getUniqueValueInfo(t,e){return this.valueExpression?this._getUnqiueValueInfoForExpression(t,e):this._getUnqiueValueInfoForFields(t)}_getUnqiueValueInfoForExpression(t,e){const{viewingMode:i,scale:r,spatialReference:n,arcade:s,timeZone:a}=e??{};let o=this._cache.compiledFunc;const l=s.arcadeUtils;if(!o){const h=l.createSyntaxTree(this.valueExpression);o=l.createFunction(h),this._cache.compiledFunc=o}const c=l.executeFunction(o,l.createExecContext(t,l.getViewInfo({viewingMode:i,scale:r,spatialReference:n}),a));return this._valueInfoMap[O1(c)]}_getUnqiueValueInfoForFields(t){const e=this.field,i=t.attributes;let r;if(this.field2){const n=this.field2,s=this.field3,a=[];e&&a.push(i[e]),n&&a.push(i[n]),s&&a.push(i[s]),r=a.join(this.fieldDelimiter||"")}else e&&(r=i[e]);return this._valueInfoMap[O1(r)]}static fromPortalStyle(t,e){const i=new zC(e==null?void 0:e.properties);i._set("styleOrigin",Object.freeze({styleName:t})),i._set("portal",(e==null?void 0:e.portal)||qe.getDefault());const r=i.populateFromStyle();return r.catch(n=>{Ie.getLogger(this.prototype).error(`#fromPortalStyle('${t}'[, ...])`,"Failed to create unique value renderer from style name",n)}),r}static fromStyleUrl(t,e){const i=new zC(e==null?void 0:e.properties);i._set("styleOrigin",Object.freeze({styleUrl:t}));const r=i.populateFromStyle();return r.catch(n=>{Ie.getLogger(this.prototype).error(`#fromStyleUrl('${t}'[, ...])`,"Failed to create unique value renderer from style URL",n)}),r}};d([f({readOnly:!0})],zr.prototype,"_cache",null),d([pt({uniqueValue:"unique-value"})],zr.prototype,"type",void 0),d([f(KY)],zr.prototype,"backgroundFillSymbol",void 0),d([f({value:null,json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],zr.prototype,"field",null),d([_i("field")],zr.prototype,"castField",null),d([Ge("field")],zr.prototype,"writeField",null),d([f({type:String,value:null,json:{write:!0}})],zr.prototype,"field2",null),d([f({type:String,value:null,json:{write:!0}})],zr.prototype,"field3",null),d([f({type:Boolean,json:{name:"drawInClassOrder",default:!1,write:!0,origins:{"web-scene":{write:!1}}}})],zr.prototype,"orderByClassesEnabled",void 0),d([f({type:String,value:null,json:{write:!0}})],zr.prototype,"valueExpression",null),d([f({type:String,json:{write:!0}})],zr.prototype,"valueExpressionTitle",void 0),d([f({type:eJ,json:{write:!0}})],zr.prototype,"legendOptions",void 0),d([f({type:String,json:{write:!0}})],zr.prototype,"defaultLabel",void 0),d([f(kW({...S5},{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],zr.prototype,"defaultSymbol",null),d([f({type:String,value:null,json:{write:!0}})],zr.prototype,"fieldDelimiter",null),d([f({type:qe,readOnly:!0})],zr.prototype,"portal",void 0),d([je("portal",["styleName"])],zr.prototype,"readPortal",null),d([f({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],zr.prototype,"styleOrigin",void 0),d([je("styleOrigin",["styleName","styleUrl"])],zr.prototype,"readStyleOrigin",null),d([Ge("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],zr.prototype,"writeStyleOrigin",null),d([f({type:[B0],json:{read:{source:["uniqueValueGroups","uniqueValueInfos"],reader:(t,e,i)=>(e.uniqueValueGroups||MXe(e)).map(r=>B0.fromJSON(r,i))},write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],zr.prototype,"uniqueValueGroups",null),d([f({type:[Sd],json:{read:!1,write:{isRequired:!0,overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0,isRequired:!0}}}}})],zr.prototype,"uniqueValueInfos",null),zr=zC=d([V("esri.renderers.UniqueValueRenderer")],zr);var bH,LS;let as=(LS=class extends $e{constructor(e){super(e),this.attachmentTypes=null,this.attachmentsWhere=null,this.cacheHint=void 0,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.orderByFields=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(e,i){i.resultOffset=this.start,i.resultRecordCount=this.num||10}clone(){return new bH(he({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,cacheHint:this.cacheHint,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}},bH=LS,LS);d([f({type:[String],json:{write:!0}})],as.prototype,"attachmentTypes",void 0),d([f({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],as.prototype,"attachmentsWhere",void 0),d([f({type:Boolean,json:{write:!0}})],as.prototype,"cacheHint",void 0),d([f({type:[String],json:{write:!0}})],as.prototype,"keywords",void 0),d([f({type:[String],json:{write:!0}})],as.prototype,"globalIds",void 0),d([f({json:{write:!0}})],as.prototype,"name",void 0),d([f({type:Number,json:{read:{source:"resultRecordCount"}}})],as.prototype,"num",void 0),d([f({type:[Number],json:{write:!0}})],as.prototype,"objectIds",void 0),d([f({type:[String],json:{write:!0}})],as.prototype,"orderByFields",void 0),d([f({type:Boolean,json:{default:!1,write:!0}})],as.prototype,"returnMetadata",void 0),d([f({type:[Number],json:{write:!0}})],as.prototype,"size",void 0),d([f({type:Number,json:{read:{source:"resultOffset"}}})],as.prototype,"start",void 0),d([Ge("start"),Ge("num")],as.prototype,"writeStart",null),d([f({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],as.prototype,"where",void 0),as=bH=d([V("esri.rest.support.AttachmentQuery")],as),as.from=Wn(as);const U1e=Es()({naturalLog:"natural-log",squareRoot:"square-root",percentOfTotal:"percent-of-total",log:"log",field:"field"}),loe="percent-of-total",coe="field",j2t=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.normalizationField=null,this.normalizationMaxValue=null,this.normalizationMinValue=null,this.normalizationTotal=null}get normalizationType(){let r=this._get("normalizationType");const n=!!this.normalizationField,s=this.normalizationTotal!=null;return n||s?(r=n&&coe||s&&loe||null,n&&s&&Ie.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):r!==coe&&r!==loe||(r=null),r}set normalizationType(r){this._set("normalizationType",r)}};return d([f({type:String,json:{name:"parameters.normalizationField",write:!0}})],i.prototype,"normalizationField",void 0),d([f({type:Number,json:{name:"parameters.normalizationMaxValue",write:!0}})],i.prototype,"normalizationMaxValue",void 0),d([f({type:Number,json:{name:"parameters.normalizationMinValue",write:!0}})],i.prototype,"normalizationMinValue",void 0),d([f({type:Number,json:{name:"parameters.normalizationTotal",write:!0}})],i.prototype,"normalizationTotal",void 0),d([pt(U1e,{name:"parameters.normalizationType"})],i.prototype,"normalizationType",null),i=d([V("esri.rest.support.NormalizationBinParametersMixin")],i),i};var wH,FS;let nr=(FS=class extends $e{constructor(e){super(e),this.cacheHint=void 0,this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(e,i){i.historicMoment=e&&e.getTime()}writeStart(e,i){i.resultOffset=this.start,i.resultRecordCount=this.num||10,this.start>0&&this.where==null&&(i.definitionExpression="1=1")}clone(){return new wH(he({cacheHint:this.cacheHint,dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}},wH=FS,FS);d([f({type:Boolean,json:{write:!0}})],nr.prototype,"cacheHint",void 0),d([f({type:gd,json:{write:!0}})],nr.prototype,"dynamicDataSource",void 0),d([f({type:String,json:{write:!0}})],nr.prototype,"gdbVersion",void 0),d([f({type:Number,json:{write:!0}})],nr.prototype,"geometryPrecision",void 0),d([f({type:Date})],nr.prototype,"historicMoment",void 0),d([Ge("historicMoment")],nr.prototype,"_writeHistoricMoment",null),d([f({type:Number,json:{write:!0}})],nr.prototype,"maxAllowableOffset",void 0),d([f({json:{write:!0}})],nr.prototype,"objectIds",void 0),d([f({type:[String],json:{write:!0}})],nr.prototype,"orderByFields",void 0),d([f({type:[String],json:{write:!0}})],nr.prototype,"outFields",void 0),d([f({type:tt,json:{read:{source:"outSR"},write:{target:"outSR"}}})],nr.prototype,"outSpatialReference",void 0),d([f({json:{write:!0}})],nr.prototype,"relationshipId",void 0),d([f({type:Number,json:{read:{source:"resultOffset"}}})],nr.prototype,"start",void 0),d([Ge("start"),Ge("num")],nr.prototype,"writeStart",null),d([f({type:Number,json:{read:{source:"resultRecordCount"}}})],nr.prototype,"num",void 0),d([f({json:{write:!0}})],nr.prototype,"returnGeometry",void 0),d([f({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],nr.prototype,"returnM",void 0),d([f({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],nr.prototype,"returnZ",void 0),d([f({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],nr.prototype,"where",void 0),nr=wH=d([V("esri.rest.support.RelationshipQuery")],nr),nr.from=Wn(nr);const V2t=Object.freeze(Object.defineProperty({__proto__:null,get default(){return nr}},Symbol.toStringTag,{value:"Module"})),_H=new jt({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"});async function CXe(t,e,i,r){const n=await Gv(t);if(await iJ(t,e,r),!n.addAttachment)throw new ae(r,"Layer source does not support addAttachment capability");return n.addAttachment(e,i)}function iJ(t,e,i){var s,a;const{attributes:r}=e,{objectIdField:n}=t;return(a=(s=t.capabilities)==null?void 0:s.data)!=null&&a.supportsAttachment?e?r?n&&r[n]?Promise.resolve():Promise.reject(new ae(i,`feature is missing the identifying attribute ${n}`)):Promise.reject(new ae(i,"'attributes' are required on a feature to query attachments")):Promise.reject(new ae(i,"A feature is required to add/delete/update attachments")):Promise.reject(new ae(i,"this layer doesn't support attachments"))}async function EXe(t,e,i,r,n){const s=await Gv(t);if(await iJ(t,e,n),!s.updateAttachment)throw new ae(n,"Layer source does not support updateAttachment capability");return s.updateAttachment(e,i,r)}async function kXe(t,e,i){const{applyEdits:r}=await de(()=>import("./editingSupport-wmKPSbCn.js"),[]),n=await t.load();let s=i;return n.type==="feature"&&n.infoFor3D&&e.deleteFeatures!=null&&n.globalIdField!=null&&(s={...s,globalIdToObjectId:await QXe(n,e.deleteFeatures,n.globalIdField)}),r(n,n.source,e,i)}async function AXe(t,e,i){const{uploadAssets:r}=await de(()=>import("./editingSupport-wmKPSbCn.js"),[]),n=await t.load();return r(n,n.source,e,i)}async function PXe(t,e,i,r){const n=await Gv(t);if(await iJ(t,e,r),!n.deleteAttachments)throw new ae(r,"Layer source does not support deleteAttachments capability");return n.deleteAttachments(e,i)}async function OXe(t,e,i){const r=(await t.load({signal:e==null?void 0:e.signal})).source;if(!r.fetchRecomputedExtents)throw new ae(i,"Layer source does not support fetchUpdates capability");return r.fetchRecomputedExtents(e)}async function LXe(t,e,i,r){var v,b,x,$;e=as.from(e),await t.load();const n=t.source,s=t.capabilities;if(!((v=s==null?void 0:s.data)!=null&&v.supportsAttachment))throw new ae(r,"this layer doesn't support attachments");const{attachmentTypes:a,objectIds:o,globalIds:l,num:c,size:h,start:m,where:g}=e;if(!((b=s==null?void 0:s.operations)!=null&&b.supportsQueryAttachments)&&((a==null?void 0:a.length)>0||(l==null?void 0:l.length)>0||(h==null?void 0:h.length)>0||c||m||g))throw new ae(r,"when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",e);if(!(o!=null&&o.length||l!=null&&l.length||g))throw new ae(r,"'objectIds', 'globalIds', or 'where' are required to perform attachment query",e);if(!n.queryAttachments)throw new ae(r,"Layer source does not support queryAttachments capability",e);return!((x=s==null?void 0:s.attachment)!=null&&x.supportsOrderByFields)&&(($=e.orderByFields)!=null&&$.length)&&((e=e.clone()).orderByFields=null),n.queryAttachments(e)}async function FXe(t,e,i,r){const n=await Gv(t);if(!n.queryObjectIds)throw new ae(r,"Layer source does not support queryObjectIds capability");return n.queryObjectIds(mt.from(e)??t.createQuery(),i)}async function RXe(t,e,i,r){const n=await Gv(t);if(!n.queryFeatureCount)throw new ae(r,"Layer source does not support queryFeatureCount capability");return n.queryFeatureCount(mt.from(e)??t.createQuery(),i)}async function zXe(t,e,i,r){const n=await Gv(t);if(!n.queryExtent)throw new ae(r,"Layer source does not support queryExtent capability");return n.queryExtent(mt.from(e)??t.createQuery(),i)}async function NXe(t,e,i,r){const n=await Gv(t);if(!n.queryRelatedFeatures)throw new ae(r,"Layer source does not support queryRelatedFeatures capability");return n.queryRelatedFeatures(nr.from(e),i)}async function DXe(t,e,i,r){const n=await Gv(t);if(!n.queryRelatedFeaturesCount)throw new ae(r,"Layer source does not support queryRelatedFeaturesCount capability");return n.queryRelatedFeaturesCount(nr.from(e),i)}async function jXe(t){const e=t.source;if(e!=null&&e.refresh)try{const{dataChanged:i,updates:r}=await e.refresh();if(r!=null&&(t.sourceJSON={...t.sourceJSON,...r},t.read(r,{origin:"service",url:t.parsedUrl})),i)return!0}catch{}if(t.definitionExpression)try{return(await oY(t.definitionExpression,t.fieldsIndex)).hasDateFunctions}catch{}return!1}function VXe(t){var a,o;const e=new mt;e.historicMoment=t.historicMoment,e.gdbVersion=t.gdbVersion,e.returnGeometry=!0,e.outFields=["*"],e.multipatchOption=t.geometryType==="multipatch"?"xyFootprint":null;const i=(a=t.capabilities)==null?void 0:a.query;i&&(e.compactGeometryEnabled=i.supportsCompactGeometry,e.defaultSpatialReferenceEnabled=i.supportsDefaultSpatialReference);const r=(o=t.capabilities)==null?void 0:o.data;r!=null&&r.supportsZ&&t.returnZ!=null&&(e.returnZ=t.returnZ),r!=null&&r.supportsM&&t.returnM!=null&&(e.returnM=t.returnM);const{timeOffset:n,timeExtent:s}=t;return e.timeExtent=n!=null&&s!=null?s.offset(-n.value,n.unit):s||null,e}function B1e(t){const{globalIdField:e,fields:i}=t;if(e)return e;if(i){for(const r of i)if(r.type==="esriFieldTypeGlobalID")return r.name}}function q1e(t){const{objectIdField:e,fields:i}=t;if(e)return e;if(i){for(const r of i)if(r.type==="esriFieldTypeOID")return r.name}}function UXe(t){return t.currentVersion?t.currentVersion:t.hasOwnProperty("capabilities")||t.hasOwnProperty("drawingInfo")||t.hasOwnProperty("hasAttachments")||t.hasOwnProperty("htmlPopupType")||t.hasOwnProperty("relationships")||t.hasOwnProperty("timeInfo")||t.hasOwnProperty("typeIdField")||t.hasOwnProperty("types")?10:9.3}function BXe(t,e,i,r){var l,c;const n=i==null?void 0:i.feature,s=!!((l=t.subtypes)!=null&&l.length);if(s&&!(i!=null&&i.excludeImpliedDomains)){const h=HXe(t,e);if(h)return h}const a=s&&qXe(t,n);if(a){const h=(c=a==null?void 0:a.domains)==null?void 0:c[e];return(h==null?void 0:h.type)==="inherited"?r:h}const o=W1e(t.types,t.typeIdField,n);if(o){const h=o.domains&&o.domains[e];if(h&&(h==null?void 0:h.type)!=="inherited")return h}if(r)return r;if(!(i!=null&&i.excludeImpliedDomains)){const h=GXe(t,e);if(h)return h}return null}function qXe(t,e){const{subtypes:i,subtypeField:r}=t;if(!(e!=null&&e.attributes)||!(i!=null&&i.length)||!r)return null;const n=e.attributes[r];return n==null?null:i.find(s=>s.code===n)}function HXe(t,e){var a,o;const{fieldsIndex:i,subtypeField:r}=t,{name:n,type:s}=i.get(e)??{};if(!n)return null;if((r&&((a=i.get(r))==null?void 0:a.name))===n&&((o=t.subtypes)!=null&&o.length)){const l=t.subtypes.map(c=>new V0({code:H1e(c.code,s),name:c.name}));if(l!=null&&l.length)return new sv({codedValues:l})}return null}function GXe(t,e){var s,a;const{fieldsIndex:i}=t,{name:r,type:n}=i.get(e)??{};if(!r)return null;if(("typeIdField"in t?(s=i.get(t.typeIdField))==null?void 0:s.name:null)===r&&"types"in t&&((a=t.types)!=null&&a.length)){const o=t.types.map(l=>new V0({code:H1e(l.id,n),name:l.name}));return new sv({codedValues:o})}return null}function H1e(t,e){return e?kbe({type:e})&&typeof t=="number"?`${t}`:bUe({type:e})&&typeof t=="string"?Number.parseInt(t,10):t:t}async function Gv(t){return(await t.load()).source}async function U2t(t,e){if(!Rt)return;const i=Rt.findCredential(t);if(i)return i.userId;let r;try{const n=await rY(t,e);n&&(r=await Rt.checkSignInStatus(`${n}/sharing`))}catch{}return r?r.userId:null}async function G1e(t,e){if(!Rt||Rt.findCredential(t))return;let i;try{const r=await rY(t,e);r&&(i=await Rt.checkSignInStatus(`${r}/sharing`))}catch{}if(i)try{const r=e!=null?e.signal:null;await Rt.getCredential(t,{signal:r})}catch{}}async function WXe(t,e,i){var n;const r=(n=t.parsedUrl)==null?void 0:n.path;r&&t.authenticationTriggerEvent===e&&await G1e(r,i)}async function B2t(t){var i;const e=(i=t.parsedUrl)==null?void 0:i.path;e&&ZXe(t)&&await G1e(e)}function ZXe(t){return YXe(t)&&("serviceDefinitionExpression"in t&&KR(t.serviceDefinitionExpression)||"definitionExpression"in t&&KR(t.definitionExpression))}function YXe(t){var e;return!(!Ove(t)||!((e=t.capabilities)!=null&&e.query.supportsCurrentUser))}function KR(t){return!!(t!=null&&t.toLowerCase().includes("current_user"))}function JXe(t){return!JL(t)&&(t.userHasUpdateItemPrivileges||t.editingEnabled)}const rU=LT({types:k0e});function rJ(t,e){var i;if(t.defaultSymbol)return(i=t.types)!=null&&i.length?new zr({defaultSymbol:rU(t.defaultSymbol,t,e),field:t.typeIdField,uniqueValueInfos:t.types.map(r=>({id:r.id,symbol:rU(r.symbol,r,e)}))}):new aa({symbol:rU(t.defaultSymbol,t,e)})}function XXe(t){var r,n,s;let e=(r=t.sourceJSON)==null?void 0:r.cacheMaxAge;if(!e)return!1;const i=(s=(n=t.editingInfo)==null?void 0:n.lastEditDate)==null?void 0:s.getTime();return i==null||(e*=1e3,Date.now()-i<e)}async function QXe(t,e,i){if(e==null)return null;const r=[],{objectIdField:n}=t;if(e.forEach(c=>{let h=null;if("attributes"in c){const{attributes:m}=c;h={globalId:m[i],objectId:m[n]!=null&&m[n]!==-1?m[n]:null}}else h={globalId:c.globalId,objectId:c.objectId!=null&&c.objectId!==-1?c.objectId:null};h.globalId!=null&&(h.objectId!=null&&h.objectId!==-1||r.push(h.globalId))}),r.length===0)return null;const s=t.createQuery();s.where=r.map(c=>`${i}='${c}'`).join(" OR "),s.returnGeometry=!1,s.outFields=[n,i],s.cacheHint=!1;const a=await Xje(b5(t,s));if(!a.ok)return null;const o=new Map,l=a.value.features;for(const c of l){const h=c.attributes[i],m=c.attributes[n];h!=null&&m!=null&&m!==-1&&o.set(eVe(h),m)}return o}function W1e(t,e,i){if(!e||!i||!t)return null;const r=i.getAttribute(e);return r==null?null:t.find(n=>{const{id:s}=n;return s!=null&&s.toString()===r.toString()})??null}function JL(t){var e;return((e=t.sourceJSON)==null?void 0:e.isMultiServicesView)||KXe(t)}function KXe(t){var e,i;return!!((i=(e=t.sourceJSON)==null?void 0:e.capabilities)!=null&&i.toLowerCase().split(",").map(r=>r.trim()).includes("map"))}function eQe(t,e,i){var s;const r=e==null?void 0:e.queryAttributeBins;if(!((s=e==null?void 0:e.operations)!=null&&s.supportsQueryBins)||!r)throw new ae(i,"Layer source does not support binning");switch(t.binParameters.type){case"auto-interval":if(!r.supportsAutoInterval)throw new ae(i,"Layer source does not support auto-interval binning");if(t.binParameters.normalizationType&&(!r.supportsNormalization||!uoe(t.binParameters.normalizationType,r.supportedNormalizationTypes)))throw new ae(i,"Layer source does not support normalization binning");break;case"date":if(!r.supportsDate)throw new ae(i,"Layer source does not support date binning");if(t.binParameters.snapToData&&!r.supportsSnapToData)throw new ae(i,"Layer source does not support snapToData binning");if(t.binParameters.returnFullIntervalBin&&!r.supportsReturnFullIntervalBin)throw new ae(i,"Layer source does not support returnFullIntervalBin binning");break;case"fixed-boundaries":if(!r.supportsFixedBoundaries)throw new ae(i,"Layer source does not support fixed-boundaries binning");break;case"fixed-interval":if(!r.supportsFixedInterval)throw new ae(i,"Layer source does not support fixed-interval binning");if(t.binParameters.normalizationType&&(!r.supportsNormalization||!uoe(t.binParameters.normalizationType,r.supportedNormalizationTypes)))throw new ae(i,"Layer source does not support normalization binning")}if(t.binParameters.stackBy&&!r.supportsStackBy)throw new ae(i,"Layer source does not support stackBy binning");if(t.binParameters.splitBy&&!r.supportsSplitBy)throw new ae(i,"Layer source does not support splitBy binning");if(t.binParameters.firstDayOfWeek&&!r.supportsFirstDayOfWeek)throw new ae(i,"Layer source does not support firstDayOfWeek binning");const n=r==null?void 0:r.supportedStatistics;if(t.outStatistics&&n){const a=new Map([["count","count"],["sum","sum"],["min","min"],["max","max"],["avg","avg"],["stddev","stddev"],["var","var"],["percentile-continuous","percentileContinuous"],["percentile-discrete","percentileDiscrete"],["centroid-aggregate","centroid"],["convex-hull-aggregate","convexHull"],["envelope-aggregate","envelope"]]);for(const{statisticType:o}of t.outStatistics){const l=a.get(o);if(l&&!n[l])throw new ae(i,`Layer source does not support ${o} statistic type`)}}}function uoe(t,e){return t!=null&&!!(e!=null&&e[U1e.toJSON(t)])}let Yx=class extends bt($e){constructor(e){super(e),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};d([f({type:String,json:{read:{source:"shapeAreaFieldName"}}})],Yx.prototype,"shapeAreaField",void 0),d([f({type:String,json:{read:{source:"shapeLengthFieldName"}}})],Yx.prototype,"shapeLengthField",void 0),d([f({type:String,json:{read:t=>CLe.read(t)||ELe.read(t)}})],Yx.prototype,"units",void 0),Yx=d([V("esri.layers.support.GeometryFieldsInfo")],Yx);var xH;let Jx=xH=class extends $e{constructor(t){super(t),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new Ue}clone(){return new xH({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};d([f({type:String,json:{write:{isRequired:!0}}})],Jx.prototype,"floorField",void 0),d([f({json:{read:!1,write:!1}})],Jx.prototype,"viewAllMode",void 0),d([f({json:{read:!1,write:!1}})],Jx.prototype,"viewAllLevelIds",void 0),Jx=xH=d([V("esri.layers.support.LayerFloorInfo")],Jx);function tQe(t){var s;const{nonStandardUrlAllowed:e=!1,separator:i}=t??{},r=he(mJe),n=(s=r.json)==null?void 0:s.write;return typeof n=="object"&&n&&(n.writer=function(a,o,l,c){_3e(this,a,i,o,c)}),{...r,set:function(a){if(a==null)return void this._set("url",a);const o=w3e({layer:this,url:a,nonStandardUrlAllowed:e,logger:Ie.getLogger(this)});this._set("url",o.url),o.layerId!=null&&this._set("layerId",o.layerId)}}}function iQe(t,e){const{separator:i}=e??{},r=Cn(t.url);return r!=null&&(t.dynamicDataSource!=null?r.path=Ev(r.path,"dynamicLayer"):t.layerId!=null&&(r.path=Ev(r.path,i??"",t.layerId.toString()))),r}const doe=new jt({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),hoe=new jt({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let nc=class extends bt($e){constructor(e){super(e),this.cardinality=null,this.catalogId=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};d([f({json:{read:doe.read,write:doe.write}})],nc.prototype,"cardinality",void 0),d([f({json:{name:"catalogID"}})],nc.prototype,"catalogId",void 0),d([f({json:{read:!0,write:!0}})],nc.prototype,"composite",void 0),d([f({json:{read:!0,write:!0}})],nc.prototype,"id",void 0),d([f({json:{read:!0,write:!0}})],nc.prototype,"keyField",void 0),d([f({json:{read:!0,write:!0}})],nc.prototype,"keyFieldInRelationshipTable",void 0),d([f({json:{read:!0,write:!0}})],nc.prototype,"name",void 0),d([f({json:{read:!0,write:!0}})],nc.prototype,"relatedTableId",void 0),d([f({json:{read:!0,write:!0}})],nc.prototype,"relationshipTableId",void 0),d([f({json:{read:hoe.read,write:hoe.write}})],nc.prototype,"role",void 0),nc=d([V("esri.layers.support.Relationship")],nc);const rQe=[["binary","application/octet-stream","bin",""]];function G2t(t,e){return X1e(e.name,(t==null?void 0:t.supportedFormats)??[])!=null}function W2t(t,e){if(!t)return!1;const i=nQe(e,t.supportedFormats??[]);return i!=null&&t.editFormats.includes(i)}function Z1e(t,e){return sJ(lQe(t,e))}function Y1e(t,e){return sJ(X1e(t,e))}function Z2t(t,e){return Q1e(oQe(t,e))}function nQe(t,e){return Y1e(t.name,e)??Z1e(t.type,e)}function T5(t,e,i){return Z1e(t,i)??Y1e(e,i)}function J1e({supportedFormats:t}){return T5("model/gltf-binary","glb",t)}function Y2t(t){const e=J1e(t);return e!=null&&t.editFormats.includes(e)}function sQe({supportedFormats:t}){return T5("model/gltf+json","gltf",t)}function aQe(t){if(!t)return null;const e=J1e(t),i=sQe(t);let r=null;for(const n of t.queryFormats){if(n===e)return n;n===i&&(r=n)}return r}function J2t({supportedFormats:t}){return T5("application/esri3do-SR_world","wld",t)}function X2t({supportedFormats:t}){return T5("application/esri3do-SR_prj","prj",t)}function nJ(t){return[...rQe,...t]}function oQe(t,e){return nJ(e).find(i=>sJ(i)===t)}function lQe(t,e){const i=t.toLowerCase();return nJ(e).find(r=>Q1e(r)===i)}function X1e(t,e){const i=t.toLowerCase();return nJ(e).find(r=>cQe(r).some(n=>i.endsWith(n)))}function sJ(t){return t==null?void 0:t[0]}function Q1e(t){return t==null?void 0:t[1].toLowerCase()}function cQe(t){return(t==null?void 0:t[2].split(",").map(e=>e.toLowerCase()))??[]}function Q2t(t){var e;return(e=t.tables)==null?void 0:e.find(i=>i.role==="assetMaps")}function st(t,e,i){return!!K1e(t,e,i)}function Xx(t,e,i){return K1e(t,e,i)}function K1e(t,e,i){return t&&t.hasOwnProperty(e)?t[e]:i}const uQe={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function dQe(t){var i;const e=(i=t==null?void 0:t.supportedSpatialAggregationStatistics)==null?void 0:i.map(r=>r.toLowerCase());return{envelope:!!(e!=null&&e.includes("envelopeaggregate")),centroid:!!(e!=null&&e.includes("centroidaggregate")),convexHull:!!(e!=null&&e.includes("convexhullaggregate"))}}function Qk(t,e){var r;const i=(r=t==null?void 0:t.supportedOperationsWithCacheHint)==null?void 0:r.map(n=>n.toLowerCase());return!!(i!=null&&i.includes(e.toLowerCase()))}function hQe(t){var i;const e=(i=t==null?void 0:t.supportedStatisticTypes)==null?void 0:i.map(r=>r.toLowerCase());return{count:!!(e!=null&&e.includes("count")),sum:!!(e!=null&&e.includes("sum")),min:!!(e!=null&&e.includes("min")),max:!!(e!=null&&e.includes("max")),avg:!!(e!=null&&e.includes("avg")),var:!!(e!=null&&e.includes("var")),stddev:!!(e!=null&&e.includes("stddev")),percentileContinuous:!!(e!=null&&e.includes("percentile_cont")),percentileDiscrete:!!(e!=null&&e.includes("percentile_disc")),envelope:!!(e!=null&&e.includes("envelopeaggregate")),centroid:!!(e!=null&&e.includes("centroidaggregate")),convexHull:!!(e!=null&&e.includes("convexhullaggregate"))}}function pQe(t){var i;const e=(i=t==null?void 0:t.supportedNormalizationTypes)==null?void 0:i.map(r=>r.toLowerCase());return{field:!!(e!=null&&e.includes("field")),log:!!(e!=null&&e.includes("log")),naturalLog:!!(e!=null&&e.includes("naturallog")),percentOfTotal:!!(e!=null&&e.includes("percentoftotal")),squareRoot:!!(e!=null&&e.includes("squareroot"))}}function exe(t,e){return{analytics:fQe(t),attachment:mQe(t),data:gQe(t),metadata:yQe(t),operations:vQe(t.capabilities,t,e),query:bQe(t,e),queryAttributeBins:xQe(t),queryRelated:wQe(t),queryTopFeatures:_Qe(t),editing:$Qe(t)}}function fQe(t){return{supportsCacheHint:Qk(t.advancedQueryCapabilities,"queryAnalytics")}}function mQe(t){const e=t.attachmentProperties,i={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:Qk(t.advancedQueryCapabilities,"queryAttachments"),supportsOrderByFields:st(t.advancedQueryCapabilities,"supportsQueryAttachmentOrderByFields",!1),supportsResize:st(t,"supportsAttachmentsResizing",!1),supportsTypeWildcard:st(t.advancedQueryCapabilities,"supportsQueryAttachmentWithTypeWildcard",!1)};return e&&Array.isArray(e)&&e.forEach(r=>{const n=uQe[r.name];n&&(i[n]=!!r.isEnabled)}),i}function gQe(t){return{isVersioned:st(t,"isDataVersioned",!1),isBranchVersioned:st(t,"isDataBranchVersioned",!1),supportsAttachment:st(t,"hasAttachments",!1),supportsM:st(t,"hasM",!1),supportsZ:st(t,"hasZ",!1)}}function yQe(t){return{supportsAdvancedFieldProperties:st(t,"supportsFieldDescriptionProperty",!1)}}function vQe(t,e,i){var g;const r=(t==null?void 0:t.toLowerCase().split(",").map(v=>v.trim()))??[],n=i?Np(i):null,s=r.includes((n==null?void 0:n.serverType)==="MapServer"?"data":"query"),a=r.includes("editing")&&!e.datesInUnknownTimezone&&((g=e.uniqueIdInfo)==null?void 0:g.OIDFieldContainsHashValue)!==!0;let o=a&&r.includes("create"),l=a&&r.includes("delete"),c=a&&r.includes("update");const h=r.includes("changetracking"),m=e.advancedQueryCapabilities;return a&&!(o||l||c)&&(o=l=c=!0),{supportsCalculate:st(e,"supportsCalculate",!1),supportsTruncate:st(e,"supportsTruncate",!1),supportsValidateSql:st(e,"supportsValidateSql",!1),supportsAdd:o,supportsDelete:l,supportsEditing:a,supportsChangeTracking:h,supportsQuery:s,supportsQueryAnalytics:st(m,"supportsQueryAnalytic",!1),supportsQueryAttachments:st(m,"supportsQueryAttachments",!1),supportsQueryBins:st(m,"supportsQueryBins",!1)||!!e.queryBinsCapabilities,supportsQueryPivot:st(m,"supportsQueryPivot",!1),supportsQueryTopFeatures:st(m,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:st(e,"supportsAttachmentsResizing",!1),supportsSync:r.includes("sync"),supportsUpdate:c,supportsExceedsLimitStatistics:st(e,"supportsExceedsLimitStatistics",!1),supportsAsyncConvert3D:st(e,"supportsAsyncConvert3D",!1)}}function bQe(t,e){const i=t.advancedQueryCapabilities,r=t.ownershipBasedAccessControlForFeatures,n=t.archivingInfo,s=t.currentVersion,a=e==null?void 0:e.includes("MapServer"),o=!a||s>=ve("mapserver-pbf-version-support"),l=dR(e),c=new Set((t.supportedQueryFormats??"").split(",").map(h=>h.toLowerCase().trim()));return{maxRecordCount:Xx(t,"maxRecordCount",void 0),maxRecordCountFactor:Xx(t,"maxRecordCountFactor",void 0),maxUniqueIDCount:Xx(t,"maxUniqueIDCount",void 0),standardMaxRecordCount:Xx(t,"standardMaxRecordCount",void 0),supportedSpatialAggregationStatistics:dQe(i),supportsCacheHint:st(i,"supportsQueryWithCacheHint",!1)||Qk(i,"query"),supportsCentroid:st(i,"supportsReturningGeometryCentroid",!1),supportsCentroidOnDegeneratedQuantizedGeometry:l||e==null,supportsCompactGeometry:l,supportsCurrentUser:st(i,"supportsCurrentUserQueries",!1),supportsDefaultSpatialReference:st(i,"supportsDefaultSR",!1),supportsDegeneratedQuantizedGeometry:st(i,"supportsDegeneratedQuantizedGeometry",!1),supportsDisjointSpatialRelationship:st(i,"supportsDisjointSpatialRel",!1),supportsDistance:st(i,"supportsQueryWithDistance",!1),supportsDistinct:st(i,"supportsDistinct",t.supportsAdvancedQueries),supportsExtent:st(i,"supportsReturningQueryExtent",!1),supportsFormatPBF:o&&c.has("pbf"),supportsFullTextSearch:st(i,"supportsFullTextSearch",!1),supportsGeometryProperties:st(i,"supportsReturningGeometryProperties",!1),supportsHavingClause:st(i,"supportsHavingClause",!1),supportsHistoricMoment:st(n,"supportsQueryWithHistoricMoment",!1),supportsMaxRecordCountFactor:st(i,"supportsMaxRecordCountFactor",!1),supportsOrderBy:st(i,"supportsOrderBy",t.supportsAdvancedQueries),supportsPagination:st(i,"supportsPagination",!1),supportsPaginationOnAggregatedQueries:st(i,"supportsPaginationOnAggregatedQueries",!1),supportsPercentileStatistics:st(i,"supportsPercentileStatistics",!1),supportsQuantization:st(t,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:st(t,"supportsQuantizationEditMode",!1),supportsQueryByAnonymous:st(r,"allowAnonymousToQuery",!0),supportsQueryByOthers:st(r,"allowOthersToQuery",!0),supportsQueryGeometry:st(t,"supportsReturningQueryGeometry",!1),supportsResultType:st(i,"supportsQueryWithResultType",!1),supportsReturnMesh:!!aQe(t.infoFor3D),supportsSpatialAggregationStatistics:st(i,"supportsSpatialAggregationStatistics",!1),supportsSqlExpression:st(i,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:st(t,"useStandardizedQueries",!1),supportsStatistics:st(i,"supportsStatistics",t.supportsStatistics),supportsTopFeaturesQuery:st(i,"supportsTopFeaturesQuery",!1),supportsTrueCurve:st(i,"supportsTrueCurve",!1),tileMaxRecordCount:Xx(t,"tileMaxRecordCount",void 0)}}function wQe(t){const e=t.advancedQueryCapabilities,i=st(e,"supportsAdvancedQueryRelated",!1);return{supportsPagination:st(e,"supportsQueryRelatedPagination",!1),supportsCount:i,supportsOrderBy:i,supportsCacheHint:Qk(e,"queryRelated")}}function _Qe(t){return{supportsCacheHint:Qk(t.advancedQueryCapabilities,"queryTopFilter")}}function xQe(t){const e=t?t.queryBinsCapabilities:void 0;return{supportsDate:st(e,"supportsDateBin",!1),supportsFixedInterval:st(e,"supportsFixedIntervalBin",!1),supportsAutoInterval:st(e,"supportsAutoIntervalBin",!1),supportsFixedBoundaries:st(e,"supportsFixedBoundariesBin",!1),supportsStackBy:st(e,"supportsStackBy",!1),supportsSplitBy:st(e,"supportsSplitBy",!1),supportsSnapToData:st(e,"supportsSnapToData",!1),supportsReturnFullIntervalBin:st(e,"supportsReturnFullIntervalBin",!1),supportsFirstDayOfWeek:st(e,"supportsFirstDayOfWeek",!1),supportsNormalization:st(e,"supportsNormalization",!1),supportedStatistics:hQe(e),supportedNormalizationTypes:pQe(e)}}function $Qe(t){const e=t.ownershipBasedAccessControlForFeatures,i=t?t.advancedEditingCapabilities:void 0;return{supportsGeometryUpdate:st(t,"allowGeometryUpdates",!0),supportsGlobalId:st(t,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:st(t,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:st(t,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:st(t,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:st(t,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:st(e,"allowAnonymousToDelete",!0),supportsDeleteByOthers:st(e,"allowOthersToDelete",!0),supportsUpdateByAnonymous:st(e,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:st(e,"allowOthersToUpdate",!0),supportsAsyncApplyEdits:st(i,"supportsAsyncApplyEdits",!1),zDefault:Xx(t,"zDefault",void 0)}}function K2t(t){var e;return{operations:{supportsAppend:st(t,"supportsAppend",!1),supportsCoverageQuery:((e=t==null?void 0:t.playbackInfo)==null?void 0:e.klv["0601"])??!1,supportsExportClip:st(t,"supportsExportClip",!1),supportsExportFrameset:st(t,"supportsExportFrameset",!1),supportsMensuration:st(t,"supportsMensuration",!1),supportsPreviews:st(t,"supportsPreviews",!1),supportsUpdate:st(t,"supportsUpdate",!1)}}}let em=class extends bt($e){constructor(e){super(e),this.code=null,this.defaultValues={},this.domains=null,this.name=null}readDomains(e){if(!e)return null;const i={};for(const r of Object.keys(e))i[r]=s5(e[r]);return i}writeDomains(e,i){var n;if(!e)return;const r={};for(const s of Object.keys(e))e[s]&&(r[s]=(n=e[s])==null?void 0:n.toJSON());i.domains=r}};d([f({type:Number,json:{write:!0}})],em.prototype,"code",void 0),d([f({type:Object,json:{write:!0}})],em.prototype,"defaultValues",void 0),d([f({json:{write:!0}})],em.prototype,"domains",void 0),d([je("domains")],em.prototype,"readDomains",null),d([Ge("domains")],em.prototype,"writeDomains",null),d([f({type:String,json:{write:!0}})],em.prototype,"name",void 0),em=d([V("esri.layers.support.Subtype")],em);const SQe=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.copyright=null,this.capabilities=null,this.dateFieldsTimeZone=null,this.datesInUnknownTimezone=!1,this.definitionExpression=null,this.displayField=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.fieldsIndex=null,this.floorInfo=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.globalIdField=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.indexes=new(Ue.ofType(Oh)),this.isTable=!1,this.layerId=void 0,this.maxScale=0,this.minScale=0,this.objectIdField=null,this.preferredTimeZone=null,this.relationships=null,this.returnM=void 0,this.returnZ=void 0,this.serviceDefinitionExpression=null,this.serviceItemId=null,this.sourceJSON=null,this.spatialReference=tt.WGS84,this.subtypeField=null,this.subtypes=null,this.trackIdField=null,this.uniqueIdFields=null,this.url=null,this.version=void 0,this._isUrlHostModified=!1,this._isUrlHostModificationEnabled=!1}getFieldDomain(r,n){throw new Error("Not implemented")}getField(r){return this.fieldsIndex.get(r)}get authenticationTriggerEvent(){if(!this.url)return null;const{capabilities:r}=this;if(r){const{query:s,operations:a,editing:o}=r;if(!s.supportsQueryByOthers||!s.supportsQueryByAnonymous||a.supportsEditing&&!(o.supportsUpdateByOthers&&o.supportsUpdateByAnonymous&&o.supportsDeleteByOthers&&o.supportsDeleteByAnonymous))return"load"}if(KR(this.serviceDefinitionExpression)||KR(this.definitionExpression))return"load";if(this.userHasUpdateItemPrivileges){if(XXe(this))return"load";if(this.hasUpdateItemRestrictions)return r.operations.supportsQuery?"editing":"load"}if(this.userHasFullEditingPrivileges&&this.hasFullEditingRestrictions)return"editing";const n=this.editFieldsInfo;return(n!=null&&n.creatorField||n!=null&&n.editorField)&&(r!=null&&r.operations.supportsEditing)?"editing":null}readCapabilitiesFromService(r,n){return exe(n,this.url)}readEditingInfo(r,n){const{editingInfo:s}=n;return s?{lastEditDate:s.lastEditDate!=null?new Date(s.lastEditDate):null}:null}get effectiveCapabilities(){const r=this.capabilities;if(!r)return null;const n=he(r),{operations:s,editing:a}=n;return JL(this)?(this.userHasUpdateItemPrivileges&&(s.supportsQuery=!0),n):this.userHasUpdateItemPrivileges?(s.supportsAdd=s.supportsDelete=s.supportsEditing=s.supportsQuery=s.supportsUpdate=a.supportsDeleteByOthers=a.supportsGeometryUpdate=a.supportsUpdateByOthers=!0,n):(this.userHasFullEditingPrivileges&&s.supportsEditing&&(s.supportsAdd=s.supportsDelete=s.supportsUpdate=a.supportsGeometryUpdate=!0),n)}get effectiveEditingEnabled(){return!1}readGlobalIdFieldFromService(r,n){return B1e(n)}get hasFullEditingRestrictions(){const r=this.capabilities;if(!r||JL(this))return!1;const{operations:n,editing:s}=r;return n.supportsEditing&&!(n.supportsAdd&&n.supportsDelete&&n.supportsUpdate&&s.supportsGeometryUpdate)}get hasUpdateItemRestrictions(){const r=this.capabilities;if(!r)return!1;const{operations:n,editing:s}=r;return JL(this)?!n.supportsQuery:!(n.supportsAdd&&n.supportsDelete&&n.supportsEditing&&n.supportsQuery&&n.supportsUpdate&&s.supportsDeleteByOthers&&s.supportsGeometryUpdate&&s.supportsUpdateByOthers)}readIsTableFromService(r,n){return n.type==="Table"}readMaxScale(r,n){return n.effectiveMaxScale||r||0}readMinScale(r,n){return n.effectiveMinScale||r||0}readObjectIdFieldFromService(r,n){return q1e(n)}get parsedUrl(){return iQe(this)}readServiceDefinitionExpression(r,n){return n.definitionQuery||n.definitionExpression}readUniqueIdFields(r,n){var s;return(s=n.uniqueIdInfo)!=null&&s.OIDFieldContainsHashValue?n.uniqueIdInfo.fields:null}readVersion(r,n){return UXe(n)}get isUrlHostModified(){var o;const{loaded:r,url:n,_isUrlHostModified:s}=this;if(s)return!0;if(!r||!n||this.originIdOf("url")<7)return!1;const a=(o=this.sourceJSON)==null?void 0:o.preferredHost;if(!a||!Ip(n,`https://${a}`,!0))return!1;for(let l=6;l>=3;l--){const c=this.getAtOrigin("url",dE(l));if(c)return!Ip(n,c,!0)}return!1}applyPreferredHost(r){const{url:n,portalItem:s}=this;!n||f9(s)}applyHostFromPortalItem(){const{url:r,portalItem:n}=this;if(!r||this.originIdOf("url")===7||!(n!=null&&n.url)||!f9(n)||!jY(n,VY.HOSTED_SERVICE)||Ip(r,n.url,!0)||!this._isUrlHostModificationEnabled)return;const s=u3e(n.url);this._set("url",Ife(r,s)),this._isUrlHostModified=!0}};return d([f({readOnly:!0})],i.prototype,"authenticationTriggerEvent",null),d([f({type:String,json:{origins:{service:{read:{source:"copyrightText"}}}}})],i.prototype,"copyright",void 0),d([f({readOnly:!0,json:{read:!1,origins:{service:{read:{source:["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","isDataBranchVersioned","isDataVersioned","maxRecordCount","maxRecordCountFactor","maxUniqueIDCount","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"]}}}}})],i.prototype,"capabilities",void 0),d([je("service","capabilities")],i.prototype,"readCapabilitiesFromService",null),d([f(SR("dateFieldsTimeReference"))],i.prototype,"dateFieldsTimeZone",void 0),d([f({type:Boolean})],i.prototype,"datesInUnknownTimezone",void 0),d([f({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],i.prototype,"definitionExpression",void 0),d([f({type:String,json:{origins:{service:{read:{source:"displayField"}}}}})],i.prototype,"displayField",void 0),d([f({readOnly:!0,type:Kf})],i.prototype,"editFieldsInfo",void 0),d([f({readOnly:!0})],i.prototype,"editingInfo",void 0),d([je("editingInfo")],i.prototype,"readEditingInfo",null),d([f({readOnly:!0})],i.prototype,"effectiveCapabilities",null),d([f()],i.prototype,"effectiveEditingEnabled",null),d([f((()=>{const r=he(yJe),n=r.json.origins;return n["web-map"]={read:!1,write:!1},n["portal-item"]={read:!1,write:!1},r})())],i.prototype,"elevationInfo",void 0),d([f()],i.prototype,"fieldsIndex",void 0),d([f({type:Jx,json:{name:"layerDefinition.floorInfo",write:{layerContainerTypes:Lr}}})],i.prototype,"floorInfo",void 0),d([f({type:Yt,json:{origins:{service:{read:{source:"extent"}}}}})],i.prototype,"fullExtent",void 0),d([f()],i.prototype,"gdbVersion",void 0),d([f({readOnly:!0,type:Yx,json:{read:{source:"geometryProperties"}}})],i.prototype,"geometryFieldsInfo",void 0),d([f({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:_H.read}}}})],i.prototype,"geometryType",void 0),d([f({type:String})],i.prototype,"globalIdField",void 0),d([je("service","globalIdField",["globalIdField","fields"])],i.prototype,"readGlobalIdFieldFromService",null),d([f({readOnly:!0})],i.prototype,"hasFullEditingRestrictions",null),d([f({type:Boolean,json:{origins:{service:{read:!0}}}})],i.prototype,"hasM",void 0),d([f({readOnly:!0})],i.prototype,"hasUpdateItemRestrictions",null),d([f({type:Boolean,json:{origins:{service:{read:!0}}}})],i.prototype,"hasZ",void 0),d([f({readOnly:!0,type:Po})],i.prototype,"heightModelInfo",void 0),d([f({type:Date})],i.prototype,"historicMoment",void 0),d([f({type:Ue.ofType(Oh),readOnly:!0})],i.prototype,"indexes",void 0),d([f({readOnly:!0})],i.prototype,"isTable",void 0),d([je("service","isTable",["type"])],i.prototype,"readIsTableFromService",null),d([f({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{read:!1,write:{target:"id"}}},read:!1}})],i.prototype,"layerId",void 0),d([f(_Je)],i.prototype,"maxScale",void 0),d([je("service","maxScale",["maxScale","effectiveMaxScale"])],i.prototype,"readMaxScale",null),d([f(wJe)],i.prototype,"minScale",void 0),d([je("service","minScale",["minScale","effectiveMinScale"])],i.prototype,"readMinScale",null),d([f({type:String})],i.prototype,"objectIdField",void 0),d([je("service","objectIdField",["objectIdField","fields"])],i.prototype,"readObjectIdFieldFromService",null),d([f({readOnly:!0})],i.prototype,"parsedUrl",null),d([f(SR("preferredTimeReference"))],i.prototype,"preferredTimeZone",void 0),d([f({type:[nc],readOnly:!0})],i.prototype,"relationships",void 0),d([f({type:Boolean})],i.prototype,"returnM",void 0),d([f({type:Boolean})],i.prototype,"returnZ",void 0),d([f({readOnly:!0,json:{write:!1}})],i.prototype,"serverGens",void 0),d([f({readOnly:!0})],i.prototype,"serviceDefinitionExpression",void 0),d([je("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],i.prototype,"readServiceDefinitionExpression",null),d([f({type:String,readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],i.prototype,"serviceItemId",void 0),d([f()],i.prototype,"sourceJSON",void 0),d([f({type:tt,json:{origins:{service:{read:{source:"extent.spatialReference"}}}}})],i.prototype,"spatialReference",void 0),d([f({type:String,readOnly:!0,json:{origins:{service:{read:!0}}}})],i.prototype,"subtypeField",void 0),d([f({type:[em],readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],i.prototype,"subtypes",void 0),d([f({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],i.prototype,"trackIdField",void 0),d([f({type:[String],readOnly:!0})],i.prototype,"uniqueIdFields",void 0),d([je("service","uniqueIdFields",["uniqueIdInfo.OIDFieldContainsHashValue","uniqueIdInfo.fields"])],i.prototype,"readUniqueIdFields",null),d([f(tQe({nonStandardUrlAllowed:!0}))],i.prototype,"url",void 0),d([f({json:{origins:{service:{read:!0}},read:!1}})],i.prototype,"version",void 0),d([je("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],i.prototype,"readVersion",null),d([f({readOnly:!0})],i.prototype,"isUrlHostModified",null),i=d([V("esri.layers.mixins.FeatureLayerBase")],i),i};let TQe=class extends EE{constructor(e){super(),this.type="aggregate",this.featureReductionProvider=e}get id(){return this.featureReductionProvider.id}get[Uk](){const e=this.featureReductionProvider.featureReduction;return e&&"popupTemplate"in e?e:null}},Hy=class extends bt($e){constructor(e){super(e),this.expression=null,this.title=null,this.returnType=null}};d([f({type:String,json:{write:!0}})],Hy.prototype,"expression",void 0),d([f({type:String,json:{write:!0}})],Hy.prototype,"title",void 0),d([f({type:String,json:{write:!0}})],Hy.prototype,"returnType",void 0),Hy=d([V("esri.layers.support.ExpressionInfo")],Hy);var $H,RS;let io=(RS=class extends $e{constructor(e){super(e),this.isAutoGenerated=!1,this.name=null,this.alias=null,this.onStatisticField=null,this.onStatisticExpression=null,this.statisticType=null}clone(){return new $H({name:this.name,alias:this.alias,isAutoGenerated:this.isAutoGenerated,onStatisticExpression:he(this.onStatisticExpression),onStatisticField:this.onStatisticField,statisticType:this.statisticType})}},$H=RS,RS);d([f({type:Boolean,json:{write:!0}})],io.prototype,"isAutoGenerated",void 0),d([f({type:String,json:{write:!0}})],io.prototype,"name",void 0),d([f({type:String,json:{write:!0}})],io.prototype,"alias",void 0),d([f({type:String,json:{write:!0}})],io.prototype,"onStatisticField",void 0),d([f({type:Hy,json:{write:!0}})],io.prototype,"onStatisticExpression",void 0),d([f({type:String,json:{write:!0}})],io.prototype,"statisticType",void 0),io=$H=d([V("esri.layers.support.AggregateField")],io);let _v=class extends $e{constructor(){super(...arguments),this.type=null}};d([f({type:["selection","cluster","binning"],readOnly:!0,json:{read:!1,write:!0}})],_v.prototype,"type",void 0),_v=d([V("esri.layers.support.FeatureReduction")],_v);const aJ="__begin__",oJ="__end__",IQe=new RegExp(aJ,"ig"),MQe=new RegExp(oJ,"ig"),poe=new RegExp("^"+aJ,"i"),foe=new RegExp(oJ+"$","i"),ez='"',CQe=ez+" + ",EQe=" + "+ez;function kQe(t){return t.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function AQe(t){return t.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function lJ(t){const e={expression:"",type:"none"};return t.labelExpressionInfo?t.labelExpressionInfo.value?(e.expression=t.labelExpressionInfo.value,e.type="conventional"):t.labelExpressionInfo.expression&&(e.expression=t.labelExpressionInfo.expression,e.type="arcade"):t.labelExpression!=null&&(e.expression=kQe(t.labelExpression),e.type="conventional"),e}function PQe(t){const e=lJ(t);if(!e)return null;switch(e.type){case"conventional":return SH(e.expression);case"arcade":return e.expression}return null}function OQe(t){const e=lJ(t);if(!e)return null;switch(e.type){case"conventional":return FQe(e.expression);case"arcade":return txe(e.expression)}return null}function SH(t){let e;return t?(e=Ho(t,i=>aJ+'$feature["'+i+'"]'+oJ),e=poe.test(e)?e.replace(poe,""):ez+e,e=foe.test(e)?e.replace(foe,""):e+ez,e=e.replaceAll(IQe,CQe).replaceAll(MQe,EQe)):e='""',e}const LQe=/^\s*\{([^}]+)\}\s*$/i;function FQe(t){const e=t==null?void 0:t.match(LQe);return(e==null?void 0:e[1].trim())||null}const RQe=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*$/i,zQe=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,NQe=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(.+)(\1)\s*\));?\s*$/i;function txe(t){if(!t)return null;let e=RQe.exec(t)||zQe.exec(t);return e?e[1]||e[3]:(e=NQe.exec(t),e?e[2]:null)}var TH,zS;let fm=(zS=class extends $e{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(e,i){return i.value?SH(i.value):e}writeExpression(e,i,r){this.value!=null&&(e=SH(this.value)),e!=null&&(i[r]=e)}clone(){return new TH({expression:this.expression,title:this.title,value:this.value})}},TH=zS,zS);d([f({type:String,json:{write:{writerEnsuresNonNull:!0}}})],fm.prototype,"expression",void 0),d([je("expression",["expression","value"])],fm.prototype,"readExpression",null),d([Ge("expression")],fm.prototype,"writeExpression",null),d([f({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],fm.prototype,"title",void 0),d([f({json:{read:!1,write:!1}})],fm.prototype,"value",void 0),fm=TH=d([V("esri.layers.support.LabelExpressionInfo")],fm);var IH;const kO=new jt({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function AO(t,e,i){return{enabled:!p9(i==null?void 0:i.layer)}}function ixe(t){var e;return!t||t.origin!=="service"&&((e=t.layer)==null?void 0:e.type)!=="map-image"}function DQe(t){return(t==null?void 0:t.type)==="map-image"}function rxe(t){var e,i;return!!DQe(t)&&!!((i=(e=t.capabilities)==null?void 0:e.exportMap)!=null&&i.supportsArcadeExpressionForLabeling)}function jQe(t){return ixe(t)||rxe(t==null?void 0:t.layer)}var NS;let Lt=(NS=class extends $e{static evaluateWhere(e,i){const r=(n,s,a)=>{switch(s){case"=":return n==a;case"<>":return n!=a;case">":return n>a;case">=":return n>=a;case"<":return n<a;case"<=":return n<=a}return!1};try{if(e==null)return!0;const n=e.split(" ");if(n.length===3)return r(i[n[0]],n[1],n[2]);if(n.length===7){const s=r(i[n[0]],n[1],n[2]),a=n[3],o=r(i[n[4]],n[5],n[6]);switch(a){case"AND":return s&&o;case"OR":return s||o}}return!1}catch{}}constructor(e){super(e),this.type="label",this.name=null,this.allowOverrun=!1,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition="curved",this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.repeatLabelDistance=null,this.symbol=lXe,this.useCodedValues=void 0,this.where=null}readLabelExpression(e,i){const r=i.labelExpressionInfo;if(!r||!r.value&&!r.expression)return e}writeLabelExpression(e,i,r){if(this.labelExpressionInfo){if(this.labelExpressionInfo.value!=null)e=AQe(this.labelExpressionInfo.value);else if(this.labelExpressionInfo.expression!=null){const n=txe(this.labelExpressionInfo.expression);n&&(e="["+n+"]")}}e!=null&&(i[r]=e)}writeLabelExpressionInfo(e,i,r,n){if(e==null&&this.labelExpression!=null&&ixe(n))e=new fm({expression:this.getLabelExpressionArcade()});else if(!e)return;const s=e.toJSON(n);s.expression&&(i[r]=s)}writeMaxScale(e,i){(e||this.minScale)&&(i.maxScale=e)}writeMinScale(e,i){(e||this.maxScale)&&(i.minScale=e)}getLabelExpression(){return lJ(this)}getLabelExpressionArcade(){return PQe(this)}getLabelExpressionSingleField(){return OQe(this)}hash(){return JSON.stringify(this)}clone(){return new IH({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:he(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:he(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}},IH=NS,NS);d([f({type:String,json:{write:!0}})],Lt.prototype,"name",void 0),d([f({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1},"portal-item":{default:!1,write:{overridePolicy:AO}}}}})],Lt.prototype,"allowOverrun",void 0),d([f({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1},"portal-item":{default:"static",write:{overridePolicy:AO}}}}})],Lt.prototype,"deconflictionStrategy",void 0),d([f({type:String,json:{write:{overridePolicy(t,e,i){return this.labelExpressionInfo&&(i==null?void 0:i.origin)==="service"&&rxe(i.layer)?{enabled:!1}:{allowNull:!0}}}}})],Lt.prototype,"labelExpression",void 0),d([je("labelExpression")],Lt.prototype,"readLabelExpression",null),d([Ge("labelExpression")],Lt.prototype,"writeLabelExpression",null),d([f({type:fm,json:{write:{overridePolicy:(t,e,i)=>jQe(i)?{allowNull:!0}:{enabled:!1}}}})],Lt.prototype,"labelExpressionInfo",void 0),d([Ge("labelExpressionInfo")],Lt.prototype,"writeLabelExpressionInfo",null),d([f({type:kO.apiValues,json:{type:kO.jsonValues,read:kO.read,write:kO.write}})],Lt.prototype,"labelPlacement",void 0),d([f({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],Lt.prototype,"labelPosition",void 0),d([f({type:Number})],Lt.prototype,"maxScale",void 0),d([Ge("maxScale")],Lt.prototype,"writeMaxScale",null),d([f({type:Number})],Lt.prototype,"minScale",void 0),d([Ge("minScale")],Lt.prototype,"writeMinScale",null),d([f({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:AO}}}}})],Lt.prototype,"repeatLabel",void 0),d([f({type:Number,cast:$i,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:AO}}}}})],Lt.prototype,"repeatLabelDistance",void 0),d([f({types:LBe,json:{origins:{"web-scene":{types:FBe,write:eoe,default:null}},write:eoe,default:null}})],Lt.prototype,"symbol",void 0),d([f({type:Boolean,json:{write:!0}})],Lt.prototype,"useCodedValues",void 0),d([f({type:String,json:{write:!0}})],Lt.prototype,"where",void 0),Lt=IH=d([V("esri.layers.support.LabelClass")],Lt);var MH;let bd=MH=class extends $e{constructor(t){super(t),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){var t;return new MH({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:((t=this.symbol)==null?void 0:t.clone())??null})}getMeshHash(){const t=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${t}`}};d([f({type:String,json:{write:!0}})],bd.prototype,"description",void 0),d([f({type:String,json:{write:!0}})],bd.prototype,"label",void 0),d([f({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],bd.prototype,"minValue",void 0),d([f({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],bd.prototype,"maxValue",void 0),d([f(QY)],bd.prototype,"symbol",void 0),bd=MH=d([V("esri.renderers.support.ClassBreakInfo")],bd);var CH;const nxe="log",XL="percent-of-total",QL="field",PO=new jt({esriNormalizeByLog:nxe,esriNormalizeByPercentOfTotal:XL,esriNormalizeByField:QL}),VQe=Wn(bd);let rs=CH=class extends KT(_c){constructor(t){super(t),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(t,e,i){if(!Array.isArray(t))return;let r=e.minValue;return t.map(n=>{const s=new bd;return s.read(n,i),s.minValue==null&&(s.minValue=r),s.maxValue==null&&(s.maxValue=s.minValue),r=s.maxValue,s})}writeClassBreakInfos(t,e,i,r){const n=t.map(s=>s.write({},r));this._areClassBreaksConsecutive()&&n.forEach(s=>delete s.classMinValue),e[i]=n}castField(t){return t==null?t:typeof t=="function"?(Ie.getLogger(this).error(".field: field must be a string value"),null):kk(t)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let t=this._get("normalizationType");const e=!!this.normalizationField,i=this.normalizationTotal!=null;return e||i?(t=e&&QL||i&&XL||null,e&&i&&Ie.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):t!==QL&&t!==XL||(t=null),t}set normalizationType(t){this._set("normalizationType",t)}addClassBreakInfo(t,e,i){let r=null;r=typeof t=="number"?new bd({minValue:t,maxValue:e,symbol:A0e(i)}):VQe(he(t)),this.classBreakInfos.push(r),this.classBreakInfos.length===1&&this.notifyChange("minValue")}removeClassBreakInfo(t,e){const i=this.classBreakInfos.length;for(let r=0;r<i;r++){const n=[this.classBreakInfos[r].minValue,this.classBreakInfos[r].maxValue];if(n[0]===t&&n[1]===e){this.classBreakInfos.splice(r,1);break}}}getBreakIndex(t,e){return this.valueExpression&&(e==null?void 0:e.arcade)==null&&Ie.getLogger(this).warn(""),this.valueExpression?this._getBreakIndexForExpression(t,e):this._getBreakIndexForField(t)}async getClassBreakInfo(t,e){let i=e;this.valueExpression&&(e==null?void 0:e.arcade)==null&&(i={...i,arcade:await Vd()});const r=this.getBreakIndex(t,i);return r!==-1?this.classBreakInfos[r]:null}getSymbol(t,e){if(this.valueExpression&&(e==null?void 0:e.arcade)==null)return void Ie.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this.getBreakIndex(t,e);return i>-1?this.classBreakInfos[i].symbol:this.defaultSymbol}async getSymbolAsync(t,e){let i=e;if(this.valueExpression&&(e==null?void 0:e.arcade)==null){const n=await Vd(),{arcadeUtils:s}=n;s.hasGeometryOperations(this.valueExpression)&&await s.enableGeometryOperations(),i={...i,arcade:n}}const r=this.getBreakIndex(t,i);return r>-1?this.classBreakInfos[r].symbol:this.defaultSymbol}get symbols(){const t=[];return this.classBreakInfos.forEach(e=>{e.symbol&&t.push(e.symbol)}),this.defaultSymbol&&t.push(this.defaultSymbol),t}getAttributeHash(){var t;return((t=this.visualVariables)==null?void 0:t.reduce((e,i)=>e+i.getAttributeHash(),""))??""}getMeshHash(){const t=JSON.stringify(this.backgroundFillSymbol),e=JSON.stringify(this.defaultSymbol),i=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${t}.${e}.${this.classBreakInfos.reduce((r,n)=>r+n.getMeshHash(),"")}.${i}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){var t,e;return new CH({field:this.field,backgroundFillSymbol:(t=this.backgroundFillSymbol)==null?void 0:t.clone(),defaultLabel:this.defaultLabel,defaultSymbol:(e=this.defaultSymbol)==null?void 0:e.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:he(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:he(this.visualVariables),legendOptions:he(this.legendOptions),authoringInfo:he(this.authoringInfo)})}async collectRequiredFields(t,e){const i=[this.collectVVRequiredFields(t,e),this.collectSymbolFields(t,e)];await Promise.all(i)}async collectSymbolFields(t,e){const i=[...this.symbols.map(r=>r.collectRequiredFields(t,e)),za(t,e,null,this.valueExpression)];ho(t,e,this.field),ho(t,e,this.normalizationField),await Promise.all(i)}_getBreakIndexForExpression(t,e){const{viewingMode:i,scale:r,spatialReference:n,arcade:s,timeZone:a}=e??{},{valueExpression:o}=this;let l=this._compiledValueExpression.valueExpression===o?this._compiledValueExpression.compiledFunction:null;const c=s.arcadeUtils;if(!l){const m=c.createSyntaxTree(o);l=c.createFunction(m),this._compiledValueExpression.compiledFunction=l}this._compiledValueExpression.valueExpression=o;const h=c.executeFunction(l,c.createExecContext(t,c.getViewInfo({viewingMode:i,scale:r,spatialReference:n}),a));return this._getBreakIndexfromInfos(h)}_getBreakIndexForField(t){const e=this.field,i=t.attributes,r=this.normalizationType;let n=parseFloat(i[e]);if(r){const s=this.normalizationTotal,a=parseFloat(this.normalizationField?i[this.normalizationField]:void 0);if(r===nxe)n=Math.log(n)*Math.LOG10E;else if(r!==XL||s==null||isNaN(s)){if(r===QL&&!isNaN(a)){if(isNaN(n)||isNaN(a))return-1;n/=a}}else n=n/s*100}return this._getBreakIndexfromInfos(n)}_getBreakIndexfromInfos(t){const e=this.isMaxInclusive;if(t!=null&&typeof t=="number"&&!isNaN(t))for(let i=0;i<this.classBreakInfos.length;i++){const r=[this.classBreakInfos[i].minValue,this.classBreakInfos[i].maxValue];if(r[0]<=t&&(e?t<=r[1]:t<r[1]))return i}return-1}_areClassBreaksConsecutive(){const t=this.classBreakInfos,e=t.length;for(let i=1;i<e;i++)if(t[i-1].maxValue!==t[i].minValue)return!1;return!0}};d([f(KY)],rs.prototype,"backgroundFillSymbol",void 0),d([f({type:[bd],json:{write:{isRequired:!0}}})],rs.prototype,"classBreakInfos",void 0),d([je("classBreakInfos")],rs.prototype,"readClassBreakInfos",null),d([Ge("classBreakInfos")],rs.prototype,"writeClassBreakInfos",null),d([f({type:String,json:{write:!0}})],rs.prototype,"defaultLabel",void 0),d([f(S5)],rs.prototype,"defaultSymbol",void 0),d([f({type:String,json:{write:!0}})],rs.prototype,"field",void 0),d([_i("field")],rs.prototype,"castField",null),d([f({type:Boolean})],rs.prototype,"isMaxInclusive",void 0),d([f({type:eJ,json:{write:!0}})],rs.prototype,"legendOptions",void 0),d([f({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return this.classBreakInfos.length!==0&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],rs.prototype,"minValue",null),d([f({type:String,json:{write:!0}})],rs.prototype,"normalizationField",void 0),d([f({type:Number,json:{write:!0}})],rs.prototype,"normalizationTotal",void 0),d([f({type:PO.apiValues,value:null,json:{type:PO.jsonValues,read:PO.read,write:PO.write}})],rs.prototype,"normalizationType",null),d([pt({classBreaks:"class-breaks"})],rs.prototype,"type",void 0),d([f({type:String,json:{write:!0}})],rs.prototype,"valueExpression",void 0),d([f({type:String,json:{write:!0}})],rs.prototype,"valueExpressionTitle",void 0),rs=CH=d([V("esri.renderers.ClassBreaksRenderer")],rs);const EH=-3,UQe=EH-1,BQe=!!ve("esri-tests-disable-gpu-memory-measurements");let qQe=class{get size(){return this._size}constructor(e=10485760){this._maxSize=e,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._users=new Map,this._sizeLimits=new Map}destroy(){this.clearAll(),this._sizeLimits.clear(),this._users.clear(),this._db=null}register(e){this._users.set(e.id.slice(0,-1),e)}deregister(e){this.clear(e),this._sizeLimits.delete(e),this._users.delete(e.id.slice(0,-1))}get maxSize(){return this._maxSize}set maxSize(e){this._maxSize=Math.max(e,-1),this._checkSize()}getSize(e,i){const r=this._db.get(e.id+i);return(r==null?void 0:r.size)??0}put(e,i,r,n,s){i=e.id+i;const a=this._db.get(i);if(a&&(this._size-=a.size,e.size-=a.size,this._db.delete(i),a.entry!==r&&this._notifyRemove(i,a.entry,a.size,0)),n>this._maxSize)return void this._notifyRemove(i,r,n,0);if(r===void 0)return void console.warn("Refusing to cache undefined entry ");if(!n||n<0)return BQe||console.warn(`Refusing to cache entry with size ${n} for key ${i}`),void this._notifyRemove(i,r,0,0);const o=1+Math.max(s,UQe)-EH;this._db.set(i,new HQe(r,n,o)),this._size+=n,e.size+=n,this._checkSize()}updateSize(e,i){i=e.id+i;const r=this._db.get(i);if(!r)return;this._size-=r.size,e.size-=r.size;let n=r.entry.usedMemory;for(;n>this._maxSize;){const s=this._notifyRemove(i,r.entry,n,1);if(!(s!=null&&s>0))return void this._db.delete(i);n=s}r.size=n,this._size+=n,e.size+=n,this._checkSize()}pop(e,i){i=e.id+i;const r=this._db.get(i);if(r)return this._size-=r.size,e.size-=r.size,this._db.delete(i),++this._hit,r.entry;++this._miss}get(e,i){i=e.id+i;const r=this._db.get(i);if(r!==void 0)return this._db.delete(i),r.lives=r.lifetime,this._db.set(i,r),++this._hit,r.entry;++this._miss}peek(e,i){const r=this._db.get(e.id+i);return r?++this._hit:++this._miss,r==null?void 0:r.entry}get performanceInfo(){const e={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},i={},r=new Array;this._db.forEach((a,o)=>{const l=a.lifetime;r[l]=(r[l]||0)+a.size,this._users.forEach(c=>{const{id:h,name:m}=c;if(o.startsWith(h)){const g=i[m]||0;i[m]=g+a.size}})});const n={};this._users.forEach(a=>{const o=a.name;if("hitRate"in a&&typeof a.hitRate=="number"&&!isNaN(a.hitRate)&&a.hitRate>0){const l=i[o]||0;i[o]=l,n[o]=Math.round(100*a.hitRate)+"%"}else n[o]="0%"});const s=Object.keys(i);s.sort((a,o)=>i[o]-i[a]),s.forEach(a=>e[a]=Math.round(i[a]/2**20)+"MB / "+n[a]);for(let a=r.length-1;a>=0;--a){const o=r[a];o&&(e["Priority "+(a+EH-1)]=Math.round(o/this._size*100)+"%")}return e}resetStats(){this._hit=this._miss=0,this._users.forEach(e=>e.resetHitRate())}clear(e){const i=e.id;this._db.forEach((r,n)=>{n.startsWith(i)&&(this._size-=r.size,this._db.delete(n),this._notifyRemove(n,r.entry,r.size,0))}),e.size=0}clearAll(){this._db.forEach((e,i)=>this._notifyRemove(i,e.entry,e.size,0)),this._users.forEach(e=>e.size=0),this._size=0,this._db.clear()}*values(e){for(const[i,r]of this._db)i.startsWith(e.id)&&(yield r.entry)}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(e,i,r,n){var o;const s=(o=this._users.get(e.split(nU)[0]))==null?void 0:o.removeFunc,a=s==null?void 0:s(i,n,r);return typeof a=="number"?a:null}_checkSize(){this._sizeLimits.forEach((e,i)=>this._checkSizeLimits(e,i)),this._checkSizeLimits(this.maxSize)}setMaxSize(e,i){i==null||i<=0?this._sizeLimits.delete(e):this._sizeLimits.set(e,i)}_checkSizeLimits(e,i){const r=i??this;if(r.size<=e)return;const n=i==null?void 0:i.id;let s=!0;for(;s;){s=!1;for(const[a,o]of this._db)if(o.lifetime===0&&(!n||a.startsWith(n))){const l=i??this._users.get(a.split(nU)[0]);if(this._purgeItem(a,o,l),r.size<=.9*e)return;s||(s=this._db.has(a))}}for(const[a,o]of this._db)if(!n||a.startsWith(n)){const l=i??this._users.get(a.split(nU)[0]);if(this._purgeItem(a,o,l),r.size<=.9*e)return}}_purgeItem(e,i,r){if(this._db.delete(e),i.lives<=1){this._size-=i.size,r&&(r.size-=i.size);const n=this._notifyRemove(e,i.entry,i.size,1);n!=null&&n>0&&(this._size+=n,r&&(r.size+=n),i.lives=i.lifetime,i.size=n,this._db.set(e,i))}else--i.lives,this._db.set(e,i)}},HQe=class{constructor(e,i,r){this.entry=e,this.size=i,this.lifetime=r,this.lives=r}};const nU=":";let sxe=class{constructor(e,i){this.removeFunc=i,this._storage=new qQe,this.id="",this.name="",this.size=0,this._storage.maxSize=e,this._storage.register(this)}destroy(){this._storage.deregister(this),this._storage.destroy(),this._storage=null}put(e,i,r=1){this._storage.put(this,e,i,r,1)}pop(e){return this._storage.pop(this,e)}get(e){return this._storage.get(this,e)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(e){this._storage.maxSize=e}resetHitRate(){}},moe=class axe{static parse(e,i,r){const n=[],s=[],a=e.split(";");for(let o=0;o<a.length;o++){const l=a[o];if(l){if(l.includes("po:")){const c=l.slice(3).split("|");if(c.length===3){const[h,m,g]=c,v=WQe(h,m,g);v&&s.push(v)}continue}if(l.includes("|")){for(const c of l.split("|"))if(i.has(c)){n.push(c);break}}else if(i.has(l))n.push(l);else if(o===0){n.length=0,n.push(ZQe(r));break}}}return new axe(n,s)}constructor(e,i){this.partNames=e,this.overrides=i}};function GQe(t,e){if(t==="DashTemplate")return e.split(" ").map(i=>Number(i));if(t==="Color"){const i=new Se(e).toRgba();return[i[0],i[1],i[2],255*i[3]]}return Number(e)}function WQe(t,e,i){return{primitiveName:t,propertyName:e,value:GQe(e,i),defaultValue:null}}function ZQe(t){switch(t){case"esriGeometryPolyline":return"Invalid_L";case"esriGeometryPolygon":return"Invalid_A";default:return"Invalid_P"}}var DS;let qh=(DS=class{},DS.instance=new zl("Etc/UTC"),DS);function YQe(t){return t instanceof v_?t===qh.instance:(t==null?void 0:t.toString().toLowerCase())==="unknown"}function oEt(t){return YQe(t)?qh.instance:t}function JQe(t){return"timeZone"in t}function XQe(t){return"timeZone"in t}function QQe(t){return"dateFieldsTimeZone"in t}const KQe=new Map;let OE=class KL{static fromJSON(e){return new KL(e.fields,e.timeZoneByFieldName)}static fromLayer(e){return new KL(e.fields??[],yoe(e))}static fromLayerJSON(e){return new KL(e.fields??[],yoe(e))}constructor(e=[],i){var n;this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=e||[],this._timeZoneByFieldName=i?new Map(i):null;const r=[];for(const s of this.fields){const a=s==null?void 0:s.name,o=goe(a);if(a&&o){const l=E0(a);this._fieldsMap.set(a,s),this._fieldsMap.set(l,s),this._normalizedFieldsMap.set(o,s),r.push(`${l}:${s.type}:${(n=this._timeZoneByFieldName)==null?void 0:n.get(a)}`),KD(s)?(this.dateFields.push(s),this._dateFieldsSet.add(s)):QD(s)&&(this._numericFieldsSet.add(s),this.numericFields.push(s)),Sne(s)||Tne(s)||(s.editable=s.editable==null||!!s.editable,s.nullable=s.nullable==null||!!s.nullable)}}r.sort(),this.uid=r.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const e of this.fields)Sne(e)||Tne(e)||e.nullable||cUe(e)!==void 0||this._requiredFields.push(e)}return this._requiredFields}equals(e){return this.uid===(e==null?void 0:e.uid)}has(e){return this.get(e)!=null}get(e){if(!e)return;let i=this._fieldsMap.get(e);return i||(i=this._fieldsMap.get(E0(e))??this._normalizedFieldsMap.get(goe(e)),i&&this._fieldsMap.set(e,i),i)}getTimeZone(e){const i=this.get(e&&typeof e!="string"?e.name:e);return i?this._timeZoneByFieldName?this._timeZoneByFieldName.get(i.name):i.type==="date"||i.type==="esriFieldTypeDate"?(Ie.getLogger("esri.layers.support.FieldsIndex").errorOnce(new ae("getTimeZone:no-timezone-information",`no time zone information for field '${i.name}'`)),Vp):oxe.has(i.type)?Pv:null:null}getLuxonTimeZone(e){const i=this.getTimeZone(e);return i?i===Pv?qh.instance:i===Vp?Ms.utcInstance:Gp(KQe,i,()=>zl.create(i)):null}isDateField(e){return this._dateFieldsSet.has(this.get(e))}isTimeOnlyField(e){return uY(this.get(e))}isNumericField(e){return this._numericFieldsSet.has(this.get(e))}normalizeFieldName(e){var i;return((i=this.get(e))==null?void 0:i.name)??void 0}toJSON(){return{fields:this.fields.map(e=>hE(e)?e.toJSON():e),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}};function E0(t){return t.trim().toLowerCase()}function goe(t){var e;return((e=Y6e(t))==null?void 0:e.toLowerCase())??""}const oxe=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function yoe(t){const e=new Map;if(!t.fields)return e;const i=t.datesInUnknownTimezone===!0,{timeInfo:r,editFieldsInfo:n}=t,s=(r?"startField"in r?r.startField:r.startTimeField:"")??"",a=(r?"endField"in r?r.endField:r.endTimeField:"")??"",o=QQe(t)?t.dateFieldsTimeZone??null:t.dateFieldsTimeReference?eL(t.dateFieldsTimeReference):null,l=n?JQe(n)?n.timeZone??o:n.dateFieldsTimeReference?eL(n.dateFieldsTimeReference):o??Vp:null,c=r?XQe(r)?r.timeZone??o:r.timeReference?eL(r.timeReference):o:null,h=new Map([[E0((n==null?void 0:n.creationDateField)??""),l],[E0((n==null?void 0:n.editDateField)??""),l],[E0(s),c],[E0(a),c]]);for(const{name:m,type:g}of t.fields)if(oxe.has(g))e.set(m,Pv);else if(g!=="date"&&g!=="esriFieldTypeDate")e.set(m,null);else if(i)e.set(m,Pv);else{const v=h.get(E0(m??""))??o;e.set(m,v)}return e}const lxe={TypeNotAllowedInFeature:"Feature attributes only support dates, numbers, strings, guids.",LogicError:"Logic error - {reason}",CannotCompareDateAndTime:"Cannot compare date or dateonly with timeonly types",NeverReach:"Encountered unreachable logic",AsyncNotEnabled:"Async Arcade must be enabled for this script",ModuleAccessorMustBeString:"Module accessor must be a string",ModuleExportNotFound:"Module has no export with provided identifier",ModulesNotSupported:"Current profile does not support modules",ArrayAccessMustBeNumber:"Array accessor must be a number",FunctionNotFound:"Function not found",FieldNotFound:"Key not found - {key}",CircularModules:"Circular module dependencies are not allowed",Cancelled:"Execution cancelled",UnsupportedHashType:"Type not supported in hash function",IllegalResult:"Value is not a supported return type",PortalRequired:"Portal is required",InvalidParameter:"Invalid parameter",WrongNumberOfParameters:"Call with wrong number of parameters",Unrecognized:"Unrecognized code structure",UnrecognizedType:"Unrecognized type",WrongSpatialReference:"Cannot work with geometry in this spatial reference. It is different to the execution spatial reference",BooleanConditionRequired:"Conditions must use booleans",NoFunctionInDictionary:"Dictionaries cannot contain functions.",NoFunctionInArray:"Arrays cannot contain functions.",NoFunctionInTemplateLiteral:"Template Literals do not expect functions by value.",KeyAccessorMustBeString:"Accessor must be a string",KeyMustBeString:"Object keys must be a string",Immutable:"Object is immutable",UnexpectedToken:"Unexpected token",MemberOfNull:"Cannot access property of null object",MaximumCallDepth:"Exceeded maximum function depth",OutOfBounds:"Out of bounds",InvalidIdentifier:"Identifier not recognized",CallNonFunction:"Expression is not a function",InvalidMemberAccessKey:"Cannot access value using a key of this type",AssignModuleFunction:"Cannot assign function to module variable",UnsupportUnaryOperator:"Unsupported unary operator",UnsupportedOperator:"Unsupported operator",LogicalExpressionOnlyBoolean:"Logical expressions must be boolean",LogicExpressionOrAnd:"Logical expression can only be combined with || or &&",CannotChangeTimeZoneTime:"Cannot change the timezone of a Time",CannotChangeTimeZoneDateOnly:"Cannot change the timezone of a DateOnly",FeatureSetDoesNotHaveSubtypes:"FeatureSet does not have subtypes"};let eKe=class extends Error{constructor(...e){super(...e)}},voe=class cxe extends eKe{constructor(e,i){super(cJ(i)+e.message,{cause:e}),this.loc=null,Error.captureStackTrace&&Error.captureStackTrace(this,cxe),i!=null&&i.loc&&(this.loc=i.loc)}},tKe=class uxe extends Error{constructor(e,i,r,n){super("Execution error - "+cJ(r)+Ho(lxe[i],n)),this.loc=null,this.declaredRootClass="esri.arcade.arcadeexecutionerror",Error.captureStackTrace&&Error.captureStackTrace(this,uxe),r!=null&&r.loc&&(this.loc=r.loc)}};function cJ(t){var e,i;return t&&t.loc?`Line : ${(e=t.loc.start)==null?void 0:e.line}, ${(i=t.loc.start)==null?void 0:i.column}: `:""}let cEt=class dxe extends Error{constructor(e,i,r,n){super("Compilation error - "+cJ(r)+Ho(lxe[i],n)),this.loc=null,this.declaredRootClass="esri.arcade.arcadecompilationerror",Error.captureStackTrace&&Error.captureStackTrace(this,dxe),r!=null&&r.loc&&(this.loc=r.loc)}},uEt=class hxe extends Error{constructor(){super("Uncompilable code structures"),this.declaredRootClass="esri.arcade.arcadeuncompilableerror",Error.captureStackTrace&&Error.captureStackTrace(this,hxe)}};function dEt(t,e,i){return i.declaredRootClass==="esri.arcade.arcadeexecutionerror"||i.declaredRootClass==="esri.arcade.arcadecompilationerror"?i.loc===null&&(e!=null&&e.loc)?new voe(i,{cause:i}):i:(i.declaredRootClass==="esri.arcade.featureset.support.featureseterror"||i.declaredRootClass==="esri.arcade.featureset.support.sqlerror"||i.declaredRootClass,e!=null&&e.loc?new voe(i,{cause:i}):i)}const iKe={UnrecognizedUri:"Unrecognized uri - {uri}",UnsupportedUriProtocol:"Unrecognized uri protocol"};let hEt=class pxe extends Error{constructor(e,i){super(Ho(iKe[e],i)),this.declaredRootClass="esri.arcade.arcademoduleerror",Error.captureStackTrace&&Error.captureStackTrace(this,pxe)}};function eF(t){return t.toLowerCase().replaceAll(/[\s-]+/g,"")}let pEt=class{constructor(e,i){const r=new Map;for(const n of e){const s=eF(n);if(r.has(s))throw new Error(`${n} already added as ${r.get(s)}`);r.set(s,n)}if(i!=null)for(const[n,s]of i){const a=eF(n);if(r.has(a))throw new Error(`${n} already associated with ${r.get(a)}`);r.set(a,s)}this._enumMap=r}lookup(e){return this._enumMap.get(eF(e))}get(e){const i=this.lookup(e);if(i==null)throw new tKe(null,"InvalidParameter",null);return i}};const rKe={TimeZoneNotRecognized:"Timezone identifier has not been recognized."};let nKe=class fxe extends Error{constructor(e,i){super(Ho(rKe[e],i)),this.declaredRootClass="esri.arcade.arcadedate.dateerror",Error.captureStackTrace&&Error.captureStackTrace(this,fxe)}};function L1(t,e,i){return t<e?t-e:t>i?t-i:0}function F1(t,e,i){return t<e?e:t>i?i:t}let $p=class is{constructor(e){this._date=e,this.declaredRootClass="esri.arcade.arcadedate"}static fromParts(e=0,i=1,r=1,n=0,s=0,a=0,o=0,l){if(isNaN(e)||isNaN(i)||isNaN(r)||isNaN(n)||isNaN(s)||isNaN(a)||isNaN(o))return null;const c=ut.local(e,i).daysInMonth;let h=ut.fromObject({day:F1(r,1,c),year:e,month:F1(i,1,12),hour:F1(n,0,23),minute:F1(s,0,59),second:F1(a,0,59),millisecond:F1(o,0,999)},{zone:Rh(l)});return h=h.plus({months:L1(i,1,12),days:L1(r,1,c),hours:L1(n,0,23),minutes:L1(s,0,59),seconds:L1(a,0,59),milliseconds:L1(o,0,999)}),new is(h)}static get systemTimeZoneCanonicalName(){return Intl.DateTimeFormat().resolvedOptions().timeZone??"system"}static arcadeDateAndZoneToArcadeDate(e,i){const r=Rh(i);return e.isUnknownTimeZone||r===qh.instance?is.fromParts(e.year,e.monthJS+1,e.day,e.hour,e.minute,e.second,e.millisecond,r):new is(e._date.setZone(r))}static dateJSToArcadeDate(e){return new is(ut.fromJSDate(e,{zone:"system"}))}static dateJSAndZoneToArcadeDate(e,i="system"){const r=Rh(i);return new is(ut.fromJSDate(e,{zone:r}))}static unknownEpochToArcadeDate(e){return new is(ut.fromMillis(e,{zone:qh.instance}))}static unknownDateJSToArcadeDate(e){return new is(ut.fromMillis(e.getTime(),{zone:qh.instance}))}static epochToArcadeDate(e,i="system"){const r=Rh(i);return new is(ut.fromMillis(e,{zone:r}))}static dateTimeToArcadeDate(e){return new is(e)}clone(){return new is(this._date)}changeTimeZone(e){const i=Rh(e);return is.dateTimeToArcadeDate(this._date.setZone(i))}static dateTimeAndZoneToArcadeDate(e,i){const r=Rh(i);return e.zone===qh.instance||r===qh.instance?is.fromParts(e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond,r):new is(e.setZone(r))}static nowToArcadeDate(e){const i=Rh(e);return new is(ut.fromJSDate(new Date,{zone:i}))}static nowUTCToArcadeDate(){return new is(ut.utc())}get isSystem(){return this.timeZone==="system"||this.timeZone===is.systemTimeZoneCanonicalName}equals(e){return this.isSystem&&e.isSystem?this.toNumber()===e.toNumber():this.isUnknownTimeZone===e.isUnknownTimeZone&&this._date.equals(e._date)}get isUnknownTimeZone(){return this._date.zone===qh.instance}get isValid(){return this._date.isValid}get hour(){return this._date.hour}get second(){return this._date.second}get day(){return this._date.day}get dayOfWeekISO(){return this._date.weekday}get dayOfWeekJS(){let e=this._date.weekday;return e>6&&(e=0),e}get millisecond(){return this._date.millisecond}get monthISO(){return this._date.month}get weekISO(){return this._date.weekNumber}get yearISO(){return this._date.weekYear}get monthJS(){return this._date.month-1}get year(){return this._date.year}get minute(){return this._date.minute}get zone(){return this._date.zone}get timeZoneOffset(){return this.isUnknownTimeZone?0:this._date.offset}get timeZone(){if(this.isUnknownTimeZone)return"unknown";if(this._date.zone.type==="system")return"system";const e=this.zone;return e.type==="fixed"?e.fixed===0?"UTC":e.formatOffset(0,"short"):e.name}stringify(){return JSON.stringify(this.toJSDate())}plus(e){return new is(this._date.plus(e))}diff(e,i){return this._date.diff(e._date,i)[i]}toISODate(){return this._date.toISODate()}toISOString(e){return e?this._date.toISO({suppressMilliseconds:!0,includeOffset:!this.isUnknownTimeZone}):this._date.toISO({includeOffset:!this.isUnknownTimeZone})}toISOTime(e,i){return this._date.toISOTime({suppressMilliseconds:e,includeOffset:i&&!this.isUnknownTimeZone})}toFormat(e,i){return this.isUnknownTimeZone&&(e=e.replaceAll("Z","")),this._date.toFormat(e,i)}toJSDate(){return this._date.toJSDate()}toSQLValue(){return this._date.toFormat("yyyy-LL-dd HH:mm:ss")}toSQLWithKeyword(){return`timestamp '${this.toSQLValue()}'`}toDateTime(){return this._date}toNumber(){return this._date.toMillis()}getTime(){return this._date.toMillis()}toUTC(){return new is(this._date.toUTC())}toLocal(){return new is(this._date.toLocal())}toString(){return this.toISOString(!0)}static fromReaderAsTimeStampOffset(e){if(!e)return null;const i=ut.fromISO(e,{setZone:!0});return new is(i)}};function Rh(t,e=!0){if(t instanceof v_)return t;switch(eF(t)){case"system":return"system";case"utc":return"UTC";case"unknown":return qh.instance}if(/^[+-]?[0-9]{1,2}(:[0-9]{2})?$/.test(t)){const r=Ms.parseSpecifier("UTC"+(t.startsWith("+")||t.startsWith("-")?"":"+")+t);if(r)return r}const i=zl.create(t);if(!i.isValid){if(e)throw new nKe("TimeZoneNotRecognized");return null}return i}function boe(t){t=t.replaceAll(/LTS|LT|L{1,4}|l{1,4}/g,"[$&]");let e="";const i=/(\[[^[]*\])|(\\)?([Hh]mm(ss)?|Mo|M{1,4}|Do|DDDo|D{1,4}|d{2,4}|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;for(const r of t.match(i)||[])switch(r){case"D":e+="d";break;case"DD":e+="dd";break;case"DDD":e+="o";break;case"d":e+="c";break;case"ddd":e+="ccc";break;case"dddd":e+="cccc";break;case"M":e+="L";break;case"MM":e+="LL";break;case"MMM":e+="LLL";break;case"MMMM":e+="LLLL";break;case"YY":e+="yy";break;case"Y":case"YYYY":e+="yyyy";break;case"Q":e+="q";break;case"X":case"x":e+=r;break;default:r.length>=2&&r.startsWith("[")&&r.endsWith("]")?e+=`'${r.slice(1,-1)}'`:e+=`'${r}'`}return e}const woe="esri.core.sql.dateonly";let mxe=class sc{constructor(e,i,r){this._year=e,this._month=i,this._day=r,this.declaredRootClass=woe}static isDateOnly(e){return typeof e=="object"&&e!=null&&"declaredRootClass"in e&&e.declaredRootClass===woe}get month(){return this._month}get monthJS(){return this._month-1}get year(){return this._year}get day(){return this._day}get isValid(){return this.toDateTime("unknown").isValid}equals(e){return sc.isDateOnly(e)&&e.day===this.day&&e.month===this.month&&e.year===this.year}clone(){return new sc(this._year,this._month,this._day)}toDateTime(e){return ut.fromObject({day:this.day,month:this.month,year:this.year},{zone:Rh(e)})}toDateTimeLuxon(e){return ut.fromObject({day:this.day,month:this.month,year:this.year},{zone:Rh(e)})}toString(){return`${this.year.toString().padStart(4,"0")}-${this.month.toString().padStart(2,"0")}-${this.day.toString().padStart(2,"0")}`}toFormat(e=null,i=!0){if(e===null||e==="")return this.toString();if(i&&(e=boe(e)),!e)return"";const r=this.toDateTime("unknown");return $p.dateTimeToArcadeDate(r).toFormat(e,{locale:Ol(),numberingSystem:"latn"})}toArcadeDate(){const e=this.toDateTime("unknown");return $p.dateTimeToArcadeDate(e)}toNumber(){return this.toDateTime("unknown").toMillis()}toJSDate(){return this.toDateTime("unknown").toJSDate()}toStorageFormat(){return this.toFormat("yyyy-LL-dd",!1)}toSQLValue(){return this.toFormat("yyyy-LL-dd",!1)}toSQLWithKeyword(){return"date '"+this.toFormat("yyyy-LL-dd",!1)+"'"}plus(e,i){return sc.fromDateTime(this.toUTCDateTime().plus({[e]:i}))}toUTCDateTime(){return ut.utc(this.year,this.month,this.day,0,0,0,0)}difference(e,i){switch(i.toLowerCase()){case"days":case"day":case"d":return this.toUTCDateTime().diff(e.toUTCDateTime(),"days").days;case"months":case"month":return this.toUTCDateTime().diff(e.toUTCDateTime(),"months").months;case"minutes":case"minute":case"m":return i==="M"?this.toUTCDateTime().diff(e.toUTCDateTime(),"months").months:this.toUTCDateTime().diff(e.toUTCDateTime(),"minutes").minutes;case"seconds":case"second":case"s":return this.toUTCDateTime().diff(e.toUTCDateTime(),"seconds").seconds;case"milliseconds":case"millisecond":case"ms":default:return this.toUTCDateTime().diff(e.toUTCDateTime(),"milliseconds").milliseconds;case"hours":case"hour":case"h":return this.toUTCDateTime().diff(e.toUTCDateTime(),"hours").hours;case"years":case"year":case"y":return this.toUTCDateTime().diff(e.toUTCDateTime(),"years").years}}static fromMilliseconds(e){const i=ut.fromMillis(e,{zone:Ms.utcInstance});return i.isValid?sc.fromParts(i.year,i.month,i.day):null}static fromSeconds(e){const i=ut.fromSeconds(e,{zone:Ms.utcInstance});return i.isValid?sc.fromParts(i.year,i.month,i.day):null}static fromReader(e){if(!e)return null;const i=e.split("-");return i.length!==3?null:new sc(parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10))}static fromParts(e,i,r){const n=new sc(e,i,r);return n.isValid===!1?null:n}static fromDateJS(e){return sc.fromParts(e.getFullYear(),e.getMonth()+1,e.getDay())}static fromDateTime(e){return sc.fromParts(e.year,e.month,e.day)}static fromSqlTimeStampOffset(e){return this.fromDateTime(e.toDateTime())}static fromString(e,i=null){if(e===""||e===null)return null;const r=[];if(i)(i=boe(i))&&r.push(i);else if(i===null||i===""){const n=ut.fromISO(e,{setZone:!0});return n.isValid?sc.fromParts(n.year,n.month,n.day):null}for(const n of r){const s=ut.fromFormat(e,i??n);if(s.isValid)return new sc(s.year,s.month,s.day)}return null}static fromNow(e="system"){const i=ut.fromJSDate(new Date).setZone(Rh(e));return new sc(i.year,i.month,i.day)}};function mEt(t){if(t==null)return null;switch(t.type){case"polygon":case"multipoint":case"polyline":return t.extent;case"point":return new Yt({xmin:t.x,ymin:t.y,xmax:t.x,ymax:t.y,spatialReference:t.spatialReference});case"extent":return t}return null}function gEt(t){if(t==null)return null;const e=t.clone();return t.cache._geVersion!==void 0&&(e.cache._geVersion=t.cache._geVersion),e}function OO(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t}function _oe(t){if(!t)return"";const e=/(a|A|hh?|HH?|mm?|ss?|SSS|S|.)/g;let i="";for(const r of t.match(e)||[])switch(r){case"SSS":case"m":case"mm":case"h":case"hh":case"H":case"HH":case"s":case"ss":i+=r;break;case"A":case"a":i+="a";break;default:i+=`'${r}'`}return i}const xoe="esri.core.sql.timeonly";let gxe=class Ch{constructor(e,i,r,n){this._hour=e,this._minute=i,this._second=r,this._millisecond=n,this.declaredRootClass=xoe}static isTimeOnly(e){return typeof e=="object"&&e!=null&&"declaredRootClass"in e&&e.declaredRootClass===xoe}get hour(){return this._hour}get minute(){return this._minute}get second(){return this._second}get millisecond(){return this._millisecond}equals(e){return Ch.isTimeOnly(e)&&e.hour===this.hour&&e.minute===this.minute&&e.second===this.second&&e.millisecond===this.millisecond}clone(){return new Ch(this.hour,this.minute,this.second,this.millisecond)}isValid(){return OO(this.hour)&&OO(this.minute)&&OO(this.second)&&OO(this.millisecond)&&this.hour>=0&&this.hour<24&&this.minute>=0&&this.minute<60&&this.second>=0&&this.second<60&&this.millisecond>=0&&this.millisecond<1e3}toString(){return`${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}`+(this.millisecond>0?"."+this.millisecond.toString().padStart(3,"0"):"")}toSQLValue(){return this.toString()}toSQLWithKeyword(){return`time '${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}${this.millisecond>0?"."+this.millisecond.toString().padStart(3,"0"):""}'`}toStorageString(){return`${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}`}toFormat(e=null){return e===null||e===""?this.toString():(e=_oe(e))?ut.local(1970,1,1,this._hour,this._minute,this._second,this._millisecond).toFormat(e,{locale:Ol(),numberingSystem:"latn"}):""}toNumber(){return this.millisecond+1e3*this.second+1e3*this.minute*60+60*this.hour*60*1e3}static fromParts(e,i,r,n){const s=new Ch(e,i,r,n);return s.isValid()?s:null}static fromReader(e){if(!e)return null;const i=e.split(":");return i.length!==3?null:new Ch(parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10),0)}static fromMilliseconds(e){if(e>864e5||e<0)return null;const i=Math.floor(e/1e3%60),r=Math.floor(e/6e4%60),n=Math.floor(e/36e5%24),s=Math.floor(e%1e3);return new Ch(n,r,i,s)}static fromDateJS(e){return new Ch(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}static fromDateTime(e){return new Ch(e.hour,e.minute,e.second,e.millisecond)}static fromSqlTimeStampOffset(e){return this.fromDateTime(e.toDateTime())}static fromString(e,i=null){if(e===""||e===null)return null;const r=[];i?(i=_oe(i))&&r.push(i):i!==null&&i!==""||(r.push("HH:mm:ss"),r.push("HH:mm:ss.SSS"),r.push("hh:mm:ss a"),r.push("hh:mm:ss.SSS a"),r.push("HH:mm"),r.push("hh:mm a"),r.push("H:mm"),r.push("h:mm a"),r.push("H:mm:ss"),r.push("h:mm:ss a"),r.push("H:mm:ss.SSS"),r.push("h:mm:ss.SSS a"));for(const n of r){const s=ut.fromFormat(e,n);if(s.isValid)return new Ch(s.hour,s.minute,s.second,s.millisecond)}return null}plus(e,i){switch(e){case"days":case"years":case"months":return this.clone();case"hours":case"minutes":case"seconds":case"milliseconds":return Ch.fromDateTime(this.toUTCDateTime().plus({[e]:i}))}return null}toUTCDateTime(){return ut.utc(1970,1,1,this.hour,this.minute,this.second,this.millisecond)}difference(e,i){switch(i.toLowerCase()){case"days":case"day":case"d":return this.toUTCDateTime().diff(e.toUTCDateTime(),"days").days;case"months":case"month":return this.toUTCDateTime().diff(e.toUTCDateTime(),"months").months;case"minutes":case"minute":case"m":return i==="M"?this.toUTCDateTime().diff(e.toUTCDateTime(),"months").months:this.toUTCDateTime().diff(e.toUTCDateTime(),"minutes").minutes;case"seconds":case"second":case"s":return this.toUTCDateTime().diff(e.toUTCDateTime(),"seconds").seconds;case"milliseconds":case"millisecond":case"ms":default:return this.toUTCDateTime().diff(e.toUTCDateTime(),"milliseconds").milliseconds;case"hours":case"hour":case"h":return this.toUTCDateTime().diff(e.toUTCDateTime(),"hours").hours;case"years":case"year":case"y":return this.toUTCDateTime().diff(e.toUTCDateTime(),"years").years}}};const sKe=["geometry","scale","timeProperties"];function yEt(t,e){if(e!=null)for(const i of sKe)e.hasArcadeDependency(i)&&t.add(i);return t}function aKe(t,e){return yxe.create(t,e,null,["$feature","$view"])}function oKe(t,e,i){return yxe.create(t,e,i,["$feature","$view","$config"])}let yxe=class vxe{static async create(e,i,r,n){const{arcade:s,Dictionary:a}=await Vd();let o;try{o=s.parseScript(e)}catch(v){throw new ae("arcade-bad-expression","Failed to parse arcade script",{script:e,error:v})}const l=s.scriptUsesGeometryEngine(o);l&&await s.enableGeometrySupport(),await s.loadDependentModules(new Set,o,null,!1,l);const c={vars:n.reduce((v,b)=>({...v,[b]:null}),{}),spatialReference:i,useAsync:!1},h=s.compileScript(o,c);let m=null;r!=null&&(m=new a(r),m.immutable=!0);const g=new a;return g.immutable=!1,g.setField("scale",0),new vxe(e,s,o,h,i,g,m,a)}constructor(e,i,r,n,s,a,o,l){this.script=e,this._arcade=i,this._syntaxTree=r,this._compiled=n,this._spatialReference=s,this._viewDict=a,this._configDict=o,this._dictionaryCtor=l,this._dependencies=new Map,this._featureReader=new bxe,this._dependencies.set("geometry",i.scriptTouchesGeometry(this._syntaxTree)),this._dependencies.set("scale",this._arcade.referencesMember(this._syntaxTree,"scale")),this._dependencies.set("timeProperties",this._arcade.scriptUsesViewProperties(this._syntaxTree,["timeProperties"]))}evaluate(e,i){var n;const r=(n=i.$view)==null?void 0:n.timeZone;if(i.$view){let s;if(this._viewDict.setField("scale",i.$view.scale),i.$view.timeProperties!=null){const{currentStart:a,currentEnd:o}=i.$view.timeProperties;s=new this._dictionaryCtor({currentStart:a!=null?r!=null?$p.epochToArcadeDate(a,r):$p.unknownEpochToArcadeDate(a):void 0,currentEnd:o!=null?r!=null?$p.epochToArcadeDate(o,r):$p.unknownEpochToArcadeDate(o):void 0,startIncluded:!0,endIncluded:!0})}this._viewDict.setField("timeProperties",s)}return this._compiled({vars:{$view:this._viewDict,$config:this._configDict,$feature:e},spatialReference:this._spatialReference,timeZone:r})}repurposeFeature(e,i){return this._featureReader.bind(e,i,this._spatialReference),this._featureReader}references(e){return this._dependencies.get(e)??!1}},bxe=class{constructor(){this._boundTarget=null,this._boundSchema={fields:null,fieldsIndex:null,spatialReference:null,get geometryType(){return null},get objectIdField(){return null}},this.arcadeDeclaredClass="esri.arcade.Feature",this._contextTimeZone=null}bind(e,i,r){const n=i??new OE(wxe(e.attributes));this._boundTarget=e,this._boundSchema.fields=n.fields,this._boundSchema.fieldsIndex=n,this._boundSchema.spatialReference=r}_getField(e){return this._boundSchema.fieldsIndex.get(e)}get contextTimeZone(){return this._contextTimeZone}set contextTimeZone(e){this._contextTimeZone=e}readArcadeFeature(){return this}hasField(e){return this._boundSchema.fieldsIndex.has(e)}geometry(){if("fromJSON"in this._boundTarget)return this._boundTarget.geometry;const e=jp(this._boundTarget.geometry);if(e){if(!this._boundSchema.spatialReference)throw new Error("InternalError: Expected spatial reference to be defined");e.spatialReference=this._boundSchema.spatialReference}return e}_hasGeometry(){return this._boundTarget.geometry!=null}isUnknownDateTimeField(e){return this._boundSchema.fieldsIndex.getTimeZone(e)===Pv}field(e,i=!0){const r=this._getField(e);if(r){const n=this._boundTarget.attributes[r.name];if(n==null)return null;switch(r.type){case"date-only":case"esriFieldTypeDateOnly":return mxe.fromReader(n);case"time-only":case"esriFieldTypeTimeOnly":return gxe.fromReader(n);case"esriFieldTypeTimestampOffset":case"timestamp-offset":return $p.fromReaderAsTimeStampOffset(n);case"date":case"esriFieldTypeDate":return this.isUnknownDateTimeField(e)?$p.unknownEpochToArcadeDate(n):$p.epochToArcadeDate(n,this.contextTimeZone??Rl);default:return n}}if(i)throw new Error(`Field ${e} does not exist`);return null}setField(e,i){throw new Error("Unable to update feature attribute values, feature is readonly")}keys(){return this._boundSchema.fieldsIndex.fields.map(e=>e.name)}isEmpty(){return this._boundSchema.fields.length<=0&&!this._hasGeometry()}castToText(e=!1){return JSON.stringify(this._boundTarget)}gdbVersion(){return null}fullSchema(){return this._boundSchema}castAsJson(e=null){var i;return{attributes:this._boundTarget.attributes,geometry:(e==null?void 0:e.keepGeometryType)===!0?this.geometry():((i=this.geometry())==null?void 0:i.toJSON())??null}}castAsJsonAsync(e=null,i=null){return Promise.resolve(this.castAsJson(i))}};function wxe(t){const e=[];for(const i in t)e.push({name:i,alias:i,type:typeof t[i]=="string"?"esriFieldTypeString":"esriFieldTypeDouble"});return e}let lKe=class _xe{static async from(e,i,r){const n=e.dictionary_version?V_e.parse(e.dictionary_version):null,s=new Set(e.itemsNames),a={};if(i)for(const m in i)a[m]=i[m];if(e.authoringInfo.configuration)for(const m of e.authoringInfo.configuration)a.hasOwnProperty(m.name)||(a[m.name]=m.value);const o=new Set(e.authoringInfo.symbol);for(const m of Object.keys(r))o.delete(m);o.size&&Ie.getLogger("esri.renderers.support.DictionaryScriptEvaluator").warnOnce("missing-fields: fieldMap entries for the following symbol fields are missing",{symbolFields:o});const l=await oKe(e.expression,null,a);if(!l)throw new ae("dictionary-renderer:expression-error","Unable to create dictionary renderer expression");const c=!n||!n.greaterEqual(4,0);c&&Ie.getLogger("esri.renderers.support.DictionaryScriptEvaluator").warnOnce("Dictionary script does not support native field types. Applying fallback",{version:n});const h=new cKe(r,c);return new _xe(c,s,l,h)}constructor(e,i,r,n){this._requiresFieldCoercionToString=e,this._itemNames=i,this._compiled=r,this._reader=n}get itemNames(){return this._itemNames}evaluate(e,i,r,n){try{return this._reader.bind(e,r,n),this._compiled.evaluate(this._reader,{$view:{scale:i}})}catch(s){Ie.getLogger("esri.renderers.support.DictionaryScriptEvaluator").warnOnce("arcade: dictionary script evaluation failed",{error:s})}return null}createDictionaryFieldsIndex(e){if(!this._requiresFieldCoercionToString)return new OE(e);const i=e.map(r=>({...r,type:"esriFieldTypeString"}));return new OE(i)}},cKe=class extends bxe{constructor(e,i){super(),this._fieldMap=e,this._requiresFieldCoercionToString=i}_getField(e){const i=this._fieldMap[e]??e;return this._boundSchema.fieldsIndex.get(i)}field(e){if(!this._requiresFieldCoercionToString)return super.field(e,!1);const i=this._getField(e);return i==null||this._boundTarget.attributes[i.name]==null?"":""+this._boundTarget.attributes[i.name]}};const $oe={Relative:0,Absolute:1},uKe={color:[128,128,128,1],outlinecolor:[0,0,0,1],backgroundcolor:[128,128,128,1],borderlinecolor:[0,0,0,1],tintcolor:[255,255,255,1]},Hn={CIMVectorMarker:{scalesymbolsproportionally:!1,respectframe:!0,anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMPictureMarker:{scalex:1,texturefilter:"Draft",anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMTextSymbol:{angle:0,anglex:0,angley:0,halosize:1,height:10,horizontalalignment:"Left",kerning:!0,letterspacing:0,letterwidth:100,ligatures:!0,linegap:0,offsetx:0,offsety:0,strikethrough:!1,textcase:"Normal",textstring:"",underline:!1,verticalalignment:"Bottom",enable:!0,colorlocked:!1},CIMSolidStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMPictureStroke:{texturefilter:"Draft",capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMGradientStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1,gradientMethod:"AcrossLine",gradientSize:75,gradientSizeUnits:$oe.Relative,gradientType:"Discrete",interval:5},CIMSolidFill:{enable:!0,colorlocked:!1},CIMPictureFill:{offsetx:0,offsety:0,rotation:0,scalex:1,height:10,texturefilter:"Draft",enable:!0,colorlocked:!1},CIMHatchFill:{offsetx:0,offsety:0,rotation:0,separation:4,enable:!0,colorlocked:!1},CIMGradientFill:{enable:!0,angle:90,gradientMethod:"Linear",gradientSize:75,gradientSizeUnits:$oe.Relative,gradientType:"Discrete",interval:5},CIMGeometricEffectAddControlPoints:{angletolerance:120},CIMGeometricEffectArrow:{arrowtype:"OpenEnded",width:5},CIMGeometricEffectBuffer:{size:1},CIMGeometricEffectCut:{begincut:1,endcut:1,middlecut:0,invert:!1},CIMGeometricEffectDashes:{customendingoffset:0,linedashending:"NoConstraint",offsetalongline:0},CIMGeometricEffectDonut:{method:"Mitered",option:"Accurate",width:2},CIMGeometricEffectJog:{angle:225,length:20,position:50},CIMGeometricEffectControlMeasureLine:{rule:"FullGeometry"},CIMGeometricEffectMove:{offsetx:1,offsety:-1},CIMGeometricEffectOffset:{method:"Square",offset:1,option:"Fast"},CIMGeometricEffectRadial:{angle:0,length:5},CIMGeometricEffectRotate:{angle:15},CIMGeometricEffectScale:{xscalefactor:1.15,yscalefactor:1.15},CIMGeometricEffectWave:{amplitude:2,period:3,seed:1,waveform:"Sinus"},CIMMarkerPlacementAlongLine:{customendingoffset:0,endings:"WithHalfGap",offsetalongline:0,placeperpart:!0,angletoline:!0,offset:0},CIMMarkerPlacementAtExtremities:{extremityplacement:"Both",offsetalongline:0,angletoline:!0,offset:0},CIMMarkerPlacementAtRatioPositions:{beginposition:0,endposition:0,flipfirst:!0,angletoline:!0,offset:0},CIMMarkerPlacementInsidePolygon:{gridangle:0,gridtype:"Fixed",offsetx:0,offsety:0,randomness:100,seed:0,shiftoddrows:!1,stepx:16,stepy:16,clipping:"ClipAtBoundary"},CIMMarkerPlacementOnLine:{relativeto:"LineMiddle",startpointoffset:0,angletoline:!0,offset:0},CIMMarkerPlacementOnVertices:{placeperpart:!0,placeoncontrolpoints:!0,placeonendpoints:!0,placeonregularvertices:!0,angletoline:!0,offset:0},CIMMarkerPlacementPolygonCenter:{method:"OnPolygon",offsetx:0,offsety:0,clipatboundary:!1},CIMAnimatedSymbolProperties:{playanimation:!1,reverseanimation:!1,randomizestarttime:!1,randomizestartseed:0,starttimeoffset:0,duration:3,endingduration:3,useendingduration:!1,repeattype:"Loop",repeatdelay:0,easing:"Linear"},CIMSymbolAnimationSize:{tosize:10},CIMSymbolAnimationScale:{scalefactor:1},CIMSymbolAnimationColor:{tocolor:[255,255,255,1]},CIMSymbolAnimationTransparency:{totransparency:0},CIMSymbolAnimationRotation:{torotation:0,rotateclockwise:!1},CIMSymbolAnimationOffset:{offsetx:0,offsety:0},CIMSymbolAnimationMoveAlongLine:{speed:30,distanceAlong:100}};function dKe(t){return typeof t=="function"}function wEt(t,e,i,r){return dKe(t)?t(e,i,r):t}function _Et(t){return[t.r,t.g,t.b,t.a]}const hKe=` /-,
`;function Soe(t){let e=t.length;for(;e--;)if(!hKe.includes(t.charAt(e)))return!1;return!0}function pKe(t,e){const i=[];let r=0,n=-1;do if(n=t.indexOf("[",r),n>=r){if(n>r){const s=t.slice(r,n);i.push([s,null,Soe(s)])}if(r=n+1,n=t.indexOf("]",r),n>=r){if(n>r){const s=e[t.slice(r,n)];s&&i.push([null,s,!1])}r=n+1}}while(n!==-1);if(r<t.length){const s=t.slice(r);i.push([s,null,Soe(s)])}return i}function xEt(t,e,i){let r="",n=null;for(const s of e){const[a,o,l]=s;if(a!=null&&a!=="")l?n=a:(n!=null&&(r+=n,n=null),r+=a);else{const c=t.readAttribute(o);c!=null&&c!==""&&(n!==null&&(r+=n,n=null),r+=c)}}return xxe(r,i)}function fKe(t,e,i,r){let n="",s=null;for(const a of e){const[o,l,c]=a;if(o!=null&&o!=="")c?s=o:(s!=null&&(n+=s,s=null),n+=o);else{let h=l;i!=null&&(h=MKe(l,i));const m=t.attributes[h];m!=null&&m!==""&&(s!=null&&(n+=s,s=null),n+=m)}}return xxe(n,r)}function xxe(t,e){switch(typeof t!="string"&&(t=String(t)),e){case"LowerCase":return t.toLowerCase();case"Allcaps":return t.toUpperCase();default:return t}}function $Et(t,e,i,r,n,s,a=!0){const o=e/n,l=i/s,c=Math.ceil(o/2),h=Math.ceil(l/2);for(let m=0;m<s;m++)for(let g=0;g<n;g++){const v=4*(g+(a?s-m-1:m)*n);let b=0,x=0,$=0,M=0,k=0,A=0,L=0;const z=(m+.5)*l;for(let U=Math.floor(m*l);U<(m+1)*l;U++){const B=Math.abs(z-(U+.5))/h,X=(g+.5)*o,J=B*B;for(let Q=Math.floor(g*o);Q<(g+1)*o;Q++){let le=Math.abs(X-(Q+.5))/c;const ie=Math.sqrt(J+le*le);ie>=-1&&ie<=1&&(b=2*ie*ie*ie-3*ie*ie+1,b>0&&(le=4*(Q+U*e),L+=b*t[le+3],$+=b,t[le+3]<255&&(b=b*t[le+3]/250),M+=b*t[le],k+=b*t[le+1],A+=b*t[le+2],x+=b))}}r[v]=M/x,r[v+1]=k/x,r[v+2]=A/x,r[v+3]=L/$}}function $xe(t){return t?[t[0],t[1],t[2],t[3]/255]:[0,0,0,0]}function uJ(t){var e;return((e=t.data)==null?void 0:e.symbol)??null}function dJ(t){return t.type==="CIMVectorMarker"||t.type==="CIMPictureMarker"||t.type==="CIMBarChartMarker"||t.type==="CIMCharacterMarker"||t.type==="CIMPieChartMarker"||t.type==="CIMStackedBarChartMarker"}function Sxe(t){return t.type==="CIMGradientStroke"||t.type==="CIMPictureStroke"||t.type==="CIMSolidStroke"}function mKe(t){return t!=null&&(t.type==="CIMGradientFill"||t.type==="CIMHatchFill"||t.type==="CIMPictureFill"||t.type==="CIMSolidFill"||t.type==="CIMWaterFill")}function I5(t){return t!=null&&(t.type==="CIMMarkerPlacementAlongLineRandomSize"||t.type==="CIMMarkerPlacementAlongLineSameSize"||t.type==="CIMMarkerPlacementAlongLineVariableSize"||t.type==="CIMMarkerPlacementAtExtremities"||t.type==="CIMMarkerPlacementAtMeasuredUnits"||t.type==="CIMMarkerPlacementAtRatioPositions"||t.type==="CIMMarkerPlacementOnLine"||t.type==="CIMMarkerPlacementOnVertices")}const Dt=(t,e=0)=>t==null||isNaN(t)?e:t,SEt=(t,e)=>t??e,TEt=(t,e)=>t??e,IEt=t=>t.tintColor?$xe(t.tintColor):[255,255,255,1];let gKe=class{constructor(e){this._import=e}getImportPromise(){return this._promise==null&&(this._promise=this._import().then(e=>this.module=e)),this._promise}};function S_(t){return new gKe(t)}function yKe(t){if(!t)return"normal";switch(t.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function vKe(t){if(!t)return"normal";switch(t.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function Txe(t){let e="normal",i="normal";if(t){const r=t.toLowerCase();r.includes("italic")?e="italic":r.includes("oblique")&&(e="oblique"),r.includes("bold")?i="bold":r.includes("light")&&(i="lighter")}return{style:e,weight:i}}function Ixe(t){return t.underline?"underline":t.strikethrough?"line-through":"none"}function F2(t){if(!t)return null;switch(t.type){case"CIMPolygonSymbol":if(t.symbolLayers)for(const e of t.symbolLayers){const i=F2(e);if(i!=null)return i}break;case"CIMTextSymbol":return F2(t.symbol);case"CIMSolidFill":return t.color}return null}function tz(t){if(t)switch(t.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const e=t.symbolLayers;if(e)for(const i of e){const r=tz(i);if(r!=null)return r}break}case"CIMTextSymbol":return tz(t.symbol);case"CIMSolidStroke":return t.color}}function CEt(t){for(const e of t)if(e.enable)switch(e.type){case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return!0}return!1}function iz(t){if(t)switch(t.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(t.symbolLayers)for(const e of t.symbolLayers){const i=iz(e);if(i!==void 0)return i}break;case"CIMTextSymbol":return iz(t.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return t.width}}function bKe(t){switch(t){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function wKe(t){switch(t){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function _Ke(t){return(t?Object.keys(t):[]).map(e=>({name:e,alias:e,type:typeof t[e]=="string"?"esriFieldTypeString":"esriFieldTypeDouble"}))}const R1=t=>t.includes("data:image/svg+xml");function rz(t){if(!t)return null;switch(t.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function Kk(t){return t&&t.charAt(0).toLowerCase()+t.slice(1)}function EEt(t,e,i,r,n,s,a=!0){const{infos:o}=s;let l=1,c=0,h=0,m=0,g=1;for(const{absoluteAnchorPoint:x,offsetX:$,offsetY:M,rotation:k,size:A,frameHeight:L,rotateClockWise:z,scaleSymbolsProportionally:U}of o)g=x?1:l,h=Moe($,M,c,g,h),m=Ioe($,M,c,g,m),L&&(U||a)&&(l*=A/L),c=Coe(k,z,c);const v=Moe(r,n,c,g,h),b=Ioe(r,n,c,g,m);return{size:t*l,rotation:Coe(e,i,c),offsetX:v,offsetY:b}}function xKe(t){if(t==null)return!1;if(Array.isArray(t))return t.every(e=>xKe(e));switch(typeof t){case"string":return!!t;case"number":return!isNaN(t)}}function $Ke(t,e){if(e==="color"||e==="outlinecolor"||e==="backgroundcolor"||e==="borderlinecolor"||e==="tintcolor")return[...uKe[e]];const i=Hn[t];if(!i)throw new Error(`InternalError: default value for type ${t}.`);return i[e]}function SKe(t){return t.split(" ").map(e=>Number(e))}function TKe(t){return typeof t=="string"?SKe(t):t}function Mxe(t){return t!=null&&t.dashTemplate&&(t.dashTemplate=TKe(t.dashTemplate)),t}function kH(t){if(t==null)return"Normal";switch(t.type){case"CIMTextSymbol":return t.textCase??"Normal";case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const e=t.symbolLayers;if(!e)return"Normal";for(const i of e)if(i.type==="CIMVectorMarker")return kH(i)}break;case"CIMVectorMarker":{const e=t.markerGraphics;if(!e)return"Normal";for(const i of e)if(i.symbol)return kH(i.symbol)}}return"Normal"}function IKe(t){if(t)switch(t.type){case"CIMTextSymbol":return t.height;case"CIMPointSymbol":{let e=0;if(t.symbolLayers){for(const i of t.symbolLayers)if(i)switch(i.type){case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":{const r=i.size??Hn.CIMVectorMarker.size;r>e&&(e=r);break}}}return e}case"CIMLineSymbol":case"CIMPolygonSymbol":{let e=0;if(t.symbolLayers){for(const i of t.symbolLayers)if(i)switch(i.type){case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":{const r=i.width;r!=null&&r>e&&(e=r);break}case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":if(i.markerPlacement&&I5(i.markerPlacement)){const r=i.size??Hn.CIMVectorMarker.size;r>e&&(e=r)}break;case"CIMPictureFill":{const r=i.height;r!=null&&r>e&&(e=r)}}}return e}}}function MKe(t,e){if(e!==null){const i=e.get(t);return i?i.name:t}return t}function CKe(t){return t.map(e=>({...e,propertyName:Kk(e.propertyName)}))}function Toe(t){const e={};for(const i in t){const r=t[i];e[Kk(i)]=r}return e}function Ioe(t,e,i,r,n){const s=i*Math.PI/180;if(s){const a=Math.cos(s);return(Math.sin(s)*t+a*e)*r+n}return e*r+n}function Moe(t,e,i,r,n){const s=i*Math.PI/180;return s?(Math.cos(s)*t-Math.sin(s)*e)*r+n:t*r+n}function Coe(t,e,i){return e?i-t:i+t}function kEt(t,e,i){const r=i==="Color"||i==="TintColor"||i==="ToColor",n=i==="Rotation"||i==="Angle"||i==="ToRotation";let s=e[Kk(i)];if(s!=null&&(r?s=[s[0]/255,s[1]/255,s[2]/255,s[3]/255]:n&&(s*=Math.PI/180)),s==null&&(s=$Ke(e.type,i.toLowerCase()),s!=null&&(r?s=[s[0]/255,s[1]/255,s[2]/255,s[3]]:n&&(s*=Math.PI/180))),e.primitiveName!=null){const a=t[e.primitiveName];if(a!=null){const o=a[i];o==null||(typeof o=="string"||typeof o=="number"||Array.isArray(o)?(s=o,s!=null&&(r?s=[s[0]/255,s[1]/255,s[2]/255,s[3]/255]:n&&(s*=Math.PI/180))):(s={valueExpressionInfo:o,defaultValue:s},s!=null&&(r?s={type:"Process",op:"ArcadeColor",value:s}:n&&(s={type:"Process",op:"Divide",left:s,right:180/Math.PI}))))}}if(s==null)throw new Error(`Failed to derive a value or an expression for "${i}".`);return s}function AEt(t,e,i){if(e[Kk(i)]!=null)return!0;if(e.primitiveName!=null){const r=t[e.primitiveName];if(r!=null&&r[i]!=null)return!0}return!1}function EM(t,e){return Math.max(Math.min((t??e)/100,1),0)}const EKe={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};let Cxe=class{constructor(e,i,r,n){this.url=e,this.fieldMap=r,this.dictionaryInfo=n,this._symbolPartCache=new sxe(100);const s=async()=>lKe.from(await n,i,r);this._evaluator=s()}async getSymbolAsync(e,i,r=!0){var m;const n=await this._evaluator,s=(i==null?void 0:i.fields)??wxe(e.attributes),a=n.createDictionaryFieldsIndex(s),o=n.evaluate(e,(i==null?void 0:i.scale)??0,a,i==null?void 0:i.spatialReference);if(o==null)return null;const l=g_(e.geometry),c=moe.parse(o,n.itemNames,l),h=l==="esriGeometryPoint"&&!((m=e.geometry)!=null&&m.hasZ);return await this._cimPartsToCIMSymbol(e,c.partNames,c.overrides,h,i,r,a)}async getSymbolForControlString(e,i,r){const n=await this._evaluator,s=moe.parse(e,n.itemNames,i),a=i==="esriGeometryPoint"&&!r,o=Eoe(await Promise.all(s.partNames.map(l=>this._getSymbolPart(l))),s.overrides,a);return new zs({data:o})}async _cimPartsToCIMSymbol(e,i,r,n,s,a,o){const l=i.map(m=>this._getSymbolPart(m,s));let c=await Promise.all(l);if(a&&this.fieldMap&&c.length>0){const{OverrideHelper:m}=await de(()=>Promise.resolve().then(()=>hgt),void 0);c=he(c);for(const g of c)m.applyDictionaryTextOverrides(g,e,this.fieldMap,o,kH(g))}const h=Eoe(c,r,n);return new zs({data:h})}async _fetchSymbolPart(e,i){const r=await this.dictionaryInfo,n=(this.url+"/"+r.cimRefTemplateUrl).replaceAll(/\{itemName\}/gi,e),{data:s}=await mi(n,{responseType:"json",query:{f:"json"},...i});return s}async _getSymbolPart(e,i){let r=this._symbolPartCache.get(e);return r||(r=this._fetchSymbolPart(e,i),this._symbolPartCache.put(e,r)),r}};function Eoe(t,e,i){if(!t||t.length===0)return null;const r={...t[0]};if(t.length>1){r.effects=null,r.symbolLayers=[];for(const n of t){const s=n;if(s.effects!=null)for(const a of s.symbolLayers)a.effects==null?a.effects=s.effects:a.effects.unshift(...s.effects);r.symbolLayers.unshift(...s.symbolLayers)}}return i&&(r.callout=EKe),{type:"CIMSymbolReference",symbol:r,primitiveOverrides:e}}var AH;let ld=AH=class extends KT(_c){constructor(t){super(t),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}get _loader(){const t=this.getDictionaryInfo();return new Cxe(this.url,this.config,this.fieldMap??{},t)}writeData(t,e){t&&(e.scalingExpressionInfo={expression:t,returnType:"number"})}writeVisualVariables(t,e,i,r){r!=null&&r.origin||super.writeVisualVariables(t,e,i,r)}clone(){return new AH({config:he(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:he(this.fieldMap),url:he(this.url),visualVariables:he(this.visualVariables)})}async getSymbolAsync(t,e,i=!0){return this._loader.getSymbolAsync(t,e,i)}async getSymbolForControlString(t,e,i){return this._loader.getSymbolForControlString(t,e,i)}getDictionaryInfo(){return this._dictionaryInfoPromise||(this._dictionaryInfoPromise=this._fetchDictionaryInfo()),this._dictionaryInfoPromise}async collectRequiredFields(t,e){await this.collectVVRequiredFields(t,e),this.scaleExpression&&await za(t,e,null,this.scaleExpression);for(const i in this.fieldMap){const r=this.fieldMap[i];e.has(r)&&t.add(r)}}get arcadeRequired(){return!0}getSymbol(){return null}get symbols(){return[]}getAttributeHash(){var t;return((t=this.visualVariables)==null?void 0:t.reduce((e,i)=>e+i.getAttributeHash(),""))??""}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}async _fetchDictionaryInfo(){const{data:t}=await mi(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"}});return t}};d([f({type:Cxe})],ld.prototype,"_loader",null),d([f({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],ld.prototype,"config",void 0),d([f({type:Object,json:{write:!0}})],ld.prototype,"fieldMap",void 0),d([f({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],ld.prototype,"scaleExpression",void 0),d([Ge("scaleExpression")],ld.prototype,"writeData",null),d([f({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(t){return{enabled:!!t&&!!this.scaleExpression}}}}})],ld.prototype,"scaleExpressionTitle",void 0),d([f({type:String,json:{write:!0}})],ld.prototype,"url",void 0),d([Ge("visualVariables")],ld.prototype,"writeVisualVariables",null),ld=AH=d([V("esri.renderers.DictionaryRenderer")],ld);var PH;let tm=PH=class extends $e{constructor(t){super(t),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(t){return t==null?t:typeof t=="function"?(Ie.getLogger(this).error(".field: field must be a string value"),null):kk(t)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){var t;return new PH({color:(t=this.color)==null?void 0:t.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};d([f({type:Se,json:{type:[Number],write:!0}})],tm.prototype,"color",void 0),d([f({type:String,json:{write:!0}})],tm.prototype,"field",void 0),d([_i("field")],tm.prototype,"castField",null),d([f({type:String,json:{write:!0}})],tm.prototype,"label",void 0),d([f({type:String,json:{write:!0}})],tm.prototype,"valueExpression",void 0),d([f({type:String,json:{write:!0}})],tm.prototype,"valueExpressionTitle",void 0),tm=PH=d([V("esri.renderers.support.AttributeColorInfo")],tm);const Exe=tm;var OH;let tF=OH=class extends $e{constructor(){super(...arguments),this.unit=null}clone(){return new OH({unit:this.unit})}};d([f({type:String,json:{write:!0}})],tF.prototype,"unit",void 0),tF=OH=d([V("esri.renderers.support.DotDensityLegendOptions")],tF);const kKe=tF;var LH;let fl=LH=class extends KT(_c){constructor(t){super(t),this.attributes=null,this.backgroundColor=new Se([0,0,0,0]),this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new xn,this.dotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}set visualVariables(t){super.visualVariables=t}calculateDotValue(t){if(this.referenceScale==null)return this.dotValue;const e=t/this.referenceScale*this.dotValue;return e<1?1:e}getSymbol(){return new no({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}get symbols(){return[this.getSymbol()]}getAttributeHash(){var t;return((t=this.attributes)==null?void 0:t.reduce((e,i)=>e+i.getAttributeHash(),""))??""}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new LH({attributes:he(this.attributes),backgroundColor:he(this.backgroundColor),dotBlendingEnabled:he(this.dotBlendingEnabled),dotShape:he(this.dotShape),dotSize:he(this.dotSize),dotValue:he(this.dotValue),legendOptions:he(this.legendOptions),outline:he(this.outline),referenceScale:he(this.referenceScale),seed:he(this.seed),visualVariables:he(this.visualVariables),authoringInfo:he(this.authoringInfo)})}getControllerHash(){var e;return`${(e=this.attributes)==null?void 0:e.map(i=>i.field||i.valueExpression||"")}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(t,e){await this.collectVVRequiredFields(t,e);for(const i of this.attributes??[])i.valueExpression&&await za(t,e,null,i.valueExpression),i.field&&t.add(i.field)}};d([f({type:[Exe],json:{write:!0}})],fl.prototype,"attributes",void 0),d([f({type:Se,json:{write:!0}})],fl.prototype,"backgroundColor",void 0),d([f({type:Boolean,json:{write:!0}})],fl.prototype,"dotBlendingEnabled",void 0),d([f({type:String,json:{write:!1}})],fl.prototype,"dotShape",void 0),d([f({type:Number,json:{write:!0}})],fl.prototype,"dotSize",void 0),d([f({type:kKe,json:{write:!0}})],fl.prototype,"legendOptions",void 0),d([f({type:xn,json:{default:null,write:!0}})],fl.prototype,"outline",void 0),d([f({type:Number,json:{write:!0}})],fl.prototype,"dotValue",void 0),d([f({type:Number,json:{write:!0}})],fl.prototype,"referenceScale",void 0),d([f({type:Number,json:{write:!0}})],fl.prototype,"seed",void 0),d([pt({dotDensity:"dot-density"})],fl.prototype,"type",void 0),fl=LH=d([V("esri.renderers.DotDensityRenderer")],fl);var FH;let Fm=FH=class extends $e{constructor(t){super(t),this.color=null,this.ratio=null}clone(){return new FH({color:this.color&&this.color.clone(),ratio:this.ratio})}};d([f({type:Se,json:{type:[ei],default:null,write:{isRequired:!0}}})],Fm.prototype,"color",void 0),d([f({type:Number,json:{write:{isRequired:!0}}})],Fm.prototype,"ratio",void 0),Fm=FH=d([V("esri.renderers.support.HeatmapColorStop")],Fm);let Qx=class extends bt($e){constructor(){super(...arguments),this.minLabel=null,this.maxLabel=null,this.title=null}};d([f({type:String,json:{write:!0}})],Qx.prototype,"minLabel",void 0),d([f({type:String,json:{write:!0}})],Qx.prototype,"maxLabel",void 0),d([f({type:String,json:{write:!0}})],Qx.prototype,"title",void 0),Qx=d([V("esri.renderers.support.HeatmapLegendOptions")],Qx);function AKe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function PKe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function OKe(t,e,i,r,n){return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t}function LKe(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t}function kxe(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t}function Axe(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t[3]=e[3]*i[3],t}function Pxe(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t[3]=e[3]/i[3],t}function FKe(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function RKe(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function zKe(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t[3]=Math.min(e[3],i[3]),t}function NKe(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t[3]=Math.max(e[3],i[3]),t}function DKe(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function jKe(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t}function VKe(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t}function Oxe(t,e){const i=e[0]-t[0],r=e[1]-t[1],n=e[2]-t[2],s=e[3]-t[3];return Math.sqrt(i*i+r*r+n*n+s*s)}function Lxe(t,e){const i=e[0]-t[0],r=e[1]-t[1],n=e[2]-t[2],s=e[3]-t[3];return i*i+r*r+n*n+s*s}function Fxe(t){const e=t[0],i=t[1],r=t[2],n=t[3];return Math.sqrt(e*e+i*i+r*r+n*n)}function Rxe(t){const e=t[0],i=t[1],r=t[2],n=t[3];return e*e+i*i+r*r+n*n}function UKe(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function BKe(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function qKe(t,e){const i=e[0],r=e[1],n=e[2],s=e[3];let a=i*i+r*r+n*n+s*s;return a>0&&(a=1/Math.sqrt(a),t[0]=i*a,t[1]=r*a,t[2]=n*a,t[3]=s*a),t}function HKe(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function zxe(t,e,i,r){const n=e[0],s=e[1],a=e[2],o=e[3];return t[0]=n+r*(i[0]-n),t[1]=s+r*(i[1]-s),t[2]=a+r*(i[2]-a),t[3]=o+r*(i[3]-o),t}function GKe(t,e=1){const i=ID;let r,n,s,a,o,l;do r=2*i()-1,n=2*i()-1,o=r*r+n*n;while(o>=1);do s=2*i()-1,a=2*i()-1,l=s*s+a*a;while(l>=1);const c=Math.sqrt((1-o)/l);return t[0]=e*r,t[1]=e*n,t[2]=e*s*c,t[3]=e*a*c,t}function WKe(t,e,i){const r=e[0],n=e[1],s=e[2],a=e[3];return t[0]=i[0]*r+i[4]*n+i[8]*s+i[12]*a,t[1]=i[1]*r+i[5]*n+i[9]*s+i[13]*a,t[2]=i[2]*r+i[6]*n+i[10]*s+i[14]*a,t[3]=i[3]*r+i[7]*n+i[11]*s+i[15]*a,t}function ZKe(t,e,i){const r=e[0],n=e[1],s=e[2],a=i[0],o=i[1],l=i[2],c=i[3],h=c*r+o*s-l*n,m=c*n+l*r-a*s,g=c*s+a*n-o*r,v=-a*r-o*n-l*s;return t[0]=h*c+v*-a+m*-l-g*-o,t[1]=m*c+v*-o+g*-a-h*-l,t[2]=g*c+v*-l+h*-o-m*-a,t[3]=e[3],t}function YKe(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function JKe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function XKe(t,e){const i=t[0],r=t[1],n=t[2],s=t[3],a=e[0],o=e[1],l=e[2],c=e[3],h=qo();return Math.abs(i-a)<=h*Math.max(1,Math.abs(i),Math.abs(a))&&Math.abs(r-o)<=h*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(n-l)<=h*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(s-c)<=h*Math.max(1,Math.abs(s),Math.abs(c))}const QKe=kxe,KKe=Axe,eet=Pxe,tet=Oxe,iet=Lxe,ret=Fxe,net=Rxe;Object.freeze(Object.defineProperty({__proto__:null,add:LKe,ceil:FKe,copy:AKe,copyVec3:PKe,dist:tet,distance:Oxe,div:eet,divide:Pxe,dot:HKe,equals:XKe,exactEquals:JKe,floor:RKe,inverse:BKe,len:ret,length:Fxe,lerp:zxe,max:NKe,min:zKe,mul:KKe,multiply:Axe,negate:UKe,normalize:qKe,random:GKe,round:DKe,scale:jKe,scaleAndAdd:VKe,set:OKe,sqrDist:iet,sqrLen:net,squaredDistance:Lxe,squaredLength:Rxe,str:YKe,sub:QKe,subtract:kxe,transformMat4:WKe,transformQuat:ZKe},Symbol.toStringTag,{value:"Module"}));function M5(){return[0,0,0,0]}function set(t){return[t[0],t[1],t[2],t[3]]}function T_(t,e,i,r){return[t,e,i,r]}function aet(t,e,i,r){return[t,e,i,r]}function oet(t,e=M5()){const i=Math.min(4,t.length);for(let r=0;r<i;++r)e[r]=t[r];return e}function Nxe(){return M5()}function Dxe(){return T_(1,1,1,1)}function jxe(){return T_(1,0,0,0)}function Vxe(){return T_(0,1,0,0)}function Uxe(){return T_(0,0,1,0)}function Bxe(){return T_(0,0,0,1)}const cet=Nxe(),uet=Dxe(),det=jxe(),het=Vxe(),pet=Uxe(),fet=Bxe();Object.freeze(Object.defineProperty({__proto__:null,ONES:uet,UNIT_W:fet,UNIT_X:det,UNIT_Y:het,UNIT_Z:pet,ZEROS:cet,clone:set,create:M5,freeze:aet,fromArray:oet,fromValues:T_,ones:Dxe,unitW:Bxe,unitX:jxe,unitY:Vxe,unitZ:Uxe,zeros:Nxe},Symbol.toStringTag,{value:"Module"}));const hJ=2.4;function met(t){return Qi(t*hJ)}function get(t){return Di(t)/hJ}function yet(t,e,i,r){let{color:n,ratio:s}=e,{color:a,ratio:o}=i;o===s&&(o===1?s-=1e-6:o+=1e-6);const l=ua((r-s)/(o-s),0,1);zxe(t,n.toArray(),a.toArray(),l)}function LEt(t){const i=new Uint8ClampedArray(2048);if(t=t.filter(({ratio:o})=>o>=0&&o<=1).sort((o,l)=>o.ratio-l.ratio).map(({color:o,ratio:l})=>({color:o,ratio:Math.max(l,.001)})),t.length<1)return i;let r=t[0],n=t[0],s=1;const a=M5();for(let o=0;o<512;o++){const l=(o+.5)/512;for(;l>n.ratio&&s<t.length;)r=n,n=t[s++];yet(a,r,n,l),i.set(a,4*o)}return i}function FEt(t,e,i){const r=Math.sqrt(t**2+e**2)/i;return r>1?0:3/(Math.PI*i**2)*(1-r**2)**2}function REt(t){return typeof t=="function"?t:t?e=>+e[t]:()=>1}var RH;function koe(t){if(t!=null){const{maxDensity:e,minDensity:i,radius:r}=t;if(e!=null||i!=null||r!=null){const{blurRadius:n,maxPixelIntensity:s,minPixelIntensity:a,...o}=t;return o}}return t}let Ls=RH=class extends _c{constructor(t){super(t),this.authoringInfo=null,this.colorStops=[new Fm({ratio:0,color:new Se("rgba(255, 140, 0, 0)")}),new Fm({ratio:.75,color:new Se("rgba(255, 140, 0, 1)")}),new Fm({ratio:.9,color:new Se("rgba(255, 0,   0, 1)")})],this.field=null,this.legendOptions=null,this.maxDensity=.04,this.minDensity=0,this.radius=18,this.referenceScale=0,this.type="heatmap",this.valueExpression=null,this.valueExpressionTitle=null}normalizeCtorArgs(t){return koe(t)}get blurRadius(){return get(this.radius)}set blurRadius(t){const e=this.maxPixelIntensity,i=this.minPixelIntensity;this._set("radius",met(t)),this._set("maxDensity",e*this._pixelIntensityToDensity),this._set("minDensity",i*this._pixelIntensityToDensity)}get maxPixelIntensity(){return this.maxDensity/this._pixelIntensityToDensity}set maxPixelIntensity(t){this._set("maxDensity",t*this._pixelIntensityToDensity)}get minPixelIntensity(){return this.minDensity/this._pixelIntensityToDensity}set minPixelIntensity(t){this._set("minDensity",t*this._pixelIntensityToDensity)}get _pixelIntensityToDensity(){return 24/(hJ**2*this.blurRadius**4)}read(t,e){t=koe(t),super.read(t,e)}getSymbol(){return new tn}async getSymbolAsync(){return this.getSymbol()}get symbols(){return[this.getSymbol()]}async collectRequiredFields(t,e){const i=this.field,r=this.valueExpression;i&&typeof i=="string"&&ho(t,e,i),r&&typeof r=="string"&&await za(t,e,null,r)}getAttributeHash(){return""}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new RH({authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),colorStops:he(this.colorStops),field:this.field,legendOptions:he(this.legendOptions),maxDensity:this.maxDensity,minDensity:this.minDensity,radius:this.radius,referenceScale:this.referenceScale,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};d([f({type:Qr,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Ls.prototype,"authoringInfo",void 0),d([f({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Ls.prototype,"blurRadius",null),d([f({type:[Fm],json:{write:{isRequired:!0}}})],Ls.prototype,"colorStops",void 0),d([f({type:String,json:{write:!0}})],Ls.prototype,"field",void 0),d([f({type:Qx,json:{write:!0}})],Ls.prototype,"legendOptions",void 0),d([f({type:Number,json:{write:!0}})],Ls.prototype,"maxDensity",void 0),d([f({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Ls.prototype,"maxPixelIntensity",null),d([f({type:Number,json:{write:!0}})],Ls.prototype,"minDensity",void 0),d([f({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Ls.prototype,"minPixelIntensity",null),d([f({type:Number,cast:$i,json:{write:!0}})],Ls.prototype,"radius",void 0),d([f({type:Number,range:{min:0},json:{default:0,write:!0}})],Ls.prototype,"referenceScale",void 0),d([pt({heatmap:"heatmap"})],Ls.prototype,"type",void 0),d([f({type:String,json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],Ls.prototype,"valueExpression",void 0),d([f({type:String})],Ls.prototype,"valueExpressionTitle",void 0),d([f({readOnly:!0})],Ls.prototype,"_pixelIntensityToDensity",null),Ls=RH=d([V("esri.renderers.HeatmapRenderer")],Ls);let k0=class extends bt($e){constructor(){super(...arguments),this.color=new Se([0,0,0,0]),this.label=null,this.threshold=0}};d([f({type:Se,json:{write:!0}})],k0.prototype,"color",void 0),d([f({type:String,json:{write:!0}})],k0.prototype,"label",void 0),d([f({type:Number,range:{min:0,max:1},json:{write:!0}})],k0.prototype,"threshold",void 0),k0=d([V("esri.renderers.support.OthersCategory")],k0);const vet={base:Qa,key:"type",typeMap:{size:Ei,opacity:Sm}};let ml=class extends KT(bt(_c)){constructor(e){super(e),this.attributes=null,this.backgroundFillSymbol=null,this.defaultColor=new Se([0,0,0,0]),this.defaultLabel=null,this.holePercentage=0,this.othersCategory=new k0,this.legendOptions=null,this.outline=null,this.size=12,this.type="pie-chart",this.visualVariables=null}getSymbol(){var e;return new tn({size:this.size?this.size/2+(((e=this.outline)==null?void 0:e.width)||0):0})}async getSymbolAsync(){return this.getSymbol()}get symbols(){return[this.getSymbol(),this.backgroundFillSymbol].filter(ln)}getAttributeHash(){var e;return((e=this.visualVariables)==null?void 0:e.reduce((i,r)=>i+r.getAttributeHash(),""))??""}getMeshHash(){return this.symbols.reduce((e,i)=>e+JSON.stringify(i),"")}async collectRequiredFields(e,i){await this.collectVVRequiredFields(e,i);for(const r of this.attributes)r.valueExpression&&await za(e,i,null,r.valueExpression),r.field&&e.add(r.field)}};d([f({type:[Exe],json:{write:!0}})],ml.prototype,"attributes",void 0),d([f(KY)],ml.prototype,"backgroundFillSymbol",void 0),d([f({type:Se,json:{write:!0}})],ml.prototype,"defaultColor",void 0),d([f({type:String,json:{write:!0}})],ml.prototype,"defaultLabel",void 0),d([f({type:Number,range:{min:0,max:1},json:{write:!0}})],ml.prototype,"holePercentage",void 0),d([f({type:k0,json:{write:!0}})],ml.prototype,"othersCategory",void 0),d([f({type:eJ,json:{write:!0}})],ml.prototype,"legendOptions",void 0),d([f({type:xn,json:{default:null,write:!0}})],ml.prototype,"outline",void 0),d([f({type:Number,cast:$i,json:{write:!0}})],ml.prototype,"size",void 0),d([pt({pieChart:"pie-chart"})],ml.prototype,"type",void 0),d([f({types:[vet]})],ml.prototype,"visualVariables",void 0),ml=d([V("esri.renderers.PieChartRenderer")],ml);const eA={key:"type",base:_c,typeMap:{heatmap:Ls,simple:aa,"unique-value":zr,"class-breaks":rs,"dot-density":fl,dictionary:ld,"pie-chart":ml},errorContext:"renderer"},bet={key:"type",base:_c,typeMap:{simple:aa,"unique-value":zr,"class-breaks":rs,heatmap:Ls},errorContext:"renderer",validate:wet};function wet(t){switch(t.type){case"simple":return _et(t);case"unique-value":return xet(t);case"class-breaks":return $et(t);case"heatmap":return t}}function _et(t){if(t.symbol)return t;Ie.getLogger("esri.renderers.support.types").error("Removed invalid 'simple' renderer without a symbol from web scene.")}function xet(t){const e=t.uniqueValueInfos,i=e==null?void 0:e.filter(({symbol:r,label:n},s)=>(r||Ie.getLogger("esri.renderers.support.types").error(`Removed invalid unique value info ([${s}] ${n}) without a symbol from web scene.`),!!r));return(i==null?void 0:i.length)!==(e==null?void 0:e.length)&&(t.uniqueValueInfos=i),t}function $et(t){const e=t.classBreakInfos,i=e==null?void 0:e.filter(({symbol:r,label:n},s)=>(r||Ie.getLogger("esri.renderers.support.types").error(`Removed invalid class break info ([${s}] ${n}) without a symbol from web scene.`),!!r));return(i==null?void 0:i.length)!==(e==null?void 0:e.length)&&(t.classBreakInfos=i),t}function Tet(t,e){return LE(t,null,e)}const Iet=LT({types:eA});function LE(t,e,i){return t?t&&(t.styleName||t.styleUrl)&&t.type!=="uniqueValue"?(i!=null&&i.messages&&i.messages.push(new Ic("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+t.type+"'",{definition:t,context:i})),null):Iet(t,e,i):null}var zH;let Ma=zH=class extends _v{constructor(t){super(t),this.type="binning",this.binType="geohash",this.fixedBinLevel=null,this.labelingInfo=null,this.labelsVisible=!0,this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.size=$i("12px"),this.fields=[],this.renderer=null}writeFields(t,e,i){const r=t.filter(n=>n.statisticType!=="avg_angle").map(n=>n.toJSON());qn(i,r,e)}readRenderer(t,e,i){var n;const r=(n=e.drawingInfo)==null?void 0:n.renderer;return r?LE(r,e,i)??void 0:rJ(e,i)}clone(){return new zH({fields:he(this.fields),fixedBinLevel:this.fixedBinLevel,labelingInfo:he(this.labelingInfo),labelsVisible:this.labelsVisible,maxScale:this.maxScale,popupEnabled:this.popupEnabled,popupTemplate:he(this.popupTemplate),renderer:he(this.renderer),binType:he(this.binType),size:this.size})}};d([pt({binning:"binning"})],Ma.prototype,"type",void 0),d([pt({geohash:"geohash",square:"square"}),f({type:["geohash","square"]})],Ma.prototype,"binType",void 0),d([f({type:Number,json:{write:!0}})],Ma.prototype,"fixedBinLevel",void 0),d([f({type:[Lt],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],Ma.prototype,"labelingInfo",void 0),d([f(v5)],Ma.prototype,"labelsVisible",void 0),d([f({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],Ma.prototype,"maxScale",void 0),d([f(y5)],Ma.prototype,"popupEnabled",void 0),d([f({type:lg,json:{name:"popupInfo",write:!0}})],Ma.prototype,"popupTemplate",void 0),d([f({cast:t=>t==="auto"?t:No($i(t))})],Ma.prototype,"size",void 0),d([f({type:[io],json:{write:!0}})],Ma.prototype,"fields",void 0),d([Ge("fields")],Ma.prototype,"writeFields",null),d([f({types:eA,json:{write:{target:"drawingInfo.renderer"}}})],Ma.prototype,"renderer",void 0),d([je("renderer",["drawingInfo.renderer"])],Ma.prototype,"readRenderer",null),Ma=zH=d([V("esri.layers.support.FeatureReductionBinning")],Ma);var NH;function Aoe(t){var e;return t.type==="simple"&&!((e=t.visualVariables)!=null&&e.length)}let ns=NH=class extends $e{constructor(t){super(t),this.type="cluster",this.clusterRadius=$i("80px"),this.clusterMinSize=$i("12px"),this.clusterMaxSize=$i("50px"),this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.renderer=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=[]}readRenderer(t,e,i){var n,s;const r=(n=e.drawingInfo)==null?void 0:n.renderer;return(s=r==null?void 0:r.authoringInfo)!=null&&s.isAutoGenerated?null:r?Aoe(r)?null:LE(r,e,i)??void 0:rJ(e,i)}readSymbol(t,e,i){var n,s;const r=(n=e.drawingInfo)==null?void 0:n.renderer;if((s=r==null?void 0:r.authoringInfo)!=null&&s.isAutoGenerated)return null;if(r&&Aoe(r)){const a=LE(r,e,i);return a==null?void 0:a.symbol}return null}writeSymbol(t,e,i,r){var s,a;const n=(a=(s=this.renderer)==null?void 0:s.authoringInfo)==null?void 0:a.isAutoGenerated;if(!this.renderer||n){const o=new aa({symbol:t});e.drawingInfo={renderer:o.write({},r)}}}writeFields(t,e,i){const r=t.filter(n=>n.statisticType!=="avg_angle").map(n=>n.toJSON());qn(i,r,e)}readFields(t,e,i){return t.filter(r=>!r.isAutoGenerated).map(r=>io.fromJSON(r))}clone(){return new NH({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:he(this.labelingInfo),labelsVisible:this.labelsVisible,fields:he(this.fields),maxScale:this.maxScale,renderer:he(this.renderer),symbol:he(this.symbol),popupEnabled:this.popupEnabled,popupTemplate:he(this.popupTemplate)})}};d([f({type:["cluster"],readOnly:!0,json:{write:!0}})],ns.prototype,"type",void 0),d([f({cast:t=>t==="auto"?t:No($i(t)),json:{write:!0}})],ns.prototype,"clusterRadius",void 0),d([f({type:Number,cast:$i,json:{write:!0}})],ns.prototype,"clusterMinSize",void 0),d([f({type:Number,cast:$i,json:{write:!0}})],ns.prototype,"clusterMaxSize",void 0),d([f({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],ns.prototype,"maxScale",void 0),d([f(y5)],ns.prototype,"popupEnabled",void 0),d([f({type:lg,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],ns.prototype,"popupTemplate",void 0),d([f({types:eA,json:{write:{target:"drawingInfo.renderer"}}})],ns.prototype,"renderer",void 0),d([je("renderer",["drawingInfo.renderer"])],ns.prototype,"readRenderer",null),d([f({types:PBe})],ns.prototype,"symbol",void 0),d([je("symbol",["drawingInfo.renderer"])],ns.prototype,"readSymbol",null),d([Ge("symbol")],ns.prototype,"writeSymbol",null),d([f({type:[Lt],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],ns.prototype,"labelingInfo",void 0),d([f(v5)],ns.prototype,"labelsVisible",void 0),d([f({type:[io],json:{write:!0}})],ns.prototype,"fields",void 0),d([Ge("fields")],ns.prototype,"writeFields",null),d([je("fields")],ns.prototype,"readFields",null),ns=NH=d([V("esri.layers.support.FeatureReductionCluster")],ns);var DH;let R2=DH=class extends _v{constructor(t){super(t),this.type="selection"}clone(){return new DH}};d([f({type:["selection"]})],R2.prototype,"type",void 0),R2=DH=d([V("esri.layers.support.FeatureReductionSelection")],R2);const Poe={key:"type",base:_v,typeMap:{cluster:ns,binning:Ma}},Met={types:{key:"type",base:_v,typeMap:{selection:R2,cluster:ns,binning:Ma}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:Poe},"portal-item":{types:Poe},"web-scene":{types:{key:"type",base:_v,typeMap:{selection:R2}},name:"layerDefinition.featureReduction",write:{allowNull:!0,layerContainerTypes:Lr}}}}},Cet=()=>Ie.getLogger("esri.views.2d.layers.support.clusterUtils");ve.add("esri-cluster-arcade-enabled",!0);const Eet=ve("esri-cluster-arcade-enabled"),ket=new Set(["simple-line","simple-fill","picture-fill"]);function Ooe(t,e){let i=e.clone();if(!Aet(i))return i;if(e.symbols.some(r=>ket.has(r.type))&&(i=new aa({symbol:new tn})),i.authoringInfo||(i.authoringInfo=new Qr),i.authoringInfo.isAutoGenerated=!0,"visualVariables"in i){const r=(i.visualVariables||[]).filter(n=>n.valueExpression!=="$view.scale");r.forEach(n=>{n.type==="rotation"?n.field?n.field=Lb(t,n.field,"avg_angle","number"):n.valueExpression&&(n.field=kM(t,n.valueExpression,"avg_angle","number"),n.valueExpression=null):n.normalizationField?(n.field=Lb(t,n.field,"avg_norm","number",n.normalizationField),n.normalizationField=null):n.field?n.field=Lb(t,n.field,"avg","number"):n.valueExpression&&(n.field=kM(t,n.valueExpression,"avg","number"),n.valueExpression=null)}),i.visualVariables=r}switch(i.type){case"simple":break;case"pie-chart":for(const r of i.attributes)r.field?r.field=Lb(t,r.field,"sum","number"):r.valueExpression&&(r.field=kM(t,r.valueExpression,"sum","number"),r.valueExpression=null);break;case"unique-value":i.field?i.field=Lb(t,i.field,"mode","string"):i.valueExpression&&(i.field=kM(t,i.valueExpression,"mode","string"),i.valueExpression=null);break;case"class-breaks":i.normalizationField?(i.field=Lb(t,i.field,"avg_norm","number",i.normalizationField),i.normalizationField=null):i.field?i.field=Lb(t,i.field,"avg","number"):i.valueExpression&&(i.field=kM(t,i.valueExpression,"avg","number"),i.valueExpression=null)}return i}const Aet=t=>{const e=i=>Cet().error(new ae("Unsupported-renderer",i,{renderer:t}));if(!t)return!1;switch(t.type){case"unique-value":if(t.field2||t.field3)return e("FeatureReductionCluster does not support multi-field UniqueValueRenderers"),!1;break;case"class-breaks":if(t.normalizationField){const i=t.normalizationType;if(i!=="field")return e(`FeatureReductionCluster does not support a normalizationType of ${i}`),!1}break;case"simple":case"pie-chart":break;default:return e(`FeatureReductionCluster does not support renderers of type ${t.type}`),!1}if(!Eet){if("valueExpression"in t&&t.valueExpression)return e("FeatureReductionCluster does not currently support renderer.valueExpression. Support will be added in a future release"),!1;if(("visualVariables"in t&&t.visualVariables||[]).some(i=>!(!("valueExpression"in i)||!i.valueExpression)))return e("FeatureReductionCluster does not currently support visualVariables with a valueExpression. Support will be added in a future release"),!1}return!0};function Pet(t,e,i){switch(t){case"sum":return`cluster_sum_${e}`;case"avg":case"avg_angle":return`cluster_avg_${e}`;case"mode":return`cluster_type_${e}`;case"avg_norm":{const r=i,n="field",s=e.toLowerCase()+",norm:"+n+","+r.toLowerCase();return"cluster_avg_"+sY(s)}}}function kM(t,e,i,r){const n=sY(e),s=i==="mode"?`cluster_type_${n}`:i==="sum"?`cluster_sum_${n}`:`cluster_avg_${n}`;return t.some(a=>a.name===s)||t.push(new io({name:s,isAutoGenerated:!0,onStatisticExpression:new Hy({expression:e,returnType:r}),statisticType:i})),s}function Lb(t,e,i,r,n){if(e==="cluster_count"||t.some(a=>a.name===e))return e;const s=Pet(i,e,n);return t.some(a=>a.name===s)||(i==="avg_norm"?t.push(new io({name:s,isAutoGenerated:!0,onStatisticExpression:new Hy({expression:`$feature.${e} / $feature.${n}`,returnType:r}),statisticType:"avg"})):t.push(new io({name:s,isAutoGenerated:!0,onStatisticField:e,statisticType:i}))),s}const Oet=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),this.aggregateGraphicOrigin=new TQe(this),this.addHandles(be(()=>this.renderer,()=>{if(this.featureReduction){const n=this._normalizeFeatureReduction(this.featureReduction);this._set("featureReduction",n)}},Nd))}set featureReduction(r){const n=this._normalizeFeatureReduction(r);this._set("featureReduction",n)}set renderer(r){}_withClusterVariable(r,n,s){const a=r.clone();return"visualVariables"in a&&(a.visualVariables||(a.visualVariables=[]),a.visualVariables.some(o=>o.type==="size")||a.visualVariables.push(new Ei({field:"cluster_count",stops:[new vd({value:1}),new vd({useMinValue:!0,size:n}),new vd({useMaxValue:!0,size:s})]}))),a}_normalizeFeatureReduction(r){var g;if((r==null?void 0:r.type)!=="cluster")return r;const n=r.clone(),s=[new io({name:"cluster_count",alias:"cluster_count",isAutoGenerated:!0,statisticType:"count"})],a=(n.fields??[]).filter(v=>!v.isAutoGenerated),o=r.renderer&&!((g=r.renderer.authoringInfo)!=null&&g.isAutoGenerated),{clusterMinSize:l,clusterMaxSize:c}=n;if(o){n.fields=[...s,...a];const v=this._withClusterVariable(n.renderer,l,c);return n.effectiveFeatureRenderer=v,n.effectiveClusterRenderer=v,n}if(r.symbol){if(n.fields=[...s,...a],n.renderer=null,!this.renderer)return n.effectiveFeatureRenderer=null,n.effectiveClusterRenderer=null,n;const v=Ooe(s,this.renderer),b=this._withClusterVariable(v,l,c),x="visualVariables"in b&&b.visualVariables?b.visualVariables:[],$=new aa({symbol:r.symbol,visualVariables:x});return n.fields=[...s,...a],n.effectiveFeatureRenderer=b,n.effectiveClusterRenderer=$,n}if(!this.renderer)return r;const h=Ooe(s,this.renderer);n.fields=[...s,...a],n.renderer=h;const m=this._withClusterVariable(h,l,c);return n.effectiveFeatureRenderer=m,n.effectiveClusterRenderer=m,n}};return d([f({readOnly:!0,clonable:!1})],i.prototype,"aggregateGraphicOrigin",void 0),d([f(Met)],i.prototype,"featureReduction",null),i=d([V("esri.layers.mixins.FeatureReductionLayer")],i),i},Loe={ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,ArcGISVideoLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GeoRSS:!0,GroupLayer:!0,KML:!0,KnowledgeGraphLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},Foe={ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},Roe={ArcGISFeatureLayer:!0,SubtypeGroupTable:!0},Let={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,CatalogLayer:!0,CSV:!0,GaussianSplatLayer:!0,GeoJSON:!0,GroupLayer:!0,IntegratedMesh3DTilesLayer:!0,Object3DTilesLayer:!0,IntegratedMeshLayer:!0,KML:!0,LineOfSightLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,RasterDataLayer:!0,VectorTileLayer:!0,ViewshedLayer:!0,Voxel:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/basemap-base-layers":{ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/basemap-ground-layers":{IntegratedMesh3DTilesLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-scene/tables":{ArcGISFeatureLayer:!0},"web-map/operational-layers":Loe,"web-map/basemap-base-layers":Foe,"web-map/tables":Roe,"link-chart/operational-layers":{...Loe,LinkChartLayer:!0},"link-chart/basemap-base-layers":Foe,"link-chart/tables":Roe,"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,BuildingSceneLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,MediaLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,SubtypeGroupLayer:!0,WCS:!0},"portal-item/tables":{ArcGISFeatureLayer:!0,SubtypeGroupTable:!0}},Fet=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.persistenceEnabled=!0,this.title=null}readId(r,n,s){var a;return((a=s==null?void 0:s.portalItem)==null?void 0:a.type)==="Group Layer"?void 0:r}writeListMode(r,n,s,a){(a&&a.layerContainerType==="ground"||r&&AOe(this,s,{},a))&&(n[s]=r)}writeOperationalLayerType(r,n,s){r&&(n[s]=r)}writeTitle(r,n){n.title=r??"Layer"}readVisibilityTimeExtent(r){return r?Ji.fromArray(r):null}writeVisibilityTimeExtent(r,n,s,a){r&&a.layerContainerType!=="tables"&&(r.isEmpty?a!=null&&a.messages&&a.messages.push(new ae("layer:invalid-visibilityTimeExtent","visibilityTimeExtent cannot be empty")):n[s]=r.toArray())}read(r,n){n&&(n.layer=this),dfe(this,r,s=>super.read(r,s),n)}write(r,n){var o,l;if(!this.persistenceEnabled&&!(n!=null&&n.ignorePersistenceEnabled))return null;if(n!=null&&n.origin){const c=`${n.origin}/${n.layerContainerType||"operational-layers"}`,h=Let[c];let m=!!(h!=null&&h[this.operationalLayerType]);if(this.operationalLayerType==="ArcGISTiledElevationServiceLayer"&&c==="web-scene/operational-layers"&&(m=!1),this.operationalLayerType==="ArcGISDimensionLayer"&&c==="web-map/operational-layers"&&(m=!1),!m)return(o=n.messages)==null||o.push(new ae("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${c}'`,{layer:this})),null}const s=super.write(r,{...n,layer:this}),a=!!n&&!!n.messages&&!!n.messages.filter(c=>c instanceof ae&&c.name==="web-document-write:property-required").length;return NT(s==null?void 0:s.url)?((l=n==null?void 0:n.messages)==null||l.push(new ae("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&a?null:s}beforeSave(){}};return d([f({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],i.prototype,"id",void 0),d([je("id",["id"])],i.prototype,"readId",null),d([f(S1e)],i.prototype,"listMode",void 0),d([Ge("listMode")],i.prototype,"writeListMode",null),d([f({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1},"web-scene":{name:"layerType",read:!1,write:{enabled:!0,ignoreOrigin:!0,layerContainerTypes:Lr,isRequired:!0}}}}})],i.prototype,"operationalLayerType",void 0),d([Ge("operationalLayerType")],i.prototype,"writeOperationalLayerType",null),d([f(K7)],i.prototype,"opacity",void 0),d([f({type:Boolean,readOnly:!1})],i.prototype,"persistenceEnabled",void 0),d([f({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],i.prototype,"title",void 0),d([Ge("title"),Ge(["web-scene"],"title")],i.prototype,"writeTitle",null),d([f({type:Ji,json:{origins:{"web-scene":{write:{layerContainerTypes:Lr}}}}})],i.prototype,"visibilityTimeExtent",void 0),d([je("visibilityTimeExtent")],i.prototype,"readVisibilityTimeExtent",null),d([Ge(["portal-item","web-map","web-scene"],"visibilityTimeExtent",{visibilityTimeExtent:{type:[[ei,PT]]}})],i.prototype,"writeVisibilityTimeExtent",null),d([f({type:Boolean,json:{name:"visibility",write:{layerContainerTypes:Lr}}})],i.prototype,"visible",void 0),i=d([V("esri.layers.mixins.OperationalLayer")],i),i};var jH;const LO=new jt({asc:"ascending",desc:"descending"});var jS;let A0=(jS=class extends $e{constructor(e){super(e),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new jH({field:this.field,valueExpression:this.valueExpression,order:this.order})}},jH=jS,jS);d([f({type:String,json:{write:!0}})],A0.prototype,"field",void 0),d([f({type:String,json:{write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],A0.prototype,"valueExpression",void 0),d([f({type:LO.apiValues,json:{type:LO.jsonValues,read:LO.read,write:LO.write}})],A0.prototype,"order",void 0),A0=jH=d([V("esri.layers.support.OrderByInfo")],A0);function Ret(t,e,i){if(!t)return null;const r=t.find(s=>!!s.field);if(!r)return null;const n=new A0;return n.read(r,i),[n]}function zet(t,e,i,r){const n=t.find(s=>!!s.field);n&&qn(i,[n.toJSON()],e)}const Net={type:[A0],json:{origins:{"web-scene":{write:!1,read:!1}},name:"layerDefinition.orderBy",read:{reader:Ret},write:{writer:zet}}},Det=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.orderBy=null}};return d([f(Net)],i.prototype,"orderBy",void 0),i=d([V("esri.layers.mixins.OrderedLayer")],i),i},jet=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=Or(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(r){r!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",r))}readPortalItem(r,n,s){if(n.itemId)return new Ot({id:n.itemId,portal:s==null?void 0:s.portal})}writePortalItem(r,n){r!=null&&r.id&&(n.itemId=r.id)}async loadFromPortal(r,n){var s;if((s=this.portalItem)!=null&&s.id)try{const{load:a}=await de(()=>import("./layersLoader-BXO3031Y.js"),__vite__mapDeps([262,139,140,138]));return lr(n),await a({instance:this,supportedTypes:r.supportedTypes,validateItem:r.validateItem,supportsData:r.supportsData,layerModuleTypeMap:r.layerModuleTypeMap,populateGroupLayer:r.populateGroupLayer},n)}catch(a){throw In(a)||Ie.getLogger(this).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})
  ${a}`),a}}async finishLoadEditablePortalLayer(r){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(r).catch(n=>(Bh(n),!0)))}async setUserPrivileges(r,n){if(!Ti.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(n);if(this.url)try{const{features:{edit:s,fullEdit:a},content:{updateItem:o}}=await this._fetchUserPrivileges(r,n);this._set("userHasEditingPrivileges",s),this._set("userHasFullEditingPrivileges",a),this._set("userHasUpdateItemPrivileges",o)}catch(s){Bh(s)}}async _fetchUserPrivileges(r,n){let s=this.portalItem;if(!r||!s||!s.loaded||s.sourceUrl)return this._fetchFallbackUserPrivileges(n);const a=!(Rt!=null&&Rt.findCredential(this.url)),o=r===s.id;if(o&&s.portal.user)return this._getUserPrivileges(s,a);let l,c;if(o)l=s.portal.url;else try{l=await rY(this.url,n)}catch(v){Bh(v)}if(!l||!XOe(l,s.portal.url))return this._fetchFallbackUserPrivileges(n);try{const v=n!=null?n.signal:null;c=await(Rt==null?void 0:Rt.getCredential(`${l}/sharing`,{prompt:!1,signal:v}))}catch(v){Bh(v)}const h=!0,m=!1,g=!1;if(!c)return{features:{edit:h,fullEdit:m},content:{updateItem:g}};try{if(o?await s.reload():(s=new Ot({id:r,portal:{url:l}}),await s.load(n)),s.portal.user)return this._getUserPrivileges(s,a)}catch(v){Bh(v)}return{features:{edit:h,fullEdit:m},content:{updateItem:g}}}_getUserPrivileges(r,n){const s=KWe(r);return n&&(s.features.edit=!0),s}async _fetchFallbackUserPrivileges(r){let n=!0;try{n=await this._fetchUserHasEditingPrivileges(r)}catch(s){Bh(s)}return{features:{edit:n,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(r){const n=this.url?Rt==null?void 0:Rt.findCredential(this.url):null;if(!n)return!0;const s=FO.credential===n?FO.user:await this._fetchEditingUser(r);return FO.credential=n,FO.user=s,(s==null?void 0:s.privileges)==null||s.privileges.includes("features:user:edit")}async _fetchEditingUser(r){var m,g;const n=(g=(m=this.portalItem)==null?void 0:m.portal)==null?void 0:g.user;if(n)return n;const s=Rt==null?void 0:Rt.findServerInfo(this.url??"");if(!(s!=null&&s.owningSystemUrl))return null;const a=`${s.owningSystemUrl}/sharing/rest`,o=qe.getDefault();if(o&&o.loaded&&Ld(o.restUrl)===Ld(a))return o.user;const l=`${a}/community/self`,c=r!=null?r.signal:null,h=await BD(mi(l,{authMode:"no-prompt",query:{f:"json"},signal:c}));return h.ok?ur.fromJSON(h.value.data):null}read(r,n){n&&(n.layer=this),super.read(r,n)}write(r,n){var o;const s=n==null?void 0:n.portal,a=((o=this.portalItem)==null?void 0:o.id)&&(this.portalItem.portal||qe.getDefault());return s&&a&&!xfe(a.restUrl,s.restUrl)?(n.messages&&n.messages.push(new ae("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(r,{...n,layer:this})}};return d([f({type:Ot})],i.prototype,"portalItem",null),d([je("web-document","portalItem",["itemId"])],i.prototype,"readPortalItem",null),d([Ge("web-document","portalItem",{itemId:{type:String}})],i.prototype,"writePortalItem",null),d([f({clonable:!1})],i.prototype,"resourceReferences",void 0),d([f({type:Boolean,readOnly:!0})],i.prototype,"userHasEditingPrivileges",void 0),d([f({type:Boolean,readOnly:!0})],i.prototype,"userHasFullEditingPrivileges",void 0),d([f({type:Boolean,readOnly:!0})],i.prototype,"userHasUpdateItemPrivileges",void 0),i=d([V("esri.layers.mixins.PortalLayer")],i),i},FO={credential:null,user:null};let NC=class extends et{constructor(){super(...arguments),this.updating=!1,this.status="unknown"}};d([f()],NC.prototype,"updating",void 0),d([f()],NC.prototype,"status",void 0),NC=d([V("esri.layers.support.PublishingInfo")],NC);const Vet=Symbol(),Uet=t=>{var n;var e;const i=t;let r=(n=class extends i{constructor(){super(...arguments),this[e]=!0}get publishingInfo(){if(this.destroyed)return null;const s=this._get("publishingInfo");if(s)return s;const a=new NC;return this._checkPublishingStatus(a),a}_checkPublishingStatus(s){let l=0;const c=async m=>{let g;s.updating=!0;try{g=await this.fetchPublishingStatus()}catch{g="unavailable"}g!=="published"&&g!=="unavailable"||(s.status==="publishing"&&this.refresh(),h.remove()),s.status=g,s.updating=!1,h.removed||(l=setTimeout(c,m,m+125))},h={removed:!1,remove(){this.removed=!0,clearTimeout(l)}};this.when().catch(()=>h.remove()),c(250),this.addHandles(h)}},e=Vet,n);return d([f({readOnly:!0,clonable:!1})],r.prototype,"publishingInfo",null),r=d([V("esri.layers.mixins.PublishableLayer")],r),r},av=new Ue,z2=new WeakMap;function Bet(t){Het(t)&&av.push(new WeakRef(t))}function qet(t){const e=av.find(i=>i.deref()===t);e&&av.remove(e)}function Het(t){return t!=null&&typeof t=="object"&&"refreshInterval"in t&&"refresh"in t}function qxe(t,e){return Number.isFinite(t)&&Number.isFinite(e)?e<=0?t:qxe(e,t%e):0}let sU=0,RO=0;function Get(){const t=Date.now();let e=!1;for(const i of av){const r=i.deref();r?r.refreshInterval&&t-(z2.get(r)??0)+5>=6e4*r.refreshInterval&&(z2.set(r,t),r.refresh(t)):e=!0}if(e)for(let i=av.length-1;i>=0;i--)av.at(i).deref()||av.removeAt(i)}Ppe(()=>{const t=Date.now();let e=0;for(const i of av){const r=i.deref();r&&(e=qxe(Math.round(6e4*r.refreshInterval),e),r.refreshInterval?z2.get(r)||z2.set(r,t):z2.delete(r))}if(e!==RO){if(RO=e,clearInterval(sU),RO===0)return void(sU=0);sU=setInterval(Get,RO)}},Nd);const zoe=.1,Wet=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=Od(()=>this.hasDataChanged()),this.when().then(()=>{this.destroyed||Bet(this)},()=>{})}destroy(){qet(this)}castRefreshInterval(r){return r>=zoe?r:r<=0?0:zoe}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(r=Date.now()){la(this._debounceHasDataChanged()).then(n=>{n&&this._set("refreshTimestamp",r),this.emit("refresh",{dataChanged:n})},n=>{Ie.getLogger(this).error(n),this.emit("refresh",{dataChanged:!1,error:n})})}async hasDataChanged(){return!0}get test(){}};return d([f({type:Number,json:{write:!0,origins:{"web-scene":{write:{enabled:!0,layerContainerTypes:Lr}}}}})],i.prototype,"refreshInterval",void 0),d([_i("refreshInterval")],i.prototype,"castRefreshInterval",null),d([f({readOnly:!0})],i.prototype,"refreshTimestamp",void 0),d([f({readOnly:!0})],i.prototype,"refreshParameters",null),i=d([V("esri.layers.mixins.RefreshableLayer")],i),i},Zet=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const r={minScale:this.minScale,maxScale:this.maxScale},n=this.parent;(n==null?void 0:n.effectiveScaleRange)!==void 0&&Yet(r,n.effectiveScaleRange);const s=this._get("effectiveScaleRange");return s&&s.minScale===r.minScale&&s.maxScale===r.maxScale?s:r}};return d([f({type:Number,nonNullable:!0,json:{write:!0}})],i.prototype,"minScale",void 0),d([f({type:Number,nonNullable:!0,json:{write:!0}})],i.prototype,"maxScale",void 0),d([f({readOnly:!0})],i.prototype,"effectiveScaleRange",null),i=d([V("esri.layers.mixins.ScaleRangeLayer")],i),i};function Yet(t,e){return t.minScale=t.minScale>0?e.minScale>0?Math.min(t.minScale,e.minScale):t.minScale:e.minScale,t.maxScale=t.maxScale>0?e.maxScale>0?Math.max(t.maxScale,e.maxScale):t.maxScale:e.maxScale,t}function Noe(t,e){return Ad.fromJSON({value:t,unit:e})}let ia=class extends bt($e){constructor(e){super(e),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeZone=null,this.trackIdField=null,this.useTime=!0,this.stops=null}readFullTimeExtent(e,i){return i.timeExtent&&Array.isArray(i.timeExtent)&&i.timeExtent.length===2?Ji.fromArray(i.timeExtent):null}writeFullTimeExtent(e,i){(e==null?void 0:e.start)!=null&&e.end!=null?i.timeExtent=e.toArray():i.timeExtent=null}readInterval(e,i){return i.timeInterval&&i.timeIntervalUnits?Noe(i.timeInterval,i.timeIntervalUnits):i.defaultTimeInterval&&i.defaultTimeIntervalUnits?Noe(i.defaultTimeInterval,i.defaultTimeIntervalUnits):null}writeInterval(e,i){i.timeInterval=(e==null?void 0:e.toJSON().value)??null,i.timeIntervalUnits=(e==null?void 0:e.toJSON().unit)??null}};d([f({type:Boolean,json:{name:"exportOptions.timeDataCumulative",write:!0}})],ia.prototype,"cumulative",void 0),d([f({type:String,json:{name:"endTimeField",write:{enabled:!0,allowNull:!0}}})],ia.prototype,"endField",void 0),d([f({type:Ji,json:{write:{enabled:!0,allowNull:!0}}})],ia.prototype,"fullTimeExtent",void 0),d([je("fullTimeExtent",["timeExtent"])],ia.prototype,"readFullTimeExtent",null),d([Ge("fullTimeExtent")],ia.prototype,"writeFullTimeExtent",null),d([f({type:Boolean,json:{write:!0}})],ia.prototype,"hasLiveData",void 0),d([f({type:Ad,json:{write:{enabled:!0,allowNull:!0}}})],ia.prototype,"interval",void 0),d([je("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],ia.prototype,"readInterval",null),d([Ge("interval")],ia.prototype,"writeInterval",null),d([f({type:String,json:{name:"startTimeField",write:{enabled:!0,allowNull:!0}}})],ia.prototype,"startField",void 0),d([f(SR("timeReference",!0))],ia.prototype,"timeZone",void 0),d([f({type:String,json:{write:{enabled:!0,allowNull:!0}}})],ia.prototype,"trackIdField",void 0),d([f({type:Boolean,json:{name:"exportOptions.useTime",write:!0}})],ia.prototype,"useTime",void 0),d([f({type:[Date],json:{read:!1}})],ia.prototype,"stops",void 0),ia=d([V("esri.layers.support.TimeInfo")],ia);const Jet={type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation",layerContainerTypes:Lr}}},Xet=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(r,n){const s=n.timeInfo.exportOptions;if(!s)return null;const a=s.timeOffset,o=BY.fromJSON(s.timeOffsetUnits);return a&&o?new Ad({value:a,unit:o}):null}set timeInfo(r){_be(r,this.fieldsIndex),this._set("timeInfo",r)}};return d([f({type:Ji,json:{write:!1}})],i.prototype,"timeExtent",void 0),d([f({type:Ad})],i.prototype,"timeOffset",void 0),d([je("service","timeOffset",["timeInfo.exportOptions"])],i.prototype,"readOffset",null),d([f({value:null,type:ia,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],i.prototype,"timeInfo",null),d([f(Jet)],i.prototype,"useViewTime",void 0),i=d([V("esri.layers.mixins.TemporalLayer")],i),i};let Qet=class extends EE{constructor(e){super(),this.type="track",this.trackInfoProvider=e}get id(){return this.trackInfoProvider.id}get[Uk](){return this.trackInfoProvider.trackInfo}},uu=class extends bt($e){constructor(e){super(e),this.labelingInfo=null,this.labelsVisible=!0,this.renderer=null,this.visible=!0}};d([f({type:[Lt],json:{write:!0}})],uu.prototype,"labelingInfo",void 0),d([f(v5)],uu.prototype,"labelsVisible",void 0),d([f({types:eA,json:{write:!0}})],uu.prototype,"renderer",void 0),d([f({type:Boolean,json:{write:!0}})],uu.prototype,"visible",void 0),uu=d([V("esri.layers.support.TrackPartInfo")],uu);let gl=class extends bt($e){constructor(e){super(e),this.enabled=!0,this.fields=[],this.latestObservations=new uu({renderer:new aa({symbol:XR.clone()})}),this.maxDisplayDuration=null,this.maxDisplayObservationsPerTrack=0,this.popupEnabled=!0,this.popupTemplate=null,this.previousObservations=new uu({renderer:new aa({symbol:XR.clone()})}),this.trackLines=new uu({renderer:new aa({symbol:$5.clone()})}),this.timeField="startTimeField"}writeFields(e,i,r){const n=e.filter(s=>s.statisticType!=="avg_angle").map(s=>s.toJSON());qn(r,n,i)}};d([f({type:Boolean,json:{write:!0}})],gl.prototype,"enabled",void 0),d([f({type:[io],json:{write:!0}})],gl.prototype,"fields",void 0),d([Ge("fields")],gl.prototype,"writeFields",null),d([f({type:uu,json:{write:!0}})],gl.prototype,"latestObservations",void 0),d([f({type:Ad,json:{write:!0}})],gl.prototype,"maxDisplayDuration",void 0),d([f({type:Number,json:{write:!0}})],gl.prototype,"maxDisplayObservationsPerTrack",void 0),d([f(y5)],gl.prototype,"popupEnabled",void 0),d([f({type:lg,json:{name:"popupInfo",write:!0}})],gl.prototype,"popupTemplate",void 0),d([f({type:uu,json:{write:!0}})],gl.prototype,"previousObservations",void 0),d([f({type:uu,json:{write:!0}})],gl.prototype,"trackLines",void 0),d([f({type:["timeReceived","startTimeField","endTimeField"],json:{read:!0,write:!0}})],gl.prototype,"timeField",void 0),gl=d([V("esri.layers.support.TrackInfo")],gl);const Ket=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.trackGraphicOrigin=new Qet(this),this.trackInfo=null}};return d([f({readOnly:!0,clonable:!1})],i.prototype,"trackGraphicOrigin",void 0),d([f({type:gl})],i.prototype,"trackInfo",void 0),i=d([V("esri.layers.mixins.TrackableLayer")],i),i},Doe=new jt({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let zh=class extends bt($e){constructor(e){super(e),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};d([f({json:{write:!0}})],zh.prototype,"name",void 0),d([f({json:{write:!0}})],zh.prototype,"description",void 0),d([f({json:{read:Doe.read,write:Doe.write}})],zh.prototype,"drawingTool",void 0),d([f({json:{write:!0}})],zh.prototype,"prototype",void 0),d([f({json:{write:!0}})],zh.prototype,"thumbnail",void 0),zh=d([V("esri.layers.support.FeatureTemplate")],zh);let Lh=class extends bt($e){constructor(e){super(e),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(e){const i={};for(const r of Object.keys(e))i[r]=s5(e[r]);return i}writeDomains(e,i){var n;const r={};for(const s of Object.keys(e))e[s]&&(r[s]=(n=e[s])==null?void 0:n.toJSON());i.domains=r}};d([f({json:{write:!0}})],Lh.prototype,"id",void 0),d([f({json:{write:!0}})],Lh.prototype,"name",void 0),d([f({json:{write:!0}})],Lh.prototype,"domains",void 0),d([je("domains")],Lh.prototype,"readDomains",null),d([Ge("domains")],Lh.prototype,"writeDomains",null),d([f({type:[zh],json:{write:!0}})],Lh.prototype,"templates",void 0),Lh=d([V("esri.layers.support.FeatureType")],Lh);let Gy=class extends bt($e){constructor(e){super(e),this.alias=null,this.name=void 0,this.fieldFormat=null}};d([f({type:String,json:{write:!0}})],Gy.prototype,"alias",void 0),d([f({type:String,nonNullable:!0,json:{write:{isRequired:!0}}})],Gy.prototype,"name",void 0),d([f({types:Bbe,json:{write:!0}})],Gy.prototype,"fieldFormat",void 0),Gy=d([V("esri.layers.support.FieldConfiguration")],Gy);function ett(t){const{popupTemplate:e,fieldsIndex:i}=t,r=e==null?void 0:e.fieldInfos;if(!(r!=null&&r.length)||!i)return;const n=[];for(const s of r){const{fieldName:a,label:o}=s,l=i.get(a);if(!l)continue;const c=o&&o!==l.alias?o:null,h=qbe(s,l);(c||h)&&n.push(new Gy({name:l.name,alias:c,fieldFormat:h}))}return n.length?n:null}function ttt(t){const{fields:e}=t;if(!(e!=null&&e.length))return;const i=[];for(const r of e){const n=x_(r)?_2(r):null;n&&i.push(new Gy({name:r.name,fieldFormat:n}))}return i.length?i:null}function itt(t,e){const{popupTemplate:i,fieldsIndex:r}=t;if(!i||!r)return;const n=rtt(t,e,i.fieldInfos);if(!n)return;const s=i.clone();return s.fieldInfos=n,s}function rtt(t,e,i){e??(e=[]),i=he(i)??[];let r=!1;const n=new Map;for(const s of e){const a=t.fieldsIndex.get(s.name);a&&n.set(a.name,s)}for(const s of i){const a=t.fieldsIndex.get(s.fieldName);if(!a)continue;const o=n.get(a.name);s.label=(o==null?void 0:o.alias)||a.alias,s.format=x_(a)&&(o!=null&&o.fieldFormat)?pY(o.fieldFormat,a):null,r=!0,n.delete(a.name)}for(const s of n.values()){const a=ntt(t,s);a&&(i.push(a),r=!0)}return r?i:null}function ntt(t,e){const{name:i,alias:r,fieldFormat:n}=e,s=t.fieldsIndex.get(i);if(!s||!r&&!n)return;const a=r||s.alias,o=x_(s)&&n?pY(n,s):null;return new Ss({fieldName:s.name,label:a,format:o,visible:!1,isEditable:Tbe(s,t)})}function stt(){return{fields:{type:[Fs],value:null,set:function(t){if(t&&ve("big-integer-warning-enabled")){const e=t.filter(i=>i.type==="big-integer"||i.type==="oid"&&(i.length||0)>=8);if(e.length){const i=e.map(r=>`'${r.name}'`).join(", ");Ie.getLogger(this).warn("#fields",`Layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}') references big-integer field(s): ${i}, support for which is experimental. Only integers less than ${Number.MAX_SAFE_INTEGER} (Number.MAX_SAFE_INTEGER) are supported.`)}}this._set("fields",t)}},fieldsIndex:{readOnly:!0,get(){return OE.fromLayer(this)}},outFields:{type:[String],json:{read:!1},set:function(t){this._userOutFields=t,this.notifyChange("outFields")},get:function(){var e;const t=this._userOutFields;if(!(t!=null&&t.length))return null;if(t.includes("*"))return["*"];if(!this.fields)return t;for(const i of t)((e=this.fieldsIndex)==null?void 0:e.has(i))||Ie.getLogger("esri.layers.support.fieldProperties").error("field-attributes-layer:invalid-field",`Invalid field ${i} found in outFields`,{layer:this,outFields:t});return XD(this.fieldsIndex,t)}}}}const aU=()=>Ie.getLogger("esri.layers.support.labelingInfo"),att=/\[([^[\]]+)\]/gi;function joe(t,e,i){return t?t.map(r=>{var s;const n=new Lt;if(n.read(r,i),n.labelExpression){const a=e.fields||((s=e.layerDefinition)==null?void 0:s.fields)||this.fields;n.labelExpression=n.labelExpression.replaceAll(att,(o,l)=>`[${ott(l,a)}]`)}return n}):null}function ott(t,e){if(!e)return t;const i=t.toLowerCase();for(let r=0;r<e.length;r++){const n=e[r].name;if(n.toLowerCase()===i)return n}return t}const Voe=["above-right","above-center","above-left","center-center","center-left","center-right","below-center","below-left","below-right"],ltt={esriGeometryPoint:Voe,esriGeometryMultiPatch:["always-horizontal"],esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:["center-along","above-along","below-along"],esriGeometryMultipoint:Voe,esriGeometryEnvelope:null};function WEt(t,e){const i=[];for(const r of t){const n=r.labelPlacement,s=ltt[e];if(!r.symbol)return aU().warn("No ILabelClass symbol specified."),[];if(!s)return aU().error(new ae("labeling:unsupported-geometry-type",`Unable to create labels for layer, geometry type '${e}' is not supported`)),[];if(s.includes(n))i.push(r);else{const a=s[0];n&&aU().warn(`Found invalid label placement type ${n} for ${e}. Defaulting to ${a}`);const o=r.clone();o.labelPlacement=a,i.push(o)}}return i}const ctt="relationships/",utt="expression/",dtt=/<br\s*\/*>/gi;let Io=class extends et{constructor(e){super(e),this._featureUtils=null,this.effectivePopupTemplate=null}get _arcadeTask(){return this.expressionsUsedInTitle.length>0?this._get("_arcadeTask")||Zm(()=>Vd()):null}get featureUtilsPromise(){return this._get("featureUtilsPromise")??de(()=>Promise.resolve().then(()=>brt),void 0).then(e=>this._featureUtils=e)}get calculatedExpressions(){var i;const e=new Ue;if(!this.expressionsUsedInTitle.length)return e;if(!((i=this._arcadeTask)!=null&&i.value)){for(const r of this.expressionsUsedInTitle??[])e.push({name:r.name,invalid:!0});return e}for(const r of this.expressionsUsedInTitle)try{const n=this._arcadeTask.value.arcade.parseScript(r.expression,["$layer","$map","$datastore"]);if(n.isAsync){e.push({name:r.name,invalid:!0});break}e.push({name:r.name,syntax:n,invalid:!1,func:this._arcadeTask.value.arcade.compileScript(n,{vars:{$feature:"any"}})})}catch{e.push({name:r.name,invalid:!0});break}return e}get expressionsUsedInTitle(){var i,r,n;let e=((i=this.effectivePopupTemplate)==null?void 0:i.title)??"";return typeof e!="string"?[]:(e=e.toLowerCase(),((n=(r=this.effectivePopupTemplate)==null?void 0:r.expressionInfos)==null?void 0:n.filter(s=>e.includes(`{expression/${s.name.toLowerCase()}}`)))??[])}get fieldInfoMap(){return this._featureUtils?this._createFieldInfoMap(this._featureUtils.getAllFieldInfos(this.effectivePopupTemplate)):null}get hasBadExpressions(){return this.calculatedExpressions.some(e=>e.invalid===!0)}get requiredFields(){var r,n;const e=new Set;if((r=this._arcadeTask)!=null&&r.value&&!this.hasBadExpressions)for(const s of((n=this.calculatedExpressions)==null?void 0:n.toArray())??[])try{const a=this._arcadeTask.value.arcade.extractFieldLiterals(s.syntax);for(const o of a){const l=o.split("."),c=this.fieldsIndex.get(l.at(-1)??"");c&&e.add(c.name)}}catch{}const i=this._extractFieldNames(this.workingTitle);for(const s of i){const a=this.fieldsIndex.get(s);a&&e.add(a.name)}return this.objectIdField!=null&&e.add(this.objectIdField),e}get titleFromDisplayField(){var i,r;let e="";return this.displayField&&(e=((i=this.fieldsIndex.get(this.displayField))==null?void 0:i.name)??""),e||(e=((r=this.fieldsIndex.get(this.objectIdField))==null?void 0:r.name)??""),e?`{${e}}`:""}get workingTitle(){const e=this.effectivePopupTemplate?this.effectivePopupTemplate.title:"";return e===""||e==null||this.hasBadExpressions||typeof e!="string"?this.titleFromDisplayField:e}async getTitle(e,i,r){const n=i.getObjectId()??i.attributes[e.objectIdField];return(await this.getTitles(e,[i],r)).get(n)??""}async getTitles(e,i,r){var a;const n=new Map,s=(r==null?void 0:r.timeZone)??"system";try{const[{substituteFieldsInLinksAndAttributes:o}]=await Promise.all([this.featureUtilsPromise,(a=this._arcadeTask)==null?void 0:a.promise]);r!=null&&r.fetchMissingFields&&(i=await this._checkAndReQueryGraphics(e,i));const{fieldInfoMap:l,workingTitle:c}=this,h=c&&l;i.forEach(m=>{const g=m.getObjectId()??m.attributes[e.objectIdField];let v=h?o({attributes:m.attributes,expressionAttributes:null,fieldInfoMap:l,globalAttributes:this._createFormattedAttributes(e,m,s).global,layer:e,text:c}):"";r!=null&&r.removeHTML&&(v=Aje.sanitize(v).replaceAll(dtt," ")),n.set(g,v)})}catch{}return n}async _checkAndReQueryGraphics(e,i){const r=i.map(n=>n.getObjectId()??n.attributes[e.objectIdField]).filter(ln);if(r.length!==i.length)return i;if(i.some(n=>!Lbe(n,this.requiredFields))){const n=e.createQuery();n.where="1=1",n.outFields=[...this.requiredFields],n.objectIds=r;const s=await e.queryFeatures(n);if((s==null?void 0:s.features.length)===i.length)return s.features}return i}_createFieldInfoMap(e){const i=new Map;if(!e)return i;for(const r of e){if(!r.fieldName)continue;const n=this.fieldsIndex.get(r.fieldName),s=(n==null?void 0:n.name)??r.fieldName;r.fieldName=s,i.set(s.toLowerCase(),r)}return i}_createFormattedAttributes(e,i,r="system"){var o,l;const n=((o=this.effectivePopupTemplate)==null?void 0:o.fieldInfos)??[],s={};if(!this._featureUtils)return{};if(!this.hasBadExpressions&&this.calculatedExpressions.length>0&&((l=this._arcadeTask)!=null&&l.value)){const c=this._arcadeTask.value.Feature.createFromGraphicLikeObject(i.geometry,i.attributes,e,null);for(const h of this.calculatedExpressions)try{s[`expression/${h.name}`]=h.func({vars:{$feature:c}})}catch{}}const a={...i.attributes,...s};return{global:this._featureUtils.formatAttributes({fieldInfos:n,attributes:a,graphic:i,timeZone:r,layer:e,fieldInfoMap:this.fieldInfoMap}),content:[]}}_extractFieldNames(e){return dY(e).filter(i=>!(i.startsWith(ctt)||i.startsWith(utt)))}};d([f({readOnly:!0})],Io.prototype,"_arcadeTask",null),d([f()],Io.prototype,"_featureUtils",void 0),d([f({readOnly:!0})],Io.prototype,"featureUtilsPromise",null),d([f({readOnly:!0})],Io.prototype,"calculatedExpressions",null),d([f()],Io.prototype,"displayField",void 0),d([f()],Io.prototype,"effectivePopupTemplate",void 0),d([f()],Io.prototype,"expressionsUsedInTitle",null),d([f()],Io.prototype,"fieldsIndex",void 0),d([f()],Io.prototype,"fieldInfoMap",null),d([f()],Io.prototype,"fields",void 0),d([f()],Io.prototype,"objectIdField",void 0),d([f()],Io.prototype,"requiredFields",null),Io=d([V("esri.layers.support.TitleCreator")],Io);const Kx=[];function htt(t,e){if(dR(t.url??""))return!0;const{wkid:i}=e;for(const r of Kx){if((t.version??0)>=r[0])return!0;if(typeof r[1]=="function"&&(r[1]=r[1]()),r[1].has(i))return!1}return!0}Kx.push([10.91,()=>{const t=new Set([9709,9716,9741,9761,9766]);for(let e=9712;e<=9713;e++)t.add(e);for(let e=9748;e<=9749;e++)t.add(e);for(let e=20904;e<=20932;e++)t.add(e);for(let e=21004;e<=21032;e++)t.add(e);for(let e=21207;e<=21264;e++)t.add(e);for(let e=21307;e<=21364;e++)t.add(e);for(let e=23301;e<=23333;e++)t.add(e);for(let e=102759;e<=102760;e++)t.add(e);for(let e=102934;e<=102955;e++)t.add(e);return t}]),Kx.push([10.9,()=>{const t=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let e=9356;e<=9360;e++)t.add(e);for(let e=9404;e<=9407;e++)t.add(e);for(let e=9476;e<=9482;e++)t.add(e);for(let e=9487;e<=9494;e++)t.add(e);for(let e=9697;e<=9699;e++)t.add(e);return t}]),Kx.push([10.81,()=>{const t=new Set([9265,9333,103598,103699]);for(let e=9248;e<=9254;e++)t.add(e);for(let e=9271;e<=9273;e++)t.add(e);for(let e=9284;e<=9285;e++)t.add(e);for(let e=21453;e<=21463;e++)t.add(e);return t}]),Kx.push([10.8,()=>{const t=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let e=8035;e<=8036;e++)t.add(e);for(let e=8455;e<=8456;e++)t.add(e);for(let e=8518;e<=8529;e++)t.add(e);for(let e=8533;e<=8536;e++)t.add(e);for(let e=8538;e<=8540;e++)t.add(e);for(let e=8677;e<=8679;e++)t.add(e);for(let e=8902;e<=8903;e++)t.add(e);for(let e=8907;e<=8910;e++)t.add(e);for(let e=8949;e<=8951;e++)t.add(e);for(let e=8972;e<=8987;e++)t.add(e);for(let e=9039;e<=9040;e++)t.add(e);for(let e=9068;e<=9069;e++)t.add(e);for(let e=9140;e<=9141;e++)t.add(e);for(let e=9148;e<=9150;e++)t.add(e);for(let e=9153;e<=9159;e++)t.add(e);for(let e=9205;e<=9218;e++)t.add(e);for(let e=9221;e<=9222;e++)t.add(e);for(let e=54098;e<=54101;e++)t.add(e);return t}]),Kx.push([10.71,()=>{const t=new Set([6316]);for(let e=8351;e<=8353;e++)t.add(e);for(let e=9294;e<=9297;e++)t.add(e);for(let e=22619;e<=22621;e++)t.add(e);for(let e=103586;e<=103594;e++)t.add(e);return t}]);async function ptt(t,e,i){const r=t&&t.getAtOrigin&&t.getAtOrigin("renderer",e.origin);if(r&&r.type==="unique-value"&&r.styleOrigin){const n=await BD(r.populateFromStyle());if(lr(i),n.ok===!1){const s=n.error;e!=null&&e.messages&&e.messages.push(new Ic("renderer:style-reference",`Failed to create unique value renderer from style reference: ${s.message}`,{error:s,context:e})),t.clear("renderer",e==null?void 0:e.origin)}}}function ftt({displayField:t,editFieldsInfo:e,fields:i,objectIdField:r,title:n},s){if(!i)return null;const a=vtt({editFieldsInfo:e,fields:i,objectIdField:r},s);if(!a.length)return null;const o=_tt({titleBase:n,fields:i,displayField:t}),l=wtt();return new lg({title:o,content:l,fieldInfos:a})}const mtt=(t,e)=>e.visibleFieldNames?e.visibleFieldNames.has(t.name):lUe(t,e);function gtt({fields:t,ignoreFieldTypes:e,sortDisabled:i}){const r=t;return e&&(t=t.filter(n=>!e.includes(n.type))),t===r&&(t=t.slice()),i!==!0&&t.sort(ytt),t}function ytt(t,e){return t.type==="oid"?-1:e.type==="oid"?1:Uoe(t)?-1:Uoe(e)?1:(t.alias||t.name).toLocaleLowerCase().localeCompare((e.alias||e.name).toLocaleLowerCase())}function vtt(t,e){const i=e==null?void 0:e.visibleFieldNames;return gtt({fields:t.fields??[],ignoreFieldTypes:(e==null?void 0:e.ignoreFieldTypes)||xtt,sortDisabled:e==null?void 0:e.sortDisabled}).map(r=>new Ss({fieldName:r.name,isEditable:Tbe(r,t),label:r.alias,format:btt(r),visible:mtt(r,{...t,visibleFieldNames:i})}))}function btt(t){switch(t.type){case"small-integer":case"integer":return new $n({digitSeparator:!0,places:0});case"single":case"double":return new $n({digitSeparator:!0,places:2});case"string":return T9(t.name)?new $n({digitSeparator:!0,places:0}):void 0;default:return}}function wtt(){return[new Fv,new aT]}function _tt(t){const e=Q6e(t),{titleBase:i}=t;return e?`${i}: {${e.trim()}}`:i??""}function Uoe(t){var i;return(t.name&&t.name.toLowerCase())==="name"?!0:((i=t.alias)==null?void 0:i.toLowerCase())==="name"}const xtt=["geometry","blob","raster","guid","xml"],Ks="FeatureLayer";function zO(t,e){return new ae("layer:unsupported",`Layer (${t.title}, ${t.id}) of type '${t.declaredClass}' ${e}`,{layer:t})}function Boe(t){return t&&t instanceof Ue}const oU=stt();function lU(t,e,i){const r=!!(i!=null&&i.writeLayerSchema);return{enabled:r,ignoreOrigin:r}}let ot=class extends SQe(Oet(aJe(Uet(rJe(eJe(BYe(Det(Xet(Ket(Zet(Wet(vYe(Fet(jet(p5(qYe(yYe(bt(Kr))))))))))))))))))){constructor(...e){super(...e),this.attributeTableTemplate=null,this.charts=null,this.copyright=null,this.displayField=null,this.dynamicDataSource=null,this.fields=null,this.fieldsIndex=null,this.formTemplate=null,this.fullExtent=null,this.geometryType=null,this.graphicOrigin=new hYe(this),this.hasM=void 0,this.hasZ=void 0,this.infoFor3D=null,this.isTable=!1,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.objectIdField=null,this.operationalLayerType="ArcGISFeatureLayer",this.outFields=null,this.path=null,this.popupEnabled=!0,this.popupTemplate=null,this.resourceInfo=null,this.screenSizePerspectiveEnabled=!0,this.spatialReference=tt.WGS84,this.subtypeCode=null,this.supportedSourceTypes=new Set(["Feature Layer","Oriented Imagery Layer","Table","Catalog Layer"]),this.templates=null,this.timeInfo=null,this.title=null,this.sublayerTitleMode="item-title",this.type="feature",this.typeIdField=null,this.types=null,this.visible=!0,this._debouncedSaveOperations=Od(async(i,r,n)=>{const{save:s,saveAs:a}=await de(()=>import("./featureLayerUtils-DjlPt6aE.js"),__vite__mapDeps([263,257,264,261,139]));switch(i){case 0:return s(this,r);case 1:return a(this,n,r)}})}destroy(){var e;(e=this.source)==null||e.destroy()}normalizeCtorArgs(e,i){return typeof e=="string"?{url:e,...i}:e}load(e){var n;const i=e!=null?e.signal:null;if((n=this.portalItem)!=null&&n.loaded&&this.source)return this.addResolvingPromise(this.createGraphicsSource(i).then(s=>this.initLayerProperties(s))),Promise.resolve(this);const r=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection","Scene Service"]},e).catch(Bh).then(async()=>{if(this.url&&this.layerId==null&&/FeatureServer|MapServer\/*$/i.test(this.url)){const s=await this._fetchFirstValidLayerId(i);s!=null&&(this.layerId=s)}if(!this.url&&!this._hasMemorySource())throw new ae("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return this.initLayerProperties(await this.createGraphicsSource(i))}).then(()=>WXe(this,"load",e));return this.addResolvingPromise(r),Promise.resolve(this)}get _titleCreator(){const e=this._get("_titleCreator");return Or(e),new Io({fieldsIndex:this.fieldsIndex,objectIdField:this.objectIdField,fields:this.fields,displayField:this.displayField,effectivePopupTemplate:this.popupTemplate??this.defaultPopupTemplate})}readCapabilities(e,i){return i=i.layerDefinition||i,exe(i,this.url)}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")??0)+1}get editingEnabled(){var e;return!(this.loaded&&!((e=this.capabilities)!=null&&e.operations.supportsEditing))&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)}set editingEnabled(e){this._overrideIfSome("editingEnabled",e)}readEditingEnabled(e,i){return this._readEditingEnabled(i,!1)}readEditingEnabledFromWebMap(e,i,r){return this._readEditingEnabled(i,!0,r)}writeEditingEnabled(e,i){this._writeEditingEnabled(e,i,!1)}writeEditingEnabledToWebMap(e,i,r,n){this._writeEditingEnabled(e,i,!0,n)}get effectiveEditingEnabled(){return JXe(this)}get featureTitleFields(){return[...this._titleCreator.requiredFields]}set fieldConfigurations(e){if(this._hasMemorySource()||(this._override("fieldConfigurations",e),!this.loaded))return;const i=itt(this,e);i&&this._set("popupTemplate",i)}get fieldConfigurations(){if(!this._hasMemorySource())return this._isOverridden("fieldConfigurations")?this._get("fieldConfigurations"):ett(this)||null}readIsTable(e,i){return(i=(i==null?void 0:i.layerDefinition)??i).type==="Table"||!i.geometryType}writeIsTable(e,i,r,n){n!=null&&n.writeLayerSchema&&qn(r,e?"Table":"Feature Layer",i)}readGlobalIdField(e,i){return B1e(i.layerDefinition||i)}readObjectIdField(e,i){return q1e(i.layerDefinition||i)}writePopupTemplate(e,i,r,n){e&&(i[r]=e.toJSON({...n,writeFieldFormat:!(n!=null&&n.writeLayerSchema)}))}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){xne(e,this.fieldsIndex),this._set("renderer",e)}readRenderer(e,i,r){var s;i=i.layerDefinition||i;const n=(s=i.drawingInfo)==null?void 0:s.renderer;if(n){const a=LE(n,i,r)??void 0;return a||Ie.getLogger(this).error("Failed to create renderer",{rendererDefinition:i.drawingInfo.renderer,layer:this,context:r}),a}return rJ(i,r)}set source(e){const i=this._get("source");i!==e&&(Boe(i)&&this._resetMemorySource(i),Boe(e)&&this._initMemorySource(e),this._set("source",e))}castSource(e){return e?Array.isArray(e)||e instanceof Ue?new um({layer:this,items:e}):e:null}readSource(e,i){const r=zn.fromJSON(i.featureSet);return new um({layer:this,items:(r==null?void 0:r.features)??[]})}readTemplates(e,i){const r=i.editFieldsInfo,n=r==null?void 0:r.creatorField,s=r==null?void 0:r.editorField;return e=e==null?void 0:e.map(a=>zh.fromJSON(a)),this._fixTemplates(e,n),this._fixTemplates(e,s),e}readTitle(e,i){var s,a,o;const r=((s=i.layerDefinition)==null?void 0:s.name)??i.name,n=i.title||((a=i.layerDefinition)==null?void 0:a.title);if(r){const l=(o=this.portalItem)==null?void 0:o.title;if(this.sublayerTitleMode==="item-title")return this.url?v3e(this.url,r):r;let c=r;if(!c&&this.url){const h=Np(this.url);h!=null&&(c=h.title)}return c?(this.sublayerTitleMode==="item-title-and-service-name"&&l&&l!==c&&(c=l+" - "+c),rZ(c)):void 0}if(this.sublayerTitleMode==="item-title"&&n)return n}readTitleFromWebMap(e,i){var r;return i.title||((r=i.layerDefinition)==null?void 0:r.name)}readTypeIdField(e,i){let r=(i=i.layerDefinition||i).typeIdField;if(r&&i.fields){r=r.toLowerCase();const n=i.fields.find(s=>s.name.toLowerCase()===r);n&&(r=n.name)}return r}readTypes(e,i){e=(i=i.layerDefinition||i).types;const r=i.editFieldsInfo,n=r==null?void 0:r.creatorField,s=r==null?void 0:r.editorField;return e==null?void 0:e.map(a=>(a=Lh.fromJSON(a),this._fixTemplates(a.templates,n),this._fixTemplates(a.templates,s),a))}readVisible(e,i){var r;return((r=i.layerDefinition)==null?void 0:r.defaultVisibility)!=null?!!i.layerDefinition.defaultVisibility:i.visibility!=null?!!i.visibility:void 0}async addAttachment(e,i){const r=await CXe(this,e,i,Ks);return this.lastEditsEventDate=new Date,r}async updateAttachment(e,i,r){const n=await EXe(this,e,i,r,Ks);return this.lastEditsEventDate=new Date,n}async applyEdits(e,i){return kXe(this,e,i)}async uploadAssets(e,i){return AXe(this,e,i)}createFieldConfigurations(){return ttt(this)}createPopupTemplate(e){return ftt(this,e)}async createGraphicsSource(e){if(this._hasMemorySource()&&this.source)return this.source.load({signal:e});const{default:i}=await OW(de(()=>import("./FeatureLayerSource-wQQ2LQkD.js"),__vite__mapDeps([265,38,43,266,267,268,77,78,269,270,25,20,271,272,11])),e);return new i({layer:this,supportedSourceTypes:this.supportedSourceTypes}).load({signal:e})}createQuery(){const e=VXe(this);e.dynamicDataSource=this.dynamicDataSource;const i=this.subtypeCode!=null?`${this.subtypeField} = ${this.subtypeCode}`:null,r=ow(this.definitionExpression,i);return e.where=r||"1=1",e}async deleteAttachments(e,i){const r=await PXe(this,e,i,Ks);return this.lastEditsEventDate=new Date,r}async fetchRecomputedExtents(e){return OXe(this,e,Ks)}async getFeatureTitle(e,i){return this._titleCreator.getTitle(this,e,i)}async getFeatureTitles(e,i){return this._titleCreator.getTitles(this,e,i)}getFeatureType(e){return W1e(this.types,this.typeIdField,e)}getFieldAlias(e){var r;const i=this.getField(e);if(i)return((r=this.getFieldConfiguration(i.name))==null?void 0:r.alias)||i.alias}getFieldConfiguration(e){var i;return e=e.toLowerCase(),(i=this.fieldConfigurations)==null?void 0:i.find(r=>r.name.toLowerCase()===e)}getFieldDomain(e,i){var r;return BXe(this,e,i,((r=this.getField(e))==null?void 0:r.domain)??null)}async queryAttachments(e,i){return LXe(this,e,i,Ks)}async queryFeatures(e,i){const r=await this.load(),n=await r.source.queryFeatures(mt.from(e)??r.createQuery(),i),s=this.graphicOrigin;if(n!=null&&n.features)for(const a of n.features)a.layer=a.sourceLayer=r,a.origin=s;return n}async queryObjectIds(e,i){return await FXe(this,e,i,Ks)}async queryFeatureCount(e,i){return RXe(this,e,i,Ks)}async queryExtent(e,i){return zXe(this,e,i,Ks)}async queryRelatedFeatures(e,i){return NXe(this,e,i,Ks)}async queryRelatedFeaturesCount(e,i){return DXe(this,e,i,Ks)}async queryPivot(e,i){var o;const{source:r,capabilities:n}=await this.load();if(!r.queryPivot||!((o=n==null?void 0:n.operations)!=null&&o.supportsQueryPivot))throw new ae(Ks,"Layer source does not support queryPivot capability");const s=await de(()=>import("./PivotQuery-Boq_Nzu7.js").then(l=>l.P),[]),a=await r.queryPivot(s.default.from(e),i);if(a!=null&&a.features)for(const l of a.features)l.layer=l.sourceLayer=this;return a}async queryTopFeatures(e,i){var o;const{source:r,capabilities:n}=await this.load();if(!r.queryTopFeatures||!((o=n==null?void 0:n.query)!=null&&o.supportsTopFeaturesQuery))throw new ae(Ks,"Layer source does not support queryTopFeatures capability");const s=await de(()=>import("./TopFeaturesQuery-D1eItqEc.js"),[]),a=await r.queryTopFeatures(s.default.from(e),i);if(a!=null&&a.features)for(const l of a.features)l.layer=l.sourceLayer=this;return a}async queryAttributeBins(e,i){const{source:r,capabilities:n}=await this.load();if(!r.queryAttributeBins)throw new ae(Ks,"Layer source does not support queryAttributeBins capability");eQe(e,n,Ks);const s=await de(()=>import("./AttributeBinsQuery-CevscO_v.js"),__vite__mapDeps([197,15,22])),a=await r.queryAttributeBins(s.default.from(e),i);if(a.features)for(const o of a.features)o.layer=o.sourceLayer=this;return a}async queryTopObjectIds(e,i){const{source:r,capabilities:n}=await this.load();if(!r.queryTopObjectIds||!(n!=null&&n.query.supportsTopFeaturesQuery))throw new ae(Ks,"Layer source does not support queryTopObjectIds capability");const s=await de(()=>import("./TopFeaturesQuery-D1eItqEc.js"),[]);return(await r.queryTopObjectIds(s.default.from(e),i)).filter(P6e)}async queryTopFeaturesExtent(e,i){var a;const{source:r,capabilities:n}=await this.load();if(!r.queryTopExtents||!((a=n==null?void 0:n.query)!=null&&a.supportsTopFeaturesQuery))throw new ae(Ks,"Layer source does not support queryTopExtents capability");const s=await de(()=>import("./TopFeaturesQuery-D1eItqEc.js"),[]);return r.queryTopExtents(s.default.from(e),i)}async queryTopFeatureCount(e,i){var a;const{source:r,capabilities:n}=await this.load();if(!r.queryTopCount||!((a=n==null?void 0:n.query)!=null&&a.supportsTopFeaturesQuery))throw new ae(Ks,"Layer source does not support queryFeatureCount capability");const s=await de(()=>import("./TopFeaturesQuery-D1eItqEc.js"),[]);return r.queryTopCount(s.default.from(e),i)}read(e,i){const r=e.featureCollection;if((r||e.type==="Feature Collection")&&(this.resourceInfo=e),r){const{layers:n,showLegend:s}=r;(n==null?void 0:n.length)===1&&(super.read(n[0],i),s!=null&&super.read({showLegend:s},i))}super.read(e,i),i&&i.origin==="service"&&(this.revert(["objectIdField","fields","timeInfo","dateFieldsTimeZone"],"service"),this.spatialReference||this.revert(["spatialReference"],"service"))}write(e,i){i={...i,origin:(i==null?void 0:i.origin)??void 0,writeLayerSchema:(i==null?void 0:i.writeLayerSchema)??this._hasMemorySource()};const{origin:r,layerContainerType:n,messages:s}=i;if(this.dynamicDataSource)return s==null||s.push(zO(this,"using a dynamic data source cannot be written to web scenes, web maps and feature service items")),null;if(this.isTable){if((r==="web-map"||r==="web-scene")&&n!=="tables")return s==null||s.push(zO(this,`a table source can only be written to tables, not ${n}`)),null;if(this._hasMemorySource())return s==null||s.push(zO(this,"using an in-memory table source cannot be written to web scenes and web maps")),null}else if(this.loaded&&(r==="web-map"||r==="web-scene")&&n==="tables")return s==null||s.push(zO(this,"using a non-table source cannot be written to tables in web maps or web scenes")),null;return super.write(e,i)}clone(){if(this._hasMemorySource())throw new ae(Ks,`FeatureLayer (title: ${this.title}, id: ${this.id}) created using in-memory source cannot be cloned`);return super.clone()}serviceSupportsSpatialReference(e){var i;return!!this.loaded&&(((i=this.source)==null?void 0:i.type)==="memory"||htt(this,e))}async save(e){return this._debouncedSaveOperations(0,e)}async saveAs(e,i){return this._debouncedSaveOperations(1,i,e)}_readEditingEnabled(e,i,r){var s;let n=(s=e.layerDefinition)==null?void 0:s.capabilities;return n?this._hasEditingCapability(n):(n=e.capabilities,i&&(r==null?void 0:r.origin)==="web-map"&&!this._hasMemorySource()&&n?this._hasEditingCapability(n):void 0)}_hasEditingCapability(e){return e.toLowerCase().split(",").map(i=>i.trim()).includes("editing")}_writeEditingEnabled(e,i,r,n){var s,a;if(!e){const o=(a=(s=this.capabilities)==null?void 0:s.operations)!=null&&a.supportsSync?"Query,Sync":"Query";qn("layerDefinition.capabilities",o,i),r&&!(n!=null&&n.writeLayerSchema)&&(i.capabilities=o)}}_fetchFirstValidLayerId(e){return mi(this.url??"",{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:e}).then(i=>{const r=i.data;if(r)return this.applyPreferredHost(r),this.findFirstValidLayerId(r)})}async initLayerProperties(e){var i;return this._set("source",e),e.sourceJSON&&(this.sourceJSON=e.sourceJSON,this.read(e.sourceJSON,{origin:"service",portalItem:this.portalItem,portal:(i=this.portalItem)==null?void 0:i.portal,url:this.parsedUrl})),this._verifySource(),this._verifyFields(),xne(this.renderer,this.fieldsIndex),_be(this.timeInfo,this.fieldsIndex),this._hasMemorySource()&&this.geometryType==="mesh"&&(this.capabilities.query.supportsReturnMesh=!0),ptt(this,{origin:"service"})}async hasDataChanged(){return jXe(this)}async fetchPublishingStatus(){const e=this.source;return e!=null&&e.fetchPublishingStatus?e.fetchPublishingStatus():"unavailable"}_verifyFields(){var i,r;const e=((i=this.parsedUrl)==null?void 0:i.path)??"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+e+")"),this.isTable||this._hasMemorySource()||e.search(/\/FeatureServer\//i)!==-1||(r=this.fields)!=null&&r.some(n=>n.type==="geometry")||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+e+")")}_fixTemplates(e,i){e&&e.forEach(r=>{var s;const n=(s=r.prototype)==null?void 0:s.attributes;n&&i&&delete n[i]})}_verifySource(){if(this._hasMemorySource()){if(this.url)throw new ae("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new ae("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}_initMemorySource(e){e.forEach(i=>{i.layer=this,i.sourceLayer=this}),this.addHandles([e.on("after-add",i=>{i.item.layer=this,i.item.sourceLayer=this}),e.on("after-remove",i=>{i.item.layer=null,i.item.sourceLayer=null})],"fl-source")}_resetMemorySource(e){e.forEach(i=>{i.layer=null,i.sourceLayer=null}),this.removeHandles("fl-source")}_hasMemorySource(){return!(this.url||!this.source)}findFirstValidLayerId(e){return Array.isArray(e.layers)&&e.layers.length>0?e.layers[0].id:Array.isArray(e.tables)&&e.tables.length>0?e.tables[0].id:void 0}};d([f({clonable:!1,readOnly:!0})],ot.prototype,"_titleCreator",null),d([f(xJe)],ot.prototype,"attributeTableTemplate",void 0),d([je("service","capabilities")],ot.prototype,"readCapabilities",null),d([f({json:{origins:{"web-scene":{write:!1}},write:!0}})],ot.prototype,"charts",void 0),d([f({readOnly:!0})],ot.prototype,"createQueryVersion",null),d([f({json:{read:{source:"layerDefinition.copyrightText"}}})],ot.prototype,"copyright",void 0),d([f({json:{read:{source:"layerDefinition.displayField"}}})],ot.prototype,"displayField",void 0),d([f({types:rv,readOnly:!0})],ot.prototype,"defaultSymbol",void 0),d([f({type:gd})],ot.prototype,"dynamicDataSource",void 0),d([f({type:Boolean})],ot.prototype,"editingEnabled",null),d([je(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],ot.prototype,"readEditingEnabled",null),d([je("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],ot.prototype,"readEditingEnabledFromWebMap",null),d([Ge(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],ot.prototype,"writeEditingEnabled",null),d([Ge("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],ot.prototype,"writeEditingEnabledToWebMap",null),d([f({readOnly:!0})],ot.prototype,"effectiveEditingEnabled",null),d([f({clonable:!1,readOnly:!0})],ot.prototype,"featureTitleFields",null),d([f({type:[Gy],json:{name:"layerDefinition.fieldConfigurations",write:{overridePolicy(t,e,i){return{enabled:!(i!=null&&i.writeLayerSchema),ignoreOrigin:this.originIdOf(e)===1}}}}})],ot.prototype,"fieldConfigurations",null),d([f({...oU.fields,json:{read:{source:"layerDefinition.fields"},origins:{service:{name:"fields"},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:lU}}}}})],ot.prototype,"fields",void 0),d([f(oU.fieldsIndex)],ot.prototype,"fieldsIndex",void 0),d([f({type:od,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],ot.prototype,"formTemplate",void 0),d([f({json:{read:{source:"layerDefinition.extent"}}})],ot.prototype,"fullExtent",void 0),d([f({json:{origins:{"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:lU,writer(t,e,i){const r=t?_H.toJSON(t):null;r&&qn(i,r,e)}}}},read:{source:"layerDefinition.geometryType",reader:_H.read}}})],ot.prototype,"geometryType",void 0),d([f({readOnly:!0,clonable:!1})],ot.prototype,"graphicOrigin",void 0),d([f({json:{read:{source:"layerDefinition.hasM"}}})],ot.prototype,"hasM",void 0),d([f({json:{read:{source:"layerDefinition.hasZ"}}})],ot.prototype,"hasZ",void 0),d([f(bJe)],ot.prototype,"id",void 0),d([f({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],ot.prototype,"infoFor3D",void 0),d([f({json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],ot.prototype,"isTable",void 0),d([je("service","isTable",["type","geometryType"]),je("isTable",["layerDefinition.type","layerDefinition.geometryType"])],ot.prototype,"readIsTable",null),d([Ge("web-map","isTable")],ot.prototype,"writeIsTable",null),d([f(v5)],ot.prototype,"labelsVisible",void 0),d([f({type:[Lt],json:{origins:{service:{name:"drawingInfo.labelingInfo",read:joe,write:!1}},name:"layerDefinition.drawingInfo.labelingInfo",read:joe,write:{layerContainerTypes:Lr}}})],ot.prototype,"labelingInfo",void 0),d([f((()=>{const t=he(vJe);return t.json.origins["portal-item"]={write:{target:"layerDefinition.drawingInfo.transparency",writer(e,i,r){qn(r,WD(e),i)}}},t})())],ot.prototype,"opacity",void 0),d([f(gJe)],ot.prototype,"legendEnabled",void 0),d([f({type:["show","hide"],json:(()=>{const t=he(S1e.json);return t.origins["portal-item"]={read:!1,write:!1},t})()})],ot.prototype,"listMode",void 0),d([je("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],ot.prototype,"readGlobalIdField",null),d([f({json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:lU}}}}})],ot.prototype,"objectIdField",void 0),d([je("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],ot.prototype,"readObjectIdField",null),d([f({type:["ArcGISFeatureLayer"],json:{write:{target:"layerType",ignoreOrigin:!0,layerContainerTypes:Lr}}})],ot.prototype,"operationalLayerType",void 0),d([f(oU.outFields)],ot.prototype,"outFields",void 0),d([f({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],ot.prototype,"path",void 0),d([f(y5)],ot.prototype,"popupEnabled",void 0),d([f({type:lg,json:{name:"popupInfo",write:!0}})],ot.prototype,"popupTemplate",void 0),d([Ge("popupTemplate")],ot.prototype,"writePopupTemplate",null),d([f({readOnly:!0})],ot.prototype,"defaultPopupTemplate",null),d([f({types:eA,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:bet,name:"layerDefinition.drawingInfo.renderer",write:{layerContainerTypes:Lr,overridePolicy:(t,e,i)=>({ignoreOrigin:i==null?void 0:i.writeLayerSchema,layerContainerTypes:Lr})}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:(t,e,i)=>({ignoreOrigin:i==null?void 0:i.writeLayerSchema,layerContainerTypes:Lr})}}})],ot.prototype,"renderer",null),d([je("service","renderer",["drawingInfo.renderer","defaultSymbol"]),je("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],ot.prototype,"readRenderer",null),d([f()],ot.prototype,"resourceInfo",void 0),d([f((()=>{const t=he(fJe);return t.json.origins["portal-item"]={read:!1,write:!1},t})())],ot.prototype,"screenSizePerspectiveEnabled",void 0),d([f({clonable:!1})],ot.prototype,"source",null),d([_i("source")],ot.prototype,"castSource",null),d([je("portal-item","source",["featureSet"]),je("web-map","source",["featureSet"])],ot.prototype,"readSource",null),d([f({json:{read:{source:"layerDefinition.extent.spatialReference"}}})],ot.prototype,"spatialReference",void 0),d([f({type:Number})],ot.prototype,"subtypeCode",void 0),d([f({type:[zh]})],ot.prototype,"templates",void 0),d([je("templates",["editFieldsInfo","creatorField","editorField","templates"])],ot.prototype,"readTemplates",null),d([f({type:ia})],ot.prototype,"timeInfo",void 0),d([f()],ot.prototype,"title",void 0),d([je("service","title",["name"]),je("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],ot.prototype,"readTitle",null),d([je("web-map","title",["layerDefinition.name","title"])],ot.prototype,"readTitleFromWebMap",null),d([f({type:String})],ot.prototype,"sublayerTitleMode",void 0),d([f({json:{read:!1}})],ot.prototype,"type",void 0),d([f({type:String})],ot.prototype,"typeIdField",void 0),d([je("service","typeIdField"),je("typeIdField",["layerDefinition.typeIdField"])],ot.prototype,"readTypeIdField",null),d([f({type:[Lh]})],ot.prototype,"types",void 0),d([je("service","types",["types"]),je("types",["layerDefinition.types"])],ot.prototype,"readTypes",null),d([f({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility",layerContainerTypes:Lr}}}}})],ot.prototype,"visible",void 0),d([je("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],ot.prototype,"readVisible",null),ot=d([V("esri.layers.FeatureLayer")],ot);const JEt=Object.freeze(Object.defineProperty({__proto__:null,get default(){return ot}},Symbol.toStringTag,{value:"Module"}));let im=class extends $e{constructor(e){super(e),this.moment=null,this.fullUpdate=!1,this.validateErrorsCreated=!1,this.exceededTransferLimit=null,this.serviceEdits=null,this.discoveredSubnetworks=null}};d([f({type:Date,json:{type:Number,write:{writer:(t,e)=>{e.moment=t?t.getTime():null}}}})],im.prototype,"moment",void 0),d([f({type:Boolean,json:{write:!0}})],im.prototype,"fullUpdate",void 0),d([f({type:Boolean,json:{write:!0}})],im.prototype,"validateErrorsCreated",void 0),d([f({type:Boolean,json:{write:!0}})],im.prototype,"exceededTransferLimit",void 0),d([f({type:[Object],json:{write:!0}})],im.prototype,"serviceEdits",void 0),d([f({type:[Object],json:{write:!0}})],im.prototype,"discoveredSubnetworks",void 0),im=d([V("esri.rest.networks.support.ValidateNetworkTopologyResult")],im);const $tt=im,Stt=Es()({Pending:"job-waiting",InProgress:"job-executing",Completed:"job-succeeded"});let Ty=class extends $tt{constructor(e){super(e),this.statusUrl=null,this.status=null,this.submissionTime=null,this.lastUpdatedTime=null,this._timer=void 0}destroy(){clearInterval(this._timer)}async checkJobStatus(e){const i={...e,query:{f:"json"}},{data:r}=await mi(this.statusUrl,i);return this.read(r),this.editsResolver&&this.editsResolver.resolve({edits:null,addedFeatures:[],updatedFeatures:[],deletedFeatures:[],addedAttachments:[],updatedAttachments:[],deletedAttachments:[],exceededTransferLimit:!0,historicMoment:null}),this}async waitForJobCompletion(e={}){const{interval:i=1e3,statusCallback:r}=e;return new Promise((n,s)=>{this._clearTimer();const a=setInterval(()=>{this._timer||s(Hi()),this.checkJobStatus().then(o=>{const{status:l}=o;switch(this.status=l,l){case"job-succeeded":this._clearTimer(),n(this);break;case"job-waiting":case"job-executing":r&&r(this)}},o=>{this._clearTimer(),s(o)})},i);this._timer=a})}_clearTimer(){clearInterval(this._timer),this._timer=void 0}};d([f()],Ty.prototype,"editsResolver",void 0),d([f({type:String,json:{write:!0}})],Ty.prototype,"statusUrl",void 0),d([pt(Stt)],Ty.prototype,"status",void 0),d([f({type:Date,json:{type:Number,write:{writer:(t,e)=>{e.submissionTime=t?t.getTime():null}}}})],Ty.prototype,"submissionTime",void 0),d([f({type:Date,json:{type:Number,write:{writer:(t,e)=>{e.lastUpdatedTime=t?t.getTime():null}}}})],Ty.prototype,"lastUpdatedTime",void 0),Ty=d([V("esri.networks.support.TopologyValidationJobInfo")],Ty);const Ttt=Ty;function Itt(t,e,i="from"){const{fromRuleElement:r,viaRuleElement:n,toRuleElement:s}=Hxe(t),a=[];switch(t.ruleType){case 2:case 3:i==="from"&&wd(e,r,!1)?a.push(s):i==="to"&&wd(e,s,!1)&&a.push(r);break;case 4:case 1:wd(e,r,!0)?a.push(s):wd(e,s,!0)&&a.push(r);break;case 5:n&&(wd(e,n,!0)?(a.push(r),a.push(s)):(wd(e,r,!0)||wd(e,s,!0))&&a.push(n));break;default:return[]}return a}function DC(t,e,i){const{fromRuleElement:r,viaRuleElement:n,toRuleElement:s}=Hxe(t);switch(t.ruleType){case 2:case 3:return NO(e,i,r,s,!1,!1);case 4:case 1:return NO(e,i,r,s,!0,!0);case 5:return NO(e,i,r,n,!0,!0)||NO(e,i,s,n,!0,!0);default:return!1}}function NO(t,e,i,r,n,s){if(!i||!r)return!1;const a=wd(t,i,s),o=wd(e,r,s);if(n){const l=wd(t,r,s),c=wd(e,i,s);return a&&o||l&&c}return a&&o}function Mtt(t,e){var n;const i=(n=t.terminal)==null?void 0:n.terminalId,r=e.terminalId;return i==null&&r==null||(i===1?r==null||r===1:i===r)}function wd(t,e,i){var s,a,o,l;const{assetGroupCode:r,assetTypeCode:n}=t;return("layerId"in t?t.layerId===((s=e.networkSource)==null?void 0:s.layerId):t.networkSourceId===((a=e.networkSource)==null?void 0:a.sourceId))&&(r==null||r===((o=e.assetGroup)==null?void 0:o.assetGroupCode))&&(n==null||n===((l=e.assetType)==null?void 0:l.assetTypeCode))&&(!i||!("terminalId"in t)||Mtt(e,t))}function Hxe(t){return{fromRuleElement:{networkSource:t.fromNetworkSource,assetGroup:t.fromAssetGroup,assetType:t.fromAssetType,terminal:t.fromTerminal},viaRuleElement:t.viaNetworkSource?{networkSource:t.viaNetworkSource,assetGroup:t.viaAssetGroup,assetType:t.viaAssetType,terminal:t.viaTerminal}:void 0,toRuleElement:{networkSource:t.toNetworkSource,assetGroup:t.toAssetGroup,assetType:t.toAssetType,terminal:t.toTerminal}}}function z1(t){var n;let e=null,i=null,r=null;if(gbe(t))e=VH(t),[i,r]=Ctt(t);else if(Hh(t)){e=((n=t.parent)==null?void 0:n.layerId)??null;const[s]=nz(t);s===t.subtypeField&&(i=t.subtypeCode)}else e=t.layerId??null;return{layerId:e,assetGroupCode:i,assetTypeCode:r}}function VH(t){var r;const{sourceLayer:e}=t;let i;return iY(e)?i=e.layerId:Hh(e)&&(i=(r=e.parent)==null?void 0:r.layerId),i??null}function Ctt(t){const[e,i]=nz(t.sourceLayer);return[e?t.attributes[e]:null,i?t.attributes[i]:null]}function nz(t){return!t||!("fieldsIndex"in t)?[null,null]:[t.fieldsIndex.normalizeFieldName("assetGroup")??null,t.fieldsIndex.normalizeFieldName("assetType")??null]}async function qoe(t,e){if(t==="Utility Network Layer"){const{default:i}=await de(()=>Promise.resolve().then(()=>Utt),void 0);return new i({layerUrl:e})}return null}async function Ett(t){var a;let e="portalItem"in t?t:{portalItem:t};!e.portalItem||e.portalItem instanceof Ot||(e={...e,portalItem:new Ot(e.portalItem)});const i=e.portalItem;if(await i.load(),i.type!=="Feature Service")throw new ae("portal:unknown-item-type","Unknown item type '${type}'",{type:i.type});const r=i.url,n=await mi(r,{responseType:"json",query:{f:"json"}}),s="Network Layer";if((a=n.data.type)!=null&&a.includes(s))return qoe(n.data.type,r);if(n.data.layers){const o=n.data.layers.find(l=>l.type.includes(s));if(o){const l=`${r}/${o.id}`;return qoe(o.type,l)}}return null}let gn=class extends p5(w_){static fromPortalItem(e){return Ett(e)}constructor(e){super(e),this.id=null,this.title=null,this.layerUrl=null,this.dataElement=null,this.fullExtent=null,this.spatialReference=null,this.type=null,this.sourceJSON=null,this._historicMoment=null,this._gdbVersion=null,this._sourceIdByLayerId=new Map,this._layerIdBySourceId=new Map,this._applyEditsHandler=i=>{const{serviceUrl:r,gdbVersion:n,result:s}=i,a=r===this.featureServiceUrl,o=O2(r,n,this.gdbVersion);a&&o&&s.then(l=>{HL(r,n)&&(this.historicMoment=l.historicMoment)})},this._updateMomentHandler=i=>{const{serviceUrl:r,gdbVersion:n,moment:s}=i,a=r===this.featureServiceUrl,o=O2(r,n,this.gdbVersion);a&&o&&(this.historicMoment=s)},this.when().then(()=>{this.addHandles([g1e(this._applyEditsHandler),y1e(this._updateMomentHandler)])},()=>{})}initialize(){this.when().catch(e=>{In(e)||Ie.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:e})})}get loaded(){return super.loaded}get datasetName(){var e;return((e=this.dataElement)==null?void 0:e.name)??null}get owner(){var e;return((e=this.dataElement)==null?void 0:e.userIdentity)??null}get schemaGeneration(){var e;return((e=this.dataElement)==null?void 0:e.schemaGeneration)??null}get parsedUrl(){return Cn(this.layerUrl)}get featureServiceUrl(){return Np(this.parsedUrl.path).url.path}get networkServiceUrl(){return this.featureServiceUrl.replace(/\/FeatureServer/i,"/UtilityNetworkServer")}get layerId(){return Np(this.parsedUrl.path).sublayer}get networkSystemLayers(){return null}get gdbVersion(){return this._gdbVersion}set gdbVersion(e){this._gdbVersion=e}get historicMoment(){return this._historicMoment}set historicMoment(e){this._historicMoment=e}async load(e){return this.addResolvingPromise(this._load(e)),this}async _load(e){await Promise.all([this._fetchDataElement(this.featureServiceUrl,this.layerId.toString(),e),this._fetchLayerMetaData(this.layerUrl,e)])}getLayerIdBySourceId(e){if(!this.dataElement)return null;const i=this._layerIdBySourceId.get(e);if(i!=null)return i;const r=this.dataElement.domainNetworks,n=this._traverseNetworkSources(r,this._layerIdBySourceId,"sourceId","layerId",e);return n>=0?n:null}getSourceIdByLayerId(e){if(!this.dataElement)return null;const i=this._sourceIdByLayerId.get(e);if(i!=null)return i;const r=this.dataElement.domainNetworks,n=this._traverseNetworkSources(r,this._sourceIdByLayerId,"layerId","sourceId",e);return n>=0?n:null}getObjectIdsFromElements(e){const i=[],r=new Map;for(const s of e){const a=this.getLayerIdBySourceId(s.networkSourceId);if(a==null)continue;let o=r.get(a);o===void 0&&(o=[]),o.push(s.objectId),r.set(a,o)}const n=this.featureServiceUrl;return r.forEach((s,a)=>i.push({layerUrl:`${n}/${a}`,objectIds:s})),i}async queryNamedTraceConfigurations(e,i){var o;const[{queryNamedTraceConfigurations:r},{default:n}]=await Promise.all([de(()=>import("./queryNamedTraceConfigurations-DUaLRQFD.js"),[]),de(()=>import("./QueryNamedTraceConfigurationsParameters-14MNv-Gz.js"),[])]),s=this.networkServiceUrl,a=n.from(e);return(o=await r(s,a,{...i}))==null?void 0:o.namedTraceConfigurations}async validateTopology(e,i){var h,m,g;if(!e.validateArea)throw new ae("network:undefined-validateArea","the network must have validateArea defined in the validate network topology parameters.");const[{validateNetworkTopology:r},{default:n}]=await Promise.all([de(()=>import("./validateNetworkTopology-CZS6rHF2.js"),[]),de(()=>import("./ValidateNetworkTopologyParameters-B7IFLisW.js"),[])]),s=n.from(e);HL(this.featureServiceUrl,this.gdbVersion||null)?(s.sessionID=Z7,await zae(this.featureServiceUrl,this.gdbVersion,!0)):s.sessionID=null,s.gdbVersion=this.gdbVersion;const a=this.networkServiceUrl,o=this.featureServiceUrl,l=Nae(o,null,this.gdbVersion,!0),c=await r(a,s,{...i});if(c!=null&&c.serviceEdits){const v=[];for(const b of c.serviceEdits){const{editedFeatures:x}=b,$=x!=null&&x.spatialReference?new tt(x.spatialReference):null;v.push({layerId:b.layerId,editedFeatures:{adds:((h=x==null?void 0:x.adds)==null?void 0:h.map(M=>DO(M,$)))||[],updates:((m=x==null?void 0:x.updates)==null?void 0:m.map(M=>({original:DO(M[0],$),current:DO(M[1],$)})))||[],deletes:((g=x==null?void 0:x.deletes)==null?void 0:g.map(M=>DO(M,$)))||[],spatialReference:$}})}l.resolve({edits:null,addedFeatures:[],updatedFeatures:[],deletedFeatures:[],addedAttachments:[],updatedAttachments:[],deletedAttachments:[],editedFeatures:v,exceededTransferLimit:!1,historicMoment:c.moment})}return c}async submitTopologyValidationJob(e,i){let r=null;if(!e.validateArea)throw new ae("network:undefined-validateArea","the network must have validateArea defined in the validate network topology parameters.");if(!this.gdbVersion){const h=this.layerUrl.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,"");r=(await mi(h,{responseType:"json",query:{f:"json"}})).data.defaultVersionName}const[{submitValidateNetworkTopologyJob:n},{default:s}]=await Promise.all([de(()=>import("./validateNetworkTopology-CZS6rHF2.js"),[]),de(()=>import("./ValidateNetworkTopologyParameters-B7IFLisW.js"),[])]),a=s.from(e);HL(this.featureServiceUrl,this.gdbVersion||null)?(a.sessionID=Z7,await zae(this.featureServiceUrl,this.gdbVersion,!0)):a.sessionID=null,a.gdbVersion=this.gdbVersion||r;const o=this.networkServiceUrl,l=this.featureServiceUrl?Nae(this.featureServiceUrl,null,this.gdbVersion,!0):void 0,c=await n(o,a,{...i});return new Ttt({statusUrl:c,editsResolver:l})}getSourceTypeById(e){if(!this.dataElement)return null;for(const i of this.dataElement.domainNetworks)for(const r of[i.edgeSources??[],i.junctionSources??[]])for(const n of r)if(n.sourceId===e)return r===i.edgeSources?"edge":"junction";return null}_traverseNetworkSources(e,i,r,n,s){for(const a of e)for(const o of[a.edgeSources??[],a.junctionSources??[]])for(const l of o)if(l[r]===s)return i.set(s,l[n]),l[n];return-1}async _fetchLayerMetaData(e,i){const r=await mi(e,{responseType:"json",query:{f:"json"},...i});this.sourceJSON=r.data,this.read(r.data,{origin:"service"})}async _fetchDataElement(e,i,r){if(this.dataElement)return;const n=await mi(`${e}/queryDataElements`,{responseType:"json",query:{layers:JSON.stringify([i]),f:"json"},...r}).then(s=>{var a;return(a=s.data.layerDataElements)==null?void 0:a[0]});n&&this.read(n,{origin:"service"})}};function DO(t,e){return new sr({attributes:t.attributes,geometry:jp({...t.geometry,spatialReference:e})})}d([f({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}},service:{read:!0}},read:!1}})],gn.prototype,"id",void 0),d([f({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}},service:{read:{source:"name"}}},read:!1}})],gn.prototype,"title",void 0),d([f({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"url"},write:{target:"url",isRequired:!0}}},read:!1}})],gn.prototype,"layerUrl",void 0),d([f({type:Object,json:{origins:{service:{read:!0}},read:!1}})],gn.prototype,"dataElement",void 0),d([f({type:Yt,json:{origins:{service:{read:{source:"extent"}}},read:!1}})],gn.prototype,"fullExtent",void 0),d([f({type:tt,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:!1}})],gn.prototype,"spatialReference",void 0),d([f({type:["utility","trace"],readOnly:!0,json:{read:!1,write:!1}})],gn.prototype,"type",void 0),d([f({readOnly:!0})],gn.prototype,"datasetName",null),d([f({readOnly:!0})],gn.prototype,"owner",null),d([f({readOnly:!0})],gn.prototype,"schemaGeneration",null),d([f({readOnly:!0})],gn.prototype,"parsedUrl",null),d([f({readOnly:!0})],gn.prototype,"featureServiceUrl",null),d([f({readOnly:!0})],gn.prototype,"networkServiceUrl",null),d([f({readOnly:!0})],gn.prototype,"layerId",null),d([f()],gn.prototype,"sourceJSON",void 0),d([f({readOnly:!0})],gn.prototype,"networkSystemLayers",null),d([f({type:String})],gn.prototype,"gdbVersion",null),d([f({type:Date})],gn.prototype,"historicMoment",null),d([f()],gn.prototype,"_historicMoment",void 0),d([f()],gn.prototype,"_gdbVersion",void 0),gn=d([V("esri.networks.Network")],gn);const ktt=gn;let Iy=class extends ig(w_){constructor(e){super(e),this.rulesCategorized={attachment:[],containment:[],connectivity:[]},this.request=mi}initialize(){}async load(e){const i=this.rulesLayer.load(e).then(()=>this._initializeRulesTable());return this.addResolvingPromise(i),this}getFeaturesCanAssociateWithClause(e,i,r){const n=new Map,[s,a]=nz(e.sourceLayer);if(!s||!a)return"";const o=z1(e),l=z1(i);r.forEach(h=>{const{type:m,direction:g}=h;this._getRulesForAssociationType(m).forEach(v=>{Itt(v,o,g).filter(b=>{var x;return((x=b.networkSource)==null?void 0:x.layerId)===l.layerId}).forEach(b=>{var M,k;const x=(M=b.assetGroup)==null?void 0:M.assetGroupCode,$=(k=b.assetType)==null?void 0:k.assetTypeCode;if(x!=null&&$!=null){const A=n.get(x)??new Set;A.add($),n.set(x,A)}})})});let c=[];return this._mergeAssetCodes(n).forEach((h,m)=>{const g=`${s} IN (${m})`,v=lY(a,[...h]);g&&v&&c.push(ow(g,v))}),c.length>1&&(c=c.map(h=>`(${h})`)),c.join(" OR ")}getFeaturesCanAssociateWith(e,i,r){return VH(e)==null?[]:i.filter(n=>this.canAssociateFeatures(e,n,r))}canAssociateFeatures(e,i,r){if(!this._canSupportAssociations([e,i]))return!1;const n=z1(e),s=z1(i);return r.some(a=>{const{type:o,direction:l}=a;return this._getRulesForAssociationType(o).some(c=>l==="to"?DC(c,s,n):DC(c,n,s))})}getLayersCanAssociateWith(e,i,r){return VH(e)==null?[]:i.filter(n=>this.canAssociateFeatureToLayer(e,n,r))}canAssociateFeatureToLayer(e,i,r){if(!this._canSupportAssociations([e,i]))return!1;const n=z1(e),s=z1(i);return r.some(a=>{const{type:o,direction:l}=a;return this._getRulesForAssociationType(o).some(c=>l==="to"?DC(c,s,n):DC(c,n,s))})}getFeatureSQL(e,i){var c,h;const r=e.layerId.toString(),n=(c=e.fieldsIndex)==null?void 0:c.normalizeFieldName("assetGroup"),s=(h=e.fieldsIndex)==null?void 0:h.normalizeFieldName("assetType"),a=n?i.attributes[n]:null,o=s?i.attributes[s]:null,l=this.rulesHash[r];if(l){const m=l.assetGroupHash[a];if(m)return m.assetTypeHash[o]||null}return null}_initializeRulesTable(){var r,n,s,a,o,l,c,h,m,g,v;const e={},i=[{networkSourceId:"fromNetworkSource",assetGroupId:"fromAssetGroup",assetTypeId:"fromAssetType"},{networkSourceId:"toNetworkSource",assetGroupId:"toAssetGroup",assetTypeId:"toAssetType"},{networkSourceId:"viaNetworkSource",assetGroupId:"viaAssetGroup",assetTypeId:"viaAssetType"}];this.rulesCategorized={attachment:[],containment:[],connectivity:[]};for(const b of this.rules){if(b.ruleType===3){this.rulesCategorized.attachment.push(b);continue}if(b.ruleType===2){this.rulesCategorized.containment.push(b);continue}if(b.ruleType===1){this.rulesCategorized.connectivity.push(b);continue}this.rulesCategorized.connectivity.push(b);let x=[[0,1],[1,0]];b.ruleType===5&&(x=[[0,2],[2,0],[1,2],[2,1]]);for(const $ of x){const M=$.shift(),k=$.shift();let A=!1;switch(b.ruleType){case 5:A=M===0||M===1;break;case 4:A=M===1}const L=i[M],z=((r=b[L.networkSourceId])==null?void 0:r.layerId.toString())??"",U=(s=(n=b[L.assetGroupId])==null?void 0:n.assetGroupCode)==null?void 0:s.toString(),B=b[L.assetTypeId],X=(a=B==null?void 0:B.assetTypeCode)==null?void 0:a.toString(),J=i[k],Q=((o=b[J.networkSourceId])==null?void 0:o.layerId.toString())??"",le=(c=(l=b[J.assetGroupId])==null?void 0:l.assetGroupCode)==null?void 0:c.toString(),ie=b[J.assetTypeId],re=(h=ie==null?void 0:ie.assetTypeCode)==null?void 0:h.toString(),se=e[z]??{assetGroupHash:{}};if(!(U&&X&&le&&re))continue;const Te=se.assetGroupHash[U]??{assetTypeHash:{}},ne=Te.assetTypeHash[X]??{};if(ne[Q]=ne[Q]??{},A){ne[z]=ne[z]??{};const Oe=ow(`assetgroup = ${U}`,`assettype = ${X}`);(ie==null?void 0:ie.connectivityPolicy)==="esriNECPEndVertex"?ne[z].endVertex=(m=ne[z])!=null&&m.endVertex?`${ne[z].endVertex}`:`(${Oe})`:ne[z].anyVertex=ne[z].anyVertex?`${ne[z].anyVertex}`:`(${Oe})`}const _e=ow(`assetgroup = ${le}`,`assettype = ${re}`);(ie==null?void 0:ie.connectivityPolicy)==="esriNECPEndVertex"?ne[Q].endVertex=(g=ne[Q])!=null&&g.endVertex?S9(ne[Q].endVertex,_e):`(${_e})`:ne[Q].anyVertex=(v=ne[Q])!=null&&v.anyVertex?S9(ne[Q].anyVertex,_e):`(${_e})`,Te.assetTypeHash[X]=ne,se.assetGroupHash[U]=Te,e[z]=se}}this._set("rulesHash",e)}_getRulesForAssociationType(e){const{rulesCategorized:i}=this;switch(e){case"attachment":return i.attachment;case"containment":return i.containment;case"connectivity":case"junction-junction-connectivity":return i.connectivity.filter(r=>r.ruleType===1);case"junction-edge-from-connectivity":case"junction-edge-midspan-connectivity":case"junction-edge-to-connectivity":return i.connectivity.filter(r=>r.ruleType===4||r.ruleType===5);default:return[]}}_areSetsEqual(e,i){if(e.size!==i.size)return!1;for(const r of e)if(!i.has(r))return!1;return!0}_mergeAssetCodes(e){const i=new Map,r=new Set;for(const[n,s]of e){const a=new Set([n]);for(const[l,c]of e)n!==l&&!r.has(l)&&this._areSetsEqual(s,c)&&(a.add(l),r.add(l));const o=Array.from(a).sort().join(",");i.set(o,s)}return i}_canSupportAssociations(e){return e.every(i=>{const r=gbe(i)?i.sourceLayer:i,[n,s]=nz(r);return n!=null&&s!=null})}};d([f({constructOnly:!0})],Iy.prototype,"rulesLayer",void 0),d([f({constructOnly:!0})],Iy.prototype,"rules",void 0),d([f({readOnly:!0})],Iy.prototype,"rulesHash",void 0),d([f()],Iy.prototype,"rulesCategorized",void 0),d([f({constructOnly:!0})],Iy.prototype,"request",void 0),Iy=d([V("esri.networks.RulesTable")],Iy);let Qc=class extends $e{constructor(e){super(e),this.conditionBarriers=[],this.outputConditions=[],this.functions=[],this.functionBarriers=[],this.traversabilityScope=null,this.shortestPathNetworkAttributeName=null,this.includeBarriers=null,this.validateConsistency=null,this.ignoreBarriersAtStartingPoints=null}};d([f({type:[Object],json:{write:!0}})],Qc.prototype,"conditionBarriers",void 0),d([f({type:[Object],json:{write:!0}})],Qc.prototype,"outputConditions",void 0),d([f({type:[Object],json:{write:!0}})],Qc.prototype,"functions",void 0),d([f({type:[Object],json:{write:!0}})],Qc.prototype,"functionBarriers",void 0),d([f({type:["junctions","edges","junctionsAndEdges"],json:{write:!0}})],Qc.prototype,"traversabilityScope",void 0),d([f({type:String,json:{write:!0}})],Qc.prototype,"shortestPathNetworkAttributeName",void 0),d([f({type:Boolean,json:{write:!0}})],Qc.prototype,"includeBarriers",void 0),d([f({type:Boolean,json:{write:!0}})],Qc.prototype,"validateConsistency",void 0),d([f({type:Boolean,json:{write:!0}})],Qc.prototype,"ignoreBarriersAtStartingPoints",void 0),Qc=d([V("esri.networks.support.TraceConfiguration")],Qc);const pJ=Qc,cU=new jt({Clean:"clean",Dirty:"dirty"}),ov=new jt({Physical:"physical",Virtual:"virtual"}),uU=new jt({"Start and end":"start-and-end",Start:"start",Midspan:"midspan",End:"end"}),jO=new jt({startingPoint:"starting-point",barrier:"barrier",stoppingPoint:"stopping-point"}),VO=new jt({connected:"connected",upstream:"upstream",downstream:"downstream",shortestPath:"shortest-path",subnetwork:"subnetwork",subnetworkController:"subnetwork-controller",loops:"loops",isolation:"isolation",path:"path",circuit:"circuit"}),Att="{00000000-0000-0000-0000-000000000000}",jC=new jt({junctionJunctionConnectivity:"junction-junction-connectivity",connectivity:"connectivity",attachment:"attachment",containment:"containment",junctionEdgeFromConnectivity:"junction-edge-from-connectivity",junctionEdgeMidspanConnectivity:"junction-edge-midspan-connectivity",junctionEdgeToConnectivity:"junction-edge-to-connectivity"}),Ptt={connectivity:1,"junction-junction-connectivity":1,containment:2,attachment:3,"junction-edge-from-connectivity":4,"junction-edge-midspan-connectivity":5,"junction-edge-to-connectivity":6},ikt=new jt({normal:"normal",rebuild:"rebuild",forceRebuild:"force-rebuild"});let Pr=class extends pJ{constructor(e){super(e),this.filterBarriers=[],this.arcadeExpressionBarrier=null,this.circuitName=null,this.domainNetworkName=null,this.filterBitsetNetworkAttributeName=null,this.filterFunctionBarriers=[],this.filterScope=null,this.includeContainers=null,this.includeContent=null,this.includeIsolated=null,this.includeStructures=null,this.allowIndeterminateFlow=null,this.includeUpToFirstSpatialContainer=null,this.inferConnectivity=null,this.maxHops=null,this.nearestNeighbor=null,this.numPaths=null,this.outputFilterCategories=[],this.outputFilters=[],this.propagators=[],this.subnetworkName=null,this.targetTierName=null,this.diagramTemplateName=null,this.tierName=null,this.validateLocatability=null}};d([f({type:[Object],json:{write:!0}})],Pr.prototype,"filterBarriers",void 0),d([f({type:String,json:{write:!0}})],Pr.prototype,"arcadeExpressionBarrier",void 0),d([f({type:String,json:{write:!0}})],Pr.prototype,"circuitName",void 0),d([f({type:String,json:{write:!0}})],Pr.prototype,"domainNetworkName",void 0),d([f({type:String,json:{write:!0}})],Pr.prototype,"filterBitsetNetworkAttributeName",void 0),d([f({type:[Object],json:{write:!0}})],Pr.prototype,"filterFunctionBarriers",void 0),d([f({type:["junctions","edges","junctionsAndEdges"],json:{write:!0}})],Pr.prototype,"filterScope",void 0),d([f({type:Boolean,json:{write:!0}})],Pr.prototype,"includeContainers",void 0),d([f({type:Boolean,json:{write:!0}})],Pr.prototype,"includeContent",void 0),d([f({type:Boolean,json:{write:!0}})],Pr.prototype,"includeIsolated",void 0),d([f({type:Boolean,json:{write:!0}})],Pr.prototype,"includeStructures",void 0),d([f({type:Boolean,json:{write:!0}})],Pr.prototype,"allowIndeterminateFlow",void 0),d([f({type:Boolean,json:{write:!0}})],Pr.prototype,"includeUpToFirstSpatialContainer",void 0),d([f({type:Boolean,json:{write:!0}})],Pr.prototype,"inferConnectivity",void 0),d([f({type:Number,json:{write:!0}})],Pr.prototype,"maxHops",void 0),d([f({type:Object,json:{write:!0}})],Pr.prototype,"nearestNeighbor",void 0),d([f({type:Number,json:{write:!0}})],Pr.prototype,"numPaths",void 0),d([f({type:[Object],json:{write:!0}})],Pr.prototype,"outputFilterCategories",void 0),d([f({type:[Object],json:{write:!0}})],Pr.prototype,"outputFilters",void 0),d([f({type:[Object],json:{write:!0}})],Pr.prototype,"propagators",void 0),d([f({type:String,json:{write:!0}})],Pr.prototype,"subnetworkName",void 0),d([f({type:String,json:{write:!0}})],Pr.prototype,"targetTierName",void 0),d([f({type:String,json:{write:!0}})],Pr.prototype,"diagramTemplateName",void 0),d([f({type:String,json:{write:!0}})],Pr.prototype,"tierName",void 0),d([f({type:Boolean,json:{write:!0}})],Pr.prototype,"validateLocatability",void 0),Pr=d([V("esri.networks.support.UNTraceConfiguration")],Pr);const Ott=Pr;let yl=class extends YWe{constructor(e){super(e),this.globalId=null,this.title=null,this.traceConfiguration=null,this.creationDate=null,this.creator=null,this.description=null,this.minStartingPoints=null,this.resultTypes=[],this.tags=[],this.traceType=null}readTraceConfiguration(e,i){return e.tierName!==void 0?Ott.fromJSON(e):pJ.fromJSON(e)}};d([f({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"id"},write:{target:"id",isRequired:!0}},service:{read:{source:"globalId"},write:{target:"globalId",isRequired:!0}}},read:!1}})],yl.prototype,"globalId",void 0),d([f({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"title"},write:{target:"title",isRequired:!0}},service:{read:{source:"name"},write:{target:"name",isRequired:!0}}},read:!1}})],yl.prototype,"title",void 0),d([f({type:pJ,json:{origins:{service:{read:!0,write:!0}},read:!1}})],yl.prototype,"traceConfiguration",void 0),d([je("service","traceConfiguration")],yl.prototype,"readTraceConfiguration",null),d([f({type:Date,json:{origins:{service:{read:!0,write:!0}},read:!1}})],yl.prototype,"creationDate",void 0),d([f({type:String,json:{origins:{service:{read:!0,write:!0}},read:!1}})],yl.prototype,"creator",void 0),d([f({type:String,json:{origins:{service:{read:!0,write:!0}},read:!1}})],yl.prototype,"description",void 0),d([f({type:["none","one","many"],json:{origins:{service:{read:{source:"minNumStartingPoints"},write:{target:"minNumStartingPoints"}}},read:!1}})],yl.prototype,"minStartingPoints",void 0),d([f({json:{origins:{service:{read:!0,write:!0}},read:!1}})],yl.prototype,"resultTypes",void 0),d([f({type:[String],json:{origins:{service:{read:!0,write:!0}},read:!1}})],yl.prototype,"tags",void 0),d([f({type:VO.apiValues,json:{type:VO.jsonValues,origins:{service:{read:VO.read,write:VO.write}},read:!1}})],yl.prototype,"traceType",void 0),yl=d([V("esri.networks.support.NamedTraceConfiguration")],yl);const Ltt=yl;function Ftt(t){var M,k,A,L,z,U,B,X,J,Q,le,ie,re,se,Te;const e=t==null?void 0:t.fieldsIndex,i="fromnetworksourceid",r="fromglobalid",n="fromterminalid",s="fromfirstunit",a="fromnumunits",o="tonetworksourceid",l="toglobalid",c="toterminalid",h="tofirstunit",m="tonumunits",g="status",v="associationtype",b="iscontentvisible",x="percentalong",$="globalid";return{fromNetworkSourceId:((M=e==null?void 0:e.get(i))==null?void 0:M.name)??i,fromGlobalId:((k=e==null?void 0:e.get(r))==null?void 0:k.name)??r,fromTerminalId:((A=e==null?void 0:e.get(n))==null?void 0:A.name)??n,fromFirstUnit:((L=e==null?void 0:e.get(s))==null?void 0:L.name)??s,fromNumUnits:((z=e==null?void 0:e.get(a))==null?void 0:z.name)??a,toNetworkSourceId:((U=e==null?void 0:e.get(o))==null?void 0:U.name)??o,toGlobalId:((B=e==null?void 0:e.get(l))==null?void 0:B.name)??l,toTerminalId:((X=e==null?void 0:e.get(c))==null?void 0:X.name)??c,toFirstUnit:((J=e==null?void 0:e.get(h))==null?void 0:J.name)??h,toNumUnits:((Q=e==null?void 0:e.get(m))==null?void 0:Q.name)??m,status:((le=e==null?void 0:e.get(g))==null?void 0:le.name)??g,associationType:((ie=e==null?void 0:e.get(v))==null?void 0:ie.name)??v,isContentVisible:((re=e==null?void 0:e.get(b))==null?void 0:re.name)??b,percentAlong:((se=e==null?void 0:e.get(x))==null?void 0:se.name)??x,globalId:((Te=e==null?void 0:e.get((t==null?void 0:t.globalIdField)??$))==null?void 0:Te.name)??$}}function skt(t,e){if(e.type!=="feature"&&e.type!=="subtype-group")return[];if(!e.url)return[];const i="utilityNetworks"in t.map?t.map.utilityNetworks??[]:[];for(const r of i)if(r.isUtilityLayer(e)){const n=e.fieldsIndex.get("assetgroup"),s=e.fieldsIndex.get("assettype");return[n==null?void 0:n.name,s==null?void 0:s.name].filter(a=>a!=null)}return[]}let ac=class extends et{constructor(e){super(e),this.rulesTableId=null,this.rulesTableUrl=null,this.subnetworksTable=null,this.subnetworksTableId=null,this.subnetworksTableUrl=null,this.dirtyAreasLayerId=null,this.dirtyAreasLayerUrl=null,this.associationsTable=null,this.associationsTableId=null,this.associationsTableUrl=null}destroy(){var e;(e=this.associationsTable)==null||e.destroy()}async loadAssociationsTable(e){if(!this.associationsTable){const{associationsTableUrl:i}=this;if(!i)throw new ae("utility-network-system-layers:missing-associations-table-url","Unable to load the associations table, as the `associationsTableUrl` is not set.");this.associationsTable=new ot({url:i})}return await this.associationsTable.load(e),this.associationsTable}async loadSubnetworksTable(e){if(!this.subnetworksTable){const{subnetworksTableUrl:i}=this;if(!i)throw new ae("utility-network-system-layers:missing-subnetworks-table-url","Unable to load the subnetworks table, as the `subnetworksTableUrl` is not set.");this.subnetworksTable=new ot({url:i})}return await this.subnetworksTable.load(e),this.subnetworksTable}};d([f({constructOnly:!0})],ac.prototype,"rulesTableId",void 0),d([f({constructOnly:!0})],ac.prototype,"rulesTableUrl",void 0),d([f()],ac.prototype,"subnetworksTable",void 0),d([f({constructOnly:!0})],ac.prototype,"subnetworksTableId",void 0),d([f({constructOnly:!0})],ac.prototype,"subnetworksTableUrl",void 0),d([f({constructOnly:!0})],ac.prototype,"dirtyAreasLayerId",void 0),d([f({constructOnly:!0})],ac.prototype,"dirtyAreasLayerUrl",void 0),d([f()],ac.prototype,"associationsTable",void 0),d([f({constructOnly:!0})],ac.prototype,"associationsTableId",void 0),d([f({constructOnly:!0})],ac.prototype,"associationsTableUrl",void 0),ac=d([V("esri.networks.support.NetworkSystemLayers")],ac);let e$=class extends $e{constructor(e){super(e),this.id=null,this.name=null}};d([f({type:Number,json:{read:{source:"terminalId"},write:{target:"terminalId"}}})],e$.prototype,"id",void 0),d([f({type:String,json:{read:{source:"terminalName"},write:{target:"terminalName"}}})],e$.prototype,"name",void 0),d([f({type:Boolean,json:{write:!0}})],e$.prototype,"isUpstreamTerminal",void 0),e$=d([V("esri.networks.support.Terminal")],e$);const Rtt=e$,UO=new jt({esriUNTMBidirectional:"bidirectional",esriUNTMDirectional:"directional"});let mm=class extends $e{constructor(e){super(e),this.defaultConfiguration=null,this.id=null,this.name=null,this.terminals=[],this.traversabilityModel=null}};d([f({type:String,json:{write:!0}})],mm.prototype,"defaultConfiguration",void 0),d([f({type:Number,json:{read:{source:"terminalConfigurationId"},write:{target:"terminalConfigurationId"}}})],mm.prototype,"id",void 0),d([f({type:String,json:{read:{source:"terminalConfigurationName"},write:{target:"terminalConfigurationName"}}})],mm.prototype,"name",void 0),d([f({type:[Rtt],json:{write:!0}})],mm.prototype,"terminals",void 0),d([f({type:UO.apiValues,json:{type:UO.jsonValues,read:UO.read,write:UO.write}})],mm.prototype,"traversabilityModel",void 0),mm=d([V("esri.networks.support.TerminalConfiguration")],mm);let Aa=class extends $e{constructor(e){super(e),this.type="networkElement",this.assetGroupCode=null,this.assetTypeCode=null,this.globalId=null,this.networkSourceId=null,this.objectId=null,this.positionFrom=null,this.positionTo=null,this.terminalId=null}};d([f({json:{write:!1}})],Aa.prototype,"type",void 0),d([f({type:Number,json:{write:!0}})],Aa.prototype,"assetGroupCode",void 0),d([f({type:Number,json:{write:!0}})],Aa.prototype,"assetTypeCode",void 0),d([f({type:String,json:{write:!0}})],Aa.prototype,"globalId",void 0),d([f({type:Number,json:{write:!0}})],Aa.prototype,"networkSourceId",void 0),d([f({type:Number,json:{write:!0}})],Aa.prototype,"objectId",void 0),d([f({type:Number,json:{write:!0}})],Aa.prototype,"positionFrom",void 0),d([f({type:Number,json:{write:!0}})],Aa.prototype,"positionTo",void 0),d([f({type:Number,json:{write:!0}})],Aa.prototype,"terminalId",void 0),Aa=d([V("esri.rest.networks.support.NetworkElement")],Aa);let pu=class extends Aa{constructor(e){super(e),this.type="telecomNetworkElement",this.firstUnit=null,this.numUnits=null}};d([f({json:{write:!1}})],pu.prototype,"type",void 0),d([f({json:{write:!0}})],pu.prototype,"firstUnit",void 0),d([f({json:{write:!0}})],pu.prototype,"numUnits",void 0),pu=d([V("esri.rest.networks.support.TelecomNetworkElement")],pu);let rm=class extends $e{constructor(e){super(e),this.edgeElement=null,this.junctionElement=null}readEdgeElement(e,i){return new pu({networkSourceId:i.edgeNetworkSourceId,globalId:i.edgeGlobalId,objectId:i.edgeObjectId,positionFrom:i.edgePositionFrom,positionTo:i.edgePositionTo,firstUnit:i.edgeFirstUnit,numUnits:i.edgeNumUnits})}writeEdgeElement(e,i){i.edgeNetworkSourceId=e.networkSourceId,i.edgeGlobalId=e.globalId,i.edgeObjectId=e.objectId,i.edgePositionFrom=e.positionFrom,i.edgePositionTo=e.positionTo,i.edgeFirstUnit=e.firstUnit,i.edgeNumUnits=e.numUnits}readJunctionElement(e,i){return new pu({networkSourceId:i.junctionNetworkSourceId,globalId:i.junctionGlobalId,objectId:i.junctionObjectId,terminalId:i.junctionTerminalId,firstUnit:i.junctionFirstUnit,numUnits:i.junctionNumUnits})}writeJunctionElement(e,i){i.junctionNetworkSourceId=e.networkSourceId,i.junctionGlobalId=e.globalId,i.junctionObjectId=e.objectId,i.junctionTerminalId=e.terminalId,i.junctionFirstUnit=e.firstUnit,i.junctionNumUnits=e.numUnits}};d([f({type:pu,json:{read:{source:["edgeNetworkSourceId","edgeGlobalId","edgeObjectId","edgePositionFrom","edgePositionTo","edgeFirstUnit","edgeNumUnits"]},write:!0}})],rm.prototype,"edgeElement",void 0),d([je("edgeElement")],rm.prototype,"readEdgeElement",null),d([Ge("edgeElement")],rm.prototype,"writeEdgeElement",null),d([f({type:pu,json:{read:{source:["junctionNetworkSourceId","junctionGlobalId","junctionObjectId","junctionTerminalId","junctionFirstUnit","junctionNumUnits"]},write:!0}})],rm.prototype,"junctionElement",void 0),d([je("junctionElement")],rm.prototype,"readJunctionElement",null),d([Ge("junctionElement")],rm.prototype,"writeJunctionElement",null),rm=d([V("esri.networks.support.CircuitPathConnectivityElement")],rm);const ztt=rm;let cd=class extends $e{constructor(e){super(e),this.globalId=null,this.isFilterBarrier=!1,this.percentAlong=null,this.terminalId=null,this.type=null,this.firstUnit=null,this.numUnits=null,this.networkSourceId=null}};d([f({type:String,json:{write:!0}})],cd.prototype,"globalId",void 0),d([f({type:Boolean,json:{write:!0}})],cd.prototype,"isFilterBarrier",void 0),d([f({type:Number,json:{write:!0}})],cd.prototype,"percentAlong",void 0),d([f({type:Number,json:{write:!0}})],cd.prototype,"terminalId",void 0),d([f({type:jO.apiValues,json:{type:jO.jsonValues,read:{reader:jO.read,source:"traceLocationType"},write:{writer:jO.write,target:"traceLocationType"}}})],cd.prototype,"type",void 0),d([f({type:Number,json:{write:!0}})],cd.prototype,"firstUnit",void 0),d([f({type:Number,json:{write:!0}})],cd.prototype,"numUnits",void 0),d([f({type:Number})],cd.prototype,"networkSourceId",void 0),cd=d([V("esri.rest.networks.support.TraceLocation")],cd);const Hoe=cd;let nm=class extends $e{constructor(e){super(e),this.pathId=null,this.order=null,this.startingPoint=null,this.stoppingPoint=null,this.pathConnectivity=[],this.geometry=null}};d([f({type:Number,json:{write:!0}})],nm.prototype,"pathId",void 0),d([f({type:Number,json:{write:!0}})],nm.prototype,"order",void 0),d([f({type:Hoe,json:{write:!0}})],nm.prototype,"startingPoint",void 0),d([f({type:Hoe,json:{write:!0}})],nm.prototype,"stoppingPoint",void 0),d([f({type:[ztt],json:{write:!0}})],nm.prototype,"pathConnectivity",void 0),d([f({type:_n,json:{write:!0}})],nm.prototype,"geometry",void 0),nm=d([V("esri.networks.support.CircuitPath")],nm);const fJ=nm;let My=class extends $e{constructor(e){super(e),this.sourceId=null,this.globalId=null,this.terminalId=1,this.firstUnit=1,this.numUnits=1}};d([f({type:Number,json:{write:!0}})],My.prototype,"sourceId",void 0),d([f({type:String,json:{write:!0}})],My.prototype,"globalId",void 0),d([f({type:Number,json:{write:!0}})],My.prototype,"terminalId",void 0),d([f({type:Number,json:{write:!0}})],My.prototype,"firstUnit",void 0),d([f({type:Number,json:{write:!0}})],My.prototype,"numUnits",void 0),My=d([V("esri.networks.support.CircuitLocation")],My);const sz=My;let sm=class extends $e{constructor(e){super(e),this.name=null,this.globalId=null,this.providerId=null,this.consumerId=null,this.isReserved=!1,this.attributes=null}getAttribute(e){var i;return(i=this.attributes)==null?void 0:i[e]}setAttribute(e,i){this.attributes?this.attributes[e]=i:this.attributes={[e]:i}}};d([f({type:String,json:{write:!0}})],sm.prototype,"name",void 0),d([f({type:String,json:{write:!0}})],sm.prototype,"globalId",void 0),d([f({type:String})],sm.prototype,"providerId",void 0),d([f({type:String})],sm.prototype,"consumerId",void 0),d([f({type:Boolean,json:{write:!0}})],sm.prototype,"isReserved",void 0),d([f({json:{write:{allowNull:!0,writer:(t,e)=>e.attributes=t??{}}}})],sm.prototype,"attributes",void 0),sm=d([V("esri.networks.support.Subcircuit")],sm);const Gxe=sm;let Eh=class extends $e{constructor(e){super(e),this.sectionId=null,this.role="start-and-end",this.sectionType="physical",this.startLocation=null,this.stopLocation=null,this.subcircuit=null,this.path=null}normalizeCtorArgs(e){if(e===void 0)return e;const{sectionId:i,startLocation:r,stopLocation:n,subcircuit:s}=e;return(r||n)&&s?(delete e.startLocation,delete e.stopLocation,Ie.getLogger(this).warn("Cannot instantiate CircuitSection with both start/stop locations and subcircuit.",`CircuitSection with ID '${i}' was defaulted to having a subcircuit only.`)):(r&&!n||!r&&n)&&!s&&Ie.getLogger(this).warn(`CircuitSection with ID '${i}' must have both start and stop locations.`,"Create/alter operations involving this section will fail unless both are populated."),e}setStartStopLocations(e,i){this.startLocation=e,this.stopLocation=i,this.subcircuit=null}setSubcircuit(e){this.subcircuit=e,this.startLocation=null,this.stopLocation=null}};d([f({type:Number,json:{write:!0}})],Eh.prototype,"sectionId",void 0),d([f({type:uU.apiValues,json:{type:uU.jsonValues,read:uU.read},readOnly:!0})],Eh.prototype,"role",void 0),d([f({type:ov.apiValues,json:{type:ov.jsonValues,read:ov.read,write:ov.write}})],Eh.prototype,"sectionType",void 0),d([f({type:sz,json:{write:!0}})],Eh.prototype,"startLocation",void 0),d([f({type:sz,json:{write:!0}})],Eh.prototype,"stopLocation",void 0),d([f({type:Gxe,json:{write:!0}})],Eh.prototype,"subcircuit",void 0),d([f({type:fJ,readOnly:!0})],Eh.prototype,"path",void 0),Eh=d([V("esri.networks.support.CircuitSection")],Eh);let gs=class extends $e{constructor(e){super(e),this._sectionIdLookup=new Map,this.attributes=null,this.circuitManager=null,this.circuitType="physical",this.globalId=null,this.isDeleted=!1,this.lastExportedTime=null,this.lastVerifiedTime=null,this.name=null,this.sections=null,this.startLocation=null,this.status="dirty",this.stopLocation=null,this.subcircuits=[]}initialize(){this.addHandles([be(()=>this.sections,e=>{this._sectionIdLookup.clear(),e!=null&&Array.from(e.keys()).forEach(i=>this._sectionIdLookup.set(i.sectionId,i))},Ft)])}normalizeCtorArgs(e){if(e===void 0)return e;const{name:i,startLocation:r,stopLocation:n,sections:s}=e;return(r||n)&&s?(delete e.startLocation,delete e.stopLocation,Ie.getLogger(this).warn("Cannot instantiate Circuit with both start/stop locations and sections.",`Circuit '${i}' was defaulted to having sections only.`)):(r&&!n||!r&&n)&&!s&&Ie.getLogger(this).warn(`Non-sectioned circuit '${i}' must have both start and stop locations.`,"Create/alter operations involving this circuit will fail unless both are populated."),e}get isSectioned(){return this.startLocation==null&&this.stopLocation==null&&this.sections!=null}readSections(e,i){const{sectionOrder:r,sections:n}=i,s=new Map;if(n==null)return null;if(this._sectionIdLookup.clear(),n.forEach(a=>this._sectionIdLookup.set(a.sectionId,Eh.fromJSON(a))),r==null)return Array.from(this._sectionIdLookup.values()).forEach(a=>s.set(a,[])),s;for(const[a,o]of Object.entries(r)){const l=Number(a),c=this._sectionIdLookup.get(l);if(c==null)continue;const h=o.map(m=>this._sectionIdLookup.get(m)).filter(ln);s.set(c,h)}return s}writeSections(e,i){const r={},n=[];e==null||e.forEach((s,a)=>{const o=a.sectionId.toString(),l=s.map(c=>c.sectionId);r[o]=l,n.push(a.toJSON())}),i.sectionOrder=r,i.sections=n}getSectionById(e){return this._sectionIdLookup.get(e)??null}setStartStopLocations(e,i){this.startLocation=e,this.stopLocation=i,this.sections=null}setSections(e){this.sections=e,this.startLocation=null,this.stopLocation=null}getAttribute(e){var i;return(i=this.attributes)==null?void 0:i[e]}setAttribute(e,i){this.attributes?this.attributes[e]=i:this.attributes={[e]:i}}};d([f({json:{write:{allowNull:!0,writer:(t,e)=>e.attributes=t??{}}}})],gs.prototype,"attributes",void 0),d([f()],gs.prototype,"circuitManager",void 0),d([f({type:ov.apiValues,json:{type:ov.jsonValues,read:ov.read,write:ov.write}})],gs.prototype,"circuitType",void 0),d([f({type:String,json:{write:!0}})],gs.prototype,"globalId",void 0),d([f({type:Boolean,readOnly:!0})],gs.prototype,"isDeleted",void 0),d([f({type:Boolean,json:{write:!0},readOnly:!0})],gs.prototype,"isSectioned",null),d([f({type:Date,json:{read:{reader:t=>typeof t=="number"?new Date(t):null}},readOnly:!0})],gs.prototype,"lastExportedTime",void 0),d([f({type:Date,json:{read:{reader:t=>typeof t=="number"?new Date(t):null}},readOnly:!0})],gs.prototype,"lastVerifiedTime",void 0),d([f({type:String,json:{write:!0}})],gs.prototype,"name",void 0),d([f({json:{read:{source:["sectionOrder","sections"]},write:!0}})],gs.prototype,"sections",void 0),d([je("sections")],gs.prototype,"readSections",null),d([Ge("sections")],gs.prototype,"writeSections",null),d([f({type:sz,json:{write:!0}})],gs.prototype,"startLocation",void 0),d([f({type:cU.apiValues,json:{type:cU.jsonValues,read:cU.read}})],gs.prototype,"status",void 0),d([f({type:sz,json:{write:!0}})],gs.prototype,"stopLocation",void 0),d([f({type:[Gxe],json:{write:!0}})],gs.prototype,"subcircuits",void 0),gs=d([V("esri.networks.support.Circuit")],gs);let f0=class extends $e{constructor(e){super(e),this.circuit=null,this.geometry=null,this.path=null}readCircuit(e,i){return gs.fromJSON(i)}};d([f({type:gs,json:{write:!0,read:{source:["name","globalId","isSectioned","sectionOrder","startLocation","stopLocation","sections","subcircuits","lastVerifiedTime","lastExportedTime","circuitType","status"]}}})],f0.prototype,"circuit",void 0),d([je("circuit")],f0.prototype,"readCircuit",null),d([f({type:_n,json:{write:!0}})],f0.prototype,"geometry",void 0),d([f({type:fJ,json:{write:!0}})],f0.prototype,"path",void 0),f0=d([V("esri.rest.networks.circuits.support.CircuitTraceResult")],f0);const Ntt=f0;let t$=class extends $e{constructor(e){super(e),this.line=null,this.multipoint=null,this.polygon=null}};d([f({type:_n,json:{write:!0},readOnly:!0})],t$.prototype,"line",void 0),d([f({type:lu,json:{read:{source:"point"},write:{target:"point"}},readOnly:!0})],t$.prototype,"multipoint",void 0),d([f({type:Nr,json:{write:!0},readOnly:!0})],t$.prototype,"polygon",void 0),t$=d([V("esri.rest.networks.support.AggregatedGeometry")],t$);const Dtt=t$;let i$=class extends $e{constructor(e){super(e),this.functionType=null,this.networkAttributeName=null,this.result=null}};d([f({type:["add","subtract","average","count","min","max"],json:{write:!0},readOnly:!0})],i$.prototype,"functionType",void 0),d([f({type:String,json:{write:!0},readOnly:!0})],i$.prototype,"networkAttributeName",void 0),d([f({type:Number,json:{write:!0},readOnly:!0})],i$.prototype,"result",void 0),i$=d([V("esri.rest.networks.support.FunctionResult")],i$);const jtt=i$;let oc=class extends $e{constructor(e){super(e),this.aggregatedGeometry=null,this.circuits=null,this.elements=null,this.globalFunctionResults=null,this.kFeaturesForKNNFound=!1,this.paths=null,this.startingPointsIgnored=!1,this.warnings=null}readNetworkElements(e,i){return i.elements!=null&&Array.isArray(i.elements)?i.elements.map(r=>"firstUnit"in r&&"numUnits"in r?new pu({...r}):new Aa({...r})):[]}writeNetworkElements(e,i){i.elements=e.map(r=>r.toJSON())}};d([f({type:Dtt,json:{write:!0},readOnly:!0})],oc.prototype,"aggregatedGeometry",void 0),d([f({type:[Ntt],json:{write:!0},readOnly:!0})],oc.prototype,"circuits",void 0),d([f({type:[Aa],json:{write:!0},readOnly:!0})],oc.prototype,"elements",void 0),d([je("elements")],oc.prototype,"readNetworkElements",null),d([Ge("elements")],oc.prototype,"writeNetworkElements",null),d([f({type:[jtt],json:{write:!0},readOnly:!0})],oc.prototype,"globalFunctionResults",void 0),d([f({type:Boolean,json:{write:!0},readOnly:!0})],oc.prototype,"kFeaturesForKNNFound",void 0),d([f({type:[fJ],json:{write:!0},readOnly:!0})],oc.prototype,"paths",void 0),d([f({type:Boolean,json:{write:!0},readOnly:!0})],oc.prototype,"startingPointsIgnored",void 0),d([f({type:[String],json:{write:!0},readOnly:!0})],oc.prototype,"warnings",void 0),oc=d([V("esri.rest.networks.support.TraceResult")],oc);const Vtt=Es()({Pending:"job-waiting",InProgress:"job-executing",Completed:"job-succeeded"});let m0=class extends oc{constructor(e){super(e),this.statusUrl=null,this.status=null,this.submissionTime=null,this.lastUpdatedTime=null,this._timer=void 0}destroy(){clearInterval(this._timer)}async checkJobStatus(e){const i={...e,query:{f:"json"}},{data:r}=await mi(this.statusUrl,i),n=r.traceResults?{...r.traceResults,...r}:r;return this.read(n),this}async waitForJobCompletion(e={}){const{interval:i=1e3,statusCallback:r}=e;return new Promise((n,s)=>{this._clearTimer();const a=setInterval(()=>{this._timer||s(Hi()),this.checkJobStatus().then(o=>{const{status:l}=o;switch(this.status=l,l){case"job-succeeded":this._clearTimer(),n(this);break;case"job-waiting":case"job-executing":r&&r(this)}},o=>{this._clearTimer(),s(o)})},i);this._timer=a})}_clearTimer(){clearInterval(this._timer),this._timer=void 0}};d([f({type:String,json:{write:!0}})],m0.prototype,"statusUrl",void 0),d([pt(Vtt)],m0.prototype,"status",void 0),d([f({type:Date,json:{type:Number,write:{writer:(t,e)=>{e.submissionTime=t?t.getTime():null}}}})],m0.prototype,"submissionTime",void 0),d([f({type:Date,json:{type:Number,write:{writer:(t,e)=>{e.lastUpdatedTime=t?t.getTime():null}}}})],m0.prototype,"lastUpdatedTime",void 0),m0=d([V("esri.networks.support.TraceJobInfo")],m0);let Kc=class extends ktt{constructor(e){super(e),this.sharedNamedTraceConfigurations=[],this.type="utility",this._circuitManagerMap=new Map,this._terminalById=new Map,this._unitIdentifierManager=null}initialize(){this.addHandles(be(()=>[this.gdbVersion,this.historicMoment],()=>{this.networkSystemLayers.associationsTable&&(this.networkSystemLayers.associationsTable.gdbVersion!==this.gdbVersion&&(this.networkSystemLayers.associationsTable.gdbVersion=this.gdbVersion),this.networkSystemLayers.associationsTable.historicMoment!==this.historicMoment&&(this.networkSystemLayers.associationsTable.historicMoment=this.historicMoment))}))}get _rulesLayer(){const{gdbVersion:e,historicMoment:i}=this,r=this.networkSystemLayers.rulesTableUrl;return new ot({url:r,gdbVersion:e,historicMoment:i})}get _utilityLayerList(){var i,r;const e=new Set;return(r=(i=this.dataElement)==null?void 0:i.domainNetworks)==null||r.map(n=>{var s,a;(s=n==null?void 0:n.edgeSources)==null||s.map(({layerId:o,sourceId:l})=>{this._layerIdBySourceId.set(l,o),this._sourceIdByLayerId.set(o,l),e.add(o)}),(a=n==null?void 0:n.junctionSources)==null||a.map(({layerId:o,sourceId:l})=>{this._layerIdBySourceId.set(l,o),this._sourceIdByLayerId.set(o,l),e.add(o)})}),e}get serviceTerritoryFeatureLayerId(){var e;return((e=this.dataElement)==null?void 0:e.serviceTerritoryFeatureLayerId)??null}get networkSystemLayers(){var e,i,r,n,s,a,o,l;return new ac({rulesTableId:(e=this.sourceJSON)==null?void 0:e.systemLayers.rulesTableId,rulesTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${(i=this.sourceJSON)==null?void 0:i.systemLayers.rulesTableId}`:null,subnetworksTableId:(r=this.sourceJSON)==null?void 0:r.systemLayers.subnetworksTableId,subnetworksTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${(n=this.sourceJSON)==null?void 0:n.systemLayers.subnetworksTableId}`:null,dirtyAreasLayerId:(s=this.sourceJSON)==null?void 0:s.systemLayers.dirtyAreasLayerId,dirtyAreasLayerUrl:this.sourceJSON?`${this.featureServiceUrl}/${(a=this.sourceJSON)==null?void 0:a.systemLayers.dirtyAreasLayerId}`:null,associationsTableId:(o=this.sourceJSON)==null?void 0:o.systemLayers.associationsTableId,associationsTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${(l=this.sourceJSON)==null?void 0:l.systemLayers.associationsTableId}`:null})}get terminalConfigurations(){var e;return((e=this.dataElement)==null?void 0:e.terminalConfigurations.map(i=>mm.fromJSON(i)))||[]}get domainNetworkNames(){var e;return((e=this.dataElement)==null?void 0:e.domainNetworks.map(i=>i.domainNetworkName))||[]}get hasTelecomNetwork(){var e;return((e=this.dataElement)==null?void 0:e.domainNetworks.some(i=>i.isTelecomNetwork))??!1}get associationsTable(){return this.networkSystemLayers.associationsTable}async load(e){return this.addResolvingPromise(this._load(e)),this}async _load(e){await super._load(e),await Promise.all([this._loadNamedTraceConfigurationsFromNetwork(e),this.networkSystemLayers.loadAssociationsTable(e)])}getTerminalConfiguration(e){var c,h,m,g;let i=null,r=null;const n=e.sourceLayer;let s=null;if((n==null?void 0:n.type)==="feature"){if(s=n.layerId,s===null)return null}else if((n==null?void 0:n.type)!=="subtype-sublayer"||(s=((c=n==null?void 0:n.parent)==null?void 0:c.layerId)??null,s===null))return null;const a=e.attributes;if(a==null)return null;for(const v of Object.keys(a))v.toUpperCase()==="ASSETGROUP"&&(i=e.getAttribute(v)),v.toUpperCase()==="ASSETTYPE"&&(r=e.getAttribute(v));if(!this.dataElement)return null;let o=null;const l=this.dataElement.domainNetworks;for(const v of l){const b=(h=v.junctionSources)==null?void 0:h.find(x=>x.layerId===s);if(b){const x=(m=b.assetGroups)==null?void 0:m.find($=>$.assetGroupCode===i);if(x){const $=(g=x.assetTypes)==null?void 0:g.find(M=>M.assetTypeCode===r);if($!=null&&$.isTerminalConfigurationSupported){o=$.terminalConfigurationId;break}}}}if(o!=null){const v=this.dataElement.terminalConfigurations,b=v==null?void 0:v.find(x=>x.terminalConfigurationId===o);return b?mm.fromJSON(b):null}return null}getTierNames(e){var r,n;const i=(r=this.dataElement)==null?void 0:r.domainNetworks.find(s=>s.domainNetworkName===e);return((n=i==null?void 0:i.tiers)==null?void 0:n.map(s=>s.name))||[]}async getRulesTable(){var s;const e=this._rulesLayer;e.loaded||await e.load();const i=(s=this.dataElement)==null?void 0:s.domainNetworks;if(!i)return null;const r=i.flatMap(a=>[...a.edgeSources||[],...a.junctionSources||[]]),n=(await this._queryRulesTable(e)).map(a=>this._hydrateRuleInfo(e,r,a));return new Iy({rulesLayer:e,rules:n})}async getCircuitManager(e){var n;if(!this.hasTelecomNetwork)return null;const i=(n=this.dataElement)==null?void 0:n.domainNetworks.find(s=>s.domainNetworkName===e&&s.isTelecomNetwork);if(!i)return null;const{default:r}=await de(()=>import("./CircuitManager-BaiQscSQ.js"),[]);return Gp(this._circuitManagerMap,e,()=>new r({utilityNetwork:this,telecomDomainNetwork:i}))}async getUnitIdentifierManager(){if(!this.hasTelecomNetwork)return null;if(this._unitIdentifierManager)return this._unitIdentifierManager;const{default:e}=await de(()=>import("./UnitIdentifierManager-CaXwwyEh.js"),[]);return this._unitIdentifierManager=new e({utilityNetwork:this}),this._unitIdentifierManager}getTerminalById(e){if(!this.dataElement||e==null)return null;const i=this._terminalById.get(e);return i??(this.terminalConfigurations.forEach(r=>{r.terminals.forEach(n=>{this._terminalById.set(n.id,n)})}),this._terminalById.get(e))}isUtilityLayer(e){var i,r;return"layerId"in e?e.layerId!=null&&this._utilityLayerList.has(e.layerId)&&(((i=e.url)==null?void 0:i.startsWith(this.featureServiceUrl))??!1):!(e.type!=="subtype-sublayer"||!e.parent)&&this._utilityLayerList.has(e.parent.layerId)&&(((r=e.parent.url)==null?void 0:r.startsWith(this.featureServiceUrl))??!1)}async queryAssociations(e,i){const[{queryAssociations:r},{default:n}]=await Promise.all([de(()=>import("./queryAssociations-B_4BMMAG.js"),__vite__mapDeps([273,274])),de(()=>Promise.resolve().then(()=>ewt),void 0)]),s=n.from(e);return s.gdbVersion=this.gdbVersion,s.moment=this.historicMoment,(await r(this.networkServiceUrl,s,i)).associations}async synthesizeAssociationGeometries(e){const[{synthesizeAssociationGeometries:i},{default:r}]=await Promise.all([de(()=>import("./synthesizeAssociationGeometries-iiapp96k.js"),__vite__mapDeps([275,274])),de(()=>import("./SynthesizeAssociationGeometriesParameters-DsFmUB79.js"),[])]),n=r.from(e);return n.gdbVersion=this.gdbVersion,n.moment=this.historicMoment,i(this.networkServiceUrl,n)}async trace(e){const[{trace:i},{default:r}]=await Promise.all([de(()=>import("./trace-DMtHCAVz.js"),[]),de(()=>import("./TraceParameters-DmaEJQ4X.js"),[])]),n=r.from(e);return n.gdbVersion=this.gdbVersion,n.moment=this.historicMoment,i(this.networkServiceUrl,n)}async submitTraceJob(e){const[{submitTraceJob:i},{default:r}]=await Promise.all([de(()=>import("./trace-DMtHCAVz.js"),[]),de(()=>import("./TraceParameters-DmaEJQ4X.js"),[])]),n=r.from(e);n.gdbVersion=this.gdbVersion,n.moment=this.historicMoment;const s=await i(this.networkServiceUrl,n);return new m0({statusUrl:s})}async canAddAssociation(e){const i=await this.getRulesTable();if(!i)return!1;const{fromNetworkElement:r,toNetworkElement:n}=e;if(!r||!n)return!1;await i.load();let s=null;switch(e.associationType){case"containment":s=i.rulesCategorized.containment;break;case"attachment":s=i.rulesCategorized.attachment;break;default:s=i.rulesCategorized.connectivity}return s.some(a=>DC(a,r,n))}generateAddAssociations(e){const{associationsTable:i}=this.networkSystemLayers,{fromNetworkSourceId:r,fromGlobalId:n,fromTerminalId:s,fromFirstUnit:a,fromNumUnits:o,toNetworkSourceId:l,toGlobalId:c,toTerminalId:h,toFirstUnit:m,toNumUnits:g,associationType:v,isContentVisible:b,percentAlong:x,globalId:$}=Ftt(i);return{addFeatures:e.map(M=>{var A,L,z,U,B,X,J,Q,le,ie;const k=new sr({attributes:{[r]:(A=M.fromNetworkElement)==null?void 0:A.networkSourceId,[n]:(L=M.fromNetworkElement)==null?void 0:L.globalId,[s]:(z=M.fromNetworkElement)==null?void 0:z.terminalId,[l]:(U=M.toNetworkElement)==null?void 0:U.networkSourceId,[c]:(B=M.toNetworkElement)==null?void 0:B.globalId,[h]:(X=M.toNetworkElement)==null?void 0:X.terminalId,[v]:Ptt[M.associationType],[b]:M.isContentVisible==null?void 0:M.isContentVisible?1:0,[x]:M.percentAlong,[$]:M.globalId}});return M.fromNetworkElement instanceof pu&&(k.attributes[a]=(J=M.fromNetworkElement)==null?void 0:J.firstUnit,k.attributes[o]=(Q=M.fromNetworkElement)==null?void 0:Q.numUnits),M.toNetworkElement instanceof pu&&(k.attributes[m]=(le=M.toNetworkElement)==null?void 0:le.firstUnit,k.attributes[g]=(ie=M.toNetworkElement)==null?void 0:ie.numUnits),k}),id:this.networkSystemLayers.associationsTableId,identifierFields:{globalIdField:(i==null?void 0:i.globalIdField)??"globalid",objectIdField:(i==null?void 0:i.objectIdField)??"objectid"}}}generateDeleteAssociations(e){var a;const{associationsTable:i,associationsTableId:r}=this.networkSystemLayers,n={id:r,identifierFields:{globalIdField:(i==null?void 0:i.globalIdField)??"globalid",objectIdField:(i==null?void 0:i.objectIdField)??"objectid"}};if(((a=this.dataElement)==null?void 0:a.schemaGeneration)===-8){const o=this._generateDeleteTelecomAssociationPayload(e);return{...n,deleteAssociations:o}}const s=e.map(o=>({globalId:o.globalId}));return{...n,deleteFeatures:s}}generateCombineNetworkElements(e){return{id:this._ensureSingleSourceIdAsValidLayerId(e),combineGroupedObjects:[{globalIds:e.map(i=>i.globalId)}]}}generateDivideNetworkElements(e,i){return{id:this._ensureSingleSourceIdAsValidLayerId([e]),divideGroupedObjects:[{globalId:e.globalId,numUnits:i}]}}async loadAssociationsTable(){return this.networkSystemLayers.loadAssociationsTable()}async loadSubnetworksTable(){return this.networkSystemLayers.loadSubnetworksTable()}async _loadNamedTraceConfigurationsFromNetwork(e){var n;if(((n=this.sharedNamedTraceConfigurations)==null?void 0:n.length)===0)return;const i=this.sharedNamedTraceConfigurations.map(s=>s.globalId),r=await this.queryNamedTraceConfigurations({globalIds:i},e);for(const s of this.sharedNamedTraceConfigurations){const a=r==null?void 0:r.find(o=>o.globalId===s.globalId);if(a){const o=a.write({},{origin:"service"});s.read(o,{origin:"service"})}}}_hydrateRuleInfo(e,i,r){const n=e.fieldsIndex,s=n.get("RULETYPE"),a=n.get("CREATIONDATE"),o=n.get("FROMNETWORKSOURCEID"),l=n.get("FROMASSETGROUP"),c=n.get("FROMASSETTYPE"),h=n.get("FROMTERMINALID"),m=n.get("TONETWORKSOURCEID"),g=n.get("TOASSETGROUP"),v=n.get("TOASSETTYPE"),b=n.get("TOTERMINALID"),x=n.get("VIANETWORKSOURCEID"),$=n.get("VIAASSETGROUP"),M=n.get("VIAASSETTYPE"),k=n.get("VIATERMINALID"),A=r.attributes[s.name],L=new Date(r.attributes[a.name]),z=[{networkSourceId:r.attributes[o.name],assetGroupId:r.attributes[l.name],assetTypeId:r.attributes[c.name],terminalId:r.attributes[h.name]},{networkSourceId:r.attributes[m.name],assetGroupId:r.attributes[g.name],assetTypeId:r.attributes[v.name],terminalId:r.attributes[b.name]},{networkSourceId:r.attributes[x.name],assetGroupId:r.attributes[$.name],assetTypeId:r.attributes[M.name],terminalId:r.attributes[k.name]}],U={ruleType:A,creationDate:L};for(const B of[0,1,2]){if(A!==5&&B===2)continue;const X=z[B],J=i.find(se=>se.sourceId===X.networkSourceId),Q=J==null?void 0:J.assetGroups.find(se=>se.assetGroupCode===X.assetGroupId),le=Q==null?void 0:Q.assetTypes.find(se=>se.assetTypeCode===X.assetTypeId),ie=this._getTerminal(le,X);let re="";switch(B){case 0:re="from";break;case 1:re="to";break;case 2:re="via"}U[`${re}NetworkSource`]=J,U[`${re}AssetGroup`]=Q,U[`${re}AssetType`]=le,U[`${re}Terminal`]=ie==null?void 0:ie.toJSON()}return U}_getTerminal(e,i){var s,a;const r=e==null?void 0:e.terminalConfigurationId,n=(s=this.terminalConfigurations)==null?void 0:s.find(o=>o.id===r);return((a=n==null?void 0:n.terminals)==null?void 0:a.find(o=>o.id===i.terminalId))??null}async _queryRulesTable(e){const{gdbVersion:i,historicMoment:r}=this,n=new mt({where:"1=1",outFields:["*"],gdbVersion:i,historicMoment:r});return(await b5(e,n)).features}_generateDeleteTelecomAssociationPayload(e){return e.map(i=>({globalId:i.globalId??Att,associationType:jC.toJSON(i.associationType),fromSourceId:i.fromNetworkElement.networkSourceId,fromGlobalId:i.fromNetworkElement.globalId,fromTerminalId:i.fromNetworkElement.terminalId,toSourceId:i.toNetworkElement.networkSourceId,toGlobalId:i.toNetworkElement.globalId,toTerminalId:i.toNetworkElement.terminalId}))}_ensureSingleSourceIdAsValidLayerId(e){const i=oD(e.map(s=>s.networkSourceId));if(i.length>1)throw new ae("utility-network:invalid-source-id","'networkSourceId' is not valid. Ensure that all network elements have the same 'networkSourceId' and that it corresponds to a valid layer in the utility network.");const r=i[0],n=this.getLayerIdBySourceId(r);if(n==null)throw new ae("utility-network:invalid-source-id","'networkSourceId' is not valid. Ensure that all network elements have the same 'networkSourceId' and that it corresponds to a valid layer in the utility network.");return n}};d([f({readOnly:!0})],Kc.prototype,"_rulesLayer",null),d([f({type:[Ltt],json:{origins:{"web-map":{read:{source:"traceConfigurations"},write:{target:"traceConfigurations"}},service:{read:{source:"traceConfigurations"}}},read:!1}})],Kc.prototype,"sharedNamedTraceConfigurations",void 0),d([f({type:["utility"],readOnly:!0,json:{read:!1,write:!1}})],Kc.prototype,"type",void 0),d([f({readOnly:!0})],Kc.prototype,"serviceTerritoryFeatureLayerId",null),d([f({readOnly:!0})],Kc.prototype,"networkSystemLayers",null),d([f({readOnly:!0})],Kc.prototype,"terminalConfigurations",null),d([f({readOnly:!0})],Kc.prototype,"domainNetworkNames",null),d([f({readOnly:!0})],Kc.prototype,"hasTelecomNetwork",null),d([f({readOnly:!0,json:{read:!1}})],Kc.prototype,"associationsTable",null),Kc=d([V("esri.networks.UtilityNetwork")],Kc);const Wxe=Kc,Utt=Object.freeze(Object.defineProperty({__proto__:null,default:Wxe},Symbol.toStringTag,{value:"Module"}));let r$=class extends bt($e){constructor(e){super(e),this.expression=null,this.returnType="string",this.title=null}};d([f({type:String,json:{write:{isRequired:!0}}})],r$.prototype,"expression",void 0),d([f({type:["number","string"],json:{write:!0}})],r$.prototype,"returnType",void 0),d([f({type:String,json:{write:!0}})],r$.prototype,"title",void 0),r$=d([V("esri.webdoc.geotriggersInfo.ExpressionInfo")],r$);const Zxe=r$,BO=new jt({deviceLocation:"device-location"});let VC=class extends bt($e){constructor(e){super(e),this.filterExpression=null,this.type="device-location"}};d([f({type:Zxe,json:{write:!0}})],VC.prototype,"filterExpression",void 0),d([f({type:BO.apiValues,readOnly:!0,json:{type:BO.jsonValues,read:BO.read,write:BO.write}})],VC.prototype,"type",void 0),VC=d([V("esri.webdoc.geotriggersInfo.DeviceLocationFeed")],VC);const Btt=VC;let UC=class extends bt($e){constructor(e){super(e),this.geometry=null,this.where=null}};d([f({types:jT,json:{read:jp,write:!0}})],UC.prototype,"geometry",void 0),d([f({type:String,json:{write:!0}})],UC.prototype,"where",void 0),UC=d([V("esri.webdoc.geotriggersInfo.FeatureFilter")],UC);const qtt=UC;let n$=class extends bt($e){constructor(e){super(e),this.layerId=null,this.layerUrl=null,this.type="feature-layer"}};d([f({type:String,json:{write:{overridePolicy(){return{isRequired:this.layerUrl===null}}}}})],n$.prototype,"layerId",void 0),d([f({type:String,json:{write:{overridePolicy(){return{isRequired:this.layerId===null}}}}})],n$.prototype,"layerUrl",void 0),d([pt({featureLayer:"feature-layer"},{readOnly:!0})],n$.prototype,"type",void 0),n$=d([V("esri.webdoc.geotriggersInfo.FeatureLayerSource")],n$);const Htt=n$;let g0=class extends bt($e){constructor(e){super(e),this.fenceSource=null,this.filter=null,this.bufferDistance=null,this.type="features"}};d([f({type:Htt,json:{write:{isRequired:!0}}})],g0.prototype,"fenceSource",void 0),d([f({type:qtt,json:{write:!0}})],g0.prototype,"filter",void 0),d([f({type:Number,json:{write:!0}})],g0.prototype,"bufferDistance",void 0),d([pt({features:"features"},{readOnly:!0})],g0.prototype,"type",void 0),g0=d([V("esri.webdoc.geotriggersInfo.FeatureFenceParameters")],g0);const Gtt=g0;let iF=class extends bt($e){constructor(e){super(e),this.type="fence"}};d([pt({fence:"fence"},{readOnly:!0})],iF.prototype,"type",void 0),iF=d([V("esri.webdoc.geotriggersInfo.Geotrigger")],iF);const Yxe=iF;let BC=class extends bt($e){constructor(e){super(e),this.expressionInfo=null,this.requestedActions=null}};d([f({type:Zxe,json:{write:!0}})],BC.prototype,"expressionInfo",void 0),d([f({type:[String],json:{write:!0}})],BC.prototype,"requestedActions",void 0),BC=d([V("esri.webdoc.geotriggersInfo.GeotriggerNotificationOptions")],BC);const Wtt=BC,Ztt=new jt({enterContainsAndExitDoesNotContain:"enter-contains-and-exit-does-not-contain",enterContainsAndExitDoesNotIntersect:"enter-contains-and-exit-does-not-intersect",enterIntersectsAndExitDoesNotIntersect:"enter-intersects-and-exit-does-not-intersect"}),Ytt=new jt({useGeometry:"use-geometry",useGeometryWithAccuracy:"use-geometry-with-accuracy"}),qO=new jt({enter:"enter",enterOrExit:"enter-or-exit",exit:"exit"});let ud=class extends Yxe{constructor(e){super(e),this.enterExitRule="enter-contains-and-exit-does-not-intersect",this.feed=null,this.feedAccuracyMode="use-geometry",this.fenceNotificationRule=null,this.fenceParameters=null,this.name=null,this.notificationOptions=null,this.type="fence"}};d([pt(Ztt)],ud.prototype,"enterExitRule",void 0),d([f({type:Btt,json:{write:{isRequired:!0}}})],ud.prototype,"feed",void 0),d([pt(Ytt)],ud.prototype,"feedAccuracyMode",void 0),d([f({type:qO.apiValues,json:{type:qO.jsonValues,read:qO.read,write:{writer:qO.write,isRequired:!0}}})],ud.prototype,"fenceNotificationRule",void 0),d([f({type:Gtt,json:{write:{isRequired:!0}}})],ud.prototype,"fenceParameters",void 0),d([f({type:String,json:{write:!0}})],ud.prototype,"name",void 0),d([f({type:Wtt,json:{write:!0}})],ud.prototype,"notificationOptions",void 0),d([pt({fence:"fence"},{readOnly:!0})],ud.prototype,"type",void 0),ud=d([V("esri.webdoc.geotriggersInfo.FenceGeotrigger")],ud);const Jtt=ud,Xtt={base:Yxe,key:"type",typeMap:{fence:Jtt}};let rF=class extends bt($e){constructor(e){super(e),this.geotriggers=null}};d([f({types:[Xtt],json:{write:{isRequired:!0}}})],rF.prototype,"geotriggers",void 0),rF=d([V("esri.webdoc.GeotriggersInfo")],rF);const Qtt=rF;let nF=class extends bt($e){constructor(e){super(e),this.enabled=!0}};d([f({type:Boolean,nonNullable:!0,json:{write:!0}})],nF.prototype,"enabled",void 0),nF=d([V("esri.webdoc.ips.AppleIPSProperties")],nF);const Ktt=nF;let sF=class extends bt($e){constructor(e){super(e),this.enabled=!0}};d([f({type:Boolean,nonNullable:!0,json:{write:!0}})],sF.prototype,"enabled",void 0),sF=d([V("esri.webdoc.ips.GNSSProperties")],sF);const eit=sF;let s$=class extends bt($e){constructor(e){super(e),this.enabled=!0,this.distance=5,this.units="meter"}};d([f({type:Boolean,nonNullable:!0,json:{write:!0}})],s$.prototype,"enabled",void 0),d([f({type:Number,nonNullable:!0,json:{write:!0}})],s$.prototype,"distance",void 0),d([f({type:["feet","meter"],nonNullable:!0,json:{write:!0}})],s$.prototype,"units",void 0),s$=d([V("esri.webdoc.ips.PathSnappingProperties")],s$);const tit=s$;let aF=class extends bt($e){constructor(e){super(e),this.enabled=!0}};d([f({type:Boolean,nonNullable:!0,json:{write:!0}})],aF.prototype,"enabled",void 0),aF=d([V("esri.webdoc.ips.SmoothingProperties")],aF);const iit=aF;let y0=class extends bt($e){constructor(e){super(e),this.appleIPS=null,this.gnss=null,this.smoothing=null,this.pathSnapping=null}};d([f({type:Ktt,json:{name:"AppleIPS",write:!0}})],y0.prototype,"appleIPS",void 0),d([f({type:eit,json:{name:"GNSS",write:!0}})],y0.prototype,"gnss",void 0),d([f({type:iit,json:{write:!0}})],y0.prototype,"smoothing",void 0),d([f({type:tit,json:{write:!0}})],y0.prototype,"pathSnapping",void 0),y0=d([V("esri.webdoc.ips.Configuration")],y0);const rit=y0;let a$=class extends bt($e){constructor(e){super(e),this.portalItem=null}readPortalItem(e,i,r){const{itemId:n}=i;if(n)return new Ot({id:n,portal:r==null?void 0:r.portal})}writePortalItem(e,i){e!=null&&e.id&&(i.itemId=e.id)}};d([f({type:Ot,json:{write:{isRequired:!0}}})],a$.prototype,"portalItem",void 0),d([je("portalItem",["itemId"])],a$.prototype,"readPortalItem",null),d([Ge("portalItem",{itemId:{type:String}})],a$.prototype,"writePortalItem",null),a$=d([V("esri.webdoc.ips.PositioningService")],a$);const nit=a$;let qC=class extends bt($e){constructor(e){super(e),this.positioningService=null,this.configuration=null}};d([f({type:nit,json:{write:{isRequired:!0}}})],qC.prototype,"positioningService",void 0),d([f({type:rit,json:{write:!0}})],qC.prototype,"configuration",void 0),qC=d([V("esri.webdoc.IPSInfo")],qC);const sit=qC,ait={currentVersion:U_e,createInitialViewProperties:()=>new YR,parseVersion:Y$.parse,itemType:"Web Map",name:"webmap",origin:"web-map"},oit=Ue.ofType(Wxe);var VS;let v0=(VS=class extends AZe{constructor(e){super(e),this.geotriggersInfo=null,this.ipsInfo=null,this.presentation=null,this.utilityNetworks=null}destroy(){if(this.utilityNetworks){const e=this.utilityNetworks.removeAll();for(const i of e)i.destroy();this.utilityNetworks.destroy()}}get context(){return ait}loadAll(){return HD(this,e=>{var i,r;e(this.ground,this.basemap,this.layers,this.tables,(r=(i=this.ipsInfo)==null?void 0:i.positioningService)==null?void 0:r.portalItem)})}static fromJSON(e){if(e)return new this({resourceInfo:e});throw new ae("webmap:empty-resource","Expected a JSON resource but got nothing")}},VS.VERSION=U_e,VS);d([f({type:Qtt,json:{write:!0}})],v0.prototype,"geotriggersInfo",void 0),d([f({type:sit,json:{write:!0,name:"mapIPSInfo"}})],v0.prototype,"ipsInfo",void 0),d([f({json:{write:!0}})],v0.prototype,"presentation",void 0),d([f({type:oit,json:{read:!0,write:!0}})],v0.prototype,"utilityNetworks",void 0),v0=d([V("esri.WebMap")],v0);const oF=v0,fs=(t,e)=>{const r=_T().manager;r.onLoaded(()=>r.onLifecycle(()=>ca(t,e,n.emit)));const n=vW();return n},Jxe=(t,e)=>i=>lit(i,t);var X0,US,Jy;class mJ extends fk{constructor(i,r){super(i);bi(this,X0);bi(this,US);bi(this,Jy);this.Y=new Map,this.A=void 0,oi(this,US,mpe());const n=this;oi(n,Jy,r),n.Z(),n.setProvisionalExports(Xxe(i,new WeakRef(n),i.M.length-1,n.instance,n.Y),!1),gW(i,s=>{if(s){const a=be(()=>i[s],o=>{if(o===n.instance)return;const l=n.instance;n.exports=o,n.instance=o,n.Y.forEach((c,h)=>i.requestUpdate(c,l[h])),Ze(n,X0)&&l.destroy(),oi(n,X0,!1)},{sync:!0});n.onDestroy(a.remove)}},n.exports)}get exports(){return gpe(Ze(this,US)),super.exports}set exports(i){super.exports=i,Ze(this,US).notify()}Z(){var r;const i=this;i.instance="prototype"in Ze(i,Jy)&&"declaredClass"in Ze(i,Jy).prototype?new(Ze(i,Jy)):Ze(r=i,Jy).call(r),oi(i,X0,!0)}hostConnected(){this.exports=this.instance}hostDestroy(){var i,r;Ze(this,X0)&&((r=(i=this.instance).destroy)==null||r.call(i))}}X0=new WeakMap,US=new WeakMap,Jy=new WeakMap;const lit=bk(mJ),Xxe=(t,e,i,r,n)=>new Proxy(r,{get:(s,a)=>{const o=s[a];if(typeof a=="symbol"||n.has(a))return o;const l=t.M[i];return l.A=a,yW(t,c=>{if(l.A=void 0,c!==void 0){const h=c.key;n.set(a,h);const m=t.constructor.getPropertyOptions(h),g=a!==h&&h.toLowerCase().includes("disable");cit(e,m,a,h,g),m.i===void 0&&uit(m,i,a,g)}},o)}}),cit=(t,e,i,r,n,s)=>s=be(()=>{const a=t.deref();return a===void 0||a.component.manager.destroyed?s=s.remove():a.exports[i]},(a,o)=>{if(!s)return;const l=t.deref().component;l==null||l.requestUpdate(r,n?!o:o),e.c=!1},{sync:!0}),uit=(t,e,i,r)=>{t.d.get=function(){var s;const n=(s=this.M[e])==null?void 0:s.exports[i];return r?!n:n},t.d.set=function(n){const s=this.M[e];s.A!==i&&(s.exports[i]=r?!n:n)}},dit=t=>t.Y,hit=(t,e)=>{const i=e.manager.useRefSync(t);i==null||i.hostDestroy(),i==null||i.Z(),i==null||i.hostConnected()};/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.7 */const pit=ct`@charset "UTF-8";@keyframes esri-basemap-slide{0%{opacity:0;margin-top:0;margin-left:0}75%{opacity:0;margin-top:0;margin-left:0}to{opacity:1;margin-top:5px;margin-left:5px}}@keyframes esri-docking-animation{0%{opacity:0}25%{opacity:0}to{opacity:1}}@keyframes popup-intro-animation-down{0%{opacity:0;transform:translateY(-5px)}to{opacity:1;transform:translate(0)}}@keyframes popup-intro-animation-up{0%{opacity:0;transform:translateY(5px)}to{opacity:1;transform:translate(0)}}@supports (-ms-ime-align: auto){.esri-slider__anchor:focus{outline:1px dotted #000}}@keyframes esri-spinner--start-animation{0%{opacity:0;transform:scale(0)}to{opacity:1;transform:scale(1)}}@keyframes esri-spinner--finish-animation{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(0)}}@keyframes esri-spinner--rotate-animation{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (prefers-reduced-motion){.esri-utility-network-trace__reset-prompt{animation:none!important}}@media (prefers-reduced-motion){.esri-popup--aligned-top-center,.esri-popup--aligned-top-left,.esri-popup--aligned-top-right,.esri-popup--aligned-bottom-center,.esri-popup--aligned-bottom-left,.esri-popup--aligned-bottom-right,.esri-popup--is-docked{animation:none!important}}@keyframes esri-fade-in-down{0%{opacity:0;transform:translateY(-5px)}25%{opacity:0;transform:translateY(-5px)}to{opacity:1;transform:translate(0)}}@keyframes esri-fade-in-up{0%{opacity:0;transform:translateY(5px)}25%{opacity:0;transform:translateY(5px)}to{opacity:1;transform:translate(0)}}@keyframes esri-fade-in{0%{opacity:0}25%{opacity:0}to{opacity:1}}@keyframes esri-fade-in-scale{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}@keyframes looping-progresss-bar-ani{0%{width:0;left:0}20%{width:20%;left:0}80%{width:20%;left:80%}to{width:0;left:100%}}@keyframes esri-rotate{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes panel-advance{0%{opacity:0;transform:translate(50px) scale(.99)}to{opacity:1;transform:translate(0) scale(1)}}@keyframes panel-retreat{0%{opacity:0;transform:translate(-50px) scale(.99)}to{opacity:1;transform:translate(0) scale(1)}}@keyframes panel-advance--rtl{0%{opacity:0;transform:translate(-50px) scale(.99)}to{opacity:1;transform:translate(0) scale(1)}}@keyframes panel-retreat--rtl{0%{opacity:0;transform:translate(50px) scale(.99)}to{opacity:1;transform:translate(0) scale(1)}}.esri-view{--esri-view-outline-color: var(--calcite-color-brand);--esri-view-outline: 2px solid var(--esri-view-outline-color);--esri-view-outline-offset: -2px;margin:0;padding:0;display:flex;height:100%;width:100%}.esri-view .esri-view-user-storage{overflow:hidden}.esri-view .esri-view-root{-webkit-tap-highlight-color:var(--calcite-color-foreground-1);-webkit-tap-highlight-color:transparent;border:none;flex:100%;margin:0;padding:0;position:relative}.esri-view .esri-view-surface{-webkit-user-select:none;user-select:none;direction:ltr;border:none;outline:0;width:100%;height:100%;margin:0;padding:0;position:absolute;top:0;left:0;overflow:clip}.esri-view .esri-view-surface--touch-none{touch-action:none}.esri-view .esri-view-surface--touch-pan{touch-action:pan-x pan-y}.esri-view .esri-view-surface:focus:after{box-sizing:border-box;z-index:999;outline:var(--esri-view-outline);outline-offset:var(--esri-view-outline-offset);content:"";pointer-events:none;width:100%;height:100%;position:absolute;top:0;left:0;overflow:hidden}.esri-view .esri-view-surface[data-navigating=true]{cursor:grabbing}.esri-view .esri-view-surface[data-cursor=copy]{cursor:copy}.esri-view .esri-view-surface[data-cursor=crosshair]{cursor:crosshair}.esri-view .esri-view-surface[data-cursor=help]{cursor:help}.esri-view .esri-view-surface[data-cursor=move]{cursor:move}.esri-view .esri-view-surface[data-cursor=pointer]{cursor:pointer}.esri-view .esri-view-surface[data-cursor=progress]{cursor:progress}.esri-view .esri-view-surface[data-cursor=grab]{cursor:grab}.esri-view .esri-view-surface[data-cursor=grabbing]{cursor:grabbing}.esri-view .esri-view-surface[data-cursor=n-resize]{cursor:n-resize}.esri-view .esri-view-surface[data-cursor=e-resize]{cursor:e-resize}.esri-view .esri-view-surface[data-cursor=s-resize]{cursor:s-resize}.esri-view .esri-view-surface[data-cursor=w-resize]{cursor:w-resize}.esri-view .esri-view-surface[data-cursor=ne-resize]{cursor:ne-resize}.esri-view .esri-view-surface[data-cursor=nw-resize]{cursor:nw-resize}.esri-view .esri-view-surface[data-cursor=se-resize]{cursor:se-resize}.esri-view .esri-view-surface[data-cursor=sw-resize]{cursor:sw-resize}.esri-view .esri-view-surface[data-cursor=ew-resize]{cursor:ew-resize}.esri-view .esri-view-surface[data-cursor=ns-resize]{cursor:ns-resize}.esri-view .esri-view-surface[data-cursor=nesw-resize]{cursor:nesw-resize}.esri-view .esri-view-surface[data-cursor=nwse-resize]{cursor:nwse-resize}.esri-view .esri-view-surface[data-cursor=none]{cursor:none}.esri-view .esri-display-object,.esri-view .esri-bitmap{-webkit-user-drag:none;-webkit-user-select:none;user-select:none;border:none;margin:0;padding:0;position:absolute}.esri-view .esri-bitmap{transform-origin:0 0;max-width:none}:root{view-transition-name:none}::view-transition{pointer-events:none}.esri-ui{box-sizing:border-box;z-index:0;pointer-events:none;contain:layout;font-size:var(--calcite-font-size);position:absolute;inset:0;overflow:hidden;container:esri-view-canvas/size}.esri-ui calcite-flow,.esri-ui calcite-panel{z-index:1;position:relative}.esri-ui .esri-component{pointer-events:auto}.esri-ui .esri-fov-overlay-outer{pointer-events:none;place-content:center;width:100%;height:100%;display:grid}.esri-ui .esri-fov-overlay{text-shadow:0 0 1px var(--calcite-color-foreground-1),0 0 2px var(--calcite-color-foreground-1),0 0 3px var(--calcite-color-foreground-1);color:var(--calcite-color-text-1);font-size:var(--calcite-font-size-3);-webkit-user-select:none;user-select:none;pointer-events:none;flex-direction:row;align-items:center;gap:7px;animation:1s forwards fadeInAnimation;display:flex}.esri-ui .esri-fov-overlay-reset{cursor:pointer;pointer-events:auto}.esri-ui .esri-fov-overlay-text{pointer-events:none}@keyframes fadeInAnimation{0%{opacity:0}to{opacity:1}}@media (prefers-reduced-motion: reduce){.esri-fov-overlay{animation:none!important}}.esri-ui-corner{display:flex;position:absolute}.esri-ui-inner-container{position:absolute;inset:0}.esri-ui-manual-container>.esri-component{position:absolute}.esri-ui-manual-container .esri-swipe{z-index:-1}.esri-ui-top-left,.esri-ui-top-right{flex-flow:column}.esri-ui-top-left{align-items:flex-start;top:0;left:0}.esri-ui-top-right{align-items:flex-end;top:0;right:0}.esri-ui-bottom-left,.esri-ui-bottom-right{flex-flow:row;align-items:flex-end}.esri-ui-bottom-right{flex-flow:row-reverse;bottom:0;right:0}.esri-ui-bottom-right .esri-component{margin-left:10px}.esri-ui-top-right .esri-component,.esri-ui-top-left .esri-component{margin-bottom:10px}.esri-ui-bottom-left{bottom:0;left:0}.esri-ui-bottom-left .esri-component{margin-right:10px}:dir(rtl) .esri-ui-top-left{align-items:flex-end}:dir(rtl) .esri-ui-top-right{align-items:flex-start}:dir(rtl) .esri-ui-bottom-left{flex-direction:row-reverse}:dir(rtl) .esri-ui-bottom-right{flex-direction:row}.esri-zoom-box__container{width:100%;height:100%;position:relative}.esri-zoom-box__overlay{cursor:crosshair;width:100%;height:100%;position:absolute;top:0;left:0}.esri-zoom-box__overlay-background{fill:#0000001a}.esri-zoom-box__outline{fill:var(--calcite-color-transparent);stroke:var(--calcite-color-brand);stroke-dasharray:1 1;stroke-width:var(--calcite-spacing-base)}.esri-overlay-surface{z-index:0;pointer-events:none;-webkit-user-select:none;user-select:none;border:none;width:100%;height:100%;margin:0;padding:0;position:absolute;top:0;left:0;overflow:clip}.esri-text-overlay-item{white-space:nowrap;font-size:var(--calcite-font-size);line-height:var(--calcite-font-line-height-relative-tight);display:block;position:absolute;overflow:hidden}.esri-text-overlay-item-anchor-bottom{transform:translate(-50%,-100%)}.esri-text-overlay-item-anchor-bottom-right{transform:translate(-100%,-100%)}.esri-text-overlay-item-anchor-bottom-left{transform:translateY(-100%)}.esri-text-overlay-item-anchor-top{transform:translate(-50%)}.esri-text-overlay-item-anchor-top-right{transform:translate(-100%)}.esri-text-overlay-item-anchor-top-left{transform:translate(0)}.esri-text-overlay-item-anchor-center{transform:translate(-50%,-50%)}.esri-text-overlay-item-anchor-right{transform:translate(-100%,-50%)}.esri-text-overlay-item-anchor-left{transform:translateY(-50%)}.esri-line-overlay-item,.esri-outline-overlay-item,.esri-box-overlay-item{white-space:nowrap;display:block;position:absolute;overflow:hidden}.esri-shadow-cast__tooltip{color:var(--calcite-color-text-2);font-size:var(--calcite-font-size-sm)}.esri-shadow-cast__tooltip__content{margin-top:-8px-var(--calcite-spacing-xxs);padding:var(--calcite-spacing-xs) var(--calcite-spacing-sm);background:var(--calcite-color-foreground-1);width:max-content;position:absolute;transform:translate(-50%,-100%)}.esri-shadow-cast__tooltip__content:after{content:"";border:8px solid var(--calcite-color-transparent);border-top-color:var(--calcite-color-foreground-1);box-sizing:inherit;width:0;height:0;display:block;position:absolute;bottom:1px;left:50%;transform:translate(-50%,100%)}.esri-attribution{position:absolute;bottom:0;left:0;right:0;background-color:var(--calcite-color-transparent-tint)!important;flex-flow:row;justify-content:space-between;align-items:center;font-size:var(--calcite-font-size-sm)!important;line-height:var(--calcite-font-line-height-fixed-base)!important;display:flex}.esri-attribution__link{color:var(--calcite-color-text-1)}.esri-attribution__link:hover,.esri-attribution__link:active,.esri-attribution__link:visited,.esri-attribution__link:focus{color:var(--calcite-color-text-1)}.esri-attribution__sources{text-overflow:ellipsis;white-space:nowrap;flex:1 0;align-self:flex-start;padding:0 5px;font-weight:var(--calcite-font-weight-light);overflow:hidden}.esri-attribution__sources[role=button]{font-size:1em}.esri-attribution__powered-by{color:var(--calcite-color-text-2);text-align:right;white-space:nowrap;align-self:flex-end;padding:0 5px;font-weight:var(--calcite-font-weight-normal)}.esri-attribution--open{z-index:2}.esri-attribution__sources--open{white-space:normal}.esri-button{box-sizing:border-box;cursor:pointer;white-space:normal;word-break:normal;color:var(--calcite-color-text-1);background-color:var(--calcite-color-status-info);border:var(--calcite-spacing-px) solid var(--calcite-color-status-info);justify-content:center;align-items:center;width:100%;min-height:var(--calcite-spacing-xxxl);padding:6px 7px;font-family:inherit;font-size:var(--calcite-font-size);transition:background-color .125s ease-in-out,border .125s ease-in-out;display:flex;overflow:hidden;&:hover{color:var(--calcite-color-text-1);background-color:var(--calcite-color-status-info-hover);border:var(--calcite-spacing-px) solid var(--calcite-color-status-info-hover)}}.esri-button:hover{color:var(--calcite-color-text-1);background-color:var(--calcite-color-text-2);border:1px solid var(--calcite-color-text-2)}.esri-button.esri-button--small{min-height:var(--calcite-spacing-xl);font-size:var(--calcite-font-size-sm)}.esri-button.esri-button--half{width:50%;display:inline-block}.esri-button.esri-button--third{width:33%;display:inline-block}.esri-button--secondary{color:var(--calcite-color-text-1);background-color:var(--calcite-color-foreground-1)}.esri-button--tertiary{color:var(--calcite-color-brand);background-color:var(--calcite-color-transparent);border-color:var(--calcite-color-transparent)}.esri-button--tertiary:hover{color:var(--calcite-color-brand-hover);background-color:var(--calcite-color-foreground-2);border-color:var(--calcite-color-transparent)}.esri-button--disabled{opacity:.4;pointer-events:none}.esri-button--drill-in{outline-offset:-4px;cursor:pointer;text-align:unset;background-color:var(--calcite-color-foreground-1);border:none;border-radius:2px;justify-content:space-between;align-items:center;margin:var(--calcite-spacing-md) 7px;padding:var(--calcite-spacing-md) 7px;text-decoration:none;transition:background-color .125s ease-in-out;display:flex;box-shadow:0 0 0 1px #adadad4d}.esri-button--drill-in:hover,.esri-button--drill-in:focus{background-color:var(--calcite-color-foreground-2)}.esri-button--drill-in__title{font-size:var(--calcite-font-size)}.esri-button--drill-in [class^=esri-icon-],.esri-button--drill-in [class*=" esri-icon-"]{padding:0 7px}.esri-widget--button{cursor:pointer;text-align:center;color:var(--calcite-color-text-2);background-color:var(--calcite-color-foreground-1);flex-flow:row;justify-content:center;align-items:center;width:var(--calcite-spacing-xxxl);height:var(--calcite-spacing-xxxl);margin:0;padding:0;font-size:var(--calcite-font-size);transition:background-color .125s ease-in-out;display:flex;overflow:hidden}.esri-widget--button:is(calcite-button):not(:hover){--calcite-icon-color: var(--calcite-color-text-3)}.esri-widget--button:not([appearance]),.esri-widget--button[appearance=solid]{--calcite-color-foreground-3: var(--calcite-color-foreground-1)}.esri-widget--button:is(calcite-button){--calcite-offset-invert-focus: 1}.esri-widget--button calcite-loader[inline]{margin:auto}.esri-button--secondary{color:var(--calcite-color-brand);background-color:var(--calcite-color-foreground-1);&:hover{color:var(--calcite-color-text-inverse);background-color:var(--calcite-color-status-info);border:1px solid var(--calcite-color-status-info)}}.esri-widget__heading{color:var(--calcite-color-text-2);margin:0 0 .5rem;font-weight:var(--calcite-font-weight-semibold)}h1.esri-widget__heading{font-size:var(--calcite-font-size-xl)}h2.esri-widget__heading{font-size:var(--calcite-font-size-md)}h3.esri-widget__heading,h4.esri-widget__heading,h5.esri-widget__heading,h6.esri-widget__heading{font-size:var(--calcite-font-size)}.esri-widget{--esri-widget-padding-x: 15px;--esri-widget-padding-y: var(--calcite-spacing-md);--esri-widget-padding: var(--esri-widget-padding-y) var(--esri-widget-padding-x);box-sizing:border-box;color:var(--calcite-color-text-2);background-color:var(--calcite-color-foreground-1);font-size:var(--calcite-font-size);line-height:var(--calcite-font-line-height-relative-tight)}.esri-widget *,.esri-widget :before,.esri-widget :after{box-sizing:inherit}.esri-widget.esri-widget--disabled>*{opacity:.4;pointer-events:none}.esri-widget.esri-widget--compact{--esri-widget-padding-y: 0;--esri-widget-padding-x: 0}.esri-widget__anchor{color:var(--calcite-color-text-2)}.esri-widget__anchor:hover{color:var(--calcite-color-text-3)}.esri-widget__anchor:hover,.esri-widget__anchor:focus{text-decoration:underline}.esri-widget__anchor--disabled{opacity:.4;pointer-events:none}.esri-widget__header{background-color:var(--calcite-color-foreground-1);flex:1 0 100%;justify-content:space-between;align-items:center;width:100%;min-height:48px;padding:12px 0 12px 15px;display:flex}.esri-widget__header .esri-widget__heading{width:calc(100% - 48px);text-align:initial;color:var(--calcite-color-text-1);align-items:center;margin:0;padding:0;display:flex}.esri-widget__header-button{appearance:none;cursor:pointer;color:var(--calcite-color-text-2);background-color:var(--calcite-color-foreground-1);border:none;flex:0 0 48px;justify-content:center;align-self:stretch;align-items:center;width:48px;padding:0;display:flex}.esri-widget__footer{background-color:var(--calcite-color-foreground-1);justify-content:center;align-items:center;width:100%;min-height:48px;display:flex}.esri-widget__footer-pagination{color:var(--calcite-color-text-2);justify-content:space-between;align-items:center;display:flex}.esri-widget__footer-pagination-previous-button,.esri-widget__footer-pagination-next-button{cursor:pointer;background-color:var(--calcite-color-foreground-1);border:0;margin:0 7px;padding:12px 15px;transition:background-color .125s ease-in-out}.esri-widget__footer-pagination-previous-button:hover,.esri-widget__footer-pagination-previous-button:focus,.esri-widget__footer-pagination-next-button:hover,.esri-widget__footer-pagination-next-button:focus{color:var(--calcite-color-text-1);background-color:var(--calcite-color-foreground-1)}.esri-menu{visibility:hidden;z-index:1;background-clip:padding;background-color:var(--calcite-color-foreground-1);background-clip:padding-box;width:100%;max-height:0;margin:2px 0 0;padding:0;font-size:var(--calcite-font-size);line-height:var(--calcite-spacing-xl);position:absolute;top:100%;left:0;overflow:hidden;box-shadow:0 1px 2px #0000004d}.esri-menu .esri-menu__header{color:var(--calcite-color-text-inverse);background-color:var(--calcite-color-inverse);padding:6px 12px}.esri-menu__list{margin:0;padding:0;list-style:none}.esri-menu__list-item{cursor:pointer;border-top:1px solid #adadad4d;border-left:3px solid #0000;padding:.8em 1em}.esri-menu__list-item [class^=esri-icon-],.esri-menu__list-item [class*=" esri-icon-"]{padding-right:2.8px}.esri-menu__list-item:first-child{border-top:none}.esri-menu__list-item--focus,.esri-menu__list-item:hover,.esri-menu__list-item:focus{background-color:var(--calcite-color-foreground-1)}.esri-menu__list-item:active{background-color:var(--calcite-color-foreground-current)}.esri-menu__list-item--active,.esri-menu__list-item--active:hover,.esri-menu__list-item--active:focus{background-color:var(--calcite-color-foreground-1);border-left-color:var(--calcite-color-brand)}.esri-widget__table{border-collapse:collapse;color:var(--calcite-color-text-1);border:none;width:100%;line-height:var(--calcite-font-line-height-relative-tight)}.esri-widget__table tr:nth-child(odd){background-color:var(--calcite-color-transparent)}.esri-widget__table tr:nth-child(2n){background-color:var(--calcite-color-transparent-press)}.esri-widget__table tr a{color:var(--calcite-color-text-2)}.esri-widget__table tr a:hover,.esri-widget__table tr a:focus{color:var(--calcite-color-text-1)}.esri-widget__table tr td,.esri-widget__table tr th{vertical-align:top;word-break:break-word;padding:.5em .7em;font-size:var(--calcite-font-size-sm);font-weight:var(--calcite-font-weight-regular)}.esri-widget__table tr th{text-align:left;border-right:3px solid #0000000d;width:50%}.esri-widget__table tr td{width:50%}.esri-input{color:var(--calcite-color-text-1);background-color:var(--calcite-color-foreground-1);border:1px solid #959595;font-size:var(--calcite-font-size)}.esri-input::-ms-clear{display:none}.esri-input::placeholder{opacity:1;color:var(--calcite-color-text-2)}.esri-input:placeholder-shown{text-overflow:ellipsis}.esri-input[type=text],.esri-input[type=password],.esri-input[type=number]{height:32px;padding:0 .5em}calcite-combobox.esri-input{border:none}.esri-widget__content--empty{text-align:center;color:var(--calcite-color-border-input);flex-flow:column wrap;align-items:center;padding:18px 22px;display:flex}.esri-widget__content--empty h1.esri-widget__heading,.esri-widget__content--empty h2.esri-widget__heading,.esri-widget__content--empty h3.esri-widget__heading,.esri-widget__content--empty h4.esri-widget__heading,.esri-widget__content--empty h5.esri-widget__heading{font-weight:var(--calcite-font-weight-regular)}.esri-widget__content-illustration--empty{width:128px;padding:1rem 0}.esri-widget__content-icon--empty{width:32px;padding:.5rem 0}.esri-select{appearance:none;cursor:pointer;color:var(--calcite-color-text-2);background:var(--calcite-color-foreground-1) url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='-8 -8 32 32' width='32' height='32'%3E%3Cpath d='M8 11.207l-4-4V5.793l4 4 4-4v1.414z' fill='%23adadad' fillrule='nonzero'/%3E%3C/svg%3E") 100% no-repeat;border:1px solid #959595;border-radius:0;width:100%;height:32px;margin:0;padding:0 .5em;font-family:inherit;font-size:.85em;display:block}.esri-select[disabled]{cursor:auto}.esri-select::-ms-expand{display:none}.esri-disabled a,.esri-disabled [role=menu],.esri-disabled [role=checkbox],.esri-disabled [class^=esri-icon-],.esri-disabled [class*=" esri-icon-"]{color:var(--calcite-color-text-3)}.keynav-mode .esri-widget:focus,.keynav-mode .esri-widget :focus{z-index:1;outline-offset:2px;outline:2px solid #adadad}.esri-widget__loader-animation{border:.15em solid #adadad4d;border-top-color:var(--calcite-color-border-input);border-radius:100%;width:1em;height:1em;font-size:var(--calcite-font-size-md);animation:1.25s linear infinite esri-rotate;display:block;transform:translateZ(0)}:dir(rtl) .esri-widget__table th{text-align:right;border-left:3px solid #0000000d;border-right:none}:dir(rtl) .esri-select{background-position:0}:dir(rtl) .esri-menu__list-item{border-left:none;border-right:3px solid #0000}:dir(rtl) .esri-menu__list-item [class^=esri-icon-],:dir(rtl) .esri-menu__list-item [class*=" esri-icon-"]{padding-left:2px;padding-right:0}:dir(rtl) .esri-menu__list-item--active{border-right-color:var(--calcite-color-brand)}.esri-icon-font-fallback-text{clip:rect(0 0 0 0);width:1px;height:1px;position:absolute;overflow:hidden}.esri-rotating{animation:1.25s linear infinite esri-rotate;transform:translateZ(0)}.esri-clearfix:before,.esri-clearfix:after{content:" ";display:table}.esri-clearfix:after{clear:both}.esri-interactive{cursor:pointer}.esri-invisible{visibility:hidden!important}.esri-offscreen{position:absolute;top:-999em;left:-999em}.esri-match-height{flex-direction:column;flex:auto;display:flex;overflow:hidden}.esri-hidden{display:none!important}[class^=esri-icon-],[class*=" esri-icon-"]{speak:none;font-variant:normal;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-style:normal;font-weight:var(--calcite-font-weight-normal);line-height:1;font-family:CalciteWebCoreIcons!important}.esri-icon-close:before{content:"";color:inherit}.esri-icon-drag-horizontal:before{content:"";color:inherit}.esri-icon-drag-vertical:before{content:"";color:inherit}.esri-icon-handle-horizontal:before{content:"";color:inherit}.esri-icon-handle-vertical:before{content:"";color:inherit}.esri-icon-check-mark:before{content:"";color:inherit}.esri-icon-left-triangle-arrow:before{content:"";color:inherit}.esri-icon-right-triangle-arrow:before{content:"";color:inherit}.esri-icon-down-arrow:before{content:"";color:inherit}.esri-icon-up-arrow:before{content:"";color:inherit}.esri-icon-overview-arrow-bottom-left:before{content:"";color:inherit}.esri-icon-overview-arrow-bottom-right:before{content:"";color:inherit}.esri-icon-overview-arrow-top-left:before{content:"";color:inherit}.esri-icon-overview-arrow-top-right:before{content:"";color:inherit}.esri-icon-maximize:before{content:"";color:inherit}.esri-icon-minimize:before{content:"";color:inherit}.esri-icon-checkbox-unchecked:before{content:"";color:inherit}.esri-icon-checkbox-checked:before{content:"";color:inherit}.esri-icon-radio-unchecked:before{content:"";color:inherit}.esri-icon-radio-checked:before{content:"";color:inherit}.esri-icon-up-arrow-circled:before{content:"";color:inherit}.esri-icon-down-arrow-circled:before{content:"";color:inherit}.esri-icon-left-arrow-circled:before{content:"";color:inherit}.esri-icon-right-arrow-circled:before{content:"";color:inherit}.esri-icon-zoom-out-fixed:before{content:"";color:inherit}.esri-icon-zoom-in-fixed:before{content:"";color:inherit}.esri-icon-refresh:before{content:"";color:inherit}.esri-icon-edit:before{content:"";color:inherit}.esri-icon-authorize:before{content:"";color:inherit}.esri-icon-map-pin:before{content:"";color:inherit}.esri-icon-blank-map-pin:before{content:"";color:inherit}.esri-icon-table:before{content:"";color:inherit}.esri-icon-plus:before{content:"+";color:inherit}.esri-icon-minus:before{content:"";color:inherit}.esri-icon-beginning:before{content:"";color:inherit}.esri-icon-reverse:before{content:"";color:inherit}.esri-icon-pause:before{content:"";color:inherit}.esri-icon-play:before{content:"";color:inherit}.esri-icon-forward:before{content:"";color:inherit}.esri-icon-end:before{content:"";color:inherit}.esri-icon-erase:before{content:"";color:inherit}.esri-icon-up-down-arrows:before{content:"";color:inherit}.esri-icon-left:before{content:"";color:inherit}.esri-icon-right:before{content:"";color:inherit}.esri-icon-announcement:before{content:"";color:inherit}.esri-icon-notice-round:before{content:"";color:inherit}.esri-icon-notice-triangle:before{content:"";color:inherit}.esri-icon-home:before{content:"";color:inherit}.esri-icon-locate:before{content:"";color:inherit}.esri-icon-expand:before{content:"";color:inherit}.esri-icon-collapse:before{content:"";color:inherit}.esri-icon-layer-list:before{content:"";color:inherit}.esri-icon-basemap:before{content:"";color:inherit}.esri-icon-globe:before{content:"";color:inherit}.esri-icon-applications:before{content:"";color:inherit}.esri-icon-arrow-up-circled:before{content:"";color:inherit}.esri-icon-arrow-down-circled:before{content:"";color:inherit}.esri-icon-arrow-left-circled:before{content:"";color:inherit}.esri-icon-arrow-right-circled:before{content:"";color:inherit}.esri-icon-minus-circled:before{content:"";color:inherit}.esri-icon-plus-circled:before{content:"";color:inherit}.esri-icon-add-attachment:before{content:"";color:inherit}.esri-icon-attachment:before{content:"";color:inherit}.esri-icon-calendar:before{content:"";color:inherit}.esri-icon-close-circled:before{content:"";color:inherit}.esri-icon-browser:before{content:"";color:inherit}.esri-icon-collection:before{content:"";color:inherit}.esri-icon-comment:before{content:"";color:inherit}.esri-icon-configure-popup:before{content:"";color:inherit}.esri-icon-contact:before{content:"";color:inherit}.esri-icon-dashboard:before{content:"";color:inherit}.esri-icon-deny:before{content:"";color:inherit}.esri-icon-description:before{content:"";color:inherit}.esri-icon-directions:before{content:"";color:inherit}.esri-icon-directions2:before{content:"";color:inherit}.esri-icon-documentation:before{content:"";color:inherit}.esri-icon-duplicate:before{content:"";color:inherit}.esri-icon-review:before{content:"";color:inherit}.esri-icon-environment-settings:before{content:"";color:inherit}.esri-icon-error:before{content:"";color:inherit}.esri-icon-error2:before{content:"";color:inherit}.esri-icon-experimental:before{content:"";color:inherit}.esri-icon-feature-layer:before{content:"";color:inherit}.esri-icon-filter:before{content:"";color:inherit}.esri-icon-grant:before{content:"";color:inherit}.esri-icon-group:before{content:"";color:inherit}.esri-icon-key:before{content:"";color:inherit}.esri-icon-labels:before{content:"";color:inherit}.esri-icon-tag:before{content:"";color:inherit}.esri-icon-layers:before{content:"";color:inherit}.esri-icon-left-arrow:before{content:"";color:inherit}.esri-icon-right-arrow:before{content:"";color:inherit}.esri-icon-link-external:before{content:"";color:inherit}.esri-icon-link:before{content:"";color:inherit}.esri-icon-loading-indicator:before{content:"";color:inherit}.esri-icon-maps:before{content:"";color:inherit}.esri-icon-marketplace:before{content:"";color:inherit}.esri-icon-media:before{content:"";color:inherit}.esri-icon-media2:before{content:"";color:inherit}.esri-icon-menu:before{content:"";color:inherit}.esri-icon-mobile:before{content:"";color:inherit}.esri-icon-phone:before{content:"";color:inherit}.esri-icon-navigation:before{content:"";color:inherit}.esri-icon-pan:before{content:"";color:inherit}.esri-icon-printer:before{content:"";color:inherit}.esri-icon-pie-chart:before{content:"";color:inherit}.esri-icon-chart:before{content:"";color:inherit}.esri-icon-line-chart:before{content:"";color:inherit}.esri-icon-question:before{content:"";color:inherit}.esri-icon-resend-invitation:before{content:"";color:inherit}.esri-icon-rotate:before{content:"";color:inherit}.esri-icon-save:before{content:"";color:inherit}.esri-icon-settings:before{content:"";color:inherit}.esri-icon-settings2:before{content:"";color:inherit}.esri-icon-share:before{content:"";color:inherit}.esri-icon-sign-out:before{content:"";color:inherit}.esri-icon-support:before{content:"";color:inherit}.esri-icon-user:before{content:"";color:inherit}.esri-icon-time-clock:before{content:"";color:inherit}.esri-icon-trash:before{content:"";color:inherit}.esri-icon-upload:before{content:"";color:inherit}.esri-icon-download:before{content:"";color:inherit}.esri-icon-zoom-in-magnifying-glass:before{content:"";color:inherit}.esri-icon-search:before{content:"";color:inherit}.esri-icon-zoom-out-magnifying-glass:before{content:"";color:inherit}.esri-icon-locked:before{content:"";color:inherit}.esri-icon-unlocked:before{content:"";color:inherit}.esri-icon-favorites:before{content:"";color:inherit}.esri-icon-compass:before{content:"";color:inherit}.esri-icon-down:before{content:"";color:inherit}.esri-icon-up:before{content:"";color:inherit}.esri-icon-chat:before{content:"";color:inherit}.esri-icon-dock-bottom:before{content:"";color:inherit}.esri-icon-dock-left:before{content:"";color:inherit}.esri-icon-dock-right:before{content:"";color:inherit}.esri-icon-organization:before{content:"";color:inherit}.esri-icon-north-navigation:before{content:"";color:inherit}.esri-icon-locate-circled:before{content:"";color:inherit}.esri-icon-dial:before{content:"";color:inherit}.esri-icon-polygon:before{content:"";color:inherit}.esri-icon-polyline:before{content:"";color:inherit}.esri-icon-visible:before{content:"";color:inherit}.esri-icon-non-visible:before{content:"";color:inherit}.esri-icon-link-vertical:before{content:"";color:inherit}.esri-icon-unlocked-link-vertical:before{content:"";color:inherit}.esri-icon-link-horizontal:before{content:"";color:inherit}.esri-icon-unlocked-link-horizontal:before{content:"";color:inherit}.esri-icon-swap:before{content:"";color:inherit}.esri-icon-cta-link-external:before{content:"";color:inherit}.esri-icon-reply:before{content:"";color:inherit}.esri-icon-public:before{content:"";color:inherit}.esri-icon-share2:before{content:"";color:inherit}.esri-icon-launch-link-external:before{content:"";color:inherit}.esri-icon-rotate-back:before{content:"";color:inherit}.esri-icon-pan2:before{content:"";color:inherit}.esri-icon-tracking:before{content:"";color:inherit}.esri-icon-expand2:before{content:"";color:inherit}.esri-icon-arrow-down:before{content:"";color:inherit}.esri-icon-arrow-up:before{content:"";color:inherit}.esri-icon-hollow-eye:before{content:"";color:inherit}.esri-icon-play-circled:before{content:"";color:inherit}.esri-icon-volume-off:before{content:"";color:inherit}.esri-icon-volume-on:before{content:"";color:inherit}.esri-icon-bookmark:before{content:"";color:inherit}.esri-icon-lightbulb:before{content:"";color:inherit}.esri-icon-sketch-rectangle:before{content:"";color:inherit}.esri-icon-north-navigation-filled:before{content:"";color:inherit}.esri-icon-default-action:before{content:"";color:inherit}.esri-icon-undo:before{content:"";color:inherit}.esri-icon-redo:before{content:"";color:inherit}.esri-icon-cursor:before{content:"";color:inherit}.esri-icon-cursor-filled:before{content:"";color:inherit}.esri-icon-measure:before{content:"";color:inherit}.esri-icon-measure-line:before{content:"";color:inherit}.esri-icon-measure-area:before{content:"";color:inherit}.esri-icon-legend:before{content:"";color:inherit}.esri-icon-sliders:before{content:"";color:inherit}.esri-icon-sliders-horizontal:before{content:"";color:inherit}.esri-icon-cursor-marquee:before{content:"";color:inherit}.esri-icon-lasso:before{content:"";color:inherit}.esri-icon-elevation-profile:before{content:"";color:inherit}.esri-icon-slice:before{content:"";color:inherit}.esri-icon-line-of-sight:before{content:"";color:inherit}.esri-icon-zoom-to-object:before{content:"";color:inherit}.esri-icon-urban-model:before{content:"";color:inherit}.esri-icon-measure-building-height-shadow:before{content:"";color:inherit}.esri-icon-partly-cloudy:before{content:"";color:inherit}.esri-attachments__progress-bar:before,.esri-attachments__progress-bar:after{opacity:var(--calcite-opacity-100);content:"";height:1px;transition:opacity .5s ease-in-out;position:absolute;top:0}.esri-attachments__progress-bar:before{z-index:0;background-color:var(--calcite-color-foreground-2);width:100%}.esri-attachments__progress-bar:after{z-index:0;background-color:var(--calcite-color-text-2);width:20%;animation:1.5s linear infinite looping-progresss-bar-ani}.esri-attachments{background-color:var(--calcite-color-background)!important;width:100%}.esri-attachments__loader-container{justify-content:center;align-items:center;height:150px;padding:0;display:flex}.esri-attachments__loader{background:url(data:image/gif;base64,R0lGODlhIQAnALMKAAB6wrze86TR7Y3F53W44V6s2kaf1C+TzheGyNPq+f///wAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDE0IDc5LjE1Njc5NywgMjAxNC8wOC8yMC0wOTo1MzowMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1MkRGQzEzOEQ3MUIxMUU0QjJCRTkxRjI3NjA5MTc2MyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo2RDdDRTgwM0Q3MjAxMUU0QjJCRTkxRjI3NjA5MTc2MyIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo2RDdDRTgwMkQ3MjAxMUU0QjJCRTkxRjI3NjA5MTc2MyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxNCAoTWFjaW50b3NoKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOmQyYThhNjgzLWIwNjctNDhhZi05Nzc0LTZiOTZkM2RhMjI2OCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo1MkRGQzEzOEQ3MUIxMUU0QjJCRTkxRjI3NjA5MTc2MyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgH//v38+/r5+Pf29fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWEg4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxLSklIR0ZFRENCQUA/Pj08Ozo5ODc2NTQzMjEwLy4tLCsqKSgnJiUkIyIhIB8eHRwbGhkYFxYVFBMSERAPDg0MCwoJCAcGBQQDAgEAACH5BAkEAAoALAAAAAAhACcAAASOUMlJq70W6L2xv1z4jVPIkaTZoZ+qsa0Ley4wY7WU7Dyv9z1JTgEMEos7oeyI/DUVQ2SSWVSqnFUq0GrCbrXGqNQbXkoTZB/UPAarxc8zV+SeytfXOlo/P/H/cFl3gV+DbHFthEaGeXeMXX+PdI6Jh4KVjW2SfpRPQzcVn6AlS6OkeaZ9K6l4kKyirLEXEQAh+QQJBAAKACwAAAAAIQAnAAAEqFDJSau9OOutkP8fx4GkuJGgqaGhirGe+8JSYN+3CCM1jkuJoFAo2fV8NuBwWKQpkDnFktlxQpPSabDJOiKVWi7K6wNPxaXn1bxEp9RQNtUI/2bD1W69fD/nx3s/fW1/aVcBckSFb4eJW4stjYNzVmuTinSSWo+ZlpsJbpGem6ExgVGfpTynWKmQppqkr6uxeJ1xl5yVuCdOMhV0vxTBwqrFw77HysvFEQAh+QQFBAAKACwAAAAAIQAnAAAEqFDJSau9OOvNez5gGHqaaJKfOaKXugpwHHcuKMk4Xd/4rCTAYFBSO/B6AolwSdwpkDDlcqgoHnvSaaLpuuZ+2m3VCU2CtVyVV5adpk9PaJs57saRc+FbtPaFxVZ3WGdudWqCX397L3KEdIFleVSQjYqGcJGOepd8iGyak2SVYYs2nn6knIx4oEClRqdRrYCirJaUtqm4gxu7X71OLBWBwhTExcjJysseEQAh+QQJBAAKACwBAAMAFAAhAAAEU9DIOZW9WNGd+6Zd9lXKYJ7nKFloqxpsm6qxPLy1jJf2TfO2Xc83yrl+Q2FPGUQunc0iUAelSpPV4/W5jX6MKKb1O9WSsd0xpxzOtqUhyy6u+dEjACH5BAkEAAoALAAAAAAhACcAAASAUMlJq7046827/10hjiOIkahErCwboqXSzi9cqLPL2SKeEzWYLxdMyX7AHW9IU9qYrSIJqtvwbsefNIZMWpdZolMYbn6f5ejY2N320lXNlbpyY9vrKbye5yLtdF5yYHhnZIWDaIgZc3uCjIR/fW+LJ5Fak3eShkYmnp+goaKjHREAIfkECQQACgAsAAAAACEAJwAABKhQyUmrvTjrzbv/IFaMJNkRaJpKZXuqKtuaHBwrM73ZK54XkoRwOJTwULJckEg0HpOzJVPo5EFdimlRcSRcS9Jp1falaancp0+ZPY9h5VGY+b79gG1tvXefN9NWa1F5YoBkglhnCXtIiGCEdIZwjmZuknY/fltdcXiKjF6UcpB/nKKelqZ9pJtqq5+XfJmsaKqzsLZsuK6zO7xsvoGrIRXDxMfIycrLxBEAIfkEBQQACgAsAAAAACEAJwAABKdQyUmrvTjrzbu3RiiKXzaeJXaO3eC+r7SSHGzLs9HasZLrioRwOJTwej8JcWk8DnAz5bKocD59Oek00TxCV9ppl/dFBbfcqrPMOm/HN2zULVZ75WA6007Gm9FpVmw0gHAwgyFhe4J+bYV8cUl6RIZIWZNUjJKPmpeca42EaJUuiECfd5ujkIehiZhCpFeqb6yWc6h9khudcykVu78TwcKuQMXIycrKEQAh+QQJBAAKACwBAAMAFAAhAAAEVVDJSdW5GNed+65dJowkKYVYqZ7ooZYs+ppWO49xeAt5t/eiGzAlrMmKLRfStjzOhpefUdekPqe+avaalHa1QS5T7HxBlWSrGRtef9OezyQpn7fq5wgAIfkECQQACgAsAAAAACEAJwAABIBQyUmrvTjrzZH/H9eBoLiRpZmhoYqxnhjMNC3BiFzXN6zvsx7rBxSiiDsjCclT4Jg2p48DjD6p1YAytclqpUNsddvqZskxcRF8VCfZS3fzah7DuRovOie3TutrdHlnd2WDdoIZeoVpgG+JGIuQF5J/LhWTl5kumyqdJp+XoqMiEQAh+QQJBAAKACwAAAAAIQAnAAAEjlDJSau9OIPNef5VJ4KkInYleHqptgKtu8bYC5NJruuSLe3AH5BnegmHieOwZ1Qgc8pgceZ8RndM6jNZRWZPV+L2O+ouzVIfGrsmqsdt6BQc58Lf1joZpe/jvX5NcHeCeYRahnl/Z4d0g4qFgI1lj4CLUpN8lWeXbCpNNCGgoRNqpKWjp6anc2WsrXyvrBEAIfkECQQACgAsAAAAACEAJwAABKlQyUmrvTjrzZH/H9eBoLiRpZmhoYqxnvvCUmDft5TsPC/BiBoOp+v1fjTFkKgwHhVA4TJQdCaQLOmy6sSitEOu0UsCM607cmpqEz+jSrbbB02yqU20unWfp+tZcVN+V4Bfglt5VnsxiGGKXYZljmd6kmtykGOXfJlohXB9mm92npahpoucjaKfjEGUOaN0qIOzf7WJJ6W2u4EyFXDAFMLDr8bEScjLzBoRACH5BAUEAAoALAAAAAAhACcAAASqUMlJq7046827t0coil82niV2jum1koogz3P3hhKtS0nv+5LbIaerKX7I4I1YFPCQQIWQWXxCE8oXdXe8YqXLWNPZvWZXW5oVekaJm+skWPuultlzdJ3r/U73andyf2NkfW0sgEaHeW6FcT+IMI+CkY2JlIyEY5BRm3CVnmGZXpI4ijKdPaZDqIall5Ocoauxp6Rmtq2UG592vaOzwHQtFH/FE8fIy8zNzBEAIfkECQQACgAsDAADABQAIQAABFPQyDmVvVjRnfumXfZVymCe5yhZaKsabJuqsTy8tYyX9k3ztl3PN8q5fkNhTxlELp3NIlAHpUqT1eP1uY1+jCim9TvVkrHdMacczralIcsurvnRIwAh+QQJBAAKACwAAAAAIQAnAAAEgFDJSau9OOvNu/8gVowkGV5lKhFs23ZpubouHI8zzdp3rvMxHw2oUuhenBvOeCQQZczj0xT9JZXC2rVXHW6DXe1GWcgix9jwWUM2777FphMOlU+Xdjo1j+by2Wl/GW1qb31ggiKBTXdlhXOHcYx6eJORdZaAfpmDaSefoKGio58RACH5BAkEAAoALAAAAAAhACcAAASoUMlJq7046827/2AoFWRZdkSqqqNpouvauiQcpzMtJXzfSzeWgnZS+I7AICHn2h1/CuVySCw4n4lkkPkyYrNRJbf4BUvHNS9We0Nb1U92zH2Nh7dUYh15b+d1cHxnf02BPnIyhF1liEJVb4x9c4pkX404lGmRg497h5KJnYZQnFWepGKZkJagjqajPJdTopuptKylehy5gBu8hb62ryIUosTHyMnKyxIRACH5BAUEAAoALAAAAAAhACcAAASpUMlJq7046827/5IhjiOIkah5oWQ3vDAcsqIbxzMtJXzfSzecglZT+I7A4CvH2h1/CuVySHQ+E0klM2W8YqPSbat7zQbFJfLTfEMXvV/pwG2wrsFaqk6NxJ/1TXw+bEJEdYJQcnR2fYqAXHCEMo9jkX5tlGmWjoaMg5eFVYg8klOdo3FhmW9epXOrh5uqp7J5tK2gk6cbnKK8s74qE7vCi8XDwcfKy8wWEQAh+QQJBAAKACwMAAMAFAAhAAAEVVDJSdW5GNed+65dJowkKYVYqZ7ooZYs+ppWO49xeAt5t/eiGzAlrMmKLRfStjzOhpefUdekPqe+avaalHa1QS5T7HxBlWSrGRtef9OezyQpn7fq5wgAIfkECQQACgAsAAAAACEAJwAABIBQyUmrvTjrzTf6INh5YThqpXliqbhe7dcFdF1LMTLbNh7vPJqvBQwOU0XesZTsKXLN2/PHCUqhVWtgqdpot1Ni1sp1ebVl2dgYRq6VbebbiT2T413NN62bX6l2bHV6aHhmhHeDGXuGaoFwihiMkReTgC8UlC+aK5wnniOgmKOjEQAh+QQJBAAKACwAAAAAIQAnAAAEjlDJSau9OGsFuvdbyH2fuJGlmaGgirGd+8LyBQNSou97zvOSm++nGxKDNAWxp1wmkCzjTwocRZtLKlOIPXanVpS2+K1ync/yNokep89ON1SsJrfDJHn9zY7v53l/gnBZg32Fd4ReiYeLfopgjFd3knSUj42RmJN+lYE1FFygE6KjeCmmpy2ppaOtoK+pFhEAIfkECQQACgAsAAAAACEAJwAABI1QyUmrvTjrzTf6INh5YThqpXliqbhe7ffCsZTcOG7nuRQjO94tKPTVFEIdMpkwtog8aE/xkyqZTeoRax1qn8tkN1sNF83Rb2rMVpfaXLcqHi/Tmc41elrf4vdKdn99YHdici6GZ4KHhHqKaYxnjm+AXpRzg3+SaZguMxRloBOio4gypnmVqaWjramwLxEAIfkEBQQACgAsAAAAACEAJwAABIpQyUmrvTjrzbv/0iGOI4iRqHmhpGqxpUvBopTcOG7neUjvvBsw6IMNeceegnZI6hTBJ9MphEYTRRYVa41mU11iGLn8jZVX7vT8TH9b7Kq7bIxz5+s53qy/vmN9XnRadlt/NYWJeX6KfIx7dYFii4KQhJJklGKWYJhKazKHTaGipKWmoKGppqytrBEAIfkECQQACgAsFwADAAkAIQAABBLQyEmrvTjrzbv/YCiOZGmeZQQAIfkECQQACgAsAAAAACEAJwAABFBQyUmrvTjrzbv/YCgVZFmKlqmilWqylHvCo1zQtYwr9o33O+DPFiQOdUdXEUkTNo1PJsw5hValLGrWusWitF9u2CsCl8Vncsi8Ru/e8PguAgAh+QQJBAAKACwAAAAAIQAnAAAEhlDJSau9OOvNu/9gKIZEaZpjda4ptZ5SIs9zTNPSiyo3zveynI5gAxZ7Qt3xtvQNiT9jFKl4NmtTZnV4DWad3C8W6LWKveRE8tVVn93mdHvNes+3Srs+Tr7zpXJ4bHqBf1SFYYGIeYp9gnWNUoZai4ORVJM+lXUtjzCdnjudZqClpqeoqRsRACH5BAUEAAoALAAAAAAhACcAAASFUMlJq7046827/2AojuQ2nChaTmkrJXAcv7IstSldw/p+46deTWhTAIOK3SypTPyAxGXTaTxGeUzlE3elTreurE88rELJxa+Zi5Y2wbk2Vn0cdO/rsJpulXvfeXF7gHV4fGeDWoEqfniFjZCPiWOSgIdsk2WVipdhK4+ffSujpKWmp6grEQAh+QQJBAAKACwXAAYACQAbAAAEEFDISau9OOvNu/9gKI5kyUUAIfkECQQACgAsAAAAACEAJwAABElQyUmrvTjrzbv/YCiOZGkqQaqqJ7qu7QufMkvXQYzrNS/7L+DMhMvdesdfMrgclopCG3HXlD6pU2RWuWV2nSRoa0wum8/o9CYCACH5BAUEAAoALAAAAAAhACcAAARsUMlJq7046827/2AojmRpckmqqtLqti6rxDKdwjQe6+9s8ytg7efLFXfHni0hvCWDz6Fx2WRGndSrNcsldqfeMHiM/JbFZ7ISvVZDze20PE5/s+1u6Ry/19f9fH9Yd4CFTieIiYqLjI2OjyQRACH5BAUEAAoALAAAAAABAAEAAAQCUEUAIfkEBQQACgAsAAAAAAEAAQAABAJQRQA7) 50% no-repeat;width:100%;height:64px}.esri-attachments__actions{flex-flow:wrap;padding:6px 7px;display:flex}.esri-attachments__item-add-icon{font-size:var(--calcite-font-size-xl);margin:0;padding:0 7px}.esri-attachments__delete-button{color:var(--calcite-color-status-danger);width:auto;margin-right:auto}.esri-attachments .esri-attachments__items{width:100%;margin:0;padding:0;display:flex}.esri-attachments .esri-attachments__item{margin:0;line-height:var(--calcite-font-line-height-relative-tight);list-style-type:none}.esri-attachments__item-button{outline-offset:-4px;cursor:pointer;width:100%;text-align:unset;color:var(--calcite-color-text-2);background-color:var(--calcite-color-foreground-2);border:1px solid var(--calcite-color-foreground-1);border-radius:var(--calcite-border-width-md);align-items:center;margin:0 0 var(--calcite-spacing-xs);padding:var(--calcite-spacing-xs) 7px;text-decoration:none;transition:border-color .125s ease-in-out;display:flex;box-shadow:0 1px var(--calcite-color-foreground-1)}.esri-attachments__item-button:focus,.esri-attachments__item-button:hover{border-color:var(--calcite-color-border-white)}.esri-attachments__item-link{text-decoration:none;display:block;position:relative}.esri-attachments__item-link:hover .esri-attachments__item-link-overlay,.esri-attachments__item-link:focus .esri-attachments__item-link-overlay{opacity:1}.esri-attachments__item-add{background-color:var(--calcite-color-background);padding:6px 0}.esri-attachments__add-attachment-button{align-items:baseline!important;border-radius:var(--calcite-corner-radius-xs);border:none!important;justify-content:flex-start!important;padding:12px 3px!important;font-size:var(--calcite-font-size-sm)!important;transition:background-color .25s ease-in-out}.esri-attachments__add-attachment-button:hover{background-color:var(--calcite-color-foreground-1)!important;text-decoration:none;box-shadow:0 1px 2px #0000004d}.esri-attachments__item-link-overlay{opacity:0;pointer-events:none;-webkit-user-select:none;user-select:none;justify-content:center;align-items:center;transition:opacity .25s ease-in-out;display:flex;position:absolute;inset:0}.esri-attachments__item-link-overlay-icon{color:var(--calcite-color-foreground-2);background-color:var(--calcite-color-foreground-1);border-radius:100%;justify-content:center;align-items:center;padding:18px;display:flex}.esri-attachments__item-link-overlay-icon svg{fill:var(--calcite-color-foreground-1)}.esri-attachments__item-mask{justify-content:center;align-items:center;width:64px;height:64px;display:flex;position:relative;overflow:hidden;box-shadow:0 0 0 1px var(--calcite-color-foreground-1)}.esri-attachments__item-mask--icon{background-color:var(--calcite-color-foreground-2);padding:24px 0}.esri-attachments__item-mask--icon .esri-attachments__image{width:var(--calcite-spacing-xxxl);height:var(--calcite-spacing-xxxl)}.esri-attachments__metadata{justify-content:space-between;margin-top:3px;display:flex}.esri-attachments__metadata .esri-attachments__metadata-fieldset{text-align:center;background-color:var(--calcite-color-foreground-1);border:none;flex:0 calc(50% - 1px);margin:0;padding:6px 7px;font-size:var(--calcite-font-size-sm)}.esri-attachments__file-name{white-space:pre-wrap;word-break:break-word;word-wrap:break-word;margin-bottom:3px;font-size:var(--calcite-font-size-sm);display:inline-block}.esri-attachments__file-fieldset{border:none;margin:0;padding:var(--calcite-spacing-md) 7px}.esri-attachments__file-input{opacity:0;z-index:-1;width:.1px;height:.1px;position:absolute;overflow:hidden}.esri-attachments__container--list .esri-attachments__items{flex-flow:column}.esri-attachments__container--list .esri-attachments__item-mask{flex:none;margin-right:7px;position:relative}.esri-attachments__container--list .esri-attachments__image{max-width:unset;max-height:unset;left:50%}.esri-attachments__container--list .esri-attachments__label{flex:auto;justify-content:space-between;display:flex}.esri-attachments__container--list .esri-attachments__filename{white-space:pre-wrap;word-break:break-word;word-wrap:break-word;cursor:pointer;flex:1 0 0}.esri-attachments__container--list .esri-attachments__item-chevron-icon{cursor:pointer;flex:none;padding:0 15px}.esri-attachments__container--preview .esri-attachments__items{flex-flow:wrap;align-items:center}.esri-attachments__container--preview .esri-attachments__item{width:100%;margin-bottom:var(--calcite-spacing-md)}.esri-attachments__container--preview .esri-attachments__item-mask{width:100%;height:auto}.esri-attachments__container--preview .esri-attachments__item-button{box-shadow:none;flex-flow:column}.esri-attachments__container--preview .esri-attachments__item-button .esri-attachments__label{margin:var(--calcite-spacing-md) 0}.esri-attachments__container--preview .esri-attachments__image{max-width:100%}.esri-attachments__container--preview .esri-attachments__filename{white-space:pre-wrap;word-break:break-word;word-wrap:break-word;text-align:center;text-overflow:ellipsis;width:calc(100% - 15px);margin-top:var(--calcite-spacing-md);overflow:hidden}.esri-attachments__container--preview .esri-attachments__item-mask--icon{background-color:var(--calcite-color-foreground-1)}.esri-attachments__form-node{background-color:var(--calcite-color-foreground-1);padding:6px 7px;box-shadow:var(--calcite-shadow-sm)}.esri-attachments__form-node .esri-attachments__item-mask{box-shadow:none;width:unset;height:unset}.esri-attachments__form-node .esri-attachments__image{max-width:100%}.esri-attachments__error-message{background-color:var(--calcite-color-foreground-1);border-top:3px solid var(--calcite-color-status-danger);margin:6px 7px;padding:var(--calcite-spacing-md) 15px;animation:.25s ease-in-out esri-fade-in-down;box-shadow:0 1px 2px #0000004d}.esri-attachments__progress-bar{width:100%;position:absolute}.esri-attachments__item-mask:dir(rtl){margin-left:7px;margin-right:0}.esri-feature-form{letter-spacing:0em;background:var(--calcite-color-background);padding:var(--esri-widget-padding)}.esri-feature-form__disabled-notice{margin-bottom:var(--calcite-spacing-xl)}.esri-feature-form .esri-feature-utility-network-associations,.esri-feature-form .esri-feature-form-utility-network-association-list{margin-block-end:var(--calcite-spacing-md)}.esri-feature-form .esri-feature-utility-network-associations .esri-feature-element-info__description{color:var(--calcite-color-text-2)}.esri-feature-form .esri-feature-utility-network-associations .esri-feature-element-info h5{font-size:inherit}.esri-feature-form__form{flex-direction:column;display:flex}.esri-feature-form__centered-button{align-self:center}.esri-feature-form__description-text{color:var(--calcite-color-text-2);font-size:var(--calcite-font-size-sm)}.esri-feature-form__list-observer{z-index:2;text-align:center;position:relative;bottom:var(--calcite-spacing-xxl)}.esri-feature-form__related-records_header{margin-bottom:var(--calcite-spacing-xs);display:flex}.esri-feature-form__related-records_header span{flex-grow:1}.esri-feature-form__related-records_label calcite-notice,.esri-feature-form__related-records_label .esri-feature-form__description-text{margin-bottom:var(--calcite-spacing-xs)}.esri-feature-form__related-records_list{min-height:40px;margin-bottom:var(--calcite-spacing-xs)}label.esri-feature-form__label{gap:.5em;margin-bottom:var(--calcite-spacing-md)}.esri-feature-form__label{opacity:1;flex-direction:column;justify-content:space-between;margin-bottom:var(--calcite-spacing-xs);transition:opacity .25s,margin .25s;display:flex;position:relative}.esri-feature-form__label:last-child{margin-bottom:0}.esri-feature-form__label-text-content{white-space:pre-wrap;word-break:break-word;word-wrap:break-word;align-items:center;display:flex}.esri-feature-form__form-header{margin-bottom:var(--calcite-spacing-md)}.esri-feature-form__form-header .esri-feature-form__description-text~.esri-widget__heading{margin-bottom:0}.esri-feature-form__input{width:100%}.esri-feature-form__input:focus{outline:2px solid var(--calcite-color-brand);outline-offset:-2px}textarea.esri-feature-form__input{resize:vertical}.esri-feature-form__input--disabled{background-color:var(--calcite-color-background);font-weight:var(--calcite-font-weight-medium)}.esri-feature-form__field-error-message{padding:7px 0;font-size:var(--calcite-font-size-sm)}.esri-feature-form__date-input-container{flex-direction:column;display:flex}.esri-feature-form__date-input-container .esri-feature-form__input{margin-bottom:3px}.esri-feature-form__date-input-container :last-child{margin-bottom:0}.esri-feature-form__input--radio-group{flex-direction:column;display:flex}.esri-feature-form__input--radio-label{align-items:center;display:flex}.esri-feature-form__input--switch{margin:7px 0}.esri-feature-form__group{margin:0 0 var(--calcite-spacing-md);background-color:inherit;margin-inline:-10px}.esri-feature-form__group--sequential{border-bottom:none;border-inline-start:3px solid #adadad4d}.esri-feature-form__group--active{border-inline-start-color:var(--calcite-color-status-info)}.esri-feature-form__text-element{color:var(--calcite-color-text-3);line-height:var(--calcite-font-line-height-relative-snug);font-size:var(--calcite-font-size--1);font-weight:var(--calcite-font-weight-normal)}.esri-feature-form__text-element a{transition:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start inset-size,opacity,outline-color,transform var(--calcite-animation-timing) ease-in-out 0s,outline 0s,outline-offset 0s;background-color:var(--calcite-color-background);background-image:linear-gradient(currentColor,currentColor),linear-gradient(var(--calcite-color-brand-underline),var(--calcite-color-brand-underline));color:var(--calcite-color-text-link);background-position-x:0%,100%;background-position-y:min(1.5em,100%);background-repeat:no-repeat,no-repeat;background-size:0% 1px,100% 1px;border-style:none;padding:0;text-decoration:none;display:inline;position:relative}.esri-feature-form__text-element a:hover,.esri-feature-form__text-element a:focus{background-size:100% 1px,100% 1px}.esri-feature-form__text-element a:active{background-size:100% 2px,100% 2px}.esri-feature-form__text-element a.calcite--rtl{background-position:100% 100%,100% 100%}.esri-feature-form__text-element code{border:1px solid var(--calcite-color-border-3);background-color:var(--calcite-color-foreground-3);white-space:normal;word-break:break-word;color:var(--calcite-color-text-2);font-family:var(--calcite-code-family);border-radius:var(--calcite-spacing-base);padding:.25em;font-size:85%}.esri-feature-form__text-element h1,.esri-feature-form__text-element h2,.esri-feature-form__text-element h3,.esri-feature-form__text-element h4,.esri-feature-form__text-element h5{color:var(--calcite-color-text-1);line-height:var(--calcite-font-line-height-relative-snug);font-size:var(--calcite-font-size-0);font-weight:var(--calcite-font-weight-bold);margin-bottom:var(--calcite-spacing-xxs)}.esri-feature-form__text-element h5{font-weight:var(--calcite-font-weight-medium)}.esri-feature-form__text-element h6{color:var(--calcite-color-text-2);line-height:var(--calcite-font-line-height-relative-snug);font-size:var(--calcite-font-size--1);font-weight:var(--calcite-font-weight-medium);margin-bottom:var(--calcite-spacing-xxs)}.esri-feature-form__text-element p{color:var(--calcite-color-text-3);line-height:var(--calcite-font-line-height-relative-snug);font-size:var(--calcite-font-size--1);font-weight:var(--calcite-font-weight-normal);margin-bottom:var(--calcite-spacing-xl)}.esri-feature-form__text-element strong{font-weight:var(--calcite-font-weight-bold)}:dir(rtl) .esri-feature-form__date-input-part:first-child .esri-feature-form__input{border-left:none;border-right:1px solid #adadad4d}.esri-feature-form-utility-network-association-layers{background-color:var(--calcite-color-background)}.esri-feature-form-utility-network-association-layers__header>*{margin-block-end:var(--calcite-spacing-md)}.esri-feature-form-utility-network-association-layers__header>:last-child{color:var(--calcite-color-text-3)}.esri-feature-form-utility-network-association-layers__heading-content{align-items:center;display:flex}.esri-feature-form-utility-network-association-layers__heading-content calcite-icon{margin-inline-end:var(--calcite-spacing-md)}.esri-feature-form-utility-network-association-layers__list-container{min-height:var(--calcite-spacing-xxxl);margin-bottom:var(--calcite-spacing-md)}.esri-feature-form-utility-network-association-layers__feature-observer{z-index:2;text-align:center;position:relative;bottom:20px}.esri-feature-form-utility-network-association-layers__filter-container{z-index:1;margin-bottom:var(--calcite-spacing-md);top:var(--calcite-spacing-md)}.esri-feature-form-utility-network-association-layers__filter-options-container{flex-direction:column;display:flex}.esri-feature-form-utility-network-association-layers__filter-options-header{flex-direction:row;align-items:baseline;display:flex}.esri-feature-form-utility-network-association-layers__filter-options-header span{flex-grow:1}.esri-feature-form-utility-network-association-layers__spatial-select-container{flex-direction:column;align-items:flex-end;gap:6px;display:flex}.esri-feature-form-utility-network-association-layers__spatial-select-toolbar{--calcite-action-group-border-color: transparent;border-width:var(--calcite-border-width-sm, 1px);border-radius:var(--calcite-corner-radius-round, 4px);border-style:solid;border-color:var(--calcite-color-border-3, var(--calcite-color-inverse));width:100%;min-height:min-content;overflow:hidden}.esri-feature-form-utility-network-association-layers__sticky-loading-container{z-index:2;pointer-events:none;justify-content:center;align-items:center;height:var(--calcite-spacing-xxxl);margin:0;padding:0;display:flex;position:sticky;bottom:10px}.esri-feature-form-utility-network-association-layers__loading-container{justify-content:center;width:100%;padding:var(--calcite-spacing-md) 0;display:flex}.esri-feature-form-utility-network-association-list{background-color:var(--calcite-color-foreground-1)}.esri-feature-form-utility-network-association-list__header>*{margin-block-end:var(--calcite-spacing-md)}.esri-feature-form-utility-network-association-list__header>:last-child{color:var(--calcite-color-text-3)}.esri-feature-form-utility-network-association-list__header calcite-block{margin-block-start:-18px;margin-inline:-15px}.esri-feature-form-utility-network-association-list__heading-content{align-items:center;display:flex}.esri-feature-form-utility-network-association-list__heading-content calcite-icon{margin-inline-end:var(--calcite-spacing-md)}.esri-feature-form-utility-network-association-list__list-container{flex-direction:column;min-height:var(--calcite-spacing-xxxl);display:flex}.esri-feature-form-utility-network-association-list__list-container calcite-fab{margin-block:var(--calcite-spacing-md);flex-direction:row;align-self:center;display:flex}.esri-feature-form-utility-network-association-settings{--calcite-block-padding: 0;background-color:var(--calcite-color-foreground-1);flex-direction:column;display:flex}.esri-feature-form-utility-network-association-settings calcite-block{border:1px solid var(--calcite-color-border-3);margin-block:0}.esri-feature-form-utility-network-association-settings calcite-block:first-of-type{border-radius:var(--calcite-spacing-sm) var(--calcite-spacing-sm) 0 0}.esri-feature-form-utility-network-association-settings calcite-block:last-of-type{border-top:none;border-radius:0 0 var(--calcite-spacing-sm) var(--calcite-spacing-sm);margin-block-end:var(--calcite-spacing-md)}.esri-feature-form-utility-network-association-settings calcite-block calcite-label{margin-inline:var(--calcite-spacing-md)}.esri-feature-form-utility-network-association-settings__info-container{flex-direction:column;display:flex}.esri-feature-form-utility-network-association-settings__info-container>*{margin-block-end:var(--calcite-spacing-md)}.esri-feature{letter-spacing:0em;isolation:isolate;position:relative;width:100%}.esri-feature__title{word-break:break-word;word-wrap:break-word;font-size:var(--calcite-font-size);display:block}.esri-feature calcite-icon{box-sizing:content-box}.esri-feature__attachments{display:flex}.esri-feature__loading-container{justify-content:center;width:100%;padding:var(--calcite-spacing-md) 0;display:flex}.esri-feature-relationship{position:relative}.esri-feature-relationship__list{min-height:var(--calcite-spacing-xxxl)}.esri-feature-relationship__list-item--hidden{display:none}.esri-feature-utility-network-associations{position:relative}.esri-feature__filter-container{z-index:1;margin-bottom:var(--calcite-spacing-md);position:sticky;top:var(--calcite-spacing-md)}.esri-feature__feature-observer{z-index:2;text-align:center;position:relative;bottom:var(--calcite-spacing-xxl)}.esri-feature__sticky-loading-container{z-index:2;pointer-events:none;justify-content:center;align-items:center;height:var(--calcite-spacing-xxxl);margin:0;padding:0;display:flex;position:sticky;bottom:10px}.esri-icon-loading-indicator{display:inline-block}.esri-feature__content-element{margin-bottom:24px;padding:0 7px}.esri-feature__content-element .esri-widget__heading{line-height:var(--calcite-font-line-height-relative-tight)}.esri-feature__content-element:only-child,.esri-feature__content-node--text{margin-bottom:3px}.esri-feature__content-node{flex-direction:column;display:flex}.esri-feature__text{line-height:var(--calcite-font-line-height-relative-tight)}.esri-feature-attachments{flex-flow:column wrap;align-items:flex-start}.esri-feature__last-edited-info{padding-top:var(--calcite-spacing-xs);font-size:var(--calcite-font-size-sm)}:dir(rtl) .esri-feature__attachments-title{margin:0 0 0 auto}:dir(rtl) .esri-feature__attachments--list .esri-feature__attachment-item-mask{margin-left:7px;margin-right:0}.esri-feature-content__loader-container{justify-content:center;align-items:center;height:150px;padding:0;display:flex}.esri-feature-content__loader{background:url(./assets/attachments/images/loading-throb.gif) 50% no-repeat;width:100%;height:64px}.esri-feature-content{font-size:var(--calcite-font-size)}.esri-feature-content h1,.esri-feature-content h2,.esri-feature-content h3,.esri-feature-content h4,.esri-feature-content h5,.esri-feature-content h6{letter-spacing:0;color:var(--calcite-color-text-2);margin:.5em 0;font-weight:var(--calcite-font-weight-semibold);line-height:normal}.esri-feature-content h1{font-size:1.75em}.esri-feature-content h2{font-size:1.5em}.esri-feature-content h3{font-size:1.25em}.esri-feature-content h4,.esri-feature-content h5,.esri-feature-content h6{font-size:1em}.esri-widget__heading.esri-feature-element-info__title{color:var(--calcite-color-text-2);margin-top:0;margin-bottom:.2em;font-size:var(--calcite-font-size-xl);font-weight:var(--calcite-font-weight-normal)}.esri-feature-element-info__description{margin-bottom:var(--calcite-font-size-xs);font-size:var(--calcite-font-size-sm);font-weight:var(--calcite-font-weight-normal)}.esri-feature-content p{margin:0 0 1.2em;font-size:var(--calcite-font-size)}.esri-feature-content p:last-child{margin-block-end:0}.esri-feature-content img{image-orientation:from-image;max-width:100%;max-height:100%}.esri-feature-content video{max-width:100%;max-height:100%}.esri-feature-content figure{margin:0;padding:0}.esri-feature-content figcaption{margin:.2em 0 0;padding:0;font-size:var(--calcite-font-size-sm);font-style:italic;display:block}.esri-feature-content ul,.esri-feature-content ol{margin-block:1rem}.esri-feature-content ul:first-child,.esri-feature-content ol:first-child{margin-block-start:0}.esri-feature-content a{color:var(--calcite-color-text-3)}.esri-feature-content a:hover,.esri-feature-content a:focus{color:var(--calcite-color-text-2)}.esri-features{--calcite-color-background: $background-color;flex-direction:column;display:flex}.esri-features img{image-orientation:from-image}.esri-features__flow-item--collapsed{--calcite-flow-item-header-border-block-end: none}.esri-features__container{background-color:var(--calcite-color-background)}.esri-features__container:not(:empty){padding:var(--calcite-spacing-md)}.esri-features .esri-feature,.esri-features .esri-feature-relationship,.esri-features .esri-feature-utility-network-associations{background-color:#0000}.esri-features__heading{word-break:break-word;word-wrap:break-word}.esri-features__header,.esri-features__footer{background-color:var(--calcite-color-foreground-1);flex:1;justify-content:flex-end;align-items:center;display:flex}.esri-features__pagination-text{padding-inline:var(--calcite-spacing-sm);color:var(--calcite-color-text-3);font-size:var(--calcite-font-size-sm)}.esri-features__loader{align-self:center;padding-inline:1rem}.esri-features__pagination-action-bar{flex:1}.esri-features__pagination-menu-button{border-inline-start:1px solid var(--calcite-color-border-3)}.esri-features__icon{flex:0 0 var(--calcite-spacing-lg);width:var(--calcite-spacing-lg);height:var(--calcite-spacing-lg);display:inline-block}.esri-features__action-image{background-position:50%;background-repeat:no-repeat;background-size:contain;flex:0 0 var(--calcite-spacing-lg);width:var(--calcite-spacing-lg);height:var(--calcite-spacing-lg)}.esri-features__header{border-block-end:1px solid var(--calcite-color-border-3)}.esri-features__content-feature{--calcite-flow-item-footer-padding: 0}.esri-features__feature-menu-observer{z-index:2;text-align:center;position:relative;bottom:20px}.esri-features__action--exit{transform:scaleX(-1)}.esri-feature-media__container{flex-flow:wrap;align-items:center;width:100%;min-height:150px;margin-top:var(--calcite-spacing-xs);display:flex}.esri-feature-media__container .esri-feature-media__pagination-button{cursor:pointer;color:var(--calcite-color-text-3);background:0 0;border:none;justify-content:center;align-items:center;padding-block:var(--calcite-spacing-xs);padding-inline:var(--calcite-spacing-sm);display:flex}.esri-feature-media__container .esri-feature-media__pagination-button:hover,.esri-feature-media__container .esri-feature-media__pagination-button:focus{color:var(--calcite-color-text-2);fill:var(--calcite-color-text-2);background-color:var(--calcite-color-foreground-2)}.esri-feature-media__item-title{margin:0;font-size:var(--calcite-font-size-md)}.esri-feature-media__item-caption{padding-block-start:3px;font-size:var(--calcite-font-size-sm)}.esri-feature-media__item{justify-content:center;align-items:flex-start;width:100%;height:auto;margin-block:var(--calcite-spacing-xs);display:flex}.esri-feature-media__item-navigation{flex:0 100%;justify-content:space-between;align-items:flex-start;margin-block-end:var(--calcite-spacing-xs);display:flex}.esri-feature-media__item-text{margin-inline-end:var(--calcite-spacing-md)}.esri-feature-media__pagination{flex:none;align-items:center;display:flex;overflow:hidden}.esri-feature-media__pagination:only-child{margin-inline-start:auto}.esri-feature-media__pagination-text{color:var(--calcite-color-text-3);padding-inline:var(--calcite-spacing-base);font-size:var(--calcite-font-size-sm)}.esri-feature-media__item-container{flex:0 auto;width:100%}.esri-feature-media__item-container img{max-width:100%}.esri-feature-media__item-container img[src$=".SVG"],.esri-feature-media__item-container img[src$=".svg"]{width:100%}.esri-feature-media__chart{background-color:var(--calcite-color-foreground-1);width:100%;height:155px}:dir(rtl) .esri-feature-media__image-summary{margin:0 .5em 0 0}:dir(rtl) .esri-feature-media__pagination-icon{transform:rotate(180deg)}.esri-identity-modal__info,.esri-identity-modal__notice{margin:0;margin-bottom:var(--calcite-spacing-md)}.esri-ui .esri-popup{z-index:1;pointer-events:none;flex-flow:column;display:flex;position:absolute}.esri-ui .esri-popup .esri-features{flex:1;width:100%}.esri-ui .esri-popup .esri-widget__heading{margin:0}.esri-ui .esri-popup--hidden{display:none}.esri-popup--shadow{box-shadow:0 1px 4px #000c}.esri-popup--aligned-top-center{transform-origin:50% 100%}.esri-popup--aligned-bottom-center{transform-origin:50% -5%}.esri-popup--aligned-top-left,.esri-popup--aligned-bottom-left{transform-origin:100%}.esri-popup--aligned-top-right,.esri-popup--aligned-bottom-right{transform-origin:-5%}.esri-popup--aligned-top-center,.esri-popup--aligned-top-left,.esri-popup--aligned-top-right{animation:.2s ease-in-out popup-intro-animation-down}.esri-popup--aligned-bottom-center,.esri-popup--aligned-bottom-left,.esri-popup--aligned-bottom-right{animation:.2s ease-in-out popup-intro-animation-up}.esri-popup__main-container{z-index:1;pointer-events:auto;background-color:var(--calcite-color-foreground-1);width:340px;min-height:48px;max-height:340px;display:flex;position:relative;overflow:hidden}.esri-popup__pointer{width:0;height:0;position:absolute}.esri-popup__pointer-direction{content:"";background-color:var(--calcite-color-foreground-1);width:var(--calcite-spacing-md);height:var(--calcite-spacing-md);position:absolute}.esri-popup--aligned-top-center .esri-popup__pointer{margin:0 0 0 -6px;top:100%;left:50%}.esri-popup--aligned-bottom-center .esri-popup__pointer{margin:0 0 0 -6px;bottom:100%;left:50%}.esri-popup--aligned-top-left .esri-popup__pointer{bottom:var(--calcite-spacing-xs);right:var(--calcite-spacing-xs);transform:rotate(-45deg)}.esri-popup--aligned-bottom-left .esri-popup__pointer{top:var(--calcite-spacing-xs);right:var(--calcite-spacing-xs);transform:rotate(45deg)}.esri-popup--aligned-top-right .esri-popup__pointer{bottom:var(--calcite-spacing-xs);left:var(--calcite-spacing-xs);transform:rotate(45deg)}.esri-popup--aligned-bottom-right .esri-popup__pointer{top:var(--calcite-spacing-xs);left:var(--calcite-spacing-xs);transform:rotate(-45deg)}.esri-popup--aligned-top-center .esri-popup__pointer-direction,.esri-popup--aligned-bottom-center .esri-popup__pointer-direction{transform:scale(.75,2) rotate(45deg)}.esri-popup--aligned-top-left .esri-popup__pointer-direction,.esri-popup--aligned-bottom-left .esri-popup__pointer-direction,.esri-popup--aligned-top-right .esri-popup__pointer-direction,.esri-popup--aligned-bottom-right .esri-popup__pointer-direction{top:-6px;left:-6px;transform:scaleY(3.5) rotate(45deg)}.esri-popup--aligned-top-center .esri-popup__pointer-direction{top:-6px;left:0}.esri-popup--aligned-bottom-center .esri-popup__pointer-direction{bottom:-6px;left:0}.esri-view-width-xlarge .esri-popup__main-container{width:460px}.esri-view-width-large .esri-popup__main-container{width:400px}.esri-view-width-medium .esri-popup__main-container{width:340px}.esri-view-width-less-than-medium .esri-popup__main-container{width:280px}.esri-view-width-xsmall .esri-popup--is-docked-bottom-center{margin-bottom:var(--calcite-spacing-xl)}.esri-view-width-xsmall .esri-popup--is-docked-top-center,.esri-view-width-xsmall .esri-popup--is-docked-bottom-center{width:auto;margin:0}.esri-view-width-xsmall .esri-popup--is-docked-top-center .esri-popup__main-container,.esri-view-width-xsmall .esri-popup--is-docked-bottom-center .esri-popup__main-container{width:100%;max-height:75%;position:absolute;left:0;right:0}.esri-view-width-xsmall .esri-popup--is-docked-bottom-center .esri-popup__main-container{bottom:0}.esri-view-width-xsmall .esri-popup--is-docked-top-center .esri-popup__main-container{top:0}.esri-view-height-xlarge .esri-popup__main-container{max-height:460px}.esri-view-height-xlarge.esri-popup--feature-menu-open .esri-popup__feature-menu-viewport{max-height:410px}.esri-view-height-large .esri-popup__main-container{max-height:400px}.esri-view-height-large.esri-popup--feature-menu-open .esri-popup__feature-menu-viewport{max-height:350px}.esri-view-height-less-than-medium .esri-popup__main-container{max-height:300px}.esri-view-height-less-than-medium.esri-popup--feature-menu-open .esri-popup__feature-menu-viewport{max-height:250px}.esri-popup--is-docked{margin:15px 15px 30px;animation:.25s ease-out esri-docking-animation;inset:0}.esri-ui .esri-popup--is-docked{flex-flow:row}.esri-popup--is-docked-top-left,.esri-popup--is-docked-top-center,.esri-popup--is-docked-top-right{align-items:flex-start}.esri-popup--is-docked-bottom-left,.esri-popup--is-docked-bottom-center,.esri-popup--is-docked-bottom-right{align-items:flex-end}.esri-popup--is-docked-top-left,.esri-popup--is-docked-bottom-left{justify-content:flex-start}.esri-popup--is-docked-top-center,.esri-popup--is-docked-bottom-center{justify-content:center}.esri-popup--is-docked-top-right,.esri-popup--is-docked-bottom-right{justify-content:flex-end}.esri-popup--is-docked-top-left .esri-popup__main-container,.esri-popup--is-docked-top-right .esri-popup__main-container,.esri-popup--is-docked-bottom-left .esri-popup__main-container,.esri-popup--is-docked-bottom-right .esri-popup__main-container{max-height:80%}.esri-popup--is-docked-top-center .esri-popup__main-container,.esri-popup--is-docked-bottom-center .esri-popup__main-container{max-height:40%}@media (prefers-reduced-motion){.esri-popup--aligned-top-center,.esri-popup--aligned-top-left,.esri-popup--aligned-top-right,.esri-popup--aligned-bottom-center,.esri-popup--aligned-bottom-left,.esri-popup--aligned-bottom-right,.esri-popup--is-docked{animation:none}}.esri-tooltip{--calcite-input-padding-inline: .5rem;--calcite-input-height: 1.5rem;--field-height: .875rem;--field-height--input: var(--calcite-input-height);--field-row-gap: 1px;--field-column-gap: var(--calcite-app-spacing-2);--field-input-width: 6.5rem;--field-title-extra-margin: var(--calcite-app-spacing-6);--field-title-color: var(--calcite-color-text-2);--field-value-color: var(--calcite-color-text-1);--font-size: var(--calcite-font-size--3);--font-size--input: var(--calcite-font-size--2);--content-padding-inline: var(--calcite-app-spacing-2);--content-padding-block: var(--calcite-app-spacing-2);--help-message-border-spacing: var(--calcite-app-spacing-2);--help-message-min-width: 7rem;--icon-size--feedback: .625rem;z-index:1;will-change:transform;width:fit-content;position:absolute;top:0;left:0;overflow:visible}.esri-tooltip-content{gap:var(--content-padding-block);border:solid 1px var(--calcite-color-border-3);padding-block:var(--content-padding-block);padding-inline:var(--content-padding-inline);color:var(--calcite-color-text-2);width:min-content;line-height:var(--calcite-font-line-height-relative-tight);font-size:var(--font-size);-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);touch-action:none;view-transition-name:tooltip-content;background:var(--calcite-color-foreground-2);border-radius:.25rem;flex-direction:column;display:flex;position:relative;box-shadow:0 6px 20px -4px #0000001a,0 4px 12px -2px #00000014;outline:none!important}.esri-tooltip-content:empty{opacity:0}.esri-tooltip-content__header{margin-block-start:calc(var(--content-padding-block) * -1);margin-inline:calc(var(--content-padding-inline) * -1);border-block-end:solid 1px var(--calcite-color-border-3);justify-content:flex-start;block-size:24px;padding-block-end:0;display:flex}.esri-tooltip-content__header__spacer{flex-grow:1;flex-shrink:1}.esri-tooltip-content__header__actions{flex-grow:0;flex-shrink:0;padding-inline-end:var(--content-padding-inline)}.esri-tooltip-content__header calcite-button{--calcite-offset-invert-focus: 1}.esri-tooltip-content--input{--field-height: var(--field-height--input);background:var(--calcite-color-foreground-1);pointer-events:all;-webkit-backdrop-filter:none;backdrop-filter:none}.esri-tooltip-content--input:not(:focus-within){opacity:.8}.esri-tooltip.calcite-mode-dark .esri-tooltip-content,.esri-tooltip.calcite-mode-dark .esri-tooltip-content--input{background:var(--calcite-color-foreground-1)}.esri-tooltip-table{grid-gap:var(--field-row-gap) var(--field-column-gap);grid-template-columns:max-content 1fr max-content max-content;align-items:flex-start;width:max-content;display:grid}.esri-tooltip-field{display:contents}.esri-tooltip-field__title,.esri-tooltip-field__value{block-size:var(--field-height);white-space:nowrap;color:var(--calcite-color-text-3);justify-content:flex-start;align-items:center;display:flex}.esri-tooltip-field__title{color:var(--field-title-color);margin-inline-end:var(--field-title-extra-margin)}.esri-tooltip-field__value{color:var(--field-value-color);grid-column:span 3}.esri-tooltip-editable-field{display:contents}.esri-tooltip-editable-field__title,.esri-tooltip-editable-field__value{block-size:var(--field-height);white-space:nowrap;justify-content:flex-start;align-items:center}.esri-tooltip-editable-field__title{display:flex}.esri-tooltip-editable-field__value{font-variant-numeric:tabular-nums;display:contents}.esri-tooltip-editable-field__value__content{grid-column:span 3;align-items:center;min-width:max-content;display:flex}.esri-tooltip-editable-field__value__content--read-only{padding-inline:var(--calcite-input-padding-inline);block-size:var(--calcite-input-height);line-height:var(--calcite-input-height);font-size:var(--calcite-font-size--2)}.esri-tooltip-editable-field--feedback.esri-tooltip-editable-field--locked .esri-tooltip-editable-field__value__content{grid-column:span 2}.esri-tooltip-editable-field--feedback .esri-tooltip-editable-field__title{color:var(--field-title-color);margin-inline-end:var(--field-title-extra-margin)}.esri-tooltip-editable-field--feedback .esri-tooltip-editable-field__value__content{color:var(--field-value-color);align-self:center}.esri-tooltip-editable-field--feedback .esri-tooltip-editable-field__lock-icon{width:var(--icon-size--feedback);min-width:var(--icon-size--feedback);height:var(--icon-size--feedback);min-height:var(--icon-size--feedback);align-self:center;margin-top:-2px}.esri-tooltip-editable-field--input{padding:0}.esri-tooltip-editable-field--input .esri-tooltip-editable-field__title{font-size:var(--font-size--input)}.esri-tooltip-editable-field__input-wrapper{inline-size:var(--field-input-width)}.esri-tooltip-editable-field__input-message{text-wrap:auto;width:100%;margin-block-end:var(--calcite-input-message-spacing-value)}.esri-tooltip-editable-field__input-suffix{line-height:var(--field-height--input)}.esri-tooltip-editable-field__button{width:var(--field-height--input)}.esri-tooltip-value-by-value span:nth-child(2){margin-inline:7px}.esri-tooltip-help-message{gap:var(--calcite-app-spacing-2);margin-inline:calc(var(--content-padding-inline) * -1);border-block-start:solid 1px var(--calcite-color-border-3);padding-block-start:var(--content-padding-inline);padding-inline:var(--content-padding-inline);width:auto;min-width:var(--help-message-min-width);text-align:left;text-wrap:balance;white-space:break-spaces;font-size:var(--font-size);border-block-end:1px solid var(--calcite-color-foreground-1);justify-content:center;align-items:center;display:flex}.esri-tooltip-help-message:only-child{border-block:none;padding-block-start:var(--field-row-gap)}.esri-tooltip-help-message__icon{color:var(--calcite-color-status-info)}.esri-tooltip-help-message__text{padding-block-start:2px}.esri-tooltip ::view-transition-old(tooltip-content){animation-duration:.1s}.esri-tooltip ::view-transition-new(tooltip-content){animation-duration:.1s}.esri-tooltip{--offset-start: calc(-100% - var(--offset))}.esri-tooltip--debug:after{--size: 10px;margin-top:calc(var(--size) * -.5);margin-left:calc(var(--size) * -.5);width:var(--size);height:var(--size);content:"";background:var(--calcite-color-status-danger);position:absolute;top:0;left:0}.esri-tooltip--bottom .esri-tooltip-content{transform:translate(-50%,var(--offset))}.esri-tooltip--bottom-left.esri-tooltip--ltr .esri-tooltip-content,.esri-tooltip--bottom-right.esri-tooltip--rtl .esri-tooltip-content,.esri-tooltip--bottom-start.esri-tooltip--ltr .esri-tooltip-content,.esri-tooltip--bottom-end.esri-tooltip--rtl .esri-tooltip-content{transform:translate(var(--offset-start),var(--offset))}.esri-tooltip--bottom-right.esri-tooltip--ltr .esri-tooltip-content,.esri-tooltip--bottom-left.esri-tooltip--rtl .esri-tooltip-content,.esri-tooltip--bottom-start.esri-tooltip--rtl .esri-tooltip-content,.esri-tooltip--bottom-end.esri-tooltip--ltr .esri-tooltip-content{transform:translate(var(--offset),var(--offset))}.esri-tooltip--leading.esri-tooltip--ltr .esri-tooltip-content,.esri-tooltip--trailing.esri-tooltip--rtl .esri-tooltip-content{transform:translate(var(--offset-start),-50%)}.esri-tooltip--leading-start.esri-tooltip--ltr .esri-tooltip-content,.esri-tooltip--trailing-start.esri-tooltip--rtl .esri-tooltip-content{transform:translate(var(--offset-start),var(--offset-start))}.esri-tooltip--leading-end.esri-tooltip--ltr .esri-tooltip-content,.esri-tooltip--trailing-end.esri-tooltip--rtl .esri-tooltip-content{transform:translate(var(--offset-start),var(--offset))}.esri-tooltip--top .esri-tooltip-content{transform:translate(-50%,var(--offset-start))}.esri-tooltip--top-left.esri-tooltip--ltr .esri-tooltip-content,.esri-tooltip--top-right.esri-tooltip--rtl .esri-tooltip-content,.esri-tooltip--top-start.esri-tooltip--ltr .esri-tooltip-content,.esri-tooltip--top-end.esri-tooltip--rtl .esri-tooltip-content{transform:translate(var(--offset-start),var(--offset-start))}.esri-tooltip--top-right.esri-tooltip--ltr .esri-tooltip-content,.esri-tooltip--top-left.esri-tooltip--rtl .esri-tooltip-content,.esri-tooltip--top-start.esri-tooltip--rtl .esri-tooltip-content,.esri-tooltip--top-end.esri-tooltip--ltr .esri-tooltip-content{transform:translate(var(--offset),var(--offset-start))}.esri-tooltip--trailing.esri-tooltip--ltr .esri-tooltip-content,.esri-tooltip--leading.esri-tooltip--rtl .esri-tooltip-content{transform:translate(var(--offset),-50%)}.esri-tooltip--trailing-start.esri-tooltip--ltr .esri-tooltip-content,.esri-tooltip--leading-start.esri-tooltip--rtl .esri-tooltip-content{transform:translate(var(--offset),var(--offset-start))}.esri-tooltip--trailing-end.esri-tooltip--ltr .esri-tooltip-content,.esri-tooltip--leading-end.esri-tooltip--rtl .esri-tooltip-content{transform:translate(var(--offset),var(--offset))}`;/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.7 */const _a="arcgis-map",nn={base:_a,containerUI:`${_a}-container-ui`,containerElement:`${_a}-container-ui__element`,containerElementDefaultSlot:`${_a}-container-ui__element-default`,containerElementPopupSlot:`${_a}-container-ui__element-popup`,containerTopLeftColumn:`${_a}-container-ui__top-left-column`,containerTopRightColumn:`${_a}-container-ui__top-right-column`,containerBottomLeftRow:`${_a}-container-ui__bottom-left-row`,containerBottomRightRow:`${_a}-container-ui__bottom-right-row`,containerElementTopLeft:`${_a}-container-ui__element-top-left`,containerElementTopRight:`${_a}-container-ui__element-top-right`,containerElementBottomLeft:`${_a}-container-ui__element-bottom-left`,containerElementBottomRight:`${_a}-container-ui__element-bottom-right`,containerElementTopStart:`${_a}-container-ui__element-top-start`,containerElementTopEnd:`${_a}-container-ui__element-top-end`,containerElementBottomStart:`${_a}-container-ui__element-bottom-start`,containerElementBottomEnd:`${_a}-container-ui__element-bottom-end`},Zl={topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",topStart:"top-start",topEnd:"top-end",bottomStart:"bottom-start",bottomEnd:"bottom-end",popup:"popup"};function fit(t,e,i){return q`<div class=${H({[nn.containerElementPopupSlot]:!0})}><slot name=${Zl.popup} @slotchange=${e}></slot></div><div class=${H({[nn.containerElementDefaultSlot]:!0})}>${i}<slot></slot></div><div class=${H({[nn.containerTopLeftColumn]:!0})}><div class=${H({[nn.containerElement]:!0,[nn.containerElementTopLeft]:!0})}><slot name=${Zl.topLeft}></slot></div><div class=${H({[nn.containerElement]:!0,[nn.containerElementTopStart]:!0})}><slot name=${t==="ltr"?Zl.topStart:Zl.topEnd}></slot></div></div><div class=${H({[nn.containerTopRightColumn]:!0})}><div class=${H({[nn.containerElement]:!0,[nn.containerElementTopRight]:!0})}><slot name=${Zl.topRight}></slot></div><div class=${H({[nn.containerElement]:!0,[nn.containerElementTopEnd]:!0})}><slot name=${t==="ltr"?Zl.topEnd:Zl.topStart}></slot></div></div><div class=${H({[nn.containerBottomLeftRow]:!0})}><div class=${H({[nn.containerElement]:!0,[nn.containerElementBottomLeft]:!0})}><slot name=${Zl.bottomLeft}></slot></div><div class=${H({[nn.containerElement]:!0,[nn.containerElementBottomStart]:!0})}><slot name=${t==="ltr"?Zl.bottomStart:Zl.bottomEnd}></slot></div></div><div class=${H({[nn.containerBottomRightRow]:!0})}><div class=${H({[nn.containerElement]:!0,[nn.containerElementBottomRight]:!0})}><slot name=${Zl.bottomRight}></slot></div><div class=${H({[nn.containerElement]:!0,[nn.containerElementBottomEnd]:!0})}><slot name=${t==="ltr"?Zl.bottomEnd:Zl.bottomStart}></slot></div></div>`}const mit=ct`:host{--arcgis-internal-color-black-30: color-mix(in srgb, #000000 30.2%, transparent);--arcgis-internal-box-shadow: var(--calcite-spacing-none) var(--calcite-spacing-px) var(--calcite-spacing-base) var(--arcgis-internal-color-black-30);--arcgis-internal-top-max-width: calc(min(100cqw, 100vw) - var(--calcite-spacing-xxxl));--arcgis-internal-panel-width: 300px;--arcgis-internal-panel-height: 100%;--arcgis-internal-panel-height-sm: 240px;--arcgis-internal-panel-height-md: 420px;--arcgis-internal-panel-height-lg: 540px;--arcgis-internal-panel-height-xl: 680px;--arcgis-internal-basemap-gallery-width-lg: 450px;--arcgis-expand-max-height: var(--calcite-spacing-xxxl);--arcgis-collapse-icon-flip: scaleX(1);--arcgis-row-direction: row;--arcgis-legend-internal-width: 300px;--arcgis-layout-overlay-space-top: 0px;--arcgis-layout-overlay-space-bottom: 0px;--arcgis-layout-overlay-space-left: 0px;--arcgis-layout-overlay-space-right: 0px;--arcgis-internal-sketch-justify-content: flex-start}:host{display:block;position:relative;height:100%;width:100%;padding:var(--calcite-spacing-none);margin:var(--calcite-spacing-none);container:arcgis-map-container/size;contain:layout}::slotted(:is([closed],[closed="true"])){display:none}:dir(rtl) ::slotted(:not(arcgis-swipe)){direction:rtl}::slotted(:is(arcgis-area-measurement-2d,arcgis-area-measurement-3d,arcgis-attachments,arcgis-basemap-gallery,arcgis-basemap-layer-list,arcgis-bookmarks,arcgis-building-explorer,arcgis-catalog-layer-list,arcgis-coordinate-conversion,arcgis-daylight,arcgis-directions,arcgis-direct-line-measurement-3d,arcgis-distance-measurement-2d,arcgis-editor,arcgis-elevation-profile,arcgis-expand,arcgis-feature-form,arcgis-features,arcgis-feature-table,arcgis-fullscreen,arcgis-grid-controls,arcgis-home,arcgis-layer-list,arcgis-legend,arcgis-line-of-sight,arcgis-link-chart-layout-switcher,arcgis-locate,arcgis-measurement,arcgis-navigation-toggle,arcgis-oriented-imagery-viewer,arcgis-print,arcgis-search,arcgis-shadow-cast,arcgis-slice,arcgis-table-list,arcgis-time-slider,arcgis-time-zone-label,arcgis-track,arcgis-utility-network-associations,arcgis-utility-network-trace,arcgis-utility-network-validate-topology,arcgis-version-management,arcgis-video-player,arcgis-weather,arcgis-zoom)){box-shadow:var(--arcgis-internal-box-shadow)}::slotted(:is(arcgis-area-measurement-2d,arcgis-area-measurement-3d,arcgis-basemap-gallery,arcgis-basemap-layer-list,arcgis-bookmarks,arcgis-building-explorer,arcgis-catalog-layer-list,arcgis-directions,arcgis-direct-line-measurement-3d,arcgis-distance-measurement-2d,arcgis-editor,arcgis-feature-form,arcgis-features,arcgis-layer-list,arcgis-line-of-sight,arcgis-print,arcgis-shadow-cast,arcgis-slice,arcgis-table-list,arcgis-utility-network-trace,arcgis-grid-controls)){width:var(--arcgis-internal-panel-width);min-width:var(--calcite-spacing-xxxl);min-height:var(--calcite-spacing-xxxl);transition:max-height .25s ease-in-out;overflow-y:auto}.arcgis-map-container-ui{position:absolute;inset:var(--calcite-spacing-none);padding:var(--calcite-spacing-none);z-index:var(--calcite-z-index);pointer-events:none;background:none}.arcgis-map-container-ui__element{display:flex;flex-direction:column;pointer-events:none;width:max-content;max-width:100%}.arcgis-map-container-ui__element .esri-widget--panel{min-width:var(--arcgis-internal-panel-width)}.arcgis-map-container-ui__element-popup,.arcgis-map-container-ui__element-default{pointer-events:none;max-width:100%;position:absolute;display:block;inset:var(--calcite-spacing-none);width:100%;::slotted(:not(arcgis-swipe)){pointer-events:auto}}.arcgis-map-container-ui__top-left-column{position:absolute;top:var(--calcite-spacing-none);left:var(--calcite-spacing-none);display:flex;flex-direction:column;justify-content:flex-start;align-items:flex-start;margin-top:var(--calcite-spacing-lg);margin-left:var(--calcite-spacing-lg);padding-top:var(--arcgis-layout-overlay-space-top);padding-left:var(--arcgis-layout-overlay-space-left);::slotted(*){max-width:var(--arcgis-internal-top-max-width)}::slotted(arcgis-sketch[layout="vertical"]){--sketch-pad-flex-flow: column wrap}}.arcgis-map-container-ui__top-left-column:dir(rtl){align-items:flex-end;::slotted(arcgis-floor-filter){--arcgis-row-direction: row-reverse}}.arcgis-map-container-ui__top-right-column{position:absolute;top:var(--calcite-spacing-none);right:var(--calcite-spacing-none);display:flex;flex-direction:column;align-items:flex-end;margin-top:var(--calcite-spacing-lg);margin-right:var(--calcite-spacing-lg);padding-top:var(--arcgis-layout-overlay-space-top);padding-right:var(--arcgis-layout-overlay-space-right);::slotted(*){max-width:var(--arcgis-internal-top-max-width)}::slotted(arcgis-expand){--arcgis-internal-sketch-justify-content: flex-end}}.arcgis-map-container-ui__top-right-column:dir(rtl){align-items:flex-start;::slotted(arcgis-floor-filter){--arcgis-row-direction: row}}.arcgis-map-container-ui__element-top-left{top:var(--calcite-spacing-none);left:var(--calcite-spacing-none);display:flex;justify-content:flex-start;align-items:flex-start;::slotted(arcgis-expand){--arcgis-expand-icon-number-left: none;--arcgis-expand-icon-number-right: calc(-1 * var(--calcite-spacing-xs))}::slotted(:is(arcgis-floor-filter,arcgis-expand)){--arcgis-collapse-icon-flip: scaleX(-1)}::slotted(arcgis-sketch){--sketch-pad-flex-flow: wrap}::slotted(*){margin-bottom:var(--calcite-spacing-sm-plus)}}.arcgis-map-container-ui__element-top-left:dir(rtl){align-items:flex-end}.arcgis-map-container-ui__element-top-right{position:relative;justify-content:flex-start;align-items:flex-end;margin-left:auto;::slotted(arcgis-expand){--arcgis-expand-icon-number-left: calc(-1 * var(--calcite-spacing-xs));--arcgis-expand-icon-number-right: none}::slotted(arcgis-floor-filter){--arcgis-row-direction: row-reverse}::slotted(arcgis-sketch){--sketch-pad-flex-flow: row-reverse wrap}::slotted(arcgis-sketch[layout="vertical"]){--sketch-pad-flex-flow: column wrap-reverse}::slotted(*){margin-bottom:var(--calcite-spacing-sm-plus)}}.arcgis-map-container-ui__element-top-right:dir(rtl){align-items:flex-start}.arcgis-map-container-ui__element-top-start{position:relative;justify-content:flex-start;align-items:flex-start;::slotted(arcgis-expand){--arcgis-expand-icon-number-left: none;--arcgis-expand-icon-number-right: calc(-1 * var(--calcite-spacing-xs))}::slotted(arcgis-sketch[layout="vertical"]){--sketch-pad-flex-flow: column wrap}::slotted(:is(arcgis-floor-filter,arcgis-expand)){--arcgis-collapse-icon-flip: scaleX(-1)}::slotted(*){margin-bottom:var(--calcite-spacing-sm-plus)}}.arcgis-map-container-ui__element-top-start:dir(rtl){align-items:flex-end;--arcgis-internal-sketch-justify-content: flex-start;::slotted(arcgis-sketch){--sketch-pad-flex-flow: row-reverse wrap-reverse}}.arcgis-map-container-ui__element-top-end{position:relative;justify-content:flex-start;align-items:flex-end;::slotted(arcgis-expand){--arcgis-expand-icon-number-left: calc(-1 * var(--calcite-spacing-xs));--arcgis-expand-icon-number-right: none}::slotted(arcgis-floor-filter){--arcgis-row-direction: row-reverse}::slotted(arcgis-sketch){--sketch-pad-flex-flow: row-reverse wrap}::slotted(arcgis-sketch[layout="vertical"]){--sketch-pad-flex-flow: column wrap-reverse}::slotted(*){margin-bottom:var(--calcite-spacing-sm-plus)}}.arcgis-map-container-ui__element-top-end:dir(rtl){align-items:flex-start;--arcgis-internal-sketch-justify-content: flex-end}.arcgis-map-container-ui__bottom-left-row{position:absolute;bottom:var(--calcite-spacing-none);left:var(--calcite-spacing-none);display:flex;flex-direction:row;align-items:flex-end;max-width:100%;margin-left:var(--calcite-spacing-lg);margin-bottom:var(--calcite-spacing-xxxl);padding-left:var(--arcgis-layout-overlay-space-left);padding-bottom:var(--arcgis-layout-overlay-space-bottom);::slotted(:last-child){margin-right:var(--calcite-spacing-xxl)}::slotted(arcgis-floor-filter){--arcgis-internal-floor-filter-column-direction: column-reverse;--arcgis-internal-floor-filter-button-border-width: 0 0 1px}::slotted(*){max-width:var(--arcgis-internal-top-max-width)}}.arcgis-map-container-ui__bottom-left-row:dir(rtl){flex-direction:row-reverse;::slotted(arcgis-floor-filter){--arcgis-row-direction: row-reverse}}.arcgis-map-container-ui__bottom-right-row{position:absolute;bottom:var(--calcite-spacing-none);right:var(--calcite-spacing-none);display:flex;flex-direction:row-reverse;align-items:flex-end;max-width:100%;margin-right:var(--calcite-spacing-lg);margin-bottom:var(--calcite-spacing-xxxl);padding-right:var(--arcgis-layout-overlay-space-right);padding-bottom:var(--arcgis-layout-overlay-space-bottom);::slotted(:last-child){margin-left:var(--calcite-spacing-xxl)}::slotted(arcgis-floor-filter){--arcgis-internal-floor-filter-column-direction: column-reverse;--arcgis-internal-floor-filter-button-border-width: 0 0 1px}::slotted(*){max-width:var(--arcgis-internal-top-max-width)}::slotted(arcgis-expand){--arcgis-internal-sketch-justify-content: flex-end}::slotted(arcgis-sketch[layout="vertical"]){--sketch-pad-flex-flow: column-reverse wrap-reverse}}.arcgis-map-container-ui__bottom-right-row:dir(rtl){flex-direction:row;::slotted(arcgis-floor-filter){--arcgis-row-direction: row}}.arcgis-map-container-ui__element-bottom-left{bottom:var(--calcite-spacing-none);left:var(--calcite-spacing-none);display:flex;flex-direction:column;align-items:flex-end;justify-content:flex-end;flex-flow:row;::slotted(arcgis-coordinate-conversion){--arcgis-coordinate-conversion-flex-direction: column-reverse}::slotted(arcgis-expand){--arcgis-expand-icon-number-left: none;--arcgis-expand-icon-number-right: calc(-1 * var(--calcite-spacing-xs))}::slotted(:is(arcgis-floor-filter,arcgis-expand)){--arcgis-collapse-icon-flip: scaleX(-1)}::slotted(arcgis-sketch){--sketch-pad-flex-flow: wrap-reverse}::slotted(arcgis-sketch[layout="vertical"]){--sketch-pad-flex-flow: column-reverse wrap}::slotted(arcgis-floor-filter){--arcgis-floor-filter-align-items: flex-end}::slotted(*){margin-right:var(--calcite-spacing-sm-plus)}}.arcgis-map-container-ui__element-bottom-right{bottom:var(--calcite-spacing-none);right:var(--calcite-spacing-none);align-items:flex-end;justify-content:flex-end;margin-left:auto;flex-flow:row-reverse;::slotted(arcgis-coordinate-conversion){--arcgis-coordinate-conversion-flex-direction: column-reverse}::slotted(arcgis-expand){--arcgis-expand-icon-number-left: calc(-1 * var(--calcite-spacing-xs));--arcgis-expand-icon-number-right: none}::slotted(arcgis-sketch){--sketch-pad-flex-flow: row-reverse wrap-reverse}::slotted(arcgis-sketch[layout="vertical"]){--sketch-pad-flex-flow: column-reverse wrap-reverse}::slotted(arcgis-floor-filter){--arcgis-floor-filter-align-items: flex-end;--arcgis-row-direction: row-reverse}::slotted(*){margin-left:var(--calcite-spacing-sm-plus)}}.arcgis-map-container-ui__element-bottom-start{bottom:var(--calcite-spacing-none);left:var(--calcite-spacing-none);display:flex;flex-direction:column;align-items:flex-end;justify-content:flex-end;flex-flow:row;::slotted(arcgis-coordinate-conversion){--arcgis-coordinate-conversion-flex-direction: column-reverse}::slotted(arcgis-expand){--arcgis-expand-icon-number-left: none;--arcgis-expand-icon-number-right: calc(-1 * var(--calcite-spacing-xs))}::slotted(:is(arcgis-floor-filter,arcgis-expand)){--arcgis-collapse-icon-flip: scaleX(-1)}::slotted(arcgis-sketch){--sketch-pad-flex-flow: wrap-reverse}::slotted(arcgis-sketch[layout="vertical"]){--sketch-pad-flex-flow: column-reverse wrap}::slotted(arcgis-floor-filter){--arcgis-floor-filter-align-items: flex-end}::slotted(*){margin-right:var(--calcite-spacing-sm-plus)}::slotted(:dir(rtl)){margin-right:var(--calcite-spacing-none);--arcgis-internal-sketch-justify-content: flex-start}}.arcgis-map-container-ui__element-bottom-end{bottom:var(--calcite-spacing-none);right:var(--calcite-spacing-none);align-items:flex-end;justify-content:flex-end;margin-left:auto;flex-flow:row-reverse;::slotted(arcgis-coordinate-conversion){--arcgis-coordinate-conversion-flex-direction: column-reverse}::slotted(arcgis-expand){--arcgis-expand-icon-number-left: calc(-1 * var(--calcite-spacing-xs));--arcgis-expand-icon-number-right: none}::slotted(arcgis-sketch){--sketch-pad-flex-flow: row-reverse wrap-reverse}::slotted(arcgis-sketch[layout="vertical"]){--sketch-pad-flex-flow: column-reverse wrap-reverse}::slotted(arcgis-floor-filter){--arcgis-floor-filter-align-items: flex-end;--arcgis-row-direction: row-reverse}::slotted(*){margin-left:var(--calcite-spacing-sm-plus)}::slotted(:dir(rtl)){margin-left:var(--calcite-spacing-none);--arcgis-internal-sketch-justify-content: flex-end}}.arcgis-map-container-ui__element>*{pointer-events:auto}@container arcgis-map-container (height >= 0){::slotted(arcgis-sketch){--responsive-toolbar-vert-width: var(--calcite-spacing-none);--responsive-toolbar-vert-height: min(100vh - 120px, 100cqh - 120px);--responsive-toolbar-horiz-width: min(100vw - 60px, 100cqw - 60px);--responsive-toolbar-horiz-height: var(--calcite-spacing-none)}}@container arcgis-map-container (max-height: 544px) or (max-width: 544px){::slotted(:is(arcgis-floor-filter)){--arcgis-internal-floor-filter-button-display: none;--arcgis-internal-floor-filter-menu-width: 225px}}@container arcgis-map-container (max-height: 499.99px){.arcgis-map-container-ui__element>*{--arcgis-expand-max-height: var(--arcgis-internal-panel-height-sm);--arcgis-internal-panel-height: var(--arcgis-internal-panel-height-sm)}::slotted(:is(arcgis-area-measurement-2d,arcgis-area-measurement-3d,arcgis-basemap-gallery,arcgis-basemap-layer-list,arcgis-bookmarks,arcgis-building-explorer,arcgis-catalog-layer-list,arcgis-directions,arcgis-direct-line-measurement-3d,arcgis-distance-measurement-2d,arcgis-editor,arcgis-feature-form,arcgis-features,arcgis-layer-list,arcgis-legend,arcgis-line-of-sight,arcgis-print,arcgis-shadow-cast,arcgis-slice,arcgis-table-list,arcgis-utility-network-trace,arcgis-grid-controls)){max-height:var(--arcgis-internal-panel-height-sm)}}@container arcgis-map-container (min-height: 500px){.arcgis-map-container-ui__element>*{--arcgis-expand-max-height: var(--arcgis-internal-panel-height-md);--arcgis-internal-panel-height: var(--arcgis-internal-panel-height-md)}::slotted(:is(arcgis-area-measurement-2d,arcgis-area-measurement-3d,arcgis-basemap-gallery,arcgis-basemap-layer-list,arcgis-bookmarks,arcgis-building-explorer,arcgis-catalog-layer-list,arcgis-directions,arcgis-direct-line-measurement-3d,arcgis-distance-measurement-2d,arcgis-editor,arcgis-feature-form,arcgis-features,arcgis-layer-list,arcgis-legend,arcgis-line-of-sight,arcgis-print,arcgis-shadow-cast,arcgis-slice,arcgis-table-list,arcgis-utility-network-trace,arcgis-grid-controls)){max-height:var(--arcgis-internal-panel-height-md)}::slotted(:is(arcgis-floor-filter)){--arcgis-internal-floor-filter-menu-max-height: 320px;--arcgis-internal-floor-filter-levels-max-height: 320px}}@container arcgis-map-container (min-height: 768px){.arcgis-map-container-ui__element>*{--arcgis-expand-max-height: var(--arcgis-internal-panel-height-lg);--arcgis-internal-panel-height: var(--arcgis-internal-panel-height-lg)}::slotted(:is(arcgis-area-measurement-2d,arcgis-area-measurement-3d,arcgis-basemap-gallery,arcgis-basemap-layer-list,arcgis-bookmarks,arcgis-building-explorer,arcgis-catalog-layer-list,arcgis-directions,arcgis-direct-line-measurement-3d,arcgis-distance-measurement-2d,arcgis-editor,arcgis-feature-form,arcgis-features,arcgis-layer-list,arcgis-legend,arcgis-line-of-sight,arcgis-print,arcgis-shadow-cast,arcgis-slice,arcgis-table-list,arcgis-utility-network-trace,arcgis-grid-controls)){max-height:var(--arcgis-internal-panel-height-lg)}::slotted(:is(arcgis-floor-filter)){--arcgis-internal-floor-filter-menu-max-height: 420px;--arcgis-internal-floor-filter-levels-max-height: 420px}}@container arcgis-map-container (min-height: 992px){.arcgis-map-container-ui__element>*{--arcgis-expand-max-height: var(--arcgis-internal-panel-height-lg);--arcgis-internal-panel-height: var(--arcgis-internal-panel-height-lg)}::slotted(:is(arcgis-area-measurement-2d,arcgis-area-measurement-3d,arcgis-basemap-gallery,arcgis-basemap-layer-list,arcgis-bookmarks,arcgis-building-explorer,arcgis-catalog-layer-list,arcgis-directions,arcgis-direct-line-measurement-3d,arcgis-distance-measurement-2d,arcgis-editor,arcgis-feature-form,arcgis-features,arcgis-layer-list,arcgis-legend,arcgis-line-of-sight,arcgis-print,arcgis-shadow-cast,arcgis-slice,arcgis-table-list,arcgis-utility-network-trace,arcgis-grid-controls)){max-height:var(--arcgis-internal-panel-height-lg)}}@container arcgis-map-container (min-height: 1200px){.arcgis-map-container-ui__element>*{--arcgis-expand-max-height: var(--arcgis-internal-panel-height-xl);--arcgis-internal-panel-height: var(--arcgis-internal-panel-height-xl)}::slotted(:is(arcgis-area-measurement-2d,arcgis-area-measurement-3d,arcgis-basemap-gallery,arcgis-basemap-layer-list,arcgis-bookmarks,arcgis-building-explorer,arcgis-catalog-layer-list,arcgis-directions,arcgis-direct-line-measurement-3d,arcgis-distance-measurement-2d,arcgis-editor,arcgis-feature-form,arcgis-features,arcgis-layer-list,arcgis-legend,arcgis-line-of-sight,arcgis-print,arcgis-shadow-cast,arcgis-slice,arcgis-table-list,arcgis-utility-network-trace,arcgis-grid-controls)){max-height:var(--arcgis-internal-panel-height-xl)}}@container arcgis-map-container (min-width: 544px){::slotted(:is(arcgis-area-measurement-2d,arcgis-area-measurement-3d,arcgis-basemap-gallery,arcgis-basemap-layer-list,arcgis-bookmarks,arcgis-building-explorer,arcgis-catalog-layer-list,arcgis-directions,arcgis-direct-line-measurement-3d,arcgis-distance-measurement-2d,arcgis-editor,arcgis-feature-form,arcgis-features,arcgis-layer-list,arcgis-line-of-sight,arcgis-print,arcgis-shadow-cast,arcgis-slice,arcgis-table-list,arcgis-utility-network-trace,arcgis-grid-controls)){width:var(--arcgis-internal-panel-width)}}@container arcgis-map-container (min-width: 768px){::slotted(:is(arcgis-legend[card-style-layout="auto"])){--arcgis-legend-internal-width: auto}::slotted(:is(arcgis-area-measurement-2d,arcgis-area-measurement-3d,arcgis-basemap-gallery,arcgis-basemap-layer-list,arcgis-bookmarks,arcgis-building-explorer,arcgis-catalog-layer-list,arcgis-directions,arcgis-direct-line-measurement-3d,arcgis-distance-measurement-2d,arcgis-editor,arcgis-feature-form,arcgis-features,arcgis-layer-list,arcgis-line-of-sight,arcgis-print,arcgis-shadow-cast,arcgis-slice,arcgis-table-list,arcgis-utility-network-trace,arcgis-grid-controls)){width:var(--arcgis-internal-panel-width)}}@container arcgis-map-container (min-width: 992px){::slotted(:is(arcgis-area-measurement-2d,arcgis-area-measurement-3d,arcgis-basemap-gallery,arcgis-basemap-layer-list,arcgis-bookmarks,arcgis-building-explorer,arcgis-catalog-layer-list,arcgis-directions,arcgis-direct-line-measurement-3d,arcgis-distance-measurement-2d,arcgis-editor,arcgis-feature-form,arcgis-features,arcgis-layer-list,arcgis-line-of-sight,arcgis-print,arcgis-shadow-cast,arcgis-slice,arcgis-table-list,arcgis-utility-network-trace,arcgis-grid-controls)){width:var(--arcgis-internal-panel-width)}}@container arcgis-map-container (min-width: 1200px){::slotted(:is(arcgis-basemap-gallery)){width:var(--arcgis-internal-basemap-gallery-width-lg)}::slotted(:is(arcgis-area-measurement-2d,arcgis-area-measurement-3d,arcgis-basemap-layer-list,arcgis-bookmarks,arcgis-building-explorer,arcgis-catalog-layer-list,arcgis-directions,arcgis-direct-line-measurement-3d,arcgis-distance-measurement-2d,arcgis-editor,arcgis-feature-form,arcgis-features,arcgis-layer-list,arcgis-line-of-sight,arcgis-print,arcgis-shadow-cast,arcgis-slice,arcgis-table-list,arcgis-utility-network-trace,arcgis-grid-controls)){width:var(--arcgis-internal-panel-width)}}`;/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.7 */const git={"top-left":"top-left","top-right":"top-right","bottom-left":"bottom-left","bottom-right":"bottom-right","bottom-leading":"bottom-start","bottom-trailing":"bottom-end","top-leading":"top-start","top-trailing":"top-end"},yit=["manual"];function HO(t){t.el.childElem&&(t.el.childElem.ownedBy=t.el),t.position&&yit.includes(t.position)?t.el.removeAttribute("slot"):t.position&&(t.el.slot=git[t.position]);const e=vit(t);if(!e){const i=Sit(t);if(!i){Kxe(t);return}return Woe(i,t,!0),i}return bit(e,t.el.parent)||(t.el.parent=e,e.localName==="arcgis-expand"?wit(e,t):e.localName==="arcgis-placement"?_it(e,t):Woe(e,t,!1)),e}function vit({el:t}){for(let e=t.parentElement;e;e=(e==null?void 0:e.parentElement)??null){if(Goe.has(e.localName))return e;if("ownedBy"in e&&e.ownedBy instanceof HTMLElement&&Goe.has(e.ownedBy.localName))return e.ownedBy}}const Goe=new Set(["arcgis-map","arcgis-scene","arcgis-link-chart","arcgis-expand","arcgis-placement"]);function bit(t,e){if(t!==e)return!1;const i=t.localName;return i==="arcgis-expand"||i==="arcgis-placement"}function C5(t,e,i="arcgisReady"){const r=t;if(r.view)e(r.view);else{let n=function(s){s.target===t&&(C5(t,e,i),t.removeEventListener(i,n))};t.addEventListener(i,n)}}const wit=(t,e)=>C5(t,i=>{const r=gJ(e);e.el.shadowRoot?t.content=e.el:e.el.childElem&&t.content!=null&&r.append(e.el.childElem),e.el.view=i}),_it=(t,e)=>C5(t,i=>{const r=gJ(e);e.el.childElem&&r.append(e.el.childElem),e.el.view=i}),Woe=(t,e,i)=>C5(t,r=>{i&&Kxe(e),e.el.view=r,e.referenceElement=t},"arcgisViewReadyChange");function xit(t,e){return e===void 0||(t==null?void 0:t.targetGeometry)!==(e==null?void 0:e.targetGeometry)||(t==null?void 0:t.rotation)!==(e==null?void 0:e.rotation)||(t==null?void 0:t.scale)!==(e==null?void 0:e.scale)}function $it(t,e){return Qxe(e==null?void 0:e.center,t)}function Qxe(t,e){if(typeof e=="string")return Qxe(t,e.split(",").map(Number));if(!t)return e;if(Array.isArray(e)){const i=e[0],r=e[1],n=e.length>2?e[2]:void 0;if(i!==t.longitude||r!==t.latitude||n!==t.z)return e}else if(e&&!(t!=null&&t.equals(e)))return e}function Kxe(t){t.el.childElem&&gJ(t).append(t.el.childElem)}function gJ(t){return t.el.shadowRoot??t.el}function Sit(t,e){const i=t.referenceElement;if(typeof i!="string")return i??void 0;const r=i.includes("#")||i.includes(".")||i.includes("["),n=t.el.getRootNode();return(r?void 0:n.querySelector(`#${i}`))??n.querySelector(i)??void 0}/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.7 */let Tit=class extends fk{constructor(e){super(e),this.direction=_k(),this.component.listen("arcgisViewClick",i=>{this._handleOpenPopup(i.detail)}),this.component.listenOn(globalThis,"unhandledrejection",i=>{var r;if(((r=i.reason)==null?void 0:r.name)==="webgl:required"){const{name:n}=i.reason;this.webGLError={name:n}}})}hostLifecycle(){return cn(()=>{var e;return(e=this.component.view.popup)==null?void 0:e.visible},()=>{var e;(e=this.popupRef)!=null&&e.visible&&(this.popupRef.visible=!1)})}openPopup(e){this.popupRef?this.popupRef.open(e):this.component.view.openPopup(e)}closePopup(){this.popupRef?this.popupRef.visible=!1:this.component.view.closePopup()}async _handleOpenPopup(e){var i,r;if(this.popupRef&&!this.component.popupDisabled){e.stopPropagation();const{location:n,promises:s}=await((i=this.popupRef)==null?void 0:i.handleViewClick(e));s!=null&&s.length&&(this.component.view.closePopup(),(r=this.popupRef)==null||r.open({location:n,promises:s}))}}_handlePopupSlotChange(e){const i=lke(e.target,"arcgis-popup");!this.popupRef&&i.length?this.popupRef=i[0]:i.length||(this.popupRef=void 0)}_webGLErrorAlert(){return this.webGLError?q`<calcite-alert icon=x-octagon kind=danger open .label=${this.webGLError.name}><div slot=title>Unable to display map. WebGL2 support is required.</div><div slot=message>Ensure that your browser and hardware meet the minimum requirements.</div><calcite-link slot=link href=https://esriurl.com/webgl-faq>https://esriurl.com/webgl-faq</calcite-link></calcite-alert>`:null}render(){return fit(this.direction,e=>this._handlePopupSlotChange(e),this._webGLErrorAlert())}};const Iit=wk((t,e)=>{const i=Re();return e.onLifecycle(()=>be(()=>{var s;const{map:r}=t;if(!r||r.destroyed)return[];const n=[];return r.loadError&&n.push(r),(s=r.basemap)!=null&&s.loadError&&n.push(r.basemap),r.ground.loadError&&n.push(r.ground),[...r.allLayers,...r.allTables].forEach(a=>{a.loadError&&n.push(a)}),n},r=>{r.length&&(t.loadErrorSources=r,i.emit())})),i}),Mit=wk((t,e)=>{const i=Re();return e.onLifecycle(()=>be(()=>{var r;return(r=t.view)==null?void 0:r.readyState},r=>{(r==="map-content-error"||r==="rendering-error")&&i.emit()})),i});/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.7 */const Cit=Jxe(oF),Eit=Jxe(GWe);var ww;let kit=(ww=class extends dt{constructor(){super(),this._containerRef=vi(),this._mapRef=vi(),this._uiController=new Tit(this),this.extraContent=new Ue,this.arcgisLoadError=Iit(this),this.arcgisViewReadyError=Mit(this),this._map=Cit(this),this.view=Eit(this),this.animationsDisabled=this.view.animationsEnabled,this.allLayerViews=this.view.allLayerViews,this.analyses=this.view.analyses,this.autoDestroyDisabled=!1,this.background=this.view.background,this.basemap=this._map.basemap,this.basemapView=this.view.basemapView,this.constraints=this.view.constraints,this.displayFilterDisabled=this.view.displayFilterEnabled,this.fatalError=this.view.fatalError,this.floors=this.view.floors,this.graphics=this.view.graphics,this.ground=this._map.ground,this.highlights=this.view.highlights,this.highlightOptions=this.view.highlightOptions,this.ipsInfo=this._map.ipsInfo,this.layerViews=this.view.layerViews,this.magnifier=this.view.magnifier,this.map=this.view.map,this.navigation=this.view.navigation,this.padding=this.view.padding,this.popup=this.view.popup,this.popupDisabled=this.view.popupEnabled,this.ready=this.view.ready,this.resizeAlign=this.view.resizeAlign,this.resolution=this.view.resolution,this.rotation=this.view.rotation,this.spatialReference=this.view.spatialReference,this.spatialReferenceLocked=this.view.spatialReferenceLocked,this.suspended=this.view.suspended,this.theme=this.view.theme,this.timeExtent=this.view.timeExtent,this.timeZone=this.view.timeZone,this.updating=this.view.updating,this.visibleArea=this.view.visibleArea,this.arcgisViewAnalysisViewCreate=fs(()=>this.view,"analysis-view-create"),this.arcgisViewAnalysisViewCreateError=fs(()=>this.view,"analysis-view-create-error"),this.arcgisViewAnalysisViewDestroy=fs(()=>this.view,"analysis-view-destroy"),this.arcgisViewChange=Re(),this.arcgisViewClick=fs(()=>this.view,"click"),this.arcgisViewDoubleClick=fs(()=>this.view,"double-click"),this.arcgisViewDrag=fs(()=>this.view,"drag"),this.arcgisViewHold=fs(()=>this.view,"hold"),this.arcgisViewImmediateClick=fs(()=>this.view,"immediate-click"),this.arcgisViewImmediateDoubleClick=fs(()=>this.view,"immediate-double-click"),this.arcgisViewKeyDown=fs(()=>this.view,"key-down"),this.arcgisViewKeyUp=fs(()=>this.view,"key-up"),this.arcgisViewLayerviewCreate=fs(()=>this.view,"layerview-create"),this.arcgisViewLayerviewCreateError=fs(()=>this.view,"layerview-create-error"),this.arcgisViewLayerviewDestroy=fs(()=>this.view,"layerview-destroy"),this.arcgisViewMouseWheel=fs(()=>this.view,"mouse-wheel"),this.arcgisViewPointerDown=fs(()=>this.view,"pointer-down"),this.arcgisViewPointerEnter=fs(()=>this.view,"pointer-enter"),this.arcgisViewPointerLeave=fs(()=>this.view,"pointer-leave"),this.arcgisViewPointerMove=fs(()=>this.view,"pointer-move"),this.arcgisViewPointerUp=fs(()=>this.view,"pointer-up"),this.arcgisViewReadyChange=Re(),this.view.ui={components:["attribution"]}}get aria(){var e;return(e=this.view)==null?void 0:e.aria}set aria(e){this.view&&(this.view.aria=e)}get center(){return this.view.center}set center(e){const i=$it(e,this.view);i&&(this.view.center=i)}get extent(){return this.view.extent}set extent(e){var i;e&&!((i=this.extent)!=null&&i.equals(e))&&(this.view.extent=e)}get focusAreas(){return this.map?this.map.focusAreas:{areas:[],style:"bright"}}set focusAreas(e){this.map&&(this.map.focusAreas=e)}get gamepad(){return this.view.input.gamepad}get interacting(){return this.view.interacting}get itemId(){var e;return(e=this._map.portalItem)==null?void 0:e.id}set itemId(e){hit(this._map,this),this._map.portalItem={id:e},this.view.map=this._map}get navigating(){return this.view.navigating}get scale(){return this.view.scale}set scale(e){this.view.scale=e}get stationary(){return this.view.stationary}get viewpoint(){return this.view.viewpoint}set viewpoint(e){xit(this.viewpoint,e)&&(this.view.viewpoint=e)}get zoom(){return this.view.zoom}set zoom(e){this.view.zoom=e}async addLayer(e,i){var r;(r=this.map)==null||r.add(e,i)}async addLayers(e,i){var r;(r=this.map)==null||r.addMany(e,i)}async addTable(e){var i;(i=this.map)==null||i.tables.add(e)}async addTables(e,i){var r;(r=this.map)==null||r.tables.addMany(e,i)}async closePopup(){this._uiController.closePopup()}async destroy(){await this.manager.destroy()}async goTo(e,i){return await this.view.goTo(e,i)}async hitTest(e,i){return await this.view.hitTest(e,i)}async openPopup(e){this._uiController.openPopup(e)}async takeScreenshot(e){return await this.view.takeScreenshot(e)}toMap(e){return this.view.toMap(e)}toScreen(e,i){return this.view.toScreen(e,i)}async tryFatalErrorRecovery(){this.view.tryFatalErrorRecovery()}async viewOnReady(e,i){return await this.componentOnReady(),await this.view.whenReady().then(()=>e==null?void 0:e()).catch(i)}async whenAnalysisView(e){return await this.view.whenAnalysisView(e)}async whenLayerView(e){var i;return await((i=this.view)==null?void 0:i.whenLayerView(e))}loaded(){var i;const e=this;e.el.childElem=this._mapRef.value,(i=this.view).container??(i.container=e.el.childElem),this.map||(this.map=this._map),this.manager.onLifecycle(()=>[be(()=>this.map,r=>{r&&(this._map=r)},{initial:!0,sync:!0}),be(()=>this.view.stationary,()=>this.arcgisViewChange.emit(),{initial:!0}),be(()=>this.view.ready,()=>this.arcgisViewReadyChange.emit(),{initial:this.view.ready})])}renderMain(){return q`<div class=${H(nn.base)} ${gt(this._mapRef)}></div>`}render(){return q`<section class=${H(nn.containerUI)} ${gt(this._containerRef)}>${this._uiController.render()}${this.extraContent}</section>${this.renderMain()}`}},ww.properties={_map:16,view:32,animationsDisabled:5,aria:0,allLayerViews:0,analyses:0,autoDestroyDisabled:5,background:0,basemap:1,basemapView:0,center:1,constraints:0,displayFilterDisabled:5,extent:0,fatalError:0,floors:0,focusAreas:0,gamepad:32,graphics:0,ground:1,highlights:0,highlightOptions:0,interacting:32,ipsInfo:0,itemId:3,layerViews:0,magnifier:0,map:0,navigating:32,navigation:0,padding:0,popup:0,popupDisabled:5,ready:4,resizeAlign:1,resolution:8,rotation:9,scale:9,spatialReference:0,spatialReferenceLocked:5,stationary:32,suspended:7,theme:0,timeExtent:0,timeZone:1,updating:4,viewpoint:0,visibleArea:0,zoom:9,loadErrorSources:0},ww.styles=[pit,mit],ww);yr("arcgis-map",kit);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Ait=ct`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host{position:absolute;inset:0;display:flex;block-size:100%;inline-size:100%;flex-direction:column;overflow:hidden}.main{position:relative;display:flex;block-size:100%;inline-size:100%;flex:1 1 auto;flex-direction:row;justify-content:space-between;overflow:hidden}.content{display:flex;block-size:100%;inline-size:100%;flex-direction:column;flex-wrap:nowrap;overflow:auto;justify-content:space-between}.content ::slotted(calcite-shell-center-row),.content ::slotted(calcite-panel),.content ::slotted(calcite-flow){flex:1 1 auto;align-self:stretch;max-block-size:unset}.content--behind{position:absolute;inset:0;border-width:0px;z-index:calc(var(--calcite-z-index) - 1);display:initial}.content--non-interactive{pointer-events:none;display:flex;block-size:100%;inline-size:100%;flex-direction:column;flex-wrap:nowrap}::slotted(calcite-shell-center-row){inline-size:unset}::slotted(.header .heading){font-size:var(--calcite-font-size--2);line-height:1.375;font-weight:var(--calcite-font-weight-normal)}slot[name=panel-start]::slotted(calcite-shell-panel),slot[name=panel-end]::slotted(calcite-shell-panel){position:relative;z-index:calc(var(--calcite-z-index) + 1)}slot[name=panel-end]::slotted(calcite-shell-panel){margin-inline-start:auto}::slotted(calcite-panel),::slotted(calcite-flow){border-width:var(--calcite-border-width-sm);border-color:var(--calcite-shell-border-color, var(--calcite-color-border-3));border-inline-start-width:var(--calcite-border-width-none);border-inline-end-width:var(--calcite-border-width-none);border-style:solid}slot[name=center-row]::slotted(calcite-shell-center-row:not([detached])),slot[name=panel-top]::slotted(calcite-shell-center-row:not([detached])),slot[name=panel-bottom]::slotted(calcite-shell-center-row:not([detached])){border-color:var(--calcite-shell-border-color, var(--calcite-color-border-3));border-inline-start-width:var(--calcite-border-width-sm);border-inline-end-width:var(--calcite-border-width-sm)}.center-content{display:flex;flex-direction:column;justify-content:space-between;block-size:100%;inline-size:100%;min-inline-size:0}.content-bottom{justify-content:flex-end}::slotted(calcite-shell-center-row){flex:none;align-self:stretch}::slotted(calcite-tip-manager){position:absolute;z-index:var(--calcite-z-index-toast);box-sizing:border-box}@keyframes in-up{0%{opacity:0;transform:translate3D(0,5px,0)}to{opacity:1;transform:translateZ(0)}}::slotted(calcite-tip-manager){animation:in-up var(--calcite-internal-animation-timing-slow) ease-in-out;border-radius:.25rem;--tw-shadow: 0 6px 20px -4px rgba(0, 0, 0, .1), 0 4px 12px -2px rgba(0, 0, 0, .08);--tw-shadow-colored: 0 6px 20px -4px var(--tw-shadow-color), 0 4px 12px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow);inset-block-end:.5rem;inset-inline:var(--calcite-shell-tip-spacing, 26vw)}slot[name=center-row]::slotted(calcite-shell-center-row),slot[name=panel-bottom]::slotted(calcite-shell-center-row){margin-block-start:auto}slot[name=panel-top]::slotted(calcite-shell-center-row){margin-block-end:auto}.position-wrapper{position:absolute;pointer-events:none;inset:0}slot[name=modals]::slotted(calcite-modal){position:absolute}:host([hidden]){display:none}[hidden]{display:none}`,uh={main:"main",content:"content",contentBehind:"content--behind",contentBottom:"content-bottom",contentNonInteractive:"content--non-interactive",footer:"footer",positionedSlotWrapper:"positioned-slot-wrapper",contentBehindCenterContent:"center-content"},Yu={centerRow:"center-row",panelStart:"panel-start",panelEnd:"panel-end",panelTop:"panel-top",panelBottom:"panel-bottom",header:"header",footer:"footer",alerts:"alerts",sheets:"sheets",modals:"modals",dialogs:"dialogs"},pN=class pN extends dt{constructor(){super(),this.hasAlerts=!1,this.hasDialogs=!1,this.hasFooter=!1,this.hasHeader=!1,this.hasModals=!1,this.hasOnlyPanelBottom=!1,this.hasPanelBottom=!1,this.hasPanelTop=!1,this.hasSheets=!1,this.panelIsResizing=!1,this.contentBehind=!1,this.listen("calciteInternalShellPanelResizeStart",this.handleCalciteInternalShellPanelResizeStart),this.listen("calciteInternalShellPanelResizeEnd",this.handleCalciteInternalShellPanelResizeEnd)}willUpdate(e){(e.has("hasPanelTop")&&(this.hasUpdated||this.hasPanelTop!==!1)||e.has("hasPanelBottom")&&(this.hasUpdated||this.hasPanelBottom!==!1))&&(this.hasOnlyPanelBottom=!this.hasPanelTop&&this.hasPanelBottom)}handleCalciteInternalShellPanelResizeStart(e){this.panelIsResizing=!0,e.stopPropagation()}handleCalciteInternalShellPanelResizeEnd(e){this.panelIsResizing=!1,e.stopPropagation()}handleHeaderSlotChange(e){this.hasHeader=!!ii(e)}handleFooterSlotChange(e){this.hasFooter=!!ii(e)}handleAlertsSlotChange(e){var i;this.hasAlerts=!!ii(e),(i=fu(e))==null||i.map(r=>{r.tagName==="CALCITE-ALERT"&&(r.embedded=!0)})}handleSheetsSlotChange(e){var i;this.hasSheets=!!ii(e),(i=fu(e))==null||i.map(r=>{r.tagName==="CALCITE-SHEET"&&(r.embedded=!0)})}handleModalsSlotChange(e){var i;this.hasModals=!!ii(e),(i=fu(e))==null||i.map(r=>{r.tagName==="CALCITE-MODAL"&&(r.embedded=!0)})}handlePanelTopChange(e){this.hasPanelTop=ii(e)}handlePanelBottomChange(e){this.hasPanelBottom=ii(e)}handleDialogsSlotChange(e){var i;this.hasDialogs=!!ii(e),(i=fu(e))==null||i.map(r=>{r.tagName==="CALCITE-DIALOG"&&(r.embedded=!0)})}renderHeader(){return q`<div .hidden=${!this.hasHeader}>${nt("header",q`<slot name=${Yu.header} @slotchange=${this.handleHeaderSlotChange}></slot>`)}</div>`}renderFooter(){return nt("footer",q`<div class=${H(uh.footer)} .hidden=${!this.hasFooter}><slot name=${Yu.footer} @slotchange=${this.handleFooterSlotChange}></slot></div>`)}renderAlerts(){return q`<div .hidden=${!this.hasAlerts}>${nt("alerts",q`<slot name=${Yu.alerts} @slotchange=${this.handleAlertsSlotChange}></slot>`)}</div>`}renderSheets(){return q`<div .hidden=${!this.hasSheets}>${nt("sheets",q`<slot name=${Yu.sheets} @slotchange=${this.handleSheetsSlotChange}></slot>`)}</div>`}renderModals(){return q`<div .hidden=${!this.hasModals}>${nt("modals",q`<slot name=${Yu.modals} @slotchange=${this.handleModalsSlotChange}></slot>`)}</div>`}renderDialogs(){return q`<div .hidden=${!this.hasDialogs}>${nt("dialogs",q`<slot name=${Yu.dialogs} @slotchange=${this.handleDialogsSlotChange}></slot>`)}</div>`}renderContent(){const{panelIsResizing:e}=this,i=nt("default-slot",q`<slot></slot>`),r=e?q`<div class=${H(uh.contentNonInteractive)}>${i}</div>`:i,n=nt("center-row-slot",q`<slot name=${Yu.centerRow}></slot>`),s=nt("panel-bottom-slot",q`<slot name=${Yu.panelBottom} @slotchange=${this.handlePanelBottomChange}></slot>`),a=nt("panel-top-slot",q`<slot name=${Yu.panelTop} @slotchange=${this.handlePanelTopChange}></slot>`),o="content-container";return this.contentBehind?[nt(o,q`<div class=${H({[uh.content]:!0,[uh.contentBehind]:!0})}>${r}</div>`),q`<div class=${H({[uh.contentBehindCenterContent]:!0,[uh.contentBottom]:this.hasOnlyPanelBottom})}>${a}${s}${n}</div>`]:[nt(o,q`<div class=${H({[uh.content]:!0,[uh.contentBottom]:this.hasOnlyPanelBottom})}>${a}${r}${s}${n}</div>`)]}renderMain(){return q`<div class=${H(uh.main)}><slot name=${Yu.panelStart}></slot>${this.renderContent()}<slot name=${Yu.panelEnd}></slot></div>`}renderPositionedSlots(){return q`<div class=${H(uh.positionedSlotWrapper)}>${this.renderAlerts()}${this.renderModals()}${this.renderDialogs()}${this.renderSheets()}</div>`}render(){return q`${this.renderHeader()}${this.renderMain()}${this.renderFooter()}${this.renderPositionedSlots()}`}};pN.properties={hasAlerts:[16,{},{state:!0}],hasDialogs:[16,{},{state:!0}],hasFooter:[16,{},{state:!0}],hasHeader:[16,{},{state:!0}],hasModals:[16,{},{state:!0}],hasOnlyPanelBottom:[16,{},{state:!0}],hasPanelBottom:[16,{},{state:!0}],hasPanelTop:[16,{},{state:!0}],hasSheets:[16,{},{state:!0}],panelIsResizing:[16,{},{state:!0}],contentBehind:[7,{},{reflect:!0,type:Boolean}]},pN.styles=Ait;let UH=pN;ci("calcite-shell",UH);function FE(t,e,i,r){let n=null,s=1e3;typeof e=="number"?(s=e,r=i):(n=e??null,s=i);const a=Yw(0);let o;const l=()=>{a.value=0,t.apply(r,o)},c=(...h)=>{n&&n.apply(r,h),o=h,s?a.value||(a.value=setTimeout(l,s)):l()};return c.remove=()=>{a.value&&(clearTimeout(a.value),a.value=0)},c.forceUpdate=()=>{a.value&&(clearTimeout(a.value),l())},c.hasPendingUpdates=()=>!!a.value,c}function BH(t){var e;switch(t==null?void 0:t.type){case"point":return t;case"extent":return t.center;case"polygon":{const i=sge(t);return i?St.fromJSON(i):null}case"multipoint":case"polyline":return(e=t.extent)==null?void 0:e.center;default:return null}}const e$e=()=>Iu({action:()=>de(()=>Promise.resolve().then(()=>BJ),void 0)});function t$e(t,e,i){const{title:r,textEnabled:n}=e,{type:s,active:a,uid:o,disabled:l,indicator:c}=t;return t.visible?ue("calcite-action",{...e,active:s==="toggle"&&t.value,appearance:"solid","data-action-id":t.id,"data-action-uid":o,disabled:l,icon:Pit(t),indicator:c,loading:a,scale:"s",text:r??"",title:n?void 0:r},i):null}function Pit(t){return t.icon?t.icon:"image"in t&&t.image||t.className?void 0:"question"}function Oit(t){return t?{backgroundImage:`url(${t})`}:{}}function Lit({action:t,feature:e}){const i=e==null?void 0:e.attributes,r="image"in t?t.image:void 0;return r&&i?Sr(r,i):r??""}function Fit(t,e){return{type:i_(e),value:t,unit:e}}function Vkt(t){return{value:t}}function Rit(t,e){return{type:i_(e),value:t,unit:e}}function zit(t,e){return{type:i_(e),value:t,unit:e}}function E5(t,e,i="arithmetic"){return{type:i_(e),value:t,unit:e,rotationType:i}}function Ukt(t,e){const i=Nit(t,e);return t.type==="angle"?E5(i,e,t.rotationType):Fit(i,e)}function Nit(t,e){return Ni(t.value,t.unit,e)}function Bkt(t,e){return t==null?e:e==null||t.value>Ni(e.value,e.unit,t.unit)?t:e}function qkt(t,e){return t==null?null:{...t,value:t.value*e}}function Dit(t,e,i){if(e===i)return t;switch(i){case"arithmetic":case"geographic":return 90-t}}const Hkt=Rit(0,"meters"),Gkt=zit(0,"square-meters");E5(0,"radians");const Wkt=E5(0,"degrees"),Zkt=E5(0,"degrees","geographic");function i$e(t,e,i){return t.units[e][i]}function eI(t,e,i,r=2,n="abbr"){return`${or(e,{minimumFractionDigits:r,maximumFractionDigits:r,signDisplay:e>0?"never":"exceptZero"})} ${i$e(t,i,n)}`}function k5(t,e,i,r=2,n="abbr"){return`${or(e,{minimumFractionDigits:r,maximumFractionDigits:r,signDisplay:"exceptZero"})} ${i$e(t,i,n)}`}function Ykt(t,e,i,r=2,n="abbr"){const s=dZ(e,i);return eI(t,Ni(e,i,s),s,r,n)}function Jkt(t,e,i,r=2,n="abbr"){const s=dZ(e,i);return k5(t,Ni(e,i,s),s,r,n)}function Xkt(t,e,i,r=2,n="abbr"){const s=hZ(e,i);return eI(t,Ni(e,i,s),s,r,n)}function Qkt(t,e,i,r=2,n="abbr"){const s=hZ(e,i);return k5(t,Ni(e,i,s),s,r,n)}function Kkt(t,e,i,r=2,n="abbr"){const s=pZ(e,i);return eI(t,Ni(e,i,s),s,r,n)}function eAt(t,e,i,r=2,n="abbr"){const s=pZ(e,i);return k5(t,Ni(e,i,s),s,r,n)}function tAt(t,e,i,r=2,n="abbr"){const s=fZ(e,i);return eI(t,Ni(e,i,s),s,r,n)}function iAt(t,e,i,r=2,n="abbr"){const s=fZ(e,i);return k5(t,Ni(e,i,s),s,r,n)}function rAt(t,e,i,r=2,n="abbr"){const s=bLe(e,i);return eI(t,Ni(e,i,s),s,r,n)}function nAt(t,e,i,r=2,n="abbr"){const s=wLe(e,i);return eI(t,Ni(e,i,s),s,r,n)}const jit=(t,e)=>({style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:e,minimumFractionDigits:e,signDisplay:t>0?"never":"exceptZero"});function sAt(t,e,i,r,n,s=afe,a=!0){let o=s.normalize(Dit(Ni(t,e,"degrees"),i,r),0,a);const l=jit(o,n??2);return o=Vit(o,l),or(o,l)}const Zoe=new Map;function Vit(t,e){const i=JSON.stringify(e);let r=Zoe.get(i);return r||(r=new Intl.NumberFormat("en-US",e),Zoe.set(i,r)),/^[-+]?360\.?0*?$/.test(r.format(t))?0:t}const Yoe=["B","kB","MB","GB","TB"];function Uit(t,e){let i=(e=Math.round(e))===0?0:Math.floor(Math.log(e)/Math.log(1024));i=ua(i,0,Yoe.length-1);const r=or(e/1024**i,{maximumFractionDigits:2});return Ho(t.units.bytes[Yoe[i]],{fileSize:r})}function Bit(t){const{exifInfo:e,exifName:i,tagName:r}=t;if(!e||!i||!r)return null;const n=e.find(s=>s.name===i);return n?qit({tagName:r,tags:n.tags}):null}function qit(t){const{tagName:e,tags:i}=t;if(!i||!e)return null;const r=i.find(n=>n.name===e);return(r==null?void 0:r.value)||null}var qH;const Hit={1:{id:1,rotation:0,mirrored:!1},2:{id:2,rotation:0,mirrored:!0},3:{id:3,rotation:180,mirrored:!1},4:{id:4,rotation:180,mirrored:!0},5:{id:5,rotation:-90,mirrored:!0},6:{id:6,rotation:90,mirrored:!1},7:{id:7,rotation:90,mirrored:!0},8:{id:8,rotation:-90,mirrored:!1}};let vl=qH=class extends $e{constructor(t){super(t),this.contentType=null,this.exifInfo=null,this.id=null,this.globalId=null,this.keywords=null,this.name=null,this.parentGlobalId=null,this.parentObjectId=null,this.size=null,this.url=null}get orientationInfo(){const{exifInfo:t}=this,e=Bit({exifName:"Exif IFD0",tagName:"Orientation",exifInfo:t});return Hit[e]||null}clone(){return new qH({contentType:this.contentType,exifInfo:this.exifInfo,id:this.id,globalId:this.globalId,keywords:this.keywords,name:this.name,parentGlobalId:this.parentGlobalId,parentObjectId:this.parentObjectId,size:this.size,url:this.url})}};d([f({type:String})],vl.prototype,"contentType",void 0),d([f()],vl.prototype,"exifInfo",void 0),d([f({readOnly:!0})],vl.prototype,"orientationInfo",null),d([f({type:ei})],vl.prototype,"id",void 0),d([f({type:String})],vl.prototype,"globalId",void 0),d([f({type:String})],vl.prototype,"keywords",void 0),d([f({type:String})],vl.prototype,"name",void 0),d([f({json:{read:!1}})],vl.prototype,"parentGlobalId",void 0),d([f({json:{read:!1}})],vl.prototype,"parentObjectId",void 0),d([f({type:ei})],vl.prototype,"size",void 0),d([f({json:{read:!1}})],vl.prototype,"url",void 0),vl=qH=d([V("esri.rest.query.support.AttachmentInfo")],vl);const aAt=",",Git={years:365,months:30,days:1,hours:1/24,minutes:1/1440,seconds:1/86400,milliseconds:1/864e5},Wit=new Set(["integer","small-integer"]);let dU=null;function Zit(t){return KD(t)||Abe(t)||Pbe(t)}async function oAt(t){const{field:e,field2:i,field3:r,normalizationField:n,valueExpression:s,fields:a}=t;let o=[];if(s){if(!dU){const{arcadeUtils:l}=await Vd();dU=l}o=dU.extractFieldNames(s)}return e&&o.push(e),i&&o.push(i),r&&o.push(r),n&&o.push(n),a&&o.push(...a),o}function AM(t){return String(t).padStart(2,"0")}function Joe(t,e,i){let r;return e==="date"||e==="number"?(e==="number"&&(t=new Date(t)),r=`TIMESTAMP'${i?t.getFullYear():t.getUTCFullYear()}-${AM((i?t.getMonth():t.getUTCMonth())+1)}-${AM(i?t.getDate():t.getUTCDate())} ${AM(i?t.getHours():t.getUTCHours())}:${AM(i?t.getMinutes():t.getUTCMinutes())}:${AM(i?t.getSeconds():t.getUTCSeconds())}'`):r=t,r}function lAt(t,e,i,r){const{hasQueryEngine:n}=t,s=`(${Joe(i,Xoe(t,i),n)} - ${Joe(e,Xoe(t,e),n)})`;let a=Git[r],o="/";return a<1&&(a=1/a,o="*"),{sqlExpression:a===1?s:`(${s} ${o} ${a})`,sqlWhere:null}}function Xoe(t,e){if(e instanceof Date)return"date";if(typeof e=="number")return"number";if(typeof e=="string"){const i=t.getField(e);if(e.toLowerCase()==="<now>")return;if(KD(i))return"field"}}function cAt(t,e){const i=e&&t.getField(e);return!!i&&Wit.has(i.type)}function uAt(t){return`cast(${t} as float)`}function yJ(t,e){const{format:i,fieldFormat:r,timeZoneOptions:n,fieldType:s}=e??{},a=r?_De(r):null;let o,l;if(n&&({timeZone:o,timeZoneName:l}=wye(n.layerTimeZone,n.datesInUnknownTimezone,n.viewTimeZone,a||cx(i||"short-date-short-time"),s)),typeof t=="string"&&isNaN(Date.parse(s==="time-only"?`1970-01-01T${t}Z`:t)))return t;switch(s){case"date-only":{const c=a||cx(i||"short-date");return typeof t=="string"?xDe(t,{...c}):wc(t,{...c,timeZone:Vp})}case"time-only":{const c=a||cx(i||"short-time");return typeof t=="string"?$De(t,c):wc(t,{...c,timeZone:Vp})}case"timestamp-offset":{if(!o&&typeof t=="string"&&new Date(t).toISOString()!==t)return t;const c=i||a||n?a||cx(i||"short-date-short-time"):void 0,h=c?{...c,timeZone:o,timeZoneName:l}:void 0;return typeof t=="string"?SDe(t,h):wc(t,h)}default:{const c=i||a||n?a||cx(i||"short-date-short-time"):void 0;return wc(typeof t=="string"?new Date(t):t,c?{...c,timeZone:o,timeZoneName:l}:void 0)}}}const Yit="esri.widgets.Feature.support.featureUtils",HH=()=>Ie.getLogger(Yit),Jit=/href=(""|'')/gi,Xit=/(\{([^{\r\n]+)\})/g,Qit=/'/g,r$e=/^\s*expression\//i,Kit=/(\n)/gi,ert=/[\u00A0-\u9999<>&]/gim,trt=/href\s*=\s*(?:"([^"]+)"|'([^']+)')/gi,irt=/^(?:mailto:|tel:)/,n$e="relationships/",Qoe=cx("short-date-short-time");function vJ(t){if(t!=null)return(t.sourceLayer||t.layer)??void 0}async function RE({type:t,value:e,event:i}){try{return typeof e=="function"?e(i):await e}catch(r){return void HH().error("error",`An error occurred when calling the "${t}" function`,{error:r,graphic:i.graphic,value:e})}}function bJ(t=""){if(t)return!irt.test(t.trim().toLowerCase())}function tA(t){return!!t&&r$e.test(t)}function rrt(t,e){if(!e||!tA(e)||!t)return;const i=e.replace(r$e,"").toLowerCase();return t.find(({name:r})=>r.toLowerCase()===i)}function A5({fieldInfo:t,graphic:e}){return!(!(t!=null&&t.fieldName)||tA(t.fieldName)||Pd(t.fieldName)||e!=null&&e.isAggregate||e!=null&&e.popupTemplate)}function az({expressionInfos:t,fieldInfo:e,graphic:i,isContentFieldInfos:r,layer:n}){if(!(e!=null&&e.fieldName))return null;const s=rrt(t,e.fieldName);if(s)return s.title||null;if(WT(n)&&A5({fieldInfo:e,graphic:i})){const a=n.getFieldAlias(e.fieldName);return r?e.label||a||e.fieldName:a||e.fieldName}return e.label||e.fieldName}function wJ({fieldInfo:t,isContentFieldInfos:e,layer:i}){var r;if(!(t!=null&&t.fieldName))return null;if(WT(i)){const n=i.popupTemplate||i.fieldConfigurations?(r=i.getFieldConfiguration(t.fieldName))==null?void 0:r.fieldFormat:qbe(t,i.getField(t.fieldName));return e&&t.fieldFormat||n}return null}function nrt(t,e){const i=e.get(t.toLowerCase());return`{${(i==null?void 0:i.fieldName)||t}}`}function srt(t){return t.replaceAll(Jit,"")}function lT(t,e){const i=_J(e,t);return i?i.name:t}function s$e(t,e){return t&&t.map(i=>lT(i,e))}function _J(t,e){return t&&typeof t.getField=="function"&&e?t.getField(e)??null:null}function a$e(t){return`${t}`.trim()}function lv({attributes:t,globalAttributes:e,layer:i,text:r,expressionAttributes:n,fieldInfoMap:s}){return r?oz({formattedAttributes:e,template:crt(r,{...e,...n,...t},i),fieldInfoMap:s}):""}function oz({formattedAttributes:t,template:e,fieldInfoMap:i}){return a$e(srt(Ho(Ho(e,r=>nrt(r,i)),t)))}function art(t,e,i=!1){const r=e[t];if(typeof r=="string"){const s=(i?encodeURIComponent(r):r).replaceAll(Qit,"%27");e[t]=s}}function ort(t,e=!1){const i={...t};return Object.keys(i).forEach(r=>art(r,i,e)),i}function lrt(t,e,i){const r=(e=a$e(e))&&!e.startsWith("{");return Ho(t,ort(i,r||!1))}function lz(t,e){return t.replaceAll(Xit,(i,r,n)=>{const s=_J(e,n);return s?`{${s.name}}`:r})}function crt(t,e,i){const r=lz(t,i);return r&&r.replaceAll(trt,(n,s,a)=>lrt(n,s||a,e))}function urt(t,e){var r;const i=((r=e==null?void 0:e.fieldFormat)==null?void 0:r.type)==="number"||(e==null?void 0:e.format)&&e.format.dateFormat==null&&(e.format.places!=null||e.format.digitSeparator!=null);if(typeof t=="string"&&i){const n=Number(t);if(!isNaN(n))return n}return t}function o$e(t){return t!=null&&typeof t=="object"&&"fieldsIndex"in t&&"geometryType"in t&&"getField"in t&&"load"in t&&"loaded"in t&&"objectIdField"in t&&"spatialReference"in t&&"type"in t&&(t.type==="feature"||t.type==="scene"||t.type==="subtype-group"||t.type==="subtype-sublayer"||t.type==="sublayer")&&"when"in t}function l$e(t){return t!=null&&typeof t=="object"&&"createQuery"in t&&"queryFeatureCount"in t&&"queryObjectIds"in t&&"queryRelatedFeatures"in t&&"queryRelatedFeaturesCount"in t&&"relationships"in t}function tI(t){return o$e(t)&&l$e(t)}function c$e(t){return!(!(t&&typeof t=="object"&&"createQuery"in t&&"getField"in t&&"queryFeatureCount"in t&&"queryFeatures"in t&&"queryObjectIds"in t&&"capabilities"in t&&"fields"in t&&"fieldsIndex"in t&&"type"in t)||t.type!=="feature"&&t.type!=="subtype-group"&&t.type!=="subtype-sublayer"&&t.type!=="sublayer"||!("when"in t))&&(t.type==="subtype-sublayer"&&"parent"in t&&t.parent&&typeof t.parent=="object"?"globalIdField"in t.parent:"globalIdField"in t)}function drt(t){return!!t&&typeof t=="object"&&"sourceLayer"in t&&tI(t.sourceLayer)}function u$e(t,e){const{fieldInfos:i,fieldName:r,graphic:n,isContentFieldInfos:s,layer:a,preventPlacesFormatting:o,timeZone:l}=e,c=xJ(i,r),h=_J(a,r),m=WT(a)&&A5({fieldInfo:c,graphic:n}),g=m?null:c==null?void 0:c.format,v=m?wJ({fieldInfo:c,layer:a,isContentFieldInfos:s}):null,b=(v==null?void 0:v.type)==="number";if(c&&!T9(r)){const $=h==null?void 0:h.type,M=(v==null?void 0:v.type)==="date-time",k=g==null?void 0:g.dateFormat;if($==="date"||$==="date-only"||$==="time-only"||$==="timestamp-offset"||M||k)return yJ(t,{format:M?void 0:k,fieldFormat:M?v:void 0,fieldType:$,timeZoneOptions:{layerTimeZone:a&&"preferredTimeZone"in a?a.preferredTimeZone:null,viewTimeZone:l,datesInUnknownTimezone:!(!a||!("datesInUnknownTimezone"in a))&&!!a.datesInUnknownTimezone}})}if(typeof t=="string"&&T9(r)&&g)return hrt(t,g);if(typeof(t=urt(t,{format:b?void 0:g,fieldFormat:b?v:void 0}))=="string"||t==null||g==null&&v==null)return P5(t);const x=b?Mye(v):g?Dk(g):void 0;return or(t,o?{...x,minimumFractionDigits:0,maximumFractionDigits:20}:x)}function hrt(t,e){return t=t.trim(),/\d{2}-\d{2}/.test(t)?t:t.includes(",")?hU(t,",",", ",e):t.includes(";")?hU(t,";","; ",e):t.includes(" ")?hU(t," "," ",e):or(Number(t),Dk(e))}function hU(t,e,i,r){return t.trim().split(e).map(n=>or(Number(n),Dk(r))).join(i)}function xJ(t,e){if(t!=null&&t.length&&e)return t.find(i=>{var r;return((r=i.fieldName)==null?void 0:r.toLowerCase())===e.toLowerCase()})}function prt({fieldName:t,graphic:e,layer:i}){if(Pd(t)||!i||typeof i.getFeatureType!="function")return null;const{typeIdField:r}=i;if(!r||t!==r)return null;const n=i.getFeatureType(e);return n?n.name:null}function frt({fieldName:t,value:e,graphic:i,layer:r}){if(Pd(t)||!r||typeof r.getFieldDomain!="function")return null;const n=i&&r.getFieldDomain(t,{feature:i,excludeImpliedDomains:ve("esri-widget-legacy-field-domain-calculation")});return n&&n.type==="coded-value"?n.getName(e):null}function d$e(t,e,i,r){const{creatorField:n,creationDateField:s,editorField:a,editDateField:o}=t;if(!e)return;const l=wye(r&&"preferredTimeZone"in r?r.preferredTimeZone:null,!(!r||!("datesInUnknownTimezone"in r))&&!!r.datesInUnknownTimezone,i,Qoe,"date"),c={...Qoe,...l},h=e[o];if(typeof h=="number"){const g=e[a];return{type:"edit",date:wc(h,c),user:g}}const m=e[s];if(typeof m=="number"){const g=e[n];return{type:"create",date:wc(m,c),user:g}}return null}function h$e(t,e){const i=new Map;if(!t)return i;for(const r of t){if(!r.fieldName)continue;const n=lT(r.fieldName,e);r.fieldName=n,i.set(n.toLowerCase(),r)}return i}function GH(t){const e=[];if(!t)return e;const{fieldInfos:i,content:r}=t;return i&&e.push(...i),r&&Array.isArray(r)&&r.forEach(n=>{if(n.type==="fields"){const s=n==null?void 0:n.fieldInfos;s&&e.push(...s)}}),e}function p$e(t){return t.replaceAll(ert,e=>`&#${e.charCodeAt(0)};`)}function P5(t){return typeof t=="string"?t.replaceAll(Kit,'<br class="esri-text-new-line" />'):t}function f$e(t){var g;const{fieldInfoMap:e,fieldInfos:i,fieldName:r,graphic:n,isContentFieldInfos:s,layer:a,timeZone:o,value:l}=t;if(l==null)return"";const c=frt({fieldName:r,value:l,graphic:n,layer:a});if(c)return c;const h=prt({fieldName:r,graphic:n,layer:a});if(h)return h;if(e.get(r.toLowerCase()))return u$e(l,{fieldInfos:i||Array.from(e.values()),fieldName:r,graphic:n,isContentFieldInfos:s,layer:a,timeZone:o});const m=(g=a==null?void 0:a.fieldsIndex)==null?void 0:g.get(r);return m&&(Zit(m)||uY(m))?yJ(l,{fieldType:m.type,timeZoneOptions:{layerTimeZone:a&&"preferredTimeZone"in a?a.preferredTimeZone:null,viewTimeZone:o,datesInUnknownTimezone:!(!a||!("datesInUnknownTimezone"in a))&&!!a.datesInUnknownTimezone}}):P5(l)}function lF({attributes:t,fieldInfoMap:e,fieldInfos:i,graphic:r,isContentFieldInfos:n,layer:s,relatedInfos:a,timeZone:o}){const l={};return a==null||a.forEach(c=>vrt({attributes:l,relatedInfo:c,fieldInfoMap:e,fieldInfos:i,layer:s,timeZone:o})),t&&Object.keys(t).forEach(c=>{const h=t[c];l[c]=f$e({fieldInfoMap:e,fieldInfos:i,fieldName:c,graphic:r,isContentFieldInfos:n,layer:s,timeZone:o,value:h})}),l}async function $J(t,e){var h,m;const{layer:i,graphic:r,outFields:n,objectIds:s,returnGeometry:a,spatialReference:o}=t,l=s[0];if(typeof l!="number"&&typeof l!="string"){const g="Could not query required fields for the specified feature. The feature's ID is invalid.",v={layer:i,graphic:r,objectId:l,requiredFields:n};return HH().warn(g,v),null}if(!((m=(h=Lve(i))==null?void 0:h.operations)!=null&&m.supportsQuery)){const g="The specified layer cannot be queried. The following fields will not be available.",v={layer:i,graphic:r,requiredFields:n,returnGeometry:a};return HH().warn(g,v),null}const c=i.createQuery();return c.objectIds=s,c.outFields=n!=null&&n.length?n:[i.objectIdField],c.returnGeometry=!!a,c.returnZ=!!a,c.returnM=!!a,c.outSpatialReference=o,(await i.queryFeatures(c,e)).features[0]}async function mrt(t){var r;if(!((r=t.expressionInfos)!=null&&r.length))return!1;const e=await Vd(),{arcadeUtils:{hasGeometryFunctions:i}}=e;return i(t)}async function grt(t){var r;if(!((r=t.expressionInfos)!=null&&r.length))return!1;const e=await Vd(),{arcadeUtils:{requiresTrack:i}}=e;return i(t)}async function m$e({graphic:t,popupTemplate:e,layer:i,spatialReference:r},n){var v;if(!i||!e||(typeof i.load=="function"&&await i.load(n),!t.attributes))return;const s=i.objectIdField,a=t.attributes[s];if(a==null)return;const o=[a],l=new Set(await e.getRequiredFields(i.fieldsIndex));((v=i.timeInfo)==null?void 0:v.trackIdField)==null||l.has(i.timeInfo.trackIdField)||await grt(e)&&l.add(i.timeInfo.trackIdField);const c=Lbe(t,l),h=c?[]:l.has(s)?[...l]:[...l,s],m=e.returnGeometry||await mrt(e);if(c&&!m)return;const g=await $J({layer:i,graphic:t,outFields:h,objectIds:o,returnGeometry:m,spatialReference:r},n);g&&(g.geometry&&(t.geometry=g.geometry),g.attributes&&(t.attributes={...t.attributes,...g.attributes}))}function Pd(t=""){return!!t&&t.includes(n$e)}function yrt(t){return t?`${n$e}${t.layerId}/${t.fieldName}`:""}function Koe({attributes:t,graphic:e,relatedInfo:i,fieldInfos:r,fieldInfoMap:n,layer:s,timeZone:a}){t&&e&&i&&Object.keys(e.attributes).forEach(o=>{const l=yrt({layerId:i.relation.id.toString(),fieldName:o}),c=e.attributes[o];t[l]=f$e({fieldName:l,fieldInfos:r,fieldInfoMap:n,layer:s,value:c,graphic:e,timeZone:a})})}function vrt({attributes:t,relatedInfo:e,fieldInfoMap:i,fieldInfos:r,layer:n,timeZone:s}){var a,o;t&&e&&((a=e.relatedFeatures)==null||a.forEach(l=>Koe({attributes:t,graphic:l,relatedInfo:e,fieldInfoMap:i,fieldInfos:r,layer:n,timeZone:s})),(o=e.relatedStatsFeatures)==null||o.forEach(l=>Koe({attributes:t,graphic:l,relatedInfo:e,fieldInfoMap:i,fieldInfos:r,layer:n,timeZone:s})))}const ele=t=>{if(!t)return!1;const e=t.toUpperCase();return e.includes("CURRENT_TIMESTAMP")||e.includes("CURRENT_DATE")||e.includes("CURRENT_TIME")},g$e=({layer:t,method:e,query:i,definitionExpression:r})=>{var a,o;if(!((o=(a=t.capabilities)==null?void 0:a.query)!=null&&o.supportsCacheHint)||e==="attachments")return;const n=i.where!=null?i.where:null,s=i.geometry!=null?i.geometry:null;ele(r)||ele(n)||(s==null?void 0:s.type)==="extent"||i.resultType==="tile"||(i.cacheHint=!0)},y$e=({query:t,layer:e,method:i})=>{g$e({layer:e,method:i,query:t,definitionExpression:`${e.definitionExpression} ${e.serviceDefinitionExpression??""}`})},v$e=({queryPayload:t,layer:e,method:i})=>{g$e({layer:e,method:i,query:t,definitionExpression:`${e.definitionExpression} ${e.serviceDefinitionExpression??""}`})};function SJ(t,e,i){var r,n;return t&&e&&i?e.type==="sublayer"?S$({layers:(r=e.layer)==null?void 0:r.allSublayers,map:t,relatedLayer:e,relationship:i})||S$({layers:(n=e.layer)==null?void 0:n.subtables,map:t,relatedLayer:e,relationship:i}):S$({layers:t.allLayers,map:t,relatedLayer:e,relationship:i})||S$({layers:t.allTables,map:t,relatedLayer:e,relationship:i}):null}function TJ(t,e){var i;return t&&"utilityNetworks"in t&&e?(i=t.utilityNetworks)==null?void 0:i.find(r=>r.isUtilityLayer(e)):null}function tle(t,e){return t==null?void 0:t.allTables.find(i=>{var r;return i.type==="feature"&&i.layerId===e.id&&i.url===((r=e.layer)==null?void 0:r.url)})}function S$({map:t,relationship:e,relationship:{relatedTableId:i},relatedLayer:r,layers:n}){var s;if(!n)return null;for(const a of n){if(a.type==="map-image"){const l=S$({layers:a.sublayers,map:t,relatedLayer:r,relationship:e})||S$({layers:a.subtables,map:t,relatedLayer:r,relationship:e});if(l)return l;continue}if(!tI(a))continue;if(r.type==="sublayer"){if(a!==r&&a.id===i)return a.isTable?tle(t,a):a;continue}const o=r.type==="scene"&&r.associatedLayer?r.associatedLayer.url:r.url;if(!o)return null;if(a.type!=="sublayer"){if(a!==r&&a.url===o&&a.layerId===i)return a}else if(a!==r&&((s=a.layer)==null?void 0:s.url)===o&&a.id===i)return a.isTable?tle(t,a):a}return null}const brt=Object.freeze(Object.defineProperty({__proto__:null,applyTextFormattingHTML:P5,createFieldInfoMap:h$e,findRelatedLayer:SJ,findUtilityNetwork:TJ,fixTokens:lz,formatAttributes:lF,formatEditInfo:d$e,formatValueToFieldInfo:u$e,getAllFieldInfos:GH,getFieldFormat:wJ,getFieldInfo:xJ,getFieldInfoLabel:az,getFixedFieldName:lT,getFixedFieldNames:s$e,getSourceLayer:vJ,graphicCallback:RE,htmlEntities:p$e,isAssociatedFeatureSupportedLayer:c$e,isExpressionField:tA,isFeatureSupportedLayer:o$e,isGraphicForRelatableFeatureSupportedLayer:drt,isRelatableFeatureSupportedLayer:tI,isRelatableLayer:l$e,isRelatedField:Pd,isSupportedContext:A5,preLayerQueryCallback:y$e,preRequestCallback:v$e,querySourceLayer:$J,queryUpdatedFeature:m$e,shouldOpenInNewTab:bJ,substituteAttributes:oz,substituteFieldsInLinksAndAttributes:lv},Symbol.toStringTag,{value:"Module"})),ile={editing:!1,operations:{add:!0,update:!0,delete:!0}},b$e=Ue.ofType(vl);let vs=class extends et{constructor(e){super(e),this._getAttachmentsPromise=null,this._attachmentLayer=null,this.attachmentKeywords=null,this.attachmentTypes=null,this.capabilities={...ile},this.activeAttachmentInfo=null,this.activeFileInfo=null,this.attachmentInfos=new b$e,this.fileInfos=new Ue,this.graphic=null,this.mode="view",this.orderByFields=null,this.filesEnabled=!1,this.addHandles(be(()=>this.graphic,()=>this._graphicChanged(),Ft))}destroy(){this._attachmentLayer=null,this.graphic=null}castCapabilities(e){return{...ile,...e}}get state(){return this._getAttachmentsPromise?"loading":this.graphic?"ready":"disabled"}get supportsResizeAttachments(){const{graphic:e}=this;if(!e)return!1;const i=e.sourceLayer??e.layer;return(i==null?void 0:i.loaded)&&"capabilities"in i&&i.capabilities&&"attachment"in i.capabilities&&i.capabilities.attachment&&"supportsResize"in i.capabilities.attachment&&i.capabilities.attachment.supportsResize||!1}get supportsTypeWildcard(){const{graphic:e}=this;if(!e)return!1;const i=e.sourceLayer??e.layer;return(i==null?void 0:i.loaded)&&"capabilities"in i&&i.capabilities&&"attachment"in i.capabilities&&i.capabilities.attachment&&"supportsResize"in i.capabilities.attachment&&i.capabilities.attachment.supportsTypeWildcard||!1}async getAttachments(){const{_attachmentLayer:e,attachmentInfos:i,orderByFields:r,attachmentTypes:n,attachmentKeywords:s,supportsTypeWildcard:a}=this;if(!e||typeof e.queryAttachments!="function")throw new ae("invalid-layer","getAttachments(): A valid layer is required.");const o=this._getObjectId();if(typeof o!="number")throw new ae("invalid-object-id","getAttachments(): Numeric object id is required");const l=r==null?void 0:r.map(v=>`${v.field} ${v.order==="descending"?"DESC":"ASC"}`),c=new as({objectIds:[o],returnMetadata:!0,orderByFields:l,attachmentTypes:a?n==null?void 0:n.filter(Boolean).map(v=>`${v}/*`):void 0,keywords:s}),h=[],m=e.queryAttachments(c).then(v=>v[o]||h).catch(()=>h);this._getAttachmentsPromise=m,this.notifyChange("state");const g=await m;return i.destroyAll(),g.length&&i.addMany(g),this._getAttachmentsPromise=null,this.notifyChange("state"),g}async addAttachment(e,i=this.graphic){var l;const{_attachmentLayer:r,attachmentInfos:n,capabilities:s}=this;if(!i)throw new ae("invalid-graphic","addAttachment(): A valid graphic is required.",{graphic:i});if(!e)throw new ae("invalid-attachment","addAttachment(): An attachment is required.",{attachment:e});if(!((l=s.operations)!=null&&l.add))throw new ae("invalid-capabilities","addAttachment(): add capabilities are required.");if(!r||typeof r.addAttachment!="function")throw new ae("invalid-layer","addAttachment(): A valid layer is required.");const a=r.addAttachment(i,e).then(c=>this._queryAttachment(c.objectId,i)),o=await a;return n.add(o),o}async deleteAttachment(e){var l;const{_attachmentLayer:i,attachmentInfos:r,graphic:n,capabilities:s}=this;if(!e)throw new ae("invalid-attachment-info","deleteAttachment(): An attachmentInfo is required.",{attachmentInfo:e});if(!((l=s.operations)!=null&&l.delete))throw new ae("invalid-capabilities","deleteAttachment(): delete capabilities are required.");if(!i||typeof i.deleteAttachments!="function")throw new ae("invalid-layer","deleteAttachment(): A valid layer is required.");if(!n)throw new ae("invalid-graphic","deleteAttachment(): A graphic is required.");const a=i.deleteAttachments(n,[e.id]).then(()=>e),o=await a;return r.remove(o),o.destroy(),o}async updateAttachment(e,i=this.activeAttachmentInfo){var h;const{_attachmentLayer:r,attachmentInfos:n,graphic:s,capabilities:a}=this;if(!e)throw new ae("invalid-attachment","updateAttachment(): An attachment is required.",{attachment:e});if(!i)throw new ae("invalid-attachment-info","updateAttachment(): An attachmentInfo is required.",{attachmentInfo:i});if(!((h=a.operations)!=null&&h.update))throw new ae("invalid-capabilities","updateAttachment(): Update capabilities are required.");const o=n.indexOf(i);if(!r||typeof r.updateAttachment!="function")throw new ae("invalid-layer","updateAttachment(): A valid layer is required.");if(!s)throw new ae("invalid-graphic","updateAttachment(): A graphic is required.");const l=r.updateAttachment(s,i.id,e).then(m=>this._queryAttachment(m.objectId)),c=await l;return n.splice(o,1,c),c}async commitFiles(){return await Promise.all(this.fileInfos.items.map(e=>this.addAttachment(e.form))),this.fileInfos.removeAll(),this.getAttachments()}addFile(e,i){if(!e||!i)return null;const r={file:e,form:i};return this.fileInfos.add(r),r}updateFile(e,i,r=this.activeFileInfo){if(!e||!i||!r)return null;const n=this.fileInfos.indexOf(r);return n>-1&&this.fileInfos.splice(n,1,{file:e,form:i}),this.fileInfos.items[n]}deleteFile(e){const i=this.fileInfos.find(r=>r.file===e);return i?(this.fileInfos.remove(i),i):null}async _queryAttachment(e,i){const{_attachmentLayer:r}=this;if(!e||!(r!=null&&r.queryAttachments))throw new ae("invalid-attachment-id","Could not query attachment.");const n=this._getObjectId(i);if(typeof n!="number")throw new ae("invalid-object-id","getAttachments(): Numeric object id is required");const s=new as({objectIds:[n],attachmentsWhere:`AttachmentId=${e}`,returnMetadata:!0});return r.queryAttachments(s).then(a=>a[n][0])}_getObjectId(e=this.graphic){return(e==null?void 0:e.getObjectId())??null}_graphicChanged(){this.graphic&&(this._setAttachmentLayer(),this.getAttachments().catch(()=>this.attachmentInfos.destroyAll()))}_setAttachmentLayer(){const{graphic:e}=this,i=vJ(e);this._attachmentLayer=i?i.type==="scene"&&i.associatedLayer!=null?i.associatedLayer:i:null}};d([f({type:[String]})],vs.prototype,"attachmentKeywords",void 0),d([f({type:[["application","audio","image","model","text","video"]]})],vs.prototype,"attachmentTypes",void 0),d([f()],vs.prototype,"capabilities",void 0),d([_i("capabilities")],vs.prototype,"castCapabilities",null),d([f()],vs.prototype,"activeAttachmentInfo",void 0),d([f()],vs.prototype,"activeFileInfo",void 0),d([f({readOnly:!0,type:b$e})],vs.prototype,"attachmentInfos",void 0),d([f()],vs.prototype,"fileInfos",void 0),d([f({type:sr})],vs.prototype,"graphic",void 0),d([f()],vs.prototype,"mode",void 0),d([f({type:[Fbe]})],vs.prototype,"orderByFields",void 0),d([f({readOnly:!0})],vs.prototype,"state",null),d([f()],vs.prototype,"filesEnabled",void 0),d([f({readOnly:!0})],vs.prototype,"supportsResizeAttachments",null),d([f({readOnly:!0})],vs.prototype,"supportsTypeWildcard",null),vs=d([V("esri.widgets.Attachments.AttachmentsViewModel")],vs);function rle(t){const e=t.toLowerCase();return e==="image/bmp"||e==="image/emf"||e==="image/exif"||e==="image/gif"||e==="image/x-icon"||e==="image/jpeg"||e==="image/png"||e==="image/tiff"||e==="image/x-wmf"}function wrt(t){const e=Hr("esri/themes/base/images/files/");return t?t==="text/plain"?`${e}text-32.svg`:t==="application/pdf"?`${e}pdf-32.svg`:t==="text/csv"?`${e}csv-32.svg`:t==="application/gpx+xml"?`${e}gpx-32.svg`:t==="application/x-dwf"?`${e}cad-32.svg`:t==="application/postscript"||t==="application/json"||t==="text/xml"||t==="model/vrml"?`${e}code-32.svg`:t==="application/x-zip-compressed"||t==="application/x-7z-compressed"||t==="application/x-gzip"||t==="application/x-tar"||t==="application/x-gtar"||t==="application/x-bzip2"||t==="application/gzip"||t==="application/x-compress"||t==="application/x-apple-diskimage"||t==="application/x-rar-compressed"||t==="application/zip"?`${e}zip-32.svg`:t.includes("image/")?`${e}image-32.svg`:t.includes("audio/")?`${e}sound-32.svg`:t.includes("video/")?`${e}video-32.svg`:t.includes("msexcel")||t.includes("ms-excel")||t.includes("spreadsheetml")?`${e}excel-32.svg`:t.includes("msword")||t.includes("ms-word")||t.includes("wordprocessingml")?`${e}word-32.svg`:t.includes("powerpoint")||t.includes("presentationml")?`${e}report-32.svg`:`${e}generic-32.svg`:`${e}generic-32.svg`}const km={left:"esri-icon-left",plus:"esri-icon-plus",right:"esri-icon-right",table:"esri-icon-table",trash:"esri-icon-trash",zoomInMagnifyingGlass:"esri-icon-zoom-in-magnifying-glass"},nle={addButton:!0,addSubmitButton:!0,cancelAddButton:!0,cancelUpdateButton:!0,deleteButton:!0,errorMessage:!0,progressBar:!0,updateButton:!0},Zi="esri-attachments",Jt={base:Zi,loaderContainer:`${Zi}__loader-container`,loader:`${Zi}__loader`,container:`${Zi}__container`,containerList:`${Zi}__container--list`,containerPreview:`${Zi}__container--preview`,actions:`${Zi}__actions`,deleteButton:`${Zi}__delete-button`,addAttachmentButton:`${Zi}__add-attachment-button`,errorMessage:`${Zi}__error-message`,items:`${Zi}__items`,item:`${Zi}__item`,itemButton:`${Zi}__item-button`,itemMask:`${Zi}__item-mask`,itemMaskIcon:`${Zi}__item-mask--icon`,itemImage:`${Zi}__image`,itemImageResizable:`${Zi}__image--resizable`,itemLabel:`${Zi}__label`,itemFilename:`${Zi}__filename`,itemChevronIcon:`${Zi}__item-chevron-icon`,itemLink:`${Zi}__item-link`,itemLinkOverlay:`${Zi}__item-link-overlay`,itemLinkOverlayIcon:`${Zi}__item-link-overlay-icon`,itemAddIcon:`${Zi}__item-add-icon`,formNode:`${Zi}__form-node`,fileFieldset:`${Zi}__file-fieldset`,fileLabel:`${Zi}__file-label`,fileName:`${Zi}__file-name`,fileInput:`${Zi}__file-input`,metadata:`${Zi}__metadata`,metadataFieldset:`${Zi}__metadata-fieldset`,progressBar:`${Zi}__progress-bar`},pU=window.CSS;let ys=class extends da{constructor(e,i){super(e,i),this.displayType="auto",this.messages=null,this.messagesUnits=null,this.selectedFile=null,this.submitting=!1,this.viewModel=null,this.visibleElements={...nle},this._supportsImageOrientation=pU&&pU.supports&&pU.supports("image-orientation","from-image"),this._addAttachmentForm=null,this._updateAttachmentForm=null}normalizeCtorArgs(e){return e!=null&&e.viewModel||(e={viewModel:new vs,...e}),e}initialize(){this.addHandles([ca(()=>{var e;return(e=this.viewModel)==null?void 0:e.attachmentInfos},"change",()=>this.scheduleRender()),ca(()=>{var e;return(e=this.viewModel)==null?void 0:e.fileInfos},"change",()=>this.scheduleRender()),be(()=>{var e;return(e=this.viewModel)==null?void 0:e.mode},()=>this._modeChanged(),Ft)])}loadDependencies(){return Iu({icon:()=>de(()=>Promise.resolve().then(()=>TT),void 0)})}get capabilities(){return this.viewModel.capabilities}set capabilities(e){this.viewModel.capabilities=e}get effectiveDisplayType(){const{displayType:e}=this;return e&&e!=="auto"?e:this.viewModel.supportsResizeAttachments?"preview":"list"}get attachmentKeywords(){return this.viewModel.attachmentKeywords}set attachmentKeywords(e){this.viewModel.attachmentKeywords=e}get attachmentTypes(){return this.viewModel.attachmentTypes}set attachmentTypes(e){this.viewModel.attachmentTypes=e}get graphic(){return this.viewModel.graphic}set graphic(e){this.viewModel.graphic=e}get icon(){return"attachment"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}castVisibleElements(e){return{...nle,...e}}addAttachment(){const{_addAttachmentForm:e,viewModel:i}=this;return this._set("submitting",!0),this._set("error",null),i.addAttachment(e).then(r=>(this._set("submitting",!1),this._set("error",null),i.mode="view",r)).catch(r=>{throw this._set("submitting",!1),this._set("error",new ae("attachments:add-attachment",this.messages.addErrorMessage,r)),r})}deleteAttachment(e){const{viewModel:i}=this;return this._set("submitting",!0),this._set("error",null),i.deleteAttachment(e).then(r=>(this._set("submitting",!1),this._set("error",null),i.mode="view",r)).catch(r=>{throw this._set("submitting",!1),this._set("error",new ae("attachments:delete-attachment",this.messages.deleteErrorMessage,r)),r})}updateAttachment(){const{viewModel:e}=this,{_updateAttachmentForm:i}=this;return this._set("submitting",!0),this._set("error",null),e.updateAttachment(i).then(r=>(this._set("submitting",!1),this._set("error",null),e.mode="view",r)).catch(r=>{throw this._set("submitting",!1),this._set("error",new ae("attachments:update-attachment",this.messages.updateErrorMessage,r)),r})}addFile(){const e=this.viewModel.addFile(this.selectedFile,this._addAttachmentForm);return this.viewModel.mode="view",e}updateFile(){const{viewModel:e}=this,i=e.updateFile(this.selectedFile,this._updateAttachmentForm,e.activeFileInfo);return e.mode="view",i}deleteFile(e){var r;const i=this.viewModel.deleteFile(e||((r=this.viewModel.activeFileInfo)==null?void 0:r.file));return this.viewModel.mode="view",i}render(){const{submitting:e,viewModel:i}=this,{state:r}=i;return ue("div",{class:this.classes(Jt.base,Ht.widget)},e?this._renderProgressBar():null,r==="loading"?this._renderLoading():this._renderAttachments(),this._renderErrorMessage())}_renderErrorMessage(){const{error:e,visibleElements:i}=this;return e&&i.errorMessage?ue("div",{class:Jt.errorMessage,key:"error-message"},e.message):null}_renderAttachments(){const{activeFileInfo:e,mode:i,activeAttachmentInfo:r}=this.viewModel;return i==="add"?this._renderAddForm():i==="edit"?this._renderDetailsForm(r||e):this._renderAttachmentContainer()}_renderLoading(){return ue("div",{class:Jt.loaderContainer,key:"loader"},ue("div",{class:Jt.loader}))}_renderProgressBar(){return this.visibleElements.progressBar?ue("div",{class:Jt.progressBar,key:"progress-bar"}):null}_renderAddForm(){const{submitting:e,selectedFile:i}=this,r=e||!i,n=this.visibleElements.cancelAddButton?ue("button",{bind:this,class:this.classes(Ht.button,Ht.buttonTertiary,Ht.buttonSmall,Ht.buttonHalf,e&&Ht.buttonDisabled),disabled:e,onclick:this._cancelForm,type:"button"},this.messages.cancel):null,s=this.visibleElements.addSubmitButton?ue("button",{class:this.classes(Ht.button,Ht.buttonSecondary,Ht.buttonSmall,Ht.buttonHalf,{[Ht.buttonDisabled]:r}),disabled:r,type:"submit"},this.messages.add):null,a=i?ue("span",{class:Jt.fileName,key:"file-name"},i.name):null,o=ue("form",{afterCreate:sae,afterRemoved:nae,bind:this,"data-node-ref":"_addAttachmentForm",onsubmit:this._submitAddAttachment},ue("fieldset",{class:Jt.fileFieldset},a,ue("label",{class:this.classes(Jt.fileLabel,Ht.button,Ht.buttonSecondary)},i?this.messages.changeFile:this.messages.selectFile,ue("input",{bind:this,class:Jt.fileInput,name:"attachment",onchange:this._handleFileInputChange,type:"file"}))),s,n);return ue("div",{class:Jt.formNode,key:"add-form-container"},o)}_renderDetailsForm(e){var L,z,U;const{visibleElements:i,viewModel:r,selectedFile:n,submitting:s}=this,{capabilities:a}=r,o=s||!n;let l,c,h,m;n?(l=n.type,c=n.name,h=n.size):e&&"file"in e?(l=e.file.type,c=e.file.name,h=e.file.size):e&&"contentType"in e&&(l=e.contentType,c=e.name,h=e.size,m=e.url);const g=a.editing&&((L=a.operations)!=null&&L.delete)&&i.deleteButton?ue("button",{bind:this,class:this.classes(Ht.button,Ht.buttonSmall,Ht.buttonTertiary,Jt.deleteButton,{[Ht.buttonDisabled]:s}),disabled:s,key:"delete-button",onclick:B=>this._submitDeleteAttachment(B,e),type:"button"},this.messages.delete):void 0,v=a.editing&&((z=a.operations)!=null&&z.update)&&i.updateButton?ue("button",{class:this.classes(Ht.button,Ht.buttonSmall,Ht.buttonThird,{[Ht.buttonDisabled]:o}),disabled:o,key:"update-button",type:"submit"},this.messages.update):void 0,b=this.visibleElements.cancelUpdateButton?ue("button",{bind:this,class:this.classes(Ht.button,Ht.buttonSmall,Ht.buttonTertiary,Ht.buttonThird,{[Ht.buttonDisabled]:s}),disabled:s,key:"cancel-button",onclick:this._cancelForm,type:"button"},this.messages.cancel):void 0,x=a.editing&&((U=a.operations)!=null&&U.update)?ue("fieldset",{class:Jt.fileFieldset,key:"file"},ue("span",{class:Jt.fileName,key:"file-name"},c),ue("label",{class:this.classes(Jt.fileLabel,Ht.button,Ht.buttonSecondary)},this.messages.changeFile,ue("input",{bind:this,class:Jt.fileInput,name:"attachment",onchange:this._handleFileInputChange,type:"file"}))):void 0,$=ue("fieldset",{class:Jt.metadataFieldset,key:"size"},ue("label",null,Uit(this.messagesUnits,h??0))),M=ue("fieldset",{class:Jt.metadataFieldset,key:"content-type"},ue("label",null,l)),k=m!=null?ue("a",{class:Jt.itemLink,href:m,rel:"noreferrer",target:"_blank"},this._renderImageMask(e,400),ue("div",{class:Jt.itemLinkOverlay},ue("span",{class:Jt.itemLinkOverlayIcon},ue("calcite-icon",{icon:"launch"})))):this._renderImageMask(e,400),A=ue("form",{afterCreate:sae,afterRemoved:nae,bind:this,"data-node-ref":"_updateAttachmentForm",onsubmit:B=>this._submitUpdateAttachment(B,e)},ue("div",{class:Jt.metadata},$,M),x,ue("div",{class:Jt.actions},g,b,v));return ue("div",{class:Jt.formNode,key:"edit-form-container"},k,A)}_renderImageMask(e,i){return e?"file"in e?this._renderGenericImageMask(e.file.name,e.file.type):this._renderImageMaskForAttachment(e,i):null}_renderGenericImageMask(e,i){const{supportsResizeAttachments:r}=this.viewModel,n=wrt(i),s={[Jt.itemImageResizable]:r};return ue("div",{class:this.classes(Jt.itemMaskIcon,Jt.itemMask),key:n},ue("img",{alt:e,class:this.classes(s,Jt.itemImage),src:n,title:e}))}_renderImageMaskForAttachment(e,i){const{supportsResizeAttachments:r}=this.viewModel;if(!e)return null;const{contentType:n,name:s,size:a,url:o}=e;if(!r||!rle(n))return this._renderGenericImageMask(s,n);const l=this._getCSSTransform(e),c=l?{transform:l,"image-orientation":"none"}:{},h=`${o}${o!=null&&o.includes("?")?"&":"?"}w=${i}&s=${a}`,m={[Jt.itemImageResizable]:r};return ue("div",{class:this.classes(Jt.itemMask),key:h},ue("img",{alt:s,class:this.classes(m,Jt.itemImage),src:h,styles:c,title:s}))}_renderFile(e){const{file:i}=e;return ue("li",{class:Jt.item,key:i},ue("button",{"aria-label":this.messages.attachmentDetails,bind:this,class:Jt.itemButton,key:"details-button",onclick:()=>this._startEditFile(e),title:this.messages.attachmentDetails,type:"button"},this._renderImageMask(e),ue("label",{class:Jt.itemLabel},ue("span",{class:Jt.itemFilename},i.name||this.messages.noTitle),ue("span",{"aria-hidden":"true",class:this.classes(Jt.itemChevronIcon,xp(this.container)?km.left:km.right)}))))}_renderAttachmentInfo({attachmentInfo:e,displayType:i}){const{viewModel:r,effectiveDisplayType:n}=this,{capabilities:s,supportsResizeAttachments:a}=r,{contentType:o,name:l,url:c}=e,h=this._renderImageMask(e,i==="list"?48:400),m=s.editing?ue("span",{"aria-hidden":"true",class:this.classes(Jt.itemChevronIcon,xp(this.container)?km.left:km.right)}):null,g=[h,n==="preview"&&a&&rle(o)?null:ue("label",{class:Jt.itemLabel},ue("span",{class:Jt.itemFilename},l||this.messages.noTitle),m)],v=s.editing?ue("button",{"aria-label":this.messages.attachmentDetails,bind:this,class:Jt.itemButton,"data-attachment-info-id":e.id,key:"details-button",onclick:()=>this._startEditAttachment(e),title:this.messages.attachmentDetails,type:"button"},g):ue("a",{class:Jt.itemButton,href:c??void 0,key:"details-link",rel:"noreferrer",target:"_blank"},g);return ue("li",{class:Jt.item,key:e},v)}_renderAttachmentContainer(){var b;const{effectiveDisplayType:e,viewModel:i,visibleElements:r}=this,{attachmentInfos:n,capabilities:s,fileInfos:a}=i,o=!!(n!=null&&n.length),l=!!(a!=null&&a.length),c={[Jt.containerList]:e!=="preview",[Jt.containerPreview]:e==="preview"},h=s.editing&&((b=s.operations)!=null&&b.add)&&r.addButton?ue("button",{bind:this,class:this.classes(Ht.button,Ht.buttonTertiary,Jt.addAttachmentButton),onclick:()=>this._startAddAttachment(),type:"button"},ue("span",{"aria-hidden":"true",class:this.classes(Jt.itemAddIcon,km.plus)}),this.messages.add):void 0,m=o?ue("ul",{class:Jt.items,key:"attachments-list"},n.toArray().map(x=>this._renderAttachmentInfo({attachmentInfo:x,displayType:e}))):void 0,g=l?ue("ul",{class:Jt.items,key:"file-list"},a.toArray().map(x=>this._renderFile(x))):void 0,v=l||o?void 0:ue("div",{class:Ht.empty},this.messages.noAttachments);return ue("div",{class:this.classes(Jt.container,c),key:"attachments-container"},m,g,v,h)}_modeChanged(){this._set("error",null),this._set("selectedFile",null)}_handleFileInputChange(e){var n;const i=e.target,r=(n=i.files)==null?void 0:n.item(0);this._set("selectedFile",r)}_submitDeleteAttachment(e,i){e.preventDefault(),i&&("file"in i?this.deleteFile(i.file):i&&this.deleteAttachment(i))}_submitAddAttachment(e){e.preventDefault(),this.viewModel.filesEnabled?this.addFile():this.addAttachment()}_submitUpdateAttachment(e,i){e.preventDefault(),i&&"file"in i?this.updateFile():this.updateAttachment()}_startEditAttachment(e){const{viewModel:i}=this;i.activeFileInfo=null,i.activeAttachmentInfo=e,i.mode="edit"}_startEditFile(e){const{viewModel:i}=this;i.activeAttachmentInfo=null,i.activeFileInfo=e,i.mode="edit"}_startAddAttachment(){this.viewModel.mode="add"}_cancelForm(e){e.preventDefault(),this.viewModel.mode="view"}_getCSSTransform(e){const{orientationInfo:i}=e;return!this._supportsImageOrientation&&i?[i.rotation?`rotate(${i.rotation}deg)`:"",i.mirrored?"scaleX(-1)":""].join(" "):""}};d([f()],ys.prototype,"capabilities",null),d([f()],ys.prototype,"displayType",void 0),d([f({readOnly:!0})],ys.prototype,"effectiveDisplayType",null),d([f()],ys.prototype,"attachmentKeywords",null),d([f()],ys.prototype,"attachmentTypes",null),d([f()],ys.prototype,"graphic",null),d([f()],ys.prototype,"icon",null),d([f()],ys.prototype,"label",null),d([f(),js("esri/widgets/Attachments/t9n/Attachments")],ys.prototype,"messages",void 0),d([f(),js("esri/core/t9n/Units")],ys.prototype,"messagesUnits",void 0),d([f({readOnly:!0})],ys.prototype,"selectedFile",void 0),d([f({readOnly:!0})],ys.prototype,"submitting",void 0),d([f({readOnly:!0})],ys.prototype,"error",void 0),d([f({type:vs})],ys.prototype,"viewModel",void 0),d([f()],ys.prototype,"visibleElements",void 0),d([_i("visibleElements")],ys.prototype,"castVisibleElements",null),ys=d([V("esri.widgets.Attachments")],ys);let q0=class extends vs{constructor(e){super(e),this.description=null,this.title=null}};d([f()],q0.prototype,"description",void 0),d([f()],q0.prototype,"title",void 0),q0=d([V("esri.widgets.Feature.FeatureAttachments.FeatureAttachmentsViewModel")],q0);function IJ({level:t,class:e,...i},r){const n=_rt(t);return ue(`h${n}`,{...i,"aria-level":String(n),class:$_e(Ht.heading,e),role:"heading"},r)}function _rt(t){return ua(Math.ceil(t),1,6)}const fU="esri-feature-element-info",mU={base:fU,title:`${fU}__title`,description:`${fU}__description`};let Wh=class extends da{constructor(e,i){super(e,i),this.description=null,this.headingLevel=2,this.title=null}render(){return ue("div",{class:mU.base},this._renderTitle(),this._renderDescription())}_renderTitle(){const{title:e}=this;return e?ue(IJ,{class:mU.title,innerHTML:e,level:this.headingLevel}):null}_renderDescription(){const{description:e}=this;return e?ue("div",{class:mU.description,innerHTML:e,key:"description"}):null}};d([f()],Wh.prototype,"description",void 0),d([f()],Wh.prototype,"headingLevel",void 0),d([f()],Wh.prototype,"title",void 0),Wh=d([V("esri.widgets.Feature.support.FeatureElementInfo")],Wh);const xrt={base:"esri-feature-attachments"};let kh=class extends da{constructor(e,i){super(e,i),this._featureElementInfo=null,this.attachmentsWidget=new ys,this.headingLevel=2,this.viewModel=new q0}initialize(){this._featureElementInfo=new Wh,this.addHandles([be(()=>{var e,i;return[(e=this.viewModel)==null?void 0:e.description,(i=this.viewModel)==null?void 0:i.title,this.headingLevel]},()=>this._setupFeatureElementInfo(),Ft),be(()=>this.viewModel,e=>this.attachmentsWidget.viewModel=e,Ft)])}destroy(){var e;this.attachmentsWidget.viewModel=null,this.attachmentsWidget.destroy(),(e=this._featureElementInfo)==null||e.destroy()}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get displayType(){return this.attachmentsWidget.displayType}set displayType(e){this.attachmentsWidget.displayType=e}get graphic(){return this.viewModel.graphic}set graphic(e){this.viewModel.graphic=e}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}render(){var i;const{attachmentsWidget:e}=this;return ue("div",{class:xrt.base},(i=this._featureElementInfo)==null?void 0:i.render(),e==null?void 0:e.render())}_setupFeatureElementInfo(){var n;const{description:e,title:i,headingLevel:r}=this;(n=this._featureElementInfo)==null||n.set({description:e,title:i,headingLevel:r})}};d([f({readOnly:!0})],kh.prototype,"attachmentsWidget",void 0),d([f()],kh.prototype,"description",null),d([f()],kh.prototype,"displayType",null),d([f()],kh.prototype,"graphic",null),d([f()],kh.prototype,"headingLevel",void 0),d([f()],kh.prototype,"title",null),d([f({type:q0})],kh.prototype,"viewModel",void 0),kh=d([V("esri.widgets.Feature.FeatureAttachments")],kh);let _d=class extends et{constructor(e){super(e),this._loadingPromise=null,this.created=null,this.creator=null,this.destroyer=null,this.graphic=null,this.addHandles(be(()=>this.creator,i=>{this._destroyContent(),this._createContent(i)},Ft))}destroy(){this._destroyContent()}get state(){return this._loadingPromise?"loading":"ready"}_destroyContent(){const{created:e,graphic:i,destroyer:r}=this;e&&i&&(RE({type:"content",value:r,event:{graphic:i}}),this._set("created",null))}async _createContent(e){const i=this.graphic;if(!i||!e)return;const r=RE({type:"content",value:e,event:{graphic:i}});this._loadingPromise=r,this.notifyChange("state");const n=await r;r===this._loadingPromise&&(this._loadingPromise=null,this.notifyChange("state"),this._set("created",n))}};d([f({readOnly:!0})],_d.prototype,"created",void 0),d([f()],_d.prototype,"creator",void 0),d([f()],_d.prototype,"destroyer",void 0),d([f({type:sr})],_d.prototype,"graphic",void 0),d([f({readOnly:!0})],_d.prototype,"state",null),_d=d([V("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],_d);function w$e(t){return e=>{e.hasOwnProperty("_delegatedEventNames")||(e._delegatedEventNames=e._delegatedEventNames?e._delegatedEventNames.slice():[]);const i=e._delegatedEventNames;t=Array.isArray(t)?t:$rt(t),i.push(...t)}}function $rt(t){return t.split(",").map(e=>e.trim())}function _$e(t){return t&&typeof t.render=="function"}function Srt(t){return t&&typeof t.postMixInProperties=="function"&&typeof t.buildRendering=="function"&&typeof t.postCreate=="function"&&typeof t.startup=="function"}const gU="esri-feature-content",yU={base:gU,loaderContainer:`${gU}__loader-container`,loader:`${gU}__loader`};let Am=class extends da{constructor(e,i){super(e,i),this.viewModel=null,this._addTargetToAnchors=r=>{Array.from(r.querySelectorAll("a")).forEach(n=>{bJ(n.href)&&!n.hasAttribute("target")&&n.setAttribute("target","_blank")})}}get creator(){var e;return(e=this.viewModel)==null?void 0:e.creator}set creator(e){this.viewModel&&(this.viewModel.creator=e)}get graphic(){var e;return(e=this.viewModel)==null?void 0:e.graphic}set graphic(e){this.viewModel&&(this.viewModel.graphic=e)}render(){var i;const e=(i=this.viewModel)==null?void 0:i.state;return ue("div",{class:yU.base},e==="loading"?this._renderLoading():this._renderCreated())}_renderLoading(){return ue("div",{class:yU.loaderContainer,key:"loader"},ue("div",{class:yU.loader}))}_renderCreated(){var i;const e=(i=this.viewModel)==null?void 0:i.created;return e?e instanceof HTMLElement?ue("div",{afterCreate:this._attachToNode,bind:e,key:e}):_$e(e)?ue("div",{key:e},!e.destroyed&&e.render()):ue("div",{afterCreate:this._addTargetToAnchors,innerHTML:e,key:e}):null}_attachToNode(e){const i=this;e.appendChild(i)}};d([f()],Am.prototype,"creator",null),d([f()],Am.prototype,"graphic",null),d([f({type:_d})],Am.prototype,"viewModel",void 0),Am=d([V("esri.widgets.Feature.FeatureContent")],Am);let ko=class extends et{constructor(e){super(e),this.attributes=null,this.expressionInfos=null,this.description=null,this.fieldInfos=null,this.isContentFieldInfos=!1,this.graphic=null,this.layer=null,this.title=null}get formattedFieldInfos(){const{expressionInfos:e,fieldInfos:i,layer:r,isContentFieldInfos:n,graphic:s}=this,a=[];return i==null||i.forEach(o=>{if(!(!o.hasOwnProperty("visible")||o.visible))return;const l=o.clone();l.label=az({fieldInfo:l,expressionInfos:e,layer:r,graphic:s,isContentFieldInfos:n}),WT(r)&&A5({fieldInfo:o,graphic:s})&&(l.fieldFormat=wJ({fieldInfo:l,isContentFieldInfos:n,layer:r})),a.push(l)}),a}};d([f()],ko.prototype,"attributes",void 0),d([f({type:[Gt]})],ko.prototype,"expressionInfos",void 0),d([f()],ko.prototype,"description",void 0),d([f({type:[Ss]})],ko.prototype,"fieldInfos",void 0),d([f({readOnly:!0})],ko.prototype,"formattedFieldInfos",null),d([f()],ko.prototype,"isContentFieldInfos",void 0),d([f()],ko.prototype,"graphic",void 0),d([f()],ko.prototype,"layer",void 0),d([f()],ko.prototype,"title",void 0),ko=d([V("esri.widgets.Feature.FeatureFields.FeatureFieldsViewModel")],ko);const Trt=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,target:"_blank",label:"{messages.view}"},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"App Studio Player"},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Collector"},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Explorer"},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Navigator"},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Survey123"},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Trek2There"},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Workforce"},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"iForm"},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"FlowFinity"},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Laserfische"},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Microsoft Power Bi"}];function Irt(t,e){if(typeof e!="string"||!e)return e;const i=Trt.find(l=>l.pattern.test(e));if(!i)return e;const r=e.match(i.pattern),n=r==null?void 0:r[2],s=Ho(Ho(i.label,{messages:t,hierPart:n}),{appName:i.appName}),a=i.target?` target="${i.target}"`:"",o=i.target==="_blank"?' rel="noreferrer"':"";return VD.sanitizeUrl(El(e)).replace(i.pattern,`<a${a} href="$1"${o}>${s}</a>`)}const GO="esri-feature-fields",WO={base:GO,fieldHeader:`${GO}__field-header`,fieldData:`${GO}__field-data`,fieldDataDate:`${GO}__field-data--date`};let iu=class extends da{constructor(e,i){super(e,i),this._featureElementInfo=null,this.viewModel=new ko,this.messages=null,this.messagesURIUtils=null}initialize(){this._featureElementInfo=new Wh,this.addHandles(be(()=>{var e,i;return[(e=this.viewModel)==null?void 0:e.description,(i=this.viewModel)==null?void 0:i.title]},()=>this._setupFeatureElementInfo(),Ft))}destroy(){var e;(e=this._featureElementInfo)==null||e.destroy()}get attributes(){return this.viewModel.attributes}set attributes(e){this.viewModel.attributes=e}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get expressionInfos(){return this.viewModel.expressionInfos}set expressionInfos(e){this.viewModel.expressionInfos=e}get fieldInfos(){return this.viewModel.fieldInfos}set fieldInfos(e){this.viewModel.fieldInfos=e}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}render(){var e;return ue("div",{class:WO.base},(e=this._featureElementInfo)==null?void 0:e.render(),this._renderFields())}_renderFieldInfo(e,i){var h;const{attributes:r}=this.viewModel,n=e.fieldName||"",s=e.label||n,a=r?r[n]==null?"":r[n]:"",o=((h=e==null?void 0:e.fieldFormat)==null?void 0:h.type)==="date-time",l=typeof a=="number"&&!o?this._forceLTR(a):Irt(this.messagesURIUtils,a),c={[WO.fieldDataDate]:o};return ue("tr",{key:`fields-element-info-row-${n}-${i}`},ue("th",{class:WO.fieldHeader,innerHTML:s,key:`fields-element-info-row-header-${n}-${i}`}),ue("td",{class:this.classes(WO.fieldData,c),innerHTML:l,key:`fields-element-info-row-data-${n}-${i}`}))}_renderFields(){const{formattedFieldInfos:e}=this.viewModel;return e!=null&&e.length?ue("table",{class:Ht.table,summary:this.messages.fieldsSummary},ue("tbody",null,e.map((i,r)=>this._renderFieldInfo(i,r)))):null}_setupFeatureElementInfo(){var r;const{description:e,title:i}=this;(r=this._featureElementInfo)==null||r.set({description:e,title:i})}_forceLTR(e){return`&lrm;${e}`}};d([f()],iu.prototype,"attributes",null),d([f()],iu.prototype,"description",null),d([f()],iu.prototype,"expressionInfos",null),d([f()],iu.prototype,"fieldInfos",null),d([f()],iu.prototype,"title",null),d([f({type:ko,nonNullable:!0})],iu.prototype,"viewModel",void 0),d([f(),js("esri/widgets/Feature/t9n/Feature")],iu.prototype,"messages",void 0),d([f(),js("esri/widgets/support/t9n/uriUtils")],iu.prototype,"messagesURIUtils",void 0),iu=d([V("esri.widgets.Feature.FeatureFields")],iu);const Mrt=/^-?(\d+)(\.(\d+))?$/i;function Crt(t,e){return t-e}function Ert(t,e){let i,r;return i=Number(t.toFixed(e)),i<t?r=i+1/10**e:(r=i,i-=1/10**e),i=Number(i.toFixed(e)),r=Number(r.toFixed(e)),[i,r]}function krt(t,e,i,r,n){const s=cF(t,e,i,r),a=s.previous==null||s.previous<=n,o=s.next==null||s.next<=n;return a&&o||s.previous+s.next<=2*n}function cz(t){const e=String(t),i=e.match(Mrt);if(i!=null&&i[1])return{integer:i[1].split("").length,fractional:i[3]?i[3].split("").length:0};if(e.toLowerCase().includes("e")){const r=e.split("e"),n=r[0],s=r[1];if(n&&s){const a=Number(n);let o=Number(s);const l=o>0;l||(o=Math.abs(o));const c=cz(a);return l?(c.integer+=o,o>c.fractional?c.fractional=0:c.fractional-=o):(c.fractional+=o,o>c.integer?c.integer=1:c.integer-=o),c}}return{integer:0,fractional:0}}function cF(t,e,i,r){const n={previous:null,next:null};if(i!=null){const s=t-i,a=e-i-s;n.previous=Math.floor(Math.abs(100*a/s))}if(r!=null){const s=r-t,a=r-e-s;n.next=Math.floor(Math.abs(100*a/s))}return n}function uz(t,e={}){const i=t.slice(),{tolerance:r=2,strictBounds:n=!1,indexes:s=i.map((a,o)=>o)}=e;s.sort(Crt);for(let a=0;a<s.length;a++){const o=s[a],l=i[o],c=o===0?null:i[o-1],h=o===i.length-1?null:i[o+1],m=cz(l).fractional;if(m){let g,v=0,b=!1;for(;v<=m&&!b;){const x=Ert(l,v);g=n&&a===0?x[1]:x[0],b=krt(l,g,c,h,r),v++}b&&(i[o]=g)}}return i}const Art={maximumFractionDigits:20};function Prt(t){return or(t,Art)}function x$e(t,e,i,r){if(t)if(t.type!=="CIMTextSymbol"){if(t.effects)for(const n of t.effects)sle(n,e);if(t.symbolLayers)for(const n of t.symbolLayers){switch(n.type){case"CIMPictureMarker":case"CIMVectorMarker":Ort(n,e,r);break;case"CIMPictureStroke":case"CIMSolidStroke":case"CIMGradientStroke":!(r!=null&&r.preserveOutlineWidth)&&n.width&&(n.width*=e);break;case"CIMPictureFill":n.height&&(n.height*=e),n.offsetX&&(n.offsetX*=e),n.offsetY&&(n.offsetY*=e);break;case"CIMHatchFill":x$e(n.lineSymbol,e,!0,{...r,preserveOutlineWidth:!1}),n.offsetX&&(n.offsetX*=e),n.offsetY&&(n.offsetY*=e),n.separation&&(n.separation*=e)}if(n.effects)for(const s of n.effects)sle(s,e)}}else t.height!=null&&(t.height*=e)}function Ort(t,e,i){if(t&&(t.markerPlacement&&Lrt(t.markerPlacement,e),t.offsetX&&(t.offsetX*=e),t.offsetY&&(t.offsetY*=e),t.anchorPoint&&t.anchorPointUnits==="Absolute"&&(t.anchorPoint={x:t.anchorPoint.x*e,y:t.anchorPoint.y*e}),t.size=t.size!=null?t.size*e:0,t.type==="CIMVectorMarker"&&t.markerGraphics))for(const r of t.markerGraphics)t.scaleSymbolsProportionally||x$e(r.symbol,e,!0,i)}function Lrt(t,e){switch(I5(t)&&t.offset&&(t.offset*=e),t.type){case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineSameSize":if(t.customEndingOffset&&(t.customEndingOffset*=e),t.offsetAlongLine&&(t.offsetAlongLine*=e),t.placementTemplate&&t.placementTemplate.length){const i=t.placementTemplate.map(r=>r*e);t.placementTemplate=i}break;case"CIMMarkerPlacementAlongLineVariableSize":if(t.maxRandomOffset&&(t.maxRandomOffset*=e),t.placementTemplate&&t.placementTemplate.length){const i=t.placementTemplate.map(r=>r*e);t.placementTemplate=i}break;case"CIMMarkerPlacementOnLine":t.startPointOffset&&(t.startPointOffset*=e);break;case"CIMMarkerPlacementAtExtremities":t.offsetAlongLine&&(t.offsetAlongLine*=e);break;case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementOnVertices":break;case"CIMMarkerPlacementAtRatioPositions":t.beginPosition&&(t.beginPosition*=e),t.endPosition&&(t.endPosition*=e);break;case"CIMMarkerPlacementPolygonCenter":t.offsetX&&(t.offsetX*=e),t.offsetY&&(t.offsetY*=e);break;case"CIMMarkerPlacementInsidePolygon":t.offsetX&&(t.offsetX*=e),t.offsetY&&(t.offsetY*=e),t.stepX&&(t.stepX*=e),t.stepY&&(t.stepY*=e)}}function sle(t,e){switch(t.type){case"CIMGeometricEffectArrow":case"CIMGeometricEffectDonut":t.width&&(t.width*=e);break;case"CIMGeometricEffectBuffer":t.size&&(t.size*=e);break;case"CIMGeometricEffectCut":t.beginCut&&(t.beginCut*=e),t.endCut&&(t.endCut*=e),t.middleCut&&(t.middleCut*=e);break;case"CIMGeometricEffectDashes":if(t.customEndingOffset&&(t.customEndingOffset*=e),t.offsetAlongLine&&(t.offsetAlongLine*=e),t.dashTemplate&&t.dashTemplate.length){const i=t.dashTemplate.map(r=>r*e);t.dashTemplate=i}break;case"CIMGeometricEffectExtension":case"CIMGeometricEffectJog":case"CIMGeometricEffectRadial":t.length&&(t.length*=e);break;case"CIMGeometricEffectMove":t.offsetX&&(t.offsetX*=e),t.offsetY&&(t.offsetY*=e);break;case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":t.offset&&(t.offset*=e);break;case"CIMGeometricEffectRegularPolygon":t.radius&&(t.radius*=e);break;case"CIMGeometricEffectTaperedPolygon":t.fromWidth&&(t.fromWidth*=e),t.length&&(t.length*=e),t.toWidth&&(t.toWidth*=e);break;case"CIMGeometricEffectWave":t.amplitude&&(t.amplitude*=e),t.period&&(t.period*=e)}}function $$e(t){const e=[];return WH(uJ(t),e),e.length?new Se($xe(e[0])):null}function WH(t,e){var n;if(!t)return;let i;i=t.type==="CIMTextSymbol"?t.symbol:t;const r=t.type==="CIMPolygonSymbol";if(i!=null&&i.symbolLayers){for(const s of i.symbolLayers)if(!(s.colorLocked||r&&(Sxe(s)||dJ(s)&&s.markerPlacement&&I5(s.markerPlacement))))switch(s.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":s.tintColor&&dz(e,s.tintColor);break;case"CIMVectorMarker":(n=s.markerGraphics)==null||n.forEach(a=>{WH(a.symbol,e)});break;case"CIMSolidStroke":case"CIMSolidFill":dz(e,s.color);break;case"CIMGradientFill":Frt(e,s);break;case"CIMHatchFill":WH(s.lineSymbol,e)}}}function dz(t,e){for(const i of t)if(i.join(".")===e.join("."))return;t.push(e)}function Frt(t,e){var r,n;switch((r=e.colorRamp)==null?void 0:r.type){case"CIMMultipartColorRamp":(n=e.colorRamp.colorRamps)==null||n.forEach(s=>{s.type==="CIMLinearContinuousColorRamp"&&ale(t,s)});break;case"CIMLinearContinuousColorRamp":case"CIMPolarContinuousColorRamp":ale(t,e.colorRamp)}}function ale(t,e){e&&(e.fromColor&&dz(t,e.fromColor),e.toColor&&dz(t,e.toColor))}function S$e(t,e,i){e instanceof Se||(e=new Se(e));const r=uJ(t);r&&ZH(r,e)}function ZH(t,e,i){var s;if(!t)return;let r;r=t.type==="CIMTextSymbol"?t.symbol:t;const n=(r==null?void 0:r.type)==="CIMPolygonSymbol";if(r!=null&&r.symbolLayers)for(const a of r.symbolLayers){if(a.colorLocked||n&&(Sxe(a)||dJ(a)&&a.markerPlacement&&I5(a.markerPlacement)))continue;const o=e.toArray();switch(a.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":a.tintColor=o;break;case"CIMVectorMarker":(s=a.markerGraphics)==null||s.forEach(l=>{ZH(l.symbol,e)});break;case"CIMSolidStroke":case"CIMSolidFill":a.color=o;break;case"CIMGradientFill":Rrt(a,e);break;case"CIMHatchFill":ZH(a.lineSymbol,e)}}}function Rrt(t,e){var r,n;switch((r=t.colorRamp)==null?void 0:r.type){case"CIMMultipartColorRamp":(n=t.colorRamp.colorRamps)==null||n.forEach(s=>{s.type==="CIMLinearContinuousColorRamp"&&ole(s,e)});break;case"CIMLinearContinuousColorRamp":case"CIMPolarContinuousColorRamp":ole(t.colorRamp,e)}}function ole(t,e){if(t&&(t.fromColor&&(t.fromColor=e.toArray()),t.toColor)){const i=e.clone();i.a=0,t.toColor=i.toArray()}}function zrt(t,e,i=!1){const r=uJ(t);if(i&&(e=360-e),(r==null?void 0:r.type)!=="CIMTextSymbol"){if((r==null?void 0:r.type)==="CIMPointSymbol"&&r.symbolLayers){const n=e-(r.angle||0);for(const s of r.symbolLayers)if(dJ(s)){let a=s.rotation||0;s.rotateClockwise?a-=n:a+=n,s.rotation=a}r.angle=e}}else r.angle=e}const T$e="picture-fill",I$e="simple-fill",Nrt="simple-line",M$e="simple-marker",Drt="text",jrt="cim",lle=new Map([["dash",[4,3]],["dashdot",[4,3,1,3]],["dot",[1,3]],["longdash",[8,3]],["longdashdot",[8,3,1,3]],["longdashdotdot",[8,3,1,3,1,3]],["shortdash",[4,1]],["shortdashdot",[4,1,1,1]],["shortdashdotdot",[4,1,1,1,1,1]],["shortdot",[1,1]],["solid",[]]]),cle=new sxe(1e3);function Vrt(t){const e=t.style;let i=null;if(t)switch(t.type){case M$e:e!=="cross"&&e!=="x"&&(i=t.color);break;case I$e:e&&e!=="solid"?e!=="none"&&(i={type:"pattern",x:0,y:0,src:Hr(`esri/symbols/patterns/${e}.png`),width:5,height:5}):i=t.color;break;case T$e:i={type:"pattern",src:t.url,width:Di(t.width)*t.xscale,height:Di(t.height)*t.yscale,x:Di(t.xoffset),y:Di(t.yoffset)};break;case Drt:i=t.color;break;case jrt:i=$$e(t)}return i}function Urt(t,e){const i=t+"-"+e,r=cle.get(i);return r!=null?Promise.resolve(r):mi(t,{responseType:"image"}).then(n=>{const s=n.data,a=s.naturalWidth,o=s.naturalHeight,l=document.createElement("canvas");l.width=a,l.height=o;const c=l.getContext("2d");c.fillStyle=e,c.fillRect(0,0,a,o),c.globalCompositeOperation="destination-in",c.drawImage(s,0,0);const h=l.toDataURL();return cle.put(i,h),h})}function zE(t){if(!t)return null;let e=null;switch(t.type){case I$e:case T$e:case M$e:e=zE(t.outline);break;case Nrt:{const i=Di(t.width);t.style!=null&&t.style!=="none"&&i!==0&&(e={color:t.color,style:MJ(t.style),width:i,cap:t.cap,join:t.join==="miter"?Di(t.miterLimit):t.join},e.dashArray=C$e(e).join(",")||"none");break}default:e=null}return e}function C$e(t){if(!(t!=null&&t.style))return[];const{dashArray:e,style:i,width:r}=t;if(typeof e=="string"&&e!=="none")return e.split(",").map(a=>Number(a));const n=r??0,s=lle.has(i)?lle.get(i).map(a=>a*n):[];if(t.cap!=="butt")for(const[a,o]of s.entries())s[a]=a%2==1?o+n:Math.max(o-n,1);return s}const MJ=(()=>{const t={};return e=>{if(t[e])return t[e];const i=e.replaceAll("-","");return t[e]=i,i}})(),Brt=new Se([128,128,128]);function qrt(t){var i,r;const e=(i=t.symbolLayers)==null?void 0:i.at(-1);if(e&&"outline"in e)return(r=e==null?void 0:e.outline)==null?void 0:r.size}function Hrt(t){var e;if(!t)return 0;if(qd(t)){const i=qrt(t);return i??0}return Qi((e=zE(t))==null?void 0:e.width)}function O5(t){if(t==null||!("symbolLayers"in t)||t.symbolLayers==null)return!1;switch(t.type){case"point-3d":return t.symbolLayers.some(e=>e.type==="object");case"line-3d":return t.symbolLayers.some(e=>e.type==="path");case"polygon-3d":return t.symbolLayers.some(e=>e.type==="object"||e.type==="extrude");default:return!1}}function Grt(t){var e;return((e=t.resource)==null?void 0:e.href)??""}function N1(t,e){if(!t)return null;let i=null;return qd(t)?i=Wrt(t):n5(t)&&(i=t.type==="cim"?$$e(t):t.color?new Se(t.color):null),i?X$(i,e):null}function Wrt(t){const e=t.symbolLayers;if(!e)return null;let i=null;return e.forEach(r=>{var n;r.type==="object"&&((n=r.resource)!=null&&n.href)||(i=r.type==="water"?r.color:r.material?r.material.color:null)}),i?new Se(i):null}function X$(t,e){if(e==null||t==null)return t;const i=t.toRgba();return i[3]=i[3]*e,new Se(i)}function Zrt(t,e,i){const r=t.symbolLayers;if(!r)return;const n=(s,a=!1)=>{let o=e??s??null;return(i==null?void 0:i.override)!=null&&(!o&&a&&(o=new Se([255,255,255])),o&&(o.a=i.override)),X$(o,i==null?void 0:i.add)};r.forEach(s=>{var l,c;if(s.type==="water")return void(s.color=X$(s.color,i==null?void 0:i.add));const a=s.material!=null?s.material.color:null,o=n(a,s.type==="icon"&&((l=s.resource)==null?void 0:l.href)!=null);s.material==null?s.material=new Al({color:o}):s.material.color=o,"outline"in s&&((c=s.outline)!=null&&c.color)&&(i==null?void 0:i.add)!=null&&(s.outline.color=X$(s.outline.color,i.add)),"marker"in s&&s.marker!=null&&(s.marker.color=n(s.marker.color))})}function Yrt(t,e,i){var r;e=e??t.color,(i==null?void 0:i.override)!=null&&e&&(e.a=i.override),e&&(t.color=X$(e,i==null?void 0:i.add)),"outline"in t&&((r=t.outline)!=null&&r.color)&&(t.outline.color=X$(t.outline.color,i==null?void 0:i.add))}function vU(t,e,i){t&&(e||i!=null)&&(e&&(e=new Se(e)),qd(t)?Zrt(t,e,i):n5(t)&&Yrt(t,e,i))}async function Jrt(t,e){const i=t.symbolLayers;i&&await Wje(i,async r=>Xrt(r,e))}async function Xrt(t,e){switch(t.type){case"extrude":Krt(t,e);break;case"icon":case"line":case"text":Qrt(t,e);break;case"path":tnt(t,e);break;case"object":await ent(t,e)}}function Qrt(t,e){const i=E$e(e);i!=null&&(t.size=i)}function E$e(t){for(const e of t)if(typeof e=="number")return e;return null}function Krt(t,e){const i=e[2];typeof i=="number"&&(t.size=i)}async function ent(t,e){const{resourceSize:i,symbolSize:r}=await int(t),n=k$e(e,i,r);n!=null&&(t.width=N2(e[0],r[0],i[0],n),t.depth=N2(e[1],r[1],i[1],n),t.height=N2(e[2],r[2],i[2],n))}function tnt(t,e){const i=k$e(e,Vye,[t.width,void 0,t.height]);i!=null&&(t.width=N2(e[0],t.width,1,i),t.height=N2(e[2],t.height,1,i))}function k$e(t,e,i){for(let r=0;r<3;r++){const n=t[r];switch(n){case"symbol-value":{const s=i[r];return s!=null?s/e[r]:1}case"proportional":break;default:if(n&&e[r])return n/e[r]}}return null}async function int(t){const{computeObjectLayerResourceSize:e}=await de(()=>import("./symbolLayerUtils-CDuehBHf.js"),[]),i=await e(t,10),{width:r,height:n,depth:s}=t,a=[r,s,n];let o=1;for(let l=0;l<3;l++){const c=a[l];if(c!=null){o=c/i[l];break}}for(let l=0;l<3;l++)a[l]==null&&(a[l]=i[l]*o);return{resourceSize:i,symbolSize:a}}function N2(t,e,i,r){switch(t){case"proportional":return i*r;case"symbol-value":return e??i;default:return t}}function rnt(t,e){const i=E$e(e);if(i!=null)switch(t.type){case"simple-marker":t.size=i;break;case"picture-marker":{const r=t.width/t.height;r>1?(t.width=i,t.height=i*r):(t.width=i*r,t.height=i);break}case"simple-line":t.width=i;break;case"text":t.font.size=i}}async function nnt(t,e){if(t&&e)return qd(t)?Jrt(t,e):void(n5(t)&&rnt(t,e))}function snt(t,e,i){if(t&&e!=null){if(qd(t)){const r=t.symbolLayers;r&&r.forEach(n=>{if(n.type==="object")switch(i){case"tilt":n.tilt=(n.tilt??0)+e;break;case"roll":n.roll=(n.roll??0)+e;break;default:n.heading=(n.heading??0)+e}n.type==="icon"&&(n.angle+=e)})}else if(n5(t))switch(t.type){case"simple-marker":case"picture-marker":case"text":t.angle+=e;break;case"cim":zrt(t,e,!0)}}}function ant(t,e){if(!t)return null;const i=t.effects.map(r=>r.toJSON());return W7(i)}function wAt(t){return t!=null&&t.type==="polygon-3d"&&t.symbolLayers.some(e=>e.type==="extrude")}const A$e="<",P$e=">";function O$e(t,e,i,r){let n="";e===0?n=`${A$e} `:e===i&&(n=`${P$e} `);const s=uF(t,r);return s==null?"":n+s}function ont(t){const{format:e,fieldFormat:i}=t||{};return(i==null?void 0:i.type)==="number"||!!e&&e.dateFormat==null&&(e.places!=null||e.digitSeparator!=null)}function uF(t,e){if(t==null)return t;const{fieldType:i,format:r,fieldFormat:n,timeZoneOptions:s}=e||{};if(CJ(i))return yJ(t,{fieldType:i,format:r==null?void 0:r.dateFormat,fieldFormat:(n==null?void 0:n.type)==="date-time"?n:void 0,timeZoneOptions:s});if(typeof t=="string"&&ont(e)){const o=Number(t);isNaN(o)||(t=o)}if(typeof t=="string")return t;const a=(n==null?void 0:n.type)==="number"?Mye(n):r?Dk(r):void 0;return a?or(t,a):Prt(t)}const lnt=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwcdIkqhiWn5fHwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6JrzFUAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwaeIkqhiWl5/HwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6sKxboAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwadJEqhiWl5fPwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu75+IUcAAAAASUVORK5CYII="];async function YH(t){if(!("visualVariables"in t)||!t.visualVariables)return null;const e=t.visualVariables.find(a=>a.type==="color");if(!e)return null;let i=null,r=null;if(e.stops){if(e.stops.length===1)return e.stops[0].color;i=e.stops[0].value,r=e.stops[e.stops.length-1].value}const n=i!=null&&r!=null?i+(r-i)/2:0,{getColor:s}=await de(async()=>{const{getColor:a}=await Promise.resolve().then(()=>$_);return{getColor:a}},void 0);return s(e,n)??null}async function L$e(t,e){const i=t.trailCap,r=t.trailWidth||1,n=e||await YH(t)||t.color;return new xn({cap:i,color:n,width:r})}function cnt(t,e){var i,r;if(!e)return null;if("featureReduction"in t)switch((i=t.featureReduction)==null?void 0:i.type){case"cluster":case"binning":{const n=t.featureReduction.fields.find(({name:s})=>s.toLowerCase()===e.toLowerCase());return n&&"getField"in t?t.getField(n.onStatisticField):null}}return"getField"in t?(r=t.getField)==null?void 0:r.call(t,e):null}function unt(t,e){var r;const i="popupTemplate"in t?(r=t.popupTemplate)==null?void 0:r.fieldInfos:null;if(i!=null&&i.length&&e)return i.find(n=>{var s;return((s=n.fieldName)==null?void 0:s.toLowerCase())===e.toLowerCase()})}function ule(t){var r,n,s,a;let e=0,i=0;return t.stops?(e=((n=(r=t.stops)==null?void 0:r.at(0))==null?void 0:n.value)??e,i=((a=(s=t.stops)==null?void 0:s.at(-1))==null?void 0:a.value)??i):"minDataValue"in t&&"maxDataValue"in t&&(e=t.minDataValue??e,i=t.maxDataValue??i),i-e>2*d9.days?"short-date":"short-date-short-time"}function CJ(t){return["date","date-only","time-only","timestamp-offset"].includes(t||"")}function F$e(t){return WT(t)&&!("featureReduction"in t&&t.featureReduction)}function dnt(t,e,i){const r=dF(t,e.field,i);return r?(CJ(r.fieldType)&&(F$e(t)?r.fieldFormat??(r.fieldFormat=new vv({dateStyle:"short",timeStyle:ule(e)==="short-date-short-time"?"short":null})):r.format??(r.format=new $n({dateFormat:ule(e)}))),r):null}function dF(t,e,i){var o,l;const r=cnt(t,e),n=r==null?void 0:r.name;if(!n)return null;const s=r==null?void 0:r.type,a=F$e(t);return{fieldType:s,format:a?null:(o=unt(t,n))==null?void 0:o.format,fieldFormat:a?(l=t.getFieldConfiguration(n))==null?void 0:l.fieldFormat:null,timeZoneOptions:CJ(s)?{layerTimeZone:"preferredTimeZone"in t?t.preferredTimeZone:null,viewTimeZone:i,datesInUnknownTimezone:"datesInUnknownTimezone"in t&&t.datesInUnknownTimezone}:null}}function Sp(t,e){var i,r;if("authoringInfo"in t)return(r=(i=t.authoringInfo)==null?void 0:i.visualVariables)==null?void 0:r.find(({theme:n})=>n===e)}function hnt(t,e){let i=t??"";return e!=null&&e&&(i=i?"("+i+") AND ("+e+")":e),i}const pnt=new Se([64,64,64]);function R$e(t,e){const i=[],r=t.length-1;return t.length===5?i.push(0,2,4):i.push(0,r),t.map((n,s)=>i.includes(s)?O$e(n,s,r,e):null)}async function JH(t,e,i){let r=!1,n=[],s=[];if(t.stops){const c=t.stops;n=c.map(h=>h.value),r=c.some(h=>!!h.label),r&&(s=c.map(h=>h.label))}const a=n[0],o=n[n.length-1];if(a==null&&o==null)return null;const l=r?null:R$e(n,i);return(await Promise.all(n.map(async(c,h)=>{const m=t.type==="opacity"?await fnt(c,t,e):(await de(async()=>{const{getColor:v}=await Promise.resolve().then(()=>$_);return{getColor:v}},void 0)).getColor(t,c),g=r?s[h]:(l==null?void 0:l[h])??"";return m==null?null:{value:c,color:m,label:g}}))).filter(ln).reverse()}async function fnt(t,e,i){const r=new Se(i??pnt),n=(await de(async()=>{const{getOpacity:s}=await Promise.resolve().then(()=>$_);return{getOpacity:s}},void 0)).getOpacity(e,t);return n!=null&&(r.a=n),r}function mnt(t){let e=!1,i=[],r=[];i=t.map(o=>o.value),e=t.some(o=>!!o.label),e&&(r=t.map(o=>o.label??""));const n=i[0],s=i[i.length-1];if(n==null&&s==null)return null;const a=e?null:R$e(i);return i.map((o,l)=>({value:o,color:z$e(o,t),label:e?r[l]:(a==null?void 0:a[l])??""})).reverse()}function z$e(t,e){const{startIndex:i,endIndex:r,weight:n}=gnt(t,e);if(i===r)return e[i].color;const s=Se.blendColors(e[i].color,e[r].color,n);return new Se(s)}function gnt(t,e){let i=0,r=e.length-1;return e.some((n,s)=>t<n.value?(r=s,!0):(i=s,!1)),{startIndex:i,endIndex:r,weight:(t-e[i].value)/(e[r].value-e[i].value)}}function ynt(t,e){let i=[];if(t&&t.type==="multipart")t.colorRamps.reverse().forEach((r,n)=>{n===0?i.push({value:e.max,color:new Se(r.toColor),label:"high"}):i.push({value:null,color:new Se(r.toColor),label:""}),n===t.colorRamps.length-1?i.push({value:e.min,color:new Se(r.fromColor),label:"low"}):i.push({value:null,color:new Se(r.fromColor),label:""})});else{let r,n;t&&t.type==="algorithmic"?(r=t.fromColor,n=t.toColor):(r=[0,0,0,1],n=[255,255,255,1]),i=[{value:e.max,color:new Se(n),label:"high"},{value:e.min,color:new Se(r),label:"low"}]}return i}function N$e(t){if(!t.colorStops)return[];const e=[...t.colorStops].filter(r=>{var n;return((n=r.color)==null?void 0:n.a)>0});let i=e.length-1;if(e&&e[0]){const r=e[i];r&&r.ratio!==1&&(e.push(new Fm({ratio:1,color:r.color})),i++)}return e.map((r,n)=>{var a,o;let s="";return n===0?s=((a=t.legendOptions)==null?void 0:a.minLabel)||"low":n===i&&(s=((o=t.legendOptions)==null?void 0:o.maxLabel)||"high"),{color:r.color,label:s,ratio:r.ratio}}).reverse()}async function Yl(t,e,i){Gp(t,e,()=>[]).push(...i)}async function D$e(t){var i,r;const e=new Map;if(!t)return e;if("visualVariables"in t&&t.visualVariables){for(const n of t.visualVariables)if(vnt(n)){const s=(await JH(n)??[]).map(a=>a.color);await Yl(e,n.field||n.valueExpression,s)}}if(t.type==="heatmap"){const n=N$e(t).map(s=>s.color);await Yl(e,t.field||t.valueExpression,n)}else if(t.type==="pie-chart"){for(const n of t.attributes)await Yl(e,n.field||n.valueExpression,[n.color]);await Yl(e,"default",[(i=t==null?void 0:t.othersCategory)==null?void 0:i.color,N1(t.backgroundFillSymbol,null)])}else if(t.type==="dot-density"){for(const n of t.attributes)await Yl(e,n.field||n.valueExpression,[n.color]);await Yl(e,"default",[t.backgroundColor])}else if(t.type==="unique-value")if(((r=t.authoringInfo)==null?void 0:r.type)==="predominance")for(const n of t.uniqueValueInfos??[])await Yl(e,n.value.toString(),[N1(n.symbol,null)]);else{const n=(t.uniqueValueInfos??[]).map(c=>N1(c.symbol,null)),{field:s,field2:a,field3:o,valueExpression:l}=t;(s||l)&&await Yl(e,s||l,n),a&&await Yl(e,a,n),o&&await Yl(e,o,n)}else if(t.type==="class-breaks"){const n=t.classBreakInfos.map(o=>N1(o.symbol,null)),{field:s,valueExpression:a}=t;await Yl(e,s??a,n)}else t.type==="simple"&&await Yl(e,"default",[N1(t.symbol,null)]);return"defaultSymbol"in t&&t.defaultSymbol&&await Yl(e,"default",[N1(t.defaultSymbol,null)]),e.forEach((n,s)=>{const a=oD(n.filter(Boolean),(o,l)=>JSON.stringify(o)===JSON.stringify(l));e.set(s,a)}),e}function vnt(t){return t.type==="color"}function j$e(t){const e={};for(const i in t){if(i==="declaredClass")continue;const r=t[i];if(r!=null&&typeof r!="function")if(Array.isArray(r)){e[i]=[];for(let n=0;n<r.length;n++)e[i][n]=j$e(r[n])}else typeof r=="object"?r.toJSON&&(e[i]=JSON.stringify(r)):e[i]=r}return e}function bnt(t){return 32+t.length}const V$e=16;function wnt(t){if(!t)return 0;let e=AJ;for(const i in t)t.hasOwnProperty(i)&&(e+=EJ(t[i],!1));return e}function _nt(t){if(!t)return 0;if(typeof t[0]=="number")return kJ(t);if(Array.isArray(t))return xnt(t);let e=AJ;for(const i in t)t.hasOwnProperty(i)&&(e+=EJ(t[i]));return e}function xnt(t){const e=t.length;if(e===0||typeof t[0]=="number")return U$e(t,8);let i=B$e;for(let r=0;r<e;r++)i+=EJ(t[r]);return i}function EJ(t,e=!0){switch(typeof t){case"object":return e?_nt(t):AJ;case"string":return bnt(t);case"number":return V$e;case"boolean":return 4;default:return 8}}function kJ(...t){return t.reduce((e,i)=>e+(i?Qhe(i)?i.byteLength+$nt:Array.isArray(i)?U$e(i,V$e):0:0),0)}function U$e(t,e){return B$e+t.length*e}const AJ=32,B$e=16,$nt=145,dle=4294967296,Snt=new TextDecoder("utf-8"),Tnt=ve("safari")||ve("ios")?6:ve("ff")?12:32;var Jh;let Int=(Jh=class{constructor(e,i,r=0,n=e?e.byteLength:0){this._tag=0,this._dataType=99,this._init(e,i,r,n)}_init(e,i,r,n){this._data=e,this._dataView=i,this._pos=r,this._end=n}get usedMemory(){return 64+kJ(this._data)}asUnsafe(){return this}clone(){return new Jh(this._data,this._dataView,this._pos,this._end)}pos(){return this._pos}move(e){this._pos=e}nextTag(e){for(;;){if(this._pos===this._end)return!1;const i=this._decodeVarint();if(this._tag=i>>3,this._dataType=7&i,!e||e===this._tag)break;this.skip()}return!0}next(){if(this._pos===this._end)return!1;const e=this._decodeVarint();return this._tag=e>>3,this._dataType=7&e,!0}empty(){return this._pos>=this._end}tag(){return this._tag}getInt32(){return this._decodeVarint()}getInt64(){return this._decodeVarint()}getUInt32(){let e=4294967295;if(e=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128||(e=(e|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128)||(e=(e|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128)||(e=(e|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128)||(e=(e|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128))return e;throw new Error("Varint overflow")}getUInt64(){return this._decodeVarint()}getSInt32(){const e=this.getUInt32();return e>>>1^-(1&e)}getSInt64(){return this._decodeSVarint()}getBool(){const e=this._data[this._pos]!==0;return this._skip(1),e}getEnum(){return this._decodeVarint()}getFixed64(){const e=this._dataView,i=this._pos,r=e.getUint32(i,!0)+e.getUint32(i+4,!0)*dle;return this._skip(8),r}getSFixed64(){const e=this._dataView,i=this._pos,r=e.getUint32(i,!0)+e.getInt32(i+4,!0)*dle;return this._skip(8),r}getDouble(){const e=this._dataView.getFloat64(this._pos,!0);return this._skip(8),e}getFixed32(){const e=this._dataView.getUint32(this._pos,!0);return this._skip(4),e}getSFixed32(){const e=this._dataView.getInt32(this._pos,!0);return this._skip(4),e}getFloat(){const e=this._dataView.getFloat32(this._pos,!0);return this._skip(4),e}getString(){const e=this._getLength(),i=this._pos,r=this._toString(this._data,i,i+e);return this._skip(e),r}getBytes(){const e=this._getLength(),i=this._pos,r=this._toBytes(this._data,i,i+e);return this._skip(e),r}getLength(){return this._getLengthUnsafe()}processMessageWithArgs(e,i,r,n){const s=this.getMessage(),a=e(s,i,r,n);return s.release(),a}processMessage(e){const i=this.getMessage(),r=e(i);return i.release(),r}getMessage(){const e=this._getLength(),i=Jh.pool.acquire();return i._init(this._data,this._dataView,this._pos,this._pos+e),this._skip(e),i}release(){Jh.pool.release(this)}dataType(){return this._dataType}skip(){switch(this._dataType){case 0:this._decodeVarint();break;case 1:this._skip(8);break;case 2:this._skip(this._getLength());break;case 5:this._skip(4);break;default:throw new Error("Invalid data type!")}}skipLen(e){this._skip(e)}_skip(e){if(this._pos+e>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=e}_decodeVarint(){const e=this._data;let i=this._pos,r=0,n=0;if(this._end-i>=10)do{if(n=e[i++],r|=127&n,!(128&n)||(n=e[i++],r|=(127&n)<<7,!(128&n))||(n=e[i++],r|=(127&n)<<14,!(128&n))||(n=e[i++],r|=(127&n)<<21,!(128&n))||(n=e[i++],r+=268435456*(127&n),!(128&n))||(n=e[i++],r+=34359738368*(127&n),!(128&n))||(n=e[i++],r+=4398046511104*(127&n),!(128&n))||(n=e[i++],r+=562949953421312*(127&n),!(128&n))||(n=e[i++],r+=72057594037927940*(127&n),!(128&n))||(n=e[i++],r+=9223372036854776e3*(127&n),!(128&n)))break;throw new Error("Varint too long!")}while(!1);else{let s=1;for(;i!==this._end&&(n=e[i],128&n);)++i,r+=(127&n)*s,s*=128;if(i===this._end)throw new Error("Varint overrun!");++i,r+=n*s}return this._pos=i,r}_decodeSVarint(){const e=this._data;let i,r=0,n=0;const s=1&e[this._pos];if(n=e[this._pos++],r|=127&n,!(128&n)||(n=e[this._pos++],r|=(127&n)<<7,!(128&n))||(n=e[this._pos++],r|=(127&n)<<14,!(128&n))||(n=e[this._pos++],r|=(127&n)<<21,!(128&n))||(n=e[this._pos++],r+=268435456*(127&n),!(128&n))||(n=e[this._pos++],r+=34359738368*(127&n),!(128&n))||(n=e[this._pos++],r+=4398046511104*(127&n),!(128&n)))return s?-(r+1)/2:r/2;if(i=BigInt(r),n=e[this._pos++],i+=0x2000000000000n*BigInt(127&n),!(128&n)||(n=e[this._pos++],i+=0x100000000000000n*BigInt(127&n),!(128&n))||(n=e[this._pos++],i+=0x8000000000000000n*BigInt(127&n),!(128&n)))return Number(s?-(i+1n)/2n:i/2n);throw new Error("Varint too long!")}_getLength(){if(this._dataType!==2)throw new Error("Not a delimited data type!");return this._decodeVarint()}_getLengthUnsafe(){return this.getUInt32()}_toString(e,i,r){if((r=Math.min(this._end,r))-i>Tnt){const a=e.subarray(i,r);return Snt.decode(a)}let n="",s="";for(let a=i;a<r;++a){const o=e[a];128&o?s+="%"+o.toString(16):(n+=decodeURIComponent(s)+String.fromCharCode(o),s="")}return s.length&&(n+=decodeURIComponent(s)),n}_toBytes(e,i,r){return r=Math.min(this._end,r),new Uint8Array(e.buffer,i,r-i)}},Jh.pool=new Vv(()=>new Jh(null,null),void 0,e=>{e._data=null,e._dataView=null}),Jh);const Fb=2;let Ap=class o${constructor(e=[],i=[]){this.lengths=e??[],this.coords=i??[]}static fromJSON(e){return new o$(e.lengths,e.coords)}static fromRect(e){const[i,r,n,s]=e,a=n-i,o=s-r;return new o$([5],[i,r,a,0,0,o,-a,0,0,-o])}get isPoint(){return this.lengths.length===0&&this.coords.length>=2}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce((e,i)=>e+i)}get usedMemory(){return 64+kJ(this.lengths,this.coords)}area(){let e=0,i=0;if(!this.lengths.length)return 0;for(let r=0;r<this.lengths.length;r++){const n=this.lengths[r];if(n<3)continue;let s=this.coords[Fb*i],a=this.coords[Fb*i+1];for(let o=1;o<n;o+=1){const l=this.coords[Fb*(o+i)],c=this.coords[Fb*(o+i)+1];e+=-.5*(l-s)*(c+a),s=l,a=c}i+=n}return e}forEachVertex(e){let i=0;this.lengths.length||e(this.coords[0],this.coords[1]);for(let r=0;r<this.lengths.length;r++){const n=this.lengths[r];for(let s=0;s<n;s++)e(this.coords[Fb*(s+i)],this.coords[Fb*(s+i)+1]);i+=n}}deltaDecode(){const e=this.clone(),{coords:i,lengths:r}=e;let n=0;for(const s of r){for(let a=1;a<s;a++)i[2*(n+a)]+=i[2*(n+a)-2],i[2*(n+a)+1]+=i[2*(n+a)-1];n+=s}return e}clone(e){if(this.lengths.length===0)return new o$([],[this.coords[0],this.coords[1]]);const i=(this.lengths.length===0?1:this.lengths.reduce((n,s)=>n+s))*Fb,r=this.coords.slice(0,i);return e?(e.set(r),new o$(this.lengths,e)):new o$(Array.from(this.lengths),Array.from(r))}};function PJ(t,e){return t?e?4:3:e?3:2}function Mnt(t,e,i,r){if(!(e!=null&&e.lengths.length))return null;t.lengths.length&&(t.lengths.length=0),t.coords.length&&(t.coords.length=0);const n=t.coords,s=[],a=i?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:o,coords:l}=e,c=PJ(i,r);let h=0;for(const m of o){const g=Cnt(a,l,h,m,i,r);g&&s.push(g),h+=m*c}if(s.sort((m,g)=>{let v=m[2]-g[2];return v===0&&i&&(v=m[4]-g[4]),v}),s.length){let m=6*s[0][2];n[0]=s[0][0]/m,n[1]=s[0][1]/m,i&&(m=6*s[0][4],n[2]=m!==0?s[0][3]/m:0),(n[0]<a[0]||n[0]>a[1]||n[1]<a[2]||n[1]>a[3]||i&&(n[2]<a[4]||n[2]>a[5]))&&(n.length=0)}if(!n.length){const m=e.lengths[0]?Ent(l,0,o[0],i,r):null;if(!m)return null;n[0]=m[0],n[1]=m[1],i&&m.length>2&&(n[2]=m[2])}return t}function Cnt(t,e,i,r,n,s){const a=PJ(n,s);let o=i,l=i+a,c=0,h=0,m=0,g=0,v=0;for(let x=0,$=r-1;x<$;x++,o+=a,l+=a){const M=e[o],k=e[o+1],A=e[o+2],L=e[l],z=e[l+1],U=e[l+2];let B=M*z-L*k;g+=B,c+=(M+L)*B,h+=(k+z)*B,n&&(B=M*U-L*A,m+=(A+U)*B,v+=B),M<t[0]&&(t[0]=M),M>t[1]&&(t[1]=M),k<t[2]&&(t[2]=k),k>t[3]&&(t[3]=k),n&&(A<t[4]&&(t[4]=A),A>t[5]&&(t[5]=A))}if(g>0&&(g*=-1),v>0&&(v*=-1),!g)return null;const b=[c,h,.5*g];return n&&(b[3]=m,b[4]=.5*v),b}function Ent(t,e,i,r,n){const s=PJ(r,n);let a=e,o=e+s,l=0,c=0,h=0,m=0;for(let g=0,v=i-1;g<v;g++,a+=s,o+=s){const b=t[a],x=t[a+1],$=t[a+2],M=t[o],k=t[o+1],A=t[o+2],L=r?Ant(b,x,$,M,k,A):knt(b,x,M,k);if(L)if(l+=L,r){const z=Ont(b,x,$,M,k,A);c+=L*z[0],h+=L*z[1],m+=L*z[2]}else{const z=Pnt(b,x,M,k);c+=L*z[0],h+=L*z[1]}}return l>0?r?[c/l,h/l,m/l]:[c/l,h/l]:i>0?r?[t[e],t[e+1],t[e+2]]:[t[e],t[e+1]]:null}function knt(t,e,i,r){const n=i-t,s=r-e;return Math.sqrt(n*n+s*s)}function Ant(t,e,i,r,n,s){const a=r-t,o=n-e,l=s-i;return Math.sqrt(a*a+o*o+l*l)}function Pnt(t,e,i,r){return[t+.5*(i-t),e+.5*(r-e)]}function Ont(t,e,i,r,n,s){return[t+.5*(r-t),e+.5*(n-e),i+.5*(s-i)]}let Lnt=class hF{constructor(e=null,i={},r,n,s=0){this.geometry=e,this.attributes=i,this.centroid=r,this.objectId=n,this.displayId=s}static fromJSON(e){const i=e.geometry?Ap.fromJSON(e.geometry):null,r=e.centroid?Ap.fromJSON(e.centroid):null,n=e.objectId;return new hF(i,e.attributes,r,n)}weakClone(){const e=new hF(this.geometry,this.attributes,this.centroid,this.objectId);return e.displayId=this.displayId,e}clone(){var r,n;const e=(r=this.geometry)==null?void 0:r.clone(),i=new hF(e,{...this.attributes},(n=this.centroid)==null?void 0:n.clone(),this.objectId);return i.displayId=this.displayId,i}ensureCentroid(e){return this.centroid??(this.centroid=Mnt(new Ap,this.geometry,e.hasZ,e.hasM)),this.centroid}get usedMemory(){var e;return 128+wnt(this.attributes)+(((e=this.geometry)==null?void 0:e.usedMemory)??0)}};function Fnt(t){var e,i;return!!((i=(e=t.geometry)==null?void 0:e.coords)!=null&&i.length)}let Rnt=class q$e{constructor(){this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){const e=new q$e;return e.globalIdFieldName=this.globalIdFieldName,e.geohashFieldName=this.geohashFieldName,e.geometryProperties=this.geometryProperties,e.geometryType=this.geometryType,e.spatialReference=this.spatialReference,e.hasZ=this.hasZ,e.hasM=this.hasM,e.features=this.features,e.fields=this.fields,e.transform=this.transform,e.exceededTransferLimit=this.exceededTransferLimit,e.uniqueIdField=this.uniqueIdField,e.queryGeometry=this.queryGeometry,e.queryGeometryType=this.queryGeometryType,e}};const H$e=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"];let _At=class{constructor(e){this._options=e,this.geometryTypes=H$e,this._coordinatePtr=0,this._vertexDimension=0}createFeatureResult(){return new Rnt}prepareFeatures(e){this._vertexDimension=2,e.hasZ&&this._vertexDimension++,e.hasM&&this._vertexDimension++}finishFeatureResult(e){if(!(e!=null&&e.features)||!e.hasZ||!this._options.sourceSpatialReference||!e.spatialReference||Cs(e.spatialReference,this._options.sourceSpatialReference)||e.spatialReference.vcsWkid)return;const i=JS(this._options.sourceSpatialReference)/JS(e.spatialReference);if(i!==1)for(const r of e.features){if(!Fnt(r))continue;const n=r.geometry.coords;for(let s=2;s<n.length;s+=3)n[s]*=i}}addFeature(e,i){e.features.push(i)}createFeature(){return new Lnt(null,{},null,0)}createSpatialReference(){return{wkid:0}}createGeometry(){return new Ap}addField(e,i){e.fields.push(i)}allocateCoordinates(e){e.coords.length=e.lengths.reduce((i,r)=>i+r,0)*this._vertexDimension,this._coordinatePtr=0}addCoordinate(e,i){e.coords[this._coordinatePtr++]=i}addCoordinatePoint(e,i){e.coords.push(i)}addLength(e,i){e.lengths.push(i)}addQueryGeometry(e,i){e.queryGeometry=i.queryGeometry,e.queryGeometryType=i.queryGeometryType}createPointGeometry(){return new Ap}};const hle=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGeometry","esriFieldTypeBlob","esriFieldTypeRaster","esriFieldTypeGUID","esriFieldTypeGlobalID","esriFieldTypeXML","esriFieldTypeBigInteger","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"],ple=["sqlTypeBigInt","sqlTypeBinary","sqlTypeBit","sqlTypeChar","sqlTypeDate","sqlTypeDecimal","sqlTypeDouble","sqlTypeFloat","sqlTypeGeometry","sqlTypeGUID","sqlTypeInteger","sqlTypeLongNVarchar","sqlTypeLongVarbinary","sqlTypeLongVarchar","sqlTypeNChar","sqlTypeNVarchar","sqlTypeOther","sqlTypeReal","sqlTypeSmallInt","sqlTypeSqlXml","sqlTypeTime","sqlTypeTimestamp","sqlTypeTimestamp2","sqlTypeTinyInt","sqlTypeVarbinary","sqlTypeVarchar"],fle=["upperLeft","lowerLeft"];function mle(t){return t>=hle.length?null:hle[t]}function znt(t){return t>=ple.length?null:ple[t]}function gle(t){return t>=fle.length?null:fle[t]}function yle(t,e){return e>=t.geometryTypes.length?null:t.geometryTypes[e]}function Nnt(t,e,i){const n=t.asUnsafe(),s=e.createPointGeometry(i);for(;n.next();)switch(n.tag()){case 3:{const a=n.getUInt32(),o=n.pos()+a;let l=0;for(;n.pos()<o;)e.addCoordinatePoint(s,n.getSInt64(),l++);break}default:n.skip()}return s}function Dnt(t,e,i){const s=t.asUnsafe(),a=e.createGeometry(i),o=2+(i.hasZ?1:0)+(i.hasM?1:0);for(;s.next();)switch(s.tag()){case 2:{const l=s.getUInt32(),c=s.pos()+l;let h=0;for(;s.pos()<c;)e.addLength(a,s.getUInt32(),h++);break}case 3:{const l=s.getUInt32(),c=s.pos()+l;let h=0;for(e.allocateCoordinates(a);s.pos()<c;)e.addCoordinate(a,s.getSInt64(),h),h++,h===o&&(h=0);break}default:s.skip()}return a}function jnt(t){const n=t.asUnsafe(),s=new Ap;let a="esriGeometryPoint";for(;n.next();)switch(n.tag()){case 2:{const o=n.getUInt32(),l=n.pos()+o;for(;n.pos()<l;)s.lengths.push(n.getUInt32());break}case 3:{const o=n.getUInt32(),l=n.pos()+o;for(;n.pos()<l;)s.coords.push(n.getSInt64());break}case 1:a=H$e[n.getEnum()];break;default:n.skip()}return{queryGeometry:s,queryGeometryType:a}}function Vnt(t){const h=t.asUnsafe();for(;h.next();)switch(h.tag()){case 1:return h.getString();case 2:return h.getFloat();case 3:return h.getDouble();case 4:return h.getSInt32();case 5:return h.getUInt32();case 6:return h.getInt64();case 7:return h.getUInt64();case 8:return h.getSInt64();case 9:return h.getBool();default:return h.skip(),null}return null}function Unt(t){const o=t.asUnsafe(),l={type:mle(0)};for(;o.next();)switch(o.tag()){case 1:l.name=o.getString();break;case 2:l.type=mle(o.getEnum());break;case 3:l.alias=o.getString();break;case 4:l.sqlType=znt(o.getEnum());break;case 5:o.skip();break;case 6:l.defaultValue=o.getString();break;default:o.skip()}return l}function Bnt(t){const r={},n=t.asUnsafe();for(;n.next();)switch(n.tag()){case 1:r.name=n.getString();break;case 2:r.isSystemMaintained=n.getBool();break;default:n.skip()}return r}function qnt(t,e,i,r){const o=e.createFeature(i);let l=0;for(;t.next();)switch(t.tag()){case 1:{const c=r[l++].name;o.attributes[c]=t.processMessage(Vnt);break}case 2:o.geometry=t.processMessageWithArgs(Dnt,e,i);break;case 4:o.centroid=t.processMessageWithArgs(Nnt,e,i);break;default:t.skip()}return o}function Hnt(t){const s=[1,1,1,1],a=t.asUnsafe();for(;a.next();)switch(a.tag()){case 1:s[0]=a.getDouble();break;case 2:s[1]=a.getDouble();break;case 4:s[2]=a.getDouble();break;case 3:s[3]=a.getDouble();break;default:a.skip()}return s}function Gnt(t){const s=[0,0,0,0],a=t.asUnsafe();for(;a.next();)switch(a.tag()){case 1:s[0]=a.getDouble();break;case 2:s[1]=a.getDouble();break;case 4:s[2]=a.getDouble();break;case 3:s[3]=a.getDouble();break;default:a.skip()}return s}function Wnt(t){const n={originPosition:gle(0)},s=t.asUnsafe();for(;s.next();)switch(s.tag()){case 1:n.originPosition=gle(s.getEnum());break;case 2:n.scale=s.processMessage(Hnt);break;case 3:n.translate=s.processMessage(Gnt);break;default:s.skip()}return n}function Znt(t){const n={},s=t.asUnsafe();for(;s.next();)switch(s.tag()){case 1:n.shapeAreaFieldName=s.getString();break;case 2:n.shapeLengthFieldName=s.getString();break;case 3:n.units=s.getString();break;default:s.skip()}return n}function Ynt(t,e){const o=e.createSpatialReference();for(;t.next();)switch(t.tag()){case 1:o.wkid=t.getUInt32();break;case 5:o.wkt=t.getString();break;case 2:o.latestWkid=t.getUInt32();break;case 3:o.vcsWkid=t.getUInt32();break;case 4:o.latestVcsWkid=t.getUInt32();break;default:t.skip()}return o}function Jnt(t,e){const x=e.createFeatureResult(),$=t.asUnsafe();x.geometryType=yle(e,0);let M=!1;for(;$.next();)switch($.tag()){case 1:x.objectIdFieldName=$.getString();break;case 3:x.globalIdFieldName=$.getString();break;case 4:x.geohashFieldName=$.getString();break;case 5:x.geometryProperties=$.processMessage(Znt);break;case 7:x.geometryType=yle(e,$.getEnum());break;case 8:x.spatialReference=$.processMessageWithArgs(Ynt,e);break;case 10:x.hasZ=$.getBool();break;case 11:x.hasM=$.getBool();break;case 12:x.transform=$.processMessage(Wnt);break;case 9:x.exceededTransferLimit=$.getBool();break;case 13:e.addField(x,$.processMessage(Unt));break;case 15:M||(e.prepareFeatures(x),M=!0),e.addFeature(x,$.processMessageWithArgs(qnt,e,x,x.fields));break;case 2:x.uniqueIdField=$.processMessage(Bnt);break;default:$.skip()}return e.finishFeatureResult(x),x}function Xnt(t,e){const n={};let s=null;for(;t.next();)switch(t.tag()){case 4:s=t.processMessageWithArgs(jnt);break;case 1:n.featureResult=t.processMessageWithArgs(Jnt,e);break;default:t.skip()}return s!=null&&n.featureResult&&e.addQueryGeometry(n,s),n}function Qnt(t,e){try{const r=new Int(new Uint8Array(t),new DataView(t)),n={};for(;r.next();)r.tag()===2?n.queryResult=r.processMessageWithArgs(Xnt,e):r.skip();return n}catch(i){throw new ae("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:i})}}function Knt(t,e){const i=Qnt(t,e),r=i.queryResult.featureResult,n=i.queryResult.queryGeometry,s=i.queryResult.queryGeometryType;if(r&&r.features&&r.features.length&&r.objectIdFieldName){const a=r.objectIdFieldName;for(const o of r.features)o.attributes&&(o.objectId=o.attributes[a])}return r&&(r.queryGeometry=n,r.queryGeometryType=s),r}function est(t,e){if(e&&t.type==="extent")return`${t.xmin},${t.ymin},${t.xmax},${t.ymax}`;if(e&&t.type==="point")return`${t.x},${t.y}`;const i=t.toJSON();return delete i.spatialReference,JSON.stringify(i)}function tst(t,e,i){var h,m;const{geometry:r}=t,n=t.compactGeometryEnabled??!1,s=t.toJSON();delete s.compactGeometryEnabled,delete s.defaultSpatialReferenceEnabled;const a=s;let o,l,c;if(r&&(l=r.spatialReference,c=ZS(l),a.geometryType=g_(r),a.geometry=est(r,n),a.inSR=c),s.groupByFieldsForStatistics&&(a.groupByFieldsForStatistics=s.groupByFieldsForStatistics.join(",")),s.objectIds)switch((h=i==null?void 0:i.uniqueIdFields)==null?void 0:h.length){case void 0:a.objectIds=s.objectIds.join(",");break;case 1:a.uniqueIds=JSON.stringify(s.objectIds),delete a.objectIds;break;default:a.uniqueIds=JSON.stringify(s.objectIds.map(g=>JSON.parse(g))),delete a.objectIds}if(s.orderByFields&&(a.orderByFields=s.orderByFields.join(",")),!s.outFields||!s.returnDistinctValues&&(e!=null&&e.returnCountOnly||e!=null&&e.returnExtentOnly||e!=null&&e.returnIdsOnly)?delete a.outFields:s.outFields.includes("*")?a.outFields="*":a.outFields=s.outFields.join(","),s.outSR?(a.outSR=ZS(s.outSR),o=t.outSpatialReference):r&&(s.returnGeometry||s.returnCentroid)&&(a.outSR=a.inSR,o=l),s.returnGeometry&&delete s.returnGeometry,s.outStatistics&&(a.outStatistics=JSON.stringify(s.outStatistics)),s.fullText&&(a.fullText=JSON.stringify(s.fullText)),s.pixelSize&&(a.pixelSize=JSON.stringify(s.pixelSize)),s.quantizationParameters&&(t.defaultSpatialReferenceEnabled&&l!=null&&((m=t.quantizationParameters)==null?void 0:m.extent)!=null&&l.equals(t.quantizationParameters.extent.spatialReference)&&delete s.quantizationParameters.extent.spatialReference,a.quantizationParameters=JSON.stringify(s.quantizationParameters)),s.parameterValues&&(a.parameterValues=JSON.stringify(s.parameterValues)),s.rangeValues&&(a.rangeValues=JSON.stringify(s.rangeValues)),s.dynamicDataSource&&(a.layer=JSON.stringify({source:s.dynamicDataSource}),delete s.dynamicDataSource),s.timeExtent){const g=s.timeExtent,{start:v,end:b}=g;v==null&&b==null||(a.time=v===b?v:`${v??"null"},${b??"null"}`),delete s.timeExtent}return t.defaultSpatialReferenceEnabled&&l!=null&&o!=null&&l.equals(o)&&(a.defaultSR=a.inSR,delete a.inSR,delete a.outSR),a}const vle="Layer does not support extent calculation.";function ist(t,e,i){return tst(t,e,i)}async function rst(t,e,i,r,n){var a;const s=(a=e.timeExtent)!=null&&a.isEmpty?{data:{features:[]}}:await iA(t,e,"json",r,void 0,n);return q7(e,i,s.data),s}async function $At(t,e,i,r,n){var o;if((o=e.timeExtent)!=null&&o.isEmpty)return{data:i.createFeatureResult()};const s=await nst(t,e,r,n),a=s;return a.data=Knt(s.data,i),a}function nst(t,e,i,r){return iA(t,e,"pbf",i,void 0,r)}function SAt(t,e,i,r){var n;return(n=e.timeExtent)!=null&&n.isEmpty?Promise.resolve({data:{objectIds:[]}}):iA(t,e,"json",i,{returnIdsOnly:!0},r)}function TAt(t,e,i,r){var n;return(n=e.timeExtent)!=null&&n.isEmpty?Promise.resolve({data:{count:0}}):iA(t,e,"json",i,{returnIdsOnly:!0,returnCountOnly:!0},r)}async function IAt(t,e,i){var s;if((s=e.timeExtent)!=null&&s.isEmpty)return{data:{count:0,extent:null}};const r=await iA(t,e,"json",i,{returnExtentOnly:!0,returnCountOnly:!0}),n=r.data;if(n.hasOwnProperty("extent"))return r;if(n.features)throw new Error(vle);if(n.hasOwnProperty("count"))throw new Error(vle);return r}function sst(t,e){if(!t.returnIdsOnly||!e.uniqueIdFields)return t;const i={...t,returnUniqueIdsOnly:!0};return delete i.returnIdsOnly,i}async function iA(t,e,i,r={},n={},s={}){const a=typeof t=="string"?Cn(t):t,o=e.geometry?[e.geometry]:[],l=await swe(o,null,{signal:r.signal}),c=l==null?void 0:l[0];c!=null&&((e=e.clone()).geometry=c);const h=j$e({...a.query,f:i,...sst(n,s),...ist(e,n,s)});return mi(Ev(a.path,ast(e,n)?"query3d":"query"),{...r,responseType:i==="pbf"?"array-buffer":"json",query:{...h,...r.query}})}function ast(t,e){return t.formatOf3DObjects!=null&&!(e.returnCountOnly||e.returnExtentOnly||e.returnIdsOnly)}async function bU(t,e,i,r){const n=await ost(t,e,i,r);return zn.fromJSON(n)}async function ost(t,e,i,r){const n=CY(t),s={...i},a=mt.from(e),{data:o}=await rst(n,a,a.sourceSpatialReference,s,r);return o}const lst="esri.widgets.Feature.support.relatedFeatureUtils",ble=()=>Ie.getLogger(lst),wle=new Map;function pF(t){if(!Pd(t))return null;const[e,i]=t.split("/").slice(1);return{layerId:e,fieldName:i}}function cst(t,e){if(!e.relationships)return null;let i=null;const{relationships:r}=e;return r.some(n=>n.id===parseInt(t,10)&&(i=n,!0)),i}function ust({originRelationship:t,relationships:e,layerId:i}){return e.find(({relatedTableId:r,id:n})=>`${r}`===i&&n===(t==null?void 0:t.id))??null}function dst(t,e){const i=e.toLowerCase();for(const r in t)if(r.toLowerCase()===i)return t[r];return null}function hst(t,e){const i=cst(t,e);if(i)return{url:`${e.url}/${i.relatedTableId}`,sourceSpatialReference:e.spatialReference,relation:i,relatedFields:[],outStatistics:[]}}function pst(t,e){if(!e||!t)return;const{features:i,statsFeatures:r}=t,n=i==null?void 0:i.value;e.relatedFeatures=n?n.features:[];const s=r==null?void 0:r.value;e.relatedStatsFeatures=s?s.features:[]}function fst(t,e,i,r){var s;const n=new nr;return n.outFields=["*"],n.relationshipId=typeof e.id=="number"?e.id:parseInt(e.id,10),n.objectIds=[t.attributes[i.objectIdField]],n.gdbVersion=i.gdbVersion??null,n.historicMoment=i.historicMoment??null,((s=i.queryRelatedFeatures)==null?void 0:s.call(i,n,r))??Promise.resolve({})}function mst(t,e,i){let r=0;const n=[];for(;r<e.length;)n.push(`${t} IN (${e.slice(r,i+r)})`),r+=i;return n.join(" OR ")}function gst(t){return t?oD(t):void 0}function yst(t){return t?oD(t,(e,i)=>JSON.stringify(e.toJSON())===JSON.stringify(i.toJSON())):void 0}async function vst(t,e,i,r){const n=i.layerId.toString(),{layerInfo:s,relation:a,relatedFields:o,outStatistics:l,url:c,sourceSpatialReference:h}=e,m=gst(o),g=yst(l);if(!s||!a)return null;const v=ust({originRelationship:a,relationships:s.relationships,layerId:n});if(v!=null&&v.relationshipTableId&&v.keyFieldInRelationshipTable){const x=(await fst(t,v,i,r))[t.attributes[i.objectIdField]];if(!x)return null;const $=x.features.map(M=>M.attributes[s.objectIdField]);if(g!=null&&g.length&&s.supportsStatistics){const M=new mt;M.where=mst(s.objectIdField,$,1e3),M.outFields=m,M.outStatistics=g,M.sourceSpatialReference=h;const k={features:Promise.resolve(x),statsFeatures:bU(c,M)};return Gm(k)}}const b=v==null?void 0:v.keyField;if(b){const x=QD($st(s.fields,b)),$=dst(t.attributes,a.keyField),M=x?`${b}=${$}`:`${b}='${$}'`,k=i.historicMoment,A=i.gdbVersion,L=bU(c,new mt({where:M,outFields:m,sourceSpatialReference:h,historicMoment:k,gdbVersion:A}),r),z=g!=null&&g.length&&s.supportsStatistics?bU(c,new mt({where:M,outFields:m,outStatistics:g,sourceSpatialReference:h}),r):null,U={features:L};return z&&(U.statsFeatures=z),Gm(U)}return null}function bst(t,e){return mi(t,{query:{f:"json"},signal:e==null?void 0:e.signal})}function wst({relatedInfos:t,layer:e},i){const r={};return t.forEach((n,s)=>{const{relation:a}=n;if(!a){const m=new ae("editor:relation-required","A relation is required on a layer to retrieve related records.");throw ble().error(m),m}const{relatedTableId:o}=a;if(typeof o!="number"){const m=new ae("editor:related-table","A related table ID is required on a layer to retrieve related records.");throw ble().error(m),m}const l=`${e.url}/${o}`,c=wle.get(l),h=c??bst(l);c||wle.set(l,h),r[s]=h}),OW(Gm(r),i)}function _st({graphic:t,relatedInfos:e,layer:i},r){const n={};return e.forEach((s,a)=>{s.layerInfo&&(n[a]=vst(t,s,i,r))}),Gm(n)}function xst({relatedInfo:t,fieldName:e,fieldInfo:i}){var r,n;if((r=t.relatedFields)==null||r.push(e),i.statisticType){const s=new tu({statisticType:i.statisticType,onStatisticField:e,outStatisticFieldName:e});(n=t.outStatistics)==null||n.push(s)}}function $st(t,e){if(t!=null){e=e.toLowerCase();for(const i of t)if(i&&i.name.toLowerCase()===e)return i}return null}const _le={chartAnimation:!0};let qr=class extends et{constructor(e){super(e),this.abilities={..._le},this.activeMediaInfoIndex=0,this.attributes=null,this.description=null,this.fieldInfoMap=null,this.formattedAttributes=null,this.expressionAttributes=null,this.layer=null,this.mediaInfos=null,this.popupTemplate=null,this.relatedInfos=null,this.title=null}castAbilities(e){return{..._le,...e}}get activeMediaInfo(){return this.formattedMediaInfos[this.activeMediaInfoIndex]||null}get formattedMediaInfos(){return this._formatMediaInfos()||[]}get formattedMediaInfoCount(){return this.formattedMediaInfos.length}setActiveMedia(e){this._setContentElementMedia(e)}next(){this._pageContentElementMedia(1)}previous(){this._pageContentElementMedia(-1)}_setContentElementMedia(e){const{formattedMediaInfoCount:i}=this,r=(e+i)%i;this.activeMediaInfoIndex=r}_pageContentElementMedia(e){const{activeMediaInfoIndex:i}=this,r=i+e;this._setContentElementMedia(r)}_formatMediaInfos(){const{mediaInfos:e,layer:i}=this,r=this.attributes??{},n=this.formattedAttributes??{},s=this.expressionAttributes??{},a=this.fieldInfoMap??new Map;return(e==null?void 0:e.map(o=>{const l=o==null?void 0:o.clone();return l?(l.title=lv({attributes:r,fieldInfoMap:a,globalAttributes:n,expressionAttributes:s,layer:i,text:l.title}),l.caption=lv({attributes:r,fieldInfoMap:a,globalAttributes:n,expressionAttributes:s,layer:i,text:l.caption}),l.altText=lv({attributes:r,fieldInfoMap:a,globalAttributes:n,expressionAttributes:s,layer:i,text:l.altText}),l.type==="image"?l.value?(this._setImageValue({value:l.value,formattedAttributes:n,layer:i}),l.value.sourceURL?l:void 0):void 0:l.type==="pie-chart"||l.type==="line-chart"||l.type==="column-chart"||l.type==="bar-chart"?l.value?(this._setChartValue({value:l.value,chartType:l.type,attributes:r,formattedAttributes:n,layer:i,expressionAttributes:s}),l):void 0:null):null}).filter(ln))??[]}_setImageValue(e){const i=this.fieldInfoMap??new Map,{value:r,formattedAttributes:n,layer:s}=e,{linkURL:a,sourceURL:o}=r;if(o){const l=lz(o,s);r.sourceURL=oz({formattedAttributes:n,template:l,fieldInfoMap:i})}if(a){const l=lz(a,s);r.linkURL=oz({formattedAttributes:n,template:l,fieldInfoMap:i})}}_setChartValue(e){const{value:i,attributes:r,formattedAttributes:n,chartType:s,layer:a,expressionAttributes:o}=e,{popupTemplate:l,relatedInfos:c}=this,{fields:h,normalizeField:m}=i,g=a;if(i.fields=s$e(h,g),m&&(i.normalizeField=lT(m,g)),!h.some(b=>!!(n[b]!=null||Pd(b)&&(c!=null&&c.size))))return;const v=(l==null?void 0:l.fieldInfos)??[];h.forEach((b,x)=>{var k;const $=(k=i.colors)==null?void 0:k[x];if(Pd(b))return void(i.series=[...i.series,...this._getRelatedChartInfos({fieldInfos:v,fieldName:b,formattedAttributes:n,chartType:s,value:i,color:$})]);const M=this._getChartOption({value:i,attributes:r,chartType:s,formattedAttributes:n,expressionAttributes:o,fieldName:b,fieldInfos:v,color:$});i.series.push(M)})}_getRelatedChartInfos(e){var b;const{fieldInfos:i,fieldName:r,formattedAttributes:n,chartType:s,value:a,color:o}=e,l=[],c=pF(r),h=c&&((b=this.relatedInfos)==null?void 0:b.get(c.layerId.toString()));if(!h)return l;const{relatedFeatures:m,relation:g}=h;if(!g||!m)return l;const{cardinality:v}=g;return m.forEach(x=>{const{attributes:$}=x;$&&Object.keys($).forEach(M=>{M===c.fieldName&&l.push(this._getChartOption({value:a,attributes:$,formattedAttributes:n,fieldName:r,chartType:s,relatedFieldName:M,hasMultipleRelatedFeatures:(m==null?void 0:m.length)>1,fieldInfos:i,color:o}))})}),v==="one-to-many"||v==="many-to-many"?l:[l[0]]}_getTooltip({label:e,value:i,chartType:r}){return r==="pie-chart"?`${e}`:`${e}: ${i}`}_getChartOption(e){var J;const{value:i,attributes:r,formattedAttributes:n,expressionAttributes:s,fieldName:a,relatedFieldName:o,fieldInfos:l,chartType:c,hasMultipleRelatedFeatures:h,color:m}=e,{layer:g,graphic:v}=this,b=this.fieldInfoMap??new Map,{normalizeField:x,tooltipField:$}=i,M=x?Pd(x)?r[pF(x).fieldName]:r[x]:null,k=tA(a)&&s&&s[a]!==void 0?s[a]:o&&r[o]!==void 0?r[o]:r[a]!==void 0?r[a]:n[a],A=k===void 0?null:k&&M?k/M:k,L=new PR({fieldName:a,color:m,value:A!=null?typeof A=="number"?A:Number(A):void 0});if(Pd(a)){const Q=b.get(a.toLowerCase()),le=$&&b.get($.toLowerCase()),ie=(Q==null?void 0:Q.fieldName)??a,re=h&&$?pF($).fieldName:(le==null?void 0:le.fieldName)??$,se=h&&re?r[re]:n[re]??(Q&&az({fieldInfo:Q,graphic:v,layer:g}))??(Q==null?void 0:Q.fieldName)??o,Te=h&&o?r[o]:n[ie];return L.tooltip=this._getTooltip({label:se,value:Te,chartType:c}),L}const z=xJ(l,a),U=lT(a,g),B=$&&n[$]!==void 0?n[$]:az({fieldInfo:z||new Ss({fieldName:U}),expressionInfos:(J=this.popupTemplate)==null?void 0:J.expressionInfos,graphic:v,layer:g}),X=n[U];return L.tooltip=this._getTooltip({label:B,value:X,chartType:c}),L}};d([f()],qr.prototype,"abilities",void 0),d([_i("abilities")],qr.prototype,"castAbilities",null),d([f()],qr.prototype,"activeMediaInfoIndex",void 0),d([f({readOnly:!0})],qr.prototype,"activeMediaInfo",null),d([f()],qr.prototype,"attributes",void 0),d([f()],qr.prototype,"description",void 0),d([f()],qr.prototype,"fieldInfoMap",void 0),d([f()],qr.prototype,"formattedAttributes",void 0),d([f()],qr.prototype,"expressionAttributes",void 0),d([f({readOnly:!0})],qr.prototype,"formattedMediaInfos",null),d([f()],qr.prototype,"graphic",void 0),d([f()],qr.prototype,"layer",void 0),d([f({readOnly:!0})],qr.prototype,"formattedMediaInfoCount",null),d([f()],qr.prototype,"mediaInfos",void 0),d([f()],qr.prototype,"popupTemplate",void 0),d([f()],qr.prototype,"relatedInfos",void 0),d([f()],qr.prototype,"title",void 0),qr=d([V("esri.widgets.Feature.FeatureMedia.FeatureMediaViewModel")],qr);const rl="esri-feature-media",mo={base:rl,mediaContainer:`${rl}__container`,mediaItemContainer:`${rl}__item-container`,mediaItem:`${rl}__item`,mediaItemText:`${rl}__item-text`,mediaItemTitle:`${rl}__item-title`,mediaItemCaption:`${rl}__item-caption`,mediaNavigation:`${rl}__item-navigation`,mediaPagination:`${rl}__pagination`,mediaPaginationText:`${rl}__pagination-text`,mediaChart:`${rl}__chart`,mediaPaginationButton:`${rl}__pagination-button`,mediaPaginationIcon:`${rl}__pagination-icon`,mediaChartRendered:`${rl}__chart--rendered`},wU=15,ty="category",PM="value",Sst="rgba(50, 50, 50, 1)",Tst=250,Ist=500,Mst=200;let Xa=class extends da{constructor(e,i){super(e,i),this._refreshTimer=null,this._refreshIntervalInfo=null,this._featureElementInfo=null,this._chartRootMap=new WeakMap,this.viewModel=new qr,this.messages=null,this._disposeChart=r=>{var n;(n=this._chartRootMap.get(r))==null||n.dispose(),this._chartRootMap.delete(r)},this._createChart=async r=>{const{destroyed:n,viewModel:s}=this;if(n||!s||!r)return;const{createRoot:a}=await de(()=>import("./chartUtilsAm5-BFLXFauQ.js"),__vite__mapDeps([276,277,278,279,280,281,282,283,284])),o=await a(r);this._chartRootMap.set(r,o),await this._renderChart({mediaInfo:s.activeMediaInfo,root:o})}}initialize(){this._featureElementInfo=new Wh,this.addHandles([be(()=>{var e,i;return[(e=this.viewModel)==null?void 0:e.activeMediaInfo,(i=this.viewModel)==null?void 0:i.activeMediaInfoIndex]},()=>this._setupMediaRefreshTimer(),Ft),be(()=>{var e,i;return[(e=this.viewModel)==null?void 0:e.description,(i=this.viewModel)==null?void 0:i.title]},()=>this._setupFeatureElementInfo(),Ft)])}loadDependencies(){return Iu({icon:()=>de(()=>Promise.resolve().then(()=>TT),void 0)})}destroy(){var e;this._clearMediaRefreshTimer(),(e=this._featureElementInfo)==null||e.destroy()}get attributes(){return this.viewModel.attributes}set attributes(e){this.viewModel.attributes=e}get activeMediaInfoIndex(){return this.viewModel.activeMediaInfoIndex}set activeMediaInfoIndex(e){this.viewModel.activeMediaInfoIndex=e}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get fieldInfoMap(){return this.viewModel.fieldInfoMap}set fieldInfoMap(e){this.viewModel.fieldInfoMap=e}get layer(){return this.viewModel.layer}set layer(e){this.viewModel.layer=e}get mediaInfos(){return this.viewModel.mediaInfos}set mediaInfos(e){this.viewModel.mediaInfos=e}get popupTemplate(){return this.viewModel.popupTemplate}set popupTemplate(e){this.viewModel.popupTemplate=e}get relatedInfos(){return this.viewModel.relatedInfos}set relatedInfos(e){this.viewModel.relatedInfos=e}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}render(){var e;return ue("div",{bind:this,class:mo.base,onkeyup:this._handleMediaKeyup},(e=this._featureElementInfo)==null?void 0:e.render(),this._renderMedia())}_renderMedia(){const{formattedMediaInfoCount:e,activeMediaInfoIndex:i}=this.viewModel,r=this._renderMediaText();return e?ue("div",{class:mo.mediaContainer,key:"media-element-container"},this._renderMediaInfo(),ue("div",{class:mo.mediaNavigation},r,e>1?ue("div",{class:mo.mediaPagination},this._renderMediaPageButton("previous"),ue("span",{class:mo.mediaPaginationText},Sr(this.messages.pageText,{index:i+1,total:e})),this._renderMediaPageButton("next")):null)):null}_renderMediaText(){const{activeMediaInfo:e}=this.viewModel;if(!e)return null;const i=e&&e.title?ue("div",{class:mo.mediaItemTitle,innerHTML:e.title,key:"media-title"}):null,r=e&&e.caption?ue("div",{class:mo.mediaItemCaption,innerHTML:e.caption,key:"media-caption"}):null;return i||r?ue("div",{class:mo.mediaItemText,key:"media-text"},i,r):null}_renderImageMediaInfo(e){if(!e.value)return null;const{_refreshIntervalInfo:i}=this,{activeMediaInfoIndex:r,formattedMediaInfoCount:n}=this.viewModel,{value:s,refreshInterval:a,altText:o,title:l,type:c}=e,{sourceURL:h,linkURL:m}=s,g=bJ(m??void 0)?"_blank":"_self",v=g==="_blank"?"noreferrer":"",b=a?i:null,x=b?b.timestamp:0,$=b?b.sourceURL:h,M=ue("img",{alt:o||l,key:`media-${c}-${r}-${n}-${x}`,src:$??void 0});return(m?ue("a",{href:m,rel:v,target:g,title:l},M):null)??M}_renderChartMediaInfo(e){const{activeMediaInfoIndex:i,formattedMediaInfoCount:r}=this.viewModel;return ue("div",{afterCreate:this._createChart,afterRemoved:this._disposeChart,bind:this,class:mo.mediaChart,key:`media-${e.type}-${i}-${r}`})}_renderMediaInfoType(){const{activeMediaInfo:e}=this.viewModel;return e?e.type==="image"?this._renderImageMediaInfo(e):e.type.includes("chart")?this._renderChartMediaInfo(e):null:null}_renderMediaInfo(){const{activeMediaInfo:e}=this.viewModel;return e?ue("div",{class:mo.mediaItemContainer,key:"media-container"},ue("div",{class:mo.mediaItem,key:"media-item-container"},this._renderMediaInfoType())):null}_renderMediaPageButton(e){if(this.viewModel.formattedMediaInfoCount<2)return null;const i=e==="previous",r=i?this.messages.previous:this.messages.next,n=i?"chevron-left":"chevron-right",s=i?"media-previous":"media-next",a=i?this._previous:this._next;return ue("button",{"aria-label":r,bind:this,class:mo.mediaPaginationButton,key:s,onclick:a,tabIndex:0,title:r,type:"button"},ue("calcite-icon",{class:mo.mediaPaginationIcon,icon:n,scale:"s"}))}_setupFeatureElementInfo(){var r;const{description:e,title:i}=this;(r=this._featureElementInfo)==null||r.set({description:e,title:i})}_next(){this.viewModel.next()}_previous(){this.viewModel.previous()}_getRenderer(){if(!this.viewModel)return;const{graphic:e,layer:i}=this.viewModel;return e!=null&&e.isAggregate&&(i!=null&&i.featureReduction)&&"renderer"in i.featureReduction?i.featureReduction.renderer:i==null?void 0:i.renderer}async _getSeriesColors(e){const{colorAm5:i}=await de(()=>import("./chartCommon-CWNwZ3ay.js"),__vite__mapDeps([285,286,282,280,287,278,279,288,289,281,290,291,283])),r=new Map;return e.forEach(n=>{n.color&&r.set(n,i(n.color.toCss(!0)))}),r}async _getRendererColors(){const{colorAm5:e}=await de(()=>import("./chartCommon-CWNwZ3ay.js"),__vite__mapDeps([285,286,282,280,287,278,279,288,289,281,290,291,283])),i=new Map,r=this._getRenderer(),n="default";if(!r)return i;const s=await D$e(r);return s.delete(n),Array.from(s.values()).every(a=>(a==null?void 0:a.length)===1)&&Array.from(s.keys()).forEach(a=>{var l,c;const o=(c=(l=s.get(a))==null?void 0:l[0])==null?void 0:c.toCss(!0);o&&i.set(a,e(o))}),i}_handleMediaKeyup(e){const{key:i}=e;i==="ArrowLeft"&&(e.stopPropagation(),this.viewModel.previous()),i==="ArrowRight"&&(e.stopPropagation(),this.viewModel.next())}_canAnimateChart(){return!!this.viewModel&&!!this.viewModel.abilities.chartAnimation&&!Iwe()}_getChartAnimationMS(){return this._canAnimateChart()?Tst:0}_getChartSeriesAnimationMS(){return this._canAnimateChart()?Ist:0}async _renderChart(e){const{root:i,mediaInfo:r}=e,{value:n,type:s}=r,{ResponsiveThemeAm5:a,DarkThemeAm5:o,AnimatedThemeAm5:l,ColorSetAm5:c,ThemeAm5:h,esriChartColorSet:m}=await de(async()=>{const{ResponsiveThemeAm5:L,DarkThemeAm5:z,AnimatedThemeAm5:U,ColorSetAm5:B,ThemeAm5:X,esriChartColorSet:J}=await import("./chartCommon-CWNwZ3ay.js");return{ResponsiveThemeAm5:L,DarkThemeAm5:z,AnimatedThemeAm5:U,ColorSetAm5:B,ThemeAm5:X,esriChartColorSet:J}},__vite__mapDeps([285,286,282,280,287,278,279,288,289,281,290,291,283])),g=h.new(i);g.rule("ColorSet").set("colors",m),g.rule("ColorSet").set("reuse",!0);const v=[a.new(i),g];DY(this.container)&&v.push(o.new(i)),this._canAnimateChart()&&v.push(l.new(i)),i.setThemes(v);const b=await this._getRendererColors(),x=await this._getSeriesColors(n.series),$=c.new(i,{}),M=x.get(n.series[0]),k=M?{lineSettings:{stroke:M}}:void 0,A=n.series.map((L,z)=>{const U=x.get(L)||b.get(L.fieldName)||$.getIndex(z);return{[ty]:L.tooltip,[PM]:L.value,columnSettings:{fill:U,stroke:U},...k}}).filter(L=>s!=="pie-chart"||L.value!=null&&L.value>0);await(s==="pie-chart"?this._createPieChart(e,A):this._createXYChart(e,A))}_getDirection(){return xp(this.container)?"rtl":"ltr"}async _customizeChartTooltip(e,i="horizontal"){var n;const{colorAm5:r}=await de(()=>import("./chartCommon-CWNwZ3ay.js"),__vite__mapDeps([285,286,282,280,287,278,279,288,289,281,290,291,283]));e.setAll({pointerOrientation:i}),(n=e.get("background"))==null||n.setAll({stroke:r(Sst)}),e.label.setAll({direction:this._getDirection(),oversizedBehavior:"wrap",maxWidth:Mst})}async _createPieChart(e,i){const{TooltipAm5:r}=await de(()=>import("./chartCommon-CWNwZ3ay.js"),__vite__mapDeps([285,286,282,280,287,278,279,288,289,281,290,291,283])),{PieChartAm5:n,PieSeriesAm5:s}=await de(async()=>{const{PieChartAm5:x,PieSeriesAm5:$}=await import("./pieChart-D0a_BFfU.js").then(M=>M.p);return{PieChartAm5:x,PieSeriesAm5:$}},__vite__mapDeps([292,279,293,281,280,282,278,289,284,294,295])),{mediaInfo:a,root:o}=e,{title:l}=a,c=5,h=(a==null?void 0:a.altText)||(a==null?void 0:a.title)||"",m=o.container.children.push(n.new(o,{ariaLabel:h,focusable:!0,paddingBottom:c,paddingTop:c,paddingLeft:c,paddingRight:c})),g=`{category}: {valuePercentTotal.formatNumber('0.00')}%
 ({value})`,v=r.new(o,{labelText:g}),b=m.series.push(s.new(o,{name:l,valueField:PM,categoryField:ty,tooltip:v}));b.ticks.template.set("forceHidden",!0),b.labels.template.set("forceHidden",!0),b.slices.template.states.create("active",{shiftRadius:c}),await this._customizeChartTooltip(v),b.slices.template.setAll({ariaLabel:g,focusable:!0,templateField:"columnSettings"}),b.data.setAll(i),await b.appear(this._getChartSeriesAnimationMS()),await m.appear(this._getChartAnimationMS()),m.root.dom.classList.toggle(mo.mediaChartRendered,!0)}_getMinSeriesValue(e){let i=0;return e.forEach(r=>i=Math.min(r.value,i)),i}async _createColumnChart(e,i,r){const{TooltipAm5:n,ScrollbarAm5:s}=await de(()=>import("./chartCommon-CWNwZ3ay.js"),__vite__mapDeps([285,286,282,280,287,278,279,288,289,281,290,291,283])),{CategoryAxisAm5:a,AxisRendererXAm5:o,ValueAxisAm5:l,AxisRendererYAm5:c,ColumnSeriesAm5:h}=await de(async()=>{const{CategoryAxisAm5:L,AxisRendererXAm5:z,ValueAxisAm5:U,AxisRendererYAm5:B,ColumnSeriesAm5:X}=await import("./xyChart-COapCVwo.js").then(J=>J.x);return{CategoryAxisAm5:L,AxisRendererXAm5:z,ValueAxisAm5:U,AxisRendererYAm5:B,ColumnSeriesAm5:X}},__vite__mapDeps([296,281,280,282,278,279,293,291,289,284])),{mediaInfo:m,root:g}=i,{value:v,title:b}=m;e.setAll({wheelX:"panX",wheelY:"zoomX"});const x=e.xAxes.push(a.new(g,{renderer:o.new(g,{inversed:xp(this.container)}),categoryField:ty}));x.get("renderer").labels.template.setAll({forceHidden:!0});const $=e.yAxes.push(l.new(g,{renderer:c.new(g,{inside:!1}),min:this._getMinSeriesValue(v.series)}));$.get("renderer").labels.template.setAll({direction:this._getDirection()});const M="{categoryX}",k=n.new(g,{labelText:M}),A=e.series.push(h.new(g,{name:b,xAxis:x,yAxis:$,valueYField:PM,categoryXField:ty,tooltip:k}));await this._customizeChartTooltip(k),A.columns.template.setAll({ariaLabel:M,focusable:!0,templateField:"columnSettings"}),v.series.length>wU&&e.set("scrollbarX",s.new(g,{orientation:"horizontal"})),x.data.setAll(r),A.data.setAll(r),await A.appear(this._getChartSeriesAnimationMS()),await e.appear(this._getChartAnimationMS())}async _createBarChart(e,i,r){const{TooltipAm5:n,ScrollbarAm5:s}=await de(()=>import("./chartCommon-CWNwZ3ay.js"),__vite__mapDeps([285,286,282,280,287,278,279,288,289,281,290,291,283])),{CategoryAxisAm5:a,AxisRendererXAm5:o,ValueAxisAm5:l,AxisRendererYAm5:c,ColumnSeriesAm5:h}=await de(async()=>{const{CategoryAxisAm5:L,AxisRendererXAm5:z,ValueAxisAm5:U,AxisRendererYAm5:B,ColumnSeriesAm5:X}=await import("./xyChart-COapCVwo.js").then(J=>J.x);return{CategoryAxisAm5:L,AxisRendererXAm5:z,ValueAxisAm5:U,AxisRendererYAm5:B,ColumnSeriesAm5:X}},__vite__mapDeps([296,281,280,282,278,279,293,291,289,284])),{mediaInfo:m,root:g}=i,{value:v,title:b}=m;e.setAll({wheelX:"panY",wheelY:"zoomY"});const x=e.yAxes.push(a.new(g,{renderer:c.new(g,{inversed:!0}),categoryField:ty}));x.get("renderer").labels.template.setAll({forceHidden:!0});const $=e.xAxes.push(l.new(g,{renderer:o.new(g,{inside:!1,inversed:xp(this.container)}),min:this._getMinSeriesValue(v.series)}));$.get("renderer").labels.template.setAll({direction:this._getDirection()});const M="{categoryY}",k=n.new(g,{labelText:M}),A=e.series.push(h.new(g,{name:b,xAxis:$,yAxis:x,valueXField:PM,categoryYField:ty,tooltip:k}));await this._customizeChartTooltip(k,"vertical"),A.columns.template.setAll({ariaLabel:M,focusable:!0,templateField:"columnSettings"}),v.series.length>wU&&e.set("scrollbarY",s.new(g,{orientation:"vertical"})),x.data.setAll(r),A.data.setAll(r),await A.appear(this._getChartSeriesAnimationMS()),await e.appear(this._getChartAnimationMS())}async _createLineChart(e,i,r){var z,U,B;const{TooltipAm5:n,ScrollbarAm5:s}=await de(()=>import("./chartCommon-CWNwZ3ay.js"),__vite__mapDeps([285,286,282,280,287,278,279,288,289,281,290,291,283])),{CategoryAxisAm5:a,AxisRendererXAm5:o,ValueAxisAm5:l,AxisRendererYAm5:c,LineSeriesAm5:h}=await de(async()=>{const{CategoryAxisAm5:X,AxisRendererXAm5:J,ValueAxisAm5:Q,AxisRendererYAm5:le,LineSeriesAm5:ie}=await import("./xyChart-COapCVwo.js").then(re=>re.x);return{CategoryAxisAm5:X,AxisRendererXAm5:J,ValueAxisAm5:Q,AxisRendererYAm5:le,LineSeriesAm5:ie}},__vite__mapDeps([296,281,280,282,278,279,293,291,289,284])),{root:m,mediaInfo:g}=i,{value:v,title:b}=g;e.setAll({wheelX:"panX",wheelY:"zoomX"});const x=e.xAxes.push(a.new(m,{renderer:o.new(m,{inversed:xp(this.container)}),categoryField:ty}));x.get("renderer").labels.template.setAll({forceHidden:!0});const $=e.yAxes.push(l.new(m,{renderer:c.new(m,{inside:!1}),min:this._getMinSeriesValue(v.series)}));$.get("renderer").labels.template.setAll({direction:this._getDirection()});const M="{categoryX}",k=(U=(z=r[0])==null?void 0:z.lineSettings)==null?void 0:U.stroke,A=n.new(m,{getFillFromSprite:!k,labelText:M});k&&((B=A.get("background"))==null||B.setAll({fill:k}));const L=e.series.push(h.new(m,{name:b,xAxis:x,yAxis:$,valueYField:PM,categoryXField:ty,tooltip:A}));L.strokes.template.setAll({templateField:"lineSettings"}),await this._customizeChartTooltip(A,"vertical"),v.series.length>wU&&e.set("scrollbarX",s.new(m,{orientation:"horizontal"})),x.data.setAll(r),L.data.setAll(r),await L.appear(this._getChartSeriesAnimationMS()),await e.appear(this._getChartAnimationMS())}async _createXYChart(e,i){const{XYChartAm5:r,XYCursorAm5:n}=await de(()=>import("./xyChart-COapCVwo.js").then(h=>h.x),__vite__mapDeps([296,281,280,282,278,279,293,291,289,284])),{root:s,mediaInfo:a}=e,{type:o}=a,l=(a==null?void 0:a.altText)||(a==null?void 0:a.title)||"",c=s.container.children.push(r.new(s,{ariaLabel:l,focusable:!0,panX:!0,panY:!0}));c.set("cursor",n.new(s,{})),o==="column-chart"&&await this._createColumnChart(c,e,i),o==="bar-chart"&&await this._createBarChart(c,e,i),o==="line-chart"&&await this._createLineChart(c,e,i),c.root.dom.classList.toggle(mo.mediaChartRendered,!0)}_clearMediaRefreshTimer(){const{_refreshTimer:e}=this;e&&(clearTimeout(e),this._refreshTimer=null)}_updateMediaInfoTimestamp(e){const i=Date.now();this._refreshIntervalInfo={timestamp:i,sourceURL:e&&this._getImageSource(e,i)}}_setupMediaRefreshTimer(){this._clearMediaRefreshTimer();const{activeMediaInfo:e}=this.viewModel;(e==null?void 0:e.type)==="image"&&(e==null?void 0:e.refreshInterval)>0&&this._setRefreshTimeout(e)}_setRefreshTimeout(e){const{refreshInterval:i,value:r}=e,n=6e4*i;this._updateMediaInfoTimestamp(r.sourceURL);const s=setInterval(()=>{this._updateMediaInfoTimestamp(r.sourceURL)},n);this._refreshTimer=s}_getImageSource(e,i){const r=e.includes("?")?"&":"?",[n,s=""]=e.split("#");return`${n}${r}timestamp=${i}${s?"#":""}${s}`}};d([f()],Xa.prototype,"_refreshIntervalInfo",void 0),d([f()],Xa.prototype,"attributes",null),d([f()],Xa.prototype,"activeMediaInfoIndex",null),d([f()],Xa.prototype,"description",null),d([f()],Xa.prototype,"fieldInfoMap",null),d([f()],Xa.prototype,"layer",null),d([f()],Xa.prototype,"mediaInfos",null),d([f()],Xa.prototype,"popupTemplate",null),d([f()],Xa.prototype,"relatedInfos",null),d([f()],Xa.prototype,"title",null),d([f({type:qr})],Xa.prototype,"viewModel",void 0),d([f(),js("esri/widgets/Feature/t9n/Feature")],Xa.prototype,"messages",void 0),Xa=d([V("esri.widgets.Feature.FeatureMedia")],Xa);function EAt(t){return Fs.fromJSON(t.toJSON())}function kAt(t){return t.toJSON?t.toJSON():t}function AAt(t){return t instanceof Date}function PAt(t){return t instanceof ut}function OAt(t){return t instanceof $p}function LAt(t){return t instanceof mxe}function FAt(t){return t instanceof gxe}const RAt=1e3,zAt={point:"point"},NAt={point:"esriGeometryPoint",polygon:"esriGeometryPolygon",polyline:"esriGeometryPolyline",multipoint:"esriGeometryMultipoint",extent:"esriGeometryEnvelope",esriGeometryPoint:"esriGeometryPoint",esriGeometryPolygon:"esriGeometryPolygon",esriGeometryPolyline:"esriGeometryPolyline",esriGeometryMultipoint:"esriGeometryMultipoint",esriGeometryEnvelope:"esriGeometryEnvelope",envelope:"esriGeometryEnvelope"},DAt={"small-integer":"esriFieldTypeSmallInteger",integer:"esriFieldTypeInteger",long:"esriFieldTypeLong",single:"esriFieldTypeSingle",double:"esriFieldTypeDouble",string:"esriFieldTypeString",date:"esriFieldTypeDate","date-only":"esriFieldTypeDateOnly","time-only":"esriFieldTypeTimeOnly","timestamp-offset":"esriFieldTypeTimestampOffset",oid:"esriFieldTypeOID",geometry:"esriFieldTypeGeometry",blob:"esriFieldTypeBlob",raster:"esriFieldTypeRaster",guid:"esriFieldTypeGUID","global-id":"esriFieldTypeGlobalID",xml:"esriFieldTypeXML","big-integer":"esriFieldTypeBigInteger",esriFieldTypeSmallInteger:"esriFieldTypeSmallInteger",esriFieldTypeInteger:"esriFieldTypeInteger",esriFieldTypeLong:"esriFieldTypeLong",esriFieldTypeSingle:"esriFieldTypeSingle",esriFieldTypeDouble:"esriFieldTypeDouble",esriFieldTypeString:"esriFieldTypeString",esriFieldTypeDate:"esriFieldTypeDate",esriFieldTypeDateOnly:"esriFieldTypeDateOnly",esriFieldTypeTimeOnly:"esriFieldTypeTimeOnly",esriFieldTypeTimestampOffset:"esriFieldTypeTimestampOffset",esriFieldTypeOID:"esriFieldTypeOID",esriFieldTypeGeometry:"esriFieldTypeGeometry",esriFieldTypeBlob:"esriFieldTypeBlob",esriFieldTypeRaster:"esriFieldTypeRaster",esriFieldTypeGUID:"esriFieldTypeGUID",esriFieldTypeGlobalID:"esriFieldTypeGlobalID",esriFieldTypeXML:"esriFieldTypeXML",esriFieldTypeBigInteger:"esriFieldTypeBigInteger"};function jAt(t){return t===void 0?"":t=(t=(t=t.replace(/\/featureserver\/[0-9]*/i,"/FeatureServer")).replace(/\/mapserver\/[0-9]*/i,"/MapServer")).split("?")[0]}function VAt(t,e){e||(e={}),typeof e=="function"&&(e={cmp:e});const i=typeof e.cycles=="boolean"&&e.cycles,r=e.cmp&&(n=e.cmp,function(a){return function(o,l){const c={key:o,value:a[o]},h={key:l,value:a[l]};return n(c,h)}});var n;const s=[];return(function a(o){if(o!=null&&o.toJSON&&typeof o.toJSON=="function"&&(o=o.toJSON()),o===void 0)return;if(typeof o=="number")return isFinite(o)?""+o:"null";if(typeof o!="object")return JSON.stringify(o);let l,c;if(Array.isArray(o)){for(c="[",l=0;l<o.length;l++)l&&(c+=","),c+=a(o[l])||"null";return c+"]"}if(o===null)return"null";if(s.includes(o)){if(i)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}const h=s.push(o)-1,m=Object.keys(o).sort(r==null?void 0:r(o));for(c="",l=0;l<m.length;l++){const g=m[l],v=a(o[g]);v&&(c&&(c+=","),c+=JSON.stringify(g)+":"+v)}return s.splice(h,1),"{"+c+"}"})(t)}function Cst(t){switch(t.type){case"catalog":case"csv":case"feature":case"geojson":case"knowledge-graph-sublayer":case"oriented-imagery":case"subtype-group":case"wfs":return!0;default:return!1}}function Est(t){switch(t.type){case"catalog-footprint":case"subtype-sublayer":return!0;default:return Cst(t)}}const kst=Symbol("isImageryGraphicOrigin");function Ast(t){return!!t&&kst in t}const Pst=Symbol("isImageryTileGraphicOrigin");function Ost(t){return!!t&&Pst in t}const UAt="__esri_stream_id__",BAt="__esri_timestamp__",qAt="__esri_track_part__",Lst="__esri_time_received__",HAt="__esri_track_line__",Fst="esri.widgets.Feature.support.arcadeFeatureUtils",fF=()=>Ie.getLogger(Fst);function Rst(t){return P5(p$e(t))}function zst(t){return"createQuery"in t&&"queryFeatures"in t}async function Nst({graphic:t,view:e,options:i}){const{isAggregate:r}=t,n=t.layer??t.sourceLayer;if(!r||!n||(e==null?void 0:e.type)!=="2d")return[];const s=await e.whenLayerView(n);if(!zst(s))return[];const a=s.createQuery(),o=t.getObjectId();a.aggregateIds=o!=null?[o]:[];const{features:l}=await s.queryFeatures(a,i);return l}function Dst({layer:t,aggregatedFeatures:e,interceptor:i}){const{fields:r,objectIdField:n,geometryType:s,spatialReference:a}=t,o="displayField"in t?t.displayField:void 0;return new ot({fields:r,objectIdField:n,geometryType:s,spatialReference:a,displayField:o,interceptor:i,...t.type==="feature"?{templates:t.templates,typeIdField:t.typeIdField,types:t.types}:null,source:e})}function jst(t){return t.isAggregate?"popup-feature-reduction":t.declaredClass==="esri.views.3d.layers.VoxelGraphic"?"popup-voxel":Ast(t.origin)||Ost(t.origin)?"popup-imagery":"popup"}function G$e(t){var e,i;return{scale:t==null?void 0:t.scale,timeProperties:{currentStart:(e=t==null?void 0:t.timeExtent)==null?void 0:e.start,currentEnd:(i=t==null?void 0:t.timeExtent)==null?void 0:i.end,startIncluded:!0,endIncluded:!0}}}function Vst(t){return{$voxel:t}}function Ust(t){var i;let e=null;if(((i=t.origin.layer.fields)==null?void 0:i.length)>0){e=t.cloneShallow();const r=t.origin.layer.fieldsIndex;e.attributes=Object.fromEntries(Object.entries(e.attributes??{}).filter(([n])=>r.has(n)))}return{$pixel:t,$imageCollectionItem:e}}async function Bst(t,e,i,r,n,s,a){let o=null;if(s.has("$aggregatedfeatures")){const l=await Nst({graphic:e,view:i,options:r}),c=e.sourceLayer||e.layer;o=Dst({layer:c,aggregatedFeatures:l,interceptor:n})}return{vars:{$feature:e,$aggregatedFeatures:o,$view:G$e(i)},track:a?await W$e(t,e,i):null,[Symbol.dispose]:()=>o==null?void 0:o[Symbol.dispose]()}}function xle(t){if(L6e(t))return t.getTime();if(typeof t=="number")return t;if(typeof t=="string")return new Date(t).getTime();throw new Error(`Unexpected time value: ${t}`)}async function W$e(t,e,i){var g;const r=e.sourceLayer||e.layer;if(r==null||!("timeInfo"in r))return null;const n=(g=r.timeInfo)==null?void 0:g.trackIdField;if(n==null)return null;const s=e.getAttribute(n);if(s==null)return null;let a,o;if(typeof s=="string")a=`"${n.replaceAll('"','""')}" = '${s.replaceAll("'","''")}'`;else{if(typeof s!="number")return fF().warn("Expected track id to be a string or number"),null;a=`"${n.replaceAll('"','""')}" = ${s}`}if(r.type==="stream"&&i!=null){const v=await i.whenLayerView(r),b=v.createQuery();b.returnGeometry=!0,b.where=ow(b.where,a),o=(await v.queryFeatures(b)).features}else{if(!("queryFeatures"in r))return null;{const v=r.createQuery();v.returnGeometry=!0,v.where=ow(v.where,a),o=(await r.queryFeatures(v)).features}}const l=r.fieldsIndex.normalizeFieldName(r.timeInfo.startField)??Lst,c=r.timeInfo.endField?r.fieldsIndex.normalizeFieldName(r.timeInfo.endField):null,h=o.map(v=>{const b=v.getObjectId();if(b==null)throw new Error("Cannot identify observation");const x=t.ArcadeFeature.createFromGraphic(v,i==null?void 0:i.timeZone),$=xle(v.getAttribute(l));return{id:b,feature:x,startTime:$,endTime:c!=null?xle(v.getAttribute(c)):$,stats:{totalDistance:void 0,distance:void 0,speed:void 0,acceleration:void 0}}}).sort((v,b)=>v.startTime-b.startTime),m=e.declaredClass==="esri.TrackGraphic"?h.length-1:h.findIndex(v=>e.getObjectId()===v.id);if(m<0)throw new Error("Couldn't locate feature in observations");return{observations:h,currentObservationIndex:m}}async function qst(t,e,i,r,n,s){var o;const a=(e.sourceLayer||e.layer)??void 0;return{vars:{$feature:e,$layer:a!=null&&Est(a)?a:(a==null?void 0:a.type)==="scene"&&a.associatedLayer!=null?a.associatedLayer:void 0,$map:i,$datastore:a&&"url"in a?a.url:void 0,$userInput:r,$graph:(a==null?void 0:a.type)==="knowledge-graph-sublayer"?(o=a.parentCompositeLayer)==null?void 0:o.knowledgeGraph:void 0,$view:G$e(n)},track:s?await W$e(t,e,n):null}}async function Hst(t,{arcade:e,graphic:i,map:r,location:n,view:s,options:a,interceptor:o,arcadeExecutor:l,usesTrack:c}){switch(t){case"popup":return{...await qst(e,i,r,n,s,c),[Symbol.dispose](){}};case"popup-feature-reduction":{const h=new Set(l.variablesUsed);return await Bst(e,i,s,a,o,h,c)}case"popup-voxel":return{vars:Vst(i),track:null,[Symbol.dispose](){}};case"popup-imagery":return{vars:Ust(i),track:null,[Symbol.dispose](){}};default:throw new Error(`Unexpected profile name ${t}`)}}async function Z$e(){const[t,e,{Feature:i}]=await Promise.all([de(()=>import("./arcade-CLsHsfal.js"),__vite__mapDeps([297,148,150])),de(()=>import("./arcade-DmcJSf2H.js").then(r=>r.H),__vite__mapDeps([147,148,149,150,23,151,11,152,153,19,154])),de(()=>import("./Feature-D1tiPxwC.js").then(r=>r.F),__vite__mapDeps([151,149,150,23,11]))]);return{executor:t,syntaxUtils:e,ArcadeFeature:i}}async function Y$e(t,e,i){const{executor:{createArcadeProfile:r,createArcadeExecutor:n},syntaxUtils:s}=i,a=jst(e),o=r(a);let l;try{l=await n(t,o)}catch(m){return fF().error("arcade-executor-error",{error:m,expression:t}),null}const c=new Set;l.variablesUsed.includes("$view")&&(s.scriptUsesViewProperties(l.syntaxTree,["scale"])&&c.add("view-scale"),s.scriptUsesViewProperties(l.syntaxTree,["timeProperties"])&&c.add("view-time-extent"));const h=s.scriptUsesTrack(l.syntaxTree);return{dependencies:c,async evaluate({graphic:m,interceptor:g,location:v,map:b,options:x,spatialReference:$,view:M}){var A;const k={stack:[],error:void 0,hasError:!1};try{const L=mPe(k,await Hst(a,{arcade:i,graphic:m,map:b,location:v,view:M,options:x,interceptor:g,arcadeExecutor:l,usesTrack:h}),!1),z={abortSignal:(x==null?void 0:x.signal)??void 0,interceptor:g??void 0,rawOutput:!0,spatialReference:$??void 0,timeZone:M==null?void 0:M.timeZone,track:L.track,console(...U){fF().info(...U)}};try{return await l.executeAsync(L.vars,z)}catch(U){return(A=x==null?void 0:x.signal)!=null&&A.aborted?void 0:void fF().error("arcade-execution-error",{error:U,graphic:m,expression:t})}}catch(L){k.error=L,k.hasError=!0}finally{yPe(k)}}}}async function J$e({expression:t,graphic:e}){return t?Y$e(t,e,await Z$e()):null}async function Gst(t,e){if(!(t!=null&&t.length))return{dependencies:new Set,expressions:new Map};const i=await Z$e(),r=new Set,n=new Map;for(const s of t){const a=await Y$e(s.expression,e,i);n.set(`expression/${s.name}`,a),a==null||a.dependencies.forEach(o=>r.add(o))}return{dependencies:r,expressions:n}}const $le=1;let ka=class extends et{constructor(e){super(e),this._compileTask=null,this._evaluateTask=null,this.expressionInfo=null,this.graphic=null,this.contentElementViewModel=null,this.interceptor=null,this.location=null,this.view=null,this._createVM=()=>{var n,s;const i=(n=this.contentElement)==null?void 0:n.type;(s=this.contentElementViewModel)==null||s.destroy();const r=i==="fields"?new ko:i==="media"?new qr:i==="text"?new _d:null;this._set("contentElementViewModel",r)},this._compileThrottled=FE(this._startCompile,()=>this.notifyChange("state"),$le,this),this._evaluateThrottled=FE(this._startEvaluate,()=>this.notifyChange("state"),$le,this),this.addHandles([be(()=>[this.expressionInfo,this.graphic],()=>this._compileThrottled(),Ft),be(()=>[this.contentElement],()=>this._createVM(),Ft),cn(()=>{var n,s,a,o,l,c;if(!((n=this._compileTask)!=null&&n.finished))return null;const i=this._compileTask.value,r=i==null?void 0:i.dependencies;return[i,this.spatialReference,this.map,this.view,r!=null&&r.has("view-scale")?(s=this.view)==null?void 0:s.scale:null,r!=null&&r.has("view-time-extent")?(o=(a=this.view)==null?void 0:a.timeExtent)==null?void 0:o.start:null,r!=null&&r.has("view-time-extent")?(c=(l=this.view)==null?void 0:l.timeExtent)==null?void 0:c.end:null]},([i])=>this._evaluateThrottled(i))])}initialize(){this.addHandles([this._compileThrottled,this._evaluateThrottled])}destroy(){var e;this._compileTask=Fa(this._compileTask),this._evaluateTask=Fa(this._evaluateTask),(e=this.contentElementViewModel)==null||e.destroy(),this._set("contentElementViewModel",null)}get contentElement(){var e;return(e=this._evaluateTask)==null?void 0:e.value}get spatialReference(){var e;return((e=this.view)==null?void 0:e.spatialReference)??null}set spatialReference(e){this._override("spatialReference",e)}get state(){var r,n;const{contentElement:e,contentElementViewModel:i}=this;return this._compileThrottled.hasPendingUpdates()||this._evaluateThrottled.hasPendingUpdates()||!((r=this._compileTask)!=null&&r.finished)||!((n=this._evaluateTask)!=null&&n.finished)?"loading":e||i?"ready":"disabled"}get map(){var e;return((e=this.view)==null?void 0:e.map)??null}set map(e){this._override("map",e)}_startCompile(){this._evaluateTask=Fa(this._evaluateTask),this._compileTask=Fa(this._compileTask),this._compileTask=Zm(async e=>{const{expressionInfo:i,graphic:r}=this,n=i==null?void 0:i.expression;if(!n||!r)return null;const s=await J$e({expression:n,graphic:r});return lr(e),s})}_startEvaluate(e){this._evaluateTask=Fa(this._evaluateTask),this._evaluateTask=Zm(async i=>{const{graphic:r}=this;if(!e||!r)return null;const{interceptor:n,spatialReference:s,map:a,location:o,view:l}=this,c=await e.evaluate({graphic:r,interceptor:n,location:o,map:a,options:{signal:i},spatialReference:s,view:l});lr(i);const h=c;if(!h||h.declaredClass!=="esri.arcade.Dictionary")return null;const m=await h.castAsJsonAsync(i);lr(i);const g=m==null?void 0:m.type,v=g==="media"?o_.fromJSON(m):g==="text"?xu.fromJSON(m):g==="fields"?Fv.fromJSON(m):null;return v.type==="media"&&!v.mediaInfos||v.type==="fields"&&!v.fieldInfos||v.type==="text"&&!v.text?null:v})}};d([f()],ka.prototype,"_compileTask",void 0),d([f()],ka.prototype,"_evaluateTask",void 0),d([f({type:zbe})],ka.prototype,"expressionInfo",void 0),d([f({type:sr})],ka.prototype,"graphic",void 0),d([f({readOnly:!0})],ka.prototype,"contentElement",null),d([f({readOnly:!0})],ka.prototype,"contentElementViewModel",void 0),d([f()],ka.prototype,"interceptor",void 0),d([f({type:St})],ka.prototype,"location",void 0),d([f()],ka.prototype,"spatialReference",null),d([f({readOnly:!0})],ka.prototype,"state",null),d([f()],ka.prototype,"map",null),d([f()],ka.prototype,"view",void 0),ka=d([V("esri.widgets.Feature.FeatureExpression.FeatureExpressionViewModel")],ka);const Sle="esri-feature",Tle={base:`${Sle}-expression`,loadingSpinnerContainer:`${Sle}__loading-container`};let mF=class extends da{constructor(e,i){super(e,i),this._contentWidget=null,this.viewModel=new ka}initialize(){this.addHandles(be(()=>{var e;return(e=this.viewModel)==null?void 0:e.contentElementViewModel},()=>this._setupExpressionWidget(),Ft))}loadDependencies(){return Iu({loader:()=>de(()=>Promise.resolve().then(()=>rA),void 0)})}destroy(){this._destroyContentWidget()}render(){var i;const{state:e}=this.viewModel;return ue("div",{class:Tle.base},e==="loading"?this._renderLoading():e==="disabled"?null:(i=this._contentWidget)==null?void 0:i.render())}_renderLoading(){return ue("div",{class:Tle.loadingSpinnerContainer,key:"loading-container"},ue("calcite-loader",{inline:!0,label:""}))}_destroyContentWidget(){const{_contentWidget:e}=this;e&&(e.viewModel=null,e.destroy()),this._contentWidget=null}_setupExpressionWidget(){const{contentElementViewModel:e,contentElement:i}=this.viewModel,r=i==null?void 0:i.type;this._destroyContentWidget();const n=e?r==="fields"?new iu({viewModel:e}):r==="media"?new Xa({viewModel:e}):r==="text"?new Am({viewModel:e}):null:null;this._contentWidget=n,this.scheduleRender()}};d([f({type:ka})],mF.prototype,"viewModel",void 0),mF=d([V("esri.widgets.Feature.FeatureExpression")],mF);const Wst=t=>{var i;const e=[];if(t.formTemplate){const{description:r,title:n}=t.formTemplate;(i=t.fields)==null||i.forEach(s=>{const a=n&&YB(n,s.name),o=r&&YB(r,s.name);(a||o)&&e.push(s.name)})}return e},_U=100;let yi=class extends bt(__(et)){constructor(e){super(e),this._loaded=!1,this._queryAbortController=null,this._queryPageAbortController=null,this._queryFeatureCountAbortController=null,this.featuresPerPage=10,this.activeCategory=null,this.allCategories=null,this.description=null,this.graphic=null,this.layer=null,this.map=null,this.orderByFields=null,this.featureCount=0,this.relationshipId=null,this.showAllEnabled=!1,this.title=null,this._cancelQuery=()=>{const{_queryAbortController:i}=this;i&&i.abort(),this._queryAbortController=null},this._cancelQueryFeatureCount=()=>{const{_queryFeatureCountAbortController:i}=this;i&&i.abort(),this._queryFeatureCountAbortController=null},this._cancelQueryPage=()=>{const{_queryPageAbortController:i}=this;i&&i.abort(),this._queryPageAbortController=null},this._queryController=async()=>{this._cancelQuery();const i=new AbortController;this._queryAbortController=i,await la(this._query()),this._queryAbortController===i&&(this._queryAbortController=null)},this._queryFeatureCountController=async()=>{this._loaded=!1,this._cancelQueryFeatureCount();const i=new AbortController;this._queryFeatureCountAbortController=i,await la(this._queryFeatureCount()),this._queryFeatureCountAbortController===i&&(this._queryFeatureCountAbortController=null),this._loaded=!0},this._queryPageController=async()=>{const i=new AbortController;this._queryPageAbortController=i,await la(this._queryPage()),this._queryPageAbortController===i&&(this._queryPageAbortController=null)},this._queryDebounced=Od(this._queryController,_U),this._queryFeatureCountDebounced=Od(this._queryFeatureCountController,_U),this._queryPageDebounced=Od(this._queryPageController,_U),this._query=async()=>{var n;const{_queryAbortController:i,relatedFeatures:r}=this;this.featureCount&&(((n=this.relatedLayer)==null?void 0:n.type)!=="subtype-group"||this.activeCategory)&&(this._destroyRelatedFeatureViewModels(),this.featurePage=1,r.destroyAll(),this.destroyed||r.addMany(this._sliceFeatures(await this._queryRelatedFeatures({signal:i==null?void 0:i.signal}))))},this.addHandles([be(()=>{var i;return[this.displayCount,this.graphic,this.layer,(i=this.layer)==null?void 0:i.loaded,this.map,this.orderByFields,this.relationshipId,this.featuresPerPage,this.showAllEnabled,this.canQuery,this.featureCount,this.activeCategory]},()=>this._queryDebounced(),Ft),be(()=>[this.featurePage,this.showAllEnabled],()=>this._queryPageDebounced()),be(()=>[this.layer,this.relationshipId,this.objectId,this.canQuery,this.activeCategory],()=>this._queryFeatureCountDebounced())])}destroy(){this._destroyRelatedFeatureViewModels(),this.relatedFeatures.destroyAll(),this._cancelQuery(),this._cancelQueryFeatureCount(),this._cancelQueryPage()}set featurePage(e){const{featuresPerPage:i,featureCount:r}=this,n=1,s=Math.ceil(r/i)||1;this._set("featurePage",Math.min(Math.max(e,n),s))}get featurePage(){return this._get("featurePage")}get orderByFieldsFixedCasing(){const{orderByFields:e,relatedLayer:i}=this;return e&&(i!=null&&i.loaded)?e.map(r=>{const n=r.clone();return n.field=lT(r.field,i),n}):e??[]}get supportsCacheHint(){var e,i,r;return!!((r=(i=(e=this.layer)==null?void 0:e.capabilities)==null?void 0:i.queryRelated)!=null&&r.supportsCacheHint)}get canLoad(){return!!this.map&&this.relationshipId!=null&&typeof this.objectId=="number"}get canQuery(){var i,r;const e=(r=(i=this.layer)==null?void 0:i.capabilities)==null?void 0:r.queryRelated;return!!(this.relatedLayer&&this.relationship&&this.relationshipId!=null&&this.objectId!=null&&(e!=null&&e.supportsCount)&&(e!=null&&e.supportsPagination))}get allCategoriesCount(){var e;return((e=this.allCategories)==null?void 0:e.length)??0}get categories(){const{allCategories:e}=this;return this.showAllEnabled?e:(e==null?void 0:e.slice(0,this.displayCount))??null}set displayCount(e){this._set("displayCount",Math.min(Math.max(e??3,0),10))}get displayCount(){return this._get("displayCount")}get itemDescriptionFieldName(){var e;return((e=this.orderByFieldsFixedCasing[0])==null?void 0:e.field)||null}get objectId(){var e,i;return(this.objectIdField&&((i=(e=this.graphic)==null?void 0:e.attributes)==null?void 0:i[this.objectIdField]))??null}get objectIdField(){var e;return((e=this.layer)==null?void 0:e.objectIdField)||null}get relatedFeatures(){return this._get("relatedFeatures")||new Ue}get relatedLayer(){const{layer:e,map:i,relationship:r}=this;if(!(e!=null&&e.loaded)||!i||!r)return null;const n=e.type==="subtype-sublayer"&&e.parent&&tI(e.parent)?e.parent:e;return SJ(i,n,r)??null}get relatedLayerKeyField(){var r,n;const{relatedLayer:e,relationshipId:i}=this;return e!=null&&e.loaded&&i!=null?(n=(r=e.relationships)==null?void 0:r.find(s=>s.id===i))==null?void 0:n.keyField:null}get relatedLayerKeyFields(){var i;const{relatedLayer:e}=this;return e!=null&&e.loaded?((i=e.relationships)==null?void 0:i.map(r=>r.keyField).filter(ln))??[]:[]}get relationship(){var r;const{relationshipId:e,layer:i}=this;return e!=null&&(i!=null&&i.loaded)?((r=i.relationships)==null?void 0:r.find(({id:n})=>n===e))??null:null}get relationshipKey(){var i,r;const{relationshipKeyField:e}=this;return(e&&((r=(i=this.graphic)==null?void 0:i.attributes)==null?void 0:r[e]))??null}get relationshipKeyField(){var e;return((e=this.relationship)==null?void 0:e.keyField)||null}get relatedFeatureViewModels(){return this._get("relatedFeatureViewModels")||new Ue}get state(){const{_queryAbortController:e,_queryFeatureCountAbortController:i,_queryPageAbortController:r,canQuery:n,_loaded:s,canLoad:a}=this;return i||a&&!s?"loading":e||r?"querying":n?"ready":"disabled"}getRelatedFeatureByObjectId(e){return this.relatedFeatures.find(i=>i.getObjectId()===e)}refresh(){this._queryFeatureCountDebounced()}_destroyRelatedFeatureViewModels(){var e;(e=this.relatedFeatureViewModels)==null||e.destroyAll()}async _queryFeatureCount(){const{layer:e,relatedLayer:i}=this;await(e==null?void 0:e.load()),await(i==null?void 0:i.load());const{_queryFeatureCountAbortController:r,activeCategory:n,canQuery:s,objectId:a,relatedLayerKeyField:o,relationshipId:l,relationshipKey:c,supportsCacheHint:h}=this;if(!s||!e||!i||a==null)return this._set("featureCount",0),void this._set("allCategories",null);if((i==null?void 0:i.type)==="subtype-group"&&!n){if(this._set("featureCount",0),this._destroyRelatedFeatureViewModels(),this.featurePage=1,this.relatedFeatures.destroyAll(),o&&c!=null){const{default:x}=await de(()=>import("./uniqueValues-yH2Emd2h.js"),__vite__mapDeps([298,1,2,3,299,0,197,15,22])),{uniqueValueInfos:$}=await x({layer:i,sqlWhere:`${o} = '${c}'`,field:i.subtypeField,signal:r==null?void 0:r.signal}),M=$.map(({count:k,value:A})=>{var z,U;const L=(U=(z=i.subtypes)==null?void 0:z.find(B=>B.code===A))==null?void 0:U.name;return A!=null&&L?{count:k,value:A,name:L}:void 0}).filter(ln);this._set("allCategories",M)}return}const{historicMoment:m,gdbVersion:g}=e,v=new nr({cacheHint:h,gdbVersion:g,historicMoment:m,relationshipId:l,returnGeometry:!1,objectIds:[a],where:this._getRelationshipWhereClause(i)}),b=await e.queryRelatedFeaturesCount(v,{signal:r==null?void 0:r.signal});this._set("allCategories",null),this._set("featureCount",b[a]||0)}_getRelationshipWhereClause(e){const{activeCategory:i}=this,r=e.createQuery(),n="subtypeField"in e?e.subtypeField:void 0,s=i&&n?`${n} = ${i.value}`:void 0,a=r.where;return a&&s?`(${a}) AND (${s})`:a??s}_sliceFeatures(e){const{showAllEnabled:i,displayCount:r}=this;return i?e:r?e.slice(0,r):[]}async _queryPage(){var a;const{relatedFeatures:e,featurePage:i,showAllEnabled:r,_queryPageAbortController:n,featureCount:s}=this;!r||i<2||!s||((a=this.relatedLayer)==null?void 0:a.type)==="subtype-group"&&!this.activeCategory||e.addMany(await this._queryRelatedFeatures({signal:n==null?void 0:n.signal}))}async _queryRelatedFeatures(e){var Q;const{displayCount:i,featureCount:r,featurePage:n,featuresPerPage:s,layer:a,orderByFieldsFixedCasing:o,relatedLayer:l,relatedLayerKeyFields:c,relationshipId:h,showAllEnabled:m,supportsCacheHint:g}=this,{canQuery:v,objectId:b}=this;if(!v||!a||!l||b==null)return[];const x=m?((n-1)*s+r)%r:0,$=m?s:i,M=l.objectIdField,k="subtypeField"in l?l.subtypeField:void 0,A=[...o.map(le=>le.field),...Wst(l),...c,M,k].filter(Zst),L=o.map(le=>`${le.field} ${le.order}`),{historicMoment:z,gdbVersion:U}=a,B=new nr({orderByFields:L,start:x,num:$,outFields:A,cacheHint:g,historicMoment:z,gdbVersion:U,relationshipId:h,returnGeometry:!1,objectIds:[b],where:this._getRelationshipWhereClause(l)}),X=await a.queryRelatedFeatures(B,{signal:e==null?void 0:e.signal}),J=((Q=X[b])==null?void 0:Q.features)||[];return l.type==="subtype-group"&&k?J.forEach(le=>{var se;const ie=le.attributes[k],re=(se=l.findSublayerForSubtypeCode)==null?void 0:se.call(l,ie);le.sourceLayer=re,le.layer=re}):J.forEach(le=>{le.sourceLayer=l,le.layer=l}),J}};function Zst(t){return t!=null&&t!==""}d([f()],yi.prototype,"_loaded",void 0),d([f()],yi.prototype,"_queryAbortController",void 0),d([f()],yi.prototype,"_queryPageAbortController",void 0),d([f()],yi.prototype,"_queryFeatureCountAbortController",void 0),d([f({value:1})],yi.prototype,"featurePage",null),d([f()],yi.prototype,"featuresPerPage",void 0),d([f({readOnly:!0})],yi.prototype,"orderByFieldsFixedCasing",null),d([f({readOnly:!0})],yi.prototype,"supportsCacheHint",null),d([f({readOnly:!0})],yi.prototype,"canLoad",null),d([f({readOnly:!0})],yi.prototype,"canQuery",null),d([f()],yi.prototype,"activeCategory",void 0),d([f({readOnly:!0})],yi.prototype,"allCategories",void 0),d([f({readOnly:!0})],yi.prototype,"allCategoriesCount",null),d([f({readOnly:!0})],yi.prototype,"categories",null),d([f()],yi.prototype,"description",void 0),d([f({value:3})],yi.prototype,"displayCount",null),d([f({type:sr})],yi.prototype,"graphic",void 0),d([f({readOnly:!0})],yi.prototype,"itemDescriptionFieldName",null),d([f()],yi.prototype,"layer",void 0),d([f()],yi.prototype,"map",void 0),d([f({readOnly:!0})],yi.prototype,"objectId",null),d([f({readOnly:!0})],yi.prototype,"objectIdField",null),d([f()],yi.prototype,"orderByFields",void 0),d([f({readOnly:!0})],yi.prototype,"relatedFeatures",null),d([f({readOnly:!0})],yi.prototype,"relatedLayer",null),d([f({readOnly:!0})],yi.prototype,"relatedLayerKeyField",null),d([f({readOnly:!0})],yi.prototype,"relatedLayerKeyFields",null),d([f({readOnly:!0})],yi.prototype,"relationship",null),d([f({readOnly:!0})],yi.prototype,"relationshipKey",null),d([f({readOnly:!0})],yi.prototype,"relationshipKeyField",null),d([f({readOnly:!0})],yi.prototype,"featureCount",void 0),d([f({readOnly:!0})],yi.prototype,"relatedFeatureViewModels",null),d([f()],yi.prototype,"relationshipId",void 0),d([f()],yi.prototype,"showAllEnabled",void 0),d([f()],yi.prototype,"state",null),d([f()],yi.prototype,"title",void 0),yi=d([V("esri.widgets.Feature.FeatureRelationship.FeatureRelationshipViewModel")],yi);var gF;const yF="esri-feature",OM=`${yF}-relationship`,Cf={base:OM,listContainer:`${OM}__list`,listItem:`${OM}__list-item`,listItemHidden:`${OM}__list-item--hidden`,listContainerQuerying:`${OM}__list--querying`,featureObserver:`${yF}__feature-observer`,stickySpinnerContainer:`${yF}__sticky-loading-container`,loadingSpinnerContainer:`${yF}__loading-container`},Ile={title:!0,description:!0};let ta=gF=class extends da{constructor(t,e){super(t,e),this._featureElementInfo=null,this._relatedFeatureIntersectionObserverNode=null,this._relatedFeatureIntersectionObserver=new IntersectionObserver(([i])=>{i!=null&&i.isIntersecting&&this._increaseFeaturePage()},{root:window.document}),this.flowItems=null,this.flowType="feature-relationship",this.headingLevel=2,this.viewModel=new yi,this.messages=null,this.messagesCommon=null,this.visibleElements={...Ile},this._increaseFeaturePage=()=>{const{state:i,showAllEnabled:r,relatedFeatures:n,featuresPerPage:s,featurePage:a}=this.viewModel;i==="ready"&&r&&n.length>=s*a&&this.viewModel.featurePage++}}initialize(){this._featureElementInfo=new Wh,this.addHandles([be(()=>[this.viewModel.description,this.viewModel.title,this.headingLevel],()=>this._setupFeatureElementInfo(),Ft),be(()=>[this.viewModel.state,this.viewModel.showAllEnabled,this._relatedFeatureIntersectionObserverNode],()=>this._handleRelatedFeatureObserverChange()),ca(()=>this.viewModel.relatedFeatureViewModels,"change",()=>this._setupRelatedFeatureViewModels())])}loadDependencies(){return Iu({chip:()=>de(()=>Promise.resolve().then(()=>Mke),void 0),icon:()=>de(()=>Promise.resolve().then(()=>TT),void 0),list:()=>de(()=>Promise.resolve().then(()=>RX),void 0),"list-item":()=>de(()=>Promise.resolve().then(()=>AX),void 0),loader:()=>de(()=>Promise.resolve().then(()=>rA),void 0),notice:()=>de(()=>Promise.resolve().then(()=>zX),void 0)})}destroy(){this._unobserveRelatedFeatureObserver(),this._featureElementInfo=Or(this._featureElementInfo)}get displayShowAllButton(){const{showAllEnabled:t,featureCount:e,displayCount:i,state:r,allCategoriesCount:n}=this.viewModel;return!t&&r==="ready"&&(!!n&&(n>i||i===0)||!!e&&(e>i||i===0))}get displayListItems(){const{relatedFeatureViewModels:t,allCategoriesCount:e}=this.viewModel;return this.displayShowAllButton||!!t.length||!!e}get allItemsDescription(){const{messages:t}=this,{featureCount:e,allCategories:i,allCategoriesCount:r}=this.viewModel;return Sr(t==null?void 0:t.numberRecords,{number:or(i?r:e)})}get description(){return this.viewModel.description}set description(t){this.viewModel.description=t}get title(){const{activeCategory:t,title:e}=this.viewModel;return(t==null?void 0:t.name)??e}set title(t){this.viewModel.title=t}castVisibleElements(t){return{...Ile,...t}}render(){var e;const{state:t}=this.viewModel;return ue("div",{class:this.classes(Cf.base,Ht.widget)},(e=this._featureElementInfo)==null?void 0:e.render(),t==="loading"?this._renderLoading():t==="disabled"?this._renderRelationshipNotFound():this._renderRelatedFeatures())}_selectCategory(t){const{flowItems:e,featureVisibleElements:i,viewModel:r}=this;e&&(r.activeCategory=t,r.showAllEnabled=!0,e.push(new gF({flowItems:e,featureVisibleElements:i,visibleElements:{title:!1,description:!1},viewModel:r})))}async _selectRecord(t){const{flowItems:e,featureVisibleElements:i}=this;if(!e)return;t.abilities={relationshipContent:!0};const{default:r}=await de(()=>Promise.resolve().then(()=>Qst),void 0);e.push(new r({flowItems:e,flowType:this.flowType,viewModel:t,visibleElements:i}))}_showAllRecords(){const{flowItems:t}=this;if(!t)return;const{viewModel:e,featureVisibleElements:i}=this;e.showAllEnabled=!0;const r=new gF({flowItems:t,featureVisibleElements:i,visibleElements:{title:!1,description:!1},viewModel:e});t.push(r)}_renderStickyLoading(){return this.viewModel.state==="querying"?ue("div",{class:Cf.stickySpinnerContainer,key:"sticky-loader"},this._renderLoadingIcon()):null}_renderLoadingIcon(){return ue("calcite-loader",{inline:!0,label:""})}_renderLoading(){return ue("div",{class:Cf.loadingSpinnerContainer,key:"loading-container"},this._renderLoadingIcon())}_renderShowAllIconNode(){return ue("calcite-icon",{icon:"list",scale:"s",slot:"content-end"})}_renderChevronIconNode(){const t=xp(this.container)?"chevron-left":"chevron-right";return ue("calcite-icon",{icon:t,scale:"s",slot:"content-end"})}_renderCategory(t){const{count:e,name:i,value:r}=t,n=or(e);return ue("calcite-list-item",{class:Cf.listItem,disabled:!e,key:r,label:i,onCalciteListItemSelect:()=>this._selectCategory(t)},ue("calcite-chip",{label:n,scale:"s",slot:"content-end"},n),this._renderChevronIconNode())}_renderRelatedFeature(t){var n;const{itemDescriptionFieldName:e}=this.viewModel,i=t.title;t.description=e&&((n=t.formattedAttributes)==null?void 0:n.global[e]);const r=t.state==="loading";return ue("calcite-list-item",{class:this.classes(Cf.listItem,{[Cf.listItemHidden]:r}),description:Iv(t.description??""),key:t.uid,label:Iv(i),onCalciteListItemSelect:()=>this._selectRecord(t)},this._renderChevronIconNode())}_renderShowAllListItem(){var t;return this.displayShowAllButton?ue("calcite-list-item",{description:this.allItemsDescription,key:"show-all-item",label:(t=this.messages)==null?void 0:t.showAll,onCalciteListItemSelect:()=>this._showAllRecords()},this._renderShowAllIconNode()):null}_renderNoRelatedFeaturesMessage(){var t;return ue("calcite-notice",{icon:"information",key:"no-related-features-message",kind:"brand",open:!0,scale:"s",width:"full"},ue("div",{slot:"message"},(t=this.messages)==null?void 0:t.noRelatedFeatures))}_renderFeatureObserver(){return ue("div",{afterCreate:this._relatedFeatureIntersectionObserverCreated,bind:this,class:Cf.featureObserver,key:"feature-observer"})}_renderList(){var i;const{relatedFeatureViewModels:t,categories:e}=this.viewModel;return ue("calcite-list",{displayMode:"flat",label:(i=this.messages)==null?void 0:i.relatedFeaturesList},(e==null?void 0:e.map(r=>this._renderCategory(r)))??t.toArray().map(r=>this._renderRelatedFeature(r)),this._renderShowAllListItem())}_renderRelatedFeatures(){const{displayListItems:t}=this,{state:e}=this.viewModel;return ue("div",{class:this.classes(Cf.listContainer,{[Cf.listContainerQuerying]:e==="querying"}),key:"list-container"},t?this._renderList():e==="ready"?this._renderNoRelatedFeaturesMessage():null,this._renderStickyLoading(),this._renderFeatureObserver())}_renderRelationshipNotFound(){var t;return ue("calcite-notice",{icon:"exclamation-mark-triangle",key:"relationship-not-found",kind:"danger",open:!0,scale:"s",width:"full"},ue("div",{slot:"message"},(t=this.messages)==null?void 0:t.relationshipNotFound))}_setupRelatedFeatureViewModels(){const{relatedFeatureViewModels:t}=this.viewModel,e="related-feature-viewmodels";this.removeHandles(e),t==null||t.forEach(i=>{this.addHandles(be(()=>[i.title,i.state],()=>this.scheduleRender(),Ft),e)}),this.scheduleRender()}_setupFeatureElementInfo(){var n;const{headingLevel:t,visibleElements:e}=this,i=e.description&&this.description,r=e.title&&this.title;(n=this._featureElementInfo)==null||n.set({description:i,title:r,headingLevel:t})}async _handleRelatedFeatureObserverChange(){this._unobserveRelatedFeatureObserver();const{state:t,showAllEnabled:e}=this.viewModel;await Ck(0),this._relatedFeatureIntersectionObserverNode&&t==="ready"&&e&&this._relatedFeatureIntersectionObserver.observe(this._relatedFeatureIntersectionObserverNode)}_relatedFeatureIntersectionObserverCreated(t){this._relatedFeatureIntersectionObserverNode=t}_unobserveRelatedFeatureObserver(){this._relatedFeatureIntersectionObserverNode&&this._relatedFeatureIntersectionObserver.unobserve(this._relatedFeatureIntersectionObserverNode)}};d([f()],ta.prototype,"_relatedFeatureIntersectionObserverNode",void 0),d([f({readOnly:!0})],ta.prototype,"displayShowAllButton",null),d([f({readOnly:!0})],ta.prototype,"displayListItems",null),d([f({readOnly:!0})],ta.prototype,"allItemsDescription",null),d([f()],ta.prototype,"description",null),d([f()],ta.prototype,"featureVisibleElements",void 0),d([f()],ta.prototype,"flowItems",void 0),d([f()],ta.prototype,"flowType",void 0),d([f()],ta.prototype,"headingLevel",void 0),d([f()],ta.prototype,"title",null),d([f({type:yi})],ta.prototype,"viewModel",void 0),d([f(),js("esri/widgets/Feature/t9n/Feature")],ta.prototype,"messages",void 0),d([f(),js("esri/t9n/common")],ta.prototype,"messagesCommon",void 0),d([f()],ta.prototype,"visibleElements",void 0),d([_i("visibleElements")],ta.prototype,"castVisibleElements",null),ta=gF=d([V("esri.widgets.Feature.FeatureRelationship")],ta);let T$=class extends et{constructor(e){super(e),this.title=!0,this.description=!0}};d([f({type:Boolean,nonNullable:!0})],T$.prototype,"title",void 0),d([f({type:Boolean,nonNullable:!0})],T$.prototype,"description",void 0),T$=d([V("esri.widgets.Feature.FeatureUtilityNetworkAssociations.VisibleElements")],T$);const Mle={assetGroup:"assetgroup",assetType:"assettype"};function Yst(t){var o;const{attributes:e,sourceLayer:i}=t;if(!e||!i)return"";const r="displayField"in i?i.displayField:null,n=r!=null?e[r]:null,s=n!=null?n.toString():null,a=(o=t.getObjectId())==null?void 0:o.toString();return s||a||""}const Cle=100;let pi=class extends bt(__(et)){constructor(e){super(e),this._loaded=!1,this._queryAbortController=null,this._queryPageAbortController=null,this._queryFeatureCountAbortController=null,this.networkSourceIdsInUse=new Set,this.source="popup",this.description=null,this.graphic=null,this.layer=null,this.map=null,this.featureCount=0,this.associationTypes=null,this.showAllEnabled=!1,this.title=null,this.attachmentsFeatureCount=0,this.structureFeatureCount=0,this.contentFeatureCount=0,this.containerFeatureCount=0,this.connectivityFeatureCount=0,this._queryOpenAssociationType=async()=>{this.activeAssociationType&&await this._queryDebounced(this.activeAssociationType)},this._cancelQuery=()=>{const{_queryAbortController:i}=this;i&&i.abort(),this._queryAbortController=null},this._cancelQueryFeatureCount=()=>{const{_queryFeatureCountAbortController:i}=this;i&&i.abort(),this._queryFeatureCountAbortController=null},this._queryController=async i=>{this._cancelQuery();const r=new AbortController;this._queryAbortController=r,await la(this._query(i)),this._queryAbortController===r&&(this._queryAbortController=null)},this._queryFeatureCountController=async()=>{this._loaded=!1,this._cancelQueryFeatureCount();const i=new AbortController;this._queryFeatureCountAbortController=i,await la(this._queryFeatureCount()),this._queryFeatureCountAbortController===i&&(this._queryFeatureCountAbortController=null),this._loaded=!0},this._queryDebounced=Od(this._queryController,Cle),this._queryFeatureCountDebounced=Od(this._queryFeatureCountController,Cle)}initialize(){this.addHandles([be(()=>[this.graphic,this.layer,this.map,this.associationTypes,this.objectId,this.globalId,this.canQuery],()=>{this.refresh()},Ft),be(()=>this.activeAssociationType,e=>{this._queryDebounced(e)},Ft)])}destroy(){this._cancelQuery(),this._cancelQueryFeatureCount(),this._destroyAssociatedFeatureViewModels()}get supportsCacheHint(){var e,i,r;return!!((r=(i=(e=this.layer)==null?void 0:e.capabilities)==null?void 0:i.query)!=null&&r.supportsCacheHint)}get canLoad(){return!!this.map&&!!this.associationTypes&&typeof this.globalId=="string"}get canQuery(){var i,r;const e=(r=(i=this.layer)==null?void 0:i.capabilities)==null?void 0:r.query;return!!this.associationTypes&&typeof this.globalId=="string"&&!!(e!=null&&e.supportsPagination)}set displayCount(e){this._set("displayCount",Math.max(e??3,0))}get displayCount(){return this._get("displayCount")}get objectId(){var e,i;return(this.objectIdField&&((i=(e=this.graphic)==null?void 0:e.attributes)==null?void 0:i[this.objectIdField]))??null}get objectIdField(){var e;return((e=this.layer)==null?void 0:e.objectIdField)||null}get globalId(){var e,i;return(this.globalIdField&&((i=(e=this.graphic)==null?void 0:e.attributes)==null?void 0:i[this.globalIdField]))??null}get globalIdField(){const{layer:e}=this;return e==null?void 0:e.globalIdField}get activeAssociationType(){return this._get("activeAssociationType")}set activeAssociationType(e){e&&!this.associationTypes.includes(e)||this._set("activeAssociationType",e)}get state(){const{_queryAbortController:e,_queryFeatureCountAbortController:i,_queryPageAbortController:r,canQuery:n,_loaded:s,canLoad:a,source:o}=this;return i||a&&!s?"loading":e||r?"querying":!n||o==="popup"&&this.featureCount===0?"disabled":"ready"}get utilityNetwork(){const{layer:e,map:i}=this;if(!(e!=null&&e.loaded)||!i)return null;const r=Hh(e)?e.parent:e;return TJ(i,r)}get attachmentsAssociations(){return this._get("attachmentsAssociations")||new Ue}get structureAssociations(){return this._get("structureAssociations")||new Ue}get contentAssociations(){return this._get("contentAssociations")||new Ue}get containerAssociations(){return this._get("containerAssociations")||new Ue}get connectivityAssociations(){return this._get("connectivityAssociations")||new Ue}get associationFeatures(){return this._get("associationFeatures")||new bv}get associationViewModels(){return this._get("associationViewModels")||new Map}async refresh(){await this._queryFeatureCountDebounced(),await this._queryOpenAssociationType()}getFeatureCountForAssociationType(e){switch(e){case"attachment":return this.attachmentsFeatureCount;case"structure":return this.structureFeatureCount;case"content":return this.contentFeatureCount;case"container":return this.containerFeatureCount;case"connectivity":return this.connectivityFeatureCount}}_destroyAssociatedFeatureViewModels(){this.associationViewModels.forEach(e=>e.destroyAll())}async _loadUtiltyNetworks(){var r;const e=this.map;if(!e)return;await Promise.allSettled(((r=e.utilityNetworks)==null?void 0:r.map(async n=>{await n.load()}))??[]);const i=this.utilityNetwork;if(i){const n=s=>{if("layerId"in s&&i.isUtilityLayer(s)){const a=s.layerId!=null?i.getSourceIdByLayerId(s.layerId):null;a!=null&&this.networkSourceIdsInUse.add(a)}};this._set("networkSourceIdsInUse",new Set),e.allLayers.forEach(n),e.allTables.forEach(n)}}async _findLayersBySourceId(e){const{utilityNetwork:i,map:r}=this,n=c=>{const h=c;return c.url&&h.layerId===s?c.url.replace(/\/\d+$/,"")===(i==null?void 0:i.featureServiceUrl):!1};await(i==null?void 0:i.load());const s=i.getLayerIdBySourceId(e),a=r.allLayers.filter(n),o=r.allTables.filter(n),l=a.concat(o).toArray();return await Promise.allSettled(l.map(c=>c.load())),l}_clearAssociations(){this.attachmentsAssociations.removeAll(),this.structureAssociations.removeAll(),this.contentAssociations.removeAll(),this.containerAssociations.removeAll(),this.connectivityAssociations.removeAll()}_clearFeatures(){this.associationFeatures.forEach(e=>e.removeAll()),this.associationFeatures.clear()}_getAssociationsByType(e){switch(e){case"attachment":return this.attachmentsAssociations;case"structure":return this.structureAssociations;case"connectivity":return this.connectivityAssociations;case"container":return this.containerAssociations;case"content":return this.contentAssociations}}async _queryLayer(e,i,r,n,s){const a=this._getFeatureQueryWhereClause(e,i,r,n),o=new mt({where:a,outFields:["*"],cacheHint:this.supportsCacheHint}),l=zn.fromJSON(await b5(e,o,s));return l.features.forEach(c=>{c.layer=c.sourceLayer=h9(e)?e.findSublayerForFeature(c):e}),l.features}async _createAssociationFeatureObjects(e,i,r,n,s,a){if(e.length===0)return[];const o=new Map;for(const[c,h]of i){const m=await this._findLayersBySourceId(c);for(const g of m)(await this._queryLayer(g,h,n,s,a)).forEach(v=>{if(this.source==="popup"?v.sourceLayer&&v.getEffectivePopupTemplate():v.sourceLayer){const b=o.get(v.attributes[g.globalIdField])??[];b.push(v),o.set(v.attributes[g.globalIdField],b)}})}const l=[];return await Promise.all(e.toArray().map(async c=>{const{fromNetworkElement:h,toNetworkElement:m}=c,g=h.globalId===r?m:h,v=o.get(g.globalId)??[];await Promise.all(v.map(async b=>{var M,k;const x=(k=(M=this.utilityNetwork)==null?void 0:M.getTerminalById(g==null?void 0:g.terminalId))==null?void 0:k.name,$=b.sourceLayer&&"getFeatureTitle"in b.sourceLayer&&await b.sourceLayer.getFeatureTitle(b)||Yst(b);l.push({title:$,feature:b,association:c,terminalName:x})}))})),l}_parseFeatureObjects(e,i){const r=new Map;e.forEach(n=>{const s=n==null?void 0:n.feature,a=s.sourceLayer;Gp(r,a,()=>new Ue).add(n)});for(const[n,s]of r)this._sortFeatureObjectsByTitle(s),i.set(n,s)}_sortFeatureObjectsByTitle(e){e.sort(this._compareByFeatureTitle)}_compareByFeatureTitle(e,i){return e.title.localeCompare(i.title,void 0,{numeric:!0})}async _queryAssociations(e){const{layer:i,globalId:r,associationTypes:n,utilityNetwork:s,canQuery:a}=this;if(await Promise.allSettled([i==null?void 0:i.load(),s==null?void 0:s.load()]),this._clearAssociations(),!(a&&i&&n&&s&&r))return;const o=Hh(i)?i.parent:i,l=new Aa({globalId:r,networkSourceId:s.getSourceIdByLayerId(o.layerId)}),c=new Set;n.forEach(b=>{switch(b.type){case"attachment":case"structure":c.add("attachment");break;case"container":case"content":c.add("containment");break;case"connectivity":c.add("connectivity"),c.add("junction-junction-connectivity"),c.add("junction-edge-from-connectivity"),c.add("junction-edge-midspan-connectivity"),c.add("junction-edge-to-connectivity")}});const h=await(s==null?void 0:s.queryAssociations({elements:[l],types:Array.from(c)},{signal:e==null?void 0:e.signal})),m=new Map,g=new Map;n.forEach(b=>{g.set(b.type,b),m.set(b.type,[])}),h.forEach(b=>{var M,k,A,L,z,U;const{toNetworkElement:x,fromNetworkElement:$}=b;switch(b.associationType){case"connectivity":case"junction-junction-connectivity":case"junction-edge-from-connectivity":case"junction-edge-midspan-connectivity":case"junction-edge-to-connectivity":if(($==null?void 0:$.globalId)===r){if(this._shouldDiscardNetworkElement(x,"connectivity",g))break;(M=m.get("connectivity"))==null||M.push(x.globalId)}else{if(this._shouldDiscardNetworkElement($,"connectivity",g))break;(k=m.get("connectivity"))==null||k.push($.globalId)}this.connectivityAssociations.add(b);break;case"containment":if(($==null?void 0:$.globalId)===r){if(this._shouldDiscardNetworkElement(x,"content",g))break;(A=m.get("content"))==null||A.push(x.globalId),this.contentAssociations.add(b)}else{if(this._shouldDiscardNetworkElement($,"container",g))break;(L=m.get("container"))==null||L.push($.globalId),this.containerAssociations.add(b)}break;case"attachment":if(($==null?void 0:$.globalId)===r){if(this._shouldDiscardNetworkElement(x,"attachment",g))break;(z=m.get("attachment"))==null||z.push(x.globalId),this.attachmentsAssociations.add(b)}else{if(this._shouldDiscardNetworkElement($,"structure",g))break;(U=m.get("structure"))==null||U.push($.globalId),this.structureAssociations.add(b)}}});const v=n.map(async b=>{const{associatedNetworkSourceId:x,associatedAssetGroup:$,associatedAssetType:M}=b,k=m.get(b.type),A=$!=null?await this._countAssociatedFeatures(x,k,$,M,e):k.length;switch(b.type){case"attachment":this._set("attachmentsFeatureCount",A);break;case"structure":this._set("structureFeatureCount",A);break;case"content":this._set("contentFeatureCount",A);break;case"container":this._set("containerFeatureCount",A);break;case"connectivity":this._set("connectivityFeatureCount",A)}});await Promise.allSettled(v)}async _countAssociatedFeatureCount(e,i,r,n,s){const a=this._getFeatureQueryWhereClause(e,i,r,n);return e.queryFeatureCount({where:a,outFields:["*"],returnGeometry:!1},{signal:s==null?void 0:s.signal})}async _countAssociatedFeatures(e,i,r,n,s){if(i.length===0)return 0;const a=(await this._findLayersBySourceId(e)).map(async o=>this._countAssociatedFeatureCount(o,i,r,n,s));return(await Promise.all(a)).reduce((o,l)=>o+l,0)}async _queryAssociatedFeatures(e,i){const{layer:r,globalId:n,associationTypes:s,utilityNetwork:a,canQuery:o,associationFeatures:l}=this;if(await Promise.allSettled([r==null?void 0:r.load(),a==null?void 0:a.load()]),!(o&&r&&s&&a))return;const c=this._getAssociationsByType(e.type),{associatedAssetGroup:h,associatedAssetType:m}=e,g=new Map;c.forEach(b=>{const{fromNetworkElement:x,toNetworkElement:$}=b,{networkSourceId:M,elementGlobalId:k}=x.globalId===n?{networkSourceId:$.networkSourceId,elementGlobalId:$.globalId}:{networkSourceId:x.networkSourceId,elementGlobalId:x.globalId},A=g.get(M)||[];A.push(k),g.set(M,A)});const v=await this._createAssociationFeatureObjects(c,g,n,h,m,i);this._parseFeatureObjects(v,l)}async _queryFeatureCount(){await this._loadUtiltyNetworks();const{_queryFeatureCountAbortController:e,canQuery:i}=this;i?(await this._queryAssociations(e),this._set("featureCount",this.attachmentsFeatureCount+this.structureFeatureCount+this.contentFeatureCount+this.containerFeatureCount+this.connectivityFeatureCount)):this._set("featureCount",0)}async _query(e){if(!e)return;await this._loadUtiltyNetworks();const{_queryAbortController:i}=this;this._destroyAssociatedFeatureViewModels(),this._clearFeatures(),this.featureCount!==0&&(this.destroyed||await this._queryAssociatedFeatures(e,{signal:i==null?void 0:i.signal}))}_shouldDiscardNetworkElement(e,i,r){var l;if(!e)return!1;const{networkSourceIdsInUse:n}=this,{networkSourceId:s}=e,a=(l=r.get(i))==null?void 0:l.associatedNetworkSourceId,o=n.has(s);return a!=null&&a!==s||!o}_getFeatureQueryWhereClause(e,i,r,n){const s=e.globalIdField,a=e.fieldsIndex.get(Mle.assetGroup),o=e.fieldsIndex.get(Mle.assetType),l=r!=null,c=n!=null;return[s?lY(s,i):null,l?`(${a==null?void 0:a.name} = ${r})`:null,l&&c?`(${o==null?void 0:o.name} = ${n})`:null].filter(Boolean).join(" AND ")}};d([f()],pi.prototype,"_loaded",void 0),d([f()],pi.prototype,"_queryAbortController",void 0),d([f()],pi.prototype,"_queryPageAbortController",void 0),d([f()],pi.prototype,"_queryFeatureCountAbortController",void 0),d([f({readOnly:!0})],pi.prototype,"supportsCacheHint",null),d([f({readOnly:!0})],pi.prototype,"canLoad",null),d([f({readOnly:!0})],pi.prototype,"canQuery",null),d([f()],pi.prototype,"networkSourceIdsInUse",void 0),d([f({constructOnly:!0})],pi.prototype,"source",void 0),d([f()],pi.prototype,"description",void 0),d([f({value:3})],pi.prototype,"displayCount",null),d([f({type:sr})],pi.prototype,"graphic",void 0),d([f()],pi.prototype,"layer",void 0),d([f()],pi.prototype,"map",void 0),d([f({readOnly:!0})],pi.prototype,"objectId",null),d([f({readOnly:!0})],pi.prototype,"objectIdField",null),d([f({readOnly:!0})],pi.prototype,"globalId",null),d([f({readOnly:!0})],pi.prototype,"globalIdField",null),d([f()],pi.prototype,"featureCount",void 0),d([f()],pi.prototype,"associationTypes",void 0),d([f()],pi.prototype,"activeAssociationType",null),d([f()],pi.prototype,"showAllEnabled",void 0),d([f()],pi.prototype,"state",null),d([f()],pi.prototype,"title",void 0),d([f({readOnly:!0})],pi.prototype,"utilityNetwork",null),d([f({readOnly:!0})],pi.prototype,"attachmentsFeatureCount",void 0),d([f({readOnly:!0})],pi.prototype,"structureFeatureCount",void 0),d([f({readOnly:!0})],pi.prototype,"attachmentsAssociations",null),d([f({readOnly:!0})],pi.prototype,"structureAssociations",null),d([f({readOnly:!0})],pi.prototype,"contentFeatureCount",void 0),d([f({readOnly:!0})],pi.prototype,"containerFeatureCount",void 0),d([f({readOnly:!0})],pi.prototype,"contentAssociations",null),d([f({readOnly:!0})],pi.prototype,"containerAssociations",null),d([f({readOnly:!0})],pi.prototype,"connectivityFeatureCount",void 0),d([f({readOnly:!0})],pi.prototype,"connectivityAssociations",null),d([f({readOnly:!0})],pi.prototype,"associationFeatures",null),d([f({readOnly:!0})],pi.prototype,"associationViewModels",null),pi=d([V("esri.widgets.support.UtilityNetworkAssociations.FeatureUtilityNetworkAssociationsViewModel")],pi);const XH="esri-feature-utility-network-associations",Ele=`${XH}__loading-container`,ZO={base:XH,listContainer:`${XH}__list`,loadingContainer:Ele,loadingContainerSticky:`${Ele}--sticky`};let Mo=class extends da{constructor(e,i){super(e,i),this._featureElementInfo=null,this.onSelectAssociationType=()=>{},this.flowType="feature-utility-network-associations",this.flowItems=null,this.parentFeatureViewModel=null,this.headingLevel=5,this.viewModel=new pi,this.messages=null,this.messagesCommon=null,this.visibleElements=new T$}initialize(){this._featureElementInfo=new Wh,this.addHandles([be(()=>[this.viewModel.description,this.viewModel.title,this.headingLevel],()=>this._setupFeatureElementInfo(),Ft)])}loadDependencies(){return Iu({icon:()=>de(()=>Promise.resolve().then(()=>TT),void 0),list:()=>de(()=>Promise.resolve().then(()=>RX),void 0),"list-item":()=>de(()=>Promise.resolve().then(()=>AX),void 0),loader:()=>de(()=>Promise.resolve().then(()=>rA),void 0),notice:()=>de(()=>Promise.resolve().then(()=>zX),void 0)})}destroy(){this._featureElementInfo=Or(this._featureElementInfo)}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}render(){var i;const{state:e}=this.viewModel;return ue("div",{class:this.classes(ZO.base,Ht.widget)},(i=this._featureElementInfo)==null?void 0:i.render(),e==="loading"?this._renderLoading():e==="disabled"?this._renderAssociationNotFound():this._renderContent())}_renderStickyLoading(){return this.viewModel.state==="querying"?ue("div",{class:ZO.loadingContainerSticky,key:"sticky-loader"},this._renderLoadingIcon()):null}_renderLoadingIcon(){return ue("calcite-loader",{inline:!0,label:this.messagesCommon.loading})}_renderLoading(){return ue("div",{class:ZO.loadingContainer,key:"loading-container"},this._renderLoadingIcon())}_renderAssociationNotFound(){var e;return ue("calcite-notice",{icon:"information",key:"association-not-found",kind:"info",open:!0,scale:"s",width:"full"},ue("div",{slot:"message"},(e=this.messages)==null?void 0:e.noAssociations))}_renderAssociationType(e){const{viewModel:i}=this,r=this._getAssociationTypeTitle(e);return ue("calcite-list-item",{description:Iv(e.description),key:`association-type-${e.type}`,label:Iv(r),value:e.type,onCalciteListItemSelect:()=>this.onSelectAssociationType({viewModel:i,listType:e,title:r})},ue("calcite-icon",{flipRtl:!0,icon:"chevron-right",scale:"s",slot:"content-end"}))}_renderAssociations(e){const{viewModel:i}=this;return i.source==="featureForm"||i.getFeatureCountForAssociationType(e.type)>0?this._renderAssociationType(e):void 0}_renderContent(){const{messages:e,viewModel:i}=this,{state:r,associationTypes:n}=i;return ue("div",{class:ZO.listContainer,key:"list-container"},r==="ready"?ue("div",null,ue("calcite-list",{displayMode:"flat",label:e==null?void 0:e.associationsList},n.map(s=>this._renderAssociations(s)))):null,this._renderStickyLoading())}_getAssociationTypeTitle(e){const{messages:i}=this;if(e.title)return e.title;switch(e.type){case"attachment":return i.associationsAttachments;case"connectivity":return i.associationsConnectivity;case"structure":return i.associationsStructure;case"content":return i.associationsContents;case"container":return i.associationsContainer}}_setupFeatureElementInfo(){var s;const{headingLevel:e,visibleElements:i}=this,r=i.description&&this.description,n=i.title&&this.title;(s=this._featureElementInfo)==null||s.set({description:r,title:n,headingLevel:e})}};d([f({constructOnly:!0})],Mo.prototype,"onSelectAssociationType",void 0),d([f()],Mo.prototype,"flowType",void 0),d([f()],Mo.prototype,"flowItems",void 0),d([f()],Mo.prototype,"parentFeatureViewModel",void 0),d([f()],Mo.prototype,"featureVisibleElements",void 0),d([f()],Mo.prototype,"description",null),d([f()],Mo.prototype,"headingLevel",void 0),d([f()],Mo.prototype,"title",null),d([f({type:pi})],Mo.prototype,"viewModel",void 0),d([f(),js("esri/widgets/Feature/t9n/Feature")],Mo.prototype,"messages",void 0),d([f(),js("esri/t9n/common")],Mo.prototype,"messagesCommon",void 0),d([f({type:T$,nonNullable:!0})],Mo.prototype,"visibleElements",void 0),Mo=d([V("esri.widgets.Feature.FeatureUtilityNetworkAssociations")],Mo);let Jst=class{constructor(e,i){this.preLayerQueryCallback=e,this.preRequestCallback=i,this.preLayerQueryCallback||(this.preLayerQueryCallback=r=>{}),this.preRequestCallback||(this.preLayerQueryCallback=r=>{})}};var l$;const kle=1,Ale="content-view-models",Ple="relationship-view-models",Xst="association-view-models",Ole={attachmentsContent:!0,chartAnimation:!0,customContent:!0,expressionContent:!0,fieldsContent:!0,mediaContent:!0,textContent:!0,relationshipContent:!0,utilityNetworkAssociationsContent:!0};var _w;let Vi=(_w=class extends __(et){constructor(e){super(e),this._error=null,this._graphicChangedTask=null,this._evaluateExpressionAttributesTask=null,this._associationVMAbortController=null,this._expressionAttributes=null,this._graphicExpressionAttributes=null,this.abilities={...Ole},this.content=null,this.contentViewModels=[],this.description=null,this.defaultPopupTemplateEnabled=!1,this.formattedAttributes=null,this.graphic=null,this.lastEditInfo=null,this.location=null,this.relatedInfos=new Map,this.title="",this.view=null,this._graphicChangedThrottled=FE(this._graphicChanged,()=>this.notifyChange("waitingForContent"),kle,this),this._isAllowedContentType=i=>{const{abilities:r}=this;return i.type==="attachments"&&!!r.attachmentsContent||i.type==="custom"&&!!r.customContent||i.type==="fields"&&!!r.fieldsContent||i.type==="media"&&!!r.mediaContent||i.type==="text"&&!!r.textContent||i.type==="expression"&&!!r.expressionContent||i.type==="relationship"&&!!r.relationshipContent||i.type==="utility-network-associations"&&!!r.utilityNetworkAssociationsContent},this._evaluateExpressionAttributesThrottled=FE(this._evaluateExpressionAttributes,()=>this.notifyChange("waitingForContent"),kle,this),this.addHandles([be(()=>[this.graphic,this._effectivePopupTemplate,this.abilities,this.timeZone],()=>this._graphicChangedThrottled(),Ft),cn(()=>{var n,s,a,o,l,c,h;if(!((n=this._graphicChangedTask)!=null&&n.finished)||this._graphicChangedTask.value==null)return null;const i=this._graphicChangedTask.value,r=(s=i==null?void 0:i.expressionInfos)==null?void 0:s.dependencies;return[i,r!=null&&r.has("view-scale")?(a=this.view)==null?void 0:a.scale:null,r!=null&&r.has("view-time-extent")?(l=(o=this.view)==null?void 0:o.timeExtent)==null?void 0:l.start:null,r!=null&&r.has("view-time-extent")?(h=(c=this.view)==null?void 0:c.timeExtent)==null?void 0:h.end:null]},([i])=>this._evaluateExpressionAttributesThrottled(i))])}initialize(){this.addHandles([this._graphicChangedThrottled,this._evaluateExpressionAttributesThrottled])}destroy(){this._clear(),this._graphicChangedTask=Fa(this._graphicChangedTask),this._evaluateExpressionAttributesTask=Fa(this._evaluateExpressionAttributesTask),this._error=null,this.graphic=null,this._destroyContentViewModels(),this.relatedInfos.clear()}get _effectivePopupTemplate(){return this.graphic!=null?this.graphic.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled):null}get _fieldInfoMap(){return h$e(GH(this._effectivePopupTemplate),this._sourceLayer)}get _sourceLayer(){return vJ(this.graphic)}castAbilities(e){return{...Ole,...e}}get isFeatureFromTable(){var e;return((e=this._sourceLayer)==null?void 0:e.isTable)||!1}get state(){return this.graphic?this._error?"error":this.waitingForContent?"loading":"ready":"disabled"}get spatialReference(){var e;return((e=this.view)==null?void 0:e.spatialReference)??null}set spatialReference(e){this._override("spatialReference",e)}get timeZone(){var e;return((e=this.view)==null?void 0:e.timeZone)??Rl}set timeZone(e){this._overrideIfSome("timeZone",e)}get map(){var e;return((e=this.view)==null?void 0:e.map)||null}set map(e){this._override("map",e)}get waitingForContent(){const{_graphicChangedThrottled:e,_evaluateExpressionAttributesThrottled:i,_graphicChangedTask:r,_evaluateExpressionAttributesTask:n,_associationVMAbortController:s}=this;return e.hasPendingUpdates()||i.hasPendingUpdates()||r!=null&&!r.finished||n!=null&&!n.finished||!!s}setActiveMedia(e,i){const r=this.contentViewModels[e];r instanceof qr&&r.setActiveMedia(i)}nextMedia(e){const i=this.contentViewModels[e];i instanceof qr&&i.next()}previousMedia(e){const i=this.contentViewModels[e];i instanceof qr&&i.previous()}async updateGeometry(){var o;const{graphic:e,spatialReference:i,_sourceLayer:r}=this;await(r==null?void 0:r.load());const n=r==null?void 0:r.objectIdField;if(!n||!e||!r)return;const s=(o=e==null?void 0:e.attributes)==null?void 0:o[n];if(s==null)return;const a=[s];if(!e.geometry){const l=await $J({layer:r,graphic:e,outFields:[],objectIds:a,returnGeometry:!0,spatialReference:i}),c=l==null?void 0:l.geometry;c&&(e.geometry=c)}}_clear(){this._set("title",""),this._set("content",null),this._set("formattedAttributes",null)}_graphicChanged(){this._evaluateExpressionAttributesTask=Fa(this._evaluateExpressionAttributesTask),this._graphicChangedTask=Fa(this._graphicChangedTask),this._graphicChangedTask=Zm(async e=>{this._error=null,this._clear();const{graphic:i}=this;try{if(!i)return null;const{_sourceLayer:r,_effectivePopupTemplate:n}=this,s=this.spatialReference;await m$e({graphic:i,popupTemplate:n,layer:r,spatialReference:s},{signal:e});const[{value:a},{value:o}]=await Gm([this._getContent(),this._getTitle()]),[,{value:l}]=await Gm([this._checkForRelatedFeatures({signal:e}),Gst(n==null?void 0:n.expressionInfos,i)]);return{expressionInfos:l,content:a,title:o}}catch(r){throw In(r)||(this._error=r,Ie.getLogger(this).error("error","The popupTemplate could not be displayed for this feature.",{error:r,graphic:i,popupTemplate:this._effectivePopupTemplate})),r}})}_compileContentElement(e,i){return e.type==="attachments"?this._compileAttachments(e,i):e.type==="custom"?this._compileCustom(e,i):e.type==="fields"?this._compileFields(e,i):e.type==="media"?this._compileMedia(e,i):e.type==="text"?this._compileText(e,i):e.type==="expression"?this._compileExpression(e,i):e.type==="relationship"?this._compileRelationship(e,i):e.type==="utility-network-associations"?this._compileUtilityNetworkAssociation(e,i):void 0}_compileContent(e){if(this._destroyContentViewModels(),this.graphic)return Array.isArray(e)?e.filter(this._isAllowedContentType).map((i,r)=>this._compileContentElement(i,r)).filter(ln):typeof e=="string"?this._compileText(new xu({text:e}),0).text:e}_destroyContentViewModels(){this.removeHandles(Ple),this.removeHandles(Ale),this.contentViewModels.forEach(e=>e&&!e.destroyed&&e.destroy()),this._set("contentViewModels",[])}_matchesFeature(e,i){var s;const r=(s=e==null?void 0:e.graphic)==null?void 0:s.getObjectId(),n=i==null?void 0:i.getObjectId();return r!=null&&n!=null&&r===n}_setRelatedFeaturesViewModels({relatedFeatureViewModels:e,relatedFeatures:i,map:r}){const{view:n,spatialReference:s,timeZone:a}=this;i==null||i.filter(Boolean).forEach(o=>{e.some(l=>this._matchesFeature(l,o))||e.add(new l$({abilities:{relationshipContent:!1},map:r,view:n,spatialReference:s,timeZone:a,graphic:o}))}),e.forEach(o=>{(i==null?void 0:i.find(c=>this._matchesFeature(o,c)))||e.remove(o)})}_setExpressionContentVM(e,i){const r=this.formattedAttributes,{contentElement:n,contentElementViewModel:s}=e,a=n==null?void 0:n.type;s&&a&&(a==="fields"&&(this._createFieldsFormattedAttributes({contentElement:n,contentElementIndex:i,formattedAttributes:r}),s.set(this._createFieldsVMParams(n,i))),a==="media"&&(this._createMediaFormattedAttributes({contentElement:n,contentElementIndex:i,formattedAttributes:r}),s.set(this._createMediaVMParams(n,i))),a==="text"&&s.set(this._createTextVMParams(n)))}_compileRelationship(e,i){const{displayCount:r,orderByFields:n,relationshipId:s,title:a,description:o}=e,{_sourceLayer:l,graphic:c,map:h}=this;if(!tI(l))return;const m=new yi({displayCount:r,graphic:c,orderByFields:n,relationshipId:s,layer:l,map:h,...this._compileTitleAndDesc({title:a,description:o})});return this.contentViewModels[i]=m,this.addHandles(ca(()=>m.relatedFeatures,"change",()=>this._setRelatedFeaturesViewModels(m)),Ple),e}_matchesGlobalFeature(e,i){return e.association.equals(i.association)}_setUpUtilityNetworkAssociationsViewModels(e,i,r){const{view:n,spatialReference:s,timeZone:a}=this;e.forEach((o,l)=>{const c=i.get(l);c?o.forEach(h=>{c.find(m=>this._matchesGlobalFeature(h,m))||(o.remove(h),o.length===0&&e.delete(l))}):(o.removeAll(),e.delete(l))}),i.forEach((o,l)=>{const c=e.get(l)||new Ue;o==null||o.filter(Boolean).forEach((h,m)=>{if(!c.some(g=>this._matchesGlobalFeature(g,h))){const{association:g,feature:v,terminalName:b,title:x}=h;c.add({title:x,association:g,featureViewModel:new l$({abilities:{utilityNetworkAssociationsContent:!1},map:r,view:n,spatialReference:s,timeZone:a,graphic:v}),terminalName:b},m)}}),e.set(l,c)})}_compileUtilityNetworkAssociation(e,i){const{displayCount:r,title:n,description:s,associationTypes:a}=e,{_sourceLayer:o,graphic:l,map:c}=this;if(!c$e(o))return;const h=new pi({graphic:l,displayCount:r,associationTypes:a,layer:o,map:c,...this._compileTitleAndDesc({title:n,description:s})});return this.contentViewModels[i]=h,this.addHandles([be(()=>h.associationFeatures.values(),()=>this._setUpUtilityNetworkAssociationsViewModels(h.associationViewModels,h.associationFeatures,h.map))],Xst),e}_compileExpression(e,i){const{expressionInfo:r}=e,{graphic:n,map:s,spatialReference:a,view:o,location:l}=this,c=new ka({expressionInfo:r,graphic:n,interceptor:l$.interceptor,map:s,spatialReference:a,view:o,location:l});return this.contentViewModels[i]=c,this.addHandles(be(()=>c.contentElementViewModel,()=>this._setExpressionContentVM(c,i),Ft),Ale),e}_compileAttachments(e,i){const{graphic:r}=this,{description:n,title:s,orderByFields:a,attachmentKeywords:o,attachmentTypes:l}=e;return this.contentViewModels[i]=new q0({attachmentKeywords:o,attachmentTypes:l,graphic:r,orderByFields:a,...this._compileTitleAndDesc({title:s,description:n})}),e}_compileCustom(e,i){const{graphic:r}=this,{creator:n,destroyer:s}=e;return this.contentViewModels[i]=new _d({graphic:r,creator:n,destroyer:s}),e}_compileTitleAndDesc({title:e,description:i}){const{_fieldInfoMap:r,_sourceLayer:n,graphic:s,formattedAttributes:a}=this,o=s==null?void 0:s.attributes,l=this._expressionAttributes,c=a.global;return{title:lv({attributes:o,fieldInfoMap:r,globalAttributes:c,expressionAttributes:l,layer:n,text:e}),description:lv({attributes:o,fieldInfoMap:r,globalAttributes:c,expressionAttributes:l,layer:n,text:i})}}_createFieldsVMParams(e,i){const r=this._effectivePopupTemplate,n=this.formattedAttributes,s={...n==null?void 0:n.global,...n==null?void 0:n.content[i]},a=!!(e!=null&&e.fieldInfos),o=(e==null?void 0:e.fieldInfos)||(r==null?void 0:r.fieldInfos),l=o==null?void 0:o.filter(({fieldName:g})=>!!g&&(tA(g)||Pd(g)||s.hasOwnProperty(g))),c=r==null?void 0:r.expressionInfos,{description:h,title:m}=e;return{attributes:s,expressionInfos:c,fieldInfos:l,isContentFieldInfos:a,graphic:this.graphic,layer:this._sourceLayer,...this._compileTitleAndDesc({title:m,description:h})}}_compileFields(e,i){const r=e.clone(),n=new ko(this._createFieldsVMParams(e,i));return this.contentViewModels[i]=n,r.fieldInfos=n.formattedFieldInfos.slice(),r}_createMediaVMParams(e,i){const{abilities:r,graphic:n,_fieldInfoMap:s,_effectivePopupTemplate:a,relatedInfos:o,_sourceLayer:l,_expressionAttributes:c}=this,h=this.formattedAttributes,m=(n==null?void 0:n.attributes)??{},{description:g,mediaInfos:v,title:b}=e;return{abilities:{chartAnimation:r.chartAnimation},activeMediaInfoIndex:e.activeMediaInfoIndex||0,attributes:m,graphic:n,layer:l,fieldInfoMap:s,formattedAttributes:{...h==null?void 0:h.global,...h==null?void 0:h.content[i]},expressionAttributes:c,mediaInfos:v,popupTemplate:a,relatedInfos:o,...this._compileTitleAndDesc({title:b,description:g})}}_compileMedia(e,i){const r=e.clone(),n=new qr(this._createMediaVMParams(e,i));return r.mediaInfos=n.formattedMediaInfos.slice(),this.contentViewModels[i]=n,r}_createTextVMParams(e){var a;const{graphic:i,_fieldInfoMap:r,_sourceLayer:n,_expressionAttributes:s}=this;if(e&&e.text){const o=(i==null?void 0:i.attributes)??{},l=((a=this.formattedAttributes)==null?void 0:a.global)??{};e.text=lv({attributes:o,fieldInfoMap:r,globalAttributes:l,expressionAttributes:s,layer:n,text:e.text})}return{graphic:i,creator:e.text}}_compileText(e,i){const r=e.clone();return this.contentViewModels[i]=new _d(this._createTextVMParams(r)),r}_compileLastEditInfo(){const{_effectivePopupTemplate:e,_sourceLayer:i,graphic:r,timeZone:n}=this;if(!e)return;const{lastEditInfoEnabled:s}=e,a=i==null?void 0:i.editFieldsInfo;return s&&a?d$e(a,r==null?void 0:r.attributes,n,i):void 0}_compileTitle(e){var l;const{_fieldInfoMap:i,_sourceLayer:r,graphic:n,_expressionAttributes:s}=this,a=(n==null?void 0:n.attributes)??{},o=((l=this.formattedAttributes)==null?void 0:l.global)??{};return lv({attributes:a,fieldInfoMap:i,globalAttributes:o,expressionAttributes:s,layer:r,text:e})}async _getTitle(){const{_effectivePopupTemplate:e,graphic:i}=this;return i?RE({type:"title",value:e==null?void 0:e.title,event:{graphic:i}}):null}async _getContent(){const{_effectivePopupTemplate:e,graphic:i}=this;return i?RE({type:"content",value:e==null?void 0:e.content,event:{graphic:i}}):null}_evaluateExpressionAttributes({title:e,content:i,expressionInfos:r}){this._evaluateExpressionAttributesTask=Fa(this._evaluateExpressionAttributesTask),this._evaluateExpressionAttributesTask=Zm(async n=>{const{graphic:s,map:a,view:o,spatialReference:l,location:c}=this;try{if(!s)return;let h;if(r!=null){const m=[];for(const[g,v]of r.expressions.entries())v!=null?m.push(v.evaluate({graphic:s,interceptor:l$.interceptor,location:c,map:a,options:{signal:n},spatialReference:l,view:o}).then(b=>[g,typeof b=="string"?Rst(b):b]).catch(()=>[g,void 0])):m.push(Promise.resolve([g,void 0]));h=Object.fromEntries(await Promise.all(m)),lr(n)}this._expressionAttributes=h,this._graphicExpressionAttributes={...s.attributes,...h},this._set("formattedAttributes",this._createFormattedAttributes(i)),this._set("title",this._compileTitle(e)),this._set("lastEditInfo",this._compileLastEditInfo()||null),this._set("content",this._compileContent(i)||null)}catch(h){In(h)||(this._error=h,Ie.getLogger(this).error("error","The popupTemplate could not be displayed for this feature.",{error:h,graphic:s,popupTemplate:this._effectivePopupTemplate}))}})}_createMediaFormattedAttributes({contentElement:e,contentElementIndex:i,formattedAttributes:r}){const{_effectivePopupTemplate:n,graphic:s,relatedInfos:a,_sourceLayer:o,_fieldInfoMap:l,_graphicExpressionAttributes:c,timeZone:h}=this;r.content[i]=lF({attributes:{...c,...e.attributes},fieldInfoMap:l,fieldInfos:n==null?void 0:n.fieldInfos,graphic:s,layer:o,relatedInfos:a,timeZone:h})}_createFieldsFormattedAttributes({contentElement:e,contentElementIndex:i,formattedAttributes:r}){if(e.fieldInfos){const{graphic:n,relatedInfos:s,_sourceLayer:a,_fieldInfoMap:o,_graphicExpressionAttributes:l,timeZone:c}=this;r.content[i]=lF({attributes:{...l,...e.attributes},fieldInfoMap:o,fieldInfos:e.fieldInfos,graphic:n,isContentFieldInfos:!0,layer:a,relatedInfos:s,timeZone:c})}}_createFormattedAttributes(e){const{_effectivePopupTemplate:i,graphic:r,relatedInfos:n,_sourceLayer:s,_fieldInfoMap:a,_graphicExpressionAttributes:o,timeZone:l}=this,c=i==null?void 0:i.fieldInfos,h={global:lF({attributes:o,fieldInfoMap:a,fieldInfos:c,graphic:r,layer:s,relatedInfos:n,timeZone:l}),content:[]};return Array.isArray(e)&&e.forEach((m,g)=>{m.type==="fields"&&this._createFieldsFormattedAttributes({contentElement:m,contentElementIndex:g,formattedAttributes:h}),m.type==="media"&&this._createMediaFormattedAttributes({contentElement:m,contentElementIndex:g,formattedAttributes:h})}),h}_checkForRelatedFeatures(e){const{graphic:i,_effectivePopupTemplate:r}=this;return this._queryRelatedInfos(i,GH(r),e)}async _queryRelatedInfos(e,i,r){const{relatedInfos:n,_sourceLayer:s}=this;n.clear();const a=(s==null?void 0:s.associatedLayer)!=null?await(s==null?void 0:s.associatedLayer.load(r)):s;if(!a||!e)return;const o=i.filter(h=>!!h.fieldName&&Pd(h.fieldName));if(!(o!=null&&o.length))return;i.forEach(h=>this._configureRelatedInfo(h,a));const l=await wst({relatedInfos:n,layer:a},r);Object.keys(l).forEach(h=>{var v;const m=n.get(h.toString()),g=(v=l[h])==null?void 0:v.value;m&&g&&(m.layerInfo=g.data)});const c=await _st({graphic:e,relatedInfos:n,layer:a},r);Object.keys(c).forEach(h=>{var m;pst((m=c[h])==null?void 0:m.value,n.get(h.toString()))})}_configureRelatedInfo(e,i){const{relatedInfos:r}=this,n=pF(e.fieldName||"");if(!n)return;const{layerId:s,fieldName:a}=n;if(!s)return;const o=r.get(s.toString())||hst(s,i);o&&(xst({relatedInfo:o,fieldName:a,fieldInfo:e}),this.relatedInfos.set(s,o))}},l$=_w,_w.interceptor=new Jst(y$e,v$e),_w);d([f()],Vi.prototype,"_error",void 0),d([f()],Vi.prototype,"_graphicChangedTask",void 0),d([f()],Vi.prototype,"_evaluateExpressionAttributesTask",void 0),d([f()],Vi.prototype,"_associationVMAbortController",void 0),d([f({readOnly:!0})],Vi.prototype,"_effectivePopupTemplate",null),d([f({readOnly:!0})],Vi.prototype,"_fieldInfoMap",null),d([f({readOnly:!0})],Vi.prototype,"_sourceLayer",null),d([f()],Vi.prototype,"abilities",void 0),d([_i("abilities")],Vi.prototype,"castAbilities",null),d([f({readOnly:!0})],Vi.prototype,"content",void 0),d([f({readOnly:!0})],Vi.prototype,"contentViewModels",void 0),d([f()],Vi.prototype,"description",void 0),d([f({type:Boolean})],Vi.prototype,"defaultPopupTemplateEnabled",void 0),d([f({readOnly:!0})],Vi.prototype,"isFeatureFromTable",null),d([f({readOnly:!0})],Vi.prototype,"state",null),d([f({readOnly:!0})],Vi.prototype,"formattedAttributes",void 0),d([f({type:sr})],Vi.prototype,"graphic",void 0),d([f({readOnly:!0})],Vi.prototype,"lastEditInfo",void 0),d([f({type:St})],Vi.prototype,"location",void 0),d([f({readOnly:!0})],Vi.prototype,"relatedInfos",void 0),d([f({type:tt})],Vi.prototype,"spatialReference",null),d([f()],Vi.prototype,"timeZone",null),d([f({readOnly:!0})],Vi.prototype,"title",void 0),d([f()],Vi.prototype,"map",null),d([f({readOnly:!0})],Vi.prototype,"waitingForContent",null),d([f()],Vi.prototype,"view",void 0),Vi=l$=d([V("esri.widgets.Feature.FeatureViewModel")],Vi);const dh="esri-feature",bn={base:dh,container:`${dh}__size-container`,title:`${dh}__title`,main:`${dh}__main-container`,contentNode:`${dh}__content-node`,contentNodeText:`${dh}__content-node--text`,contentElement:`${dh}__content-element`,text:`${dh}__text`,lastEditedInfo:`${dh}__last-edited-info`,loadingSpinnerContainer:`${dh}__loading-container`},X$e=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.renderNodeContent=r=>_$e(r)&&!r.destroyed?ue("div",{class:bn.contentNode,key:r},r.render()):r instanceof HTMLElement?ue("div",{afterCreate:this._attachToNode,bind:r,class:bn.contentNode,key:r}):Srt(r)?ue("div",{afterCreate:this._attachToNode,bind:r.domNode,class:bn.contentNode,key:r}):null}_attachToNode(r){const n=this;r.appendChild(n)}};return i=d([V("esri.widgets.Feature.support.FeatureContentMixin")],i),i},Lle={title:!0,content:!0,lastEditedInfo:!0};let yn=class extends X$e(da){constructor(e,i){super(e,i),this._contentWidgets=[],this.flowType="feature",this.flowItems=null,this.headingLevel=2,this.messages=null,this.messagesCommon=null,this.visibleElements={...Lle},this.viewModel=new Vi}initialize(){this.addHandles(be(()=>{var e;return(e=this.viewModel)==null?void 0:e.contentViewModels},()=>this._setupContentWidgets(),Ft))}loadDependencies(){return Iu({notice:()=>de(()=>Promise.resolve().then(()=>zX),void 0),loader:()=>de(()=>Promise.resolve().then(()=>rA),void 0)})}destroy(){this._destroyContentWidgets()}get graphic(){return this.viewModel.graphic}set graphic(e){this.viewModel.graphic=e}get defaultPopupTemplateEnabled(){return this.viewModel.defaultPopupTemplateEnabled}set defaultPopupTemplateEnabled(e){this.viewModel.defaultPopupTemplateEnabled=e}get isTable(){return this.viewModel.isFeatureFromTable}get icon(){return"polygon"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get location(){return this.viewModel.location}set location(e){this.viewModel.location=e}get spatialReference(){return this.viewModel.spatialReference}set spatialReference(e){this.viewModel.spatialReference=e}get timeZone(){return this.viewModel.timeZone}set timeZone(e){this.viewModel.timeZone=e}get title(){return this.viewModel.title}castVisibleElements(e){return{...Lle,...e}}get map(){return this.viewModel.map}set map(e){this.viewModel.map=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}setActiveMedia(e,i){return this.viewModel.setActiveMedia(e,i)}nextMedia(e){return this.viewModel.nextMedia(e)}previousMedia(e){return this.viewModel.previousMedia(e)}render(){const{state:e}=this.viewModel,i=ue("div",{class:bn.container,key:"container"},this._renderTitle(),e==="error"?this._renderError():e==="loading"?this._renderLoading():this._renderContentContainer());return ue("div",{class:this.classes(bn.base,Ht.widget)},i)}_renderError(){const{messagesCommon:e,messages:i,visibleElements:r}=this;return ue("calcite-notice",{icon:"exclamation-mark-circle",kind:"danger",open:!0,scale:"s"},r.title?ue("div",{key:"error-title",slot:"title"},e.errorMessage):null,ue("div",{key:"error-message",slot:"message"},i.loadingError))}_renderLoading(){return ue("div",{class:bn.loadingSpinnerContainer,key:"loading-container"},ue("calcite-loader",{inline:!0,label:""}))}_renderContentContainer(){const{visibleElements:e}=this;return e.content?ue("div",{class:bn.main},[this._renderContent(),this._renderLastEditInfo()]):null}_renderTitle(){const{visibleElements:e,title:i}=this;return e.title?ue(IJ,{class:bn.title,innerHTML:i,level:this.headingLevel}):null}_renderContent(){const e=this.viewModel.content,i="content";if(!e)return null;if(Array.isArray(e))return e.length?ue("div",{class:bn.contentNode,key:`${i}-content-elements`},e.map(this._renderContentElement,this)):null;if(typeof e=="string"){const r=this._contentWidgets[0];return!r||r.destroyed?null:ue("div",{class:this.classes(bn.contentNode,bn.contentNodeText),key:`${i}-content`},r.render())}return this.renderNodeContent(e)}_renderContentElement(e,i){var n;const{visibleElements:r}=this;if(typeof r.content!="boolean"&&!((n=r.content)!=null&&n[e.type]))return null;switch(e.type){case"attachments":return this._renderAttachments(i);case"custom":return this._renderCustom(e,i);case"fields":return this._renderFields(i);case"media":return this._renderMedia(i);case"text":return this._renderText(e,i);case"expression":return this._renderExpression(i);case"relationship":return this._renderRelationship(i);case"utility-network-associations":return this._renderAssociation(i);default:return null}}_renderAttachments(e){const i=this._contentWidgets[e];if(!i||i.destroyed)return null;const{state:r,attachmentInfos:n}=i.viewModel;return r==="loading"||n.length>0?ue("div",{class:this.classes(bn.contentElement),key:this._buildKey("attachments-element",e)},i.render()):null}_renderRelationship(e){const i=this._contentWidgets[e];return i&&!i.destroyed&&this.flowItems?ue("div",{class:bn.contentElement,key:this._buildKey("relationship-element",e)},i.render()):null}_renderAssociation(e){const i=this._contentWidgets[e];return i&&!i.destroyed&&this.flowItems?ue("div",{class:bn.contentElement,key:this._buildKey("utility-network-association-element",e)},i.render()):null}_renderExpression(e){const i=this._contentWidgets[e];return i&&!i.destroyed&&i.viewModel.contentElement?ue("div",{class:bn.contentElement,key:this._buildKey("expression-element",e)},i.render()):null}_renderCustom(e,i){const{creator:r}=e,n=this._contentWidgets[i];return!n||n.destroyed?null:r?ue("div",{class:bn.contentElement,key:this._buildKey("custom-element",i)},n.render()):null}_renderFields(e){const i=this._contentWidgets[e];return!i||i.destroyed?null:ue("div",{class:bn.contentElement,key:this._buildKey("fields-element",e)},i.render())}_renderMedia(e){const i=this._contentWidgets[e];return!i||i.destroyed?null:ue("div",{class:bn.contentElement,key:this._buildKey("media-element",e)},i.render())}_renderLastEditInfo(){const{visibleElements:e,messages:i}=this,{lastEditInfo:r}=this.viewModel;if(!r||!e.lastEditedInfo)return null;const{date:n,user:s}=r,a=r.type==="edit"?s?i.lastEditedByUser:i.lastEdited:s?i.lastCreatedByUser:i.lastCreated,o=Sr(a,{date:n,user:s});return ue("div",{class:this.classes(bn.lastEditedInfo,bn.contentElement),key:"edit-info-element"},o)}_renderText(e,i){const r=e.text,n=this._contentWidgets[i];return!n||n.destroyed?null:r?ue("div",{class:this.classes(bn.contentElement,bn.text),key:this._buildKey("text-element",i)},n.render()):null}_buildKey(e,...i){var r,n;return`${e}__${((n=(r=this.viewModel)==null?void 0:r.graphic)==null?void 0:n.uid)||"0"}-${i.join("-")}`}_destroyContentWidget(e){e&&(e.viewModel=null,!e.destroyed&&e.destroy())}_destroyContentWidgets(){this._contentWidgets.forEach(e=>this._destroyContentWidget(e)),this._contentWidgets=[]}_setupContentWidgets(){this._destroyContentWidgets();const{headingLevel:e,visibleElements:i,flowItems:r,viewModel:n}=this,s=n==null?void 0:n.content,{contentViewModels:a}=n;if(Array.isArray(s))s.forEach((o,l)=>{if(o.type==="attachments"&&(this._contentWidgets[l]=new kh({displayType:o.displayType,headingLevel:i.title&&e<6?e+1:e,viewModel:a[l]})),o.type==="fields"&&(this._contentWidgets[l]=new iu({viewModel:a[l]})),o.type==="media"&&(this._contentWidgets[l]=new Xa({viewModel:a[l]})),o.type==="text"&&(this._contentWidgets[l]=new Am({viewModel:a[l]})),o.type==="custom"&&(this._contentWidgets[l]=new Am({viewModel:a[l]})),o.type==="expression"&&(this._contentWidgets[l]=new mF({viewModel:a[l]})),o.type==="relationship"){const c=new ta({flowItems:r,featureVisibleElements:i,viewModel:a[l]});this._contentWidgets[l]=c}if(o.type==="utility-network-associations"){const c=async m=>{const{viewModel:g,listType:v,title:b}=m;if(!r)return;g.activeAssociationType=v;const{default:x}=await de(()=>import("./FeatureUtilityNetworkAssociationList-9CXxgOQD.js"),[]),$=new x({viewModel:g,parentFeatureViewModel:n,listType:v,title:b,featureVisibleElements:i,description:n.title,flowItems:r});r.push($)},h=new Mo({flowItems:r,onSelectAssociationType:c,parentFeatureViewModel:n,featureVisibleElements:i,viewModel:a[l]});this._contentWidgets[l]=h}},this);else{const o=a[0];o&&!o.destroyed&&(this._contentWidgets[0]=new Am({viewModel:o}))}this.scheduleRender()}};d([f()],yn.prototype,"flowType",void 0),d([f()],yn.prototype,"graphic",null),d([f()],yn.prototype,"defaultPopupTemplateEnabled",null),d([f()],yn.prototype,"flowItems",void 0),d([f()],yn.prototype,"headingLevel",void 0),d([f({readOnly:!0})],yn.prototype,"isTable",null),d([f()],yn.prototype,"icon",null),d([f()],yn.prototype,"label",null),d([f()],yn.prototype,"location",null),d([f(),js("esri/widgets/Feature/t9n/Feature")],yn.prototype,"messages",void 0),d([f(),js("esri/t9n/common")],yn.prototype,"messagesCommon",void 0),d([f()],yn.prototype,"spatialReference",null),d([f()],yn.prototype,"timeZone",null),d([f({readOnly:!0})],yn.prototype,"title",null),d([f()],yn.prototype,"visibleElements",void 0),d([_i("visibleElements")],yn.prototype,"castVisibleElements",null),d([f()],yn.prototype,"map",null),d([f()],yn.prototype,"view",null),d([f({type:Vi})],yn.prototype,"viewModel",void 0),yn=d([V("esri.widgets.Feature")],yn);const Qst=Object.freeze(Object.defineProperty({__proto__:null,get default(){return yn}},Symbol.toStringTag,{value:"Module"}));let jy=class extends VT{constructor(e){super(e),this.location=null,this.screenLocationEnabled=!1,this.view=null,this.addHandles([cn(()=>{const i=this.screenLocationEnabled?this.view:null;return i?[i.size,i.type==="3d"?i.camera:i.viewpoint]:null},()=>this.notifyChange("screenLocation")),be(()=>this.screenLocation,(i,r)=>{i!=null&&r!=null&&this.emit("view-change")})])}destroy(){this.view=null}get screenLocation(){const{location:e,view:i,screenLocationEnabled:r}=this,n=i==null?void 0:i.spatialReference,s=n?Wye(e,n).geometry:null;return r&&s&&(i!=null&&i.ready)?i.toScreen(s):null}};d([f()],jy.prototype,"location",void 0),d([f()],jy.prototype,"screenLocation",null),d([f()],jy.prototype,"screenLocationEnabled",void 0),d([f()],jy.prototype,"view",void 0),jy=d([V("esri.widgets.support.AnchorElementViewModel")],jy);let D2=class extends jy{constructor(e){super(e),this.visible=!1}};d([f()],D2.prototype,"visible",void 0),D2=d([V("esri.widgets.Spinner.SpinnerViewModel")],D2);const xU="esri-spinner",$U={base:xU,spinnerStart:`${xU}--start`,spinnerFinish:`${xU}--finish`};let b0=class extends da{constructor(e,i){super(e,i),this._animationDelay=500,this._animationPromise=null,this.viewModel=new D2}initialize(){this.addHandles(be(()=>this.visible,e=>this._visibleChange(e)))}destroy(){this._animationPromise=null}get location(){return this.viewModel.location}set location(e){this.viewModel.location=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}get visible(){return this.viewModel.visible}set visible(e){this.viewModel.visible=e}show(e){const{location:i,promise:r}=e??{};i&&(this.viewModel.location=i),this.visible=!0;const n=()=>this.hide();r==null||r.catch(()=>{}).then(n)}hide(){this.visible=!1}render(){const{visible:e}=this,{screenLocation:i}=this.viewModel,r=!!i,n=e&&r,s=!e&&r,a={[$U.spinnerStart]:n,[$U.spinnerFinish]:s},o=this._getPositionStyles();return ue("div",{class:this.classes($U.base,a),styles:o})}_visibleChange(e){if(e)return void(this.viewModel.screenLocationEnabled=!0);const i=Ck(this._animationDelay);this._animationPromise=i,i.catch(()=>{}).then(()=>{this._animationPromise===i&&(this.viewModel.screenLocationEnabled=!1,this._animationPromise=null)})}_getPositionStyles(){const{screenLocation:e,view:i}=this.viewModel;if(i==null||e==null)return{};const{padding:r}=i;return{left:e.x-r.left+"px",top:e.y-r.top+"px"}}};d([f()],b0.prototype,"location",null),d([f()],b0.prototype,"view",null),d([f({type:D2})],b0.prototype,"viewModel",void 0),d([f()],b0.prototype,"visible",null),b0=d([V("esri.widgets.Spinner")],b0);const xa="esri-features",ss={icon:`${xa}__icon`,actionImage:`${xa}__action-image`,base:xa,container:`${xa}__container`,contentContainer:`${xa}__content-container`,contentFeature:`${xa}__content-feature`,flowItemCollapsed:`${xa}__flow-item--collapsed`,header:`${xa}__header`,footer:`${xa}__footer`,featureMenuObserver:`${xa}__feature-menu-observer`,actionExit:`${xa}__action--exit`,loader:`${xa}__loader`,featuresHeading:`${xa}__heading`,paginationText:`${xa}__pagination-text`,paginationActionBar:`${xa}__pagination-action-bar`,paginationMenuButton:`${xa}__pagination-menu-button`,paginationPrevious:`${xa}__pagination-previous`},dw=Ue.ofType({key:"type",defaultKeyValue:"button",base:i5,typeMap:{button:og,toggle:r5}}),cv=new og({icon:"magnifying-glass-plus",id:"zoom-to-feature",title:"{messages.zoom}",className:km.zoomInMagnifyingGlass}),Fle=new og({icon:"trash",id:"remove-selected-feature",title:"{messages.remove}",className:km.trash}),I$=new og({icon:"magnifying-glass-plus",id:"zoom-to-clustered-features",title:"{messages.zoom}",className:km.zoomInMagnifyingGlass}),Wy=new r5({icon:"table",id:"browse-clustered-features",title:"{messages.browseClusteredFeatures}",className:km.table,value:!1}),YO=cv.clone();let Cy=class extends da{constructor(e,i){super(e,i),this.flowItems=null,this.messages=null,this.closed=!1,this.closable=!0,this.selectLastFlowItem=!0,this._handleOpenFeature=r=>{this.emit("open-feature",{feature:r})},this._handleZoomToFeature=r=>{this.emit("zoom-to-feature",{featureWidget:r})}}loadDependencies(){return Promise.all([e$e(),Iu({action:()=>de(()=>Promise.resolve().then(()=>BJ),void 0),"action-bar":()=>de(()=>Promise.resolve().then(()=>gTe),void 0),"action-group":()=>de(()=>Promise.resolve().then(()=>mTe),void 0),"flow-item":()=>de(()=>Promise.resolve().then(()=>lMe),void 0)})])}render(){const{flowItems:e}=this,i=e==null?void 0:e.toArray();return ue(PWe,null,i==null?void 0:i.map((r,n)=>this._renderFlowItem(r,this.selectLastFlowItem&&n===i.length-1)))}_handleCloseClick(){this.emit("close")}_handleExitClick(){this.emit("exit")}_handleDrillInBackClick(){const{flowItems:e}=this,i=e==null?void 0:e.pop();i&&("activeCategory"in i.viewModel?(i.viewModel.activeCategory=null,e!=null&&e.length||(i.viewModel.showAllEnabled=!1)):"showAllEnabled"in i.viewModel&&(i.viewModel.showAllEnabled=!1),i&&(i.viewModel=null,i.destroy()))}_getExitMessage(e){switch(e.flowType){case"feature":case"feature-association":return"";case"feature-relationship":return this.messages.exitRelatedRecords;case"feature-utility-network-associations":case"feature-utility-network-association-type":return this.messages.exitAssociations}}_renderFlowItem(e,i){const{messages:r,closable:n,closed:s}=this,a="graphic"in e&&!e.isTable,o=e.flowType==="feature-association",l=this._getExitMessage(e),c=r.selectFeature;return ue("calcite-flow-item",{bind:this,closable:n,closed:s,description:Iv(this._getDrillInFlowItemDescription(e)??""),heading:Iv(e.title??""),key:`flow-item-${e.viewModel.uid}`,selected:i,onCalciteFlowItemBack:h=>{h.preventDefault(),this._handleDrillInBackClick()},onCalciteFlowItemClose:this._handleCloseClick},ue("calcite-action",{appearance:"transparent",bind:this,class:ss.actionExit,icon:"move-up",key:"exit-action",onclick:this._handleExitClick,slot:"header-actions-start",text:l,title:l}),a?ue("calcite-action",{appearance:"transparent",bind:this,icon:"zoom-to-object",key:"open-feature-action",onclick:()=>this._handleOpenFeature(e),slot:"header-actions-end",text:c,title:c}):null,o?ue("calcite-action-bar",{expandDisabled:!0,expanded:!0,key:"header-action-bar",scale:"s",slot:"action-bar"},ue("calcite-action-group",{overlayPositioning:"fixed",scale:"s"},t$e(YO,{key:`action-${YO.uid}`,title:this._getActionTitle(YO),text:this._getActionTitle(YO),textEnabled:!0,onclick:()=>this._handleZoomToFeature(e),bind:this}))):null,ue("div",{class:ss.container},e.render()))}_getActionTitle(e){const{messages:i}=this,r=e.title??"";return e.id==="zoom-to-feature"?Sr(r,{messages:i}):r}_getDrillInFlowItemDescription(e){switch(e.flowType){case"feature":case"feature-association":case"feature-utility-network-associations":return e.viewModel.description??"";case"feature-relationship":return e.allItemsDescription;case"feature-utility-network-association-type":return e.description??""}}};d([f()],Cy.prototype,"flowItems",void 0),d([f(),js("esri/widgets/Features/t9n/Features")],Cy.prototype,"messages",void 0),d([f()],Cy.prototype,"closed",void 0),d([f()],Cy.prototype,"closable",void 0),d([f()],Cy.prototype,"selectLastFlowItem",void 0),Cy=d([V("esri.widgets.Features.FeaturesDrillIn")],Cy);let Kst=class{constructor(e){this._observable=new p_,this._set=new Set(e)}get size(){return xt(this._observable),this._set.size}add(e){const i=this._set.size;return this._set.add(e),this._set.size!==i&&this._observable.notify(),this}clear(){this._set.size>0&&(this._set.clear(),this._observable.notify())}delete(e){const i=this._set.delete(e);return i&&this._observable.notify(),i}entries(){return xt(this._observable),this._set.entries()}forEach(e,i){xt(this._observable),this._set.forEach((r,n)=>e.call(i,r,n,this),i)}has(e){return xt(this._observable),this._set.has(e)}keys(){return xt(this._observable),this._set.keys()}values(){return xt(this._observable),this._set.values()}[Symbol.iterator](){return xt(this._observable),this._set[Symbol.iterator]()}[Symbol.dispose](){this._observable.destroy()}get[Symbol.toStringTag](){return this._set[Symbol.toStringTag]}};const eat="OBJECTID";function Q$e(t){return"r"in t&&"g"in t&&"b"in t}function K$e(t){return"h"in t&&"s"in t&&"v"in t}function eSe(t){return"l"in t&&"a"in t&&"b"in t}function tSe(t){return"l"in t&&"c"in t&&"h"in t}function tat(t){return"x"in t&&"y"in t&&"z"in t}const iat=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],rat=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function iSe(t,e){const i=[];let r,n;if(t[0].length!==e.length)throw new Error("dimensions do not match");const s=t.length,a=t[0].length;let o=0;for(r=0;r<s;r++){for(o=0,n=0;n<a;n++)o+=t[r][n]*e[n];i.push(o)}return i}function rSe(t){const e=[t.r/255,t.g/255,t.b/255].map(r=>r<=.04045?r/12.92:((r+.055)/1.055)**2.4),i=iSe(iat,e);return{x:100*i[0],y:100*i[1],z:100*i[2]}}function OJ(t){const e=iSe(rat,[t.x/100,t.y/100,t.z/100]).map(i=>{const r=i<=.0031308?12.92*i:1.055*i**.4166666666666667-.055;return Math.min(1,Math.max(r,0))});return{r:Math.round(255*e[0]),g:Math.round(255*e[1]),b:Math.round(255*e[2])}}function nSe(t){const e=[t.x/95.047,t.y/100,t.z/108.883].map(i=>i>.008856451679035631?i**.3333333333333333:7.787037037037035*i+.13793103448275862);return{l:116*e[1]-16,a:500*(e[0]-e[1]),b:200*(e[1]-e[2])}}function sSe(t){const e=t.l,i=[(e+16)/116+t.a/500,(e+16)/116,(e+16)/116-t.b/200].map(r=>r>6/29?r**3:3*(6/29)**2*(r-4/29));return{x:95.047*i[0],y:100*i[1],z:108.883*i[2]}}function nat(t){const e=t.l,i=t.a,r=t.b,n=Math.sqrt(i*i+r*r);let s=Math.atan2(r,i);return s=s>0?s:s+2*Math.PI,{l:e,c:n,h:s}}function sat(t){const e=t.l,i=t.c,r=t.h;return{l:e,a:i*Math.cos(r),b:i*Math.sin(r)}}function aat(t){return nSe(rSe(t))}function oat(t){return OJ(sSe(t))}function lat(t){return nat(nSe(rSe(t)))}function cat(t){return OJ(sSe(sat(t)))}function uat(t){const e=t.r,i=t.g,r=t.b,n=Math.max(e,i,r),s=n-Math.min(e,i,r);let a=n,o=s===0?0:n===e?(i-r)/s%6:n===i?(r-e)/s+2:(e-i)/s+4,l=s===0?0:s/a;return o<0&&(o+=6),o*=60,l*=100,a*=100/255,{h:o,s:l,v:a}}function dat(t){const e=(t.h+360)%360/60,i=t.s/100,r=t.v/100*255,n=r*i,s=n*(1-Math.abs(e%2-1));let a;switch(Math.floor(e)){case 0:a={r:n,g:s,b:0};break;case 1:a={r:s,g:n,b:0};break;case 2:a={r:0,g:n,b:s};break;case 3:a={r:0,g:s,b:n};break;case 4:a={r:s,g:0,b:n};break;case 5:case 6:a={r:n,g:0,b:s};break;default:a={r:0,g:0,b:0}}return a.r=Math.round(a.r+r-n),a.g=Math.round(a.g+r-n),a.b=Math.round(a.b+r-n),a}function I_(t){return Q$e(t)?t:tSe(t)?cat(t):eSe(t)?oat(t):tat(t)?OJ(t):K$e(t)?dat(t):t}function L5(t){return K$e(t)?t:uat(I_(t))}function hat(t){return eSe(t)?t:aat(I_(t))}function sPt(t){return tSe(t)?t:lat(I_(t))}function pat(t){let{r:e,g:i,b:r,a:n}=t;return n<1&&(e=Math.round(n*e+255*(1-n)),i=Math.round(n*i+255*(1-n)),r=Math.round(n*r+255*(1-n))),new Se({r:e,g:i,b:r})}function aSe(t,e){const{r:i,g:r,b:n}=e!=null&&e.ignoreAlpha?t:pat(t);return .2126*i+.7152*r+.0722*n}function aPt(t,e=225){return aSe(t,{ignoreAlpha:!0})>e?new Se([0,0,0,t.a]):new Se([255,255,255,t.a])}function oPt(t,e){const i=hat(t);i.l*=1-e;const r=I_(i),n=t.clone();return n.setColor(r),n.a=t.a,n}function lPt(t,e){const i=t.clone();return i.a*=e,i}function cPt(t,e){const i=L5(t);i.s*=e;const r=I_(i),n=t.clone();return n.setColor(r),n.a=t.a,n}function uPt(t){return Se.toUnitRGBA(t)}function dPt(t){return T_(t[0],t[1],t[2],t.length>3?t[3]:1)}function hPt(t,e){const i=Se.toUnitRGBA(t);return i[3]*=e,i}function pPt(t,e,i={}){if(t.length===0||e<=0)return[];if((t=t.map(r=>typeof r=="string"?new Se(r):r)).length===1||e===1){const r=[],n=t[0];for(let s=0;s<e;s++)r.push(n.clone());return r}if(i.shuffle&&(t=Whe(he(t),i.seed)),t.length>=e){const r=[],n=(t.length-1)/(e-1);for(let s=0;s<e;s++){const a=Math.round(s*n);r.push(t[a].clone())}return r}return fat(t,e,i)}function fat(t,e,i={}){const r=[],n=t.length-1,s=Math.ceil((e-t.length)/n);e:for(let a=0;a<n;a++){const o=t[a],l=t[a+1];for(let c=1;c<=s;c++){const h=c/(s+1);if(r.push(mat(o,l,h,i)),r.length+t.length===e)break e}}return[...t.map(a=>a.clone()),...Whe(r,i.seed??1)]}const SU=(t,e)=>{const i=Math.floor(10*e())-5;return Math.min(255,Math.max(0,t+i))};function mat(t,e,i,r={}){const n=t.r,s=t.g,a=t.b,o=e.r,l=e.g,c=e.b,h=Math.round(n+(o-n)*i),m=Math.round(s+(l-s)*i),g=Math.round(a+(c-a)*i);if(!r.offset)return new Se([h,m,g]);const v=SW(r.seed);return new Se([SU(h,v),SU(m,v),SU(g,v)])}let gat=0;function yat(){return gat++}let vat=0;function bat(){return vat++}let wat=0;function _at(){return wat++}const xat="http://www.w3.org/2000/svg",Rle=ve("android"),$at=ve("chrome")||Rle&&Rle>=4?"auto":"optimizeLegibility",Sat={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},Tat=/([A-DF-Za-df-z])|([-+]?\d*\.?\d+(?:[eE][-+]?\d+)?)/g;let on={},Yi={};const Iat=Math.PI;function uv(t,e){const i=t*(Iat/180);return Math.abs(e*Math.sin(i))+Math.abs(e*Math.cos(i))}function oSe(t){return t.map(e=>`${e.command} ${e.values.join(" ")}`).join(" ").trim()}function lSe(t,e,i,r,n){if(t){if(t.type==="circle")return ue("circle",{cx:t.cx,cy:t.cy,fill:e,"fill-rule":"evenodd",r:t.r,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-dashoffset":i.dashOffset,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width});if(t.type==="ellipse")return ue("ellipse",{cx:t.cx,cy:t.cy,fill:e,"fill-rule":"evenodd",rx:t.rx,ry:t.ry,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width});if(t.type==="rect")return ue("rect",{fill:e,"fill-rule":"evenodd",height:t.height,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width,width:t.width,x:t.x,y:t.y});if(t.type==="image")return ue("image",{alt:n||"image",height:t.height,href:t.src,preserveAspectRatio:"none",width:t.width,x:t.x,y:t.y});if(t.type==="path"){const s=typeof t.path!="string"?oSe(t.path):t.path;return ue("path",{d:s,fill:e,"fill-rule":"evenodd",stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width})}if(t.type==="text")return Ik(r),ue("text",{"dominant-baseline":r.dominantBaseline,fill:e,"fill-rule":"evenodd","font-family":r.font.family,"font-size":r.font.size,"font-style":r.font.style,"font-variant":r.font.variant,"font-weight":r.font.weight,kerning:r.kerning,rotate:r.rotate,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width,"text-anchor":r.align,"text-decoration":r.decoration,"text-rendering":$at,x:t.x,y:t.y},t.text)}return null}function cSe(t){if(!t)return{fill:"none",pattern:null,linearGradient:null};if(!("type"in t))return{fill:new Se(t).toString(),pattern:null,linearGradient:null};if(t.type==="pattern"){const i=`patternId-${yat()}`;return{fill:`url(#${i})`,pattern:{id:i,x:t.x,y:t.y,width:t.width,height:t.height,image:{x:0,y:0,width:t.width,height:t.height,href:t.src}},linearGradient:null}}const e=`linearGradientId-${bat()}`;return{fill:`url(#${e})`,pattern:null,linearGradient:{id:e,x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,stops:t.colors.map(i=>({offset:i.offset,color:i.color&&new Se(i.color).toString()}))}}}function uSe(t){const e={color:"none",width:1,cap:"butt",join:"4",dashArray:"none",dashOffset:"0"};return t&&(t.width!=null&&(e.width=t.width),t.cap&&(e.cap=t.cap),t.join&&(e.join=t.join.toString()),t.color&&(e.color=new Se(t.color).toString()),t.dashArray&&(e.dashArray=t.dashArray),t.dashoffset&&(e.dashOffset=t.dashoffset),t.style&&!t.dashArray&&(e.dashArray=C$e(t).join(",")||"none")),e}function dSe(t,e){const i={align:null,decoration:null,kerning:null,rotate:null,font:{style:null,variant:null,weight:null,size:null,family:null}};if(t){const r=t.alignBaseline,n=r==="baseline"?"auto":r==="top"?"text-top":r==="bottom"?"hanging":r;i.align=t.align,i.dominantBaseline=n,i.decoration=t.decoration,i.kerning=t.kerning?"auto":"0",i.rotate=t.rotated?"90":"0",Ik(e),i.font.style=e.style||"normal",i.font.variant=e.variant||"normal",i.font.weight=e.weight||"normal",i.font.size=e.size&&e.size.toString()||"10pt",i.font.family=e.family||"serif"}return i}function Mat(t){const{pattern:e,linearGradient:i}=t;if(e)return ue("pattern",{height:e.height,id:e.id,patternUnits:"userSpaceOnUse",width:e.width,x:e.x,y:e.y},ue("image",{height:e.image.height,href:e.image.href,width:e.image.width,x:e.image.x,y:e.image.y}));if(i){const r=i.stops.map((n,s)=>ue("stop",{key:`${s}-stop`,offset:n.offset,"stop-color":n.color}));return ue("linearGradient",{gradientUnits:"userSpaceOnUse",id:i.id,x1:i.x1,x2:i.x2,y1:i.y1,y2:i.y2},r)}return null}function Cat(t,e){if(!t||t.length===0)return null;const i=[];for(const r of t){const{shape:n,fill:s,stroke:a,font:o}=r,l=cSe(s),c=uSe(a),h=n.type==="text"?dSe(n,o):null,m=lSe(n,l.fill,c,h);m&&i.push(m)}return ue("mask",{id:e,maskUnits:"userSpaceOnUse"},ue("g",null,i))}function zle(t,e,i){return Ep(t,Yk(t),[e,i])}function Nle(t,e,i,r,n){return Jk(t,Yk(t),[e,i]),t[4]=t[4]*e-r*e+r,t[5]=t[5]*i-n*i+n,t}function Eat(t,e,i,r){const n=e%360*Math.PI/180;Rv(t,Yk(t),n);const s=Math.cos(n),a=Math.sin(n),o=t[4],l=t[5];return t[4]=o*s-l*a+r*a-i*s+i,t[5]=l*s+o*a-i*a-r*s+r,t}function go(t,e){on&&"left"in on?(on.left!=null&&on.left>t&&(on.left=t),(on.right==null||on.right<t)&&(on.right=t),(on.top==null||on.top>e)&&(on.top=e),(on.bottom==null||on.bottom<e)&&(on.bottom=e)):on={left:t,bottom:e,right:t,top:e}}function Dle(t){const e=t.args,i=e.length;let r;switch(t.action){case"M":case"L":case"C":case"S":case"Q":case"T":for(r=0;r<i;r+=2)go(e[r],e[r+1]);Yi.x=e[i-2],Yi.y=e[i-1];break;case"H":for(r=0;r<i;++r)go(e[r],Yi.y);Yi.x=e[i-1];break;case"V":for(r=0;r<i;++r)go(Yi.x,e[r]);Yi.y=e[i-1];break;case"m":{let n=0;for(("x"in Yi)||(go(Yi.x=e[0],Yi.y=e[1]),n=2),r=n;r<i;r+=2)go(Yi.x+=e[r],Yi.y+=e[r+1]);break}case"l":case"t":for(r=0;r<i;r+=2)go(Yi.x+=e[r],Yi.y+=e[r+1]);break;case"h":for(r=0;r<i;++r)go(Yi.x+=e[r],Yi.y);break;case"v":for(r=0;r<i;++r)go(Yi.x,Yi.y+=e[r]);break;case"c":for(r=0;r<i;r+=6)go(Yi.x+e[r],Yi.y+e[r+1]),go(Yi.x+e[r+2],Yi.y+e[r+3]),go(Yi.x+=e[r+4],Yi.y+=e[r+5]);break;case"s":case"q":for(r=0;r<i;r+=4)go(Yi.x+e[r],Yi.y+e[r+1]),go(Yi.x+=e[r+2],Yi.y+=e[r+3]);break;case"A":for(r=0;r<i;r+=7)go(e[r+5],e[r+6]);Yi.x=e[i-2],Yi.y=e[i-1];break;case"a":for(r=0;r<i;r+=7)go(Yi.x+=e[r+5],Yi.y+=e[r+6])}}function jle(t,e,i){const r=Sat[t.toLowerCase()];let n;typeof r=="number"&&(r?e.length>=r&&(n={action:t,args:e.slice(0,e.length-e.length%r)},i.push(n),Dle(n)):(n={action:t,args:[]},i.push(n),Dle(n)))}function kat(t){const e=(typeof t.path!="string"?oSe(t.path):t.path).match(Tat),i=[];if(on={},Yi={},!e)return null;let r="",n=[];const s=e.length;for(let o=0;o<s;++o){const l=e[o],c=parseFloat(l);isNaN(c)?(r&&jle(r,n,i),n=[],r=l):n.push(c)}jle(r,n,i);const a={x:0,y:0,width:0,height:0};return on&&"left"in on&&(a.x=on.left,a.y=on.top,a.width=on.right-on.left,a.height=on.bottom-on.top),a}function hSe(t){const e={x:0,y:0,width:0,height:0};if(t.type==="circle")e.x=t.cx-t.r,e.y=t.cy-t.r,e.width=2*t.r,e.height=2*t.r;else if(t.type==="ellipse")e.x=t.cx-t.rx,e.y=t.cy-t.ry,e.width=2*t.rx,e.height=2*t.ry;else if(t.type==="image"||t.type==="rect")e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height;else if(t.type==="path"){const i=kat(t);e.x=i.x,e.y=i.y,e.width=i.width,e.height=i.height}return e}function pSe(t){const e={x:0,y:0,width:0,height:0};let i=null,r=Number.NEGATIVE_INFINITY,n=Number.NEGATIVE_INFINITY;for(const s of t)i?(i.x=Math.min(i.x,s.x),i.y=Math.min(i.y,s.y),r=Math.max(r,s.x+s.width),n=Math.max(n,s.y+s.height)):(i=e,i.x=s.x,i.y=s.y,r=s.x+s.width,n=s.y+s.height);return i&&(i.width=r-i.x,i.height=n-i.y),i}function fSe(t,e,i,r,n,s,a,o,l){let c=(a&&s?uv(s,e):e)/2,h=(a&&s?uv(s,i):i)/2;if(l){const k=l[0],A=l[1];c=(a&&s?uv(s,k):k)/2,h=(a&&s?uv(s,A):A)/2}const m=t.width+r,g=t.height+r,v=Um(),b=Um();let x=!1;if(n&&m!==0&&g!==0){const k=e!==i?e/i:m/g,A=e>i?e:i;let L=1,z=1;isNaN(A)||(k>1?(L=A/m,z=A/k/g):(z=A/g,L=A*k/m)),Gh(b,b,Nle(v,L,z,c,h)),x=!0}const $=t.x+(m-r)/2,M=t.y+(g-r)/2;if(Gh(b,b,zle(v,c-$,h-M)),!x&&(m>e||g>i)){const k=m/e>g/i,A=(k?e:i)/(k?m:g);Gh(b,b,Nle(v,A,A,$,M))}return o&&Gh(b,b,zle(v,o[0],o[1])),s&&Gh(b,b,Eat(v,s,$,M)),`matrix(${b[0]},${b[1]},${b[2]},${b[3]},${b[4]},${b[5]})`}function mSe(t){const e=t==null?void 0:t.match(/bloom\(\s*([^\s]+)\s+([^\s]+)\s+([^\s]+)\s*\)/i);if(!e)return null;const[,i,r,n]=e;return{strength:Number(i),radius:Di($i(r)),threshold:Number(n)}}function Aat(t,e,i){const r=mSe(t);if(!r)return null;const{strength:n,radius:s}=r,a=n>0?s:0,o=(n+a)*e,l=4*n+1;return ue("filter",{filterUnits:"userSpaceOnUse",height:"300%",id:`bloom${i}`,width:"300%",x:"-100%",y:"-100%"},ue("feMorphology",{in:"SourceGraphic",operator:"dilate",radius:(n+.5*a)*(5**(e/100)*(.4+e/100)),result:"dilate"}),ue("feGaussianBlur",{in:"dilate",result:"blur",stdDeviation:o/25}),ue("feGaussianBlur",{in:"blur",result:"intensityBlur",stdDeviation:o/50}),ue("feComponentTransfer",{in:"SourceGraphic",result:"intensityBrightness"},ue("feFuncR",{slope:l,type:"linear"}),ue("feFuncG",{slope:l,type:"linear"}),ue("feFuncB",{slope:l,type:"linear"})),ue("feMerge",null,ue("feMergeNode",{in:"intensityBlur"}),ue("feMergeNode",{in:"intensityBrightness"}),ue("feGaussianBlur",{stdDeviation:n/10})))}function Pat(t,e,i,r={}){var g,v;const n=[],s=[],a=_at(),o=Aat(r.cssEffectFilter,e,a);let l=null;if(o){const b=mSe(r.cssEffectFilter),x=r.clipBloomEffect||!(b!=null&&b.strength)?0:(b.strength+b.radius/2)/3,$=e+e*x,M=i+i*x;l=[Math.max($,10),Math.max(M,10)]}let c=e,h=i;if(r.useRotationSize)for(let b=0;b<t.length;b++){const x=((g=r.rotations)==null?void 0:g[b])??0;c=Math.max(uv(x,e),c),h=Math.max(uv(x,i),h)}for(let b=0;b<t.length;b++){const x=t[b],$=[],M=[];let k=0,A=0,L=0;for(const X of x){const{shape:J,fill:Q,stroke:le,font:ie,offset:re}=X;r.ignoreStrokeWidth||J.type==="text"||(k+=(le==null?void 0:le.width)||0);const se=cSe(Q),Te=uSe(le),ne=J.type==="text"?dSe(J,ie):null;n.push(Mat(se)),$.push(lSe(J,se.fill,Te,ne,r.ariaLabel)),M.push(hSe(J)),re&&(A+=re[0],L+=re[1])}const z=((v=r.rotations)==null?void 0:v[b])??0;r.useRotationSize&&(A+=(c-uv(z,e))/2,L+=(h-uv(z,i))/2);const U=fSe(pSe(M),e,i,k,r.scale??!1,z,r.useRotationSize??!1,[A,L],l);let B=null;if(r.masking){const X=`mask-${b}`,J=r.masking[b];n.push(Cat(J,X)),B=`url(#${X})`}s.push(B?ue("g",{mask:B},ue("g",{transform:U},$)):ue("g",{transform:U},$))}return o&&(Ik(l),c=l[0],h=l[1]),ue("svg",{"aria-label":r.ariaLabel,focusable:!1,height:h,role:"img",style:"display: block;",width:c,xmlns:xat},o,ue("defs",null,n),o?ue("g",{filter:`url(#bloom${a})`},s):s)}const Vle=s9();function Oat(t,e){Vle.append(t,e),Vle.detach(e)}function iI(t,e,i){const r=Math.ceil(e[0]),n=Math.ceil(e[1]);if(!t.some(a=>!!a.length))return null;const s=(i==null?void 0:i.node)||document.createElement("div");return i.opacity!=null&&(s.style.opacity=i.opacity.toString()),i.cssEffectFilter!=null&&(s.style.filter=i.cssEffectFilter),Oat(s,()=>Pat(t,r,n,i)),s}function Lat(t,e){t=Math.ceil(t),e=Math.ceil(e);const i=document.createElement("canvas");i.width=t,i.height=e,i.style.width=t+"px",i.style.height=e+"px";const r=i.getContext("2d");return r.clearRect(0,0,t,e),r}function Fat(t,e,i){return t?mi(t,{responseType:"image"}).then(r=>{const n=r.data,s=n.width,a=n.height,o=s/a;let l=e;if(i){const c=Math.max(s,a);l=Math.min(l,c)}return{image:n,width:o<=1?Math.ceil(l*o):l,height:o<=1?l:Math.ceil(l/o)}}):Promise.reject(new ae("renderUtils: imageDataSize","href not provided."))}function Rat(t,e){return!(!t||e==="ignore")&&(e!=="multiply"||t.r!==255||t.g!==255||t.b!==255||t.a!==1)}function zat(t,e,i,r,n){switch(n){case"multiply":t[e]*=i[0],t[e+1]*=i[1],t[e+2]*=i[2],t[e+3]*=i[3];break;default:{const s=L5({r:t[e],g:t[e+1],b:t[e+2]});s.h=r.h,s.s=r.s,s.v=s.v/100*r.v;const a=I_(s);t[e]=a.r,t[e+1]=a.g,t[e+2]=a.b,t[e+3]*=i[3];break}}}function Nat(t,e,i,r,n){return Fat(t,e,n).then(s=>{const a=s.width??e,o=s.height??e;if(s.image&&Rat(i,r)){let l=s.image.width,c=s.image.height;ve("edge")&&/\.svg$/i.test(t)&&(l-=1,c-=1);const h=Lat(a,o);h.drawImage(s.image,0,0,l,c,0,0,a,o);const m=h.getImageData(0,0,a,o),g=[i.r/255,i.g/255,i.b/255,i.a],v=L5(i);for(let b=0;b<m.data.length;b+=4)zat(m.data,b,g,v,r);h.putImageData(m,0,0),t=h.canvas.toDataURL("image/png")}else{const l=Rt==null?void 0:Rt.findCredential(t);if(l!=null&&l.token){const c=t.includes("?")?"&":"?";t=`${t}${c}token=${l.token}`}}return{url:t,width:a,height:o}}).catch(()=>({url:t,width:e,height:e}))}const j2={fill:[{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"}],meshSymbol3DFill:[{type:"path",path:"M -10,-8 L 6,0 L 6,6 L -10,6 L -10,-8 Z"},{type:"path",path:"M -10,-8 L -7,-10 L 9,-2 L 6,0 L -10,-8 Z"},{type:"path",path:"M 6,0 L 9,-2 L 9,4 L 6,6 L 6,0 Z"}],pathSymbol3DLayer:[{type:"path",path:"M 3,12 L 12,0 L 11,-2 L -4,5 L -1,5 L 1,7 L 3,10 L 3,12 Z"},{type:"circle",cx:-2,cy:10,r:5}]};function Dat(t,e,i){let n=22,s=22;t<1?n*=.75:t>1&&(s*=1.25);const a=0,o=0;let l=22,c=22;return e&&i&&(n=s=l=c=0),[{type:"path",path:[{command:"M",values:[l,a]},{command:"L",values:[i?l:.875*l,a]},{command:"L",values:[i?n-.5*l:o,s-.5*c]},{command:"L",values:[n-.5*l,s-.5*c]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[l,a]},{command:"L",values:[l,e?a:.125*c]},{command:"L",values:[n-.5*l,e?s-.5*c:c]},{command:"L",values:[n-.5*l,s-.5*c]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[n-.5*l,s-.5*c]},{command:"L",values:[i?n-.5*l:o,s-.5*c]},{command:"L",values:[i?n-.5*l:o,e?s-.5*c:c]},{command:"L",values:[n-.5*l,e?s-.5*c:c]},{command:"Z",values:[]}]}]}function jat(t){const i=.5*t,r=0,n=0;return[{type:"path",path:[{command:"M",values:[n,.7*22*.5]},{command:"L",values:[.3*22,.7*22]},{command:"L",values:[.3*22,.7*22+i]},{command:"L",values:[n,.7*22+i-.7*22*.5]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*22,.7*22]},{command:"L",values:[.3*22,.7*22+i]},{command:"L",values:[22,i]},{command:"L",values:[22,r]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*22,r]},{command:"L",values:[22,r]},{command:"L",values:[.3*22,.7*22]},{command:"L",values:[n,.7*22*.5]},{command:"Z",values:[]}]}]}function Vat(){return[{type:"path",path:"M80,80.2v-27c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4C8.3,59.3,5.7,58,3.9,56c-1.1-1.2-2.4-2.1-3.9-2.8v27"},{type:"path",path:"M11,59.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8v-24c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-1.1-1.2-2.4-2.1-3.9-2.8v24c1.5,0.7,2.8,1.6,3.9,2.8C5.7,58,8.3,59.3,11,59.4z"},{type:"path",path:"M11,35.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8V3.6c-1.5,0.7-2.8,1.6-3.9,2.8c-2.2,2.1-4.6,3.4-7.1,3.4s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6S42.5,9.9,40,9.9s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.5,0-5-1.3-7.1-3.4C2.8,5.3,1.4,4.3,0,3.6v25.6c1.5,0.7,2.8,1.6,3.9,2.8C5.7,34.1,8.3,35.3,11,35.4z"}]}function Uat(t,e){let i=e?20:t;const r=e?4:6;i-=i<=22?.5*r:r;const n=0,s=0,a=e?.35*i:.5*i;return[{type:"path",path:[{command:"M",values:[.5*i,n]},{command:"L",values:[i,.5*a]},{command:"L",values:[.5*i,a]},{command:"L",values:[s,.5*a]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[n,.5*a]},{command:"L",values:[.5*i,a]},{command:"L",values:[.5*i,t]},{command:"L",values:[s,t-.5*a]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.5*i,a]},{command:"L",values:[.5*i,t]},{command:"L",values:[i,t-.5*a]},{command:"L",values:[i,.5*a]},{command:"Z",values:[]}]}]}function Bat(t,e){let i=e?20:t;const r=e?4:6;i-=i<=22?.5*r:r;const n=.5*i,s=.15*i,a=0,o=t-s;return[{type:"ellipse",cx:.5*i,cy:o,rx:n,ry:s},{type:"path",path:[{command:"M",values:[a,s]},{command:"L",values:[a,o]},{command:"L",values:[i,o]},{command:"L",values:[i,s]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*i,cy:s,rx:n,ry:s}]}function qat(t,e){let i=e?20:t;const r=e?4:6;i-=i<=22?.5*r:r;const n=.15*i,s=t-n;return[{type:"ellipse",cx:.5*i,cy:s,rx:.5*i,ry:n},{type:"path",path:[{command:"M",values:[.5*i,0]},{command:"L",values:[i,s]},{command:"L",values:[0,s]},{command:"Z",values:[]}]}]}function Hat(t){let e=t;const i=6;e-=e<22?.5*i:i;const r=.15*e,n=0;return[{type:"path",path:[{command:"M",values:[0,n]},{command:"L",values:[e,n]},{command:"L",values:[.5*e,t-r]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*e,cy:n,rx:.5*e,ry:r}]}function Gat(t){let e=t;const i=t,r=4;e-=e<22?.5*r:r;const n=0,s=0,a=e,o=i,l=Math.floor(t/10)-1||1;return[{type:"path",path:[{command:"M",values:[.45*a,n]},{command:"L",values:[a,.5*o-l]},{command:"L",values:[.45*a-l,.5*o+l]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*a,n]},{command:"L",values:[.45*a-l,.5*o+l]},{command:"L",values:[s,.5*o-l]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[s,.5*o-l]},{command:"L",values:[.45*a-l,.5*o+l]},{command:"L",values:[.45*a,i]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*a,i]},{command:"L",values:[a,.5*o-l]},{command:"L",values:[.45*a-l,.5*o+l]},{command:"Z",values:[]}]}]}function Wat(t){let i=t;i-=i<22?.5*2:2;const r=0,n=0;return[{type:"path",path:[{command:"M",values:[.45*t,r]},{command:"L",values:[t,i]},{command:"L",values:[.45*t,.6*i]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*t,r]},{command:"L",values:[.45*t,.6*i]},{command:"L",values:[n,i]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[n,i]},{command:"L",values:[.45*t,.6*i]},{command:"L",values:[t,i]},{command:"Z",values:[]}]}]}function xv(t,e){return Math.round(Math.min(Math.max(t+255*e*.75,0),255))}function fPt(t,e){if(t==null)return new Se;if("type"in t&&(t.type==="linear"||t.type==="pattern"))return t;const i=new Se(t);return new Se([xv(i.r,e),xv(i.g,e),xv(i.b,e),i.a])}function Zat(t){return t=t||globalThis.location.hostname,Yat.some(e=>(t==null?void 0:t.match(e))!=null)}function Ule(t,e){return t?(e=e||globalThis.location.hostname)?e.match(gSe)!=null||e.match(vSe)!=null?t.replace("static.arcgis.com","staticdev.arcgis.com"):e.match(ySe)!=null||e.match(bSe)!=null?t.replace("static.arcgis.com","staticqa.arcgis.com"):t:t:null}const gSe=/^devext\.arcgis\.com$/,ySe=/^qaext\.arcgis\.com$/,vSe=/^[\w-]*\.mapsdevext\.arcgis\.com$/,bSe=/^[\w-]*\.mapsqa\.arcgis\.com$/,Yat=[/^([\w-]*\.)?[\w-]*\.zrh-dev-local\.esri\.com$/,gSe,ySe,/^jsapps\.esri\.com$/,vSe,bSe],Jat=["web-gltf","web","cim"];function wSe(t,e,i){const r=t.name;return r==null?Promise.reject(new ae("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference")):t.styleName==="Esri2DPointSymbolsStyle"?Xat(r,e,i):j1e(t,e,i).then(n=>xSe(n,r,e,$Xe,i))}function _Se(t,e){return e.items.find(i=>i.name===t)}async function xSe(t,e,i,r,n){var $,M;const s=(i==null?void 0:i.portal)!=null?i.portal:qe.getDefault(),a={portal:s,url:Cn(t.baseUrl)},o=_Se(e,t.data);if(!o)throw new ae("symbolstyleutils:symbol-name-not-found",`The symbol name '${e}' could not be found`,{symbolName:e});const l=(n==null?void 0:n.acceptedFormats)??Jat,c=r(o,l);if(!c)throw new ae("symbolstyleutils:symbol-reference-no-accepted-format",`The symbol name '${e}' does not have an accepted format (one of ${l})`,{symbolName:e});const{url:h,format:m}=c;let g=Wm(h,a),v=(($=o.thumbnail)==null?void 0:$.href)??null;const b=(M=o.thumbnail)==null?void 0:M.imageData;Zat()&&(g=Ule(g)??"",v=Ule(v));const x={portal:s,url:Cn(eZ(g)),origin:"portal-item"};return tJ(g,n).then(k=>{const A=m==="cim"?V1e(k.data):k.data,L=N1e(A,x);if(L&&qd(L)){if(v){const z=Wm(v,a);L.thumbnail=new cw({url:z})}else b&&(L.thumbnail=new cw({url:`data:image/png;base64,${b}`}));t.styleUrl?L.styleOrigin=new $d({portal:i.portal,styleUrl:t.styleUrl,name:e}):t.styleName&&(L.styleOrigin=new $d({portal:i.portal,styleName:t.styleName,name:e}))}return L})}function Xat(t,e,i){const r=SXe.replaceAll(/\{SymbolName\}/gi,t),n=e.portal!=null?e.portal:qe.getDefault();return tJ(r,i).then(s=>{const a=V1e(s.data);return N1e(a,{portal:n,url:Cn(eZ(r)),origin:"portal-item"})})}const Qat=Object.freeze(Object.defineProperty({__proto__:null,fetchSymbolFromStyle:xSe,getStyleItemFromStyle:_Se,resolveWebStyleSymbol:wSe},Symbol.toStringTag,{value:"Module"})),P0=22,vF=120,F5=80,Ble=50,QH=20;function M$(t){const e=t.outline,i=t.material!=null?t.material.color:null,r=i!=null?i.toHex():null;if(e==null||"pattern"in e&&e.pattern!=null&&e.pattern.type==="style"&&e.pattern.style==="none")return t.type==="fill"&&r==="#ffffff"?{color:"#bdc3c7",width:.75}:null;const n=Di(e.size)||0;return{color:"rgba("+(e.color!=null?e.color.toRgba():"255,255,255,1")+")",width:Math.min(n,F5),style:"pattern"in e&&e.pattern!=null&&e.pattern.type==="style"?MJ(e.pattern.style):null,join:"butt",cap:"patternCap"in e?e.patternCap:"butt"}}async function Kat(t,e){var r,n,s;if((r=t.thumbnail)!=null&&r.url)return t.thumbnail.url;if(e.type==="icon"&&((n=e==null?void 0:e.resource)==null?void 0:n.href))return Grt(e);const i=Hr("esri/images/Legend/legend3dsymboldefault.png");if(t.styleOrigin&&(t.styleOrigin.styleName||t.styleOrigin.styleUrl)){const a=await wSe(t.styleOrigin,{portal:t.styleOrigin.portal}).catch(()=>null);if(a&&"thumbnail"in a&&((s=a.thumbnail)!=null&&s.url))return a.thumbnail.url}return i}function TU(t,e=1){const i=t.a,r=L5(t),n=r.h,s=r.s/e,a=100-(100-r.v)/e,{r:o,g:l,b:c}=I_({h:n,s,v:a});return[o,l,c,i]}function hz(t){var e;return t.type==="water"?t.color==null?null:t.color:((e=t.material)==null?void 0:e.color)==null?null:t.material.color}function Bi(t,e=0){const i=hz(t);if(!i){if(t.type==="fill")return null;const n=Brt.r,s=xv(n,e);return[s,s,s,100]}const r=i.toRgba();for(let n=0;n<3;n++)r[n]=xv(r[n],e);return r}async function $Se(t,e){const i=t.style;return i==="none"?null:{type:"pattern",x:0,y:0,src:await Urt(Hr(`esri/symbols/patterns/${i}.png`),e.toCss(!0)),width:5,height:5}}function qle(t){return t.outline?M$(t):{color:"rgba(0, 0, 0, 1)",width:1.5}}function LJ(t,e){const i=hz(t);if(!i)return null;let r="rgba(";return r+=xv(i.r,e)+",",r+=xv(i.g,e)+",",r+=xv(i.b,e)+",",r+i.a+");"}function Hle(t,e){const i=t.edges;return!i||!i.color||!i.size?null:{color:i.color.toCss(!0),width:Math.min(Di(i.size),e,F5),join:"round"}}function KH(t,e){var n;const i=LJ(t,e);if(!i||"pattern"in t&&t.pattern!=null&&t.pattern.type==="style"&&t.pattern.style==="none")return null;const r={color:i,width:Math.min(t.size?Di(t.size):.75,F5)};return"pattern"in t&&((n=t.pattern)==null?void 0:n.type)==="style"&&(r.style=MJ(t.pattern.style)),"cap"in t&&t.cap&&(r.cap=t.cap),"join"in t&&t.join&&(r.join=t.join==="miter"?Di(2):t.join),r}function JO(t,e,i){const r=i!=null?.75*i:0;return{type:"linear",x1:r?.25*r:0,y1:r?.5*r:0,x2:r||4,y2:r?.5*r:4,colors:[{color:t,offset:0},{color:e,offset:1}]}}function eot(t){const e=t.depth,i=t.height,r=t.width;return r!==0&&e!==0&&i!==0&&r===e&&r!=null&&i!=null&&r<i}function tot(t,e,i){var n,s;const r=[];if(!t)return r;switch(t.type){case"icon":{const l=e,c=e;switch(((n=t.resource)==null?void 0:n.primitive)??hBe){case"circle":r.push({shape:{type:"circle",cx:0,cy:0,r:.5*e},fill:Bi(t,0),stroke:M$(t)});break;case"square":r.push({shape:{type:"path",path:[{command:"M",values:[0,c]},{command:"L",values:[0,0]},{command:"L",values:[l,0]},{command:"L",values:[l,c]},{command:"Z",values:[]}]},fill:Bi(t,0),stroke:M$(t)});break;case"triangle":r.push({shape:{type:"path",path:[{command:"M",values:[0,c]},{command:"L",values:[.5*l,0]},{command:"L",values:[l,c]},{command:"Z",values:[]}]},fill:Bi(t,0),stroke:M$(t)});break;case"cross":r.push({shape:{type:"path",path:[{command:"M",values:[.5*l,0]},{command:"L",values:[.5*l,c]},{command:"M",values:[0,.5*c]},{command:"L",values:[l,.5*c]}]},stroke:qle(t)});break;case"x":r.push({shape:{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[l,c]},{command:"M",values:[l,0]},{command:"L",values:[0,c]}]},stroke:qle(t)});break;case"kite":r.push({shape:{type:"path",path:[{command:"M",values:[0,.5*c]},{command:"L",values:[.5*l,0]},{command:"L",values:[l,.5*c]},{command:"L",values:[.5*l,c]},{command:"Z",values:[]}]},fill:Bi(t,0),stroke:M$(t)})}break}case"object":switch(((s=t.resource)==null?void 0:s.primitive)??yBe){case"cone":{const a=JO(Bi(t,0),Bi(t,-.6),i?QH:e),o=qat(e,i);r.push({shape:o[0],fill:a},{shape:o[1],fill:a});break}case"inverted-cone":{const a=Bi(t,0),o=JO(a,Bi(t,-.6),e),l=Hat(e);r.push({shape:l[0],fill:o},{shape:l[1],fill:a});break}case"cube":{const a=Uat(e,i);r.push({shape:a[0],fill:Bi(t,0)},{shape:a[1],fill:Bi(t,-.3)},{shape:a[2],fill:Bi(t,-.5)});break}case"cylinder":{const a=JO(Bi(t,0),Bi(t,-.6),i?QH:e),o=Bat(e,i);r.push({shape:o[0],fill:a},{shape:o[1],fill:a},{shape:o[2],fill:Bi(t,0)});break}case"diamond":{const a=Gat(e);r.push({shape:a[0],fill:Bi(t,-.3)},{shape:a[1],fill:Bi(t,0)},{shape:a[2],fill:Bi(t,-.3)},{shape:a[3],fill:Bi(t,-.7)});break}case"sphere":{const a=JO(Bi(t,0),Bi(t,-.6));a.x1=0,a.y1=0,a.x2=.25*e,a.y2=.25*e,r.push({shape:{type:"circle",cx:0,cy:0,r:.5*e},fill:a});break}case"tetrahedron":{const a=Wat(e);r.push({shape:a[0],fill:Bi(t,-.3)},{shape:a[1],fill:Bi(t,0)},{shape:a[2],fill:Bi(t,-.6)});break}}break}return r}function R5(t){const e=typeof(t==null?void 0:t.size)=="number"?t==null?void 0:t.size:null;return e?Di(e):null}function iot(t){return t.type==="icon"?"multiply":"tint"}async function rot(t,e){const i=R5(e),r=e!=null&&e.maxSize?Di(e.maxSize):null,n=(e==null?void 0:e.disableUpsampling)??!1,s=t.symbolLayers,a=[],o=[];let l=!1,c=0,h=0,m=0;s.forEach(b=>{var k,A,L,z;if(b.type!=="icon"&&b.type!=="object")return;b&&b.type==="icon"&&(m=Math.max(b.size&&Di(b.size),m));const x=b.type==="icon"?b.size&&Di(b.size):0,$=i||x?Math.ceil(Math.min(i||x,r||vF)):P0;let M=b.type==="icon"?b.angle:null;if((e==null?void 0:e.rotation)!=null&&(M=(M??0)+e.rotation),o.push(M),(k=b==null?void 0:b.resource)==null?void 0:k.href){const U=Kat(t,b).then(B=>{var Q;const X=(Q=b==null?void 0:b.material)==null?void 0:Q.color,J=iot(b);return Nat(B,$,X,J,n)}).then(B=>{const X=B.width,J=B.height;return c=Math.max(c,X),h=Math.max(h,J),M&&(l=!0),[{shape:{type:"image",x:0,y:0,width:X,height:J,src:B.url},fill:null,stroke:null}]});a.push(U)}else{let U=$;b.type==="icon"&&i&&(U=$*(x/m));const B=(e==null?void 0:e.symbolConfig)==="tall"||((A=e==null?void 0:e.symbolConfig)==null?void 0:A.isTall)||b.type==="object"&&eot(b);c=Math.max(c,B?QH:U),h=Math.max(h,U),M&&((L=b.resource)!=null&&L.primitive)&&["square","triangle","x"].includes((z=b.resource)==null?void 0:z.primitive)&&(l=!0),a.push(Promise.resolve(tot(b,U,B)))}});const g=await Promise.allSettled(a),v=[];return g.forEach(b=>{b.status==="fulfilled"?v.push(b.value):b.reason&&Ie.getLogger("esri.symbols.support.previewSymbol3D").warn("error while building swatchInfo!",b.reason)}),iI(v,[c,h],{node:e==null?void 0:e.node,scale:!1,opacity:e==null?void 0:e.opacity,ariaLabel:e==null?void 0:e.ariaLabel,rotations:o,useRotationSize:l})}function not(t,e){const i=t.symbolLayers,r=[],n=O5(t),s=R5(e),a=(e!=null&&e.maxSize?Di(e.maxSize):null)||F5;let o,l=0,c=0;return i.forEach((h,m)=>{if(!h||h.type!=="line"&&h.type!=="path")return;const g=[];switch(h.type){case"line":{const v=KH(h,0);if(v==null)break;const b=(v==null?void 0:v.width)||0;m===0&&(o=b);const x=Math.min(s||b,a),$=m===0?x:s?x*(b/o):x,M=$>Ble/2?2*$:Ble;c=Math.max(c,$),l=Math.max(l,M),v.width=$,g.push({shape:{type:"path",path:[{command:"M",values:[0,.5*c]},{command:"L",values:[l,.5*c]}]},stroke:v});break}case"path":{const v=Math.min(s||P0,a),b=Bi(h,0),x=Bi(h,-.2),$=LJ(h,-.4),M=$?{color:$,width:1}:{};if(h.profile==="quad"){const k=h.width,A=h.height,L=Dat(k&&A?k/A:1,A===0,k===0),z={...M,join:"bevel"};g.push({shape:L[0],fill:x,stroke:z},{shape:L[1],fill:x,stroke:z},{shape:L[2],fill:b,stroke:z})}else g.push({shape:j2.pathSymbol3DLayer[0],fill:x,stroke:M},{shape:j2.pathSymbol3DLayer[1],fill:b,stroke:M});c=Math.max(c,v),l=c}}r.push(g)}),Promise.resolve(iI(r,[l,c],{node:e==null?void 0:e.node,scale:n,opacity:e==null?void 0:e.opacity,ariaLabel:e==null?void 0:e.ariaLabel}))}async function sot(t,e){const i=t.type==="mesh-3d",r=t.symbolLayers,n=R5(e),s=e!=null&&e.maxSize?Di(e.maxSize):null,a=n||P0,o=[];let l=0,c=0,h=!1;for(let m=0;m<r.length;m++){const g=r.at(m),v=[];if(!i||g.type==="fill"){switch(g.type){case"fill":{const b=Math.min(a,s||vF);if(l=Math.max(l,b),c=Math.max(c,b),h=!0,i){const x=j2.meshSymbol3DFill,$=LJ(g,-.4),M=Hle(g,.05*b)??($?{join:"round",color:$,width:1}:null);v.push({shape:x[0],fill:Bi(g,0),stroke:M},{shape:x[1],fill:Bi(g,-.2),stroke:M},{shape:x[2],fill:Bi(g,-.6),stroke:M})}else{let x=Bi(g,0);const $="pattern"in g?g.pattern:null,M=M$(g),k=hz(g);$!=null&&$.type==="style"&&$.style!=="solid"&&k&&(x=await $Se($,k)),v.push({shape:j2.fill[0],fill:x,stroke:M})}break}case"line":{const b=KH(g,0);if(b==null)break;const x={stroke:b,shape:j2.fill[0]};l=Math.max(l,P0),c=Math.max(c,P0),v.push(x);break}case"extrude":{const b=Bi(g,0),x=Bi(g,-.2),$=Math.min(a,s||vF),M=jat($),k=P0,A=.7*P0+.5*$,L=Hle(g,.1*Math.min(k,A))??{join:"round",...KH(g,-.4),width:1};v.push({shape:M[0],fill:x,stroke:L},{shape:M[1],fill:x,stroke:L},{shape:M[2],fill:b,stroke:L}),l=Math.max(l,k),c=Math.max(c,A);break}case"water":{const b=hz(g),x=TU(b),$=TU(b,2),M=TU(b,3),k=Vat();h=!0,v.push({shape:k[0],fill:x},{shape:k[1],fill:$},{shape:k[2],fill:M});const A=Math.min(a,s||vF);l=Math.max(l,A),c=Math.max(c,A);break}}o.push(v)}}return iI(o,[l,c],{node:e==null?void 0:e.node,scale:h,opacity:e==null?void 0:e.opacity,ariaLabel:e==null?void 0:e.ariaLabel})}function aot(t,e){if(t.symbolLayers.length===0)return Promise.reject(new ae("symbolPreview: renderPreviewHTML3D","No symbolLayers in the symbol."));switch(t.type){case"point-3d":return rot(t,e);case"line-3d":return not(t,e);case"polygon-3d":case"mesh-3d":return sot(t,e)}return Promise.reject(new ae("symbolPreview: swatchInfo3D","symbol not supported."))}const oot=Object.freeze(Object.defineProperty({__proto__:null,getPatternDescriptor:$Se,getSizeFromOptions:R5,getSymbolLayerFill:Bi,previewSymbol3D:aot},Symbol.toStringTag,{value:"Module"})),Gle={HH:315,HL:45,LL:135,LH:225},lot={2:[["HL","HH"],["LL","LH"]],3:[["HL","HM","HH"],["ML","MM","MH"],["LL","LM","LH"]],4:[["HL","HM1","HM2","HH"],["M2L","M2M1","M2M2","M2H"],["M1L","M1M1","M1M2","M1H"],["LL","LM1","LM2","LH"]]};function cot(t){if(!t)return;const{type:e}=t;if(e.includes("3d"))return Bi(t.symbolLayers.at(0));if(e==="simple-line"){const i=zE(t);return i&&i.color}if(t.type==="simple-marker"&&(t.style==="x"||t.style==="cross")){const i=zE(t);return i&&i.color}return Vrt(t)}function uot(t,e){const i=e.HH.label,r=e.LL.label,n=e.HL.label,s=e.LH.label;switch(t){case"HH":default:return{top:i,bottom:r,left:n,right:s};case"HL":return{top:n,bottom:s,left:r,right:i};case"LL":return{top:r,bottom:i,left:s,right:n};case"LH":return{top:s,bottom:n,left:i,right:r}}}function dot(t){const{focus:e,infos:i,numClasses:r}=t,n=lot[r],s={};i.forEach(o=>{s[o.value]={label:o.label,fill:cot(o.symbol)}});const a=[];for(let o=0;o<r;o++){const l=[];for(let c=0;c<r;c++){const h=s[n[o][c]];l.push(h.fill)}a.push(l)}return{type:"relationship-ramp",numClasses:r,focus:e,colors:a,labels:uot(e,s),rotation:SSe(e)}}function SSe(t){let e=Gle[t];return t&&e==null&&(e=Gle.HH),e||0}let D1=null;const Wle=[255,255,255];function Zle(t,e){return Math.floor(Math.random()*(e-t+1)+t)}function hot(t,e,i){const{backgroundColor:r,outline:n,dotSize:s}=t,a=22,o=.8,l=Math.round(a*a/Math.max(s,.5)**2*o),c=window.devicePixelRatio,h=document.createElement("canvas"),m=a*c;h.width=m,h.height=m,h.style.width=h.width/c+"px",h.style.height=h.height/c+"px";const g=h.getContext("2d");if(r&&(g.fillStyle=r.toCss(!0),g.fillRect(0,0,m,m),g.fill()),g.fillStyle=(e==null?void 0:e.toCss(!0))??"",D1&&D1.length/2===l)for(let b=0;b<2*l;b+=2){const x=D1[b],$=D1[b+1];g.fillRect(x,$,s*c,s*c),g.fill()}else{D1=[];for(let b=0;b<2*l;b+=2){const x=Zle(0,m),$=Zle(0,m);D1.push(x,$),g.fillRect(x,$,s*c,s*c),g.fill()}}n&&(n.color&&(g.strokeStyle=n.color.toCss(!0)),g.lineWidth=n.width,g.strokeRect(0,0,m,m));const v=new Image(a,a);return v.src=h.toDataURL(),v.ariaLabel=null,v.alt="",v}function pot(t,e={}){const i=e.radius||40,r=2*Math.PI*i,n=t.length,s=r/n,a=[],o=zE(e.outline);(o==null?void 0:o.width)!=null&&(o.width*=2),(o||e.backgroundColor)&&a.push({shape:{type:"circle",cx:i,cy:i,r:i},fill:e.backgroundColor,stroke:o,offset:[0,0]});const l=e.values,c=l&&l.length===n&&l.reduce((b,x)=>b+x,0)===100,h=[0];for(let b=0;b<n;b++){let x=null;c&&(x=l[b]*r/100,h.push(x+h[b])),a.push({shape:{type:"circle",cx:i,cy:i,r:i/2},fill:[0,0,0,0],stroke:{width:i,dashArray:`${(x??s)/2} ${r}`,dashoffset:"-"+(c?h[b]/2:b*(s/2)),color:t[b]},offset:[0,0]})}let m=null;const g=2*i+((o==null?void 0:o.width)||0),v=e.holePercentage;if(v){o&&a.push({shape:{type:"circle",cx:i,cy:i,r:i*v},fill:null,stroke:o,offset:[0,0]});const b=g/2;m=[[{shape:{type:"circle",cx:b,cy:b,r:b},fill:Wle,stroke:o?{...o,color:Wle}:null,offset:[0,0]},{shape:{type:"circle",cx:b,cy:b,r:i*v},fill:[0,0,0],stroke:null,offset:[0,0]}]]}return iI([a],[g,g],{cssEffectFilter:e.cssEffectFilter,ignoreStrokeWidth:!0,masking:m,rotations:[-90],ariaLabel:e.ariaLabel})}function w0(t,e={}){const n=e.align==="horizontal",s=n?75:24,a=n?24:75,o=e.width??s,l=e.height??a,c=e.gradient??!0,h=window.devicePixelRatio,m=o*h,g=l*h,v=document.createElement("canvas");v.width=m,v.height=g,v.ariaLabel=e.ariaLabel??null,v.style.width=`${o}px`,v.style.height=`${l}px`;const b=v.getContext("2d"),x=n?m:0,$=n?0:g;if(c){const k=b.createLinearGradient(0,0,x,$),A=t.length,L=A===1?0:1/(A-1);t.forEach((z,U)=>k.addColorStop(U*L,z.toString())),b.fillStyle=k,b.fillRect(0,0,m,g)}else{const k=n?m/t.length:m,A=n?g:g/t.length;let L=0,z=0;for(const U of t)b.fillStyle=U.toString(),b.fillRect(L,z,k,A),L=n?L+k:0,z=n?0:z+A}const M=document.createElement("div");return M.style.width=`${o}px`,M.style.height=`${l}px`,mot(M,e==null?void 0:e.cssEffectFilter),M.appendChild(v),M}function fot(t){const e=t.match(/drop-shadow\(\s*([^\s]+)\s+[^\s]+\s+[^\s]+\s+.+?\)/);return e?e[1]:null}function mot(t,e){if(!e)return;t.style.filter=e;const i=fot(e);if(i){const r=Di($i(i));r<0?t.style.marginLeft=`${Math.abs(r)}px`:t.style.marginRight=`${r}px`}}async function TSe(t,e){switch(t.type){case"web-style":{const{previewWebStyleSymbol:i}=await de(()=>import("./previewWebStyleSymbol-BuMTxeCu.js"),[]);return i(t,TSe,e)}case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":{const{previewSymbol3D:i}=await de(()=>Promise.resolve().then(()=>oot),void 0);return i(t,e)}case"simple-marker":case"simple-line":case"simple-fill":case"picture-marker":case"picture-fill":case"text":{const{previewSymbol2D:i}=await de(()=>import("./previewSymbol2D-CYhM-ky2.js"),__vite__mapDeps([300,175]));return i(t,e)}case"cim":{const{previewCIMSymbol:i}=await de(()=>Promise.resolve().then(()=>vgt),void 0);return i(t,e)}default:return}}function ISe(t){return t&&t.opacity!==void 0?t.opacity*("parent"in t?ISe(t.parent):1):1}async function Yle(t,e){var L;if(!t)return;const i=t.sourceLayer,r=(e!=null&&e.useSourceLayer?i:t.layer)??i,n=e!=null&&e.ignoreOpacity?1:ISe(r);if(t.symbol!=null&&(e==null||e.ignoreGraphicSymbol!==!0)){const z=t.symbol.type==="web-style"?await t.symbol.fetchSymbol({...e,acceptedFormats:e==null?void 0:e.webStyleAcceptedFormats,cache:e==null?void 0:e.webStyleCache}):t.symbol.clone();return vU(z,null,{add:n}),z}const s=(e==null?void 0:e.renderer)??yot(r);let a=s&&"getSymbolAsync"in s?await s.getSymbolAsync(t,e):null;if(!a)return;if(a=a.type==="web-style"?await a.fetchSymbol({...e,acceptedFormats:e==null?void 0:e.webStyleAcceptedFormats,cache:e==null?void 0:e.webStyleCache}):a.clone(),!(s&&"visualVariables"in s&&((L=s.visualVariables)!=null&&L.length)&&got(a)))return vU(a,null,{add:n}),a;if("arcadeRequiredForVisualVariables"in s&&s.arcadeRequiredForVisualVariables&&(e==null?void 0:e.arcade)==null){const z={...e};z.arcade=await Vd(),e=z}const{getColor:o,getOpacity:l,getAllSizes:c,getRotationAngle:h}=await de(()=>Promise.resolve().then(()=>$_),void 0),m=[],g=[],v=[],b=[];for(const z of s.visualVariables)switch(z.type){case"color":m.push(z);break;case"opacity":g.push(z);break;case"rotation":b.push(z);break;case"size":z.target||v.push(z)}const x=!!m.length&&m[m.length-1],$=x?o(x,t,e):null,M=!!(e!=null&&e.ignoreOpacity),k=!!g.length&&g[g.length-1],A=k?l(k,t,e):null;if(vU(a,$,M?void 0:{override:A,add:n}),v.length&&(e==null?void 0:e.ignoreSizeVariables)!==!0){const z=c(v,t,e);await nnt(a,z)}if((e==null?void 0:e.ignoreRotationVariables)!==!0)for(const z of b)snt(a,h(z,t,e),z.axis);return a}function got(t){var e;return!qd(t)||((e=t.symbolLayers.at(0))==null?void 0:e.type)!=="water"}function yot(t){if(t)return"renderer"in t?t.renderer:void 0}function vot(t){return t&&typeof t.highlight=="function"}function bot(t,e,i){return t==null||t>=i&&(e===0||t<=e)}function mPt(t,e){if(e&&t){const{minScale:i,maxScale:r}=t;if(wot(i,r))return bot(e,i,r)}return!0}function wot(t,e){return t!=null&&t>0||e!=null&&e>0}function gPt(t){return!(t!=null&&t.minScale)||!t.maxScale||t.minScale>=t.maxScale}const yPt=()=>!ve("disable-feature:layer-based-scale-visibility"),_ot="esri.widgets.Popup.PopupViewModel",pz=()=>Ie.getLogger(_ot),xot=t=>{const{event:e,view:i,viewModel:r}=t,{action:n}=e;if(!n)return Promise.reject(new ae("trigger-action:missing-arguments","Event has no action"));const{disabled:s,id:a}=n;if(!a)return Promise.reject(new ae("trigger-action:invalid-action","action.id is missing"));if(s)return Promise.reject(new ae("trigger-action:invalid-action","Action is disabled"));if(a===cv.id)return ESe(r).catch(JB);if(a===I$.id)return $ot(r);if(a===Wy.id)return r.browseClusterEnabled=!r.browseClusterEnabled,r.featureMenuOpen=r.browseClusterEnabled,Promise.resolve();if(a===Fle.id){r.visible=!1;const{selectedFeature:o}=r;if(!o)return Promise.reject(new ae(`trigger-action:${Fle.id}`,"selectedFeature is required",{selectedFeature:o}));const{sourceLayer:l}=o;return l?l.remove(o):i==null||i.graphics.remove(o),Promise.resolve()}return Promise.resolve()};function MSe(t){const{selectedFeature:e,location:i,view:r}=t;return r?e??i??null:null}function O0(t){var e,i;return!!t&&t.isAggregate&&((i=(e=t.sourceLayer)==null?void 0:e.featureReduction)==null?void 0:i.type)==="cluster"}async function CSe(t,e){if((e==null?void 0:e.type)!=="3d"||!t||t.declaredClass!=="esri.Graphic")return!0;const i=e.getViewForGraphic(t);if(i&&"whenGraphicBounds"in i){let r=null;try{r=await i.whenGraphicBounds(t,{useViewElevation:!0})}catch{}return!r||!r.boundingBox||r.boundingBox[0]===r.boundingBox[3]&&r.boundingBox[1]===r.boundingBox[4]&&r.boundingBox[2]===r.boundingBox[5]}return!0}async function ESe(t,e){var m,g;const{location:i,selectedFeature:r,view:n,zoomFactor:s}=t;await((m=e==null?void 0:e.viewModel)==null?void 0:m.updateGeometry());const a=e==null?void 0:e.graphic,o=a!=null&&a.geometry?a:MSe(t);if(!n||!o){const v=new ae("zoom-to:invalid-target-or-view","Cannot zoom to location without a target and view.",{target:o,view:n});throw pz().error(v),v}const l=n.scale/s,c=(a==null?void 0:a.geometry)??((g=t.selectedFeature)==null?void 0:g.geometry)??i,h=c!=null&&c.type==="point"&&await CSe(a??r,n);cv.active=!0,cv.disabled=!0;try{await t.zoomTo({target:{target:o,scale:h?l:void 0}})}catch(v){if(In(v))return;const b=new ae("zoom-to:invalid-graphic","Could not zoom to the location of the graphic.",{graphic:a??r});pz().error(b)}finally{cv.active=!1,cv.disabled=!1,t.zoomToLocation=null,h&&(t.location=c)}}async function $ot(t){const{selectedFeature:e,view:i}=t;if((i==null?void 0:i.type)!=="2d"){const a=new ae("zoomToCluster:invalid-view","View must be 2d MapView.",{view:i});throw pz().error(a),a}if(!e||!O0(e)){const a=new ae("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:e});throw pz().error(a),a}const[r,n]=await FJ(i,e);I$.active=!0,I$.disabled=!0;const{extent:s}=await r.queryExtent(n);s&&await t.zoomTo({target:s}),I$.active=!1,I$.disabled=!1}async function Sot(t){const{view:e,selectedFeature:i}=t;if(!e||!i)return;const[r,n]=await FJ(e,i),{extent:s}=await r.queryExtent(n);t.selectedClusterBoundaryFeature.geometry=s,e.graphics.add(t.selectedClusterBoundaryFeature)}async function Tot(t){const{selectedFeature:e,view:i}=t;if(!i||!e)return;const[r,n]=await FJ(i,e);Wy.active=!0,Wy.disabled=!0;const{features:s}=await r.queryFeatures(n);Wy.active=!1,Wy.disabled=!1,Wy.value=!0;const a={features:[e].concat(s)};(t==null?void 0:t.initialDisplayMode)==="feature"&&(a.featureMenuOpen=!0),t==null||t.open(a)}async function FJ(t,e){const i=await t.whenLayerView(e.sourceLayer),r=i.createQuery(),n=e.getObjectId();return r.aggregateIds=n!=null?[n]:[],[i,r]}function Iot(t){Wy.value=!1;const e=t.features.filter(i=>O0(i));e.length&&(t.features=e)}const IU="location-scale-handle",Mot=()=>[cv.clone()],Cot=()=>[I$.clone(),Wy.clone()];let MU=null;function Eot(t,e){return t==="building-scene"||t==="map-image"||t==="tile"||t==="imagery"||e==="2d"&&t==="imagery-tile"}let Zt=class extends F_e(jy){constructor(e){super(e),this._pendingPromises=new Kst,this._fetchFeaturesController=null,this._highlightPromises={"highlight-active-feature":null,"highlight-selected-feature":null},this._selectedClusterFeature=null,this.actions=new dw,this.activeFeature=null,this.autoCloseEnabled=!1,this.browseClusterEnabled=!1,this.content=null,this.defaultPopupTemplateEnabled=!1,this.featurePage=null,this.featuresPerPage=20,this.featureMenuOpen=!1,this.featureMenuTitle=null,this.featureViewModelAbilities=null,this.featureViewModels=[],this.highlightEnabled=!0,this.includeDefaultActions=!0,this.initialDisplayMode="feature",this.selectedClusterBoundaryFeature=new sr({symbol:new no({outline:{width:1.5,color:"cyan"},style:"none"})}),this.title=null,this.updateLocationEnabled=!1,this.view=null,this.visible=!1,this.zoomFactor=4,this.zoomToLocation=null,this._debouncedLocationUpdate=Od(async i=>{var a,o,l,c;const{spatialReference:r}=this,n=(o=(a=this.selectedFeature)==null?void 0:a.geometry)==null?void 0:o.type,s=this.location??i;if(n&&n!=="mesh"&&r&&s&&this.selectedFeature)if(n!=="point")try{const h=this.selectedFeature;let m=h.geometry;const g=this._getHighlightLayer(h),v=h.getObjectId();if(!g||!this.view)return;if(v){const $=(l=this.view)==null?void 0:l.allLayerViews.find(A=>A.layer.uid===g.uid);if(!$||!("queryFeatures"in $))return;const M=$.createQuery();M.outSpatialReference=r,M.objectIds=[v],M.returnGeometry=!0;const{features:k}=await $.queryFeatures(M);m=(c=k[0])==null?void 0:c.geometry}if(!m||m.type==="mesh")return;m=sg(m,r),MU||(MU=await Promise.all([de(()=>import("./intersectsOperator-DR0qWay3.js").then($=>$.i),__vite__mapDeps([301,241,239,242,243,244,246,302,245])),de(()=>import("./proximityOperator-CdHCeVZd.js").then($=>$.p),__vite__mapDeps([303,239,242,241,243,244,246,304,245]))]));const[b,x]=MU;if(!b.execute(m,s)){const $=x.getNearestCoordinate(m,s).coordinate??s;this.selectedFeature===h&&(this.location=$)}}catch(h){In(h)||Ie.getLogger(this).error(h)}else this.location=BH(this.selectedFeature.geometry)??s})}initialize(){this.addHandles([this.on("view-change",()=>this._autoClose()),be(()=>[this.highlightEnabled,this.selectedFeature,this.visible,this.view],()=>this._highlightSelectedFeature()),be(()=>[this.highlightEnabled,this.activeFeature,this.visible,this.view],()=>this._highlightActiveFeature()),be(()=>{var e,i;return(i=(e=this.view)==null?void 0:e.animation)==null?void 0:i.state},e=>this._animationStateChange(e)),be(()=>this.location,e=>this._locationChange(e)),be(()=>this.selectedFeature,e=>this._selectedFeatureChange(e)),be(()=>[this.selectedFeatureIndex,this.featureCount,this.featuresPerPage],()=>this._selectedFeatureIndexChange()),be(()=>[this.featurePage,this.selectedFeatureIndex,this.featureCount,this.featuresPerPage,this.featureViewModels],()=>this._setGraphicOnFeatureViewModels()),be(()=>this.featureViewModels,()=>this._featureViewModelsChange()),this.on("trigger-action",e=>xot({event:e,viewModel:this,view:this.view})),cn(()=>!this.waitingForResult,()=>this._waitingForResultChange(),Nd),be(()=>[this.features,this.map,this.spatialReference,this.timeZone],()=>this._updateFeatureVMs()),be(()=>{var e;return(e=this.view)==null?void 0:e.scale},()=>this._viewScaleChange()),cn(()=>!this.visible,()=>this.browseClusterEnabled=!1),be(()=>this.browseClusterEnabled,e=>e?this.enableClusterBrowsing():this.disableClusterBrowsing())])}destroy(){this._cancelFetchingFeatures(),this._pendingPromises.clear(),this.browseClusterEnabled=!1,this.view=null,this.map=null,this.spatialReference=null,this.timeZone=null}get active(){return!(!this.visible||this.waitingForResult)}get allActions(){const e=this._get("allActions")||new dw;e.removeAll();const{actions:i,defaultActions:r,defaultPopupTemplateEnabled:n,includeDefaultActions:s,selectedFeature:a}=this,o=s?r.concat(i):i,l=a&&(typeof a.getEffectivePopupTemplate=="function"&&a.getEffectivePopupTemplate(n)||a.popupTemplate),c=l==null?void 0:l.actions,h=l!=null&&l.overwriteActions?c:(c==null?void 0:c.concat(o))??o;return h==null||h.filter(Boolean).forEach(m=>e.add(m)),e}get defaultActions(){const e=this._get("defaultActions")||new dw;return e.removeAll(),e.addMany(O0(this.selectedFeature)?Cot():Mot()),e}get featureCount(){return this.features.length}set features(e){const i=e||[];this._set("features",i);const{pendingPromisesCount:r,promiseCount:n,selectedFeatureIndex:s}=this,a=n&&i.length;this.initialDisplayMode!=="list"?a&&r&&s===-1?this.selectedFeatureIndex=0:a&&s!==-1||(this.selectedFeatureIndex=i.length?0:-1):(!a||a&&r===n)&&(this.selectedFeatureIndex=-1)}set location(e){var s,a;let i=e;const r=(s=this.spatialReference)==null?void 0:s.isWebMercator;((a=e==null?void 0:e.spatialReference)==null?void 0:a.isWGS84)&&r&&(i=Dm(e)),this._set("location",i)}get map(){var e;return((e=this.view)==null?void 0:e.map)??null}set map(e){this._override("map",e)}get pendingPromisesCount(){return this._pendingPromises.size}get promiseCount(){return this.promises.length}get promises(){return this._get("promises")||[]}set promises(e){this._pendingPromises.clear(),this.features=[],Array.isArray(e)&&e.length?(this._set("promises",e),(e=e.slice()).forEach(i=>this._pendingPromises.add(i)),e.reduce((i,r)=>i.finally(()=>r.then(n=>{this._pendingPromises.has(r)&&this._updateFeatures(n)}).finally(()=>this._pendingPromises.delete(r)).catch(()=>{})),Promise.resolve())):this._set("promises",[])}get screenLocation(){return super.screenLocation}get selectedFeature(){const{features:e,selectedFeatureIndex:i}=this;return i===-1?null:e[i]||null}get selectedFeatureIndex(){const e=this._get("selectedFeatureIndex");return typeof e=="number"?e:-1}set selectedFeatureIndex(e){const{featureCount:i}=this;(isNaN(e)||e<0||!i)&&(e=-1),this.activeFeature=null,this._set("selectedFeatureIndex",e)}get selectedFeatureViewModel(){return this.featureViewModels[this.selectedFeatureIndex]||null}get spatialReference(){var e;return((e=this.view)==null?void 0:e.spatialReference)??null}set spatialReference(e){this._override("spatialReference",e)}get state(){const{view:e,map:i}=this;return e?e.ready?"ready":"disabled":i?"ready":"disabled"}get timeZone(){var e;return((e=this.view)==null?void 0:e.timeZone)??Rl}set timeZone(e){this._overrideIfSome("timeZone",e)}get waitingForContents(){return this.featureViewModels.some(e=>e.waitingForContent)}get waitingForResult(){return!(!(this._fetchFeaturesController||this.pendingPromisesCount>0)||this.featureCount!==0)}centerAtLocation(){const{view:e}=this,i=MSe(this);return i&&e?this.callGoTo({target:{target:i,scale:e.scale}}):Promise.reject(new ae("center-at-location:invalid-target-or-view","Cannot center at a location without a target and view.",{target:i,view:e}))}zoomTo(e){return this.callGoTo(e)}clear(){this.set({promises:[],features:[],content:null,title:null,location:null,activeFeature:null})}fetchFeatures(e,i){var n;const{view:r}=this;if(!r||!e)throw new ae("fetch-features:invalid-screenpoint-or-view","Cannot fetch features without a screenPoint and view.",{screenPoint:e,view:r});return r.fetchPopupFeatures(e,{pointerType:(n=i==null?void 0:i.event)==null?void 0:n.pointerType,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,signal:i==null?void 0:i.signal})}open(e){const i={updateLocationEnabled:!1,promises:[],fetchFeatures:!1,...e,visible:!0},{fetchFeatures:r}=i;delete i.fetchFeatures,r&&this._setFetchFeaturesPromises(i.location);const n=["actionsMenuOpen","collapsed"];for(const s of n)delete i[s];this.set(i)}triggerAction(e){const i=this.allActions.at(e);i&&!i.disabled&&this.emit("trigger-action",{action:i})}next(){return this.selectedFeatureIndex=this._getRoundRobinIndex(this.selectedFeatureIndex+1,this.featureCount),this}previous(){return this.selectedFeatureIndex=this._getRoundRobinIndex(this.selectedFeatureIndex-1,this.featureCount),this}disableClusterBrowsing(){Iot(this),this._clearBrowsedClusterGraphics()}async enableClusterBrowsing(){const{view:e,selectedFeature:i}=this;(e==null?void 0:e.type)==="2d"?O0(i)?(await Sot(this),await Tot(this)):Ie.getLogger(this).warn("enableClusterBrowsing:invalid-selectedFeature: Selected feature must represent an aggregate/cluster graphic.",i):Ie.getLogger(this).warn("enableClusterBrowsing:invalid-view: View must be 2d MapView.",i)}async handleViewClick(e){return this._fetchFeaturesAndOpen(e)}_getRoundRobinIndex(e,i){return(e+i)%i}_animationStateChange(e){this.zoomToLocation||(cv.disabled=e==="waiting-for-target")}_clearBrowsedClusterGraphics(){var i,r;const e=[this.selectedClusterBoundaryFeature,this._selectedClusterFeature].filter(ln);(r=(i=this.view)==null?void 0:i.graphics)==null||r.removeMany(e),this._selectedClusterFeature=null,this.selectedClusterBoundaryFeature.geometry=null}_viewScaleChange(){if(O0(this.selectedFeature))return this.browseClusterEnabled=!1,this.visible=!1,void this.clear();this.browseClusterEnabled&&(this.features=this.selectedFeature?[this.selectedFeature]:[])}_locationChange(e){const{selectedFeature:i,updateLocationEnabled:r,view:n}=this;n&&r&&e&&(!i||i.geometry)&&this.centerAtLocation()}_selectedFeatureIndexChange(){this.featurePage=this.featureCount>0?Math.floor(this.selectedFeatureIndex/this.featuresPerPage)+1:null}_featureViewModelsChange(){this.featurePage=this.featureCount>0?1:null}_setGraphicOnFeatureViewModels(){const{features:e,featureCount:i,featurePage:r,featuresPerPage:n,featureViewModels:s}=this;if(r==null)return;const a=((r-1)*n+i)%i,o=a+n;s.slice(a,o).forEach((l,c)=>{l&&(l.graphic??(l.graphic=e[a+c]))})}async _selectedFeatureChange(e){var a,o;const{location:i,updateLocationEnabled:r,view:n}=this;if(!e||!n)return;if(this.browseClusterEnabled)return this._selectedClusterFeature&&(n.graphics.remove(this._selectedClusterFeature),this._selectedClusterFeature=null),O0(e)?void 0:(e.symbol=await Yle(e),this._selectedClusterFeature=e,void n.graphics.add(this._selectedClusterFeature));const s=(a=e.sourceLayer)==null?void 0:a.type;if(s!=="map-image"&&s!=="imagery"&&s!=="imagery-tile"||(e.symbol=await Yle(e)),!r&&i||!e.geometry){if(r&&!e.geometry){await this.centerAtLocation();const l=(o=n.center)==null?void 0:o.clone();l&&(this.location=l)}}else this.location=BH(e.geometry)}_waitingForResultChange(){!this.featureCount&&this.promises&&(this.visible=!1)}async _setFetchFeaturesPromises(e){const{pendingFeatures:i}=await this._fetchFeaturesWithController({mapPoint:e});this.promises=i}_destroyFeatureVMs(){this.featureViewModels.forEach(e=>e&&!e.destroyed&&e.destroy()),this._set("featureViewModels",[])}_updateFeatureVMs(){const{selectedFeature:e,features:i,featureViewModels:r,view:n,spatialReference:s,map:a,timeZone:o,location:l}=this;if(O0(i[0])||(this.browseClusterEnabled=!1),this._destroyFeatureVMs(),!(i!=null&&i.length))return;const c=r.slice(),h=[];i.forEach((m,g)=>{if(!m)return;let v=null;if(c.some((b,x)=>(b&&b.graphic===m&&(v=b,c.splice(x,1)),!!v)),v)h[g]=v;else{const b=new Vi({abilities:this.featureViewModelAbilities,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,spatialReference:s,graphic:m===e?m:null,location:l,map:a,view:n,timeZone:o});h[g]=b}}),c.forEach(m=>m&&!m.destroyed&&m.destroy()),this._set("featureViewModels",h)}async _getScreenPoint(e,i){const{spatialReference:r,view:n}=this;if(!n)return null;await(n==null?void 0:n.when());const s=e==null?void 0:e.spatialReference;return s&&r?(await DD(s,r,null,i),n.toScreen(e)):null}_cancelFetchingFeatures(){const e=this._fetchFeaturesController;e&&e.abort(),this._fetchFeaturesController=null}async _projectScreenPointAndFetchFeatures({mapPoint:e,screenPoint:i,event:r,signal:n}){return this.fetchFeatures(i??await this._getScreenPoint(e??this.location,{signal:n}),{signal:n,event:r})}_fetchFeaturesWithController({mapPoint:e,screenPoint:i,event:r}){this._cancelFetchingFeatures();const n=new AbortController,{signal:s}=n;this._fetchFeaturesController=n;const a=this._projectScreenPointAndFetchFeatures({mapPoint:e,screenPoint:i,signal:s,event:r});return a.catch(()=>{}).then(()=>{this._fetchFeaturesController=null}),a}async _fetchFeaturesAndOpen(e){const{mapPoint:i,screenPoint:r}=e;this.removeHandles(IU),this.addHandles([be(()=>{var s;return(s=this.view)==null?void 0:s.scale},()=>this._debouncedLocationUpdate(i).catch(s=>{In(s)||Ie.getLogger(this).error(s)})),cn(()=>!this.visible,()=>{this.removeHandles(IU)},{once:!0})],IU);const{pendingFeatures:n}=await this._fetchFeaturesWithController({mapPoint:i,screenPoint:r,event:e});return{location:i??void 0,promises:n}}_autoClose(){this.autoCloseEnabled&&(this.visible=!1)}async _getLayerView(e,i){return await e.when(),e.whenLayerView(i)}_getHighlightLayer(e){const{layer:i,sourceLayer:r}=e;return r&&"layer"in r&&r.layer?r.layer:(r==null?void 0:r.type)==="map-notes"||(r==null?void 0:r.type)==="subtype-group"?r:i??r}_getHighlightLayerView(e,i){return i.type==="subtype-sublayer"&&i.parent&&this._mapIncludesLayer(i.parent)?this._getLayerView(e,i.parent):i&&this._mapIncludesLayer(i)?this._getLayerView(e,i):null}_getHighlightTarget(e,i,r){if(Eot(i.type,r))return e;const n=e.getObjectId();if(n!=null)return n;const s=i.type==="imagery"?void 0:"objectIdField"in i?i.objectIdField||eat:null,a=e.attributes;return a&&s&&a[s]||e}_mapIncludesLayer(e){var i,r;return!!((r=(i=this.map)==null?void 0:i.allLayers)!=null&&r.includes(e))}async _highlightFeature(e,i){this.removeHandles(e);const r=this[i];if(!r)return;const{highlightEnabled:n,view:s,visible:a}=this;if(!s||!n||!a)return;const o=this._getHighlightLayer(r);if(!o)return;const l=this._getHighlightLayerView(s,o);if(!l)return;this._highlightPromises[e]=l;const c=await l;if(!(c&&vot(c)&&this._highlightPromises[e]===l&&this[i]&&this.highlightEnabled))return;const h=c.highlight(this._getHighlightTarget(r,o,s.type));this.addHandles(h,e)}async _highlightActiveFeature(){return this._highlightFeature("highlight-active-feature","activeFeature")}async _highlightSelectedFeature(){return this._highlightFeature("highlight-selected-feature","selectedFeature")}_updateFeatures(e){const{features:i}=this,r=e.filter(n=>!i.includes(n));r!=null&&r.length&&(this.features=i.concat(r))}};d([f()],Zt.prototype,"_fetchFeaturesController",void 0),d([f({type:dw})],Zt.prototype,"actions",void 0),d([f({readOnly:!0})],Zt.prototype,"active",null),d([f()],Zt.prototype,"activeFeature",void 0),d([f({readOnly:!0})],Zt.prototype,"allActions",null),d([f()],Zt.prototype,"autoCloseEnabled",void 0),d([f()],Zt.prototype,"browseClusterEnabled",void 0),d([f()],Zt.prototype,"content",void 0),d([f({type:dw,readOnly:!0})],Zt.prototype,"defaultActions",null),d([f({type:Boolean})],Zt.prototype,"defaultPopupTemplateEnabled",void 0),d([f({readOnly:!0})],Zt.prototype,"featureCount",null),d([f()],Zt.prototype,"featurePage",void 0),d([f({value:[]})],Zt.prototype,"features",null),d([f()],Zt.prototype,"featuresPerPage",void 0),d([f()],Zt.prototype,"featureMenuOpen",void 0),d([f()],Zt.prototype,"featureMenuTitle",void 0),d([f()],Zt.prototype,"featureViewModelAbilities",void 0),d([f({readOnly:!0})],Zt.prototype,"featureViewModels",void 0),d([f()],Zt.prototype,"highlightEnabled",void 0),d([f()],Zt.prototype,"includeDefaultActions",void 0),d([f()],Zt.prototype,"initialDisplayMode",void 0),d([f({type:St})],Zt.prototype,"location",null),d([f()],Zt.prototype,"map",null),d([f({readOnly:!0})],Zt.prototype,"pendingPromisesCount",null),d([f({readOnly:!0})],Zt.prototype,"promiseCount",null),d([f()],Zt.prototype,"promises",null),d([f({readOnly:!0})],Zt.prototype,"selectedClusterBoundaryFeature",void 0),d([f({value:null,readOnly:!0})],Zt.prototype,"selectedFeature",null),d([f({value:-1})],Zt.prototype,"selectedFeatureIndex",null),d([f({readOnly:!0})],Zt.prototype,"selectedFeatureViewModel",null),d([f({type:tt})],Zt.prototype,"spatialReference",null),d([f({readOnly:!0})],Zt.prototype,"state",null),d([f()],Zt.prototype,"timeZone",null),d([f()],Zt.prototype,"title",void 0),d([f()],Zt.prototype,"updateLocationEnabled",void 0),d([f()],Zt.prototype,"view",void 0),d([f()],Zt.prototype,"visible",void 0),d([f({readOnly:!0})],Zt.prototype,"waitingForContents",null),d([f({readOnly:!0})],Zt.prototype,"waitingForResult",null),d([f()],Zt.prototype,"zoomFactor",void 0),d([f()],Zt.prototype,"zoomToLocation",void 0),d([f()],Zt.prototype,"centerAtLocation",null),Zt=d([V("esri.widgets.Features.FeaturesViewModel")],Zt);let hc=class extends et{constructor(){super(...arguments),this.actionBar=!0,this.closeButton=!0,this.collapseButton=!1,this.featureMenuHeading=!0,this.featureNavigation=!0,this.featureListLayerTitle=!0,this.flow=!0,this.heading=!0,this.spinner=!0}};d([f({type:Boolean,nonNullable:!0})],hc.prototype,"actionBar",void 0),d([f({type:Boolean,nonNullable:!0})],hc.prototype,"closeButton",void 0),d([f({type:Boolean,nonNullable:!0})],hc.prototype,"collapseButton",void 0),d([f({type:Boolean,nonNullable:!0})],hc.prototype,"featureMenuHeading",void 0),d([f({type:Boolean,nonNullable:!0})],hc.prototype,"featureNavigation",void 0),d([f({type:Boolean,nonNullable:!0})],hc.prototype,"featureListLayerTitle",void 0),d([f({type:Boolean,nonNullable:!0})],hc.prototype,"flow",void 0),d([f({type:Boolean,nonNullable:!0})],hc.prototype,"heading",void 0),d([f({type:Boolean,nonNullable:!0})],hc.prototype,"spinner",void 0),hc=d([V("esri.widgets.Features.FeaturesVisibleElements")],hc);const Jle="selected-index",kot=0,Xle="features-spinner";function Qle(t){return(t==null?void 0:t.declaredClass.startsWith("esri.layers."))??!1}let xi=class extends X$e(da){constructor(e,i){super(e,i),this._featureMenuIntersectionObserverCallback=([r])=>{r!=null&&r.isIntersecting&&this.viewModel.featurePage!=null&&this.viewModel.featurePage++},this._featureMenuIntersectionObserver=new IntersectionObserver(this._featureMenuIntersectionObserverCallback,{root:window.document}),this._featureMenuIntersectionObserverNode=null,this._spinner=null,this._feature=null,this._focusAbortController=null,this._drillInFlowItems=new Ue,this._drillInWidget=new Cy({flowItems:this._drillInFlowItems}),this._rootNode=null,this._rootFlowItemNode=null,this._featureMenuViewportNode=null,this._actionBarMenuNode=null,this.collapsed=!1,this.featureNavigationTop=!1,this.headerActions=new dw,this.headingLevel=2,this.messages=null,this.messagesCommon=null,this.responsiveActionsEnabled=!1,this.viewModel=new Zt,this.visibleElements=new hc,this._previousFeature=()=>{this.viewModel.previous()},this._nextFeature=()=>{this.viewModel.next()},this._handleFeatureBack=()=>{this.initialDisplayMode==="list"?(this.selectedFeatureIndex=-1,this._focusFlowItemNode()):this._openFeatureMenu()},this._handleFeatureMenuBack=()=>{this.initialDisplayMode==="list"?(this.selectedFeatureIndex=-1,this._focusFlowItemNode()):this.featureMenuOpen&&this._closeFeatureMenu()},this._storeRootNode=r=>{this._rootNode=r},this._displaySpinnerThrottled=FE(()=>this._displaySpinner(),kot),this._addSelectedFeatureIndexHandle(),this.addHandles([this._displaySpinnerThrottled,be(()=>{var r;return(r=this.viewModel)==null?void 0:r.active},()=>this._toggleScreenLocationEnabled()),be(()=>{var r;return(r=this.viewModel)==null?void 0:r.active},r=>this._drillInWidget.closed=!r),be(()=>{var r;return(r=this.visibleElements)==null?void 0:r.closeButton},r=>this._drillInWidget.closable=r),be(()=>{var r;return(r=this.visibleElements)==null?void 0:r.spinner},r=>this._spinnerEnabledChange(r)),be(()=>{var r;return(r=this.viewModel)==null?void 0:r.view},(r,n)=>this._viewChange(r,n)),be(()=>{var r,n;return(n=(r=this.viewModel)==null?void 0:r.view)==null?void 0:n.ready},(r,n)=>this._viewReadyChange(r??!1,n??!1)),be(()=>{var r,n;return[(r=this.viewModel)==null?void 0:r.waitingForResult,(n=this.viewModel)==null?void 0:n.location]},()=>{this._hideSpinner(),this._displaySpinnerThrottled()}),be(()=>{var r;return(r=this.viewModel)==null?void 0:r.screenLocation},()=>this._closeOpenActionMenu()),be(()=>{var r;return(r=this.selectedFeatureWidget)==null?void 0:r.viewModel},()=>this._destroyDrillInFlowItemWidgets()),be(()=>this.featureMenuOpen,()=>this._drillInWidget.selectLastFlowItem=this.initialDisplayMode==="list"||!this.featureMenuOpen,Ft),be(()=>{var n;const r=(n=this.selectedFeatureWidget)==null?void 0:n.viewModel;return[r==null?void 0:r.title,r==null?void 0:r.state]},()=>this._setTitleFromFeatureWidget()),be(()=>{var n;const r=(n=this.selectedFeatureWidget)==null?void 0:n.viewModel;return[r==null?void 0:r.content,r==null?void 0:r.state]},()=>this._setContentFromFeatureWidget()),be(()=>{var r;return(r=this.viewModel)==null?void 0:r.featureViewModels},()=>this._featureMenuViewportScrollTop()),be(()=>this._drillInFlowItems.length,()=>this._focusFlowItemNode()),this._drillInWidget.on("close",()=>this.close()),this._drillInWidget.on("exit",()=>this._destroyDrillInFlowItemWidgets()),this._drillInWidget.on("open-feature",({feature:r})=>this._openRelatedFeature(r)),this._drillInWidget.on("zoom-to-feature",({featureWidget:r})=>ESe(this.viewModel,r))])}loadDependencies(){return Promise.all([e$e(),Iu({action:()=>de(()=>Promise.resolve().then(()=>BJ),void 0),"action-bar":()=>de(()=>Promise.resolve().then(()=>gTe),void 0),"action-group":()=>de(()=>Promise.resolve().then(()=>mTe),void 0),button:()=>de(()=>Promise.resolve().then(()=>K5),void 0),icon:()=>de(()=>Promise.resolve().then(()=>TT),void 0),flow:()=>de(()=>Promise.resolve().then(()=>obt),void 0),"flow-item":()=>de(()=>Promise.resolve().then(()=>lMe),void 0),list:()=>de(()=>Promise.resolve().then(()=>RX),void 0),"list-item":()=>de(()=>Promise.resolve().then(()=>AX),void 0),"list-item-group":()=>de(()=>Promise.resolve().then(()=>rbt),void 0),loader:()=>de(()=>Promise.resolve().then(()=>rA),void 0)})])}destroy(){var e,i,r;this._destroyDrillInFlowItemWidgets(),this._destroySelectedFeatureWidget(),this._destroySpinner(),this._unobserveFeatureMenuObserver(),(e=this._featureMenuIntersectionObserver)==null||e.disconnect(),(i=this._drillInWidget)==null||i.destroy(),(r=this._focusAbortController)==null||r.abort()}get _hideActionText(){var i;if(!this.responsiveActionsEnabled)return!1;const e=(i=this.view)==null?void 0:i.widthBreakpoint;return e==="xsmall"||e==="small"||e==="medium"}get _featureNavigationVisible(){return this.viewModel.active&&this.viewModel.featureCount>1&&!!this.viewModel.selectedFeature&&this.visibleElements.featureNavigation}get _isCollapsed(){return this._collapseEnabled&&this.collapsed}get _collapseEnabled(){return this.visibleElements.collapseButton&&(this.initialDisplayMode==="list"||!!this.title&&!!this.content)}get active(){return this.viewModel.active}get content(){return this.viewModel.content}set content(e){this.viewModel.content=e}get icon(){return null}get featureMenuOpen(){return this.viewModel.featureMenuOpen}set featureMenuOpen(e){this.viewModel.featureMenuOpen=e}get featureMenuTitle(){return this.viewModel.featureMenuTitle}set featureMenuTitle(e){this.viewModel.featureMenuTitle=e}get features(){return this.viewModel.features}set features(e){this.viewModel.features=e}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get initialDisplayMode(){return this.viewModel.initialDisplayMode}set initialDisplayMode(e){this.viewModel.initialDisplayMode=e}get location(){return this.viewModel.location}set location(e){this.viewModel.location=e}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get map(){return this.viewModel.map}set map(e){this.viewModel.map=e}get promises(){return this.viewModel.promises}set promises(e){this.viewModel.promises=e}get selectedFeature(){return this.viewModel.selectedFeature}get selectedDrillInFeature(){const e=Array.from(this._drillInFlowItems).at(-1);if(!e)return null;const{flowType:i}=e;return i==="feature-association"||i==="feature-relationship"?e.graphic??null:null}get selectedFeatureIndex(){return this.viewModel.selectedFeatureIndex}set selectedFeatureIndex(e){this.viewModel.selectedFeatureIndex=e}get selectedFeatureWidget(){const{_feature:e,headingLevel:i,_drillInFlowItems:r,timeZone:n,spatialReference:s,map:a}=this,{selectedFeatureViewModel:o}=this.viewModel,l={title:!1};return o?(e?(e.viewModel=o,e.visibleElements=l):this._feature=new yn({flowItems:r,headingLevel:i+1,timeZone:n,spatialReference:s,map:a,viewModel:o,visibleElements:l}),this._feature):null}get spatialReference(){return this.viewModel.spatialReference}set spatialReference(e){this.viewModel.spatialReference=e}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}get timeZone(){return this.viewModel.timeZone}set timeZone(e){this.viewModel.timeZone=e}get updateLocationEnabled(){return this.viewModel.updateLocationEnabled}set updateLocationEnabled(e){this.viewModel.updateLocationEnabled=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}get visible(){return this.viewModel.visible}set visible(e){this.viewModel.visible=e}blur(){var i;const{active:e}=this.viewModel;e?(i=this._rootFlowItemNode)==null||i.blur():Ie.getLogger(this).warn("Features can only be blurred when currently active.")}clear(){return this.viewModel.clear()}close(){this.viewModel.visible=!1}fetchFeatures(e,i){return this.viewModel.fetchFeatures(e,i)}focus(){const{active:e}=this.viewModel;e?this._focusFlowItemNode():Ie.getLogger(this).warn("Features can only be focused when currently active.")}next(){return this.viewModel.next()}open(e){this.removeHandles(Jle);const i={collapsed:(e==null?void 0:e.collapsed)??!1};this.set(i),this.viewModel.open(e),this.addHandles(cn(()=>!this.viewModel.waitingForResult,()=>this._addSelectedFeatureIndexHandle(),{once:!0}))}previous(){return this.viewModel.previous()}triggerAction(e){return this.viewModel.triggerAction(e)}render(){return ue("div",{afterCreate:this._storeRootNode,bind:this,class:this.classes(ss.base,Ht.widget,Ht.panel),onkeydown:this._onMainKeydown},this._renderHeader(),this._renderContentContainer())}_renderFeatureNavigation(){return[this._renderPagination(),this.initialDisplayMode==="list"?this._renderFeaturePaginationText():this._renderFeatureMenuButton()]}_renderHeader(){return this.featureNavigationTop&&this._featureNavigationVisible?ue("div",{class:ss.header,key:"header-actions"},this._renderFeatureNavigation()):null}_renderFooter(){return!this.featureNavigationTop&&this._featureNavigationVisible?ue("div",{class:ss.footer,key:"footer-actions",slot:"footer"},this._renderFeatureNavigation()):null}_renderFeaturePaginationText(){const{messages:e,viewModel:i}=this,{featureCount:r,selectedFeatureIndex:n}=i;return ue("div",{class:ss.paginationText,key:"feature-pagination-text"},Sr(e.pageText,{index:or(n+1),total:or(r)}))}_renderFeatureMenuButton(){const{messages:e,viewModel:i}=this,{featureCount:r,selectedFeatureIndex:n,pendingPromisesCount:s}=i;return ue("calcite-action",{appearance:"solid",bind:this,class:ss.paginationMenuButton,icon:"list",key:"feature-menu-button",label:e.selectFeature,loading:s>0,onclick:this._handlePaginationMenuButton,scale:"s",text:Sr(e.pageText,{index:or(n+1),total:or(r)}),textEnabled:!0,title:e.selectFeature})}_renderPagination(){const{previous:e,next:i}=this.messagesCommon.pagination;return ue("calcite-action-bar",{class:ss.paginationActionBar,expandDisabled:!0,key:"pagination-action-bar",layout:"horizontal",overflowActionsDisabled:!0,scale:"s"},ue("calcite-action-group",{scale:"s"},ue("calcite-action",{appearance:"solid",class:ss.paginationPrevious,icon:"chevron-left",iconFlipRtl:!0,label:e,onclick:this._previousFeature,scale:"s",text:e,title:e}),ue("calcite-action",{appearance:"solid",icon:"chevron-right",iconFlipRtl:!0,label:i,onclick:this._nextFeature,scale:"s",text:i,title:i})))}_renderFeatureMenuItem(e){const{initialDisplayMode:i}=this,{selectedFeatureViewModel:r,featureViewModels:n}=this.viewModel,s=e===r,a=n.indexOf(e);return ue("calcite-list-item",{bind:this,"data-feature-index":a,key:`feature-menu-item-${e.uid}`,onblur:this._removeActiveFeature,onfocus:this._setActiveFeature,onmouseleave:this._removeActiveFeature,onmouseover:this._setActiveFeature,selected:s,onCalciteListItemSelect:this._selectFeature},ue("span",{innerHTML:e.title||this.messagesCommon.untitled,slot:"content"}),i==="list"?ue("calcite-icon",{flipRtl:!0,icon:"chevron-right",scale:"s",slot:"content-end"}):null)}_groupResultsByLayer(){const{featureViewModels:e}=this.viewModel,i=new Map;return e.forEach(r=>{const n=r==null?void 0:r.graphic;if(!n)return;const{layer:s,sourceLayer:a}=n,o=(Qle(s)?s:null)||(Qle(a)?a:null),l=i.get(o)??[];i.set(o,[...l,r])}),i}_renderFeatureMenu(){const{messages:e,viewModel:i}=this,r=this._groupResultsByLayer(),n=this.initialDisplayMode==="list"?"none":"single";return i.featureViewModels.length?ue("calcite-list",{displayMode:"flat",label:e==null?void 0:e.featuresList,selectionAppearance:"icon",selectionMode:n},Array.from(r.keys(),s=>{var l;const a=(l=r.get(s))==null?void 0:l.map(c=>this._renderFeatureMenuItem(c)),o=s?s.title??this.messagesCommon.untitled:null;return this.visibleElements.featureListLayerTitle&&o!==null?ue("calcite-list-item-group",{heading:o,key:(s==null?void 0:s.uid)||"map-graphics"},a):a})):null}_renderHeaderAction(e,i){const r=e.title||"";return e.visible?ue("calcite-action",{active:e.type==="toggle"&&e.value,appearance:"solid",bind:this,"data-action-id":e.id,"data-action-uid":e.uid,disabled:e.disabled,icon:e.icon??void 0,indicator:e.indicator,key:`header-action-${i}`,loading:e.active,onclick:this._triggerHeaderAction,slot:"header-actions-end",text:r,title:r}):null}_renderHeaderActions(){return this.headerActions.map((e,i)=>this._renderHeaderAction(e,i)).toArray()}_renderContentFeature(){const{headingLevel:e,visibleElements:i,_isCollapsed:r,_collapseEnabled:n,featureNavigationTop:s,_drillInFlowItems:a,initialDisplayMode:o,selectedFeature:l,featureMenuOpen:c}=this,{title:h,active:m}=this.viewModel,g=i.heading&&h?h:"";if(o==="list"&&!l)return null;const v=a.length===0&&(o==="list"?!!l:!c);return ue("calcite-flow-item",{afterCreate:this._storeRootFlowItemNode,bind:this,class:this.classes({[ss.contentFeature]:!0,[ss.flowItemCollapsed]:r}),closable:i.closeButton,closed:!m,collapsed:r,collapseDirection:s?"down":"up",collapsible:n,headingLevel:e,key:"root-flow-item",selected:v,onCalciteFlowItemBack:this._handleFeatureBack,onCalciteFlowItemClose:this.close,onCalciteFlowItemToggle:this._handleCollapseToggle},g?ue(IJ,{class:this.classes(ss.featuresHeading,Ht.heading),innerHTML:g,key:"header-content",level:this.headingLevel,slot:"header-content"}):null,this._renderHeaderActions(),this._renderActionBar(),ue("div",{class:this.classes(ss.container,ss.contentContainer)},this._renderContent()),this._renderFooter())}_renderFeatureMenuContainer(){const{viewModel:e,visibleElements:i,featureMenuTitle:r,messages:n,messagesCommon:s,initialDisplayMode:a,featureMenuOpen:o,selectedFeature:l,_collapseEnabled:c,_isCollapsed:h,featureNavigationTop:m,headingLevel:g}=this,{active:v,featureViewModels:b,pendingPromisesCount:x}=e,{featureMenuHeading:$}=i,M=r??n.selectFeature;if(a==="feature"&&!o)return null;const k=a==="list"?!l:o;return ue("calcite-flow-item",{afterCreate:this._storeFeatureMenuFlowItemNode,bind:this,class:this.classes({[ss.flowItemCollapsed]:h}),closable:a==="list"&&i.closeButton,closed:!v,collapsed:a==="list"&&h,collapseDirection:m?"down":"up",collapsible:a==="list"&&c,description:$?Sr(n.total,{total:b.length}):void 0,heading:$?M:void 0,headingLevel:g,key:"feature-menu",loading:e.waitingForContents,selected:k,onCalciteFlowItemBack:A=>{A.preventDefault(),this._handleFeatureMenuBack()},onCalciteFlowItemClose:this.close,onCalciteFlowItemToggle:this._handleCollapseToggle},a==="list"?this._renderHeaderActions():null,x>0?ue("calcite-loader",{class:ss.loader,inline:!0,key:"feature-menu-loader",label:s.loading,slot:"header-actions-end"}):null,ue("div",{class:ss.container},this._renderFeatureMenu()),ue("div",{afterCreate:this._featureMenuIntersectionObserverCreated,bind:this,class:ss.featureMenuObserver}),a==="feature"?ue("calcite-button",{appearance:"transparent",onclick:this._handleFeatureMenuBack,slot:"footer-actions",width:"full"},s.back):null)}_renderContentContainer(){const e=this.initialDisplayMode==="list"?[this._renderFeatureMenuContainer(),this._renderContentFeature(),this._drillInWidget.render()]:[this._renderContentFeature(),this._drillInWidget.render(),this._renderFeatureMenuContainer()];return this.visibleElements.flow?ue("calcite-flow",{key:"content-container"},e):e}_getFallbackIcon(e){const{className:i,icon:r}=e;if(r)return null;const n=Lit({action:e,feature:this.selectedFeature}),s={[ss.icon]:!!i,[ss.actionImage]:!!n};return i&&(s[i]=!0),n||i?ue("span",{"aria-hidden":"true",class:this.classes(ss.icon,s),key:"icon",styles:Oit(n)}):null}_renderActionBar(){var e;return!this._isCollapsed&&this.visibleElements.actionBar&&((e=this.viewModel.allActions)!=null&&e.length)?ue("calcite-action-bar",{expandDisabled:!0,expanded:!this._hideActionText,key:"header-action-bar",scale:"s",slot:"action-bar"},ue("calcite-action-group",{afterCreate:i=>this._actionBarMenuNode=i,overlayPositioning:"fixed",scale:"s"},this._renderActions())):null}_renderActions(){return this.viewModel.allActions.toArray().map((e,i)=>{const r=this._getActionTitle(e);return t$e(e,{key:`action-${i}`,title:r,text:r,textEnabled:!this._hideActionText,onclick:this._triggerAction,bind:this},this._getFallbackIcon(e))})}_renderContent(){var i;const e=(i=this.viewModel)==null?void 0:i.content;return e?typeof e=="string"?ue("div",{class:bn.contentNode,innerHTML:e,key:e}):this.renderNodeContent(e):null}_handleCollapseToggle(){this.collapsed=!this.collapsed}async _openRelatedFeature(e){await e.viewModel.updateGeometry();const i=e.graphic,r=i==null?void 0:i.geometry;if(r==null||i==null)return;this._destroyDrillInFlowItemWidgets(),await this.viewModel.zoomTo({target:r});const n=BH(r);this.open({features:[i],location:n??void 0}),this._focusFlowItemNode()}_handlePaginationMenuButton(){this._updateFeatureMenu()}_openFeatureMenu(){this._updateFeatureMenu(!0)}_closeFeatureMenu(){this._updateFeatureMenu(!1)}_updateFeatureMenu(e=!this.featureMenuOpen){this.featureMenuOpen=e,this._focusFlowItemNode()}async _focusFlowItemNode(){var r,n;(r=this._focusAbortController)==null||r.abort(),this._focusAbortController=new AbortController;const e=this._focusAbortController.signal;await la(FW(e));const i=(n=this._rootNode)==null?void 0:n.querySelector("calcite-flow-item[selected]");S_e(i)}_storeRootFlowItemNode(e){this._rootFlowItemNode=e}_storeFeatureMenuFlowItemNode(e){this._featureMenuViewportNode=e}_setActiveFeature(e){var n;const{viewModel:i}=this,r=e.currentTarget["data-feature-index"];i.activeFeature=((n=i.features)==null?void 0:n[r])||null}_removeActiveFeature(){this.viewModel.activeFeature=null}_selectFeature(e){const i=e.currentTarget["data-feature-index"];isNaN(i)||(this.viewModel.selectedFeatureIndex=i),this.initialDisplayMode==="feature"?this._handleFeatureMenuBack():this._focusFlowItemNode()}_unobserveFeatureMenuObserver(){this._featureMenuIntersectionObserverNode&&this._featureMenuIntersectionObserver.unobserve(this._featureMenuIntersectionObserverNode)}_featureMenuIntersectionObserverCreated(e){this._unobserveFeatureMenuObserver(),this._featureMenuIntersectionObserver.observe(e),this._featureMenuIntersectionObserverNode=e}_getActionTitle(e){const{messages:i,selectedFeature:r,messagesCommon:n}=this,{id:s}=e,a=r==null?void 0:r.attributes,o=e.title??"",l=s==="zoom-to-feature"?Sr(o,{messages:i}):s==="remove-selected-feature"?Sr(o,{messages:n}):s==="zoom-to-clustered-features"||s==="browse-clustered-features"?Sr(o,{messages:i}):e.title;return l&&a?Sr(l,a):l??""}_onMainKeydown(e){const{key:i}=e;i==="ArrowLeft"&&(e.stopPropagation(),this._handleFeatureMenuBack(),this.previous()),i==="ArrowRight"&&(e.stopPropagation(),this._handleFeatureMenuBack(),this.next())}_featureMenuViewportScrollTop(){var e;(e=this._featureMenuViewportNode)==null||e.scrollContentTo({top:0})}_setContentFromFeatureWidget(){const{selectedFeatureWidget:e}=this;e&&(this.viewModel.content=e)}_setTitleFromFeatureWidget(){const{selectedFeatureWidget:e,messagesCommon:i}=this,r=e==null?void 0:e.viewModel;e&&(this.viewModel.title=(r==null?void 0:r.state)==="error"?i==null?void 0:i.errorMessage:(r==null?void 0:r.title)||"")}_addSelectedFeatureIndexHandle(){const e=be(()=>{var i;return(i=this.viewModel)==null?void 0:i.selectedFeatureIndex},(i,r)=>this._selectedFeatureIndexUpdated(i,r));this.addHandles(e,Jle)}_selectedFeatureIndexUpdated(e,i){var n;const{featureCount:r}=this.viewModel;r&&e!==i&&e!==-1&&(this._destroyDrillInFlowItemWidgets(),(n=this._rootFlowItemNode)==null||n.scrollContentTo({top:0}))}_triggerHeaderAction(e){const i=e.currentTarget;if(i.disabled)return;const r=i.dataset.actionUid,n=this.headerActions.find(({uid:s})=>s===r);n&&!n.disabled&&((n==null?void 0:n.type)==="toggle"&&(n.value=!n.value),this.emit("trigger-header-action",{action:n}))}_triggerAction(e){const i=e.currentTarget;if(i.disabled)return;const r=i.dataset.actionUid,{allActions:n}=this.viewModel,s=n.findIndex(o=>o.uid===r),a=n.at(s);a&&a.type==="toggle"&&(a.value=!a.value),this.viewModel.triggerAction(s)}_createSpinner(e){e&&(this._spinner=new b0({view:e}),e.ui.add(this._spinner,{key:Xle,position:"manual",internal:!0}))}_wireUpView(e){var i;this._destroySpinner(),e&&((i=this.visibleElements)!=null&&i.spinner)&&this._createSpinner(e)}_hideSpinner(){const{_spinner:e}=this;e&&(e.location=null,e.hide())}_viewReadyChange(e,i){var r;e?this._wireUpView((r=this.viewModel)==null?void 0:r.view):i&&this.viewModel.clear()}_viewChange(e,i){e&&i&&this.viewModel.clear()}_destroySelectedFeatureWidget(){const{_feature:e}=this;e&&(e.viewModel=null,!e.destroyed&&e.destroy()),this._feature=null}_closeOpenActionMenu(){const{_actionBarMenuNode:e}=this;e&&(e.menuOpen=!1)}_destroyDrillInFlowItemWidgets(){this._drillInFlowItems.drain(e=>{"showAllEnabled"in e.viewModel&&(e.viewModel.showAllEnabled=!1),"activeCategory"in e.viewModel&&(e.viewModel.activeCategory=null),e.viewModel=null,e.destroy()})}_toggleScreenLocationEnabled(){const{viewModel:e}=this;e&&(e.screenLocationEnabled=e.active)}_displaySpinner(){const{_spinner:e}=this;if(!e)return;const{location:i,waitingForResult:r}=this.viewModel;r&&i?e.show({location:i}):e.hide()}_destroySpinner(){var i,r;const{_spinner:e}=this;e&&((r=(i=e.view)==null?void 0:i.ui)==null||r.remove(e,Xle),e.destroy(),this._spinner=null)}_spinnerEnabledChange(e){var i;this._destroySpinner(),e&&this._createSpinner((i=this.viewModel)==null?void 0:i.view)}};d([f()],xi.prototype,"_drillInFlowItems",void 0),d([f()],xi.prototype,"_hideActionText",null),d([f()],xi.prototype,"_featureNavigationVisible",null),d([f()],xi.prototype,"_isCollapsed",null),d([f()],xi.prototype,"_collapseEnabled",null),d([f({readOnly:!0})],xi.prototype,"active",null),d([f()],xi.prototype,"collapsed",void 0),d([f()],xi.prototype,"content",null),d([f()],xi.prototype,"icon",null),d([f()],xi.prototype,"featureMenuOpen",null),d([f()],xi.prototype,"featureMenuTitle",null),d([f()],xi.prototype,"featureNavigationTop",void 0),d([f()],xi.prototype,"features",null),d([f()],xi.prototype,"goToOverride",null),d([f({type:dw})],xi.prototype,"headerActions",void 0),d([f()],xi.prototype,"headingLevel",void 0),d([f()],xi.prototype,"initialDisplayMode",null),d([f()],xi.prototype,"location",null),d([f()],xi.prototype,"label",null),d([f()],xi.prototype,"map",null),d([f(),js("esri/widgets/Features/t9n/Features")],xi.prototype,"messages",void 0),d([f(),js("esri/t9n/common")],xi.prototype,"messagesCommon",void 0),d([f()],xi.prototype,"promises",null),d([f()],xi.prototype,"responsiveActionsEnabled",void 0),d([f({readOnly:!0})],xi.prototype,"selectedFeature",null),d([f({readOnly:!0})],xi.prototype,"selectedDrillInFeature",null),d([f()],xi.prototype,"selectedFeatureIndex",null),d([f({readOnly:!0})],xi.prototype,"selectedFeatureWidget",null),d([f()],xi.prototype,"spatialReference",null),d([f()],xi.prototype,"title",null),d([f()],xi.prototype,"timeZone",null),d([f()],xi.prototype,"updateLocationEnabled",null),d([f()],xi.prototype,"view",null),d([f({type:Zt}),w$e(["triggerAction","trigger-action"])],xi.prototype,"viewModel",void 0),d([f({type:hc,nonNullable:!0})],xi.prototype,"visibleElements",void 0),d([f()],xi.prototype,"visible",null),xi=d([V("esri.widgets.Features")],xi);const lc="esri-popup",Rb=`${lc}--is-docked`,Jn={base:lc,baseHidden:`${lc}--hidden`,main:`${lc}__main-container`,shadow:`${lc}--shadow`,isDocked:Rb,isDockedTopLeft:`${Rb}-top-left`,isDockedTopCenter:`${Rb}-top-center`,isDockedTopRight:`${Rb}-top-right`,isDockedBottomLeft:`${Rb}-bottom-left`,isDockedBottomCenter:`${Rb}-bottom-center`,isDockedBottomRight:`${Rb}-bottom-right`,alignTopCenter:`${lc}--aligned-top-center`,alignBottomCenter:`${lc}--aligned-bottom-center`,alignTopLeft:`${lc}--aligned-top-left`,alignBottomLeft:`${lc}--aligned-bottom-left`,alignTopRight:`${lc}--aligned-top-right`,alignBottomRight:`${lc}--aligned-bottom-right`,pointer:`${lc}__pointer`,pointerDirection:`${lc}__pointer-direction`};let fz=class extends Zt{constructor(e){super(e)}};fz=d([V("esri.widgets.Popup.PopupViewModel")],fz);let ru=class extends et{constructor(){super(...arguments),this.actionBar=!0,this.closeButton=!0,this.collapseButton=!0,this.featureMenuHeading=!0,this.featureNavigation=!0,this.featureListLayerTitle=!0,this.heading=!0,this.spinner=!0}};d([f({type:Boolean,nonNullable:!0})],ru.prototype,"actionBar",void 0),d([f({type:Boolean,nonNullable:!0})],ru.prototype,"closeButton",void 0),d([f({type:Boolean,nonNullable:!0})],ru.prototype,"collapseButton",void 0),d([f({type:Boolean,nonNullable:!0})],ru.prototype,"featureMenuHeading",void 0),d([f({type:Boolean,nonNullable:!0})],ru.prototype,"featureNavigation",void 0),d([f({type:Boolean,nonNullable:!0})],ru.prototype,"featureListLayerTitle",void 0),d([f({type:Boolean,nonNullable:!0})],ru.prototype,"heading",void 0),d([f({type:Boolean,nonNullable:!0})],ru.prototype,"spinner",void 0),ru=d([V("esri.widgets.Popup.PopupVisibleElements")],ru);const Aot=200,Kle={buttonEnabled:!0,position:"auto",breakpoint:{width:544}};let Si=class extends da{constructor(e,i){super(e,i),this._dockAction=new og({id:"popup-dock-action"}),this._featuresWidget=new xi({responsiveActionsEnabled:!0}),this._containerNode=null,this._mainContainerNode=null,this._pointerOffsetInPx=16,this._focusAbortController=null,this.alignment="auto",this.dockEnabled=!1,this.headingLevel=2,this.messages=null,this.viewModel=new fz,this.visibleElements=new ru}initialize(){this.addHandles([be(()=>{var e,i;return[(i=(e=this.viewModel)==null?void 0:e.view)==null?void 0:i.widthBreakpoint,this.dockEnabled]},()=>this._handleDockIcon(),Ft),be(()=>{var e,i;return[this.dockEnabled,(e=this.messages)==null?void 0:e.undock,(i=this.messages)==null?void 0:i.dock]},()=>this._handleDockEnabled(),Ft),be(()=>this.dockOptions,e=>{const{_dockAction:i}=this,r=this._featuresWidget.headerActions;r.remove(i),e.buttonEnabled&&r.add(i)},Ft),be(()=>{var e;return(e=this.viewModel)==null?void 0:e.screenLocation},()=>this._positionContainer()),be(()=>{var e;return[(e=this.viewModel)==null?void 0:e.active,this.dockEnabled]},()=>this._toggleScreenLocationEnabled()),be(()=>{var e,i,r,n,s,a,o;return[(e=this.viewModel)==null?void 0:e.screenLocation,(r=(i=this.viewModel)==null?void 0:i.view)==null?void 0:r.padding,(s=(n=this.viewModel)==null?void 0:n.view)==null?void 0:s.size,(a=this.viewModel)==null?void 0:a.active,(o=this.viewModel)==null?void 0:o.location,this.alignment]},()=>this.reposition()),be(()=>{var e,i;return(i=(e=this.viewModel)==null?void 0:e.view)==null?void 0:i.size},(e,i)=>this._updateDockEnabledForViewSize(e,i)),be(()=>{var e;return(e=this.viewModel)==null?void 0:e.view},(e,i)=>this._viewChange(e,i)),be(()=>{var e,i;return(i=(e=this.viewModel)==null?void 0:e.view)==null?void 0:i.ready},(e,i)=>this._viewReadyChange(e??!1,i??!1)),be(()=>this.viewModel,()=>this._featuresWidget.viewModel=this.viewModel,Ft),be(()=>this._featureNavigationTop,e=>this._featuresWidget.featureNavigationTop=e,Ft),be(()=>this.headingLevel,e=>this._featuresWidget.headingLevel=e,Ft),be(()=>this.visibleElements.actionBar,e=>this._featuresWidget.visibleElements.actionBar=!!e,Ft),be(()=>this.visibleElements.closeButton,e=>this._featuresWidget.visibleElements.closeButton=!!e,Ft),be(()=>this.visibleElements.collapseButton,e=>this._featuresWidget.visibleElements.collapseButton=!!e,Ft),be(()=>this.visibleElements.heading,e=>this._featuresWidget.visibleElements.heading=!!e,Ft),be(()=>this.visibleElements.spinner,e=>this._featuresWidget.visibleElements.spinner=!!e,Ft),be(()=>this.visibleElements.featureNavigation,e=>this._featuresWidget.visibleElements.featureNavigation=!!e,Ft),be(()=>this.visibleElements.featureMenuHeading,e=>this._featuresWidget.visibleElements.featureMenuHeading=!!e,Ft),be(()=>this.visibleElements.featureListLayerTitle,e=>this._featuresWidget.visibleElements.featureListLayerTitle=!!e,Ft),ca(()=>this._featuresWidget,"trigger-header-action",e=>{e.action===this._dockAction&&(this.dockEnabled=!this.dockEnabled)})])}destroy(){var e;this._dockAction.destroy(),this._featuresWidget&&(this._featuresWidget.viewModel=new Zt,this._featuresWidget.destroy()),(e=this._focusAbortController)==null||e.abort()}get _featureNavigationTop(){const{currentAlignment:e,currentDockPosition:i}=this;return e==="bottom-left"||e==="bottom-center"||e==="bottom-right"||i==="top-left"||i==="top-center"||i==="top-right"}get actions(){return this.viewModel.actions}set actions(e){this.viewModel.actions=e}get active(){return this.viewModel.active}get autoCloseEnabled(){return this.viewModel.autoCloseEnabled}set autoCloseEnabled(e){this.viewModel.autoCloseEnabled=e}get defaultPopupTemplateEnabled(){return this.viewModel.defaultPopupTemplateEnabled}set defaultPopupTemplateEnabled(e){this.viewModel.defaultPopupTemplateEnabled=e}get content(){return this.viewModel.content}set content(e){this.viewModel.content=e}get collapsed(){return this._featuresWidget.collapsed}set collapsed(e){this._featuresWidget.collapsed=e}get currentAlignment(){return this._getCurrentAlignment()}get currentDockPosition(){return this._getCurrentDockPosition()}get dockOptions(){return this._get("dockOptions")||Kle}set dockOptions(e){var l,c;const i={...Kle},r=(c=(l=this.viewModel)==null?void 0:l.view)==null?void 0:c.breakpoints,n={};r&&(n.width=r.xsmall,n.height=r.xsmall);const s={...i,...e},a={...i.breakpoint,...n},{breakpoint:o}=s;typeof o=="object"?s.breakpoint={...a,...o}:o&&(s.breakpoint=a),this._set("dockOptions",s),this._setCurrentDockPosition(),this.reposition()}get featureCount(){return this.viewModel.featureCount}get featureMenuOpen(){return this.viewModel.featureMenuOpen}set featureMenuOpen(e){this.viewModel.featureMenuOpen=e}get features(){return this.viewModel.features}set features(e){this.viewModel.features=e}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get highlightEnabled(){return this.viewModel.highlightEnabled}set highlightEnabled(e){this.viewModel.highlightEnabled=e}get icon(){return"popup"}set icon(e){this._overrideIfSome("icon",e)}get initialDisplayMode(){return this.viewModel.initialDisplayMode}set initialDisplayMode(e){this.viewModel.initialDisplayMode=e}get location(){return this.viewModel.location}set location(e){this.viewModel.location=e}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get promises(){return this.viewModel.promises}set promises(e){this.viewModel.promises=e}get selectedFeature(){return this.viewModel.selectedFeature}get selectedDrillInFeature(){return this._featuresWidget.selectedDrillInFeature??null}get selectedFeatureIndex(){return this.viewModel.selectedFeatureIndex}set selectedFeatureIndex(e){this.viewModel.selectedFeatureIndex=e}get selectedFeatureWidget(){return this._featuresWidget.selectedFeatureWidget}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}get updateLocationEnabled(){return this.viewModel.updateLocationEnabled}set updateLocationEnabled(e){this.viewModel.updateLocationEnabled=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}get visible(){return this.viewModel.visible}set visible(e){this.viewModel.visible=e}blur(){const{active:e}=this.viewModel;e||Ie.getLogger(this).warn("Popup can only be blurred when currently active."),this._featuresWidget.blur()}clear(){return this.viewModel.clear()}close(){this.visible=!1}fetchFeatures(e,i){return this.viewModel.fetchFeatures(e,i)}focus(){const{active:e}=this.viewModel;e||Ie.getLogger(this).warn("Popup can only be focused when currently active."),this._handleFocus()}next(){return this.viewModel.next()}open(e){const i=!!e&&!!e.featureMenuOpen,r={collapsed:!!e&&!!e.collapsed,featureMenuOpen:i};this.set(r),this.viewModel.open(e),e!=null&&e.shouldFocus&&this._handleFocus(!0)}previous(){return this.viewModel.previous()}reposition(){this.renderNow(),this._positionContainer(),this._setCurrentAlignment()}triggerAction(e){return this.viewModel.triggerAction(e)}render(){var m,g,v,b;const{dockEnabled:e,currentAlignment:i,currentDockPosition:r}=this,{active:n,screenLocation:s}=this.viewModel,a=n&&e,o=n&&!e,l=(g=(m=this.selectedFeature)==null?void 0:m.layer)==null?void 0:g.title,c=(b=(v=this.selectedFeature)==null?void 0:v.layer)==null?void 0:b.id,h={[Jn.alignTopCenter]:i==="top-center",[Jn.alignBottomCenter]:i==="bottom-center",[Jn.alignTopLeft]:i==="top-left",[Jn.alignBottomLeft]:i==="bottom-left",[Jn.alignTopRight]:i==="top-right",[Jn.alignBottomRight]:i==="bottom-right",[Jn.isDocked]:a,[Jn.shadow]:o,[Jn.isDockedTopLeft]:r==="top-left",[Jn.isDockedTopCenter]:r==="top-center",[Jn.isDockedTopRight]:r==="top-right",[Jn.isDockedBottomLeft]:r==="bottom-left",[Jn.isDockedBottomCenter]:r==="bottom-center",[Jn.isDockedBottomRight]:r==="bottom-right"};return ue("div",{afterCreate:this._positionContainer,afterUpdate:this._positionContainer,"aria-hidden":(!n).toString(),"aria-label":Iv(this.title??""),"aria-modal":"false",bind:this,class:this.classes(Jn.base,h,{[Jn.baseHidden]:!s&&!e}),"data-layer-id":c,"data-layer-title":l,role:"dialog"},n?[this._renderMainContainer(),this._renderPointer()]:null)}_renderPointer(){return this.dockEnabled?null:ue("div",{class:Jn.pointer,key:"popup-pointer",role:"presentation"},ue("div",{class:this.classes(Jn.pointerDirection,Jn.shadow)}))}_renderMainContainer(){const{dockEnabled:e}=this,i={[Jn.shadow]:e};return ue("div",{afterCreate:this._setMainContainerNode,afterUpdate:this._setMainContainerNode,bind:this,class:this.classes(Jn.main,Ht.widget,i)},this._featuresWidget.render())}_getAnimationDurationMS(){const{_containerNode:e}=this;return e?1e3*parseFloat(window.getComputedStyle(e).animationDuration):Aot}async _handleFocus(e=!1){var r;(r=this._focusAbortController)==null||r.abort(),this._focusAbortController=new AbortController;const i=this._focusAbortController.signal;e&&await kT(()=>{var n;return((n=this.viewModel)==null?void 0:n.active)===!0},{signal:i}),await la(FW(i)),await la(Ck(this._getAnimationDurationMS(),i)),this._featuresWidget.focus()}_isOutsideView(e){const{popupHeight:i,popupWidth:r,screenLocation:n,side:s,view:a}=e;if(isNaN(r)||isNaN(i)||!a||!n)return!1;const o=a.padding;return s==="right"&&n.x+r/2>a.width-o.right||s==="left"&&n.x-r/2<o.left||s==="top"&&n.y-i<o.top||s==="bottom"&&n.y+i>a.height-o.bottom}_calculateAutoAlignment(e){if(e!=="auto")return e;const{_pointerOffsetInPx:i,_containerNode:r,_mainContainerNode:n,viewModel:s}=this,{screenLocation:a,view:o}=s;if(a==null||!o||!r)return"top-center";function l(L){return parseInt(L.replaceAll(/[^-\d.]/g,""),10)}const c=n?window.getComputedStyle(n,null):null,h=c?l(c.getPropertyValue("max-height")):0,m=c?l(c.getPropertyValue("height")):0,{height:g,width:v}=r.getBoundingClientRect(),b=v+i,x=Math.max(g,h,m)+i,$=this._isOutsideView({popupHeight:x,popupWidth:b,screenLocation:a,side:"right",view:o}),M=this._isOutsideView({popupHeight:x,popupWidth:b,screenLocation:a,side:"left",view:o}),k=this._isOutsideView({popupHeight:x,popupWidth:b,screenLocation:a,side:"top",view:o}),A=this._isOutsideView({popupHeight:x,popupWidth:b,screenLocation:a,side:"bottom",view:o});return M?k?"bottom-right":"top-right":$?k?"bottom-left":"top-left":k?A?"top-center":"bottom-center":"top-center"}_callCurrentAlignment(e){return typeof e=="function"?e.call(this):e}_getCurrentAlignment(){const{alignment:e,dockEnabled:i,_containerNode:r}=this;return!i&&this.viewModel.active&&r?this._calculatePositionResult(this._calculateAutoAlignment(this._callCurrentAlignment(e))):null}_setCurrentAlignment(){this._set("currentAlignment",this._getCurrentAlignment())}_setCurrentDockPosition(){this._set("currentDockPosition",this._getCurrentDockPosition())}_calculatePositionResult(e){const i=["left","right"];return xp(this.container)&&i.reverse(),e==null?void 0:e.replaceAll(/leading/gi,i[0]).replaceAll(/trailing/gi,i[1])}_callDockPosition(e){return typeof e=="function"?e.call(this):e}_getDockPosition(){var e;return this._calculatePositionResult(this._calculateAutoDockPosition(this._callDockPosition((e=this.dockOptions)==null?void 0:e.position)))}_getCurrentDockPosition(){return this.dockEnabled&&this.viewModel.active?this._getDockPosition():null}_calculateAutoDockPosition(e){var o;if(e!=="auto")return e;const i=(o=this.viewModel)==null?void 0:o.view,r=xp(this.container)?"top-left":"top-right";if(!i)return r;const n=i.padding||{left:0,right:0},s=i.width-n.left-n.right,{breakpoints:a}=i;return a&&s<=a.xsmall?"bottom-center":r}_getDockIcon(){const e=this._getDockPosition();if(this.dockEnabled)return"minimize";switch(e){case"top-left":case"bottom-left":return"dock-left";case"top-center":return"maximize";case"bottom-center":return"dock-bottom";default:return"dock-right"}}_handleDockIcon(){this._dockAction.icon=this._getDockIcon()}_handleDockEnabled(){var e,i;this._dockAction.title=this.dockEnabled?(e=this.messages)==null?void 0:e.undock:(i=this.messages)==null?void 0:i.dock}_setMainContainerNode(e){this._mainContainerNode=e}_positionContainer(e=this._containerNode){if(e&&(this._containerNode=e),!this._containerNode)return;const{screenLocation:i}=this.viewModel,{width:r}=this._containerNode.getBoundingClientRect(),n=this._calculatePositionStyle(i,r);n&&Object.assign(this._containerNode.style,n)}_calculateFullWidth(e){const{currentAlignment:i,_pointerOffsetInPx:r}=this;return i==="top-left"||i==="bottom-left"||i==="top-right"||i==="bottom-right"?e+r:e}_calculateAlignmentPosition(e,i,r,n){const{currentAlignment:s,_pointerOffsetInPx:a}=this;if(!r)return;const{padding:o}=r,l=n/2,c=r.height-i,h=r.width-e;return s==="bottom-center"?{top:i+a-o.top,left:e-l-o.left}:s==="top-left"?{bottom:c+a-o.bottom,right:h+a-o.right}:s==="bottom-left"?{top:i+a-o.top,right:h+a-o.right}:s==="top-right"?{bottom:c+a-o.bottom,left:e+a-o.left}:s==="bottom-right"?{top:i+a-o.top,left:e+a-o.left}:s==="top-center"?{bottom:c+a-o.bottom,left:e-l-o.left}:void 0}_calculatePositionStyle(e,i){const{dockEnabled:r,view:n}=this;if(!n)return;if(r)return{left:"",top:"",right:"",bottom:""};if(e==null||!i)return;const s=this._calculateFullWidth(i),a=this._calculateAlignmentPosition(e.x,e.y,n,s);return a?{top:a.top!==void 0?`${a.top}px`:"auto",left:a.left!==void 0?`${a.left}px`:"auto",bottom:a.bottom!==void 0?`${a.bottom}px`:"auto",right:a.right!==void 0?`${a.right}px`:"auto"}:void 0}_viewChange(e,i){e&&i&&(this.close(),this.clear())}_viewReadyChange(e,i){e?this._wireUpView():i&&(this.close(),this.clear())}_wireUpView(){this._setDockEnabledForViewSize(this.dockOptions)}_dockingThresholdCrossed(e,i,r){const[n,s]=e,[a,o]=i,{width:l=0,height:c=0}=r??{};return n<=l&&a>l||n>l&&a<=l||s<=c&&o>c||s>c&&o<=c}_updateDockEnabledForViewSize(e,i){var h,m;if(!e||!i)return;const r=((m=(h=this.viewModel)==null?void 0:h.view)==null?void 0:m.padding)||{left:0,right:0,top:0,bottom:0},n=r.left+r.right,s=r.top+r.bottom,a=[],o=[];a[0]=e[0]-n,a[1]=e[1]-s,o[0]=i[0]-n,o[1]=i[1]-s;const{dockOptions:l}=this,c=l.breakpoint;this._dockingThresholdCrossed(a,o,c)&&this._setDockEnabledForViewSize(l),this._setCurrentDockPosition()}_toggleScreenLocationEnabled(){const{dockEnabled:e,viewModel:i}=this;if(!i)return;const r=i.active&&!e;i.screenLocationEnabled=r}_shouldDockAtCurrentViewSize(e){var l,c;const i=e.breakpoint,r=(c=(l=this.viewModel)==null?void 0:l.view)==null?void 0:c.ui;if(!r)return!1;const{width:n,height:s}=r;if(isNaN(n)||isNaN(s)||!i)return!1;const a=i.hasOwnProperty("width")&&n<=(i.width??0),o=i.hasOwnProperty("height")&&s<=(i.height??0);return a||o}_setDockEnabledForViewSize(e){e.breakpoint&&(this.dockEnabled=this._shouldDockAtCurrentViewSize(e))}};d([f()],Si.prototype,"_containerNode",void 0),d([f({readOnly:!0})],Si.prototype,"_featureNavigationTop",null),d([f()],Si.prototype,"actions",null),d([f({readOnly:!0})],Si.prototype,"active",null),d([f()],Si.prototype,"alignment",void 0),d([f()],Si.prototype,"autoCloseEnabled",null),d([f()],Si.prototype,"defaultPopupTemplateEnabled",null),d([f()],Si.prototype,"content",null),d([f()],Si.prototype,"collapsed",null),d([f({readOnly:!0})],Si.prototype,"currentAlignment",null),d([f({readOnly:!0})],Si.prototype,"currentDockPosition",null),d([f()],Si.prototype,"dockOptions",null),d([f()],Si.prototype,"dockEnabled",void 0),d([f({readOnly:!0})],Si.prototype,"featureCount",null),d([f()],Si.prototype,"featureMenuOpen",null),d([f()],Si.prototype,"features",null),d([f()],Si.prototype,"goToOverride",null),d([f()],Si.prototype,"headingLevel",void 0),d([f()],Si.prototype,"highlightEnabled",null),d([f()],Si.prototype,"icon",null),d([f()],Si.prototype,"initialDisplayMode",null),d([f()],Si.prototype,"location",null),d([f()],Si.prototype,"label",null),d([f(),js("esri/widgets/Popup/t9n/Popup")],Si.prototype,"messages",void 0),d([f()],Si.prototype,"promises",null),d([f({readOnly:!0})],Si.prototype,"selectedFeature",null),d([f({readOnly:!0})],Si.prototype,"selectedDrillInFeature",null),d([f()],Si.prototype,"selectedFeatureIndex",null),d([f({readOnly:!0})],Si.prototype,"selectedFeatureWidget",null),d([f()],Si.prototype,"title",null),d([f()],Si.prototype,"updateLocationEnabled",null),d([f()],Si.prototype,"view",null),d([f({type:fz}),w$e(["triggerAction","trigger-action"])],Si.prototype,"viewModel",void 0),d([f()],Si.prototype,"visible",null),d([f({type:ru,nonNullable:!0})],Si.prototype,"visibleElements",void 0),Si=d([V("esri.widgets.Popup")],Si);const kSe=Si,ece=Object.freeze(Object.defineProperty({__proto__:null,default:kSe},Symbol.toStringTag,{value:"Module"})),Pot="U.S. Presidential Election Trends (2000-2024)",Oot="6e7cf1cccdbd4711b9c79d568d8c108b",Lot="1005219944034967a285bfef7d1dec32",Fot="1c13f94b20a74d0499c4d15b16034c3b",tce=new Yt({spatialReference:{wkid:102006},xmin:-1.7497685309133371e6,ymin:44367.01071232185,xmax:1671745042054886e-9,ymax:2871867810595784e-9}),ice=new Yt({spatialReference:{wkid:102006},xmin:-827832.6722244895,ymin:-3.3164732355820592e6,xmax:-31490.98511627532,ymax:-2796639078719753e-9}),Rot=2311162,zot=2311162,ASe=18489200,mz=[2008,2012,2016,2020,2024],PSe=mz[0],OSe=mz[mz.length-1],Not=new sr({geometry:new St({longitude:-98.5795,latitude:39.8283}),attributes:{ObjectID:1776,state:`U.S. Presidential Election Results ${PSe}-${OSe}`,dem_2000:50999897,rep_2000:48885097,oth_2000:3458956,rep_ev_2000:271,dem_ev_2000:266,dem_2004:59028444,rep_2004:62040610,oth_2004:2529916,rep_ev_2004:286,dem_ev_2004:251,dem_2008:69498516,rep_2008:59948323,oth_2008:2352485,rep_ev_2008:173,dem_ev_2008:365,dem_2012:65915795,rep_2012:60933504,oth_2012:2345950,rep_ev_2012:206,dem_ev_2012:332,dem_2016:65853514,rep_2016:62984828,oth_2016:750884,rep_ev_2016:304,dem_ev_2016:227,dem_2020:81268856,rep_2020:74216752,oth_2020:2922155,rep_ev_2020:232,dem_ev_2020:306,dem_2024:75019257,rep_2024:77303573,oth_2024:3101635,rep_ev_2024:312,dem_ev_2024:226}}),gc={2e3:{republican:{candidate:"Bush",electoralVotes:271},democrat:{candidate:"Gore",electoralVotes:266},other:{candidate:"Other",electoralVotes:0}},2004:{republican:{candidate:"Bush",electoralVotes:286},democrat:{candidate:"Kerry",electoralVotes:251},other:{candidate:"Other",electoralVotes:0}},2008:{republican:{candidate:"McCain",electoralVotes:173},democrat:{candidate:"Obama",electoralVotes:365},other:{candidate:"Other",electoralVotes:0}},2012:{republican:{candidate:"Romney",electoralVotes:206},democrat:{candidate:"Obama",electoralVotes:332},other:{candidate:"Other",electoralVotes:0}},2016:{republican:{candidate:"Trump",electoralVotes:304},democrat:{candidate:"Clinton",electoralVotes:227},other:{candidate:"Other",electoralVotes:0}},2020:{republican:{candidate:"Trump",electoralVotes:232},democrat:{candidate:"Biden",electoralVotes:306},other:{candidate:"Other",electoralVotes:0}},2024:{republican:{candidate:"Trump",electoralVotes:312},democrat:{candidate:"Harris",electoralVotes:226},other:{candidate:"Other",electoralVotes:0}}},NE={title:{state:"{state}",county:"{county} County, {state}",country:`U.S. Presidential Election Results ${PSe}-${OSe}`}},LSe="style='background-color: rgba(60, 108, 204, 0.08);'",FSe="style='background-color: rgba(220, 75, 0, 0.08);'",RSe="style='background-color: rgba(224, 206, 0, 0.08);'",zSe="style='margin: 0 auto; width: 100%; height: 100%; text-align: center;'",dr="style='text-align: right; padding: 3px;'",fi="style='padding: 3px;'",V2="style='margin: 0 auto;'",U2="style='text-align: center; font-weight: bold;'",Ts=new Se("rgba(220, 75, 0, 1)"),Is=new Se("rgba(60, 108, 204,1)"),oa=new Se("rgba(181, 166, 0, 1)"),hr=new Se("#f7f7f7"),pr=1,DE=Ts.toJSON(),jE=Is.toJSON(),VE=oa.toJSON(),z5="SUM_",Xn=[{value:0,size:8},{value:1e5,size:10},{value:5e5,size:15},{value:4e6,size:20},{value:12e6,size:50}],Qn=[{value:0,size:2},{value:1e4,size:4},{value:1e5,size:8},{value:5e5,size:16},{value:2e6,size:32}],Kn=[{value:0,size:2},{value:1e4,size:4},{value:1e5,size:8},{value:5e5,size:16},{value:2e6,size:32}],es=[{value:0,size:6},{value:.1,size:12},{value:1,size:24},{value:2,size:32},{value:3,size:50}],ts=[{value:0,size:3},{value:1e3,size:6},{value:5e3,size:10},{value:1e4,size:14},{value:5e4,size:20}],XO=t=>`
    var dem = $feature.SUM_dem_${t};
    var rep = $feature.SUM_rep_${t};
    var oth = $feature.SUM_oth_${t};
    var all = [dem, rep, oth];
  `,CU=t=>`
    var dem = $feature.dem_${t};
    var rep = $feature.rep_${t};
    var oth = $feature.oth_${t};
    var all = [dem, rep, oth];
  `,EU=t=>`
    var demNext = $feature.dem_${t};
    var repNext = $feature.rep_${t};
    var othNext = $feature.oth_${t};
    var allNext = Sum([demNext, repNext, othNext]);
  `,bF=t=>{const e=t,i=t-4;return`
    var demNext = $feature.dem_${e};
    var repNext = $feature.rep_${e};
    var othNext = $feature.oth_${e};
    var allNext = Sum([demNext, repNext, othNext]);

    var demPrevious = $feature.dem_${i};
    var repPrevious = $feature.rep_${i};
    var othPrevious = $feature.oth_${i};
    var allPrevious = Sum([demPrevious, repPrevious, othPrevious]);


    var percentNext = (votesNext / allNext) * 100;
    var percentPrevious = (votesPrevious / allPrevious) * 100;
    var shift = percentNext - percentPrevious;
  `},kU=t=>`
    ${bF(t)}

    var shiftText = IIF(shift > 0, Text(shift, '+#,###.0'), Text(shift, '#,###.0'));
    return shiftText + "%";
  `,AU=t=>`
    var demNext = $feature.SUM_dem_${t};
    var repNext = $feature.SUM_rep_${t};
    var othNext = $feature.SUM_oth_${t};
    var allNext = Sum([demNext, repNext, othNext]);
  `,wF=t=>{const e=t,i=t-4;return`
    var demNext = $feature.SUM_dem_${e};
    var repNext = $feature.SUM_rep_${e};
    var othNext = $feature.SUM_oth_${e};
    var allNext = Sum([demNext, repNext, othNext]);

    var demPrevious = $feature.SUM_dem_${i};
    var repPrevious = $feature.SUM_rep_${i};
    var othPrevious = $feature.SUM_oth_${i};
    var allPrevious = Sum([demPrevious, repPrevious, othPrevious]);


    var percentNext = (votesNext / allNext) * 100;
    var percentPrevious = (votesPrevious / allPrevious) * 100;
    var shift = percentNext - percentPrevious;
  `},PU=t=>`
    ${wF(t)}

    var shiftText = IIF(shift > 0, Text(shift, '+#,###.0'), Text(shift, '#,###.0'));
    return shiftText + "%";
  `,Q$=`
  var share = (votes / allNext);
  return Text(share, '##.0%');
`,du=`
  var diff = votesNext - votesPrevious;
  var change = ( (votesNext - votesPrevious) / votesPrevious );
  var diffText = IIF(diff > 0, Text(diff, '+#,###'), Text(diff, '#,###'));
  var changeText = IIF(change > 0, Text(change, '#,###.#%'), Text(abs(change), '#,###.#%'));
`,K$=`
  var diff = votesNext - votesPrevious;
  var change = ( (votesNext - votesPrevious) / votesPrevious );
  return IIF(diff > 0, "green", "red");
`,eS=`
  return IIF(shift > 0, "green", "red");
`,fr=`
  var change = valueNext - valuePrevious;
  IIF(change > 0, Text(change, '+#,###'), Text(change, '#,###'));
`,Dot=`
  var scaleFactorBase = ( ${ASe} / $view.scale );
  var scaleFactor = When(
    scaleFactorBase >= 1, 1,  // 1
    scaleFactorBase >= 0.5, scaleFactorBase * 1,  // 0.6
    scaleFactorBase >= 0.25, scaleFactorBase * 1,  // 0.45
    scaleFactorBase >= 0.125, scaleFactorBase * 1,  // 0.3125
    scaleFactorBase * 1  // 0.1875
  );
`,jot=`
  var sizeFactor = When(
    value >= ${Qn[4].value}, ${Qn[4].size},
    value >= ${Qn[3].value}, ${Qn[3].size} + (${bu(Qn[3],Qn[4])} * (value - ${Qn[3].value})),
    value >= ${Qn[2].value}, ${Qn[2].size} + (${bu(Qn[2],Qn[3])} * (value - ${Qn[2].value})),
    value >= ${Qn[1].value}, ${Qn[1].size} + (${bu(Qn[1],Qn[2])} * (value - ${Qn[1].value})),
    value > ${Qn[0].value}, ${Qn[0].size} + (${bu(Qn[0],Qn[1])} * value),
    0
  );
`,j1=`
  ${jot}

  ${Dot}
  return sizeFactor * scaleFactor;
`;`${Xn[4].value}${Xn[4].size}${Xn[3].value}${Xn[3].size}${bu(Xn[3],Xn[4])}${Xn[3].value}${Xn[2].value}${Xn[2].size}${bu(Xn[2],Xn[3])}${Xn[2].value}${Xn[1].value}${Xn[1].size}${bu(Xn[1],Xn[2])}${Xn[1].value}${Xn[0].value}${Xn[0].size}${bu(Xn[0],Xn[1])}`;const Vot=`
  var sizeFactor = When(
    percentStateVotes >= ${es[4].value}, ${es[4].size},
    percentStateVotes >= ${es[3].value}, ${es[3].size} + (${bu(es[3],es[4])} * (percentStateVotes - ${es[3].value})),
    percentStateVotes >= ${es[2].value}, ${es[2].size} + (${bu(es[2],es[3])} * (percentStateVotes - ${es[2].value})),
    percentStateVotes >= ${es[1].value}, ${es[1].size} + (${bu(es[1],es[2])} * (percentStateVotes - ${es[1].value})),
    percentStateVotes > ${es[0].value}, ${es[0].size} + (${bu(es[0],es[1])} * percentStateVotes),
    0
  );
`,Uot=`
  var scaleFactorBase = Round( ${zot} / $view.scale, 1 );
  var scaleFactor = When(
    scaleFactorBase >= 8, scaleFactorBase / 6,
    scaleFactorBase >= 4, scaleFactorBase / 3,  // 1
    scaleFactorBase >= 2, scaleFactorBase / 1.7,
    scaleFactorBase >= 1, scaleFactorBase,  // 1
    scaleFactorBase >= 0.5, scaleFactorBase * 1.2,  // 0.6
    scaleFactorBase >= 0.25, scaleFactorBase * 1.2,  // 0.45
    scaleFactorBase >= 0.125, scaleFactorBase * 2.5,  // 0.3125
    scaleFactorBase * 3  // 0.1875
  );
`,V1=`
  ${Vot}

  ${Uot}
  return sizeFactor * scaleFactor;
`;function bu(t,e){const i=e.size-t.size,r=e.value-t.value;return i/r}const Bot=t=>{const e=t,i=t-4;return new lg({title:`${NE.title.state}`,fieldInfos:[new Ss({fieldName:`SUM_dem_${i}`,label:`${i} Democrat votes`,format:new $n({places:0,digitSeparator:!0})}),new Ss({fieldName:`SUM_rep_${i}`,label:`${i} Republican votes`,format:new $n({places:0,digitSeparator:!0})}),new Ss({fieldName:`SUM_oth_${i}`,label:`${i} Other votes`,format:new $n({places:0,digitSeparator:!0})}),new Ss({fieldName:`SUM_dem_${e}`,label:`${e} Democrat votes`,format:new $n({places:0,digitSeparator:!0})}),new Ss({fieldName:`SUM_rep_${e}`,label:`${e} Republican votes`,format:new $n({places:0,digitSeparator:!0})}),new Ss({fieldName:`SUM_oth_${e}`,label:`${e} Other votes`,format:new $n({places:0,digitSeparator:!0})})],content:[new xu({text:`
          <span style='color: {expression/winner-color}; font-weight:bolder;'>{expression/winner}</span>
          won ${NE.title.state}'s <strong>{ev_${e}}</strong> electoral votes by a margin of <span style='color: {expression/winner-color}; font-weight:bolder;'>{expression/winner-margin-votes}</span> votes (<span style='color: {expression/winner-color}; font-weight:bolder;'>{expression/winner-margin}</span> points).
          The {expression/winner-votes} votes cast for {expression/winner} comprise
          {expression/winner-percent-state-votes} of the total votes cast in the state.
        `}),new xu({text:`
          <div ${zSe}>
            Votes in ${e} and the change from ${i}
            <br/>
            <br/>
            <table ${V2}>
              <tr ${U2}><td ${fi}>Party</td><td ${fi}>Votes</td><td ${fi}>+/-</td><td ${fi}>%</td><td ${fi}>+/-</td><td ${fi}>% Change</td></tr>

              <tr ${LSe}>
                <td ${fi}><span style='color:${Is}; font-weight:bolder;'>${gc[e].democrat.candidate}</span></td>
                <td ${dr}>{SUM_dem_${e}}</td>
                <td ${dr}><span style='color: {expression/dem-change-color}'>{expression/dem${i}diff${e}}</span></td>

                <td ${dr}>{expression/demShare${e}}</td>
                <td ${dr}><span style='color: {expression/dem-shift-color};'>{expression/dem${i}shift${e}}</span></td>

                <td ${dr}><span style='color: {expression/dem-change-color};'>{expression/dem${i}change${e}}</span></td>
              </tr>


              <tr ${FSe}><td ${fi}><span style='color:${Ts}; font-weight:bolder'>${gc[e].republican.candidate}</span></td><td ${dr}>{SUM_rep_${e}}</td><td ${dr}><span style='color: {expression/rep-change-color}'>{expression/rep${i}diff${e}}</span></td>

              <td ${dr}>{expression/repShare${e}}</td>
              <td ${dr}><span style='color: {expression/rep-shift-color}'>{expression/rep${i}shift${e}}</span></td>

              <td ${dr}><span style='color: {expression/rep-change-color}'>{expression/rep${i}change${e}}</span></td></tr>


              <tr ${RSe}><td ${fi}><span style='color:${oa}; font-weight:bolder'>${gc[e].other.candidate}</span></td><td ${dr}>{SUM_oth_${e}}</td><td ${dr}><span style='color: {expression/oth-change-color}'>{expression/oth${i}diff${e}}</span></td>

              <td ${dr}>{expression/othShare${e}}</td>
              <td ${dr}><span style='color: {expression/oth-shift-color}'>{expression/oth${i}shift${e}}</span></td>

              <td ${dr}><span style='color: {expression/oth-change-color}'>{expression/oth${i}change${e}}</span></td></tr>
            </table>
          </div>
        `})],expressionInfos:[new Gt({title:"winner % of state votes",name:"winner-percent-state-votes",expression:`
          ${XO(e)}

          var winnerTotal = Max(all);
          return Text(winnerTotal/Sum(all), "#%");
        `}),new Gt({title:"winner votes",name:"winner-votes",expression:`
          ${XO(e)}

          return Text(Max(all), "#,###");
        `}),new Gt({title:"winner-color",name:"winner-color",expression:`
          ${XO(e)}

          Decode( Max(all),
            dem, "${Is}",
            rep, "${Ts}",
            oth, "${oa}",
          "#000000"
          );
        `}),new Gt({title:"winner",name:"winner",expression:`
          ${XO(e)}

          Decode( Max(all),
            dem, "${gc[e].democrat.candidate}",
            rep, "${gc[e].republican.candidate}",
            oth, "${gc[e].other.candidate}",
          "tie"
          );
        `}),new Gt({title:`Democrat change from ${i}`,name:`dem${i}change${e}`,expression:`
          var votesNext = $feature.SUM_dem_${e};
          var votesPrevious = $feature.SUM_dem_${i};
          ${du}
          return changeText;
        `}),new Gt({title:`Republican change from ${i}`,name:`rep${i}change${e}`,expression:`
          var votesNext = $feature.SUM_rep_${e}
          var votesPrevious = $feature.SUM_rep_${i}
          ${du}
          return changeText;
        `}),new Gt({title:`Other change from ${i}`,name:`oth${i}change${e}`,expression:`
          var votesNext = $feature.SUM_oth_${e};
          var votesPrevious = $feature.SUM_oth_${i};
          ${du}
          return changeText;
        `}),new Gt({title:`Democrat diff from ${i}`,name:`dem${i}diff${e}`,expression:`
          var votesNext = $feature.SUM_dem_${e};
          var votesPrevious = $feature.SUM_dem_${i};
          ${du}
          return diffText;
        `}),new Gt({title:`Republican diff from ${i}`,name:`rep${i}diff${e}`,expression:`
          var votesNext = $feature.SUM_rep_${e}
          var votesPrevious = $feature.SUM_rep_${i}
          ${du}
          return diffText;
        `}),new Gt({title:`Other diff from ${i}`,name:`oth${i}diff${e}`,expression:`
          var votesNext = $feature.SUM_oth_${e};
          var votesPrevious = $feature.SUM_oth_${i};
          ${du}
          return diffText;
        `}),new Gt({title:`Republican shift from ${i}`,name:`rep${i}shift${e}`,expression:`
          var votesNext = $feature.SUM_rep_${e}
          var votesPrevious = $feature.SUM_rep_${i}

          ${PU(e)}
        `}),new Gt({title:`Democrat shift from ${i}`,name:`dem${i}shift${e}`,expression:`
          var votesNext = $feature.SUM_dem_${e};
          var votesPrevious = $feature.SUM_dem_${i};

          ${PU(e)}
        `}),new Gt({title:`Other shift from ${i}`,name:`oth${i}shift${e}`,expression:`
          var votesNext = $feature.SUM_oth_${e};
          var votesPrevious = $feature.SUM_oth_${i};

          ${PU(e)}
        `}),new Gt({title:`Republican share ${e}`,name:`repShare${e}`,expression:`
          ${AU(e)}

          var votes = $feature.SUM_rep_${e}

          ${Q$}
        `}),new Gt({title:`Democrat share ${e}`,name:`demShare${e}`,expression:`
          ${AU(e)}

          var votes = $feature.SUM_dem_${e};

          ${Q$}
        `}),new Gt({title:`Other share ${e}`,name:`othShare${e}`,expression:`
          ${AU(e)}

          var votes = $feature.SUM_oth_${e};

          ${Q$}
        `}),new Gt({title:"shift-color",name:"dem-shift-color",expression:`
          var votesNext = $feature.SUM_dem_${e};
          var votesPrevious = $feature.SUM_dem_${i};
          ${wF(e)}
          ${eS}
        `}),new Gt({title:"shift-color",name:"rep-shift-color",expression:`
          var votesNext = $feature.SUM_rep_${e}
          var votesPrevious = $feature.SUM_rep_${i}
          ${wF(e)}
          ${eS}
        `}),new Gt({title:"shift-color",name:"oth-shift-color",expression:`
          var votesNext = $feature.SUM_oth_${e};
          var votesPrevious = $feature.SUM_oth_${i};
          ${wF(e)}
          ${eS}
        `}),new Gt({title:"change-color",name:"dem-change-color",expression:`
          var votesNext = $feature.SUM_dem_${e};
          var votesPrevious = $feature.SUM_dem_${i};
          ${K$}
        `}),new Gt({title:"change-color",name:"rep-change-color",expression:`
          var votesNext = $feature.SUM_rep_${e}
          var votesPrevious = $feature.SUM_rep_${i}
          ${K$}
        `}),new Gt({title:"change-color",name:"oth-change-color",expression:`
          var votesNext = $feature.SUM_oth_${e};
          var votesPrevious = $feature.SUM_oth_${i};
          ${K$}
        `}),new Gt({title:"winner-margin",name:"winner-margin",expression:`
          var fields = [
            $feature.SUM_dem_${e},
            $feature.SUM_rep_${e},
            $feature.SUM_oth_${e}
          ];

          var top2 = Top(Reverse(Sort(fields)), 2);
          var winner = First(top2);
          var secondPlace = top2[1];
          var total = Sum(fields);
          return Text( (winner - secondPlace) / total, "#.#%");
        `}),new Gt({title:"winner-margin-votes",name:"winner-margin-votes",expression:`
          var fields = [
            $feature.SUM_dem_${e},
            $feature.SUM_rep_${e},
            $feature.SUM_oth_${e}
          ];

          var top2 = Top(Reverse(Sort(fields)), 2);
          var winner = First(top2);
          var secondPlace = top2[1];
          return Text( (winner - secondPlace), "#,###");
        `})]})},qot=t=>{const e=t,i=t-4;return new lg({title:`${NE.title.county}`,fieldInfos:[new Ss({fieldName:`dem_${i}`,label:`${i} Democrat votes`,format:new $n({places:0,digitSeparator:!0})}),new Ss({fieldName:`rep_${i}`,label:`${i} Republican votes`,format:new $n({places:0,digitSeparator:!0})}),new Ss({fieldName:`oth_${i}`,label:`${i} Other votes`,format:new $n({places:0,digitSeparator:!0})}),new Ss({fieldName:`dem_${e}`,label:`${e} Democrat votes`,format:new $n({places:0,digitSeparator:!0})}),new Ss({fieldName:`rep_${e}`,label:`${e} Republican votes`,format:new $n({places:0,digitSeparator:!0})}),new Ss({fieldName:`oth_${e}`,label:`${e} Other votes`,format:new $n({places:0,digitSeparator:!0})})],content:[new xu({text:`
          <span style='color: {expression/winner-color}; font-weight:bolder'>{expression/winner}</span>
          won ${NE.title.county} by a margin of
          <span style='color: {expression/winner-color}; font-weight:bolder'>{expression/winner-margin-votes}</span> votes (<span style='color: {expression/winner-color}; font-weight:bolder'>{expression/winner-margin}</span> points).
          The {expression/winner-votes} votes cast for {expression/winner} comprise
          {expression/winner-percent-state-votes} of the total votes cast in the state.
        `}),new xu({text:`
          <div ${zSe}>
            Votes in ${e} and the change from ${i}
            <br/>
            <br/>
            <table ${V2}>
              <tr ${U2}><td ${fi}>Party</td><td ${fi}>Votes</td><td ${fi}>+/-</td><td ${fi}>%</td><td ${fi}>+/-</td><td ${fi}>% Change</td></tr>

              <tr ${LSe}><td ${fi}><span style='color:${Is}; font-weight:bolder'>${gc[e].democrat.candidate}</span></td><td ${dr}>{${`dem_${e}`}}</td><td ${dr}><span style='color: {expression/dem-change-color}'>{expression/dem${i}diff${e}}</span></td>

              <td ${dr}>{expression/demShare${e}}</td>
              <td ${dr}><span style='color: {expression/dem-shift-color}'>{expression/dem${i}shift${e}}</span></td>

              <td ${dr}><span style='color: {expression/dem-change-color}'>{expression/dem${i}change${e}}</span></td></tr>


              <tr ${FSe}><td ${fi}><span style='color:${Ts}; font-weight:bolder'>${gc[e].republican.candidate}</span></td><td ${dr}>{${`rep_${e}`}}</td><td ${dr}><span style='color: {expression/rep-change-color}'>{expression/rep${i}diff${e}}</span></td>

              <td ${dr}>{expression/repShare${e}}</td>
              <td ${dr}><span style='color: {expression/rep-shift-color}'>{expression/rep${i}shift${e}}</span></td>

              <td ${dr}><span style='color: {expression/rep-change-color}'>{expression/rep${i}change${e}}</span></td></tr>


              <tr ${RSe}><td ${fi}><span style='color:${oa}; font-weight:bolder'>${gc[e].other.candidate}</span></td><td ${dr}>{${`oth_${e}`}}</td><td ${dr}><span style='color: {expression/oth-change-color}'>{expression/oth${i}diff${e}}</span></td>

              <td ${dr}>{expression/othShare${e}}</td>
              <td ${dr}><span style='color: {expression/oth-shift-color}'>{expression/oth${i}shift${e}}</span></td>

              <td ${dr}><span style='color: {expression/oth-change-color}'>{expression/oth${i}change${e}}</span></td></tr>
            </table>
          </div>
        `})],expressionInfos:[new Gt({title:"winner % of state votes",name:"winner-percent-state-votes",expression:`
          var dem = $feature.dem_${e};
          var rep = $feature.rep_${e};
          var oth = $feature.oth_${e};
          var all = [dem, rep, oth];

          var winnerTotal = Max(all);
          return Text(winnerTotal/$feature.TOTAL_STATE_VOTES_${e}, "#%");
        `}),new Gt({title:"winner votes",name:"winner-votes",expression:`
          ${CU(e)}

          return Text(Max(all), "#,###");
        `}),new Gt({title:"winner-color",name:"winner-color",expression:`
          ${CU(e)}

          Decode( Max(all),
            dem, "${Is}",
            rep, "${Ts}",
            oth, "${oa}",
          "#000000"
          );
        `}),new Gt({title:"winner",name:"winner",expression:`
          ${CU(e)}

          Decode( Max(all),
            dem, "${gc[e].democrat.candidate}",
            rep, "${gc[e].republican.candidate}",
            oth, "${gc[e].other.candidate}",
          "tie"
          );
        `}),new Gt({title:`Democrat change from ${i}`,name:`dem${i}change${e}`,expression:`
          var votesNext = $feature.dem_${e};
          var votesPrevious = $feature.dem_${i};
          ${du}
          return changeText;
        `}),new Gt({title:`Republican change from ${i}`,name:`rep${i}change${e}`,expression:`
          var votesNext = $feature.rep_${e};
          var votesPrevious = $feature.rep_${i};
          ${du}
          return changeText;
        `}),new Gt({title:`Other change from ${i}`,name:`oth${i}change${e}`,expression:`
          var votesNext = $feature.oth_${e};
          var votesPrevious = $feature.oth_${i};
          ${du}
          return changeText;
        `}),new Gt({title:`Democrat diff from ${i}`,name:`dem${i}diff${e}`,expression:`
          var votesNext = $feature.dem_${e};
          var votesPrevious = $feature.dem_${i};
          ${du}
          return diffText;
        `}),new Gt({title:`Republican diff from ${i}`,name:`rep${i}diff${e}`,expression:`
          var votesNext = $feature.rep_${e};
          var votesPrevious = $feature.rep_${i};
          ${du}
          return diffText;
        `}),new Gt({title:`Other diff from ${i}`,name:`oth${i}diff${e}`,expression:`
          var votesNext = $feature.oth_${e};
          var votesPrevious = $feature.oth_${i};
          ${du}
          return diffText;
        `}),new Gt({title:`Republican shift from ${i}`,name:`rep${i}shift${e}`,expression:`
          var votesNext = $feature.rep_${e};
          var votesPrevious = $feature.rep_${i};

          ${kU(e)}
        `}),new Gt({title:`Democrat shift from ${i}`,name:`dem${i}shift${e}`,expression:`
          var votesNext = $feature.dem_${e};
          var votesPrevious = $feature.dem_${i};

          ${kU(e)}
        `}),new Gt({title:`Other shift from ${i}`,name:`oth${i}shift${e}`,expression:`
          var votesNext = $feature.oth_${e};
          var votesPrevious = $feature.oth_${i};

          ${kU(e)}
        `}),new Gt({title:`Republican share ${e}`,name:`repShare${e}`,expression:`
          ${EU(e)}

          var votes = $feature.rep_${e};

          ${Q$}
        `}),new Gt({title:`Democrat share ${e}`,name:`demShare${e}`,expression:`
          ${EU(e)}

          var votes = $feature.dem_${e};

          ${Q$}
        `}),new Gt({title:`Other share ${e}`,name:`othShare${e}`,expression:`
          ${EU(e)}

          var votes = $feature.oth_${e};

          ${Q$}
        `}),new Gt({title:"shift-color",name:"dem-shift-color",expression:`
          var votesNext = $feature.dem_${e};
          var votesPrevious = $feature.dem_${i};
          ${bF(e)}
          ${eS}
        `}),new Gt({title:"shift-color",name:"rep-shift-color",expression:`
          var votesNext = $feature.rep_${e};
          var votesPrevious = $feature.rep_${i};
          ${bF(e)}
          ${eS}
        `}),new Gt({title:"shift-color",name:"oth-shift-color",expression:`
          var votesNext = $feature.oth_${e};
          var votesPrevious = $feature.oth_${i};
          ${bF(e)}
          ${eS}
        `}),new Gt({title:"change-color",name:"dem-change-color",expression:`
          var votesNext = $feature.dem_${e};
          var votesPrevious = $feature.dem_${i};
          ${K$}
        `}),new Gt({title:"change-color",name:"rep-change-color",expression:`
          var votesNext = $feature.rep_${e};
          var votesPrevious = $feature.rep_${i};
          ${K$}
        `}),new Gt({title:"change-color",name:"oth-change-color",expression:`
          var votesNext = $feature.oth_${e};
          var votesPrevious = $feature.oth_${i};
          ${K$}
        `}),new Gt({title:"winner-margin",name:"winner-margin",expression:`
          var fields = [
            $feature.dem_${e},
            $feature.rep_${e},
            $feature.oth_${e}
          ];

          var top2 = Top(Reverse(Sort(fields)), 2);
          var winner = First(top2);
          var secondPlace = top2[1];
          var total = Sum(fields);
          return Text( (winner - secondPlace) / total, "#.#%");
        `}),new Gt({title:"winner-margin-votes",name:"winner-margin-votes",expression:`
          var fields = [
            $feature.dem_${e},
            $feature.rep_${e},
            $feature.oth_${e}
          ];

          var top2 = Top(Reverse(Sort(fields)), 2);
          var winner = First(top2);
          var secondPlace = top2[1];
          return Text( (winner - secondPlace), "#,###");
        `})]})},Hot=t=>{const{level:e,year:i}=t;return e==="state"?Bot(i):qot(i)},Got={rings:[[[8.5,.2],[7.06,.33],[5.66,.7],[4.35,1.31],[3.16,2.14],[2.14,3.16],[1.31,4.35],[.7,5.66],[.33,7.06],[.2,8.5],[.33,9.94],[.7,11.34],[1.31,12.65],[2.14,13.84],[3.16,14.86],[4.35,15.69],[5.66,16.3],[7.06,16.67],[8.5,16.8],[9.94,16.67],[11.34,16.3],[12.65,15.69],[13.84,14.86],[14.86,13.84],[15.69,12.65],[16.3,11.34],[16.67,9.94],[16.8,8.5],[16.67,7.06],[16.3,5.66],[15.69,4.35],[14.86,3.16],[13.84,2.14],[12.65,1.31],[11.34,.7],[9.94,.33],[8.5,.2]]]};function hu(t){const{primitiveName:e,color:i,donutEnabled:r,anchorPoint:n,outline:s}=t,a=r?{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",enable:!0,color:i,width:2.4}]}:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:i}]};return s&&s.color&&a.symbolLayers.push({type:"CIMSolidStroke",enable:!0,color:s.color,width:1}),{type:"CIMVectorMarker",enable:!0,anchorPoint:n,anchorPointUnits:"Relative",primitiveName:e,frame:{xmin:0,ymin:0,xmax:17,ymax:17},markerGraphics:[{type:"CIMMarkerGraphic",geometry:Got,symbol:a}],scaleSymbolsProportionally:!0,respectFrame:!0}}function Wot(t){const e=t,i=t-4;return new aa({symbol:new zs({data:{type:"CIMSymbolReference",symbol:{type:"CIMPointSymbol",symbolLayers:[hu({primitiveName:"democrat-positive-votes",anchorPoint:{x:.5,y:0},color:jE,donutEnabled:!1}),hu({primitiveName:"democrat-negative-votes",anchorPoint:{x:.5,y:0},color:jE,donutEnabled:!0}),hu({primitiveName:"republican-positive-votes",anchorPoint:{x:-.5,y:0},color:DE,donutEnabled:!1}),hu({primitiveName:"republican-negative-votes",anchorPoint:{x:-.5,y:0},color:DE,donutEnabled:!0}),hu({primitiveName:"other-positive-votes",anchorPoint:{x:0,y:-.75},color:VE,donutEnabled:!1}),hu({primitiveName:"other-negative-votes",anchorPoint:{x:0,y:-.75},color:VE,donutEnabled:!0})]},primitiveOverrides:[{type:"CIMPrimitiveOverride",primitiveName:"democrat-positive-votes",propertyName:"Size",valueExpressionInfo:{type:"CIMExpressionInfo",title:"Increase in Democrat votes",expression:`
                var votesNext = $feature.SUM_dem_${e};
                var votesPrevious = $feature.SUM_dem_${i};
                var change = votesNext - votesPrevious;
                var value = IIF( change > 0, change, 0);
                ${j1}
              `,returnType:"Default"}},{type:"CIMPrimitiveOverride",primitiveName:"democrat-negative-votes",propertyName:"Size",valueExpressionInfo:{type:"CIMExpressionInfo",title:"Decrease in Democrat votes",expression:`
                var votesNext = $feature.SUM_dem_${e};
                var votesPrevious = $feature.SUM_dem_${i};
                var change = votesNext - votesPrevious;
                var value = IIF( change < 0, Abs(change), 0);
                ${j1}
              `,returnType:"Default"}},{type:"CIMPrimitiveOverride",primitiveName:"republican-positive-votes",propertyName:"Size",valueExpressionInfo:{type:"CIMExpressionInfo",title:"Increase in Republican votes",expression:`
                var valueNext = $feature.SUM_rep_${e};
                var valuePrevious = $feature.SUM_rep_${i};
                var change = valueNext - valuePrevious;
                var value = IIF( change > 0, change, 0);
                ${j1}
              `,returnType:"Default"}},{type:"CIMPrimitiveOverride",primitiveName:"republican-negative-votes",propertyName:"Size",valueExpressionInfo:{type:"CIMExpressionInfo",title:"Decrease in Republican votes",expression:`
                var valueNext = $feature.SUM_rep_${e};
                var valuePrevious = $feature.SUM_rep_${i};
                var change = valueNext - valuePrevious;
                var value = IIF( change < 0, Abs(change), 0);
                ${j1}
              `,returnType:"Default"}},{type:"CIMPrimitiveOverride",primitiveName:"other-positive-votes",propertyName:"Size",valueExpressionInfo:{type:"CIMExpressionInfo",title:"Increase in Other votes",expression:`
                var valueNext = $feature.SUM_oth_${e};
                var valuePrevious = $feature.SUM_oth_${i};
                var change = valueNext - valuePrevious;
                var value = IIF( change > 0, change, 0);
                ${j1}
              `,returnType:"Default"}},{type:"CIMPrimitiveOverride",primitiveName:"other-negative-votes",propertyName:"Size",valueExpressionInfo:{type:"CIMExpressionInfo",title:"Decrease in Other votes",expression:`
                var valueNext = $feature.SUM_oth_${e};
                var valuePrevious = $feature.SUM_oth_${i};
                var change = valueNext - valuePrevious;
                var value = IIF( change < 0, Abs(change), 0);
                ${j1}
              `,returnType:"Default"}}]}})})}function Zot(t){const e=t,i=t-4;return new aa({symbol:new zs({data:{type:"CIMSymbolReference",symbol:{type:"CIMPointSymbol",symbolLayers:[hu({primitiveName:"democrat-positive-votes",anchorPoint:{x:.5,y:0},color:jE,donutEnabled:!1}),hu({primitiveName:"democrat-negative-votes",anchorPoint:{x:.5,y:0},color:jE,donutEnabled:!0}),hu({primitiveName:"republican-positive-votes",anchorPoint:{x:-.5,y:0},color:DE,donutEnabled:!1}),hu({primitiveName:"republican-negative-votes",anchorPoint:{x:-.5,y:0},color:DE,donutEnabled:!0}),hu({primitiveName:"other-positive-votes",anchorPoint:{x:0,y:-.75},color:VE,donutEnabled:!1}),hu({primitiveName:"other-negative-votes",anchorPoint:{x:0,y:-.75},color:VE,donutEnabled:!0})]},primitiveOverrides:[{type:"CIMPrimitiveOverride",primitiveName:"democrat-positive-votes",propertyName:"Size",valueExpressionInfo:{type:"CIMExpressionInfo",title:"Increase in Democrat votes",expression:`
                var votesNext = $feature.dem_${e};
                var votesPrevious = $feature.dem_${i};
                var change = votesNext - votesPrevious;
                var value = IIF( change > 0, change, 0);
                var percentStateVotes = ( value / $feature.TOTAL_STATE_VOTES_${e} ) * $feature.ev_${e};
                ${V1}
              `,returnType:"Default"}},{type:"CIMPrimitiveOverride",primitiveName:"democrat-negative-votes",propertyName:"Size",valueExpressionInfo:{type:"CIMExpressionInfo",title:"Decrease in Democrat votes",expression:`
                var votesNext = $feature.dem_${e};
                var votesPrevious = $feature.dem_${i};
                var change = votesNext - votesPrevious;
                var value = IIF( change < 0, Abs(change), 0);
                var percentStateVotes = ( value / $feature.TOTAL_STATE_VOTES_${e} ) * $feature.ev_${e};
                ${V1}
              `,returnType:"Default"}},{type:"CIMPrimitiveOverride",primitiveName:"republican-positive-votes",propertyName:"Size",valueExpressionInfo:{type:"CIMExpressionInfo",title:"Increase in Republican votes",expression:`
                var valueNext = $feature.rep_${e};
                var valuePrevious = $feature.rep_${i};
                var change = valueNext - valuePrevious;
                var value = IIF( change > 0, change, 0);
                var percentStateVotes = ( value / $feature.TOTAL_STATE_VOTES_${e} ) * $feature.ev_${e};
                ${V1}
              `,returnType:"Default"}},{type:"CIMPrimitiveOverride",primitiveName:"republican-negative-votes",propertyName:"Size",valueExpressionInfo:{type:"CIMExpressionInfo",title:"Decrease in Republican votes",expression:`
                var valueNext = $feature.rep_${e};
                var valuePrevious = $feature.rep_${i};
                var change = valueNext - valuePrevious;
                var value = IIF( change < 0, Abs(change), 0);
                var percentStateVotes = ( value / $feature.TOTAL_STATE_VOTES_${e} ) * $feature.ev_${e};
                ${V1}
              `,returnType:"Default"}},{type:"CIMPrimitiveOverride",primitiveName:"other-positive-votes",propertyName:"Size",valueExpressionInfo:{type:"CIMExpressionInfo",title:"Increase in Other votes",expression:`
                var valueNext = $feature.oth_${e};
                var valuePrevious = $feature.oth_${i};
                var change = valueNext - valuePrevious;
                var value = IIF( change > 0, change, 0);
                var percentStateVotes = ( value / $feature.TOTAL_STATE_VOTES_${e} ) * $feature.ev_${e};
                ${V1}
              `,returnType:"Default"}},{type:"CIMPrimitiveOverride",primitiveName:"other-negative-votes",propertyName:"Size",valueExpressionInfo:{type:"CIMExpressionInfo",title:"Decrease in Other votes",expression:`
                var valueNext = $feature.oth_${e};
                var valuePrevious = $feature.oth_${i};
                var change = valueNext - valuePrevious;
                var value = IIF( change < 0, Abs(change), 0);
                var percentStateVotes = ( value / $feature.TOTAL_STATE_VOTES_${e} ) * $feature.ev_${e};
                ${V1}
              `,returnType:"Default"}}]}})})}const Yot=t=>{const{level:e,year:i}=t;return e==="state"?Wot(i):Zot(i)},yo=.8,vo=.8,bo=12244700,wo=577791,Jot=t=>{const e=t,i=t-4;return[new Lt({minScale:bo,where:`ABS(SUM_dem_${e} - SUM_dem_${i}) >= 500000`,labelExpressionInfo:{expression:`
          var valueNext = $feature.SUM_dem_${e};
          var valuePrevious = $feature.SUM_dem_${i};
          ${fr}
        `},deconflictionStrategy:"none",symbol:new Et({font:new li({weight:"bold",family:"Noto Sans",size:"10pt"}),haloColor:new Se(hr),haloSize:pr,color:new Se(Is),xoffset:-50*yo,yoffset:-25*vo})}),new Lt({minScale:bo,where:`ABS(SUM_dem_${e} - SUM_dem_${i}) >= 100000 AND ABS(SUM_dem_${e} - SUM_dem_${i}) < 500000`,labelExpressionInfo:{expression:`
          var valueNext = $feature.SUM_dem_${e};
          var valuePrevious = $feature.SUM_dem_${i};
          ${fr}
        `},deconflictionStrategy:"none",symbol:new Et({font:new li({weight:"bold",family:"Noto Sans",size:"10pt"}),haloColor:new Se(hr),haloSize:pr,color:new Se(Is),xoffset:-40*yo,yoffset:-20*vo})}),new Lt({minScale:bo,where:`ABS(SUM_dem_${e} - SUM_dem_${i}) >= 50000 AND ABS(SUM_dem_${e} - SUM_dem_${i}) < 100000`,labelExpressionInfo:{expression:`
          var valueNext = $feature.SUM_dem_${e};
          var valuePrevious = $feature.SUM_dem_${i};
          ${fr}
        `},deconflictionStrategy:"none",symbol:new Et({font:new li({weight:"bold",family:"Noto Sans",size:"10pt"}),haloColor:new Se(hr),haloSize:pr,color:new Se(Is),xoffset:-40*yo,yoffset:-10*vo})}),new Lt({minScale:bo,where:`ABS(SUM_dem_${e} - SUM_dem_${i}) >= 10000 AND ABS(SUM_dem_${e} - SUM_dem_${i}) < 50000`,labelExpressionInfo:{expression:`
          var valueNext = $feature.SUM_dem_${e};
          var valuePrevious = $feature.SUM_dem_${i};
          ${fr}
        `},deconflictionStrategy:"none",symbol:new Et({font:new li({weight:"bold",family:"Noto Sans",size:"10pt"}),haloColor:new Se(hr),haloSize:pr,color:new Se(Is),xoffset:-30*yo,yoffset:-10*vo})}),new Lt({minScale:bo,where:`ABS(SUM_dem_${e} - SUM_dem_${i}) < 10000`,labelExpressionInfo:{expression:`
          var valueNext = $feature.SUM_dem_${e};
          var valuePrevious = $feature.SUM_dem_${i};
          ${fr}
        `},deconflictionStrategy:"none",symbol:new Et({font:new li({weight:"bold",family:"Noto Sans",size:"10pt"}),haloColor:new Se(hr),haloSize:pr,color:new Se(Is),xoffset:-20*yo,yoffset:-10*vo})}),new Lt({minScale:bo,where:`ABS(SUM_rep_${e} - SUM_rep_${i}) >= 500000`,labelExpressionInfo:{expression:`
          var valueNext = $feature.SUM_rep_${e};
          var valuePrevious = $feature.SUM_rep_${i};
          ${fr}
        `},deconflictionStrategy:"none",symbol:new Et({font:new li({weight:"bold",family:"Noto Sans",size:"10pt"}),haloColor:new Se(hr),haloSize:pr,color:new Se(Ts),xoffset:50*yo,yoffset:-20*vo})}),new Lt({minScale:bo,where:`ABS(SUM_rep_${e} - SUM_rep_${i}) >= 100000 AND ABS(SUM_rep_${e} - SUM_rep_${i}) < 500000`,labelExpressionInfo:{expression:`
          var valueNext = $feature.SUM_rep_${e};
          var valuePrevious = $feature.SUM_rep_${i};
          ${fr}
        `},deconflictionStrategy:"none",symbol:new Et({font:new li({weight:"bold",family:"Noto Sans",size:"10pt"}),haloColor:new Se(hr),haloSize:pr,color:new Se(Ts),xoffset:35*yo,yoffset:-20*vo})}),new Lt({minScale:bo,where:`ABS(SUM_rep_${e} - SUM_rep_${i}) >= 50000 AND ABS(SUM_rep_${e} - SUM_rep_${i}) < 100000`,labelExpressionInfo:{expression:`
          var valueNext = $feature.SUM_rep_${e};
          var valuePrevious = $feature.SUM_rep_${i};
          ${fr}
        `},deconflictionStrategy:"none",symbol:new Et({font:new li({weight:"bold",family:"Noto Sans",size:"10pt"}),haloColor:new Se(hr),haloSize:pr,color:new Se(Ts),xoffset:30*yo,yoffset:-17*vo})}),new Lt({minScale:bo,where:`ABS(SUM_rep_${e} - SUM_rep_${i}) >= 10000 AND ABS(SUM_rep_${e} - SUM_rep_${i}) < 50000`,labelExpressionInfo:{expression:`
          var valueNext = $feature.SUM_rep_${e};
          var valuePrevious = $feature.SUM_rep_${i};
          ${fr}
        `},deconflictionStrategy:"none",symbol:new Et({font:new li({weight:"bold",family:"Noto Sans",size:"10pt"}),haloColor:new Se(hr),haloSize:pr,color:new Se(Ts),xoffset:25*yo,yoffset:-12*vo})}),new Lt({minScale:bo,where:`ABS(SUM_rep_${e} - SUM_rep_${i}) < 10000`,labelExpressionInfo:{expression:`
          var valueNext = $feature.SUM_rep_${e};
          var valuePrevious = $feature.SUM_rep_${i};
          ${fr}
        `},deconflictionStrategy:"none",symbol:new Et({font:new li({weight:"bold",family:"Noto Sans",size:"10pt"}),haloColor:new Se(hr),haloSize:pr,color:new Se(Ts),xoffset:20*yo,yoffset:-10*vo})}),new Lt({minScale:bo,where:`ABS(SUM_oth_${e} - SUM_oth_${i}) >= 500000`,labelExpressionInfo:{expression:`
          var valueNext = $feature.SUM_oth_${e};
          var valuePrevious = $feature.SUM_oth_${i};
          ${fr}
        `},deconflictionStrategy:"none",symbol:new Et({font:new li({weight:"bold",family:"Noto Sans",size:"10pt"}),haloColor:new Se(hr),haloSize:pr,color:new Se(oa),xoffset:20*yo,yoffset:30*vo})}),new Lt({minScale:bo,where:`ABS(SUM_oth_${e} - SUM_oth_${i}) >= 100000 AND ABS(SUM_oth_${e} - SUM_oth_${i}) < 500000`,labelExpressionInfo:{expression:`
        var valueNext = $feature.SUM_oth_${e};
        var valuePrevious = $feature.SUM_oth_${i};
          ${fr}
        `},deconflictionStrategy:"none",symbol:new Et({font:new li({weight:"bold",family:"Noto Sans",size:"10pt"}),haloColor:new Se(hr),haloSize:pr,color:new Se(oa),xoffset:20*yo,yoffset:30*vo})}),new Lt({minScale:bo,where:`
        (ABS(SUM_oth_${e} - SUM_oth_${i}) >= 50000 AND ABS(SUM_oth_${e} - SUM_oth_${i}) < 100000)
      `,labelExpressionInfo:{expression:`
        var valueNext = $feature.SUM_oth_${e};
        var valuePrevious = $feature.SUM_oth_${i};
          ${fr}
        `},deconflictionStrategy:"none",symbol:new Et({font:new li({weight:"bold",family:"Noto Sans",size:"10pt"}),haloColor:new Se(hr),haloSize:pr,color:new Se(oa),xoffset:20*yo,yoffset:20*vo})}),new Lt({minScale:bo,where:`
        (ABS(SUM_oth_${e} - SUM_oth_${i}) >= 10000 AND ABS(SUM_oth_${e} - SUM_oth_${i}) < 50000)
      `,labelExpressionInfo:{expression:`
        var valueNext = $feature.SUM_oth_${e};
        var valuePrevious = $feature.SUM_oth_${i};
          ${fr}
        `},deconflictionStrategy:"none",symbol:new Et({font:new li({weight:"bold",family:"Noto Sans",size:"10pt"}),haloColor:new Se(hr),haloSize:pr,color:new Se(oa),xoffset:20*yo,yoffset:15*vo})}),new Lt({minScale:bo,where:`
        (ABS(SUM_oth_${e} - SUM_oth_${i}) < 10000)
      `,labelExpressionInfo:{expression:`
          var valueNext = $feature.SUM_oth_${e};
          var valuePrevious = $feature.SUM_oth_${i};
          ${fr}
        `},deconflictionStrategy:"none",symbol:new Et({font:new li({weight:"bold",family:"Noto Sans",size:"10pt"}),haloColor:new Se(hr),haloSize:pr,color:new Se(oa),xoffset:10*yo,yoffset:10*vo})})]},Xot=t=>{const e=t,i=t-4;return[new Lt({minScale:wo,where:`ABS(((dem_${e} - dem_${i}) / TOTAL_STATE_VOTES_${e}) * 100) >= 10`,labelExpressionInfo:{expression:`
          var valueNext = $feature.dem_${e};
          var valuePrevious = $feature.dem_${i};
          ${fr}
        `},deconflictionStrategy:"none",labelPlacement:"center-center",symbol:new Et({font:new li({weight:"bold",family:"Noto Sans",size:"10pt"}),haloColor:new Se(hr),haloSize:pr,color:new Se(Is),xoffset:-50,yoffset:-25})}),new Lt({minScale:wo,where:`ABS(((dem_${e} - dem_${i}) / TOTAL_STATE_VOTES_${e}) * 100) >= 5 AND ABS(((dem_${e} - dem_${i}) / TOTAL_STATE_VOTES_${e}) * 100) < 10`,labelExpressionInfo:{expression:`
          var valueNext = $feature.dem_${e};
          var valuePrevious = $feature.dem_${i};
          ${fr}
        `},deconflictionStrategy:"none",labelPlacement:"center-center",symbol:new Et({font:new li({weight:"bold",family:"Noto Sans",size:"10pt"}),haloColor:new Se(hr),haloSize:pr,color:new Se(Is),xoffset:-40,yoffset:-20})}),new Lt({minScale:wo,where:`ABS(((dem_${e} - dem_${i}) / TOTAL_STATE_VOTES_${e}) * 100) >= 1 AND ABS(((dem_${e} - dem_${i}) / TOTAL_STATE_VOTES_${e}) * 100) < 5`,labelExpressionInfo:{expression:`
          var valueNext = $feature.dem_${e};
          var valuePrevious = $feature.dem_${i};
          ${fr}
        `},deconflictionStrategy:"none",labelPlacement:"center-center",symbol:new Et({font:new li({weight:"bold",family:"Noto Sans",size:"10pt"}),haloColor:new Se(hr),haloSize:pr,color:new Se(Is),xoffset:-40,yoffset:-10})}),new Lt({minScale:wo,where:`ABS(((dem_${e} - dem_${i}) / TOTAL_STATE_VOTES_${e}) * 100) >= 0.5 AND ABS(((dem_${e} - dem_${i}) / TOTAL_STATE_VOTES_${e}) * 100) < 1`,labelExpressionInfo:{expression:`
          var valueNext = $feature.dem_${e};
          var valuePrevious = $feature.dem_${i};
          ${fr}
        `},deconflictionStrategy:"none",labelPlacement:"center-center",symbol:new Et({font:new li({weight:"bold",family:"Noto Sans",size:"10pt"}),haloColor:new Se(hr),haloSize:pr,color:new Se(Is),xoffset:-30,yoffset:-10})}),new Lt({minScale:wo,where:`ABS(((dem_${e} - dem_${i}) / TOTAL_STATE_VOTES_${e}) * 100) < 0.5`,labelExpressionInfo:{expression:`
          var valueNext = $feature.dem_${e};
          var valuePrevious = $feature.dem_${i};
          ${fr}
        `},deconflictionStrategy:"none",labelPlacement:"center-center",symbol:new Et({font:new li({weight:"bold",family:"Noto Sans",size:"10pt"}),haloColor:new Se(hr),haloSize:pr,color:new Se(Is),xoffset:-20,yoffset:-10})}),new Lt({minScale:wo,where:`ABS(((rep_${e} - rep_${i}) / TOTAL_STATE_VOTES_${e}) * 100) >= 10`,labelExpressionInfo:{expression:`
          var valueNext = $feature.rep_${e};
          var valuePrevious = $feature.rep_${i};
          ${fr}
        `},deconflictionStrategy:"none",labelPlacement:"center-center",symbol:new Et({font:new li({weight:"bold",family:"Noto Sans",size:"10pt"}),haloColor:new Se(hr),haloSize:pr,color:new Se(Ts),xoffset:60,yoffset:-20})}),new Lt({minScale:wo,where:`ABS(((rep_${e} - rep_${i}) / TOTAL_STATE_VOTES_${e}) * 100) >= 5 AND ABS(((rep_${e} - rep_${i}) / TOTAL_STATE_VOTES_${e}) * 100) < 10`,labelExpressionInfo:{expression:`
          var valueNext = $feature.rep_${e};
          var valuePrevious = $feature.rep_${i};
          ${fr}
        `},deconflictionStrategy:"none",labelPlacement:"center-center",symbol:new Et({font:new li({weight:"bold",family:"Noto Sans",size:"10pt"}),haloColor:new Se(hr),haloSize:pr,color:new Se(Ts),xoffset:45,yoffset:-20})}),new Lt({minScale:wo,where:`ABS(((rep_${e} - rep_${i}) / TOTAL_STATE_VOTES_${e}) * 100) >= 1 AND ABS(((rep_${e} - rep_${i}) / TOTAL_STATE_VOTES_${e}) * 100) < 5`,labelExpressionInfo:{expression:`
          var valueNext = $feature.rep_${e};
          var valuePrevious = $feature.rep_${i};
          ${fr}
        `},deconflictionStrategy:"none",labelPlacement:"center-center",symbol:new Et({font:new li({weight:"bold",family:"Noto Sans",size:"10pt"}),haloColor:new Se(hr),haloSize:pr,color:new Se(Ts),xoffset:30,yoffset:-20})}),new Lt({minScale:wo,where:`ABS(((rep_${e} - rep_${i}) / TOTAL_STATE_VOTES_${e}) * 100) >= 0.5 AND ABS(((rep_${e} - rep_${i}) / TOTAL_STATE_VOTES_${e}) * 100) < 1`,labelExpressionInfo:{expression:`
          var valueNext = $feature.rep_${e};
          var valuePrevious = $feature.rep_${i};
          ${fr}
        `},deconflictionStrategy:"none",labelPlacement:"center-center",symbol:new Et({font:new li({weight:"bold",family:"Noto Sans",size:"10pt"}),haloColor:new Se(hr),haloSize:pr,color:new Se(Ts),xoffset:20,yoffset:-10})}),new Lt({minScale:wo,where:`ABS(((rep_${e} - rep_${i}) / TOTAL_STATE_VOTES_${e}) * 100) < 0.5`,labelExpressionInfo:{expression:`
          var valueNext = $feature.rep_${e};
          var valuePrevious = $feature.rep_${i};
          ${fr}
        `},deconflictionStrategy:"none",labelPlacement:"center-center",symbol:new Et({font:new li({weight:"bold",family:"Noto Sans",size:"10pt"}),haloColor:new Se(hr),haloSize:pr,color:new Se(Ts),xoffset:20,yoffset:-10})}),new Lt({minScale:wo,where:`ABS(((oth_${e} - oth_${i}) / TOTAL_STATE_VOTES_${e}) * 100) >= 10`,labelExpressionInfo:{expression:`
          var valueNext = $feature.oth_${e};
          var valuePrevious = $feature.oth_${i};
          ${fr}
        `},deconflictionStrategy:"none",labelPlacement:"center-center",symbol:new Et({font:new li({weight:"bold",family:"Noto Sans",size:"10pt"}),haloColor:new Se(hr),haloSize:pr,color:new Se(oa),xoffset:30,yoffset:40})}),new Lt({minScale:wo,where:`ABS(((oth_${e} - oth_${i}) / TOTAL_STATE_VOTES_${e}) * 100) >= 5 AND ABS(((oth_${e} - oth_${i}) / TOTAL_STATE_VOTES_${e}) * 100) < 10`,labelExpressionInfo:{expression:`
        var valueNext = $feature.oth_${e};
        var valuePrevious = $feature.oth_${i};
          ${fr}
        `},deconflictionStrategy:"none",labelPlacement:"center-center",symbol:new Et({font:new li({weight:"bold",family:"Noto Sans",size:"10pt"}),haloColor:new Se(hr),haloSize:pr,color:new Se(oa),xoffset:30,yoffset:40})}),new Lt({minScale:wo,where:`
        (ABS(((oth_${e} - oth_${i}) / TOTAL_STATE_VOTES_${e}) * 100) >= 1 AND ABS(((oth_${e} - oth_${i}) / TOTAL_STATE_VOTES_${e}) * 100) < 5)
      `,labelExpressionInfo:{expression:`
        var valueNext = $feature.oth_${e};
        var valuePrevious = $feature.oth_${i};
          ${fr}
        `},deconflictionStrategy:"none",labelPlacement:"center-center",symbol:new Et({font:new li({weight:"bold",family:"Noto Sans",size:"10pt"}),haloColor:new Se(hr),haloSize:pr,color:new Se(oa),xoffset:30,yoffset:35})}),new Lt({minScale:wo,where:`
        (ABS(((oth_${e} - oth_${i}) / TOTAL_STATE_VOTES_${e}) * 100) >= 0.5 AND ABS(((oth_${e} - oth_${i}) / TOTAL_STATE_VOTES_${e}) * 100) < 1)
      `,labelExpressionInfo:{expression:`
        var valueNext = $feature.oth_${e};
        var valuePrevious = $feature.oth_${i};
          ${fr}
        `},deconflictionStrategy:"none",labelPlacement:"center-center",symbol:new Et({font:new li({weight:"bold",family:"Noto Sans",size:"10pt"}),haloColor:new Se(hr),haloSize:pr,color:new Se(oa),xoffset:20,yoffset:30})}),new Lt({minScale:wo,where:`
        (ABS(((oth_${e} - oth_${i}) / TOTAL_STATE_VOTES_${e}) * 100) < 0.5)
      `,labelExpressionInfo:{expression:`
          var valueNext = $feature.oth_${e};
          var valuePrevious = $feature.oth_${i};
          ${fr}
        `},deconflictionStrategy:"none",labelPlacement:"center-center",symbol:new Et({font:new li({weight:"bold",family:"Noto Sans",size:"10pt"}),haloColor:new Se(hr),haloSize:pr,color:new Se(oa),xoffset:15,yoffset:18})})]},Qot=t=>{const{level:e,year:i}=t;return e==="county"?Xot(i):Jot(i)},rce=t=>({popupTemplate:Hot(t),renderer:Yot(t),labelingInfo:Qot(t)});function QO(t){const e=Dk({places:0,digitSeparator:!0});return or(t,e)}function Kot(t){return t.map(e=>new Ss({fieldName:e,format:new $n({places:0,digitSeparator:!0})}))}const NSe=t=>{const{level:e,year:i}=t,r=e==="state"?z5:"",n=[i-16,i-12,i-8,i-4,i],s=n.map(o=>[`${r}rep_${o}`,`${r}dem_${o}`,`${r}oth_${o}`]).flat(),a=[];if(e==="country"){const o=[2e3,2004,2008,2012,2016,2020,2024],l=new Rbe({creator:c=>{const{graphic:h}=c,m=document.createElement("div");m.id="electoral-vote-results";let g=`<table ${V2}>`;g+=`<tr ${U2}><td ${fi}>Year</td><td ${fi}>Republican</td><td ${fi}>Votes</td><td ${fi}>+/-</td><td ${fi}>Democrat</td><td ${fi}>Votes</td><td ${fi}>+/-</td></tr>`;let v=`<table ${V2}>`;v+=`<tr ${U2}><td ${fi}>Year</td><td ${fi}>Republican</td><td ${fi}>Votes</td><td ${fi}>%</td><td ${fi}>Democrat</td><td ${fi}>Votes</td><td ${fi}>%</td></tr>`;const b=JSON.parse(JSON.stringify(gc)),x=`rgba(${Ts.toRgba()})`,$=`rgba(${Is.toRgba()})`;o.forEach(k=>{const A=k.toString(),L={r:{name:b[A].republican.candidate,votes:b[A].republican.electoralVotes,weight:"normal",class:"",margin:"-"},d:{name:b[A].democrat.candidate,votes:b[A].democrat.electoralVotes,weight:"normal",class:"",margin:"-"}},z={r:{name:b[A].republican.candidate,votes:h.attributes[`rep_${A}`],weight:"normal",class:"",margin:"-"},d:{name:b[A].democrat.candidate,votes:h.attributes[`dem_${A}`],weight:"normal",class:"",margin:"-"}},U=[L.r.votes,L.d.votes],B=Math.max(...U),X=U.indexOf(B)===0?"r":"d";L[X].weight="bolder",X==="r"&&(L.r.class="background-color: rgba(220, 75, 0, 0.08);"),X==="d"&&(L.d.class="background-color: rgba(60, 108, 204, 0.08);");const J=[z.r.votes,z.d.votes],Q=Math.max(...J),le=J.indexOf(Q)===0?"r":"d";z[le].weight="bolder",le==="r"&&(z.r.class="background-color: rgba(220, 75, 0, 0.08);"),le==="d"&&(z.d.class="background-color: rgba(60, 108, 204, 0.08);");const ie=U.sort((Oe,He)=>He-Oe),re=J.sort((Oe,He)=>He-Oe),se=or(ie[0]-ie[1],{signDisplay:"always"}),Te=or((re[0]-re[1])/(re[0]+re[1]),{style:"percent",minimumFractionDigits:1,maximumFractionDigits:1,signDisplay:"always"});L[X].margin=se,z[le].margin=Te;let ne="";ne+=`<tr><td ${fi}>${A}</td>`,ne+=`<td style='${L.r.class}'><span style='color:${x}; font-weight: ${L.r.weight}'>${L.r.name}</span></td>`,ne+=`<td style='${L.r.class}'><span style='color:${x}; font-weight: ${L.r.weight}'>${QO(L.r.votes)}</span></td>`,ne+=`<td style='${L.r.class}'><span style='color:${x}; font-weight: ${L.r.weight}'>${L.r.margin}</span></td>`,ne+=`<td style='${L.d.class}'><span style='color:${$}; font-weight: ${L.d.weight}'>${L.d.name}</span></td>`,ne+=`<td style='${L.d.class}'><span style='color:${$}; font-weight: ${L.d.weight}'>${QO(L.d.votes)}</span></td>`,ne+=`<td style='${L.d.class}'><span style='color:${$}; font-weight: ${L.d.weight}'>${L.d.margin}</span></td>`,ne+="</tr>",g+=ne;let _e="";_e+=`<tr><td ${fi}>${A}</td>`,_e+=`<td style='${z.r.class}'><span style='color:${x}; font-weight: ${z.r.weight}'>${z.r.name}</span></td>`,_e+=`<td style='${z.r.class}'><span style='color:${x}; font-weight: ${z.r.weight}'>${QO(z.r.votes)}</span></td>`,_e+=`<td style='${z.r.class}'><span style='color:${x}; font-weight: ${z.r.weight}'>${z.r.margin}</span></td>`,_e+=`<td style='${z.d.class}'><span style='color:${$}; font-weight: ${z.d.weight}'>${z.d.name}</span></td>`,_e+=`<td style='${z.d.class}'><span style='color:${$}; font-weight: ${z.d.weight}'>${QO(z.d.votes)}</span></td>`,_e+=`<td style='${z.d.class}'><span style='color:${$}; font-weight: ${z.d.weight}'>${z.d.margin}</span></td>`,_e+="</tr>",v+=_e}),g+="</table>",v+="</table>";const M=`
          <calcite-tabs>
              <calcite-tab-nav slot="title-group">
                  <calcite-tab-title selected>
                    Elector Vote Total
                  </calcite-tab-title>
                  <calcite-tab-title>
                    Popular Vote Total
                  </calcite-tab-title>
              </calcite-tab-nav>
              <calcite-tab selected>
                  ${g}
              </calcite-tab>
              <calcite-tab>
                  ${v}
              </calcite-tab>
          </calcite-tabs>
        `;return m.innerHTML=M,m}});a.push(l)}else a.push(new lw({expressionInfo:{expression:`
            Expects($feature, "*");

            var result = "";

            var dMargins = [];
            var rMargins = [];

            var years = [${n}];

            var rColorHex = "${Ts.toHex()}";
            var dColorHex = "${Is.toHex()}";
            var oColorHex = "${oa.toHex()}";

            for (var i in years){
              var y = Text(years[i]);

              var rVotes = $feature[\`${r}rep_\${y}\`];
              var dVotes = $feature[\`${r}dem_\${y}\`];
              var oVotes = $feature[\`${r}oth_\${y}\`];

              var allVotes = Reverse(Sort([rVotes, dVotes, oVotes]));
              var sumVotes = Sum(allVotes);

              var winner = Decode(Max(allVotes),
                rVotes, "r",
                dVotes, "d",
                "o"
              );

              var marginTotal = allVotes[0] - allVotes[1];
              var marginPercent = Round(((allVotes[0] / sumVotes) - (allVotes[1] / sumVotes)) * 100, 1);

              if(winner == "r"){
                Push(rMargins, marginPercent);
              }
              if(winner == "d"){
                Push(dMargins, marginPercent);
              }
            }

            var yCount = Count(years);
            var strongThreshold = yCount * 0.75;
            var contestedThreshold = yCount * 0.5;

            var dCount = Count(dMargins);
            var dAvg = Sum(dMargins) / yCount;

            var rCount = Count(rMargins);
            var rAvg = Sum(rMargins) / yCount;


            var trend = When(
              (dCount > strongThreshold) && (dAvg > 5), \` shown <b><span style='color:\${dColorHex}'>strong Democrat</span></b> support\`,
              (dCount > strongThreshold) && (dAvg <= 5), \`<b><span style='color:\${dColorHex}'>leaned Democrat</span></b>\`,
              (dCount > contestedThreshold), \`been <b>contested</b>, but tends to <b><span style='color:\${dColorHex}'>lean Democrat</span></b>\`,

              (rCount > strongThreshold) && (rAvg > 5), \` shown <b><span style='color:\${rColorHex}'>strong Republican</span></b> support\`,
              (rCount > strongThreshold) && (rAvg <= 5), \`<b><span style='color:\${rColorHex}'>leaned Republican</span></b>\`,
              (rCount > contestedThreshold), \`been <b>contested</b>, but tend to <b><span style='color:\${rColorHex}'> lean Republican</span></b>\`,
              "contested"
            );

            var geographyName = iif(haskey($feature, "county"), \`\${$feature.county}, \${$feature.state}\`, $feature.state);

            result = \`In the last \${yCount} U.S. presidential elections, \${geographyName} voters have \${trend}.\`;

            return {
              type: "text",
              text: result
            };
          `}}),new lw({expressionInfo:{expression:`
            Expects($feature, "*");
            var years = [${n}];
            var candidates = {
              "2000": {
                republican: {
                  candidate: "Bush",
                  electoralVotes: 271
                },
                democrat: {
                  candidate: "Gore",
                  electoralVotes: 266
                },
                other: {
                  candidate: "Other",
                  electoralVotes: 0
                }
              },
              "2004": {
                republican: {
                  candidate: "Bush",
                  electoralVotes: 286
                },
                democrat: {
                  candidate: "Kerry",
                  electoralVotes: 251
                },
                other: {
                  candidate: "Other",
                  electoralVotes: 0
                }
              },
              "2008": {
                republican: {
                  candidate: "McCain",
                  electoralVotes: 173
                },
                democrat: {
                  candidate: "Obama",
                  electoralVotes: 365
                },
                other: {
                  candidate: "Other",
                  electoralVotes: 0
                }
              },
              "2012": {
                republican: {
                  candidate: "Romney",
                  electoralVotes: 206
                },
                democrat: {
                  candidate: "Obama",
                  electoralVotes: 332
                },
                other: {
                  candidate: "Other",
                  electoralVotes: 0
                }
              },
              "2016": {
                republican: {
                  candidate: "Trump",
                  electoralVotes: 304
                },
                democrat: {
                  candidate: "Clinton",
                  electoralVotes: 227
                },
                other: {
                  candidate: "Other",
                  electoralVotes: 0
                }
              },
              "2020": {
                republican: {
                  candidate: "Trump",
                  electoralVotes: 232
                },
                democrat: {
                  candidate: "Biden",
                  electoralVotes: 306
                },
                other: {
                  candidate: "Other",
                  electoralVotes: 0
                }
              },
              "2024": {
                republican: {
                  candidate: "Trump",
                  electoralVotes: 312
                },
                democrat: {
                  candidate: "Harris",
                  electoralVotes: 226
                },
                other: {
                  candidate: "Other",
                  electoralVotes: 0
                }
              }
            };


            var table = "<table ${V2}>";
            table += "<tr ${U2}><td ${fi}>Year</td><td ${fi}>Republican</td><td ${fi}>Votes</td><td ${fi}>%</td><td ${fi}>Democrat</td><td ${fi}>Votes</td><td ${fi}>%</td></tr>";

            // var results = {};

            for (var i in years){
              var y = Text(years[i]);

              var results = {
                r: {
                  name: candidates[y].republican.candidate,
                  votes: $feature[\`${r}rep_\${y}\`],
                  weight: "normal",
                  class: "none",
                  margin: "-"
                },
                d: {
                  name: candidates[y].democrat.candidate,
                  votes: $feature[\`${r}dem_\${y}\`],
                  weight: "normal",
                  class: "none",
                  margin: "-"
                },
                o: {
                  name: candidates[y].other.candidate,
                  votes: $feature[\`${r}oth_\${y}\`],
                  weight: "normal",
                  class: "none",
                  margin: "-"
                }
              };

              var allVotes = Reverse(Sort([results.r.votes, results.d.votes, results.o.votes]));
              var sumVotes = Sum(allVotes);
              var winner = Decode(Max(allVotes),
                results.r.votes, "r",
                results.d.votes, "d",
                "o"
              );

              results[winner].weight = "bolder";

              if(winner == "r"){
                results.r.class = "background-color: rgba(220, 75, 0, 0.08);";
              }
              if(winner == "d"){
                results.d.class = "background-color: rgba(60, 108, 204, 0.08);";
              }


              var marginTotal = Text(allVotes[0] - allVotes[1], "#,###");
              var marginPercent = Text((allVotes[0] / sumVotes) - (allVotes[1] / sumVotes), "+#.0%;-#.0%");

              results[winner].margin = marginPercent;

              var tr = "";
              tr += \`<tr><td ${fi}>\${y}</td>\`;

              var rColor = "rgba(${Ts.toRgba()})";
              var dColor = "rgba(${Is.toRgba()})";

              tr += \`<td style='\${results.r.class}'><span style='color:\${rColor}; font-weight: \${results.r.weight}'>\${results.r.name}</span></td>\`;
              tr += \`<td style='\${results.r.class}'><span style='color:\${rColor}; font-weight: \${results.r.weight}'>\${Text(results.r.votes, "#,###")}</span></td>\`;
              tr += \`<td style='\${results.r.class}'><span style='color:\${rColor}; font-weight: \${results.r.weight}'>\${results.r.margin}</span></td>\`;

              tr += \`<td style='\${results.d.class}'><span style='color:\${dColor}; font-weight: \${results.d.weight}'>\${results.d.name}</span></td>\`;
              tr += \`<td style='\${results.d.class}'><span style='color:\${dColor}; font-weight: \${results.d.weight}'>\${Text(results.d.votes, "#,###")}</span></td>\`;
              tr += \`<td style='\${results.d.class}'><span style='color:\${dColor}; font-weight: \${results.d.weight}'>\${results.d.margin}</span></td>\`;

              tr += "</tr>";

              table += tr;

            }

            table += "</table>";

            return {
              type: "text",
              text: table
            }
          `}}),new lw({expressionInfo:{expression:`
            Expects($feature, "*");
            var fieldsMargin = [];
            var fieldsTotal = [];
            var colors = [];
            var attributes = {};
            var mediaInfos = [];

            var years = [${n}];
            var candidates = {
              "2000": {
                republican: {
                  candidate: "Bush",
                  electoralVotes: 271
                },
                democrat: {
                  candidate: "Gore",
                  electoralVotes: 266
                },
                other: {
                  candidate: "Other",
                  electoralVotes: 0
                }
              },
              "2004": {
                republican: {
                  candidate: "Bush",
                  electoralVotes: 286
                },
                democrat: {
                  candidate: "Kerry",
                  electoralVotes: 251
                },
                other: {
                  candidate: "Other",
                  electoralVotes: 0
                }
              },
              "2008": {
                republican: {
                  candidate: "McCain",
                  electoralVotes: 173
                },
                democrat: {
                  candidate: "Obama",
                  electoralVotes: 365
                },
                other: {
                  candidate: "Other",
                  electoralVotes: 0
                }
              },
              "2012": {
                republican: {
                  candidate: "Romney",
                  electoralVotes: 206
                },
                democrat: {
                  candidate: "Obama",
                  electoralVotes: 332
                },
                other: {
                  candidate: "Other",
                  electoralVotes: 0
                }
              },
              "2016": {
                republican: {
                  candidate: "Trump",
                  electoralVotes: 304
                },
                democrat: {
                  candidate: "Clinton",
                  electoralVotes: 227
                },
                other: {
                  candidate: "Other",
                  electoralVotes: 0
                }
              },
              "2020": {
                republican: {
                  candidate: "Trump",
                  electoralVotes: 232
                },
                democrat: {
                  candidate: "Biden",
                  electoralVotes: 306
                },
                other: {
                  candidate: "Other",
                  electoralVotes: 0
                }
              },
              "2024": {
                republican: {
                  candidate: "Trump",
                  electoralVotes: 312
                },
                democrat: {
                  candidate: "Harris",
                  electoralVotes: 226
                },
                other: {
                  candidate: "Other",
                  electoralVotes: 0
                }
              }
            };

            var rColor = [${Ts.toJSON()}];
            var dColor = [${Is.toJSON()}];
            var oColor = [${oa.toJSON()}];
            var resultsColors = [rColor, dColor, oColor];

            var rColorHex = "${Ts.toHex()}";
            var dColorHex = "${Is.toHex()}";
            var oColorHex = "${oa.toHex()}";

            for (var i in years){
              var y = Text(years[i]);

              var results = {
                r: {
                  name: candidates[y].republican.candidate,
                  votes: $feature[\`${r}rep_\${y}\`],
                  margin: null,
                  color: rColor,
                  hexColor: rColorHex
                },
                d: {
                  name: candidates[y].democrat.candidate,
                  votes: $feature[\`${r}dem_\${y}\`],
                  margin: null,
                  color: dColor,
                  hexColor: dColorHex
                },
                o: {
                  name: candidates[y].other.candidate,
                  votes: $feature[\`${r}oth_\${y}\`],
                  margin: null,
                  color: oColor,
                  hexColor: oColorHex
                }
              };

              var allVotes = Reverse(Sort([results.r.votes, results.d.votes, results.o.votes]));
              var sumVotes = Sum(allVotes);

              var winner = Decode(Max(allVotes),
                results.r.votes, "r",
                results.d.votes, "d",
                "o"
              );

              var marginTotal = allVotes[0] - allVotes[1];
              var marginPercent = Round(((allVotes[0] / sumVotes) - (allVotes[1] / sumVotes)) * 100, 1);

              results[winner].margin = marginPercent;

              var winnerInfo = results[winner];
              var fieldNameMargin = \`\${winnerInfo.name} (\${y}) - margin\`;
              var fieldNameTotal = \`\${winnerInfo.name} (\${y}) - total\`;
              attributes[fieldNameMargin] = winnerInfo.margin;
              attributes[fieldNameTotal] = marginTotal;

              Push(fieldsMargin, fieldNameMargin);
              Push(fieldsTotal, fieldNameTotal);
              Push(colors, winnerInfo.color);

              var rCandidateName = \`\${results.r.name} (\${y}) - votes\`;
              var dCandidateName = \`\${results.d.name} (\${y}) - votes\`;
              var oCandidateName = \`\${results.o.name} (\${y}) - votes\`;

              attributes[rCandidateName] = results.r.votes;
              attributes[dCandidateName] = results.d.votes;
              attributes[oCandidateName] = results.o.votes;

              var evFieldName = \`ev_\${y}\`;

              var title = "";

              if(haskey($feature, "county")){
                title = \`<span style='color:\${winnerInfo.hexColor}'><b>\${winnerInfo.name}</b></span> won \${$feature.county}, \${$feature.state} in \${y}\`;
              } else {
                title = \`<span style='color:\${winnerInfo.hexColor}'><b>\${winnerInfo.name}</b></span> won \${$feature.state}'s \${$feature[evFieldName]} electoral votes in \${y}\`;
              }

              var resultsChart = {
                type: "barchart",
                title,
                value: {
                  fields: [
                    rCandidateName,
                    dCandidateName,
                    oCandidateName
                  ],
                  colors: resultsColors
                }
              };

              Push(mediaInfos, resultsChart);
            }

            Insert(mediaInfos, 0, {
              type: "columnchart",
              title: "Margin of victory trend (% points)",
              value: { fields: fieldsMargin, colors }
            });

            Insert(mediaInfos, 1, {
              type: "columnchart",
              title: "Margin of victory trend (total votes)",
              value: { fields: fieldsTotal, colors }
            });

            return {
              type: "media",
              attributes,
              mediaInfos
            };
          `}}));return new lg({title:NE.title[e],fieldInfos:Kot(s),content:a})},elt={rings:[[[0,0],[0,10],[10,10],[10,0],[0,0]]]};function tlt(t){const{primitiveName:e,color:i,outline:r,offsetX:n}=t,s={type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:i,primitiveName:e}]};r&&r.color&&s.symbolLayers.push({type:"CIMSolidStroke",enable:!0,color:r.color,width:.5});const a=10;return{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:0,y:0},anchorPointUnits:"Relative",size:a,primitiveName:e,frame:{xmin:0,ymin:0,xmax:10,ymax:10},offsetX:a*n,offsetY:0,markerGraphics:[{type:"CIMMarkerGraphic",geometry:elt,symbol:s}],scaleSymbolsProportionally:!0,respectFrame:!0}}function ilt(t){const{year:e,primitiveName:i,fieldPrefix:r}=t;return{type:"CIMPrimitiveOverride",primitiveName:i,propertyName:"Color",valueExpressionInfo:{type:"CIMExpressionInfo",title:"Winner",expression:`
        var rColor = ${JSON.stringify(DE)};
        var dColor = ${JSON.stringify(jE)};
        var oColor = ${JSON.stringify(VE)};

        var demVotes = $feature.${r}dem_${e};
        var repVotes = $feature.${r}rep_${e};
        var othVotes = $feature.${r}oth_${e};

        var allVotes = [demVotes, repVotes, othVotes];

        Decode(Max(allVotes),
          demVotes, dColor,
          repVotes, rColor,
          oColor
        );
      `,returnType:"Default"}}}const rlt=`
  var scaleFactorBase = ( ${ASe} / $view.scale );
  var scaleFactor = When(
    scaleFactorBase >= 1, 1,
    scaleFactorBase >= 0.5, scaleFactorBase * 0.6,
    scaleFactorBase >= 0.25, scaleFactorBase * 0.45,
    scaleFactorBase >= 0.125, scaleFactorBase * 0.3125,
    scaleFactorBase * 0.1875
  );
`,nlt=`
  var sizeFactor = When(
    value >= ${Kn[4].value}, ${Kn[4].size},
    value >= ${Kn[3].value}, ${Kn[3].size} + (${dv(Kn[3],Kn[4])} * (value - ${Kn[3].value})),
    value >= ${Kn[2].value}, ${Kn[2].size} + (${dv(Kn[2],Kn[3])} * (value - ${Kn[2].value})),
    value >= ${Kn[1].value}, ${Kn[1].size} + (${dv(Kn[1],Kn[2])} * (value - ${Kn[1].value})),
    value > ${Kn[0].value}, ${Kn[0].size} + (${dv(Kn[0],Kn[1])} * value),
    0
  );
`,DSe=`
  ${nlt}

  ${rlt}
  var size = sizeFactor * scaleFactor;
`,slt=`
  var sizeFactor = When(
    value >= ${ts[4].value}, ${ts[4].size},
    value >= ${ts[3].value}, ${ts[3].size} + (${dv(ts[3],ts[4])} * (value - ${ts[3].value})),
    value >= ${ts[2].value}, ${ts[2].size} + (${dv(ts[2],ts[3])} * (value - ${ts[2].value})),
    value >= ${ts[1].value}, ${ts[1].size} + (${dv(ts[1],ts[2])} * (value - ${ts[1].value})),
    value > ${ts[0].value}, ${ts[0].size} + (${dv(ts[0],ts[1])} * value),
    0
  );
`,alt=`
  var scaleFactorBase = Round( ${Rot} / $view.scale, 1 );
  var scaleFactor = When(
    scaleFactorBase >= 8, scaleFactorBase / 8,
    scaleFactorBase >= 4, scaleFactorBase / 6,
    scaleFactorBase >= 2, scaleFactorBase / 4,
    scaleFactorBase >= 1, scaleFactorBase * 0.6,
    scaleFactorBase >= 0.5, scaleFactorBase * 0.6,
    scaleFactorBase >= 0.25, scaleFactorBase * 0.45,
    scaleFactorBase >= 0.125, scaleFactorBase * 0.3125,
    scaleFactorBase
  );
`,jSe=`
  ${slt}

  ${alt}
  var size = sizeFactor * scaleFactor;
`;function dv(t,e){const i=e.size-t.size,r=e.value-t.value;return i/r}function olt(t){const{year:e,primitiveName:i,fieldPrefix:r}=t;return{type:"CIMPrimitiveOverride",primitiveName:i,propertyName:"Size",valueExpressionInfo:{type:"CIMExpressionInfo",title:"Margin of Victory",expression:`
        var demVotes = $feature.${r}dem_${e};
        var repVotes = $feature.${r}rep_${e};
        var othVotes = $feature.${r}oth_${e};

        var allVotes = Reverse(Sort([demVotes, repVotes, othVotes]));

        var value = allVotes[0] - allVotes[1];

        ${r===z5?DSe:jSe}

        return size;
      `,returnType:"Default"}}}function llt(t){const{year:e,primitiveName:i,fieldPrefix:r}=t;return{type:"CIMPrimitiveOverride",primitiveName:i,propertyName:"OffsetX",valueExpressionInfo:{type:"CIMExpressionInfo",title:"Margin of Victory",expression:`

        function isEven(v){
          return v % 2 == 0;
        }
        var interval = 4;
        var years = [${mz}];
        var selectedYear = ${e};

        var numItems = Count(years);
        var isEvenItems = isEven(numItems);
        var middleIndex = Floor(numItems / 2);

        if(isEvenItems){
          middleIndex -= 0.5;
        }

        var index = IndexOf(years, selectedYear);

        if(!isEvenItems && index == middleIndex){
          return 0;
        }

        var direction = iif(index < middleIndex, -1, 1);

        var yearStart = iif(direction < 0, selectedYear, years[middleIndex]);
        var yearEnd = iif(direction < 0, years[middleIndex], selectedYear);

        var sizes = [];

        var offsetX = 0;

        for (var year = yearStart; year <= yearEnd; year+=interval){
          var demVotes = $feature[\`${r}dem_\${year}\`];
          var repVotes = $feature[\`${r}rep_\${year}\`];
          var othVotes = $feature[\`${r}oth_\${year}\`];

          var allVotes = Reverse(Sort([demVotes, repVotes, othVotes]));

          var value = allVotes[0] - allVotes[1];

          ${r===z5?DSe:jSe}

          var factor = iif(
            (year == yearStart) || (year == yearEnd)
          , 0.5, 1);

          offsetX += (size * factor);
        }

        return offsetX * direction;

      `,returnType:"Default"}}}function clt(t){const{level:e,year:i}=t;return new aa({symbol:ult({level:e,year:i})})}function ult(t){const{level:e,year:i}=t,r=e==="state"?z5:"",n=[i-16,i-12,i-8,i-4,i];return new zs({data:{type:"CIMSymbolReference",symbol:{type:"CIMPointSymbol",symbolLayers:[...n.map(s=>tlt({primitiveName:`election-${s}`,offsetX:n.indexOf(s)-2,color:[0,0,0,255],outline:{color:[255,255,255,100]}}))]},primitiveOverrides:[...n.map(s=>ilt({primitiveName:`election-${s}`,year:s,fieldPrefix:r})),...n.map(s=>olt({primitiveName:`election-${s}`,year:s,fieldPrefix:r})),...n.map(s=>llt({primitiveName:`election-${s}`,year:s,fieldPrefix:r}))]}})}const nce=t=>({popupTemplate:NSe(t),renderer:clt(t)});/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const U1={percentage:"percentage",progressRing:"ring--progress",ring:"ring",rings:"rings",text:"text",trackRing:"ring--track"},dlt=ct`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{position:relative;margin-inline:auto;display:flex;align-items:center;justify-content:center;opacity:1;flex-direction:column;min-block-size:var(--calcite-loader-size);font-size:var(--calcite-loader-font-size);stroke-width:var(--calcite-internal-stroke-width);fill:none;transform:scale(1);padding-block:var(--calcite-loader-spacing, 4rem)}:host([scale=s]){--calcite-internal-stroke-width: 3;--calcite-internal-text-offset: var(--calcite-spacing-xxs);--calcite-internal-loader-font-size: var(--calcite-font-size--3);--calcite-internal-loader-size: 2rem;--calcite-internal-loader-size-inline: .75rem;--calcite-internal-loader-value-line-height: .625rem}:host([scale=m]){--calcite-internal-stroke-width: 6;--calcite-internal-text-offset: var(--calcite-spacing-sm);--calcite-internal-loader-font-size: var(--calcite-font-size-0);--calcite-internal-loader-size: 4rem;--calcite-internal-loader-size-inline: 1rem;--calcite-internal-loader-value-line-height: 1.375rem}:host([scale=l]){--calcite-internal-stroke-width: 8;--calcite-internal-text-offset: var(--calcite-spacing-md);--calcite-internal-loader-font-size: var(--calcite-font-size-2);--calcite-internal-loader-size: 6rem;--calcite-internal-loader-size-inline: 1.5rem;--calcite-internal-loader-value-line-height: 1.71875rem}.text{display:block;text-align:center;font-size:var(--calcite-font-size--2);line-height:1rem;margin-block-start:var(--calcite-loader-text-spacing, var(--calcite-internal-text-offset));font-weight:var(--calcite-loader-text-weight, var(--calcite-font-weight-normal));color:var(--calcite-loader-text-color, var(--calcite-color-text-1))}.percentage{display:block;text-align:center;font-size:var(--calcite-loader-font-size);inline-size:var(--calcite-loader-size, var(--calcite-internal-loader-size));line-height:var(--calcite-internal-loader-value-line-height);align-self:center;color:var(--calcite-loader-text-color, var(--calcite-color-text-1))}.rings{position:relative;display:flex;overflow:visible;opacity:1;inline-size:var(--calcite-loader-size, var(--calcite-internal-loader-size));block-size:var(--calcite-loader-size, var(--calcite-internal-loader-size))}.ring{position:absolute;inset-block-start:0px;transform-origin:center;overflow:visible;inset-inline-start:0;inline-size:var(--calcite-loader-size, var(--calcite-internal-loader-size));block-size:var(--calcite-loader-size, var(--calcite-internal-loader-size))}.ring--track{stroke:var(--calcite-loader-track-color, var(--calcite-color-transparent-press))}.ring--progress{stroke:var(--calcite-loader-progress-color, var(--calcite-color-brand));transform:rotate(-90deg);transition:all var(--calcite-internal-animation-timing-fast) linear}:host([type=indeterminate]) .ring--progress{animation:loader-clockwise calc(var(--calcite-internal-animation-timing-slow) / var(--calcite-internal-duration-factor) * 2 / var(--calcite-internal-duration-factor)) linear infinite}:host([inline]){--calcite-internal-stroke-width: 2;position:relative;margin:0;stroke:currentColor;stroke-width:2;padding-block:0px;block-size:var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline)));min-block-size:var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline)));inline-size:var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline)));vertical-align:calc(var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline))) * -1 * .2)}:host([inline]) .rings{inset-block-start:0px;margin:0;inset-inline-start:0;inline-size:var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline)));block-size:var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline)))}:host([inline]) .ring{inline-size:var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline)));block-size:var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline)))}:host([inline]) .ring--progress{stroke:var(--calcite-loader-progress-color-inline, currentColor)}:host([complete]){opacity:0;transform:scale(.75);transform-origin:center;transition:opacity var(--calcite-internal-animation-timing-medium) linear 1s,transform var(--calcite-internal-animation-timing-medium) linear 1s}:host([complete]) .rings{opacity:0;transform:scale(.75);transform-origin:center;transition:opacity calc(.18s * var(--calcite-internal-duration-factor)) linear .8s,transform calc(.18s * var(--calcite-internal-duration-factor)) linear .8s}:host([complete]) .percentage{color:var(--calcite-color-brand);transform:scale(1.05);transform-origin:center;transition:color var(--calcite-internal-animation-timing-medium) linear,transform var(--calcite-internal-animation-timing-medium) linear}@keyframes loader-clockwise{0%{transform:rotate(0)}to{transform:rotate(360deg)}}:host([hidden]){display:none}[hidden]{display:none}`,fN=class fN extends dt{constructor(){super(...arguments),this.messages=un({name:null}),this.complete=!1,this.inline=!1,this.scale="m",this.text="",this.type="indeterminate",this.value=0}connectedCallback(){super.connectedCallback(),this.updateFormatter()}load(){requestAnimationFrame(()=>this.valueChangeHandler())}willUpdate(e){e.has("value")&&(this.hasUpdated||this.value!==0)&&this.valueChangeHandler(),(e.has("type")&&(this.hasUpdated||this.type!=="indeterminate")||e.has("messages"))&&this.updateFormatter()}valueChangeHandler(){this.complete=this.type.startsWith("determinate")&&this.value===100}formatValue(){return this.type!=="determinate-value"?`${this.value}`:this.formatter.format(this.value/100)}getSize(e){return{s:32,m:64,l:96}[e]}getInlineSize(e){return{s:12,m:16,l:24}[e]}updateFormatter(){var e;this.type!=="determinate-value"||((e=this.formatter)==null?void 0:e.resolvedOptions().locale)===this.messages._lang||(this.formatter=new Intl.NumberFormat(this.messages._lang,{style:"percent"}))}render(){const{el:e,inline:i,label:r,text:n,type:s,value:a}=this,o=e.id||Mc(),l=s!=="indeterminate",c=Math.floor(a);return this.el.ariaLabel=r,this.el.ariaValueMax=l?"100":void 0,this.el.ariaValueMin=l?"0":void 0,this.el.ariaValueNow=l?c.toString():void 0,wu(this.el,"id",o),this.el.role="progressbar",q`<div class=${H(U1.rings)}>${this.renderRing("track")}${this.renderRing("progress")}${!i&&l&&q`<div class=${H(U1.percentage)}>${this.formatValue()}</div>`||""}</div>${!i&&n&&q`<div class=${H(U1.text)}>${n}</div>`||""}`}renderRing(e){const{inline:i,scale:r,value:n}=this,s=i?this.getInlineSize(r):this.getSize(r),o=s*.45;let l;if(e==="progress"){const c=2*o*Math.PI,h=(this.type.startsWith("determinate")?n:24)/100*c,m=c-h;l={"stroke-dasharray":`${h} ${m}`}}return q`<svg aria-hidden=true class=${H({[U1.ring]:!0,[U1.trackRing]:e==="track",[U1.progressRing]:e==="progress"})} style=${qt(l)} viewBox=${`0 0 ${s} ${s}`}>${Xi`<circle cx=${s/2} cy=${s/2} r=${o??Xe} />`}</svg>`}};fN.properties={complete:[7,{},{reflect:!0,type:Boolean}],inline:[7,{},{reflect:!0,type:Boolean}],label:1,scale:[3,{},{reflect:!0}],text:1,type:[3,{},{reflect:!0}],value:[9,{},{type:Number}]},fN.styles=dlt;let gz=fN;ci("calcite-loader",gz);const rA=Object.freeze(Object.defineProperty({__proto__:null,Loader:gz},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const hlt=["calcite-input","calcite-input-number","calcite-input-text","calcite-text-area"];function plt(t){return`${t.split("-").map((r,n)=>n===0?r:`${r[0].toUpperCase()}${r.slice(1)}`).join("")}${hlt.includes(t)?"Input":"Change"}`}const eG="hidden-form-input";function RJ(t){return"checked"in t}const tG=new WeakMap,zJ=new WeakSet;function flt(t,e){if(ST(e.parentElement,"[form]"))return!0;const r="calciteInternalFormComponentRegister";let n=!1;return t.addEventListener(r,s=>{n=s.composedPath().some(a=>zJ.has(a)),s.stopPropagation()},{once:!0}),e.dispatchEvent(new CustomEvent(r,{bubbles:!0,composed:!0})),n}function mlt(t,{status:e,message:i,icon:r}){"status"in t&&(t.status=e),"validationIcon"in t&&typeof t.validationIcon!="string"&&(t.validationIcon=r),"validationMessage"in t&&!t.validationMessage&&(t.validationMessage=i)}function VSe(t){return t.nodeName==="CALCITE-RADIO-BUTTON"?ST(t,"calcite-radio-button-group"):t}const glt=new CustomEvent("calciteInvalid",{bubbles:!0,composed:!0});function sce(t){var o;const e=t==null?void 0:t.target,i=e==null?void 0:e.validationMessage,r=VSe(e==null?void 0:e.parentElement);if(!r)return;const n=(o=r==null?void 0:r.nodeName)==null?void 0:o.toLowerCase(),s=n==null?void 0:n.split("-");if(s.length<2||s[0]!=="calcite")return;t==null||t.preventDefault(),"validity"in r&&(r.validity=e==null?void 0:e.validity),r.dispatchEvent(glt),mlt(r,{message:i,icon:!0,status:"invalid"});const a=plt(n);r.addEventListener(a,()=>{"status"in r&&(r.status="idle"),"validationIcon"in r&&(r.validationIcon===""||r.validationIcon===!0)&&(r.validationIcon=!1),"validationMessage"in r&&r.validationMessage===i&&(r.validationMessage=""),"validity"in r&&(r.validity=e==null?void 0:e.validity)},{once:!0})}function NJ(t){const{formEl:e}=t;return e?(e.addEventListener("invalid",sce,!0),e.requestSubmit(),e.removeEventListener("invalid",sce,!0),requestAnimationFrame(()=>{const i=e.querySelectorAll("[status=invalid]");for(const r of i)if(r!=null&&r.validationMessage){r==null||r.setFocus();break}}),!0):!1}function USe(t){var e;(e=t.formEl)==null||e.reset()}function DJ(t){const{el:e,value:i}=t,r=jJ(t);if(!r||flt(r,e))return;t.formEl=r,t.defaultValue=i,RJ(t)&&(t.defaultChecked=t.checked);const n=ylt.bind(t);r.addEventListener("reset",n),tG.set(t.el,n),zJ.add(e)}function jJ(t){const{el:e,form:i}=t;return i?gk(e,{id:i}):ST(e,"form")}function ylt(){var t;if("status"in this&&(this.status="idle"),"validationIcon"in this&&(this.validationIcon=!1),"validationMessage"in this&&(this.validationMessage=""),RJ(this)){this.checked=this.defaultChecked;return}this.value=this.defaultValue,(t=this.onFormReset)==null||t.call(this)}function VJ(t){const{el:e,formEl:i}=t;if(!i)return;const r=tG.get(e);i.removeEventListener("reset",r),tG.delete(e),t.formEl=null,zJ.delete(e)}function BSe(t,e){t.defaultValue=e}const iG="calciteInternalHiddenInputInput",qSe=t=>{t.target.dispatchEvent(new CustomEvent(iG,{bubbles:!0}))},ace=t=>t.removeEventListener("input",qSe);function vlt(t){const{el:e,formEl:i,name:r,value:n}=t,{ownerDocument:s}=e,a=e.querySelectorAll(`input[slot="${eG}"]`);if(!i||!r){a.forEach(m=>{ace(m),m.remove()});return}const o=Array.isArray(n)?n:[n],l=[],c=new Set;a.forEach(m=>{const g=o.find(v=>v==m.value);g!=null?(c.add(g),oce(t,m,g)):l.push(m)});let h;o.forEach(m=>{if(c.has(m))return;let g=l.pop();g||(g=s.createElement("input"),g.ariaHidden="true",g.slot=eG),h||(h=s.createDocumentFragment()),h.append(g),g.addEventListener("input",qSe),oce(t,g,m)}),h&&e.append(h),l.forEach(m=>{ace(m),m.remove()})}function oce(t,e,i){var c;const{defaultValue:r,disabled:n,form:s,name:a,required:o}=t;e.defaultValue=r,e.disabled=n,e.name=a,e.required=o,e.tabIndex=-1,s?e.setAttribute("form",s):e.removeAttribute("form"),RJ(t)?(e.checked=t.checked,e.defaultChecked=t.defaultChecked,e.value=t.checked?i||"on":""):e.value=i||"",(c=t.syncHiddenFormInput)==null||c.call(t,e);const l=VSe(t.el);if(l&&"validity"in l)for(const h in{...e==null?void 0:e.validity})l.validity[h]=e.validity[h]}const UJ=({component:t})=>(vlt(t),q`<slot name=${eG}></slot>`);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Ju={button:"button",buttonTextVisible:"button--text-visible",buttonCompact:"button--compact",indicatorText:"indicator-text",iconContainer:"icon-container",slotContainer:"slot-container",slotContainerHidden:"slot-container--hidden",textContainer:"text-container",textContainerVisible:"text-container--visible",indicatorWithIcon:"indicator-with-icon",indicatorWithoutIcon:"indicator-without-icon"},lce="calcite-action",blt={button:t=>`${lce}-${t}-button`,indicator:t=>`${lce}-${t}-indicator`},wlt={tooltip:"tooltip"},_lt=ct`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex;cursor:pointer;background-color:transparent;--calcite-internal-action-text-color: var(--calcite-color-text-3);border-radius:var(--calcite-action-corner-radius, var(--calcite-action-corner-radius-start-start, var(--calcite-corner-radius)) var(--calcite-action-corner-radius-start-end, var(--calcite-corner-radius)) var(--calcite-action-corner-radius-end-end, var(--calcite-corner-radius)) var(--calcite-action-corner-radius-end-start, var(--calcite-corner-radius)))}.interaction-container{border-radius:inherit}:host([width=full]){flex:1 0 auto}:host([width=full]) .button{justify-content:center}:host([width=full]) .button .text-container--visible{flex:none}:host([drag-handle]){cursor:move;--calcite-internal-action-text-color: var(--calcite-color-border-input);--calcite-internal-action-padding-inline: var(--calcite-spacing-xxs)}.button{border-radius:inherit;position:relative;margin:0;display:flex;inline-size:auto;align-items:center;justify-content:flex-start;border-style:none;font-family:var(--calcite-font-family);font-size:var(--calcite-font-size--2);line-height:1rem;font-weight:var(--calcite-font-weight-medium);outline-color:transparent;background-color:var(--calcite-action-background-color, var(--calcite-color-foreground-1));color:var(--calcite-action-text-color, var(--calcite-internal-action-text-color));text-align:unset;flex:1 0 auto;cursor:inherit}.button:hover{background-color:var(--calcite-action-background-color-hover, var(--calcite-color-foreground-2));color:var(--calcite-action-text-color-press, var(--calcite-action-text-color-pressed, var(--calcite-color-text-1)))}.button:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.button:active{background-color:var(--calcite-action-background-color-press, var(--calcite-action-background-color-pressed, var(--calcite-color-foreground-3)))}.icon-container{pointer-events:none;margin:0;display:flex;align-items:center;justify-content:center;min-inline-size:1rem;min-block-size:1.5rem}.text-container{margin:0;inline-size:0px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;line-height:1.5rem;opacity:0;transition-property:opacity;transition-duration:var(--calcite-animation-timing);transition-timing-function:cubic-bezier(.4,0,.2,1);transition-property:inline-size}.text-container--visible{inline-size:auto;flex:1 1 auto;opacity:1}:host([active]) .button{background-color:var(--calcite-action-background-color, var(--calcite-color-foreground-3));color:var(--calcite-action-text-color-press, var(--calcite-action-text-color-pressed, var(--calcite-color-text-1)))}:host([active]) .button:hover{background-color:var(--calcite-action-background-color-hover, var(--calcite-color-foreground-3))}:host([active]) .button:active{background-color:var(--calcite-action-background-color-press, var(--calcite-action-background-color-pressed, var(--calcite-color-foreground-3)))}:host([loading]) .button:hover,:host([loading]) .button:focus{background-color:var(--calcite-action-background-color, var(--calcite-color-foreground-1))}:host([loading]) .text-container{opacity:var(--calcite-opacity-disabled)}:host([loading]) calcite-loader[inline]{margin-inline-end:0px}:host([appearance=transparent]):host([active]) .button{background-color:var(--calcite-color-transparent-press)}:host([appearance=transparent]) .button{background-color:transparent;transition-property:box-shadow;transition-duration:var(--calcite-animation-timing);transition-timing-function:cubic-bezier(.4,0,.2,1)}:host([appearance=transparent]) .button:hover{background-color:var(--calcite-color-transparent-hover)}:host([appearance=transparent]) .button:active{background-color:var(--calcite-color-transparent-press)}:host([active-descendant]) .button{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}:host([scale=s]) .button{font-size:var(--calcite-font-size--2);line-height:1rem;font-weight:var(--calcite-font-weight-normal);padding-inline:var(--calcite-internal-action-padding-inline, .5rem);padding-block:var(--calcite-internal-action-padding-block, var(--calcite-spacing-xxs))}:host([scale=s]) .button--text-visible .icon-container{margin-inline-end:.5rem}:host([scale=m]) .button{font-size:var(--calcite-font-size--1);line-height:1rem;font-weight:var(--calcite-font-weight-normal);padding-inline:var(--calcite-internal-action-padding-inline, 1rem);padding-block:var(--calcite-internal-action-padding-block, var(--calcite-spacing-md))}:host([scale=m]) .button--text-visible .icon-container{margin-inline-end:.75rem}:host([scale=l]) .button{font-size:var(--calcite-font-size-0);line-height:1.25rem;font-weight:var(--calcite-font-weight-normal);padding-inline:var(--calcite-internal-action-padding-inline, 1.25rem);padding-block:var(--calcite-internal-action-padding-block, var(--calcite-spacing-xl))}:host([scale=l]) .button--text-visible .icon-container{margin-inline-end:1rem}:host([alignment=center]) .button{justify-content:center}:host([alignment=end]) .button{justify-content:flex-end}:host([alignment=center]) .button .text-container--visible,:host([alignment=end]) .button .text-container--visible{flex:0 1 auto}:host([scale=s][compact]) .button,:host([scale=m][compact]) .button,:host([scale=l][compact]) .button{padding-inline:0px}.slot-container{display:flex}.slot-container--hidden{display:none}.button--text-visible{inline-size:100%}.indicator-with-icon{position:relative}.indicator-with-icon:after{content:"";position:absolute;block-size:.5rem;inline-size:.5rem;border-radius:9999px;inset-block-end:-.275rem;inset-inline-end:-.275rem;background-color:var(--calcite-action-indicator-color, var(--calcite-color-brand))}.indicator-without-icon{margin-inline:.25rem;inline-size:1rem;position:relative}.indicator-without-icon:after{content:"";position:absolute;block-size:.5rem;inline-size:.5rem;border-radius:9999px;inset-block-end:-.275rem;inset-inline-end:-.275rem;background-color:var(--calcite-action-indicator-color, var(--calcite-color-brand))}.indicator-text{position:absolute;inline-size:1px;block-size:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}:host([hidden]){display:none}[hidden]{display:none}:host([disabled]) .button,:host([disabled]) .button:hover,:host([disabled]) .button:focus{cursor:default;opacity:var(--calcite-opacity-disabled);background-color:var(--calcite-action-background-color, var(--calcite-action-background-color, var(--calcite-color-foreground-1)))}:host([disabled]):host([active]) .button,:host([disabled]):host([active]) .button:hover,:host([disabled]):host([active]) .button:focus{opacity:var(--calcite-opacity-disabled);background-color:var(--calcite-action-background-color-press, var(--calcite-action-background-color-press, var(--calcite-action-background-color-pressed, var(--calcite-color-foreground-3))))}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}`,mN=class mN extends dt{constructor(){super(...arguments),this.guid=Mc(),this.buttonEl=vi(),this.buttonId=blt.button(this.guid),this.mutationObserver=Gn("mutation",()=>this.requestUpdate()),this.messages=un({blocking:!0}),this.focusSetter=dn()(this),this.active=!1,this.activeDescendant=!1,this.appearance="solid",this.compact=!1,this.disabled=!1,this.dragHandle=!1,this.iconFlipRtl=!1,this.indicator=!1,this.loading=!1,this.scale="m",this.width="auto",this.textEnabled=!1,this.type="button"}async setFocus(e){return this.focusSetter(()=>this.buttonEl.value,e)}connectedCallback(){var e;super.connectedCallback(),this.formEl=jJ(this),(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0,subtree:!0})}updated(){Vs(this)}disconnectedCallback(){var e;super.disconnectedCallback(),this.formEl=null,(e=this.mutationObserver)==null||e.disconnect()}handleClick(){const{type:e}=this;e==="submit"?NJ(this):e==="reset"&&USe(this)}handleTooltipSlotChange(e){const r=e.target.assignedElements({flatten:!0}).filter(n=>n==null?void 0:n.matches("calcite-tooltip"))[0];r&&(r.referenceElement=this.buttonEl.value)}storeIndicatorEl(e){this.indicatorEl=e}renderTextContainer(){const{text:e,textEnabled:i}=this,r={[Ju.textContainer]:!0,[Ju.textContainerVisible]:i};return e?nt("text-container",q`<div class=${H(r)}>${e}</div>`):null}renderIndicatorText(){const{indicator:e,messages:i,buttonId:r}=this;return q`<div aria-labelledby=${r??Pe} aria-live=polite class=${H(Ju.indicatorText)} role=region ${gt(this.storeIndicatorEl)}>${e?i.indicator:null}</div>`}renderIconContainer(){var v;const{loading:e,icon:i,scale:r,el:n,iconFlipRtl:s,indicator:a}=this,o=r==="l"?"l":"m",l=e?q`<calcite-loader inline .label=${this.messages.loading} .scale=${o}></calcite-loader>`:null,c=i?q`<calcite-icon class=${H({[Ju.indicatorWithIcon]:a})} .flipRtl=${s} .icon=${i} .scale=${gr(this.scale)}></calcite-icon>`:null,h=l||c,m=h||((v=n.children)==null?void 0:v.length),g=q`<div class=${H({[Ju.slotContainer]:!0,[Ju.slotContainerHidden]:e})}><slot></slot></div>`;return m?nt("icon-container",q`<div aria-hidden=true class=${H(Ju.iconContainer)}>${h}${g}</div>`):null}renderButton(){var k,A,L,z,U,B,X,J,Q,le,ie,re,se;const{compact:e,disabled:i,icon:r,loading:n,textEnabled:s,label:a,text:o,indicator:l,indicatorEl:c,buttonId:h,messages:m}=this,g=a||o||"",v=l?m.indicatorLabel.replace("{label}",g):g,b={[Ju.button]:!0,[Ju.buttonTextVisible]:s,[Ju.buttonCompact]:e},x=q`${this.renderIconContainer()}${this.renderTextContainer()}${!r&&l&&nt("indicator-no-icon",q`<div class=${H(Ju.indicatorWithoutIcon)}></div>`)||""}`,$=l&&c?[c]:[],M=[...((k=this.aria)==null?void 0:k.controlsElements)??[],...$];return this.dragHandle?q`<span .ariaBusy=${n} .ariaControlsElements=${M} .ariaDescribedByElements=${(A=this.aria)==null?void 0:A.describedByElements} .ariaExpanded=${(L=this.aria)==null?void 0:L.expanded} .ariaHasPopup=${(z=this.aria)==null?void 0:z.hasPopup} .ariaLabel=${v} .ariaLabelledByElements=${(U=this.aria)==null?void 0:U.labelledByElements} .ariaOwnsElements=${(B=this.aria)==null?void 0:B.ownsElements} .ariaPressed=${(X=this.aria)==null?void 0:X.pressed} class=${H(b)} id=${h??Pe} role=button tabindex=${this.disabled?null:0} ${gt(this.buttonEl)}>${x}</span>`:q`<button .ariaBusy=${n} .ariaControlsElements=${M} .ariaDescribedByElements=${(J=this.aria)==null?void 0:J.describedByElements} .ariaExpanded=${(Q=this.aria)==null?void 0:Q.expanded} .ariaHasPopup=${(le=this.aria)==null?void 0:le.hasPopup} .ariaLabel=${v} .ariaLabelledByElements=${(ie=this.aria)==null?void 0:ie.labelledByElements} .ariaOwnsElements=${(re=this.aria)==null?void 0:re.ownsElements} .ariaPressed=${(se=this.aria)==null?void 0:se.pressed} class=${H(b)} .disabled=${i} id=${h??Pe} @click=${this.handleClick} ${gt(this.buttonEl)}>${x}</button>`}render(){return Us({disabled:this.disabled,children:q`${this.renderButton()}<slot name=${wlt.tooltip} @slotchange=${this.handleTooltipSlotChange}></slot>${this.renderIndicatorText()}`})}};mN.properties={aria:[0,{},{attribute:!1}],active:[7,{},{reflect:!0,type:Boolean}],activeDescendant:[7,{},{reflect:!0,type:Boolean}],alignment:[3,{},{reflect:!0}],appearance:[3,{},{reflect:!0}],compact:[7,{},{reflect:!0,type:Boolean}],disabled:[7,{},{reflect:!0,type:Boolean}],dragHandle:[7,{},{reflect:!0,type:Boolean}],form:[3,{},{reflect:!0}],icon:[3,{},{reflect:!0}],iconFlipRtl:[7,{},{reflect:!0,type:Boolean}],indicator:[7,{},{reflect:!0,type:Boolean}],label:1,loading:[7,{},{reflect:!0,type:Boolean}],messageOverrides:[0,{},{attribute:!1}],scale:[3,{},{reflect:!0}],width:[3,{},{reflect:!0}],text:1,textEnabled:[7,{},{reflect:!0,type:Boolean}],type:[3,{},{reflect:!0}]},mN.styles=_lt;let yz=mN;ci("calcite-action",yz);const BJ=Object.freeze(Object.defineProperty({__proto__:null,Action:yz},Symbol.toStringTag,{value:"Module"})),HSe=["top","right","bottom","left"],cce=["start","end"],uce=HSe.reduce((t,e)=>t.concat(e,e+"-"+cce[0],e+"-"+cce[1]),[]),cT=Math.min,hw=Math.max,vz=Math.round,KO=Math.floor,Pp=t=>({x:t,y:t}),xlt={left:"right",right:"left",bottom:"top",top:"bottom"},$lt={start:"end",end:"start"};function rG(t,e,i){return hw(t,cT(e,i))}function M_(t,e){return typeof t=="function"?t(e):t}function Jm(t){return t.split("-")[0]}function Op(t){return t.split("-")[1]}function GSe(t){return t==="x"?"y":"x"}function qJ(t){return t==="y"?"height":"width"}const Slt=new Set(["top","bottom"]);function hv(t){return Slt.has(Jm(t))?"y":"x"}function HJ(t){return GSe(hv(t))}function WSe(t,e,i){i===void 0&&(i=!1);const r=Op(t),n=HJ(t),s=qJ(n);let a=n==="x"?r===(i?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(a=wz(a)),[a,wz(a)]}function Tlt(t){const e=wz(t);return[bz(t),e,bz(e)]}function bz(t){return t.replace(/start|end/g,e=>$lt[e])}const dce=["left","right"],hce=["right","left"],Ilt=["top","bottom"],Mlt=["bottom","top"];function Clt(t,e,i){switch(t){case"top":case"bottom":return i?e?hce:dce:e?dce:hce;case"left":case"right":return e?Ilt:Mlt;default:return[]}}function Elt(t,e,i,r){const n=Op(t);let s=Clt(Jm(t),i==="start",r);return n&&(s=s.map(a=>a+"-"+n),e&&(s=s.concat(s.map(bz)))),s}function wz(t){return t.replace(/left|right|bottom|top/g,e=>xlt[e])}function klt(t){return{top:0,right:0,bottom:0,left:0,...t}}function ZSe(t){return typeof t!="number"?klt(t):{top:t,right:t,bottom:t,left:t}}function _z(t){const{x:e,y:i,width:r,height:n}=t;return{width:r,height:n,top:i,left:e,right:e+r,bottom:i+n,x:e,y:i}}function pce(t,e,i){let{reference:r,floating:n}=t;const s=hv(e),a=HJ(e),o=qJ(a),l=Jm(e),c=s==="y",h=r.x+r.width/2-n.width/2,m=r.y+r.height/2-n.height/2,g=r[o]/2-n[o]/2;let v;switch(l){case"top":v={x:h,y:r.y-n.height};break;case"bottom":v={x:h,y:r.y+r.height};break;case"right":v={x:r.x+r.width,y:m};break;case"left":v={x:r.x-n.width,y:m};break;default:v={x:r.x,y:r.y}}switch(Op(e)){case"start":v[a]-=g*(i&&c?-1:1);break;case"end":v[a]+=g*(i&&c?-1:1);break}return v}const Alt=async(t,e,i)=>{const{placement:r="bottom",strategy:n="absolute",middleware:s=[],platform:a}=i,o=s.filter(Boolean),l=await(a.isRTL==null?void 0:a.isRTL(e));let c=await a.getElementRects({reference:t,floating:e,strategy:n}),{x:h,y:m}=pce(c,r,l),g=r,v={},b=0;for(let x=0;x<o.length;x++){const{name:$,fn:M}=o[x],{x:k,y:A,data:L,reset:z}=await M({x:h,y:m,initialPlacement:r,placement:g,strategy:n,middlewareData:v,rects:c,platform:a,elements:{reference:t,floating:e}});h=k??h,m=A??m,v={...v,[$]:{...v[$],...L}},z&&b<=50&&(b++,typeof z=="object"&&(z.placement&&(g=z.placement),z.rects&&(c=z.rects===!0?await a.getElementRects({reference:t,floating:e,strategy:n}):z.rects),{x:h,y:m}=pce(c,g,l)),x=-1)}return{x:h,y:m,placement:g,strategy:n,middlewareData:v}};async function UE(t,e){var i;e===void 0&&(e={});const{x:r,y:n,platform:s,rects:a,elements:o,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:h="viewport",elementContext:m="floating",altBoundary:g=!1,padding:v=0}=M_(e,t),b=ZSe(v),$=o[g?m==="floating"?"reference":"floating":m],M=_z(await s.getClippingRect({element:(i=await(s.isElement==null?void 0:s.isElement($)))==null||i?$:$.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(o.floating)),boundary:c,rootBoundary:h,strategy:l})),k=m==="floating"?{x:r,y:n,width:a.floating.width,height:a.floating.height}:a.reference,A=await(s.getOffsetParent==null?void 0:s.getOffsetParent(o.floating)),L=await(s.isElement==null?void 0:s.isElement(A))?await(s.getScale==null?void 0:s.getScale(A))||{x:1,y:1}:{x:1,y:1},z=_z(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:k,offsetParent:A,strategy:l}):k);return{top:(M.top-z.top+b.top)/L.y,bottom:(z.bottom-M.bottom+b.bottom)/L.y,left:(M.left-z.left+b.left)/L.x,right:(z.right-M.right+b.right)/L.x}}const Plt=t=>({name:"arrow",options:t,async fn(e){const{x:i,y:r,placement:n,rects:s,platform:a,elements:o,middlewareData:l}=e,{element:c,padding:h=0}=M_(t,e)||{};if(c==null)return{};const m=ZSe(h),g={x:i,y:r},v=HJ(n),b=qJ(v),x=await a.getDimensions(c),$=v==="y",M=$?"top":"left",k=$?"bottom":"right",A=$?"clientHeight":"clientWidth",L=s.reference[b]+s.reference[v]-g[v]-s.floating[b],z=g[v]-s.reference[v],U=await(a.getOffsetParent==null?void 0:a.getOffsetParent(c));let B=U?U[A]:0;(!B||!await(a.isElement==null?void 0:a.isElement(U)))&&(B=o.floating[A]||s.floating[b]);const X=L/2-z/2,J=B/2-x[b]/2-1,Q=cT(m[M],J),le=cT(m[k],J),ie=Q,re=B-x[b]-le,se=B/2-x[b]/2+X,Te=rG(ie,se,re),ne=!l.arrow&&Op(n)!=null&&se!==Te&&s.reference[b]/2-(se<ie?Q:le)-x[b]/2<0,_e=ne?se<ie?se-ie:se-re:0;return{[v]:g[v]+_e,data:{[v]:Te,centerOffset:se-Te-_e,...ne&&{alignmentOffset:_e}},reset:ne}}});function Olt(t,e,i){return(t?[...i.filter(n=>Op(n)===t),...i.filter(n=>Op(n)!==t)]:i.filter(n=>Jm(n)===n)).filter(n=>t?Op(n)===t||(e?bz(n)!==n:!1):!0)}const Llt=function(t){return t===void 0&&(t={}),{name:"autoPlacement",options:t,async fn(e){var i,r,n;const{rects:s,middlewareData:a,placement:o,platform:l,elements:c}=e,{crossAxis:h=!1,alignment:m,allowedPlacements:g=uce,autoAlignment:v=!0,...b}=M_(t,e),x=m!==void 0||g===uce?Olt(m||null,v,g):g,$=await UE(e,b),M=((i=a.autoPlacement)==null?void 0:i.index)||0,k=x[M];if(k==null)return{};const A=WSe(k,s,await(l.isRTL==null?void 0:l.isRTL(c.floating)));if(o!==k)return{reset:{placement:x[0]}};const L=[$[Jm(k)],$[A[0]],$[A[1]]],z=[...((r=a.autoPlacement)==null?void 0:r.overflows)||[],{placement:k,overflows:L}],U=x[M+1];if(U)return{data:{index:M+1,overflows:z},reset:{placement:U}};const B=z.map(Q=>{const le=Op(Q.placement);return[Q.placement,le&&h?Q.overflows.slice(0,2).reduce((ie,re)=>ie+re,0):Q.overflows[0],Q.overflows]}).sort((Q,le)=>Q[1]-le[1]),J=((n=B.filter(Q=>Q[2].slice(0,Op(Q[0])?2:3).every(le=>le<=0))[0])==null?void 0:n[0])||B[0][0];return J!==o?{data:{index:M+1,overflows:z},reset:{placement:J}}:{}}}},Flt=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var i,r;const{placement:n,middlewareData:s,rects:a,initialPlacement:o,platform:l,elements:c}=e,{mainAxis:h=!0,crossAxis:m=!0,fallbackPlacements:g,fallbackStrategy:v="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:x=!0,...$}=M_(t,e);if((i=s.arrow)!=null&&i.alignmentOffset)return{};const M=Jm(n),k=hv(o),A=Jm(o)===o,L=await(l.isRTL==null?void 0:l.isRTL(c.floating)),z=g||(A||!x?[wz(o)]:Tlt(o)),U=b!=="none";!g&&U&&z.push(...Elt(o,x,b,L));const B=[o,...z],X=await UE(e,$),J=[];let Q=((r=s.flip)==null?void 0:r.overflows)||[];if(h&&J.push(X[M]),m){const se=WSe(n,a,L);J.push(X[se[0]],X[se[1]])}if(Q=[...Q,{placement:n,overflows:J}],!J.every(se=>se<=0)){var le,ie;const se=(((le=s.flip)==null?void 0:le.index)||0)+1,Te=B[se];if(Te&&(!(m==="alignment"?k!==hv(Te):!1)||Q.every(Oe=>hv(Oe.placement)===k?Oe.overflows[0]>0:!0)))return{data:{index:se,overflows:Q},reset:{placement:Te}};let ne=(ie=Q.filter(_e=>_e.overflows[0]<=0).sort((_e,Oe)=>_e.overflows[1]-Oe.overflows[1])[0])==null?void 0:ie.placement;if(!ne)switch(v){case"bestFit":{var re;const _e=(re=Q.filter(Oe=>{if(U){const He=hv(Oe.placement);return He===k||He==="y"}return!0}).map(Oe=>[Oe.placement,Oe.overflows.filter(He=>He>0).reduce((He,ft)=>He+ft,0)]).sort((Oe,He)=>Oe[1]-He[1])[0])==null?void 0:re[0];_e&&(ne=_e);break}case"initialPlacement":ne=o;break}if(n!==ne)return{reset:{placement:ne}}}return{}}}};function fce(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function mce(t){return HSe.some(e=>t[e]>=0)}const Rlt=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:i}=e,{strategy:r="referenceHidden",...n}=M_(t,e);switch(r){case"referenceHidden":{const s=await UE(e,{...n,elementContext:"reference"}),a=fce(s,i.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:mce(a)}}}case"escaped":{const s=await UE(e,{...n,altBoundary:!0}),a=fce(s,i.floating);return{data:{escapedOffsets:a,escaped:mce(a)}}}default:return{}}}}},zlt=new Set(["left","top"]);async function Nlt(t,e){const{placement:i,platform:r,elements:n}=t,s=await(r.isRTL==null?void 0:r.isRTL(n.floating)),a=Jm(i),o=Op(i),l=hv(i)==="y",c=zlt.has(a)?-1:1,h=s&&l?-1:1,m=M_(e,t);let{mainAxis:g,crossAxis:v,alignmentAxis:b}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return o&&typeof b=="number"&&(v=o==="end"?b*-1:b),l?{x:v*h,y:g*c}:{x:g*c,y:v*h}}const Dlt=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var i,r;const{x:n,y:s,placement:a,middlewareData:o}=e,l=await Nlt(e,t);return a===((i=o.offset)==null?void 0:i.placement)&&(r=o.arrow)!=null&&r.alignmentOffset?{}:{x:n+l.x,y:s+l.y,data:{...l,placement:a}}}}},jlt=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:i,y:r,placement:n}=e,{mainAxis:s=!0,crossAxis:a=!1,limiter:o={fn:$=>{let{x:M,y:k}=$;return{x:M,y:k}}},...l}=M_(t,e),c={x:i,y:r},h=await UE(e,l),m=hv(Jm(n)),g=GSe(m);let v=c[g],b=c[m];if(s){const $=g==="y"?"top":"left",M=g==="y"?"bottom":"right",k=v+h[$],A=v-h[M];v=rG(k,v,A)}if(a){const $=m==="y"?"top":"left",M=m==="y"?"bottom":"right",k=b+h[$],A=b-h[M];b=rG(k,b,A)}const x=o.fn({...e,[g]:v,[m]:b});return{...x,data:{x:x.x-i,y:x.y-r,enabled:{[g]:s,[m]:a}}}}}};function N5(){return typeof window<"u"}function rI(t){return YSe(t)?(t.nodeName||"").toLowerCase():"#document"}function Tc(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Wp(t){var e;return(e=(YSe(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function YSe(t){return N5()?t instanceof Node||t instanceof Tc(t).Node:!1}function Ud(t){return N5()?t instanceof Element||t instanceof Tc(t).Element:!1}function Bp(t){return N5()?t instanceof HTMLElement||t instanceof Tc(t).HTMLElement:!1}function gce(t){return!N5()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Tc(t).ShadowRoot}const Vlt=new Set(["inline","contents"]);function nA(t){const{overflow:e,overflowX:i,overflowY:r,display:n}=Bd(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+i)&&!Vlt.has(n)}const Ult=new Set(["table","td","th"]);function Blt(t){return Ult.has(rI(t))}const qlt=[":popover-open",":modal"];function D5(t){return qlt.some(e=>{try{return t.matches(e)}catch{return!1}})}const Hlt=["transform","translate","scale","rotate","perspective"],Glt=["transform","translate","scale","rotate","perspective","filter"],Wlt=["paint","layout","strict","content"];function j5(t){const e=GJ(),i=Ud(t)?Bd(t):t;return Hlt.some(r=>i[r]?i[r]!=="none":!1)||(i.containerType?i.containerType!=="normal":!1)||!e&&(i.backdropFilter?i.backdropFilter!=="none":!1)||!e&&(i.filter?i.filter!=="none":!1)||Glt.some(r=>(i.willChange||"").includes(r))||Wlt.some(r=>(i.contain||"").includes(r))}function Zlt(t){let e=Nv(t);for(;Bp(e)&&!uT(e);){if(j5(e))return e;if(D5(e))return null;e=Nv(e)}return null}function GJ(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Ylt=new Set(["html","body","#document"]);function uT(t){return Ylt.has(rI(t))}function Bd(t){return Tc(t).getComputedStyle(t)}function V5(t){return Ud(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Nv(t){if(rI(t)==="html")return t;const e=t.assignedSlot||t.parentNode||gce(t)&&t.host||Wp(t);return gce(e)?e.host:e}function JSe(t){const e=Nv(t);return uT(e)?t.ownerDocument?t.ownerDocument.body:t.body:Bp(e)&&nA(e)?e:JSe(e)}function BE(t,e,i){var r;e===void 0&&(e=[]),i===void 0&&(i=!0);const n=JSe(t),s=n===((r=t.ownerDocument)==null?void 0:r.body),a=Tc(n);if(s){const o=nG(a);return e.concat(a,a.visualViewport||[],nA(n)?n:[],o&&i?BE(o):[])}return e.concat(n,BE(n,[],i))}function nG(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function XSe(t){const e=Bd(t);let i=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const n=Bp(t),s=n?t.offsetWidth:i,a=n?t.offsetHeight:r,o=vz(i)!==s||vz(r)!==a;return o&&(i=s,r=a),{width:i,height:r,$:o}}function WJ(t){return Ud(t)?t:t.contextElement}function tS(t){const e=WJ(t);if(!Bp(e))return Pp(1);const i=e.getBoundingClientRect(),{width:r,height:n,$:s}=XSe(e);let a=(s?vz(i.width):i.width)/r,o=(s?vz(i.height):i.height)/n;return(!a||!Number.isFinite(a))&&(a=1),(!o||!Number.isFinite(o))&&(o=1),{x:a,y:o}}const Jlt=Pp(0);function QSe(t){const e=Tc(t);return!GJ()||!e.visualViewport?Jlt:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Xlt(t,e,i){return e===void 0&&(e=!1),!i||e&&i!==Tc(t)?!1:e}function u_(t,e,i,r){e===void 0&&(e=!1),i===void 0&&(i=!1);const n=t.getBoundingClientRect(),s=WJ(t);let a=Pp(1);e&&(r?Ud(r)&&(a=tS(r)):a=tS(t));const o=Xlt(s,i,r)?QSe(s):Pp(0);let l=(n.left+o.x)/a.x,c=(n.top+o.y)/a.y,h=n.width/a.x,m=n.height/a.y;if(s){const g=Tc(s),v=r&&Ud(r)?Tc(r):r;let b=g,x=nG(b);for(;x&&r&&v!==b;){const $=tS(x),M=x.getBoundingClientRect(),k=Bd(x),A=M.left+(x.clientLeft+parseFloat(k.paddingLeft))*$.x,L=M.top+(x.clientTop+parseFloat(k.paddingTop))*$.y;l*=$.x,c*=$.y,h*=$.x,m*=$.y,l+=A,c+=L,b=Tc(x),x=nG(b)}}return _z({width:h,height:m,x:l,y:c})}function U5(t,e){const i=V5(t).scrollLeft;return e?e.left+i:u_(Wp(t)).left+i}function KSe(t,e){const i=t.getBoundingClientRect(),r=i.left+e.scrollLeft-U5(t,i),n=i.top+e.scrollTop;return{x:r,y:n}}function Qlt(t){let{elements:e,rect:i,offsetParent:r,strategy:n}=t;const s=n==="fixed",a=Wp(r),o=e?D5(e.floating):!1;if(r===a||o&&s)return i;let l={scrollLeft:0,scrollTop:0},c=Pp(1);const h=Pp(0),m=Bp(r);if((m||!m&&!s)&&((rI(r)!=="body"||nA(a))&&(l=V5(r)),Bp(r))){const v=u_(r);c=tS(r),h.x=v.x+r.clientLeft,h.y=v.y+r.clientTop}const g=a&&!m&&!s?KSe(a,l):Pp(0);return{width:i.width*c.x,height:i.height*c.y,x:i.x*c.x-l.scrollLeft*c.x+h.x+g.x,y:i.y*c.y-l.scrollTop*c.y+h.y+g.y}}function Klt(t){return Array.from(t.getClientRects())}function ect(t){const e=Wp(t),i=V5(t),r=t.ownerDocument.body,n=hw(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=hw(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let a=-i.scrollLeft+U5(t);const o=-i.scrollTop;return Bd(r).direction==="rtl"&&(a+=hw(e.clientWidth,r.clientWidth)-n),{width:n,height:s,x:a,y:o}}const yce=25;function tct(t,e){const i=Tc(t),r=Wp(t),n=i.visualViewport;let s=r.clientWidth,a=r.clientHeight,o=0,l=0;if(n){s=n.width,a=n.height;const h=GJ();(!h||h&&e==="fixed")&&(o=n.offsetLeft,l=n.offsetTop)}const c=U5(r);if(c<=0){const h=r.ownerDocument,m=h.body,g=getComputedStyle(m),v=h.compatMode==="CSS1Compat"&&parseFloat(g.marginLeft)+parseFloat(g.marginRight)||0,b=Math.abs(r.clientWidth-m.clientWidth-v);b<=yce&&(s-=b)}else c<=yce&&(s+=c);return{width:s,height:a,x:o,y:l}}const ict=new Set(["absolute","fixed"]);function rct(t,e){const i=u_(t,!0,e==="fixed"),r=i.top+t.clientTop,n=i.left+t.clientLeft,s=Bp(t)?tS(t):Pp(1),a=t.clientWidth*s.x,o=t.clientHeight*s.y,l=n*s.x,c=r*s.y;return{width:a,height:o,x:l,y:c}}function vce(t,e,i){let r;if(e==="viewport")r=tct(t,i);else if(e==="document")r=ect(Wp(t));else if(Ud(e))r=rct(e,i);else{const n=QSe(t);r={x:e.x-n.x,y:e.y-n.y,width:e.width,height:e.height}}return _z(r)}function eTe(t,e){const i=Nv(t);return i===e||!Ud(i)||uT(i)?!1:Bd(i).position==="fixed"||eTe(i,e)}function nct(t,e){const i=e.get(t);if(i)return i;let r=BE(t,[],!1).filter(o=>Ud(o)&&rI(o)!=="body"),n=null;const s=Bd(t).position==="fixed";let a=s?Nv(t):t;for(;Ud(a)&&!uT(a);){const o=Bd(a),l=j5(a);!l&&o.position==="fixed"&&(n=null),(s?!l&&!n:!l&&o.position==="static"&&!!n&&ict.has(n.position)||nA(a)&&!l&&eTe(t,a))?r=r.filter(h=>h!==a):n=o,a=Nv(a)}return e.set(t,r),r}function sct(t){let{element:e,boundary:i,rootBoundary:r,strategy:n}=t;const a=[...i==="clippingAncestors"?D5(e)?[]:nct(e,this._c):[].concat(i),r],o=a[0],l=a.reduce((c,h)=>{const m=vce(e,h,n);return c.top=hw(m.top,c.top),c.right=cT(m.right,c.right),c.bottom=cT(m.bottom,c.bottom),c.left=hw(m.left,c.left),c},vce(e,o,n));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function act(t){const{width:e,height:i}=XSe(t);return{width:e,height:i}}function oct(t,e,i){const r=Bp(e),n=Wp(e),s=i==="fixed",a=u_(t,!0,s,e);let o={scrollLeft:0,scrollTop:0};const l=Pp(0);function c(){l.x=U5(n)}if(r||!r&&!s)if((rI(e)!=="body"||nA(n))&&(o=V5(e)),r){const v=u_(e,!0,s,e);l.x=v.x+e.clientLeft,l.y=v.y+e.clientTop}else n&&c();s&&!r&&n&&c();const h=n&&!r&&!s?KSe(n,o):Pp(0),m=a.left+o.scrollLeft-l.x-h.x,g=a.top+o.scrollTop-l.y-h.y;return{x:m,y:g,width:a.width,height:a.height}}function OU(t){return Bd(t).position==="static"}function bce(t,e){if(!Bp(t)||Bd(t).position==="fixed")return null;if(e)return e(t);let i=t.offsetParent;return Wp(t)===i&&(i=i.ownerDocument.body),i}function tTe(t,e){const i=Tc(t);if(D5(t))return i;if(!Bp(t)){let n=Nv(t);for(;n&&!uT(n);){if(Ud(n)&&!OU(n))return n;n=Nv(n)}return i}let r=bce(t,e);for(;r&&Blt(r)&&OU(r);)r=bce(r,e);return r&&uT(r)&&OU(r)&&!j5(r)?i:r||Zlt(t)||i}const lct=async function(t){const e=this.getOffsetParent||tTe,i=this.getDimensions,r=await i(t.floating);return{reference:oct(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function cct(t){return Bd(t).direction==="rtl"}const sG={convertOffsetParentRelativeRectToViewportRelativeRect:Qlt,getDocumentElement:Wp,getClippingRect:sct,getOffsetParent:tTe,getElementRects:lct,getClientRects:Klt,getDimensions:act,getScale:tS,isElement:Ud,isRTL:cct};function iTe(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function uct(t,e){let i=null,r;const n=Wp(t);function s(){var o;clearTimeout(r),(o=i)==null||o.disconnect(),i=null}function a(o,l){o===void 0&&(o=!1),l===void 0&&(l=1),s();const c=t.getBoundingClientRect(),{left:h,top:m,width:g,height:v}=c;if(o||e(),!g||!v)return;const b=KO(m),x=KO(n.clientWidth-(h+g)),$=KO(n.clientHeight-(m+v)),M=KO(h),A={rootMargin:-b+"px "+-x+"px "+-$+"px "+-M+"px",threshold:hw(0,cT(1,l))||1};let L=!0;function z(U){const B=U[0].intersectionRatio;if(B!==l){if(!L)return a();B?a(!1,B):r=setTimeout(()=>{a(!1,1e-7)},1e3)}B===1&&!iTe(c,t.getBoundingClientRect())&&a(),L=!1}try{i=new IntersectionObserver(z,{...A,root:n.ownerDocument})}catch{i=new IntersectionObserver(z,A)}i.observe(t)}return a(!0),s}function dct(t,e,i,r){r===void 0&&(r={});const{ancestorScroll:n=!0,ancestorResize:s=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=WJ(t),h=n||s?[...c?BE(c):[],...BE(e)]:[];h.forEach(M=>{n&&M.addEventListener("scroll",i,{passive:!0}),s&&M.addEventListener("resize",i)});const m=c&&o?uct(c,i):null;let g=-1,v=null;a&&(v=new ResizeObserver(M=>{let[k]=M;k&&k.target===c&&v&&(v.unobserve(e),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{var A;(A=v)==null||A.observe(e)})),i()}),c&&!l&&v.observe(c),v.observe(e));let b,x=l?u_(t):null;l&&$();function $(){const M=u_(t);x&&!iTe(x,M)&&i(),x=M,b=requestAnimationFrame($)}return i(),()=>{var M;h.forEach(k=>{n&&k.removeEventListener("scroll",i),s&&k.removeEventListener("resize",i)}),m==null||m(),(M=v)==null||M.disconnect(),v=null,l&&cancelAnimationFrame(b)}}const hct=Dlt,pct=Llt,fct=jlt,wce=Flt,mct=Rlt,gct=Plt,yct=(t,e,i)=>{const r=new Map,n={platform:sG,...i},s={...n.platform,_c:r};return Alt(t,e,{...n,platform:s})};function B5(t,e,{signal:i,edges:r}={}){let n,s=null;const a=r!=null&&r.includes("leading"),o=r==null||r.includes("trailing"),l=()=>{s!==null&&(t.apply(n,s),n=void 0,s=null)},c=()=>{o&&l(),v()};let h=null;const m=()=>{h!=null&&clearTimeout(h),h=setTimeout(()=>{h=null,c()},e)},g=()=>{h!==null&&(clearTimeout(h),h=null)},v=()=>{g(),n=void 0,s=null},b=()=>{l()},x=function(...$){if(i!=null&&i.aborted)return;n=this,s=$;const M=h==null;m(),a&&M&&l()};return x.schedule=m,x.cancel=v,x.flush=b,i==null||i.addEventListener("abort",v,{once:!0}),x}function vct(t){return t}function bct(t){return t.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&")}function wct(t){return _ct(t)}function LU(t){return t.assignedSlot?t.assignedSlot:t.parentNode instanceof ShadowRoot?t.parentNode.host:t.parentNode}function _ct(t){for(let e=t;e;e=LU(e))if(e instanceof Element&&getComputedStyle(e).display==="none")return null;for(let e=LU(t);e;e=LU(e)){if(!(e instanceof Element))continue;const i=getComputedStyle(e);if(i.display!=="contents"&&(i.position!=="static"||j5(i)||e.tagName==="BODY"))return e}return null}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */(function(){{const e=sG.getOffsetParent;sG.getOffsetParent=i=>e(i,wct)}})();function _ce(t){const e=window.devicePixelRatio||1;return Math.round(t*e)/e}const rTe=(async(t,{referenceEl:e,floatingEl:i,overlayPositioning:r="absolute",placement:n,flipDisabled:s,flipPlacements:a,offsetDistance:o,offsetSkidding:l,arrowEl:c,type:h})=>{var L;if(!e||!i)return;const m=Uo(i)==="rtl",{x:g,y:v,placement:b,strategy:x,middlewareData:$}=await yct(e,i,{strategy:r,placement:n==="auto"||n==="auto-start"||n==="auto-end"?void 0:xce(n,m),middleware:$ct({placement:n,flipDisabled:s,flipPlacements:a==null?void 0:a.map(z=>xce(z,m)),offsetDistance:o,offsetSkidding:l,arrowEl:c,type:h})});if(c&&$.arrow){const{x:z,y:U}=$.arrow,B=b.split("-")[0],X=z!=null?"left":"top",J=Ict[B],Q={left:"",top:"",bottom:"",right:""};"floatingLayout"in t&&(t.floatingLayout=B==="left"||B==="right"?"horizontal":"vertical"),Object.assign(c.style,{...Q,[X]:`${X=="left"?z:U}px`,[B]:"100%",transform:J})}const k=((L=$.hide)==null?void 0:L.referenceHidden)?"hidden":null,A=k?"none":null;i.setAttribute(xct,b),Object.assign(i.style,{pointerEvents:A,position:x,transform:`translate(${_ce(g)}px,${_ce(v)}px)`,visibility:k})}),xct="data-placement",nTe=["top","bottom","right","left","top-start","top-end","bottom-start","bottom-end","right-start","right-end","left-start","left-end","leading","trailing","leading-start","leading-end","trailing-start","trailing-end"],aG="bottom-start",sTe="bottom-end",dT={animation:"calcite-floating-ui-anim",animationActive:"calcite-floating-ui-anim--active"};function $ct({placement:t,flipDisabled:e,flipPlacements:i,offsetDistance:r,offsetSkidding:n,arrowEl:s,type:a}){const o=[fct(),mct()];return a==="menu"&&o.push(wce({fallbackPlacements:i||["top-start","top","top-end","bottom-start","bottom","bottom-end"]})),o.push(hct({mainAxis:typeof r=="number"?r:0,crossAxis:typeof n=="number"?n:0})),t==="auto"||t==="auto-start"||t==="auto-end"?o.push(pct({alignment:t==="auto-start"?"start":t==="auto-end"?"end":null})):e||o.push(wce(i?{fallbackPlacements:i}:{})),s&&o.push(gct({element:s})),o}function Sct(t){return nTe.includes(t)}function aTe(t,e){const i=t.filter(Sct);return i.length!==t.length&&console.warn(`${e.tagName}: Invalid value found in: flipPlacements. Try any of these: ${nTe.map(r=>`"${r}"`).join(", ").trim()}`,{el:e}),i}function xce(t,e=!1){const i=["left","right"];return e&&i.reverse(),t.replace(/leading/gi,i[0]).replace(/trailing/gi,i[1])}async function ZJ(t,e,i=!1){if(!t.open||!e.floatingEl||!e.referenceEl)return;if(Object.assign(e.floatingEl.style,{display:"block",position:e.overlayPositioning??"absolute"}),!qE.get(t))return oTe(t);await(i?Tct(t):rTe)(t,e)}function Tct(t){let e=xz.get(t);return e||(e=B5(rTe,nD.reposition,{edges:["leading","trailing"]}),xz.set(t,e),e)}const Ict={top:"",left:"rotate(-90deg)",bottom:"rotate(180deg)",right:"rotate(90deg)"},qE=new WeakMap,xz=new WeakMap;async function oTe(t){const{referenceEl:e,floatingEl:i}=t;if(!i.isConnected)return;const r=dct;qE.set(t,{state:"pending"});let n;const s=r(e,i,()=>{const a=t.reposition();n||(n=a)});return qE.set(t,{state:"active",cleanUp:s}),n}function q5(t){const{floatingEl:e}=t;e&&Object.assign(e.style,{display:"",pointerEvents:"",position:"",transform:"",visibility:""})}async function C$(t){const{floatingEl:e,referenceEl:i}=t;if(q5(t),!(!e||!i)&&(H5(t),!!t.open))return oTe(t)}function H5(t){var i;const e=qE.get(t);(e==null?void 0:e.state)==="active"&&e.cleanUp(),qE.delete(t),(i=xz.get(t))==null||i.cancel(),xz.delete(t)}const $ce=4,$z=Math.ceil(Math.hypot($ce,$ce));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const YJ=({children:t,...e})=>{const i=e.level?Bhe(`h${e.level}`):Zw`div`;return nt(e.key,xk`<${i} class=${H(e.class)}>${t}</${i}>`)};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Sce={arrow:"calcite-floating-ui-arrow",arrowStroke:"calcite-floating-ui-arrow__stroke"},Mct={width:12,height:6,strokeWidth:1},lTe=({floatingLayout:t,key:e,ref:i})=>{const{width:r,height:n,strokeWidth:s}=Mct,a=r/2,o=t==="vertical",l=`M0,0 H${r} L${r-a},${n} Q${a},${n} ${a},${n} Z`;return nt(e,q`<svg aria-hidden=true class=${H(Sce.arrow)} height=${r} viewBox=${`0 0 ${r} ${r+(o?0:s)}`} width=${r+(o?s:0)} ${gt(i)}>${Xi`${Xi`<path class=${H(Sce.arrowStroke)} d=${l??Xe} fill=none stroke-width=${s+1} />`||""}<path d=${l??Xe} stroke=none />`}</svg>`)};/*!
* tabbable 6.3.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var cTe=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Sz=cTe.join(","),uTe=typeof Element>"u",d_=uTe?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Tz=!uTe&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t==null?void 0:t.ownerDocument},HE=function(e,i){var r;i===void 0&&(i=!0);var n=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),s=n===""||n==="true",a=s||i&&e&&HE(e.parentNode);return a},Cct=function(e){var i,r=e==null||(i=e.getAttribute)===null||i===void 0?void 0:i.call(e,"contenteditable");return r===""||r==="true"},dTe=function(e,i,r){if(HE(e))return[];var n=Array.prototype.slice.apply(e.querySelectorAll(Sz));return i&&d_.call(e,Sz)&&n.unshift(e),n=n.filter(r),n},Iz=function(e,i,r){for(var n=[],s=Array.from(e);s.length;){var a=s.shift();if(!HE(a,!1))if(a.tagName==="SLOT"){var o=a.assignedElements(),l=o.length?o:a.children,c=Iz(l,!0,r);r.flatten?n.push.apply(n,c):n.push({scopeParent:a,candidates:c})}else{var h=d_.call(a,Sz);h&&r.filter(a)&&(i||!e.includes(a))&&n.push(a);var m=a.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(a),g=!HE(m,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(a));if(m&&g){var v=Iz(m===!0?a.children:m.children,!0,r);r.flatten?n.push.apply(n,v):n.push({scopeParent:a,candidates:v})}else s.unshift.apply(s,a.children)}}return n},hTe=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},L0=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||Cct(e))&&!hTe(e)?0:e.tabIndex},Ect=function(e,i){var r=L0(e);return r<0&&i&&!hTe(e)?0:r},kct=function(e,i){return e.tabIndex===i.tabIndex?e.documentOrder-i.documentOrder:e.tabIndex-i.tabIndex},pTe=function(e){return e.tagName==="INPUT"},Act=function(e){return pTe(e)&&e.type==="hidden"},Pct=function(e){var i=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return i},Oct=function(e,i){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===i)return e[r]},Lct=function(e){if(!e.name)return!0;var i=e.form||Tz(e),r=function(o){return i.querySelectorAll('input[type="radio"][name="'+o+'"]')},n;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")n=r(window.CSS.escape(e.name));else try{n=r(e.name)}catch(a){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",a.message),!1}var s=Oct(n,e.form);return!s||s===e},Fct=function(e){return pTe(e)&&e.type==="radio"},Rct=function(e){return Fct(e)&&!Lct(e)},zct=function(e){var i,r=e&&Tz(e),n=(i=r)===null||i===void 0?void 0:i.host,s=!1;if(r&&r!==e){var a,o,l;for(s=!!((a=n)!==null&&a!==void 0&&(o=a.ownerDocument)!==null&&o!==void 0&&o.contains(n)||e!=null&&(l=e.ownerDocument)!==null&&l!==void 0&&l.contains(e));!s&&n;){var c,h,m;r=Tz(n),n=(c=r)===null||c===void 0?void 0:c.host,s=!!((h=n)!==null&&h!==void 0&&(m=h.ownerDocument)!==null&&m!==void 0&&m.contains(n))}}return s},Tce=function(e){var i=e.getBoundingClientRect(),r=i.width,n=i.height;return r===0&&n===0},Nct=function(e,i){var r=i.displayCheck,n=i.getShadowRoot;if(r==="full-native"&&"checkVisibility"in e){var s=e.checkVisibility({checkOpacity:!1,opacityProperty:!1,contentVisibilityAuto:!0,visibilityProperty:!0,checkVisibilityCSS:!0});return!s}if(getComputedStyle(e).visibility==="hidden")return!0;var a=d_.call(e,"details>summary:first-of-type"),o=a?e.parentElement:e;if(d_.call(o,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="full-native"||r==="legacy-full"){if(typeof n=="function"){for(var l=e;e;){var c=e.parentElement,h=Tz(e);if(c&&!c.shadowRoot&&n(c)===!0)return Tce(e);e.assignedSlot?e=e.assignedSlot:!c&&h!==e.ownerDocument?e=h.host:e=c}e=l}if(zct(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return Tce(e);return!1},Dct=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var i=e.parentElement;i;){if(i.tagName==="FIELDSET"&&i.disabled){for(var r=0;r<i.children.length;r++){var n=i.children.item(r);if(n.tagName==="LEGEND")return d_.call(i,"fieldset[disabled] *")?!0:!n.contains(e)}return!0}i=i.parentElement}return!1},Mz=function(e,i){return!(i.disabled||HE(i)||Act(i)||Nct(i,e)||Pct(i)||Dct(i))},oG=function(e,i){return!(Rct(i)||L0(i)<0||!Mz(e,i))},jct=function(e){var i=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(i)||i>=0)},fTe=function(e){var i=[],r=[];return e.forEach(function(n,s){var a=!!n.scopeParent,o=a?n.scopeParent:n,l=Ect(o,a),c=a?fTe(n.candidates):o;l===0?a?i.push.apply(i,c):i.push(o):r.push({documentOrder:s,tabIndex:l,item:n,isScope:a,content:c})}),r.sort(kct).reduce(function(n,s){return s.isScope?n.push.apply(n,s.content):n.push(s.content),n},[]).concat(i)},Vct=function(e,i){i=i||{};var r;return i.getShadowRoot?r=Iz([e],i.includeContainer,{filter:oG.bind(null,i),flatten:!1,getShadowRoot:i.getShadowRoot,shadowRootFilter:jct}):r=dTe(e,i.includeContainer,oG.bind(null,i)),fTe(r)},Uct=function(e,i){i=i||{};var r;return i.getShadowRoot?r=Iz([e],i.includeContainer,{filter:Mz.bind(null,i),flatten:!0,getShadowRoot:i.getShadowRoot}):r=dTe(e,i.includeContainer,Mz.bind(null,i)),r},B1=function(e,i){if(i=i||{},!e)throw new Error("No node provided");return d_.call(e,Sz)===!1?!1:oG(i,e)},Bct=cTe.concat("iframe").join(","),FU=function(e,i){if(i=i||{},!e)throw new Error("No node provided");return d_.call(e,Bct)===!1?!1:Mz(i,e)};/*!
* focus-trap 7.6.6
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function lG(t,e){(e==null||e>t.length)&&(e=t.length);for(var i=0,r=Array(e);i<e;i++)r[i]=t[i];return r}function qct(t){if(Array.isArray(t))return lG(t)}function Hct(t,e,i){return(e=Jct(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Gct(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Wct(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ice(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),i.push.apply(i,r)}return i}function Mce(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?Ice(Object(i),!0).forEach(function(r){Hct(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Ice(Object(i)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))})}return t}function Zct(t){return qct(t)||Gct(t)||Xct(t)||Wct()}function Yct(t,e){if(typeof t!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Jct(t){var e=Yct(t,"string");return typeof e=="symbol"?e:e+""}function Xct(t,e){if(t){if(typeof t=="string")return lG(t,e);var i={}.toString.call(t).slice(8,-1);return i==="Object"&&t.constructor&&(i=t.constructor.name),i==="Map"||i==="Set"?Array.from(t):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?lG(t,e):void 0}}var Cce={activateTrap:function(e,i){if(e.length>0){var r=e[e.length-1];r!==i&&r._setPausedState(!0)}var n=e.indexOf(i);n===-1||e.splice(n,1),e.push(i)},deactivateTrap:function(e,i){var r=e.indexOf(i);r!==-1&&e.splice(r,1),e.length>0&&!e[e.length-1]._isManuallyPaused()&&e[e.length-1]._setPausedState(!1)}},Qct=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},Kct=function(e){return(e==null?void 0:e.key)==="Escape"||(e==null?void 0:e.key)==="Esc"||(e==null?void 0:e.keyCode)===27},B2=function(e){return(e==null?void 0:e.key)==="Tab"||(e==null?void 0:e.keyCode)===9},eut=function(e){return B2(e)&&!e.shiftKey},tut=function(e){return B2(e)&&e.shiftKey},Ece=function(e){return setTimeout(e,0)},LM=function(e){for(var i=arguments.length,r=new Array(i>1?i-1:0),n=1;n<i;n++)r[n-1]=arguments[n];return typeof e=="function"?e.apply(void 0,r):e},e3=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},iut=[],rut=function(e,i){var r=(i==null?void 0:i.document)||document,n=(i==null?void 0:i.trapStack)||iut,s=Mce({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:eut,isKeyBackward:tut},i),a={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,manuallyPaused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},o,l=function(re,se,Te){return re&&re[se]!==void 0?re[se]:s[Te||se]},c=function(re,se){var Te=typeof(se==null?void 0:se.composedPath)=="function"?se.composedPath():void 0;return a.containerGroups.findIndex(function(ne){var _e=ne.container,Oe=ne.tabbableNodes;return _e.contains(re)||(Te==null?void 0:Te.includes(_e))||Oe.find(function(He){return He===re})})},h=function(re){var se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Te=se.hasFallback,ne=Te===void 0?!1:Te,_e=se.params,Oe=_e===void 0?[]:_e,He=s[re];if(typeof He=="function"&&(He=He.apply(void 0,Zct(Oe))),He===!0&&(He=void 0),!He){if(He===void 0||He===!1)return He;throw new Error("`".concat(re,"` was specified but was not a node, or did not return a node"))}var ft=He;if(typeof He=="string"){try{ft=r.querySelector(He)}catch(oe){throw new Error("`".concat(re,'` appears to be an invalid selector; error="').concat(oe.message,'"'))}if(!ft&&!ne)throw new Error("`".concat(re,"` as selector refers to no known node"))}return ft},m=function(){var re=h("initialFocus",{hasFallback:!0});if(re===!1)return!1;if(re===void 0||re&&!FU(re,s.tabbableOptions))if(c(r.activeElement)>=0)re=r.activeElement;else{var se=a.tabbableGroups[0],Te=se&&se.firstTabbableNode;re=Te||h("fallbackFocus")}else re===null&&(re=h("fallbackFocus"));if(!re)throw new Error("Your focus-trap needs to have at least one focusable element");return re},g=function(){if(a.containerGroups=a.containers.map(function(re){var se=Vct(re,s.tabbableOptions),Te=Uct(re,s.tabbableOptions),ne=se.length>0?se[0]:void 0,_e=se.length>0?se[se.length-1]:void 0,Oe=Te.find(function(oe){return B1(oe)}),He=Te.slice().reverse().find(function(oe){return B1(oe)}),ft=!!se.find(function(oe){return L0(oe)>0});return{container:re,tabbableNodes:se,focusableNodes:Te,posTabIndexesFound:ft,firstTabbableNode:ne,lastTabbableNode:_e,firstDomTabbableNode:Oe,lastDomTabbableNode:He,nextTabbableNode:function(ze){var Ke=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,at=se.indexOf(ze);return at<0?Ke?Te.slice(Te.indexOf(ze)+1).find(function(kt){return B1(kt)}):Te.slice(0,Te.indexOf(ze)).reverse().find(function(kt){return B1(kt)}):se[at+(Ke?1:-1)]}}}),a.tabbableGroups=a.containerGroups.filter(function(re){return re.tabbableNodes.length>0}),a.tabbableGroups.length<=0&&!h("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(a.containerGroups.find(function(re){return re.posTabIndexesFound})&&a.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},v=function(re){var se=re.activeElement;if(se)return se.shadowRoot&&se.shadowRoot.activeElement!==null?v(se.shadowRoot):se},b=function(re){if(re!==!1&&re!==v(document)){if(!re||!re.focus){b(m());return}re.focus({preventScroll:!!s.preventScroll}),a.mostRecentlyFocusedNode=re,Qct(re)&&re.select()}},x=function(re){var se=h("setReturnFocus",{params:[re]});return se||(se===!1?!1:re)},$=function(re){var se=re.target,Te=re.event,ne=re.isBackward,_e=ne===void 0?!1:ne;se=se||e3(Te),g();var Oe=null;if(a.tabbableGroups.length>0){var He=c(se,Te),ft=He>=0?a.containerGroups[He]:void 0;if(He<0)_e?Oe=a.tabbableGroups[a.tabbableGroups.length-1].lastTabbableNode:Oe=a.tabbableGroups[0].firstTabbableNode;else if(_e){var oe=a.tabbableGroups.findIndex(function(ui){var Tr=ui.firstTabbableNode;return se===Tr});if(oe<0&&(ft.container===se||FU(se,s.tabbableOptions)&&!B1(se,s.tabbableOptions)&&!ft.nextTabbableNode(se,!1))&&(oe=He),oe>=0){var ze=oe===0?a.tabbableGroups.length-1:oe-1,Ke=a.tabbableGroups[ze];Oe=L0(se)>=0?Ke.lastTabbableNode:Ke.lastDomTabbableNode}else B2(Te)||(Oe=ft.nextTabbableNode(se,!1))}else{var at=a.tabbableGroups.findIndex(function(ui){var Tr=ui.lastTabbableNode;return se===Tr});if(at<0&&(ft.container===se||FU(se,s.tabbableOptions)&&!B1(se,s.tabbableOptions)&&!ft.nextTabbableNode(se))&&(at=He),at>=0){var kt=at===a.tabbableGroups.length-1?0:at+1,Wt=a.tabbableGroups[kt];Oe=L0(se)>=0?Wt.firstTabbableNode:Wt.firstDomTabbableNode}else B2(Te)||(Oe=ft.nextTabbableNode(se))}}else Oe=h("fallbackFocus");return Oe},M=function(re){var se=e3(re);if(!(c(se,re)>=0)){if(LM(s.clickOutsideDeactivates,re)){o.deactivate({returnFocus:s.returnFocusOnDeactivate});return}LM(s.allowOutsideClick,re)||re.preventDefault()}},k=function(re){var se=e3(re),Te=c(se,re)>=0;if(Te||se instanceof Document)Te&&(a.mostRecentlyFocusedNode=se);else{re.stopImmediatePropagation();var ne,_e=!0;if(a.mostRecentlyFocusedNode)if(L0(a.mostRecentlyFocusedNode)>0){var Oe=c(a.mostRecentlyFocusedNode),He=a.containerGroups[Oe].tabbableNodes;if(He.length>0){var ft=He.findIndex(function(oe){return oe===a.mostRecentlyFocusedNode});ft>=0&&(s.isKeyForward(a.recentNavEvent)?ft+1<He.length&&(ne=He[ft+1],_e=!1):ft-1>=0&&(ne=He[ft-1],_e=!1))}}else a.containerGroups.some(function(oe){return oe.tabbableNodes.some(function(ze){return L0(ze)>0})})||(_e=!1);else _e=!1;_e&&(ne=$({target:a.mostRecentlyFocusedNode,isBackward:s.isKeyBackward(a.recentNavEvent)})),b(ne||a.mostRecentlyFocusedNode||m())}a.recentNavEvent=void 0},A=function(re){var se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;a.recentNavEvent=re;var Te=$({event:re,isBackward:se});Te&&(B2(re)&&re.preventDefault(),b(Te))},L=function(re){(s.isKeyForward(re)||s.isKeyBackward(re))&&A(re,s.isKeyBackward(re))},z=function(re){Kct(re)&&LM(s.escapeDeactivates,re)!==!1&&(re.preventDefault(),o.deactivate())},U=function(re){var se=e3(re);c(se,re)>=0||LM(s.clickOutsideDeactivates,re)||LM(s.allowOutsideClick,re)||(re.preventDefault(),re.stopImmediatePropagation())},B=function(){if(a.active)return Cce.activateTrap(n,o),a.delayInitialFocusTimer=s.delayInitialFocus?Ece(function(){b(m())}):b(m()),r.addEventListener("focusin",k,!0),r.addEventListener("mousedown",M,{capture:!0,passive:!1}),r.addEventListener("touchstart",M,{capture:!0,passive:!1}),r.addEventListener("click",U,{capture:!0,passive:!1}),r.addEventListener("keydown",L,{capture:!0,passive:!1}),r.addEventListener("keydown",z),o},X=function(){if(a.active)return r.removeEventListener("focusin",k,!0),r.removeEventListener("mousedown",M,!0),r.removeEventListener("touchstart",M,!0),r.removeEventListener("click",U,!0),r.removeEventListener("keydown",L,!0),r.removeEventListener("keydown",z),o},J=function(re){var se=re.some(function(Te){var ne=Array.from(Te.removedNodes);return ne.some(function(_e){return _e===a.mostRecentlyFocusedNode})});se&&b(m())},Q=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(J):void 0,le=function(){Q&&(Q.disconnect(),a.active&&!a.paused&&a.containers.map(function(re){Q.observe(re,{subtree:!0,childList:!0})}))};return o={get active(){return a.active},get paused(){return a.paused},activate:function(re){if(a.active)return this;var se=l(re,"onActivate"),Te=l(re,"onPostActivate"),ne=l(re,"checkCanFocusTrap");ne||g(),a.active=!0,a.paused=!1,a.nodeFocusedBeforeActivation=v(r),se==null||se();var _e=function(){ne&&g(),B(),le(),Te==null||Te()};return ne?(ne(a.containers.concat()).then(_e,_e),this):(_e(),this)},deactivate:function(re){if(!a.active)return this;var se=Mce({onDeactivate:s.onDeactivate,onPostDeactivate:s.onPostDeactivate,checkCanReturnFocus:s.checkCanReturnFocus},re);clearTimeout(a.delayInitialFocusTimer),a.delayInitialFocusTimer=void 0,X(),a.active=!1,a.paused=!1,le(),Cce.deactivateTrap(n,o);var Te=l(se,"onDeactivate"),ne=l(se,"onPostDeactivate"),_e=l(se,"checkCanReturnFocus"),Oe=l(se,"returnFocus","returnFocusOnDeactivate");Te==null||Te();var He=function(){Ece(function(){Oe&&b(x(a.nodeFocusedBeforeActivation)),ne==null||ne()})};return Oe&&_e?(_e(x(a.nodeFocusedBeforeActivation)).then(He,He),this):(He(),this)},pause:function(re){return a.active?(a.manuallyPaused=!0,this._setPausedState(!0,re)):this},unpause:function(re){return a.active?(a.manuallyPaused=!1,n[n.length-1]!==this?this:this._setPausedState(!1,re)):this},updateContainerElements:function(re){var se=[].concat(re).filter(Boolean);return a.containers=se.map(function(Te){return typeof Te=="string"?r.querySelector(Te):Te}),a.active&&g(),le(),this}},Object.defineProperties(o,{_isManuallyPaused:{value:function(){return a.manuallyPaused}},_setPausedState:{value:function(re,se){if(a.paused===re)return this;if(a.paused=re,re){var Te=l(se,"onPause"),ne=l(se,"onPostPause");Te==null||Te(),X(),le(),ne==null||ne()}else{var _e=l(se,"onUnpause"),Oe=l(se,"onPostUnpause");_e==null||_e(),g(),B(),le(),Oe==null||Oe()}return this}}}),o.updateContainerElements(e),o};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const _F=new WeakSet;function nut(t,e){return _F.has(t)||HS(e),!1}function sut(t,e){const i=(e==null?void 0:e.fallbackFocus)||t,r=(e==null?void 0:e.clickOutsideDeactivates)??!0;return{fallbackFocus:i,...e,document:t.ownerDocument,tabbableOptions:wW,trapStack:lEe,clickOutsideDeactivates:n=>(_F.has(t)||_F.add(t),typeof r=="function"?r(n):r),onPostDeactivate:()=>{_F.delete(t)},setReturnFocus:n=>{const s=typeof(e==null?void 0:e.setReturnFocus)=="function"?e.setReturnFocus(n):e==null?void 0:e.setReturnFocus;return s===void 0?nut(t,n):s}}}function kce(t,{focusTrapOptions:e},i){return!(e!=null&&e.extraContainers)&&!i?t:[t,...Ace(e==null?void 0:e.extraContainers),...Ace(i)]}function Ace(t=[]){return Array.isArray(t)?t:[t]}const aut=t=>wk((e,i)=>{let r,n,s;const a=t.focusTrapOptions;i.onConnected(()=>{e[t.triggerProp]&&r&&o.activate()}),i.onUpdate(l=>{e.hasUpdated&&l.has("focusTrapDisabled")&&(e.focusTrapDisabled?o.deactivate():o.activate())}),i.onDisconnected(()=>o.deactivate());const o={activate:()=>{const l=n||e.el;if(l.isConnected){if(!r){const c={...a,...e.focusTrapOptions};s||(s=kce(l,e)),r=rut(s,sut(l,c))}(typeof e.focusTrapDisabledOverride=="function"?!e.focusTrapDisabledOverride():!e.focusTrapDisabled)&&r.activate()}},deactivate:()=>r==null?void 0:r.deactivate(),overrideFocusTrapEl:l=>{if(r)throw new Error("Focus trap already created");n=l},setExtraContainers:l=>{const c=n||e.el;s=kce(c,e,l)},updateContainerElements:()=>r==null?void 0:r.updateContainerElements(s)};return o});/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const out=5;function lut({startX:t,startY:e,endX:i,endY:r}){return Math.hypot(i-t,r-e)>out}class cut{constructor(){this.registeredElements=new Map,this.registeredElementCount=0,this.queryPopover=e=>{const{registeredElements:i}=this,r=e.find(n=>i.has(n));return i.get(r)},this.togglePopovers=e=>{const i=e.composedPath(),r=this.queryPopover(i);r&&!r.triggerDisabled&&(r.open=!r.open),Array.from(this.registeredElements.values()).filter(n=>n!==r&&n.autoClose&&n.open&&!i.includes(n)).forEach(n=>n.open=!1)},this.keyDownHandler=e=>{e.defaultPrevented||(e.key==="Escape"?this.closeAllPopovers():vk(e.key)&&this.togglePopovers(e))},this.pointerDownHandler=e=>{if(e.defaultPrevented||!n2(e))return;const{clientX:i,clientY:r}=e;this.pointerDownPosition={x:i,y:r}},this.clickHandler=e=>{qEe(e)||e.defaultPrevented||this.pointerDownPosition&&lut({endY:e.clientY,endX:e.clientX,startY:this.pointerDownPosition.y,startX:this.pointerDownPosition.x})||(this.pointerDownPosition=void 0,this.togglePopovers(e))}}registerElement(e,i){this.registeredElementCount++,this.registeredElements.set(e,i),this.registeredElementCount===1&&this.addListeners()}unregisterElement(e){this.registeredElements.delete(e)&&this.registeredElementCount--,this.registeredElementCount===0&&this.removeListeners()}closeAllPopovers(){Array.from(this.registeredElements.values()).forEach(e=>e.open=!1)}addListeners(){window.addEventListener("pointerdown",this.pointerDownHandler),window.addEventListener("click",this.clickHandler),window.addEventListener("keydown",this.keyDownHandler)}removeListeners(){window.removeEventListener("pointerdown",this.pointerDownHandler),window.removeEventListener("click",this.clickHandler),window.removeEventListener("keydown",this.keyDownHandler)}}const Xu={positionContainer:"position-container",container:"container",closeButtonContainer:"close-button-container",closeButton:"close-button",content:"content",hasHeader:"has-header",header:"header",headerContainer:"header-container",heading:"heading"},Pce="auto",Oce="aria-controls",Lce="aria-expanded",uut=ct`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{display:contents;--calcite-floating-ui-z-index: var(--calcite-popover-z-index, var(--calcite-z-index-popup))}.position-container{inline-size:max-content;display:none;max-inline-size:100vw;max-block-size:100vh;inset-block-start:0;left:0;z-index:var(--calcite-floating-ui-z-index)}@starting-style{.position-container{opacity:0;inset-block-start:0;left:0}}.position-container{max-inline-size:var(--calcite-popover-max-size-x, 100vw)}.position-container .calcite-floating-ui-anim{position:relative;transition-duration:var(--calcite-floating-ui-transition);transition-property:inset-block-start,left,opacity,display;transition-behavior:allow-discrete;opacity:0;box-shadow:0 0 16px #00000029;z-index:var(--calcite-z-index);border-radius:.25rem}.position-container[data-placement^=bottom] .calcite-floating-ui-anim{inset-block-start:-5px}.position-container[data-placement^=top] .calcite-floating-ui-anim{inset-block-start:5px}.position-container[data-placement^=left] .calcite-floating-ui-anim{left:5px}.position-container[data-placement^=right] .calcite-floating-ui-anim{left:-5px}.position-container[data-placement] .calcite-floating-ui-anim--active{opacity:1;inset-block-start:0;left:0}@starting-style{.position-container[data-placement] .calcite-floating-ui-anim--active{opacity:0}}.calcite-floating-ui-arrow{pointer-events:none;position:absolute;z-index:calc(var(--calcite-z-index) * -1);fill:var(--calcite-color-foreground-1)}.calcite-floating-ui-arrow__stroke{stroke:var(--calcite-color-border-3)}:host([scale=s]) .heading{padding:.5rem .75rem;font-size:var(--calcite-font-size--1);line-height:1.375}:host([scale=m]) .heading{padding:.75rem 1rem;font-size:var(--calcite-font-size-0);line-height:1.375}:host([scale=l]) .heading{padding:1rem 1.25rem;font-size:var(--calcite-font-size-1);line-height:1.375}.position-container .calcite-floating-ui-anim{border-width:1px;border-style:solid;background-color:var(--calcite-popover-background-color, var(--calcite-color-foreground-1));border-color:var(--calcite-popover-border-color, var(--calcite-color-border-3));border-radius:var(--calcite-popover-corner-radius, var(--calcite-corner-radius-round))}.calcite-floating-ui-arrow{fill:var(--calcite-popover-background-color, var(--calcite-color-foreground-1))}.calcite-floating-ui-arrow__stroke{stroke:var(--calcite-popover-border-color, var(--calcite-color-border-3))}.header{display:flex;flex:1 1 auto;align-items:stretch;justify-content:flex-start;border-width:0px;border-bottom-width:1px;border-style:solid;border-block-end-color:var(--calcite-popover-border-color, var(--calcite-color-border-3))}.heading{margin:0;display:block;flex:1 1 auto;align-self:center;white-space:normal;font-weight:var(--calcite-font-weight-medium);word-wrap:break-word;word-break:break-word;color:var(--calcite-popover-text-color, var(--calcite-color-text-1))}.header-container{position:relative;display:flex;height:100%;flex-direction:row;flex-wrap:nowrap;border-radius:.25rem;color:var(--calcite-popover-text-color, var(--calcite-color-text-1))}.header-container.has-header{flex-direction:column}.content{display:flex;height:100%;width:100%;flex-direction:column;flex-wrap:nowrap;align-self:center;word-wrap:break-word;word-break:break-word}.close-button-container{display:flex;overflow:hidden;flex:0 0 auto;border-start-end-radius:var(--calcite-popover-corner-radius, var(--calcite-corner-radius-round));border-end-end-radius:var(--calcite-popover-corner-radius, var(--calcite-corner-radius-round));--calcite-action-corner-radius-start-end: var(--calcite-popover-corner-radius, var(--calcite-corner-radius-sharp));--calcite-action-corner-radius-end-end: var(--calcite-popover-corner-radius, var(--calcite-corner-radius-sharp))}::slotted(calcite-panel),::slotted(calcite-flow){height:100%}:host([hidden]){display:none}[hidden]{display:none}`,Fce=new cut,gN=class gN extends dt{constructor(){super(...arguments),this.focusTrap=aut({triggerProp:"open",focusTrapOptions:{allowOutsideClick:!0,escapeDeactivates:e=>(e.defaultPrevented||(this.open=!1,e.preventDefault()),!1)}})(this),this.guid=`calcite-popover-${Mc()}`,this.hasLoaded=!1,this.mutationObserver=Gn("mutation",()=>this.focusTrap.updateContainerElements()),this.transitionProp="opacity",this.messages=un(),this.focusSetter=dn()(this),this.floatingLayout="vertical",this.autoClose=!1,this.closable=!1,this.flipDisabled=!1,this.focusTrapDisabled=!1,this.offsetDistance=$z,this.offsetSkidding=0,this.open=!1,this.overlayPositioning="absolute",this.placement=Pce,this.pointerDisabled=!1,this.scale="m",this.triggerDisabled=!1,this.calcitePopoverBeforeClose=Re({cancelable:!1}),this.calcitePopoverBeforeOpen=Re({cancelable:!1}),this.calcitePopoverClose=Re({cancelable:!1}),this.calcitePopoverOpen=Re({cancelable:!1})}async reposition(e=!1){const{referenceEl:i,placement:r,overlayPositioning:n,flipDisabled:s,filteredFlipPlacements:a,offsetDistance:o,offsetSkidding:l,arrowEl:c,floatingEl:h}=this;return ZJ(this,{floatingEl:h,referenceEl:i,overlayPositioning:n,placement:r,flipDisabled:s,flipPlacements:a,offsetDistance:o,offsetSkidding:l,arrowEl:c,type:"popover"},e)}async setFocus(e){return this.focusSetter(()=>this.el,e)}async updateFocusTrapElements(){this.focusTrap.updateContainerElements()}connectedCallback(){var e;super.connectedCallback(),(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0,subtree:!0}),this.setFilteredPlacements(),requestAnimationFrame(()=>this.setUpReferenceElement(this.hasLoaded))}willUpdate(e){e.has("flipPlacements")&&this.flipPlacementsHandler(),e.has("open")&&(this.hasUpdated||this.open!==!1)&&this.openHandler(),(e.has("offsetDistance")&&(this.hasUpdated||this.offsetDistance!==$z)||e.has("offsetSkidding")&&(this.hasUpdated||this.offsetSkidding!==0)||e.has("overlayPositioning")&&(this.hasUpdated||this.overlayPositioning!=="absolute")||e.has("placement")&&(this.hasUpdated||this.placement!==Pce))&&this.reposition(!0),e.has("referenceElement")&&this.referenceElementHandler()}loaded(){this.referenceElement&&!this.referenceEl&&this.setUpReferenceElement(),this.hasLoaded=!0}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this.mutationObserver)==null||e.disconnect(),this.removeReferences(),H5(this)}flipPlacementsHandler(){this.setFilteredPlacements(),this.reposition(!0)}openHandler(){IT(this),this.reposition(!0),this.setExpandedAttr()}referenceElementHandler(){this.setUpReferenceElement(),this.reposition(!0)}setFloatingEl(e){this.floatingEl=e,e&&requestAnimationFrame(()=>this.setUpReferenceElement())}setTransitionEl(e){e&&(this.transitionEl=e)}setFilteredPlacements(){const{el:e,flipPlacements:i}=this;this.filteredFlipPlacements=i?aTe(i,e):null}setUpReferenceElement(e=!0){this.removeReferences(),this.referenceEl=this.getReferenceElement(),C$(this);const{el:i,referenceElement:r,referenceEl:n}=this;e&&r&&!n&&console.warn(`${i.tagName}: reference-element id "${r}" was not found.`,{el:i}),this.addReferences()}getId(){return this.el.id||this.guid}setExpandedAttr(){const{referenceEl:e,open:i}=this;e&&"setAttribute"in e&&e.setAttribute(Lce,yk(i))}addReferences(){const{referenceEl:e}=this;if(!e)return;const i=this.getId();"setAttribute"in e&&e.setAttribute(Oce,i),Fce.registerElement(e,this.el),this.setExpandedAttr()}removeReferences(){const{referenceEl:e}=this;e&&("removeAttribute"in e&&(e.removeAttribute(Oce),e.removeAttribute(Lce)),Fce.unregisterElement(e))}getReferenceElement(){const{referenceElement:e,el:i}=this;return(typeof e=="string"?gk(i,{id:e}):e)||null}hide(){this.open=!1}onBeforeOpen(){this.calcitePopoverBeforeOpen.emit()}onOpen(){this.calcitePopoverOpen.emit(),this.focusTrap.activate()}onBeforeClose(){this.calcitePopoverBeforeClose.emit()}onClose(){this.calcitePopoverClose.emit(),q5(this),this.focusTrap.deactivate()}storeArrowEl(e){this.arrowEl=e,this.reposition(!0)}renderCloseButton(){const{messages:e,closable:i}=this;return i?nt(Xu.closeButtonContainer,q`<div class=${H(Xu.closeButtonContainer)}><calcite-action appearance=transparent class=${H(Xu.closeButton)} @click=${this.hide} .scale=${this.scale} .text=${e.close}><calcite-icon icon=x .scale=${gr(this.scale)}></calcite-icon></calcite-action></div>`):null}renderHeader(){const{heading:e,headingLevel:i}=this,r=e?YJ({class:Xu.heading,level:i,children:e}):null;return r?nt(Xu.header,q`<div class=${H(Xu.header)}>${r}${this.renderCloseButton()}</div>`):null}render(){const{referenceEl:e,heading:i,label:r,open:n,pointerDisabled:s,floatingLayout:a}=this,o=e&&n,l=!o,c=s?null:nt("floating-arrow",lTe({floatingLayout:a,ref:this.storeArrowEl}));return this.el.inert=l,this.el.ariaLabel=r,this.el.ariaLive="polite",wu(this.el,"id",this.getId()),this.el.role="dialog",q`<div class=${H(Xu.positionContainer)} ${gt(this.setFloatingEl)}><div class=${H({[Xu.container]:!0,[dT.animation]:!0,[dT.animationActive]:o})} ${gt(this.setTransitionEl)}>${c}<div class=${H({[Xu.hasHeader]:!!i,[Xu.headerContainer]:!0})}>${this.renderHeader()}<div class=${H(Xu.content)}><slot></slot></div>${i?null:this.renderCloseButton()}</div></div></div>`}};gN.properties={floatingLayout:[16,{},{state:!0}],referenceEl:[16,{},{state:!0}],autoClose:[7,{},{reflect:!0,type:Boolean}],closable:[7,{},{reflect:!0,type:Boolean}],flipDisabled:[7,{},{reflect:!0,type:Boolean}],flipPlacements:[0,{},{attribute:!1}],focusTrapDisabled:[7,{},{reflect:!0,type:Boolean}],focusTrapOptions:[0,{},{attribute:!1}],heading:1,headingLevel:[11,{},{type:Number,reflect:!0}],label:1,messageOverrides:[0,{},{attribute:!1}],offsetDistance:[11,{},{type:Number,reflect:!0}],offsetSkidding:[11,{},{reflect:!0,type:Number}],open:[7,{},{reflect:!0,type:Boolean}],overlayPositioning:[3,{},{reflect:!0}],placement:[3,{},{reflect:!0}],pointerDisabled:[7,{},{reflect:!0,type:Boolean}],referenceElement:1,scale:[3,{},{reflect:!0}],triggerDisabled:[7,{},{reflect:!0,type:Boolean}]},gN.styles=uut;let cG=gN;ci("calcite-popover",cG);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */function Cz(t,e){return(t+e)%e}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Rce={menu:"menu",defaultTrigger:"default-trigger"},RU="calcite-action-menu",zU={button:t=>`${RU}-${t}-menu-button`,menu:t=>`${RU}-${t}-menu`,action:(t,e)=>`${RU}-${t}-action-${e}`},hT={tooltip:"tooltip",trigger:"trigger"},dut={menu:"ellipsis"};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const hut=ct`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{box-sizing:border-box;display:flex;flex-direction:column;font-size:var(--calcite-font-size-1)}::slotted(calcite-action-group:not(:last-of-type)){border-block-end-width:var(--calcite-border-width-sm)}.default-trigger{position:relative;block-size:100%;flex:0 1 auto;align-self:stretch}slot[name=trigger]::slotted(calcite-action),calcite-action::slotted([slot=trigger]){position:relative;block-size:100%;flex:0 1 auto;align-self:stretch}.menu{display:flex;max-block-size:45vh;flex-direction:column;flex-wrap:nowrap;overflow-y:auto;overflow-x:hidden;outline:2px solid transparent;outline-offset:2px;gap:var(--calcite-action-menu-items-space, 0)}:host([hidden]){display:none}[hidden]{display:none}`,put=["ArrowUp","ArrowDown","End","Home"],yN=class yN extends dt{constructor(){super(...arguments),this.guid=Mc(),this.actionElements=[],this.menuButtonClick=()=>{this.toggleOpen()},this.menuButtonId=zU.button(this.guid),this.menuButtonKeyDown=e=>{const{key:i}=e,{actionElements:r,activeMenuItemIndex:n,open:s}=this;if(r.length){if(vk(i)){if(e.preventDefault(),!s){this.toggleOpen();return}const a=r[n];a?a.click():this.toggleOpen(!1)}if(i==="Tab"){this.open=!1;return}if(i==="Escape"){this.toggleOpen(!1),e.preventDefault();return}this.handleActionNavigation(e,i,r)}},this.menuId=zU.menu(this.guid),this._open=!1,this.updateAction=(e,i)=>{const{guid:r,activeMenuItemIndex:n}=this,s=zU.action(r,i);e.tabIndex=-1,e.setAttribute("role","menuitem"),e.id||(e.id=s),e.activeDescendant=i===n},this.focusSetter=dn()(this),this.activeMenuItemIndex=-1,this.appearance="solid",this.expanded=!1,this.overlayPositioning="absolute",this.placement="auto",this.scale="m",this.calciteActionMenuCollapse=Re({cancelable:!1}),this.calciteActionMenuExpand=Re({cancelable:!1}),this.calciteActionMenuOpen=Re({cancelable:!1})}get open(){return this._open}set open(e){const i=this._open;e!==i&&(this._open=e,this.openHandler(e))}async setFocus(e){return this.focusSetter(()=>this.menuButtonEl,e)}connectedCallback(){super.connectedCallback(),this.connectMenuButtonEl()}willUpdate(e){e.has("expanded")&&(this.hasUpdated||this.expanded!==!1)&&this.expandedHandler(),e.has("activeMenuItemIndex")&&(this.hasUpdated||this.activeMenuItemIndex!==-1)&&this.updateActions(this.actionElements),e.has("expanded")&&this.hasUpdated&&(this.expanded?this.calciteActionMenuExpand.emit():this.calciteActionMenuCollapse.emit())}disconnectedCallback(){super.disconnectedCallback(),this.disconnectMenuButtonEl()}expandedHandler(){this.open=!1,this.setTooltipReferenceElement()}openHandler(e){this.menuButtonEl&&(this.menuButtonEl.active=e,this.menuButtonEl.aria={expanded:e}),this.popoverEl&&(this.popoverEl.open=e),this.activeMenuItemIndex=this.open?0:-1,this.calciteActionMenuOpen.emit(),this.setTooltipReferenceElement()}connectMenuButtonEl(){const{menuButtonId:e,menuId:i,open:r,label:n}=this,s=this.slottedMenuButtonEl||this.defaultMenuButtonEl;this.menuButtonEl!==s&&(this.disconnectMenuButtonEl(),this.menuButtonEl=s,this.setTooltipReferenceElement(),s&&(s.active=r,s.setAttribute("aria-controls",i),s.setAttribute("aria-expanded",yk(r)),s.setAttribute("aria-haspopup","true"),s.id||(s.id=e),s.label||(s.label=n),s.text||(s.text=n),s.addEventListener("click",this.menuButtonClick),s.addEventListener("keydown",this.menuButtonKeyDown)))}disconnectMenuButtonEl(){const{menuButtonEl:e}=this;e&&(e.removeEventListener("click",this.menuButtonClick),e.removeEventListener("keydown",this.menuButtonKeyDown),this.menuButtonEl=null)}setMenuButtonEl(e){const i=e.target.assignedElements({flatten:!0}).filter(r=>r==null?void 0:r.matches("calcite-action"));this.slottedMenuButtonEl=i[0],this.connectMenuButtonEl()}setDefaultMenuButtonEl(e){this.defaultMenuButtonEl=e,this.connectMenuButtonEl()}setPopoverEl(e){e&&(this.popoverEl=e,e.open=this.open)}handleCalciteActionClick(){this.open=!1,this.setFocus()}updateTooltip(e){const i=e.target.assignedElements({flatten:!0}).filter(r=>r==null?void 0:r.matches("calcite-tooltip"));this.tooltipEl=i[0],this.setTooltipReferenceElement()}setTooltipReferenceElement(){const{tooltipEl:e,expanded:i,menuButtonEl:r,open:n}=this;e&&(e.referenceElement=!i&&!n?r:null)}updateActions(e){e==null||e.forEach(this.updateAction)}async handleDefaultSlotChange(e){const i=e.target.assignedElements({flatten:!0}).reduce((r,n)=>n!=null&&n.matches("calcite-action")?(r.push(n),r):n!=null&&n.matches("calcite-action-group")?r.concat(Array.from(n.querySelectorAll("calcite-action"))):r,[]);await this.componentOnReady(),this.actionElements=i.filter(r=>!r.disabled&&!r.hidden)}isValidKey(e,i){return!!i.find(r=>r===e)}handleActionNavigation(e,i,r){if(!this.isValidKey(i,put))return;if(e.preventDefault(),!this.open){this.toggleOpen(),(i==="Home"||i==="ArrowDown")&&(this.activeMenuItemIndex=0),(i==="End"||i==="ArrowUp")&&(this.activeMenuItemIndex=r.length-1);return}i==="Home"&&(this.activeMenuItemIndex=0),i==="End"&&(this.activeMenuItemIndex=r.length-1);const n=this.activeMenuItemIndex;i==="ArrowUp"&&(this.activeMenuItemIndex=Cz(Math.max(n-1,-1),r.length)),i==="ArrowDown"&&(this.activeMenuItemIndex=Cz(n+1,r.length))}toggleOpen(e=!this.open){this.open=e}handlePopoverOpen(e){e.stopPropagation(),this.open=!0,this.setFocus()}handlePopoverClose(e){e.stopPropagation(),this.open=!1}renderMenuButton(){const{appearance:e,label:i,scale:r,expanded:n}=this;return q`<slot name=${hT.trigger} @slotchange=${this.setMenuButtonEl}><calcite-action .appearance=${e} .aria=${{expanded:n}} class=${H(Rce.defaultTrigger)} .icon=${dut.menu} .scale=${r} .text=${i} .textEnabled=${n} ${gt(this.setDefaultMenuButtonEl)}></calcite-action></slot>`}renderMenuItems(){const{actionElements:e,activeMenuItemIndex:i,menuId:r,menuButtonEl:n,label:s,placement:a,overlayPositioning:o,flipPlacements:l}=this,c=e[i],h=(c==null?void 0:c.id)||null;return q`<calcite-popover auto-close .flipPlacements=${l} focus-trap-disabled .label=${s} offset-distance=0 @calcitePopoverClose=${this.handlePopoverClose} @calcitePopoverOpen=${this.handlePopoverOpen} .overlayPositioning=${o} .placement=${a} pointer-disabled .referenceElement=${n} trigger-disabled ${gt(this.setPopoverEl)}><div aria-activedescendant=${h??Xe} aria-labelledby=${(n==null?void 0:n.id)??Xe} class=${H(Rce.menu)} id=${r??Xe} @click=${this.handleCalciteActionClick} role=menu tabindex=-1><slot @slotchange=${this.handleDefaultSlotChange}></slot></div></calcite-popover>`}render(){return q`${this.renderMenuButton()}${this.renderMenuItems()}<slot name=${hT.tooltip} @slotchange=${this.updateTooltip}></slot>`}};yN.properties={activeMenuItemIndex:[16,{},{state:!0}],menuButtonEl:[16,{},{state:!0}],appearance:[3,{},{reflect:!0}],expanded:[7,{},{reflect:!0,type:Boolean}],flipPlacements:[0,{},{attribute:!1}],label:1,open:[7,{},{reflect:!0,type:Boolean}],overlayPositioning:[3,{},{reflect:!0}],placement:[3,{},{reflect:!0}],scale:[3,{},{reflect:!0}]},yN.styles=hut;let uG=yN;ci("calcite-action-menu",uG);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const GE={menuActions:"menu-actions",menuTooltip:"menu-tooltip"},fut={menu:"ellipsis"},mut={container:"container"};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const gut=ct`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host{display:flex;flex-direction:column;padding:0;background-color:transparent;border-color:var(--calcite-action-group-border-color, var(--calcite-color-border-3));border-style:solid;border-width:0}.container{display:flex;flex-grow:1;flex-direction:column}:host([columns="1"]){--calcite-internal-action-group-columns: 1}:host([columns="2"]){--calcite-internal-action-group-columns: 2}:host([columns="3"]){--calcite-internal-action-group-columns: 3}:host([columns="4"]){--calcite-internal-action-group-columns: 4}:host([columns="5"]){--calcite-internal-action-group-columns: 5}:host([columns="6"]){--calcite-internal-action-group-columns: 6}:host(:first-child){padding-block-start:0px}:host([layout=horizontal]),:host([layout=horizontal]) .container{flex-direction:row}:host([layout=grid]){display:grid}:host([layout=grid]) .container{display:grid;place-content:stretch;background-color:transparent;grid-template-columns:repeat(var(--calcite-action-group-columns, var(--calcite-internal-action-group-columns, 3)),auto);gap:var(--calcite-action-group-gap, 1px);padding:var(--calcite-action-group-gap, 1px)}:host([layout=horizontal]) ::slotted(calcite-action-group){border-inline-end:var(--calcite-size-px)}:host([hidden]){display:none}[hidden]{display:none}`,K2=class K2 extends dt{constructor(){super(...arguments),this.messages=un(),this.focusSetter=dn()(this),this.hasMenuActions=!1,this.expanded=!1,this.layout="vertical",this.menuOpen=!1,this.overlayPositioning="absolute",this.scale="m",this.calciteActionGroupCollapse=Re({cancelable:!1}),this.calciteActionGroupExpand=Re({cancelable:!1})}async setFocus(e){return this.focusSetter(()=>this.el,e)}willUpdate(e){e.has("expanded")&&((this.hasUpdated||this.expanded!==!1)&&(this.menuOpen=!1),this.hasUpdated&&(this.expanded?this.calciteActionGroupExpand.emit():this.calciteActionGroupCollapse.emit()))}setMenuOpen(e){this.menuOpen=!!e.currentTarget.open}handleMenuActionsSlotChange(e){this.hasMenuActions=ii(e)}renderMenu(){const{expanded:e,menuOpen:i,scale:r,layout:n,messages:s,overlayPositioning:a,hasMenuActions:o,menuFlipPlacements:l,menuPlacement:c}=this;return q`<calcite-action-menu .expanded=${e} .flipPlacements=${l??(n==="horizontal"?["top","bottom"]:["left","right"])} .hidden=${!o} .label=${s.more} @calciteActionMenuOpen=${this.setMenuOpen} .open=${i} .overlayPositioning=${a} .placement=${c??(n==="horizontal"?"bottom-start":"leading-start")} .scale=${r}><calcite-action .aria=${{expanded:e}} .icon=${fut.menu} .scale=${r} slot=${hT.trigger} .text=${s.more} .textEnabled=${e}></calcite-action><slot name=${GE.menuActions} @slotchange=${this.handleMenuActionsSlotChange}></slot><slot name=${GE.menuTooltip} slot=${hT.tooltip}></slot></calcite-action-menu>`}render(){return q`<div .ariaLabel=${this.label} class=${H(mut.container)} role=group><slot></slot>${this.renderMenu()}</div>`}};K2.properties={hasMenuActions:[16,{},{state:!0}],columns:[11,{},{type:Number,reflect:!0}],expanded:[7,{},{reflect:!0,type:Boolean}],label:1,layout:[3,{},{reflect:!0}],menuFlipPlacements:[0,{},{attribute:!1}],menuOpen:[7,{},{reflect:!0,type:Boolean}],menuPlacement:[3,{},{reflect:!0}],messageOverrides:[0,{},{attribute:!1}],overlayPositioning:[3,{},{reflect:!0}],scale:[3,{},{reflect:!0}]},K2.shadowRootOptions={mode:"open",delegatesFocus:!0},K2.styles=gut;let Ez=K2;ci("calcite-action-group",Ez);const mTe=Object.freeze(Object.defineProperty({__proto__:null,ActionGroup:Ez},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const JJ=t=>Array.from(t.querySelectorAll("calcite-action")).filter(e=>e.closest("calcite-action-menu")?e.slot===hT.trigger:!0),yut=({actionGroups:t,expanded:e,overflowCount:i})=>{let r=i;t.reverse().forEach(n=>{let s=0;const a=JJ(n).reverse();a.forEach(o=>{o.slot===GE.menuActions&&(o.removeAttribute("slot"),o.textEnabled=e)}),r>0&&a.some(o=>(a.filter(c=>!c.slot).length>1&&a.length>2&&!o.closest("calcite-action-menu")&&(o.textEnabled=!0,o.setAttribute("slot",GE.menuActions),s++,s>1&&r--),r<1)),n.manager.component.requestUpdate()})},zce={chevronsLeft:"chevrons-left",chevronsRight:"chevrons-right"};function vut(t,e){var i;return t||((i=e.closest("calcite-shell-panel"))==null?void 0:i.position)||"start"}function but({el:t,expanded:e}){JJ(t).filter(i=>i.slot!==GE.menuActions).forEach(i=>i.textEnabled=e),t.querySelectorAll("calcite-action-group, calcite-action-menu").forEach(i=>i.expanded=e)}const wut=({tooltip:t,referenceElement:e,expanded:i,ref:r})=>(t&&(t.referenceElement=!i&&e?e:null),r&&r(e),e),_ut=({expanded:t,expandText:e,collapseText:i,expandLabel:r,collapseLabel:n,toggle:s,el:a,position:o,tooltip:l,ref:c,scale:h})=>{const m=Uo(a)==="rtl",g=t?i:e,v=t?n:r,b=[zce.chevronsLeft,zce.chevronsRight];m&&b.reverse();const x=vut(o,a)==="end",$=x?b[1]:b[0],M=x?b[0]:b[1];return q`<calcite-action .aria=${{expanded:t}} .icon=${t?$:M} id=expand-toggle .label=${v} @click=${s} .scale=${h} .text=${g} .textEnabled=${t} title=${(!t&&!l?g:null)??Xe} ${gt(A=>wut({tooltip:l,referenceElement:A,expanded:t,ref:c}))}></calcite-action>`};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const XJ=()=>wk((t,e)=>{const i=new Set;return e.onDisconnected(()=>{i.forEach(r=>r.cancel())}),{add:r=>{[r].flat().forEach(n=>i.add(n))},resources:i}});/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const xut=({bufferSize:t=0,containerSize:e,itemSizes:i})=>{const r=e-t;let n=i.length,s=0;for(const[a,o]of i.entries())if(s=s+o,s>r){n=a;break}else continue;return n},$ut=({bufferSize:t=0,containerSize:e,itemSizes:i})=>Math.max(i.length-xut({bufferSize:t,itemSizes:i,containerSize:e}),0),Nce={container:"container",actionGroupEnd:"action-group--end"},NU={actionsEnd:"actions-end",bottomActions:"bottom-actions",expandTooltip:"expand-tooltip"},Sut=ct`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host{display:inline-flex;align-self:stretch;background:transparent}.container{display:inline-flex;flex:1 1 auto;flex-direction:column;gap:var(--calcite-action-bar-items-space, 0);background-color:var(--calcite-action-bar-background-color, var(--calcite-color-foreground-1))}@keyframes in{0%{opacity:0}to{opacity:1}}:host([floating]) .container{animation:in var(--calcite-internal-animation-timing-slow) ease-in-out;overflow:hidden;border-radius:var(--calcite-action-bar-corner-radius, var(--calcite-corner-radius-round));--tw-shadow: 0 6px 20px -4px rgba(0, 0, 0, .1), 0 4px 12px -2px rgba(0, 0, 0, .08);--tw-shadow-colored: 0 6px 20px -4px var(--tw-shadow-color), 0 4px 12px -2px var(--tw-shadow-color);box-shadow:var(--calcite-action-bar-shadow, var(--tw-ring-offset-shadow, 0 0 rgba(0, 0, 0, 0)), var(--tw-ring-shadow, 0 0 rgba(0, 0, 0, 0)), var(--tw-shadow))}:host([layout=vertical]){flex-direction:column}:host([layout=vertical]):host([overflow-actions-disabled]) .container{overflow-y:auto}:host([layout=vertical]):host([expanded]) .container{max-inline-size:var(--calcite-action-bar-expanded-max-width, auto)}:host([layout=vertical]) .action-group--end{margin-block-start:auto}:host([layout=vertical]) ::slotted(calcite-action-group:not(:last-of-type)){border-block-end-width:var(--calcite-border-width-sm)}:host([layout=horizontal]){flex-direction:row}:host([layout=horizontal]) .container{flex-direction:row}:host([layout=horizontal]):host([overflow-actions-disabled]) .container{overflow-x:auto}:host([layout=horizontal]) .action-group--end{margin-inline-start:auto}:host([layout=horizontal]) ::slotted(calcite-action-group:not(:last-of-type)){border-inline-end-width:var(--calcite-border-width-sm)}.action-group--end{justify-content:flex-end}:host([hidden]){display:none}[hidden]{display:none}`,vN=class vN extends dt{constructor(){super(),this.mutationObserver=Gn("mutation",()=>this.mutationObserverHandler()),this.cancelable=XJ()(this),this.resize=B5(({width:e,height:i})=>{const{expanded:r,expandDisabled:n,layout:s,overflowActionsDisabled:a,actionGroups:o}=this;if(a||s==="vertical"&&!i||s==="horizontal"&&!e)return;const l=this.getItemSizes();this.updateGroups();const c=this.hasActionsEnd||this.hasBottomActions||!n?o.length+1:o.length,h=$ut({bufferSize:c,containerSize:s==="horizontal"?e:i,itemSizes:l});yut({actionGroups:o,expanded:r,overflowCount:h})},nD.resize),this.resizeHandler=e=>{const{width:i,height:r}=e.contentRect;this.resize({width:i,height:r})},this.resizeObserver=Gn("resize",e=>this.resizeHandlerEntries(e)),this.toggleExpand=()=>{this.expanded=!this.expanded,this.calciteActionBarToggle.emit()},this.messages=un(),this.focusSetter=dn()(this),this.hasActionsEnd=!1,this.hasBottomActions=!1,this.floating=!1,this.expandDisabled=!1,this.expanded=!1,this.layout="vertical",this.overflowActionsDisabled=!1,this.overlayPositioning="absolute",this.scale="m",this.calciteActionBarCollapse=Re({cancelable:!1}),this.calciteActionBarExpand=Re({cancelable:!1}),this.calciteActionBarToggle=Re({cancelable:!1}),this.listen("calciteActionMenuOpen",this.actionMenuOpenHandler)}async overflowActions(){this.resize({width:this.el.clientWidth,height:this.el.clientHeight})}async setFocus(e){return this.focusSetter(()=>this.el,e)}connectedCallback(){var e;super.connectedCallback(),this.updateGroups(),this.overflowActions(),(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0,subtree:!0}),this.overflowActionsDisabledHandler(this.overflowActionsDisabled),this.cancelable.add(this.resize)}willUpdate(e){e.has("expandDisabled")&&(this.hasUpdated||this.expandDisabled!==!1)&&this.overflowActions(),e.has("layout")&&(this.hasUpdated||this.layout!=="vertical")&&this.updateGroups(),e.has("overflowActionsDisabled")&&(this.hasUpdated||this.overflowActionsDisabled!==!1)&&this.overflowActionsDisabledHandler(this.overflowActionsDisabled),e.has("expanded")&&this.hasUpdated&&(this.expandedHandler(),this.expanded?this.calciteActionBarExpand.emit():this.calciteActionBarCollapse.emit())}loaded(){this.overflowActions()}disconnectedCallback(){var e,i;super.disconnectedCallback(),(e=this.mutationObserver)==null||e.disconnect(),(i=this.resizeObserver)==null||i.disconnect()}getItemSizes(){const{el:e,layout:i,expandToggleEl:r}=this,n=JJ(e);r&&n.push(r);const s=i==="horizontal"?"clientWidth":"clientHeight",a=Math.max(...n.map(o=>o[s]||0));return n.map(o=>o[s]||a)}expandedHandler(){const{el:e,expanded:i}=this;but({el:e,expanded:i}),this.overflowActions()}overflowActionsDisabledHandler(e){var i,r;if(e){(i=this.resizeObserver)==null||i.disconnect();return}(r=this.resizeObserver)==null||r.observe(this.el),this.overflowActions()}actionMenuOpenHandler(e){var i;if(e.target.menuOpen){const r=e.composedPath();(i=this.actionGroups)==null||i.forEach(n=>{r.includes(n)||(n.menuOpen=!1)})}}mutationObserverHandler(){this.updateGroups(),this.overflowActions()}resizeHandlerEntries(e){e.forEach(this.resizeHandler)}updateGroups(){const e=Array.from(this.el.querySelectorAll("calcite-action-group"));this.actionGroups=e,e.forEach(i=>{i.layout=this.layout,i.scale=this.scale})}handleDefaultSlotChange(){this.updateGroups()}handleActionsEndSlotChange(e){this.hasActionsEnd=ii(e)}handleBottomActionsSlotChange(e){this.hasBottomActions=ii(e)}handleTooltipSlotChange(e){const i=fu(e).filter(r=>r==null?void 0:r.matches("calcite-tooltip"));this.expandTooltip=i[0]}renderBottomActionGroup(){const{expanded:e,expandDisabled:i,el:r,position:n,toggleExpand:s,scale:a,layout:o,messages:l,actionsEndGroupLabel:c,overlayPositioning:h}=this,m=i?null:_ut({collapseLabel:l.collapseLabel,collapseText:l.collapse,el:r,expandLabel:l.expandLabel,expandText:l.expand,expanded:e,position:n,ref:g=>this.expandToggleEl=g,scale:a,toggle:s,tooltip:this.expandTooltip});return q`<calcite-action-group class=${H(Nce.actionGroupEnd)} .hidden=${this.expandDisabled&&!(this.hasActionsEnd||this.hasBottomActions)} .label=${c} .layout=${o} .overlayPositioning=${h} .scale=${a}><slot name=${NU.actionsEnd} @slotchange=${this.handleActionsEndSlotChange}></slot><slot name=${NU.bottomActions} @slotchange=${this.handleBottomActionsSlotChange}></slot><slot name=${NU.expandTooltip} @slotchange=${this.handleTooltipSlotChange}></slot>${m}</calcite-action-group>`}render(){return q`<div class=${H(Nce.container)}><slot @slotchange=${this.handleDefaultSlotChange}></slot>${this.renderBottomActionGroup()}</div>`}};vN.properties={expandTooltip:[16,{},{state:!0}],hasActionsEnd:[16,{},{state:!0}],hasBottomActions:[16,{},{state:!0}],actionsEndGroupLabel:1,floating:[7,{},{reflect:!0,type:Boolean}],expandDisabled:[7,{},{reflect:!0,type:Boolean}],expanded:[7,{},{reflect:!0,type:Boolean}],layout:[3,{},{reflect:!0}],messageOverrides:[0,{},{attribute:!1}],overflowActionsDisabled:[7,{},{reflect:!0,type:Boolean}],overlayPositioning:[3,{},{reflect:!0}],position:[3,{},{reflect:!0}],scale:[3,{},{reflect:!0}]},vN.styles=Sut;let kz=vN;ci("calcite-action-bar",kz);const gTe=Object.freeze(Object.defineProperty({__proto__:null,ActionBar:kz},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const yTe="calciteInternalLabelClick",G5="calciteInternalLabelConnected",Az="calciteInternalLabelDisconnected",Dce="calcite-label",pT=new WeakMap,q2=new WeakMap,WE=new WeakMap,Pz=new WeakMap,pw=new Set,Tut=t=>{const{id:e}=t,i=e&&gk(t,{selector:`${Dce}[for="${e}"]`});if(i)return i;const r=ST(t,Dce);return!r||Iut(r,t)?null:r};function Iut(t,e){let i;const r="custom-element-ancestor-check",n=a=>{a.stopImmediatePropagation();const o=a.composedPath();i=o.slice(o.indexOf(e),o.indexOf(t))};return t.addEventListener(r,n,{once:!0}),e.dispatchEvent(new CustomEvent(r,{composed:!0,bubbles:!0})),t.removeEventListener(r,n),i.filter(a=>a!==e&&a!==t).filter(a=>{var o;return(o=a.tagName)==null?void 0:o.includes("-")}).length>0}function nI(t){if(!t)return;const e=Tut(t.el);if(q2.has(e)&&e===t.labelEl||!e&&pw.has(t))return;const i=Cut.bind(t);if(e){t.labelEl=e;const r=pT.get(e)||[];r.push(t),pT.set(e,r.sort(vTe)),q2.has(t.labelEl)||(q2.set(t.labelEl,jce),t.labelEl.addEventListener(yTe,jce)),pw.delete(t),document.removeEventListener(G5,WE.get(t)),Pz.set(t,i),document.addEventListener(Az,i)}else pw.has(t)||(i(),document.removeEventListener(Az,Pz.get(t)))}function W5(t){if(!t||(pw.delete(t),document.removeEventListener(G5,WE.get(t)),document.removeEventListener(Az,Pz.get(t)),WE.delete(t),Pz.delete(t),!t.labelEl))return;const e=pT.get(t.labelEl);e.length===1&&(t.labelEl.removeEventListener(yTe,q2.get(t.labelEl)),q2.delete(t.labelEl)),pT.set(t.labelEl,e.filter(i=>i!==t).sort(vTe)),t.labelEl=null}function vTe(t,e){return HEe(t.el,e.el)?-1:1}function ZE(t){var e,i;return t.label||((i=(e=t.labelEl)==null?void 0:e.textContent)==null?void 0:i.trim())||""}function jce(t){const e=t.detail.sourceEvent.target,i=pT.get(this),r=i.find(a=>a.el===e);if(i.includes(r))return;const s=i[0];s.disabled||s.onLabelClick(t)}function Mut(){pw.has(this)&&nI(this)}function Cut(){pw.add(this);const t=WE.get(this)||Mut.bind(this);WE.set(this,t),document.addEventListener(G5,t)}async function Eut(t){var r;if(await t.componentOnReady(),pT.has(t))return;const i=(r=t.ownerDocument)==null?void 0:r.getElementById(t.for);i&&requestAnimationFrame(()=>{for(const n of pw)if(n.el===i){nI(n);break}})}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const kut={container:"container"},Aut=ct`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex}:host([alignment=start]){text-align:start}:host([alignment=end]){text-align:end}:host([alignment=center]){text-align:center}:host([scale=s]) .container{gap:.25rem;font-size:var(--calcite-font-size--2);line-height:1rem;margin-block-end:var(--calcite-label-margin-bottom, .5rem)}:host([scale=m]) .container{gap:.5rem;font-size:var(--calcite-font-size--1);line-height:1rem;margin-block-end:var(--calcite-label-margin-bottom, .75rem)}:host([scale=l]) .container{gap:.5rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;margin-block-end:var(--calcite-label-margin-bottom, 1rem)}:host .container{margin-inline:0px;margin-block-start:0px;inline-size:100%;line-height:1.375;color:var(--calcite-color-text-1);color:var(--calcite-label-text-color, var(--calcite-color-text-1))}:host([layout=block]) .container,:host([layout=default]) .container{display:flex;flex-direction:column}:host([layout=inline]) .container,:host([layout=inline-space-between]) .container{display:flex;flex-direction:row;align-items:center;gap:.5rem}:host([layout=inline][scale=l]) .container{gap:.75rem}:host([layout=inline-space-between]) .container{justify-content:space-between}:host([disabled])>.container{opacity:var(--calcite-opacity-disabled)}:host([disabled]) ::slotted(*[disabled]),:host([disabled]) ::slotted(*[disabled] *){--tw-bg-opacity: 1}:host([disabled]) ::slotted(calcite-input-message:not([active])){--tw-bg-opacity: 0}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host([hidden]){display:none}[hidden]{display:none}`,bN=class bN extends dt{constructor(){super(),this.alignment="start",this.layout="default",this.scale="m",this.calciteInternalLabelClick=Re({bubbles:!1,cancelable:!1}),this.listen("click",this.labelClickHandler)}connectedCallback(){super.connectedCallback(),document.dispatchEvent(new CustomEvent(G5))}willUpdate(e){e.has("for")&&Eut(this.el)}disconnectedCallback(){super.disconnectedCallback(),document.dispatchEvent(new CustomEvent(Az))}labelClickHandler(e){var i;((i=window.getSelection())==null?void 0:i.type)!=="Range"&&this.calciteInternalLabelClick.emit({sourceEvent:e})}render(){return q`<div class=${H(kut.container)}><slot></slot></div>`}};bN.properties={alignment:[3,{},{reflect:!0}],for:[3,{},{reflect:!0}],layout:[3,{},{reflect:!0}],scale:[3,{},{reflect:!0}]},bN.styles=Aut;let Oz=bN;ci("calcite-label",Oz);const SPt=Object.freeze(Object.defineProperty({__proto__:null,Label:Oz},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Put=ct`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{display:block}:host([hidden]){display:none}[hidden]{display:none}`,wN=class wN extends dt{constructor(){super(...arguments),this.mutationObserver=Gn("mutation",()=>{this.ensureTextContentDependentProps(),this.calciteInternalOptionChange.emit()}),this.disabled=!1,this.calciteInternalOptionChange=Re({cancelable:!1})}connectedCallback(){var e;super.connectedCallback(),this.ensureTextContentDependentProps(),(e=this.mutationObserver)==null||e.observe(this.el,{attributeFilter:["label","value"],characterData:!0,childList:!0,subtree:!0})}willUpdate(e){e.has("disabled")&&(this.hasUpdated||this.disabled!==!1)&&this.handlePropChange(this.disabled,e.get("disabled"),"disabled"),e.has("label")&&this.handlePropChange(this.label,e.get("label"),"label"),e.has("selected")&&this.handlePropChange(this.selected,e.get("selected"),"selected"),e.has("value")&&this.handlePropChange(this.value,e.get("value"),"value")}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this.mutationObserver)==null||e.disconnect()}handlePropChange(e,i,r){(r==="label"||r==="value")&&this.ensureTextContentDependentProps(),this.calciteInternalOptionChange.emit()}ensureTextContentDependentProps(){const{el:{textContent:e},internallySetLabel:i,internallySetValue:r,label:n,value:s}=this;(!n||n===i)&&(this.label=e,this.internallySetLabel=e),(s==null||s===r)&&(this.value=e,this.internallySetValue=e)}render(){return q`<slot>${this.label}</slot>`}};wN.properties={disabled:[7,{},{reflect:!0,type:Boolean}],label:1,selected:[7,{},{reflect:!0,type:Boolean}],value:1},wN.styles=Put;let dG=wN;ci("calcite-option",dG);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Vce={valid:"check-circle",invalid:"exclamation-mark-triangle",idle:"information"},Out=ct`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{box-sizing:border-box;display:flex;block-size:auto;inline-size:100%;align-items:center;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-1);opacity:1;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;margin-block-start:var(--calcite-input-message-spacing, var(--calcite-input-message-spacing-value, var(--calcite-spacing-xxs)))}.calcite-input-message-icon{pointer-events:none;display:inline-flex;flex-shrink:0;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;margin-inline-end:var(--calcite-spacing-sm)}:host([status=invalid]) .calcite-input-message-icon{color:var(--calcite-input-message-icon-color, var(--calcite-icon-color, var(--calcite-color-status-danger)))}:host([status=valid]) .calcite-input-message-icon{color:var(--calcite-input-message-icon-color, var(--calcite-icon-color, var(--calcite-color-status-success)))}:host([status=idle]) .calcite-input-message-icon{color:var(--calcite-input-message-icon-color, var(--calcite-icon-color, var(--calcite-color-brand)))}:host([scale=s]){font-size:var(--calcite-font-size--3);line-height:.75rem}:host([scale=m]){font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=l]){font-size:var(--calcite-font-size--1);line-height:1rem}:host([hidden]){display:none}[hidden]{display:none}`,Lut={inputMessageIcon:"calcite-input-message-icon"},_N=class _N extends dt{constructor(){super(...arguments),this.iconFlipRtl=!1,this.scale="m",this.status="idle"}connectedCallback(){super.connectedCallback(),this.requestedIcon=Gw(Vce,this.icon,this.status)}willUpdate(e){(e.has("status")&&(this.hasUpdated||this.status!=="idle")||e.has("icon"))&&(this.requestedIcon=Gw(Vce,this.icon,this.status))}render(){const e=this.el.hidden;return wu(this.el,"calcite-hydrated-hidden",e),q`${this.renderIcon(this.requestedIcon)}<slot></slot>`}renderIcon(e){if(e)return q`<calcite-icon class=${H(Lut.inputMessageIcon)} .flipRtl=${this.iconFlipRtl} .icon=${e} scale=s></calcite-icon>`}};_N.properties={icon:[3,{converter:Hm},{reflect:!0}],iconFlipRtl:[7,{},{reflect:!0,type:Boolean}],scale:[3,{},{reflect:!0}],status:[3,{},{reflect:!0}]},_N.styles=Out;let Lz=_N;ci("calcite-input-message",Lz);const TPt=Object.freeze(Object.defineProperty({__proto__:null,InputMessage:Lz},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const iy={alignmentCenter:"internal-label-alignment--center",alignmentEnd:"internal-label-alignment--end",container:"internal-label--container",requiredIndicator:"internal-label-required--indicator",spacingBottom:"internal-label-spacing--bottom",spacingInlineEnd:"internal-label-spacing-inline--end",spacingInlineStart:"internal-label-spacing-inline--start",text:"internal-label--text"},QJ=({alignmentCenter:t,bottomSpacingDisabled:e,labelText:i,onClick:r,required:n,spacingInlineEnd:s,spacingInlineStart:a,tooltipText:o})=>q`<div class=${H({[iy.alignmentCenter]:t,[iy.alignmentEnd]:!t,[iy.container]:!0,[iy.spacingBottom]:!e,[iy.spacingInlineEnd]:s,[iy.spacingInlineStart]:a})} @click=${r}><div class=${H(iy.text)}>${i}${n&&q`<span aria-hidden=true class=${H(iy.requiredIndicator)} title=${o??Xe}>*</span>`||""}</div><slot name=label-content></slot></div>`;/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Fut={validationContainer:"validation-container"},Rut=()=>{},KJ=({scale:t,status:e,id:i,icon:r,message:n,ref:s})=>q`<div class=${H(Fut.validationContainer)} ${gt(s||Rut)}><calcite-input-message aria-live=polite .icon=${r} id=${i??Xe} .scale=${t} .status=${e}>${n}</calcite-input-message></div>`;/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const zut=ct`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{--calcite-icon-size: 1rem;--calcite-spacing-eighth: .125rem;--calcite-spacing-quarter: .25rem;--calcite-spacing-half: .5rem;--calcite-spacing-three-quarters: .75rem;--calcite-spacing: 1rem;--calcite-spacing-plus-quarter: 1.25rem;--calcite-spacing-plus-half: 1.5rem;--calcite-spacing-double: 2rem;--calcite-menu-min-width: 10rem;--calcite-header-min-height: 3rem;--calcite-footer-min-height: 3rem}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex;flex-direction:column;font-size:var(--calcite-select-font-size);font-weight:var(--calcite-internal-select-font-weight, var(--calcite-font-weight-regular))}.wrapper{position:relative;display:flex;align-items:stretch;inline-size:var(--select-width);block-size:var(--calcite-internal-select-block-size, 32px)}.wrapper:focus-within .icon,.wrapper:active .icon,.wrapper:hover .icon{color:var(--calcite-select-icon-color-hover, var(--calcite-color-text-1))}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host([scale=s]){--calcite-internal-select-font-size: var(--calcite-font-size--2);--calcite-select-spacing-inline: .5rem 2rem;--calcite-internal-select-icon-container-padding-inline: var(--calcite-spacing-sm);--calcite-internal-select-block-size: 24px}:host([scale=m]){--calcite-internal-select-font-size: var(--calcite-font-size--1);--calcite-select-spacing-inline: .75rem 2.5rem;--calcite-internal-select-icon-container-padding-inline: var(--calcite-spacing-md)}:host([scale=l]){--calcite-internal-select-font-size: var(--calcite-font-size-0);--calcite-select-spacing-inline: 1rem 3rem;--calcite-internal-select-icon-container-padding-inline: var(--calcite-spacing-lg);--calcite-internal-select-block-size: 44px}:host([width=auto]){inline-size:auto}:host([width=half]){inline-size:50%}:host([width=full]){inline-size:100%}.select{margin:0;box-sizing:border-box;inline-size:100%;cursor:pointer;appearance:none;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;border-style:solid;font-family:inherit;outline-color:transparent;font-weight:inherit;font-size:var(--calcite-select-font-size, var(--calcite-internal-select-font-size));color:var(--calcite-select-text-color, var(--calcite-color-text-2));border-color:var(--calcite-select-border-color, var(--calcite-color-border-input));border-width:var(--calcite-select-internal-border-width, var(--calcite-border-width-sm));padding-inline:var(--calcite-select-spacing-inline);padding-block:var(--calcite-internal-select-spacing-block);border-inline-end-width:0;line-height:var(--calcite-internal-select-line-height, normal);background-color:var(--calcite-select-background-color, var(--calcite-color-foreground-1));border-radius:var(--calcite-select-corner-radius, var(--calcite-corner-radius-none));box-shadow:var(--calcite-select-shadow, var(--calcite-shadow-small))}.select:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}select:disabled{border-color:var(--calcite-color-border-input);--tw-bg-opacity: 1}.icon-container{pointer-events:none;position:absolute;inset-block:0px;display:flex;align-items:center;border-width:0px;border-style:solid;border-color:var(--calcite-color-border-input);background-color:transparent;color:var(--calcite-color-text-2);inset-inline-end:0px;border-start-start-radius:var(--calcite-select-corner-radius, var(--calcite-corner-radius-none));border-start-end-radius:var(--calcite-select-corner-radius, var(--calcite-corner-radius-none));border-end-start-radius:var(--calcite-select-corner-radius, var(--calcite-corner-radius-none));border-end-end-radius:var(--calcite-select-corner-radius, var(--calcite-corner-radius-none));border-color:var(--calcite-select-border-color, var(--calcite-color-border-input));border-inline-width:0 var(--calcite-select-internal-icon-border-inline-end-width, var(--calcite-border-width-sm));padding-inline:var(--calcite-internal-select-icon-container-padding-inline)}.icon-container .icon{color:var(--calcite-select-icon-color, var(--calcite-color-text-3))}:host([status=invalid]) select,:host([status=invalid]) .icon-container{border-color:var(--calcite-color-status-danger)}:host([status=invalid]) select:focus,:host([status=invalid]) .icon-container:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-status-danger);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.select:focus~.icon-container{border-color:transparent}.internal-label-alignment--center{align-items:center}.internal-label-alignment--end{align-items:end}.internal-label--container{display:flex;justify-content:space-between;color:var(--calcite-color-text-1)}.internal-label-required--indicator{font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-status-danger);padding-inline:var(--calcite-spacing-base)}.internal-label-required--indicator:hover{cursor:help}.internal-label--text{line-height:1}:host([scale=s]) .internal-label-spacing--bottom{margin-block-end:var(--calcite-spacing-xxs)}:host([scale=s]) .internal-label-spacing-inline--end{margin-inline-end:var(--calcite-spacing-sm)}:host([scale=s]) .internal-label-spacing-inline--start{margin-inline-start:var(--calcite-spacing-sm)}:host([scale=s]) .internal-label--text{font-size:var(--calcite-font-size--2)}:host([scale=m]) .internal-label-spacing--bottom{margin-block-end:var(--calcite-spacing-sm)}:host([scale=m]) .internal-label-spacing-inline--end{margin-inline-end:var(--calcite-spacing-sm)}:host([scale=m]) .internal-label-spacing-inline--start{margin-inline-start:var(--calcite-spacing-sm)}:host([scale=m]) .internal-label--text{font-size:var(--calcite-font-size--1)}:host([scale=l]) .internal-label-spacing--bottom{margin-block-end:var(--calcite-spacing-sm)}:host([scale=l]) .internal-label-spacing-inline--end{margin-inline-end:var(--calcite-spacing-md)}:host([scale=l]) .internal-label-spacing-inline--start{margin-inline-start:var(--calcite-spacing-md)}:host([scale=l]) .internal-label--text{font-size:var(--calcite-font-size-0)}.validation-container{display:flex;flex-direction:column;align-items:flex-start;align-self:stretch}:host([scale=m]) .validation-container,:host([scale=l]) .validation-container{padding-block-start:.5rem}:host([scale=s]) .validation-container{padding-block-start:.25rem}::slotted(input[slot=hidden-form-input]){margin:0!important;opacity:0!important;outline:none!important;padding:0!important;position:absolute!important;inset:0!important;transform:none!important;-webkit-appearance:none!important;z-index:-1!important}:host([hidden]){display:none}[hidden]{display:none}`,t3={icon:"icon",iconContainer:"icon-container",select:"select",wrapper:"wrapper"},Uce={validationMessage:"selectValidationMessage"};function i3(t){return t.tagName==="CALCITE-OPTION"}function Nut(t){return t.tagName==="CALCITE-OPTION-GROUP"}const xN=class xN extends dt{constructor(){super(),this.componentToNativeEl=new Map,this.mutationObserver=Gn("mutation",()=>this.populateInternalSelect()),this.messages=un(),this.focusSetter=dn()(this),this.disabled=!1,this.required=!1,this.scale="m",this.status="idle",this.validity={valid:!1,badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valueMissing:!1},this.value=null,this.width="auto",this.calciteSelectChange=Re({cancelable:!1}),this.listen("calciteInternalOptionChange",this.handleOptionOrGroupChange),this.listen("calciteInternalOptionGroupChange",this.handleOptionOrGroupChange)}async setFocus(e){return this.focusSetter(()=>this.selectEl,e)}connectedCallback(){var e;super.connectedCallback(),(e=this.mutationObserver)==null||e.observe(this.el,{subtree:!0,childList:!0}),nI(this),DJ(this)}willUpdate(e){var i;e.has("value")&&(this.hasUpdated||this.value!==null)&&this.updateItemsFromValue(this.value),e.has("selectedOption")&&(this.value=(i=this.selectedOption)==null?void 0:i.value)}updated(){Vs(this)}loaded(){var i,r;typeof this.value=="string"&&this.updateItemsFromValue(this.value),this.populateInternalSelect();const e=(i=this.selectEl)==null?void 0:i.selectedOptions[0];this.selectFromNativeOption(e),BSe(this,((r=this.selectedOption)==null?void 0:r.value)??"")}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this.mutationObserver)==null||e.disconnect(),W5(this),VJ(this)}handleInternalSelectChange(){const e=this.selectEl.selectedOptions[0];this.selectFromNativeOption(e),requestAnimationFrame(()=>this.emitChangeEvent())}handleOptionOrGroupChange(e){e.stopPropagation();const i=e.target,r=this.componentToNativeEl.get(i);r&&(this.updateNativeElement(i,r),i3(i)&&i.selected&&(this.deselectAllExcept(i),this.selectedOption=i))}onLabelClick(){this.setFocus()}updateItemsFromValue(e){this.el.querySelectorAll("calcite-option").forEach(i=>i.selected=i.value===e)}updateNativeElement(e,i){if(i.disabled=e.disabled,i.label=e.label,i3(e)){const r=i;r.selected=e.selected,r.value=e.value,r.innerText=e.label}}populateInternalSelect(){const e=Array.from(this.el.children).filter(i=>i.tagName==="CALCITE-OPTION"||i.tagName==="CALCITE-OPTION-GROUP");this.clearInternalSelect(),e.forEach(i=>{var r;return(r=this.selectEl)==null?void 0:r.append(this.toNativeElement(i))})}clearInternalSelect(){this.componentToNativeEl.forEach(e=>e.remove()),this.componentToNativeEl.clear()}storeSelectRef(e){e&&(this.selectEl=e)}selectFromNativeOption(e){if(!e)return;let i;this.componentToNativeEl.forEach((r,n)=>{i3(n)&&r===e&&(n.selected=!0,i=n,this.deselectAllExcept(n))}),i&&(this.selectedOption=i)}toNativeElement(e){if(i3(e)){const i=document.createElement("option");return this.updateNativeElement(e,i),this.componentToNativeEl.set(e,i),i}if(Nut(e)){const i=document.createElement("optgroup");return this.updateNativeElement(e,i),Array.from(e.children).forEach(r=>{const n=this.toNativeElement(r);i.append(n),this.componentToNativeEl.set(e,n)}),this.componentToNativeEl.set(e,i),i}throw new Error("unsupported element child provided")}deselectAllExcept(e){this.el.querySelectorAll("calcite-option").forEach(i=>{i!==e&&(i.selected=!1)})}emitChangeEvent(){this.calciteSelectChange.emit()}renderChevron(){return q`<div class=${H(t3.iconContainer)}><calcite-icon class=${H(t3.icon)} icon=chevron-down .scale=${gr(this.scale)}></calcite-icon></div>`}render(){const{disabled:e}=this;return Us({disabled:e,children:q`${this.labelText&&QJ({labelText:this.labelText,onClick:this.onLabelClick,required:this.required,tooltipText:this.messages.required})||""}<div class=${H(t3.wrapper)}><select aria-errormessage=${Uce.validationMessage} .ariaInvalid=${this.status==="invalid"} .ariaLabel=${ZE(this)} class=${H(t3.select)} .disabled=${e} @change=${this.handleInternalSelectChange} .required=${this.required} ${gt(this.storeSelectRef)}><slot></slot></select>${this.renderChevron()}${UJ({component:this})}</div>${this.validationMessage&&this.status==="invalid"?KJ({icon:this.validationIcon,id:Uce.validationMessage,message:this.validationMessage,scale:this.scale,status:this.status}):null}`})}};xN.properties={disabled:[7,{},{reflect:!0,type:Boolean}],form:[3,{},{reflect:!0}],label:1,labelText:1,name:[3,{},{reflect:!0}],required:[7,{},{reflect:!0,type:Boolean}],scale:[3,{},{reflect:!0}],selectedOption:[0,{},{attribute:!1}],status:[3,{},{reflect:!0}],validationIcon:[3,{converter:Hm},{reflect:!0}],validationMessage:1,validity:[0,{},{attribute:!1}],value:1,width:[3,{},{reflect:!0}],messageOverrides:[0,{},{attribute:!1}]},xN.styles=zut;let hG=xN;ci("calcite-select",hG);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Bce={scrim:"scrim",content:"content"},qce={s:72,l:480},Dut=ct`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{position:absolute;inset:0;z-index:var(--calcite-z-index-overlay);display:flex;block-size:100%;inline-size:100%;flex-direction:column;align-items:stretch}@keyframes calcite-scrim-fade-in{0%{--tw-bg-opacity: 0}to{--tw-text-opacity: 1}}.scrim{position:absolute;inset:0;display:flex;flex-direction:column;align-content:center;align-items:center;justify-content:center;overflow:hidden;animation:calcite-scrim-fade-in var(--calcite-internal-animation-timing-medium) ease-in-out;background-color:var(--calcite-scrim-background, var(--calcite-color-transparent-scrim))}.content{padding:1rem}:host([hidden]){display:none}[hidden]{display:none}`,$N=class $N extends dt{constructor(){super(...arguments),this.loaderRef=vi(),this.resizeObserver=Gn("resize",()=>this.handleResize()),this.messages=un(),this.hasContent=!1,this.loading=!1}connectedCallback(){var e;super.connectedCallback(),(e=this.resizeObserver)==null||e.observe(this.el)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this.resizeObserver)==null||e.disconnect()}handleDefaultSlotChange(e){this.hasContent=DEe(e)}getScale(e){return e<qce.s?"s":e>=qce.l?"l":"m"}handleResize(){const{el:e}=this;this.loaderScale=this.getScale(Math.min(e.clientHeight,e.clientWidth)??0)}render(){const{hasContent:e,loading:i,loaderScale:r,messages:n}=this;return q`<div class=${H(Bce.scrim)}>${i&&r?q`<calcite-loader .label=${n.loading} .scale=${r} ${gt(this.loaderRef)}></calcite-loader>`:null}<div class=${H(Bce.content)} .hidden=${!e}><slot @slotchange=${this.handleDefaultSlotChange}></slot></div></div>`}};$N.properties={hasContent:[16,{},{state:!0}],loaderScale:[16,{},{state:!0}],loading:[7,{},{reflect:!0,type:Boolean}],messageOverrides:[0,{},{attribute:!1}]},$N.styles=Dut;let pG=$N;ci("calcite-scrim",pG);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Rr={actionBarContainer:"action-bar-container",container:"container",contentBottom:"content-bottom",contentTop:"content-top",header:"header",headerContainer:"header-container",headerContainerBorderEnd:"header-container--border-end",headingTextContent:"heading-text-content",heading:"heading",description:"description",headerContent:"header-content",headerActions:"header-actions",headerActionsEnd:"header-actions--end",headerActionsStart:"header-actions--start",icon:"icon",contentWrapper:"content-wrapper",fabContainer:"fab-container",footer:"footer",footerContent:"footer-content",footerActions:"footer-actions",footerStart:"footer-start",footerEnd:"footer-end",headerSlottedContent:"header--slotted-content",headerNonSlottedContent:"header--non-slotted-content",menuAction:"menu-action"},Hce={close:"close",collapse:"collapse"},r3={close:"x",menu:"ellipsis",expand:"chevron-down",collapse:"chevron-up"},Gr={actionBar:"action-bar",alerts:"alerts",contentBottom:"content-bottom",contentTop:"content-top",headerActionsStart:"header-actions-start",headerActionsEnd:"header-actions-end",headerMenuActions:"header-menu-actions",headerContent:"header-content",fab:"fab",footer:"footer",footerEnd:"footer-end",footerStart:"footer-start",footerActions:"footer-actions"};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const jut=ct`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{position:relative;box-sizing:border-box;display:flex;block-size:100%;inline-size:100%;flex:1 1 auto;overflow:hidden;--calcite-min-header-height: calc(var(--calcite-icon-size) * 3);border-radius:var(--calcite-panel-corner-radius, var(--calcite-corner-radius-sharp))}slot[name=alerts]::slotted(calcite-alert){block-size:0}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}.header{margin:0;display:flex;align-content:space-between;align-items:center;fill:var(--calcite-color-text-2);color:var(--calcite-color-text-2)}.heading{margin:0;padding:0;font-weight:var(--calcite-font-weight-medium)}.header .heading{flex:1 1 auto;padding:.5rem}:host([scale=s]){--calcite-internal-panel-default-space: var(--calcite-spacing-sm);--calcite-internal-panel-header-vertical-padding: var(--calcite-spacing-sm-plus)}:host([scale=s]) .header-content .heading{font-size:var(--calcite-font-size--1)}:host([scale=s]) .header-content .description{font-size:var(--calcite-font-size--2)}:host([scale=s]) .header-content .icon{margin-inline-end:var(--calcite-spacing-sm)}:host([scale=m]){--calcite-internal-panel-default-space: var(--calcite-spacing-md);--calcite-internal-panel-header-vertical-padding: var(--calcite-spacing-md-plus)}:host([scale=m]) .header-content .heading{font-size:var(--calcite-font-size-0)}:host([scale=m]) .header-content .description{font-size:var(--calcite-font-size--1)}:host([scale=m]) .header-content .icon{margin-inline-end:var(--calcite-spacing-md)}:host([scale=l]){--calcite-internal-panel-default-space: var(--calcite-spacing-lg);--calcite-internal-panel-header-vertical-padding: var(--calcite-spacing-xl)}:host([scale=l]) .header-content .heading{font-size:var(--calcite-font-size-1)}:host([scale=l]) .header-content .description{font-size:var(--calcite-font-size-0)}:host([scale=l]) .header-content .icon{margin-inline-end:var(--calcite-spacing-lg)}.content-top,.content-bottom{display:flex;align-items:flex-start;align-self:stretch;padding:var(--calcite-internal-panel-default-space);border-block-start:1px solid var(--calcite-panel-border-color, var(--calcite-color-border-3));background-color:var(--calcite-panel-background-color, var(--calcite-color-foreground-1))}.container{position:relative;margin:0;display:flex;inline-size:100%;flex:1 1 auto;flex-direction:column;align-items:stretch;overflow:hidden;background-color:var(--calcite-color-background);padding:0;color:var(--calcite-color-text-2);transition:max-block-size var(--calcite-animation-timing),inline-size var(--calcite-animation-timing);box-sizing:border-box;font-size:var(--calcite-font-size--1)}.container *{box-sizing:border-box}.header{z-index:var(--calcite-z-index-header);display:flex;flex-direction:column;background-color:var(--calcite-panel-header-background-color, var(--calcite-color-foreground-1));border-block-end:1px solid var(--calcite-panel-border-color, var(--calcite-panel-header-border-block-end, var(--calcite-color-border-3)))}.header-container{display:flex;inline-size:100%;flex-direction:row;align-items:stretch;justify-content:flex-start;flex:0 0 auto}.header-container--border-end{border-block-end:1px solid var(--calcite-panel-border-color, var(--calcite-color-border-3))}.action-bar-container{inline-size:100%}.action-bar-container ::slotted(calcite-action-bar){inline-size:100%}.header-content{display:flex;flex-direction:column;overflow:hidden;padding-inline:.75rem;padding-block:.875rem;margin-inline-end:auto;justify-content:center}.header-content .heading-text-content{flex:1 1 auto;overflow:hidden}.header-content .heading,.header-content .description{display:block;flex:none;overflow-wrap:break-word;padding:0;line-height:var(--calcite-font-line-height-relative-snug)}.header-content .heading{font-weight:var(--calcite-font-weight-medium);color:var(--calcite-panel-heading-text-color, var(--calcite-color-text-1))}.header-content .heading:only-child{margin-block-end:0px}.header-content .description{color:var(--calcite-panel-description-text-color, var(--calcite-color-text-2))}#close,#collapse,.back-button,calcite-action-menu{--calcite-action-background-color: var(--calcite-panel-header-action-background-color);--calcite-action-background-color-hover: var(--calcite-panel-header-action-background-color-hover);--calcite-action-background-color-press: var(--calcite-panel-header-action-background-color-press);--calcite-action-text-color: var(--calcite-panel-header-action-text-color);--calcite-action-text-color-press: var(--calcite-panel-header-action-text-color-press)}.back-button{border-width:0px;border-style:solid;border-inline-end-width:1px;border-color:var(--calcite-panel-border-color, var(--calcite-color-border-3))}.header-actions{display:flex;flex-direction:row;flex-wrap:nowrap;align-items:stretch}.header-actions--end{margin-inline-start:auto}.content-wrapper{position:relative;display:flex;block-size:100%;flex:1 1 auto;flex-direction:column;flex-wrap:nowrap;align-items:stretch;overflow:auto;color:var(--calcite-color-text-2);outline-color:transparent;padding:var(--calcite-panel-space, var(--calcite-panel-content-space, 0));background:var(--calcite-panel-background-color, var(--calcite-color-background))}.content-wrapper:focus-visible{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.header-content{flex:1 1 auto;justify-content:center;padding-block:var(--calcite-internal-panel-header-vertical-padding);padding-inline:var(--calcite-internal-panel-default-space)}.header-content.header--slotted-content{padding:var(--calcite-panel-header-content-space, var(--calcite-internal-panel-header-vertical-padding) var(--calcite-internal-panel-default-space))}.header-content.header--non-slotted-content{align-items:center;flex-direction:row}.footer{margin-block-start:auto;display:flex;flex-direction:row;align-content:space-between;align-items:center;justify-content:center;font-size:var(--calcite-font-size--2);line-height:1.375;border-block-start:1px solid var(--calcite-panel-border-color, var(--calcite-color-border-3));padding:var(--calcite-panel-footer-space, var(--calcite-panel-footer-padding, var(--calcite-internal-panel-default-space)));background-color:var(--calcite-panel-footer-background-color, var(--calcite-color-foreground-1))}.footer-content{display:flex;flex:1 1 0%;flex-direction:row;align-items:center;justify-content:center}.footer-actions{display:flex;flex:1 1 0%;flex-direction:row;align-items:center;justify-content:space-evenly;gap:var(--calcite-internal-panel-default-space)}.footer-start{display:flex;flex:1 1 0%;flex-direction:row;align-items:center;justify-content:flex-start;margin-inline-end:auto;gap:var(--calcite-internal-panel-default-space)}.footer-end{display:flex;flex:1 1 0%;flex-direction:row;align-items:center;justify-content:flex-end;margin-inline-start:auto;gap:var(--calcite-internal-panel-default-space)}.fab-container{position:sticky;inset-block-end:0px;z-index:var(--calcite-z-index-sticky);margin-block:0px;margin-inline:auto;display:block;padding:.5rem;inset-inline:0;inline-size:fit-content}calcite-icon{--calcite-icon-color: var(--calcite-panel-icon-color, var(--calcite-color-text-1))}:host([hidden]){display:none}[hidden]{display:none}`,SN=class SN extends dt{constructor(){super(),this.containerRef=vi(),this.resizeObserver=Gn("resize",()=>this.resizeHandler()),this.messages=un(),this._closed=!1,this.focusSetter=dn()(this),this.hasActionBar=!1,this.hasContentBottom=!1,this.hasContentTop=!1,this.hasEndActions=!1,this.hasFab=!1,this.hasFooterActions=!1,this.hasFooterContent=!1,this.hasFooterEndContent=!1,this.hasFooterStartContent=!1,this.hasHeaderContent=!1,this.hasMenuItems=!1,this.hasStartActions=!1,this.showHeaderContent=!1,this.closable=!1,this.collapseDirection="down",this.collapsed=!1,this.collapsible=!1,this.disabled=!1,this.iconFlipRtl=!1,this.loading=!1,this.menuOpen=!1,this.menuPlacement=sTe,this.overlayPositioning="absolute",this.scale="m",this.calcitePanelClose=Re({cancelable:!0}),this.calcitePanelCollapse=Re({cancelable:!1}),this.calcitePanelExpand=Re({cancelable:!1}),this.calcitePanelScroll=Re({cancelable:!1}),this.calcitePanelToggle=Re({cancelable:!1}),this.listen("keydown",this.panelKeyDownHandler),this.listen("calcitePanelClose",this.panelCloseHandler)}get closed(){return this._closed}set closed(e){const i=this._closed;e!==i&&this.setClosedState(e)}async scrollContentTo(e){var i;(i=this.panelScrollEl)==null||i.scrollTo(e)}async setFocus(e){return this.focusSetter(()=>this.containerRef.value,e)}willUpdate(e){e.has("collapsed")&&this.hasUpdated&&(this.collapsed?this.calcitePanelCollapse.emit():this.calcitePanelExpand.emit())}updated(){Vs(this)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this.resizeObserver)==null||e.disconnect()}async setClosedState(e){var i;if(this.beforeClose&&e)try{await((i=this.beforeClose)==null?void 0:i.call(this))}catch{return}this._closed=e}resizeHandler(){const{panelScrollEl:e}=this;if(!e||typeof e.scrollHeight!="number"||typeof e.offsetHeight!="number")return;e.scrollHeight>e.offsetHeight?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}closeClickHandler(){this.emitCloseEvent()}emitCloseEvent(){this.calcitePanelClose.emit()}panelKeyDownHandler(e){this.closable&&e.key==="Escape"&&!e.defaultPrevented&&(this.emitCloseEvent(),e.preventDefault())}panelCloseHandler(e){e.defaultPrevented||e.target!==this.el||(this.closed=!0)}collapse(){this.collapsed=!this.collapsed,this.calcitePanelToggle.emit()}panelScrollHandler(){this.calcitePanelScroll.emit()}handleHeaderActionsStartSlotChange(e){this.hasStartActions=ii(e)}handleHeaderActionsEndSlotChange(e){this.hasEndActions=ii(e)}handleHeaderMenuActionsSlotChange(e){this.hasMenuItems=ii(e)}handleActionBarSlotChange(e){const i=fu(e).filter(r=>r==null?void 0:r.matches("calcite-action-bar"));i.forEach(r=>r.layout="horizontal"),this.hasActionBar=!!i.length}handleHeaderContentSlotChange(e){this.hasHeaderContent=ii(e)}handleFabSlotChange(e){this.hasFab=ii(e)}handleFooterActionsSlotChange(e){this.hasFooterActions=ii(e)}handleFooterEndSlotChange(e){this.hasFooterEndContent=ii(e)}handleFooterStartSlotChange(e){this.hasFooterStartContent=ii(e)}handleFooterSlotChange(e){this.hasFooterContent=ii(e)}contentBottomSlotChangeHandler(e){this.hasContentBottom=ii(e)}contentTopSlotChangeHandler(e){this.hasContentTop=ii(e)}setPanelScrollEl(e){lE(this.resizeObserver,this.panelScrollEl,e),this.panelScrollEl=e}handleAlertsSlotChange(e){var i;(i=fu(e))==null||i.map(r=>{r.nodeName==="CALCITE-ALERT"&&(r.embedded=!0)})}renderHeaderContent(){const{heading:e,headingLevel:i,description:r,hasHeaderContent:n,icon:s,scale:a}=this,o=s?q`<calcite-icon class=${H(Rr.icon)} .flipRtl=${this.iconFlipRtl} .icon=${s} .scale=${gr(a)}></calcite-icon>`:null,l=e?YJ({class:Rr.heading,level:i,children:e}):null,c=r?q`<span class=${H(Rr.description)}>${r}</span>`:null;return!n&&(l||c)?nt("header-content",q`<div class=${H({[Rr.headerContent]:!0,[Rr.headerNonSlottedContent]:!0})}>${o}<div class=${H(Rr.headingTextContent)}>${l}${c}</div></div>`):null}renderActionBar(){return q`<div class=${H(Rr.actionBarContainer)} .hidden=${!this.hasActionBar}><slot name=${Gr.actionBar} @slotchange=${this.handleActionBarSlotChange}></slot></div>`}renderHeaderSlottedContent(){return nt("slotted-header-content",q`<div class=${H({[Rr.headerContent]:!0,[Rr.headerSlottedContent]:!0})} .hidden=${!this.hasHeaderContent}><slot name=${Gr.headerContent} @slotchange=${this.handleHeaderContentSlotChange}></slot></div>`)}renderHeaderStartActions(){const{hasStartActions:e}=this;return nt("header-actions-start",q`<div class=${H({[Rr.headerActionsStart]:!0,[Rr.headerActions]:!0})} .hidden=${!e}><slot name=${Gr.headerActionsStart} @slotchange=${this.handleHeaderActionsStartSlotChange}></slot></div>`)}renderHeaderActionsEnd(){const{hasEndActions:e,messages:i,closable:r,collapsed:n,collapseDirection:s,collapsible:a,hasMenuItems:o}=this,{collapse:l,expand:c,close:h}=i,m=[r3.expand,r3.collapse];s==="up"&&m.reverse();const g=a?q`<calcite-action .aria=${{expanded:!n}} .icon=${n?m[0]:m[1]} id=${Hce.collapse} .label=${l} @click=${this.collapse} .scale=${this.scale} .text=${l} title=${(n?c:l)??Xe}></calcite-action>`:null,v=r?q`<calcite-action .ariaLabel=${h} .icon=${r3.close} id=${Hce.close} @click=${this.closeClickHandler} .scale=${this.scale} .text=${h} title=${h??Xe}></calcite-action>`:null,b=q`<slot name=${Gr.headerActionsEnd} @slotchange=${this.handleHeaderActionsEndSlotChange}></slot>`,x=e||g||v||o;return nt("header-actions-end",q`<div class=${H({[Rr.headerActionsEnd]:!0,[Rr.headerActions]:!0})} .hidden=${!x}>${b}${this.renderMenu()}${g}${v}</div>`)}renderMenu(){const{hasMenuItems:e,messages:i,menuOpen:r,menuFlipPlacements:n,menuPlacement:s}=this;return nt("menu",q`<calcite-action-menu .flipPlacements=${n??["top","bottom"]} .hidden=${!e} .label=${i.options} .open=${r} .overlayPositioning=${this.overlayPositioning} .placement=${s}><calcite-action class=${H(Rr.menuAction)} .icon=${r3.menu} .scale=${this.scale} slot=${hT.trigger} .text=${i.options}></calcite-action><slot name=${Gr.headerMenuActions} @slotchange=${this.handleHeaderMenuActionsSlotChange}></slot></calcite-action-menu>`)}renderHeaderNode(){const{hasHeaderContent:e,hasStartActions:i,hasEndActions:r,closable:n,collapsible:s,hasMenuItems:a,hasActionBar:o,hasContentTop:l}=this,c=this.renderHeaderContent(),h=e||!!c||i||r||s||n||a||o||l;return this.showHeaderContent=h,q`<header class=${H(Rr.header)} .hidden=${!(h||o||l)}><div class=${H({[Rr.headerContainer]:!0,[Rr.headerContainerBorderEnd]:o})} .hidden=${!h}>${this.renderHeaderStartActions()}${this.renderHeaderSlottedContent()}${c}${this.renderHeaderActionsEnd()}</div>${this.renderActionBar()}${this.renderContentTop()}</header>`}renderFooterNode(){const{hasFooterEndContent:e,hasFooterStartContent:i,hasFooterContent:r,hasFooterActions:n}=this,s=i||e||r||n;return q`<footer class=${H(Rr.footer)} .hidden=${!s}><div class=${H(Rr.footerContent)} .hidden=${!r}><slot name=${Gr.footer} @slotchange=${this.handleFooterSlotChange}></slot></div><div class=${H(Rr.footerStart)} .hidden=${r||!i}><slot name=${Gr.footerStart} @slotchange=${this.handleFooterStartSlotChange}></slot></div><div class=${H(Rr.footerEnd)} .hidden=${r||!e}><slot name=${Gr.footerEnd} @slotchange=${this.handleFooterEndSlotChange}></slot></div><div class=${H(Rr.footerActions)} .hidden=${r||!n}>${nt("footer-actions-slot",q`<slot name=${Gr.footerActions} @slotchange=${this.handleFooterActionsSlotChange}></slot>`)}</div></footer>`}renderContent(){return q`<div class=${H(Rr.contentWrapper)} .hidden=${this.collapsible&&this.collapsed} @scroll=${this.panelScrollHandler} ${gt(this.setPanelScrollEl)}><slot></slot>${this.renderFab()}</div>`}renderContentBottom(){return q`<div class=${H(Rr.contentBottom)} .hidden=${!this.hasContentBottom}><slot name=${Gr.contentBottom} @slotchange=${this.contentBottomSlotChangeHandler}></slot></div>`}renderContentTop(){return q`<div class=${H(Rr.contentTop)} .hidden=${!this.hasContentTop}><slot name=${Gr.contentTop} @slotchange=${this.contentTopSlotChangeHandler}></slot></div>`}renderFab(){return q`<div class=${H(Rr.fabContainer)} .hidden=${!this.hasFab}><slot name=${Gr.fab} @slotchange=${this.handleFabSlotChange}></slot></div>`}render(){const{disabled:e,loading:i,closed:r}=this,n=q`<article .ariaBusy=${i} class=${H(Rr.container)} .hidden=${r} ${gt(this.containerRef)}>${this.renderHeaderNode()}${this.renderContent()}${this.renderContentBottom()}${this.renderFooterNode()}${nt("alerts",q`<slot name=${Gr.alerts} @slotchange=${this.handleAlertsSlotChange}></slot>`)}</article>`;return Us({disabled:e,children:q`${i?q`<calcite-scrim .loading=${i}></calcite-scrim>`:null}${n}`})}};SN.properties={hasActionBar:[16,{},{state:!0}],hasContentBottom:[16,{},{state:!0}],hasContentTop:[16,{},{state:!0}],hasEndActions:[16,{},{state:!0}],hasFab:[16,{},{state:!0}],hasFooterActions:[16,{},{state:!0}],hasFooterContent:[16,{},{state:!0}],hasFooterEndContent:[16,{},{state:!0}],hasFooterStartContent:[16,{},{state:!0}],hasHeaderContent:[16,{},{state:!0}],hasMenuItems:[16,{},{state:!0}],hasStartActions:[16,{},{state:!0}],showHeaderContent:[16,{},{state:!0}],beforeClose:[0,{},{attribute:!1}],closable:[7,{},{reflect:!0,type:Boolean}],closed:[7,{},{reflect:!0,type:Boolean}],collapseDirection:1,collapsed:[7,{},{reflect:!0,type:Boolean}],collapsible:[7,{},{reflect:!0,type:Boolean}],description:1,disabled:[7,{},{reflect:!0,type:Boolean}],heading:1,headingLevel:[11,{},{type:Number,reflect:!0}],icon:[3,{},{reflect:!0}],iconFlipRtl:[7,{},{reflect:!0,type:Boolean}],loading:[7,{},{reflect:!0,type:Boolean}],menuFlipPlacements:[0,{},{attribute:!1}],menuOpen:[7,{},{reflect:!0,type:Boolean}],menuPlacement:[3,{},{reflect:!0}],messageOverrides:[0,{},{attribute:!1}],overlayPositioning:[3,{},{reflect:!0}],scale:[3,{},{reflect:!0}]},SN.styles=jut;let fG=SN;ci("calcite-panel",fG);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */function Vut(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var HC={exports:{}},Uut=HC.exports,Gce;function But(){return Gce||(Gce=1,(function(t,e){(function(i,r){t.exports=r()})(Uut,function(){function i(T,S){var E=Object.keys(T);if(Object.getOwnPropertySymbols){var P=Object.getOwnPropertySymbols(T);S&&(P=P.filter(function(R){return Object.getOwnPropertyDescriptor(T,R).enumerable})),E.push.apply(E,P)}return E}function r(T){for(var S=1;S<arguments.length;S++){var E=arguments[S]!=null?arguments[S]:{};S%2?i(Object(E),!0).forEach(function(P){l(T,P,E[P])}):Object.getOwnPropertyDescriptors?Object.defineProperties(T,Object.getOwnPropertyDescriptors(E)):i(Object(E)).forEach(function(P){Object.defineProperty(T,P,Object.getOwnPropertyDescriptor(E,P))})}return T}function n(T){return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},n(T)}function s(T,S){if(!(T instanceof S))throw new TypeError("Cannot call a class as a function")}function a(T,S){for(var E=0;E<S.length;E++){var P=S[E];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(T,x(P.key),P)}}function o(T,S,E){return S&&a(T.prototype,S),Object.defineProperty(T,"prototype",{writable:!1}),T}function l(T,S,E){return(S=x(S))in T?Object.defineProperty(T,S,{value:E,enumerable:!0,configurable:!0,writable:!0}):T[S]=E,T}function c(T,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function");T.prototype=Object.create(S&&S.prototype,{constructor:{value:T,writable:!0,configurable:!0}}),Object.defineProperty(T,"prototype",{writable:!1}),S&&m(T,S)}function h(T){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(S){return S.__proto__||Object.getPrototypeOf(S)},h(T)}function m(T,S){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(E,P){return E.__proto__=P,E},m(T,S)}function g(T){if(T===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T}function v(T){var S=(function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}})();return function(){var E,P=h(T);if(S){var R=h(this).constructor;E=Reflect.construct(P,arguments,R)}else E=P.apply(this,arguments);return(function(j,W){if(W&&(typeof W=="object"||typeof W=="function"))return W;if(W!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return g(j)})(this,E)}}function b(){return b=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(T,S,E){var P=(function(j,W){for(;!Object.prototype.hasOwnProperty.call(j,W)&&(j=h(j))!==null;);return j})(T,S);if(P){var R=Object.getOwnPropertyDescriptor(P,S);return R.get?R.get.call(arguments.length<3?T:E):R.value}},b.apply(this,arguments)}function x(T){var S=(function(E,P){if(typeof E!="object"||E===null)return E;var R=E[Symbol.toPrimitive];if(R!==void 0){var j=R.call(E,P);if(typeof j!="object")return j;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(E)})(T,"string");return typeof S=="symbol"?S:S+""}var $=function(T){return!(!T||!T.Window)&&T instanceof T.Window},M=void 0,k=void 0;function A(T){M=T;var S=T.document.createTextNode("");S.ownerDocument!==T.document&&typeof T.wrap=="function"&&T.wrap(S)===S&&(T=T.wrap(T)),k=T}function L(T){return $(T)?T:(T.ownerDocument||T).defaultView||k.window}typeof window<"u"&&window&&A(window);var z=function(T){return!!T&&n(T)==="object"},U=function(T){return typeof T=="function"},B={window:function(T){return T===k||$(T)},docFrag:function(T){return z(T)&&T.nodeType===11},object:z,func:U,number:function(T){return typeof T=="number"},bool:function(T){return typeof T=="boolean"},string:function(T){return typeof T=="string"},element:function(T){if(!T||n(T)!=="object")return!1;var S=L(T)||k;return/object|function/.test(typeof Element>"u"?"undefined":n(Element))?T instanceof Element||T instanceof S.Element:T.nodeType===1&&typeof T.nodeName=="string"},plainObject:function(T){return z(T)&&!!T.constructor&&/function Object\b/.test(T.constructor.toString())},array:function(T){return z(T)&&T.length!==void 0&&U(T.splice)}};function X(T){var S=T.interaction;if(S.prepared.name==="drag"){var E=S.prepared.axis;E==="x"?(S.coords.cur.page.y=S.coords.start.page.y,S.coords.cur.client.y=S.coords.start.client.y,S.coords.velocity.client.y=0,S.coords.velocity.page.y=0):E==="y"&&(S.coords.cur.page.x=S.coords.start.page.x,S.coords.cur.client.x=S.coords.start.client.x,S.coords.velocity.client.x=0,S.coords.velocity.page.x=0)}}function J(T){var S=T.iEvent,E=T.interaction;if(E.prepared.name==="drag"){var P=E.prepared.axis;if(P==="x"||P==="y"){var R=P==="x"?"y":"x";S.page[R]=E.coords.start.page[R],S.client[R]=E.coords.start.client[R],S.delta[R]=0}}}var Q={id:"actions/drag",install:function(T){var S=T.actions,E=T.Interactable,P=T.defaults;E.prototype.draggable=Q.draggable,S.map.drag=Q,S.methodDict.drag="draggable",P.actions.drag=Q.defaults},listeners:{"interactions:before-action-move":X,"interactions:action-resume":X,"interactions:action-move":J,"auto-start:check":function(T){var S=T.interaction,E=T.interactable,P=T.buttons,R=E.options.drag;if(R&&R.enabled&&(!S.pointerIsDown||!/mouse|pointer/.test(S.pointerType)||(P&E.options.drag.mouseButtons)!=0))return T.action={name:"drag",axis:R.lockAxis==="start"?R.startAxis:R.lockAxis},!1}},draggable:function(T){return B.object(T)?(this.options.drag.enabled=T.enabled!==!1,this.setPerAction("drag",T),this.setOnEvents("drag",T),/^(xy|x|y|start)$/.test(T.lockAxis)&&(this.options.drag.lockAxis=T.lockAxis),/^(xy|x|y)$/.test(T.startAxis)&&(this.options.drag.startAxis=T.startAxis),this):B.bool(T)?(this.options.drag.enabled=T,this):this.options.drag},beforeMove:X,move:J,defaults:{startAxis:"xy",lockAxis:"xy"},getCursor:function(){return"move"},filterEventType:function(T){return T.search("drag")===0}},le=Q,ie={init:function(T){var S=T;ie.document=S.document,ie.DocumentFragment=S.DocumentFragment||re,ie.SVGElement=S.SVGElement||re,ie.SVGSVGElement=S.SVGSVGElement||re,ie.SVGElementInstance=S.SVGElementInstance||re,ie.Element=S.Element||re,ie.HTMLElement=S.HTMLElement||ie.Element,ie.Event=S.Event,ie.Touch=S.Touch||re,ie.PointerEvent=S.PointerEvent||S.MSPointerEvent},document:null,DocumentFragment:null,SVGElement:null,SVGSVGElement:null,SVGElementInstance:null,Element:null,HTMLElement:null,Event:null,Touch:null,PointerEvent:null};function re(){}var se=ie,Te={init:function(T){var S=se.Element,E=T.navigator||{};Te.supportsTouch="ontouchstart"in T||B.func(T.DocumentTouch)&&se.document instanceof T.DocumentTouch,Te.supportsPointerEvent=E.pointerEnabled!==!1&&!!se.PointerEvent,Te.isIOS=/iP(hone|od|ad)/.test(E.platform),Te.isIOS7=/iP(hone|od|ad)/.test(E.platform)&&/OS 7[^\d]/.test(E.appVersion),Te.isIe9=/MSIE 9/.test(E.userAgent),Te.isOperaMobile=E.appName==="Opera"&&Te.supportsTouch&&/Presto/.test(E.userAgent),Te.prefixedMatchesSelector="matches"in S.prototype?"matches":"webkitMatchesSelector"in S.prototype?"webkitMatchesSelector":"mozMatchesSelector"in S.prototype?"mozMatchesSelector":"oMatchesSelector"in S.prototype?"oMatchesSelector":"msMatchesSelector",Te.pEventTypes=Te.supportsPointerEvent?se.PointerEvent===T.MSPointerEvent?{up:"MSPointerUp",down:"MSPointerDown",over:"mouseover",out:"mouseout",move:"MSPointerMove",cancel:"MSPointerCancel"}:{up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"}:null,Te.wheelEvent=se.document&&"onmousewheel"in se.document?"mousewheel":"wheel"},supportsTouch:null,supportsPointerEvent:null,isIOS7:null,isIOS:null,isIe9:null,isOperaMobile:null,prefixedMatchesSelector:null,pEventTypes:null,wheelEvent:null},ne=Te;function _e(T,S){if(T.contains)return T.contains(S);for(;S;){if(S===T)return!0;S=S.parentNode}return!1}function Oe(T,S){for(;B.element(T);){if(ft(T,S))return T;T=He(T)}return null}function He(T){var S=T.parentNode;if(B.docFrag(S)){for(;(S=S.host)&&B.docFrag(S););return S}return S}function ft(T,S){return k!==M&&(S=S.replace(/\/deep\//g," ")),T[ne.prefixedMatchesSelector](S)}var oe=function(T){return T.parentNode||T.host};function ze(T,S){for(var E,P=[],R=T;(E=oe(R))&&R!==S&&E!==R.ownerDocument;)P.unshift(R),R=E;return P}function Ke(T,S,E){for(;B.element(T);){if(ft(T,S))return!0;if((T=He(T))===E)return ft(T,S)}return!1}function at(T){return T.correspondingUseElement||T}function kt(T){var S=T instanceof se.SVGElement?T.getBoundingClientRect():T.getClientRects()[0];return S&&{left:S.left,right:S.right,top:S.top,bottom:S.bottom,width:S.width||S.right-S.left,height:S.height||S.bottom-S.top}}function Wt(T){var S,E=kt(T);if(!ne.isIOS7&&E){var P={x:(S=(S=L(T))||k).scrollX||S.document.documentElement.scrollLeft,y:S.scrollY||S.document.documentElement.scrollTop};E.left+=P.x,E.right+=P.x,E.top+=P.y,E.bottom+=P.y}return E}function ui(T){for(var S=[];T;)S.push(T),T=He(T);return S}function Tr(T){return!!B.string(T)&&(se.document.querySelector(T),!0)}function it(T,S){for(var E in S)T[E]=S[E];return T}function Wo(T,S,E){return T==="parent"?He(E):T==="self"?S.getRect(E):Oe(E,T)}function ks(T,S,E,P){var R=T;return B.string(R)?R=Wo(R,S,E):B.func(R)&&(R=R.apply(void 0,P)),B.element(R)&&(R=Wt(R)),R}function Zo(T){return T&&{x:"x"in T?T.x:T.left,y:"y"in T?T.y:T.top}}function Cc(T){return!T||"x"in T&&"y"in T||((T=it({},T)).x=T.left||0,T.y=T.top||0,T.width=T.width||(T.right||0)-T.x,T.height=T.height||(T.bottom||0)-T.y),T}function qs(T,S,E){T.left&&(S.left+=E.x),T.right&&(S.right+=E.x),T.top&&(S.top+=E.y),T.bottom&&(S.bottom+=E.y),S.width=S.right-S.left,S.height=S.bottom-S.top}function ha(T,S,E){var P=E&&T.options[E];return Zo(ks(P&&P.origin||T.options.origin,T,S,[T&&S]))||{x:0,y:0}}function Hs(T,S){var E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(K){return!0},P=arguments.length>3?arguments[3]:void 0;if(P=P||{},B.string(T)&&T.search(" ")!==-1&&(T=E_(T)),B.array(T))return T.forEach(function(K){return Hs(K,S,E,P)}),P;if(B.object(T)&&(S=T,T=""),B.func(S)&&E(T))P[T]=P[T]||[],P[T].push(S);else if(B.array(S))for(var R=0,j=S;R<j.length;R++){var W=j[R];Hs(T,W,E,P)}else if(B.object(S))for(var Y in S)Hs(E_(Y).map(function(K){return"".concat(T).concat(K)}),S[Y],E,P);return P}function E_(T){return T.trim().split(/ +/)}var Hd=function(T,S){return Math.sqrt(T*T+S*S)},hg=["webkit","moz"];function Mu(T,S){T.__set||(T.__set={});var E=function(R){if(hg.some(function(j){return R.indexOf(j)===0}))return 1;typeof T[R]!="function"&&R!=="__set"&&Object.defineProperty(T,R,{get:function(){return R in T.__set?T.__set[R]:T.__set[R]=S[R]},set:function(j){T.__set[R]=j},configurable:!0})};for(var P in S)E(P);return T}function pa(T,S){T.page=T.page||{},T.page.x=S.page.x,T.page.y=S.page.y,T.client=T.client||{},T.client.x=S.client.x,T.client.y=S.client.y,T.timeStamp=S.timeStamp}function k_(T){T.page.x=0,T.page.y=0,T.client.x=0,T.client.y=0}function A_(T){return T instanceof se.Event||T instanceof se.Touch}function cs(T,S,E){return T=T||"page",(E=E||{}).x=S[T+"X"],E.y=S[T+"Y"],E}function P_(T,S){return S=S||{x:0,y:0},ne.isOperaMobile&&A_(T)?(cs("screen",T,S),S.x+=window.scrollX,S.y+=window.scrollY):cs("page",T,S),S}function Gd(T){return B.number(T.pointerId)?T.pointerId:T.identifier}function O_(T,S,E){var P=S.length>1?lI(S):S[0];P_(P,T.page),(function(R,j){j=j||{},ne.isOperaMobile&&A_(R)?cs("screen",R,j):cs("client",R,j)})(P,T.client),T.timeStamp=E}function Wd(T){var S=[];return B.array(T)?(S[0]=T[0],S[1]=T[1]):T.type==="touchend"?T.touches.length===1?(S[0]=T.touches[0],S[1]=T.changedTouches[0]):T.touches.length===0&&(S[0]=T.changedTouches[0],S[1]=T.changedTouches[1]):(S[0]=T.touches[0],S[1]=T.touches[1]),S}function lI(T){for(var S={pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0},E=0;E<T.length;E++){var P=T[E];for(var R in S)S[R]+=P[R]}for(var j in S)S[j]/=T.length;return S}function pg(T){if(!T.length)return null;var S=Wd(T),E=Math.min(S[0].pageX,S[1].pageX),P=Math.min(S[0].pageY,S[1].pageY),R=Math.max(S[0].pageX,S[1].pageX),j=Math.max(S[0].pageY,S[1].pageY);return{x:E,y:P,left:E,top:P,right:R,bottom:j,width:R-E,height:j-P}}function Wv(T,S){var E=S+"X",P=S+"Y",R=Wd(T),j=R[0][E]-R[1][E],W=R[0][P]-R[1][P];return Hd(j,W)}function Zv(T,S){var E=S+"X",P=S+"Y",R=Wd(T),j=R[1][E]-R[0][E],W=R[1][P]-R[0][P];return 180*Math.atan2(W,j)/Math.PI}function Zd(T){return B.string(T.pointerType)?T.pointerType:B.number(T.pointerType)?[void 0,void 0,"touch","pen","mouse"][T.pointerType]:/touch/.test(T.type||"")||T instanceof se.Touch?"touch":"mouse"}function Gs(T){var S=B.func(T.composedPath)?T.composedPath():T.path;return[at(S?S[0]:T.target),at(T.currentTarget)]}var po=(function(){function T(S){s(this,T),this.immediatePropagationStopped=!1,this.propagationStopped=!1,this._interaction=S}return o(T,[{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}]),T})();Object.defineProperty(po.prototype,"interaction",{get:function(){return this._interaction._proxy},set:function(){}});var Ws=function(T,S){for(var E=0;E<S.length;E++){var P=S[E];T.push(P)}return T},L_=function(T){return Ws([],T)},Zp=function(T,S){for(var E=0;E<T.length;E++)if(S(T[E],E,T))return E;return-1},Yp=function(T,S){return T[Zp(T,S)]},Nl=(function(T){c(E,T);var S=v(E);function E(P,R,j){var W;s(this,E),(W=S.call(this,R._interaction)).dropzone=void 0,W.dragEvent=void 0,W.relatedTarget=void 0,W.draggable=void 0,W.propagationStopped=!1,W.immediatePropagationStopped=!1;var Y=j==="dragleave"?P.prev:P.cur,K=Y.element,fe=Y.dropzone;return W.type=j,W.target=K,W.currentTarget=K,W.dropzone=fe,W.dragEvent=R,W.relatedTarget=R.target,W.draggable=R.interactable,W.timeStamp=R.timeStamp,W}return o(E,[{key:"reject",value:function(){var P=this,R=this._interaction.dropState;if(this.type==="dropactivate"||this.dropzone&&R.cur.dropzone===this.dropzone&&R.cur.element===this.target)if(R.prev.dropzone=this.dropzone,R.prev.element=this.target,R.rejected=!0,R.events.enter=null,this.stopImmediatePropagation(),this.type==="dropactivate"){var j=R.activeDrops,W=Zp(j,function(K){var fe=K.dropzone,ee=K.element;return fe===P.dropzone&&ee===P.target});R.activeDrops.splice(W,1);var Y=new E(R,this.dragEvent,"dropdeactivate");Y.dropzone=this.dropzone,Y.target=this.target,this.dropzone.fire(Y)}else this.dropzone.fire(new E(R,this.dragEvent,"dragleave"))}},{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}]),E})(po);function Jp(T,S){for(var E=0,P=T.slice();E<P.length;E++){var R=P[E],j=R.dropzone,W=R.element;S.dropzone=j,S.target=W,j.fire(S),S.propagationStopped=S.immediatePropagationStopped=!1}}function Yd(T,S){for(var E=(function(j,W){for(var Y=[],K=0,fe=j.interactables.list;K<fe.length;K++){var ee=fe[K];if(ee.options.drop.enabled){var we=ee.options.drop.accept;if(!(B.element(we)&&we!==W||B.string(we)&&!ft(W,we)||B.func(we)&&!we({dropzone:ee,draggableElement:W})))for(var Fe=0,Je=ee.getAllElements();Fe<Je.length;Fe++){var We=Je[Fe];We!==W&&Y.push({dropzone:ee,element:We,rect:ee.getRect(We)})}}}return Y})(T,S),P=0;P<E.length;P++){var R=E[P];R.rect=R.dropzone.getRect(R.element)}return E}function Ec(T,S,E){for(var P=T.dropState,R=T.interactable,j=T.element,W=[],Y=0,K=P.activeDrops;Y<K.length;Y++){var fe=K[Y],ee=fe.dropzone,we=fe.element,Fe=fe.rect,Je=ee.dropCheck(S,E,R,j,we,Fe);W.push(Je?we:null)}var We=(function(Qe){for(var yt,ht,Tt,ti=[],di=0;di<Qe.length;di++){var Vt=Qe[di],ri=Qe[yt];if(Vt&&di!==yt)if(ri){var pn=oe(Vt),tr=oe(ri);if(pn!==Vt.ownerDocument)if(tr!==Vt.ownerDocument)if(pn!==tr){ti=ti.length?ti:ze(ri);var ma=void 0;if(ri instanceof se.HTMLElement&&Vt instanceof se.SVGElement&&!(Vt instanceof se.SVGSVGElement)){if(Vt===tr)continue;ma=Vt.ownerSVGElement}else ma=Vt;for(var Jo=ze(ma,ri.ownerDocument),ga=0;Jo[ga]&&Jo[ga]===ti[ga];)ga++;var cb=[Jo[ga-1],Jo[ga],ti[ga]];if(cb[0])for(var $g=cb[0].lastChild;$g;){if($g===cb[1]){yt=di,ti=Jo;break}if($g===cb[2])break;$g=$g.previousSibling}}else Tt=ri,(parseInt(L(ht=Vt).getComputedStyle(ht).zIndex,10)||0)>=(parseInt(L(Tt).getComputedStyle(Tt).zIndex,10)||0)&&(yt=di);else yt=di}else yt=di}return yt})(W);return P.activeDrops[We]||null}function Jd(T,S,E){var P=T.dropState,R={enter:null,leave:null,activate:null,deactivate:null,move:null,drop:null};return E.type==="dragstart"&&(R.activate=new Nl(P,E,"dropactivate"),R.activate.target=null,R.activate.dropzone=null),E.type==="dragend"&&(R.deactivate=new Nl(P,E,"dropdeactivate"),R.deactivate.target=null,R.deactivate.dropzone=null),P.rejected||(P.cur.element!==P.prev.element&&(P.prev.dropzone&&(R.leave=new Nl(P,E,"dragleave"),E.dragLeave=R.leave.target=P.prev.element,E.prevDropzone=R.leave.dropzone=P.prev.dropzone),P.cur.dropzone&&(R.enter=new Nl(P,E,"dragenter"),E.dragEnter=P.cur.element,E.dropzone=P.cur.dropzone)),E.type==="dragend"&&P.cur.dropzone&&(R.drop=new Nl(P,E,"drop"),E.dropzone=P.cur.dropzone,E.relatedTarget=P.cur.element),E.type==="dragmove"&&P.cur.dropzone&&(R.move=new Nl(P,E,"dropmove"),E.dropzone=P.cur.dropzone)),R}function Cu(T,S){var E=T.dropState,P=E.activeDrops,R=E.cur,j=E.prev;S.leave&&j.dropzone.fire(S.leave),S.enter&&R.dropzone.fire(S.enter),S.move&&R.dropzone.fire(S.move),S.drop&&R.dropzone.fire(S.drop),S.deactivate&&Jp(P,S.deactivate),E.prev.dropzone=R.dropzone,E.prev.element=R.element}function F_(T,S){var E=T.interaction,P=T.iEvent,R=T.event;if(P.type==="dragmove"||P.type==="dragend"){var j=E.dropState;S.dynamicDrop&&(j.activeDrops=Yd(S,E.element));var W=P,Y=Ec(E,W,R);j.rejected=j.rejected&&!!Y&&Y.dropzone===j.cur.dropzone&&Y.element===j.cur.element,j.cur.dropzone=Y&&Y.dropzone,j.cur.element=Y&&Y.element,j.events=Jd(E,0,W)}}var Ae={id:"actions/drop",install:function(T){var S=T.actions,E=T.interactStatic,P=T.Interactable,R=T.defaults;T.usePlugin(le),P.prototype.dropzone=function(j){return(function(W,Y){if(B.object(Y)){if(W.options.drop.enabled=Y.enabled!==!1,Y.listeners){var K=Hs(Y.listeners),fe=Object.keys(K).reduce(function(we,Fe){return we[/^(enter|leave)/.test(Fe)?"drag".concat(Fe):/^(activate|deactivate|move)/.test(Fe)?"drop".concat(Fe):Fe]=K[Fe],we},{}),ee=W.options.drop.listeners;ee&&W.off(ee),W.on(fe),W.options.drop.listeners=fe}return B.func(Y.ondrop)&&W.on("drop",Y.ondrop),B.func(Y.ondropactivate)&&W.on("dropactivate",Y.ondropactivate),B.func(Y.ondropdeactivate)&&W.on("dropdeactivate",Y.ondropdeactivate),B.func(Y.ondragenter)&&W.on("dragenter",Y.ondragenter),B.func(Y.ondragleave)&&W.on("dragleave",Y.ondragleave),B.func(Y.ondropmove)&&W.on("dropmove",Y.ondropmove),/^(pointer|center)$/.test(Y.overlap)?W.options.drop.overlap=Y.overlap:B.number(Y.overlap)&&(W.options.drop.overlap=Math.max(Math.min(1,Y.overlap),0)),"accept"in Y&&(W.options.drop.accept=Y.accept),"checker"in Y&&(W.options.drop.checker=Y.checker),W}return B.bool(Y)?(W.options.drop.enabled=Y,W):W.options.drop})(this,j)},P.prototype.dropCheck=function(j,W,Y,K,fe,ee){return(function(we,Fe,Je,We,Qe,yt,ht){var Tt=!1;if(!(ht=ht||we.getRect(yt)))return!!we.options.drop.checker&&we.options.drop.checker(Fe,Je,Tt,we,yt,We,Qe);var ti=we.options.drop.overlap;if(ti==="pointer"){var di=ha(We,Qe,"drag"),Vt=P_(Fe);Vt.x+=di.x,Vt.y+=di.y;var ri=Vt.x>ht.left&&Vt.x<ht.right,pn=Vt.y>ht.top&&Vt.y<ht.bottom;Tt=ri&&pn}var tr=We.getRect(Qe);if(tr&&ti==="center"){var ma=tr.left+tr.width/2,Jo=tr.top+tr.height/2;Tt=ma>=ht.left&&ma<=ht.right&&Jo>=ht.top&&Jo<=ht.bottom}return tr&&B.number(ti)&&(Tt=Math.max(0,Math.min(ht.right,tr.right)-Math.max(ht.left,tr.left))*Math.max(0,Math.min(ht.bottom,tr.bottom)-Math.max(ht.top,tr.top))/(tr.width*tr.height)>=ti),we.options.drop.checker&&(Tt=we.options.drop.checker(Fe,Je,Tt,we,yt,We,Qe)),Tt})(this,j,W,Y,K,fe,ee)},E.dynamicDrop=function(j){return B.bool(j)?(T.dynamicDrop=j,E):T.dynamicDrop},it(S.phaselessTypes,{dragenter:!0,dragleave:!0,dropactivate:!0,dropdeactivate:!0,dropmove:!0,drop:!0}),S.methodDict.drop="dropzone",T.dynamicDrop=!1,R.actions.drop=Ae.defaults},listeners:{"interactions:before-action-start":function(T){var S=T.interaction;S.prepared.name==="drag"&&(S.dropState={cur:{dropzone:null,element:null},prev:{dropzone:null,element:null},rejected:null,events:null,activeDrops:[]})},"interactions:after-action-start":function(T,S){var E=T.interaction,P=(T.event,T.iEvent);if(E.prepared.name==="drag"){var R=E.dropState;R.activeDrops=[],R.events={},R.activeDrops=Yd(S,E.element),R.events=Jd(E,0,P),R.events.activate&&(Jp(R.activeDrops,R.events.activate),S.fire("actions/drop:start",{interaction:E,dragEvent:P}))}},"interactions:action-move":F_,"interactions:after-action-move":function(T,S){var E=T.interaction,P=T.iEvent;if(E.prepared.name==="drag"){var R=E.dropState;Cu(E,R.events),S.fire("actions/drop:move",{interaction:E,dragEvent:P}),R.events={}}},"interactions:action-end":function(T,S){if(T.interaction.prepared.name==="drag"){var E=T.interaction,P=T.iEvent;F_(T,S),Cu(E,E.dropState.events),S.fire("actions/drop:end",{interaction:E,dragEvent:P})}},"interactions:stop":function(T){var S=T.interaction;if(S.prepared.name==="drag"){var E=S.dropState;E&&(E.activeDrops=null,E.events=null,E.cur.dropzone=null,E.cur.element=null,E.prev.dropzone=null,E.prev.element=null,E.rejected=!1)}}},getActiveDrops:Yd,getDrop:Ec,getDropEvents:Jd,fireDropEvents:Cu,filterEventType:function(T){return T.search("drag")===0||T.search("drop")===0},defaults:{enabled:!1,accept:null,overlap:"pointer"}},cr=Ae;function Na(T){var S=T.interaction,E=T.iEvent,P=T.phase;if(S.prepared.name==="gesture"){var R=S.pointers.map(function(fe){return fe.pointer}),j=P==="start",W=P==="end",Y=S.interactable.options.deltaSource;if(E.touches=[R[0],R[1]],j)E.distance=Wv(R,Y),E.box=pg(R),E.scale=1,E.ds=0,E.angle=Zv(R,Y),E.da=0,S.gesture.startDistance=E.distance,S.gesture.startAngle=E.angle;else if(W||S.pointers.length<2){var K=S.prevEvent;E.distance=K.distance,E.box=K.box,E.scale=K.scale,E.ds=0,E.angle=K.angle,E.da=0}else E.distance=Wv(R,Y),E.box=pg(R),E.scale=E.distance/S.gesture.startDistance,E.angle=Zv(R,Y),E.ds=E.scale-S.gesture.scale,E.da=E.angle-S.gesture.angle;S.gesture.distance=E.distance,S.gesture.angle=E.angle,B.number(E.scale)&&E.scale!==1/0&&!isNaN(E.scale)&&(S.gesture.scale=E.scale)}}var Eu={id:"actions/gesture",before:["actions/drag","actions/resize"],install:function(T){var S=T.actions,E=T.Interactable,P=T.defaults;E.prototype.gesturable=function(R){return B.object(R)?(this.options.gesture.enabled=R.enabled!==!1,this.setPerAction("gesture",R),this.setOnEvents("gesture",R),this):B.bool(R)?(this.options.gesture.enabled=R,this):this.options.gesture},S.map.gesture=Eu,S.methodDict.gesture="gesturable",P.actions.gesture=Eu.defaults},listeners:{"interactions:action-start":Na,"interactions:action-move":Na,"interactions:action-end":Na,"interactions:new":function(T){T.interaction.gesture={angle:0,distance:0,scale:1,startAngle:0,startDistance:0}},"auto-start:check":function(T){if(!(T.interaction.pointers.length<2)){var S=T.interactable.options.gesture;if(S&&S.enabled)return T.action={name:"gesture"},!1}}},defaults:{},getCursor:function(){return""},filterEventType:function(T){return T.search("gesture")===0}},Da=Eu;function Xp(T,S,E,P,R,j,W){if(!S)return!1;if(S===!0){var Y=B.number(j.width)?j.width:j.right-j.left,K=B.number(j.height)?j.height:j.bottom-j.top;if(W=Math.min(W,Math.abs((T==="left"||T==="right"?Y:K)/2)),Y<0&&(T==="left"?T="right":T==="right"&&(T="left")),K<0&&(T==="top"?T="bottom":T==="bottom"&&(T="top")),T==="left"){var fe=Y>=0?j.left:j.right;return E.x<fe+W}if(T==="top"){var ee=K>=0?j.top:j.bottom;return E.y<ee+W}if(T==="right")return E.x>(Y>=0?j.right:j.left)-W;if(T==="bottom")return E.y>(K>=0?j.bottom:j.top)-W}return!!B.element(P)&&(B.element(S)?S===P:Ke(P,S,R))}function wt(T){var S=T.iEvent,E=T.interaction;if(E.prepared.name==="resize"&&E.resizeAxes){var P=S;E.interactable.options.resize.square?(E.resizeAxes==="y"?P.delta.x=P.delta.y:P.delta.y=P.delta.x,P.axes="xy"):(P.axes=E.resizeAxes,E.resizeAxes==="x"?P.delta.y=0:E.resizeAxes==="y"&&(P.delta.x=0))}}var Zs,Dl,er={id:"actions/resize",before:["actions/drag"],install:function(T){var S=T.actions,E=T.browser,P=T.Interactable,R=T.defaults;er.cursors=(function(j){return j.isIe9?{x:"e-resize",y:"s-resize",xy:"se-resize",top:"n-resize",left:"w-resize",bottom:"s-resize",right:"e-resize",topleft:"se-resize",bottomright:"se-resize",topright:"ne-resize",bottomleft:"ne-resize"}:{x:"ew-resize",y:"ns-resize",xy:"nwse-resize",top:"ns-resize",left:"ew-resize",bottom:"ns-resize",right:"ew-resize",topleft:"nwse-resize",bottomright:"nwse-resize",topright:"nesw-resize",bottomleft:"nesw-resize"}})(E),er.defaultMargin=E.supportsTouch||E.supportsPointerEvent?20:10,P.prototype.resizable=function(j){return(function(W,Y,K){return B.object(Y)?(W.options.resize.enabled=Y.enabled!==!1,W.setPerAction("resize",Y),W.setOnEvents("resize",Y),B.string(Y.axis)&&/^x$|^y$|^xy$/.test(Y.axis)?W.options.resize.axis=Y.axis:Y.axis===null&&(W.options.resize.axis=K.defaults.actions.resize.axis),B.bool(Y.preserveAspectRatio)?W.options.resize.preserveAspectRatio=Y.preserveAspectRatio:B.bool(Y.square)&&(W.options.resize.square=Y.square),W):B.bool(Y)?(W.options.resize.enabled=Y,W):W.options.resize})(this,j,T)},S.map.resize=er,S.methodDict.resize="resizable",R.actions.resize=er.defaults},listeners:{"interactions:new":function(T){T.interaction.resizeAxes="xy"},"interactions:action-start":function(T){(function(S){var E=S.iEvent,P=S.interaction;if(P.prepared.name==="resize"&&P.prepared.edges){var R=E,j=P.rect;P._rects={start:it({},j),corrected:it({},j),previous:it({},j),delta:{left:0,right:0,width:0,top:0,bottom:0,height:0}},R.edges=P.prepared.edges,R.rect=P._rects.corrected,R.deltaRect=P._rects.delta}})(T),wt(T)},"interactions:action-move":function(T){(function(S){var E=S.iEvent,P=S.interaction;if(P.prepared.name==="resize"&&P.prepared.edges){var R=E,j=P.interactable.options.resize.invert,W=j==="reposition"||j==="negate",Y=P.rect,K=P._rects,fe=K.start,ee=K.corrected,we=K.delta,Fe=K.previous;if(it(Fe,ee),W){if(it(ee,Y),j==="reposition"){if(ee.top>ee.bottom){var Je=ee.top;ee.top=ee.bottom,ee.bottom=Je}if(ee.left>ee.right){var We=ee.left;ee.left=ee.right,ee.right=We}}}else ee.top=Math.min(Y.top,fe.bottom),ee.bottom=Math.max(Y.bottom,fe.top),ee.left=Math.min(Y.left,fe.right),ee.right=Math.max(Y.right,fe.left);for(var Qe in ee.width=ee.right-ee.left,ee.height=ee.bottom-ee.top,ee)we[Qe]=ee[Qe]-Fe[Qe];R.edges=P.prepared.edges,R.rect=ee,R.deltaRect=we}})(T),wt(T)},"interactions:action-end":function(T){var S=T.iEvent,E=T.interaction;if(E.prepared.name==="resize"&&E.prepared.edges){var P=S;P.edges=E.prepared.edges,P.rect=E._rects.corrected,P.deltaRect=E._rects.delta}},"auto-start:check":function(T){var S=T.interaction,E=T.interactable,P=T.element,R=T.rect,j=T.buttons;if(R){var W=it({},S.coords.cur.page),Y=E.options.resize;if(Y&&Y.enabled&&(!S.pointerIsDown||!/mouse|pointer/.test(S.pointerType)||(j&Y.mouseButtons)!=0)){if(B.object(Y.edges)){var K={left:!1,right:!1,top:!1,bottom:!1};for(var fe in K)K[fe]=Xp(fe,Y.edges[fe],W,S._latestPointer.eventTarget,P,R,Y.margin||er.defaultMargin);K.left=K.left&&!K.right,K.top=K.top&&!K.bottom,(K.left||K.right||K.top||K.bottom)&&(T.action={name:"resize",edges:K})}else{var ee=Y.axis!=="y"&&W.x>R.right-er.defaultMargin,we=Y.axis!=="x"&&W.y>R.bottom-er.defaultMargin;(ee||we)&&(T.action={name:"resize",axes:(ee?"x":"")+(we?"y":"")})}return!T.action&&void 0}}}},defaults:{square:!1,preserveAspectRatio:!1,axis:"xy",margin:NaN,edges:null,invert:"none"},cursors:null,getCursor:function(T){var S=T.edges,E=T.axis,P=T.name,R=er.cursors,j=null;if(E)j=R[P+E];else if(S){for(var W="",Y=0,K=["top","bottom","left","right"];Y<K.length;Y++){var fe=K[Y];S[fe]&&(W+=fe)}j=R[W]}return j},filterEventType:function(T){return T.search("resize")===0},defaultMargin:null},Xd=er,kc={id:"actions",install:function(T){T.usePlugin(Da),T.usePlugin(Xd),T.usePlugin(le),T.usePlugin(cr)}},vr=0,jr={request:function(T){return Zs(T)},cancel:function(T){return Dl(T)},init:function(T){if(Zs=T.requestAnimationFrame,Dl=T.cancelAnimationFrame,!Zs)for(var S=["ms","moz","webkit","o"],E=0;E<S.length;E++){var P=S[E];Zs=T["".concat(P,"RequestAnimationFrame")],Dl=T["".concat(P,"CancelAnimationFrame")]||T["".concat(P,"CancelRequestAnimationFrame")]}Zs=Zs&&Zs.bind(T),Dl=Dl&&Dl.bind(T),Zs||(Zs=function(R){var j=Date.now(),W=Math.max(0,16-(j-vr)),Y=T.setTimeout(function(){R(j+W)},W);return vr=j+W,Y},Dl=function(R){return clearTimeout(R)})}},At={defaults:{enabled:!1,margin:60,container:null,speed:300},now:Date.now,interaction:null,i:0,x:0,y:0,isScrolling:!1,prevTime:0,margin:0,speed:0,start:function(T){At.isScrolling=!0,jr.cancel(At.i),T.autoScroll=At,At.interaction=T,At.prevTime=At.now(),At.i=jr.request(At.scroll)},stop:function(){At.isScrolling=!1,At.interaction&&(At.interaction.autoScroll=null),jr.cancel(At.i)},scroll:function(){var T=At.interaction,S=T.interactable,E=T.element,P=T.prepared.name,R=S.options[P].autoScroll,j=Ut(R.container,S,E),W=At.now(),Y=(W-At.prevTime)/1e3,K=R.speed*Y;if(K>=1){var fe={x:At.x*K,y:At.y*K};if(fe.x||fe.y){var ee=R_(j);B.window(j)?j.scrollBy(fe.x,fe.y):j&&(j.scrollLeft+=fe.x,j.scrollTop+=fe.y);var we=R_(j),Fe={x:we.x-ee.x,y:we.y-ee.y};(Fe.x||Fe.y)&&S.fire({type:"autoscroll",target:E,interactable:S,delta:Fe,interaction:T,container:j})}At.prevTime=W}At.isScrolling&&(jr.cancel(At.i),At.i=jr.request(At.scroll))},check:function(T,S){var E;return(E=T.options[S].autoScroll)==null?void 0:E.enabled},onInteractionMove:function(T){var S=T.interaction,E=T.pointer;if(S.interacting()&&At.check(S.interactable,S.prepared.name))if(S.simulation)At.x=At.y=0;else{var P,R,j,W,Y=S.interactable,K=S.element,fe=S.prepared.name,ee=Y.options[fe].autoScroll,we=Ut(ee.container,Y,K);if(B.window(we))W=E.clientX<At.margin,P=E.clientY<At.margin,R=E.clientX>we.innerWidth-At.margin,j=E.clientY>we.innerHeight-At.margin;else{var Fe=kt(we);W=E.clientX<Fe.left+At.margin,P=E.clientY<Fe.top+At.margin,R=E.clientX>Fe.right-At.margin,j=E.clientY>Fe.bottom-At.margin}At.x=R?1:W?-1:0,At.y=j?1:P?-1:0,At.isScrolling||(At.margin=ee.margin,At.speed=ee.speed,At.start(S))}}};function Ut(T,S,E){return(B.string(T)?Wo(T,S,E):T)||L(E)}function R_(T){return B.window(T)&&(T=window.document.body),{x:T.scrollLeft,y:T.scrollTop}}var z_={id:"auto-scroll",install:function(T){var S=T.defaults,E=T.actions;T.autoScroll=At,At.now=function(){return T.now()},E.phaselessTypes.autoscroll=!0,S.perAction.autoScroll=At.defaults},listeners:{"interactions:new":function(T){T.interaction.autoScroll=null},"interactions:destroy":function(T){T.interaction.autoScroll=null,At.stop(),At.interaction&&(At.interaction=null)},"interactions:stop":At.stop,"interactions:action-move":function(T){return At.onInteractionMove(T)}}},N_=z_;function jl(T,S){var E=!1;return function(){return E||(k.console.warn(S),E=!0),T.apply(this,arguments)}}function ku(T,S){return T.name=S.name,T.axis=S.axis,T.edges=S.edges,T}function Qd(T){return B.bool(T)?(this.options.styleCursor=T,this):T===null?(delete this.options.styleCursor,this):this.options.styleCursor}function Ac(T){return B.func(T)?(this.options.actionChecker=T,this):T===null?(delete this.options.actionChecker,this):this.options.actionChecker}var Vr={id:"auto-start/interactableMethods",install:function(T){var S=T.Interactable;S.prototype.getAction=function(E,P,R,j){var W=(function(Y,K,fe,ee,we){var Fe=Y.getRect(ee),Je=K.buttons||{0:1,1:4,3:8,4:16}[K.button],We={action:null,interactable:Y,interaction:fe,element:ee,rect:Fe,buttons:Je};return we.fire("auto-start:check",We),We.action})(this,P,R,j,T);return this.options.actionChecker?this.options.actionChecker(E,P,W,this,j,R):W},S.prototype.ignoreFrom=jl(function(E){return this._backCompatOption("ignoreFrom",E)},"Interactable.ignoreFrom() has been deprecated. Use Interactble.draggable({ignoreFrom: newValue})."),S.prototype.allowFrom=jl(function(E){return this._backCompatOption("allowFrom",E)},"Interactable.allowFrom() has been deprecated. Use Interactble.draggable({allowFrom: newValue})."),S.prototype.actionChecker=Ac,S.prototype.styleCursor=Qd}};function Au(T,S,E,P,R){return S.testIgnoreAllow(S.options[T.name],E,P)&&S.options[T.name].enabled&&Yo(S,E,T,R)?T:null}function hn(T,S,E,P,R,j,W){for(var Y=0,K=P.length;Y<K;Y++){var fe=P[Y],ee=R[Y],we=fe.getAction(S,E,T,ee);if(we){var Fe=Au(we,fe,ee,j,W);if(Fe)return{action:Fe,interactable:fe,element:ee}}}return{action:null,interactable:null,element:null}}function Yv(T,S,E,P,R){var j=[],W=[],Y=P;function K(ee){j.push(ee),W.push(Y)}for(;B.element(Y);){j=[],W=[],R.interactables.forEachMatch(Y,K);var fe=hn(T,S,E,j,W,P,R);if(fe.action&&!fe.interactable.options[fe.action.name].manualStart)return fe;Y=He(Y)}return{action:null,interactable:null,element:null}}function Jv(T,S,E){var P=S.action,R=S.interactable,j=S.element;P=P||{name:null},T.interactable=R,T.element=j,ku(T.prepared,P),T.rect=R&&P.name?R.getRect(j):null,Ys(T,E),E.fire("autoStart:prepared",{interaction:T})}function Yo(T,S,E,P){var R=T.options,j=R[E.name].max,W=R[E.name].maxPerElement,Y=P.autoStart.maxInteractions,K=0,fe=0,ee=0;if(!(j&&W&&Y))return!1;for(var we=0,Fe=P.interactions.list;we<Fe.length;we++){var Je=Fe[we],We=Je.prepared.name;if(Je.interacting()&&(++K>=Y||Je.interactable===T&&((fe+=We===E.name?1:0)>=j||Je.element===S&&(ee++,We===E.name&&ee>=W))))return!1}return Y>0}function Pu(T,S){return B.number(T)?(S.autoStart.maxInteractions=T,this):S.autoStart.maxInteractions}function Xv(T,S,E){var P=E.autoStart.cursorElement;P&&P!==T&&(P.style.cursor=""),T.ownerDocument.documentElement.style.cursor=S,T.style.cursor=S,E.autoStart.cursorElement=S?T:null}function Ys(T,S){var E=T.interactable,P=T.element,R=T.prepared;if(T.pointerType==="mouse"&&E&&E.options.styleCursor){var j="";if(R.name){var W=E.options[R.name].cursorChecker;j=B.func(W)?W(R,E,P,T._interacting):S.actions.map[R.name].getCursor(R)}Xv(T.element,j||"",S)}else S.autoStart.cursorElement&&Xv(S.autoStart.cursorElement,"",S)}var D_={id:"auto-start/base",before:["actions"],install:function(T){var S=T.interactStatic,E=T.defaults;T.usePlugin(Vr),E.base.actionChecker=null,E.base.styleCursor=!0,it(E.perAction,{manualStart:!1,max:1/0,maxPerElement:1,allowFrom:null,ignoreFrom:null,mouseButtons:1}),S.maxInteractions=function(P){return Pu(P,T)},T.autoStart={maxInteractions:1/0,withinInteractionLimit:Yo,cursorElement:null}},listeners:{"interactions:down":function(T,S){var E=T.interaction,P=T.pointer,R=T.event,j=T.eventTarget;E.interacting()||Jv(E,Yv(E,P,R,j,S),S)},"interactions:move":function(T,S){(function(E,P){var R=E.interaction,j=E.pointer,W=E.event,Y=E.eventTarget;R.pointerType!=="mouse"||R.pointerIsDown||R.interacting()||Jv(R,Yv(R,j,W,Y,P),P)})(T,S),(function(E,P){var R=E.interaction;if(R.pointerIsDown&&!R.interacting()&&R.pointerWasMoved&&R.prepared.name){P.fire("autoStart:before-start",E);var j=R.interactable,W=R.prepared.name;W&&j&&(j.options[W].manualStart||!Yo(j,R.element,R.prepared,P)?R.stop():(R.start(R.prepared,j,R.element),Ys(R,P)))}})(T,S)},"interactions:stop":function(T,S){var E=T.interaction,P=E.interactable;P&&P.options.styleCursor&&Xv(E.element,"",S)}},maxInteractions:Pu,withinInteractionLimit:Yo,validateAction:Au},Qv=D_,Kd={id:"auto-start/dragAxis",listeners:{"autoStart:before-start":function(T,S){var E=T.interaction,P=T.eventTarget,R=T.dx,j=T.dy;if(E.prepared.name==="drag"){var W=Math.abs(R),Y=Math.abs(j),K=E.interactable.options.drag,fe=K.startAxis,ee=W>Y?"x":W<Y?"y":"xy";if(E.prepared.axis=K.lockAxis==="start"?ee[0]:K.lockAxis,ee!=="xy"&&fe!=="xy"&&fe!==ee){E.prepared.name=null;for(var we=P,Fe=function(We){if(We!==E.interactable){var Qe=E.interactable.options.drag;if(!Qe.manualStart&&We.testIgnoreAllow(Qe,we,P)){var yt=We.getAction(E.downPointer,E.downEvent,E,we);if(yt&&yt.name==="drag"&&(function(ht,Tt){if(!Tt)return!1;var ti=Tt.options.drag.startAxis;return ht==="xy"||ti==="xy"||ti===ht})(ee,We)&&Qv.validateAction(yt,We,we,P,S))return We}}};B.element(we);){var Je=S.interactables.forEachMatch(we,Fe);if(Je){E.prepared.name="drag",E.interactable=Je,E.element=we;break}we=He(we)}}}}}};function Ou(T){var S=T.prepared&&T.prepared.name;if(!S)return null;var E=T.interactable.options;return E[S].hold||E[S].delay}var te={id:"auto-start/hold",install:function(T){var S=T.defaults;T.usePlugin(Qv),S.perAction.hold=0,S.perAction.delay=0},listeners:{"interactions:new":function(T){T.interaction.autoStartHoldTimer=null},"autoStart:prepared":function(T){var S=T.interaction,E=Ou(S);E>0&&(S.autoStartHoldTimer=setTimeout(function(){S.start(S.prepared,S.interactable,S.element)},E))},"interactions:move":function(T){var S=T.interaction,E=T.duplicate;S.autoStartHoldTimer&&S.pointerWasMoved&&!E&&(clearTimeout(S.autoStartHoldTimer),S.autoStartHoldTimer=null)},"autoStart:before-start":function(T){var S=T.interaction;Ou(S)>0&&(S.prepared.name=null)}},getHoldDuration:Ou},Me=te,Ye={id:"auto-start",install:function(T){T.usePlugin(Qv),T.usePlugin(Me),T.usePlugin(Kd)}},Pt=function(T){return/^(always|never|auto)$/.test(T)?(this.options.preventDefault=T,this):B.bool(T)?(this.options.preventDefault=T?"always":"never",this):this.options.preventDefault};function Ai(T){var S=T.interaction,E=T.event;S.interactable&&S.interactable.checkAndPreventDefault(E)}var Ir={id:"core/interactablePreventDefault",install:function(T){var S=T.Interactable;S.prototype.preventDefault=Pt,S.prototype.checkAndPreventDefault=function(E){return(function(P,R,j){var W=P.options.preventDefault;if(W!=="never")if(W!=="always"){if(R.events.supportsPassive&&/^touch(start|move)$/.test(j.type)){var Y=L(j.target).document,K=R.getDocOptions(Y);if(!K||!K.events||K.events.passive!==!1)return}/^(mouse|pointer|touch)*(down|start)/i.test(j.type)||B.element(j.target)&&ft(j.target,"input,select,textarea,[contenteditable=true],[contenteditable=true] *")||j.preventDefault()}else j.preventDefault()})(this,T,E)},T.interactions.docEvents.push({type:"dragstart",listener:function(E){for(var P=0,R=T.interactions.list;P<R.length;P++){var j=R[P];if(j.element&&(j.element===E.target||_e(j.element,E.target)))return void j.interactable.checkAndPreventDefault(E)}}})},listeners:["down","move","up","cancel"].reduce(function(T,S){return T["interactions:".concat(S)]=Ai,T},{})};function br(T,S){if(S.phaselessTypes[T])return!0;for(var E in S.map)if(T.indexOf(E)===0&&T.substr(E.length)in S.phases)return!0;return!1}function Wr(T){var S={};for(var E in T){var P=T[E];B.plainObject(P)?S[E]=Wr(P):B.array(P)?S[E]=L_(P):S[E]=P}return S}var ja=(function(){function T(S){s(this,T),this.states=[],this.startOffset={left:0,right:0,top:0,bottom:0},this.startDelta=void 0,this.result=void 0,this.endResult=void 0,this.startEdges=void 0,this.edges=void 0,this.interaction=void 0,this.interaction=S,this.result=fg(),this.edges={left:!1,right:!1,top:!1,bottom:!1}}return o(T,[{key:"start",value:function(S,E){var P,R,j=S.phase,W=this.interaction,Y=(function(fe){var ee=fe.interactable.options[fe.prepared.name],we=ee.modifiers;return we&&we.length?we:["snap","snapSize","snapEdges","restrict","restrictEdges","restrictSize"].map(function(Fe){var Je=ee[Fe];return Je&&Je.enabled&&{options:Je,methods:Je._methods}}).filter(function(Fe){return!!Fe})})(W);this.prepareStates(Y),this.startEdges=it({},W.edges),this.edges=it({},this.startEdges),this.startOffset=(P=W.rect,R=E,P?{left:R.x-P.left,top:R.y-P.top,right:P.right-R.x,bottom:P.bottom-R.y}:{left:0,top:0,right:0,bottom:0}),this.startDelta={x:0,y:0};var K=this.fillArg({phase:j,pageCoords:E,preEnd:!1});return this.result=fg(),this.startAll(K),this.result=this.setAll(K)}},{key:"fillArg",value:function(S){var E=this.interaction;return S.interaction=E,S.interactable=E.interactable,S.element=E.element,S.rect||(S.rect=E.rect),S.edges||(S.edges=this.startEdges),S.startOffset=this.startOffset,S}},{key:"startAll",value:function(S){for(var E=0,P=this.states;E<P.length;E++){var R=P[E];R.methods.start&&(S.state=R,R.methods.start(S))}}},{key:"setAll",value:function(S){var E=S.phase,P=S.preEnd,R=S.skipModifiers,j=S.rect,W=S.edges;S.coords=it({},S.pageCoords),S.rect=it({},j),S.edges=it({},W);for(var Y=R?this.states.slice(R):this.states,K=fg(S.coords,S.rect),fe=0;fe<Y.length;fe++){var ee,we=Y[fe],Fe=we.options,Je=it({},S.coords),We=null;(ee=we.methods)!=null&&ee.set&&this.shouldDo(Fe,P,E)&&(S.state=we,We=we.methods.set(S),qs(S.edges,S.rect,{x:S.coords.x-Je.x,y:S.coords.y-Je.y})),K.eventProps.push(We)}it(this.edges,S.edges),K.delta.x=S.coords.x-S.pageCoords.x,K.delta.y=S.coords.y-S.pageCoords.y,K.rectDelta.left=S.rect.left-j.left,K.rectDelta.right=S.rect.right-j.right,K.rectDelta.top=S.rect.top-j.top,K.rectDelta.bottom=S.rect.bottom-j.bottom;var Qe=this.result.coords,yt=this.result.rect;if(Qe&&yt){var ht=K.rect.left!==yt.left||K.rect.right!==yt.right||K.rect.top!==yt.top||K.rect.bottom!==yt.bottom;K.changed=ht||Qe.x!==K.coords.x||Qe.y!==K.coords.y}return K}},{key:"applyToInteraction",value:function(S){var E=this.interaction,P=S.phase,R=E.coords.cur,j=E.coords.start,W=this.result,Y=this.startDelta,K=W.delta;P==="start"&&it(this.startDelta,W.delta);for(var fe=0,ee=[[j,Y],[R,K]];fe<ee.length;fe++){var we=ee[fe],Fe=we[0],Je=we[1];Fe.page.x+=Je.x,Fe.page.y+=Je.y,Fe.client.x+=Je.x,Fe.client.y+=Je.y}var We=this.result.rectDelta,Qe=S.rect||E.rect;Qe.left+=We.left,Qe.right+=We.right,Qe.top+=We.top,Qe.bottom+=We.bottom,Qe.width=Qe.right-Qe.left,Qe.height=Qe.bottom-Qe.top}},{key:"setAndApply",value:function(S){var E=this.interaction,P=S.phase,R=S.preEnd,j=S.skipModifiers,W=this.setAll(this.fillArg({preEnd:R,phase:P,pageCoords:S.modifiedCoords||E.coords.cur.page}));if(this.result=W,!W.changed&&(!j||j<this.states.length)&&E.interacting())return!1;if(S.modifiedCoords){var Y=E.coords.cur.page,K={x:S.modifiedCoords.x-Y.x,y:S.modifiedCoords.y-Y.y};W.coords.x+=K.x,W.coords.y+=K.y,W.delta.x+=K.x,W.delta.y+=K.y}this.applyToInteraction(S)}},{key:"beforeEnd",value:function(S){var E=S.interaction,P=S.event,R=this.states;if(R&&R.length){for(var j=!1,W=0;W<R.length;W++){var Y=R[W];S.state=Y;var K=Y.options,fe=Y.methods,ee=fe.beforeEnd&&fe.beforeEnd(S);if(ee)return this.endResult=ee,!1;j=j||!j&&this.shouldDo(K,!0,S.phase,!0)}j&&E.move({event:P,preEnd:!0})}}},{key:"stop",value:function(S){var E=S.interaction;if(this.states&&this.states.length){var P=it({states:this.states,interactable:E.interactable,element:E.element,rect:null},S);this.fillArg(P);for(var R=0,j=this.states;R<j.length;R++){var W=j[R];P.state=W,W.methods.stop&&W.methods.stop(P)}this.states=null,this.endResult=null}}},{key:"prepareStates",value:function(S){this.states=[];for(var E=0;E<S.length;E++){var P=S[E],R=P.options,j=P.methods,W=P.name;this.states.push({options:R,methods:j,index:E,name:W})}return this.states}},{key:"restoreInteractionCoords",value:function(S){var E=S.interaction,P=E.coords,R=E.rect,j=E.modification;if(j.result){for(var W=j.startDelta,Y=j.result,K=Y.delta,fe=Y.rectDelta,ee=0,we=[[P.start,W],[P.cur,K]];ee<we.length;ee++){var Fe=we[ee],Je=Fe[0],We=Fe[1];Je.page.x-=We.x,Je.page.y-=We.y,Je.client.x-=We.x,Je.client.y-=We.y}R.left-=fe.left,R.right-=fe.right,R.top-=fe.top,R.bottom-=fe.bottom}}},{key:"shouldDo",value:function(S,E,P,R){return!(!S||S.enabled===!1||R&&!S.endOnly||S.endOnly&&!E||P==="start"&&!S.setStart)}},{key:"copyFrom",value:function(S){this.startOffset=S.startOffset,this.startDelta=S.startDelta,this.startEdges=S.startEdges,this.edges=S.edges,this.states=S.states.map(function(E){return Wr(E)}),this.result=fg(it({},S.result.coords),it({},S.result.rect))}},{key:"destroy",value:function(){for(var S in this)this[S]=null}}]),T})();function fg(T,S){return{rect:S,coords:T,delta:{x:0,y:0},rectDelta:{left:0,right:0,top:0,bottom:0},eventProps:[],changed:!0}}function Lu(T,S){var E=T.defaults,P={start:T.start,set:T.set,beforeEnd:T.beforeEnd,stop:T.stop},R=function(j){var W=j||{};for(var Y in W.enabled=W.enabled!==!1,E)Y in W||(W[Y]=E[Y]);var K={options:W,methods:P,name:S,enable:function(){return W.enabled=!0,K},disable:function(){return W.enabled=!1,K}};return K};return S&&typeof S=="string"&&(R._defaults=E,R._methods=P),R}function Qp(T){var S=T.iEvent,E=T.interaction.modification.result;E&&(S.modifiers=E.eventProps)}var mg={id:"modifiers/base",before:["actions"],install:function(T){T.defaults.perAction.modifiers=[]},listeners:{"interactions:new":function(T){var S=T.interaction;S.modification=new ja(S)},"interactions:before-action-start":function(T){var S=T.interaction,E=T.interaction.modification;E.start(T,S.coords.start.page),S.edges=E.edges,E.applyToInteraction(T)},"interactions:before-action-move":function(T){var S=T.interaction,E=S.modification,P=E.setAndApply(T);return S.edges=E.edges,P},"interactions:before-action-end":function(T){var S=T.interaction,E=S.modification,P=E.beforeEnd(T);return S.edges=E.startEdges,P},"interactions:action-start":Qp,"interactions:action-move":Qp,"interactions:action-end":Qp,"interactions:after-action-start":function(T){return T.interaction.modification.restoreInteractionCoords(T)},"interactions:after-action-move":function(T){return T.interaction.modification.restoreInteractionCoords(T)},"interactions:stop":function(T){return T.interaction.modification.stop(T)}}},cI=mg,uI={base:{preventDefault:"auto",deltaSource:"page"},perAction:{enabled:!1,origin:{x:0,y:0}},actions:{}},eh=(function(T){c(E,T);var S=v(E);function E(P,R,j,W,Y,K,fe){var ee;s(this,E),(ee=S.call(this,P)).relatedTarget=null,ee.screenX=void 0,ee.screenY=void 0,ee.button=void 0,ee.buttons=void 0,ee.ctrlKey=void 0,ee.shiftKey=void 0,ee.altKey=void 0,ee.metaKey=void 0,ee.page=void 0,ee.client=void 0,ee.delta=void 0,ee.rect=void 0,ee.x0=void 0,ee.y0=void 0,ee.t0=void 0,ee.dt=void 0,ee.duration=void 0,ee.clientX0=void 0,ee.clientY0=void 0,ee.velocity=void 0,ee.speed=void 0,ee.swipe=void 0,ee.axes=void 0,ee.preEnd=void 0,Y=Y||P.element;var we=P.interactable,Fe=(we&&we.options||uI).deltaSource,Je=ha(we,Y,j),We=W==="start",Qe=W==="end",yt=We?g(ee):P.prevEvent,ht=We?P.coords.start:Qe?{page:yt.page,client:yt.client,timeStamp:P.coords.cur.timeStamp}:P.coords.cur;return ee.page=it({},ht.page),ee.client=it({},ht.client),ee.rect=it({},P.rect),ee.timeStamp=ht.timeStamp,Qe||(ee.page.x-=Je.x,ee.page.y-=Je.y,ee.client.x-=Je.x,ee.client.y-=Je.y),ee.ctrlKey=R.ctrlKey,ee.altKey=R.altKey,ee.shiftKey=R.shiftKey,ee.metaKey=R.metaKey,ee.button=R.button,ee.buttons=R.buttons,ee.target=Y,ee.currentTarget=Y,ee.preEnd=K,ee.type=fe||j+(W||""),ee.interactable=we,ee.t0=We?P.pointers[P.pointers.length-1].downTime:yt.t0,ee.x0=P.coords.start.page.x-Je.x,ee.y0=P.coords.start.page.y-Je.y,ee.clientX0=P.coords.start.client.x-Je.x,ee.clientY0=P.coords.start.client.y-Je.y,ee.delta=We||Qe?{x:0,y:0}:{x:ee[Fe].x-yt[Fe].x,y:ee[Fe].y-yt[Fe].y},ee.dt=P.coords.delta.timeStamp,ee.duration=ee.timeStamp-ee.t0,ee.velocity=it({},P.coords.velocity[Fe]),ee.speed=Hd(ee.velocity.x,ee.velocity.y),ee.swipe=Qe||W==="inertiastart"?ee.getSwipe():null,ee}return o(E,[{key:"getSwipe",value:function(){var P=this._interaction;if(P.prevEvent.speed<600||this.timeStamp-P.prevEvent.timeStamp>150)return null;var R=180*Math.atan2(P.prevEvent.velocityY,P.prevEvent.velocityX)/Math.PI;R<0&&(R+=360);var j=112.5<=R&&R<247.5,W=202.5<=R&&R<337.5;return{up:W,down:!W&&22.5<=R&&R<157.5,left:j,right:!j&&(292.5<=R||R<67.5),angle:R,speed:P.prevEvent.speed,velocity:{x:P.prevEvent.velocityX,y:P.prevEvent.velocityY}}}},{key:"preventDefault",value:function(){}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}}]),E})(po);Object.defineProperties(eh.prototype,{pageX:{get:function(){return this.page.x},set:function(T){this.page.x=T}},pageY:{get:function(){return this.page.y},set:function(T){this.page.y=T}},clientX:{get:function(){return this.client.x},set:function(T){this.client.x=T}},clientY:{get:function(){return this.client.y},set:function(T){this.client.y=T}},dx:{get:function(){return this.delta.x},set:function(T){this.delta.x=T}},dy:{get:function(){return this.delta.y},set:function(T){this.delta.y=T}},velocityX:{get:function(){return this.velocity.x},set:function(T){this.velocity.x=T}},velocityY:{get:function(){return this.velocity.y},set:function(T){this.velocity.y=T}}});var nj=o(function T(S,E,P,R,j){s(this,T),this.id=void 0,this.pointer=void 0,this.event=void 0,this.downTime=void 0,this.downTarget=void 0,this.id=S,this.pointer=E,this.event=P,this.downTime=R,this.downTarget=j}),hA=(function(T){return T.interactable="",T.element="",T.prepared="",T.pointerIsDown="",T.pointerWasMoved="",T._proxy="",T})({}),dI=(function(T){return T.start="",T.move="",T.end="",T.stop="",T.interacting="",T})({}),hI=0,sj=(function(){function T(S){var E=this,P=S.pointerType,R=S.scopeFire;s(this,T),this.interactable=null,this.element=null,this.rect=null,this._rects=void 0,this.edges=null,this._scopeFire=void 0,this.prepared={name:null,axis:null,edges:null},this.pointerType=void 0,this.pointers=[],this.downEvent=null,this.downPointer={},this._latestPointer={pointer:null,event:null,eventTarget:null},this.prevEvent=null,this.pointerIsDown=!1,this.pointerWasMoved=!1,this._interacting=!1,this._ending=!1,this._stopped=!0,this._proxy=void 0,this.simulation=null,this.doMove=jl(function(ee){this.move(ee)},"The interaction.doMove() method has been renamed to interaction.move()"),this.coords={start:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},prev:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},cur:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},delta:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},velocity:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0}},this._id=hI++,this._scopeFire=R,this.pointerType=P;var j=this;this._proxy={};var W=function(ee){Object.defineProperty(E._proxy,ee,{get:function(){return j[ee]}})};for(var Y in hA)W(Y);var K=function(ee){Object.defineProperty(E._proxy,ee,{value:function(){return j[ee].apply(j,arguments)}})};for(var fe in dI)K(fe);this._scopeFire("interactions:new",{interaction:this})}return o(T,[{key:"pointerMoveTolerance",get:function(){return 1}},{key:"pointerDown",value:function(S,E,P){var R=this.updatePointer(S,E,P,!0),j=this.pointers[R];this._scopeFire("interactions:down",{pointer:S,event:E,eventTarget:P,pointerIndex:R,pointerInfo:j,type:"down",interaction:this})}},{key:"start",value:function(S,E,P){return!(this.interacting()||!this.pointerIsDown||this.pointers.length<(S.name==="gesture"?2:1)||!E.options[S.name].enabled)&&(ku(this.prepared,S),this.interactable=E,this.element=P,this.rect=E.getRect(P),this.edges=this.prepared.edges?it({},this.prepared.edges):{left:!0,right:!0,top:!0,bottom:!0},this._stopped=!1,this._interacting=this._doPhase({interaction:this,event:this.downEvent,phase:"start"})&&!this._stopped,this._interacting)}},{key:"pointerMove",value:function(S,E,P){this.simulation||this.modification&&this.modification.endResult||this.updatePointer(S,E,P,!1);var R,j,W=this.coords.cur.page.x===this.coords.prev.page.x&&this.coords.cur.page.y===this.coords.prev.page.y&&this.coords.cur.client.x===this.coords.prev.client.x&&this.coords.cur.client.y===this.coords.prev.client.y;this.pointerIsDown&&!this.pointerWasMoved&&(R=this.coords.cur.client.x-this.coords.start.client.x,j=this.coords.cur.client.y-this.coords.start.client.y,this.pointerWasMoved=Hd(R,j)>this.pointerMoveTolerance);var Y,K,fe,ee=this.getPointerIndex(S),we={pointer:S,pointerIndex:ee,pointerInfo:this.pointers[ee],event:E,type:"move",eventTarget:P,dx:R,dy:j,duplicate:W,interaction:this};W||(Y=this.coords.velocity,K=this.coords.delta,fe=Math.max(K.timeStamp/1e3,.001),Y.page.x=K.page.x/fe,Y.page.y=K.page.y/fe,Y.client.x=K.client.x/fe,Y.client.y=K.client.y/fe,Y.timeStamp=fe),this._scopeFire("interactions:move",we),W||this.simulation||(this.interacting()&&(we.type=null,this.move(we)),this.pointerWasMoved&&pa(this.coords.prev,this.coords.cur))}},{key:"move",value:function(S){S&&S.event||k_(this.coords.delta),(S=it({pointer:this._latestPointer.pointer,event:this._latestPointer.event,eventTarget:this._latestPointer.eventTarget,interaction:this},S||{})).phase="move",this._doPhase(S)}},{key:"pointerUp",value:function(S,E,P,R){var j=this.getPointerIndex(S);j===-1&&(j=this.updatePointer(S,E,P,!1));var W=/cancel$/i.test(E.type)?"cancel":"up";this._scopeFire("interactions:".concat(W),{pointer:S,pointerIndex:j,pointerInfo:this.pointers[j],event:E,eventTarget:P,type:W,curEventTarget:R,interaction:this}),this.simulation||this.end(E),this.removePointer(S,E)}},{key:"documentBlur",value:function(S){this.end(S),this._scopeFire("interactions:blur",{event:S,type:"blur",interaction:this})}},{key:"end",value:function(S){var E;this._ending=!0,S=S||this._latestPointer.event,this.interacting()&&(E=this._doPhase({event:S,interaction:this,phase:"end"})),this._ending=!1,E===!0&&this.stop()}},{key:"currentAction",value:function(){return this._interacting?this.prepared.name:null}},{key:"interacting",value:function(){return this._interacting}},{key:"stop",value:function(){this._scopeFire("interactions:stop",{interaction:this}),this.interactable=this.element=null,this._interacting=!1,this._stopped=!0,this.prepared.name=this.prevEvent=null}},{key:"getPointerIndex",value:function(S){var E=Gd(S);return this.pointerType==="mouse"||this.pointerType==="pen"?this.pointers.length-1:Zp(this.pointers,function(P){return P.id===E})}},{key:"getPointerInfo",value:function(S){return this.pointers[this.getPointerIndex(S)]}},{key:"updatePointer",value:function(S,E,P,R){var j,W,Y,K=Gd(S),fe=this.getPointerIndex(S),ee=this.pointers[fe];return R=R!==!1&&(R||/(down|start)$/i.test(E.type)),ee?ee.pointer=S:(ee=new nj(K,S,E,null,null),fe=this.pointers.length,this.pointers.push(ee)),O_(this.coords.cur,this.pointers.map(function(we){return we.pointer}),this._now()),j=this.coords.delta,W=this.coords.prev,Y=this.coords.cur,j.page.x=Y.page.x-W.page.x,j.page.y=Y.page.y-W.page.y,j.client.x=Y.client.x-W.client.x,j.client.y=Y.client.y-W.client.y,j.timeStamp=Y.timeStamp-W.timeStamp,R&&(this.pointerIsDown=!0,ee.downTime=this.coords.cur.timeStamp,ee.downTarget=P,Mu(this.downPointer,S),this.interacting()||(pa(this.coords.start,this.coords.cur),pa(this.coords.prev,this.coords.cur),this.downEvent=E,this.pointerWasMoved=!1)),this._updateLatestPointer(S,E,P),this._scopeFire("interactions:update-pointer",{pointer:S,event:E,eventTarget:P,down:R,pointerInfo:ee,pointerIndex:fe,interaction:this}),fe}},{key:"removePointer",value:function(S,E){var P=this.getPointerIndex(S);if(P!==-1){var R=this.pointers[P];this._scopeFire("interactions:remove-pointer",{pointer:S,event:E,eventTarget:null,pointerIndex:P,pointerInfo:R,interaction:this}),this.pointers.splice(P,1),this.pointerIsDown=!1}}},{key:"_updateLatestPointer",value:function(S,E,P){this._latestPointer.pointer=S,this._latestPointer.event=E,this._latestPointer.eventTarget=P}},{key:"destroy",value:function(){this._latestPointer.pointer=null,this._latestPointer.event=null,this._latestPointer.eventTarget=null}},{key:"_createPreparedEvent",value:function(S,E,P,R){return new eh(this,S,this.prepared.name,E,this.element,P,R)}},{key:"_fireEvent",value:function(S){var E;(E=this.interactable)==null||E.fire(S),(!this.prevEvent||S.timeStamp>=this.prevEvent.timeStamp)&&(this.prevEvent=S)}},{key:"_doPhase",value:function(S){var E=S.event,P=S.phase,R=S.preEnd,j=S.type,W=this.rect;if(W&&P==="move"&&(qs(this.edges,W,this.coords.delta[this.interactable.options.deltaSource]),W.width=W.right-W.left,W.height=W.bottom-W.top),this._scopeFire("interactions:before-action-".concat(P),S)===!1)return!1;var Y=S.iEvent=this._createPreparedEvent(E,P,R,j);return this._scopeFire("interactions:action-".concat(P),S),P==="start"&&(this.prevEvent=Y),this._fireEvent(Y),this._scopeFire("interactions:after-action-".concat(P),S),!0}},{key:"_now",value:function(){return Date.now()}}]),T})();function pA(T){Kv(T.interaction)}function Kv(T){if(!(function(E){return!(!E.offset.pending.x&&!E.offset.pending.y)})(T))return!1;var S=T.offset.pending;return eb(T.coords.cur,S),eb(T.coords.delta,S),qs(T.edges,T.rect,S),S.x=0,S.y=0,!0}function Fu(T){var S=T.x,E=T.y;this.offset.pending.x+=S,this.offset.pending.y+=E,this.offset.total.x+=S,this.offset.total.y+=E}function eb(T,S){var E=T.page,P=T.client,R=S.x,j=S.y;E.x+=R,E.y+=j,P.x+=R,P.y+=j}dI.offsetBy="";var pI={id:"offset",before:["modifiers","pointer-events","actions","inertia"],install:function(T){T.Interaction.prototype.offsetBy=Fu},listeners:{"interactions:new":function(T){T.interaction.offset={total:{x:0,y:0},pending:{x:0,y:0}}},"interactions:update-pointer":function(T){return(function(S){S.pointerIsDown&&(eb(S.coords.cur,S.offset.total),S.offset.pending.x=0,S.offset.pending.y=0)})(T.interaction)},"interactions:before-action-start":pA,"interactions:before-action-move":pA,"interactions:before-action-end":function(T){var S=T.interaction;if(Kv(S))return S.move({offset:!0}),S.end(),!1},"interactions:stop":function(T){var S=T.interaction;S.offset.total.x=0,S.offset.total.y=0,S.offset.pending.x=0,S.offset.pending.y=0}}},Kp=pI,gg=(function(){function T(S){s(this,T),this.active=!1,this.isModified=!1,this.smoothEnd=!1,this.allowResume=!1,this.modification=void 0,this.modifierCount=0,this.modifierArg=void 0,this.startCoords=void 0,this.t0=0,this.v0=0,this.te=0,this.targetOffset=void 0,this.modifiedOffset=void 0,this.currentOffset=void 0,this.lambda_v0=0,this.one_ve_v0=0,this.timeout=void 0,this.interaction=void 0,this.interaction=S}return o(T,[{key:"start",value:function(S){var E=this.interaction,P=tb(E);if(!P||!P.enabled)return!1;var R=E.coords.velocity.client,j=Hd(R.x,R.y),W=this.modification||(this.modification=new ja(E));if(W.copyFrom(E.modification),this.t0=E._now(),this.allowResume=P.allowResume,this.v0=j,this.currentOffset={x:0,y:0},this.startCoords=E.coords.cur.page,this.modifierArg=W.fillArg({pageCoords:this.startCoords,preEnd:!0,phase:"inertiastart"}),this.t0-E.coords.cur.timeStamp<50&&j>P.minSpeed&&j>P.endSpeed)this.startInertia();else{if(W.result=W.setAll(this.modifierArg),!W.result.changed)return!1;this.startSmoothEnd()}return E.modification.result.rect=null,E.offsetBy(this.targetOffset),E._doPhase({interaction:E,event:S,phase:"inertiastart"}),E.offsetBy({x:-this.targetOffset.x,y:-this.targetOffset.y}),E.modification.result.rect=null,this.active=!0,E.simulation=this,!0}},{key:"startInertia",value:function(){var S=this,E=this.interaction.coords.velocity.client,P=tb(this.interaction),R=P.resistance,j=-Math.log(P.endSpeed/this.v0)/R;this.targetOffset={x:(E.x-j)/R,y:(E.y-j)/R},this.te=j,this.lambda_v0=R/this.v0,this.one_ve_v0=1-P.endSpeed/this.v0;var W=this.modification,Y=this.modifierArg;Y.pageCoords={x:this.startCoords.x+this.targetOffset.x,y:this.startCoords.y+this.targetOffset.y},W.result=W.setAll(Y),W.result.changed&&(this.isModified=!0,this.modifiedOffset={x:this.targetOffset.x+W.result.delta.x,y:this.targetOffset.y+W.result.delta.y}),this.onNextFrame(function(){return S.inertiaTick()})}},{key:"startSmoothEnd",value:function(){var S=this;this.smoothEnd=!0,this.isModified=!0,this.targetOffset={x:this.modification.result.delta.x,y:this.modification.result.delta.y},this.onNextFrame(function(){return S.smoothEndTick()})}},{key:"onNextFrame",value:function(S){var E=this;this.timeout=jr.request(function(){E.active&&S()})}},{key:"inertiaTick",value:function(){var S,E,P,R,j,W,Y,K=this,fe=this.interaction,ee=tb(fe).resistance,we=(fe._now()-this.t0)/1e3;if(we<this.te){var Fe,Je=1-(Math.exp(-ee*we)-this.lambda_v0)/this.one_ve_v0;this.isModified?(S=0,E=0,P=this.targetOffset.x,R=this.targetOffset.y,j=this.modifiedOffset.x,W=this.modifiedOffset.y,Fe={x:mI(Y=Je,S,P,j),y:mI(Y,E,R,W)}):Fe={x:this.targetOffset.x*Je,y:this.targetOffset.y*Je};var We={x:Fe.x-this.currentOffset.x,y:Fe.y-this.currentOffset.y};this.currentOffset.x+=We.x,this.currentOffset.y+=We.y,fe.offsetBy(We),fe.move(),this.onNextFrame(function(){return K.inertiaTick()})}else fe.offsetBy({x:this.modifiedOffset.x-this.currentOffset.x,y:this.modifiedOffset.y-this.currentOffset.y}),this.end()}},{key:"smoothEndTick",value:function(){var S=this,E=this.interaction,P=E._now()-this.t0,R=tb(E).smoothEndDuration;if(P<R){var j={x:yg(P,0,this.targetOffset.x,R),y:yg(P,0,this.targetOffset.y,R)},W={x:j.x-this.currentOffset.x,y:j.y-this.currentOffset.y};this.currentOffset.x+=W.x,this.currentOffset.y+=W.y,E.offsetBy(W),E.move({skipModifiers:this.modifierCount}),this.onNextFrame(function(){return S.smoothEndTick()})}else E.offsetBy({x:this.targetOffset.x-this.currentOffset.x,y:this.targetOffset.y-this.currentOffset.y}),this.end()}},{key:"resume",value:function(S){var E=S.pointer,P=S.event,R=S.eventTarget,j=this.interaction;j.offsetBy({x:-this.currentOffset.x,y:-this.currentOffset.y}),j.updatePointer(E,P,R,!0),j._doPhase({interaction:j,event:P,phase:"resume"}),pa(j.coords.prev,j.coords.cur),this.stop()}},{key:"end",value:function(){this.interaction.move(),this.interaction.end(),this.stop()}},{key:"stop",value:function(){this.active=this.smoothEnd=!1,this.interaction.simulation=null,jr.cancel(this.timeout)}}]),T})();function tb(T){var S=T.interactable,E=T.prepared;return S&&S.options&&E.name&&S.options[E.name].inertia}var fI={id:"inertia",before:["modifiers","actions"],install:function(T){var S=T.defaults;T.usePlugin(Kp),T.usePlugin(cI),T.actions.phases.inertiastart=!0,T.actions.phases.resume=!0,S.perAction.inertia={enabled:!1,resistance:10,minSpeed:100,endSpeed:10,allowResume:!0,smoothEndDuration:300}},listeners:{"interactions:new":function(T){var S=T.interaction;S.inertia=new gg(S)},"interactions:before-action-end":function(T){var S=T.interaction,E=T.event;return(!S._interacting||S.simulation||!S.inertia.start(E))&&null},"interactions:down":function(T){var S=T.interaction,E=T.eventTarget,P=S.inertia;if(P.active)for(var R=E;B.element(R);){if(R===S.element){P.resume(T);break}R=He(R)}},"interactions:stop":function(T){var S=T.interaction.inertia;S.active&&S.stop()},"interactions:before-action-resume":function(T){var S=T.interaction.modification;S.stop(T),S.start(T,T.interaction.coords.cur.page),S.applyToInteraction(T)},"interactions:before-action-inertiastart":function(T){return T.interaction.modification.setAndApply(T)},"interactions:action-resume":Qp,"interactions:action-inertiastart":Qp,"interactions:after-action-inertiastart":function(T){return T.interaction.modification.restoreInteractionCoords(T)},"interactions:after-action-resume":function(T){return T.interaction.modification.restoreInteractionCoords(T)}}};function mI(T,S,E,P){var R=1-T;return R*R*S+2*R*T*E+T*T*P}function yg(T,S,E,P){return-E*(T/=P)*(T-2)+S}var Ru=fI;function j_(T,S){for(var E=0;E<S.length;E++){var P=S[E];if(T.immediatePropagationStopped)break;P(T)}}var vg=(function(){function T(S){s(this,T),this.options=void 0,this.types={},this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.global=void 0,this.options=it({},S||{})}return o(T,[{key:"fire",value:function(S){var E,P=this.global;(E=this.types[S.type])&&j_(S,E),!S.propagationStopped&&P&&(E=P[S.type])&&j_(S,E)}},{key:"on",value:function(S,E){var P=Hs(S,E);for(S in P)this.types[S]=Ws(this.types[S]||[],P[S])}},{key:"off",value:function(S,E){var P=Hs(S,E);for(S in P){var R=this.types[S];if(R&&R.length)for(var j=0,W=P[S];j<W.length;j++){var Y=W[j],K=R.indexOf(Y);K!==-1&&R.splice(K,1)}}}},{key:"getRect",value:function(S){return null}}]),T})(),th=(function(){function T(S){s(this,T),this.currentTarget=void 0,this.originalEvent=void 0,this.type=void 0,this.originalEvent=S,Mu(this,S)}return o(T,[{key:"preventOriginalDefault",value:function(){this.originalEvent.preventDefault()}},{key:"stopPropagation",value:function(){this.originalEvent.stopPropagation()}},{key:"stopImmediatePropagation",value:function(){this.originalEvent.stopImmediatePropagation()}}]),T})();function ef(T){return B.object(T)?{capture:!!T.capture,passive:!!T.passive}:{capture:!!T,passive:!1}}function tf(T,S){return T===S||(typeof T=="boolean"?!!S.capture===T&&!S.passive:!!T.capture==!!S.capture&&!!T.passive==!!S.passive)}var fA={id:"events",install:function(T){var S,E=[],P={},R=[],j={add:W,remove:Y,addDelegate:function(ee,we,Fe,Je,We){var Qe=ef(We);if(!P[Fe]){P[Fe]=[];for(var yt=0;yt<R.length;yt++){var ht=R[yt];W(ht,Fe,K),W(ht,Fe,fe,!0)}}var Tt=P[Fe],ti=Yp(Tt,function(di){return di.selector===ee&&di.context===we});ti||(ti={selector:ee,context:we,listeners:[]},Tt.push(ti)),ti.listeners.push({func:Je,options:Qe})},removeDelegate:function(ee,we,Fe,Je,We){var Qe,yt=ef(We),ht=P[Fe],Tt=!1;if(ht)for(Qe=ht.length-1;Qe>=0;Qe--){var ti=ht[Qe];if(ti.selector===ee&&ti.context===we){for(var di=ti.listeners,Vt=di.length-1;Vt>=0;Vt--){var ri=di[Vt];if(ri.func===Je&&tf(ri.options,yt)){di.splice(Vt,1),di.length||(ht.splice(Qe,1),Y(we,Fe,K),Y(we,Fe,fe,!0)),Tt=!0;break}}if(Tt)break}}},delegateListener:K,delegateUseCapture:fe,delegatedEvents:P,documents:R,targets:E,supportsOptions:!1,supportsPassive:!1};function W(ee,we,Fe,Je){if(ee.addEventListener){var We=ef(Je),Qe=Yp(E,function(yt){return yt.eventTarget===ee});Qe||(Qe={eventTarget:ee,events:{}},E.push(Qe)),Qe.events[we]||(Qe.events[we]=[]),Yp(Qe.events[we],function(yt){return yt.func===Fe&&tf(yt.options,We)})||(ee.addEventListener(we,Fe,j.supportsOptions?We:We.capture),Qe.events[we].push({func:Fe,options:We}))}}function Y(ee,we,Fe,Je){if(ee.addEventListener&&ee.removeEventListener){var We=Zp(E,function(pn){return pn.eventTarget===ee}),Qe=E[We];if(Qe&&Qe.events)if(we!=="all"){var yt=!1,ht=Qe.events[we];if(ht){if(Fe==="all"){for(var Tt=ht.length-1;Tt>=0;Tt--){var ti=ht[Tt];Y(ee,we,ti.func,ti.options)}return}for(var di=ef(Je),Vt=0;Vt<ht.length;Vt++){var ri=ht[Vt];if(ri.func===Fe&&tf(ri.options,di)){ee.removeEventListener(we,Fe,j.supportsOptions?di:di.capture),ht.splice(Vt,1),ht.length===0&&(delete Qe.events[we],yt=!0);break}}}yt&&!Object.keys(Qe.events).length&&E.splice(We,1)}else for(we in Qe.events)Qe.events.hasOwnProperty(we)&&Y(ee,we,"all")}}function K(ee,we){for(var Fe=ef(we),Je=new th(ee),We=P[ee.type],Qe=Gs(ee)[0],yt=Qe;B.element(yt);){for(var ht=0;ht<We.length;ht++){var Tt=We[ht],ti=Tt.selector,di=Tt.context;if(ft(yt,ti)&&_e(di,Qe)&&_e(di,yt)){var Vt=Tt.listeners;Je.currentTarget=yt;for(var ri=0;ri<Vt.length;ri++){var pn=Vt[ri];tf(pn.options,Fe)&&pn.func(Je)}}}yt=He(yt)}}function fe(ee){return K(ee,!0)}return(S=T.document)==null||S.createElement("div").addEventListener("test",null,{get capture(){return j.supportsOptions=!0},get passive(){return j.supportsPassive=!0}}),T.events=j,j}},bg={methodOrder:["simulationResume","mouseOrPen","hasPointer","idle"],search:function(T){for(var S=0,E=bg.methodOrder;S<E.length;S++){var P=E[S],R=bg[P](T);if(R)return R}return null},simulationResume:function(T){var S=T.pointerType,E=T.eventType,P=T.eventTarget,R=T.scope;if(!/down|start/i.test(E))return null;for(var j=0,W=R.interactions.list;j<W.length;j++){var Y=W[j],K=P;if(Y.simulation&&Y.simulation.allowResume&&Y.pointerType===S)for(;K;){if(K===Y.element)return Y;K=He(K)}}return null},mouseOrPen:function(T){var S,E=T.pointerId,P=T.pointerType,R=T.eventType,j=T.scope;if(P!=="mouse"&&P!=="pen")return null;for(var W=0,Y=j.interactions.list;W<Y.length;W++){var K=Y[W];if(K.pointerType===P){if(K.simulation&&!ib(K,E))continue;if(K.interacting())return K;S||(S=K)}}if(S)return S;for(var fe=0,ee=j.interactions.list;fe<ee.length;fe++){var we=ee[fe];if(!(we.pointerType!==P||/down/i.test(R)&&we.simulation))return we}return null},hasPointer:function(T){for(var S=T.pointerId,E=0,P=T.scope.interactions.list;E<P.length;E++){var R=P[E];if(ib(R,S))return R}return null},idle:function(T){for(var S=T.pointerType,E=0,P=T.scope.interactions.list;E<P.length;E++){var R=P[E];if(R.pointers.length===1){var j=R.interactable;if(j&&(!j.options.gesture||!j.options.gesture.enabled))continue}else if(R.pointers.length>=2)continue;if(!R.interacting()&&S===R.pointerType)return R}return null}};function ib(T,S){return T.pointers.some(function(E){return E.id===S})}var mA=bg,Js=["pointerDown","pointerMove","pointerUp","updatePointer","removePointer","windowBlur"];function ih(T,S){return function(E){var P=S.interactions.list,R=Zd(E),j=Gs(E),W=j[0],Y=j[1],K=[];if(/^touch/.test(E.type)){S.prevTouchTime=S.now();for(var fe=0,ee=E.changedTouches;fe<ee.length;fe++){var we=ee[fe],Fe={pointer:we,pointerId:Gd(we),pointerType:R,eventType:E.type,eventTarget:W,curEventTarget:Y,scope:S},Je=rb(Fe);K.push([Fe.pointer,Fe.eventTarget,Fe.curEventTarget,Je])}}else{var We=!1;if(!ne.supportsPointerEvent&&/mouse/.test(E.type)){for(var Qe=0;Qe<P.length&&!We;Qe++)We=P[Qe].pointerType!=="mouse"&&P[Qe].pointerIsDown;We=We||S.now()-S.prevTouchTime<500||E.timeStamp===0}if(!We){var yt={pointer:E,pointerId:Gd(E),pointerType:R,eventType:E.type,curEventTarget:Y,eventTarget:W,scope:S},ht=rb(yt);K.push([yt.pointer,yt.eventTarget,yt.curEventTarget,ht])}}for(var Tt=0;Tt<K.length;Tt++){var ti=K[Tt],di=ti[0],Vt=ti[1],ri=ti[2];ti[3][T](di,E,Vt,ri)}}}function rb(T){var S=T.pointerType,E=T.scope,P={interaction:mA.search(T),searchDetails:T};return E.fire("interactions:find",P),P.interaction||E.interactions.new({pointerType:S})}function rf(T,S){var E=T.doc,P=T.scope,R=T.options,j=P.interactions.docEvents,W=P.events,Y=W[S];for(var K in P.browser.isIOS&&!R.events&&(R.events={passive:!1}),W.delegatedEvents)Y(E,K,W.delegateListener),Y(E,K,W.delegateUseCapture,!0);for(var fe=R&&R.events,ee=0;ee<j.length;ee++){var we=j[ee];Y(E,we.type,we.listener,fe)}}var aj={id:"core/interactions",install:function(T){for(var S={},E=0;E<Js.length;E++){var P=Js[E];S[P]=ih(P,T)}var R,j=ne.pEventTypes;function W(){for(var Y=0,K=T.interactions.list;Y<K.length;Y++){var fe=K[Y];if(fe.pointerIsDown&&fe.pointerType==="touch"&&!fe._interacting)for(var ee=function(){var Je=Fe[we];T.documents.some(function(We){return _e(We.doc,Je.downTarget)})||fe.removePointer(Je.pointer,Je.event)},we=0,Fe=fe.pointers;we<Fe.length;we++)ee()}}(R=se.PointerEvent?[{type:j.down,listener:W},{type:j.down,listener:S.pointerDown},{type:j.move,listener:S.pointerMove},{type:j.up,listener:S.pointerUp},{type:j.cancel,listener:S.pointerUp}]:[{type:"mousedown",listener:S.pointerDown},{type:"mousemove",listener:S.pointerMove},{type:"mouseup",listener:S.pointerUp},{type:"touchstart",listener:W},{type:"touchstart",listener:S.pointerDown},{type:"touchmove",listener:S.pointerMove},{type:"touchend",listener:S.pointerUp},{type:"touchcancel",listener:S.pointerUp}]).push({type:"blur",listener:function(Y){for(var K=0,fe=T.interactions.list;K<fe.length;K++)fe[K].documentBlur(Y)}}),T.prevTouchTime=0,T.Interaction=(function(Y){c(fe,Y);var K=v(fe);function fe(){return s(this,fe),K.apply(this,arguments)}return o(fe,[{key:"pointerMoveTolerance",get:function(){return T.interactions.pointerMoveTolerance},set:function(ee){T.interactions.pointerMoveTolerance=ee}},{key:"_now",value:function(){return T.now()}}]),fe})(sj),T.interactions={list:[],new:function(Y){Y.scopeFire=function(fe,ee){return T.fire(fe,ee)};var K=new T.Interaction(Y);return T.interactions.list.push(K),K},listeners:S,docEvents:R,pointerMoveTolerance:1},T.usePlugin(Ir)},listeners:{"scope:add-document":function(T){return rf(T,"add")},"scope:remove-document":function(T){return rf(T,"remove")},"interactable:unset":function(T,S){for(var E=T.interactable,P=S.interactions.list.length-1;P>=0;P--){var R=S.interactions.list[P];R.interactable===E&&(R.stop(),S.fire("interactions:destroy",{interaction:R}),R.destroy(),S.interactions.list.length>2&&S.interactions.list.splice(P,1))}}},onDocSignal:rf,doOnInteractions:ih,methodNames:Js},gI=aj,Pc=(function(T){return T[T.On=0]="On",T[T.Off=1]="Off",T})(Pc||{}),nb=(function(){function T(S,E,P,R){s(this,T),this.target=void 0,this.options=void 0,this._actions=void 0,this.events=new vg,this._context=void 0,this._win=void 0,this._doc=void 0,this._scopeEvents=void 0,this._actions=E.actions,this.target=S,this._context=E.context||P,this._win=L(Tr(S)?this._context:S),this._doc=this._win.document,this._scopeEvents=R,this.set(E)}return o(T,[{key:"_defaults",get:function(){return{base:{},perAction:{},actions:{}}}},{key:"setOnEvents",value:function(S,E){return B.func(E.onstart)&&this.on("".concat(S,"start"),E.onstart),B.func(E.onmove)&&this.on("".concat(S,"move"),E.onmove),B.func(E.onend)&&this.on("".concat(S,"end"),E.onend),B.func(E.oninertiastart)&&this.on("".concat(S,"inertiastart"),E.oninertiastart),this}},{key:"updatePerActionListeners",value:function(S,E,P){var R,j=this,W=(R=this._actions.map[S])==null?void 0:R.filterEventType,Y=function(K){return(W==null||W(K))&&br(K,j._actions)};(B.array(E)||B.object(E))&&this._onOff(Pc.Off,S,E,void 0,Y),(B.array(P)||B.object(P))&&this._onOff(Pc.On,S,P,void 0,Y)}},{key:"setPerAction",value:function(S,E){var P=this._defaults;for(var R in E){var j=R,W=this.options[S],Y=E[j];j==="listeners"&&this.updatePerActionListeners(S,W.listeners,Y),B.array(Y)?W[j]=L_(Y):B.plainObject(Y)?(W[j]=it(W[j]||{},Wr(Y)),B.object(P.perAction[j])&&"enabled"in P.perAction[j]&&(W[j].enabled=Y.enabled!==!1)):B.bool(Y)&&B.object(P.perAction[j])?W[j].enabled=Y:W[j]=Y}}},{key:"getRect",value:function(S){return S=S||(B.element(this.target)?this.target:null),B.string(this.target)&&(S=S||this._context.querySelector(this.target)),Wt(S)}},{key:"rectChecker",value:function(S){var E=this;return B.func(S)?(this.getRect=function(P){var R=it({},S.apply(E,P));return"width"in R||(R.width=R.right-R.left,R.height=R.bottom-R.top),R},this):S===null?(delete this.getRect,this):this.getRect}},{key:"_backCompatOption",value:function(S,E){if(Tr(E)||B.object(E)){for(var P in this.options[S]=E,this._actions.map)this.options[P][S]=E;return this}return this.options[S]}},{key:"origin",value:function(S){return this._backCompatOption("origin",S)}},{key:"deltaSource",value:function(S){return S==="page"||S==="client"?(this.options.deltaSource=S,this):this.options.deltaSource}},{key:"getAllElements",value:function(){var S=this.target;return B.string(S)?Array.from(this._context.querySelectorAll(S)):B.func(S)&&S.getAllElements?S.getAllElements():B.element(S)?[S]:[]}},{key:"context",value:function(){return this._context}},{key:"inContext",value:function(S){return this._context===S.ownerDocument||_e(this._context,S)}},{key:"testIgnoreAllow",value:function(S,E,P){return!this.testIgnore(S.ignoreFrom,E,P)&&this.testAllow(S.allowFrom,E,P)}},{key:"testAllow",value:function(S,E,P){return!S||!!B.element(P)&&(B.string(S)?Ke(P,S,E):!!B.element(S)&&_e(S,P))}},{key:"testIgnore",value:function(S,E,P){return!(!S||!B.element(P))&&(B.string(S)?Ke(P,S,E):!!B.element(S)&&_e(S,P))}},{key:"fire",value:function(S){return this.events.fire(S),this}},{key:"_onOff",value:function(S,E,P,R,j){B.object(E)&&!B.array(E)&&(R=P,P=null);var W=Hs(E,P,j);for(var Y in W){Y==="wheel"&&(Y=ne.wheelEvent);for(var K=0,fe=W[Y];K<fe.length;K++){var ee=fe[K];br(Y,this._actions)?this.events[S===Pc.On?"on":"off"](Y,ee):B.string(this.target)?this._scopeEvents[S===Pc.On?"addDelegate":"removeDelegate"](this.target,this._context,Y,ee,R):this._scopeEvents[S===Pc.On?"add":"remove"](this.target,Y,ee,R)}}return this}},{key:"on",value:function(S,E,P){return this._onOff(Pc.On,S,E,P)}},{key:"off",value:function(S,E,P){return this._onOff(Pc.Off,S,E,P)}},{key:"set",value:function(S){var E=this._defaults;for(var P in B.object(S)||(S={}),this.options=Wr(E.base),this._actions.methodDict){var R=P,j=this._actions.methodDict[R];this.options[R]={},this.setPerAction(R,it(it({},E.perAction),E.actions[R])),this[j](S[R])}for(var W in S)W!=="getRect"?B.func(this[W])&&this[W](S[W]):this.rectChecker(S.getRect);return this}},{key:"unset",value:function(){if(B.string(this.target))for(var S in this._scopeEvents.delegatedEvents)for(var E=this._scopeEvents.delegatedEvents[S],P=E.length-1;P>=0;P--){var R=E[P],j=R.selector,W=R.context,Y=R.listeners;j===this.target&&W===this._context&&E.splice(P,1);for(var K=Y.length-1;K>=0;K--)this._scopeEvents.removeDelegate(this.target,this._context,S,Y[K][0],Y[K][1])}else this._scopeEvents.remove(this.target,"all")}}]),T})(),V_=(function(){function T(S){var E=this;s(this,T),this.list=[],this.selectorMap={},this.scope=void 0,this.scope=S,S.addListeners({"interactable:unset":function(P){var R=P.interactable,j=R.target,W=B.string(j)?E.selectorMap[j]:j[E.scope.id],Y=Zp(W,function(K){return K===R});W.splice(Y,1)}})}return o(T,[{key:"new",value:function(S,E){E=it(E||{},{actions:this.scope.actions});var P=new this.scope.Interactable(S,E,this.scope.document,this.scope.events);return this.scope.addDocument(P._doc),this.list.push(P),B.string(S)?(this.selectorMap[S]||(this.selectorMap[S]=[]),this.selectorMap[S].push(P)):(P.target[this.scope.id]||Object.defineProperty(S,this.scope.id,{value:[],configurable:!0}),S[this.scope.id].push(P)),this.scope.fire("interactable:new",{target:S,options:E,interactable:P,win:this.scope._win}),P}},{key:"getExisting",value:function(S,E){var P=E&&E.context||this.scope.document,R=B.string(S),j=R?this.selectorMap[S]:S[this.scope.id];if(j)return Yp(j,function(W){return W._context===P&&(R||W.inContext(S))})}},{key:"forEachMatch",value:function(S,E){for(var P=0,R=this.list;P<R.length;P++){var j=R[P],W=void 0;if((B.string(j.target)?B.element(S)&&ft(S,j.target):S===j.target)&&j.inContext(S)&&(W=E(j)),W!==void 0)return W}}}]),T})(),gA=(function(){function T(){var S=this;s(this,T),this.id="__interact_scope_".concat(Math.floor(100*Math.random())),this.isInitialized=!1,this.listenerMaps=[],this.browser=ne,this.defaults=Wr(uI),this.Eventable=vg,this.actions={map:{},phases:{start:!0,move:!0,end:!0},methodDict:{},phaselessTypes:{}},this.interactStatic=(function(P){var R=function j(W,Y){var K=P.interactables.getExisting(W,Y);return K||((K=P.interactables.new(W,Y)).events.global=j.globalEvents),K};return R.getPointerAverage=lI,R.getTouchBBox=pg,R.getTouchDistance=Wv,R.getTouchAngle=Zv,R.getElementRect=Wt,R.getElementClientRect=kt,R.matchesSelector=ft,R.closest=Oe,R.globalEvents={},R.version="1.10.27",R.scope=P,R.use=function(j,W){return this.scope.usePlugin(j,W),this},R.isSet=function(j,W){return!!this.scope.interactables.get(j,W&&W.context)},R.on=jl(function(j,W,Y){if(B.string(j)&&j.search(" ")!==-1&&(j=j.trim().split(/ +/)),B.array(j)){for(var K=0,fe=j;K<fe.length;K++){var ee=fe[K];this.on(ee,W,Y)}return this}if(B.object(j)){for(var we in j)this.on(we,j[we],W);return this}return br(j,this.scope.actions)?this.globalEvents[j]?this.globalEvents[j].push(W):this.globalEvents[j]=[W]:this.scope.events.add(this.scope.document,j,W,{options:Y}),this},"The interact.on() method is being deprecated"),R.off=jl(function(j,W,Y){if(B.string(j)&&j.search(" ")!==-1&&(j=j.trim().split(/ +/)),B.array(j)){for(var K=0,fe=j;K<fe.length;K++){var ee=fe[K];this.off(ee,W,Y)}return this}if(B.object(j)){for(var we in j)this.off(we,j[we],W);return this}var Fe;return br(j,this.scope.actions)?j in this.globalEvents&&(Fe=this.globalEvents[j].indexOf(W))!==-1&&this.globalEvents[j].splice(Fe,1):this.scope.events.remove(this.scope.document,j,W,Y),this},"The interact.off() method is being deprecated"),R.debug=function(){return this.scope},R.supportsTouch=function(){return ne.supportsTouch},R.supportsPointerEvent=function(){return ne.supportsPointerEvent},R.stop=function(){for(var j=0,W=this.scope.interactions.list;j<W.length;j++)W[j].stop();return this},R.pointerMoveTolerance=function(j){return B.number(j)?(this.scope.interactions.pointerMoveTolerance=j,this):this.scope.interactions.pointerMoveTolerance},R.addDocument=function(j,W){this.scope.addDocument(j,W)},R.removeDocument=function(j){this.scope.removeDocument(j)},R})(this),this.InteractEvent=eh,this.Interactable=void 0,this.interactables=new V_(this),this._win=void 0,this.document=void 0,this.window=void 0,this.documents=[],this._plugins={list:[],map:{}},this.onWindowUnload=function(P){return S.removeDocument(P.target)};var E=this;this.Interactable=(function(P){c(j,P);var R=v(j);function j(){return s(this,j),R.apply(this,arguments)}return o(j,[{key:"_defaults",get:function(){return E.defaults}},{key:"set",value:function(W){return b(h(j.prototype),"set",this).call(this,W),E.fire("interactable:set",{options:W,interactable:this}),this}},{key:"unset",value:function(){b(h(j.prototype),"unset",this).call(this);var W=E.interactables.list.indexOf(this);W<0||(E.interactables.list.splice(W,1),E.fire("interactable:unset",{interactable:this}))}}]),j})(nb)}return o(T,[{key:"addListeners",value:function(S,E){this.listenerMaps.push({id:E,map:S})}},{key:"fire",value:function(S,E){for(var P=0,R=this.listenerMaps;P<R.length;P++){var j=R[P].map[S];if(j&&j(E,this,S)===!1)return!1}}},{key:"init",value:function(S){return this.isInitialized?this:(function(E,P){return E.isInitialized=!0,B.window(P)&&A(P),se.init(P),ne.init(P),jr.init(P),E.window=P,E.document=P.document,E.usePlugin(gI),E.usePlugin(fA),E})(this,S)}},{key:"pluginIsInstalled",value:function(S){var E=S.id;return E?!!this._plugins.map[E]:this._plugins.list.indexOf(S)!==-1}},{key:"usePlugin",value:function(S,E){if(!this.isInitialized)return this;if(this.pluginIsInstalled(S))return this;if(S.id&&(this._plugins.map[S.id]=S),this._plugins.list.push(S),S.install&&S.install(this,E),S.listeners&&S.before){for(var P=0,R=this.listenerMaps.length,j=S.before.reduce(function(Y,K){return Y[K]=!0,Y[yA(K)]=!0,Y},{});P<R;P++){var W=this.listenerMaps[P].id;if(W&&(j[W]||j[yA(W)]))break}this.listenerMaps.splice(P,0,{id:S.id,map:S.listeners})}else S.listeners&&this.listenerMaps.push({id:S.id,map:S.listeners});return this}},{key:"addDocument",value:function(S,E){if(this.getDocIndex(S)!==-1)return!1;var P=L(S);E=E?it({},E):{},this.documents.push({doc:S,options:E}),this.events.documents.push(S),S!==this.document&&this.events.add(P,"unload",this.onWindowUnload),this.fire("scope:add-document",{doc:S,window:P,scope:this,options:E})}},{key:"removeDocument",value:function(S){var E=this.getDocIndex(S),P=L(S),R=this.documents[E].options;this.events.remove(P,"unload",this.onWindowUnload),this.documents.splice(E,1),this.events.documents.splice(E,1),this.fire("scope:remove-document",{doc:S,window:P,scope:this,options:R})}},{key:"getDocIndex",value:function(S){for(var E=0;E<this.documents.length;E++)if(this.documents[E].doc===S)return E;return-1}},{key:"getDocOptions",value:function(S){var E=this.getDocIndex(S);return E===-1?null:this.documents[E].options}},{key:"now",value:function(){return(this.window.Date||Date).now()}}]),T})();function yA(T){return T&&T.replace(/\/.*$/,"")}var vA=new gA,fa=vA.interactStatic,yI=typeof globalThis<"u"?globalThis:window;vA.init(yI);var oj=Object.freeze({__proto__:null,edgeTarget:function(){},elements:function(){},grid:function(T){var S=[["x","y"],["left","top"],["right","bottom"],["width","height"]].filter(function(P){var R=P[0],j=P[1];return R in T||j in T}),E=function(P,R){for(var j=T.range,W=T.limits,Y=W===void 0?{left:-1/0,right:1/0,top:-1/0,bottom:1/0}:W,K=T.offset,fe=K===void 0?{x:0,y:0}:K,ee={range:j,grid:T,x:null,y:null},we=0;we<S.length;we++){var Fe=S[we],Je=Fe[0],We=Fe[1],Qe=Math.round((P-fe.x)/T[Je]),yt=Math.round((R-fe.y)/T[We]);ee[Je]=Math.max(Y.left,Math.min(Y.right,Qe*T[Je]+fe.x)),ee[We]=Math.max(Y.top,Math.min(Y.bottom,yt*T[We]+fe.y))}return ee};return E.grid=T,E.coordFields=S,E}}),lj={id:"snappers",install:function(T){var S=T.interactStatic;S.snappers=it(S.snappers||{},oj),S.createSnapGrid=S.snappers.grid}},cj=lj,uj={start:function(T){var S=T.state,E=T.rect,P=T.edges,R=T.pageCoords,j=S.options,W=j.ratio,Y=j.enabled,K=S.options,fe=K.equalDelta,ee=K.modifiers;W==="preserve"&&(W=E.width/E.height),S.startCoords=it({},R),S.startRect=it({},E),S.ratio=W,S.equalDelta=fe;var we=S.linkedEdges={top:P.top||P.left&&!P.bottom,left:P.left||P.top&&!P.right,bottom:P.bottom||P.right&&!P.top,right:P.right||P.bottom&&!P.left};if(S.xIsPrimaryAxis=!(!P.left&&!P.right),S.equalDelta){var Fe=(we.left?1:-1)*(we.top?1:-1);S.edgeSign={x:Fe,y:Fe}}else S.edgeSign={x:we.left?-1:1,y:we.top?-1:1};if(Y!==!1&&it(P,we),ee!=null&&ee.length){var Je=new ja(T.interaction);Je.copyFrom(T.interaction.modification),Je.prepareStates(ee),S.subModification=Je,Je.startAll(r({},T))}},set:function(T){var S=T.state,E=T.rect,P=T.coords,R=S.linkedEdges,j=it({},P),W=S.equalDelta?dj:bA;if(it(T.edges,R),W(S,S.xIsPrimaryAxis,P,E),!S.subModification)return null;var Y=it({},E);qs(R,Y,{x:P.x-j.x,y:P.y-j.y});var K=S.subModification.setAll(r(r({},T),{},{rect:Y,edges:R,pageCoords:P,prevCoords:P,prevRect:Y})),fe=K.delta;return K.changed&&(W(S,Math.abs(fe.x)>Math.abs(fe.y),K.coords,K.rect),it(P,K.coords)),K.eventProps},defaults:{ratio:"preserve",equalDelta:!1,modifiers:[],enabled:!1}};function dj(T,S,E){var P=T.startCoords,R=T.edgeSign;S?E.y=P.y+(E.x-P.x)*R.y:E.x=P.x+(E.y-P.y)*R.x}function bA(T,S,E,P){var R=T.startRect,j=T.startCoords,W=T.ratio,Y=T.edgeSign;if(S){var K=P.width/W;E.y=j.y+(K-R.height)*Y.y}else{var fe=P.height*W;E.x=j.x+(fe-R.width)*Y.x}}var hj=Lu(uj,"aspectRatio"),wA=function(){};wA._defaults={};var U_=wA;function nf(T,S,E){return B.func(T)?ks(T,S.interactable,S.element,[E.x,E.y,S]):ks(T,S.interactable,S.element)}var wg={start:function(T){var S=T.rect,E=T.startOffset,P=T.state,R=T.interaction,j=T.pageCoords,W=P.options,Y=W.elementRect,K=it({left:0,top:0,right:0,bottom:0},W.offset||{});if(S&&Y){var fe=nf(W.restriction,R,j);if(fe){var ee=fe.right-fe.left-S.width,we=fe.bottom-fe.top-S.height;ee<0&&(K.left+=ee,K.right+=ee),we<0&&(K.top+=we,K.bottom+=we)}K.left+=E.left-S.width*Y.left,K.top+=E.top-S.height*Y.top,K.right+=E.right-S.width*(1-Y.right),K.bottom+=E.bottom-S.height*(1-Y.bottom)}P.offset=K},set:function(T){var S=T.coords,E=T.interaction,P=T.state,R=P.options,j=P.offset,W=nf(R.restriction,E,S);if(W){var Y=(function(K){return!K||"left"in K&&"top"in K||((K=it({},K)).left=K.x||0,K.top=K.y||0,K.right=K.right||K.left+K.width,K.bottom=K.bottom||K.top+K.height),K})(W);S.x=Math.max(Math.min(Y.right-j.right,S.x),Y.left+j.left),S.y=Math.max(Math.min(Y.bottom-j.bottom,S.y),Y.top+j.top)}},defaults:{restriction:null,elementRect:null,offset:null,endOnly:!1,enabled:!1}},pj=Lu(wg,"restrict"),_A={top:1/0,left:1/0,bottom:-1/0,right:-1/0},xA={top:-1/0,left:-1/0,bottom:1/0,right:1/0};function vI(T,S){for(var E=0,P=["top","left","bottom","right"];E<P.length;E++){var R=P[E];R in T||(T[R]=S[R])}return T}var sb={noInner:_A,noOuter:xA,start:function(T){var S,E=T.interaction,P=T.startOffset,R=T.state,j=R.options;j&&(S=Zo(nf(j.offset,E,E.coords.start.page))),S=S||{x:0,y:0},R.offset={top:S.y+P.top,left:S.x+P.left,bottom:S.y-P.bottom,right:S.x-P.right}},set:function(T){var S=T.coords,E=T.edges,P=T.interaction,R=T.state,j=R.offset,W=R.options;if(E){var Y=it({},S),K=nf(W.inner,P,Y)||{},fe=nf(W.outer,P,Y)||{};vI(K,_A),vI(fe,xA),E.top?S.y=Math.min(Math.max(fe.top+j.top,Y.y),K.top+j.top):E.bottom&&(S.y=Math.max(Math.min(fe.bottom+j.bottom,Y.y),K.bottom+j.bottom)),E.left?S.x=Math.min(Math.max(fe.left+j.left,Y.x),K.left+j.left):E.right&&(S.x=Math.max(Math.min(fe.right+j.right,Y.x),K.right+j.right))}},defaults:{inner:null,outer:null,offset:null,endOnly:!1,enabled:!1}},fj=Lu(sb,"restrictEdges"),mj=it({get elementRect(){return{top:0,left:0,bottom:1,right:1}},set elementRect(T){}},wg.defaults),gj=Lu({start:wg.start,set:wg.set,defaults:mj},"restrictRect"),yj={width:-1/0,height:-1/0},vj={width:1/0,height:1/0},bj=Lu({start:function(T){return sb.start(T)},set:function(T){var S=T.interaction,E=T.state,P=T.rect,R=T.edges,j=E.options;if(R){var W=Cc(nf(j.min,S,T.coords))||yj,Y=Cc(nf(j.max,S,T.coords))||vj;E.options={endOnly:j.endOnly,inner:it({},sb.noInner),outer:it({},sb.noOuter)},R.top?(E.options.inner.top=P.bottom-W.height,E.options.outer.top=P.bottom-Y.height):R.bottom&&(E.options.inner.bottom=P.top+W.height,E.options.outer.bottom=P.top+Y.height),R.left?(E.options.inner.left=P.right-W.width,E.options.outer.left=P.right-Y.width):R.right&&(E.options.inner.right=P.left+W.width,E.options.outer.right=P.left+Y.width),sb.set(T),E.options=j}},defaults:{min:null,max:null,endOnly:!1,enabled:!1}},"restrictSize"),bI={start:function(T){var S,E=T.interaction,P=T.interactable,R=T.element,j=T.rect,W=T.state,Y=T.startOffset,K=W.options,fe=K.offsetWithOrigin?(function(Fe){var Je=Fe.interaction.element,We=Zo(ks(Fe.state.options.origin,null,null,[Je])),Qe=We||ha(Fe.interactable,Je,Fe.interaction.prepared.name);return Qe})(T):{x:0,y:0};if(K.offset==="startCoords")S={x:E.coords.start.page.x,y:E.coords.start.page.y};else{var ee=ks(K.offset,P,R,[E]);(S=Zo(ee)||{x:0,y:0}).x+=fe.x,S.y+=fe.y}var we=K.relativePoints;W.offsets=j&&we&&we.length?we.map(function(Fe,Je){return{index:Je,relativePoint:Fe,x:Y.left-j.width*Fe.x+S.x,y:Y.top-j.height*Fe.y+S.y}}):[{index:0,relativePoint:null,x:S.x,y:S.y}]},set:function(T){var S=T.interaction,E=T.coords,P=T.state,R=P.options,j=P.offsets,W=ha(S.interactable,S.element,S.prepared.name),Y=it({},E),K=[];R.offsetWithOrigin||(Y.x-=W.x,Y.y-=W.y);for(var fe=0,ee=j;fe<ee.length;fe++)for(var we=ee[fe],Fe=Y.x-we.x,Je=Y.y-we.y,We=0,Qe=R.targets.length;We<Qe;We++){var yt=R.targets[We],ht=void 0;(ht=B.func(yt)?yt(Fe,Je,S._proxy,we,We):yt)&&K.push({x:(B.number(ht.x)?ht.x:Fe)+we.x,y:(B.number(ht.y)?ht.y:Je)+we.y,range:B.number(ht.range)?ht.range:R.range,source:yt,index:We,offset:we})}for(var Tt={target:null,inRange:!1,distance:0,range:0,delta:{x:0,y:0}},ti=0;ti<K.length;ti++){var di=K[ti],Vt=di.range,ri=di.x-Y.x,pn=di.y-Y.y,tr=Hd(ri,pn),ma=tr<=Vt;Vt===1/0&&Tt.inRange&&Tt.range!==1/0&&(ma=!1),Tt.target&&!(ma?Tt.inRange&&Vt!==1/0?tr/Vt<Tt.distance/Tt.range:Vt===1/0&&Tt.range!==1/0||tr<Tt.distance:!Tt.inRange&&tr<Tt.distance)||(Tt.target=di,Tt.distance=tr,Tt.range=Vt,Tt.inRange=ma,Tt.delta.x=ri,Tt.delta.y=pn)}return Tt.inRange&&(E.x=Tt.target.x,E.y=Tt.target.y),P.closest=Tt,Tt},defaults:{range:1/0,targets:null,offset:null,offsetWithOrigin:!0,origin:null,relativePoints:null,endOnly:!1,enabled:!1}},wj=Lu(bI,"snap"),_g={start:function(T){var S=T.state,E=T.edges,P=S.options;if(!E)return null;T.state={options:{targets:null,relativePoints:[{x:E.left?0:1,y:E.top?0:1}],offset:P.offset||"self",origin:{x:0,y:0},range:P.range}},S.targetFields=S.targetFields||[["width","height"],["x","y"]],bI.start(T),S.offsets=T.state.offsets,T.state=S},set:function(T){var S=T.interaction,E=T.state,P=T.coords,R=E.options,j=E.offsets,W={x:P.x-j[0].x,y:P.y-j[0].y};E.options=it({},R),E.options.targets=[];for(var Y=0,K=R.targets||[];Y<K.length;Y++){var fe=K[Y],ee=void 0;if(ee=B.func(fe)?fe(W.x,W.y,S):fe){for(var we=0,Fe=E.targetFields;we<Fe.length;we++){var Je=Fe[we],We=Je[0],Qe=Je[1];if(We in ee||Qe in ee){ee.x=ee[We],ee.y=ee[Qe];break}}E.options.targets.push(ee)}}var yt=bI.set(T);return E.options=R,yt},defaults:{range:1/0,targets:null,offset:null,endOnly:!1,enabled:!1}},ab=Lu(_g,"snapSize"),wI={aspectRatio:hj,restrictEdges:fj,restrict:pj,restrictRect:gj,restrictSize:bj,snapEdges:Lu({start:function(T){var S=T.edges;return S?(T.state.targetFields=T.state.targetFields||[[S.left?"left":"right",S.top?"top":"bottom"]],_g.start(T)):null},set:_g.set,defaults:it(Wr(_g.defaults),{targets:void 0,range:void 0,offset:{x:0,y:0}})},"snapEdges"),snap:wj,snapSize:ab,spring:U_,avoid:U_,transform:U_,rubberband:U_},$A={id:"modifiers",install:function(T){var S=T.interactStatic;for(var E in T.usePlugin(cI),T.usePlugin(cj),S.modifiers=wI,wI){var P=wI[E],R=P._defaults,j=P._methods;R._methods=j,T.defaults.perAction[E]=R}}},SA=$A,_I=(function(T){c(E,T);var S=v(E);function E(P,R,j,W,Y,K){var fe;if(s(this,E),Mu(g(fe=S.call(this,Y)),j),j!==R&&Mu(g(fe),R),fe.timeStamp=K,fe.originalEvent=j,fe.type=P,fe.pointerId=Gd(R),fe.pointerType=Zd(R),fe.target=W,fe.currentTarget=null,P==="tap"){var ee=Y.getPointerIndex(R);fe.dt=fe.timeStamp-Y.pointers[ee].downTime;var we=fe.timeStamp-Y.tapTime;fe.double=!!Y.prevTap&&Y.prevTap.type!=="doubletap"&&Y.prevTap.target===fe.target&&we<500}else P==="doubletap"&&(fe.dt=R.timeStamp-Y.tapTime,fe.double=!0);return fe}return o(E,[{key:"_subtractOrigin",value:function(P){var R=P.x,j=P.y;return this.pageX-=R,this.pageY-=j,this.clientX-=R,this.clientY-=j,this}},{key:"_addOrigin",value:function(P){var R=P.x,j=P.y;return this.pageX+=R,this.pageY+=j,this.clientX+=R,this.clientY+=j,this}},{key:"preventDefault",value:function(){this.originalEvent.preventDefault()}}]),E})(po),xg={id:"pointer-events/base",before:["inertia","modifiers","auto-start","actions"],install:function(T){T.pointerEvents=xg,T.defaults.actions.pointerEvents=xg.defaults,it(T.actions.phaselessTypes,xg.types)},listeners:{"interactions:new":function(T){var S=T.interaction;S.prevTap=null,S.tapTime=0},"interactions:update-pointer":function(T){var S=T.down,E=T.pointerInfo;!S&&E.hold||(E.hold={duration:1/0,timeout:null})},"interactions:move":function(T,S){var E=T.interaction,P=T.pointer,R=T.event,j=T.eventTarget;T.duplicate||E.pointerIsDown&&!E.pointerWasMoved||(E.pointerIsDown&&xI(T),zu({interaction:E,pointer:P,event:R,eventTarget:j,type:"move"},S))},"interactions:down":function(T,S){(function(E,P){for(var R=E.interaction,j=E.pointer,W=E.event,Y=E.eventTarget,K=E.pointerIndex,fe=R.pointers[K].hold,ee=ui(Y),we={interaction:R,pointer:j,event:W,eventTarget:Y,type:"hold",targets:[],path:ee,node:null},Fe=0;Fe<ee.length;Fe++){var Je=ee[Fe];we.node=Je,P.fire("pointerEvents:collect-targets",we)}if(we.targets.length){for(var We=1/0,Qe=0,yt=we.targets;Qe<yt.length;Qe++){var ht=yt[Qe].eventable.options.holdDuration;ht<We&&(We=ht)}fe.duration=We,fe.timeout=setTimeout(function(){zu({interaction:R,eventTarget:Y,pointer:j,event:W,type:"hold"},P)},We)}})(T,S),zu(T,S)},"interactions:up":function(T,S){xI(T),zu(T,S),(function(E,P){var R=E.interaction,j=E.pointer,W=E.event,Y=E.eventTarget;R.pointerWasMoved||zu({interaction:R,eventTarget:Y,pointer:j,event:W,type:"tap"},P)})(T,S)},"interactions:cancel":function(T,S){xI(T),zu(T,S)}},PointerEvent:_I,fire:zu,collectEventTargets:sf,defaults:{holdDuration:600,ignoreFrom:null,allowFrom:null,origin:{x:0,y:0}},types:{down:!0,move:!0,up:!0,cancel:!0,tap:!0,doubletap:!0,hold:!0}};function zu(T,S){var E=T.interaction,P=T.pointer,R=T.event,j=T.eventTarget,W=T.type,Y=T.targets,K=Y===void 0?sf(T,S):Y,fe=new _I(W,P,R,j,E,S.now());S.fire("pointerEvents:new",{pointerEvent:fe});for(var ee={interaction:E,pointer:P,event:R,eventTarget:j,targets:K,type:W,pointerEvent:fe},we=0;we<K.length;we++){var Fe=K[we];for(var Je in Fe.props||{})fe[Je]=Fe.props[Je];var We=ha(Fe.eventable,Fe.node);if(fe._subtractOrigin(We),fe.eventable=Fe.eventable,fe.currentTarget=Fe.node,Fe.eventable.fire(fe),fe._addOrigin(We),fe.immediatePropagationStopped||fe.propagationStopped&&we+1<K.length&&K[we+1].node!==fe.currentTarget)break}if(S.fire("pointerEvents:fired",ee),W==="tap"){var Qe=fe.double?zu({interaction:E,pointer:P,event:R,eventTarget:j,type:"doubletap"},S):fe;E.prevTap=Qe,E.tapTime=Qe.timeStamp}return fe}function sf(T,S){var E=T.interaction,P=T.pointer,R=T.event,j=T.eventTarget,W=T.type,Y=E.getPointerIndex(P),K=E.pointers[Y];if(W==="tap"&&(E.pointerWasMoved||!K||K.downTarget!==j))return[];for(var fe=ui(j),ee={interaction:E,pointer:P,event:R,eventTarget:j,type:W,path:fe,targets:[],node:null},we=0;we<fe.length;we++){var Fe=fe[we];ee.node=Fe,S.fire("pointerEvents:collect-targets",ee)}return W==="hold"&&(ee.targets=ee.targets.filter(function(Je){var We,Qe;return Je.eventable.options.holdDuration===((We=E.pointers[Y])==null||(Qe=We.hold)==null?void 0:Qe.duration)})),ee.targets}function xI(T){var S=T.interaction,E=T.pointerIndex,P=S.pointers[E].hold;P&&P.timeout&&(clearTimeout(P.timeout),P.timeout=null)}var _j=Object.freeze({__proto__:null,default:xg});function xj(T){var S=T.interaction;S.holdIntervalHandle&&(clearInterval(S.holdIntervalHandle),S.holdIntervalHandle=null)}var TA={id:"pointer-events/holdRepeat",install:function(T){T.usePlugin(xg);var S=T.pointerEvents;S.defaults.holdRepeatInterval=0,S.types.holdrepeat=T.actions.phaselessTypes.holdrepeat=!0},listeners:["move","up","cancel","endall"].reduce(function(T,S){return T["pointerEvents:".concat(S)]=xj,T},{"pointerEvents:new":function(T){var S=T.pointerEvent;S.type==="hold"&&(S.count=(S.count||0)+1)},"pointerEvents:fired":function(T,S){var E=T.interaction,P=T.pointerEvent,R=T.eventTarget,j=T.targets;if(P.type==="hold"&&j.length){var W=j[0].eventable.options.holdRepeatInterval;W<=0||(E.holdIntervalHandle=setTimeout(function(){S.pointerEvents.fire({interaction:E,eventTarget:R,type:"hold",pointer:P,event:P},S)},W))}}})},IA=TA,ob={id:"pointer-events/interactableTargets",install:function(T){var S=T.Interactable;S.prototype.pointerEvents=function(P){return it(this.events.options,P),this};var E=S.prototype._backCompatOption;S.prototype._backCompatOption=function(P,R){var j=E.call(this,P,R);return j===this&&(this.events.options[P]=R),j}},listeners:{"pointerEvents:collect-targets":function(T,S){var E=T.targets,P=T.node,R=T.type,j=T.eventTarget;S.interactables.forEachMatch(P,function(W){var Y=W.events,K=Y.options;Y.types[R]&&Y.types[R].length&&W.testIgnoreAllow(K,P,j)&&E.push({node:P,eventable:Y,props:{interactable:W}})})},"interactable:new":function(T){var S=T.interactable;S.events.getRect=function(E){return S.getRect(E)}},"interactable:set":function(T,S){var E=T.interactable,P=T.options;it(E.events.options,S.pointerEvents.defaults),it(E.events.options,P.pointerEvents||{})}}},lb=ob,$j={id:"pointer-events",install:function(T){T.usePlugin(_j),T.usePlugin(IA),T.usePlugin(lb)}},B_=$j,MA={id:"reflow",install:function(T){var S=T.Interactable;T.actions.phases.reflow=!0,S.prototype.reflow=function(E){return(function(P,R,j){for(var W=P.getAllElements(),Y=j.window.Promise,K=Y?[]:null,fe=function(){var we=W[ee],Fe=P.getRect(we);if(!Fe)return 1;var Je,We=Yp(j.interactions.list,function(ht){return ht.interacting()&&ht.interactable===P&&ht.element===we&&ht.prepared.name===R.name});if(We)We.move(),K&&(Je=We._reflowPromise||new Y(function(ht){We._reflowResolve=ht}));else{var Qe=Cc(Fe),yt=(function(ht){return{coords:ht,get page(){return this.coords.page},get client(){return this.coords.client},get timeStamp(){return this.coords.timeStamp},get pageX(){return this.coords.page.x},get pageY(){return this.coords.page.y},get clientX(){return this.coords.client.x},get clientY(){return this.coords.client.y},get pointerId(){return this.coords.pointerId},get target(){return this.coords.target},get type(){return this.coords.type},get pointerType(){return this.coords.pointerType},get buttons(){return this.coords.buttons},preventDefault:function(){}}})({page:{x:Qe.x,y:Qe.y},client:{x:Qe.x,y:Qe.y},timeStamp:j.now()});Je=(function(ht,Tt,ti,di,Vt){var ri=ht.interactions.new({pointerType:"reflow"}),pn={interaction:ri,event:Vt,pointer:Vt,eventTarget:ti,phase:"reflow"};ri.interactable=Tt,ri.element=ti,ri.prevEvent=Vt,ri.updatePointer(Vt,Vt,ti,!0),k_(ri.coords.delta),ku(ri.prepared,di),ri._doPhase(pn);var tr=ht.window,ma=tr.Promise,Jo=ma?new ma(function(ga){ri._reflowResolve=ga}):void 0;return ri._reflowPromise=Jo,ri.start(di,Tt,ti),ri._interacting?(ri.move(pn),ri.end(Vt)):(ri.stop(),ri._reflowResolve()),ri.removePointer(Vt,Vt),Jo})(j,P,we,R,yt)}K&&K.push(Je)},ee=0;ee<W.length&&!fe();ee++);return K&&Y.all(K).then(function(){return P})})(this,E,T)}},listeners:{"interactions:stop":function(T,S){var E=T.interaction;E.pointerType==="reflow"&&(E._reflowResolve&&E._reflowResolve(),(function(P,R){P.splice(P.indexOf(R),1)})(S.interactions.list,E))}}},CA=MA;if(fa.use(Ir),fa.use(Kp),fa.use(B_),fa.use(Ru),fa.use(SA),fa.use(Ye),fa.use(kc),fa.use(N_),fa.use(CA),fa.default=fa,n(t)==="object"&&t)try{t.exports=fa}catch{}return fa.default=fa,fa})})(HC,HC.exports)),HC.exports}var qut=But();const Wce=Vut(qut);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const bTe=(t,e,i)=>Math.max(e,Math.min(t,i)),Hut=new RegExp(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/),Zce=t=>{const e=(""+t).match(Hut);return!e||parseInt(e[1])===0?0:Math.max(0,(e[1]?e[1].length:0)-(e[2]?+e[2]:0))};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */function mG(t,e,i){return e?`${t}-${e}`:i?`${t}-${i}`:`${t}-m`}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Qu={container:"container",actionBarContainer:"action-bar-container",contentContainer:"content-container",content:"content",contentHeader:"content__header",contentBody:"content__body",contentOverlay:"content--overlay",floatAll:"float-all",floatContent:"float--content",resizeHandle:"resize-handle",resizeHandleBar:"resize-handle-bar"},Yce={actionBar:"action-bar",header:"header"},Jce={dragVertical:"drag-resize-vertical",dragHorizontal:"drag-resize-horizontal"},Gut=ct`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{pointer-events:none;position:relative;display:flex;flex:0 1 auto;align-items:stretch;z-index:var(--calcite-shell-panel-z-index, var(--calcite-z-index));--calcite-shell-panel-max-height: unset;--calcite-internal-shell-panel-shadow-block-start: 0 4px 8px -1px rgba(0, 0, 0, .08), 0 2px 4px -1px rgba(0, 0, 0, .04);--calcite-internal-shell-panel-shadow-block-end: 0 -4px 8px -1px rgba(0, 0, 0, .08), 0 -2px 4px -1px rgba(0, 0, 0, .04);--calcite-internal-shell-panel-shadow-inline-start: 4px 0 8px -1px rgba(0, 0, 0, .08), 2px 0 4px -1px rgba(0, 0, 0, .04);--calcite-internal-shell-panel-shadow-inline-end: -4px 0 8px -1px rgba(0, 0, 0, .08), -2px 0 4px -1px rgba(0, 0, 0, .04)}.calcite--rtl.content--overlay{--calcite-internal-shell-panel-shadow-inline-start: -4px 0 8px -1px rgba(0, 0, 0, .08), -2px 0 4px -1px rgba(0, 0, 0, .04);--calcite-internal-shell-panel-shadow-inline-end: 4px 0 8px -1px rgba(0, 0, 0, .08), 2px 0 4px -1px rgba(0, 0, 0, .04)}:host([layout=vertical]){z-index:var(--calcite-shell-panel-z-index, calc(var(--calcite-z-index) + 1))}:host([layout=vertical][display-mode=overlay]){z-index:var(--calcite-shell-panel-z-index, calc(var(--calcite-z-index-header) + 1))}:host([layout=vertical][display-mode=float-all]) .content{flex:2}:host([layout=vertical]:not([display-mode=float-all])) .width-s{--calcite-internal-shell-panel-width: var(--calcite-shell-panel-width, 12vw);--calcite-internal-shell-panel-max-width: var(--calcite-shell-panel-max-width, 300px);--calcite-internal-shell-panel-min-width: var(--calcite-shell-panel-min-width, 150px)}:host([layout=vertical][display-mode=float-all]) .width-s{--calcite-internal-shell-panel-width: var(--calcite-shell-panel-width, 12vw);--calcite-internal-shell-panel-min-width: var(--calcite-shell-panel-min-width, 150px)}:host([layout=vertical]:not([display-mode=float-all])) .width-m{--calcite-internal-shell-panel-width: var(--calcite-shell-panel-width, 20vw);--calcite-internal-shell-panel-max-width: var(--calcite-shell-panel-max-width, 420px);--calcite-internal-shell-panel-min-width: var(--calcite-shell-panel-min-width, 240px)}:host([layout=vertical][display-mode=float-all]) .width-m{--calcite-internal-shell-panel-width: var(--calcite-shell-panel-width, 20vw);--calcite-internal-shell-panel-min-width: var(--calcite-shell-panel-min-width, 240px)}:host([layout=vertical]:not([display-mode=float-all])) .width-l{--calcite-internal-shell-panel-width: var(--calcite-shell-panel-width, 45vw);--calcite-internal-shell-panel-max-width: var(--calcite-shell-panel-max-width, 680px);--calcite-internal-shell-panel-min-width: var(--calcite-shell-panel-min-width, 340px)}:host([layout=vertical][display-mode=float-all]) .width-l{--calcite-internal-shell-panel-width: var(--calcite-shell-panel-width, 45vw);--calcite-internal-shell-panel-min-width: var(--calcite-shell-panel-min-width, 340px)}:host([layout=horizontal]) .content{--calcite-internal-shell-panel-height: var(--calcite-shell-panel-height);--calcite-internal-shell-panel-min-height: var(--calcite-shell-panel-min-height, 5vh);--calcite-internal-shell-panel-max-height: var(--calcite-shell-panel-max-height, 30vh)}:host([layout=horizontal]) .height-s{--calcite-internal-shell-panel-height: var(--calcite-shell-panel-height);--calcite-internal-shell-panel-min-height: var(--calcite-shell-panel-min-height, 5vh);--calcite-internal-shell-panel-max-height: var(--calcite-shell-panel-max-height, 20vh)}:host([layout=horizontal]) .height-l{--calcite-internal-shell-panel-height: var(--calcite-shell-panel-height);--calcite-internal-shell-panel-min-height: var(--calcite-shell-panel-min-height, 5vh);--calcite-internal-shell-panel-max-height: var(--calcite-shell-panel-max-height, 40vh)}.container{pointer-events:none;box-sizing:border-box;display:flex;block-size:100%;flex:1 1 auto;align-items:stretch;background-color:transparent;font-size:var(--calcite-font-size--1);color:var(--calcite-shell-panel-text-color, var(--calcite-color-text-2))}.container *{box-sizing:border-box}.container.float-all{margin-block:var(--calcite-spacing-sm);margin-inline:var(--calcite-spacing-sm)}.float-all{max-block-size:var(--calcite-internal-shell-panel-max-height, calc(100% - 1rem) );box-shadow:var(--calcite-shell-panel-shadow, var(--calcite-shadow-sm));border-radius:var(--calcite-shell-panel-corner-radius, var(--calcite-corner-radius-round));overflow:hidden}:host([layout=vertical][position=start]) .float-all{border-inline-start:var(--calcite-border-width-sm) solid var(--calcite-shell-panel-border-color, var(--calcite-color-border-3))}:host([layout=vertical][position=end]) .float-all{border-inline-end:var(--calcite-border-width-sm) solid var(--calcite-shell-border-color, var(--calcite-shell-panel-border-color, var(--calcite-color-border-3)))}:host([layout=horizontal]) .float-all{border-inline:var(--calcite-border-width-sm) solid var(--calcite-shell-border-color, var(--calcite-shell-panel-border-color, var(--calcite-color-border-3)))}:host([layout=horizontal]) .container{block-size:auto;inline-size:100%;flex-direction:column}.resize-handle{position:absolute;box-sizing:border-box;display:flex;-webkit-user-select:none;user-select:none;align-items:center;justify-content:center;outline:2px solid transparent;outline-offset:2px;--calcite-internal-shell-panel-resize-handle-offset: calc( (var(--calcite-size-fixed-xxl) - var(--calcite-size-fixed-sm-plus)) / 2 * -1 );z-index:var(--calcite-z-index-header)}.resize-handle:active .resize-handle-bar,.resize-handle:hover .resize-handle-bar{color:var(--calcite-shell-panel-resize-icon-color, var(--calcite-color-text-1));background-color:var(--calcite-shell-panel-resize-background-color, var(--calcite-color-foreground-3))}.resize-handle-bar{pointer-events:none;display:flex;align-items:center;justify-content:center;color:var(--calcite-shell-panel-resize-icon-color, var(--calcite-color-border-input));background-color:var(--calcite-shell-panel-resize-background-color, var(--calcite-color-background))}.resize-handle:focus .resize-handle-bar{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline-color:transparent;outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus)}:host([position=start][layout=vertical]) .resize-handle{inline-size:var(--calcite-size-fixed-xxl);inset-inline-end:var(--calcite-internal-shell-panel-resize-handle-offset);block-size:100%}:host([position=start][layout=vertical]) .resize-handle-bar{block-size:100%;inline-size:var(--calcite-size-fixed-sm-plus);border-inline-start:var(--calcite-border-width-sm) solid var(--calcite-shell-border-color, var(--calcite-color-border-3))}:host([position=start][layout=vertical]):host([display-mode^=float]) .resize-handle-bar{border-start-end-radius:var(--calcite-shell-panel-corner-radius, var(--calcite-corner-radius-round));border-end-end-radius:var(--calcite-shell-panel-corner-radius, var(--calcite-corner-radius-round))}:host([position=end][layout=vertical]) .resize-handle{inline-size:var(--calcite-size-fixed-xxl);inset-inline-start:var(--calcite-internal-shell-panel-resize-handle-offset);block-size:100%}:host([position=end][layout=vertical]) .resize-handle-bar{block-size:100%;inline-size:var(--calcite-size-fixed-sm-plus);border-inline-end:var(--calcite-border-width-sm) solid var(--calcite-shell-border-color, var(--calcite-color-border-3))}:host([position=end][layout=vertical]):host([display-mode^=float]) .resize-handle-bar{border-start-start-radius:var(--calcite-shell-panel-corner-radius, var(--calcite-corner-radius-round));border-end-start-radius:var(--calcite-shell-panel-corner-radius, var(--calcite-corner-radius-round))}:host([position=start][layout=horizontal]) .resize-handle{block-size:var(--calcite-size-fixed-xxl);inline-size:100%;inset-block-end:var(--calcite-internal-shell-panel-resize-handle-offset)}:host([position=start][layout=horizontal]) .resize-handle-bar{inline-size:100%;block-size:var(--calcite-size-fixed-sm-plus);border-block-start:var(--calcite-border-width-sm) solid var(--calcite-shell-border-color, var(--calcite-color-border-3))}:host([position=start][layout=horizontal]):host([display-mode^=float]) .resize-handle-bar{border-end-end-radius:var(--calcite-shell-panel-corner-radius, var(--calcite-corner-radius-round));border-end-start-radius:var(--calcite-shell-panel-corner-radius, var(--calcite-corner-radius-round))}:host([position=end][layout=horizontal]) .resize-handle{block-size:var(--calcite-size-fixed-xxl);inline-size:100%;inset-block-start:var(--calcite-internal-shell-panel-resize-handle-offset)}:host([position=end][layout=horizontal]) .resize-handle-bar{inline-size:100%;block-size:var(--calcite-size-fixed-sm-plus);border-block-end:var(--calcite-border-width-sm) solid var(--calcite-shell-border-color, var(--calcite-color-border-3))}:host([position=end][layout=horizontal]):host([display-mode^=float]) .resize-handle-bar{border-start-start-radius:var(--calcite-shell-panel-corner-radius, var(--calcite-corner-radius-round));border-start-end-radius:var(--calcite-shell-panel-corner-radius, var(--calcite-corner-radius-round))}::slotted(calcite-panel),::slotted(calcite-flow){block-size:100%;inline-size:100%;flex:1 1 auto;max-block-size:unset;max-inline-size:unset}::slotted(.calcite-match-height){display:flex;flex:1 1 auto;overflow:hidden}.action-bar-container{pointer-events:auto;box-sizing:border-box;display:flex;flex:1 1 auto}.content-container{position:relative;box-sizing:border-box;display:flex;block-size:100%;inline-size:100%;flex:1 1 auto;align-items:stretch;align-self:stretch}:host([layout=horizontal]) .action-bar-container,:host([layout=horizontal]) .content-container{flex-direction:column}.content{pointer-events:auto;position:relative;box-sizing:border-box;display:flex;flex:1 1 auto;flex-direction:column;flex-wrap:nowrap;align-items:stretch;align-self:stretch;padding:0;background-color:var(--calcite-shell-panel-background-color, var(--calcite-color-background));transition:max-block-size var(--calcite-animation-timing),max-inline-size var(--calcite-animation-timing)}:host([layout=vertical]:not([display-mode=float-all])) .content{inline-size:var(--calcite-internal-shell-panel-width);max-inline-size:var(--calcite-internal-shell-panel-max-width);min-inline-size:var(--calcite-internal-shell-panel-min-width)}:host([layout=vertical][display-mode=float-all]) .content{inline-size:var(--calcite-internal-shell-panel-width);min-inline-size:var(--calcite-internal-shell-panel-min-width)}:host([layout=horizontal]) .content{block-size:var(--calcite-internal-shell-panel-height);max-block-size:var(--calcite-internal-shell-panel-max-height);min-block-size:var(--calcite-internal-shell-panel-min-height)}:host([resizable][layout=vertical][position=start]) .content{padding-inline-end:var(--calcite-size-fixed-sm-plus)}:host([resizable][layout=vertical][position=end]) .content{padding-inline-start:var(--calcite-size-fixed-sm-plus)}:host([resizable][layout=horizontal][position=start]) .content{padding-block-end:var(--calcite-size-fixed-sm-plus)}:host([resizable][layout=horizontal][position=end]) .content{padding-block-start:var(--calcite-size-fixed-sm-plus)}.content__header{display:flex;flex:0 1 auto;flex-direction:column;flex-wrap:nowrap;align-items:stretch}.content__body{display:flex;flex:1 1 auto;flex-direction:column;overflow:hidden}.content--overlay{position:absolute;--tw-shadow: 0 4px 8px -1px rgba(0, 0, 0, .08), 0 2px 4px -1px rgba(0, 0, 0, .04);--tw-shadow-colored: 0 4px 8px -1px var(--tw-shadow-color), 0 2px 4px -1px var(--tw-shadow-color);box-shadow:var(--calcite-shell-panel-shadow, var(--tw-ring-offset-shadow, 0 0 rgba(0, 0, 0, 0)), var(--tw-ring-shadow, 0 0 rgba(0, 0, 0, 0)), var(--tw-shadow))}:host([layout=vertical]) .content--overlay{inset-block-start:0px;block-size:100%}:host([layout=horizontal]) .content--overlay{inset-inline-start:0px;inline-size:100%}:host([layout=vertical][position=start]) .content--overlay{inset-inline-start:100%;box-shadow:var(--calcite-internal-shell-panel-shadow-inline-start)}:host([layout=vertical][position=end]) .content--overlay{inset-inline-end:100%;box-shadow:var(--calcite-internal-shell-panel-shadow-inline-end)}:host([layout=horizontal][position=start]) .content--overlay{inset-block-start:100%;box-shadow:var(--calcite-internal-shell-panel-shadow-block-start)}:host([layout=horizontal][position=end]) .content--overlay{inset-block-end:100%;box-shadow:var(--calcite-internal-shell-panel-shadow-block-end)}.float--content{margin-block-end:auto;block-size:auto;overflow:hidden;--tw-shadow: 0 4px 8px -1px rgba(0, 0, 0, .08), 0 2px 4px -1px rgba(0, 0, 0, .04);--tw-shadow-colored: 0 4px 8px -1px var(--tw-shadow-color), 0 2px 4px -1px var(--tw-shadow-color);box-shadow:var(--calcite-shell-panel-shadow, var(--tw-ring-offset-shadow, 0 0 rgba(0, 0, 0, 0)), var(--tw-ring-shadow, 0 0 rgba(0, 0, 0, 0)), var(--tw-shadow));border-radius:var(--calcite-shell-panel-corner-radius, var(--calcite-corner-radius-round));margin-inline:var(--calcite-spacing-sm);margin-block-start:var(--calcite-spacing-sm);max-block-size:var(--calcite-internal-shell-panel-max-height, calc(100% - 1rem) )}.float--content ::slotted(calcite-panel),.float--content ::slotted(calcite-flow){max-block-size:unset}:host([layout=horizontal]) .float--content{margin-block:var(--calcite-spacing-sm)}:host([position=start]) .float--content ::slotted(calcite-panel),:host([position=start]) .float--content ::slotted(calcite-flow),:host([position=end]) .float--content ::slotted(calcite-panel),:host([position=end]) .float--content ::slotted(calcite-flow){border-style:none}slot[name=action-bar]::slotted(calcite-action-bar),.content ::slotted(calcite-flow),.content ::slotted(calcite-panel:not([closed])){border:var(--calcite-border-width-sm) solid var(--calcite-shell-border-color, var(--calcite-color-border-3))}:host([position=start]:not([slot=panel-end])) slot[name=action-bar]::slotted(calcite-action-bar),:host([position=start]:not([slot=panel-end])) .content ::slotted(calcite-flow),:host([position=start]:not([slot=panel-end])) .content ::slotted(calcite-panel),:host([position=end][slot=panel-start]) slot[name=action-bar]::slotted(calcite-action-bar),:host([position=end][slot=panel-start]) .content ::slotted(calcite-flow),:host([position=end][slot=panel-start]) .content ::slotted(calcite-panel){border-inline-start:none}:host([resizable][layout=vertical]) .content ::slotted(calcite-flow),:host([resizable][layout=vertical]) .content ::slotted(calcite-panel){border-inline-start:none;border-inline-end:none}:host([resizable][layout=horizontal]) .content ::slotted(calcite-flow),:host([resizable][layout=horizontal]) .content ::slotted(calcite-panel){border-block-start:none;border-block-end:none}:host([position=end]:not([slot=panel-start])) slot[name=action-bar]::slotted(calcite-action-bar),:host([position=end]:not([slot=panel-start])) .content ::slotted(calcite-flow),:host([position=end]:not([slot=panel-start])) .content ::slotted(calcite-panel),:host([position=start][slot=panel-end]) slot[name=action-bar]::slotted(calcite-action-bar),:host([position=start][slot=panel-end]) .content ::slotted(calcite-flow),:host([position=start][slot=panel-end]) .content ::slotted(calcite-panel){border-inline-end:none}:host([layout=horizontal]) slot[name=action-bar]::slotted(calcite-action-bar){border-inline:0}:host([layout=horizontal][position=start]) .content ::slotted(calcite-flow),:host([layout=horizontal][position=start]) .content ::slotted(calcite-panel){border-inline:0;border-block-start:0}:host([layout=horizontal][position=end]) .content ::slotted(calcite-flow),:host([layout=horizontal][position=end]) .content ::slotted(calcite-panel){border-inline:0;border-block-end:0}:host([hidden]){display:none}[hidden]{display:none}`,TN=class TN extends dt{constructor(){super(...arguments),this.actionBars=[],this.contentRef=vi(),this.messages=un(),this.resizeValues={inlineSize:null,blockSize:null,minInlineSize:null,minBlockSize:null,maxInlineSize:null,maxBlockSize:null},this.hasHeader=!1,this.collapsed=!1,this.displayMode="dock",this.layout="vertical",this.position="start",this.resizable=!1,this.widthScale="m",this.calciteInternalShellPanelResizeEnd=Re({cancelable:!1}),this.calciteInternalShellPanelResizeStart=Re({cancelable:!1}),this.calciteShellPanelCollapse=Re({cancelable:!1}),this.calciteShellPanelExpand=Re({cancelable:!1})}willUpdate(e){e.has("layout")&&(this.hasUpdated||this.layout!=="vertical")&&this.setActionBarsLayout(this.actionBars),e.has("collapsed")&&this.hasUpdated&&(this.collapsed?this.calciteShellPanelCollapse.emit():this.calciteShellPanelExpand.emit())}disconnectedCallback(){super.disconnectedCallback(),this.cleanupInteractions()}getContentElDOMRect(){return this.contentRef.value.getBoundingClientRect()}handleKeyDown(e){const{key:i,defaultPrevented:r,shiftKey:n}=e,{position:s,layout:a,resizable:o,contentRef:l,el:c,resizeValues:{maxBlockSize:h,maxInlineSize:m,minBlockSize:g,minInlineSize:v}}=this,x=[...a==="horizontal"?["ArrowUp","ArrowDown"]:["ArrowLeft","ArrowRight"],"Home","End"];if(!o||!l.value||r||!x.includes(i))return;const $=this.getContentElDOMRect(),M=Uo(c)==="rtl"?-1:1,k=n?oEe:aEe;switch(i){case"ArrowUp":this.updateSize({size:$.height+(a==="horizontal"&&s==="end"?k:-k),type:"blockSize"}),e.preventDefault();break;case"ArrowDown":this.updateSize({size:$.height+(a==="horizontal"&&s==="end"?-k:k),type:"blockSize"}),e.preventDefault();break;case"ArrowLeft":this.updateSize({size:$.width+(a==="vertical"&&s==="end"?k:-k)*M,type:"inlineSize"}),e.preventDefault();break;case"ArrowRight":this.updateSize({size:$.width+(a==="vertical"&&s==="end"?-k:k)*M,type:"inlineSize"}),e.preventDefault();break;case"Home":this.updateSize({size:a==="horizontal"?g:v,type:a==="horizontal"?"blockSize":"inlineSize"}),e.preventDefault();break;case"End":this.updateSize({size:a==="horizontal"?h:m,type:a==="horizontal"?"blockSize":"inlineSize"}),e.preventDefault();break}}updateSize({type:e,size:i}){const{contentRef:r,resizeValues:n}=this;if(!r.value)return;const s=e==="blockSize"?"minBlockSize":"minInlineSize",a=e==="blockSize"?"maxBlockSize":"maxInlineSize",o=n[s]&&n[a]?bTe(i,n[s],n[a]):i,l=Math.round(o);this.resizeValues={...n,[e]:l},r.value.style[e]=i!==null?`${l}px`:null}cleanupInteractions(){var e;(e=this.interaction)==null||e.unset()}async setupInteractions(){this.cleanupInteractions();const{el:e,contentRef:i,resizable:r,position:n,collapsed:s,resizeHandleEl:a,layout:o}=this;if(!i.value||s||!r||!a)return;await this.el.componentOnReady();const{inlineSize:l,minInlineSize:c,blockSize:h,minBlockSize:m,maxInlineSize:g,maxBlockSize:v}=window.getComputedStyle(i.value),b={inlineSize:g1(l),blockSize:g1(h),minInlineSize:g1(c),minBlockSize:g1(m),maxInlineSize:g1(g)||window.innerWidth,maxBlockSize:g1(v)||window.innerHeight};this.resizeValues=b;const x=Uo(e)==="rtl";this.interaction=Wce(i.value,{context:e.ownerDocument}).resizable({edges:{top:n==="end"&&o==="horizontal"?a:!1,right:n===(x?"end":"start")&&o==="vertical"?a:!1,bottom:n==="start"&&o==="horizontal"?a:!1,left:n===(x?"start":"end")&&o==="vertical"?a:!1},modifiers:[Wce.modifiers.restrictSize({min:{width:b.minInlineSize,height:b.minBlockSize},max:{width:b.maxInlineSize,height:b.maxBlockSize}})],listeners:{resizestart:()=>{this.calciteInternalShellPanelResizeStart.emit()},resizeend:()=>{this.calciteInternalShellPanelResizeEnd.emit()},move:({rect:$})=>{const M=o==="horizontal";this.updateSize({size:M?$.height:$.width,type:M?"blockSize":"inlineSize"})}}})}setResizeHandleEl(e){this.resizeHandleEl=e,this.setupInteractions()}setActionBarsLayout(e){e.forEach(i=>i.layout=this.layout)}handleActionBarSlotChange(e){const i=fu(e).filter(r=>r==null?void 0:r.matches("calcite-action-bar"));this.actionBars=i,this.setActionBarsLayout(i)}handleHeaderSlotChange(e){this.hasHeader=ii(e)}getResizeIcon(){const{layout:e}=this;return e==="horizontal"?Jce.dragVertical:Jce.dragHorizontal}renderHeader(){return nt("header",q`<div class=${H(Qu.contentHeader)} .hidden=${!this.hasHeader}><slot name=${Yce.header} @slotchange=${this.handleHeaderSlotChange}></slot></div>`)}render(){const{collapsed:e,position:i,resizable:r,layout:n,displayMode:s,resizeValues:a}=this,o=Uo(this.el),l=!e&&r?nt("resize-handle",q`<div .ariaLabel=${this.messages.resize} .ariaOrientation=${n==="horizontal"?"vertical":"horizontal"} .ariaValueMax=${n=="horizontal"?a.maxBlockSize:a.maxInlineSize} .ariaValueMin=${n=="horizontal"?a.minBlockSize:a.minInlineSize} .ariaValueNow=${n=="horizontal"?a.blockSize:a.inlineSize} class=${H(Qu.resizeHandle)} @keydown=${this.handleKeyDown} role=separator tabindex=0 touch-action=none ${gt(this.setResizeHandleEl)}><div class=${H(Qu.resizeHandleBar)}><calcite-icon .icon=${this.getResizeIcon()} scale=s></calcite-icon></div></div>`):null,c=()=>n==="horizontal"?i==="start"?Uh.calciteAnimateInDown:Uh.calciteAnimateInUp:o==="ltr"&&i==="end"||o==="rtl"&&i==="start"?Uh.calciteAnimateInLeft:Uh.calciteAnimateInRight,h=q`<div class=${H(Qu.contentContainer)}>${nt("content",q`<div class=${H({[Uh.rtl]:o==="rtl",[Qu.content]:!0,[Qu.contentOverlay]:s==="overlay",[Qu.floatContent]:s==="float-content"||s==="float",[Uh.calciteAnimate]:s==="overlay",[c()]:s==="overlay",[mG("width",this.width,this.widthScale)]:!!(this.width||this.widthScale),[mG("height",this.height,this.heightScale)]:!!(this.height||this.heightScale)})} .hidden=${e} ${gt(this.contentRef)}>${this.renderHeader()}<div class=${H(Qu.contentBody)}><slot></slot></div>${l}</div>`)}</div>`,g=[nt("action-bar-container",q`<div class=${H(Qu.actionBarContainer)}><slot name=${Yce.actionBar} @slotchange=${this.handleActionBarSlotChange}></slot></div>`),h];return i==="end"&&g.reverse(),q`<div class=${H({[Qu.container]:!0,[Qu.floatAll]:s==="float-all"})}>${g}</div>`}};TN.properties={resizeValues:[16,{},{state:!0}],hasHeader:[16,{},{state:!0}],collapsed:[7,{},{reflect:!0,type:Boolean}],displayMode:[3,{},{reflect:!0}],heightScale:[3,{},{reflect:!0}],layout:[3,{},{reflect:!0}],messageOverrides:[0,{},{attribute:!1}],position:[3,{},{reflect:!0}],resizable:[7,{},{reflect:!0,type:Boolean}],height:[3,{},{reflect:!0}],widthScale:[3,{},{reflect:!0}],width:[3,{},{reflect:!0}]},TN.styles=Gut;let gG=TN;ci("calcite-shell-panel",gG);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Wut=ct`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{position:relative;display:block;inline-size:100%}.track,.bar{position:absolute;inset-block-start:0px;block-size:2px}.track{z-index:var(--calcite-z-index);inline-size:100%;overflow:hidden;background-color:var(--calcite-progress-background-color, var(--calcite-color-border-3))}.bar{z-index:var(--calcite-z-index);background-color:var(--calcite-progress-fill-color, var(--calcite-color-brand))}@media (forced-colors: active){.track{background-color:highlightText}.bar{background-color:linkText}}.indeterminate{inline-size:20%;animation:looping-progress-bar-ani calc(var(--calcite-internal-animation-timing-medium) / var(--calcite-internal-duration-factor) * 11 / var(--calcite-internal-duration-factor)) linear infinite}.indeterminate.calcite--rtl{animation-name:looping-progress-bar-ani-rtl}.reversed{animation-direction:reverse}.text{padding-inline:0px;padding-block:1rem 0px;text-align:center;font-size:var(--calcite-font-size--2);line-height:1rem;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-progress-text-color, var(--calcite-color-text-2))}@keyframes looping-progress-bar-ani{0%{transform:translate3d(-100%,0,0)}50%{inline-size:40%}to{transform:translate3d(600%,0,0)}}@keyframes looping-progress-bar-ani-rtl{0%{transform:translate3d(100%,0,0)}50%{inline-size:40%}to{transform:translate3d(-600%,0,0)}}:host([hidden]){display:none}[hidden]{display:none}`,DU={track:"track",bar:"bar",text:"text"},IN=class IN extends dt{constructor(){super(...arguments),this.reversed=!1,this.type="determinate",this.value=0}render(){const e=this.type==="determinate",i=e?{width:`${this.value}%`}:{},r=Uo(this.el);return q`<div .ariaLabel=${this.label||this.text} .ariaValueMax=${e?"100":void 0} .ariaValueMin=${e?"0":void 0} .ariaValueNow=${e?this.value:void 0} role=progressbar><div class=${H(DU.track)}><div class=${H({[DU.bar]:!0,indeterminate:this.type==="indeterminate",[Uh.rtl]:r==="rtl",reversed:this.reversed})} style=${qt(i)}></div></div>${this.text?q`<div class=${H(DU.text)}>${this.text}</div>`:null}</div>`}};IN.properties={label:1,reversed:[7,{},{reflect:!0,type:Boolean}],text:1,type:[3,{},{reflect:!0}],value:[9,{},{type:Number}]},IN.styles=Wut;let yG=IN;ci("calcite-progress",yG);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Xce=(t,e,i)=>{const r=new Map;for(let n=e;n<=i;n++)r.set(t[n],n);return r},Zut=xT(class extends $T{constructor(t){if(super(t),t.type!==Vh.CHILD)throw Error("repeat() can only be used in text expressions")}dt(t,e,i){let r;i===void 0?i=e:e!==void 0&&(r=e);const n=[],s=[];let a=0;for(const o of t)n[a]=r?r(o,a):a,s[a]=i(o,a),a++;return{values:s,keys:n}}render(t,e,i){return this.dt(t,e,i).values}update(t,[e,i,r]){const n=J2e(t),{values:s,keys:a}=this.dt(e,i,r);if(!Array.isArray(n))return this.ut=a,s;const o=this.ut??(this.ut=[]),l=[];let c,h,m=0,g=n.length-1,v=0,b=s.length-1;for(;m<=g&&v<=b;)if(n[m]===null)m++;else if(n[g]===null)g--;else if(o[m]===a[v])l[v]=Sb(n[m],s[v]),m++,v++;else if(o[g]===a[b])l[b]=Sb(n[g],s[b]),g--,b--;else if(o[m]===a[b])l[b]=Sb(n[m],s[b]),nM(t,l[b+1],n[m]),m++,b--;else if(o[g]===a[v])l[v]=Sb(n[g],s[v]),nM(t,n[m],n[g]),g--,v++;else if(c===void 0&&(c=Xce(a,v,b),h=Xce(o,m,g)),c.has(o[m]))if(c.has(o[g])){const x=h.get(a[v]),$=x!==void 0?n[x]:null;if($===null){const M=nM(t,n[m]);Sb(M,s[v]),l[v]=M}else l[v]=Sb($,s[v]),nM(t,n[m],$),n[x]=null;v++}else xV(n[g]),g--;else xV(n[m]),m++;for(;v<=b;){const x=nM(t,l[b+1]);Sb(x,s[v]),l[v++]=x}for(;m<=g;){const x=n[m++];x!==null&&xV(x)}return this.ut=a,bW(t,l),vc}});/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Yut={max:"320px"},Jut={max:"476px"},Xut={max:"768px"};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const jU={width:{small:VU(Xut.max),xsmall:VU(Jut.max),xxsmall:VU(Yut.max)}};function VU(t){return parseInt(t)}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Qut=6e3,Pn={container:"container",containerOverlaid:"container--overlaid",containerEdged:"container--edged",itemContainer:"item-container",itemContainerForward:"item-container--forward",itemContainerBackward:"item-container--backward",pagination:"pagination",paginationItems:"pagination-items",paginationItem:"pagination-item",paginationItemIndividual:"pagination-item--individual",paginationItemVisible:"pagination-item--visible",paginationItemOutOfRange:"pagination-item--out-of-range",paginationItemSelected:"pagination-item--selected",paginationItemRangeEdge:"pagination-item--range-edge",pageNext:"page-next",pagePrevious:"page-previous",autoplayControl:"autoplay-control",autoplayProgress:"autoplay-progress"},q1={chevronLeft:"chevron-left",chevronRight:"chevron-right",inactive:"bullet-point",active:"bullet-point-large",pause:"pause-f",play:"play-f"},FM={medium:7,small:5,xsmall:3,xxsmall:1},Kut="calcite-carousel-container",edt={host:t=>`${Kut}-${t}`},tdt=ct`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex;inline-size:100%;--calcite-internal-carousel-pagination-space: 1.5rem;--calcite-internal-carousel-pagination-space-wide: 3.5rem;--calcite-internal-carousel-pagination-background-color: var( --calcite-carousel-pagination-background-color, transparent );--calcite-internal-carousel-pagination-background-color-hover: var( --calcite-carousel-pagination-background-color-hover, transparent );--calcite-internal-carousel-pagination-background-color-press: var( --calcite-carousel-pagination-background-color-press, transparent );--calcite-internal-carousel-pagination-background-color-selected: var( --calcite-carousel-pagination-background-color-selected, transparent );--calcite-internal-carousel-pagination-overlay-background-color: var( --calcite-carousel-pagination-background-color, var(--calcite-color-foreground-1) );--calcite-internal-carousel-pagination-overlay-background-color-hover: var( --calcite-carousel-pagination-background-color-hover, var(--calcite-color-foreground-2) );--calcite-internal-carousel-pagination-overlay-background-color-active: var( --calcite-carousel-pagination-background-color-press, var(--calcite-color-foreground-2) );--calcite-internal-carousel-pagination-overlay-background-color-selected: var( --calcite-carousel-pagination-background-color-selected, var(--calcite-color-foreground-1) );--calcite-internal-carousel-pagination-icon-color-hover: var( --calcite-carousel-pagination-icon-color-hover, var(--calcite-color-text-1) );--calcite-internal-carousel-pagination-icon-color: var( --calcite-carousel-pagination-icon-color, var(--calcite-color-border-1) );--calcite-internal-carousel-pagination-icon-color-selected: var( --calcite-carousel-pagination-icon-color-selected, var(--calcite-color-brand) );--calcite-internal-carousel-control-icon-color-hover: var( --calcite-carousel-control-icon-color-hover, var(--calcite-internal-carousel-pagination-icon-color-hover) );--calcite-internal-carousel-control-icon-color: var( --calcite-carousel-control-icon-color, var(--calcite-carousel-pagination-icon-color, var(--calcite-color-text-3)) );--calcite-internal-carousel-autoplay-progress-background-color: var( --calcite-carousel-autoplay-progress-background-color, var(--calcite-color-border-3) );--calcite-internal-carousel-autoplay-progress-fill-color: var( --calcite-carousel-autoplay-progress-fill-color, var(--calcite-color-brand) );--calcite-internal-carousel-autoplay-control-color: var( --calcite-carousel-pagination-icon-color, var(--calcite-color-text-3) )}.container{position:relative;display:flex;inline-size:100%;flex-direction:column;overflow:hidden;font-size:var(--calcite-font-size--1);line-height:1rem;color:var(--calcite-color-text-2);outline-color:transparent}.container:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.container--edged:not(.container--overlaid){padding-inline:var(--calcite-internal-carousel-pagination-space-wide);inline-size:calc(100% - var(--calcite-internal-carousel-pagination-space-wide) * 2)}.item-container{display:flex;flex:1 1 auto;align-items:flex-start;justify-content:center;overflow:auto;padding:.25rem;animation-name:none;animation-duration:var(--calcite-animation-timing)}.container--overlaid .item-container{padding:0}.item-container--forward{animation-name:item-forward}.item-container--backward{animation-name:item-backward}calcite-carousel-item:not([selected]){opacity:0}.pagination{margin:.75rem;display:flex;flex-direction:row;align-items:center;justify-content:center;inline-size:auto}.pagination-items{display:flex;flex-direction:row;align-items:center}.container--overlaid .pagination{position:absolute}.pagination-item.page-next,.pagination-item.page-previous{color:var(--calcite-internal-carousel-control-icon-color);--calcite-icon-color: var(--calcite-internal-carousel-control-icon-color)}.pagination-item.page-next:hover,.pagination-item.page-previous:hover{color:var(--calcite-internal-carousel-control-icon-color-hover);--calcite-icon-color: var(--calcite-internal-carousel-control-icon-color-hover)}.container--edged .page-next,.container--edged .page-previous{block-size:3rem;inline-size:3rem;position:absolute;inset-block-start:50%;transform:translateY(-50%)}.container--edged .page-next{inset-inline-end:0}.container--edged .page-previous{inset-inline-start:0}.container--overlaid .pagination{inset-block-start:unset;inset-block-end:0;inset-inline:0}.pagination-item.autoplay-control{position:relative;color:var(--calcite-internal-carousel-autoplay-control-color);--calcite-progress-fill-color: var(--calcite-internal-carousel-autoplay-progress-fill-color);--calcite-progress-background-color: var(--calcite-internal-carousel-autoplay-progress-background-color)}.autoplay-control:focus .autoplay-progress{inset-block-end:4px;inset-inline:2px;inline-size:calc(100% - 4px)}.autoplay-progress{position:absolute;inset-block-end:2px;inset-inline:0;inline-size:100%}.pagination-item{margin:0;block-size:2rem;inline-size:2rem;cursor:pointer;align-items:center;border-style:none;background-color:transparent;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;outline-color:transparent;-webkit-appearance:none;display:flex;align-content:center;justify-content:center;background-color:var(--calcite-internal-carousel-pagination-background-color);color:var(--calcite-internal-carousel-pagination-icon-color)}.pagination-item:hover{background-color:var(--calcite-internal-carousel-pagination-background-color-hover);color:var(--calcite-internal-carousel-pagination-icon-color-hover)}.pagination-item:focus{background-color:var(--calcite-internal-carousel-pagination-background-color-press);outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.pagination-item:active{background-color:var(--calcite-internal-carousel-pagination-background-color-press);color:var(--calcite-internal-carousel-pagination-icon-color-hover)}.pagination-item calcite-icon{color:inherit;pointer-events:none}.pagination-item.pagination-item--selected{background-color:var(--calcite-internal-carousel-pagination-background-color-selected);color:var(--calcite-internal-carousel-pagination-icon-color-selected)}.pagination-item--individual{pointer-events:none;inline-size:0px;padding:0;opacity:0;visibility:hidden;transition:var(--calcite-animation-timing) ease-in-out inline-size,var(--calcite-animation-timing) ease-in-out padding,var(--calcite-animation-timing) ease-in-out opacity}.pagination-item--individual.pagination-item--visible{pointer-events:auto;inline-size:2rem;opacity:1;visibility:visible}.pagination-item--range-edge calcite-icon{scale:.75;transition:var(--calcite-animation-timing) ease-in-out scale}.container--overlaid .pagination-item{background-color:var(--calcite-internal-carousel-pagination-overlay-background-color)}.container--overlaid .pagination-item:hover{background-color:var(--calcite-internal-carousel-pagination-overlay-background-color-hover)}.container--overlaid .pagination-item:focus{background-color:var(--calcite-internal-carousel-pagination-overlay-background-color-active)}.container--overlaid .pagination-item:active{background-color:var(--calcite-internal-carousel-pagination-overlay-background-color-active)}.container--overlaid .pagination-item.pagination-item--selected{background-color:var(--calcite-internal-carousel-pagination-overlay-background-color-selected);color:var(--calcite-internal-carousel-pagination-icon-color-selected)}@keyframes item-forward{0%{transform:translate3d(100px,0,0)}to{transform:translateZ(0)}}@keyframes item-backward{0%{transform:translate3d(-100px,0,0)}to{transform:translateZ(0)}}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host([hidden]){display:none}[hidden]{display:none}`,MN=class MN extends dt{constructor(){super(...arguments),this.autoplayHandler=()=>{this.clearIntervals(),this.slideDurationInterval=setInterval(this.timer,this.autoplayDuration/100)},this.containerRef=vi(),this.containerId=edt.host(Mc()),this.itemContainerRef=vi(),this.resizeHandler=({contentRect:{width:e}})=>{this.setMaxItemsToBreakpoint(e)},this.resizeObserver=Gn("resize",e=>e.forEach(this.resizeHandler)),this.slideDurationInterval=null,this.slideInterval=null,this.tabListRef=vi(),this.timer=()=>{let e=this.slideDurationRemaining;(!this.suspendedDueToFocus&&!this.suspendedDueToHover||this.userPreventsSuspend)&&(e<=.01?(e=1,this.direction="forward",this.nextItem(!1)):e=e-.01),e>0&&(this.slideDurationRemaining=e)},this.messages=un(),this.focusSetter=dn()(this),this.direction="standby",this.items=[],this.maxItems=FM.xxsmall,this.playing=!1,this.slideDurationRemaining=1,this.suspendedDueToFocus=!1,this.suspendedDueToHover=!1,this.suspendedSlideDurationRemaining=1,this.userPreventsSuspend=!1,this.arrowType="inline",this.autoplay=!1,this.autoplayDuration=Qut,this.controlOverlay=!1,this.disabled=!1,this.calciteCarouselChange=Re({cancelable:!1}),this.calciteCarouselPause=Re({cancelable:!1}),this.calciteCarouselPlay=Re({cancelable:!1}),this.calciteCarouselResume=Re({cancelable:!1}),this.calciteCarouselStop=Re({cancelable:!1})}async play(){this.playing||this.autoplay!==""&&!this.autoplay&&this.autoplay!=="paused"||this.handlePlay(!0)}async setFocus(e){return this.focusSetter(()=>this.containerRef.value,e)}async stop(){this.playing&&this.handlePause(!0)}connectedCallback(){var e;super.connectedCallback(),(e=this.resizeObserver)==null||e.observe(this.el)}async load(){(this.autoplay===""||this.autoplay)&&this.autoplay!=="paused"?this.handlePlay(!1):this.autoplay==="paused"&&(this.paused=!0)}willUpdate(e){e.has("autoplay")&&this.hasUpdated&&this.autoplayWatcher(this.autoplay),e.has("direction")&&(this.hasUpdated||this.direction!=="standby")&&this.directionWatcher(this.direction),e.has("playing")&&(this.hasUpdated||this.playing!==!1)&&(this.paused=!this.playing),(e.has("suspendedDueToFocus")&&(this.hasUpdated||this.suspendedDueToFocus!==!1)||e.has("suspendedDueToHover")&&(this.hasUpdated||this.suspendedDueToHover!==!1))&&this.suspendWatcher()}updated(){Vs(this)}disconnectedCallback(){var e;super.disconnectedCallback(),this.clearIntervals(),(e=this.resizeObserver)==null||e.disconnect()}autoplayWatcher(e){e||this.handlePause(!1)}async directionWatcher(e){e==="standby"||!this.itemContainerRef.value||(await bhe(this.itemContainerRef.value,e==="forward"?"item-forward":"item-backward"),this.direction="standby")}suspendWatcher(){!this.suspendedDueToFocus&&!this.suspendedDueToHover?this.suspendEnd():this.suspendStart()}setMaxItemsToBreakpoint(e){if(e){if(e>=jU.width.small){this.maxItems=FM.medium;return}if(e>=jU.width.xsmall){this.maxItems=FM.small;return}if(e>=jU.width.xxsmall){this.maxItems=FM.xsmall;return}this.maxItems=FM.xxsmall}}clearIntervals(){clearInterval(this.slideDurationInterval),clearInterval(this.slideInterval)}nextItem(e){this.playing&&e&&(this.playing=!1);const i=Cz(this.selectedIndex+1,this.items.length);this.setSelectedItem(i,e)}previousItem(){this.playing=!1;const e=Cz(Math.max(this.selectedIndex-1,-1),this.items.length);this.setSelectedItem(e,!0)}handlePlay(e){this.playing=!0,this.autoplayHandler(),this.slideInterval=setInterval(this.autoplayHandler,this.autoplayDuration),e&&this.calciteCarouselPlay.emit()}handlePause(e){this.playing=!1,this.clearIntervals(),this.slideDurationRemaining=1,this.suspendedSlideDurationRemaining=1,e&&this.calciteCarouselStop.emit()}suspendStart(){this.suspendedSlideDurationRemaining=this.slideDurationRemaining}suspendEnd(){this.slideDurationRemaining=this.suspendedSlideDurationRemaining}handleSlotChange(e){const i=fu(e);if(i.length<1)return;const r=i.findIndex(s=>s.selected),n=r>-1?r:0;this.items=i,this.setSelectedItem(n,!1)}setSelectedItem(e,i){const r=this.selectedIndex;this.items.forEach((n,s)=>{const a=e===s;n.selected=a,a&&(this.selectedItem=n,this.selectedIndex=s)}),i&&(this.playing=!1,r!==this.selectedIndex&&this.calciteCarouselChange.emit())}handleArrowClick(e){const i=e.target.dataset.direction;this.playing&&this.handlePause(!0),i==="next"?(this.direction="forward",this.nextItem(!0)):i==="previous"&&(this.direction="backward",this.previousItem())}handleItemSelection(e){const i=e.target,r=parseInt(i.dataset.index);r!==this.selectedIndex&&(this.playing&&this.handlePause(!0),this.direction=r>this.selectedIndex?"forward":"backward",this.setSelectedItem(r,!0))}toggleRotation(){this.userPreventsSuspend=!0,this.playing?this.handlePause(!0):this.handlePlay(!0)}handleFocusIn(){const e=this.playing;e&&(this.suspendedDueToFocus=!0),(!this.suspendedDueToFocus||!this.suspendedDueToHover)&&e&&this.calciteCarouselPause.emit()}handleMouseIn(){const e=this.playing;e&&(this.suspendedDueToHover=!0),(!this.suspendedDueToFocus||!this.suspendedDueToHover)&&e&&this.calciteCarouselPause.emit()}handleMouseOut(e){const i=!this.el.contains(e.relatedTarget),r=this.playing;i&&r&&(this.suspendedDueToHover=!1),i&&r&&!this.suspendedDueToFocus&&(this.userPreventsSuspend=!1,this.calciteCarouselResume.emit())}handleFocusOut(e){const i=!e.composedPath().includes(e.relatedTarget),r=this.playing;i&&r&&(this.suspendedDueToFocus=!1),i&&r&&!this.suspendedDueToHover&&(this.userPreventsSuspend=!1,this.calciteCarouselResume.emit())}containerKeyDownHandler(e){if(e.target!==this.containerRef.value)return;const i=this.items.length-1;switch(e.key){case" ":case"Enter":e.preventDefault(),(this.autoplay===""||this.autoplay||this.autoplay==="paused")&&this.toggleRotation();break;case"ArrowRight":e.preventDefault(),this.direction="forward",this.nextItem(!0);break;case"ArrowLeft":e.preventDefault(),this.direction="backward",this.previousItem();break;case"Home":if(e.preventDefault(),this.selectedIndex===0)return;this.direction="backward",this.setSelectedItem(0,!0);break;case"End":if(e.preventDefault(),this.selectedIndex===i)return;this.direction="forward",this.setSelectedItem(i,!0);break}}tabListKeyDownHandler(e){const i=Array(...this.tabListRef.value.querySelectorAll(`button:not(.${Pn.paginationItemOutOfRange})`)),r=e.target;switch(e.key){case"ArrowRight":Pm(i,r,"next");break;case"ArrowLeft":Pm(i,r,"previous");break;case"Home":e.preventDefault(),Pm(i,r,"first");break;case"End":e.preventDefault(),Pm(i,r,"last");break}}renderRotationControl(){const e=this.playing?this.messages.pause:this.messages.play,i=this.slideDurationRemaining*100;return q`<button .ariaLabel=${e} class=${H({[Pn.paginationItem]:!0,[Pn.autoplayControl]:!0})} @click=${this.toggleRotation} title=${e??Xe}><calcite-icon .icon=${this.playing?q1.pause:q1.play} scale=s></calcite-icon>${this.playing&&q`<calcite-progress class=${H(Pn.autoplayProgress)} .label=${this.messages.carouselItemProgress} .value=${i}></calcite-progress>`||""}</button>`}renderPaginationArea(){return q`<div class=${H({[Pn.pagination]:!0,[Pn.containerOverlaid]:this.controlOverlay})} @keydown=${this.tabListKeyDownHandler} ${gt(this.tabListRef)}>${(this.playing||this.autoplay===""||this.autoplay||this.autoplay==="paused")&&this.renderRotationControl()||""}${this.arrowType==="inline"&&this.renderArrow("previous")||""}${this.renderPaginationItems()}${this.arrowType==="inline"&&this.renderArrow("next")||""}</div>`}renderPaginationItems(){const{selectedIndex:e,maxItems:i,items:r,label:n,handleItemSelection:s}=this;return q`<div .ariaLabel=${n} class=${H(Pn.paginationItems)} role=tablist>${Zut(r,a=>a.id,(a,o)=>{const l=r.length,c=o===e,h=o===0,m=o===l-1,g=l-i-1,v=e<i,b=e>=g,x=v?0:e-Math.floor(i/2),$=b?l:x+i,M=v?0:b?g:x,k=v?i+1:$,A=!h&&!m&&!c&&(o===M-1||o===k),L=c||o<=k&&o>=M-1,z=l-1<=i,U=c?q1.active:q1.inactive;return q`<button aria-controls=${(c?void 0:a.id)??Xe} .ariaSelected=${c} class=${H({[Pn.paginationItem]:!0,[Pn.paginationItemIndividual]:!0,[Pn.paginationItemSelected]:c,[Pn.paginationItemRangeEdge]:l-1>i&&A,[Pn.paginationItemOutOfRange]:!(z||L),[Pn.paginationItemVisible]:z||L})} data-index=${o??Xe} @click=${s} role=tab title=${a.label??Xe}><calcite-icon .icon=${U} scale=l></calcite-icon></button>`})}</div>`}renderArrow(e){const i=e==="previous",r=Uo(this.el),n=this.arrowType==="edge"?"m":"s",s=i?Pn.pagePrevious:Pn.pageNext,a=i?this.messages.previous:this.messages.next,o=i?q1.chevronLeft:q1.chevronRight;return q`<button aria-controls=${this.containerId??Xe} class=${H({[Pn.paginationItem]:!0,[s]:!0})} data-direction=${e??Xe} @click=${this.handleArrowClick} title=${a??Xe}><calcite-icon .flipRtl=${r==="rtl"} .icon=${o} .scale=${n}></calcite-icon></button>`}render(){const{direction:e}=this;return Us({disabled:this.disabled,children:q`<div .ariaLabel=${this.label} .ariaLive=${this.playing?"off":"polite"} .ariaRoleDescription=${this.messages.carousel} class=${H({[Pn.container]:!0,[Pn.containerOverlaid]:this.controlOverlay,[Pn.containerEdged]:this.arrowType==="edge"})} @focusin=${this.handleFocusIn} @focusout=${this.handleFocusOut} @keydown=${this.containerKeyDownHandler} @mouseenter=${this.handleMouseIn} @mouseleave=${this.handleMouseOut} role=group tabindex=0 ${gt(this.containerRef)}><section class=${H({[Pn.itemContainer]:!0,[Pn.itemContainerForward]:e==="forward",[Pn.itemContainerBackward]:e==="backward"})} id=${this.containerId??Xe} ${gt(this.itemContainerRef)}><slot @slotchange=${this.handleSlotChange}></slot></section>${this.items.length>1&&this.renderPaginationArea()||""}${this.arrowType==="edge"&&this.renderArrow("previous")||""}${this.arrowType==="edge"&&this.renderArrow("next")||""}</div>`})}};MN.properties={direction:[16,{},{state:!0}],items:[16,{},{state:!0}],maxItems:[16,{},{state:!0}],playing:[16,{},{state:!0}],selectedIndex:[16,{},{state:!0}],slideDurationRemaining:[16,{},{state:!0}],suspendedDueToFocus:[16,{},{state:!0}],suspendedDueToHover:[16,{},{state:!0}],suspendedSlideDurationRemaining:[16,{},{state:!0}],userPreventsSuspend:[16,{},{state:!0}],arrowType:[3,{},{reflect:!0}],autoplay:[3,{},{reflect:!0}],autoplayDuration:[11,{},{type:Number,reflect:!0}],controlOverlay:[7,{},{reflect:!0,type:Boolean}],disabled:[7,{},{reflect:!0,type:Boolean}],label:1,messageOverrides:[0,{},{attribute:!1}],paused:[5,{},{type:Boolean}],selectedItem:[0,{},{attribute:!1}]},MN.styles=tdt;let vG=MN;ci("calcite-carousel",vG);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Qce={container:"container",selected:"selected"},idt="calcite-carousel-item",rdt={host:t=>`${idt}-${t}`},ndt=ct`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{display:flex}.container{display:none;inline-size:var(--calcite-container-size-content-fluid)}:host([selected]) .container{display:block}:host([hidden]){display:none}[hidden]{display:none}`,CN=class CN extends dt{constructor(){super(...arguments),this.guid=rdt.host(Mc()),this.selected=!1}render(){const e=this.el.id||this.guid;return wu(this.el,"id",e),q`<div .ariaLabel=${this.label} class=${H({[Qce.container]:!0,[Qce.selected]:this.selected})} role=tabpanel><slot></slot></div>`}};CN.properties={label:1,selected:[7,{},{reflect:!0,type:Boolean}]},CN.styles=ndt;let bG=CN;ci("calcite-carousel-item",bG);function YE(t,e){return Ho(t,e)}function Rd(t){return Iv(t)}function Kce(t,e){return YB(t,e)}/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.7 */function sdt(t,e){return e}function Bm(t,e,i){if(!e)return;if(typeof e=="number")return e;if(typeof e=="string")return Rd(e);if("value"in e||"unit"in e)return Sr(t.dotValue??"",e);if("colorName"in e&&"bandName"in e){const n=t[e.colorName],s=t[e.bandName]||e.bandName;return`${n}: ${s}`}if("showCount"in e)return e.showCount?t.clusterCountTitle:void 0;let r=null;return sdt(e,i)?r=e.ratioPercentTotal?"showRatioPercentTotal":e.ratioPercent?"showRatioPercent":e.ratio?"showRatio":e.normField?"showNormField":e.field?"showField":null:wTe(e,i)&&(r=e.normField?"showNormField":e.normByPct?"showNormPct":e.field?"showField":null),r?Sr(r==="showField"?"{field}":t[r]??"",{field:e.field,normField:e.normField}):void 0}function wTe(t,e){return!e}function _Te(t,e){if(!t.title||typeof t.title=="string")return t.title;const i=t.type==="color-ramp"||t.type==="opacity-ramp",r=t.title,n=Bm(e,r,i);return wTe(r,i)&&r.title?`${r.title} (${n})`:n}const adt=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/iu;function xTe(t,e,i){switch(e){case"heatmap-ramp":return(i[t.label]||t.label)??null;case"stretch-ramp":const r="value"in t?t.value:void 0,n=t.label?i[t.label]:"";return n?`${n}: ${typeof r=="string"?r:or(r??0,{style:"decimal",notation:r!=null&&r.toString().toLowerCase().includes("e")?"scientific":"standard"})}`:"";default:return t.label??null}}function $Te(t,e){return!!(e&&e==="Stretched"&&"version"in t&&typeof t.version=="number"&&t.version>=10.3&&t.declaredClass==="esri.layers.ImageryLayer")}function zd(t){return t?t/72*96:0}function odt(t){return t?t*72/96:0}function ldt(t){var e;if(typeof t=="string"){const i=t.match(adt);if(i){const r=Number(i[1]),n=(e=i[3])==null?void 0:e.toLowerCase(),s=t.startsWith("-"),a=n==="px"?odt(r):r;return s?-a:a}return null}return t}function Xm(t,e){const i=Bm(t,e,!1),r=i?t.previewTemplateAriaLabel:t.previewAriaLabel;return Sr(r??"",{label:i})}function qp(t,e){!e||!t||(t.querySelector("svg")??t.querySelector("canvas")??t).setAttribute("aria-label",e)}/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.7 */const cdt=ct`.arcgis-spike-ramp__container{display:flex;flex-direction:row;gap:var(--calcite-spacing-sm-plus);margin-left:var(--calcite-spacing-sm)}.arcgis-spike-ramp__preview-container{display:flex;position:relative;gap:var(--calcite-spacing-sm-plus);border-bottom:var(--calcite-border-width-sm) solid var(--calcite-color-border-2);padding:0 var(--calcite-spacing-xl)}.arcgis-spike-ramp__preview{display:flex;gap:var(--calcite-spacing-sm-plus);align-items:end}.arcgis-spike-ramp__symbol-preview{display:flex}.arcgis-spike-ramp__lines{display:flex;position:absolute;bottom:0}.arcgis-spike-ramp__labels-container{display:flex;position:relative;top:-5px;flex:1;min-width:120px}.arcgis-spike-ramp__label{position:relative;padding:0 var(--calcite-spacing-sm);line-height:1em;word-break:break-all;font-size:var(--calcite-font-size-sm)}.arcgis-spike-ramp__label:before{display:block;position:absolute;top:.25em;right:100%;border-width:3px 4px 3px 0;border-style:solid;border-color:transparent var(--calcite-color-text-1) transparent transparent;width:0;height:0;content:""}`,Ef={spikeRampContainer:"arcgis-spike-ramp__container",spikeRampPreviewContainer:"arcgis-spike-ramp__preview-container",spikeRampPreview:"arcgis-spike-ramp__preview",spikeRampSymbolPreview:"arcgis-spike-ramp__symbol-preview",spikeRampLines:"arcgis-spike-ramp__lines",spikeRampLabelsContainer:"arcgis-spike-ramp__labels-container",spikeRampLabel:"arcgis-spike-ramp__label"},udt="#ddd",$a=window.devicePixelRatio;function UU(t){return t.infos.filter((e,i)=>i%2===0)}function eue(t){return!!(t&&typeof t=="object")}var xw;let ddt=(xw=class extends dt{constructor(){super(...arguments),this.legendElement=null}render(){return this.legendElement.infos.length!==5?null:q`<div class=${H(Ef.spikeRampContainer)}><div class=${H(Ef.spikeRampPreviewContainer)}>${this._renderSpikeRampLines()}${this._renderSpikeRampPreview()}</div>${this._renderSpikeRampLabels()}</div>`}_renderSpikeRampPreview(){const e=this.legendElement,[i,r,n]=UU(e).map(({preview:s,label:a})=>{if(!s)return null;const o=s.cloneNode(!0);return o.classList.add(Ef.spikeRampSymbolPreview),qp(o,Xm(this.messages,a)),o});return!i||!r||!n?null:q`<div class=${H(Ef.spikeRampPreview)}><div>${n}</div><div>${r}</div><div>${i}</div></div>`}_renderSpikeRampLines(){const e=this.legendElement,[{width:i,height:r},{width:n},{width:s,height:a}]=UU(e).map(({size:J})=>eue(J)?{width:zd(J.width),height:zd(J.height)}:{width:0,height:0}),o=10,l=8,c=i+n+s+o*3,h=r,m=document.createElement("canvas");m.width=(c+o)*$a,m.height=h*$a,m.style.width=`${m.width/$a}px`,m.style.height=`${m.height/$a}px`;const g=m.getContext("2d");g.beginPath();const v=c-(i/2+o),b=0,x=c+l;g.moveTo(v*$a,b*$a),g.lineTo(x*$a,0*$a);const M=(c-l)/2,k=(r-a)/2,A=c+l,L=(r-a)/2;g.moveTo(M*$a,k*$a),g.lineTo(A*$a,L*$a);const z=s/2,U=h-a,B=c+l,X=h-a;return g.moveTo(z*$a,U*$a),g.lineTo(B*$a,X*$a),g.strokeStyle=udt,g.lineWidth=.5*$a,g.stroke(),q`<div class=${H(Ef.spikeRampLines)}>${m}</div>`}_renderSpikeRampLabels(){const e=this.legendElement,[{label:i,height:r},{label:n},{label:s,height:a}]=UU(e).map(({label:m,size:g})=>({label:m,height:eue(g)?zd(g.height):0})),o=r-a,l={position:"absolute",top:"0"},c={position:"absolute",top:`${o/2}px`},h={position:"absolute",top:`${o}px`};return q`<div class=${H(Ef.spikeRampLabelsContainer)}><div class=${H(Ef.spikeRampLabel)} style=${qt(l)}>${i}</div><div class=${H(Ef.spikeRampLabel)} style=${qt(c)}>${n}</div><div class=${H(Ef.spikeRampLabel)} style=${qt(h)}>${s}</div></div>`}},xw.properties={legendElement:0,messages:0},xw.styles=cdt,xw);yr("arcgis-legend-spike-ramp",ddt);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.7 */const hdt=ct`.arcgis-legend--card__size-ramp--container{display:flex;align-items:center;justify-content:center}.arcgis-legend--card__size-ramp--vertical-container{display:flex;flex-direction:column;align-items:center;justify-content:center}.arcgis-legend--card__size-ramp--label{margin:0 .5em;white-space:nowrap}.arcgis-legend--card__size-ramp--vertical-ramp{display:flex;flex-direction:column;align-items:center}.arcgis-legend--card__size-ramp--ramp{display:flex;flex-direction:row-reverse;align-items:center}.arcgis-legend--card__size-ramp--preview{display:flex}`,ry={container:"arcgis-legend--card__size-ramp--container",verticalContainer:"arcgis-legend--card__size-ramp--vertical-container",label:"arcgis-legend--card__size-ramp--label",ramp:"arcgis-legend--card__size-ramp--ramp",verticalRamp:"arcgis-legend--card__size-ramp--vertical-ramp",preview:"arcgis-legend--card__size-ramp--preview"},pdt="#ddd";function fdt(t){var i,r;if(!t)return;if(t.type.includes("3d")){if(!("symbolLayers"in t)||!((i=t.symbolLayers)!=null&&i.length))return;const n=t.symbolLayers.at(-1),s=n&&"resource"in n?(r=n.resource)==null?void 0:r.primitive:void 0;return s==="circle"||s==="cross"||s==="kite"||s==="sphere"||s==="cube"||s==="diamond"}const e="style"in t?t.style:void 0;return e==="circle"||e==="diamond"||e==="cross"}function mdt(t){var e,i;if(t){if(t.type.includes("3d")){if(!("symbolLayers"in t)||!((e=t.symbolLayers)!=null&&e.length))return;const r=t.symbolLayers.at(-1),n=r&&"resource"in r?(i=r.resource)==null?void 0:i.primitive:void 0;return n==="triangle"||n==="cone"||n==="tetrahedron"}return"style"in t&&t.style==="triangle"}}var $w;let gdt=($w=class extends dt{constructor(){super(...arguments),this.hasIndicators=!1,this.legendElement=null,this.opacity=1}render(){if(this.legendElement.theme==="spike")return q`<div style=${qt({display:"flex",flex:"1",justifyContent:"center"})}><arcgis-legend-spike-ramp .legendElement=${this.legendElement} .messages=${this.messages}></arcgis-legend-spike-ramp></div>`;const{legendElement:e,hasIndicators:i,opacity:r}=this,n=e.infos,s=n.at(0),a=n.at(-1);if(!s||!a)return null;const{label:o,...l}=s,{label:c,...h}=a;let m=l.preview,g=h.preview;if(!m||!g)return null;m=m.cloneNode(!0),m.style.display="flex",qp(m,Xm(this.messages,o)),g=g.cloneNode(!0),g.style.display="flex",qp(g,Xm(this.messages,c));const v={opacity:`${r??""}`};return q`<div class=${H(i?ry.verticalContainer:ry.container)}><div class=${H(ry.label)}>${i?o:c}</div><div class=${H(i?ry.verticalRamp:ry.ramp)}><div class=${H(ry.preview)} style=${qt(v)}>${m}</div>${this._renderSizeRampLines(e)}<div class=${H(ry.preview)} style=${qt(v)}>${g}</div></div><div class=${H(ry.label)}>${i?c:o}</div></div>`}_renderSizeRampLines(e){const i=e.infos,r=i.at(0),n=i.at(-1);if(!r||!n)return null;const s=r.symbol,a=this.hasIndicators,o=r.size&&typeof r.size=="number"?r.size:0,l=n.size&&typeof n.size=="number"?n.size:0,c=r.outlineSize||0,h=n.outlineSize||0,m=zd(o+c),g=zd(l+h),v=a?m:m+50,b=a?m/2+50:m,x=mdt(s),$=fdt(s),M=document.createElement("canvas");M.width=v,M.height=b,M.style.width=`${M.width}px`,M.style.height=`${M.height}px`;const k=M.getContext("2d");if(a){k.beginPath();const A=0,L=0,z=v/2-g/2,U=b;k.moveTo(A,L),k.lineTo(z,U);const B=v,X=0,J=v/2+g/2,Q=b;k.moveTo(B,X),k.lineTo(J,Q)}else{k.beginPath();const A=0,L=b/2-g/2,z=v;k.moveTo(A,L),k.lineTo(z,0);const B=0,X=b/2+g/2,J=v,Q=b;k.moveTo(B,X),k.lineTo(J,Q)}return k.strokeStyle=pdt,k.stroke(),q`<div style=${qt(a?{display:"flex",marginTop:`-${x?0:$?m/2:0}px`,marginBottom:`-${x?g:$?g/2:0}px`}:{display:"flex",marginRight:`-${x?0:$?m/2:0}px`,marginLeft:`-${x?0:$?g/2:0}px`})}>${M}</div>`}},$w.properties={hasIndicators:5,legendElement:0,opacity:9,messages:0},$w.styles=hdt,$w);yr("arcgis-legend-card-size-ramp",gdt);function STe(t){return hSe(t)}function TTe(t){return pSe(t)}function wG(t,e,i,r,n,s,a,o,l){return fSe(t,e,i,r,n,s,a,o,l)}/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.7 */let ydt=0;function vdt(){return ydt++}let bdt=0;function wdt(){return bdt++}let _dt=0;function xdt(){return _dt++}const tue=new Map([["dash",[4,3]],["dashdot",[4,3,1,3]],["dot",[1,3]],["longdash",[8,3]],["longdashdot",[8,3,1,3]],["longdashdotdot",[8,3,1,3,1,3]],["shortdash",[4,1]],["shortdashdot",[4,1,1,1]],["shortdashdotdot",[4,1,1,1,1,1]],["shortdot",[1,1]],["solid",[]]]),$dt="http://www.w3.org/2000/svg",Sdt=Math.PI;function ITe(t){const{pattern:e,linearGradient:i}=t;if(e)return Xi`<pattern height=${e.height??Pe} id=${e.id??Pe} patternUnits=userSpaceOnUse width=${e.width??Pe} x=${e.x??0??Pe} y=${e.y??0??Pe}><image height=${e.image.height??Pe} href=${e.image.href??Pe} width=${e.image.width??Pe} x=${e.image.x??Pe} y=${e.image.y??Pe} /></pattern>`;if(i){const r=i.stops.map(n=>Xi`<stop offset=${n.offset??Pe} stop-color=${n.color??Pe} />`);return Xi`<linearGradient gradientUnits=userSpaceOnUse id=${i.id??Pe} x1=${i.x1??Pe} x2=${i.x2??Pe} y1=${i.y1??Pe} y2=${i.y2??Pe}>${r}</linearGradient>`}return null}function eX(t){if(!t)return{fill:"none",pattern:null,linearGradient:null};if(!("type"in t))return{fill:new Se(t).toString(),pattern:null,linearGradient:null};if(t.type==="pattern"){const i=`patternId-${vdt()}`;return{fill:`url(#${i})`,pattern:{id:i,x:t.x,y:t.y,width:t.width,height:t.height,image:{x:0,y:0,width:t.width,height:t.height,href:t.src}},linearGradient:null}}const e=`linearGradientId-${wdt()}`;return{fill:`url(#${e})`,pattern:null,linearGradient:{id:e,x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,stops:t.colors.map(i=>({offset:i.offset,color:i.color&&new Se(i.color).toString()}))}}}function tX(t){const e={color:"none",width:1,cap:"butt",join:"4",dashArray:"none",dashOffset:"0"};return t&&(t.width!=null&&(e.width=t.width),t.cap&&(e.cap=t.cap),t.join&&(e.join=t.join.toString()),t.color&&(e.color=new Se(t.color).toString()),t.dashArray&&(e.dashArray=t.dashArray),t.dashoffset&&(e.dashOffset=t.dashoffset),t.style&&!t.dashArray&&(e.dashArray=Tdt(t).join(",")||"none")),e}function Tdt(t){if(!(t!=null&&t.style))return[];const{dashArray:e,style:i,width:r}=t;if(typeof e=="string"&&e!=="none")return e.split(",").map(a=>Number(a));const n=r??0,s=tue.has(i)?tue.get(i).map(a=>a*n):[];if(t.cap!=="butt")for(const[a,o]of s.entries())s[a]=a%2===1?o+n:Math.max(o-n,1);return s}function Idt(t){return t.map(e=>`${e.command} ${e.values.join(" ")}`).join(" ").trim()}function iX(t,e){if(t==null)throw new Error("value is None")}function rX(t,e,i,r,n){if(t){if(t.type==="circle")return Xi`<circle cx=${t.cx??Pe} cy=${t.cy??Pe} fill=${e??Pe} fill-rule=evenodd r=${t.r??Pe} stroke=${i.color??Pe} stroke-dasharray=${i.dashArray??void 0??Pe} stroke-dashoffset=${i.dashOffset??void 0??Pe} stroke-linecap=${i.cap??Pe} stroke-linejoin=${i.join??Pe} stroke-miterlimit=4 stroke-width=${i.width??Pe} />`;if(t.type==="ellipse")return Xi`<ellipse cx=${t.cx??Pe} cy=${t.cy??Pe} fill=${e??Pe} fill-rule=evenodd rx=${t.rx??Pe} ry=${t.ry??Pe} stroke=${i.color??Pe} stroke-dasharray=${i.dashArray??void 0??Pe} stroke-linecap=${i.cap??Pe} stroke-linejoin=${i.join??Pe} stroke-miterlimit=4 stroke-width=${i.width??Pe} />`;if(t.type==="rect")return Xi`<rect fill=${e??Pe} fill-rule=evenodd height=${t.height??Pe} stroke=${i.color??Pe} stroke-dasharray=${i.dashArray??void 0??Pe} stroke-linecap=${i.cap??Pe} stroke-linejoin=${i.join??Pe} stroke-miterlimit=4 stroke-width=${i.width??Pe} width=${t.width??Pe} x=${t.x??Pe} y=${t.y??Pe} />`;if(t.type==="image")return Xi`<image aria-label=${n??""??Pe} height=${t.height??Pe} href=${t.src??Pe} preserveAspectRatio=none width=${t.width??Pe} x=${t.x??Pe} y=${t.y??Pe} />`;if(t.type==="path"){const s=typeof t.path!="string"?Idt(t.path):t.path;return Xi`<path d=${s??Pe} fill=${e??Pe} fill-rule=evenodd stroke=${i.color??Pe} stroke-dasharray=${i.dashArray??void 0??Pe} stroke-linecap=${i.cap??Pe} stroke-linejoin=${i.join??Pe} stroke-miterlimit=4 stroke-width=${i.width??Pe} />`}if(t.type==="text")return iX(r),Xi`<text dominant-baseline=${(r.dominantBaseline==="inherit"||r.dominantBaseline==="alphabetic"||r.dominantBaseline==="auto"||r.dominantBaseline==="central"||r.dominantBaseline==="hanging"||r.dominantBaseline==="ideographic"||r.dominantBaseline==="mathematical"||r.dominantBaseline==="middle"||r.dominantBaseline==="text-bottom"||r.dominantBaseline==="text-top"?r.dominantBaseline:void 0)??Pe} fill=${e??Pe} fill-rule=evenodd font-family=${r.font.family??Pe} font-size=${r.font.size??Pe} font-style=${r.font.style??Pe} font-variant=${r.font.variant??Pe} font-weight=${r.font.weight??Pe} kerning=${r.kerning??Pe} rotate=${r.rotate??Pe} stroke=${i.color??Pe} stroke-dasharray=${i.dashArray??void 0??Pe} stroke-linecap=${i.cap??Pe} stroke-linejoin=${i.join??Pe} stroke-miterlimit=4 stroke-width=${i.width??Pe} text-anchor=${(r.align==="inherit"||r.align==="middle"||r.align==="end"||r.align==="start"?r.align:void 0)??Pe} text-decoration=${(r.decoration==="inherit"||r.decoration==="none"||r.decoration==="blink"||r.decoration==="line-through"||r.decoration==="overline"||r.decoration==="underline"?r.decoration:void 0)??Pe} text-rendering=auto x=${t.x??Pe} y=${t.y??Pe}>${t.text}</text>`}return null}function Mdt(t,e,i){const r=CTe(t);if(!r)return null;const{strength:n,radius:s}=r,a=n>0?s:0,o=5**(e/100)*(.4+e/100),l=(n+a*.5)*o,c=(n+a)*e,h=n*4+1;return Xi`<filter filterUnits=userSpaceOnUse height=300% .id=${`bloom${i}`} width=300% x=-100% y=-100%><feMorphology in=SourceGraphic operator=dilate radius=${l??Pe} result=dilate /><feGaussianBlur in=dilate result=blur stdDeviation=${c/25} /><feGaussianBlur in=blur result=intensityBlur stdDeviation=${c/50} /><feComponentTransfer in=SourceGraphic result=intensityBrightness><feFuncR slope=${h??Pe} type=linear /><feFuncG slope=${h??Pe} type=linear /><feFuncB slope=${h??Pe} type=linear /></feComponentTransfer><feMerge><feMergeNode in=intensityBlur /><feMergeNode in=intensityBrightness /><feGaussianBlur stdDeviation=${n/10} /></feMerge></filter>`}function n3(t,e){const i=t*(Sdt/180);return Math.abs(e*Math.sin(i))+Math.abs(e*Math.cos(i))}function MTe(t,e){var r;const i={align:null,decoration:null,kerning:null,rotate:null,font:{style:null,variant:null,weight:null,size:null,family:null}};if(t){const n=t.alignBaseline,s=n==="baseline"?"auto":n==="top"?"text-top":n==="bottom"?"hanging":n;i.align=t.align,i.dominantBaseline=s,i.decoration=t.decoration,i.kerning=t.kerning?"auto":"0",i.rotate=t.rotated?"90":"0",iX(e),i.font.style=e.style||"normal",i.font.variant=e.variant||"normal",i.font.weight=e.weight||"normal",i.font.size=((r=e.size)==null?void 0:r.toString())||"10pt",i.font.family=e.family||"serif"}return i}function Cdt(t,e){if(!t||t.length===0)return null;const i=[];for(const r of t){const{shape:n,fill:s,stroke:a,font:o}=r,l=eX(s),c=tX(a),h=n.type==="text"?MTe(n,o):null,m=rX(n,l.fill,c,h);m&&i.push(m)}return Xi`<mask id=${e??Pe} maskUnits=userSpaceOnUse><g>${i}</g></mask>`}function CTe(t){const e=t==null?void 0:t.match(/bloom\(\s*([^\s]+)\s+([^\s]+)\s+([^\s]+)\s*\)/iu);if(!e)return null;const[,i,r,n]=e;return{strength:Number(i),radius:zd(ldt(r)),threshold:Number(n)}}function Edt(t,e,i,r={}){var m,g;const n=[],s=[],a=xdt(),o=Mdt(r.cssEffectFilter,e,a);let l=null;if(o){const v=CTe(r.cssEffectFilter),b=r.clipBloomEffect||!(v!=null&&v.strength)?0:(v.strength+v.radius/2)/3,x=e+e*b,$=i+i*b;l=[Math.max(x,10),Math.max($,10)]}let c=e,h=i;if(r.useRotationSize)for(let v=0;v<t.length;v++){const b=((m=r.rotations)==null?void 0:m[v])??0;c=Math.max(n3(b,e),c),h=Math.max(n3(b,i),h)}for(let v=0;v<t.length;v++){const b=t[v],x=[],$=[];let M=0,k=0,A=0;for(const X of b){const{shape:J,fill:Q,stroke:le,font:ie,offset:re}=X;!r.ignoreStrokeWidth&&J.type!=="text"&&(M+=(le==null?void 0:le.width)||0);const se=eX(Q),Te=tX(le),ne=J.type==="text"?MTe(J,ie):null;n.push(ITe(se)),x.push(rX(J,se.fill,Te,ne,r.ariaLabel)),$.push(STe(J)),re&&(k+=re[0],A+=re[1])}const L=((g=r.rotations)==null?void 0:g[v])??0;r.useRotationSize&&(k+=(c-n3(L,e))/2,A+=(h-n3(L,i))/2);const z=TTe($),U=wG(z,e,i,M,r.scale??!1,L,r.useRotationSize??!1,[k,A],l);let B=null;if(r.masking){const X=`mask-${v}`,J=r.masking[v];n.push(Cdt(J,X)),B=`url(#${X})`}s.push(B?Xi`<g mask=${B??Pe}><g transform=${U??Pe}>${x}</g></g>`:Xi`<g transform=${U??Pe}>${x}</g>`)}return o&&(iX(l),c=l[0],h=l[1]),q`<svg aria-label=${r.ariaLabel??Pe} height=${h??Pe} role=img style=${qt("display: block;")} width=${c??Pe} xmlns=${$dt}>${Xi`${o}<defs>${n}</defs>${o?Xi`<g filter=${`url(#bloom${a})`}>${s}</g>`:s}`}</svg>`}/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.7 */const kdt=ct`:host{display:flex}.arcgis-legend--card__layer-row{display:flex;flex:1}.arcgis-legend--card__color-ramp-container{justify-content:center}.arcgis-legend--card__symbol-container{display:flex;flex-direction:column}.arcgis-legend--card__interval-separators-container{text-align:center}.arcgis-legend--card__interval-separator{font-size:.5em}.arcgis-legend--card__ramp-label{margin:0 .5em;white-space:nowrap;height:25px;line-height:var(--calcite-font-line-height-fixed-xl)}`,H1={layerRow:"arcgis-legend--card__layer-row",colorRampContainer:"arcgis-legend--card__color-ramp-container",symbolContainer:"arcgis-legend--card__symbol-container",intervalSeparatorsContainer:"arcgis-legend--card__interval-separators-container",intervalSeparator:"arcgis-legend--card__interval-separator",rampLabel:"arcgis-legend--card__ramp-label"},Adt=25,Pdt=25,Odt=100;var Sw;let Ldt=(Sw=class extends dt{constructor(){super(...arguments),this.legendElement=null,this.opacity=1}render(){const e=this.legendElement.infos.slice().reverse();return q`<div class=${H(ar(H1.layerRow,H1.colorRampContainer))}>${this._renderRampLabel(e[0])}<div class=${H(H1.symbolContainer)}>${this._renderPreview(e)}${this._renderMiddleStopRampLabel(e)}</div>${this._renderRampLabel(e.at(-1))}</div>`}_renderPreview(e){const{opacity:i}=this,r=this.legendElement.type==="heatmap-ramp",n=e.length-1,s=Pdt,a=n>2&&!r?Adt*n:Odt,o=a+20,l=10,c=[[{shape:{type:"path",path:`M0 ${s/2} L${l} 0 L${l} ${s} Z`},fill:e[0].color,stroke:{width:0}},{shape:{type:"rect",x:l,y:0,width:a,height:s},fill:{type:"linear",x1:l,y1:0,x2:a+l,y2:0,colors:e.map((v,b)=>({color:v.color,offset:r&&"ratio"in v?v.ratio:b/n}))},stroke:{width:0}},{shape:{type:"path",path:`M${a+l} 0 L${o} ${s/2} L${a+l} ${s} Z`},fill:e[e.length-1].color,stroke:{width:0}}]],h=this.legendElement.type==="opacity-ramp"?this.messages.previewOpacityRampAriaLabel:this.messages.previewColorRampAriaLabel,m=Edt(c,o,s,{ariaLabel:h}),g={filter:this.cssEffectFilter,opacity:i==null?void 0:`${i}`};return q`<div style=${qt(g)}>${m}</div>`}_renderMiddleStopRampLabel(e){const i=e.length%2!==0?e[e.length/2|0]:null;return i?q`<div class=${H(H1.intervalSeparatorsContainer)}><div class=${H(H1.intervalSeparator)}>|</div>${this._renderRampLabel(i)}</div>`:null}_renderRampLabel(e){return q`<div class=${H(H1.rampLabel)}>${xTe(e,this.legendElement.type,this.messages)}</div>`}},Sw.properties={cssEffectFilter:1,legendElement:0,opacity:9,messages:0},Sw.styles=kdt,Sw);yr("arcgis-legend-card-color-ramp",Ldt);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.7 */const Fdt=ct`.arcgis-relationship-ramp--diamond__container{display:flex;font-size:var(--calcite-font-size-sm)}.arcgis-relationship-ramp--diamond__left-column{align-self:center;padding-right:5px;max-width:85px;text-align:right}.arcgis-relationship-ramp--diamond__right-column{align-self:center;padding-left:5px;max-width:85px;text-align:left}.arcgis-relationship-ramp--diamond__middle-column{display:flex;flex-direction:column;text-align:center}.arcgis-relationship-ramp--diamond__middle-column--label{align-self:center;max-width:85px}.arcgis-relationship-ramp--diamond__middle-column--ramp{width:85px;height:85px}.arcgis-relationship-ramp--square__table{display:table;font-size:var(--calcite-font-size-sm)}.arcgis-relationship-ramp--square__table-row{display:table-row}.arcgis-relationship-ramp--square__table-cell{display:table-cell}.arcgis-relationship-ramp--square__table-label{max-width:95px}.arcgis-relationship-ramp--square__table-label--left-bottom{vertical-align:bottom;text-align:left}.arcgis-relationship-ramp--square__table-label--right-bottom{vertical-align:bottom;text-align:right}.arcgis-relationship-ramp--square__table-label--left-top{vertical-align:top;text-align:left}.arcgis-relationship-ramp--square__table-label--right-top{vertical-align:top;text-align:right}`,Rdt="http://www.w3.org/2000/svg",kr={diamondContainer:"arcgis-relationship-ramp--diamond__container",diamondLeftCol:"arcgis-relationship-ramp--diamond__left-column",diamondRightCol:"arcgis-relationship-ramp--diamond__right-column",diamondMidCol:"arcgis-relationship-ramp--diamond__middle-column",diamondMidColLabel:"arcgis-relationship-ramp--diamond__middle-column--label",diamondMidColRamp:"arcgis-relationship-ramp--diamond__middle-column--ramp",squareTable:"arcgis-relationship-ramp--square__table",squareTableRow:"arcgis-relationship-ramp--square__table-row",squareTableCell:"arcgis-relationship-ramp--square__table-cell",squareTableLabel:"arcgis-relationship-ramp--square__table-label",squareTableLabelLeftBottom:"arcgis-relationship-ramp--square__table-label--left-bottom",squareTableLabelRightBottom:"arcgis-relationship-ramp--square__table-label--right-bottom",squareTableLabelLeftTop:"arcgis-relationship-ramp--square__table-label--left-top",squareTableLabelRightTop:"arcgis-relationship-ramp--square__table-label--right-top"};var Tw;let zdt=(Tw=class extends dt{constructor(){super(...arguments),this._direction=_k(),this.legendElement=null}_getLineMarkers(e,i){const r="arrowStart",n="arrowEnd",s=e==="left",a={markerStart:null,markerEnd:null};switch(i){case"HL":s?a.markerStart=`url(#${n})`:a.markerEnd=`url(#${r})`;break;case"LL":a.markerStart=`url(#${n})`;break;case"LH":s?a.markerEnd=`url(#${r})`:a.markerStart=`url(#${n})`;break;default:a.markerEnd=`url(#${r})`;break}return a}render(){const e=this.legendElement,{focus:i,labels:r}=e,n=!!i,s=this._renderRamp(e),a={justifyContent:"center"},o=this._direction==="rtl";return n?q`<div class=${H(kr.diamondContainer)} style=${qt(a)}><div class=${H(kr.diamondLeftCol)}>${o?r.right:r.left}</div><div class=${H(kr.diamondMidCol)}><div class=${H(kr.diamondMidColLabel)}>${r.top}</div>${s}<div class=${H(kr.diamondMidColLabel)}>${r.bottom}</div></div><div class=${H(kr.diamondRightCol)}>${o?r.left:r.right}</div></div>`:q`<div class=${H(kr.squareTable)}><div class=${H(kr.squareTableRow)}><div class=${H(ar(kr.squareTableCell,kr.squareTableLabel,kr.squareTableLabelRightBottom))}>${o?r.top:r.left}</div><div class=${H(kr.squareTableCell)}></div><div class=${H(ar(kr.squareTableCell,kr.squareTableLabel,kr.squareTableLabelLeftBottom))}>${o?r.left:r.top}</div></div><div class=${H(kr.squareTableRow)}><div class=${H(kr.squareTableCell)}></div>${s}<div class=${H(kr.squareTableCell)}></div></div><div class=${H(kr.squareTableRow)}><div class=${H(ar(kr.squareTableCell,kr.squareTableLabel,kr.squareTableLabelRightTop))}>${o?r.right:r.bottom}</div><div class=${H(kr.squareTableCell)}></div><div class=${H(ar(kr.squareTableCell,kr.squareTableLabel,kr.squareTableLabelLeftTop))}>${o?r.bottom:r.right}</div></div></div>`}_renderRamp(e){const{focus:i,numClasses:r,colors:n,rotation:s}=e,a=this.opacity,o=this.messages.previewRelationshipRampAriaLabel,l=60,c=!!i,h=Math.sqrt(l**2+l**2)+(c?0:5),m=[],g=[],v=[],b=l/r;for(let J=0;J<r;J++){const Q=J*b;for(let le=0;le<r;le++){const ie=le*b,re=eX(n[J][le]),se=tX(null),Te={type:"rect",x:ie,y:Q,width:b,height:b},ne=ITe(re);ne&&m.push(ne);const _e=rX(Te,re.fill,se,null);_e&&g.push(_e),v.push(STe(Te))}}const x=15,$=15,M=10;let k;c||(k="margin: -15px -15px -18px -15px");const A=this._getLineMarkers("left",i),L=this._getLineMarkers("right",i),z=TTe(v),U=wG(z,h,h,0,!1,s,!1),B=wG(z,h,h,0,!1,c?-45:null,!1),X={filter:this.cssEffectFilter,opacity:a==null?"":`${a}`};return q`<div class=${H(c?kr.diamondMidColRamp:kr.squareTableCell)} style=${qt(X)}><svg .ariaLabel=${o} height=${h??Pe} role=img style=${qt(k)} width=${h??Pe} xmlns=${Rdt}>${Xi`<defs><marker .id=${"arrowStart"} markerHeight=10 markerUnits=strokeWidth markerWidth=10 orient=auto refX=5 refY=5><polyline fill=none points="0,0 5,5 0,10" stroke=#555555 stroke-width=1 /></marker><marker .id=${"arrowEnd"} markerHeight=10 markerUnits=strokeWidth markerWidth=10 orient=auto refX=0 refY=5><polyline fill=none points="5,0 0,5 5,10" stroke=#555555 stroke-width=1 /></marker>${m}</defs><g transform=${U??Pe}>${g}</g><g transform=${B??Pe}><line fill=none marker-end=${A.markerEnd??void 0??Pe} marker-start=${A.markerStart??void 0??Pe} stroke=#555555 stroke-width=1 x1=${-10} x2=${-10} y1=${l-x} y2=${x} /><line fill=none marker-end=${L.markerEnd??void 0??Pe} marker-start=${L.markerStart??void 0??Pe} stroke=#555555 stroke-width=1 x1=${$} x2=${l-$} y1=${l+M} y2=${l+M} /></g>`}</svg></div>`}},Tw.properties={cssEffectFilter:1,legendElement:0,opacity:9,messages:0},Tw.styles=Fdt,Tw);yr("arcgis-legend-relationship-ramp",zdt);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.7 */const ETe=10,nX=20,Z5=10,sX=20,aX={univariateAboveAndBelowSymbol:"arcgis-univariate-above-and-below-ramp__symbol",colorRamp:"arcgis-legend__color-ramp"};function fT(t){return typeof t=="number"}function Ndt(t="vertical"){const e="stroke:rgb(200, 200, 200);stroke-width:1";return t==="vertical"?q`<svg height=4 width=10>${Xi`<line style=${qt(e)} x1=0 x2=10 y1=2 y2=2 />`}</svg>`:q`<svg height=10 width=10>${Xi`<line style=${qt(e)} x1=5 x2=5 y1=0 y2=10 />`}</svg>`}function Ddt(t,e="vertical"){const i={height:`${nX}px`,opacity:t==null?void 0:t.toString()};return q`<div class=${H(aX.univariateAboveAndBelowSymbol)} style=${qt(i)}>${Ndt(e)}</div>`}function kTe(t,e,i,r="vertical",n){t.infos.forEach((s,a)=>{if(n&&a===2){s.preview=Hw(Ddt(i,r));return}else{const o=(fT(s.size)?zd(s.size):0)+(r==="horizontal"?sX:Z5),l=s.preview,c=(l==null?void 0:l.tagName.toLowerCase())==="div",h=c?l:document.createElement("div");h.className=aX.univariateAboveAndBelowSymbol,r==="horizontal"?h.style.width=`${o}px`:h.style.height=`${o}px`,!c&&l&&h.appendChild(l),qp(h,Xm(e,s.label)),s.preview=h}})}function Y5(t,e="classic"){const i=t.infos,r=i.at(0),n=i.at(-1),s=fT(r.size)?zd(r.size):0,a=fT(n.size)?zd(n.size):0;return e==="classic"?(s+Z5)/2:(s-a)/2}function mT(t,e){if(!t)return null;const i=t.infos.map(n=>n.color),r=w0(e.type==="full"?i:e.type==="above"?i.slice(0,3):i.slice(2,5),{width:e.width??void 0,height:e.height??void 0,align:e.rampAlignment,cssEffectFilter:e.cssEffectFilter,ariaLabel:e.ariaLabel??void 0});return r.className=aX.colorRamp,e.opacity!=null&&(r.style.opacity=e.opacity.toString()),r}function oX(t,e,i,r="vertical"){let n=0;const s=t.infos,a=Math.floor(s.length/2),o=e==="full"||e==="above"?0:a,l=e==="full"||e==="below"?s.length-1:a;for(let c=o;c<=l;c++)if(i&&c===a)n+=r==="horizontal"?ETe:nX;else{const h=s[c].size,m=(fT(h)?zd(h):0)+(r==="horizontal"?sX:Z5);n+=m}return Math.round(n)}function gT(t,e,i,r="vertical"){const n=oX(t,e,i,r),s=t.infos,a=Math.floor(s.length/2),o=e==="full"||e==="above"?0:a,l=e==="full"||e==="below"?s.length-1:a,c=fT(s[o].size)?s[o].size:0,h=fT(s[l].size)?s[l].size:0,m=e==="full"?c+h:e==="above"?c:h,g=i?r==="vertical"?nX:ETe:0,v=r==="vertical"?Z5*(e==="full"?2:1):sX*(e==="full"?2:1);return Math.round(n-(zd(m)/2+g/2+v/2))}function ATe(t,e,i,r="vertical"){const n=t.infos;let s=n.find(({type:o})=>o==="size-ramp"),a=n.find(({type:o})=>o==="color-ramp");return s&&(s={...s},s.infos=[...s.infos],kTe(s,e,i,r,!0)),a&&(a={...a},a.infos=[...a.infos]),r==="horizontal"&&(s==null||s.infos.reverse(),a==null||a.infos.reverse()),{sizeRampElement:s,colorRampElement:a}}function PTe(t,e,i="vertical"){const r=t.infos;let n=r.find(({type:a})=>a==="size-ramp"),s=r.find(({type:a})=>a==="color-ramp");return n&&(n={...n},n.infos=[...n.infos],kTe(n,e,null,i,!1)),s&&(s={...s},s.infos=[...s.infos]),i==="horizontal"&&(n==null||n.infos.reverse(),s==null||s.infos.reverse()),{sizeRampElement:n,colorRampElement:s}}const _G={marginLeft:"3px"},E$={display:"table-cell",verticalAlign:"middle"},OTe={display:"flex",alignItems:"flex-start"};/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.7 */const jdt=ct`.arcgis-legend--card__layer-row{display:flex;align-items:center}.arcgis-legend--card__symbol{display:block;margin:auto}.arcgis-legend--card__symbol-container{position:relative}.arcgis-legend__ramp-labels{display:flex;flex-flow:column nowrap;justify-content:space-between}.arcgis-legend__layer-cell{padding:var(--calcite-spacing-xxs) 0;min-width:100px;vertical-align:middle;word-break:break-word}.arcgis-legend__layer-cell--info{padding-right:var(--calcite-spacing-sm);padding-left:var(--calcite-spacing-sm);max-width:250px;word-break:normal;word-wrap:normal;font-size:var(--calcite-font-size-sm)}.arcgis-univariate-above-and-below-ramp__color--card{position:relative}.arcgis-univariate-above-and-below-ramp__color--card:before{content:"";border-left:var(--calcite-border-width-sm) solid var(--calcite-color-background);border-right:var(--calcite-border-width-sm) solid var(--calcite-color-background);width:100%;height:15px;display:block;position:absolute;top:var(--calcite-border-width-sm)}.arcgis-univariate-above-and-below-ramp__symbol{display:flex;align-items:center;justify-content:center}`,G1={layerRow:"arcgis-legend--card__layer-row",symbol:"arcgis-legend--card__symbol",symbolContainer:"arcgis-legend--card__symbol-container",rampLabelsContainer:"arcgis-legend__ramp-labels",layerInfo:"arcgis-legend__layer-cell arcgis-legend__layer-cell--info",univariateAboveAndBelowColorRamp:"arcgis-univariate-above-and-below-ramp__color--card"};var Iw;let Vdt=(Iw=class extends dt{constructor(){super(...arguments),this._direction=_k(),this.legendElement=null,this.opacity=1}render(){var L;const{legendElement:e,opacity:i}=this,{sizeRampElement:r,colorRampElement:n}=ATe(e,this.messages,i,"horizontal");if(!r)return null;const s=oX(r,"full",!0,"horizontal"),a=gT(r,"above",!0,"horizontal"),o=gT(r,"below",!0,"horizontal"),l=12,c=(L=this.messages)==null?void 0:L.previewColorRampAriaLabel,h=mT(n,{width:a,height:l,rampAlignment:"horizontal",opacity:i,type:"above",cssEffectFilter:this.cssEffectFilter,ariaLabel:c}),m=mT(n,{width:o,height:l,rampAlignment:"horizontal",opacity:i,type:"below",cssEffectFilter:this.cssEffectFilter,ariaLabel:c}),g=Y5(r,"card"),v=r.infos.map(z=>z.label),b=v.length-1,x=v.map((z,U)=>U===0||U===b?q`<div>${z}</div>`:null),$={display:"flex",flexDirection:"column"},M={display:"flex",flexDirection:"row"},k={marginTop:"3px",display:"flex"};this._direction==="rtl"?k.marginRight=`${g}px`:k.marginLeft=`${g}px`;const A={width:`${s}px`,display:"flex",flexDirection:"row",justifyContent:"space-between"};return q`<div class=${H(G1.layerRow)} style=${qt($)}><div class=${H(G1.symbolContainer)} style=${qt(M)}>${r.infos.map(z=>q`<div class=${H(G1.symbol)}>${z.preview}</div>`)}</div>${h?q`<div class=${H(G1.univariateAboveAndBelowColorRamp)} style=${qt(k)}><div>${h}</div><div>${m}</div></div>`:null}<div class=${H(G1.layerInfo)}><div class=${H(G1.rampLabelsContainer)} style=${qt(A)}>${x}</div></div></div>`}},Iw.properties={cssEffectFilter:1,legendElement:0,opacity:9,messages:0},Iw.styles=jdt,Iw);yr("arcgis-legend-card-univariate-above-and-below-ramp",Vdt);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.7 */const Udt=ct`.arcgis-legend--card__layer-row,.arcgis-legend--card__symbol{display:flex;align-items:center}.arcgis-legend--card__symbol-container{position:relative}.arcgis-legend__ramp-labels{display:flex;flex-flow:column nowrap;justify-content:space-between}.arcgis-legend__layer-cell{padding:var(--calcite-spacing-xxs) 0;min-width:100px;vertical-align:middle;word-break:break-word}.arcgis-legend__layer-cell--info{padding-right:var(--calcite-spacing-sm);padding-left:var(--calcite-spacing-sm);max-width:250px;word-break:normal;word-wrap:normal;font-size:var(--calcite-font-size-sm)}.arcgis-univariate-above-and-below-ramp__color--card{position:relative}.arcgis-univariate-above-and-below-ramp__color--card:before{content:"";border-left:var(--calcite-border-width-sm) solid var(--calcite-color-background);border-right:var(--calcite-border-width-sm) solid var(--calcite-color-background);width:100%;height:15px;display:block;position:absolute;top:var(--calcite-border-width-sm)}.arcgis-univariate-above-and-below-ramp__symbol{display:flex;align-items:center;justify-content:center}`,W1={layerRow:"arcgis-legend--card__layer-row",symbol:"arcgis-legend--card__symbol",symbolContainer:"arcgis-legend--card__symbol-container",rampLabelsContainer:"arcgis-legend__ramp-labels",layerInfo:"arcgis-legend__layer-cell arcgis-legend__layer-cell--info",univariateAboveAndBelowColorRamp:"arcgis-univariate-above-and-below-ramp__color--card"};var Mw;let Bdt=(Mw=class extends dt{constructor(){super(...arguments),this._direction=_k(),this.legendElement=null,this.opacity=1}render(){var x;const{legendElement:e,opacity:i}=this,{sizeRampElement:r,colorRampElement:n}=PTe(e,this.messages,"horizontal");if(!r)return null;const s=oX(r,"full",!1,"horizontal"),a=gT(r,"full",!1,"horizontal"),o=mT(n,{width:a,height:12,rampAlignment:"horizontal",opacity:i,type:"full",cssEffectFilter:this.cssEffectFilter,ariaLabel:(x=this.messages)==null?void 0:x.previewColorRampAriaLabel}),l=Y5(r,"card"),c=r.infos.length-1,h=r.infos.map(($,M)=>M===0||M===c?q`<div>${$.label}</div>`:null),m={display:"flex",flexDirection:"column"},g={display:"flex",flexDirection:"row"},v={marginTop:"3px",display:"flex"};this._direction==="rtl"?v.marginRight=`${l}px`:v.marginLeft=`${l}px`;const b={width:`${s}px`,display:"flex",flexDirection:"row",justifyContent:"space-between"};return q`<div class=${H(W1.layerRow)} style=${qt(m)}><div class=${H(W1.symbolContainer)} style=${qt(g)}>${r.infos.map($=>q`<div class=${H(W1.symbol)}>${$.preview}</div>`)}</div><div class=${H(W1.univariateAboveAndBelowColorRamp)} style=${qt(v)}><div>${o}</div></div><div class=${H(W1.layerInfo)}><div class=${H(W1.rampLabelsContainer)} style=${qt(b)}>${h}</div></div></div>`}},Mw.properties={cssEffectFilter:1,legendElement:0,opacity:9,messages:0},Mw.styles=Udt,Mw);yr("arcgis-legend-card-univariate-color-size-ramp",Bdt);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.7 */const yT={heading:"esri-widget__heading",panel:"esri-widget--panel",widget:"esri-widget"};/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.7 */function JE({level:t,class:e,id:i,children:r,excludeGlobalCss:n}){const s=Hdt(t),a=`h${s}`,o=Bhe(a);return xk`<${o} .ariaLevel=${String(s)} class=${H(ar(n?e:yT.heading,e))} id=${i??Pe} role=heading>${r}</${o}>`}function qdt(t,e,i){return Math.min(Math.max(t,e),i)}function Hdt(t){return qdt(Math.ceil(t),1,6)}/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.7 */const Gdt=ct`.esri-widget__heading{color:var(--calcite-color-text-2);margin:0 0 .5rem;font-weight:var(--calcite-font-weight-semibold)}h1.esri-widget__heading{font-size:var(--calcite-font-size-xl)}h2.esri-widget__heading{font-size:var(--calcite-font-size-md)}h3.esri-widget__heading,h4.esri-widget__heading,h5.esri-widget__heading,h6.esri-widget__heading{font-size:var(--calcite-font-size)}.arcgis-legend--card__section{word-break:break-word;word-wrap:break-word;padding:var(--calcite-spacing-sm) var(--calcite-spacing-md);min-width:250px;max-width:500px;height:100%;height:-moz-available;height:-webkit-fill-available;height:fill-available;overflow:auto;font-size:var(--calcite-font-size-sm)}.arcgis-legend--card__carousel-title-container{margin-bottom:var(--calcite-spacing-sm)}.arcgis-legend--card__carousel-title{margin:0}.arcgis-legend--card__section-title{font-weight:var(--calcite-font-weight-normal)}.arcgis-legend--card__layer-caption{padding:var(--calcite-spacing-xs) 0;margin:0;font-weight:var(--calcite-font-weight-normal)}.arcgis-legend--card__imagery-layer-image--stretched{display:block;margin-bottom:-2px}.arcgis-legend--card__image-label{padding-right:var(--calcite-spacing-xs);padding-left:var(--calcite-spacing-xs)}.arcgis-legend--card__label-element{margin:.1em;padding:.5em 1em;min-width:2em;min-height:1em;text-align:center;display:flex;align-items:center;justify-content:center;flex:1}.arcgis-legend--card__layer-row{display:flex;align-items:center}.arcgis-legend--card__symbol{display:block;margin:auto}.arcgis-legend--card__pie-chart-ramp-preview{display:flex;justify-content:center}.arcgis-legend--card__relationship-container{display:flex;flex-direction:column}.arcgis-legend--card__relationship-container .arcgis-legend--card__layer-row{padding-bottom:.5em}.arcgis-legend--card__relationship-container .arcgis-legend--card__layer-row:last-child{padding-bottom:0}.arcgis-legend--card__container{display:flex;gap:var(--calcite-spacing-sm);flex-wrap:wrap}.arcgis-legend--card__background-styles-container{display:flex;flex-wrap:wrap}:host([stacked]) .arcgis-legend--card__container{display:table}:host([stacked]) .arcgis-legend--card__symbol-row{display:table-row;width:100%}:host([stacked]) .arcgis-legend--card__label-cell{display:table-cell;vertical-align:middle;padding:var(--calcite-spacing-xxs)}:host([stacked]) .arcgis-legend--card__symbol-cell{display:table-cell;vertical-align:middle;text-align:center;padding:var(--calcite-spacing-xxs)}:host([stacked]) .arcgis-legend--card__symbol-cell div{display:flex;align-items:center;justify-content:center}`,fn={carouselTitleContainer:"arcgis-legend--card__carousel-title-container",carouselTitle:"arcgis-legend--card__carousel-title",sectionTitle:"arcgis-legend--card__section-title",imageryLayerStretchedImage:"arcgis-legend--card__imagery-layer-image--stretched",imageLabel:"arcgis-legend--card__image-label",layerCaption:"arcgis-legend--card__layer-caption",labelElement:"arcgis-legend--card__label-element",layerRow:"arcgis-legend--card__layer-row",labelCell:"arcgis-legend--card__label-cell",section:"arcgis-legend--card__section",symbol:"arcgis-legend--card__symbol",symbolRow:"arcgis-legend--card__symbol-row",symbolCell:"arcgis-legend--card__symbol-cell",pieChartRampPreview:"arcgis-legend--card__pie-chart-ramp-preview",relationshipContainer:"arcgis-legend--card__relationship-container",backgroundStylesContainer:"arcgis-legend--card__background-styles-container",container:"arcgis-legend--card__container"};function Wdt(t){return t?t.r*.299+t.g*.587+t.b*.114>=127:void 0}var Cw;let Zdt=(Cw=class extends dt{constructor(){super(...arguments),this.stacked=!1,this.headingLevel=3}_getBackgroundStyles(e){var g;const i=e.symbol,r=i.color,n=!!(r!=null&&r.a),s="outline"in i?i.outline:null,a=!!((g=s==null?void 0:s.color)!=null&&g.a),o=n&&r?new Se([r.r,r.g,r.b,r.a*this.layer.opacity]):new Se([255,255,255,0]),l=a&&s.color?new Se([s.color.r,s.color.g,s.color.b,s.color.a*this.layer.opacity]):new Se([255,255,255,0]),c=Wdt(e.symbol.color)??!0,h=c?"black":"white",m=c?"rgba(255, 255, 255, .6)":"rgba(0, 0, 0, .6)";return{background:n?o.toCss(!0):"none",color:h,textShadow:`-1px -1px 0 ${m},
                  1px -1px 0 ${m},
                  -1px 1px 0 ${m},
                  1px 1px 0 ${m}`,border:a?`1px solid ${l.toCss(!0)}`:"none",filter:this.cssEffectFilter??""}}render(){const e=this._renderLegendElement(),i=_Te(this.legendElement,this.messages),r=this.stacked?q`<div class=${H(fn.carouselTitleContainer)}>${JE({class:ar(fn.carouselTitle,yT.heading),level:this.headingLevel,children:this.activeLayerInfo.title})}${i?q`<p class=${H(fn.layerCaption)}>${i}</p>`:null}</div>`:i?JE({class:ar(fn.sectionTitle,yT.heading),level:this.headingLevel,children:i}):null;return q`<section class=${H(fn.section)} role=tabpanel tabindex=0>${r}${e}</section>`}_renderLegendElement(){switch(this.legendElement.type){case"symbol-table":return this._renderSymbolTable(this.legendElement);case"size-ramp":return q`<arcgis-legend-card-size-ramp .hasIndicators=${this.stacked} .legendElement=${this.legendElement} .messages=${this.messages} .opacity=${this.layer.opacity}></arcgis-legend-card-size-ramp>`;case"color-ramp":case"opacity-ramp":case"heatmap-ramp":case"stretch-ramp":return q`<arcgis-legend-card-color-ramp .cssEffectFilter=${this.cssEffectFilter} .legendElement=${this.legendElement} .messages=${this.messages} .opacity=${this.layer.opacity}></arcgis-legend-card-color-ramp>`;case"relationship-ramp":return q`<arcgis-legend-relationship-ramp .cssEffectFilter=${this.cssEffectFilter} .legendElement=${this.legendElement} .opacity=${this.layer.opacity} .messages=${this.messages}></arcgis-legend-relationship-ramp>`;case"pie-chart-ramp":{const{preview:e}=this.legendElement;return qp(e,this.messages.previewPieChartAriaLabel),q`<div class=${H(fn.pieChartRampPreview)}>${e}</div>`}case"univariate-above-and-below-ramp":return q`<arcgis-legend-card-univariate-above-and-below-ramp .cssEffectFilter=${this.cssEffectFilter} .legendElement=${this.legendElement} .messages=${this.messages} .opacity=${this.layer.opacity}></arcgis-legend-card-univariate-above-and-below-ramp>`;case"univariate-color-size-ramp":return q`<arcgis-legend-card-univariate-color-size-ramp .cssEffectFilter=${this.cssEffectFilter} .legendElement=${this.legendElement} .messages=${this.messages} .opacity=${this.layer.opacity}></arcgis-legend-card-univariate-color-size-ramp>`;default:return null}}_renderSymbolTable(e){const i=e.infos.map(s=>this._renderElementInfo(s,e.legendType)).filter(Boolean);if(!i.length)return null;const r=e.infos.some(s=>{var a;return"symbol"in s&&((a=s.symbol)==null?void 0:a.type.includes("simple-fill"))}),n=this.activeLayerInfo.legendElements.some(({type:s})=>s==="relationship-ramp")?fn.relationshipContainer:r?fn.backgroundStylesContainer:fn.container;return q`<div class=${H(n)}>${i}</div>`}_renderElementInfo(e,i){var o;const{layer:r}=this,n="label"in e?e.label:null;if("type"in e&&e.type)return q`<arcgis-legend-card-element .activeLayerInfo=${this.activeLayerInfo} .cssEffectFilter=${this.cssEffectFilter} .stacked=${this.stacked} .headingLevel=${this.headingLevel} .layer=${r} .legendElement=${e} .messages=${this.messages}></arcgis-legend-card-element>`;if(!("preview"in e&&e.preview)&&!("src"in e&&e.src))return null;const s=$Te(r,i),a=Bm(this.messages,n,!1)||"";if("src"in e&&e.src){const l={[fn.symbolCell]:this.stacked};return q`<div class=${H(ar(fn.layerRow,{[fn.symbolRow]:this.stacked}))}><div class=${H(ar(l))}>${this._renderImage(e,r,s)}</div><div class=${H(ar(fn.imageLabel,{[fn.labelCell]:this.stacked}))}>${a}</div></div>`}if("symbol"in e&&e.preview){if(!((o=e.symbol)!=null&&o.type.includes("simple-fill"))){if(!e.label)return q`<div>${e.preview}</div>`;const l={[fn.symbolCell]:this.stacked},{preview:c}=e,h="previewAriaLabel"in e?e.previewAriaLabel:null,m="label"in e?Bm(this.messages,e.label,!1):null;return qp(c,Xm(this.messages,h||m)),q`<div class=${H(ar(fn.layerRow,{[fn.symbolRow]:this.stacked}))}><div class=${H(ar(l))}>${c}</div><div class=${H(ar(fn.imageLabel,{[fn.labelCell]:this.stacked}))}>${a}</div></div>`}return q`<div class=${H(fn.layerRow)}><div class=${H(fn.labelElement)} style=${qt(this._getBackgroundStyles(e))}>${a}</div></div>`}return null}_renderImage(e,i,r){const{previewAriaLabel:n,src:s,opacity:a}=e,o=Bm(this.messages,e.label,!1),l={[fn.imageryLayerStretchedImage]:r,[fn.symbol]:!r},c={opacity:`${a??i.opacity}`},h=Xm(this.messages,n||o);return q`<img alt=${h??Pe} .ariaLabel=${h} class=${H(ar(l))} height=${e.height??void 0??Pe} src=${s??Pe} style=${qt(c)} width=${e.width??void 0??Pe}>`}},Cw.properties={cssEffectFilter:1,stacked:7,activeLayerInfo:0,headingLevel:9,layer:0,legendElement:0,messages:0},Cw.styles=Gdt,Cw);yr("arcgis-legend-card-element",Zdt);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.7 */const Ydt=ct`.esri-widget__heading{color:var(--calcite-color-text-2);margin:0 0 .5rem;font-weight:var(--calcite-font-weight-semibold)}h1.esri-widget__heading{font-size:var(--calcite-font-size-xl)}h2.esri-widget__heading{font-size:var(--calcite-font-size-md)}h3.esri-widget__heading,h4.esri-widget__heading,h5.esri-widget__heading,h6.esri-widget__heading{font-size:var(--calcite-font-size)}:host{display:flex;flex-direction:row;position:relative;transition:max-width .25s ease-in-out;overflow-x:auto}calcite-carousel-item[selected]{flex:1;overflow:auto}.arcgis-legend--card__message{padding:.5em 1em}.arcgis-legend--card__service-caption-text{margin:0}.arcgis-legend--card__service-content{display:flex;flex:1}.arcgis-legend--card__service-content>arcgis-legend-card-element:not(:first-child){border-left:1px solid var(--calcite-color-border-2)}.arcgis-legend--card__service{border-left:var(--calcite-border-width-sm) solid var(--calcite-color-border-2);min-width:fit-content;display:flex;flex-direction:column;flex:1}.arcgis-legend--card__service-caption-container{border-bottom:1px solid var(--calcite-color-border-2);padding:var(--calcite-spacing-md)}`,zb={message:"arcgis-legend--card__message",serviceCaptionText:"arcgis-legend--card__service-caption-text",serviceContent:"arcgis-legend--card__service-content",service:"arcgis-legend--card__service",serviceCaptionContainer:"arcgis-legend--card__service-caption-container"},Jdt=768;var Ew;let Xdt=(Ew=class extends dt{constructor(){super(...arguments),this.stacked=!1,this.headingLevel=3,this.layout="auto",this.type="card"}loaded(){this.manager.onLifecycle(()=>[be(()=>[this.layout,this.view.width],()=>{this.stacked=this.layout==="stack"||(!this.layout||this.layout==="auto")&&this.view.width<=Jdt},{initial:!0})])}render(){return(this.stacked?this._renderCarousel():this._renderLayers())||q`<div class=${H(zb.message)}>${this.messages.noLegend}</div>`}_renderTitle(e){return q`<div class=${H(zb.serviceCaptionContainer)}>${JE({class:ar(zb.serviceCaptionText,yT.heading),level:this.headingLevel,children:e})}</div>`}_renderCarousel(){const e=[],i=this.activeLayerInfos;if(i)for(const r of i)this._renderSections(r,e);return e!=null&&e.length?q`<calcite-carousel .label=${this.messages.carousel??""}>${e.map((r,n)=>{var s,a;return q`<calcite-carousel-item .label=${Sr(((a=(s=this.messages)==null?void 0:s.pagination)==null?void 0:a.pageText)??"",{index:n+1,total:e.length})}>${r}</calcite-carousel-item>`})}</calcite-carousel>`:null}_renderLayers(){var i,r;const e=(r=(i=this.activeLayerInfos)==null?void 0:i.toArray())==null?void 0:r.map(n=>this._renderLegendForLayer(n)).filter(Boolean);return e!=null&&e.length?e:null}_renderLegendForLayer(e){if(!e.ready)return null;if(e.children.length){const i=e.children.toArray().map(this._renderLegendForLayer,this);return q`<section class=${H(zb.service)}>${this._renderTitle(e.title)}<div class=${H(zb.serviceContent)}>${i}</div></section>`}return this._renderLegendElementsForLayer(e)}_renderLegendElementsForLayer(e){var n;const i=(n=e.legendElements)==null?void 0:n.filter(Boolean);if(!(i!=null&&i.length))return null;const r=i.map(s=>q`<arcgis-legend-card-element .activeLayerInfo=${e} .cssEffectFilter=${e.cssEffectFilter??void 0} .stacked=${this.stacked} .headingLevel=${this.headingLevel} .layer=${e.layer} .legendElement=${s} .messages=${this.messages}></arcgis-legend-card-element>`);return q`<section class=${H(zb.service)}>${this._renderTitle(e.title)}<div class=${H(zb.serviceContent)}>${r}</div></section>`}_renderSections(e,i){if(!e.ready)return;if(e.children.length)for(const n of e.children)this._renderSections(n,i);const r=e.legendElements;if(r!=null&&r.length)for(const n of r){const s=q`<arcgis-legend-card-element .activeLayerInfo=${e} .cssEffectFilter=${e.cssEffectFilter??void 0} .stacked=${this.stacked} .headingLevel=${this.headingLevel} .layer=${e.layer} .legendElement=${n} .messages=${this.messages}></arcgis-legend-card-element>`;s&&i.push(s)}}},Ew.properties={stacked:16,activeLayerInfos:0,headingLevel:9,messages:0,view:0,layout:1,type:32},Ew.styles=Ydt,Ew);yr("arcgis-legend-card-view",Xdt);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.7 */const Qdt=ct`.arcgis-legend__size-ramp--container{margin-left:var(--calcite-spacing-sm);display:table}:dir(rtl) .arcgis-legend__size-ramp--container{margin-right:var(--calcite-spacing-sm);margin-left:0;overflow:auto}.arcgis-legend__size-ramp--row{display:table-row}.arcgis-legend__size-ramp--cell{padding:var(--calcite-spacing-xxs) 0;min-width:100px;vertical-align:middle;word-break:break-word;display:table-cell}.arcgis-legend__size-ramp--label{padding-right:var(--calcite-spacing-sm);padding-left:var(--calcite-spacing-sm);max-width:250px;word-break:normal;word-wrap:normal;font-size:var(--calcite-font-size-sm)}.arcgis-legend__size-ramp--symbol-container{min-width:10px;text-align:center}.arcgis-legend__size-ramp--symbol{display:flex;justify-content:center}`,Nb={container:"arcgis-legend__size-ramp--container",row:"arcgis-legend__size-ramp--row",cell:"arcgis-legend__size-ramp--cell",label:"arcgis-legend__size-ramp--label",symbol:"arcgis-legend__size-ramp--symbol",symbolContainer:"arcgis-legend__size-ramp--symbol-container"};var kw;let Kdt=(kw=class extends dt{constructor(){super(...arguments),this.legendElement=null}render(){const e=this.legendElement.infos.map(i=>this._renderRow(i)).filter(Boolean);return e.length?this.legendElement.theme==="spike"?q`<arcgis-legend-spike-ramp .legendElement=${this.legendElement} .messages=${this.messages}></arcgis-legend-spike-ramp>`:q`<div class=${H(Nb.container)}>${e}</div>`:null}_renderRow(e){const{preview:i}=e;if(!i)return null;const r=Bm(this.messages,e.label,!1);return qp(i,Xm(this.messages,r)),q`<div class=${H(Nb.row)}><div class=${H(ar(Nb.cell,Nb.symbolContainer))}><div class=${H(Nb.symbol)}>${i}</div></div><div class=${H(ar(Nb.cell,Nb.label))}>${r}</div></div>`}},kw.properties={legendElement:0,messages:0},kw.styles=Qdt,kw);yr("arcgis-legend-classic-size-ramp",Kdt);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.7 */const eht=ct`.arcgis-legend__layer-row{display:flex}.arcgis-legend__layer-cell{padding:var(--calcite-spacing-xxs) 0;min-width:100px;vertical-align:middle;word-break:break-word}.arcgis-legend__layer-cell--symbols{min-width:10px;text-align:center}.arcgis-legend__layer-cell--info{padding-right:var(--calcite-spacing-sm);padding-left:var(--calcite-spacing-sm);max-width:250px;word-break:normal;word-wrap:normal;font-size:var(--calcite-font-size-sm)}.arcgis-legend__ramps{margin-left:var(--calcite-spacing-sm)}:dir(rtl) .arcgis-legend__ramps{margin-right:var(--calcite-spacing-sm);margin-left:auto}.arcgis-legend__color-ramp{width:24px}.arcgis-legend__opacity-ramp{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2hpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDowMTgwMTE3NDA3MjA2ODExODcxRkM3N0RBQzA4QkVDRSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpEOTY4RkNFNjM1MzYxMUU0ODlDMUFFQ0M2REU5QzFCNCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpEOTY4RkNFNTM1MzYxMUU0ODlDMUFFQ0M2REU5QzFCNCIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1LjEgTWFjaW50b3NoIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MDE4MDExNzQwNzIwNjgxMTg3MUZDNzdEQUMwOEJFQ0UiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MDE4MDExNzQwNzIwNjgxMTg3MUZDNzdEQUMwOEJFQ0UiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6SLS5VAAAAKElEQVR42mI8c+YMAwwYGxvD2UwMOADpEoz///+Hc86ePUsLOwACDABC1ghwV8TLOQAAAABJRU5ErkJggg==)}.arcgis-legend__ramp-labels{display:flex;flex-flow:column nowrap;justify-content:space-between}.arcgis-legend__ramp-label{position:relative;padding:0 var(--calcite-spacing-sm);line-height:var(--calcite-font-size-sm);white-space:nowrap;font-size:var(--calcite-font-size-sm)}.arcgis-legend__ramp-label:before{display:block;position:absolute;top:.25em;right:100%;border-width:3px 4px 3px 0;border-style:solid;border-color:transparent var(--calcite-color-text-1) transparent transparent;width:0;height:0;content:""}.arcgis-legend__ramp-label:first-child{margin-top:calc(var(--calcite-font-size-sm) / 3 * -1)}.arcgis-legend__ramp-label:last-child{bottom:calc(var(--calcite-font-size-sm) * .25 * -1)}.arcgis-legend-layer-caption{display:table-caption;padding:var(--calcite-spacing-sm) 0}:dir(rtl) .arcgis-legend__ramp-label:before{right:auto;left:100%;border-width:3px 0 3px 4px;border-color:transparent transparent transparent var(--calcite-color-text-1)}`,ny={layerRow:"arcgis-legend__layer-row",layerInfo:"arcgis-legend__layer-cell arcgis-legend__layer-cell--info",symbolContainer:"arcgis-legend__layer-cell arcgis-legend__layer-cell--symbols",rampContainer:"arcgis-legend__ramps",colorRamp:"arcgis-legend__color-ramp",opacityRamp:"arcgis-legend__opacity-ramp",rampLabelsContainer:"arcgis-legend__ramp-labels",rampLabel:"arcgis-legend__ramp-label"};var Aw;let tht=(Aw=class extends dt{constructor(){super(...arguments),this.legendElement=null,this.opacity=1}get _preview(){const e=this.legendElement.preview;if(!e)return null;const i=this.legendElement.type==="opacity-ramp",r=i?ny.opacityRamp:"";e.className=`${ny.colorRamp} ${r}`,this.opacity!=null&&(e.style.opacity=this.opacity.toString());const n=i?this.messages.previewOpacityRampAriaLabel:this.messages.previewColorRampAriaLabel;return qp(e,n),e}render(){const{legendElement:e,_preview:i}=this;if(!i)return null;const r={height:i.style.height};return q`<div class=${H(ny.layerRow)}><div class=${H(ny.symbolContainer)}><div class=${H(ny.rampContainer)}>${i}</div></div><div class=${H(ny.layerInfo)}><div class=${H(ny.rampLabelsContainer)} style=${qt(r)}>${e.infos.map(n=>this._renderRampLabel(n,e.type))}</div></div></div>`}_renderRampLabel(e,i){return q`<div class=${H(e.label?ny.rampLabel:void 0)}>${xTe(e,i,this.messages)}</div>`}},Aw.properties={_preview:16,legendElement:0,opacity:9,messages:0},Aw.styles=eht,Aw);yr("arcgis-legend-classic-color-ramp",tht);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.7 */const iht=ct`.arcgis-legend__layer-body{margin-left:var(--calcite-spacing-sm);display:table}:dir(rtl) .arcgis-legend__layer-body{margin-right:var(--calcite-spacing-sm);margin-left:0;overflow:auto}.arcgis-legend__layer-row{display:table-row}.arcgis-legend__layer-cell{display:table-cell;padding:var(--calcite-spacing-xxs) 0;min-width:100px;vertical-align:middle;word-break:break-word}.arcgis-legend__layer-cell--info{padding-right:var(--calcite-spacing-sm);padding-left:var(--calcite-spacing-sm);max-width:250px;word-break:normal;word-wrap:normal;font-size:var(--calcite-font-size-sm)}.arcgis-legend__symbol{display:flex;justify-content:center}.arcgis-legend__ramps{margin-left:var(--calcite-spacing-md)}:dir(rtl) .arcgis-legend__ramps{margin-right:var(--calcite-spacing-md);margin-left:auto}.arcgis-legend__ramp-labels{display:flex;flex-flow:column nowrap;justify-content:space-between}.arcgis-legend__ramp-label{position:relative;padding:0 var(--calcite-spacing-sm);line-height:1em;white-space:nowrap;font-size:var(--calcite-font-size-sm)}.arcgis-legend__ramp-label:before{display:block;position:absolute;top:.25em;right:100%;border-width:3px 4px 3px 0;border-style:solid;border-color:transparent var(--calcite-color-text-1) transparent transparent;width:0;height:0;content:""}.arcgis-legend__ramp-label:first-child{margin-top:calc(var(--calcite-font-size-sm) / 3 * -1)}.arcgis-legend__ramp-label:last-child{bottom:calc(var(--calcite-font-size-sm) * .25 * -1)}:dir(rtl) .arcgis-legend__ramp-label:before{right:auto;left:100%;border-width:3px 0 3px 4px;border-color:transparent transparent transparent var(--calcite-color-text-1)}.arcgis-univariate-above-and-below-ramp__label{position:relative;margin-left:7px;line-height:1em;white-space:nowrap;font-size:var(--calcite-font-size-sm)}.arcgis-univariate-above-and-below-ramp__label:before{display:block;position:absolute;top:.45em;left:-19px;border-width:1px 0 0;border-style:solid;width:14px;height:0;content:""}.arcgis-univariate-above-and-below-ramp__label:first-child{top:calc(var(--calcite-font-size-sm) / 2.2 * -1)}.arcgis-univariate-above-and-below-ramp__label:last-child{bottom:calc(var(--calcite-font-size-sm) / 2.2 * -1)}:dir(rtl) .arcgis-univariate-above-and-below-ramp__label{margin-right:var(--calcite-spacing-sm);margin-left:auto}:dir(rtl) .arcgis-univariate-above-and-below-ramp__label:before{right:-19px;left:auto}.arcgis-univariate-above-and-below-ramp__symbol{display:flex;align-items:center;justify-content:center}`,qc={layerBody:"arcgis-legend__layer-body",layerRow:"arcgis-legend__layer-row",layerInfo:"arcgis-legend__layer-cell arcgis-legend__layer-cell--info",symbol:"arcgis-legend__symbol",rampContainer:"arcgis-legend__ramps",rampLabelsContainer:"arcgis-legend__ramp-labels",rampLabel:"arcgis-legend__ramp-label",univariateAboveAndBelowLabel:"arcgis-univariate-above-and-below-ramp__label"};var Pw;let rht=(Pw=class extends dt{constructor(){super(...arguments),this.legendElement=null,this.opacity=1}render(){const{legendElement:e,opacity:i}=this,{sizeRampElement:r,colorRampElement:n}=ATe(e,this.messages,i);if(!r)return null;const s=this.messages.previewColorRampAriaLabel,a=gT(r,"above",!0),o=gT(r,"below",!0),l=12,c=mT(n,{width:l,height:a,rampAlignment:"vertical",opacity:i,type:"above",cssEffectFilter:this.cssEffectFilter,ariaLabel:s}),h=mT(n,{width:l,height:o,rampAlignment:"vertical",opacity:i,type:"below",cssEffectFilter:this.cssEffectFilter,ariaLabel:s}),m=Y5(r),g=r.infos.map(z=>z.label),v=g.map((z,U)=>U===0?q`<div class=${H(z?c?qc.univariateAboveAndBelowLabel:qc.rampLabel:void 0)}>${z}</div>`:U===2?q`<div></div>`:null),b=g.length-1,x=Math.floor(g.length/2),$=g.map((z,U)=>U===x||U===b?q`<div class=${H(z?c?qc.univariateAboveAndBelowLabel:qc.rampLabel:void 0)}>${z}</div>`:null),M={display:"table-cell",verticalAlign:"middle"},k={marginTop:`${m}px`},A={height:`${a}px`},L={height:`${o}px`};return q`<div style=${qt(OTe)}><div class=${H(qc.layerBody)}>${r.infos.map((z,U)=>q`<div class=${H(qc.layerRow)}><div class=${H(qc.symbol)} style=${qt(M)}>${z.preview}</div>${!c&&U%2===0?q`<div class=${H(qc.layerInfo)}>${g[U]}</div>`:null}</div>`)}</div>${c?q`<div style=${qt(k)}><div style=${qt(_G)}><div style=${qt(E$)}><div class=${H(qc.rampContainer)}>${c}</div></div><div style=${qt(E$)}><div class=${H(qc.rampLabelsContainer)} style=${qt(A)}>${v}</div></div></div><div style=${qt(_G)}><div style=${qt(E$)}><div class=${H(qc.rampContainer)}>${h}</div></div><div style=${qt(E$)}><div class=${H(qc.rampLabelsContainer)} style=${qt(L)}>${$}</div></div></div></div>`:null}</div>`}},Pw.properties={cssEffectFilter:1,legendElement:0,opacity:9,messages:0},Pw.styles=iht,Pw);yr("arcgis-legend-classic-univariate-above-and-below-ramp",rht);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.7 */const nht=ct`.arcgis-legend__layer-body{margin-left:var(--calcite-spacing-sm)}:dir(rtl) .arcgis-legend__layer-body{margin-right:var(--calcite-spacing-sm);margin-left:0;overflow:auto}.arcgis-legend__layer-row,.arcgis-legend__symbol{display:flex;justify-content:center}.arcgis-legend__ramps{margin-left:var(--calcite-spacing-md)}:dir(rtl) .arcgis-legend__ramps{margin-right:var(--calcite-spacing-md);margin-left:auto}.arcgis-legend__size-ramp~.arcgis-legend__layer-cell--info{width:80%;max-width:80%}.arcgis-legend__ramp-labels{display:flex;flex-flow:column nowrap;justify-content:space-between}.arcgis-legend__ramp-label{position:relative;padding:0 var(--calcite-spacing-sm);line-height:1em;white-space:nowrap;font-size:var(--calcite-font-size-sm)}.arcgis-legend__ramp-label:before{display:block;position:absolute;top:.25em;right:100%;border-width:3px 4px 3px 0;border-style:solid;border-color:transparent var(--calcite-color-text-1) transparent transparent;width:0;height:0;content:""}.arcgis-legend__ramp-label:first-child{margin-top:calc(var(--calcite-font-size-sm) / 3 * -1)}.arcgis-legend__ramp-label:last-child{bottom:calc(var(--calcite-font-size-sm) * .25 * -1)}:dir(rtl) .arcgis-legend__ramp-label:before{right:auto;left:100%;border-width:3px 0 3px 4px;border-color:transparent transparent transparent var(--calcite-color-text-1)}.arcgis-legend__univariate-label{position:relative;margin-left:7px;line-height:1em;white-space:nowrap;font-size:var(--calcite-font-size-sm)}.arcgis-legend__univariate-label:before{display:block;position:absolute;top:.45em;left:-19px;border-width:1px 0 0;border-style:solid;width:14px;height:0;content:""}.arcgis-legend__univariate-label:first-child{top:calc(var(--calcite-font-size-sm) / 2.2 * -1)}.arcgis-legend__univariate-label:last-child{bottom:calc(var(--calcite-font-size-sm) / 2.2 * -1)}:dir(rtl) .arcgis-legend__univariate-label{margin-right:var(--calcite-spacing-sm);margin-left:auto}:dir(rtl) .arcgis-legend__univariate-label:before{right:-19px;left:auto}.arcgis-univariate-above-and-below-ramp__symbol{display:flex;align-items:center;justify-content:center}`,sy={layerBody:"arcgis-legend__layer-body",layerRow:"arcgis-legend__layer-row",symbol:"arcgis-legend__symbol",rampContainer:"arcgis-legend__ramps",sizeRamp:"arcgis-legend__size-ramp",rampLabelsContainer:"arcgis-legend__ramp-labels",rampLabel:"arcgis-legend__ramp-label",univariateLabel:"arcgis-legend__univariate-label"};var Ow;let sht=(Ow=class extends dt{constructor(){super(...arguments),this.legendElement=null,this.opacity=1}render(){const{legendElement:e,opacity:i}=this,{sizeRampElement:r,colorRampElement:n}=PTe(e,this.messages);if(!r)return null;const s=Y5(r),a=12,o=gT(r,"full",!1),l=mT(n,{width:a,height:o,rampAlignment:"vertical",opacity:i,type:"full",cssEffectFilter:this.cssEffectFilter,ariaLabel:this.messages.previewColorRampAriaLabel}),c=r.infos.length-1,h=r.infos.map((b,x)=>x===0||x===c?q`<div class=${H(b.label?n?sy.univariateLabel:sy.rampLabel:void 0)}>${b.label}</div>`:null),m={display:"table-cell",verticalAlign:"middle"},g={marginTop:`${s}px`},v={height:`${o}px`};return q`<div style=${qt(OTe)}><div class=${H(sy.layerBody)}>${r.infos.map(b=>q`<div class=${H(ar(sy.layerRow,sy.sizeRamp))}><div class=${H(sy.symbol)} style=${qt(m)}>${b.preview}</div></div>`)}</div><div style=${qt(g)}><div style=${qt(_G)}><div style=${qt(E$)}><div class=${H(sy.rampContainer)}>${l}</div></div><div style=${qt(E$)}><div class=${H(sy.rampLabelsContainer)} style=${qt(v)}>${h}</div></div></div></div></div>`}},Ow.properties={cssEffectFilter:1,legendElement:0,opacity:9,messages:0},Ow.styles=nht,Ow);yr("arcgis-legend-classic-univariate-color-size-ramp",sht);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.7 */const aht=ct`.arcgis-legend__layer-table{display:flex;flex-flow:column;margin-bottom:var(--calcite-spacing-md);width:100%}.arcgis-legend__layer-table--size-ramp{display:table}.arcgis-legend__layer-table--size-ramp .arcgis-legend__layer-cell{display:table-cell}.arcgis-legend__layer-caption{display:table-caption;padding:var(--calcite-spacing-sm) 0;word-break:break-word}.arcgis-legend__layer-body{margin-left:var(--calcite-spacing-sm)}:dir(rtl) .arcgis-legend__layer-body{margin-right:var(--calcite-spacing-sm);margin-left:0;overflow:auto}.arcgis-legend__layer-row{display:flex}.arcgis-legend__layer-table--size-ramp .arcgis-legend__layer-row{display:table-row}.arcgis-legend__layer-cell{padding:var(--calcite-spacing-xxs) 0;min-width:100px;vertical-align:middle;word-break:break-word;display:flex;align-items:center}.arcgis-legend__layer-cell--info{padding-right:var(--calcite-spacing-sm);padding-left:var(--calcite-spacing-sm);max-width:250px;word-break:normal;word-wrap:normal;font-size:var(--calcite-font-size-sm)}.arcgis-legend__imagery-layer-image--stretched{display:block;margin-bottom:-2px}.arcgis-legend__imagery-layer-info--stretched{padding:0 2px;vertical-align:top}.arcgis-legend__layer-cell--symbols{min-width:10px;text-align:center}.arcgis-legend__symbol{display:flex;justify-content:center}`,Hc={layerTable:"arcgis-legend__layer-table",layerTableSizeRamp:"arcgis-legend__layer-table--size-ramp",layerCaption:"arcgis-legend__layer-caption",layerBody:"arcgis-legend__layer-body",layerRow:"arcgis-legend__layer-row",layerInfo:"arcgis-legend__layer-cell arcgis-legend__layer-cell--info",imageryLayerStretchedImage:"arcgis-legend__imagery-layer-image--stretched",imageryLayerInfoStretched:"arcgis-legend__imagery-layer-info--stretched",symbolContainer:"arcgis-legend__layer-cell arcgis-legend__layer-cell--symbols",symbol:"arcgis-legend__symbol"};var Lw;let oht=(Lw=class extends dt{render(){const e=this._renderLegendElement(),i=_Te(this.legendElement,this.messages),r=i?q`<div class=${H(Hc.layerCaption)}>${i}</div>`:null,n={[Hc.layerTableSizeRamp]:this.legendElement.type==="size-ramp"};return q`<section class=${H(ar(Hc.layerTable,n))}>${r}${e}</section>`}_renderLegendElement(){switch(this.legendElement.type){case"symbol-table":return this._renderSymbolTable(this.legendElement);case"size-ramp":return q`<arcgis-legend-classic-size-ramp .legendElement=${this.legendElement} .messages=${this.messages}></arcgis-legend-classic-size-ramp>`;case"color-ramp":case"opacity-ramp":case"heatmap-ramp":case"stretch-ramp":return q`<arcgis-legend-classic-color-ramp .legendElement=${this.legendElement} .messages=${this.messages} .opacity=${this.layer.opacity}></arcgis-legend-classic-color-ramp>`;case"relationship-ramp":return q`<arcgis-legend-relationship-ramp .cssEffectFilter=${this.cssEffectFilter} .legendElement=${this.legendElement} .opacity=${this.layer.opacity} .messages=${this.messages}></arcgis-legend-relationship-ramp>`;case"pie-chart-ramp":{const{preview:e}=this.legendElement;return qp(e,this.messages.previewPieChartAriaLabel),q`<div>${e}</div>`}case"univariate-above-and-below-ramp":return q`<arcgis-legend-classic-univariate-above-and-below-ramp .cssEffectFilter=${this.cssEffectFilter} .legendElement=${this.legendElement} .messages=${this.messages} .opacity=${this.layer.opacity}></arcgis-legend-classic-univariate-above-and-below-ramp>`;case"univariate-color-size-ramp":return q`<arcgis-legend-classic-univariate-color-size-ramp .cssEffectFilter=${this.cssEffectFilter} .legendElement=${this.legendElement} .messages=${this.messages} .opacity=${this.layer.opacity}></arcgis-legend-classic-univariate-color-size-ramp>`;default:return null}}_renderSymbolTable(e){const i=e.infos.map(r=>this._renderElementInfo(r,e.legendType)).filter(Boolean);return i.length?q`<div class=${H(Hc.layerBody)}>${i}</div>`:null}_renderElementInfo(e,i){const{layer:r}=this,n="label"in e?e.label:null;if("type"in e&&e.type)return e?q`<arcgis-legend-classic-element .cssEffectFilter=${this.cssEffectFilter} .layer=${r} .legendElement=${e} .messages=${this.messages}></arcgis-legend-classic-element>`:null;if(!("preview"in e&&e.preview)&&!("src"in e&&e.src))return null;const s=$Te(r,i),a={[Hc.imageryLayerInfoStretched]:s},o={[Hc.imageryLayerInfoStretched]:s};return q`<div class=${H(Hc.layerRow)}><div class=${H(ar(Hc.symbolContainer,o))}>${this._renderPreview(e,s)}</div><div class=${H(ar(Hc.layerInfo,a))}>${Bm(this.messages,n,!1)||""}</div></div>`}_renderPreview(e,i){const{layer:r}=this;if("preview"in e&&e.preview){const{preview:n}=e,s="previewAriaLabel"in e?e.previewAriaLabel:null,a="label"in e?Bm(this.messages,e.label,!1):null;return qp(n,Xm(this.messages,s||a)),q`<div class=${H(Hc.symbol)}>${n}</div>`}return"src"in e&&e.src?this._renderImage(e,r,i):null}_renderImage(e,i,r){const{previewAriaLabel:n,src:s,opacity:a}=e,o=Bm(this.messages,e.label,!1),l={[Hc.imageryLayerStretchedImage]:r,[Hc.symbol]:!r},c={opacity:`${a??i.opacity}`},h=Xm(this.messages,n||o);return q`<img alt=${h??Pe} .ariaLabel=${h} class=${H(ar(l))} height=${e.height??void 0??Pe} src=${s??Pe} style=${qt(c)} width=${e.width??void 0??Pe}>`}},Lw.properties={cssEffectFilter:1,layer:0,legendElement:0,messages:0},Lw.styles=aht,Lw);yr("arcgis-legend-classic-element",oht);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.7 */const lht=ct`.esri-widget__heading{color:var(--calcite-color-text-2);margin:0 0 .5rem;font-weight:var(--calcite-font-weight-semibold)}h1.esri-widget__heading{font-size:var(--calcite-font-size-xl)}h2.esri-widget__heading{font-size:var(--calcite-font-size-md)}h3.esri-widget__heading,h4.esri-widget__heading,h5.esri-widget__heading,h6.esri-widget__heading{font-size:var(--calcite-font-size)}:host{display:block}.arcgis-legend__no-legend{padding:var(--calcite-spacing-sm) var(--calcite-spacing-md)}.arcgis-legend__layer{border-bottom:1px solid var(--calcite-color-border-2);padding:var(--calcite-spacing-sm);word-wrap:break-word}.arcgis-legend__layer:last-child{border-bottom:none}.arcgis-legend__layer--elements{margin-left:var(--calcite-spacing-sm);overflow:auto}.arcgis-legend__layer-child{margin-left:var(--calcite-spacing-sm);padding-right:0;padding-left:0}:dir(rtl) .arcgis-legend__layer--elements,:dir(rtl) .arcgis-legend__layer-child{margin-right:var(--calcite-spacing-sm);margin-left:0;overflow:auto}`,RM={layer:"arcgis-legend__layer",layerElements:"arcgis-legend__layer--elements",layerChild:"arcgis-legend__layer-child",noLegend:"arcgis-legend__no-legend"};var Fw;let cht=(Fw=class extends dt{constructor(){super(...arguments),this.headingLevel=3,this.type="classic"}render(){var i;const e=(i=this.activeLayerInfos)==null?void 0:i.toArray().map(r=>this._renderLegendForLayer(r)).filter(Boolean);return e!=null&&e.length?q`<section>${e}</section>`:q`<div class=${H(RM.noLegend)}>${this.messages.noLegend}</div>`}_renderLegendForLayer(e){if(!e.ready)return null;const i=e.title?JE({level:this.headingLevel,children:e.title}):null;if(e.children.length){const r=e.children.toArray().map(n=>this._renderLegendForLayer(n));return q`<section class=${H(RM.layer)}>${i}${r}</section>`}return this._renderLegendElementsForLayer(e,i)}_renderLegendElementsForLayer(e,i){var a;const r=(a=e.legendElements)==null?void 0:a.filter(Boolean);if(!(r!=null&&r.length))return null;const n=r.map(o=>q`<arcgis-legend-classic-element .cssEffectFilter=${e.cssEffectFilter??void 0} .layer=${e.layer} .legendElement=${o} .messages=${this.messages}></arcgis-legend-classic-element>`),s={[RM.layerChild]:!!e.parent};return q`<section class=${H(ar(RM.layer,s))}>${i}<div class=${H(RM.layerElements)}>${n}</div></section>`}},Fw.properties={activeLayerInfos:0,headingLevel:9,type:32,messages:0},Fw.styles=lht,Fw);yr("arcgis-legend-classic-view",cht);function iue(t,e){const i=t.featureReduction;return i&&i.type!=="selection"&&(!("maxScale"in i)||!i.maxScale||i.maxScale<e.scale)?i:null}const XE=-1;let dd=class extends et{constructor(e){super(e),this._from=null,this._to=null,this._final=null,this._current=[],this._time=0,this.duration=ve("mapview-transitions-duration"),this.effects=[]}set effect(e){if(this._get("effect")!==(e=e||"")){this._set("effect",e);try{this._transitionTo(rue(e))}catch(i){this._transitionTo([]),Ie.getLogger(this).warn("Invalid Effect",{effect:e,error:i})}}}get final(){return this._final}get hasEffects(){return this.transitioning||!!this.effects.length}set scale(e){this._updateForScale(e)}get transitioning(){return this._to!==null}canTransitionTo(e){try{return this.scale>0&&nue(this._current,rue(e),this.scale)}catch{return!1}}transitionStep(e,i){this._applyTimeTransition(e),this._updateForScale(i)}endTransition(){this._applyTimeTransition(this.duration)}_transitionTo(e){this.scale>0&&nue(this._current,e,this.scale)?(this._final=e,this._to=he(e),uht(this._current,this._to,this.scale),this._from=he(this._current),this._time=0):(this._from=this._to=this._final=null,this._current=e),this._set("effects",this._current[0]?he(this._current[0].effects):[])}_applyTimeTransition(e){if(!(this._to&&this._from&&this._current&&this._final))return;this._time+=e;const i=Math.min(1,this._time/this.duration);for(let r=0;r<this._current.length;r++){const n=this._current[r],s=this._from[r],a=this._to[r];n.scale=dht(s.scale,a.scale,i);for(let o=0;o<n.effects.length;o++){const l=n.effects[o],c=s.effects[o],h=a.effects[o];l.interpolate(c,h,i)}}i===1&&(this._current=this._final,this._set("effects",this._current[0]?he(this._current[0].effects):[]),this._from=this._to=this._final=null)}_updateForScale(e){if(this._set("scale",e),this._current.length===0)return;const i=this._current,r=this._current.length-1;let n,s,a=1;if(i.length===1||e>=i[0].scale)s=n=i[0].effects;else if(e<=i[r].scale)s=n=i[r].effects;else for(let o=0;o<r;o++){const l=i[o],c=i[o+1];if(l.scale>=e&&c.scale<=e){a=(e-l.scale)/(c.scale-l.scale),n=l.effects,s=c.effects;break}}for(let o=0;o<this.effects.length;o++)this.effects[o].interpolate(n[o],s[o],a)}};function rue(t){const e=HY(t)||[];return hht(e)?[{scale:XE,effects:e}]:e}function nue(t,e,i){var r,n,s,a;return!((r=t[0])!=null&&r.effects)||!((n=e[0])!=null&&n.effects)?!0:!((((s=t[0])==null?void 0:s.scale)===XE||((a=e[0])==null?void 0:a.scale)===XE)&&(t.length>1||e.length>1)&&i<=0)&&hbe(t[0].effects,e[0].effects)}function uht(t,e,i){const r=t.length>e.length?t:e,n=t.length>e.length?e:t,s=n[n.length-1],a=(s==null?void 0:s.scale)??i,o=(s==null?void 0:s.effects)??[];for(let l=n.length;l<r.length;l++)n.push({scale:a,effects:[...o]});for(let l=0;l<r.length;l++)n[l].scale=n[l].scale===XE?i:n[l].scale,r[l].scale=r[l].scale===XE?i:r[l].scale,pbe(n[l].effects,r[l].effects)}function dht(t,e,i){return t+(e-t)*i}function hht(t){const e=t[0];return!!e&&"type"in e}d([f()],dd.prototype,"_to",void 0),d([f()],dd.prototype,"duration",void 0),d([f({value:""})],dd.prototype,"effect",null),d([f({readOnly:!0})],dd.prototype,"effects",void 0),d([f({readOnly:!0})],dd.prototype,"final",null),d([f({readOnly:!0})],dd.prototype,"hasEffects",null),d([f({value:0})],dd.prototype,"scale",null),d([f({readOnly:!0})],dd.prototype,"transitioning",null),dd=d([V("esri.layers.effects.EffectView")],dd);function MPt(t){var i;const e=t.layer;return"floorInfo"in e&&((i=e.floorInfo)!=null&&i.floorField)&&"floors"in t.view?LTe(t.view.floors,e.floorInfo.floorField):null}function sue(t,e){var i;return"floorInfo"in e&&((i=e.floorInfo)!=null&&i.floorField)?LTe(t,e.floorInfo.floorField):null}function LTe(t,e){if(!(t!=null&&t.length))return null;const i=t.filter(r=>r!=="").map(r=>`'${r}'`);return i.push("''"),`${e} IN (${i.join(",")}) OR ${e} IS NULL`}function CPt(t,e,i){return e.flatten(({sublayers:n})=>n).length!==t.length?!0:!!t.some(n=>n.originIdOf("minScale")>i||n.originIdOf("maxScale")>i||n.originIdOf("renderer")>i||n.originIdOf("labelingInfo")>i||n.originIdOf("opacity")>i||n.originIdOf("labelsVisible")>i||n.originIdOf("source")>i)||!FTe(t,e)}function pht(t,e,i){return!!t.some(r=>{var o,l,c;const n=r.source,s=!n||n.type==="map-layer"&&n.mapLayerId===r.id&&(n.gdbVersion==null||n.gdbVersion===i);r.commitProperty("renderer"),r.commitProperty("labelingInfo"),r.commitProperty("opacity"),r.commitProperty("labelsVisible"),r.commitProperty("orderBy");const a=((c=(l=(o=r.layer)==null?void 0:o.capabilities)==null?void 0:l.exportMap)==null?void 0:c.supportsSublayerOrderBy)??!1;return!s||r.originIdOf("renderer")>2||r.originIdOf("labelingInfo")>2||r.originIdOf("opacity")>2||r.originIdOf("labelsVisible")>2||a&&r.originIdOf("orderBy")>2})||!FTe(t,e)}function FTe(t,e){if(!(t!=null&&t.length)||e==null)return!0;const i=e.slice().reverse().flatten(({sublayers:s})=>s&&s.toArray().reverse()).map(s=>s.id).toArray();if(t.length>i.length)return!1;let r=0;const n=i.length;for(const{id:s}of t){for(;r<n&&i[r]!==s;)r++;if(r>=n)return!1}return!0}function EPt(t){return!!t&&t.some(e=>{var i;return e.minScale!=null||((i=e.layerDefinition)==null?void 0:i.minScale)!=null})}const fht={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"};let eu=class extends et{constructor(e){super(e),this.floors=null,this.scale=0}destroy(){this.layer=null}get dynamicLayers(){if(!this.hasDynamicLayers)return null;const e=this.visibleSublayers.map(i=>{const r=sue(this.floors,i);return i.toExportImageJSON(r)});return e.length?JSON.stringify(e):null}get hasDynamicLayers(){return this.layer&&pht(this.visibleSublayers,this.layer.serviceSublayers,this.layer.gdbVersion)}set layer(e){this._get("layer")!==e&&(this._set("layer",e),this.removeHandles("layer"),e&&this.addHandles([e.allSublayers.on("change",()=>this.notifyChange("visibleSublayers")),e.on("sublayer-update",i=>this.notifyChange(fht[i.propertyName]))],"layer"))}get layers(){const e=this.visibleSublayers;return e?e.length?"show:"+e.map(i=>i.id).join(","):"show:-1":null}get layerDefs(){var r;const e=!!((r=this.floors)!=null&&r.length),i=this.visibleSublayers.filter(n=>n.definitionExpression!=null||e&&n.floorInfo!=null);return i.length?JSON.stringify(i.reduce((n,s)=>{const a=sue(this.floors,s),o=ow(a,s.definitionExpression);return o!=null&&(n[s.id]=o),n},{})):null}get version(){this.commitProperty("layers"),this.commitProperty("layerDefs"),this.commitProperty("dynamicLayers");const e=this.layer;return e&&(e.commitProperty("dpi"),e.commitProperty("imageFormat"),e.commitProperty("imageTransparency"),e.commitProperty("gdbVersion")),(this._get("version")||0)+1}get visibleSublayers(){const e=[];if(!this.layer)return e;const i=this.layer.sublayers,r=this.scale,n=a=>{a.visible&&(r===0||HYe(r,a.minScale,a.maxScale))&&(a.sublayers?a.sublayers.forEach(n):e.unshift(a))};i==null||i.forEach(n);const s=this._get("visibleSublayers");return!s||s.length!==e.length||s.some((a,o)=>e[o]!==a)?e:s}toJSON(){const e=this.layer;let i={dpi:e.dpi,format:e.imageFormat,transparent:e.imageTransparency,gdbVersion:e.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?i.dynamicLayers=this.dynamicLayers:i={...i,layers:this.layers,layerDefs:this.layerDefs},i}};d([f({readOnly:!0})],eu.prototype,"dynamicLayers",null),d([f()],eu.prototype,"floors",void 0),d([f({readOnly:!0})],eu.prototype,"hasDynamicLayers",null),d([f()],eu.prototype,"layer",null),d([f({readOnly:!0})],eu.prototype,"layers",null),d([f({readOnly:!0})],eu.prototype,"layerDefs",null),d([f({type:Number})],eu.prototype,"scale",void 0),d([f({readOnly:!0})],eu.prototype,"version",null),d([f({readOnly:!0})],eu.prototype,"visibleSublayers",null),eu=d([V("esri.layers.support.ExportImageParameters")],eu);const mht=9999999e31,ght=2e-7,yht={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],f32:[-34028234663852886e22,34028234663852886e22],f64:[-Number.MAX_VALUE,Number.MAX_VALUE],unknown:void 0,c64:void 0,c128:void 0};function Fz(t){return yht[t]??[-34028234663852886e22,34028234663852886e22]}const vht={u1:1,u2:1,u4:1,u8:1,s8:1,u16:2,s16:2,u32:4,s32:4,f32:4,f64:8,unknown:4,c64:16,c128:32};function bht(t){return vht[t]}function APt(t){return bht(t.pixelType)*t.bandCount}function PPt(t,e){return t==null||e==null?"s32":t<0?t>=-128&&e<128?"s8":t>=-32768&&e<32768?"s16":"s32":e<256?"u8":e<65536?"u16":"u32"}function wht(t){return((t==null?void 0:t.startsWith("s"))||(t==null?void 0:t.startsWith("u")))??!1}function OPt(t,e,i,r){let[n,s]=Fz(i);const a=wht(i);return a&&(n-=1e-5,s+=1e-5),a?i.startsWith("u")?_ht(t,e,r,[n,s]):xht(t,e,r,[n,s]):$ht(t,e,r,[n,s])}function LPt(t,e){for(let i=0;i<e.length;i++)e[i]&&isNaN(t[i])&&(e[i]=0,t[i]=0)}function _ht(t,e,i,r){const[n,s]=r;for(let a=0;a<e.length;a++)if(e[a]){const o=t[a];o<n||o>s?e[a]=0:i[a]=o+.5|0}}function xht(t,e,i,r){const[n,s]=r;for(let a=0;a<e.length;a++)if(e[a]){const o=t[a];o<n||o>s?e[a]=0:i[a]=o+(o>0?.5:-.5)|0}}function $ht(t,e,i,r){const[n,s]=r;for(let a=0;a<e.length;a++)if(e[a]){const o=t[a];o<n||o>s?e[a]=0:i[a]=o}}function FPt(t,e,i){var v,b;if(t.depthCount&&t.depthCount>1)return;const{pixels:r,statistics:n,pixelType:s}=t,a=r[0].length,o=t.bandMasks??[],l=t.mask??new Uint8Array(a).fill(255),c=s==="f32"||s==="f64",h=Fz(s);let m=!1;for(let x=0;x<r.length;x++){const $=typeof e=="number"?e:e[x];if($==null)continue;const M=((v=n==null?void 0:n[x])==null?void 0:v.minValue)??h[0],k=((b=n==null?void 0:n[x])==null?void 0:b.maxValue)??h[1];if(M>$+Number.EPSILON||k<$-Number.EPSILON)continue;const A=o[x]||l.slice(),L=r[x],z=i==null?void 0:i.customFloatTolerance;if(c&&z!==0){let U=z;U||(U=Math.abs($)>=mht?ght*Math.abs($):s==="f32"?2**-23:Number.EPSILON);for(let B=0;B<L.length;B++)A[B]&&Math.abs(L[B]-$)<U&&(L[B]=0,A[B]=0,l[B]=0,m=!0)}else for(let U=0;U<L.length;U++)A[U]&&L[U]===$&&(L[U]=0,A[U]=0,l[U]=0,m=!0);o[x]=A}if(m){const x=t.bandMasks||t.pixels.length>1?o:null;i!=null&&i.matchAllNoData?t.mask=x&&x.length>1?g(x):l:(t.bandMasks=x,t.mask=l)}function g(x){if(x.length<2)return x[0];const $=x[0].length,M=new Uint8Array($).fill(0);for(let k=0;k<x.length;k++){const A=x[k];for(let L=0;L<$;L++)A[L]&&(M[L]=255)}return M}m&&"updateStatistics"in t&&t.updateStatistics()}function RTe(t){return t==null||t.type==="simple"||t.type==="unique-value"||t.type==="class-breaks"||t.type==="dictionary"||t.type==="heatmap"}function RPt(t,e){if(t==null)return null;if(!RTe(t))return new ae("renderer-conversion-3d:unsupported-renderer",`Unsupported renderer of type '${t.type}'`,{renderer:t});switch(t.type){case"simple":return Sht(t,e);case"unique-value":return Tht(t,e);case"class-breaks":return Iht(t,e);case"dictionary":case"heatmap":return null}return null}function lX(t,e){if(!e)return null;if(Array.isArray(e)||(e=[e]),e.length>0){const i=e.map(n=>n.details.symbol.type||n.details.symbol.declaredClass).filter(n=>!!n);i.sort();const r=new Array;return i.forEach((n,s)=>{s!==0&&n===i[s-1]||r.push(n)}),new ae("renderer-conversion-3d:unsupported-symbols",`Renderer contains symbols (${r.join(", ")}) which are not supported in 3D`,{renderer:t,symbolErrors:e})}return null}function Sht(t,e){const i={...Tm,...e,cimFallbackEnabled:!0};return lX(t,oT(t.symbol,i).error)}function Tht(t,e){var s;const i={...Tm,...e,cimFallbackEnabled:!0},r=(s=t.uniqueValueInfos)==null?void 0:s.map(a=>oT(a.symbol,i).error).filter(ln),n=oT(t.defaultSymbol,i);return n.error&&(r==null||r.unshift(n.error)),lX(t,r)}function Iht(t,e){const i={...Tm,...e,cimFallbackEnabled:!0},r=t.classBreakInfos.map(s=>oT(s.symbol,i).error).filter(ln),n=oT(t.defaultSymbol,i);return n.error&&r.unshift(n.error),lX(t,r)}function Mht(t){switch(t){case"circle":return{rings:[[[8.5,.2],[7.06,.33],[5.66,.7],[4.35,1.31],[3.16,2.14],[2.14,3.16],[1.31,4.35],[.7,5.66],[.33,7.06],[.2,8.5],[.33,9.94],[.7,11.34],[1.31,12.65],[2.14,13.84],[3.16,14.86],[4.35,15.69],[5.66,16.3],[7.06,16.67],[8.5,16.8],[9.94,16.67],[11.34,16.3],[12.65,15.69],[13.84,14.86],[14.86,13.84],[15.69,12.65],[16.3,11.34],[16.67,9.94],[16.8,8.5],[16.67,7.06],[16.3,5.66],[15.69,4.35],[14.86,3.16],[13.84,2.14],[12.65,1.31],[11.34,.7],[9.94,.33],[8.5,.2]]]};case"square":return{rings:[[[.5,.5],[.5,16.5],[16.5,16.5],[16.5,.5],[.5,.5]]]};case"diamond":return{rings:[[[8.5,.5],[.2,8.5],[8.5,16.5],[16.5,8.5],[8.5,.5]]]};case"hexagon-pointy":return{rings:[[[15.86,12.75],[15.86,4.25],[8.5,0],[1.14,4.25],[1.14,12.75],[8.5,17],[15.86,12.75]]]};case"hexagon-flat":return{rings:[[[12.75,15.86],[17,8.5],[12.75,1.14],[4.25,1.14],[0,8.5],[4.25,15.86],[12.75,15.86]]]}}}function cX(t){var e;return(t==null?void 0:t.type)==="CIMVectorMarker"?(e=t.markerGraphics)==null?void 0:e[0]:void 0}function zTe(t){var e,i;return((e=t==null?void 0:t.symbol)==null?void 0:e.type)==="CIMPolygonSymbol"?(i=t.symbol.symbolLayers)==null?void 0:i[0]:void 0}function Cht(t,e){(t==null?void 0:t.type)==="CIMVectorMarker"&&e!=null&&(t.size=e)}function Eht(t,e){const i=cX(t);i&&e!=null&&(i.geometry=Mht(e))}function kht(t,e){const i=zTe(cX(t));i&&e!=null&&(i.color=e.toArray())}function Aht(t,e,i){const r=zTe(cX(t));r&&e!=null&&i&&(r.colorLocked=e)}function uX(t,e){var c;const{outerRingSize:i,innerDotSize:r,type:n,color:s,colorLocked:a,primitiveOverrides:o}=e,l=((c=t.data.symbol)==null?void 0:c.type)==="CIMPolygonSymbol"?t.data.symbol.symbolLayers:null;if((l==null?void 0:l.length)===2)for(const h of l){const m=h.primitiveName==="reference-size-outer-ring";Cht(h,m?i:r),Eht(h,n),kht(h,s),Aht(h,a,m)}return i!=null&&r!=null&&(t.data.primitiveOverrides=null),o!==void 0&&(t.data.primitiveOverrides=he(o)),t}function Pht(t,e,i){const r=t.effectiveClusterRenderer;if(!r||!("visualVariables"in r)||!r.visualVariables)return null;const n=r.visualVariables.find(h=>h.type==="size");if(!("stops"in n)||!n.stops)return null;const s=n.stops.find(h=>h.useMinValue),a=n.stops.find(h=>h.useMaxValue);if(s==null||a==null)return null;const o=i.featuresTilingScheme.getClosestInfoForScale(i.scale).level,l=n.field,c=e.getDisplayStatistics(o,l);return c?new Ei({field:n.field,minSize:t.clusterMinSize,minDataValue:c.minValue,maxSize:t.clusterMaxSize,maxDataValue:c.maxValue}):null}const Oht="spike-height-override";function Lht(t){var o;const{strokeColor:e,strokeWidth:i,symbolStyle:r}=t,n=(r==null?void 0:r.includes("solid-fill"))||(r==null?void 0:r.includes("gradient-fill"));let s=e==null?void 0:e.toArray(),a=!1;return r!=null&&r.includes("outline")&&n?a=!0:s=(o=t.color)==null?void 0:o.toArray(),{type:"CIMSolidStroke",effects:Fht(r),enable:!0,colorLocked:a,capStyle:"Round",joinStyle:"Round",lineStyle3D:"Strip",miterLimit:4,width:i??Qi(1),color:s}}function Fht(t){if(!(t!=null&&t.includes("closed")))return[{type:"CIMGeometricEffectAddControlPoints",angleTolerance:90,primitiveName:"spike-control-points"},{type:"CIMGeometricEffectSuppress",suppress:!0,invert:!0,primitiveName:"spike-stroke-suppress"}]}function aue(t){const{color:e,symbolStyle:i}=t,r=i==null?void 0:i.includes("solid-fill"),n=i==null?void 0:i.includes("gradient-fill");if(!r&&!n||!e)return;if(r)return{type:"CIMSolidFill",enable:!0,colorLocked:!1,color:e==null?void 0:e.toArray()};const s=e.clone();return s.a=0,{type:"CIMGradientFill",enable:!0,angle:90,colorRamp:{type:"CIMMultipartColorRamp",colorRamps:[{type:"CIMLinearContinuousColorRamp",fromColor:e.toArray(),toColor:s.toArray()}],weights:[1]},gradientMethod:"Linear",gradientSize:70,gradientSizeUnits:"Relative",gradientType:"Continuous"}}function NTe(t,e){var k,A,L;const{defaultHeight:i,baseWidth:r,color:n,strokeColor:s,primitiveOverrides:a,symbolStyle:o,strokeWidth:l}=e,c=((k=t.data.symbol)==null?void 0:k.type)==="CIMPointSymbol"?t.data.symbol:null,h=c==null?void 0:c.symbolLayers;if(!h)return t;const m=c.effects,g=m==null?void 0:m.find(z=>z.type==="CIMGeometricEffectTaperedPolygon"),v=m==null?void 0:m.find(z=>z.type==="CIMGeometricEffectRadial"&&z.primitiveName===Oht);r!=null&&g&&(g.fromWidth=r),i!=null&&v&&(v.length=i);const b=h==null?void 0:h.find(z=>z.type==="CIMSolidStroke"),x=h==null?void 0:h.find(z=>z.type==="CIMSolidFill"),$=h==null?void 0:h.find(z=>z.type==="CIMGradientFill"),M=((A=$==null?void 0:$.colorRamp)==null?void 0:A.type)==="CIMMultipartColorRamp"&&((L=$.colorRamp.colorRamps[0])==null?void 0:L.type)==="CIMLinearContinuousColorRamp"?$.colorRamp.colorRamps[0]:null;if(o){const z=(x==null?void 0:x.color)??(M==null?void 0:M.fromColor)??(b==null?void 0:b.color),U=n??(z?new Se(z):void 0),B=(b==null?void 0:b.color)??z,X=s??(B?new Se(B):void 0),J=o.includes("solid-fill"),Q=o.includes("gradient-fill");if(J||Q||BU(h,x??$),U){if(J)BU(h,$),x?x.color=U==null?void 0:U.toArray():h.push(aue({...e,color:U}));else if(Q)if(BU(h,x),$){if(M&&n){const le=U.clone();le.a=0,M.fromColor=U.toArray(),M.toColor=le.toArray()}}else h.push(aue({...e,color:U}))}if(b){const le=Lht({...e,strokeColor:X,color:U});b.effects=le.effects,b.color=le.color,b.width=le.width,b.colorLocked=le.colorLocked}}else if(b&&(s&&(b.color=s.toArray()),l!=null&&(b.width=l)),x&&n&&(x.color=n.toArray()),M&&n){const z=n.clone();z.a=0,M.fromColor=n.toArray(),M.toColor=z.toArray()}return a!==void 0&&(t.data.primitiveOverrides=he(a)),t}function BU(t,e){if(!e)return;const i=t.indexOf(e);i!==-1&&t.splice(i,1)}const s3=[["(",")"],[")","("],["<",">"],[">","<"],["[","]"],["]","["],["{","}"],["}","{"],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""]],vT=["","","",""],Rht=["","","",""],zht=["","","",""],Rz=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],Nht=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],Dht=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],jht=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],Vht=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],oue=["","","","","","","","","","","","",""],Uht=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],lue=["",""],Bht=["",""],qht=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],Hht=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],D=0,Ne=1,Ct=2,Nn=3,O=4,Nh=5,xF=6,F=7,Ya=8,_o=9,Ku=10,Nt=11,me=12,Ght=13,Wht=14,Zht=15,Yht=16,Jht=17,vt=18,Xht=["UBAT_L","UBAT_R","UBAT_EN","UBAT_AN","UBAT_ON","UBAT_B","UBAT_S","UBAT_AL","UBAT_WS","UBAT_CS","UBAT_ES","UBAT_ET","UBAT_NSM","UBAT_LRE","UBAT_RLE","UBAT_PDF","UBAT_LRO","UBAT_RLO","UBAT_BN"],Fh=100,Qht=[Fh+0,D,D,D,D,Fh+1,Fh+2,Fh+3,Ne,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,Fh+4,O,O,O,D,O,D,O,D,O,O,O,D,D,O,O,D,D,D,D,D,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,D,D,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,D,D,D,D,D,D,D,D,D,D,D,D,D,D,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,D,D,O,O,D,D,O,O,D,D,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,D,D,D,Fh+5,F,F,Fh+6,Fh+7],Kht=[[vt,vt,vt,vt,vt,vt,vt,vt,vt,xF,Nh,xF,Ya,Nh,vt,vt,vt,vt,vt,vt,vt,vt,vt,vt,vt,vt,vt,vt,Nh,Nh,Nh,xF,Ya,O,O,Nt,Nt,Nt,O,O,O,O,O,Ku,_o,Ku,_o,_o,Ct,Ct,Ct,Ct,Ct,Ct,Ct,Ct,Ct,Ct,_o,O,O,O,O,O,O,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,O,O,O,O,O,O,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,O,O,O,O,vt,vt,vt,vt,vt,vt,Nh,vt,vt,vt,vt,vt,vt,vt,vt,vt,vt,vt,vt,vt,vt,vt,vt,vt,vt,vt,vt,vt,vt,vt,vt,vt,vt,_o,O,Nt,Nt,Nt,Nt,O,O,O,O,D,O,O,vt,O,O,Nt,Nt,Ct,Ct,O,D,O,O,O,Ct,D,O,O,O,O,O,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,O,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,O,D,D,D,D,D,D,D,D],[D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,O,O,O,O,O,O,O,O,O,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,O,O,D,D,D,D,D,D,D,O,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,O,D,O,O,O,O,O,O,O,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,Ne,me,Ne,me,me,Ne,me,me,Ne,me,O,O,O,O,O,O,O,O,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ne,O,O,O,O,O,Ne,Ne,Ne,Ne,Ne,O,O,O,O,O,O,O,O,O,O,O],[Nn,Nn,Nn,Nn,O,O,O,O,F,Nt,Nt,F,_o,F,O,O,me,me,me,me,me,me,me,me,me,me,me,F,O,O,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,Nn,Nn,Nn,Nn,Nn,Nn,Nn,Nn,Nn,Nn,Nt,Nn,Nn,F,F,F,me,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,me,me,me,me,me,me,me,Nn,O,me,me,me,me,me,me,F,F,me,me,O,me,me,me,me,F,F,Ct,Ct,Ct,Ct,Ct,Ct,Ct,Ct,Ct,Ct,F,F,F,F,F,F],[F,F,F,F,F,F,F,F,F,F,F,F,F,F,O,F,F,me,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,O,O,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,me,me,me,me,me,me,me,me,me,me,me,F,O,O,O,O,O,O,O,O,O,O,O,O,O,O,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ne,me,me,me,me,me,me,me,me,me,Ne,Ne,O,O,O,O,Ne,O,O,O,O,O],[Ya,Ya,Ya,Ya,Ya,Ya,Ya,Ya,Ya,Ya,Ya,vt,vt,vt,D,Ne,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,Ya,Nh,Ght,Wht,Zht,Yht,Jht,_o,Nt,Nt,Nt,Nt,Nt,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,_o,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,Ya,vt,vt,vt,vt,vt,O,O,O,O,O,vt,vt,vt,vt,vt,vt,Ct,D,O,O,Ct,Ct,Ct,Ct,Ct,Ct,Ku,Ku,O,O,O,D,Ct,Ct,Ct,Ct,Ct,Ct,Ct,Ct,Ct,Ct,Ku,Ku,O,O,O,O,D,D,D,D,D,D,D,D,D,D,D,D,D,O,O,O,Nt,Nt,Nt,Nt,Nt,Nt,Nt,Nt,Nt,Nt,Nt,Nt,Nt,Nt,Nt,Nt,Nt,Nt,Nt,Nt,Nt,Nt,Nt,Nt,Nt,Nt,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O],[D,D,D,D,D,D,D,O,O,O,O,O,O,O,O,O,O,O,O,D,D,D,D,D,O,O,O,O,O,Ne,me,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ku,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ne,O,Ne,Ne,Ne,Ne,Ne,O,Ne,O,Ne,Ne,O,Ne,Ne,O,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ne,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F],[me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,me,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,me,me,me,me,me,me,me,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,_o,O,_o,O,O,_o,O,O,O,O,O,O,O,O,O,Nt,O,O,Ku,Ku,O,O,O,O,O,Nt,Nt,O,O,O,O,O,F,F,F,F,F,O,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,O,O,vt],[O,O,O,Nt,Nt,Nt,O,O,O,O,O,Ku,_o,Ku,_o,_o,Ct,Ct,Ct,Ct,Ct,Ct,Ct,Ct,Ct,Ct,_o,O,O,O,O,O,O,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,O,O,O,O,O,O,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,O,O,O,O,O,O,O,O,O,O,O,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,O,O,O,D,D,D,D,D,D,O,O,D,D,D,D,D,D,O,O,D,D,D,D,D,D,O,O,D,D,D,O,O,O,Nt,Nt,O,O,O,Nt,Nt,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O]];let ept=class{constructor(){this.inputFormat="ILYNN",this.outputFormat="VLNNN",this.sourceToTarget=[],this.targetToSource=[],this.levels=[]}bidiTransform(e,i,r){if(this.sourceToTarget=[],this.targetToSource=[],!e)return"";if(ypt(this.sourceToTarget,this.targetToSource,e.length),!this.checkParameters(i,r))return e;i=this.inputFormat,r=this.outputFormat;let n=e;const s=bpt,a=due(i.charAt(1)),o=due(r.charAt(1)),l=(i.startsWith("I")?"L":i.charAt(0))+a,c=(r.startsWith("I")?"L":r.charAt(0))+o,h=i.charAt(2)+r.charAt(2);s.defInFormat=l,s.defOutFormat=c,s.defSwap=h;const m=GC(e,l,c,h,s);let g=!1;return r.charAt(1)==="R"?g=!0:r.charAt(1)!=="C"&&r.charAt(1)!=="D"||(g=this.checkContextual(m)==="rtl"),this.sourceToTarget=yc,this.targetToSource=vpt(this.sourceToTarget),Nz=this.targetToSource,n=i.charAt(3)===r.charAt(3)?m:r.charAt(3)==="S"?ipt(g,m):spt(m,g,!0),this.sourceToTarget=yc,this.targetToSource=Nz,this.levels=J5,n}_inputFormatSetter(e){if(!hue.test(e))throw new Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.inputFormat=e}_outputFormatSetter(e){if(!hue.test(e))throw new Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.outputFormat=e}checkParameters(e,i){return e?this._inputFormatSetter(e):e=this.inputFormat,i?this._outputFormatSetter(i):i=this.outputFormat,e!==i}checkContextual(e){let i=zz(e);if(i!=="ltr"&&i!=="rtl"){try{i=document.dir.toLowerCase()}catch{}i!=="ltr"&&i!=="rtl"&&(i="ltr")}return i}hasBidiChar(e){return xpt.test(e)}};function GC(t,e,i,r,n){const s=tpt(t,{inFormat:e,outFormat:i,swap:r},n);if(s.inFormat===s.outFormat)return t;e=s.inFormat,i=s.outFormat,r=s.swap;const a=e.slice(0,1),o=e.slice(1,4),l=i.slice(0,1),c=i.slice(1,4);if(n.inFormat=e,n.outFormat=i,n.swap=r,a==="L"&&i==="VLTR"){if(o==="LTR")return n.dir=Z1,ay(t,n);if(o==="RTL")return n.dir=WC,ay(t,n)}if(a==="V"&&l==="V")return n.dir=o==="RTL"?WC:Z1,qU(t,n);if(a==="L"&&i==="VRTL")return o==="LTR"?(n.dir=Z1,t=ay(t,n)):(n.dir=WC,t=ay(t,n)),qU(t);if(e==="VLTR"&&i==="LLTR")return n.dir=Z1,ay(t,n);if(a==="V"&&l==="L"&&o!==c)return t=qU(t),o==="RTL"?GC(t,"LLTR","VLTR",r,n):GC(t,"LRTL","VRTL",r,n);if(e==="VRTL"&&i==="LRTL")return GC(t,"LRTL","VRTL",r,n);if(a==="L"&&l==="L"){const h=n.swap;return n.swap=h.slice(0,1)+"N",o==="RTL"?(n.dir=WC,t=ay(t,n),n.swap="N"+h.slice(1,3),n.dir=Z1,t=ay(t,n)):(n.dir=Z1,t=ay(t,n),n.swap="N"+h.slice(1,3),t=GC(t,"VLTR","LRTL",n.swap,n)),t}return t}function tpt(t,e,i){if(e.inFormat===void 0&&(e.inFormat=i.defInFormat),e.outFormat===void 0&&(e.outFormat=i.defOutFormat),e.swap===void 0&&(e.swap=i.defSwap),e.inFormat===e.outFormat)return e;const r=e.inFormat.slice(0,1),n=e.outFormat.slice(0,1);let s,a=e.inFormat.slice(1,4),o=e.outFormat.slice(1,4);return a.startsWith("C")&&(s=zz(t),a=s==="ltr"||s==="rtl"?s.toUpperCase():e.inFormat.charAt(2)==="L"?"LTR":"RTL",e.inFormat=r+a),o.startsWith("C")&&(s=zz(t),s==="rtl"?o="RTL":s==="ltr"?(s=npt(t),o=s.toUpperCase()):o=e.outFormat.charAt(2)==="L"?"LTR":"RTL",e.outFormat=n+o),e}function ipt(t,e,i){if(e.length===0)return"";t===void 0&&(t=!0);const r=(e=String(e)).split("");let n=0,s=1,a=r.length;t||(n=r.length-1,s=-1,a=1);const o=rpt(r,n,s,a);let l="";for(let c=0;c<r.length;c++)cpt(o,o.length,c)>-1?(VTe(Nz,c,!t,-1),yc.splice(c,1)):l+=r[c];return l}function rpt(t,e,i,r,n){let s=0;const a=[];let o=0;for(let l=e;l*i<r;l+=i)if(jTe(t[l])||QE(t[l])){if(t[l]===""&&upt(t,l+i,i,r)){t[l]=gpt(t[l+i],s===0?Rht:zht),l+=i,mpt(t,l,i,r),a[o]=l,o++,s=0;continue}const c=t[l];s===1?t[l]=cue(t,l+i,i,r)?fpt(t[l]):HU(t[l],Dht):cue(t,l+i,i,r)===!0?t[l]=HU(t[l],Vht):t[l]=HU(t[l],Nht),QE(c)||(s=1),ppt(c)===!0&&(s=0)}else s=0;return a}function zz(t){const e=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(t);return e?e[0]<="z"?"ltr":"rtl":""}function npt(t){const e=t.split("");return e.reverse(),zz(e.join(""))}function spt(t,e,i){if(t.length===0)return"";e===void 0&&(e=!0);let r="";const n=(t=String(t)).split("");for(let s=0;s<t.length;s++){let a=!1;if(n[s]>=""&&n[s]<"\uFEFF"){const o=t.charCodeAt(s);n[s]>=""&&n[s]<=""?(e?(s>0&&i&&n[s-1]===" "?r=r.slice(0,-1)+"":(r+="",a=!0),r+=vT[(o-65269)/2]):(r+=vT[(o-65269)/2],r+="",s+1<t.length&&i&&n[s+1]===" "?s++:a=!0),a&&(VTe(Nz,s,!0,1),yc.splice(s,0,yc[s]))):r+=Uht[o-65136]}else r+=n[s]}return r}function ay(t,e){const i=t.split(""),r=[];return DTe(i,r,e),opt(i,r,e),uue(2,i,r,e),uue(1,i,r,e),J5=r,i.join("")}function DTe(t,e,i){const r=t.length,n=i.dir?Hht:qht;let s=0,a=-1;const o=[],l=[];i.hiLevel=i.dir,i.lastArabic=!1,i.hasUbatAl=!1,i.hasUbatB=!1,i.hasUbatS=!1;for(let c=0;c<r;c++)o[c]=lpt(t[c]);for(let c=0;c<r;c++){const h=s,m=dpt(t,o,l,c,i);l[c]=m,s=n[h][m];const g=240&s;s&=15;const v=n[s][wpt];if(e[c]=v,g>0)if(g===16){for(let b=a;b<c;b++)e[b]=1;a=-1}else a=-1;if(n[s][_pt])a===-1&&(a=c);else if(a>-1){for(let b=a;b<c;b++)e[b]=v;a=-1}o[c]===Nh&&(e[c]=0),i.hiLevel|=v}i.hasUbatS&&apt(o,e,r,i)}function apt(t,e,i,r){for(let n=0;n<i;n++)if(t[n]===xF){e[n]=r.dir;for(let s=n-1;s>=0&&t[s]===Ya;s--)e[s]=r.dir}}function opt(t,e,i){if(i.hiLevel!==0&&i.swap[0]!==i.swap[1])for(let r=0;r<t.length;r++)e[r]===1&&(t[r]=hpt(t[r]))}function lpt(t){const e=t.charCodeAt(0),i=Qht[e>>8];return i<Fh?i:Kht[i-Fh][255&e]}function qU(t,e){const i=t.split("");if(e){const r=[];DTe(i,r,e),J5=r}return i.reverse(),yc.reverse(),i.join("")}function cpt(t,e,i){for(let r=0;r<e;r++)if(t[r]===i)return r;return-1}function jTe(t){for(let e=0;e<lue.length;e++)if(t>=lue[e]&&t<=Bht[e])return!0;return!1}function cue(t,e,i,r){for(;e*i<r&&QE(t[e]);)e+=i;return!!(e*i<r&&jTe(t[e]))}function upt(t,e,i,r){for(;e*i<r&&QE(t[e]);)e+=i;let n=" ";if(!(e*i<r))return!1;n=t[e];for(let s=0;s<vT.length;s++)if(vT[s]===n)return!0;return!1}function uue(t,e,i,r){if(r.hiLevel<t)return;if(t===1&&r.dir===WC&&!r.hasUbatB)return e.reverse(),void yc.reverse();const n=e.length;let s,a,o,l,c,h=0;for(;h<n;){if(i[h]>=t){for(s=h+1;s<n&&i[s]>=t;)s++;for(a=h,o=s-1;a<o;a++,o--)l=e[a],e[a]=e[o],e[o]=l,c=yc[a],yc[a]=yc[o],yc[o]=c;h=s}h++}}function dpt(t,e,i,r,n){const s=e[r];return{UBAT_L:()=>(n.lastArabic=!1,D),UBAT_R:()=>(n.lastArabic=!1,Ne),UBAT_ON:()=>O,UBAT_AN:()=>Nn,UBAT_EN:()=>n.lastArabic?Nn:Ct,UBAT_AL:()=>(n.lastArabic=!0,n.hasUbatAl=!0,Ne),UBAT_WS:()=>O,UBAT_CS:()=>{let a,o;return r<1||r+1>=e.length||(a=i[r-1])!==Ct&&a!==Nn||(o=e[r+1])!==Ct&&o!==Nn?O:(n.lastArabic&&(o=Nn),o===a?o:O)},UBAT_ES:()=>(r>0?i[r-1]:Nh)===Ct&&r+1<e.length&&e[r+1]===Ct?Ct:O,UBAT_ET:()=>{if(r>0&&i[r-1]===Ct)return Ct;if(n.lastArabic)return O;let a=r+1;const o=e.length;for(;a<o&&e[a]===Nt;)a++;return a<o&&e[a]===Ct?Ct:O},UBAT_NSM:()=>{if(n.inFormat==="VLTR"){const a=e.length;let o=r+1;for(;o<a&&e[o]===me;)o++;if(o<a){const l=t[r].charCodeAt(0),c=l>=1425&&l<=2303||l===64286,h=e[o];if(c&&(h===Ne||h===F))return Ne}}return r<1||e[r-1]===Nh?O:i[r-1]},UBAT_B:()=>(n.lastArabic=!0,n.hasUbatB=!0,n.dir),UBAT_S:()=>(n.hasUbatS=!0,O),UBAT_LRE:()=>(n.lastArabic=!1,O),UBAT_RLE:()=>(n.lastArabic=!1,O),UBAT_LRO:()=>(n.lastArabic=!1,O),UBAT_RLO:()=>(n.lastArabic=!1,O),UBAT_PDF:()=>(n.lastArabic=!1,O),UBAT_BN:()=>O}[Xht[s]]()}function hpt(t){let e,i=0,r=s3.length-1;for(;i<=r;)if(e=Math.floor((i+r)/2),t<s3[e][0])r=e-1;else{if(!(t>s3[e][0]))return s3[e][1];i=e+1}return t}function ppt(t){for(let e=0;e<oue.length;e++)if(oue[e]===t)return!0;return!1}function fpt(t){for(let e=0;e<Rz.length;e++)if(t===Rz[e])return jht[e];return t}function HU(t,e){for(let i=0;i<Rz.length;i++)if(t===Rz[i])return e[i];return t}function QE(t){return t>=""&&t<=""}function due(t){return t==="L"?"LTR":t==="R"?"RTL":t==="C"?"CLR":t==="D"?"CRL":""}function mpt(t,e,i,r){for(;e*i<r&&QE(t[e]);)e+=i;return e*i<r&&(t[e]=" ",!0)}function gpt(t,e){for(let i=0;i<vT.length;i++)if(t===vT[i])return e[i];return t}function ypt(t,e,i){yc=[],J5=[];for(let r=0;r<i;r++)t[r]=r,e[r]=r,yc[r]=r}function vpt(t){const e=new Array(t.length);for(let i=0;i<t.length;i++)e[t[i]]=i;return e}function VTe(t,e,i,r){for(let n=0;n<t.length;n++)(t[n]>e||!i&&t[n]===e)&&(t[n]+=r)}let yc=[],Nz=[],J5=[];const bpt={dir:0,defInFormat:"LLTR",defSwap:"YN",inFormat:"LLTR",outFormat:"VLTR",swap:"YN",hiLevel:0,lastArabic:!1,hasUbatAl:!1,defOutFormat:""},wpt=5,_pt=6,Z1=0,WC=1,hue=/^[(I|V)][(L|RCD)][(Y|N)][(S|N)]N$/,xpt=/[\u0591-\u06ff\ufb1d-\ufefc]/,GU=new ept;function $pt(t){if(t==null)return["",!1];if(!GU.hasBidiChar(t))return[t,!1];let e;return e=GU.checkContextual(t)==="rtl"?"IDNNN":"ICNNN",[GU.bidiTransform(t,e,"VLYSN"),!0]}let Ki=class{static fromOptimized(e,i,r=!1,n=!1,s=1){return new xG().initialize(e,i,r,n,s)}static fromJSON(e,i=!1,r=!1){const[n,s]=pue(e);return new SG().initialize(n,s,i,r,1)}static fromOptimizedCIM(e,i,r=!1,n=!1,s=1){return new fue().initialize(e,i,r,n,s)}static fromJSONCIM(e,i=!1,r=!1,n=1){const[s,a]=pue(e);return new mue().initialize(s,a,i,r,n)}static fromFeatureSetReader(e){const i=e.readGeometryForDisplay(),r=e.geometryType;return i&&r?this.fromOptimized(i,r):null}static fromFeatureSetReaderCIM(e){const i=e.readGeometryForDisplay(),r=e.geometryType;return i&&r?this.fromOptimizedCIM(i,r):null}static createEmptyOptimized(e,i=!1,r=!1,n=1){return new xG().initialize(new Ap,e,i,r,n)}static createEmptyJSON(e,i=!1,r=!1){return new SG().initialize([],e,i,r,1)}static createEmptyOptimizedCIM(e,i=!1,r=!1,n=1){return new fue().initialize(new Ap,e,i,r,n)}static createEmptyJSONCIM(e,i=!1,r=!1,n=1){return new mue().initialize([],e,i,r,n)}asJSON(){const e=kD(this);return this.geometryType==="esriGeometryEnvelope"?{xmin:e[0][0][0],ymin:e[0][0][1],xmax:e[0][2][0],ymax:e[0][2][1]}:this.geometryType==="esriGeometryMultipoint"?{points:e.flat()}:this.geometryType==="esriGeometryPoint"?{x:e[0][0][0],y:e[0][0][1]}:this.geometryType==="esriGeometryPolygon"?{rings:e}:{paths:e}}getCurrentRingArea(){if(this.pathSize<3)return 0;let e,i,r=0;if(this.seekPathStart(),!this.nextPoint())return 0;e=this.x,i=this.y;const n=e,s=i;for(;this.nextPoint();)r+=(e-this.x)*(i+this.y),e=this.x,i=this.y;return r+=(e-n)*(i+s),-.5*r}invertY(){this.yFactor*=-1}},xG=class $G extends Ki{constructor(){super(...arguments),this._end=-1}initialize(e,i,r,n,s){return this.hasZ=r,this.hasM=n,this.geometryType=i,this._stride=2+Number(r)+Number(n),this._geometry=e,this._pathIndex=-1,this._pathOffset=0,this._pointOffset=-this._stride,this._end=-1,this.yFactor=s,this}reset(){this.initialize(this._geometry,this.geometryType,this.hasZ,this.hasM,this.yFactor)}seekPath(e){if(e>=0&&e<this.totalSize){if(this._pathIndex<e)for(;this._pathIndex<e&&this.nextPath(););else if(this._pathIndex>e)for(;this._pathIndex>e&&this.prevPath(););return!0}return!1}seekPathStart(){this._pointOffset=this._pathOffset-this._stride}seekPathEnd(){this._pointOffset=this._end}seekInPath(e){const i=this._pathOffset+e*this._stride;return i>=0&&i<this._end&&(this._pointOffset=i,!0)}nextPoint(){return(this._pointOffset+=this._stride)<this._end}prevPoint(){return(this._pointOffset-=this._stride)>=this._pathOffset}nextPath(){return!(this.pathIndex>=this.totalSize-1)&&(this._pathIndex>=0&&(this._pathOffset+=this._stride*this.pathSize),this._pathIndex++,this._pointOffset=this._pathOffset-this._stride,this._end=this._pointOffset+this._stride+this._stride*this.pathSize,!0)}prevPath(){return!(this.pathIndex<=0)&&(this._pathIndex--,this._end=this._pathOffset,this._pathOffset-=this._stride*this.pathSize,this._pointOffset=this._pathOffset-this._stride,!0)}getCurrentPath(){const e=this._end,i=this._geometry.coords,r=this._pathOffset;return new $G().initialize(new Ap([this.pathSize],i.slice(r,e)),this.geometryType,this.hasZ,this.hasM,this.yFactor)}pathLength(){const e=this._end,i=this._stride,r=this._geometry.coords;let n=0;for(let s=this._pathOffset+i;s<e;s+=i){const a=r[s-i],o=r[s-i+1],l=r[s]-a,c=r[s+1]-o;n+=Math.sqrt(l*l+c*c)}return n}startPath(){this._geometry.lengths.push(0)}pushPath(e){this.startPath(),this.pushPoints(e)}pushPoint(e){for(let i=0;i<this._stride;++i)this._geometry.coords.push(e[i]);this._geometry.lengths[this.totalSize-1]++}pushXY(e,i){this._geometry.coords.push(e,i),this._geometry.lengths[this.totalSize-1]++}pushPoints(e){for(const i of e)for(let r=0;r<this._stride;++r)this._geometry.coords.push(i[r]);this._geometry.lengths[this.totalSize-1]+=e.length}pushCursor(e){const i=e.asOptimized();this._geometry.coords.push(...i.coords),this._geometry.lengths.push(...i.lengths)}asOptimized(){const e=this._geometry.clone();if(this.yFactor!==1)for(let i=1;i<e.coords.length;i+=this._stride)e.coords[i]*=this.yFactor;return this.geometryType==="esriGeometryPoint"&&(e.lengths.length=0),e}isClosed(){const e=this._geometry.coords,i=this._pathOffset,r=this._end-this._stride;for(let n=0;n<this._stride;n++)if(e[i+n]!==e[r+n])return!1;return!0}clone(){return new $G().initialize(this._geometry.clone(),this.geometryType,this.hasZ,this.hasM,this.yFactor)}get totalPoints(){return this._geometry.isPoint?1:this._geometry.lengths.reduce((e,i)=>e+i)}get pathSize(){const{lengths:e}=this._geometry;return this._geometry.isPoint?1:this._pathIndex<0||this._pathIndex>e.length-1?0:e[this._pathIndex]}get totalSize(){return this._geometry.isPoint?1:this._geometry.lengths.length}get x(){return this._geometry.coords[this._pointOffset]}set x(e){this._geometry.coords[this._pointOffset]=e}get y(){return this.yFactor*this._geometry.coords[this._pointOffset+1]}set y(e){this._geometry.coords[this._pointOffset+1]=this.yFactor*e}get z(){return this._geometry.coords[this._pointOffset+2]}set z(e){this._geometry.coords[this._pointOffset+2]=e}get m(){const e=this.hasZ?3:2;return this._geometry.coords[this._pointOffset+e]}set m(e){this._geometry.coords[this._pointOffset+3]=e}get pathIndex(){return this._pathIndex}get _coordIndex(){return this._pointOffset/this._stride}};function Spt(t){const e=[t.x,t.y];return t.z&&e.push(t.z),t.m&&e.push(t.m),e}function pue(t){return Un(t)?[t.rings,"esriGeometryPolygon"]:La(t)?[t.paths,"esriGeometryPolyline"]:z$(t)?[[t.points],"esriGeometryMultipoint"]:Ro(t)?[[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]],"esriGeometryEnvelope"]:wE(t)?[[[Spt(t)]],"esriGeometryPoint"]:[[],"esriGeometryPolyline"]}let SG=class TG extends Ki{initialize(e,i,r,n,s){return this._paths=e,this.geometryType=i,this.hasZ=r,this.hasM=n,this._pathIndex=this._pointIndex=-1,this.yFactor=s,this._mIndex=this.hasZ?3:2,this}reset(){this._pathIndex=this._pointIndex=-1}seekPath(e){return this._pathIndex=e,this._pointIndex=-1,e>=0&&e<this.totalSize&&(this._currentPath=this._paths[e],!0)}seekPathStart(){this._pointIndex=-1}seekPathEnd(){this._pointIndex=this._currentPath.length}seekInPath(e){return e>=0&&e<this._currentPath.length&&(this._pointIndex=e,this._currentPoint=this._currentPath[this._pointIndex],!0)}nextPoint(){return this._currentPoint=this._currentPath[++this._pointIndex],this._pointIndex<this._currentPath.length}prevPoint(){return this._currentPoint=this._currentPath[--this._pointIndex],this._pointIndex>=0}nextPath(){return this._pointIndex=-1,this._currentPath=this._paths[++this._pathIndex],this._pathIndex<this.totalSize}prevPath(){return this.pathIndex>0&&(this._pointIndex=-1,this._pathIndex--,this._currentPath=this._paths[this._pathIndex],!0)}pathLength(){const e=this._currentPath.length,i=this._currentPath;let r=0;for(let n=1;n<e;n++){const s=i[n-1],a=i[n],o=s[0],l=s[1],c=a[0]-o,h=a[1]-l;r+=Math.sqrt(c*c+h*h)}return r}startPath(){this._paths.push([])}getCurrentPath(){return new TG().initialize([this._currentPath],this.geometryType,this.hasZ,this.hasM,this.yFactor)}pushPath(e){this._paths.push(e)}pushPoint(e){this._paths[this.totalSize-1].push(e)}pushXY(e,i){this._paths[this.totalSize-1].push([e,i])}pushPoints(e){this._paths[this.totalSize-1].push(...e)}pushCursor(e){const i=kD(e);for(const r of i)this.pushPath(r)}asOptimized(){const e=new Ap;if(this.geometryType==="esriGeometryPoint")e.coords.push(...this._paths[0][0]),e.lengths.length=0;else for(const i of this._paths){for(const r of i)e.coords.push(r[0]),e.coords.push(r[1]*this.yFactor),this.hasZ&&e.coords.push(r[2]),this.hasM&&e.coords.push(r[this._mIndex]);e.lengths.push(i.length)}return e}isClosed(){const e=this._currentPath[0],i=this._currentPath[this._currentPath.length-1];for(let r=0;r<e.length;r++)if(e[r]!==i[r])return!1;return!0}clone(){return new TG().initialize(he(this._paths),this.geometryType,this.hasZ,this.hasM,this.yFactor)}get totalPoints(){return this._paths.map(e=>e.length).reduce((e,i)=>e+i)}get pathSize(){return this._pathIndex<0||this._pathIndex>this.totalSize-1?-1:this._paths[this._pathIndex].length}get totalSize(){return this._paths.length}get x(){return this._currentPoint[0]}set x(e){this._currentPoint[0]=e}get y(){return this.yFactor*this._currentPoint[1]}set y(e){this._currentPoint[1]=this.yFactor*e}get z(){return this._currentPoint[2]}set z(e){this._currentPoint[2]=e}get m(){return this._currentPoint[this._mIndex]}set m(e){this._currentPoint[this._mIndex]=e}get pathIndex(){return this._pathIndex}};const a3=4,o3=1;let fue=class UTe extends xG{initialize(e,i,r,n,s){return super.initialize(e,i,r,n,s),this._controlPoints||(this._controlPoints=this._controlPoints=new Array(this.totalSize).fill(void 0).map(a=>new Set)),this}startPath(){super.startPath(),this._controlPoints.push(new Set)}clone(){const e=new UTe().initialize(this._geometry.clone(),this.geometryType,this.hasZ,this.hasM,this.yFactor);return e._controlPoints=this._controlPoints,e}setControlPoint(){this._controlPoints[this.pathIndex].add(this._coordIndex)}getControlPoint(){return this._controlPoints[this.pathIndex].has(this._coordIndex)}setControlPointAt(e){this._controlPoints[this.pathIndex].add(e)}getControlPointAt(e){return this._controlPoints[this.pathIndex].has(e)}},mue=class BTe extends SG{initialize(e,i,r,n,s){return super.initialize(e,i,r,n,s)}clone(){return new BTe().initialize(he(this._paths),this.geometryType,this.hasZ,this.hasM,this.yFactor)}setControlPoint(){this._paths[this.pathIndex][this._pointIndex][a3]=o3}getControlPoint(){return this._paths[this.pathIndex][this._pointIndex][a3]===o3}setControlPointAt(e){this._paths[this.pathIndex][e][a3]=o3}getControlPointAt(e){return this._paths[this.pathIndex][e][a3]===o3}};const Tpt=512;let ki=class ZC{constructor(e,i){this.x=e,this.y=i}static fromArray(e){return new ZC(e[0],e[1])}clone(){return new ZC(this.x,this.y)}equals(e,i){return e===this.x&&i===this.y}isEqual(e){return e.x===this.x&&e.y===this.y}setCoords(e,i){return this.x=e,this.y=i,this}normalize(){const e=this.x,i=this.y,r=Math.sqrt(e*e+i*i);return this.x/=r,this.y/=r,this}rightPerpendicular(){const e=this.x;return this.x=this.y,this.y=-e,this}leftPerpendicular(){const e=this.x;return this.x=-this.y,this.y=e,this}move(e,i){return this.x+=e,this.y+=i,this}assign(e){return this.x=e.x,this.y=e.y,this}assignAdd(e,i){return this.x=e.x+i.x,this.y=e.y+i.y,this}assignSub(e,i){return this.x=e.x-i.x,this.y=e.y-i.y,this}rotate(e,i){const r=this.x,n=this.y;return this.x=r*e-n*i,this.y=r*i+n*e,this}rotateReverse(e,i){const r=this.x,n=this.y;return this.x=r*e+n*i,this.y=-r*i+n*e,this}scale(e){return this.x*=e,this.y*=e,this}length(){const e=this.x,i=this.y;return Math.sqrt(e*e+i*i)}sub(e){return this.x-=e.x,this.y-=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}static distance(e,i){const r=i.x-e.x,n=i.y-e.y;return Math.sqrt(r*r+n*n)}static add(e,i){return new ZC(e.x+i.x,e.y+i.y)}static sub(e,i){return new ZC(e.x-i.x,e.y-i.y)}},l3=class{constructor(e,i,r){this.ratio=e,this.x=i,this.y=r}},Ipt=class{constructor(e,i,r,n=8,s=8){this._lines=[],this._starts=[],this.validateTessellation=!0,this._pixelRatio=n,this._pixelMargin=s,this._tileSize=Tpt*n,this._dz=e,this._yPos=i,this._xPos=r}setPixelMargin(e){e!==this._pixelMargin&&(this._pixelMargin=e,this.setExtent(this._extent))}setExtent(e){this._extent=e,this._finalRatio=this._tileSize/e*(1<<this._dz);let i=this._pixelRatio*this._pixelMargin;i/=this._finalRatio;const r=e>>this._dz;i>r&&(i=r),this._margin=i,this._xmin=r*this._xPos-i,this._ymin=r*this._yPos-i,this._xmax=this._xmin+r+2*i,this._ymax=this._ymin+r+2*i}reset(e){this._type=e,this._lines=[],this._starts=[],this._line=null,this._start=0}moveTo(e,i){this._pushLine(),this._prevIsIn=this._isIn(e,i),this._moveTo(e,i,this._prevIsIn),this._prevPt=new ki(e,i),this._firstPt=new ki(e,i),this._dist=0}lineTo(e,i){const r=this._isIn(e,i),n=new ki(e,i),s=ki.distance(this._prevPt,n);let a,o,l,c,h,m,g,v;if(r)this._prevIsIn?this._lineTo(e,i,!0):(a=this._prevPt,o=n,l=this._intersect(o,a),this._start=this._dist+s*(1-this._r),this._lineTo(l.x,l.y,!0),this._lineTo(o.x,o.y,!0));else if(this._prevIsIn)o=this._prevPt,a=n,l=this._intersect(o,a),this._lineTo(l.x,l.y,!0),this._lineTo(a.x,a.y,!1);else{const b=this._prevPt,x=n;if(b.x<=this._xmin&&x.x<=this._xmin||b.x>=this._xmax&&x.x>=this._xmax||b.y<=this._ymin&&x.y<=this._ymin||b.y>=this._ymax&&x.y>=this._ymax)this._lineTo(x.x,x.y,!1);else{const $=[];if((b.x<this._xmin&&x.x>this._xmin||b.x>this._xmin&&x.x<this._xmin)&&(c=(this._xmin-b.x)/(x.x-b.x),v=b.y+c*(x.y-b.y),v<=this._ymin?m=!1:v>=this._ymax?m=!0:$.push(new l3(c,this._xmin,v))),(b.x<this._xmax&&x.x>this._xmax||b.x>this._xmax&&x.x<this._xmax)&&(c=(this._xmax-b.x)/(x.x-b.x),v=b.y+c*(x.y-b.y),v<=this._ymin?m=!1:v>=this._ymax?m=!0:$.push(new l3(c,this._xmax,v))),(b.y<this._ymin&&x.y>this._ymin||b.y>this._ymin&&x.y<this._ymin)&&(c=(this._ymin-b.y)/(x.y-b.y),g=b.x+c*(x.x-b.x),g<=this._xmin?h=!1:g>=this._xmax?h=!0:$.push(new l3(c,g,this._ymin))),(b.y<this._ymax&&x.y>this._ymax||b.y>this._ymax&&x.y<this._ymax)&&(c=(this._ymax-b.y)/(x.y-b.y),g=b.x+c*(x.x-b.x),g<=this._xmin?h=!1:g>=this._xmax?h=!0:$.push(new l3(c,g,this._ymax))),$.length===0)h?m?this._lineTo(this._xmax,this._ymax,!0):this._lineTo(this._xmax,this._ymin,!0):m?this._lineTo(this._xmin,this._ymax,!0):this._lineTo(this._xmin,this._ymin,!0);else if($.length>1&&$[0].ratio>$[1].ratio)this._start=this._dist+s*$[1].ratio,this._lineTo($[1].x,$[1].y,!0),this._lineTo($[0].x,$[0].y,!0);else{this._start=this._dist+s*$[0].ratio;for(let M=0;M<$.length;M++)this._lineTo($[M].x,$[M].y,!0)}this._lineTo(x.x,x.y,!1)}}this._dist+=s,this._prevIsIn=r,this._prevPt=n}close(){if(this._line.length>2){const e=this._firstPt,i=this._prevPt;e.x===i.x&&e.y===i.y||this.lineTo(e.x,e.y);const r=this._line;let n=r.length;for(;n>=4&&(r[0].x===r[1].x&&r[0].x===r[n-2].x||r[0].y===r[1].y&&r[0].y===r[n-2].y);)r.pop(),r[0].x=r[n-2].x,r[0].y=r[n-2].y,--n}}result(e=!0){return this._pushLine(),this._lines.length===0?null:(this._type===3&&e&&Mpt.simplify(this._tileSize,this._margin*this._finalRatio,this._lines),this._lines)}resultWithStarts(){if(this._type!==2)throw new Error("Only valid for lines");this._pushLine();const e=this._lines,i=e.length;if(i===0)return null;const r=[];for(let n=0;n<i;n++)r.push({line:e[n],start:this._starts[n]||0});return r}_isIn(e,i){return e>=this._xmin&&e<=this._xmax&&i>=this._ymin&&i<=this._ymax}_intersect(e,i){let r,n,s;if(i.x>=this._xmin&&i.x<=this._xmax)n=i.y<=this._ymin?this._ymin:this._ymax,s=(n-e.y)/(i.y-e.y),r=e.x+s*(i.x-e.x);else if(i.y>=this._ymin&&i.y<=this._ymax)r=i.x<=this._xmin?this._xmin:this._xmax,s=(r-e.x)/(i.x-e.x),n=e.y+s*(i.y-e.y);else{n=i.y<=this._ymin?this._ymin:this._ymax,r=i.x<=this._xmin?this._xmin:this._xmax;const a=(r-e.x)/(i.x-e.x),o=(n-e.y)/(i.y-e.y);a<o?(s=a,n=e.y+a*(i.y-e.y)):(s=o,r=e.x+o*(i.x-e.x))}return this._r=s,new ki(r,n)}_pushLine(){this._line&&(this._type===1?this._line.length>0&&(this._lines.push(this._line),this._starts.push(this._start)):this._type===2?this._line.length>1&&(this._lines.push(this._line),this._starts.push(this._start)):this._type===3&&this._line.length>3&&(this._lines.push(this._line),this._starts.push(this._start))),this._line=[],this._start=0}_moveTo(e,i,r){this._type!==3?r&&(e=Math.round((e-(this._xmin+this._margin))*this._finalRatio),i=Math.round((i-(this._ymin+this._margin))*this._finalRatio),this._line.push(new ki(e,i))):(r||(e<this._xmin&&(e=this._xmin),e>this._xmax&&(e=this._xmax),i<this._ymin&&(i=this._ymin),i>this._ymax&&(i=this._ymax)),e=Math.round((e-(this._xmin+this._margin))*this._finalRatio),i=Math.round((i-(this._ymin+this._margin))*this._finalRatio),this._line.push(new ki(e,i)),this._isH=!1,this._isV=!1)}_lineTo(e,i,r){let n,s;if(this._type!==3)if(r){if(e=Math.round((e-(this._xmin+this._margin))*this._finalRatio),i=Math.round((i-(this._ymin+this._margin))*this._finalRatio),this._line.length>0&&(n=this._line[this._line.length-1],n.equals(e,i)))return;this._line.push(new ki(e,i))}else this._line&&this._line.length>0&&this._pushLine();else if(r||(e<this._xmin&&(e=this._xmin),e>this._xmax&&(e=this._xmax),i<this._ymin&&(i=this._ymin),i>this._ymax&&(i=this._ymax)),e=Math.round((e-(this._xmin+this._margin))*this._finalRatio),i=Math.round((i-(this._ymin+this._margin))*this._finalRatio),this._line&&this._line.length>0){n=this._line[this._line.length-1];const a=n.x===e,o=n.y===i;if(a&&o)return;this._isH&&a||this._isV&&o?(n.x=e,n.y=i,s=this._line[this._line.length-2],s.x===e&&s.y===i?(this._line.pop(),this._line.length<=1?(this._isH=!1,this._isV=!1):(s=this._line[this._line.length-2],this._isH=s.x===e,this._isV=s.y===i)):(this._isH=s.x===e,this._isV=s.y===i)):(this._line.push(new ki(e,i)),this._isH=a,this._isV=o)}else this._line.push(new ki(e,i))}},VPt=class{setExtent(e){this._ratio=e===4096?1:4096/e}get validateTessellation(){return this._ratio<1}reset(e){this._lines=[],this._line=null}moveTo(e,i){this._line&&this._lines.push(this._line),this._line=[];const r=this._ratio;this._line.push(new ki(e*r,i*r))}lineTo(e,i){const r=this._ratio;this._line.push(new ki(e*r,i*r))}close(){const e=this._line;e&&!e[0].isEqual(e[e.length-1])&&e.push(e[0])}result(){return this._line&&this._lines.push(this._line),this._lines.length===0?null:this._lines}},Mpt=class Ey{static simplify(e,i,r){if(!r)return;const n=-i,s=e+i,a=-i,o=e+i,l=[],c=[],h=r.length;for(let g=0;g<h;++g){const v=r[g];if(!v||v.length<2)continue;let b,x=v[0];const $=v.length;for(let M=1;M<$;++M)b=v[M],x.x===b.x&&(x.x<=n&&(x.y>b.y?(l.push(g),l.push(M),l.push(0),l.push(-1)):(c.push(g),c.push(M),c.push(0),c.push(-1))),x.x>=s&&(x.y<b.y?(l.push(g),l.push(M),l.push(1),l.push(-1)):(c.push(g),c.push(M),c.push(1),c.push(-1)))),x.y===b.y&&(x.y<=a&&(x.x<b.x?(l.push(g),l.push(M),l.push(2),l.push(-1)):(c.push(g),c.push(M),c.push(2),c.push(-1))),x.y>=o&&(x.x>b.x?(l.push(g),l.push(M),l.push(3),l.push(-1)):(c.push(g),c.push(M),c.push(3),c.push(-1)))),x=b}if(l.length===0||c.length===0)return;Ey.fillParent(r,c,l),Ey.fillParent(r,l,c);const m=[];Ey.calcDeltas(m,c,l),Ey.calcDeltas(m,l,c),Ey.addDeltas(m,r)}static fillParent(e,i,r){const n=r.length,s=i.length;for(let a=0;a<s;a+=4){const o=i[a],l=i[a+1],c=i[a+2],h=e[o][l-1],m=e[o][l];let g=8092,v=-1;for(let b=0;b<n;b+=4){if(r[b+2]!==c)continue;const x=r[b],$=r[b+1],M=e[x][$-1],k=e[x][$];switch(c){case 0:case 1:if(c3(h.y,M.y,k.y)&&c3(m.y,M.y,k.y)){const A=Math.abs(k.y-M.y);A<g&&(g=A,v=b)}break;case 2:case 3:if(c3(h.x,M.x,k.x)&&c3(m.x,M.x,k.x)){const A=Math.abs(k.x-M.x);A<g&&(g=A,v=b)}}}i[a+3]=v}}static calcDeltas(e,i,r){const n=i.length;for(let s=0;s<n;s+=4){const a=[],o=Ey.calcDelta(s,i,r,a);e.push(i[s]),e.push(i[s+1]),e.push(i[s+2]),e.push(o)}}static calcDelta(e,i,r,n){const s=i[e+3];if(s===-1)return 0;const a=n.length;return a>1&&n[a-2]===s?0:(n.push(s),Ey.calcDelta(s,r,i,n)+1)}static addDeltas(e,i){const r=e.length;let n=0;for(let s=0;s<r;s+=4){const a=e[s+3];a>n&&(n=a)}for(let s=0;s<r;s+=4){const a=i[e[s]],o=e[s+1],l=n-e[s+3];switch(e[s+2]){case 0:a[o-1].x-=l,a[o].x-=l,o===1&&(a[a.length-1].x-=l),o===a.length-1&&(a[0].x-=l);break;case 1:a[o-1].x+=l,a[o].x+=l,o===1&&(a[a.length-1].x+=l),o===a.length-1&&(a[0].x+=l);break;case 2:a[o-1].y-=l,a[o].y-=l,o===1&&(a[a.length-1].y-=l),o===a.length-1&&(a[0].y-=l);break;case 3:a[o-1].y+=l,a[o].y+=l,o===1&&(a[a.length-1].y+=l),o===a.length-1&&(a[0].y+=l)}}}};const c3=(t,e,i)=>t>=e&&t<=i||t>=i&&t<=e,dX=S_(()=>de(()=>import("./bufferOperator-BTFd2oYo.js"),__vite__mapDeps([305,306,239,241,242,243,244,307,308,309,310,246]))),qTe=S_(()=>de(()=>import("./convexHullOperator-ZK4O-VI2.js"),__vite__mapDeps([311,312,239,241,242,243,244,246]))),HTe=S_(()=>de(()=>import("./lengthOperator-DapHQGiH.js"),__vite__mapDeps([313,246,239,241,242,243,244]))),GTe=S_(()=>de(()=>import("./generalizeOperator-WyeF11aU.js"),__vite__mapDeps([314,315,310,239,241,242,243,244,246]))),WTe=S_(()=>de(()=>import("./graphicBufferOperator-CPj7p5ij.js"),__vite__mapDeps([316,239,241,242,243,244,307,308,309,310,246]))),ZTe=S_(()=>de(()=>import("./offsetOperator-CECtQxvv.js"),__vite__mapDeps([317,318,241,239,242,243,244,246]))),YTe=S_(()=>de(()=>import("./simplifyOperator-BhIiMmT9.js"),__vite__mapDeps([319,248,239,241,242,243,244,246]))),Cpt=512;let kf;function gue(t){switch(t.type){case"CIMGeometricEffectDonut":case"CIMGeometricEffectBuffer":return dX.getImportPromise();case"CIMGeometricEffectEnclosingPolygon":return qTe.getImportPromise();case"CIMGeometricEffectOffset":return Promise.all([ZTe.getImportPromise(),WTe.getImportPromise()]);case"CIMGeometricEffectTaperedPolygon":return Promise.all([YTe.getImportPromise(),HTe.getImportPromise(),GTe.getImportPromise()]);default:return Promise.resolve()}}let Ept=class{constructor(e){this._geometry=e}next(){const e=this._geometry;return this._geometry=null,e}};function hX(t,e,i){if(!t)return null;kf||(kf=new Ipt(0,0,0,1));const r=i?-1:1,n=t.geometryType==="esriGeometryPolygon",s=n?3:2,a=n?3:2;let o,l;for(kf.reset(s),kf.setPixelMargin(e+1),kf.setExtent(Cpt);t.nextPath();)if(!(t.pathSize<a)){for(t.nextPoint(),o=t.x,l=r*t.y,kf.moveTo(o,l);t.nextPoint();)o=t.x,l=r*t.y,kf.lineTo(o,l);n&&kf.close()}const c=kf.result(!1);if(c){const h=Ki.createEmptyOptimizedCIM(t.geometryType);for(const m of c){h.startPath();for(const g of m)h.pushXY(g.x,r*g.y)}return h.reset(),h}return null}let sI=class{constructor(){this.setIdentity()}getAngle(){return(this.rz==null||this.rz===0&&this.rzCos!==1&&this.rzSin!==0)&&(this.rz=Math.atan2(this.rzSin,this.rzCos)),this.rz}setIdentity(){this.tx=0,this.ty=0,this.tz=0,this.s=1,this.rx=0,this.ry=0,this.rz=0,this.rzCos=1,this.rzSin=0}setTranslate(e,i){this.tx=e,this.ty=i}setTranslateZ(e){this.tz=e}setRotateCS(e,i){this.rz=void 0,this.rzCos=e,this.rzSin=i}setRotate(e){this.rz=e,this.rzCos=void 0,this.rzSin=void 0}setRotateY(e){this.ry=e}setScale(e){this.s=e}setMeasure(e){this.m=e}};const pX="arial-unicode-ms",yue="woff2",vue=new Map,JTe=new Set;let kpt=class{constructor(e,i){this.fontFace=e,this.promise=i}};async function Apt(t){const e=Lpt(t),i=Opt(t),r=vue.get(e);if(r)return r.promise;const n=new FontFace(t.family,`url('${Ti.fontsUrl}/woff2/${i}.${yue}') format('${yue}')`,{style:t.style,weight:t.weight}),s=document.fonts;if(s.has(n)&&n.status==="loading")return n.loaded;const a=n.load().then(()=>(s.add(n),n));return vue.set(e,new kpt(n,a)),JTe.add(n),a}function GPt(t){return JTe.has(t)}function Ppt(t){if(!t)return pX;const e=t.toLowerCase().split(" ").join("-");switch(e){case"serif":return"noto-serif";case"sans-serif":return"arial-unicode-ms";case"monospace":return"ubuntu-mono";case"fantasy":return"cabin-sketch";case"cursive":return"redressed";default:return e}}function Opt(t){const e=XTe(t)+QTe(t);return Ppt(t.family)+(e.length>0?e:"-regular")}function Lpt(t){const e=XTe(t)+QTe(t);return(t.family||pX)+(e.length>0?e:"-regular")}function XTe(t){if(!t.weight)return"";switch(t.weight.toLowerCase()){case"bold":case"bolder":return"-bold"}return""}function QTe(t){if(!t.style)return"";switch(t.style.toLowerCase()){case"italic":case"oblique":return"-italic"}return""}let Fpt=class{applyColorSubstitution(e,i){if(!i)return e;this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas"));const{width:r,height:n}=e,s=this._rasterizationCanvas,a=s.getContext("2d",{willReadFrequently:!0});e!==s&&(s.width=r,s.height=n,a.drawImage(e,0,0,r,n));const o=a.getImageData(0,0,r,n).data;if(i){for(const c of i)if(c&&c.oldColor&&c.oldColor.length===4&&c.newColor&&c.newColor.length===4){const[h,m,g,v]=c.oldColor,[b,x,$,M]=c.newColor;if(h===b&&m===x&&g===$&&v===M)continue;for(let k=0;k<o.length;k+=4)h===o[k]&&m===o[k+1]&&g===o[k+2]&&v===o[k+3]&&(o[k]=b,o[k+1]=x,o[k+2]=$,o[k+3]=M)}}const l=new ImageData(o,r,n);return a.putImageData(l,0,0),s}tintImageData(e,i){if(!i||i.length<4)return e;this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas"));const{width:r,height:n}=e,s=this._rasterizationCanvas,a=s.getContext("2d",{willReadFrequently:!0});e!==s&&(s.width=r,s.height=n,a.drawImage(e,0,0,r,n));const o=a.getImageData(0,0,r,n),l=new Uint8Array(o.data),c=[i[0]/255,i[1]/255,i[2]/255,i[3]/255];for(let m=0;m<l.length;m+=4)l[m]*=c[0],l[m+1]*=c[1],l[m+2]*=c[2],l[m+3]*=c[3];const h=new ImageData(new Uint8ClampedArray(l.buffer),r,n);return a.putImageData(h,0,0),s}};var Xh;let Rpt=(Xh=class{static local(){return Xh.instance===null&&(Xh.instance=new Xh),Xh.instance}execute(e,i){return new zpt(e,i)}},Xh.instance=null,Xh),zpt=class{constructor(e,i){this._inputGeometries=e,this._angleTolerance=i.angleTolerance!==void 0?i.angleTolerance:120,this._maxCosAngle=Math.cos((1-Math.abs(this._angleTolerance)/180)*Math.PI)}next(){let e=this._inputGeometries.next();if(!e)return null;for(;e;){if(e.geometryType==="esriGeometryPolygon")this._isClosed=!0;else if(e.geometryType==="esriGeometryPolyline")this._isClosed=!1;else{if(e.geometryType!=="esriGeometryEnvelope"){e=this._inputGeometries.next();continue}if(this._maxCosAngle)return e;this._isClosed=!0}for(;e.nextPath();)this._processPath(e);return e.reset(),e}return null}_processPath(e){if(e.nextPoint()){const i=e.x,r=e.y;let n=i,s=r,a=e.pathSize,o=0,l=0,c=0,h=0,m=0,g=0;this._isClosed&&++a;for(let v=1;e.nextPoint()||v<a;++v){let b,x;this._isClosed&&v===a-1?(b=i,x=r):(b=e.x,x=e.y);const $=b-n,M=x-s,k=Math.sqrt($*$+M*M);v>1&&k>0&&c>0&&(o*$+l*M)/k/c<=this._maxCosAngle&&e.setControlPointAt(v-1),v===1&&(h=$,m=M,g=k),k>0&&(n=b,s=x,o=$,l=M,c=k)}this._isClosed&&c>0&&g>0&&(o*h+l*m)/g/c<=this._maxCosAngle&&e.setControlPointAt(0)}}};function zM(t,e){t[4]=e}let sA=class{constructor(e,i=!0,r=!0,n=0){this.isClosed=!1,this.geometryCursor=null,this.geometryCursor=!i&&e.geometryType==="esriGeometryPolygon"||!r&&e.geometryType==="esriGeometryPolyline"?null:e,this.geomUnitsPerPoint=n,this.iterateMultiPath=!1,this.iteratePath=!1,this.internalPlacement=new sI}next(){if(!this.geometryCursor)return null;const e=this.processMultiPath(this.geometryCursor);return this.iterateMultiPath&&e||(this.geometryCursor=null),e}processMultiPath(e){for(;this.iteratePath||e.pathIndex<e.totalSize-1;){this.iteratePath||e.nextPath(),this.iterateMultiPath=!0;const i=this.processPath(e);if(i)return i}return this.iterateMultiPath=!1,null}},aI=class{constructor(e,i,r,n=0){this.isClosed=!1,this.inputGeometries=e,this.acceptPolygon=i,this.acceptPolyline=r,this.geomUnitsPerPoint=n,this.iteratePath=!1,this.multiPathCursor=null}next(){for(;;){if(!this.multiPathCursor){let e=this.inputGeometries.next();for(;e&&(this.isClosed=this.acceptPolygon&&e.geometryType==="esriGeometryPolygon"||e.geometryType==="esriGeometryEnvelope",this.multiPathCursor=e,!this.multiPathCursor);)e=this.inputGeometries.next();if(!this.multiPathCursor)return null}for(;this.iteratePath||this.multiPathCursor.nextPath();){this.multiPathCursor.seekPathStart();const e=this.processPath(this.multiPathCursor);if(e)return e}this.multiPathCursor=null}}};const KE=.03;let ug=class{constructor(e=0,i=!1){}isEmpty(e){if(!e.nextPoint())return!0;let i,r,n,s;for(i=e.x,r=e.y;e.nextPoint();i=r,r=s)if(n=e.x,s=e.y,n!==i||s!==r)return e.seekPathStart(),!1;return e.seekPathStart(),!0}normalize(e){const i=Math.sqrt(e[0]*e[0]+e[1]*e[1]);i!==0&&(e[0]/=i,e[1]/=i)}getLength(e,i,r,n){const s=r-e,a=n-i;return Math.sqrt(s*s+a*a)}getSegLength(e){const[[i,r],[n,s]]=e;return this.getLength(i,r,n,s)}getCoord2D(e,i,r,n,s){return[e+(r-e)*s,i+(n-i)*s]}getSegCoord2D(e,i){const[[r,n],[s,a]]=e;return this.getCoord2D(r,n,s,a,i)}getAngle(e,i,r,n,s){const a=r-e,o=n-i;return Math.atan2(o,a)}getAngleCS(e,i,r,n,s,a){e==null&&(e=[0,0]);const o=n-i,l=s-r,c=Math.sqrt(o*o+l*l);return c!==0?(e[0]=o/c,e[1]=l/c,e):(e[0]=1,e[1]=0,e)}getSegAngleCS(e,i,r){const[[n,s],[a,o]]=i;return this.getAngleCS(e,n,s,a,o,r)}cut(e,i,r,n,s,a){return[s<=0?[e,i]:this.getCoord2D(e,i,r,n,s),a>=1?[r,n]:this.getCoord2D(e,i,r,n,a)]}getSubCurve(e,i,r){const n=Ki.createEmptyOptimizedCIM("esriGeometryPolyline");return this.appendSubCurve(n,e,i,r)?n:null}appendSubCurve(e,i,r,n){e.startPath(),i.seekPathStart();let s=0,a=!0;if(!i.nextPoint())return!1;let o=i.x,l=i.y;for(;i.nextPoint();){const c=this.getLength(o,l,i.x,i.y);if(c!==0){if(a){if(s+c>r){const h=(r-s)/c;let m=1,g=!1;s+c>=n&&(m=(n-s)/c,g=!0);const v=this.cut(o,l,i.x,i.y,h,m);if(v&&e.pushPoints(v),g)break;a=!1}}else{if(s+c>n){const h=this.cut(o,l,i.x,i.y,0,(n-s)/c);h&&e.pushPoint(h[1]);break}e.pushXY(i.x,i.y)}s+=c,o=i.x,l=i.y}else o=i.x,l=i.y}return!0}getCIMPointAlong(e,i){if(!e.nextPoint())return null;let r,n,s,a,o=0;for(r=e.x,n=e.y;e.nextPoint();r=s,n=a){s=e.x,a=e.y;const l=this.getLength(r,n,s,a);if(l!==0){if(o+l>i){const c=(i-o)/l;return this.getCoord2D(r,n,s,a,c)}o+=l}}return null}offset(e,i,r,n,s){if(!e||e.length<2)return null;let a=0,o=e[a++],l=a;for(;a<e.length;){const g=e[a];g[0]===o[0]&&g[1]===o[1]||(a!==l&&(e[l]=e[a]),o=e[l++]),a++}const c=e[0][0]===e[l-1][0]&&e[0][1]===e[l-1][1];if(c&&--l,l<(c?3:2))return null;const h=[];o=c?e[l-1]:null;let m=e[0];for(let g=0;g<l;g++){const v=g===l-1?c?e[0]:null:e[g+1];if(o)if(v){const b=[v[0]-m[0],v[1]-m[1]];this.normalize(b);const x=[m[0]-o[0],m[1]-o[1]];this.normalize(x);const $=x[0]*b[1]-x[1]*b[0],M=x[0]*b[0]+x[1]*b[1];if($===0&&M===1){m=v;continue}if($>=0==i<=0){if(M<1){const k=[b[0]-x[0],b[1]-x[1]];this.normalize(k);const A=Math.sqrt((1+M)/2);if(A>1/n){const L=-Math.abs(i)/A;h.push([m[0]-k[0]*L,m[1]-k[1]*L])}}}else switch(r){case"Mitered":{const k=Math.sqrt((1+M)/2);if(k>0&&1/k<n){const A=[b[0]-x[0],b[1]-x[1]];this.normalize(A);const L=Math.abs(i)/k;h.push([m[0]-A[0]*L,m[1]-A[1]*L]);break}}case"Bevelled":h.push([m[0]+x[1]*i,m[1]-x[0]*i]),h.push([m[0]+b[1]*i,m[1]-b[0]*i]);break;case"Rounded":if(M<1){h.push([m[0]+x[1]*i,m[1]-x[0]*i]);const k=Math.floor(2.5*(1-M));if(k>0){const A=1/k;let L=A;for(let z=1;z<k;z++,L+=A){const U=[x[1]*(1-L)+b[1]*L,-x[0]*(1-L)-b[0]*L];this.normalize(U),h.push([m[0]+U[0]*i,m[1]+U[1]*i])}}h.push([m[0]+b[1]*i,m[1]-b[0]*i])}break;default:if($<0)h.push([m[0]+(x[1]+x[0])*i,m[1]+(x[1]-x[0])*i]),h.push([m[0]+(b[1]-b[0])*i,m[1]-(b[0]+b[1])*i]);else{const k=Math.sqrt((1+Math.abs(M))/2),A=[b[0]-x[0],b[1]-x[1]];this.normalize(A);const L=i/k;h.push([m[0]-A[0]*L,m[1]-A[1]*L])}}}else{const b=[m[0]-o[0],m[1]-o[1]];this.normalize(b),h.push([m[0]+b[1]*i,m[1]-b[0]*i])}else{const b=[v[0]-m[0],v[1]-m[1]];this.normalize(b),h.push([m[0]+b[1]*i,m[1]-b[0]*i])}o=m,m=v}return h.length<(c?3:2)?null:(c&&h.push([h[0][0],h[0][1]]),h)}};const WU=1.7320508075688772,Npt=5,Dpt="OpenEnded";var Qh;let jpt=(Qh=class{static local(){return Qh.instance===null&&(Qh.instance=new Qh),Qh.instance}execute(e,i,r){return new Vpt(e,i,r)}},Qh.instance=null,Qh),Vpt=class extends aI{constructor(e,i,r){super(e,!1,!0),this._curveHelper=new ug,this._width=(i.width!==void 0?i.width:Npt)*r,this._arrowType=i.geometricEffectArrowType!==void 0?i.geometricEffectArrowType:i.arrowType!==void 0?i.arrowType:Dpt,this._offsetFlattenError=KE*r}processPath(e){const i=Ki.createEmptyOptimizedCIM(e.geometryType);switch(this._arrowType){case"OpenEnded":default:this._constructSimpleArrow(i,e,!0);break;case"Block":this._constructSimpleArrow(i,e,!1);break;case"Crossed":this._constructCrossedArrow(i,e)}return i}_constructSimpleArrow(e,i,r){const n=i.pathLength();let s=this._width;n<2*s&&(s=n/2);const a=this._curveHelper.getSubCurve(i,0,n-s);if(!a||!a.nextPath())return;a.seekPathStart();const o=s/2;if(this._curveHelper.isEmpty(a))return;const l=mv(a),c=this._constructOffset(l,-o);if(!c)return;const h=this._constructOffset(l,o);if(!h)return;const m=this._constructArrowBasePoint(c,-o/2);if(!m)return;const g=this._constructArrowBasePoint(h,o/2);if(!g)return;i.seekInPath(i.pathSize-1);const v=[i.x,i.y];e.pushPath(h),e.nextPath(),e.nextPoint(),e.setControlPoint(),e.pushPoint(g),e.nextPoint(),e.setControlPoint(),e.pushPoint(v),e.nextPoint(),e.setControlPoint(),e.pushPoint(m),e.nextPoint(),e.setControlPoint(),e.pushPoints(c.reverse()),e.setControlPoint(),r||(e.setControlPointAt(0),e.setControlPointAt(e.pathSize-1),e.pushPoint(h[0])),e.reset()}_constructCrossedArrow(e,i){const r=i.pathLength();let n=this._width;r<n*(1+WU+1)&&(n=r/(1+WU+1)),i.seekPathStart();const s=this._curveHelper.getSubCurve(i,0,r-n*(1+WU));if(!s)return;s.nextPath();const a=n/2;if(this._curveHelper.isEmpty(s))return;const o=mv(s),l=this._constructOffset(o,a);if(!l)return;const c=this._constructOffset(o,-a);if(!c)return;const h=this._curveHelper.getSubCurve(i,0,r-n);if(!h||(h.nextPath(),this._curveHelper.isEmpty(h)))return;const m=mv(h),g=this._constructOffset(m,a);if(!g)return;const v=this._constructOffset(m,-a);if(!v)return;const b=g[g.length-1],x=this._constructArrowBasePoint(g,a/2);if(!x)return;const $=v[v.length-1],M=this._constructArrowBasePoint(v,-a/2);if(!M)return;i.seekInPath(i.pathSize-1);const k=[i.x,i.y];e.pushPath(l),e.nextPath(),e.nextPoint(),e.setControlPoint(),e.pushPoint($),e.nextPoint(),e.setControlPoint(),e.pushPoint(M),e.nextPoint(),e.setControlPoint(),e.pushPoint(k),e.nextPoint(),e.setControlPoint(),e.pushPoint(x),e.nextPoint(),e.setControlPoint(),e.pushPoint(b),e.nextPoint(),e.setControlPoint(),e.pushPoints(c.reverse()),e.nextPoint(),e.setControlPoint(),e.reset()}_constructOffset(e,i){return this._curveHelper.offset(e,i,"Rounded",4,this._offsetFlattenError)}_constructArrowBasePoint(e,i){if(!e||e.length<2)return null;const r=e[e.length-2],n=e[e.length-1],s=[n[0]-r[0],n[1]-r[1]];return this._curveHelper.normalize(s),[n[0]+s[1]*i,n[1]-s[0]*i]}};var Kh;let Upt=(Kh=class{static local(){return Kh.instance===null&&(Kh.instance=new Kh),Kh.instance}execute(e,i,r,n,s,a){return new Bpt(e,i,r,n,s,a)}},Kh.instance=null,Kh),Bpt=class{constructor(e,i,r,n,s,a){this._preventClipping=a,this._inputGeometries=e,this._tileKey=n,this._curveHelper=new ug,this._size=(i.size!==void 0?i.size:1)*r,this._maxInflateSize=s*r,this._offsetFlattenError=KE*r}next(){let e;for(;e=this._inputGeometries.next();){if(this._size===0)return e;if(e.geometryType==="esriGeometryEnvelope"){if(this._size>0){const a=Ki.createEmptyOptimizedCIM(e.geometryType),o=kD(e)[0],l=this._curveHelper.offset(o,this._size,"Rounded",4,this._offsetFlattenError);if(l)return a.pushPath(l),a}else if(this._size<0){const a=e.asJSON();if(Math.min(a.xmax-a.xmin,a.ymax-a.ymin)+2*this._size>0)return Ki.fromJSONCIM({xmin:a.xmin-this._size,xmax:a.xmax+this._size,ymin:a.ymin-this._size,ymax:a.ymax+this._size})}}const i=!this._preventClipping&&this._tileKey?hX(e,this._maxInflateSize,!0):e;if(!i)continue;const r=dX.module,n={...i.asJSON(),spatialReference:{wkid:tt.WebMercator.wkid}},s=r.execute(n,this._size);return s?Ki.fromJSONCIM(s):null}return null}};var ep;let qpt=(ep=class{static local(){return ep.instance===null&&(ep.instance=new ep),ep.instance}execute(e,i,r){return new Hpt(e,i,r)}},ep.instance=null,ep),Hpt=class{constructor(e,i,r){this._defaultPointSize=20,this._inputGeometries=e,this._geomUnitsPerPoint=r,this._rule=i.rule??"FullGeometry",this._defaultSize=this._defaultPointSize*r}next(){let e;for(;e=this._inputGeometries.next();){const i=this._processGeom(kD(e));if(i!=null&&i.length)return Ki.fromJSONCIM({paths:i})}return null}_clone(e){return[e[0],e[1]]}_mid(e,i){return[(e[0]+i[0])/2,(e[1]+i[1])/2]}_mix(e,i,r,n){return[e[0]*i+r[0]*n,e[1]*i+r[1]*n]}_add(e,i){return[e[0]+i[0],e[1]+i[1]]}_add2(e,i,r){return[e[0]+i,e[1]+r]}_sub(e,i){return[e[0]-i[0],e[1]-i[1]]}_dist(e,i){return Math.sqrt((e[0]-i[0])*(e[0]-i[0])+(e[1]-i[1])*(e[1]-i[1]))}_norm(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}_normalize(e,i=1){const r=i/this._norm(e);e[0]*=r,e[1]*=r}_leftPerpendicular(e){const i=-e[1],r=e[0];e[0]=i,e[1]=r}_leftPerp(e){return[-e[1],e[0]]}_rightPerpendicular(e){const i=e[1],r=-e[0];e[0]=i,e[1]=r}_rightPerp(e){return[e[1],-e[0]]}_dotProduct(e,i){return e[0]*i[0]+e[1]*i[1]}_crossProduct(e,i){return e[0]*i[1]-e[1]*i[0]}_rotateDirect(e,i,r){const n=e[0]*i-e[1]*r,s=e[0]*r+e[1]*i;e[0]=n,e[1]=s}_makeCtrlPt(e){const i=[e[0],e[1]];return zM(i,1),i}_addAngledTicks(e,i,r,n){const s=this._sub(r,i);this._normalize(s);const a=this._crossProduct(s,this._sub(n,i));let o;o=a>0?this._rightPerp(s):this._leftPerp(s);const l=Math.abs(a)/2,c=[];c.push([i[0]+(o[0]-s[0])*l,i[1]+(o[1]-s[1])*l]),c.push(i),c.push(r),c.push([r[0]+(o[0]+s[0])*l,r[1]+(o[1]+s[1])*l]),e.push(c)}_addBezier2(e,i,r,n,s){if(s--===0)return void e.push(n);const a=this._mid(i,r),o=this._mid(r,n),l=this._mid(a,o);this._addBezier2(e,i,a,l,s),this._addBezier2(e,l,o,n,s)}_addBezier3(e,i,r,n,s,a){if(a--===0)return void e.push(s);const o=this._mid(i,r),l=this._mid(r,n),c=this._mid(n,s),h=this._mid(o,l),m=this._mid(l,c),g=this._mid(h,m);this._addBezier3(e,i,o,h,g,a),this._addBezier3(e,g,m,c,s,a)}_add90DegArc(e,i,r,n,s){const a=s??this._crossProduct(this._sub(r,i),this._sub(n,i))>0,o=this._mid(i,r),l=this._sub(o,i);a?this._leftPerpendicular(l):this._rightPerpendicular(l),o[0]+=l[0],o[1]+=l[1],this._addBezier3(e,i,this._mix(i,.33333,o,.66667),this._mix(r,.33333,o,.66667),r,4)}_addArrow(e,i,r){const n=i[0],s=i[1],a=i[i.length-1],o=this._sub(n,s),l=this._norm(o);this._normalize(o);const c=Math.abs(this._crossProduct(o,this._sub(a,s)));let h=this._dotProduct(o,this._sub(a,s));h<.05*l?h=.05*l:h>.95*l&&(h=.95*l);const m=.5*c,g=this._leftPerp(o),v=[s[0]+o[0]*h,s[1]+o[1]*h],b=i.length-1,x=[];x.push(r?[-g[0],-g[1]]:g);let $=[-o[0],-o[1]];for(let M=1;M<b-1;M++){const k=this._sub(i[M+1],i[M]);this._normalize(k);const A=this._dotProduct(k,$),L=this._crossProduct(k,$),z=Math.sqrt((1+A)/2),U=this._sub(k,$);this._normalize(U),U[0]/=z,U[1]/=z,x.push(L<0?[-U[0],-U[1]]:U),$=k}x.push(this._rightPerp($));for(let M=x.length-1;M>0;M--)e.push([i[M][0]+x[M][0]*m,i[M][1]+x[M][1]*m]);e.push([v[0]+x[0][0]*m,v[1]+x[0][1]*m]),e.push([v[0]+x[0][0]*c,v[1]+x[0][1]*c]),e.push(n),e.push([v[0]-x[0][0]*c,v[1]-x[0][1]*c]),e.push([v[0]-x[0][0]*m,v[1]-x[0][1]*m]);for(let M=1;M<x.length;M++)e.push([i[M][0]-x[M][0]*m,i[M][1]-x[M][1]*m])}_addDash(e,i,r){const n=this._norm(r)/7;this._normalize(r);let s=[];for(let a=0;a<=7;a++)s.push([i[0]+r[0]*a*n,i[1]+r[1]*a*n]),1&a&&(e.push(s),s=[])}_cp2(e,i,r){return e.length>=2?e[1]:this._add2(e[0],i*this._defaultSize,r*this._defaultSize)}_cp3(e,i,r,n){if(e.length>=3)return e[2];const s=this._mix(e[0],1-r,i,r),a=this._sub(i,e[0]);return this._normalize(a),this._rightPerpendicular(a),[s[0]+a[0]*n*this._defaultSize,s[1]+a[1]*n*this._defaultSize]}_arrowPath(e){if(e.length>2)return e;const i=e[0],r=this._cp2(e,-4,0),n=this._sub(i,r);this._normalize(n);const s=this._rightPerp(n);return[i,r,[i[0]+(s[0]-n[0])*this._defaultSize,i[1]+(s[1]-n[1])*this._defaultSize]]}_arrowLastSeg(e){const i=e[0],r=this._cp2(e,-4,0);let n;if(e.length>=3)n=e[e.length-1];else{const s=this._sub(i,r);this._normalize(s);const a=this._rightPerp(s);n=[i[0]+(a[0]-s[0])*this._defaultSize,i[1]+(a[1]-s[1])*this._defaultSize]}return[r,n]}_processGeom(e){if(!e)return null;const i=[];for(const r of e){const n=r.length>1&&TRe(r)<this._defaultSize;if(!r||r.length===0||n)continue;const s=r.length;let a=r[0];switch(this._rule){case"PerpendicularFromFirstSegment":{const o=this._cp2(r,0,-1),l=this._cp3(r,o,.5,4),c=[];c.push(l),c.push(this._mid(a,o)),i.push(c);break}case"ReversedFirstSegment":{const o=this._cp2(r,0,-1);i.push([o,a]);break}case"PerpendicularToSecondSegment":{if(r.length<3)return[];const o=this._cp2(r,-4,1),l=this._cp3(r,o,.882353,-1.94),c=[];c.push(this._mid(o,l)),c.push(a),i.push(c);break}case"SecondSegmentWithTicks":{if(r.length<3)return[];const o=this._cp2(r,-4,1),l=this._cp3(r,o,.882353,-1.94),c=this._sub(l,o);let h;h=this._crossProduct(c,this._sub(a,o))>0?this._rightPerp(c):this._leftPerp(c);const m=[];m.push([o[0]+(h[0]-c[0])/3,o[1]+(h[1]-c[1])/3]),m.push(o),m.push(l),m.push([l[0]+(h[0]+c[0])/3,l[1]+(h[1]+c[1])/3]),i.push(m);break}case"DoublePerpendicular":{const o=this._cp2(r,0,-1),l=this._cp3(r,o,.5,3),c=this._mid(a,o),h=this._sub(c,l);this._normalize(h);const m=this._crossProduct(h,this._sub(a,l));this._leftPerpendicular(h);const g=[];g.push(a),g.push([l[0]+h[0]*m,l[1]+h[1]*m]),i.push(g);const v=[];v.push([l[0]-h[0]*m,l[1]-h[1]*m]),v.push(o),i.push(v);break}case"OppositeToFirstSegment":{const o=this._cp2(r,0,-1),l=this._cp3(r,o,.5,3),c=this._mid(a,o),h=this._sub(c,l);this._normalize(h);const m=this._crossProduct(h,this._sub(a,l));this._leftPerpendicular(h);const g=[];g.push([l[0]+h[0]*m,l[1]+h[1]*m]),g.push([l[0]-h[0]*m,l[1]-h[1]*m]),i.push(g);break}case"TriplePerpendicular":{const o=this._cp2(r,0,-1),l=this._cp3(r,o,.5,4),c=this._mid(a,o),h=this._sub(c,l);this._normalize(h);const m=this._crossProduct(h,this._sub(a,l));this._leftPerpendicular(h);const g=[];g.push([l[0]+h[0]*m*.8,l[1]+h[1]*m*.8]),g.push([c[0]+.8*(a[0]-c[0]),c[1]+.8*(a[1]-c[1])]),i.push(g),i.push([l,c]);const v=[];v.push([l[0]-h[0]*m*.8,l[1]-h[1]*m*.8]),v.push([c[0]+.8*(o[0]-c[0]),c[1]+.8*(o[1]-c[1])]),i.push(v);break}case"HalfCircleFirstSegment":{const o=this._cp2(r,0,-1),l=this._cp3(r,o,.5,4),c=this._mid(a,o);let h=this._sub(o,a);const m=Math.cos(Math.PI/18),g=Math.sin(Math.PI/18),v=Math.sqrt((1+m)/2),b=Math.sqrt((1-m)/2),x=[];let $;this._crossProduct(h,this._sub(l,a))>0?(x.push(a),h=this._sub(a,c),$=o):(x.push(o),h=this._sub(o,c),$=a),this._rotateDirect(h,v,b),h[0]/=v,h[1]/=v;for(let M=1;M<=18;M++)x.push(this._add(c,h)),this._rotateDirect(h,m,g);x.push($),i.push(x);break}case"HalfCircleSecondSegment":{const o=this._cp2(r,0,-1),l=this._cp3(r,o,1,-1);let c=this._sub(a,o);this._normalize(c);const h=this._crossProduct(c,this._sub(l,o))/2;this._leftPerpendicular(c);const m=[o[0]+c[0]*h,o[1]+c[1]*h];c=this._sub(o,m);const g=Math.cos(Math.PI/18);let v=Math.sin(Math.PI/18);h>0&&(v=-v);const b=[o];for(let x=1;x<=18;x++)this._rotateDirect(c,g,v),b.push(this._add(m,c));i.push(b);break}case"HalfCircleExtended":{const o=this._cp2(r,0,-2),l=this._cp3(r,o,1,-1);let c;if(s>=4)c=r[3];else{const x=this._sub(a,o);c=this._add(l,x)}const h=this._dist(o,l)/2/.75,m=this._sub(o,a);this._normalize(m,h);const g=this._sub(l,c);this._normalize(g,h);const v=[c,l];i.push(v);const b=[this._clone(l)];this._addBezier3(b,l,this._add(l,g),this._add(o,m),o,4),b.push(a),i.push(b);break}case"OpenCircle":{const o=this._cp2(r,-2,0),l=this._sub(o,a),c=Math.cos(Math.PI/18),h=-Math.sin(Math.PI/18),m=[o];for(let g=1;g<=33;g++)this._rotateDirect(l,c,h),m.push(this._add(a,l));i.push(m);break}case"CoverageEdgesWithTicks":{const o=this._cp2(r,0,-1);let l,c;if(s>=3)l=r[2];else{const v=this._sub(o,a),b=this._leftPerp(v);l=[a[0]+b[0]-.25*v[0],a[1]+b[1]-.25*v[1]]}if(s>=4)c=r[3];else{const v=this._mid(a,o),b=this._sub(a,o);this._normalize(b),this._leftPerpendicular(b);const x=this._crossProduct(b,this._sub(l,v));this._rightPerpendicular(b),c=[l[0]+b[0]*x*2,l[1]+b[1]*x*2]}const h=this._sub(o,a);let m,g;m=this._crossProduct(h,this._sub(l,a))>0?this._rightPerp(h):this._leftPerp(h),g=[],g.push(l),g.push(a),g.push([a[0]+(m[0]-h[0])/3,a[1]+(m[1]-h[1])/3]),i.push(g),m=this._crossProduct(h,this._sub(c,o))>0?this._rightPerp(h):this._leftPerp(h),g=[],g.push([o[0]+(m[0]+h[0])/3,o[1]+(m[1]+h[1])/3]),g.push(o),g.push(c),i.push(g);break}case"GapExtentWithDoubleTicks":{const o=this._cp2(r,0,2),l=this._cp3(r,o,0,1);let c;if(s>=4)c=r[3];else{const h=this._sub(o,a);c=this._add(l,h)}this._addAngledTicks(i,a,o,this._mid(l,c)),this._addAngledTicks(i,l,c,this._mid(a,o));break}case"GapExtentMidline":{const o=this._cp2(r,2,0),l=this._cp3(r,o,0,1);let c;if(s>=4)c=r[3];else{const m=this._sub(o,a);c=this._add(l,m)}const h=[];h.push(this._mid(a,l)),h.push(this._mid(o,c)),i.push(h);break}case"Chevron":{const o=this._cp2(r,-1,-1);let l;if(s>=3)l=r[2];else{const c=this._sub(o,a);this._leftPerpendicular(c),l=this._add(a,c)}i.push([o,this._makeCtrlPt(a),l]);break}case"PerpendicularWithArc":{const o=this._cp2(r,0,-2),l=this._cp3(r,o,.5,-1),c=this._sub(o,a),h=this._norm(c);c[0]/=h,c[1]/=h;const m=this._crossProduct(c,this._sub(l,a));let g=this._dotProduct(c,this._sub(l,a));g<.05*h?g=.05*h:g>.95*h&&(g=.95*h);const v=[a[0]+c[0]*g,a[1]+c[1]*g];let b=this._leftPerp(c),x=[];if(x.push([v[0]-b[0]*m,v[1]-b[1]*m]),x.push([v[0]+b[0]*m,v[1]+b[1]*m]),i.push(x),s>=4){const A=r[3];let L=this._dotProduct(c,this._sub(A,a));L<.1*h?L=.1*h:L>.9*h&&(L=.9*h);const z=[a[0]+c[0]*L,a[1]+c[1]*L],U=this._crossProduct(c,this._sub(A,a)),B=[];B.push([z[0]-b[0]*U,z[1]-b[1]*U]),B.push([z[0]+b[0]*U,z[1]+b[1]*U]),i.push(B)}const $=[o[0]+b[0]*m,o[1]+b[1]*m];b=this._sub(o,$);const M=Math.cos(Math.PI/18);let k=Math.sin(Math.PI/18);m<0&&(k=-k),x=[a,o];for(let A=1;A<=9;A++)this._rotateDirect(b,M,k),x.push(this._add($,b));i.push(x);break}case"ClosedHalfCircle":{const o=this._cp2(r,2,0),l=this._mid(a,o),c=this._sub(o,l),h=Math.cos(Math.PI/18),m=Math.sin(Math.PI/18),g=[a,o];for(let v=1;v<=18;v++)this._rotateDirect(c,h,m),g.push(this._add(l,c));i.push(g);break}case"TripleParallelExtended":{const o=this._cp2(r,0,-2),l=this._cp3(r,o,1,-2),c=this._mid(a,o),h=this._sub(l,o);this._normalize(h);const m=Math.abs(this._crossProduct(h,this._sub(c,o)))/2,g=this._dist(o,l),v=[o,a];v.push([a[0]+h[0]*g*.5,a[1]+h[1]*g*.5]),i.push(v);const b=[];b.push([c[0]-h[0]*m,c[1]-h[1]*m]),b.push([c[0]+h[0]*g*.375,c[1]+h[1]*g*.375]),zM(b[b.length-1],1),b.push([c[0]+h[0]*g*.75,c[1]+h[1]*g*.75]),i.push(b);const x=[o,l];i.push(x);break}case"ParallelWithTicks":{const o=this._cp2(r,3,0),l=this._cp3(r,o,.5,-1),c=this._sub(l,o);this._normalize(c);const h=this._crossProduct(c,this._sub(l,a));this._leftPerpendicular(c),this._addAngledTicks(i,a,o,l),this._addAngledTicks(i,this._mix(a,1,c,h),this._mix(o,1,c,h),this._mid(a,o));break}case"Parallel":{const o=this._cp2(r,3,0),l=this._cp3(r,o,.5,-1),c=this._sub(o,a);this._normalize(c);const h=this._leftPerp(c),m=this._crossProduct(c,this._sub(l,a));let g=[a,o];i.push(g),g=[],g.push([a[0]+h[0]*m,a[1]+h[1]*m]),g.push([o[0]+h[0]*m,o[1]+h[1]*m]),i.push(g);break}case"PerpendicularToFirstSegment":{const o=this._cp2(r,3,0),l=this._cp3(r,o,.5,-1),c=this._mid(a,o),h=this._sub(o,a);this._normalize(h);const m=this._crossProduct(h,this._sub(l,a));this._leftPerpendicular(h);const g=[];g.push([c[0]-h[0]*m*.25,c[1]-h[1]*m*.25]),g.push([c[0]+h[0]*m*1.25,c[1]+h[1]*m*1.25]),i.push(g);break}case"ParallelOffset":{const o=this._cp2(r,3,0),l=this._cp3(r,o,.5,-1),c=this._sub(o,a);this._normalize(c);const h=this._crossProduct(c,this._sub(l,a));this._leftPerpendicular(c);const m=[];m.push([a[0]-c[0]*h,a[1]-c[1]*h]),m.push([o[0]-c[0]*h,o[1]-c[1]*h]),i.push(m);const g=[];g.push([a[0]+c[0]*h,a[1]+c[1]*h]),g.push([o[0]+c[0]*h,o[1]+c[1]*h]),i.push(g);break}case"OffsetOpposite":{const o=this._cp2(r,3,0),l=this._cp3(r,o,.5,-1),c=this._sub(o,a);this._normalize(c);const h=this._crossProduct(c,this._sub(l,a));this._leftPerpendicular(c);const m=[];m.push([a[0]-c[0]*h,a[1]-c[1]*h]),m.push([o[0]-c[0]*h,o[1]-c[1]*h]),i.push(m);break}case"OffsetSame":{const o=this._cp2(r,3,0),l=this._cp3(r,o,.5,-1),c=this._sub(o,a);this._normalize(c);const h=this._crossProduct(c,this._sub(l,a));this._leftPerpendicular(c);const m=[];m.push([a[0]+c[0]*h,a[1]+c[1]*h]),m.push([o[0]+c[0]*h,o[1]+c[1]*h]),i.push(m);break}case"CircleWithArc":{let o=this._cp2(r,3,0);const l=this._cp3(r,o,.5,-1);let c,h;if(s>=4)c=r[3],h=this._crossProduct(this._sub(c,o),this._sub(l,o))>0;else{c=o,h=this._crossProduct(this._sub(c,a),this._sub(l,a))>0;const x=24*this._geomUnitsPerPoint,$=this._sub(c,a);this._normalize($,x);const M=Math.sqrt(2)/2;this._rotateDirect($,M,h?M:-M),o=this._add(a,$)}const m=this._sub(o,a),g=Math.cos(Math.PI/18),v=Math.sin(Math.PI/18),b=[o];for(let x=1;x<=36;x++)this._rotateDirect(m,g,v),b.push(this._add(a,m));this._add90DegArc(b,o,c,l,h),zM(b[b.length-8],1),i.push(b);break}case"DoubleJog":{let o,l=this._cp2(r,-3,1),c=this._cp3(r,l,-1,-.5);if(s>=4)o=r[3];else{const k=a;a=l,o=c;const A=this._dist(a,k),L=this._dist(o,k);let z=30*this._geomUnitsPerPoint;.5*A<z&&(z=.5*A),.5*L<z&&(z=.5*L),l=this._mix(a,z/A,k,(A-z)/A),c=this._mix(o,z/L,k,(L-z)/L)}const h=this._mid(a,l),m=this._mid(o,c),g=this._dist(a,l),v=this._dist(c,o);let b=Math.min(g,v)/8;b=Math.min(b,24*this._geomUnitsPerPoint);const x=Math.cos(Math.PI/4);let $=this._sub(a,l);this._normalize($,b),this._crossProduct($,this._sub(o,l))>0?this._rotateDirect($,x,-x):this._rotateDirect($,x,x);let M=[];M.push(l),M.push(this._add(h,$)),M.push(this._sub(h,$)),M.push(a),i.push(M),$=this._sub(o,c),this._normalize($,b),this._crossProduct($,this._sub(a,c))<0?this._rotateDirect($,x,x):this._rotateDirect($,x,-x),M=[],M.push(c),M.push(this._add(m,$)),M.push(this._sub(m,$)),M.push(o),i.push(M);break}case"PerpendicularOffset":{const o=this._cp2(r,-4,1),l=this._cp3(r,o,.882353,-1.94),c=this._sub(l,o);this._crossProduct(c,this._sub(a,o))>0?this._rightPerpendicular(c):this._leftPerpendicular(c);const h=[c[0]/8,c[1]/8],m=this._sub(this._mid(o,l),h);i.push([m,a]);break}case"LineExcludingLastSegment":{const o=this._arrowPath(r),l=[];let c=o.length-2;for(;c--;)l.push(o[c]);i.push(l);break}case"MultivertexArrow":{const o=this._arrowPath(r),l=[];this._addArrow(l,o,!1),i.push(l);break}case"CrossedArrow":{const o=this._arrowPath(r),l=[];this._addArrow(l,o,!0),i.push(l);break}case"ChevronArrow":{const[o,l]=this._arrowLastSeg(r),c=10*this._geomUnitsPerPoint,h=this._sub(a,o),m=this._norm(h);this._normalize(h);const g=this._crossProduct(h,this._sub(l,o));let v=this._dotProduct(h,this._sub(l,o));v<.05*m?v=.05*m:v>.95*m-c&&(v=.95*m-c);const b=[o[0]+h[0]*v,o[1]+h[1]*v],x=this._leftPerp(h),$=[];$.push([b[0]+x[0]*g+h[0]*c,b[1]+x[1]*g+h[1]*c]),$.push(a),$.push([b[0]-x[0]*g+h[0]*c,b[1]-x[1]*g+h[1]*c]),i.push($);break}case"ChevronArrowOffset":{const[o,l]=this._arrowLastSeg(r),c=this._sub(a,o),h=this._norm(c);this._normalize(c);const m=this._crossProduct(c,this._sub(l,o));let g=this._dotProduct(c,this._sub(l,o));g<.05*h?g=.05*h:g>.95*h&&(g=.95*h);const v=[o[0]+c[0]*g,o[1]+c[1]*g];this._leftPerpendicular(c);const b=[];b.push([v[0]+c[0]*m*.5,v[1]+c[1]*m*.5]),b.push(this._mid(v,a)),b.push([v[0]-c[0]*m*.5,v[1]-c[1]*m*.5]),i.push(b);break}case"PartialFirstSegment":{const[o,l]=this._arrowLastSeg(r),c=this._sub(a,o),h=this._norm(c);this._normalize(c);let m=this._dotProduct(c,this._sub(l,o));m<.05*h?m=.05*h:m>.95*h&&(m=.95*h);const g=[o[0]+c[0]*m,o[1]+c[1]*m];i.push([o,g]);break}case"Arch":{const o=this._cp2(r,0,-1),l=this._cp3(r,o,.5,1),c=this._sub(a,o),h=this._mix(l,1,c,.55),m=this._mix(l,1,c,-.55),g=[a];this._addBezier2(g,a,h,l,4),this._addBezier2(g,l,m,o,4),i.push(g);break}case"CurvedParallelTicks":{const o=this._cp2(r,-4,1),l=this._cp3(r,o,.882353,-1.94),c=this._sub(l,o);this._crossProduct(c,this._sub(a,o))>0?this._rightPerpendicular(c):this._leftPerpendicular(c);const h=[c[0]/8,c[1]/8],m=this._sub(this._mid(o,l),h),g=this._sub(this._mix(o,.75,l,.25),h),v=this._sub(this._mix(o,.25,l,.75),h),b=[o];this._addBezier2(b,o,g,m,3),this._addBezier2(b,m,v,l,3),i.push(b);for(let x=0;x<8;x++){const $=b[2*x+1],M=[this._clone($)];M.push(this._add($,[c[0]/4,c[1]/4])),i.push(M)}break}case"Arc90Degrees":{const o=this._cp2(r,0,-1),l=this._cp3(r,o,.5,1),c=[o];this._add90DegArc(c,o,a,l),i.push(c);break}case"TipWithPerpendicularAndTicks":{const[o,l]=this._arrowLastSeg(r),c=10*this._geomUnitsPerPoint,h=this._sub(a,o),m=this._norm(h);this._normalize(h);let g=this._crossProduct(h,this._sub(l,o)),v=this._dotProduct(h,this._sub(l,o));v<.05*m?v=.05*m:v>.95*m-c&&(v=.95*m-c);const b=this._leftPerp(h),x=[a[0]-h[0]*c,a[1]-h[1]*c],$=.5*Math.max(m-v-c,c);g=Math.abs(g);const M=[];M.push([x[0]+b[0]*(g+$)-h[0]*$,x[1]+b[1]*(g+$)-h[1]*$]),M.push([x[0]+b[0]*g,x[1]+b[1]*g]),M.push([x[0]-b[0]*g,x[1]-b[1]*g]),M.push([x[0]-b[0]*(g+$)-h[0]*$,x[1]-b[1]*(g+$)-h[1]*$]),i.push(M),i.push([x,a]);break}case"ConcentricCircles":{const o=this._cp2(r,1,0),l=this._cp3(r,o,2,0),c=Math.cos(Math.PI/18),h=Math.sin(Math.PI/18);let m=this._dist(o,a),g=[m,0],v=[];for(let b=0;b<=36;b++)v.push(this._add(a,g)),this._rotateDirect(g,c,h);if(i.push(v),s>=4){v=[];const b=r[3];m=this._dist(b,a),g=[m,0];for(let x=0;x<=36;x++)v.push(this._add(a,g)),x===0&&(v.push(this._add(a,g)),zM(v[1],1)),this._rotateDirect(g,c,h);i.push(v)}v=[],m=this._dist(l,a),g=[m,0];for(let b=0;b<=36;b++)v.push(this._add(a,g)),this._rotateDirect(g,c,h);i.push(v);break}case"DoubleJogArrow":{a=this._arrowPath(r)[0];const[o,l]=this._arrowLastSeg(r),c=this._sub(a,o),h=this._norm(c);this._normalize(c);const m=Math.abs(this._crossProduct(c,this._sub(l,a)));let g=Math.abs(this._dotProduct(c,this._sub(l,a)));g<.05*h?g=.05*h:g>.95*h&&(g=.95*h);const v=Math.max(m,g),b=this._leftPerp(c);let x=[];const $=[a[0]-c[0]*g*.5+b[0]*m*.5,a[1]-c[1]*g*.5+b[1]*m*.5];x.push([$[0],$[1]]),$[0]+=c[0]*v*.5+b[0]*v*.4,$[1]+=c[1]*v*.5+b[1]*v*.4,x.push([$[0],$[1]]),$[0]-=b[0]*v*.25,$[1]-=b[1]*v*.25,x.push([$[0],$[1]]),$[0]+=c[0]*v*.5+b[0]*v*.4,$[1]+=c[1]*v*.5+b[1]*v*.4,x.push([$[0],$[1]]),i.push(x),x=[],$[0]=a[0]-c[0]*g*.5-b[0]*m*.5,$[1]=a[1]-c[1]*g*.5-b[1]*m*.5,x.push([$[0],$[1]]),$[0]+=c[0]*v*.5-b[0]*v*.4,$[1]+=c[1]*v*.5-b[1]*v*.4,x.push([$[0],$[1]]),$[0]+=b[0]*v*.25,$[1]+=b[1]*v*.25,x.push([$[0],$[1]]),$[0]+=c[0]*v*.5-b[0]*v*.4,$[1]+=c[1]*v*.5-b[1]*v*.4,x.push([$[0],$[1]]),i.push(x);break}case"LinkedChevrons":{const o=this._cp2(r,-5,0),l=this._cp3(r,o,-.2,1),c=this._sub(a,o);this._normalize(c);const h=this._leftPerp(c),m=Math.abs(this._crossProduct(c,this._sub(l,o)));i.push([o,a]);const g=[];g.push([a[0]-c[0]*m+h[0]*m,a[1]-c[1]*m+h[1]*m]),g.push(a),g.push([a[0]-c[0]*m-h[0]*m,a[1]-c[1]*m-h[1]*m]),i.push(g),this._addDash(i,o,[-c[0]*m+h[0]*m,-c[1]*m+h[1]*m]),this._addDash(i,o,[-c[0]*m-h[0]*m,-c[1]*m-h[1]*m]);break}case"SegmentThenHalfCircle":{const o=this._cp2(r,2,0),l=this._cp3(r,o,1.5,0);let c;c=s>=4?r[3]:this._cp3(r,o,1.25,-.5);const h=this._sub(o,a);this._normalize(h);const m=.5*this._dist(o,l),g=this._crossProduct(h,this._sub(c,a))>0,v=Math.cos(Math.PI/18);let b=Math.sin(Math.PI/18);g&&(b=-b);const x=[a,o];h[0]*=m,h[1]*=m;const $=this._add(o,h);h[0]=-h[0],h[1]=-h[1];for(let M=1;M<=18;M++)this._rotateDirect(h,v,b),x.push(this._add($,h));i.push(x);break}case"LineWithStraightTicks":{const o=this._cp2(r,-2,1),l=this._cp3(r,o,-1,-.5),c=this._sub(l,o);this._normalize(c);const h=this._dotProduct(c,this._sub(o,a)),m=this._dotProduct(c,this._sub(l,a));let g=[a];g.push([a[0]+c[0]*h,a[1]+c[1]*h]),g.push(o),i.push(g),g=[a],g.push([a[0]+c[0]*m,a[1]+c[1]*m]),g.push(l),i.push(g);break}case"DoubleCurve":{const o=this._cp2(r,-5,-1),l=this._cp3(r,o,2,0),c=Math.atan2(1,5),h=Math.cos(c),m=Math.sin(c),g=this._sub(o,a),v=this._dist(a,o);this._normalize(g),this._rotateDirect(g,h,-m);const b=[a];b.push([a[0]+g[0]*v*.5,a[1]+g[1]*v*.5]),zM(b[1],1),b.push([a[0]+g[0]*v*.8,a[1]+g[1]*v*.8]),this._addBezier2(b,b[2],[a[0]+g[0]*v,a[1]+g[1]*v],o,3);const x=this._sub(l,o),$=this._dist(o,l);this._normalize(x),this._rotateDirect(x,h,-m),this._addBezier2(b,o,[l[0]-x[0]*$,l[1]-x[1]*$],[l[0]-x[0]*$*.8,l[1]-x[1]*$*.8],3),b.push(l),i.push(b);break}case"ParallelWithTicksByWidth":{const o=this._cp2(r,0,-1),l=this._cp3(r,o,.5,3),c=this._sub(o,a);this._normalize(c);const h=this._crossProduct(c,this._sub(l,a));this._leftPerpendicular(c),h>0?(this._addAngledTicks(i,a,[a[0]+c[0]*h,a[1]+c[1]*h],o),this._addAngledTicks(i,o,[o[0]+c[0]*h,o[1]+c[1]*h],a)):(this._addAngledTicks(i,[a[0]+c[0]*h,a[1]+c[1]*h],a,o),this._addAngledTicks(i,[o[0]+c[0]*h,o[1]+c[1]*h],a,o));break}case"EnclosingRoundedRectangle":{const o=this._cp2(r,3,-2),l=[Math.min(a[0],o[0]),Math.max(a[1],o[1])],c=[Math.max(a[0],o[0]),Math.min(a[1],o[1])],h=c[0]-l[0],m=l[1]-c[1],g=Math.min(h,m)/10,v=[];v.push([l[0]+g+.75*(h-2*g),l[1]]),v.push([c[0]-g,l[1]]),this._add90DegArc(v,[c[0]-g,l[1]],[c[0],l[1]-g],[c[0],l[1]]),v.push([c[0],c[1]+g]),this._add90DegArc(v,[c[0],c[1]+g],[c[0]-g,c[1]],c),v.push([l[0]+g,c[1]]),this._add90DegArc(v,[l[0]+g,c[1]],[l[0],c[1]+g],[l[0],c[1]]),v.push([l[0],l[1]-g]),this._add90DegArc(v,[l[0],l[1]-g],[l[0]+g,l[1]],l),v.push([l[0]+g+.75*(h-2*g),l[1]]);break}default:i.push(r)}}return i}};var tp;let Gpt=(tp=class{static local(){return tp.instance===null&&(tp.instance=new tp),tp.instance}execute(e,i,r){return new Wpt(e,i,r)}},tp.instance=null,tp),Wpt=class extends aI{constructor(e,i,r){super(e,!0,!0),this._curveHelper=new ug,this._beginCut=(i.beginCut!==void 0?i.beginCut:1)*r,this._endCut=(i.endCut!==void 0?i.endCut:1)*r,this._middleCut=(i.middleCut!==void 0?i.middleCut:0)*r,this._invert=i.invert!==void 0&&i.invert,this._beginCut<0&&(this._beginCut=0),this._endCut<0&&(this._endCut=0),this._middleCut<0&&(this._middleCut=0)}processPath(e){const{_beginCut:i,_endCut:r,_middleCut:n}=this,s=e.pathLength(),a=Ki.createEmptyOptimizedCIM("esriGeometryPolyline");if(this._invert){if(i!==0||r!==0||n!==0)if(i+r+n>=s)for(a.startPath();e.nextPoint();)a.pushXY(e.x,e.y);else this._curveHelper.appendSubCurve(a,e,0,i),this._curveHelper.appendSubCurve(a,e,.5*(s-n),.5*(s+n)),this._curveHelper.appendSubCurve(a,e,s-r,r)}else if(i===0&&r===0&&n===0)for(a.startPath();e.nextPoint();)a.pushXY(e.x,e.y);else i+r+n<s&&(n===0?this._curveHelper.appendSubCurve(a,e,i,s-r):(this._curveHelper.appendSubCurve(a,e,i,.5*(s-n)),this._curveHelper.appendSubCurve(a,e,.5*(s+n),s-r)));return a.totalSize===0?null:a}};const bue=1e-7;let X5=class{constructor(){this._values=[],this.extPtGap=0,this.ctrlPtGap=0,this._length=0,this._currentValue=0}isEmpty(){return this._values.length===0}size(){return this._values.length}init(e,i,r=!0){if(this._setEmpty(),!e||e.length===0)return!1;for(let n=0;n<e.length;n++){let s=Math.abs(e[n]);r&&s<bue&&(s=bue),this._values.push(s),this._length+=s}return i&&1&e.length&&(this._length*=2),this._length!==0&&(this.ctrlPtGap=this.extPtGap=0,this._currentValue=-1,!0)}scale(e){const i=this._values?this._values.length:0;for(let r=0;r<i;++r)this._values[r]*=e;this._length*=e,this.extPtGap*=e,this.ctrlPtGap*=e}addValue(e){this._length+=e,this._values.push(e)}firstValue(){return this._values[0]}lastValue(){return this._values[this._values.length-1]}nextValue(){return this._currentValue++,this._currentValue===this._values.length&&(this._currentValue=0),this._values[this._currentValue]}reset(){this._currentValue=-1}length(){return this._length}_setEmpty(){this.extPtGap=this.ctrlPtGap=this._length=0,this._currentValue=-1,this._values.length=0}},gm=class{constructor(){this.pt=null,this.ca=0,this.sa=0}},u3=class{constructor(){this.reset()}reset(){this.segment=null,this.segmentLength=0,this.abscissa=0,this.isPathEnd=!1,this.isPartEnd=!1}isValid(){return this.segment!==null}copyTo(e){e.segment=this.segment,e.segmentLength=this.segmentLength,e.abscissa=this.abscissa,e.isPathEnd=this.isPathEnd,e.isPartEnd=this.isPartEnd}},Q5=class extends ug{constructor(e=0,i=!1){super(e,i),this._tempPos=new u3,this._tempPt=[0,0],this._tolerance=KE,this._currentPosition=new u3}updateTolerance(e){this._tolerance=KE*e}init(e,i,r=!0){return r?(this._patternLength=i.length(),this._partExtPtGap=i.extPtGap,this._partCtrlPtGap=i.ctrlPtGap):(this._patternLength=0,this._partExtPtGap=0,this._partCtrlPtGap=0),this._currentPosition.reset(),this._partSegCount=0,this._pathCursor=e,this._seg=-1,this._setPosAtNextPart()}curPositionIsValid(){return this._currentPosition.isValid()}nextPosition(e,i=0){const r=new u3;return!!this._nextPosition(e,r,null,i)&&(r.copyTo(this._currentPosition),!0)}curPointAndAngle(e){e.pt=this._getPoint(this._currentPosition);const[i,r]=this._getAngleCS(this._tempPt,this._currentPosition);e.ca=i,e.sa=r}nextPointAndAngle(e,i,r=0){const n=this._tempPos;if(!this._nextPosition(e,n,null,r))return!1;n.copyTo(this._currentPosition),i.pt=this._getPoint(n);const[s,a]=this._getAngleCS(this._tempPt,n);return i.ca=s,i.sa=a,!0}nextCurve(e){if(e===0)return null;const i=Ki.createEmptyOptimizedCIM("esriGeometryPolyline");i.startPath(),i.nextPath();const r=new u3;return this._nextPosition(e,r,i,1)?(r.copyTo(this._currentPosition),i):null}isPathEnd(){return this._currentPosition.isPathEnd}getPathEnd(){return this._currentPosition.segment[1]}getPt(e){return this._pathCursor.seekInPath(e),[this._pathCursor.x,this._pathCursor.y]}getSeg(e){return[this.getPt(e),this.getPt(e+1)]}_nextPosition(e,i,r,n){if(this._currentPosition.isPathEnd)return!1;let s=this._currentPosition.abscissa;for(this._currentPosition.segmentLength>0&&(s/=this._currentPosition.segmentLength),this._currentPosition.copyTo(i);i.abscissa+e*this._partLengthRatio>i.segmentLength+this._tolerance;){if(r){if(r.pathSize===0)if(s===0){const o=i.segment[0];r.pushXY(o[0],o[1])}else r.pushPoint(this.getSegCoord2D(i.segment,s));const a=i.segment[1];r.pushXY(a[0],a[1])}if(s=0,e-=(i.segmentLength-i.abscissa)/this._partLengthRatio,this._partSegCount)i.segment=this._nextSegment(),i.segmentLength=this.getSegLength(i.segment),i.abscissa=0,this._partSegCount--;else{if(!this._setPosAtNextPart())return n!==0&&(i.segmentLength=this.getSegLength(i.segment),i.isPartEnd=!0,n===1?(i.abscissa=i.segmentLength,i.isPathEnd=!0):i.abscissa=i.segmentLength+e,!0);this._currentPosition.copyTo(i)}}if(i.abscissa+=e*this._partLengthRatio,r){r.pathSize===0&&(s===0?r.pushPoint(i.segment[0]):r.pushPoint(this.getSegCoord2D(i.segment,s)));const a=i.abscissa/i.segmentLength;a===1?r.pushPoint(i.segment[1]):r.pushPoint(this.getSegCoord2D(i.segment,a))}return this._partSegCount||Math.abs(i.abscissa-i.segmentLength)<this._tolerance&&(i.isPathEnd=this._partIsLast,i.isPartEnd=!0),!0}_getPoint(e){const i=e.segmentLength<=0?0:e.abscissa/e.segmentLength;return this.getSegCoord2D(this._currentPosition.segment,i)}_getAngleCS(e,i){const r=i.segmentLength<=0?0:i.abscissa/i.segmentLength;return this.getSegAngleCS(e,this._currentPosition.segment,r)}_setPosAtNextPart(){for(;this._partSegCount;)this._hasNextSegment()&&this._nextSegment(),this._partSegCount--;if(!this._hasNextSegment())return!1;for(this._partLength=0,this._partIsLast=!0,this._partSegCount=0;this._hasNextSegment();)if(this._partLength+=this.getSegLength(this._nextSegment()),this._partSegCount++,this._pathCursor.getControlPointAt(this._getEndPointIndex())){this._partIsLast=!this._hasNextSegment();break}let e=this._partSegCount;for(;e;)this._previousSegment(),--e;this._currentPosition.segment=this._nextSegment(),this._currentPosition.segmentLength=this.getSegLength(this._currentPosition.segment),this._currentPosition.abscissa=0,this._currentPosition.isPathEnd=this._currentPosition.isPartEnd=!1,--this._partSegCount;const i=this._getStartPointIndex();this._ctrlPtBegin=this._pathCursor.getControlPointAt(i);let r=i+this._partSegCount+1;if(r>=this._pathCursor.pathSize&&(r=0),this._ctrlPtEnd=this._pathCursor.getControlPointAt(r),this._patternLength>0){const n=this._ctrlPtBegin?this._partCtrlPtGap:this._partExtPtGap,s=this._ctrlPtEnd?this._partCtrlPtGap:this._partExtPtGap;let a=Math.round((this._partLength-(n+s))/this._patternLength);a<=0&&(a=n+s>0?0:1),this._partLengthRatio=this._partLength/(n+s+a*this._patternLength),this._partLengthRatio<.01&&(this._partLengthRatio=1)}else this._partLengthRatio=1;return!0}_hasNextSegment(){return this._seg<this._pathCursor.pathSize-2}_previousSegment(){return this.getSeg(--this._seg)}_nextSegment(){return this.getSeg(++this._seg)}_getStartPointIndex(){return this._seg}_getEndPointIndex(){return this._seg+1}};var ip;let Zpt=(ip=class{static local(){return ip.instance===null&&(ip.instance=new ip),ip.instance}execute(e,i,r){return new Ypt(e,i,r)}},ip.instance=null,ip),Ypt=class extends aI{constructor(e,i,r){super(e,!0,!0),this._firstCurve=null,this._walker=new Q5,this._walker.updateTolerance(r),this._endings=i.lineDashEnding,this._customDashPos=-(i.offsetAlongLine??0)*r,this._offsetAtEnd=(i.customEndingOffset??0)*r;let n=Mxe(i).dashTemplate;n==null&&(n=[]),n.length%2&&(n=[...n,...n]),this._pattern=new X5,this._pattern.init(n,!0),this._pattern.scale(r)}processPath(e){if(this._pattern.length()===0){this.iteratePath=!1;const n=mv(e);return Ki.fromJSONCIM({paths:[n]})}if(!this.iteratePath){let n=!0;switch(this._endings){case"HalfPattern":case"HalfGap":default:this._pattern.extPtGap=0;break;case"FullPattern":this.isClosed||(this._pattern.extPtGap=.5*this._pattern.firstValue());break;case"FullGap":this.isClosed||(this._pattern.extPtGap=.5*this._pattern.lastValue());break;case"NoConstraint":this.isClosed||(n=!1);break;case"Custom":this.isClosed||(this._pattern.extPtGap=.5*this._offsetAtEnd)}const s=e.pathLength();if(this._pattern.isEmpty()||s<.1*this._pattern.length()){const a=mv(e);return Ki.fromJSONCIM({paths:[a]})}if(!this._walker.init(e,this._pattern,n)){const a=mv(e);return Ki.fromJSONCIM({paths:[a]})}}let i;if(this.iteratePath)i=this._pattern.nextValue();else{let n;switch(this._endings){case"HalfPattern":default:n=.5*this._pattern.firstValue();break;case"HalfGap":n=.5*-this._pattern.lastValue();break;case"FullGap":n=-this._pattern.lastValue();break;case"FullPattern":n=0;break;case"NoConstraint":case"Custom":n=-this._customDashPos}let s=n/this._pattern.length();s-=Math.floor(s),n=s*this._pattern.length(),this._pattern.reset(),i=this._pattern.nextValue();let a=!1;for(;n>=i;)n-=i,i=this._pattern.nextValue(),a=!a;i-=n,a?(this._walker.nextPosition(i),i=this._pattern.nextValue()):this.isClosed&&(this._firstCurve=this._walker.nextCurve(i),i=this._pattern.nextValue(),this._walker.nextPosition(i),i=this._pattern.nextValue())}let r=this._walker.nextCurve(i);if(r)if(this._walker.isPathEnd()){if(this.iteratePath=!1,this._firstCurve){for(this._firstCurve.nextPath();this._firstCurve.nextPoint();)r.pushXY(this._firstCurve.x,this._firstCurve.y);this._firstCurve=null}}else i=this._pattern.nextValue(),!this._walker.nextPosition(i)||this._walker.isPathEnd()?(this.iteratePath=!1,this._firstCurve&&(r.pushCursor(this._firstCurve),this._firstCurve=null)):this.iteratePath=!0;else this.iteratePath=!1,r=this._firstCurve,this._firstCurve=null;return r==null||r.reset(),r}};var rp;let Jpt=(rp=class{static local(){return rp.instance===null&&(rp.instance=new rp),rp.instance}execute(e,i,r,n,s,a){return new Xpt(e,i,r,n,s,a)}},rp.instance=null,rp),Xpt=class{constructor(e,i,r,n,s,a){this._preventClipping=a,this._inputGeometries=e,this._tileKey=n,this._maxInflateSize=s*r,this._width=(i.width!==void 0?i.width:2)*r,i.method,this._option=i.option}next(){let e;for(;e=this._inputGeometries.next();){if(e.geometryType==="esriGeometryEnvelope"&&this._width>0){const i=e.asJSON();return Math.min(i.xmax-i.xmin,i.ymax-i.ymin)-2*this._width<0?e:Ki.fromJSONCIM({paths:[[[i.xmin+this._width,i.ymin+this._width],[i.xmax-this._width,i.ymin+this._width],[i.xmax-this._width,i.ymax-this._width],[i.xmin+this._width,i.ymax-this._width],[i.xmin+this._width,i.ymin+this._width]],[[i.xmin,i.ymin],[i.xmin,i.ymax],[i.xmax,i.ymax],[i.xmax,i.ymin],[i.xmin,i.ymin]]]})}if(e.geometryType==="esriGeometryPolygon"){if(this._width===0)return e.clone();const i=dX.module,r=!this._preventClipping&&this._tileKey?hX(e,this._maxInflateSize,!0):e.clone();if(!r)continue;const n={...r.asJSON(),spatialReference:{wkid:tt.WebMercator.wkid}},s=i.execute(n,-this._width);if(s){for(const a of s.rings)if(a){r.startPath();for(const o of a.reverse())r.pushXY(o[0],r.yFactor*o[1])}}return r}}return null}};var np;let Qpt=(np=class{static local(){return np.instance===null&&(np.instance=new np),np.instance}execute(e,i){return new Kpt(e,i)}},np.instance=null,np),Kpt=class{constructor(e,i){this._inputGeometries=e,this._medhod=i.method}next(){let e=this._inputGeometries.next();const i=this._medhod;for(;e!=null;){if(e.totalSize>0)switch(i){case"RectangularBox":return eft(e);case"ConvexHull":return this._constructConvexHull(e);default:return tft(e)}e=this._inputGeometries.next()}return null}_constructConvexHull(e){switch(e.geometryType){case"esriGeometryPolyline":case"esriGeometryPolygon":{const i=qTe.module,r={...e.asJSON(),spatialReference:{wkid:tt.WebMercator.wkid}},n=i.execute(r);return n?Ki.fromJSONCIM(n):null}case"esriGeometryEnvelope":return e;default:return null}}};function eft(t){const e=Fk(t),i={xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3]};return Ki.fromJSONCIM(i)}function tft(t){switch(t.geometryType){case"esriGeometryPolyline":{const e=[];for(;t.nextPath();)ift(t,e);return Ki.fromJSONCIM({rings:e})}case"esriGeometryPolygon":case"esriGeometryEnvelope":return t;default:return null}}function ift(t,e){if(t.seekPathStart(),!t.nextPoint())return;const i=t.x,r=t.y,n=[[i,r]];for(e.push(n);t.nextPoint();)n.push([t.x,t.y]);n.push([i,r])}var sp;let rft=(sp=class{static local(){return sp.instance===null&&(sp.instance=new sp),sp.instance}execute(e,i,r){return new nft(e,i,r)}},sp.instance=null,sp),nft=class extends aI{constructor(e,i,r){super(e,!1,!0),this._curveHelper=new ug,this._length=(i.length!==void 0?i.length:20)*r,this._angle=i.angle!==void 0?i.angle:225,this._position=i.position!==void 0?i.position:50,this._length<0&&(this._length=-this._length),this._position<20&&(this._position=20),this._position>80&&(this._position=80),this._mirror=!1}processPath(e){const i=Ki.createEmptyOptimizedCIM("esriGeometryPolyline");if(this._curveHelper.isEmpty(e))return null;e.seekInPath(0);const r=e.x,n=e.y;e.seekInPath(e.pathSize-1);const s=e.x,a=e.y,o=[s-r,a-n];this._curveHelper.normalize(o);const l=r+(s-r)*this._position/100,c=n+(a-n)*this._position/100,h=Math.cos((90-this._angle)/180*Math.PI);let m=Math.sin((90-this._angle)/180*Math.PI);this._mirror&&(m=-m),this._mirror=!this._mirror;const g=[l-this._length/2*h,c-this._length/2*m],v=[l+this._length/2*h,c+this._length/2*m];return i.pushPath([[r,n],g,v,[s,a]]),i}};var ap;let sft=(ap=class{static local(){return ap.instance===null&&(ap.instance=new ap),ap.instance}execute(e,i,r){return new aft(e,i,r)}},ap.instance=null,ap),aft=class{constructor(e,i,r){this._inputGeometries=e,this._offsetX=i.offsetX!==void 0?i.offsetX*r:0,this._offsetY=i.offsetY!==void 0?i.offsetY*r:0}next(){let e=this._inputGeometries.next();for(;e;){if(e.totalSize>0)return this._move(e.clone(),this._offsetX,this._offsetY);e=this._inputGeometries.next()}return null}_move(e,i,r){for(;e.nextPath();)for(;e.nextPoint();)e.x=e.x+i,e.y=e.y+r;return e.reset(),e}};const oft=10;var op;let lft=(op=class{static local(){return op.instance===null&&(op.instance=new op),op.instance}execute(e,i,r,n,s,a){return new cft(e,i,r,n,s,a)}},op.instance=null,op),cft=class{constructor(e,i,r,n,s,a){this._preventClipping=a,this._inputGeometries=e,this._tileKey=n,this._curveHelper=new ug,this._offset=(i.offset??1)*r,this._method=i.method,this._maxInflateSize=Math.max(Math.abs(s*r),oft),this._option=i.option,this._offsetFlattenError=KE*r}next(){let e;for(;e=this._inputGeometries.next();){if(this._offset===0)return e.clone();if(e.geometryType==="esriGeometryEnvelope"){if(this._method==="Rounded"&&this._offset>0){const c=mv(e),h=this._curveHelper.offset(c,-this._offset,this._method,4,this._offsetFlattenError);if(h){const m=Ki.createEmptyOptimizedCIM(e.geometryType);return m.pushPath(h),m}return null}const l=e.asJSON();if(Ro(l)&&Math.min(l.xmax-l.xmin,l.ymax-l.ymin)+2*this._offset>0)return Ki.fromJSONCIM({xmin:l.xmin-this._offset,xmax:l.xmax+this._offset,ymin:l.ymin-this._offset,ymax:l.ymax+this._offset})}const i=!this._preventClipping&&this._tileKey?hX(e,this._maxInflateSize,!0):e.clone();if(!i)continue;const r=ZTe.module,n=WTe.module,s={...i.asJSON(),spatialReference:{wkid:tt.WebMercator.wkid}};let a,o=uft(this._method);return e.geometryType==="esriGeometryPolygon"&&this._offset>0?(o==="square"&&(o="bevel"),a=n.executeMany([s],[this._offset],o,"round")[0]):a=r.execute(s,-this._offset,{joins:o,flattenError:this._offsetFlattenError,miterLimit:4}),a?Ki.fromJSONCIM(a):null}return null}};function uft(t){switch(t){case"Rounded":return"round";case"Bevelled":return"bevel";case"Mitered":return"miter";case"Square":return"square"}}var lp;let dft=(lp=class{static local(){return lp.instance===null&&(lp.instance=new lp),lp.instance}execute(e,i,r){return new hft(e,i,r)}},lp.instance=null,lp),hft=class{constructor(e,i,r){this._inputGeometries=e,this._length=(i.length!==void 0?i.length:Hn.CIMGeometricEffectRadial.length)*r,this._angle=i.angle!==void 0?i.angle*Math.PI/180:Hn.CIMGeometricEffectRadial.angle,this._lx=Math.cos(this._angle)*this._length,this._ly=Math.sin(this._angle)*this._length}next(){let e=this._inputGeometries.next();for(;e;){if(e.geometryType==="esriGeometryPoint"||e.geometryType==="esriGeometryMultipoint"){const i=Ki.createEmptyOptimizedCIM("esriGeometryPolyline");return e.nextPath()&&e.nextPoint()&&i.pushPath([[e.x,e.y],[e.x+this._lx,e.y+this._ly]]),i}if(e.geometryType==="esriGeometryPolygon"){const i=oge(e);if(!i)return null;const r=Ki.createEmptyOptimizedCIM("esriGeometryPolyline");return r.pushPath([[i[0],i[1]],[i[0]+this._lx,i[1]+this._ly]]),r}e=this._inputGeometries.next()}return null}};var cp;let pft=(cp=class{static local(){return cp.instance===null&&(cp.instance=new cp),cp.instance}execute(e,i,r){return new fft(e,i,r)}},cp.instance=null,cp),fft=class{constructor(e,i,r){this._inputGeometries=e,this._reverse=i.reverse===void 0||i.reverse}next(){let e=this._inputGeometries.next();for(;e;){if(!this._reverse)return e;if(e.geometryType==="esriGeometryPolyline")return mft(e.clone());e=this._inputGeometries.next()}return null}};function mft(t){for(;t.nextPath();)for(let e=0;e<t.pathSize/2;e++){t.seekInPath(e);const i=t.x,r=t.y;t.seekInPath(t.pathSize-e-1);const n=t.x,s=t.y;t.x=i,t.y=r,t.seekInPath(e),t.x=n,t.y=s}return t.reset(),t}var up;let gft=(up=class{static local(){return up.instance===null&&(up.instance=new up),up.instance}execute(e,i,r){return new yft(e,i,r)}},up.instance=null,up),yft=class{constructor(e,i,r){this._inputGeometries=e,this._rotateAngle=i.angle!==void 0?i.angle*Math.PI/180:0}next(){let e=this._inputGeometries.next();for(;e;){if(this._rotateAngle===0||e.geometryType==="esriGeometryPoint")return e;if(e.totalSize>0){const i=Fk(e),r=(i[2]+i[0])/2,n=(i[3]+i[1])/2;return e.reset(),this._rotate(e.clone(),r,n)}e=this._inputGeometries.next()}return null}_rotate(e,i,r){const n=Math.cos(this._rotateAngle),s=Math.sin(this._rotateAngle);for(;e.nextPath();)for(;e.nextPoint();){const a=e.x-i,o=e.y-r;e.x=i+a*n-o*s,e.y=r+a*s+o*n}return e.reset(),e}};var dp;let vft=(dp=class{static local(){return dp.instance===null&&(dp.instance=new dp),dp.instance}execute(e,i,r){return new bft(e,i,r)}},dp.instance=null,dp),bft=class{constructor(e,i,r){this._inputGeometries=e,this._xFactor=i.xScaleFactor!==void 0?i.xScaleFactor:1.15,this._yFactor=i.yScaleFactor!==void 0?i.yScaleFactor:1.15}next(){const e=this._inputGeometries.next();if(e){if(this._xFactor===1&&this._yFactor===1||e.geometryType==="esriGeometryPoint")return e;if(e.totalSize>0){const i=Fk(e),r=(i[2]+i[0])/2,n=(i[3]+i[1])/2;return e.reset(),this._scaleCursor(e.clone(),r,n)}}return null}_scaleCursor(e,i,r){for(;e.nextPath();)for(;e.nextPoint();)e.x=i+(e.x-i)*this._xFactor,e.y=r+(e.y-r)*this._yFactor;return e.reset(),e}},IG=class{constructor(){this._polyline=[]}beginPath(e){this._polyline.push([e])}lineTo(e){if(this._polyline.length===0)throw new Error("No path started. Call beginPath first.");this._polyline[this._polyline.length-1].push(e)}getPointCount(){return this._polyline.reduce((e,i)=>e+i.length,0)}addSegment(e,i,r){r&&this.beginPath(e),this.lineTo(i)}getXY(e){let i=0;for(const r of this._polyline){if(e<i+r.length)return r[e-i];i+=r.length}return null}getGeometry(){return this._polyline}};var hp;let wft=(hp=class{static local(){return hp.instance===null&&(hp.instance=new hp),hp.instance}execute(e,i,r){return new _ft(e,i,r)}},hp.instance=null,hp),_ft=class extends aI{constructor(e,i,r){super(e,!1,!0),this._suppress=i.suppress!==void 0&&i.suppress,this._invert=i.invert!==void 0&&i.invert}processPath(e){if(e.totalSize<=0)return null;if(!this._suppress){const v=Ki.createEmptyOptimizedCIM("esriGeometryPolygon",!1,!1,e.yFactor);for(e.seekPathEnd();e.nextPoint();)v.pushXY(e.x,e.y);return v}const i=[],r=new Array(e.pathSize);let n=0;for(e.seekPathStart();e.nextPoint();)r[n++]=e.getControlPoint(),i.push([e.x,e.y]);let s=!0,a=!0,o=!1,l=!this._invert;n=0;const c=new IG;let h=i[0];for(;n<i.length;){const v=i[n+1],b=r[n],x=r[n+1];n++,a&&(l=b||x?this._invert:!this._invert,a=!1),l?(c.addSegment(h,v,s),s=!1):o=!0,h=v,x&&(l?(l=!1,s=!0):l=!0)}const m=c.getGeometry();if(m.length===0)return null;if(!o&&i[0][0]===i[i.length-1][0]&&i[0][1]===i[i.length-1][1]){const v=m[m.length-1];return v[0][0]===v[v.length-1][0]&&v[0][1]===v[v.length-1][1]||v.push([v[0][0],v[0][1]]),Ki.fromJSONCIM({paths:m})}const g=m[m.length-1];return c.getPointCount()>1&&e.geometryType==="esriGeometryPolygon"&&g[0][0]===g[g.length-1][0]&&g[0][1]===g[g.length-1][1]&&m.length>1&&(m[m.length-1].push(...m[0]),m.splice(0,1)),Ki.fromJSONCIM({paths:m})}};const NM=()=>Ie.getLogger("esri.symbols.cim.effects.EffectTaperedPolygon");var pp;let xft=(pp=class{static local(){return pp.instance===null&&(pp.instance=new pp),pp.instance}execute(e,i,r){return new $ft(e,i,r)}},pp.instance=null,pp),$ft=class extends aI{constructor(e,i,r){super(e,!1,!0),this._slopeS=0,this._slopeC=1,this._lastTangent1=new ki(NaN,NaN),this._lastWidth=0,this._geomUnitsPerPoint=r,this._halfFromWidth=Math.abs(i.fromWidth!==void 0?i.fromWidth:0)*r*.5,this._halfToWidth=Math.abs(i.toWidth!==void 0?i.toWidth:1)*r*.5,this._originalLength=(i.length!==void 0?i.length:0)*r,this._length=0}processPath(e){if(e.totalSize<=0)return null;if(this._halfFromWidth<=0&&this._halfToWidth<=0){const c=Ki.createEmptyOptimizedCIM("esriGeometryPolygon",!1,!1,e.yFactor);for(e.seekPathEnd();e.prevPoint();)c.pushXY(e.x,e.y);for(e.seekPathStart();e.nextPoint();)c.pushXY(e.x,e.y);return c}const i=e.getCurrentPath().asJSON(),r=GTe.module.execute(i,.25*this._geomUnitsPerPoint,{removeDegenerateParts:!0}),n=r==null?null:Un(r)?r.rings:La(r)?r.paths:null;if(!n)return NM().error(new ae("mapview-bad-resource","Unable to process geometry")),null;const s=HTe.module.execute(r);if((this._originalLength===0||this._originalLength>s)&&s>0){this._length=s;const c=(this._halfToWidth-this._halfFromWidth)/this._length;if(Math.abs(c)<1){const h=c*c;this._slopeC=Math.sqrt(1/(1+h)),this._slopeS=Math.sqrt(h/(1+h)),c<0&&(this._slopeS=-this._slopeS)}else this._slopeC=this._slopeS=.7071}else this._length=this._originalLength,this._slopeC=1,this._slopeS=0;const a=[];for(const c of n){const h=new IG,m=new IG;let g=0;this._setFromOffset(c.slice(0,2),h,m);for(let x=0,$=3;$<=c.length;++x,++$)g=this._setOffset(c.slice(x,$),g,h,m);this._setToOffset(c.slice(-2),g,h,m);const[v]=h.getGeometry(),[b]=m.getGeometry();a.push([...v,...b.reverse()])}const o={rings:a,spatialReference:{wkid:tt.WebMercator.wkid}},l=YTe.module.execute(o);return Ki.fromJSONCIM(l)}_setFromOffset([[e,i],[r,n]],s,a){const o=this._halfFromWidth,l=new ki(r-e,n-i).normalize().scale(o);s.beginPath([e-l.y,i+l.x]),a.beginPath([e+l.y,i-l.x])}_setToOffset([[e,i],[r,n]],s,a,o){let l;l=(s+=Math.sqrt((r-e)**2+(n-i)**2))>=this._length?this._halfToWidth:this._halfFromWidth+(this._halfToWidth-this._halfFromWidth)*s/this._length;const c=new ki(r-e,n-i).normalize().scale(l);a.lineTo([r-c.y,n+c.x]),o.lineTo([r+c.y,n-c.x])}_setOffset([[e,i],[r,n],[s,a]],o,l,c){const h=Math.sqrt((r-e)**2+(n-i)**2);let m;m=o+h>=this._length?this._halfToWidth:this._halfFromWidth+(this._halfToWidth-this._halfFromWidth)*(o+h)/this._length,o+=h;const g=new ki(r,n),v=new ki(r-e,n-i).normalize(),b=new ki(s-r,a-n).normalize(),x=ki.sub(b,v),$=l.getPointCount(),M=c.getPointCount();v.leftPerpendicular(),b.leftPerpendicular();const k=v.x*b.x+v.y*b.y;if(k>.99){const A=ki.add(v,b).scale(m/2),L=A.clone().rotate(this._slopeC,this._slopeS);l.lineTo([g.x+L.x,g.y+L.y]);const z=A.rotateReverse(this._slopeC,this._slopeS);c.lineTo([g.x-z.x,g.y-z.y])}else{const A=v.x*b.y-v.y*b.x;if(x.scale(1/A),A<0){x.scale(-m).rotateReverse(this._slopeC,this._slopeS);const J=c.getXY(M-1);J||NM().error(new ae("mapview-bad-resource","Unable to process geometry, index out of scope"));const Q=ki.add(g,x).sub(ki.fromArray(J));if(v.x*Q.y-v.y*Q.x>0){const le=v.clone().scale(-m).rotateReverse(this._slopeC,this._slopeS),ie=b.clone().scale(-m).rotateReverse(this._slopeC,this._slopeS);c.lineTo([g.x+le.x,g.y+le.y]),c.lineTo([g.x,g.y]),c.lineTo([g.x+ie.x,g.y+ie.y])}else c.lineTo([g.x+x.x,g.y+x.y])}else{x.scale(m).rotate(this._slopeC,this._slopeS);const J=l.getXY($-1);J||NM().error(new ae("mapview-bad-resource","Unable to process geometry, index out of scope"));const Q=ki.add(g,x).sub(ki.fromArray(J));if(v.x*Q.y-v.y*Q.x>0){const le=v.clone().scale(m).rotate(this._slopeC,this._slopeS),ie=b.clone().scale(m).rotate(this._slopeC,this._slopeS);l.lineTo([g.x+le.x,g.y+le.y]),l.lineTo([g.x,g.y]),l.lineTo([g.x+ie.x,g.y+ie.y])}else l.lineTo([g.x+x.x,g.y+x.y])}const L=Math.acos(k);let z=1;if(m>.25){const J=2*Math.acos(1-.25/m);J<L&&(z=Math.round(L/J))}const U=Math.cos(L/z),B=Math.sin(L/z),X=v.clone();if(A<0){X.rotate(this._slopeC,this._slopeS);const J=l.getXY($-1);J||NM().error(new ae("mapview-bad-resource","Unable to process geometry, index out of scope"));const Q=ki.add(g,X.clone().scale(this._lastWidth)),le=ki.sub(Q,ki.fromArray(J)),ie=v.x*le.y-v.y*le.x;if(!isNaN(this._lastTangent1.x)&&!isNaN(this._lastTangent1.y)&&ie>0){const re=new ki(e,i),se=this._lastTangent1.clone().scale(this._lastWidth);se.rotate(this._slopeC,this._slopeS);const Te=v.clone().scale(this._lastWidth);Te.rotate(this._slopeC,this._slopeS),l.lineTo([re.x+se.x,re.y+se.y]),l.lineTo([re.x,re.y]),l.lineTo([re.x+Te.x,re.y+Te.y])}}else{X.scale(-1).rotateReverse(this._slopeC,this._slopeS);const J=c.getXY(M-1);J||NM().error(new ae("mapview-bad-resource","Unable to process geometry, index out of scope"));const Q=ki.add(g,X.clone().scale(this._lastWidth)),le=ki.sub(Q,ki.fromArray(J)),ie=v.x*le.y-v.y*le.x;if(!isNaN(this._lastTangent1.x)&&!isNaN(this._lastTangent1.y)&&ie>0){const re=new ki(e,i),se=this._lastTangent1.clone().scale(-this._lastWidth);se.rotateReverse(this._slopeC,this._slopeS);const Te=v.clone().scale(-this._lastWidth);Te.rotateReverse(this._slopeC,this._slopeS),c.lineTo([re.x+se.x,re.y+se.y]),c.lineTo([re.x,re.y]),c.lineTo([re.x+Te.x,re.y+Te.y])}}X.scale(m);for(let J=0;J<=z;J++)A<0?(l.lineTo([g.x+X.x,g.y+X.y]),X.rotateReverse(U,B)):(c.lineTo([g.x+X.x,g.y+X.y]),X.rotate(U,B))}return this._lastTangent1.setCoords(v.x,v.y),this._lastWidth=m,o}};var fp;let Sft=(fp=class{static local(){return fp.instance===null&&(fp.instance=new fp),fp.instance}execute(e,i,r){return new Tft(e,i,r)}},fp.instance=null,fp),Tft=class{constructor(e,i,r){this._inputGeometries=e,this._height=(i.amplitude!==void 0?i.amplitude:2)*r,this._period=(i.period!==void 0?i.period:3)*r,this._style=i.waveform,this._height<=0&&(this._height=Math.abs(this._height)),this._period<=0&&(this._period=Math.abs(this._period)),this._pattern=new X5,this._pattern.addValue(this._period),this._pattern.addValue(this._period),this._walker=new Q5,this._walker.updateTolerance(r)}next(){let e=this._inputGeometries.next();for(;e;){if(this._height===0||this._period===0)return e;const i=this._processGeom(e);if(i)return i;e=this._inputGeometries.next()}return null}_processGeom(e){const i=Ki.createEmptyOptimizedCIM(e.geometryType);for(;e.nextPath();){i.startPath();const r=e.pathLength();if(this._walker.init(e,this._pattern))switch(this._style){case"Sinus":default:this._constructCurve(i,r,!1);break;case"Square":this._constructSquare(i,r);break;case"Triangle":this._constructTriangle(i,r);break;case"Random":this._constructCurve(i,r,!0)}else for(;e.nextPoint();)i.pushXY(e.x,e.y)}return i}_constructCurve(e,i,r){let n=Math.round(i/this._period);n===0&&(n=1);const s=n*16+1,a=i/n,o=this._period/16,l=1/s,c=2*Math.PI*i/a,h=2*Math.PI*Math.random(),m=2*Math.PI*Math.random(),g=2*Math.PI*Math.random(),v=.75-Math.random()/2,b=.75-Math.random()/2,x=new gm;this._walker.curPointAndAngle(x),e.pushPoint(x.pt);let $=0;for(;;){if(!this._walker.nextPointAndAngle(o,x)){e.pushPoint(this._walker.getPathEnd());break}{const M=$;let k;if($+=l,r){const A=this._height/2*(1+.3*Math.sin(v*c*M+h));k=A*Math.sin(c*M+m),k+=A*Math.sin(b*c*M+g),k/=2}else k=.5*this._height*Math.sin(.5*c*M);e.pushXY(x.pt[0]-k*x.sa,x.pt[1]+k*x.ca)}}}_constructSquare(e,i){Math.round(i/this._period);let r=!0;for(;;){let n=!1;if(this._walker.curPositionIsValid()){const s=new gm;this._walker.curPointAndAngle(s);const a=new gm;if(this._walker.nextPointAndAngle(this._period,a)){const o=new gm;this._walker.nextPointAndAngle(this._period,o)&&(r?(e.pushPoint(s.pt),r=!1):e.pushPoint(s.pt),e.pushXY(s.pt[0]-this._height/2*s.sa,s.pt[1]+this._height/2*s.ca),e.pushXY(a.pt[0]-this._height/2*a.sa,a.pt[1]+this._height/2*a.ca),e.pushXY(a.pt[0]+this._height/2*a.sa,a.pt[1]-this._height/2*a.ca),e.pushXY(o.pt[0]+this._height/2*o.sa,o.pt[1]-this._height/2*o.ca),n=!0)}}if(!n){e.pushPoint(this._walker.getPathEnd());break}}}_constructTriangle(e,i){Math.round(i/this._period);let r=!0;for(;;){let n=!1;if(this._walker.curPositionIsValid()){const s=new gm;this._walker.curPointAndAngle(s);const a=new gm;if(this._walker.nextPointAndAngle(this._period/2,a)){const o=new gm;this._walker.nextPointAndAngle(this._period,o)&&(this._walker.nextPosition(this._period/2)&&(r?(e.pushPoint(s.pt),r=!1):e.pushPoint(s.pt),e.pushXY(a.pt[0]-this._height/2*a.sa,a.pt[1]+this._height/2*a.ca),e.pushXY(o.pt[0]+this._height/2*o.sa,o.pt[1]-this._height/2*o.ca)),n=!0)}}if(!n){e.pushPoint(this._walker.getPathEnd());break}}}};var mp;let Ift=(mp=class{static local(){return mp.instance===null&&(mp.instance=new mp),mp.instance}execute(e,i,r){return new Mft(e,i,r)}},mp.instance=null,mp),Mft=class extends sA{constructor(e,i,r){super(e),this._geometryWalker=new Q5,this._geometryWalker.updateTolerance(r),this._angleToLine=i.angleToLine??!0,this._offset=(i.offset?i.offset:0)*r,this._originalEndings=i.endings,this._offsetAtEnd=(i.customEndingOffset?i.customEndingOffset:0)*r,this._position=-(i.offsetAlongLine?i.offsetAlongLine:0)*r,this._pattern=new X5,this._pattern.init(i.placementTemplate,!1),this._pattern.scale(r),this._endings=this._originalEndings}processPath(e){if(this._pattern.isEmpty())return null;let i;if(this.iteratePath)i=this._pattern.nextValue();else{this._originalEndings==="WithFullGap"&&this.isClosed?this._endings="WithMarkers":this._endings=this._originalEndings,this._pattern.extPtGap=0;let n,s=!0;switch(this._endings){case"NoConstraint":n=-this._position,n=this._adjustPosition(n),s=!1;break;case"WithHalfGap":default:n=-this._pattern.lastValue()/2;break;case"WithFullGap":n=-this._pattern.lastValue(),this._pattern.extPtGap=this._pattern.lastValue();break;case"WithMarkers":n=0;break;case"Custom":n=-this._position,n=this._adjustPosition(n),this._pattern.extPtGap=.5*this._offsetAtEnd}if(!this._geometryWalker.init(e,this._pattern,s))return null;this._pattern.reset();let a=0;for(;n>a;)n-=a,a=this._pattern.nextValue();a-=n,i=a,this.iteratePath=!0}const r=new gm;return this._geometryWalker.nextPointAndAngle(i,r)?this._endings==="WithFullGap"&&this._geometryWalker.isPathEnd()?(this.iteratePath=!1,null):this._endings==="WithMarkers"&&this._geometryWalker.isPathEnd()&&(this.iteratePath=!1,this.isClosed)?null:(this.internalPlacement.setTranslate(r.pt[0]-this._offset*r.sa,r.pt[1]+this._offset*r.ca),this._angleToLine&&this.internalPlacement.setRotateCS(r.ca,r.sa),this.internalPlacement):(this.iteratePath=!1,null)}_adjustPosition(e){let i=e/this._pattern.length();return i-=Math.floor(i),i*this._pattern.length()}};var gp;let Cft=(gp=class{static local(){return gp.instance===null&&(gp.instance=new gp),gp.instance}execute(e,i,r){return new Eft(e,i,r)}},gp.instance=null,gp),Eft=class extends sA{constructor(e,i,r){super(e,!1,!0),this._curveHelper=new ug,this._placePerPart=i.placePerPart??!1,this._angleToLine=i.angleToLine===void 0||i.angleToLine,this._offset=i.offset!==void 0?i.offset*r:0,this._type=i.extremityPlacement,this._position=i.offsetAlongLine!==void 0?i.offsetAlongLine*r:0,this._beginProcessed=!1}processMultiPath(e){return this._placePerPart?super.processMultiPath(e):this.processPath(e)}processPath(e){let i;switch(this._type){case"Both":default:this._beginProcessed?(i=this._atExtremities(e,this._position,!1),this._beginProcessed=!1,this.iterateMultiPath=!1,this.iteratePath=!1):(i=this._atExtremities(e,this._position,!0),this._beginProcessed=!0,this.iterateMultiPath=!0,this.iteratePath=!0);break;case"JustBegin":i=this._atExtremities(e,this._position,!0);break;case"JustEnd":i=this._atExtremities(e,this._position,!1);case"None":}return i}_atExtremities(e,i,r){if(this._placePerPart||(r?e.seekPath(0):e.seekPath(e.totalSize-1)),r||e.seekPathEnd(),r?e.nextPoint():e.prevPoint()){let n=0,[s,a]=[0,0],[o,l]=[e.x,e.y];const c=[0,0];for(;r?e.nextPoint():e.prevPoint();){s=o,a=l,o=e.x,l=e.y;const h=this._curveHelper.getLength(s,a,o,l);if(n+h>i){const m=(i-n)/h,[g,v]=this._curveHelper.getAngleCS(c,s,a,o,l,m),b=this._curveHelper.getCoord2D(s,a,o,l,m);return this.internalPlacement.setTranslate(b[0]-this._offset*v,b[1]+this._offset*g),this._angleToLine&&this.internalPlacement.setRotateCS(-g,-v),this.internalPlacement}n+=h}}return null}};var yp;let kft=(yp=class{static local(){return yp.instance===null&&(yp.instance=new yp),yp.instance}execute(e,i,r){return new Aft(e,i,r)}},yp.instance=null,yp),Aft=class extends sA{constructor(e,i,r){super(e),this._walker=new Q5,this._walker.updateTolerance(r),this._angleToLine=i.angleToLine===void 0||i.angleToLine,this._offset=i.offset!==void 0?i.offset*r:0,this._beginGap=i.beginPosition!==void 0?i.beginPosition*r:0,this._endGap=i.endPosition!==void 0?i.endPosition*r:0,this._flipFirst=i.flipFirst===void 0||i.flipFirst,this._pattern=new X5,this._pattern.init(i.positionArray,!1,!1),this._subPathLen=0,this._posCount=this._pattern.size(),this._isFirst=!0,this._prevPos=0}processPath(e){if(this._pattern.isEmpty())return null;let i;if(this.iteratePath){const o=this._pattern.nextValue()*this._subPathLen,l=this._beginGap+o;i=l-this._prevPos,this._prevPos=l}else{if(this._posCount=this._pattern.size(),this._isFirst=!0,this._prevPos=0,this._subPathLen=e.pathLength()-this._beginGap-this._endGap,this._subPathLen<0)return this.iteratePath=!1,null;if(!this._walker.init(e,this._pattern,!1))return null;this._pattern.reset();const o=this._pattern.nextValue()*this._subPathLen,l=this._beginGap+o;i=l-this._prevPos,this._prevPos=l,this.iteratePath=!0}const r=new gm;if(!this._walker.nextPointAndAngle(i,r,1))return this.iteratePath=!1,null;this.internalPlacement.setTranslate(r.pt[0]-this._offset*r.sa,r.pt[1]+this._offset*r.ca);const n=this._isFirst&&this._flipFirst;let s,a;return this._angleToLine?(s=r.ca,a=r.sa):(s=1,a=0),n&&(s=-s,a=-a),this.internalPlacement.setRotateCS(s,a),this._isFirst=!1,this._posCount--,this._posCount===0&&(this.iteratePath=!1),this.internalPlacement}};const oy=512,Pft=10,hh=24,Dz=1e-6;var vp;let Oft=(vp=class{static local(){return vp.instance===null&&(vp.instance=new vp),vp.instance}execute(e,i,r,n){return new Lft(e,i,r,n)}},vp.instance=null,vp),Lft=class _0{constructor(e,i,r,n){if(this._xMin=0,this._xMax=0,this._yMin=0,this._yMax=0,this._currentX=0,this._currentY=0,this._accelerationMap=null,this._testInsidePolygon=!1,this._verticalSubdivision=!0,this._stepX=Math.abs(i.stepX??16)*r,this._stepY=Math.abs(i.stepY??16)*r,this._stepX=Math.round(128*this._stepX)/128,this._stepY=Math.round(128*this._stepY)/128,this._stepX!==0&&this._stepY!==0){if(this._gridType=i.gridType??"Fixed",this._gridType==="Random"){const s=i.seed??13,a=1;this._randomLCG=new $W(s*a),this._randomness=(i.randomness??100)/100,this._gridAngle=0,this._shiftOddRows=!1,this._cosAngle=1,this._sinAngle=0,this._offsetX=0,this._offsetY=0,this._buildRandomValues()}else{if(this._randomness=0,this._gridAngle=i.gridAngle??0,this._shiftOddRows=i.shiftOddRows??!1,this._offsetX=(i.offsetX??0)*r,this._offsetY=(i.offsetY??0)*r,this._cosAngle=Math.cos(this._gridAngle/180*Math.PI),this._sinAngle=-Math.sin(this._gridAngle/180*Math.PI),this._stepX)if(this._offsetX<0)for(;this._offsetX<-.5*this._stepX;)this._offsetX+=this._stepX;else for(;this._offsetX>=.5*this._stepX;)this._offsetX-=this._stepX;if(this._stepY)if(this._offsetY<0)for(;this._offsetY<-.5*this._stepY;)this._offsetY+=this._stepY;else for(;this._offsetY>=.5*this._stepY;)this._offsetY-=this._stepY}if(this._graphicOriginX=0,this._graphicOriginY=0,n!=null){const[s,a,o,l]=n.split("/"),c=parseFloat(s),h=parseFloat(a),m=parseFloat(o),g=parseFloat(l);this._graphicOriginX=-(g*2**c+m)*oy,this._graphicOriginY=h*oy,this._testInsidePolygon=!0}this._internalPlacement=new sI,this._calculateMinMax(e),this._geometryCursor=e}}next(){return this._geometryCursor?this._nextInside():null}_buildRandomValues(){if(!_0._randValues){_0._randValues=[];for(let e=0;e<hh;e++)for(let i=0;i<hh;i++)_0._randValues.push(this._randomLCG.getFloat()),_0._randValues.push(this._randomLCG.getFloat())}}_calculateMinMax(e){let i,r,n,s,a,o,l,c,h,m,g,v,b,x;this._xMin=0,this._xMax=0,this._yMin=0,this._yMax=0,l=c=b=g=Number.MAX_VALUE,h=m=x=v=-Number.MAX_VALUE;const $=this._cosAngle!==1;for(e.reset();e.nextPath();)for(;e.nextPoint();)o=e.x,a=e.y,i=o-this._graphicOriginX-this._offsetX,r=a-this._graphicOriginY-this._offsetY,$?(n=this._cosAngle*i-this._sinAngle*r,s=this._sinAngle*i+this._cosAngle*r):(n=i,s=r),l=Math.min(l,n),h=Math.max(h,n),c=Math.min(c,s),m=Math.max(m,s),g=Math.min(g,a),v=Math.max(v,a),b=Math.min(b,o),x=Math.max(x,o);g=g!==Number.MAX_VALUE?g:-oy-this._stepY,v=v!==-Number.MAX_VALUE?v:this._stepY,b=b!==Number.MAX_VALUE?b:-this._stepX,x=x!==-Number.MAX_VALUE?x:oy+this._stepX;const M=v-g,k=x-b;if(this._verticalSubdivision=M>=k,this._polygonMin=this._verticalSubdivision?g:b,this._testInsidePolygon){let A=0-this._graphicOriginX-this._offsetX-this._stepX,L=oy-this._graphicOriginX-this._offsetX+this._stepX,z=-oy-this._graphicOriginY-this._offsetY-this._stepY,U=0-this._graphicOriginY-this._offsetY+this._stepY;if($){const B=[[A,z],[A,U],[L,z],[L,U]];A=z=Number.MAX_VALUE,L=U=-Number.MAX_VALUE;for(const X of B){const J=this._cosAngle*X[0]-this._sinAngle*X[1],Q=this._sinAngle*X[0]+this._cosAngle*X[1];A=Math.min(A,J),L=Math.max(L,J),z=Math.min(z,Q),U=Math.max(U,Q)}}l=l!==Number.MAX_VALUE?Math.max(l,A):A,c=c!==Number.MAX_VALUE?Math.max(c,z):z,h=h!==-Number.MAX_VALUE?Math.min(h,L):L,m=m!==-Number.MAX_VALUE?Math.min(m,U):U}this._xMin=Math.round(l/this._stepX),this._xMax=Math.round(h/this._stepX),this._yMin=Math.round(c/this._stepY),this._yMax=Math.round(m/this._stepY),this._currentX=this._xMax+1,this._currentY=this._yMin-1,this._buildAccelerationMap(e,b,x,g,v)}_buildAccelerationMap(e,i,r,n,s){e.reset();const a=new Map,o=this._verticalSubdivision,l=o?s-n:r-i;let c=Math.ceil(l/Pft);if(c<=1)return;const h=Math.floor(l/c);let m,g,v,b,x,$,M,k,A,L,z;for(c++,this._delta=h,o?(A=-oy-2*this._stepY,L=2*this._stepY,z=n):(A=-2*this._stepX,L=oy+2*this._stepX,z=i);e.nextPath();)if(!(e.pathSize<2)&&e.nextPoint())for(m=e.x,g=e.y;e.nextPoint();m=v,g=b){if(v=e.x,b=e.y,o){if(g===b||g<A&&b<A||g>L&&b>L)continue;x=Math.min(g,b),$=Math.max(g,b)}else{if(m===v||m<A&&v<A||m>L&&v>L)continue;x=Math.min(m,v),$=Math.max(m,v)}for(;x<$;)M=Math.floor((x-z)/h),wue(M,m,g,v,b,a),x+=h;k=Math.floor(($-z)/h),k>M&&wue(k,m,g,v,b,a)}this._accelerationMap=a}_nextInside(){for(;;){if(this._currentX>this._xMax){if(this._currentY++,this._currentY>this._yMax)return null;this._currentX=this._xMin,this._shiftOddRows&&this._currentY%2&&this._currentX--}let e=this._currentX*this._stepX+this._offsetX;this._shiftOddRows&&this._currentY%2&&(e+=.5*this._stepX);const i=this._currentY*this._stepY+this._offsetY;let r,n;if(this._currentX++,this._gridType==="Random"){const s=(this._currentX%hh+hh)%hh,a=(this._currentY%hh+hh)%hh;r=this._graphicOriginX+e+this._stepX*this._randomness*(.5-_0._randValues[a*hh+s])*2/3,n=this._graphicOriginY+i+this._stepY*this._randomness*(.5-_0._randValues[a*hh+s+1])*2/3}else r=this._graphicOriginX+this._cosAngle*e+this._sinAngle*i,n=this._graphicOriginY-this._sinAngle*e+this._cosAngle*i;if(!this._testInsidePolygon||this._isInsidePolygon(r,n,this._geometryCursor))return this._internalPlacement.setTranslate(r,n),this._internalPlacement}}_isInsidePolygon(e,i,r){if(this._accelerationMap==null)return Fft(e,i,r);e+=Dz,i+=Dz;const n=this._verticalSubdivision,s=n?i:e,a=Math.floor((s-this._polygonMin)/this._delta),o=this._accelerationMap.get(a);if(!o)return!1;let l,c,h,m=0;for(const g of o){if(l=g[0],c=g[1],n){if(l[1]>i==c[1]>i)continue;h=(c[0]-l[0])*(i-l[1])-(c[1]-l[1])*(e-l[0])}else{if(l[0]>e==c[0]>e)continue;h=(c[1]-l[1])*(e-l[0])-(c[0]-l[0])*(i-l[1])}h>0?m++:m--}return m!==0}};function Fft(t,e,i){let r,n,s,a,o=0;for(t+=Dz,e+=Dz,i.reset();i.nextPath();)if(i.nextPoint())for(r=i.x,n=i.y;i.nextPoint();r=s,n=a)s=i.x,a=i.y,n>e!=a>e&&((s-r)*(e-n)-(a-n)*(t-r)>0?o++:o--);return o!==0}function wue(t,e,i,r,n,s){let a=s.get(t);a||(a=[],s.set(t,a)),a.push([[e,i],[r,n]])}const Rft=.001;var bp;let zft=(bp=class{static local(){return bp.instance===null&&(bp.instance=new bp),bp.instance}execute(e,i,r){return new Nft(e,i,r)}},bp.instance=null,bp),Nft=class extends sA{constructor(e,i,r){super(e),this._curveHelper=new ug,this._angleToLine=i.angleToLine===void 0||i.angleToLine,this._offset=i.offset!==void 0?i.offset*r:0,this._relativeTo=i.relativeTo,this._position=i.startPointOffset!==void 0?i.startPointOffset*r:0,this._epsilon=Rft*r}processPath(e){const i=this._position;if(this._relativeTo==="SegmentMidpoint"){if(this.iteratePath||(this.iteratePath=!0),e.nextPoint()){let[n,s]=[e.x,e.y],[a,o]=[0,0];const l=[0,0];for(;e.nextPoint();){a=e.x,o=e.y;const c=this._curveHelper.getLength(n,s,a,o);if(c<this._epsilon){n=a,s=o;continue}const h=.5+this._position/c,[m,g]=this._curveHelper.getAngleCS(l,n,s,a,o,h),v=this._curveHelper.getCoord2D(n,s,a,o,h);return this.internalPlacement.setTranslate(v[0]-this._offset*g,v[1]+this._offset*m),this._angleToLine&&this.internalPlacement.setRotateCS(m,g),this.internalPlacement}}return this.iteratePath=!1,null}const r=this._relativeTo==="LineEnd";return this.onLine(e,i,r)}onLine(e,i,r){let n,s=!1;switch(this._relativeTo){case"LineMiddle":default:e.seekPathStart(),n=e.pathLength()/2+i;break;case"LineBeginning":n=i;break;case"LineEnd":n=i,s=!0}r?e.seekPathEnd():e.seekPathStart();let a=0;if(r?e.prevPoint():e.nextPoint()){let[o,l]=[e.x,e.y],[c,h]=[0,0];const m=[0,0];for(;r?e.prevPoint():e.nextPoint();){c=e.x,h=e.y;const g=this._curveHelper.getLength(o,l,c,h);if(a+g>n){const v=(n-a)/g,[b,x]=this._curveHelper.getAngleCS(m,o,l,c,h,v),$=this._curveHelper.getCoord2D(o,l,c,h,v),M=s?-this._offset:this._offset;return this.internalPlacement.setTranslate($[0]-M*x,$[1]+M*b),this._angleToLine&&(s?this.internalPlacement.setRotateCS(-b,-x):this.internalPlacement.setRotateCS(b,x)),this.internalPlacement}o=c,l=h,a+=g}}return null}};const Dft=1e-15;var wp;let jft=(wp=class{static local(){return wp.instance===null&&(wp.instance=new wp),wp.instance}execute(e,i,r){return new Vft(e,i,r)}},wp.instance=null,wp),Vft=class extends sA{constructor(e,i,r){super(e),this._curveHelper=new ug,this._angleToLine=i.angleToLine===void 0||i.angleToLine,this._offset=i.offset!==void 0?i.offset*r:0,this._endPoints=i.placeOnEndPoints===void 0||i.placeOnEndPoints,this._controlPoints=i.placeOnControlPoints===void 0||i.placeOnControlPoints,this._regularVertices=i.placeOnRegularVertices===void 0||i.placeOnRegularVertices,this._tags=[],this._tagIterator=0}processPath(e){if(this.iteratePath||(this._preparePath(e),this.iteratePath=!0),this._tagIterator>=this._tags.length)return this._tags.length=0,this._tagIterator=0,this.iteratePath=!1,null;const i=this._tags[this._tagIterator];this._angleToLine&&this.internalPlacement.setRotate(i[2]);let r=i[0],n=i[1];if(this._offset!==0){const s=Math.cos(i[2]),a=Math.sin(i[2]);r-=this._offset*a,n+=this._offset*s}return this.internalPlacement.setTranslate(r,n),this._tagIterator++,this.internalPlacement}_preparePath(e){this._tags.length=0,this._tagIterator=0,e.seekPathStart();const i=e.isClosed();let r=0,n=!1,s=0,a=0;if(e.seekPathStart(),e.nextPoint()){let o=e.x,l=e.y,c=e.getControlPoint(),h=!0,m=e.nextPoint();for(;m;){const g=e.x,v=e.y,b=e.getControlPoint();(this._angleToLine||this._offset!==0)&&(s=this._curveHelper.getAngle(o,l,g,v,0)),h?(h=!1,i?(r=s,n=c):(this._endPoints||this._controlPoints&&c)&&this._tags.push([o,l,s])):c?this._controlPoints&&this._tags.push([o,l,d3(a,s)]):this._regularVertices&&this._tags.push([o,l,d3(a,s)]),(this._angleToLine||this._offset!==0)&&(a=this._curveHelper.getAngle(o,l,g,v,1)),m=e.nextPoint(),m||(i?b||n?this._controlPoints&&this._tags.push([g,v,d3(a,r)]):this._regularVertices&&this._tags.push([g,v,d3(a,r)]):(this._endPoints||this._controlPoints&&b)&&this._tags.push([g,v,a])),o=g,l=v,c=b}}this._tagIterator=0}};function d3(t,e){const i=Math.PI;for(;Math.abs(e-t)>i+2*Dft;)e-t>i?e-=2*i:e+=2*i;return(t+e)/2}const Uft=100*222045e-21;function Bft(t){if(t.totalSize===0)return null;const e=Fk(t);if(!e)return null;const i=4*(Math.abs(e[0])+Math.abs(e[2])+Math.abs(e[1])+Math.abs(e[3])+1)*Uft;let r=0,n=0;t.reset();for(let J=0;t.nextPath();J++){const Q=t.getCurrentRingArea();Q>n&&(n=Q,r=J)}if(t.seekPath(r),t.pathSize===0)return null;t.seekPathStart();const s=qme(t);if(Math.abs(n)<=2*i*i)return[(s[0]+s[2])/2,(s[1]+s[3])/2];t.seekPathStart();const a=ARe(t,ls());if(a===null)return null;if(t.totalPoints<4)return a;const o=[[NaN,NaN],[NaN,NaN],[NaN,NaN],[NaN,NaN]],l=[NaN,NaN,NaN,NaN],c=[NaN,NaN,NaN,NaN];let h=!1,m=DM(a,t,!0);m.distance===0&&(h=!0,o[0][0]=a[0],o[0][1]=a[1],m=DM(a,t,!1)),l[0]=m.distance,c[0]=0;const g=[NaN,NaN];let v=!1,b=.25,x=-1,$=NaN;do if($=NaN,o[1]=ZU(t,YU(s[0],s[2],b),i,e),isNaN(o[1][0])||isNaN(o[1][1])||(m=DM(o[1],t,!1),$=m.distance),!isNaN($)&&$>i&&$F(o[1],t))v=!0,l[1]=$,c[1]=x0(o[1],a);else if(!isNaN($)&&$>x&&(x=$,g[0]=o[1][0],g[1]=o[1][1]),b-=.01,b<.1){if(!(x>=0))break;v=!0,l[1]=x,o[1][0]=g[0],o[1][1]=g[1],c[1]=x0(o[1],a)}while(!v);v=!1,b=.5,x=-1;let M=.01,k=1;do if($=NaN,o[2]=ZU(t,YU(s[0],s[2],b),i,e),isNaN(o[2][0])||isNaN(o[2][1])||(m=DM(o[2],t,!1),$=m.distance),!isNaN($)&&$>i&&$F(o[2],t))v=!0,l[2]=$,c[2]=x0(o[2],a);else if(!isNaN($)&&$>x)x=$,g[0]=o[2][0],g[1]=o[2][1];else if($>x&&(x=$,g[0]=o[2][0],g[1]=o[2][1]),b=.5+M*k,M+=.01,k*=-1,b<.3||b>.7){if(!(x>=0))break;v=!0,l[2]=x,o[2][0]=g[0],o[2][1]=g[1],c[2]=x0(o[2],a)}while(!v);v=!1,b=.75,x=-1;do if($=NaN,o[3]=ZU(t,YU(s[0],s[2],b),i,e),isNaN(o[3][0])||isNaN(o[3][1])||(m=DM(o[3],t,!1),$=m.distance),!isNaN($)&&$>i&&$F(o[3],t))v=!0,l[3]=$,c[3]=x0(o[3],a);else if($>x&&(x=$,g[0]=o[3][0],g[1]=o[3][1]),b+=.01,b>.9){if(!(x>=0))break;v=!0,l[3]=x,o[3][0]=g[0],o[3][1]=g[1],c[3]=x0(o[3],a)}while(!v);const A=[0,1,2,3],L=h?0:1;let z;for(let J=L;J<4;J++)for(let Q=L;Q<3;Q++){const le=c[Q],ie=c[Q+1];Gft(le,ie)>0&&(z=A[Q],A[Q]=A[Q+1],A[Q+1]=z,c[Q]=ie,c[Q+1]=le)}let U=L,B=0,X=0;for(let J=L;J<4;J++){switch(J){case 0:X=2*l[A[J]];break;case 1:X=1.66666666*l[A[J]];break;case 2:X=1.33333333*l[A[J]];break;case 3:X=l[A[J]]}X>B&&(B=X,U=A[J])}return o[U]}function $F(t,e){let i,r,n,s,a=0;for(e.reset();e.nextPath()&&e.nextPoint();)for(i=e.x,r=e.y;e.nextPoint();i=n,r=s)n=e.x,s=e.y,r>t[1]!=s>t[1]&&((n-i)*(t[1]-r)-(s-r)*(t[0]-i)>0?a++:a--);return a!==0}function DM(t,e,i){if(i&&$F(t,e))return{coord:t,distance:0};let r=1/0,n=0,s=0,a=[0,0],o=[0,0];const l=[0,0];for(e.reset();e.nextPath()&&e.nextPoint();)if(!(e.pathSize<2))for(a[0]=e.x,a[1]=e.y;e.nextPoint();a=o){o=[e.x,e.y],ege(l,t,a,o);const c=x0(t,l);c<r&&(r=c,n=l[0],s=l[1])}return{coord:[n,s],distance:Math.sqrt(r)}}function ZU(t,e,i,r){const n=[e,0];let s=1/0,a=1/0,o=!1,l=!1;const c=[[e,r[1]-1],[e,r[3]+1]],h=[0,0],m=[0,0],g=[0,0],v=[[0,0],[0,0]],b=ls();for(t.reset();t.nextPath()&&t.nextPoint();)if(!(t.pathSize<2))for(v[0][0]=t.x,v[0][1]=t.y;t.nextPoint();v[0][0]=v[1][0],v[0][1]=v[1][1]){if(v[1][0]=t.x,v[1][1]=t.y,qft(b,v)===null||(m[0]=c[0][0],m[1]=c[0][1],g[0]=c[1][0],g[1]=c[1][1],Hft(b,m,g)===0)||!gR(c[0],c[1],v[0],v[1],h))continue;const x=h[1];s>a?x<s&&(s=x,o=!0):x<a&&(a=x,l=!0)}return o&&l?n[1]=(s+a)/2:n[0]=n[1]=NaN,n}function qft(t,e){if(e.length<2)return null;t||(t=ls());const[i,r]=e[0],[n,s]=e[1];return t[0]=Math.min(i,n),t[1]=Math.min(r,s),t[2]=Math.max(i,n),t[3]=Math.max(r,s),t}const h3=1,p3=4,_ue=3,xue=12;function Hft(t,e,i){let r=ph(e,t),n=ph(i,t);const s=t[0],a=t[1],o=t[2],l=t[3];if(r&n)return 0;if(!(r|n))return 4;const c=(r?1:0)|(n?2:0);do{const h=i[0]-e[0],m=i[1]-e[1];if(h>m)r&_ue?(r&h3?(e[1]+=m*(s-e[0])/h,e[0]=s):(e[1]+=m*(o-e[0])/h,e[0]=o),r=ph(e,t)):n&_ue?(n&h3?(i[1]+=m*(s-i[0])/h,i[0]=s):(i[1]+=m*(o-i[0])/h,i[0]=o),n=ph(i,t)):r?(r&p3?(e[0]+=h*(a-e[1])/m,e[1]=a):(e[0]+=h*(l-e[1])/m,e[1]=l),r=ph(e,t)):(n&p3?(i[0]+=h*(a-i[1])/m,i[1]=a):(i[0]+=h*(l-i[1])/m,i[1]=l),n=ph(i,t));else if(r&xue?(r&p3?(e[0]+=h*(a-e[1])/m,e[1]=a):(e[0]+=h*(l-e[1])/m,e[1]=l),r=ph(e,t)):n&xue?(n&p3?(i[0]+=h*(a-i[1])/m,i[1]=a):(i[0]+=h*(l-i[1])/m,i[1]=l),n=ph(i,t)):r?(r&h3?(e[1]+=m*(s-e[0])/h,e[0]=s):(e[1]+=m*(o-e[0])/h,e[0]=o),r=ph(e,t)):(n&h3?(i[1]+=m*(s-i[0])/h,i[0]=s):(i[1]+=m*(o-i[0])/h,i[0]=o),n=ph(i,t)),r&n)return 0}while(r|n);return c}function ph(t,e){return(t[0]<e[0]?1:0)|(t[0]>e[2]?1:0)<<1|(t[1]<e[1]?1:0)<<2|(t[1]>e[3]?1:0)<<3}function YU(t,e,i){return t+(e-t)*i}function x0(t,e){return(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])}function Gft(t,e){if(t<e)return-1;if(t>e)return 1;if(t===e)return 0;const i=isNaN(t),r=isNaN(e);return i<r?-1:i>r?1:0}var _p;let Wft=(_p=class{static local(){return _p.instance===null&&(_p.instance=new _p),_p.instance}execute(e,i,r){return new Zft(e,i,r)}},_p.instance=null,_p),Zft=class{constructor(e,i,r){this._geometryCursor=e,this._offsetX=i.offsetX!==void 0?i.offsetX*r:0,this._offsetY=i.offsetY!==void 0?i.offsetY*r:0,this._method=i.method!==void 0?i.method:"OnPolygon",this._placementPerPart=i.placePerPart!==void 0&&i.placePerPart,this._internalPlacement=new sI}next(){const e=this._geometryCursor;if(!e)return null;if(!this._placementPerPart)return this._geometryCursor=null,this._polygonCenter(e);for(;e.nextPath();)if(!(e.getCurrentRingArea()<0))return this._polygonCenter(e.getCurrentPath());return this._geometryCursor=null,null}_polygonCenter(e){let i=!1;switch(this._method){case"CenterOfMass":{const r=FRe(e);r&&(this._internalPlacement.setTranslate(r[0]+this._offsetX,r[1]+this._offsetY),i=!0)}break;case"BoundingBoxCenter":{const r=Fk(e);r&&(this._internalPlacement.setTranslate((r[2]+r[0])/2+this._offsetX,(r[3]+r[1])/2+this._offsetY),i=!0)}break;default:{const r=Bft(e);r!==null&&(this._internalPlacement.setTranslate(r[0]+this._offsetX,r[1]+this._offsetY),i=!0)}}return i?this._internalPlacement:null}};function Yft(t){if(!t)return null;switch(t.type){case"CIMGeometricEffectAddControlPoints":return Rpt.local();case"CIMGeometricEffectArrow":return jpt.local();case"CIMGeometricEffectBuffer":return Upt.local();case"CIMGeometricEffectControlMeasureLine":return qpt.local();case"CIMGeometricEffectCut":return Gpt.local();case"CIMGeometricEffectDashes":return Zpt.local();case"CIMGeometricEffectDonut":return Jpt.local();case"CIMGeometricEffectJog":return rft.local();case"CIMGeometricEffectMove":return sft.local();case"CIMGeometricEffectOffset":return lft.local();case"CIMGeometricEffectRadial":return dft.local();case"CIMGeometricEffectReverse":return pft.local();case"CIMGeometricEffectRotate":return gft.local();case"CIMGeometricEffectScale":return vft.local();case"CIMGeometricEffectSuppress":return wft.local();case"CIMGeometricEffectTaperedPolygon":return xft.local();case"CIMGeometricEffectWave":return Sft.local();case"CIMGeometricEffectEnclosingPolygon":return Qpt.local()}return null}function Jft(t){if(!t)return null;switch(t.type){case"CIMMarkerPlacementAlongLineSameSize":return Ift.local();case"CIMMarkerPlacementAtExtremities":return Cft.local();case"CIMMarkerPlacementAtRatioPositions":return kft.local();case"CIMMarkerPlacementInsidePolygon":return Oft.local();case"CIMMarkerPlacementOnLine":return zft.local();case"CIMMarkerPlacementOnVertices":return jft.local();case"CIMMarkerPlacementPolygonCenter":return Wft.local()}return null}function JU(t){const e=t.getFrame(0);if(e instanceof HTMLImageElement||e instanceof HTMLCanvasElement)return e;const i=document.createElement("canvas");i.width=t.width,i.height=t.height;const r=i.getContext("2d");return e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0),i}function Af(t,e=0){if(e===0)return t;const i=Math.cos(e),r=Math.sin(e),[n,s]=t;return[n*i+s*-r,n*r+s*i]}function KTe(t,e,i=0){const r=ua(t,0,Kft);for(let n=0;n<4;n++)e[i+n]=Math.floor(256*emt(r*Xft[n]))}function eIe(t,e=0){let i=0;for(let r=0;r<4;r++)i+=t[e+r]*Qft[r];return i}const Xft=[1,256,65536,16777216],Qft=[1/256,1/65536,1/16777216,1/4294967296],Kft=eIe(new Uint8ClampedArray([255,255,255,255]));eIe(new Uint8ClampedArray([255,255,255,0]));function emt(t){return t-Math.floor(t)}const tmt=15.5,XU=4,imt=64,IOt=1024,MOt={outlineWidth:.75,referenceWidth:.75,cap:Hn.CIMSolidStroke.capstyle,join:Hn.CIMSolidStroke.joinstyle,miterLimit:Hn.CIMSolidStroke.miterlimit},$ue=()=>Ie.getLogger("esri.symbols.cim.rasterizingUtils"),rmt=32,nmt=t=>t==="vertical"||t==="horizontal"||t==="cross"||t==="esriSFSCross"||t==="esriSFSVertical"||t==="esriSFSHorizontal";function COt(t,e,i){const r=e.style,n=vOe(Math.ceil(i)),s=nmt(r)?8*n:16*n,a=2*n;t.width=s,t.height=s;const o=t.getContext("2d");o.strokeStyle="#ffffff",o.lineWidth=n,o.beginPath(),r!=="vertical"&&r!=="cross"&&r!=="esriSFSCross"&&r!=="esriSFSVertical"||(o.moveTo(s/2,-a),o.lineTo(s/2,s+a)),r!=="horizontal"&&r!=="cross"&&r!=="esriSFSCross"&&r!=="esriSFSHorizontal"||(o.moveTo(-a,s/2),o.lineTo(s+a,s/2)),r!=="backward-diagonal"&&r!=="diagonal-cross"&&r!=="esriSFSDiagonalCross"&&r!=="esriSFSBackwardDiagonal"||(o.moveTo(-a,-a),o.lineTo(s+a,s+a),o.moveTo(s-a,-a),o.lineTo(s+a,a),o.moveTo(-a,s-a),o.lineTo(a,s+a)),r!=="forward-diagonal"&&r!=="diagonal-cross"&&r!=="esriSFSForwardDiagonal"&&r!=="esriSFSDiagonalCross"||(o.moveTo(s+a,-a),o.lineTo(-a,s+a),o.moveTo(a,-a),o.lineTo(-a,a),o.moveTo(s+a,s-a),o.lineTo(s-a,s+a)),o.stroke();const l=o.getImageData(0,0,t.width,t.height),c=new Uint8Array(l.data);let h;for(let m=0;m<c.length;m+=4)h=c[m+3]/255,c[m]=c[m]*h,c[m+1]=c[m+1]*h,c[m+2]=c[m+2]*h;return[c,t.width,t.height,n]}function EOt(t){t.length%2==1&&(t=[...t,...t]);const e=t.reduce((m,g)=>m+g,0),i=Math.round(e*XU),r=1,n=new Float32Array(i*r);let s=0,a=0,o=.5,l=!0;for(const m of t){for(s=a,a+=m*XU;o<=a;){const g=o-.5,v=Math.min(Math.abs(o-s),Math.abs(o-a));n[g]=l?-v:v,o++}l=!l}const c=n.length,h=new Uint8Array(4*c);for(let m=0;m<c;++m){const g=n[m]/XU;KTe(g/imt*.5+.5,h,4*m)}return[h,i,r]}function kOt(t,e){t==null&&(t=[]);const i=e==="Butt",r=e==="Square",n=!i&&!r;t.length%2==1&&(t=[...t,...t]);const s=tmt,a=2*s;let o=0;for(const M of t)o+=M;const l=Math.round(o*s),c=new Float32Array(l*a),h=.5*s;let m=0,g=0,v=.5,b=!0;for(const M of t){for(m=g,g+=M*s;v<=g;){let k=.5;for(;k<a;){const A=(k-.5)*l+v-.5,L=n?(k-s)*(k-s):Math.abs(k-s);c[A]=b?i?Math.max(Math.max(m+h-v,L),Math.max(v-g+h,L)):L:n?Math.min((v-m)*(v-m)+L,(v-g)*(v-g)+L):r?Math.min(Math.max(v-m,L),Math.max(g-v,L)):Math.min(Math.max(v-m+h,L),Math.max(g+h-v,L)),k++}v++}b=!b}const x=c.length,$=new Uint8Array(4*x);for(let M=0;M<x;++M){const k=(n?Math.sqrt(c[M]):c[M])/s;KTe(k,$,4*M)}return[$,l,a]}function AOt(t,e){const{colorRamp:i,gradientType:r}=e,n=i.type==="CIMFixedColorRamp",s=e.interval||Hn.CIMGradientFill.interval;let a=fX(i);return n&&(a=tIe(a,s)),r==="Discrete"||n?amt(t,a,s):smt(t,a)}let QU;function f3(t,e){const{colorRamp:i,gradientType:r}=e,n=fX(i),s=i.type==="CIMFixedColorRamp";if(r==="Continuous"&&!s)return SF(t,n);const a=e.interval??Hn.CIMGradientFill.interval;if(s)return SF(t,tIe(n,a));const o=[];QU??(QU=document.createElement("canvas")),mX(QU,n,a,1,0);const l=QU.getContext("2d").getImageData(0,0,a,1).data;for(let c=0,h=0;c<a;c++,h=4*c){const m=[l[h+0],l[h+1],l[h+2],l[h+3]];o.push({offset:c/a,color:m}),o.push({offset:(c+1)/a,color:m})}return SF(t,o)}function fX(t){const e=[];switch(t.type){case"CIMPolarContinuousColorRamp":case"CIMLinearContinuousColorRamp":{t.type==="CIMPolarContinuousColorRamp"&&$ue().warnOnce("CIMPolarContinuousColorRamp is currently unsupported. Falling back to CIMLinearContinuousColorRamp.");const i=t;e.push({offset:0,color:[i.fromColor[0],i.fromColor[1],i.fromColor[2],i.fromColor[3]/255]}),e.push({offset:1,color:[i.toColor[0],i.toColor[1],i.toColor[2],i.toColor[3]/255]});break}case"CIMFixedColorRamp":{const i=t,r=1/(i.colors.length-1);let n=0;for(const s of i.colors)e.push({offset:n,color:[s[0],s[1],s[2],s[3]/255]}),n+=r;break}case"CIMMultipartColorRamp":{const i=t,r=i.weights.reduce((s,a)=>s+a,0);let n=0;for(let s=0;s<i.colorRamps.length;s++){const a=i.colorRamps[s],o=i.weights[s],l=fX(a);for(const c of l)e.push({offset:(n+c.offset*o)/r,color:c.color});n+=o}break}default:$ue().error(`Color ramp "${t.type}" currently unsupported.`)}return e}function tIe(t,e){const i=[],r=(t.length-1)/(e-1);for(let n=0;n<e;n++){const s=t[Math.round(n*r)].color;i.push({offset:n/e,color:s}),i.push({offset:(n+1)/e,color:s})}return i}function smt(t,e){return mX(t,e,rmt,1,Jwe),iIe(t)}function amt(t,e,i){return mX(t,e,i,1,Jwe),iIe(t)}function SF(t,e,i=0){for(const{offset:r,color:n}of e)t.addColorStop(Math.min(Math.max(r,i),1-i),`rgba(${n[0]}, ${n[1]}, ${n[2]}, ${n[3]})`)}function mX(t,e,i,r,n){const s=i+2*n;t.width=s,t.height=r;const a=(n+1)/s,o=t.getContext("2d",{willReadFrequently:!0});if(e.length>0){const l=o.createLinearGradient(0,0,s,r);SF(l,e,a),o.fillStyle=l}else o.fillStyle="rgba(128, 128, 128, 1)";o.fillRect(0,0,s,r)}function iIe(t){const{width:e,height:i}=t,r=t.getContext("2d").getImageData(0,0,e,i),n=new Uint8Array(r.data);for(let s=0;s<n.length;s+=4){const a=n[s+3]/255;n[s]*=a,n[s+1]*=a,n[s+2]*=a}return[n,e,i]}function omt(t){var n,s,a,o;const e=((s=(n=t[0])==null?void 0:n[0])==null?void 0:s[0])??0,i=((o=(a=t[0])==null?void 0:a[0])==null?void 0:o[1])??0,r={ymin:i,xmin:e,ymax:i,xmax:e,width:0,height:0};for(let l=0;l<t.length;l++){const c=t[l];for(let h=0;h<c.length;h++){const m=c[h][0],g=c[h][1];m<r.xmin&&(r.xmin=m),m>r.xmax&&(r.xmax=m),g<r.ymin&&(r.ymin=g),g>r.ymax&&(r.ymax=g)}}return r.width=Math.abs(r.xmax-r.xmin),r.height=Math.abs(r.ymax-r.ymin),r}function jz(t,e){const i=omt(t),r=i.width===0?1:i.width,n=i.height===0?1:i.height,s=[];for(let a=0;a<t.length;a++){const o=t[a],l=[];for(let c=0;c<o.length;c++){let h=Math.round(o[c][0]-i.xmin),m=Math.round(o[c][1]-i.ymin);if(h=e.xmin+h*e.width/r,m=e.ymin+m*e.height/n,isNaN(h)||isNaN(m))throw new Error("Scaled shape has NaN values");l.push([h,m])}s.push(l)}return s}function Sue(t,e,i){const r=[];for(let n=0;n<t.length;n++){const s=t[n],a=[];for(let o=0;o<s.length;o++){const l=s[o][0]+e,c=s[o][1]+i;if(isNaN(l)||isNaN(c))throw new Error("Scaled shape has NaN values");a.push([l,c])}r.push(a)}return r}let lmt=class rIe{constructor(e=0,i=0,r=0,n=0){this.x=e,this.y=i,this.width=r,this.height=n}static fromExtent(e){return new rIe(e.xmin,-e.ymax,e.xmax-e.xmin,e.ymax-e.ymin)}get isEmpty(){return this.width<=0||this.height<=0}union(e){this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.width=Math.max(this.width,e.width),this.height=Math.max(this.height,e.height)}};function cmt(t){return`rgb(${t.slice(0,3).toString()})`}function m3(t){return`rgba(${t.slice(0,3).toString()},${t[3]})`}let nIe=class{constructor(e){e&&(this._textRasterizationCanvas=e)}rasterizeText(e,i){var re,se;this._textRasterizationCanvas||(this._textRasterizationCanvas=document.createElement("canvas"));const r=this._textRasterizationCanvas,n=r.getContext("2d",{willReadFrequently:!0});jM(n,i),this._parameters=i,this._textLines=e.split(/\r?\n/),this._lineHeight=this._computeLineHeight();const{decoration:s,weight:a}=i.font;this._lineThroughWidthOffset=s&&s==="line-through"?.1*this._lineHeight:0;const o=i.backgroundColor!=null||i.borderLine!=null,l=o?$Be:0,c=this._computeTextWidth(n,i)+2*l,h=this._lineHeight*this._textLines.length+2*l;if(r.width=c+2*this._lineThroughWidthOffset,r.height=h,r.width===0||r.height===0)return r.width=r.height=1,{size:[0,0],image:new Uint32Array(0),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0,canvas:r};this._renderedLineHeight=Math.round(this._lineHeight),this._renderedOutlineSize=(i.outline.size||0)*i.pixelRatio,this._renderedHaloSize=(i.halo.size||0)*i.pixelRatio,this._renderedWidth=c,this._renderedHeight=h,this._lineThroughWidthOffset*=i.pixelRatio;const m=(i.outline&&i.outline.color)??[0,0,0,0],g=i.color??[0,0,0,0],v=i.halo&&i.halo.color?i.halo.color:[0,0,0,0];this._fillStyle=m3(g),this._outlineStyle=m3(m),this._haloStyle=cmt(v);const b=this._renderedLineHeight,x=this._renderedOutlineSize,$=this._renderedHaloSize;n.save(),n.clearRect(0,0,r.width,r.height),jM(n,i);const M=l*i.pixelRatio,k=umt(n.textAlign,this._renderedWidth-2*M,this._renderedHaloSize+this._renderedOutlineSize)+M,A=$+x+M,L=$>0;let z=this._lineThroughWidthOffset,U=0;if(o){n.save();const Te=i.backgroundColor??[0,0,0,0],ne=((re=i.borderLine)==null?void 0:re.color)??[0,0,0,0],_e=2*(((se=i.borderLine)==null?void 0:se.size)??0);n.fillStyle=m3(Te),n.strokeStyle=m3(ne),n.lineWidth=_e,n.fillRect(0,0,r.width,r.height),n.strokeRect(0,0,r.width,r.height),n.restore()}L&&this._renderHalo(n,k,A,z,U,i),x>0&&this._renderOutline(n,k,A,z,U,i),U+=A,z+=k;for(const Te of this._textLines)L?(n.globalCompositeOperation="destination-out",n.fillStyle="rgb(0, 0, 0)",n.fillText(Te,z,U),n.globalCompositeOperation="source-over",n.fillStyle=this._fillStyle,n.fillText(Te,z,U)):(n.fillStyle=this._fillStyle,n.fillText(Te,z,U)),s&&s!=="none"&&this._renderDecoration(n,z,U,s,a),U+=b;n.restore();const B=this._renderedWidth+2*this._lineThroughWidthOffset,X=this._renderedHeight,J=n.getImageData(0,0,B,X),Q=new Uint8Array(J.data);if(i.premultiplyColors){let Te;for(let ne=0;ne<Q.length;ne+=4)Te=Q[ne+3]/255,Q[ne]=Q[ne]*Te,Q[ne+1]=Q[ne+1]*Te,Q[ne+2]=Q[ne+2]*Te}let le,ie;switch(i.horizontalAlignment){case"left":le=-.5;break;case"right":le=.5;break;default:le=0}switch(i.verticalAlignment){case"bottom":ie=-.5;break;case"top":ie=.5;break;case"baseline":ie=-1/6;break;default:ie=0}return{size:[B,X],image:new Uint32Array(Q.buffer),sdf:!1,simplePattern:!1,anchorX:le,anchorY:ie,canvas:r}}_renderHalo(e,i,r,n,s,a){const o=this._renderedWidth,l=this._renderedHeight;this._outlineRasterizationCanvas||(this._outlineRasterizationCanvas=document.createElement("canvas")),this._outlineRasterizationCanvas.width=o,this._outlineRasterizationCanvas.height=l;const c=this._outlineRasterizationCanvas,h=c.getContext("2d");h.clearRect(0,0,o,l),jM(h,a);const{decoration:m,weight:g}=a.font;h.fillStyle=this._haloStyle,h.strokeStyle=this._haloStyle,h.lineJoin="round",this._renderOutlineNative(h,i,r,m,g,this._renderedHaloSize+this._renderedOutlineSize),e.globalAlpha=this._parameters.halo.color[3],e.drawImage(c,0,0,o,l,n,s,o,l),e.globalAlpha=1}_renderOutline(e,i,r,n,s,a){const o=this._renderedWidth,l=this._renderedHeight;this._outlineRasterizationCanvas||(this._outlineRasterizationCanvas=document.createElement("canvas")),this._outlineRasterizationCanvas.width=o,this._outlineRasterizationCanvas.height=l;const c=this._outlineRasterizationCanvas,h=c.getContext("2d");h.clearRect(0,0,o,l),jM(h,a);const{decoration:m,weight:g}=a.font;h.fillStyle=this._outlineStyle,h.strokeStyle=this._outlineStyle,h.lineJoin="round",this._renderOutlineNative(h,i,r,m,g,this._renderedOutlineSize),e.globalAlpha=this._parameters.outline.color[3],e.drawImage(c,0,0,o,l,n,s,o,l),e.globalAlpha=1}_renderOutlineNative(e,i,r,n,s,a){const o=this._renderedLineHeight;for(const l of this._textLines){const c=2*a,h=5,m=.1;for(let g=0;g<h;g++){const v=(1-(h-1)*m+g*m)*c;e.lineWidth=v,e.strokeText(l,i,r),n&&n!=="none"&&this._renderDecoration(e,i,r,n,s,v)}r+=o}}computeTextSize(e,i){this._textRasterizationCanvas||(this._textRasterizationCanvas=document.createElement("canvas"));const r=this._textRasterizationCanvas,n=r.getContext("2d");jM(n,i),this._parameters=i,this._textLines=e.split(/\r?\n/),this._lineHeight=this._computeLineHeight();const s=this._computeTextWidth(n,i),a=this._lineHeight*this._textLines.length;return r.width=s,r.height=a,[s*i.pixelRatio,a*i.pixelRatio]}_computeTextWidth(e,i){let r=0;for(const s of this._textLines)r=Math.max(r,e.measureText(s).width);const n=i.font;return(n.style==="italic"||n.style==="oblique"||typeof n.weight=="string"&&(n.weight==="bold"||n.weight==="bolder")||typeof n.weight=="number"&&n.weight>600)&&(r+=.3*e.measureText("w").width),r+=2*Di(this._parameters.halo.size),Math.round(r)}_computeLineHeightBase(){return 1.275*this._parameters.size}_computeLineHeight(){let e=this._computeLineHeightBase();const i=this._parameters.font.decoration;return i&&i==="underline"&&(e*=1.3),Math.round(e+2*Di(this._parameters.halo.size))}_renderDecoration(e,i,r,n,s,a){let o=.9*this._lineHeight;const l=s==="bold"?.06:s==="bolder"?.09:.04;switch(e.textAlign){case"center":i-=this._renderedWidth/2;break;case"right":i-=this._renderedWidth}const c=e.textBaseline;if(n==="underline")switch(o=.9*this._computeLineHeightBase(),c){case"top":r+=o;break;case"middle":r+=o/2}else if(n==="line-through")switch(c){case"top":r+=o/1.5;break;case"middle":r+=o/3}const h=a?1.5*a:Math.ceil(o*l);e.save(),e.beginPath(),e.strokeStyle=e.fillStyle,e.lineWidth=h,e.moveTo(i-this._lineThroughWidthOffset,r),e.lineTo(i+this._renderedWidth+2*this._lineThroughWidthOffset,r),e.stroke(),e.restore()}};function jM(t,e){const i=Math.max(e.size,.5),r=e.font,n=`${r.style} ${r.weight} ${Di(i).toFixed(1)}px ${r.family}, sans-serif`;let s;switch(t.font=n,t.textBaseline="top",e.horizontalAlignment){case"left":default:s="left";break;case"right":s="right";break;case"center":s="center"}t.textAlign=s}function umt(t,e,i){return t==="center"?.5*e:t==="right"?e-i:i}function sIe(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function dmt(){const t=sIe("svg");return t.setAttribute("style","position: absolute;"),t.setAttribute("width","0"),t.setAttribute("height","0"),t.setAttribute("aria-hidden","true"),t.setAttribute("role","presentation"),document.body.appendChild(t),t}function hmt(t){return t!=null&&document.body.removeChild(t),null}const pmt=()=>Ie.getLogger("esri.views.2d.engine.webgl.alignmentUtils");function fmt(t){if(!t)return 0;switch(t){case"Left":case"left":return-1;case"Right":case"right":return 1;case"Justify":return pmt().warnOnce("Horizontal alignment 'justify' is not implemented. Falling back to 'center'."),0;case"Center":case"center":return 0}}function mmt(t){if(!t)return 0;switch(t){case"Top":case"top":return 1;case"Center":case"middle":return 0;case"Baseline":case"baseline":return 2;case"Bottom":case"bottom":return-1}}function OOt(t){switch(t){case"above-left":case"esriServerPointLabelPlacementAboveLeft":return["right","bottom"];case"above-center":case"above-along":case"esriServerPointLabelPlacementAboveCenter":case"esriServerLinePlacementAboveAlong":return["center","bottom"];case"above-right":case"esriServerPointLabelPlacementAboveRight":return["left","bottom"];case"center-left":case"esriServerPointLabelPlacementCenterLeft":return["right","middle"];case"center-center":case"center-along":case"esriServerPointLabelPlacementCenterCenter":case"esriServerLinePlacementCenterAlong":case"always-horizontal":case"esriServerPolygonPlacementAlwaysHorizontal":return["center","middle"];case"center-right":case"esriServerPointLabelPlacementCenterRight":return["left","middle"];case"below-left":case"esriServerPointLabelPlacementBelowLeft":return["right","top"];case"below-center":case"below-along":case"esriServerPointLabelPlacementBelowCenter":case"esriServerLinePlacementBelowAlong":return["center","top"];case"below-right":case"esriServerPointLabelPlacementBelowRight":return["left","top"];default:return console.debug(`Found invalid placement type ${t}`),["center","middle"]}}function LOt(t){switch(t){case 1:case"right":return-1;case 0:case"center":return 0;case-1:case"left":return 1;default:return console.debug(`Found invalid horizontal alignment ${t}`),0}}function FOt(t){switch(t){case 1:case"top":return 1;case 0:case"middle":return 0;case-1:case 2:case"baseline":case"bottom":return-1;default:return console.debug(`Found invalid vertical alignment ${t}`),0}}let gmt=class{constructor(e=0,i=0,r=0,n=0){this.x=e,this.y=i,this.width=r,this.height=n}get isEmpty(){return this.width<=0||this.height<=0}union(e){this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.width=Math.max(this.width,e.width),this.height=Math.max(this.height,e.height)}},YC=class MG{constructor(e,i,r,n){this.transformedX=0,this.transformedY=0,this.center=l_(e,i),this.centerT=ME(),this.halfWidth=r/2,this.halfHeight=n/2,this.width=r,this.height=n}get x(){return this.center[0]}get y(){return this.center[1]}get blX(){return this.center[0]+this.halfWidth}get blY(){return this.center[1]+this.halfHeight}get trX(){return this.center[0]-this.halfWidth}get trY(){return this.center[1]-this.halfHeight}get xmin(){return this.x-this.halfWidth}get xmax(){return this.x+this.halfWidth}get ymin(){return this.y-this.halfHeight}get ymax(){return this.y+this.halfHeight}set x(e){this.center[0]=e}set y(e){this.center[1]=e}clone(){return new MG(this.x,this.y,this.width,this.height)}serialize(e){return e.writeF32(this.center[0]),e.writeF32(this.center[1]),e.push(this.width),e.push(this.height),e}findCollisionDelta(e,i=4){const r=Math.abs(e.centerT[0]-this.centerT[0]),n=Math.abs(e.centerT[1]-this.centerT[1]),s=(e.halfWidth+this.halfWidth+i)/r,a=(e.halfHeight+this.halfHeight+i)/n,o=Math.min(s,a);return Math.log2(o)}extend(e){const i=Math.min(this.xmin,e.xmin),r=Math.min(this.ymin,e.ymin),n=Math.max(this.xmax,e.xmax)-i,s=Math.max(this.ymax,e.ymax)-r,a=i+n/2,o=r+s/2;this.width=n,this.height=s,this.halfWidth=n/2,this.halfHeight=s/2,this.x=a,this.y=o}static deserialize(e){const i=e.readF32(),r=e.readF32(),n=e.readInt32(),s=e.readInt32();return new MG(i,r,n,s)}};const gX=22,aIe=4,ymt=gX+aIe,vmt=gX-6,Tue=3,bmt=Math.PI/180,ly=8,wmt=1.5;let oIe=class{constructor(e,i,r,n){this._rotationT=Um(),this._xBounds=0,this._yBounds=0,this.minZoom=0,this.maxZoom=255,this._bounds=null;const s=r.rect,a=new Float32Array(8);e*=n,i*=n;const o=r.code?s.width*n:r.metrics.width,l=r.code?s.height*n:r.metrics.height;this.width=o,this.height=l,a[0]=e,a[1]=i,a[2]=e+o,a[3]=i,a[4]=e,a[5]=i+l,a[6]=e+o,a[7]=i+l,this._data=a,this._setTextureCoords(s),this._scale=n,this._mosaic=r,this.x=e,this.y=i,this.maxOffset=Math.max(e+o,i+l)}get mosaic(){return this._mosaic}set angle(e){this._angle=e,o5(this._rotationT,-e),this._setOffsets()}get angle(){return this._angle}get xTopLeft(){return this._data[0]}get yTopLeft(){return this._data[1]}get xBottomRight(){return this._data[6]}get yBottomRight(){return this._data[7]}get texcoords(){return this._texcoords}get textureBinding(){return this._mosaic.textureBinding}get offsets(){return this._offsets||this._setOffsets(),this._offsets}get char(){return String.fromCharCode(this._mosaic.code)}get code(){return this._mosaic.code}get bounds(){if(!this._bounds){const{height:e,width:i}=this._mosaic.metrics,r=i*this._scale,n=Math.abs(e)*this._scale,s=new Float32Array(8);s[0]=this.x,s[1]=this.y,s[2]=this.x+r,s[3]=this.y,s[4]=this.x,s[5]=this.y+n,s[6]=this.x+r,s[7]=this.y+n;const a=Gh(Um(),this._rotationT,this._transform);ywe(s,s,a);let o=1/0,l=1/0,c=-1/0,h=-1/0;for(let x=0;x<4;x++){const $=s[2*x],M=s[2*x+1];o=Math.min(o,$),l=Math.min(l,M),c=Math.max(c,$),h=Math.max(h,M)}const m=c-o,g=h-l,v=o+m/2,b=l+g/2;this._bounds=new YC(v,b,m,g)}return this._bounds}setTransform(e){this._transform=e,this._offsets=null}_setOffsets(){this._offsets||(this._offsets={topLeft:[0,0],topRight:[0,0],bottomLeft:[0,0],bottomRight:[0,0]});const e=Gh(Um(),this._rotationT,this._transform);this._offsets.topLeft[0]=this._data[0],this._offsets.topLeft[1]=this._data[1],this._offsets.topRight[0]=this._data[2],this._offsets.topRight[1]=this._data[3],this._offsets.bottomLeft[0]=this._data[4],this._offsets.bottomLeft[1]=this._data[5],this._offsets.bottomRight[0]=this._data[6],this._offsets.bottomRight[1]=this._data[7],ro(this._offsets.topLeft,this._offsets.topLeft,e),ro(this._offsets.topRight,this._offsets.topRight,e),ro(this._offsets.bottomLeft,this._offsets.bottomLeft,e),ro(this._offsets.bottomRight,this._offsets.bottomRight,e)}_setTextureCoords({x:e,y:i,width:r,height:n}){this._texcoords={topLeft:[e,i],topRight:[e+r,i],bottomLeft:[e,i+n],bottomRight:[e+r,i+n]}}};const _mt=(t,e)=>({code:0,page:0,sdf:!0,rect:new gmt(0,0,11,8),textureBinding:e,metrics:{advance:0,height:4,width:t,left:0,top:0}});function VM(t,e){return t.forEach(i=>ro(i,i,e)),{topLeft:t[0],topRight:t[1],bottomLeft:t[2],bottomRight:t[3]}}let xmt=class{constructor(e,i,r){this._rotation=0,this._decorate(e,i,r),this.glyphs=e,this.bounds=this._createBounds(e),this.isMultiline=i.length>1,this._hasRotation=r.angle!==0,this._transform=this._createGlyphTransform(this.bounds,r),this._borderLineSizePx=r.borderLineSizePx,(r.borderLineSizePx||r.hasBackground)&&([this.bounds,this.textBox]=this.shapeBackground(this._transform));for(const n of e)n.setTransform(this._transform)}setRotation(e){if(e===0&&this._rotation===0)return;this._rotation=e;const i=this._transform,r=o5(Um(),e);Gh(i,r,i);for(const n of this.glyphs)n.setTransform(this._transform)}_decorate(e,i,r){if(!r.decoration||r.decoration==="none"||!e.length)return;const n=r.scale,s=r.decoration==="underline"?ymt:vmt,a=e[0].textureBinding;for(const o of i){const l=o.startX*n,c=o.startY*n,h=(o.width+o.glyphWidthEnd)*n;e.push(new oIe(l,c+s*n,_mt(h,a),1))}}shapeBackground(e){const i=this._borderLineSizePx||0,r=(wmt+i)/2,n=this._borderLineSizePx?r:0,{xmin:s,ymin:a,xmax:o,ymax:l,x:c,y:h,width:m,height:g}=this.bounds,v=[s-ly,a-ly],b=[o+ly,a-ly],x=[s-ly,l+ly],$=[o+ly,l+ly],M=VM([[v[0]-r,v[1]-r],[b[0]+r,b[1]-r],[v[0]+n,v[1]+n],[b[0]-n,b[1]+n]],e),k=VM([[x[0]+n,x[1]-n],[$[0]-n,$[1]-n],[x[0]-r,x[1]+r],[$[0]+r,$[1]+r]],e),A=VM([[v[0]-r,v[1]-r],[v[0]+n,v[1]+n],[x[0]-r,x[1]+r],[x[0]+n,x[1]-n]],e),L=VM([[b[0]-n,b[1]+n],[b[0]+r,b[1]-r],[$[0]-n,$[1]-n],[$[0]+r,$[1]+r]],e),z={main:VM([v,b,x,$],e),top:M,bot:k,left:A,right:L};return[new YC(c,h,m+2*r,g+2*r),z]}get boundsT(){const e=this.bounds,i=Vn(ME(),e.x,e.y);if(ro(i,i,this._transform),this._hasRotation){const r=Math.max(e.width,e.height);return new YC(i[0],i[1],r,r)}return new YC(i[0],i[1],e.width,e.height)}_createBounds(e){let i=1/0,r=1/0,n=0,s=0;for(const l of e)i=Math.min(i,l.xTopLeft),r=Math.min(r,l.yTopLeft),n=Math.max(n,l.xBottomRight),s=Math.max(s,l.yBottomRight);const a=n-i,o=s-r;return new YC(i+a/2,r+o/2,a,o)}_createGlyphTransform(e,i){const r=bmt*i.angle,n=Um(),s=ME();return Ep(n,n,Vn(s,i.xOffset,-i.yOffset)),i.useCIMAngleBehavior?Rv(n,n,r):(Ep(n,n,Vn(s,e.x,e.y)),Rv(n,n,r),Ep(n,n,Vn(s,-e.x,-e.y))),n}},g3=class{constructor(e,i,r,n,s,a){this.glyphWidthEnd=0,this.startX=0,this.startY=0,this.start=Math.max(0,Math.min(i,r)),this.end=Math.max(0,Math.max(i,r)),this.end<e.length&&(this.glyphWidthEnd=e[this.end].metrics.width),this.width=n,this.yMin=s,this.yMax=a}};const CG=t=>t===10,Iue=t=>t===32;function $mt(t,e,i){const r=new Array,n=1/i.scale,s=i.maxLineWidth*n,a=e?t.length-1:0,o=e?-1:t.length,l=e?-1:1;let c=a,h=0,m=0,g=c,v=g,b=0,x=1/0,$=0;for(;c!==o;){const{code:k,metrics:A}=t[c],L=Math.abs(A.top);if(CG(k)||Iue(k)||(x=Math.min(x,L),$=Math.max($,L+A.height)),CG(k))c!==a&&(r.push(new g3(t,g,c-l,h,x===1/0?0:x,$)),x=1/0,$=0),h=0,g=c+l,v=c+l,m=0;else if(Iue(k))v=c+l,m=0,b=A.advance,h+=A.advance;else if(h>s){if(v!==g){const z=v-2*l;h-=b,r.push(new g3(t,g,z,h-m,x,$)),x=1/0,$=0,g=v,h=m}else r.push(new g3(t,g,c-l,h,x,$)),x=1/0,$=0,g=c,v=c,h=0;h+=A.advance,m+=A.advance}else h+=A.advance,m+=A.advance;c+=l}const M=new g3(t,g,c-l,h,x,$);return M.start>=0&&M.end<t.length&&r.push(M),r}function Smt(t,e){let i=0;for(let s=0;s<t.length;s++){const{width:a}=t[s];i=Math.max(a,i)}const r=e.decoration==="underline"?aIe:0,n=t[0].yMin;return{x:0,y:n,height:t[t.length-1].yMax+e.lineHeight*(t.length-1)+r-n,width:i}}function lIe(t,e){const i=e.scale,r=new Array,{glyphs:n,isRightToLeft:s}=t,a=$mt(n,s,e),o=a.length?Smt(a,e):{y:0,height:0},l=fmt(e.horizontalAlignment),c=mmt(e.verticalAlignment),h=c===2?1:0,m=h?0:c-1,g=(1-h)*-o.y+m*(o.height/2)+(h?1:0)*-gX;for(let v=0;v<a.length;v++){const{start:b,end:x,width:$}=a[v];let M=-1*(l+1)*($/2)-Tue;const k=(t.isRightToLeft?a.length-1-v:v)*e.lineHeight+g-Tue;a[v].startX=M,a[v].startY=k;for(let A=b;A<=x;A++){const L=n[A];if(CG(L.code))continue;const z=new oIe(M+L.metrics.left,k-L.metrics.top,L,i);M+=L.metrics.advance,r.push(z)}}return new xmt(r,a,e)}const jOt=50;function VOt(t){if(!t)return null;const{xmin:e,ymin:i,xmax:r,ymax:n,spatialReference:s}=t;return new Nr({rings:[[[e,i],[e,n],[r,n],[r,i],[e,i]]],spatialReference:s})}function cIe(t){return Qi(Math.round(Di(t)))}function uIe(t){const e=Qi(HHe),i=Qi(GHe);return Math.max(e,Math.min(t||i,i))}const F0=Math.PI/180,dIe=.5,JC=()=>Ie.getLogger("esri.symbols.cim.CIMSymbolDrawHelper");class sa{constructor(e){this._t=e}static createIdentity(){return new sa([1,0,0,0,1,0])}clone(){const e=this._t;return new sa(e.slice())}transform(e){const i=this._t;return[i[0]*e[0]+i[1]*e[1]+i[2],i[3]*e[0]+i[4]*e[1]+i[5]]}static createScale(e,i){return new sa([e,0,0,0,i,0])}scale(e,i){const r=this._t;return r[0]*=e,r[1]*=e,r[2]*=e,r[3]*=i,r[4]*=i,r[5]*=i,this}scaleRatio(){return Math.sqrt(this._t[0]*this._t[0]+this._t[1]*this._t[1])}static createTranslate(e,i){return new sa([0,0,e,0,0,i])}translate(e,i){const r=this._t;return r[2]+=e,r[5]+=i,this}static createRotate(e){const i=Math.cos(e),r=Math.sin(e);return new sa([i,-r,0,r,i,0])}rotate(e){return sa.multiply(this,sa.createRotate(e),this)}angle(){const e=this._t[0],i=this._t[3],r=Math.sqrt(e*e+i*i);return[e/r,i/r]}static multiply(e,i,r){const n=e._t,s=i._t,a=n[0]*s[0]+n[3]*s[1],o=n[1]*s[0]+n[4]*s[1],l=n[2]*s[0]+n[5]*s[1]+s[2],c=n[0]*s[3]+n[3]*s[4],h=n[1]*s[3]+n[4]*s[4],m=n[2]*s[3]+n[5]*s[4]+s[5],g=r._t;return g[0]=a,g[1]=o,g[2]=l,g[3]=c,g[4]=h,g[5]=m,r}invert(){const e=this._t;let i=e[0]*e[4]-e[1]*e[3];if(i===0)return new sa([0,0,0,0,0,0]);i=1/i;const r=(e[1]*e[5]-e[2]*e[4])*i,n=(e[2]*e[3]-e[0]*e[5])*i,s=e[4]*i,a=-e[1]*i,o=-e[3]*i,l=e[0]*i;return new sa([s,a,r,o,l,n])}}class yX{constructor(e,i){this._resourceManager=e,this._transfos=[],this._sizeTransfos=[],this._geomUnitsPerPoint=1,this._placementPool=new Vv(()=>new sI,void 0,void 0,100),this._earlyReturn=!1,this._mapRotation=0,this._transfos.push(i||sa.createIdentity()),this._sizeTransfos.push(i?i.scaleRatio():1)}setTransform(e,i){this._transfos=[e||sa.createIdentity()],this._sizeTransfos=[i||(e?e.scaleRatio():1)]}setGeomUnitsPerPoint(e){this._geomUnitsPerPoint=e}transformPt(e){return this._transfos[this._transfos.length-1].transform(e)}transformSize(e){return e*this._sizeTransfos[this._sizeTransfos.length-1]}reverseTransformPt(e){return this._transfos[this._transfos.length-1].invert().transform(e)}reverseTransformSize(e){return e/this._sizeTransfos[this._sizeTransfos.length-1]}reverseTransformScalar(e){return e/this._transfos[this._transfos.length-1].scaleRatio()}getTransformAngle(){return this._transfos[this._transfos.length-1].angle()}geomUnitsPerPoint(){return this.isEmbedded()?1:this._geomUnitsPerPoint}prevGeomUnitsPerPoint(){return this._transfos.length>2?1:this._geomUnitsPerPoint}isEmbedded(){return this._transfos.length>1}back(){return this._transfos[this._transfos.length-1]}push(e,i){const r=i?e.scaleRatio():1;sa.multiply(e,this.back(),e),this._transfos.push(e),this._sizeTransfos.push(this._sizeTransfos[this._sizeTransfos.length-1]*r)}pop(){this._transfos.splice(-1,1),this._sizeTransfos.splice(-1,1)}drawSymbol(e,i,r){if(e)switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":this.drawMultiLayerSymbol(e,i);break;case"CIMTextSymbol":this.drawTextSymbol(e,i,r)}}drawMultiLayerSymbol(e,i){if(!e||!i)return;const r=e.symbolLayers;if(!r)return;const n=e.effects;if(n&&n.length>0){const s=this.executeEffects(n,i);if(s){let a=s.next();for(;a;)this.drawSymbolLayers(r,a.asJSON()),a=s.next()}}else this.drawSymbolLayers(r,i)}executeEffects(e,i){let r=new Ept(Ki.fromJSONCIM(i));for(const n of e){const s=Yft(n);s&&(r=s.execute(r,n,this.geomUnitsPerPoint(),null))}return r}drawSymbolLayers(e,i){let r=e.length;for(;r--;){const n=e[r];if(!n||n.enable===!1)continue;const s=n.effects;if(s&&s.length>0){const a=this.executeEffects(s,i);if(a){let o=null;for(;(o=a.next())&&(this.drawSymbolLayer(n,o.asJSON()),!this._earlyReturn););}}else this.drawSymbolLayer(n,i);if(this._earlyReturn)return}}drawSymbolLayer(e,i){switch(e.type){case"CIMSolidFill":this.drawSolidFill(i,e.color,e.path);break;case"CIMHatchFill":this.drawHatchFill(i,e);break;case"CIMPictureFill":this.drawPictureFill(i,e);break;case"CIMGradientFill":this.drawGradientFill(i,e);break;case"CIMSolidStroke":this.drawSolidStroke(i,e.color,e.width,e.capStyle,e.joinStyle,e.miterLimit,e.path);break;case"CIMPictureStroke":this.drawPictureStroke(i,e);break;case"CIMGradientStroke":this.drawGradientStroke(i,e);break;case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":this.drawMarkerLayer(e,i)}}drawHatchFill(e,i){const r=Imt(i,e,this.geomUnitsPerPoint());r&&(this.pushClipPath(e),this.drawMultiLayerSymbol(i.lineSymbol,r),this.popClipPath())}drawPictureFill(e,i){}drawGradientFill(e,i){}drawPictureStroke(e,i){}drawGradientStroke(e,i){}drawMarkerLayer(e,i){const r=e.markerPlacement;if(r){const n=Jft(r);if(n){const s=r.type==="CIMMarkerPlacementInsidePolygon"||r.type==="CIMMarkerPlacementPolygonCenter"&&r.clipAtBoundary;s&&this.pushClipPath(i);const a=n.execute(Ki.fromJSONCIM(i),r,this.geomUnitsPerPoint(),null);if(a){let o=null;for(;(o=a.next())&&(this.drawMarker(e,o),!this._earlyReturn););}s&&this.popClipPath()}}else{const n=this._placementPool.acquire();if(wE(i))n.tx=i.x,n.ty=i.y,this.drawMarker(e,n);else if(Un(i)){const s=nge(i);s&&([n.tx,n.ty]=s,this.drawMarker(e,n))}else if(La(i)){for(const s of i.paths)for(const a of s)if(n.tx=a[0],n.ty=a[1],this.drawMarker(e,n),this._earlyReturn)break}else for(const s of i.points)if(n.tx=s[0],n.ty=s[1],this.drawMarker(e,n),this._earlyReturn)break;this._placementPool.release(n)}}drawMarker(e,i){switch(e.type){case"CIMCharacterMarker":case"CIMPictureMarker":this.drawPictureMarker(e,i);break;case"CIMVectorMarker":this.drawVectorMarker(e,i)}}drawPictureMarker(e,i){if(!e)return;const r=this._resourceManager.getResource(e.url),n=Dt(e.size,Hn.CIMPictureMarker.size);if(r==null||n<=0)return;const s=r.width,a=r.height;if(!s||!a)return;const o=s/a,l=Dt(e.scaleX,1),c=sa.createIdentity(),h=e.anchorPoint;if(h){let $=h.x,M=h.y;e.anchorPointUnits!=="Absolute"&&($*=n*o*l,M*=n),c.translate(-$,-M)}let m=Dt(e.rotation);e.rotateClockwise&&(m=-m),this._mapRotation&&(m+=this._mapRotation),m&&c.rotate(m*F0);let g=Dt(e.offsetX),v=Dt(e.offsetY);if(g||v){if(this._mapRotation){const $=F0*this._mapRotation,M=Math.cos($),k=Math.sin($),A=g*k+v*M;g=g*M-v*k,v=A}c.translate(g,v)}const b=this.geomUnitsPerPoint();b!==1&&c.scale(b,b);const x=i.getAngle();x&&c.rotate(x),c.translate(i.tx,i.ty),this.push(c,!1),this.drawImage(e,n),this.pop()}drawVectorMarker(e,i){if(!e)return;const r=e.markerGraphics;if(!r)return;const n=Dt(e.size,Hn.CIMVectorMarker.size),s=e.frame,a=s?s.ymax-s.ymin:0,o=n&&a?n/a:1,l=sa.createIdentity();s&&l.translate(.5*-(s.xmax+s.xmin),.5*-(s.ymax+s.ymin));const c=e.anchorPoint;if(c){let x=c.x,$=c.y;e.anchorPointUnits!=="Absolute"?s&&(x*=s.xmax-s.xmin,$*=s.ymax-s.ymin):(x/=o,$/=o),l.translate(-x,-$)}o!==1&&l.scale(o,o);let h=Dt(e.rotation);e.rotateClockwise&&(h=-h),this._mapRotation&&(h+=this._mapRotation),h&&l.rotate(h*F0);let m=Dt(e.offsetX),g=Dt(e.offsetY);if(m||g){if(this._mapRotation){const x=F0*this._mapRotation,$=Math.cos(x),M=Math.sin(x),k=m*M+g*$;m=m*$-g*M,g=k}l.translate(m,g)}const v=this.geomUnitsPerPoint();v!==1&&l.scale(v,v);const b=i.getAngle();b&&l.rotate(b),l.translate(i.tx,i.ty),this.push(l,e.scaleSymbolsProportionally);for(const x of r){x!=null&&x.symbol&&x.geometry||JC().error("Invalid marker graphic",x);let $=x.textString;if(typeof $=="number"&&($=$.toString()),this.drawSymbol(x.symbol,x.geometry,$),this._earlyReturn)break}this.pop()}drawTextSymbol(e,i,r){if(!e||!wE(i)||Dt(e.height,Hn.CIMTextSymbol.height)<=0)return;const n=sa.createIdentity();let s=Dt(e.angle);s=-s,s&&n.rotate(s*F0);const a=Dt(e.offsetX),o=Dt(e.offsetY);(a||o)&&n.translate(a,o);const l=this.geomUnitsPerPoint();l!==1&&n.scale(l,l),n.translate(i.x,i.y),this.push(n,!1),this.drawText(e,r),this.pop()}}class Tmt extends yX{constructor(e,i){super(e,i),this.reset()}reset(){this._xmin=this._ymin=1/0,this._xmax=this._ymax=-1/0,this._clipCount=0}envelope(){return new lmt(this._xmin,this._ymin,this._xmax-this._xmin,this._ymax-this._ymin)}bounds(){return vme(this._xmin,this._ymin,this._xmax,this._ymax)}drawSolidFill(e){if(e&&!(this._clipCount>0))if(Un(e))this._processPath(e.rings,0);else if(La(e))this._processPath(e.paths,0);else if(Ro(e)){const i=ym(e);i&&this._processPath(i.rings,0)}else console.error("drawSolidFill Unexpected geometry type!")}drawSolidStroke(e,i,r){if(!e||this._clipCount>0||r==null||r<=0)return;const n=Math.max(.5*this.transformSize(Dt(r,Hn.CIMSolidStroke.width)),.5*dIe);if(Un(e))this._processPath(e.rings,n);else if(La(e))this._processPath(e.paths,n);else if(Ro(e)){const s=ym(e);s&&this._processPath(s.rings,n)}else console.error("drawSolidStroke unexpected geometry type!")}drawMarkerLayer(e,i){Un(i)&&e.markerPlacement&&(e.markerPlacement.type==="CIMMarkerPlacementInsidePolygon"||e.markerPlacement.type==="CIMMarkerPlacementPolygonCenter"&&e.markerPlacement.clipAtBoundary)?this._processPath(i.rings,0):super.drawMarkerLayer(e,i)}drawHatchFill(e,i){this.drawSolidFill(e)}drawPictureFill(e,i){this.drawSolidFill(e)}drawGradientFill(e,i){this.drawSolidFill(e)}drawPictureStroke(e,i){this.drawSolidStroke(e,null,i.width)}drawGradientStroke(e,i){this.drawSolidStroke(e,null,i.width)}pushClipPath(e){this.drawSolidFill(e),this._clipCount++}popClipPath(){this._clipCount--}drawImage(e,i){const{url:r}=e,n=Dt(e.scaleX,1);let s=n*i,a=i;const o=this._resourceManager.getResource(r);if(o!=null){const l=o.height/o.width;s=n*(i?l>1?i:i/l:o.width),a=i?l>1?i*l:i:o.height}this._merge(this.transformPt([-s/2,-a/2]),0),this._merge(this.transformPt([-s/2,a/2]),0),this._merge(this.transformPt([s/2,-a/2]),0),this._merge(this.transformPt([s/2,a/2]),0)}drawText(e,i){if(!i||i.length===0)return;this._textRasterizer||(this._textRasterizer=new nIe);const r=fIe(e);let[n,s]=this._textRasterizer.computeTextSize(i,r);n=Qi(n),s=Qi(s);const a=this.transformSize(1)*this.reverseTransformScalar(1);n*=a,s*=a;let o=0;switch(e.horizontalAlignment){case"Left":o=n/2;break;case"Right":o=-n/2}let l=0;switch(e.verticalAlignment){case"Bottom":l=s/2;break;case"Top":l=-s/2;break;case"Baseline":l=s/6}this._merge(this.transformPt([-n/2+o,-s/2+l]),0),this._merge(this.transformPt([-n/2+o,s/2+l]),0),this._merge(this.transformPt([n/2+o,-s/2+l]),0),this._merge(this.transformPt([n/2+o,s/2+l]),0)}_processPath(e,i){if(e)for(const r of e){const n=r?r.length:0;if(n>1){this._merge(this.transformPt(r[0]),i);for(let s=1;s<n;s++)this._merge(this.transformPt(r[s]),i)}}}_merge(e,i){e[0]-i<this._xmin&&(this._xmin=e[0]-i),e[0]+i>this._xmax&&(this._xmax=e[0]+i),e[1]-i<this._ymin&&(this._ymin=e[1]-i),e[1]+i>this._ymax&&(this._ymax=e[1]+i)}}class UOt extends yX{constructor(){super(...arguments),this._searchPoint=[0,0],this._searchDistPoint=0,this._textInfo=null,this._svg=null,this._path=null,this._canvas=null}destroy(){this._svg=hmt(this._svg),this._path=null,this._canvas=null}hitTest(e,i,r,n,s,a){var c;const o=a*Di(1);this.setTransform(),this.setGeomUnitsPerPoint(o),this._searchPoint=[(e[0]+e[2])/2,(e[1]+e[3])/2],this._searchDistPoint=(e[2]-e[0])/2/o,this._textInfo=n;const l=i&&(i.type==="CIMPointSymbol"&&i.angleAlignment!=="Map"||i.type==="CIMTextSymbol");if(this._mapRotation=l?s:0,!ve("esri-mobile")){const h=Qi(jHe*window.devicePixelRatio),m=Qi(VHe);!(((i==null?void 0:i.type)==="CIMLineSymbol"||(i==null?void 0:i.type)==="CIMPolygonSymbol")&&((c=i.symbolLayers)!=null&&c.some(mKe)))&&(i==null?void 0:i.type)!=="CIMMeshSymbol"&&(IKe(i)??0)<m&&(this._searchDistPoint=h)}return this._earlyReturn=!1,this.drawSymbol(i,r),this._earlyReturn}executeEffects(e,i){var r;return((r=e.at(-1))==null?void 0:r.type)==="CIMGeometricEffectDashes"&&(e=e.slice(0,-1)),super.executeEffects(e,i)}drawSolidFill(e,i,r){r!=null?this._hittestSvgPath(e,r,!0):this._hitTestFill(e)}drawHatchFill(e,i){this._hitTestFill(e)}drawPictureFill(e,i){this._hitTestFill(e)}drawGradientFill(e,i){this._hitTestFill(e)}drawSolidStroke(e,i,r,n,s,a,o){o!=null?this._hittestSvgPath(e,o,!1,r):this._hitTestStroke(e,r)}drawPictureStroke(e,i){this._hitTestStroke(e,i.width)}drawGradientStroke(e,i){this._hitTestStroke(e,i.width)}drawMarkerLayer(e,i){e.markerPlacement&&(e.markerPlacement.type==="CIMMarkerPlacementInsidePolygon"||e.markerPlacement.type==="CIMMarkerPlacementPolygonCenter"&&e.markerPlacement.clipAtBoundary)?this._hitTestFill(i):super.drawMarkerLayer(e,i)}pushClipPath(e){}popClipPath(){}drawImage(e,i){const{url:r}=e,n=Dt(e.scaleX,1),s=this._resourceManager.getResource(r);if(s==null||s.height===0||i===0)return;const a=i*this.geomUnitsPerPoint(),o=a*n*(s.width/s.height),l=this.reverseTransformPt(this._searchPoint),c=this._searchDistPoint;Math.abs(l[0])<o/2+c&&Math.abs(l[1])<a/2+c&&(this._earlyReturn=!0)}drawText(e,i){var b;const r=this._textInfo;if(!r)return;const n=r.get(e);if(!n||!n.glyphMosaicItems.glyphs.length)return;const s=cIe(Dt(e.height,Hn.CIMTextSymbol.height)),{lineGapType:a,lineGap:o}=e,l=a?pIe(a,Dt(o),s):0,c=((b=e.callout)==null?void 0:b.type)==="CIMBackgroundCallout",h=lIe(n.glyphMosaicItems,{scale:s/Zwe,angle:0,xOffset:0,yOffset:0,horizontalAlignment:e.horizontalAlignment,verticalAlignment:e.verticalAlignment,maxLineWidth:uIe(e.lineWidth),lineHeight:Wwe*Math.max(.25,Math.min(l||1,4)),decoration:e.font.decoration||"none",useCIMAngleBehavior:!0,hasBackground:c}),m=this.reverseTransformPt(this._searchPoint),g=m[0],v=m[1];for(const x of h.glyphs)if(g>x.xTopLeft&&g<x.xBottomRight&&v>-x.yBottomRight&&v<-x.yTopLeft){this._earlyReturn=!0;break}}_hitTestFill(e){let i=null;if(Ro(e)){const n=e;i=[[[n.xmin,n.ymin],[n.xmin,n.ymax],[n.xmax,n.ymax],[n.xmax,n.ymin],[n.xmin,n.ymin]]]}else if(Un(e))i=e.rings;else{if(!La(e))return;i=e.paths}const r=this.reverseTransformPt(this._searchPoint);Mmt(r,i)&&(this._earlyReturn=!0),!this._earlyReturn&&Mue(r,i,this.reverseTransformScalar(this._searchDistPoint)*this.prevGeomUnitsPerPoint())&&(this._earlyReturn=!0)}_getSvgPath(){return this._svg!=null&&this._path!=null||(this._svg??(this._svg=dmt()),this._path??(this._path=sIe("path")),this._svg.appendChild(this._path)),this._path}_getCanvasContext(e,i){return this._canvas??(this._canvas=document.createElement("canvas")),this._canvas.width=e,this._canvas.height=i,this._canvas.getContext("2d",{willReadFrequently:!0})}_hittestSvgPath(e,i,r,n=0){const s=this.reverseTransformScalar(this._searchDistPoint)*this.prevGeomUnitsPerPoint(),a=this.reverseTransformPt(this._searchPoint),o=ls();SZ(o,e);const l={x:o[0],y:o[1],width:o[2]-o[0],height:o[3]-o[1]},c=this._getSvgPath();c.setAttribute("d",i);const h=c.getBBox();let m=Math.max(h.width/l.width,h.height/l.height),g=1;const v=2*s*m;v<1&&(g=2/v,m*=g,h.x*=g,h.y*=g,h.width*=g,h.height*=g);const b=1+n*m/2,x=this._getCanvasContext(h.width+2*b,h.height+2*b);x.setTransform(g,0,0,g,-h.x+b,-h.y+b);const $=new Path2D(i);r?x.fill($):(x.lineWidth=n*(m/g),x.stroke($));const M=(l.width*m-h.width)/2,k=(l.height*m-h.height)/2,A=Math.floor((a[0]-l.x-s)*m-M+b),L=Math.floor((l.height-(a[1]-l.y)-s)*m+k+b),z=Math.ceil(2*s*m),U=Math.ceil(2*s*m),B=x.getImageData(A,L,z,U).data;for(let X=3;X<B.length;X+=4)if(B[X]>127.5)return void(this._earlyReturn=!0)}_hitTestStroke(e,i){let r=null;if(Ro(e)){const n=e;r=[[[n.xmin,n.ymin],[n.xmin,n.ymax],[n.xmax,n.ymax],[n.xmax,n.ymin],[n.xmin,n.ymin]]]}else if(Un(e))r=e.rings;else{if(!La(e))return;r=e.paths}Mue(this.reverseTransformPt(this._searchPoint),r,Dt(i,Hn.CIMSolidStroke.width)*this.geomUnitsPerPoint()/2+this.reverseTransformScalar(this._searchDistPoint)*this.prevGeomUnitsPerPoint())&&(this._earlyReturn=!0)}}class hIe extends yX{constructor(e,i,r,n){super(i,r),this._applyAdditionalRenderProps=n,this._colorSubstitutionHelper=new Fpt,this._ctx=e}drawSolidFill(e,i){if(!e)return;if(Un(e))this._buildPath(e.rings,!0);else if(La(e))this._buildPath(e.paths,!0);else if(Ro(e))this._buildPath(ym(e).rings,!0);else{if(!z$(e))return;console.log("CanvasDrawHelper.drawSolidFill - No implementation!")}const r=this._ctx;r.fillStyle=typeof i=="string"?i:"rgba("+Math.round(i[0])+","+Math.round(i[1])+","+Math.round(i[2])+","+(i[3]??255)/255+")",r.fill("evenodd")}drawSolidStroke(e,i,r,n,s,a){if(!e||!i||r===0)return;if(Un(e))this._buildPath(e.rings,!0);else if(La(e))this._buildPath(e.paths,!1);else{if(!Ro(e))return void console.log("CanvasDrawHelper.drawSolidStroke isn't implemented!");this._buildPath(ym(e).rings,!0)}const o=this._ctx;o.strokeStyle=typeof i=="string"?i:"rgba("+Math.round(i[0])+","+Math.round(i[1])+","+Math.round(i[2])+","+(i[3]??255)/255+")",o.lineWidth=Math.max(this.transformSize(r),dIe),this._setCapStyle(n),this._setJoinStyle(s),o.miterLimit=a,o.stroke()}pushClipPath(e){if(this._ctx.save(),Un(e))this._buildPath(e.rings,!0);else if(La(e))this._buildPath(e.paths,!0);else{if(!Ro(e))return;this._buildPath(ym(e).rings,!0)}this._ctx.clip("evenodd")}popClipPath(){this._ctx.restore()}drawImage(e,i){const{colorSubstitutions:r,url:n,tintColor:s}=e,a=Dt(e.scaleX,1),o=this._resourceManager.getResource(n);if(o==null)return;let l=i*(o.width/o.height),c=i;i||(l=o.width,c=o.height);const h=R1(n)||"src"in o&&R1(o.src);let m="getFrame"in o?JU(o):o;r&&(m=this._colorSubstitutionHelper.applyColorSubstitution(m,r)),this._applyAdditionalRenderProps&&!h&&s&&(m=this._colorSubstitutionHelper.tintImageData(m,s));const g=this.transformPt([0,0]),[v,b]=this.getTransformAngle(),x=this.transformSize(1),$=this._ctx;$.save(),$.setTransform({m11:a*x*v,m12:a*x*b,m21:-x*b,m22:x*v,m41:g[0],m42:g[1]}),$.drawImage(m,-l/2,-c/2,l,c),$.restore()}drawText(e,i){if(!i||i.length===0)return;this._textRasterizer||(this._textRasterizer=new nIe);const r=fIe(e,this.transformSize(Qi(1))),n=this._textRasterizer.rasterizeText(i,r);if(!n)return;const{size:s,anchorX:a,anchorY:o,canvas:l}=n,c=s[0]*(a+.5),h=s[1]*(o-.5),m=this._ctx,g=this.transformPt([0,0]),[v,b]=this.getTransformAngle(),x=1;m.save(),m.setTransform({m11:x*v,m12:x*b,m21:-x*b,m22:x*v,m41:g[0]-x*c,m42:g[1]+x*h}),m.drawImage(l,0,0),m.restore()}drawPictureFill(e,i){if(!e)return;let{colorSubstitutions:r,height:n,offsetX:s,offsetY:a,rotation:o,scaleX:l,tintColor:c,url:h}=i;const m=this._resourceManager.getResource(h);if(m==null)return;if(Un(e))this._buildPath(e.rings,!0);else if(La(e))this._buildPath(e.paths,!0);else if(Ro(e))this._buildPath(ym(e).rings,!0);else{if(!z$(e))return;console.log("CanvasDrawHelper.drawPictureFill - No implementation!")}const g=this._ctx,v=R1(h)||"src"in m&&R1(m.src);let b,x="getFrame"in m?JU(m):m;if(r&&(x=this._colorSubstitutionHelper.applyColorSubstitution(x,r)),this._applyAdditionalRenderProps){v||c&&(x=this._colorSubstitutionHelper.tintImageData(x,c)),b=g.createPattern(x,"repeat");const $=this.transformSize(1);o||(o=0),s?s*=$:s=0,a?a*=$:a=0,n&&(n*=$);const M=n?n/m.height:1,k=l&&n?l*n/m.width:1;if(o!==0||M!==1||k!==1||s!==0||a!==0){const A=new DOMMatrix;A.rotateSelf(0,0,-o).translateSelf(s,a).scaleSelf(k,M,1),b.setTransform(A)}}else b=g.createPattern(x,"repeat");g.save(),g.fillStyle=b,g.fill("evenodd"),g.restore()}drawPictureStroke(e,i){if(!e)return;let{colorSubstitutions:r,capStyle:n,joinStyle:s,miterLimit:a,tintColor:o,url:l,width:c}=i;const h=this._resourceManager.getResource(l);if(h==null)return;let m;if(Un(e))m=e.rings;else if(La(e))m=e.paths;else{if(!Ro(e))return z$(e)?void console.log("CanvasDrawHelper.drawPictureStroke - No implementation!"):void 0;m=ym(e).rings}c||(c=h.width);const g=R1(l)||"src"in h&&R1(h.src);let v="getFrame"in h?JU(h):h;r&&(v=this._colorSubstitutionHelper.applyColorSubstitution(v,r)),this._applyAdditionalRenderProps&&(g||o&&(v=this._colorSubstitutionHelper.tintImageData(v,o)));const b=Math.max(this.transformSize(Di(c)),.5),x=b/v.width,$=this._ctx,M=$.createPattern(v,"repeat-y");let k,A;$.save(),this._setCapStyle(n),this._setJoinStyle(s),a!==void 0&&($.miterLimit=a),$.lineWidth=b;for(let L of m)if(L=he(L),Cue(L),L&&!(L.length<=1)){k=this.transformPt(L[0]);for(let z=1;z<L.length;z++){A=this.transformPt(L[z]);const U=Cmt(k,A),B=new DOMMatrix;B.translateSelf(0,k[1]-b/2).scaleSelf(x,x,1).rotateSelf(0,0,90-U),M.setTransform(B),$.strokeStyle=M,$.beginPath(),$.moveTo(k[0],k[1]),$.lineTo(A[0],A[1]),$.stroke(),k=A}}$.restore()}drawGradientFill(e,i){if(!e)return;let r;if(Un(e))r=e.rings;else if(La(e))r=e.paths;else{if(!Ro(e))return void JC().error("Unable to draw gradient fill");r=ym(e).rings}this._buildPath(r,!0);const{angle:n,gradientMethod:s,gradientSize:a,gradientSizeUnits:o}=i,l=Hn.CIMGradientFill,c=i.gradientType??l.gradientType,h=-RT(n??0),m=tFe();for(const M of r){const k=M?M.length:0;if(k>1)for(let A=0;A<k;A++){let L=this.transformPt(M[A]);s!=="Linear"&&s!=="Rectangular"||(L=Af(L,-h)),Ra(m,L)}}const[g,v,b,x]=m,$=this._ctx;switch($.save(),s){case"Buffered":JC().error(`Gradient method "${s}" currently unsupported.`);break;case"Linear":{const M=(v+x)/2,k=o==="Absolute"?this.transformSize(Di(a)):EM(a,l.gradientSize)*(b-g),[A,L]=c==="Discrete"?[b,b-k]:[g+k,g],z=Af([A,M],h),U=Af([L,M],h),B=$.createLinearGradient(z[0],z[1],U[0],U[1]);f3(B,i),$.fillStyle=B,$.fill("evenodd");break}case"Circular":{const M=Fie(m),k=KLe(m)/2,A=o==="Absolute"?this.transformSize(Di(a)):EM(a,l.gradientSize)*k,[L,z]=c==="Discrete"?[k,k-A]:[A,0],U=$.createRadialGradient(M[0],M[1],L,M[0],M[1],z);f3(U,i),$.fillStyle=U,$.fill("evenodd");break}case"Rectangular":{const M=Fie(m),k=M[0],A=M[1],L=Af(M,h),z=(le,ie,re,se,Te,ne,_e,Oe)=>{$.save(),this.pushClipPath(e);const He=Af([Te,ne],h),ft=Af([_e,Oe],h);$.beginPath(),$.moveTo(L[0],L[1]),$.lineTo(He[0],He[1]),$.lineTo(ft[0],ft[1]),$.lineTo(L[0],L[1]),$.clip();const oe=Af([le,ie],h),ze=Af([re,se],h),Ke=$.createLinearGradient(oe[0],oe[1],ze[0],ze[1]);f3(Ke,i),$.fillStyle=Ke,$.fill("evenodd"),$.restore()};let U=o==="Absolute"?this.transformSize(Di(a)):EM(a,l.gradientSize)*(SD(m)/2),[B,X]=c==="Discrete"?[b,b-U]:[k+U,k];z(B,A,X,A,b,v,b,x),[B,X]=c==="Discrete"?[g,g+U]:[k-U,k],z(B,A,X,A,g,x,g,v),U=o==="Absolute"?this.transformSize(Di(a)):EM(a,l.gradientSize)*(TD(m)/2);let[J,Q]=c==="Discrete"?[x,x-U]:[A+U,A];z(k,J,k,Q,b,x,g,x),[J,Q]=c==="Discrete"?[v,v+U]:[A-U,A],z(k,J,k,Q,g,v,b,v);break}}$.restore()}drawGradientStroke(e,i){const{capStyle:r,gradientMethod:n,gradientSize:s,gradientSizeUnits:a,joinStyle:o,miterLimit:l,width:c}=i;if(!e||c===0)return;let h;if(Un(e))h=e.rings;else if(La(e))h=e.paths;else{if(!Ro(e))return void JC().error("Unable to draw gradient stroke");h=ym(e).rings}const m=i.gradientType??Hn.CIMGradientStroke.gradientType,g=Math.max(this.transformSize(Di(c)),.5),v=this._ctx;let b,x;v.save(),this._setCapStyle(r),this._setJoinStyle(o),l!==void 0&&(v.miterLimit=l),v.lineWidth=g;for(let $ of h){if($=he($),Cue($),!$||$.length<=1)continue;let M=0;b=this.transformPt($[0]);for(let L=1;L<$.length;L++){x=this.transformPt($[L]);const z=x[0]-b[0],U=x[1]-b[1];M+=Math.sqrt(z*z+U*U),b=x}const k=a==="Absolute"?this.transformSize(Di(s)):EM(s,Hn.CIMGradientStroke.gradientSize)*(n==="AcrossLine"?g:M);let A=0;b=this.transformPt($[0]);for(let L=1;L<$.length;L++){x=this.transformPt($[L]);const z=x[0]-b[0],U=x[1]-b[1],B=Math.sqrt(z*z+U*U);let X,J,Q,le;switch(n){case"AcrossLine":{const[re,se]=Af([z/B,U/B],-Math.PI/2),Te=g/2,ne=m==="Discrete"?Te:k-Te;X=(b[0]+x[0])/2+re*ne,J=(b[1]+x[1])/2+se*ne,Q=X-re*k,le=J-se*k;break}case"AlongLine":{const re=z/B,se=U/B;m==="Discrete"?(X=b[0]-re*A,J=b[1]-se*A,Q=X+re*k,le=J+se*k):(Q=b[0]+re*(M-A),le=b[1]+se*(M-A),X=Q-re*k,J=le-se*k);break}default:return JC().error("Unrecognized gradient method:",n),void v.restore()}const ie=v.createLinearGradient(X,J,Q,le);f3(ie,i),v.strokeStyle=ie,v.beginPath(),v.moveTo(b[0],b[1]),v.lineTo(x[0],x[1]),v.stroke(),A+=B,b=x}}v.restore()}_buildPath(e,i){const r=this._ctx;if(r.beginPath(),e)for(const n of e){const s=n?n.length:0;if(s>1){let a=this.transformPt(n[0]);r.moveTo(a[0],a[1]);for(let o=1;o<s;o++)a=this.transformPt(n[o]),r.lineTo(a[0],a[1]);i&&r.closePath()}}}_setCapStyle(e){switch(e){case"Butt":this._ctx.lineCap="butt";break;case"Round":this._ctx.lineCap="round";break;case"Square":this._ctx.lineCap="square"}}_setJoinStyle(e){switch(e){case"Bevel":this._ctx.lineJoin="bevel";break;case"Round":this._ctx.lineJoin="round";break;case"Miter":this._ctx.lineJoin="miter"}}}function Imt(t,e,i){let r=Dt(t.separation,Hn.CIMHatchFill.separation)*i,n=Dt(t.rotation);if(r===0)return null;r<0&&(r=-r);let s=0;const a=.5*r;for(;s>a;)s-=r;for(;s<-a;)s+=r;const o=ls();SZ(o,e),o[0]-=a,o[1]-=a,o[2]+=a,o[3]+=a;const l=[[o[0],o[1]],[o[0],o[3]],[o[2],o[3]],[o[2],o[1]]];for(;n>180;)n-=180;for(;n<0;)n+=180;const c=Math.cos(n*F0),h=Math.sin(n*F0),m=-r*h,g=r*c;let v,b,x,$;s=Dt(t.offsetX)*i*h-Dt(t.offsetY)*i*c,v=x=Number.MAX_VALUE,b=$=-Number.MAX_VALUE;for(const B of l){const X=B[0],J=B[1],Q=c*X+h*J,le=-h*X+c*J;v=Math.min(v,Q),x=Math.min(x,le),b=Math.max(b,Q),$=Math.max($,le)}x=Math.floor(x/r)*r;let M=c*v-h*x-m*s/r,k=h*v+c*x-g*s/r,A=c*b-h*x-m*s/r,L=h*b+c*x-g*s/r;const z=1+Math.round(($-x)/r),U=[];for(let B=0;B<z;B++)M+=m,k+=g,A+=m,L+=g,U.push([[M,k],[A,L]]);return{paths:U}}function Mmt(t,e){let i=0;for(const r of e){const n=r.length;for(let s=1;s<n;s++){const a=r[s-1],o=r[s];a[1]>t[1]!=o[1]>t[1]&&((o[0]-a[0])*(t[1]-a[1])-(o[1]-a[1])*(t[0]-a[0])>0?i++:i--)}}return i!==0}function Mue(t,e,i){for(const r of e){const n=r.length;for(let s=1;s<n;s++){const a=r[s-1],o=r[s];let l=(o[0]-a[0])*(o[0]-a[0])+(o[1]-a[1])*(o[1]-a[1]);if(l===0)continue;l=Math.sqrt(l);const c=((o[0]-a[0])*(t[1]-a[1])-(o[1]-a[1])*(t[0]-a[0]))/l;if(Math.abs(c)<i){const h=((o[0]-a[0])*(t[0]-a[0])+(o[1]-a[1])*(t[1]-a[1]))/l;if(h>-i&&h<l+i)return!0}}}return!1}function Cmt(t,e){const i=e[0]-t[0],r=e[1]-t[1];return 180/Math.PI*Math.atan2(r,i)}const ym=t=>t?{spatialReference:t.spatialReference,rings:[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]}:null,pIe=(t,e,i)=>{switch(t){case"ExtraLeading":return 1+e/i;case"Multiple":return e;case"Exact":return e/i}};function fIe(t,e=1){var A;const i=Ixe(t),r=Txe(t.fontStyleName),n=t.fontFamilyName??pX,{weight:s,style:a}=r,o=e*(t.height||5),l=bKe(t.horizontalAlignment),c=wKe(t.verticalAlignment),h=F2(t),m=F2(t.haloSymbol),g=m!=null?e*(t.haloSize??0):0,v=tz(t.symbol),b=e*(iz(t.symbol)||0),x=((A=t.callout)==null?void 0:A.type)==="CIMBackgroundCallout"?t.callout.backgroundSymbol:null,$=F2(x),M=iz(x),k=tz(x);return{color:h,size:o,horizontalAlignment:l,verticalAlignment:c,font:{family:n,style:yKe(a),weight:vKe(s),decoration:i},outline:{size:b||0,color:v},halo:{size:g||0,color:m,style:a},backgroundColor:$,borderLine:M!=null&&k!=null?{size:M,color:k}:null,pixelRatio:1,premultiplyColors:!0}}const Emt=1e-4;function Cue(t){let e,i,r,n,s,a=t[0],o=1;for(;o<t.length;)e=t[o][0]-a[0],i=t[o][1]-a[1],n=e!==0?i/e:Math.PI/2,r!==void 0&&Math.abs(n-r)<=Emt?(t.splice(o-1,1),a=s):(s=a,a=t[o],o++),r=n}const y3=Number.POSITIVE_INFINITY,vX=Math.PI,BOt=2*vX,kmt=128/vX,Amt=256/360,qOt=vX/180,Pmt=1/Math.LN2;function mIe(t,e){return(t%=e)>=0?t:t+e}function HOt(t){return mIe(t*kmt,256)}function GOt(t){return mIe(t*Amt,256)}function WOt(t){return Math.log(t)*Pmt}function ZOt(t,e,i){return t*(1-i)+e*i}const Omt=8,Lmt=14,Fmt=16;function YOt(t){return Omt+Math.max((t-Lmt)*Fmt,0)}function JOt(t,e,i){let r,n,s,a=0;for(const o of i){r=o.length;for(let l=1;l<r;++l)n=o[l-1],s=o[l],n.y>e!=s.y>e&&((s.x-n.x)*(e-n.y)-(s.y-n.y)*(t-n.x)>0?a++:a--)}return a!==0}function XOt(t,e,i,r){let n,s,a,o;const l=r*r;for(const c of i){const h=c.length;if(!(h<2)){n=c[0].x,s=c[0].y;for(let m=1;m<h;++m){if(a=c[m].x,o=c[m].y,SRe(t,e,n,s,a,o)<l)return!0;n=a,s=o}}}return!1}function QOt(t,e,i,r,n,s,a){const o=Math.max(r,Math.min(e,s))-e,l=Math.max(n,Math.min(i,a))-i;return o*o+l*l<=t*t}function KOt(t,e){if(e===0||Number.isNaN(e))return t;const i=[],r=new ki(0,0),n=new ki(0,0),s=new ki(0,0);for(let a=0;a<t.length;a++){const o=t[a],l=[];for(let c=0;c<o.length;c++){const h=o[c-1],m=o[c],g=o[c+1];c===0?r.setCoords(0,0):r.assignSub(m,h).normalize().rightPerpendicular(),c===o.length-1?n.setCoords(0,0):n.assignSub(g,m).normalize().rightPerpendicular(),s.assignAdd(r,n).normalize();const v=s.x*n.x+s.y*n.y;v!==0&&s.scale(1/v),l.push(ki.add(m,s.scale(e)))}i.push(l)}return i}function e3t(t,e,i,r){const n=new ki(t[0],t[1]);if(n.scale(r),e==="viewport"){const s=-i*(Math.PI/180),a=Math.cos(s),o=Math.sin(s);n.rotate(a,o)}return n}const gIe=Math.PI,Rmt=gIe/2,Eue=Math.PI/180,KU=96/72,zmt=1.4142135623730951,kue=2,Aue=4,Vz=()=>Ie.getLogger("esri.symbols.cim.CIMSymbolHelper");function t3t(t){let e;switch(t.type){case"cim":return t.data;case"web-style":return t;case"simple-marker":{const i=so.fromSimpleMarker(t);if(!i)throw new Error("InternalError: Cannot convert symbol to CIM");e=i;break}case"picture-marker":e=so.fromPictureMarker(t);break;case"simple-line":e=so.fromSimpleLineSymbol(t);break;case"simple-fill":e=so.fromSimpleFillSymbol(t);break;case"picture-fill":e=so.fromPictureFillSymbol(t);break;case"text":e=so.fromTextSymbol(t)}return{type:"CIMSymbolReference",symbol:e}}function TF(t,e,i){switch(e.type){case"CIMSymbolReference":return TF(t,e.symbol,i);case"CIMPointSymbol":i==null&&(i={x:0,y:0}),t.drawSymbol(e,i);break;case"CIMLineSymbol":i==null&&(i={paths:[[[0,0],[10,0]]]}),t.drawSymbol(e,i);break;case"CIMPolygonSymbol":i==null&&(i={rings:[[[0,0],[0,10],[10,10],[10,0],[0,0]]]}),t.drawSymbol(e,i);break;case"CIMTextSymbol":{const r={x:0,y:0};t.drawSymbol(e,r);break}case"CIMVectorMarker":{const r=new sI;t.drawMarker(e,r);break}}return t.envelope()}function Nmt(t){if(!t)return 0;switch(t.type){case"CIMMarkerPlacementAlongLineSameSize":case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAtExtremities":case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementAtRatioPositions":case"CIMMarkerPlacementOnLine":case"CIMMarkerPlacementOnVertices":return Math.abs(t.offset);default:return 0}}function Dmt(t){if(!t)return 0;switch(t.type){case"CIMGeometricEffectArrow":return Math.abs(.5*t.width);case"CIMGeometricEffectBuffer":return Math.abs(t.size);case"CIMGeometricEffectControlMeasureLine":return 500;case"CIMGeometricEffectExtension":case"CIMGeometricEffectRadial":return Math.abs(t.length);case"CIMGeometricEffectJog":return Math.abs(.5*t.length);case"CIMGeometricEffectMove":return Math.max(Math.abs(Dt(t.offsetX)),Math.abs(Dt(t.offsetY)));case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":return Math.abs(t.offset);case"CIMGeometricEffectRegularPolygon":return Math.abs(t.radius);case"CIMGeometricEffectRotate":case"CIMGeometricEffectScale":default:return 0;case"CIMGeometricEffectTaperedPolygon":return .5*Math.max(Math.abs(t.fromWidth),Math.abs(t.toWidth));case"CIMGeometricEffectWave":return Math.abs(t.amplitude);case"CIMGeometricEffectDonut":return Math.abs(t.width)}}function Pue(t){if(!t)return 0;let e=0;for(const i of t)e+=Dmt(i);return e}let i3t=class{static getSymbolInflateSize(e,i,r,n,s){return e||(e=[0,0,0,0]),i?this._getInflateSize(e,i,r,n,s):e}static safeSize(e){const i=Math.max(Math.abs(e[0]),Math.abs(e[2])),r=Math.max(Math.abs(e[1]),Math.abs(e[3]));return Math.sqrt(i*i+r*r)}static _vectorMarkerBounds(e,i,r,n){let s=!0;const a=ls();if(i!=null&&i.markerGraphics)for(const o of i.markerGraphics){const l=[0,0,0,0];o.geometry&&(SZ(a,o.geometry),l[0]=0,l[1]=0,l[2]=0,l[3]=0,this.getSymbolInflateSize(l,o.symbol,r,0,n),a[0]+=l[0],a[1]+=l[1],a[2]+=l[2],a[3]+=l[3],s?(e[0]=a[0],e[1]=a[1],e[2]=a[2],e[3]=a[3],s=!1):(e[0]=Math.min(e[0],a[0]),e[1]=Math.min(e[1],a[1]),e[2]=Math.max(e[2],a[2]),e[3]=Math.max(e[3],a[3])))}return e}static _getInflateSize(e,i,r,n,s){if(Hmt(i)){const a=this._getLayersInflateSize(e,i.symbolLayers,r,n,s),o=Pue(i.effects);return o>0&&(a[0]-=o,a[1]-=o,a[2]+=o,a[3]+=o),a}return this._getTextInflatedSize(e,i,s)}static _getLayersInflateSize(e,i,r,n,s){let a=!0;if(!i)return e;for(const o of i){if(!o)continue;let l=[0,0,0,0];switch(o.type){case"CIMSolidFill":case"CIMPictureFill":case"CIMHatchFill":case"CIMGradientFill":break;case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":{const h=o;let m=h.width;m!=null&&(h.capStyle==="Square"||h.joinStyle==="Miter"?m/=zmt:m/=2,l[0]=-m,l[1]=-m,l[2]=m,l[3]=m);break}case"CIMCharacterMarker":case"CIMVectorMarker":case"CIMPictureMarker":{const h=o;if(o.type==="CIMVectorMarker"){const x=o;if(l=this._vectorMarkerBounds(l,x,r,s),x.frame){const $=(x.frame.xmin+x.frame.xmax)/2,M=(x.frame.ymin+x.frame.ymax)/2;if(l[0]-=$,l[1]-=M,l[2]-=$,l[3]-=M,x.size!=null){const k=x.size/(x.frame.ymax-x.frame.ymin);l[0]*=k,l[1]*=k,l[2]*=k,l[3]*=k}}}else if(o.type==="CIMPictureMarker"){const x=o,$=r.getResource(x.url);let M=1;if($!=null&&$.height&&(M=$.width/$.height),h.size!=null){const k=h.size/2,A=h.size*M*x.scaleX/2;l=[-A,-k,A,k]}}else if(h.size!=null){const x=h.size/2;l=[-x,-x,x,x]}if(h.anchorPoint){let x,$;h.anchorPointUnits==="Absolute"?(x=h.anchorPoint.x,$=h.anchorPoint.y):(x=h.anchorPoint.x*(l[2]-l[0]),$=h.anchorPoint.y*(l[3]-l[1]));const M=1.25*Math.sqrt(x*x+$*$);l[0]-=M,l[1]-=M,l[2]+=M,l[3]+=M}let m=Dt(h.rotation);if(h.rotateClockwise&&(m=-m),n&&(m-=n),m){const x=Eue*m,$=Math.cos(x),M=Math.sin(x),k=ls([y3,y3,-y3,-y3]);Ra(k,[l[0]*$-l[1]*M,l[0]*M+l[1]*$]),Ra(k,[l[0]*$-l[3]*M,l[0]*M+l[3]*$]),Ra(k,[l[2]*$-l[1]*M,l[2]*M+l[1]*$]),Ra(k,[l[2]*$-l[3]*M,l[2]*M+l[3]*$]),l=k}let g=Dt(h.offsetX),v=Dt(h.offsetY);if(n){const x=Eue*n,$=Math.cos(x),M=Math.sin(x),k=g*M+v*$;g=g*$-v*M,v=k}l[0]+=g,l[1]+=v,l[2]+=g,l[3]+=v;const b=Nmt(h.markerPlacement);b>0&&(l[0]-=b,l[1]-=b,l[2]+=b,l[3]+=b);break}}const c=Pue(o.effects);c>0&&(l[0]-=c,l[1]-=c,l[2]+=c,l[3]+=c),a?(e[0]=l[0],e[1]=l[1],e[2]=l[2],e[3]=l[3],a=!1):(e[0]=Math.min(e[0],l[0]),e[1]=Math.min(e[1],l[1]),e[2]=Math.max(e[2],l[2]),e[3]=Math.max(e[3],l[3]))}return e}static _getTextInflatedSize(e,i,r){var g;const n=cIe(i.height??Hn.CIMTextSymbol.height);if(e[0]=-n/2,e[1]=-n/2,e[2]=n/2,e[3]=n/2,!r)return e;const s=r.get(i);if(!s||!s.glyphMosaicItems.glyphs.length)return e;const{lineGapType:a,lineGap:o}=i,l=a?pIe(a,o??0,n):0,c=((g=i.callout)==null?void 0:g.type)==="CIMBackgroundCallout",h=lIe(s.glyphMosaicItems,{scale:n/Zwe,angle:Dt(i.angle),xOffset:Dt(i.offsetX),yOffset:Dt(i.offsetY),horizontalAlignment:i.horizontalAlignment,verticalAlignment:i.verticalAlignment,maxLineWidth:uIe(i.lineWidth),lineHeight:Wwe*Math.max(.25,Math.min(l||1,4)),decoration:i.font.decoration||"none",useCIMAngleBehavior:!0,hasBackground:c}).boundsT,m=Math.sqrt(h.width*h.width+h.height*h.height);return e[0]-=h.x+m,e[1]-=h.y-m,e[2]+=h.x+m,e[3]+=-h.y+m,e}};class so{static getEnvelope(e,i,r){if(!e)return null;const n=new Tmt(r);if(Array.isArray(e)){let s;for(const a of e)s?s.union(TF(n,a,i)):s=TF(n,a,i);return s}return TF(n,e,i)}static getTextureInfo(e,i,r,n,s){const a=n??this.getEnvelope(e,null,i);if(!a)return[0,0,0,0,1];const o=Math.max(a.width,a.height)*KU;let l=s!=null?Math.max(s/o,1):1;l*=KU,a.x*=l,a.y*=l,a.width*=l,a.height*=l,a.width=Math.max(Math.ceil(a.x+a.width)-Math.floor(a.x),1)-1,a.height=Math.max(Math.ceil(a.y+a.height)-Math.floor(a.y),1)-1;let c=a.x+.5*a.width,h=a.y+.5*a.height;return c+=a.x-Math.floor(a.x),h+=a.y-Math.floor(a.y),n||(a.width+=r,a.height+=r,c+=r/2,h+=r/2),[a.width,a.height,c,h,l]}static getTextureAnchor(e,i,r){const[n,s,a,o,l]=this.getTextureInfo(e,i,kue,null,r);return[-a/n,-o/s,s/l*KU]}static rasterize(e,i,r,n,s=!0,a){const[o,l,c,h,m]=this.getTextureInfo(i,n,kue,r,a);e.width=o,e.height=l;const g=e.getContext("2d",{willReadFrequently:!0}),v=sa.createScale(m,-m);v.translate(.5*o-c,.5*l+h);const b=new hIe(g,n,v);switch(i.type){case"CIMPointSymbol":{const M={type:"point",x:0,y:0};b.drawSymbol(i,M);break}case"CIMVectorMarker":{const M=new sI;b.drawMarker(i,M);break}}const x=g.getImageData(0,0,e.width,e.height),$=new Uint8Array(x.data);if(s){let M;for(let k=0;k<$.length;k+=4)M=$[k+3]/255,$[k]=$[k]*M,$[k+1]=$[k+1]*M,$[k+2]=$[k+2]*M}return[$,e.width,e.height,-c/o,-h/l]}static fromTextSymbol(e){const{text:i}=e;return{type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,anchorPointUnits:"Relative",dominantSizeAxis3D:"Y",size:10,billboardMode3D:"FaceNearPlane",frame:{xmin:-5,ymin:-5,xmax:5,ymax:5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{x:0,y:0},symbol:so.createCIMTextSymbolfromTextSymbol(e),textString:i}],scaleSymbolsProportionally:!0,respectFrame:!0}],scaleX:1,angleAlignment:"Display"}}static fromPictureFillSymbol(e){const{height:i,outline:r,width:n,xoffset:s,xscale:a,yoffset:o,yscale:l}=e,c=[],h={type:"CIMPolygonSymbol",symbolLayers:c};if(r){const x=Oue(r);x&&c.push(x)}let m=e.url;e.type==="esriPFS"&&e.imageData&&(m=e.imageData);const g="angle"in e?e.angle??0:0,v=(n??0)*(a||1),b=(i??0)*(l||1);return c.push({type:"CIMPictureFill",invertBackfaceTexture:!1,scaleX:1,textureFilter:"Picture",tintColor:null,url:m,height:b,width:v,offsetX:Dt(s),offsetY:Dt(o),rotation:Dt(-g),colorSubstitutions:null}),h}static fromSimpleFillSymbol(e){const{color:i,style:r,outline:n}=e,s=[],a={type:"CIMPolygonSymbol",symbolLayers:s};if(n){const o=Oue(n);o&&s.push(o)}if(r&&r!=="solid"&&r!=="none"&&r!=="esriSFSSolid"&&r!=="esriSFSNull"){const o={type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",color:cc(i),capStyle:"Butt",joinStyle:"Miter",width:.75}]};let l=0;const c=Qi(Gmt(r)?8:10);switch(r){case"vertical":case"esriSFSVertical":l=90;break;case"forward-diagonal":case"esriSFSForwardDiagonal":case"diagonal-cross":case"esriSFSDiagonalCross":l=-45;break;case"backward-diagonal":case"esriSFSBackwardDiagonal":l=45;break;case"cross":case"esriSFSCross":l=0}s.push({type:"CIMHatchFill",lineSymbol:o,offsetX:0,offsetY:0,rotation:l,separation:c}),r==="cross"||r==="esriSFSCross"?s.push({type:"CIMHatchFill",lineSymbol:he(o),offsetX:0,offsetY:0,rotation:90,separation:c}):r!=="diagonal-cross"&&r!=="esriSFSDiagonalCross"||s.push({type:"CIMHatchFill",lineSymbol:he(o),offsetX:0,offsetY:0,rotation:45,separation:c})}else!r||r!=="solid"&&r!=="esriSFSSolid"||s.push({type:"CIMSolidFill",enable:!0,color:cc(i)});return a}static fromSimpleLineSymbol(e){const{cap:i,color:r,join:n,marker:s,miterLimit:a,style:o,width:l}=e;let c=null;o!=="solid"&&o!=="none"&&o!=="esriSLSSolid"&&o!=="esriSLSNull"&&(c=[{type:"CIMGeometricEffectDashes",dashTemplate:EG(o,i),lineDashEnding:"NoConstraint",scaleDash:!0,offsetAlongLine:null}]);const h=[];if(s){let m;switch(s.placement){case"begin-end":m="Both";break;case"begin":m="JustBegin";break;case"end":m="JustEnd";break;default:m="None"}const g=so.fromSimpleMarker(s,l,r).symbolLayers[0];g.markerPlacement={type:"CIMMarkerPlacementAtExtremities",placePerPart:!1,angleToLine:!0,offset:0,extremityPlacement:m,offsetAlongLine:0},h.push(g)}return h.push({type:"CIMSolidStroke",color:o!=="none"&&o!=="esriSLSNull"?cc(r):[0,0,0,0],capStyle:vIe(i),joinStyle:bIe(n),miterLimit:a,width:l,effects:c}),{type:"CIMLineSymbol",symbolLayers:h}}static fromPictureMarker(e){const{angle:i,height:r,width:n,xoffset:s,yoffset:a}=e;let o=e.url;return e.type==="esriPMS"&&e.imageData&&(o=e.imageData),{type:"CIMPointSymbol",symbolLayers:[{type:"CIMPictureMarker",invertBackfaceTexture:!1,scaleX:1,textureFilter:"Picture",tintColor:null,url:o,size:r,width:n,offsetX:Dt(s),offsetY:Dt(a),rotation:Dt(-i)}]}}static createCIMTextSymbolfromTextSymbol(e){const{angle:i,color:r,font:n,haloColor:s,haloSize:a,horizontalAlignment:o,kerning:l,lineWidth:c,text:h,verticalAlignment:m,xoffset:g,yoffset:v,backgroundColor:b,borderLineColor:x,borderLineSize:$}=e;let M,k,A,L,z,U;n&&(M=n.family,k=n.style,A=n.weight,L=n.size,z=n.decoration);let B=!1;return h&&(B=$pt(h)[1]),(b||$)&&(U={type:"CIMBackgroundCallout",margin:null,backgroundSymbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",color:cc(b)},{type:"CIMSolidStroke",color:cc(x),width:$}]},accentBarSymbol:null,gap:null,leaderLineSymbol:null,lineStyle:null}),{type:"CIMTextSymbol",angle:i,blockProgression:2,depth3D:1,extrapolateBaselines:!0,fontEffects:0,fontEncoding:1,fontFamilyName:M||"Arial",fontStyleName:Umt(k,A),fontType:0,haloSize:a,height:L,hinting:1,horizontalAlignment:jmt(o??"center"),kerning:l,letterWidth:100,ligatures:!0,lineGapType:"Multiple",lineWidth:c,offsetX:Dt(g),offsetY:Dt(v),strikethrough:z==="line-through",underline:z==="underline",symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:cc(r)}]},haloSymbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:cc(s)}]},shadowColor:[0,0,0,255],shadowOffsetX:1,shadowOffsetY:1,textCase:"Normal",textDirection:B?1:0,verticalAlignment:Vmt(m??"baseline"),verticalGlyphOrientation:0,wordSpacing:100,billboardMode3D:2,callout:U}}static createPictureMarkerRasterizationParam(e){var l,c;const{angle:i,height:r,width:n,xoffset:s,yoffset:a}=e,o=e.url??((l=e.source)==null?void 0:l.url)??((c=e.source)==null?void 0:c.imageData);return o?{type:"sprite-rasterization-param",overrides:[],resource:{type:"CIMPictureMarker",invertBackfaceTexture:!1,scaleX:1,textureFilter:"Picture",tintColor:null,url:o,size:r,width:n,offsetX:Dt(s),offsetY:Dt(a),rotation:Dt(-i)}}:null}static createPictureFillRasterizationParam(e){const{width:i,height:r,xoffset:n,yoffset:s,url:a}=e;return a?{type:"sprite-rasterization-param",overrides:[],resource:{type:"CIMPictureFill",scaleX:1,textureFilter:"Picture",tintColor:null,url:a,width:i,height:r,offsetX:Dt(n),offsetY:Dt(s),rotation:0}}:null}static fromSimpleMarker(e,i,r){const{style:n}=e,s=e.color??r;if(n==="path"||n==="esriSMSPath"){const m=[];if("outline"in e&&e.outline){const b=e.outline;m.push({type:"CIMSolidStroke",enable:!0,width:b.width,color:cc(b.color),path:e.path})}m.push({type:"CIMSolidFill",enable:!0,color:cc(s),path:e.path});const[g,v]=UM("square");return{type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,rotation:-Dt(e.angle),size:Dt(e.size||6),offsetX:Dt(e.xoffset),offsetY:Dt(e.yoffset),scaleSymbolsProportionally:!1,frame:g,markerGraphics:[{type:"CIMMarkerGraphic",geometry:v,symbol:{type:"CIMPolygonSymbol",symbolLayers:m}}]}]}}const a=[];let o,l,c=e.size;if("outline"in e&&e.outline&&e.outline.style!=="none"&&e.outline.style!=="esriSLSNull"){const m=e.outline,g=m.style!=="solid"&&m.style!=="esriSLSSolid";[o,l]=g?UM(n,e.size):UM(n);const v=m.width??$5.width;if(g){const $=v/e.size,M=(o.xmax-o.xmin)*$/2,k=(o.ymax-o.ymin)*$/2;o.xmin-=M,o.xmax+=M,o.ymin-=k,o.ymax+=k,c&&(c+=v)}const b=e.style!=="cross"&&e.style!=="x"||(e==null?void 0:e.outline.style)==="dot"||(e==null?void 0:e.outline.style)==="short-dot"?"HalfGap":"FullPattern",x=g?[{type:"CIMGeometricEffectAddControlPoints"},{type:"CIMGeometricEffectDashes",dashTemplate:EG(m.style,null).map($=>m.width&&m.width>0?$*m.width:$),lineDashEnding:b,controlPointEnding:"FullPattern"}]:void 0;a.push({type:"CIMSolidStroke",capStyle:g?"Round":"Butt",enable:!0,width:v,color:cc(m.color),effects:x})}else!i||e.type!=="line-marker"||e.style!=="cross"&&e.style!=="x"?[o,l]=UM(n):([o,l]=UM(n),a.push({type:"CIMSolidStroke",enable:!0,width:i,color:cc(s)}));a.push({type:"CIMSolidFill",enable:!0,color:cc(s)});const h={type:"CIMPolygonSymbol",symbolLayers:a};return{type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,rotation:Dt(-e.angle),size:Dt(c||6*i),offsetX:Dt(e.xoffset),offsetY:Dt(e.yoffset),scaleSymbolsProportionally:!1,frame:o,markerGraphics:[{type:"CIMMarkerGraphic",geometry:l,symbol:h}]}]}}static fromCIMHatchFill(e,i){var l;const r=i*(e.separation??Hn.CIMHatchFill.separation),n=r/2,s=he(e.lineSymbol);(l=s.symbolLayers)==null||l.forEach(c=>{var h;switch(c.type){case"CIMSolidStroke":c.width!=null&&(c.width*=i),(h=c.effects)==null||h.forEach(m=>{if(m.type==="CIMGeometricEffectDashes"){const g=m.dashTemplate;m.dashTemplate=g==null?void 0:g.map(v=>v*i)}});break;case"CIMVectorMarker":{c.size!=null&&(c.size*=i);const m=c.markerPlacement;m!=null&&"placementTemplate"in m&&(m.placementTemplate=m.placementTemplate.map(g=>g*i));break}}});let a=this._getLineSymbolPeriod(s)||Aue;for(;a<Aue;)a*=2;const o=a/2;return{type:"CIMVectorMarker",frame:{xmin:-o,xmax:o,ymin:-n,ymax:n},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{paths:[[[-o,0],[o,0]]]},symbol:s}],size:r}}static fetchResources(e,i,r,n=null){if(!e||!i)return r;switch(e.type){case"CIMMeshSymbol":case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":for(const s of e.effects||[])r.push(gue(s))}return yIe(e,s=>{for(const a of s.effects||[])r.push(gue(a));"url"in s&&s.url&&r.push(i.fetchResource(s.url,{signal:n}))}),r}static fetchFonts(e,i,r){if(e&&i){if("symbolLayers"in e&&e.symbolLayers){for(const n of e.symbolLayers)if(n.type==="CIMVectorMarker"&&n.markerGraphics)for(const s of n.markerGraphics)s!=null&&s.symbol&&so.fetchFonts(s.symbol,i,r)}else if(e.type==="CIMTextSymbol"){const{fontFamilyName:n,fontStyleName:s}=e;if(!n||n.toLowerCase()==="calcitewebcoreicons")return;const{style:a,weight:o}=Txe(s),l=Ixe(e),c=new li({family:n,style:a,weight:o,decoration:l});r.push(i.loadFont(c).catch(()=>{Vz().error(`Unsupported font ${n} in CIM symbol`)}))}}}static _getLineSymbolPeriod(e){if(e){const i=this._getEffectsRepeat(e.effects);if(i)return i;if(e.symbolLayers){for(const r of e.symbolLayers)if(r){const n=this._getEffectsRepeat(r.effects);if(n)return n;switch(r.type){case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":{const s=this._getPlacementRepeat(r.markerPlacement);if(s)return s}}}}}return 0}static _getEffectsRepeat(e){if(e){for(const i of e)if(i)switch(i.type){case"CIMGeometricEffectDashes":{const r=i.dashTemplate;if(r&&r.length){let n=0;for(const s of r)n+=s;return 1&r.length&&(n*=2),n}break}case"CIMGeometricEffectWave":return i.period;default:Vz().error(`unsupported geometric effect type ${i.type}`)}}return 0}static _getPlacementRepeat(e){if(e)switch(e.type){case"CIMMarkerPlacementAlongLineSameSize":case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineVariableSize":{const i=e.placementTemplate;if(i&&i.length){let r=0;for(const n of i)r+=+n;return 1&i.length&&(r*=2),r}break}}return 0}static fromCIMInsidePolygon(e){const i=e.markerPlacement,r={...e};r.markerPlacement=null,r.anchorPoint=null;const n=Math.abs(i.stepX),s=Math.abs(i.stepY),a=(i.randomness??100)/100;let o,l,c,h;if(i.gridType==="Random"){const m=Qi(qHe),g=Math.max(Math.floor(m/n),1),v=Math.max(Math.floor(m/s),1);o=g*n/2,l=v*s/2,c=2*l;const b=new $W(i.seed),x=a*n/1.5,$=a*s/1.5;h=[];for(let M=0;M<g;M++)for(let k=0;k<v;k++){const A=M*n-o+x*(.5-b.getFloat()),L=k*s-l+$*(.5-b.getFloat());h.push({x:A,y:L}),M===0&&h.push({x:A+2*o,y:L}),k===0&&h.push({x:A,y:L+2*l})}}else i.shiftOddRows===!0?(o=n/2,l=s,c=2*s,h=[{x:-o,y:0},{x:o,y:0},{x:0,y:l},{x:0,y:-l}]):(o=n/2,l=s/2,c=s,h=[{x:-n,y:0},{x:0,y:-s},{x:-n,y:-s},{x:0,y:0},{x:n,y:0},{x:0,y:s},{x:n,y:s},{x:-n,y:s},{x:n,y:-s}]);return{type:"CIMVectorMarker",frame:{xmin:-o,xmax:o,ymin:-l,ymax:l},markerGraphics:h.map(m=>({type:"CIMMarkerGraphic",geometry:m,symbol:{type:"CIMPointSymbol",symbolLayers:[r]}})),size:c}}}function yIe(t,e){if(t)switch(t.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const i=t.symbolLayers;if(!i)return;for(const r of i)if(e(r),r.type==="CIMVectorMarker"){const n=r.markerGraphics;if(!n)continue;for(const s of n)if(s){const a=s.symbol;a&&yIe(a,e)}}break}}}const vIe=t=>{if(!t)return"Butt";switch(t){case"butt":return"Butt";case"square":return"Square";case"round":return"Round"}},bIe=t=>{if(!t)return"Miter";switch(t){case"miter":return"Miter";case"round":return"Round";case"bevel":return"Bevel"}},jmt=t=>{if(t==null)return"Center";switch(t){case"left":return"Left";case"right":return"Right";case"center":return"Center"}},Vmt=t=>{if(t==null)return"Center";switch(t){case"baseline":return"Baseline";case"top":return"Top";case"middle":return"Center";case"bottom":return"Bottom"}},cc=t=>{if(!t)return[0,0,0,0];const{r:e,g:i,b:r,a:n}=t;return[e,i,r,255*n]},Umt=(t,e)=>{const i=Bmt(e),r=qmt(t);return i&&r?`${i}-${r}`:`${i}${r}`},Bmt=t=>{if(!t)return"";switch(t.toLowerCase()){case"bold":case"bolder":return"bold"}return""},qmt=t=>{if(!t)return"";switch(t.toLowerCase()){case"italic":case"oblique":return"italic"}return""},EG=(t,e)=>{const i=ve("safari")?.001:0,r=e==="butt";switch(t){case"dash":case"esriSLSDash":return r?[4,3]:[3,4];case"dash-dot":case"esriSLSDashDot":return r?[4,3,1,3]:[3,4,i,4];case"dot":case"esriSLSDot":return r?[1,3]:[i,4];case"long-dash":case"esriSLSLongDash":return r?[8,3]:[7,4];case"long-dash-dot":case"esriSLSLongDashDot":return r?[8,3,1,3]:[7,4,i,4];case"long-dash-dot-dot":case"esriSLSDashDotDot":return r?[8,3,1,3,1,3]:[7,4,i,4,i,4];case"short-dash":case"esriSLSShortDash":return r?[4,1]:[3,2];case"short-dash-dot":case"esriSLSShortDashDot":return r?[4,1,1,1]:[3,2,i,2];case"short-dash-dot-dot":case"esriSLSShortDashDotDot":return r?[4,1,1,1,1,1]:[3,2,i,2,i,2];case"short-dot":case"esriSLSShortDot":return r?[1,1]:[i,2];case"solid":case"esriSLSSolid":case"none":return Vz().error("Unexpected: style does not require rasterization"),[0,0];default:return Vz().error(`Tried to rasterize SLS, but found an unexpected style: ${t}!`),[0,0]}};function Hmt(t){return t.symbolLayers!==void 0}const UM=(t,e=100)=>{const i=e/2;let r,n;const s=t;if(s==="circle"||s==="esriSMSCircle"){let o=Math.acos(1-.25/i),l=Math.ceil(gIe/o/4);l===0&&(l=1),o=Rmt/l,l*=4;const c=[];c.push([i,0]);for(let h=1;h<l;h++)c.push([i*Math.cos(h*o),-i*Math.sin(h*o)]);c.push([i,0]),r={rings:[c]},n={xmin:-i,ymin:-i,xmax:i,ymax:i}}else if(s==="cross"||s==="esriSMSCross")r={paths:[[[0,i],[0,-i]],[[i,0],[-i,0]]]},n={xmin:-i,ymin:-i,xmax:i,ymax:i};else if(s==="diamond"||s==="esriSMSDiamond")r={rings:[[[-i,0],[0,i],[i,0],[0,-i],[-i,0]]]},n={xmin:-i,ymin:-i,xmax:i,ymax:i};else if(s==="square"||s==="esriSMSSquare")r={rings:[[[-i,-i],[-i,i],[i,i],[i,-i],[-i,-i]]]},n={xmin:-i,ymin:-i,xmax:i,ymax:i};else if(s==="x"||s==="esriSMSX")r={paths:[[[i,i],[-i,-i]],[[i,-i],[-i,i]]]},n={xmin:-i,ymin:-i,xmax:i,ymax:i};else if(s==="triangle"||s==="esriSMSTriangle"){const a=e*.5773502691896257,o=-a,l=2/3*e,c=l-e;r={rings:[[[o,c],[0,l],[a,c],[o,c]]]},n={xmin:o,ymin:c,xmax:a,ymax:l}}else s==="arrow"&&(r={rings:[[[-50,50],[50,0],[-50,-50],[-33,-20],[-33,20],[-50,50]]]},n={xmin:-i,ymin:-i,xmax:i,ymax:i});return[n,r]},Gmt=t=>t==="vertical"||t==="horizontal"||t==="cross"||t==="esriSFSCross"||t==="esriSFSVertical"||t==="esriSFSHorizontal";function Oue(t){if(!t)return null;let e=null;const{cap:i,color:r,join:n,miterLimit:s,style:a,width:o}=t;return a!=="solid"&&a!=="none"&&a!=="esriSLSSolid"&&a!=="esriSLSNull"&&(e=[{type:"CIMGeometricEffectDashes",dashTemplate:EG(a,i),lineDashEnding:"NoConstraint",scaleDash:!0,offsetAlongLine:null}]),{type:"CIMSolidStroke",color:a!=="esriSLSNull"&&a!=="none"?cc(r):[0,0,0,0],capStyle:vIe(i),joinStyle:bIe(n),miterLimit:s,width:o,effects:e}}let Wmt=class{constructor(){this._resourceMap=new Map,this._inFlightResourceMap=new Map}destroy(){this._inFlightResourceMap.clear(),this._resourceMap.clear()}getResource(e){return this._resourceMap.get(e)??null}async fetchResource(e,i){const r=this._resourceMap.get(e);if(r)return{width:r.width,height:r.height};let n=this._inFlightResourceMap.get(e);return n?n.then(s=>({width:s.width,height:s.height})):(n=SGe(e,i),this._inFlightResourceMap.set(e,n),n.then(s=>(this._inFlightResourceMap.delete(e),this._resourceMap.set(e,s),{width:s.width,height:s.height}),()=>({width:0,height:0})))}deleteResource(e){this._inFlightResourceMap.delete(e),this._resourceMap.delete(e)}loadFont(e){return Apt(e)}};function s3t(t){return t?{originPosition:t.originPosition==="upper-left"?"upperLeft":t.originPosition==="lower-left"?"lowerLeft":t.originPosition,scale:t.tolerance?[t.tolerance,t.tolerance,1,1]:[1,1,1,1],translate:t.extent!=null?[t.extent.xmin,t.extent.ymax,t.extent.zmin??0,t.extent.mmin??0]:[0,0,0,0]}:null}function Zmt(t){return t.originPosition==="lowerLeft"&&t.scale.length===4&&t.translate.length===4}function C_(t){if(Zmt(t))return t;const{originPosition:e,scale:i,translate:r}=t,n=i[0]??1,s=i[1]??1;return{originPosition:"lowerLeft",scale:[n,e==="lowerLeft"?s:-s,i[2]??1,i[3]??1],translate:[r[0]??0,r[1]??0,r[2]??0,r[3]??0]}}function Qm({scale:t,translate:e},i){return Math.round((i-e[0])/t[0])}function Km({scale:t,translate:e},i){return Math.round((i-e[1])/t[1])}function ek({scale:t,translate:e},i){return Math.round(((i??0)-e[2])/t[2])}function tk({scale:t,translate:e},i){return i?Math.round((i-e[3])/t[3]):0}function wIe(t,e){return t&&e?Qmt:t&&!e?Jmt:!t&&e?Xmt:Ymt}const Ymt=(t,e)=>{const i=[];if(!e.length)return null;const r=e[0];let n=Qm(t,r[0]),s=Km(t,r[1]);i.push([n,s]);for(let a=1;a<e.length;a++){const[o,l]=e[a],c=Qm(t,o),h=Km(t,l);c===n&&h===s||i.push([c-n,h-s]),n=c,s=h}return i},Jmt=(t,e)=>{const i=[];if(!e.length)return null;const r=e[0];let n=Qm(t,r[0]),s=Km(t,r[1]),a=ek(t,r[2]);i.push([n,s,a]);for(let o=1;o<e.length;o++){const[l,c,h]=e[o],m=Qm(t,l),g=Km(t,c),v=ek(t,h);m===n&&g===s&&v===a||i.push([m-n,g-s,v]),n=m,s=g,a=v}return i},Xmt=(t,e)=>{const i=[];if(!e.length)return null;const r=e[0];let n=Qm(t,r[0]),s=Km(t,r[1]),a=tk(t,r[2]);i.push([n,s,a]);for(let o=1;o<e.length;o++){const[l,c,h]=e[o],m=Qm(t,l),g=Km(t,c),v=tk(t,h);m===n&&g===s&&v===a||i.push([m-n,g-s,v]),n=m,s=g,a=v}return i},Qmt=(t,e)=>{const i=[];if(!e.length)return null;const r=e[0];let n=Qm(t,r[0]),s=Km(t,r[1]),a=ek(t,r[2]),o=tk(t,r[3]);i.push([n,s,a,o]);for(let l=1;l<e.length;l++){const[c,h,m,g]=e[l],v=Qm(t,c),b=Km(t,h),x=ek(t,m),$=tk(t,g);v===n&&b===s&&x===a&&$===o||i.push([v-n,b-s,x,$]),n=v,s=b,a=x,o=$}return i};function Kmt(t,e,i,r){const n=[],s=wIe(i,r);for(let a=0;a<e.length;a++){const o=s(t,e[a]);o&&o.length>=3&&n.push(o)}return n.length?n:null}function egt(t,e,i,r){const n=[],s=wIe(i,r);for(let a=0;a<e.length;a++){const o=s(t,e[a]);o&&o.length>=2&&n.push(o)}return n.length?n:null}function aA({scale:t,translate:e},i){return i*t[0]+e[0]}function oA({scale:t,translate:e},i){return i*t[1]+e[1]}function ik({scale:t,translate:e},i){return(i??0)*t[2]+e[2]}function rk({scale:t,translate:e},i){return i?i*t[3]+e[3]:0}function bX(t,e){return t&&e?ngt:t&&!e?igt:!t&&e?rgt:tgt}const tgt=(t,e)=>{const i=new Array(e.length);if(!e.length)return i;const r=e[0];let n=aA(t,r[0]),s=oA(t,r[1]);i[0]=[n,s];const{scale:a,originPosition:o}=t,l=a[0],c=o==="lowerLeft"?a[1]:-a[1];for(let h=1;h<e.length;h++){const[m,g]=e[h];n+=l*m,s+=c*g,i[h]=[n,s]}return i},igt=(t,e)=>{const i=new Array(e.length);if(!e.length)return i;const r=e[0];let n=aA(t,r[0]),s=oA(t,r[1]);i[0]=[n,s,ik(t,r[2])];const{scale:a,originPosition:o}=t,l=a[0],c=o==="lowerLeft"?a[1]:-a[1];for(let h=1;h<e.length;h++){const[m,g,v]=e[h];n+=l*m,s+=c*g,i[h]=[n,s,ik(t,v)]}return i},rgt=(t,e)=>{const i=new Array(e.length);if(!e.length)return i;const r=e[0];let n=aA(t,r[0]),s=oA(t,r[1]);i[0]=[n,s,rk(t,r[2])];const{scale:a,originPosition:o}=t,l=a[0],c=o==="lowerLeft"?a[1]:-a[1];for(let h=1;h<e.length;h++){const[m,g,v]=e[h];n+=l*m,s+=c*g,i[h]=[n,s,rk(t,v)]}return i},ngt=(t,e)=>{const i=new Array(e.length);if(!e.length)return i;const r=e[0];let n=aA(t,r[0]),s=oA(t,r[1]);i[0]=[n,s,ik(t,r[2]),rk(t,r[3])];const{scale:a,originPosition:o}=t,l=a[0],c=o==="lowerLeft"?a[1]:-a[1];for(let h=1;h<e.length;h++){const[m,g,v,b]=e[h];n+=l*m,s+=c*g,i[h]=[n,s,ik(t,v),rk(t,b)]}return i};function _Ie(t,e,i){const r=new Array(i.length);for(let n=0;n<i.length;n++)r[n]=e(t,i[n]);return r}function a3t(t,e,i){const r=C_(t);return e.x=Qm(r,i.x),e.y=Km(r,i.y),i.z!=null&&(e.z=ek(r,i.z)),i.m!=null&&(e.m=tk(r,i.m)),e}function o3t(t,e,i){const r=Kmt(C_(t),i.rings,i.hasZ,i.hasM);return r?(e.rings=r,e.hasZ=i.hasZ??!1,e.hasM=i.hasM??!1,e):null}function l3t(t,e,i){const r=egt(C_(t),i.paths,i.hasZ,i.hasM);return r?(e.paths=r,e.hasZ=i.hasZ??!1,e.hasM=i.hasM??!1,e):null}function sgt(t,e,i,r=(i==null?void 0:i.hasZ)??!1,n=(i==null?void 0:i.hasM)??!1){if(i!=null){const s=C_(t);e.points=bX(r,n)(s,i.points),e.hasZ=r,e.hasM=n}return e}function agt(t,e,i,r=(i==null?void 0:i.z)!=null,n=(i==null?void 0:i.m)!=null){if(i==null)return e;const s=C_(t);return e.x=aA(s,i.x),e.y=oA(s,i.y),r&&(e.z=ik(s,i.z)),n&&(e.m=rk(s,i.m)),e}function ogt(t,e,i,r=(i==null?void 0:i.hasZ)??!1,n=(i==null?void 0:i.hasM)??!1){if(i!=null){const s=C_(t);e.rings=_Ie(s,bX(r,n),i.rings),e.hasZ=r,e.hasM=n}return e}function lgt(t,e,i,r=(i==null?void 0:i.hasZ)??!1,n=(i==null?void 0:i.hasM)??!1){if(i!=null){const s=C_(t);e.paths=_Ie(s,bX(r,n),i.paths),e.hasZ=r,e.hasM=n}return e}function xIe(t,e,i,r,n,s){if(t==null)return null;const a=t.references("geometry")&&s?cgt(e,r,s):e,o=t.repurposeFeature(a,n);try{return t.evaluate(o,i)}catch(l){return Ie.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",l),null}}const eB=new Map;function cgt(t,e,i){const{transform:r,hasZ:n,hasM:s}=i;eB.has(e)||eB.set(e,ugt(e));const a=eB.get(e)(t.geometry,r,n,s);return{...t,geometry:a}}function ugt(t){const e={};switch(t){case"esriGeometryPoint":return(i,r,n,s)=>agt(r,e,i,n,s);case"esriGeometryPolygon":return(i,r,n,s)=>ogt(r,e,i,n,s);case"esriGeometryPolyline":return(i,r,n,s)=>lgt(r,e,i,n,s);case"esriGeometryMultipoint":return(i,r,n,s)=>sgt(r,e,i,n,s);default:return Ie.getLogger("esri.views.2d.support.arcadeOnDemand").error(new ae("mapview-arcade",`Unable to handle geometryType: ${t}`)),i=>i}}const c3t=Object.freeze(Object.defineProperty({__proto__:null,default:xIe},Symbol.toStringTag,{value:"Module"})),dgt=t=>{if(!t)return[0,0,0,0];const{r:e,g:i,b:r,a:n}=t;return[e,i,r,255*n]};var $r;let wX=($r=class{static findApplicableOverrides(e,i,r){if(e&&i){if(e.primitiveName){let n=!1;for(const s of r)if(s.primitiveName===e.primitiveName){n=!0;break}if(!n)for(const s of i)s.primitiveName===e.primitiveName&&r.push(s)}switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(e.effects)for(const n of e.effects)$r.findApplicableOverrides(n,i,r);if(e.symbolLayers)for(const n of e.symbolLayers)$r.findApplicableOverrides(n,i,r);break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":case"CIMSolidFill":case"CIMPictureFill":case"CIMHatchFill":case"CIMGradientFill":case"CIMVectorMarker":case"CIMCharacterMarker":case"CIMPictureMarker":if(e.effects)for(const n of e.effects)$r.findApplicableOverrides(n,i,r);if(e.markerPlacement&&$r.findApplicableOverrides(e.markerPlacement,i,r),e.type==="CIMVectorMarker"){if(e.markerGraphics)for(const n of e.markerGraphics)$r.findApplicableOverrides(n,i,r),$r.findApplicableOverrides(n.symbol,i,r)}else e.type==="CIMCharacterMarker"?$r.findApplicableOverrides(e.symbol,i,r):e.type==="CIMHatchFill"?$r.findApplicableOverrides(e.lineSymbol,i,r):e.type==="CIMPictureMarker"&&$r.findApplicableOverrides(e.animatedSymbolProperties,i,r)}}}static findEffectOverrides(e,i){if(!e)return null;if(e.type==="CIMGeometricEffectDashes"&&Mxe(e),!i||!e.primitiveName)return{type:"cim-effect-param",effect:e,overrides:[]};const r=Toe(e),n=e.primitiveName,s=[];for(const a of i)a.primitiveName===n&&s.push(Toe(a));return{type:"cim-effect-param",effect:r,overrides:CKe(s)}}static async resolveSymbolOverrides(e,i,r,n,s,a,o){if(!(e!=null&&e.symbol))return null;let{symbol:l,primitiveOverrides:c}=e;const h=!!c;if(!h&&!n)return l;l=he(l),c=he(c);let m=!0;if(i||(i={attributes:{}},m=!1),h){if(m||(c=c.filter(g=>{var v;return!((v=g.valueExpressionInfo)!=null&&v.expression.includes("$feature"))})),o||(c=c.filter(g=>{var v;return!((v=g.valueExpressionInfo)!=null&&v.expression.includes("$view"))})),c.length>0){const g=_Ke(i.attributes),v={spatialReference:r,fields:g,geometryType:s};await $r.createRenderExpressions(c,v),$r.evaluateOverrides(c,i,s??"esriGeometryPoint",a,o,new OE(g))}$r.applyOverrides(l,c)}return n&&$r.applyDictionaryTextOverrides(l,i,n,null),l}static async createRenderExpressions(e,i){const r=[];for(const n of e){const s=n.valueExpressionInfo;if(!s||$r._expressionToRenderExpression.has(s.expression))continue;const a=aKe(s.expression,i.spatialReference);r.push(a),a.then(o=>$r._expressionToRenderExpression.set(s.expression,o))}r.length>0&&await Promise.all(r)}static evaluateOverrides(e,i,r,n,s,a){const o={$view:{scale:s==null?void 0:s.scale}};for(const l of e){l.value&&typeof l.value=="object"&&Q$e(l.value)&&(l.propertyName==="Color"||l.propertyName==="StrokeColor")&&(l.value=dgt(l.value));const c=l.valueExpressionInfo;if(!c)continue;const h=$r._expressionToRenderExpression.get(c.expression);h&&(l.value=xIe(h,i,o,r,a,n))}}static applyDictionaryTextOverrides(e,i,r,n,s="Normal"){if(e!=null&&e.type)switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":case"CIMTextSymbol":{const a=e.symbolLayers;if(!a)return;for(const o of a)o&&o.type==="CIMVectorMarker"&&$r.applyDictionaryTextOverrides(o,i,r,n,e.type==="CIMTextSymbol"?e.textCase:s)}break;case"CIMVectorMarker":{const a=e.markerGraphics;if(!a)return;for(const o of a)o&&$r.applyDictionaryTextOverrides(o,i,r,n)}break;case"CIMMarkerGraphic":{const a=e.textString;if(a&&a.includes("[")){const o=pKe(a,r);e.textString=fKe(i,o,n,s)}}}}static applyOverrides(e,i,r,n){if(e.primitiveName){for(const s of i)if(s.primitiveName===e.primitiveName){const a=Kk(s.propertyName);if(n&&n.push({cim:e,nocapPropertyName:a,value:e[a]}),r){let o=!1;for(const l of r)l.primitiveName===e.primitiveName&&(o=!0);o||r.push(s)}s.value!=null&&(e[a]=s.value)}}switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(e.effects)for(const s of e.effects)$r.applyOverrides(s,i,r,n);if(e.symbolLayers)for(const s of e.symbolLayers)$r.applyOverrides(s,i,r,n);break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMSolidFill":case"CIMVectorMarker":if(e.effects)for(const s of e.effects)$r.applyOverrides(s,i,r,n);if(e.type==="CIMVectorMarker"&&e.markerGraphics)for(const s of e.markerGraphics)$r.applyOverrides(s,i,r,n),$r.applyOverrides(s.symbol,i,r,n)}}static restoreOverrides(e){for(const i of e)i.cim[i.nocapPropertyName]=i.value}static buildOverrideKey(e){let i="";for(const r of e)r.value!==void 0&&(i+=`${r.primitiveName}${r.propertyName}${JSON.stringify(r.value)}`);return i}static toValue(e,i){if(e==="DashTemplate")return i.split(" ").map(r=>Number(r));if(e==="Color"){const r=new Se(i).toRgba();return r[3]*=255,r}return i}},$r._expressionToRenderExpression=new Map,$r);const hgt=Object.freeze(Object.defineProperty({__proto__:null,OverrideHelper:wX},Symbol.toStringTag,{value:"Module"})),pgt=96/72;let $Ie=class{constructor(e){this._spatialReference=e,this._imageDataCanvas=null,this._cimResourceManager=new Wmt}get _canvas(){return this._imageDataCanvas||(this._imageDataCanvas=document.createElement("canvas")),this._imageDataCanvas}get resourceManager(){return this._cimResourceManager}async rasterizeCIMSymbolAsync(e,i,r,n,s,a,o,l,c,h){if(!e)return null;const{data:m}=e;if(!m||m.type!=="CIMSymbolReference"||!m.symbol)return null;const{symbol:g}=m;a||(a=rz(g));const v=await wX.resolveSymbolOverrides(m,i,this._spatialReference,s,a,o,l),b=this._cimResourceManager,x=[];so.fetchResources(v,b,x),so.fetchFonts(v,b,x),x.length>0&&await Promise.all(x);const{width:$,height:M}=r;let k=Lue(a,$,M,n,h);const A=so.getEnvelope(v,k,b);if(!A)return null;A.x===1/0&&(A.x=$+2),A.y===1/0&&(A.y=-M/2),A.width===-1/0&&(A.width=$),A.height===-1/0&&(A.height=M);let L=1,z=0,U=0;switch(g.type){case"CIMPointSymbol":case"CIMTextSymbol":{let X=1;A.width>$&&(X=$/A.width);let J=1;A.height>M&&(J=M/A.height),n==="preview"&&(A.width<$&&(X=$/A.width),A.height<M&&(J=M/A.height)),L=Math.min(X,J),z=A.x+A.width/2,U=A.y+A.height/2}break;case"CIMLineSymbol":if(h){U=A.y+A.height/2,z=A.x+A.width/2;const X=A.width-$,J=A.height-M;k={paths:jz(k.paths,{xmin:-1*A.width/2+X,xmax:A.width/2-X,ymin:-1*A.height/2+J,ymax:A.height/2-J,width:A.width-2*X,height:A.height-2*J})}}else{(c||A.height>M)&&(L=M/A.height),U=A.y+A.height/2;const X=A.x*L+$/2,J=(A.x+A.width)*L+$/2,Q=La(k)?k.paths:Un(k)?k.rings:null;if(Q===null)throw new Error("Bad geometry, can't rasterise symbol!");Q[0][0][0]-=X/L,Q[0][2][0]-=(J-$)/L}break;case"CIMPolygonSymbol":if(h){U=A.y+A.height/2,z=A.x+A.width/2;const X=A.width-$,J=A.height-M;k={paths:jz(k.rings,{xmin:-1*A.width/2+X,xmax:A.width/2-X,ymin:-1*A.height/2+J,ymax:A.height/2-J,width:A.width-2*X,height:A.height-2*J})}}else{z=A.x+A.width/2,U=A.y+A.height/2;const X=A.x*L+$/2,J=(A.x+A.width)*L+$/2,Q=A.y*L+M/2,le=(A.y+A.height)*L+M/2,{rings:ie}=k;X<0&&(ie[0][0][0]-=X,ie[0][3][0]-=X,ie[0][4][0]-=X),Q<0&&(ie[0][0][1]+=Q,ie[0][1][1]+=Q,ie[0][4][1]+=Q),J>$&&(ie[0][1][0]-=J-$,ie[0][2][0]-=J-$),le>M&&(ie[0][2][1]+=le-M,ie[0][3][1]+=le-M)}}const B={type:"cim",data:{type:"CIMSymbolReference",symbol:v}};return this.rasterize(B,$,M,z,U,L,a,1,k)}rasterize(e,i,r,n,s,a,o,l=0,c=null,h=window.devicePixelRatio||1){const{data:m}=e;if(!m||m.type!=="CIMSymbolReference"||!m.symbol)return null;const{symbol:g}=m,v=this._canvas,b=h*pgt;v.width=i*b,v.height=r*b,o||(o=rz(g)),c||(c=Lue(o,i,r,"legend")),v.width+=2*l,v.height+=2*l;const x=v.getContext("2d",{willReadFrequently:!0}),$=sa.createIdentity();return $.translate(-n,-s),$.scale(a*b,-a*b),$.translate(i*b/2+l,r*b/2+l),x.clearRect(0,0,v.width,v.height),new hIe(x,this._cimResourceManager,$,!0).drawSymbol(g,c),x.getImageData(0,0,v.width,v.height)}};function fgt(t,e,i,r){return e==="esriGeometryPolygon"?{rings:Sue(jz(t.rings,{xmin:0,ymin:0,width:i,height:r}),-1*i/2,-1*r/2)}:e==="esriGeometryPolyline"?{paths:Sue(jz(t.paths,{xmin:0,ymin:0,width:i,height:r}),-1*i/2,-1*r/2)}:null}function Lue(t,e,i,r,n){const a=-e/2+1,o=e/2-1,l=i/2-1,c=-i/2+1;if(n&&(t==="esriGeometryPolygon"||t==="esriGeometryPolyline")){const h=fgt(n,t,e,i);if(h)return h}switch(t){case"esriGeometryPoint":return{x:0,y:0};case"esriGeometryPolyline":return{paths:[[[a,0],[0,0],[o,0]]]};default:return r==="legend"?{rings:[[[a,l],[o,0],[o,c],[a,c],[a,l]]]}:{rings:[[[a,l],[o,l],[o,c],[a,c],[a,l]]]}}}const d3t=Object.freeze(Object.defineProperty({__proto__:null,CIMSymbolRasterizer:$Ie},Symbol.toStringTag,{value:"Module"})),IF=new $Ie(null),v3=Qi(22),Fue=Qi(120),tB=Qi(50),mgt=1;async function ggt(t,e,i){const r=e==null?void 0:e.size;let n=r!=null&&typeof r=="object"&&"width"in r?r.width:r,s=r!=null&&typeof r=="object"&&"height"in r?r.height:r;if(!n||!s)if(i==="esriGeometryPolygon")n=s=e.maxSize?Math.min(e.maxSize,v3):v3;else{const a=await _X(t,e,i);a&&(n=a.width,s=a.height),i==="esriGeometryPolyline"&&(n=e.maxSize?Math.min(e.maxSize,tB):tB),n=n!=null&&isFinite(n)?Math.min(n,Fue):v3,s=s!=null&&isFinite(s)?Math.max(Math.min(s,Fue),mgt):v3}return e.style==="legend"&&i==="esriGeometryPolyline"&&(n=tB),{width:n,height:s}}async function _X(t,e={},i){var c;const r=e.cimOptions||e;i??(i=r.geometryType||rz((c=t==null?void 0:t.data)==null?void 0:c.symbol));const{feature:n,fieldMap:s,viewParams:a}=r,o=await wX.resolveSymbolOverrides(t.data,n,null,s,i,null,a);if(!o)return null;(t=t.clone()).data={type:"CIMSymbolReference",symbol:o},t.data.primitiveOverrides=void 0;const l=[];return so.fetchResources(o,IF.resourceManager,l),so.fetchFonts(o,IF.resourceManager,l),l.length>0&&await Promise.all(l),so.getEnvelope(o,null,IF.resourceManager)}async function ygt(t,e={}){var U,B;const{node:i,opacity:r,symbolConfig:n}=e,s=n!=null&&typeof n=="object"&&"isSquareFill"in n&&n.isSquareFill,a=e.cimOptions||e,o=a.geometryType||rz((U=t==null?void 0:t.data)==null?void 0:U.symbol),l=await ggt(t,e,o),{feature:c,fieldMap:h}=a,m=e!=null&&e.geometry||s||o!=="esriGeometryPolygon"?"preview":"legend";let g=l;const v=l;if(e!=null&&e.geometry&&(o==="esriGeometryPolygon"||o==="esriGeometryPolyline")&&(Di(l.width)<200||Di(l.height)<200)){const J=l.width>l.height?Qi(200)*l.height/l.width:Qi(200);g={width:l.width>l.height?Qi(200):Qi(200)*l.width/l.height,height:J}}const b=await IF.rasterizeCIMSymbolAsync(t,c,g,m,h,o,null,a.viewParams,a.allowScalingUp,(B=e==null?void 0:e.geometry)==null?void 0:B.toJSON());if(!b)return null;const{width:x,height:$}=b,M=document.createElement("canvas");M.width=x,M.height=$,M.getContext("2d").putImageData(b,0,0);const k=Di(v.width),A=Di(v.height),L=new Image(k,A);L.src=M.toDataURL(),L.ariaLabel=e.ariaLabel??null,L.alt=e.ariaLabel??"",r!=null&&(L.style.opacity=`${r}`);let z=L;if(e.cssEffectFilter){const X={shape:{type:"image",x:0,y:0,width:k,height:A,src:L.src},fill:null,stroke:null,offset:[0,0]};z=iI([[X]],[k,A],e)}return i&&z&&i.appendChild(z),z}const vgt=Object.freeze(Object.defineProperty({__proto__:null,getCIMSymbolPreviewSize:_X,previewCIMSymbol:ygt},Symbol.toStringTag,{value:"Module"})),kG=30,AG=12,PG=24,SIe=[255,255,255],Uz=[200,200,200],H0=[128,128,128],bgt=20,wgt=5;function _gt(t){return t.declaredClass==="esri.symbols.SimpleMarkerSymbol"}function xgt(t){return t.declaredClass==="esri.symbols.PictureMarkerSymbol"}function $gt(t){return t.declaredClass==="esri.symbols.SimpleLineSymbol"}function Sgt(t){return t.declaredClass==="esri.symbols.TextSymbol"}function Tgt(t,e){const i=t.length-1;return t.map((r,n)=>O$e(r,n,i,e))}async function Igt(t,e,i,r,n,s,a){const o=e.legendOptions,l=o==null?void 0:o.customValues,c=a||await Egt(t,i),h=e.stops,m=!!c,g=!!l,v=e.minSize!=null&&e.maxSize!=null,b=h&&h.length>1,x=!!e.target;if(!m||!g&&!(v||b&&!x))return;const $=O5(c);let M=!1,k=null,A=null;k=$&&!b?uz([e.minDataValue,e.maxDataValue]):l??await Agt(e,c,r,n==null?void 0:n.type);const L=t==null?void 0:t.authoringInfo,z=(L==null?void 0:L.type)==="univariate-color-size",U=z&&(L==null?void 0:L.univariateTheme)==="above-and-below",B=!!Sp(t,"reference-size"),X=!!Sp(t,"spike");if(!k&&b&&(k=h.map(re=>re.value),M=h.some(re=>!!re.label),t.type==="flow"&&(k=uz(k)),M&&(A=h.map(re=>re.label))),$&&k!=null&&(k==null?void 0:k.length)>2&&!U&&(k=[k[0],k[k.length-1]]),!k)return null;z&&(k==null?void 0:k.length)!==5&&(k=MIe({minSize:k[0],maxSize:k[k.length-1]}));const J=$?Mgt(t,k):null,Q=Hrt(c),le=M?null:Tgt(k,s);return(await Promise.all(k.map(async(re,se)=>{let Te=$?J[se]:await c$(e,c,re,r,n==null?void 0:n.type),ne=Te;B&&(Te*=PG/e.maxSize||1,ne=PG);const _e=Lgt(c,Te,t,se);return X&&_e.type==="cim"&&(ne=await _X(_e)),{value:re,symbol:_e,label:M?A[se]:le[se],size:ne,outlineSize:Q}}))).reverse()}function Mgt(t,e){const i=t==null?void 0:t.authoringInfo,r=(i==null?void 0:i.type)==="univariate-color-size";let n=[AG,kG];if(r){const s=e[0],a=e[e.length-1],o=AG,l=kG;n=e.map(c=>o+(c-s)/(a-s)*(l-o))}return r&&(i==null?void 0:i.univariateTheme)==="below"&&n.reverse(),n}function Cgt(t,e){var a;const i=t.classBreakInfos,r=i.length,n=r<2||!(e>=2)?i[0].symbol.clone():i[r-1].symbol.clone();return((a=t.visualVariables)==null?void 0:a.some(o=>o.type==="color"))&&(n.type.includes("3d")?TIe(n):IIe(n)),n}async function Egt(t,e){var n,s,a,o,l;if(t.type==="flow")return L$e(t,e);if(t.type==="pie-chart")return new tn({color:null,outline:(n=t.outline)!=null&&n.width?t.outline:new xn});let i=null,r=null;if(t.type==="simple")i=t.symbol;else if(t.type==="class-breaks"){const c=t.classBreakInfos;i=c&&c[0]&&c[0].symbol,r=c.length>1}else if(t.type==="unique-value"){const c=t.uniqueValueInfos;i=(s=c==null?void 0:c[0])==null?void 0:s.symbol,r=c!=null&&c.length>1}if(!i||kgt(i))return null;if(i=i.clone(),e||r)if(i.type.includes("3d"))TIe(i);else if(Sp(t,"reference-size")&&i.type==="cim")uX(i,{color:e??(t.type!=="class-breaks"?new Se(Uz):null)});else if(Sp(t,"spike")&&i.type==="cim"){const c=new Se(Uz),h=new Se(H0),m=((a=i.data.symbol)==null?void 0:a.type)==="CIMPointSymbol"?i.data.symbol:null,g=!!((l=(o=m==null?void 0:m.symbolLayers)==null?void 0:o.find(({type:x})=>x==="CIMSolidStroke"))!=null&&l.colorLocked);let v,b=e??void 0;if(b){const x=aSe(b),$=DY();(!$&&x>225||$&&x<25)&&(b=c,v=g?h:c)}else b=c,v=g?h:c;NTe(i,{color:b,strokeColor:v})}else IIe(i);return i}function kgt(t){var e;return qd(t)?((e=t.symbolLayers)==null?void 0:e.some(i=>(i==null?void 0:i.type)==="fill"))??!1:(t==null?void 0:t.type.includes("fill"))??!1}function TIe(t){t.type==="line-3d"?t.symbolLayers.forEach(e=>{e.material={color:H0}}):t.symbolLayers.forEach(e=>{var i;e.type!=="icon"||(i=e.resource)!=null&&i.href?e.material={color:Uz}:(e.material={color:SIe},e.outline={color:H0,size:1.5})})}function IIe(t){var i,r;const e=DY();t.type==="cim"?S$e(t,new Se(Uz)):t.type.includes("line")?t.color=H0:(t.color=e?H0:SIe,t.type==="simple-marker"&&(t.outline?((r=(i=t.outline)==null?void 0:i.color)==null?void 0:r.toHex())==="#ffffff"&&(t.outline.color=H0):t.outline={color:H0,width:1.5}))}async function Agt(t,e,i,r){const n=(await de(async()=>{const{getSizeRangeAtScale:o}=await Promise.resolve().then(()=>$_);return{getSizeRangeAtScale:o}},void 0)).getSizeRangeAtScale(t,i,r),s=n&&MIe(n);if(!n||!s)return;let a=s.map(o=>Pgt(o,t,n));a=uz(a);for(let o=1;o<a.length-1;o++){const l=await Ogt(t,e,a[o],a[o-1],i,r);l&&(a[o]=l[0],s[o]=l[1])}return a}function MIe(t){const e=t.minSize,i=t.maxSize,r=wgt,n=(i-e)/(r-1),s=[];for(let a=0;a<r;a++)s.push(e+n*a);return s}function Pgt(t,e,i){const r=i.minSize,n=i.maxSize,s=e.minDataValue,a=e.maxDataValue;let o;return t<=r?o=s:t>=n?o=a:o=(t-r)/(n-r)*(a-s)+s,o}async function Ogt(t,e,i,r,n,s){const a=await c$(t,e,i,n,s),o=await c$(t,e,r,n,s),l=cz(i),c=l.fractional,h=bgt;let m=l.integer,g=null,v=null;i>0&&i<1&&(g=10**c,m=cz(i*=g).integer);for(let b=m-1;b>=0;b--){const x=10**b;let $=Math.floor(i/x)*x,M=Math.ceil(i/x)*x;g!=null&&($/=g,M/=g);let k=($+M)/2;[,k]=uz([$,k,M],{indexes:[1]});const A=await c$(t,e,$,n,s),L=await c$(t,e,M,n,s),z=await c$(t,e,k,n,s),U=cF(a,A,o,null),B=cF(a,L,o,null),X=cF(a,z,o,null);let J=U.previous<=h,Q=B.previous<=h;if(J&&Q&&(U.previous<=B.previous?(J=!0,Q=!1):(Q=!0,J=!1)),J?v=[$,A]:Q?v=[M,L]:X.previous<=h&&(v=[k,z]),v)break}return v}async function c$(t,e,i,r,n){const{getSize:s}=await de(()=>Promise.resolve().then(()=>$_),void 0);return s(t,i,{scale:r,view:n,shape:e.type==="simple-marker"?e.style:null})}function Lgt(t,e,i,r){var s,a;((s=i==null?void 0:i.authoringInfo)==null?void 0:s.type)==="univariate-color-size"&&((a=i==null?void 0:i.authoringInfo)==null?void 0:a.univariateTheme)==="above-and-below"&&i.type==="class-breaks"&&(t=Cgt(i,r));const n=t.clone();if(qd(n))O5(n)||n.symbolLayers.forEach(o=>{o.type!=="fill"&&(o.size=e)});else if(_gt(n))n.size=e;else if(xgt(n)){const o=n.width,l=n.height;n.height=e,n.width=e*(o/l)}else $gt(n)?n.width=e:Sgt(n)?n.font&&(n.font.size=e):n.type==="cim"&&Sp(i,"reference-size")?uX(n,{innerDotSize:e,outerRingSize:PG}):n.type==="cim"&&Sp(i,"spike")&&NTe(n,{defaultHeight:e,primitiveOverrides:null});return n}function Fgt(t){const i=Math.floor(Math.log10(Math.abs(t)))+1,r=i<4||i>6?4:i,n=1e6,s=Math.abs(t)>=n?"compact":"standard";return or(t,{notation:s,minimumSignificantDigits:2,maximumSignificantDigits:r})}const Rue=16,Rgt="https://utility.arcgis.com/sharing/tools/legend",zgt="esri.layers.ImageryLayer",Ngt="esri.layers.ImageryTileLayer",Dgt="esri.layers.WCSLayer",b3=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i,jgt=new jt({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),w3=new tn({size:6,outline:{color:[128,128,128,.5],width:.5}}),Vgt=new no({style:"solid"});function OG(t){return t.type==="flow"}function CIe(t){return t.type==="vector-field"}function EIe(t){return t.type==="raster-colormap"}function kIe(t){return t.type==="raster-stretch"}function AIe(t){return t.type==="raster-shaded-relief"}function u$(t){return t.declaredClass==="esri.renderers.SimpleRenderer"}function $0(t){return t.declaredClass==="esri.renderers.ClassBreaksRenderer"}function S0(t){return t.declaredClass==="esri.renderers.UniqueValueRenderer"}function PIe(t){return t.declaredClass==="esri.renderers.HeatmapRenderer"}function Ugt(t){return xX(t)||$X(t)||SX(t)||Bgt(t)}function Bgt(t){return t.declaredClass==="esri.renderers.PointCloudRGBRenderer"}function xX(t){return t.declaredClass==="esri.renderers.PointCloudClassBreaksRenderer"}function $X(t){return t.declaredClass==="esri.renderers.PointCloudStretchRenderer"}function SX(t){return t.declaredClass==="esri.renderers.PointCloudUniqueValueRenderer"}function OIe(t){return t.declaredClass==="esri.renderers.DotDensityRenderer"}function LIe(t){return t.declaredClass==="esri.renderers.PieChartRenderer"}function qgt(t,e){return u$(t)||$0(t)||S0(t)||PIe(t)||OIe(t)||LIe(t)?e.type==="2d"||RTe(t):kIe(t)||EIe(t)||AIe(t)||xX(t)||$X(t)||SX(t)||CIe(t)||OG(t)}function Hgt(t){return t.declaredClass==="esri.layers.BuildingSceneLayer"}function iB(t){return t.declaredClass==="esri.layers.SubtypeGroupLayer"}function Ggt(t){return t.declaredClass==="esri.layers.VoxelLayer"}function Wgt(t){return t.declaredClass==="esri.layers.WMSLayer"}function Zgt(t){return t.declaredClass==="esri.layers.WMTSLayer"}function rB(t){return t.declaredClass==="esri.layers.MapImageLayer"}function zue(t){return t.declaredClass==="esri.layers.TileLayer"}function Y1(t){return t.declaredClass===zgt}function _3(t){return t.declaredClass===Ngt}function Ygt(t){return t.declaredClass===Dgt}function Jgt(t){return t.type==="stretch-ramp"}function Xgt(t){const e="authoringInfo"in t?t==null?void 0:t.authoringInfo:null;return(e==null?void 0:e.type)==="univariate-color-size"}function Qgt(t){const e="authoringInfo"in t?t==null?void 0:t.authoringInfo:null;return(e==null?void 0:e.type)==="univariate-color-size"&&(e==null?void 0:e.univariateTheme)==="above-and-below"}function Nue(t){return"sublayers"in t}function Due(t){return t&&"symbol"in t}function Kgt(t,e){const{field:i,field2:r,field3:n,fieldDelimiter:s,valueExpression:a}=t;if(!i)return null;const o=!i&&!a||!r&&!n?[e]:e==null?void 0:e.toString().split(s||""),l=i?{[i]:o==null?void 0:o[0]}:null;return l&&(r&&(l[r]=o==null?void 0:o[1]),n&&(l[n]=o==null?void 0:o[2])),l}const eyt=new tn({style:"path",path:"M10,5 L5,0 0,5 M5,0 L5,15",size:15,outline:{width:1,color:[85,85,85,1]}});let J1={};const nB=new WeakMap;let sn=class extends et{constructor(t){super(t),this._hasColorRamp=!1,this._hasOpacityRamp=!1,this._hasSizeRamp=!1,this._loading=!1,this._webStyleSymbolCache=new Map,this._dotDensityUrlCache=new Map,this._scaleDrivenSizeVariable=null,this._clusterSizeVariable=null,this._layerDefinitionExpression=null,this._layerDefinitionExpressionClause=null,this._layerDisplayFilter=null,this._layerDisplayFilterClause=null,this.children=new Ue,this.layerView=null,this.layer=null,this.legendElements=[],this.parent=null,this.hideLayersNotInCurrentView=!1,this.keepCacheOnDestroy=!1,this.respectLayerDefinitionExpression=!1,this.respectLayerVisibility=!0,this.sublayerIds=[],this.title=null,this.view=null}initialize(){const t=()=>this.notifyChange("ready");this.addHandles([ca(()=>this.children,"change",e=>{const{added:i,removed:r}=e;i.forEach(n=>{const s=`activeLayerInfo-ready-watcher-${n.layer.uid}`;this.addHandles(be(()=>n.ready,t,Ft),s)}),r.forEach(n=>this.removeHandles(n.layer.uid)),t()})]),this.keepCacheOnDestroy||(J1={})}destroy(){this._webStyleSymbolCache=null,this._dotDensityUrlCache=null,this._scaleDrivenSizeVariable=null,this.keepCacheOnDestroy||(J1=null),this._layerDefinitionExpressionClause=null}get cssEffectFilter(){const{layer:t,scale:e}=this,i="effect"in t?t.effect:null;if(!i)return null;const r=new dd({effect:i});return r.endTransition(),r.scale=e,ant(r)}get loading(){return this.children.length>0?this.children.some(t=>t.loading):this._loading}get opacity(){var n;const t=this.layer.opacity,e=(n=this.parent)==null?void 0:n.opacity,i=this.layer.parent,r=i&&"uid"in i?this._getParentLayerOpacity(i):null;return e!=null?e*t:r!=null?r*t:t}get ready(){return this.layer===null||(this.children.length>0?this._isGroupActive():this.legendElements.length>0)}get scale(){var t;return((t=this.view)==null?void 0:t.scale)??0}get isScaleDriven(){const t=this.layer;if(t===null)return!1;if("effect"in t&&t.effect&&Array.isArray(t.effect))return!0;if("featureReduction"in t&&t.featureReduction){if(t.featureReduction.type==="cluster")return!0;if(t.featureReduction.type==="binning"&&"renderer"in t.featureReduction&&t.featureReduction.renderer)return this._isRendererScaleDriven(t.featureReduction.renderer)}return"renderer"in t&&t.renderer?!!("displayFilterInfo"in t&&t.displayFilterInfo&&S0(t.renderer))||this._isRendererScaleDriven(t.renderer):this._isLayerScaleDriven(this.layer)}get version(){return this._get("version")+1}async buildLegendElementsForFeatureCollections(t){if(this._loading=!0,!(!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView()))return this.legendElements=[],this._loading=!1,void this.notifyChange("ready");const e=Array.from(t,i=>{var r;if(iY(i))return this._getRendererLegendElements(i.renderer,{title:i.title});if((r=i.featureSet)!=null&&r.features.length){const n=i.layerDefinition,s=n==null?void 0:n.drawingInfo,a=s&&Tet(s.renderer),o=jgt.read(n.geometryType);return a?this._getRendererLegendElements(a,{title:i.name,geometryType:o}):(Ie.getLogger(this).warn("drawingInfo not available!"),null)}return null});try{const i=[],r=await Promise.allSettled(e);for(const n of r)if(n.status==="fulfilled")for(const s of n.value??[])i.push(s);this.legendElements=i}catch(i){Ie.getLogger(this).warn("error while building legend for layer!",i)}finally{this._loading=!1,this.notifyChange("ready")}}async buildLegendElementsForRenderer(t){try{this._loading=!0;const e=!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView();this.legendElements=e?await this._getRendererLegendElements(t):[]}catch(e){Ie.getLogger(this).warn("error while building legend for layer!",e)}finally{this._loading=!1,this.notifyChange("ready")}}async buildLegendElementsForFeatureReduction(t){try{this._loading=!0,await this._waitForLayerViewUpdate(this.layerView);const e=!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView();this.legendElements=e?await this._getLegendElementsForFeatureReduction(t):[]}catch(e){Ie.getLogger(this).warn("error while building legend for layer!",e)}finally{this._loading=!1,this.notifyChange("ready")}}async buildLegendElementsForTools(){var e,i;this._loading=!0;const t=this.layer;if(Ggt(t))await this._constructLegendElementsForVoxelLayer();else if(Zgt(t))this._constructLegendElementsForWMTSlayer();else if(Wgt(t))await this._constructLegendElementsForWMSSublayers();else if(Hgt(t))await this._constructLegendElementsForBuildingSceneLayer();else if(rB(t)||zue(t)||iB(t))await this._constructLegendElementsForSublayers();else{this.removeHandles("imageryLayers-watcher");let r="default";if(Y1(t)){const n=t;r=(((e=n==null?void 0:n.rasterFunction)==null?void 0:e.functionName)||"default")+"_"+((i=t.bandIds)!=null&&i.length?t.bandIds.join(""):"###")}if(_3(t)||t.type==="link-chart")return;await this._getLegendLayers(`${t.uid}-${r}`).then(async n=>{this.legendElements=[];const s=n.map(async a=>{if(Y1(t)){const l=be(()=>[t.rasterFunction,t.bandIds],()=>Od(async()=>{J1.default=null,t.renderer?await this.buildLegendElementsForRenderer(t.renderer):await this.buildLegendElementsForTools()})());this.addHandles(l,"imageryLayers-watcher")}const o=this._generateSymbolTableElementForLegendLayer(a);o!=null&&o.infos.length&&(Y1(t)&&(o.title=t.title),this.legendElements.push(o))});await Promise.allSettled(s)}).catch(n=>{Ie.getLogger(this).warn("Request to server for legend has failed!",n)})}this._loading=!1,this.notifyChange("ready")}async _isLayerInCurrentView(t){return this._checkFeatureCountForExpression(t,this.view.extent)}_getParentLayerOpacity(t){let e=1;const i=t.parent;return i&&"uid"in i&&(e=this._getParentLayerOpacity(i)),t.opacity*e}_isGroupActive(){return this.children.some(t=>t.ready)}_isRendererScaleDriven(t){if(t.type==="dot-density")return!0;const e="valueExpression"in t?t.valueExpression:null;if(b3.test(e))return!0;const i="visualVariables"in t?t.visualVariables:null;return!!(i!=null&&i.some(r=>this._isScaleDrivenSizeVariable(r)))||this._hasScaleDrivenSymbols(t)}_hasScaleDrivenSymbols(t){var e;switch(t.type){case"simple":return this._isScaleDrivenSymbol(t.symbol);case"class-breaks":return this._isScaleDrivenSymbol(t.defaultSymbol)||t.classBreakInfos.some(i=>this._isScaleDrivenSymbol(i.symbol));case"unique-value":return this._isScaleDrivenSymbol(t.defaultSymbol)||!!((e=t.uniqueValueInfos)!=null&&e.some(i=>this._isScaleDrivenSymbol(i.symbol)))}return!1}_isScaleDrivenSymbol(t){if((t==null?void 0:t.type)==="cim"){const{primitiveOverrides:e,minScale:i,maxScale:r}=t.data,n=(e==null?void 0:e.some(s=>{var a;return(((a=s.valueExpressionInfo)==null?void 0:a.expression)||"").includes("$view.scale")}))??!1;return i!=null||r!=null||n}return!1}_isScaleDrivenSizeVariable(t){if(t&&t.type!=="size")return!1;const e=t,i=e.minSize,r=e.maxSize;return!(typeof i!="object"||!i||!this._isScaleDrivenSizeVariable(i))||!(typeof r!="object"||!r||!this._isScaleDrivenSizeVariable(r))||b3.test(e.valueExpression)}_isLayerScaleDriven(t){if("minScale"in t&&t.minScale>0||"maxScale"in t&&t.maxScale>0)return!0;if("sublayers"in t&&t.sublayers)return t.sublayers.some(i=>this._isLayerScaleDriven(i));const e=t.parent;if(t.loaded===!1&&e&&rB(e)&&"source"in t&&t.source&&t.source.type==="map-layer"){for(const i of e.sourceJSON.layers??[])if(i.id===t.source.mapLayerId&&(i.minScale>0||i.maxScale>0))return!0}return!1}async _constructLegendElementsForVoxelLayer(){var r;this._loading=!0,this.legendElements=[],this.removeHandles("voxel-style-watcher"),this.removeHandles("voxel-current-variable");const t=this.layer;this.addHandles(be(()=>t.currentVariableId,()=>this._constructLegendElementsForVoxelLayer()),"voxel-current-variable"),this.addHandles(be(()=>t.getVariableStyles(),()=>this._constructLegendElementsForVoxelLayer()),"voxel-style-watcher");const e=t.getVariableStyle(null),i=[];if(e){if((r=e.uniqueValues)!=null&&r.length){const n=[];e.uniqueValues.forEach(s=>{s.enabled&&n.push({label:s.label||`${s.value}`,value:s.value,symbol:new no({color:s.color,outline:null})})}),n.length&&i.push({type:"symbol-table",title:e.label,infos:n})}else if(e.transferFunction){const{colorStops:n,stretchRange:s}=e.transferFunction,a=n.toArray().reverse(),o=s.map((c,h)=>`${h===0?A$e:P$e} ${Fgt(c)}`).reverse(),l=a.map(c=>({color:c.color,value:null,label:null}));l[0].label=o[0],l[l.length-1].label=o[1],i.push({type:"color-ramp",title:e.label,infos:l,preview:w0(a.map(c=>c.color))})}}await this._generatePreviewsForLegendElements(i,{opacity:t.opacity}),this.legendElements=i,this._loading=!1,this.notifyChange("ready")}_constructLegendElementsForWMTSlayer(){var i,r;this._loading=!0,this.legendElements=[],this.removeHandles("wmts-activeLayer-watcher");const t=this.layer.activeLayer;this.addHandles(be(()=>{const{layer:n}=this;return n&&"activeLayer"in n&&n.activeLayer},()=>this._constructLegendElementsForWMTSlayer()),"wmts-activeLayer-watcher");const e=t.styleId?(r=(i=t.styles)==null?void 0:i.find(({id:n})=>n===t.styleId))==null?void 0:r.legendUrl:void 0;e&&(this.legendElements=[{type:"symbol-table",title:t.title,infos:[{src:e,opacity:this.opacity}]}]),this._loading=!1,this.notifyChange("ready")}async _constructLegendElementsForWMSSublayers(){this._loading=!0,this.legendElements=[],this.removeHandles("wms-sublayers-watcher");const t=this.layer;let e=null;(t.customParameters||t.customLayerParameters)&&(e={...t.customParameters,...t.customLayerParameters}),this.addHandles(be(()=>{const{layer:i}=this;return i&&"sublayers"in i&&i.sublayers},()=>this._constructLegendElementsForWMSSublayers()),"wms-sublayers-watcher"),this.legendElements=await this._generateLegendElementsForWMSSublayers(t.sublayers,e),this._loading=!1,this.notifyChange("ready")}async _generateLegendElementsForWMSSublayers(t,e){var a,o;const i=this.layer,r=[];this.addHandles(t.on("change",()=>this._constructLegendElementsForWMSSublayers()),"wms-sublayers-watcher");const n=((o=(a=this.sublayerIds)==null?void 0:a.map(l=>i.findSublayerById(l)))==null?void 0:o.filter(ln))??[],s=n.length?n:t.toArray();for(const l of s){const c=be(()=>[l.title,l.visible,l.legendEnabled],()=>this._constructLegendElementsForWMSSublayers());if(this.addHandles(c,"wms-sublayers-watcher"),!this.respectLayerVisibility||l.visible&&l.legendEnabled){const h=await this._generateSymbolTableElementForWMSSublayer(l,e);h!=null&&h.infos.length&&r.unshift(h)}}return r}async _generateSymbolTableElementForWMSSublayer(t,e){if(!t.legendUrl&&t.sublayers){const i=(await this._generateLegendElementsForWMSSublayers(t.sublayers,e)).filter(r=>r);return{type:"symbol-table",title:t.title,infos:i}}return this._generateSymbolTableElementForLegendUrl(t,e)}async _generateSymbolTableElementForLegendUrl(t,e){var a;let i=t.legendUrl;if(!i)return;const r={type:"symbol-table",title:t.title||t.name||String(t.id??""),infos:[]};e&&(i=j3(i,e));let n=null;const s=(a=t.layer)==null?void 0:a.opacity;try{n=(await mi(i,{responseType:"image"})).data,n&&(n.style.opacity=s)}catch{}return r.infos.push({src:i,preview:n,opacity:s}),r}_getLegendLayers(t,e){const i=J1&&J1[t];return i?Promise.resolve(i):this._legendRequest(e).then(r=>{const n=r.layers;return J1[t]=n,n})}_legendRequest(t){var n;const e=this.layer;let i={f:"json",dynamicLayers:t};if(Y1(e)){const s=e.exportImageServiceParameters.rasterFunction;if(s&&(i.renderingRule=JSON.stringify(((n=s.functionDefinition)==null?void 0:n.toJSON())||s.toJSON())),e.bandIds&&(i.bandIds=e.bandIds.join()),e.raster||e.viewId||e.customParameters){const{raster:a,viewId:o,customParameters:l}=e;i={raster:a,viewId:o,...i,...l}}}let r=e.url.replace(/(\/)+$/,"");if("version"in e&&+e.version>=10.01){const s=r.indexOf("?");s>-1?r=r.slice(0,s)+"/legend"+r.slice(s):r+="/legend"}else{const s=r.toLowerCase().indexOf("/rest/"),a=s===-1?r:r.slice(0,s)+r.slice(s+5);r=Rgt+"?soapUrl="+encodeURI(a)+"&returnbytes=true"}return mi(r,{query:i}).then(s=>s.data)}async _constructLegendElementsForBuildingSceneLayer(){this._loading=!0,this.legendElements=[],this.removeHandles("sublayers-watcher");const t=this.layer;this.addHandles(be(()=>t.sublayers,()=>this._constructLegendElementsForBuildingSceneLayer()),"sublayers-watcher");try{this.legendElements=await this._generateLegendElementsForBuildingSublayers(t.sublayers,this.opacity)}catch(e){Ie.getLogger(this).warn("Request to server for legend has failed!",e)}finally{this._loading=!1,this.notifyChange("ready")}}async _generateLegendElementsForBuildingSublayers(t,e){let i=[];this.addHandles(t.on("change",()=>this._constructLegendElementsForBuildingSceneLayer()),"sublayers-watcher");const r=t.toArray();for(const n of r){const s=be(()=>["renderer"in n&&n.renderer,n.opacity,n.title,n.visible],()=>this._constructLegendElementsForBuildingSceneLayer());if(this.addHandles(s,"sublayers-watcher"),!this.respectLayerVisibility||n.visible){const a=(n==null?void 0:n.opacity)!=null?n.opacity:null,o=a!=null?a*e:e;if(n.type==="building-group"){const l={type:"symbol-table",title:n.title,infos:[]},c=await this._generateLegendElementsForBuildingSublayers(n.sublayers,o);l.infos.push(...c),i=[l,...i]}else n.renderer&&(i=[...await this._getRendererLegendElements(n.renderer,{title:n.title,opacity:o,sublayer:n}),...i])}}return i.filter(n=>!!n&&(!("infos"in n)||!n.infos||n.infos.length>0))}async _constructLegendElementsForSublayers(){this._loading=!0,this.removeHandles("sublayers-watcher");const t=this.layer;if(!(rB(t)||zue(t)||iB(t))||this.hideLayersNotInCurrentView&&!await this._isLayerInCurrentView())return this.legendElements=[],this._loading=!1,void this.notifyChange("ready");this.addHandles(be(()=>t.sublayers,()=>this._constructLegendElementsForSublayers),"sublayers-watcher");try{this.legendElements=await this._generateLegendElementsForSublayers(t.sublayers,this.opacity)}catch(e){Ie.getLogger(this).warn("Request to server for legend has failed!",e)}finally{this._loading=!1,this.notifyChange("ready")}}async _generateLegendElementsForSublayers(t,e,i){const r=this.layer;let n=[];this.addHandles(t.on("change",()=>this._constructLegendElementsForSublayers()),"sublayers-watcher");let s=t.toArray();!i&&this.sublayerIds&&this.sublayerIds.length&&(s=iB(r)?this.sublayerIds.map(a=>r.findSublayerForSubtypeCode(a)).filter(ln):this.sublayerIds.map(a=>r.findSublayerById(a)).filter(ln));for(const a of s){const o=be(()=>[a.renderer,a.opacity,a.title,a.visible,a.legendEnabled],()=>this._constructLegendElementsForSublayers());this.addHandles(o,"sublayers-watcher");const l=a.createQuery().where,c=!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView(l),h=!this.respectLayerVisibility||a.visible&&a.legendEnabled&&this._isSublayerInScale(a);if(c&&h){const m=(a==null?void 0:a.opacity)!=null?a.opacity:null,g=m!=null?m*e:e,v=!Nue(a)||a.originIdOf("renderer")>2&&!a.sublayers;if(a.renderer&&v)await a.load(),n=[...await this._getRendererLegendElements(a.renderer,{title:a.title,opacity:g,sublayer:a}),...n];else if(Nue(a)){const b=await this._generateSymbolTableElementForSublayer(a,g,i);b&&n.unshift(b)}}}return n.filter(a=>!!a&&(!("infos"in a)||!a.infos||a.infos.length>0))}async _generateSymbolTableElementForSublayer(t,e,i){if(!i){i=new Map;const n=this.layer,s=t.source;let a=null;if(!(!s||s.type==="map-layer"&&s.mapLayerId===t.id&&(!s.gdbVersion||s.gdbVersion===("gdbVersion"in n&&n.gdbVersion)))||t.originIdOf("renderer")>2||t.originIdOf("labelingInfo")>2||t.originIdOf("labelsVisible")>2){const l=new eu({layer:this.layer});a=l.hasDynamicLayers?l.dynamicLayers:null,l.destroy()}const o=a||`${n.uid}-default`;(await this._getLegendLayers(o,a)).forEach(l=>i.set(l.layerId,l))}const r=i.get(t.id);if((!r||r!=null&&r.subLayerIds&&r.defaultVisibility)&&t.sublayers){const n=await this._generateLegendElementsForSublayers(t.sublayers,e,i);return{type:"symbol-table",title:t.title,infos:n}}return this._generateSymbolTableElementForLegendLayer(r,t,e)}_generateSymbolTableElementForLegendLayer(t,e,i){if(!(t!=null&&t.legend)||this.respectLayerVisibility&&!this._isLegendLayerInScale(t,e))return null;const r=e==null?void 0:e.renderer;let n=(e==null?void 0:e.title)||t.layerName;if(r&&(!e||(e==null?void 0:e.originIdOf("renderer"))>2)){const o=(e==null?void 0:e.title)||this._getRendererTitle(r,e);o&&(n&&typeof o!="string"&&"title"in o&&(o.title=n),n=o)}const s={type:"symbol-table",title:n,legendType:t.legendType||null,infos:[]},a=e?this._sanitizeLegendForSublayer(t.legend.slice(),e):t.legend;return t.legendGroups&&t.legendGroups.length>0?t.legendGroups.forEach(o=>{var c;const l={type:"symbol-table",title:o.heading,legendType:t.legendType||null,infos:this._generateSymbolTableElementInfosForLegendLayer(a.filter(h=>h.groupId===o.id),t.layerId,o.heading||s.title||(e==null?void 0:e.title),i)};((c=l.infos)==null?void 0:c.length)>0&&s.infos.push(l)}):s.infos=this._generateSymbolTableElementInfosForLegendLayer(a,t.layerId,s.title||(e==null?void 0:e.title),i),s.infos.length>0?s:null}_generateSymbolTableElementInfosForLegendLayer(t,e,i,r){return t.map(n=>{let s=n.url;if(n.imageData&&n.imageData.length>0)s=`data:image/png;base64,${n.imageData}`;else{if(s.startsWith("http"))return null;s=h3e(`${this.layer.url}/${e}/images/${s}`)}let a=n.label;return a==="<all other values>"&&(a="others"),{previewAriaLabel:a||i,label:a,src:s,opacity:r??this.opacity,width:n.width,height:n.height}}).filter(ln)}_isSublayerInScale(t){const e=t.minScale||0,i=t.maxScale||0;return!(e>0&&e<this.scale||i>this.scale)}_isLegendLayerInScale(t,e){const i=e||this.layer;let r=null,n=null,s=!0;return!i.minScale&&i.minScale!==0||!i.maxScale&&i.maxScale!==0?(t.minScale===0&&i.tileInfo&&(r=i.tileInfo.lods[0].scale),t.maxScale===0&&i.tileInfo&&(n=i.tileInfo.lods[i.tileInfo.lods.length-1].scale)):(r=Math.min(i.minScale,t.minScale)||i.minScale||t.minScale,n=Math.max(i.maxScale,t.maxScale)),(r>0&&r<this.scale||n>this.scale)&&(s=!1),s}_sanitizeLegendForSublayer(t,e){var a;if("version"in this.layer&&+this.layer.version<10.1||t.length===0)return t;const i=e.renderer,r=t.some(o=>o.values);let n=0,s=null;return r&&t.some((o,l)=>(o.values||(n=l,s=o,s.label||(s.label="others")),s!=null)),i?i.type==="unique-value"?s&&(t.splice(n,1),t.push(s)):i.type==="class-breaks"&&(s&&t.splice(n,1),(a=i.legendOptions)!=null&&a.order||t.reverse(),s&&t.push(s)):s&&(t.splice(n,1),t.push(s)),t}async _getRendererLegendElements(t,e={}){if(!qgt(t,this.view))return Ie.getLogger(this).warn(`Renderer of type '${t.type}' not supported!`),[];if(Ugt(t))return this._constructPointCloudRendererLegendElements(t,e);if(OIe(t))return this._constructDotDensityRendererLegendElements(t);const i=await this._loadRenderer(t);return LIe(i)?this._constructPieChartRendererLegendElements(i):this._constructRendererLegendElements(i,e)}async _getLegendElementsForFeatureReduction(t){let e=null;return t.type==="binning"?e=t.renderer:t.type==="cluster"&&(e=this._getClusterRenderer(t)),e?this._getRendererLegendElements(e,{isFeatureReductionRenderer:!0}):[]}_getPointCloudRendererTitle(t){var e;return(((e=t.legendOptions)==null?void 0:e.title)||t.field)??""}async _constructPointCloudRendererLegendElements(t,e={}){var a;const i=e.title,r=[];let n=null,s=null;if(xX(t))n={type:"symbol-table",title:i||this._getPointCloudRendererTitle(t),infos:[]},t.colorClassBreakInfos.forEach(o=>{n.infos.unshift({label:o.label||o.minValue+" - "+o.maxValue,value:[o.minValue,o.maxValue],symbol:this._getAppliedCloneSymbol(w3,o.color)})});else if($X(t)){const o=t.stops;let l=null;if(o!=null&&o.length&&(o.length===1&&(l=o[0].color),!l)){const h=o[0].value,m=o[o.length-1].value;h!=null&&m!=null&&(l=z$e(h+(m-h)/2,o))}n={type:"symbol-table",title:null,infos:[{label:null,value:null,symbol:this._getAppliedCloneSymbol(w3,l||w3.color)}]};const c=mnt(t.stops??[])??[];s={type:"color-ramp",title:i||this._getPointCloudRendererTitle(t),infos:c,preview:w0(c.map(h=>h.color))}}else SX(t)&&(n={type:"symbol-table",title:i||this._getPointCloudRendererTitle(t),infos:[]},(a=t.colorUniqueValueInfos)==null||a.forEach(o=>{n.infos.push({label:o.label||o.values.join(", "),value:o.values.join(", "),symbol:this._getAppliedCloneSymbol(w3,o.color)})}));return n!=null&&n.infos.length&&r.push(n),s!=null&&s.infos.length&&r.push(s),await this._generatePreviewsForLegendElements(r,{opacity:this.opacity,symbolConfig:{applyColorModulation:!!t.colorModulation}}),r}async _getElementInfoForDotDensity(t,e){const{color:i,label:r,valueExpressionTitle:n}=e,{backgroundColor:s,outline:a,dotSize:o}=t,l=this.cssEffectFilter,c=o+"-"+i+"-"+s+"-"+(a&&JSON.stringify(a.toJSON()))+"-"+l,h=this._dotDensityUrlCache,m=h.has(c)?h.get(c):hot(t,i);h.set(c,m);const g={shape:{type:"image",x:0,y:0,width:m.width,height:m.height,src:m.src},fill:null,stroke:null,offset:[0,0]},v=iI([[g]],[m.width,m.height],{cssEffectFilter:this.cssEffectFilter});return{opacity:1,src:m.src,preview:v,width:m.width,height:m.height,previewAriaLabel:r||n}}async _constructDotDensityRendererLegendElements(t){var n;const e=t.calculateDotValue(this.view.scale),i=(n=t.legendOptions)==null?void 0:n.unit,r={type:"symbol-table",title:{value:e&&Math.round(e),unit:i||""},infos:[]};for(const s of t.attributes){const a=await this._getElementInfoForDotDensity(t,s);a.label=s.label||s.valueExpressionTitle||s.field,r.infos.push(a)}return[r]}async _constructPieChartRendererLegendElements(t){var a,o,l,c;const e=[];let i=null;const r=t.outline;t.attributes.forEach(h=>{const m=new tn({color:h.color,outline:r}),g=h.label||h.valueExpressionTitle||h.field;e.push({label:g,symbol:m})});const n=e.length?[...e]:[];if((a=t.othersCategory)!=null&&a.color&&((o=t.othersCategory)==null?void 0:o.threshold)!==0){const h=new tn({color:t.othersCategory.color,outline:r});i=t.othersCategory.label||"Other",e.push({label:i,symbol:h})}if((l=t.defaultColor)!=null&&l.a){const h=new tn({color:t.defaultColor,outline:r});e.push({label:t.defaultLabel,symbol:h})}const s=await this._getVisualVariableLegendElements(t,this.layer)||[];if(e.length){s.unshift({type:"symbol-table",title:null,infos:e});const h=n.filter(g=>g.label!==i).map(g=>g.symbol.color).filter(Boolean),m=pot(h,{holePercentage:t.holePercentage,backgroundColor:(c=t.backgroundFillSymbol)==null?void 0:c.color,cssEffectFilter:this.cssEffectFilter,outline:r});s.unshift({type:"pie-chart-ramp",title:this._getRendererTitle(t,this.layer),infos:e,preview:m})}return await this._generatePreviewsForLegendElements(s,{opacity:this.layer.opacity,cssEffectFilter:this.cssEffectFilter}),s}async _getWhereClause(t,e,i){const r=await oY(t,i),n=new Set,{field:s,field2:a,field3:o}=e;Lv(n,i,[s,a,o]),await za(n,i,null,e.valueExpression);const l=new Set(Array.from(n,h=>h.toLowerCase())),c=r==null?void 0:r.fieldNames.map(h=>h.toLowerCase());return c!=null&&c.some(h=>!l.has(h))?null:r}async _processDefinitionExpression(t,e){if(!("definitionExpression"in t))return;const i=t.definitionExpression;i&&this.respectLayerDefinitionExpression?this._layerDefinitionExpression!==i&&(this._layerDefinitionExpressionClause=await this._getWhereClause(i,e,t.fieldsIndex)):this._layerDefinitionExpressionClause=null,this._layerDefinitionExpression=i}async _processDisplayFilter(t,e){var r;if(!("displayFilterInfo"in t))return;const i=t.displayFilterInfo?JYe(t.displayFilterInfo,this.view):null;return i!=null&&i.where?((r=this._layerDisplayFilter)==null?void 0:r.id)!==(i==null?void 0:i.id)&&(this._layerDisplayFilterClause=await this._getWhereClause(i.where,e,t.fieldsIndex)):this._layerDisplayFilterClause=null,this._layerDisplayFilter=i,i}async _constructRendererLegendElements(t,e={}){var A,L,z,U,B;const{title:i,sublayer:r,isFeatureReductionRenderer:n}=e,s=r||this.layer,a=Sp(t,"reference-size"),o=Sp(t,"spike"),l=n&&"renderer"in s&&s.renderer?s.renderer:t;let c=null;S0(l)&&(await this._processDefinitionExpression(s,l),c=await this._processDisplayFilter(s,l)),this._hasColorRamp=!1,this._hasOpacityRamp=!1,this._hasSizeRamp=!1,this._scaleDrivenSizeVariable=null;const h=await this._getVisualVariableLegendElements(t,s)||[],m={type:"symbol-table",title:i||this._getRendererTitle(t,s),infos:[]};let g=null,v=!1;const b=new Set;if(OG(t)&&!this._hasSizeRamp){const X=await L$e(t);m.infos.push({label:null,symbol:X})}else if(Xgt(t)){let X=i;const J=Qgt(t)?"univariate-above-and-below-ramp":"univariate-color-size-ramp",Q=h.findIndex(Te=>Te.type==="color-ramp"),le=Q!==-1?h.splice(Q,1)[0]:null,ie=h.findIndex(Te=>Te.type==="size-ramp"),re=ie!==-1?h.splice(ie,1)[0]:null,se=[];le&&(X=le.title,se.push(le)),re&&(X=re.title,se.push(re)),se.length>0&&h.push({type:J,title:X,infos:se})}else if(PIe(t)){const X=N$e(t);h.push({type:"heatmap-ramp",title:i||this._getRendererTitle(t,s),infos:X,preview:w0(X.map(J=>J.color),{cssEffectFilter:this.cssEffectFilter})})}else if(S0(t)){const X=t.authoringInfo;if(X&&X.type==="relationship"){const{numClasses:J,field1:Q,field2:le}=X,ie=X.focus;if(J&&Q&&le){const re=[Q,le];let se=SSe(ie)||0;for(const ne of re){const{field:_e,normalizationField:Oe,label:He}=ne,ft=He||{field:this._getFieldAlias(_e,s),normField:Oe&&this._getFieldAlias(Oe,s)},oe=eyt.clone();oe.angle=se,m.infos.push({label:ft,symbol:oe}),b.add(oe),se+=90}const Te=dot({focus:ie,numClasses:J,infos:t.uniqueValueInfos??[]});h.unshift(Te)}}else if(Y1(this.layer)||_3(this.layer)){const{uniqueValueInfos:J}=t;if(J)for(const Q of J)Q.symbol&&await this._checkClausesForUVR(l,Q.value)&&m.infos.push({label:Q.label||Q.value,value:Q.value,symbol:Q.symbol})}else{const{field:J,field2:Q,field3:le,fieldDelimiter:ie,valueExpression:re,defaultSymbol:se}=t,Te=!(!J&&!re||!Q&&!le),ne=c?c.title:null,_e=[],{uniqueValueGroups:Oe}=t;if(Oe)for(const He of Oe){const ft={type:"symbol-table",title:ne||He.heading,infos:[]},{classes:oe}=He;if(oe)for(const ze of oe){const{symbol:Ke,values:at}=ze;if(Ke){const kt=[],Wt=[];for(const ks of at??[]){const{value:Zo,value2:Cc,value3:qs}=ks,ha=[],Hs=[];(J||re)&&(ha.push(Zo),Hs.push(this._getDomainName(J,Zo,s)??uF(Zo,dF(s,J,this.view.timeZone)))),Q&&(ha.push(Cc),Hs.push(this._getDomainName(Q,Cc,s)??uF(Cc,dF(s,Q,this.view.timeZone)))),le&&(ha.push(qs),Hs.push(this._getDomainName(le,qs,s)??uF(qs,dF(s,le,this.view.timeZone)))),kt.push(Te?ha.join(ie||""):ha[0]),Wt.push(Hs.join(" - "))}const ui=kt.join(", ");let Tr=ze.label;if(!Tr){const ks=Wt.filter(Boolean);Tr=ks.length?ks.join(", "):ui}let it=Ke;it.type==="cim"&&a&&(it=it.clone(),uX(it,{innerDotSize:.5*Rue,outerRingSize:Rue}));let Wo=!1;for(const ks of kt)if(Wo=await this._checkClausesForUVR(l,ks),Wo)break;Wo&&ft.infos.push({label:Tr,value:ui,symbol:it})}}ft.infos.length&&_e.push(ft)}if(_e.length){const He=_e[0];if(_e.length===1&&"title"in He&&!He.title){const ft=((A=He.infos)==null?void 0:A.filter(Due))??[];m.infos.push(...ft)}else se&&(_e.push({type:"symbol-table",infos:[{label:t.defaultLabel||"others",symbol:se}]}),v=!0),m.infos.push(..._e);i||(L=t.legendOptions)!=null&&L.title||t.valueExpressionTitle||(m.title=null)}}t.defaultSymbol&&!v&&(m.infos.push({label:t.defaultLabel||"others",symbol:t.defaultSymbol}),v=!0)}else if($0(t)){if(!a&&!o){if(g=this._isUnclassedRenderer(t),!g||!this._hasSizeRamp){const X=t.classBreakInfos.filter(({symbol:Q})=>Q),J=((z=t.legendOptions)==null?void 0:z.order)==="ascending-values";for(const{label:Q,minValue:le,maxValue:ie,symbol:re}of X){const se=Q||(g?null:`${le} - ${ie}`),Te={previewAriaLabel:se||m.title||s.title,label:se,value:[le,ie],symbol:re};J?m.infos.push(Te):m.infos.unshift(Te)}g&&(m.title=null),this._updateInfosForClassedSizeRenderer(t,m.infos)}t.defaultSymbol&&!g&&(m.infos.push({label:t.defaultLabel||"others",symbol:t.defaultSymbol}),v=!0)}}else if(kIe(t))if(_3(this.layer)||Ygt(this.layer)){const X=await this._constructTileImageryStretchRendererElements(t);Jgt(X)?h.push(X):m.infos=X}else{const X=this.layer;let J,Q;(U=t.customStatistics)!=null&&U.length&&({min:J,max:Q}=t.customStatistics[0]);let le=[],ie=X.serviceRasterInfo;if(X.rasterFunction)try{ie=await X.generateRasterInfo(X.rasterFunction)}catch{}const re=Fz(ie.pixelType);if(ie.bandCount===1){const se=((B=X.bandIds)==null?void 0:B[0])||0;J=J??(ie.statistics?ie.statistics[se].min:re[0]),Q=Q??(ie.statistics?ie.statistics[se].max:re[1]),J||Q?h.push(await this._getStretchLegendElements(t,{min:J,max:Q})):this._getServerSideLegend()}else if(X.bandIds&&X.bandIds.length===1)J=J??(ie.statistics?ie.statistics[X.bandIds[0]].min:re[0]),Q=Q??(ie.statistics?ie.statistics[X.bandIds[0]].max:re[1]),J||Q?h.push(await this._getStretchLegendElements(t,{min:J,max:Q})):this._getServerSideLegend();else if(ie.bandCount>=3){const{bandInfos:se}=ie,{bandIds:Te}=X;se.length>=ie.bandCount?(Te==null?void 0:Te.length)===3?(le=Te.map(ne=>se[ne].name),m.infos=this._createSymbolTableElementMultiBand(le)):X.format==="lerc"?(le=[0,1,2].map(ne=>se[ne].name),m.infos=this._createSymbolTableElementMultiBand(le)):this._getServerSideLegend():X.format==="lerc"?(le=["band1","band2","band3"],m.infos=this._createSymbolTableElementMultiBand(le)):this._getServerSideLegend()}else this._getServerSideLegend()}else if(EIe(t))t.colormapInfos.forEach(X=>{m.infos.push({label:X.label,value:X.value,symbol:this._getAppliedCloneSymbol(Vgt,X.color)})});else if(u$(t)){let X=t.symbol;switch(e.geometryType){case"point":X="pointSymbol"in s?s.pointSymbol:null;break;case"polyline":X="lineSymbol"in s?s.lineSymbol:null;break;case"polygon":X="polygonSymbol"in s?s.polygonSymbol:null}const J=this._clusterSizeVariable&&this._getClusterSymbol()||!this._hasSizeRamp;t.symbol&&J&&m.infos.push({previewAriaLabel:t.label||m.title||s.title,label:t.label,symbol:X})}else if(CIe(t)){t.outputUnit&&(this.title="("+t.toJSON().outputUnit+")"),m.title=t.attributeField;const X=t.getClassBreakInfos();X!=null&&X.length?X.forEach(J=>{m.infos.push({label:J.minValue+" - "+J.maxValue,symbol:J.symbol})}):m.infos.push({label:t.attributeField,symbol:t.getDefaultSymbol()})}else AIe(t)&&h.push(await this._getStretchLegendElements(t,{min:0,max:255}));const x=t.defaultSymbol;!x||v||u$(t)||g&&!this._hasColorRamp&&!this._hasSizeRamp&&!this._hasOpacityRamp||h.push({type:"symbol-table",infos:[{label:t.defaultLabel||"others",symbol:x}]}),m.infos.length&&h.unshift(m);const $=e.opacity==null?this.opacity:e.opacity,M=this._isTallSymbol("visualVariables"in t?t.visualVariables:null),k=Y1(this.layer)||_3(this.layer);return await this._generatePreviewsForLegendElements(h,{opacity:$,symbolConfig:{isTall:M,isSquareFill:k},cssEffectFilter:this.cssEffectFilter},{arrowMarkerSymbols:b}),t=null,h}async _waitForLayerViewUpdate(t){await kT(()=>!t.updating)}async _checkFeatureCountForExpression(t,e){const i=this.layerView;if(!(i&&"createQuery"in i&&"queryFeatureCount"in i))return!0;try{await this._waitForLayerViewUpdate(i);const r=i.createQuery();return t&&(r.where=hnt(r.where,t)),e&&(r.geometry=e),await i.queryFeatureCount(r)>0}catch{return!0}}async _checkClausesForUVR(t,e){var r;const i=Kgt(t,e);return i?(!(!this._layerDefinitionExpressionClause&&this._layerDefinitionExpression&&this.respectLayerDefinitionExpression||!this._layerDisplayFilterClause&&((r=this._layerDisplayFilter)!=null&&r.where))||await this._checkFeatureCountForExpression(`${t.field} = ${e}`))&&(!this._layerDefinitionExpressionClause||this._layerDefinitionExpressionClause.testFeature(i))&&(!this._layerDisplayFilterClause||this._layerDisplayFilterClause.testFeature(i)):!0}_getServerSideLegend(){setTimeout(()=>this.buildLegendElementsForTools(),0)}_getAllInfos(t){const e=t==null?void 0:t.infos;return e?e.reduce((i,r)=>i.concat(this._getAllInfos(r)),[]):[t]}async _constructTileImageryStretchRendererElements(t){var o,l,c;const e=this.layer,i=e.symbolizer.rasterInfo??e.raster.rasterInfo;let r,n;const s=(o=t==null?void 0:t.customStatistics)!=null&&o.length?t.customStatistics:i==null?void 0:i.statistics;if(s)({min:r,max:n}=s[0]);else{const h=Fz(i.pixelType);r=h[0],n=h[1]}if(e.hasStandardTime()&&(r=e.getStandardTimeValue(r),n=e.getStandardTimeValue(n)),i.bandCount===1||((l=e.bandIds)==null?void 0:l.length)===1)return this._getStretchLegendElements(t,{min:r,max:n});const a=((c=e==null?void 0:e.bandIds)!=null&&c.length?e.bandIds:Array.from(Array(Math.min(i.bandCount,3)).keys())).map(h=>i.bandInfos[h].name);return a.length<3?a.push(a[1]):a.length>3&&a.splice(3),this._createSymbolTableElementMultiBand(a)}async _getStretchLegendElements(t,e){var n;const i=(n=t.colorRamp)==null?void 0:n.toJSON(),r=ynt(i,e);return{type:"stretch-ramp",title:"",infos:r,preview:w0(r.map(s=>s.color))}}_getClusterSymbol(){var r;const t=this.layer,e="featureReduction"in t&&t.featureReduction,i=e&&"symbol"in e&&e.renderer;return i&&((r=i==null?void 0:i.authoringInfo)==null?void 0:r.isAutoGenerated)!==!0?null:e&&"symbol"in e?e.symbol:null}async _getSizeLegendElement(t,e,i,r){return{type:"size-ramp",title:this._clusterSizeVariable?this._getClusterTitle(e):t,infos:await Igt(i,e,await YH(i),this.scale,this.view,r,this._clusterSizeVariable?this._getClusterSymbol():null)}}_createSymbolTableElementMultiBand(t){const e=[],i=["red","green","blue"];return t.forEach((r,n)=>{e.push({label:{colorName:i[n],bandName:r},src:lnt[n],opacity:this.opacity??1})}),e}_updateInfosForClassedSizeRenderer(t,e){const i=t.authoringInfo&&t.authoringInfo.type==="class-breaks-size",r=t.classBreakInfos.some(n=>O5(n.symbol));if(i&&r){const n=kG,s=AG,a=t.classBreakInfos.length,o=(n-s)/(a>1?a-1:a);e.forEach((l,c)=>{l.size=n-o*c})}}_isTallSymbol(t){let e=!1,i=!1;if(t)for(let r=0;r<t.length&&(!e||!i);r++){const n=t[r];n.type==="size"&&(n.axis==="height"&&(e=!0),n.axis==="width-and-depth"&&(i=!0))}return e&&i}async _generatePreviewsForLegendElements(t,e,i){var n,s;const r=[];for(const a of t)for(const o of a.infos??[])if("infos"in o&&o.infos&&r.push(this._generatePreviewsForLegendElements([o],e,i)),Due(o)&&o.symbol&&!o.preview){let l=!0;if(o.symbol.type==="cim"){const{minScale:c,maxScale:h}=o.symbol.data;(c&&c<this.scale||h&&h>this.scale)&&(l=!1)}l&&r.push(this._generateSymbolPreviewForInfo(o,{...e,clipBloomEffect:"theme"in a&&a.theme==="spike",cssEffectFilter:(n=i==null?void 0:i.arrowMarkerSymbols)!=null&&n.has(o.symbol)?null:e.cssEffectFilter},i?{applyScaleDrivenSize:!((s=i.arrowMarkerSymbols)!=null&&s.has(o.symbol))}:void 0))}await Promise.all(r)}async _getSize(t,e){let i=t.size==null&&this._hasSizeRamp?Qi(22):t.size;if(this._scaleDrivenSizeVariable&&(e!=null&&e.applyScaleDrivenSize)){const{getSize:r}=await de(()=>Promise.resolve().then(()=>$_),void 0);i=r(this._scaleDrivenSizeVariable,null,{view:this.view.type,scale:this.scale,shape:t.symbol.type==="simple-marker"?t.symbol.style:null})}return i}_getPreviewCIMOptions(t){var e,i,r;return{style:"legend",cimOptions:{allowScalingUp:this._hasSizeRamp||!(!this._scaleDrivenSizeVariable||!(t!=null&&t.applyScaleDrivenSize)),viewParams:this.isScaleDriven?{viewingMode:((e=this.view)==null?void 0:e.type)==="2d"?"map":(i=this.view)==null?void 0:i.viewingMode,scale:(r=this.view)==null?void 0:r.scale}:null}}}async _generateSymbolPreviewForInfo(t,e={},i){const{symbol:r}=t;try{if(e.size=await this._getSize(t,i),e.scale=!1,r.type==="cim"){const n=this._getPreviewCIMOptions(i);e={...e,...n}}t.preview=await TSe(r,e)}catch{t.preview=null,Ie.getLogger(this).warn(`Generating symbol preview failed for symbol type: ${r==null?void 0:r.type}`)}}_getClusterRenderer(t){var n,s;this._clusterSizeVariable=null;const e="renderer"in this.layer?this.layer.renderer:null,i=((n=t.renderer)==null?void 0:n.clone())||(e==null?void 0:e.clone()),r=Pht(t,this.layerView,this.view);if(r&&i!=null&&"visualVariables"in i&&!((s=i.visualVariables)==null?void 0:s.some(o=>o.type==="size"&&o.target!=="outline"&&!b3.test(o.valueExpression)))){if("clusterMinSize"in t&&"clusterMaxSize"in t){const{clusterMinSize:l,clusterMaxSize:c}=t;r.legendOptions=new M1e({showLegend:l!==c})}const o=i.visualVariables||[];i.visualVariables=o.concat([r]),this._clusterSizeVariable=r}return i}async _loadRenderer(t){if(nB.has(t))return nB.get(t);const e=[],i=t.clone(),r=await YH(i);if($0(i)||S0(i)){const n=(i.classBreakInfos||i.uniqueValueInfos).map(s=>this._fetchSymbol(s.symbol,r).then(a=>{s.symbol=a}).catch(()=>{s.symbol=null}));Array.prototype.push.apply(e,n)}return e.push(this._fetchSymbol(i.symbol||i.defaultSymbol,i.defaultSymbol?null:r).then(n=>{this._applySymbolToRenderer(i,n,u$(i))}).catch(()=>{this._applySymbolToRenderer(i,null,u$(i))})),await Promise.allSettled(e),nB.set(t,i),i}_applySymbolToRenderer(t,e,i){i?t.symbol=e:t.defaultSymbol=e}async _fetchSymbol(t,e){if(!t)throw new Error;if(t.type==="web-style"){const i=this._webStyleSymbolCache;try{const r=await t.fetchSymbol({cache:i});return this._getAppliedCloneSymbol(r,e)}catch{throw Ie.getLogger(this).warn("Fetching web-style failed!"),new Error}}return this._getAppliedCloneSymbol(t,e)}_getAppliedCloneSymbol(t,e){if(!t||!e)return t;const i=t.clone(),r=e&&e.toRgba();return i.type.includes("3d")?this._applyColorTo3dSymbol(i,r):i.type==="cim"?S$e(i,e):i.color&&(i.color=new Se(r||i.color)),i}_applyColorTo3dSymbol(t,e){e&&t.symbolLayers.forEach(i=>{i&&(i.material||(i.material={}),i.material.color=new Se(e))})}async _getVisualVariableLegendElements(t,e){var v,b;if(!("visualVariables"in t)||t.type==="vector-field")return null;const i=t.visualVariables??[],r=[],n=[],s=[],a=Sp(t,"reference-size")??Sp(t,"spike");let o;const l=this._clusterSizeVariable;if(((v=a==null?void 0:a.sizeStops)==null?void 0:v.length)===2&&($0(t)||S0(t))){const[x,$]=a.sizeStops,M=l?l.minDataValue:x.value,k=l?l.maxDataValue:$.value;o=new Ei({field:a.field??void 0,normalizationField:a.normalizationField,minSize:ua(x.size,10,100),maxSize:ua($.size,50,150),minDataValue:M,maxDataValue:k}),n.push(o)}for(const x of i)if(x.type==="color")r.push(x);else if(x.type==="size"){if(x.field==="cluster_count"&&o)continue;n.push(x)}else x.type==="opacity"&&s.push(x);const c=[...r,...n,...s];let h,m;if(r.length===0&&$0(t)&&t.classBreakInfos&&t.classBreakInfos.length===1){const x=t.classBreakInfos[0];h=x&&x.symbol}if(r.length===0&&u$(t)&&(h=t.symbol),h)if(h.type.includes("3d")){const x=h.symbolLayers.at(0);x.type==="water"?x.color!=null&&(m=x.color):((b=x.material)==null?void 0:b.color)!=null&&(m=x.material.color)}else h.url||(m=h.color);const g=this.cssEffectFilter;return(await Promise.all(c.map(async x=>{if(!x.legendOptions||x.legendOptions.showLegend!==!1){const $=OG(t)?x.field:this._getRampTitle(x,e);let M=null;const k=dnt(e,x,this.view.timeZone);if(x.type==="color"){const A=await JH(x,null,k)??[];M={type:"color-ramp",title:$,infos:A,preview:w0(A.map(L=>L.color),{cssEffectFilter:g})},this._hasColorRamp||(this._hasColorRamp=A.length>0)}else if(x.type==="size"&&x.target!=="outline")b3.test(x.valueExpression)?this._clusterSizeVariable||(this._scaleDrivenSizeVariable=x):(M=await this._getSizeLegendElement($,x,t,k),o===x&&(a==null?void 0:a.theme)==="spike"&&(M.theme=a.theme),this._hasSizeRamp||(this._hasSizeRamp=!(M.infos==null||!M.infos.length)));else if(x.type==="opacity"){const A=await JH(x,m,k)??[];M={type:"opacity-ramp",title:$,infos:A,preview:w0(A.map(L=>L.color),{cssEffectFilter:g})},this._hasOpacityRamp||(this._hasOpacityRamp=A.length>0)}return M!=null&&M.infos?M:null}}))).filter(ln)}_getDomainName(t,e,i){var r;if(t&&typeof t!="function"){const n="getField"in i&&((r=i.getField)==null?void 0:r.call(i,t)),s=n&&"getFieldDomain"in i&&i.getFieldDomain?i.getFieldDomain(n.name,{excludeImpliedDomains:ve("esri-widget-legacy-field-domain-calculation")}):null;return(s==null?void 0:s.type)==="coded-value"?s.getName(e):null}return null}_getClusterTitle(t){const e=this.layer,i=t.field;if("featureReduction"in e&&e.featureReduction&&e.featureReduction.type==="cluster"){const r=e.featureReduction,n="popupTemplate"in r&&r.popupTemplate,s=n&&n.fieldInfos;if(s){for(const a of s)if(a.fieldName===i)return i==="cluster_count"?a.label||{showCount:!0}:a.label}}return{showCount:!0}}_getRampTitle(t,e){var c,h;let i=t.field,r=t.normalizationField,n=!1,s=!1,a=!1,o=null;i=typeof i=="function"?null:i,r=typeof r=="function"?null:r;const l=(c=t.legendOptions)==null?void 0:c.title;if(l!=null)o=l;else if(t.valueExpressionTitle)o=t.valueExpressionTitle;else{if("renderer"in e&&e.renderer&&"authoringInfo"in e.renderer&&((h=e.renderer.authoringInfo)!=null&&h.visualVariables)){const m=e.renderer.authoringInfo.visualVariables;for(let g=0;g<m.length;g++){const v=m[g];if(v.type==="color"){if(v.style==="ratio"){n=!0;break}if(v.style==="percent"){s=!0;break}if(v.style==="percent-of-total"){a=!0;break}}}}o={field:i&&this._getFieldAlias(i,e),normField:r&&this._getFieldAlias(r,e),ratio:n,ratioPercent:s,ratioPercentTotal:a}}return o}_getRendererTitle(t,e){var o;const i=t;if((o=i.legendOptions)!=null&&o.title)return i.legendOptions.title;if(i.valueExpressionTitle)return i.valueExpressionTitle;let r=i.field,n=null,s=null;if($0(i)&&(n=i.normalizationField,s=i.normalizationType==="percent-of-total"),r=typeof r=="function"?null:r,n=typeof n=="function"?null:n,S0(i)){const{field2:l,field3:c,fieldDelimiter:h}=i;let m=r&&this._getFieldAlias(r,e);return l&&(m=`<${m}>${h}<${this._getFieldAlias(l,e)}>`,c&&(m=`${m}${h}<${this._getFieldAlias(c,e)}>`)),m}let a=null;return(r||n)&&(a={field:r&&this._getFieldAlias(r,e),normField:n&&this._getFieldAlias(n,e),normByPct:s}),a}_getFieldAlias(t,e){var h,m;const i="featureReduction"in e&&e.featureReduction;if(WT(e)&&!i)return e.getFieldAlias(t)||t;const r="popupTemplate"in e?e.popupTemplate:null,n=r==null?void 0:r.fieldInfos;let s=n==null?void 0:n.find(g=>t===g.fieldName),a=null;"getField"in e&&e.getField?a=e.getField(t):"fieldsIndex"in e&&e.fieldsIndex&&(a=e.fieldsIndex.get(t));let o=null;i&&(s??(s="popupTemplate"in i?(m=(h=i.popupTemplate)==null?void 0:h.fieldInfos)==null?void 0:m.find(g=>{var v;return(t==null?void 0:t.toLowerCase())===((v=g.fieldName)==null?void 0:v.toLowerCase())}):void 0),"fields"in i&&i.fields&&(o=i.fields.find(g=>{var v;return((v=g.name)==null?void 0:v.toLowerCase())===(t==null?void 0:t.toLowerCase())})));const l=s||a||o;let c=null;return l&&(c=(s==null?void 0:s.label)||(a==null?void 0:a.alias)||(o==null?void 0:o.alias)||"name"in l&&l.name||"fieldName"in l&&l.fieldName||null),c}_isUnclassedRenderer(t){const e=t.visualVariables;let i=!1;return $0(t)&&t.classBreakInfos&&t.classBreakInfos.length===1&&e&&(i=t.field?e.some(r=>!(!r||t.field!==r.field||(t.normalizationField||r.normalizationField)&&t.normalizationField!==r.normalizationField)):!!e.length),i}};d([f()],sn.prototype,"_loading",void 0),d([f()],sn.prototype,"children",void 0),d([f({readOnly:!0})],sn.prototype,"cssEffectFilter",null),d([f()],sn.prototype,"layerView",void 0),d([f()],sn.prototype,"layer",void 0),d([f()],sn.prototype,"legendElements",void 0),d([f({readOnly:!0})],sn.prototype,"loading",null),d([f({readOnly:!0})],sn.prototype,"opacity",null),d([f()],sn.prototype,"parent",void 0),d([f({readOnly:!0,dependsOn:[]})],sn.prototype,"ready",null),d([f()],sn.prototype,"hideLayersNotInCurrentView",void 0),d([f()],sn.prototype,"keepCacheOnDestroy",void 0),d([f()],sn.prototype,"respectLayerDefinitionExpression",void 0),d([f()],sn.prototype,"respectLayerVisibility",void 0),d([f({readOnly:!0})],sn.prototype,"scale",null),d([f()],sn.prototype,"sublayerIds",void 0),d([f({readOnly:!0})],sn.prototype,"isScaleDriven",null),d([f()],sn.prototype,"title",void 0),d([f({readOnly:!0,dependsOn:["ready"],value:0})],sn.prototype,"version",null),d([f()],sn.prototype,"view",void 0),sn=d([V("esri.widgets.Legend.support.ActiveLayerInfo")],sn);const Db={state:"state",view:"view",allLayerViews:"all-layer-views",legendProperties:"legend-properties"},FIe=Ue.ofType(sn),tyt=new Set(["esri.layers.BuildingSceneLayer","esri.layers.CatalogLayer","esri.layers.CSVLayer","esri.layers.FeatureLayer","esri.layers.GeoJSONLayer","esri.layers.GeoRSSLayer","esri.layers.GroupLayer","esri.layers.HeatmapLayer","esri.layers.ImageryLayer","esri.layers.ImageryTileLayer","esri.layers.MapImageLayer","esri.layers.OGCFeatureLayer","esri.layers.OrientedImageryLayer","esri.layers.ParquetLayer","esri.layers.PointCloudLayer","esri.layers.StreamLayer","esri.layers.SceneLayer","esri.layers.SubtypeGroupLayer","esri.layers.TileLayer","esri.layers.VoxelLayer","esri.layers.WFSLayer","esri.layers.WMSLayer","esri.layers.WMTSLayer","esri.layers.WCSLayer","esri.layers.LinkChartLayer","esri.layers.catalog.CatalogFootprintLayer","esri.layers.catalog.CatalogDynamicGroupLayer","esri.layers.knowledgeGraph.KnowledgeGraphSublayer","esri.layers.KnowledgeGraphLayer"]),RIe="view.basemapView.baseLayerViews",zIe="view.groundView.layerViews",NIe="view.basemapView.referenceLayerViews",iyt=[RIe,zIe,"view.layerViews",NIe];let bl=class extends et{constructor(e){super(e),this._layerViewByLayerId={},this._layerInfosByLayerViewId={},this._activeLayerInfosByLayerViewId={},this._activeLayerInfosWithNoParent=new Ue,this._activeLayerInfosPromises=new WeakMap,this.activeLayerInfos=new FIe,this.basemapLegendVisible=!1,this.groundLegendVisible=!1,this.hideLayersNotInCurrentView=!1,this.keepCacheOnDestroy=!1,this.respectLayerDefinitionExpression=!1,this.respectLayerVisibility=!0,this.layerInfos=[],this.view=null}initialize(){this.addHandles(be(()=>this.view,()=>this._viewHandles(),Ft),Db.view),this.addHandles(kZ(()=>this._refresh()))}destroy(){this._destroyViewActiveLayerInfos(),this.view=null}get loading(){return this.activeLayerInfos.some(e=>e.loading)}get state(){var e;return(e=this.view)!=null&&e.ready?"ready":"disabled"}_viewHandles(){this.removeHandles(Db.state),this.view&&this.addHandles(be(()=>this.state,()=>this._stateHandles(),Ft),Db.state)}_stateHandles(){this._resetAll(),this.state==="ready"&&this._watchPropertiesAndAllLayerViews()}_resetAll(){this.removeHandles([Db.allLayerViews,Db.legendProperties]),this._destroyViewActiveLayerInfos(),this.activeLayerInfos.removeAll()}_destroyViewActiveLayerInfos(){Object.keys(this._activeLayerInfosByLayerViewId).forEach(this._destroyViewActiveLayerInfo,this)}_destroyViewActiveLayerInfo(e){var r;this.removeHandles(e);const i=this._activeLayerInfosByLayerViewId[e];i&&this._activeLayerInfosPromises.delete(i),delete this._activeLayerInfosByLayerViewId[e],(r=i==null?void 0:i.parent)==null||r.children.remove(i)}_watchPropertiesAndAllLayerViews(){const{view:e}=this;if(!e)return;const{allLayerViews:i}=e;i.length&&this._refresh(),this.addHandles(i.on("change",r=>this._allLayerViewsChangeHandle(r)),Db.allLayerViews),this.addHandles(be(()=>[this.basemapLegendVisible,this.groundLegendVisible,this.hideLayersNotInCurrentView,this.keepCacheOnDestroy,this.layerInfos,this.respectLayerDefinitionExpression,this.respectLayerVisibility],()=>this._refresh()),Db.legendProperties)}_allLayerViewsChangeHandle(e){if(e.added.length&&this._generateActiveLayerInfosForLayerViews(e.added),e.moved.length)return this._destroyViewActiveLayerInfos(),void this._refresh();if(e.removed.length){for(const{uid:i}of e.removed)this._destroyViewActiveLayerInfo(i);this._refresh()}}_refresh(){this._layerInfosByLayerViewId={},this.activeLayerInfos.drain(e=>this._activeLayerInfosPromises.delete(e)),this._generateActiveLayerInfosForLayerViews(this._generateLayerViews())}_generateActiveLayerInfosForLayerViews(e){e.filter(this._filterBasemapLayerViews,this).filter(this._filterLayerViewsByLayerInfos,this).filter(this._isLayerViewSupported,this).forEach(this._generateActiveLayerInfo,this)}_filterBasemapLayerViews(e){var o;if(!((o=this.view)!=null&&o.basemapView))return!0;const{baseLayerViews:i,groundLayerViews:r,referenceLayerViews:n}=this.view.basemapView,s=!this.basemapLegendVisible&&((i==null?void 0:i.includes(e))||(n==null?void 0:n.includes(e))),a=!this.groundLegendVisible&&(r==null?void 0:r.includes(e));return!s&&!a}_sortActiveLayerInfos(e){const i=this.view;if(e.length<2||!i)return;const r=[];e.forEach(s=>{if(!s.parent){const a=s.layer.parent,o=a&&"uid"in a&&this._layerViewByLayerId[a.uid],l=o&&this._activeLayerInfosByLayerViewId[o.uid];l&&e.includes(l)&&(r.push(s),s.parent=l,l.children.add(s),this._sortActiveLayerInfos(l.children))}}),e.removeMany(r);const n={};i.allLayerViews.forEach((s,a)=>n[s.layer.uid]=a),e.sort((s,a)=>{const o=n[s.layer.uid]||0;return(n[a.layer.uid]||0)-o})}_generateLayerViews(){const e=[];return iyt.filter(this._filterLayerViews,this).map(i=>mu(this,i)).filter(i=>i!=null).forEach(this._collectLayerViews("layerViews",e)),e}_filterLayerViews(e){const i=!this.basemapLegendVisible&&(e===RIe||e===NIe),r=!this.groundLegendVisible&&e===zIe;return!i&&!r}_collectLayerViews(e,i){const r=n=>(n&&n.forEach(s=>{i.push(s),r(s[e])}),i);return r}_filterLayerViewsByLayerInfos(e){const i=this.layerInfos;return!i||!i.length||i.some(r=>this._hasLayerInfo(r,e))}_hasLayerInfo(e,i){const r=this._isLayerUIDMatching(e.layer,i.layer.uid);return r&&(this._layerInfosByLayerViewId[i.uid]=e),r}_isLayerUIDMatching(e,i){return e&&(e.uid===i||this._hasLayerUID(e.layers,i))}_hasLayerUID(e,i){return e&&e.some(r=>this._isLayerUIDMatching(r,i))}_isLayerViewSupported(e){return!!tyt.has(e.layer.declaredClass)&&(this._layerViewByLayerId[e.layer.uid]=e,!0)}_generateActiveLayerInfo(e){this._isLayerActive(e)?this._buildActiveLayerInfo(e):(this.removeHandles(e.uid),this.addHandles(be(()=>{var i;return[e.legendEnabled,(i=e.layer)==null?void 0:i.legendEnabled]},()=>this._layerActiveHandle(e)),e.uid))}_layerActiveHandle(e){this._isLayerActive(e)&&(this.removeHandles(e.uid),this._buildActiveLayerInfo(e))}_isLayerActive(e){var i;return!this.respectLayerVisibility||e.legendEnabled&&((i=e.layer)==null?void 0:i.legendEnabled)}async _buildActiveLayerInfo(e){var l;const i=e.layer,r=e.uid,n=this._layerInfosByLayerViewId[r];let s=this._activeLayerInfosByLayerViewId[r];s||(s=new sn({layer:i,layerView:e,view:this.view??void 0}),this._activeLayerInfosByLayerViewId[r]=s);const a=(n==null?void 0:n.title)!==void 0&&n.layer.uid===i.uid;s.title=a?n.title:i.title,s.respectLayerDefinitionExpression=this.respectLayerDefinitionExpression,s.respectLayerVisibility=this.respectLayerVisibility,s.hideLayersNotInCurrentView=this.hideLayersNotInCurrentView,s.keepCacheOnDestroy=this.keepCacheOnDestroy,s.sublayerIds=(n==null?void 0:n.sublayerIds)||[];const o=i.parent&&"uid"in i.parent?this._layerViewByLayerId[(l=i.parent)==null?void 0:l.uid]:null;s.parent=this._activeLayerInfosByLayerViewId[o==null?void 0:o.uid],this._addActiveLayerInfo(s),this._constructLegendElements(s),this._attachHandlesToActiveLayerInfo(s)}_attachHandlesToActiveLayerInfo(e){const{layer:i,layerView:r}=e,n=r.uid;this.removeHandles(n),this.addHandles([be(()=>i.title,s=>this._titleHandle(s,e)),be(()=>{var s;return[i.opacity,"renderer"in i&&i.renderer,"pointSymbol"in i&&i.pointSymbol,"lineSymbol"in i&&i.lineSymbol,"polygonSymbol"in i&&i.polygonSymbol,"effect"in i&&i.effect,"featureReduction"in i&&iue(i,r.view),(s=this.view)==null?void 0:s.timeZone]},()=>this._constructLegendElements(e)),be(()=>"filter"in r&&r.filter,()=>{iue(r.layer,r.view)!=null&&this._constructLegendElements(e)}),cn(()=>{var s;return!!((s=this.view)!=null&&s.stationary)},()=>this._scaleHandle(e)),be(()=>e.loading,()=>this.notifyChange("loading"),Ft)],n),this.respectLayerVisibility&&this.addHandles([be(()=>i.legendEnabled,s=>this._legendEnabledHandle(s,e)),be(()=>r.legendEnabled,s=>{var a;(a=this.view)!=null&&a.suspended||this._legendEnabledHandle(s,e)})],n),this.respectLayerDefinitionExpression&&"definitionExpression"in i&&this.addHandles(be(()=>i.definitionExpression,()=>this._constructLegendElements(e)),n)}_titleHandle(e,i){i.title=e,this._constructLegendElements(i)}_legendEnabledHandle(e,i){e?this._addActiveLayerInfo(i):this._removeActiveLayerInfo(i)}_scaleHandle(e){(e.isScaleDriven||e.hideLayersNotInCurrentView)&&this._constructLegendElements(e)}_addActiveLayerInfo(e){var n;const{layerView:i,layer:r}=e;if(this._isLayerActive(i)&&!this.activeLayerInfos.includes(e)){const s=e.parent;if(s)s.children.includes(e)||s.children.push(e),this._sortActiveLayerInfos(s.children);else{const a=(n=this.layerInfos)==null?void 0:n.some(l=>l.layer.uid===r.uid),o=r.parent;o&&"uid"in o&&this._layerViewByLayerId[o.uid]&&!a?this._activeLayerInfosWithNoParent.add(e):(this.activeLayerInfos.add(e),this._sortActiveLayerInfos(this.activeLayerInfos))}if(this._activeLayerInfosWithNoParent.length){const a=[];this._activeLayerInfosWithNoParent.forEach(o=>{const l=o.layer.parent,c=l&&"uid"in l?this._layerViewByLayerId[l==null?void 0:l.uid]:null,h=this._activeLayerInfosByLayerViewId[c==null?void 0:c.uid];h&&(a.push(o),o.parent=h)}),a.length&&(this._activeLayerInfosWithNoParent.removeMany(a),a.forEach(o=>this._addActiveLayerInfo(o)))}}}_removeActiveLayerInfo(e){const i=e.parent;i?i.children.remove(e):this.activeLayerInfos.remove(e)}async _getBuildLegendPromise(e){const{layer:i}=e;if("featureCollections"in i&&i.featureCollections)return e.buildLegendElementsForFeatureCollections(i.featureCollections);if("featureReduction"in i&&i.featureReduction&&"renderer"in i.featureReduction&&(i.featureReduction.type==="binning"||i.featureReduction.type==="cluster")&&(!this.view||i.featureReduction.maxScale<=this.view.scale))return e.buildLegendElementsForFeatureReduction(i.featureReduction);if("renderer"in i&&i.renderer&&!("sublayers"in i))return e.buildLegendElementsForRenderer(i.renderer);if("url"in i&&i.url&&i.type!=="catalog"&&i.type!=="knowledge-graph")return e.buildLegendElementsForTools();const r=e.children.map(n=>this._constructLegendElements(n));return Promise.all(r).then(()=>{})}async _constructLegendElements(e){const i=this._activeLayerInfosPromises.get(e);i&&await i.catch(()=>{});const r=this._getBuildLegendPromise(e);this._activeLayerInfosPromises.set(e,r),r.finally(()=>{this._activeLayerInfosPromises.delete(e)})}};d([f({type:FIe})],bl.prototype,"activeLayerInfos",void 0),d([f()],bl.prototype,"basemapLegendVisible",void 0),d([f()],bl.prototype,"groundLegendVisible",void 0),d([f()],bl.prototype,"hideLayersNotInCurrentView",void 0),d([f()],bl.prototype,"keepCacheOnDestroy",void 0),d([f({readOnly:!0})],bl.prototype,"loading",null),d([f()],bl.prototype,"respectLayerDefinitionExpression",void 0),d([f()],bl.prototype,"respectLayerVisibility",void 0),d([f()],bl.prototype,"layerInfos",void 0),d([f({readOnly:!0})],bl.prototype,"state",null),d([f()],bl.prototype,"view",void 0),bl=d([V("esri.widgets.Legend.LegendViewModel")],bl);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.7 */let ryt=class LG{constructor(){this._groups=new Map}destroy(){this.removeAll()}add(e,i){if(Array.isArray(e)){const r=this._getOrCreateGroup(i);for(const n of e)this._isHandle(n)&&r.push(n)}else this._isHandle(e)&&this._getOrCreateGroup(i).push(e);return this}forEach(e,i){if(typeof e=="function")this._groups.forEach(r=>r.forEach(e));else{const r=this._getGroup(e);r&&i&&r.forEach(i)}}has(e){return this._groups.has(this._ensureGroupKey(e))}remove(e){if(typeof e!="string"&&Array.isArray(e)){for(const i of e)this.remove(i);return this}return this.has(e)?(this._removeAllFromGroup(this._getGroup(e)),this._groups.delete(this._ensureGroupKey(e)),this):this}removeAll(){return this._groups.forEach(e=>this._removeAllFromGroup(e)),this._groups.clear(),this}_isHandle(e){return e&&(!!e.remove||e instanceof LG)}_getOrCreateGroup(e){if(this.has(e))return this._getGroup(e);const i=[];return this._groups.set(this._ensureGroupKey(e),i),i}_getGroup(e){return this._groups.get(this._ensureGroupKey(e))}_ensureGroupKey(e){return e||"_default_"}_removeAllFromGroup(e){for(const i of e)i instanceof LG?i.removeAll():i.remove()}},nyt=class extends rD{constructor(e){super(),this.destroyed=!1,e==="disconnect"?this.onDisconnected(()=>this.removeAllHandles()):this.onDestroy(()=>this.destroy())}addHandles(e,i){if(this.destroyed){const r=Array.isArray(e)?e:[e];for(const n of r)n.remove();return}this._handles??(this._handles=new ryt),this._handles.add(e,i)}removeHandles(e){var i;(i=this._handles)==null||i.remove(e)}removeAllHandles(){var e;(e=this._handles)==null||e.removeAll()}destroy(){this.destroyed=!0,this.removeAllHandles()}hasHandles(e){var i;return((i=this._handles)==null?void 0:i.has(e))??!1}};const syt=bke(nyt);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.7 */const TX=zhe(IAe);var uk,Vde;let DIe=(Vde=class extends fk{constructor(i){super(i);bi(this,uk);this.setProvisionalExports(void 0)}hostConnected(){this.component.manager.loadedCalled&&HO(this.component)}hostLoad(){this.component.manager.destroyed}hostLoaded(){var n;const{el:i}=this.component,r=((n=i.shadowRoot)==null?void 0:n.firstElementChild)??i.firstElementChild??void 0;i.childElem??(i.childElem=r),oi(this,uk,cn(()=>this.component.view!=null,()=>{this.component.arcgisReady.emit()},{once:!0,initial:!0,sync:!0})),i.isConnected&&HO(this.component)}hostDisconnected(){var i,r,n;typeof this.component.el.childElem=="object"&&((r=(i=this.component.view)==null?void 0:i.ui)==null||r.remove(this.component.el.childElem)),(n=Ze(this,uk))==null||n.remove()}hostUpdate(i){i.has("position")&&this.component.el.childElem!=null&&typeof this.component.position=="string"&&HO(this.component),i.has("referenceElement")&&HO(this.component)}},uk=new WeakMap,Vde);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.7 */const IX=(t,e)=>i=>oyt(i,t);var dk,Ude;let ayt=(Ude=class extends mJ{constructor(i,r){super(i,r);bi(this,dk);new DIe(this.component)}hostLoad(){oi(this,dk,be(()=>this.component.el.view,i=>{this.instance.view=i,this.instance.map=i==null?void 0:i.map},{sync:!0,initial:!0}))}hostDestroy(){var i;(i=Ze(this,dk))==null||i.remove(),super.hostDestroy()}},dk=new WeakMap,Ude);const oyt=bk(ayt);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.7 */const lyt=ct`.esri-widget__heading{color:var(--calcite-color-text-2);margin:0 0 .5rem;font-weight:var(--calcite-font-weight-semibold)}h1.esri-widget__heading{font-size:var(--calcite-font-size-xl)}h2.esri-widget__heading{font-size:var(--calcite-font-size-md)}h3.esri-widget__heading,h4.esri-widget__heading,h5.esri-widget__heading,h6.esri-widget__heading{font-size:var(--calcite-font-size)}.esri-widget{--esri-widget-padding-x: 15px;--esri-widget-padding-y: var(--calcite-spacing-md);--esri-widget-padding: var(--esri-widget-padding-y) var(--esri-widget-padding-x);box-sizing:border-box;color:var(--calcite-color-text-2);background-color:var(--calcite-color-foreground-1);font-size:var(--calcite-font-size);line-height:var(--calcite-font-line-height-relative-tight)}.esri-widget *,.esri-widget :before,.esri-widget :after{box-sizing:inherit}.esri-widget.esri-widget--disabled>*{opacity:.4;pointer-events:none}.esri-widget.esri-widget--compact{--esri-widget-padding-y: 0;--esri-widget-padding-x: 0}.esri-widget__anchor{color:var(--calcite-color-text-2)}.esri-widget__anchor:hover{color:var(--calcite-color-text-3)}.esri-widget__anchor:hover,.esri-widget__anchor:focus{text-decoration:underline}.esri-widget__anchor--disabled{opacity:.4;pointer-events:none}.esri-widget__header{background-color:var(--calcite-color-foreground-1);flex:1 0 100%;justify-content:space-between;align-items:center;width:100%;min-height:48px;padding:12px 0 12px 15px;display:flex}.esri-widget__header .esri-widget__heading{width:calc(100% - 48px);text-align:initial;color:var(--calcite-color-text-1);align-items:center;margin:0;padding:0;display:flex}.esri-widget__header-button{appearance:none;cursor:pointer;color:var(--calcite-color-text-2);background-color:var(--calcite-color-foreground-1);border:none;flex:0 0 48px;justify-content:center;align-self:stretch;align-items:center;width:48px;padding:0;display:flex}.esri-widget__footer{background-color:var(--calcite-color-foreground-1);justify-content:center;align-items:center;width:100%;min-height:48px;display:flex}.esri-widget__footer-pagination{color:var(--calcite-color-text-2);justify-content:space-between;align-items:center;display:flex}.esri-widget__footer-pagination-previous-button,.esri-widget__footer-pagination-next-button{cursor:pointer;background-color:var(--calcite-color-foreground-1);border:0;margin:0 7px;padding:12px 15px;transition:background-color .125s ease-in-out}.esri-widget__footer-pagination-previous-button:hover,.esri-widget__footer-pagination-previous-button:focus,.esri-widget__footer-pagination-next-button:hover,.esri-widget__footer-pagination-next-button:focus{color:var(--calcite-color-text-1);background-color:var(--calcite-color-foreground-1)}.esri-menu{visibility:hidden;z-index:1;background-clip:padding;background-color:var(--calcite-color-foreground-1);background-clip:padding-box;width:100%;max-height:0;margin:2px 0 0;padding:0;font-size:var(--calcite-font-size);line-height:var(--calcite-spacing-xl);position:absolute;top:100%;left:0;overflow:hidden;box-shadow:0 1px 2px #0000004d}.esri-menu .esri-menu__header{color:var(--calcite-color-text-inverse);background-color:var(--calcite-color-inverse);padding:6px 12px}.esri-menu__list{margin:0;padding:0;list-style:none}.esri-menu__list-item{cursor:pointer;border-top:1px solid #adadad4d;border-left:3px solid #0000;padding:.8em 1em}.esri-menu__list-item [class^=esri-icon-],.esri-menu__list-item [class*=" esri-icon-"]{padding-right:2.8px}.esri-menu__list-item:first-child{border-top:none}.esri-menu__list-item--focus,.esri-menu__list-item:hover,.esri-menu__list-item:focus{background-color:var(--calcite-color-foreground-1)}.esri-menu__list-item:active{background-color:var(--calcite-color-foreground-current)}.esri-menu__list-item--active,.esri-menu__list-item--active:hover,.esri-menu__list-item--active:focus{background-color:var(--calcite-color-foreground-1);border-left-color:var(--calcite-color-brand)}.esri-widget__table{border-collapse:collapse;color:var(--calcite-color-text-1);border:none;width:100%;line-height:var(--calcite-font-line-height-relative-tight)}.esri-widget__table tr:nth-child(odd){background-color:var(--calcite-color-transparent)}.esri-widget__table tr:nth-child(2n){background-color:var(--calcite-color-transparent-press)}.esri-widget__table tr a{color:var(--calcite-color-text-2)}.esri-widget__table tr a:hover,.esri-widget__table tr a:focus{color:var(--calcite-color-text-1)}.esri-widget__table tr td,.esri-widget__table tr th{vertical-align:top;word-break:break-word;padding:.5em .7em;font-size:var(--calcite-font-size-sm);font-weight:var(--calcite-font-weight-regular)}.esri-widget__table tr th{text-align:left;border-right:3px solid #0000000d;width:50%}.esri-widget__table tr td{width:50%}.esri-input{color:var(--calcite-color-text-1);background-color:var(--calcite-color-foreground-1);border:1px solid #959595;font-size:var(--calcite-font-size)}.esri-input::-ms-clear{display:none}.esri-input::placeholder{opacity:1;color:var(--calcite-color-text-2)}.esri-input:placeholder-shown{text-overflow:ellipsis}.esri-input[type=text],.esri-input[type=password],.esri-input[type=number]{height:32px;padding:0 .5em}calcite-combobox.esri-input{border:none}.esri-widget__content--empty{text-align:center;color:var(--calcite-color-border-input);flex-flow:column wrap;align-items:center;padding:18px 22px;display:flex}.esri-widget__content--empty h1.esri-widget__heading,.esri-widget__content--empty h2.esri-widget__heading,.esri-widget__content--empty h3.esri-widget__heading,.esri-widget__content--empty h4.esri-widget__heading,.esri-widget__content--empty h5.esri-widget__heading{font-weight:var(--calcite-font-weight-regular)}.esri-widget__content-illustration--empty{width:128px;padding:1rem 0}.esri-widget__content-icon--empty{width:32px;padding:.5rem 0}.esri-select{appearance:none;cursor:pointer;color:var(--calcite-color-text-2);background:var(--calcite-color-foreground-1) url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='-8 -8 32 32' width='32' height='32'%3E%3Cpath d='M8 11.207l-4-4V5.793l4 4 4-4v1.414z' fill='%23adadad' fillrule='nonzero'/%3E%3C/svg%3E") 100% no-repeat;border:1px solid #959595;border-radius:0;width:100%;height:32px;margin:0;padding:0 .5em;font-family:inherit;font-size:.85em;display:block}.esri-select[disabled]{cursor:auto}.esri-select::-ms-expand{display:none}.esri-disabled a,.esri-disabled [role=menu],.esri-disabled [role=checkbox],.esri-disabled [class^=esri-icon-],.esri-disabled [class*=" esri-icon-"]{color:var(--calcite-color-text-3)}.keynav-mode .esri-widget:focus,.keynav-mode .esri-widget :focus{z-index:1;outline-offset:2px;outline:2px solid #adadad}.esri-widget__loader-animation{border:.15em solid #adadad4d;border-top-color:var(--calcite-color-border-input);border-radius:100%;width:1em;height:1em;font-size:var(--calcite-font-size-md);animation:1.25s linear infinite esri-rotate;display:block;transform:translateZ(0)}:dir(rtl) .esri-widget__table th{text-align:right;border-left:3px solid #0000000d;border-right:none}:dir(rtl) .esri-select{background-position:0}:dir(rtl) .esri-menu__list-item{border-left:none;border-right:3px solid #0000}:dir(rtl) .esri-menu__list-item [class^=esri-icon-],:dir(rtl) .esri-menu__list-item [class*=" esri-icon-"]{padding-left:2px;padding-right:0}:dir(rtl) .esri-menu__list-item--active{border-right-color:var(--calcite-color-brand)}.esri-icon-font-fallback-text{clip:rect(0 0 0 0);width:1px;height:1px;position:absolute;overflow:hidden}.esri-rotating{animation:1.25s linear infinite esri-rotate;transform:translateZ(0)}.esri-clearfix:before,.esri-clearfix:after{content:" ";display:table}.esri-clearfix:after{clear:both}.esri-interactive{cursor:pointer}.esri-hidden{display:none!important}.esri-invisible{visibility:hidden!important}.esri-offscreen{position:absolute;top:-999em;left:-999em}.esri-match-height{flex-direction:column;flex:auto;display:flex;overflow:hidden}:host{overflow:auto;width:var(--arcgis-legend-internal-width, 300px)}:host([card-style-layout="side-by-side"]){--arcgis-legend-internal-width: auto}`,cyt=IX(bl);var Rw;let uyt=(Rw=class extends dt{constructor(){var e;super(...arguments),this.messages=TX({}),this.final=syt("destroy"),this.viewModel=cyt(this),this._isCardStyle=!1,this.view=this.viewModel.view,this.icon="legend",this.activeLayerInfos=this.viewModel.activeLayerInfos,this.basemapLegendVisible=this.viewModel.basemapLegendVisible,this.headingLevel=3,this.hideLayersNotInCurrentView=this.viewModel.hideLayersNotInCurrentView,this.respectLayerDefinitionExpression=this.viewModel.respectLayerDefinitionExpression,this.layerInfos=this.viewModel.layerInfos,this.loading=this.viewModel.loading,this.legendStyle="classic",this.autoDestroyDisabled=!1,this.label=(e=this.messages)==null?void 0:e.componentLabel,this.state=this.viewModel.state,this.arcgisPropertyChange=aD()("state"),this.arcgisReady=Re()}get ignoreLayerVisibility(){return!this.viewModel.respectLayerVisibility}set ignoreLayerVisibility(e){this.viewModel.respectLayerVisibility=!e}get respectLayerVisibilityDisabled(){return!this.viewModel.respectLayerVisibility}set respectLayerVisibilityDisabled(e){this.viewModel.respectLayerVisibility=!e}async destroy(){await this.manager.destroy()}loaded(){this.manager.onLifecycle(()=>[ca(()=>this.el.view,"resize",()=>this.requestUpdate()),ca(()=>this.activeLayerInfos,"change",()=>this._refreshActiveLayerInfos(this.activeLayerInfos)),be(()=>[this.cardStyleLayout,this.legendStyle,typeof this.legendStyle=="object"?this.legendStyle.type:void 0,typeof this.legendStyle=="object"?this.legendStyle.layout:void 0],()=>{const e=this.legendStyle,i=typeof e=="object"?e:{type:e};this._isCardStyle=i.type==="card",this._isCardStyle?(this.cardStyleLayout=this.cardStyleLayout||i.layout||"auto",this.cardStyleLayout==="auto"&&this.el.closest("arcgis-expand")&&(this.cardStyleLayout="stack"),this.setAttribute("card-style-layout",this.cardStyleLayout)):this.removeAttribute("card-style-layout")},{initial:!0})])}_refreshActiveLayerInfos(e){e.forEach(i=>{this.final.removeHandles(`version_${i.layer.uid}`),this._renderOnActiveLayerInfoChange(i)}),this.requestUpdate()}render(){return q`<div class=${H(ar(yT.widget,{[yT.panel]:!this._isCardStyle}))}>${this._isCardStyle&&this.view?q`<arcgis-legend-card-view .activeLayerInfos=${this.activeLayerInfos} .headingLevel=${this.headingLevel} .messages=${this.messages} .layout=${this.cardStyleLayout} .view=${this.view}></arcgis-legend-card-view>`:q`<arcgis-legend-classic-view .activeLayerInfos=${this.activeLayerInfos} .headingLevel=${this.headingLevel} .messages=${this.messages}></arcgis-legend-classic-view>`}</div>`}_renderOnActiveLayerInfoChange(e){const i=be(()=>e.version,()=>this.requestUpdate());this.final.addHandles(i,`version_${e.layer.uid}`);const r=ca(()=>e.children,"change",()=>e.children.forEach(n=>this._renderOnActiveLayerInfoChange(n)));this.final.addHandles(r,`version_${e.layer.uid}`),e.children.forEach(n=>this._renderOnActiveLayerInfoChange(n))}},Rw.properties={_isCardStyle:16,view:0,referenceElement:1,position:1,icon:1,activeLayerInfos:0,basemapLegendVisible:5,headingLevel:9,hideLayersNotInCurrentView:5,respectLayerDefinitionExpression:5,ignoreLayerVisibility:5,respectLayerVisibilityDisabled:5,layerInfos:0,loading:39,cardStyleLayout:1,legendStyle:1,autoDestroyDisabled:5,messageOverrides:0,label:1,state:3},Rw.styles=lyt,Rw);yr("arcgis-legend",uyt);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const dyt={trigger:"trigger"},sB={content:"content",wrapper:"wrapper",triggerContainer:"trigger-container"},jue="calcite-dropdown",x3={menuButton:t=>`${jue}-${t}-menubutton`,menu:t=>`${jue}-${t}-menu`},hyt=ct`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:inline-block}.wrapper{--calcite-floating-ui-z-index: var(--calcite-z-index-dropdown);inline-size:max-content;display:none;max-inline-size:100vw;max-block-size:100vh;inset-block-start:0;left:0;z-index:var(--calcite-floating-ui-z-index)}@starting-style{.wrapper{opacity:0;inset-block-start:0;left:0}}.wrapper .calcite-floating-ui-anim{position:relative;transition-duration:var(--calcite-floating-ui-transition);transition-property:inset-block-start,left,opacity,display;transition-behavior:allow-discrete;opacity:0;box-shadow:0 0 16px #00000029;z-index:var(--calcite-z-index);border-radius:.25rem}.wrapper[data-placement^=bottom] .calcite-floating-ui-anim{inset-block-start:-5px}.wrapper[data-placement^=top] .calcite-floating-ui-anim{inset-block-start:5px}.wrapper[data-placement^=left] .calcite-floating-ui-anim{left:5px}.wrapper[data-placement^=right] .calcite-floating-ui-anim{left:-5px}.wrapper[data-placement] .calcite-floating-ui-anim--active{opacity:1;inset-block-start:0;left:0}@starting-style{.wrapper[data-placement] .calcite-floating-ui-anim--active{opacity:0}}.content{max-height:45vh;width:auto;overflow-y:auto;overflow-x:hidden;inline-size:var(--calcite-dropdown-width, var(--calcite-internal-dropdown-width));background-color:var(--calcite-dropdown-background-color, var(--calcite-color-foreground-1))}.trigger-container{position:relative;display:flex;height:100%;flex:1 1 auto;word-wrap:break-word;word-break:break-word}.width-s{--calcite-internal-dropdown-width: 12rem}.width-m{--calcite-internal-dropdown-width: 14rem}.width-l{--calcite-internal-dropdown-width: 16rem}@media (forced-colors: active){:host([open]) .wrapper{border:var(--calcite-border-width-sm) solid canvasText}}:host([hidden]){display:none}[hidden]{display:none}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}`,eE=class eE extends dt{constructor(){super(),this.focusLastDropdownItem=!1,this.groups=[],this.guid=Mc(),this.items=[],this.mutationObserver=Gn("mutation",()=>this.updateItems()),this.transitionProp="opacity",this.resizeObserver=Gn("resize",e=>this.resizeObserverCallback(e)),this.focusSetter=dn()(this),this.closeOnSelectDisabled=!1,this.disabled=!1,this.maxItems=0,this.offsetDistance=0,this.offsetSkidding=0,this.open=!1,this.overlayPositioning="absolute",this.placement=aG,this.scale="m",this.selectedItems=[],this.type="click",this.calciteDropdownBeforeClose=Re({cancelable:!1}),this.calciteDropdownBeforeOpen=Re({cancelable:!1}),this.calciteDropdownClose=Re({cancelable:!1}),this.calciteDropdownOpen=Re({cancelable:!1}),this.calciteDropdownSelect=Re({cancelable:!1}),this.listenOn(window,"click",this.closeCalciteDropdownOnClick),this.listen("calciteInternalDropdownCloseRequest",this.closeCalciteDropdownOnEvent),this.listenOn(window,"calciteDropdownOpen",this.closeCalciteDropdownOnOpenEvent),this.listen("pointerenter",this.pointerEnterHandler),this.listen("pointerleave",this.pointerLeaveHandler),this.listen("calciteInternalDropdownItemKeyEvent",this.calciteInternalDropdownItemKeyEvent),this.listen("calciteInternalDropdownItemSelect",this.handleItemSelect)}async reposition(e=!1){const{filteredFlipPlacements:i,floatingEl:r,offsetDistance:n,offsetSkidding:s,overlayPositioning:a,placement:o,referenceEl:l}=this;return ZJ(this,{floatingEl:r,referenceEl:l,offsetDistance:n,offsetSkidding:s,overlayPositioning:a,placement:o,flipPlacements:i,type:"menu"},e)}async setFocus(e){return this.focusSetter(()=>this.referenceEl,e)}connectedCallback(){var e;super.connectedCallback(),(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0,subtree:!0}),this.setFilteredPlacements(),this.updateItems(),C$(this)}willUpdate(e){e.has("open")&&(this.hasUpdated||this.open!==!1)&&this.openHandler(),e.has("disabled")&&(this.hasUpdated||this.disabled!==!1)&&this.handleDisabledChange(this.disabled),e.has("flipPlacements")&&this.flipPlacementsHandler(),e.has("maxItems")&&this.hasUpdated&&this.setMaxScrollerHeight(),this.hasUpdated&&(e.has("offsetDistance")&&this.offsetDistance!==0||e.has("offsetSkidding")&&this.offsetSkidding!==0||e.has("overlayPositioning")&&this.overlayPositioning!=="absolute"||e.has("placement")&&this.placement!==aG)&&this.reposition(!0),e.has("scale")&&(this.hasUpdated||this.scale!=="m")&&this.handlePropsChange()}updated(){Vs(this)}loaded(){this.updateSelectedItems(),C$(this)}disconnectedCallback(){var e,i;super.disconnectedCallback(),(e=this.mutationObserver)==null||e.disconnect(),(i=this.resizeObserver)==null||i.disconnect(),H5(this)}openHandler(){IT(this),!this.disabled&&this.reposition(!0)}handleDisabledChange(e){e||(this.open=!1)}flipPlacementsHandler(){this.setFilteredPlacements(),this.reposition(!0)}handlePropsChange(){this.updateItems(),this.updateGroupProps()}closeCalciteDropdownOnClick(e){this.disabled||!this.open||e.composedPath().includes(this.el)||this.closeCalciteDropdown(!1)}closeCalciteDropdownOnEvent(e){this.closeCalciteDropdown(),e.stopPropagation()}closeCalciteDropdownOnOpenEvent(e){e.composedPath().includes(this.el)||(this.open=!1)}pointerEnterHandler(){this.disabled||this.type!=="hover"||this.toggleDropdown()}pointerLeaveHandler(){this.disabled||this.type!=="hover"||this.closeCalciteDropdown()}getTraversableItems(){return this.items.filter(e=>!e.disabled&&!e.hidden)}calciteInternalDropdownItemKeyEvent(e){const{keyboardEvent:i}=e.detail,r=i.target,n=this.getTraversableItems();switch(i.key){case"Tab":this.open=!1,this.updateTabIndexOfItems(r);break;case"ArrowDown":Pm(n,r,"next");break;case"ArrowUp":Pm(n,r,"previous");break;case"Home":Pm(n,r,"first");break;case"End":Pm(n,r,"last");break}e.stopPropagation()}handleItemSelect(e){this.updateSelectedItems(),e.stopPropagation(),this.calciteDropdownSelect.emit(),(!this.closeOnSelectDisabled||e.detail.requestedDropdownGroup.selectionMode==="none")&&this.closeCalciteDropdown(),e.stopPropagation()}setFilteredPlacements(){const{el:e,flipPlacements:i}=this;this.filteredFlipPlacements=i?aTe(i,e):null}updateTriggers(e){this.triggers=e.target.assignedElements({flatten:!0}),this.reposition(!0)}updateItems(){this.items=this.groups.map(e=>Array.from(e==null?void 0:e.querySelectorAll("calcite-dropdown-item"))).reduce((e,i)=>[...e,...i],[]),this.updateSelectedItems(),this.reposition(!0),this.items.forEach(e=>e.scale=this.scale)}updateGroups(e){const i=e.target.assignedElements({flatten:!0}).filter(r=>r==null?void 0:r.matches("calcite-dropdown-group"));this.groups=i,this.updateItems(),this.updateGroupProps()}updateGroupProps(){this.groups.forEach((e,i)=>{e.scale=this.scale,e.position=i})}resizeObserverCallback(e){e.forEach(({target:i})=>{i===this.referenceEl?this.setDropdownWidth():i===this.scrollerEl&&this.setMaxScrollerHeight()})}setDropdownWidth(){const{referenceEl:e,scrollerEl:i}=this;!i||!e||(i.style.minWidth=`${e.clientWidth}px`)}setMaxScrollerHeight(){const{maxItems:e,items:i,scrollerEl:r}=this;if(!r)return;const n=i.length>=e&&e>0?this.getYDistanceFromScroller(i.at(e-1)):0;r.style.maxBlockSize=n>0?`${n}px`:"",this.reposition(!0)}setScrollerAndTransitionEl(e){lE(this.resizeObserver,this.scrollerEl,e),this.scrollerEl=e,this.transitionEl=e}onBeforeOpen(){this.focusOnFirstActiveOrDefaultItem(),this.calciteDropdownBeforeOpen.emit()}onOpen(){this.calciteDropdownOpen.emit()}onBeforeClose(){this.calciteDropdownBeforeClose.emit()}onClose(){this.calciteDropdownClose.emit(),q5(this)}setReferenceEl(e){lE(this.resizeObserver,this.referenceEl,e),this.referenceEl=e,C$(this)}setFloatingEl(e){this.floatingEl=e,C$(this)}keyDownHandler(e){if(!e.composedPath().includes(this.referenceEl))return;const{defaultPrevented:i,key:r}=e;if(!i){if(r==="Escape"){this.closeCalciteDropdown(),e.preventDefault();return}if(this.open&&e.shiftKey&&r==="Tab"){this.closeCalciteDropdown(),e.preventDefault();return}vk(r)?(this.toggleDropdown(),e.preventDefault()):(r==="ArrowDown"||r==="ArrowUp")&&(e.preventDefault(),this.focusLastDropdownItem=r==="ArrowUp",this.open=!0)}}updateSelectedItems(){this.selectedItems=this.items.filter(e=>e.selected)}getYDistanceFromScroller(e){const i=e.getBoundingClientRect();return e.offsetTop+i.height}closeCalciteDropdown(e=!0){this.open=!1,e&&HS(this.triggers[0])}async focusOnFirstActiveOrDefaultItem(){const i=this.getTraversableItems().find(r=>r.selected)||(this.focusLastDropdownItem?this.items.at(-1):this.items[0]);this.focusLastDropdownItem=!1,i&&(await this.updateComplete,await UB(),await UB(),await HS(i),i.scrollIntoView({block:"nearest"}))}toggleDropdown(){this.open=!this.open}updateTabIndexOfItems(e){this.items.forEach(i=>{i.tabIndex=e!==i?-1:0})}render(){const{open:e,guid:i}=this;return Us({disabled:this.disabled,children:q`<div class=${H(sB.triggerContainer)} id=${x3.menuButton(i)??Xe} @click=${this.toggleDropdown} @keydown=${this.keyDownHandler} ${gt(this.setReferenceEl)}><slot aria-controls=${x3.menu(i)??Xe} .ariaExpanded=${e} aria-haspopup=menu name=${dyt.trigger} @slotchange=${this.updateTriggers}></slot></div><div .ariaHidden=${!e} class=${H({[sB.wrapper]:!0,[mG("width",this.width,this.widthScale)]:!!(this.width||this.widthScale)})} ${gt(this.setFloatingEl)}><div aria-labelledby=${x3.menuButton(i)??Xe} class=${H({[sB.content]:!0,[dT.animation]:!0,[dT.animationActive]:e})} id=${x3.menu(i)??Xe} role=menu ${gt(this.setScrollerAndTransitionEl)}><slot @slotchange=${this.updateGroups}></slot></div></div>`})}};eE.properties={closeOnSelectDisabled:[7,{},{reflect:!0,type:Boolean}],disabled:[7,{},{reflect:!0,type:Boolean}],flipPlacements:[0,{},{attribute:!1}],maxItems:[11,{},{reflect:!0,type:Number}],offsetDistance:[11,{},{type:Number,reflect:!0}],offsetSkidding:[11,{},{reflect:!0,type:Number}],open:[7,{},{reflect:!0,type:Boolean}],overlayPositioning:[3,{},{reflect:!0}],placement:[3,{},{reflect:!0}],scale:[3,{},{reflect:!0}],selectedItems:[0,{},{attribute:!1}],type:[3,{},{reflect:!0}],widthScale:[3,{},{reflect:!0}],width:[3,{},{reflect:!0}]},eE.shadowRootOptions={mode:"open",delegatesFocus:!0},eE.styles=hyt;let Bz=eE;ci("calcite-dropdown",Bz);const g3t=Object.freeze(Object.defineProperty({__proto__:null,Dropdown:Bz},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const ky={container:"container",containerNone:"container--none-selection",icon:"dropdown-item-icon",iconEnd:"dropdown-item-icon--end",iconStart:"dropdown-item-icon--start",itemContent:"dropdown-item-content",link:"dropdown-link"},Vue={check:"check",bulletPoint:"bullet-point"};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const pyt=ct`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{position:relative;display:flex;flex-grow:1;align-items:center;outline-color:transparent}.container{position:relative;display:flex;flex-grow:1;cursor:pointer;align-items:center;text-decoration-line:none;color:var(--calcite-dropdown-item-text-color, var(--calcite-color-text-3));text-align:start;outline-color:transparent}.container a{outline:none;position:relative;display:flex;flex-grow:1;cursor:pointer;align-items:center;text-decoration-line:none;color:var(--calcite-dropdown-item-text-color, var(--calcite-color-text-3))}.dropdown-item-content{flex:1 1 auto;padding-block:.125rem}.dropdown-item-icon{position:relative;opacity:0;transition-timing-function:cubic-bezier(.4,0,.2,1);transform:scale(.9)}:host([scale=s]) .container{padding-block:.25rem;padding-inline:.5rem;font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=s]) .dropdown-item-icon,:host([scale=s]) .dropdown-item-icon--start{padding-inline-end:var(--calcite-spacing-sm)}:host([scale=s]) .dropdown-item-icon--end{padding-inline-start:var(--calcite-spacing-sm)}:host([scale=m]) .container{padding-block:.5rem;padding-inline:.75rem;font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=m]) .dropdown-item-icon,:host([scale=m]) .dropdown-item-icon--start{padding-inline-end:var(--calcite-spacing-md)}:host([scale=m]) .dropdown-item-icon--end{padding-inline-start:var(--calcite-spacing-md)}:host([scale=l]) .container{padding-block:.625rem;padding-inline:1rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l]) .dropdown-item-icon,:host([scale=l]) .dropdown-item-icon--start{padding-inline-end:var(--calcite-spacing-lg)}:host([scale=l]) .dropdown-item-icon--end{padding-inline-start:var(--calcite-spacing-lg)}:host(:focus) .container{text-decoration-line:none;outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}:host(:hover:not([disabled])) .container{background-color:var(--calcite-dropdown-item-background-color-hover, var(--calcite-color-foreground-2))}:host(:active:not([disabled])) .container{background-color:var(--calcite-dropdown-item-background-color-press, var(--calcite-color-foreground-3))}:host(:hover:not([disabled])) .container,:host(:active:not([disabled])) .container{text-decoration-line:none;color:var(--calcite-dropdown-item-text-color-press, var(--calcite-color-text-1))}:host(:hover:not([disabled])) .dropdown-link,:host(:active:not([disabled])) .dropdown-link{color:var(--calcite-dropdown-item-text-color-press, var(--calcite-color-text-1))}:host([selected]) .container:not(.container--none-selection),:host([selected]) .dropdown-link{font-weight:var(--calcite-font-weight-medium);color:var(--calcite-dropdown-item-text-color-press, var(--calcite-color-text-1))}:host([selected]) .container:not(.container--none-selection) calcite-icon,:host([selected]) .dropdown-link calcite-icon{color:var(--calcite-dropdown-item-icon-color-press, var(--calcite-color-brand))}:host(:hover:not([disabled])) .dropdown-item-icon{color:var(--calcite-dropdown-item-icon-color-hover)}:host([selected]) .dropdown-item-icon{opacity:1}:host([hidden]){display:none}[hidden]{display:none}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}`,EN=class EN extends dt{constructor(){super(),this.childLink=vi(),this.focusSetter=dn()(this),this.disabled=!1,this.scale="m",this.selected=!1,this.selectionMode="single",this.calciteDropdownItemSelect=Re({cancelable:!1}),this.calciteInternalDropdownCloseRequest=Re({cancelable:!1}),this.calciteInternalDropdownItemKeyEvent=Re({cancelable:!1}),this.calciteInternalDropdownItemSelect=Re({cancelable:!1}),this.listen("click",this.onClick),this.listen("keydown",this.keyDownHandler),this.listenOn(document.body,"calciteInternalDropdownItemChange",this.updateActiveItemOnChange)}async setFocus(e){return this.focusSetter(()=>this.el,e)}connectedCallback(){super.connectedCallback(),this.initialize()}load(){this.initialize()}updated(){Vs(this)}onClick(){this.emitRequestedItem()}keyDownHandler(e){switch(e.key){case" ":case"Enter":this.emitRequestedItem(),this.href&&this.childLink.value.click(),e.preventDefault();break;case"Escape":this.calciteInternalDropdownCloseRequest.emit(),e.preventDefault();break;case"Tab":this.calciteInternalDropdownItemKeyEvent.emit({keyboardEvent:e});break;case"ArrowUp":case"ArrowDown":case"Home":case"End":e.preventDefault(),this.calciteInternalDropdownItemKeyEvent.emit({keyboardEvent:e});break}}updateActiveItemOnChange(e){e.composedPath().includes(this.parentDropdownGroupEl)&&(this.requestedDropdownGroup=e.detail.requestedDropdownGroup,this.requestedDropdownItem=e.detail.requestedDropdownItem,this.determineActiveItem()),e.stopPropagation()}initialize(){this.parentDropdownGroupEl=this.el.closest("calcite-dropdown-group"),this.selectionMode==="none"&&(this.selected=!1)}determineActiveItem(){switch(this.selectionMode){case"multiple":this.el===this.requestedDropdownItem&&(this.selected=!this.selected);break;case"single":this.el===this.requestedDropdownItem?this.selected=!0:this.requestedDropdownGroup===this.parentDropdownGroupEl&&(this.selected=!1);break;case"none":this.selected=!1;break}}emitRequestedItem(){this.calciteDropdownItemSelect.emit(),this.calciteInternalDropdownItemSelect.emit({requestedDropdownItem:this.el,requestedDropdownGroup:this.parentDropdownGroupEl})}render(){const{href:e,selectionMode:i,label:r,iconFlipRtl:n}=this,s=q`<calcite-icon class=${H(ky.iconStart)} .flipRtl=${n==="start"||n==="both"} .icon=${this.iconStart} .scale=${gr(this.scale)}></calcite-icon>`,a=q`<span class=${H(ky.itemContent)}><slot></slot></span>`,o=q`<calcite-icon class=${H(ky.iconEnd)} .flipRtl=${n==="end"||n==="both"} .icon=${this.iconEnd} .scale=${gr(this.scale)}></calcite-icon>`,l=this.iconStart&&this.iconEnd?[s,a,o]:this.iconStart?[s,a]:this.iconEnd?[a,o]:a,c=e?q`<a .ariaLabel=${r} class=${H(ky.link)} href=${e??Pe} rel=${this.rel??Pe} tabindex=-1 target=${this.target??Pe} ${gt(this.childLink)}>${l}</a>`:l,h=e?null:i==="single"?"menuitemradio":i==="multiple"?"menuitemcheckbox":"menuitem",m=i!=="none"?yk(this.selected):null,{disabled:g}=this;return this.el.ariaChecked=m,this.el.ariaLabel=e?"":r,this.el.role=h,wu(this.el,"tabIndex",g?-1:0),Us({disabled:g,children:q`<div class=${H({[ky.container]:!0,[ky.containerNone]:i==="none"})}>${i!=="none"?q`<calcite-icon class=${H(ky.icon)} .icon=${i==="multiple"?Vue.check:Vue.bulletPoint} .scale=${gr(this.scale)}></calcite-icon>`:null}${c}</div>`})}};EN.properties={disabled:[7,{},{reflect:!0,type:Boolean}],href:[3,{},{reflect:!0}],iconEnd:[3,{},{reflect:!0}],iconFlipRtl:[3,{},{reflect:!0}],iconStart:[3,{},{reflect:!0}],label:1,rel:[3,{},{reflect:!0}],scale:[3,{},{reflect:!0}],selected:[7,{},{reflect:!0,type:Boolean}],selectionMode:1,target:[3,{},{reflect:!0}]},EN.styles=pyt;let qz=EN;ci("calcite-dropdown-item",qz);const y3t=Object.freeze(Object.defineProperty({__proto__:null,DropdownItem:qz},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Uue={title:"dropdown-title",separator:"dropdown-separator"},fyt=ct`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{display:block}.container{text-align:start}.dropdown-title{margin-block-end:-1px;display:block;cursor:default;overflow-wrap:break-word;border-width:0px;border-block-end-width:1px;border-style:solid;font-weight:var(--calcite-font-weight-bold);border-color:var(--calcite-dropdown-group-border-color, var(--calcite-color-border-3));color:var(--calcite-dropdown-group-title-text-color, var(--calcite-color-text-2))}.dropdown-separator{display:block;block-size:1px;background-color:var(--calcite-dropdown-group-border-color, var(--calcite-color-border-3))}:host([scale=s]){font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=s]) .dropdown-title{padding:.5rem}:host([scale=m]){font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=m]) .dropdown-title{padding:.75rem}:host([scale=l]){font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l]) .dropdown-title{padding:1rem}:host([hidden]){display:none}[hidden]{display:none}`,tE=class tE extends dt{constructor(){super(),this.mutationObserver=Gn("mutation",()=>this.updateItems()),this.position=-1,this.scale="m",this.selectionMode="single",this.calciteInternalDropdownItemChange=Re({cancelable:!1}),this.listen("calciteInternalDropdownItemSelect",this.updateActiveItemOnChange)}connectedCallback(){var e;super.connectedCallback(),this.updateItems(),(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0})}willUpdate(e){e.has("selectionMode")&&(this.hasUpdated||this.selectionMode!=="single")&&this.updateItems()}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this.mutationObserver)==null||e.disconnect()}updateActiveItemOnChange(e){this.requestedDropdownGroup=e.detail.requestedDropdownGroup,this.requestedDropdownItem=e.detail.requestedDropdownItem,this.calciteInternalDropdownItemChange.emit({requestedDropdownGroup:this.requestedDropdownGroup,requestedDropdownItem:this.requestedDropdownItem})}updateItems(){Array.from(this.el.querySelectorAll("calcite-dropdown-item")).forEach(e=>e.selectionMode=this.selectionMode)}render(){const e=this.groupTitle?q`<span aria-hidden=true class=${H(Uue.title)}>${this.groupTitle}</span>`:null,i=this.position>0?q`<div class=${H(Uue.separator)} role=separator></div>`:null;return this.el.ariaLabel=this.groupTitle,this.el.role="group",q`<div class=${H({[ky.container]:!0})}>${i}${e}<slot></slot></div>`}};tE.properties={groupTitle:[3,{},{reflect:!0}],position:[9,{},{type:Number}],scale:[3,{},{reflect:!0}],selectionMode:[3,{},{reflect:!0}]},tE.shadowRootOptions={mode:"open",delegatesFocus:!0},tE.styles=fyt;let Hz=tE;ci("calcite-dropdown-group",Hz);const v3t=Object.freeze(Object.defineProperty({__proto__:null,DropdownGroup:Hz},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Bue={handle:"handle",dropdown:"dropdown"},que={drag:"drag",blank:"blank"},aB={label:"{label}",position:"{position}",total:"{total}"},Hue=["top","up","down","bottom"],myt={trigger:"trigger"},oB={add:"add",move:"move",reorder:"reorder"},gyt=ct`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex}.dropdown{block-size:100%}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host([hidden]){display:none}[hidden]{display:none}`,kN=class kN extends dt{constructor(){super(...arguments),this.focusSetter=dn()(this),this.disabled=!1,this.messages=un({blocking:!0}),this.addToItems=[],this.moveToItems=[],this.open=!1,this.overlayPositioning="absolute",this.placement=aG,this.scale="m",this.sortDisabled=!1,this.calciteSortHandleBeforeClose=Re({cancelable:!1}),this.calciteSortHandleBeforeOpen=Re({cancelable:!1}),this.calciteSortHandleClose=Re({cancelable:!1}),this.calciteSortHandleMove=Re({cancelable:!0}),this.calciteSortHandleAdd=Re({cancelable:!0}),this.calciteSortHandleOpen=Re({cancelable:!1}),this.calciteSortHandleReorder=Re({cancelable:!0})}get hasSetInfo(){return typeof this.setPosition=="number"&&typeof this.setSize=="number"}get hasValidSetInfo(){return this.hasSetInfo?this.setPosition>0&&this.setSize>1:!0}get hasReorderItems(){return!this.sortDisabled&&this.hasValidSetInfo}get hasNoItems(){return!this.hasReorderItems&&this.moveToItems.length<1&&this.addToItems.length<1}async setFocus(e){return this.focusSetter(()=>this.dropdownEl,e)}willUpdate(e){e.has("open")&&(this.hasUpdated||this.open!==!1)&&this.openHandler()}updated(){Vs(this)}openHandler(){if(this.disabled){this.open=!1;return}this.dropdownEl&&(this.dropdownEl.open=this.open)}setDropdownEl(e){e&&(this.dropdownEl=e,this.openHandler())}getLabel(){const{label:e,messages:i,setPosition:r,setSize:n,hasSetInfo:s}=this;if(!s)return e??"";let a=e?i.repositionLabel.replace(aB.label,e):i.reposition;return a=a.replace(aB.position,r?r.toString():""),a.replace(aB.total,n?n.toString():"")}handleBeforeOpen(e){e.stopPropagation(),this.calciteSortHandleBeforeOpen.emit()}handleOpen(e){e.stopPropagation(),this.calciteSortHandleOpen.emit(),this.open=!0}handleBeforeClose(e){e.stopPropagation(),this.calciteSortHandleBeforeClose.emit()}handleClose(e){e.stopPropagation(),this.calciteSortHandleClose.emit(),this.open=!1}handleReorder(e){this.calciteSortHandleReorder.emit({reorder:e.target.dataset.value})}handleMoveTo(e){const i=e.target.dataset.id,r=this.moveToItems.find(n=>n.id===i);this.calciteSortHandleMove.emit({moveTo:r})}handleAddTo(e){const i=e.target.dataset.id,r=this.addToItems.find(n=>n.id===i);this.calciteSortHandleAdd.emit({addTo:r})}render(){const{disabled:e,flipPlacements:i,open:r,overlayPositioning:n,placement:s,scale:a,widthScale:o,hasNoItems:l}=this,c=this.getLabel(),h=e||l;return Us({disabled:e,children:q`<calcite-dropdown class=${H(Bue.dropdown)} .disabled=${h} .flipPlacements=${i} @calciteDropdownBeforeClose=${this.handleBeforeClose} @calciteDropdownBeforeOpen=${this.handleBeforeOpen} @calciteDropdownClose=${this.handleClose} @calciteDropdownOpen=${this.handleOpen} .overlayPositioning=${n} .placement=${s} .scale=${a} .widthScale=${o} ${gt(this.setDropdownEl)}><calcite-action .active=${r} appearance=transparent .aria=${{expanded:r}} class=${H(Bue.handle)} .dragHandle=${!0} .icon=${e?que.blank:que.drag} .label=${c} .scale=${a} slot=${myt.trigger} .text=${c} title=${c??Xe}></calcite-action>${this.renderReorderGroup()}${this.renderMoveToGroup()}${this.renderAddToGroup()}</calcite-dropdown>`})}renderAddToItem(e){return nt(e.id,q`<calcite-dropdown-item data-id=${e.id??Xe} .label=${e.label} @calciteDropdownItemSelect=${this.handleAddTo}>${e.label}</calcite-dropdown-item>`)}renderMoveToItem(e){return nt(e.id,q`<calcite-dropdown-item data-id=${e.id??Xe} .label=${e.label} @calciteDropdownItemSelect=${this.handleMoveTo}>${e.label}</calcite-dropdown-item>`)}renderReorderGroup(){return this.hasReorderItems?nt("reorder",q`<calcite-dropdown-group .groupTitle=${this.messages.reorder} id=${oB.reorder} .scale=${this.scale} selection-mode=none>${this.renderTop()}${this.renderUp()}${this.renderDown()}${this.renderBottom()}</calcite-dropdown-group>`):null}renderAddToGroup(){const{messages:e,addToItems:i,scale:r}=this;return i.length?nt("add-to-items",q`<calcite-dropdown-group .groupTitle=${e.addTo} id=${oB.add} .scale=${r} selection-mode=none>${i.map(n=>this.renderAddToItem(n))}</calcite-dropdown-group>`):null}renderMoveToGroup(){const{messages:e,moveToItems:i,scale:r}=this;return i.length?nt("move-to-items",q`<calcite-dropdown-group .groupTitle=${e.moveTo} id=${oB.move} .scale=${r} selection-mode=none>${i.map(n=>this.renderMoveToItem(n))}</calcite-dropdown-group>`):null}renderDropdownItem(e,i){return nt(Hue[e],q`<calcite-dropdown-item data-value=${Hue[e]??Xe} .label=${i} @calciteDropdownItemSelect=${this.handleReorder}>${i}</calcite-dropdown-item>`)}renderTop(){const{setPosition:e}=this;return e!==1&&e!==2?this.renderDropdownItem(0,this.messages.moveToTop):null}renderUp(){return this.setPosition!==1?this.renderDropdownItem(1,this.messages.moveUp):null}renderDown(){return this.setPosition!==this.setSize?this.renderDropdownItem(2,this.messages.moveDown):null}renderBottom(){const{setPosition:e,setSize:i}=this;return e!==i&&e!==i-1?this.renderDropdownItem(3,this.messages.moveToBottom):null}};kN.properties={disabled:[7,{},{reflect:!0,type:Boolean}],flipPlacements:[0,{},{attribute:!1}],label:1,messageOverrides:[0,{},{attribute:!1}],messages:[0,{},{attribute:!1}],addToItems:[0,{},{attribute:!1}],moveToItems:[0,{},{attribute:!1}],open:[7,{},{reflect:!0,type:Boolean}],overlayPositioning:[3,{},{reflect:!0}],placement:[3,{},{reflect:!0}],scale:[3,{},{reflect:!0}],setPosition:[9,{},{type:Number}],setSize:[9,{},{type:Number}],sortDisabled:[7,{},{reflect:!0,type:Boolean}],widthScale:[3,{},{reflect:!0}]},kN.styles=gyt;let FG=kN;ci("calcite-sort-handle",FG);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const jIe=ct`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host(.calcite-sortable--chosen),:host(.calcite-sortable--drag),:host(.calcite-sortable--fallback),:host(.calcite-sortable--ghost){position:relative;overflow:hidden}:host(.calcite-sortable--ghost):before{content:"";position:absolute;inset-block:0px;inset-inline-start:0px;inset-inline-end:0px;z-index:var(--calcite-z-index);box-sizing:border-box;border-width:1px;border-style:dashed;border-color:var(--calcite-color-brand);background-color:var(--calcite-color-foreground-2)}:host(.calcite-sortable--drag){--tw-shadow: 0 6px 20px -4px rgba(0, 0, 0, .1), 0 4px 12px -2px rgba(0, 0, 0, .08);--tw-shadow-colored: 0 6px 20px -4px var(--tw-shadow-color), 0 4px 12px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}`;/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const jb={content:"content",toggle:"toggle",header:"header"},mn={actionsEnd:"actions-end",container:"container",content:"content",contentStart:"content-start",controlContainer:"control-container",description:"description",header:"header",headerContainer:"header-container",headerHasContent:"header--has-content",heading:"heading",icon:"icon",iconStart:"icon--start",iconEnd:"icon--end",iconEndContainer:"icon-end-container",invalid:"invalid",statusIcon:"status-icon",title:"title",toggle:"toggle",toggleIcon:"toggle-icon",valid:"valid"},BM={actionsEnd:"actions-end",contentStart:"content-start",control:"control",headerMenuActions:"header-menu-actions",icon:"icon"},lB={expanded:"chevron-up",collapsed:"chevron-down",valid:"check-circle",invalid:"exclamation-mark-triangle"},yyt=ct`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host{--calcite-icon-size: 1rem;--calcite-spacing-eighth: .125rem;--calcite-spacing-quarter: .25rem;--calcite-spacing-half: .5rem;--calcite-spacing-three-quarters: .75rem;--calcite-spacing: 1rem;--calcite-spacing-plus-quarter: 1.25rem;--calcite-spacing-plus-half: 1.5rem;--calcite-spacing-double: 2rem;--calcite-menu-min-width: 10rem;--calcite-header-min-height: 3rem;--calcite-footer-min-height: 3rem}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host([scale=s]) .header{gap:var(--calcite-spacing-sm)}:host([scale=s]) .header--has-content{padding:var(--calcite-spacing-sm)}:host([scale=s]) .icon-end-container{gap:var(--calcite-spacing-sm);padding-inline-end:var(--calcite-spacing-sm)}:host([scale=s]) .heading{font-size:var(--calcite-font-size-sm)}:host([scale=s]) .description{font-size:var(--calcite-font-size-xs)}:host([scale=s]){--calcite-internal-block-padding-block: var( --calcite-block-content-space, var(--calcite-block-padding, var(--calcite-spacing-xxs)) );--calcite-internal-block-padding-inline: var( --calcite-block-content-space, var(--calcite-block-padding, var(--calcite-spacing-sm)) )}:host([scale=m]) .header{gap:var(--calcite-spacing-md)}:host([scale=m]) .header--has-content{padding:var(--calcite-spacing-md)}:host([scale=m]) .icon-end-container{gap:var(--calcite-spacing-md);padding-inline-end:var(--calcite-spacing-md)}:host([scale=m]) .heading{font-size:var(--calcite-font-size)}:host([scale=m]) .description{font-size:var(--calcite-font-size-sm)}:host([scale=m]){--calcite-internal-block-padding-block: var( --calcite-block-content-space, var(--calcite-block-padding, var(--calcite-spacing-sm)) );--calcite-internal-block-padding-inline: var( --calcite-block-content-space, var(--calcite-block-padding, var(--calcite-spacing-md)) )}:host([scale=l]) .header{gap:var(--calcite-spacing-lg)}:host([scale=l]) .header--has-content{padding:var(--calcite-spacing-lg)}:host([scale=l]) .icon-end-container{gap:var(--calcite-spacing-lg);padding-inline-end:var(--calcite-spacing-lg)}:host([scale=l]) .heading{font-size:var(--calcite-font-size-md)}:host([scale=l]) .description{font-size:var(--calcite-font-size)}:host([scale=l]){--calcite-internal-block-padding-block: var( --calcite-block-content-space, var(--calcite-block-padding, var(--calcite-spacing-md)) );--calcite-internal-block-padding-inline: var( --calcite-block-content-space, var(--calcite-block-padding, var(--calcite-spacing-lg)) )}:host{display:flex;flex-shrink:0;flex-grow:0;flex-direction:column;border-width:0px;border-block-end-width:1px;border-style:solid;padding:0;transition-property:margin;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:var(--calcite-animation-timing);transition-timing-function:cubic-bezier(.215,.44,.42,.88);flex-basis:auto;border-color:var(--calcite-block-border-color, var(--calcite-color-border-3))}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}.header{margin:0;display:flex;align-content:space-between;align-items:center;fill:var(--calcite-color-text-2);color:var(--calcite-color-text-2)}.heading{margin:0;padding:0;font-weight:var(--calcite-font-weight-medium)}.header .heading{flex:1 1 auto;padding:.5rem}.header{justify-content:flex-start}.header,.toggle{grid-area:header}.header-container{display:grid;align-items:stretch;grid-template:auto/auto 1fr auto auto auto auto;grid-template-areas:"handle header icon-end control menu actions-end"}.icon--start,.icon--end{color:var(--calcite-block-icon-color, var(--calcite-color-text-3))}.actions-end{grid-area:actions-end}.toggle{margin:0;display:flex;cursor:pointer;flex-wrap:nowrap;align-items:center;justify-content:space-between;border-style:none;padding:0;font-family:var(--calcite-font-family);outline-color:transparent;text-align:initial;background-color:var(--calcite-block-header-background-color, transparent)}.toggle:hover{background-color:var(--calcite-block-header-background-color-hover, var(--calcite-color-foreground-2))}.toggle:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.toggle:active{background-color:var(--calcite-block-header-background-color-press, var(--calcite-color-foreground-3))}calcite-loader[inline]{align-self:center}calcite-sort-handle{grid-area:handle}.title{display:flex;flex-direction:column}.header .title .heading{padding:0;transition-property:color;transition-duration:var(--calcite-animation-timing);transition-timing-function:cubic-bezier(.4,0,.2,1);word-wrap:break-word;word-break:break-word;color:var(--calcite-block-heading-text-color, var(--calcite-color-text-2));font-weight:var(--calcite-font-weight-medium);line-height:var(--calcite-font-line-height-relative-snug)}.description{padding:0;word-wrap:break-word;word-break:break-word;color:var(--calcite-block-description-text-color, var(--calcite-color-text-3));font-weight:var(--calcite-font-weight-regular);line-height:var(--calcite-font-line-height-relative-snug)}.icon{display:flex}.status-icon.valid{color:var(--calcite-color-status-success)}.status-icon.invalid{color:var(--calcite-color-status-danger)}@keyframes spin{0%{transform:rotate(0)}50%{transform:rotate(180deg)}to{transform:rotate(360deg)}}.icon-end-container{display:flex;align-items:center;grid-area:icon-end}.toggle-icon{align-self:center;justify-self:end;transition-property:color;transition-duration:var(--calcite-animation-timing);transition-timing-function:cubic-bezier(.4,0,.2,1);color:var(--calcite-block-icon-color, var(--calcite-color-text-3))}.toggle:hover .toggle-icon{color:var(--calcite-block-icon-color-hover, var(--calcite-color-text-1))}.container{position:relative;display:flex;block-size:100%;flex-direction:column}.content{position:relative;min-block-size:0px;flex:1 1 0%}@keyframes in{0%{opacity:0}to{opacity:1}}.content{animation:in var(--calcite-internal-animation-timing-slow) ease-in-out;padding-block:var(--calcite-internal-block-padding-block);padding-inline:var(--calcite-internal-block-padding-inline)}.content-start{display:flex;align-items:center;color:var(--calcite-block-text-color, var(--calcite-color-text-3))}.control-container{margin:0;display:flex;grid-area:control}calcite-action-menu{grid-area:menu}.actions-end{display:flex;align-items:stretch}:host([expanded]){margin-block:.5rem}:host([expanded]) .header .title .heading{color:var(--calcite-block-heading-text-color, var(--calcite-block-heading-text-color-press, var(--calcite-color-text-1)))}:host([expanded]) .description{color:var(--calcite-block-description-text-color, var(--calcite-color-text-2))}:host([expanded]) .icon--start,:host([expanded]) .icon--end{color:var(--calcite-block-icon-color, var(--calcite-color-text-1))}:host([expanded][scale=s]){margin-block:var(--calcite-spacing-xxs)}:host([expanded][scale=l]){margin-block:var(--calcite-spacing-md)}:host([hidden]){display:none}[hidden]{display:none}`,AN=class AN extends dt{constructor(){super(...arguments),this.transitionProp="margin-top",this.blockSectionChildren=[],this.messages=un(),this.focusSetter=dn()(this),this.hasContentStart=!1,this.hasControl=!1,this.hasEndActions=!1,this.hasIcon=!1,this.hasMenuActions=!1,this.collapsible=!1,this.disabled=!1,this.dragDisabled=!1,this.dragHandle=!1,this.expanded=!1,this.loading=!1,this.menuPlacement=sTe,this.addToItems=[],this.moveToItems=[],this.sortDisabled=!1,this.overlayPositioning="absolute",this.scale="m",this.setPosition=null,this.setSize=null,this.sortHandleOpen=!1,this.calciteInternalBlockUpdateSortMenuItems=Re({cancelable:!1}),this.calciteBlockBeforeClose=Re({cancelable:!1}),this.calciteBlockBeforeOpen=Re({cancelable:!1}),this.calciteBlockClose=Re({cancelable:!1}),this.calciteBlockCollapse=Re({cancelable:!1}),this.calciteBlockExpand=Re({cancelable:!1}),this.calciteBlockOpen=Re({cancelable:!1}),this.calciteBlockSortHandleBeforeClose=Re({cancelable:!1}),this.calciteBlockSortHandleBeforeOpen=Re({cancelable:!1}),this.calciteBlockSortHandleClose=Re({cancelable:!1}),this.calciteBlockSortHandleOpen=Re({cancelable:!1}),this.calciteBlockToggle=Re({cancelable:!1})}get open(){return this.expanded}set open(e){NF.deprecated("property",{name:"open",removalVersion:4,suggested:"expanded"}),this.expanded=e}async setFocus(e){return this.focusSetter(()=>this.el,e)}connectedCallback(){super.connectedCallback(),this.transitionEl=this.el}load(){!this.heading&&!this.label&&NF.warn(`${this.el.tagName} is missing both heading & label. Please provide a heading or label for the component to be accessible.`)}willUpdate(e){e.has("expanded")&&(this.hasUpdated||this.expanded!==!1)&&IT(this),e.has("sortHandleOpen")&&(this.hasUpdated||this.sortHandleOpen!==!1)&&this.sortHandleOpenHandler(),e.has("expanded")&&this.hasUpdated&&(this.expanded?this.calciteBlockExpand.emit():this.calciteBlockCollapse.emit()),e.has("scale")&&this.hasUpdated&&this.updateBlockSectionScale()}updated(){Vs(this)}onBeforeOpen(){this.calciteBlockBeforeOpen.emit()}onOpen(){this.calciteBlockOpen.emit()}onBeforeClose(){this.calciteBlockBeforeClose.emit()}onClose(){this.calciteBlockClose.emit()}sortHandleOpenHandler(){this.sortHandleEl&&(this.sortHandleEl.open=this.sortHandleOpen)}setSortHandleEl(e){this.sortHandleEl=e,this.sortHandleOpenHandler()}handleSortHandleBeforeOpen(e){e.stopPropagation(),this.calciteBlockSortHandleBeforeOpen.emit()}handleSortHandleBeforeClose(e){e.stopPropagation(),this.calciteBlockSortHandleBeforeClose.emit()}handleSortHandleClose(e){e.stopPropagation(),this.sortHandleOpen=!1,this.calciteBlockSortHandleClose.emit()}handleSortHandleOpen(e){e.stopPropagation(),this.sortHandleOpen=!0,this.calciteBlockSortHandleOpen.emit()}onHeaderClick(){this.expanded=!this.expanded,this.calciteBlockToggle.emit()}controlSlotChangeHandler(e){this.hasControl=ii(e)}menuActionsSlotChangeHandler(e){this.hasMenuActions=ii(e)}iconSlotChangeHandler(e){this.hasIcon=ii(e)}actionsEndSlotChangeHandler(e){this.hasEndActions=ii(e)}handleContentStartSlotChange(e){this.hasContentStart=ii(e)}handleDefaultSlotChange(e){this.blockSectionChildren=fu(e,"calcite-block-section"),this.updateBlockSectionScale()}updateBlockSectionScale(){this.blockSectionChildren.forEach(e=>{e.scale=this.scale})}renderScrim(){const{loading:e}=this,i=q`<slot @slotchange=${this.handleDefaultSlotChange}></slot>`;return[e?q`<calcite-scrim .loading=${e}></calcite-scrim>`:null,i]}renderLoaderStatusIcon(){const{loading:e,messages:i,status:r}=this;return e?nt("loader",q`<div class=${H(mn.icon)}><calcite-loader inline .label=${i.loading} .scale=${this.scale}></calcite-loader></div>`):r?nt("status-icon",q`<div class=${H(mn.icon)}><calcite-icon class=${H({[mn.statusIcon]:!0,[mn.valid]:r=="valid",[mn.invalid]:r=="invalid"})} .icon=${lB[r]} .scale=${gr(this.scale)}></calcite-icon></div>`):nt("icon-slot",q`<div class=${H(mn.icon)} .hidden=${!this.hasIcon}>${nt("icon-slot",q`<slot name=${BM.icon} @slotchange=${this.iconSlotChangeHandler}></slot>`)}</div>`)}renderActionsEnd(){return q`<div class=${H(mn.actionsEnd)} .hidden=${!this.hasEndActions}><slot name=${BM.actionsEnd} @slotchange=${this.actionsEndSlotChangeHandler}></slot></div>`}renderContentStart(){return q`<div class=${H(mn.contentStart)} .hidden=${!this.hasContentStart}><slot name=${BM.contentStart} @slotchange=${this.handleContentStartSlotChange}></slot></div>`}renderTitle(){const{heading:e,headingLevel:i,description:r}=this;return e||r?q`<div class=${H(mn.title)}>${YJ({class:mn.heading,level:i,children:e})}${r?q`<div class=${H(mn.description)}>${r}</div>`:null}</div>`:null}renderIcon(e){const{iconFlipRtl:i}=this,r=i==="both"||e==="start"?i==="start":i==="end",n=e==="start"?this.iconStart:this.iconEnd,s=e==="start"?mn.iconStart:mn.iconEnd;if(n)return nt(n,q`<calcite-icon class=${H(s)} .flipRtl=${r} .icon=${n} .scale=${gr(this.scale)}></calcite-icon>`)}render(){const{collapsible:e,loading:i,expanded:r,label:n,heading:s,messages:a,description:o,menuFlipPlacements:l,menuPlacement:c,moveToItems:h,addToItems:m,setPosition:g,setSize:v,dragDisabled:b,sortDisabled:x,iconEnd:$,hasContentStart:M,iconStart:k}=this,A=r?a.collapse:a.expand,L=!!(s||o||M||k||i||status),z=q`<header class=${H({[mn.header]:!0,[mn.headerHasContent]:L})} id=${jb.header}>${this.renderIcon("start")}${this.renderContentStart()}${this.renderLoaderStatusIcon()}${this.renderTitle()}</header>`,U=r?lB.expanded:lB.collapsed,B=q`<div class=${H(mn.headerContainer)}>${this.dragHandle?q`<calcite-sort-handle .addToItems=${m} .disabled=${b} .label=${s||n} .moveToItems=${h} @calciteSortHandleBeforeClose=${this.handleSortHandleBeforeClose} @calciteSortHandleBeforeOpen=${this.handleSortHandleBeforeOpen} @calciteSortHandleClose=${this.handleSortHandleClose} @calciteSortHandleOpen=${this.handleSortHandleOpen} overlay-positioning=fixed .scale=${this.scale} .setPosition=${g} .setSize=${v} .sortDisabled=${x} ${gt(this.setSortHandleEl)}></calcite-sort-handle>`:null}${e?q`<button aria-controls=${jb.content} aria-describedby=${jb.header} .ariaExpanded=${e?r:null} class=${H(mn.toggle)} id=${jb.toggle} @click=${this.onHeaderClick} title=${A??Xe}>${z}<div class=${H(mn.iconEndContainer)}>${this.renderIcon("end")}<calcite-icon class=${H(mn.toggleIcon)} .icon=${U} .scale=${gr(this.scale)}></calcite-icon></div></button>`:z}${$&&!e?q`<div class=${H(mn.iconEndContainer)}>${this.renderIcon("end")}</div>`:null}<div aria-labelledby=${jb.header} class=${H(mn.controlContainer)} .hidden=${!this.hasControl}><slot name=${BM.control} @slotchange=${this.controlSlotChangeHandler}></slot></div><calcite-action-menu .flipPlacements=${l??["top","bottom"]} .hidden=${!this.hasMenuActions} .label=${a.options} .overlayPositioning=${this.overlayPositioning} .placement=${c} .scale=${this.scale}><slot name=${BM.headerMenuActions} @slotchange=${this.menuActionsSlotChangeHandler}></slot></calcite-action-menu>${this.renderActionsEnd()}</div>`;return Us({disabled:this.disabled,children:q`<article aria-label=${n??Xe} .ariaBusy=${i} class=${H({[mn.container]:!0})}>${B}<section aria-labelledby=${jb.toggle} class=${H(mn.content)} .hidden=${!r} id=${jb.content}>${this.renderScrim()}</section></article>`})}};AN.properties={hasContentStart:[16,{},{state:!0}],hasControl:[16,{},{state:!0}],hasEndActions:[16,{},{state:!0}],hasIcon:[16,{},{state:!0}],hasMenuActions:[16,{},{state:!0}],collapsible:[7,{},{reflect:!0,type:Boolean}],description:1,disabled:[7,{},{reflect:!0,type:Boolean}],dragDisabled:[7,{},{reflect:!0,type:Boolean}],dragHandle:[7,{},{reflect:!0,type:Boolean}],expanded:[7,{},{reflect:!0,type:Boolean}],heading:1,headingLevel:[11,{},{type:Number,reflect:!0}],iconEnd:[3,{},{reflect:!0}],iconFlipRtl:[3,{},{reflect:!0}],iconStart:[3,{},{reflect:!0}],loading:[7,{},{reflect:!0,type:Boolean}],label:1,menuFlipPlacements:[0,{},{attribute:!1}],menuPlacement:[3,{},{reflect:!0}],messageOverrides:[0,{},{attribute:!1}],addToItems:[0,{},{attribute:!1}],moveToItems:[0,{},{attribute:!1}],sortDisabled:[5,{},{type:Boolean}],open:[7,{},{reflect:!0,type:Boolean}],overlayPositioning:[3,{},{reflect:!0}],scale:[3,{},{reflect:!0}],setPosition:[9,{},{type:Number}],setSize:[9,{},{type:Number}],sortHandleOpen:[7,{},{reflect:!0,type:Boolean}],status:[3,{},{reflect:!0}]},AN.styles=[yyt,jIe];let RG=AN;ci("calcite-block",RG);function vyt(){return pe.jsx(pe.Fragment,{children:pe.jsxs("calcite-block",{heading:"Legend",collapsible:!0,expanded:!0,children:[pe.jsx("p",{children:"This map shows the results of each of the previous 5 U.S. presidential elections from 2000 to 2024. Each square represents the election winner for the given area in one year. The most recent election (2024) is represented as the right-most square. Each square's color represents the winner of the election; its size is proportional to the margin of victory for the winner. Smaller squares indicate a closer election. Larger squares indicate a larger margin of victory."}),pe.jsx("img",{src:"./trend-legend-horizontal.png",className:"legend",alt:"Legend"})]})})}function byt(){return pe.jsx(pe.Fragment,{children:pe.jsx("calcite-block",{heading:"Examples",collapsible:!0,children:pe.jsxs("calcite-carousel",{label:"Examples",children:[pe.jsx("calcite-carousel-item",{label:"Gradual change",children:pe.jsxs("div",{className:"custom-content",children:[pe.jsx("img",{className:"examples",src:"./gradual-d.png",alt:"Gradual change"}),pe.jsxs("span",{children:[pe.jsx("b",{children:"Gradual change"}),". This example from Douglas County, Georgia shows a gradual swing from Republican support to Democrats over the last 5 elections. Voters showed strong support for Bush (R) in 2004. In 2008, the county leaned Democrat, and gradually increased support for Democrats in 2012, 2016, and 2020."]})]})}),pe.jsx("calcite-carousel-item",{label:"Bowtie",children:pe.jsxs("div",{className:"custom-content",children:[pe.jsx("img",{className:"examples",src:"./flip.png",alt:"Bowtie"}),pe.jsxs("span",{children:[pe.jsx("b",{children:"Bowtie"}),". In rare scenarios, some counties underwent a dramatic shift in support from one party to another. Anne Arundel County, Maryland went from strong Republican support in 2004 to strong Democrat support in 2020, creating a bowtie shape in the symbol."]})]})}),pe.jsx("calcite-carousel-item",{label:"No change",children:pe.jsxs("div",{className:"custom-content",children:[pe.jsx("img",{className:"examples",src:"./solid-r.png",alt:"No change"}),pe.jsxs("span",{children:[pe.jsx("b",{children:"No change."})," The populations of many areas are consistent in their support for one party over another. Shelby County, Alabama is an example of a county that has shown strong Republican support in each of the last 5 elections, posting margins of victory exceeding 40% in each of the previous 5 elections."]})]})}),pe.jsx("calcite-carousel-item",{label:"Inconsistent",children:pe.jsxs("div",{className:"custom-content",children:[pe.jsx("img",{className:"examples",src:"./contested.png",alt:"Contested"}),pe.jsxs("span",{children:[pe.jsx("b",{children:"Contested"}),". A few areas, especially in traditional swing states, have shown inconsistent support for either party over the last 5 elections. For example, Macomb County, Michigan showed strong support for Obama (D) in 2008 and 2012, but otherwise sided with Republicans in other elections."]})]})})]})})})}function wyt(){return pe.jsx(pe.Fragment,{children:pe.jsxs("calcite-block",{heading:"Legend",collapsible:!0,expanded:!0,children:[pe.jsx("p",{children:"This map shows the change in votes for each party compared to the previous presidential election. The symbol is composed of three parts: a red circle for Republican change, a blue circle for Democratic change, and a yellow circle for third party change."}),pe.jsx("div",{className:"legendElement",children:pe.jsx("img",{src:"./legend-change-parties.png",className:"legend",alt:"Legend",style:{width:"300px"}})}),pe.jsx("p",{children:"Solid circles indicate an increase in votes for that party compared to the previous election. Hollow circles indicate a decrease in votes for that party compared to the previous election. The size of each circle indicates the magnitude of change, with larger circles indicating a larger change in votes."}),pe.jsx("div",{className:"legendElement",children:pe.jsx("img",{src:"./legend-change.png",className:"legend",alt:"Legend",style:{width:"120px"}})}),pe.jsxs("div",{className:"legendElement",children:[pe.jsx("b",{style:{fontSize:"12pt"},children:"Swing states"}),pe.jsx("img",{src:"./change-states.png",className:"legend",alt:"Legend",style:{width:"200px"}})]})]})})}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */function _yt(t,e,i){const r=e[0]-t[0],n=i[0]-e[0],s=e[1]-t[1],a=i[1]-e[1],o=s/(r||n<0&&0),l=a/(n||r<0&&0),c=(o*n+l*r)/(r+n);return(Math.sign(o)+Math.sign(l))*Math.min(Math.abs(o),Math.abs(l),.5*Math.abs(c))||0}function Gue(t,e,i){const r=e[0]-t[0],n=e[1]-t[1];return r?(3*n/r-i)/2:i}function Wue(t,e,i,r,n){const[s,a]=t,[o,l]=e,c=(o-s)/3,h=n([s+c,a+c*i]).join(","),m=n([o-c,l-c*r]).join(","),g=n([o,l]).join(",");return`C ${h} ${m} ${g}`}function xyt({width:t,height:e,min:i,max:r}){const n=r[0]-i[0],s=r[1]-i[1];return a=>{const o=(a[0]-i[0])/n*t,l=e-(a[1]-i[1])/s*e;return[o,l]}}function $yt(t){const[e,i]=t[0],r=[e,i],n=[e,i];return t.reduce(({min:s,max:a},[o,l])=>({min:[Math.min(s[0],o),Math.min(s[1],l)],max:[Math.max(a[0],o),Math.max(a[1],l)]}),{min:r,max:n})}function Syt({data:t,min:e,max:i,t:r}){if(t.length===0)return"";const[n,s]=r(t[0]),[a,o]=r(e),[l]=r(i);let c,h,m;const g=t.reduce((x,$,M)=>{if(h=t[M-2],m=t[M-1],M>1){const k=_yt(h,m,$),A=c===void 0?Gue(h,m,k):c,L=Wue(h,m,A,k,r);return c=k,`${x} ${L}`}return x},`M ${a},${o} L ${a},${s} L ${n},${s}`),v=t[t.length-1],b=Wue(m,v,c,Gue(m,v,c),r);return`${g} ${b} L ${l},${o} Z`}const Tyt=ct`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{display:block;block-size:100%}.svg{fill:currentColor;stroke:transparent;margin:0;display:block;block-size:100%;inline-size:100%;padding:0}.svg .graph-path--highlight{fill:var(--calcite-graph-highlight-fill-color, var(--calcite-color-brand));opacity:.5}:host([hidden]){display:none}[hidden]{display:none}`,X1={svg:"svg",graphPath:"graph-path",graphPathHighlight:"graph-path--highlight"},cB="calcite-graph",cy={host:t=>`${cB}-${t}`,linearGradient:t=>`linear-gradient-${cB}-${t}`,mask:(t,e)=>`${cB}-${t}${e}`},PN=class PN extends dt{constructor(){super(...arguments),this.graphId=Mc(),this.resizeObserver=Gn("resize",()=>this.requestUpdate()),this.data=[]}connectedCallback(){var e;super.connectedCallback(),(e=this.resizeObserver)==null||e.observe(this.el)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this.resizeObserver)==null||e.disconnect()}render(){const{data:e,colorStops:i,el:r,highlightMax:n,highlightMin:s,min:a,max:o}=this,l=this.graphId,{clientHeight:c,clientWidth:h}=r;if(!e||e.length===0)return q`<svg aria-hidden=true class=${H(X1.svg)} height=${c??Pe} preserveAspectRatio=none viewBox=${`0 0 ${h} ${c}`} width=${h??Pe}></svg>`;const{min:m,max:g}=$yt(e);let v=m,b=g;(a<m[0]||a>m[0])&&(v=[a,0]),(o>g[0]||o<g[0])&&(b=[o,g[1]]);const x=xyt({min:v,max:b,width:h,height:c}),[$]=x([s,b[1]]),[M]=x([n,b[1]]),k=Syt({data:e,min:m,max:g,t:x}),A=i?`url(#${cy.linearGradient(l)})`:void 0;return q`<svg aria-hidden=true class=${H(X1.svg)} height=${c??Pe} preserveAspectRatio=none viewBox=${`0 0 ${h} ${c}`} width=${h??Pe}>${i?Xi`<defs><linearGradient id=${cy.linearGradient(l)??Pe} x1=0 x2=1 y1=0 y2=0>${i.map(({offset:L,color:z,opacity:U})=>Xi`<stop offset=${`${L*100}%`} stop-color=${z??Pe} stop-opacity=${U??Pe} />`)}</linearGradient></defs>`:null}${s!==void 0?[Xi`<mask height=100% id=${cy.mask(l,1)??Pe} width=100% x=0% y=0%><path d=${`
            M 0,0
            L ${$-1},0
            L ${$-1},${c}
            L 0,${c}
            Z
          `} fill=white /></mask>`,Xi`<mask height=100% id=${cy.mask(l,2)??Pe} width=100% x=0% y=0%><path d=${`
            M ${$+1},0
            L ${M-1},0
            L ${M-1},${c}
            L ${$+1}, ${c}
            Z
          `} fill=white /></mask>`,Xi`<mask height=100% id=${cy.mask(l,3)??Pe} width=100% x=0% y=0%><path d=${`
                M ${M+1},0
                L ${h},0
                L ${h},${c}
                L ${M+1}, ${c}
                Z
              `} fill=white /></mask>`,Xi`<path class=${H(X1.graphPath)} d=${k??Pe} fill=${A??Pe} mask=${`url(#${cy.mask(l,1)})`} />`,Xi`<path class=${H(X1.graphPathHighlight)} d=${k??Pe} fill=${A??Pe} mask=${`url(#${cy.mask(l,2)})`} />`,Xi`<path class=${H(X1.graphPath)} d=${k??Pe} fill=${A??Pe} mask=${`url(#${cy.mask(l,3)})`} />`]:Xi`<path class=${H(X1.graphPath)} d=${k??Pe} fill=${A??Pe} />`}</svg>`}};PN.properties={colorStops:[0,{},{attribute:!1}],data:[0,{},{attribute:!1}],highlightMax:[9,{},{type:Number}],highlightMin:[9,{},{type:Number}],max:[11,{},{reflect:!0,type:Number}],min:[11,{},{reflect:!0,type:Number}]},PN.styles=Tyt;let zG=PN;ci("calcite-graph",zG);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const ji={container:"container",containerRange:"container--range",graph:"graph",handle:"handle",handleExtension:"handle-extension",handleLabel:"handle__label",handleLabelMinValue:"handle__label--minValue",handleLabelValue:"handle__label--value",hyphen:"hyphen",hyphenWrap:"hyphen--wrap",static:"static",thumb:"thumb",thumbActive:"thumb--active",thumbContainer:"thumb-container",thumbMinValue:"thumb--minValue",thumbPrecise:"thumb--precise",thumbValue:"thumb--value",tick:"tick",tickActive:"tick--active",tickLabel:"tick__label",tickMax:"tick__label--max",tickMin:"tick__label--min",ticks:"ticks",track:"track",trackRange:"track__range",transformed:"transformed",scale:t=>`scale--${t}`},Iyt="calcite-slider",uB={validationMessage:"validationMessage",host:t=>`${Iyt}-${t}`},Myt=250,Cyt=ct`@charset "UTF-8";:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}.scale--s{--calcite-slider-handle-size: .625rem;--calcite-slider-handle-extension-height: .4rem;--calcite-slider-container-font-size: var(--calcite-font-size--3)}.scale--s .handle__label,.scale--s .tick__label{line-height:.75rem}.scale--m{--calcite-slider-handle-size: .875rem;--calcite-slider-handle-extension-height: .5rem;--calcite-slider-container-font-size: var(--calcite-font-size--2)}.scale--m .handle__label,.scale--m .tick__label{line-height:1rem}.scale--l{--calcite-slider-handle-size: 1rem;--calcite-slider-handle-extension-height: .65rem;--calcite-slider-container-font-size: var(--calcite-font-size--1)}.scale--l .handle__label,.scale--l .tick__label{line-height:1rem}.handle__label,.tick__label{font-weight:var(--calcite-font-weight-medium);color:var(--calcite-slider-text-color, var(--calcite-color-text-2));font-size:var(--calcite-slider-container-font-size)}:host{display:block}:host .validation-container{padding-block-start:0!important}.container{position:relative;display:block;overflow-wrap:normal;word-break:normal;padding-inline:calc(var(--calcite-slider-handle-size) * .5);padding-block:calc(var(--calcite-slider-handle-size) * .5);margin-block:calc(var(--calcite-slider-handle-size) * .5);margin-inline:0;--calcite-slider-full-handle-height: calc( var(--calcite-slider-handle-size) + var(--calcite-slider-handle-extension-height) );touch-action:none;-webkit-user-select:none;user-select:none}:host([disabled]) .track__range,:host([disabled]) .tick--active{background-color:var(--calcite-color-text-3)}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}.scale--s .thumb:not(.thumb--precise){--calcite-slider-thumb-y-offset: -.375rem}.scale--m .thumb:not(.thumb--precise){--calcite-slider-thumb-y-offset: -.5rem}.scale--l .thumb:not(.thumb--precise){--calcite-slider-thumb-y-offset: -.55rem}:host([precise]:not([has-histogram])) .container .thumb--value{--calcite-slider-thumb-y-offset: calc(var(--calcite-slider-full-handle-height) * -1)}.thumb-container{position:relative;max-inline-size:100%}.thumb{--calcite-slider-thumb-x-offset: calc(var(--calcite-slider-handle-size) * .5);position:absolute;margin:0;display:flex;cursor:pointer;flex-direction:column;align-items:center;border-style:none;background-color:transparent;padding:0;font-family:inherit;outline:2px solid transparent;outline-offset:2px;transform:translate(var(--calcite-slider-thumb-x-offset),var(--calcite-slider-thumb-y-offset))}.thumb .handle__label{white-space:nowrap}.thumb .handle__label.static,.thumb .handle__label.transformed{position:absolute;inset-block:0px;opacity:0}.thumb .handle__label.hyphen:after{content:"";display:inline-block;inline-size:1em}.thumb .handle__label.hyphen--wrap{display:flex}.thumb .handle{box-sizing:border-box;border-radius:9999px;outline-color:transparent;background-color:var(--calcite-slider-handle-fill-color, var(--calcite-color-foreground-1));block-size:var(--calcite-slider-handle-size);inline-size:var(--calcite-slider-handle-size);box-shadow:0 0 0 2px var(--calcite-color-text-3) inset;transition:border var(--calcite-internal-animation-timing-medium) ease,background-color var(--calcite-internal-animation-timing-medium) ease,box-shadow var(--calcite-animation-timing) ease}.thumb .handle-extension{inline-size:.125rem;block-size:var(--calcite-slider-handle-extension-height);background-color:var(--calcite-slider-handle-extension-color, var(--calcite-color-text-3))}.thumb:hover .handle{box-shadow:0 0 0 3px var(--calcite-color-brand) inset}.thumb:hover .handle-extension{background-color:var(--calcite-slider-accent-color, var(--calcite-color-brand))}.thumb:focus .handle{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(var(--calcite-spacing-base) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.thumb:focus .handle-extension{background-color:var(--calcite-slider-accent-color, var(--calcite-color-brand))}.thumb.thumb--minValue{transform:translate(calc(var(--calcite-slider-thumb-x-offset) * -1),var(--calcite-slider-thumb-y-offset))}.thumb.thumb--precise{--calcite-slider-thumb-y-offset: -.125rem}:host([label-handles]) .thumb{--calcite-slider-thumb-x-offset: 50%}:host([label-handles]):host(:not([has-histogram])) .scale--s .thumb:not(.thumb--precise){--calcite-slider-thumb-y-offset: -1.4375rem}:host([label-handles]):host(:not([has-histogram])) .scale--m .thumb:not(.thumb--precise){--calcite-slider-thumb-y-offset: -1.875rem}:host([label-handles]):host(:not([has-histogram])) .scale--l .thumb:not(.thumb--precise){--calcite-slider-thumb-y-offset: -2rem}:host([has-histogram][label-handles]) .handle__label,:host([label-handles]:not([has-histogram])) .thumb--minValue.thumb--precise .handle__label{margin-block-start:.5em}:host(:not([has-histogram]):not([precise])) .handle__label,:host([label-handles]:not([has-histogram])) .thumb--value .handle__label{margin-block-end:.5em}:host([label-handles][precise]):host(:not([has-histogram])) .scale--s .thumb--value{--calcite-slider-thumb-y-offset: -2.075rem}:host([label-handles][precise]):host(:not([has-histogram])) .scale--m .thumb--value{--calcite-slider-thumb-y-offset: -2.75rem}:host([label-handles][precise]):host(:not([has-histogram])) .scale--l .thumb--value{--calcite-slider-thumb-y-offset: -3.0625rem}.thumb:focus .handle,.thumb--active .handle{background-color:var(--calcite-slider-accent-color, var(--calcite-color-brand));box-shadow:0 0 8px #00000029}.thumb:hover.thumb--precise:after,.thumb:focus.thumb--precise:after,.thumb--active.thumb--precise:after{background-color:var(--calcite-slider-accent-color, var(--calcite-color-brand))}.track{position:relative;block-size:.125rem;border-radius:0;background-color:var(--calcite-slider-track-color, var(--calcite-color-border-2));transition:all var(--calcite-internal-animation-timing-medium) ease-in}.track__range{position:absolute;inset-block-start:0px;block-size:.125rem;background-color:var(--calcite-slider-track-fill-color, var(--calcite-color-brand))}.container--range .track__range:hover{cursor:ew-resize}.container--range .track__range:after{position:absolute;inline-size:100%;content:"";inset-block-start:calc(var(--calcite-slider-full-handle-height) * .5 * -1);block-size:calc(var(--calcite-slider-handle-size) + var(--calcite-slider-handle-extension-height))}@media (forced-colors: active){.thumb{outline-width:0;outline-offset:0}.handle{outline:2px solid transparent;outline-offset:2px}.thumb:focus .handle,.thumb .handle-extension,.thumb:hover .handle-extension,.thumb:focus .handle-extension,.thumb:active .handle-extension{background-color:canvasText}.track{background-color:canvasText}.track__range{background-color:highlight}}.tick{position:absolute;block-size:.25rem;inline-size:.125rem;border-width:1px;border-style:solid;background-color:var(--calcite-slider-tick-color, var(--calcite-color-border-input));border-color:var(--calcite-slider-tick-border-color, var(--calcite-color-foreground-1));inset-block-start:-2px;pointer-events:none;margin-inline-start:-.125rem}.tick--active{background-color:var(--calcite-slider-tick-selected-color, var(--calcite-color-brand))}.tick__label{pointer-events:none;margin-block-start:.875rem;display:flex;justify-content:center}.tick__label--min{transition:opacity var(--calcite-animation-timing)}.tick__label--max{transition:opacity var(--calcite-internal-animation-timing-fast)}:host([has-histogram][label-handles]) .tick__label--min,:host([has-histogram][label-handles]) .tick__label--max,:host([has-histogram][precise]) .tick__label--min,:host([has-histogram][precise]) .tick__label--max{font-weight:var(--calcite-font-weight-normal);color:var(--calcite-color-text-3)}.graph{color:var(--calcite-slider-graph-color, var(--calcite-color-foreground-3));block-size:48px}:host([label-ticks][ticks]) .container{padding-block-end:calc(.875rem + var(--calcite-slider-container-font-size))}:host([has-histogram]):host([precise][label-handles]) .container{padding-block-end:calc(var(--calcite-slider-full-handle-height) + 1em)}:host([has-histogram]):host([label-handles]:not([precise])) .container{padding-block-end:calc(var(--calcite-slider-handle-size) * .5 + 1em)}:host([has-histogram]):host([precise]:not([label-handles])) .container{padding-block-end:var(--calcite-slider-full-handle-height)}:host(:not([has-histogram])):host([precise]:not([label-handles])) .container{padding-block-start:var(--calcite-slider-full-handle-height)}:host(:not([has-histogram])):host([precise]:not([label-handles])) .container--range{padding-block-end:var(--calcite-slider-full-handle-height)}:host(:not([has-histogram])):host([label-handles]:not([precise])) .container{padding-block-start:calc(var(--calcite-slider-full-handle-height) + 4px)}:host(:not([has-histogram])):host([label-handles][precise]) .container{padding-block-start:calc(var(--calcite-slider-full-handle-height) + var(--calcite-slider-container-font-size) + 4px)}:host(:not([has-histogram])):host([label-handles][precise]) .container--range{padding-block-end:calc(var(--calcite-slider-full-handle-height) + var(--calcite-slider-container-font-size) + 4px)}.internal-label-alignment--center{align-items:center}.internal-label-alignment--end{align-items:end}.internal-label--container{display:flex;justify-content:space-between;color:var(--calcite-color-text-1)}.internal-label-required--indicator{font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-status-danger);padding-inline:var(--calcite-spacing-base)}.internal-label-required--indicator:hover{cursor:help}.internal-label--text{line-height:1}:host([scale=s]) .internal-label-spacing--bottom{margin-block-end:var(--calcite-spacing-xxs)}:host([scale=s]) .internal-label-spacing-inline--end{margin-inline-end:var(--calcite-spacing-sm)}:host([scale=s]) .internal-label-spacing-inline--start{margin-inline-start:var(--calcite-spacing-sm)}:host([scale=s]) .internal-label--text{font-size:var(--calcite-font-size--2)}:host([scale=m]) .internal-label-spacing--bottom{margin-block-end:var(--calcite-spacing-sm)}:host([scale=m]) .internal-label-spacing-inline--end{margin-inline-end:var(--calcite-spacing-sm)}:host([scale=m]) .internal-label-spacing-inline--start{margin-inline-start:var(--calcite-spacing-sm)}:host([scale=m]) .internal-label--text{font-size:var(--calcite-font-size--1)}:host([scale=l]) .internal-label-spacing--bottom{margin-block-end:var(--calcite-spacing-sm)}:host([scale=l]) .internal-label-spacing-inline--end{margin-inline-end:var(--calcite-spacing-md)}:host([scale=l]) .internal-label-spacing-inline--start{margin-inline-start:var(--calcite-spacing-md)}:host([scale=l]) .internal-label--text{font-size:var(--calcite-font-size-0)}.validation-container{display:flex;flex-direction:column;align-items:flex-start;align-self:stretch}:host([scale=m]) .validation-container,:host([scale=l]) .validation-container{padding-block-start:.5rem}:host([scale=s]) .validation-container{padding-block-start:.25rem}::slotted(input[slot=hidden-form-input]){margin:0!important;opacity:0!important;outline:none!important;padding:0!important;position:absolute!important;inset:0!important;transform:none!important;-webkit-appearance:none!important;z-index:-1!important}:host([hidden]){display:none}[hidden]{display:none}`;function xo(t){return Array.isArray(t)}const iE=class iE extends dt{constructor(){super(),this.dragEnd=e=>{this.disabled||(this.removeDragListeners(),this.focusActiveHandle(e.clientX),this.lastDragPropValue!=this[this.dragProp]&&this.emitChange(),this.dragProp=null,this.lastDragPropValue=null,this.minValueDragRange=null,this.maxValueDragRange=null,this.minMaxValueRange=null)},this.dragUpdate=e=>{if(!this.disabled&&(e.preventDefault(),this.dragProp)){const i=this.mapToRange(e.clientX||e.pageX);if(xo(this.value)&&this.dragProp==="minMaxValue")if(this.minValueDragRange&&this.maxValueDragRange&&this.minMaxValueRange){const r=i-this.minValueDragRange,n=i+this.maxValueDragRange;n<=this.max&&r>=this.min&&n-r===this.minMaxValueRange&&this.setValue({minValue:this.clamp(r,"minValue"),maxValue:this.clamp(n,"maxValue")})}else this.minValueDragRange=i-this.minValue,this.maxValueDragRange=this.maxValue-i,this.minMaxValueRange=this.maxValue-this.minValue;else if(xo(this.value)&&xo(this.previousEmittedValue)&&this.dragProp==="maxValue"){const[r,n]=this.previousEmittedValue;r===n&&i<r?(this.dragProp="minValue",this.minHandle.focus()):this.setValue({[this.dragProp]:this.clamp(i,this.dragProp)})}else this.setValue({[this.dragProp]:this.clamp(i,this.dragProp)})}},this.formatValue=e=>($l.numberFormatOptions={locale:this.messages._lang,numberingSystem:this.numberingSystem,useGrouping:this.groupSeparator},$l.localize(e.toString())),this.guid=uB.host(Mc()),this.messages=un(),this.pointerUpDragEnd=e=>{this.disabled||!n2(e)||this.dragEnd(e)},this.trackRef=vi(),this.focusSetter=dn()(this),this.activeProp="value",this.maxValueDragRange=null,this.minMaxValueRange=null,this.minValueDragRange=null,this.tickValues=[],this.disabled=!1,this.fillPlacement="start",this.groupSeparator=!1,this.hasHistogram=!1,this.labelHandles=!1,this.labelTicks=!1,this.max=100,this.min=0,this.mirrored=!1,this.precise=!1,this.required=!1,this.scale="m",this.snap=!1,this.status="idle",this.step=1,this.validity={valid:!1,badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valueMissing:!1},this.value=0,this.calciteSliderChange=Re({cancelable:!1}),this.calciteSliderInput=Re({cancelable:!1}),this.listen("pointerdown",this.pointerDownHandler),this.listen("keydown",this.handleKeyDown),this.listen("touchstart",this.handleTouchStart)}async setFocus(e){return this.focusSetter(()=>this.minHandle||this.maxHandle,e)}connectedCallback(){super.connectedCallback(),this.setMinMaxFromValue(),this.setValueFromMinMax(),nI(this),DJ(this),this.previousEmittedValue=this.value}load(){xo(this.value)||(this.value=this.snap?this.getClosestStep(this.value):this.clamp(this.value)),BSe(this,this.value)}willUpdate(e){e.has("histogram")&&(this.hasHistogram=!!this.histogram),e.has("ticks")&&(this.tickValues=this.generateTickValues()),e.has("value")&&(this.hasUpdated||this.value!==0)&&this.setMinMaxFromValue(),(e.has("minValue")||e.has("maxValue"))&&this.setValueFromMinMax()}updated(){this.labelHandles&&(this.adjustHostObscuredHandleLabel("value"),xo(this.value)&&(this.adjustHostObscuredHandleLabel("minValue"),this.precise&&!this.hasHistogram||this.hyphenateCollidingRangeHandleLabels())),this.hideObscuredBoundingTickLabels(),Vs(this)}disconnectedCallback(){super.disconnectedCallback(),W5(this),VJ(this),this.removeDragListeners()}handleKeyDown(e){const i=this.shouldMirror(),{activeProp:r,max:n,min:s,pageStep:a,step:o}=this,l=this[r],{key:c}=e;if(vk(c)){e.preventDefault();return}let h;if(c==="ArrowUp"||c==="ArrowRight"?h=l+o*(i&&c==="ArrowRight"?-1:1):c==="ArrowDown"||c==="ArrowLeft"?h=l-o*(i&&c==="ArrowLeft"?-1:1):c==="PageUp"?a&&(h=l+a):c==="PageDown"?a&&(h=l-a):c==="Home"?h=s:c==="End"&&(h=n),isNaN(h))return;e.preventDefault();const m=Number(h.toFixed(Zce(o)));this.setValue({[r]:this.clamp(m,r)})}pointerDownHandler(e){if(this.disabled||!n2(e))return;const i=e.clientX||e.pageX,r=this.mapToRange(i);let n="value";xo(this.value)&&(r>=this.minValue&&r<=this.maxValue&&this.lastDragProp==="minMaxValue"?n="minMaxValue":n=Math.abs(this.maxValue-r)<Math.abs(this.minValue-r)||r>=this.maxValue?"maxValue":"minValue"),this.lastDragPropValue=this[n],this.dragStart(n),this.el.shadowRoot.querySelector(`.${ji.thumb}:active`)||this.setValue({[n]:this.clamp(r,n)}),this.focusActiveHandle(i)}handleTouchStart(e){e.preventDefault()}buildThumbType(e){const i=[e];return this.labelHandles&&i.push("labeled"),this.precise&&i.push("precise"),this.hasHistogram&&i.push("histogram"),i.join("-")}setValueFromMinMax(){const{minValue:e,maxValue:i}=this;typeof e=="number"&&typeof i=="number"&&(this.value=[e,i])}setMinMaxFromValue(){const{value:e}=this;xo(e)&&(this.minValue=e[0],this.maxValue=e[1])}onLabelClick(){this.setFocus()}shouldMirror(){return this.mirrored&&!this.hasHistogram}shouldUseMinValue(){return xo(this.value)?this.hasHistogram&&this.maxValue===0||!this.hasHistogram&&this.minValue===0:!1}getTickDensity(){const e=(this.max-this.min)/this.ticks/Myt;return e<1?1:e}generateTickValues(){const e=this.ticks??0;if(e<=0)return[];const i=[this.min],r=this.getTickDensity(),n=e*r;let s=this.min;for(;s<this.max;)s+=n,i.push(Math.min(s,this.max));return i.includes(this.max)||i.push(this.max),i}onThumbBlur(){this.activeProp=null}onThumbFocus(e){const i=e.currentTarget;this.activeProp=i.getAttribute("data-value-prop")}onThumbPointerDown(e){const i=e.currentTarget;this.pointerDownDragStart(e,i.getAttribute("data-value-prop"))}onTrackPointerDown(e){this.pointerDownDragStart(e,"minMaxValue")}pointerDownDragStart(e,i){n2(e)&&this.dragStart(i)}dragStart(e){this.dragProp=e,this.lastDragProp=this.dragProp,this.activeProp=e,window.addEventListener("pointermove",this.dragUpdate),window.addEventListener("pointerup",this.pointerUpDragEnd),window.addEventListener("pointercancel",this.dragEnd)}focusActiveHandle(e){this.dragProp==="minValue"?this.minHandle.focus():this.dragProp==="maxValue"||this.dragProp==="value"?this.maxHandle.focus():this.dragProp==="minMaxValue"&&this.getClosestHandle(e).focus()}emitInput(){this.calciteSliderInput.emit()}emitChange(){this.calciteSliderChange.emit(),this.previousEmittedValue=this.value}removeDragListeners(){window.removeEventListener("pointermove",this.dragUpdate),window.removeEventListener("pointerup",this.pointerUpDragEnd),window.removeEventListener("pointercancel",this.dragEnd)}setValue(e){let i;if(Object.keys(e).forEach(n=>{const s=e[n];i||(i=this[n]!==s),this[n]=s}),!i)return;this.dragProp||this.emitChange(),this.emitInput()}storeThumbRef(e){if(!e)return;e.getAttribute("data-value-prop")==="minValue"?this.minHandle=e:this.maxHandle=e}clamp(e,i){return e=bTe(e,this.min,this.max),i==="maxValue"&&(e=Math.max(e,this.minValue)),i==="minValue"&&(e=Math.min(e,this.maxValue)),e}mapToRange(e){const i=this.max-this.min,{left:r,width:n}=this.trackRef.value.getBoundingClientRect()||{left:0,width:0},s=(e-r)/n,a=this.shouldMirror(),o=this.clamp(this.min+i*(a?1-s:s)),l=Number(o.toFixed(Zce(this.step)));return this.snap&&this.step?this.getClosestStep(l):l}getClosestStep(e){const{max:i,min:r,step:n}=this,s=new Ww(`${Math.floor((e-r)/n)}`).multiply(`${n}`).add(`${r}`).toString();let a=this.clamp(Number(s));return a>i&&(a-=n),a}getClosestHandle(e){return this.getDistanceX(this.maxHandle,e)>this.getDistanceX(this.minHandle,e)?this.minHandle:this.maxHandle}getDistanceX(e,i){return Math.abs(e.getBoundingClientRect().left-i)}getFontSizeForElement(e){return Number(window.getComputedStyle(e).getPropertyValue("font-size").match(/\d+/)[0])}getUnitInterval(e){e=this.clamp(e);const i=this.max-this.min;return(e-this.min)/i}adjustHostObscuredHandleLabel(e){const i=this.el.shadowRoot.querySelector(`.handle__label--${e}`),r=this.el.shadowRoot.querySelector(`.handle__label--${e}.static`),n=this.el.shadowRoot.querySelector(`.handle__label--${e}.transformed`),s=r.getBoundingClientRect(),a=this.getHostOffset(s.left,s.right);i.style.transform=`translateX(${a}px)`,n.style.transform=`translateX(${a}px)`}hyphenateCollidingRangeHandleLabels(){const{shadowRoot:e}=this.el,i=this.shouldMirror(),r=i?"value":"minValue",n=i?"minValue":"value",s=e.querySelector(`.handle__label--${r}`),a=e.querySelector(`.handle__label--${r}.static`),o=e.querySelector(`.handle__label--${r}.transformed`),l=this.getHostOffset(a.getBoundingClientRect().left,a.getBoundingClientRect().right),c=e.querySelector(`.handle__label--${n}`),h=e.querySelector(`.handle__label--${n}.static`),m=e.querySelector(`.handle__label--${n}.transformed`),g=this.getHostOffset(h.getBoundingClientRect().left,h.getBoundingClientRect().right),v=this.getFontSizeForElement(s),b=this.getRangeLabelOverlap(o,m),x=s,$=v/2;if(b>0){if(x.classList.add(ji.hyphen,ji.hyphenWrap),g===0&&l===0){let M=b/2-$;M=Math.sign(M)===-1?Math.abs(M):-M;const k=this.getHostOffset(o.getBoundingClientRect().left+M-$,o.getBoundingClientRect().right+M-$);let A=b/2;const L=this.getHostOffset(m.getBoundingClientRect().left+A,m.getBoundingClientRect().right+A);k!==0&&(M+=k,A+=k),L!==0&&(M+=L,A+=L),s.style.transform=`translateX(${M}px)`,o.style.transform=`translateX(${M-$}px)`,c.style.transform=`translateX(${A}px)`,m.style.transform=`translateX(${A}px)`}else if(l>0||g>0)s.style.transform=`translateX(${l+$}px)`,c.style.transform=`translateX(${b+g}px)`,m.style.transform=`translateX(${b+g}px)`;else if(l<0||g<0){let M=Math.abs(l)+b-$;M=Math.sign(M)===-1?Math.abs(M):-M,s.style.transform=`translateX(${M}px)`,o.style.transform=`translateX(${M-$}px)`}}else x.classList.remove(ji.hyphen,ji.hyphenWrap),s.style.transform=`translateX(${l}px)`,o.style.transform=`translateX(${l}px)`,c.style.transform=`translateX(${g}px)`,m.style.transform=`translateX(${g}px)`}hideObscuredBoundingTickLabels(){const e=xo(this.value);if(!this.hasHistogram&&!e&&!this.labelHandles&&!this.precise||!this.hasHistogram&&!e&&this.labelHandles&&!this.precise||!this.hasHistogram&&!e&&!this.labelHandles&&this.precise||!this.hasHistogram&&!e&&this.labelHandles&&this.precise||!this.hasHistogram&&e&&!this.precise||this.hasHistogram&&!this.precise&&!this.labelHandles)return;const i=this.el.shadowRoot.querySelector(`.${ji.thumbMinValue}`),r=this.el.shadowRoot.querySelector(`.${ji.thumbValue}`),n=this.el.shadowRoot.querySelector(`.${ji.tickMin}`),s=this.el.shadowRoot.querySelector(`.${ji.tickMax}`);!i&&r&&n&&s&&(n.style.opacity=this.isMinTickLabelObscured(n,r)?"0":"1",s.style.opacity=this.isMaxTickLabelObscured(s,r)?"0":"1"),i&&r&&n&&s&&(n.style.opacity=this.isMinTickLabelObscured(n,i)||this.isMinTickLabelObscured(n,r)?"0":"1",s.style.opacity=this.isMaxTickLabelObscured(s,i)||this.isMaxTickLabelObscured(s,r)&&this.hasHistogram?"0":"1")}getHostOffset(e,i){const{left:r,right:n}=this.el.getBoundingClientRect();return e<r?r-e:i>n?-(i-n):0}getRangeLabelOverlap(e,i){const r=e.getBoundingClientRect(),n=i.getBoundingClientRect(),s=this.getFontSizeForElement(e),a=r.right+s-n.left;return Math.max(a,0)}isMinTickLabelObscured(e,i){const r=e.getBoundingClientRect(),n=i.getBoundingClientRect();return Tte(r,n)}isMaxTickLabelObscured(e,i){const r=e.getBoundingClientRect(),n=i.getBoundingClientRect();return Tte(r,n)}internalLabelFormatter(e,i){const r=this.labelFormatter;if(!r)return this.formatValue(e);const n=r(e,i,this.formatValue);return n??this.formatValue(e)}render(){const e=this.el.id||this.guid,i=xo(this.value)?this.maxValue:this.value,r=this.minValue||this.min,n=this.shouldUseMinValue(),s=this.getUnitInterval(n?this.minValue:r)*100,a=this.getUnitInterval(i)*100,o=this.shouldMirror(),l=xo(this.value),c=this.buildThumbType("max"),h=this.renderThumb({type:c,thumbPlacement:c.includes("histogram")?"below":"above",maxInterval:a,minInterval:s,mirror:o}),m=this.buildThumbType("min"),g=l?this.renderThumb({type:m,thumbPlacement:m.includes("histogram")||m.includes("precise")?"below":"above",maxInterval:a,minInterval:s,mirror:o}):null,v=l?"start":this.fillPlacement,b=v==="none"?{left:"unset",right:"unset"}:v==="end"?{left:`${o?s:a}%`,right:`${o?a:s}%`}:{left:`${o?100-a:s}%`,right:`${o?s:100-a}%`};return wu(this.el,"id",e),Us({disabled:this.disabled,children:q`${this.labelText&&QJ({labelText:this.labelText,onClick:this.onLabelClick,required:this.required,tooltipText:this.messages.required})||""}<div aria-errormessage=${uB.validationMessage} .ariaInvalid=${this.status==="invalid"} .ariaLabel=${ZE(this)} .ariaRequired=${this.required} class=${H({[ji.container]:!0,[ji.containerRange]:l,[ji.scale(this.scale)]:!0})}>${this.renderGraph()}<div class=${H(ji.track)} ${gt(this.trackRef)}><div class=${H(ji.trackRange)} @pointerdown=${this.onTrackPointerDown} style=${qt(b)}></div><div class=${H(ji.ticks)}>${this.tickValues.map(x=>{const $=`${this.getUnitInterval(x)*100}%`;let M=!1;if(v==="start"||v==="end")if(n)M=x>=this.minValue&&x<=this.maxValue;else{const k=v==="start"?r:i,A=v==="start"?i:this.max;M=x>=k&&x<=A}return q`<span class=${H({[ji.tick]:!0,[ji.tickActive]:M})} style=${qt({left:o?"":$,right:o?$:""})}>${this.renderTickLabel(x)}</span>`})}</div></div><div class=${H(ji.thumbContainer)}>${g}${h}${UJ({component:this})}</div></div>${this.validationMessage&&this.status==="invalid"?KJ({icon:this.validationIcon,id:uB.validationMessage,message:this.validationMessage,scale:this.scale,status:this.status}):null}`})}renderThumb({type:e,mirror:i,thumbPlacement:r,minInterval:n,maxInterval:s}){const a=e.includes("labeled"),o=e.includes("precise"),l=e.includes("min"),c=xo(this.value),h=l?this.minValue:c?this.maxValue:this.value,m=l?"minValue":c?"maxValue":"value",g=l?this.minLabel:c?this.maxLabel:this.minLabel,v=l?this.minValue:h,b=m==="minValue"?this.internalLabelFormatter(this.minValue,"min"):m==="maxValue"?this.internalLabelFormatter(this.maxValue,"max"):this.internalLabelFormatter(h,"value"),x=l?{left:`${i?100-n:n}%`}:{right:`${i?s:100-s}%`},$=`${ji.handleLabel} ${l?ji.handleLabelMinValue:ji.handleLabelValue}`,k=[...a?[q`<span aria-hidden=true class=${H($)}>${b}</span>`,q`<span aria-hidden=true class=${`${$} ${ji.static}`}>${b}</span>`,q`<span aria-hidden=true class=${`${$} ${ji.transformed}`}>${b}</span>`]:[],q`<div class=${H(ji.handle)}></div>`,o&&q`<div class=${H(ji.handleExtension)}></div>`||""];return r==="below"&&k.reverse(),nt(e,q`<div .ariaLabel=${g} aria-orientation=horizontal .ariaValueMax=${this.max} .ariaValueMin=${this.min} .ariaValueNow=${v} class=${H({[ji.thumb]:!0,[ji.thumbValue]:!l,[ji.thumbActive]:this.lastDragProp!=="minMaxValue"&&this.dragProp===m,[ji.thumbPrecise]:o,[ji.thumbMinValue]:l})} data-value-prop=${m} @blur=${this.onThumbBlur} @focus=${this.onThumbFocus} @pointerdown=${this.onThumbPointerDown} role=slider style=${qt(x)} tabindex=0 ${gt(this.storeThumbRef)}>${k}</div>`)}renderGraph(){return this.histogram?q`<calcite-graph class=${H(ji.graph)} .colorStops=${this.histogramStops} .data=${this.histogram} .highlightMax=${xo(this.value)?this.maxValue:this.value} .highlightMin=${xo(this.value)?this.minValue:this.min} .max=${this.max} .min=${this.min}></calcite-graph>`:null}renderTickLabel(e){const{hasHistogram:i,labelHandles:r,labelTicks:n,max:s,min:a,precise:o,value:l}=this,c=xo(l),h=e===a,m=e===s,g=h||m;return n&&(!i&&(g||!o||!c)||i&&(g||!o&&!r))?q`<span class=${H({[ji.tickLabel]:!0,[ji.tickMin]:h,[ji.tickMax]:m})}>${this.internalLabelFormatter(e,"tick")}</span>`:null}};iE.properties={activeProp:[16,{},{state:!0}],maxValueDragRange:[16,{},{state:!0}],minMaxValueRange:[16,{},{state:!0}],minValueDragRange:[16,{},{state:!0}],tickValues:[16,{},{state:!0}],disabled:[7,{},{reflect:!0,type:Boolean}],fillPlacement:[3,{},{reflect:!0}],form:[3,{},{reflect:!0}],groupSeparator:[7,{},{reflect:!0,type:Boolean}],hasHistogram:[7,{},{reflect:!0,type:Boolean}],histogram:[0,{},{attribute:!1}],histogramStops:[0,{},{attribute:!1}],labelFormatter:[0,{},{attribute:!1}],labelHandles:[7,{},{reflect:!0,type:Boolean}],labelTicks:[7,{},{reflect:!0,type:Boolean}],max:[11,{},{reflect:!0,type:Number}],maxLabel:1,maxValue:[9,{},{type:Number}],min:[11,{},{reflect:!0,type:Number}],minLabel:1,labelText:1,messageOverrides:[0,{},{attribute:!1}],minValue:[9,{},{type:Number}],mirrored:[7,{},{reflect:!0,type:Boolean}],name:[3,{},{reflect:!0}],numberingSystem:1,pageStep:[11,{},{reflect:!0,type:Number}],precise:[7,{},{reflect:!0,type:Boolean}],required:[7,{},{reflect:!0,type:Boolean}],scale:[3,{},{reflect:!0}],snap:[7,{},{reflect:!0,type:Boolean}],status:[3,{},{reflect:!0}],step:[11,{},{reflect:!0,type:Number}],ticks:[11,{},{reflect:!0,type:Number}],validationIcon:[3,{converter:Hm},{reflect:!0}],validationMessage:1,validity:[0,{},{attribute:!1}],value:[11,{},{type:Number,reflect:!0}]},iE.shadowRootOptions={mode:"open",delegatesFocus:!0},iE.styles=Cyt;let NG=iE;ci("calcite-slider",NG);function Eyt(){return pe.jsx(pe.Fragment,{children:pe.jsxs("calcite-block",{heading:"Examples",collapsible:!0,children:["The following examples all represent change in presidential voting patterns from 2004 to 2024 in ",pe.jsx("b",{children:"Utah County, Utah"}),".",pe.jsxs("calcite-carousel",{label:"Examples",children:[pe.jsx("calcite-carousel-item",{label:"Gradual change",children:pe.jsxs("div",{className:"custom-content",children:[pe.jsx("img",{className:"examples",src:"./change-ut-2004.png",alt:"Gradual change"}),pe.jsxs("span",{children:[pe.jsx("b",{children:"2004"}),". Strong increase in Republican support."]})]})}),pe.jsx("calcite-carousel-item",{label:"Bowtie",children:pe.jsxs("div",{className:"custom-content",children:[pe.jsx("img",{className:"examples",src:"./change-ut-2008.png",alt:"Bowtie"}),pe.jsxs("span",{children:[pe.jsx("b",{children:"2008"}),". Strong increase in Democratic support. Moderate increase for support for third party candidates."]})]})}),pe.jsx("calcite-carousel-item",{label:"No change",children:pe.jsxs("div",{className:"custom-content",children:[pe.jsx("img",{className:"examples",src:"./change-ut-2012.png",alt:"No change"}),pe.jsxs("span",{children:[pe.jsx("b",{children:"2012"}),". Strong increase in Republican support."]})]})}),pe.jsx("calcite-carousel-item",{label:"Inconsistent",children:pe.jsxs("div",{className:"custom-content",children:[pe.jsx("img",{className:"examples",src:"./change-ut-2016.png",alt:"Contested"}),pe.jsxs("span",{children:[pe.jsx("b",{children:"2016"}),". Strong increase in support for third party candidates. Moderate increase in Democratic support. Very strong decrease in Republican support."]})]})}),pe.jsx("calcite-carousel-item",{label:"Inconsistent",children:pe.jsxs("div",{className:"custom-content",children:[pe.jsx("img",{className:"examples",src:"./change-ut-2020.png",alt:"Contested"}),pe.jsxs("span",{children:[pe.jsx("b",{children:"2020"}),". Strong increase in support for both Republicans and Democrats."]})]})}),pe.jsx("calcite-carousel-item",{label:"Inconsistent",children:pe.jsxs("div",{className:"custom-content",children:[pe.jsx("img",{className:"examples",src:"./change-ut-2024.png",alt:"Contested"}),pe.jsxs("span",{children:[pe.jsx("b",{children:"2024"}),". Marginal increase in support for both Republicans and Democrats."]})]})})]})]})})}function kyt(){return pe.jsx(pe.Fragment,{children:pe.jsx("calcite-block",{heading:"Examples",collapsible:!0,children:pe.jsxs("calcite-carousel",{label:"Examples",children:[pe.jsx("calcite-carousel-item",{label:"Slight Democratic swing",children:pe.jsxs("div",{className:"custom-content",children:[pe.jsx("img",{className:"examples",src:"./swing-slight-dem.png",alt:"Slight Democratic swing",style:{width:"400px"}}),pe.jsxs("span",{children:[pe.jsx("b",{children:"Slight Democratic swing"}),". In 2020, many counties in Michigan shifted slightly toward the Democratic candidate compared to 2016. The aggregation of these small shifts resulted in flipping the state from Republican to Democratic in 2020."]})]})}),pe.jsx("calcite-carousel-item",{label:"Dramatic Republican swing",children:pe.jsxs("div",{className:"custom-content",children:[pe.jsx("img",{className:"examples",src:"./swing-strong-r.png",alt:"Dramatic Republican swing",style:{width:"400px"}}),pe.jsxs("span",{children:[pe.jsx("b",{children:"Dramatic Republican swing"}),". Many rural counties in the midwest tend to have dramatic swings toward Republican support when an incumbent Democratic president (who performed well in those same counties) is running for re-election."]})]})}),pe.jsx("calcite-carousel-item",{label:"Dramatic third party swing",children:pe.jsxs("div",{className:"custom-content",children:[pe.jsx("img",{className:"examples",src:"./swing-strong-other.png",alt:"Dramatic third party swing",style:{width:"400px"}}),pe.jsxs("span",{children:[pe.jsx("b",{children:"Dramatic third party swing"}),". In rare cases, third party candidates have performed very well in certain areas, resulting in lackluster support for one or both major parties. In 2016, many rural counties in the west dramatically favored third party candidates over Democrats."]})]})}),pe.jsx("calcite-carousel-item",{label:"Dramatic swings both directions",children:pe.jsxs("div",{className:"custom-content",children:[pe.jsx("img",{className:"examples",src:"./swing-both.png",alt:"Dramatic swings both directions",style:{width:"400px"}}),pe.jsxs("span",{children:[pe.jsx("b",{children:"Dramatic swings both directions"}),". For the most part, counties tend to support the same party from one election to the next. In elections that come after an election with a strong third party candidate, or weak voter turnout, rural counties can show dramatic swings of support back to their traditional alliances."]})]})})]})})})}function Ayt(){return pe.jsx(pe.Fragment,{children:pe.jsxs("calcite-block",{heading:"Legend",collapsible:!0,expanded:!0,children:[pe.jsx("p",{children:"This map shows the party that experienced the largest swing in support from the previous election in each state and county."}),pe.jsx("p",{children:"States are shaded based on whether their electoral votes swung from one party to another from the previous election."}),pe.jsxs("div",{className:"legendElement",children:[pe.jsx("b",{style:{fontSize:"12pt"},children:"Swing states"}),pe.jsx("img",{src:"./change-states.png",className:"legend",alt:"Legend",style:{width:"200px"}})]}),pe.jsx("p",{children:"Arrows indicate the direction and magnitude of the swing."}),pe.jsx("div",{className:"legendElement",children:pe.jsx("img",{src:"./legend-swing.png",className:"legend",alt:"Legend",style:{width:"300px"}})}),pe.jsxs("ul",{children:[pe.jsxs("li",{children:["Arrow ",pe.jsx("b",{children:"color"})," represents the party that experienced the largest swing in support."]}),pe.jsxs("li",{children:["Arrow ",pe.jsx("b",{children:"orientation"})," indicates the magnitude of the swing."]}),pe.jsxs("li",{children:["Arrow ",pe.jsx("b",{children:"size"})," corresponds to the change in votes in favor of the party with the most change."]})]}),pe.jsx("div",{className:"legendElement",children:pe.jsx("img",{src:"./legend-swing-arrow.png",className:"legend",alt:"Legend",style:{width:"180px"}})})]})})}function Pyt(){return pe.jsx(pe.Fragment,{children:pe.jsxs("calcite-block",{heading:"Legend",collapsible:!0,expanded:!0,children:[pe.jsx("p",{children:"This map shows the winner of the election. The shade of the state indicates the party that was awarded electoral votes in the given election. The orientation of the arrows represent how far right or left the state (or county) leaned in terms of the proportion of votes received by the winning party."}),pe.jsxs("div",{className:"legendElement",children:[pe.jsx("b",{children:"Lean"}),pe.jsx("img",{src:"./legend-lean.png",className:"legend",alt:"Legend",style:{width:"300px"}})]}),pe.jsx("p",{children:"The size of each arrow corresponds to the margin of victory for the winning party."}),pe.jsxs("div",{className:"legendElement",children:[pe.jsx("b",{children:"Margin of victory"}),pe.jsx("img",{src:"./legend-swing-arrow.png",className:"legend",alt:"Legend",style:{width:"180px"}})]})]})})}function Oyt(){return pe.jsx(pe.Fragment,{children:pe.jsx("calcite-block",{heading:"Examples",collapsible:!0,children:pe.jsxs("calcite-carousel",{label:"Examples",children:[pe.jsx("calcite-carousel-item",{label:"Left Coast",children:pe.jsxs("div",{className:"custom-content",children:[pe.jsx("img",{className:"examples",src:"./legend-lean-left.png",alt:"Left Coast",style:{width:"400px"}}),pe.jsxs("span",{children:[pe.jsx("b",{children:"Left Coast"}),". Many counties on the west coast of the United States (Washington, Oregon, California), including those surrounding the San Francisco Bay Area, tend to show strong Democratic support in high population areas. While a state may have more counties that predominantly support Republicans, the fewer, more populous Democratic-leaning counties often drive the overall state result in presidential elections due to the significant size of their population. These areas are depicted on the map as large left-leaning blue arrows."]})]})}),pe.jsx("calcite-carousel-item",{label:"Conservative Heartland",children:pe.jsxs("div",{className:"custom-content",children:[pe.jsx("img",{className:"examples",src:"./legend-lean-right.png",alt:"Conservative Heartland",style:{width:"400px"}}),pe.jsxs("span",{children:[pe.jsx("b",{children:"Conservative Heartland"}),". Most rural counties in the Midwest tend to show strong Republican support in presidential elections. While the vast majority of these counties have a small population, the aggregation of them often results in a significant electoral impact for Republicans. These areas are depicted on the map as small red arrows pointing nearly all the way to the right."]})]})}),pe.jsx("calcite-carousel-item",{label:"Battleground areas",children:pe.jsxs("div",{className:"custom-content",children:[pe.jsx("img",{className:"examples",src:"./legend-lean-middle.png",alt:"Battleground areas",style:{width:"400px"}}),pe.jsxs("span",{children:[pe.jsx("b",{children:"Battleground areas"}),". Some counties in battleground states (such as Iowa in 2008 and 2012) tend to show fairly even support for both major parties, resulting in a slight lean toward one party or another. This often results in very narrow wins on the state level, which have dramatic impact on the overall electoral outcome. These areas are depicted on the map as small or large arrows pointing nearly straight up."]})]})})]})})})}function Lyt(){return pe.jsx(pe.Fragment,{children:pe.jsxs("calcite-block",{heading:"Legend",collapsible:!0,expanded:!0,children:[pe.jsx("p",{children:"This map shows the winner of the election on the state and county level."}),pe.jsx("div",{className:"legendElement",children:pe.jsx("img",{src:"./legend-winner.png",className:"legend",alt:"Legend"})})]})})}const Pf=2004,nl=2024;function Fyt(t){const{onYearInput:e,rendererType:i}=t,[r,n]=Td.useState(nl),[s,a]=Td.useState(Pf),[o,l]=Td.useState(nl),[c,h]=Td.useState(4);Td.useEffect(()=>{e(r),i==="winner"||i==="winner-lean"||i==="swing"||i==="change"?(a(Pf),l(nl),h(4),r<Pf?(n(Pf),e(Pf)):r>nl&&(n(nl),e(nl))):i==="trend"&&(a(2016),l(nl),h(2),r<2016?(n(2016),e(2016)):r>nl&&(n(nl),e(nl)))},[i,r,e,n]);let m;switch(i){case"winner":m=pe.jsxs(pe.Fragment,{children:[pe.jsx("calcite-label",{layout:"inline",children:"Select an election year"}),pe.jsx("div",{className:"slider-container",children:pe.jsx("calcite-slider",{min:s,max:o,labelHandles:!0,labelTicks:!0,maxLabel:o.toString(),minLabel:s.toString(),ticks:c,step:4,value:r,oncalciteSliderInput:g=>{const v=g.target.value;n(v)},snap:!0})}),pe.jsx(Lyt,{})]});break;case"winner-lean":m=pe.jsxs(pe.Fragment,{children:[pe.jsx("calcite-label",{layout:"inline",children:"Select an election year"}),pe.jsx("div",{className:"slider-container",children:pe.jsx("calcite-slider",{min:s,max:o,labelHandles:!0,labelTicks:!0,maxLabel:o.toString(),minLabel:s.toString(),ticks:c,step:4,value:r,oncalciteSliderInput:g=>{const v=g.target.value;n(v)},snap:!0})}),pe.jsx(Pyt,{}),pe.jsx(Oyt,{})]});break;case"swing":m=pe.jsxs(pe.Fragment,{children:[pe.jsx("calcite-label",{layout:"inline",children:"Select an election year"}),pe.jsx("div",{className:"slider-container",children:pe.jsx("calcite-slider",{min:s,max:o,labelHandles:!0,labelTicks:!0,maxLabel:o.toString(),minLabel:s.toString(),ticks:c,step:4,value:r,oncalciteSliderInput:g=>{const v=g.target.value;n(v)},snap:!0})}),pe.jsx(Ayt,{}),pe.jsx(kyt,{})]});break;case"trend":m=pe.jsxs(pe.Fragment,{children:[pe.jsx("calcite-label",{layout:"inline",children:"Select an election year"}),pe.jsx("div",{className:"slider-container",children:pe.jsx("calcite-slider",{min:s,max:o,labelHandles:!0,labelTicks:!0,maxLabel:o.toString(),minLabel:s.toString(),ticks:c,step:4,value:r,oncalciteSliderInput:g=>{const v=g.target.value;n(v)},snap:!0})}),pe.jsx(vyt,{}),pe.jsx(byt,{})]});break;case"change":m=pe.jsxs(pe.Fragment,{children:[pe.jsx("calcite-label",{layout:"inline",children:"Select an election year"}),pe.jsx("div",{className:"slider-container",children:pe.jsx("calcite-slider",{min:s,max:o,labelHandles:!0,labelTicks:!0,maxLabel:o.toString(),minLabel:s.toString(),ticks:c,step:4,value:r,oncalciteSliderInput:g=>{const v=g.target.value;n(v)},snap:!0})}),pe.jsx(wyt,{}),pe.jsx(Eyt,{})]});break;default:m=pe.jsx(pe.Fragment,{children:pe.jsx("arcgis-legend",{})});break}return pe.jsx(pe.Fragment,{children:m})}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const dB={container:"container",content:"content",scale:t=>`scale-${t}`},Ryt={tabTitleId:t=>`calcite-tab-title-${t}`},zyt=ct`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{display:none}:host,.container,.content{block-size:100%;inline-size:100%}:host([selected]),:host([selected]) .container{display:flex;flex-direction:column}.content{box-sizing:border-box;padding-block:var(--calcite-tab-content-space-y, var(--calcite-tab-content-block-padding, var(--calcite-internal-tab-content-space-y)))}.scale-s{--calcite-internal-tab-content-space-y: .25rem;font-size:var(--calcite-font-size-sm);line-height:1rem}.scale-m{--calcite-internal-tab-content-space-y: .5rem;font-size:var(--calcite-font-size);line-height:1rem}.scale-l{--calcite-internal-tab-content-space-y: .625rem;font-size:var(--calcite-font-size-md);line-height:1.25rem}.container{display:none;block-size:100%;inline-size:100%;overflow:auto;outline-color:transparent}.container:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}:host([hidden]){display:none}[hidden]{display:none}`,ON=class ON extends dt{constructor(){super(),this.guid=Ryt.tabTitleId(Mc()),this.scale="m",this.selected=!1,this.listenOn(document.body,"calciteInternalTabChange",this.internalTabChangeHandler)}async getTabIndex(){return Array.prototype.indexOf.call(mhe(this.el.parentElement.children).filter(e=>e.matches("calcite-tab")),this.el)}_updateAriaInfo(e=[],i=[]){this.labeledBy=i[e.indexOf(this.el.id)]||null}connectedCallback(){super.connectedCallback(),this.parentTabsEl=this.el.closest("calcite-tabs")}disconnectedCallback(){var e;super.disconnectedCallback(),(e=document.body)==null||e.dispatchEvent(new CustomEvent("calciteTabUnregister",{detail:this.el}))}internalTabChangeHandler(e){e.composedPath().find(r=>r.tagName==="CALCITE-TABS")===this.parentTabsEl&&(this.tab?this.selected=this.tab===e.detail.tab:this.getTabIndex().then(r=>{this.selected=r===e.detail.tab}),e.stopPropagation())}render(){const e=this.el.id||this.guid;return wu(this.el,"aria-labelledby",this.labeledBy),wu(this.el,"id",e),q`<div class=${H({[dB.container]:!0,[dB.scale(this.scale)]:!0})} role=tabpanel .tabIndex=${this.selected?0:-1}><section class=${H(dB.content)}><slot></slot></section></div>`}};ON.properties={labeledBy:[16,{},{state:!0}],scale:1,selected:[7,{},{reflect:!0,type:Boolean}],tab:[3,{},{reflect:!0}]},ON.styles=zyt;let DG=ON;ci("calcite-tab",DG);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Jl={buttonLoader:"calcite-button--loader",content:"content",contentSlotted:"content--slotted",icon:"icon",iconStart:"icon--start",iconEnd:"icon--end",loadingIn:"loading-in",loadingOut:"loading-out",iconStartEmpty:"icon-start-empty",iconEndEmpty:"icon-end-empty",buttonPadding:"button-padding",buttonPaddingShrunk:"button-padding--shrunk"},Nyt=ct`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:inline-block;inline-size:auto;vertical-align:middle;border-radius:var(--calcite-button-corner-radius, var(--calcite-internal-button-corner-radius, 0))}:host a,:host button{--calcite-internal-button-content-margin: .5rem;--calcite-internal-button-padding-x: 7px;--calcite-internal-button-padding-y: 3px;position:relative;box-sizing:border-box;display:flex;block-size:100%;inline-size:100%;cursor:pointer;-webkit-user-select:none;user-select:none;appearance:none;align-items:center;justify-content:center;border-style:none;text-align:center;font-family:inherit;font-weight:var(--calcite-font-weight-normal);text-decoration-line:none;outline-color:transparent;box-shadow:var(--calcite-button-shadow, var(--calcite-shadow-none));background-color:var(--calcite-button-background-color, var(--calcite-internal-button-background-color, var(--calcite-color-transparent)));border-block-start-color:var(--calcite-button-border-color, var(--calcite-internal-button-border-block-start-color, var(--calcite-internal-button-border-color, var(--calcite-color-transparent))));border-block-end-color:var(--calcite-button-border-color, var(--calcite-internal-button-border-block-end-color, var(--calcite-internal-button-border-color, var(--calcite-color-transparent))));border-inline-start-color:var(--calcite-button-border-color, var(--calcite-internal-button-border-inline-start-color, var(--calcite-internal-button-border-color, var(--calcite-color-transparent))));border-inline-end-color:var(--calcite-button-border-color, var(--calcite-internal-button-border-inline-end-color, var(--calcite-internal-button-border-color, var(--calcite-color-transparent))));border-style:solid;border-width:var(--calcite-border-width-sm);border-radius:var(--calcite-button-corner-radius, var(--calcite-internal-button-corner-radius, 0));color:var(--calcite-button-text-color, var(--calcite-internal-button-text-color, currentColor));padding-block:var(--calcite-internal-button-padding-y);padding-inline:var(--calcite-internal-button-padding-x);transition:color var(--calcite-animation-timing) ease-in-out,background-color var(--calcite-animation-timing) ease-in-out,box-shadow var(--calcite-animation-timing) ease-in-out,outline-color var(--calcite-internal-animation-timing-fast) ease-in-out}:host a:hover,:host button:hover{text-decoration-line:none}:host a:focus,:host button:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(var(--calcite-spacing-base) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}:host a span,:host button span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:host a calcite-loader,:host button calcite-loader{color:var(--calcite-button-loader-color, var(--calcite-internal-button-loader-color, var(--calcite-button-text-color, var(--calcite-internal-button-text-color))))}:host([round]){--calcite-internal-button-corner-radius: 50px}.content{margin-inline:var(--calcite-internal-button-content-margin)}.icon-start-empty .content{margin-inline-start:unset}.icon-end-empty .content{margin-inline-end:unset}:host([scale=m]) button,:host([scale=m]) a{--calcite-internal-button-content-margin: .75rem}:host([scale=l]) button,:host([scale=l]) a{--calcite-internal-button-content-margin: 1rem}:host([width=auto]){inline-size:auto}:host([width=half]){inline-size:50%}:host([width=full]){inline-size:100%}:host([alignment=center]:not([width=auto])) a,:host([alignment=center]:not([width=auto])) button{justify-content:center}:host([alignment=start]:not([width=auto])) a,:host([alignment=start]:not([width=auto])) button{justify-content:flex-start}:host([alignment=end]:not([width=auto])) a,:host([alignment=end]:not([width=auto])) button{justify-content:flex-end}:host([alignment*=space-between]:not([width=auto])) a,:host([alignment*=space-between]:not([width=auto])) button{justify-content:space-between}:host([alignment=icon-start-space-between]:not([width=auto])) .icon--start{margin-inline-end:auto}:host([alignment=icon-start-space-between]:not([width=auto])) a,:host([alignment=icon-start-space-between]:not([width=auto])) button{text-align:unset}:host([alignment=icon-end-space-between]:not([width=auto])) .icon--end{margin-inline-start:auto}:host([alignment=icon-end-space-between]:not([width=auto])) a,:host([alignment=icon-end-space-between]:not([width=auto])) button{text-align:unset}:host([alignment=center]) a:not(.content--slotted) .icon--start+.icon--end,:host([alignment=center]) button:not(.content--slotted) .icon--start+.icon--end{margin-inline-start:var(--calcite-internal-button-content-margin)}.icon--start,.icon--end{color:var(--calcite-button-icon-color, var(--calcite-icon-color, var(--calcite-ui-icon-color)))}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}@keyframes loader-in{0%{inline-size:0;opacity:0;transform:scale(.5)}to{inline-size:1em;opacity:1;transform:scale(1)}}@keyframes loader-out{0%{inline-size:1em;opacity:1;transform:scale(1)}to{inline-size:0;opacity:0;transform:scale(.5)}}.calcite-button--loader{display:flex}.calcite-button--loader calcite-loader{margin:0}:host([loading]) button.content--slotted .calcite-button--loader calcite-loader,:host([loading]) a.content--slotted .calcite-button--loader calcite-loader{margin-inline-end:var(--calcite-internal-button-content-margin)}:host([loading]) button:not(.content--slotted) .icon--start,:host([loading]) button:not(.content--slotted) .icon--end,:host([loading]) a:not(.content--slotted) .icon--start,:host([loading]) a:not(.content--slotted) .icon--end{display:none}:host([appearance]) button,:host([appearance]) a{--calcite-internal-button-border-color: var(--calcite-color-transparent);border-style:solid;border-width:var(--calcite-button-border-size, 1px)}:host([kind=brand]) button,:host([kind=brand]) a{--calcite-internal-button-text-color: var(--calcite-color-text-inverse);--calcite-internal-button-background-color: var(--calcite-color-brand);--calcite-internal-button-loader-color: var(--calcite-color-text-inverse)}:host([kind=brand]) button:hover,:host([kind=brand]) a:hover{--calcite-internal-button-background-color: var(--calcite-color-brand-hover)}:host([kind=brand]) button:active,:host([kind=brand]) a:active{--calcite-internal-button-background-color: var(--calcite-color-brand-press)}:host([kind=danger]) button,:host([kind=danger]) a{--calcite-internal-button-text-color: var(--calcite-color-text-inverse);--calcite-internal-button-background-color: var(--calcite-color-status-danger);--calcite-internal-button-loader-color: var(--calcite-color-text-inverse)}:host([kind=danger]) button:hover,:host([kind=danger]) a:hover{--calcite-internal-button-background-color: var(--calcite-color-status-danger-hover)}:host([kind=danger]) button:active,:host([kind=danger]) a:active{--calcite-internal-button-background-color: var(--calcite-color-status-danger-press)}:host([kind=neutral]) button,:host([kind=neutral]) a{--calcite-internal-button-text-color: var(--calcite-color-text-1);--calcite-internal-button-background-color: var(--calcite-color-foreground-3);--calcite-internal-button-loader-color: var(--calcite-color-text-1)}:host([kind=neutral]) button:hover,:host([kind=neutral]) a:hover{--calcite-internal-button-background-color: var(--calcite-color-foreground-2)}:host([kind=neutral]) button:active,:host([kind=neutral]) a:active{--calcite-internal-button-background-color: var(--calcite-color-foreground-1)}:host([kind=inverse]) button,:host([kind=inverse]) a{--calcite-internal-button-text-color: var(--calcite-color-text-inverse);--calcite-internal-button-background-color: var(--calcite-color-inverse);--calcite-internal-button-loader-color: var(--calcite-color-text-inverse)}:host([kind=inverse]) button:hover,:host([kind=inverse]) a:hover{--calcite-internal-button-background-color: var(--calcite-color-inverse-hover)}:host([kind=inverse]) button:active,:host([kind=inverse]) a:active{--calcite-internal-button-background-color: var(--calcite-color-inverse-press)}:host([appearance=outline-fill]) button,:host([appearance=outline-fill]) a{--calcite-internal-button-background-color: var(--calcite-color-foreground-1);border-style:solid;border-width:var(--calcite-button-border-size, 1px)}:host([appearance=outline-fill]) button:hover,:host([appearance=outline-fill]) a:hover{--calcite-internal-button-background-color: var(--calcite-color-foreground-2)}:host([appearance=outline-fill]) button:active,:host([appearance=outline-fill]) a:active{--calcite-internal-button-background-color: var(--calcite-color-foreground-3)}:host([appearance=outline-fill][kind=brand]) button,:host([appearance=outline-fill][kind=brand]) a{--calcite-internal-button-border-color: var(--calcite-color-brand);--calcite-internal-button-text-color: var(--calcite-color-brand);--calcite-internal-button-loader-color: var(--calcite-color-brand)}:host([appearance=outline-fill][kind=brand]) button:hover,:host([appearance=outline-fill][kind=brand]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-brand-hover);--calcite-internal-button-text-color: var(--calcite-color-brand-hover)}:host([appearance=outline-fill][kind=brand]) button:focus,:host([appearance=outline-fill][kind=brand]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-brand);--calcite-internal-button-text-color: var(--calcite-color-brand)}:host([appearance=outline-fill][kind=brand]) button:active,:host([appearance=outline-fill][kind=brand]) a:active{--calcite-internal-button-border-color: var(--calcite-color-brand-press);--calcite-internal-button-text-color: var(--calcite-color-brand-press)}:host([appearance=outline-fill][kind=brand]) button calcite-loader,:host([appearance=outline-fill][kind=brand]) a calcite-loader{--calcite-internal-button-loader-color: var(--calcite-color-brand)}:host([appearance=outline-fill][kind=danger]) button,:host([appearance=outline-fill][kind=danger]) a{--calcite-internal-button-border-color: var(--calcite-color-status-danger);--calcite-internal-button-text-color: var(--calcite-color-status-danger);--calcite-internal-button-loader-color: var(--calcite-color-status-danger)}:host([appearance=outline-fill][kind=danger]) button:hover,:host([appearance=outline-fill][kind=danger]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-status-danger-hover);--calcite-internal-button-text-color: var(--calcite-color-status-danger-hover)}:host([appearance=outline-fill][kind=danger]) button:focus,:host([appearance=outline-fill][kind=danger]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-status-danger);--calcite-internal-button-text-color: var(--calcite-color-status-danger)}:host([appearance=outline-fill][kind=danger]) button:active,:host([appearance=outline-fill][kind=danger]) a:active{--calcite-internal-button-border-color: var(--calcite-color-status-danger-press);--calcite-internal-button-text-color: var(--calcite-color-status-danger-press)}:host([appearance=outline-fill][kind=danger]) button calcite-loader,:host([appearance=outline-fill][kind=danger]) a calcite-loader{--calcite-internal-button-loader-color: var(--calcite-color-status-danger)}:host([appearance=outline-fill][kind=neutral]) button,:host([appearance=outline-fill][kind=neutral]) a{--calcite-internal-button-border-color: var(--calcite-color-border-1);--calcite-internal-button-text-color: var(--calcite-color-text-1);--calcite-internal-button-loader-color: var(--calcite-color-text-1)}:host([appearance=outline-fill][kind=neutral]) button:hover,:host([appearance=outline-fill][kind=neutral]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-border-input)}:host([appearance=outline-fill][kind=neutral]) button:focus,:host([appearance=outline-fill][kind=neutral]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-foreground-3)}:host([appearance=outline-fill][kind=neutral]) button:active,:host([appearance=outline-fill][kind=neutral]) a:active{--calcite-internal-button-border-color: var(--calcite-color-text-3)}:host([appearance=solid][kind=neutral]) button:hover,:host([appearance=solid][kind=neutral]) a:hover{--calcite-internal-button-background-color: var(--calcite-color-border-3)}:host([appearance=solid][kind=neutral]) button:active,:host([appearance=solid][kind=neutral]) a:active{--calcite-internal-button-background-color: var(--calcite-color-border-2)}:host([appearance=outline-fill][kind=inverse]) button,:host([appearance=outline-fill][kind=inverse]) a{--calcite-internal-button-text-color: var(--calcite-color-text-1);--calcite-internal-button-border-color: var(--calcite-color-inverse);--calcite-internal-button-loader-color: var(--calcite-color-text-1)}:host([appearance=outline-fill][kind=inverse]) button:hover,:host([appearance=outline-fill][kind=inverse]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-inverse-hover)}:host([appearance=outline-fill][kind=inverse]) button:focus,:host([appearance=outline-fill][kind=inverse]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-inverse)}:host([appearance=outline-fill][kind=inverse]) button:active,:host([appearance=outline-fill][kind=inverse]) a:active{--calcite-internal-button-border-color: var(--calcite-color-inverse-press)}:host([appearance=outline]) button,:host([appearance=outline]) a{--calcite-internal-button-background-color: var(--calcite-color-transparent);border-style:solid;border-width:var(--calcite-button-border-size, 1px)}:host([appearance=outline]) button:hover,:host([appearance=outline]) a:hover{--calcite-internal-button-background-color: var(--calcite-color-transparent-hover)}:host([appearance=outline]) button:active,:host([appearance=outline]) a:active{--calcite-internal-button-background-color: var(--calcite-color-transparent-press)}:host([appearance=outline][kind=brand]) button,:host([appearance=outline][kind=brand]) a{--calcite-internal-button-border-color: var(--calcite-color-brand);--calcite-internal-button-text-color: var(--calcite-color-brand);--calcite-internal-button-loader-color: var(--calcite-color-brand)}:host([appearance=outline][kind=brand]) button:hover,:host([appearance=outline][kind=brand]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-brand-hover);--calcite-internal-button-text-color: var(--calcite-color-brand-hover)}:host([appearance=outline][kind=brand]) button:focus,:host([appearance=outline][kind=brand]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-brand);--calcite-internal-button-text-color: var(--calcite-color-brand)}:host([appearance=outline][kind=brand]) button:active,:host([appearance=outline][kind=brand]) a:active{--calcite-internal-button-border-color: var(--calcite-color-brand-press);--calcite-internal-button-text-color: var(--calcite-color-brand-press)}:host([appearance=outline][kind=brand]) button calcite-loader,:host([appearance=outline][kind=brand]) a calcite-loader{--calcite-internal-button-loader-color: var(--calcite-color-brand)}:host([appearance=outline][kind=danger]) button,:host([appearance=outline][kind=danger]) a{--calcite-internal-button-border-color: var(--calcite-color-status-danger);--calcite-internal-button-text-color: var(--calcite-color-status-danger);--calcite-internal-button-loader-color: var(--calcite-color-status-danger)}:host([appearance=outline][kind=danger]) button:hover,:host([appearance=outline][kind=danger]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-status-danger-hover);--calcite-internal-button-text-color: var(--calcite-color-status-danger-hover)}:host([appearance=outline][kind=danger]) button:focus,:host([appearance=outline][kind=danger]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-status-danger);--calcite-internal-button-text-color: var(--calcite-color-status-danger)}:host([appearance=outline][kind=danger]) button:active,:host([appearance=outline][kind=danger]) a:active{--calcite-internal-button-border-color: var(--calcite-color-status-danger-press);--calcite-internal-button-text-color: var(--calcite-color-status-danger-press)}:host([appearance=outline][kind=danger]) button calcite-loader,:host([appearance=outline][kind=danger]) a calcite-loader{--calcite-internal-button-loader-color: var(--calcite-color-status-danger)}:host([appearance=outline][kind=neutral]) button,:host([appearance=outline][kind=neutral]) a{--calcite-internal-button-text-color: var(--calcite-color-text-1);--calcite-internal-button-border-color: var(--calcite-color-border-1);--calcite-internal-button-loader-color: var(--calcite-color-text-1)}:host([appearance=outline][kind=neutral]) button:hover,:host([appearance=outline][kind=neutral]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-border-input)}:host([appearance=outline][kind=neutral]) button:focus,:host([appearance=outline][kind=neutral]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-foreground-3)}:host([appearance=outline][kind=neutral]) button:active,:host([appearance=outline][kind=neutral]) a:active{--calcite-internal-button-border-color: var(--calcite-color-text-3)}:host([appearance=outline][kind=inverse]) button,:host([appearance=outline][kind=inverse]) a{--calcite-internal-button-text-color: var(--calcite-color-text-1);--calcite-internal-button-border-color: var(--calcite-color-inverse);--calcite-internal-button-loader-color: var(--calcite-color-text-1)}:host([appearance=outline][kind=inverse]) button:hover,:host([appearance=outline][kind=inverse]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-inverse-hover)}:host([appearance=outline][kind=inverse]) button:focus,:host([appearance=outline][kind=inverse]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-inverse)}:host([appearance=outline][kind=inverse]) button:active,:host([appearance=outline][kind=inverse]) a:active{--calcite-internal-button-border-color: var(--calcite-color-inverse-press)}:host([appearance=outline-fill][split-child=primary]) button,:host([appearance=outline][split-child=primary]) button,:host([appearance=outline-fill][split-child=primary]) a,:host([appearance=outline][split-child=primary]) a{border-inline-end-width:0;border-inline-start-width:1px}:host([appearance=outline-fill][split-child=secondary]) button,:host([appearance=outline][split-child=secondary]) button,:host([appearance=outline-fill][split-child=secondary]) a,:host([appearance=outline][split-child=secondary]) a{border-inline-start-width:0;border-inline-end-width:1px}:host([appearance=transparent]) button,:host([appearance=transparent]) a{--calcite-internal-button-background-color: var(--calcite-color-transparent)}:host([appearance=transparent]) button:hover,:host([appearance=transparent]) button:focus,:host([appearance=transparent]) a:hover,:host([appearance=transparent]) a:focus{--calcite-internal-button-background-color: var(--calcite-color-transparent-hover)}:host([appearance=transparent]) button:active,:host([appearance=transparent]) a:active{--calcite-internal-button-background-color: var(--calcite-color-transparent-press)}:host([appearance=transparent]:not(.enable-editing-button)) button,:host([appearance=transparent]:not(.enable-editing-button)) a{background-color:var(--calcite-color-transparent)}:host([appearance=transparent]:not(.enable-editing-button)) button:hover,:host([appearance=transparent]:not(.enable-editing-button)) a:hover{background-color:var(--calcite-color-transparent-hover)}:host([appearance=transparent]:not(.enable-editing-button)) button:active,:host([appearance=transparent]:not(.enable-editing-button)) a:active{background-color:var(--calcite-color-transparent-press)}:host([appearance=transparent][kind=brand]) button,:host([appearance=transparent][kind=brand]) a{--calcite-internal-button-text-color: var(--calcite-color-brand);--calcite-internal-button-loader-color: var(--calcite-color-brand)}:host([appearance=transparent][kind=brand]) button:hover,:host([appearance=transparent][kind=brand]) a:hover{--calcite-internal-button-text-color: var(--calcite-color-brand-hover)}:host([appearance=transparent][kind=brand]) button:focus,:host([appearance=transparent][kind=brand]) a:focus{--calcite-internal-button-text-color: var(--calcite-color-brand)}:host([appearance=transparent][kind=brand]) button:active,:host([appearance=transparent][kind=brand]) a:active{--calcite-internal-button-text-color: var(--calcite-color-brand-press)}:host([appearance=transparent][kind=brand]) button calcite-loader,:host([appearance=transparent][kind=brand]) a calcite-loader{--calcite-internal-button-loader-color: var(--calcite-color-brand)}:host([appearance=transparent][kind=danger]) button,:host([appearance=transparent][kind=danger]) a{--calcite-internal-button-text-color: var(--calcite-color-status-danger);--calcite-internal-button-loader-color: var(--calcite-color-status-danger)}:host([appearance=transparent][kind=danger]) button:hover,:host([appearance=transparent][kind=danger]) a:hover{--calcite-internal-button-text-color: var(--calcite-color-status-danger-hover)}:host([appearance=transparent][kind=danger]) button:focus,:host([appearance=transparent][kind=danger]) a:focus{--calcite-internal-button-text-color: var(--calcite-color-status-danger)}:host([appearance=transparent][kind=danger]) button:active,:host([appearance=transparent][kind=danger]) a:active{--calcite-internal-button-text-color: var(--calcite-color-status-danger-press)}:host([appearance=transparent][kind=danger]) button calcite-loader,:host([appearance=transparent][kind=danger]) a calcite-loader{--calcite-internal-button-loader-color: var(--calcite-color-status-danger)}:host([appearance=transparent][kind=neutral]:not(.cancel-editing-button)) button,:host([appearance=transparent][kind=neutral]:not(.cancel-editing-button)) a,:host([appearance=transparent][kind=neutral]:not(.cancel-editing-button)) calcite-loader{--calcite-internal-button-text-color: var(--calcite-color-text-1)}:host([appearance=transparent][kind=neutral].cancel-editing-button) button{--calcite-internal-button-text-color: var(--calcite-color-text-3)}:host([appearance=transparent][kind=neutral].cancel-editing-button) button:hover{--calcite-internal-button-text-color: var(--calcite-color-text-1);--calcite-internal-button-padding-y: 0}:host(.confirm-changes-button) button:focus,:host(.cancel-editing-button) button:focus,:host(.enable-editing-button) button:focus{outline-offset:-2px}:host([appearance=transparent][kind=inverse]) button:hover,:host([appearance=transparent][kind=inverse]) a:hover{background-color:var(--calcite-color-transparent-inverse-hover)}:host([appearance=transparent][kind=inverse]) button:active,:host([appearance=transparent][kind=inverse]) a:active{background-color:var(--calcite-color-transparent-inverse-press)}:host([appearance=transparent][kind=inverse]) button calcite-loader,:host([appearance=transparent][kind=inverse]) a calcite-loader{--calcite-internal-button-text-color: var(--calcite-color-text-inverse)}:host([scale=s]) button.content--slotted,:host([scale=s]) a.content--slotted{font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=s][appearance=transparent]) button.content--slotted,:host([scale=s][appearance=transparent]) a.content--slotted{--calcite-internal-button-padding-x: .5rem}:host([scale=s]) button,:host([scale=s]) a{--calcite-internal-button-padding-y: 3px}:host([scale=m]) button.content--slotted,:host([scale=m]) a.content--slotted{--calcite-internal-button-padding-x: 11px;font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=m]) button,:host([scale=m]) a{--calcite-internal-button-padding-y: 7px}:host([scale=m][appearance=transparent]) button.content--slotted,:host([scale=m][appearance=transparent]) a.content--slotted{--calcite-internal-button-padding-x: .75rem}:host([scale=l]) button.content--slotted,:host([scale=l]) a.content--slotted{--calcite-internal-button-padding-x: 15px;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l]) .button-padding{--calcite-internal-button-padding-x: 1rem;--calcite-internal-button-padding-y: 11px}:host([scale=l]) .button-padding--shrunk{--calcite-internal-button-padding-y: 9px}:host([scale=s]) button:not(.content--slotted),:host([scale=s]) a:not(.content--slotted){--calcite-internal-button-padding-x: .125rem;--calcite-internal-button-padding-y: 3px;inline-size:1.5rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;min-block-size:1.5rem}:host([scale=m]) button:not(.content--slotted),:host([scale=m]) a:not(.content--slotted){--calcite-internal-button-padding-x: .125rem;--calcite-internal-button-padding-y: 7px;inline-size:2rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;min-block-size:2rem}:host([scale=l]) button:not(.content--slotted),:host([scale=l]) a:not(.content--slotted){--calcite-internal-button-padding-x: .125rem;--calcite-internal-button-padding-y: 9px;inline-size:2.75rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;min-block-size:2.75rem}:host(:is([scale=s],[scale=m],[scale=l])[width=full]) a:not(.content--slotted),:host(:is([scale=s],[scale=m],[scale=l])[width=full]) button:not(.content--slotted){inline-size:var(--calcite-container-size-content-fluid)}:host([scale=l][appearance=transparent]) button:not(.content--slotted),:host([scale=l][appearance=transparent]) a:not(.content--slotted){--calcite-internal-button-padding-y: .625rem}:host([scale=s][icon-start][icon-end]) button:not(.content--slotted),:host([scale=s][icon-start][icon-end]) a:not(.content--slotted){--calcite-internal-button-padding-x: 23px;block-size:1.5rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=s][icon-start][icon-end][appearance=transparent]) button:not(.content--slotted),:host([scale=s][icon-start][icon-end][appearance=transparent]) a:not(.content--slotted){--calcite-internal-button-padding-x: 1.5rem}:host([scale=m][icon-start][icon-end]) button:not(.content--slotted),:host([scale=m][icon-start][icon-end]) a:not(.content--slotted){--calcite-internal-button-padding-x: 2rem;block-size:2rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=m][icon-start][icon-end][appearance=transparent]) button:not(.content--slotted),:host([scale=m][icon-start][icon-end][appearance=transparent]) a:not(.content--slotted){--calcite-internal-button-padding-x: 33px}:host([scale=l][icon-start][icon-end]) button:not(.content--slotted),:host([scale=l][icon-start][icon-end]) a:not(.content--slotted){--calcite-internal-button-padding-x: 43px;block-size:2.75rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l][icon-start][icon-end]) button:not(.content--slotted) .icon--start+.icon--end,:host([scale=l][icon-start][icon-end]) a:not(.content--slotted) .icon--start+.icon--end{margin-inline-start:1rem}:host([scale=l][icon-start][icon-end][appearance=transparent]) button:not(.content--slotted),:host([scale=l][icon-start][icon-end][appearance=transparent]) a:not(.content--slotted){--calcite-internal-button-padding-x: 2.75rem}:host([hidden]){display:none}[hidden]{display:none}`,LN=class LN extends dt{constructor(){super(...arguments),this.attributeWatch=Rhe(["aria-expanded"],this.handleGlobalAttributesChanged),this.contentRef=vi(),this.mutationObserver=Gn("mutation",()=>this.updateHasContent()),this.resizeObserver=Gn("resize",()=>this.setTooltipText()),this.focusSetter=dn()(this),this.messages=un(),this.hasContent=!1,this.alignment="center",this.appearance="solid",this.disabled=!1,this.download=!1,this.kind="brand",this.loading=!1,this.round=!1,this.scale="m",this.splitChild=!1,this.type="button",this.width="auto"}async setFocus(e){return this.focusSetter(()=>this.childEl,e)}connectedCallback(){super.connectedCallback(),this.setupTextContentObserver(),nI(this),this.formEl=jJ(this)}async load(){this.updateHasContent()}updated(){Vs(this)}loaded(){this.setTooltipText()}disconnectedCallback(){var e,i;super.disconnectedCallback(),(e=this.mutationObserver)==null||e.disconnect(),W5(this),(i=this.resizeObserver)==null||i.disconnect(),this.formEl=null}handleGlobalAttributesChanged(){this.requestUpdate()}updateHasContent(){this.hasContent=VEe(this.el)}setupTextContentObserver(){var e;(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0,subtree:!0})}onLabelClick(){this.handleClick(),this.setFocus()}handleClick(){const{type:e}=this;this.href||(e==="submit"?NJ(this):e==="reset"&&USe(this))}setTooltipText(){const{contentRef:{value:e}}=this;e&&(this.tooltipText=e.offsetWidth<e.scrollWidth&&this.el.innerText||null)}setChildEl(e){lE(this.resizeObserver,this.childEl,e),this.childEl=e}render(){const e=this.href?"a":"button",i=this.href?Zw`a`:Zw`button`,r=this.loading?q`<div class=${H(Jl.buttonLoader)}><calcite-loader class=${H(this.loading?Jl.loadingIn:Jl.loadingOut)} inline .label=${this.messages.loading} .scale=${this.scale==="l"?"m":"s"}></calcite-loader></div>`:null,n=!this.iconStart&&!this.iconEnd,s=q`<calcite-icon class=${H({[Jl.icon]:!0,[Jl.iconStart]:!0})} .flipRtl=${this.iconFlipRtl==="start"||this.iconFlipRtl==="both"} .icon=${this.iconStart} .scale=${gr(this.scale)}></calcite-icon>`,a=q`<calcite-icon class=${H({[Jl.icon]:!0,[Jl.iconEnd]:!0})} .flipRtl=${this.iconFlipRtl==="end"||this.iconFlipRtl==="both"} .icon=${this.iconEnd} .scale=${gr(this.scale)}></calcite-icon>`,o=q`<span class=${H(Jl.content)} ${gt(this.contentRef)}><slot></slot></span>`;return Us({disabled:this.disabled,children:xk`<${i} .ariaBusy=${this.loading} .ariaExpanded=${this.el.ariaExpanded?this.el.ariaExpanded:null} .ariaLabel=${this.loading?this.messages.loading:ZE(this)} aria-live=polite class=${H({[Jl.buttonPadding]:n,[Jl.buttonPaddingShrunk]:!n,[Jl.contentSlotted]:this.hasContent,[Jl.iconStartEmpty]:!this.iconStart,[Jl.iconEndEmpty]:!this.iconEnd})} .disabled=${e==="button"?this.disabled:null} download=${(e==="a"?this.download===!0||this.download===""?"":this.download||null:null)??Xe} href=${(e==="a"&&this.href)??Xe} name=${(e==="button"&&this.name)??Xe} @click=${this.handleClick} rel=${(e==="a"&&this.rel)??Xe} tabindex=${(this.disabled?-1:null)??Xe} target=${(e==="a"&&this.target)??Xe} title=${this.tooltipText??Xe} type=${(e==="button"?this.type:null)??Xe} ${gt(this.setChildEl)}>${r}${this.iconStart?s:null}${this.hasContent?o:null}${this.iconEnd?a:null}</${i}>`})}};LN.properties={hasContent:[16,{},{state:!0}],tooltipText:[16,{},{state:!0}],alignment:[3,{},{reflect:!0}],appearance:[3,{},{reflect:!0}],disabled:[7,{},{reflect:!0,type:Boolean}],download:[3,{converter:Hm},{reflect:!0}],form:[3,{},{reflect:!0}],href:[3,{},{reflect:!0}],iconEnd:[3,{},{reflect:!0}],iconFlipRtl:[3,{},{reflect:!0}],iconStart:[3,{},{reflect:!0}],kind:[3,{},{reflect:!0}],label:1,loading:[7,{},{reflect:!0,type:Boolean}],messageOverrides:[0,{},{attribute:!1}],name:[3,{},{reflect:!0}],rel:[3,{},{reflect:!0}],round:[7,{},{reflect:!0,type:Boolean}],scale:[3,{},{reflect:!0}],splitChild:[3,{},{reflect:!0}],target:[3,{},{reflect:!0}],type:[3,{},{reflect:!0}],width:[3,{},{reflect:!0}]},LN.styles=Nyt;let Gz=LN;ci("calcite-button",Gz);const K5=Object.freeze(Object.defineProperty({__proto__:null,Button:Gz},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Dyt="24px",jyt="32px",Vyt="44px";/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Zue={chevronRight:"chevron-right",chevronLeft:"chevron-left"},fh={container:"container",containerHasEndTabTitleOverflow:"container--end-overflow",containerHasStartTabTitleOverflow:"container--start-overflow",scrollButton:"scroll-button",scrollButtonContainer:"scroll-button-container",scrollBackwardContainerButton:"scroll-button-container--backward",scrollForwardContainerButton:"scroll-button-container--forward",tabTitleSlotWrapper:"tab-titles-slot-wrapper",scale:t=>`scale-${t}`,position:t=>`position-${t}`},Uyt=ct`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{--calcite-internal-tab-nav-gradient-start-side: left;--calcite-internal-tab-nav-gradient-end-side: right;position:relative;display:flex}:host([bordered]):not([selected]) .container{background-color:var(--calcite-tab-background-color, var(--calcite-color-foreground-1))}:host([bordered]) calcite-button{--calcite-button-border-color: var(--calcite-tab-border-color, var(--calcite-color-border-1))}.scale-s{--calcite-internal-tab-nav-button-width: 24px;min-block-size:1.5rem}.scale-m{--calcite-internal-tab-nav-button-width: 32px;min-block-size:2rem}.scale-l{--calcite-internal-tab-nav-button-width: 44px;min-block-size:2.75rem}.calcite--rtl{--calcite-internal-tab-nav-gradient-start-side: right;--calcite-internal-tab-nav-gradient-end-side: left}.container--start-overflow .tab-titles-slot-wrapper{mask-image:linear-gradient(to var(--calcite-internal-tab-nav-gradient-end-side),transparent,transparent var(--calcite-internal-tab-nav-button-width),white var(--calcite-internal-tab-nav-button-width),white 51%)}.container--end-overflow .tab-titles-slot-wrapper{mask-image:linear-gradient(to var(--calcite-internal-tab-nav-gradient-start-side),transparent,transparent var(--calcite-internal-tab-nav-button-width),white var(--calcite-internal-tab-nav-button-width),white 51%)}.container--start-overflow.container--end-overflow .tab-titles-slot-wrapper{mask-image:linear-gradient(to var(--calcite-internal-tab-nav-gradient-end-side),transparent,transparent var(--calcite-internal-tab-nav-button-width),white var(--calcite-internal-tab-nav-button-width),white 51%,transparent 51%),linear-gradient(to var(--calcite-internal-tab-nav-gradient-start-side),transparent,transparent var(--calcite-internal-tab-nav-button-width),white var(--calcite-internal-tab-nav-button-width),white 51%,transparent 51%)}.container::-webkit-scrollbar{display:none;-ms-overflow-style:none;scrollbar-width:none}:host([layout=center]) ::slotted(calcite-tab-title){display:flex;flex-grow:1;flex-shrink:0;min-inline-size:auto;white-space:nowrap}:host([layout=center]) ::slotted(calcite-tab-title[selected]){overflow:unset}:host(:not([bordered])) .scale-l{--calcite-internal-tab-nav-gap: var(--calcite-spacing-xxl)}:host(:not([bordered])) .scale-m{--calcite-internal-tab-nav-gap: var(--calcite-spacing-xl)}:host(:not([bordered])) .scale-s{--calcite-internal-tab-nav-gap: var(--calcite-spacing-lg)}:host(:not([bordered])) .tab-titles-slot-wrapper{gap:var(--calcite-internal-tab-nav-gap)}:host([layout=center]:not([bordered])) .tab-titles-slot-wrapper{padding-inline:var(--calcite-spacing-xl)}.container,.tab-titles-slot-wrapper{display:flex;inline-size:100%;justify-content:flex-start;overflow:hidden;white-space:nowrap}.scroll-button-container{position:absolute;inset-block:0px}.scroll-button-container calcite-button{--calcite-button-text-color: var(--calcite-tab-text-color, var(--calcite-color-text-3));--calcite-button-background-color: var(--calcite-color-transparent);--calcite-offset-invert-focus: 1;block-size:var(--calcite-container-size-content-fluid)}.scroll-button-container calcite-button:hover .scroll-button-container calcite-button:focus{--calcite-button-background-color: var(--calcite-color-transparent-hover)}.scroll-button-container calcite-button:active{--calcite-button-background-color: var(--calcite-color-transparent-press)}.scroll-button-container--forward{inset-inline-end:0;z-index:var(--calcite-z-index)}.scroll-button-container--backward{inset-inline-start:0;z-index:var(--calcite-z-index)}:host(:not([bordered])) .scroll-button-container--backward:before,:host(:not([bordered])) .scroll-button-container--forward:before{background-color:var(--calcite-tab-border-color, var(--calcite-color-border-1));opacity:.5;content:"";inline-size:var(--calcite-border-width-sm);inset-block-start:var(--calcite-border-width-md);inset-block-end:var(--calcite-border-width-md);position:absolute}:host(:not([bordered])) .scroll-button-container--backward:before{inset-inline-end:0}:host(:not([bordered])) .scroll-button-container--forward:before{inset-inline-start:0}:host([hidden]){display:none}[hidden]{display:none}`,FN=class FN extends dt{constructor(){super(),this.effectiveDir="ltr",this.lastScrollWheelAxis="x",this.resizeObserver=Gn("resize",()=>{this.updateScrollingState()}),this.makeFirstVisibleTabClosable=!1,this.messages=un(),this.hasOverflowingEndTabTitle=!1,this.hasOverflowingStartTabTitle=!1,this.bordered=!1,this.layout="inline",this.position="bottom",this.scale="m",this.selectedTitle=null,this.calciteInternalTabChange=Re({cancelable:!1}),this.calciteInternalTabNavSlotChange=Re(),this.calciteTabChange=Re({cancelable:!1}),this.listen("calciteInternalTabsFocusPrevious",this.focusPreviousTabHandler),this.listen("calciteInternalTabsFocusNext",this.focusNextTabHandler),this.listen("calciteInternalTabsFocusFirst",this.focusFirstTabHandler),this.listen("calciteInternalTabsFocusLast",this.focusLastTabHandler),this.listen("calciteInternalTabsActivate",this.internalActivateTabHandler),this.listen("calciteInternalTabsClose",this.internalCloseTabHandler),this.listen("calciteInternalTabTitleRegister",this.updateTabTitles),this.listenOn(document.body,"calciteInternalTabChange",this.globalInternalTabChangeHandler)}connectedCallback(){var e;super.connectedCallback(),this.parentTabsEl=this.el.closest("calcite-tabs"),(e=this.resizeObserver)==null||e.observe(this.el)}async load(){const e=`calcite-tab-nav-${this.storageId}`;if(localStorage&&this.storageId&&localStorage.getItem(e)){const i=JSON.parse(localStorage.getItem(e));this.selectedTabId=i}}willUpdate(e){e.has("selectedTitle")&&(this.hasUpdated||this.selectedTitle!==null)&&this.calciteInternalTabChange.emit({tab:this.selectedTabId}),e.has("selectedTabId")&&this.selectedTabIdChanged();const{parentTabsEl:i}=this;this.layout=i==null?void 0:i.layout,this.bordered=i==null?void 0:i.bordered,this.effectiveDir=Uo(this.el)}loaded(){this.scrollTabTitleIntoView(this.selectedTitle,"instant"),this.tabTitles.length&&this.tabTitles.every(e=>!e.selected)&&!this.selectedTabId&&this.tabTitles[0].getTabIdentifier().then(e=>{this.calciteInternalTabChange.emit({tab:e})})}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this.resizeObserver)==null||e.disconnect()}get enabledTabTitles(){return Ste(this.el,"calcite-tab-title:not([disabled])").filter(e=>!e.closed)}get scrollerButtonWidth(){const{scale:e}=this;return parseInt(e==="s"?Dyt:e==="m"?jyt:Vyt)}get tabTitles(){return Ste(this.el,"calcite-tab-title")}focusPreviousTabHandler(e){this.handleTabFocus(e,e.target,"previous")}focusNextTabHandler(e){this.handleTabFocus(e,e.target,"next")}focusFirstTabHandler(e){this.handleTabFocus(e,e.target,"first")}focusLastTabHandler(e){this.handleTabFocus(e,e.target,"last")}internalActivateTabHandler(e){const i=e.target,r=this.selectedTitle;this.selectedTabId=e.detail.tab?e.detail.tab:this.getIndexOfTabTitle(i),e.stopPropagation(),this.selectedTitle=i,(r==null?void 0:r.id)!==i.id&&e.detail.userTriggered&&this.calciteTabChange.emit(),this.scrollTabTitleIntoView(i)}scrollTabTitleIntoView(e,i="smooth"){e&&requestAnimationFrame(()=>{const r=this.effectiveDir==="ltr",n=this.tabTitleContainerEl,s=n.getBoundingClientRect(),a=e.getBoundingClientRect(),o=n.scrollLeft,l=r?this.hasOverflowingStartTabTitle:this.hasOverflowingEndTabTitle,c=r?this.hasOverflowingEndTabTitle:this.hasOverflowingStartTabTitle;if(a.left<s.left+(l?this.scrollerButtonWidth:0)){const h=o+(a.left-s.left)-this.scrollerButtonWidth;n.scrollTo({left:h,behavior:i})}else if(a.right>s.right-(c?this.scrollerButtonWidth:0)){const h=o+(a.right-s.right)+this.scrollerButtonWidth;n.scrollTo({left:h,behavior:i})}})}internalCloseTabHandler(e){const i=e.target;this.handleTabTitleClose(i),e.stopPropagation()}async updateTabTitles(e){e.target.selected&&(this.selectedTabId=e.detail,this.selectedTitle=await this.getTabTitleById(this.selectedTabId))}globalInternalTabChangeHandler(e){this.syncId&&e.target!==this.el&&e.target.syncId===this.syncId&&this.selectedTabId!==e.detail.tab&&(this.selectedTabId=e.detail.tab),e.stopPropagation()}async selectedTabIdChanged(){await this.componentOnReady(),localStorage&&this.storageId&&this.selectedTabId!==void 0&&this.selectedTabId!==null&&localStorage.setItem(`calcite-tab-nav-${this.storageId}`,JSON.stringify(this.selectedTabId)),this.calciteInternalTabChange.emit({tab:this.selectedTabId})}onTabTitleWheel(e){e.preventDefault();const{deltaX:i,deltaY:r}=e,n=Math.abs(i),s=Math.abs(r);let a;n===s?a=this.lastScrollWheelAxis==="x"?i:r:n>s?(a=i,this.lastScrollWheelAxis="x"):(a=r,this.lastScrollWheelAxis="y");const o=(this.effectiveDir==="rtl"?-1:1)*a;e.currentTarget.scrollBy(o,0)}onSlotChange(){var n;(n=this.intersectionObserver)==null||n.disconnect();const e=this.tabTitles;e.forEach(s=>{var a;(a=this.intersectionObserver)==null||a.observe(s)});const i=this.getVisibleTabTitlesIndices(e);i.length>1&&this.makeFirstVisibleTabClosable&&(e[i[0]].closable=!0,this.makeFirstVisibleTabClosable=!1),this.calciteInternalTabNavSlotChange.emit(e)}storeTabTitleWrapperRef(e){e&&(this.tabTitleContainerEl=e,this.intersectionObserver=Gn("intersection",()=>this.updateScrollingState(),{root:e,threshold:[0,.5,1]}))}updateScrollingState(){const e=this.tabTitleContainerEl;if(!e)return;let i,r;const n=e.scrollLeft,s=e.clientWidth,a=e.scrollWidth;this.effectiveDir==="ltr"?(i=n>0,r=n+s<a):(i=n<0,r=n!==-(a-s)),this.hasOverflowingStartTabTitle=i,this.hasOverflowingEndTabTitle=r}scrollToTabTitles(e){requestAnimationFrame(()=>{const i=this.tabTitleContainerEl,r=i.getBoundingClientRect(),n=Array.from(this.el.querySelectorAll("calcite-tab-title")),{effectiveDir:s}=this;e==="forward"&&n.reverse();let a=null;if(n.forEach(o=>{const l=o.getBoundingClientRect(),c=r.x+r.width,h=l.x+l.width;e==="forward"&&s==="ltr"||e==="backward"&&s==="rtl"?(l.x>c||h>c&&l.x>r.x)&&(a=o):(h<r.x||h<c&&l.x<r.x)&&(a=o)}),a){const{scrollerButtonWidth:o}=this,l=e==="forward"&&s==="ltr"||e==="backward"&&s==="rtl"?-o:a.offsetWidth-i.clientWidth+o,c=a.offsetLeft+l;i.scrollTo({left:c,behavior:"smooth"})}})}scrollToNextTabTitles(){this.scrollToTabTitles("forward")}scrollToPreviousTabTitles(){this.scrollToTabTitles("backward")}handleTabFocus(e,i,r){const n=Pm(this.enabledTabTitles,i,r);this.scrollTabTitleIntoView(n,"instant"),e.stopPropagation()}getIndexOfTabTitle(e,i=this.tabTitles){return i.indexOf(e)}onTabTitleScroll(){this.updateScrollingState()}async getTabTitleById(e){return Promise.all(this.tabTitles.map(i=>i.getTabIdentifier())).then(i=>this.tabTitles[i.indexOf(e)])}getVisibleTabTitlesIndices(e){return e.reduce((i,r,n)=>r.closed?i:[...i,n],[])}handleTabTitleClose(e){const{tabTitles:i}=this,r=e.selected,n=this.getVisibleTabTitlesIndices(i),s=n.length;if(s===1&&i[n[0]].closable)this.makeFirstVisibleTabClosable=!0,i[n[0]].closable=!1,this.selectedTabId=n[0],r&&i[n[0]].activateTab();else if(s>1){const a=i.findIndex(l=>l===e),o=n.find(l=>l>a);this.selectedTabId===a&&(this.selectedTabId=o||s-1,i[this.selectedTabId].activateTab())}requestAnimationFrame(()=>{i[this.selectedTabId].focus()})}render(){return this.el.role="tablist",q`<div class=${H({[fh.container]:!0,[fh.containerHasStartTabTitleOverflow]:!!this.hasOverflowingStartTabTitle,[fh.containerHasEndTabTitleOverflow]:!!this.hasOverflowingEndTabTitle,[fh.scale(this.scale)]:!0,[fh.position(this.position)]:!0,[Uh.rtl]:this.effectiveDir==="rtl"})}>${this.renderScrollButton("start")}<div class=${H({[fh.tabTitleSlotWrapper]:!0})} @scroll=${this.onTabTitleScroll} @wheel=${this.onTabTitleWheel} ${gt(this.storeTabTitleWrapperRef)}><slot @slotchange=${this.onSlotChange}></slot></div>${this.renderScrollButton("end")}</div>`}renderScrollButton(e){const{bordered:i,messages:r,hasOverflowingStartTabTitle:n,hasOverflowingEndTabTitle:s,scale:a}=this,o=e==="end";return nt(e,q`<div class=${H({[fh.scrollButtonContainer]:!0,[fh.scrollBackwardContainerButton]:!o,[fh.scrollForwardContainerButton]:o})} .hidden=${o&&!s||!o&&!n}><calcite-button .appearance=${i?"outline-fill":"transparent"} .ariaLabel=${o?r.nextTabTitles:r.previousTabTitles} class=${H({[fh.scrollButton]:!0})} icon-flip-rtl=both .iconStart=${o?Zue.chevronRight:Zue.chevronLeft} kind=neutral @click=${o?this.scrollToNextTabTitles:this.scrollToPreviousTabTitles} .scale=${a} tabindex=-1></calcite-button></div>`)}};FN.properties={hasOverflowingEndTabTitle:[16,{},{state:!0}],hasOverflowingStartTabTitle:[16,{},{state:!0}],selectedTabId:[16,{},{state:!0}],bordered:[7,{},{reflect:!0,type:Boolean}],layout:[3,{},{reflect:!0}],messageOverrides:[0,{},{attribute:!1}],position:1,scale:1,selectedTitle:[0,{},{attribute:!1}],storageId:[3,{},{reflect:!0}],syncId:[3,{},{reflect:!0}]},FN.styles=Uyt;let jG=FN;ci("calcite-tab-nav",jG);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Byt={section:"section"},qyt={titleGroup:"title-group"},Hyt=ct`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{display:flex;flex-direction:column}:host([bordered]){box-shadow:inset 0 1px 0 var(--calcite-tab-border-color, var(--calcite-color-border-1));background-color:var(--calcite-tab-background-color, var(--calcite-color-foreground-1))}:host([bordered]) section{border-color:var(--calcite-tab-border-color, var(--calcite-color-border-1));border-style:solid}section{display:flex;flex-grow:1;overflow:hidden;border-width:1px;border-block-start-style:solid;border-block-start-color:var(--calcite-tab-border-color, var(--calcite-color-border-1))}:host([bordered][position=bottom]){box-shadow:inset 0 1px 0 var(--calcite-tab-border-color, var(--calcite-color-border-1)),inset 0 -1px 0 var(--calcite-tab-border-color, var(--calcite-color-border-1))}:host([bordered]:not([position=bottom])) ::slotted(calcite-tab-nav){margin-block-end:-1px}:host([position=bottom]){flex-direction:column-reverse}:host([position=bottom]) section{flex-direction:column-reverse;border-block-start-width:0px;border-block-end-width:1px}:host([bordered][scale=s]) section{padding:.75rem}:host([bordered][scale=m]) section{padding:.5rem}:host([bordered][scale=l]) section{padding:1rem}:host([position=bottom]:not([bordered])) section{border-block-end-style:solid;border-block-end-color:var(--calcite-tab-border-color, var(--calcite-color-border-1))}@media (forced-colors: active){:host([bordered]) section{border-block-start-width:0px;border-block-end-width:1px}:host([position=bottom][bordered]) section{border-block-start-width:1px;border-block-end-width:0px}}:host([hidden]){display:none}[hidden]{display:none}`,RN=class RN extends dt{constructor(){super(),this.slotRef=vi(),this.tabs=[],this.titles=[],this.bordered=!1,this.layout="inline",this.position="top",this.scale="m",this.listen("calciteInternalTabNavSlotChange",this.calciteInternalTabNavSlotChangeHandler)}connectedCallback(){super.connectedCallback(),this.updateItems()}load(){this.updateItems()}willUpdate(e){var i,r;(e.has("position")&&(this.hasUpdated||this.position!=="top")||e.has("scale")&&(this.hasUpdated||this.scale!=="m"))&&this.updateItems(),(e.has("titles")||e.has("tabs"))&&this.hasUpdated&&((i=this.titles)==null?void 0:i.length)>0&&((r=this.tabs)==null?void 0:r.length)>0&&(this.updateAriaSettings(),this.updateItems())}calciteInternalTabNavSlotChangeHandler(e){e.stopPropagation(),e.detail.length!==this.titles.length&&(this.titles=e.detail)}defaultSlotChangeHandler(e){this.tabs=fu(e,"calcite-tab")}async updateAriaSettings(){if(await this.componentOnReady(),!this.slotRef.value)return;let e,i;const r=vhe(this.slotRef.value,"calcite-tab");if(r.some(n=>n.tab)||this.titles.some(n=>n.tab))e=r.sort((n,s)=>n.tab.localeCompare(s.tab)).map(n=>n.id),i=this.titles.sort((n,s)=>n.tab.localeCompare(s.tab)).map(n=>n.id);else{const n=await Promise.all(r.map(a=>a.getTabIndex())),s=await Promise.all(this.titles.map(a=>a.getTabIndex()));e=n.reduce((a,o,l)=>(a[o]=r[l].id,a),[]),i=s.reduce((a,o,l)=>(a[o]=this.titles[l].id,a),[])}r.forEach(n=>n._updateAriaInfo(e,i)),this.titles.forEach(n=>n._updateAriaInfo(e,i))}updateItems(){const{position:e,scale:i}=this,r=this.el.querySelector("calcite-tab-nav");r&&(r.position=e,r.scale=i),Array.from(this.el.querySelectorAll("calcite-tab")).forEach(n=>{n.parentElement===this.el&&(n.scale=i)}),Array.from(this.el.querySelectorAll("calcite-tab-nav > calcite-tab-title")).forEach(n=>{n.position=e,n.scale=i})}render(){return q`<slot name=${qyt.titleGroup}></slot><section class=${H(Byt.section)}><slot @slotchange=${this.defaultSlotChangeHandler} ${gt(this.slotRef)}></slot></section>`}};RN.properties={tabs:[16,{},{state:!0}],titles:[16,{},{state:!0}],bordered:[5,{},{type:Boolean}],layout:[3,{},{reflect:!0}],position:[3,{},{reflect:!0}],scale:[3,{},{reflect:!0}]},RN.styles=Hyt;let VG=RN;ci("calcite-tabs",VG);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Yue={button:"x-button",buttonRound:"x-button--round"},Gyt=({disabled:t,focusable:e,key:i,label:r,onClick:n,ref:s,round:a=!0,scale:o,title:l})=>nt(i,q`<button .ariaLabel=${r} class=${H({[(c=>`x-button--${c}`)(o)]:!0,[Yue.button]:!0,[Yue.buttonRound]:a})} .disabled=${t} @click=${n} .tabIndex=${0} title=${l??Xe} type=button ${gt(s)}><calcite-icon icon=x .scale=${gr(o)}></calcite-icon></button>`);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const ed={container:"container",containerBottom:"container--bottom",content:"content",contentHasText:"content--has-text",iconEnd:"icon-end",iconPresent:"icon-present",iconStart:"icon-start",titleIcon:"calcite-tab-title--icon",scale:t=>`scale-${t}`,selectedIndicator:"selected-indicator"},Wyt="calcite-tab-title",Zyt={host:t=>`${Wyt}-${t}`},Yyt=ct`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:block;outline:2px solid transparent;outline-offset:2px;margin-inline-start:0px}:host([layout=inline]){flex:0 1 auto}:host([layout=center]){flex:1 1 auto}.content{position:relative;margin-block-end:.125rem;box-sizing:border-box;display:flex;block-size:100%;align-items:center;justify-content:center}.scale-s .content{padding-block:.25rem;font-size:var(--calcite-font-size--2);line-height:1rem}.scale-s .x-button{inline-size:1.25rem}.scale-m .content{padding-block:.5rem;font-size:var(--calcite-font-size--1);line-height:1rem}.scale-m .x-button{inline-size:1.75rem}.scale-l .content{padding-block:.625rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}.scale-l .x-button{inline-size:2rem}:host([closable]) .content{border-block-end-color:transparent}:host([layout=inline]) .content,:host([layout=center]) .content{padding-inline:.25rem}:host([layout=center]) .scale-s,:host([layout=center]) .scale-m,:host([layout=center]) .scale-l{margin-block:0px;justify-content:center;text-align:center}:host([layout=center]) .scale-s .content,:host([layout=center]) .scale-m .content,:host([layout=center]) .scale-l .content{flex:1 1 auto;flex-grow:1}.container{position:relative;box-sizing:border-box;display:flex;block-size:100%;inline-size:100%;cursor:pointer;align-content:center;justify-content:space-between;padding-inline:0px;font-size:var(--calcite-font-size--1);line-height:1rem;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;outline-color:transparent;color:var(--calcite-tab-text-color, var(--calcite-color-text-3));background-color:var(--calcite-tab-background-color, transparent)}.selected-indicator{position:absolute;display:block;block-size:.125rem;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;inset-block-end:0;inset-inline-start:0;inset-inline-end:0;inline-size:100%}:host([bordered][selected]) .container:after{position:absolute;display:block;block-size:.125rem;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;inset-block-end:-1px;inset-inline-start:0;inset-inline-end:0;inline-size:100%;content:""}:host([bordered][selected]) .container.container--bottom:after{inset-block-start:-1px}:host([bordered][selected]:focus) .container:after{background:transparent}.container--bottom .selected-indicator{inset-block-end:unset;inset-block-start:0}:host(:not([bordered])) .container:hover,:host(:not([bordered])) .container:active{color:var(--calcite-color-text-1)}:host([bordered]:not([selected]):hover:not(:focus)) .selected-indicator{background-color:var(--calcite-color-foreground-2)}:host([bordered]:not([selected]):hover:not(:focus)) .container:not(.container--bottom) .selected-indicator{box-shadow:inset 0 1px var(--calcite-color-border-1)}:host([bordered]:not([selected]):hover:not(:focus)) .container.container--bottom .selected-indicator{box-shadow:inset 0 -1px var(--calcite-color-border-1)}:host([selected]:focus) .selected-indicator{block-size:4px}.calcite-tab-title--icon{position:relative;margin:0;display:inline-flex;align-self:center}.calcite-tab-title--icon svg{transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out}.content--has-text .icon-start,.content--has-text .calcite-tab-title--icon.icon-start{color:var(--calcite-tab-icon-color-start, var(--calcite-icon-color))}.content--has-text .calcite-tab-title--icon.icon-start .icon-end,.content--has-text .calcite-tab-title--icon.icon-end{color:var(--calcite-tab-icon-color-end, var(--calcite-icon-color))}.content--has-text{padding:.25rem}.content--has-text .calcite-tab-title--icon.icon-start{margin-inline-end:var(--calcite-spacing-sm)}.content--has-text .calcite-tab-title--icon.icon-end{margin-inline-start:var(--calcite-spacing-sm)}.x-button{display:flex;block-size:100%;cursor:pointer;appearance:none;align-content:center;align-items:center;justify-content:center;align-self:center;border-style:none;background-color:transparent;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;outline-color:transparent;margin-inline-start:var(--calcite-spacing-sm);margin-inline-end:var(--calcite-spacing-px);block-size:calc(100% - var(--calcite-spacing-xxs));color:var(--calcite-tab-close-icon-color, var(--calcite-color-text-3));background-color:var(--calcite-tab-close-icon-background-color, var(--calcite-color-transparent))}.x-button:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus)}.x-button:focus,.x-button:hover,.x-button:active{color:var(--calcite-tab-close-icon-color-press, var(--calcite-color-text-1));background-color:var(--calcite-tab-close-icon-background-color-press, var(--calcite-color-foreground-3))}:host([bordered]) .container{border-color:transparent;border-inline-width:var(--calcite-spacing-px);border-inline-style:solid}:host([bordered]) .container:hover,:host([bordered]) .container:active{color:var(--calcite-color-text-1)}:host([bordered]) .container .x-button calcite-icon{margin-block-start:var(--calcite-spacing-px)}:host([bordered]) .container .x-button:focus,:host([bordered]) .container .x-button:hover,:host([bordered]) .container .x-button:active{box-shadow:0 2px 0 0 var(--calcite-tab-close-icon-background-color-press, var(--calcite-color-foreground-3))}:host([bordered]) .container.container--bottom{border-block-start-style:solid;border-block-start-width:1px}:host([bordered]) .container.container--bottom .selected-indicator{inset-block-start:unset;inset-block-end:0}:host([bordered]) .container.container--bottom .x-button{box-shadow:0 -2px 0 0 var(--calcite-tab-close-icon-background-color, var(--calcite-color-transparent))}:host([bordered]) .container.container--bottom .x-button:focus,:host([bordered]) .container.container--bottom .x-button:hover,:host([bordered]) .container.container--bottom .x-button:active{box-shadow:0 -2px 0 0 var(--calcite-tab-close-icon-background-color-press, var(--calcite-color-foreground-3))}:host([bordered]) .container.container--bottom .x-button calcite-icon{margin-block-end:var(--calcite-spacing-px)}:host([bordered]) .container:not(.container--bottom){border-block-end-style:solid;border-block-end-width:1px}:host([bordered]) .container:not(.container--bottom) .x-button{block-size:calc(100% - var(--calcite-spacing-px));margin-block-start:-1px}:host([bordered]) .container .selected-indicator{inset-block-start:0;inset-block-end:unset;inset-inline-start:-1px;inset-inline-end:0;inline-size:calc(100% + var(--calcite-spacing-base))}:host([bordered]) .container:host(:not([selected])) .container .x-button{box-shadow:0 2px 0 0 transparent}:host([bordered]) .container:host(:not([selected])):host(:hover) .container:not(.container--bottom){border-block-end-color:var(--calcite-tab-border-color, var(--calcite-color-border-1))}:host([bordered]) .container:host(:not([selected])):host(:hover):host(:not(:focus)) .selected-indicator{box-shadow:inset 0 var(--calcite-internal-tab-shadow-length) var(--calcite-tab-border-color, var(--calcite-color-border-1))}:host([bordered]) .container:host(:not([selected])):host(:hover):host(:not(:focus)) :not(.container--bottom){--calcite-internal-tab-shadow-length: 1px}:host([bordered]) .container:host(:not([selected])):host(:hover):host(:not(:focus)) .container--bottom{--calcite-internal-tab-shadow-length: -1px}:host([bordered]) .container:hover{background-color:var(--calcite-tab-background-color-hover, var(--calcite-color-foreground-2));border-block-end-color:var(--calcite-color-border-1)}:host(:hover) .selected-indicator{background-color:var(--calcite-color-border-3)}:host([selected]) .selected-indicator,:host([selected]:hover) .selected-indicator,:host(:focus) .selected-indicator,:host(:active) .selected-indicator{background-color:var(--calcite-tab-accent-color-press, var(--calcite-color-brand))}:host([closed]){display:none}:host([selected]) .container{border-color:transparent;color:var(--calcite-tab-text-color, var(--calcite-color-text-1))}:host([selected][bordered]) .container{border-inline-color:var(--calcite-tab-border-color, var(--calcite-color-border-1))}:host([selected][bordered]) .container:after{background-color:var(--calcite-tab-background-color, var(--calcite-color-foreground-1))}:host([selected][bordered]) .container:hover,:host([selected][bordered]) .container:active{background:transparent}:host(:focus) .container{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}:host(:focus) .container:focus-within{outline-color:transparent}:host([icon-start][icon-end]) .calcite-tab-title--icon:first-child{margin-inline-end:var(--calcite-spacing-sm)}:host([layout=inline][bordered]) .scale-m .content,:host([layout=center][bordered]) .scale-m .content{padding-inline:.75rem}:host([layout=inline][bordered]) .scale-s .content,:host([layout=center][bordered]) .scale-s .content{padding-inline:.5rem}:host([layout=inline][bordered]) .scale-l .content,:host([layout=center][bordered]) .scale-l .content{padding-inline:1rem}:host([layout=inline][closable]) .scale-s .content,:host([layout=inline][closable]) .scale-m .content,:host([layout=inline][closable]) .scale-l .content{padding-inline-end:0}@media (forced-colors: active){:host{outline-width:0;outline-offset:0}:host(:focus) .container{outline-color:highlight}:host([bordered][selected]) .container{border-block-end-style:none}:host([bordered][selected]) .container--bottom{border-block-start-style:none}.x-button{z-index:var(--calcite-z-index)}.selected-indicator{background-color:highlight}}:host([hidden]){display:none}[hidden]{display:none}:host([disabled]) .container{pointer-events:none;opacity:.5}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}`,zN=class zN extends dt{constructor(){super(),this.closeButtonRef=vi(),this.guid=Zyt.host(Mc()),this.mutationObserver=Gn("mutation",()=>this.updateHasText()),this.resizeObserver=Gn("resize",()=>{this.calciteInternalTabIconChanged.emit()}),this.messages=un(),this.hasText=!1,this.bordered=!1,this.closable=!1,this.closed=!1,this.disabled=!1,this.position="top",this.scale="m",this.selected=!1,this.calciteInternalTabIconChanged=Re({cancelable:!1}),this.calciteInternalTabTitleRegister=Re({cancelable:!1}),this.calciteInternalTabsActivate=Re({cancelable:!1}),this.calciteInternalTabsClose=Re({cancelable:!1}),this.calciteInternalTabsFocusFirst=Re({cancelable:!1}),this.calciteInternalTabsFocusLast=Re({cancelable:!1}),this.calciteInternalTabsFocusNext=Re({cancelable:!1}),this.calciteInternalTabsFocusPrevious=Re({cancelable:!1}),this.calciteTabsActivate=Re({cancelable:!1}),this.calciteTabsClose=Re({cancelable:!1}),this.listenOn(document.body,"calciteInternalTabChange",this.internalTabChangeHandler),this.listen("click",this.onClick),this.listen("keydown",this.keyDownHandler)}async activateTab(e=!0){if(this.disabled||this.closed)return;const i={tab:this.tab,userTriggered:e};this.calciteInternalTabsActivate.emit(i),e&&requestAnimationFrame(()=>this.calciteTabsActivate.emit())}async getTabIdentifier(){return this.tab?this.tab:this.getTabIndex()}async getTabIndex(){return Array.prototype.indexOf.call(mhe(this.el.parentElement.children).filter(e=>e.matches("calcite-tab-title")),this.el)}_updateAriaInfo(e=[],i=[]){this.controls=e[i.indexOf(this.el.id)]||null}connectedCallback(){super.connectedCallback(),this.setupTextContentObserver(),this.parentTabsEl=this.el.closest("calcite-tabs")}async load(){this.updateHasText(),this.tab&&this.selected&&this.activateTab(!1)}willUpdate(e){e.has("selected")&&(this.hasUpdated||this.selected!==!1)&&this.selectedHandler(),this.parentTabsEl&&(this.layout=this.parentTabsEl.layout,this.bordered=this.parentTabsEl.bordered)}updated(){Vs(this)}async loaded(){this.calciteInternalTabTitleRegister.emit(await this.getTabIdentifier())}disconnectedCallback(){var e,i,r;super.disconnectedCallback(),(e=this.mutationObserver)==null||e.disconnect(),(i=document.body)==null||i.dispatchEvent(new CustomEvent("calciteTabTitleUnregister",{detail:this.el})),(r=this.resizeObserver)==null||r.disconnect()}selectedHandler(){this.selected&&this.activateTab(!1)}internalTabChangeHandler(e){e.composedPath().find(r=>r.tagName==="CALCITE-TABS")===this.parentTabsEl&&(this.tab?this.selected=this.tab===e.detail.tab:this.getTabIndex().then(r=>{this.selected=r===e.detail.tab}),e.stopPropagation())}onClick(){this.activateTab()}keyDownHandler(e){switch(e.key){case" ":case"Enter":e.composedPath().includes(this.closeButtonRef.value)||(this.activateTab(),e.preventDefault());break;case"ArrowRight":e.preventDefault(),Uo(this.el)==="ltr"?this.calciteInternalTabsFocusNext.emit():this.calciteInternalTabsFocusPrevious.emit();break;case"ArrowLeft":e.preventDefault(),Uo(this.el)==="ltr"?this.calciteInternalTabsFocusPrevious.emit():this.calciteInternalTabsFocusNext.emit();break;case"Home":e.preventDefault(),this.calciteInternalTabsFocusFirst.emit();break;case"End":e.preventDefault(),this.calciteInternalTabsFocusLast.emit();break}}closeClickHandler(){this.closeTabTitleAndNotify()}updateHasText(){this.hasText=this.el.textContent.trim().length>0}setContainerRef(e){lE(this.resizeObserver,this.containerEl,e),this.containerEl=e}setupTextContentObserver(){var e;(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0,subtree:!0})}closeTabTitleAndNotify(){this.closed=!0,this.calciteInternalTabsClose.emit({tab:this.tab}),this.calciteTabsClose.emit()}render(){const{el:e,closed:i}=this,r=e.id||this.guid,n=q`<calcite-icon class=${H({[ed.titleIcon]:!0,[ed.iconStart]:!0})} .flipRtl=${this.iconFlipRtl==="start"||this.iconFlipRtl==="both"} .icon=${this.iconStart} .scale=${gr(this.scale)}></calcite-icon>`,s=q`<calcite-icon class=${H({[ed.titleIcon]:!0,[ed.iconEnd]:!0})} .flipRtl=${this.iconFlipRtl==="end"||this.iconFlipRtl==="both"} .icon=${this.iconEnd} .scale=${gr(this.scale)}></calcite-icon>`;return wu(this.el,"aria-controls",this.controls),this.el.ariaSelected=yk(this.selected),wu(this.el,"id",r),this.el.role="tab",wu(this.el,"tabIndex",this.selected&&!this.disabled?0:-1),Us({disabled:this.disabled,children:q`<div class=${H({[ed.container]:!0,[ed.containerBottom]:this.position==="bottom",[ed.iconPresent]:!!this.iconStart||!!this.iconEnd,[ed.scale(this.scale)]:!0})} .hidden=${i} ${gt(this.setContainerRef)}><div class=${H({[ed.content]:!0,[ed.contentHasText]:this.hasText})}>${this.iconStart?n:null}<slot></slot>${this.iconEnd?s:null}</div>${this.renderCloseButton()}<div class=${H(ed.selectedIndicator)}></div></div>`})}renderCloseButton(){const{closable:e,messages:i}=this;return e?nt("close-button",Gyt({disabled:!1,focusable:!0,label:i.close,onClick:this.closeClickHandler,ref:this.closeButtonRef,round:!1,scale:this.scale,title:i.close})):null}};zN.properties={controls:[16,{},{state:!0}],hasText:[16,{},{state:!0}],bordered:[7,{},{reflect:!0,type:Boolean}],closable:[7,{},{reflect:!0,type:Boolean}],closed:[7,{},{reflect:!0,type:Boolean}],disabled:[7,{},{reflect:!0,type:Boolean}],iconEnd:[3,{},{reflect:!0}],iconFlipRtl:[3,{},{reflect:!0}],iconStart:[3,{},{reflect:!0}],layout:[3,{},{reflect:!0}],messageOverrides:[0,{},{attribute:!1}],position:1,scale:1,selected:[7,{},{reflect:!0,type:Boolean}],tab:[3,{},{reflect:!0}]},zN.styles=Yyt;let UG=zN;ci("calcite-tab-title",UG);let Jyt=class{*[Symbol.iterator](){let e=this.next();for(;e;)yield e,e=this.next()}},Xyt=class extends Jyt{constructor(e){super(),this.m_iGeom=-1,this.m_aGeoms=e?e.slice():[]}next(){if(this.m_iGeom<this.m_aGeoms.length-1){const e=this.m_aGeoms[++this.m_iGeom];return this.m_aGeoms[this.m_iGeom]=null,e}return null}tock(){return!1}getGeometryID(){return this.m_iGeom}getRank(){return 1}},lA;function VIe(){return!!lA&&aZ()}async function Qyt(){if(!VIe()){const[t,e]=await Promise.all([de(()=>import("./ProjectionTransformation-BjICI2__.js").then(i=>i.b5),__vite__mapDeps([241,239,242,243,244])),de(async()=>{const{injectPe:i}=await import("./ProjectionTransformation-BjICI2__.js").then(r=>r.b6);return{injectPe:i}},__vite__mapDeps([241,239,242,243,244])).then(({injectPe:i})=>i),Hfe()]);lA=new t.OperatorProject,e(J3e)}}function Kyt(t,e){return lA.execute(t,e,null)}function evt(t,e){const i=lA.executeMany(new Xyt(t),e,null);return Array.from(i)}function tvt(){return lA.supportsCurves()}let ej,nk,MX,CX,EX,UIe;function kX(){return!!ej&&VIe()}async function BIe(){if(!kX()){const[t,e]=await Promise.all([de(()=>import("./apiConverter-CaBQWwuZ.js"),__vite__mapDeps([245,239,242,241,243,244,246])),de(()=>import("./projectionTransformation-Cy5HcPOT.js"),__vite__mapDeps([320,241,239,242,243,244])),Qyt()]);ej=t.fromGeometry,nk=t.fromSpatialReference,MX=t.getSpatialReference,CX=t.toGeometry,EX=e.createProjectionTransformation,UIe=tvt()}}function qIe(t,e,i){const r=MX(t),n=EX(nk(r),nk(e),i);return CX(Kyt(ej(t),n),e)}function ivt(t,e,i){const r=t.map(ej),n=MX(t),s=EX(nk(n),nk(e),i);return evt(r,s).map(a=>CX(a,e))}const rvt=Object.freeze(Object.defineProperty({__proto__:null,execute:qIe,executeMany:ivt,isLoaded:kX,load:BIe,get supportsCurves(){return UIe}},Symbol.toStringTag,{value:"Module"}));/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.7 */let nvt=class extends fk{constructor(e){super(e),this.exports=void 0}hostLoaded(){this.component.manager.onLifecycle(()=>be(()=>{const{view:e,trackLocation:i,location:r}=this.component;return i&&e&&r?[i,r,e.size,e.type==="3d"?e.camera:e.viewpoint]:null},()=>void this._updateScreenLocation(),{initial:!0}))}async _updateScreenLocation(){{kX()||await BIe();const{location:e,view:i}=this.component,r=i==null?void 0:i.spatialReference,n=r&&e?qIe(e,r):null;this.exports=this.component.trackLocation&&n&&(i!=null&&i.ready)?i.toScreen(n):null}}};const svt=bk(nvt);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.7 */const avt=ct`:host{display:contents}calcite-loader{position:absolute}`;var zw;let ovt=(zw=class extends dt{constructor(){super(...arguments),this.autoDestroyDisabled=!1,this.trackLocation=!1,this.screenLocation=svt(this)}async destroy(){await this.manager.destroy()}_getPositionStyles(){const{screenLocation:e,view:i}=this;if(i==null||e==null)return{};const{padding:r}=i,n=16;return{"--calcite-loader-size":`${n}px`,left:`${e.x-(r.left??0)-n/2}px`,top:`${e.y-(r.top??0)-n/2}px`}}render(){return this.screenLocation?q`<calcite-loader .label=${this.label??""} inline style=${qt(this._getPositionStyles())}></calcite-loader>`:null}},zw.properties={autoDestroyDisabled:5,trackLocation:5,screenLocation:32,label:1,location:0,view:0},zw.styles=avt,zw);yr("arcgis-spinner",ovt);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const H2="calcite-list",Wz="calcite-list-item-group",Rm="calcite-list-item";function BG(t){var i;const e=(i=t.parentElement)==null?void 0:i.closest(Rm);e&&(e.open=!0,BG(e))}function lvt(t){const e=t.assignedElements({flatten:!0}),i=e.filter(s=>s==null?void 0:s.matches(Wz)).map(s=>Array.from(s.querySelectorAll(Rm))).flat(),r=e.filter(s=>s==null?void 0:s.matches(Rm));return{lists:e.filter(s=>s==null?void 0:s.matches(H2)),items:i.concat(r)}}function cvt(t){const e=t.assignedElements({flatten:!0}).filter(r=>r.matches(Rm)),i=e.filter(r=>!r.filterHidden);e.forEach(r=>{const n=i.indexOf(r);r.setPosition=n===-1?void 0:n+1,r.setSize=n===-1?void 0:i.length})}function uvt(t,e=!1){const i=e?"ancestor::calcite-list-item | ancestor::calcite-list-item-group":"ancestor::calcite-list-item";return document.evaluate(i,t,null,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null).snapshotLength}function $3(t){return t.tagName==="CALCITE-LIST-ITEM"}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Li={actionsEnd:"actions-end",actionsStart:"actions-start",description:"description",close:"close",container:"container",containerHover:"container--hover",containerBorder:"container--border",containerBorderSelected:"container--border-selected",containerBorderUnselected:"container--border-unselected",content:"content",contentBottom:"content-bottom",contentContainer:"content-container",contentContainerHasCenterContent:"content-container--has-center-content",contentContainerSelectable:"content-container--selectable",contentContainerUnavailable:"content-container--unavailable",contentContainerWrapper:"content-container-wrapper",contentContainerWrapperBordered:"content-container-wrapper--bordered",contentEnd:"content-end",contentStart:"content-start",customContent:"custom-content",expandedContainer:"expanded-container",dragContainer:"drag-container",gridCell:"grid-cell",icon:"icon",nestedContainer:"nested-container",nestedContainerExpanded:"nested-container--expanded",label:"label",row:"row",selectionContainer:"selection-container",selectionContainerSingle:"selection-container--single",wrapper:"wrapper",wrapperBordered:"wrapper--bordered"},Q1={actionsStart:"actions-start",contentStart:"content-start",content:"content",contentBottom:"content-bottom",contentEnd:"content-end",actionsEnd:"actions-end"},dvt=0,Of={selectedMultiple:"check-square-f",selectedSingle:"circle-inset-large",unselectedMultiple:"square",unselectedSingle:"circle",collapsedLTR:"chevron-right",collapsedRTL:"chevron-left",open:"chevron-down",blank:"blank",close:"x"},Jue="data-test-active";/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const hvt=ct`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex;flex-direction:column}:host([filter-hidden]),:host([closed]){display:none}.wrapper--bordered{border-block-end:1px solid var(--calcite-list-border-color, var(--calcite-color-border-3))}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}.container{box-sizing:border-box;display:flex;flex:1 1 0%;overflow:hidden;background-color:var(--calcite-list-background-color, var(--calcite-color-foreground-1))}.container *{box-sizing:border-box}.container--hover:hover{cursor:pointer;background-color:var(--calcite-list-background-color-hover, var(--calcite-color-foreground-2))}.container:active{background-color:var(--calcite-list-background-color-press, var(--calcite-color-foreground-3))}.container--border{position:relative}.container--border:before{position:absolute;inline-size:var(--calcite-border-width-lg);inset-block:0;inset-inline-start:0;background-color:transparent;content:""}.container--border-selected:before{background-color:var(--calcite-list-selection-border-color, var(--calcite-color-brand))}.container--border-selected:focus{box-shadow:inset var(--calcite-border-width-lg) 0 0 0 var(--calcite-list-selection-border-color, var(--calcite-color-brand))}.nested-container{display:none;flex-direction:column;border-width:0px;border-style:solid;border-color:1px solid var(--calcite-list-border-color, var(--calcite-color-border-3));margin-inline-start:var(--calcite-list-spacing-indent, 1.5rem)}.nested-container--expanded{display:flex}.selection-container{display:flex;padding-block:0px;color:var(--calcite-list-icon-color, var(--calcite-color-border-input))}:host(:not([disabled]):not([selected])) .container:hover .selection-container--single{color:var(--calcite-list-icon-color, var(--calcite-color-border-input))}:host([selected]:hover) .selection-container,:host([selected]:hover) .selection-container--single,:host([selected]) .selection-container{color:var(--calcite-list-icon-color, var(--calcite-color-brand))}.content-container-wrapper{display:flex;flex:1 1 auto}.content-container-wrapper--bordered{border-block-end:1px solid var(--calcite-list-border-color, var(--calcite-color-border-3))}.content-container{display:flex;flex:1 1 auto;-webkit-user-select:none;user-select:none;align-items:stretch;font-weight:var(--calcite-font-weight-normal);color:var(--calcite-list-content-text-color, var(--calcite-color-text-2))}.content-container--unavailable{opacity:var(--calcite-opacity-disabled)}.row,.grid-cell{outline-color:transparent}.row{position:relative}.row:focus,.grid-cell:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.content,.custom-content{display:flex;flex:1 1 auto;flex-direction:column;justify-content:center;line-height:var(--calcite-font-line-height-relative-snug)}.label{color:var(--calcite-list-label-text-color, var(--calcite-color-text-1))}.description{color:var(--calcite-list-description-text-color, var(--calcite-color-text-3))}.icon{align-self:center;color:var(--calcite-list-icon-color, var(--calcite-color-text-3))}.icon:hover,.icon:active{color:var(--calcite-color-text-1)}:host([display-mode=flat][drag-handle]:is([selection-mode=none],[selection-appearance=border])) .drag-container{padding-inline-end:var(--calcite-spacing-xxs)}:host([scale=s]) .actions-start{padding-inline-end:var(--calcite-spacing-sm)}:host([scale=s]) .content-container{gap:var(--calcite-spacing-sm);min-block-size:32px;padding-block:var(--calcite-spacing-xxs);padding-inline-end:var(--calcite-spacing-sm)}:host([scale=s]) .content,:host([scale=s]) .custom-content,:host([scale=s]) .label{font-size:var(--calcite-font-size--2)}:host([scale=s]) .description{font-size:var(--calcite-font-size--3)}:host([scale=s][display-mode=flat]:not([drag-handle])) .container{padding-inline-start:var(--calcite-spacing-sm)}:host([scale=s][display-mode=flat]:not([drag-handle])) .selection-container{padding-inline-end:var(--calcite-spacing-sm)}:host([scale=s][display-mode=flat][drag-handle]) .selection-container{padding-inline:var(--calcite-spacing-xxs) var(--calcite-spacing-sm)}:host([scale=s][display-mode=nested]) .selection-container{padding-inline-end:var(--calcite-spacing-xxs)}:host([scale=s][display-mode=nested][selection-appearance=icon]:not([selection-mode=none]):not([drag-handle])) .container{padding-inline-start:var(--calcite-spacing-sm)}:host([scale=s][display-mode=nested][selection-appearance=icon]:not([selection-mode=none]):not([drag-handle])) .selection-container{padding-inline-end:var(--calcite-spacing-xxs)}:host([scale=s][display-mode=nested][drag-handle]) .selection-container{padding-inline:var(--calcite-spacing-xxs)}:host([scale=m]) .actions-start{padding-inline-end:var(--calcite-spacing-sm)}:host([scale=m]) .content-container{gap:var(--calcite-spacing-sm);min-block-size:40px;padding-block:var(--calcite-spacing-sm);padding-inline-end:var(--calcite-spacing-md)}:host([scale=m]) .content,:host([scale=m]) .custom-content{font-size:var(--calcite-font-size--2)}:host([scale=m]) .label{font-size:var(--calcite-font-size--1)}:host([scale=m]) .description{font-size:var(--calcite-font-size--2)}:host([scale=m][display-mode=flat]) .container{padding-inline-start:var(--calcite-spacing-md)}:host([scale=m][display-mode=flat]) .selection-container{padding-inline-end:var(--calcite-spacing-sm)}:host([scale=m][display-mode=flat][drag-handle]) .container{padding-inline-start:0}:host([scale=m][display-mode=flat][drag-handle]) .selection-container{padding-inline:var(--calcite-spacing-xxs) var(--calcite-spacing-sm)}:host([scale=m][display-mode=nested]) .container{padding-inline-start:var(--calcite-spacing-xxs)}:host([scale=m][display-mode=nested]) .selection-container{padding-inline-end:var(--calcite-spacing-xxs)}:host([scale=m][display-mode=nested][selection-appearance=icon]:not([selection-mode=none]):not([drag-handle])) .container{padding-inline-start:var(--calcite-spacing-md)}:host([scale=m][display-mode=nested][drag-handle]) .container{padding-inline-start:0}:host([scale=m][display-mode=nested][drag-handle]) .selection-container{padding-inline:var(--calcite-spacing-xxs)}:host([scale=l]) .actions-start{padding-inline-end:var(--calcite-spacing-md)}:host([scale=l]) .content-container{gap:var(--calcite-spacing-md);min-block-size:56px;padding-block:.625rem;padding-inline-end:var(--calcite-spacing-lg)}:host([scale=l]) .content,:host([scale=l]) .custom-content,:host([scale=l]) .label{font-size:var(--calcite-font-size-0)}:host([scale=l]) .description{font-size:var(--calcite-font-size--1)}:host([scale=l]) .nested-container{margin-inline-start:1.75rem}:host([scale=l][display-mode=flat]) .container{padding-inline-start:var(--calcite-spacing-lg)}:host([scale=l][display-mode=flat]) .selection-container{padding-inline-end:var(--calcite-spacing-md)}:host([scale=l][display-mode=flat][drag-handle]) .container{padding-inline-start:0}:host([scale=l][display-mode=flat][drag-handle]) .selection-container{padding-inline-end:var(--calcite-spacing-md)}:host([scale=l][display-mode=nested]) .container{padding-inline-start:var(--calcite-spacing-xxs)}:host([scale=l][display-mode=nested][drag-handle]) .container{padding-inline-start:0}:host([scale=l][display-mode=nested][selection-appearance=icon]:not([selection-mode=none]):not([drag-handle])) .container{padding-inline-start:var(--calcite-spacing-lg)}.label,.description,.content-bottom{font-family:var(--calcite-font-family);font-weight:var(--calcite-font-weight-normal);word-wrap:break-word;word-break:break-word}:host([selected]) .label{font-weight:var(--calcite-font-weight-medium)}:host([selected]) .icon{color:var(--calcite-list-icon-color, var(--calcite-color-text-1))}:host([selected]) .description{color:var(--calcite-list-description-text-color, var(--calcite-color-text-2))}.content-start{justify-content:flex-start}.content-end{justify-content:flex-end}.content-start,.content-end{flex:1 1 auto}.content-start ::slotted(calcite-icon),.content-end ::slotted(calcite-icon){align-self:center}.content-bottom{display:flex;flex-direction:column}.content-container--has-center-content .content-start,.content-container--has-center-content .content-end{flex:0 1 auto}.expanded-container{color:var(--calcite-list-icon-color, var(--calcite-color-text-3));padding-inline:var(--calcite-spacing-xxs)}:host(:not([disabled])) .expanded-container:hover{color:var(--calcite-list-icon-color, var(--calcite-color-text-1))}.actions-start,.actions-end,.content-start,.content-end,.selection-container,.drag-container,.expanded-container{display:flex;align-items:center}.actions-start calcite-action,.actions-start calcite-sort-handle,.actions-end calcite-action,.actions-end calcite-sort-handle,.content-start calcite-action,.content-start calcite-sort-handle,.content-end calcite-action,.content-end calcite-sort-handle,.selection-container calcite-action,.selection-container calcite-sort-handle,.drag-container calcite-action,.drag-container calcite-sort-handle,.expanded-container calcite-action,.expanded-container calcite-sort-handle{align-self:stretch}.drag-container,.selection-container,.expanded-container{padding-block-end:var(--calcite-spacing-px)}.expanded-container,.selection-container{cursor:pointer}.actions-start,.actions-end{position:relative;padding:0}.actions-start ::slotted(calcite-action),.actions-start ::slotted(calcite-action-menu),.actions-start ::slotted(calcite-sort-handle),.actions-start ::slotted(calcite-dropdown),.actions-end ::slotted(calcite-action),.actions-end ::slotted(calcite-action-menu),.actions-end ::slotted(calcite-sort-handle),.actions-end ::slotted(calcite-dropdown){align-self:stretch;color:inherit}.row:focus .actions-start,.row:focus .actions-end{inset-block:.125rem}.row:focus .actions-start .close,.row:focus .actions-start ::slotted(calcite-action),.row:focus .actions-start ::slotted(calcite-action-menu),.row:focus .actions-start ::slotted(calcite-sort-handle),.row:focus .actions-start ::slotted(calcite-dropdown),.row:focus .actions-end .close,.row:focus .actions-end ::slotted(calcite-action),.row:focus .actions-end ::slotted(calcite-action-menu),.row:focus .actions-end ::slotted(calcite-sort-handle),.row:focus .actions-end ::slotted(calcite-dropdown){block-size:calc(100% - .25rem)}.row:focus:after,.row:focus:before{position:absolute;content:"";inline-size:.125rem;z-index:var(--calcite-z-index-header);background-color:var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));inset-block:0}.row:focus:before{inset-inline-start:0}.row:focus:after{inset-inline-end:0}.container--border:focus:before{display:none}::slotted(calcite-list:empty){border-block-start-width:0px}:host([hidden]){display:none}[hidden]{display:none}`,S3=new Map,NN=class NN extends dt{constructor(){super(),this.actionsEndRef=vi(),this.actionsStartRef=vi(),this.containerRef=vi(),this.contentRef=vi(),this.defaultSlotRef=vi(),this.handleGridRef=vi(),this.messages=un(),this.focusSetter=dn()(this),this.hasActionsEnd=!1,this.hasActionsStart=!1,this.hasContentBottom=!1,this.hasContentEnd=!1,this.hasContentStart=!1,this.hasCustomContent=!1,this.level=null,this.expandable=!1,this.active=!1,this.bordered=!1,this.sortDisabled=!1,this.closable=!1,this.closed=!1,this.disabled=!1,this.dragDisabled=!1,this.dragHandle=!1,this.expanded=!1,this.filterHidden=!1,this.interactionMode=null,this.displayMode="flat",this.addToItems=[],this.moveToItems=[],this.scale="m",this.selected=!1,this.selectionAppearance=null,this.selectionMode=null,this.sortHandleOpen=!1,this.unavailable=!1,this.calciteInternalFocusPreviousItem=Re({cancelable:!1}),this.calciteInternalListItemActive=Re({cancelable:!1}),this.calciteInternalListItemChange=Re({cancelable:!1}),this.calciteInternalListItemSelect=Re({cancelable:!1}),this.calciteInternalListItemSelectMultiple=Re({cancelable:!1}),this.calciteInternalListItemToggle=Re({cancelable:!1}),this.calciteListItemClose=Re({cancelable:!1}),this.calciteListItemCollapse=Re({cancelable:!1}),this.calciteListItemExpand=Re({cancelable:!1}),this.calciteListItemSelect=Re({cancelable:!1}),this.calciteListItemSortHandleBeforeClose=Re({cancelable:!1}),this.calciteListItemSortHandleBeforeOpen=Re({cancelable:!1}),this.calciteListItemSortHandleClose=Re({cancelable:!1}),this.calciteListItemSortHandleOpen=Re({cancelable:!1}),this.calciteListItemToggle=Re({cancelable:!1}),this.listen("calciteInternalListItemGroupDefaultSlotChange",this.handleCalciteInternalListDefaultSlotChanges),this.listen("calciteInternalListDefaultSlotChange",this.handleCalciteInternalListDefaultSlotChanges)}get open(){return this.expanded}set open(e){NF.deprecated("property",{name:"open",removalVersion:4,suggested:"expanded"}),this.expanded=e}async setFocus(e){return this.focusSetter(()=>{const{containerRef:i,parentListEl:r}=this,n=S3.get(r);if(typeof n=="number"){const s=this.getGridCells()[n];if(s){this.focusCell(s);return}}return{target:i.value,includeContainer:!0,strategy:"focusable"}},e)}connectedCallback(){super.connectedCallback();const{el:e}=this;this.parentListEl=e.closest(H2),this.level=uvt(e)+1,this.setSelectionDefaults()}disconnectedCallback(){super.disconnectedCallback(),S3.clear()}willUpdate(e){e.has("active")&&(this.hasUpdated||this.active!==!1)&&this.activeHandler(this.active),e.has("closed")&&(this.hasUpdated||this.closed!==!1)&&this.handleClosedChange(),e.has("disabled")&&(this.hasUpdated||this.disabled!==!1)&&this.handleDisabledChange(),e.has("selected")&&(this.hasUpdated||this.selected!==!1)&&this.handleSelectedChange(),e.has("sortHandleOpen")&&(this.hasUpdated||this.sortHandleOpen!==!1)&&this.sortHandleOpenHandler(),e.has("displayMode")&&this.hasUpdated&&this.handleExpandableChange(this.defaultSlotRef.value),e.has("expanded")&&this.hasUpdated&&(this.expanded?(this.handleExpandedChange(),this.calciteListItemExpand.emit()):this.calciteListItemCollapse.emit())}updated(){Vs(this)}activeHandler(e){e||this.focusCell(null,!1)}handleClosedChange(){this.emitCalciteInternalListItemChange()}handleDisabledChange(){this.emitCalciteInternalListItemChange()}handleExpandedChange(){this.emitCalciteInternalListItemToggle()}handleSelectedChange(){this.calciteInternalListItemSelect.emit()}sortHandleOpenHandler(){this.sortHandleEl&&(this.sortHandleEl.open=this.sortHandleOpen)}handleCalciteInternalListDefaultSlotChanges(e){e.stopPropagation(),this.handleExpandableChange(this.defaultSlotRef.value)}setSortHandleEl(e){this.sortHandleEl=e,this.sortHandleOpenHandler()}handleSortHandleBeforeOpen(e){e.stopPropagation(),this.calciteListItemSortHandleBeforeOpen.emit()}handleSortHandleBeforeClose(e){e.stopPropagation(),this.calciteListItemSortHandleBeforeClose.emit()}handleSortHandleClose(e){e.stopPropagation(),this.sortHandleOpen=!1,this.calciteListItemSortHandleClose.emit()}handleSortHandleOpen(e){e.stopPropagation(),this.sortHandleOpen=!0,this.calciteListItemSortHandleOpen.emit()}emitInternalListItemActive(){this.calciteInternalListItemActive.emit()}emitCalciteInternalListItemToggle(){this.calciteInternalListItemToggle.emit()}emitCalciteInternalListItemChange(){this.calciteInternalListItemChange.emit()}handleCloseClick(){this.closed=!0,this.calciteListItemClose.emit()}handleContentSlotChange(e){this.hasCustomContent=ii(e)}handleActionsStartSlotChange(e){this.hasActionsStart=ii(e)}handleActionsEndSlotChange(e){this.hasActionsEnd=ii(e)}handleContentStartSlotChange(e){this.hasContentStart=ii(e)}handleContentEndSlotChange(e){this.hasContentEnd=ii(e)}handleContentBottomSlotChange(e){this.hasContentBottom=ii(e)}setSelectionDefaults(){const{parentListEl:e,selectionMode:i,selectionAppearance:r}=this;e&&(i||(this.selectionMode=e.selectionMode),r||(this.selectionAppearance=e.selectionAppearance))}handleExpandableChange(e){if(!e)return;const i=lvt(e);i.lists.forEach(r=>{r.displayMode=this.displayMode}),this.expandable=this.displayMode==="nested"&&(i.lists.length>0||i.items.length>0)}handleDefaultSlotChange(e){this.handleExpandableChange(e.target)}handleToggleClick(){this.toggle()}toggle(e=!this.expanded){this.expanded=e,this.calciteListItemToggle.emit()}handleItemClick(e){e.defaultPrevented||this.toggleSelected(e.shiftKey)}async toggleSelected(e){const{selectionMode:i,selected:r}=this;this.disabled||(i==="multiple"||i==="single"?this.selected=!r:i==="single-persist"&&(this.selected=!0),this.calciteInternalListItemSelectMultiple.emit({selectMultiple:e&&i==="multiple"}),await this.updateComplete,this.calciteListItemSelect.emit())}getGridCells(){return[this.handleGridRef.value,this.actionsStartRef.value,this.contentRef.value,this.actionsEndRef.value].filter(e=>e&&!e.hidden)}handleItemKeyDown(e){if(e.defaultPrevented)return;const{key:i}=e,r=e.composedPath(),{containerRef:n,actionsStartRef:{value:s},actionsEndRef:{value:a},expanded:o,expandable:l}=this,c=this.getGridCells(),h=c.findIndex(m=>r.includes(m));if(i==="Enter"&&!r.includes(s)&&!r.includes(a))e.preventDefault(),this.toggleSelected(e.shiftKey);else if(i==="ArrowRight"){e.preventDefault();const m=h+1;h===-1?!o&&l?(this.toggle(!0),this.focusCell(null)):c[0]&&this.focusCell(c[0]):c[h]&&c[m]&&this.focusCell(c[m])}else if(i==="ArrowLeft"){e.preventDefault();const m=h-1;h===-1?(this.focusCell(null),o&&l?this.toggle(!1):this.calciteInternalFocusPreviousItem.emit()):h===0?(this.focusCell(null),n.value.focus()):c[h]&&c[m]&&this.focusCell(c[m])}}focusCellNull(){this.focusCell(null)}setFocusCell(e,i,r){const{parentListEl:n}=this;r&&S3.set(n,null);const s=this.getGridCells();s.forEach(a=>{a.removeAttribute("tabindex"),a.removeAttribute(Jue)}),e&&(e===i?e.tabIndex=0:e.removeAttribute("tabindex"),e.setAttribute(Jue,""),r&&S3.set(n,s.indexOf(e)))}focusCell(e,i=!0){const r=yhe(e);this.setFocusCell(e,r,i),r==null||r.focus()}renderSelected(){const{selected:e,selectionMode:i,selectionAppearance:r}=this;return i==="none"||r==="border"?null:nt("selection-container",q`<div class=${H({[Li.selectionContainer]:!0,[Li.selectionContainerSingle]:i==="single"||i==="single-persist"})} @click=${this.handleItemClick}><calcite-icon .icon=${e?i==="multiple"?Of.selectedMultiple:Of.selectedSingle:i==="multiple"?Of.unselectedMultiple:Of.unselectedSingle} .scale=${gr(this.scale)}></calcite-icon></div>`)}renderDragHandle(){const{label:e,dragHandle:i,dragDisabled:r,setPosition:n,setSize:s,moveToItems:a,sortDisabled:o,addToItems:l}=this;return i?nt("drag-handle-container",q`<div .ariaLabel=${e} class=${H({[Li.dragContainer]:!0,[Li.gridCell]:!0})} role=gridcell ${gt(this.handleGridRef)}><calcite-sort-handle .addToItems=${l} .disabled=${r} .label=${e} .moveToItems=${a} @calciteSortHandleBeforeClose=${this.handleSortHandleBeforeClose} @calciteSortHandleBeforeOpen=${this.handleSortHandleBeforeOpen} @calciteSortHandleClose=${this.handleSortHandleClose} @calciteSortHandleOpen=${this.handleSortHandleOpen} overlay-positioning=fixed .scale=${this.scale} .setPosition=${n} .setSize=${s} .sortDisabled=${o} ${gt(this.setSortHandleEl)}></calcite-sort-handle></div>`):null}renderExpanded(){const{el:e,expanded:i,expandable:r,messages:n,displayMode:s,scale:a}=this;if(s!=="nested")return null;const o=Uo(e),l=r?i?Of.open:o==="rtl"?Of.collapsedRTL:Of.collapsedLTR:Of.blank,c=gr(a),h=r?i?n.collapse:n.expand:void 0,m=r?this.handleToggleClick:void 0;return nt("expanded-container",q`<div class=${H(Li.expandedContainer)} @click=${m} title=${h??Xe}>${nt(l,q`<calcite-icon .icon=${l} .scale=${c}></calcite-icon>`)}</div>`)}renderActionsStart(){const{label:e,hasActionsStart:i}=this;return nt("actions-start-container",q`<div .ariaLabel=${e} class=${H({[Li.actionsStart]:!0,[Li.gridCell]:!0})} .hidden=${!i} role=gridcell ${gt(this.actionsStartRef)}><slot name=${Q1.actionsStart} @slotchange=${this.handleActionsStartSlotChange}></slot></div>`)}renderActionsEnd(){const{label:e,hasActionsEnd:i,closable:r,messages:n}=this;return nt("actions-end-container",q`<div .ariaLabel=${e} class=${H({[Li.actionsEnd]:!0,[Li.gridCell]:!0})} .hidden=${!(i||r)} role=gridcell ${gt(this.actionsEndRef)}><slot name=${Q1.actionsEnd} @slotchange=${this.handleActionsEndSlotChange}></slot>${r?nt("close-action",q`<calcite-action appearance=transparent class=${H(Li.close)} .icon=${Of.close} .label=${n.close} @click=${this.handleCloseClick} .scale=${this.scale} .text=${n.close}></calcite-action>`):null}</div>`)}renderContentStart(){const{hasContentStart:e}=this;return q`<div class=${H(Li.contentStart)} .hidden=${!e}><slot name=${Q1.contentStart} @slotchange=${this.handleContentStartSlotChange}></slot></div>`}renderCustomContent(){const{hasCustomContent:e}=this;return q`<div class=${H(Li.customContent)} .hidden=${!e}><slot name=${Q1.content} @slotchange=${this.handleContentSlotChange}></slot></div>`}renderIconStart(){const{iconStart:e,iconFlipRtl:i,scale:r}=this;return e?nt("icon-start",q`<calcite-icon class=${H(Li.icon)} .flipRtl=${i==="both"||i==="start"} .icon=${e} .scale=${gr(r)}></calcite-icon>`):null}renderIconEnd(){const{iconEnd:e,iconFlipRtl:i,scale:r}=this;return e?nt("icon-end",q`<calcite-icon class=${H(Li.icon)} .flipRtl=${i==="both"||i==="end"} .icon=${e} .scale=${gr(r)}></calcite-icon>`):null}renderContentEnd(){const{hasContentEnd:e}=this;return q`<div class=${H(Li.contentEnd)} .hidden=${!e}><slot name=${Q1.contentEnd} @slotchange=${this.handleContentEndSlotChange}></slot></div>`}renderContentBottom(){const{hasContentBottom:e}=this;return q`<div class=${H(Li.contentBottom)} .hidden=${!e}><slot name=${Q1.contentBottom} @slotchange=${this.handleContentBottomSlotChange}></slot></div>`}renderDefaultContainer(){return q`<div class=${H({[Li.nestedContainer]:!0,[Li.nestedContainerExpanded]:this.expandable&&this.expanded})}><slot @slotchange=${this.handleDefaultSlotChange} ${gt(this.defaultSlotRef)}></slot></div>`}renderContentProperties(){const{label:e,description:i,hasCustomContent:r}=this;return!r&&(e||i)?nt("content",q`<div class=${H(Li.content)}>${e?nt("label",q`<div class=${H(Li.label)}>${e}</div>`):null}${i?nt("description",q`<div class=${H(Li.description)}>${i}</div>`):null}</div>`):null}renderContentContainer(){const{description:e,label:i,selectionMode:r,hasCustomContent:n,unavailable:s}=this,a=n||!!i||!!e,o=[this.renderContentStart(),this.renderCustomContent(),this.renderIconStart(),this.renderContentProperties(),this.renderIconEnd(),this.renderContentEnd()];return nt("content-container",q`<div .ariaLabel=${i} class=${H({[Li.gridCell]:!0,[Li.contentContainer]:!0,[Li.contentContainerUnavailable]:s,[Li.contentContainerSelectable]:r!=="none",[Li.contentContainerHasCenterContent]:a})} @click=${this.handleItemClick} role=gridcell ${gt(this.contentRef)}>${o}</div>`)}render(){const{expandable:e,expanded:i,level:r,active:n,label:s,selected:a,selectionAppearance:o,selectionMode:l,interactionMode:c,closed:h,filterHidden:m,bordered:g,disabled:v,hasContentBottom:b}=this,x=g&&b,$=g&&!b,M=l!=="none"&&o==="border",k=M&&a,A=M&&!a,L=c==="interactive"||c==="static"&&l!=="none"&&o==="border";return Us({disabled:v,children:q`<div class=${H({[Li.wrapper]:!0,[Li.wrapperBordered]:x})}><div .ariaExpanded=${e?i:null} .ariaLabel=${s} .ariaLevel=${r} .ariaSelected=${a} class=${H({[Li.row]:!0,[Li.container]:!0,[Li.containerHover]:L,[Li.containerBorder]:M,[Li.containerBorderSelected]:k,[Li.containerBorderUnselected]:A})} .hidden=${h||m} @focus=${this.focusCellNull} @focusin=${this.emitInternalListItemActive} @keydown=${this.handleItemKeyDown} role=row .tabIndex=${n?0:-1} ${gt(this.containerRef)}>${this.renderDragHandle()}${this.renderSelected()}${this.renderExpanded()}<div class=${H({[Li.contentContainerWrapper]:!0,[Li.contentContainerWrapperBordered]:$})}>${this.renderActionsStart()}${this.renderContentContainer()}${this.renderActionsEnd()}</div></div>${this.renderContentBottom()}</div>${this.renderDefaultContainer()}`})}};NN.properties={hasActionsEnd:[16,{},{state:!0}],hasActionsStart:[16,{},{state:!0}],hasContentBottom:[16,{},{state:!0}],hasContentEnd:[16,{},{state:!0}],hasContentStart:[16,{},{state:!0}],hasCustomContent:[16,{},{state:!0}],level:[16,{},{state:!0}],expandable:[16,{},{state:!0}],parentListEl:[16,{},{state:!0}],active:[5,{},{type:Boolean}],bordered:[5,{},{type:Boolean}],sortDisabled:[5,{},{type:Boolean}],closable:[7,{},{reflect:!0,type:Boolean}],closed:[7,{},{reflect:!0,type:Boolean}],description:1,disabled:[7,{},{reflect:!0,type:Boolean}],dragDisabled:[7,{},{reflect:!0,type:Boolean}],dragHandle:[7,{},{reflect:!0,type:Boolean}],expanded:[7,{},{reflect:!0,type:Boolean}],filterHidden:[7,{},{reflect:!0,type:Boolean}],interactionMode:1,label:1,messageOverrides:[0,{},{attribute:!1}],metadata:[0,{},{attribute:!1}],displayMode:[3,{},{reflect:!0}],addToItems:[0,{},{attribute:!1}],moveToItems:[0,{},{attribute:!1}],open:[7,{},{reflect:!0,type:Boolean}],scale:[3,{},{reflect:!0}],selected:[7,{},{reflect:!0,type:Boolean}],selectionAppearance:[3,{},{reflect:!0}],selectionMode:[3,{},{reflect:!0}],setPosition:[9,{},{type:Number}],setSize:[9,{},{type:Number}],sortHandleOpen:[7,{},{reflect:!0,type:Boolean}],unavailable:[7,{},{reflect:!0,type:Boolean}],value:1,iconStart:[3,{},{reflect:!0}],iconEnd:[3,{},{reflect:!0}],iconFlipRtl:[3,{},{reflect:!0}]},NN.styles=[hvt,jIe];let Zz=NN;ci("calcite-list-item",Zz);const AX=Object.freeze(Object.defineProperty({__proto__:null,ListItem:Zz},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const K1={container:"container",actionsStart:"actions-start",contentStart:"content-start",content:"content",contentEnd:"content-end",actionsEnd:"actions-end"},k$={actionsStart:"actions-start",contentStart:"content-start",contentEnd:"content-end",actionsEnd:"actions-end"};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const pvt=ct`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]) .content{cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) .content *,:host([disabled]) .content ::slotted(*){pointer-events:none}:host{display:flex;flex:1 1 0%;flex-direction:column}.container{display:flex;flex:1 1 auto;align-items:stretch;font-weight:var(--calcite-font-weight-normal);color:var(--calcite-color-text-2)}.content{display:flex;flex:1 1 auto;flex-direction:column;justify-content:center;font-size:var(--calcite-font-size--2);line-height:1.375;padding-inline:var(--calcite-stack-padding-inline, .75rem);padding-block:var(--calcite-stack-padding-block, .5rem)}.content-start{justify-content:flex-start}.content-end{justify-content:flex-end}.content-start,.content-end{flex:0 1 auto}.content-start ::slotted(calcite-icon),.content-end ::slotted(calcite-icon){margin-inline:.75rem;align-self:center}.actions-start,.actions-end,.content-start,.content-end{display:flex;align-items:center}.actions-start ::slotted(calcite-action),.actions-start ::slotted(calcite-action-menu),.actions-start ::slotted(calcite-handle),.actions-start ::slotted(calcite-dropdown),.actions-end ::slotted(calcite-action),.actions-end ::slotted(calcite-action-menu),.actions-end ::slotted(calcite-handle),.actions-end ::slotted(calcite-dropdown){align-self:stretch;color:inherit}:host([hidden]){display:none}[hidden]{display:none}`,DN=class DN extends dt{constructor(){super(...arguments),this.hasActionsEnd=!1,this.hasActionsStart=!1,this.hasContentEnd=!1,this.hasContentStart=!1,this.disabled=!1}handleActionsStartSlotChange(e){this.hasActionsStart=ii(e)}handleActionsEndSlotChange(e){this.hasActionsEnd=ii(e)}handleContentStartSlotChange(e){this.hasContentStart=ii(e)}handleContentEndSlotChange(e){this.hasContentEnd=ii(e)}renderActionsStart(){const{hasActionsStart:e}=this;return nt("actions-start-container",q`<div class=${H(K1.actionsStart)} .hidden=${!e}><slot name=${k$.actionsStart} @slotchange=${this.handleActionsStartSlotChange}></slot></div>`)}renderActionsEnd(){const{hasActionsEnd:e}=this;return nt("actions-end-container",q`<div class=${H(K1.actionsEnd)} .hidden=${!e}><slot name=${k$.actionsEnd} @slotchange=${this.handleActionsEndSlotChange}></slot></div>`)}renderContentStart(){const{hasContentStart:e}=this;return q`<div class=${H(K1.contentStart)} .hidden=${!e}><slot name=${k$.contentStart} @slotchange=${this.handleContentStartSlotChange}></slot></div>`}renderDefaultContent(){return q`<div class=${H(K1.content)}><slot></slot></div>`}renderContentEnd(){const{hasContentEnd:e}=this;return q`<div class=${H(K1.contentEnd)} .hidden=${!e}><slot name=${k$.contentEnd} @slotchange=${this.handleContentEndSlotChange}></slot></div>`}render(){return q`<div class=${H(K1.container)}>${this.renderActionsStart()}${this.renderContentStart()}${this.renderDefaultContent()}${this.renderContentEnd()}${this.renderActionsEnd()}</div>`}};DN.properties={hasActionsEnd:[16,{},{state:!0}],hasActionsStart:[16,{},{state:!0}],hasContentEnd:[16,{},{state:!0}],hasContentStart:[16,{},{state:!0}],disabled:[7,{},{reflect:!0,type:Boolean}]},DN.styles=pvt;let qG=DN;ci("calcite-stack",qG);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const fvt=["date","datetime-local","month","number","range","time","week"],mvt=["email","password","search","tel","text","url"],gvt=["email","password","search","tel","text","textarea","url"];function ex(t,e,i,r){const n=i.toLowerCase(),s=t[i];r&&s!=null?e.setAttribute(n,`${s}`):e.removeAttribute(n)}function yvt(t,e,i){i.type=t==="textarea"?"text":t;const r=fvt.includes(t),n=e;ex(n,i,"min",r),ex(n,i,"max",r),ex(n,i,"step",r);const s=gvt.includes(t),a=e;ex(a,i,"minLength",s),ex(a,i,"maxLength",s);const o=mvt.includes(t);ex(a,i,"pattern",o)}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Sa={loader:"loader",clearButton:"clear-button",editingEnabled:"editing-enabled",inlineChild:"inline-child",inputIcon:"icon",prefix:"prefix",suffix:"suffix",numberButtonWrapper:"number-button-wrapper",buttonItemHorizontal:"number-button-item--horizontal",wrapper:"element-wrapper",inputWrapper:"wrapper",actionWrapper:"action-wrapper",numberButtonItem:"number-button-item",hasSuffix:"has-suffix",hasPrefix:"has-prefix"},hB={validationMessage:"inputValidationMessage"},Xue={tel:"phone",password:"lock",email:"email-address",date:"calendar",time:"clock",search:"search"},vvt={action:"action"},Que={up:"up",down:"down"},pB={chevronUp:"chevron-up",chevronDown:"chevron-down",close:"x"},bvt=ct`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:block}:host([scale=s]) input,:host([scale=s]) .prefix,:host([scale=s]) .suffix{block-size:1.5rem;padding-inline:.5rem;font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=s]) input[type=file],:host([scale=s]) textarea{min-block-size:1.5rem}:host([scale=s]) .number-button-wrapper,:host([scale=s]) .action-wrapper{block-size:1.5rem}:host([scale=s]) .clear-button{min-block-size:1.5rem;min-inline-size:1.5rem}:host([scale=s]) textarea{block-size:auto;padding-block:.25rem;padding-inline:.5rem;font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=m]) input,:host([scale=m]) .prefix,:host([scale=m]) .suffix{block-size:2rem;padding-inline:.75rem;font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=m]) textarea,:host([scale=m]) input[type=file]{min-block-size:2rem}:host([scale=m]) .number-button-wrapper,:host([scale=m]) .action-wrapper{block-size:2rem}:host([scale=m]) .clear-button{min-block-size:2rem;min-inline-size:2rem}:host([scale=m]) textarea{block-size:auto;padding-block:.5rem;padding-inline:.75rem;font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=l]) input,:host([scale=l]) .prefix,:host([scale=l]) .suffix{block-size:2.75rem;padding-inline:1rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l]) textarea,:host([scale=l]) input[type=file]{min-block-size:2.75rem}:host([scale=l]) .number-button-wrapper,:host([scale=l]) .action-wrapper{block-size:2.75rem}:host([scale=l]) .clear-button{min-block-size:2.75rem;min-inline-size:2.75rem}:host([scale=l]) textarea{block-size:auto;padding-block:.75rem;padding-inline:1rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([disabled]) textarea{resize:none}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}textarea,input{position:relative;margin:0;box-sizing:border-box;display:flex;max-block-size:100%;inline-size:100%;max-inline-size:100%;flex:1 1 0%;text-overflow:ellipsis;border-width:1px;border-style:solid;font-family:inherit;font-weight:var(--calcite-font-weight-normal);border-color:var(--calcite-input-border-color, var(--calcite-color-border-input));background-color:var(--calcite-input-background-color, var(--calcite-color-foreground-1));color:var(--calcite-input-text-color, var(--calcite-color-text-1));transition:var(--calcite-animation-timing),block-size 0,outline-offset 0s;-webkit-appearance:none}textarea:placeholder-shown,input:placeholder-shown{text-overflow:ellipsis}textarea{border-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp))}input{border-start-start-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp));border-start-end-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp));border-end-start-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp));border-end-end-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp))}.has-prefix input{border-start-start-radius:0;border-end-start-radius:0}.has-suffix input,.element-wrapper:has(.clear-button) input,:host([number-button-type=vertical][type=number]) input,:host([number-button-type=horizontal]) .has-suffix .suffix,:host([number-button-type=vertical][type=number]) .has-suffix .suffix,:host([number-button-type=vertical][type=number]) .clear-button,:host([number-button-type=horizontal][type=number]) .clear-button{border-start-end-radius:0;border-end-end-radius:0}:host([number-button-type=horizontal]) input{border-start-start-radius:0;border-start-end-radius:0;border-end-start-radius:0;border-end-end-radius:0}.has-prefix .prefix:first-child,:host([number-button-type=horizontal]) .number-button-item[data-adjustment=down]{border-start-start-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp));border-end-start-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp))}.has-suffix .suffix,:host([number-button-type=vertical][type=number][read-only]) .has-suffix .suffix,:host([clearable]) .clear-button,:host([number-button-type=horizontal]) .number-button-item[data-adjustment=up]{border-end-end-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp));border-start-end-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp))}:host([clearable]) .has-suffix .clear-button{border-end-end-radius:0;border-start-end-radius:0}:host([number-button-type=vertical]) .number-button-item[data-adjustment=down]{border-block-start-width:0px;border-end-end-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp))}:host([number-button-type=vertical]) .number-button-item[data-adjustment=up]{border-start-end-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp))}input[type=search]::-webkit-search-decoration{-webkit-appearance:none}input:focus,textarea:focus{border-color:var(--calcite-color-brand);color:var(--calcite-input-text-color, var(--calcite-color-text-1))}input[readonly],textarea[readonly]{font-weight:var(--calcite-font-weight-medium);background-color:var(--calcite-input-background-color, var(--calcite-color-background))}input[readonly]:focus,textarea[readonly]:focus{color:var(--calcite-input-text-color, var(--calcite-color-text-1))}textarea,input{outline-color:transparent}textarea:focus,input:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}:host([status=invalid]) input,:host([status=invalid]) textarea{border-color:var(--calcite-color-status-danger)}:host([status=invalid]) input:focus,:host([status=invalid]) textarea:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-status-danger);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}:host([scale=s]) .icon{inset-inline-start:.5rem}:host([scale=m]) .icon{inset-inline-start:.75rem}:host([scale=l]) .icon{inset-inline-start:1rem}:host([icon][scale=s]) input{padding-inline-start:2rem}:host([icon][scale=m]) input{padding-inline-start:2.5rem}:host([icon][scale=l]) input{padding-inline-start:3.5rem}.element-wrapper{position:relative;order:3;display:inline-flex;flex:1 1 0%;align-items:center;isolation:isolate}.icon{pointer-events:none;position:absolute;display:block;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;color:var(--calcite-input-icon-color, var(--calcite-color-text-3));z-index:var(--calcite-z-index)}input[type=text]::-ms-clear,input[type=text]::-ms-reveal{display:none;block-size:0px;inline-size:0px}input[type=search]::-webkit-search-decoration,input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-results-button,input[type=search]::-webkit-search-results-decoration,input[type=date]::-webkit-clear-button,input[type=time]::-webkit-clear-button{display:none}.clear-button{pointer-events:initial;order:4;margin:0;box-sizing:border-box;display:flex;min-block-size:100%;cursor:pointer;align-items:center;justify-content:center;align-self:stretch;border-width:1px;border-style:solid;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;outline-color:transparent;border-color:var(--calcite-input-border-color, var(--calcite-color-border-input));background-color:var(--calcite-input-actions-background-color, var(--calcite-color-foreground-1));border-inline-start-width:0px}.clear-button calcite-icon{transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;color:var(--calcite-input-actions-icon-color, var(--calcite-color-text-3))}.clear-button:hover{background-color:var(--calcite-input-actions-background-color-hover, var(--calcite-color-foreground-2))}.clear-button:hover calcite-icon{color:var(--calcite-input-actions-icon-color-hover, var(--calcite-color-text-1))}.clear-button:active{background-color:var(--calcite-input-actions-background-color-press, var(--calcite-color-foreground-3))}.clear-button:active calcite-icon{color:var(--calcite-input-actions-icon-color-press, var(--calcite-color-text-1))}.clear-button:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.clear-button:disabled{opacity:var(--calcite-opacity-disabled)}.loader{inset-block-start:1px;inset-inline:1px;pointer-events:none;position:absolute;display:block;--calcite-progress-background-color: var(--calcite-input-loading-background-color);--calcite-progress-fill-color: var(--calcite-input-loading-fill-color)}.action-wrapper{order:7;display:flex}.prefix,.suffix{box-sizing:border-box;display:flex;block-size:auto;min-block-size:100%;-webkit-user-select:none;user-select:none;align-content:center;align-items:center;overflow-wrap:break-word;border-width:1px;border-style:solid;font-weight:var(--calcite-font-weight-medium);line-height:1;border-color:var(--calcite-input-border-color, var(--calcite-color-border-input))}.prefix{order:2;border-inline-end-width:0px;inline-size:var(--calcite-input-prefix-size, auto);background-color:var(--calcite-input-prefix-background-color, var(--calcite-color-background));color:var(--calcite-input-prefix-text-color, var(--calcite-color-text-2))}.suffix{order:5;border-inline-start-width:0px;inline-size:var(--calcite-input-suffix-size, auto);background-color:var(--calcite-input-suffix-background-color, var(--calcite-color-background));color:var(--calcite-input-suffix-text-color, var(--calcite-color-text-2))}:host([alignment=start]) textarea,:host([alignment=start]) input{text-align:start}:host([alignment=end]) textarea,:host([alignment=end]) input{text-align:end}input[type=number]{-moz-appearance:textfield}input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{-webkit-appearance:none;-moz-appearance:textfield;margin:0}.number-button-wrapper{pointer-events:none;order:6;box-sizing:border-box;display:flex;flex-direction:column;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out}:host([number-button-type=vertical]) .wrapper{flex-direction:row;display:flex}:host([number-button-type=vertical]) input,:host([number-button-type=vertical]) textarea{order:2}:host([number-button-type=horizontal]) .calcite--rtl .number-button-item[data-adjustment=down] calcite-icon{transform:rotate(-90deg)}:host([number-button-type=horizontal]) .calcite--rtl .number-button-item[data-adjustment=up] calcite-icon{transform:rotate(-90deg)}.number-button-item.number-button-item--horizontal{border-color:var(--calcite-input-border-color, var(--calcite-color-border-input));order:1;max-block-size:100%;min-block-size:100%;align-self:stretch;border-width:1px;border-style:solid}.number-button-item.number-button-item--horizontal[data-adjustment=down] calcite-icon,.number-button-item.number-button-item--horizontal[data-adjustment=up] calcite-icon{transform:rotate(90deg)}.number-button-item.number-button-item--horizontal[data-adjustment=down]{border-inline-end-width:0px}.number-button-item.number-button-item--horizontal[data-adjustment=up]{border-inline-start-width:0px;order:5}.number-button-item{max-block-size:50%;min-block-size:50%;pointer-events:initial;margin:0;box-sizing:border-box;display:flex;cursor:pointer;align-items:center;align-self:center;border-width:1px;border-style:solid;background-color:var(--calcite-color-foreground-1);padding-block:0px;padding-inline:.5rem;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;border-color:var(--calcite-input-border-color, var(--calcite-color-border-input));background-color:var(--calcite-input-actions-background-color, var(--calcite-color-foreground-1));border-inline-start-width:0px}.number-button-item calcite-icon{pointer-events:none;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;color:var(--calcite-input-actions-icon-color, var(--calcite-color-text-3))}.number-button-item:hover{background-color:var(--calcite-input-actions-background-color-hover, var(--calcite-color-foreground-2))}.number-button-item:hover calcite-icon{color:var(--calcite-input-actions-icon-color-hover, var(--calcite-color-text-1))}.number-button-item:active{background-color:var(--calcite-input-actions-background-color-press, var(--calcite-color-foreground-3))}.number-button-item:active calcite-icon{color:var(--calcite-input-actions-icon-color-press, var(--calcite-color-text-1))}.number-button-item:disabled{pointer-events:none}.wrapper{position:relative;display:flex;flex-direction:row;align-items:center;border-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp));box-shadow:var(--calcite-input-shadow, var(--calcite-shadow-none))}input[type=date]::-webkit-input-placeholder{visibility:hidden!important}:host([type=color]) input{padding:.25rem}:host([type=file]) input{cursor:pointer;border-width:1px;border-style:dashed;background-color:var(--calcite-color-foreground-1);text-align:center;border-color:var(--calcite-input-border-color, var(--calcite-color-border-input));block-size:initial}:host([type=file][scale=s]) input{padding-block:1px;padding-inline:.5rem}:host([type=file][scale=m]) input{padding-block:.25rem;padding-inline:.75rem}:host([type=file][scale=l]) input{padding-block:.5rem;padding-inline:1rem}:host(.no-bottom-border) input{border-block-end-width:0px}:host(.border-top-color-one) input{border-block-start-color:var(--calcite-color-border-1)}input.inline-child{background-color:transparent;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out}input.inline-child .editing-enabled{background-color:inherit}input.inline-child:not(.editing-enabled){display:flex;cursor:pointer;text-overflow:ellipsis;border-color:transparent;padding-inline-start:0}:host([type=datetime-local]) .element-wrapper{inline-size:100%}:host([type=datetime-local]) .element-wrapper input{display:inline-block;min-inline-size:0}.internal-label-alignment--center{align-items:center}.internal-label-alignment--end{align-items:end}.internal-label--container{display:flex;justify-content:space-between;color:var(--calcite-color-text-1)}.internal-label-required--indicator{font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-status-danger);padding-inline:var(--calcite-spacing-base)}.internal-label-required--indicator:hover{cursor:help}.internal-label--text{line-height:1}:host([scale=s]) .internal-label-spacing--bottom{margin-block-end:var(--calcite-spacing-xxs)}:host([scale=s]) .internal-label-spacing-inline--end{margin-inline-end:var(--calcite-spacing-sm)}:host([scale=s]) .internal-label-spacing-inline--start{margin-inline-start:var(--calcite-spacing-sm)}:host([scale=s]) .internal-label--text{font-size:var(--calcite-font-size--2)}:host([scale=m]) .internal-label-spacing--bottom{margin-block-end:var(--calcite-spacing-sm)}:host([scale=m]) .internal-label-spacing-inline--end{margin-inline-end:var(--calcite-spacing-sm)}:host([scale=m]) .internal-label-spacing-inline--start{margin-inline-start:var(--calcite-spacing-sm)}:host([scale=m]) .internal-label--text{font-size:var(--calcite-font-size--1)}:host([scale=l]) .internal-label-spacing--bottom{margin-block-end:var(--calcite-spacing-sm)}:host([scale=l]) .internal-label-spacing-inline--end{margin-inline-end:var(--calcite-spacing-md)}:host([scale=l]) .internal-label-spacing-inline--start{margin-inline-start:var(--calcite-spacing-md)}:host([scale=l]) .internal-label--text{font-size:var(--calcite-font-size-0)}.validation-container{display:flex;flex-direction:column;align-items:flex-start;align-self:stretch}:host([scale=m]) .validation-container,:host([scale=l]) .validation-container{padding-block-start:.5rem}:host([scale=s]) .validation-container{padding-block-start:.25rem}::slotted(input[slot=hidden-form-input]){margin:0!important;opacity:0!important;outline:none!important;padding:0!important;position:absolute!important;inset:0!important;transform:none!important;-webkit-appearance:none!important;z-index:-1!important}:host([hidden]){display:none}[hidden]{display:none}::placeholder{font-weight:var(--calcite-font-weight-normal);color:var(--calcite-input-placeholder-text-color, var(--calcite-color-text-3))}`,jN=class jN extends dt{constructor(){super(),this.actionWrapperRef=vi(),this.attributeWatch=Rhe(["autofocus","enterkeyhint","inputmode","spellcheck"],this.handleGlobalAttributesChanged),this.childRef=vi(),this.childElType="input",this.childNumberRef=vi(),this.inputWrapperRef=vi(),this.onHiddenFormInputInput=e=>{e.target.name===this.name&&this.setValue({value:e.target.value,origin:"direct"}),this.setFocus(),e.stopPropagation()},this.previousValueOrigin="initial",this.userChangedValue=!1,this._value="",this.messages=un(),this.focusSetter=dn()(this),this.slottedActionElDisabledInternally=!1,this.alignment="start",this.clearable=!1,this.disabled=!1,this.editingEnabled=!1,this.groupSeparator=!1,this.iconFlipRtl=!1,this.loading=!1,this.localeFormat=!1,this.multiple=!1,this.numberButtonType="vertical",this.readOnly=!1,this.required=!1,this.scale="m",this.status="idle",this.type="text",this.validity={valid:!1,badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valueMissing:!1},this.calciteInputChange=Re({cancelable:!1}),this.calciteInputInput=Re(),this.calciteInternalInputBlur=Re({cancelable:!1}),this.calciteInternalInputFocus=Re({cancelable:!1}),this.listen("click",this.clickHandler),this.listen("keydown",this.keyDownHandler)}get value(){return this._value}set value(e){const i=this._value;e!==i&&(this._value=e,this.valueWatcher(e,i),e&&this._value===""&&this.setValue({origin:"reset",value:i}))}async selectText(){var i;(i=(this.type==="number"?this.childNumberRef:this.childRef).value)==null||i.select()}async setFocus(e){return this.focusSetter(()=>this.type==="number"?this.childNumberRef.value:this.childRef.value,e)}connectedCallback(){super.connectedCallback(),this.inlineEditableEl=this.el.closest("calcite-inline-editable"),this.inlineEditableEl&&(this.editingEnabled=this.inlineEditableEl.editingEnabled||!1),nI(this),DJ(this),this.el.addEventListener(iG,this.onHiddenFormInputInput)}async load(){var e,i;this.childElType=this.type==="textarea"?"textarea":"input",this.maxString=(e=this.max)==null?void 0:e.toString(),this.minString=(i=this.min)==null?void 0:i.toString(),this.requestedIcon=Gw(Xue,this.icon,this.type),this.setPreviousEmittedValue(this.value),this.setPreviousValue(this.value),this.type==="number"&&(this.value==="Infinity"||this.value==="-Infinity"?(this.displayedValue=this.value,this.previousEmittedValue=this.value):(this.warnAboutInvalidNumberValue(this.value),this.setValue({origin:"connected",value:bm(this.value)?this.value:""})))}willUpdate(e){var i,r;e.has("max")&&(this.maxString=((i=this.max)==null?void 0:i.toString())||null),e.has("min")&&(this.minString=((r=this.min)==null?void 0:r.toString())||null),(e.has("icon")||e.has("type")&&(this.hasUpdated||this.type!=="text"))&&(this.requestedIcon=Gw(Xue,this.icon,this.type))}updated(){Vs(this)}disconnectedCallback(){super.disconnectedCallback(),W5(this),VJ(this),this.el.removeEventListener(iG,this.onHiddenFormInputInput)}get isClearable(){var e;return!this.isTextarea&&(this.clearable||this.type==="search")&&((e=this.value)==null?void 0:e.length)>0}get isTextarea(){return this.childElType==="textarea"}handleGlobalAttributesChanged(){this.requestUpdate()}valueWatcher(e,i){if(!this.userChangedValue){if(this.type==="number"&&(e==="Infinity"||e==="-Infinity")){this.displayedValue=e,this.previousEmittedValue=e;return}this.setValue({origin:"direct",previousValue:i,value:e==null||e==""?"":this.type==="number"?bm(e)?e:this.previousValue||"":e}),this.warnAboutInvalidNumberValue(e)}this.userChangedValue=!1}keyDownHandler(e){this.readOnly||this.disabled||e.defaultPrevented||(this.isClearable&&e.key==="Escape"&&(this.clearInputValue(e),e.preventDefault()),e.key==="Enter"&&NJ(this)&&e.preventDefault())}onLabelClick(){this.setFocus()}incrementOrDecrementNumberValue(e,i,r,n){const{value:s}=this;if(s==="Infinity"||s==="-Infinity")return;const a=e==="up"?1:-1,o=this.step==="any"?1:Math.abs(this.step||1),c=new Ww(s!==""?s:"0").add(`${o*a}`),h=()=>typeof r=="number"&&!isNaN(r)&&c.subtract(`${r}`).isNegative,m=()=>typeof i=="number"&&!isNaN(i)&&!c.subtract(`${i}`).isNegative,g=h()?`${r}`:m()?`${i}`:c.toString();this.setValue({committing:!0,nativeEvent:n,origin:"user",value:g})}clearInputValue(e){this.setValue({committing:!0,nativeEvent:e,origin:"user",value:""})}emitChangeIfUserModified(){this.previousValueOrigin==="user"&&this.value!==this.previousEmittedValue&&(this.calciteInputChange.emit(),this.setPreviousEmittedValue(this.value))}inputBlurHandler(){window.clearInterval(this.nudgeNumberValueIntervalId),this.calciteInternalInputBlur.emit(),this.emitChangeIfUserModified()}clickHandler(e){if(this.disabled)return;const i=e.composedPath();!i.includes(this.inputWrapperRef.value)||i.includes(this.actionWrapperRef.value)||this.setFocus()}inputFocusHandler(){this.calciteInternalInputFocus.emit()}inputInputHandler(e){this.disabled||this.readOnly||(this.type==="file"&&(this.files=this.childRef.value.files),this.setValue({nativeEvent:e,origin:"user",value:e.target.value}))}inputKeyDownHandler(e){this.disabled||this.readOnly||e.key==="Enter"&&this.emitChangeIfUserModified()}inputNumberInputHandler(e){if(this.disabled||this.readOnly||this.value==="Infinity"||this.value==="-Infinity")return;const i=e.target.value;$l.numberFormatOptions={locale:this.messages._lang,numberingSystem:this.numberingSystem,useGrouping:this.groupSeparator};const r=$l.delocalize(i);e.inputType==="insertFromPaste"?(bm(r)||e.preventDefault(),this.setValue({nativeEvent:e,origin:"user",value:kke(r)}),this.childNumberRef.value.value=this.displayedValue):this.setValue({nativeEvent:e,origin:"user",value:r})}inputNumberKeyDownHandler(e){if(this.type!=="number"||this.disabled||this.readOnly)return;if(this.value==="Infinity"||this.value==="-Infinity"){e.preventDefault(),(e.key==="Backspace"||e.key==="Delete")&&this.clearInputValue(e);return}if(e.key==="ArrowUp"){e.preventDefault(),this.nudgeNumberValue("up",e);return}if(e.key==="ArrowDown"){this.nudgeNumberValue("down",e);return}const i=[...sD,"ArrowLeft","ArrowRight","Backspace","Delete","Enter","Escape","Tab"];if(e.altKey||e.ctrlKey||e.metaKey)return;const r=e.shiftKey&&e.key==="Tab";if(i.includes(e.key)||r){e.key==="Enter"&&this.emitChangeIfUserModified();return}$l.numberFormatOptions={locale:this.messages._lang,numberingSystem:this.numberingSystem,useGrouping:this.groupSeparator},!(e.key===$l.decimal&&(!this.value&&!this.childNumberRef.value.value||this.value&&this.childNumberRef.value.value.indexOf($l.decimal)===-1))&&(/[eE]/.test(e.key)&&(!this.value&&!this.childNumberRef.value.value||this.value&&!/[eE]/.test(this.childNumberRef.value.value))||e.key==="-"&&(!this.value&&!this.childNumberRef.value.value||this.value&&this.childNumberRef.value.value.split("-").length<=2)||e.preventDefault())}nudgeNumberValue(e,i){if(i instanceof KeyboardEvent&&i.repeat||this.type!=="number")return;const r=this.maxString?parseFloat(this.maxString):null,n=this.minString?parseFloat(this.minString):null,s=150;this.incrementOrDecrementNumberValue(e,r,n,i),this.nudgeNumberValueIntervalId&&window.clearInterval(this.nudgeNumberValueIntervalId);let a=!0;this.nudgeNumberValueIntervalId=window.setInterval(()=>{if(a){a=!1;return}this.incrementOrDecrementNumberValue(e,r,n,i)},s)}numberButtonPointerUpAndOutHandler(){window.clearInterval(this.nudgeNumberValueIntervalId)}numberButtonPointerDownHandler(e){if(!n2(e))return;e.preventDefault();const i=e.target.dataset.adjustment;this.disabled||this.nudgeNumberValue(i,e)}syncHiddenFormInput(e){yvt(this.type,this,e)}setInputValue(e){const i=this.type==="number"?this.childNumberRef:this.childRef;i.value&&(i.value.value=e)}setPreviousEmittedValue(e){this.previousEmittedValue=this.normalizeValue(e)}normalizeValue(e){return this.type==="number"?bm(e)?e:"":e}setPreviousValue(e){this.previousValue=this.normalizeValue(e)}setValue({committing:e=!1,nativeEvent:i,origin:r,previousValue:n,value:s}){var a,o;if(this.setPreviousValue(n??this.value),this.previousValueOrigin=r,this.type==="number"){$l.numberFormatOptions={locale:this.messages._lang,numberingSystem:this.numberingSystem,useGrouping:this.groupSeparator,signDisplay:"never"};const l=((a=this.previousValue)==null?void 0:a.length)>s.length||((o=this.value)==null?void 0:o.length)>s.length,c=s.charAt(s.length-1)===".",h=c&&l?s:Rke(s),m=s&&!h?bm(this.previousValue)?this.previousValue:"":h;let g=$l.localize(m);r!=="connected"&&!c&&(g=jke(g,m,$l)),this.displayedValue=c&&l?`${g}${$l.decimal}`:g,this.userChangedValue=r==="user"&&this.value!==m,this.value=["-","."].includes(m)?"":m}else this.userChangedValue=r==="user"&&this.value!==s,this.value=s;r==="direct"&&(this.setInputValue(s),this.previousEmittedValue=s),i&&(this.calciteInputInput.emit().defaultPrevented?(this.value=this.previousValue,this.displayedValue=this.type==="number"?$l.localize(this.previousValue):this.previousValue):e&&this.emitChangeIfUserModified())}inputKeyUpHandler(){window.clearInterval(this.nudgeNumberValueIntervalId)}warnAboutInvalidNumberValue(e){this.type==="number"&&e&&!bm(e)&&console.warn(`The specified value "${e}" cannot be parsed, or is out of range.`)}render(){const e=Uo(this.el),i=q`<div class=${H(Sa.loader)}><calcite-progress .label=${this.messages.loading} type=indeterminate></calcite-progress></div>`,r=q`<button .ariaLabel=${this.messages.clear} class=${H(Sa.clearButton)} .disabled=${this.disabled||this.readOnly} @click=${this.clearInputValue} tabindex=-1 title=${this.messages.clear??Xe} type=button><calcite-icon .icon=${pB.close} .scale=${gr(this.scale)}></calcite-icon></button>`,n=q`<calcite-icon class=${H(Sa.inputIcon)} .flipRtl=${this.iconFlipRtl} .icon=${this.requestedIcon} .scale=${gr(this.scale)}></calcite-icon>`,s=this.numberButtonType==="horizontal",a=q`<button aria-hidden=true class=${H({[Sa.numberButtonItem]:!0,[Sa.buttonItemHorizontal]:s})} data-adjustment=${Que.up} .disabled=${this.disabled||this.readOnly} @pointerdown=${this.numberButtonPointerDownHandler} @pointerout=${this.numberButtonPointerUpAndOutHandler} @pointerup=${this.numberButtonPointerUpAndOutHandler} tabindex=-1 type=button><calcite-icon .icon=${pB.chevronUp} .scale=${gr(this.scale)}></calcite-icon></button>`,o=q`<button aria-hidden=true class=${H({[Sa.numberButtonItem]:!0,[Sa.buttonItemHorizontal]:s})} data-adjustment=${Que.down} .disabled=${this.disabled||this.readOnly} @pointerdown=${this.numberButtonPointerDownHandler} @pointerout=${this.numberButtonPointerUpAndOutHandler} @pointerup=${this.numberButtonPointerUpAndOutHandler} tabindex=-1 type=button><calcite-icon .icon=${pB.chevronDown} .scale=${gr(this.scale)}></calcite-icon></button>`,l=q`<div class=${H(Sa.numberButtonWrapper)}>${a}${o}</div>`,c=q`<div class=${H(Sa.prefix)}>${this.prefixText}</div>`,h=q`<div class=${H(Sa.suffix)}>${this.suffixText}</div>`,m=this.el.autofocus,g=this.el.enterKeyHint,v=this.el.inputMode,b=this.type==="number"?nt("localized-input",q`<input accept=${this.accept??Xe} aria-errormessage=${hB.validationMessage} .ariaInvalid=${this.status==="invalid"} .ariaLabel=${ZE(this)} autocomplete=${this.autocomplete??Xe} .autofocus=${m} value=${this.defaultValue??Xe} .disabled=${this.disabled?!0:null} enterkeyhint=${g??Xe} inputmode=${v??Xe} maxlength=${this.maxLength??Xe} minlength=${this.minLength??Xe} .multiple=${this.multiple} name=${Xe} @blur=${this.inputBlurHandler} @focus=${this.inputFocusHandler} @input=${this.inputNumberInputHandler} @keydown=${this.inputNumberKeyDownHandler} @keyup=${this.inputKeyUpHandler} pattern=${this.pattern??Xe} placeholder=${(this.placeholder||"")??Xe} .readOnly=${this.readOnly} .required=${this.required} type=text .value=${bte(this.displayedValue??"")} ${gt(this.childNumberRef)}>`):null,x=this.childElType==="input"?Zw`input`:Zw`textarea`,$=this.type!=="number"?xk`<${x} accept=${this.accept??Xe} aria-errormessage=${hB.validationMessage} .ariaInvalid=${this.status==="invalid"} .ariaLabel=${ZE(this)} autocomplete=${this.autocomplete??Xe} .autofocus=${m} class=${H({[Sa.editingEnabled]:this.editingEnabled,[Sa.inlineChild]:!!this.inlineEditableEl})} .defaultValue=${this.defaultValue??""} .disabled=${this.disabled?!0:null} enterkeyhint=${g??Xe} inputmode=${v??Xe} max=${this.maxString??Xe} maxlength=${this.maxLength??Xe} min=${this.minString??Xe} minlength=${this.minLength??Xe} .multiple=${this.multiple} name=${this.name??Xe} @blur=${this.inputBlurHandler} @focus=${this.inputFocusHandler} @input=${this.inputInputHandler} @keydown=${this.inputKeyDownHandler} @keyup=${this.inputKeyUpHandler} pattern=${this.pattern??Xe} placeholder=${(this.placeholder||"")??Xe} .readOnly=${this.readOnly} .required=${this.required?!0:null} spellcheck=${this.el.spellcheck??Xe} step=${this.step??Xe} tabindex=${(this.disabled||this.inlineEditableEl&&!this.editingEnabled?-1:null)??Xe} type=${this.type??Xe} .value=${bte(this.value??"")} ${gt(this.childRef)}></${x}>`:null;return Us({disabled:this.disabled,children:q`${this.labelText&&QJ({labelText:this.labelText,onClick:this.onLabelClick,required:this.required,tooltipText:this.messages.required})||""}<div class=${H({[Sa.inputWrapper]:!0,[Uh.rtl]:e==="rtl",[Sa.hasSuffix]:this.suffixText,[Sa.hasPrefix]:this.prefixText})} ${gt(this.inputWrapperRef)}>${this.type==="number"&&this.numberButtonType==="horizontal"&&!this.readOnly?o:null}${this.prefixText?c:null}<div class=${H(Sa.wrapper)}>${b}${$}${this.isClearable?r:null}${this.requestedIcon?n:null}${this.loading?i:null}</div><div class=${H(Sa.actionWrapper)} ${gt(this.actionWrapperRef)}><slot name=${vvt.action}></slot></div>${this.type==="number"&&this.numberButtonType==="vertical"&&!this.readOnly?l:null}${this.suffixText?h:null}${this.type==="number"&&this.numberButtonType==="horizontal"&&!this.readOnly?a:null}${UJ({component:this})}</div>${this.validationMessage&&this.status==="invalid"?KJ({icon:this.validationIcon,id:hB.validationMessage,message:this.validationMessage,scale:this.scale,status:this.status}):null}`})}};jN.properties={displayedValue:[16,{},{state:!0}],slottedActionElDisabledInternally:[16,{},{state:!0}],accept:1,alignment:[3,{},{reflect:!0}],autocomplete:[0,{},{attribute:!1}],clearable:[7,{},{reflect:!0,type:Boolean}],disabled:[7,{},{reflect:!0,type:Boolean}],editingEnabled:[7,{},{reflect:!0,type:Boolean}],files:[0,{},{attribute:!1}],form:[3,{},{reflect:!0}],groupSeparator:[7,{},{reflect:!0,type:Boolean}],icon:[3,{converter:Hm},{reflect:!0}],iconFlipRtl:[7,{},{reflect:!0,type:Boolean}],label:1,labelText:1,loading:[7,{},{reflect:!0,type:Boolean}],localeFormat:[5,{},{type:Boolean}],max:[11,{},{reflect:!0,type:Number}],maxLength:[11,{},{reflect:!0,type:Number}],messageOverrides:[0,{},{attribute:!1}],min:[11,{},{reflect:!0,type:Number}],minLength:[11,{},{reflect:!0,type:Number}],multiple:[5,{},{type:Boolean}],name:[3,{},{reflect:!0}],numberButtonType:[3,{},{reflect:!0}],numberingSystem:[3,{},{reflect:!0}],pattern:1,placeholder:1,prefixText:1,readOnly:[7,{},{reflect:!0,type:Boolean}],required:[7,{},{reflect:!0,type:Boolean}],scale:[3,{},{reflect:!0}],status:[3,{},{reflect:!0}],step:[3,{},{reflect:!0}],suffixText:1,type:[3,{},{reflect:!0}],validationIcon:[3,{converter:Hm},{reflect:!0}],validationMessage:1,validity:[0,{},{attribute:!1}],value:1},jN.styles=bvt;let Yz=jN;ci("calcite-input",Yz);const x3t=Object.freeze(Object.defineProperty({__proto__:null,Input:Yz},Symbol.toStringTag,{value:"Module"}));function HIe(t){if(t==null)return"";if(typeof t=="string")return t;if(Array.isArray(t))return t.map(HIe).join(",");const e=String(t);return e==="0"&&Object.is(Number(t),-0)?"-0":e}function wvt(t,e=vct){if(t==null)return t;for(const i in t)if(e(t[i],i,t)===!1)break;return t}function _vt(t){return bct(HIe(t))}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const fB=(t,e,i)=>{const r=_vt(e),n=new RegExp(r,"i");t.length===0&&console.warn(`No data was passed to the filter function.
    The data argument should be an array of objects`);const s=(a,o,l)=>{if(a!=null&&a.constant||a!=null&&a.filterDisabled)return!0;let c=!1;return wvt(a,(h,m)=>{typeof h=="function"||h==null||l&&!l.includes(m)||(Array.isArray(h)||typeof h=="object"&&h!==null?s(h,o)&&(c=!0):o.test(h)&&(c=!0))}),c};return t.filter(a=>s(a,n,i))};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const xvt={container:"container"},$vt={search:"search"},Svt=ct`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex;inline-size:100%}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}.container{display:flex;inline-size:100%}:host([scale=s]) .container{padding:var(--calcite-filter-content-space, var(--calcite-spacing-sm))}:host([scale=m]) .container{padding:var(--calcite-filter-content-space, var(--calcite-spacing-md))}:host([scale=l]) .container{padding:var(--calcite-filter-content-space, var(--calcite-spacing-lg))}label{position:relative;margin-block:0px;display:flex;inline-size:100%;align-items:center;overflow:hidden}calcite-input{inline-size:100%;--calcite-input-background-color: var(--calcite-filter-input-background-color);--calcite-input-border-color: var(--calcite-filter-input-border-color);--calcite-input-corner-radius: var(--calcite-filter-input-corner-radius);--calcite-input-shadow: var(--calcite-filter-input-shadow);--calcite-input-icon-color: var(--calcite-filter-input-icon-color);--calcite-input-text-color: var(--calcite-filter-input-text-color);--calcite-input-placeholder-text-color: var(--calcite-filter-input-placeholder-text-color);--calcite-input-actions-background-color: var(--calcite-filter-input-actions-background-color);--calcite-input-actions-background-color-hover: var(--calcite-filter-input-actions-background-color-hover);--calcite-input-actions-background-color-press: var(--calcite-filter-input-actions-background-color-press);--calcite-input-actions-icon-color: var(--calcite-filter-input-actions-icon-color);--calcite-input-actions-icon-color-hover: var(--calcite-filter-input-actions-icon-color-hover);--calcite-input-actions-icon-color-press: var(--calcite-filter-input-actions-icon-color-press)}:host([hidden]){display:none}[hidden]{display:none}`,rE=class rE extends dt{constructor(){super(...arguments),this.cancelable=XJ()(this),this.filterDebounced=B5((e,i=!1,r)=>this.updateFiltered(fB(this.items??[],e,this.filterProps),i,r),nD.filter),this.textInput=vi(),this._value="",this.messages=un(),this.focusSetter=dn()(this),this.disabled=!1,this.filteredItems=[],this.items=[],this.scale="m",this.calciteFilterChange=Re({cancelable:!1})}get value(){return this._value}set value(e){const i=this._value;e!==i&&(this._value=e,this.valueHandler(e))}async filter(e=this.value){return new Promise(i=>{this.value=e,this.updateFiltered(fB(this.items??[],e,this.filterProps),!1,i)})}async setFocus(e){return this.focusSetter(()=>this.textInput.value,e)}connectedCallback(){super.connectedCallback(),this.cancelable.add(this.filterDebounced)}async load(){this.updateFiltered(fB(this.items??[],this.value,this.filterProps))}willUpdate(e){var i;(e.has("items")&&(this.hasUpdated||((i=this.items)==null?void 0:i.length)>0)||e.has("filterProps"))&&this.filterDebounced(this.value)}updated(){Vs(this)}valueHandler(e){this.filterDebounced(e)}inputHandler(e){const i=e.target;this.value=i.value,this.filterDebounced(i.value,!0)}keyDownHandler(e){e.defaultPrevented||(e.key==="Escape"&&(this.clear(),e.preventDefault()),e.key==="Enter"&&e.preventDefault())}clear(){this.value="",this.filterDebounced("",!0),this.setFocus()}updateFiltered(e,i=!1,r){this.filteredItems=e,i&&this.calciteFilterChange.emit(),r==null||r()}render(){const{disabled:e,scale:i}=this;return Us({disabled:e,children:q`<div class=${H(xvt.container)}><label><calcite-input clearable .disabled=${e} .icon=${$vt.search} .label=${this.label??this.messages.label} .messageOverrides=${{clear:this.messages.clear}} @keydown=${this.keyDownHandler} @calciteInputInput=${this.inputHandler} .placeholder=${this.placeholder} .scale=${i} type=text .value=${this.value} ${gt(this.textInput)}></calcite-input></label></div>`})}};rE.properties={disabled:[7,{},{reflect:!0,type:Boolean}],filterProps:[0,{},{attribute:!1}],filteredItems:[0,{},{attribute:!1}],items:[0,{},{attribute:!1}],label:1,messageOverrides:[0,{},{attribute:!1}],placeholder:1,scale:[3,{},{reflect:!0}],value:1},rE.shadowRootOptions={mode:"open",delegatesFocus:!0},rE.styles=Svt;let HG=rE;ci("calcite-filter",HG);/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Kue(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),i.push.apply(i,r)}return i}function Hp(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?Kue(Object(i),!0).forEach(function(r){Tvt(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Kue(Object(i)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))})}return t}function MF(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?MF=function(e){return typeof e}:MF=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},MF(t)}function Tvt(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function eg(){return eg=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},eg.apply(this,arguments)}function Ivt(t,e){if(t==null)return{};var i={},r=Object.keys(t),n,s;for(s=0;s<r.length;s++)n=r[s],!(e.indexOf(n)>=0)&&(i[n]=t[n]);return i}function Mvt(t,e){if(t==null)return{};var i=Ivt(t,e),r,n;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}var Cvt="1.15.6";function qm(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var dg=qm(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),cA=qm(/Edge/i),ede=qm(/firefox/i),G2=qm(/safari/i)&&!qm(/chrome/i)&&!qm(/android/i),PX=qm(/iP(ad|od|hone)/i),GIe=qm(/chrome/i)&&qm(/android/i),WIe={capture:!1,passive:!1};function zi(t,e,i){t.addEventListener(e,i,!dg&&WIe)}function Fi(t,e,i){t.removeEventListener(e,i,!dg&&WIe)}function Jz(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function ZIe(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function xd(t,e,i,r){if(t){i=i||document;do{if(e!=null&&(e[0]===">"?t.parentNode===i&&Jz(t,e):Jz(t,e))||r&&t===i)return t;if(t===i)break}while(t=ZIe(t))}return null}var tde=/\s+/g;function uc(t,e,i){if(t&&e)if(t.classList)t.classList[i?"add":"remove"](e);else{var r=(" "+t.className+" ").replace(tde," ").replace(" "+e+" "," ");t.className=(r+(i?" "+e:"")).replace(tde," ")}}function Xt(t,e,i){var r=t&&t.style;if(r){if(i===void 0)return document.defaultView&&document.defaultView.getComputedStyle?i=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(i=t.currentStyle),e===void 0?i:i[e];!(e in r)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),r[e]=i+(typeof i=="string"?"":"px")}}function iS(t,e){var i="";if(typeof t=="string")i=t;else do{var r=Xt(t,"transform");r&&r!=="none"&&(i=r+" "+i)}while(!e&&(t=t.parentNode));var n=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return n&&new n(i)}function YIe(t,e,i){if(t){var r=t.getElementsByTagName(e),n=0,s=r.length;if(i)for(;n<s;n++)i(r[n],n);return r}return[]}function Lp(){var t=document.scrollingElement;return t||document.documentElement}function $s(t,e,i,r,n){if(!(!t.getBoundingClientRect&&t!==window)){var s,a,o,l,c,h,m;if(t!==window&&t.parentNode&&t!==Lp()?(s=t.getBoundingClientRect(),a=s.top,o=s.left,l=s.bottom,c=s.right,h=s.height,m=s.width):(a=0,o=0,l=window.innerHeight,c=window.innerWidth,h=window.innerHeight,m=window.innerWidth),(e||i)&&t!==window&&(n=n||t.parentNode,!dg))do if(n&&n.getBoundingClientRect&&(Xt(n,"transform")!=="none"||i&&Xt(n,"position")!=="static")){var g=n.getBoundingClientRect();a-=g.top+parseInt(Xt(n,"border-top-width")),o-=g.left+parseInt(Xt(n,"border-left-width")),l=a+s.height,c=o+s.width;break}while(n=n.parentNode);if(r&&t!==window){var v=iS(n||t),b=v&&v.a,x=v&&v.d;v&&(a/=x,o/=b,m/=b,h/=x,l=a+h,c=o+m)}return{top:a,left:o,bottom:l,right:c,width:m,height:h}}}function ide(t,e,i){for(var r=pv(t,!0),n=$s(t)[e];r;){var s=$s(r)[i],a=void 0;if(a=n>=s,!a)return r;if(r===Lp())break;r=pv(r,!1)}return!1}function bT(t,e,i,r){for(var n=0,s=0,a=t.children;s<a.length;){if(a[s].style.display!=="none"&&a[s]!==Qt.ghost&&(r||a[s]!==Qt.dragged)&&xd(a[s],i.draggable,t,!1)){if(n===e)return a[s];n++}s++}return null}function OX(t,e){for(var i=t.lastElementChild;i&&(i===Qt.ghost||Xt(i,"display")==="none"||e&&!Jz(i,e));)i=i.previousElementSibling;return i||null}function su(t,e){var i=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==Qt.clone&&(!e||Jz(t,e))&&i++;return i}function rde(t){var e=0,i=0,r=Lp();if(t)do{var n=iS(t),s=n.a,a=n.d;e+=t.scrollLeft*s,i+=t.scrollTop*a}while(t!==r&&(t=t.parentNode));return[e,i]}function Evt(t,e){for(var i in t)if(t.hasOwnProperty(i)){for(var r in e)if(e.hasOwnProperty(r)&&e[r]===t[i][r])return Number(i)}return-1}function pv(t,e){if(!t||!t.getBoundingClientRect)return Lp();var i=t,r=!1;do if(i.clientWidth<i.scrollWidth||i.clientHeight<i.scrollHeight){var n=Xt(i);if(i.clientWidth<i.scrollWidth&&(n.overflowX=="auto"||n.overflowX=="scroll")||i.clientHeight<i.scrollHeight&&(n.overflowY=="auto"||n.overflowY=="scroll")){if(!i.getBoundingClientRect||i===document.body)return Lp();if(r||e)return i;r=!0}}while(i=i.parentNode);return Lp()}function kvt(t,e){if(t&&e)for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function mB(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var W2;function JIe(t,e){return function(){if(!W2){var i=arguments,r=this;i.length===1?t.call(r,i[0]):t.apply(r,i),W2=setTimeout(function(){W2=void 0},e)}}}function Avt(){clearTimeout(W2),W2=void 0}function XIe(t,e,i){t.scrollLeft+=e,t.scrollTop+=i}function QIe(t){var e=window.Polymer,i=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):i?i(t).clone(!0)[0]:t.cloneNode(!0)}function KIe(t,e,i){var r={};return Array.from(t.children).forEach(function(n){var s,a,o,l;if(!(!xd(n,e.draggable,t,!1)||n.animated||n===i)){var c=$s(n);r.left=Math.min((s=r.left)!==null&&s!==void 0?s:1/0,c.left),r.top=Math.min((a=r.top)!==null&&a!==void 0?a:1/0,c.top),r.right=Math.max((o=r.right)!==null&&o!==void 0?o:-1/0,c.right),r.bottom=Math.max((l=r.bottom)!==null&&l!==void 0?l:-1/0,c.bottom)}}),r.width=r.right-r.left,r.height=r.bottom-r.top,r.x=r.left,r.y=r.top,r}var kl="Sortable"+new Date().getTime();function Pvt(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(n){if(!(Xt(n,"display")==="none"||n===Qt.ghost)){t.push({target:n,rect:$s(n)});var s=Hp({},t[t.length-1].rect);if(n.thisAnimationDuration){var a=iS(n,!0);a&&(s.top-=a.f,s.left-=a.e)}n.fromRect=s}})}},addAnimationState:function(r){t.push(r)},removeAnimationState:function(r){t.splice(Evt(t,{target:r}),1)},animateAll:function(r){var n=this;if(!this.options.animation){clearTimeout(e),typeof r=="function"&&r();return}var s=!1,a=0;t.forEach(function(o){var l=0,c=o.target,h=c.fromRect,m=$s(c),g=c.prevFromRect,v=c.prevToRect,b=o.rect,x=iS(c,!0);x&&(m.top-=x.f,m.left-=x.e),c.toRect=m,c.thisAnimationDuration&&mB(g,m)&&!mB(h,m)&&(b.top-m.top)/(b.left-m.left)===(h.top-m.top)/(h.left-m.left)&&(l=Lvt(b,g,v,n.options)),mB(m,h)||(c.prevFromRect=h,c.prevToRect=m,l||(l=n.options.animation),n.animate(c,b,m,l)),l&&(s=!0,a=Math.max(a,l),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},l),c.thisAnimationDuration=l)}),clearTimeout(e),s?e=setTimeout(function(){typeof r=="function"&&r()},a):typeof r=="function"&&r(),t=[]},animate:function(r,n,s,a){if(a){Xt(r,"transition",""),Xt(r,"transform","");var o=iS(this.el),l=o&&o.a,c=o&&o.d,h=(n.left-s.left)/(l||1),m=(n.top-s.top)/(c||1);r.animatingX=!!h,r.animatingY=!!m,Xt(r,"transform","translate3d("+h+"px,"+m+"px,0)"),this.forRepaintDummy=Ovt(r),Xt(r,"transition","transform "+a+"ms"+(this.options.easing?" "+this.options.easing:"")),Xt(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){Xt(r,"transition",""),Xt(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},a)}}}}function Ovt(t){return t.offsetWidth}function Lvt(t,e,i,r){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-i.top,2)+Math.pow(e.left-i.left,2))*r.animation}var tx=[],gB={initializeByDefault:!0},uA={mount:function(e){for(var i in gB)gB.hasOwnProperty(i)&&!(i in e)&&(e[i]=gB[i]);tx.forEach(function(r){if(r.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),tx.push(e)},pluginEvent:function(e,i,r){var n=this;this.eventCanceled=!1,r.cancel=function(){n.eventCanceled=!0};var s=e+"Global";tx.forEach(function(a){i[a.pluginName]&&(i[a.pluginName][s]&&i[a.pluginName][s](Hp({sortable:i},r)),i.options[a.pluginName]&&i[a.pluginName][e]&&i[a.pluginName][e](Hp({sortable:i},r)))})},initializePlugins:function(e,i,r,n){tx.forEach(function(o){var l=o.pluginName;if(!(!e.options[l]&&!o.initializeByDefault)){var c=new o(e,i,e.options);c.sortable=e,c.options=e.options,e[l]=c,eg(r,c.defaults)}});for(var s in e.options)if(e.options.hasOwnProperty(s)){var a=this.modifyOption(e,s,e.options[s]);typeof a<"u"&&(e.options[s]=a)}},getEventProperties:function(e,i){var r={};return tx.forEach(function(n){typeof n.eventProperties=="function"&&eg(r,n.eventProperties.call(i[n.pluginName],e))}),r},modifyOption:function(e,i,r){var n;return tx.forEach(function(s){e[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[i]=="function"&&(n=s.optionListeners[i].call(e[s.pluginName],r))}),n}};function Fvt(t){var e=t.sortable,i=t.rootEl,r=t.name,n=t.targetEl,s=t.cloneEl,a=t.toEl,o=t.fromEl,l=t.oldIndex,c=t.newIndex,h=t.oldDraggableIndex,m=t.newDraggableIndex,g=t.originalEvent,v=t.putSortable,b=t.extraEventProperties;if(e=e||i&&i[kl],!!e){var x,$=e.options,M="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!dg&&!cA?x=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(x=document.createEvent("Event"),x.initEvent(r,!0,!0)),x.to=a||i,x.from=o||i,x.item=n||i,x.clone=s,x.oldIndex=l,x.newIndex=c,x.oldDraggableIndex=h,x.newDraggableIndex=m,x.originalEvent=g,x.pullMode=v?v.lastPutMode:void 0;var k=Hp(Hp({},b),uA.getEventProperties(r,e));for(var A in k)x[A]=k[A];i&&i.dispatchEvent(x),$[M]&&$[M].call(e,x)}}var Rvt=["evt"],sl=function(e,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=r.evt,s=Mvt(r,Rvt);uA.pluginEvent.bind(Qt)(e,i,Hp({dragEl:rt,parentEl:Ln,ghostEl:ai,rootEl:an,nextEl:T0,lastDownEl:CF,cloneEl:vn,cloneHidden:Zy,dragStarted:XC,putSortable:Ca,activeSortable:Qt.active,originalEvent:n,oldIndex:A$,oldDraggableIndex:Z2,newIndex:pc,newDraggableIndex:Vy,hideGhostForTarget:rMe,unhideGhostForTarget:nMe,cloneNowHidden:function(){Zy=!0},cloneNowShown:function(){Zy=!1},dispatchSortableEvent:function(o){Co({sortable:i,name:o,originalEvent:n})}},s))};function Co(t){Fvt(Hp({putSortable:Ca,cloneEl:vn,targetEl:rt,rootEl:an,oldIndex:A$,oldDraggableIndex:Z2,newIndex:pc,newDraggableIndex:Vy},t))}var rt,Ln,ai,an,T0,CF,vn,Zy,A$,pc,Z2,Vy,T3,Ca,d$=!1,Xz=!1,Qz=[],Vb,td,yB,vB,nde,sde,XC,ix,Y2,J2=!1,I3=!1,EF,Wa,bB=[],GG=!1,Kz=[],tj=typeof document<"u",M3=PX,ade=cA||dg?"cssFloat":"float",zvt=tj&&!GIe&&!PX&&"draggable"in document.createElement("div"),eMe=(function(){if(tj){if(dg)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}})(),tMe=function(e,i){var r=Xt(e),n=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),s=bT(e,0,i),a=bT(e,1,i),o=s&&Xt(s),l=a&&Xt(a),c=o&&parseInt(o.marginLeft)+parseInt(o.marginRight)+$s(s).width,h=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+$s(a).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&o.float&&o.float!=="none"){var m=o.float==="left"?"left":"right";return a&&(l.clear==="both"||l.clear===m)?"vertical":"horizontal"}return s&&(o.display==="block"||o.display==="flex"||o.display==="table"||o.display==="grid"||c>=n&&r[ade]==="none"||a&&r[ade]==="none"&&c+h>n)?"vertical":"horizontal"},Nvt=function(e,i,r){var n=r?e.left:e.top,s=r?e.right:e.bottom,a=r?e.width:e.height,o=r?i.left:i.top,l=r?i.right:i.bottom,c=r?i.width:i.height;return n===o||s===l||n+a/2===o+c/2},Dvt=function(e,i){var r;return Qz.some(function(n){var s=n[kl].options.emptyInsertThreshold;if(!(!s||OX(n))){var a=$s(n),o=e>=a.left-s&&e<=a.right+s,l=i>=a.top-s&&i<=a.bottom+s;if(o&&l)return r=n}}),r},iMe=function(e){function i(s,a){return function(o,l,c,h){var m=o.options.group.name&&l.options.group.name&&o.options.group.name===l.options.group.name;if(s==null&&(a||m))return!0;if(s==null||s===!1)return!1;if(a&&s==="clone")return s;if(typeof s=="function")return i(s(o,l,c,h),a)(o,l,c,h);var g=(a?o:l).options.group.name;return s===!0||typeof s=="string"&&s===g||s.join&&s.indexOf(g)>-1}}var r={},n=e.group;(!n||MF(n)!="object")&&(n={name:n}),r.name=n.name,r.checkPull=i(n.pull,!0),r.checkPut=i(n.put),r.revertClone=n.revertClone,e.group=r},rMe=function(){!eMe&&ai&&Xt(ai,"display","none")},nMe=function(){!eMe&&ai&&Xt(ai,"display","")};tj&&!GIe&&document.addEventListener("click",function(t){if(Xz)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),Xz=!1,!1},!0);var Ub=function(e){if(rt){e=e.touches?e.touches[0]:e;var i=Dvt(e.clientX,e.clientY);if(i){var r={};for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);r.target=r.rootEl=i,r.preventDefault=void 0,r.stopPropagation=void 0,i[kl]._onDragOver(r)}}},jvt=function(e){rt&&rt.parentNode[kl]._isOutsideThisEl(e.target)};function Qt(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=eg({},e),t[kl]=this;var i={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return tMe(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(a,o){a.setData("Text",o.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Qt.supportPointer!==!1&&"PointerEvent"in window&&(!G2||PX),emptyInsertThreshold:5};uA.initializePlugins(this,t,i);for(var r in i)!(r in e)&&(e[r]=i[r]);iMe(e);for(var n in this)n.charAt(0)==="_"&&typeof this[n]=="function"&&(this[n]=this[n].bind(this));this.nativeDraggable=e.forceFallback?!1:zvt,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?zi(t,"pointerdown",this._onTapStart):(zi(t,"mousedown",this._onTapStart),zi(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(zi(t,"dragover",this),zi(t,"dragenter",this)),Qz.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),eg(this,Pvt())}Qt.prototype={constructor:Qt,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(ix=null)},_getDirection:function(e,i){return typeof this.options.direction=="function"?this.options.direction.call(this,e,i,rt):this.options.direction},_onTapStart:function(e){if(e.cancelable){var i=this,r=this.el,n=this.options,s=n.preventOnFilter,a=e.type,o=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,l=(o||e).target,c=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,h=n.filter;if(Zvt(r),!rt&&!(/mousedown|pointerdown/.test(a)&&e.button!==0||n.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&G2&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=xd(l,n.draggable,r,!1),!(l&&l.animated)&&CF!==l)){if(A$=su(l),Z2=su(l,n.draggable),typeof h=="function"){if(h.call(this,e,l,this)){Co({sortable:i,rootEl:c,name:"filter",targetEl:l,toEl:r,fromEl:r}),sl("filter",i,{evt:e}),s&&e.preventDefault();return}}else if(h&&(h=h.split(",").some(function(m){if(m=xd(c,m.trim(),r,!1),m)return Co({sortable:i,rootEl:m,name:"filter",targetEl:l,fromEl:r,toEl:r}),sl("filter",i,{evt:e}),!0}),h)){s&&e.preventDefault();return}n.handle&&!xd(c,n.handle,r,!1)||this._prepareDragStart(e,o,l)}}},_prepareDragStart:function(e,i,r){var n=this,s=n.el,a=n.options,o=s.ownerDocument,l;if(r&&!rt&&r.parentNode===s){var c=$s(r);if(an=s,rt=r,Ln=rt.parentNode,T0=rt.nextSibling,CF=r,T3=a.group,Qt.dragged=rt,Vb={target:rt,clientX:(i||e).clientX,clientY:(i||e).clientY},nde=Vb.clientX-c.left,sde=Vb.clientY-c.top,this._lastX=(i||e).clientX,this._lastY=(i||e).clientY,rt.style["will-change"]="all",l=function(){if(sl("delayEnded",n,{evt:e}),Qt.eventCanceled){n._onDrop();return}n._disableDelayedDragEvents(),!ede&&n.nativeDraggable&&(rt.draggable=!0),n._triggerDragStart(e,i),Co({sortable:n,name:"choose",originalEvent:e}),uc(rt,a.chosenClass,!0)},a.ignore.split(",").forEach(function(h){YIe(rt,h.trim(),wB)}),zi(o,"dragover",Ub),zi(o,"mousemove",Ub),zi(o,"touchmove",Ub),a.supportPointer?(zi(o,"pointerup",n._onDrop),!this.nativeDraggable&&zi(o,"pointercancel",n._onDrop)):(zi(o,"mouseup",n._onDrop),zi(o,"touchend",n._onDrop),zi(o,"touchcancel",n._onDrop)),ede&&this.nativeDraggable&&(this.options.touchStartThreshold=4,rt.draggable=!0),sl("delayStart",this,{evt:e}),a.delay&&(!a.delayOnTouchOnly||i)&&(!this.nativeDraggable||!(cA||dg))){if(Qt.eventCanceled){this._onDrop();return}a.supportPointer?(zi(o,"pointerup",n._disableDelayedDrag),zi(o,"pointercancel",n._disableDelayedDrag)):(zi(o,"mouseup",n._disableDelayedDrag),zi(o,"touchend",n._disableDelayedDrag),zi(o,"touchcancel",n._disableDelayedDrag)),zi(o,"mousemove",n._delayedDragTouchMoveHandler),zi(o,"touchmove",n._delayedDragTouchMoveHandler),a.supportPointer&&zi(o,"pointermove",n._delayedDragTouchMoveHandler),n._dragStartTimer=setTimeout(l,a.delay)}else l()}},_delayedDragTouchMoveHandler:function(e){var i=e.touches?e.touches[0]:e;Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){rt&&wB(rt),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;Fi(e,"mouseup",this._disableDelayedDrag),Fi(e,"touchend",this._disableDelayedDrag),Fi(e,"touchcancel",this._disableDelayedDrag),Fi(e,"pointerup",this._disableDelayedDrag),Fi(e,"pointercancel",this._disableDelayedDrag),Fi(e,"mousemove",this._delayedDragTouchMoveHandler),Fi(e,"touchmove",this._delayedDragTouchMoveHandler),Fi(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,i){i=i||e.pointerType=="touch"&&e,!this.nativeDraggable||i?this.options.supportPointer?zi(document,"pointermove",this._onTouchMove):i?zi(document,"touchmove",this._onTouchMove):zi(document,"mousemove",this._onTouchMove):(zi(rt,"dragend",this),zi(an,"dragstart",this._onDragStart));try{document.selection?kF(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,i){if(d$=!1,an&&rt){sl("dragStarted",this,{evt:i}),this.nativeDraggable&&zi(document,"dragover",jvt);var r=this.options;!e&&uc(rt,r.dragClass,!1),uc(rt,r.ghostClass,!0),Qt.active=this,e&&this._appendGhost(),Co({sortable:this,name:"start",originalEvent:i})}else this._nulling()},_emulateDragOver:function(){if(td){this._lastX=td.clientX,this._lastY=td.clientY,rMe();for(var e=document.elementFromPoint(td.clientX,td.clientY),i=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(td.clientX,td.clientY),e!==i);)i=e;if(rt.parentNode[kl]._isOutsideThisEl(e),i)do{if(i[kl]){var r=void 0;if(r=i[kl]._onDragOver({clientX:td.clientX,clientY:td.clientY,target:e,rootEl:i}),r&&!this.options.dragoverBubble)break}e=i}while(i=ZIe(i));nMe()}},_onTouchMove:function(e){if(Vb){var i=this.options,r=i.fallbackTolerance,n=i.fallbackOffset,s=e.touches?e.touches[0]:e,a=ai&&iS(ai,!0),o=ai&&a&&a.a,l=ai&&a&&a.d,c=M3&&Wa&&rde(Wa),h=(s.clientX-Vb.clientX+n.x)/(o||1)+(c?c[0]-bB[0]:0)/(o||1),m=(s.clientY-Vb.clientY+n.y)/(l||1)+(c?c[1]-bB[1]:0)/(l||1);if(!Qt.active&&!d$){if(r&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<r)return;this._onDragStart(e,!0)}if(ai){a?(a.e+=h-(yB||0),a.f+=m-(vB||0)):a={a:1,b:0,c:0,d:1,e:h,f:m};var g="matrix(".concat(a.a,",").concat(a.b,",").concat(a.c,",").concat(a.d,",").concat(a.e,",").concat(a.f,")");Xt(ai,"webkitTransform",g),Xt(ai,"mozTransform",g),Xt(ai,"msTransform",g),Xt(ai,"transform",g),yB=h,vB=m,td=s}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!ai){var e=this.options.fallbackOnBody?document.body:an,i=$s(rt,!0,M3,!0,e),r=this.options;if(M3){for(Wa=e;Xt(Wa,"position")==="static"&&Xt(Wa,"transform")==="none"&&Wa!==document;)Wa=Wa.parentNode;Wa!==document.body&&Wa!==document.documentElement?(Wa===document&&(Wa=Lp()),i.top+=Wa.scrollTop,i.left+=Wa.scrollLeft):Wa=Lp(),bB=rde(Wa)}ai=rt.cloneNode(!0),uc(ai,r.ghostClass,!1),uc(ai,r.fallbackClass,!0),uc(ai,r.dragClass,!0),Xt(ai,"transition",""),Xt(ai,"transform",""),Xt(ai,"box-sizing","border-box"),Xt(ai,"margin",0),Xt(ai,"top",i.top),Xt(ai,"left",i.left),Xt(ai,"width",i.width),Xt(ai,"height",i.height),Xt(ai,"opacity","0.8"),Xt(ai,"position",M3?"absolute":"fixed"),Xt(ai,"zIndex","100000"),Xt(ai,"pointerEvents","none"),Qt.ghost=ai,e.appendChild(ai),Xt(ai,"transform-origin",nde/parseInt(ai.style.width)*100+"% "+sde/parseInt(ai.style.height)*100+"%")}},_onDragStart:function(e,i){var r=this,n=e.dataTransfer,s=r.options;if(sl("dragStart",this,{evt:e}),Qt.eventCanceled){this._onDrop();return}sl("setupClone",this),Qt.eventCanceled||(vn=QIe(rt),vn.removeAttribute("id"),vn.draggable=!1,vn.style["will-change"]="",this._hideClone(),uc(vn,this.options.chosenClass,!1),Qt.clone=vn),r.cloneId=kF(function(){sl("clone",r),!Qt.eventCanceled&&(r.options.removeCloneOnHide||an.insertBefore(vn,rt),r._hideClone(),Co({sortable:r,name:"clone"}))}),!i&&uc(rt,s.dragClass,!0),i?(Xz=!0,r._loopId=setInterval(r._emulateDragOver,50)):(Fi(document,"mouseup",r._onDrop),Fi(document,"touchend",r._onDrop),Fi(document,"touchcancel",r._onDrop),n&&(n.effectAllowed="move",s.setData&&s.setData.call(r,n,rt)),zi(document,"drop",r),Xt(rt,"transform","translateZ(0)")),d$=!0,r._dragStartId=kF(r._dragStarted.bind(r,i,e)),zi(document,"selectstart",r),XC=!0,window.getSelection().removeAllRanges(),G2&&Xt(document.body,"user-select","none")},_onDragOver:function(e){var i=this.el,r=e.target,n,s,a,o=this.options,l=o.group,c=Qt.active,h=T3===l,m=o.sort,g=Ca||c,v,b=this,x=!1;if(GG)return;function $(Oe,He){sl(Oe,b,Hp({evt:e,isOwner:h,axis:v?"vertical":"horizontal",revert:a,dragRect:n,targetRect:s,canSort:m,fromSortable:g,target:r,completed:k,onMove:function(oe,ze){return C3(an,i,rt,n,oe,$s(oe),e,ze)},changed:A},He))}function M(){$("dragOverAnimationCapture"),b.captureAnimationState(),b!==g&&g.captureAnimationState()}function k(Oe){return $("dragOverCompleted",{insertion:Oe}),Oe&&(h?c._hideClone():c._showClone(b),b!==g&&(uc(rt,Ca?Ca.options.ghostClass:c.options.ghostClass,!1),uc(rt,o.ghostClass,!0)),Ca!==b&&b!==Qt.active?Ca=b:b===Qt.active&&Ca&&(Ca=null),g===b&&(b._ignoreWhileAnimating=r),b.animateAll(function(){$("dragOverAnimationComplete"),b._ignoreWhileAnimating=null}),b!==g&&(g.animateAll(),g._ignoreWhileAnimating=null)),(r===rt&&!rt.animated||r===i&&!r.animated)&&(ix=null),!o.dragoverBubble&&!e.rootEl&&r!==document&&(rt.parentNode[kl]._isOutsideThisEl(e.target),!Oe&&Ub(e)),!o.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),x=!0}function A(){pc=su(rt),Vy=su(rt,o.draggable),Co({sortable:b,name:"change",toEl:i,newIndex:pc,newDraggableIndex:Vy,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),r=xd(r,o.draggable,i,!0),$("dragOver"),Qt.eventCanceled)return x;if(rt.contains(e.target)||r.animated&&r.animatingX&&r.animatingY||b._ignoreWhileAnimating===r)return k(!1);if(Xz=!1,c&&!o.disabled&&(h?m||(a=Ln!==an):Ca===this||(this.lastPutMode=T3.checkPull(this,c,rt,e))&&l.checkPut(this,c,rt,e))){if(v=this._getDirection(e,r)==="vertical",n=$s(rt),$("dragOverValid"),Qt.eventCanceled)return x;if(a)return Ln=an,M(),this._hideClone(),$("revert"),Qt.eventCanceled||(T0?an.insertBefore(rt,T0):an.appendChild(rt)),k(!0);var L=OX(i,o.draggable);if(!L||qvt(e,v,this)&&!L.animated){if(L===rt)return k(!1);if(L&&i===e.target&&(r=L),r&&(s=$s(r)),C3(an,i,rt,n,r,s,e,!!r)!==!1)return M(),L&&L.nextSibling?i.insertBefore(rt,L.nextSibling):i.appendChild(rt),Ln=i,A(),k(!0)}else if(L&&Bvt(e,v,this)){var z=bT(i,0,o,!0);if(z===rt)return k(!1);if(r=z,s=$s(r),C3(an,i,rt,n,r,s,e,!1)!==!1)return M(),i.insertBefore(rt,z),Ln=i,A(),k(!0)}else if(r.parentNode===i){s=$s(r);var U=0,B,X=rt.parentNode!==i,J=!Nvt(rt.animated&&rt.toRect||n,r.animated&&r.toRect||s,v),Q=v?"top":"left",le=ide(r,"top","top")||ide(rt,"top","top"),ie=le?le.scrollTop:void 0;ix!==r&&(B=s[Q],J2=!1,I3=!J&&o.invertSwap||X),U=Hvt(e,r,s,v,J?1:o.swapThreshold,o.invertedSwapThreshold==null?o.swapThreshold:o.invertedSwapThreshold,I3,ix===r);var re;if(U!==0){var se=su(rt);do se-=U,re=Ln.children[se];while(re&&(Xt(re,"display")==="none"||re===ai))}if(U===0||re===r)return k(!1);ix=r,Y2=U;var Te=r.nextElementSibling,ne=!1;ne=U===1;var _e=C3(an,i,rt,n,r,s,e,ne);if(_e!==!1)return(_e===1||_e===-1)&&(ne=_e===1),GG=!0,setTimeout(Uvt,30),M(),ne&&!Te?i.appendChild(rt):r.parentNode.insertBefore(rt,ne?Te:r),le&&XIe(le,0,ie-le.scrollTop),Ln=rt.parentNode,B!==void 0&&!I3&&(EF=Math.abs(B-$s(r)[Q])),A(),k(!0)}if(i.contains(rt))return k(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){Fi(document,"mousemove",this._onTouchMove),Fi(document,"touchmove",this._onTouchMove),Fi(document,"pointermove",this._onTouchMove),Fi(document,"dragover",Ub),Fi(document,"mousemove",Ub),Fi(document,"touchmove",Ub)},_offUpEvents:function(){var e=this.el.ownerDocument;Fi(e,"mouseup",this._onDrop),Fi(e,"touchend",this._onDrop),Fi(e,"pointerup",this._onDrop),Fi(e,"pointercancel",this._onDrop),Fi(e,"touchcancel",this._onDrop),Fi(document,"selectstart",this)},_onDrop:function(e){var i=this.el,r=this.options;if(pc=su(rt),Vy=su(rt,r.draggable),sl("drop",this,{evt:e}),Ln=rt&&rt.parentNode,pc=su(rt),Vy=su(rt,r.draggable),Qt.eventCanceled){this._nulling();return}d$=!1,I3=!1,J2=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),WG(this.cloneId),WG(this._dragStartId),this.nativeDraggable&&(Fi(document,"drop",this),Fi(i,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),G2&&Xt(document.body,"user-select",""),Xt(rt,"transform",""),e&&(XC&&(e.cancelable&&e.preventDefault(),!r.dropBubble&&e.stopPropagation()),ai&&ai.parentNode&&ai.parentNode.removeChild(ai),(an===Ln||Ca&&Ca.lastPutMode!=="clone")&&vn&&vn.parentNode&&vn.parentNode.removeChild(vn),rt&&(this.nativeDraggable&&Fi(rt,"dragend",this),wB(rt),rt.style["will-change"]="",XC&&!d$&&uc(rt,Ca?Ca.options.ghostClass:this.options.ghostClass,!1),uc(rt,this.options.chosenClass,!1),Co({sortable:this,name:"unchoose",toEl:Ln,newIndex:null,newDraggableIndex:null,originalEvent:e}),an!==Ln?(pc>=0&&(Co({rootEl:Ln,name:"add",toEl:Ln,fromEl:an,originalEvent:e}),Co({sortable:this,name:"remove",toEl:Ln,originalEvent:e}),Co({rootEl:Ln,name:"sort",toEl:Ln,fromEl:an,originalEvent:e}),Co({sortable:this,name:"sort",toEl:Ln,originalEvent:e})),Ca&&Ca.save()):pc!==A$&&pc>=0&&(Co({sortable:this,name:"update",toEl:Ln,originalEvent:e}),Co({sortable:this,name:"sort",toEl:Ln,originalEvent:e})),Qt.active&&((pc==null||pc===-1)&&(pc=A$,Vy=Z2),Co({sortable:this,name:"end",toEl:Ln,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){sl("nulling",this),an=rt=Ln=ai=T0=vn=CF=Zy=Vb=td=XC=pc=Vy=A$=Z2=ix=Y2=Ca=T3=Qt.dragged=Qt.ghost=Qt.clone=Qt.active=null,Kz.forEach(function(e){e.checked=!0}),Kz.length=yB=vB=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":rt&&(this._onDragOver(e),Vvt(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],i,r=this.el.children,n=0,s=r.length,a=this.options;n<s;n++)i=r[n],xd(i,a.draggable,this.el,!1)&&e.push(i.getAttribute(a.dataIdAttr)||Wvt(i));return e},sort:function(e,i){var r={},n=this.el;this.toArray().forEach(function(s,a){var o=n.children[a];xd(o,this.options.draggable,n,!1)&&(r[s]=o)},this),i&&this.captureAnimationState(),e.forEach(function(s){r[s]&&(n.removeChild(r[s]),n.appendChild(r[s]))}),i&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,i){return xd(e,i||this.options.draggable,this.el,!1)},option:function(e,i){var r=this.options;if(i===void 0)return r[e];var n=uA.modifyOption(this,e,i);typeof n<"u"?r[e]=n:r[e]=i,e==="group"&&iMe(r)},destroy:function(){sl("destroy",this);var e=this.el;e[kl]=null,Fi(e,"mousedown",this._onTapStart),Fi(e,"touchstart",this._onTapStart),Fi(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(Fi(e,"dragover",this),Fi(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(i){i.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Qz.splice(Qz.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Zy){if(sl("hideClone",this),Qt.eventCanceled)return;Xt(vn,"display","none"),this.options.removeCloneOnHide&&vn.parentNode&&vn.parentNode.removeChild(vn),Zy=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(Zy){if(sl("showClone",this),Qt.eventCanceled)return;rt.parentNode==an&&!this.options.group.revertClone?an.insertBefore(vn,rt):T0?an.insertBefore(vn,T0):an.appendChild(vn),this.options.group.revertClone&&this.animate(rt,vn),Xt(vn,"display",""),Zy=!1}}};function Vvt(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function C3(t,e,i,r,n,s,a,o){var l,c=t[kl],h=c.options.onMove,m;return window.CustomEvent&&!dg&&!cA?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=t,l.dragged=i,l.draggedRect=r,l.related=n||e,l.relatedRect=s||$s(e),l.willInsertAfter=o,l.originalEvent=a,t.dispatchEvent(l),h&&(m=h.call(c,l,a)),m}function wB(t){t.draggable=!1}function Uvt(){GG=!1}function Bvt(t,e,i){var r=$s(bT(i.el,0,i.options,!0)),n=KIe(i.el,i.options,ai),s=10;return e?t.clientX<n.left-s||t.clientY<r.top&&t.clientX<r.right:t.clientY<n.top-s||t.clientY<r.bottom&&t.clientX<r.left}function qvt(t,e,i){var r=$s(OX(i.el,i.options.draggable)),n=KIe(i.el,i.options,ai),s=10;return e?t.clientX>n.right+s||t.clientY>r.bottom&&t.clientX>r.left:t.clientY>n.bottom+s||t.clientX>r.right&&t.clientY>r.top}function Hvt(t,e,i,r,n,s,a,o){var l=r?t.clientY:t.clientX,c=r?i.height:i.width,h=r?i.top:i.left,m=r?i.bottom:i.right,g=!1;if(!a){if(o&&EF<c*n){if(!J2&&(Y2===1?l>h+c*s/2:l<m-c*s/2)&&(J2=!0),J2)g=!0;else if(Y2===1?l<h+EF:l>m-EF)return-Y2}else if(l>h+c*(1-n)/2&&l<m-c*(1-n)/2)return Gvt(e)}return g=g||a,g&&(l<h+c*s/2||l>m-c*s/2)?l>h+c/2?1:-1:0}function Gvt(t){return su(rt)<su(t)?1:-1}function Wvt(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,i=e.length,r=0;i--;)r+=e.charCodeAt(i);return r.toString(36)}function Zvt(t){Kz.length=0;for(var e=t.getElementsByTagName("input"),i=e.length;i--;){var r=e[i];r.checked&&Kz.push(r)}}function kF(t){return setTimeout(t,0)}function WG(t){return clearTimeout(t)}tj&&zi(document,"touchmove",function(t){(Qt.active||d$)&&t.cancelable&&t.preventDefault()});Qt.utils={on:zi,off:Fi,css:Xt,find:YIe,is:function(e,i){return!!xd(e,i,e,!1)},extend:kvt,throttle:JIe,closest:xd,toggleClass:uc,clone:QIe,index:su,nextTick:kF,cancelNextTick:WG,detectDirection:tMe,getChild:bT,expando:kl};Qt.get=function(t){return t[kl]};Qt.mount=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e[0].constructor===Array&&(e=e[0]),e.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(Qt.utils=Hp(Hp({},Qt.utils),r.utils)),uA.mount(r)})};Qt.create=function(t,e){return new Qt(t,e)};Qt.version=Cvt;var bs=[],QC,ZG,YG=!1,_B,xB,eN,KC;function Yvt(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(i){var r=i.originalEvent;this.sortable.nativeDraggable?zi(document,"dragover",this._handleAutoScroll):this.options.supportPointer?zi(document,"pointermove",this._handleFallbackAutoScroll):r.touches?zi(document,"touchmove",this._handleFallbackAutoScroll):zi(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(i){var r=i.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?Fi(document,"dragover",this._handleAutoScroll):(Fi(document,"pointermove",this._handleFallbackAutoScroll),Fi(document,"touchmove",this._handleFallbackAutoScroll),Fi(document,"mousemove",this._handleFallbackAutoScroll)),ode(),AF(),Avt()},nulling:function(){eN=ZG=QC=YG=KC=_B=xB=null,bs.length=0},_handleFallbackAutoScroll:function(i){this._handleAutoScroll(i,!0)},_handleAutoScroll:function(i,r){var n=this,s=(i.touches?i.touches[0]:i).clientX,a=(i.touches?i.touches[0]:i).clientY,o=document.elementFromPoint(s,a);if(eN=i,r||this.options.forceAutoScrollFallback||cA||dg||G2){$B(i,this.options,o,r);var l=pv(o,!0);YG&&(!KC||s!==_B||a!==xB)&&(KC&&ode(),KC=setInterval(function(){var c=pv(document.elementFromPoint(s,a),!0);c!==l&&(l=c,AF()),$B(i,n.options,c,r)},10),_B=s,xB=a)}else{if(!this.options.bubbleScroll||pv(o,!0)===Lp()){AF();return}$B(i,this.options,pv(o,!1),!1)}}},eg(t,{pluginName:"scroll",initializeByDefault:!0})}function AF(){bs.forEach(function(t){clearInterval(t.pid)}),bs=[]}function ode(){clearInterval(KC)}var $B=JIe(function(t,e,i,r){if(e.scroll){var n=(t.touches?t.touches[0]:t).clientX,s=(t.touches?t.touches[0]:t).clientY,a=e.scrollSensitivity,o=e.scrollSpeed,l=Lp(),c=!1,h;ZG!==i&&(ZG=i,AF(),QC=e.scroll,h=e.scrollFn,QC===!0&&(QC=pv(i,!0)));var m=0,g=QC;do{var v=g,b=$s(v),x=b.top,$=b.bottom,M=b.left,k=b.right,A=b.width,L=b.height,z=void 0,U=void 0,B=v.scrollWidth,X=v.scrollHeight,J=Xt(v),Q=v.scrollLeft,le=v.scrollTop;v===l?(z=A<B&&(J.overflowX==="auto"||J.overflowX==="scroll"||J.overflowX==="visible"),U=L<X&&(J.overflowY==="auto"||J.overflowY==="scroll"||J.overflowY==="visible")):(z=A<B&&(J.overflowX==="auto"||J.overflowX==="scroll"),U=L<X&&(J.overflowY==="auto"||J.overflowY==="scroll"));var ie=z&&(Math.abs(k-n)<=a&&Q+A<B)-(Math.abs(M-n)<=a&&!!Q),re=U&&(Math.abs($-s)<=a&&le+L<X)-(Math.abs(x-s)<=a&&!!le);if(!bs[m])for(var se=0;se<=m;se++)bs[se]||(bs[se]={});(bs[m].vx!=ie||bs[m].vy!=re||bs[m].el!==v)&&(bs[m].el=v,bs[m].vx=ie,bs[m].vy=re,clearInterval(bs[m].pid),(ie!=0||re!=0)&&(c=!0,bs[m].pid=setInterval((function(){r&&this.layer===0&&Qt.active._onTouchMove(eN);var Te=bs[this.layer].vy?bs[this.layer].vy*o:0,ne=bs[this.layer].vx?bs[this.layer].vx*o:0;typeof h=="function"&&h.call(Qt.dragged.parentNode[kl],ne,Te,t,eN,bs[this.layer].el)!=="continue"||XIe(bs[this.layer].el,ne,Te)}).bind({layer:m}),24))),m++}while(e.bubbleScroll&&g!==l&&(g=pv(g,!1)));YG=c}},30),sMe=function(e){var i=e.originalEvent,r=e.putSortable,n=e.dragEl,s=e.activeSortable,a=e.dispatchSortableEvent,o=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(i){var c=r||s;o();var h=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:i,m=document.elementFromPoint(h.clientX,h.clientY);l(),c&&!c.el.contains(m)&&(a("spill"),this.onSpill({dragEl:n,putSortable:r}))}};function LX(){}LX.prototype={startIndex:null,dragStart:function(e){var i=e.oldDraggableIndex;this.startIndex=i},onSpill:function(e){var i=e.dragEl,r=e.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var n=bT(this.sortable.el,this.startIndex,this.options);n?this.sortable.el.insertBefore(i,n):this.sortable.el.appendChild(i),this.sortable.animateAll(),r&&r.animateAll()},drop:sMe};eg(LX,{pluginName:"revertOnSpill"});function FX(){}FX.prototype={onSpill:function(e){var i=e.dragEl,r=e.putSortable,n=r||this.sortable;n.captureAnimationState(),i.parentNode&&i.parentNode.removeChild(i),n.animateAll()},drop:sMe};eg(FX,{pluginName:"removeOnSpill"});Qt.mount(new Yvt);Qt.mount(FX,LX);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const ij=new Set,Jvt={ghostClass:"calcite-sortable--ghost",chosenClass:"calcite-sortable--chosen",dragClass:"calcite-sortable--drag",fallbackClass:"calcite-sortable--fallback"};function Xvt(t){if(oMe(t))return;aMe(t),ij.add(t);const e="id",{group:i,handleSelector:r,dragSelector:n,sortDisabled:s}=t;t.sortable=Qt.create(t.el,{dataIdAttr:e,swapThreshold:.5,...Jvt,...!!n&&{draggable:n},...!!i&&{sort:!s,group:{name:i,...!!t.canPull&&{pull:(a,o,l,{newDraggableIndex:c,oldDraggableIndex:h})=>t.canPull({toEl:a.el,fromEl:o.el,dragEl:l,newIndex:c,oldIndex:h})},...!!t.canPut&&{put:(a,o,l,{newDraggableIndex:c,oldDraggableIndex:h})=>t.canPut({toEl:a.el,fromEl:o.el,dragEl:l,newIndex:c,oldIndex:h})}}},onMove:({from:a,dragged:o,to:l,related:c})=>{t.onDragMove&&t.onDragMove({fromEl:a,dragEl:o,toEl:l,relatedEl:c})},handle:r,filter:`${r}[disabled]`,onStart:({from:a,item:o,to:l,newDraggableIndex:c,oldDraggableIndex:h})=>{JG.active=!0,Qvt(),t.onDragStart({fromEl:a,dragEl:o,toEl:l,newIndex:c,oldIndex:h})},onEnd:({from:a,item:o,to:l,newDraggableIndex:c,oldDraggableIndex:h})=>{JG.active=!1,Kvt(),t.onDragEnd({fromEl:a,dragEl:o,toEl:l,newIndex:c,oldIndex:h})},onSort:({from:a,item:o,to:l,newDraggableIndex:c,oldDraggableIndex:h})=>{t.onDragSort({fromEl:a,dragEl:o,toEl:l,newIndex:c,oldIndex:h})}})}function aMe(t){var e;oMe(t)||(ij.delete(t),(e=t.sortable)==null||e.destroy(),t.sortable=null)}const JG={active:!1};function oMe(t){return t.dragEnabled&&JG.active}function Qvt(){Array.from(ij).forEach(t=>t.onGlobalDragStart())}function Kvt(){Array.from(ij).forEach(t=>t.onGlobalDragEnd())}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Lf={container:"container",table:"table",scrim:"scrim",stack:"stack",tableContainer:"table-container",sticky:"sticky-pos",assistiveText:"assistive-text",containerHeight:"container-height"},SB={filterNoResults:"filter-no-results",filterActionsStart:"filter-actions-start",filterActionsEnd:"filter-actions-end"},ebt=ct`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:block}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}.container{position:relative;background-color:var(--calcite-list-background-color, var(--calcite-color-foreground-1))}.container-height{block-size:100%}.table-container{box-sizing:border-box;display:flex;inline-size:100%;flex-direction:column;background-color:transparent}.table-container *{box-sizing:border-box}.table{inline-size:100%}.stack{--calcite-stack-padding-inline: 0;--calcite-stack-padding-block: 0}.sticky-pos{position:sticky;inset-block-start:0px;z-index:var(--calcite-z-index-sticky);background-color:var(--calcite-list-background-color, var(--calcite-color-foreground-1))}.assistive-text{position:absolute;inline-size:1px;block-size:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}:host([hidden]){display:none}[hidden]{display:none}`,tbt=`${Wz}, ${Rm}`,VN=class VN extends dt{constructor(){super(),this.dragSelector=Rm,this.focusableItems=[],this.handleSelector="calcite-sort-handle",this.listItems=[],this.listItemGroups=[],this.mutationObserver=Gn("mutation",()=>{this.willPerformFilter=!0,this.updateListItemsDebounced()}),this.cancelable=XJ()(this),this.updateListItemsDebounced=B5(this.updateListItems,nD.nextTick),this.visibleItems=[],this.willFilterEmit=!1,this.willPerformFilter=!1,this.messages=un({blocking:!0}),this.focusSetter=dn()(this),this.dataForFilter=[],this.hasFilterActionsEnd=!1,this.hasFilterActionsStart=!1,this.hasFilterNoResults=!1,this.sortHandleMenuItems=[],this.disabled=!1,this.dragEnabled=!1,this.filterEnabled=!1,this.filteredData=[],this.filteredItems=[],this.interactionMode="interactive",this.loading=!1,this.displayMode="flat",this.scale="m",this.selectedItems=[],this.selectionAppearance="icon",this.selectionMode="none",this.sortDisabled=!1,this.calciteInternalListDefaultSlotChange=Re({cancelable:!1}),this.calciteListChange=Re({cancelable:!1}),this.calciteListDragEnd=Re({cancelable:!1}),this.calciteListDragStart=Re({cancelable:!1}),this.calciteListFilter=Re({cancelable:!1}),this.calciteListMoveHalt=Re({cancelable:!1}),this.calciteListOrderChange=Re({cancelable:!1}),this.listen("calciteInternalListItemToggle",this.handleCalciteListItemToggle),this.listen("calciteInternalFocusPreviousItem",this.handleCalciteInternalFocusPreviousItem),this.listen("calciteInternalListItemActive",this.handleCalciteInternalListItemActive),this.listen("calciteListItemSelect",this.handleCalciteListItemSelect),this.listen("calciteInternalAssistiveTextChange",this.handleCalciteInternalAssistiveTextChange),this.listen("calciteListItemSortHandleBeforeOpen",this.updateListItemsDebounced),this.listen("calciteSortHandleReorder",this.handleSortReorder),this.listen("calciteSortHandleMove",this.handleSortMove),this.listen("calciteSortHandleAdd",this.handleSortAdd),this.listen("calciteInternalListItemSelect",this.handleCalciteInternalListItemSelect),this.listen("calciteInternalListItemSelectMultiple",this.handleCalciteInternalListItemSelectMultiple),this.listen("calciteInternalListItemChange",this.handleCalciteInternalListItemChange),this.listen("calciteInternalListItemGroupDefaultSlotChange",this.handleCalciteInternalListItemGroupDefaultSlotChange)}get hasActiveFilter(){return this.filterEnabled&&this.filterText&&this.filteredItems.length!==this.visibleItems.length}get showNoResultsContainer(){return this.filterEnabled&&this.filterText&&this.hasFilterNoResults&&this.visibleItems.length&&!this.filteredItems.length}async setFocus(e){return this.focusSetter(()=>this.filterEnabled?this.filterEl:this.focusableItems.find(i=>i.active),e)}emitOrderChangeEvent(e){this.calciteListOrderChange.emit(e)}connectedCallback(){super.connectedCallback(),this.connectObserver(),this.willPerformFilter=!0,this.updateListItemsDebounced(),this.setUpSorting(),this.setParentList(),this.setListItemGroups(),this.cancelable.add(this.updateListItemsDebounced)}async load(){this.handleInteractionModeWarning()}willUpdate(e){(e.has("filterText")||e.has("filterProps")||e.has("filterPredicate"))&&this.performFilter(),(e.has("filterEnabled")&&(this.hasUpdated||this.filterEnabled!==!1)||e.has("group")||e.has("sortDisabled")&&(this.hasUpdated||this.sortDisabled!==!1)||e.has("dragEnabled")&&(this.hasUpdated||this.dragEnabled!==!1)||e.has("selectionMode")&&(this.hasUpdated||this.selectionMode!=="none")||e.has("selectionAppearance")&&(this.hasUpdated||this.selectionAppearance!=="icon")||e.has("displayMode")&&this.hasUpdated||e.has("scale")&&this.hasUpdated||e.has("canPull")&&this.hasUpdated||e.has("canPut")&&this.hasUpdated||e.has("filterPredicate")&&this.hasUpdated)&&this.handleListItemChange()}updated(){Vs(this)}disconnectedCallback(){super.disconnectedCallback(),this.disconnectObserver(),aMe(this)}updateListItems(){this.updateGroupItems();const{selectionAppearance:e,selectionMode:i,interactionMode:r,dragEnabled:n,el:s,filterEl:a,displayMode:o,scale:l,sortDisabled:c,sortHandleMenuItems:h}=this,m=Array.from(this.el.querySelectorAll(Rm)),g=s,v=Array.from(g.children).filter($3);if(m.forEach(b=>{b.scale=l,b.selectionAppearance=e,b.selectionMode=i,b.interactionMode=r,b.closest(H2)===s&&(b.moveToItems=h.filter(x=>this.validateSortMenuItem({type:"move",fromEl:g,toEl:x.element,dragEl:b,newIndex:0,oldIndex:v.indexOf(b)})),b.addToItems=this.sortHandleMenuItems.filter(x=>this.validateSortMenuItem({type:"add",fromEl:g,toEl:x.element,dragEl:b,newIndex:0,oldIndex:v.indexOf(b)})),b.dragHandle=n,b.displayMode=o,b.sortDisabled=c)}),this.parentListEl){this.setUpSorting();return}this.listItems=m,this.filterEnabled&&this.willPerformFilter&&(this.willPerformFilter=!1,this.dataForFilter=this.getItemData(),a&&(a.items=this.dataForFilter,this.filterAndUpdateData())),this.visibleItems=this.listItems.filter(b=>!b.closed&&!b.hidden),this.updateFilteredItems(),this.borderItems(),this.focusableItems=this.filteredItems.filter(b=>!b.disabled),this.setActiveListItem(),this.updateSelectedItems(),this.setUpSorting()}handleListItemChange(){this.willPerformFilter=!0,this.updateListItemsDebounced()}handleCalciteListItemToggle(e){this.parentListEl||(e.stopPropagation(),this.borderItems())}handleCalciteInternalFocusPreviousItem(e){if(this.parentListEl)return;e.stopPropagation();const{focusableItems:i}=this,n=i.findIndex(s=>s.active)-1;i[n]&&this.focusRow(i[n])}handleCalciteInternalListItemActive(e){if(this.parentListEl)return;e.stopPropagation();const i=e.target,{listItems:r}=this;r.forEach(n=>{n.active=n===i})}handleCalciteListItemSelect(){this.parentListEl||this.updateSelectedItems(!0)}handleCalciteInternalAssistiveTextChange(e){this.assistiveText=e.detail.message,e.stopPropagation()}handleSortReorder(e){this.parentListEl||e.defaultPrevented||(e.preventDefault(),this.handleReorder(e))}handleSortAdd(e){this.parentListEl||e.defaultPrevented||(e.preventDefault(),this.handleAdd(e))}handleSortMove(e){this.parentListEl||e.defaultPrevented||(e.preventDefault(),this.handleMove(e))}handleCalciteInternalListItemSelect(e){if(this.parentListEl)return;e.stopPropagation();const i=e.target,{listItems:r,selectionMode:n}=this;i.selected&&(n==="single"||n==="single-persist")&&r.forEach(s=>s.selected=s===i),this.updateSelectedItems()}handleCalciteInternalListItemSelectMultiple(e){if(this.parentListEl)return;e.stopPropagation();const{target:i,detail:r}=e,{focusableItems:n,lastSelectedInfo:s}=this,a=i;if(r.selectMultiple&&s){const o=n.indexOf(a),l=n.indexOf(s.selectedItem),c=Math.min(l,o),h=Math.max(l,o);n.slice(c,h+1).forEach(m=>m.selected=s.selected)}else this.lastSelectedInfo={selectedItem:a,selected:a.selected}}handleCalciteInternalListItemChange(e){this.parentListEl||(e.stopPropagation(),this.updateListItemsDebounced())}handleCalciteInternalListItemGroupDefaultSlotChange(e){e.stopPropagation()}connectObserver(){var e;(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0,subtree:!0})}disconnectObserver(){var e;(e=this.mutationObserver)==null||e.disconnect()}setUpSorting(){const{dragEnabled:e,defaultSlotEl:i}=this;e&&(i&&cvt(i),Xvt(this))}onGlobalDragStart(){this.disconnectObserver()}onGlobalDragEnd(){this.connectObserver()}onDragEnd(e){this.calciteListDragEnd.emit(e)}onDragStart(e){e.dragEl.sortHandleOpen=!1,this.calciteListDragStart.emit(e)}onDragSort(e){this.setParentList(),this.updateListItemsDebounced(),this.calciteListOrderChange.emit(e)}setParentList(){var e;this.parentListEl=(e=this.el.parentElement)==null?void 0:e.closest(H2)}handleDefaultSlotChange(){this.parentListEl&&this.calciteInternalListDefaultSlotChange.emit()}setListItemGroups(){this.listItemGroups=Array.from(this.el.querySelectorAll(Wz))}handleFilterActionsStartSlotChange(e){this.hasFilterActionsStart=ii(e)}handleFilterActionsEndSlotChange(e){this.hasFilterActionsEnd=ii(e)}handleFilterNoResultsSlotChange(e){this.hasFilterNoResults=ii(e)}setActiveListItem(){const{focusableItems:e}=this;e.some(i=>i.active)||e[0]&&(e[0].active=!0)}async updateSelectedItems(e=!1){await this.updateComplete,this.selectedItems=this.visibleItems.filter(i=>i.selected),e&&this.calciteListChange.emit()}filterElements({el:e,filteredItems:i,visibleParents:r}){const n=!r.has(e)&&!i.includes(e);e.filterHidden=n;const s=e.parentElement.closest(tbt);s&&(n||r.add(s),this.filterElements({el:s,filteredItems:i,visibleParents:r}))}allParentListItemsExpanded(e){var r;const i=(r=e.parentElement)==null?void 0:r.closest(Rm);if(i){if(!i.expanded)return!1}else return!0;return this.allParentListItemsExpanded(i)}borderItems(){const e=this.visibleItems.filter(i=>!i.filterHidden&&this.allParentListItemsExpanded(i));e.forEach(i=>i.bordered=i!==e[e.length-1])}updateFilteredItems(){const{visibleItems:e,filteredData:i,filterText:r,filterPredicate:n}=this,s=e==null?void 0:e.filter(l=>e.every(c=>c===l||!l.contains(c))),a=n?e.filter(n):r?i.map(l=>l.el):e||[],o=new WeakSet;s.forEach(l=>this.filterElements({el:l,filteredItems:a,visibleParents:o})),this.filteredItems=a,this.willFilterEmit&&(this.willFilterEmit=!1,this.calciteListFilter.emit())}updateFilteredData(){const{filterEl:e}=this;e&&(e.filteredItems&&(this.filteredData=e.filteredItems),this.updateListItemsDebounced())}async filterAndUpdateData(){var e;await((e=this.filterEl)==null?void 0:e.filter(this.filterText)),this.updateFilteredData()}get effectiveFilterProps(){return this.filterProps?this.filterProps.filter(e=>e!=="el"):["description","label","metadata","heading"]}performFilter(){const{filterEl:e,filterText:i,effectiveFilterProps:r}=this;e&&(e.value=i,e.filterProps=r,this.filterAndUpdateData())}setDefaultSlotEl(e){this.defaultSlotEl=e}setFilterEl(e){this.filterEl=e,this.performFilter()}handleFilterChange(e){e.stopPropagation();const{value:i}=e.currentTarget;this.filterText=i,this.willFilterEmit=!0,this.updateFilteredData()}getItemData(){return this.listItems.map(e=>({label:e.label,description:e.description,metadata:e.metadata,heading:this.getGroupHeading(e),el:e}))}getGroupHeading(e){return this.listItemGroups.filter(r=>r.contains(e)).map(r=>r.heading)}updateGroupItems(){const{el:e,group:i,scale:r}=this,n=mk(e),s=i?Array.from(n.querySelectorAll(`${H2}[group="${i}"]`)).filter(o=>!o.disabled&&o.dragEnabled):[];this.sortHandleMenuItems=s.map(o=>({element:o,label:o.label??o.id,id:Mc()})),Array.from(this.el.querySelectorAll(Wz)).forEach(o=>{o.scale=r})}focusRow(e){const{focusableItems:i}=this;e&&(i.forEach(r=>r.active=r===e),e.setFocus())}isNavigable(e){var r;const i=(r=e.parentElement)==null?void 0:r.closest(Rm);return i?i.expanded&&this.isNavigable(i):!0}handleListKeydown(e){if(e.defaultPrevented||this.parentListEl)return;const{key:i}=e,r=this.focusableItems.filter(s=>this.isNavigable(s)),n=r.findIndex(s=>s.active);if(i==="ArrowDown"){e.preventDefault();const s=e.target===this.filterEl?0:n+1;r[s]&&this.focusRow(r[s])}else if(i==="ArrowUp"){if(e.preventDefault(),n===0&&this.filterEnabled){this.filterEl.setFocus();return}const s=n-1;r[s]&&this.focusRow(r[s])}else if(i==="Home"){e.preventDefault();const s=r[0];s&&this.focusRow(s)}else if(i==="End"){e.preventDefault();const s=r[r.length-1];s&&this.focusRow(s)}}handleInteractionModeWarning(){this.interactionMode==="static"&&this.selectionMode!=="none"&&this.selectionAppearance==="border"&&console.warn('selection-appearance="border" requires interaction-mode="interactive"')}validateSortMenuItem({fromEl:e,toEl:i,dragEl:r,newIndex:n,oldIndex:s,type:a}){var c,h;if(!e||!i||i===e||r.contains(i))return!1;const o=((c=e.canPull)==null?void 0:c.call(e,{toEl:i,fromEl:e,dragEl:r,newIndex:n,oldIndex:s}))??!0,l=((h=i.canPut)==null?void 0:h.call(i,{toEl:i,fromEl:e,dragEl:r,newIndex:n,oldIndex:s}))??!0;return(a==="add"?o==="clone":o===!0)&&l}handleAdd(e){const{addTo:i}=e.detail,r=e.target,n=r==null?void 0:r.parentElement,s=i.element,o=Array.from(n.children).filter($3).indexOf(r),l=0;if(!this.validateSortMenuItem({type:"add",fromEl:n,toEl:s,dragEl:r,newIndex:l,oldIndex:o}))return;r.sortHandleOpen=!1,this.disconnectObserver();const c=r.cloneNode();s.prepend(c),BG(r),this.updateListItemsDebounced(),this.connectObserver();const h={dragEl:r,fromEl:n,toEl:s,newIndex:l,oldIndex:o};this.calciteListOrderChange.emit(h),s.emitOrderChangeEvent(h)}handleMove(e){const{moveTo:i}=e.detail,r=e.target,n=r==null?void 0:r.parentElement,s=i.element,o=Array.from(n.children).filter($3).indexOf(r),l=0;if(!this.validateSortMenuItem({type:"move",fromEl:n,toEl:s,dragEl:r,newIndex:l,oldIndex:o}))return;r.sortHandleOpen=!1,this.disconnectObserver(),s.prepend(r),BG(r),this.updateListItemsDebounced(),this.connectObserver();const c={dragEl:r,fromEl:n,toEl:s,newIndex:l,oldIndex:o};this.calciteListOrderChange.emit(c),s.emitOrderChangeEvent(c)}handleReorder(e){const{reorder:i}=e.detail,r=e.target,n=r==null?void 0:r.parentElement;if(!n)return;r.sortHandleOpen=!1;const s=Array.from(n.children).filter($3),a=s.length-1,o=s.indexOf(r);let l=o;switch(i){case"top":l=0;break;case"bottom":l=a;break;case"up":l=o===0?0:o-1;break;case"down":l=o===a?a:o+1;break}this.disconnectObserver();const c=i==="up"||i==="top"?s[l]:s[l].nextSibling;n.insertBefore(r,c),this.updateListItemsDebounced(),this.connectObserver(),this.calciteListOrderChange.emit({dragEl:r,fromEl:n,toEl:n,newIndex:l,oldIndex:o})}render(){const{loading:e,label:i,disabled:r,dataForFilter:n,filterEnabled:s,filterPlaceholder:a,filterText:o,filterLabel:l,hasFilterActionsStart:c,hasFilterActionsEnd:h,effectiveFilterProps:m}=this;return Us({disabled:this.disabled,children:q`<div class=${H({[Lf.container]:!0,[Lf.containerHeight]:this.listItems.length<1&&e})}>${this.dragEnabled?q`<span aria-live=assertive class=${H(Lf.assistiveText)}>${this.assistiveText}</span>`:null}${this.renderItemAriaLive()}${e?q`<calcite-scrim class=${H(Lf.scrim)} .loading=${e}></calcite-scrim>`:null}<div .ariaBusy=${e} .ariaLabel=${i||""} class=${H(Lf.table)} @keydown=${this.handleListKeydown} role=treegrid>${s||c||h?q`<div class=${H(Lf.sticky)} role=rowgroup><div role=row><div role=columnheader><calcite-stack class=${H(Lf.stack)}><slot name=${SB.filterActionsStart} @slotchange=${this.handleFilterActionsStartSlotChange} slot=${k$.actionsStart}></slot><calcite-filter .ariaLabel=${a} .disabled=${r} .filterProps=${m} .items=${n} .label=${l} @calciteFilterChange=${this.handleFilterChange} .placeholder=${a} .scale=${this.scale} .value=${o} ${gt(this.setFilterEl)}></calcite-filter><slot name=${SB.filterActionsEnd} @slotchange=${this.handleFilterActionsEndSlotChange} slot=${k$.actionsEnd}></slot></calcite-stack></div></div></div>`:null}<div class=${H(Lf.tableContainer)} role=rowgroup><slot @slotchange=${this.handleDefaultSlotChange} ${gt(this.setDefaultSlotEl)}></slot></div></div><div aria-live=polite data-test-id=no-results-container .hidden=${!this.showNoResultsContainer}><slot name=${SB.filterNoResults} @slotchange=${this.handleFilterNoResultsSlotChange}></slot></div></div>`})}renderItemAriaLive(){const{messages:e,filteredItems:i,parentListEl:r,messages:{_lang:n},numberingSystem:s}=this;return $l.numberFormatOptions={locale:n,numberingSystem:s},r?null:q`<div aria-live=polite class=${H(Lf.assistiveText)}>${this.hasActiveFilter?nt("aria-filter-enabled",q`<div>${e.filterEnabled}</div>`):null}${nt("aria-item-count",q`<div>${e.total.replace("{count}",$l.localize(i.length.toString()))}</div>`)}${i.length?nt("aria-item-list",q`<ol>${i.map(a=>q`<li>${a.label}</li>`)}</ol>`):null}</div>`}};VN.properties={assistiveText:[16,{},{state:!0}],dataForFilter:[16,{},{state:!0}],hasFilterActionsEnd:[16,{},{state:!0}],hasFilterActionsStart:[16,{},{state:!0}],hasFilterNoResults:[16,{},{state:!0}],sortHandleMenuItems:[16,{},{state:!0}],canPull:[0,{},{attribute:!1}],canPut:[0,{},{attribute:!1}],disabled:[7,{},{reflect:!0,type:Boolean}],dragEnabled:[7,{},{reflect:!0,type:Boolean}],filterEnabled:[7,{},{reflect:!0,type:Boolean}],filterPredicate:[0,{},{attribute:!1}],filterLabel:[3,{},{reflect:!0}],filterPlaceholder:[3,{},{reflect:!0}],filterProps:[0,{},{attribute:!1}],filterText:[3,{},{reflect:!0}],filteredData:[0,{},{attribute:!1}],filteredItems:[0,{},{attribute:!1}],group:[3,{},{reflect:!0}],interactionMode:[3,{},{reflect:!0}],label:1,loading:[7,{},{reflect:!0,type:Boolean}],messageOverrides:[0,{},{attribute:!1}],displayMode:[3,{},{reflect:!0}],numberingSystem:1,scale:[3,{},{reflect:!0}],selectedItems:[0,{},{attribute:!1}],selectionAppearance:[3,{},{reflect:!0}],selectionMode:[3,{},{reflect:!0}],sortDisabled:[7,{},{reflect:!0,type:Boolean}]},VN.styles=ebt;let tN=VN;ci("calcite-list",tN);const RX=Object.freeze(Object.defineProperty({__proto__:null,List:tN},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const lde={container:"container",heading:"heading"},ibt=ct`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex;flex-direction:column}:host([filter-hidden]){display:none}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}.container{margin:0;display:flex;flex:1 1 0%;background-color:var(--calcite-list-background-color, var(--calcite-color-foreground-1));color:var(--calcite-list-color, var(--calcite-color-text-2))}.heading{font-weight:var(--calcite-font-weight-medium)}:host([scale=s]) .container{padding-inline:var(--calcite-spacing-sm)}:host([scale=s]) .heading{font-size:var(--calcite-font-size-sm);line-height:var(--calcite-font-line-height-fixed-base);padding-block:var(--calcite-spacing-sm) var(--calcite-spacing-xxs)}:host([scale=s]:not(:first-child)) .container{padding-block-start:var(--calcite-spacing-sm)}:host([scale=m]) .container{padding-inline:var(--calcite-spacing-md)}:host([scale=m]) .heading{font-size:var(--calcite-font-size);line-height:var(--calcite-font-line-height-fixed-base);padding-block:var(--calcite-spacing-lg) var(--calcite-spacing-sm)}:host([scale=m]:not(:first-child)) .container{padding-block-start:var(--calcite-spacing-md)}:host([scale=l]) .container{padding-inline:var(--calcite-spacing-lg)}:host([scale=l]) .heading{font-size:var(--calcite-font-size-md);line-height:var(--calcite-font-line-height-fixed-lg);padding-block:var(--calcite-spacing-xl) var(--calcite-spacing-sm-plus, .625rem)}:host([scale=l]:not(:first-child)) .container{padding-block-start:var(--calcite-spacing-md-plus, .875rem)}.heading{padding:0}:host([hidden]){display:none}[hidden]{display:none}`,UN=class UN extends dt{constructor(){super(...arguments),this.disabled=!1,this.filterHidden=!1,this.scale="m",this.calciteInternalListItemGroupDefaultSlotChange=Re({cancelable:!1})}updated(){Vs(this)}handleDefaultSlotChange(){this.calciteInternalListItemGroupDefaultSlotChange.emit()}render(){const{disabled:e,heading:i}=this;return Us({disabled:e,children:q`<div class=${H(lde.container)} role=row><div .ariaColSpan=${dvt} class=${H(lde.heading)} role=cell>${i}</div></div><slot @slotchange=${this.handleDefaultSlotChange}></slot>`})}};UN.properties={disabled:[7,{},{reflect:!0,type:Boolean}],filterHidden:[7,{},{reflect:!0,type:Boolean}],heading:[3,{},{reflect:!0}],scale:[3,{},{reflect:!0}]},UN.styles=ibt;let iN=UN;ci("calcite-list-item-group",iN);const rbt=Object.freeze(Object.defineProperty({__proto__:null,ListItemGroup:iN},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const nbt={backButton:"back-button"},cde={backLeft:"chevron-left",backRight:"chevron-right"},al={actionBar:"action-bar",alerts:"alerts",contentTop:"content-top",contentBottom:"content-bottom",headerActionsStart:"header-actions-start",headerActionsEnd:"header-actions-end",headerMenuActions:"header-menu-actions",headerContent:"header-content",fab:"fab",footer:"footer",footerActions:"footer-actions",footerEnd:"footer-end",footerStart:"footer-start"},sbt=ct`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{position:relative;display:none;inline-size:100%;flex:1 1 auto;overflow:hidden}:host([selected]){display:flex}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}.back-button{border-width:0px;border-style:solid;border-inline-end-width:1px;border-color:var(--calcite-flow-border-color, var(--calcite-color-border-3))}calcite-panel{--calcite-panel-background-color: var(--calcite-flow-background-color);--calcite-panel-border-color: var(--calcite-flow-border-color, var(--calcite-flow-item-header-border-block-end));--calcite-panel-corner-radius: var(--calcite-flow-corner-radius);--calcite-panel-description-text-color: var(--calcite-flow-description-text-color);--calcite-panel-footer-background-color: var(--calcite-flow-footer-background-color);--calcite-panel-footer-space: var(--calcite-flow-footer-space, var(--calcite-flow-item-footer-padding));--calcite-panel-header-action-background-color-hover: var(--calcite-flow-header-action-background-color-hover);--calcite-panel-header-action-background-color-press: var(--calcite-flow-header-action-background-color-press);--calcite-panel-header-action-background-color: var(--calcite-flow-header-action-background-color);--calcite-panel-header-action-indicator-color: var(--calcite-flow-header-action-indicator-color);--calcite-panel-header-action-text-color-press: var(--calcite-flow-header-action-text-color-press);--calcite-panel-header-action-text-color: var(--calcite-flow-header-action-text-color);--calcite-panel-header-background-color: var(--calcite-flow-header-background-color);--calcite-panel-header-content-space: var(--calcite-flow-header-content-space);--calcite-panel-heading-text-color: var(--calcite-flow-heading-text-color);--calcite-panel-icon-color: var(--calcite-flow-icon-color);--calcite-panel-space: var(--calcite-flow-space)}:host([hidden]){display:none}[hidden]{display:none}`,BN=class BN extends dt{constructor(){super(...arguments),this.backButtonRef=vi(),this.containerRef=vi(),this.messages=un(),this.focusSetter=dn()(this),this.closable=!1,this.closed=!1,this.collapseDirection="down",this.collapsed=!1,this.collapsible=!1,this.disabled=!1,this.iconFlipRtl=!1,this.loading=!1,this.menuOpen=!1,this.overlayPositioning="absolute",this.scale="m",this.selected=!1,this.showBackButton=!1,this.calciteFlowItemBack=Re(),this.calciteFlowItemClose=Re({cancelable:!1}),this.calciteFlowItemCollapse=Re({cancelable:!1}),this.calciteFlowItemExpand=Re({cancelable:!1}),this.calciteFlowItemScroll=Re({cancelable:!1}),this.calciteFlowItemToggle=Re({cancelable:!1}),this.calciteInternalFlowItemChange=Re({cancelable:!1})}async scrollContentTo(e){var i;await((i=this.containerRef.value)==null?void 0:i.scrollContentTo(e))}async setFocus(e){return this.focusSetter(()=>this.backButtonRef.value||this.containerRef.value,e)}willUpdate(e){e.has("selected")&&(this.hasUpdated||this.selected!==!1)&&this.calciteInternalFlowItemChange.emit(),e.has("collapsed")&&this.hasUpdated&&(this.collapsed?this.calciteFlowItemCollapse.emit():this.calciteFlowItemExpand.emit())}updated(){Vs(this)}handleInternalPanelScroll(e){e.target===this.containerRef.value&&(e.stopPropagation(),this.calciteFlowItemScroll.emit())}handleInternalPanelClose(e){e.target===this.containerRef.value&&(e.stopPropagation(),this.closed=!0,this.calciteFlowItemClose.emit())}handleInternalPanelToggle(e){e.target===this.containerRef.value&&(e.stopPropagation(),this.collapsed=e.target.collapsed,this.calciteFlowItemToggle.emit())}backButtonClick(){this.calciteFlowItemBack.emit()}renderBackButton(){const{el:e}=this,i=Uo(e)==="rtl",{showBackButton:r,backButtonClick:n,messages:s}=this,a=s.back,o=i?cde.backRight:cde.backLeft;return r?nt("flow-back-button",q`<calcite-action .ariaLabel=${a} class=${H(nbt.backButton)} .icon=${o} @click=${n} scale=s slot=${al.headerActionsStart} .text=${a} title=${a??Xe} ${gt(this.backButtonRef)}></calcite-action>`):null}render(){const{collapsed:e,collapseDirection:i,collapsible:r,closable:n,closed:s,description:a,disabled:o,heading:l,headingLevel:c,loading:h,menuOpen:m,messages:g,overlayPositioning:v,beforeClose:b,icon:x,iconFlipRtl:$}=this;return Us({disabled:o,children:q`<calcite-panel .beforeClose=${b} .closable=${n} .closed=${s} .collapseDirection=${i} .collapsed=${e} .collapsible=${r} .description=${a} .disabled=${o} .heading=${l} .headingLevel=${c} .icon=${x} .iconFlipRtl=${$} .loading=${h} .menuOpen=${m} .messageOverrides=${g} @calcitePanelClose=${this.handleInternalPanelClose} @calcitePanelScroll=${this.handleInternalPanelScroll} @calcitePanelToggle=${this.handleInternalPanelToggle} .overlayPositioning=${v} .scale=${this.scale} ${gt(this.containerRef)}>${this.renderBackButton()}<slot name=${al.actionBar} slot=${Gr.actionBar}></slot><slot name=${al.alerts} slot=${Gr.alerts}></slot><slot name=${al.headerActionsStart} slot=${Gr.headerActionsStart}></slot><slot name=${al.headerActionsEnd} slot=${Gr.headerActionsEnd}></slot><slot name=${al.headerContent} slot=${Gr.headerContent}></slot><slot name=${al.headerMenuActions} slot=${Gr.headerMenuActions}></slot><slot name=${al.fab} slot=${Gr.fab}></slot><slot name=${al.contentTop} slot=${Gr.contentTop}></slot><slot name=${al.contentBottom} slot=${Gr.contentBottom}></slot><slot name=${al.footerStart} slot=${Gr.footerStart}></slot><slot name=${al.footer} slot=${Gr.footer}></slot><slot name=${al.footerEnd} slot=${Gr.footerEnd}></slot><slot name=${al.footerActions} slot=${Gr.footerActions}></slot><slot></slot></calcite-panel>`})}};BN.properties={beforeBack:[0,{},{attribute:!1}],beforeClose:[0,{},{attribute:!1}],closable:[7,{},{reflect:!0,type:Boolean}],closed:[7,{},{reflect:!0,type:Boolean}],collapseDirection:1,collapsed:[7,{},{reflect:!0,type:Boolean}],collapsible:[7,{},{reflect:!0,type:Boolean}],description:1,disabled:[7,{},{reflect:!0,type:Boolean}],heading:1,headingLevel:[11,{},{type:Number,reflect:!0}],icon:[3,{},{reflect:!0}],iconFlipRtl:[7,{},{reflect:!0,type:Boolean}],loading:[7,{},{reflect:!0,type:Boolean}],menuOpen:[7,{},{reflect:!0,type:Boolean}],messageOverrides:[0,{},{attribute:!1}],overlayPositioning:[3,{},{reflect:!0}],scale:[3,{},{reflect:!0}],selected:[7,{},{reflect:!0,type:Boolean}],showBackButton:[5,{},{type:Boolean}]},BN.styles=sbt;let rN=BN;ci("calcite-flow-item",rN);const lMe=Object.freeze(Object.defineProperty({__proto__:null,FlowItem:rN},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const TB={frame:"frame",frameAdvancing:"frame--advancing",frameRetreating:"frame--retreating"},abt=ct`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host{position:relative;display:flex;inline-size:100%;flex:1 1 auto;align-items:stretch;overflow:hidden;background-color:transparent}:host .frame{position:relative;margin:0;display:flex;inline-size:100%;flex:1 1 auto;flex-direction:column;align-items:stretch;padding:0;animation-name:none;animation-duration:var(--calcite-animation-timing);background-color:var(--calcite-flow-background-color)}:host ::slotted(*){display:none;block-size:100%}:host ::slotted(*[selected]){display:flex}:host ::slotted(.calcite-match-height:last-child){display:flex;flex:1 1 auto;overflow:hidden}:host .frame--advancing{animation-name:calcite-frame-advance}:host .frame--retreating{animation-name:calcite-frame-retreat}@keyframes calcite-frame-advance{0%{--tw-bg-opacity: .5;transform:translate3d(50px,0,0)}to{--tw-bg-opacity: 1;transform:translateZ(0)}}@keyframes calcite-frame-retreat{0%{--tw-bg-opacity: .5;transform:translate3d(-50px,0,0)}to{--tw-bg-opacity: 1;transform:translateZ(0)}}:host([hidden]){display:none}[hidden]{display:none}`,qN=class qN extends dt{constructor(){super(),this.frameRef=vi(),this.itemMutationObserver=Gn("mutation",()=>this.updateItemsAndProps()),this.items=[],this.selectedIndex=-1,this.focusSetter=dn()(this),this.flowDirection="standby",this.listen("calciteInternalFlowItemChange",this.handleCalciteInternalFlowItemChange),this.listen("calciteFlowItemBack",this.handleItemBackClick)}async back(){const{items:e,selectedIndex:i}=this,r=e[i],n=e[i-1];if(!r||!n)return;const s=r.beforeBack?r.beforeBack:()=>Promise.resolve();try{await s.call(r)}catch{return}return r.selected=!1,n.selected=!0,n}async setFocus(e){return this.focusSetter(()=>this.items[this.selectedIndex],e)}connectedCallback(){var e;super.connectedCallback(),(e=this.itemMutationObserver)==null||e.observe(this.el,{childList:!0,subtree:!0})}willUpdate(e){e.has("flowDirection")&&(this.hasUpdated||this.flowDirection!=="standby")&&this.handleFlowDirectionChange(this.flowDirection)}loaded(){this.updateItemsAndProps()}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this.itemMutationObserver)==null||e.disconnect()}async handleFlowDirectionChange(e){e==="standby"||!this.frameRef.value||(await bhe(this.frameRef.value,e==="retreating"?"calcite-frame-retreat":"calcite-frame-advance"),this.resetFlowDirection())}handleCalciteInternalFlowItemChange(e){e.stopPropagation(),this.updateFlowProps()}async handleItemBackClick(e){if(!e.defaultPrevented)return await this.back(),this.setFocus()}resetFlowDirection(){this.flowDirection="standby"}getFlowDirection(e,i){const r=e>0;return!(e>-1&&i>0)&&!r?"standby":i<e?"retreating":"advancing"}updateItemsAndProps(){const{customItemSelectors:e,el:i}=this,r=Array.from(i.querySelectorAll(`calcite-flow-item${e?`,${e}`:""}`)).filter(n=>n.closest("calcite-flow")===i);this.items=r,this.ensureSelectedFlowItemExists(),this.updateFlowProps()}updateFlowProps(){const{selectedIndex:e,items:i}=this,r=this.findSelectedFlowItemIndex(i);i.forEach((n,s)=>{const a=s===r;a||(n.menuOpen=!1),n.showBackButton=a&&r>0}),r!==-1&&(e!==r&&(this.flowDirection=this.getFlowDirection(e,r)),this.selectedIndex=r)}findSelectedFlowItemIndex(e){const i=e.slice(0).reverse().find(r=>!!r.selected);return e.indexOf(i)}ensureSelectedFlowItemExists(){const{items:e}=this;if(this.findSelectedFlowItemIndex(e)!==-1)return;const r=e[e.length-1];r&&(r.selected=!0)}render(){const{flowDirection:e}=this,i={[TB.frame]:!0,[TB.frameAdvancing]:e==="advancing",[TB.frameRetreating]:e==="retreating"};return q`<div class=${H(i)} ${gt(this.frameRef)}><slot></slot></div>`}};qN.properties={flowDirection:[16,{},{state:!0}],customItemSelectors:1},qN.styles=abt;let nN=qN;ci("calcite-flow",nN);const obt=Object.freeze(Object.defineProperty({__proto__:null,Flow:nN},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const E3={title:"title",message:"message",link:"link",actionsEnd:"actions-end"},qM={actionsEnd:"actions-end",close:"notice-close",container:"container",content:"notice-content",icon:"notice-icon"},lbt=ct`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([scale=s]){--calcite-notice-spacing-token-small: .5rem;--calcite-notice-spacing-token-large: .75rem}:host([scale=s]) .container slot[name=title]::slotted(*),:host([scale=s]) .container *::slotted([slot=title]){margin-block:.125rem;font-size:var(--calcite-font-size--1);line-height:1.375}:host([scale=s]) .container slot[name=message]::slotted(*),:host([scale=s]) .container *::slotted([slot=message]){margin-block:.125rem;font-size:var(--calcite-font-size--2);line-height:1.375}:host([scale=s]) ::slotted(calcite-link){margin-block:.125rem;font-size:var(--calcite-font-size--2);line-height:1.375}:host([scale=s]) .notice-close{padding:.5rem}:host([scale=m]){--calcite-notice-spacing-token-small: .75rem;--calcite-notice-spacing-token-large: 1rem}:host([scale=m]) .container slot[name=title]::slotted(*),:host([scale=m]) .container *::slotted([slot=title]){margin-block:.125rem;font-size:var(--calcite-font-size-0);line-height:1.375}:host([scale=m]) .container slot[name=message]::slotted(*),:host([scale=m]) .container *::slotted([slot=message]){margin-block:.125rem;font-size:var(--calcite-font-size--1);line-height:1.375}:host([scale=m]) ::slotted(calcite-link){margin-block:.125rem;font-size:var(--calcite-font-size--1);line-height:1.375}:host([scale=l]){--calcite-notice-spacing-token-small: 1rem;--calcite-notice-spacing-token-large: 1.25rem}:host([scale=l]) .container slot[name=title]::slotted(*),:host([scale=l]) .container *::slotted([slot=title]){margin-block:.125rem;font-size:var(--calcite-font-size-1);line-height:1.375}:host([scale=l]) .container slot[name=message]::slotted(*),:host([scale=l]) .container *::slotted([slot=message]){margin-block:.125rem;font-size:var(--calcite-font-size-0);line-height:1.375}:host([scale=l]) ::slotted(calcite-link){margin-block:.125rem;font-size:var(--calcite-font-size-0);line-height:1.375}:host([width=auto]){--calcite-notice-width: auto}:host([width=half]){--calcite-notice-width: 50%}:host([width=full]){--calcite-notice-width: 100%}:host{margin-inline:auto;display:none;max-inline-size:100%;align-items:center;inline-size:var(--calcite-notice-width)}.container{pointer-events:none;margin-block:0px;box-sizing:border-box;display:flex;inline-size:100%;opacity:0;overflow:hidden;max-block-size:0;transition-property:opacity,max-block-size;transition-duration:var(--calcite-animation-timing);text-align:start;border-inline-start:var(--calcite-border-width-md) solid;box-shadow:0 0 0 0 transparent;background-color:var(--calcite-notice-background-color, var(--calcite-color-foreground-1))}.notice-close{outline-color:transparent}.notice-close:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}:host{display:flex}:host([open]) .container{pointer-events:auto;max-block-size:100%;align-items:center;opacity:1;--tw-shadow: 0 4px 8px -1px rgba(0, 0, 0, .08), 0 2px 4px -1px rgba(0, 0, 0, .04);--tw-shadow-colored: 0 4px 8px -1px var(--tw-shadow-color), 0 2px 4px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow);overflow:visible}.container slot[name=title]::slotted(*),.container *::slotted([slot=title]){margin:0;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-notice-title-text-color, var(--calcite-color-text-1))}.container slot[name=message]::slotted(*),.container *::slotted([slot=message]){margin:0;display:inline;font-weight:var(--calcite-font-weight-normal);margin-inline-end:var(--calcite-notice-spacing-token-small);color:var(--calcite-notice-content-text-color, var(--calcite-color-text-2))}.notice-content{box-sizing:border-box;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;padding-inline:var(--calcite-notice-spacing-token-large);flex:0 0 auto;display:flex;min-inline-size:0px;flex-direction:column;overflow-wrap:break-word;flex:1 1 0;padding-block:var(--calcite-notice-spacing-token-small);padding-inline:0 var(--calcite-notice-spacing-token-small)}.notice-content:first-of-type:not(:only-child){padding-inline-start:var(--calcite-notice-spacing-token-large)}.notice-content:only-of-type{padding-block:var(--calcite-notice-spacing-token-small);padding-inline:var(--calcite-notice-spacing-token-large)}.notice-icon{display:flex;align-items:center;box-sizing:border-box;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;padding-block:var(--calcite-notice-spacing-token-small);padding-inline:var(--calcite-notice-spacing-token-large);flex:0 0 auto}.notice-close{display:flex;cursor:pointer;align-items:center;align-self:stretch;border-style:none;background-color:transparent;outline:2px solid transparent;outline-offset:2px;box-sizing:border-box;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;padding-block:var(--calcite-notice-spacing-token-small);padding-inline:var(--calcite-notice-spacing-token-large);flex:0 0 auto;-webkit-appearance:none;color:var(--calcite-notice-close-icon-color, var(--calcite-color-text-3))}.notice-close:hover,.notice-close:focus{background-color:var(--calcite-notice-close-background-color-focus, var(--calcite-color-foreground-2));color:var(--calcite-notice-close-icon-color-hover, var(--calcite-color-text-1))}.notice-close:active{background-color:var(--calcite-notice-close-background-color-press, var(--calcite-color-foreground-3))}.actions-end{display:flex;align-self:stretch}:host([kind=brand]) .container{border-color:var(--calcite-color-brand)}:host([kind=brand]) .container .notice-icon{color:var(--calcite-color-brand)}:host([kind=info]) .container{border-color:var(--calcite-color-status-info)}:host([kind=info]) .container .notice-icon{color:var(--calcite-color-status-info)}:host([kind=danger]) .container{border-color:var(--calcite-color-status-danger)}:host([kind=danger]) .container .notice-icon{color:var(--calcite-color-status-danger)}:host([kind=success]) .container{border-color:var(--calcite-color-status-success)}:host([kind=success]) .container .notice-icon{color:var(--calcite-color-status-success)}:host([kind=warning]) .container{border-color:var(--calcite-color-status-warning)}:host([kind=warning]) .container .notice-icon{color:var(--calcite-color-status-warning)}:host([hidden]){display:none}[hidden]{display:none}`,HN=class HN extends dt{constructor(){super(...arguments),this.closeButton=vi(),this.transitionProp="opacity",this.messages=un(),this.focusSetter=dn()(this),this.hasActionEnd=!1,this.closable=!1,this.iconFlipRtl=!1,this.kind="brand",this.open=!1,this.scale="m",this.width="auto",this.calciteNoticeBeforeClose=Re({cancelable:!1}),this.calciteNoticeBeforeOpen=Re({cancelable:!1}),this.calciteNoticeClose=Re({cancelable:!1}),this.calciteNoticeOpen=Re({cancelable:!1})}async setFocus(e){return this.focusSetter(()=>this.el.querySelector("calcite-link")||this.closeButton.value,e)}async load(){this.requestedIcon=Gw(BB,this.icon,this.kind)}willUpdate(e){e.has("open")&&(this.hasUpdated||this.open!==!1)&&IT(this),(e.has("icon")||e.has("kind")&&(this.hasUpdated||this.kind!=="brand"))&&(this.requestedIcon=Gw(BB,this.icon,this.kind))}onBeforeClose(){this.calciteNoticeBeforeClose.emit()}onBeforeOpen(){this.calciteNoticeBeforeOpen.emit()}onClose(){this.calciteNoticeClose.emit()}onOpen(){this.calciteNoticeOpen.emit()}setTransitionEl(e){e&&(this.transitionEl=e)}close(){this.open=!1}handleActionsEndSlotChange(e){this.hasActionEnd=ii(e)}render(){const e=q`<button .ariaLabel=${this.messages.close} class=${H(qM.close)} @click=${this.close} ${gt(this.closeButton)}><calcite-icon icon=x .scale=${gr(this.scale)}></calcite-icon></button>`;return q`<div class=${H(qM.container)} ${gt(this.setTransitionEl)}>${this.requestedIcon?q`<div class=${H(qM.icon)}><calcite-icon .flipRtl=${this.iconFlipRtl} .icon=${this.requestedIcon} .scale=${gr(this.scale)}></calcite-icon></div>`:null}<div class=${H(qM.content)}><slot name=${E3.title}></slot><slot name=${E3.message}></slot><slot name=${E3.link}></slot></div><div class=${H(qM.actionsEnd)} .hidden=${!this.hasActionEnd}><slot name=${E3.actionsEnd} @slotchange=${this.handleActionsEndSlotChange}></slot></div>${this.closable?e:null}</div>`}};HN.properties={hasActionEnd:[16,{},{state:!0}],closable:[7,{},{reflect:!0,type:Boolean}],icon:[3,{converter:Hm},{reflect:!0}],iconFlipRtl:[7,{},{reflect:!0,type:Boolean}],kind:[3,{},{reflect:!0}],messageOverrides:[0,{},{attribute:!1}],open:[7,{},{reflect:!0,type:Boolean}],scale:[3,{},{reflect:!0}],width:[3,{},{reflect:!0}]},HN.styles=lbt;let sN=HN;ci("calcite-notice",sN);const zX=Object.freeze(Object.defineProperty({__proto__:null,Notice:sN},Symbol.toStringTag,{value:"Module"})),tg=VD;/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.7 */const cbt=ct`.arcgis-feature-element-info__heading{margin-top:0;margin-bottom:var(--calcite-spacing-xxs);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size-xl);font-weight:var(--calcite-font-weight-regular);line-height:var(--calcite-font-line-height-relative-tight)}.arcgis-feature-element-info__description{margin-bottom:var(--calcite-spacing-sm);font-size:var(--calcite-font-size-sm);font-weight:var(--calcite-font-weight-regular);line-height:var(--calcite-font-line-height-relative-normal)}`,IB="arcgis-feature-element-info",MB={base:IB,heading:`${IB}__heading`,description:`${IB}__description`};var Nw;let ubt=(Nw=class extends dt{constructor(){super(...arguments),this.headingLevel=2}render(){return q`<div class=${H(MB.base)}>${this._renderHeading()}${this._renderDescription()}</div>`}_renderHeading(){const{heading:e}=this;return e?JE({class:MB.heading,level:this.headingLevel,excludeGlobalCss:!0,children:q`<div .innerHTML=${tg.sanitize(e)??""}></div>`}):null}_renderDescription(){const{description:e}=this;return e?q`<div class=${H(MB.description)} .innerHTML=${tg.sanitize(e)??""}></div>`:null}},Nw.properties={description:1,headingLevel:9,heading:1},Nw.styles=cbt,Nw);yr("arcgis-feature-element-info",ubt);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.7 */const dbt=(t,e)=>i=>pbt(i,t);var GN,hk,pk,jv,cMe,uMe,dMe,Bde;let hbt=(Bde=class extends mJ{constructor(i,r){var c;super(i,r);bi(this,jv);bi(this,GN,new Map);bi(this,hk);bi(this,pk);new DIe(i);const n=this,s=n.instance;let a=s.viewModel,o=s.visibleElements;const l=new Proxy(this.exports,{get(h,m,g){return m==="viewModel"?a:m==="visibleElements"?o:Reflect.get(h,m,g)}});if(oi(n,pk,s),n.instance=l,n.exports=l,a){const h={component:i,get exports(){return n.instance.viewModel}};dit(n).set("viewModel","viewModel"),i.addController(h),a=Xxe(i,new WeakRef(h),s2e(i)-1,a,Ze(n,GN))}n.instance.visibleElements&&(o=Vu(c=n,jv,cMe).call(c,s))}hostConnected(){this.instance=Ze(this,pk),super.hostConnected()}hostLoad(){oi(this,hk,be(()=>this.component.el.view,i=>{const r=this.instance;!("view"in r)&&typeof r.viewModel=="object"?r.viewModel.view=i:r.view=i,!("map"in r)&&typeof r.viewModel=="object"?r.viewModel.map=i==null?void 0:i.map:r.map=i==null?void 0:i.map},{sync:!0,initial:!0}))}hostUpdate(i){i.has("closed")&&(this.instance.visible=!this.component.closed)}hostLoaded(){const{el:i}=this.component;i.childElem??(i.childElem=document.createElement("div")),this.instance.container=i.childElem,(this.component.el.shadowRoot??this.component.el).appendChild(this.instance.container),this.component.closed!==void 0&&this.onLifecycle(()=>be(()=>this.instance.visible,r=>this.component.closed=!r,{initial:!0}))}hostDestroy(){var i;(i=Ze(this,hk))==null||i.remove(),super.hostDestroy()}},GN=new WeakMap,hk=new WeakMap,pk=new WeakMap,jv=new WeakSet,cMe=function(i){return new Proxy(i.visibleElements,{get:(r,n)=>{if(typeof n=="symbol"||n in Promise.prototype)return r[n];const s=[n],a=Vu(this,jv,uMe).call(this,s);return gW(this.component,o=>{const l=o;this.component[l]=!1;let c=i.visibleElements??{},h;for(const g of s.slice(0,-1))if(typeof c[g]=="object"&&c[g]!==null)c=c[g];else{h=!!c[g];break}h===void 0&&(h=!!(c[s.slice(-1)[0]]??!0));const m=l.startsWith("hide")||l.startsWith("show")?l.startsWith("hide"):h;this.onUpdate(g=>{if(g.has(l)){const v=this.component[l];Vu(this,jv,dMe).call(this,s,v,m)}})},a)}})},uMe=function(i){const r=new Proxy({},{get:(n,s)=>{const a=Reflect.get(n,s);return typeof s=="symbol"||s in Promise.prototype?a:(i.push(s),r)}});return r},dMe=function(i,r,n){let s=this.instance.visibleElements??{};for(const o of i.slice(0,-1))(typeof s[o]!="object"||s[o]===null)&&(s[o]={}),s=s[o];const a=!!(n?!r:r);s[i.at(-1)]=a},Bde);const pbt=bk(hbt);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.7 */const fbt=ct`.esri-attachments__progress-bar:before,.esri-attachments__progress-bar:after{opacity:var(--calcite-opacity-100);content:"";height:1px;transition:opacity .5s ease-in-out;position:absolute;top:0}.esri-attachments__progress-bar:before{z-index:0;background-color:var(--calcite-color-foreground-2);width:100%}.esri-attachments__progress-bar:after{z-index:0;background-color:var(--calcite-color-text-2);width:20%;animation:1.5s linear infinite looping-progresss-bar-ani}.esri-attachments{background-color:var(--calcite-color-background)!important;width:100%}.esri-attachments__loader-container{justify-content:center;align-items:center;height:150px;padding:0;display:flex}.esri-attachments__loader{background:url(data:image/gif;base64,R0lGODlhIQAnALMKAAB6wrze86TR7Y3F53W44V6s2kaf1C+TzheGyNPq+f///wAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDE0IDc5LjE1Njc5NywgMjAxNC8wOC8yMC0wOTo1MzowMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1MkRGQzEzOEQ3MUIxMUU0QjJCRTkxRjI3NjA5MTc2MyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo2RDdDRTgwM0Q3MjAxMUU0QjJCRTkxRjI3NjA5MTc2MyIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo2RDdDRTgwMkQ3MjAxMUU0QjJCRTkxRjI3NjA5MTc2MyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxNCAoTWFjaW50b3NoKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOmQyYThhNjgzLWIwNjctNDhhZi05Nzc0LTZiOTZkM2RhMjI2OCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo1MkRGQzEzOEQ3MUIxMUU0QjJCRTkxRjI3NjA5MTc2MyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgH//v38+/r5+Pf29fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWEg4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxLSklIR0ZFRENCQUA/Pj08Ozo5ODc2NTQzMjEwLy4tLCsqKSgnJiUkIyIhIB8eHRwbGhkYFxYVFBMSERAPDg0MCwoJCAcGBQQDAgEAACH5BAkEAAoALAAAAAAhACcAAASOUMlJq70W6L2xv1z4jVPIkaTZoZ+qsa0Ley4wY7WU7Dyv9z1JTgEMEos7oeyI/DUVQ2SSWVSqnFUq0GrCbrXGqNQbXkoTZB/UPAarxc8zV+SeytfXOlo/P/H/cFl3gV+DbHFthEaGeXeMXX+PdI6Jh4KVjW2SfpRPQzcVn6AlS6OkeaZ9K6l4kKyirLEXEQAh+QQJBAAKACwAAAAAIQAnAAAEqFDJSau9OOutkP8fx4GkuJGgqaGhirGe+8JSYN+3CCM1jkuJoFAo2fV8NuBwWKQpkDnFktlxQpPSabDJOiKVWi7K6wNPxaXn1bxEp9RQNtUI/2bD1W69fD/nx3s/fW1/aVcBckSFb4eJW4stjYNzVmuTinSSWo+ZlpsJbpGem6ExgVGfpTynWKmQppqkr6uxeJ1xl5yVuCdOMhV0vxTBwqrFw77HysvFEQAh+QQFBAAKACwAAAAAIQAnAAAEqFDJSau9OOvNez5gGHqaaJKfOaKXugpwHHcuKMk4Xd/4rCTAYFBSO/B6AolwSdwpkDDlcqgoHnvSaaLpuuZ+2m3VCU2CtVyVV5adpk9PaJs57saRc+FbtPaFxVZ3WGdudWqCX397L3KEdIFleVSQjYqGcJGOepd8iGyak2SVYYs2nn6knIx4oEClRqdRrYCirJaUtqm4gxu7X71OLBWBwhTExcjJysseEQAh+QQJBAAKACwBAAMAFAAhAAAEU9DIOZW9WNGd+6Zd9lXKYJ7nKFloqxpsm6qxPLy1jJf2TfO2Xc83yrl+Q2FPGUQunc0iUAelSpPV4/W5jX6MKKb1O9WSsd0xpxzOtqUhyy6u+dEjACH5BAkEAAoALAAAAAAhACcAAASAUMlJq7046827/10hjiOIkahErCwboqXSzi9cqLPL2SKeEzWYLxdMyX7AHW9IU9qYrSIJqtvwbsefNIZMWpdZolMYbn6f5ejY2N320lXNlbpyY9vrKbye5yLtdF5yYHhnZIWDaIgZc3uCjIR/fW+LJ5Fak3eShkYmnp+goaKjHREAIfkECQQACgAsAAAAACEAJwAABKhQyUmrvTjrzbv/IFaMJNkRaJpKZXuqKtuaHBwrM73ZK54XkoRwOJTwULJckEg0HpOzJVPo5EFdimlRcSRcS9Jp1falaancp0+ZPY9h5VGY+b79gG1tvXefN9NWa1F5YoBkglhnCXtIiGCEdIZwjmZuknY/fltdcXiKjF6UcpB/nKKelqZ9pJtqq5+XfJmsaKqzsLZsuK6zO7xsvoGrIRXDxMfIycrLxBEAIfkEBQQACgAsAAAAACEAJwAABKdQyUmrvTjrzbu3RiiKXzaeJXaO3eC+r7SSHGzLs9HasZLrioRwOJTwej8JcWk8DnAz5bKocD59Oek00TxCV9ppl/dFBbfcqrPMOm/HN2zULVZ75WA6007Gm9FpVmw0gHAwgyFhe4J+bYV8cUl6RIZIWZNUjJKPmpeca42EaJUuiECfd5ujkIehiZhCpFeqb6yWc6h9khudcykVu78TwcKuQMXIycrKEQAh+QQJBAAKACwBAAMAFAAhAAAEVVDJSdW5GNed+65dJowkKYVYqZ7ooZYs+ppWO49xeAt5t/eiGzAlrMmKLRfStjzOhpefUdekPqe+avaalHa1QS5T7HxBlWSrGRtef9OezyQpn7fq5wgAIfkECQQACgAsAAAAACEAJwAABIBQyUmrvTjrzZH/H9eBoLiRpZmhoYqxnhjMNC3BiFzXN6zvsx7rBxSiiDsjCclT4Jg2p48DjD6p1YAytclqpUNsddvqZskxcRF8VCfZS3fzah7DuRovOie3TutrdHlnd2WDdoIZeoVpgG+JGIuQF5J/LhWTl5kumyqdJp+XoqMiEQAh+QQJBAAKACwAAAAAIQAnAAAEjlDJSau9OIPNef5VJ4KkInYleHqptgKtu8bYC5NJruuSLe3AH5BnegmHieOwZ1Qgc8pgceZ8RndM6jNZRWZPV+L2O+ouzVIfGrsmqsdt6BQc58Lf1joZpe/jvX5NcHeCeYRahnl/Z4d0g4qFgI1lj4CLUpN8lWeXbCpNNCGgoRNqpKWjp6anc2WsrXyvrBEAIfkECQQACgAsAAAAACEAJwAABKlQyUmrvTjrzZH/H9eBoLiRpZmhoYqxnvvCUmDft5TsPC/BiBoOp+v1fjTFkKgwHhVA4TJQdCaQLOmy6sSitEOu0UsCM607cmpqEz+jSrbbB02yqU20unWfp+tZcVN+V4Bfglt5VnsxiGGKXYZljmd6kmtykGOXfJlohXB9mm92npahpoucjaKfjEGUOaN0qIOzf7WJJ6W2u4EyFXDAFMLDr8bEScjLzBoRACH5BAUEAAoALAAAAAAhACcAAASqUMlJq7046827t0coil82niV2jum1koogz3P3hhKtS0nv+5LbIaerKX7I4I1YFPCQQIWQWXxCE8oXdXe8YqXLWNPZvWZXW5oVekaJm+skWPuultlzdJ3r/U73andyf2NkfW0sgEaHeW6FcT+IMI+CkY2JlIyEY5BRm3CVnmGZXpI4ijKdPaZDqIall5Ocoauxp6Rmtq2UG592vaOzwHQtFH/FE8fIy8zNzBEAIfkECQQACgAsDAADABQAIQAABFPQyDmVvVjRnfumXfZVymCe5yhZaKsabJuqsTy8tYyX9k3ztl3PN8q5fkNhTxlELp3NIlAHpUqT1eP1uY1+jCim9TvVkrHdMacczralIcsurvnRIwAh+QQJBAAKACwAAAAAIQAnAAAEgFDJSau9OOvNu/8gVowkGV5lKhFs23ZpubouHI8zzdp3rvMxHw2oUuhenBvOeCQQZczj0xT9JZXC2rVXHW6DXe1GWcgix9jwWUM2777FphMOlU+Xdjo1j+by2Wl/GW1qb31ggiKBTXdlhXOHcYx6eJORdZaAfpmDaSefoKGio58RACH5BAkEAAoALAAAAAAhACcAAASoUMlJq7046827/2AoFWRZdkSqqqNpouvauiQcpzMtJXzfSzeWgnZS+I7AICHn2h1/CuVySCw4n4lkkPkyYrNRJbf4BUvHNS9We0Nb1U92zH2Nh7dUYh15b+d1cHxnf02BPnIyhF1liEJVb4x9c4pkX404lGmRg497h5KJnYZQnFWepGKZkJagjqajPJdTopuptKylehy5gBu8hb62ryIUosTHyMnKyxIRACH5BAUEAAoALAAAAAAhACcAAASpUMlJq7046827/5IhjiOIkah5oWQ3vDAcsqIbxzMtJXzfSzecglZT+I7A4CvH2h1/CuVySHQ+E0klM2W8YqPSbat7zQbFJfLTfEMXvV/pwG2wrsFaqk6NxJ/1TXw+bEJEdYJQcnR2fYqAXHCEMo9jkX5tlGmWjoaMg5eFVYg8klOdo3FhmW9epXOrh5uqp7J5tK2gk6cbnKK8s74qE7vCi8XDwcfKy8wWEQAh+QQJBAAKACwMAAMAFAAhAAAEVVDJSdW5GNed+65dJowkKYVYqZ7ooZYs+ppWO49xeAt5t/eiGzAlrMmKLRfStjzOhpefUdekPqe+avaalHa1QS5T7HxBlWSrGRtef9OezyQpn7fq5wgAIfkECQQACgAsAAAAACEAJwAABIBQyUmrvTjrzTf6INh5YThqpXliqbhe7dcFdF1LMTLbNh7vPJqvBQwOU0XesZTsKXLN2/PHCUqhVWtgqdpot1Ni1sp1ebVl2dgYRq6VbebbiT2T413NN62bX6l2bHV6aHhmhHeDGXuGaoFwihiMkReTgC8UlC+aK5wnniOgmKOjEQAh+QQJBAAKACwAAAAAIQAnAAAEjlDJSau9OGsFuvdbyH2fuJGlmaGgirGd+8LyBQNSou97zvOSm++nGxKDNAWxp1wmkCzjTwocRZtLKlOIPXanVpS2+K1ync/yNokep89ON1SsJrfDJHn9zY7v53l/gnBZg32Fd4ReiYeLfopgjFd3knSUj42RmJN+lYE1FFygE6KjeCmmpy2ppaOtoK+pFhEAIfkECQQACgAsAAAAACEAJwAABI1QyUmrvTjrzTf6INh5YThqpXliqbhe7ffCsZTcOG7nuRQjO94tKPTVFEIdMpkwtog8aE/xkyqZTeoRax1qn8tkN1sNF83Rb2rMVpfaXLcqHi/Tmc41elrf4vdKdn99YHdici6GZ4KHhHqKaYxnjm+AXpRzg3+SaZguMxRloBOio4gypnmVqaWjramwLxEAIfkEBQQACgAsAAAAACEAJwAABIpQyUmrvTjrzbv/0iGOI4iRqHmhpGqxpUvBopTcOG7neUjvvBsw6IMNeceegnZI6hTBJ9MphEYTRRYVa41mU11iGLn8jZVX7vT8TH9b7Kq7bIxz5+s53qy/vmN9XnRadlt/NYWJeX6KfIx7dYFii4KQhJJklGKWYJhKazKHTaGipKWmoKGppqytrBEAIfkECQQACgAsFwADAAkAIQAABBLQyEmrvTjrzbv/YCiOZGmeZQQAIfkECQQACgAsAAAAACEAJwAABFBQyUmrvTjrzbv/YCgVZFmKlqmilWqylHvCo1zQtYwr9o33O+DPFiQOdUdXEUkTNo1PJsw5hValLGrWusWitF9u2CsCl8Vncsi8Ru/e8PguAgAh+QQJBAAKACwAAAAAIQAnAAAEhlDJSau9OOvNu/9gKIZEaZpjda4ptZ5SIs9zTNPSiyo3zveynI5gAxZ7Qt3xtvQNiT9jFKl4NmtTZnV4DWad3C8W6LWKveRE8tVVn93mdHvNes+3Srs+Tr7zpXJ4bHqBf1SFYYGIeYp9gnWNUoZai4ORVJM+lXUtjzCdnjudZqClpqeoqRsRACH5BAUEAAoALAAAAAAhACcAAASFUMlJq7046827/2AojuQ2nChaTmkrJXAcv7IstSldw/p+46deTWhTAIOK3SypTPyAxGXTaTxGeUzlE3elTreurE88rELJxa+Zi5Y2wbk2Vn0cdO/rsJpulXvfeXF7gHV4fGeDWoEqfniFjZCPiWOSgIdsk2WVipdhK4+ffSujpKWmp6grEQAh+QQJBAAKACwXAAYACQAbAAAEEFDISau9OOvNu/9gKI5kyUUAIfkECQQACgAsAAAAACEAJwAABElQyUmrvTjrzbv/YCiOZGkqQaqqJ7qu7QufMkvXQYzrNS/7L+DMhMvdesdfMrgclopCG3HXlD6pU2RWuWV2nSRoa0wum8/o9CYCACH5BAUEAAoALAAAAAAhACcAAARsUMlJq7046827/2AojmRpckmqqtLqti6rxDKdwjQe6+9s8ytg7efLFXfHni0hvCWDz6Fx2WRGndSrNcsldqfeMHiM/JbFZ7ISvVZDze20PE5/s+1u6Ry/19f9fH9Yd4CFTieIiYqLjI2OjyQRACH5BAUEAAoALAAAAAABAAEAAAQCUEUAIfkEBQQACgAsAAAAAAEAAQAABAJQRQA7) 50% no-repeat;width:100%;height:64px}.esri-attachments__actions{flex-flow:wrap;padding:6px 7px;display:flex}.esri-attachments__item-add-icon{font-size:var(--calcite-font-size-xl);margin:0;padding:0 7px}.esri-attachments__delete-button{color:var(--calcite-color-status-danger);width:auto;margin-right:auto}.esri-attachments .esri-attachments__items{width:100%;margin:0;padding:0;display:flex}.esri-attachments .esri-attachments__item{margin:0;line-height:var(--calcite-font-line-height-relative-tight);list-style-type:none}.esri-attachments__item-button{outline-offset:-4px;cursor:pointer;width:100%;text-align:unset;color:var(--calcite-color-text-2);background-color:var(--calcite-color-foreground-2);border:1px solid var(--calcite-color-foreground-1);border-radius:var(--calcite-border-width-md);align-items:center;margin:0 0 var(--calcite-spacing-xs);padding:var(--calcite-spacing-xs) 7px;text-decoration:none;transition:border-color .125s ease-in-out;display:flex;box-shadow:0 1px var(--calcite-color-foreground-1)}.esri-attachments__item-button:focus,.esri-attachments__item-button:hover{border-color:var(--calcite-color-border-white)}.esri-attachments__item-link{text-decoration:none;display:block;position:relative}.esri-attachments__item-link:hover .esri-attachments__item-link-overlay,.esri-attachments__item-link:focus .esri-attachments__item-link-overlay{opacity:1}.esri-attachments__item-add{background-color:var(--calcite-color-background);padding:6px 0}.esri-attachments__add-attachment-button{align-items:baseline!important;border-radius:var(--calcite-corner-radius-xs);border:none!important;justify-content:flex-start!important;padding:12px 3px!important;font-size:var(--calcite-font-size-sm)!important;transition:background-color .25s ease-in-out}.esri-attachments__add-attachment-button:hover{background-color:var(--calcite-color-foreground-1)!important;text-decoration:none;box-shadow:0 1px 2px #0000004d}.esri-attachments__item-link-overlay{opacity:0;pointer-events:none;-webkit-user-select:none;user-select:none;justify-content:center;align-items:center;transition:opacity .25s ease-in-out;display:flex;position:absolute;inset:0}.esri-attachments__item-link-overlay-icon{color:var(--calcite-color-foreground-2);background-color:var(--calcite-color-foreground-1);border-radius:100%;justify-content:center;align-items:center;padding:18px;display:flex}.esri-attachments__item-link-overlay-icon svg{fill:var(--calcite-color-foreground-1)}.esri-attachments__item-mask{justify-content:center;align-items:center;width:64px;height:64px;display:flex;position:relative;overflow:hidden;box-shadow:0 0 0 1px var(--calcite-color-foreground-1)}.esri-attachments__item-mask--icon{background-color:var(--calcite-color-foreground-2);padding:24px 0}.esri-attachments__item-mask--icon .esri-attachments__image{width:var(--calcite-spacing-xxxl);height:var(--calcite-spacing-xxxl)}.esri-attachments__metadata{justify-content:space-between;margin-top:3px;display:flex}.esri-attachments__metadata .esri-attachments__metadata-fieldset{text-align:center;background-color:var(--calcite-color-foreground-1);border:none;flex:0 calc(50% - 1px);margin:0;padding:6px 7px;font-size:var(--calcite-font-size-sm)}.esri-attachments__file-name{white-space:pre-wrap;word-break:break-word;word-wrap:break-word;margin-bottom:3px;font-size:var(--calcite-font-size-sm);display:inline-block}.esri-attachments__file-fieldset{border:none;margin:0;padding:var(--calcite-spacing-md) 7px}.esri-attachments__file-input{opacity:0;z-index:-1;width:.1px;height:.1px;position:absolute;overflow:hidden}.esri-attachments__container--list .esri-attachments__items{flex-flow:column}.esri-attachments__container--list .esri-attachments__item-mask{flex:none;margin-right:7px;position:relative}.esri-attachments__container--list .esri-attachments__image{max-width:unset;max-height:unset;left:50%}.esri-attachments__container--list .esri-attachments__label{flex:auto;justify-content:space-between;display:flex}.esri-attachments__container--list .esri-attachments__filename{white-space:pre-wrap;word-break:break-word;word-wrap:break-word;cursor:pointer;flex:1 0 0}.esri-attachments__container--list .esri-attachments__item-chevron-icon{cursor:pointer;flex:none;padding:0 15px}.esri-attachments__container--preview .esri-attachments__items{flex-flow:wrap;align-items:center}.esri-attachments__container--preview .esri-attachments__item{width:100%;margin-bottom:var(--calcite-spacing-md)}.esri-attachments__container--preview .esri-attachments__item-mask{width:100%;height:auto}.esri-attachments__container--preview .esri-attachments__item-button{box-shadow:none;flex-flow:column}.esri-attachments__container--preview .esri-attachments__item-button .esri-attachments__label{margin:var(--calcite-spacing-md) 0}.esri-attachments__container--preview .esri-attachments__image{max-width:100%}.esri-attachments__container--preview .esri-attachments__filename{white-space:pre-wrap;word-break:break-word;word-wrap:break-word;text-align:center;text-overflow:ellipsis;width:calc(100% - 15px);margin-top:var(--calcite-spacing-md);overflow:hidden}.esri-attachments__container--preview .esri-attachments__item-mask--icon{background-color:var(--calcite-color-foreground-1)}.esri-attachments__form-node{background-color:var(--calcite-color-foreground-1);padding:6px 7px;box-shadow:var(--calcite-shadow-sm)}.esri-attachments__form-node .esri-attachments__item-mask{box-shadow:none;width:unset;height:unset}.esri-attachments__form-node .esri-attachments__image{max-width:100%}.esri-attachments__error-message{background-color:var(--calcite-color-foreground-1);border-top:3px solid var(--calcite-color-status-danger);margin:6px 7px;padding:var(--calcite-spacing-md) 15px;animation:.25s ease-in-out esri-fade-in-down;box-shadow:0 1px 2px #0000004d}.esri-attachments__progress-bar{width:100%;position:absolute}.esri-attachments__item-mask:dir(rtl){margin-left:7px;margin-right:0}`,mbt=dbt(ys);var Dw;let gbt=(Dw=class extends dt{constructor(){super(...arguments),this.widget=mbt(this),this.viewModel=this.widget.viewModel,this.autoDestroyDisabled=!1,this.capabilities=this.widget.capabilities,this.displayType=this.widget.displayType,this.graphic=this.widget.graphic,this.hideAddButton=this.widget.visibleElements.addButton,this.hideAddSubmitButton=this.widget.visibleElements.addSubmitButton,this.hideCancelAddButton=this.widget.visibleElements.cancelAddButton,this.hideCancelUpdateButton=this.widget.visibleElements.cancelUpdateButton,this.hideDeleteButton=this.widget.visibleElements.deleteButton,this.hideErrorMessage=this.widget.visibleElements.errorMessage,this.hideProgressBar=this.widget.visibleElements.progressBar,this.hideUpdateButton=this.widget.visibleElements.updateButton,this.icon=this.widget.icon,this.label=this.widget.label,this.state=this.viewModel.state,this.submitting=this.widget.submitting,this.attachmentInfos=this.viewModel.attachmentInfos,this.attachmentKeywords=this.viewModel.attachmentKeywords,this.attachmentTypes=this.viewModel.attachmentTypes,this.arcgisPropertyChange=aD()("submitting","state","attachmentInfos"),this.arcgisReady=Re()}async destroy(){await this.manager.destroy()}},Dw.properties={autoDestroyDisabled:5,capabilities:0,displayType:1,graphic:0,hideAddButton:5,hideAddSubmitButton:5,hideCancelAddButton:5,hideCancelUpdateButton:5,hideDeleteButton:5,hideErrorMessage:5,hideProgressBar:5,hideUpdateButton:5,icon:1,label:1,position:1,referenceElement:1,state:3,submitting:4,attachmentInfos:0,attachmentKeywords:0,attachmentTypes:0},Dw.styles=fbt,Dw);yr("arcgis-attachments",gbt);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.7 */const ybt=ct``,vbt="arcgis-feature-attachments",bbt={base:vbt};var jw;let wbt=(jw=class extends dt{constructor(){super(...arguments),this._attachmentsRef=vi(),this.hideSection=!1,this.attachmentsLength=0,this.headingLevel=2}_updateAttachmentsState(){var e,i,r;this.state=(e=this._attachmentsRef.value)==null?void 0:e.state,this.attachmentsLength=((r=(i=this._attachmentsRef.value)==null?void 0:i.attachmentInfos)==null?void 0:r.length)??0}render(){return q`<div class=${H(bbt.base)}>${this.renderContent()}</div>`}renderContent(){return q`<div .hidden=${!(this.state==="loading"||this.attachmentsLength>0)}><arcgis-feature-element-info .heading=${this.heading} .description=${this.description} .headingLevel=${this.headingLevel}></arcgis-feature-element-info><arcgis-attachments @arcgisPropertyChange=${this._updateAttachmentsState} .graphic=${this.graphic} .displayType=${this.displayType} .attachmentKeywords=${this.attachmentKeywords} .attachmentTypes=${this.attachmentTypes} ${gt(this._attachmentsRef)}></arcgis-attachments></div>`}},jw.properties={hideSection:16,attachmentsLength:16,state:16,attachmentKeywords:0,attachmentTypes:0,description:1,displayType:1,graphic:0,heading:1,headingLevel:9,messages:0},jw.styles=ybt,jw);yr("arcgis-feature-attachments",wbt);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.7 */function hMe(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="feature"}function _bt(t){var e;return hMe(t)&&(t==null?void 0:t.type)==="feature"&&((e=t.source)==null?void 0:e.type)==="feature-layer"}function NX(t){return hMe(t)&&_bt(t)}const pMe=/^\s*expression\//iu,xbt=/href=(""|'')/giu,$bt=/(\{([^{\r\n]+)\})/gu,Sbt=/href\s*=\s*(?:"([^"]+)"|'([^']+)')/giu,Tbt=/'/gu,Ibt="relationships/",Mbt=/^(?:mailto:|tel:)/u;function Cbt(t,e){const i=new Map;if(!t)return i;for(const r of t){if(!r.fieldName)continue;const n=sk(r.fieldName,e);r.fieldName=n,i.set(n.toLowerCase(),r)}return i}function Ebt(t){const e=[];if(!t)return e;const{fieldInfos:i,content:r}=t;return i&&e.push(...i),!r||!Array.isArray(r)||r.forEach(n=>{if(n.type==="fields"){const s=n==null?void 0:n.fieldInfos;s&&e.push(...s)}}),e}function kbt(t,e){return(t==null?void 0:t.getEffectivePopupTemplate(e))??void 0}function dA(t){if(t!=null)return"sourceLayer"in t&&t.sourceLayer?t.sourceLayer:t.layer??void 0}function G0(t=""){return t?t.includes(Ibt):!1}function fMe(t=""){if(t)return!Mbt.test(t.trim().toLowerCase())}function sk(t,e){const i=yMe(e,t);return i?i.name:t}function Abt(t,e){return t==null?void 0:t.map(i=>sk(i,e))}function rj(t){return t?pMe.test(t):!1}function Pbt(t,e){if(!e||!rj(e)||!t)return;const i=e.replace(pMe,"").toLowerCase();return t.find(({name:r})=>r.toLowerCase()===i)}function Obt(t,e){if(!(!(t!=null&&t.length)||!e))return t.find(i=>{var r;return((r=i.fieldName)==null?void 0:r.toLowerCase())===e.toLowerCase()})}function mMe({fieldInfo:t,graphic:e}){return!!(t!=null&&t.fieldName)&&!rj(t.fieldName)&&!G0(t.fieldName)&&!(e!=null&&e.isAggregate)&&!(e!=null&&e.popupTemplate)}function XG({expressionInfos:t,fieldInfo:e,graphic:i,isContentFieldInfos:r,layer:n}){if(!(e!=null&&e.fieldName))return null;const s=Pbt(t,e==null?void 0:e.fieldName);if(s)return s.title||null;if(NX(n)&&mMe({fieldInfo:e,graphic:i})){const a=n.getFieldAlias(e.fieldName);return r?e.label||a||e.fieldName:a||e.fieldName}return e.label||e.fieldName}function Lbt({fieldInfo:t,isContentFieldInfos:e,layer:i}){var r,n;if(!(t!=null&&t.fieldName))return null;if(NX(i)){const s=(n=(r=i==null?void 0:i.getFieldConfiguration)==null?void 0:r.call(i,t.fieldName))==null?void 0:n.fieldFormat;return e&&t.fieldFormat||s}return null}function gMe(t){return t.trim()}function Fbt(t){return t.replaceAll(xbt,"")}function Rbt(t,e){var i;return`{${((i=e.get(t.toLowerCase()))==null?void 0:i.fieldName)||t}}`}function QG({formattedValues:t,template:e,fieldInfoMap:i}){return gMe(Fbt(YE(YE(e,r=>Rbt(r,i)),t)))}function yMe(t,e){return!(t&&"getField"in t&&typeof t.getField=="function")||!e?null:t.getField(e)??null}function KG(t,e){return t.replaceAll($bt,(i,r,n)=>{const s=yMe(e,n);return s?`{${s.name}}`:r})}function zbt(t,e,i=!1){const r=e[t];if(typeof r=="string"){const n=(i?encodeURIComponent(r):r).replaceAll(Tbt,"%27");e[t]=n}}function Nbt(t,e=!1){const i={...t};return Object.keys(i).forEach(r=>zbt(r,i,e)),i}function Dbt(t,e,i){e=gMe(e);const r=e&&!e.startsWith("{");return YE(t,Nbt(i,r||!1))}function jbt(t,e,i){const r=KG(t,i);return r&&r.replaceAll(Sbt,(n,s,a)=>Dbt(n,s||a,e))}function Ao({values:t,globalValues:e,layer:i,text:r,fieldInfoMap:n}){return r?QG({formattedValues:e,template:jbt(r,{...e,...t},i),fieldInfoMap:n}):""}async function ude({type:t,value:e,event:i}){try{return typeof e=="function"?e(i):await e}catch(r){console.error(`[arcgis-feature] An error occurred when calling the "${t}" function`,{error:r,graphic:i.graphic,value:e});return}}/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.7 */const Vbt=ct`.arcgis-feature-content__loader-container{display:flex;align-items:center;justify-content:center;padding:0;height:150px}.arcgis-feature-content{font-size:var(--calcite-font-size);line-height:var(--calcite-font-line-height-relative-normal)}.arcgis-feature-content h1,.arcgis-feature-content h2,.arcgis-feature-content h3,.arcgis-feature-content h4,.arcgis-feature-content h5,.arcgis-feature-content h6{margin:var(--calcite-spacing-sm) 0;line-height:var(--calcite-font-line-height-relative-tight);letter-spacing:0;color:var(--calcite-color-text-1);font-weight:var(--calcite-font-weight-semibold)}.arcgis-feature-content h1{font-size:var(--calcite-font-size-xxl)}.arcgis-feature-content h2{font-size:var(--calcite-font-size-xl)}.arcgis-feature-content h3{font-size:var(--calcite-font-size-lg)}.arcgis-feature-content h4,.arcgis-feature-content h5,.arcgis-feature-content h6{font-size:var(--calcite-font-size)}.arcgis-feature-element-info__description{margin-bottom:var(--calcite-spacing-xs)}.arcgis-feature-content p{margin:0 0 var(--calcite-spacing-xs);font-size:var(--calcite-font-size)}.arcgis-feature-content p:last-child{margin-block-end:0}.arcgis-feature-content img{max-width:100%;max-height:100%;image-orientation:from-image}.arcgis-feature-content video{max-width:100%;max-height:100%}.arcgis-feature-content figure{margin:0;padding:0}.arcgis-feature-content figcaption{display:block;margin:var(--calcite-spacing-xs) 0 0;padding:0;font-size:var(--calcite-font-size-sm);font-style:italic}.arcgis-feature-content ul,.arcgis-feature-content ol{margin-block:var(--calcite-spacing-sm)}.arcgis-feature-content ul:first-child,.arcgis-feature-content ol:first-child{margin-block-start:0}.arcgis-feature-content a,.arcgis-feature-content a:hover,.arcgis-feature-content a:focus{color:var(--calcite-color-text-link)}`,dde="arcgis-feature-content",hde={base:dde,loaderContainer:`${dde}__loader-container`},WN=class WN extends dt{loaded(){this.manager.onLifecycle(()=>be(()=>this.creator,e=>{this._destroyContent(),this._createContent(e)},{initial:!0}))}async _createContent(e){const{graphic:i}=this;if(!i||!e)return;const r=ude({type:"content",value:e,event:{graphic:i}});this._loadingPromise=r;const n=await r;r===this._loadingPromise&&(this._loadingPromise=void 0,this._created=n)}_destroyContent(){const{_created:e,graphic:i,destroyer:r}=this;e&&i&&(ude({type:"content",value:r,event:{graphic:i}}),this._created=null)}_addTargetToAnchors(e){e&&Array.from(e.querySelectorAll("a")).forEach(i=>{fMe(i.href)&&!i.hasAttribute("target")&&i.setAttribute("target","_blank")})}render(){return q`<div class=${H(hde.base)}>${this._loadingPromise?this._renderLoading():this._renderCreated()}</div>`}_renderLoading(){return q`<div class=${H(hde.loaderContainer)}><calcite-loader inline label></calcite-loader></div>`}_renderCreated(){const{_created:e}=this;return e instanceof HTMLElement?e:typeof e=="string"?q`<div .innerHTML=${e??""} ${gt(this._addTargetToAnchors)}></div>`:null}};WN.properties={_loadingPromise:16,_created:16,creator:1,destroyer:0,graphic:0},WN.styles=Vbt;let eW=WN;yr("arcgis-feature-content",eW);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.7 */const Ubt=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/iu,target:"_blank",label:"{messages.view}"},{pattern:/^\s*(tel:([^\s]+))\s*$/iu,label:"{hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/iu,label:"{hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/iu,label:"{messages.openInApp}",appName:"App Studio Player"},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/iu,label:"{messages.openInApp}",appName:"Collector"},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/iu,label:"{messages.openInApp}",appName:"Explorer"},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/iu,label:"{messages.openInApp}",appName:"Navigator"},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/iu,label:"{messages.openInApp}",appName:"Survey123"},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/iu,label:"{messages.openInApp}",appName:"Trek2There"},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/iu,label:"{messages.openInApp}",appName:"Workforce"},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/iu,label:"{messages.openInApp}",appName:"iForm"},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/iu,label:"{messages.openInApp}",appName:"FlowFinity"},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/iu,label:"{messages.openInApp}",appName:"Laserfische"},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/iu,label:"{messages.openInApp}",appName:"Microsoft Power Bi"}];function Bbt(t,e){var o;const i=Ubt.find(l=>l.pattern.test(e));if(!i)return e;const r=(o=e.match(i.pattern))==null?void 0:o[2],n=YE(YE(i.label,{messages:t,hierPart:r}),{appName:i.appName}),s=i.target?` target="${i.target}"`:"",a=i.target==="_blank"?' rel="noreferrer"':"";return tg.sanitizeUrl(new URL(e,window.location.origin).toString()).replace(i.pattern,`<a${s} href="$1"${a}>${n}</a>`)}const qbt=ct`.arcgis-feature-fields__table{border:none;width:100%;border-collapse:collapse;color:var(--calcite-color-text-2)}.arcgis-feature-fields__table caption{clip:rect(0 0 0 0);clip-path:inset(50%);height:1px;overflow:hidden;position:absolute;white-space:nowrap;width:1px}.arcgis-feature-fields__table tr:nth-child(odd){background-color:var(--calcite-color-foreground-1)}.arcgis-feature-fields__table tr:nth-child(2n){background-color:var(--calcite-color-foreground-2)}.arcgis-feature-fields__table tr a{color:var(--calcite-color-text-link)}.arcgis-feature-fields__table tr a:hover,.arcgis-feature-fields__table tr a:focus{color:var(--calcite-color-brand-hover)}.arcgis-feature-fields__table tr td,.arcgis-feature-fields__table tr th{padding:var(--calcite-spacing-xs) var(--calcite-spacing-sm);vertical-align:top;word-break:break-word;font-size:var(--calcite-font-size-sm);font-weight:var(--calcite-font-weight-regular);line-height:var(--calcite-font-line-height-relative-normal)}.arcgis-feature-fields__table tr th{border-inline-end:var(--calcite-border-width-md) solid var(--calcite-color-border-3);width:50%;text-align:start}.arcgis-feature-fields__table tr td{width:50%}`,pde="arcgis-feature-fields",fde={base:pde,table:`${pde}__table`};var Vw;let Hbt=(Vw=class extends dt{constructor(){super(...arguments),this.headingLevel=2}get formattedFieldInfos(){const{expressionInfos:e,fieldInfos:i,layer:r,graphic:n,isContentFieldInfos:s}=this,a=[];return i==null||i.forEach(o=>{if(!(!("visible"in o)||o.visible))return;const l=o.clone();l.label=XG({fieldInfo:l,expressionInfos:e,layer:r,graphic:n,isContentFieldInfos:s}),NX(r)&&mMe({fieldInfo:o,graphic:n})&&(l.fieldFormat=Lbt({fieldInfo:l,isContentFieldInfos:s,layer:r})),a.push(l)}),a}render(){return q`<div class=${H(fde.base)}><arcgis-feature-element-info .heading=${this.heading} .description=${this.description} .headingLevel=${this.headingLevel}></arcgis-feature-element-info>${this._renderFields()}</div>`}_renderFieldInfo(e){var c,h,m;const{values:i}=this,r=e.fieldName||"",n=e.label||r,s=i?i[r]==null?"":i[r]:"",a=((c=e==null?void 0:e.fieldFormat)==null?void 0:c.type)==="date-time",o={openInApp:((h=this.messages)==null?void 0:h.openInApp)??"",view:((m=this.messages)==null?void 0:m.view)??""},l=typeof s=="number"&&!a?L2e(`${s}`):typeof s=="string"?Bbt(o,s):`${s}`;return q`<tr><th .innerHTML=${tg.sanitize(n)??""}></th><td .innerHTML=${tg.sanitize(l)??""}></td></tr>`}_renderFields(){var i;const{formattedFieldInfos:e}=this;return e!=null&&e.length?q`<table class=${H(fde.table)}><caption>${(i=this.messages)==null?void 0:i.fieldsSummary}</caption><tbody>${e.map(r=>this._renderFieldInfo(r))}</tbody></table>`:null}},Vw.properties={values:0,description:1,expressionInfos:0,fieldInfos:0,heading:1,isContentFieldInfos:5,graphic:0,layer:0,headingLevel:9,messages:0},Vw.styles=qbt,Vw);yr("arcgis-feature-fields",Hbt);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.7 */const Gbt=ct`.arcgis-feature-media__container{display:flex;flex-flow:row wrap;align-items:center;margin-top:var(--calcite-spacing-xs);width:100%;min-height:150px}.arcgis-feature-media__container .arcgis-feature-media__pagination-button{display:flex;align-items:center;justify-content:center;border:none;background:transparent;cursor:pointer;padding-block:var(--calcite-spacing-xs);padding-inline:var(--calcite-spacing-xs);color:var(--calcite-color-text-3)}.arcgis-feature-media__container .arcgis-feature-media__pagination-button:hover,.arcgis-feature-media__container .arcgis-feature-media__pagination-button:focus{background-color:var(--calcite-color-foreground-3);color:var(--calcite-color-text-1);fill:var(--calcite-color-text-1)}.arcgis-feature-media__item-title{margin:0;font-size:var(--calcite-font-size-md);line-height:var(--calcite-font-line-height-relative-snug)}.arcgis-feature-media__item-caption{padding-block-start:var(--calcite-spacing-xxs);font-size:var(--calcite-font-size-sm);line-height:var(--calcite-font-line-height-relative-snug)}.arcgis-feature-media__item{display:flex;align-items:flex-start;justify-content:center;margin-block:var(--calcite-spacing-xs);width:100%;height:auto}.arcgis-feature-media__item-navigation{display:flex;flex:0 1 100%;align-items:flex-start;justify-content:space-between;margin-block-end:var(--calcite-spacing-xs)}.arcgis-feature-media__item-text{margin-inline-end:var(--calcite-spacing-xs)}.arcgis-feature-media__pagination{display:flex;flex:0 0 auto;align-items:center;overflow:hidden}.arcgis-feature-media__pagination:only-child{margin-inline-start:auto}.arcgis-feature-media__pagination-text{padding-inline:var(--calcite-spacing-xxs);color:var(--calcite-color-text-3);font-size:var(--calcite-font-size-sm);line-height:var(--calcite-font-line-height-relative-normal)}.arcgis-feature-media__item-container{flex:0 1 auto;width:100%}.arcgis-feature-media__item-container img{max-width:100%}.arcgis-feature-media__item-container img[src$=".SVG"],.arcgis-feature-media__item-container img[src$=".svg"]{width:100%}.arcgis-feature-media__chart{width:100%;height:155px}`;function CB(t){if(!G0(t))return null;const[e,i]=t.split("/").slice(1);return{layerId:e,fieldName:i}}const ol="arcgis-feature-media",$o={base:ol,mediaContainer:`${ol}__container`,mediaItemContainer:`${ol}__item-container`,mediaItem:`${ol}__item`,mediaItemText:`${ol}__item-text`,mediaItemTitle:`${ol}__item-title`,mediaItemCaption:`${ol}__item-caption`,mediaNavigation:`${ol}__item-navigation`,mediaPagination:`${ol}__pagination`,mediaPaginationText:`${ol}__pagination-text`,mediaChart:`${ol}__chart`,mediaPaginationButton:`${ol}__pagination-button`,mediaPaginationIcon:`${ol}__pagination-icon`,mediaChartRendered:`${ol}__chart--rendered`},EB=15,uy="category",HM="value",Wbt="rgba(50, 50, 50, 1)",Zbt=250,Ybt=500,Jbt=200;var Uw;let Xbt=(Uw=class extends dt{constructor(){super(...arguments),this._direction=_k(),this._prefersReducedMotion=wke("(prefers-reduced-motion)"),this.activeMediaInfoIndex=0,this.chartAnimationDisabled=!1,this.headingLevel=2}get activeMediaInfo(){return this.formattedMediaInfos[this.activeMediaInfoIndex]||null}get formattedMediaInfos(){return this._formatMediaInfos()||[]}get formattedMediaInfoCount(){return this.formattedMediaInfos.length}next(){this._pageContentElementMedia(1)}previous(){this._pageContentElementMedia(-1)}setActiveMedia(e){this._setContentElementMedia(e)}loaded(){this.manager.onLifecycle(()=>[be(()=>[this.activeMediaInfo,this.activeMediaInfoIndex],()=>this._setupMediaRefreshTimer(),{initial:!0}),{remove:()=>this._clearMediaRefreshTimer()}])}_setContentElementMedia(e){const{formattedMediaInfoCount:i}=this,r=(e+i)%i;this.activeMediaInfoIndex=r}_pageContentElementMedia(e){const{activeMediaInfoIndex:i}=this,r=i+e;this._setContentElementMedia(r)}_formatMediaInfos(){const{mediaInfos:e,layer:i}=this,r=this.values??{},n=this.formattedValues??{},s=this.fieldInfoMap??new Map;return(e==null?void 0:e.map(a=>{const o=a==null?void 0:a.clone();if(!o)return null;if(o.title=Ao({values:r,fieldInfoMap:s,globalValues:n,layer:i,text:o.title}),o.caption=Ao({values:r,fieldInfoMap:s,globalValues:n,layer:i,text:o.caption}),o.altText=Ao({values:r,fieldInfoMap:s,globalValues:n,layer:i,text:o.altText}),o.type==="image"){if(!o.value)return null;const l=o.value;return this._setImageValue({value:l,formattedValues:n,layer:i}),l.sourceURL?o:void 0}if(o.type==="pie-chart"||o.type==="line-chart"||o.type==="column-chart"||o.type==="bar-chart"){if(!o.value)return null;const l=o.value;return this._setChartValue({value:l,chartType:o.type,values:r,formattedValues:n,layer:i}),o}return null}).filter(a=>a!=null))??[]}_setImageValue(e){const i=this.fieldInfoMap??new Map,{value:r,formattedValues:n,layer:s}=e,{linkURL:a,sourceURL:o}=r;if(o){const l=KG(o,s);r.sourceURL=QG({formattedValues:n,template:l,fieldInfoMap:i})}if(a){const l=KG(a,s);r.linkURL=QG({formattedValues:n,template:l,fieldInfoMap:i})}}_setChartValue(e){const{value:i,values:r,formattedValues:n,chartType:s,layer:a}=e,{popupTemplate:o,relatedInfos:l}=this,{fields:c,normalizeField:h}=i,m=a;if(i.fields=Abt(c,m),h&&(i.normalizeField=sk(h,m)),!c.some(v=>!!(n[v]!=null||G0(v)&&(l!=null&&l.size))))return;const g=(o==null?void 0:o.fieldInfos)??[];i.series=[],c.forEach((v,b)=>{var M;const x=(M=i.colors)==null?void 0:M[b];if(G0(v)){i.series=[...i.series,...this._getRelatedChartInfos({fieldInfos:g,fieldName:v,formattedValues:n,chartType:s,value:i,color:x})];return}const $=this._getChartOption({value:i,values:r,chartType:s,formattedValues:n,fieldName:v,fieldInfos:g,color:x});i.series.push($)})}_getRelatedChartInfos(e){var b;const{fieldInfos:i,fieldName:r,formattedValues:n,chartType:s,value:a,color:o}=e,l=[],c=CB(r),h=c&&((b=this.relatedInfos)==null?void 0:b.get(c.layerId));if(!h)return l;const{relatedFeatures:m,relation:g}=h;if(!g||!m)return l;const{cardinality:v}=g;return m.forEach(x=>{const $=x.attributes;$&&Object.keys($).forEach(M=>{M===c.fieldName&&l.push(this._getChartOption({value:a,values:$,formattedValues:n,fieldName:r,chartType:s,relatedFieldName:M,hasMultipleRelatedFeatures:(m==null?void 0:m.length)>1,fieldInfos:i,color:o}))})}),v&&(v==="one-to-many"||v==="many-to-many")?l:[l[0]]}_getTooltip({label:e,value:i,chartType:r}){return r==="pie-chart"?`${e}`:`${e}: ${i}`}_getChartOption(e){var X;const{value:i,values:r,formattedValues:n,fieldName:s,relatedFieldName:a,fieldInfos:o,chartType:l,hasMultipleRelatedFeatures:c,color:h}=e,{layer:m,graphic:g}=this,v=this.fieldInfoMap??new Map,{normalizeField:b,tooltipField:x}=i,$=b?G0(b)?r[CB(b).fieldName]:r[b]:null,M=rj(s)&&(n==null?void 0:n[s])!==void 0?n[s]:a&&r[a]!==void 0?r[a]:r[s]!==void 0?r[s]:n[s],k=M===void 0?null:M&&$&&typeof M=="number"&&typeof $=="number"?M/$:M,A=Obt(o,s),L=sk(s,m),z=(x&&n[x]!==void 0?n[x]:XG({fieldInfo:A||new Ss({fieldName:L}),expressionInfos:(X=this.popupTemplate)==null?void 0:X.expressionInfos,graphic:g,layer:m}))??"",U=n[L]??"",B=k!=null?typeof k=="number"?k:Number(k):null;if(G0(s)){const J=v.get(s.toLowerCase()),Q=x?v.get(x.toLowerCase()):null,le=(J==null?void 0:J.fieldName)??s,ie=c&&x?CB(x).fieldName:(Q==null?void 0:Q.fieldName)??x,re=(c&&ie?r[ie]:n[ie]??(J&&XG({fieldInfo:J,layer:m,graphic:g}))??(J==null?void 0:J.fieldName)??a)??"",se=(c&&a?r[a]:n[le])??"";return new PR({fieldName:s,tooltip:this._getTooltip({label:re,value:se,chartType:l}),color:h,value:B})}return new PR({fieldName:s,tooltip:this._getTooltip({label:z,value:U,chartType:l}),color:h,value:B})}_getRenderer(){var i;const e=this.layer;return(i=this.graphic)!=null&&i.isAggregate&&(e!=null&&e.featureReduction)&&"renderer"in e.featureReduction?e.featureReduction.renderer:e==null?void 0:e.renderer}async _getSeriesColors(e){const{color:i}=await de(async()=>{const{color:n}=await import("./index-Dw3c3eoD.js");return{color:n}},__vite__mapDeps([321,277,278,279,280,281,282,283,284,291,293,322,295,290,294,289])),r=new Map;return e.forEach(n=>{n.color&&r.set(n,i(n.color.toCss(!0)))}),r}async _getRendererColors(){const{color:e}=await de(async()=>{const{color:a}=await import("./index-Dw3c3eoD.js");return{color:a}},__vite__mapDeps([321,277,278,279,280,281,282,283,284,291,293,322,295,290,294,289])),i=new Map,r=this._getRenderer(),n="default";if(!r)return i;const s=await D$e(r);return s.delete(n),Array.from(s.values()).every(a=>(a==null?void 0:a.length)===1)&&Array.from(s.keys()).forEach(a=>{var l,c;const o=(c=(l=s.get(a))==null?void 0:l[0])==null?void 0:c.toCss(!0);o&&i.set(a,e(o))}),i}async _createChart(e){const{activeMediaInfo:i}=this;if(!e||!i)return;const{createRoot:r}=await de(async()=>{const{createRoot:s}=await import("./chart-utils-CIbIZsNW.js");return{createRoot:s}},__vite__mapDeps([323,277,278,279,280,281,282,283,284])),n=await r(e);this._chartRoot=n,this._renderChart({mediaInfo:i,root:n})}_handleMediaKeyup(e){const{key:i}=e;i==="ArrowLeft"&&(e.stopPropagation(),this.previous()),i==="ArrowRight"&&(e.stopPropagation(),this.next())}_canAnimateChart(){return!this.chartAnimationDisabled&&!this._prefersReducedMotion}_getChartAnimationMS(){return this._canAnimateChart()?Zbt:0}_getChartSeriesAnimationMS(){return this._canAnimateChart()?Ybt:0}async _customizeChartTooltip(e,i="horizontal"){var n;const{color:r}=await de(async()=>{const{color:s}=await import("./index-Dw3c3eoD.js");return{color:s}},__vite__mapDeps([321,277,278,279,280,281,282,283,284,291,293,322,295,290,294,289]));e.setAll({pointerOrientation:i}),(n=e.get("background"))==null||n.setAll({stroke:r(Wbt)}),e.label.setAll({direction:this._direction,oversizedBehavior:"wrap",maxWidth:Jbt})}async _createPieChart(e,i){const[{Tooltip:r},{PieChart:n,PieSeries:s}]=await Promise.all([de(()=>import("./index-Dw3c3eoD.js"),__vite__mapDeps([321,277,278,279,280,281,282,283,284,291,293,322,295,290,294,289])),de(()=>import("./percent-Ckq0ojOu.js"),__vite__mapDeps([324,292,279,293,281,280,282,278,289,284,294,295]))]),{mediaInfo:a,root:o}=e,{title:l}=a,c=5,h=(a==null?void 0:a.altText)||(a==null?void 0:a.title)||"",m=o.container.children.push(n.new(o,{role:"figure",ariaLabel:h,focusable:!0,paddingBottom:c,paddingTop:c,paddingLeft:c,paddingRight:c})),g=`{category}: {valuePercentTotal.formatNumber('0.00')}%
 ({value})`,v=r.new(o,{labelText:g}),b=m.series.push(s.new(o,{name:l,valueField:HM,categoryField:uy,tooltip:v}));b.ticks.template.set("forceHidden",!0),b.labels.template.set("forceHidden",!0),b.slices.template.states.create("active",{shiftRadius:c}),this._customizeChartTooltip(v),b.slices.template.setAll({ariaLabel:g,focusable:!0,templateField:"columnSettings"}),b.data.setAll(i),b.appear(this._getChartSeriesAnimationMS()),m.appear(this._getChartAnimationMS()),m.root.dom.classList.toggle($o.mediaChartRendered,!0)}_getMinSeriesValue(e){let i=0;return e.forEach(r=>i=Math.min(r.value,i)),i}async _createColumnChart(e,i,r){const[{Tooltip:n,Scrollbar:s},{CategoryAxis:a,AxisRendererX:o,AxisRendererY:l,ValueAxis:c,ColumnSeries:h}]=await Promise.all([de(()=>import("./index-Dw3c3eoD.js"),__vite__mapDeps([321,277,278,279,280,281,282,283,284,291,293,322,295,290,294,289])),de(()=>import("./xy-7QUQz7B8.js"),__vite__mapDeps([325,296,281,280,282,278,279,293,291,289,284,290,295,322]))]),{mediaInfo:m,root:g}=i,{value:v,title:b}=m,{_direction:x}=this;e.setAll({wheelX:"panX",wheelY:"zoomX"});const $=e.xAxes.push(a.new(g,{renderer:o.new(g,{inversed:x==="rtl"}),categoryField:uy}));$.get("renderer").labels.template.setAll({forceHidden:!0});const M=e.yAxes.push(c.new(g,{renderer:l.new(g,{inside:!1}),min:this._getMinSeriesValue(v.series)}));M.get("renderer").labels.template.setAll({direction:x});const k="{categoryX}",A=n.new(g,{labelText:k}),L=e.series.push(h.new(g,{name:b,xAxis:$,yAxis:M,valueYField:HM,categoryXField:uy,tooltip:A}));this._customizeChartTooltip(A),L.columns.template.setAll({ariaLabel:k,focusable:!0,templateField:"columnSettings"}),v.series.length>EB&&e.set("scrollbarX",s.new(g,{orientation:"horizontal"})),$.data.setAll(r),L.data.setAll(r),L.appear(this._getChartSeriesAnimationMS()),e.appear(this._getChartAnimationMS())}async _createBarChart(e,i,r){const[{Tooltip:n,Scrollbar:s},{CategoryAxis:a,AxisRendererX:o,AxisRendererY:l,ValueAxis:c,ColumnSeries:h}]=await Promise.all([de(()=>import("./index-Dw3c3eoD.js"),__vite__mapDeps([321,277,278,279,280,281,282,283,284,291,293,322,295,290,294,289])),de(()=>import("./xy-7QUQz7B8.js"),__vite__mapDeps([325,296,281,280,282,278,279,293,291,289,284,290,295,322]))]),{mediaInfo:m,root:g}=i,{value:v,title:b}=m,{_direction:x}=this;e.setAll({wheelX:"panY",wheelY:"zoomY"});const $=e.yAxes.push(a.new(g,{renderer:l.new(g,{inversed:!0}),categoryField:uy}));$.get("renderer").labels.template.setAll({forceHidden:!0});const M=e.xAxes.push(c.new(g,{renderer:o.new(g,{inside:!1,inversed:x==="rtl"}),min:this._getMinSeriesValue(v.series)}));M.get("renderer").labels.template.setAll({direction:x});const k="{categoryY}",A=n.new(g,{labelText:k}),L=e.series.push(h.new(g,{name:b,xAxis:M,yAxis:$,valueXField:HM,categoryYField:uy,tooltip:A}));this._customizeChartTooltip(A,"vertical"),L.columns.template.setAll({ariaLabel:k,focusable:!0,templateField:"columnSettings"}),v.series.length>EB&&e.set("scrollbarY",s.new(g,{orientation:"vertical"})),$.data.setAll(r),L.data.setAll(r),L.appear(this._getChartSeriesAnimationMS()),e.appear(this._getChartAnimationMS())}async _createLineChart(e,i,r){var U,B,X;const[{Tooltip:n,Scrollbar:s},{CategoryAxis:a,AxisRendererX:o,AxisRendererY:l,ValueAxis:c,LineSeries:h}]=await Promise.all([de(()=>import("./index-Dw3c3eoD.js"),__vite__mapDeps([321,277,278,279,280,281,282,283,284,291,293,322,295,290,294,289])),de(()=>import("./xy-7QUQz7B8.js"),__vite__mapDeps([325,296,281,280,282,278,279,293,291,289,284,290,295,322]))]),{root:m,mediaInfo:g}=i,{value:v,title:b}=g,{_direction:x}=this;e.setAll({wheelX:"panX",wheelY:"zoomX"});const $=e.xAxes.push(a.new(m,{renderer:o.new(m,{inversed:x==="rtl"}),categoryField:uy}));$.get("renderer").labels.template.setAll({forceHidden:!0});const M=e.yAxes.push(c.new(m,{renderer:l.new(m,{inside:!1}),min:this._getMinSeriesValue(v.series)}));M.get("renderer").labels.template.setAll({direction:x});const k="{categoryX}",A=(B=(U=r[0])==null?void 0:U.lineSettings)==null?void 0:B.stroke,L=n.new(m,{getFillFromSprite:!A,labelText:k});A&&((X=L.get("background"))==null||X.setAll({fill:A}));const z=e.series.push(h.new(m,{name:b,xAxis:$,yAxis:M,valueYField:HM,categoryXField:uy,tooltip:L}));z.strokes.template.setAll({templateField:"lineSettings"}),this._customizeChartTooltip(L,"vertical"),v.series.length>EB&&e.set("scrollbarX",s.new(m,{orientation:"horizontal"})),$.data.setAll(r),z.data.setAll(r),z.appear(this._getChartSeriesAnimationMS()),e.appear(this._getChartAnimationMS())}async _createXYChart(e,i){const{XYChart:r,XYCursor:n}=await de(async()=>{const{XYChart:h,XYCursor:m}=await import("./xy-7QUQz7B8.js");return{XYChart:h,XYCursor:m}},__vite__mapDeps([325,296,281,280,282,278,279,293,291,289,284,290,295,322])),{root:s,mediaInfo:a}=e,{type:o}=a,l=(a==null?void 0:a.altText)||(a==null?void 0:a.title)||"",c=s.container.children.push(r.new(s,{role:"figure",ariaLabel:l,focusable:!0,panX:!0,panY:!0}));c.set("cursor",n.new(s,{})),o==="column-chart"&&await this._createColumnChart(c,e,i),o==="bar-chart"&&await this._createBarChart(c,e,i),o==="line-chart"&&await this._createLineChart(c,e,i),c.root.dom.classList.toggle($o.mediaChartRendered,!0)}_clearMediaRefreshTimer(){const{_refreshTimer:e}=this;e&&(clearTimeout(e),this._refreshTimer=void 0)}_updateMediaInfoTimestamp(e){const i=Date.now();this._refreshIntervalInfo={timestamp:i,sourceURL:e&&this._getImageSource(e,i)}}_setupMediaRefreshTimer(){this._clearMediaRefreshTimer();const{activeMediaInfo:e}=this;(e==null?void 0:e.type)==="image"&&e.refreshInterval>0&&this._setRefreshTimeout(e)}_setRefreshTimeout(e){const{refreshInterval:i,value:r}=e,n=i*6e4;this._updateMediaInfoTimestamp(r.sourceURL);const s=window.setInterval(()=>{this._updateMediaInfoTimestamp(r.sourceURL)},n);this._refreshTimer=s}_getImageSource(e,i){const r=e.includes("?")?"&":"?",[n,s=""]=e.split("#");return`${n}${r}timestamp=${i}${s?"#":""}${s}`}_updateChartElement(e){var i;(i=this._chartRoot)==null||i.dispose(),this._chartRoot=void 0,e&&this._createChart(e)}render(){return q`<div class=${H($o.base)} @keyup=${this._handleMediaKeyup}><arcgis-feature-element-info .heading=${this.heading} .description=${this.description} .headingLevel=${this.headingLevel}></arcgis-feature-element-info>${this._renderMedia()}</div>`}_renderMedia(){var n;const{formattedMediaInfoCount:e,activeMediaInfoIndex:i}=this,r=this._renderMediaText();return e?q`<div class=${H($o.mediaContainer)}>${this._renderMediaInfo()}<div class=${H($o.mediaNavigation)}>${r}${e>1?q`<div class=${H($o.mediaPagination)}>${this._renderMediaPageButton("previous")}<span class=${H($o.mediaPaginationText)}>${Sr(((n=this.messages)==null?void 0:n.pageText)??"",{index:i+1,total:e})}</span>${this._renderMediaPageButton("next")}</div>`:null}</div></div>`:null}_renderMediaText(){const{activeMediaInfo:e}=this;if(!e)return null;const i=e!=null&&e.title?q`<div class=${H($o.mediaItemTitle)} .innerHTML=${tg.sanitize(e.title)??""}></div>`:null,r=e!=null&&e.caption?q`<div class=${H($o.mediaItemCaption)} .innerHTML=${tg.sanitize(e.caption)??""}></div>`:null;return i||r?q`<div class=${H($o.mediaItemText)}>${i}${r}</div>`:null}_renderImageMediaInfo(e){if(!e.value)return null;const{_refreshIntervalInfo:i}=this,{value:r,refreshInterval:n,altText:s,title:a}=e,{sourceURL:o,linkURL:l}=r,c=fMe(l??void 0)?"_blank":"_self",h=c==="_blank"?"noreferrer":"",m=n?i:null,g=m?m.sourceURL:o,v=q`<img alt=${(s||a)??Pe} src=${g??void 0??Pe}>`;return(l?q`<a href=${l??Pe} rel=${h??Pe} target=${c} title=${a??Pe}>${v}</a>`:null)??v}_renderChartMediaInfo(e){const{activeMediaInfoIndex:i,formattedMediaInfoCount:r}=this;return nt(`media-${e.type}-${i}-${r}`,q`<div class=${H($o.mediaChart)} ${gt(this._updateChartElement)}></div>`)}_renderMediaInfoType(){const{activeMediaInfo:e}=this;return e?e.type==="image"?this._renderImageMediaInfo(e):e.type.includes("chart")?this._renderChartMediaInfo(e):null:null}_renderMediaInfo(){const{activeMediaInfo:e}=this;return e?q`<div class=${H($o.mediaItemContainer)}><div class=${H($o.mediaItem)}>${this._renderMediaInfoType()}</div></div>`:null}_renderMediaPageButton(e){var a,o;if(this.formattedMediaInfoCount<2)return null;const i=e==="previous",r=i?((a=this.messages)==null?void 0:a.previous)??"":((o=this.messages)==null?void 0:o.next)??"",n=i?"chevron-left":"chevron-right",s=i?this.previous:this.next;return q`<button .ariaLabel=${r} class=${H($o.mediaPaginationButton)} @click=${s} tabindex=0 title=${r??Pe} type=button><calcite-icon flip-rtl class=${H($o.mediaPaginationIcon)} .icon=${n} scale=s></calcite-icon></button>`}async _renderChart(e){const{root:i,mediaInfo:r}=e,{value:n,type:s}=r,[{default:a},{default:o},{default:l},{esriChartColorSet:c},{ColorSet:h,Theme:m}]=await Promise.all([de(()=>import("./Animated-DeOY3L2D.js"),__vite__mapDeps([326,286,282,280])),de(()=>import("./Dark-C90LJxE0.js"),__vite__mapDeps([327,287,278,279,280,282])),de(()=>import("./Responsive-DqCxxR1j.js"),__vite__mapDeps([328,288,282,280,279])),de(()=>import("./chartCommon-B5PTeQ1O.js"),__vite__mapDeps([329,278,279,280])),de(()=>import("./index-Dw3c3eoD.js"),__vite__mapDeps([321,277,278,279,280,281,282,283,284,291,293,322,295,290,294,289]))]),g=m.new(i);g.rule("ColorSet").set("colors",c),g.rule("ColorSet").set("reuse",!0);const v=[l.new(i),g];khe(this.el)==="dark"&&v.push(o.new(i)),this._canAnimateChart()&&v.push(a.new(i)),i.setThemes(v);const b=await this._getRendererColors(),x=await this._getSeriesColors(n.series),$=h.new(i,{}),M=x.get(n.series[0]),k=M?{lineSettings:{stroke:M}}:void 0,A=n.series.map((L,z)=>{const U=x.get(L)||b.get(L.fieldName)||$.getIndex(z);return{[uy]:L.tooltip,[HM]:L.value,columnSettings:{fill:U,stroke:U},...k}}).filter(L=>s==="pie-chart"?L.value!=null&&L.value>0:!0);s==="pie-chart"?this._createPieChart(e,A):this._createXYChart(e,A)}},Uw.properties={_refreshIntervalInfo:16,messages:0,values:0,activeMediaInfoIndex:9,chartAnimationDisabled:5,activeMediaInfo:32,formattedMediaInfos:32,description:1,fieldInfoMap:0,layer:0,mediaInfos:0,popupTemplate:0,relatedInfos:0,formattedValues:0,heading:1,graphic:0,formattedMediaInfoCount:32,headingLevel:9},Uw.styles=Gbt,Uw);yr("arcgis-feature-media",Xbt);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.7 */function PF(t){t==null||t.abort()}function Qbt(t){t==null||t.remove()}/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.7 */var Kbt=Object.defineProperty,e0t=Object.getOwnPropertyDescriptor,oI=(t,e,i,r)=>{for(var n=r>1?void 0:r?e0t(e,i):e,s=t.length-1,a;s>=0;s--)(a=t[s])&&(n=(r?a(e,i,n):a(n))||n);return r&&n&&Kbt(e,i,n),n};function t0t(t="Aborted"){return new ae("AbortError",t)}function kB(t,e="Aborted"){if(i0t(t))throw t0t(e)}function vMe(t){return t instanceof AbortSignal?t:(t==null?void 0:t.signal)??void 0}function i0t(t){var e;return((e=vMe(t))==null?void 0:e.aborted)??!1}function bMe(t){return(t==null?void 0:t.name)==="AbortError"}function r0t(t){return{ok:!0,value:t}}function n0t(t){return{ok:!1,error:t}}function s0t(t){return t!=null&&t.ok?t.value:null}function a0t(t){return t!=null&&!t.ok?t.error:null}function o0t(t,e){const i=vMe(t);if(i==null)return;if(i.aborted){e();return}const r=()=>e();return i.addEventListener("abort",r,{once:!0}),{remove:()=>i.removeEventListener("abort",r)}}function mde(t,e){return new Dv(t,e)}let Dv=class extends et{constructor(e,i){super({}),this._abortHandle=null,this.abort=()=>{this._abortController=PF(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:r}=this._abortController;this.promise=e(r),this.promise.then(n=>{this._result=r0t(n),this._cleanup()},n=>{this._result=n0t(n),this._cleanup()}),this._abortHandle=o0t(i,this.abort)}get value(){return s0t(this._result)}get error(){return a0t(this._result)}get finished(){return this._result!=null}destroy(){this.abort()}_cleanup(){this._abortHandle=Qbt(this._abortHandle),this._abortController=null}[Symbol.dispose](){this._cleanup()}};oI([f()],Dv.prototype,"value",1);oI([f()],Dv.prototype,"error",1);oI([f()],Dv.prototype,"finished",1);oI([f()],Dv.prototype,"promise",2);oI([f()],Dv.prototype,"_result",2);Dv=oI([V("esri.components.asyncUtils.ReactiveTask")],Dv);const l0t=J$e;/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.7 */var c0t=typeof global=="object"&&global&&global.Object===Object&&global,u0t=typeof self=="object"&&self&&self.Object===Object&&self,wMe=c0t||u0t||Function("return this")(),aN=wMe.Symbol,_Me=Object.prototype,d0t=_Me.hasOwnProperty,h0t=_Me.toString,GM=aN?aN.toStringTag:void 0;function p0t(t){var e=d0t.call(t,GM),i=t[GM];try{t[GM]=void 0;var r=!0}catch{}var n=h0t.call(t);return r&&(e?t[GM]=i:delete t[GM]),n}var f0t=Object.prototype,m0t=f0t.toString;function g0t(t){return m0t.call(t)}var y0t="[object Null]",v0t="[object Undefined]",gde=aN?aN.toStringTag:void 0;function b0t(t){return t==null?t===void 0?v0t:y0t:gde&&gde in Object(t)?p0t(t):g0t(t)}function w0t(t){return t!=null&&typeof t=="object"}var _0t="[object Symbol]";function x0t(t){return typeof t=="symbol"||w0t(t)&&b0t(t)==_0t}var $0t=/\s/;function S0t(t){for(var e=t.length;e--&&$0t.test(t.charAt(e)););return e}var T0t=/^\s+/;function I0t(t){return t&&t.slice(0,S0t(t)+1).replace(T0t,"")}function oN(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var yde=NaN,M0t=/^[-+]0x[0-9a-f]+$/i,C0t=/^0b[01]+$/i,E0t=/^0o[0-7]+$/i,k0t=parseInt;function vde(t){if(typeof t=="number")return t;if(x0t(t))return yde;if(oN(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=oN(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=I0t(t);var i=C0t.test(t);return i||E0t.test(t)?k0t(t.slice(2),i?2:8):M0t.test(t)?yde:+t}var AB=function(){return wMe.Date.now()},A0t="Expected a function",P0t=Math.max,O0t=Math.min;function L0t(t,e,i){var r,n,s,a,o,l,c=0,h=!1,m=!1,g=!0;if(typeof t!="function")throw new TypeError(A0t);e=vde(e)||0,oN(i)&&(h=!!i.leading,m="maxWait"in i,s=m?P0t(vde(i.maxWait)||0,e):s,g="trailing"in i?!!i.trailing:g);function v(U){var B=r,X=n;return r=n=void 0,c=U,a=t.apply(X,B),a}function b(U){return c=U,o=setTimeout(M,e),h?v(U):a}function x(U){var B=U-l,X=U-c,J=e-B;return m?O0t(J,s-X):J}function $(U){var B=U-l,X=U-c;return l===void 0||B>=e||B<0||m&&X>=s}function M(){var U=AB();if($(U))return k(U);o=setTimeout(M,x(U))}function k(U){return o=void 0,g&&r?v(U):(r=n=void 0,a)}function A(){o!==void 0&&clearTimeout(o),c=0,r=l=n=o=void 0}function L(){return o===void 0?a:k(AB())}function z(){var U=AB(),B=$(U);if(r=arguments,n=this,l=U,B){if(o===void 0)return b(l);if(m)return clearTimeout(o),o=setTimeout(M,e),v(l)}return o===void 0&&(o=setTimeout(M,e)),a}return z.cancel=A,z.flush=L,z}var F0t="Expected a function";function bde(t,e,i){var r=!0,n=!0;if(typeof t!="function")throw new TypeError(F0t);return oN(i)&&(r="leading"in i?!!i.leading:r,n="trailing"in i?!!i.trailing:n),L0t(t,e,{leading:r,maxWait:e,trailing:n})}const R0t=ct`.arcgis-feature-expression__loading-container{display:flex;justify-content:center;padding:var(--calcite-spacing-md) 0;width:100%}`,wde=1,_de="arcgis-feature",xde={base:`${_de}-expression`,loadingSpinnerContainer:`${_de}__loading-container`},ZN=class ZN extends dt{constructor(){super(...arguments),this._compileThrottled=bde(this._startCompile,wde),this._evaluateThrottled=bde(this._startEvaluate,wde),this.headingLevel=2}loaded(){this.manager.onLifecycle(()=>[be(()=>[this.expressionInfo,this.graphic],()=>this._compileThrottled(),{initial:!0}),cn(()=>{var n,s,a;if(!((n=this._compileTask)!=null&&n.finished))return null;const e=this._compileTask.value,i=e==null?void 0:e.dependencies,{view:r}=this;return[e,this.spatialReference,this.map,r,i!=null&&i.has("view-scale")&&r&&"scale"in r?r.scale:null,i!=null&&i.has("view-time-extent")?(s=r==null?void 0:r.timeExtent)==null?void 0:s.start:null,i!=null&&i.has("view-time-extent")?(a=r==null?void 0:r.timeExtent)==null?void 0:a.end:null]},([e])=>this._evaluateThrottled(e)),{remove:()=>this._cancelThrottles()}])}_cancelThrottles(){this._compileThrottled.cancel(),this._evaluateThrottled.cancel()}_startCompile(){this._evaluateTask=PF(this._evaluateTask),this._compileTask=PF(this._compileTask),this._compileTask=mde(async e=>{const{expressionInfo:i,graphic:r}=this,n=i==null?void 0:i.expression;if(!n||!r)return null;const s=await l0t({expression:n,graphic:r});return kB(e),s})}_startEvaluate(e){this._evaluateTask=PF(this._evaluateTask),this._evaluateTask=mde(async i=>{const{graphic:r}=this;if(!e||!r)return null;const{interceptor:n,spatialReference:s,map:a,location:o,view:l}=this,c=await e.evaluate({graphic:r,interceptor:n,location:o,map:a,options:{signal:i},spatialReference:s,view:l});kB(i);const h=c&&"castAsJsonAsync"in c&&typeof c.castAsJsonAsync=="function"?c:null;if(!h)return null;const m=await h.castAsJsonAsync(i);kB(i);const g=m==null?void 0:m.type,v=g==="media"?o_.fromJSON(m):g==="text"?xu.fromJSON(m):g==="fields"?Fv.fromJSON(m):null;return!v||v.type==="media"&&!v.mediaInfos||v.type==="fields"&&!v.fieldInfos||v.type==="text"&&!v.text?null:v})}render(){var i,r,n;const e=!((i=this._compileTask)!=null&&i.finished)||!((r=this._evaluateTask)!=null&&r.finished);return q`<div class=${H(xde.base)}>${e?this._renderLoading():(n=this._evaluateTask)!=null&&n.value?this._renderContent():null}</div>`}_renderContent(){var s;const{values:e,fieldInfoMap:i}=this,r=(s=this._evaluateTask)==null?void 0:s.value,n=r==null?void 0:r.type;if(!n)return null;if(n==="text"){const a=Ao({values:e,fieldInfoMap:i??new Map,globalValues:e??{},layer:void 0,text:r.text});return q`<arcgis-feature-content .creator=${a} .graphic=${this.graphic}></arcgis-feature-content>`}else if(n==="media"){const{title:a,description:o,mediaInfos:l}=r;if(!(l!=null&&l.length))return null;const c={...e,...r.attributes};return q`<arcgis-feature-media .heading=${a??""} .values=${c} .formattedValues=${c} .description=${o??""} .mediaInfos=${l} .messages=${this.messages} .headingLevel=${this.headingLevel}></arcgis-feature-media>`}else if(n==="fields"){const{title:a,description:o,fieldInfos:l}=r;return l!=null&&l.length?q`<arcgis-feature-fields .fieldInfos=${l} .heading=${a??""} .description=${o??""} .headingLevel=${this.headingLevel} .messages=${this.messages}></arcgis-feature-fields>`:null}return null}_renderLoading(){return q`<div class=${H(xde.loadingSpinnerContainer)}><calcite-loader inline label></calcite-loader></div>`}};ZN.properties={_compileTask:16,_evaluateTask:16,values:0,fieldInfoMap:0,expressionInfo:0,graphic:0,headingLevel:9,interceptor:0,location:0,messages:0,spatialReference:0,map:0,view:0},ZN.styles=R0t;let tW=ZN;yr("arcgis-feature-expression",tW);const X2=(t,e=100)=>{let i;return(...r)=>{const n=()=>{clearTimeout(i),t(...r)};clearTimeout(i),i=setTimeout(n,e)}},z0t=SJ,N0t=tI,D0t=TJ,j0t=b5,V0t=Gp;function OF(){return new bv}/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.7 */const U0t=ct`:host{position:relative;flex:1 1 auto}.arcgis-feature-relationship__list{min-height:var(--calcite-spacing-xxxl)}.arcgis-feature-relationship__list-item--hidden{display:none}.arcgis-feature-relationship__feature-observer{position:relative;bottom:var(--calcite-spacing-xxl);z-index:2;text-align:center}.arcgis-feature-relationship__sticky-loading-container{display:flex;position:sticky;bottom:var(--calcite-spacing-sm);align-items:center;justify-content:center;z-index:2;margin:0;padding:0;height:var(--calcite-spacing-xxxl);pointer-events:none}`,B0t=t=>{var i;const e=[];if(t.formTemplate){const{description:r,title:n}=t.formTemplate;(i=t.fields)==null||i.forEach(s=>{const a=n&&Kce(n,s.name),o=r&&Kce(r,s.name);(a||o)&&e.push(s.name)})}return e},PB=100,q0t="arcgis-feature",dy=`${q0t}-relationship`,Ff={base:dy,listContainer:`${dy}__list`,listItem:`${dy}__list-item`,listItemHidden:`${dy}__list-item--hidden`,listContainerQuerying:`${dy}__list--querying`,featureObserver:`${dy}__feature-observer`,stickySpinnerContainer:`${dy}__sticky-loading-container`,loadingSpinnerContainer:`${dy}__loading-container`},YN=class YN extends dt{constructor(){super(...arguments),this._increaseFeaturePage=()=>{const{state:e,showAllEnabled:i,relatedFeatures:r,featuresPerPage:n,featurePage:s}=this;e==="ready"&&i&&r.length>=n*s&&this.featurePage++},this._relatedFeatureIntersectionObserver=new IntersectionObserver(([e])=>{e!=null&&e.isIntersecting&&this._increaseFeaturePage()},{root:window.document}),this._featurePage=1,this._cancelQuery=()=>{const{_queryAbortController:e}=this;e&&e.abort(),this._queryAbortController=null},this._cancelQueryFeatureCount=()=>{const{_queryFeatureCountAbortController:e}=this;e&&e.abort(),this._queryFeatureCountAbortController=null},this._cancelQueryPage=()=>{const{_queryPageAbortController:e}=this;e&&e.abort(),this._queryPageAbortController=null},this._queryController=async()=>{this._cancelQuery();const e=new AbortController;this._queryAbortController=e,await la(this._query()),this._queryAbortController===e&&(this._queryAbortController=null)},this._queryFeatureCountController=async()=>{this._loaded=!1,this._cancelQueryFeatureCount();const e=new AbortController;this._queryFeatureCountAbortController=e,await la(this._queryFeatureCount()),this._queryFeatureCountAbortController===e&&(this._queryFeatureCountAbortController=null),this._loaded=!0},this._queryPageController=async()=>{const e=new AbortController;this._queryPageAbortController=e,await la(this._queryPage()),this._queryPageAbortController===e&&(this._queryPageAbortController=null)},this._queryDebounced=X2(this._queryController,PB),this._queryFeatureCountDebounced=X2(this._queryFeatureCountController,PB),this._queryPageDebounced=X2(this._queryPageController,PB),this._query=async()=>{var r;const{_queryAbortController:e,relatedFeatures:i}=this;!this.featureCount||((r=this.relatedLayer)==null?void 0:r.type)==="subtype-group"&&!this.activeCategory||(this.relatedFeatureViewModels.destroyAll(),this.featurePage=1,i.destroyAll(),i.addMany(this._sliceFeatures(await this._queryRelatedFeatures({signal:e==null?void 0:e.signal}))))},this._addFlowItem=e=>{var i;e&&((i=this.flowItems)==null||i.push(e))},this._relatedFeatureIntersectionObserverNode=vi(),this.relatedFeatures=new Ue,this._queryAbortController=null,this._queryPageAbortController=null,this._queryFeatureCountAbortController=null,this.featureCount=0,this._loaded=!1,this.relatedFeatureViewModels=new Ue,this.autoDestroyDisabled=!1,this.featuresPerPage=10,this.flowType="feature-relationship",this.headingLevel=2,this.hideHeading=!1,this.hideDescription=!1,this.showAllEnabled=!1}get orderByFieldsFixedCasing(){const{orderByFields:e,relatedLayer:i}=this;return e&&(i!=null&&i.loaded)?e.map(r=>{const n=r.clone();return n.field=sk(r.field,i),n}):e??[]}get supportsCacheHint(){var e,i,r;return!!((r=(i=(e=this.layer)==null?void 0:e.capabilities)==null?void 0:i.queryRelated)!=null&&r.supportsCacheHint)}get allCategoriesCount(){var e;return((e=this.allCategories)==null?void 0:e.length)??0}get objectId(){var e,i;return(this.objectIdField&&((i=(e=this.graphic)==null?void 0:e.attributes)==null?void 0:i[this.objectIdField]))??null}get objectIdField(){var e;return((e=this.layer)==null?void 0:e.objectIdField)||null}get relatedLayer(){const{layer:e,map:i,relationship:r}=this;if(!(e!=null&&e.loaded)||!i||!r)return null;const n=e.type==="subtype-sublayer"&&e.parent&&N0t(e.parent)?e.parent:e;return z0t(i,n,r)??null}get relatedLayerKeyField(){var r,n;const{relatedLayer:e,relationshipId:i}=this;return e!=null&&e.loaded&&i!=null?(n=(r=e.relationships)==null?void 0:r.find(s=>s.id===i))==null?void 0:n.keyField:null}get relatedLayerKeyFields(){var i;const{relatedLayer:e}=this;return e!=null&&e.loaded?((i=e.relationships)==null?void 0:i.map(r=>r.keyField).filter(r=>r!=null))??[]:[]}get relationship(){var r;const{relationshipId:e,layer:i}=this;return e!=null&&(i!=null&&i.loaded)?((r=i.relationships)==null?void 0:r.find(({id:n})=>n===e))??null:null}get relationshipKey(){var i,r;const{relationshipKeyField:e}=this;return(e&&((r=(i=this.graphic)==null?void 0:i.attributes)==null?void 0:r[e]))??null}get relationshipKeyField(){var e;return((e=this.relationship)==null?void 0:e.keyField)||null}get canLoad(){return!!this.map&&this.relationshipId!=null&&typeof this.objectId=="number"}get canQuery(){var i,r;const e=(r=(i=this.layer)==null?void 0:i.capabilities)==null?void 0:r.queryRelated;return!!this.relatedLayer&&!!this.relationship&&this.relationshipId!=null&&this.objectId!=null&&!!(e!=null&&e.supportsCount)&&(e==null?void 0:e.supportsPagination)}get displayShowAllButton(){const{showAllEnabled:e,featureCount:i,displayCount:r,state:n,allCategoriesCount:s}=this,a=!!s&&(s>r||r===0),o=!!i&&(i>r||r===0);return!e&&n==="ready"&&(a||o)}get displayListItems(){const{relatedFeatures:e,allCategoriesCount:i}=this;return this.displayShowAllButton||!!e.length||!!i}get categories(){const{allCategories:e}=this;return this.showAllEnabled?e:(e==null?void 0:e.slice(0,this.displayCount))??null}get itemDescriptionFieldName(){var e;return((e=this.orderByFieldsFixedCasing[0])==null?void 0:e.field)||null}get state(){const{_queryAbortController:e,_queryFeatureCountAbortController:i,_queryPageAbortController:r,canQuery:n,_loaded:s,canLoad:a}=this;return i||a&&!s?"loading":e||r?"querying":n?"ready":"disabled"}get allItemsDescription(){const{messages:e,featureCount:i,allCategories:r,allCategoriesCount:n}=this;return Sr((e==null?void 0:e.numberRecords)??"",{number:or(r?n:i)})}get featurePage(){return this._featurePage}set featurePage(e){const{featuresPerPage:i,featureCount:r}=this,n=1,s=Math.ceil(r/i)||1;this._featurePage=Math.min(Math.max(e,n),s)}get heading(){const{activeCategory:e}=this;return this._heading??(e==null?void 0:e.name)}set heading(e){this._heading=e}get displayCount(){return this._displayCount??3}set displayCount(e){this._displayCount=Math.min(Math.max(e??3,0),10)}async destroy(){await this.manager.destroy()}loaded(){this.manager.onLifecycle(()=>[be(()=>{var e;return[this.displayCount,this.graphic,this.layer,(e=this.layer)==null?void 0:e.loaded,this.map,this.orderByFields,this.relationshipId,this.featuresPerPage,this.showAllEnabled,this.canQuery,this.featureCount,this.activeCategory]},()=>this._queryDebounced(),{initial:!0}),be(()=>[this.featurePage,this.showAllEnabled],()=>this._queryPageDebounced()),be(()=>[this.layer,this.relationshipId,this.objectId,this.canQuery,this.activeCategory],()=>this._queryFeatureCountDebounced(),{initial:!0}),be(()=>[this.state,this.showAllEnabled,this._relatedFeatureIntersectionObserverNode],()=>this._handleRelatedFeatureObserverChange()),ca(()=>this.relatedFeatures,"change",()=>this._setRelatedFeaturesViewModels())]),this.manager.onDestroy(()=>{this.relatedFeatureViewModels.destroyAll(),this.relatedFeatures.destroyAll(),this._cancelQuery(),this._cancelQueryFeatureCount(),this._cancelQueryPage(),this._unobserveRelatedFeatureObserver()})}async _queryFeatureCount(){const{layer:e,relatedLayer:i}=this;await(e==null?void 0:e.load()),await(i==null?void 0:i.load());const{_queryFeatureCountAbortController:r,activeCategory:n,canQuery:s,objectId:a,relatedLayerKeyField:o,relationshipId:l,relationshipKey:c,supportsCacheHint:h}=this;if(!s||!e||!i||a==null){this.featureCount=0,this.allCategories=void 0;return}if((i==null?void 0:i.type)==="subtype-group"&&!n){if(this.featureCount=0,this.relatedFeatureViewModels.destroyAll(),this.featurePage=1,this.relatedFeatures.destroyAll(),o&&c!=null){const{default:x}=await de(async()=>{const{default:k}=await import("./uniqueValues-yH2Emd2h.js");return{default:k}},__vite__mapDeps([298,1,2,3,299,0,197,15,22])),{uniqueValueInfos:$}=await x({layer:i,sqlWhere:`${o} = '${c}'`,field:i.subtypeField??void 0,signal:r==null?void 0:r.signal}),M=$.map(({count:k,value:A})=>{var z,U;const L=(U=(z=i.subtypes)==null?void 0:z.find(B=>B.code===A))==null?void 0:U.name;return A!=null&&L?{count:k,value:A,name:L}:void 0}).filter(k=>k!=null);this.allCategories=M}return}const{historicMoment:m,gdbVersion:g}=e,v=new nr({cacheHint:h,gdbVersion:g,historicMoment:m,relationshipId:l,returnGeometry:!1,objectIds:[a],where:this._getRelationshipWhereClause(i)}),b=await e.queryRelatedFeaturesCount(v,{signal:r==null?void 0:r.signal});this.allCategories=void 0,this.featureCount=b[a]||0}_getRelationshipWhereClause(e){const{activeCategory:i}=this,r=e.createQuery(),n="subtypeField"in e?e.subtypeField:void 0,s=i&&n?`${n} = ${i.value}`:void 0,a=r.where;return a&&s?`(${a}) AND (${s})`:a??s}_sliceFeatures(e){const{showAllEnabled:i,displayCount:r}=this;return i?e:r?e.slice(0,r):[]}async _queryPage(){var a;const{relatedFeatures:e,featurePage:i,showAllEnabled:r,_queryPageAbortController:n,featureCount:s}=this;!r||i<2||!s||((a=this.relatedLayer)==null?void 0:a.type)==="subtype-group"&&!this.activeCategory||e.addMany(await this._queryRelatedFeatures({signal:n==null?void 0:n.signal}))}async _queryRelatedFeatures(e){var J;const{displayCount:i,featureCount:r,featurePage:n,featuresPerPage:s,layer:a,orderByFieldsFixedCasing:o,relatedLayer:l,relatedLayerKeyFields:c,relationshipId:h,showAllEnabled:m,supportsCacheHint:g}=this,{canQuery:v,objectId:b}=this;if(!v||!a||!l||b==null)return[];const x=m?((n-1)*s+r)%r:0,$=m?s:i,M=l.objectIdField,k="subtypeField"in l?l.subtypeField:void 0,A=[...o.map(Q=>Q.field),...B0t(l),...c,M,k].filter(Q=>Q!=null),L=o.map(Q=>`${Q.field} ${Q.order}`),{historicMoment:z,gdbVersion:U}=a,B=new nr({orderByFields:L,start:x,num:$,outFields:A,cacheHint:g,historicMoment:z,gdbVersion:U,relationshipId:h,returnGeometry:!1,objectIds:[b],where:this._getRelationshipWhereClause(l)}),X=((J=(await a.queryRelatedFeatures(B,{signal:e==null?void 0:e.signal}))[b])==null?void 0:J.features)||[];return l.type==="subtype-group"&&k?X.forEach(Q=>{var re;const le=Q.attributes[k],ie=(re=l.findSublayerForSubtypeCode)==null?void 0:re.call(l,le);Q.sourceLayer=ie,Q.layer=ie}):X.forEach(Q=>{Q.sourceLayer=l,Q.layer=l}),X}_selectCategory(e){const{flowItems:i}=this;i&&this._addRelationshipFlowItem({showAllEnabled:!0,activeCategory:e})}_selectRecord(e){const{flowItems:i}=this;i&&this._addFlowItem(Hw(nt(e,q`<arcgis-feature .flowItems=${i} .flowType=${this.flowType} .graphic=${e.graphic} .map=${this.map} show-relationship-content .spatialReference=${this.spatialReference} .timeZone=${this.timeZone} .view=${this.view}></arcgis-feature>`)))}_addRelationshipFlowItem({showAllEnabled:e=!1,activeCategory:i}){this._addFlowItem(Hw(nt(i,q`<arcgis-feature-relationship .messages=${this.messages} .activeCategory=${i} .displayCount=${this.displayCount} .flowItems=${this.flowItems} .flowType=${this.flowType} .graphic=${this.graphic} .heading=${this.heading} hide-description .showAllEnabled=${e} hide-heading .layer=${this.layer} .map=${this.map} .orderByFields=${this.orderByFields} .relationshipId=${this.relationshipId} .spatialReference=${this.spatialReference} .values=${this.values} .view=${this.view}></arcgis-feature-relationship>`)))}_showAllRecords(){const{flowItems:e}=this;e&&this._addRelationshipFlowItem({showAllEnabled:!0})}_handleRelatedFeatureObserverChange(){this._unobserveRelatedFeatureObserver();const{state:e,showAllEnabled:i}=this;this._relatedFeatureIntersectionObserverNode.value&&e==="ready"&&i&&this._relatedFeatureIntersectionObserver.observe(this._relatedFeatureIntersectionObserverNode.value)}_unobserveRelatedFeatureObserver(){this._relatedFeatureIntersectionObserverNode.value&&this._relatedFeatureIntersectionObserver.unobserve(this._relatedFeatureIntersectionObserverNode.value)}_matchesFeature(e,i){var s;const r=(s=e==null?void 0:e.graphic)==null?void 0:s.getObjectId(),n=i==null?void 0:i.getObjectId();return r!=null&&n!=null&&r===n}_setRelatedFeaturesViewModels(){const{relatedFeatures:e,relatedFeatureViewModels:i,map:r,view:n,spatialReference:s,timeZone:a}=this;e==null||e.filter(Boolean).forEach(o=>{i.some(l=>this._matchesFeature(l,o))||i.add(new Vi({abilities:{relationshipContent:!1},map:r,view:n,spatialReference:s,timeZone:a,graphic:o}))}),i.forEach(o=>{e!=null&&e.find(l=>this._matchesFeature(o,l))||i.remove(o)})}render(){const{state:e}=this;return q`<div class=${H(Ff.base)}><arcgis-feature-element-info .heading=${this.heading} .headingLevel=${this.headingLevel} .description=${this.description}></arcgis-feature-element-info>${e==="loading"?this._renderLoading():e==="disabled"?this._renderRelationshipNotFound():this._renderRelatedFeatures()}</div>`}_renderStickyLoading(){return this.state==="querying"?q`<div class=${H(Ff.stickySpinnerContainer)}>${this._renderLoadingIcon()}</div>`:null}_renderLoadingIcon(){return q`<calcite-loader inline label></calcite-loader>`}_renderLoading(){return q`<div class=${H(Ff.loadingSpinnerContainer)}>${this._renderLoadingIcon()}</div>`}_renderShowAllIconNode(){return q`<calcite-icon icon=list scale=s slot=content-end></calcite-icon>`}_renderChevronIconNode(){return q`<calcite-icon flip-rtl icon=chevron-right scale=s slot=content-end></calcite-icon>`}_renderCategory(e){const{count:i,name:r}=e,n=or(i);return q`<calcite-list-item class=${H(Ff.listItem)} .disabled=${!i} .label=${r} @calciteListItemSelect=${()=>this._selectCategory(e)}><calcite-chip .label=${n} scale=s slot=content-end>${n}</calcite-chip>${this._renderChevronIconNode()}</calcite-list-item>`}_renderRelatedFeature(e){const{itemDescriptionFieldName:i,values:r}=this,{formattedAttributes:n,state:s,title:a}=e,o={...n==null?void 0:n.global,...r},l=(i&&(o==null?void 0:o[i]))??"",c=s==="loading";return q`<calcite-list-item class=${H(ar(Ff.listItem,{[Ff.listItemHidden]:c}))} .description=${Rd(l.toString())} .label=${Rd(a)} @calciteListItemSelect=${()=>this._selectRecord(e)}>${this._renderChevronIconNode()}</calcite-list-item>`}_renderShowAllListItem(){var e;return this.displayShowAllButton?q`<calcite-list-item .description=${this.allItemsDescription} .label=${(e=this.messages)==null?void 0:e.showAll} @calciteListItemSelect=${()=>this._showAllRecords()}>${this._renderShowAllIconNode()}</calcite-list-item>`:null}_renderNoRelatedFeaturesMessage(){var e;return q`<calcite-notice icon=information kind=brand open scale=s width=full><div slot=message>${(e=this.messages)==null?void 0:e.noRelatedFeatures}</div></calcite-notice>`}_renderFeatureObserver(){return q`<div class=${H(Ff.featureObserver)} ${gt(this._relatedFeatureIntersectionObserverNode)}></div>`}_renderList(){var r;const{relatedFeatureViewModels:e,categories:i}=this;return q`<calcite-list display-mode=flat .label=${((r=this.messages)==null?void 0:r.relatedFeaturesList)??""}>${(i==null?void 0:i.map(n=>this._renderCategory(n)))??e.toArray().map(n=>this._renderRelatedFeature(n))}${this._renderShowAllListItem()}</calcite-list>`}_renderRelatedFeatures(){const{displayListItems:e}=this,{state:i}=this;return q`<div class=${H(ar(Ff.listContainer,{[Ff.listContainerQuerying]:i==="querying"}))}>${e?this._renderList():i==="ready"?this._renderNoRelatedFeaturesMessage():null}${this._renderStickyLoading()}${this._renderFeatureObserver()}</div>`}_renderRelationshipNotFound(){var e;return q`<calcite-notice icon=exclamation-mark-triangle kind=danger open scale=s width=full><div slot=message>${(e=this.messages)==null?void 0:e.relationshipNotFound}</div></calcite-notice>`}};YN.properties={allCategories:16,_queryAbortController:16,_queryPageAbortController:16,_queryFeatureCountAbortController:16,featureCount:16,_loaded:16,canLoad:16,canQuery:16,displayShowAllButton:16,displayListItems:16,categories:16,itemDescriptionFieldName:16,relatedFeatureViewModels:16,state:16,autoDestroyDisabled:5,allItemsDescription:32,featurePage:9,featuresPerPage:9,flowItems:0,flowType:1,headingLevel:9,messages:0,heading:1,description:1,values:0,activeCategory:0,hideHeading:5,hideDescription:5,displayCount:9,graphic:0,layer:0,map:0,view:0,spatialReference:0,timeZone:1,orderByFields:0,relationshipId:9,showAllEnabled:5,label:3},YN.styles=U0t;let iW=YN;yr("arcgis-feature-relationship",iW);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const $de={positionContainer:"position-container",container:"container"},H0t="calcite-tooltip",G0t={host:t=>`${H0t}-${t}`},DX=300,W0t=DX/3,Z0t=DX*1.5,Sde="aria-describedby";function xMe(t){const{referenceElement:e}=t;return(typeof e=="string"?gk(t,{id:e}):e)||null}class Y0t{constructor(){this.registeredElements=new WeakMap,this.registeredShadowRootCounts=new WeakMap,this.hoverOpenTimeout=null,this.hoverCloseTimeout=null,this.activeTooltip=null,this.registeredElementCount=0,this.clickedTooltip=null,this.hoveredTooltip=null,this.queryTooltip=e=>{const{registeredElements:i}=this,r=e.find(n=>i.has(n));return i.get(r)},this.keyDownHandler=e=>{if(e.key==="Escape"&&!e.defaultPrevented){const{activeTooltip:i}=this;if(i!=null&&i.open){this.clearHoverTimeout(),this.closeActiveTooltip();const r=xMe(i),n=e.composedPath();(r instanceof Element&&n.includes(r)||n.includes(i))&&e.preventDefault()}}},this.pointerLeaveHandler=e=>{e.defaultPrevented||(this.clearHoverTimeout(),this.closeHoveredTooltip())},this.pointerMoveHandler=e=>{var n;if(e.defaultPrevented){this.closeHoveredTooltip();return}const i=e.composedPath(),r=this.queryTooltip(i);if(this.pathHasOpenTooltip(r,i)){this.clearHoverTimeout();return}r!==this.clickedTooltip&&(r!==this.hoveredTooltip&&this.clearHoverOpenTimeout(),this.hoveredTooltip=r,r?this.openHoveredTooltip(r):(n=this.activeTooltip)!=null&&n.open&&this.closeHoveredTooltip(),this.clickedTooltip=null)},this.clickHandler=e=>{if(e.defaultPrevented)return;this.clickedTooltip=null;const i=e.composedPath(),r=this.queryTooltip(i);if(this.pathHasOpenTooltip(r,i)){this.clearHoverTimeout();return}if(this.closeActiveTooltip(),!!r){if(this.clearHoverTimeout(),r.closeOnClick){this.clickedTooltip=r,this.toggleTooltip(r,!1);return}this.toggleTooltip(r,!0)}},this.blurHandler=()=>{this.closeActiveTooltip()},this.focusInHandler=e=>{if(e.defaultPrevented)return;const i=e.composedPath(),r=this.queryTooltip(i);if(this.pathHasOpenTooltip(r,i)){this.clearHoverTimeout();return}r!==this.clickedTooltip&&(this.clickedTooltip=null,this.closeTooltipIfNotActive(r),r&&this.toggleFocusedTooltip(r,!0))},this.openHoveredTooltip=e=>{var i;this.hoverOpenTimeout=window.setTimeout(()=>{this.hoverOpenTimeout===null||e!==this.hoveredTooltip||(this.clearHoverCloseTimeout(),this.closeTooltipIfNotActive(e),this.toggleTooltip(e,!0))},(i=this.activeTooltip)!=null&&i.open?W0t:DX)},this.closeHoveredTooltip=()=>{this.hoverCloseTimeout=window.setTimeout(()=>{this.hoverCloseTimeout!==null&&this.closeActiveTooltip()},Z0t)}}registerElement(e,i){this.registeredElementCount++,this.registeredElements.set(e,i);const r=this.getReferenceElShadowRootNode(e);r&&this.registerShadowRoot(r),this.registeredElementCount===1&&this.addListeners()}unregisterElement(e){const i=this.getReferenceElShadowRootNode(e);i&&this.unregisterShadowRoot(i),this.registeredElements.delete(e)&&this.registeredElementCount--,this.registeredElementCount===0&&this.removeListeners()}pathHasOpenTooltip(e,i){const{activeTooltip:r}=this;return(r==null?void 0:r.open)&&i.includes(r)||(e==null?void 0:e.open)&&i.includes(e)}addShadowListeners(e){e.addEventListener("focusin",this.focusInHandler)}removeShadowListeners(e){e.removeEventListener("focusin",this.focusInHandler)}addListeners(){window.addEventListener("keydown",this.keyDownHandler),window.addEventListener("pointermove",this.pointerMoveHandler),window.addEventListener("click",this.clickHandler),window.addEventListener("focusin",this.focusInHandler),window.addEventListener("blur",this.blurHandler),document.addEventListener("pointerleave",this.pointerLeaveHandler)}removeListeners(){window.removeEventListener("keydown",this.keyDownHandler),window.removeEventListener("pointermove",this.pointerMoveHandler),window.removeEventListener("click",this.clickHandler),window.removeEventListener("focusin",this.focusInHandler),window.removeEventListener("blur",this.blurHandler),document.removeEventListener("pointerleave",this.pointerLeaveHandler)}clearHoverOpenTimeout(){window.clearTimeout(this.hoverOpenTimeout),this.hoverOpenTimeout=null}clearHoverCloseTimeout(){window.clearTimeout(this.hoverCloseTimeout),this.hoverCloseTimeout=null}clearHoverTimeout(){this.clearHoverOpenTimeout(),this.clearHoverCloseTimeout()}closeTooltipIfNotActive(e){this.activeTooltip!==e&&this.closeActiveTooltip()}closeActiveTooltip(){const{activeTooltip:e}=this;e!=null&&e.open&&this.toggleTooltip(e,!1)}toggleFocusedTooltip(e,i){i&&this.clearHoverTimeout(),this.toggleTooltip(e,i)}toggleTooltip(e,i){e.open=i,this.activeTooltip=i?e:null}registerShadowRoot(e){const{registeredShadowRootCounts:i}=this,r=i.get(e),n=Math.min((typeof r=="number"?r:0)+1,1);n===1&&this.addShadowListeners(e),i.set(e,n)}unregisterShadowRoot(e){const{registeredShadowRootCounts:i}=this,r=i.get(e),n=Math.max((typeof r=="number"?r:1)-1,0);n===0&&this.removeShadowListeners(e),i.set(e,n)}getReferenceElShadowRootNode(e){return e instanceof Element?OEe(e):null}}const J0t=ct`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{display:contents;--calcite-floating-ui-z-index: var(--calcite-tooltip-z-index, var(--calcite-z-index-tooltip))}.position-container{inline-size:max-content;display:none;max-inline-size:100vw;max-block-size:100vh;inset-block-start:0;left:0;z-index:var(--calcite-floating-ui-z-index)}@starting-style{.position-container{opacity:0;inset-block-start:0;left:0}}.position-container{max-inline-size:var(--calcite-tooltip-max-size-x, 20rem);max-block-size:20rem}.position-container .calcite-floating-ui-anim{position:relative;transition-duration:var(--calcite-floating-ui-transition);transition-property:inset-block-start,left,opacity,display;transition-behavior:allow-discrete;opacity:0;box-shadow:0 0 16px #00000029;z-index:var(--calcite-z-index);border-radius:.25rem}.position-container[data-placement^=bottom] .calcite-floating-ui-anim{inset-block-start:-5px}.position-container[data-placement^=top] .calcite-floating-ui-anim{inset-block-start:5px}.position-container[data-placement^=left] .calcite-floating-ui-anim{left:5px}.position-container[data-placement^=right] .calcite-floating-ui-anim{left:-5px}.position-container[data-placement] .calcite-floating-ui-anim--active{opacity:1;inset-block-start:0;left:0}@starting-style{.position-container[data-placement] .calcite-floating-ui-anim--active{opacity:0}}.calcite-floating-ui-arrow{pointer-events:none;position:absolute;z-index:calc(var(--calcite-z-index) * -1);fill:var(--calcite-color-foreground-1)}.calcite-floating-ui-arrow__stroke{stroke:var(--calcite-color-border-3)}.container{position:relative;overflow:hidden;padding:.75rem 1rem;font-size:var(--calcite-font-size--2);line-height:1.375;font-weight:var(--calcite-font-weight-medium);word-wrap:break-word;word-break:break-word;border-radius:var(--calcite-tooltip-corner-radius, var(--calcite-corner-radius-round));color:var(--calcite-tooltip-text-color, var(--calcite-color-text-1));text-align:start}.position-container .calcite-floating-ui-anim{border-width:1px;border-style:solid;background-color:var(--calcite-tooltip-background-color, var(--calcite-color-foreground-1));border-color:var(--calcite-tooltip-border-color, var(--calcite-color-border-3));border-radius:var(--calcite-tooltip-corner-radius, var(--calcite-corner-radius-round))}.calcite-floating-ui-arrow{fill:var(--calcite-tooltip-background-color, var(--calcite-color-foreground-1))}.calcite-floating-ui-arrow__stroke{stroke:var(--calcite-tooltip-border-color, var(--calcite-color-border-3))}:host([hidden]){display:none}[hidden]{display:none}`,Tde=new Y0t,JN=class JN extends dt{constructor(){super(...arguments),this.arrowRef=vi(),this.guid=G0t.host(Mc()),this.transitionProp="opacity",this.floatingLayout="vertical",this.closeOnClick=!1,this.offsetDistance=$z,this.offsetSkidding=0,this.open=!1,this.overlayPositioning="absolute",this.placement="auto",this.calciteTooltipBeforeClose=Re({cancelable:!1}),this.calciteTooltipBeforeOpen=Re({cancelable:!1}),this.calciteTooltipClose=Re({cancelable:!1}),this.calciteTooltipOpen=Re({cancelable:!1})}async reposition(e=!1){const{referenceEl:i,placement:r,overlayPositioning:n,offsetDistance:s,offsetSkidding:a,arrowRef:o,floatingEl:l}=this;return ZJ(this,{floatingEl:l,referenceEl:i,overlayPositioning:n,placement:r,offsetDistance:s,offsetSkidding:a,arrowEl:o.value,type:"tooltip"},e)}connectedCallback(){super.connectedCallback(),this.setUpReferenceElement(!0)}willUpdate(e){(e.has("offsetDistance")&&(this.hasUpdated||this.offsetDistance!==$z)||e.has("offsetSkidding")&&(this.hasUpdated||this.offsetSkidding!==0)||e.has("overlayPositioning")&&(this.hasUpdated||this.overlayPositioning!=="absolute")||e.has("placement")&&(this.hasUpdated||this.placement!=="auto"))&&this.reposition(!0),e.has("open")&&(this.hasUpdated||this.open!==!1)&&this.openHandler(),e.has("referenceElement")&&this.setUpReferenceElement()}loaded(){this.referenceElement&&!this.referenceEl&&this.setUpReferenceElement()}disconnectedCallback(){super.disconnectedCallback(),this.removeReferences(),H5(this)}openHandler(){IT(this),this.reposition(!0)}onBeforeOpen(){this.calciteTooltipBeforeOpen.emit()}onOpen(){this.calciteTooltipOpen.emit()}onBeforeClose(){this.calciteTooltipBeforeClose.emit()}onClose(){this.calciteTooltipClose.emit(),q5(this)}setFloatingEl(e){this.floatingEl=e,e&&requestAnimationFrame(()=>this.setUpReferenceElement())}setTransitionEl(e){e&&(this.transitionEl=e)}setUpReferenceElement(e=!0){this.removeReferences(),this.referenceEl=xMe(this.el),C$(this);const{el:i,referenceElement:r,referenceEl:n}=this;e&&r&&!n&&console.warn(`${i.tagName}: reference-element id "${r}" was not found.`,{el:i}),this.addReferences()}getId(){return this.el.id||this.guid}addReferences(){const{referenceEl:e}=this;if(!e)return;const i=this.getId();"setAttribute"in e&&e.setAttribute(Sde,i),Tde.registerElement(e,this.el)}removeReferences(){const{referenceEl:e}=this;e&&("removeAttribute"in e&&e.removeAttribute(Sde),Tde.unregisterElement(e))}render(){const{referenceEl:e,label:i,open:r,floatingLayout:n}=this,s=e&&r,a=!s;return this.el.inert=a,this.el.ariaLabel=i,this.el.ariaLive="polite",wu(this.el,"id",this.getId()),this.el.role="tooltip",q`<div class=${H($de.positionContainer)} ${gt(this.setFloatingEl)}><div class=${H({[dT.animation]:!0,[dT.animationActive]:s})} ${gt(this.setTransitionEl)}>${lTe({floatingLayout:n,ref:this.arrowRef})}<div class=${H($de.container)}><slot></slot></div></div></div>`}};JN.properties={floatingLayout:[16,{},{state:!0}],referenceEl:[16,{},{state:!0}],closeOnClick:[7,{},{reflect:!0,type:Boolean}],label:1,offsetDistance:[11,{},{type:Number,reflect:!0}],offsetSkidding:[11,{},{reflect:!0,type:Number}],open:[7,{},{reflect:!0,type:Boolean}],overlayPositioning:[3,{},{reflect:!0}],placement:[3,{},{reflect:!0}],referenceElement:1},JN.styles=J0t;let lN=JN;ci("calcite-tooltip",lN);const T3t=Object.freeze(Object.defineProperty({__proto__:null,Tooltip:lN},Symbol.toStringTag,{value:"Module"}));/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.7 */var BS;let $Me=(BS=class extends dt{constructor(){super(...arguments),this._associationFeaturesIntersectionObserver=new IntersectionObserver(([e])=>{e!=null&&e.isIntersecting&&this._increaseFeaturePage()},{root:window.document}),this._associationFeaturesIntersectionObserverNode=vi(),this._currentFeaturePage=1,this._increaseFeaturePage=()=>{const{state:e,showAllEnabled:i,associatedFeatureCount:r,featuresPerPage:n,currentFeaturePage:s}=this;e==="ready"&&i&&r>=n*s&&this.currentFeaturePage++},this._isFeatureCountNoticeOpen=!0,this.associationViewModels=new Map,this.featuresPerPage=50,this.maxFeatureCount=1e3,this.showAllEnabled=!1,this.state="ready",this.tooltipReferenceMap=OF()}get associatedFeatureCount(){const e=this.associationViewModels,i=this.selectedLayer?e.get(this.selectedLayer):null;return i?i.length:0}get currentFeaturePage(){return this._currentFeaturePage}set currentFeaturePage(e){const{featuresPerPage:i,associatedFeatureCount:r}=this,n=Math.ceil(r/i)||1,s=Math.max(Math.min(e,n),1);this._currentFeaturePage=s}loaded(){this.manager.onLifecycle(()=>[be(()=>[this.state,this.showAllEnabled,this._associationFeaturesIntersectionObserverNode],()=>{this._handleAssociationFeaturesObserverChange()},{initial:!0})])}getConnectivityTooltip(e){const{messages:i}=this;if(!i)return"";switch(e){case"connectivity":case"junction-junction-connectivity":return i.associationsJunctionJunction;case"junction-edge-from-connectivity":return i.associationsJunctionEdgeFrom;case"junction-edge-midspan-connectivity":return i.associationsJunctionEdgeMidspan;case"junction-edge-to-connectivity":return i.associationsJunctionEdgeTo;default:return""}}_handleAssociationFeaturesObserverChange(){this._unobserveAssociationFeaturesObserver();const{state:e,showAllEnabled:i}=this;this._associationFeaturesIntersectionObserverNode.value&&e==="ready"&&i&&this._associationFeaturesIntersectionObserver.observe(this._associationFeaturesIntersectionObserverNode.value)}_unobserveAssociationFeaturesObserver(){this._associationFeaturesIntersectionObserverNode.value&&this._associationFeaturesIntersectionObserver.unobserve(this._associationFeaturesIntersectionObserverNode.value)}_renderConnectivityIcon(e,i){const{tooltipReferenceMap:r}=this;let n;switch(e){case"junction-edge-from-connectivity":n="connection-end-left";break;case"junction-edge-to-connectivity":n="connection-end-right";break;case"junction-edge-midspan-connectivity":n="connection-middle";break;case"connectivity":case"junction-junction-connectivity":default:n="connection-to-connection"}return q`<calcite-icon .icon=${n} @pointerover=${s=>{r.set(i,s.target)}} scale=s slot=content-start></calcite-icon>`}_renderFeatureCountWarning(){const{associatedFeatureCount:e,maxFeatureCount:i,messages:r}=this,n=Sr((r==null?void 0:r.associationsLimitNoticeMessage)??"",{number:i}),s=e>i,a=(r==null?void 0:r.associationsLimitNoticeTitle)??"";return s?q`<calcite-notice class=${H(this._isFeatureCountNoticeOpen?"notice-container":"")} closable icon=information kind=info open scale=s width=full @calciteNoticeBeforeOpen=${()=>this._isFeatureCountNoticeOpen=!0} @calciteNoticeClose=${()=>this._isFeatureCountNoticeOpen=!1}><div slot=title>${a}</div><div slot=message>${n}</div></calcite-notice>`:null}_renderFeatureObserver(){return q`<div class="feature-observer" ${gt(this._associationFeaturesIntersectionObserverNode)}></div>`}_renderLoading(){return nt("loading-container",q`<div class="loading-container">${this._renderLoadingIcon()}</div>`)}_renderLoadingIcon(){var i;const e=((i=this.messages)==null?void 0:i.loading)??"";return q`<calcite-loader inline .label=${e}></calcite-loader>`}},BS.properties={associatedFeatureCount:32,associationViewModels:0,currentFeaturePage:9,featuresPerPage:9,maxFeatureCount:9,messages:0,parentFeatureViewModel:0,selectedLayer:0,showAllEnabled:5,state:1,tooltipReferenceMap:0},BS);yr("arcgis-utility-network-association-list",$Me);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.7 */const X0t=ct`:host{position:relative;flex:1 1 auto}.list-item--hidden{display:none}.feature-observer{bottom:var(--calcite-spacing-xxl);position:relative;text-align:center;z-index:2}.loading-container{display:flex;justify-content:center;padding:var(--calcite-spacing-md) 0;width:100%}.notice-container{margin-bottom:var(--calcite-spacing-xs)}`,Q0t="nested";var Bw;let K0t=(Bw=class extends $Me{constructor(){super(...arguments),this.displayCount=3,this.flowType="feature-utility-network-association-type"}get endIndex(){const{currentFeaturePage:e,featuresPerPage:i,maxFeatureCount:r}=this;return Math.min(e*i,r)}_featureViewModelMatch(e,i){const r=e.graphic,n=r==null?void 0:r.layer;let s=null;(n==null?void 0:n.type)==="subtype-sublayer"&&n.parent?s=n.parent.globalIdField??null:n&&"globalIdField"in n&&(s=n.globalIdField);const a=s?r==null?void 0:r.attributes[s]:null,o=i.graphic,l=o==null?void 0:o.layer;let c=null;(l==null?void 0:l.type)==="subtype-sublayer"&&l.parent?c=l.parent.globalIdField??null:l&&"globalIdField"in l&&(c=l.globalIdField);const h=c?o==null?void 0:o.attributes[c]:null;return a&&h&&a===h}_findFlowItem(e){var i;return((i=this.flowItems)==null?void 0:i.findIndex(r=>{if(r.flowType!=="feature-association")return!1;const n=r.viewModel;return this._featureViewModelMatch(n,e)}))??-1}_formatPercentAlong(e){const{percentAlong:i}=e;return i==null?"":or(i,{style:"percent",maximumFractionDigits:2})}async _handleFeatureClick(e,i,r){const{flowItems:n}=this;if(e){n==null||n.removeAll();return}if(i<0||!n){await this._selectAssociation(r);return}for(;n.length>i+1;)n.pop()}_isConnectivityAssociation(e){const{associationType:i}=e;return i==="connectivity"||i==="junction-junction-connectivity"||i==="junction-edge-from-connectivity"||i==="junction-edge-midspan-connectivity"||i==="junction-edge-to-connectivity"}_isConnectivityMidspanAssociation(e){return e.associationType==="junction-edge-midspan-connectivity"}_isParentFeature(e){var n;const i=(n=this.flowItems)==null?void 0:n.getItemAt(0);if(!i)return!1;const r=i.parentFeatureViewModel;return this._featureViewModelMatch(r,e)}async _selectAssociation(e){const{flowItems:i}=this;i&&i.push(Hw(nt(this.parentFeatureViewModel,q`<arcgis-feature .flowItems=${i} .flowType=${"feature-utility-network-associations"} .graphic=${e.graphic} .map=${this.map} show-utility-network-content .spatialReference=${this.spatialReference} .timeZone=${this.timeZone} .view=${this.view}></arcgis-feature>`)))}_showAllAssociations(e){const{flowItems:i,description:r}=this;if(!i||!e)return;this.showAllEnabled=!0;const n=(e==null?void 0:e.title)??"";i.push(Hw(q`<arcgis-feature-utility-network-association-list .associationViewModels=${this.associationViewModels} .description=${r} .flowItems=${i} .flowType=${this.flowType} .messages=${this.messages} .parentFeatureViewModel=${this.parentFeatureViewModel} .selectedLayer=${e} .showAllEnabled=${this.showAllEnabled} title=${n??Pe}></arcgis-feature-utility-network-association-list>`))}render(){var n,s,a,o;const{associationViewModels:e,state:i}=this,r=((n=this.selectedLayer)==null?void 0:n.title)??((s=this.messages)==null?void 0:s.noTitle)??"";return q`<div>${i==="loading"||i==="querying"?this._renderLoading():q`<calcite-list .displayMode=${Q0t} .filterEnabled=${this.showAllEnabled&&!!this.selectedLayer} .filterLabel=${(a=this.messages)==null?void 0:a.associationFilterPlaceholder} .filterPlaceholder=${(o=this.messages)==null?void 0:o.associationFilterPlaceholder} .label=${r}>${this.showAllEnabled&&this.selectedLayer?q`${this._renderFeatureCountWarning()}${this._renderAssociatedFeatureListPage()}${this._renderFeatureObserver()}`:Array.from(e.keys(),l=>this._renderTypeList(l))}</calcite-list>`}</div>`}_renderAssociatedFeature(e){const{featureViewModel:i,title:r}=e,n=this.state==="loading",s=this._findFlowItem(i),a=s<0&&this._isParentFeature(i),o=a||s>=0,l=`associated-feature-${e.association.globalId}`;return q`<calcite-list-item class=${H(n?"list-item--hidden":"")} .description=${Rd(e.terminalName??"")} .label=${Rd(r)} @calciteListItemSelect=${async()=>await this._handleFeatureClick(a,s,i)}>${this._isConnectivityAssociation(e.association)?this._renderConnectivityIcon(e.association.associationType,l):null}${this._isConnectivityMidspanAssociation(e.association)?q`<calcite-chip .label=${this._formatPercentAlong(e.association)} scale=s slot=content-end>${this._formatPercentAlong(e.association)}</calcite-chip>`:null}${this._renderChevronIconNode(o)}</calcite-list-item>`}_renderAssociatedFeatureList(e){return e.toArray().map(i=>this._renderAssociatedFeature(i))}_renderAssociatedFeatureListPage(){const e=this.associationViewModels.get(this.selectedLayer).slice(0,this.endIndex);return[...this._renderTooltips(e),...this._renderAssociatedFeatureList(e)]}_renderChevronIconNode(e){return q`<calcite-icon flip-rtl .icon=${e?"move-up":"chevron-right"} scale=s slot=content-end></calcite-icon>`}_renderItemTooltip(e){const{tooltipReferenceMap:i}=this,r=`associated-feature-${e.association.globalId}`;return this._isConnectivityAssociation(e.association)?q`<calcite-tooltip overlay-positioning=fixed .referenceElement=${i.get(r)}>${this.getConnectivityTooltip(e.association.associationType)}</calcite-tooltip>`:null}_renderTypeList(e){const{messages:i}=this,{displayCount:r}=this,n=this.associationViewModels.get(e),s=n.slice(0,r),a=s.length<n.length,o=Sr((i==null?void 0:i.numberRecords)??"",{number:n.length.toString()}),l=(i==null?void 0:i.showAll)??"";return nt("show-all",q`<calcite-list-item expanded .label=${e.title} .value=${e.id}><calcite-chip .label=${String(n.length)} scale=s slot=content-end>${n.length}</calcite-chip><calcite-list .group=${e.id} .label=${e.title??""}>${[this._renderTooltips(s),this._renderAssociatedFeatureList(s)]}${a?nt("show-all-item",q`<calcite-list-item .description=${o} .label=${l} @calciteListItemSelect=${()=>this._showAllAssociations(e)}><calcite-icon icon=list scale=s slot=content-end></calcite-icon></calcite-list-item>`):null}</calcite-list></calcite-list-item>`)}_renderTooltips(e){return e.toArray().map(i=>this._renderItemTooltip(i))}},Bw.properties={description:1,displayCount:9,endIndex:32,flowItems:0,flowType:1,map:0,spatialReference:0,timeZone:1,view:0},Bw.styles=X0t,Bw);yr("arcgis-feature-utility-network-association-list",K0t);var rW;let vm=rW=class extends $e{static from(t){return AT(rW,t)}constructor(t){super(t),this.returnDeletes=!1,this.elements=[],this.types=[],this.gdbVersion=null,this.moment=null}};d([f({type:Boolean,json:{write:!0}})],vm.prototype,"returnDeletes",void 0),d([f({type:[Aa],json:{write:!0}})],vm.prototype,"elements",void 0),d([f({type:[jC.apiValues],json:{type:jC.jsonValues,read:jC.read,write:jC.write}})],vm.prototype,"types",void 0),d([f({type:String,json:{write:!0}})],vm.prototype,"gdbVersion",void 0),d([f({type:Date,json:{type:Number,write:{writer:(t,e)=>{e.moment=t==null?void 0:t.getTime()}}}})],vm.prototype,"moment",void 0),vm=rW=d([V("esri.rest.networks.support.QueryAssociationsParameters")],vm);const ewt=Object.freeze(Object.defineProperty({__proto__:null,get default(){return vm}},Symbol.toStringTag,{value:"Module"}));/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.7 */const twt=ct`.list-container{min-height:var(--calcite-spacing-xxxl)}.loading-container{display:flex;justify-content:center;padding:var(--calcite-spacing-md) 0;width:100%}.sticky-loading-container{display:flex;position:sticky;bottom:var(--calcite-spacing-sm);align-items:center;justify-content:center;z-index:2;margin:0;padding:0;height:var(--calcite-spacing-xxxl);pointer-events:none;height:500px}`,Ide=100,Mde={assetGroup:"assetgroup",assetType:"assettype"},Cde="{00000000-0000-0000-0000-000000000000}",XN=class XN extends dt{constructor(){super(...arguments),this._addFlowItem=e=>{var i;e&&((i=this.flowItems)==null||i.push(e))},this._attachmentAssociations=new Ue,this._attachmentFeatureCount=0,this._cancelQuery=()=>{const{_queryAbortController:e}=this;e&&e.abort(),this._queryAbortController=null},this._cancelQueryFeatureCount=()=>{const{_queryFeatureCountAbortController:e}=this;e&&e.abort(),this._queryFeatureCountAbortController=null},this._connectivityAssociations=new Ue,this._connectivityFeatureCount=0,this._containerAssociations=new Ue,this._containerFeatureCount=0,this._contentAssociations=new Ue,this._contentFeatureCount=0,this._networkSourceIdsInUse=new Set,this._query=async e=>{if(!e)return;await this._loadUtiltyNetworks();const{_queryAbortController:i}=this;this._destroyAssociatedFeatureViewModels(),this._clearFeatures(),this._featureCount&&await this._queryAssociatedFeatures(e,{signal:i==null?void 0:i.signal})},this._queryController=async e=>{this._cancelQuery();const i=new AbortController;this._queryAbortController=i,await la(this._query(e)),this._queryAbortController===i&&(this._queryAbortController=null)},this._queryFeatureCountController=async()=>{this._loaded=!1,this._cancelQueryFeatureCount();const e=new AbortController;this._queryFeatureCountAbortController=e,await la(this._queryFeatureCount()),this._queryFeatureCountAbortController===e&&(this._queryFeatureCountAbortController=null),this._loaded=!0},this._queryDebounced=X2(this._queryController,Ide),this._queryFeatureCountDebounced=X2(this._queryFeatureCountController,Ide),this._structureAssociations=new Ue,this._structureFeatureCount=0,this._queryAssociationType=async()=>{this._activeAssociationType&&this._queryDebounced(this._activeAssociationType)},this._associationFeatures=OF(),this._associationViewModels=OF(),this._featureCount=0,this._loaded=!1,this._queryAbortController=null,this._queryFeatureCountAbortController=null,this._queryPageAbortController=null,this.associationTypes=null,this.autoDestroyDisabled=!1,this.flowType="feature-utility-network-associations",this.headingLevel=2,this.source="popup"}get _globalId(){var e,i;return(this._globalIdField&&((i=(e=this.graphic)==null?void 0:e.attributes)==null?void 0:i[this._globalIdField]))??null}get _globalIdField(){var e;return(e=this.layer)==null?void 0:e.globalIdField}get _objectId(){var e,i;return(this._objectIdField&&((i=(e=this.graphic)==null?void 0:e.attributes)==null?void 0:i[this._objectIdField]))??null}get _objectIdField(){var e;return(e=this.layer)==null?void 0:e.objectIdField}get _supportsCacheHint(){var e,i,r;return!!((r=(i=(e=this.layer)==null?void 0:e.capabilities)==null?void 0:i.queryRelated)!=null&&r.supportsCacheHint)}get _utilityNetwork(){const{layer:e,map:i}=this;if(!(e!=null&&e.loaded)||!i)return null;const r=this._isSubtypeSublayer(e)?e.parent:e;return D0t(i,r)}get _canLoad(){return!!this.map}get _canQuery(){var e,i,r;return!!((r=(i=(e=this.layer)==null?void 0:e.capabilities)==null?void 0:i.query)!=null&&r.supportsPagination)}get _state(){const{_canLoad:e,_canQuery:i,_featureCount:r,_loaded:n,_queryAbortController:s,_queryFeatureCountAbortController:a,_queryPageAbortController:o,associationTypes:l}=this;return a||e&&!n?"loading":s||o?"querying":!this._globalId||!l||!i||!r?"disabled":"ready"}get heading(){return this._heading}set heading(e){this._heading=e}async destroy(){await this.manager.destroy()}loaded(){this.manager.onLifecycle(()=>[be(()=>[this.graphic,this.layer,this.map,this.associationTypes,this._canQuery,this._objectId,this._globalId],()=>{this._queryFeatureCountDebounced(),this._queryAssociationType()},{initial:!0}),be(()=>this._activeAssociationType,e=>{this._queryDebounced(e)}),be(()=>this._associationFeatures.values(),()=>{this._setUpUtilityNetworkAssociationsViewModels()})]),this.manager.onDestroy(()=>{this._cancelQuery(),this._cancelQueryFeatureCount()})}_addAssociationTypeFlowItem(){this._addFlowItem(Hw(q`<arcgis-feature-utility-network-association-list .associationViewModels=${this._associationViewModels} .flowItems=${this.flowItems} .flowType=${this.flowType} .messages=${this.messages} .map=${this.map} .parentFeatureViewModel=${this.parentFeatureViewModel} .state=${this._state} .spatialReference=${this.spatialReference} .timeZone=${this.timeZone} .view=${this.view}></arcgis-feature-utility-network-association-list>`))}_clearAssociations(){this._attachmentAssociations.removeAll(),this._connectivityAssociations.removeAll(),this._containerAssociations.removeAll(),this._contentAssociations.removeAll(),this._structureAssociations.removeAll()}_clearFeatures(){this._associationFeatures.forEach(e=>e.removeAll()),this._associationFeatures.clear()}_compareByFeatureTitle(e,i){return e.title.localeCompare(i.title,void 0,{numeric:!0})}async _countAssociatedFeatureCount(e,i,r,n,s){const a=this._getFeatureQueryWhereClause(e,i,r,n);return await e.queryFeatureCount({where:a,outFields:["*"],returnGeometry:!1},{signal:s==null?void 0:s.signal})}async _countAssociatedFeatures(e,i,r,n,s){if(!i.length)return 0;const a=await this._findLayersBySourceId(e);await this._loadLayers(a);const o=a.map(l=>this._countAssociatedFeatureCount(l,i,r,n,s));return(await Promise.all(o)).reduce((l,c)=>l+c,0)}async _createAssociationFeatureObjects(e,i,r,n,s){if(!e.length)return[];const a=new Map,o=Array.from(i.entries()).map(async([c,h])=>{const m=await this._findLayersBySourceId(c);await this._loadLayers(m);const g=m.map(v=>this._queryLayer(v,h,r,n,s));(await Promise.all(g)).forEach(v=>{v.forEach(b=>{if(this.source==="popup"?b.sourceLayer&&b.getEffectivePopupTemplate():b.sourceLayer){const x=b.layer.globalIdField??"",$=b.attributes[x],M=a.get($)??[];M.push(b),a.set($,M)}})})});await Promise.all(o);const l=[];return await Promise.all(e.toArray().map(async c=>{const{fromNetworkElement:h,toNetworkElement:m}=c,g=h.globalId===this._globalId?m:h,v=a.get(g.globalId)??[];await Promise.all(v.map(async b=>{var M,k;const x=(k=(M=this._utilityNetwork)==null?void 0:M.getTerminalById(g==null?void 0:g.terminalId))==null?void 0:k.name,$=await b.sourceLayer.getFeatureTitle(b)||this._getFeatureTitle(b);l.push({title:$,feature:b,association:c,terminalName:x})}))})),l}_destroyAssociatedFeatureViewModels(){this._associationViewModels.forEach(e=>e.destroyAll())}_equals(e,i){if(e.globalId===Cde&&i.globalId===Cde){let r=function(h,m){return h.networkSourceId===m.networkSourceId&&h.globalId===m.globalId&&h.terminalId===m.terminalId&&h.firstUnit===m.firstUnit&&h.numUnits===m.numUnits};const n=e.fromNetworkElement,s=e.toNetworkElement,a=i.fromNetworkElement,o=i.toNetworkElement,l=r(n,a),c=r(s,o);return l&&c&&e.associationType===i.associationType}return e.globalId!=null&&i.globalId!=null&&e.globalId===i.globalId}async _findLayersBySourceId(e){const{_utilityNetwork:i,map:r}=this;i!=null&&i.loaded||await(i==null?void 0:i.load());const n=i.getLayerIdBySourceId(e),s=r.allLayers.filter(o=>!!(i!=null&&i.isUtilityLayer(o))&&o.layerId===n),a=r.allTables.filter(o=>!!(i!=null&&i.isUtilityLayer(o))&&o.layerId===n);return s.concat(a).toArray()}_getAssociationsByType(e){switch(e){case"attachment":return this._attachmentAssociations;case"structure":return this._structureAssociations;case"connectivity":return this._connectivityAssociations;case"container":return this._containerAssociations;case"content":return this._contentAssociations}}_getAssociationTypeTitle(e){var r,n,s,a,o;const{messages:i}=this;if(e.title)return e.title;switch(e.type){case"attachment":return(i==null?void 0:i.associationsAttachments)??((r=this.messages)==null?void 0:r.noTitle)??"";case"connectivity":return(i==null?void 0:i.associationsConnectivity)??((n=this.messages)==null?void 0:n.noTitle)??"";case"structure":return(i==null?void 0:i.associationsStructure)??((s=this.messages)==null?void 0:s.noTitle)??"";case"content":return(i==null?void 0:i.associationsContents)??((a=this.messages)==null?void 0:a.noTitle)??"";case"container":return(i==null?void 0:i.associationsContainer)??((o=this.messages)==null?void 0:o.noTitle)??""}}_getFeatureCountForAssociationType(e){switch(e){case"attachment":return this._attachmentFeatureCount;case"structure":return this._structureFeatureCount;case"content":return this._contentFeatureCount;case"container":return this._containerFeatureCount;case"connectivity":return this._connectivityFeatureCount}}_getFeatureQueryWhereClause(e,i,r,n){const s=e.globalIdField,a=e.fieldsIndex.get(Mde.assetGroup),o=e.fieldsIndex.get(Mde.assetType),l=r!=null,c=n!=null,h=s?lY(s,i):null,m=l?`(${a==null?void 0:a.name} = ${r})`:null,g=l&&c?`(${o==null?void 0:o.name} = ${n})`:null;return[h,m,g].filter(Boolean).join(" AND ")}_getFeatureTitle(e){var l;const i=e.attributes,r=e.sourceLayer;if(!i||!r)return"";const n="displayField"in r?r.displayField:null,s=n!=null?i[n.toString()]:null,a=s!=null?s.toString():null,o=(l=e.getObjectId())==null?void 0:l.toString();return a||o||""}_isSubtypeGroupLayer(e){return e!=null&&typeof e=="object"&&"type"in e&&e.type==="subtype-group"&&"sublayers"in e}_isSubtypeSublayer(e){return(e==null?void 0:e.type)==="subtype-sublayer"}async _loadUtiltyNetworks(){var r;const e=this.map;if(!e)return;await Promise.allSettled(((r=e.utilityNetworks)==null?void 0:r.map(n=>n.load()))??[]);const i=this._utilityNetwork;if(i){const n=s=>{if("layerId"in s&&i.isUtilityLayer(s)){const a=s.layerId!=null?i.getSourceIdByLayerId(s.layerId):null;a!=null&&this._networkSourceIdsInUse.add(a)}};this._networkSourceIdsInUse=new Set,e.allLayers.forEach(n),e.allTables.forEach(n)}}async _loadLayers(e){const i=e.filter(r=>!r.loaded).map(r=>r.load());i.length&&await Promise.allSettled(i)}_matchesGlobalFeature(e,i){return this._equals(e.association,i.association)}async _queryAssociatedFeatures(e,i){const{layer:r,_globalId:n,associationTypes:s,_utilityNetwork:a,_canQuery:o,_associationFeatures:l}=this;if(await Promise.allSettled([r==null?void 0:r.load(),a==null?void 0:a.load()]),!o||!r||!s||!a)return;const c=this._getAssociationsByType(e.type),{associatedAssetGroup:h,associatedAssetType:m}=e,g=new Map;c.forEach(b=>{const{fromNetworkElement:x,toNetworkElement:$}=b,{networkSourceId:M,elementGlobalId:k}=x.globalId===n?{networkSourceId:$.networkSourceId,elementGlobalId:$.globalId}:{networkSourceId:x.networkSourceId,elementGlobalId:x.globalId},A=g.get(M)||[];A.push(k),g.set(M,A)});const v=await this._createAssociationFeatureObjects(c,g,h,m,i);this._parseFeatureObjects(v,l)}async _queryAssociations(e){const{layer:i,_globalId:r,associationTypes:n,_utilityNetwork:s,_canQuery:a}=this;if(await Promise.allSettled([i==null?void 0:i.load(),s==null?void 0:s.load()]),this._clearAssociations(),!a||!i||!n||!s||!r)return;const o=this._isSubtypeSublayer(i)?i.parent:i,l=new Aa({globalId:r,networkSourceId:s.getSourceIdByLayerId(o.layerId)}),c=new Set;n.forEach(b=>{switch(b.type){case"attachment":case"structure":c.add("attachment");break;case"container":case"content":c.add("containment");break;case"connectivity":c.add("connectivity"),c.add("junction-junction-connectivity"),c.add("junction-edge-from-connectivity"),c.add("junction-edge-midspan-connectivity"),c.add("junction-edge-to-connectivity");break}});const h=await(s==null?void 0:s.queryAssociations(new vm({elements:[l],types:Array.from(c)}),{signal:e==null?void 0:e.signal})),m=new Map,g=new Map;n.forEach(b=>{g.set(b.type,b),m.set(b.type,[])}),h.forEach(b=>{var M,k,A,L,z,U;const{toNetworkElement:x,fromNetworkElement:$}=b;switch(b.associationType){case"attachment":if(($==null?void 0:$.globalId)===r){if(this._shouldDiscardNetworkElement(x,"attachment",g))break;(M=m.get("attachment"))==null||M.push(x.globalId),this._attachmentAssociations.add(b)}else{if(this._shouldDiscardNetworkElement($,"structure",g))break;(k=m.get("structure"))==null||k.push($.globalId),this._structureAssociations.add(b)}break;case"connectivity":case"junction-edge-from-connectivity":case"junction-edge-midspan-connectivity":case"junction-edge-to-connectivity":case"junction-junction-connectivity":if(($==null?void 0:$.globalId)===r){if(this._shouldDiscardNetworkElement(x,"connectivity",g))break;(A=m.get("connectivity"))==null||A.push(x.globalId)}else{if(this._shouldDiscardNetworkElement($,"connectivity",g))break;(L=m.get("connectivity"))==null||L.push($.globalId)}this._connectivityAssociations.add(b);break;case"containment":if(($==null?void 0:$.globalId)===r){if(this._shouldDiscardNetworkElement(x,"content",g))break;(z=m.get("content"))==null||z.push(x.globalId),this._contentAssociations.add(b)}else{if(this._shouldDiscardNetworkElement($,"container",g))break;(U=m.get("container"))==null||U.push($.globalId),this._containerAssociations.add(b)}break}});const v=n.map(async b=>{const{associatedNetworkSourceId:x,associatedAssetGroup:$,associatedAssetType:M}=b,k=m.get(b.type),A=$!=null?await this._countAssociatedFeatures(x,k,$,M,e):k.length;switch(b.type){case"attachment":this._attachmentFeatureCount=A;break;case"connectivity":this._connectivityFeatureCount=A;break;case"container":this._containerFeatureCount=A;break;case"content":this._contentFeatureCount=A;break;case"structure":this._structureFeatureCount=A;break}});await Promise.allSettled(v)}async _queryFeatureCount(){await this._loadUtiltyNetworks();const{_queryFeatureCountAbortController:e,_canQuery:i}=this;if(!i){this._featureCount=0;return}await this._queryAssociations(e),this._featureCount=this._attachmentFeatureCount+this._connectivityFeatureCount+this._containerFeatureCount+this._contentFeatureCount+this._structureFeatureCount}async _queryLayer(e,i,r,n,s){const a=this._getFeatureQueryWhereClause(e,i,r,n),o=new mt({where:a,outFields:["*"],cacheHint:this._supportsCacheHint}),l=zn.fromJSON(await j0t(e,o,s));return l.features.forEach(c=>{const h=this._isSubtypeGroupLayer(e);c.layer=h?e.findSublayerForFeature(c):e,c.sourceLayer=h?e.findSublayerForFeature(c):e}),l.features}_parseFeatureObjects(e,i){const r=OF();e.forEach(n=>{const s=(n==null?void 0:n.feature).sourceLayer;V0t(r,s,()=>new Ue).add(n)});for(const[n,s]of r)this._sortFeatureObjectsByTitle(s),i.set(n,s)}_selectAssociationType(e){const{flowItems:i}=this;i&&(this._activeAssociationType=e,this._setUpUtilityNetworkAssociationsViewModels(),this._addAssociationTypeFlowItem())}_setUpUtilityNetworkAssociationsViewModels(){this._associationViewModels.forEach((s,a)=>{const o=this._associationFeatures.get(a);o?s.forEach(l=>{o.find(c=>this._matchesGlobalFeature(l,c))||(s.remove(l),s.length||this._associationViewModels.delete(a))}):(s.removeAll(),this._associationViewModels.delete(a))});const{map:e,view:i,spatialReference:r,timeZone:n}=this;this._associationFeatures.forEach((s,a)=>{const o=this._associationViewModels.get(a)||new Ue;s==null||s.filter(Boolean).forEach((l,c)=>{if(!o.some(h=>this._matchesGlobalFeature(h,l))){const{association:h,feature:m,terminalName:g,title:v}=l;o.add({title:v,association:h,featureViewModel:new Vi({abilities:{utilityNetworkAssociationsContent:!1},map:e,view:i,spatialReference:r,timeZone:n,graphic:m}),terminalName:g},c)}}),this._associationViewModels.set(a,o)})}_shouldDiscardNetworkElement(e,i,r){var o;if(!e)return!1;const{networkSourceId:n}=e,s=(o=r.get(i))==null?void 0:o.associatedNetworkSourceId,a=this._networkSourceIdsInUse.has(n);return s!=null&&s!==n||!a}_sortFeatureObjectsByTitle(e){e.sort(this._compareByFeatureTitle)}render(){const{_state:e}=this;return q`<div><arcgis-feature-element-info .heading=${this.heading} .headingLevel=${this.headingLevel} .description=${this.description}></arcgis-feature-element-info>${e==="loading"?this._renderLoading():e==="disabled"?this._renderAssociationNotFound():this._renderContent()}</div>`}_renderAssociationNotFound(){var e;return q`<calcite-notice icon=information kind=info open scale=s width=full><div slot=message>${(e=this.messages)==null?void 0:e.noAssociations}</div></calcite-notice>`}_renderAssociationTypeList(e){return this._getFeatureCountForAssociationType(e.type)>0?this._renderAssociationTypeListItem(e):null}_renderAssociationTypeListItem(e){const i=this._getAssociationTypeTitle(e);return nt(`association-type-${e.type}`,q`<calcite-list-item .description=${Rd(e.description)} .label=${Rd(i)} .value=${e.type} @calciteListItemSelect=${()=>this._selectAssociationType(e)}><calcite-icon flip-rtl icon=chevron-right scale=s slot=content-end></calcite-icon></calcite-list-item>`)}_renderContent(){const{_state:e,associationTypes:i,messages:r}=this,n=(r==null?void 0:r.associationsList)??(r==null?void 0:r.noTitle)??"";return nt("list-container",q`<div class="list-container">${e==="ready"?q`<div><calcite-list display-mode=flat .label=${n}>${i.map(s=>this._renderAssociationTypeList(s))}</calcite-list></div>`:null}${this._renderStickyLoading()}</div>`)}_renderLoading(){return q`<div class="loading-container">${this._renderLoadingIcon()}${this._renderStickyLoading()}</div>`}_renderLoadingIcon(){return q`<calcite-loader inline label></calcite-loader>`}_renderStickyLoading(){return this._state==="querying"?q`<div class="sticky-loading-container">${this._renderLoadingIcon()}</div>`:null}};XN.properties={_activeAssociationType:16,_associationFeatures:16,_associationViewModels:16,_canLoad:16,_canQuery:16,_featureCount:16,_loaded:16,_queryAbortController:16,_queryFeatureCountAbortController:16,_queryPageAbortController:16,_state:16,associationTypes:0,autoDestroyDisabled:5,description:1,flowItems:0,flowType:1,graphic:0,heading:1,headingLevel:9,layer:0,map:0,messages:0,parentFeatureViewModel:0,source:1,spatialReference:0,timeZone:1,view:0},XN.styles=twt;let nW=XN;yr("arcgis-feature-utility-network-associations",nW);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.7 */const iwt=ct`:host{display:flex;flex:1 1 auto;background-color:var(--calcite-color-foreground-1);--calcite-color-background: var(--calcite-color-foreground-1)}.arcgis-feature{flex:1 1 auto}.arcgis-feature calcite-icon{box-sizing:content-box}.arcgis-feature__loading-container{display:flex;justify-content:center;padding:var(--calcite-spacing-md) 0;width:100%}.arcgis-feature__content-element{margin-bottom:var(--calcite-spacing-lg);padding:0 var(--calcite-spacing-sm);display:flex;flex-direction:column}.arcgis-feature__content-element:only-child,.arcgis-feature__content-element:last-child{margin-bottom:var(--calcite-spacing-xxs)}.arcgis-feature__last-edited-info{padding-top:var(--calcite-spacing-xs);font-size:var(--calcite-font-size-sm)}`,rx="arcgis-feature",ll={base:rx,container:`${rx}__size-container`,main:`${rx}__main-container`,contentElement:`${rx}__content-element`,lastEditedInfo:`${rx}__last-edited-info`,loadingSpinnerContainer:`${rx}__loading-container`},rwt=IX(Vi),QN=class QN extends dt{constructor(){super(...arguments),this.messages=TX(),this._rootFlowNode=null,this.flowType="feature",this.internalFlowItems=new Ue,this.viewModel=rwt(this),this.view=this.viewModel.view,this.icon="icon",this.isFeatureFromTable=this.viewModel.isFeatureFromTable,this.graphic=this.viewModel.graphic,this.defaultPopupTemplateEnabled=this.viewModel.defaultPopupTemplateEnabled,this.headingLevel=2,this.spatialReference=this.viewModel.spatialReference,this.timeZone=this.viewModel.timeZone,this.heading=this.viewModel.title,this.map=this.viewModel.map,this.chartAnimationDisabled=this.viewModel.abilities.chartAnimation,this.hideHeading=!1,this.hideContent=!1,this.hideAttachmentsContent=!1,this.hideCustomContent=!1,this.hideExpressionContent=!1,this.hideFieldsContent=!1,this.hideMediaContent=!1,this.showRelationshipContent=!1,this.hideTextContent=!1,this.showUtilityNetworkContent=!1,this.hideLastEditedInfo=!1,this.autoDestroyDisabled=!1,this.location=this.viewModel.location,this.state=this.viewModel.state,this.arcgisPropertyChange=aD()("flowItems","state"),this.arcgisReady=Re()}get popupTemplate(){return kbt(this.graphic,this.defaultPopupTemplateEnabled)??void 0}get sourceLayer(){return dA(this.graphic)}get fieldInfoMap(){return Cbt(Ebt(this.popupTemplate),this.sourceLayer)}get values(){var e;return((e=this.graphic)==null?void 0:e.attributes)??{}}get globalValues(){var e;return((e=this.viewModel.formattedAttributes)==null?void 0:e.global)??{}}get hideTitle(){return this.hideHeading}set hideTitle(e){this.hideHeading=e}get hideContentAttachments(){return this.hideAttachmentsContent}set hideContentAttachments(e){this.hideAttachmentsContent=e}get hideContentExpression(){return this.hideExpressionContent}set hideContentExpression(e){this.hideExpressionContent=e}get hideContentFields(){return this.hideFieldsContent}set hideContentFields(e){this.hideFieldsContent=e}get hideContentMedia(){return this.hideMediaContent}set hideContentMedia(e){this.hideMediaContent=e}get hideContentText(){return this.hideTextContent}set hideContentText(e){this.hideTextContent=e}get hideLastEditInfo(){return this.hideLastEditedInfo}set hideLastEditInfo(e){this.hideLastEditedInfo=e}async destroy(){await this.manager.destroy()}async nextMedia(e){return this.viewModel.nextMedia(e)}async previousMedia(e){return this.viewModel.previousMedia(e)}async setActiveMedia(e,i){return this.viewModel.setActiveMedia(e,i)}async updateGeometry(){return await this.viewModel.updateGeometry()}loaded(){this.manager.onLifecycle(()=>[be(()=>{var e;return[(e=this.internalFlowItems)==null?void 0:e.length]},()=>this._setFocus())])}_removeFlowItems(){var e;(e=this.internalFlowItems)==null||e.removeAll()}_storeRootFlowNode(e){this._rootFlowNode=e}_setFocus(){var e;(e=this._rootFlowNode)==null||e.setFocus()}_handleDrillInBackClick(){var e;(e=this.internalFlowItems)==null||e.pop()}render(){const{state:e}=this.viewModel,i=q`<div class=${H(ll.container)}>${e==="error"?this._renderError():e==="loading"?this._renderLoading():this._renderContentContainer()}</div>`;return q`<div class=${H(ll.base)}>${i}</div>`}_renderError(){const{messages:e,hideHeading:i}=this;return q`<calcite-notice icon=exclamation-mark-circle kind=danger open scale=s>${i?null:q`<div slot=title>${e.error}</div>`}<div slot=message>${e.loadingError}</div></calcite-notice>`}_renderLoading(){return q`<div class=${H(ll.loadingSpinnerContainer)}><calcite-loader inline label></calcite-loader></div>`}_renderAttachments(e){const{values:i,fieldInfoMap:r,sourceLayer:n,globalValues:s}=this,a=Ao({values:i,fieldInfoMap:r,globalValues:s,layer:n,text:e.title}),o=Ao({values:i,fieldInfoMap:r,globalValues:s,layer:n,text:e.description});return q`<arcgis-feature-attachments .headingLevel=${this.headingLevel} .heading=${a} .displayType=${e.displayType} .attachmentKeywords=${e.attachmentKeywords??void 0} .attachmentTypes=${e.attachmentTypes??void 0} .graphic=${this.graphic??void 0} .description=${o} .messages=${this.messages}></arcgis-feature-attachments>`}_renderCustom(e){return q`<arcgis-feature-content .creator=${e.creator} .destroyer=${e.destroyer??void 0} .graphic=${this.graphic??void 0} class=${H(ll.contentElement)}></arcgis-feature-content>`}_renderFields(e,i){var x,$;const r=this.viewModel.formattedAttributes,{values:n,fieldInfoMap:s,sourceLayer:a,popupTemplate:o,globalValues:l,graphic:c}=this,h=!!(e!=null&&e.fieldInfos),m=(x=e.fieldInfos??(o==null?void 0:o.fieldInfos)??[])==null?void 0:x.filter(({fieldName:M})=>!!M&&(rj(M)||G0(M)||M in n)),g=o==null?void 0:o.expressionInfos,v=Ao({values:n,fieldInfoMap:s,globalValues:l,layer:a,text:e.title}),b=Ao({values:n,fieldInfoMap:s,globalValues:l,layer:a,text:e.description});return q`<arcgis-feature-fields .headingLevel=${this.headingLevel} .heading=${v} class=${H(ll.contentElement)} .messages=${this.messages} .graphic=${c??void 0} .isContentFieldInfos=${h} .layer=${a} .description=${b} .values=${{...r==null?void 0:r.global,...($=r==null?void 0:r.content)==null?void 0:$[i]}} .fieldInfos=${m} .expressionInfos=${g??void 0}></arcgis-feature-fields>`}_renderMedia(e,i){var b;const{values:r,graphic:n,fieldInfoMap:s,sourceLayer:a,popupTemplate:o,globalValues:l}=this,{formattedAttributes:c,relatedInfos:h}=this.viewModel,m={...c==null?void 0:c.global,...(b=c==null?void 0:c.content)==null?void 0:b[i]},g=Ao({values:r,fieldInfoMap:s,globalValues:l,layer:a,text:e.title}),v=Ao({values:r,fieldInfoMap:s,globalValues:l,layer:a,text:e.description});return q`<arcgis-feature-media .activeMediaInfoIndex=${e.activeMediaInfoIndex??0} .chartAnimationDisabled=${this.chartAnimationDisabled} .headingLevel=${this.headingLevel} .heading=${g} class=${H(ll.contentElement)} .description=${v} .values=${r} .layer=${a} .graphic=${n??void 0} .messages=${this.messages} .fieldInfoMap=${s} .mediaInfos=${e.mediaInfos??[]} .popupTemplate=${o??void 0} .relatedInfos=${h} .formattedValues=${m}></arcgis-feature-media>`}_renderText(e){const{values:i,fieldInfoMap:r,sourceLayer:n,globalValues:s}=this,a=Ao({values:i,fieldInfoMap:r,globalValues:s,layer:n,text:e.text});return q`<arcgis-feature-content .creator=${a} .graphic=${this.graphic??void 0} class=${H(ll.contentElement)}></arcgis-feature-content>`}_renderExpression(e,i){var s;const r=this.viewModel.formattedAttributes,{fieldInfoMap:n}=this;return q`<arcgis-feature-expression .expressionInfo=${e.expressionInfo} .map=${this.map??void 0} .spatialReference=${this.spatialReference??void 0} .view=${this.viewModel.view??void 0} .graphic=${this.graphic??void 0} .location=${this.location??void 0} .headingLevel=${this.headingLevel} class=${H(ll.contentElement)} .interceptor=${this.viewModel.interceptor} .messages=${this.messages} .fieldInfoMap=${n} .values=${{...r==null?void 0:r.global,...(s=r==null?void 0:r.content)==null?void 0:s[i]}}></arcgis-feature-expression>`}_renderRelationship(e,i){var $;const{values:r,graphic:n,fieldInfoMap:s,sourceLayer:a,globalValues:o}=this,{displayCount:l,orderByFields:c,relationshipId:h}=e,{formattedAttributes:m,view:g}=this.viewModel,v={...m==null?void 0:m.global,...($=m==null?void 0:m.content)==null?void 0:$[i]},b=Ao({values:r,fieldInfoMap:s,globalValues:o,layer:a,text:e.title}),x=Ao({values:r,fieldInfoMap:s,globalValues:o,layer:a,text:e.description});return q`<arcgis-feature-relationship class=${H(ll.contentElement)} .flowItems=${this.flowItems??this.internalFlowItems} .description=${x} .layer=${a} .map=${this.map??void 0} .displayCount=${l} .graphic=${n??void 0} .heading=${b} .headingLevel=${this.headingLevel} .messages=${this.messages} .orderByFields=${c??void 0} .relationshipId=${h??void 0} .spatialReference=${this.spatialReference??void 0} .timeZone=${this.timeZone??void 0} .values=${v} .view=${g??void 0}></arcgis-feature-relationship>`}_renderAssociation(e){const{fieldInfoMap:i,globalValues:r,graphic:n,messages:s,sourceLayer:a,values:o}=this,l=Ao({values:o,fieldInfoMap:i,globalValues:r,layer:a,text:e.title}),c=Ao({values:o,fieldInfoMap:i,globalValues:r,layer:a,text:e.description});return q`<arcgis-feature-utility-network-associations .associationTypes=${e.associationTypes} class=${H(ll.contentElement)} .description=${c} .flowItems=${this.flowItems??this.internalFlowItems} .graphic=${n??void 0} .heading=${l} .headingLevel=${this.headingLevel} .layer=${a} .map=${this.map??void 0} .messages=${s} .parentFeatureViewModel=${this.viewModel} .spatialReference=${this.spatialReference??void 0} .timeZone=${this.timeZone??void 0} .view=${this.viewModel.view??void 0}></arcgis-feature-utility-network-associations>`}_renderContentElement(e,i){switch(e.type){case"attachments":return this.hideAttachmentsContent?null:this._renderAttachments(e);case"custom":return this.hideCustomContent?null:this._renderCustom(e);case"fields":return this.hideFieldsContent?null:this._renderFields(e,i);case"media":return this.hideMediaContent?null:this._renderMedia(e,i);case"text":return this.hideTextContent?null:this._renderText(e);case"expression":return this.hideExpressionContent?null:this._renderExpression(e,i);case"relationship":return this.showRelationshipContent?this._renderRelationship(e,i):null;case"utility-network-associations":return this.showUtilityNetworkContent?this._renderAssociation(e):null;default:return null}}_renderContent(){const{content:e,graphic:i}=this.viewModel;return e?Array.isArray(e)&&e.length?e.length?e.map(this._renderContentElement,this):null:typeof e=="string"?q`<arcgis-feature-content .creator=${e} .graphic=${i??void 0} class=${H(ll.contentElement)}></arcgis-feature-content>`:e instanceof HTMLElement?e:null:null}_renderContentContainer(){const{hideContent:e,internalFlowItems:i,headingLevel:r,state:n,messages:s}=this;if(e)return null;const a=q`<div class=${H(ll.main)}>${[this._renderContent(),this._renderLastEditInfo()]}</div>`,o=s.returnToInitialFeature??"";return this.flowItems?a:q`<calcite-flow ${gt(this._storeRootFlowNode)}><calcite-flow-item .loading=${n==="loading"} .headingLevel=${r} .heading=${this.hideHeading?void 0:Rd(this.heading)} .selected=${!i.length}>${a}</calcite-flow-item>${i.toArray().map((l,c)=>q`<calcite-flow-item @calciteFlowItemBack=${h=>{h.preventDefault(),this._handleDrillInBackClick()}} .loading=${n==="loading"} .headingLevel=${r} .selected=${c===i.length-1}><calcite-action appearance=transparent icon=move-up @click=${this._removeFlowItems} slot=header-actions-start .text=${o} title=${o??Pe}></calcite-action>${l}</calcite-flow-item>`)}</calcite-flow>`}_renderLastEditInfo(){const{hideLastEditedInfo:e,messages:i}=this,{lastEditInfo:r}=this.viewModel;if(!r||e)return null;const{date:n,user:s}=r,a=r.type==="edit"?s?i.lastEditedByUser:i.lastEdited:s?i.lastCreatedByUser:i.lastCreated,o=Sr(a??"",{date:n,user:s});return q`<div class=${H(ar(ll.lastEditedInfo,ll.contentElement))}>${o}</div>`}};QN.properties={flowType:16,popupTemplate:16,sourceLayer:16,fieldInfoMap:16,values:16,globalValues:16,internalFlowItems:16,viewModel:0,view:0,flowItems:0,referenceElement:1,position:3,icon:1,isFeatureFromTable:4,graphic:0,defaultPopupTemplateEnabled:5,headingLevel:9,spatialReference:0,timeZone:1,heading:0,map:0,chartAnimationDisabled:5,hideHeading:5,hideTitle:5,hideContent:5,hideAttachmentsContent:5,hideContentAttachments:5,hideCustomContent:5,hideExpressionContent:5,hideContentExpression:5,hideFieldsContent:5,hideContentFields:5,hideMediaContent:5,hideContentMedia:5,showRelationshipContent:5,hideTextContent:5,hideContentText:5,showUtilityNetworkContent:5,hideLastEditedInfo:5,hideLastEditInfo:5,autoDestroyDisabled:5,messageOverrides:0,label:1,location:0,state:3},QN.styles=iwt;let sW=QN;yr("arcgis-feature",sW);function nwt(t,e){return CSe(t,e)}/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.7 */const P$=new og({icon:"magnifying-glass-plus",id:"zoom-to-feature",title:"{messages.zoom}"}),swt=new og({icon:"trash",id:"remove-selected-feature",title:"{messages.remove}"}),e2=new og({icon:"magnifying-glass-plus",id:"zoom-to-clustered-features",title:"{messages.zoom}"}),awt=new r5({icon:"table",id:"browse-clustered-features",title:"{messages.browseClusteredFeatures}",value:!1});function owt(t){const{selectedFeature:e,location:i,view:r}=t;return r?e??i??null:null}async function SMe(t,e){var m,g;const{location:i,selectedFeature:r,view:n,zoomFactor:s}=t;await((m=e==null?void 0:e.viewModel)==null?void 0:m.updateGeometry());const a=e==null?void 0:e.graphic,o=a!=null&&a.geometry?a:owt(t);if(!n||!o){const v="zoom-to:invalid-target-or-view: Cannot zoom to location without a target and view.",b=new Error(v);throw console.error(v,{target:o,view:n}),b}const l=n.scale/s,c=(a==null?void 0:a.geometry)??((g=t.selectedFeature)==null?void 0:g.geometry)??i,h=c!=null&&c.type==="point"&&await nwt(a??r,n);P$.active=!0,P$.disabled=!0;try{await t.zoomTo({target:{target:o,scale:h?l:void 0}})}catch(v){if(bMe(v))return;const b="zoom-to:invalid-graphic: Could not zoom to the location of the graphic.",x=new Error(b);throw console.error(b,{graphic:a??r}),x}finally{P$.active=!1,P$.disabled=!1,h&&t.location!==c&&(t.location=c)}}function lwt(t){var e,i;return!!t&&t.isAggregate&&((i=(e=dA(t))==null?void 0:e.featureReduction)==null?void 0:i.type)==="cluster"}async function cwt(t,e){const i=await t.whenLayerView(dA(e)),r=i.createQuery(),n=e.getObjectId();return r.aggregateIds=n!=null?[n]:[],[i,r]}async function uwt(t){const{selectedFeature:e,view:i}=t;if((i==null?void 0:i.type)!=="2d")throw new Error("zoomToCluster:invalid-view: View must be 2d MapView.");if(!e||!lwt(e))throw new Error("zoomToCluster:invalid-selectedFeature: Selected feature must represent an aggregate/cluster graphic.");const[r,n]=await cwt(i,e);e2.active=!0,e2.disabled=!0;const{extent:s}=await r.queryExtent(n);s&&await t.zoomTo({target:s}),e2.active=!1,e2.disabled=!1}const dwt=async(t,e)=>{var n;if(!t)throw new Error("trigger-action:missing-arguments: Event has no action");const{disabled:i,id:r}=t;if(!r)throw new Error("trigger-action:invalid-action: action.id is missing");if(i)throw new Error("trigger-action:invalid-action: Action is disabled");if(r===P$.id)return await SMe(e).catch(s=>{if(!bMe(s))throw s});if(r===e2.id)return await uwt(e);if(r===awt.id){e.browseClusterEnabled=!e.browseClusterEnabled,e.featureMenuOpen=e.browseClusterEnabled;return}if(r===swt.id){e.visible=!1;const{selectedFeature:s}=e;if(!s)throw new Error("trigger-action:missing-selected-feature: Cannot remove selected feature without a selected feature.");const a=dA(s);a?a.remove(s):(n=e.view)==null||n.graphics.remove(s)}};/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.7 */const cl="arcgis-features",Ta={base:cl,container:`${cl}__container`,contentContainer:`${cl}__content-container`,contentFeature:`${cl}__content-feature`,flowItemCollapsed:`${cl}__flow-item--collapsed`,header:`${cl}__header`,footer:`${cl}__footer`,featureMenuObserver:`${cl}__feature-menu-observer`,actionExit:`${cl}__action--exit`,loader:`${cl}__loader`,paginationText:`${cl}__pagination-text`,paginationActionBar:`${cl}__pagination-action-bar`,paginationMenuButton:`${cl}__pagination-menu-button`,paginationPrevious:`${cl}__pagination-previous`},hwt=ct`:host{display:flex;overflow:hidden;flex:1 1 auto}.arcgis-features{--calcite-color-background: var(--calcite-color-foreground-1);display:flex;overflow:hidden;flex:1 1 auto;flex-direction:column}.arcgis-features img{image-orientation:from-image}.arcgis-features__flow-item--collapsed{--calcite-flow-item-header-border-block-end: none}.arcgis-features__container{display:flex;flex:1 1 auto;background-color:var(--calcite-color-foreground-1)}.arcgis-features__container calcite-list{width:100%}.arcgis-features__container:not(:empty){padding:var(--calcite-spacing-md)}.arcgis-features .arcgis-feature,.arcgis-features .arcgis-feature-relationship,.arcgis-features .arcgis-feature-utility-network-associations{background-color:transparent}.arcgis-features__heading{word-break:break-word;word-wrap:break-word}.arcgis-features__header,.arcgis-features__footer{display:flex;align-items:center;justify-content:flex-end;background-color:var(--calcite-color-foreground-1)}.arcgis-features__footer{flex:1}.arcgis-features__pagination-text{padding-inline:var(--calcite-spacing-sm);color:var(--calcite-color-text-3);font-size:var(--calcite-font-size-sm)}.arcgis-features__loader{align-self:center;padding-inline:var(--calcite-spacing-lg)}.arcgis-features__pagination-action-bar{flex:1}.arcgis-features__pagination-menu-button{border-inline-start:var(--calcite-border-width-sm) solid var(--calcite-color-border-3)}.arcgis-features__icon{display:inline-block;flex:0 0 var(--calcite-spacing-lg);width:var(--calcite-spacing-lg);height:var(--calcite-spacing-lg)}.arcgis-features__action-image{flex:0 0 var(--calcite-spacing-lg);background-position:50% 50%;background-repeat:no-repeat;background-size:contain;width:var(--calcite-spacing-lg);height:var(--calcite-spacing-lg)}.arcgis-features__header{border-block-end:var(--calcite-border-width-sm) solid var(--calcite-color-border-3)}.arcgis-features__content-feature{--calcite-flow-item-footer-padding: 0}.arcgis-features__feature-menu-observer{position:relative;bottom:var(--calcite-spacing-xxl);z-index:2;text-align:center}.arcgis-features__action--exit{transform:scaleX(-1)}`;function pwt(t){var e;switch(t==null?void 0:t.type){case"point":return t;case"extent":return t.center;case"polygon":return t.centroid;case"multipoint":case"polyline":return(e=t.extent)==null?void 0:e.center;default:return null}}const k3=P$.clone();function fwt(t){return(t==null?void 0:t.declaredClass.startsWith("esri.layers."))??!1}const mwt=IX(Zt),KN=class KN extends dt{constructor(){super(...arguments),this._featureMenuIntersectionObserverCallback=([e])=>{e!=null&&e.isIntersecting&&this.viewModel.featurePage!=null&&this.viewModel.featurePage++},this._featureMenuIntersectionObserver=new IntersectionObserver(this._featureMenuIntersectionObserverCallback,{root:window.document}),this._featureMenuIntersectionObserverNode=null,this._rootFlowItemNode=vi(),this._featureMenuViewportNode=vi(),this._actionBarMenuNode=vi(),this._flowContainerNode=vi(),this.messages=TX(),this._selectedFeatureComponent=vi(),this._cancelOpenRelatedFeature=()=>{const{_openRelatedFeatureAbortController:e}=this;e&&e.abort(),this._openRelatedFeatureAbortController=null},this._openRelatedFeatureAbortController=null,this.flowItems=new Ue,this.viewModel=mwt(this),this.actions=this.viewModel.actions,this.active=this.viewModel.active,this.autoDestroyDisabled=!1,this.collapsed=!1,this.content=this.viewModel.content,this.defaultPopupTemplateEnabled=this.viewModel.defaultPopupTemplateEnabled,this.featureCount=this.viewModel.featureCount,this.featureMenuOpen=this.viewModel.featureMenuOpen,this.featureMenuTitle=this.viewModel.featureMenuTitle,this.featureNavigationTop=!1,this.features=this.viewModel.features,this.featuresPerPage=this.viewModel.featuresPerPage,this.featureViewModelAbilities=this.viewModel.featureViewModelAbilities,this.goToOverride=this.viewModel.goToOverride,this.headerActions=new Ue,this.heading=this.viewModel.title,this.headingLevel=2,this.hideActionBar=!1,this.hideCloseButton=!1,this.hideFeatureMenuHeading=!1,this.hideFeatureNavigation=!1,this.hideFeatureListLayerTitle=!1,this.hideFlow=!1,this.hideHeading=!1,this.hideSpinner=!1,this.highlightDisabled=this.viewModel.highlightEnabled,this.includeDefaultActionsDisabled=this.viewModel.includeDefaultActions,this.initialDisplayMode=this.viewModel.initialDisplayMode,this.location=this.viewModel.location,this.map=this.viewModel.map,this.promises=this.viewModel.promises,this.responsiveActionsEnabled=!1,this.selectedFeature=this.viewModel.selectedFeature,this.selectedFeatureIndex=this.viewModel.selectedFeatureIndex,this.showCollapseButton=!1,this.spatialReference=this.viewModel.spatialReference,this.state=this.viewModel.state,this.timeZone=this.viewModel.timeZone,this.updateLocationEnabled=this.viewModel.updateLocationEnabled,this.view=this.viewModel.view,this.visible=this.viewModel.visible,this.arcgisPropertyChange=aD()("active","collapsed","featureCount","featureMenuOpen","features","promises","selectedDrillInFeature","selectedFeature","selectedFeatureComponent","selectedFeatureIndex","state","visible"),this.arcgisReady=Re(),this.arcgisClose=Re(),this.arcgisTriggerAction=Re()}get _hideActionText(){var i;if(!this.responsiveActionsEnabled)return!1;const e=(i=this.viewModel.view)==null?void 0:i.widthBreakpoint;return e==="xsmall"||e==="small"||e==="medium"}get _featureNavigationVisible(){return this.viewModel.active&&this.viewModel.featureCount>1&&!!this.viewModel.selectedFeature&&!this.hideFeatureNavigation}get _isCollapsed(){return this._collapseEnabled&&this.collapsed}get _collapseEnabled(){var e,i;return this.showCollapseButton&&(this.initialDisplayMode==="list"||!!(this.heading||(e=this.viewModel.selectedFeatureViewModel)!=null&&e.title)&&!!(this.content||(i=this.viewModel.selectedFeatureViewModel)!=null&&i.content))}get featuresTitle(){return this.heading}set featuresTitle(e){this.heading=e}get selectedDrillInFeature(){const e=Array.from(this.flowItems).at(-1);return e&&"graphic"in e?e.graphic??null:null}get selectedFeatureComponent(){return this._selectedFeatureComponent.value??null}get closed(){return!this.visible}set closed(e){this.visible=!e}async clear(){return this.viewModel.clear()}async close(){this.viewModel.visible=!1}async destroy(){var e;await this.manager.destroy(),await this._destroySpinner(this.referenceElement),this._cancelOpenRelatedFeature(),this._removeFlowItems(),this._unobserveFeatureMenuObserver(),(e=this._featureMenuIntersectionObserver)==null||e.disconnect()}async fetchFeatures(e,i){return await this.viewModel.fetchFeatures(e,i)}async open(e){this.viewModel.open(e)}async next(){return this.viewModel.next()}async previous(){return this.viewModel.previous()}async setFocus(){var e;(e=this._flowContainerNode.value)==null||e.setFocus()}async triggerAction(e){if(!e.disabled)return e&&e.type==="toggle"&&(e.value=!e.value),await dwt(e,this.viewModel)}loaded(){this.manager.onLifecycle(()=>[be(()=>{var e;return(e=this.viewModel)==null?void 0:e.selectedFeatureIndex},(e,i)=>this._selectedFeatureIndexUpdated(e,i)),be(()=>{var e;return(e=this.viewModel)==null?void 0:e.view},()=>this._viewChange()),be(()=>{var e;return(e=this._spinnerEl)==null?void 0:e.screenLocation},()=>this._closeOpenActionMenu()),be(()=>{var e;return(e=this.selectedFeatureComponent)==null?void 0:e.viewModel},()=>this._removeFlowItems()),be(()=>{var e;return(e=this.viewModel)==null?void 0:e.featureViewModels},()=>this._featureMenuViewportScrollTop()),be(()=>{var e;return[(e=this.flowItems)==null?void 0:e.length,this.featureMenuOpen]},()=>{this.setFocus()}),be(()=>this.referenceElement,(e,i)=>{this._destroySpinner(i),this._createSpinner()},{initial:!0}),be(()=>{var e,i,r,n;return[this.hideSpinner,(e=this.viewModel)==null?void 0:e.view,(i=this.viewModel)==null?void 0:i.location,(r=this.viewModel)==null?void 0:r.waitingForResult,(n=this.viewModel)==null?void 0:n.view]},()=>void this._createSpinner(),{initial:!0})])}_handleClose(){this.close(),this.arcgisClose.emit()}_groupResultsByLayer(){const{featureViewModels:e}=this.viewModel,i=new Map;return e.forEach(r=>{const n=r==null?void 0:r.graphic;if(!n)return;const s=dA(n),a=fwt(s)?s:null,o=i.get(a)??[];i.set(a,[...o,r])}),i}_handleCollapseToggle(){this.collapsed=!this.collapsed}async _openRelatedFeature(e){this._cancelOpenRelatedFeature();const i=new AbortController;this._openRelatedFeatureAbortController=i,await e.updateGeometry();const r=e.graphic,n=r==null?void 0:r.geometry;if(n==null||r==null)return;this._removeFlowItems(),await this.viewModel.zoomTo({target:n});const s=pwt(n);s!=null&&(this.location=s),this.features=[r],this.visible=!0,await this.setFocus(),this._openRelatedFeatureAbortController===i&&(this._openRelatedFeatureAbortController=null)}_handlePaginationMenuButton(){this._updateFeatureMenu()}_openFeatureMenu(){this._updateFeatureMenu(!0)}_closeFeatureMenu(){this._updateFeatureMenu(!1)}_updateFeatureMenu(e=!this.featureMenuOpen){this.featureMenuOpen=e}_previousFeature(){this.viewModel.previous()}_nextFeature(){this.viewModel.next()}_handleFeatureBack(){this.initialDisplayMode==="list"?(this.selectedFeatureIndex=-1,this.setFocus()):this._openFeatureMenu()}_handleFeatureMenuBack(){this.initialDisplayMode==="list"?(this.selectedFeatureIndex=-1,this.setFocus()):this.featureMenuOpen&&this._closeFeatureMenu()}_setActiveFeature(e){var r;const{viewModel:i}=this;i.activeFeature=((r=i.features)==null?void 0:r[e])||null}_removeActiveFeature(){this.viewModel.activeFeature=null}_selectFeature(e){this.viewModel.selectedFeatureIndex=e,this.initialDisplayMode==="feature"?this._handleFeatureMenuBack():this.setFocus()}_unobserveFeatureMenuObserver(){this._featureMenuIntersectionObserverNode&&this._featureMenuIntersectionObserver.unobserve(this._featureMenuIntersectionObserverNode)}_featureMenuIntersectionObserverCreated(e){this._unobserveFeatureMenuObserver(),e&&this._featureMenuIntersectionObserver.observe(e),this._featureMenuIntersectionObserverNode=e}_getActionTitle(e){const{messages:i,selectedFeature:r}=this,{id:n}=e,s=r==null?void 0:r.attributes,a=e.title??"",o=n==="zoom-to-feature"?Sr(a,{messages:i}):n==="remove-selected-feature"?Sr(a,{messages:i}):n==="zoom-to-clustered-features"?Sr(a,{messages:i}):n==="browse-clustered-features"?Sr(a,{messages:i}):e.title;return o&&s?Sr(o,s):o??""}_onMainKeydown(e){const{key:i}=e;i==="ArrowLeft"&&(e.stopPropagation(),this._handleFeatureMenuBack(),this.previous(),this.setFocus()),i==="ArrowRight"&&(e.stopPropagation(),this._handleFeatureMenuBack(),this.next(),this.setFocus())}_featureMenuViewportScrollTop(){var e;this._featureMenuViewportNode&&((e=this._featureMenuViewportNode.value)==null||e.scrollContentTo({top:0}))}_selectedFeatureIndexUpdated(e,i){var s;const{featureCount:r,waitingForResult:n}=this.viewModel;n||!r||e===i||e===-1||(this._removeFlowItems(),(s=this._rootFlowItemNode.value)==null||s.scrollContentTo({top:0}))}_triggerAction(e){this.triggerAction(e),this.arcgisTriggerAction.emit({action:e})}_viewChange(){this.viewModel.clear(),this.viewModel.visible=!1}_closeOpenActionMenu(){const{_actionBarMenuNode:e}=this;e.value&&(e.value.menuOpen=!1)}_removeFlowItems(){this.flowItems.removeAll()}_getDrillInFlowItemDescription(e){switch(e.flowType){case"feature":case"feature-association":case"feature-utility-network-associations":return"";case"feature-relationship":return e.allItemsDescription;case"feature-utility-network-association-type":return""}}_handleDrillInBackClick(){var e;(e=this.flowItems)==null||e.pop()}_getHeading(){var n;const{hideHeading:e}=this,{title:i,selectedFeatureViewModel:r}=this.viewModel;return r&&!e?(r==null?void 0:r.state)==="error"?((n=this.messages)==null?void 0:n.errorMessage)??"":(r==null?void 0:r.title)||"":!e&&i?i:""}async _destroySpinner(e){var i,r,n;(n=(r=(i=e==null?void 0:e.manager)==null?void 0:i.component)==null?void 0:r.extraContent)==null||n.remove(this._spinnerEl)}async _createSpinner(){var i,r,n,s,a,o;const e=this.referenceElement;e&&(await this._destroySpinner(e),this._spinnerEl=Hw(q`<arcgis-spinner .label=${this.messages.loading??""} .trackLocation=${!this.hideSpinner&&((i=this.viewModel)==null?void 0:i.waitingForResult)} .location=${((r=this.viewModel)==null?void 0:r.location)??void 0} .view=${((n=this.viewModel)==null?void 0:n.view)??void 0}></arcgis-spinner>`),(o=(a=(s=e.manager)==null?void 0:s.component)==null?void 0:a.extraContent)==null||o.add(this._spinnerEl))}render(){return q`<div class=${H(Ta.base)} @keydown=${this._onMainKeydown}>${this._renderHeader()}${this._renderContentContainer()}</div>`}_renderFeatureNavigation(){return[this._renderPagination(),this.initialDisplayMode==="list"?this._renderFeaturePaginationText():this._renderFeatureMenuButton()]}_renderHeader(){return this.featureNavigationTop&&this._featureNavigationVisible?q`<div class=${H(Ta.header)}>${this._renderFeatureNavigation()}</div>`:null}_renderFooter(){return!this.featureNavigationTop&&this._featureNavigationVisible?q`<div class=${H(Ta.footer)} slot=footer>${this._renderFeatureNavigation()}</div>`:null}_renderFeaturePaginationText(){const{messages:e,viewModel:i}=this,{featureCount:r,selectedFeatureIndex:n}=i;return q`<div class=${H(Ta.paginationText)}>${Sr(e.pageText??"",{index:or(n+1),total:or(r)})}</div>`}_renderFeatureMenuButton(){const{messages:e,viewModel:i}=this,{featureCount:r,selectedFeatureIndex:n,pendingPromisesCount:s}=i;return q`<calcite-action appearance=solid class=${H(Ta.paginationMenuButton)} icon=list .label=${e.selectFeature} .loading=${s>0} @click=${this._handlePaginationMenuButton} scale=s .text=${Sr(e.pageText??"",{index:or(n+1),total:or(r)})} text-enabled title=${e.selectFeature??Pe}></calcite-action>`}_renderPagination(){const{previous:e,next:i}=this.messages;return q`<calcite-action-bar class=${H(Ta.paginationActionBar)} expand-disabled layout=horizontal overflow-actions-disabled scale=s><calcite-action-group scale=s><calcite-action appearance=solid class=${H(Ta.paginationPrevious)} icon=chevron-left icon-flip-rtl .label=${e??""} @click=${this._previousFeature} scale=s .text=${e??""} title=${e??""??Pe}></calcite-action><calcite-action appearance=solid icon=chevron-right icon-flip-rtl .label=${i??""} @click=${this._nextFeature} scale=s .text=${i??""} title=${i??""??Pe}></calcite-action></calcite-action-group></calcite-action-bar>`}_renderFeatureMenuItem(e){const{initialDisplayMode:i}=this,{selectedFeatureViewModel:r,featureViewModels:n}=this.viewModel,s=e===r,a=n.indexOf(e);return q`<calcite-list-item @blur=${this._removeActiveFeature} @focus=${()=>this._setActiveFeature(a)} @mouseleave=${this._removeActiveFeature} @mouseover=${()=>this._setActiveFeature(a)} .selected=${s} @calciteListItemSelect=${()=>this._selectFeature(a)}><span .innerHTML=${(tg.sanitize(e.title)||this.messages.untitled)??""} slot=content></span>${i==="list"?q`<calcite-icon flip-rtl icon=chevron-right scale=s slot=content-end></calcite-icon>`:null}</calcite-list-item>`}_renderFeatureMenu(){const{messages:e,viewModel:i}=this,r=this._groupResultsByLayer(),n=this.initialDisplayMode==="list"?"none":"single";return i.featureViewModels.length?q`<calcite-list display-mode=flat .label=${(e==null?void 0:e.featuresList)??""} selection-appearance=icon .selectionMode=${n}>${Array.from(r.keys(),s=>{var l;const a=(l=r.get(s))==null?void 0:l.map(c=>this._renderFeatureMenuItem(c)),o=s?s.title??this.messages.untitled:null;return!this.hideFeatureListLayerTitle&&o!==null?nt(s??"map-graphics",q`<calcite-list-item-group .heading=${o}>${a}</calcite-list-item-group>`):a})}</calcite-list>`:null}_renderHeaderAction(e){const i=e.title||"";return e.visible?q`<calcite-action .active=${e.type==="toggle"?e.value:!1} appearance=solid .disabled=${e.disabled} .icon=${e.icon??void 0} .indicator=${e.active} .loading=${e.active} @click=${()=>this._triggerAction(e)} slot=header-actions-end .text=${i} title=${i??Pe}></calcite-action>`:null}_renderHeaderActions(){return this.headerActions.map(e=>this._renderHeaderAction(e)).toArray()}_renderContentFeature(){const{headingLevel:e,hideCloseButton:i,_isCollapsed:r,_collapseEnabled:n,featureNavigationTop:s,flowItems:a,initialDisplayMode:o,selectedFeature:l,featureMenuOpen:c}=this,{active:h}=this.viewModel,m=this._getHeading();if(o==="list"&&!l)return null;const g=a.length===0&&(o==="list"?!!l:!c);return q`<calcite-flow-item class=${H(ar({[Ta.contentFeature]:!0,[Ta.flowItemCollapsed]:r}))} .closable=${!i} .closed=${!h} .collapsed=${r} .collapseDirection=${s?"down":"up"} .collapsible=${n} .headingLevel=${e} .selected=${g} @calciteFlowItemBack=${this._handleFeatureBack} .loading=${!!this._openRelatedFeatureAbortController} @calciteFlowItemClose=${this._handleClose} @calciteFlowItemToggle=${this._handleCollapseToggle} .heading=${Rd(m)} ${gt(this._rootFlowItemNode)}>${this._renderHeaderActions()}${this._renderActionBar()}<div class=${H(ar(Ta.container,Ta.contentContainer))}>${this._renderContent()}</div>${this._renderFooter()}</calcite-flow-item>`}_renderFeatureMenuContainer(){const{viewModel:e,hideCloseButton:i,featureMenuTitle:r,messages:n,initialDisplayMode:s,featureMenuOpen:a,selectedFeature:o,_collapseEnabled:l,_isCollapsed:c,featureNavigationTop:h,headingLevel:m}=this,{active:g,featureViewModels:v,pendingPromisesCount:b}=e,x=r??n.selectFeature;if(s==="feature"&&!a)return null;const $=s==="list"?!o:a;return q`<calcite-flow-item class=${H(ar({[Ta.flowItemCollapsed]:c}))} .closable=${s==="list"&&!i} .closed=${!g} .collapsed=${s==="list"&&c} .collapseDirection=${h?"down":"up"} .collapsible=${s==="list"&&l} .description=${this.hideFeatureMenuHeading?void 0:Sr(n.total??"",{total:v.length})} .heading=${this.hideFeatureMenuHeading?void 0:x} .headingLevel=${m} .loading=${e.waitingForContents} .selected=${$} @calciteFlowItemBack=${M=>{M.preventDefault(),this._handleFeatureMenuBack()}} @calciteFlowItemClose=${this._handleClose} @calciteFlowItemToggle=${this._handleCollapseToggle} ${gt(this._featureMenuViewportNode)}>${s==="list"?this._renderHeaderActions():null}${b>0?q`<calcite-loader class=${H(Ta.loader)} inline .label=${n.loading??""} slot=header-actions-end></calcite-loader>`:null}<div class=${H(Ta.container)}>${this._renderFeatureMenu()}</div><div class=${H(Ta.featureMenuObserver)} ${gt(this._featureMenuIntersectionObserverCreated)}></div>${s==="feature"?q`<calcite-button appearance=transparent @click=${this._handleFeatureMenuBack} slot=footer-actions width=full>${n.back}</calcite-button>`:null}</calcite-flow-item>`}_renderFlowItem(e,i){const{messages:r,hideCloseButton:n,active:s}=this,a="graphic"in e&&"isFeatureFromTable"in e&&!e.isFeatureFromTable,o=e.flowType==="feature-association",l=r.returnToInitialFeature??"",c=r==null?void 0:r.selectFeature,h=this._getActionTitle(k3);return q`<calcite-flow-item .closable=${!n} .closed=${!s} .description=${Rd(this._getDrillInFlowItemDescription(e)??"")} .heading=${this.hideHeading?void 0:Rd(e.heading??"")} .selected=${i} @calciteFlowItemBack=${m=>{m.preventDefault(),this._handleDrillInBackClick()}} .loading=${!!this._openRelatedFeatureAbortController} @calciteFlowItemClose=${this._handleClose}><calcite-action appearance=transparent class=${H(Ta.actionExit)} icon=move-up @click=${this._removeFlowItems} slot=header-actions-start .text=${l??""} title=${l??""??Pe}></calcite-action>${a?q`<calcite-action appearance=transparent icon=zoom-to-object @click=${()=>this._openRelatedFeature(e)} slot=header-actions-end .text=${c??""} title=${c??Pe}></calcite-action>`:null}${o?q`<calcite-action-bar expand-disabled expanded scale=s slot=action-bar><calcite-action-group overlay-positioning=fixed scale=s><calcite-action appearance=solid .disabled=${k3.disabled} .icon=${k3.icon??void 0} .loading=${k3.active} scale=s text-enabled .text=${h} title=${h??Pe} @click=${()=>SMe(this.viewModel,e)}></calcite-action></calcite-action-group></calcite-action-bar>`:null}<div class=${H(Ta.container)}>${e}</div></calcite-flow-item>`}_renderContentContainer(){var n;const e=(n=this.flowItems)==null?void 0:n.toArray(),i=e==null?void 0:e.map((s,a)=>this._renderFlowItem(s,this.initialDisplayMode==="list"||!this.featureMenuOpen&&a===e.length-1)),r=this.initialDisplayMode==="list"?[this._renderFeatureMenuContainer(),this._renderContentFeature(),i]:[this._renderContentFeature(),i,this._renderFeatureMenuContainer()];return this.hideFlow?r:q`<calcite-flow ${gt(this._flowContainerNode)}>${r}</calcite-flow>`}_renderActionBar(){var e;return!this._isCollapsed&&!this.hideActionBar&&((e=this.viewModel.allActions)!=null&&e.length)?q`<calcite-action-bar expand-disabled .expanded=${!this._hideActionText} scale=s slot=action-bar><calcite-action-group overlay-positioning=fixed scale=s ${gt(this._actionBarMenuNode)}>${this._renderActions()}</calcite-action-group></calcite-action-bar>`:null}_renderActions(){return this.viewModel.allActions.toArray().map(e=>{const i=this._getActionTitle(e);return q`<calcite-action .active=${e.type==="toggle"?e.value:!1} appearance=solid .disabled=${e.disabled} .icon=${e.icon??void 0} .loading=${e.active} scale=s .textEnabled=${!this._hideActionText} .text=${i??""} title=${i??Pe} .hidden=${!e.visible} @click=${()=>this._triggerAction(e)}></calcite-action>`})}_renderContent(){const{content:e,selectedFeatureViewModel:i}=this.viewModel;return i?nt(i,q`<arcgis-feature .defaultPopupTemplateEnabled=${this.defaultPopupTemplateEnabled} .flowItems=${this.flowItems} .location=${this.location} .graphic=${i.graphic} .headingLevel=${this.headingLevel+1} hide-heading .map=${this.map} .referenceElement=${this.referenceElement} show-relationship-content show-utility-network-content .spatialReference=${this.spatialReference} .timeZone=${this.timeZone} ${gt(this._selectedFeatureComponent)}></arcgis-feature>`):typeof e=="string"?nt(e,q`<div .innerHTML=${tg.sanitize(e)??""}></div>`):e??null}};KN.properties={_openRelatedFeatureAbortController:16,flowItems:16,_hideActionText:16,_featureNavigationVisible:16,_isCollapsed:16,_collapseEnabled:16,viewModel:0,actions:0,active:0,autoDestroyDisabled:5,collapsed:5,content:1,defaultPopupTemplateEnabled:5,featureCount:0,featureMenuOpen:5,featureMenuTitle:1,featureNavigationTop:5,features:0,featuresPerPage:9,featureViewModelAbilities:0,goToOverride:0,headerActions:0,heading:1,featuresTitle:1,headingLevel:9,hideActionBar:5,hideCloseButton:5,hideFeatureMenuHeading:5,hideFeatureNavigation:5,hideFeatureListLayerTitle:5,hideFlow:5,hideHeading:5,hideSpinner:5,highlightDisabled:5,icon:1,includeDefaultActionsDisabled:5,initialDisplayMode:1,label:1,location:0,map:0,messageOverrides:0,position:1,referenceElement:1,promises:0,responsiveActionsEnabled:5,selectedDrillInFeature:32,selectedFeature:0,selectedFeatureComponent:32,selectedFeatureIndex:9,showCollapseButton:5,spatialReference:0,state:3,timeZone:1,updateLocationEnabled:5,view:0,visible:5,closed:5},KN.styles=hwt;let aW=KN;yr("arcgis-features",aW);function gwt(){const t=Not;return t.popupTemplate=NSe({level:"country",year:2024}),pe.jsx(pe.Fragment,{children:pe.jsx("calcite-block",{heading:"Election results",collapsible:!0,children:pe.jsx("arcgis-features",{features:[t],hideActionBar:!0,hideCloseButton:!0,hideFeatureMenuHeading:!0,hideFeatureNavigation:!0,hideHeading:!0,visible:!0})})})}const OB={winner:"Winner","winner-lean":"Winner with lean",swing:"Swing",change:"Change - all parties",trend:"Trend"};function ywt(t){const{onYearInput:e,onRendererTypeChange:i}=t,[r,n]=Td.useState("winner"),[s,a]=Td.useState(OB[r]);return pe.jsx(pe.Fragment,{children:pe.jsxs("calcite-shell-panel",{slot:"panel-start",displayMode:"dock",widthScale:"m",children:[pe.jsx("calcite-action-bar",{slot:"action-bar",children:pe.jsx("calcite-action",{"data-action-id":"information",icon:"information",text:"Information"})}),pe.jsxs("calcite-panel",{id:"tools",scale:"m",heading:s,"data-panel-id":"information",children:[pe.jsx("calcite-label",{layout:"inline",children:"Select a variable"}),pe.jsx("div",{className:"slider-container",children:pe.jsx("calcite-select",{label:"",oncalciteSelectChange:async o=>{const l=o.target.value;n(l),i(l),a(OB[l])},children:Object.entries(OB).map(([o,l])=>pe.jsx("calcite-option",{label:l,value:o,selected:o===r},o))})}),pe.jsx(Fyt,{rendererType:r,onYearInput:e}),pe.jsx(gwt,{})]})]})})}Ti.applicationName="U.S. Presidential Election Results (2000-2024)";const vwt={winner:"Winner","winner-lean":"Winner - with lean",swing:"Swing",change:"Change - all parties",trend:"Trend"};function bwt(){const t=Td.useRef(null),e=Td.useRef(null),i=Td.useRef(null),r=new oF({portalItem:{id:Oot}}),n=new oF({portalItem:{id:Lot}}),s=new oF({portalItem:{id:Fot}}),a=async({year:c,mapElement:h})=>{if(!h)return;await h.map.load();let m,g;Array.isArray(c)?(m=Math.min(...c),g=Math.max(...c)):m=g=c,h.timeExtent=new Ji({start:new Date(m,0,1),end:new Date(g,0,1)});const v=h.map.allLayers.find(x=>x.title==="Change - all parties");if(v&&!Array.isArray(c)){const x=rce({level:"county",year:c}),$=rce({level:"state",year:c}),M=v.layers.find(ie=>ie.title==="Counties");M.renderer=x.renderer,M.popupTemplate=x.popupTemplate,M.labelingInfo=x.labelingInfo;const k=v.layers.find(ie=>ie.title==="States");k.renderer=$.renderer,k.popupTemplate=$.popupTemplate,k.labelingInfo=$.labelingInfo;const A=h.map.allLayers.find(ie=>ie.title==="Winner"),L=A.layers.find(ie=>ie.title==="States"),z=A.layers.find(ie=>ie.title==="Counties");z.popupTemplate=x.popupTemplate,L.popupTemplate=$.popupTemplate;const U=h.map.allLayers.find(ie=>ie.title==="Winner - with lean"),B=U.layers.find(ie=>ie.title==="States"),X=U.layers.find(ie=>ie.title==="Counties");X.popupTemplate=x.popupTemplate,B.popupTemplate=$.popupTemplate;const J=h.map.allLayers.find(ie=>ie.title==="Swing"),Q=J.layers.find(ie=>ie.title==="States"),le=J.layers.find(ie=>ie.title==="Counties");le.popupTemplate=x.popupTemplate,Q.popupTemplate=$.popupTemplate}const b=h.map.allLayers.find(x=>x.title==="Trend");if(b){const x=nce({level:"county",year:c}),$=nce({level:"state",year:c}),M=b.layers.find(A=>A.title==="Counties");M.renderer=x.renderer,M.popupTemplate=x.popupTemplate;const k=b.layers.find(A=>A.title==="States");k.renderer=$.renderer,k.popupTemplate=$.popupTemplate}};let o;const l=async c=>{var m,g;if(!c)return;await c.map.load(),await a({year:2024,mapElement:c}),o=c==null?void 0:c.view,o.constraints={snapToZoom:!1},c.id==="map"&&o.watch("scale",()=>{!e.current||!i.current||(o.scale<5710191?(e.current.hidden=!0,i.current.hidden=!0):(e.current.hidden=!1,i.current.hidden=!1))}),o.popup=new kSe,o.popup.dockEnabled=!0,o.popup.dockOptions={buttonEnabled:!1,breakpoint:!1,position:"top-right"},((g=(m=c==null?void 0:c.map)==null?void 0:m.portalItem)==null?void 0:g.title)==="U.S. Presidential Election Trends"&&(c.padding={left:468},c.style.setProperty("--arcgis-layout-overlay-space-left","468px")),o.when(()=>{let v=null;const b=({target:M})=>{var L,z,U,B;if(!document||M.tagName!=="CALCITE-ACTION")return;const k=document.querySelector("calcite-shell-panel");v&&(document.querySelector(`[data-action-id=${v}]`).active=!1,document.querySelector(`[data-panel-id=${v}]`).closed=!0);const A=M.dataset.actionId;A!==v?(k.collapsed=!1,((z=(L=c==null?void 0:c.map)==null?void 0:L.portalItem)==null?void 0:z.title)==="U.S. Presidential Election Trends"&&(x?(c.padding={left:554},c.style.setProperty("--arcgis-layout-overlay-space-left","554px")):(c.padding={left:468},c.style.setProperty("--arcgis-layout-overlay-space-left","468px"))),document.querySelector(`[data-action-id=${A}]`).active=!0,document.querySelector(`[data-panel-id=${A}]`).closed=!1,v=A,document.querySelector(`[data-panel-id=${A}]`).setFocus()):(v=null,k.collapsed=!0,((B=(U=c==null?void 0:c.map)==null?void 0:U.portalItem)==null?void 0:B.title)==="U.S. Presidential Election Trends"&&(x?(c.padding={left:135},c.style.setProperty("--arcgis-layout-overlay-space-left","135px")):(c.padding={left:49},c.style.setProperty("--arcgis-layout-overlay-space-left","49px"))))};let x=!1;const $=document.querySelectorAll("calcite-panel");for(let M=0;M<$.length;M++)$[M].addEventListener("calcitePanelClose",()=>{const k=document.querySelector("calcite-shell-panel");k.collapsed=!0,document.querySelector(`[data-action-id=${v}]`).active=!1,document.querySelector(`[data-action-id=${v}]`).setFocus(),v=null});document.querySelector("calcite-action-bar").addEventListener("click",b),document.addEventListener("calciteActionBarToggle",()=>{var M,k;x=!x,((k=(M=c==null?void 0:c.map)==null?void 0:M.portalItem)==null?void 0:k.title)==="U.S. Presidential Election Trends"&&(x?(c.padding={left:135},c.style.setProperty("--arcgis-layout-overlay-space-left","135px")):(c.padding={left:49},c.style.setProperty("--arcgis-layout-overlay-space-left","49px")))})})};return pe.jsx(pe.Fragment,{children:pe.jsxs("calcite-shell",{contentBehind:!0,children:[pe.jsx("h2",{id:"header-title",slot:"header",children:Pot}),pe.jsx(ywt,{onYearInput:c=>{a({year:c,mapElement:t.current}),a({year:c,mapElement:e.current}),a({year:c,mapElement:i.current})},onRendererTypeChange:c=>{[t.current,e.current,i.current].forEach(m=>{if(!m)return;const g=m.map.layers.find(v=>v.title==="Election Visualizations").layers.find(v=>v.title===vwt[c]);g.visible=!0})}}),pe.jsxs("arcgis-map",{id:"map",map:r,ref:t,onarcgisViewReadyChange:()=>{l(t.current)},children:[pe.jsx("arcgis-map",{id:"ak-view",className:"inset-views",map:n,ref:e,scale:38e6,center:tce.center,popupDisabled:!0,onarcgisViewReadyChange:()=>{l(e.current)},onBlur:()=>{const c=e.current;c&&c.goTo({center:tce.center,scale:38e6},{animate:!0,duration:1e3,easing:"ease-in"}).catch(h=>{console.error("Error going to AK center:",h)})},slot:"bottom-left"}),pe.jsx("arcgis-map",{id:"hi-view",className:"inset-views",map:s,ref:i,scale:10833054,center:ice.center,popupDisabled:!0,onarcgisViewReadyChange:()=>{l(i.current)},onBlur:()=>{const c=i.current;c&&c.goTo({center:ice.center,scale:10833054},{animate:!0,duration:1e3,easing:"ease-in"}).catch(h=>{console.error("Error going to HI center:",h)})},slot:"bottom-left"})]})]})})}i2e.createRoot(document.getElementById("root")).render(pe.jsx(Td.StrictMode,{children:pe.jsx(bwt,{})}));export{ux as $,AT as A,Yt as B,Ge as C,CY as D,VY as E,p9e as F,f9e as G,mi as H,Cn as I,oc as J,Hoe as K,Ott as L,qe as M,Wxe as N,M$t as O,VO as P,Kyt as Q,evt as R,m$ as S,XOe as T,Qyt as U,VIe as V,Hfe as W,aZ as X,J3e as Y,h2 as Z,de as _,Cs as a,DT as a$,Jat as a0,Di as a1,lu as a2,St as a3,Nr as a4,_n as a5,oVe as a6,tw as a7,El as a8,ZT as a9,Ro as aA,xMt as aB,UHe as aC,lmt as aD,KTe as aE,wE as aF,Ap as aG,Un as aH,La as aI,z$ as aJ,Rne as aK,XSt as aL,vme as aM,bSt as aN,Lnt as aO,Rnt as aP,Ik as aQ,bv as aR,Yw as aS,_E as aT,Dr as aU,_u as aV,PW as aW,Fl as aX,Hi as aY,ET as aZ,uo as a_,g_t as aa,lr as ab,Gm as ac,C$t as ad,Ev as ae,Efe as af,jC as ag,Aa as ah,je as ai,pu as aj,Att as ak,Zse as al,Ab as am,Pb as an,Ie as ao,Zhe as ap,Jhe as aq,Xhe as ar,ve as as,Dwt as at,Lwt as au,$nt as av,p_t as aw,XMt as ax,lCt as ay,OE as az,jY as b,TW as b$,Ni as b0,Vxt as b1,Dxt as b2,jxt as b3,Dp as b4,ape as b5,Bo as b6,hE as b7,uO as b8,SZ as b9,C$e as bA,fPt as bB,iI as bC,o3t as bD,l3t as bE,Urt as bF,Apt as bG,$Be as bH,T$t as bI,k$t as bJ,E$t as bK,Np as bL,Bh as bM,Rt as bN,Ti as bO,ln as bP,LCt as bQ,lD as bR,Lte as bS,w_ as bT,Od as bU,WXe as bV,pYe as bW,u2t as bX,jt as bY,Ji as bZ,dR as b_,iwe as ba,ls as bb,U0 as bc,IRe as bd,axt as be,oxt as bf,qV as bg,ED as bh,_Z as bi,xZ as bj,zme as bk,Rme as bl,hRe as bm,wm as bn,M8 as bo,X1t as bp,Vo as bq,$Z as br,lx as bs,$_t as bt,Ywe as bu,Vrt as bv,zE as bw,Se as bx,aSe as by,j2 as bz,QWe as c,Gqe as c$,Ck as c0,qn as c1,F$t as c2,Q2t as c3,mt as c4,bU as c5,Zqe as c6,nQe as c7,T5 as c8,E5e as c9,tSt as cA,t_ as cB,JKe as cC,qo as cD,OKe as cE,zwe as cF,qKe as cG,Lqe as cH,i7e as cI,r7 as cJ,Rxe as cK,jKe as cL,zxe as cM,Fxe as cN,XKe as cO,HKe as cP,AKe as cQ,LKe as cR,m_ as cS,ID as cT,wqe as cU,tfe as cV,RT as cW,qVe as cX,e5e as cY,t5e as cZ,i5e as c_,jd as ca,nL as cb,A1t as cc,y1t as cd,sr as ce,jp as cf,tXe as cg,iXe as ch,rXe as ci,he as cj,bt as ck,Uv as cl,QDe as cm,GT as cn,JDe as co,bY as cp,HVe as cq,Xve as cr,s6e as cs,d2t as ct,Ue as cu,swe as cv,z4e as cw,Lve as cx,Xw as cy,Y2t as cz,GD as d,Mp as d$,qBe as d0,fDe as d1,pt as d2,jT as d3,tu as d4,HBe as d5,Wn as d6,$tt as d7,ikt as d8,Ol as d9,U0e as dA,X$t as dB,XD as dC,Y6e as dD,cn as dE,$W as dF,i1t as dG,$u as dH,ax as dI,Sn as dJ,Jfe as dK,V3 as dL,q3e as dM,Fs as dN,It as dO,e_e as dP,c7 as dQ,nGe as dR,j3 as dS,Bk as dT,rq as dU,mxt as dV,OSt as dW,KSt as dX,zn as dY,Tet as dZ,lg as d_,EZ as da,uY as db,Zit as dc,Vd as dd,iLe as de,a3t as df,REt as dg,d9 as dh,FEt as di,M2 as dj,xHe as dk,GIt as dl,si as dm,ZIt as dn,Ii as dp,In as dq,JT as dr,qte as ds,__ as dt,qD as du,VT as dv,aw as dw,Or as dx,gPt as dy,ca as dz,_1t as e,tFe as e$,Fye as e0,Ft as e1,Id as e2,Ka as e3,Es as e4,$pe as e5,GB as e6,EHe as e7,Hhe as e8,BYe as e9,sLe as eA,cZ as eB,uZ as eC,nLe as eD,wD as eE,_D as eF,N4e as eG,y3e as eH,m1t as eI,tKe as eJ,Qwt as eK,v_t as eL,Gp as eM,jSt as eN,tTt as eO,sxe as eP,So as eQ,ZDe as eR,Mv as eS,gxe as eT,mxe as eU,$p as eV,uZe as eW,ptt as eX,f9 as eY,cge as eZ,JSt as e_,Zet as ea,Kr as eb,Qf as ec,W8 as ed,qW as ee,et as ef,r_t as eg,Zm as eh,co as ei,la as ej,i_t as ek,F1t as el,DD as em,sg as en,kwe as eo,Ewe as ep,mPe as eq,yPe as er,Xyt as es,jk as et,SE as eu,Rwe as ev,xqe as ew,Owe as ex,ua as ey,Fwe as ez,tt as f,Oo as f$,Z_t as f0,Khe as f1,Qhe as f2,Bve as f3,ime as f4,$Y as f5,cUe as f6,eSt as f7,Vp as f8,g_ as f9,Jqe as fA,Q_t as fB,cD as fC,uD as fD,vpe as fE,I1t as fF,Jyt as fG,T1t as fH,sz as fI,vYe as fJ,Fet as fK,jet as fL,p5 as fM,qYe as fN,yYe as fO,mJe as fP,yJe as fQ,Mqe as fR,Cqe as fS,Xqe as fT,Po as fU,Wet as fV,bJe as fW,gJe as fX,xn as fY,Bn as fZ,tn as f_,QD as fa,wUe as fb,rSt as fc,bc as fd,iSt as fe,kbe as ff,KD as fg,e1t as fh,xD as fi,Vv as fj,Rqe as fk,P6e as fl,Ic as fm,cOe as fn,U_t as fo,Sfe as fp,Ip as fq,KW as fr,b1t as fs,HRe as ft,aet as fu,qv as fv,jqe as fw,RVe as fx,_qe as fy,Lwe as fz,$e as g,mEt as g$,no as g0,Wm as g1,Nd as g2,b$t as g3,dVe as g4,dE as g5,Om as g6,Qw as g7,Pl as g8,Xet as g9,KS as gA,Fie as gB,sxt as gC,fxt as gD,Dit as gE,afe as gF,E5 as gG,mD as gH,wFe as gI,X8e as gJ,Hkt as gK,Gye as gL,EY as gM,a2t as gN,Hqe as gO,gbe as gP,V$t as gQ,dEt as gR,Vk as gS,Rs as gT,U$t as gU,pEt as gV,Est as gW,eF as gX,EAt as gY,j$t as gZ,vm as g_,eu as ga,CPt as gb,s2t as gc,ZS as gd,nme as ge,HD as gf,htt as gg,SR as gh,ei as gi,Oa as gj,pE as gk,_i as gl,Z2t as gm,j$e as gn,h1t as go,h3e as gp,vl as gq,q7 as gr,Vm as gs,hAe as gt,gE as gu,Tn as gv,Tme as gw,zs as gx,Qi as gy,yxt as gz,ot as h,eLe as h$,DAt as h0,ng as h1,Ov as h2,L6e as h3,Dm as h4,OW as h5,ow as h6,OAe as h7,WB as h8,wAt as h9,Fz as hA,hie as hB,nJe as hC,ki as hD,FT as hE,MT as hF,Ns as hG,zrt as hH,rv as hI,p2t as hJ,O1t as hK,No as hL,Vqe as hM,N1t as hN,ZFe as hO,t1t as hP,zFe as hQ,Cie as hR,eme as hS,tme as hT,Mn as hU,K_t as hV,EVe as hW,Jve as hX,tBe as hY,Pqe as hZ,Qve as h_,xLe as ha,uLe as hb,dme as hc,l8 as hd,x9e as he,Hr as hf,gMt as hg,B3 as hh,X8 as hi,f$ as hj,$D as hk,gxt as hl,f_ as hm,AJ as hn,kJ as ho,_nt as hp,ZSt as hq,RSt as hr,B1t as hs,TAt as ht,SAt as hu,Ltt as hv,l6 as hw,l2t as hx,JLe as hy,h_ as hz,XWe as i,H as i$,s5e as i0,LVe as i1,n5e as i2,JD as i3,qye as i4,Owt as i5,z3 as i6,Knt as i7,qwt as i8,Uqe as i9,Ho as iA,JS as iB,MSt as iC,ISt as iD,iBe as iE,ige as iF,nr as iG,tst as iH,bFe as iI,h9 as iJ,bot as iK,MPt as iL,iY as iM,yE as iN,XS as iO,wk as iP,dt as iQ,aut as iR,Gn as iS,vi as iT,un as iU,dn as iV,Re as iW,IT as iX,oEe as iY,g1 as iZ,Wce as i_,Aqe as ia,WKe as ib,T_ as ic,h0e as id,LSt as ie,cY as ig,L5e as ih,V_t as ii,tQe as ij,v3e as ik,rZ as il,iQe as im,oet as io,ig as ip,M6e as iq,T6e as ir,$6e as is,oL as it,Go as iu,eve as iv,sge as iw,a3e as ix,zp as iy,Ld as iz,kT as j,f_t as j$,gt as j0,nt as j1,Gr as j2,q as j3,mG as j4,ct as j5,ci as j6,gEt as j7,JHe as j8,qMt as j9,BWe as jA,qIe as jB,Fa as jC,ZW as jD,Ofe as jE,V1t as jF,Wye as jG,Vn as jH,Pme as jI,DFe as jJ,R$ as jK,P_t as jL,hwe as jM,bZ as jN,G as jO,_Le as jP,lLe as jQ,kp as jR,u9e as jS,IY as jT,CRe as jU,wxt as jV,WF as jW,M5 as jX,Ast as jY,Ost as jZ,T9 as j_,Kwe as ja,JMt as jb,HR as jc,ZMt as jd,A2 as je,YMt as jf,lge as jg,p_ as jh,xt as ji,dd as jj,AL as jk,jMt as jl,ZTt as jm,Ame as jn,vE as jo,C8 as jp,l_ as jq,jFe as jr,Lme as js,Fy as jt,O_t as ju,NT as jv,EE as jw,uYe as jx,aa as jy,D_t as jz,Ot as k,MW as k$,YAe as k0,oRe as k1,KDe as k2,XDe as k3,Tqe as k4,t7e as k5,r7e as k6,GFe as k7,Uye as k8,tLe as k9,Gwt as kA,Wwt as kB,Hwt as kC,KOe as kD,rg as kE,BD as kF,cMt as kG,lMt as kH,oMt as kI,aMt as kJ,dMt as kK,uMt as kL,sMt as kM,nMt as kN,IAt as kO,$At as kP,ost as kQ,gd as kR,aQe as kS,VFe as kT,JB as kU,rMt as kV,yZ as kW,qLe as kX,S$e as kY,vU as kZ,bOe as k_,Iqe as ka,Awe as kb,ESt as kc,CSt as kd,Ja as ke,TD as kf,S8 as kg,SD as kh,Et as ki,U1t as kj,J1t as kk,Rie as kl,EAe as km,Zye as kn,ut as ko,Ms as kp,w1t as kq,VD as kr,AOe as ks,nRe as kt,A2t as ku,t$t as kv,Jxt as kw,Bkt as kx,vot as ky,wh as kz,be as l,ue as l$,Zwt as l0,CW as l1,Ywt as l2,Zk as l3,F$ as l4,Z8e as l5,S3e as l6,QMt as l7,Uk as l8,yY as l9,wY as lA,FSt as lB,PSt as lC,qie as lD,Lh as lE,LE as lF,rJ as lG,UAt as lH,_Je as lI,wJe as lJ,vJe as lK,UAe as lL,S_t as lM,X2t as lN,J2t as lO,J1e as lP,Z1e as lQ,W9e as lR,Z9e as lS,V_e as lT,Ule as lU,Pwe as lV,O$t as lW,Y8e as lX,da as lY,pi as lZ,Iu as l_,Kw as la,yD as lb,Det as lc,eJe as ld,Oet as le,aJe as lf,Ket as lg,xne as lh,_be as li,ftt as lj,eQe as lk,xJe as ll,stt as lm,v5 as ln,joe as lo,Lt as lp,K7 as lq,y5 as lr,bet as ls,eA as lt,fJe as lu,zh as lv,b3e as lw,FPt as lx,PD as ly,Iv as lz,YWe as m,cCt as m$,Sr as m0,js as m1,or as m2,T$ as m3,PWe as m4,Ht as m5,DMt as m6,VLe as m7,ZLe as m8,Pk as m9,zr as mA,_c as mB,N1 as mC,pPt as mD,Io as mE,VXe as mF,HXe as mG,R1e as mH,$5 as mI,XR as mJ,pJe as mK,Lr as mL,JXe as mM,CXe as mN,EXe as mO,PXe as mP,OXe as mQ,qXe as mR,LXe as mS,FXe as mT,RXe as mU,zXe as mV,NXe as mW,DXe as mX,ia as mY,S1t as mZ,$k as m_,j1t as ma,Xje as mb,RW as mc,k_t as md,E_t as me,eVe as mf,_At as mg,rst as mh,ePe as mi,KAe as mj,W1t as mk,H1t as ml,oD as mm,A0 as mn,vPe as mo,od as mp,SQe as mq,rJe as mr,kXe as ms,W1e as mt,jXe as mu,mfe as mv,xfe as mw,$i as mx,LT as my,rs as mz,hZe as n,Pbe as n$,Gte as n0,Yle as n1,Hh as n2,S$t as n3,G3 as n4,tge as n5,Q1t as n6,Sxt as n7,Txt as n8,Ixt as n9,so as nA,O2t as nB,L2t as nC,P2t as nD,wX as nE,V$e as nF,Qm as nG,Km as nH,Rl as nI,Pv as nJ,Mnt as nK,Ki as nL,Bft as nM,Fnt as nN,pht as nO,sue as nP,Lv as nQ,y8e as nR,QGe as nS,S_e as nT,nAe as nU,p1t as nV,ffe as nW,gD as nX,v1t as nY,eFe as nZ,Abe as n_,dxt as na,cxt as nb,nxt as nc,LFe as nd,lxt as ne,uRe as nf,A_t as ng,bxt as nh,$xt as ni,TTt as nj,iw as nk,Wse as nl,kRe as nm,nge as nn,wnt as no,VOt as np,UOt as nq,qR as nr,jOt as ns,yme as nt,i3t as nu,jHe as nv,yMt as nw,vMt as nx,DHe as ny,t3t as nz,jCt as o,R2 as o$,s3t as o0,Xme as o1,xxt as o2,M6 as o3,Mk as o4,x1t as o5,K2t as o6,UYe as o7,QR as o8,MD as o9,EPt as oA,QOt as oB,q9e as oC,mMt as oD,j2t as oE,Xwt as oF,zVe as oG,KUe as oH,CVe as oI,kVe as oJ,YM as oK,Do as oL,lm as oM,qy as oN,_s as oO,IBe as oP,K9e as oQ,eMt as oR,YC as oS,Ad as oT,v2 as oU,BXe as oV,q$t as oW,QXe as oX,W2t as oY,Jye as oZ,G2t as o_,a1t as oa,s1t as ob,Nit as oc,Sme as od,xme as oe,pFe as of,mFe as og,wv as oh,gGe as oi,mPt as oj,vGe as ok,bGe as ol,Qpe as om,kAt as on,NAt as oo,Rh as op,PCt as oq,exe as or,DW as os,qd as ot,yx as ou,as as ov,WEt as ow,Jx as ox,Ret as oy,nc as oz,Ry as p,Xwe as p$,_v as p0,TE as p1,Jet as p2,Yhe as p3,eZ as p4,d1t as p5,Tfe as p6,rme as p7,mie as p8,Rfe as p9,Oqe as pA,UVe as pB,Vye as pC,aBe as pD,Mve as pE,I8 as pF,aPt as pG,ETt as pH,CTt as pI,J8e as pJ,eJ as pK,LJe as pL,Pst as pM,PPt as pN,$1t as pO,sY as pP,T1 as pQ,RAt as pR,VAt as pS,eAe as pT,jAt as pU,Cst as pV,a9 as pW,UMt as pX,UGe as pY,BMt as pZ,VMt as p_,BGe as pa,PAt as pb,AAt as pc,FAt as pd,OAt as pe,LAt as pf,zAt as pg,oEt as ph,v_ as pi,qh as pj,YQe as pk,r1t as pl,Ome as pm,J_t as pn,eY as po,SGe as pp,Lfe as pq,f1t as pr,y9 as ps,KZ as pt,Gt as pu,ASt as pv,kSt as pw,XW as px,GVe as py,BVe as pz,gs as q,u0e as q$,gmt as q0,Int as q1,kOt as q2,NY as q3,YOt as q4,vXe as q5,R2t as q6,qOt as q7,vX as q8,y3 as q9,kQe as qA,pKe as qB,xEt as qC,LMt as qD,yEt as qE,Pue as qF,Yft as qG,Ept as qH,kD as qI,gue as qJ,IMt as qK,GOt as qL,$oe as qM,Jwe as qN,cAt as qO,uAt as qP,V0 as qQ,sv as qR,lAt as qS,jZ as qT,y_t as qU,oAt as qV,aAt as qW,Uwt as qX,dwe as qY,_2t as qZ,_4e as q_,mIe as qa,HOt as qb,BOt as qc,zo as qd,ept as qe,WOt as qf,ZOt as qg,Ipt as qh,VPt as qi,UFe as qj,sPt as qk,I_ as ql,hat as qm,wM as qn,A$t as qo,e3t as qp,KOt as qq,XOt as qr,JOt as qs,LHe as qt,C_ as qu,oY as qv,aKe as qw,B$t as qx,wc as qy,cx as qz,HL as r,ra as r$,x2t as r0,dc as r1,fm as r2,tT as r3,VYe as r4,tJe as r5,iJe as r6,sJe as r7,Met as r8,Net as r9,Qr as rA,kJe as rB,EJe as rC,Ei as rD,Dy as rE,nnt as rF,ZJe as rG,snt as rH,O1e as rI,bd as rJ,hm as rK,Sd as rL,ITt as rM,B6 as rN,_$t as rO,yR as rP,xc as rQ,Yqe as rR,xFe as rS,fR as rT,Rit as rU,P1t as rV,L5 as rW,aFe as rX,w$t as rY,na as rZ,Al as r_,hTt as ra,pTt as rb,fTt as rc,mu as rd,Jft as re,IOt as rf,EEt as rg,GHe as rh,HHe as ri,Wwe as rj,lIe as rk,LOt as rl,FOt as rm,Zwe as rn,R_t as ro,o5 as rp,Um as rq,Ep as rr,ro as rs,wZ as rt,bme as ru,Ok as rv,hX as rw,Yk as rx,Rv as ry,KT as rz,ae as s,AMt as s$,cet as s0,hBe as s1,yBe as s2,eTt as s3,uet as s4,bnt as s5,JAe as s6,n_t as s7,B$e as s8,Unt as s9,C9e as sA,JTt as sB,z9e as sC,XTt as sD,_Ve as sE,$$t as sF,L1t as sG,Lm as sH,Fo as sI,I$t as sJ,e_t as sK,FE as sL,SHe as sM,ERe as sN,jwt as sO,zwt as sP,rpe as sQ,k1t as sR,E1t as sS,L$t as sT,ope as sU,f8e as sV,K8e as sW,Gh as sX,o_e as sY,Jwt as sZ,kMt as s_,Wnt as sa,nst as sb,Bv as sc,Ukt as sd,Vkt as se,Gkt as sf,Wkt as sg,zit as sh,pme as si,W8e as sj,$Fe as sk,SFe as sl,H3 as sm,_xt as sn,Zkt as so,Ppe as sp,Kst as sq,uFe as sr,dFe as ss,LWe as st,Ds as su,c5 as sv,Iwe as sw,T_t as sx,uwe as sy,pwe as sz,Z7 as t,xPe as t$,PMt as t0,OMt as t1,bMt as t2,_Mt as t3,vOe as t4,ME as t5,wMt as t6,yGe as t7,W3e as t8,Lxt as t9,KIt as tA,EG as tB,OOt as tC,Lbe as tD,d0 as tE,skt as tF,JYe as tG,S9 as tH,lY as tI,U2t as tJ,UUe as tK,K$t as tL,G$t as tM,Y$t as tN,W$t as tO,J$t as tP,Z$t as tQ,Q$t as tR,ho as tS,aCt as tT,B2t as tU,zte as tV,H$t as tW,kst as tX,ELe as tY,CLe as tZ,R1t as t_,eI as ta,Ykt as tb,Kkt as tc,sAt as td,k5 as te,Qkt as tf,iAt as tg,Xkt as th,tAt as ti,Jkt as tj,eAt as tk,rAt as tl,nAt as tm,MTt as tn,i$e as to,C1t as tp,M1t as tq,vLe as tr,$_e as ts,FW as tt,xp as tu,KGe as tv,Yxt as tw,g5 as tx,iue as ty,LEt as tz,OCt as u,l5e as u$,kEt as u0,AEt as u1,SEt as u2,Hn as u3,IKe as u4,Q$e as u5,_Et as u6,$xe as u7,I5 as u8,CEt as u9,hmt as uA,dmt as uB,sIe as uC,iGe as uD,Wmt as uE,$Mt as uF,tMt as uG,iMt as uH,Opt as uI,$pt as uJ,MMt as uK,CMt as uL,FMt as uM,RMt as uN,hMt as uO,zMt as uP,NMt as uQ,NHe as uR,WHe as uS,VHe as uT,b_e as uU,GS as uV,EMt as uW,BIe as uX,CHe as uY,g1t as uZ,BFe as u_,MOt as ua,IEt as ub,Dt as uc,CKe as ud,$Ke as ue,TEt as uf,yIe as ug,iz as uh,F2 as ui,tz as uj,Ixe as uk,Txe as ul,Ppt as um,wKe as un,bKe as uo,kH as up,TMt as uq,xKe as ur,Kk as us,qHe as ut,COt as uu,TKe as uv,EOt as uw,SMt as ux,AOt as uy,$Et as uz,zae as v,cEt as v$,CFe as v0,Y1t as v1,OTt as v2,QVe as v3,$me as v4,zye as v5,Mpe as v6,k2 as v7,L_t as v8,XVe as v9,pMt as vA,dGe as vB,XU as vC,imt as vD,QIt as vE,rAe as vF,e7e as vG,Nwt as vH,GSt as vI,WSt as vJ,WFe as vK,l6e as vL,o6e as vM,Rye as vN,Dxe as vO,O6e as vP,OVe as vQ,AVe as vR,PVe as vS,ZVe as vT,a6e as vU,Lxe as vV,Xxt as vW,H8e as vX,DVe as vY,YTt as vZ,WTt as v_,Axt as va,lKe as vb,qAt as vc,HAt as vd,Lst as ve,Z1t as vf,Ra as vg,sze as vh,BAt as vi,Gse as vj,LPt as vk,OPt as vl,wht as vm,GMt as vn,WMt as vo,Y_t as vp,HMt as vq,APt as vr,oCt as vs,nCt as vt,sCt as vu,rCt as vv,iCt as vw,fGe as vx,a_e as vy,fMt as vz,Nae as w,j1e as w$,RFe as w0,K1t as w1,ixt as w2,hxt as w3,ext as w4,rxt as w5,pxt as w6,dRe as w7,JF as w8,uEt as w9,eqe as wA,xwe as wB,F_t as wC,EO as wD,Gre as wE,vSt as wF,md as wG,F2t as wH,Pa as wI,RTe as wJ,RPt as wK,EH as wL,yPt as wM,VTt as wN,Qke as wO,Rwt as wP,Fwt as wQ,lRe as wR,USt as wS,TVe as wT,Grt as wU,wEt as wV,x$e as wW,b$ as wX,nBe as wY,P$t as wZ,xSt as w_,hEt as wa,set as wb,k5e as wc,vxt as wd,TRe as we,qk as wf,Hk as wg,Gk as wh,h2t as wi,P8e as wj,jTt as wk,WJe as wl,QSt as wm,DSt as wn,BSt as wo,VSt as wp,Kwt as wq,lTt as wr,oTt as ws,Bwt as wt,Wje as wu,zSt as wv,q1t as ww,YSt as wx,oT as wy,d4e as wz,d as x,_Se as x0,xSe as x1,$Xe as x2,NSt as x3,X_t as x4,yFe as x5,rBe as x6,GPt as x7,kZ as x8,lPt as x9,JEt as xA,Qst as xB,rA as xC,SPt as xD,TPt as xE,c3t as xF,hgt as xG,d3t as xH,g3t as xI,y3t as xJ,v3t as xK,K5 as xL,rvt as xM,AX as xN,x3t as xO,RX as xP,zX as xQ,T3t as xR,kye as xa,e$t as xb,cPt as xc,uPt as xd,qSt as xe,Kxt as xf,Qxt as xg,G1t as xh,BZ as xi,t_t as xj,HSt as xk,FVe as xl,dPt as xm,oPt as xn,qkt as xo,eBe as xp,O5 as xq,hPt as xr,WVe as xs,TT as xt,Mke as xu,Uxt as xv,qxt as xw,uCt as xx,$_ as xy,V2t as xz,f as y,V as z};
//# sourceMappingURL=index-Dbb7O7mW.js.map
