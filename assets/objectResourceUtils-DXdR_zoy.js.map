{"version":3,"mappings":";isCAImQ,SAASA,EAAEA,EAAE,CAAC,GAASA,GAAN,KAAQ,OAAO,KAAK,MAAMC,EAAQD,EAAE,QAAR,KAAeA,EAAE,OAAOE,GAAEC,EAAQH,EAAE,UAAR,KAAiBA,EAAE,SAAS,EAAEI,EAAQJ,EAAE,OAAR,KAAcA,EAAE,MAAMK,GAAEC,EAAEC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAEN,EAAE,CAAC,EAAEA,EAAE,CAAC,EAAE,CAAC,EAAEO,EAAED,EAAE,KAAK,IAAIJ,CAAC,EAAE,CAAC,KAAK,IAAIA,CAAC,EAAE,EAAE,KAAK,IAAIA,CAAC,EAAE,KAAK,IAAIA,CAAC,EAAE,EAAE,EAAE,EAAE,CAAC,EAAEM,EAAEF,EAAEH,EAAE,CAAC,EAAE,EAAE,EAAE,EAAEA,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,CAAC,EAAEM,EAAEC,GAAC,EAAG,OAAOC,EAAEF,EAAEF,EAAEC,CAAC,EAAEG,EAAEF,EAAEJ,EAAEI,CAAC,EAAEA,CAAC,CCA9hB,MAAMV,EAAC,CAAC,aAAa,CAAC,KAAK,WAAW,IAAI,MAAM,KAAK,UAAU,IAAI,MAAM,KAAK,SAAS,IAAI,KAAK,CAAC,CAAC,MAAMO,EAAC,CAAC,YAAYA,EAAEH,EAAEF,EAAE,CAAC,KAAK,KAAKK,EAAE,KAAK,aAAaH,EAAE,KAAK,YAAYF,EAAE,KAAK,eAAe,IAAIF,GAAE,KAAK,iBAAiB,CAAC,CAAC,CCAkhC,MAAMa,EAAE,IAAIV,GAAE,UAAU,mDAAmD,EAAE,MAAMW,EAAC,CAAC,YAAY,EAAEP,EAAEL,EAAE,CAAC,KAAK,SAAS,EAAE,KAAK,SAASK,EAAE,KAAK,aAAaL,CAAC,CAAC,CAAC,eAAea,GAAEX,EAAEG,EAAE,CAAC,MAAML,EAAE,MAAMc,GAAEZ,EAAEG,CAAC,EAAEJ,EAAE,MAAMc,GAAEf,EAAE,oBAAoB,GAAGK,CAAC,EAAE,IAAII,EAAE,EAAE,UAAUX,KAAKG,EAAE,GAAGA,EAAE,eAAeH,CAAC,EAAE,CAAC,MAAMI,EAAED,EAAEH,CAAC,EAAEW,GAAGP,GAAA,MAAAA,EAAG,MAAMA,EAAE,MAAM,MAAMA,EAAE,MAAM,OAAO,EAAE,CAAC,CAAC,OAAO,IAAIU,GAAEZ,EAAEC,EAAEQ,EAAEX,GAAEE,CAAC,CAAC,CAAC,CAAC,eAAec,GAAE,EAAEb,EAAE,CAAC,MAAMH,EAAEG,GAAA,YAAAA,EAAG,oBAAoB,GAAGH,EAAE,OAAOkB,GAAE,EAAElB,EAAEG,CAAC,EAAE,MAAMQ,EAAE,MAAMJ,GAAEH,GAAE,EAAED,CAAC,CAAC,EAAE,GAAQQ,EAAE,KAAP,GAAU,OAAOA,EAAE,MAAM,KAAKV,GAAEU,EAAE,KAAK,EAAEQ,GAAER,EAAE,KAAK,CAAC,CAAC,eAAeO,GAAEd,EAAEF,EAAE,EAAE,CAAC,MAAM,EAAE,MAAMK,GAAEL,EAAE,QAAQE,EAAE,OAAO,CAAC,CAAC,EAAE,GAAQ,EAAE,KAAP,GAAU,OAAO,EAAE,MAAMH,GAAE,EAAE,KAAK,EAAEkB,GAAE,EAAE,MAAM,QAAQ,GAAG,CAAC,CAAC,SAASA,GAAEf,EAAE,CAAC,MAAM,IAAIF,GAAE,GAAG,uCAAuCE,CAAC,EAAE,CAAC,CAAC,SAASgB,GAAEhB,EAAE,CAAC,MAAMG,EAAEH,EAAE,OAAOF,EAAEK,EAAE,SAAS,IAAIJ,EAAE,GAAG,OAAOI,EAAE,mBAAmBM,IAAI,KAAK,yCAAyC,EAAEV,EAAE,IAAII,EAAE,UAAU,IAAI,oBAAoB,MAAM,IAAI,UAAU,KAAK,KAAK,KAAK,OAAO,CAAC,MAAMH,EAAEG,EAAE,MAAM,GAAGH,GAAG,GAAGG,EAAE,iBAAiB,UAAUL,KAAKK,EAAE,iBAAiB,CAAC,MAAMA,EAAEH,EAAEF,CAAC,EAAEK,GAAA,MAAAA,EAAG,QAAcA,EAAE,WAAR,MAA8BA,EAAE,YAAb,WAAyBM,IAAI,KAAK,8CAA8CN,EAAE,SAAS,uCAAuC,EAAEJ,EAAE,IAAUI,EAAE,kBAAR,MAA8BA,EAAE,mBAAN,IAAyBM,IAAI,KAAK,oDAAoDN,EAAE,gBAAgB,kCAAkC,EAAEJ,EAAE,MAAMU,EAAC,EAAG,KAAK,uDAAuDX,CAAC,aAAa,EAAEC,EAAE,GAAG,OAAOU,EAAC,EAAG,KAAK,uCAAuC,EAAEV,EAAE,GAAG,KAAK,CAAC,QAAQU,EAAC,EAAG,KAAK,yBAAyBX,CAAC,GAAG,EAAEC,EAAE,EAAE,CAACC,EAAE,OAAO,WAAWS,EAAC,EAAG,KAAK,4BAA4B,EAAEV,EAAE,IAAI,MAAMH,EAAEI,EAAE,OAAO,iBAAiB,UAAUO,KAAKX,EAAGA,EAAEW,CAAC,EAAE,SAASE,IAAI,KAAK,qEAAqE,EAAEV,EAAE,IAAI,OAAOA,CAAC,CAAC,SAASkB,GAAEjB,EAAEG,EAAE,SAAC,MAAML,EAAE,IAAI,MAAMC,EAAE,IAAI,MAAMH,EAAE,IAAI,MAAMC,EAAE,IAAIU,GAAED,EAAEN,EAAE,SAASI,EAAEI,GAAE,MAAMF,EAAE,SAAS,MAAM,MAAM,EAAEY,GAAE,SAASd,CAAC,EAAE,MAAMe,EAAEb,EAAE,MAAM,KAAKc,EAAEd,EAAE,MAAM,WAAWe,EAAEf,EAAE,qBAAqB,GAAGG,EAAET,EAAE,SAAS,IAAIU,EAAE,EAAE,MAAMC,EAAE,IAAI,IAAI,QAAQJ,EAAE,EAAEA,EAAEa,EAAE,OAAOb,IAAI,CAAC,MAAMP,EAAEoB,EAAEb,CAAC,EAAE,GAAG,CAACS,GAAEhB,CAAC,EAAE,SAAS,MAAMQ,EAAEc,GAAEtB,CAAC,EAAEM,EAAEN,EAAE,OAAO,iBAAiBI,EAAE,GAAGe,EAAEhB,GAAG,CAAC,GAAyBH,EAAE,OAAO,WAA/B,oBAAwC,OAAO,KAAK,MAAMF,EAAEE,EAAE,OAAO,MAAM,UAAUA,KAAKF,EAAE,GAAGE,IAAIG,EAAE,OAAOL,EAAEE,CAAC,EAAE,OAAO,OAAO,IAAI,EAAEY,EAAEN,EAAEiB,EAAE,QAAQ,EAAET,EAAEF,EAAE,OAAO,OAAOA,EAAE,iBAAiB,UAAUT,KAAKG,EAAE,CAAC,MAAMN,EAAEM,EAAEH,CAAC,EAAEL,EAAEE,EAAE,OAAOD,EAAEoB,EAAEhB,CAAC,GAAGE,GAAES,CAAC,EAAEV,EAAE,KAAK,CAACD,EAAE,IAAID,EAAEJ,EAAEC,EAAEC,EAAE,iBAAiB,EAAE,CAAC,CAAC,CAAC,CAAC,MAAM,EAAEQ,EAAE,QAAQS,EAAER,GAAGA,EAAE,CAAC,EAAE,GAAGQ,GAAG,CAACN,EAAE,IAAI,CAAC,EAAE,CAAC,KAAK,CAAC,MAAMX,EAAE,WAAWG,CAAC,EAAEc,EAAEnB,EAAE,IAAI0B,GAAExB,EAAEG,CAAC,EAAEJ,EAAE,KAAKD,CAAC,EAAEa,EAAE,IAAI,EAAEb,CAAC,CAAC,CAAC,MAAM2B,EAAEd,EAAE,IAAI,CAAC,EAAEE,EAAEY,EAAEA,EAAE,GAAG,OAAOP,EAAEV,EAAE,SAAS,IAAIkB,EAAE7B,EAAE,IAAIqB,EAAE,CAAC,EAAE,GAASQ,GAAN,KAAQ,CAAC,MAAM1B,EAAEqB,EAAEH,EAAE,MAAMA,EAAE,YAAY,GAAG,EAAE,CAAC,CAAC,EAAE,OAAWlB,EAAE,eAAN,IAAqBA,EAAE,aAAa,GAAG,MAAMF,EAAEmB,EAAEU,GAAEV,EAAE,iBAAiB,EAAE,OAAOlB,EAAE,CAAC,QAAQE,EAAED,EAAE,OAAO,EAAE,QAAQC,EAAED,EAAE,OAAO,EAAE,QAAQ,GAAGA,EAAE,cAAc,GAAG,iBAAiBF,EAAE,mBAAmB,IAAI,UAAUe,EAAE,YAAY,GAAG,SAASe,EAAE,KAAK,aAAa5B,EAAE,sBAAsB,OAAO,2BAA0BiB,GAAA,YAAAA,EAAG,WAAW,mBAAkB,EAAE,EAAEd,GAAA,MAAAA,EAAG,oBAAoB,OAAO,OAAOJ,EAAEI,EAAE,kBAAkB,EAAEuB,EAAE,IAAIG,EAAE9B,EAAEI,CAAC,EAAEN,EAAE,IAAIqB,EAAE,EAAEQ,CAAC,CAAC,CAAC9B,EAAE,KAAK8B,CAAC,EAAE,MAAMI,EAAE,IAAIC,GAAEL,EAAEtB,CAAC,EAAEM,KAAGsB,GAAAC,EAAA7B,EAAE,MAAMJ,GAAGA,EAAE,CAAC,IAAIuB,EAAE,SAAQ,IAA5B,YAAAU,EAAiC,KAAjC,YAAAD,EAAqC,QAAQ,SAAQ,EAAElC,EAAE,KAAKgC,CAAC,CAAC,CAAC,MAAM,CAAC,gBAAgB,CAAC,CAAC,KAAKX,EAAE,eAAe,CAAC,SAASpB,EAAE,UAAUH,EAAE,WAAWE,CAAC,EAAE,YAAYQ,EAAE,MAAM,YAAY,iBAAiBI,EAAE,aAAa,IAAI,CAAC,EAAE,qBAAqBe,GAAE3B,CAAC,CAAC,CAAC,CAAC,SAAS2B,GAAEzB,EAAE,CAAC,MAAMG,EAAEG,GAAC,EAAG,OAAON,EAAE,SAASA,GAAG,CAAC,MAAMF,EAAEE,EAAE,aAAmBF,GAAN,OAAUM,EAAED,EAAEL,EAAE,KAAK,EAAEM,EAAED,EAAEL,EAAE,KAAK,EAAE,EAAC,EAAGK,CAAC,CAAC,eAAeU,GAAEb,EAAEG,EAAE,CAAC,MAAML,EAAE,IAAI,MAAM,UAAUS,KAAKP,EAAE,CAAC,MAAMD,EAAEC,EAAEO,CAAC,EAAEX,EAAEG,EAAE,OAAO,CAAC,EAAE,KAAK,GAAG,CAACH,EAAE,CAACa,IAAI,KAAK,yDAAyD,EAAE,QAAQ,CAAC,MAAMZ,EAAEE,EAAE,SAAS,WAAWH,EAAEY,EAAE,uBAAuBD,EAAE,EAAWR,EAAE,WAAX,OAAoBA,EAAE,mBAAmB,eAAe,OAAOO,EAAE,CAAC,aAAa,GAAG,KAAK,CAAC,EAAEe,EAAE,OAAO,EAAEA,EAAE,MAAM,EAAE,iBAAiBM,GAAE,CAAC,IAAIP,EAAE,MAAM,EAAEhB,EAAED,GAAA,MAAAA,EAAG,gBAAgB,QAAQ,QAAQ,IAAI,EAAEgB,GAAEtB,EAAEM,CAAC,EAAEL,EAAE,KAAKM,EAAE,MAAMJ,IAAI,CAAC,MAAMQ,EAAE,MAAMR,EAAE,WAAWM,EAAE,kBAAkB,CAAC,GAAE,CAAE,CAAC,CAAC,MAAMP,EAAE,MAAM,QAAQ,IAAID,CAAC,EAAEF,EAAE,GAAG,UAAUW,KAAKR,EAAEH,EAAEW,EAAE,KAAK,EAAEA,EAAE,OAAOX,CAAC,CAAC,SAAS+B,GAAE3B,EAAE,CAAC,OAAOA,GAAG,IAAI,OAAO,OAAOoB,EAAE,KAAK,IAAI,sBAAsB,OAAOA,EAAE,UAAU,IAAI,OAAO,OAAOA,EAAE,OAAO,QAAQ,OAAOA,EAAE,KAAK,CAAC,CAAC,SAASE,GAAEtB,EAAE,CAAC,MAAMG,EAAEH,EAAE,OAAO,MAAM,CAAC,GAAG,EAAE,SAASG,EAAE,SAAS,QAAQA,EAAE,QAAQ,OAAOA,EAAE,OAAO,CAAC,CAAC,MAAMe,GAAE,IAAIV,GAAE,EAAE,EAAE,MAAM,ECAplG,eAAe0B,GAAElC,EAAEG,EAAE,OAAC,MAAMI,EAAE4B,GAAErC,GAAEE,CAAC,CAAC,EAAE,GAAYO,EAAE,WAAX,OAAoB,CAAC,MAAMP,EAAE,MAAMG,EAAE,MAAMA,EAAE,MAAM,SAASI,EAAE,IAAIJ,CAAC,EAAEwB,GAAEpB,EAAE,IAAIJ,CAAC,GAAG,CAAC,gBAAgBL,EAAE,qBAAqBF,CAAC,EAAEwC,GAAEpC,EAAEG,CAAC,EAAE,MAAM,CAAC,KAAKL,EAAE,qBAAqBF,EAAE,qBAAqB,GAAG,OAAO,EAAE,CAAC,CAAC,IAAI,EAAE,GAAGO,EAAE,MAAM,EAAE,MAAMA,EAAE,MAAM,SAASI,EAAE,IAAIJ,EAAE,CAAC,CAACA,EAAE,MAAM,MAAM,CAAC,KAAK,CAAC,SAASH,CAAC,EAAE,MAAKqC,GAAA,IAAC,OAAO,sBAAsB,0CAAE,EAAE,MAAMrC,EAAE,IAAIY,GAAET,EAAE,mBAAmB,EAAEI,EAAE,IAAIJ,EAAEA,EAAE,MAAM,CAAC,CAAC,MAAMK,GAAEyB,EAAA,EAAE,MAAM,OAAR,YAAAA,EAAc,oBAAoBlC,EAAE,EAAE,KAAK,sBAA4BS,GAAN,MAAqC,EAAE,KAAK,gBAAnC,0BAAiDT,GAAG,CAAC,EAAE,WAAW,oBAAoB,EAAE,WAAW,kBAAkB,GAAGuC,GAAG,EAAE9B,CAAC,GAAG,MAAMP,EAAE,CAAC,CAACE,EAAE,OAAO,EAAE,EAAE,KAAK,qBAAqB,CAAC,OAAOF,EAAE,YAAY,GAAG,cAAcF,EAAE,WAAWwC,EAAC,EAAE,CAAC,OAAOtC,EAAE,YAAY,GAAG,cAAc,GAAG,WAAWuC,EAAC,EAAElC,EAAE,CAAC,GAAGH,EAAE,mBAAmB,cAAcJ,CAAC,EAAE,CAAC,gBAAgBK,EAAE,qBAAqBC,CAAC,EAAEoC,GAAG,EAAE,EAAEnC,EAAEH,EAAEI,EAAE,kBAAkBR,CAAC,EAAE,MAAM,CAAC,KAAKK,EAAE,qBAAqBC,EAAE,qBAAqB,EAAE,KAAK,qBAAqB,OAAO,EAAE,CAAC,CAAC,SAAS8B,GAAEnC,EAAE,CAAC,MAAMF,EAAEE,EAAE,MAAM,oCAAoC,EAAE,OAAGF,EAAQ,CAAC,SAAS,OAAO,IAAIA,EAAE,CAAC,EAAE,kBAAwBA,EAAE,CAAC,GAAT,KAAW,OAAOA,EAAE,CAAC,CAAC,EAAE,IAAI,EAASE,EAAE,MAAM,wBAAwB,EAAE,CAAC,SAAS,OAAO,IAAIA,EAAE,kBAAkB,IAAI,EAAE,CAAC,SAAS,UAAU,IAAIA,EAAE,kBAAkB,IAAI,CAAC,CAAC,SAASyC,GAAGzC,EAAEF,EAAEK,EAAEI,EAAEX,EAAE,EAAE,CAAC,MAAMG,EAAEC,EAAE,MAAMC,EAAE,IAAI,MAAMJ,EAAE,IAAI,IAAIS,EAAE,IAAI,IAAIF,EAAEL,EAAE,KAAK,OAAOM,EAAEwB,GAAC,EAAG,OAAO9B,EAAE,KAAK,SAAS,CAACC,EAAEE,IAAI,CAAC,MAAM0B,EAAOrB,EAAE,eAAP,KAAsBH,EAAE,GAAOF,IAAJ,GAAOE,EAAE,GAAOF,IAAJ,IAAaK,EAAE,eAAP,IAA2BX,GAAN,MAASM,IAAIN,EAAE,GAAGgC,GAAO1B,IAAJ,EAAM,OAAO,MAAMiB,EAAE,IAAIF,GAAEjB,EAAE,KAAKA,EAAE,aAAa,CAAC,EAAE,EAAE,CAAC,CAAC,EAAEA,EAAE,MAAM,SAASA,GAAG,CAAC,MAAMJ,EAAEgC,EAAE,IAAIc,EAAE,GAAGnC,CAAC,EAAEoC,GAAG5C,EAAEC,EAAEmB,EAAErB,EAAEK,EAAEN,EAAES,EAAEC,EAAE,CAAC,EAAE,CAAC,SAASN,EAAE,YAAYG,CAAC,EAAEwC,GAAG5C,EAAEJ,GAAG,IAAI8C,EAAE,GAAGnC,CAAC,CAAC,EAAEa,EAAEnB,EAAE,aAAmBmB,GAAN,MAAalB,IAAJ,IAAQW,EAAER,EAAEe,EAAE,KAAK,EAAEP,EAAER,EAAEe,EAAE,KAAK,GAASxB,GAAN,OAAUuB,EAAE,eAAe,WAAW,KAAKlB,CAAC,EAAEkB,EAAE,kBAAkBf,EAAE,EAAC,EAAGwB,GAAG3B,EAAE,KAAKkB,CAAC,CAAC,EAAC,EAAG,CAAC,gBAAgBlB,EAAE,qBAAqBI,CAAC,CAAC,CAAC,SAASsC,GAAG,EAAExC,EAAEI,EAAE,EAAEC,EAAET,EAAEE,EAAEK,EAAEF,EAAE,SAAC,MAAMC,EAAE,EAAE,UAAU,IAAIF,EAAE,QAAQ,EAAE,GAASE,GAAN,KAAQ,OAAO,KAAK,KAAK,CAAC,OAAOH,EAAE,MAAM0B,EAAE,UAAU,EAAE,QAAQR,CAAC,EAAEjB,EAAE,WAAW,EAAEA,EAAE,UAAUD,EAAE,UAAU,KAAK0B,EAAE,SAAS,KAAK,EAAE,aAAa,KAAKR,EAAE,WAAW,IAAIP,EAAQV,EAAE,WAAW,WAAnB,KAA6B,EAAQA,EAAE,WAAW,QAAnB,KAA0BkB,EAAEwB,GAAGxC,EAAE,SAAS,EAAE,GAAG,CAACN,EAAE,IAAI,CAAC,EAAE,CAAC,GAAGc,EAAE,CAAC,MAAMb,EAAE,CAACA,EAAEG,EAAE,GAAGI,GAAE,KAAK,CAAC,GAASP,GAAN,MAAS,CAACC,EAAE,IAAID,CAAC,EAAE,CAAC,MAAMJ,EAAE,EAAE,SAAS,IAAII,CAAC,EAAE,GAAGJ,EAAE,CAAC,MAAME,EAAEF,EAAE,KAAKY,GAAEL,GAAG,CAAC2B,EAAEhC,CAAC,EAAEQ,EAAE,mBAAmB,OAAOL,EAAE,IAAID,EAAE,IAAI8C,GAAEhB,EAAEhC,CAAC,EAAEA,EAAE,KAAKA,EAAE,CAAC,GAAGF,EAAE,WAAW,iBAAiB,CAACkC,EAAEhC,CAAC,GAAGS,GAAE,SAASuB,EAAEhC,CAAC,EAAEA,EAAE,SAAS,OAAO,mBAAmBU,EAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEL,EAAEkB,IAAI0B,EAAE,QAAQ,CAAC3C,EAAEJ,EAAEK,EAAE,aAAaF,EAAEkB,IAAI0B,EAAE,MAAM,EAAE/C,EAAEK,EAAE,aAAa,EAAEL,EAAEK,EAAE,iBAAiB,EAAE,EAAEL,EAAEK,EAAE,eAAe,EAAEL,EAAEK,EAAE,yBAAyB,EAAE,CAAC,CAAC,MAAME,EAAE,EAAEP,GAAEE,EAAEG,EAAE,MAAM,CAAC,GAAGE,EAAEqB,EAAEvB,EAAE,MAAM,CAAC,GAAGE,EAAEY,EAAEd,EAAE,MAAM,CAAC,GAAGE,EAAEa,EAAEf,EAAE,eAAe,CAAC,GAAGE,EAAEwB,EAAE1B,EAAE,eAAe,CAAC,GAAGE,EAAEiB,EAAEnB,EAAE,eAAe,CAAC,GAAGE,EAAEE,EAAQJ,EAAE,cAAR,MAAsBQ,EAAEZ,EAAE,IAAII,EAAE,YAAY,EAAE,KAAKa,EAAE8B,GAAE3C,CAAC,EAAEK,IAAQuB,EAAA5B,EAAE,yBAAF,YAAA4B,EAA0B,QAAhC,MAAsCD,EAAA3B,EAAE,yBAAF,YAAA2B,EAA0B,MAAMnC,GAAEE,EAAE,IAAI,EAAE,IAAI2C,EAAE,CAAC,GAAG,EAAE,gBAAgBO,GAAE,OAAO,iBAAiB5B,EAAE,mBAAmBhB,EAAE,YAAY,QAAQ,CAACH,EAAE0B,EAAET,CAAC,EAAE,QAAQ,CAACjB,EAAE0B,EAAET,CAAC,EAAE,QAAmBd,EAAE,YAAb,SAAuB,EAAEA,EAAE,QAAQ,YAAYA,EAAE,YAAY,gBAAgB,gBAAgB,SAASA,EAAE,YAAYiB,EAAE,KAAKA,EAAE,KAAK,gBAAgB,CAAC,CAACnB,EAAE,WAAW,MAAM,kBAAkB,CAAC,CAACA,EAAE,WAAW,QAAQ,WAAW,EAAE+C,GAAE,UAAUA,GAAE,iBAAiB,YAAY,GAAG,eAAe7C,EAAE,eAAe,wBAAwBA,EAAE,wBAAwB,UAAgBI,GAAN,KAAQA,EAAE,GAAG,OAAO,aAAaJ,EAAE,aAAa,gBAAsBA,EAAE,eAAR,MAAuBQ,EAAEZ,EAAE,IAAII,EAAE,aAAa,EAAE,GAAG,OAAO,0BAAgCI,GAAN,MAAS,CAAC,CAACA,EAAE,WAAW,iBAAiB,mBAAyBJ,EAAE,kBAAR,MAA0BQ,EAAEZ,EAAE,IAAII,EAAE,gBAAgB,EAAE,GAAG,OAAO,kBAAwBA,EAAE,iBAAR,MAAyBQ,EAAEZ,EAAE,IAAII,EAAE,eAAe,EAAE,GAAG,OAAO,2BAAiCA,EAAE,0BAAR,MAAkCQ,EAAEZ,EAAE,IAAII,EAAE,wBAAwB,EAAE,GAAG,OAAO,kBAAkB,CAACe,EAAEW,EAAEP,CAAC,EAAE,WAAWN,EAAEiC,GAAE,CAAC9C,EAAE,eAAeA,EAAE,gBAAgB,EAAE,WAAW,CAAC,CAAC,EAAE,YAAYa,EAAE,4BAA4BJ,EAAET,EAAE,qBAAqB,EAAE,6BAA6BS,EAAET,EAAE,sBAAsB,EAAE,MAAM,CAACK,EAAE,CAAC,EAAEA,EAAE,CAAC,CAAC,EAAE,gCAAgCI,EAAET,EAAE,yBAAyB,EAAE,+BAA+BS,EAAET,EAAE,wBAAwB,EAAE,wCAAwCS,EAAET,EAAE,iCAAiC,EAAE,GAAGG,CAAC,EAAEF,CAAC,CAAC,CAAC,CAAC,MAAMyB,EAAEhC,EAAE,IAAI,CAAC,EAAE,GAAGQ,EAAE,eAAe,UAAU,KAAKwB,CAAC,EAAElB,EAAE,CAAC,MAAMb,EAAEA,GAAG,CAAOA,GAAN,MAASO,EAAE,eAAe,SAAS,KAAKN,EAAE,IAAID,CAAC,CAAC,CAAC,EAAEA,EAAEK,EAAE,YAAY,EAAEL,EAAEK,EAAE,aAAa,EAAEL,EAAEK,EAAE,gBAAgB,EAAEL,EAAEK,EAAE,eAAe,EAAEL,EAAEK,EAAE,wBAAwB,CAAC,CAAC,OAAO0B,CAAC,CAAC,SAASa,GAAG5C,EAAEF,EAAE,CAAC,MAAMU,EAAER,EAAE,WAAW,SAAS,MAAMD,EAAEqD,GAAEpD,EAAE,SAASQ,EAAER,EAAE,aAAa,EAAEC,EAAEsB,EAAE,EAAEf,CAAC,EAAE,CAAC,YAAYX,EAAE,kBAAkBS,CAAC,EAAEN,EAAE,WAAW,SAAS0B,GAAEzB,EAAEJ,EAAEG,EAAE,UAAU,EAAEM,CAAC,EAAE,MAAMF,EAAE,CAAC,CAACiD,EAAE,SAAS,IAAIC,EAAErD,EAAEF,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,GAASC,EAAE,WAAW,QAAnB,KAA0B,CAAC,MAAMF,EAAEyB,EAAE,EAAEf,CAAC,EAAE,CAAC,YAAYZ,EAAE,kBAAkBK,CAAC,EAAED,EAAE,WAAW,OAAOO,GAAEgD,EAAGvD,EAAE,SAAS,EAAEwD,GAAE1D,EAAEF,EAAE2D,EAAG,EAAEtD,CAAC,EAAEE,GAAEoD,CAAE,GAAGxC,GAAEjB,EAAEA,CAAC,EAAEM,EAAE,KAAK,CAACiD,EAAE,OAAO,IAAIC,EAAExD,EAAEC,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,GAASC,EAAE,WAAW,SAAnB,KAA2B,CAAC,MAAMF,EAAEyB,EAAE,EAAEf,CAAC,EAAE,CAAC,YAAYD,EAAE,kBAAkBN,CAAC,EAAED,EAAE,WAAW,QAAQJ,GAAE2D,EAAGvD,EAAE,SAAS,EAAEyD,GAAE3D,EAAES,EAAEgD,EAAG,EAAEtD,CAAC,EAAEE,GAAEoD,CAAE,GAAGxC,GAAEjB,EAAEA,EAAE,CAAC,EAAEM,EAAE,KAAK,CAACiD,EAAE,QAAQ,IAAIC,EAAExD,EAAEC,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,GAASC,EAAE,WAAW,WAAnB,KAA6B,CAAC,MAAMF,EAAEyB,EAAE,EAAEf,CAAC,EAAE,CAAC,YAAYL,EAAE,kBAAkBI,CAAC,EAAEP,EAAE,WAAW,UAAUgB,GAAElB,EAAEK,EAAE,EAAEI,CAAC,EAAEH,EAAE,KAAK,CAACiD,EAAE,IAAI,IAAIC,EAAExD,EAAEC,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,MAAMM,EAAEL,EAAE,WAAW,MAAM,GAASK,GAAN,KAAQ,CAAC,MAAMP,EAAE,IAAI,WAAW,EAAEU,CAAC,EAAMH,EAAE,eAAN,EAAmBA,aAAa0B,GAAEN,GAAE3B,EAAEO,EAAE,EAAE,GAAG,GAAGA,aAAamB,IAAGnB,aAAaI,KAAIgB,GAAE3B,EAAEO,EAAE,EAAE,IAAI,GAAG,GAAGP,EAAE,KAAK,GAAG,EAAEO,aAAagB,GAAEV,GAAEb,EAAEO,EAAE,YAAY,EAAE,IAAI,EAAEA,EAAE,iBAAiB,GAAGL,EAAE,WAAW,iBAAiBkB,IAAGlB,EAAE,WAAW,iBAAiBU,KAAIC,GAAEb,EAAEO,EAAE,YAAY,EAAE,IAAI,IAAI,EAAEL,EAAE,WAAW,MAAM,iBAAiB,GAAGI,EAAE,KAAK,CAACiD,EAAE,MAAM,IAAIC,EAAExD,EAAEC,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,SAAS,IAAI2D,GAAE5D,EAAEM,CAAC,EAAE,YAAYI,CAAC,CAAC,CAAC,MAAM+C,EAAG/C,KAAI,SAASqC,GAAG7C,EAAE,CAAC,OAAOA,EAAC,CAAE,IAAI,QAAQ,OAAO+C,EAAE,MAAM,IAAI,OAAO,OAAOA,EAAE,KAAK,IAAI,SAAS,KAAK,KAAK,KAAK,OAAO,OAAOA,EAAE,MAAM,CAAC,CAAC,SAAST,GAAG,EAAEnC,EAAE,CAAC,QAAQI,EAAE,EAAEA,EAAE,EAAE,MAAM,KAAK,OAAO,EAAEA,EAAE,CAAC,MAAM,EAAE,EAAE,MAAM,KAAKA,CAAC,EAAE,UAAUC,KAAK,EAAE,MAAM,CAAC,MAAMZ,EAAEY,EAAE,WAAW,OAAO,GAASZ,GAAN,KAAQ,OAAO,MAAMC,EAAEW,EAAE,WAAW,SAASqB,EAAEhC,EAAE,MAAMgB,EAAEO,EAAC,EAAGG,EAAEH,IAAII,EAAEJ,IAAIX,EAAE,IAAI,aAAa,EAAEoB,CAAC,EAAEX,EAAE,IAAI,aAAa,EAAEW,CAAC,EAAEnB,EAAEX,GAAEE,GAAC,EAAGO,EAAE,SAAS,EAAE,IAAIkB,EAAE,EAAE8B,EAAE,EAAE,QAAQzD,EAAE,EAAEA,EAAE8B,EAAE9B,IAAI,CAACF,EAAE,OAAOE,EAAEwB,CAAC,EAAE3B,EAAE,OAAOG,EAAEc,CAAC,EAAEP,EAAEiB,EAAEA,EAAEf,EAAE,SAAS,EAAEJ,GAAEoB,EAAED,EAAEpB,EAAE,MAAM,EAAEE,GAAEmB,EAAEA,EAAErB,EAAE,MAAM,EAAE,MAAMF,EAAEuB,EAAE,CAAC,EAAEJ,EAAElB,GAAEsB,CAAC,EAAEK,EAAE,KAAK,IAAI,IAAI,IAAIT,EAAEA,EAAE,CAAC,GAAGpB,GAAEK,GAAEmB,EAAEA,EAAErB,EAAE,MAAM,EAASO,IAAP,MAAUJ,EAAEkB,EAAEA,EAAEd,CAAC,EAAEkB,GAAEJ,EAAEA,CAAC,EAAEjB,EAAE,IAAI,EAAE,MAAM,KAAK,QAAQ,EAAE,MAAM,KAAK,OAAO,GAAGY,GAAEK,EAAEA,EAAEX,EAAEZ,EAAE,GAAG,GAAG,KAAK,IAAI,GAAGA,EAAE,IAAI,CAAC,CAAC,EAAEiB,EAAEQ,CAAC,EAAEF,EAAE,CAAC,EAAEN,EAAEQ,EAAE,CAAC,EAAEF,EAAE,CAAC,EAAEN,EAAEQ,EAAE,CAAC,EAAEF,EAAE,CAAC,EAAEE,GAAG,EAAEjB,EAAE+C,CAAC,EAAE3B,EAAEpB,EAAE+C,EAAE,CAAC,EAAE3B,EAAEpB,EAAE+C,EAAE,CAAC,EAAE3B,EAAEpB,EAAE+C,EAAE,CAAC,EAAE,EAAEA,GAAG,CAAC,CAAChD,EAAE,WAAW,OAAO,IAAIa,GAAEH,CAAC,EAAEV,EAAE,WAAW,MAAM,IAAIuB,GAAEtB,CAAC,CAAC,CAAC,CAAC","names":["s","a","r","n","e","l","f","t","c","m","u","o","i","v","j","A","I","T","P","M","E","U","R","p","g","h","q","b","w","O","B","k","d","x","C","y","_b","_a","Y","Z","N","__vitePreload","ie","J","X","ee","$","re","te","se","H","_","z","G","V","K","L","Q","D","oe","S","F","W"],"ignoreList":[0,1,2,3],"sources":["../../node_modules/@arcgis/core/views/3d/glTF/internal/TextureTransformUtils.js","../../node_modules/@arcgis/core/views/3d/layers/graphics/ProcessedObjectResource.js","../../node_modules/@arcgis/core/views/3d/layers/graphics/wosrLoader.js","../../node_modules/@arcgis/core/views/3d/layers/graphics/objectResourceUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{fromValues as t,create as o}from\"../../../../core/libs/gl-matrix-2/factories/mat3f64.js\";import{ZEROS as r,ONES as l}from\"../../../../core/libs/gl-matrix-2/factories/vec2f32.js\";import{multiply as i}from\"../../../../core/libs/gl-matrix-2/math/mat3.js\";function s(s){if(null==s)return null;const a=null!=s.offset?s.offset:r,n=null!=s.rotation?s.rotation:0,e=null!=s.scale?s.scale:l,f=t(1,0,0,0,1,0,a[0],a[1],1),c=t(Math.cos(n),-Math.sin(n),0,Math.sin(n),Math.cos(n),0,0,0,1),m=t(e[0],0,0,0,e[1],0,0,0,1),u=o();return i(u,c,m),i(u,f,u),u}export{s as getTransformMatrix};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nclass s{constructor(){this.geometries=new Array,this.materials=new Array,this.textures=new Array}}class t{constructor(t,e,r){this.name=t,this.lodThreshold=e,this.pivotOffset=r,this.stageResources=new s,this.numberOfVertices=0}}export{t as ProcessedObjectResource,s as ProcessedObjectStageResources};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport e from\"../../../../request.js\";import{result as t}from\"../../../../core/asyncUtils.js\";import r from\"../../../../core/Error.js\";import n from\"../../../../core/Logger.js\";import{estimateNestedObjectMemory as s}from\"../../../../core/memoryEstimations.js\";import{NestedMap as o}from\"../../../../core/NestedMap.js\";import{throwIfAbortError as a}from\"../../../../core/promiseUtils.js\";import{Version as i}from\"../../../../core/Version.js\";import{fromArray as l}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{empty as u,expandWithVec3 as c}from\"../../../../geometry/support/aaBoundingBox.js\";import{getContinuousIndexArray as m}from\"../../../../geometry/support/Indices.js\";import{requestImage as p}from\"../../../../support/requestImageUtils.js\";import{Attribute as f}from\"../../webgl-engine/lib/Attribute.js\";import{CullFaceOptions as d,AlphaDiscardMode as g}from\"../../webgl-engine/lib/basicInterfaces.js\";import{Geometry as y}from\"../../webgl-engine/lib/Geometry.js\";import{Texture as w}from\"../../webgl-engine/lib/Texture.js\";import{VertexAttribute as b}from\"../../webgl-engine/lib/VertexAttribute.js\";import{DefaultMaterial as x}from\"../../webgl-engine/materials/DefaultMaterial.js\";import{TextureWrapMode as h}from\"../../../webgl/enums.js\";const v=()=>n.getLogger(\"esri.views.3d.layers.graphics.objectResourceUtils\");class j{constructor(e,t,r){this.resource=e,this.textures=t,this.cachedMemory=r}}async function A(e,t){const r=await I(e,t),n=await T(r.textureDefinitions??{},t);let o=0;for(const s in n)if(n.hasOwnProperty(s)){const e=n[s];o+=e?.image?e.image.width*e.image.height*4:0}return new j(r,n,o+s(r))}async function I(r,n){const s=n?.streamDataRequester;if(s)return P(r,s,n);const o=await t(e(r,n));if(!0===o.ok)return o.value.data;a(o.error),M(o.error)}async function P(e,r,n){const s=await t(r.request(e,\"json\",n));if(!0===s.ok)return s.value;a(s.error),M(s.error.details.url)}function M(e){throw new r(\"\",`Request for object resource failed: ${e}`)}function E(e){const t=e.params,r=t.topology;let n=!0;switch(t.vertexAttributes||(v().warn(\"Geometry must specify vertex attributes\"),n=!1),t.topology){case\"PerAttributeArray\":break;case\"Indexed\":case null:case void 0:{const e=t.faces;if(e){if(t.vertexAttributes)for(const r in t.vertexAttributes){const t=e[r];t?.values?(null!=t.valueType&&\"UInt32\"!==t.valueType&&(v().warn(`Unsupported indexed geometry indices type '${t.valueType}', only UInt32 is currently supported`),n=!1),null!=t.valuesPerElement&&1!==t.valuesPerElement&&(v().warn(`Unsupported indexed geometry values per element '${t.valuesPerElement}', only 1 is currently supported`),n=!1)):(v().warn(`Indexed geometry does not specify face indices for '${r}' attribute`),n=!1)}}else v().warn(\"Indexed geometries must specify faces\"),n=!1;break}default:v().warn(`Unsupported topology '${r}'`),n=!1}e.params.material||(v().warn(\"Geometry requires material\"),n=!1);const s=e.params.vertexAttributes;for(const o in s){s[o].values||(v().warn(\"Geometries with externally defined attributes are not yet supported\"),n=!1)}return n}function U(e,t){const r=new Array,n=new Array,s=new Array,a=new o,u=e.resource,c=i.parse(u.version||\"1.0\",\"wosr\");R.validate(c);const p=u.model.name,g=u.model.geometries,h=u.materialDefinitions??{},v=e.textures;let j=0;const A=new Map;for(let o=0;o<g.length;o++){const e=g[o];if(!E(e))continue;const i=q(e),u=e.params.vertexAttributes,c=[],p=t=>{if(\"PerAttributeArray\"===e.params.topology)return null;const r=e.params.faces;for(const e in r)if(e===t)return r[e].values;return null},I=u[b.POSITION],P=I.values.length/I.valuesPerElement;for(const t in u){const e=u[t],r=e.values,n=p(t)??m(P);c.push([t,new f(r,n,e.valuesPerElement,!0)])}const M=i.texture,U=v&&v[M];if(U&&!A.has(M)){const{image:e,parameters:t}=U,r=new w(e,t);n.push(r),A.set(M,r)}const O=A.get(M),T=O?O.id:void 0,R=i.material;let B=a.get(R,M);if(null==B){const e=h[R.slice(R.lastIndexOf(\"/\")+1)].params;1===e.transparency&&(e.transparency=0);const r=U?k(U.alphaChannelUsage):void 0,n={ambient:l(e.diffuse),diffuse:l(e.diffuse),opacity:1-(e.transparency||0),textureAlphaMode:r,textureAlphaCutoff:.33,textureId:T,doubleSided:!0,cullFace:d.None,colorMixMode:e.externalColorMixMode||\"tint\",textureAlphaPremultiplied:U?.parameters.preMultiplyAlpha??!1};t?.materialParameters&&Object.assign(n,t.materialParameters),B=new x(n,t),a.set(R,M,B)}s.push(B);const C=new y(B,c);j+=c.find((e=>e[0]===b.POSITION))?.[1]?.indices.length??0,r.push(C)}return{engineResources:[{name:p,stageResources:{textures:n,materials:s,geometries:r},pivotOffset:u.model.pivotOffset,numberOfVertices:j,lodThreshold:null}],referenceBoundingBox:O(r)}}function O(e){const t=u();return e.forEach((e=>{const r=e.boundingInfo;null!=r&&(c(t,r.bbMin),c(t,r.bbMax))})),t}async function T(e,t){const r=new Array;for(const o in e){const n=e[o],s=n.images[0].data;if(!s){v().warn(\"Externally referenced texture data is not yet supported\");continue}const a=n.encoding+\";base64,\"+s,i=\"/textureDefinitions/\"+o,l=\"rgba\"===n.channels?n.alphaChannelUsage||\"transparency\":\"none\",u={noUnpackFlip:!0,wrap:{s:h.REPEAT,t:h.REPEAT},preMultiplyAlpha:k(l)!==g.Opaque},c=t?.disableTextures?Promise.resolve(null):p(a,t);r.push(c.then((e=>({refId:i,image:e,parameters:u,alphaChannelUsage:l}))))}const n=await Promise.all(r),s={};for(const o of n)s[o.refId]=o;return s}function k(e){switch(e){case\"mask\":return g.Mask;case\"maskAndTransparency\":return g.MaskBlend;case\"none\":return g.Opaque;default:return g.Blend}}function q(e){const t=e.params;return{id:1,material:t.material,texture:t.texture,region:t.texture}}const R=new i(1,2,\"wosr\");export{j as LoaderResultWOSR,T as createTextureResources,A as load,U as processLoadResult};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{colorGamma as e}from\"../../../../colorUtils.js\";import{adjustStaticAGOUrl as r}from\"../../../../core/devEnvironmentUtils.js\";import{hasScaling as t}from\"../../../../core/mathUtils.js\";import{normalFromMat4 as o,fromMat4 as s}from\"../../../../core/libs/gl-matrix-2/math/mat3.js\";import{create as i}from\"../../../../core/libs/gl-matrix-2/factories/mat3f64.js\";import{invert as n}from\"../../../../core/libs/gl-matrix-2/math/mat4.js\";import{create as l}from\"../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{ONES as a}from\"../../../../core/libs/gl-matrix-2/factories/vec2f64.js\";import{t as u,d as c,D as m,l as f,n as d,m as p}from\"../../../../chunks/vec32.js\";import{create as g}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{empty as x,expandWithVec3 as T}from\"../../../../geometry/support/aaBoundingBox.js\";import{newFloatArray as b}from\"../../../../geometry/support/FloatArray.js\";import{BufferViewVec3f as h,BufferViewVec4f as y,BufferViewVec4u8 as w,BufferViewVec4u16 as v,BufferViewVec3u8 as R,BufferViewVec3u16 as j}from\"../../../../geometry/support/buffer/BufferView.js\";import{t as B,b as S,n as M,f as A}from\"../../../../chunks/vec3.js\";import{t as F,b as O}from\"../../../../chunks/vec4.js\";import{a as E}from\"../../../../chunks/vec2.js\";import{DefaultLoadingContext as I}from\"../../glTF/DefaultLoadingContext.js\";import{convertPrimitiveToTriangles as L}from\"../../glTF/internal/indexUtils.js\";import{isEncodedMeshTexture as C}from\"../../glTF/internal/resourceUtils.js\";import{getTransformMatrix as P}from\"../../glTF/internal/TextureTransformUtils.js\";import{ProcessedObjectResource as U}from\"./ProcessedObjectResource.js\";import{load as k,processLoadResult as N}from\"./wosrLoader.js\";import{NormalType as V}from\"../../webgl-engine/core/shaderLibrary/attributes/NormalAttribute.glsl.js\";import{Attribute as D}from\"../../webgl-engine/lib/Attribute.js\";import{AlphaDiscardMode as _,CullFaceOptions as q,DepthTestFunction as G}from\"../../webgl-engine/lib/basicInterfaces.js\";import{Geometry as W}from\"../../webgl-engine/lib/Geometry.js\";import{Texture as H}from\"../../webgl-engine/lib/Texture.js\";import{VertexAttribute as Q}from\"../../webgl-engine/lib/VertexAttribute.js\";import{DefaultMaterial as $}from\"../../webgl-engine/materials/DefaultMaterial.js\";import{useSchematicPBR as z,schematicMRRFactors as K,esriSymbologyMRRFactors as J,advancedMRRFactors as X}from\"../../webgl-engine/materials/pbrUtils.js\";async function Y(e,t){const o=Z(r(e));if(\"wosr\"===o.fileType){const e=await(t.cache?t.cache.loadWOSR(o.url,t):k(o.url,t)),{engineResources:r,referenceBoundingBox:s}=N(e,t);return{lods:r,referenceBoundingBox:s,isEsriSymbolResource:!1,isWosr:!0}}let s;if(t.cache)s=await t.cache.loadGLTF(o.url,t,!!t.usePBR);else{const{loadGLTF:e}=await import(\"../../glTF/loader.js\");s=await e(new I(t.streamDataRequester),o.url,t,t.usePBR)}const i=s.model.meta?.ESRI_proxyEllipsoid,n=s.meta.isEsriSymbolResource&&null!=i&&\"EsriRealisticTreesStyle\"===s.meta.ESRI_webstyle;n&&!s.customMeta.esriTreeRendering&&(s.customMeta.esriTreeRendering=!0,ie(s,i));const l=!!t.usePBR,a=s.meta.isEsriSymbolResource?{usePBR:l,isSchematic:!1,treeRendering:n,mrrFactors:J}:{usePBR:l,isSchematic:!1,treeRendering:!1,mrrFactors:X},u={...t.materialParameters,treeRendering:n},{engineResources:c,referenceBoundingBox:m}=ee(s,a,u,t,o.specifiedLodIndex,n);return{lods:c,referenceBoundingBox:m,isEsriSymbolResource:s.meta.isEsriSymbolResource,isWosr:!1}}function Z(e){const r=e.match(/(.*\\.(gltf|glb))(\\?lod=([0-9]+))?$/);if(r)return{fileType:\"gltf\",url:r[1],specifiedLodIndex:null!=r[4]?Number(r[4]):null};return e.match(/(.*\\.(json|json\\.gz))$/)?{fileType:\"wosr\",url:e,specifiedLodIndex:null}:{fileType:\"unknown\",url:e,specifiedLodIndex:null}}function ee(e,r,t,o,s,i){const n=e.model,l=new Array,a=new Map,u=new Map,c=n.lods.length,m=x();return n.lods.forEach(((e,f)=>{const d=!0===o.skipHighLods&&(c>1&&0===f||c>3&&1===f)||!1===o.skipHighLods&&null!=s&&f!==s;if(d&&0!==f)return;const p=new U(e.name,e.lodThreshold,[0,0,0]);e.parts.forEach((e=>{const s=d?new $({},o):re(n,e,p,r,t,a,u,o,i),{geometry:l,vertexCount:c}=te(e,s??new $({},o)),g=l.boundingInfo;null!=g&&0===f&&(T(m,g.bbMin),T(m,g.bbMax)),null!=s&&(p.stageResources.geometries.push(l),p.numberOfVertices+=c)})),d||l.push(p)})),{engineResources:l,referenceBoundingBox:m}}function re(r,t,o,s,i,n,l,u,c){const m=r.materials.get(t.material);if(null==m)return null;const{normal:f,color:d,texCoord0:p,tangent:g}=t.attributes,x=t.material+(f?\"_normal\":\"\")+(d?\"_color\":\"\")+(p?\"_texCoord0\":\"\")+(g?\"_tangent\":\"\"),T=null!=t.attributes.texCoord0,b=null!=t.attributes.normal,h=se(m.alphaMode);if(!n.has(x)){if(T){const e=(e,t=!1,o=!1)=>{if(null!=e&&!l.has(e)){const s=r.textures.get(e);if(s){const r=s.data,i=t&&!C(r)?u.compressionOptions:void 0;l.set(e,new H(C(r)?r.data:r,{...s.parameters,preMultiplyAlpha:!C(r)&&o,encoding:C(r)?r.encoding:void 0,compressionOptions:i}))}}},t=h!==_.Opaque&&!c;e(m.colorTexture,t,h!==_.Opaque),e(m.normalTexture),e(m.occlusionTexture,!0),e(m.emissiveTexture),e(m.metallicRoughnessTexture,!0)}const o=1/e,f=m.color[0]**o,d=m.color[1]**o,p=m.color[2]**o,g=m.emissiveFactor[0]**o,y=m.emissiveFactor[1]**o,w=m.emissiveFactor[2]**o,v=null!=m.colorTexture&&T?l.get(m.colorTexture):null,R=z(m),j=null!=m.normalTextureTransform?.scale?m.normalTextureTransform?.scale:a;n.set(x,new $({...s,customDepthTest:G.Lequal,textureAlphaMode:h,textureAlphaCutoff:m.alphaCutoff,diffuse:[f,d,p],ambient:[f,d,p],opacity:\"OPAQUE\"===m.alphaMode?1:m.opacity,doubleSided:m.doubleSided,doubleSidedType:\"winding-order\",cullFace:m.doubleSided?q.None:q.Back,hasVertexColors:!!t.attributes.color,hasVertexTangents:!!t.attributes.tangent,normalType:b?V.Attribute:V.ScreenDerivative,castShadows:!0,receiveShadows:m.receiveShadows,receiveAmbientOcclusion:m.receiveAmbientOcclusion,textureId:null!=v?v.id:void 0,colorMixMode:m.colorMixMode,normalTextureId:null!=m.normalTexture&&T?l.get(m.normalTexture).id:void 0,textureAlphaPremultiplied:null!=v&&!!v.parameters.preMultiplyAlpha,occlusionTextureId:null!=m.occlusionTexture&&T?l.get(m.occlusionTexture).id:void 0,emissiveTextureId:null!=m.emissiveTexture&&T?l.get(m.emissiveTexture).id:void 0,metallicRoughnessTextureId:null!=m.metallicRoughnessTexture&&T?l.get(m.metallicRoughnessTexture).id:void 0,emissiveBaseColor:[g,y,w],mrrFactors:R?K:[m.metallicFactor,m.roughnessFactor,s.mrrFactors[2]],isSchematic:R,colorTextureTransformMatrix:P(m.colorTextureTransform),normalTextureTransformMatrix:P(m.normalTextureTransform),scale:[j[0],j[1]],occlusionTextureTransformMatrix:P(m.occlusionTextureTransform),emissiveTextureTransformMatrix:P(m.emissiveTextureTransform),metallicRoughnessTextureTransformMatrix:P(m.metallicRoughnessTextureTransform),...i},u))}const y=n.get(x);if(o.stageResources.materials.push(y),T){const e=e=>{null!=e&&o.stageResources.textures.push(l.get(e))};e(m.colorTexture),e(m.normalTexture),e(m.occlusionTexture),e(m.emissiveTexture),e(m.metallicRoughnessTexture)}return y}function te(e,r){const i=e.attributes.position.count,n=L(e.indices||i,e.primitiveType),l=b(3*i),{typedBuffer:a,typedBufferStride:u}=e.attributes.position;B(l,a,e.transform,3,u);const c=[[Q.POSITION,new D(l,n,3,!0)]];if(null!=e.attributes.normal){const r=b(3*i),{typedBuffer:s,typedBufferStride:l}=e.attributes.normal;o(oe,e.transform),S(r,s,oe,3,l),t(oe)&&M(r,r),c.push([Q.NORMAL,new D(r,n,3,!0)])}if(null!=e.attributes.tangent){const r=b(4*i),{typedBuffer:o,typedBufferStride:l}=e.attributes.tangent;s(oe,e.transform),F(r,o,oe,4,l),t(oe)&&M(r,r,4),c.push([Q.TANGENT,new D(r,n,4,!0)])}if(null!=e.attributes.texCoord0){const r=b(2*i),{typedBuffer:t,typedBufferStride:o}=e.attributes.texCoord0;E(r,t,2,o),c.push([Q.UV0,new D(r,n,2,!0)])}const m=e.attributes.color;if(null!=m){const r=new Uint8Array(4*i);4===m.elementCount?m instanceof y?O(r,m,1,255):(m instanceof w||m instanceof v)&&O(r,m,1/255,255):(r.fill(255),m instanceof h?A(r,m.typedBuffer,1,255,4,m.typedBufferStride):(e.attributes.color instanceof R||e.attributes.color instanceof j)&&A(r,m.typedBuffer,1/255,255,4,e.attributes.color.typedBufferStride)),c.push([Q.COLOR,new D(r,n,4,!0)])}return{geometry:new W(r,c),vertexCount:i}}const oe=i();function se(e){switch(e){case\"BLEND\":return _.Blend;case\"MASK\":return _.Mask;case\"OPAQUE\":case null:case void 0:return _.Opaque}}function ie(r,t){for(let o=0;o<r.model.lods.length;++o){const s=r.model.lods[o];for(const i of s.parts){const s=i.attributes.normal;if(null==s)return;const a=i.attributes.position,x=a.count,T=g(),b=g(),w=g(),v=new Float32Array(4*x),R=new Float32Array(3*x),j=n(l(),i.transform);let B=0,S=0;for(let n=0;n<x;n++){a.getVec(n,b),s.getVec(n,T),u(b,b,i.transform),c(w,b,t.center),m(w,w,t.radius);const l=w[2],g=f(w),x=Math.min(.45+.55*g*g,1)**e;m(w,w,t.radius),null!==j&&u(w,w,j),d(w,w),o+1!==r.model.lods.length&&r.model.lods.length>1&&p(w,w,T,l>-1?.2:Math.min(-4*l-3.8,1)),R[B]=w[0],R[B+1]=w[1],R[B+2]=w[2],B+=3,v[S]=x,v[S+1]=x,v[S+2]=x,v[S+3]=1,S+=4}i.attributes.normal=new h(R),i.attributes.color=new y(v)}}}export{Y as fetch,Z as parseUrl};\n"],"file":"assets/objectResourceUtils-DXdR_zoy.js"}