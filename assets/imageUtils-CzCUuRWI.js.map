{"version":3,"file":"imageUtils-CzCUuRWI.js","sources":["../../node_modules/@arcgis/core/views/2d/engine/BitmapTile.js","../../node_modules/@arcgis/core/views/2d/engine/BitmapTileContainer.js","../../node_modules/@arcgis/core/views/2d/layers/BitmapTileLayerView2D.js","../../node_modules/@arcgis/core/views/2d/layers/support/imageUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{create as e}from\"../../../core/libs/gl-matrix-2/factories/mat3f32.js\";import{Bitmap as t}from\"./Bitmap.js\";import{TiledDisplayObject as s}from\"./webgl/TiledDisplayObject.js\";class r extends s{constructor(e,s,r,i,a,n,o=null){super(e,s,r,i,a,n),this.bitmap=new t(o),this.bitmap.coordScale=[a,n],this.bitmap.once(\"isReady\",(()=>this.ready()))}destroy(){super.destroy(),this.bitmap.destroy()}beforeRender(e){this.bitmap.beforeRender(e),super.beforeRender(e)}afterRender(e){this.bitmap.afterRender(e),super.afterRender(e)}set stencilRef(e){this.bitmap.stencilRef=e}get stencilRef(){return this.bitmap.stencilRef}_createTransforms(){return{displayViewScreenMat3:e(),tileMat3:e()}}setTransform(e){super.setTransform(e),this.bitmap.transforms.displayViewScreenMat3=this.transforms.displayViewScreenMat3}onAttach(){this.bitmap.stage=this.stage}onDetach(){this.bitmap&&(this.bitmap.stage=null)}}export{r as BitmapTile};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{create as e}from\"../../../geometry/support/aaBoundingRect.js\";import{BitmapTile as i}from\"./BitmapTile.js\";import{WGLDrawPhase as t}from\"./webgl/enums.js\";import n from\"./webgl/TileContainer.js\";import{BitmapTechnique as r}from\"./webgl/shaderGraph/techniques/bitmap/BitmapTechnique.js\";class s extends n{constructor(){super(...arguments),this._bitmapTechnique=null}get requiresDedicatedFBO(){return this.children.some((e=>\"additive\"===e.bitmap.blendFunction))}createTile(t){const n=this.tileInfoView.getTileBounds(e(),t),r=this.tileInfoView.getTileResolution(t.level),[s,o]=this.tileInfoView.tileInfo.size;return new i(t,r,n[0],n[3],s,o)}onAttach(){super.onAttach(),this._bitmapTechnique=new r}onDetach(){super.onDetach(),this._bitmapTechnique?.shutdown(),this._bitmapTechnique=null}renderChildren(e){if(super.renderChildren(e),!this.visible||e.drawPhase!==t.MAP||null==this._bitmapTechnique)return;const i=this.children.map((e=>e.bitmap));this._bitmapTechnique.render(e,{bitmaps:i})}}export{s as BitmapTileContainer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as i}from\"../../../chunks/tslib.es6.js\";import\"../../../core/Logger.js\";import\"../../../core/has.js\";import\"../../../core/RandomLCG.js\";import\"../../../core/Error.js\";import{subclass as e}from\"../../../core/accessorSupport/decorators/subclass.js\";import{BitmapTileContainer as t}from\"../engine/BitmapTileContainer.js\";const r=r=>{let s=class extends r{attach(){this.view.timeline.record(`${this.layer.title} (BitmapTileLayer) Attach`),this._bitmapView=new t(this._tileInfoView),this.container.addChild(this._bitmapView)}detach(){this.container.removeChild(this._bitmapView),this._bitmapView?.removeAllChildren(),this._bitmapView=null}};return s=i([e(\"esri.views.2d.layers.BitmapTileLayerView2D\")],s),s};export{r as BitmapTileLayerView2D};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nfunction e(e){return e instanceof HTMLImageElement?e.naturalWidth:e.width}function t(e){return e instanceof HTMLImageElement?e.naturalHeight:e.height}function n(n,l,r,u){if(r.level===u.level)return l;const i=n.tileInfo.size,a=n.getTileResolution(r.level),c=n.getTileResolution(u.level);let g=n.getLODInfoAt(u.level);const h=g.getXForColumn(u.col),d=g.getYForRow(u.row);g=n.getLODInfoAt(r.level);const f=g.getXForColumn(r.col),s=g.getYForRow(r.row),m=e(l)/i[0],v=t(l)/i[1],w=Math.round(m*((h-f)/a)),I=Math.round(v*(-(d-s)/a)),M=Math.round(m*i[0]*(c/a)),F=Math.round(v*i[1]*(c/a)),L=o(i);return L.getContext(\"2d\").drawImage(l,w,I,M,F,0,0,i[0],i[1]),L}function o(e){const t=document.createElement(\"canvas\");return[t.width,t.height]=e,t}export{o as createBlankImage,n as resampleImage};\n"],"names":["s","i","a","n","o","t","e","r","_a","l","u","c","g","h","d","f","m","v","w","I","M","F","L"],"mappings":"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","x_google_ignoreList":[0,1,2,3]}