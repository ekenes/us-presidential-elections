{"version":3,"file":"GaussianSplatLayer-DnWTA7Yk.js","sources":["../../node_modules/@arcgis/core/layers/GaussianSplatLayer.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as e}from\"tslib\";import t from\"../request.js\";import i from\"../core/Error.js\";import has from\"../core/has.js\";import r from\"../core/Logger.js\";import{MultiOriginJSONMixin as s}from\"../core/MultiOriginJSONSupport.js\";import{throwIfAbortError as o}from\"../core/promiseUtils.js\";import{property as a}from\"../core/accessorSupport/decorators/property.js\";import\"../core/RandomLCG.js\";import{subclass as l}from\"../core/accessorSupport/decorators/subclass.js\";import n from\"../geometry/Extent.js\";import p from\"../geometry/SpatialReference.js\";import m from\"./Layer.js\";import{APIKeyMixin as c}from\"./mixins/APIKeyMixin.js\";import{ArcGISService as u}from\"./mixins/ArcGISService.js\";import{CustomParametersMixin as y}from\"./mixins/CustomParametersMixin.js\";import{OperationalLayer as f}from\"./mixins/OperationalLayer.js\";import{PortalLayer as h}from\"./mixins/PortalLayer.js\";import{ScaleRangeLayer as d}from\"./mixins/ScaleRangeLayer.js\";import{url as S,elevationInfo as x}from\"./support/commonProperties.js\";import{hasEsriCrs as v,initFullExtent as j}from\"./support/tiles3DUtils.js\";import{logInvalidElevationInfoWarning as g,elevationModeRequiredMessage as w,featureExpressionUnsupportedMessage as R}from\"../support/elevationInfoUtils.js\";let E=class extends(u(f(h(d(s(y(c(m)))))))){constructor(e){super(e),this.operationalLayerType=\"GaussianSplatLayer\",this.type=\"gaussian-splat\",this.opacity=1,this.minScale=0,this.maxScale=0,this.url=null,this.rootTilesetJSON=null,this.fullExtent=new n(-180,-90,180,90,this.spatialReference),this.spatialReference=new p({wkid:4326,vcsWkid:115700}),this.esriCrsSpatialReference=null,this.esriCrsFullExtent=null}get supportedSpatialReferences(){return this.initialized&&this.esriCrsSpatialReference?[this.spatialReference,this.esriCrsSpatialReference]:[this.spatialReference]}get fullExtents(){return this.initialized&&this.esriCrsFullExtent?[this.fullExtent,this.esriCrsFullExtent]:[this.fullExtent]}set elevationInfo(e){null!=e&&\"absolute-height\"!==e.mode||this._set(\"elevationInfo\",e),this._validateElevationInfo(e)}async load(e){return this.addResolvingPromise(this._doLoad(e)),this}async _doLoad(e){const r=null!=e?e.signal:null;if(!has(\"enable-feature:gaussianSplatLayer\"))throw new i(\"GaussianSplatLayer-init:not-supported\",\"This layer is currently not supported.\");try{await this.loadFromPortal({supportedTypes:[\"3DTiles Service\"],validateItem:e=>{if(e.typeKeywords?.includes(\"GaussianSplat\"))return!0;throw new i(\"portal:invalid-layer-item-type\",\"Invalid layer item, expected '${expectedType}' \",{expectedType:\"3DTiles Service\"})}},e)}catch(s){o(s)}if(this.url){const e=t(this.url,{query:{...this.customParameters,token:this.apiKey},responseType:\"json\",signal:r}).then(e=>{this.rootTilesetJSON=e.data;const t=v(this.rootTilesetJSON);this.fullExtent=j(this.rootTilesetJSON,!1),this.spatialReference=this.fullExtent.spatialReference,t&&(this.esriCrsFullExtent=j(this.rootTilesetJSON,!0),this.esriCrsSpatialReference=this.esriCrsFullExtent.spatialReference)},e=>{o(e)});await e}}_validateElevationInfo(e){const t=\"Gaussian Splat layers\";g(r.getLogger(this),w(t,\"absolute-height\",e)),g(r.getLogger(this),R(t,e))}};e([a({type:[\"GaussianSplatLayer\"]})],E.prototype,\"operationalLayerType\",void 0),e([a({readOnly:!0})],E.prototype,\"type\",void 0),e([a({readOnly:!0,json:{read:!1,write:!1,origins:{service:{read:!1,write:!1},\"portal-item\":{read:!1,write:!1},\"web-document\":{read:!1,write:!1}}}})],E.prototype,\"opacity\",void 0),e([a({type:Number,json:{name:\"layerDefinition.minScale\",write:!0,origins:{service:{read:!1,write:!1}}}})],E.prototype,\"minScale\",void 0),e([a({type:Number,json:{name:\"layerDefinition.maxScale\",write:!0,origins:{service:{read:!1,write:!1}}}})],E.prototype,\"maxScale\",void 0),e([a(S)],E.prototype,\"url\",void 0),e([a({type:n})],E.prototype,\"fullExtent\",void 0),e([a({type:p})],E.prototype,\"spatialReference\",void 0),e([a({readOnly:!0})],E.prototype,\"supportedSpatialReferences\",null),e([a({type:[n]})],E.prototype,\"fullExtents\",null),e([a({type:[\"show\",\"hide\"]})],E.prototype,\"listMode\",void 0),e([a(x)],E.prototype,\"elevationInfo\",null),E=e([l(\"esri.layers.GaussianSplatLayer\")],E);const L=E;export{L as default};\n"],"names":["E","u","f","h","d","s","y","c","m","n","p","has","i","e","_a","o","t","v","j","g","r","w","R","a","S","x","l","L"],"mappings":"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","x_google_ignoreList":[0]}