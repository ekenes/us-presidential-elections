{"version":3,"file":"triangulationUtils-CzRaXNBT.js","sources":["../../node_modules/@arcgis/core/geometry/support/polygonUtils.js","../../node_modules/@arcgis/core/geometry/support/triangulationUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{deg2rad as r}from\"../../core/mathUtils.js\";import{getMetersPerUnitForSR as t,getMetersPerVerticalUnitForSR as o}from\"../../core/unitUtils.js\";import{i as s}from\"../../chunks/vec32.js\";import{Axis as i}from\"./Axis.js\";import{getNormal as a,create as n,fromManyPoints as m}from\"./plane.js\";function c(t,o,s){const n=e(f,t,o,s)?a(f):[0,0,1];return Math.abs(n[2])>Math.cos(r(80))?i.Z:Math.abs(n[1])>Math.abs(n[0])?i.Y:i.X}function e(r,i,a,n){const c=(r=>!Array.isArray(r[0]))(i)?(r,t)=>i[3*r+t]:(r,t)=>i[r][t],e=n?t(n)/o(n):1;return m(r,((r,t)=>s(r,c(t,0)*e,c(t,1)*e,c(t,2))),a)}const f=n();export{e as fitPlane,c as leastSignificantAxis};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{e as n}from\"../../chunks/earcut.js\";import{Axis as t}from\"./Axis.js\";import{isClockwise as e}from\"./coordsUtils.js\";import{doubleSubArray as o,doubleArrayFrom as r,newDoubleArray as s}from\"./DoubleArray.js\";import{compactMeshIndices as i}from\"./Indices.js\";import{leastSignificantAxis as l}from\"./polygonUtils.js\";import{deduplicate as c}from\"./meshUtils/deduplicate.js\";function f(t){const e=a(t.rings,t.hasZ,p.CCW_IS_HOLE,t.spatialReference),s=new Array;let l=0,f=0;for(const r of e.polygons){const t=r.count,c=r.index,h=o(e.position,3*c,3*t),a=r.holeIndices.map((n=>n-c)),g=i(n(h,a,3));s.push({position:h,faces:g}),l+=h.length,f+=g.length}const g=h(s,l,f),u=Array.isArray(g.position)?c(g.position,3,{originalIndices:g.faces}):c(g.position.buffer,6,{originalIndices:g.faces});return g.position=r(new Float64Array(u.buffer)),g.faces=u.indices,g}function h(n,t,e){if(1===n.length)return n[0];const o=s(t),r=new Array(e);let l=0,c=0,f=0;for(const s of n){for(let n=0;n<s.position.length;n++)o[l++]=s.position[n];for(const n of s.faces)r[c++]=n+f;f=l/3}return{position:o,faces:i(r)}}function a(n,t,e,o){const r=n.length,i=new Array(r),l=new Array(r),c=new Array(r);let f=0;for(let s=0;s<r;++s)f+=n[s].length;let h=0,a=0,m=0;const d=s(3*f);let y=0;for(let s=r-1;s>=0;s--){const f=n[s],A=e===p.CCW_IS_HOLE&&u(f,t,o);if(A&&1!==r)i[h++]=f;else{let n=f.length;for(let t=0;t<h;++t)n+=i[t].length;const e={index:y,pathLengths:new Array(h+1),count:n,holeIndices:new Array(h)};e.pathLengths[0]=f.length,f.length>0&&(c[m++]={index:y,count:f.length}),y=A?g(f,f.length-1,-1,d,y,f.length,t):g(f,0,1,d,y,f.length,t);for(let o=0;o<h;++o){const n=i[o];e.holeIndices[o]=y,e.pathLengths[o+1]=n.length,n.length>0&&(c[m++]={index:y,count:n.length}),y=g(n,0,1,d,y,n.length,t)}h=0,e.count>0&&(l[a++]=e)}}for(let s=0;s<h;++s){const n=i[s];n.length>0&&(c[m++]={index:y,count:n.length}),y=g(n,0,1,d,y,n.length,t)}return l.length=a,c.length=m,{position:d,polygons:l,outlines:c}}function g(n,t,e,o,r,s,i){r*=3;for(let l=0;l<s;++l){const s=n[t];o[r++]=s[0],o[r++]=s[1],o[r++]=i&&s[2]?s[2]:0,t+=e}return r/3}function u(n,o,r){if(!o)return!e(n);const s=n.length-1;switch(l(n,s,r)){case t.X:return!e(n,t.Y,t.Z);case t.Y:return!e(n,t.X,t.Z);case t.Z:return!e(n,t.X,t.Y)}}var p;!function(n){n[n.NONE=0]=\"NONE\",n[n.CCW_IS_HOLE=1]=\"CCW_IS_HOLE\"}(p||(p={}));export{p as CounterClockwiseMode,u as isCounterClockwise,a as ringsToTriangulationInfo,f as triangulate};\n"],"names":["c","t","s","n","e","f","a","r","i","o","m","p","l","h","g","u","d","y","A"],"mappings":"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","x_google_ignoreList":[0,1]}