import{I as u,cX as c,gF as y,K as f,aw as m,j0 as p,G as v,bR as P}from"./index-Wrx4-yWN.js";import{v as g}from"./PivotQuery-Cd36f_Ie.js";function l(r){const t=p(r),o=t.outPivots;if(o!=null&&o.length){for(const i of o)i.pivotType==="Pivot"&&i.pivotParameters.outStatistic?i.pivotParameters.outStatistic=JSON.stringify(i.pivotParameters.outStatistic):i.pivotType==="Unpivot"&&(i.unPivotParameters.sourceFields=i.unPivotParameters.sourceFields.join(","));t.outPivots=JSON.stringify(o)}return t}async function S(r,t,o){return await q(r,t,o)}async function q(r,t,o={}){const i=typeof r=="string"?u(r):r,a=t.geometry?[t.geometry]:[],e=await c(a,null,{signal:o.signal}),n=e==null?void 0:e[0];n!=null&&((t=t.clone()).geometry=n);const s=y({...i.query,f:"json",...l(t)});return f(m(i.path,"queryPivot"),{...o,query:{...s,...o.query}})}async function j(r,t,o){const i=v(r),a={...o},{data:e}=await S(i,g.from(t),a);return P.fromJSON(e)}export{j as executePivotQuery};
//# sourceMappingURL=executePivotQuery-DBxi2g54.js.map
