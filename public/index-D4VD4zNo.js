const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["public/statsWorker-BfgaaJku.js","public/utils-DpXU59aa.js","public/utils-D8IPV4YV.js","public/ClassBreaksDefinition-CJjYWNk6.js","public/geometryEngineWorker-BNwIbmiN.js","public/geometryEngineJSON-Dr6Udo8L.js","public/geometryEngineBase-DGkk6OIh.js","public/_commonjsHelpers-DCkdB7M8.js","public/json-Wa8cmqdu.js","public/CSVSourceWorker-C0BcdyR7.js","public/date-Ctp1FiBW.js","public/executeQueryForSnapping-PKePcB2d.js","public/queryUtils-BGyMZS4a.js","public/QueryEngine-TsFlpSIj.js","public/featureConversionUtils-BLFuUL7Y.js","public/WhereClauseCache-ylOMUZoU.js","public/WhereClause-C1avHq72.js","public/timeSupport-vfDfE2Sl.js","public/QueryEngineCapabilities-CsRUnGk7.js","public/SnappingCandidate-DGkpYqI6.js","public/FixedIntervalBinParameters-CEIeID8W.js","public/FeatureStore-Cti9SARH.js","public/BoundsStore-CYZORTgq.js","public/PooledRBush-DfDFQo23.js","public/optimizedFeatureQueryEngineAdapter-Cx2M6ZH0.js","public/number-BAQaoLqW.js","public/clientSideDefaults-DRUV-fWD.js","public/EdgeProcessingWorker-Be3YChZW.js","public/workerHelper-DSKHyl-Z.js","public/InterleavedLayout-DWm7gtgh.js","public/BufferView-BUUtgQNn.js","public/types-BKo2foNY.js","public/edgeProcessing-C4LsE97u.js","public/deduplicate-DNA3D_zm.js","public/Indices-15kDk-kP.js","public/VertexAttribute-BfkzOMLV.js","public/glUtil-DvenLSHW.js","public/VertexElementDescriptor-BLyltQyJ.js","public/Normals-mR50AFTk.js","public/ElevationSamplerWorker-B72ie5i3.js","public/MeshLocalVertexSpace-CpTyuzQk.js","public/vertexSpaceConversion-D2v7RzPB.js","public/mat3f64-B5o_lm6j.js","public/mat4f64-q_b6UJoq.js","public/spatialReferenceEllipsoidUtils-DB7eN8Aw.js","public/computeTranslationToOriginAndRotation-M70hdppV.js","public/projectPointToVector-82kIiIYp.js","public/meshVertexSpaceUtils-DnELB-jo.js","public/vec3-BIkME9u1.js","public/vec4-BpN_YXPs.js","public/FeatureServiceSnappingSourceWorker-Bxwl65-_.js","public/symbologySnappingCandidates-BNHimwfb.js","public/GeoJSONSourceWorker-gRHm8T60.js","public/geojson-CRnwnUZB.js","public/sourceUtils-DSiVXA0s.js","public/MemorySourceWorker-1QCDOso7.js","public/objectIdUtils-4dd1rf9p.js","public/PBFDecoderWorker-B1zC3uLp.js","public/dehydratedFeatures-DFrgnO9D.js","public/FeaturePipelineWorker-DRX3AZfu.js","public/AttributeStore-DUqQF19G.js","public/Utils-CwYu9fVX.js","public/UpdateTracking2D-Cx7OeP12.js","public/constants-BFLErLYb.js","public/streamLayerUtils-CKwt2uXH.js","public/MeshWriterRegistry-CEmtplS2.js","public/TechniqueType-pk2C5RYg.js","public/PieChartMeshWriter-B9KZfHz0.js","public/libtess-DClFzWwS.js","public/earcut-D9gy186-.js","public/QueueProcessor-DV3IiCoQ.js","public/operatorGeodeticDensify-Bt58XKs3.js","public/SimpleGeometryCursor-B92kdZ15.js","public/geodeticCurveType-CirnHLSB.js","public/normalizeUtilsSync-z61IGWL4.js","public/ogcFeatureUtils-C3uI2Pjv.js","public/bundle-B2FM5W1M.js","public/CircularArray-CujHzHWW.js","public/createConnection-CcHfmAgg.js","public/PointCloudWorker-deKED3gB.js","public/quat-CNLPSiKs.js","public/quatf64-aQ5IuZRd.js","public/vec3f32-WCVSSNPR.js","public/PointCloudUniqueValueRenderer-YvgYop8I.js","public/I3SBinaryReader-YI3zDnoN.js","public/orientedBoundingBox-Dus_puEc.js","public/plane-q77xQsnT.js","public/vectorStacks-m9D1q3yj.js","public/RasterWorker-B0kQSwgy.js","public/GeographicTransformation-w21crXYj.js","public/dataUtils-DEK3JpA7.js","public/RasterSymbolizer-CxJRPKbM.js","public/rasterFunctionHelper-D0qZGHxV.js","public/clipUtils-B9aaJ9vy.js","public/rasterProjectionHelper-DjuqKNf9.js","public/PolynomialTransform-DyEtM07s.js","public/SceneLayerSnappingSourceWorker-CEwcwkBS.js","public/lineSegment-CSXDFeMu.js","public/sphere-DO1GfJ7x.js","public/Octree-DQntAB3w.js","public/SceneLayerWorker-QvA1EQsE.js","public/projectVectorToVector-C1P4lDiB.js","public/I3SUtil-B4XEYYnC.js","public/edgeUtils-BALFn2qG.js","public/NormalAttribute.glsl-D0_s50Qe.js","public/glsl-Cj7KC756.js","public/ShaderOutput-Bdd80V3g.js","public/BindType-BBwFZqyN.js","public/WFSSourceWorker-Dr4ZGUt9.js","public/wfsUtils-iwqlAxZD.js","public/xmlUtils-CtUoQO7q.js","public/WorkerTileHandler-COOgsS6H.js","public/constants-BwsikM5h.js","public/config-DHajyIwB.js","public/StyleDefinition-fvJVTk_v.js","public/SourceLayerData-CQqgehLr.js","public/StyleRepository-D1lSldQZ.js","public/Feature3DPipelineWorker-3DUlKWFs.js","public/dehydratedFeatureUtils-DLFd0_NB.js","public/hydratedFeatures-Cq0x0Cb_.js","public/OutputColorHighlightOID.glsl-BCnxJSgi.js","public/videoUtils-Dudx_4LS.js","public/requestImageUtils-DUrf25up.js","public/basicInterfaces-N86vRvDz.js","public/TextureFormat-1mYWTFa-.js","public/triangle-LAjGjVOY.js","public/renderState-bLoVyLq7.js","public/boundedPlane-BbCKUZC0.js","public/HUDMaterial.glsl-74RFxowQ.js","public/ShaderBuilder-yHKcL4nl.js","public/HUDMaterial-nhWw46bZ.js","public/primitiveObjectSymbolUtils-Bf4Z4yFx.js","public/IntersectorType-gQim6TH1.js","public/RealisticTree.glsl-BCN5Tafw.js","public/TextureCompressionWorker-BowXcYHN.js","public/ElevationLayer-COoizbvc.js","public/ArcGISCachedService-CEAfK7Ie.js","public/TileInfoTilemapCache-q2QSba2W.js","public/TilemapCache-dzIE9ceu.js","public/WorkerHandle-Df0TyfOq.js","public/layersCreator-CXTaOhJI.js","public/loadUtils-Bc5xTXrq.js","public/fetchService-Z61s3Tf0.js","public/associatedFeatureServiceUtils-BxI9XOgw.js","public/lazyLayerLoader-D-nzvMm2.js","public/portalLayers-8LHZQikZ.js","public/arcgisLayers-Bvvin3WP.js","public/arcadeUtils-Boz8QJa3.js","public/arcade-B76PVFLZ.js","public/aiServices-Nm2lznYt.js","public/ImmutableArray-BPVd6ESQ.js","public/commonProperties-DHiB1uzW.js","public/unitConversion-BmFUfQou.js","public/batchExec-ClwYm-C4.js","public/webglDeps-5_lJRAuR.js","public/ProgramTemplate-9ReEHqO8.js","public/FramebufferObject-B_aTDpt2.js","public/NestedMap-BVvDppQU.js","public/mapViewDeps-Dvx3V1jo.js","public/FeatureCommandQueue-BjLMUsjM.js","public/GraphShaderModule-CYW9yTJt.js","public/utils-gCu9NUap.js","public/WGLContainer-CbbUOYAJ.js","public/Container-D_ItCh_g.js","public/SDFHelper-D_ozQkyF.js","public/GridShader-B7eXgwn6.js","public/testSVGPremultipliedAlpha-DTnttxJR.js","public/SymbolFader-Dn6gxzRO.js","public/RenderingContext-CQg4GmWV.js","public/utils-9LOcPsry.js","public/utils-ehcGqGxa.js","public/projectOperator-BjBfWWYx.js","public/GraphicsView2D-DxZu5nsi.js","public/GraphicContainer-C3U7Z0F_.js","public/AGraphicContainer-dRdBUq8e.js","public/TechniqueInstance-Bg_aQbB9.js","public/TileContainer-DailmOC3.js","public/gridUtils-BEzHlgSc.js","public/geodesicUtils-BwwnHzw2.js","public/TileLayerView2D-C53BzhvJ.js","public/imageUtils-wyYfq5TY.js","public/BitmapTechnique-BMwiztNk.js","public/bitmapUtils-Bm14A4OT.js","public/LayerView-DR-mJgTY.js","public/HighlightGraphicContainer-Dp9UyjdC.js","public/RefreshableLayerView-UV8lNd2Q.js","public/MapServiceLayerViewHelper-AzaQuvh7.js","public/drapedUtils-Dw-mYwC_.js","public/popupUtils-pZygZlDy.js","public/FeatureLayerView2D-BB9Q9a0s.js","public/timeSupport-8XvUAEWn.js","public/AttributeBinsFeatureSet-BGvpr9BV.js","public/AttributeBinsQuery-BaFq3gKY.js","public/constants-B4mRqufT.js","public/BaseDynamicLayerView2D-BVRriBeY.js","public/BitmapContainer-B-FXfrTt.js","public/ExportStrategy-JZVoYrjH.js","public/CatalogLayerView2D-bJZvox19.js","public/CatalogDynamicGroupLayerView2D-ChJFnHSK.js","public/CatalogFootprintLayerView2D-8i_8Fj2v.js","public/GeoRSSLayerView2D-N0umzZe1.js","public/GraphicsLayerView2D-4K9cdnAT.js","public/GroupLayerView2D-hiR7mymb.js","public/ImageryLayerView2D-B39aYkdF.js","public/RasterVFDisplayObject-ChZfnxd-.js","public/ImageryTileLayerView2D-0Ux0P5DW.js","public/rasterFieldUtils-BZfpiqFr.js","public/rasterUtils-DeWvpEJ1.js","public/RawBlockCache-Dl9_1TIL.js","public/KMLLayerView2D-Ck5Plu41.js","public/kmlUtils-DEMxRVrn.js","public/KnowledgeGraphLayerView2D-DasuKEKz.js","public/MapImageLayerView2D-DrBP1Nb6.js","public/MapNotesLayerView2D-DsibsD92.js","public/MediaLayerView2D-B7erUDeL.js","public/mediaLayerUtils-CuR90mMS.js","public/OverlayContainer-DhlSqfi4.js","public/OGCFeatureLayerView2D-1NMqJrTQ.js","public/RouteLayerView2D-Dxt7kx_A.js","public/Stop-DulbVcei.js","public/networkEnums-Cc6WPR-i.js","public/StreamLayerView2D-Co-kHqDn.js","public/SubtypeGroupLayerView2D-H7RuGHp1.js","public/VectorTileLayerView2D-xqgy3pTU.js","public/VideoLayerView2D-CFERQMuZ.js","public/GraphicsLayer-2Ecj3NWf.js","public/videoUtils-jNvqmKna.js","public/WMSLayerView2D-CN3k3fYe.js","public/ExportWMSImageParameters-BA6O9F8i.js","public/WMTSLayerView2D-CLXnUF7m.js","public/apng-DvSc2k6h.js","public/webdocSaveUtils-BAeCFjv1.js","public/originUtils-BwMvee0t.js","public/basemapUtils-Cr7NLGMK.js","public/resourceUtils-BPHPSm4K.js","public/resourceUtils-B3t1c9YU.js","public/saveUtils-C0AQkc9Z.js","public/layersLoader-K1mJ11g5.js","public/featureLayerUtils-DWHi-wb2.js","public/utils-B68HjyKb.js","public/FeatureLayerSource-C2ab-Bxt.js","public/External-ChsJLD1H.js","public/applyEditsUtils-DVnxazbY.js","public/MeshTransform-DecgNnDy.js","public/axisAngleDegrees-BytpTgX9.js","public/editingSupport-BIJLYcWa.js","public/QueryTask-FgNvtBw_.js","public/executeForIds-DXzt5glJ.js","public/queryAssociations-CmhW97nU.js","public/Association-BFypKxA3.js","public/synthesizeAssociationGeometries-D8Yd2TWX.js","public/chartUtilsAm5-Bu61VUJ4.js","public/Theme-GXGoN1TD.js","public/Tooltip-47EVX5UC.js","public/DefaultTheme-D_cP4qbv.js","public/chartCommon-CHQEIH-H.js","public/Button-D2Tb0TCb.js","public/ColorSet-CLSU2XRu.js","public/pieChart-DhSYOTzj.js","public/Tick-CF225QfR.js","public/xyChart-DjzIxuI9.js","public/arcade-Bxpv28MF.js","public/uniqueValues-DdXJfV1v.js","public/index-CtzIiGON.js","public/index-DINeeWEq.js","public/utils2-Dg63C5nY.js","public/index-ChUHMvrp.js","public/resources5-B8vQCAMP.js","public/intersectsOperator-B5AyFfPH.js","public/ProjectionTransformation-CPujtiMp.js","public/Envelope2D-DJjAtNGr.js","public/Point2D-BRB9V_5r.js","public/Transformation2D-CqNH2kL4.js","public/OperatorDefinitions-DP7_WWTp.js","public/jsonConverter-Cez7JSvr.js","public/OperatorIntersects-mFUtRQ79.js","public/apiConverter-DigAtd5k.js","public/proximityOperator-DnY04qV-.js","public/OperatorProximity-kz6DH_Yz.js","public/index-By5FDvLB.js"])))=>i.map(i=>d[i]);
var xxe=Object.getPrototypeOf;var Sxe=Reflect.get;var kJ=t=>{throw TypeError(t)};var J5=(t,e,i)=>e.has(t)||kJ("Cannot "+i);var Y=(t,e,i)=>(J5(t,e,"read from private field"),i?i.call(t):e.get(t)),Ye=(t,e,i)=>e.has(t)?kJ("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,i),Ue=(t,e,i,r)=>(J5(t,e,"write to private field"),r?r.call(t,i):e.set(t,i),i),yr=(t,e,i)=>(J5(t,e,"access private method"),i);var Yk=(t,e,i)=>Sxe(xxe(t),i,e);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function i(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(n){if(n.ep)return;n.ep=!0;const s=i(n);fetch(n.href,s)}})();function $xe(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Y5={exports:{}},OT={},X5={exports:{}},wi={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PJ;function Txe(){if(PJ)return wi;PJ=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),n=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;function y(ue){return ue===null||typeof ue!="object"?null:(ue=f&&ue[f]||ue["@@iterator"],typeof ue=="function"?ue:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,_={};function x(ue,Ne,Pt){this.props=ue,this.context=Ne,this.refs=_,this.updater=Pt||g}x.prototype.isReactComponent={},x.prototype.setState=function(ue,Ne){if(typeof ue!="object"&&typeof ue!="function"&&ue!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ue,Ne,"setState")},x.prototype.forceUpdate=function(ue){this.updater.enqueueForceUpdate(this,ue,"forceUpdate")};function E(){}E.prototype=x.prototype;function C(ue,Ne,Pt){this.props=ue,this.context=Ne,this.refs=_,this.updater=Pt||g}var k=C.prototype=new E;k.constructor=C,b(k,x.prototype),k.isPureReactComponent=!0;var O=Array.isArray,D=Object.prototype.hasOwnProperty,B={current:null},j={key:!0,ref:!0,__self:!0,__source:!0};function Z(ue,Ne,Pt){var Ot,Xt={},oi=null,vi=null;if(Ne!=null)for(Ot in Ne.ref!==void 0&&(vi=Ne.ref),Ne.key!==void 0&&(oi=""+Ne.key),Ne)D.call(Ne,Ot)&&!j.hasOwnProperty(Ot)&&(Xt[Ot]=Ne[Ot]);var ui=arguments.length-2;if(ui===1)Xt.children=Pt;else if(1<ui){for(var Qe=Array(ui),In=0;In<ui;In++)Qe[In]=arguments[In+2];Xt.children=Qe}if(ue&&ue.defaultProps)for(Ot in ui=ue.defaultProps,ui)Xt[Ot]===void 0&&(Xt[Ot]=ui[Ot]);return{$$typeof:t,type:ue,key:oi,ref:vi,props:Xt,_owner:B.current}}function X(ue,Ne){return{$$typeof:t,type:ue.type,key:Ne,ref:ue.ref,props:ue.props,_owner:ue._owner}}function ee(ue){return typeof ue=="object"&&ue!==null&&ue.$$typeof===t}function pe(ue){var Ne={"=":"=0",":":"=2"};return"$"+ue.replace(/[=:]/g,function(Pt){return Ne[Pt]})}var he=/\/+/g;function ne(ue,Ne){return typeof ue=="object"&&ue!==null&&ue.key!=null?pe(""+ue.key):Ne.toString(36)}function re(ue,Ne,Pt,Ot,Xt){var oi=typeof ue;(oi==="undefined"||oi==="boolean")&&(ue=null);var vi=!1;if(ue===null)vi=!0;else switch(oi){case"string":case"number":vi=!0;break;case"object":switch(ue.$$typeof){case t:case e:vi=!0}}if(vi)return vi=ue,Xt=Xt(vi),ue=Ot===""?"."+ne(vi,0):Ot,O(Xt)?(Pt="",ue!=null&&(Pt=ue.replace(he,"$&/")+"/"),re(Xt,Ne,Pt,"",function(In){return In})):Xt!=null&&(ee(Xt)&&(Xt=X(Xt,Pt+(!Xt.key||vi&&vi.key===Xt.key?"":(""+Xt.key).replace(he,"$&/")+"/")+ue)),Ne.push(Xt)),1;if(vi=0,Ot=Ot===""?".":Ot+":",O(ue))for(var ui=0;ui<ue.length;ui++){oi=ue[ui];var Qe=Ot+ne(oi,ui);vi+=re(oi,Ne,Pt,Qe,Xt)}else if(Qe=y(ue),typeof Qe=="function")for(ue=Qe.call(ue),ui=0;!(oi=ue.next()).done;)oi=oi.value,Qe=Ot+ne(oi,ui++),vi+=re(oi,Ne,Pt,Qe,Xt);else if(oi==="object")throw Ne=String(ue),Error("Objects are not valid as a React child (found: "+(Ne==="[object Object]"?"object with keys {"+Object.keys(ue).join(", ")+"}":Ne)+"). If you meant to render a collection of children, use an array instead.");return vi}function ke(ue,Ne,Pt){if(ue==null)return ue;var Ot=[],Xt=0;return re(ue,Ot,"","",function(oi){return Ne.call(Pt,oi,Xt++)}),Ot}function Fe(ue){if(ue._status===-1){var Ne=ue._result;Ne=Ne(),Ne.then(function(Pt){(ue._status===0||ue._status===-1)&&(ue._status=1,ue._result=Pt)},function(Pt){(ue._status===0||ue._status===-1)&&(ue._status=2,ue._result=Pt)}),ue._status===-1&&(ue._status=0,ue._result=Ne)}if(ue._status===1)return ue._result.default;throw ue._result}var Ae={current:null},we={transition:null},Re={ReactCurrentDispatcher:Ae,ReactCurrentBatchConfig:we,ReactCurrentOwner:B};function je(){throw Error("act(...) is not supported in production builds of React.")}return wi.Children={map:ke,forEach:function(ue,Ne,Pt){ke(ue,function(){Ne.apply(this,arguments)},Pt)},count:function(ue){var Ne=0;return ke(ue,function(){Ne++}),Ne},toArray:function(ue){return ke(ue,function(Ne){return Ne})||[]},only:function(ue){if(!ee(ue))throw Error("React.Children.only expected to receive a single React element child.");return ue}},wi.Component=x,wi.Fragment=i,wi.Profiler=n,wi.PureComponent=C,wi.StrictMode=r,wi.Suspense=l,wi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Re,wi.act=je,wi.cloneElement=function(ue,Ne,Pt){if(ue==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+ue+".");var Ot=b({},ue.props),Xt=ue.key,oi=ue.ref,vi=ue._owner;if(Ne!=null){if(Ne.ref!==void 0&&(oi=Ne.ref,vi=B.current),Ne.key!==void 0&&(Xt=""+Ne.key),ue.type&&ue.type.defaultProps)var ui=ue.type.defaultProps;for(Qe in Ne)D.call(Ne,Qe)&&!j.hasOwnProperty(Qe)&&(Ot[Qe]=Ne[Qe]===void 0&&ui!==void 0?ui[Qe]:Ne[Qe])}var Qe=arguments.length-2;if(Qe===1)Ot.children=Pt;else if(1<Qe){ui=Array(Qe);for(var In=0;In<Qe;In++)ui[In]=arguments[In+2];Ot.children=ui}return{$$typeof:t,type:ue.type,key:Xt,ref:oi,props:Ot,_owner:vi}},wi.createContext=function(ue){return ue={$$typeof:o,_currentValue:ue,_currentValue2:ue,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},ue.Provider={$$typeof:s,_context:ue},ue.Consumer=ue},wi.createElement=Z,wi.createFactory=function(ue){var Ne=Z.bind(null,ue);return Ne.type=ue,Ne},wi.createRef=function(){return{current:null}},wi.forwardRef=function(ue){return{$$typeof:a,render:ue}},wi.isValidElement=ee,wi.lazy=function(ue){return{$$typeof:d,_payload:{_status:-1,_result:ue},_init:Fe}},wi.memo=function(ue,Ne){return{$$typeof:c,type:ue,compare:Ne===void 0?null:Ne}},wi.startTransition=function(ue){var Ne=we.transition;we.transition={};try{ue()}finally{we.transition=Ne}},wi.unstable_act=je,wi.useCallback=function(ue,Ne){return Ae.current.useCallback(ue,Ne)},wi.useContext=function(ue){return Ae.current.useContext(ue)},wi.useDebugValue=function(){},wi.useDeferredValue=function(ue){return Ae.current.useDeferredValue(ue)},wi.useEffect=function(ue,Ne){return Ae.current.useEffect(ue,Ne)},wi.useId=function(){return Ae.current.useId()},wi.useImperativeHandle=function(ue,Ne,Pt){return Ae.current.useImperativeHandle(ue,Ne,Pt)},wi.useInsertionEffect=function(ue,Ne){return Ae.current.useInsertionEffect(ue,Ne)},wi.useLayoutEffect=function(ue,Ne){return Ae.current.useLayoutEffect(ue,Ne)},wi.useMemo=function(ue,Ne){return Ae.current.useMemo(ue,Ne)},wi.useReducer=function(ue,Ne,Pt){return Ae.current.useReducer(ue,Ne,Pt)},wi.useRef=function(ue){return Ae.current.useRef(ue)},wi.useState=function(ue){return Ae.current.useState(ue)},wi.useSyncExternalStore=function(ue,Ne,Pt){return Ae.current.useSyncExternalStore(ue,Ne,Pt)},wi.useTransition=function(){return Ae.current.useTransition()},wi.version="18.3.1",wi}var AJ;function $7(){return AJ||(AJ=1,X5.exports=Txe()),X5.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LJ;function Exe(){if(LJ)return OT;LJ=1;var t=$7(),e=Symbol.for("react.element"),i=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,n=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(a,l,c){var d,f={},y=null,g=null;c!==void 0&&(y=""+c),l.key!==void 0&&(y=""+l.key),l.ref!==void 0&&(g=l.ref);for(d in l)r.call(l,d)&&!s.hasOwnProperty(d)&&(f[d]=l[d]);if(a&&a.defaultProps)for(d in l=a.defaultProps,l)f[d]===void 0&&(f[d]=l[d]);return{$$typeof:e,type:a,key:y,ref:g,props:f,_owner:n.current}}return OT.Fragment=i,OT.jsx=o,OT.jsxs=o,OT}var RJ;function Ixe(){return RJ||(RJ=1,Y5.exports=Exe()),Y5.exports}var ae=Ixe(),Uf=$7();const mae=$xe(Uf);var Xk={},K5={exports:{}},ba={},Q5={exports:{}},ez={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OJ;function Cxe(){return OJ||(OJ=1,(function(t){function e(we,Re){var je=we.length;we.push(Re);e:for(;0<je;){var ue=je-1>>>1,Ne=we[ue];if(0<n(Ne,Re))we[ue]=Re,we[je]=Ne,je=ue;else break e}}function i(we){return we.length===0?null:we[0]}function r(we){if(we.length===0)return null;var Re=we[0],je=we.pop();if(je!==Re){we[0]=je;e:for(var ue=0,Ne=we.length,Pt=Ne>>>1;ue<Pt;){var Ot=2*(ue+1)-1,Xt=we[Ot],oi=Ot+1,vi=we[oi];if(0>n(Xt,je))oi<Ne&&0>n(vi,Xt)?(we[ue]=vi,we[oi]=je,ue=oi):(we[ue]=Xt,we[Ot]=je,ue=Ot);else if(oi<Ne&&0>n(vi,je))we[ue]=vi,we[oi]=je,ue=oi;else break e}}return Re}function n(we,Re){var je=we.sortIndex-Re.sortIndex;return je!==0?je:we.id-Re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,f=null,y=3,g=!1,b=!1,_=!1,x=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(we){for(var Re=i(c);Re!==null;){if(Re.callback===null)r(c);else if(Re.startTime<=we)r(c),Re.sortIndex=Re.expirationTime,e(l,Re);else break;Re=i(c)}}function O(we){if(_=!1,k(we),!b)if(i(l)!==null)b=!0,Fe(D);else{var Re=i(c);Re!==null&&Ae(O,Re.startTime-we)}}function D(we,Re){b=!1,_&&(_=!1,E(Z),Z=-1),g=!0;var je=y;try{for(k(Re),f=i(l);f!==null&&(!(f.expirationTime>Re)||we&&!pe());){var ue=f.callback;if(typeof ue=="function"){f.callback=null,y=f.priorityLevel;var Ne=ue(f.expirationTime<=Re);Re=t.unstable_now(),typeof Ne=="function"?f.callback=Ne:f===i(l)&&r(l),k(Re)}else r(l);f=i(l)}if(f!==null)var Pt=!0;else{var Ot=i(c);Ot!==null&&Ae(O,Ot.startTime-Re),Pt=!1}return Pt}finally{f=null,y=je,g=!1}}var B=!1,j=null,Z=-1,X=5,ee=-1;function pe(){return!(t.unstable_now()-ee<X)}function he(){if(j!==null){var we=t.unstable_now();ee=we;var Re=!0;try{Re=j(!0,we)}finally{Re?ne():(B=!1,j=null)}}else B=!1}var ne;if(typeof C=="function")ne=function(){C(he)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,ke=re.port2;re.port1.onmessage=he,ne=function(){ke.postMessage(null)}}else ne=function(){x(he,0)};function Fe(we){j=we,B||(B=!0,ne())}function Ae(we,Re){Z=x(function(){we(t.unstable_now())},Re)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(we){we.callback=null},t.unstable_continueExecution=function(){b||g||(b=!0,Fe(D))},t.unstable_forceFrameRate=function(we){0>we||125<we?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<we?Math.floor(1e3/we):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return i(l)},t.unstable_next=function(we){switch(y){case 1:case 2:case 3:var Re=3;break;default:Re=y}var je=y;y=Re;try{return we()}finally{y=je}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(we,Re){switch(we){case 1:case 2:case 3:case 4:case 5:break;default:we=3}var je=y;y=we;try{return Re()}finally{y=je}},t.unstable_scheduleCallback=function(we,Re,je){var ue=t.unstable_now();switch(typeof je=="object"&&je!==null?(je=je.delay,je=typeof je=="number"&&0<je?ue+je:ue):je=ue,we){case 1:var Ne=-1;break;case 2:Ne=250;break;case 5:Ne=1073741823;break;case 4:Ne=1e4;break;default:Ne=5e3}return Ne=je+Ne,we={id:d++,callback:Re,priorityLevel:we,startTime:je,expirationTime:Ne,sortIndex:-1},je>ue?(we.sortIndex=je,e(c,we),i(l)===null&&we===i(c)&&(_?(E(Z),Z=-1):_=!0,Ae(O,je-ue))):(we.sortIndex=Ne,e(l,we),b||g||(b=!0,Fe(D))),we},t.unstable_shouldYield=pe,t.unstable_wrapCallback=function(we){var Re=y;return function(){var je=y;y=Re;try{return we.apply(this,arguments)}finally{y=je}}}})(ez)),ez}var FJ;function Mxe(){return FJ||(FJ=1,Q5.exports=Cxe()),Q5.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NJ;function kxe(){if(NJ)return ba;NJ=1;var t=$7(),e=Mxe();function i(p){for(var m="https://reactjs.org/docs/error-decoder.html?invariant="+p,w=1;w<arguments.length;w++)m+="&args[]="+encodeURIComponent(arguments[w]);return"Minified React error #"+p+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,n={};function s(p,m){o(p,m),o(p+"Capture",m)}function o(p,m){for(n[p]=m,p=0;p<m.length;p++)r.add(m[p])}var a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,c=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},f={};function y(p){return l.call(f,p)?!0:l.call(d,p)?!1:c.test(p)?f[p]=!0:(d[p]=!0,!1)}function g(p,m,w,T){if(w!==null&&w.type===0)return!1;switch(typeof m){case"function":case"symbol":return!0;case"boolean":return T?!1:w!==null?!w.acceptsBooleans:(p=p.toLowerCase().slice(0,5),p!=="data-"&&p!=="aria-");default:return!1}}function b(p,m,w,T){if(m===null||typeof m>"u"||g(p,m,w,T))return!0;if(T)return!1;if(w!==null)switch(w.type){case 3:return!m;case 4:return m===!1;case 5:return isNaN(m);case 6:return isNaN(m)||1>m}return!1}function _(p,m,w,T,M,R,q){this.acceptsBooleans=m===2||m===3||m===4,this.attributeName=T,this.attributeNamespace=M,this.mustUseProperty=w,this.propertyName=p,this.type=m,this.sanitizeURL=R,this.removeEmptyString=q}var x={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(p){x[p]=new _(p,0,!1,p,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(p){var m=p[0];x[m]=new _(m,1,!1,p[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(p){x[p]=new _(p,2,!1,p.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(p){x[p]=new _(p,2,!1,p,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(p){x[p]=new _(p,3,!1,p.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(p){x[p]=new _(p,3,!0,p,null,!1,!1)}),["capture","download"].forEach(function(p){x[p]=new _(p,4,!1,p,null,!1,!1)}),["cols","rows","size","span"].forEach(function(p){x[p]=new _(p,6,!1,p,null,!1,!1)}),["rowSpan","start"].forEach(function(p){x[p]=new _(p,5,!1,p.toLowerCase(),null,!1,!1)});var E=/[\-:]([a-z])/g;function C(p){return p[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(p){var m=p.replace(E,C);x[m]=new _(m,1,!1,p,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(p){var m=p.replace(E,C);x[m]=new _(m,1,!1,p,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(p){var m=p.replace(E,C);x[m]=new _(m,1,!1,p,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(p){x[p]=new _(p,1,!1,p.toLowerCase(),null,!1,!1)}),x.xlinkHref=new _("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(p){x[p]=new _(p,1,!1,p.toLowerCase(),null,!0,!0)});function k(p,m,w,T){var M=x.hasOwnProperty(m)?x[m]:null;(M!==null?M.type!==0:T||!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(b(m,w,M,T)&&(w=null),T||M===null?y(m)&&(w===null?p.removeAttribute(m):p.setAttribute(m,""+w)):M.mustUseProperty?p[M.propertyName]=w===null?M.type===3?!1:"":w:(m=M.attributeName,T=M.attributeNamespace,w===null?p.removeAttribute(m):(M=M.type,w=M===3||M===4&&w===!0?"":""+w,T?p.setAttributeNS(T,m,w):p.setAttribute(m,w))))}var O=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,D=Symbol.for("react.element"),B=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),Z=Symbol.for("react.strict_mode"),X=Symbol.for("react.profiler"),ee=Symbol.for("react.provider"),pe=Symbol.for("react.context"),he=Symbol.for("react.forward_ref"),ne=Symbol.for("react.suspense"),re=Symbol.for("react.suspense_list"),ke=Symbol.for("react.memo"),Fe=Symbol.for("react.lazy"),Ae=Symbol.for("react.offscreen"),we=Symbol.iterator;function Re(p){return p===null||typeof p!="object"?null:(p=we&&p[we]||p["@@iterator"],typeof p=="function"?p:null)}var je=Object.assign,ue;function Ne(p){if(ue===void 0)try{throw Error()}catch(w){var m=w.stack.trim().match(/\n( *(at )?)/);ue=m&&m[1]||""}return`
`+ue+p}var Pt=!1;function Ot(p,m){if(!p||Pt)return"";Pt=!0;var w=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(m)if(m=function(){throw Error()},Object.defineProperty(m.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(m,[])}catch(Pe){var T=Pe}Reflect.construct(p,[],m)}else{try{m.call()}catch(Pe){T=Pe}p.call(m.prototype)}else{try{throw Error()}catch(Pe){T=Pe}p()}}catch(Pe){if(Pe&&T&&typeof Pe.stack=="string"){for(var M=Pe.stack.split(`
`),R=T.stack.split(`
`),q=M.length-1,te=R.length-1;1<=q&&0<=te&&M[q]!==R[te];)te--;for(;1<=q&&0<=te;q--,te--)if(M[q]!==R[te]){if(q!==1||te!==1)do if(q--,te--,0>te||M[q]!==R[te]){var le=`
`+M[q].replace(" at new "," at ");return p.displayName&&le.includes("<anonymous>")&&(le=le.replace("<anonymous>",p.displayName)),le}while(1<=q&&0<=te);break}}}finally{Pt=!1,Error.prepareStackTrace=w}return(p=p?p.displayName||p.name:"")?Ne(p):""}function Xt(p){switch(p.tag){case 5:return Ne(p.type);case 16:return Ne("Lazy");case 13:return Ne("Suspense");case 19:return Ne("SuspenseList");case 0:case 2:case 15:return p=Ot(p.type,!1),p;case 11:return p=Ot(p.type.render,!1),p;case 1:return p=Ot(p.type,!0),p;default:return""}}function oi(p){if(p==null)return null;if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p;switch(p){case j:return"Fragment";case B:return"Portal";case X:return"Profiler";case Z:return"StrictMode";case ne:return"Suspense";case re:return"SuspenseList"}if(typeof p=="object")switch(p.$$typeof){case pe:return(p.displayName||"Context")+".Consumer";case ee:return(p._context.displayName||"Context")+".Provider";case he:var m=p.render;return p=p.displayName,p||(p=m.displayName||m.name||"",p=p!==""?"ForwardRef("+p+")":"ForwardRef"),p;case ke:return m=p.displayName||null,m!==null?m:oi(p.type)||"Memo";case Fe:m=p._payload,p=p._init;try{return oi(p(m))}catch{}}return null}function vi(p){var m=p.type;switch(p.tag){case 24:return"Cache";case 9:return(m.displayName||"Context")+".Consumer";case 10:return(m._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return p=m.render,p=p.displayName||p.name||"",m.displayName||(p!==""?"ForwardRef("+p+")":"ForwardRef");case 7:return"Fragment";case 5:return m;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return oi(m);case 8:return m===Z?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof m=="function")return m.displayName||m.name||null;if(typeof m=="string")return m}return null}function ui(p){switch(typeof p){case"boolean":case"number":case"string":case"undefined":return p;case"object":return p;default:return""}}function Qe(p){var m=p.type;return(p=p.nodeName)&&p.toLowerCase()==="input"&&(m==="checkbox"||m==="radio")}function In(p){var m=Qe(p)?"checked":"value",w=Object.getOwnPropertyDescriptor(p.constructor.prototype,m),T=""+p[m];if(!p.hasOwnProperty(m)&&typeof w<"u"&&typeof w.get=="function"&&typeof w.set=="function"){var M=w.get,R=w.set;return Object.defineProperty(p,m,{configurable:!0,get:function(){return M.call(this)},set:function(q){T=""+q,R.call(this,q)}}),Object.defineProperty(p,m,{enumerable:w.enumerable}),{getValue:function(){return T},setValue:function(q){T=""+q},stopTracking:function(){p._valueTracker=null,delete p[m]}}}}function Ao(p){p._valueTracker||(p._valueTracker=In(p))}function Vl(p){if(!p)return!1;var m=p._valueTracker;if(!m)return!0;var w=m.getValue(),T="";return p&&(T=Qe(p)?p.checked?"true":"false":p.value),p=T,p!==w?(m.setValue(p),!0):!1}function ro(p){if(p=p||(typeof document<"u"?document:void 0),typeof p>"u")return null;try{return p.activeElement||p.body}catch{return p.body}}function Lo(p,m){var w=m.checked;return je({},m,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:w??p._wrapperState.initialChecked})}function dd(p,m){var w=m.defaultValue==null?"":m.defaultValue,T=m.checked!=null?m.checked:m.defaultChecked;w=ui(m.value!=null?m.value:w),p._wrapperState={initialChecked:T,initialValue:w,controlled:m.type==="checkbox"||m.type==="radio"?m.checked!=null:m.value!=null}}function jl(p,m){m=m.checked,m!=null&&k(p,"checked",m,!1)}function ym(p,m){jl(p,m);var w=ui(m.value),T=m.type;if(w!=null)T==="number"?(w===0&&p.value===""||p.value!=w)&&(p.value=""+w):p.value!==""+w&&(p.value=""+w);else if(T==="submit"||T==="reset"){p.removeAttribute("value");return}m.hasOwnProperty("value")?gm(p,m.type,w):m.hasOwnProperty("defaultValue")&&gm(p,m.type,ui(m.defaultValue)),m.checked==null&&m.defaultChecked!=null&&(p.defaultChecked=!!m.defaultChecked)}function hd(p,m,w){if(m.hasOwnProperty("value")||m.hasOwnProperty("defaultValue")){var T=m.type;if(!(T!=="submit"&&T!=="reset"||m.value!==void 0&&m.value!==null))return;m=""+p._wrapperState.initialValue,w||m===p.value||(p.value=m),p.defaultValue=m}w=p.name,w!==""&&(p.name=""),p.defaultChecked=!!p._wrapperState.initialChecked,w!==""&&(p.name=w)}function gm(p,m,w){(m!=="number"||ro(p.ownerDocument)!==p)&&(w==null?p.defaultValue=""+p._wrapperState.initialValue:p.defaultValue!==""+w&&(p.defaultValue=""+w))}var Qa=Array.isArray;function Gn(p,m,w,T){if(p=p.options,m){m={};for(var M=0;M<w.length;M++)m["$"+w[M]]=!0;for(w=0;w<p.length;w++)M=m.hasOwnProperty("$"+p[w].value),p[w].selected!==M&&(p[w].selected=M),M&&T&&(p[w].defaultSelected=!0)}else{for(w=""+ui(w),m=null,M=0;M<p.length;M++){if(p[M].value===w){p[M].selected=!0,T&&(p[M].defaultSelected=!0);return}m!==null||p[M].disabled||(m=p[M])}m!==null&&(m.selected=!0)}}function vm(p,m){if(m.dangerouslySetInnerHTML!=null)throw Error(i(91));return je({},m,{value:void 0,defaultValue:void 0,children:""+p._wrapperState.initialValue})}function Yg(p,m){var w=m.value;if(w==null){if(w=m.children,m=m.defaultValue,w!=null){if(m!=null)throw Error(i(92));if(Qa(w)){if(1<w.length)throw Error(i(93));w=w[0]}m=w}m==null&&(m=""),w=m}p._wrapperState={initialValue:ui(w)}}function _p(p,m){var w=ui(m.value),T=ui(m.defaultValue);w!=null&&(w=""+w,w!==p.value&&(p.value=w),m.defaultValue==null&&p.defaultValue!==w&&(p.defaultValue=w)),T!=null&&(p.defaultValue=""+T)}function Xg(p){var m=p.textContent;m===p._wrapperState.initialValue&&m!==""&&m!==null&&(p.value=m)}function pd(p){switch(p){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Kg(p,m){return p==null||p==="http://www.w3.org/1999/xhtml"?pd(m):p==="http://www.w3.org/2000/svg"&&m==="foreignObject"?"http://www.w3.org/1999/xhtml":p}var fd,Cw=(function(p){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(m,w,T,M){MSApp.execUnsafeLocalFunction(function(){return p(m,w,T,M)})}:p})(function(p,m){if(p.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in p)p.innerHTML=m;else{for(fd=fd||document.createElement("div"),fd.innerHTML="<svg>"+m.valueOf().toString()+"</svg>",m=fd.firstChild;p.firstChild;)p.removeChild(p.firstChild);for(;m.firstChild;)p.appendChild(m.firstChild)}});function Bc(p,m){if(m){var w=p.firstChild;if(w&&w===p.lastChild&&w.nodeType===3){w.nodeValue=m;return}}p.textContent=m}var Gc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Qg=["Webkit","ms","Moz","O"];Object.keys(Gc).forEach(function(p){Qg.forEach(function(m){m=m+p.charAt(0).toUpperCase()+p.substring(1),Gc[m]=Gc[p]})});function ev(p,m,w){return m==null||typeof m=="boolean"||m===""?"":w||typeof m!="number"||m===0||Gc.hasOwnProperty(p)&&Gc[p]?(""+m).trim():m+"px"}function tv(p,m){p=p.style;for(var w in m)if(m.hasOwnProperty(w)){var T=w.indexOf("--")===0,M=ev(w,m[w],T);w==="float"&&(w="cssFloat"),T?p.setProperty(w,M):p[w]=M}}var bm=je({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wm(p,m){if(m){if(bm[p]&&(m.children!=null||m.dangerouslySetInnerHTML!=null))throw Error(i(137,p));if(m.dangerouslySetInnerHTML!=null){if(m.children!=null)throw Error(i(60));if(typeof m.dangerouslySetInnerHTML!="object"||!("__html"in m.dangerouslySetInnerHTML))throw Error(i(61))}if(m.style!=null&&typeof m.style!="object")throw Error(i(62))}}function _m(p,m){if(p.indexOf("-")===-1)return typeof m.is=="string";switch(p){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qc=null;function Hc(p){return p=p.target||p.srcElement||window,p.correspondingUseElement&&(p=p.correspondingUseElement),p.nodeType===3?p.parentNode:p}var Ul=null,Wc=null,Bl=null;function iv(p){if(p=wT(p)){if(typeof Ul!="function")throw Error(i(280));var m=p.stateNode;m&&(m=dk(m),Ul(p.stateNode,p.type,m))}}function xm(p){Wc?Bl?Bl.push(p):Bl=[p]:Wc=p}function Sm(){if(Wc){var p=Wc,m=Bl;if(Bl=Wc=null,iv(p),m)for(p=0;p<m.length;p++)iv(m[p])}}function rv(p,m){return p(m)}function Ce(){}var Ji=!1;function el(p,m,w){if(Ji)return p(m,w);Ji=!0;try{return rv(p,m,w)}finally{Ji=!1,(Wc!==null||Bl!==null)&&(Ce(),Sm())}}function Ro(p,m){var w=p.stateNode;if(w===null)return null;var T=dk(w);if(T===null)return null;w=T[m];e:switch(m){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(T=!T.disabled)||(p=p.type,T=!(p==="button"||p==="input"||p==="select"||p==="textarea")),p=!T;break e;default:p=!1}if(p)return null;if(w&&typeof w!="function")throw Error(i(231,m,typeof w));return w}var Os=!1;if(a)try{var Gl={};Object.defineProperty(Gl,"passive",{get:function(){Os=!0}}),window.addEventListener("test",Gl,Gl),window.removeEventListener("test",Gl,Gl)}catch{Os=!1}function mt(p,m,w,T,M,R,q,te,le){var Pe=Array.prototype.slice.call(arguments,3);try{m.apply(w,Pe)}catch(We){this.onError(We)}}var qn=!1,ha=null,ki=!1,Zc=null,tT={onError:function(p){qn=!0,ha=p}};function tl(p,m,w,T,M,R,q,te,le){qn=!1,ha=null,mt.apply(tT,arguments)}function il(p,m,w,T,M,R,q,te,le){if(tl.apply(this,arguments),qn){if(qn){var Pe=ha;qn=!1,ha=null}else throw Error(i(198));ki||(ki=!0,Zc=Pe)}}function Mt(p){var m=p,w=p;if(p.alternate)for(;m.return;)m=m.return;else{p=m;do m=p,(m.flags&4098)!==0&&(w=m.return),p=m.return;while(p)}return m.tag===3?w:null}function qt(p){if(p.tag===13){var m=p.memoizedState;if(m===null&&(p=p.alternate,p!==null&&(m=p.memoizedState)),m!==null)return m.dehydrated}return null}function nv(p){if(Mt(p)!==p)throw Error(i(188))}function Mw(p){var m=p.alternate;if(!m){if(m=Mt(p),m===null)throw Error(i(188));return m!==p?null:p}for(var w=p,T=m;;){var M=w.return;if(M===null)break;var R=M.alternate;if(R===null){if(T=M.return,T!==null){w=T;continue}break}if(M.child===R.child){for(R=M.child;R;){if(R===w)return nv(M),p;if(R===T)return nv(M),m;R=R.sibling}throw Error(i(188))}if(w.return!==T.return)w=M,T=R;else{for(var q=!1,te=M.child;te;){if(te===w){q=!0,w=M,T=R;break}if(te===T){q=!0,T=M,w=R;break}te=te.sibling}if(!q){for(te=R.child;te;){if(te===w){q=!0,w=R,T=M;break}if(te===T){q=!0,T=R,w=M;break}te=te.sibling}if(!q)throw Error(i(189))}}if(w.alternate!==T)throw Error(i(190))}if(w.tag!==3)throw Error(i(188));return w.stateNode.current===w?p:m}function kw(p){return p=Mw(p),p!==null?md(p):null}function md(p){if(p.tag===5||p.tag===6)return p;for(p=p.child;p!==null;){var m=md(p);if(m!==null)return m;p=p.sibling}return null}var yd=e.unstable_scheduleCallback,Pw=e.unstable_cancelCallback,sv=e.unstable_shouldYield,an=e.unstable_requestPaint,wr=e.unstable_now,Aw=e.unstable_getCurrentPriorityLevel,$m=e.unstable_ImmediatePriority,ov=e.unstable_UserBlockingPriority,Jc=e.unstable_NormalPriority,Lw=e.unstable_LowPriority,Tm=e.unstable_IdlePriority,Hn=null,pa=null;function av(p){if(pa&&typeof pa.onCommitFiberRoot=="function")try{pa.onCommitFiberRoot(Hn,p,void 0,(p.current.flags&128)===128)}catch{}}var Fs=Math.clz32?Math.clz32:Me,Em=Math.log,Q=Math.LN2;function Me(p){return p>>>=0,p===0?32:31-(Em(p)/Q|0)|0}var Ge=64,Et=4194304;function bi(p){switch(p&-p){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return p&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return p}}function Yi(p,m){var w=p.pendingLanes;if(w===0)return 0;var T=0,M=p.suspendedLanes,R=p.pingedLanes,q=w&268435455;if(q!==0){var te=q&~M;te!==0?T=bi(te):(R&=q,R!==0&&(T=bi(R)))}else q=w&~M,q!==0?T=bi(q):R!==0&&(T=bi(R));if(T===0)return 0;if(m!==0&&m!==T&&(m&M)===0&&(M=T&-T,R=m&-m,M>=R||M===16&&(R&4194240)!==0))return m;if((T&4)!==0&&(T|=w&16),m=p.entangledLanes,m!==0)for(p=p.entanglements,m&=T;0<m;)w=31-Fs(m),M=1<<w,T|=p[w],m&=~M;return T}function _r(p,m){switch(p){case 1:case 2:case 4:return m+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Cr(p,m){for(var w=p.suspendedLanes,T=p.pingedLanes,M=p.expirationTimes,R=p.pendingLanes;0<R;){var q=31-Fs(R),te=1<<q,le=M[q];le===-1?((te&w)===0||(te&T)!==0)&&(M[q]=_r(te,m)):le<=m&&(p.expiredLanes|=te),R&=~te}}function lv(p){return p=p.pendingLanes&-1073741825,p!==0?p:p&1073741824?1073741824:0}function cv(){var p=Ge;return Ge<<=1,(Ge&4194240)===0&&(Ge=64),p}function ql(p){for(var m=[],w=0;31>w;w++)m.push(p);return m}function Yc(p,m,w){p.pendingLanes|=m,m!==536870912&&(p.suspendedLanes=0,p.pingedLanes=0),p=p.eventTimes,m=31-Fs(m),p[m]=w}function gD(p,m){var w=p.pendingLanes&~m;p.pendingLanes=m,p.suspendedLanes=0,p.pingedLanes=0,p.expiredLanes&=m,p.mutableReadLanes&=m,p.entangledLanes&=m,m=p.entanglements;var T=p.eventTimes;for(p=p.expirationTimes;0<w;){var M=31-Fs(w),R=1<<M;m[M]=0,T[M]=-1,p[M]=-1,w&=~R}}function Rw(p,m){var w=p.entangledLanes|=m;for(p=p.entanglements;w;){var T=31-Fs(w),M=1<<T;M&m|p[T]&m&&(p[T]|=m),w&=~M}}var Oi=0;function Ow(p){return p&=-p,1<p?4<p?(p&268435455)!==0?16:536870912:4:1}var U2,iT,rT,B2,G2,Fw=!1,uv=[],gd=null,Hl=null,vd=null,Im=new Map,dv=new Map,rl=[],vD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function nT(p,m){switch(p){case"focusin":case"focusout":gd=null;break;case"dragenter":case"dragleave":Hl=null;break;case"mouseover":case"mouseout":vd=null;break;case"pointerover":case"pointerout":Im.delete(m.pointerId);break;case"gotpointercapture":case"lostpointercapture":dv.delete(m.pointerId)}}function Cm(p,m,w,T,M,R){return p===null||p.nativeEvent!==R?(p={blockedOn:m,domEventName:w,eventSystemFlags:T,nativeEvent:R,targetContainers:[M]},m!==null&&(m=wT(m),m!==null&&iT(m)),p):(p.eventSystemFlags|=T,m=p.targetContainers,M!==null&&m.indexOf(M)===-1&&m.push(M),p)}function bD(p,m,w,T,M){switch(m){case"focusin":return gd=Cm(gd,p,m,w,T,M),!0;case"dragenter":return Hl=Cm(Hl,p,m,w,T,M),!0;case"mouseover":return vd=Cm(vd,p,m,w,T,M),!0;case"pointerover":var R=M.pointerId;return Im.set(R,Cm(Im.get(R)||null,p,m,w,T,M)),!0;case"gotpointercapture":return R=M.pointerId,dv.set(R,Cm(dv.get(R)||null,p,m,w,T,M)),!0}return!1}function sT(p){var m=Tv(p.target);if(m!==null){var w=Mt(m);if(w!==null){if(m=w.tag,m===13){if(m=qt(w),m!==null){p.blockedOn=m,G2(p.priority,function(){rT(w)});return}}else if(m===3&&w.stateNode.current.memoizedState.isDehydrated){p.blockedOn=w.tag===3?w.stateNode.containerInfo:null;return}}}p.blockedOn=null}function hv(p){if(p.blockedOn!==null)return!1;for(var m=p.targetContainers;0<m.length;){var w=gv(p.domEventName,p.eventSystemFlags,m[0],p.nativeEvent);if(w===null){w=p.nativeEvent;var T=new w.constructor(w.type,w);qc=T,w.target.dispatchEvent(T),qc=null}else return m=wT(w),m!==null&&iT(m),p.blockedOn=w,!1;m.shift()}return!0}function q2(p,m,w){hv(p)&&w.delete(m)}function pv(){Fw=!1,gd!==null&&hv(gd)&&(gd=null),Hl!==null&&hv(Hl)&&(Hl=null),vd!==null&&hv(vd)&&(vd=null),Im.forEach(q2),dv.forEach(q2)}function bd(p,m){p.blockedOn===m&&(p.blockedOn=null,Fw||(Fw=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,pv)))}function fv(p){function m(M){return bd(M,p)}if(0<uv.length){bd(uv[0],p);for(var w=1;w<uv.length;w++){var T=uv[w];T.blockedOn===p&&(T.blockedOn=null)}}for(gd!==null&&bd(gd,p),Hl!==null&&bd(Hl,p),vd!==null&&bd(vd,p),Im.forEach(m),dv.forEach(m),w=0;w<rl.length;w++)T=rl[w],T.blockedOn===p&&(T.blockedOn=null);for(;0<rl.length&&(w=rl[0],w.blockedOn===null);)sT(w),w.blockedOn===null&&rl.shift()}var wd=O.ReactCurrentBatchConfig,mv=!0;function wD(p,m,w,T){var M=Oi,R=wd.transition;wd.transition=null;try{Oi=1,Nw(p,m,w,T)}finally{Oi=M,wd.transition=R}}function oT(p,m,w,T){var M=Oi,R=wd.transition;wd.transition=null;try{Oi=4,Nw(p,m,w,T)}finally{Oi=M,wd.transition=R}}function Nw(p,m,w,T){if(mv){var M=gv(p,m,w,T);if(M===null)zD(p,m,T,yv,w),nT(p,T);else if(bD(M,p,m,w,T))T.stopPropagation();else if(nT(p,T),m&4&&-1<vD.indexOf(p)){for(;M!==null;){var R=wT(M);if(R!==null&&U2(R),R=gv(p,m,w,T),R===null&&zD(p,m,T,yv,w),R===M)break;M=R}M!==null&&T.stopPropagation()}else zD(p,m,T,null,w)}}var yv=null;function gv(p,m,w,T){if(yv=null,p=Hc(T),p=Tv(p),p!==null)if(m=Mt(p),m===null)p=null;else if(w=m.tag,w===13){if(p=qt(m),p!==null)return p;p=null}else if(w===3){if(m.stateNode.current.memoizedState.isDehydrated)return m.tag===3?m.stateNode.containerInfo:null;p=null}else m!==p&&(p=null);return yv=p,null}function H2(p){switch(p){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Aw()){case $m:return 1;case ov:return 4;case Jc:case Lw:return 16;case Tm:return 536870912;default:return 16}default:return 16}}var _d=null,Wl=null,Dw=null;function W2(){if(Dw)return Dw;var p,m=Wl,w=m.length,T,M="value"in _d?_d.value:_d.textContent,R=M.length;for(p=0;p<w&&m[p]===M[p];p++);var q=w-p;for(T=1;T<=q&&m[w-T]===M[R-T];T++);return Dw=M.slice(p,1<T?1-T:void 0)}function zw(p){var m=p.keyCode;return"charCode"in p?(p=p.charCode,p===0&&m===13&&(p=13)):p=m,p===10&&(p=13),32<=p||p===13?p:0}function vv(){return!0}function aT(){return!1}function nr(p){function m(w,T,M,R,q){this._reactName=w,this._targetInst=M,this.type=T,this.nativeEvent=R,this.target=q,this.currentTarget=null;for(var te in p)p.hasOwnProperty(te)&&(w=p[te],this[te]=w?w(R):R[te]);return this.isDefaultPrevented=(R.defaultPrevented!=null?R.defaultPrevented:R.returnValue===!1)?vv:aT,this.isPropagationStopped=aT,this}return je(m.prototype,{preventDefault:function(){this.defaultPrevented=!0;var w=this.nativeEvent;w&&(w.preventDefault?w.preventDefault():typeof w.returnValue!="unknown"&&(w.returnValue=!1),this.isDefaultPrevented=vv)},stopPropagation:function(){var w=this.nativeEvent;w&&(w.stopPropagation?w.stopPropagation():typeof w.cancelBubble!="unknown"&&(w.cancelBubble=!0),this.isPropagationStopped=vv)},persist:function(){},isPersistent:vv}),m}var Mm={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(p){return p.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lT=nr(Mm),bv=je({},Mm,{view:0,detail:0}),_D=nr(bv),cT,uT,wv,Vw=je({},bv,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xv,button:0,buttons:0,relatedTarget:function(p){return p.relatedTarget===void 0?p.fromElement===p.srcElement?p.toElement:p.fromElement:p.relatedTarget},movementX:function(p){return"movementX"in p?p.movementX:(p!==wv&&(wv&&p.type==="mousemove"?(cT=p.screenX-wv.screenX,uT=p.screenY-wv.screenY):uT=cT=0,wv=p),cT)},movementY:function(p){return"movementY"in p?p.movementY:uT}}),dT=nr(Vw),jw=je({},Vw,{dataTransfer:0}),xp=nr(jw),Uw=je({},bv,{relatedTarget:0}),hT=nr(Uw),Z2=je({},Mm,{animationName:0,elapsedTime:0,pseudoElement:0}),J2=nr(Z2),Y2=je({},Mm,{clipboardData:function(p){return"clipboardData"in p?p.clipboardData:window.clipboardData}}),_v=nr(Y2),xD=je({},Mm,{data:0}),X2=nr(xD),SD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$D={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},TD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ED(p){var m=this.nativeEvent;return m.getModifierState?m.getModifierState(p):(p=TD[p])?!!m[p]:!1}function xv(){return ED}var ID=je({},bv,{key:function(p){if(p.key){var m=SD[p.key]||p.key;if(m!=="Unidentified")return m}return p.type==="keypress"?(p=zw(p),p===13?"Enter":String.fromCharCode(p)):p.type==="keydown"||p.type==="keyup"?$D[p.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xv,charCode:function(p){return p.type==="keypress"?zw(p):0},keyCode:function(p){return p.type==="keydown"||p.type==="keyup"?p.keyCode:0},which:function(p){return p.type==="keypress"?zw(p):p.type==="keydown"||p.type==="keyup"?p.keyCode:0}}),Bw=nr(ID),CD=je({},Vw,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gw=nr(CD),MD=je({},bv,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xv}),kD=nr(MD),K2=je({},Mm,{propertyName:0,elapsedTime:0,pseudoElement:0}),Sv=nr(K2),xd=je({},Vw,{deltaX:function(p){return"deltaX"in p?p.deltaX:"wheelDeltaX"in p?-p.wheelDeltaX:0},deltaY:function(p){return"deltaY"in p?p.deltaY:"wheelDeltaY"in p?-p.wheelDeltaY:"wheelDelta"in p?-p.wheelDelta:0},deltaZ:0,deltaMode:0}),Q2=nr(xd),pT=[9,13,27,32],fT=a&&"CompositionEvent"in window,$v=null;a&&"documentMode"in document&&($v=document.documentMode);var PD=a&&"TextEvent"in window&&!$v,ek=a&&(!fT||$v&&8<$v&&11>=$v),tk=" ",ik=!1;function rk(p,m){switch(p){case"keyup":return pT.indexOf(m.keyCode)!==-1;case"keydown":return m.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nk(p){return p=p.detail,typeof p=="object"&&"data"in p?p.data:null}var km=!1;function AD(p,m){switch(p){case"compositionend":return nk(m);case"keypress":return m.which!==32?null:(ik=!0,tk);case"textInput":return p=m.data,p===tk&&ik?null:p;default:return null}}function $(p,m){if(km)return p==="compositionend"||!fT&&rk(p,m)?(p=W2(),Dw=Wl=_d=null,km=!1,p):null;switch(p){case"paste":return null;case"keypress":if(!(m.ctrlKey||m.altKey||m.metaKey)||m.ctrlKey&&m.altKey){if(m.char&&1<m.char.length)return m.char;if(m.which)return String.fromCharCode(m.which)}return null;case"compositionend":return ek&&m.locale!=="ko"?null:m.data;default:return null}}var S={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function I(p){var m=p&&p.nodeName&&p.nodeName.toLowerCase();return m==="input"?!!S[p.type]:m==="textarea"}function P(p,m,w,T){xm(T),m=lk(m,"onChange"),0<m.length&&(w=new lT("onChange","change",null,w,T),p.push({event:w,listeners:m}))}var F=null,z=null;function H(p){HW(p,0)}function W(p){var m=Jw(p);if(Vl(m))return p}function J(p,m){if(p==="change")return m}var oe=!1;if(a){var K;if(a){var ge="oninput"in document;if(!ge){var Le=document.createElement("div");Le.setAttribute("oninput","return;"),ge=typeof Le.oninput=="function"}K=ge}else K=!1;oe=K&&(!document.documentMode||9<document.documentMode)}function He(){F&&(F.detachEvent("onpropertychange",Be),z=F=null)}function Be(p){if(p.propertyName==="value"&&W(z)){var m=[];P(m,z,p,Hc(p)),el(H,m)}}function Xe(p,m,w){p==="focusin"?(He(),F=m,z=w,F.attachEvent("onpropertychange",Be)):p==="focusout"&&He()}function pt(p){if(p==="selectionchange"||p==="keyup"||p==="keydown")return W(z)}function st(p,m){if(p==="click")return W(m)}function It(p,m){if(p==="input"||p==="change")return W(m)}function ai(p,m){return p===m&&(p!==0||1/p===1/m)||p!==p&&m!==m}var Zt=typeof Object.is=="function"?Object.is:ai;function Dt(p,m){if(Zt(p,m))return!0;if(typeof p!="object"||p===null||typeof m!="object"||m===null)return!1;var w=Object.keys(p),T=Object.keys(m);if(w.length!==T.length)return!1;for(T=0;T<w.length;T++){var M=w[T];if(!l.call(m,M)||!Zt(p[M],m[M]))return!1}return!0}function li(p){for(;p&&p.firstChild;)p=p.firstChild;return p}function ms(p,m){var w=li(p);p=0;for(var T;w;){if(w.nodeType===3){if(T=p+w.textContent.length,p<=m&&T>=m)return{node:w,offset:m-p};p=T}e:{for(;w;){if(w.nextSibling){w=w.nextSibling;break e}w=w.parentNode}w=void 0}w=li(w)}}function mr(p,m){return p&&m?p===m?!0:p&&p.nodeType===3?!1:m&&m.nodeType===3?mr(p,m.parentNode):"contains"in p?p.contains(m):p.compareDocumentPosition?!!(p.compareDocumentPosition(m)&16):!1:!1}function no(){for(var p=window,m=ro();m instanceof p.HTMLIFrameElement;){try{var w=typeof m.contentWindow.location.href=="string"}catch{w=!1}if(w)p=m.contentWindow;else break;m=ro(p.document)}return m}function Oo(p){var m=p&&p.nodeName&&p.nodeName.toLowerCase();return m&&(m==="input"&&(p.type==="text"||p.type==="search"||p.type==="tel"||p.type==="url"||p.type==="password")||m==="textarea"||p.contentEditable==="true")}function Xc(p){var m=no(),w=p.focusedElem,T=p.selectionRange;if(m!==w&&w&&w.ownerDocument&&mr(w.ownerDocument.documentElement,w)){if(T!==null&&Oo(w)){if(m=T.start,p=T.end,p===void 0&&(p=m),"selectionStart"in w)w.selectionStart=m,w.selectionEnd=Math.min(p,w.value.length);else if(p=(m=w.ownerDocument||document)&&m.defaultView||window,p.getSelection){p=p.getSelection();var M=w.textContent.length,R=Math.min(T.start,M);T=T.end===void 0?R:Math.min(T.end,M),!p.extend&&R>T&&(M=T,T=R,R=M),M=ms(w,R);var q=ms(w,T);M&&q&&(p.rangeCount!==1||p.anchorNode!==M.node||p.anchorOffset!==M.offset||p.focusNode!==q.node||p.focusOffset!==q.offset)&&(m=m.createRange(),m.setStart(M.node,M.offset),p.removeAllRanges(),R>T?(p.addRange(m),p.extend(q.node,q.offset)):(m.setEnd(q.node,q.offset),p.addRange(m)))}}for(m=[],p=w;p=p.parentNode;)p.nodeType===1&&m.push({element:p,left:p.scrollLeft,top:p.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<m.length;w++)p=m[w],p.element.scrollLeft=p.left,p.element.scrollTop=p.top}}var qw=a&&"documentMode"in document&&11>=document.documentMode,Zl=null,LD=null,mT=null,RD=!1;function NW(p,m,w){var T=w.window===w?w.document:w.nodeType===9?w:w.ownerDocument;RD||Zl==null||Zl!==ro(T)||(T=Zl,"selectionStart"in T&&Oo(T)?T={start:T.selectionStart,end:T.selectionEnd}:(T=(T.ownerDocument&&T.ownerDocument.defaultView||window).getSelection(),T={anchorNode:T.anchorNode,anchorOffset:T.anchorOffset,focusNode:T.focusNode,focusOffset:T.focusOffset}),mT&&Dt(mT,T)||(mT=T,T=lk(LD,"onSelect"),0<T.length&&(m=new lT("onSelect","select",null,m,w),p.push({event:m,listeners:T}),m.target=Zl)))}function sk(p,m){var w={};return w[p.toLowerCase()]=m.toLowerCase(),w["Webkit"+p]="webkit"+m,w["Moz"+p]="moz"+m,w}var Hw={animationend:sk("Animation","AnimationEnd"),animationiteration:sk("Animation","AnimationIteration"),animationstart:sk("Animation","AnimationStart"),transitionend:sk("Transition","TransitionEnd")},OD={},DW={};a&&(DW=document.createElement("div").style,"AnimationEvent"in window||(delete Hw.animationend.animation,delete Hw.animationiteration.animation,delete Hw.animationstart.animation),"TransitionEvent"in window||delete Hw.transitionend.transition);function ok(p){if(OD[p])return OD[p];if(!Hw[p])return p;var m=Hw[p],w;for(w in m)if(m.hasOwnProperty(w)&&w in DW)return OD[p]=m[w];return p}var zW=ok("animationend"),VW=ok("animationiteration"),jW=ok("animationstart"),UW=ok("transitionend"),BW=new Map,GW="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pm(p,m){BW.set(p,m),s(m,[p])}for(var FD=0;FD<GW.length;FD++){var ND=GW[FD],P1e=ND.toLowerCase(),A1e=ND[0].toUpperCase()+ND.slice(1);Pm(P1e,"on"+A1e)}Pm(zW,"onAnimationEnd"),Pm(VW,"onAnimationIteration"),Pm(jW,"onAnimationStart"),Pm("dblclick","onDoubleClick"),Pm("focusin","onFocus"),Pm("focusout","onBlur"),Pm(UW,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yT="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),L1e=new Set("cancel close invalid load scroll toggle".split(" ").concat(yT));function qW(p,m,w){var T=p.type||"unknown-event";p.currentTarget=w,il(T,m,void 0,p),p.currentTarget=null}function HW(p,m){m=(m&4)!==0;for(var w=0;w<p.length;w++){var T=p[w],M=T.event;T=T.listeners;e:{var R=void 0;if(m)for(var q=T.length-1;0<=q;q--){var te=T[q],le=te.instance,Pe=te.currentTarget;if(te=te.listener,le!==R&&M.isPropagationStopped())break e;qW(M,te,Pe),R=le}else for(q=0;q<T.length;q++){if(te=T[q],le=te.instance,Pe=te.currentTarget,te=te.listener,le!==R&&M.isPropagationStopped())break e;qW(M,te,Pe),R=le}}}if(ki)throw p=Zc,ki=!1,Zc=null,p}function Mr(p,m){var w=m[qD];w===void 0&&(w=m[qD]=new Set);var T=p+"__bubble";w.has(T)||(WW(m,p,2,!1),w.add(T))}function DD(p,m,w){var T=0;m&&(T|=4),WW(w,p,T,m)}var ak="_reactListening"+Math.random().toString(36).slice(2);function gT(p){if(!p[ak]){p[ak]=!0,r.forEach(function(w){w!=="selectionchange"&&(L1e.has(w)||DD(w,!1,p),DD(w,!0,p))});var m=p.nodeType===9?p:p.ownerDocument;m===null||m[ak]||(m[ak]=!0,DD("selectionchange",!1,m))}}function WW(p,m,w,T){switch(H2(m)){case 1:var M=wD;break;case 4:M=oT;break;default:M=Nw}w=M.bind(null,m,w,p),M=void 0,!Os||m!=="touchstart"&&m!=="touchmove"&&m!=="wheel"||(M=!0),T?M!==void 0?p.addEventListener(m,w,{capture:!0,passive:M}):p.addEventListener(m,w,!0):M!==void 0?p.addEventListener(m,w,{passive:M}):p.addEventListener(m,w,!1)}function zD(p,m,w,T,M){var R=T;if((m&1)===0&&(m&2)===0&&T!==null)e:for(;;){if(T===null)return;var q=T.tag;if(q===3||q===4){var te=T.stateNode.containerInfo;if(te===M||te.nodeType===8&&te.parentNode===M)break;if(q===4)for(q=T.return;q!==null;){var le=q.tag;if((le===3||le===4)&&(le=q.stateNode.containerInfo,le===M||le.nodeType===8&&le.parentNode===M))return;q=q.return}for(;te!==null;){if(q=Tv(te),q===null)return;if(le=q.tag,le===5||le===6){T=R=q;continue e}te=te.parentNode}}T=T.return}el(function(){var Pe=R,We=Hc(w),Je=[];e:{var qe=BW.get(p);if(qe!==void 0){var ht=lT,wt=p;switch(p){case"keypress":if(zw(w)===0)break e;case"keydown":case"keyup":ht=Bw;break;case"focusin":wt="focus",ht=hT;break;case"focusout":wt="blur",ht=hT;break;case"beforeblur":case"afterblur":ht=hT;break;case"click":if(w.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ht=dT;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ht=xp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ht=kD;break;case zW:case VW:case jW:ht=J2;break;case UW:ht=Sv;break;case"scroll":ht=_D;break;case"wheel":ht=Q2;break;case"copy":case"cut":case"paste":ht=_v;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ht=Gw}var xt=(m&4)!==0,Cn=!xt&&p==="scroll",xe=xt?qe!==null?qe+"Capture":null:qe;xt=[];for(var me=Pe,Ee;me!==null;){Ee=me;var Ke=Ee.stateNode;if(Ee.tag===5&&Ke!==null&&(Ee=Ke,xe!==null&&(Ke=Ro(me,xe),Ke!=null&&xt.push(vT(me,Ke,Ee)))),Cn)break;me=me.return}0<xt.length&&(qe=new ht(qe,wt,null,w,We),Je.push({event:qe,listeners:xt}))}}if((m&7)===0){e:{if(qe=p==="mouseover"||p==="pointerover",ht=p==="mouseout"||p==="pointerout",qe&&w!==qc&&(wt=w.relatedTarget||w.fromElement)&&(Tv(wt)||wt[Sp]))break e;if((ht||qe)&&(qe=We.window===We?We:(qe=We.ownerDocument)?qe.defaultView||qe.parentWindow:window,ht?(wt=w.relatedTarget||w.toElement,ht=Pe,wt=wt?Tv(wt):null,wt!==null&&(Cn=Mt(wt),wt!==Cn||wt.tag!==5&&wt.tag!==6)&&(wt=null)):(ht=null,wt=Pe),ht!==wt)){if(xt=dT,Ke="onMouseLeave",xe="onMouseEnter",me="mouse",(p==="pointerout"||p==="pointerover")&&(xt=Gw,Ke="onPointerLeave",xe="onPointerEnter",me="pointer"),Cn=ht==null?qe:Jw(ht),Ee=wt==null?qe:Jw(wt),qe=new xt(Ke,me+"leave",ht,w,We),qe.target=Cn,qe.relatedTarget=Ee,Ke=null,Tv(We)===Pe&&(xt=new xt(xe,me+"enter",wt,w,We),xt.target=Ee,xt.relatedTarget=Cn,Ke=xt),Cn=Ke,ht&&wt)t:{for(xt=ht,xe=wt,me=0,Ee=xt;Ee;Ee=Ww(Ee))me++;for(Ee=0,Ke=xe;Ke;Ke=Ww(Ke))Ee++;for(;0<me-Ee;)xt=Ww(xt),me--;for(;0<Ee-me;)xe=Ww(xe),Ee--;for(;me--;){if(xt===xe||xe!==null&&xt===xe.alternate)break t;xt=Ww(xt),xe=Ww(xe)}xt=null}else xt=null;ht!==null&&ZW(Je,qe,ht,xt,!1),wt!==null&&Cn!==null&&ZW(Je,Cn,wt,xt,!0)}}e:{if(qe=Pe?Jw(Pe):window,ht=qe.nodeName&&qe.nodeName.toLowerCase(),ht==="select"||ht==="input"&&qe.type==="file")var St=J;else if(I(qe))if(oe)St=It;else{St=pt;var Ut=Xe}else(ht=qe.nodeName)&&ht.toLowerCase()==="input"&&(qe.type==="checkbox"||qe.type==="radio")&&(St=st);if(St&&(St=St(p,Pe))){P(Je,St,w,We);break e}Ut&&Ut(p,qe,Pe),p==="focusout"&&(Ut=qe._wrapperState)&&Ut.controlled&&qe.type==="number"&&gm(qe,"number",qe.value)}switch(Ut=Pe?Jw(Pe):window,p){case"focusin":(I(Ut)||Ut.contentEditable==="true")&&(Zl=Ut,LD=Pe,mT=null);break;case"focusout":mT=LD=Zl=null;break;case"mousedown":RD=!0;break;case"contextmenu":case"mouseup":case"dragend":RD=!1,NW(Je,w,We);break;case"selectionchange":if(qw)break;case"keydown":case"keyup":NW(Je,w,We)}var Bt;if(fT)e:{switch(p){case"compositionstart":var Kt="onCompositionStart";break e;case"compositionend":Kt="onCompositionEnd";break e;case"compositionupdate":Kt="onCompositionUpdate";break e}Kt=void 0}else km?rk(p,w)&&(Kt="onCompositionEnd"):p==="keydown"&&w.keyCode===229&&(Kt="onCompositionStart");Kt&&(ek&&w.locale!=="ko"&&(km||Kt!=="onCompositionStart"?Kt==="onCompositionEnd"&&km&&(Bt=W2()):(_d=We,Wl="value"in _d?_d.value:_d.textContent,km=!0)),Ut=lk(Pe,Kt),0<Ut.length&&(Kt=new X2(Kt,p,null,w,We),Je.push({event:Kt,listeners:Ut}),Bt?Kt.data=Bt:(Bt=nk(w),Bt!==null&&(Kt.data=Bt)))),(Bt=PD?AD(p,w):$(p,w))&&(Pe=lk(Pe,"onBeforeInput"),0<Pe.length&&(We=new X2("onBeforeInput","beforeinput",null,w,We),Je.push({event:We,listeners:Pe}),We.data=Bt))}HW(Je,m)})}function vT(p,m,w){return{instance:p,listener:m,currentTarget:w}}function lk(p,m){for(var w=m+"Capture",T=[];p!==null;){var M=p,R=M.stateNode;M.tag===5&&R!==null&&(M=R,R=Ro(p,w),R!=null&&T.unshift(vT(p,R,M)),R=Ro(p,m),R!=null&&T.push(vT(p,R,M))),p=p.return}return T}function Ww(p){if(p===null)return null;do p=p.return;while(p&&p.tag!==5);return p||null}function ZW(p,m,w,T,M){for(var R=m._reactName,q=[];w!==null&&w!==T;){var te=w,le=te.alternate,Pe=te.stateNode;if(le!==null&&le===T)break;te.tag===5&&Pe!==null&&(te=Pe,M?(le=Ro(w,R),le!=null&&q.unshift(vT(w,le,te))):M||(le=Ro(w,R),le!=null&&q.push(vT(w,le,te)))),w=w.return}q.length!==0&&p.push({event:m,listeners:q})}var R1e=/\r\n?/g,O1e=/\u0000|\uFFFD/g;function JW(p){return(typeof p=="string"?p:""+p).replace(R1e,`
`).replace(O1e,"")}function ck(p,m,w){if(m=JW(m),JW(p)!==m&&w)throw Error(i(425))}function uk(){}var VD=null,jD=null;function UD(p,m){return p==="textarea"||p==="noscript"||typeof m.children=="string"||typeof m.children=="number"||typeof m.dangerouslySetInnerHTML=="object"&&m.dangerouslySetInnerHTML!==null&&m.dangerouslySetInnerHTML.__html!=null}var BD=typeof setTimeout=="function"?setTimeout:void 0,F1e=typeof clearTimeout=="function"?clearTimeout:void 0,YW=typeof Promise=="function"?Promise:void 0,N1e=typeof queueMicrotask=="function"?queueMicrotask:typeof YW<"u"?function(p){return YW.resolve(null).then(p).catch(D1e)}:BD;function D1e(p){setTimeout(function(){throw p})}function GD(p,m){var w=m,T=0;do{var M=w.nextSibling;if(p.removeChild(w),M&&M.nodeType===8)if(w=M.data,w==="/$"){if(T===0){p.removeChild(M),fv(m);return}T--}else w!=="$"&&w!=="$?"&&w!=="$!"||T++;w=M}while(w);fv(m)}function Am(p){for(;p!=null;p=p.nextSibling){var m=p.nodeType;if(m===1||m===3)break;if(m===8){if(m=p.data,m==="$"||m==="$!"||m==="$?")break;if(m==="/$")return null}}return p}function XW(p){p=p.previousSibling;for(var m=0;p;){if(p.nodeType===8){var w=p.data;if(w==="$"||w==="$!"||w==="$?"){if(m===0)return p;m--}else w==="/$"&&m++}p=p.previousSibling}return null}var Zw=Math.random().toString(36).slice(2),Sd="__reactFiber$"+Zw,bT="__reactProps$"+Zw,Sp="__reactContainer$"+Zw,qD="__reactEvents$"+Zw,z1e="__reactListeners$"+Zw,V1e="__reactHandles$"+Zw;function Tv(p){var m=p[Sd];if(m)return m;for(var w=p.parentNode;w;){if(m=w[Sp]||w[Sd]){if(w=m.alternate,m.child!==null||w!==null&&w.child!==null)for(p=XW(p);p!==null;){if(w=p[Sd])return w;p=XW(p)}return m}p=w,w=p.parentNode}return null}function wT(p){return p=p[Sd]||p[Sp],!p||p.tag!==5&&p.tag!==6&&p.tag!==13&&p.tag!==3?null:p}function Jw(p){if(p.tag===5||p.tag===6)return p.stateNode;throw Error(i(33))}function dk(p){return p[bT]||null}var HD=[],Yw=-1;function Lm(p){return{current:p}}function kr(p){0>Yw||(p.current=HD[Yw],HD[Yw]=null,Yw--)}function xr(p,m){Yw++,HD[Yw]=p.current,p.current=m}var Rm={},so=Lm(Rm),fa=Lm(!1),Ev=Rm;function Xw(p,m){var w=p.type.contextTypes;if(!w)return Rm;var T=p.stateNode;if(T&&T.__reactInternalMemoizedUnmaskedChildContext===m)return T.__reactInternalMemoizedMaskedChildContext;var M={},R;for(R in w)M[R]=m[R];return T&&(p=p.stateNode,p.__reactInternalMemoizedUnmaskedChildContext=m,p.__reactInternalMemoizedMaskedChildContext=M),M}function ma(p){return p=p.childContextTypes,p!=null}function hk(){kr(fa),kr(so)}function KW(p,m,w){if(so.current!==Rm)throw Error(i(168));xr(so,m),xr(fa,w)}function QW(p,m,w){var T=p.stateNode;if(m=m.childContextTypes,typeof T.getChildContext!="function")return w;T=T.getChildContext();for(var M in T)if(!(M in m))throw Error(i(108,vi(p)||"Unknown",M));return je({},w,T)}function pk(p){return p=(p=p.stateNode)&&p.__reactInternalMemoizedMergedChildContext||Rm,Ev=so.current,xr(so,p),xr(fa,fa.current),!0}function eZ(p,m,w){var T=p.stateNode;if(!T)throw Error(i(169));w?(p=QW(p,m,Ev),T.__reactInternalMemoizedMergedChildContext=p,kr(fa),kr(so),xr(so,p)):kr(fa),xr(fa,w)}var $p=null,fk=!1,WD=!1;function tZ(p){$p===null?$p=[p]:$p.push(p)}function j1e(p){fk=!0,tZ(p)}function Om(){if(!WD&&$p!==null){WD=!0;var p=0,m=Oi;try{var w=$p;for(Oi=1;p<w.length;p++){var T=w[p];do T=T(!0);while(T!==null)}$p=null,fk=!1}catch(M){throw $p!==null&&($p=$p.slice(p+1)),yd($m,Om),M}finally{Oi=m,WD=!1}}return null}var Kw=[],Qw=0,mk=null,yk=0,Jl=[],Yl=0,Iv=null,Tp=1,Ep="";function Cv(p,m){Kw[Qw++]=yk,Kw[Qw++]=mk,mk=p,yk=m}function iZ(p,m,w){Jl[Yl++]=Tp,Jl[Yl++]=Ep,Jl[Yl++]=Iv,Iv=p;var T=Tp;p=Ep;var M=32-Fs(T)-1;T&=~(1<<M),w+=1;var R=32-Fs(m)+M;if(30<R){var q=M-M%5;R=(T&(1<<q)-1).toString(32),T>>=q,M-=q,Tp=1<<32-Fs(m)+M|w<<M|T,Ep=R+p}else Tp=1<<R|w<<M|T,Ep=p}function ZD(p){p.return!==null&&(Cv(p,1),iZ(p,1,0))}function JD(p){for(;p===mk;)mk=Kw[--Qw],Kw[Qw]=null,yk=Kw[--Qw],Kw[Qw]=null;for(;p===Iv;)Iv=Jl[--Yl],Jl[Yl]=null,Ep=Jl[--Yl],Jl[Yl]=null,Tp=Jl[--Yl],Jl[Yl]=null}var nl=null,sl=null,Dr=!1,Kc=null;function rZ(p,m){var w=ec(5,null,null,0);w.elementType="DELETED",w.stateNode=m,w.return=p,m=p.deletions,m===null?(p.deletions=[w],p.flags|=16):m.push(w)}function nZ(p,m){switch(p.tag){case 5:var w=p.type;return m=m.nodeType!==1||w.toLowerCase()!==m.nodeName.toLowerCase()?null:m,m!==null?(p.stateNode=m,nl=p,sl=Am(m.firstChild),!0):!1;case 6:return m=p.pendingProps===""||m.nodeType!==3?null:m,m!==null?(p.stateNode=m,nl=p,sl=null,!0):!1;case 13:return m=m.nodeType!==8?null:m,m!==null?(w=Iv!==null?{id:Tp,overflow:Ep}:null,p.memoizedState={dehydrated:m,treeContext:w,retryLane:1073741824},w=ec(18,null,null,0),w.stateNode=m,w.return=p,p.child=w,nl=p,sl=null,!0):!1;default:return!1}}function YD(p){return(p.mode&1)!==0&&(p.flags&128)===0}function XD(p){if(Dr){var m=sl;if(m){var w=m;if(!nZ(p,m)){if(YD(p))throw Error(i(418));m=Am(w.nextSibling);var T=nl;m&&nZ(p,m)?rZ(T,w):(p.flags=p.flags&-4097|2,Dr=!1,nl=p)}}else{if(YD(p))throw Error(i(418));p.flags=p.flags&-4097|2,Dr=!1,nl=p}}}function sZ(p){for(p=p.return;p!==null&&p.tag!==5&&p.tag!==3&&p.tag!==13;)p=p.return;nl=p}function gk(p){if(p!==nl)return!1;if(!Dr)return sZ(p),Dr=!0,!1;var m;if((m=p.tag!==3)&&!(m=p.tag!==5)&&(m=p.type,m=m!=="head"&&m!=="body"&&!UD(p.type,p.memoizedProps)),m&&(m=sl)){if(YD(p))throw oZ(),Error(i(418));for(;m;)rZ(p,m),m=Am(m.nextSibling)}if(sZ(p),p.tag===13){if(p=p.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(i(317));e:{for(p=p.nextSibling,m=0;p;){if(p.nodeType===8){var w=p.data;if(w==="/$"){if(m===0){sl=Am(p.nextSibling);break e}m--}else w!=="$"&&w!=="$!"&&w!=="$?"||m++}p=p.nextSibling}sl=null}}else sl=nl?Am(p.stateNode.nextSibling):null;return!0}function oZ(){for(var p=sl;p;)p=Am(p.nextSibling)}function e_(){sl=nl=null,Dr=!1}function KD(p){Kc===null?Kc=[p]:Kc.push(p)}var U1e=O.ReactCurrentBatchConfig;function _T(p,m,w){if(p=w.ref,p!==null&&typeof p!="function"&&typeof p!="object"){if(w._owner){if(w=w._owner,w){if(w.tag!==1)throw Error(i(309));var T=w.stateNode}if(!T)throw Error(i(147,p));var M=T,R=""+p;return m!==null&&m.ref!==null&&typeof m.ref=="function"&&m.ref._stringRef===R?m.ref:(m=function(q){var te=M.refs;q===null?delete te[R]:te[R]=q},m._stringRef=R,m)}if(typeof p!="string")throw Error(i(284));if(!w._owner)throw Error(i(290,p))}return p}function vk(p,m){throw p=Object.prototype.toString.call(m),Error(i(31,p==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":p))}function aZ(p){var m=p._init;return m(p._payload)}function lZ(p){function m(xe,me){if(p){var Ee=xe.deletions;Ee===null?(xe.deletions=[me],xe.flags|=16):Ee.push(me)}}function w(xe,me){if(!p)return null;for(;me!==null;)m(xe,me),me=me.sibling;return null}function T(xe,me){for(xe=new Map;me!==null;)me.key!==null?xe.set(me.key,me):xe.set(me.index,me),me=me.sibling;return xe}function M(xe,me){return xe=Bm(xe,me),xe.index=0,xe.sibling=null,xe}function R(xe,me,Ee){return xe.index=Ee,p?(Ee=xe.alternate,Ee!==null?(Ee=Ee.index,Ee<me?(xe.flags|=2,me):Ee):(xe.flags|=2,me)):(xe.flags|=1048576,me)}function q(xe){return p&&xe.alternate===null&&(xe.flags|=2),xe}function te(xe,me,Ee,Ke){return me===null||me.tag!==6?(me=B5(Ee,xe.mode,Ke),me.return=xe,me):(me=M(me,Ee),me.return=xe,me)}function le(xe,me,Ee,Ke){var St=Ee.type;return St===j?We(xe,me,Ee.props.children,Ke,Ee.key):me!==null&&(me.elementType===St||typeof St=="object"&&St!==null&&St.$$typeof===Fe&&aZ(St)===me.type)?(Ke=M(me,Ee.props),Ke.ref=_T(xe,me,Ee),Ke.return=xe,Ke):(Ke=Uk(Ee.type,Ee.key,Ee.props,null,xe.mode,Ke),Ke.ref=_T(xe,me,Ee),Ke.return=xe,Ke)}function Pe(xe,me,Ee,Ke){return me===null||me.tag!==4||me.stateNode.containerInfo!==Ee.containerInfo||me.stateNode.implementation!==Ee.implementation?(me=G5(Ee,xe.mode,Ke),me.return=xe,me):(me=M(me,Ee.children||[]),me.return=xe,me)}function We(xe,me,Ee,Ke,St){return me===null||me.tag!==7?(me=Fv(Ee,xe.mode,Ke,St),me.return=xe,me):(me=M(me,Ee),me.return=xe,me)}function Je(xe,me,Ee){if(typeof me=="string"&&me!==""||typeof me=="number")return me=B5(""+me,xe.mode,Ee),me.return=xe,me;if(typeof me=="object"&&me!==null){switch(me.$$typeof){case D:return Ee=Uk(me.type,me.key,me.props,null,xe.mode,Ee),Ee.ref=_T(xe,null,me),Ee.return=xe,Ee;case B:return me=G5(me,xe.mode,Ee),me.return=xe,me;case Fe:var Ke=me._init;return Je(xe,Ke(me._payload),Ee)}if(Qa(me)||Re(me))return me=Fv(me,xe.mode,Ee,null),me.return=xe,me;vk(xe,me)}return null}function qe(xe,me,Ee,Ke){var St=me!==null?me.key:null;if(typeof Ee=="string"&&Ee!==""||typeof Ee=="number")return St!==null?null:te(xe,me,""+Ee,Ke);if(typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case D:return Ee.key===St?le(xe,me,Ee,Ke):null;case B:return Ee.key===St?Pe(xe,me,Ee,Ke):null;case Fe:return St=Ee._init,qe(xe,me,St(Ee._payload),Ke)}if(Qa(Ee)||Re(Ee))return St!==null?null:We(xe,me,Ee,Ke,null);vk(xe,Ee)}return null}function ht(xe,me,Ee,Ke,St){if(typeof Ke=="string"&&Ke!==""||typeof Ke=="number")return xe=xe.get(Ee)||null,te(me,xe,""+Ke,St);if(typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case D:return xe=xe.get(Ke.key===null?Ee:Ke.key)||null,le(me,xe,Ke,St);case B:return xe=xe.get(Ke.key===null?Ee:Ke.key)||null,Pe(me,xe,Ke,St);case Fe:var Ut=Ke._init;return ht(xe,me,Ee,Ut(Ke._payload),St)}if(Qa(Ke)||Re(Ke))return xe=xe.get(Ee)||null,We(me,xe,Ke,St,null);vk(me,Ke)}return null}function wt(xe,me,Ee,Ke){for(var St=null,Ut=null,Bt=me,Kt=me=0,vs=null;Bt!==null&&Kt<Ee.length;Kt++){Bt.index>Kt?(vs=Bt,Bt=null):vs=Bt.sibling;var Fi=qe(xe,Bt,Ee[Kt],Ke);if(Fi===null){Bt===null&&(Bt=vs);break}p&&Bt&&Fi.alternate===null&&m(xe,Bt),me=R(Fi,me,Kt),Ut===null?St=Fi:Ut.sibling=Fi,Ut=Fi,Bt=vs}if(Kt===Ee.length)return w(xe,Bt),Dr&&Cv(xe,Kt),St;if(Bt===null){for(;Kt<Ee.length;Kt++)Bt=Je(xe,Ee[Kt],Ke),Bt!==null&&(me=R(Bt,me,Kt),Ut===null?St=Bt:Ut.sibling=Bt,Ut=Bt);return Dr&&Cv(xe,Kt),St}for(Bt=T(xe,Bt);Kt<Ee.length;Kt++)vs=ht(Bt,xe,Kt,Ee[Kt],Ke),vs!==null&&(p&&vs.alternate!==null&&Bt.delete(vs.key===null?Kt:vs.key),me=R(vs,me,Kt),Ut===null?St=vs:Ut.sibling=vs,Ut=vs);return p&&Bt.forEach(function(Gm){return m(xe,Gm)}),Dr&&Cv(xe,Kt),St}function xt(xe,me,Ee,Ke){var St=Re(Ee);if(typeof St!="function")throw Error(i(150));if(Ee=St.call(Ee),Ee==null)throw Error(i(151));for(var Ut=St=null,Bt=me,Kt=me=0,vs=null,Fi=Ee.next();Bt!==null&&!Fi.done;Kt++,Fi=Ee.next()){Bt.index>Kt?(vs=Bt,Bt=null):vs=Bt.sibling;var Gm=qe(xe,Bt,Fi.value,Ke);if(Gm===null){Bt===null&&(Bt=vs);break}p&&Bt&&Gm.alternate===null&&m(xe,Bt),me=R(Gm,me,Kt),Ut===null?St=Gm:Ut.sibling=Gm,Ut=Gm,Bt=vs}if(Fi.done)return w(xe,Bt),Dr&&Cv(xe,Kt),St;if(Bt===null){for(;!Fi.done;Kt++,Fi=Ee.next())Fi=Je(xe,Fi.value,Ke),Fi!==null&&(me=R(Fi,me,Kt),Ut===null?St=Fi:Ut.sibling=Fi,Ut=Fi);return Dr&&Cv(xe,Kt),St}for(Bt=T(xe,Bt);!Fi.done;Kt++,Fi=Ee.next())Fi=ht(Bt,xe,Kt,Fi.value,Ke),Fi!==null&&(p&&Fi.alternate!==null&&Bt.delete(Fi.key===null?Kt:Fi.key),me=R(Fi,me,Kt),Ut===null?St=Fi:Ut.sibling=Fi,Ut=Fi);return p&&Bt.forEach(function(_xe){return m(xe,_xe)}),Dr&&Cv(xe,Kt),St}function Cn(xe,me,Ee,Ke){if(typeof Ee=="object"&&Ee!==null&&Ee.type===j&&Ee.key===null&&(Ee=Ee.props.children),typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case D:e:{for(var St=Ee.key,Ut=me;Ut!==null;){if(Ut.key===St){if(St=Ee.type,St===j){if(Ut.tag===7){w(xe,Ut.sibling),me=M(Ut,Ee.props.children),me.return=xe,xe=me;break e}}else if(Ut.elementType===St||typeof St=="object"&&St!==null&&St.$$typeof===Fe&&aZ(St)===Ut.type){w(xe,Ut.sibling),me=M(Ut,Ee.props),me.ref=_T(xe,Ut,Ee),me.return=xe,xe=me;break e}w(xe,Ut);break}else m(xe,Ut);Ut=Ut.sibling}Ee.type===j?(me=Fv(Ee.props.children,xe.mode,Ke,Ee.key),me.return=xe,xe=me):(Ke=Uk(Ee.type,Ee.key,Ee.props,null,xe.mode,Ke),Ke.ref=_T(xe,me,Ee),Ke.return=xe,xe=Ke)}return q(xe);case B:e:{for(Ut=Ee.key;me!==null;){if(me.key===Ut)if(me.tag===4&&me.stateNode.containerInfo===Ee.containerInfo&&me.stateNode.implementation===Ee.implementation){w(xe,me.sibling),me=M(me,Ee.children||[]),me.return=xe,xe=me;break e}else{w(xe,me);break}else m(xe,me);me=me.sibling}me=G5(Ee,xe.mode,Ke),me.return=xe,xe=me}return q(xe);case Fe:return Ut=Ee._init,Cn(xe,me,Ut(Ee._payload),Ke)}if(Qa(Ee))return wt(xe,me,Ee,Ke);if(Re(Ee))return xt(xe,me,Ee,Ke);vk(xe,Ee)}return typeof Ee=="string"&&Ee!==""||typeof Ee=="number"?(Ee=""+Ee,me!==null&&me.tag===6?(w(xe,me.sibling),me=M(me,Ee),me.return=xe,xe=me):(w(xe,me),me=B5(Ee,xe.mode,Ke),me.return=xe,xe=me),q(xe)):w(xe,me)}return Cn}var t_=lZ(!0),cZ=lZ(!1),bk=Lm(null),wk=null,i_=null,QD=null;function e5(){QD=i_=wk=null}function t5(p){var m=bk.current;kr(bk),p._currentValue=m}function i5(p,m,w){for(;p!==null;){var T=p.alternate;if((p.childLanes&m)!==m?(p.childLanes|=m,T!==null&&(T.childLanes|=m)):T!==null&&(T.childLanes&m)!==m&&(T.childLanes|=m),p===w)break;p=p.return}}function r_(p,m){wk=p,QD=i_=null,p=p.dependencies,p!==null&&p.firstContext!==null&&((p.lanes&m)!==0&&(ya=!0),p.firstContext=null)}function Xl(p){var m=p._currentValue;if(QD!==p)if(p={context:p,memoizedValue:m,next:null},i_===null){if(wk===null)throw Error(i(308));i_=p,wk.dependencies={lanes:0,firstContext:p}}else i_=i_.next=p;return m}var Mv=null;function r5(p){Mv===null?Mv=[p]:Mv.push(p)}function uZ(p,m,w,T){var M=m.interleaved;return M===null?(w.next=w,r5(m)):(w.next=M.next,M.next=w),m.interleaved=w,Ip(p,T)}function Ip(p,m){p.lanes|=m;var w=p.alternate;for(w!==null&&(w.lanes|=m),w=p,p=p.return;p!==null;)p.childLanes|=m,w=p.alternate,w!==null&&(w.childLanes|=m),w=p,p=p.return;return w.tag===3?w.stateNode:null}var Fm=!1;function n5(p){p.updateQueue={baseState:p.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function dZ(p,m){p=p.updateQueue,m.updateQueue===p&&(m.updateQueue={baseState:p.baseState,firstBaseUpdate:p.firstBaseUpdate,lastBaseUpdate:p.lastBaseUpdate,shared:p.shared,effects:p.effects})}function Cp(p,m){return{eventTime:p,lane:m,tag:0,payload:null,callback:null,next:null}}function Nm(p,m,w){var T=p.updateQueue;if(T===null)return null;if(T=T.shared,(Pi&2)!==0){var M=T.pending;return M===null?m.next=m:(m.next=M.next,M.next=m),T.pending=m,Ip(p,w)}return M=T.interleaved,M===null?(m.next=m,r5(T)):(m.next=M.next,M.next=m),T.interleaved=m,Ip(p,w)}function _k(p,m,w){if(m=m.updateQueue,m!==null&&(m=m.shared,(w&4194240)!==0)){var T=m.lanes;T&=p.pendingLanes,w|=T,m.lanes=w,Rw(p,w)}}function hZ(p,m){var w=p.updateQueue,T=p.alternate;if(T!==null&&(T=T.updateQueue,w===T)){var M=null,R=null;if(w=w.firstBaseUpdate,w!==null){do{var q={eventTime:w.eventTime,lane:w.lane,tag:w.tag,payload:w.payload,callback:w.callback,next:null};R===null?M=R=q:R=R.next=q,w=w.next}while(w!==null);R===null?M=R=m:R=R.next=m}else M=R=m;w={baseState:T.baseState,firstBaseUpdate:M,lastBaseUpdate:R,shared:T.shared,effects:T.effects},p.updateQueue=w;return}p=w.lastBaseUpdate,p===null?w.firstBaseUpdate=m:p.next=m,w.lastBaseUpdate=m}function xk(p,m,w,T){var M=p.updateQueue;Fm=!1;var R=M.firstBaseUpdate,q=M.lastBaseUpdate,te=M.shared.pending;if(te!==null){M.shared.pending=null;var le=te,Pe=le.next;le.next=null,q===null?R=Pe:q.next=Pe,q=le;var We=p.alternate;We!==null&&(We=We.updateQueue,te=We.lastBaseUpdate,te!==q&&(te===null?We.firstBaseUpdate=Pe:te.next=Pe,We.lastBaseUpdate=le))}if(R!==null){var Je=M.baseState;q=0,We=Pe=le=null,te=R;do{var qe=te.lane,ht=te.eventTime;if((T&qe)===qe){We!==null&&(We=We.next={eventTime:ht,lane:0,tag:te.tag,payload:te.payload,callback:te.callback,next:null});e:{var wt=p,xt=te;switch(qe=m,ht=w,xt.tag){case 1:if(wt=xt.payload,typeof wt=="function"){Je=wt.call(ht,Je,qe);break e}Je=wt;break e;case 3:wt.flags=wt.flags&-65537|128;case 0:if(wt=xt.payload,qe=typeof wt=="function"?wt.call(ht,Je,qe):wt,qe==null)break e;Je=je({},Je,qe);break e;case 2:Fm=!0}}te.callback!==null&&te.lane!==0&&(p.flags|=64,qe=M.effects,qe===null?M.effects=[te]:qe.push(te))}else ht={eventTime:ht,lane:qe,tag:te.tag,payload:te.payload,callback:te.callback,next:null},We===null?(Pe=We=ht,le=Je):We=We.next=ht,q|=qe;if(te=te.next,te===null){if(te=M.shared.pending,te===null)break;qe=te,te=qe.next,qe.next=null,M.lastBaseUpdate=qe,M.shared.pending=null}}while(!0);if(We===null&&(le=Je),M.baseState=le,M.firstBaseUpdate=Pe,M.lastBaseUpdate=We,m=M.shared.interleaved,m!==null){M=m;do q|=M.lane,M=M.next;while(M!==m)}else R===null&&(M.shared.lanes=0);Av|=q,p.lanes=q,p.memoizedState=Je}}function pZ(p,m,w){if(p=m.effects,m.effects=null,p!==null)for(m=0;m<p.length;m++){var T=p[m],M=T.callback;if(M!==null){if(T.callback=null,T=w,typeof M!="function")throw Error(i(191,M));M.call(T)}}}var xT={},$d=Lm(xT),ST=Lm(xT),$T=Lm(xT);function kv(p){if(p===xT)throw Error(i(174));return p}function s5(p,m){switch(xr($T,m),xr(ST,p),xr($d,xT),p=m.nodeType,p){case 9:case 11:m=(m=m.documentElement)?m.namespaceURI:Kg(null,"");break;default:p=p===8?m.parentNode:m,m=p.namespaceURI||null,p=p.tagName,m=Kg(m,p)}kr($d),xr($d,m)}function n_(){kr($d),kr(ST),kr($T)}function fZ(p){kv($T.current);var m=kv($d.current),w=Kg(m,p.type);m!==w&&(xr(ST,p),xr($d,w))}function o5(p){ST.current===p&&(kr($d),kr(ST))}var Gr=Lm(0);function Sk(p){for(var m=p;m!==null;){if(m.tag===13){var w=m.memoizedState;if(w!==null&&(w=w.dehydrated,w===null||w.data==="$?"||w.data==="$!"))return m}else if(m.tag===19&&m.memoizedProps.revealOrder!==void 0){if((m.flags&128)!==0)return m}else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===p)break;for(;m.sibling===null;){if(m.return===null||m.return===p)return null;m=m.return}m.sibling.return=m.return,m=m.sibling}return null}var a5=[];function l5(){for(var p=0;p<a5.length;p++)a5[p]._workInProgressVersionPrimary=null;a5.length=0}var $k=O.ReactCurrentDispatcher,c5=O.ReactCurrentBatchConfig,Pv=0,qr=null,rs=null,ys=null,Tk=!1,TT=!1,ET=0,B1e=0;function oo(){throw Error(i(321))}function u5(p,m){if(m===null)return!1;for(var w=0;w<m.length&&w<p.length;w++)if(!Zt(p[w],m[w]))return!1;return!0}function d5(p,m,w,T,M,R){if(Pv=R,qr=m,m.memoizedState=null,m.updateQueue=null,m.lanes=0,$k.current=p===null||p.memoizedState===null?W1e:Z1e,p=w(T,M),TT){R=0;do{if(TT=!1,ET=0,25<=R)throw Error(i(301));R+=1,ys=rs=null,m.updateQueue=null,$k.current=J1e,p=w(T,M)}while(TT)}if($k.current=Ck,m=rs!==null&&rs.next!==null,Pv=0,ys=rs=qr=null,Tk=!1,m)throw Error(i(300));return p}function h5(){var p=ET!==0;return ET=0,p}function Td(){var p={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ys===null?qr.memoizedState=ys=p:ys=ys.next=p,ys}function Kl(){if(rs===null){var p=qr.alternate;p=p!==null?p.memoizedState:null}else p=rs.next;var m=ys===null?qr.memoizedState:ys.next;if(m!==null)ys=m,rs=p;else{if(p===null)throw Error(i(310));rs=p,p={memoizedState:rs.memoizedState,baseState:rs.baseState,baseQueue:rs.baseQueue,queue:rs.queue,next:null},ys===null?qr.memoizedState=ys=p:ys=ys.next=p}return ys}function IT(p,m){return typeof m=="function"?m(p):m}function p5(p){var m=Kl(),w=m.queue;if(w===null)throw Error(i(311));w.lastRenderedReducer=p;var T=rs,M=T.baseQueue,R=w.pending;if(R!==null){if(M!==null){var q=M.next;M.next=R.next,R.next=q}T.baseQueue=M=R,w.pending=null}if(M!==null){R=M.next,T=T.baseState;var te=q=null,le=null,Pe=R;do{var We=Pe.lane;if((Pv&We)===We)le!==null&&(le=le.next={lane:0,action:Pe.action,hasEagerState:Pe.hasEagerState,eagerState:Pe.eagerState,next:null}),T=Pe.hasEagerState?Pe.eagerState:p(T,Pe.action);else{var Je={lane:We,action:Pe.action,hasEagerState:Pe.hasEagerState,eagerState:Pe.eagerState,next:null};le===null?(te=le=Je,q=T):le=le.next=Je,qr.lanes|=We,Av|=We}Pe=Pe.next}while(Pe!==null&&Pe!==R);le===null?q=T:le.next=te,Zt(T,m.memoizedState)||(ya=!0),m.memoizedState=T,m.baseState=q,m.baseQueue=le,w.lastRenderedState=T}if(p=w.interleaved,p!==null){M=p;do R=M.lane,qr.lanes|=R,Av|=R,M=M.next;while(M!==p)}else M===null&&(w.lanes=0);return[m.memoizedState,w.dispatch]}function f5(p){var m=Kl(),w=m.queue;if(w===null)throw Error(i(311));w.lastRenderedReducer=p;var T=w.dispatch,M=w.pending,R=m.memoizedState;if(M!==null){w.pending=null;var q=M=M.next;do R=p(R,q.action),q=q.next;while(q!==M);Zt(R,m.memoizedState)||(ya=!0),m.memoizedState=R,m.baseQueue===null&&(m.baseState=R),w.lastRenderedState=R}return[R,T]}function mZ(){}function yZ(p,m){var w=qr,T=Kl(),M=m(),R=!Zt(T.memoizedState,M);if(R&&(T.memoizedState=M,ya=!0),T=T.queue,m5(bZ.bind(null,w,T,p),[p]),T.getSnapshot!==m||R||ys!==null&&ys.memoizedState.tag&1){if(w.flags|=2048,CT(9,vZ.bind(null,w,T,M,m),void 0,null),gs===null)throw Error(i(349));(Pv&30)!==0||gZ(w,m,M)}return M}function gZ(p,m,w){p.flags|=16384,p={getSnapshot:m,value:w},m=qr.updateQueue,m===null?(m={lastEffect:null,stores:null},qr.updateQueue=m,m.stores=[p]):(w=m.stores,w===null?m.stores=[p]:w.push(p))}function vZ(p,m,w,T){m.value=w,m.getSnapshot=T,wZ(m)&&_Z(p)}function bZ(p,m,w){return w(function(){wZ(m)&&_Z(p)})}function wZ(p){var m=p.getSnapshot;p=p.value;try{var w=m();return!Zt(p,w)}catch{return!0}}function _Z(p){var m=Ip(p,1);m!==null&&iu(m,p,1,-1)}function xZ(p){var m=Td();return typeof p=="function"&&(p=p()),m.memoizedState=m.baseState=p,p={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:IT,lastRenderedState:p},m.queue=p,p=p.dispatch=H1e.bind(null,qr,p),[m.memoizedState,p]}function CT(p,m,w,T){return p={tag:p,create:m,destroy:w,deps:T,next:null},m=qr.updateQueue,m===null?(m={lastEffect:null,stores:null},qr.updateQueue=m,m.lastEffect=p.next=p):(w=m.lastEffect,w===null?m.lastEffect=p.next=p:(T=w.next,w.next=p,p.next=T,m.lastEffect=p)),p}function SZ(){return Kl().memoizedState}function Ek(p,m,w,T){var M=Td();qr.flags|=p,M.memoizedState=CT(1|m,w,void 0,T===void 0?null:T)}function Ik(p,m,w,T){var M=Kl();T=T===void 0?null:T;var R=void 0;if(rs!==null){var q=rs.memoizedState;if(R=q.destroy,T!==null&&u5(T,q.deps)){M.memoizedState=CT(m,w,R,T);return}}qr.flags|=p,M.memoizedState=CT(1|m,w,R,T)}function $Z(p,m){return Ek(8390656,8,p,m)}function m5(p,m){return Ik(2048,8,p,m)}function TZ(p,m){return Ik(4,2,p,m)}function EZ(p,m){return Ik(4,4,p,m)}function IZ(p,m){if(typeof m=="function")return p=p(),m(p),function(){m(null)};if(m!=null)return p=p(),m.current=p,function(){m.current=null}}function CZ(p,m,w){return w=w!=null?w.concat([p]):null,Ik(4,4,IZ.bind(null,m,p),w)}function y5(){}function MZ(p,m){var w=Kl();m=m===void 0?null:m;var T=w.memoizedState;return T!==null&&m!==null&&u5(m,T[1])?T[0]:(w.memoizedState=[p,m],p)}function kZ(p,m){var w=Kl();m=m===void 0?null:m;var T=w.memoizedState;return T!==null&&m!==null&&u5(m,T[1])?T[0]:(p=p(),w.memoizedState=[p,m],p)}function PZ(p,m,w){return(Pv&21)===0?(p.baseState&&(p.baseState=!1,ya=!0),p.memoizedState=w):(Zt(w,m)||(w=cv(),qr.lanes|=w,Av|=w,p.baseState=!0),m)}function G1e(p,m){var w=Oi;Oi=w!==0&&4>w?w:4,p(!0);var T=c5.transition;c5.transition={};try{p(!1),m()}finally{Oi=w,c5.transition=T}}function AZ(){return Kl().memoizedState}function q1e(p,m,w){var T=jm(p);if(w={lane:T,action:w,hasEagerState:!1,eagerState:null,next:null},LZ(p))RZ(m,w);else if(w=uZ(p,m,w,T),w!==null){var M=No();iu(w,p,T,M),OZ(w,m,T)}}function H1e(p,m,w){var T=jm(p),M={lane:T,action:w,hasEagerState:!1,eagerState:null,next:null};if(LZ(p))RZ(m,M);else{var R=p.alternate;if(p.lanes===0&&(R===null||R.lanes===0)&&(R=m.lastRenderedReducer,R!==null))try{var q=m.lastRenderedState,te=R(q,w);if(M.hasEagerState=!0,M.eagerState=te,Zt(te,q)){var le=m.interleaved;le===null?(M.next=M,r5(m)):(M.next=le.next,le.next=M),m.interleaved=M;return}}catch{}finally{}w=uZ(p,m,M,T),w!==null&&(M=No(),iu(w,p,T,M),OZ(w,m,T))}}function LZ(p){var m=p.alternate;return p===qr||m!==null&&m===qr}function RZ(p,m){TT=Tk=!0;var w=p.pending;w===null?m.next=m:(m.next=w.next,w.next=m),p.pending=m}function OZ(p,m,w){if((w&4194240)!==0){var T=m.lanes;T&=p.pendingLanes,w|=T,m.lanes=w,Rw(p,w)}}var Ck={readContext:Xl,useCallback:oo,useContext:oo,useEffect:oo,useImperativeHandle:oo,useInsertionEffect:oo,useLayoutEffect:oo,useMemo:oo,useReducer:oo,useRef:oo,useState:oo,useDebugValue:oo,useDeferredValue:oo,useTransition:oo,useMutableSource:oo,useSyncExternalStore:oo,useId:oo,unstable_isNewReconciler:!1},W1e={readContext:Xl,useCallback:function(p,m){return Td().memoizedState=[p,m===void 0?null:m],p},useContext:Xl,useEffect:$Z,useImperativeHandle:function(p,m,w){return w=w!=null?w.concat([p]):null,Ek(4194308,4,IZ.bind(null,m,p),w)},useLayoutEffect:function(p,m){return Ek(4194308,4,p,m)},useInsertionEffect:function(p,m){return Ek(4,2,p,m)},useMemo:function(p,m){var w=Td();return m=m===void 0?null:m,p=p(),w.memoizedState=[p,m],p},useReducer:function(p,m,w){var T=Td();return m=w!==void 0?w(m):m,T.memoizedState=T.baseState=m,p={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:p,lastRenderedState:m},T.queue=p,p=p.dispatch=q1e.bind(null,qr,p),[T.memoizedState,p]},useRef:function(p){var m=Td();return p={current:p},m.memoizedState=p},useState:xZ,useDebugValue:y5,useDeferredValue:function(p){return Td().memoizedState=p},useTransition:function(){var p=xZ(!1),m=p[0];return p=G1e.bind(null,p[1]),Td().memoizedState=p,[m,p]},useMutableSource:function(){},useSyncExternalStore:function(p,m,w){var T=qr,M=Td();if(Dr){if(w===void 0)throw Error(i(407));w=w()}else{if(w=m(),gs===null)throw Error(i(349));(Pv&30)!==0||gZ(T,m,w)}M.memoizedState=w;var R={value:w,getSnapshot:m};return M.queue=R,$Z(bZ.bind(null,T,R,p),[p]),T.flags|=2048,CT(9,vZ.bind(null,T,R,w,m),void 0,null),w},useId:function(){var p=Td(),m=gs.identifierPrefix;if(Dr){var w=Ep,T=Tp;w=(T&~(1<<32-Fs(T)-1)).toString(32)+w,m=":"+m+"R"+w,w=ET++,0<w&&(m+="H"+w.toString(32)),m+=":"}else w=B1e++,m=":"+m+"r"+w.toString(32)+":";return p.memoizedState=m},unstable_isNewReconciler:!1},Z1e={readContext:Xl,useCallback:MZ,useContext:Xl,useEffect:m5,useImperativeHandle:CZ,useInsertionEffect:TZ,useLayoutEffect:EZ,useMemo:kZ,useReducer:p5,useRef:SZ,useState:function(){return p5(IT)},useDebugValue:y5,useDeferredValue:function(p){var m=Kl();return PZ(m,rs.memoizedState,p)},useTransition:function(){var p=p5(IT)[0],m=Kl().memoizedState;return[p,m]},useMutableSource:mZ,useSyncExternalStore:yZ,useId:AZ,unstable_isNewReconciler:!1},J1e={readContext:Xl,useCallback:MZ,useContext:Xl,useEffect:m5,useImperativeHandle:CZ,useInsertionEffect:TZ,useLayoutEffect:EZ,useMemo:kZ,useReducer:f5,useRef:SZ,useState:function(){return f5(IT)},useDebugValue:y5,useDeferredValue:function(p){var m=Kl();return rs===null?m.memoizedState=p:PZ(m,rs.memoizedState,p)},useTransition:function(){var p=f5(IT)[0],m=Kl().memoizedState;return[p,m]},useMutableSource:mZ,useSyncExternalStore:yZ,useId:AZ,unstable_isNewReconciler:!1};function Qc(p,m){if(p&&p.defaultProps){m=je({},m),p=p.defaultProps;for(var w in p)m[w]===void 0&&(m[w]=p[w]);return m}return m}function g5(p,m,w,T){m=p.memoizedState,w=w(T,m),w=w==null?m:je({},m,w),p.memoizedState=w,p.lanes===0&&(p.updateQueue.baseState=w)}var Mk={isMounted:function(p){return(p=p._reactInternals)?Mt(p)===p:!1},enqueueSetState:function(p,m,w){p=p._reactInternals;var T=No(),M=jm(p),R=Cp(T,M);R.payload=m,w!=null&&(R.callback=w),m=Nm(p,R,M),m!==null&&(iu(m,p,M,T),_k(m,p,M))},enqueueReplaceState:function(p,m,w){p=p._reactInternals;var T=No(),M=jm(p),R=Cp(T,M);R.tag=1,R.payload=m,w!=null&&(R.callback=w),m=Nm(p,R,M),m!==null&&(iu(m,p,M,T),_k(m,p,M))},enqueueForceUpdate:function(p,m){p=p._reactInternals;var w=No(),T=jm(p),M=Cp(w,T);M.tag=2,m!=null&&(M.callback=m),m=Nm(p,M,T),m!==null&&(iu(m,p,T,w),_k(m,p,T))}};function FZ(p,m,w,T,M,R,q){return p=p.stateNode,typeof p.shouldComponentUpdate=="function"?p.shouldComponentUpdate(T,R,q):m.prototype&&m.prototype.isPureReactComponent?!Dt(w,T)||!Dt(M,R):!0}function NZ(p,m,w){var T=!1,M=Rm,R=m.contextType;return typeof R=="object"&&R!==null?R=Xl(R):(M=ma(m)?Ev:so.current,T=m.contextTypes,R=(T=T!=null)?Xw(p,M):Rm),m=new m(w,R),p.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Mk,p.stateNode=m,m._reactInternals=p,T&&(p=p.stateNode,p.__reactInternalMemoizedUnmaskedChildContext=M,p.__reactInternalMemoizedMaskedChildContext=R),m}function DZ(p,m,w,T){p=m.state,typeof m.componentWillReceiveProps=="function"&&m.componentWillReceiveProps(w,T),typeof m.UNSAFE_componentWillReceiveProps=="function"&&m.UNSAFE_componentWillReceiveProps(w,T),m.state!==p&&Mk.enqueueReplaceState(m,m.state,null)}function v5(p,m,w,T){var M=p.stateNode;M.props=w,M.state=p.memoizedState,M.refs={},n5(p);var R=m.contextType;typeof R=="object"&&R!==null?M.context=Xl(R):(R=ma(m)?Ev:so.current,M.context=Xw(p,R)),M.state=p.memoizedState,R=m.getDerivedStateFromProps,typeof R=="function"&&(g5(p,m,R,w),M.state=p.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof M.getSnapshotBeforeUpdate=="function"||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(m=M.state,typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount(),m!==M.state&&Mk.enqueueReplaceState(M,M.state,null),xk(p,w,M,T),M.state=p.memoizedState),typeof M.componentDidMount=="function"&&(p.flags|=4194308)}function s_(p,m){try{var w="",T=m;do w+=Xt(T),T=T.return;while(T);var M=w}catch(R){M=`
Error generating stack: `+R.message+`
`+R.stack}return{value:p,source:m,stack:M,digest:null}}function b5(p,m,w){return{value:p,source:null,stack:w??null,digest:m??null}}function w5(p,m){try{console.error(m.value)}catch(w){setTimeout(function(){throw w})}}var Y1e=typeof WeakMap=="function"?WeakMap:Map;function zZ(p,m,w){w=Cp(-1,w),w.tag=3,w.payload={element:null};var T=m.value;return w.callback=function(){Fk||(Fk=!0,O5=T),w5(p,m)},w}function VZ(p,m,w){w=Cp(-1,w),w.tag=3;var T=p.type.getDerivedStateFromError;if(typeof T=="function"){var M=m.value;w.payload=function(){return T(M)},w.callback=function(){w5(p,m)}}var R=p.stateNode;return R!==null&&typeof R.componentDidCatch=="function"&&(w.callback=function(){w5(p,m),typeof T!="function"&&(zm===null?zm=new Set([this]):zm.add(this));var q=m.stack;this.componentDidCatch(m.value,{componentStack:q!==null?q:""})}),w}function jZ(p,m,w){var T=p.pingCache;if(T===null){T=p.pingCache=new Y1e;var M=new Set;T.set(m,M)}else M=T.get(m),M===void 0&&(M=new Set,T.set(m,M));M.has(w)||(M.add(w),p=uxe.bind(null,p,m,w),m.then(p,p))}function UZ(p){do{var m;if((m=p.tag===13)&&(m=p.memoizedState,m=m!==null?m.dehydrated!==null:!0),m)return p;p=p.return}while(p!==null);return null}function BZ(p,m,w,T,M){return(p.mode&1)===0?(p===m?p.flags|=65536:(p.flags|=128,w.flags|=131072,w.flags&=-52805,w.tag===1&&(w.alternate===null?w.tag=17:(m=Cp(-1,1),m.tag=2,Nm(w,m,1))),w.lanes|=1),p):(p.flags|=65536,p.lanes=M,p)}var X1e=O.ReactCurrentOwner,ya=!1;function Fo(p,m,w,T){m.child=p===null?cZ(m,null,w,T):t_(m,p.child,w,T)}function GZ(p,m,w,T,M){w=w.render;var R=m.ref;return r_(m,M),T=d5(p,m,w,T,R,M),w=h5(),p!==null&&!ya?(m.updateQueue=p.updateQueue,m.flags&=-2053,p.lanes&=~M,Mp(p,m,M)):(Dr&&w&&ZD(m),m.flags|=1,Fo(p,m,T,M),m.child)}function qZ(p,m,w,T,M){if(p===null){var R=w.type;return typeof R=="function"&&!U5(R)&&R.defaultProps===void 0&&w.compare===null&&w.defaultProps===void 0?(m.tag=15,m.type=R,HZ(p,m,R,T,M)):(p=Uk(w.type,null,T,m,m.mode,M),p.ref=m.ref,p.return=m,m.child=p)}if(R=p.child,(p.lanes&M)===0){var q=R.memoizedProps;if(w=w.compare,w=w!==null?w:Dt,w(q,T)&&p.ref===m.ref)return Mp(p,m,M)}return m.flags|=1,p=Bm(R,T),p.ref=m.ref,p.return=m,m.child=p}function HZ(p,m,w,T,M){if(p!==null){var R=p.memoizedProps;if(Dt(R,T)&&p.ref===m.ref)if(ya=!1,m.pendingProps=T=R,(p.lanes&M)!==0)(p.flags&131072)!==0&&(ya=!0);else return m.lanes=p.lanes,Mp(p,m,M)}return _5(p,m,w,T,M)}function WZ(p,m,w){var T=m.pendingProps,M=T.children,R=p!==null?p.memoizedState:null;if(T.mode==="hidden")if((m.mode&1)===0)m.memoizedState={baseLanes:0,cachePool:null,transitions:null},xr(a_,ol),ol|=w;else{if((w&1073741824)===0)return p=R!==null?R.baseLanes|w:w,m.lanes=m.childLanes=1073741824,m.memoizedState={baseLanes:p,cachePool:null,transitions:null},m.updateQueue=null,xr(a_,ol),ol|=p,null;m.memoizedState={baseLanes:0,cachePool:null,transitions:null},T=R!==null?R.baseLanes:w,xr(a_,ol),ol|=T}else R!==null?(T=R.baseLanes|w,m.memoizedState=null):T=w,xr(a_,ol),ol|=T;return Fo(p,m,M,w),m.child}function ZZ(p,m){var w=m.ref;(p===null&&w!==null||p!==null&&p.ref!==w)&&(m.flags|=512,m.flags|=2097152)}function _5(p,m,w,T,M){var R=ma(w)?Ev:so.current;return R=Xw(m,R),r_(m,M),w=d5(p,m,w,T,R,M),T=h5(),p!==null&&!ya?(m.updateQueue=p.updateQueue,m.flags&=-2053,p.lanes&=~M,Mp(p,m,M)):(Dr&&T&&ZD(m),m.flags|=1,Fo(p,m,w,M),m.child)}function JZ(p,m,w,T,M){if(ma(w)){var R=!0;pk(m)}else R=!1;if(r_(m,M),m.stateNode===null)Pk(p,m),NZ(m,w,T),v5(m,w,T,M),T=!0;else if(p===null){var q=m.stateNode,te=m.memoizedProps;q.props=te;var le=q.context,Pe=w.contextType;typeof Pe=="object"&&Pe!==null?Pe=Xl(Pe):(Pe=ma(w)?Ev:so.current,Pe=Xw(m,Pe));var We=w.getDerivedStateFromProps,Je=typeof We=="function"||typeof q.getSnapshotBeforeUpdate=="function";Je||typeof q.UNSAFE_componentWillReceiveProps!="function"&&typeof q.componentWillReceiveProps!="function"||(te!==T||le!==Pe)&&DZ(m,q,T,Pe),Fm=!1;var qe=m.memoizedState;q.state=qe,xk(m,T,q,M),le=m.memoizedState,te!==T||qe!==le||fa.current||Fm?(typeof We=="function"&&(g5(m,w,We,T),le=m.memoizedState),(te=Fm||FZ(m,w,te,T,qe,le,Pe))?(Je||typeof q.UNSAFE_componentWillMount!="function"&&typeof q.componentWillMount!="function"||(typeof q.componentWillMount=="function"&&q.componentWillMount(),typeof q.UNSAFE_componentWillMount=="function"&&q.UNSAFE_componentWillMount()),typeof q.componentDidMount=="function"&&(m.flags|=4194308)):(typeof q.componentDidMount=="function"&&(m.flags|=4194308),m.memoizedProps=T,m.memoizedState=le),q.props=T,q.state=le,q.context=Pe,T=te):(typeof q.componentDidMount=="function"&&(m.flags|=4194308),T=!1)}else{q=m.stateNode,dZ(p,m),te=m.memoizedProps,Pe=m.type===m.elementType?te:Qc(m.type,te),q.props=Pe,Je=m.pendingProps,qe=q.context,le=w.contextType,typeof le=="object"&&le!==null?le=Xl(le):(le=ma(w)?Ev:so.current,le=Xw(m,le));var ht=w.getDerivedStateFromProps;(We=typeof ht=="function"||typeof q.getSnapshotBeforeUpdate=="function")||typeof q.UNSAFE_componentWillReceiveProps!="function"&&typeof q.componentWillReceiveProps!="function"||(te!==Je||qe!==le)&&DZ(m,q,T,le),Fm=!1,qe=m.memoizedState,q.state=qe,xk(m,T,q,M);var wt=m.memoizedState;te!==Je||qe!==wt||fa.current||Fm?(typeof ht=="function"&&(g5(m,w,ht,T),wt=m.memoizedState),(Pe=Fm||FZ(m,w,Pe,T,qe,wt,le)||!1)?(We||typeof q.UNSAFE_componentWillUpdate!="function"&&typeof q.componentWillUpdate!="function"||(typeof q.componentWillUpdate=="function"&&q.componentWillUpdate(T,wt,le),typeof q.UNSAFE_componentWillUpdate=="function"&&q.UNSAFE_componentWillUpdate(T,wt,le)),typeof q.componentDidUpdate=="function"&&(m.flags|=4),typeof q.getSnapshotBeforeUpdate=="function"&&(m.flags|=1024)):(typeof q.componentDidUpdate!="function"||te===p.memoizedProps&&qe===p.memoizedState||(m.flags|=4),typeof q.getSnapshotBeforeUpdate!="function"||te===p.memoizedProps&&qe===p.memoizedState||(m.flags|=1024),m.memoizedProps=T,m.memoizedState=wt),q.props=T,q.state=wt,q.context=le,T=Pe):(typeof q.componentDidUpdate!="function"||te===p.memoizedProps&&qe===p.memoizedState||(m.flags|=4),typeof q.getSnapshotBeforeUpdate!="function"||te===p.memoizedProps&&qe===p.memoizedState||(m.flags|=1024),T=!1)}return x5(p,m,w,T,R,M)}function x5(p,m,w,T,M,R){ZZ(p,m);var q=(m.flags&128)!==0;if(!T&&!q)return M&&eZ(m,w,!1),Mp(p,m,R);T=m.stateNode,X1e.current=m;var te=q&&typeof w.getDerivedStateFromError!="function"?null:T.render();return m.flags|=1,p!==null&&q?(m.child=t_(m,p.child,null,R),m.child=t_(m,null,te,R)):Fo(p,m,te,R),m.memoizedState=T.state,M&&eZ(m,w,!0),m.child}function YZ(p){var m=p.stateNode;m.pendingContext?KW(p,m.pendingContext,m.pendingContext!==m.context):m.context&&KW(p,m.context,!1),s5(p,m.containerInfo)}function XZ(p,m,w,T,M){return e_(),KD(M),m.flags|=256,Fo(p,m,w,T),m.child}var S5={dehydrated:null,treeContext:null,retryLane:0};function $5(p){return{baseLanes:p,cachePool:null,transitions:null}}function KZ(p,m,w){var T=m.pendingProps,M=Gr.current,R=!1,q=(m.flags&128)!==0,te;if((te=q)||(te=p!==null&&p.memoizedState===null?!1:(M&2)!==0),te?(R=!0,m.flags&=-129):(p===null||p.memoizedState!==null)&&(M|=1),xr(Gr,M&1),p===null)return XD(m),p=m.memoizedState,p!==null&&(p=p.dehydrated,p!==null)?((m.mode&1)===0?m.lanes=1:p.data==="$!"?m.lanes=8:m.lanes=1073741824,null):(q=T.children,p=T.fallback,R?(T=m.mode,R=m.child,q={mode:"hidden",children:q},(T&1)===0&&R!==null?(R.childLanes=0,R.pendingProps=q):R=Bk(q,T,0,null),p=Fv(p,T,w,null),R.return=m,p.return=m,R.sibling=p,m.child=R,m.child.memoizedState=$5(w),m.memoizedState=S5,p):T5(m,q));if(M=p.memoizedState,M!==null&&(te=M.dehydrated,te!==null))return K1e(p,m,q,T,te,M,w);if(R){R=T.fallback,q=m.mode,M=p.child,te=M.sibling;var le={mode:"hidden",children:T.children};return(q&1)===0&&m.child!==M?(T=m.child,T.childLanes=0,T.pendingProps=le,m.deletions=null):(T=Bm(M,le),T.subtreeFlags=M.subtreeFlags&14680064),te!==null?R=Bm(te,R):(R=Fv(R,q,w,null),R.flags|=2),R.return=m,T.return=m,T.sibling=R,m.child=T,T=R,R=m.child,q=p.child.memoizedState,q=q===null?$5(w):{baseLanes:q.baseLanes|w,cachePool:null,transitions:q.transitions},R.memoizedState=q,R.childLanes=p.childLanes&~w,m.memoizedState=S5,T}return R=p.child,p=R.sibling,T=Bm(R,{mode:"visible",children:T.children}),(m.mode&1)===0&&(T.lanes=w),T.return=m,T.sibling=null,p!==null&&(w=m.deletions,w===null?(m.deletions=[p],m.flags|=16):w.push(p)),m.child=T,m.memoizedState=null,T}function T5(p,m){return m=Bk({mode:"visible",children:m},p.mode,0,null),m.return=p,p.child=m}function kk(p,m,w,T){return T!==null&&KD(T),t_(m,p.child,null,w),p=T5(m,m.pendingProps.children),p.flags|=2,m.memoizedState=null,p}function K1e(p,m,w,T,M,R,q){if(w)return m.flags&256?(m.flags&=-257,T=b5(Error(i(422))),kk(p,m,q,T)):m.memoizedState!==null?(m.child=p.child,m.flags|=128,null):(R=T.fallback,M=m.mode,T=Bk({mode:"visible",children:T.children},M,0,null),R=Fv(R,M,q,null),R.flags|=2,T.return=m,R.return=m,T.sibling=R,m.child=T,(m.mode&1)!==0&&t_(m,p.child,null,q),m.child.memoizedState=$5(q),m.memoizedState=S5,R);if((m.mode&1)===0)return kk(p,m,q,null);if(M.data==="$!"){if(T=M.nextSibling&&M.nextSibling.dataset,T)var te=T.dgst;return T=te,R=Error(i(419)),T=b5(R,T,void 0),kk(p,m,q,T)}if(te=(q&p.childLanes)!==0,ya||te){if(T=gs,T!==null){switch(q&-q){case 4:M=2;break;case 16:M=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:M=32;break;case 536870912:M=268435456;break;default:M=0}M=(M&(T.suspendedLanes|q))!==0?0:M,M!==0&&M!==R.retryLane&&(R.retryLane=M,Ip(p,M),iu(T,p,M,-1))}return j5(),T=b5(Error(i(421))),kk(p,m,q,T)}return M.data==="$?"?(m.flags|=128,m.child=p.child,m=dxe.bind(null,p),M._reactRetry=m,null):(p=R.treeContext,sl=Am(M.nextSibling),nl=m,Dr=!0,Kc=null,p!==null&&(Jl[Yl++]=Tp,Jl[Yl++]=Ep,Jl[Yl++]=Iv,Tp=p.id,Ep=p.overflow,Iv=m),m=T5(m,T.children),m.flags|=4096,m)}function QZ(p,m,w){p.lanes|=m;var T=p.alternate;T!==null&&(T.lanes|=m),i5(p.return,m,w)}function E5(p,m,w,T,M){var R=p.memoizedState;R===null?p.memoizedState={isBackwards:m,rendering:null,renderingStartTime:0,last:T,tail:w,tailMode:M}:(R.isBackwards=m,R.rendering=null,R.renderingStartTime=0,R.last=T,R.tail=w,R.tailMode=M)}function eJ(p,m,w){var T=m.pendingProps,M=T.revealOrder,R=T.tail;if(Fo(p,m,T.children,w),T=Gr.current,(T&2)!==0)T=T&1|2,m.flags|=128;else{if(p!==null&&(p.flags&128)!==0)e:for(p=m.child;p!==null;){if(p.tag===13)p.memoizedState!==null&&QZ(p,w,m);else if(p.tag===19)QZ(p,w,m);else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===m)break e;for(;p.sibling===null;){if(p.return===null||p.return===m)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}T&=1}if(xr(Gr,T),(m.mode&1)===0)m.memoizedState=null;else switch(M){case"forwards":for(w=m.child,M=null;w!==null;)p=w.alternate,p!==null&&Sk(p)===null&&(M=w),w=w.sibling;w=M,w===null?(M=m.child,m.child=null):(M=w.sibling,w.sibling=null),E5(m,!1,M,w,R);break;case"backwards":for(w=null,M=m.child,m.child=null;M!==null;){if(p=M.alternate,p!==null&&Sk(p)===null){m.child=M;break}p=M.sibling,M.sibling=w,w=M,M=p}E5(m,!0,w,null,R);break;case"together":E5(m,!1,null,null,void 0);break;default:m.memoizedState=null}return m.child}function Pk(p,m){(m.mode&1)===0&&p!==null&&(p.alternate=null,m.alternate=null,m.flags|=2)}function Mp(p,m,w){if(p!==null&&(m.dependencies=p.dependencies),Av|=m.lanes,(w&m.childLanes)===0)return null;if(p!==null&&m.child!==p.child)throw Error(i(153));if(m.child!==null){for(p=m.child,w=Bm(p,p.pendingProps),m.child=w,w.return=m;p.sibling!==null;)p=p.sibling,w=w.sibling=Bm(p,p.pendingProps),w.return=m;w.sibling=null}return m.child}function Q1e(p,m,w){switch(m.tag){case 3:YZ(m),e_();break;case 5:fZ(m);break;case 1:ma(m.type)&&pk(m);break;case 4:s5(m,m.stateNode.containerInfo);break;case 10:var T=m.type._context,M=m.memoizedProps.value;xr(bk,T._currentValue),T._currentValue=M;break;case 13:if(T=m.memoizedState,T!==null)return T.dehydrated!==null?(xr(Gr,Gr.current&1),m.flags|=128,null):(w&m.child.childLanes)!==0?KZ(p,m,w):(xr(Gr,Gr.current&1),p=Mp(p,m,w),p!==null?p.sibling:null);xr(Gr,Gr.current&1);break;case 19:if(T=(w&m.childLanes)!==0,(p.flags&128)!==0){if(T)return eJ(p,m,w);m.flags|=128}if(M=m.memoizedState,M!==null&&(M.rendering=null,M.tail=null,M.lastEffect=null),xr(Gr,Gr.current),T)break;return null;case 22:case 23:return m.lanes=0,WZ(p,m,w)}return Mp(p,m,w)}var tJ,I5,iJ,rJ;tJ=function(p,m){for(var w=m.child;w!==null;){if(w.tag===5||w.tag===6)p.appendChild(w.stateNode);else if(w.tag!==4&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===m)break;for(;w.sibling===null;){if(w.return===null||w.return===m)return;w=w.return}w.sibling.return=w.return,w=w.sibling}},I5=function(){},iJ=function(p,m,w,T){var M=p.memoizedProps;if(M!==T){p=m.stateNode,kv($d.current);var R=null;switch(w){case"input":M=Lo(p,M),T=Lo(p,T),R=[];break;case"select":M=je({},M,{value:void 0}),T=je({},T,{value:void 0}),R=[];break;case"textarea":M=vm(p,M),T=vm(p,T),R=[];break;default:typeof M.onClick!="function"&&typeof T.onClick=="function"&&(p.onclick=uk)}wm(w,T);var q;w=null;for(Pe in M)if(!T.hasOwnProperty(Pe)&&M.hasOwnProperty(Pe)&&M[Pe]!=null)if(Pe==="style"){var te=M[Pe];for(q in te)te.hasOwnProperty(q)&&(w||(w={}),w[q]="")}else Pe!=="dangerouslySetInnerHTML"&&Pe!=="children"&&Pe!=="suppressContentEditableWarning"&&Pe!=="suppressHydrationWarning"&&Pe!=="autoFocus"&&(n.hasOwnProperty(Pe)?R||(R=[]):(R=R||[]).push(Pe,null));for(Pe in T){var le=T[Pe];if(te=M!=null?M[Pe]:void 0,T.hasOwnProperty(Pe)&&le!==te&&(le!=null||te!=null))if(Pe==="style")if(te){for(q in te)!te.hasOwnProperty(q)||le&&le.hasOwnProperty(q)||(w||(w={}),w[q]="");for(q in le)le.hasOwnProperty(q)&&te[q]!==le[q]&&(w||(w={}),w[q]=le[q])}else w||(R||(R=[]),R.push(Pe,w)),w=le;else Pe==="dangerouslySetInnerHTML"?(le=le?le.__html:void 0,te=te?te.__html:void 0,le!=null&&te!==le&&(R=R||[]).push(Pe,le)):Pe==="children"?typeof le!="string"&&typeof le!="number"||(R=R||[]).push(Pe,""+le):Pe!=="suppressContentEditableWarning"&&Pe!=="suppressHydrationWarning"&&(n.hasOwnProperty(Pe)?(le!=null&&Pe==="onScroll"&&Mr("scroll",p),R||te===le||(R=[])):(R=R||[]).push(Pe,le))}w&&(R=R||[]).push("style",w);var Pe=R;(m.updateQueue=Pe)&&(m.flags|=4)}},rJ=function(p,m,w,T){w!==T&&(m.flags|=4)};function MT(p,m){if(!Dr)switch(p.tailMode){case"hidden":m=p.tail;for(var w=null;m!==null;)m.alternate!==null&&(w=m),m=m.sibling;w===null?p.tail=null:w.sibling=null;break;case"collapsed":w=p.tail;for(var T=null;w!==null;)w.alternate!==null&&(T=w),w=w.sibling;T===null?m||p.tail===null?p.tail=null:p.tail.sibling=null:T.sibling=null}}function ao(p){var m=p.alternate!==null&&p.alternate.child===p.child,w=0,T=0;if(m)for(var M=p.child;M!==null;)w|=M.lanes|M.childLanes,T|=M.subtreeFlags&14680064,T|=M.flags&14680064,M.return=p,M=M.sibling;else for(M=p.child;M!==null;)w|=M.lanes|M.childLanes,T|=M.subtreeFlags,T|=M.flags,M.return=p,M=M.sibling;return p.subtreeFlags|=T,p.childLanes=w,m}function exe(p,m,w){var T=m.pendingProps;switch(JD(m),m.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ao(m),null;case 1:return ma(m.type)&&hk(),ao(m),null;case 3:return T=m.stateNode,n_(),kr(fa),kr(so),l5(),T.pendingContext&&(T.context=T.pendingContext,T.pendingContext=null),(p===null||p.child===null)&&(gk(m)?m.flags|=4:p===null||p.memoizedState.isDehydrated&&(m.flags&256)===0||(m.flags|=1024,Kc!==null&&(D5(Kc),Kc=null))),I5(p,m),ao(m),null;case 5:o5(m);var M=kv($T.current);if(w=m.type,p!==null&&m.stateNode!=null)iJ(p,m,w,T,M),p.ref!==m.ref&&(m.flags|=512,m.flags|=2097152);else{if(!T){if(m.stateNode===null)throw Error(i(166));return ao(m),null}if(p=kv($d.current),gk(m)){T=m.stateNode,w=m.type;var R=m.memoizedProps;switch(T[Sd]=m,T[bT]=R,p=(m.mode&1)!==0,w){case"dialog":Mr("cancel",T),Mr("close",T);break;case"iframe":case"object":case"embed":Mr("load",T);break;case"video":case"audio":for(M=0;M<yT.length;M++)Mr(yT[M],T);break;case"source":Mr("error",T);break;case"img":case"image":case"link":Mr("error",T),Mr("load",T);break;case"details":Mr("toggle",T);break;case"input":dd(T,R),Mr("invalid",T);break;case"select":T._wrapperState={wasMultiple:!!R.multiple},Mr("invalid",T);break;case"textarea":Yg(T,R),Mr("invalid",T)}wm(w,R),M=null;for(var q in R)if(R.hasOwnProperty(q)){var te=R[q];q==="children"?typeof te=="string"?T.textContent!==te&&(R.suppressHydrationWarning!==!0&&ck(T.textContent,te,p),M=["children",te]):typeof te=="number"&&T.textContent!==""+te&&(R.suppressHydrationWarning!==!0&&ck(T.textContent,te,p),M=["children",""+te]):n.hasOwnProperty(q)&&te!=null&&q==="onScroll"&&Mr("scroll",T)}switch(w){case"input":Ao(T),hd(T,R,!0);break;case"textarea":Ao(T),Xg(T);break;case"select":case"option":break;default:typeof R.onClick=="function"&&(T.onclick=uk)}T=M,m.updateQueue=T,T!==null&&(m.flags|=4)}else{q=M.nodeType===9?M:M.ownerDocument,p==="http://www.w3.org/1999/xhtml"&&(p=pd(w)),p==="http://www.w3.org/1999/xhtml"?w==="script"?(p=q.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild)):typeof T.is=="string"?p=q.createElement(w,{is:T.is}):(p=q.createElement(w),w==="select"&&(q=p,T.multiple?q.multiple=!0:T.size&&(q.size=T.size))):p=q.createElementNS(p,w),p[Sd]=m,p[bT]=T,tJ(p,m,!1,!1),m.stateNode=p;e:{switch(q=_m(w,T),w){case"dialog":Mr("cancel",p),Mr("close",p),M=T;break;case"iframe":case"object":case"embed":Mr("load",p),M=T;break;case"video":case"audio":for(M=0;M<yT.length;M++)Mr(yT[M],p);M=T;break;case"source":Mr("error",p),M=T;break;case"img":case"image":case"link":Mr("error",p),Mr("load",p),M=T;break;case"details":Mr("toggle",p),M=T;break;case"input":dd(p,T),M=Lo(p,T),Mr("invalid",p);break;case"option":M=T;break;case"select":p._wrapperState={wasMultiple:!!T.multiple},M=je({},T,{value:void 0}),Mr("invalid",p);break;case"textarea":Yg(p,T),M=vm(p,T),Mr("invalid",p);break;default:M=T}wm(w,M),te=M;for(R in te)if(te.hasOwnProperty(R)){var le=te[R];R==="style"?tv(p,le):R==="dangerouslySetInnerHTML"?(le=le?le.__html:void 0,le!=null&&Cw(p,le)):R==="children"?typeof le=="string"?(w!=="textarea"||le!=="")&&Bc(p,le):typeof le=="number"&&Bc(p,""+le):R!=="suppressContentEditableWarning"&&R!=="suppressHydrationWarning"&&R!=="autoFocus"&&(n.hasOwnProperty(R)?le!=null&&R==="onScroll"&&Mr("scroll",p):le!=null&&k(p,R,le,q))}switch(w){case"input":Ao(p),hd(p,T,!1);break;case"textarea":Ao(p),Xg(p);break;case"option":T.value!=null&&p.setAttribute("value",""+ui(T.value));break;case"select":p.multiple=!!T.multiple,R=T.value,R!=null?Gn(p,!!T.multiple,R,!1):T.defaultValue!=null&&Gn(p,!!T.multiple,T.defaultValue,!0);break;default:typeof M.onClick=="function"&&(p.onclick=uk)}switch(w){case"button":case"input":case"select":case"textarea":T=!!T.autoFocus;break e;case"img":T=!0;break e;default:T=!1}}T&&(m.flags|=4)}m.ref!==null&&(m.flags|=512,m.flags|=2097152)}return ao(m),null;case 6:if(p&&m.stateNode!=null)rJ(p,m,p.memoizedProps,T);else{if(typeof T!="string"&&m.stateNode===null)throw Error(i(166));if(w=kv($T.current),kv($d.current),gk(m)){if(T=m.stateNode,w=m.memoizedProps,T[Sd]=m,(R=T.nodeValue!==w)&&(p=nl,p!==null))switch(p.tag){case 3:ck(T.nodeValue,w,(p.mode&1)!==0);break;case 5:p.memoizedProps.suppressHydrationWarning!==!0&&ck(T.nodeValue,w,(p.mode&1)!==0)}R&&(m.flags|=4)}else T=(w.nodeType===9?w:w.ownerDocument).createTextNode(T),T[Sd]=m,m.stateNode=T}return ao(m),null;case 13:if(kr(Gr),T=m.memoizedState,p===null||p.memoizedState!==null&&p.memoizedState.dehydrated!==null){if(Dr&&sl!==null&&(m.mode&1)!==0&&(m.flags&128)===0)oZ(),e_(),m.flags|=98560,R=!1;else if(R=gk(m),T!==null&&T.dehydrated!==null){if(p===null){if(!R)throw Error(i(318));if(R=m.memoizedState,R=R!==null?R.dehydrated:null,!R)throw Error(i(317));R[Sd]=m}else e_(),(m.flags&128)===0&&(m.memoizedState=null),m.flags|=4;ao(m),R=!1}else Kc!==null&&(D5(Kc),Kc=null),R=!0;if(!R)return m.flags&65536?m:null}return(m.flags&128)!==0?(m.lanes=w,m):(T=T!==null,T!==(p!==null&&p.memoizedState!==null)&&T&&(m.child.flags|=8192,(m.mode&1)!==0&&(p===null||(Gr.current&1)!==0?ns===0&&(ns=3):j5())),m.updateQueue!==null&&(m.flags|=4),ao(m),null);case 4:return n_(),I5(p,m),p===null&&gT(m.stateNode.containerInfo),ao(m),null;case 10:return t5(m.type._context),ao(m),null;case 17:return ma(m.type)&&hk(),ao(m),null;case 19:if(kr(Gr),R=m.memoizedState,R===null)return ao(m),null;if(T=(m.flags&128)!==0,q=R.rendering,q===null)if(T)MT(R,!1);else{if(ns!==0||p!==null&&(p.flags&128)!==0)for(p=m.child;p!==null;){if(q=Sk(p),q!==null){for(m.flags|=128,MT(R,!1),T=q.updateQueue,T!==null&&(m.updateQueue=T,m.flags|=4),m.subtreeFlags=0,T=w,w=m.child;w!==null;)R=w,p=T,R.flags&=14680066,q=R.alternate,q===null?(R.childLanes=0,R.lanes=p,R.child=null,R.subtreeFlags=0,R.memoizedProps=null,R.memoizedState=null,R.updateQueue=null,R.dependencies=null,R.stateNode=null):(R.childLanes=q.childLanes,R.lanes=q.lanes,R.child=q.child,R.subtreeFlags=0,R.deletions=null,R.memoizedProps=q.memoizedProps,R.memoizedState=q.memoizedState,R.updateQueue=q.updateQueue,R.type=q.type,p=q.dependencies,R.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext}),w=w.sibling;return xr(Gr,Gr.current&1|2),m.child}p=p.sibling}R.tail!==null&&wr()>l_&&(m.flags|=128,T=!0,MT(R,!1),m.lanes=4194304)}else{if(!T)if(p=Sk(q),p!==null){if(m.flags|=128,T=!0,w=p.updateQueue,w!==null&&(m.updateQueue=w,m.flags|=4),MT(R,!0),R.tail===null&&R.tailMode==="hidden"&&!q.alternate&&!Dr)return ao(m),null}else 2*wr()-R.renderingStartTime>l_&&w!==1073741824&&(m.flags|=128,T=!0,MT(R,!1),m.lanes=4194304);R.isBackwards?(q.sibling=m.child,m.child=q):(w=R.last,w!==null?w.sibling=q:m.child=q,R.last=q)}return R.tail!==null?(m=R.tail,R.rendering=m,R.tail=m.sibling,R.renderingStartTime=wr(),m.sibling=null,w=Gr.current,xr(Gr,T?w&1|2:w&1),m):(ao(m),null);case 22:case 23:return V5(),T=m.memoizedState!==null,p!==null&&p.memoizedState!==null!==T&&(m.flags|=8192),T&&(m.mode&1)!==0?(ol&1073741824)!==0&&(ao(m),m.subtreeFlags&6&&(m.flags|=8192)):ao(m),null;case 24:return null;case 25:return null}throw Error(i(156,m.tag))}function txe(p,m){switch(JD(m),m.tag){case 1:return ma(m.type)&&hk(),p=m.flags,p&65536?(m.flags=p&-65537|128,m):null;case 3:return n_(),kr(fa),kr(so),l5(),p=m.flags,(p&65536)!==0&&(p&128)===0?(m.flags=p&-65537|128,m):null;case 5:return o5(m),null;case 13:if(kr(Gr),p=m.memoizedState,p!==null&&p.dehydrated!==null){if(m.alternate===null)throw Error(i(340));e_()}return p=m.flags,p&65536?(m.flags=p&-65537|128,m):null;case 19:return kr(Gr),null;case 4:return n_(),null;case 10:return t5(m.type._context),null;case 22:case 23:return V5(),null;case 24:return null;default:return null}}var Ak=!1,lo=!1,ixe=typeof WeakSet=="function"?WeakSet:Set,yt=null;function o_(p,m){var w=p.ref;if(w!==null)if(typeof w=="function")try{w(null)}catch(T){ln(p,m,T)}else w.current=null}function C5(p,m,w){try{w()}catch(T){ln(p,m,T)}}var nJ=!1;function rxe(p,m){if(VD=mv,p=no(),Oo(p)){if("selectionStart"in p)var w={start:p.selectionStart,end:p.selectionEnd};else e:{w=(w=p.ownerDocument)&&w.defaultView||window;var T=w.getSelection&&w.getSelection();if(T&&T.rangeCount!==0){w=T.anchorNode;var M=T.anchorOffset,R=T.focusNode;T=T.focusOffset;try{w.nodeType,R.nodeType}catch{w=null;break e}var q=0,te=-1,le=-1,Pe=0,We=0,Je=p,qe=null;t:for(;;){for(var ht;Je!==w||M!==0&&Je.nodeType!==3||(te=q+M),Je!==R||T!==0&&Je.nodeType!==3||(le=q+T),Je.nodeType===3&&(q+=Je.nodeValue.length),(ht=Je.firstChild)!==null;)qe=Je,Je=ht;for(;;){if(Je===p)break t;if(qe===w&&++Pe===M&&(te=q),qe===R&&++We===T&&(le=q),(ht=Je.nextSibling)!==null)break;Je=qe,qe=Je.parentNode}Je=ht}w=te===-1||le===-1?null:{start:te,end:le}}else w=null}w=w||{start:0,end:0}}else w=null;for(jD={focusedElem:p,selectionRange:w},mv=!1,yt=m;yt!==null;)if(m=yt,p=m.child,(m.subtreeFlags&1028)!==0&&p!==null)p.return=m,yt=p;else for(;yt!==null;){m=yt;try{var wt=m.alternate;if((m.flags&1024)!==0)switch(m.tag){case 0:case 11:case 15:break;case 1:if(wt!==null){var xt=wt.memoizedProps,Cn=wt.memoizedState,xe=m.stateNode,me=xe.getSnapshotBeforeUpdate(m.elementType===m.type?xt:Qc(m.type,xt),Cn);xe.__reactInternalSnapshotBeforeUpdate=me}break;case 3:var Ee=m.stateNode.containerInfo;Ee.nodeType===1?Ee.textContent="":Ee.nodeType===9&&Ee.documentElement&&Ee.removeChild(Ee.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(i(163))}}catch(Ke){ln(m,m.return,Ke)}if(p=m.sibling,p!==null){p.return=m.return,yt=p;break}yt=m.return}return wt=nJ,nJ=!1,wt}function kT(p,m,w){var T=m.updateQueue;if(T=T!==null?T.lastEffect:null,T!==null){var M=T=T.next;do{if((M.tag&p)===p){var R=M.destroy;M.destroy=void 0,R!==void 0&&C5(m,w,R)}M=M.next}while(M!==T)}}function Lk(p,m){if(m=m.updateQueue,m=m!==null?m.lastEffect:null,m!==null){var w=m=m.next;do{if((w.tag&p)===p){var T=w.create;w.destroy=T()}w=w.next}while(w!==m)}}function M5(p){var m=p.ref;if(m!==null){var w=p.stateNode;switch(p.tag){case 5:p=w;break;default:p=w}typeof m=="function"?m(p):m.current=p}}function sJ(p){var m=p.alternate;m!==null&&(p.alternate=null,sJ(m)),p.child=null,p.deletions=null,p.sibling=null,p.tag===5&&(m=p.stateNode,m!==null&&(delete m[Sd],delete m[bT],delete m[qD],delete m[z1e],delete m[V1e])),p.stateNode=null,p.return=null,p.dependencies=null,p.memoizedProps=null,p.memoizedState=null,p.pendingProps=null,p.stateNode=null,p.updateQueue=null}function oJ(p){return p.tag===5||p.tag===3||p.tag===4}function aJ(p){e:for(;;){for(;p.sibling===null;){if(p.return===null||oJ(p.return))return null;p=p.return}for(p.sibling.return=p.return,p=p.sibling;p.tag!==5&&p.tag!==6&&p.tag!==18;){if(p.flags&2||p.child===null||p.tag===4)continue e;p.child.return=p,p=p.child}if(!(p.flags&2))return p.stateNode}}function k5(p,m,w){var T=p.tag;if(T===5||T===6)p=p.stateNode,m?w.nodeType===8?w.parentNode.insertBefore(p,m):w.insertBefore(p,m):(w.nodeType===8?(m=w.parentNode,m.insertBefore(p,w)):(m=w,m.appendChild(p)),w=w._reactRootContainer,w!=null||m.onclick!==null||(m.onclick=uk));else if(T!==4&&(p=p.child,p!==null))for(k5(p,m,w),p=p.sibling;p!==null;)k5(p,m,w),p=p.sibling}function P5(p,m,w){var T=p.tag;if(T===5||T===6)p=p.stateNode,m?w.insertBefore(p,m):w.appendChild(p);else if(T!==4&&(p=p.child,p!==null))for(P5(p,m,w),p=p.sibling;p!==null;)P5(p,m,w),p=p.sibling}var Ns=null,eu=!1;function Dm(p,m,w){for(w=w.child;w!==null;)lJ(p,m,w),w=w.sibling}function lJ(p,m,w){if(pa&&typeof pa.onCommitFiberUnmount=="function")try{pa.onCommitFiberUnmount(Hn,w)}catch{}switch(w.tag){case 5:lo||o_(w,m);case 6:var T=Ns,M=eu;Ns=null,Dm(p,m,w),Ns=T,eu=M,Ns!==null&&(eu?(p=Ns,w=w.stateNode,p.nodeType===8?p.parentNode.removeChild(w):p.removeChild(w)):Ns.removeChild(w.stateNode));break;case 18:Ns!==null&&(eu?(p=Ns,w=w.stateNode,p.nodeType===8?GD(p.parentNode,w):p.nodeType===1&&GD(p,w),fv(p)):GD(Ns,w.stateNode));break;case 4:T=Ns,M=eu,Ns=w.stateNode.containerInfo,eu=!0,Dm(p,m,w),Ns=T,eu=M;break;case 0:case 11:case 14:case 15:if(!lo&&(T=w.updateQueue,T!==null&&(T=T.lastEffect,T!==null))){M=T=T.next;do{var R=M,q=R.destroy;R=R.tag,q!==void 0&&((R&2)!==0||(R&4)!==0)&&C5(w,m,q),M=M.next}while(M!==T)}Dm(p,m,w);break;case 1:if(!lo&&(o_(w,m),T=w.stateNode,typeof T.componentWillUnmount=="function"))try{T.props=w.memoizedProps,T.state=w.memoizedState,T.componentWillUnmount()}catch(te){ln(w,m,te)}Dm(p,m,w);break;case 21:Dm(p,m,w);break;case 22:w.mode&1?(lo=(T=lo)||w.memoizedState!==null,Dm(p,m,w),lo=T):Dm(p,m,w);break;default:Dm(p,m,w)}}function cJ(p){var m=p.updateQueue;if(m!==null){p.updateQueue=null;var w=p.stateNode;w===null&&(w=p.stateNode=new ixe),m.forEach(function(T){var M=hxe.bind(null,p,T);w.has(T)||(w.add(T),T.then(M,M))})}}function tu(p,m){var w=m.deletions;if(w!==null)for(var T=0;T<w.length;T++){var M=w[T];try{var R=p,q=m,te=q;e:for(;te!==null;){switch(te.tag){case 5:Ns=te.stateNode,eu=!1;break e;case 3:Ns=te.stateNode.containerInfo,eu=!0;break e;case 4:Ns=te.stateNode.containerInfo,eu=!0;break e}te=te.return}if(Ns===null)throw Error(i(160));lJ(R,q,M),Ns=null,eu=!1;var le=M.alternate;le!==null&&(le.return=null),M.return=null}catch(Pe){ln(M,m,Pe)}}if(m.subtreeFlags&12854)for(m=m.child;m!==null;)uJ(m,p),m=m.sibling}function uJ(p,m){var w=p.alternate,T=p.flags;switch(p.tag){case 0:case 11:case 14:case 15:if(tu(m,p),Ed(p),T&4){try{kT(3,p,p.return),Lk(3,p)}catch(xt){ln(p,p.return,xt)}try{kT(5,p,p.return)}catch(xt){ln(p,p.return,xt)}}break;case 1:tu(m,p),Ed(p),T&512&&w!==null&&o_(w,w.return);break;case 5:if(tu(m,p),Ed(p),T&512&&w!==null&&o_(w,w.return),p.flags&32){var M=p.stateNode;try{Bc(M,"")}catch(xt){ln(p,p.return,xt)}}if(T&4&&(M=p.stateNode,M!=null)){var R=p.memoizedProps,q=w!==null?w.memoizedProps:R,te=p.type,le=p.updateQueue;if(p.updateQueue=null,le!==null)try{te==="input"&&R.type==="radio"&&R.name!=null&&jl(M,R),_m(te,q);var Pe=_m(te,R);for(q=0;q<le.length;q+=2){var We=le[q],Je=le[q+1];We==="style"?tv(M,Je):We==="dangerouslySetInnerHTML"?Cw(M,Je):We==="children"?Bc(M,Je):k(M,We,Je,Pe)}switch(te){case"input":ym(M,R);break;case"textarea":_p(M,R);break;case"select":var qe=M._wrapperState.wasMultiple;M._wrapperState.wasMultiple=!!R.multiple;var ht=R.value;ht!=null?Gn(M,!!R.multiple,ht,!1):qe!==!!R.multiple&&(R.defaultValue!=null?Gn(M,!!R.multiple,R.defaultValue,!0):Gn(M,!!R.multiple,R.multiple?[]:"",!1))}M[bT]=R}catch(xt){ln(p,p.return,xt)}}break;case 6:if(tu(m,p),Ed(p),T&4){if(p.stateNode===null)throw Error(i(162));M=p.stateNode,R=p.memoizedProps;try{M.nodeValue=R}catch(xt){ln(p,p.return,xt)}}break;case 3:if(tu(m,p),Ed(p),T&4&&w!==null&&w.memoizedState.isDehydrated)try{fv(m.containerInfo)}catch(xt){ln(p,p.return,xt)}break;case 4:tu(m,p),Ed(p);break;case 13:tu(m,p),Ed(p),M=p.child,M.flags&8192&&(R=M.memoizedState!==null,M.stateNode.isHidden=R,!R||M.alternate!==null&&M.alternate.memoizedState!==null||(R5=wr())),T&4&&cJ(p);break;case 22:if(We=w!==null&&w.memoizedState!==null,p.mode&1?(lo=(Pe=lo)||We,tu(m,p),lo=Pe):tu(m,p),Ed(p),T&8192){if(Pe=p.memoizedState!==null,(p.stateNode.isHidden=Pe)&&!We&&(p.mode&1)!==0)for(yt=p,We=p.child;We!==null;){for(Je=yt=We;yt!==null;){switch(qe=yt,ht=qe.child,qe.tag){case 0:case 11:case 14:case 15:kT(4,qe,qe.return);break;case 1:o_(qe,qe.return);var wt=qe.stateNode;if(typeof wt.componentWillUnmount=="function"){T=qe,w=qe.return;try{m=T,wt.props=m.memoizedProps,wt.state=m.memoizedState,wt.componentWillUnmount()}catch(xt){ln(T,w,xt)}}break;case 5:o_(qe,qe.return);break;case 22:if(qe.memoizedState!==null){pJ(Je);continue}}ht!==null?(ht.return=qe,yt=ht):pJ(Je)}We=We.sibling}e:for(We=null,Je=p;;){if(Je.tag===5){if(We===null){We=Je;try{M=Je.stateNode,Pe?(R=M.style,typeof R.setProperty=="function"?R.setProperty("display","none","important"):R.display="none"):(te=Je.stateNode,le=Je.memoizedProps.style,q=le!=null&&le.hasOwnProperty("display")?le.display:null,te.style.display=ev("display",q))}catch(xt){ln(p,p.return,xt)}}}else if(Je.tag===6){if(We===null)try{Je.stateNode.nodeValue=Pe?"":Je.memoizedProps}catch(xt){ln(p,p.return,xt)}}else if((Je.tag!==22&&Je.tag!==23||Je.memoizedState===null||Je===p)&&Je.child!==null){Je.child.return=Je,Je=Je.child;continue}if(Je===p)break e;for(;Je.sibling===null;){if(Je.return===null||Je.return===p)break e;We===Je&&(We=null),Je=Je.return}We===Je&&(We=null),Je.sibling.return=Je.return,Je=Je.sibling}}break;case 19:tu(m,p),Ed(p),T&4&&cJ(p);break;case 21:break;default:tu(m,p),Ed(p)}}function Ed(p){var m=p.flags;if(m&2){try{e:{for(var w=p.return;w!==null;){if(oJ(w)){var T=w;break e}w=w.return}throw Error(i(160))}switch(T.tag){case 5:var M=T.stateNode;T.flags&32&&(Bc(M,""),T.flags&=-33);var R=aJ(p);P5(p,R,M);break;case 3:case 4:var q=T.stateNode.containerInfo,te=aJ(p);k5(p,te,q);break;default:throw Error(i(161))}}catch(le){ln(p,p.return,le)}p.flags&=-3}m&4096&&(p.flags&=-4097)}function nxe(p,m,w){yt=p,dJ(p)}function dJ(p,m,w){for(var T=(p.mode&1)!==0;yt!==null;){var M=yt,R=M.child;if(M.tag===22&&T){var q=M.memoizedState!==null||Ak;if(!q){var te=M.alternate,le=te!==null&&te.memoizedState!==null||lo;te=Ak;var Pe=lo;if(Ak=q,(lo=le)&&!Pe)for(yt=M;yt!==null;)q=yt,le=q.child,q.tag===22&&q.memoizedState!==null?fJ(M):le!==null?(le.return=q,yt=le):fJ(M);for(;R!==null;)yt=R,dJ(R),R=R.sibling;yt=M,Ak=te,lo=Pe}hJ(p)}else(M.subtreeFlags&8772)!==0&&R!==null?(R.return=M,yt=R):hJ(p)}}function hJ(p){for(;yt!==null;){var m=yt;if((m.flags&8772)!==0){var w=m.alternate;try{if((m.flags&8772)!==0)switch(m.tag){case 0:case 11:case 15:lo||Lk(5,m);break;case 1:var T=m.stateNode;if(m.flags&4&&!lo)if(w===null)T.componentDidMount();else{var M=m.elementType===m.type?w.memoizedProps:Qc(m.type,w.memoizedProps);T.componentDidUpdate(M,w.memoizedState,T.__reactInternalSnapshotBeforeUpdate)}var R=m.updateQueue;R!==null&&pZ(m,R,T);break;case 3:var q=m.updateQueue;if(q!==null){if(w=null,m.child!==null)switch(m.child.tag){case 5:w=m.child.stateNode;break;case 1:w=m.child.stateNode}pZ(m,q,w)}break;case 5:var te=m.stateNode;if(w===null&&m.flags&4){w=te;var le=m.memoizedProps;switch(m.type){case"button":case"input":case"select":case"textarea":le.autoFocus&&w.focus();break;case"img":le.src&&(w.src=le.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(m.memoizedState===null){var Pe=m.alternate;if(Pe!==null){var We=Pe.memoizedState;if(We!==null){var Je=We.dehydrated;Je!==null&&fv(Je)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(i(163))}lo||m.flags&512&&M5(m)}catch(qe){ln(m,m.return,qe)}}if(m===p){yt=null;break}if(w=m.sibling,w!==null){w.return=m.return,yt=w;break}yt=m.return}}function pJ(p){for(;yt!==null;){var m=yt;if(m===p){yt=null;break}var w=m.sibling;if(w!==null){w.return=m.return,yt=w;break}yt=m.return}}function fJ(p){for(;yt!==null;){var m=yt;try{switch(m.tag){case 0:case 11:case 15:var w=m.return;try{Lk(4,m)}catch(le){ln(m,w,le)}break;case 1:var T=m.stateNode;if(typeof T.componentDidMount=="function"){var M=m.return;try{T.componentDidMount()}catch(le){ln(m,M,le)}}var R=m.return;try{M5(m)}catch(le){ln(m,R,le)}break;case 5:var q=m.return;try{M5(m)}catch(le){ln(m,q,le)}}}catch(le){ln(m,m.return,le)}if(m===p){yt=null;break}var te=m.sibling;if(te!==null){te.return=m.return,yt=te;break}yt=m.return}}var sxe=Math.ceil,Rk=O.ReactCurrentDispatcher,A5=O.ReactCurrentOwner,Ql=O.ReactCurrentBatchConfig,Pi=0,gs=null,Wn=null,Ds=0,ol=0,a_=Lm(0),ns=0,PT=null,Av=0,Ok=0,L5=0,AT=null,ga=null,R5=0,l_=1/0,kp=null,Fk=!1,O5=null,zm=null,Nk=!1,Vm=null,Dk=0,LT=0,F5=null,zk=-1,Vk=0;function No(){return(Pi&6)!==0?wr():zk!==-1?zk:zk=wr()}function jm(p){return(p.mode&1)===0?1:(Pi&2)!==0&&Ds!==0?Ds&-Ds:U1e.transition!==null?(Vk===0&&(Vk=cv()),Vk):(p=Oi,p!==0||(p=window.event,p=p===void 0?16:H2(p.type)),p)}function iu(p,m,w,T){if(50<LT)throw LT=0,F5=null,Error(i(185));Yc(p,w,T),((Pi&2)===0||p!==gs)&&(p===gs&&((Pi&2)===0&&(Ok|=w),ns===4&&Um(p,Ds)),va(p,T),w===1&&Pi===0&&(m.mode&1)===0&&(l_=wr()+500,fk&&Om()))}function va(p,m){var w=p.callbackNode;Cr(p,m);var T=Yi(p,p===gs?Ds:0);if(T===0)w!==null&&Pw(w),p.callbackNode=null,p.callbackPriority=0;else if(m=T&-T,p.callbackPriority!==m){if(w!=null&&Pw(w),m===1)p.tag===0?j1e(yJ.bind(null,p)):tZ(yJ.bind(null,p)),N1e(function(){(Pi&6)===0&&Om()}),w=null;else{switch(Ow(T)){case 1:w=$m;break;case 4:w=ov;break;case 16:w=Jc;break;case 536870912:w=Tm;break;default:w=Jc}w=$J(w,mJ.bind(null,p))}p.callbackPriority=m,p.callbackNode=w}}function mJ(p,m){if(zk=-1,Vk=0,(Pi&6)!==0)throw Error(i(327));var w=p.callbackNode;if(c_()&&p.callbackNode!==w)return null;var T=Yi(p,p===gs?Ds:0);if(T===0)return null;if((T&30)!==0||(T&p.expiredLanes)!==0||m)m=jk(p,T);else{m=T;var M=Pi;Pi|=2;var R=vJ();(gs!==p||Ds!==m)&&(kp=null,l_=wr()+500,Rv(p,m));do try{lxe();break}catch(te){gJ(p,te)}while(!0);e5(),Rk.current=R,Pi=M,Wn!==null?m=0:(gs=null,Ds=0,m=ns)}if(m!==0){if(m===2&&(M=lv(p),M!==0&&(T=M,m=N5(p,M))),m===1)throw w=PT,Rv(p,0),Um(p,T),va(p,wr()),w;if(m===6)Um(p,T);else{if(M=p.current.alternate,(T&30)===0&&!oxe(M)&&(m=jk(p,T),m===2&&(R=lv(p),R!==0&&(T=R,m=N5(p,R))),m===1))throw w=PT,Rv(p,0),Um(p,T),va(p,wr()),w;switch(p.finishedWork=M,p.finishedLanes=T,m){case 0:case 1:throw Error(i(345));case 2:Ov(p,ga,kp);break;case 3:if(Um(p,T),(T&130023424)===T&&(m=R5+500-wr(),10<m)){if(Yi(p,0)!==0)break;if(M=p.suspendedLanes,(M&T)!==T){No(),p.pingedLanes|=p.suspendedLanes&M;break}p.timeoutHandle=BD(Ov.bind(null,p,ga,kp),m);break}Ov(p,ga,kp);break;case 4:if(Um(p,T),(T&4194240)===T)break;for(m=p.eventTimes,M=-1;0<T;){var q=31-Fs(T);R=1<<q,q=m[q],q>M&&(M=q),T&=~R}if(T=M,T=wr()-T,T=(120>T?120:480>T?480:1080>T?1080:1920>T?1920:3e3>T?3e3:4320>T?4320:1960*sxe(T/1960))-T,10<T){p.timeoutHandle=BD(Ov.bind(null,p,ga,kp),T);break}Ov(p,ga,kp);break;case 5:Ov(p,ga,kp);break;default:throw Error(i(329))}}}return va(p,wr()),p.callbackNode===w?mJ.bind(null,p):null}function N5(p,m){var w=AT;return p.current.memoizedState.isDehydrated&&(Rv(p,m).flags|=256),p=jk(p,m),p!==2&&(m=ga,ga=w,m!==null&&D5(m)),p}function D5(p){ga===null?ga=p:ga.push.apply(ga,p)}function oxe(p){for(var m=p;;){if(m.flags&16384){var w=m.updateQueue;if(w!==null&&(w=w.stores,w!==null))for(var T=0;T<w.length;T++){var M=w[T],R=M.getSnapshot;M=M.value;try{if(!Zt(R(),M))return!1}catch{return!1}}}if(w=m.child,m.subtreeFlags&16384&&w!==null)w.return=m,m=w;else{if(m===p)break;for(;m.sibling===null;){if(m.return===null||m.return===p)return!0;m=m.return}m.sibling.return=m.return,m=m.sibling}}return!0}function Um(p,m){for(m&=~L5,m&=~Ok,p.suspendedLanes|=m,p.pingedLanes&=~m,p=p.expirationTimes;0<m;){var w=31-Fs(m),T=1<<w;p[w]=-1,m&=~T}}function yJ(p){if((Pi&6)!==0)throw Error(i(327));c_();var m=Yi(p,0);if((m&1)===0)return va(p,wr()),null;var w=jk(p,m);if(p.tag!==0&&w===2){var T=lv(p);T!==0&&(m=T,w=N5(p,T))}if(w===1)throw w=PT,Rv(p,0),Um(p,m),va(p,wr()),w;if(w===6)throw Error(i(345));return p.finishedWork=p.current.alternate,p.finishedLanes=m,Ov(p,ga,kp),va(p,wr()),null}function z5(p,m){var w=Pi;Pi|=1;try{return p(m)}finally{Pi=w,Pi===0&&(l_=wr()+500,fk&&Om())}}function Lv(p){Vm!==null&&Vm.tag===0&&(Pi&6)===0&&c_();var m=Pi;Pi|=1;var w=Ql.transition,T=Oi;try{if(Ql.transition=null,Oi=1,p)return p()}finally{Oi=T,Ql.transition=w,Pi=m,(Pi&6)===0&&Om()}}function V5(){ol=a_.current,kr(a_)}function Rv(p,m){p.finishedWork=null,p.finishedLanes=0;var w=p.timeoutHandle;if(w!==-1&&(p.timeoutHandle=-1,F1e(w)),Wn!==null)for(w=Wn.return;w!==null;){var T=w;switch(JD(T),T.tag){case 1:T=T.type.childContextTypes,T!=null&&hk();break;case 3:n_(),kr(fa),kr(so),l5();break;case 5:o5(T);break;case 4:n_();break;case 13:kr(Gr);break;case 19:kr(Gr);break;case 10:t5(T.type._context);break;case 22:case 23:V5()}w=w.return}if(gs=p,Wn=p=Bm(p.current,null),Ds=ol=m,ns=0,PT=null,L5=Ok=Av=0,ga=AT=null,Mv!==null){for(m=0;m<Mv.length;m++)if(w=Mv[m],T=w.interleaved,T!==null){w.interleaved=null;var M=T.next,R=w.pending;if(R!==null){var q=R.next;R.next=M,T.next=q}w.pending=T}Mv=null}return p}function gJ(p,m){do{var w=Wn;try{if(e5(),$k.current=Ck,Tk){for(var T=qr.memoizedState;T!==null;){var M=T.queue;M!==null&&(M.pending=null),T=T.next}Tk=!1}if(Pv=0,ys=rs=qr=null,TT=!1,ET=0,A5.current=null,w===null||w.return===null){ns=1,PT=m,Wn=null;break}e:{var R=p,q=w.return,te=w,le=m;if(m=Ds,te.flags|=32768,le!==null&&typeof le=="object"&&typeof le.then=="function"){var Pe=le,We=te,Je=We.tag;if((We.mode&1)===0&&(Je===0||Je===11||Je===15)){var qe=We.alternate;qe?(We.updateQueue=qe.updateQueue,We.memoizedState=qe.memoizedState,We.lanes=qe.lanes):(We.updateQueue=null,We.memoizedState=null)}var ht=UZ(q);if(ht!==null){ht.flags&=-257,BZ(ht,q,te,R,m),ht.mode&1&&jZ(R,Pe,m),m=ht,le=Pe;var wt=m.updateQueue;if(wt===null){var xt=new Set;xt.add(le),m.updateQueue=xt}else wt.add(le);break e}else{if((m&1)===0){jZ(R,Pe,m),j5();break e}le=Error(i(426))}}else if(Dr&&te.mode&1){var Cn=UZ(q);if(Cn!==null){(Cn.flags&65536)===0&&(Cn.flags|=256),BZ(Cn,q,te,R,m),KD(s_(le,te));break e}}R=le=s_(le,te),ns!==4&&(ns=2),AT===null?AT=[R]:AT.push(R),R=q;do{switch(R.tag){case 3:R.flags|=65536,m&=-m,R.lanes|=m;var xe=zZ(R,le,m);hZ(R,xe);break e;case 1:te=le;var me=R.type,Ee=R.stateNode;if((R.flags&128)===0&&(typeof me.getDerivedStateFromError=="function"||Ee!==null&&typeof Ee.componentDidCatch=="function"&&(zm===null||!zm.has(Ee)))){R.flags|=65536,m&=-m,R.lanes|=m;var Ke=VZ(R,te,m);hZ(R,Ke);break e}}R=R.return}while(R!==null)}wJ(w)}catch(St){m=St,Wn===w&&w!==null&&(Wn=w=w.return);continue}break}while(!0)}function vJ(){var p=Rk.current;return Rk.current=Ck,p===null?Ck:p}function j5(){(ns===0||ns===3||ns===2)&&(ns=4),gs===null||(Av&268435455)===0&&(Ok&268435455)===0||Um(gs,Ds)}function jk(p,m){var w=Pi;Pi|=2;var T=vJ();(gs!==p||Ds!==m)&&(kp=null,Rv(p,m));do try{axe();break}catch(M){gJ(p,M)}while(!0);if(e5(),Pi=w,Rk.current=T,Wn!==null)throw Error(i(261));return gs=null,Ds=0,ns}function axe(){for(;Wn!==null;)bJ(Wn)}function lxe(){for(;Wn!==null&&!sv();)bJ(Wn)}function bJ(p){var m=SJ(p.alternate,p,ol);p.memoizedProps=p.pendingProps,m===null?wJ(p):Wn=m,A5.current=null}function wJ(p){var m=p;do{var w=m.alternate;if(p=m.return,(m.flags&32768)===0){if(w=exe(w,m,ol),w!==null){Wn=w;return}}else{if(w=txe(w,m),w!==null){w.flags&=32767,Wn=w;return}if(p!==null)p.flags|=32768,p.subtreeFlags=0,p.deletions=null;else{ns=6,Wn=null;return}}if(m=m.sibling,m!==null){Wn=m;return}Wn=m=p}while(m!==null);ns===0&&(ns=5)}function Ov(p,m,w){var T=Oi,M=Ql.transition;try{Ql.transition=null,Oi=1,cxe(p,m,w,T)}finally{Ql.transition=M,Oi=T}return null}function cxe(p,m,w,T){do c_();while(Vm!==null);if((Pi&6)!==0)throw Error(i(327));w=p.finishedWork;var M=p.finishedLanes;if(w===null)return null;if(p.finishedWork=null,p.finishedLanes=0,w===p.current)throw Error(i(177));p.callbackNode=null,p.callbackPriority=0;var R=w.lanes|w.childLanes;if(gD(p,R),p===gs&&(Wn=gs=null,Ds=0),(w.subtreeFlags&2064)===0&&(w.flags&2064)===0||Nk||(Nk=!0,$J(Jc,function(){return c_(),null})),R=(w.flags&15990)!==0,(w.subtreeFlags&15990)!==0||R){R=Ql.transition,Ql.transition=null;var q=Oi;Oi=1;var te=Pi;Pi|=4,A5.current=null,rxe(p,w),uJ(w,p),Xc(jD),mv=!!VD,jD=VD=null,p.current=w,nxe(w),an(),Pi=te,Oi=q,Ql.transition=R}else p.current=w;if(Nk&&(Nk=!1,Vm=p,Dk=M),R=p.pendingLanes,R===0&&(zm=null),av(w.stateNode),va(p,wr()),m!==null)for(T=p.onRecoverableError,w=0;w<m.length;w++)M=m[w],T(M.value,{componentStack:M.stack,digest:M.digest});if(Fk)throw Fk=!1,p=O5,O5=null,p;return(Dk&1)!==0&&p.tag!==0&&c_(),R=p.pendingLanes,(R&1)!==0?p===F5?LT++:(LT=0,F5=p):LT=0,Om(),null}function c_(){if(Vm!==null){var p=Ow(Dk),m=Ql.transition,w=Oi;try{if(Ql.transition=null,Oi=16>p?16:p,Vm===null)var T=!1;else{if(p=Vm,Vm=null,Dk=0,(Pi&6)!==0)throw Error(i(331));var M=Pi;for(Pi|=4,yt=p.current;yt!==null;){var R=yt,q=R.child;if((yt.flags&16)!==0){var te=R.deletions;if(te!==null){for(var le=0;le<te.length;le++){var Pe=te[le];for(yt=Pe;yt!==null;){var We=yt;switch(We.tag){case 0:case 11:case 15:kT(8,We,R)}var Je=We.child;if(Je!==null)Je.return=We,yt=Je;else for(;yt!==null;){We=yt;var qe=We.sibling,ht=We.return;if(sJ(We),We===Pe){yt=null;break}if(qe!==null){qe.return=ht,yt=qe;break}yt=ht}}}var wt=R.alternate;if(wt!==null){var xt=wt.child;if(xt!==null){wt.child=null;do{var Cn=xt.sibling;xt.sibling=null,xt=Cn}while(xt!==null)}}yt=R}}if((R.subtreeFlags&2064)!==0&&q!==null)q.return=R,yt=q;else e:for(;yt!==null;){if(R=yt,(R.flags&2048)!==0)switch(R.tag){case 0:case 11:case 15:kT(9,R,R.return)}var xe=R.sibling;if(xe!==null){xe.return=R.return,yt=xe;break e}yt=R.return}}var me=p.current;for(yt=me;yt!==null;){q=yt;var Ee=q.child;if((q.subtreeFlags&2064)!==0&&Ee!==null)Ee.return=q,yt=Ee;else e:for(q=me;yt!==null;){if(te=yt,(te.flags&2048)!==0)try{switch(te.tag){case 0:case 11:case 15:Lk(9,te)}}catch(St){ln(te,te.return,St)}if(te===q){yt=null;break e}var Ke=te.sibling;if(Ke!==null){Ke.return=te.return,yt=Ke;break e}yt=te.return}}if(Pi=M,Om(),pa&&typeof pa.onPostCommitFiberRoot=="function")try{pa.onPostCommitFiberRoot(Hn,p)}catch{}T=!0}return T}finally{Oi=w,Ql.transition=m}}return!1}function _J(p,m,w){m=s_(w,m),m=zZ(p,m,1),p=Nm(p,m,1),m=No(),p!==null&&(Yc(p,1,m),va(p,m))}function ln(p,m,w){if(p.tag===3)_J(p,p,w);else for(;m!==null;){if(m.tag===3){_J(m,p,w);break}else if(m.tag===1){var T=m.stateNode;if(typeof m.type.getDerivedStateFromError=="function"||typeof T.componentDidCatch=="function"&&(zm===null||!zm.has(T))){p=s_(w,p),p=VZ(m,p,1),m=Nm(m,p,1),p=No(),m!==null&&(Yc(m,1,p),va(m,p));break}}m=m.return}}function uxe(p,m,w){var T=p.pingCache;T!==null&&T.delete(m),m=No(),p.pingedLanes|=p.suspendedLanes&w,gs===p&&(Ds&w)===w&&(ns===4||ns===3&&(Ds&130023424)===Ds&&500>wr()-R5?Rv(p,0):L5|=w),va(p,m)}function xJ(p,m){m===0&&((p.mode&1)===0?m=1:(m=Et,Et<<=1,(Et&130023424)===0&&(Et=4194304)));var w=No();p=Ip(p,m),p!==null&&(Yc(p,m,w),va(p,w))}function dxe(p){var m=p.memoizedState,w=0;m!==null&&(w=m.retryLane),xJ(p,w)}function hxe(p,m){var w=0;switch(p.tag){case 13:var T=p.stateNode,M=p.memoizedState;M!==null&&(w=M.retryLane);break;case 19:T=p.stateNode;break;default:throw Error(i(314))}T!==null&&T.delete(m),xJ(p,w)}var SJ;SJ=function(p,m,w){if(p!==null)if(p.memoizedProps!==m.pendingProps||fa.current)ya=!0;else{if((p.lanes&w)===0&&(m.flags&128)===0)return ya=!1,Q1e(p,m,w);ya=(p.flags&131072)!==0}else ya=!1,Dr&&(m.flags&1048576)!==0&&iZ(m,yk,m.index);switch(m.lanes=0,m.tag){case 2:var T=m.type;Pk(p,m),p=m.pendingProps;var M=Xw(m,so.current);r_(m,w),M=d5(null,m,T,p,M,w);var R=h5();return m.flags|=1,typeof M=="object"&&M!==null&&typeof M.render=="function"&&M.$$typeof===void 0?(m.tag=1,m.memoizedState=null,m.updateQueue=null,ma(T)?(R=!0,pk(m)):R=!1,m.memoizedState=M.state!==null&&M.state!==void 0?M.state:null,n5(m),M.updater=Mk,m.stateNode=M,M._reactInternals=m,v5(m,T,p,w),m=x5(null,m,T,!0,R,w)):(m.tag=0,Dr&&R&&ZD(m),Fo(null,m,M,w),m=m.child),m;case 16:T=m.elementType;e:{switch(Pk(p,m),p=m.pendingProps,M=T._init,T=M(T._payload),m.type=T,M=m.tag=fxe(T),p=Qc(T,p),M){case 0:m=_5(null,m,T,p,w);break e;case 1:m=JZ(null,m,T,p,w);break e;case 11:m=GZ(null,m,T,p,w);break e;case 14:m=qZ(null,m,T,Qc(T.type,p),w);break e}throw Error(i(306,T,""))}return m;case 0:return T=m.type,M=m.pendingProps,M=m.elementType===T?M:Qc(T,M),_5(p,m,T,M,w);case 1:return T=m.type,M=m.pendingProps,M=m.elementType===T?M:Qc(T,M),JZ(p,m,T,M,w);case 3:e:{if(YZ(m),p===null)throw Error(i(387));T=m.pendingProps,R=m.memoizedState,M=R.element,dZ(p,m),xk(m,T,null,w);var q=m.memoizedState;if(T=q.element,R.isDehydrated)if(R={element:T,isDehydrated:!1,cache:q.cache,pendingSuspenseBoundaries:q.pendingSuspenseBoundaries,transitions:q.transitions},m.updateQueue.baseState=R,m.memoizedState=R,m.flags&256){M=s_(Error(i(423)),m),m=XZ(p,m,T,w,M);break e}else if(T!==M){M=s_(Error(i(424)),m),m=XZ(p,m,T,w,M);break e}else for(sl=Am(m.stateNode.containerInfo.firstChild),nl=m,Dr=!0,Kc=null,w=cZ(m,null,T,w),m.child=w;w;)w.flags=w.flags&-3|4096,w=w.sibling;else{if(e_(),T===M){m=Mp(p,m,w);break e}Fo(p,m,T,w)}m=m.child}return m;case 5:return fZ(m),p===null&&XD(m),T=m.type,M=m.pendingProps,R=p!==null?p.memoizedProps:null,q=M.children,UD(T,M)?q=null:R!==null&&UD(T,R)&&(m.flags|=32),ZZ(p,m),Fo(p,m,q,w),m.child;case 6:return p===null&&XD(m),null;case 13:return KZ(p,m,w);case 4:return s5(m,m.stateNode.containerInfo),T=m.pendingProps,p===null?m.child=t_(m,null,T,w):Fo(p,m,T,w),m.child;case 11:return T=m.type,M=m.pendingProps,M=m.elementType===T?M:Qc(T,M),GZ(p,m,T,M,w);case 7:return Fo(p,m,m.pendingProps,w),m.child;case 8:return Fo(p,m,m.pendingProps.children,w),m.child;case 12:return Fo(p,m,m.pendingProps.children,w),m.child;case 10:e:{if(T=m.type._context,M=m.pendingProps,R=m.memoizedProps,q=M.value,xr(bk,T._currentValue),T._currentValue=q,R!==null)if(Zt(R.value,q)){if(R.children===M.children&&!fa.current){m=Mp(p,m,w);break e}}else for(R=m.child,R!==null&&(R.return=m);R!==null;){var te=R.dependencies;if(te!==null){q=R.child;for(var le=te.firstContext;le!==null;){if(le.context===T){if(R.tag===1){le=Cp(-1,w&-w),le.tag=2;var Pe=R.updateQueue;if(Pe!==null){Pe=Pe.shared;var We=Pe.pending;We===null?le.next=le:(le.next=We.next,We.next=le),Pe.pending=le}}R.lanes|=w,le=R.alternate,le!==null&&(le.lanes|=w),i5(R.return,w,m),te.lanes|=w;break}le=le.next}}else if(R.tag===10)q=R.type===m.type?null:R.child;else if(R.tag===18){if(q=R.return,q===null)throw Error(i(341));q.lanes|=w,te=q.alternate,te!==null&&(te.lanes|=w),i5(q,w,m),q=R.sibling}else q=R.child;if(q!==null)q.return=R;else for(q=R;q!==null;){if(q===m){q=null;break}if(R=q.sibling,R!==null){R.return=q.return,q=R;break}q=q.return}R=q}Fo(p,m,M.children,w),m=m.child}return m;case 9:return M=m.type,T=m.pendingProps.children,r_(m,w),M=Xl(M),T=T(M),m.flags|=1,Fo(p,m,T,w),m.child;case 14:return T=m.type,M=Qc(T,m.pendingProps),M=Qc(T.type,M),qZ(p,m,T,M,w);case 15:return HZ(p,m,m.type,m.pendingProps,w);case 17:return T=m.type,M=m.pendingProps,M=m.elementType===T?M:Qc(T,M),Pk(p,m),m.tag=1,ma(T)?(p=!0,pk(m)):p=!1,r_(m,w),NZ(m,T,M),v5(m,T,M,w),x5(null,m,T,!0,p,w);case 19:return eJ(p,m,w);case 22:return WZ(p,m,w)}throw Error(i(156,m.tag))};function $J(p,m){return yd(p,m)}function pxe(p,m,w,T){this.tag=p,this.key=w,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=m,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=T,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ec(p,m,w,T){return new pxe(p,m,w,T)}function U5(p){return p=p.prototype,!(!p||!p.isReactComponent)}function fxe(p){if(typeof p=="function")return U5(p)?1:0;if(p!=null){if(p=p.$$typeof,p===he)return 11;if(p===ke)return 14}return 2}function Bm(p,m){var w=p.alternate;return w===null?(w=ec(p.tag,m,p.key,p.mode),w.elementType=p.elementType,w.type=p.type,w.stateNode=p.stateNode,w.alternate=p,p.alternate=w):(w.pendingProps=m,w.type=p.type,w.flags=0,w.subtreeFlags=0,w.deletions=null),w.flags=p.flags&14680064,w.childLanes=p.childLanes,w.lanes=p.lanes,w.child=p.child,w.memoizedProps=p.memoizedProps,w.memoizedState=p.memoizedState,w.updateQueue=p.updateQueue,m=p.dependencies,w.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext},w.sibling=p.sibling,w.index=p.index,w.ref=p.ref,w}function Uk(p,m,w,T,M,R){var q=2;if(T=p,typeof p=="function")U5(p)&&(q=1);else if(typeof p=="string")q=5;else e:switch(p){case j:return Fv(w.children,M,R,m);case Z:q=8,M|=8;break;case X:return p=ec(12,w,m,M|2),p.elementType=X,p.lanes=R,p;case ne:return p=ec(13,w,m,M),p.elementType=ne,p.lanes=R,p;case re:return p=ec(19,w,m,M),p.elementType=re,p.lanes=R,p;case Ae:return Bk(w,M,R,m);default:if(typeof p=="object"&&p!==null)switch(p.$$typeof){case ee:q=10;break e;case pe:q=9;break e;case he:q=11;break e;case ke:q=14;break e;case Fe:q=16,T=null;break e}throw Error(i(130,p==null?p:typeof p,""))}return m=ec(q,w,m,M),m.elementType=p,m.type=T,m.lanes=R,m}function Fv(p,m,w,T){return p=ec(7,p,T,m),p.lanes=w,p}function Bk(p,m,w,T){return p=ec(22,p,T,m),p.elementType=Ae,p.lanes=w,p.stateNode={isHidden:!1},p}function B5(p,m,w){return p=ec(6,p,null,m),p.lanes=w,p}function G5(p,m,w){return m=ec(4,p.children!==null?p.children:[],p.key,m),m.lanes=w,m.stateNode={containerInfo:p.containerInfo,pendingChildren:null,implementation:p.implementation},m}function mxe(p,m,w,T,M){this.tag=m,this.containerInfo=p,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ql(0),this.expirationTimes=ql(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ql(0),this.identifierPrefix=T,this.onRecoverableError=M,this.mutableSourceEagerHydrationData=null}function q5(p,m,w,T,M,R,q,te,le){return p=new mxe(p,m,w,te,le),m===1?(m=1,R===!0&&(m|=8)):m=0,R=ec(3,null,null,m),p.current=R,R.stateNode=p,R.memoizedState={element:T,isDehydrated:w,cache:null,transitions:null,pendingSuspenseBoundaries:null},n5(R),p}function yxe(p,m,w){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:B,key:T==null?null:""+T,children:p,containerInfo:m,implementation:w}}function TJ(p){if(!p)return Rm;p=p._reactInternals;e:{if(Mt(p)!==p||p.tag!==1)throw Error(i(170));var m=p;do{switch(m.tag){case 3:m=m.stateNode.context;break e;case 1:if(ma(m.type)){m=m.stateNode.__reactInternalMemoizedMergedChildContext;break e}}m=m.return}while(m!==null);throw Error(i(171))}if(p.tag===1){var w=p.type;if(ma(w))return QW(p,w,m)}return m}function EJ(p,m,w,T,M,R,q,te,le){return p=q5(w,T,!0,p,M,R,q,te,le),p.context=TJ(null),w=p.current,T=No(),M=jm(w),R=Cp(T,M),R.callback=m??null,Nm(w,R,M),p.current.lanes=M,Yc(p,M,T),va(p,T),p}function Gk(p,m,w,T){var M=m.current,R=No(),q=jm(M);return w=TJ(w),m.context===null?m.context=w:m.pendingContext=w,m=Cp(R,q),m.payload={element:p},T=T===void 0?null:T,T!==null&&(m.callback=T),p=Nm(M,m,q),p!==null&&(iu(p,M,q,R),_k(p,M,q)),q}function qk(p){if(p=p.current,!p.child)return null;switch(p.child.tag){case 5:return p.child.stateNode;default:return p.child.stateNode}}function IJ(p,m){if(p=p.memoizedState,p!==null&&p.dehydrated!==null){var w=p.retryLane;p.retryLane=w!==0&&w<m?w:m}}function H5(p,m){IJ(p,m),(p=p.alternate)&&IJ(p,m)}function gxe(){return null}var CJ=typeof reportError=="function"?reportError:function(p){console.error(p)};function W5(p){this._internalRoot=p}Hk.prototype.render=W5.prototype.render=function(p){var m=this._internalRoot;if(m===null)throw Error(i(409));Gk(p,m,null,null)},Hk.prototype.unmount=W5.prototype.unmount=function(){var p=this._internalRoot;if(p!==null){this._internalRoot=null;var m=p.containerInfo;Lv(function(){Gk(null,p,null,null)}),m[Sp]=null}};function Hk(p){this._internalRoot=p}Hk.prototype.unstable_scheduleHydration=function(p){if(p){var m=B2();p={blockedOn:null,target:p,priority:m};for(var w=0;w<rl.length&&m!==0&&m<rl[w].priority;w++);rl.splice(w,0,p),w===0&&sT(p)}};function Z5(p){return!(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)}function Wk(p){return!(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11&&(p.nodeType!==8||p.nodeValue!==" react-mount-point-unstable "))}function MJ(){}function vxe(p,m,w,T,M){if(M){if(typeof T=="function"){var R=T;T=function(){var Pe=qk(q);R.call(Pe)}}var q=EJ(m,T,p,0,null,!1,!1,"",MJ);return p._reactRootContainer=q,p[Sp]=q.current,gT(p.nodeType===8?p.parentNode:p),Lv(),q}for(;M=p.lastChild;)p.removeChild(M);if(typeof T=="function"){var te=T;T=function(){var Pe=qk(le);te.call(Pe)}}var le=q5(p,0,!1,null,null,!1,!1,"",MJ);return p._reactRootContainer=le,p[Sp]=le.current,gT(p.nodeType===8?p.parentNode:p),Lv(function(){Gk(m,le,w,T)}),le}function Zk(p,m,w,T,M){var R=w._reactRootContainer;if(R){var q=R;if(typeof M=="function"){var te=M;M=function(){var le=qk(q);te.call(le)}}Gk(m,q,p,M)}else q=vxe(w,m,p,M,T);return qk(q)}U2=function(p){switch(p.tag){case 3:var m=p.stateNode;if(m.current.memoizedState.isDehydrated){var w=bi(m.pendingLanes);w!==0&&(Rw(m,w|1),va(m,wr()),(Pi&6)===0&&(l_=wr()+500,Om()))}break;case 13:Lv(function(){var T=Ip(p,1);if(T!==null){var M=No();iu(T,p,1,M)}}),H5(p,1)}},iT=function(p){if(p.tag===13){var m=Ip(p,134217728);if(m!==null){var w=No();iu(m,p,134217728,w)}H5(p,134217728)}},rT=function(p){if(p.tag===13){var m=jm(p),w=Ip(p,m);if(w!==null){var T=No();iu(w,p,m,T)}H5(p,m)}},B2=function(){return Oi},G2=function(p,m){var w=Oi;try{return Oi=p,m()}finally{Oi=w}},Ul=function(p,m,w){switch(m){case"input":if(ym(p,w),m=w.name,w.type==="radio"&&m!=null){for(w=p;w.parentNode;)w=w.parentNode;for(w=w.querySelectorAll("input[name="+JSON.stringify(""+m)+'][type="radio"]'),m=0;m<w.length;m++){var T=w[m];if(T!==p&&T.form===p.form){var M=dk(T);if(!M)throw Error(i(90));Vl(T),ym(T,M)}}}break;case"textarea":_p(p,w);break;case"select":m=w.value,m!=null&&Gn(p,!!w.multiple,m,!1)}},rv=z5,Ce=Lv;var bxe={usingClientEntryPoint:!1,Events:[wT,Jw,dk,xm,Sm,z5]},RT={findFiberByHostInstance:Tv,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},wxe={bundleType:RT.bundleType,version:RT.version,rendererPackageName:RT.rendererPackageName,rendererConfig:RT.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:O.ReactCurrentDispatcher,findHostInstanceByFiber:function(p){return p=kw(p),p===null?null:p.stateNode},findFiberByHostInstance:RT.findFiberByHostInstance||gxe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jk=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jk.isDisabled&&Jk.supportsFiber)try{Hn=Jk.inject(wxe),pa=Jk}catch{}}return ba.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bxe,ba.createPortal=function(p,m){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Z5(m))throw Error(i(200));return yxe(p,m,null,w)},ba.createRoot=function(p,m){if(!Z5(p))throw Error(i(299));var w=!1,T="",M=CJ;return m!=null&&(m.unstable_strictMode===!0&&(w=!0),m.identifierPrefix!==void 0&&(T=m.identifierPrefix),m.onRecoverableError!==void 0&&(M=m.onRecoverableError)),m=q5(p,1,!1,null,null,w,!1,T,M),p[Sp]=m.current,gT(p.nodeType===8?p.parentNode:p),new W5(m)},ba.findDOMNode=function(p){if(p==null)return null;if(p.nodeType===1)return p;var m=p._reactInternals;if(m===void 0)throw typeof p.render=="function"?Error(i(188)):(p=Object.keys(p).join(","),Error(i(268,p)));return p=kw(m),p=p===null?null:p.stateNode,p},ba.flushSync=function(p){return Lv(p)},ba.hydrate=function(p,m,w){if(!Wk(m))throw Error(i(200));return Zk(null,p,m,!0,w)},ba.hydrateRoot=function(p,m,w){if(!Z5(p))throw Error(i(405));var T=w!=null&&w.hydratedSources||null,M=!1,R="",q=CJ;if(w!=null&&(w.unstable_strictMode===!0&&(M=!0),w.identifierPrefix!==void 0&&(R=w.identifierPrefix),w.onRecoverableError!==void 0&&(q=w.onRecoverableError)),m=EJ(m,null,p,1,w??null,M,!1,R,q),p[Sp]=m.current,gT(p),T)for(p=0;p<T.length;p++)w=T[p],M=w._getVersion,M=M(w._source),m.mutableSourceEagerHydrationData==null?m.mutableSourceEagerHydrationData=[w,M]:m.mutableSourceEagerHydrationData.push(w,M);return new Hk(m)},ba.render=function(p,m,w){if(!Wk(m))throw Error(i(200));return Zk(null,p,m,!1,w)},ba.unmountComponentAtNode=function(p){if(!Wk(p))throw Error(i(40));return p._reactRootContainer?(Lv(function(){Zk(null,null,p,!1,function(){p._reactRootContainer=null,p[Sp]=null})}),!0):!1},ba.unstable_batchedUpdates=z5,ba.unstable_renderSubtreeIntoContainer=function(p,m,w,T){if(!Wk(w))throw Error(i(200));if(p==null||p._reactInternals===void 0)throw Error(i(38));return Zk(p,m,w,!1,T)},ba.version="18.3.1-next-f1338f8080-20240426",ba}var DJ;function Pxe(){if(DJ)return K5.exports;DJ=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),K5.exports=kxe(),K5.exports}var zJ;function Axe(){if(zJ)return Xk;zJ=1;var t=Pxe();return Xk.createRoot=t.createRoot,Xk.hydrateRoot=t.hydrateRoot,Xk}var Lxe=Axe();const ii=(t,e,...i)=>{try{return t==null?void 0:t.call(e,...i)}catch(r){console.error(r,t)}},GS=async(t,e,...i)=>{try{return await(t==null?void 0:t.call(e,...i))}catch(r){console.error(r,t)}},T7=Symbol.for("controller"),Rxe=t=>typeof t=="object"&&t!==null&&(T7 in t||"hostConnected"in t||"hostDisconnected"in t||"hostUpdate"in t||"hostUpdated"in t),Oxe=t=>typeof(t==null?void 0:t.then)=="function";let EE;const U1=t=>{EE!==t&&(EE=t,queueMicrotask(()=>EE===t?EE=void 0:0))},MF=t=>EE;let e0=[];const yae=t=>{if(t===void 0){e0=[];return}const e=e0.indexOf(t);e0=e===-1?[...e0,t]:e0.slice(0,e+1),queueMicrotask(()=>e0=[])},gae=()=>e0;let B1;const Fxe=t=>{B1!==t&&(B1=t,queueMicrotask(()=>B1===t?B1=void 0:0))},Nxe=()=>{const t=B1;return B1=void 0,t},Dxe=async(t,e)=>{const i=E7(t);if(i===void 0)return t;if(await i.ready,typeof e=="function"){const r=i.watchExports(n=>e(n,r))}return i.exports},zxe=async t=>{const e=E7(t);return await e.ready,e},E7=t=>{const i=MF().manager.X(t);if(i!==void 0)return i;if(Rxe(t))return t;const r=Nxe();if(r!==void 0)return r};let GV=!1;const Vxe=t=>{GV=!0;try{return t()}finally{GV=!1}};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const OA=globalThis,I7=OA.ShadowRoot&&(OA.ShadyCSS===void 0||OA.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,C7=Symbol(),VJ=new WeakMap;let vae=class{constructor(e,i,r){if(this._$cssResult$=!0,r!==C7)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=i}get styleSheet(){let e=this.o;const i=this.t;if(I7&&e===void 0){const r=i!==void 0&&i.length===1;r&&(e=VJ.get(i)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&VJ.set(i,e))}return e}toString(){return this.cssText}};const jxe=t=>new vae(typeof t=="string"?t:t+"",void 0,C7),Mi=(t,...e)=>{const i=t.length===1?t[0]:e.reduce(((r,n,s)=>r+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(n)+t[s+1]),t[0]);return new vae(i,t,C7)},Uxe=(t,e)=>{if(I7)t.adoptedStyleSheets=e.map((i=>i instanceof CSSStyleSheet?i:i.styleSheet));else for(const i of e){const r=document.createElement("style"),n=OA.litNonce;n!==void 0&&r.setAttribute("nonce",n),r.textContent=i.cssText,t.appendChild(r)}},jJ=I7?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let i="";for(const r of e.cssRules)i+=r.cssText;return jxe(i)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:Bxe,defineProperty:Gxe,getOwnPropertyDescriptor:qxe,getOwnPropertyNames:Hxe,getOwnPropertySymbols:Wxe,getPrototypeOf:Zxe}=Object,gg=globalThis,UJ=gg.trustedTypes,Jxe=UJ?UJ.emptyScript:"",tz=gg.reactiveElementPolyfillSupport,jI=(t,e)=>t,qV={toAttribute(t,e){switch(e){case Boolean:t=t?Jxe:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let i=t;switch(e){case Boolean:i=t!==null;break;case Number:i=t===null?null:Number(t);break;case Object:case Array:try{i=JSON.parse(t)}catch{i=null}}return i}},XM=(t,e)=>!Bxe(t,e),BJ={attribute:!0,type:String,converter:qV,reflect:!1,useDefault:!1,hasChanged:XM};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),gg.litPropertyMetadata??(gg.litPropertyMetadata=new WeakMap);let B_=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,i=BJ){if(i.state&&(i.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((i=Object.create(i)).wrapped=!0),this.elementProperties.set(e,i),!i.noAccessor){const r=Symbol(),n=this.getPropertyDescriptor(e,r,i);n!==void 0&&Gxe(this.prototype,e,n)}}static getPropertyDescriptor(e,i,r){const{get:n,set:s}=qxe(this.prototype,e)??{get(){return this[i]},set(o){this[i]=o}};return{get:n,set(o){const a=n==null?void 0:n.call(this);s==null||s.call(this,o),this.requestUpdate(e,a,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??BJ}static _$Ei(){if(this.hasOwnProperty(jI("elementProperties")))return;const e=Zxe(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(jI("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(jI("properties"))){const i=this.properties,r=[...Hxe(i),...Wxe(i)];for(const n of r)this.createProperty(n,i[n])}const e=this[Symbol.metadata];if(e!==null){const i=litPropertyMetadata.get(e);if(i!==void 0)for(const[r,n]of i)this.elementProperties.set(r,n)}this._$Eh=new Map;for(const[i,r]of this.elementProperties){const n=this._$Eu(i,r);n!==void 0&&this._$Eh.set(n,i)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const i=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const n of r)i.unshift(jJ(n))}else e!==void 0&&i.push(jJ(e));return i}static _$Eu(e,i){const r=i.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise((i=>this.enableUpdating=i)),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach((i=>i(this)))}addController(e){var i;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((i=e.hostConnected)==null||i.call(e))}removeController(e){var i;(i=this._$EO)==null||i.delete(e)}_$E_(){const e=new Map,i=this.constructor.elementProperties;for(const r of i.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return Uxe(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach((i=>{var r;return(r=i.hostConnected)==null?void 0:r.call(i)}))}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach((i=>{var r;return(r=i.hostDisconnected)==null?void 0:r.call(i)}))}attributeChangedCallback(e,i,r){this._$AK(e,r)}_$ET(e,i){var s;const r=this.constructor.elementProperties.get(e),n=this.constructor._$Eu(e,r);if(n!==void 0&&r.reflect===!0){const o=(((s=r.converter)==null?void 0:s.toAttribute)!==void 0?r.converter:qV).toAttribute(i,r.type);this._$Em=e,o==null?this.removeAttribute(n):this.setAttribute(n,o),this._$Em=null}}_$AK(e,i){var s,o;const r=this.constructor,n=r._$Eh.get(e);if(n!==void 0&&this._$Em!==n){const a=r.getPropertyOptions(n),l=typeof a.converter=="function"?{fromAttribute:a.converter}:((s=a.converter)==null?void 0:s.fromAttribute)!==void 0?a.converter:qV;this._$Em=n;const c=l.fromAttribute(i,a.type);this[n]=c??((o=this._$Ej)==null?void 0:o.get(n))??c,this._$Em=null}}requestUpdate(e,i,r){var n;if(e!==void 0){const s=this.constructor,o=this[e];if(r??(r=s.getPropertyOptions(e)),!((r.hasChanged??XM)(o,i)||r.useDefault&&r.reflect&&o===((n=this._$Ej)==null?void 0:n.get(e))&&!this.hasAttribute(s._$Eu(e,r))))return;this.C(e,i,r)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,i,{useDefault:r,reflect:n,wrapped:s},o){r&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,o??i??this[e]),s!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||r||(i=void 0),this._$AL.set(e,i)),n===!0&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(i){Promise.reject(i)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var r;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[s,o]of this._$Ep)this[s]=o;this._$Ep=void 0}const n=this.constructor.elementProperties;if(n.size>0)for(const[s,o]of n){const{wrapped:a}=o,l=this[s];a!==!0||this._$AL.has(s)||l===void 0||this.C(s,void 0,o,l)}}let e=!1;const i=this._$AL;try{e=this.shouldUpdate(i),e?(this.willUpdate(i),(r=this._$EO)==null||r.forEach((n=>{var s;return(s=n.hostUpdate)==null?void 0:s.call(n)})),this.update(i)):this._$EM()}catch(n){throw e=!1,this._$EM(),n}e&&this._$AE(i)}willUpdate(e){}_$AE(e){var i;(i=this._$EO)==null||i.forEach((r=>{var n;return(n=r.hostUpdated)==null?void 0:n.call(r)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach((i=>this._$ET(i,this[i])))),this._$EM()}updated(e){}firstUpdated(e){}};B_.elementStyles=[],B_.shadowRootOptions={mode:"open"},B_[jI("elementProperties")]=new Map,B_[jI("finalized")]=new Map,tz==null||tz({ReactiveElement:B_}),(gg.reactiveElementVersions??(gg.reactiveElementVersions=[])).push("2.1.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const UI=globalThis,$R=UI.trustedTypes,GJ=$R?$R.createPolicy("lit-html",{createHTML:t=>t}):void 0,bae="$lit$",Uy=`lit$${Math.random().toFixed(9).slice(2)}$`,wae="?"+Uy,Yxe=`<${wae}>`,Xb=document,NC=()=>Xb.createComment(""),DC=t=>t===null||typeof t!="object"&&typeof t!="function",M7=Array.isArray,Xxe=t=>M7(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",iz=`[ 	
\f\r]`,FT=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,qJ=/-->/g,HJ=/>/g,Nv=RegExp(`>|${iz}(?:([^\\s"'>=/]+)(${iz}*=${iz}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),WJ=/'/g,ZJ=/"/g,_ae=/^(?:script|style|textarea|title)$/i,xae=t=>(e,...i)=>({_$litType$:t,strings:e,values:i}),Se=xae(1),Da=xae(2),tm=Symbol.for("lit-noChange"),ct=Symbol.for("lit-nothing"),JJ=new WeakMap,ob=Xb.createTreeWalker(Xb,129);function Sae(t,e){if(!M7(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return GJ!==void 0?GJ.createHTML(e):e}const Kxe=(t,e)=>{const i=t.length-1,r=[];let n,s=e===2?"<svg>":e===3?"<math>":"",o=FT;for(let a=0;a<i;a++){const l=t[a];let c,d,f=-1,y=0;for(;y<l.length&&(o.lastIndex=y,d=o.exec(l),d!==null);)y=o.lastIndex,o===FT?d[1]==="!--"?o=qJ:d[1]!==void 0?o=HJ:d[2]!==void 0?(_ae.test(d[2])&&(n=RegExp("</"+d[2],"g")),o=Nv):d[3]!==void 0&&(o=Nv):o===Nv?d[0]===">"?(o=n??FT,f=-1):d[1]===void 0?f=-2:(f=o.lastIndex-d[2].length,c=d[1],o=d[3]===void 0?Nv:d[3]==='"'?ZJ:WJ):o===ZJ||o===WJ?o=Nv:o===qJ||o===HJ?o=FT:(o=Nv,n=void 0);const g=o===Nv&&t[a+1].startsWith("/>")?" ":"";s+=o===FT?l+Yxe:f>=0?(r.push(c),l.slice(0,f)+bae+l.slice(f)+Uy+g):l+Uy+(f===-2?a:g)}return[Sae(t,s+(t[i]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),r]};let HV=class $ae{constructor({strings:e,_$litType$:i},r){let n;this.parts=[];let s=0,o=0;const a=e.length-1,l=this.parts,[c,d]=Kxe(e,i);if(this.el=$ae.createElement(c,r),ob.currentNode=this.el.content,i===2||i===3){const f=this.el.content.firstChild;f.replaceWith(...f.childNodes)}for(;(n=ob.nextNode())!==null&&l.length<a;){if(n.nodeType===1){if(n.hasAttributes())for(const f of n.getAttributeNames())if(f.endsWith(bae)){const y=d[o++],g=n.getAttribute(f).split(Uy),b=/([.?@])?(.*)/.exec(y);l.push({type:1,index:s,name:b[2],strings:g,ctor:b[1]==="."?eSe:b[1]==="?"?tSe:b[1]==="@"?iSe:PF}),n.removeAttribute(f)}else f.startsWith(Uy)&&(l.push({type:6,index:s}),n.removeAttribute(f));if(_ae.test(n.tagName)){const f=n.textContent.split(Uy),y=f.length-1;if(y>0){n.textContent=$R?$R.emptyScript:"";for(let g=0;g<y;g++)n.append(f[g],NC()),ob.nextNode(),l.push({type:2,index:++s});n.append(f[y],NC())}}}else if(n.nodeType===8)if(n.data===wae)l.push({type:2,index:s});else{let f=-1;for(;(f=n.data.indexOf(Uy,f+1))!==-1;)l.push({type:7,index:s}),f+=Uy.length-1}s++}}static createElement(e,i){const r=Xb.createElement("template");return r.innerHTML=e,r}};function qS(t,e,i=t,r){var o,a;if(e===tm)return e;let n=r!==void 0?(o=i._$Co)==null?void 0:o[r]:i._$Cl;const s=DC(e)?void 0:e._$litDirective$;return(n==null?void 0:n.constructor)!==s&&((a=n==null?void 0:n._$AO)==null||a.call(n,!1),s===void 0?n=void 0:(n=new s(t),n._$AT(t,i,r)),r!==void 0?(i._$Co??(i._$Co=[]))[r]=n:i._$Cl=n),n!==void 0&&(e=qS(t,n._$AS(t,e.values),n,r)),e}let Qxe=class{constructor(e,i){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=i}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:i},parts:r}=this._$AD,n=((e==null?void 0:e.creationScope)??Xb).importNode(i,!0);ob.currentNode=n;let s=ob.nextNode(),o=0,a=0,l=r[0];for(;l!==void 0;){if(o===l.index){let c;l.type===2?c=new kF(s,s.nextSibling,this,e):l.type===1?c=new l.ctor(s,l.name,l.strings,this,e):l.type===6&&(c=new rSe(s,this,e)),this._$AV.push(c),l=r[++a]}o!==(l==null?void 0:l.index)&&(s=ob.nextNode(),o++)}return ob.currentNode=Xb,n}p(e){let i=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,i),i+=r.strings.length-2):r._$AI(e[i])),i++}},kF=class Tae{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,i,r,n){this.type=2,this._$AH=ct,this._$AN=void 0,this._$AA=e,this._$AB=i,this._$AM=r,this.options=n,this._$Cv=(n==null?void 0:n.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const i=this._$AM;return i!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=i.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,i=this){e=qS(this,e,i),DC(e)?e===ct||e==null||e===""?(this._$AH!==ct&&this._$AR(),this._$AH=ct):e!==this._$AH&&e!==tm&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):Xxe(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==ct&&DC(this._$AH)?this._$AA.nextSibling.data=e:this.T(Xb.createTextNode(e)),this._$AH=e}$(e){var s;const{values:i,_$litType$:r}=e,n=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=HV.createElement(Sae(r.h,r.h[0]),this.options)),r);if(((s=this._$AH)==null?void 0:s._$AD)===n)this._$AH.p(i);else{const o=new Qxe(n,this),a=o.u(this.options);o.p(i),this.T(a),this._$AH=o}}_$AC(e){let i=JJ.get(e.strings);return i===void 0&&JJ.set(e.strings,i=new HV(e)),i}k(e){M7(this._$AH)||(this._$AH=[],this._$AR());const i=this._$AH;let r,n=0;for(const s of e)n===i.length?i.push(r=new Tae(this.O(NC()),this.O(NC()),this,this.options)):r=i[n],r._$AI(s),n++;n<i.length&&(this._$AR(r&&r._$AB.nextSibling,n),i.length=n)}_$AR(e=this._$AA.nextSibling,i){var r;for((r=this._$AP)==null?void 0:r.call(this,!1,!0,i);e!==this._$AB;){const n=e.nextSibling;e.remove(),e=n}}setConnected(e){var i;this._$AM===void 0&&(this._$Cv=e,(i=this._$AP)==null||i.call(this,e))}},PF=class{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,i,r,n,s){this.type=1,this._$AH=ct,this._$AN=void 0,this.element=e,this.name=i,this._$AM=n,this.options=s,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=ct}_$AI(e,i=this,r,n){const s=this.strings;let o=!1;if(s===void 0)e=qS(this,e,i,0),o=!DC(e)||e!==this._$AH&&e!==tm,o&&(this._$AH=e);else{const a=e;let l,c;for(e=s[0],l=0;l<s.length-1;l++)c=qS(this,a[r+l],i,l),c===tm&&(c=this._$AH[l]),o||(o=!DC(c)||c!==this._$AH[l]),c===ct?e=ct:e!==ct&&(e+=(c??"")+s[l+1]),this._$AH[l]=c}o&&!n&&this.j(e)}j(e){e===ct?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}},eSe=class extends PF{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===ct?void 0:e}},tSe=class extends PF{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==ct)}},iSe=class extends PF{constructor(e,i,r,n,s){super(e,i,r,n,s),this.type=5}_$AI(e,i=this){if((e=qS(this,e,i,0)??ct)===tm)return;const r=this._$AH,n=e===ct&&r!==ct||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,s=e!==ct&&(r===ct||n);n&&this.element.removeEventListener(this.name,this,r),s&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var i;typeof this._$AH=="function"?this._$AH.call(((i=this.options)==null?void 0:i.host)??this.element,e):this._$AH.handleEvent(e)}},rSe=class{constructor(e,i,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=i,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){qS(this,e)}};const nSe={I:kF},rz=UI.litHtmlPolyfillSupport;rz==null||rz(HV,kF),(UI.litHtmlVersions??(UI.litHtmlVersions=[])).push("3.3.1");const sSe=(t,e,i)=>{const r=(i==null?void 0:i.renderBefore)??e;let n=r._$litPart$;if(n===void 0){const s=(i==null?void 0:i.renderBefore)??null;r._$litPart$=n=new kF(e.insertBefore(NC(),s),s,void 0,i??{})}return n._$AI(t),n};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Mb=globalThis;let qu=class extends B_{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var i;const e=super.createRenderRoot();return(i=this.renderOptions).renderBefore??(i.renderBefore=e.firstChild),e}update(e){const i=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=sSe(i,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return tm}};var Koe;qu._$litElement$=!0,qu.finalized=!0,(Koe=Mb.litElementHydrateSupport)==null||Koe.call(Mb,{LitElement:qu});const nz=Mb.litElementPolyfillSupport;nz==null||nz({LitElement:qu});(Mb.litElementVersions??(Mb.litElementVersions=[])).push("4.2.1");let op=class{constructor(){this.promise=new Promise((e,i)=>{this.resolve=e,this.reject=i})}};const Eae=(t,e)=>{const i=e/oSe;let r=0;const n=setInterval(()=>{r+=i,r>=e&&(clearInterval(n),t())},i);return n},oSe=4,aSe=(t,e,i)=>{const r=Object.keys(t),n=r.length;eg===void 0&&queueMicrotask(AF),eg??(eg=new Map);let s=eg.get(t);return s===void 0&&(s={callbacks:[],keyCount:n},eg.set(t,s)),s.keyCount!==n&&(s.callbacks.forEach(o=>o(r)),s.callbacks=[],s.keyCount=n),s.callbacks.push(o=>{const a=c=>ii(e,null,c),l=o[n];l===void 0?a(void 0):t[l]===i?a(l):a(void 0)}),i};let eg;const AF=()=>{eg==null||eg.forEach(({callbacks:t},e)=>{const i=Object.keys(e);t.forEach(r=>r(i))}),eg=void 0},lSe=(t,e,i)=>{const r=t.manager;return r.V!==ct&&r.V!==i&&r.S(void 0,void 0),r.T.length===0&&queueMicrotask(()=>r.S(void 0,void 0)),r.V=i,r.T.push((n,s)=>ii(e,void 0,i===s?n:void 0)),i},Iae=(t=[MF(),...gae()],e,i)=>{const r=Array.isArray(t)?t:[t];let n=r.length+1;const s=o=>{n-=1,o!==void 0&&(n=Math.min(n,0)),n===0&&e(o)};r.forEach(o=>aSe(o,a=>s(a===void 0?void 0:{key:a,host:o,isReactive:!1}),i));for(const o of r)if("manager"in o&&o.manager.component===o){lSe(o,a=>s(a===void 0?void 0:{key:a,host:o,isReactive:!0}),i);break}return i},cSe=(t="",e={},i=MF())=>{const r={emit:n=>{t===""&&AF();const s=new CustomEvent(t,{detail:n,cancelable:!0,bubbles:!0,composed:!0,...e});return i.el.dispatchEvent(s),s}};return t===""&&Iae(void 0,n=>t=n.key,r),r},ot=cSe.bind(null,"");var Cae;Cae=T7;var Ox,Fx,yb,Nx,Dx,zx,Vx,jx,Jy,gb,Aa,sh,kf,Ux,FA,Qoe;let k7=(Qoe=class{constructor(e){Ye(this,Ux);Ye(this,Ox);Ye(this,Fx);Ye(this,yb);Ye(this,Nx);Ye(this,Dx);Ye(this,zx);Ye(this,Vx);Ye(this,jx);Ye(this,Jy);Ye(this,gb);Ye(this,Aa);Ye(this,sh);Ye(this,kf);Ue(this,Ox,[]),Ue(this,Fx,[]),Ue(this,yb,[]),Ue(this,Nx,[]),Ue(this,Dx,[]),Ue(this,zx,[]),Ue(this,Vx,[]),Ue(this,jx,[]),Ue(this,Jy,[]),Ue(this,gb,!1),this.P=new op,this.connectedCalled=!1,this.loadedCalled=!1,this[Cae]=!0,Ue(this,kf,[]);const i=this,r=e??MF();Ue(i,Aa,r),i.ready=i.P.promise,Ue(i,sh,XJ(i)),i.component=r,Y(i,Aa).addController(i),Y(i,Aa).manager===void 0||(yae(i),queueMicrotask(()=>i.catchUpLifecycle()))}catchUpLifecycle(){const{manager:e}=Y(this,Aa);e.connectedCalled&&!this.connectedCalled&&this.triggerConnected(),Y(e,gb)&&this.triggerLoad().then(()=>e.loadedCalled&&this.triggerLoaded()).catch(console.error)}get exports(){return Y(this,sh)}set exports(e){const i=Y(this,sh);i!==e&&(Ue(this,sh,e),Y(this,kf).forEach(ii),this.connectedCalled&&this.O!==!1&&Y(this,Aa).requestUpdate(this.O,i)),this.P.resolve(e)}setProvisionalExports(e,i=!0){Ue(this,sh,i?XJ(e):e),Y(this,kf).forEach(ii)}watchExports(e){const i=()=>e(Y(this,sh));return Y(this,kf).push(i),()=>void Y(this,kf).splice(Y(this,kf).indexOf(i),1)}get use(){return U1(Y(this,Aa)),Dxe}get useRef(){return U1(Y(this,Aa)),zxe}get useRefSync(){return U1(Y(this,Aa)),E7}controllerRemoved(){Y(this,Aa).el.isConnected&&this.triggerDisconnected(),this.triggerDestroy()}onConnected(e){Y(this,Ox).push(e)}onDisconnected(e){Y(this,Fx).push(e)}onLoad(e){Y(this,yb).push(e)}onLoaded(e){Y(this,Nx).push(e)}onUpdate(e){Y(this,Dx).push(e)}onUpdated(e){Y(this,zx).push(e)}onDestroy(e){Y(this,Vx).push(e)}onLifecycle(e){Y(this,jx).push(e),this.connectedCalled&&Y(this,Aa).el.isConnected&&yr(this,Ux,FA).call(this,e)}triggerConnected(){const e=this;e.hostConnected&&ii(e.hostConnected,e),Y(e,Ox).forEach(ii),e.triggerLifecycle(),e.connectedCalled=!0}triggerDisconnected(){const e=this;e.hostDisconnected&&ii(e.hostDisconnected,e),Y(e,Fx).forEach(ii),Y(e,Jy).forEach(ii),Ue(e,Jy,[])}async triggerLoad(){if(Y(this,gb))return;Ue(this,gb,!0);const e=this;e.hostLoad&&await GS(e.hostLoad,e),Y(this,yb).length>0&&await Promise.allSettled(Y(this,yb).map(GS)),this.P.resolve(Y(this,sh))}triggerLoaded(){this.loadedCalled||(this.hostLoaded&&ii(this.hostLoaded,this),Y(this,Nx).forEach(ii),this.loadedCalled=!0)}triggerUpdate(e){this.hostUpdate&&ii(this.hostUpdate,this,e),Y(this,Dx).forEach(YJ,e)}triggerUpdated(e){this.hostUpdated&&ii(this.hostUpdated,this,e),Y(this,zx).forEach(YJ,e)}triggerDestroy(){this.hostDestroy&&ii(this.hostDestroy,this),Y(this,Vx).forEach(ii)}triggerLifecycle(){this.hostLifecycle&&yr(this,Ux,FA).call(this,()=>this.hostLifecycle()),Y(this,jx).forEach(yr(this,Ux,FA),this)}},Ox=new WeakMap,Fx=new WeakMap,yb=new WeakMap,Nx=new WeakMap,Dx=new WeakMap,zx=new WeakMap,Vx=new WeakMap,jx=new WeakMap,Jy=new WeakMap,gb=new WeakMap,Aa=new WeakMap,sh=new WeakMap,kf=new WeakMap,Ux=new WeakSet,FA=function(e){U1(Y(this,Aa));const i=ii(e);(Array.isArray(i)?i:[i]).forEach(n=>{typeof n=="function"?Y(this,Jy).push(n):typeof n=="object"&&typeof n.remove=="function"&&Y(this,Jy).push(n.remove)})},Qoe);function YJ(t){ii(t,void 0,this)}const uSe=k7,XJ=t=>{if(typeof t!="object"&&typeof t!="function"||t===null)return t;const e={get(r,n,s){if(!((n==="exports"||n==="_exports")&&n in r&&r[n]===i)&&(n in r||n in Promise.prototype||typeof n=="symbol"))return typeof r=="function"?r[n]:Reflect.get(r,n,s)}},i=new Proxy(t,e);return i},Mae=t=>t.replace(dSe,(e,i)=>`${i===0?"":"-"}${e.toLowerCase()}`),dSe=/[A-Z]+(?![a-z])|[A-Z]/gu,hSe=1,pSe=2,fSe=4,mSe=8,ySe=16,gSe=32,vSe=64,kae=t=>{var i,r;let e=t;for(;e=e.parentNode??e.host;)if((i=e==null?void 0:e.constructor)!=null&&i.lumina){const n=e;return(r=n.manager)!=null&&r.loadedCalled||(n.J??n._offspring).push(t),(n.I??n._postLoad).promise}return!1},KJ={};function Pae(){}const NA=Object.defineProperty,bSe=globalThis.HTMLElement??Pae;var La,Pf,Bx,NM,WV,Gx;let edt=(Gx=class extends bSe{constructor(){var n,s;super();Ye(this,NM);Ye(this,La);Ye(this,Pf);Ye(this,Bx);Ue(this,Pf,{}),Ue(this,Bx,[]),this.I=new op,this.H=new op,this.J=[];const i=this,r=i.constructor;i._offspring=i.J,i._postLoad=i.I,(n=r.C)==null||n.forEach(o=>{Object.hasOwn(i,o)&&(Y(i,Pf)[o]=i[o],delete i[o])}),r.A?yr(s=i,NM,WV).call(s,{a:r.A}):r.B.then(async o=>{var a,l;await r.K.p,yr(l=i,NM,WV).call(l,await(((a=o.default)==null?void 0:a.then(c=>typeof c=="function"?{a:c}:c))??o))}).catch(o=>{i.H.reject(o),setTimeout(()=>{throw o})})}static F(){for(const i of this.C??[])NA(this.prototype,i,{configurable:!0,enumerable:!0,get(){return Y(this,Pf)[i]},set(r){Y(this,Pf)[i]=r}});for(const i of this.E??[])NA(this.prototype,i,{async value(...r){return Y(this,La)||await this.H.promise,await Y(this,La)[i](...r)},configurable:!0});for(const i of this.D??[])NA(this.prototype,i,{value(...r){return Y(this,La)[i](...r)},configurable:!0})}get manager(){var i;return(i=Y(this,La))==null?void 0:i.manager}attributeChangedCallback(i,r,n){var s;(s=Y(this,La))==null||s.attributeChangedCallback(i,r,n),Y(this,La)||Y(this,Bx).push(i)}connectedCallback(){var i,r;Y(this,La)?(r=(i=Y(this,La)).connectedCallback)==null||r.call(i):queueMicrotask(()=>this.G=kae(this))}disconnectedCallback(){var i,r;(r=(i=Y(this,La))==null?void 0:i.disconnectedCallback)==null||r.call(i)}async componentOnReady(){return await this.H.promise,this}addController(){}requestUpdate(){var i;(i=Y(this,La))==null||i.requestUpdate()}},La=new WeakMap,Pf=new WeakMap,Bx=new WeakMap,NM=new WeakSet,WV=function(i){var y;const r=this.constructor,n=r.L,s=Y(this,Pf),o=Object.values(i).find(g=>g.L===n),a=`${n}--lazy`;let l=o;for(;l&&!Object.hasOwn(l,"lumina");)l=Object.getPrototypeOf(l);_Se(l),!r.A&&(r.A=o,customElements.define(a,o)),o.N=this;const d=document.createElement(a);o.N=void 0,Ue(this,La,d),Ue(this,Pf,d),Y(this,Bx).forEach(g=>d.attributeChangedCallback(g,null,this.getAttribute(g))),Object.entries(s).forEach(wSe,d);const f=this.isConnected;(f||this.G)&&((y=d.connectedCallback)==null||y.call(d),f||d.disconnectedCallback())},Gx.lumina=!0,Gx);function wSe([t,e]){this[t]=e}const _Se=t=>{const e=t.prototype,i=Element.prototype;Object.hasOwn(e,"isConnected")||(e.setAttribute=function(n,s){i.setAttribute.call(this.el,n,s)},e.removeAttribute=function(n){i.removeAttribute.call(this.el,n)},NA(e,"isConnected",{get(){return Reflect.get(i,"isConnected",this.el)}}))};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const LF={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4},KM=t=>(...e)=>({_$litDirective$:t,values:e});let QM=class{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,i,r){this._$Ct=e,this._$AM=i,this._$Ci=r}_$AS(e,i){return this.update(e,i)}update(e,i){return this.render(...i)}};/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const xSe=KM(class extends QM{constructor(t){var e;if(super(t),t.type!==LF.ATTRIBUTE||t.name!=="class"||((e=t.strings)==null?void 0:e.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(t){return" "+Object.keys(t).filter((e=>t[e])).join(" ")+" "}update(t,[e]){var r,n;if(this.st===void 0){this.st=new Set,t.strings!==void 0&&(this.nt=new Set(t.strings.join(" ").split(/\s/).filter((s=>s!==""))));for(const s in e)e[s]&&!((r=this.nt)!=null&&r.has(s))&&this.st.add(s);return this.render(e)}const i=t.element.classList;for(const s of this.st)s in e||(i.remove(s),this.st.delete(s));for(const s in e){const o=!!e[s];o===this.st.has(s)||(n=this.nt)!=null&&n.has(s)||(o?(i.add(s),this.st.add(s)):(i.remove(s),this.st.delete(s)))}return tm}});/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Aae="important",SSe=" !"+Aae,$Se=KM(class extends QM{constructor(t){var e;if(super(t),t.type!==LF.ATTRIBUTE||t.name!=="style"||((e=t.strings)==null?void 0:e.length)>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(t){return Object.keys(t).reduce(((e,i)=>{const r=t[i];return r==null?e:e+`${i=i.includes("-")?i:i.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${r};`}),"")}update(t,[e]){const{style:i}=t.element;if(this.ft===void 0)return this.ft=new Set(Object.keys(e)),this.render(e);for(const r of this.ft)e[r]==null&&(this.ft.delete(r),r.includes("-")?i.removeProperty(r):i[r]=null);for(const r in e){const n=e[r];if(n!=null){this.ft.add(r);const s=typeof n=="string"&&n.endsWith(SSe);r.includes("-")||s?i.setProperty(r,s?n.slice(0,-11):n,s?Aae:""):i[r]=n}}return tm}});/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{I:TSe}=nSe,ESe=t=>t.strings===void 0,QJ=()=>document.createComment(""),NT=(t,e,i)=>{var s;const r=t._$AA.parentNode,n=e===void 0?t._$AB:e._$AA;if(i===void 0){const o=r.insertBefore(QJ(),n),a=r.insertBefore(QJ(),n);i=new TSe(o,a,t,t.options)}else{const o=i._$AB.nextSibling,a=i._$AM,l=a!==t;if(l){let c;(s=i._$AQ)==null||s.call(i,t),i._$AM=t,i._$AP!==void 0&&(c=t._$AU)!==a._$AU&&i._$AP(c)}if(o!==n||l){let c=i._$AA;for(;c!==o;){const d=c.nextSibling;r.insertBefore(c,n),c=d}}}return i},Dv=(t,e,i=t)=>(t._$AI(e,i),t),ISe={},Lae=(t,e=ISe)=>t._$AH=e,CSe=t=>t._$AH,sz=t=>{t._$AR(),t._$AA.remove()};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const BI=(t,e)=>{var r;const i=t._$AN;if(i===void 0)return!1;for(const n of i)(r=n._$AO)==null||r.call(n,e,!1),BI(n,e);return!0},TR=t=>{let e,i;do{if((e=t._$AM)===void 0)break;i=e._$AN,i.delete(t),t=e}while((i==null?void 0:i.size)===0)},Rae=t=>{for(let e;e=t._$AM;t=e){let i=e._$AN;if(i===void 0)e._$AN=i=new Set;else if(i.has(t))break;i.add(t),PSe(e)}};function MSe(t){this._$AN!==void 0?(TR(this),this._$AM=t,Rae(this)):this._$AM=t}function kSe(t,e=!1,i=0){const r=this._$AH,n=this._$AN;if(n!==void 0&&n.size!==0)if(e)if(Array.isArray(r))for(let s=i;s<r.length;s++)BI(r[s],!1),TR(r[s]);else r!=null&&(BI(r,!1),TR(r));else BI(this,t)}const PSe=t=>{t.type==LF.CHILD&&(t._$AP??(t._$AP=kSe),t._$AQ??(t._$AQ=MSe))};let ASe=class extends QM{constructor(){super(...arguments),this._$AN=void 0}_$AT(e,i,r){super._$AT(e,i,r),Rae(this),this.isConnected=e._$AU}_$AO(e,i=!0){var r,n;e!==this.isConnected&&(this.isConnected=e,e?(r=this.reconnected)==null||r.call(this):(n=this.disconnected)==null||n.call(this)),i&&(BI(this,e),TR(this))}setValue(e){if(ESe(this._$Ct))this._$Ct._$AI(e,this);else{const i=[...this._$Ct._$AH];i[this._$Ci]=e,this._$Ct._$AI(i,this,0)}}disconnected(){}reconnected(){}};/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Fc=()=>new LSe;let LSe=class{};const oz=new WeakMap,Ri=KM(class extends ASe{render(t){return ct}update(t,[e]){var r;const i=e!==this.G;return i&&this.G!==void 0&&this.rt(void 0),(i||this.lt!==this.ct)&&(this.G=e,this.ht=(r=t.options)==null?void 0:r.host,this.rt(this.ct=t.element)),ct}rt(t){if(this.isConnected||(t=void 0),typeof this.G=="function"){const e=this.ht??globalThis;let i=oz.get(e);i===void 0&&(i=new WeakMap,oz.set(e,i)),i.get(this.G)!==void 0&&this.G.call(this.ht,void 0),i.set(this.G,t),t!==void 0&&this.G.call(this.ht,t)}else this.G.value=t}get lt(){var t,e;return typeof this.G=="function"?(t=oz.get(this.ht??globalThis))==null?void 0:t.get(this.G):(e=this.G)==null?void 0:e.value}disconnected(){this.lt===this.ct&&this.rt(void 0)}reconnected(){this.rt(this.ct)}});var Af,Cu,qx,eae;let RSe=(eae=class extends uSe{constructor(i){super(i);Ye(this,Af);Ye(this,Cu);Ye(this,qx);this.destroyed=!1,this.R=!1,this.V=ct,this.T=[],Ue(this,qx,new WeakMap),Ue(this,Cu,i),this.exports=void 0,this.hasDestroy=ZV in i&&typeof i.destroy=="function",qu.prototype.addController.call(i,{hostConnected:()=>{if(this.destroyed){const r=i.el.localName;throw i.el.remove(),new Error(`The ${r} component has already been destroyed. It cannot be used again. If you meant to disconnect and reconnect a component without automatic destroy, set the ${ZV} prop.`)}Y(this,Af)!==void 0&&clearTimeout(Y(this,Af)),AF();for(const r of i.M)"triggerConnected"in r?r.triggerConnected():ii(r.hostConnected,r)},hostDisconnected:()=>{for(const r of i.M)"triggerDisconnected"in r?r.triggerDisconnected():ii(r.hostDisconnected,r);this.hasDestroy&&!this.destroyed&&this.U()},hostUpdate:()=>{for(const r of i.M)"triggerUpdate"in r?r.triggerUpdate(this.Q):ii(r.hostUpdate,r,this.Q)},hostUpdated:()=>{for(const r of i.M)"triggerUpdated"in r?r.triggerUpdated(this.Q):ii(r.hostUpdated,r,this.Q);this.Q=void 0}}),queueMicrotask(()=>this.R=!0),U1(i)}async destroy(){if(!this.destroyed){Y(this,Cu).el.isConnected&&(this.hasDestroy=!1,Y(this,Cu).el.remove()),Ue(this,Af,void 0),this.destroyed=!0;for(const i of Y(this,Cu).M)"triggerDestroy"in i?i.triggerDestroy():ii(i.hostDestroy,i);Y(this,Cu).M.splice(0)}}U(){Y(this,Af)!==void 0&&clearTimeout(Y(this,Af)),!Y(this,Cu).el.isConnected&&!Y(this,Cu).autoDestroyDisabled&&Ue(this,Af,Eae(()=>void Y(this,Cu).destroy(),OSe))}S(i,r){const n=this.T;this.V=ct,this.T=[],n.forEach(s=>s(i,r))}W(i,r){(typeof r=="object"&&r!==null||typeof r=="function")&&Y(this,qx).set(r,i)}X(i){if(typeof i=="object"&&i!==null||typeof i=="function")return Y(this,qx).get(i)}},Af=new WeakMap,Cu=new WeakMap,qx=new WeakMap,eae),OSe=1e3;const ZV="autoDestroyDisabled";var vb,DM,zM,bb,oh,w$,Oae,Fae,Sg;let ir=(Sg=class extends qu{constructor(){super();Ye(this,w$);Ye(this,vb);Ye(this,DM);Ye(this,zM);Ye(this,bb);Ye(this,oh);this.M=[],this.manager=new RSe(this);const i=this,r=i.constructor,n=r.N,s=r.K.o,o=Sg.prototype.shouldUpdate;Ue(i,bb,(n==null?void 0:n.H)??new op),i.I=(n==null?void 0:n.I)??new op,i.J=(n==null?void 0:n.J)??[],i._offspring=i.J,i._postLoad=i.I,i.el=n??i,Ue(i,zM,i.enableUpdating),i.enableUpdating=Pae,i.shouldUpdate!==o&&(Ue(i,DM,i.shouldUpdate),i.shouldUpdate=o),s&&(Ue(i,vb,new Map),r.elementProperties.forEach((a,l)=>Y(i,vb).set(l,s())))}static finalizeStyles(i){var s;const r=super.finalizeStyles(i),n=this.shadowRootOptions===KJ;return((s=this.K)==null?void 0:s.commonStyles)===void 0||n?r:[this.K.commonStyles,...r]}static createProperty(i,r){const n=typeof r=="number"?r:Array.isArray(r)?r[0]:0,s=Array.isArray(r)?r[1]:void 0,o=(s==null?void 0:s.hasChanged)??XM,a={attribute:n&hSe&&typeof i=="string"?Mae(i):!1,reflect:!!(n&pSe),type:n&fSe?Boolean:n&mSe?Number:void 0,state:!!(n&ySe),readOnly:!!(n&gSe),noAccessor:!!(n&vSe),c:!1,...s,hasChanged(l,c){const d=o(l,c);return a.c=d,d}};super.createProperty(i,a)}static getPropertyDescriptor(i,r,n){const s=this.K,o=super.getPropertyDescriptor(i,r,n);return n.d=o,{...o,get(){var a,l;return(a=s.t)==null||a.call(s,Y(this,vb).get(i)),(l=o.get)==null?void 0:l.call(this)},set(a){var c,d;const l=this.manager;if(n.readOnly&&!GV&&(l.R||l.connectedCalled))throw Error(`Cannot assign to read-only property "${i}" of ${this.el.localName}. Trying to assign "${a}"`);o.set.call(this,a??void 0),n.c&&((d=(c=Y(this,vb))==null?void 0:c.get(i))==null||d.notify()),l.T.length>0&&(AF(),l==null||l.S(i,a))}}}connectedCallback(){var n,s;if(this.el.hasAttribute("defer-hydration"))return;const i=(s=(n=this.constructor.K).c)==null?void 0:s.call(n,()=>this.requestUpdate());Ue(this,oh,i);const r=!this.manager.connectedCalled;super.connectedCallback(),r?queueMicrotask(()=>yr(this,w$,Fae).call(this).catch(o=>{Y(this,bb).reject(o),setTimeout(()=>{throw o})})):i&&this.requestUpdate()}disconnectedCallback(){var i;super.disconnectedCallback(),(i=Y(this,oh))==null||i.destroy(),Ue(this,oh,void 0)}createRenderRoot(){const i=this.el.shadowRoot,r=this.constructor,n=r.shadowRootOptions,o=i??(n===KJ?this.el:this.el.attachShadow(n));if(this.isConnected){const a=o.getRootNode();a.adoptedStyleSheets=[...a.adoptedStyleSheets,...r.elementStyles.map(l=>"styleSheet"in l?l.styleSheet:l)]}return o}shouldUpdate(i){var r;return this.manager.Q=i,((r=Y(this,DM))==null?void 0:r.call(this,i))??!0}update(i){Y(this,oh)?yr(this,w$,Oae).call(this,i):super.update(i)}listen(i,r,n){const s=(r==null?void 0:r.bind(this))??r;this.manager.onLifecycle(()=>(this.el.addEventListener(i,s,n),()=>this.el.removeEventListener(i,s,n)))}listenOn(i,r,n,s){const o=(n==null?void 0:n.bind(this))??n;this.manager.onLifecycle(()=>(i.addEventListener(r,o,s),()=>i.removeEventListener(r,o,s)))}async componentOnReady(){return await Y(this,bb).promise,this}addController(i){var r;this.M.push(i),!(T7 in i)&&this.renderRoot&&this.el.isConnected&&((r=i.hostConnected)==null||r.call(i))}removeController(i){var r;this.M.splice(this.M.indexOf(i),1),(r=i.controllerRemoved)==null||r.call(i)}},vb=new WeakMap,DM=new WeakMap,zM=new WeakMap,bb=new WeakMap,oh=new WeakMap,w$=new WeakSet,Oae=function(i){try{Y(this,oh).clear(),this.constructor.K.r(Y(this,oh),()=>Yk(Sg.prototype,this,"update").call(this,i))}catch(r){throw Y(this,oh).clear(),r}},Fae=async function(){var s,o;const i=this.el.G??kae(this.el);i&&await i;const r=[];for(const a of this.M)"triggerLoad"in a?r.push(a.triggerLoad()):r.push(GS(a.hostLoad,a));await Promise.all(r),await((s=this.load)==null?void 0:s.call(this)),this.manager.hasDestroy&&this.manager.onUpdate(a=>a.has(ZV)&&this.manager.U()),Y(this,zM).call(this,!0),this.performUpdate(),this.I.resolve(),await Promise.resolve();const n=this.J.filter(a=>{var l;return!((l=a.manager)!=null&&l.loadedCalled)});n.length&&await Promise.allSettled(n.map(async a=>await a.componentOnReady())),this.J.length=0,this.el.setAttribute(this.constructor.K.hydratedAttribute,"");for(const a of this.M)"triggerLoaded"in a?a.triggerLoaded():ii(a.hostLoaded,a);(o=this.loaded)==null||o.call(this),Y(this,bb).resolve()},Sg.lumina=!0,Sg);const FSe=t=>{let e;const i=n=>{var s;e=new URL(n,((s=globalThis.location)==null?void 0:s.href)||void 0).href},r={...t,getAssetPath(n){var o;const s=new URL(n,e);return s.origin!==((o=globalThis.location)==null?void 0:o.origin)?s.href:s.pathname},setAssetPath:i,customElement(n,s){s.K=r,s.L=n,customElements.get(n)||customElements.define(n,s)}};return i(t.defaultAssetPath),r},Te=t=>typeof t=="object"&&t!=null?xSe(t):t,GI=t=>typeof t=="object"&&t!=null?$Se(t):t,Vr=ct;function Hu(t,e,i){i==null?t.removeAttribute(e):t.setAttribute(e,i)}const RF={toAttribute:t=>t===!0?"":t===!1?null:t},NSe="calcite-mode-auto",DSe="calcite-mode-dark",Iy={rtl:"calcite--rtl",calciteAnimate:"calcite-animate",calciteAnimateInUp:"calcite-animate__in-up",calciteAnimateInDown:"calcite-animate__in-down",calciteAnimateInRight:"calcite-animate__in-right",calciteAnimateInLeft:"calcite-animate__in-left"},Nae={filter:250,nextTick:0,resize:150,reposition:100},zSe=10,VSe=25;function eY(){const{classList:t}=document.body,e=window.matchMedia("(prefers-color-scheme: dark)").matches,i=()=>t.contains(DSe)||t.contains(NSe)&&e?"dark":"light",r=o=>document.body.dispatchEvent(new CustomEvent("calciteModeChange",{bubbles:!0,detail:{mode:o}})),n=o=>{s!==o&&r(o),s=o};let s=i();r(s),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",o=>n(o.matches?"dark":"light")),new MutationObserver(()=>n(i())).observe(document.body,{attributes:!0,attributeFilter:["class"]})}const Jf=globalThis.calciteConfig,jSe=(Jf==null?void 0:Jf.focusTrapStack)||[],USe=(Jf==null?void 0:Jf.logLevel)||"info",tY="3.3.3",BSe="2025-10-08",GSe="7391af08e";function qSe(){if(Jf&&Jf.version)return;console.info(`Using Calcite Components ${tY} [Date: ${BSe}, Revision: ${GSe}]`);const t=Jf||globalThis.calciteConfig||{};Object.defineProperty(t,"version",{value:tY,writable:!1}),globalThis.calciteConfig=t}document.readyState==="interactive"?eY():document.addEventListener("DOMContentLoaded",eY,{once:!0});queueMicrotask(qSe);const HSe=FSe({defaultAssetPath:"https://js.arcgis.com/calcite-components/3.3.3/",hydratedAttribute:"calcite-hydrated"}),{customElement:rr,getAssetPath:Dae,setAssetPath:WSe}=HSe;/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */let zae=!1;const Vae=t=>{zae=!0,WSe(t)};class zC{constructor(){this.promise=new Promise((e,i)=>{this.resolve=e,this.reject=i})}}const Jr=(t,e,...i)=>{try{return t==null?void 0:t.call(e,...i)}catch(r){console.error(r,t)}},JV=async(t,e,...i)=>{try{return await(t==null?void 0:t.call(e,...i))}catch(r){console.error(r,t)}},ZSe=t=>t.replace(JSe,(e,i)=>`${i===0?"":"-"}${e.toLowerCase()}`),JSe=/[A-Z]+(?![a-z])|[A-Z]/gu,YSe=(t,e)=>{const i=e/XSe;let r=0;const n=setInterval(()=>{r+=i,r>=e&&(clearInterval(n),t())},i);return n},XSe=4,P7=Symbol.for("controller"),KSe=t=>typeof t=="object"&&t!==null&&(P7 in t||"hostConnected"in t||"hostDisconnected"in t||"hostUpdate"in t||"hostUpdated"in t),QSe=t=>typeof(t==null?void 0:t.then)=="function",e$e=t=>t.M.length;let IE;const G1=t=>{IE!==t&&(IE=t,queueMicrotask(()=>IE===t?IE=void 0:0))},S$=t=>IE;let t0=[];const jae=t=>{if(t===void 0){t0=[];return}const e=t0.indexOf(t);t0=e===-1?[...t0,t]:t0.slice(0,e+1),queueMicrotask(()=>t0=[])},Uae=()=>t0;let q1;const t$e=t=>{q1!==t&&(q1=t,queueMicrotask(()=>q1===t?q1=void 0:0))},i$e=()=>{const t=q1;return q1=void 0,t},r$e=async(t,e)=>{const i=A7(t);if(i===void 0)return t;if(await i.ready,typeof e=="function"){const r=i.watchExports(n=>e(n,r))}return i.exports},n$e=async t=>{const e=A7(t);return await e.ready,e},A7=t=>{const i=S$().manager.X(t);if(i!==void 0)return i;if(KSe(t))return t;const r=i$e();if(r!==void 0)return r};let YV=!1;const s$e=t=>{YV=!0;try{return t()}finally{YV=!1}},o$e=(t,e,i)=>{const r=Object.keys(t),n=r.length;tg===void 0&&queueMicrotask(L7),tg??(tg=new Map);let s=tg.get(t);return s===void 0&&(s={callbacks:[],keyCount:n},tg.set(t,s)),s.keyCount!==n&&(s.callbacks.forEach(o=>o(r)),s.callbacks=[],s.keyCount=n),s.callbacks.push(o=>{const a=c=>Jr(e,null,c),l=o[n];l===void 0?a(void 0):t[l]===i?a(l):a(void 0)}),i};let tg;const L7=()=>{tg==null||tg.forEach(({callbacks:t},e)=>{const i=Object.keys(e);t.forEach(r=>r(i))}),tg=void 0},R7=(t,e,i)=>{const r=t.manager;return r.V!==ct&&r.V!==i&&r.S(void 0,void 0),r.T.length===0&&queueMicrotask(()=>r.S(void 0,void 0)),r.V=i,r.T.push((n,s)=>Jr(e,void 0,i===s?n:void 0)),i},O7=(t=[S$(),...Uae()],e,i)=>{const r=Array.isArray(t)?t:[t];let n=r.length+1;const s=o=>{n-=1,o!==void 0&&(n=Math.min(n,0)),n===0&&e(o)};r.forEach(o=>o$e(o,a=>s(a===void 0?void 0:{key:a,host:o,isReactive:!1}),i));for(const o of r)if("manager"in o&&o.manager.component===o){R7(o,a=>s(a===void 0?void 0:{key:a,host:o,isReactive:!0}),i);break}return i},F7=(t="",e={},i=S$())=>{const r={emit:n=>{t===""&&L7();const s=new CustomEvent(t,{detail:n,cancelable:!0,bubbles:!0,composed:!0,...e});return i.el.dispatchEvent(s),s}};return t===""&&O7(void 0,n=>t=n.key,r),r},VC=F7.bind(null,"");var Bae;Bae=P7;var Hx,Wx,wb,Zx,Jx,Yx,Xx,Kx,Yy,_b,Ra,ah,Lf,Qx,DA,tae;let Gae=(tae=class{constructor(e){Ye(this,Qx);Ye(this,Hx);Ye(this,Wx);Ye(this,wb);Ye(this,Zx);Ye(this,Jx);Ye(this,Yx);Ye(this,Xx);Ye(this,Kx);Ye(this,Yy);Ye(this,_b);Ye(this,Ra);Ye(this,ah);Ye(this,Lf);Ue(this,Hx,[]),Ue(this,Wx,[]),Ue(this,wb,[]),Ue(this,Zx,[]),Ue(this,Jx,[]),Ue(this,Yx,[]),Ue(this,Xx,[]),Ue(this,Kx,[]),Ue(this,Yy,[]),Ue(this,_b,!1),this.P=new zC,this.connectedCalled=!1,this.loadedCalled=!1,this[Bae]=!0,Ue(this,Lf,[]);const i=this,r=e??S$();Ue(i,Ra,r),i.ready=i.P.promise,Ue(i,ah,rY(i)),i.component=r,Y(i,Ra).addController(i),Y(i,Ra).manager===void 0||(jae(i),queueMicrotask(()=>i.catchUpLifecycle()))}catchUpLifecycle(){const{manager:e}=Y(this,Ra);e.connectedCalled&&!this.connectedCalled&&this.triggerConnected(),Y(e,_b)&&this.triggerLoad().then(()=>e.loadedCalled&&this.triggerLoaded()).catch(console.error)}get exports(){return Y(this,ah)}set exports(e){const i=Y(this,ah);i!==e&&(Ue(this,ah,e),Y(this,Lf).forEach(Jr),this.connectedCalled&&this.O!==!1&&Y(this,Ra).requestUpdate(this.O,i)),this.P.resolve(e)}setProvisionalExports(e,i=!0){Ue(this,ah,i?rY(e):e),Y(this,Lf).forEach(Jr)}watchExports(e){const i=()=>e(Y(this,ah));return Y(this,Lf).push(i),()=>void Y(this,Lf).splice(Y(this,Lf).indexOf(i),1)}get use(){return G1(Y(this,Ra)),r$e}get useRef(){return G1(Y(this,Ra)),n$e}get useRefSync(){return G1(Y(this,Ra)),A7}controllerRemoved(){Y(this,Ra).el.isConnected&&this.triggerDisconnected(),this.triggerDestroy()}onConnected(e){Y(this,Hx).push(e)}onDisconnected(e){Y(this,Wx).push(e)}onLoad(e){Y(this,wb).push(e)}onLoaded(e){Y(this,Zx).push(e)}onUpdate(e){Y(this,Jx).push(e)}onUpdated(e){Y(this,Yx).push(e)}onDestroy(e){Y(this,Xx).push(e)}onLifecycle(e){Y(this,Kx).push(e),this.connectedCalled&&Y(this,Ra).el.isConnected&&yr(this,Qx,DA).call(this,e)}triggerConnected(){const e=this;e.hostConnected&&Jr(e.hostConnected,e),Y(e,Hx).forEach(Jr),e.triggerLifecycle(),e.connectedCalled=!0}triggerDisconnected(){const e=this;e.hostDisconnected&&Jr(e.hostDisconnected,e),Y(e,Wx).forEach(Jr),Y(e,Yy).forEach(Jr),Ue(e,Yy,[])}async triggerLoad(){if(Y(this,_b))return;Ue(this,_b,!0);const e=this;e.hostLoad&&await JV(e.hostLoad,e),Y(this,wb).length>0&&await Promise.allSettled(Y(this,wb).map(JV)),this.P.resolve(Y(this,ah))}triggerLoaded(){this.loadedCalled||(this.hostLoaded&&Jr(this.hostLoaded,this),Y(this,Zx).forEach(Jr),this.loadedCalled=!0)}triggerUpdate(e){this.hostUpdate&&Jr(this.hostUpdate,this,e),Y(this,Jx).forEach(iY,e)}triggerUpdated(e){this.hostUpdated&&Jr(this.hostUpdated,this,e),Y(this,Yx).forEach(iY,e)}triggerDestroy(){this.hostDestroy&&Jr(this.hostDestroy,this),Y(this,Xx).forEach(Jr)}triggerLifecycle(){this.hostLifecycle&&yr(this,Qx,DA).call(this,()=>this.hostLifecycle()),Y(this,Kx).forEach(yr(this,Qx,DA),this)}},Hx=new WeakMap,Wx=new WeakMap,wb=new WeakMap,Zx=new WeakMap,Jx=new WeakMap,Yx=new WeakMap,Xx=new WeakMap,Kx=new WeakMap,Yy=new WeakMap,_b=new WeakMap,Ra=new WeakMap,ah=new WeakMap,Lf=new WeakMap,Qx=new WeakSet,DA=function(e){G1(Y(this,Ra));const i=Jr(e);(Array.isArray(i)?i:[i]).forEach(n=>{typeof n=="function"?Y(this,Yy).push(n):typeof n=="object"&&typeof n.remove=="function"&&Y(this,Yy).push(n.remove)})},tae);function iY(t){Jr(t,void 0,this)}const N7=Gae,rY=t=>{if(typeof t!="object"&&typeof t!="function"||t===null)return t;const e={get(r,n,s){if(!((n==="exports"||n==="_exports")&&n in r&&r[n]===i)&&(n in r||n in Promise.prototype||typeof n=="symbol"))return typeof r=="function"?r[n]:Reflect.get(r,n,s)}},i=new Proxy(t,e);return i},a$e=1,l$e=2,c$e=4,u$e=8,d$e=16,h$e=32,p$e=64,qae=t=>{var i,r;let e=t;for(;e=e.parentNode??e.host;)if((i=e==null?void 0:e.constructor)!=null&&i.lumina){const n=e;return(r=n.manager)!=null&&r.loadedCalled||(n.J??n._offspring).push(t),(n.I??n._postLoad).promise}return!1},jC={};function D7(){}const zA=Object.defineProperty,f$e=globalThis.HTMLElement??D7;var Oa,Rf,eS,VM,XV,tS;let odt=(tS=class extends f$e{constructor(){var n,s;super();Ye(this,VM);Ye(this,Oa);Ye(this,Rf);Ye(this,eS);Ue(this,Rf,{}),Ue(this,eS,[]),this.I=new zC,this.H=new zC,this.J=[];const i=this,r=i.constructor;i._offspring=i.J,i._postLoad=i.I,(n=r.C)==null||n.forEach(o=>{Object.hasOwn(i,o)&&(Y(i,Rf)[o]=i[o],delete i[o])}),r.A?yr(s=i,VM,XV).call(s,{a:r.A}):r.B.then(async o=>{var a,l;await r.K.p,yr(l=i,VM,XV).call(l,await(((a=o.default)==null?void 0:a.then(c=>typeof c=="function"?{a:c}:c))??o))}).catch(o=>{i.H.reject(o),setTimeout(()=>{throw o})})}static F(){for(const i of this.C??[])zA(this.prototype,i,{configurable:!0,enumerable:!0,get(){return Y(this,Rf)[i]},set(r){Y(this,Rf)[i]=r}});for(const i of this.E??[])zA(this.prototype,i,{async value(...r){return Y(this,Oa)||await this.H.promise,await Y(this,Oa)[i](...r)},configurable:!0});for(const i of this.D??[])zA(this.prototype,i,{value(...r){return Y(this,Oa)[i](...r)},configurable:!0})}get manager(){var i;return(i=Y(this,Oa))==null?void 0:i.manager}attributeChangedCallback(i,r,n){var s;(s=Y(this,Oa))==null||s.attributeChangedCallback(i,r,n),Y(this,Oa)||Y(this,eS).push(i)}connectedCallback(){var i,r;Y(this,Oa)?(r=(i=Y(this,Oa)).connectedCallback)==null||r.call(i):queueMicrotask(()=>this.G=qae(this))}disconnectedCallback(){var i,r;(r=(i=Y(this,Oa))==null?void 0:i.disconnectedCallback)==null||r.call(i)}async componentOnReady(){return await this.H.promise,this}addController(){}requestUpdate(){var i;(i=Y(this,Oa))==null||i.requestUpdate()}},Oa=new WeakMap,Rf=new WeakMap,eS=new WeakMap,VM=new WeakSet,XV=function(i){var y;const r=this.constructor,n=r.L,s=Y(this,Rf),o=Object.values(i).find(g=>g.L===n),a=`${n}--lazy`;let l=o;for(;l&&!Object.hasOwn(l,"lumina");)l=Object.getPrototypeOf(l);y$e(l),!r.A&&(r.A=o,customElements.define(a,o)),o.N=this;const d=document.createElement(a);o.N=void 0,Ue(this,Oa,d),Ue(this,Rf,d),Y(this,eS).forEach(g=>d.attributeChangedCallback(g,null,this.getAttribute(g))),Object.entries(s).forEach(m$e,d);const f=this.isConnected;(f||this.G)&&((y=d.connectedCallback)==null||y.call(d),f||d.disconnectedCallback())},tS.lumina=!0,tS);function m$e([t,e]){this[t]=e}const y$e=t=>{const e=t.prototype,i=Element.prototype;Object.hasOwn(e,"isConnected")||(e.setAttribute=function(n,s){i.setAttribute.call(this.el,n,s)},e.removeAttribute=function(n){i.removeAttribute.call(this.el,n)},zA(e,"isConnected",{get(){return Reflect.get(i,"isConnected",this.el)}}))};var Of,Mu,iS,iae;let g$e=(iae=class extends N7{constructor(i){super(i);Ye(this,Of);Ye(this,Mu);Ye(this,iS);this.destroyed=!1,this.R=!1,this.V=ct,this.T=[],Ue(this,iS,new WeakMap),Ue(this,Mu,i),this.exports=void 0,this.hasDestroy=KV in i&&typeof i.destroy=="function",qu.prototype.addController.call(i,{hostConnected:()=>{if(this.destroyed){const r=i.el.localName;throw i.el.remove(),new Error(`The ${r} component has already been destroyed. It cannot be used again. If you meant to disconnect and reconnect a component without automatic destroy, set the ${KV} prop.`)}Y(this,Of)!==void 0&&clearTimeout(Y(this,Of)),L7();for(const r of i.M)"triggerConnected"in r?r.triggerConnected():Jr(r.hostConnected,r)},hostDisconnected:()=>{for(const r of i.M)"triggerDisconnected"in r?r.triggerDisconnected():Jr(r.hostDisconnected,r);this.hasDestroy&&!this.destroyed&&this.U()},hostUpdate:()=>{for(const r of i.M)"triggerUpdate"in r?r.triggerUpdate(this.Q):Jr(r.hostUpdate,r,this.Q)},hostUpdated:()=>{for(const r of i.M)"triggerUpdated"in r?r.triggerUpdated(this.Q):Jr(r.hostUpdated,r,this.Q);this.Q=void 0}}),queueMicrotask(()=>this.R=!0),G1(i)}async destroy(){if(!this.destroyed){Y(this,Mu).el.isConnected&&(this.hasDestroy=!1,Y(this,Mu).el.remove()),Ue(this,Of,void 0),this.destroyed=!0;for(const i of Y(this,Mu).M)"triggerDestroy"in i?i.triggerDestroy():Jr(i.hostDestroy,i);Y(this,Mu).M.splice(0)}}U(){Y(this,Of)!==void 0&&clearTimeout(Y(this,Of)),!Y(this,Mu).el.isConnected&&!Y(this,Mu).autoDestroyDisabled&&Ue(this,Of,YSe(()=>void Y(this,Mu).destroy(),v$e))}S(i,r){const n=this.T;this.V=ct,this.T=[],n.forEach(s=>s(i,r))}W(i,r){(typeof r=="object"&&r!==null||typeof r=="function")&&Y(this,iS).set(r,i)}X(i){if(typeof i=="object"&&i!==null||typeof i=="function")return Y(this,iS).get(i)}},Of=new WeakMap,Mu=new WeakMap,iS=new WeakMap,iae),v$e=1e3;const KV="autoDestroyDisabled";var xb,jM,UM,Sb,lh,_$,Hae,Wae,$g;let z7=($g=class extends qu{constructor(){super();Ye(this,_$);Ye(this,xb);Ye(this,jM);Ye(this,UM);Ye(this,Sb);Ye(this,lh);this.M=[],this.manager=new g$e(this);const i=this,r=i.constructor,n=r.N,s=r.K.o,o=$g.prototype.shouldUpdate;Ue(i,Sb,(n==null?void 0:n.H)??new zC),i.I=(n==null?void 0:n.I)??new zC,i.J=(n==null?void 0:n.J)??[],i._offspring=i.J,i._postLoad=i.I,i.el=n??i,Ue(i,UM,i.enableUpdating),i.enableUpdating=D7,i.shouldUpdate!==o&&(Ue(i,jM,i.shouldUpdate),i.shouldUpdate=o),s&&(Ue(i,xb,new Map),r.elementProperties.forEach((a,l)=>Y(i,xb).set(l,s())))}static finalizeStyles(i){var s;const r=super.finalizeStyles(i),n=this.shadowRootOptions===jC;return((s=this.K)==null?void 0:s.commonStyles)===void 0||n?r:[this.K.commonStyles,...r]}static createProperty(i,r){const n=typeof r=="number"?r:Array.isArray(r)?r[0]:0,s=Array.isArray(r)?r[1]:void 0,o=(s==null?void 0:s.hasChanged)??XM,a={attribute:n&a$e&&typeof i=="string"?ZSe(i):!1,reflect:!!(n&l$e),type:n&c$e?Boolean:n&u$e?Number:void 0,state:!!(n&d$e),readOnly:!!(n&h$e),noAccessor:!!(n&p$e),c:!1,...s,hasChanged(l,c){const d=o(l,c);return a.c=d,d}};super.createProperty(i,a)}static getPropertyDescriptor(i,r,n){const s=this.K,o=super.getPropertyDescriptor(i,r,n);return n.d=o,{...o,get(){var a,l;return(a=s.t)==null||a.call(s,Y(this,xb).get(i)),(l=o.get)==null?void 0:l.call(this)},set(a){var c,d;const l=this.manager;if(n.readOnly&&!YV&&(l.R||l.connectedCalled))throw Error(`Cannot assign to read-only property "${i}" of ${this.el.localName}. Trying to assign "${a}"`);o.set.call(this,a??void 0),n.c&&((d=(c=Y(this,xb))==null?void 0:c.get(i))==null||d.notify()),l.T.length>0&&(l==null||l.S(i,a))}}}connectedCallback(){var n,s;if(this.el.hasAttribute("defer-hydration"))return;const i=(s=(n=this.constructor.K).c)==null?void 0:s.call(n,()=>this.requestUpdate());Ue(this,lh,i);const r=!this.manager.connectedCalled;super.connectedCallback(),r?queueMicrotask(()=>yr(this,_$,Wae).call(this).catch(o=>{Y(this,Sb).reject(o),setTimeout(()=>{throw o})})):i&&this.requestUpdate()}disconnectedCallback(){var i;super.disconnectedCallback(),(i=Y(this,lh))==null||i.destroy(),Ue(this,lh,void 0)}createRenderRoot(){const i=this.el.shadowRoot,r=this.constructor,n=r.shadowRootOptions,o=i??(n===jC?this.el:this.el.attachShadow(n));if(i)return qu.prototype.createRenderRoot.call(this),i;if(this.isConnected){const a=o.getRootNode();a.adoptedStyleSheets=[...a.adoptedStyleSheets,...r.elementStyles.map(l=>"styleSheet"in l?l.styleSheet:l)]}return o}shouldUpdate(i){var r;return this.manager.Q=i,((r=Y(this,jM))==null?void 0:r.call(this,i))??!0}update(i){Y(this,lh)?yr(this,_$,Hae).call(this,i):super.update(i)}listen(i,r,n){const s=(r==null?void 0:r.bind(this))??r;this.manager.onLifecycle(()=>(this.el.addEventListener(i,s,n),()=>this.el.removeEventListener(i,s,n)))}listenOn(i,r,n,s){const o=(n==null?void 0:n.bind(this))??n;this.manager.onLifecycle(()=>(i.addEventListener(r,o,s),()=>i.removeEventListener(r,o,s)))}async componentOnReady(){return await Y(this,Sb).promise,this}addController(i){var r;this.M.push(i),!(P7 in i)&&this.renderRoot&&this.el.isConnected&&((r=i.hostConnected)==null||r.call(i))}removeController(i){var r;this.M.splice(this.M.indexOf(i),1),(r=i.controllerRemoved)==null||r.call(i)}},xb=new WeakMap,jM=new WeakMap,UM=new WeakMap,Sb=new WeakMap,lh=new WeakMap,_$=new WeakSet,Hae=function(i){try{Y(this,lh).clear(),this.constructor.K.r(Y(this,lh),()=>Yk($g.prototype,this,"update").call(this,i))}catch(r){throw Y(this,lh).clear(),r}},Wae=async function(){var s,o;const i=this.el.G??qae(this.el);i&&await i;const r=[];for(const a of this.M)"triggerLoad"in a?r.push(a.triggerLoad()):r.push(JV(a.hostLoad,a));await Promise.all(r),await((s=this.load)==null?void 0:s.call(this)),this.manager.hasDestroy&&this.manager.onUpdate(a=>a.has(KV)&&this.manager.U()),Y(this,UM).call(this,!0),this.performUpdate(),this.I.resolve(),await Promise.resolve();const n=this.J.filter(a=>{var l;return!((l=a.manager)!=null&&l.loadedCalled)});n.length&&await Promise.allSettled(n.map(async a=>await a.componentOnReady())),this.J.length=0,this.el.setAttribute(this.constructor.K.hydratedAttribute,"");for(const a of this.M)"triggerLoaded"in a?a.triggerLoaded():Jr(a.hostLoaded,a);(o=this.loaded)==null||o.call(this),Y(this,Sb).resolve()},$g.lumina=!0,$g);const b$e=t=>{let e;const i=n=>{var s;e=new URL(n,((s=globalThis.location)==null?void 0:s.href)||void 0).href},r={...t,getAssetPath(n){var o;const s=new URL(n,e);return s.origin!==((o=globalThis.location)==null?void 0:o.origin)?s.href:s.pathname},setAssetPath:i,customElement(n,s){s.K=r,s.L=n,customElements.get(n)||customElements.define(n,s)}};return i(t.defaultAssetPath),r},w$e={},_$e=(t,e)=>i=>{const r=i.tagName;let n=w$e;const s={name:r,get prototype(){var a;if(n===void 0){const l=customElements.get(r);if(!l)throw new Error(`Custom element "${r}" not found`);(a=l.F)==null||a.call(l),l.F=D7,n=l.prototype,Object.defineProperty(s,"prototype",{value:n})}return n}},o=e({...i,react:t,elementClass:s});return n=void 0,o},V7=(t,e)=>({tagName:t,events:e});let ig;function fe(t){return typeof ig[t]=="function"?ig[t]=ig[t](globalThis):ig[t]}var rae,nae,sae,oae;ig=(rae=globalThis.dojoConfig)!=null&&rae.has||(nae=globalThis.esriConfig)!=null&&nae.has?{...(sae=globalThis.dojoConfig)==null?void 0:sae.has,...(oae=globalThis.esriConfig)==null?void 0:oae.has}:{},fe.add=(t,e,i,r)=>{(r||ig[t]===void 0)&&(ig[t]=e),i&&fe(t)},fe.cache=ig,fe.add("big-integer-warning-enabled",!0),fe.add("esri-deprecation-warnings",!0),fe.add("esri-tests-disable-screenshots",!1),fe.add("esri-tests-use-full-window",!1),fe.add("esri-tests-post-to-influx",!0),fe.add("esri-cim-animations-enable-status","enabled"),fe.add("esri-cim-animations-spotlight",!1),fe.add("esri-cim-animations-freeze-time",!1),(()=>{var e;fe.add("host-webworker",globalThis.WorkerGlobalScope!==void 0&&self instanceof globalThis.WorkerGlobalScope);const t=typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;if(fe.add("host-browser",t),fe.add("host-node",typeof globalThis.process=="object"&&((e=globalThis.process.versions)==null?void 0:e.node)&&globalThis.process.versions.v8),fe.add("dom",t),fe("host-browser")){const i=navigator,r=i.userAgent,n=i.appVersion,s=parseFloat(n);if(fe.add("wp",parseFloat(r.split("Windows Phone")[1])||void 0),fe.add("msapp",parseFloat(r.split("MSAppHost/")[1])||void 0),fe.add("khtml",n.includes("Konqueror")?s:void 0),fe.add("edge",parseFloat(r.split("Edge/")[1])||void 0),fe.add("opr",parseFloat(r.split("OPR/")[1])||void 0),fe.add("webkit",!fe("wp")&&!fe("edge")&&parseFloat(r.split("WebKit/")[1])||void 0),fe.add("chrome",!fe("edge")&&!fe("opr")&&parseFloat(r.split("Chrome/")[1])||void 0),fe.add("android",!fe("wp")&&parseFloat(r.split("Android ")[1])||void 0),fe.add("safari",!n.includes("Safari")||fe("wp")||fe("chrome")||fe("android")||fe("edge")||fe("opr")?void 0:parseFloat(n.split("Version/")[1])),fe.add("mac",n.includes("Macintosh")),!fe("wp")&&/(iPhone|iPod|iPad)/.test(r)){const o=RegExp.$1.replace(/P/,"p"),a=/OS ([\d_]+)/.test(r)?RegExp.$1:"1",l=parseFloat(a.replace(/_/,".").replaceAll("_",""));fe.add(o,l),fe.add("ios",l)}fe("webkit")||(!r.includes("Gecko")||fe("wp")||fe("khtml")||fe("edge")||fe.add("mozilla",s),fe("mozilla")&&fe.add("ff",parseFloat(r.split("Firefox/")[1]||r.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const t=navigator.userAgent,e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(t),i=/iPhone/i.test(t);e&&fe.add("esri-mobile",e),i&&fe.add("esri-iPhone",i),fe.add("esri-geolocation",!!navigator.geolocation)}fe.add("esri-wasm","WebAssembly"in globalThis),fe.add("esri-performance-mode-frames-between-render",20),fe.add("esri-force-performance-mode",!1),fe.add("esri-shared-array-buffer",(()=>{const t="SharedArrayBuffer"in globalThis,e=globalThis.crossOriginIsolated===!1;return t&&!e})),fe.add("wasm-simd",(()=>{const t=[0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11];return WebAssembly.validate(new Uint8Array(t))})),fe.add("esri-atomics","Atomics"in globalThis),fe.add("esri-workers","Worker"in globalThis),fe.add("web-feat:cache","caches"in globalThis),fe.add("esri-workers-arraybuffer-transfer",!fe("safari")||Number(fe("safari"))>=12),fe.add("workers-pool-size",8),fe.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),fe.add("featurelayer-simplify-payload-size-factors",[1,1,4]),fe.add("featurelayer-fast-triangulation-enabled",!0),fe.add("featurelayer-animation-enabled",!0),fe.add("featurelayer-snapshot-enabled",!0),fe.add("featurelayer-snapshot-initial-tolerance",0),fe.add("featurelayer-snapshot-point-min-threshold",8e4),fe.add("featurelayer-snapshot-point-max-threshold",4e5),fe.add("featurelayer-snapshot-multipoint-min-threshold",2e4),fe.add("featurelayer-snapshot-multipoint-max-threshold",1e5),fe.add("featurelayer-snapshot-polygon-min-threshold",1e3),fe.add("featurelayer-snapshot-polygon-max-threshold",2e3),fe.add("featurelayer-snapshot-polyline-min-threshold",1e3),fe.add("featurelayer-snapshot-polyline-max-threshold",2e3),fe.add("featurelayer-snapshot-max-vertex-count",25e4),fe.add("featurelayer-snapshot-non-hosted-exceedslimit-enabled",!1),fe.add("featurelayer-snapshot-concurrency",4),fe.add("featurelayer-snapshot-coverage",.1),fe.add("featurelayer-query-max-depth",4),fe.add("featurelayer-query-pausing-enabled",!1),fe.add("featurelayer-query-tile-concurrency",4),fe.add("featurelayer-query-tile-max-features",6e5),fe.add("featurelayer-advanced-symbols",!1),fe.add("featurelayer-pbf",!0),fe.add("featurelayer-pbf-statistics",!1),fe.add("feature-layers-workers",!0),fe.add("feature-polyline-generalization-factor",1),fe.add("mapview-transitions-duration",200),fe.add("mapview-essential-goto-duration",200),fe.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),fe.add("mapserver-pbf-version-support",10.81),fe.add("mapservice-popup-identify-max-tolerance",20),fe.add("request-queue-concurrency-hosted",16),fe.add("request-queue-concurrency-non-hosted",4),fe.add("curve-densification-coarse-segments",128),fe.add("curve-densification-max-segments",2e3),fe.add("curve-densification-min-segments",3),fe.add("curve-densification-pixel-deviation",.5),fe.add("view-readyState-waiting-delay",1e3),fe.add("gradient-depth-bias",.01),fe.add("gradient-depth-epsilon",1e-8),fe.add("enable-feature:esri-compress-textures",!0),fe("host-webworker")||fe("host-browser")&&(fe.add("esri-csp-restrictions",(()=>{try{new Function}catch{return!0}return!1})),fe.add("esri-image-decode",(()=>{if("decode"in new Image){const t=new Image;return t.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void t.decode().then((()=>{fe.add("esri-image-decode",!0,!0,!0)})).catch((()=>{fe.add("esri-image-decode",!1,!0,!0)}))}return!1})),fe.add("esri-url-encodes-apostrophe",(()=>{const t=window.document.createElement("a");return t.href="?'",t.href.includes("?%27")})))})();function ldt(t){}function x$e(t){return()=>t}function cdt(t){return t}var Va;let j7=(Va=class{constructor(e=1){this._seed=e}set seed(e){this._seed=e??Math.random()*Va._m}getInt(){return this._seed=(Va._a*this._seed+Va._c)%Va._m,this._seed}getFloat(){return this.getInt()/(Va._m-1)}getIntRange(e,i){return Math.round(this.getFloatRange(e,i))}getFloatRange(e,i){const r=i-e;return e+this.getInt()/Va._m*r}},Va._m=2147483647,Va._a=48271,Va._c=0,Va);const S$e=1.5,udt=1/S$e,ddt=.5;function U7(t,e){return e?t.filter(((i,r,n)=>n.findIndex(e.bind(null,i))===r)):Array.from(new Set(t))}function $$e(t,e,i,r,n,s,o){if(t==null&&r==null)return!0;e=Math.max(0,e),n=Math.max(0,n),i=Math.max(0,i<0?((t==null?void 0:t.length)??0)+i:i),s=Math.max(0,s<0?((r==null?void 0:r.length)??0)+s:s);const a=i-e;if(t==null||r==null||a!==s-n)return!1;if(o){for(let l=0;l<a;l++)if(!o(t[e+l],r[n+l]))return!1}else for(let l=0;l<a;l++)if(t[e+l]!==r[n+l])return!1;return!0}function OF(t,e,i){return $$e(t,0,(t==null?void 0:t.length)??0,e,0,(e==null?void 0:e.length)??0,i)}function nY(t,e,i){let r,n;return i?(r=e.filter((s=>!t.some((o=>i(o,s))))),n=t.filter((s=>!e.some((o=>i(o,s)))))):(r=e.filter((s=>!t.includes(s))),n=t.filter((s=>!e.includes(s)))),{added:r,removed:n}}function hdt(t){return t&&typeof t.length=="number"}let Zae=class{constructor(){this.last=0}};const Jae=new Zae;function QV(t,e,i,r){r=r||Jae;const n=Math.max(0,r.last-10);for(let o=n;o<i;++o)if(t[o]===e)return r.last=o,o;const s=Math.min(n,i);for(let o=0;o<s;++o)if(t[o]===e)return r.last=o,o;return-1}function T$e(t,e,i,r){const n=t.length,s=QV(t,e,n,r);if(s!==-1)return t[s]=t[n-1],t.pop(),e}const ru=new Set;function E$e(t,e,i=t.length,r=e.length,n,s){if(r===0||i===0)return i;ru.clear();for(let a=0;a<r;++a)ru.add(e[a]);n=n||Jae;const o=Math.max(0,n.last-10);for(let a=o;a<i;++a)if(ru.has(t[a])&&(s==null||s.push(t[a]),ru.delete(t[a]),t[a]=t[i-1],--i,--a,ru.size===0||i===0))return ru.clear(),i;for(let a=0;a<o;++a)if(ru.has(t[a])&&(s==null||s.push(t[a]),ru.delete(t[a]),t[a]=t[i-1],--i,--a,ru.size===0||i===0))return ru.clear(),i;return ru.clear(),i}function fdt(t,e,i){const r=t.length;if(e>=r)return t.slice();const n=B7(i),s=new Set,o=[];for(;o.length<e;){const a=Math.floor(n()*r);s.has(a)||(s.add(a),o.push(t[a]))}return o}function B7(t){return t?(sY.seed=t,()=>sY.getFloat()):Math.random}const sY=new j7;function Yae(t,e){if(!t)return t;const i=B7(e);for(let r=t.length-1;r>0;r--){const n=Math.floor(i()*(r+1)),s=t[r];t[r]=t[n],t[n]=s}return t}function G7(t,e){const i=t.indexOf(e);return i!==-1?(t.splice(i,1),e):null}function Kr(t,e){return t!=null}const mdt=[];function ydt(t){return t instanceof ArrayBuffer}function q7(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Int8Array"}function Xae(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint8Array"}function Kae(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint8ClampedArray"}function H7(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Int16Array"}function Qae(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint16Array"}function W7(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Int32Array"}function ele(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint32Array"}function I$e(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Float16Array"}function FF(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Float32Array"}function NF(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Float64Array"}function tle(t){return"buffer"in t}const ile=1024;function gdt(t){return NF(t)||FF(t)||W7(t)||H7(t)||q7(t)}function vdt(t){return NF(t)||FF(t)}function bdt(t){return NF(t)?179769e303:I$e(t)?65504:FF(t)?3402823e32:ele(t)?4294967295:Qae(t)?65535:Xae(t)||Kae(t)?255:W7(t)?2147483647:H7(t)?32767:q7(t)?127:256}const wdt=-32768,_dt=-2147483648;function C$e(t,e){let i;for(i in t)t.hasOwnProperty(i)&&t[i]===void 0&&delete t[i];return t}function se(t){if(!t||typeof t!="object"||typeof t=="function")return t;const e=sle(t);if(e!=null)return e;if(ER(t))return t.clone();if(rle(t))return t.map(se);if(nle(t))throw new Error("Trying to clone an unclonable Accessor instance");const i={};for(const r of Object.getOwnPropertyNames(t))i[r]=se(t[r]);return i}function ej(t){if(!t||typeof t!="object"||typeof t=="function"||"HTMLElement"in globalThis&&t instanceof HTMLElement)return t;const e=sle(t);if(e!=null)return e;if(rle(t)){let r=!0;const n=t.map((s=>{const o=ej(s);return s!=null&&o==null&&(r=!1),o}));return r?n:null}if(ER(t))return t.clone();if(t instanceof File||t instanceof Blob)return t;if(nle(t))return null;const i=new(Object.getPrototypeOf(t)).constructor;for(const r of Object.getOwnPropertyNames(t)){const n=t[r],s=ej(n);if(n!=null&&s==null)return null;i[r]=s}return i}function ER(t){return typeof t.clone=="function"}function rle(t){return typeof t.map=="function"&&typeof t.forEach=="function"}function nle(t){return typeof t.notifyChange=="function"&&typeof t.watch=="function"}function oY(t){if(Object.prototype.toString.call(t)!=="[object Object]")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function sle(t){if(q7(t)||Xae(t)||Kae(t)||H7(t)||Qae(t)||W7(t)||ele(t)||FF(t)||NF(t))return t.slice();if(t instanceof Date)return new Date(t.getTime());if(t instanceof ArrayBuffer)return t.slice(0,t.byteLength);if(t instanceof Map){const e=new Map;for(const[i,r]of t)e.set(i,se(r));return e}if(t instanceof Set){const e=new Set;for(const i of t)e.add(se(i));return e}return null}function Z7(t,e){return t===e||typeof t=="number"&&isNaN(t)&&typeof e=="number"&&isNaN(e)||typeof(t==null?void 0:t.getTime)=="function"&&typeof(e==null?void 0:e.getTime)=="function"&&t.getTime()===e.getTime()||!1}function ole(t,e){return t===e||(t==null||typeof t=="string"?t===e:typeof t=="number"?t===e||typeof e=="number"&&isNaN(t)&&isNaN(e):t instanceof Date?e instanceof Date&&t.getTime()===e.getTime():Array.isArray(t)?Array.isArray(e)&&OF(t,e):t instanceof Set?e instanceof Set&&k$e(t,e):t instanceof Map?e instanceof Map&&P$e(t,e):!!oY(t)&&oY(e)&&M$e(t,e))}function M$e(t,e){if(t===null||e===null)return!1;const i=Object.keys(t);if(e===null||Object.keys(e).length!==i.length)return!1;for(const r of i)if(t[r]!==e[r]||!Object.prototype.hasOwnProperty.call(e,r))return!1;return!0}function k$e(t,e){if(t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0}function P$e(t,e){if(t.size!==e.size)return!1;for(const[i,r]of t){const n=e.get(i);if(n!==r||n===void 0&&!e.has(i))return!1}return!0}function J7(t,e,i=!1){return lle(t,e,i)}function e2(t,e){if(e!=null)return e[t]||ale(t.split("."),!1,e)}function xn(t,e,i){const r=t.split("."),n=r.pop(),s=ale(r,!0,i);s&&n&&(s[n]=e)}function aY(t,e){if(t==null&&e==null)return!1;if(t==null||e==null)return!0;if(typeof t=="object"){if(Array.isArray(t)){const i=e;if(t.length!==i.length)return!0;for(let r=0;r<t.length;r++)if(aY(t[r],i[r]))return!0;return!1}if(Object.keys(t).length!==Object.keys(e).length)return!0;for(const i in t)if(aY(t[i],e[i]))return!0;return!1}return t!==e}function ale(t,e,i){let r=i;for(const n of t){if(r==null)return;if(!(n in r)){if(!e)return;r[n]={}}r=r[n]}return r}function lle(t,e,i){return e?Object.keys(e).reduce(((r,n)=>{if(n==="__proto__")return r;let s=r[n],o=e[n];return s===o?r:s===void 0?(r[n]=se(o),r):(Array.isArray(o)||Array.isArray(r)?(s=s?Array.isArray(s)?r[n]=s.slice():r[n]=[s]:r[n]=[],o&&(Array.isArray(o)||(o=[o]),i?o.forEach((a=>{s.includes(a)||s.push(a)})):r[n]=o.slice())):o&&typeof o=="object"?r[n]=lle(s,o,i):r.hasOwnProperty(n)&&!e.hasOwnProperty(n)||(r[n]=o),r)}),t||{}):t}var aae;const Si={apiKey:void 0,apiKeys:{scopes:[]},applicationName:"",applicationUrl:(aae=globalThis.location)==null?void 0:aae.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",userPrivilegesApplied:!0,portalUrl:"https://www.arcgis.com",respectPrefersReducedMotion:!0,routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],internalInterceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:62e3,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(J7(Si,globalThis.esriConfig,!0),delete Si.has),!Si.assetsPath){{const t="4.33";Si.assetsPath=`https://js.arcgis.com/${t}/@arcgis/core/assets`}Si.defaultAssetsPath=Si.assetsPath}const A$e=/\{([^}]+)\}/g;function lY(t){return t??""}function Ja(t,e){return e?t.replaceAll(A$e,typeof e=="object"?(i,r)=>lY(e2(r,e)):(i,r)=>lY(e(r))):t}function xdt(t,e){return t.replaceAll(/([.$?*|{}()[\]\\/+\-^])/g,(i=>e!=null&&e.includes(i)?i:`\\${i}`))}function cle(t){let e=0;for(let i=0;i<t.length;i++)e=(e<<5)-e+t.charCodeAt(i),e|=0;return e}let cY;function Cg(t){return cY??(cY=new DOMParser),cY.parseFromString(t||"","text/html").body.innerText||""}function uY(t,e){return new RegExp(`{${e}}`,"ig").test(t)}function Sdt(t,...e){let i=t[0];for(let r=0;r<e.length;++r)i+=e[r]+t[r+1];return i}const dY={info:0,warn:1,error:2,none:3};var Un;let Ie=(Un=class{constructor(e){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},e.level!=null&&(this.level=e.level),e.writer!=null&&(this.writer=e.writer),this._module=e.module,Un._loggers.set(this.module,this);const i=this.module.lastIndexOf(".");i!==-1&&(this._parent=Un.getLogger(this.module.slice(0,i)))}get module(){return this._module}get parent(){return this._parent}error(...e){this._log("error","always",...e)}warn(...e){this._log("warn","always",...e)}info(...e){this._log("info","always",...e)}errorOnce(...e){this._log("error","once",...e)}warnOnce(...e){this._log("warn","once",...e)}infoOnce(...e){this._log("info","once",...e)}errorOncePerTick(...e){this._log("error","oncePerTick",...e)}warnOncePerTick(...e){this._log("warn","oncePerTick",...e)}infoOncePerTick(...e){this._log("info","oncePerTick",...e)}get test(){}static get test(){}static getLogger(e){return e=typeof e!="string"?e.declaredClass:e,Un._loggers.get(e)||new Un({module:e})}_log(e,i,...r){if(this._matchLevel(e)){if(i!=="always"&&!Un._throttlingDisabled){const n=R$e(r),s=this._loggedMessages[e].get(n);if(i==="once"&&s!=null||i==="oncePerTick"&&s&&s>=Un._tickCounter)return;this._loggedMessages[e].set(n,Un._tickCounter),Un._scheduleTickCounterIncrement()}for(const n of Si.log.interceptors)if(n(e,this.module,...r))return;this._inheritedWriter()(e,this.module,...r)}}_parentWithMember(e,i){let r=this;for(;r!=null;){const n=r[e];if(n!=null)return n;r=r.parent}return i}_inheritedWriter(){return this._parentWithMember("writer",L$e)}_matchLevel(e){const i=Si.log.level||"warn";return dY[this._parentWithMember("level",i)]<=dY[e]}static _scheduleTickCounterIncrement(){Un._tickCounterScheduled||(Un._tickCounterScheduled=!0,Promise.resolve().then((()=>{Un._tickCounter++,Un._tickCounterScheduled=!1})))}},Un._loggers=new Map,Un._tickCounter=0,Un._tickCounterScheduled=!1,Un._throttlingDisabled=!1,Un);function L$e(t,e,...i){console[t](`[${e}]`,...i)}function R$e(...t){return cle(JSON.stringify(t,(i,r)=>typeof r!="object"||Array.isArray(r)?r:"[Object]"))}const O$e={remove:()=>{}};function Ei(t){return t?{remove(){t&&(t(),t=void 0)}}:O$e}function ule(t){t.forEach((e=>e==null?void 0:e.remove()))}function $dt(t){ule(t),t.length=0}function yw(t){return Ei((()=>ule(t)))}function Tdt(t){return Ei((()=>{var e;return(e=t())==null?void 0:e.remove()}))}function Edt(t){return Ei((()=>t==null?void 0:t.abort()))}function Idt(t){return Ei(t!=null?()=>t.destroy():void 0)}function F$e(t){return typeof t=="object"&&!!t&&"remove"in t&&typeof t.remove=="function"}function Cdt(t){F$e(t)&&t.remove()}function Mdt(t){return{[Symbol.dispose](){t.remove()}}}function da(t){return t.__accessor__??null}function N$e(t,e){var i;return((i=t==null?void 0:t.metadata)==null?void 0:i[e])!=null}function VA(t,e,i){return i?IR(t,e,{policy:i,path:""}):IR(t,e,null)}function IR(t,e,i){return e?Object.keys(e).reduce(((r,n)=>{const s=n;if(s==="__proto__")return r;let o=null,a="merge";if(i&&(o=i.path?`${i.path}.${n}`:n,a=i.policy(o)),a==="replace"||a==="replace-arrays"&&Array.isArray(r[s]))return r[s]=e[s],r;if(r[s]===void 0)return r[s]=se(e[s]),r;let l=r[s],c=e[s];if(l===c)return r;if(Array.isArray(c)||Array.isArray(r))l=l?Array.isArray(l)?r[s]=l.slice():r[s]=[l]:r[s]=[],c&&(Array.isArray(c)||(c=[c]),c.forEach((d=>{l.includes(d)||l.push(d)})));else if(c&&typeof c=="object")if(i){const d=i.path;i.path=o,r[s]=IR(l,c,i),i.path=d}else r[s]=IR(l,c,null);else r.hasOwnProperty(n)&&!e.hasOwnProperty(n)||(r[s]=c);return r}),t||{}):t}function dle(t){return Array.isArray(t)?t:t.split(".")}function hY(t){return t.includes(",")?t.split(",").map((e=>e.trim())):[t.trim()]}function D$e(t){if(Array.isArray(t)){const e=[];for(const i of t)e.push(...hY(i));return e}return hY(t)}function hle(t,e,i,r){const n=D$e(e);if(n.length!==1){const s=n.map((o=>r(t,o,i)));return yw(s)}return r(t,n[0],i)}const Rr={Dirty:1,Overridden:2,Computing:4,NonNullable:8,HasDefaultValue:16,DepTrackingInitialized:32,AutoTracked:64,ExplicitlyTracking:128};let DF=class{constructor(e){this.accessed=void 0,this._handles=void 0,this._observer=e}destroy(){var e;(e=this.accessed)==null||e.clear(),this.clear()}onAccessed(e){this._observer!=null&&e!==this._observer&&(this.accessed==null&&(this.accessed=new Set),this.accessed.add(e))}onTrackingEnd(){this._observer!=null&&(this.clear(),this.accessed!=null&&(this._handles==null&&(this._handles=[]),this.accessed.forEach((e=>{this._handles.push(e.observe(this._observer))})),this.accessed.clear()))}clear(){if(this._handles!=null){for(let e=0;e<this._handles.length;++e)this._handles[e].remove();this._handles.length=0}}};const CR=new DF,CE=[];let qI=CR;function vt(t){qI.onAccessed(t)}let jA=!1,UA=!1;function ap(t,e,i){if(jA)return Y7(t,e,i);let r=null;return ple(t),r=e.call(i),fle(),r}function z$e(t,e){return ap(CR,t,e)}function Y7(t,e,i){const r=jA;jA=!0,ple(t);let n=null;try{n=e.call(i)}catch(s){UA&&Ie.getLogger("esri.core.accessorSupport.tracking").error(s)}return fle(),jA=r,n}function ple(t){qI=t,CE.push(t)}function fle(){const t=CE.length;if(t>1){const e=CE.pop();qI=CE[t-2],e.onTrackingEnd()}else if(t===1){const e=CE.pop();qI=CR,e.onTrackingEnd()}else qI=CR}function mle(t,e){if(e.flags&Rr.DepTrackingInitialized)return;e.flags|=Rr.DepTrackingInitialized;const i=UA;UA=!1,e.flags&Rr.AutoTracked?Y7(e.trackingTarget,e.metadata.get,t):yle(t,e),UA=i}const V$e=[];function yle(t,e){e.flags&Rr.ExplicitlyTracking||(e.flags|=Rr.ExplicitlyTracking,Y7(e.trackingTarget,(()=>{const i=e.metadata.dependsOn||V$e;for(const r of i)if(typeof r!="string"||r.includes(".")){const n=dle(r);for(let s=0,o=t;s<n.length&&o!=null&&typeof o=="object";++s)o=pY(o,n[s],s!==n.length-1)}else pY(t,r,!1)})),e.flags&=-129)}function pY(t,e,i){const r=e[e.length-1]==="?"?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const s=parseInt(r,10);if(!isNaN(s))return Array.isArray(t)?t[s]:t.at(s)}const n=da(t);if(n){const s=n.propertiesByName.get(r);s&&(vt(s),mle(t,s))}return i?t[r]:void 0}let j$e=class{constructor(e,i){this._observers=e,this._observer=i}remove(){G7(this._observers,this._observer)}},gle=class{constructor(){this._observers=null,this.destroyed=!1}observe(e){if(this.destroyed||e.destroyed)return U$e;this._observers==null&&(this._observers=[]);const i=this._observers;let r=!1,n=!1;const s=i.length;for(let o=0;o<s;++o){const a=i[o];if(a.destroyed)n=!0;else if(a===e){r=!0;break}}return r||(i.push(e),n&&this._removeDestroyedObservers()),new j$e(i,e)}_removeDestroyedObservers(){const e=this._observers;if(!e||e.length===0)return;const i=e.length;let r=0;for(let n=0;n<i;++n){for(;n+r<i&&e[n+r].destroyed;)++r;if(r>0){if(!(n+r<i))break;e[n]=e[n+r]}}e.length=i-r}destroy(){if(this.destroyed)return;this.destroyed=!0;const e=this._observers;if(e!=null){for(const i of e)i.onCommitted();this._observers=null}}};const U$e=Ei();let gw=class extends gle{notify(){const e=this._observers;if(e&&e.length>0){const i=e.slice();for(const r of i)r.onInvalidated(),r.onCommitted()}}},B$e=class{constructor(e,i){this._observable=new gw,this._value=e,this._equalityFunction=i}get value(){return vt(this._observable),this._value}set value(e){this._equalityFunction(e,this._value)||(this._value=e,this._observable.notify())}mutate(e){e(this._value),this._observable.notify()}};function Kb(t,e=ole){return new B$e(t,e)}let t2=class extends DF{constructor(e){super(new G$e(e)),this._observer&&fY.register(this,new WeakRef(this._observer),this)}destroy(){var e,i;this._observer&&fY.unregister(this._observer),(e=this.accessed)==null||e.clear(),this.clear(),(i=this._observer)==null||i.destroy()}},G$e=class{constructor(e){this._notify=e,this._invalidCount=0,this.destroyed=!1}onInvalidated(){this._invalidCount++}onCommitted(){if(this.destroyed)return;const e=this._invalidCount;if(e===1)return this._invalidCount=0,void this._notify();this._invalidCount=e>0?e-1:0}destroy(){this.destroyed=!0,this._notify=q$e}};const fY=new FinalizationRegistry((t=>{var e;(e=t.deref())==null||e.destroy()}));function q$e(){}function H$e(t,e){return Kb(t,e)}function vle(){return new gw}function W$e(t){return new t2(t)}function ble(t){vt(t)}function Z$e(t,e){return ap(t,e)}/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
v4.33.24 */const i2=b$e({defaultAssetPath:"https://js.arcgis.com/4.33/map-components/",hydratedAttribute:"hydrated"}),{customElement:X7,getAssetPath:Ndt,setAssetPath:Ddt}=i2;i2.t=ble;i2.o=vle;i2.c=W$e;i2.r=Z$e;function zF(t){return J$e(t)||wle(t)}function J$e(t){return t!=null&&typeof t=="object"&&"on"in t&&typeof t.on=="function"}function wle(t){return t!=null&&typeof t=="object"&&"addEventListener"in t&&typeof t.addEventListener=="function"}function $$(t,e,i){if(!zF(t))throw new TypeError("target is not a Evented or EventTarget object");return wle(t)?Y$e(t,e,i):t.on(e,i)}function Y$e(t,e,i,r){if(Array.isArray(e)){const n=e.slice();for(const s of n)t.addEventListener(s,i,r);return Ei((()=>{for(const s of n)t.removeEventListener(s,i,r)}))}return t.addEventListener(e,i,r),Ei((()=>t.removeEventListener(e,i,r)))}function _le(t,e,i){if(!zF(t))throw new TypeError("target is not a Evented or EventTarget object");if("once"in t)return t.once(e,i);const r=$$(t,e,(n=>{r.remove(),i.call(t,n)}));return r}function r2(t,e){if(t==null)throw new Error(e??"value is None")}function hr(t){return t==null||t.destroy(),null}function zdt(t){return t==null||t.dispose(),null}function Nr(t){return t==null||t.remove(),null}function Eo(t){return t==null||t.abort(),null}function Vdt(t){return t==null||t.release(),null}function X$e(t,e,i){return t!=null&&e!=null?i!=null?i(t,e):t.equals(e):t===e}function K$e(t,e){let i;return t.some(((r,n)=>(i=e(r,n),i!=null))),i??void 0}function Q$e(t){return{setTimeout:(e,i)=>{const r=t.setTimeout(e,i);return Ei((()=>t.clearTimeout(r)))}}}const T$=Q$e(globalThis);function eTe(t,e){return t.replaceAll(/\$\{([^\s:}]*)(?::([^\s:}]+))?\}/g,((i,r)=>r===""?"$":(e2(r,e)??"").toString()))}let xle=class{constructor(e,i,r=void 0){this.name=e,this.details=r,this.message=(i&&eTe(i,r))??""}toString(){return"["+this.name+"]: "+this.message}},ie=class Sle extends xle{constructor(e,i,r){super(e,i,r)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,((e,i)=>{if(i&&typeof i=="object"&&typeof i.toJSON=="function")return i;try{return se(i)}catch{return"[object]"}})))}}catch(e){throw Ie.getLogger("esri.core.Error").error(e),e}return{name:this.name,message:this.message,details:this.details}}static fromJSON(e){return new Sle(e.name,e.message,e.details)}};ie.prototype.type="error";function fr(t="Aborted"){return new ie("AbortError",t)}function Wi(t,e="Aborted"){if(Nc(t))throw fr(e)}function n2(t){return t instanceof AbortSignal?t:(t==null?void 0:t.signal)??void 0}function Nc(t){const e=n2(t);return e!=null&&e.aborted}function dh(t){if(Tn(t))throw t}function tj(t){if(!Tn(t))throw t}function ed(t,e){const i=n2(t);if(i!=null){if(!i.aborted)return _le(i,"abort",(()=>e()));e()}}function K7(t,e){const i=n2(t);if(i!=null)return Wi(i),_le(i,"abort",(()=>e(fr())))}function Q7(t,e){return n2(e)==null?t:new Promise(((i,r)=>{let n=ed(e,(()=>r(fr())));const s=()=>{n=Nr(n)};t.then(s,s),t.then(i,r)}))}function Tn(t){return(t==null?void 0:t.name)==="AbortError"}async function Wu(t){try{return await t}catch(e){if(!Tn(e))throw e;return}}async function im(t){if(!t)return;if(typeof t.forEach!="function"){const i=Object.keys(t),r=i.map((o=>t[o])),n=await im(r),s={};return i.map(((o,a)=>s[o]=n[a])),s}const e=t;return Promise.allSettled(e).then((i=>Array.from(e,((r,n)=>{const s=i[n];return s.status==="fulfilled"?{promise:r,value:s.value}:{promise:r,error:s.reason}}))))}async function tTe(t){return(await Promise.allSettled(t)).filter((e=>e.status==="fulfilled")).map((e=>e.value))}async function Udt(t){return(await Promise.allSettled(t)).filter((e=>e.status==="rejected")).map((e=>e.reason))}function s2(t,e=void 0,i){const r=new AbortController;return ed(i,(()=>r.abort())),new Promise(((n,s)=>{let o=setTimeout((()=>{o=0,n(e)}),t);ed(r,(()=>{o&&(clearTimeout(o),s(fr()))}))}))}function Bdt(t,e,i,r){const n=i&&"abort"in i?i:null;r!=null||n||(r=i);let s=setTimeout((()=>{s=0,n==null||n.abort()}),e);const o=()=>r||new ie("promiseUtils:timeout","The wrapped promise did not resolve within "+e+" ms");return t.then((a=>{if(s===0)throw o();return clearTimeout(s),a}),(a=>{throw clearTimeout(s),s===0?o():a}))}function iTe(t,e){const i=new AbortController,r=setTimeout((()=>i.abort()),e);return ed(t,(()=>{i.abort(),clearTimeout(r)})),{...t,signal:i.signal}}function gp(t){return t&&typeof t.then=="function"}function ij(t){return gp(t)?t:Promise.resolve(t)}function Zu(t,e=-1){let i,r,n,s,o=null;const a=(...l)=>{if(i){r=l,s&&s.reject(fr()),s=Nl();const y=s.promise;if(o){const g=o;o=null,g.abort()}return y}if(n=s||Nl(),s=null,e>0){const y=new AbortController;i=ij(t(...l,y.signal));const g=i;s2(e).then((()=>{i===g&&(s?y.abort():o=y)}))}else i=1,i=ij(t(...l));const c=()=>{const y=r;r=n=i=o=null,y!=null&&a(...y)},d=i,f=n;return d.then(c,c),d.then(f.resolve,f.reject),f.promise};return a}function Nl(){let t,e;const i=new Promise(((n,s)=>{t=n,e=s})),r=n=>{t(n)};return r.resolve=n=>t(n),r.reject=n=>e(n),r.timeout=(n,s)=>T$.setTimeout((()=>r.reject(s)),n),r.promise=i,r}function Gdt(t,e){e.then(t.resolve,t.reject)}async function mY(t){await Promise.resolve(),Wi(t)}function rTe(t){return(t==null?void 0:t.release)&&typeof t.release=="function"}function nTe(t){return(t==null?void 0:t.acquire)&&typeof t.acquire=="function"}var Tg;let Bg=(Tg=class{constructor(e,i,r,n=1,s=0){this._ctor=e,this._acquireFunction=i,this._releaseFunction=r,this.allocationSize=n,this._pool=new Array(s),this._initialSize=s;for(let o=0;o<s;o++)this._pool[o]=new this._ctor;this.allocationSize=Math.max(n,1)}destroy(){this.prune(0)}acquire(...e){let i;if(Tg.test.disabled)i=new this._ctor;else{if(this._pool.length===0){const r=this.allocationSize;for(let n=0;n<r;n++)this._pool[n]=new this._ctor}i=this._pool.pop()}return this._acquireFunction?this._acquireFunction(i,...e):nTe(i)&&i.acquire(...e),i}release(e){e&&!Tg.test.disabled&&(this._releaseFunction?this._releaseFunction(e):rTe(e)&&e.release(),this._pool.push(e))}prune(e=this._initialSize){if(!(e>=this._pool.length)){for(let i=e;i<this._pool.length;++i){const r=this._pool[i];this._dispose(r)}this._pool.length=e}}_dispose(e){e.dispose&&typeof e.dispose=="function"&&e.dispose()}},Tg.test={disabled:!1},Tg);function sTe(t){t.length=0}let ra=class{constructor(e=50,i=50){this._pool=new Bg(Array,void 0,sTe,i,e)}acquire(){return this._pool.acquire()}release(e){this._pool.release(e)}prune(){this._pool.prune(0)}static acquire(){return az.acquire()}static release(e){return az.release(e)}static prune(){az.prune()}};const az=new ra(100);let $le=class extends Bg{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=null}acquire(...e){const i=super.acquire(...e);return this._set.delete(i),i}release(e){e&&!this._set.has(e)&&(super.release(e),this._set.add(e))}_dispose(e){this._set.delete(e),super._dispose(e)}};const Kk=[];function MR(t){Kk.push(t),Kk.length===1&&queueMicrotask((()=>{const e=Kk.slice();Kk.length=0;for(const i of e)i()}))}let HI=class{constructor(e,i=30){this.name=e,this._counter=0,this._samples=new Array(i)}push(e){e!=null&&(this._samples[++this._counter%this._samples.length]=e)}set(e){e!=null&&(this._samples[this._counter%this._samples.length]=e)}get median(){return this._samples.slice().sort(((e,i)=>e-i))[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce(((e,i)=>e+i),0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}};var rj;(function(t){const e=(s,o,a,l)=>{let c=o,d=o;const f=a>>>1,y=s[c-1];for(;d<=f;){d=c<<1,d<a&&l(s[d-1],s[d])<0&&++d;const g=s[d-1];if(l(g,y)<=0)break;s[c-1]=g,c=d}s[c-1]=y},i=(s,o)=>s<o?-1:s>o?1:0;function r(s,o,a,l){o===void 0&&(o=0),a===void 0&&(a=s.length),l===void 0&&(l=i);for(let d=a>>>1;d>o;d--)e(s,d,a,l);const c=o+1;for(let d=a-1;d>o;d--){const f=s[o];s[o]=s[d],s[d]=f,e(s,c,d,l)}}function*n(s,o,a,l){o===void 0&&(o=0),a===void 0&&(a=s.length),l===void 0&&(l=i);for(let d=a>>>1;d>o;d--)e(s,d,a,l),yield;const c=o+1;for(let d=a-1;d>o;d--){const f=s[o];s[o]=s[d],s[d]=f,e(s,c,d,l),yield}}t.sort=r,t.iterableSort=n})(rj||(rj={}));const yY=rj,oTe=1.5,aTe=1.1;let WI=class{constructor(e){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new Zae,e&&(e.initialSize&&(this.data=new Array(e.initialSize)),e.allocator&&(this._allocator=e.allocator),e.deallocator!==void 0&&(this._deallocator=e.deallocator),e.shrink&&(this._shrink=()=>gY(this)))}toArray(){return this.data.slice(0,this.length)}filter(e){const i=new Array;for(let r=0;r<this._length;r++){const n=this.data[r];e(n)&&i.push(n)}return i}at(e){if((e=Math.trunc(e)||0)<0&&(e+=this._length),!(e<0||e>=this._length))return this.data[e]}includes(e,i){const r=this.data.indexOf(e,i);return r!==-1&&r<this.length}get length(){return this._length}set length(e){if(e>this._length){if(this._allocator){for(;this._length<e;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=e}else{if(this._deallocator)for(let i=e;i<this._length;++i)this.data[i]=this._deallocator(this.data[i]);this._length=e,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(e){this.data[this._length++]=e}pushArray(e,i=e.length){for(let r=0;r<i;r++)this.data[this._length++]=e[r]}fill(e,i){for(let r=0;r<i;r++)this.data[this._length++]=e}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const e=this.data[this._length];return++this._length,e}unshift(e){this.data.unshift(e),this._length++,gY(this)}pop(){if(this.length===0)return;const e=this.data[this.length-1];return this.length=this.length-1,this._shrink(),e}remove(e){const i=QV(this.data,e,this.length,this._hint);if(i!==-1)return this.data.splice(i,1),this.length=this.length-1,e}removeUnordered(e){return this.removeUnorderedIndex(QV(this.data,e,this.length,this._hint))}removeUnorderedIndex(e){if(!(e>=this.length||e<0))return this.swapElements(e,this.length-1),this.pop()}removeUnorderedMany(e,i=e.length,r){this.length=E$e(this.data,e,this.length,i,this._hint,r),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(e,i){if(e>=this.length||i>=this.length||e===i)return;const r=this.data[e];this.data[e]=this.data[i],this.data[i]=r}sort(e){yY.sort(this.data,0,this.length,e)}iterableSort(e){return yY.iterableSort(this.data,0,this.length,e)}some(e,i){for(let r=0;r<this.length;++r)if(e.call(i,this.data[r],r,this.data))return!0;return!1}find(e,i){const{data:r,length:n}=this;for(let s=0;s<n;++s)if(e.call(i,r[s]))return r[s]}filterInPlace(e,i){let r=0;for(let n=0;n<this._length;++n){const s=this.data[n];e.call(i,s,n,this.data)&&(this.data[n]=this.data[r],this.data[r]=s,r++)}if(this._deallocator)for(let n=r;n<this._length;n++)this.data[n]=this._deallocator(this.data[n]);return this._length=r,this._shrink(),this}forAll(e,i){const{data:r,length:n}=this;for(let s=0;s<n;++s)e.call(i,r[s],s,r)}forEach(e,i){this.data.slice(0,this.length).forEach(e,i)}map(e,i){const r=new Array(this.length);for(let n=0;n<this.length;++n)r[n]=e.call(i,this.data[n],n,this.data);return r}reduce(e,i){let r=i;for(let n=0;n<this.length;++n)r=e(r,this.data[n],n,this.data);return r}has(e){const i=this.length,r=this.data;for(let n=0;n<i;++n)if(r[n]===e)return!0;return!1}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.data[e]}};function gY(t){t.data.length>oTe*t.length&&(t.data.length=Math.floor(t.length*aTe))}function Jdt(t){return t}function lTe(t){return 1e3*t}function Ydt(t){return t}function Xdt(t){return .001*t}let cTe=class{constructor(e){this.phases=e,this.paused=!1,this.ticks=-1,this.removed=!1}},uTe=class{constructor(e){this.callback=e,this.isActive=!0}remove(){this.isActive=!1}},nj=0;const DT={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},sj=["prepare","preRender","render","postRender","update","finish"],oj=[],Qb=new WI;let dTe=class{constructor(e){this._task=e}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1,Tle()}};function hTe(){kb!=null&&(cancelAnimationFrame(kb),kb=requestAnimationFrame(eG))}function Tle(){kb==null&&(nj=performance.now(),kb=requestAnimationFrame(eG))}const kR={frameTasks:Qb,willDispatch:!1,clearFrameTasks:pTe,dispatch:Ile,executeFrameTasks:fTe,reschedule:hTe};function o2(t){const e=new uTe(t);return oj.push(e),kR.willDispatch||(kR.willDispatch=!0,MR(Ile)),e}function HS(t){const e=new cTe(t);return Qb.push(e),Tle(),new dTe(e)}let kb=null;function pTe(t=!1){Qb.forAll((e=>{e.removed=!0})),t&&Ele()}function eG(){const t=performance.now();kb=null,kb=Qb.some((i=>!i.paused&&!i.removed))?requestAnimationFrame(eG):null,kR.executeFrameTasks(t)}function fTe(t){const e=t-nj;nj=t;const i=1e3/60,r=Math.max(0,e-i);DT.time=t,DT.frameDuration=i-r;for(let n=0;n<sj.length;n++){const s=performance.now(),o=sj[n];Qb.forAll((a=>{var l;a.paused||a.removed||(n===0&&a.ticks++,a.phases[o]&&(DT.elapsedFrameTime=performance.now()-t,DT.deltaTime=a.ticks===0?0:e,(l=a.phases[o])==null||l.call(a,DT)))})),gTe[n].push(performance.now()-s)}Ele(),vTe.push(performance.now()-t)}const Qk=new WI;function Ele(){Qb.forAll((t=>{t.removed&&Qk.push(t)})),Qb.removeUnorderedMany(Qk.data,Qk.length),Qk.clear()}function Ile(){for(;oj.length;){const t=oj.shift();t.isActive&&t.callback()}kR.willDispatch=!1}function mTe(t=1,e){const i=Nl(),r=()=>{Nc(e)?i.reject(fr()):t===0?i():(--t,MR((()=>r())))};return r(),i.promise}function yTe(t){return mTe(1,t)}async function tG(t){await yTe(t),await new Promise((e=>requestAnimationFrame((()=>{t!=null&&t.aborted||e()}))))}const gTe=sj.map((t=>new HI(t))),vTe=new HI("total");function Cle(t,e){for(const i of t.values())if(e(i))return!0;return!1}function PR(t,e){if(!e)return t;for(const i of e)i!=null&&t.add(i);return t}function vY(t,e){return e!=null&&t.add(e),t}function iG(t,e){const i=new Set;return PR(i,t),PR(i,e),i}function bTe(t,e){const i=new Set;for(const r of e)t.has(r)&&i.add(r);return i}function tht(t,e){if(!t||!e)return!1;if(t===e)return!0;for(const i of t)if(!e.has(i))return!1;return!0}function iht(t,e){if(t==null&&e==null)return!0;if(t==null||e==null||t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0}function wTe(t,e){const i=new Set(t);for(const r of e)i.delete(r);return i}function _Te(t,e){return wTe(iG(t,e),bTe(t,e))}let xTe=0;function BA(){return++xTe}function Mle(t,e){const i=t[t.length-1]==="?"?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const n=parseInt(i,10);if(!isNaN(n))return Array.isArray(e)?e[n]:e.at(n)}const r=da(e);return N$e(r,i)?r.get(i):e[i]}function kle(t,e,i){if(t==null)return t;const r=Mle(e[i],t);return!r&&i<e.length-1?void 0:i===e.length-1?r:kle(r,e,i+1)}function a2(t,e,i=0){return typeof e!="string"||e.includes(".")?kle(t,dle(e),i):Mle(e,t)}function Mc(t,e){return a2(t,e)}function bY(t,e){return a2(e,t)!==void 0}const Il={INITIALIZING:0,CONSTRUCTING:1,CONSTRUCTED:2,DESTROYING:3,DESTROYED:4};let fx=!1;const AR=[];function Ple(t,e){let i=new t2(s),r=null,n=!1;function s(){if(!i||n)return;if(fx)return void Rle(s);const a=r;i.clear(),fx=!0,n=!0,r=ap(i,t),n=!1,fx=!1,e(r,a),Ole()}function o(){i&&(i.destroy(),i=null,r=null)}return n=!0,r=ap(i,t),n=!1,Ei(o)}function Ale(t,e){let i=new t2(n),r=null;function n(){e(r,o)}function s(){i&&(i.destroy(),i=null),r=null}function o(){return i?(i.clear(),r=ap(i,t),r):null}return o(),Ei(s)}function Lle(t,e){let i=!1,r=!1;const n=!!(e!=null&&e.sync);let s=new t2((()=>{i||r||(r=!0,n?o():queueMicrotask(o))}));function o(){r=!1,s&&!i&&(fx?Rle(o):(s.clear(),fx=!0,i=!0,ap(s,t),i=!1,fx=!1,Ole()))}function a(){s&&(s.destroy(),s=null)}return i=!0,ap(s,t),i=!1,Ei(a)}function Rle(t){AR.includes(t)||AR.unshift(t)}function Ole(){for(;AR.length;)AR.pop()()}var ZI;(function(t){t[t.Untracked=0]="Untracked",t[t.Tracked=1]="Tracked"})(ZI||(ZI={}));var Bb;let rG=(Bb=class{constructor(){this.uid=BA(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(e,i,r,n,s){return this.pool.acquire(ZI.Untracked,e,i,r,n,s,Z7)}static acquireTracked(e,i,r,n){return this.pool.acquire(ZI.Tracked,e,i,r,null,null,n)}notify(e,i){this.type===ZI.Untracked?this.callback.call(this.target,e,i,this.path,this.target):this.callback.call(null,e,i,void 0,void 0)}acquire(e,i,r,n,s,o,a){this.uid=BA(),this.removed=!1,this.type=e,this.oldValue=i,this.callback=r,this.getValue=n,this.target=s,this.path=o,this.equals=a}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=BA(),this.removed=!0}},Bb.pool=new $le(Bb),Bb);const GA=new ra,Yf=new Set;let LR;function RR(t){Yf.delete(t),Yf.add(t),LR||(LR=o2(TTe))}function STe(t){if(t.removed)return;const e=t.oldValue,i=t.getValue();t.equals(e,i)||(t.oldValue=i,t.notify(i,e))}function $Te(t){for(const e of Yf.values())e.target===t&&(e.removed=!0)}function TTe(){let t=10;for(;LR&&t--;){LR=null;const e=ETe(),i=GA.acquire();for(const r of e){const n=r.uid;STe(r),n===r.uid&&r.removed&&i.push(r)}for(const r of Yf)r.removed&&(i.push(r),Yf.delete(r));for(const r of i)rG.pool.release(r);GA.release(i),GA.release(e),aj.forEach((r=>r()))}}function ETe(){const t=GA.acquire();t.length=Yf.size;let e=0;for(const i of Yf)t[e]=i,++e;return Yf.clear(),t}const aj=new Set;function ITe(t){return aj.add(t),Ei((()=>aj.delete(t)))}function CTe(t,e,i){let r=hle(t,e,i,((n,s,o)=>{let a,l,c=Ale((()=>a2(n,s)),((d,f)=>{var y;((y=n.__accessor__)==null?void 0:y.lifecycle)===Il.DESTROYED||a&&a.uid!==l?r.remove():(a||(a=rG.acquireUntracked(d,o,f,n,s),l=a.uid),RR(a))}));return Ei((()=>{c.remove(),a&&(a.uid!==l||a.removed||(a.removed=!0,RR(a)),a=null),r=c=null}))}));return r}function MTe(t,e,i){const r=hle(t,e,i,((n,s,o)=>{let a=!1;return Ple((()=>a2(n,s)),((l,c)=>{n.__accessor__.lifecycle!==Il.DESTROYED?a||(a=!0,Z7(c,l)||o.call(n,l,c,s,n),a=!1):r.remove()}))}));return r}function kTe(t,e,i,r=!1){return t.__accessor__&&t.__accessor__.lifecycle!==Il.DESTROYED?r?MTe(t,e,i):CTe(t,e,i):Ei()}function PTe(t,e,i){let r,n,s=Ale(t,((o,a)=>{r&&r.uid!==n?s.remove():(r||(r=rG.acquireTracked(o,e,a,i),n=r.uid),RR(r))}));return Ei((()=>{s.remove(),r&&(r.uid!==n||r.removed||(r.removed=!0,RR(r)),r=null),s=null}))}function ATe(t,e,i){let r=!1;return Ple(t,((n,s)=>{r||(r=!0,i(s,n)||e(n,s),r=!1)}))}function LTe(t,e,i=!1,r=ole){return i?ATe(t,e,r):PTe(t,e,r)}function wY(t){return Cle(Yf,(e=>e.oldValue===t))}function $e(t,e,i={}){return nG(t,e,i,Fle)}function Sn(t,e,i={}){return nG(t,e,i,Nle)}function nG(t,e,i={},r){let n=null;const s=i.once?(o,a)=>{r(o)&&(Nr(n),e(o,a))}:(o,a)=>{r(o)&&e(o,a)};if(n=LTe(t,s,i.sync,i.equals),i.initial){const o=t();s(o,o)}return n}function eo(t,e,i,r={}){let n=null,s=null,o=null;function a(){var d;n&&s&&(s.remove(),(d=r.onListenerRemove)==null||d.call(r,n),n=null,s=null)}function l(d){r.once&&r.once&&Nr(o),i(d)}const c=$e(t,((d,f)=>{var y;a(),zF(d)&&(n=d,s=$$(d,e,l),(y=r.onListenerAdd)==null||y.call(r,d))}),{sync:r.sync,initial:!0});return o=Ei((()=>{c.remove(),a()})),o}function E$(t,e){return RTe(t,Nle,e)}function RTe(t,e,i){if(Nc(i))return Promise.reject(fr());const r=t();if(e!=null&&e(r))return Promise.resolve(r);let n=null;function s(){n=Nr(n)}return new Promise(((o,a)=>{n=yw([ed(i,(()=>{s(),a(fr())})),nG(t,(l=>{s(),o(l)}),{sync:!1,once:!0},e??Fle)])}))}function Fle(t){return!0}function Nle(t){return!!t}function rht(t,e,i={}){let r=!1;const n=$e(t,((s,o)=>{r||e(s,o)}),i);return{remove(){n.remove()},pause(){r=!0},resume(){r=!1}}}const td={sync:!0},kt={initial:!0},ta={sync:!0,initial:!0},sG=t=>(...e)=>{const i=Uae(),r=new t(...e),n=r.exports;jae(i.at(-1));const s=r.component.manager;s.W(r,n),r.watchExports(s.W.bind(s,r)),t$e(r);const o=[r.component,...i].reverse();return O7(o,a=>a===void 0?void 0:OTe(r,a,n),n)},OTe=(t,{host:e,key:i,isReactive:r},n)=>{var f;const s=e,o=s[i]!==t.exports,a=s[i]!==n,l=n!==t.exports;if(o&&!a&&l&&(s[i]=t.exports),e===t.component){if(r){const y=t.component.manager;a&&y.W(t,s[i]),t.onUpdate(g=>{if(g.has(i)){const b=s[i];b!==t.exports&&y.W(t,b)}})}t.O=r?void 0:i}const d=(f=t.component.constructor.elementProperties.get(i))==null?void 0:f.readOnly;t.watchExports(()=>{s[i]!==t.exports&&(d?s$e(()=>{s[i]=t.exports}):s[i]=t.exports)})};function FTe(t,e){for(const i of t.values())if(e(i))return!0;return!1}function nht(t,e){for(const i of t.values())if(e(i))return i;return null}function lm(t,e,i){const r=t.get(e);if(r!==void 0)return r;const n=i();return t.set(e,n),n}function sht(t){const e=new Map;return i=>(e.has(i)||e.set(i,t(i)),e.get(i))}const Pb=()=>Ie.getLogger("esri.core.accessorSupport.ensureTypes");function NTe(t){if(t==null)return t;const e=new Date(t);return isNaN(e.getTime())?(Pb().error("Accessor#set",`Invalid date value: '${t}', falling back to current date`),new Date):e}function DTe(t){return t==null?t:!!t}function l2(t){return t==null?t:t.toString()}function na(t,e=0){return t==null?t:(t=parseFloat(t),isNaN(t)?e:t)}function oG(t){return t==null?t:Math.round(parseFloat(t))}function zTe(t){return null}function VTe(t,e){return i=>{let r=t(i);return e.step!=null&&(r=Math.round(r/e.step)*e.step),e.min!=null&&(r=Math.max(e.min,r)),e.max!=null&&(r=Math.min(e.max,r)),r}}function Dle(t){return(t==null?void 0:t.constructor)&&t.constructor.__accessorMetadata__!==void 0}function OR(t,e){return e!=null&&t&&!(e instanceof t)}function zle(t){return t&&"isCollection"in t}function _Y(t){return t!=null&&t.Type?typeof t.Type=="function"?t.Type:t.Type.base:null}function jTe(t,e){if(!(e!=null&&e.constructor)||!zle(e.constructor))return lj(t,e)?e:new t(e);const i=_Y(t.prototype.itemType),r=_Y(e.constructor.prototype.itemType);return i?r?i===r?e:i.prototype.isPrototypeOf(r.prototype)?new t(e):(lj(t,e),e):new t(e):e}function lj(t,e){return!!Dle(e)&&(Pb().error("Accessor#set","Assigning an instance of '"+(e.declaredClass||"unknown")+"' which is not a subclass of '"+VF(t)+"'"),!0)}function c2(t,e){return e==null?e:zle(t)?jTe(t,e):OR(t,e)?lj(t,e)?e:new t(e):e}function VF(t){var e;return((e=t==null?void 0:t.prototype)==null?void 0:e.declaredClass)||"unknown"}const UTe=new WeakMap;function BTe(t){switch(t){case Number:return e=>na(e);case si:return oG;case Boolean:return DTe;case String:return l2;case Date:return NTe;case I$:return zTe;default:return lm(UTe,t,(()=>c2.bind(null,t)))}}function En(t,e){const i=BTe(t);return arguments.length===1?i:i(e)}function UC(t,e,i){return arguments.length===1?UC.bind(null,t):e&&(Array.isArray(e)?e.map((r=>t(r,i))):[t(e,i)])}function GTe(t,e){return arguments.length===1?UC((i=>En(t,i))):UC((i=>En(t,i)),e)}function Vle(t,e,i){return e!==0&&Array.isArray(i)?i.map((r=>Vle(t,e-1,r))):t(i)}function FR(t,e,i){if(arguments.length===2)return s=>FR(t,e,s);if(!i)return i;i=Vle(t,e,i);let r=e,n=i;for(;r>0&&Array.isArray(n);)r--,n=n[0];if(n!==void 0)for(let s=0;s<r;s++)i=[i];return i}function qTe(t,e,i){return arguments.length===2?FR((r=>En(t,r)),e):FR((r=>En(t,r)),e,i)}function jle(t){return!!Array.isArray(t)&&!t.some((e=>{const i=typeof e;return!(i==="string"||i==="number"||i==="function"&&t.length>1)}))}function cj(t,e){if(arguments.length===2)return cj(t).call(null,e);const i=new Set,r=t.filter((a=>typeof a!="function")),n=t.filter((a=>typeof a=="function"));for(const a of t)typeof a!="string"&&typeof a!="number"||i.add(a);let s=null,o=null;return(a,l)=>{if(a==null)return a;const c=typeof a,d=c==="string"||c==="number";return d&&(i.has(a)||n.some((f=>c==="string"&&f===String||c==="number"&&f===Number)))||c==="object"&&n.some((f=>!OR(a,f)))?a:(d&&r.length?(s||(s=r.map((f=>typeof f=="string"?`'${f}'`:`${f}`)).join(", ")),Pb().error("Accessor#set",`'${a}' is not a valid value for this property, only the following values are valid: ${s}`)):typeof a=="object"&&n.length?(o||(o=n.map((f=>VF(f))).join(", ")),Pb().error("Accessor#set",`'${a}' is not a valid value for this property, value must be one of ${o}`)):Pb().error("Accessor#set",`'${a}' is not a valid value for this property`),l&&(l.valid=!1),null)}}function lp(t,e){if(arguments.length===2)return lp(t).call(null,e);const i={},r=[],n=[];for(const l in t.typeMap){const c=t.typeMap[l];i[l]=En(c),r.push(VF(c)),n.push(l)}const s=()=>`'${r.join("', '")}'`,o=()=>`'${n.join("', '")}'`,a=typeof t.key=="string"?l=>l[t.key]:t.key;return l=>{if(t.base&&!OR(t.base,l)||l==null)return l;const c=a(l)||t.defaultKeyValue,d=i[c];if(!d)return Pb().error("Accessor#set",`Invalid property value, value needs to be one of ${s()}, or a plain object that can autocast (having .type = ${o()})`),null;if(!OR(t.typeMap[c],l))return l;if(typeof t.key=="string"&&!Dle(l)){const f={};for(const y in l)y!==t.key&&(f[y]=l[y]);return d(f)}return d(l)}}let si=class{},I$=class{};const lht={native:t=>({type:"native",value:t}),array:t=>({type:"array",value:t}),oneOf:t=>({type:"one-of",values:t})};function HTe(t){if(!t||!("type"in t))return!1;switch(t.type){case"native":case"array":case"one-of":return!0}return!1}function Ule(t){switch(t.type){case"native":return En(t.value);case"array":return UC(Ule(t.value));case"one-of":return WTe(t);default:return null}}function WTe(t){let e=null;return(i,r)=>dj(i,t)?i:(e==null&&(e=uj(t)),Pb().error("Accessor#set",`Invalid property value, value needs to be of type ${e}`),r&&(r.valid=!1),null)}function uj(t){switch(t.type){case"native":switch(t.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case si:return"integer";case Date:return"date";case I$:return"null";default:return VF(t.value)}case"array":return`array of ${uj(t.value)}`;case"one-of":{const e=t.values.map((i=>uj(i)));return`one of ${e.slice(0,-1)} or ${e[e.length-1]}`}}return"unknown"}function dj(t,e){if(t==null)return!0;switch(e.type){case"native":switch(e.value){case Number:case si:return typeof t=="number";case Boolean:return typeof t=="boolean";case String:return typeof t=="string";case I$:return t===null}return t instanceof e.value;case"array":return!!Array.isArray(t)&&!t.some((i=>!dj(i,e.value)));case"one-of":return e.values.some((i=>dj(t,i)))}}function u2(t){let e=t.constructor.__accessorMetadata__;const i=Object.prototype.hasOwnProperty.call(t.constructor,"__accessorMetadata__");if(e){if(!i){e=Object.create(e);for(const r in e)e[r]=se(e[r]);Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0})}}else e={},Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0});return t.constructor.__accessorMetadata__}function d2(t,e){const i=u2(t);let r=i[e];return r||(r=i[e]={}),r}function ZTe(t,e){return VA(t,e,YTe)}const JTe=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function YTe(t){return JTe.test(t)?"replace":"merge"}function NR(t,e,i){if(t&&e)if(typeof e=="object")for(const r of Object.getOwnPropertyNames(e))NR(t,r,e[r]);else{if(e.includes(".")){const n=e.split("."),s=n.splice(-1,1)[0];return void NR(Mc(t,n),s,i)}const r=t.__accessor__;r!=null&&XTe(e,r),t[e]=i}}function XTe(t,e){if(fe("esri-unknown-property-errors")&&!KTe(t,e))throw new ie("set:unknown-property",QTe(t,e))}function KTe(t,e){return e.metadata[t]!=null}function QTe(t,e){return"setting unknown property '"+t+"' on instance of "+e.host.declaredClass}function h(t={}){return(e,i)=>{if(e===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${e.name}.${i}. Accessor does not support static properties.`);const r=Object.getOwnPropertyDescriptor(e,i),n=d2(e,i);r&&(r.get||r.set?(n.get=r.get||n.get,n.set=r.set||n.set):"value"in r&&("value"in t&&Ie.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${i}" on "${e.constructor.name}" already defined in the metadata`,t),n.value=t.value=r.value)),t.readOnly!=null&&(n.readOnly=t.readOnly);const s=t.aliasOf;if(s){const l=typeof s=="string"?s:s.source,c=typeof s=="string"?null:s.overridable===!0;let d;n.dependsOn=[l],n.get=function(){let f=Mc(this,l);if(typeof f=="function"){d||(d=l.split(".").slice(0,-1).join("."));const y=Mc(this,d);y&&(f=f.bind(y))}return f},n.readOnly||(n.set=c?function(f){this._override(i,f)}:function(f){NR(this,l,f)})}const o=t.type,a=t.types;if(!n.cast){let l;o?l=eEe(o):a&&(l=Array.isArray(a)?UC(lp(a[0])):lp(a)),t.cast=tEe(t.cast,l)}ZTe(n,t),t.range&&(n.cast=VTe(n.cast,t.range))}}function aG(t,e,i){const r=d2(t,i);r.json||(r.json={});let n=r.json;return e!==void 0&&(n.origins||(n.origins={}),n.origins[e]||(n.origins[e]={}),n=n.origins[e]),n}function eEe(t){let e=0,i=t;if(HTe(t))return Ule(t);for(;Array.isArray(i)&&i.length===1&&typeof i[0]!="string"&&typeof i[0]!="number";)i=i[0],e++;const r=i;if(jle(r))return e===0?cj(r):FR(cj(r),e);if(e===1)return GTe(r);if(e>1)return qTe(r,e);const n=t;return n.from?n.from:En(n)}function tEe(t,e){if(t||e)return t?e?(i,r)=>e(t(i,r),r):t:e}const iEe=Object.prototype.toString;function rEe(t){const e="__accessorMetadata__"in t?En(t):t;return function(...i){if(i.push(e),typeof i[2]=="number")throw new Error("Using @cast has parameter decorator is not supported since 4.16");return nEe.apply(this,i)}}function nEe(t,e,i,r){d2(t,e).cast=r}function sEe(t){return(e,i)=>{d2(e,t).cast=e[i]}}function yi(...t){if(t.length!==3||typeof t[1]!="string")return t.length===1&&iEe.call(t[0])==="[object Function]"?rEe(t[0]):t.length===1&&typeof t[0]=="string"?sEe(t[0]):void 0}let Gt=class{constructor(e,i={ignoreUnknown:!1,useNumericKeys:!1}){this._jsonToAPI=e,this._options=i,this.apiValues=[],this.jsonValues=[],this._apiToJSON=oEe(e),this.apiValues=xY(this._apiToJSON),this.jsonValues=xY(this._jsonToAPI),this.read=r=>this.fromJSON(r),this.write=(r,n,s)=>{const o=this.toJSON(r);o!==void 0&&xn(s,o,n)},this.write.isJSONMapWriter=!0}toJSON(e){if(e==null)return null;if(this._apiToJSON.hasOwnProperty(e)){const i=this._apiToJSON[e];return this._options.useNumericKeys?+i:i}return this._options.ignoreUnknown?null:e}fromJSON(e){return e!=null&&this._jsonToAPI.hasOwnProperty(e)?this._jsonToAPI[e]:this._options.ignoreUnknown?void 0:e}};function oEe(t){const e={};for(const i in t)e[t[i]]=i;return e}function xY(t){const e=[];for(const i in t)e.push(i);return e.sort(),e}function is(){return function(t,e){return new Gt(t,{ignoreUnknown:!0,...e})}}function at(t,e={}){const i=t instanceof Gt?t:new Gt(t,e),{alwaysWriteDefaults:r,default:n,ignoreUnknown:s=!0,name:o,nonNullable:a,readOnly:l=!1}=e;return h({type:s?i.apiValues:String,json:{type:i.jsonValues,default:n,name:o,read:!l&&{reader:i.read},write:{writer:i.write,alwaysWriteDefaults:r}},nonNullable:a,readOnly:l})}function De(t,e,i){let r,n;return e===void 0||Array.isArray(e)?(n=t,i=e,r=[void 0]):(n=e,r=Array.isArray(t)?t:[t]),(s,o)=>{const a=s.constructor.prototype;r.forEach((l=>{const c=aG(s,l,n);c.read&&typeof c.read=="object"||(c.read={}),c.read.reader=a[o],i&&(c.read.source=(c.read.source||[]).concat(i))}))}}function lG(t){return(e,i)=>{e[i]=t}}const Ble=Symbol("Accessor-beforeDestroy");function aEe(t){if(t.json&&t.json.origins){const e=t.json.origins,i={"web-document":["web-scene","web-map"]};for(const r in i)if(e[r]){const n=e[r];i[r].forEach((s=>{e[s]=n})),delete e[r]}}}let Dl=class extends xle{constructor(e,i,r){super(e,i,r)}};Dl.prototype.type="warning";function Gle(t){var e;return!!t&&((e=t.prototype)==null?void 0:e.declaredClass)&&t.prototype.declaredClass.indexOf("esri.core.Collection")===0}const hj=()=>Ie.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function SY(t,e,i){var r,n;t&&(!i&&!e.read||(r=e.read)!=null&&r.reader||((n=e.read)==null?void 0:n.enabled)===!1||uEe(t)&&xn("read.reader",C$(t),e))}function C$(t){var i,r;const e=t.ndimArray??0;if(e>1)return cEe(t);if(e===1)return $Y(t);if("type"in t&&Hle(t.type)){const n=(r=(i=t.type.prototype)==null?void 0:i.itemType)==null?void 0:r.Type,s=$Y(typeof n=="function"?{type:n}:{types:n});return(o,a,l)=>{const c=s(o,a,l);return c&&new t.type(c)}}return cG(t)}function cG(t){return"type"in t?lEe(t.type):dEe(t.types)}function lEe(t){return t.prototype.read?(e,i,r)=>{if(e==null)return e;const n=typeof e;if(n!=="object")return void hj().error(`Expected JSON value of type 'object' to deserialize type '${t.prototype.declaredClass}', but got '${n}'`);const s=new t;return s.read(e,r),s}:t.fromJSON}function qle(t,e,i,r){return r!==0&&Array.isArray(e)?e.map((n=>qle(t,n,i,r-1))):t(e,void 0,i)}function cEe(t){const e=cG(t),i=qle.bind(null,e),r=t.ndimArray??0;return(n,s,o)=>{if(n==null)return n;n=i(n,o,r);let a=r,l=n;for(;a>0&&Array.isArray(l);)a--,l=l[0];if(l!==void 0)for(let c=0;c<a;c++)n=[n];return n}}function $Y(t){const e=cG(t);return(i,r,n)=>{if(i==null)return i;if(Array.isArray(i)){const o=[];for(const a of i){const l=e(a,void 0,n);l!==void 0&&o.push(l)}return o}const s=e(i,void 0,n);return s!==void 0?[s]:void 0}}function Hle(t){if(!Gle(t))return!1;const e=t.prototype.itemType;return!(!e||!e.Type)&&(typeof e.Type=="function"?uG(e.Type):Wle(e.Type))}function uEe(t){return"types"in t?Wle(t.types):uG(t.type)}function uG(t){return!Array.isArray(t)&&!!t&&t.prototype&&("read"in t.prototype||"fromJSON"in t||Hle(t))}function Wle(t){for(const e in t.typeMap)if(!uG(t.typeMap[e]))return!1;return!0}function dEe(t){let e=null;const i=t.errorContext??"type",r=t.validate;return(n,s,o)=>{if(n==null)return n;const a=typeof n;if(a!=="object")return void hj().error(`Expected JSON value of type 'object' to deserialize, but got '${a}'`);e||(e=hEe(t));const l=t.key;if(typeof l!="string")return;const c=n[l],d=c?e[c]:t.defaultKeyValue?t.typeMap[t.defaultKeyValue]:void 0;if(!d){const y=`Type '${c||"unknown"}' is not supported`;return o!=null&&o.messages&&n&&o.messages.push(new Dl(`${i}:unsupported`,y,{definition:n,context:o})),void hj().error(y)}const f=new d;return f.read(n,o),r?r(f):f}}function hEe(t){var i,r;const e={};for(const n in t.typeMap){const s=t.typeMap[n],o=u2(s.prototype);if(typeof t.key=="function")continue;const a=o[t.key];if(!a)continue;if((i=a.json)!=null&&i.type&&Array.isArray(a.json.type)&&a.json.type.length===1&&typeof a.json.type[0]=="string"){e[a.json.type[0]]=s;continue}const l=(r=a.json)==null?void 0:r.write;if(!(l!=null&&l.writer)){e[n]=s;continue}const c=l.target,d=typeof c=="string"?c:t.key,f={};l.writer(n,f,d),f[d]&&(e[f[d]]=s)}return e}function pEe(t){if(t.json||(t.json={}),EY(t.json),IY(t.json),TY(t.json),t.json.origins)for(const e in t.json.origins)EY(t.json.origins[e]),IY(t.json.origins[e]),TY(t.json.origins[e]);return!0}function TY(t){t.name&&(t.read&&typeof t.read=="object"?t.read.source===void 0&&(t.read.source=t.name):t.read={source:t.name},t.write&&typeof t.write=="object"?t.write.target===void 0&&(t.write.target=t.name):t.write={target:t.name})}function EY(t){typeof t.read=="boolean"?t.read={enabled:t.read}:typeof t.read=="function"?t.read={enabled:!0,reader:t.read}:t.read&&typeof t.read=="object"&&t.read.enabled===void 0&&(t.read.enabled=!0)}function IY(t){typeof t.write=="boolean"?t.write={enabled:t.write}:typeof t.write=="function"?t.write={enabled:!0,writer:t.write}:t.write&&typeof t.write=="object"&&t.write.enabled===void 0&&(t.write.enabled=!0)}function CY(t,e){if(!e.write||e.write.writer||e.write.enabled===!1&&!e.write.overridePolicy)return;const i=(t==null?void 0:t.ndimArray)??0;t&&(i===1||"type"in t&&Gle(t.type))?e.write.writer=yEe:i>1?e.write.writer=gEe(i):e.types?Array.isArray(e.types)?e.write.writer=mEe(e.types[0]):e.write.writer=fEe(e.types):e.write.writer=BC}function fEe(t){return(e,i,r,n)=>e?Zle(e,t,n)?BC(e,i,r,n):void 0:BC(e,i,r,n)}function Zle(t,e,i){for(const r in e.typeMap)if(t instanceof e.typeMap[r])return!0;if(i!=null&&i.messages){const r=e.errorContext??"type",n=`Values of type '${(typeof e.key!="function"?t[e.key]:t.declaredClass)??"Unknown"}' cannot be written`;i&&i.messages&&t&&i.messages.push(new ie(`${r}:unsupported`,n,{definition:t,context:i})),Ie.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer").error(n)}return!1}function mEe(t){return(e,i,r,n)=>!e||!Array.isArray(e)?BC(e,i,r,n):BC(e.filter((s=>Zle(s,t,n))),i,r,n)}function BC(t,e,i,r){xn(i,DR(t,r),e)}function DR(t,e){return t&&typeof t.write=="function"?t.write({},e):t&&typeof t.toJSON=="function"?t.toJSON():typeof t=="number"?zR(t):t}function zR(t){return t===-1/0?-Number.MAX_VALUE:t===1/0?Number.MAX_VALUE:isNaN(t)?null:t}function yEe(t,e,i,r){let n;t===null?n=null:t&&typeof t.map=="function"?(n=t.map((s=>DR(s,r))),typeof n.toArray=="function"&&(n=n.toArray())):n=[DR(t,r)],xn(i,n,e)}function Jle(t,e,i){return i!==0&&Array.isArray(t)?t.map((r=>Jle(r,e,i-1))):DR(t,e)}function gEe(t){return(e,i,r,n)=>{let s;if(e===null)s=null;else{s=Jle(e,n,t);let o=t,a=s;for(;o>0&&Array.isArray(a);)o--,a=a[0];if(a!==void 0)for(let l=0;l<o;l++)s=[s]}xn(r,s,i)}}function vEe(t,e){return dG(t,"any",e==null?void 0:e.origin)}function pj(t,e){return dG(t,"read",e==null?void 0:e.origin)}function Yle(t,e){return dG(t,"write",e==null?void 0:e.origin)}function dG(t,e,i){let r=t==null?void 0:t.json;if(r!=null&&r.origins&&i){let n;n=i==="link-chart"?r.origins[i]&&(e==="any"||e in r.origins[i])?r.origins[i]:r.origins["web-map"]:r.origins[i],n&&(e==="any"||e in n)&&(r=n)}return r}function bEe(t){var i;const e=wEe(t);if(t.json.origins)for(const r in t.json.origins){const n=t.json.origins[r],s=n.types?_Ee(n):e;SY(s,n,!1),n.types&&!n.write&&((i=t.json.write)!=null&&i.enabled)&&(n.write={...t.json.write}),CY(s,n)}SY(e,t.json,!0),CY(e,t.json)}function wEe(t){return t.json.types?fj(t.json):t.type?Xle(t):fj(t)}function _Ee(t){return t.type?Xle(t):fj(t)}function Xle(t){if(!t.type)return;let e=0,i=t.type;for(;Array.isArray(i)&&!jle(i);)i=i[0],e++;return{type:i,ndimArray:e}}function fj(t){if(!t.types)return;let e=0,i=t.types;for(;Array.isArray(i);)i=i[0],e++;return{types:i,ndimArray:e}}function xEe(t){pEe(t)&&(aEe(t),bEe(t))}const lz=new Set,cz=new Set;function V(t){return e=>{t??(t="esri.core.Accessor"),e.prototype.declaredClass=t,$Ee(e);const i=[],r=[];let n=e.prototype;for(;n;)n.hasOwnProperty("initialize")&&!lz.has(n.initialize)&&(lz.add(n.initialize),i.push(n.initialize)),n.hasOwnProperty("destroy")&&!cz.has(n.destroy)&&(cz.add(n.destroy),r.push(n.destroy)),n=Object.getPrototypeOf(n);lz.clear(),cz.clear();const s=class extends e{constructor(...a){if(super(...a),this.constructor===s&&typeof this.postscript=="function"){if(i.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let l=i.length-1;l>=0;l--)i[l].call(this)}}),r.length){let l=!1;const c=this[Ble];Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!l){this.__accessor__.lifecycle=Il.DESTROYING,l=!0,c.call(this);for(let d=0;d<r.length;d++)r[d].call(this)}}})}Object.defineProperty(this,Symbol.dispose,{enumerable:!1,configurable:!0,value(){this.destroy()}}),this.postscript()}}};s.__accessorMetadata__=u2(e.prototype),s.prototype.declaredClass=t;const o=(t||"AccessorSubclass").split(".").slice(-1)[0];return Object.defineProperty(s,"name",{value:o,configurable:!0}),s}}function SEe(t,e){return e.get==null?function(){const i=this.__accessor__,r=i.propertiesByName.get(t);if(r===void 0)return;i.mutable&&vt(r);const n=i.store;return n.has(t)?n.get(t):r.metadata.value}:function(){const i=this.__accessor__,r=i.propertiesByName.get(t);if(r!==void 0)return r.getComputed(i)}}function $Ee(t){const e=t.prototype,i=u2(e),r={};for(const n of Object.getOwnPropertyNames(i)){const s=i[n];xEe(s),r[n]={enumerable:!0,configurable:!0,get:SEe(n,s),set(o){const a=this.__accessor__;if(a!==void 0){if(a.mutable)return a.initialized&&s.readOnly?MY("read-only",n):a.lifecycle===Il.CONSTRUCTED&&s.constructOnly?MY("construct-only",n):void a.set(n,o)}else Object.defineProperty(this,n,{enumerable:!0,configurable:!0,writable:!0,value:o})}}}Object.defineProperties(t.prototype,r)}const MY=(t,e)=>{Ie.getLogger("esri.core.Accessor").error(`cannot assign to ${t} property '${e}'`)};function Ve(t,e,i){let r,n;return e===void 0?(n=t,r=[void 0]):typeof e!="string"?(n=t,r=[void 0],i=e):(n=e,r=Array.isArray(t)?t:[t]),(s,o)=>{const a=s.constructor.prototype;for(const l of r){const c=aG(s,l,n);c.write&&typeof c.write=="object"||(c.write={}),i&&(c.write.target=i),c.write.writer=a[o]}}}const kY=new WeakMap;function TEe(t,e,i=!1){const r=`🛑 DEPRECATED - ${e}`;if(!i)return void t.warn(r);let n=kY.get(t);n||(n=new Set,kY.set(t,n)),n.has(e)||(n.add(e),t.warn(r))}const VR="https://www.esriurl.com/";function EEe(t,e,i,r={}){fe("esri-deprecation-warnings")&&Mg(t,`This widget is deprecated. Use the ${e} component instead.`,{see:[`${e} component reference: ${VR}${i}/`,`Esri's move to web components: ${VR}components-transition-plan/`],replacement:`<${i}></${i}>`,warnOnce:!0,...r})}function IEe(t,e,i,r={}){fe("esri-deprecation-warnings")&&Mg(t,`This view model is deprecated. Use the ${e} component directly instead.`,{see:[`${e} component reference: ${VR}${i}/`,`Esri's move to web components: ${VR}components-transition-plan/`],replacement:`<${i}></${i}>`,warnOnce:!0,...r})}function dht(t,e,i={}){fe("esri-deprecation-warnings")&&Mg(t,`Module: ${e}`,i)}function Kle(t,e,i={}){if(fe("esri-deprecation-warnings")){const{moduleName:r}=i;Mg(t,`Function: ${(r?r+"::":"")+e+"()"}`,i)}}function Qle(t,e,i={}){if(fe("esri-deprecation-warnings")){const{moduleName:r}=i;Mg(t,`Property: ${(r?r+"::":"")+e}`,i)}}function CEe(t,e,i={}){fe("esri-deprecation-warnings")&&Mg(t,`Multiple argument constructor: ${e}`,{warnOnce:!0,replacement:`new ${e}({ <your properties here> })`,...i})}function Mg(t,e,i={}){if(fe("esri-deprecation-warnings")){const{replacement:r,version:n,see:s,warnOnce:o}=i;let a=e;if(r&&(a+=`
	🛠️ Replacement: ${r}`),n&&(a+=`
	⚙️ Version: ${n}`),s)if(Array.isArray(s)){a+=`
	🔗 See for more details:`;for(const l of s)a+=`
		${l}`}else a+=`
	🔗 See ${s} for more details.`;TEe(t,a,o)}}function hht(t){const e=[];return function*(){yield*e;for(const i of t)e.push(i),yield i}}function MEe(t,e){for(const i of t)if(i!=null&&e(i))return i}function jR(t){return t!=null&&typeof t[Symbol.iterator]=="function"}let M$=class{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let e=0;return this._groups.forEach((i=>{e+=i.length})),e}add(e,i){if(jR(e)){const r=this._getOrCreateGroup(i);for(const n of e)AY(n)&&r.push(n)}else AY(e)&&this._getOrCreateGroup(i).push(e);return this}forEach(e,i){if(typeof e=="function")this._groups.forEach((r=>r.forEach(e)));else{const r=this._getGroup(e);r&&i&&r.forEach(i)}}has(e){return this._groups.has(eP(e))}remove(e){if(typeof e!="string"&&jR(e)){for(const i of e)this.remove(i);return this}return this.has(e)?(PY(this._getGroup(e)),this._groups.delete(eP(e)),this):this}removeAll(){return this._groups.forEach(PY),this._groups.clear(),this}removeReference(e){return this._groups.delete(e),this}_getOrCreateGroup(e){if(this.has(e))return this._getGroup(e);const i=[];return this._groups.set(eP(e),i),i}_getGroup(e){return this._groups.get(eP(e))}};function eP(t){return t||"_default_"}function PY(t){for(const e of t)e instanceof M$?e.removeAll():e.remove()}function AY(t){return t!=null&&(!!t.remove||t instanceof M$)}var Nt;(function(t){t[t.DEFAULTS=0]="DEFAULTS",t[t.COMPUTED=1]="COMPUTED",t[t.SERVICE=2]="SERVICE",t[t.PORTAL_ITEM=3]="PORTAL_ITEM",t[t.WEB_SCENE=4]="WEB_SCENE",t[t.WEB_MAP=5]="WEB_MAP",t[t.LINK_CHART=6]="LINK_CHART",t[t.USER=7]="USER"})(Nt||(Nt={}));const mj=Nt.USER+1;function Bf(t){switch(t){case"defaults":return Nt.DEFAULTS;case"service":return Nt.SERVICE;case"portal-item":return Nt.PORTAL_ITEM;case"web-scene":return Nt.WEB_SCENE;case"web-map":return Nt.WEB_MAP;case"link-chart":return Nt.LINK_CHART;case"user":return Nt.USER;default:return null}}function GC(t){switch(t){case Nt.DEFAULTS:return"defaults";case Nt.SERVICE:return"service";case Nt.PORTAL_ITEM:return"portal-item";case Nt.WEB_SCENE:return"web-scene";case Nt.WEB_MAP:return"web-map";case Nt.LINK_CHART:return"link-chart";case Nt.USER:return"user"}}function kEe(t){return GC(t)}let LY=class extends gle{constructor(e,i){super(),this.propertyName=e,this.metadata=i,this.trackingTarget=new DF(this),this.flags=0,this.flags=Rr.Dirty|(i.nonNullable?Rr.NonNullable:0)|(i.hasOwnProperty("value")?Rr.HasDefaultValue:0)|(i.get===void 0?Rr.DepTrackingInitialized:0)|(i.dependsOn===void 0?Rr.AutoTracked:0)}destroy(){this.flags&Rr.Dirty&&this.onCommitted(),super.destroy(),this.trackingTarget.destroy()}getComputed(e){e.mutable&&vt(this);const i=e.store,r=this.propertyName,n=this.flags,s=i.get(r);if(n&Rr.Computing||~n&Rr.Dirty&&i.has(r))return s;this.flags|=Rr.Computing;const o=e.host;let a;n&Rr.AutoTracked?a=ap(this.trackingTarget,this.metadata.get,o):(yle(o,this),a=this.metadata.get.call(o)),this.flags|=Rr.DepTrackingInitialized,i.set(r,a,Nt.COMPUTED);const l=i.get(r);return l===s?this.flags&=-2:z$e(this.commit,this),this.flags&=-5,l}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}commit(){this.flags&=-2,this.onCommitted()}onInvalidated(){~this.flags&Rr.Overridden&&(this.flags|=Rr.Dirty);const e=this._observers;if(e&&e.length>0)for(const i of e)i.onInvalidated()}onCommitted(){const e=this._observers;if(e&&e.length>0){const i=e.slice();for(const r of i)r.onCommitted()}}},PEe=class ece{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){const i=new ece;return this._values.forEach(((r,n)=>{e&&e.has(n)||i.set(n,se(r))})),i}get(e){return this._values.get(e)}originOf(){return Nt.USER}keys(){return[...this._values.keys()]}set(e,i){this._values.set(e,i)}delete(e){this._values.delete(e)}has(e){return this._values.has(e)}isAtOrigin(e,i){return this.has(e)}isBelowOrigin(e,i){return!this.has(e)}forEach(e){this._values.forEach(e)}};function u_(t,e,i){return t!==void 0}function RY(t,e,i,r){return t!==void 0&&(!(i==null&&t.flags&Rr.NonNullable)||(r.lifecycle,!1))}let AEe=class{constructor(e){this.host=e,this.propertiesByName=new Map,this.ctorArgs=null,this.lifecycle=Il.INITIALIZING,this.store=new PEe,this.mutable=!0,this._origin=Nt.USER;const i=this.host.constructor.__accessorMetadata__;for(const r in i){const n=new LY(r,i[r]);this.propertiesByName.set(r,n)}this.metadata=i}initialize(){this.lifecycle=Il.CONSTRUCTING}constructed(){this.lifecycle=Il.CONSTRUCTED}destroy(){this.lifecycle=Il.DESTROYED,this.propertiesByName.forEach((e=>e.destroy()))}get initialized(){return this.lifecycle!==Il.INITIALIZING}get(e){const i=this.propertiesByName.get(e);if(!u_(i))return;if(i.metadata.get)return i.getComputed(this);this.mutable&&vt(i);const r=this.store;return r.has(e)?r.get(e):i.metadata.value}originOf(e){const i=this.store.originOf(e);if(i===void 0){const r=this.propertiesByName.get(e);if(r!==void 0&&r.flags&Rr.HasDefaultValue)return"defaults"}return GC(i)}has(e){return this.propertiesByName.has(e)&&this.store.has(e)}keys(){return[...this.propertiesByName.keys()]}internalGet(e){const i=this.propertiesByName.get(e);if(u_(i))return this.store.has(e)?this.store.get(e):i.metadata.value}internalSet(e,i){const r=this.propertiesByName.get(e);u_(r)&&this._internalSet(r,i)}getDependsInfo(e,i,r){const n=this.propertiesByName.get(i);if(!u_(n))return"";const s=new DF,o=ap(s,(()=>{var c;return(c=n.metadata.get)==null?void 0:c.call(e)}));let a=`${r}${e.declaredClass.split(".").pop()}.${i}: ${o}
`;const l=s.accessed??new Set;if(l.size===0)return a;r+="  ";for(const c of l)c instanceof LY&&(a+=`${r}${c.propertyName}: undefined
`);return a}setAtOrigin(e,i,r){const n=this.propertiesByName.get(e);if(u_(n))return this._setAtOrigin(n,i,r)}isOverridden(e){const i=this.propertiesByName.get(e);return i!==void 0&&!!(i.flags&Rr.Overridden)}clearOrigin(e,i){const r=this.store,n=this.propertiesByName.get(e);if(!u_(n))return;const s=r.isAtOrigin(e,i)&&!(n.flags&Rr.Overridden);r.delete(e,i),s&&n.notifyChange()}clearOverride(e){const i=this.propertiesByName.get(e);i&&i.flags&Rr.Overridden&&(i.flags&=-3,i.notifyChange())}override(e,i){const r=this.propertiesByName.get(e);if(!RY(r,e,i,this))return;const n=r.metadata.cast;if(n){const s=this._cast(n,i),{valid:o,value:a}=s;if(uz.release(s),!o)return;i=a}r.flags|=Rr.Overridden,this._internalSet(r,i)}set(e,i){const r=this.propertiesByName.get(e);if(!RY(r,e,i,this))return;const n=r.metadata.cast;if(n){const o=this._cast(n,i),{valid:a,value:l}=o;if(uz.release(o),!a)return;i=l}const s=r.metadata.set;s?s.call(this.host,i):this._internalSet(r,i)}setDefaultOrigin(e){this._origin=Bf(e)}getDefaultOrigin(){return GC(this._origin)}notifyChange(e){const i=this.propertiesByName.get(e);i!==void 0&&i.notifyChange()}invalidate(e){const i=this.propertiesByName.get(e);i!==void 0&&i.invalidate()}commit(e){const i=this.propertiesByName.get(e);i!==void 0&&i.commit()}_internalSet(e,i){const r=this.lifecycle!==Il.INITIALIZING?this._origin:Nt.DEFAULTS;this._setAtOrigin(e,i,r)}_setAtOrigin(e,i,r){const n=this.store,s=e.propertyName;if(n.isAtOrigin(s,r)&&Z7(i,n.get(s))&&~e.flags&Rr.Overridden)return;const o=n.isBelowOrigin(s,r)||n.isAtOrigin(s,r);o&&e.invalidate(),n.set(s,i,r),o&&e.commit(),mle(this.host,e)}_cast(e,i){const r=uz.acquire();return r.valid=!0,r.value=i,e&&(r.value=e.call(this.host,i,r)),r}},LEe=class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}};const uz=new Bg(LEe);let REe;function OEe(){return REe}var OY;(function(t){t[t.Ignore=0]="Ignore",t[t.Destroy=1]="Destroy",t[t.ThrowError=2]="ThrowError"})(OY||(OY={}));var FY,NY;function FEe(t){var e;if(t==null)return{value:t};if(Array.isArray(t))return{type:[t[0]],value:null};switch(typeof t){case"object":return(e=t.constructor)!=null&&e.__accessorMetadata__||t instanceof Date?{type:t.constructor,value:t}:t;case"boolean":return{type:Boolean,value:t};case"string":return{type:String,value:t};case"number":return{type:Number,value:t};case"function":return{type:t,value:null};default:return}}const Id=Symbol("Accessor-Handles"),dz=Symbol("Accessor-Initialized");var Eg;let tt=(Eg=class{static createSubclass(e={}){if(Array.isArray(e))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:i,declaredClass:r,constructor:n}=e;delete e.declaredClass,delete e.properties,delete e.constructor;const s=this;class o extends s{constructor(...l){super(...l),this.inherited=null,n&&n.apply(this,l)}}u2(o.prototype);for(const a in e){const l=e[a];o.prototype[a]=typeof l=="function"?function(...c){const d=this.inherited;let f;this.inherited=function(...y){if(s.prototype[a])return s.prototype[a].apply(this,y)};try{f=l.apply(this,c)}catch(y){throw this.inherited=d,y}return this.inherited=d,f}:e[a]}for(const a in i){const l=FEe(i[a]);h(l)(o.prototype,a)}return V(r)(o)}static freeze(e){return e instanceof Eg?e.__accessor__.mutable=!1:Object.freeze(e),e}static isFrozen(e){return e instanceof Eg?!e.__accessor__.mutable:Object.isFrozen(e)}constructor(...e){var r;if(this[FY]=null,this[NY]=!1,this.constructor===Eg)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");const i=new AEe(this);Object.defineProperty(this,"__accessor__",{enumerable:!1,value:i}),e.length>0&&(i.ctorArgs=((r=this.normalizeCtorArgs)==null?void 0:r.apply(this,e))??e[0])}postscript(){const e=this.__accessor__,i=e.ctorArgs;e.initialize(),i&&(this.set(i),e.ctorArgs=null),e.constructed(),this.initialize(),this[dz]=!0}initialize(){}[Ble](){this[Id]=hr(this[Id])}destroy(){var e;this.destroyed||($Te(this),this.__accessor__.destroy(),(e=OEe())==null||e.onInstanceDestroy(this))}[Symbol.dispose](){this.destroy()}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[dz]}get destroyed(){var e;return((e=this.__accessor__)==null?void 0:e.lifecycle)===Il.DESTROYED||!1}get destroying(){var e;return((e=this.__accessor__)==null?void 0:e.lifecycle)===Il.DESTROYING||!1}commitProperty(e){Mc(this,e)}hasOwnProperty(e){return this.__accessor__?this.__accessor__.has(e):Object.prototype.hasOwnProperty.call(this,e)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(e,i){return NR(this,e,i),this}watch(e,i,r){return Kle(Ie.getLogger(this),"`watch` is deprecated in favor of reactiveUtils.watch",{replacement:"reactiveUtils.watch",version:"4.32",see:"https://arcg.is/1vaqf42#watch",warnOnce:!0}),kTe(this,e,i,r)}addHandles(e,i){if(this.destroyed){const r=Array.isArray(e)?e:[e];for(const n of r)n.remove();return}(this[Id]??(this[Id]=new M$)).add(e,i)}removeHandles(e){var i;(i=this[Id])==null||i.remove(e)}removeAllHandles(){var e;(e=this[Id])==null||e.removeAll()}removeHandlesReference(e){var i;(i=this[Id])==null||i.removeReference(e)}hasHandles(e){var i;return((i=this[Id])==null?void 0:i.has(e))===!0}_override(e,i){i===void 0?this.__accessor__.clearOverride(e):this.__accessor__.override(e,i)}_clearOverride(e){return this.__accessor__.clearOverride(e)}_overrideIfSome(e,i){i==null?this.__accessor__.clearOverride(e):this.__accessor__.override(e,i)}_isOverridden(e){return this.__accessor__.isOverridden(e)}notifyChange(e){this.__accessor__.notifyChange(e)}_get(e){return this.__accessor__.internalGet(e)}_set(e,i){return this.__accessor__.internalSet(e,i),this}},FY=Id,NY=dz,Eg);const ws=(t,e)=>{const r=S$().manager;r.onLoaded(()=>r.onLifecycle(()=>eo(t,e,n.emit)));const n=F7();return n},tce=(t,e)=>i=>NEe(i,t);var $b,rS,Xy;class ice extends N7{constructor(i,r){super(i);Ye(this,$b);Ye(this,rS);Ye(this,Xy);this.Y=new Map,this.A=void 0,Ue(this,rS,vle());const n=this;Ue(n,Xy,r),n.Z(),n.setProvisionalExports(rce(i,new WeakRef(n),i.M.length-1,n.instance,n.Y),!1),R7(i,s=>{if(s){const o=$e(()=>i[s],a=>{if(a===n.instance)return;const l=n.instance;n.exports=a,n.instance=a,n.Y.forEach((c,d)=>i.requestUpdate(c,l[d])),Y(n,$b)&&l.destroy(),Ue(n,$b,!1)},{sync:!0});n.onDestroy(o.remove)}},n.exports)}get exports(){return ble(Y(this,rS)),super.exports}set exports(i){super.exports=i,Y(this,rS).notify()}Z(){var r;const i=this;i.instance="prototype"in Y(i,Xy)&&"declaredClass"in Y(i,Xy).prototype?new(Y(i,Xy)):Y(r=i,Xy).call(r),Ue(i,$b,!0)}hostConnected(){this.exports=this.instance}hostDestroy(){var i,r;Y(this,$b)&&((r=(i=this.instance).destroy)==null||r.call(i))}}$b=new WeakMap,rS=new WeakMap,Xy=new WeakMap;const NEe=sG(ice),rce=(t,e,i,r,n)=>new Proxy(r,{get:(s,o)=>{const a=s[o];if(typeof o=="symbol"||n.has(o))return a;const l=t.M[i];return l.A=o,O7(t,c=>{if(l.A=void 0,c!==void 0){const d=c.key;n.set(o,d);const f=t.constructor.getPropertyOptions(d),y=o!==d&&d.toLowerCase().includes("disable");DEe(e,f,o,d,y),f.i===void 0&&zEe(f,i,o,y)}},a)}}),DEe=(t,e,i,r,n,s)=>s=$e(()=>{const o=t.deref();return o===void 0||o.component.manager.destroyed?s=s.remove():o.exports[i]},(o,a)=>{if(!s)return;const l=t.deref().component;l==null||l.requestUpdate(r,n?!a:a),e.c=!1},{sync:!0}),zEe=(t,e,i,r)=>{t.d.get=function(){var s;const n=(s=this.M[e])==null?void 0:s.exports[i];return r?!n:n},t.d.set=function(n){const s=this.M[e];s.A!==i&&(s.exports[i]=r?!n:n)}},VEe=t=>t.Y,jEe=(t,e)=>{const i=e.manager.useRefSync(t);i==null||i.hostDestroy(),i==null||i.Z(),i==null||i.hostConnected()};function u(t,e,i,r){var n,s=arguments.length,o=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,i,r);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(s<3?n(o):s>3?n(e,i,o):n(e,i))||o);return s>3&&o&&Object.defineProperty(e,i,o),o}function ght(t,e){return function(i,r){e(i,r,t)}}function vht(t,e,i,r){function n(s){return s instanceof i?s:new i((function(o){o(s)}))}return new(i||(i=Promise))((function(s,o){function a(d){try{c(r.next(d))}catch(f){o(f)}}function l(d){try{c(r.throw(d))}catch(f){o(f)}}function c(d){d.done?s(d.value):n(d.value).then(a,l)}c((r=r.apply(t,[])).next())}))}function bht(t,e,i){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,n;if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose]}if(typeof r!="function")throw new TypeError("Object not disposable.");n&&(r=function(){try{n.call(this)}catch(s){return Promise.reject(s)}}),t.stack.push({value:e,dispose:r,async:i})}return e}var UEe=typeof SuppressedError=="function"?SuppressedError:function(t,e,i){var r=new Error(i);return r.name="SuppressedError",r.error=t,r.suppressed=e,r};function wht(t){function e(s){t.error=t.hasError?new UEe(s,t.error,"An error was suppressed during disposal."):s,t.hasError=!0}var i,r=0;function n(){for(;i=t.stack.pop();)try{if(!i.async&&r===1)return r=0,t.stack.push(i),Promise.resolve().then(n);if(i.dispose){var s=i.dispose.call(i.value);if(i.async)return r|=2,Promise.resolve(s).then(n,(function(o){return e(o),n()}))}else r|=1}catch(o){e(o)}if(r===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return n()}const BEe="modulepreload",GEe=function(t){return"/us-presidential-elections/"+t},DY={},ye=function(e,i,r){let n=Promise.resolve();if(i&&i.length>0){let o=function(c){return Promise.all(c.map(d=>Promise.resolve(d).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));n=o(i.map(c=>{if(c=GEe(c),c in DY)return;DY[c]=!0;const d=c.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const y=document.createElement("link");if(y.rel=d?"stylesheet":BEe,d||(y.as="script"),y.crossOrigin="",y.href=c,l&&y.setAttribute("nonce",l),document.head.appendChild(y),d)return new Promise((g,b)=>{y.addEventListener("load",g),y.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return n.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})},nce=t=>{let e=class extends t{clone(){var l;const i=da(this);r2(i,"unable to clone instance of non-accessor class");const r=i.metadata,n=i.store,s={},o=new Map;for(const c in r){const d=r[c],f=n==null?void 0:n.originOf(c),y=d.clonable;if(d.readOnly||y===!1||f!==Nt.USER&&f!==Nt.DEFAULTS&&f!==Nt.WEB_MAP&&f!==Nt.WEB_SCENE)continue;const g=this[c];let b=null;b=typeof y=="function"?y(g):y==="reference"?g:ej(g),g!=null&&b==null||(f===Nt.DEFAULTS?o.set(c,b):s[c]=b)}const a=new(Object.getPrototypeOf(this)).constructor(s);if(o.size){const c=(l=da(a))==null?void 0:l.store;if(c)for(const[d,f]of o)c.set(d,f,Nt.DEFAULTS)}return a}};return e=u([V("esri.core.Clonable")],e),e};let ME=class extends nce(tt){};ME=u([V("esri.core.Clonable")],ME),(function(t){t.ClonableMixin=nce})(ME||(ME={}));const bt=ME;let i0=class extends bt{constructor(e){super(e),this.row=0,this.column=0,this.rows=1,this.columns=1}equals(e){return e!=null&&this.row===e.row&&this.rows===e.rows&&this.column===e.column&&this.columns===e.columns}};u([h({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],i0.prototype,"row",void 0),u([h({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],i0.prototype,"column",void 0),u([h({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],i0.prototype,"rows",void 0),u([h({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],i0.prototype,"columns",void 0),i0=u([V("esri.CameraLayout")],i0);const sce=i0,zY=new Float32Array(1);function Sht(t){--t;for(let e=1;e<32;e<<=1)t|=t>>e;return t+1}function to(t,e,i){return Math.min(Math.max(t,e),i)}function qEe(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,++t}function kE(t,e,i){return t+(e-t)*i}function $ht(t,e,i,r,n){return kE(r,n,(t-e)/(i-e))}function k$(t){return t*Math.PI/180}function oce(t){return 180*t/Math.PI}function Tht(t,e=1e-6){return(t<0?-1:1)/Math.max(Math.abs(t),e)}function Eht(t){return Math.acos(to(t,-1,1))}function HEe(t){return Math.asin(to(t,-1,1))}function Ju(t,e,i=1e-6){return t===e?!0:!Number.isFinite(t)||!Number.isFinite(e)?!1:(t>e?t-e:e-t)<=i}function ace(t,e,i=1e-6){return!Ju(t,e,i)&&t>e}function yj(t,e,i=1e-6){return!Ju(t,e,i)&&t<e}function WEe(t,e,i=1e-6){return Ju(t,e,i)||t>e}const UR=new DataView(new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT));function gj(t){return UR.setFloat64(0,t),UR.getBigInt64(0)}function ZEe(t){return UR.setBigInt64(0,t),UR.getFloat64(0)}const qA=BigInt("1000000"),JEe=lce(1);function lce(t){const e=gj(t=Math.abs(t)),i=ZEe(e<=qA?qA:e-qA);return Math.abs(t-i)}function Iht(t,e,i=JEe){if(t===e)return!0;if(!Number.isFinite(t)||!Number.isFinite(e))return!1;if(i!=null&&lce(Math.min(Math.abs(t),Math.abs(e)))<i)return Math.abs(t-e)<=i;const r=gj(t),n=gj(e);return r<0!=n<0?!1:!((r<n?n-r:r-n)>qA)}function Cht(t,e,i=1e-6){if(t===e)return!0;if(!Number.isFinite(t)||!Number.isFinite(e))return!1;const r=Math.abs(t-e),n=Math.abs(t),s=Math.abs(e);if(t===0||e===0||n<1e-12&&s<1e-12){if(r>.01*i)return!1}else if(r/(n+s)>i)return!1;return!0}function Mht(t){return cce(Math.max(-VY,Math.min(t,VY)))}function cce(t){return zY[0]=t,zY[0]}function kht(t){const e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[3]*t[3]+t[4]*t[4]+t[5]*t[5],r=t[6]*t[6]+t[7]*t[7]+t[8]*t[8];return!(Ju(e,1)&&Ju(i,1)&&Ju(r,1))}const VY=cce(34028234663852886e22);function Pht(t,e,i){if(i===void 0||+i==0)return Math[t](e);if(e=+e,i=+i,isNaN(e)||typeof i!="number"||i%1!=0)return NaN;let r=e.toString().split("e");return r=(e=Math[t](+(r[0]+"e"+(r[1]?+r[1]-i:-i)))).toString().split("e"),+(r[0]+"e"+(r[1]?+r[1]+i:i))}let hG=class{constructor(e,i){this.min=e,this.max=i,this.range=i-e}normalize(e,i=0,r=!1){return jY(this.range,this.min,this.max,e,i,r)}clamp(e,i=0){return to(e-i,this.min,this.max)+i}monotonic(e,i,r){return e<i?i:i+vj(this.range,e-i,r)}minimalMonotonic(e,i,r){return jY(this.range,e,e+this.range,i,r)}center(e,i,r){return i=this.monotonic(e,i,r),this.normalize((e+i)/2,r)}diff(e,i,r){return this.monotonic(e,i,r)-e}shortestSignedDiff(e,i){e=this.normalize(e);const r=(i=this.normalize(i))-e,n=i<e?this.minimalMonotonic(e,i)-e:i-this.minimalMonotonic(i,e);return Math.abs(r)<Math.abs(n)?r:n}contains(e,i,r){return i=this.minimalMonotonic(e,i),(r=this.minimalMonotonic(e,r))>e&&r<i}};function jY(t,e,i,r,n=0,s=!1){return(r-=n)<e?r+=vj(t,e-r):r>i&&(r-=vj(t,r-i)),s&&r===i&&(r=e),r+n}function vj(t,e,i=0){return Math.ceil((e-i)/t)*t+i}const Lht=new hG(0,2*Math.PI),Rht=new hG(-Math.PI,Math.PI),uce=new hG(0,360);let YEe=class dce{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){const i=new dce;return this._values.forEach(((r,n)=>{e&&e.has(n)||i.set(n,se(r.value),r.origin)})),i}get(e,i){i=this._normalizeOrigin(i);const r=this._values.get(e);return i==null||(r==null?void 0:r.origin)===i?r==null?void 0:r.value:void 0}originOf(e){var i;return((i=this._values.get(e))==null?void 0:i.origin)??Nt.USER}keys(e){e=this._normalizeOrigin(e);const i=[...this._values.keys()];return e==null?i:i.filter((r=>{var n;return((n=this._values.get(r))==null?void 0:n.origin)===e}))}set(e,i,r){if((r=this._normalizeOrigin(r))===Nt.DEFAULTS){const n=this._values.get(e);if((n==null?void 0:n.origin)!=null&&n.origin>r)return}this._values.set(e,new XEe(i,r))}delete(e,i){var r;(i=this._normalizeOrigin(i))!=null&&((r=this._values.get(e))==null?void 0:r.origin)!==i||this._values.delete(e)}has(e,i){var r;return(i=this._normalizeOrigin(i))!=null?((r=this._values.get(e))==null?void 0:r.origin)===i:this._values.has(e)}isAtOrigin(e,i){return i=this._normalizeOrigin(i),this.has(e,i)&&this.originOf(e)===i}isBelowOrigin(e,i){return i=this._normalizeOrigin(i),!this.has(e)||this.originOf(e)<i}forEach(e){this._values.forEach((({value:i},r)=>e(i,r)))}_normalizeOrigin(e){if(e!=null)return e===Nt.DEFAULTS?e:Nt.USER}},XEe=class{constructor(e,i){this.value=e,this.origin=i}};function hce(t,e,i){e.keys().forEach((n=>{i.set(n,e.get(n),Nt.DEFAULTS)}));const r=t.metadata;Object.keys(r).forEach((n=>{t.internalGet(n)&&i.set(n,t.internalGet(n),Nt.DEFAULTS)}))}function KEe(t,e,i){if(!(t!=null&&t.read)||t.read.enabled===!1||!t.read.source)return!1;const r=t.read.source;if(typeof r=="string"){if(r===e||r.includes(".")&&r.indexOf(e)===0&&bY(r,i))return!0}else for(const n of r)if(n===e||n.includes(".")&&n.indexOf(e)===0&&bY(n,i))return!0;return!1}function QEe(t){return t&&(!t.read||t.read.enabled!==!1&&!t.read.source)}function eIe(t,e,i,r,n){let s=pj(e[i],n);QEe(s)&&(t[i]=!0);for(const o of Object.getOwnPropertyNames(e))s=pj(e[o],n),KEe(s,i,r)&&(t[o]=!0)}function tIe(t,e,i,r){const n=i.metadata,s=vEe(n[e],r),o=s==null?void 0:s.default;if(o===void 0)return;const a=typeof o=="function"?o.call(t,e,r):o;a!==void 0&&i.set(e,a)}const pce={origin:"service"};function fce(t,e,i=pce){if(!e||typeof e!="object")return;const r=da(t),n=r.metadata,s={};for(const o of Object.getOwnPropertyNames(e))eIe(s,n,o,e,i);r.setDefaultOrigin(i.origin);for(const o of Object.getOwnPropertyNames(s)){const a=pj(n[o],i).read,l=a==null?void 0:a.source;let c;c=l&&typeof l=="string"?a2(e,l):e[o],a!=null&&a.reader&&(c=a.reader.call(t,c,e,i)),c!==void 0&&r.set(o,c)}if(!i||!i.ignoreDefaults){r.setDefaultOrigin("defaults");for(const o of Object.getOwnPropertyNames(n))s[o]||tIe(t,o,r,i)}r.setDefaultOrigin("user")}function mce(t,e,i,r=pce){var s;const n={...r,messages:[]};i(n),(s=n.messages)==null||s.forEach((o=>{o.type!=="warning"||t.loaded?r!=null&&r.messages&&r.messages.push(o):t.loadWarnings.push(o)}))}function iIe(t,e,i,r,n){var o,a;const s={};return(a=(o=e.write)==null?void 0:o.writer)==null||a.call(t,r,s,i,n),s}function yce(t,e,i,r,n,s){if(!(r!=null&&r.write))return!1;const o=Mc(t,i);if(!n&&r.write.overridePolicy){const a=r.write.overridePolicy.call(t,o,i,s??void 0);a!==void 0&&(n=a)}if(n||(n=r.write),!n||n.enabled===!1||n.layerContainerTypes&&(s!=null&&s.layerContainerType)&&!n.layerContainerTypes.includes(s.layerContainerType))return!1;if((o===null&&!n.allowNull&&!n.writerEnsuresNonNull||o===void 0)&&n.isRequired){const a=new ie("web-document-write:property-required",`Missing value for required property '${i}' on '${t.declaredClass}'`,{propertyName:i,target:t});return a&&(s!=null&&s.messages)?s.messages.push(a):a&&!s&&Ie.getLogger("esri.core.accessorSupport.write").error(a.name,a.message),!1}return!(o===void 0||o===null&&!n.allowNull&&!n.writerEnsuresNonNull||!n.alwaysWriteDefaults&&(!e.store.multipleOriginsSupported||e.store.originOf(i)===Nt.DEFAULTS)&&rIe(t,i,s,r,o)||!n.ignoreOrigin&&(s!=null&&s.origin)&&e.store.multipleOriginsSupported&&e.store.originOf(i)<Bf(s.origin))}function rIe(t,e,i,r,n){const s=r.default;if(s===void 0)return!1;if(r.defaultEquals!=null)return r.defaultEquals(n);if(typeof s=="function"){if(Array.isArray(n)){const o=s.call(t,e,i??void 0);return OF(o,n)}return!1}return s===n}function nIe(t,e,i,r){const n=da(t),s=n.metadata,o=Yle(s[e],r);return!!o&&yce(t,n,e,o,i,r)}function gce(t,e,i){var s,o;if(t&&typeof t.toJSON=="function"&&(!t.toJSON.isDefaultToJSON||!t.write))return VA(e,t.toJSON(i));const r=da(t),n=r.metadata;for(const a in n){const l=Yle(n[a],i);if(!yce(t,r,a,l,void 0,i))continue;const c=Mc(t,a),d=iIe(t,l,l.write&&typeof l.write.target=="string"?l.write.target:a,c,i);Object.keys(d).length>0&&(e=VA(e,d),(o=(s=i==null?void 0:i.resources)==null?void 0:s.pendingOperations)!=null&&o.length&&i.resources.pendingOperations.push(Promise.all(i.resources.pendingOperations).then((()=>VA(e,d,(()=>"replace-arrays"))))),i!=null&&i.writtenProperties&&i.writtenProperties.push({target:t,propName:a,oldOrigin:kEe(r.store.originOf(a)),newOrigin:i.origin}))}return e}const vce=t=>{let e=class extends t{constructor(...i){super(...i);const r=da(this),n=r.store,s=new YEe;r.store=s,hce(r,n,s)}read(i,r){fce(this,i,r)}write(i,r){return gce(this,i??{},r)}toJSON(i){return this.write({},i)}static fromJSON(i,r){return sIe.call(this,i,r)}};return e=u([V("esri.core.JSONSupport")],e),e.prototype.toJSON.isDefaultToJSON=!0,e};function sIe(t,e){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const i=new this;return i.read(t,e),i}let PE=class extends vce(tt){};PE=u([V("esri.core.JSONSupport")],PE),(function(t){t.JSONSupportMixin=vce})(PE||(PE={}));const ve=PE;let pG=class{constructor(e,i,r,n,s,o){this.semiMajorAxis=e,this.flattening=i,this.outerAtmosphereRimWidth=r,this.atmosphereHeight=n,this.scaleHeight=s;const a=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*a,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=o||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}};const tn=new pG(6378137,1/298.257223563,3e5,1e5,.085,.006694379990137799),Qh=new pG(3396190,1/169.8944472236118,23e4,6e4,.111),kg=new pG(1737400,0,0,0,0);function qC(t){return t&&typeof t=="object"&&"toJSON"in t&&typeof t.toJSON=="function"}const oIe=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,aIe={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};function UY(t){const e=t==null?void 0:t.match(oIe);if(!e)return null;const[,i,r,n]=e;if(!i)return null;let s=null,o=null,a=null;const{devext:l,qaext:c,www:d}=aIe;if(r)if(s=i,n)switch(n.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:a}=l);break;case"qa":({customBaseUrl:o,portalHostname:a}=c);break;default:return null}else({customBaseUrl:o,portalHostname:a}=d);else switch(i.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:a}=l);break;case"qaext":({customBaseUrl:o,portalHostname:a}=c);break;case"www":({customBaseUrl:o,portalHostname:a}=d);break;default:return null}return{customBaseUrl:o,isPortal:!1,portalHostname:a,urlKey:s}}function bce(t){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(t)}function wce(t){const e=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,i=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,r=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;return e.test(t)?t=t.replace(e,"https://www.arcgis.com"):i.test(t)?t=t.replace(i,"https://devext.arcgis.com"):r.test(t)&&(t=t.replace(r,"https://qaext.arcgis.com")),t}function _ce(t){const e=atob(t),i=new Uint8Array(e.length);for(let r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i.buffer}function lIe(t){const e=new Uint8Array(t);let i="";for(let r=0;r<e.length;r++)i+=String.fromCharCode(e[r]);return btoa(i)}const cIe=()=>Ie.getLogger("esri.core.urlUtils"),P$=Si.request,BY="esri/config: esriConfig.request.proxyUrl is not set.",xce=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,Sce=/^\s*http:/i,uIe=/^\s*https:/i,dIe=/^\s*file:/i,$ce=/:\d+$/,hIe=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,pIe=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),fIe=new RegExp("^((([^[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^[:]*))(:([0-9]+))?$");let Ab=class{constructor(e=""){this.uri=e,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let i=this.uri.match(pIe);this.scheme=i[2]||(i[1]?"":null),this.authority=i[4]||(i[3]?"":null),this.path=i[5],this.query=i[7]||(i[6]?"":null),this.fragment=i[9]||(i[8]?"":null),this.authority!=null&&(i=this.authority.match(fIe),this.user=i[3]||null,this.password=i[4]||null,this.host=i[6]||i[7],this.port=i[9]||null)}toString(){return this.uri}};const tP={},mIe=new Ab(Si.applicationUrl);let Io=mIe;const yIe=gIe();let fG=yIe;const mG=()=>Io,zht=()=>fG;function gIe(){const t=Io.path,e=t.slice(0,t.lastIndexOf("/")+1);return`${`${Io.scheme}://${Io.host}${Io.port!=null?`:${Io.port}`:""}`}${e}`}function rn(t){if(!t)return null;const e={path:null,query:null},i=new Ab(t),r=t.indexOf("?");return i.query===null?e.path=t:(e.path=t.slice(0,r),e.query=yG(i.query)),i.fragment&&(e.hash=i.fragment,i.query===null&&(e.path=e.path.slice(0,e.path.length-(i.fragment.length+1)))),e}function yG(t){const e=t.split("&"),i={};for(const r of e){if(!r)continue;const n=r.indexOf("=");let s,o;n<0?(s=decodeURIComponent(r),o=""):(s=decodeURIComponent(r.slice(0,n)),o=decodeURIComponent(r.slice(n+1)));let a=i[s];typeof a=="string"&&(a=i[s]=[a]),Array.isArray(a)?a.push(o):i[s]=o}return i}function HC(t,e){return t?Object.keys(t).map((i=>{const r=t[i];if(r==null)return"";const n=encodeURIComponent(i)+"=",s=e==null?void 0:e[i];return s?n+encodeURIComponent(s(r)):Array.isArray(r)?r.map((o=>qC(o)?n+encodeURIComponent(JSON.stringify(o)):n+encodeURIComponent(o))).join("&"):qC(r)?n+encodeURIComponent(JSON.stringify(r)):n+encodeURIComponent(r)})).filter((i=>i)).join("&"):""}function Tce(t=!1){let e,i=P$.proxyUrl;if(typeof t=="string"){e=Mce(t);const r=jF(t);r&&(i=r.proxyUrl)}else e=!!t;if(!i)throw cIe().warn(BY),new ie("urlUtils:proxy-not-set",BY);return e&&wj()&&(i=_G(i)),rn(i)}function Vht(t,e=!1){const i=jF(t);let r,n;if(i){const s=gG(i.proxyUrl);r=s.path,n=s.query?yG(s.query):null}else if(e){const s=Tce(t);r=s.path,n=s.query}if(r){const s=rn(t);t=r+"?"+s.path;const o=HC({...n,...s.query});o&&(t=`${t}?${o}`)}return t}const zT={path:"",query:""};function gG(t){const e=t.indexOf("?");return e!==-1?(zT.path=t.slice(0,e),zT.query=t.slice(e+1)):(zT.path=t,zT.query=null),zT}function Ece(t){return t=(t=GR(t=CIe(t=gG(t).path),!0)).toLowerCase()}function vIe(t){const e={proxyUrl:t.proxyUrl,urlPrefix:Ece(t.urlPrefix)},i=P$.proxyRules,r=e.urlPrefix;let n=i.length;for(let s=0;s<i.length;s++){const o=i[s].urlPrefix;if(r.indexOf(o)===0){if(r.length===o.length)return-1;n=s;break}o.indexOf(r)===0&&(n=s+1)}return i.splice(n,0,e),n}function jF(t){const e=P$.proxyRules,i=Ece(t);for(let r=0;r<e.length;r++)if(i.indexOf(e[r].urlPrefix)===0)return e[r]}function bIe(t,e){if(!t||!e)return!1;t=BR(t),e=BR(e);const i=UY(t),r=UY(e);return i!=null&&r!=null?i.portalHostname===r.portalHostname:i==null&&r==null&&ep(t,e,!0)}function Ice(t,e){return t=BR(t),e=BR(e),GR(t)===GR(e)}function BR(t){const e=(t=Yu(t)).indexOf("/sharing");return e>0?t.slice(0,e):t.replace(/\/+$/,"")}function bj(t,e=P$.interceptors){const i=r=>r instanceof RegExp?r.test(t):typeof r=="string"?t.startsWith(r):r==null;if(e){for(const r of e)if(Array.isArray(r.urls)){if(r.urls.some(i))return r}else if(i(r.urls))return r}return null}function ep(t,e,i=!1){if(!t||!e)return!1;const r=xj(t),n=xj(e);return!(!i&&r.scheme!==n.scheme)&&r.host!=null&&n.host!=null&&r.host.toLowerCase()===n.host.toLowerCase()&&r.port===n.port}function vG(t){if(typeof t=="string"){if(!Ha(t))return!0;t=xj(t)}if(ep(t,Io))return!0;const e=P$.trustedServers||[];for(let i=0;i<e.length;i++){const r=wIe(e[i]);for(let n=0;n<r.length;n++)if(ep(t,r[n]))return!0}return!1}function wIe(t){return tP[t]||(wG(t)||cp(t)?tP[t]=[new Ab(Ba(t))]:tP[t]=[new Ab(`http://${t}`),new Ab(`https://${t}`)]),tP[t]}function Ba(t,e=fG,i){return cp(t)?i!=null&&i.preserveProtocolRelative?t:Io.scheme==="http"&&Io.authority===Rl(t).slice(2)?`http:${t}`:`https:${t}`:wG(t)?t:Pg(t[0]==="/"?IIe(e):e,t)}function bG(t,e=fG,i){if(t==null||!Ha(t))return t;const r=Yu(t),n=r.toLowerCase(),s=Yu(e).toLowerCase().replace(/\/+$/,""),o=i?Yu(i).toLowerCase().replace(/\/+$/,""):null;if(o&&s.indexOf(o)!==0)return t;const a=(f,y,g)=>(g=f.indexOf(y,g))===-1?f.length:g;let l=a(n,"/",n.indexOf("//")+2),c=-1;for(;n.slice(0,l+1)===s.slice(0,l)+"/"&&(c=l+1,l!==n.length);)l=a(n,"/",l+1);if(c===-1||o&&c<o.length)return t;t=r.slice(c);const d=s.slice(c-1).replaceAll(/[^/]+/g,"").length;if(d>0)for(let f=0;f<d;f++)t=`../${t}`;else t=`./${t}`;return t}function Yu(t){return t=PIe(t=kIe(t=MIe(t=Ba(t=t.trim()))))}function Pg(...t){const e=t.filter(Kr);if(!(e!=null&&e.length))return;const i=[];if(Ha(e[0])){const n=e[0],s=n.indexOf("//");s!==-1&&(i.push(n.slice(0,s+1)),TIe(e[0])&&(i[0]+="/"),e[0]=n.slice(s+2))}else e[0][0]==="/"&&i.push("");const r=e.reduce(((n,s)=>s?n.concat(s.split("/")):n),[]);for(let n=0;n<r.length;n++){const s=r[n];s===".."&&i.length>0&&i[i.length-1]!==".."?i.pop():(!s&&n===r.length-1||s&&(s!=="."||i.length===0))&&i.push(s)}return i.join("/")}function Rl(t,e=!1){if(t==null||A$(t)||cm(t))return null;let i=t.indexOf("://");if(i===-1&&cp(t))i=2;else{if(i===-1)return null;i+=3}const r=t.indexOf("/",i);return r!==-1&&(t=t.slice(0,r)),e&&(t=GR(t,!0)),t}function Ha(t){return cp(t)||wG(t)}function A$(t){return t!=null&&t.slice(0,5)==="blob:"}function cm(t){return t!=null&&t.slice(0,5)==="data:"}function _Ie(t){const e=ew(t);return e!=null&&e.isBase64?_ce(e.data):null}function jht(t){return lIe(t).replaceAll("+","-").replaceAll("/","_").replace(/=+$/,"")}const xIe=/^data:(.*?)(;base64)?,(.*)$/;function ew(t){const e=t.match(xIe);if(!e)return null;const[,i,r,n]=e;return{mediaType:i,isBase64:!!r,data:n}}function Cce(t){return t.isBase64?`data:${t.mediaType};base64,${t.data}`:`data:${t.mediaType},${t.data}`}async function SIe(t){return(await fetch(t)).blob()}function Uht(t){const e=_Ie(t);if(!e)return null;const i=ew(t);return new Blob([e],{type:i.mediaType})}function cp(t){return t!=null&&t[0]==="/"&&t[1]==="/"}function wG(t){return t!=null&&xce.test(t)}function Mce(t){return t!=null&&uIe.test(t)||Io.scheme==="https"&&cp(t)}function $Ie(t){return t!=null&&Sce.test(t)||Io.scheme==="http"&&cp(t)}function TIe(t){return t!=null&&dIe.test(t)}function _G(t){return cp(t)?`https:${t}`:t.replace(Sce,"https:")}function EIe(){return Io.scheme==="http"}function wj(){return Io.scheme==="https"}function GR(t,e=!1){return cp(t)?t.slice(2):(t=t.replace(xce,""),e&&t.length>1&&t[0]==="/"&&t[1]==="/"&&(t=t.slice(2)),t)}function IIe(t){const e=t.indexOf("//"),i=t.indexOf("/",e+2);return i===-1?t:t.slice(0,i)}function xG(t){let e=0;if(Ha(t)){const r=t.indexOf("//");r!==-1&&(e=r+2)}const i=t.lastIndexOf("/");return i<e?t:t.slice(0,i+1)}function Bht(t,e){if(!t)return"";const i=rn(t).path.replace(/\/+$/,""),r=i.slice(i.lastIndexOf("/")+1);if(!(e!=null&&e.length))return r;const n=new RegExp(`\\.(${e.join("|")})$`,"i");return r.replace(n,"")}function CIe(t){return t.endsWith("/")?t:`${t}/`}function kce(t){return t.replace(/\/+$/,"")}function MIe(t){if(/^https?:\/\//i.test(t)){const e=gG(t);t=(t=e.path.replaceAll(/\/{2,}/g,"/")).replace("/","//"),e.query&&(t+=`?${e.query}`)}return t}function kIe(t){return t.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function PIe(t){const e=P$.httpsDomains;if(!$Ie(t))return t;const i=t.indexOf("/",7);let r;if(r=i===-1?t:t.slice(0,i),r=r.toLowerCase().slice(7),$ce.test(r)){if(!r.endsWith(":80"))return t;r=r.slice(0,-3),t=t.replace(":80","")}return EIe()&&r===Io.authority&&!hIe.test(t)||(wj()&&r===Io.authority||e&&e.some((n=>r===n||r.endsWith(`.${n}`)))||wj()&&!jF(t))&&(t=_G(t)),t}function _j(t,e,i){if(!(e&&i&&t&&Ha(t)))return t;const r=t.indexOf("//"),n=t.indexOf("/",r+2),s=t.indexOf(":",r+2),o=Math.min(n<0?t.length:n,s<0?t.length:s);return t.slice(r+2,o).toLowerCase()!==e.toLowerCase()?t:`${t.slice(0,r+2)}${i}${t.slice(o)}`}function Pce(t,e){const i=new URL(t);return i.host=e,i.port&&!$ce.test(e)&&(i.port=""),i.toString()}function AIe(t){return new URL(t).host}function xj(t){return typeof t=="string"?new Ab(Ba(t)):(t.scheme||(t.scheme=Io.scheme),t)}function Ght(t){return LIe.test(t)}function Ace(t,e){const i=rn(t),r=Object.keys(i.query||{});return r.length>0&&e&&e.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${r.join(", ")}.`),i.path}function Lce(t,e,i){const r=rn(t),n=r.query||{};return n[e]=String(i),`${r.path}?${HC(n)}`}function HA(t,e){if(!e)return t;const i=rn(t),r=i.query||{};for(const[s,o]of Object.entries(e))o!=null&&(r[s]=o);const n=HC(r);return n?`${i.path}?${n}`:i.path}function Rce(t){if(t==null)return null;const e=t.match(Oce);return e?e[2]:null}function GY(t){if(t==null)return null;const e=t.match(Oce);return e?{path:e[1],extension:e[2]}:{path:t,extension:null}}async function qht(t){return typeof t=="string"?ew(t)??{data:t}:new Promise(((e,i)=>{const r=new FileReader;r.readAsDataURL(t),r.onload=()=>e(ew(r.result)),r.onerror=n=>i(n)}))}const Oce=/([^.]*)\.([^/]*)$/,LIe=/(^data:image\/svg|\.svg$)/i,Fce="20250917",Nce="2136612b0849a0d597a86ff9f672ef9f9b4016c4";Symbol.dispose??(Symbol.dispose=Symbol("Symbol.dispose")),Symbol.asyncDispose??(Symbol.asyncDispose=Symbol("Symbol.asyncDispose"));const Dce="4.33";let Rt,SG=Dce;SG="4.33.14";function Hht(t){Rt=t}function RIe(t){const e=Rt==null?void 0:Rt.findCredential(t);return e!=null&&e.token?Lce(t,"token",e.token):t}fe("host-webworker")||globalThis.$arcgis||Object.defineProperty(globalThis,"$arcgis",{configurable:!1,enumerable:!0,writable:!1,value:{}}),fe("host-webworker");function rm(t,e){var r;const i=(r=e==null?void 0:e.url)==null?void 0:r.path;if(t&&i&&(t=Ba(t,i,{preserveProtocolRelative:!0}),e.portalItem&&e.readResourcePaths)){const n=bG(t,e.portalItem.itemUrl);n!=null&&OIe.test(n)&&e.readResourcePaths.push(e.portalItem.resourceFromPath(n).path)}return(t=Sj(t,e==null?void 0:e.portal))&&BF.test(t)?$G(t):t}function tw(t,e,i=WS.YES){var n,s;if((t=t&&BF.test(t)?Uce(t):t)==null)return t;!Ha(t)&&(e!=null&&e.blockedRelativeUrls)&&e.blockedRelativeUrls.push(t);let r=Ba(t);if(e){const o=((n=e.verifyItemRelativeUrls)==null?void 0:n.rootPath)||((s=e.url)==null?void 0:s.path);if(o){const a=Sj(o,e.portal),l=Sj(r,e.portal);r=bG(l,a,a),r!=null&&r!==l&&r!==t&&e.verifyItemRelativeUrls&&e.verifyItemRelativeUrls.writtenUrls.push(r)}}return r=jce(r,e==null?void 0:e.portal),Ha(r)&&(r=Yu(r)),e!=null&&e.resources&&(e!=null&&e.portalItem)&&!Ha(r)&&!cm(r)&&i===WS.YES&&e.resources.toKeep.push({resource:e.portalItem.resourceFromPath(r),compress:!1}),r}function UF(t,e,i){return rm(t,i)}function iw(t,e,i,r){const n=tw(t,r);n!==void 0&&(e[i]=n)}const BF=/\/items\/([^/]+)\/resources\/(.*)/,OIe=/^\.\/resources\//;function zce(t){const e=(t==null?void 0:t.match(BF))??null;return(e==null?void 0:e[1])??null}function Vce(t){const e=(t==null?void 0:t.match(BF))??null;if(e==null)return null;const i=e[2],r=i.lastIndexOf("/");if(r===-1){const{path:o,extension:a}=GY(i);return{prefix:null,filename:o,extension:a}}const{path:n,extension:s}=GY(i.slice(r+1));return{prefix:i.slice(0,r),filename:n,extension:s}}function jce(t,e){return e&&!e.isPortal&&e.urlKey&&e.customBaseUrl?_j(t,`${e.urlKey}.${e.customBaseUrl}`,e.portalHostname):t}function Sj(t,e){if(!e||e.isPortal||!e.urlKey||!e.customBaseUrl)return t;const i=`${e.urlKey}.${e.customBaseUrl}`,r=mG();return ep(r,`${r.scheme}://${i}`)?_j(t,e.portalHostname,i):_j(t,i,e.portalHostname)}function $G(t){if(!t)return t||null;let e=t;return e&&Rt&&!Rt.findCredential(e)&&(e=wce(e),e=e.replace(/^https?:\/\/www\.arcgis\.com/,"https://cdn.arcgis.com"),e=e.replace(/^https?:\/\/devext\.arcgis\.com/,"https://cdndev.arcgis.com"),e=e.replace(/^https?:\/\/qaext\.arcgis\.com/,"https://cdnqa.arcgis.com")),e}function Uce(t){if(!t)return t||null;let e=t;return e=e.replace(/^https?:\/\/cdn\.arcgis\.com/,"https://www.arcgis.com"),e=e.replace(/^https?:\/\/cdndev\.arcgis\.com/,"https://devext.arcgis.com"),e=e.replace(/^https?:\/\/cdnqa\.arcgis\.com/,"https://qaext.arcgis.com"),e&&Rt&&!Rt.findCredential(e)&&(e=wce(e)),e}var WS;(function(t){t[t.YES=0]="YES",t[t.NO=1]="NO"})(WS||(WS={}));const FIe=Object.freeze(Object.defineProperty({__proto__:null,get MarkKeep(){return WS},ensureMainOnlineDomain:jce,fromCDNUrl:Uce,fromJSON:rm,itemIdFromResourceUrl:zce,prefixAndFilenameFromResourceUrl:Vce,read:UF,toCDNUrl:$G,toJSON:tw,write:iw},Symbol.toStringTag,{value:"Module"})),Bce={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",knowledgegraphserver:"KnowledgeGraphServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer","3dtilesserver":"3DTilesServer",videoserver:"VideoServer"},Gce=Object.values(Bce),qce=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${Gce.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),NIe=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^/\\n]+)\\/(${Gce.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),DIe=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function Wht(t){return qce.test(t)}function up(t){if(t==null)return null;const e=rn(t),i=(e==null?void 0:e.path.match(qce))||(e==null?void 0:e.path.match(NIe));if(!i)return null;const[,r,n,s,o]=i,a=n.indexOf("/");return{title:TG(a!==-1?n.slice(a+1):n),serverType:Bce[s.toLowerCase()],sublayer:o!=null&&o!==""?parseInt(o,10):null,url:{path:r}}}function zIe(t){const e=rn(t).path.match(DIe);return e?{serviceUrl:e[1],sublayerId:Number(e[2])}:null}function TG(t){return(t=t.replaceAll(/\s*[/_]+\s*/g," "))[0].toUpperCase()+t.slice(1)}function VIe(t,e){const i=[];if(t){const r=up(t);r!=null&&r.title&&i.push(r.title)}if(e){const r=TG(e);i.push(r)}if(i.length===2){if(i[0].toLowerCase().includes(i[1].toLowerCase()))return i[0];if(i[1].toLowerCase().includes(i[0].toLowerCase()))return i[1]}return i.join(" - ")}function qR(t){let e=Rl(t,!0);return!!e&&(e=e.toLowerCase(),e.endsWith(".arcgis.com")&&(e.startsWith("services")||e.startsWith("tiles")||e.startsWith("features")||/^[a-z\d-]+\.svcs[a-z\d-]*\./.test(e)))}function jIe(t,e){return t&&kce(Ace(t,e))}function UIe(t){let{url:e}=t;if(!e)return{url:e};e=Ace(e,t.logger);const i=rn(e),r=up(i.path);let n;if(r!=null)r.sublayer!=null&&t.layer.layerId==null&&(n=r.sublayer),e=r.url.path;else if(t.nonStandardUrlAllowed){const s=zIe(i.path);s!=null&&(e=s.serviceUrl,n=s.sublayerId)}return{url:kce(e),layerId:n}}function BIe(t,e,i,r,n){iw(e,r,"url",n),r.url&&t.layerId!=null&&(r.url=Pg(r.url,i,t.layerId.toString()))}function Zht(t){if(!t)return!1;const e=t.toLowerCase(),i=e.includes("/services/"),r=e.includes("/mapserver/wmsserver"),n=e.includes("/imageserver/wmsserver"),s=e.includes("/wmsserver");return i&&(r||n||s)}function Jht(t){var r;if(!t)return!1;const e=new Ab(Ba(t)),i=(r=e.authority)==null?void 0:r.toLowerCase();return i==="server.arcgisonline.com"||i==="services.arcgisonline.com"}const GIe=new Set(["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"]);function EG(t){if(!IG(t))return null;const e=r=>r instanceof RegExp?r.test(t):typeof r=="string"&&t.startsWith(r),i=Si.apiKeys;if(Array.isArray(i.scopes)){for(const r of i.scopes)if(Array.isArray(r.urls)){if(r.urls.some(e))return r.token}else if(e(r.urls))return r.token}return i.basemapStyles&&/^https?:\/\/(i?basemaps|basemapstyles)-api\.arcgis\.com\//i.test(t)?i.basemapStyles:Si.apiKey&&/^https?:\/\/.+\.arcgis\.com(\/|$)/i.test(t)?Si.apiKey:null}function $j(){return Si.apiKey!=null||Si.apiKeys.basemapStyles!=null}function qIe(t,e){return e?IG(t):EG(t)!=null}function IG(t){const e=Rl(t,!0);return!!e&&!GIe.has(e)&&!t.endsWith("/sharing/rest/generateToken")}function HIe(t,e,i=!1,r){return new Promise(((n,s)=>{if(Nc(r))return void s(qY());let o=()=>{c(),s(new Error(`Unable to load ${e}`))},a=()=>{const d=t;c(),n(d)},l=()=>{if(!t)return;const d=t;c(),d.src="",s(qY())};const c=()=>{fe("esri-image-decode")||(t.removeEventListener("error",o),t.removeEventListener("load",a)),o=null,a=null,t=null,r!=null&&r.removeEventListener("abort",l),l=null,i&&URL.revokeObjectURL(e)};r!=null&&r.addEventListener("abort",l),fe("esri-image-decode")?t.decode().then(a,o):(t.addEventListener("error",o),t.addEventListener("load",a))}))}function qY(){try{return new DOMException("Aborted","AbortError")}catch{const t=new Error;return t.name="AbortError",t}}const Hce="Timeout exceeded";function WIe(){return new Error(Hce)}function Yht(t){return typeof t=="object"&&!!t&&"message"in t&&t.message===Hce}function ZIe(t){Si.request.crossOriginNoCorsDomains||(Si.request.crossOriginNoCorsDomains={});const e=Si.request.crossOriginNoCorsDomains;for(let i of t)i=i.toLowerCase(),/^https?:\/\//.test(i)?e[Rl(i)??""]=0:(e[Rl("http://"+i)??""]=0,e[Rl("https://"+i)??""]=0)}function JIe(t){const e=Si.request.crossOriginNoCorsDomains;if(e){let i=Rl(t);if(i)return i=i.toLowerCase(),!ep(i,mG())&&e[i]<Date.now()-36e5}return!1}async function YIe(t){var n;const e=rn(t);t=e.path,((n=e.query)==null?void 0:n.f)==="json"&&(t+="?f=json");try{await fetch(t,{mode:"no-cors",credentials:"include"})}catch{}const i=Si.request.crossOriginNoCorsDomains,r=Rl(t);i&&r&&(i[r.toLowerCase()]=Date.now())}const Tj=new Map;function XIe(t,e){const i=e==null?void 0:e.preferredHost;if(!i||ep(t,`https://${i}`,!0))return;const r=up(t);if(!r||r.serverType!=="FeatureServer"||bce(t))return;const n=r.url.path.toLowerCase();Tj.has(n)||Tj.set(n,i)}function HY(t){var r;const e=(r=up(t))==null?void 0:r.url.path.toLowerCase();if(!e)return t;const i=Tj.get(e);return i?Pce(t,i):t}async function fi(t,e){var g;t instanceof URL&&(t=t.toString()),(e==null?void 0:e.query)instanceof URLSearchParams&&(e.query=yG(e.query.toString().replaceAll("+"," ")));const i=cm(t),r=A$(t);r||i||(t=Yu(t));const n={url:t,requestOptions:{...e}},s=b=>({data:b,getAllHeaders:ZS,getHeader:ZS,httpStatus:200,requestOptions:n.requestOptions,url:n.url}),o=bj(t,wc.internalInterceptors);if(o){const b=await ZY(o,n);if(b!=null)return s(b)}let a=bj(t);if(a){const b=await ZY(a,n);if(b!=null)return s(b);a.after||a.error||(a=null)}if(t=n.url,(e=n.requestOptions).responseType==="image"&&(fe("host-webworker")||fe("host-node")))throw Xu("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),n);if(e.method==="head"){if(e.body)throw Xu("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),n);if(i||r)throw Xu("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),n)}if(await iCe(),HR)return HR.execute(t,e);const l=new AbortController,c=ed(e,(()=>l.abort())),d={controller:l,credential:void 0,credentialToken:void 0,fetchOptions:void 0,hasToken:!1,interceptor:a,params:n,redoRequest:!1,useIdentity:wc.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},f=e.useRequestQueue?aCe(d):Ij(d),y=await f.finally((()=>c==null?void 0:c.remove()));return(g=a==null?void 0:a.after)==null||g.call(a,y),y}let HR,Wce=!1;const wc=Si.request,Zce="FormData"in globalThis,KIe=new Set([499,498,403,401]),QIe=new Set(["COM_0056","COM_0057","SB_0008"]),eCe=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],ZS=()=>null,WR=Symbol();function tCe(t){const e=Rl(t);e&&!fi._corsServers.includes(e)&&fi._corsServers.push(e)}function WY(t){const e=Rl(t);return!e||e.endsWith(".arcgis.com")||fi._corsServers.includes(e)||vG(e)}function Xu(t,e,i,r){var o;let n;const s={url:i.url,requestOptions:i.requestOptions,getAllHeaders:ZS,getHeader:ZS,ssl:!1};if(e instanceof ie)return e.details?(e.details=se(e.details),e.details.url=i.url,e.details.requestOptions=i.requestOptions):e.details=s,e;if(e){const a=r&&(()=>Array.from(r.headers)),l=r&&(f=>r.headers.get(f)),c=r==null?void 0:r.status,d=e.message;d&&(n=d),a&&l&&(s.getAllHeaders=a,s.getHeader=l),s.httpStatus=(e.httpCode!=null?e.httpCode:e.code)||c||0,s.subCode=e.subcode,s.messageCode=e.messageCode,typeof e.details=="string"?(s.messages=[e.details],n??(n=e.details)):(s.messages=e.details,n??(n=(o=s.messages)==null?void 0:o[0])),s.raw=WR in e?e[WR]:e}return n??(n="Error"),Tn(e)?fr():new ie(t,n,s)}async function iCe(){fe("host-webworker")&&(!HR&&globalThis.invokeStaticMessage?HR=await ye(()=>import("./request-CNPIFDa3.js"),[]):Wce=!0)}async function Ej(){Rt||await ye(()=>import("./IdentityManager-BuTuS8EE.js"),[])}async function rCe(t){var a;const e=t.params.url,i=t.params.requestOptions,r=t.controller.signal,n=i.body;let s=null,o=null;if(Zce&&"HTMLFormElement"in globalThis&&(n instanceof FormData?s=n:n instanceof HTMLFormElement&&(s=new FormData(n))),typeof n=="string"&&(o=n),t.fetchOptions={cache:i.cacheBust?"no-cache":"default",credentials:"same-origin",headers:i.headers||{},method:i.method==="head"?"HEAD":"GET",mode:"cors",priority:wc.priority,redirect:"follow",signal:r},(s||o)&&(t.fetchOptions.body=s||o),(Wce||i.authMode==="anonymous")&&(t.useIdentity=!1),t.hasToken=!!(/token=/i.test(e)||(a=i.query)!=null&&a.token||s!=null&&s.get("token")),!t.hasToken){const l=EG(e);l&&(i.query??(i.query={}),i.query.token=l,t.hasToken=!0)}if(t.useIdentity&&!t.hasToken&&!t.credential&&!t.credentialToken&&!Jce(e)&&!Nc(r)){let l;i.authMode==="immediate"?(await Ej(),l=await Rt.getCredential(e,{signal:r})):i.authMode==="no-prompt"?(await Ej(),l=await Rt.getCredential(e,{prompt:!1,signal:r}).catch((()=>{}))):Rt&&(l=Rt.findCredential(e)),l&&(t.credential=l,t.credentialToken=l.token,t.useSSL=!!l.ssl)}}function Jce(t){return eCe.some((e=>e.test(t)))}async function nCe(t){let e=t.params.url,i=HY(e);const r=t.params.requestOptions,n=t.fetchOptions??{},s=A$(e)||cm(e),o=r.responseType||"json",a=s?0:r.timeout!=null?r.timeout:wc.timeout;let l=!1;if(!s){t.useSSL&&(e=_G(e));let g={...r.query};t.credentialToken&&(g.token=t.credentialToken);let b=HC(g);fe("esri-url-encodes-apostrophe")&&(b=b.replaceAll("'","%27"));const _=i.length+1+b.length;let x;l=r.method==="delete"||r.method==="post"||r.method==="put"||!!r.body||_>wc.maxUrlLength;const E=r.useProxy||!!jF(e);if(E){const C=Tce(e);x=C.path,!l&&x.length+1+_>wc.maxUrlLength&&(l=!0),C.query&&(g={...C.query,...g})}if(n.method==="HEAD"&&(l||E)){if(l)throw _>wc.maxUrlLength?Xu("request:invalid-parameters",new Error("URL exceeds maximum length"),t.params):Xu("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),t.params);if(E)throw Xu("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),t.params)}if(l?(n.method=r.method==="delete"?"DELETE":r.method==="put"?"PUT":"POST",r.body?e=HA(e,g):(n.body=HC(g),n.headers||(n.headers={}),n.headers["Content-Type"]="application/x-www-form-urlencoded")):e=HA(e,g),E&&(t.useProxy=!0,e=`${x}?${e}`),g.token&&Zce&&n.body instanceof FormData&&!bce(e)&&n.body.set("token",g.token),r.hasOwnProperty("withCredentials"))t.withCredentials=r.withCredentials;else if(!ep(e,mG())){if(vG(e))t.withCredentials=!0;else if(Rt){const C=Rt.findServerInfo(e);C!=null&&C.webTierAuth&&(t.withCredentials=!0)}}t.withCredentials&&(n.credentials="include",JIe(e)&&await YIe(l?HA(e,g):e)),i=HY(e)}let c,d,f=0,y=!1;a>0&&(f=setTimeout((()=>{y=!0,t.controller.abort()}),a));try{if(r.responseType==="native-request-init")d=n,d.url=i,r.signal?d.signal=r.signal:delete d.signal;else if(r.responseType!=="image"||n.cache!=="default"||n.method!=="GET"||l||sCe(r.headers)||!s&&!t.useProxy&&wc.proxyUrl&&!WY(e)){if(fi._beforeFetch&&await fi._beforeFetch(e,n),c=await fetch(i,n),fi._afterFetch&&await fi._afterFetch(c),t.useProxy||tCe(e),r.responseType==="native")d=c;else if(n.method!=="HEAD")if(c.ok){switch(o){case"array-buffer":d=await c.arrayBuffer();break;case"blob":case"image":d=await c.blob();break;default:d=await c.text()}if(f&&(clearTimeout(f),f=0),o==="json"||o==="xml"||o==="document")if(d)switch(o){case"json":d=JSON.parse(d);break;case"xml":d=JY(d,"application/xml");break;case"document":d=JY(d,"text/html")}else d=null;if(d){if(o==="array-buffer"||o==="blob"){const g=c.headers.get("Content-Type");if(g&&/application\/json|text\/plain/i.test(g)&&d[o==="blob"?"size":"byteLength"]<=750)try{const b=await new Response(d).json();b.error&&(d=b)}catch{}}o==="image"&&d instanceof Blob&&(d=await YY(URL.createObjectURL(d),t,!0))}}else{d=await c.text();try{d=JSON.parse(d)}catch{}}}else d=await YY(i,t)}catch(g){if(g.name==="AbortError")throw y?WIe():fr("Request canceled");if(!(!c&&g instanceof TypeError&&wc.proxyUrl)||r.body||r.method==="delete"||r.method==="head"||r.method==="post"||r.method==="put"||t.useProxy||WY(e))throw g;t.redoRequest=!0,vIe({proxyUrl:wc.proxyUrl,urlPrefix:Rl(e)??""})}finally{f&&clearTimeout(f)}return[c,d]}async function ZY(t,e){if(t.responseData!=null)return t.responseData;if(t.headers&&(e.requestOptions.headers={...e.requestOptions.headers,...t.headers}),t.query&&(e.requestOptions.query={...e.requestOptions.query,...t.query}),t.before){let i,r;try{r=await t.before(e)}catch(n){i=Xu("request:interceptor",n,e)}if((r instanceof Error||r instanceof ie)&&(i=Xu("request:interceptor",r,e)),i)throw t.error&&t.error(i),i;return r}}function sCe(t){if(t){for(const e of Object.getOwnPropertyNames(t))if(t[e])return!0}return!1}function JY(t,e){let i;try{i=new DOMParser().parseFromString(t,e)}catch{}if(!i||i.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return i}fi._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"],fi._beforeFetch=void 0,fi._afterFetch=void 0;const oCe=new Map;async function aCe(t){const e=cCe(t.params.url);if(!e)return Ij(t);const{QueueProcessor:i}=await ye(()=>import("./QueueProcessor-DV3IiCoQ.js"),[]);return lm(oCe,e.origin,(()=>{const n=e.isHosted?fe("request-queue-concurrency-hosted"):fe("request-queue-concurrency-non-hosted");return new i({concurrency:n,process:s=>{if(Nc(s.params.requestOptions))throw Xu("",fr("Request canceled"),s.params);return Ij(s)}})})).push(t)}async function Ij(t){var s,o;let e,i;await rCe(t);try{do[e,i]=await nCe(t);while(!await lCe(t,e,i))}catch(a){const l=Xu("request:server",a,t.params,e);throw l.details.ssl=t.useSSL,(s=t.interceptor)!=null&&s.error&&t.interceptor.error(l),l}const r=t.params.url;if(i)if(/\/sharing\/rest\/(accounts|portals)\/self/i.test(r)){if(!t.hasToken&&!t.credentialToken&&((o=i.user)!=null&&o.username)&&!vG(r)){const a=Rl(r,!0);a&&wc.trustedServers.push(a)}Array.isArray(i.authorizedCrossOriginNoCorsDomains)&&ZIe(i.authorizedCrossOriginNoCorsDomains)}else(t.params.requestOptions.responseType||"json")==="json"&&XIe(r,i);const n=t.credential;if(n&&Rt){const a=Rt.findServerInfo(n.server);let l=a==null?void 0:a.owningSystemUrl;if(l){l=l.replace(/\/?$/,"/sharing");const c=Rt.findCredential(l,n.userId);c&&Rt._getIdenticalSvcIdx(l,c)===-1&&c.resources.unshift(l)}}return{data:i,getAllHeaders:e?()=>Array.from(e.headers):ZS,getHeader:e?a=>e.headers.get(a):ZS,httpStatus:(e==null?void 0:e.status)??200,requestOptions:t.params.requestOptions,ssl:t.useSSL,url:t.params.url}}async function lCe(t,e,i){var c;if(t.redoRequest)return t.redoRequest=!1,!1;const r=t.params.requestOptions;if(!e||r.responseType==="native"||r.responseType==="native-request-init")return!0;let n,s;if(i&&(i.error&&typeof i.error=="object"?n=i.error:i.status==="error"&&Array.isArray(i.messages)&&(n={...i},n[WR]=i,n.details=i.messages)),!n&&!e.ok)throw n=new Error(`Unable to load ${e.url} status: ${e.status}`),n[WR]=i,n;let o,a=null;n&&(s=Number(n.code),a=n.hasOwnProperty("subcode")?Number(n.subcode):null,o=n.messageCode,o=o==null?void 0:o.toUpperCase());const l=r.authMode;if(s===403&&(a===4||(c=n.message)!=null&&c.toLowerCase().includes("ssl")&&!n.message.toLowerCase().includes("permission"))){if(!t.useSSL)return t.useSSL=!0,!1}else if(!t.hasToken&&t.useIdentity&&(l!=="no-prompt"||s===498)&&s!==void 0&&KIe.has(s)&&!Jce(t.params.url)&&(s!==403||(!o||!QIe.has(o))&&(a==null||a===2&&t.credentialToken))){await Ej();try{const d=await Rt.getCredential(t.params.url,{error:Xu("request:server",n,t.params),credential:t.credential,prompt:l!=="no-prompt",signal:t.controller.signal,token:t.credentialToken});return t.credential=d,t.credentialToken=d.token,t.useSSL=t.useSSL||d.ssl,!1}catch(d){if(l==="no-prompt")return t.credential=void 0,t.credentialToken=void 0,!1;n=d}}if(n)throw n;return!0}function YY(t,e,i=!1){const r=e.controller.signal,n=new Image;return e.withCredentials?n.crossOrigin="use-credentials":n.crossOrigin="anonymous",n.alt="",n.fetchPriority=wc.priority,n.src=t,HIe(n,t,i,r)}function cCe(t){let e,i;return typeof t=="string"?(e=Rl(t,!0),i=qR(t)):(e=t.origin,i=qR(t.toString())),e==null?null:{origin:e,isHosted:i}}function Ir(t){if(!Si.assetsPath)throw Ie.getLogger("esri.assets").errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new ie("assets:path-not-set","config.assetsPath is not set");return Pg(Si.assetsPath,t)}let hz,de=null;function CG(){return!!de}function uCe(){return!!fe("esri-wasm")}function Yce(){return hz||(hz=ye(()=>import("./pe-wasm-dPKcsouR.js"),[]).then((({default:t})=>t({locateFile:e=>Ir(`esri/geometry/support/${e}`)}))).then((t=>{Qce(t)})),hz)}var Cj,Or;(function(t){function e(s,o,a){de.ensureCache.prepare();const l=W0(a),c=a===l,d=de.ensureFloat64(l),f=de._pe_geog_to_proj(de.getPointer(s),o,d);return f&&By(a,o,d,c),f}function i(s,o,a,l){switch(l){case Or.PE_TRANSFORM_P_TO_G:return r(s,o,a);case Or.PE_TRANSFORM_G_TO_P:return e(s,o,a)}return 0}function r(s,o,a){return n(s,o,a,0)}function n(s,o,a,l){de.ensureCache.prepare();const c=W0(a),d=a===c,f=de.ensureFloat64(c),y=de._pe_proj_to_geog_center(de.getPointer(s),o,f,l);return y&&By(a,o,f,d),y}t.geogToProj=e,t.projGeog=i,t.projToGeog=r,t.projToGeogCenter=n})(Cj||(Cj={})),(function(t){function e(){t.PE_BUFFER_MAX=de.PeDefs.prototype.PE_BUFFER_MAX,t.PE_NAME_MAX=de.PeDefs.prototype.PE_NAME_MAX,t.PE_MGRS_MAX=de.PeDefs.prototype.PE_MGRS_MAX,t.PE_USNG_MAX=de.PeDefs.prototype.PE_USNG_MAX,t.PE_DD_MAX=de.PeDefs.prototype.PE_DD_MAX,t.PE_DDM_MAX=de.PeDefs.prototype.PE_DDM_MAX,t.PE_DMS_MAX=de.PeDefs.prototype.PE_DMS_MAX,t.PE_UTM_MAX=de.PeDefs.prototype.PE_UTM_MAX,t.PE_PARM_MAX=de.PeDefs.prototype.PE_PARM_MAX,t.PE_TYPE_NONE=de.PeDefs.prototype.PE_TYPE_NONE,t.PE_TYPE_GEOGCS=de.PeDefs.prototype.PE_TYPE_GEOGCS,t.PE_TYPE_PROJCS=de.PeDefs.prototype.PE_TYPE_PROJCS,t.PE_TYPE_GEOGTRAN=de.PeDefs.prototype.PE_TYPE_GEOGTRAN,t.PE_TYPE_COORDSYS=de.PeDefs.prototype.PE_TYPE_COORDSYS,t.PE_TYPE_UNIT=de.PeDefs.prototype.PE_TYPE_UNIT,t.PE_TYPE_LINUNIT=de.PeDefs.prototype.PE_TYPE_LINUNIT,t.PE_STR_OPTS_NONE=de.PeDefs.prototype.PE_STR_OPTS_NONE,t.PE_STR_AUTH_NONE=de.PeDefs.prototype.PE_STR_AUTH_NONE,t.PE_STR_AUTH_TOP=de.PeDefs.prototype.PE_STR_AUTH_TOP,t.PE_STR_NAME_CANON=de.PeDefs.prototype.PE_STR_NAME_CANON,t.PE_STR_FMT_WKT=de.PeDefs.prototype.PE_STR_FMT_WKT,t.PE_STR_FMT_WKT2=de.PeDefs.prototype.PE_STR_FMT_WKT2,t.PE_PARM_X0=de.PeDefs.prototype.PE_PARM_X0,t.PE_PARM_ND=de.PeDefs.prototype.PE_PARM_ND,t.PE_TRANSFORM_1_TO_2=de.PeDefs.prototype.PE_TRANSFORM_1_TO_2,t.PE_TRANSFORM_2_TO_1=de.PeDefs.prototype.PE_TRANSFORM_2_TO_1,t.PE_TRANSFORM_P_TO_G=de.PeDefs.prototype.PE_TRANSFORM_P_TO_G,t.PE_TRANSFORM_G_TO_P=de.PeDefs.prototype.PE_TRANSFORM_G_TO_P,t.PE_HORIZON_RECT=de.PeDefs.prototype.PE_HORIZON_RECT,t.PE_HORIZON_POLY=de.PeDefs.prototype.PE_HORIZON_POLY,t.PE_HORIZON_LINE=de.PeDefs.prototype.PE_HORIZON_LINE,t.PE_HORIZON_DELTA=de.PeDefs.prototype.PE_HORIZON_DELTA}t.init=e})(Or||(Or={}));let Xce=null;var Mj;(function(t){const e={},i={},r=g=>{const b=g.getType();switch(b){case Or.PE_TYPE_GEOGCS:g=de.castObject(g,de.PeGeogcs);break;case Or.PE_TYPE_PROJCS:g=de.castObject(g,de.PeProjcs);break;case Or.PE_TYPE_GEOGTRAN:g=de.castObject(g,de.PeGeogtran);break;default:b&Or.PE_TYPE_UNIT&&(g=de.castObject(g,de.PeUnit))}return g};function n(){de.PeFactory.prototype.initialize(null)}function s(g){return o(Or.PE_TYPE_COORDSYS,g)}function o(g,b){let _=null,x=e[g];if(x||(x={},e[g]=x),x.hasOwnProperty(String(b))&&(_=x[b],de.compare(_,de.NULL)&&(_=null)),!_){const E=de.PeFactory.prototype.factoryByType(g,b);de.compare(E,de.NULL)||(_=r(E),x[b]=_)}return _}function a(g,b){let _=null,x=i[g];if(x||(x={},i[g]=x),x.hasOwnProperty(b)&&(_=x[b],de.compare(_,de.NULL)&&(_=null)),!_){const E=de.PeFactory.prototype.fromString(g,b);de.compare(E,de.NULL)||(_=r(E),x[b]=_)}return _}function l(g){return o(Or.PE_TYPE_GEOGCS,g)}function c(g){return o(Or.PE_TYPE_GEOGTRAN,g)}function d(g){return de.PeFactory.prototype.getCode(g)}function f(g){return o(Or.PE_TYPE_PROJCS,g)}function y(g){return o(Or.PE_TYPE_UNIT,g)}t.initialize=n,t.coordsys=s,t.factoryByType=o,t.fromString=a,t.geogcs=l,t.geogtran=c,t.getCode=d,t.projcs=f,t.unit=y})(Mj||(Mj={}));let Kce=null;var ZR,kj,Pj,Aj,Lj,Rj,JR,Oj,YR,XR,Fj;function Qce(t){function e(s,o,a){s[o]=a(s[o])}de=t,Or.init(),ZR.init(),JR.init(),YR.init(),XR.init(),Xce=class extends de.PeDouble{constructor(s=NaN){super(s)}destroy(){de.destroy(this)}[Symbol.dispose](){this.destroy()}},Kce=class extends de.PeGCSExtent{destroy(){de.destroy(this)}[Symbol.dispose](){this.destroy()}};const i=[de.PeAngunit,de.PeDatum,de.PeGeogcs,de.PeGeogtran,de.PeObject,de.PeParameter,de.PePrimem,de.PeProjcs,de.PeSpheroid,de.PeUnit];for(const s of i)e(s.prototype,"getName",(o=>function(){return o.call(this,new Array(Or.PE_NAME_MAX))}));for(const s of[de.PeGeogtran,de.PeProjcs])e(s.prototype,"getParameters",(o=>function(){const a=new Array(Or.PE_PARM_MAX);let l=o.call(this);for(let c=0;c<a.length;c++){const d=de.getValue(l,"*");a[c]=d?de.wrapPointer(d,de.PeParameter):null,l+=Int32Array.BYTES_PER_ELEMENT}return a}));e(de.PeHorizon.prototype,"getCoord",(s=>function(o=!1){const a=this.getSize();if(!a)return null;const l=[];return By(l,a,s.call(this),o),l})),e(de.PeGTlistExtendedEntry.prototype,"getEntries",(s=>{const o=de._pe_getPeGTlistExtendedGTsSize();return function(){let a=null;const l=s.call(this);if(!de.compare(l,de.NULL)){a=[l];const c=this.getSteps();if(c>1){const d=de.getPointer(l);for(let f=1;f<c;f++)a.push(de.wrapPointer(d+o*f,de.PeGTlistExtendedGTs))}}return a}}));const r=de._pe_getPeHorizonSize(),n=s=>function(){let o=this._cache;if(o||(o=new Map,this._cache=o),o.has(s))return o.get(s);let a=null;const l=s.call(this);if(!de.compare(l,de.NULL)){a=[l];const c=l.getNump();if(c>1){const d=de.getPointer(l);for(let f=1;f<c;f++)a.push(de.wrapPointer(d+r*f,de.PeHorizon))}}return o.set(s,a),a};e(de.PeProjcs.prototype,"horizonGcsGenerate",n),e(de.PeProjcs.prototype,"horizonPcsGenerate",n),de.PeObject.prototype.toString=function(s=Or.PE_STR_OPTS_NONE){de.ensureCache.prepare();const o=de.getPointer(this),a=de.ensureInt8(new Array(Or.PE_BUFFER_MAX));return de.UTF8ToString(de._pe_object_to_string_ext(o,s,a))},de.PeGeogcs.prototype.destroy=function(){this.Delete(),Tu(this),this.ptr=0},de.PeGeogcs.prototype[Symbol.dispose]=function(){this.destroy()},de.PeProjcs.prototype.destroy=function(){this.Delete(),Tu(this),this.ptr=0},de.PeProjcs.prototype[Symbol.dispose]=function(){this.destroy()}}function Tu(t){if(!t)return;const e=de.getClass(t);if(!e)return;const i=de.getCache(e);if(!i)return;const r=de.getPointer(t);r&&delete i[r]}function iP(t,e){const i=[],r=new Array(e);for(let n=0;n<t;n++)i.push(de.ensureInt8(r));return i}function W0(t){return ArrayBuffer.isView(t)?t:Array.isArray(t[0])?t.flat():t}function By(t,e,i,r=!1){if(r)for(let n=0;n<2*e;n++)t[n]=de.getValue(i+n*Float64Array.BYTES_PER_ELEMENT,"double");else{const n=t.length===0;for(let s=0;s<e;s++)n&&(t[s]=new Array(2)),t[s][0]=de.getValue(i,"double"),t[s][1]=de.getValue(i+Float64Array.BYTES_PER_ELEMENT,"double"),i+=2*Float64Array.BYTES_PER_ELEMENT}}(function(t){let e;function i(){t.PE_GTLIST_OPTS_COMMON=de.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,e=de._pe_getPeGTlistExtendedEntrySize()}function r(n,s,o,a,l,c){let d=null;const f=new de.PeInteger(c);try{const y=de.PeGTlistExtended.prototype.getGTlist(n,s,o,a,l,f);if((c=f.val)&&(d=[y],c>1)){const g=de.getPointer(y);for(let b=1;b<c;b++)d.push(de.wrapPointer(g+e*b,de.PeGTlistExtendedEntry))}}finally{de.destroy(f)}return d}t.init=i,t.getGTlist=r})(ZR||(ZR={})),(function(t){function e(i){if(i!=null&&i.length){for(const r of i)Tu(r),r.getEntries().forEach((n=>{Tu(n);const s=n.getGeogtran();Tu(s),s.getParameters().forEach(Tu),[s.getGeogcs1(),s.getGeogcs2()].forEach((o=>{Tu(o);const a=o.getDatum();Tu(a),Tu(a.getSpheroid()),Tu(o.getPrimem()),Tu(o.getUnit())}))}));de.PeGTlistExtendedEntry.prototype.Delete(i[0])}}t.destroy=e})(kj||(kj={})),(function(t){function e(i,r,n,s,o){de.ensureCache.prepare();const a=W0(n),l=n===a,c=de.ensureFloat64(a);let d=0;s&&(d=de.ensureFloat64(s));const f=de._pe_geog_to_geog(de.getPointer(i),r,c,d,o);return f&&By(n,r,c,l),f}t.geogToGeog=e})(Pj||(Pj={})),(function(t){function e(s,o,a,l,c,d,f,y){de.PeLineType.prototype.geodesic_coordinate(s,o,a,l,c,d,f,y)}function i(s,o,a,l,c,d,f,y,g){de.PeLineType.prototype.geodetic_coordinate(s,o,a,l,c,d,f,y,g)}function r(s,o,a,l,c,d,f,y,g,b){de.PeLineType.prototype.geodetic_distance(s,o,a,l,c,d,f,y,g,b)}function n(s,o,a,l,c,d,f,y,g){de.PeLineType.prototype.great_elliptic_distance(s,o,a,l,c,d,f,y,g)}t.geodesicCoordinate=e,t.geodeticCoordinate=i,t.geodeticDistance=r,t.greatEllipticDistance=n})(Aj||(Aj={})),(function(t){function e(o,a){return de.PeMath.prototype.phi_to_eta(o,a)}function i(o,a){return de.PeMath.prototype.eta_to_phi(o,a)}function r(o,a){return de.PeMath.prototype.phi_to_phig(o,a)}function n(o,a,l){return de.PeMath.prototype.q(o,a,l)}function s(o,a){return de.PeMath.prototype.q90(o,a)}t.phiToEta=e,t.etaToPhi=i,t.phiToPhig=r,t.q=n,t.q90=s})(Lj||(Lj={})),(function(t){const e=(c,d,f,y,g,b)=>{let _,x;switch(de.ensureCache.prepare(),c){case"dd":_=de._pe_geog_to_dd,x=Or.PE_DD_MAX;break;case"ddm":_=de._pe_geog_to_ddm,x=Or.PE_DDM_MAX;break;case"dms":_=de._pe_geog_to_dms,x=Or.PE_DMS_MAX}let E=0;d&&(E=de.getPointer(d));const C=W0(y),k=de.ensureFloat64(C),O=iP(f,x),D=_(E,f,k,g,de.ensureInt32(O));if(D)for(let B=0;B<f;B++)b[B]=de.UTF8ToString(O[B]);return D},i=(c,d,f,y,g)=>{let b;switch(de.ensureCache.prepare(),c){case"dd":b=de._pe_dd_to_geog;break;case"ddm":b=de._pe_ddm_to_geog;break;case"dms":b=de._pe_dms_to_geog}let _=0;d&&(_=de.getPointer(d));const x=y.map((O=>de.ensureString(O))),E=de.ensureInt32(x),C=de.ensureFloat64(new Array(2*f)),k=b(_,f,E,C);return k&&By(g,f,C),k};function r(c,d,f,y,g){return e("dms",c,d,f,y,g)}function n(c,d,f,y){return i("dms",c,d,f,y)}function s(c,d,f,y,g){return e("ddm",c,d,f,y,g)}function o(c,d,f,y){return i("ddm",c,d,f,y)}function a(c,d,f,y,g){return e("dd",c,d,f,y,g)}function l(c,d,f,y){return i("dd",c,d,f,y)}t.geogToDms=r,t.dmsToGeog=n,t.geogToDdm=s,t.ddmToGeog=o,t.geogToDd=a,t.ddToGeog=l})(Rj||(Rj={})),(function(t){function e(){t.PE_MGRS_STYLE_NEW=de.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,t.PE_MGRS_STYLE_OLD=de.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,t.PE_MGRS_STYLE_AUTO=de.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,t.PE_MGRS_180_ZONE_1_PLUS=de.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,t.PE_MGRS_ADD_SPACES=de.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}function i(n,s,o,a,l,c,d){de.ensureCache.prepare();let f=0;n&&(f=de.getPointer(n));const y=W0(o),g=de.ensureFloat64(y),b=iP(s,Or.PE_MGRS_MAX),_=de.ensureInt32(b),x=de._pe_geog_to_mgrs_extended(f,s,g,a,l,c,_);if(x)for(let E=0;E<s;E++)d[E]=de.UTF8ToString(b[E]);return x}function r(n,s,o,a,l){de.ensureCache.prepare();let c=0;n&&(c=de.getPointer(n));const d=o.map((b=>de.ensureString(b))),f=de.ensureInt32(d),y=de.ensureFloat64(new Array(2*s)),g=de._pe_mgrs_to_geog_extended(c,s,f,a,y);return g&&By(l,s,y),g}t.init=e,t.geogToMgrsExtended=i,t.mgrsToGeogExtended=r})(JR||(JR={})),(function(t){function e(r,n,s,o,a,l,c){de.ensureCache.prepare();let d=0;r&&(d=de.getPointer(r));const f=W0(s),y=de.ensureFloat64(f),g=iP(n,Or.PE_MGRS_MAX),b=de.ensureInt32(g),_=de._pe_geog_to_usng(d,n,y,o,a,l,b);if(_)for(let x=0;x<n;x++)c[x]=de.UTF8ToString(g[x]);return _}function i(r,n,s,o){de.ensureCache.prepare();let a=0;r&&(a=de.getPointer(r));const l=s.map((y=>de.ensureString(y))),c=de.ensureInt32(l),d=de.ensureFloat64(new Array(2*n)),f=de._pe_usng_to_geog(a,n,c,d);return f&&By(o,n,d),f}t.geogToUsng=e,t.usngToGeog=i})(Oj||(Oj={})),(function(t){function e(){t.PE_UTM_OPTS_NONE=de.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,t.PE_UTM_OPTS_ADD_SPACES=de.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,t.PE_UTM_OPTS_NS=de.PeNotationUtm.prototype.PE_UTM_OPTS_NS}function i(n,s,o,a,l){de.ensureCache.prepare();let c=0;n&&(c=de.getPointer(n));const d=W0(o),f=de.ensureFloat64(d),y=iP(s,Or.PE_UTM_MAX),g=de.ensureInt32(y),b=de._pe_geog_to_utm(c,s,f,a,g);if(b)for(let _=0;_<s;_++)l[_]=de.UTF8ToString(y[_]);return b}function r(n,s,o,a,l){de.ensureCache.prepare();let c=0;n&&(c=de.getPointer(n));const d=o.map((b=>de.ensureString(b))),f=de.ensureInt32(d),y=de.ensureFloat64(new Array(2*s)),g=de._pe_utm_to_geog(c,s,f,a,y);return g&&By(l,s,y),g}t.init=e,t.geogToUtm=i,t.utmToGeog=r})(YR||(YR={})),(function(t){const e=new Map;function i(){t.PE_PCSINFO_OPTION_NONE=de.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,t.PE_PCSINFO_OPTION_DOMAIN=de.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,t.PE_POLE_OUTSIDE_BOUNDARY=de.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,t.PE_POLE_POINT=de.PePCSInfo.prototype.PE_POLE_POINT}function r(n,s=t.PE_PCSINFO_OPTION_DOMAIN){let o=null,a=null;return e.has(n)&&(a=e.get(n),a[s]&&(o=a[s])),o||(o=de.PePCSInfo.prototype.generate(n,s),a||(a=[],e.set(n,a)),a[s]=o),o}t.init=i,t.generate=r})(XR||(XR={})),(function(t){function e(){return de.PeVersion.prototype.version_string()}t.versionString=e})(Fj||(Fj={}));const dCe=Object.freeze(Object.defineProperty({__proto__:null,get PeCSTransformations(){return Cj},get PeDefs(){return Or},get PeDouble(){return Xce},get PeFactory(){return Mj},get PeGCSExtent(){return Kce},get PeGTTransformations(){return Pj},get PeGTlistExtended(){return ZR},get PeGTlistExtendedEntry(){return kj},get PeLineType(){return Aj},get PeMath(){return Lj},get PeNotationDms(){return Rj},get PeNotationMgrs(){return JR},get PeNotationUsng(){return Oj},get PeNotationUtm(){return YR},get PePCSInfo(){return XR},get PeVersion(){return Fj},_init:Qce,get _pe(){return de},isLoaded:CG,isSupported:uCe,load:Yce},Symbol.toStringTag,{value:"Module"}));var rw;(function(t){t[t.CGCS2000=4490]="CGCS2000",t[t.GCSMARS2000=104971]="GCSMARS2000",t[t.GCSMARS2000_SPHERE=104905]="GCSMARS2000_SPHERE",t[t.GCSMOON2000=104903]="GCSMOON2000"})(rw||(rw={}));let v;const U={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5041:0,5042:0,5048:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,9793:0,9794:0,9869:0,9874:0,9875:0,9880:0,9895:0,9943:0,9945:0,9947:0,9967:0,9972:0,9977:0,10160:0,10183:0,10188:0,10194:0,10199:0,10207:0,10212:0,10217:0,10222:0,10227:0,10235:0,10240:0,10250:0,10254:0,10270:0,10275:0,10280:0,10306:0,10329:0,10471:0,10477:0,10481:2,10516:2,10592:0,10594:0,10596:0,10598:0,10601:0,10603:0,10626:0,10632:0,10641:0,10665:0,10674:0,10744:0,10745:0,10759:0,10773:0,10802:0,10820:0,20002:0,20042:0,20050:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22239:0,22240:0,22332:0,22337:0,22338:0,22391:0,22392:0,22639:0,22700:0,22739:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,65061:2,65062:2,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102731:0,102732:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2,103897:1,103978:2,103979:0,103980:2,103981:0};for(v=2e3;v<=2045;v++)U[v]=0;for(v=2056;v<=2065;v++)U[v]=0;for(v=2067;v<=2135;v++)U[v]=0;for(v=2137;v<=2154;v++)U[v]=0;for(v=2161;v<=2170;v++)U[v]=0;for(v=2172;v<=2193;v++)U[v]=0;for(v=2195;v<=2198;v++)U[v]=0;for(v=2200;v<=2203;v++)U[v]=0;for(v=2205;v<=2217;v++)U[v]=0;for(v=2222;v<=2224;v++)U[v]=1;for(v=2225;v<=2250;v++)U[v]=2;for(v=2251;v<=2253;v++)U[v]=1;for(v=2257;v<=2264;v++)U[v]=2;for(v=2274;v<=2279;v++)U[v]=2;for(v=2280;v<=2282;v++)U[v]=1;for(v=2283;v<=2289;v++)U[v]=2;for(v=2290;v<=2292;v++)U[v]=0;for(v=2308;v<=2313;v++)U[v]=0;for(v=2315;v<=2491;v++)U[v]=0;for(v=2494;v<=2866;v++)U[v]=0;for(v=2867;v<=2869;v++)U[v]=1;for(v=2870;v<=2888;v++)U[v]=2;for(v=2891;v<=2895;v++)U[v]=2;for(v=2896;v<=2898;v++)U[v]=1;for(v=2902;v<=2908;v++)U[v]=2;for(v=2915;v<=2920;v++)U[v]=2;for(v=2921;v<=2923;v++)U[v]=1;for(v=2924;v<=2930;v++)U[v]=2;for(v=2931;v<=2962;v++)U[v]=0;for(v=2964;v<=2968;v++)U[v]=2;for(v=2969;v<=2973;v++)U[v]=0;for(v=2975;v<=2991;v++)U[v]=0;for(v=2995;v<=3051;v++)U[v]=0;for(v=3054;v<=3079;v++)U[v]=0;for(v=3081;v<=3088;v++)U[v]=0;for(v=3092;v<=3101;v++)U[v]=0;for(v=3106;v<=3138;v++)U[v]=0;for(v=3146;v<=3151;v++)U[v]=0;for(v=3153;v<=3166;v++)U[v]=0;for(v=3168;v<=3172;v++)U[v]=0;for(v=3174;v<=3203;v++)U[v]=0;for(v=3294;v<=3358;v++)U[v]=0;for(v=3367;v<=3403;v++)U[v]=0;for(v=3408;v<=3416;v++)U[v]=0;for(v=3417;v<=3438;v++)U[v]=2;for(v=3441;v<=3446;v++)U[v]=2;for(v=3447;v<=3450;v++)U[v]=0;for(v=3451;v<=3459;v++)U[v]=2;for(v=3460;v<=3478;v++)U[v]=0;for(v=3554;v<=3559;v++)U[v]=0;for(v=3560;v<=3570;v++)U[v]=2;for(v=3571;v<=3581;v++)U[v]=0;for(v=3594;v<=3597;v++)U[v]=0;for(v=3601;v<=3604;v++)U[v]=0;for(v=3637;v<=3639;v++)U[v]=0;for(v=3665;v<=3667;v++)U[v]=0;for(v=3693;v<=3695;v++)U[v]=0;for(v=3701;v<=3727;v++)U[v]=0;for(v=3728;v<=3739;v++)U[v]=2;for(v=3740;v<=3751;v++)U[v]=0;for(v=3753;v<=3760;v++)U[v]=2;for(v=3761;v<=3773;v++)U[v]=0;for(v=3775;v<=3777;v++)U[v]=0;for(v=3779;v<=3781;v++)U[v]=0;for(v=3783;v<=3785;v++)U[v]=0;for(v=3788;v<=3791;v++)U[v]=0;for(v=3797;v<=3802;v++)U[v]=0;for(v=3814;v<=3816;v++)U[v]=0;for(v=3825;v<=3829;v++)U[v]=0;for(v=3832;v<=3841;v++)U[v]=0;for(v=3844;v<=3852;v++)U[v]=0;for(v=3873;v<=3885;v++)U[v]=0;for(v=3890;v<=3893;v++)U[v]=0;for(v=3907;v<=3912;v++)U[v]=0;for(v=3942;v<=3950;v++)U[v]=0;for(v=3968;v<=3970;v++)U[v]=0;for(v=3973;v<=3976;v++)U[v]=0;for(v=3986;v<=3989;v++)U[v]=0;for(v=3994;v<=3997;v++)U[v]=0;for(v=4048;v<=4051;v++)U[v]=0;for(v=4056;v<=4063;v++)U[v]=0;for(v=4093;v<=4096;v++)U[v]=0;for(v=4390;v<=4398;v++)U[v]=0;for(v=4399;v<=4413;v++)U[v]=2;for(v=4418;v<=4433;v++)U[v]=2;for(v=4455;v<=4457;v++)U[v]=2;for(v=4484;v<=4489;v++)U[v]=0;for(v=4491;v<=4554;v++)U[v]=0;for(v=4568;v<=4589;v++)U[v]=0;for(v=4652;v<=4656;v++)U[v]=0;for(v=4766;v<=4800;v++)U[v]=0;for(v=5014;v<=5016;v++)U[v]=0;for(v=5069;v<=5072;v++)U[v]=0;for(v=5105;v<=5130;v++)U[v]=0;for(v=5167;v<=5188;v++)U[v]=0;for(v=5253;v<=5259;v++)U[v]=0;for(v=5269;v<=5275;v++)U[v]=0;for(v=5292;v<=5311;v++)U[v]=0;for(v=5329;v<=5331;v++)U[v]=0;for(v=5343;v<=5349;v++)U[v]=0;for(v=5355;v<=5357;v++)U[v]=0;for(v=5387;v<=5389;v++)U[v]=0;for(v=5459;v<=5463;v++)U[v]=0;for(v=5479;v<=5482;v++)U[v]=0;for(v=5518;v<=5520;v++)U[v]=0;for(v=5530;v<=5539;v++)U[v]=0;for(v=5550;v<=5552;v++)U[v]=0;for(v=5562;v<=5583;v++)U[v]=0;for(v=5623;v<=5625;v++)U[v]=2;for(v=5631;v<=5639;v++)U[v]=0;for(v=5649;v<=5653;v++)U[v]=0;for(v=5663;v<=5680;v++)U[v]=0;for(v=5682;v<=5685;v++)U[v]=0;for(v=5875;v<=5877;v++)U[v]=0;for(v=5896;v<=5899;v++)U[v]=0;for(v=5921;v<=5940;v++)U[v]=0;for(v=6050;v<=6125;v++)U[v]=0;for(v=6244;v<=6275;v++)U[v]=0;for(v=6328;v<=6348;v++)U[v]=0;for(v=6350;v<=6356;v++)U[v]=0;for(v=6366;v<=6372;v++)U[v]=0;for(v=6381;v<=6387;v++)U[v]=0;for(v=6393;v<=6404;v++)U[v]=0;for(v=6480;v<=6483;v++)U[v]=0;for(v=6511;v<=6514;v++)U[v]=0;for(v=6579;v<=6581;v++)U[v]=0;for(v=6619;v<=6624;v++)U[v]=0;for(v=6625;v<=6627;v++)U[v]=2;for(v=6628;v<=6632;v++)U[v]=0;for(v=6634;v<=6637;v++)U[v]=0;for(v=6669;v<=6692;v++)U[v]=0;for(v=6707;v<=6709;v++)U[v]=0;for(v=6720;v<=6723;v++)U[v]=0;for(v=6732;v<=6738;v++)U[v]=0;for(v=6931;v<=6933;v++)U[v]=0;for(v=6956;v<=6959;v++)U[v]=0;for(v=7005;v<=7007;v++)U[v]=0;for(v=7057;v<=7070;v++)U[v]=2;for(v=7074;v<=7082;v++)U[v]=0;for(v=7109;v<=7118;v++)U[v]=0;for(v=7119;v<=7127;v++)U[v]=1;for(v=7374;v<=7376;v++)U[v]=0;for(v=7528;v<=7586;v++)U[v]=0;for(v=7587;v<=7645;v++)U[v]=2;for(v=7692;v<=7696;v++)U[v]=0;for(v=7755;v<=7787;v++)U[v]=0;for(v=7791;v<=7795;v++)U[v]=0;for(v=7799;v<=7801;v++)U[v]=0;for(v=7803;v<=7805;v++)U[v]=0;for(v=7825;v<=7831;v++)U[v]=0;for(v=7845;v<=7859;v++)U[v]=0;for(v=8013;v<=8032;v++)U[v]=0;for(v=8065;v<=8068;v++)U[v]=1;for(v=8518;v<=8529;v++)U[v]=2;for(v=8533;v<=8536;v++)U[v]=2;for(v=8538;v<=8540;v++)U[v]=2;for(v=8677;v<=8679;v++)U[v]=0;for(v=8836;v<=8840;v++)U[v]=0;for(v=8857;v<=8859;v++)U[v]=0;for(v=8908;v<=8910;v++)U[v]=0;for(v=9154;v<=9159;v++)U[v]=0;for(v=9205;v<=9218;v++)U[v]=0;for(v=9271;v<=9273;v++)U[v]=0;for(v=9295;v<=9297;v++)U[v]=0;for(v=9356;v<=9360;v++)U[v]=0;for(v=9404;v<=9407;v++)U[v]=0;for(v=9476;v<=9482;v++)U[v]=0;for(v=9487;v<=9494;v++)U[v]=0;for(v=9697;v<=9699;v++)U[v]=0;for(v=9821;v<=9865;v++)U[v]=0;for(v=10285;v<=10291;v++)U[v]=0;for(v=10314;v<=10317;v++)U[v]=0;for(v=10448;v<=10465;v++)U[v]=0;for(v=10726;v<=10729;v++)U[v]=0;for(v=10731;v<=10733;v++)U[v]=0;for(v=11114;v<=11118;v++)U[v]=0;for(v=20004;v<=20032;v++)U[v]=0;for(v=20047;v<=20049;v++)U[v]=0;for(v=20062;v<=20092;v++)U[v]=0;for(v=20135;v<=20138;v++)U[v]=0;for(v=20248;v<=20258;v++)U[v]=0;for(v=20348;v<=20358;v++)U[v]=0;for(v=20436;v<=20440;v++)U[v]=0;for(v=20822;v<=20824;v++)U[v]=0;for(v=20904;v<=20932;v++)U[v]=0;for(v=20934;v<=20936;v++)U[v]=0;for(v=21004;v<=21032;v++)U[v]=0;for(v=21035;v<=21037;v++)U[v]=0;for(v=21095;v<=21097;v++)U[v]=0;for(v=21148;v<=21150;v++)U[v]=0;for(v=21207;v<=21264;v++)U[v]=0;for(v=21307;v<=21364;v++)U[v]=0;for(v=21413;v<=21423;v++)U[v]=0;for(v=21453;v<=21463;v++)U[v]=0;for(v=21473;v<=21483;v++)U[v]=0;for(v=21780;v<=21782;v++)U[v]=0;for(v=21891;v<=21894;v++)U[v]=0;for(v=21896;v<=21899;v++)U[v]=0;for(v=22171;v<=22177;v++)U[v]=0;for(v=22181;v<=22187;v++)U[v]=0;for(v=22191;v<=22197;v++)U[v]=0;for(v=22207;v<=22222;v++)U[v]=0;for(v=22229;v<=22232;v++)U[v]=0;for(v=22234;v<=22236;v++)U[v]=0;for(v=22243;v<=22250;v++)U[v]=0;for(v=22262;v<=22265;v++)U[v]=0;for(v=22307;v<=22322;v++)U[v]=0;for(v=22348;v<=22357;v++)U[v]=0;for(v=22407;v<=22422;v++)U[v]=0;for(v=22462;v<=22465;v++)U[v]=0;for(v=22521;v<=22525;v++)U[v]=0;for(v=22607;v<=22622;v++)U[v]=0;for(v=22641;v<=22646;v++)U[v]=0;for(v=22648;v<=22657;v++)U[v]=0;for(v=22707;v<=22722;v++)U[v]=0;for(v=22762;v<=22765;v++)U[v]=0;for(v=22807;v<=22822;v++)U[v]=0;for(v=22991;v<=22994;v++)U[v]=0;for(v=23028;v<=23038;v++)U[v]=0;for(v=23301;v<=23333;v++)U[v]=2;for(v=23830;v<=23853;v++)U[v]=0;for(v=23866;v<=23872;v++)U[v]=0;for(v=23877;v<=23884;v++)U[v]=0;for(v=23886;v<=23894;v++)U[v]=0;for(v=23946;v<=23948;v++)U[v]=0;for(v=24311;v<=24313;v++)U[v]=0;for(v=24342;v<=24347;v++)U[v]=0;for(v=24370;v<=24374;v++)U[v]=10;for(v=24375;v<=24381;v++)U[v]=0;for(v=24718;v<=24721;v++)U[v]=0;for(v=24817;v<=24821;v++)U[v]=0;for(v=24877;v<=24882;v++)U[v]=0;for(v=24891;v<=24893;v++)U[v]=0;for(v=25391;v<=25395;v++)U[v]=0;for(v=25828;v<=25838;v++)U[v]=0;for(v=26191;v<=26195;v++)U[v]=0;for(v=26391;v<=26393;v++)U[v]=0;for(v=26701;v<=26722;v++)U[v]=0;for(v=26729;v<=26799;v++)U[v]=2;for(v=26801;v<=26803;v++)U[v]=2;for(v=26811;v<=26813;v++)U[v]=2;for(v=26847;v<=26870;v++)U[v]=2;for(v=26891;v<=26899;v++)U[v]=0;for(v=26901;v<=26923;v++)U[v]=0;for(v=26929;v<=26946;v++)U[v]=0;for(v=26948;v<=26998;v++)U[v]=0;for(v=27037;v<=27040;v++)U[v]=0;for(v=27205;v<=27232;v++)U[v]=0;for(v=27258;v<=27260;v++)U[v]=0;for(v=27391;v<=27398;v++)U[v]=0;for(v=27561;v<=27564;v++)U[v]=0;for(v=27571;v<=27574;v++)U[v]=0;for(v=27581;v<=27584;v++)U[v]=0;for(v=27591;v<=27594;v++)U[v]=0;for(v=27700;v<=27707;v++)U[v]=0;for(v=28191;v<=28193;v++)U[v]=0;for(v=28348;v<=28358;v++)U[v]=0;for(v=28402;v<=28432;v++)U[v]=0;for(v=28462;v<=28492;v++)U[v]=0;for(v=29118;v<=29122;v++)U[v]=0;for(v=29168;v<=29172;v++)U[v]=0;for(v=29177;v<=29185;v++)U[v]=0;for(v=29187;v<=29195;v++)U[v]=0;for(v=29900;v<=29903;v++)U[v]=0;for(v=30161;v<=30179;v++)U[v]=0;for(v=30491;v<=30494;v++)U[v]=0;for(v=30729;v<=30732;v++)U[v]=0;for(v=31251;v<=31259;v++)U[v]=0;for(v=31265;v<=31268;v++)U[v]=0;for(v=31275;v<=31279;v++)U[v]=0;for(v=31281;v<=31297;v++)U[v]=0;for(v=31461;v<=31469;v++)U[v]=0;for(v=31491;v<=31495;v++)U[v]=0;for(v=31917;v<=31922;v++)U[v]=0;for(v=31965;v<=32e3;v++)U[v]=0;for(v=32001;v<=32003;v++)U[v]=2;for(v=32005;v<=32031;v++)U[v]=2;for(v=32033;v<=32060;v++)U[v]=2;for(v=32064;v<=32067;v++)U[v]=2;for(v=32074;v<=32077;v++)U[v]=2;for(v=32081;v<=32086;v++)U[v]=0;for(v=32107;v<=32130;v++)U[v]=0;for(v=32133;v<=32159;v++)U[v]=0;for(v=32164;v<=32167;v++)U[v]=2;for(v=32180;v<=32199;v++)U[v]=0;for(v=32201;v<=32260;v++)U[v]=0;for(v=32301;v<=32360;v++)U[v]=0;for(v=32401;v<=32460;v++)U[v]=0;for(v=32501;v<=32560;v++)U[v]=0;for(v=32601;v<=32662;v++)U[v]=0;for(v=32664;v<=32667;v++)U[v]=2;for(v=32701;v<=32761;v++)U[v]=0;for(v=53001;v<=53004;v++)U[v]=0;for(v=53008;v<=53019;v++)U[v]=0;for(v=53021;v<=53032;v++)U[v]=0;for(v=53034;v<=53037;v++)U[v]=0;for(v=53042;v<=53046;v++)U[v]=0;for(v=53074;v<=53080;v++)U[v]=0;for(v=54001;v<=54004;v++)U[v]=0;for(v=54008;v<=54019;v++)U[v]=0;for(v=54021;v<=54032;v++)U[v]=0;for(v=54034;v<=54037;v++)U[v]=0;for(v=54042;v<=54046;v++)U[v]=0;for(v=54048;v<=54053;v++)U[v]=0;for(v=54074;v<=54080;v++)U[v]=0;for(v=54090;v<=54096;v++)U[v]=0;for(v=54098;v<=54101;v++)U[v]=0;for(v=65161;v<=65163;v++)U[v]=0;for(v=102001;v<=102040;v++)U[v]=0;for(v=102042;v<=102063;v++)U[v]=0;for(v=102065;v<=102067;v++)U[v]=0;for(v=102070;v<=102117;v++)U[v]=0;for(v=102122;v<=102216;v++)U[v]=0;for(v=102221;v<=102377;v++)U[v]=0;for(v=102382;v<=102388;v++)U[v]=0;for(v=102389;v<=102398;v++)U[v]=2;for(v=102399;v<=102444;v++)U[v]=0;for(v=102445;v<=102447;v++)U[v]=2;for(v=102448;v<=102458;v++)U[v]=0;for(v=102459;v<=102468;v++)U[v]=2;for(v=102469;v<=102499;v++)U[v]=0;for(v=102500;v<=102519;v++)U[v]=1;for(v=102520;v<=102524;v++)U[v]=0;for(v=102525;v<=102529;v++)U[v]=2;for(v=102530;v<=102588;v++)U[v]=0;for(v=102590;v<=102598;v++)U[v]=0;for(v=102601;v<=102603;v++)U[v]=0;for(v=102605;v<=102628;v++)U[v]=0;for(v=102629;v<=102646;v++)U[v]=2;for(v=102648;v<=102700;v++)U[v]=2;for(v=102701;v<=102703;v++)U[v]=0;for(v=102707;v<=102730;v++)U[v]=2;for(v=102733;v<=102758;v++)U[v]=2;for(v=102767;v<=102900;v++)U[v]=0;for(v=102901;v<=102933;v++)U[v]=2;for(v=102934;v<=102950;v++)U[v]=13;for(v=102951;v<=102963;v++)U[v]=0;for(v=102965;v<=102969;v++)U[v]=0;for(v=102971;v<=102973;v++)U[v]=0;for(v=102975;v<=102989;v++)U[v]=0;for(v=102990;v<=102992;v++)U[v]=1;for(v=102997;v<=103002;v++)U[v]=0;for(v=103003;v<=103008;v++)U[v]=2;for(v=103009;v<=103011;v++)U[v]=0;for(v=103012;v<=103014;v++)U[v]=2;for(v=103019;v<=103021;v++)U[v]=0;for(v=103022;v<=103024;v++)U[v]=2;for(v=103029;v<=103031;v++)U[v]=0;for(v=103032;v<=103034;v++)U[v]=2;for(v=103065;v<=103068;v++)U[v]=0;for(v=103074;v<=103076;v++)U[v]=0;for(v=103077;v<=103079;v++)U[v]=1;for(v=103080;v<=103082;v++)U[v]=0;for(v=103083;v<=103085;v++)U[v]=2;for(v=103090;v<=103093;v++)U[v]=0;for(v=103097;v<=103099;v++)U[v]=0;for(v=103100;v<=103102;v++)U[v]=2;for(v=103107;v<=103109;v++)U[v]=0;for(v=103110;v<=103112;v++)U[v]=2;for(v=103113;v<=103116;v++)U[v]=0;for(v=103117;v<=103120;v++)U[v]=2;for(v=103153;v<=103157;v++)U[v]=0;for(v=103158;v<=103162;v++)U[v]=2;for(v=103163;v<=103165;v++)U[v]=0;for(v=103166;v<=103168;v++)U[v]=1;for(v=103169;v<=103171;v++)U[v]=2;for(v=103186;v<=103188;v++)U[v]=0;for(v=103189;v<=103191;v++)U[v]=2;for(v=103192;v<=103195;v++)U[v]=0;for(v=103196;v<=103199;v++)U[v]=2;for(v=103200;v<=103224;v++)U[v]=0;for(v=103225;v<=103227;v++)U[v]=1;for(v=103232;v<=103237;v++)U[v]=0;for(v=103238;v<=103243;v++)U[v]=2;for(v=103244;v<=103246;v++)U[v]=0;for(v=103247;v<=103249;v++)U[v]=2;for(v=103254;v<=103256;v++)U[v]=0;for(v=103257;v<=103259;v++)U[v]=2;for(v=103264;v<=103266;v++)U[v]=0;for(v=103267;v<=103269;v++)U[v]=2;for(v=103300;v<=103375;v++)U[v]=0;for(v=103381;v<=103383;v++)U[v]=0;for(v=103384;v<=103386;v++)U[v]=1;for(v=103387;v<=103389;v++)U[v]=0;for(v=103390;v<=103392;v++)U[v]=2;for(v=103397;v<=103399;v++)U[v]=0;for(v=103400;v<=103471;v++)U[v]=2;for(v=103476;v<=103478;v++)U[v]=0;for(v=103479;v<=103481;v++)U[v]=2;for(v=103486;v<=103488;v++)U[v]=0;for(v=103489;v<=103491;v++)U[v]=2;for(v=103492;v<=103495;v++)U[v]=0;for(v=103496;v<=103499;v++)U[v]=2;for(v=103528;v<=103543;v++)U[v]=0;for(v=103544;v<=103548;v++)U[v]=2;for(v=103549;v<=103551;v++)U[v]=0;for(v=103552;v<=103554;v++)U[v]=1;for(v=103555;v<=103557;v++)U[v]=2;for(v=103558;v<=103560;v++)U[v]=0;for(v=103571;v<=103573;v++)U[v]=0;for(v=103574;v<=103576;v++)U[v]=2;for(v=103577;v<=103580;v++)U[v]=0;for(v=103581;v<=103583;v++)U[v]=2;for(v=103595;v<=103694;v++)U[v]=0;for(v=103696;v<=103699;v++)U[v]=0;for(v=103700;v<=103793;v++)U[v]=2;for(v=103794;v<=103890;v++)U[v]=0;for(v=103891;v<=103896;v++)U[v]=2;for(v=103900;v<=103971;v++)U[v]=2;for(v=103972;v<=103977;v++)U[v]=0;for(v=112e3;v<=112101;v++)U[v]=0;const eue=[102100,102113,3857,3785,900913],hCe=[104905,104971],pCe=[4326,...eue,...hCe],WC=[-20037508342788905e-9,20037508342788905e-9],Nj=[-20037508342787e-6,20037508342787e-6],pz={wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:WC,origin:Nj,dx:1e-5},tue={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:WC,origin:Nj,dx:1e-5},102100:pz,3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:WC,origin:Nj,dx:1e-5},3857:pz,4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},900913:pz};function es(t,e){if(t===e)return!0;if(t==null||e==null)return!1;const i=t.wkid,r=e.wkid;if(i!=null||r!=null){if(i===r||dp(t)&&dp(e))return!0;const o=t.latestWkid;if(o!=null&&r===o)return!0;const a=e.latestWkid;return a!=null&&i===a}let n,s;return t.wkt2&&e.wkt2?(n=t.wkt2,s=e.wkt2):t.wkt&&e.wkt&&(n=t.wkt,s=e.wkt),!(!n||!s)&&n.toUpperCase()===s.toUpperCase()}function aa(t){const e=t==null?void 0:t.wkid;return e!=null&&e>=2e3&&tue[e]||null}function JS(t){if(!t)return;const{wkid:e,vcsWkid:i}=t;if(e)return i?JSON.stringify({wkid:e,vcsWkid:i}):String(e);const r=t.wkt||t.wkt2;return JSON.stringify(r?i?{wkt:r,vcsWkid:i}:{wkt:r}:{})}function L$(t){if(!kl(t))return!1;const{wkid:e}=t;if(e)return U[e]==null;const i=t.wkt2||t.wkt;return!!i&&/^\s*(?:GEOGCS|GEOGCRS|GEOGRAPHICCRS)/i.test(i)}function fCe(t){return!(iue(t)||rue(t))}function nw(t){return(t==null?void 0:t.wkid)===4326}function Xht(t){return/^\s*(?:GEOD|GEODETIC|GEOG|GEOGRAPHIC|PROJ|PROJECTED|VERT|VERTICAL|ENG|ENGINEERING|PARAMETRIC|TIME|DERIVEDPROJ|COMPOUND|BOUND)CRS/i.test(t)}function XY(t){return(t==null?void 0:t.wkid)===rw.CGCS2000}function dp(t){const e=t==null?void 0:t.wkid;return e!=null&&e>=2e3&&eue.includes(e)}function mCe(t){return(t==null?void 0:t.wkid)===32662}function GF(t){return t===rw.GCSMARS2000||t===rw.GCSMARS2000_SPHERE}function iue(t){return GF(t==null?void 0:t.wkid)}function qF(t){return t===rw.GCSMOON2000}function rue(t){return qF(t==null?void 0:t.wkid)}function yCe(t){const e=t==null?void 0:t.wkid;return e!=null&&e>=2e3&&pCe.includes(e)}function kl(t){if(t==null)return!1;const e=t.wkid;return e!=null&&e>=2e3||t.wkt2!=null||t.wkt!=null}const nue={wkid:4326,wkt:Ja(tue[4326].wkTemplate,{Central_Meridian:"0.0"})},sue={wkid:102100,latestWkid:3857},gCe={wkid:32662};function MG(t){return{wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${t.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`}}const vCe=MG(tn),kG=MG(Qh),PG=MG(kg),bCe={wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${tn.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`},wCe=kG.wkt.toUpperCase(),_Ce=PG.wkt.toUpperCase();function xCe(t){if(t!=null&&kl(t)){const e=t.wkid,i=t.wkt2??t.wkt;if(GF(e))return Qh;const r=i==null?void 0:i.toUpperCase();if(i&&r===wCe)return Qh;if(qF(e)||r&&r===_Ce)return kg}return tn}function Kht(t){return GF(t)?Qh:qF(t)?kg:tn}function KR(t){return es(t,vCe)}function Ag(t){return KR(t)||es(t,kG)||es(t,PG)}const oue=39.37,SCe=tn.radius*Math.PI/200,aue=/(?:LENGTH)?UNIT\[([^\]]+)]]$/i,YS=U,lue=/UNIT\[([^\]]+)]/i,$Ce=new Set([4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104025,104026,104139,104140]),TCe=is()({millimeter:"millimeters",centimeter:"centimeters",meter:"meters",meter_german:"german-meters",kilometer:"kilometers",decimeter:"decimeters",micrometer:"micrometers",nanometer:"nanometers","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",fathom:"fathoms",nautical_mile:"nautical-miles",chain_us:"us-chains",link_us:"us-links",mile_us:"us-miles",yard_clarke:"clarke-yards",chain_clarke:"clarke-chains",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",link_sears:"sears-links",yard_benoit_1895_a:"benoit-1895-a-yards",foot_benoit_1895_a:"benoit-1895-a-feet",chain_benoit_1895_a:"benoit-1895-a-chains",link_benoit_1895_a:"benoit-1895-a-links",yard_benoit_1895_b:"benoit-1895-b-yards",foot_benoit_1895_b:"benoit-1895-b-feet",chain_benoit_1895_b:"benoit-1895-b-chains",link_benoit_1895_b:"benoit-1895-b-links",foot_1865:"1865-feet",foot_indian:"indian-feet",foot_indian_1937:"indian-1937-feet",foot_indian_1962:"indian-1962-feet",foot_indian_1975:"indian-1975-feet",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",yard_indian_1962:"indian-1962-yards",yard_indian_1975:"indian-1975-yards",statute_mile:"statute-miles",foot_gold_coast:"gold-coast-feet",foot_british_1936:"british-1936-feet",yard:"yards",chain:"chains",link:"links",yard_sears_1922_truncated:"sears-1922-truncated-yards",foot_sears_1922_truncated:"sears-1922-truncated-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains",link_sears_1922_truncated:"sears-1922-truncated-links",yard_us:"us-yards",inch:"inches",inch_us:"us-inches",rod:"rods",rod_us:"us-rods",nautical_mile_us:"us-nautical-miles",nautical_mile_uk:"uk-nautical-miles",smoot:"smoots",vara_tx:"tx-vara",point:"points"}),nu=t=>t*t,qm=t=>t*t*t,ZC={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},meters:{inBaseUnits:1},feet:{inBaseUnits:.3048},"us-feet":{inBaseUnits:.3048006096012192},"clarke-feet":{inBaseUnits:.3047972654},fathoms:{inBaseUnits:1.8288},"nautical-miles":{inBaseUnits:1852},"german-meters":{inBaseUnits:1.0000135965},"us-chains":{inBaseUnits:20.11684023368047},"us-links":{inBaseUnits:.2011684023368047},"us-miles":{inBaseUnits:1609.347218694438},kilometers:{inBaseUnits:1e3},"clarke-yards":{inBaseUnits:.9143917962},"clarke-chains":{inBaseUnits:20.1166195164},"clarke-links":{inBaseUnits:.201166195164},"sears-yards":{inBaseUnits:.9143984146160287},"sears-feet":{inBaseUnits:.3047994715386762},"sears-chains":{inBaseUnits:20.11676512155263},"sears-links":{inBaseUnits:.2011676512155263},"benoit-1895-a-yards":{inBaseUnits:.9143992},"benoit-1895-a-feet":{inBaseUnits:.3047997333333333},"benoit-1895-a-chains":{inBaseUnits:20.1167824},"benoit-1895-a-links":{inBaseUnits:.201167824},"benoit-1895-b-yards":{inBaseUnits:.9143992042898124},"benoit-1895-b-feet":{inBaseUnits:.3047997347632708},"benoit-1895-b-chains":{inBaseUnits:20.11678249437587},"benoit-1895-b-links":{inBaseUnits:.2011678249437587},"1865-feet":{inBaseUnits:.3048008333333334},"indian-feet":{inBaseUnits:.3047995102481469},"indian-1937-feet":{inBaseUnits:.30479841},"indian-1962-feet":{inBaseUnits:.3047996},"indian-1975-feet":{inBaseUnits:.3047995},"indian-yards":{inBaseUnits:.9143985307444408},"indian-1937-yards":{inBaseUnits:.91439523},"indian-1962-yards":{inBaseUnits:.9143988},"indian-1975-yards":{inBaseUnits:.9143985},miles:{inBaseUnits:1609.344},"statute-miles":{inBaseUnits:1609.344},"gold-coast-feet":{inBaseUnits:.3047997101815088},"british-1936-feet":{inBaseUnits:.3048007491},yards:{inBaseUnits:.9144},chains:{inBaseUnits:20.1168},links:{inBaseUnits:.201168},"sears-1922-truncated-yards":{inBaseUnits:.914398},"sears-1922-truncated-feet":{inBaseUnits:.3047993333333334},"sears-1922-truncated-chains":{inBaseUnits:20.116756},"sears-1922-truncated-links":{inBaseUnits:.20116756},"us-yards":{inBaseUnits:.9144018288036576},decimeters:{inBaseUnits:.1},inches:{inBaseUnits:.0254},"us-inches":{inBaseUnits:.0254000508001016},rods:{inBaseUnits:5.0292},"us-rods":{inBaseUnits:5.029210058420118},"us-nautical-miles":{inBaseUnits:1853.248},"uk-nautical-miles":{inBaseUnits:1853.184},smoots:{inBaseUnits:1.7018},"tx-vara":{inBaseUnits:.8466683600033867},points:{inBaseUnits:.0003527777777777778},micrometers:{inBaseUnits:1e-6},nanometers:{inBaseUnits:1e-9},"50-kilometers":{inBaseUnits:5e4},"150-kilometers":{inBaseUnits:15e4}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:nu(.001)},"square-centimeters":{inBaseUnits:nu(.01)},"square-decimeters":{inBaseUnits:nu(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:nu(1e3)},"square-inches":{inBaseUnits:nu(.0254)},"square-feet":{inBaseUnits:nu(.3048)},"square-yards":{inBaseUnits:nu(.9144)},"square-miles":{inBaseUnits:nu(1609.344)},"square-nautical-miles":{inBaseUnits:nu(1852)},"square-us-feet":{inBaseUnits:nu(1200/3937)},acres:{inBaseUnits:.0015625*nu(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*qm(.001)},"cubic-centimeters":{inBaseUnits:1e3*qm(.01)},"cubic-decimeters":{inBaseUnits:1e3*qm(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*qm(1e3)},"cubic-inches":{inBaseUnits:1e3*qm(.0254)},"cubic-feet":{inBaseUnits:1e3*qm(.3048)},"cubic-yards":{inBaseUnits:1e3*qm(.9144)},"cubic-miles":{inBaseUnits:1e3*qm(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},ECe=(()=>{const t={};for(const e in ZC)for(const i in ZC[e].units)t[i]=e;return t})();function ICe(t,e,i){return t*ZC[i].units[e].inBaseUnits}function CCe(t,e,i){return t/ZC[i].units[e].inBaseUnits}const MCe=["inches","feet","yards","miles","nautical-miles","us-feet","millimeters","centimeters","decimeters","meters","kilometers"],kCe=["metric","imperial"],cue=[...kCe,...MCe],PCe=new Map([["meters","square-meters"],["feet","square-feet"],["us-feet","square-us-feet"]]);function sw(t){const e=ECe[t];if(!e)throw new Error("unknown type");return e}function KY(t,e=null){return e=e||sw(t),ZC[e].baseUnit===t}function Ii(t,e,i){if(e===i)return t;const r=sw(e);if(r!==sw(i))throw new Error("incompatible units");const n=KY(e,r)?t:ICe(t,e,r);return KY(i,r)?n:CCe(n,i,r)}function Qht(t,e,i,r=!1){if(!r&&L$(e))throw new Error("Unable to convert from an angular unit to a linear unit.");const n=vw(e);return n!==i&&(t=n?Ii(t,n,i):Ii(t*=Dc(e),"meters",i)),t}function ept(t,e,i,r=!1){if(!r&&L$(i))throw new Error("Unable to convert from a linear unit to an angular unit.");const n=vw(i);return e!==n&&(t=n?Ii(t,e,n):Ii(t,e,"meters")/Dc(i)),t}function ACe(t){switch(t){case"metric":return"meters";case"imperial":return"feet";default:return t}}function tpt(t){return ACe(t)}function ipt(t){switch(t){case"metric":return"square-meters";case"imperial":return"square-feet";default:return t}}function uue(t,e){const i=Ii(t,e,"meters");return Math.abs(i)<3e3?"meters":"kilometers"}function due(t,e){const i=Ii(t,e,"meters");return Math.abs(i)<1e5?"meters":"kilometers"}function hue(t,e){const i=Ii(t,e,"feet");return Math.abs(i)<1e3?"feet":"miles"}function pue(t,e){const i=Ii(t,e,"feet");return Math.abs(i)<1e5?"feet":"miles"}function LCe(t,e){const i=Ii(t,e,"square-meters");return Math.abs(i)<3e6?"square-meters":"square-kilometers"}function RCe(t,e){const i=Ii(t,e,"square-feet");return Math.abs(i)<1e6?"square-feet":"square-miles"}function OCe(t,e,i){return Ii(t,e,"meters")/(i*Math.PI/180)}function AG(t){return TCe.fromJSON(t.toLowerCase())||null}function XS(t){if(t!=null&&!fCe(t))return 1;const e=Dc(t);return e>1e5?1:e}function fue(t){return Dc(t)>=xCe(t).metersPerDegree?"meters":vw(t)}function Dc(t,e=tn.metersPerDegree){return FCe(t,!0)??e}function FCe(t,e=!1){const i=(t==null?void 0:t.wkid)??null,r=(t==null?void 0:t.wkt2)??(t==null?void 0:t.wkt)??null;let n=null;if(i){if(GF(i))return Qh.metersPerDegree;if(qF(i))return kg.metersPerDegree;n=YS.values[YS[i]],!n&&e&&$Ce.has(i)&&(n=SCe)}else r&&(gue(r)?n=QY(aue.exec(r),n):yue(r)&&(n=QY(lue.exec(r),n)));return n}function rpt(t){return L$(t)?1:Dc(t)}function QY(t,e){return t!=null&&t[1]?mue(t[1]):e}function mue(t){return parseFloat(t.split(",")[1])}function vw(t){const e=(t==null?void 0:t.wkid)??null,i=(t==null?void 0:t.wkt2)??(t==null?void 0:t.wkt)??null;let r=null;if(e)r=YS.units[YS[e]];else if(i){const n=gue(i)?aue:yue(i)?lue:null;if(n){const s=n.exec(i);s!=null&&s[1]&&(r=DCe(s[1]))}}return r!=null?AG(r):null}function npt(t){const e=vw(t);return e!=null&&cue.includes(e)?e:null}function spt(t){const e=fue(t);return e!=null&&cue.includes(e)?e:null}function opt(t){const e=vw(t);return e==null?null:PCe.get(e)}function yue(t){return/^GEOCCS/i.test(t)}function gue(t){return/^\s*(?:PROJCS|PROJCRS|PROJECTEDCRS)/i.test(t)}const NCe=1e-7;function DCe(t){const e=/[\\"']{1}([^\\"']+)/.exec(t);let i=e==null?void 0:e[1];if(!i||!AG(i)){const r=mue(t);i=null;const n=YS.values;for(let s=0;s<n.length;++s)if(Math.abs(r-n[s])<NCe){i=YS.units[s];break}}return i}function apt(t){const e=vw(t);if(e==null)return null;switch(e){case"feet":case"us-feet":case"clarke-feet":case"fathoms":case"nautical-miles":case"us-chains":case"us-links":case"us-miles":case"clarke-yards":case"clarke-chains":case"clarke-links":case"sears-yards":case"sears-feet":case"sears-chains":case"sears-links":case"benoit-1895-a-yards":case"benoit-1895-a-feet":case"benoit-1895-a-chains":case"benoit-1895-a-links":case"benoit-1895-b-yards":case"benoit-1895-b-feet":case"benoit-1895-b-chains":case"benoit-1895-b-links":case"1865-feet":case"indian-feet":case"indian-1937-feet":case"indian-1962-feet":case"indian-1975-feet":case"indian-yards":case"indian-1937-yards":case"indian-1962-yards":case"indian-1975-yards":case"statute-miles":case"gold-coast-feet":case"british-1936-feet":case"yards":case"chains":case"links":case"sears-1922-truncated-yards":case"sears-1922-truncated-feet":case"sears-1922-truncated-chains":case"sears-1922-truncated-links":case"us-yards":case"inches":case"us-inches":case"rods":case"us-rods":case"us-nautical-miles":case"uk-nautical-miles":case"smoots":case"tx-vara":case"points":return"imperial";case"millimeters":case"centimeters":case"meters":case"german-meters":case"kilometers":case"decimeters":case"micrometers":case"nanometers":case"50-kilometers":case"150-kilometers":return"metric"}return null}const zCe={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},VCe={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},jCe={esriDUDecimalDegrees:"degrees",esriDURadians:"radians"},UCe=is()(zCe),BCe=is()(VCe),lpt=is()(jCe);var Rd,bh;let et=(bh=class extends ve{static fromJSON(e){if(!e)return null;if((e==null?void 0:e.wkid)===102100)return Rd.WebMercator;if((e==null?void 0:e.wkid)===4326)return Rd.WGS84;const i=new Rd;return i.read(e),i}constructor(e){super(e),this.latestWkid=null,this.wkid=null,this.wkt=null,this.wkt2=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}normalizeCtorArgs(e){return e&&typeof e=="object"?e:{[typeof e=="string"?"wkt":"wkid"]:e}}get isWGS84(){return nw(this)}get isWebMercator(){return dp(this)}get isGeographic(){return L$(this)}get isWrappable(){return yCe(this)}get metersPerUnit(){return Dc(this)}get unit(){return vw(this)||(this.isGeographic?"degrees":null)}writeWkt(e,i){this.wkid||(i.wkt=e)}clone(){if(this===Rd.WGS84)return new Rd(nue);if(this===Rd.WebMercator)return new Rd(sue);const e=new Rd;return this.wkid!=null?(e.wkid=this.wkid,this.latestWkid!=null&&(e.latestWkid=this.latestWkid),this.vcsWkid!=null&&(e.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(e.latestVcsWkid=this.latestVcsWkid)):(this.wkt!=null&&(e.wkt=this.wkt),this.wkt2!=null&&(e.wkt2=this.wkt2)),this.imageCoordinateSystem&&(e.imageCoordinateSystem=se(this.imageCoordinateSystem)),e}equals(e){if(e==null)return!1;if(this.imageCoordinateSystem||e.imageCoordinateSystem){if(this.imageCoordinateSystem==null||e.imageCoordinateSystem==null)return!1;const{id:i,referenceServiceName:r}=e.imageCoordinateSystem,{geodataXform:n}=e.imageCoordinateSystem,s=this.imageCoordinateSystem;return i==null||n?JSON.stringify(s)===JSON.stringify(e.imageCoordinateSystem):r?s.id===i&&s.referenceServiceName===r:s.id===i}return es(this,e)}toJSON(e){return this.write(void 0,e)}},Rd=bh,bh.GCS_NAD_1927=null,bh.WGS84=null,bh.WebMercator=null,bh.PlateCarree=null,bh);u([h({readOnly:!0})],et.prototype,"isWGS84",null),u([h({readOnly:!0})],et.prototype,"isWebMercator",null),u([h({readOnly:!0})],et.prototype,"isGeographic",null),u([h({readOnly:!0})],et.prototype,"isWrappable",null),u([h({type:si,json:{write:!0}})],et.prototype,"latestWkid",void 0),u([h({readOnly:!0})],et.prototype,"metersPerUnit",null),u([h({readOnly:!0})],et.prototype,"unit",null),u([h({type:si,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt==null}}}}}}})],et.prototype,"wkid",void 0),u([h({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid==null}}}}}}})],et.prototype,"wkt",void 0),u([Ve("wkt"),Ve("web-scene","wkt")],et.prototype,"writeWkt",null),u([h({type:String,json:{write:!1}})],et.prototype,"wkt2",void 0),u([h({type:si,json:{write:!0}})],et.prototype,"vcsWkid",void 0),u([h({type:si,json:{write:!0}})],et.prototype,"latestVcsWkid",void 0),u([h()],et.prototype,"imageCoordinateSystem",void 0),et=Rd=u([V("esri.geometry.SpatialReference")],et),et.prototype.toJSON.isDefaultToJSON=!0,et.GCS_NAD_1927=tt.freeze(new et({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'})),et.WGS84=tt.freeze(new et(nue)),et.WebMercator=tt.freeze(new et(sue)),et.PlateCarree=tt.freeze(new et(gCe));let Cs=class extends ve{constructor(...e){super(...e),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=et.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(e,i){if(e instanceof et)return e;if(e!=null){const r=new et;return r.read(e,i),r}return e}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(e){return this.cache[e]}setCacheValue(e,i){this.cache[e]=i}};u([h()],Cs.prototype,"type",void 0),u([h({readOnly:!0})],Cs.prototype,"cache",null),u([h({readOnly:!0})],Cs.prototype,"extent",null),u([h({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Cs.prototype,"hasM",void 0),u([h({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Cs.prototype,"hasZ",void 0),u([h({type:et,json:{write:!0},value:et.WGS84})],Cs.prototype,"spatialReference",void 0),u([De("spatialReference")],Cs.prototype,"readSpatialReference",null),Cs=u([V("esri.geometry.Geometry")],Cs);function KS(t){if(t&&typeof t=="object"&&"type"in t&&t.type==="mesh")throw new ie("internal:mesh","Mesh geometries are not supported for this operation")}function GCe(t){t.forEach(KS)}const qCe=57.29577951308232,HCe=.017453292519943;function eX(t){return t*qCe}function tX(t){return t*HCe}function upt(t){return Math.PI/2-2*Math.atan(Math.exp(-t/tn.radius))}function Dj(t){return t.wkid!=null||t.wkt!=null}const fz=[0,0];function QR(t,e,i,r,n){const s=t,o=n;if(o.spatialReference=i,"x"in s&&"x"in o)[o.x,o.y]=e(s.x,s.y,fz,r);else if("xmin"in s&&"xmin"in o)[o.xmin,o.ymin]=e(s.xmin,s.ymin,fz,r),[o.xmax,o.ymax]=e(s.xmax,s.ymax,fz,r);else if("paths"in s&&"paths"in o||"rings"in s&&"rings"in o){const a="paths"in s?s.paths:s.rings,l=[];let c;for(let d=0;d<a.length;d++){const f=a[d];c=[],l.push(c);for(let y=0;y<f.length;y++)c.push(e(f[y][0],f[y][1],[0,0],r)),f[y].length>2&&c[y].push(f[y][2]),f[y].length>3&&c[y].push(f[y][3])}"paths"in o?o.paths=l:o.rings=l}else if("points"in s&&"points"in o){const a=s.points,l=[];for(let c=0;c<a.length;c++)l[c]=e(a[c][0],a[c][1],[0,0],r),a[c].length>2&&l[c].push(a[c][2]),a[c].length>3&&l[c].push(a[c][3]);o.points=l}return n}function WA(t,e){const i=t&&(Dj(t)?t:t.spatialReference),r=e&&(Dj(e)?e:e.spatialReference);return!(t&&"type"in t&&t.type==="mesh"||e&&"type"in e&&e.type==="mesh"||!i||!r)&&(!!es(r,i)||dp(r)&&nw(i)||dp(i)&&nw(r))}function HF(t,e){if(t==null)return null;const i=t.spatialReference,r=e&&(Dj(e)?e:e.spatialReference);return WA(i,r)?es(i,r)?se(t):dp(r)?QR(t,H1,et.WebMercator,!1,se(t)):nw(r)?QR(t,WF,et.WGS84,!1,se(t)):null:null}function H1(t,e,i=[0,0]){e>89.99999?e=89.99999:e<-89.99999&&(e=-89.99999);const r=tX(e);return i[0]=tX(t)*tn.radius,i[1]=tn.halfSemiMajorAxis*Math.log((1+Math.sin(r))/(1-Math.sin(r))),i}function WF(t,e,i=[0,0],r=!1){if(t===WC[0])i[0]=-180;else if(t===WC[1])i[0]=180;else{const n=eX(t/tn.radius);i[0]=r?n:n-360*Math.floor((n+180)/360)}return i[1]=eX(Math.PI/2-2*Math.atan(Math.exp(-e/tn.radius))),i}function Xf(t,e=!1,i=se(t)){return KS(t),KS(i),QR(t,H1,et.WebMercator,e,i)}function W1(t,e=!1,i=se(t)){return KS(t),KS(i),QR(t,WF,et.WGS84,e,i)}function vue(t,e){const i=t.x-e.x,r=t.y-e.y,n=t.z!=null&&e.z!=null?t.z-e.z:0;return Math.sqrt(i*i+r*r+n*n)}function WCe(t){var e;return((e=bue(t,wue))==null?void 0:e[0])??null}function ZCe(t){var e;return((e=bue(t,wue))==null?void 0:e[1])??null}function bue({x:t,y:e,spatialReference:i},r=[0,0]){if(i){if(dp(i))return WF(t,e,r);if(L$(i))return r[0]=t,r[1]=e,r}return null}const wue=[0,0];var ZA;const mz=[0,0];function iX(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}let _t=ZA=class extends Cs{static copy(t,e){e._set("x",t._get("x")),e._set("y",t._get("y")),e._set("z",t._get("z")),e._set("m",t._get("m"));const i=t._get("spatialReference");e._set("spatialReference",tt.isFrozen(i)?i:i.clone())}constructor(...t){super(...t),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}normalizeCtorArgs(t,e,i,r,n){let s;if(Array.isArray(t))s=t,n=e,t=s[0],e=s[1],i=s[2],r=s[3];else if(t&&typeof t=="object"){if(s=t,t=s.x!=null?s.x:s.longitude,e=s.y!=null?s.y:s.latitude,i=s.z,r=s.m,(n=s.spatialReference)&&n.declaredClass!=="esri.geometry.SpatialReference"&&(n=new et(n)),s.longitude!=null||s.latitude!=null){if(s.longitude==null)Ie.getLogger(this).warn(".longitude=","Latitude was defined without longitude");else if(s.latitude==null)Ie.getLogger(this).warn(".latitude=","Longitude was defined without latitude");else if(!s.declaredClass&&(n!=null&&n.isWebMercator)){const a=H1(s.longitude,s.latitude,mz);t=a[0],e=a[1]}}}else iX(i)?(n=i,i=null):iX(r)&&(n=r,r=null);const o={x:t,y:e};return o.x==null&&o.y!=null?Ie.getLogger(this).warn(".y=","Y coordinate was defined without an X coordinate"):o.y==null&&o.x!=null&&Ie.getLogger(this).warn(".x=","X coordinate was defined without a Y coordinate"),n!=null&&(o.spatialReference=n),i!=null&&(o.z=i),r!=null&&(o.m=r),o}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(t){t!==(this._get("m")!==void 0)&&(this._set("m",t?0:void 0),this._set("hasM",t))}get hasZ(){return this.z!==void 0}set hasZ(t){t!==(this._get("z")!==void 0)&&(this._set("z",t?0:void 0),this._set("hasZ",t))}get latitude(){return ZCe(this)}set latitude(t){const{spatialReference:e,x:i}=this;t!=null&&e&&(e.isWebMercator?this._set("y",H1(i,t,mz)[1]):e.isGeographic&&this._set("y",t),this._set("latitude",t))}get longitude(){return WCe(this)}set longitude(t){const{y:e,spatialReference:i}=this;t!=null&&i&&(i.isWebMercator?this._set("x",H1(t,e,mz)[0]):i.isGeographic&&this._set("x",t),this._set("longitude",t))}writeX(t,e,i){e[i]=isNaN(t)?"NaN":t}readX(t){return typeof t=="string"?NaN:t}clone(){const t=new ZA;return t.x=this.x,t.y=this.y,t.z=this.z,t.m=this.m,t.spatialReference=this.spatialReference,t}copy(t){return ZA.copy(t,this),this}equals(t){if(t==null)return!1;const{x:e,y:i,z:r,m:n,spatialReference:s}=this,{z:o,m:a}=t;let{x:l,y:c,spatialReference:d}=t;if(!s.equals(d))if(s.isWebMercator&&d.isWGS84)[l,c]=H1(l,c),d=s;else{if(!s.isWGS84||!d.isWebMercator)return!1;[l,c]=WF(l,c),d=s}return e===l&&i===c&&r===o&&n===a&&s.wkid===d.wkid}offset(t,e,i){return this.x+=t,this.y+=e,i!=null&&(this.z=(this.z??0)+i),this}normalize(){if(!this.spatialReference)return this;const t=aa(this.spatialReference);if(!t)return this;let e=this.x;const[i,r]=t.valid,n=2*r;let s;return e>r?(s=Math.ceil(Math.abs(e-r)/n),e-=s*n):e<i&&(s=Math.ceil(Math.abs(e-i)/n),e+=s*n),this._set("x",e),this}distance(t){return vue(this,t)}toArray(){const t=this.hasZ,e=this.hasM;return t&&e?[this.x,this.y,this.z,this.m]:t?[this.x,this.y,this.z]:e?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(t){return this.write({},t)}};u([h({readOnly:!0})],_t.prototype,"cache",null),u([h({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],_t.prototype,"hasM",null),u([h({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],_t.prototype,"hasZ",null),u([h({type:Number})],_t.prototype,"latitude",null),u([h({type:Number})],_t.prototype,"longitude",null),u([h({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),yi((t=>isNaN(t)?t:na(t)))],_t.prototype,"x",void 0),u([Ve("x")],_t.prototype,"writeX",null),u([De("x")],_t.prototype,"readX",null),u([h({type:Number,json:{write:!0}})],_t.prototype,"y",void 0),u([h({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],_t.prototype,"z",void 0),u([h({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],_t.prototype,"m",void 0),_t=ZA=u([V("esri.geometry.Point")],_t),_t.prototype.toJSON.isDefaultToJSON=!0;let Od=class extends bt.ClonableMixin(ve){constructor(...e){super(...e),this.position=new _t([0,0,0]),this.heading=0,this.tilt=0,this.fov=55,this.layout=new sce}normalizeCtorArgs(e,i,r,n){if(e&&typeof e=="object"&&("x"in e||Array.isArray(e))){const s={position:e};return i!=null&&(s.heading=i),r!=null&&(s.tilt=r),n!=null&&(s.fov=n),s}return e}writePosition(e,i,r,n){const s=e.clone();s.x=na(e.x||0),s.y=na(e.y||0),s.z=e.hasZ?na(e.z||0):e.z,i[r]=s.write({},n)}readPosition(e,i){const r=new _t;return r.read(e,i),r.x=na(r.x||0),r.y=na(r.y||0),r.z=r.hasZ?na(r.z||0):r.z,r}equals(e){return e!=null&&this.tilt===e.tilt&&this.heading===e.heading&&this.fov===e.fov&&this.position.equals(e.position)&&this.layout.equals(e.layout)}};u([h({type:_t,json:{write:{isRequired:!0}}})],Od.prototype,"position",void 0),u([Ve("position")],Od.prototype,"writePosition",null),u([De("position")],Od.prototype,"readPosition",null),u([h({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),yi((t=>uce.normalize(na(t))))],Od.prototype,"heading",void 0),u([h({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),yi((t=>to(na(t),-180,180)))],Od.prototype,"tilt",void 0),u([h({type:Number,nonNullable:!0,json:{default:55,write:!0}}),yi((t=>to(na(t,55),1,170)))],Od.prototype,"fov",void 0),u([h({type:sce,nonNullable:!0,json:{read:!1,write:!1}})],Od.prototype,"layout",void 0),Od=u([V("esri.Camera")],Od);const JCe=Od,yz=[0,0];function h2(t,e){return e!=null&&Jo(t,e.x,e.y,e.z)}function hpt(t,e){var i;if(!((i=e.points)!=null&&i.length))return!1;for(const r of e.points)if(!QS(t,r))return!1;return!0}function YCe(t,e){const{xmin:i,ymin:r,zmin:n,xmax:s,ymax:o,zmax:a}=e;return t.hasZ&&e.hasZ?Jo(t,i,r,n)&&Jo(t,i,o,n)&&Jo(t,s,o,n)&&Jo(t,s,r,n)&&Jo(t,i,r,a)&&Jo(t,i,o,a)&&Jo(t,s,o,a)&&Jo(t,s,r,a):Jo(t,i,r)&&Jo(t,i,o)&&Jo(t,s,o)&&Jo(t,s,r)}function QS(t,e){return Jo(t,e[0],e[1])}function XCe(t,e){return Jo(t,e[0],e[1],e[2])}function Jo(t,e,i,r){return e>=t.xmin&&e<=t.xmax&&i>=t.ymin&&i<=t.ymax&&(r==null||!t.hasZ||r>=t.zmin&&r<=t.zmax)}function LG(t,e){return yz[1]=e.y,yz[0]=e.x,KCe(t,yz)}function KCe(t,e){return RG(t.rings,e)}function RG(t,e){if(!t)return!1;if(QCe(t))return rX(!1,t,e);let i=!1;for(let r=0,n=t.length;r<n;r++)i=rX(i,t[r],e);return i}function QCe(t){return!Array.isArray(t[0][0])}function rX(t,e,i){const[r,n]=i;let s=t,o=0;for(let a=0,l=e.length;a<l;a++){o++,o===l&&(o=0);const[c,d]=e[a],[f,y]=e[o];(d<n&&y>=n||y<n&&d>=n)&&c+(n-d)/(y-d)*(f-c)<r&&(s=!s)}return s}function eMe(t,e){return h2(t,e)}function tMe(t,e){const i=t.hasZ&&e.hasZ;let r,n,s;if(t.xmin<=e.xmin){if(r=e.xmin,t.xmax<r)return!1}else if(r=t.xmin,e.xmax<r)return!1;if(t.ymin<=e.ymin){if(n=e.ymin,t.ymax<n)return!1}else if(n=t.ymin,e.ymax<n)return!1;if(i&&e.hasZ){if(t.zmin<=e.zmin){if(s=e.zmin,t.zmax<s)return!1}else if(s=t.zmin,e.zmax<s)return!1}return!0}function iMe(t,e){const{points:i,hasZ:r}=e,n=r?XCe:QS;for(const s of i)if(n(t,s))return!0;return!1}const ow=[0,0],aw=[0,0],lw=[0,0],cw=[0,0],rMe=[ow,aw,lw,cw],_ue=[[lw,ow],[ow,aw],[aw,cw],[cw,lw]];function nMe(t,e){return sMe(t,e.rings)}function sMe(t,e){ow[0]=t.xmin,ow[1]=t.ymax,aw[0]=t.xmax,aw[1]=t.ymax,lw[0]=t.xmin,lw[1]=t.ymin,cw[0]=t.xmax,cw[1]=t.ymin;for(const i of rMe)if(RG(e,i))return!0;for(const i of e){if(!i.length)continue;let r=i[0];if(QS(t,r))return!0;for(let n=1;n<i.length;n++){const s=i[n];if(QS(t,s)||xue(r,s,_ue))return!0;r=s}}return!1}function oMe(t,e){ow[0]=t.xmin,ow[1]=t.ymax,aw[0]=t.xmax,aw[1]=t.ymax,lw[0]=t.xmin,lw[1]=t.ymin,cw[0]=t.xmax,cw[1]=t.ymin;const i=e.paths;for(const r of i){if(!i.length)continue;let n=r[0];if(QS(t,n))return!0;for(let s=1;s<r.length;s++){const o=r[s];if(QS(t,o)||xue(n,o,_ue))return!0;n=o}}return!1}const bs=[0,0];function aMe(t){for(let e=0;e<t.length;e++){const i=t[e];for(let n=0;n<i.length-1;n++){const s=i[n],o=i[n+1];for(let a=e+1;a<t.length;a++)for(let l=0;l<t[a].length-1;l++){const c=t[a][l],d=t[a][l+1];if(eO(s,o,c,d,bs)&&!(bs[0]===s[0]&&bs[1]===s[1]||bs[0]===c[0]&&bs[1]===c[1]||bs[0]===o[0]&&bs[1]===o[1]||bs[0]===d[0]&&bs[1]===d[1]))return!0}}const r=i.length;if(!(r<=4))for(let n=0;n<r-3;n++){let s=r-1;n===0&&(s=r-2);const o=i[n],a=i[n+1];for(let l=n+2;l<s;l++){const c=i[l],d=i[l+1];if(eO(o,a,c,d,bs)&&!(bs[0]===o[0]&&bs[1]===o[1]||bs[0]===c[0]&&bs[1]===c[1]||bs[0]===a[0]&&bs[1]===a[1]||bs[0]===d[0]&&bs[1]===d[1]))return!0}}}return!1}function xue(t,e,i){for(let r=0;r<i.length;r++)if(eO(t,e,i[r][0],i[r][1]))return!0;return!1}function eO(t,e,i,r,n){const[s,o]=t,[a,l]=e,[c,d]=i,[f,y]=r,g=f-c,b=s-c,_=a-s,x=y-d,E=o-d,C=l-o,k=x*_-g*C;if(k===0)return!1;const O=(g*E-x*b)/k,D=(_*E-C*b)/k;return O>=0&&O<=1&&D>=0&&D<=1&&(n&&(n[0]=s+O*(a-s),n[1]=o+O*(l-o)),!0)}function lMe(t){switch(t){case"esriGeometryEnvelope":case"extent":return tMe;case"esriGeometryMultipoint":case"multipoint":return iMe;case"esriGeometryPoint":case"point":return eMe;case"esriGeometryMultiPatch":case"multipatch":case"esriGeometryPolygon":case"polygon":return nMe;case"esriGeometryPolyline":case"polyline":return oMe}}var yu;function cMe(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}function Hm(t,e,i){return e==null?i:i==null?e:t(e,i)}let Qt=yu=class extends Cs{constructor(...t){super(...t),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(t,e,i,r,n){return cMe(t)?{spatialReference:t,xmin:0,ymin:0,xmax:0,ymax:0}:typeof t=="object"?(t.spatialReference=t.spatialReference==null?et.WGS84:t.spatialReference,t):{xmin:t,ymin:e,xmax:i,ymax:r,spatialReference:n??et.WGS84}}static fromPoint(t){return new yu({xmin:t.x,ymin:t.y,zmin:t.z,xmax:t.x,ymax:t.y,zmax:t.z,spatialReference:t.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const t=new _t({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(t.z=.5*(this.zmin+this.zmax)),this.hasM&&(t.m=.5*(this.mmin+this.mmax)),t}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(t){const e=this.center;return t.z!=null&&this.hasZ?this.offset(t.x-e.x,t.y-e.y,t.z-e.z):this.offset(t.x-e.x,t.y-e.y)}clone(){const t=new yu;return t.xmin=this.xmin,t.ymin=this.ymin,t.xmax=this.xmax,t.ymax=this.ymax,t.spatialReference=this.spatialReference,this.zmin!=null&&(t.zmin=this.zmin,t.zmax=this.zmax),this.mmin!=null&&(t.mmin=this.mmin,t.mmax=this.mmax),t}contains(t){if(!t)return!1;const e=this.spatialReference,i=t.spatialReference;return e&&i&&!e.equals(i)&&WA(e,i)&&(t=e.isWebMercator?Xf(t):W1(t,!0)),t.type==="point"?h2(this,t):t.type==="extent"&&YCe(this,t)}equals(t){if(this===t)return!0;if(t==null)return!1;const e=this.spatialReference,i=t.spatialReference;return e&&i&&!e.equals(i)&&WA(e,i)&&(t=e.isWebMercator?Xf(t):W1(t,!0)),this.xmin===t.xmin&&this.ymin===t.ymin&&this.zmin===t.zmin&&this.mmin===t.mmin&&this.xmax===t.xmax&&this.ymax===t.ymax&&this.zmax===t.zmax&&this.mmax===t.mmax}expand(t){const e=.5*(1-t),i=this.width*e,r=this.height*e;if(this.xmin+=i,this.ymin+=r,this.xmax-=i,this.ymax-=r,this.hasZ){const n=(this.zmax-this.zmin)*e;this.zmin+=n,this.zmax-=n}if(this.hasM){const n=(this.mmax-this.mmin)*e;this.mmin+=n,this.mmax-=n}return this}intersects(t){if(t==null)return!1;t.type==="mesh"&&(t=t.extent);const e=this.spatialReference,i=t.spatialReference;return e&&i&&!es(e,i)&&WA(e,i)&&(t=e.isWebMercator?Xf(t):W1(t,!0)),lMe(t.type)(this,t)}normalize(){const t=this._normalize(!1,!0);return Array.isArray(t)?t:[t]}offset(t,e,i){return this.xmin+=t,this.ymin+=e,this.xmax+=t,this.ymax+=e,i!=null&&(this.zmin+=i,this.zmax+=i),this}shiftCentralMeridian(){return this._normalize(!0)}union(t){return this===t||(this.xmin=Math.min(this.xmin,t.xmin),this.ymin=Math.min(this.ymin,t.ymin),this.xmax=Math.max(this.xmax,t.xmax),this.ymax=Math.max(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=Hm(Math.min,this.zmin,t.zmin),this.zmax=Hm(Math.max,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=Hm(Math.min,this.mmin,t.mmin),this.mmax=Hm(Math.max,this.mmax,t.mmax))),this}intersection(t){return this===t?this:t!=null&&this.intersects(t)?(this.xmin=Math.max(this.xmin,t.xmin),this.ymin=Math.max(this.ymin,t.ymin),this.xmax=Math.min(this.xmax,t.xmax),this.ymax=Math.min(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=Hm(Math.max,this.zmin,t.zmin),this.zmax=Hm(Math.min,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=Hm(Math.max,this.mmin,t.mmin),this.mmax=Hm(Math.min,this.mmax,t.mmax)),this):null}toJSON(t){return this.write({},t)}_shiftCM(t=aa(this.spatialReference)){if(!t||!this.spatialReference)return this;const e=this.spatialReference,i=this._getCM(t);if(i){const r=e.isWebMercator?W1(i):i;this.xmin-=i.x,this.xmax-=i.x,e.isWebMercator||(r.x=gz(r.x,t).x),this.spatialReference=new et(Ja((e.isWGS84?t.altTemplate:null)??t.wkTemplate,{Central_Meridian:r.x}))}return this}_getCM(t){let e=null;const[i,r]=t.valid,n=this.xmin,s=this.xmax;return n>=i&&n<=r&&s>=i&&s<=r||(e=this.center),e}_normalize(t,e,i){const r=this.spatialReference;if(!r)return this;const n=i??aa(r);if(n==null)return this;const s=this._getParts(n).map((l=>l.extent));if(s.length<2)return s[0]||this;if(s.length>2)return t?this._shiftCM(n):this.set({xmin:n.valid[0],xmax:n.valid[1]});if(t)return this._shiftCM(n);if(e)return s;let o=!0,a=!0;return s.forEach((l=>{l.hasZ||(o=!1),l.hasM||(a=!1)})),{rings:s.map((l=>{const c=[[l.xmin,l.ymin],[l.xmin,l.ymax],[l.xmax,l.ymax],[l.xmax,l.ymin],[l.xmin,l.ymin]];if(o){const d=(l.zmax-l.zmin)/2;for(let f=0;f<c.length;f++)c[f].push(d)}if(a){const d=(l.mmax-l.mmin)/2;for(let f=0;f<c.length;f++)c[f].push(d)}return c})),hasZ:o,hasM:a,spatialReference:r}}_getParts(t){let e=this.cache._parts;if(!e){e=[];const{ymin:n,ymax:s,spatialReference:o}=this,a=this.width,l=this.xmin,c=this.xmax;let d;t=t||aa(o);const[f,y]=t.valid;d=gz(this.xmin,t);const g=d.x,b=d.frameId;d=gz(this.xmax,t);const _=d.x,x=d.frameId,E=g===_&&a>0;if(a>2*y){const C=new yu(l<c?g:_,n,y,s,o),k=new yu(f,n,l<c?_:g,s,o),O=new yu(0,n,y,s,o),D=new yu(f,n,0,s,o),B=[],j=[];C.contains(O)&&B.push(b),C.contains(D)&&j.push(b),k.contains(O)&&B.push(x),k.contains(D)&&j.push(x);for(let Z=b+1;Z<x;Z++)B.push(Z),j.push(Z);e.push({extent:C,frameIds:[b]},{extent:k,frameIds:[x]},{extent:O,frameIds:B},{extent:D,frameIds:j})}else g>_||E?e.push({extent:new yu(g,n,y,s,o),frameIds:[b]},{extent:new yu(f,n,_,s,o),frameIds:[x]}):e.push({extent:new yu(g,n,_,s,o),frameIds:[b]});this.cache._parts=e}const i=this.hasZ,r=this.hasM;if(i||r){const n={};i&&(n.zmin=this.zmin,n.zmax=this.zmax),r&&(n.mmin=this.mmin,n.mmax=this.mmax);for(let s=0;s<e.length;s++)e[s].extent.set(n)}return e}};function gz(t,e){const[i,r]=e.valid,n=2*r;let s,o=0;return t>r?(s=Math.ceil(Math.abs(t-r)/n),t-=s*n,o=s):t<i&&(s=Math.ceil(Math.abs(t-i)/n),t+=s*n,o=-s),{x:t,frameId:o}}u([h({readOnly:!0})],Qt.prototype,"cache",null),u([h({readOnly:!0})],Qt.prototype,"center",null),u([h({readOnly:!0})],Qt.prototype,"extent",null),u([h({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Qt.prototype,"hasM",null),u([h({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Qt.prototype,"hasZ",null),u([h({readOnly:!0})],Qt.prototype,"height",null),u([h({readOnly:!0})],Qt.prototype,"width",null),u([h({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],Qt.prototype,"xmin",void 0),u([h({type:Number,json:{write:!0}})],Qt.prototype,"ymin",void 0),u([h({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],Qt.prototype,"mmin",void 0),u([h({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Qt.prototype,"zmin",void 0),u([h({type:Number,json:{write:!0}})],Qt.prototype,"xmax",void 0),u([h({type:Number,json:{write:!0}})],Qt.prototype,"ymax",void 0),u([h({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],Qt.prototype,"mmax",void 0),u([h({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Qt.prototype,"zmax",void 0),Qt=yu=u([V("esri.geometry.Extent")],Qt),Qt.prototype.toJSON.isDefaultToJSON=!0;function e$(t,e,i=!1){let{hasM:r,hasZ:n}=t;Array.isArray(e)?e.length!==4||r||n?e.length===3&&i&&!r?(n=!0,r=!1):e.length===3&&r&&n&&(r=!1,n=!1):(r=!0,n=!0):(n=!n&&e.hasZ&&(!r||e.hasM),r=!r&&e.hasM&&(!n||e.hasZ)),t.hasZ=n,t.hasM=r}var zj;function nX(t){return(e,i)=>e==null?i:i==null?e:t(e,i)}function uMe(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}let _c=zj=class extends Cs{constructor(...t){super(...t),this.points=[],this.type="multipoint"}normalizeCtorArgs(t,e){var n;if(!t&&!e)return{};const i={};Array.isArray(t)?(i.points=t,i.spatialReference=e):uMe(t)?i.spatialReference=t:(t.points&&(i.points=t.points),t.spatialReference&&(i.spatialReference=t.spatialReference),t.hasZ&&(i.hasZ=t.hasZ),t.hasM&&(i.hasM=t.hasM));const r=(n=i.points)==null?void 0:n[0];return r&&(i.hasZ===void 0&&i.hasM===void 0?(i.hasZ=r.length>2,i.hasM=!1):i.hasZ===void 0?i.hasZ=r.length>3:i.hasM===void 0&&(i.hasM=r.length>3)),i}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const t=this.points;if(!t.length)return null;const e=new Qt,i=this.hasZ,r=this.hasM,n=i?3:2,s=t[0],o=nX(Math.min),a=nX(Math.max);let l,c,d,f,[y,g]=s,[b,_]=s;for(let x=0,E=t.length;x<E;x++){const C=t[x],[k,O]=C;if(y=o(y,k),g=o(g,O),b=a(b,k),_=a(_,O),i&&C.length>2){const D=C[2];l=o(l,D),d=a(d,D)}if(r&&C.length>n){const D=C[n];c=o(c,D),f=a(f,D)}}return e.xmin=y,e.ymin=g,e.xmax=b,e.ymax=_,e.spatialReference=this.spatialReference,i?(e.zmin=l,e.zmax=d):(e.zmin=void 0,e.zmax=void 0),r?(e.mmin=c,e.mmax=f):(e.mmin=void 0,e.mmax=void 0),e}writePoints(t,e){e.points=se(this.points)}addPoint(t){return e$(this,t),Array.isArray(t)?this.points.push(t):this.points.push(t.toArray()),this.notifyChange("points"),this}clone(){const t={points:se(this.points),spatialReference:this.spatialReference};return this.hasZ&&(t.hasZ=!0),this.hasM&&(t.hasM=!0),new zj(t)}getPoint(t){if(!this._validateInputs(t))return null;const e=this.points[t],i={x:e[0],y:e[1],spatialReference:this.spatialReference};let r=2;return this.hasZ&&(i.z=e[2],r=3),this.hasM&&(i.m=e[r]),new _t(i)}removePoint(t){if(!this._validateInputs(t))return null;const e=new _t(this.points.splice(t,1)[0],this.spatialReference);return this.notifyChange("points"),e}setPoint(t,e){return this._validateInputs(t)?(e$(this,e),Array.isArray(e)||(e=e.toArray()),this.points[t]=e,this.notifyChange("points"),this):this}toJSON(t){return this.write({},t)}_validateInputs(t){return t!=null&&t>=0&&t<this.points.length}};u([h({readOnly:!0})],_c.prototype,"cache",null),u([h()],_c.prototype,"extent",null),u([h({type:[[Number]],json:{write:{isRequired:!0}}})],_c.prototype,"points",void 0),u([Ve("points")],_c.prototype,"writePoints",null),_c=zj=u([V("esri.geometry.Multipoint")],_c),_c.prototype.toJSON.isDefaultToJSON=!0;function ZF(t){const e=[];for(t.reset();t.nextPath();){const i=[];for(;t.nextPoint();)i.push([t.x,t.y]);e.push(i)}return t.reset(),e}function vg(t){const e=[];for(;t.nextPoint();)e.push([t.x,t.y]);return t.seekPathStart(),e}var tO;(function(t){t[t.X=0]="X",t[t.Y=1]="Y",t[t.Z=2]="Z"})(tO||(tO={}));function ppt(t){if(!t)return null;if(Array.isArray(t))return t;const e=t.hasZ,i=t.hasM;if(t.type==="point")return i&&e?[t.x,t.y,t.z,t.m]:e?[t.x,t.y,t.z]:i?[t.x,t.y,t.m]:[t.x,t.y];if(t.type==="polygon")return t.rings.slice();if(t.type==="polyline")return t.paths.slice();if(t.type==="multipoint")return t.points.slice();if(t.type==="extent"){const r=t.clone().normalize();if(!r)return null;let n=!1,s=!1;return r.forEach((o=>{o.hasZ&&(n=!0),o.hasM&&(s=!0)})),r.map((o=>{const a=[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]];if(n&&o.hasZ){const l=.5*(o.zmax-o.zmin);for(let c=0;c<a.length;c++)a[c].push(l)}if(s&&o.hasM){const l=.5*(o.mmax-o.mmin);for(let c=0;c<a.length;c++)a[c].push(l)}return a}))}return null}function JF(t,e){const i=e[0]-t[0],r=e[1]-t[1];if(t.length>2&&e.length>2){const n=t[2]-e[2];return Math.sqrt(i*i+r*r+n*n)}return Math.sqrt(i*i+r*r)}function Sue(t,e,i){const r=t[0]+i*(e[0]-t[0]),n=t[1]+i*(e[1]-t[1]);return t.length>2&&e.length>2?[r,n,t[2]+i*(e[2]-t[2])]:[r,n]}function dMe(t,e,i,r){return $ue(t,e,i[r],i[r+1])}function $ue(t,e,i,r){const[n,s]=e,[o,a]=i,[l,c]=r,d=l-o,f=c-a,y=d*d+f*f,g=(n-o)*d+(s-a)*f,b=Math.min(1,Math.max(0,g/y));return t[0]=o+d*b,t[1]=a+f*b,t}function hMe(t,e,i,r,n,s){let o=i,a=r,l=n-o,c=s-a;if(l!==0||c!==0){const d=((t-o)*l+(e-a)*c)/(l*l+c*c);d>1?(o=n,a=s):d>0&&(o+=l*d,a+=c*d)}return l=t-o,c=e-a,l*l+c*c}function Tue(t,e){return Sue(t,e,.5)}function pMe(t){const e=t.length;let i=0;for(let r=0;r<e-1;++r)i+=JF(t[r],t[r+1]);return i}function fpt(t,e){if(e<=0)return t[0];const i=t.length;let r=0;for(let n=0;n<i-1;++n){const s=JF(t[n],t[n+1]);if(e-r<s){const o=(e-r)/s;return Sue(t[n],t[n+1],o)}r+=s}return t[i-1]}function Eue(t,e=tO.X,i=tO.Y){let r=0;const n=t.length;let s=t[0];for(let o=1;o<n;o++){const a=t[o];r+=(a[e]-s[e])*(a[i]+s[i]),s=a}if(Iue(t)){const o=t[0];r+=(o[e]-s[e])*(o[i]+s[i])}return r>=0}function Iue(t){const e=t.length;return e>0&&!OF(t[0],t[e-1])}function fMe(t){"rings"in t&&(mMe(t),yMe(t))}function mMe(t){if("rings"in t)for(const e of t.rings)Iue(e)&&e.push(e[0].slice())}function yMe(t){if(!("rings"in t)||t.rings.length===0||Eue(t.rings[0]))return!1;for(const e of t.rings)e.reverse();return!0}function mpt(t){return t.type!=="polygon"&&t.type!=="polyline"||gMe(t.type==="polygon"?t.rings:t.paths,t.spatialReference),t}function gMe(t,e){const i=aa(e);if(!i)return;const r=i.valid[0],n=i.valid[1],s=n-r;for(const o of t){let a=1/0,l=-1/0;for(const d of o){const f=vMe(d[0],r,n);a=Math.min(a,f),l=Math.max(l,f),d[0]=f}const c=l-a;s-c<c&&o.forEach((d=>{d[0]<0&&(d[0]+=s)}))}}function vMe(t,e,i){const r=i-e;return t<e?i-(e-t)%r:t>i?e+(t-e)%r:t}function ypt(t,e){if(t===e)return!0;if(t.type!==e.type)return!1;if(t.type==="point"||t.type==="mesh"||t.type==="extent")return!0;if(t.type==="multipoint")return t.points.length===e.points.length;const[i,r]=t.type==="polyline"?[t.paths,e.paths]:[t.rings,e.rings];return i.length===r.length&&i.every(((n,s)=>n.length===r[s].length))}function gpt(t){return t?t.hasZ?[t.xmax-t.xmin/2,t.ymax-t.ymin/2,t.zmax-t.zmin/2]:[t.xmax-t.xmin/2,t.ymax-t.ymin/2]:null}function Cue(t){return t?bMe(t.rings,t.hasZ??!1):null}function bMe(t,e){if(!(t!=null&&t.length))return null;const i=[],r=[],n=e?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let s=0,o=t.length;s<o;s++){const a=Mue(t[s],e,n);a&&r.push(a)}if(r.sort(((s,o)=>{let a=s[2]-o[2];return a===0&&e&&(a=s[4]-o[4]),a})),r.length&&(i[0]=r[0][0],i[1]=r[0][1],e&&(i[2]=r[0][3]),(i[0]<n[0]||i[0]>n[1]||i[1]<n[2]||i[1]>n[3]||e&&(i[2]<n[4]||i[2]>n[5]))&&(i.length=0)),!i.length){const s=t[0]&&t[0].length?_Me(t[0],e):null;if(!s)return null;i[0]=s[0],i[1]=s[1],e&&s.length>2&&(i[2]=s[2])}return i}function Mue(t,e,i){let r=0,n=0,s=0,o=0,a=0;const l=t.length?t[0][0]:0,c=t.length?t[0][1]:0,d=t.length&&e?t[0][2]:0;for(let y=0;y<t.length;y++){const g=t[y],b=t[(y+1)%t.length],[_,x,E]=g,C=_-l,k=x-c,[O,D,B]=b,j=O-l,Z=D-c,X=C*Z-j*k;if(o+=X,r+=(C+j)*X,n+=(k+Z)*X,e&&g.length>2&&b.length>2){const ee=E-d,pe=B-d,he=C*pe-j*ee;s+=(ee+pe)*he,a+=he}_<i[0]&&(i[0]=_),_>i[1]&&(i[1]=_),x<i[2]&&(i[2]=x),x>i[3]&&(i[3]=x),e&&(E<i[4]&&(i[4]=E),E>i[5]&&(i[5]=E))}if(o>0&&(o*=-1),a>0&&(a*=-1),!o)return null;o*=.5,a*=.5;const f=[r/(6*o)+l,n/(6*o)+c,o];return e&&(i[4]===i[5]||a===0?(f[3]=(i[4]+i[5])/2,f[4]=0):(f[3]=s/(6*a)+d,f[4]=a)),f}function wMe(t,e){let i=0,r=0,n=0;t.nextPoint();const s=t.pathSize?t.x:0,o=t.pathSize?t.y:0;for(let a=0;a<t.pathSize;a++){t.seekInPath(a);const l=[t.x,t.y];t.seekInPath((a+1)%t.pathSize);const c=[t.x,t.y],[d,f]=l,y=d-s,g=f-o,[b,_]=c,x=b-s,E=_-o,C=y*E-x*g;n+=C,i+=(y+x)*C,r+=(g+E)*C,d<e[0]&&(e[0]=d),d>e[1]&&(e[1]=d),f<e[2]&&(e[2]=f),f>e[3]&&(e[3]=f)}return n>0&&(n*=-1),n?(n*=.5,[i/(6*n)+s,r/(6*n)+o,n]):null}function _Me(t,e){const i=e?[0,0,0]:[0,0],r=e?[0,0,0]:[0,0];let n=0,s=0,o=0,a=0;for(let l=0,c=t.length;l<c-1;l++){const d=t[l],f=t[l+1];if(d&&f){i[0]=d[0],i[1]=d[1],r[0]=f[0],r[1]=f[1],e&&d.length>2&&f.length>2&&(i[2]=d[2],r[2]=f[2]);const y=JF(i,r);if(y){n+=y;const g=Tue(d,f);s+=y*g[0],o+=y*g[1],e&&g.length>2&&(a+=y*g[2])}}}return n>0?e?[s/n,o/n,a/n]:[s/n,o/n]:t.length?t[0]:null}function kue(t){const{hasZ:e,totalSize:i}=t;if(i===0)return null;const r=[],n=[],s=e?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(t.reset();t.nextPath();){const o=Mue(vg(t),t.hasZ,s);o&&n.push(o)}if(n.sort(((o,a)=>{let l=o[2]-a[2];return l===0&&e&&(l=o[4]-a[4]),l})),n.length&&(r[0]=n[0][0],r[1]=n[0][1],e&&(r[2]=n[0][3]),(r[0]<s[0]||r[0]>s[1]||r[1]<s[2]||r[1]>s[3]||e&&(r[2]<s[4]||r[2]>s[5]))&&(r.length=0)),!r.length){t.reset(),t.nextPath();const o=t.pathSize?xMe(t):null;if(!o)return null;r[0]=o[0],r[1]=o[1],e&&o.length>2&&(r[2]=o[2])}return r}function xMe(t){const{hasZ:e}=t,i=e?[0,0,0]:[0,0],r=e?[0,0,0]:[0,0];let n=0,s=0,o=0,a=0;if(t.nextPoint()){let l=t.x,c=t.y,d=t.z;for(;t.nextPoint();){const f=t.x,y=t.y,g=t.z;i[0]=l,i[1]=c,r[0]=f,r[1]=y,e&&(i[2]=d,r[2]=g);const b=JF(i,r);if(b){n+=b;const _=Tue(i,r);s+=b*_[0],o+=b*_[1],e&&_.length>2&&(a+=b*_[2])}l=f,c=y,d=g}}return n>0?e?[s/n,o/n,a/n]:[s/n,o/n]:t.pathSize?(t.seekPathStart(),t.nextPoint(),[t.x,t.y]):null}const SMe=1e-6;function $Me(t){let e=0;for(t.reset();t.nextPath();)e+=t.getCurrentRingArea();if(e<SMe){const n=kue(t);return n?[n[0],n[1]]:null}const i=[0,0];if(t.reset(),!t.nextPath()||!t.nextPoint())return null;const r=[t.x,t.y];for(t.reset();t.nextPath();)EMe(i,r,t);return i[0]*=1/e,i[1]*=1/e,i[0]+=r[0],i[1]+=r[1],i}const TMe=1/3;function EMe(t,e,i){if(!t||!i||i.pathSize<3)return null;i.nextPoint();const r=i.x,n=i.y;i.nextPoint();let s,o=i.x-r,a=i.y-n,l=0,c=0;for(;i.nextPoint();)l=i.x-r,c=i.y-n,s=.5*TMe*(l*a-c*o),t[0]+=s*(o+l),t[1]+=s*(a+c),o=l,a=c;const d=i.getCurrentRingArea(),f=[r,n];return f[0]-=e[0],f[1]-=e[1],f[0]*=d,f[1]*=d,t[0]+=f[0],t[1]+=f[1],t}function _n(t=LMe){return[t[0],t[1],t[2],t[3]]}function Pue(t,e){return t!==e&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3]),t}function IMe(t,e,i,r,n=_n()){return n[0]=t,n[1]=e,n[2]=i,n[3]=r,n}function vpt(t,e=_n()){return e[0]=t.xmin,e[1]=t.ymin,e[2]=t.xmax,e[3]=t.ymax,e}function CMe(t,e,i=new Qt){return i.xmin=t[0],i.ymin=t[1],i.xmax=t[2],i.ymax=t[3],i.spatialReference=e,i}function AE(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function bpt(t,e,i){if(e!=null)if("length"in e)Vj(e)?(i[0]=Math.min(t[0],e[0]),i[1]=Math.min(t[1],e[1]),i[2]=Math.max(t[2],e[2]),i[3]=Math.max(t[3],e[3])):e.length!==2&&e.length!==3||(i[0]=Math.min(t[0],e[0]),i[1]=Math.min(t[1],e[1]),i[2]=Math.max(t[2],e[0]),i[3]=Math.max(t[3],e[1]));else switch(e.type){case"extent":i[0]=Math.min(t[0],e.xmin),i[1]=Math.min(t[1],e.ymin),i[2]=Math.max(t[2],e.xmax),i[3]=Math.max(t[3],e.ymax);break;case"point":i[0]=Math.min(t[0],e.x),i[1]=Math.min(t[1],e.y),i[2]=Math.max(t[2],e.x),i[3]=Math.max(t[3],e.y)}else Pue(i,t)}function wpt(t,e,i=t){const r=e.length;let n=t[0],s=t[1],o=t[2],a=t[3];for(let l=0;l<r;l++){const c=e[l];n=Math.min(n,c[0]),s=Math.min(s,c[1]),o=Math.max(o,c[0]),a=Math.max(a,c[1])}return i[0]=n,i[1]=s,i[2]=o,i[3]=a,i}function _pt(t){for(let e=0;e<4;e++)if(!isFinite(t[e]))return!1;return!0}function YF(t){return t==null||t[0]>=t[2]?0:t[2]-t[0]}function XF(t){return t==null||t[1]>=t[3]?0:t[3]-t[1]}function xpt(t){return YF(t)*XF(t)}function sX(t,e=[0,0]){return e[0]=(t[0]+t[2])/2,e[1]=(t[1]+t[3])/2,e}function MMe(t){const e=YF(t),i=XF(t);return Math.sqrt(e*e+i*i)}function Spt(t,e){return kMe(t,e.x,e.y)}function kMe(t,e,i){return e>=t[0]&&i>=t[1]&&e<=t[2]&&i<=t[3]}function $pt(t,e){return Math.max(e[0],t[0])<=Math.min(e[2],t[2])&&Math.max(e[1],t[1])<=Math.min(e[3],t[3])}function Tpt(t,e,i){return Math.max(e[0],t[0])-i<=Math.min(e[2],t[2])&&Math.max(e[1],t[1])-i<=Math.min(e[3],t[3])}function PMe(t,e){return e[0]>=t[0]&&e[2]<=t[2]&&e[1]>=t[1]&&e[3]<=t[3]}function Ept(t,e,i,r=t){return r[0]=t[0]+e,r[1]=t[1]+i,r[2]=t[2]+e,r[3]=t[3]+i,r}function AMe(t){return t?Pue(t,oX):_n(oX)}function Vj(t){return t!=null&&t.length===4}function Ipt(t,e){return Vj(t)&&Vj(e)?t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]:t===e}const oX=[1/0,1/0,-1/0,-1/0],LMe=[0,0,0,0];function Aue(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function Lue(t){return t.points!==void 0}function Rue(t){return t.x!==void 0&&t.y!==void 0}function Oue(t){return t.paths!==void 0}function Fue(t){return t.rings!==void 0}function Nue(t){function e(i,r){return i==null?r:r==null?i:t(i,r)}return e}const rg=Nue(Math.min),ng=Nue(Math.max);function OG(t,e){return Oue(e)?t$(t,e.paths,!1,!1):Fue(e)?t$(t,e.rings,!1,!1):Lue(e)?FG(t,e.points,!1,!1,!1,!1):Aue(e)?zue(t,e):(Rue(e)&&(t[0]=e.x,t[1]=e.y,t[2]=e.x,t[3]=e.y),t)}function p2(t){let e,i,r,n;for(t.reset(),e=r=1/0,i=n=-1/0;t.nextPath();){const s=Due(t);e=Math.min(s[0],e),r=Math.min(s[1],r),i=Math.max(s[2],i),n=Math.max(s[3],n)}return _n([e,r,i,n])}function Due(t){let e,i,r,n;for(e=r=1/0,i=n=-1/0;t.nextPoint();)e=Math.min(t.x,e),r=Math.min(t.y,r),i=Math.max(t.x,i),n=Math.max(t.y,n);return _n([e,r,i,n])}function Cpt(t,e){return Oue(e)?t$(t,e.paths,!0,!1):Fue(e)?t$(t,e.rings,!0,!1):Lue(e)?FG(t,e.points,!0,!1,!0,!1):Aue(e)?zue(t,e,!0,!1,!0,!1):(Rue(e)&&(t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.x,t[4]=e.y,t[5]=e.z),t)}function t$(t,e,i,r){const n=i?3:2;if(!e.length||!e[0].length)return null;let s,o,a,l,[c,d]=e[0][0],[f,y]=e[0][0];for(let g=0;g<e.length;g++){const b=e[g];for(let _=0;_<b.length;_++){const x=b[_],[E,C]=x;if(c=rg(c,E),d=rg(d,C),f=ng(f,E),y=ng(y,C),i&&x.length>2){const k=x[2];s=rg(s,k),o=ng(o,k)}if(r&&x.length>n){const k=x[n];a=rg(s,k),l=ng(o,k)}}}return i?r?(t[0]=c,t[1]=d,t[2]=s,t[3]=a,t[4]=f,t[5]=y,t[6]=o,t[7]=l,t.length=8,t):(t[0]=c,t[1]=d,t[2]=s,t[3]=f,t[4]=y,t[5]=o,t.length=6,t):r?(t[0]=c,t[1]=d,t[2]=a,t[3]=f,t[4]=y,t[5]=l,t.length=6,t):(t[0]=c,t[1]=d,t[2]=f,t[3]=y,t.length=4,t)}function zue(t,e,i,r,n,s){const o=e.xmin,a=e.xmax,l=e.ymin,c=e.ymax;let d=e.zmin,f=e.zmax,y=e.mmin,g=e.mmax;return n?(d=d||0,f=f||0,s?(y=y||0,g=g||0,t[0]=o,t[1]=l,t[2]=d,t[3]=y,t[4]=a,t[5]=c,t[6]=f,t[7]=g,t):(t[0]=o,t[1]=l,t[2]=d,t[3]=a,t[4]=c,t[5]=f,t)):s?(y=y||0,g=g||0,t[0]=o,t[1]=l,t[2]=y,t[3]=a,t[4]=c,t[5]=g,t):(t[0]=o,t[1]=l,t[2]=a,t[3]=c,t)}function FG(t,e,i,r,n,s){const o=i?3:2,a=r&&s,l=i&&n;if(!e.length||!e[0].length)return null;let c,d,f,y,[g,b]=e[0],[_,x]=e[0];for(let E=0;E<e.length;E++){const C=e[E],[k,O]=C;if(g=rg(g,k),b=rg(b,O),_=ng(_,k),x=ng(x,O),l&&C.length>2){const D=C[2];c=rg(c,D),d=ng(d,D)}if(a&&C.length>o){const D=C[o];f=rg(c,D),y=ng(d,D)}}return n?(c=c||0,d=d||0,s?(f=f||0,y=y||0,t[0]=g,t[1]=b,t[2]=c,t[3]=f,t[4]=_,t[5]=x,t[6]=d,t[7]=y,t):(t[0]=g,t[1]=b,t[2]=c,t[3]=_,t[4]=x,t[5]=d,t)):s?(f=f||0,y=y||0,t[0]=g,t[1]=b,t[2]=f,t[3]=_,t[4]=x,t[5]=y,t):(t[0]=g,t[1]=b,t[2]=_,t[3]=x,t)}function RMe(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function OMe(t){return t.points!==void 0}function FMe(t){return t.x!==void 0&&t.y!==void 0}function NMe(t){return t.paths!==void 0}function DMe(t){return t.rings!==void 0}const NG=[];function Vue(t,e,i,r){return{xmin:t,ymin:e,xmax:i,ymax:r}}function jue(t,e,i,r,n,s){return{xmin:t,ymin:e,zmin:i,xmax:r,ymax:n,zmax:s}}function Uue(t,e,i,r,n,s){return{xmin:t,ymin:e,mmin:i,xmax:r,ymax:n,mmax:s}}function Bue(t,e,i,r,n,s,o,a){return{xmin:t,ymin:e,zmin:i,mmin:r,xmax:n,ymax:s,zmax:o,mmax:a}}function DG(t,e=!1,i=!1){return e?i?Bue(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]):jue(t[0],t[1],t[2],t[3],t[4],t[5]):i?Uue(t[0],t[1],t[2],t[3],t[4],t[5]):Vue(t[0],t[1],t[2],t[3])}function Mpt(t){return t?RMe(t)?t:FMe(t)?VMe(t):DMe(t)?Gue(t):NMe(t)?que(t):OMe(t)?zMe(t):null:null}function zMe(t){const{hasZ:e,hasM:i,points:r}=t;return DG(FG(NG,r,e??!1,i??!1),e,i)}function VMe(t){const{x:e,y:i,z:r,m:n}=t,s=n!=null;return r!=null?s?Bue(e,i,r,n,e,i,r,n):jue(e,i,r,e,i,r):s?Uue(e,i,n,e,i,n):Vue(e,i,e,i)}function Gue(t){const{hasZ:e,hasM:i,rings:r}=t,n=t$(NG,r,e??!1,i??!1);return n?DG(n,e,i):null}function que(t){const{hasZ:e,hasM:i,paths:r}=t,n=t$(NG,r,e??!1,i??!1);return n?DG(n,e,i):null}var JA;function aX(t){return!Array.isArray(t[0])}function jMe(t){var e;return typeof((e=t[0])==null?void 0:e[0])=="number"}function UMe(t){var s,o;if(!t)return;let{rings:e,hasM:i,hasZ:r,spatialReference:n}=t;switch(e??(e=[]),jMe(e)&&(e=[e]),(o=(s=e[0])==null?void 0:s[0])==null?void 0:o.length){case 4:r??(r=!0),i??(i=!0);break;case 3:r??(r=i!==!0),i??(i=!r);break;default:r??(r=!1),i??(i=!1)}return n??(n=et.WGS84),{...t,hasM:i,hasZ:r,rings:e,spatialReference:n}}let br=JA=class extends Cs{static fromExtent(t){const e=t.clone().normalize(),{spatialReference:i}=t;let r=!1,n=!1;for(const o of e)o.hasZ&&(r=!0),o.hasM&&(n=!0);const s={rings:e.map((o=>{const a=[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]];if(r&&o.hasZ){const l=o.zmin+.5*(o.zmax-o.zmin);for(let c=0;c<a.length;c++)a[c].push(l)}if(n&&o.hasM){const l=o.mmin+.5*(o.mmax-o.mmin);for(let c=0;c<a.length;c++)a[c].push(l)}return a})),spatialReference:i};return r&&(s.hasZ=!0),n&&(s.hasM=!0),new JA(s)}constructor(t){super(UMe(t)),this.curveRings=void 0,this.rings=[],this.type="polygon"}get cache(){return this.commitProperty("curveRings"),this.commitProperty("hasM"),this.commitProperty("hasZ"),this.commitProperty("rings"),this.commitProperty("spatialReference"),{}}get centroid(){const t=Cue(this);if(!t||isNaN(t[0])||isNaN(t[1])||this.hasZ&&isNaN(t[2]))return null;const e=new _t;return e.x=t[0],e.y=t[1],e.spatialReference=this.spatialReference,this.hasZ&&(e.z=t[2]),e}writeCurveRings(t,e){e.curveRings=se(t)}get extent(){const t=Gue(this),{spatialReference:e}=this;return t?new Qt({...t,spatialReference:e}):null}get isSelfIntersecting(){return Qle(Ie.getLogger(this),"isSelfIntersecting",{replacement:"Please use simplifyOperator.isSimple() instead.",version:"4.33",warnOnce:!0}),aMe(this.rings)}writeRings(t,e){e.rings=se(this.rings)}addRing(t){if(!t)return;const e=this.rings,i=e.length;if(aX(t)){const r=[];for(let n=0,s=t.length;n<s;n++)r[n]=t[n].toArray();e[i]=r}else e[i]=t.slice();return this.notifyChange("rings"),this}clone(){const t=new JA;return t.spatialReference=this.spatialReference,t.rings=se(this.rings),t.curveRings=se(this.curveRings),t.hasZ=this.hasZ,t.hasM=this.hasM,t}equals(t){if(this===t)return!0;if(t==null)return!1;const e=this.spatialReference,i=t.spatialReference;if(e!=null!=(i!=null)||e!=null&&i!=null&&!e.equals(i)||this.rings.length!==t.rings.length)return!1;const r=([n,s,o,a],[l,c,d,f])=>n===l&&s===c&&(o==null&&d==null||o===d)&&(a==null&&f==null||a===f);for(let n=0;n<this.rings.length;n++){const s=this.rings[n],o=t.rings[n];if(!OF(s,o,r))return!1}return!0}contains(t){if(!t)return!1;const e=HF(t,this.spatialReference);return LG(this,e??t)}isClockwise(t){const e=aX(t)?t.map((i=>this.hasZ?this.hasM?[i.x,i.y,i.z,i.m]:[i.x,i.y,i.z]:[i.x,i.y])):t;return Eue(e)}getPoint(t,e){if(!this._validateInputs(t,e))return null;const i=this.rings[t][e],r=this.hasZ,n=this.hasM;return r&&!n?new _t(i[0],i[1],i[2],void 0,this.spatialReference):n&&!r?new _t(i[0],i[1],void 0,i[2],this.spatialReference):r&&n?new _t(i[0],i[1],i[2],i[3],this.spatialReference):new _t(i[0],i[1],this.spatialReference)}insertPoint(t,e,i){return this._validateInputs(t,e,!0)?(e$(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[t].splice(e,0,i),this.notifyChange("rings"),this):this}removePoint(t,e){if(!this._validateInputs(t,e))return null;const i=new _t(this.rings[t].splice(e,1)[0],this.spatialReference);return this.notifyChange("rings"),i}removeRing(t){if(!this._validateInputs(t,null))return null;const e=this.rings.splice(t,1)[0],i=this.spatialReference,r=e.map((n=>new _t(n,i)));return this.notifyChange("rings"),r}setPoint(t,e,i){return this._validateInputs(t,e)?(e$(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[t][e]=i,this.notifyChange("rings"),this):this}_validateInputs(t,e,i=!1){if(t==null||t<0||t>=this.rings.length)return!1;if(e!=null){const r=this.rings[t];if(i&&(e<0||e>r.length)||!i&&(e<0||e>=r.length))return!1}return!0}toJSON(t){return this.write({},t)}};u([h({readOnly:!0})],br.prototype,"cache",null),u([h({readOnly:!0})],br.prototype,"centroid",null),u([h({json:{write:!0,origins:{"portal-item":{write:!1},"web-map":{write:!1},"web-scene":{write:!1}}}})],br.prototype,"curveRings",void 0),u([Ve("curveRings")],br.prototype,"writeCurveRings",null),u([h({readOnly:!0})],br.prototype,"extent",null),u([h({readOnly:!0})],br.prototype,"isSelfIntersecting",null),u([h({type:[[[Number]]],json:{write:{isRequired:!0}}})],br.prototype,"rings",void 0),u([Ve("rings")],br.prototype,"writeRings",null),br=JA=u([V("esri.geometry.Polygon")],br),br.prototype.toJSON.isDefaultToJSON=!0;var jj;function BMe(t){return!Array.isArray(t[0])}function GMe(t){var e;return typeof((e=t[0])==null?void 0:e[0])=="number"}function qMe(t){var s,o;if(!t)return;let{paths:e,hasM:i,hasZ:r,spatialReference:n}=t;switch(e??(e=[]),GMe(e)&&(e=[e]),(o=(s=e[0])==null?void 0:s[0])==null?void 0:o.length){case 4:r??(r=!0),i??(i=!0);break;case 3:r??(r=i!==!0),i??(i=!r);break;default:r??(r=!1),i??(i=!1)}return n??(n=et.WGS84),{...t,hasM:i,hasZ:r,paths:e,spatialReference:n}}let Yr=jj=class extends Cs{constructor(t){super(qMe(t)),this.curvePaths=void 0,this.paths=[],this.type="polyline"}get cache(){return this.commitProperty("curvePaths"),this.commitProperty("hasM"),this.commitProperty("hasZ"),this.commitProperty("paths"),this.commitProperty("spatialReference"),{}}writeCurvePaths(t,e){e.curvePaths=se(t)}get extent(){const t=que(this),{spatialReference:e}=this;return t?new Qt({...t,spatialReference:e}):null}writePaths(t,e){e.paths=se(this.paths)}addPath(t){if(!t)return;const e=this.paths,i=e.length;if(BMe(t)){const r=[];for(let n=0,s=t.length;n<s;n++)r[n]=t[n].toArray();e[i]=r}else e[i]=t.slice();return this.notifyChange("paths"),this}clone(){const t=new jj;return t.spatialReference=this.spatialReference,t.paths=se(this.paths),t.curvePaths=se(this.curvePaths),t.hasZ=this.hasZ,t.hasM=this.hasM,t}getPoint(t,e){if(!this._validateInputs(t,e))return null;const i=this.paths[t][e],r=this.hasZ,n=this.hasM;return r&&!n?new _t(i[0],i[1],i[2],void 0,this.spatialReference):n&&!r?new _t(i[0],i[1],void 0,i[2],this.spatialReference):r&&n?new _t(i[0],i[1],i[2],i[3],this.spatialReference):new _t(i[0],i[1],this.spatialReference)}insertPoint(t,e,i){return this._validateInputs(t,e,!0)?(e$(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[t].splice(e,0,i),this.notifyChange("paths"),this):this}removePath(t){if(!this._validateInputs(t,null))return null;const e=this.paths.splice(t,1)[0],i=this.spatialReference,r=e.map((n=>new _t(n,i)));return this.notifyChange("paths"),r}removePoint(t,e){if(!this._validateInputs(t,e))return null;const i=new _t(this.paths[t].splice(e,1)[0],this.spatialReference);return this.notifyChange("paths"),i}setPoint(t,e,i){return this._validateInputs(t,e)?(e$(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[t][e]=i,this.notifyChange("paths"),this):this}_validateInputs(t,e,i=!1){if(t==null||t<0||t>=this.paths.length)return!1;if(e!=null){const r=this.paths[t];if(i&&(e<0||e>r.length)||!i&&(e<0||e>=r.length))return!1}return!0}toJSON(t){return this.write({},t)}};u([h({readOnly:!0})],Yr.prototype,"cache",null),u([h({json:{write:!0,origins:{"portal-item":{write:!1},"web-map":{write:!1},"web-scene":{write:!1}}}})],Yr.prototype,"curvePaths",void 0),u([Ve("curvePaths")],Yr.prototype,"writeCurvePaths",null),u([h({readOnly:!0})],Yr.prototype,"extent",null),u([h({type:[[[Number]]],json:{write:{isRequired:!0}}})],Yr.prototype,"paths",void 0),u([Ve("paths")],Yr.prototype,"writePaths",null),Yr=jj=u([V("esri.geometry.Polyline")],Yr),Yr.prototype.toJSON.isDefaultToJSON=!0;function ia(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function mx(t){return t.points!==void 0}function JC(t){return t.x!==void 0&&t.y!==void 0}function Xs(t){return t.paths!==void 0||t.curvePaths!==void 0}function bn(t){return t.rings!==void 0||t.curveRings!==void 0}function hp(t){return t==null?null:t instanceof Cs?t:JC(t)?_t.fromJSON(t):Xs(t)?Yr.fromJSON(t):bn(t)?br.fromJSON(t):mx(t)?_c.fromJSON(t):ia(t)?Qt.fromJSON(t):null}function bw(t){return t?JC(t)?"esriGeometryPoint":Xs(t)?"esriGeometryPolyline":bn(t)?"esriGeometryPolygon":ia(t)?"esriGeometryEnvelope":mx(t)?"esriGeometryMultipoint":null:null}const HMe={esriGeometryPoint:_t,esriGeometryPolyline:Yr,esriGeometryPolygon:br,esriGeometryEnvelope:Qt,esriGeometryMultipoint:_c,esriGeometryMultiPatch:br};function WMe(t){return t&&HMe[t]||null}const ZMe=is()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),lX=is()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"}),R$={base:Cs,key:"type",typeMap:{extent:Qt,multipoint:_c,point:_t,polyline:Yr,polygon:br}};var Uj;let ay=Uj=class extends ve{constructor(t){super(t),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(t){return(t%=360)<0&&(t+=360),t}clone(){return new Uj({rotation:this.rotation,scale:this.scale,targetGeometry:this.targetGeometry!=null?this.targetGeometry.clone():null,camera:this.camera!=null?this.camera.clone():null})}};u([h({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:vz}}}}})],ay.prototype,"rotation",void 0),u([yi("rotation")],ay.prototype,"castRotation",null),u([h({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:vz}}}}})],ay.prototype,"scale",void 0),u([h({types:R$,json:{read:hp,write:!0,origins:{"web-scene":{read:hp,write:{overridePolicy:vz}}}}})],ay.prototype,"targetGeometry",void 0),u([h({type:JCe,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}})],ay.prototype,"camera",void 0),ay=Uj=u([V("esri.Viewpoint")],ay);const ps=ay;function vz(){return{enabled:!this.camera}}let YA=class Hue{constructor(){this._emitter=new Hue.EventEmitter(this)}emit(e,i){return this._emitter.emit(e,i)}on(e,i){return this._emitter.on(e,i)}once(e,i){return this._emitter.once(e,i)}hasEventListener(e){return this._emitter.hasEventListener(e)}};(function(t){class e{constructor(n=null){this._target=n,this._listenersMap=null}clear(){var n;(n=this._listenersMap)==null||n.clear(),this._listenersMap=null}destroy(){this.clear()}emit(n,s){var c;let o=(c=this._listenersMap)==null?void 0:c.get(n);if(!o)return!1;const a=this._target||this;let l=!1;for(const d of o.slice()){const f="deref"in d?d.deref():d;f?f==null||f.call(a,s):l=!0}return l&&(o=o.filter((d=>!("deref"in d)||d.deref()!=null)),this._listenersMap.set(n,o)),o.length>0}on(n,s){if(Array.isArray(n)){const a=n.map((l=>this.on(l,s)));return yw(a)}if(n.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap??(this._listenersMap=new Map);const o=this._listenersMap.get(n)||[];return o.push(s),this._listenersMap.set(n,o),Ei((()=>{var c;const a=(c=this._listenersMap)==null?void 0:c.get(n),l=(a==null?void 0:a.indexOf(s))??-1;l>=0&&a.splice(l,1)}))}once(n,s){const o=this.on(n,(a=>{o.remove();const l="deref"in s?s.deref():s;l==null||l.call(null,a)}));return o}hasEventListener(n){var o;const s=(o=this._listenersMap)==null?void 0:o.get(n);return s!=null&&s.length>0}}t.EventEmitter=e,t.EventedMixin=r=>{let n=class extends r{constructor(){super(...arguments),this._emitter=new e}destroy(){this._emitter.clear()}emit(s,o){return this._emitter.emit(s,o)}on(s,o){return this._emitter.on(s,o)}once(s,o){return this._emitter.once(s,o)}hasEventListener(s){return this._emitter.hasEventListener(s)}};return n=u([V("esri.core.Evented")],n),n};let i=class extends tt{constructor(){super(...arguments),this._emitter=new YA.EventEmitter(this)}destroy(){this._emitter.clear()}emit(r,n){return this._emitter.emit(r,n)}on(r,n){return this._emitter.on(r,n)}once(r,n){return this._emitter.once(r,n)}hasEventListener(r){return this._emitter.hasEventListener(r)}};i=u([V("esri.core.Evented.EventedAccessor")],i),t.EventedAccessor=i})(YA||(YA={}));const ad=YA;var Vi;(function(t){t[t.ADD=1]="ADD",t[t.REMOVE=2]="REMOVE",t[t.MOVE=4]="MOVE"})(Vi||(Vi={}));var Bp;let JMe=class{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(e){this.defaultPrevented=!1,this.item=e}},YMe=class{constructor(e,i,r,n,s){this.target=e,this.added=i,this.removed=r,this.start=n,this.deleteCount=s}};const tc=new Bg(JMe,void 0,(t=>{t.item=null,t.target=null,t.defaultPrevented=!1,t.cancellable=!1}));function cX(t){t&&typeof t=="object"&&"destroy"in t&&typeof t.destroy=="function"&&t.destroy()}function bz(t){return t?t instanceof Cy?t.toArray():t.length?Array.prototype.slice.apply(t):[]:[]}function wz(t){if(t!=null&&t.length)return t[0]}function XMe(t,e,i,r){const n=Math.min(t.length-i,e.length-r);let s=0;for(;s<n&&t[i+s]===e[r+s];)s++;return s}function Wue(t,e,i,r){e&&e.forEach(((n,s,o)=>{t.push(n),Wue(t,i.call(r,n,s,o),i,r)}))}const Wm=new Set,Zm=new Set,Jm=new Set,_z=new Map;let KMe=0;var Gb;let Cy=(Gb=class extends ad.EventedAccessor{static isCollection(e){return e!=null&&e instanceof Bp}constructor(e){super(e),this._chgListeners=[],this._notifications=null,this._updating=!1,this._timer=null,this._observable=new gw,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:KMe++})}normalizeCtorArgs(e){return e?Array.isArray(e)||e instanceof Bp?{items:e}:e:{}}destroy(){this._removeAllRaw(),this._timer&&this._timer.remove(),this._emitter.destroy(),this._notifications=null}*[Symbol.iterator](){yield*this.items}get items(){return vt(this._observable),this._items}set items(e){this._emitBeforeChanges(Vi.ADD)||(this._splice(0,this.length,bz(e)),this._emitAfterChanges(Vi.ADD))}hasEventListener(e){return!this.destroyed&&(e==="change"?this._chgListeners.length>0:this._emitter.hasEventListener(e))}on(e,i){if(this.destroyed)return Ei();if(e==="change"){const r=this._chgListeners,n={removed:!1,callback:i};return r.push(n),this._notifications&&this._notifications.push({listeners:r.slice(),items:this._items.slice(),changes:[]}),Ei((()=>{n.removed=!0,r.splice(r.indexOf(n),1)}))}return this._emitter.on(e,i)}once(e,i){const r="deref"in i?()=>i.deref():()=>i,n=this.on(e,(s=>{var o;(o=r())==null||o.call(null,s),n.remove()}));return n}add(e,i){if(vt(this._observable),this._emitBeforeChanges(Vi.ADD))return this;const r=this.getNextIndex(i??null);return this._splice(r,0,[e]),this._emitAfterChanges(Vi.ADD),this}addMany(e,i=this._items.length){if(vt(this._observable),!(e!=null&&e.length))return this;if(this._emitBeforeChanges(Vi.ADD))return this;const r=this.getNextIndex(i);return this._splice(r,0,bz(e)),this._emitAfterChanges(Vi.ADD),this}at(e){if(vt(this._observable),(e=Math.trunc(e)||0)<0&&(e+=this.length),!(e<0||e>=this.length))return this._items[e]}removeAll(){if(vt(this._observable),!this.length||this._emitBeforeChanges(Vi.REMOVE))return[];const e=this._removeAllRaw();return this._emitAfterChanges(Vi.REMOVE),e}_removeAllRaw(){return this.length===0?[]:this._splice(0,this.length)||[]}clone(){return vt(this._observable),this._createNewInstance({items:this._items.map(se)})}concat(...e){vt(this._observable);const i=e.map(bz);return this._createNewInstance({items:this._items.concat(...i)})}drain(e,i){if(vt(this._observable),!this.length||this._emitBeforeChanges(Vi.REMOVE))return;const r=this._splice(0,this.length),n=r.length;for(let s=0;s<n;s++)e.call(i,r[s],s,r);this._emitAfterChanges(Vi.REMOVE)}destroyAll(){this.drain(cX)}destroyMany(e){const i=this.removeMany(e);return i.forEach(cX),i}every(e,i){return vt(this._observable),this._items.every(e,i)}filter(e,i){vt(this._observable);const r=arguments.length===2?this._items.filter(e,i):this._items.filter(e);return this._createNewInstance({items:r})}find(e,i){return vt(this._observable),this._items.find(e,i)}findIndex(e,i){return vt(this._observable),this._items.findIndex(e,i)}flatten(e,i){vt(this._observable);const r=[];return Wue(r,this,e,i),new Bp(r)}forEach(e,i){return vt(this._observable),this._items.forEach(e,i)}getItemAt(e){return vt(this._observable),this._items[e]}getNextIndex(e){vt(this._observable);const i=this.length;return(e=e??i)<0?e=0:e>i&&(e=i),e}includes(e,i=0){return vt(this._observable),this._items.includes(e,i)}indexOf(e,i=0){return vt(this._observable),this._items.indexOf(e,i)}join(e=","){return vt(this._observable),this._items.join(e)}lastIndexOf(e,i=this.length-1){return vt(this._observable),this._items.lastIndexOf(e,i)}map(e,i){vt(this._observable);const r=this._items.map(e,i);return new Bp({items:r})}reorder(e,i=this.length-1){vt(this._observable);const r=this.indexOf(e);if(r!==-1){if(i<0?i=0:i>=this.length&&(i=this.length-1),r!==i){if(this._emitBeforeChanges(Vi.MOVE))return e;this._splice(r,1),this._splice(i,0,[e]),this._emitAfterChanges(Vi.MOVE)}return e}}pop(){if(vt(this._observable),!this.length||this._emitBeforeChanges(Vi.REMOVE))return;const e=wz(this._splice(this.length-1,1));return this._emitAfterChanges(Vi.REMOVE),e}push(...e){return vt(this._observable),this._emitBeforeChanges(Vi.ADD)||(this._splice(this.length,0,e),this._emitAfterChanges(Vi.ADD)),this.length}reduce(e,i){vt(this._observable);const r=this._items;return arguments.length===2?r.reduce(e,i):r.reduce(e)}reduceRight(e,i){vt(this._observable);const r=this._items;return arguments.length===2?r.reduceRight(e,i):r.reduceRight(e)}remove(e){return vt(this._observable),this.removeAt(this.indexOf(e))}removeAt(e){if(vt(this._observable),e<0||e>=this.length||this._emitBeforeChanges(Vi.REMOVE))return;const i=wz(this._splice(e,1));return this._emitAfterChanges(Vi.REMOVE),i}removeMany(e){if(vt(this._observable),!(e!=null&&e.length)||this._emitBeforeChanges(Vi.REMOVE))return[];const i=e instanceof Bp?e.toArray():e,r=this._items,n=[],s=i.length;for(let o=0;o<s;o++){const a=i[o],l=r.indexOf(a);if(l>-1){const c=1+XMe(i,r,o+1,l+1),d=this._splice(l,c);d&&d.length>0&&n.push.apply(n,d),o+=c-1}}return this._emitAfterChanges(Vi.REMOVE),n}reverse(){if(vt(this._observable),this._emitBeforeChanges(Vi.MOVE))return this;const e=this._splice(0,this.length);return e&&(e.reverse(),this._splice(0,0,e)),this._emitAfterChanges(Vi.MOVE),this}shift(){if(vt(this._observable),!this.length||this._emitBeforeChanges(Vi.REMOVE))return;const e=wz(this._splice(0,1));return this._emitAfterChanges(Vi.REMOVE),e}slice(e=0,i=this.length){return vt(this._observable),this._createNewInstance({items:this._items.slice(e,i)})}some(e,i){return vt(this._observable),this._items.some(e,i)}sort(e){if(vt(this._observable),!this.length||this._emitBeforeChanges(Vi.MOVE)||!this._requiresSort(e))return this;const i=this._splice(0,this.length);return arguments.length?i.sort(e):i.sort(),this._splice(0,0,i),this._emitAfterChanges(Vi.MOVE),this}_requiresSort(e=(i,r)=>i===r?0:i<r?-1:1){const i=this.length-1;for(let r=0;r<i;r++)if(e(this.items[r],this.items[r+1])>0)return!0;return!1}splice(e,i,...r){vt(this._observable),arguments.length===1&&(i=this.length),i??(i=0);const n=(i?Vi.REMOVE:0)|(r.length?Vi.ADD:0);if(this._emitBeforeChanges(n))return[];const s=this._splice(e,i,r)||[];return this._emitAfterChanges(n),s}toArray(){return vt(this._observable),this._items.slice()}toJSON(e){return vt(this._observable),this.toArray().map((i=>qC(i)?i.toJSON(e):i))}toLocaleString(){return vt(this._observable),this._items.toLocaleString()}toString(){return vt(this._observable),this._items.toString()}unshift(...e){return vt(this._observable),!e.length||this._emitBeforeChanges(Vi.ADD)||(this._splice(0,0,e),this._emitAfterChanges(Vi.ADD)),this.length}_createNewInstance(e){return new this.constructor(e)}_splice(e,i,r){const n=this._items,s=this.itemType;let o,a;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._updating=!0,this._timer=o2((()=>this._dispatchChange()))),e<0&&(e+=this.length),i){if(a=n.splice(e,i),this.hasEventListener("before-remove")){const l=tc.acquire();l.target=this,l.cancellable=!0;for(let c=0,d=a.length;c<d;c++)o=a[c],l.reset(o),this.emit("before-remove",l),l.defaultPrevented&&(a.splice(c,1),n.splice(e,0,o),e+=1,c-=1,d-=1);tc.release(l)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const l=tc.acquire();l.target=this,l.cancellable=!1;const c=a.length;for(let d=0;d<c;d++)l.reset(a[d]),this.emit("after-remove",l);tc.release(l)}}if(r!=null&&r.length){if(s){const f=[];for(const y of r){const g=s.ensureType(y);g==null&&y!=null||f.push(g)}r=f}const l=this.hasEventListener("before-add"),c=this.hasEventListener("after-add"),d=e===this.length;if(l||c){const f=tc.acquire();f.target=this,f.cancellable=!0;const y=tc.acquire();y.target=this,y.cancellable=!1;for(const g of r)l?(f.reset(g),this.emit("before-add",f),f.defaultPrevented||(d?n.push(g):n.splice(e++,0,g),this._set("length",n.length),c&&(y.reset(g),this.emit("after-add",y)))):(d?n.push(g):n.splice(e++,0,g),this._set("length",n.length),y.reset(g),this.emit("after-add",y));tc.release(y),tc.release(f)}else{if(d)for(const f of r)n.push(f);else n.splice(e,0,...r);this._set("length",n.length)}}if((r!=null&&r.length||a!=null&&a.length)&&this._notifyChangeEvent(r,a),this.hasEventListener("after-splice")){const l=new YMe(this,r,a,e,i);this.emit("after-splice",l)}return a}_emitBeforeChanges(e){let i=!1;if(this.hasEventListener("before-changes")){const r=tc.acquire();r.target=this,r.cancellable=!0,r.type=e,this.emit("before-changes",r),i=r.defaultPrevented,tc.release(r)}return i}_emitAfterChanges(e){if(this.hasEventListener("after-changes")){const i=tc.acquire();i.target=this,i.cancellable=!1,i.type=e,this.emit("after-changes",i),tc.release(i)}this._observable.notify()}_notifyChangeEvent(e,i){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:e,removed:i})}get updating(){return this._updating}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),this._updating=!1,!this._notifications)return;const e=this._notifications;this._notifications=null;for(const i of e){const r=i.changes;Wm.clear(),Zm.clear(),Jm.clear();for(const{added:c,removed:d}of r){if(c)if(Jm.size===0&&Zm.size===0)for(const f of c)Wm.add(f);else for(const f of c)Zm.has(f)?(Jm.add(f),Zm.delete(f)):Jm.has(f)||Wm.add(f);if(d)if(Jm.size===0&&Wm.size===0)for(const f of d)Zm.add(f);else for(const f of d)Wm.has(f)?Wm.delete(f):(Jm.delete(f),Zm.add(f))}const n=ra.acquire();Wm.forEach((c=>{n.push(c)}));const s=ra.acquire();Zm.forEach((c=>{s.push(c)}));const o=this._items,a=i.items,l=ra.acquire();if(Jm.forEach((c=>{a.indexOf(c)!==o.indexOf(c)&&l.push(c)})),i.listeners&&(n.length||s.length||l.length)){const c={target:this,added:n,removed:s,moved:l},d=i.listeners.length;for(let f=0;f<d;f++){const y=i.listeners[f];y.removed||y.callback.call(this,c)}}ra.release(n),ra.release(s),ra.release(l)}Wm.clear(),Zm.clear(),Jm.clear()}},Bp=Gb,Gb.ofType=e=>{if(!e)return Bp;if(_z.has(e))return _z.get(e);let i=null;if(typeof e=="function")i=e.prototype.declaredClass;else if(e.base)i=e.base.prototype.declaredClass;else for(const n in e.typeMap){const s=e.typeMap[n].prototype.declaredClass;i?i+=` | ${s}`:i=s}let r=class extends Bp{};return u([lG({Type:e,ensureType:typeof e=="function"?En(e):lp(e)})],r.prototype,"itemType",void 0),r=u([V(`esri.core.Collection<${i}>`)],r),_z.set(e,r),r},Gb);u([h()],Cy.prototype,"_updating",void 0),u([h()],Cy.prototype,"length",void 0),u([h()],Cy.prototype,"items",null),u([h({readOnly:!0})],Cy.prototype,"updating",null),Cy=Bp=u([V("esri.core.Collection")],Cy);const Ze=Cy;let ph=class extends Ze{constructor(e){super(e),this.getCollections=null}initialize(){this.addHandles(Lle((()=>this._refresh()),td))}destroy(){this.getCollections=null}_refresh(){const e=this.getCollections!=null?this.getCollections():null;if(e==null)return void this.removeAll();let i=0;for(const r of e)r!=null&&(i=this._processCollection(i,r));this.splice(i)}_createNewInstance(e){return new Ze(e)}_processCollection(e,i){if(!i)return e;const r=this.itemFilterFunction??(n=>!!n);for(const n of i)if(n){if(r(n)){const s=this.indexOf(n,e);s>=0?s!==e&&this.reorder(n,e):this.add(n,e),++e}if(this.getChildrenFunction){const s=this.getChildrenFunction(n);if(Array.isArray(s))for(const o of s)e=this._processCollection(e,o);else e=this._processCollection(e,s)}}return e}};u([h()],ph.prototype,"getCollections",void 0),u([h()],ph.prototype,"getChildrenFunction",void 0),u([h()],ph.prototype,"itemFilterFunction",void 0),ph=u([V("esri.core.CollectionFlattener")],ph);let YC=class{constructor(e=i=>i.values().next().value){this._peeker=e,this._observable=new gw,this._items=new Set}get length(){return vt(this._observable),this._items.size}clear(){this.length!==0&&(this._items.clear(),this._observable.notify())}last(){if(this.length===0)return;let e;for(e of this._items);return e}peek(){if(this.length!==0)return this._peeker(this._items)}push(e){this.contains(e)||(this._items.add(e),this._observable.notify())}contains(e){return vt(this._observable),this._items.has(e)}pop(){if(this.length===0)return;const e=this.peek();return this._items.delete(e),this._observable.notify(),e}popLast(){if(this.length===0)return;const e=this.last();return this._items.delete(e),this._observable.notify(),e}remove(e){this.contains(e)&&(this._items.delete(e),this._observable.notify())}filter(e){const i=this.length;return this._items.forEach((r=>{e(r)||this._items.delete(r)})),i!==this._items.size&&this._observable.notify(),this}*[Symbol.iterator](){vt(this._observable),yield*this._items}};const Zue=new FinalizationRegistry((t=>{t.close()}));function QMe(t,e){Zue.register(t,e,e)}function e2e(t){Zue.unregister(t)}function Jue(t,e){return new Proxy({},{get:(i,r,n)=>(...s)=>{let o,a;const l=s[s.length-1];return t2e(l)&&(o=l.signal,a=l.transferList,s.pop()),t.apply(e?`${e}.${r.toString()}`:r.toString(),s,{transferList:a,signal:o})}})}function t2e(t){return typeof t=="object"&&!Array.isArray(t)&&t!=null&&("signal"in t||"transferList"in t||Object.keys(t).length===0)}const i2e={statsWorker:()=>ye(()=>import("./statsWorker-BfgaaJku.js"),__vite__mapDeps([0,1,2,3])),geometryEngineWorker:()=>ye(()=>import("./geometryEngineWorker-BNwIbmiN.js"),__vite__mapDeps([4,5,6,7,8])),arcadeGeometryOperatorsWorker:()=>ye(()=>import("./operatorsWorker-C_i_Gdjh.js"),[]),CSVSourceWorker:()=>ye(()=>import("./CSVSourceWorker-C0BcdyR7.js"),__vite__mapDeps([9,10,8,11,12,13,14,15,16,17,18,1,2,3,19,20,21,22,23,24,25,26])),EdgeProcessingWorker:()=>ye(()=>import("./EdgeProcessingWorker-Be3YChZW.js"),__vite__mapDeps([27,28,29,30,31,32,33,34,35,36,37,38])),ElevationSamplerWorker:()=>ye(()=>import("./ElevationSamplerWorker-B72ie5i3.js"),__vite__mapDeps([39,23,40,41,42,43,44,45,46,47,48,30,49])),FeatureServiceSnappingSourceWorker:()=>ye(()=>import("./FeatureServiceSnappingSourceWorker-Bxwl65-_.js"),__vite__mapDeps([50,11,12,8,13,14,15,16,17,18,1,2,3,19,20,21,22,23,24,51])),GeoJSONSourceWorker:()=>ye(()=>import("./GeoJSONSourceWorker-gRHm8T60.js"),__vite__mapDeps([52,14,11,12,8,13,15,16,17,18,1,2,3,19,20,21,22,23,24,53,10,26,54])),LercWorker:()=>ye(()=>import("./LercWorker-DQs8yLDZ.js"),[]),MemorySourceWorker:()=>ye(()=>import("./MemorySourceWorker-1QCDOso7.js"),__vite__mapDeps([55,14,56,11,12,8,13,15,16,17,18,1,2,3,19,20,21,22,23,24,26,54,10])),PBFDecoderWorker:()=>ye(()=>import("./PBFDecoderWorker-B1zC3uLp.js"),__vite__mapDeps([57,58,14])),FeaturePipelineWorker:()=>ye(()=>import("./FeaturePipelineWorker-DRX3AZfu.js"),__vite__mapDeps([59,60,61,37,62,63,12,8,17,14,64,65,66,67,68,69,70,24,13,15,16,18,1,2,3,19,20,71,72,73,74,75,53,10,26,54,76,77,78])),PointCloudWorker:()=>ye(()=>import("./PointCloudWorker-deKED3gB.js"),__vite__mapDeps([79,80,42,81,82,83,84,35,85,43,44,45,86,87])),RasterWorker:()=>ye(()=>import("./RasterWorker-B0kQSwgy.js"),__vite__mapDeps([88,89,90,91,7,92,93,94,95])),SceneLayerSnappingSourceWorker:()=>ye(()=>import("./SceneLayerSnappingSourceWorker-CEwcwkBS.js"),__vite__mapDeps([96,97,98,42,87,43,81,99,86,30,32,33,34,29,31,35,36,37,38])),SceneLayerWorker:()=>ye(()=>import("./SceneLayerWorker-QvA1EQsE.js"),__vite__mapDeps([100,40,48,101,46,98,42,87,43,81,102,84,35,103,104,105,106,107,85,80,44,45,86])),WFSSourceWorker:()=>ye(()=>import("./WFSSourceWorker-Dr4ZGUt9.js"),__vite__mapDeps([108,14,11,12,8,13,15,16,17,18,1,2,3,19,20,21,22,23,24,53,10,54,109,110])),WorkerTileHandler:()=>ye(()=>import("./WorkerTileHandler-COOgsS6H.js"),__vite__mapDeps([111,112,113,114,68,115,116,37,69])),Lyr3DWorker:()=>ye(()=>import("./Lyr3DWorker-BXBfaM4v.js"),[]),Feature3DPipelineWorker:()=>ye(()=>import("./Feature3DPipelineWorker-3DUlKWFs.js"),__vite__mapDeps([117,13,14,15,16,17,12,8,18,1,2,3,19,20,43,118,105,47,40,101,46,119,82,120,121,122,123,124,30,34,125,98,42,87,81,97,35,107,106,126,85,80,44,45,86,127,128,129,130,29,31,131,132,133,104,23])),TextureCompressionWorker:()=>ye(()=>import("./TextureCompressionWorker-BowXcYHN.js"),__vite__mapDeps([134,124]))},Yue="worker:port-closed";var ks;(function(t){t[t.HANDSHAKE=0]="HANDSHAKE",t[t.OPEN=1]="OPEN",t[t.OPENED=2]="OPENED",t[t.RESPONSE=3]="RESPONSE",t[t.INVOKE=4]="INVOKE",t[t.ABORT=5]="ABORT",t[t.CLOSE=6]="CLOSE",t[t.OPEN_PORT=7]="OPEN_PORT",t[t.ON=8]="ON"})(ks||(ks={}));let r2e=0;function Xue(){return r2e++}function n2e(t){return t&&typeof t=="object"&&("result"in t||"transferList"in t)}function XC(t){return t?typeof t=="string"?JSON.stringify({name:"message",message:t}):t.toJSON?JSON.stringify(t):JSON.stringify({name:t.name,message:t.message,details:t.details||{stack:t.stack}}):null}function zG(t,e,i,r){if(e.type===ks.OPEN_PORT)return void t.postMessage(e,[e.port]);if(e.type!==ks.INVOKE&&e.type!==ks.RESPONSE)return void t.postMessage(e);let n;if(n2e(i)?(n=uX(i.transferList),e.data=i.result):(n=uX(r),e.data=i),n){if(fe("ff")){for(const s of n)if("byteLength"in s&&s.byteLength>267386880){const o="Worker call with large ArrayBuffer would crash Firefox";switch(e.type){case ks.INVOKE:throw o;case ks.RESPONSE:return void zG(t,{type:ks.RESPONSE,jobId:e.jobId,error:XC(o)})}}}t.postMessage(e,n)}else t.postMessage(e)}function KC(t){if(!t)return null;const e=t.data;return e?typeof e=="string"?JSON.parse(e):e:null}function uX(t){if(!(t!=null&&t.length))return null;if(fe("esri-workers-arraybuffer-transfer"))return t;const e=t.filter((i=>!s2e(i)));return e.length?e:null}function s2e(t){var e;return t instanceof ArrayBuffer||((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="ArrayBuffer"}async function Rpt(t){try{return await t}catch(e){const i=(e==null?void 0:e.name)===Yue;if(!(Tn(e)||i))throw e;return}}const{CLOSE:dX,ABORT:hX,INVOKE:pX,RESPONSE:VT,OPEN_PORT:fX,ON:o2e}=ks,a2e=2;let l2e=class{constructor(e){this._invoke=e,this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._timer=null,this._process=this._process.bind(this)}push(e){e.type===ks.ABORT?this._cancelledJobIds.add(e.jobId):(this._invokeMessages.push(e),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const e of this._invokeMessages)this._cancelledJobIds.has(e.jobId)||this._invoke(e);this._cancelledJobIds.clear(),this._invokeMessages.length=0}};var xc;let i$=(xc=class{static connect(e,i){const r=new MessageChannel;let n;n=typeof e=="function"?new e:"default"in e&&typeof e.default=="function"?new e.default:e;const s=new xc(r.port1,{channel:r,client:n,schedule:i});return typeof n=="object"&&"remoteClient"in n&&(n.remoteClient=s),xc.clients.set(s,n),r.port2}static loadWorker(e){const i=i2e[e];return i?i():Promise.resolve(null)}constructor(e,i,r,n){this._port=e,this._jobQueue=r,this._lowPriorityJobQueue=n,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new l2e((s=>this._onInvokeMessage(s))),this._client=i.client,this._onMessage=this._onMessage.bind(this),this._channel=i.channel,this._schedule=i.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}close(){this._post({type:dX}),this._close()}isBusy(){return this._outJobs.size>0}invoke(e,i,r){return this.apply(e,[i],r)}apply(e,i,r){const n=r==null?void 0:r.signal,s=r==null?void 0:r.transferList;if(!this._port)return Promise.reject(new ie(Yue,`Cannot call invoke('${e}'), port is closed`,{methodName:e,data:i}));const o=Xue();return new Promise(((a,l)=>{if(Nc(n))return this._processWork(),void l(fr());const c=ed(n,(()=>{const f=this._outJobs.get(o);f&&(this._outJobs.delete(o),this._processWork(),Nr(f.abortHandle),this._post({type:hX,jobId:o}),l(fr()))})),d={resolve:a,reject:l,abortHandle:c,debugInfo:e};this._outJobs.set(o,d),this._post({type:pX,jobId:o,methodName:e,abortable:n!=null},i,s)}))}createInvokeProxy(e){return Jue(this,e)}on(e,i){const r=new MessageChannel;function n(s){i(s.data)}return this._port.postMessage({type:ks.ON,eventType:e,port:r.port2},[r.port2]),r.port1.addEventListener("message",n),r.port1.start(),Ei((()=>{r.port1.postMessage({type:ks.CLOSE}),r.port1.close(),r.port1.removeEventListener("message",n)}))}jobAdded(){this._processWork()}openPort(){const e=new MessageChannel;return this._post({type:fX,port:e.port2}),e.port1}_processWork(){var o,a;if(this._outJobs.size>=a2e)return;const e=((o=this._jobQueue)==null?void 0:o.pop())??((a=this._lowPriorityJobQueue)==null?void 0:a.pop());if(!e)return;const{methodName:i,data:r,invokeOptions:n,resolver:s}=e;this.apply(i,r,n).then((l=>s.resolve(l))).catch((l=>s.reject(l)))}_close(){this._channel&&(this._channel=void 0),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach((e=>{Nr(e.abortHandle),e.reject(fr(`Worker closing, aborting job calling '${e.debugInfo}'`))})),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=null,this._client=null,this._schedule=null}_onMessage(e){this._schedule!=null?this._schedule((()=>this._processMessage(e,!0))):this._processMessage(e,!1)}_processMessage(e,i){const r=KC(e);if(r)switch(r.type){case VT:this._onResponseMessage(r);break;case pX:i?this._onInvokeMessage(r):this._invokeQueue.push(r);break;case hX:this._onAbortMessage(r);break;case dX:this._onCloseMessage();break;case fX:this._onOpenPortMessage(r);break;case o2e:this._onOnMessage(r)}}_onAbortMessage(e){const i=this._inJobs,r=e.jobId,n=i.get(r);this._invokeQueue.push(e),n&&(n.controller&&n.controller.abort(),i.delete(r))}_onCloseMessage(){const e=this._client;this._close(),e&&"destroy"in e&&xc.clients.get(this)===e&&e.destroy(),xc.clients.delete(this),e!=null&&e.remoteClient&&(e.remoteClient=null)}_onInvokeMessage(e){const{methodName:i,jobId:r,data:n=[],abortable:s}=e,o=s?new AbortController:null,a=this._inJobs;let l,c=this._client,d=c[i];try{if(!d&&i&&i.includes(".")){const f=i.split(".");for(let y=0;y<f.length-1;y++)c=c[f[y]],d=c[f[y+1]]}if(typeof d!="function")throw new TypeError(`${i} is not a function`);n.push({client:this,signal:o?o.signal:null}),l=d.apply(c,n)}catch(f){return void this._post({type:VT,jobId:r,error:XC(f)})}gp(l)?(a.set(r,{controller:o,promise:l}),l.then((f=>{a.has(r)&&(a.delete(r),this._post({type:VT,jobId:r},f))}),(f=>{a.has(r)&&(a.delete(r),Tn(f)||this._post({type:VT,jobId:r,error:XC(f||{message:`Error encountered at method ${i}`})}))}))):this._post({type:VT,jobId:r},l)}_onOpenPortMessage(e){new xc(e.port,{client:this._client})}_onOnMessage(e){const{port:i}=e,r=this._client.on(e.eventType,(s=>{i.postMessage(s)})),n=$$(e.port,"message",(s=>{const o=KC(s);(o==null?void 0:o.type)===ks.CLOSE&&(n.remove(),r.remove(),i.close())}))}_onResponseMessage(e){const{jobId:i,error:r,data:n}=e,s=this._outJobs;if(!s.has(i))return;const o=s.get(i);s.delete(i),this._processWork(),Nr(o.abortHandle),r?o.reject(ie.fromJSON(JSON.parse(r))):o.resolve(n)}_post(e,i,r){return zG(this._port,e,i,r)}},xc.kernelInfo={buildDate:Fce,fullVersion:SG,revision:Nce},xc.clients=new Map,xc),c2e=class{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new YC,this._ongoingLowPriorityJobsQueue=new YC}destroy(){this.close()}get closed(){var e;return!((e=this._clients)!=null&&e.length)}open(e,i){return new Promise(((r,n)=>{let s=!0;const o=a=>{Wi(i.signal),s&&(s=!1,a())};this._clients.length=e.length,this._clientPromises.length=e.length,this._inUseClients.length=e.length;for(let a=0;a<e.length;++a){const l=e[a];gp(l)?this._clientPromises[a]=l.then((c=>(this._clients[a]=new i$(c,i,this._ongoingJobsQueue,this._ongoingLowPriorityJobsQueue),o(r),this._clients[a])),(()=>(o(n),null))):(this._clients[a]=new i$(l,i,this._ongoingJobsQueue,this._ongoingLowPriorityJobsQueue),this._clientPromises[a]=Promise.resolve(this._clients[a]),o(r))}}))}broadcast(e,i,r){const n=new Array(this._clientPromises.length);for(let s=0;s<this._clientPromises.length;++s){const o=this._clientPromises[s];n[s]=o.then((a=>a==null?void 0:a.invoke(e,i,r)))}return n}close(){let e;for(;e=this._ongoingJobsQueue.pop();)e.resolver.reject(fr(`Worker closing, aborting job calling '${e.methodName}'`));for(;e=this._ongoingLowPriorityJobsQueue.pop();)e.resolver.reject(fr(`Worker closing, aborting job calling '${e.methodName}'`));for(const i of this._clientPromises)i.then((r=>r==null?void 0:r.close()));this._clients.length=0,this._clientPromises.length=0,this._inUseClients.length=0,e2e(this)}invoke(e,i,r){return this.apply(e,[i],r)}apply(e,i,r){const n=Nl();((r==null?void 0:r.priority)==="low"?this._ongoingLowPriorityJobsQueue:this._ongoingJobsQueue).push({methodName:e,data:i,invokeOptions:r,resolver:n});for(let s=0;s<this._clientPromises.length;s++){const o=this._clients[s];o?o.jobAdded():this._clientPromises[s].then((a=>a==null?void 0:a.jobAdded()))}return n.promise}createInvokeProxy(e){return Jue(this,e)}on(e,i){return Promise.all(this._clientPromises).then((()=>yw(this._clients.map((r=>r.on(e,i))))))}openPorts(){return new Promise((e=>{const i=new Array(this._clientPromises.length);let r=i.length;for(let n=0;n<this._clientPromises.length;++n)this._clientPromises[n].then((s=>{s&&(i[n]=s.openPort()),--r===0&&e(i)}))}))}get test(){}};const u2e={async request(t,e){var o,a;const i=t.options,r=i.responseType;i.signal=e==null?void 0:e.signal,i.responseType=r==="native"||r==="native-request-init"?"native-request-init":r&&["blob","json","text"].includes(r)&&((o=bj(t.url))!=null&&o.after)?r:"array-buffer";const n=await fi(t.url,i),s={data:n.data,httpStatus:n.httpStatus,ssl:n.ssl};switch((a=n.requestOptions)==null?void 0:a.responseType){case"native-request-init":return delete s.data.signal,s;case"blob":s.data=await s.data.arrayBuffer();break;case"json":s.data=new TextEncoder().encode(JSON.stringify(s.data)).buffer;break;case"text":s.data=new TextEncoder().encode(s.data).buffer}return{result:s,transferList:[s.data]}}};let JI;var lae,cae;const d2e=((lae=globalThis.esriConfig)==null?void 0:lae.locale)??((cae=globalThis.dojoConfig)==null?void 0:cae.locale);var uae;const YI=(uae=globalThis.document)==null?void 0:uae.documentElement;function Kue(){var i;const t=YI==null?void 0:YI.getAttribute("lang"),e=(i=globalThis.navigator)==null?void 0:i.language;return d2e??t??e??"en"}function Wa(){return JI===void 0&&(JI=Kue()),JI}const h2e=/^(?<language>[a-z]{2,3})(?:-[a-z]{3})?(?:-[A-Z][a-z]{3})?(?:-(?<region>[A-Z]{2}|\d{3}))?(?:-.*)?$/;function VG(t=Wa()){var e;return(e=h2e.exec(t))==null?void 0:e.groups}const XA=[];function jG(t){return XA.push(t),Ei((()=>{XA.splice(XA.indexOf(t),1)}))}const KA=[];function UG(t){return KA.push(t),Ei((()=>KA.splice(KA.indexOf(t),1)))}function mX(){const t=Kue();JI!==t&&([...KA].forEach((e=>e(t))),JI=t,[...XA].forEach((e=>e(t))))}var dae;(dae=globalThis.addEventListener)==null||dae.call(globalThis,"languagechange",mX),YI&&new MutationObserver((()=>{mX()})).observe(YI,{attributeFilter:["lang"]});const Ya="system",Lg="unknown",pp="UTC",p2e=Intl.DateTimeFormat().resolvedOptions().timeZone,yX=new Map([["AUS Central Standard Time","Australia/Darwin"],["AUS Eastern Standard Time","Australia/Sydney"],["Afghanistan Standard Time","Asia/Kabul"],["Alaskan Standard Time","America/Anchorage"],["Aleutian Standard Time","America/Adak"],["Altai Standard Time","Asia/Barnaul"],["Arab Standard Time","Asia/Riyadh"],["Arabian Standard Time","Asia/Dubai"],["Arabic Standard Time","Asia/Baghdad"],["Argentina Standard Time","America/Buenos_Aires"],["Astrakhan Standard Time","Europe/Astrakhan"],["Atlantic Standard Time","America/Halifax"],["Aus Central W. Standard Time","Australia/Eucla"],["Azerbaijan Standard Time","Asia/Baku"],["Azores Standard Time","Atlantic/Azores"],["Bahia Standard Time","America/Bahia"],["Bangladesh Standard Time","Asia/Dhaka"],["Belarus Standard Time","Europe/Minsk"],["Bougainville Standard Time","Pacific/Bougainville"],["Canada Central Standard Time","America/Regina"],["Cape Verde Standard Time","Atlantic/Cape_Verde"],["Caucasus Standard Time","Asia/Yerevan"],["Cen. Australia Standard Time","Australia/Adelaide"],["Central America Standard Time","America/Guatemala"],["Central Asia Standard Time","Asia/Bishkek"],["Central Brazilian Standard Time","America/Cuiaba"],["Central Europe Standard Time","Europe/Budapest"],["Central European Standard Time","Europe/Warsaw"],["Central Pacific Standard Time","Pacific/Guadalcanal"],["Central Standard Time","America/Chicago"],["Central Standard Time (Mexico)","America/Mexico_City"],["Chatham Islands Standard Time","Pacific/Chatham"],["China Standard Time","Asia/Shanghai"],["Cuba Standard Time","America/Havana"],["Dateline Standard Time","Etc/GMT+12"],["E. Africa Standard Time","Africa/Nairobi"],["E. Australia Standard Time","Australia/Brisbane"],["E. Europe Standard Time","Europe/Chisinau"],["E. South America Standard Time","America/Sao_Paulo"],["Easter Island Standard Time","Pacific/Easter"],["Eastern Standard Time","America/New_York"],["Eastern Standard Time (Mexico)","America/Cancun"],["Egypt Standard Time","Africa/Cairo"],["Ekaterinburg Standard Time","Asia/Yekaterinburg"],["FLE Standard Time","Europe/Kiev"],["Fiji Standard Time","Pacific/Fiji"],["GMT Standard Time","Europe/London"],["GTB Standard Time","Europe/Bucharest"],["Georgian Standard Time","Asia/Tbilisi"],["Greenland Standard Time","America/Godthab"],["Greenwich Standard Time","Atlantic/Reykjavik"],["Haiti Standard Time","America/Port-au-Prince"],["Hawaiian Standard Time","Pacific/Honolulu"],["India Standard Time","Asia/Calcutta"],["Iran Standard Time","Asia/Tehran"],["Israel Standard Time","Asia/Jerusalem"],["Jordan Standard Time","Asia/Amman"],["Kaliningrad Standard Time","Europe/Kaliningrad"],["Korea Standard Time","Asia/Seoul"],["Libya Standard Time","Africa/Tripoli"],["Line Islands Standard Time","Pacific/Kiritimati"],["Lord Howe Standard Time","Australia/Lord_Howe"],["Magadan Standard Time","Asia/Magadan"],["Magallanes Standard Time","America/Punta_Arenas"],["Marquesas Standard Time","Pacific/Marquesas"],["Mauritius Standard Time","Indian/Mauritius"],["Middle East Standard Time","Asia/Beirut"],["Montevideo Standard Time","America/Montevideo"],["Morocco Standard Time","Africa/Casablanca"],["Mountain Standard Time","America/Denver"],["Mountain Standard Time (Mexico)","America/Mazatlan"],["Myanmar Standard Time","Asia/Rangoon"],["N. Central Asia Standard Time","Asia/Novosibirsk"],["Namibia Standard Time","Africa/Windhoek"],["Nepal Standard Time","Asia/Katmandu"],["New Zealand Standard Time","Pacific/Auckland"],["Newfoundland Standard Time","America/St_Johns"],["Norfolk Standard Time","Pacific/Norfolk"],["North Asia East Standard Time","Asia/Irkutsk"],["North Asia Standard Time","Asia/Krasnoyarsk"],["North Korea Standard Time","Asia/Pyongyang"],["Omsk Standard Time","Asia/Omsk"],["Pacific SA Standard Time","America/Santiago"],["Pacific Standard Time","America/Los_Angeles"],["Pacific Standard Time (Mexico)","America/Tijuana"],["Pakistan Standard Time","Asia/Karachi"],["Paraguay Standard Time","America/Asuncion"],["Qyzylorda Standard Time","Asia/Qyzylorda"],["Romance Standard Time","Europe/Paris"],["Russia Time Zone 10","Asia/Srednekolymsk"],["Russia Time Zone 11","Asia/Kamchatka"],["Russia Time Zone 3","Europe/Samara"],["Russian Standard Time","Europe/Moscow"],["SA Eastern Standard Time","America/Cayenne"],["SA Pacific Standard Time","America/Bogota"],["SA Western Standard Time","America/La_Paz"],["SE Asia Standard Time","Asia/Bangkok"],["Saint Pierre Standard Time","America/Miquelon"],["Sakhalin Standard Time","Asia/Sakhalin"],["Samoa Standard Time","Pacific/Apia"],["Sao Tome Standard Time","Africa/Sao_Tome"],["Saratov Standard Time","Europe/Saratov"],["Singapore Standard Time","Asia/Singapore"],["South Africa Standard Time","Africa/Johannesburg"],["South Sudan Standard Time","Africa/Juba"],["Sri Lanka Standard Time","Asia/Colombo"],["Sudan Standard Time","Africa/Khartoum"],["Syria Standard Time","Asia/Damascus"],["Taipei Standard Time","Asia/Taipei"],["Tasmania Standard Time","Australia/Hobart"],["Tocantins Standard Time","America/Araguaina"],["Tokyo Standard Time","Asia/Tokyo"],["Tomsk Standard Time","Asia/Tomsk"],["Tonga Standard Time","Pacific/Tongatapu"],["Transbaikal Standard Time","Asia/Chita"],["Turkey Standard Time","Europe/Istanbul"],["Turks And Caicos Standard Time","America/Grand_Turk"],["US Eastern Standard Time","America/Indianapolis"],["US Mountain Standard Time","America/Phoenix"],["UTC","Etc/GMT"],["UTC+01","Etc/GMT-1"],["UTC+02","Etc/GMT-2"],["UTC+03","Etc/GMT-3"],["UTC+04","Etc/GMT-4"],["UTC+05","Etc/GMT-5"],["UTC+06","Etc/GMT-6"],["UTC+07","Etc/GMT-7"],["UTC+08","Etc/GMT-8"],["UTC+09","Etc/GMT-9"],["UTC+10","Etc/GMT-10"],["UTC+11","Etc/GMT-11"],["UTC+12","Etc/GMT-12"],["UTC+13","Etc/GMT-13"],["UTC+14","Etc/GMT-14"],["UTC-01","Etc/GMT+1"],["UTC-02","Etc/GMT+2"],["UTC-03","Etc/GMT+3"],["UTC-04","Etc/GMT+4"],["UTC-05","Etc/GMT+5"],["UTC-06","Etc/GMT+6"],["UTC-07","Etc/GMT+7"],["UTC-08","Etc/GMT+8"],["UTC-09","Etc/GMT+9"],["UTC-10","Etc/GMT+10"],["UTC-11","Etc/GMT+11"],["UTC-12","Etc/GMT+12"],["Ulaanbaatar Standard Time","Asia/Ulaanbaatar"],["Venezuela Standard Time","America/Caracas"],["Vladivostok Standard Time","Asia/Vladivostok"],["Volgograd Standard Time","Europe/Volgograd"],["W. Australia Standard Time","Australia/Perth"],["W. Central Africa Standard Time","Africa/Lagos"],["W. Europe Standard Time","Europe/Berlin"],["W. Mongolia Standard Time","Asia/Hovd"],["West Asia Standard Time","Asia/Tashkent"],["West Bank Standard Time","Asia/Hebron"],["West Pacific Standard Time","Pacific/Port_Moresby"],["Yakutsk Standard Time","Asia/Yakutsk"],["Yukon Standard Time","America/Whitehorse"]]);class ww extends Error{}class f2e extends ww{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class m2e extends ww{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class y2e extends ww{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class Z1 extends ww{}class Que extends ww{constructor(e){super(`Invalid unit ${e}`)}}class bo extends ww{}class Ym extends ww{constructor(){super("Zone is an abstract class")}}const rt="numeric",id="short",Ol="long",iO={year:rt,month:rt,day:rt},ede={year:rt,month:id,day:rt},g2e={year:rt,month:id,day:rt,weekday:id},tde={year:rt,month:Ol,day:rt},ide={year:rt,month:Ol,day:rt,weekday:Ol},rde={hour:rt,minute:rt},nde={hour:rt,minute:rt,second:rt},sde={hour:rt,minute:rt,second:rt,timeZoneName:id},ode={hour:rt,minute:rt,second:rt,timeZoneName:Ol},ade={hour:rt,minute:rt,hourCycle:"h23"},lde={hour:rt,minute:rt,second:rt,hourCycle:"h23"},cde={hour:rt,minute:rt,second:rt,hourCycle:"h23",timeZoneName:id},ude={hour:rt,minute:rt,second:rt,hourCycle:"h23",timeZoneName:Ol},dde={year:rt,month:rt,day:rt,hour:rt,minute:rt},hde={year:rt,month:rt,day:rt,hour:rt,minute:rt,second:rt},pde={year:rt,month:id,day:rt,hour:rt,minute:rt},fde={year:rt,month:id,day:rt,hour:rt,minute:rt,second:rt},v2e={year:rt,month:id,day:rt,weekday:id,hour:rt,minute:rt},mde={year:rt,month:Ol,day:rt,hour:rt,minute:rt,timeZoneName:id},yde={year:rt,month:Ol,day:rt,hour:rt,minute:rt,second:rt,timeZoneName:id},gde={year:rt,month:Ol,day:rt,weekday:Ol,hour:rt,minute:rt,timeZoneName:Ol},vde={year:rt,month:Ol,day:rt,weekday:Ol,hour:rt,minute:rt,second:rt,timeZoneName:Ol};class _w{get type(){throw new Ym}get name(){throw new Ym}get ianaName(){return this.name}get isUniversal(){throw new Ym}offsetName(e,i){throw new Ym}formatOffset(e,i){throw new Ym}offset(e){throw new Ym}equals(e){throw new Ym}get isValid(){throw new Ym}}let xz=null;class KF extends _w{static get instance(){return xz===null&&(xz=new KF),xz}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:i,locale:r}){return Mde(e,i,r)}formatOffset(e,i){return XI(this.offset(e),i)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}const Bj=new Map;function b2e(t){let e=Bj.get(t);return e===void 0&&(e=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}),Bj.set(t,e)),e}const w2e={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function _2e(t,e){const i=t.format(e).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(i),[,n,s,o,a,l,c,d]=r;return[o,n,s,a,l,c,d]}function x2e(t,e){const i=t.formatToParts(e),r=[];for(let n=0;n<i.length;n++){const{type:s,value:o}=i[n],a=w2e[s];s==="era"?r[a]=o:ti(a)||(r[a]=parseInt(o,10))}return r}const Sz=new Map;class Xa extends _w{static create(e){let i=Sz.get(e);return i===void 0&&Sz.set(e,i=new Xa(e)),i}static resetCache(){Sz.clear(),Bj.clear()}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=Xa.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:i,locale:r}){return Mde(e,i,r,this.name)}formatOffset(e,i){return XI(this.offset(e),i)}offset(e){if(!this.valid)return NaN;const i=new Date(e);if(isNaN(i))return NaN;const r=b2e(this.name);let[n,s,o,a,l,c,d]=r.formatToParts?x2e(r,i):_2e(r,i);a==="BC"&&(n=-Math.abs(n)+1);const y=eN({year:n,month:s,day:o,hour:l===24?0:l,minute:c,second:d,millisecond:0});let g=+i;const b=g%1e3;return g-=b>=0?b:1e3+b,(y-g)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let gX={};function S2e(t,e={}){const i=JSON.stringify([t,e]);let r=gX[i];return r||(r=new Intl.ListFormat(t,e),gX[i]=r),r}const Gj=new Map;function qj(t,e={}){const i=JSON.stringify([t,e]);let r=Gj.get(i);return r===void 0&&(r=new Intl.DateTimeFormat(t,e),Gj.set(i,r)),r}const Hj=new Map;function $2e(t,e={}){const i=JSON.stringify([t,e]);let r=Hj.get(i);return r===void 0&&(r=new Intl.NumberFormat(t,e),Hj.set(i,r)),r}const Wj=new Map;function T2e(t,e={}){const{base:i,...r}=e,n=JSON.stringify([t,r]);let s=Wj.get(n);return s===void 0&&(s=new Intl.RelativeTimeFormat(t,e),Wj.set(n,s)),s}let LE=null;function E2e(){return LE||(LE=new Intl.DateTimeFormat().resolvedOptions().locale,LE)}const Zj=new Map;function bde(t){let e=Zj.get(t);return e===void 0&&(e=new Intl.DateTimeFormat(t).resolvedOptions(),Zj.set(t,e)),e}const Jj=new Map;function I2e(t){let e=Jj.get(t);if(!e){const i=new Intl.Locale(t);e="getWeekInfo"in i?i.getWeekInfo():i.weekInfo,"minimalDays"in e||(e={...wde,...e}),Jj.set(t,e)}return e}function C2e(t){const e=t.indexOf("-x-");e!==-1&&(t=t.substring(0,e));const i=t.indexOf("-u-");if(i===-1)return[t];{let r,n;try{r=qj(t).resolvedOptions(),n=t}catch{const l=t.substring(0,i);r=qj(l).resolvedOptions(),n=l}const{numberingSystem:s,calendar:o}=r;return[n,s,o]}}function M2e(t,e,i){return(i||e)&&(t.includes("-u-")||(t+="-u"),i&&(t+=`-ca-${i}`),e&&(t+=`-nu-${e}`)),t}function k2e(t){const e=[];for(let i=1;i<=12;i++){const r=nt.utc(2009,i,1);e.push(t(r))}return e}function P2e(t){const e=[];for(let i=1;i<=7;i++){const r=nt.utc(2016,11,13+i);e.push(t(r))}return e}function rP(t,e,i,r){const n=t.listingMode();return n==="error"?null:n==="en"?i(e):r(e)}function A2e(t){return t.numberingSystem&&t.numberingSystem!=="latn"?!1:t.numberingSystem==="latn"||!t.locale||t.locale.startsWith("en")||bde(t.locale).numberingSystem==="latn"}class L2e{constructor(e,i,r){this.padTo=r.padTo||0,this.floor=r.floor||!1;const{padTo:n,floor:s,...o}=r;if(!i||Object.keys(o).length>0){const a={useGrouping:!1,...r};r.padTo>0&&(a.minimumIntegerDigits=r.padTo),this.inf=$2e(e,a)}}format(e){if(this.inf){const i=this.floor?Math.floor(e):e;return this.inf.format(i)}else{const i=this.floor?Math.floor(e):WG(e,3);return Yn(i,this.padTo)}}}class R2e{constructor(e,i,r){this.opts=r,this.originalZone=void 0;let n;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const o=-1*(e.offset/60),a=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;e.offset!==0&&Xa.create(a).valid?(n=a,this.dt=e):(n="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,n=e.zone.name):(n="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const s={...this.opts};s.timeZone=s.timeZone||n,this.dtf=qj(i,s)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(i=>{if(i.type==="timeZoneName"){const r=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...i,value:r}}else return i}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class O2e{constructor(e,i,r){this.opts={style:"long",...r},!i&&Ide()&&(this.rtf=T2e(e,r))}format(e,i){return this.rtf?this.rtf.format(e,i):rke(i,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,i){return this.rtf?this.rtf.formatToParts(e,i):[]}}const wde={firstDay:1,minimalDays:4,weekend:[6,7]};class tr{static fromOpts(e){return tr.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,i,r,n,s=!1){const o=e||yn.defaultLocale,a=o||(s?"en-US":E2e()),l=i||yn.defaultNumberingSystem,c=r||yn.defaultOutputCalendar,d=Xj(n)||yn.defaultWeekSettings;return new tr(a,l,c,d,o)}static resetCache(){LE=null,Gj.clear(),Hj.clear(),Wj.clear(),Zj.clear(),Jj.clear()}static fromObject({locale:e,numberingSystem:i,outputCalendar:r,weekSettings:n}={}){return tr.create(e,i,r,n)}constructor(e,i,r,n,s){const[o,a,l]=C2e(e);this.locale=o,this.numberingSystem=i||a||null,this.outputCalendar=r||l||null,this.weekSettings=n,this.intl=M2e(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=s,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=A2e(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),i=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&i?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:tr.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,Xj(e.weekSettings)||this.weekSettings,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,i=!1){return rP(this,e,Ade,()=>{const r=i?{month:e,day:"numeric"}:{month:e},n=i?"format":"standalone";return this.monthsCache[n][e]||(this.monthsCache[n][e]=k2e(s=>this.extract(s,r,"month"))),this.monthsCache[n][e]})}weekdays(e,i=!1){return rP(this,e,Ode,()=>{const r=i?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},n=i?"format":"standalone";return this.weekdaysCache[n][e]||(this.weekdaysCache[n][e]=P2e(s=>this.extract(s,r,"weekday"))),this.weekdaysCache[n][e]})}meridiems(){return rP(this,void 0,()=>Fde,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[nt.utc(2016,11,13,9),nt.utc(2016,11,13,19)].map(i=>this.extract(i,e,"dayperiod"))}return this.meridiemCache})}eras(e){return rP(this,e,Nde,()=>{const i={era:e};return this.eraCache[e]||(this.eraCache[e]=[nt.utc(-40,1,1),nt.utc(2017,1,1)].map(r=>this.extract(r,i,"era"))),this.eraCache[e]})}extract(e,i,r){const n=this.dtFormatter(e,i),s=n.formatToParts(),o=s.find(a=>a.type.toLowerCase()===r);return o?o.value:null}numberFormatter(e={}){return new L2e(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,i={}){return new R2e(e,this.intl,i)}relFormatter(e={}){return new O2e(this.intl,this.isEnglish(),e)}listFormatter(e={}){return S2e(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||bde(this.intl).locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:Cde()?I2e(this.locale):wde}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let $z=null;class Qn extends _w{static get utcInstance(){return $z===null&&($z=new Qn(0)),$z}static instance(e){return e===0?Qn.utcInstance:new Qn(e)}static parseSpecifier(e){if(e){const i=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(i)return new Qn(tN(i[1],i[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${XI(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${XI(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,i){return XI(this.fixed,i)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class F2e extends _w{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function Gy(t,e){if(ti(t)||t===null)return e;if(t instanceof _w)return t;if(U2e(t)){const i=t.toLowerCase();return i==="default"?e:i==="local"||i==="system"?KF.instance:i==="utc"||i==="gmt"?Qn.utcInstance:Qn.parseSpecifier(i)||Xa.create(t)}else return bg(t)?Qn.instance(t):typeof t=="object"&&"offset"in t&&typeof t.offset=="function"?t:new F2e(t)}const BG={arab:"[٠-٩]",arabext:"[۰-۹]",bali:"[᭐-᭙]",beng:"[০-৯]",deva:"[०-९]",fullwide:"[０-９]",gujr:"[૦-૯]",hanidec:"[〇|一|二|三|四|五|六|七|八|九]",khmr:"[០-៩]",knda:"[೦-೯]",laoo:"[໐-໙]",limb:"[᥆-᥏]",mlym:"[൦-൯]",mong:"[᠐-᠙]",mymr:"[၀-၉]",orya:"[୦-୯]",tamldec:"[௦-௯]",telu:"[౦-౯]",thai:"[๐-๙]",tibt:"[༠-༩]",latn:"\\d"},vX={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},N2e=BG.hanidec.replace(/[\[|\]]/g,"").split("");function D2e(t){let e=parseInt(t,10);if(isNaN(e)){e="";for(let i=0;i<t.length;i++){const r=t.charCodeAt(i);if(t[i].search(BG.hanidec)!==-1)e+=N2e.indexOf(t[i]);else for(const n in vX){const[s,o]=vX[n];r>=s&&r<=o&&(e+=r-s)}}return parseInt(e,10)}else return e}const Yj=new Map;function z2e(){Yj.clear()}function su({numberingSystem:t},e=""){const i=t||"latn";let r=Yj.get(i);r===void 0&&(r=new Map,Yj.set(i,r));let n=r.get(e);return n===void 0&&(n=new RegExp(`${BG[i]}${e}`),r.set(e,n)),n}let bX=()=>Date.now(),wX="system",_X=null,xX=null,SX=null,$X=60,TX,EX=null;class yn{static get now(){return bX}static set now(e){bX=e}static set defaultZone(e){wX=e}static get defaultZone(){return Gy(wX,KF.instance)}static get defaultLocale(){return _X}static set defaultLocale(e){_X=e}static get defaultNumberingSystem(){return xX}static set defaultNumberingSystem(e){xX=e}static get defaultOutputCalendar(){return SX}static set defaultOutputCalendar(e){SX=e}static get defaultWeekSettings(){return EX}static set defaultWeekSettings(e){EX=Xj(e)}static get twoDigitCutoffYear(){return $X}static set twoDigitCutoffYear(e){$X=e%100}static get throwOnInvalid(){return TX}static set throwOnInvalid(e){TX=e}static resetCaches(){tr.resetCache(),Xa.resetCache(),nt.resetCache(),z2e()}}class Uu{constructor(e,i){this.reason=e,this.explanation=i}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const _de=[0,31,59,90,120,151,181,212,243,273,304,334],xde=[0,31,60,91,121,152,182,213,244,274,305,335];function kc(t,e){return new Uu("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${t}, which is invalid`)}function GG(t,e,i){const r=new Date(Date.UTC(t,e-1,i));t<100&&t>=0&&r.setUTCFullYear(r.getUTCFullYear()-1900);const n=r.getUTCDay();return n===0?7:n}function Sde(t,e,i){return i+(f2(t)?xde:_de)[e-1]}function $de(t,e){const i=f2(t)?xde:_de,r=i.findIndex(s=>s<e),n=e-i[r];return{month:r+1,day:n}}function qG(t,e){return(t-e+7)%7+1}function rO(t,e=4,i=1){const{year:r,month:n,day:s}=t,o=Sde(r,n,s),a=qG(GG(r,n,s),i);let l=Math.floor((o-a+14-e)/7),c;return l<1?(c=r-1,l=QC(c,e,i)):l>QC(r,e,i)?(c=r+1,l=1):c=r,{weekYear:c,weekNumber:l,weekday:a,...iN(t)}}function IX(t,e=4,i=1){const{weekYear:r,weekNumber:n,weekday:s}=t,o=qG(GG(r,1,e),i),a=yx(r);let l=n*7+s-o-7+e,c;l<1?(c=r-1,l+=yx(c)):l>a?(c=r+1,l-=yx(r)):c=r;const{month:d,day:f}=$de(c,l);return{year:c,month:d,day:f,...iN(t)}}function Tz(t){const{year:e,month:i,day:r}=t,n=Sde(e,i,r);return{year:e,ordinal:n,...iN(t)}}function CX(t){const{year:e,ordinal:i}=t,{month:r,day:n}=$de(e,i);return{year:e,month:r,day:n,...iN(t)}}function MX(t,e){if(!ti(t.localWeekday)||!ti(t.localWeekNumber)||!ti(t.localWeekYear)){if(!ti(t.weekday)||!ti(t.weekNumber)||!ti(t.weekYear))throw new Z1("Cannot mix locale-based week fields with ISO-based week fields");return ti(t.localWeekday)||(t.weekday=t.localWeekday),ti(t.localWeekNumber)||(t.weekNumber=t.localWeekNumber),ti(t.localWeekYear)||(t.weekYear=t.localWeekYear),delete t.localWeekday,delete t.localWeekNumber,delete t.localWeekYear,{minDaysInFirstWeek:e.getMinDaysInFirstWeek(),startOfWeek:e.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function V2e(t,e=4,i=1){const r=QF(t.weekYear),n=Pc(t.weekNumber,1,QC(t.weekYear,e,i)),s=Pc(t.weekday,1,7);return r?n?s?!1:kc("weekday",t.weekday):kc("week",t.weekNumber):kc("weekYear",t.weekYear)}function j2e(t){const e=QF(t.year),i=Pc(t.ordinal,1,yx(t.year));return e?i?!1:kc("ordinal",t.ordinal):kc("year",t.year)}function Tde(t){const e=QF(t.year),i=Pc(t.month,1,12),r=Pc(t.day,1,nO(t.year,t.month));return e?i?r?!1:kc("day",t.day):kc("month",t.month):kc("year",t.year)}function Ede(t){const{hour:e,minute:i,second:r,millisecond:n}=t,s=Pc(e,0,23)||e===24&&i===0&&r===0&&n===0,o=Pc(i,0,59),a=Pc(r,0,59),l=Pc(n,0,999);return s?o?a?l?!1:kc("millisecond",n):kc("second",r):kc("minute",i):kc("hour",e)}function ti(t){return typeof t>"u"}function bg(t){return typeof t=="number"}function QF(t){return typeof t=="number"&&t%1===0}function U2e(t){return typeof t=="string"}function B2e(t){return Object.prototype.toString.call(t)==="[object Date]"}function Ide(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function Cde(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function G2e(t){return Array.isArray(t)?t:[t]}function kX(t,e,i){if(t.length!==0)return t.reduce((r,n)=>{const s=[e(n),n];return r&&i(r[0],s[0])===r[0]?r:s},null)[1]}function q2e(t,e){return e.reduce((i,r)=>(i[r]=t[r],i),{})}function r$(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Xj(t){if(t==null)return null;if(typeof t!="object")throw new bo("Week settings must be an object");if(!Pc(t.firstDay,1,7)||!Pc(t.minimalDays,1,7)||!Array.isArray(t.weekend)||t.weekend.some(e=>!Pc(e,1,7)))throw new bo("Invalid week settings");return{firstDay:t.firstDay,minimalDays:t.minimalDays,weekend:Array.from(t.weekend)}}function Pc(t,e,i){return QF(t)&&t>=e&&t<=i}function H2e(t,e){return t-e*Math.floor(t/e)}function Yn(t,e=2){const i=t<0;let r;return i?r="-"+(""+-t).padStart(e,"0"):r=(""+t).padStart(e,"0"),r}function My(t){if(!(ti(t)||t===null||t===""))return parseInt(t,10)}function zv(t){if(!(ti(t)||t===null||t===""))return parseFloat(t)}function HG(t){if(!(ti(t)||t===null||t==="")){const e=parseFloat("0."+t)*1e3;return Math.floor(e)}}function WG(t,e,i=!1){const r=10**e;return(i?Math.trunc:Math.round)(t*r)/r}function f2(t){return t%4===0&&(t%100!==0||t%400===0)}function yx(t){return f2(t)?366:365}function nO(t,e){const i=H2e(e-1,12)+1,r=t+(e-i)/12;return i===2?f2(r)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][i-1]}function eN(t){let e=Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond);return t.year<100&&t.year>=0&&(e=new Date(e),e.setUTCFullYear(t.year,t.month-1,t.day)),+e}function PX(t,e,i){return-qG(GG(t,1,e),i)+e-1}function QC(t,e=4,i=1){const r=PX(t,e,i),n=PX(t+1,e,i);return(yx(t)-r+n)/7}function Kj(t){return t>99?t:t>yn.twoDigitCutoffYear?1900+t:2e3+t}function Mde(t,e,i,r=null){const n=new Date(t),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(s.timeZone=r);const o={timeZoneName:e,...s},a=new Intl.DateTimeFormat(i,o).formatToParts(n).find(l=>l.type.toLowerCase()==="timezonename");return a?a.value:null}function tN(t,e){let i=parseInt(t,10);Number.isNaN(i)&&(i=0);const r=parseInt(e,10)||0,n=i<0||Object.is(i,-0)?-r:r;return i*60+n}function kde(t){const e=Number(t);if(typeof t=="boolean"||t===""||Number.isNaN(e))throw new bo(`Invalid unit value ${t}`);return e}function sO(t,e){const i={};for(const r in t)if(r$(t,r)){const n=t[r];if(n==null)continue;i[e(r)]=kde(n)}return i}function XI(t,e){const i=Math.trunc(Math.abs(t/60)),r=Math.trunc(Math.abs(t%60)),n=t>=0?"+":"-";switch(e){case"short":return`${n}${Yn(i,2)}:${Yn(r,2)}`;case"narrow":return`${n}${i}${r>0?`:${r}`:""}`;case"techie":return`${n}${Yn(i,2)}${Yn(r,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function iN(t){return q2e(t,["hour","minute","second","millisecond"])}const W2e=["January","February","March","April","May","June","July","August","September","October","November","December"],Pde=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Z2e=["J","F","M","A","M","J","J","A","S","O","N","D"];function Ade(t){switch(t){case"narrow":return[...Z2e];case"short":return[...Pde];case"long":return[...W2e];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const Lde=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Rde=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],J2e=["M","T","W","T","F","S","S"];function Ode(t){switch(t){case"narrow":return[...J2e];case"short":return[...Rde];case"long":return[...Lde];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const Fde=["AM","PM"],Y2e=["Before Christ","Anno Domini"],X2e=["BC","AD"],K2e=["B","A"];function Nde(t){switch(t){case"narrow":return[...K2e];case"short":return[...X2e];case"long":return[...Y2e];default:return null}}function Q2e(t){return Fde[t.hour<12?0:1]}function eke(t,e){return Ode(e)[t.weekday-1]}function tke(t,e){return Ade(e)[t.month-1]}function ike(t,e){return Nde(e)[t.year<0?0:1]}function rke(t,e,i="always",r=!1){const n={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=["hours","minutes","seconds"].indexOf(t)===-1;if(i==="auto"&&s){const f=t==="days";switch(e){case 1:return f?"tomorrow":`next ${n[t][0]}`;case-1:return f?"yesterday":`last ${n[t][0]}`;case 0:return f?"today":`this ${n[t][0]}`}}const o=Object.is(e,-0)||e<0,a=Math.abs(e),l=a===1,c=n[t],d=r?l?c[1]:c[2]||c[1]:l?n[t][0]:t;return o?`${a} ${d} ago`:`in ${a} ${d}`}function AX(t,e){let i="";for(const r of t)r.literal?i+=r.val:i+=e(r.val);return i}const nke={D:iO,DD:ede,DDD:tde,DDDD:ide,t:rde,tt:nde,ttt:sde,tttt:ode,T:ade,TT:lde,TTT:cde,TTTT:ude,f:dde,ff:pde,fff:mde,ffff:gde,F:hde,FF:fde,FFF:yde,FFFF:vde};class Co{static create(e,i={}){return new Co(e,i)}static parseFormat(e){let i=null,r="",n=!1;const s=[];for(let o=0;o<e.length;o++){const a=e.charAt(o);a==="'"?(r.length>0&&s.push({literal:n||/^\s+$/.test(r),val:r}),i=null,r="",n=!n):n||a===i?r+=a:(r.length>0&&s.push({literal:/^\s+$/.test(r),val:r}),r=a,i=a)}return r.length>0&&s.push({literal:n||/^\s+$/.test(r),val:r}),s}static macroTokenToFormatOpts(e){return nke[e]}constructor(e,i){this.opts=i,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,i){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...i}).format()}dtFormatter(e,i={}){return this.loc.dtFormatter(e,{...this.opts,...i})}formatDateTime(e,i){return this.dtFormatter(e,i).format()}formatDateTimeParts(e,i){return this.dtFormatter(e,i).formatToParts()}formatInterval(e,i){return this.dtFormatter(e.start,i).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,i){return this.dtFormatter(e,i).resolvedOptions()}num(e,i=0){if(this.opts.forceSimple)return Yn(e,i);const r={...this.opts};return i>0&&(r.padTo=i),this.loc.numberFormatter(r).format(e)}formatDateTimeFromString(e,i){const r=this.loc.listingMode()==="en",n=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",s=(g,b)=>this.loc.extract(e,g,b),o=g=>e.isOffsetFixed&&e.offset===0&&g.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,g.format):"",a=()=>r?Q2e(e):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),l=(g,b)=>r?tke(e,g):s(b?{month:g}:{month:g,day:"numeric"},"month"),c=(g,b)=>r?eke(e,g):s(b?{weekday:g}:{weekday:g,month:"long",day:"numeric"},"weekday"),d=g=>{const b=Co.macroTokenToFormatOpts(g);return b?this.formatWithSystemDefault(e,b):g},f=g=>r?ike(e,g):s({era:g},"era"),y=g=>{switch(g){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return a();case"d":return n?s({day:"numeric"},"day"):this.num(e.day);case"dd":return n?s({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return c("short",!0);case"cccc":return c("long",!0);case"ccccc":return c("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return c("short",!1);case"EEEE":return c("long",!1);case"EEEEE":return c("narrow",!1);case"L":return n?s({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return n?s({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return l("short",!0);case"LLLL":return l("long",!0);case"LLLLL":return l("narrow",!0);case"M":return n?s({month:"numeric"},"month"):this.num(e.month);case"MM":return n?s({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return l("short",!1);case"MMMM":return l("long",!1);case"MMMMM":return l("narrow",!1);case"y":return n?s({year:"numeric"},"year"):this.num(e.year);case"yy":return n?s({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return n?s({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return n?s({year:"numeric"},"year"):this.num(e.year,6);case"G":return f("short");case"GG":return f("long");case"GGGGG":return f("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return d(g)}};return AX(Co.parseFormat(i),y)}formatDurationFromString(e,i){const r=l=>{switch(l[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},n=l=>c=>{const d=r(c);return d?this.num(l.get(d),c.length):c},s=Co.parseFormat(i),o=s.reduce((l,{literal:c,val:d})=>c?l:l.concat(d),[]),a=e.shiftTo(...o.map(r).filter(l=>l));return AX(s,n(a))}}const Dde=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function O$(...t){const e=t.reduce((i,r)=>i+r.source,"");return RegExp(`^${e}$`)}function F$(...t){return e=>t.reduce(([i,r,n],s)=>{const[o,a,l]=s(e,n);return[{...i,...o},a||r,l]},[{},null,1]).slice(0,2)}function N$(t,...e){if(t==null)return[null,null];for(const[i,r]of e){const n=i.exec(t);if(n)return r(n)}return[null,null]}function zde(...t){return(e,i)=>{const r={};let n;for(n=0;n<t.length;n++)r[t[n]]=My(e[i+n]);return[r,null,i+n]}}const Vde=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,ske=`(?:${Vde.source}?(?:\\[(${Dde.source})\\])?)?`,ZG=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,jde=RegExp(`${ZG.source}${ske}`),JG=RegExp(`(?:T${jde.source})?`),oke=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,ake=/(\d{4})-?W(\d\d)(?:-?(\d))?/,lke=/(\d{4})-?(\d{3})/,cke=zde("weekYear","weekNumber","weekDay"),uke=zde("year","ordinal"),dke=/(\d{4})-(\d\d)-(\d\d)/,Ude=RegExp(`${ZG.source} ?(?:${Vde.source}|(${Dde.source}))?`),hke=RegExp(`(?: ${Ude.source})?`);function gx(t,e,i){const r=t[e];return ti(r)?i:My(r)}function pke(t,e){return[{year:gx(t,e),month:gx(t,e+1,1),day:gx(t,e+2,1)},null,e+3]}function D$(t,e){return[{hours:gx(t,e,0),minutes:gx(t,e+1,0),seconds:gx(t,e+2,0),milliseconds:HG(t[e+3])},null,e+4]}function m2(t,e){const i=!t[e]&&!t[e+1],r=tN(t[e+1],t[e+2]),n=i?null:Qn.instance(r);return[{},n,e+3]}function y2(t,e){const i=t[e]?Xa.create(t[e]):null;return[{},i,e+1]}const fke=RegExp(`^T?${ZG.source}$`),mke=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function yke(t){const[e,i,r,n,s,o,a,l,c]=t,d=e[0]==="-",f=l&&l[0]==="-",y=(g,b=!1)=>g!==void 0&&(b||g&&d)?-g:g;return[{years:y(zv(i)),months:y(zv(r)),weeks:y(zv(n)),days:y(zv(s)),hours:y(zv(o)),minutes:y(zv(a)),seconds:y(zv(l),l==="-0"),milliseconds:y(HG(c),f)}]}const gke={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function YG(t,e,i,r,n,s,o){const a={year:e.length===2?Kj(My(e)):My(e),month:Pde.indexOf(i)+1,day:My(r),hour:My(n),minute:My(s)};return o&&(a.second=My(o)),t&&(a.weekday=t.length>3?Lde.indexOf(t)+1:Rde.indexOf(t)+1),a}const vke=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function bke(t){const[,e,i,r,n,s,o,a,l,c,d,f]=t,y=YG(e,n,r,i,s,o,a);let g;return l?g=gke[l]:c?g=0:g=tN(d,f),[y,new Qn(g)]}function wke(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const _ke=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,xke=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,Ske=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function LX(t){const[,e,i,r,n,s,o,a]=t;return[YG(e,n,r,i,s,o,a),Qn.utcInstance]}function $ke(t){const[,e,i,r,n,s,o,a]=t;return[YG(e,a,i,r,n,s,o),Qn.utcInstance]}const Tke=O$(oke,JG),Eke=O$(ake,JG),Ike=O$(lke,JG),Cke=O$(jde),Bde=F$(pke,D$,m2,y2),Mke=F$(cke,D$,m2,y2),kke=F$(uke,D$,m2,y2),Pke=F$(D$,m2,y2);function Ake(t){return N$(t,[Tke,Bde],[Eke,Mke],[Ike,kke],[Cke,Pke])}function Lke(t){return N$(wke(t),[vke,bke])}function Rke(t){return N$(t,[_ke,LX],[xke,LX],[Ske,$ke])}function Oke(t){return N$(t,[mke,yke])}const Fke=F$(D$);function Nke(t){return N$(t,[fke,Fke])}const Dke=O$(dke,hke),zke=O$(Ude),Vke=F$(D$,m2,y2);function jke(t){return N$(t,[Dke,Bde],[zke,Vke])}const RX="Invalid Duration",Gde={weeks:{days:7,hours:168,minutes:10080,seconds:10080*60,milliseconds:10080*60*1e3},days:{hours:24,minutes:1440,seconds:1440*60,milliseconds:1440*60*1e3},hours:{minutes:60,seconds:3600,milliseconds:3600*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},Uke={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:2184*60,seconds:2184*60*60,milliseconds:2184*60*60*1e3},months:{weeks:4,days:30,hours:720,minutes:720*60,seconds:720*60*60,milliseconds:720*60*60*1e3},...Gde},ic=146097/400,d_=146097/4800,Bke={years:{quarters:4,months:12,weeks:ic/7,days:ic,hours:ic*24,minutes:ic*24*60,seconds:ic*24*60*60,milliseconds:ic*24*60*60*1e3},quarters:{months:3,weeks:ic/28,days:ic/4,hours:ic*24/4,minutes:ic*24*60/4,seconds:ic*24*60*60/4,milliseconds:ic*24*60*60*1e3/4},months:{weeks:d_/7,days:d_,hours:d_*24,minutes:d_*24*60,seconds:d_*24*60*60,milliseconds:d_*24*60*60*1e3},...Gde},ab=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],Gke=ab.slice(0).reverse();function Xm(t,e,i=!1){const r={values:i?e.values:{...t.values,...e.values||{}},loc:t.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||t.conversionAccuracy,matrix:e.matrix||t.matrix};return new Li(r)}function qde(t,e){let i=e.milliseconds??0;for(const r of Gke.slice(1))e[r]&&(i+=e[r]*t[r].milliseconds);return i}function OX(t,e){const i=qde(t,e)<0?-1:1;ab.reduceRight((r,n)=>{if(ti(e[n]))return r;if(r){const s=e[r]*i,o=t[n][r],a=Math.floor(s/o);e[n]+=a*i,e[r]-=a*o*i}return n},null),ab.reduce((r,n)=>{if(ti(e[n]))return r;if(r){const s=e[r]%1;e[r]-=s,e[n]+=s*t[r][n]}return n},null)}function qke(t){const e={};for(const[i,r]of Object.entries(t))r!==0&&(e[i]=r);return e}class Li{constructor(e){const i=e.conversionAccuracy==="longterm"||!1;let r=i?Bke:Uke;e.matrix&&(r=e.matrix),this.values=e.values,this.loc=e.loc||tr.create(),this.conversionAccuracy=i?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=r,this.isLuxonDuration=!0}static fromMillis(e,i){return Li.fromObject({milliseconds:e},i)}static fromObject(e,i={}){if(e==null||typeof e!="object")throw new bo(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new Li({values:sO(e,Li.normalizeUnit),loc:tr.fromObject(i),conversionAccuracy:i.conversionAccuracy,matrix:i.matrix})}static fromDurationLike(e){if(bg(e))return Li.fromMillis(e);if(Li.isDuration(e))return e;if(typeof e=="object")return Li.fromObject(e);throw new bo(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,i){const[r]=Oke(e);return r?Li.fromObject(r,i):Li.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,i){const[r]=Nke(e);return r?Li.fromObject(r,i):Li.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,i=null){if(!e)throw new bo("need to specify a reason the Duration is invalid");const r=e instanceof Uu?e:new Uu(e,i);if(yn.throwOnInvalid)throw new y2e(r);return new Li({invalid:r})}static normalizeUnit(e){const i={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!i)throw new Que(e);return i}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,i={}){const r={...i,floor:i.round!==!1&&i.floor!==!1};return this.isValid?Co.create(this.loc,r).formatDurationFromString(this,e):RX}toHuman(e={}){if(!this.isValid)return RX;const i=ab.map(r=>{const n=this.values[r];return ti(n)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:r.slice(0,-1)}).format(n)}).filter(r=>r);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(i)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=WG(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const i=this.toMillis();return i<0||i>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},nt.fromMillis(i,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?qde(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const i=Li.fromDurationLike(e),r={};for(const n of ab)(r$(i.values,n)||r$(this.values,n))&&(r[n]=i.get(n)+this.get(n));return Xm(this,{values:r},!0)}minus(e){if(!this.isValid)return this;const i=Li.fromDurationLike(e);return this.plus(i.negate())}mapUnits(e){if(!this.isValid)return this;const i={};for(const r of Object.keys(this.values))i[r]=kde(e(this.values[r],r));return Xm(this,{values:i},!0)}get(e){return this[Li.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const i={...this.values,...sO(e,Li.normalizeUnit)};return Xm(this,{values:i})}reconfigure({locale:e,numberingSystem:i,conversionAccuracy:r,matrix:n}={}){const o={loc:this.loc.clone({locale:e,numberingSystem:i}),matrix:n,conversionAccuracy:r};return Xm(this,o)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return OX(this.matrix,e),Xm(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=qke(this.normalize().shiftToAll().toObject());return Xm(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(o=>Li.normalizeUnit(o));const i={},r={},n=this.toObject();let s;for(const o of ab)if(e.indexOf(o)>=0){s=o;let a=0;for(const c in r)a+=this.matrix[c][o]*r[c],r[c]=0;bg(n[o])&&(a+=n[o]);const l=Math.trunc(a);i[o]=l,r[o]=(a*1e3-l*1e3)/1e3}else bg(n[o])&&(r[o]=n[o]);for(const o in r)r[o]!==0&&(i[s]+=o===s?r[o]:r[o]/this.matrix[s][o]);return OX(this.matrix,i),Xm(this,{values:i},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const i of Object.keys(this.values))e[i]=this.values[i]===0?0:-this.values[i];return Xm(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function i(r,n){return r===void 0||r===0?n===void 0||n===0:r===n}for(const r of ab)if(!i(this.values[r],e.values[r]))return!1;return!0}}const h_="Invalid Interval";function Hke(t,e){return!t||!t.isValid?pn.invalid("missing or invalid start"):!e||!e.isValid?pn.invalid("missing or invalid end"):e<t?pn.invalid("end before start",`The end of an interval must be after its start, but you had start=${t.toISO()} and end=${e.toISO()}`):null}class pn{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,i=null){if(!e)throw new bo("need to specify a reason the Interval is invalid");const r=e instanceof Uu?e:new Uu(e,i);if(yn.throwOnInvalid)throw new m2e(r);return new pn({invalid:r})}static fromDateTimes(e,i){const r=jT(e),n=jT(i),s=Hke(r,n);return s??new pn({start:r,end:n})}static after(e,i){const r=Li.fromDurationLike(i),n=jT(e);return pn.fromDateTimes(n,n.plus(r))}static before(e,i){const r=Li.fromDurationLike(i),n=jT(e);return pn.fromDateTimes(n.minus(r),n)}static fromISO(e,i){const[r,n]=(e||"").split("/",2);if(r&&n){let s,o;try{s=nt.fromISO(r,i),o=s.isValid}catch{o=!1}let a,l;try{a=nt.fromISO(n,i),l=a.isValid}catch{l=!1}if(o&&l)return pn.fromDateTimes(s,a);if(o){const c=Li.fromISO(n,i);if(c.isValid)return pn.after(s,c)}else if(l){const c=Li.fromISO(r,i);if(c.isValid)return pn.before(a,c)}}return pn.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get lastDateTime(){return this.isValid&&this.e?this.e.minus(1):null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",i){if(!this.isValid)return NaN;const r=this.start.startOf(e,i);let n;return i!=null&&i.useLocaleWeeks?n=this.end.reconfigure({locale:r.locale}):n=this.end,n=n.startOf(e,i),Math.floor(n.diff(r,e).get(e))+(n.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:i}={}){return this.isValid?pn.fromDateTimes(e||this.s,i||this.e):this}splitAt(...e){if(!this.isValid)return[];const i=e.map(jT).filter(o=>this.contains(o)).sort((o,a)=>o.toMillis()-a.toMillis()),r=[];let{s:n}=this,s=0;for(;n<this.e;){const o=i[s]||this.e,a=+o>+this.e?this.e:o;r.push(pn.fromDateTimes(n,a)),n=a,s+=1}return r}splitBy(e){const i=Li.fromDurationLike(e);if(!this.isValid||!i.isValid||i.as("milliseconds")===0)return[];let{s:r}=this,n=1,s;const o=[];for(;r<this.e;){const a=this.start.plus(i.mapUnits(l=>l*n));s=+a>+this.e?this.e:a,o.push(pn.fromDateTimes(r,s)),r=s,n+=1}return o}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const i=this.s>e.s?this.s:e.s,r=this.e<e.e?this.e:e.e;return i>=r?null:pn.fromDateTimes(i,r)}union(e){if(!this.isValid)return this;const i=this.s<e.s?this.s:e.s,r=this.e>e.e?this.e:e.e;return pn.fromDateTimes(i,r)}static merge(e){const[i,r]=e.sort((n,s)=>n.s-s.s).reduce(([n,s],o)=>s?s.overlaps(o)||s.abutsStart(o)?[n,s.union(o)]:[n.concat([s]),o]:[n,o],[[],null]);return r&&i.push(r),i}static xor(e){let i=null,r=0;const n=[],s=e.map(l=>[{time:l.s,type:"s"},{time:l.e,type:"e"}]),o=Array.prototype.concat(...s),a=o.sort((l,c)=>l.time-c.time);for(const l of a)r+=l.type==="s"?1:-1,r===1?i=l.time:(i&&+i!=+l.time&&n.push(pn.fromDateTimes(i,l.time)),i=null);return pn.merge(n)}difference(...e){return pn.xor([this].concat(e)).map(i=>this.intersection(i)).filter(i=>i&&!i.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} – ${this.e.toISO()})`:h_}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=iO,i={}){return this.isValid?Co.create(this.s.loc.clone(i),e).formatInterval(this):h_}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:h_}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:h_}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:h_}toFormat(e,{separator:i=" – "}={}){return this.isValid?`${this.s.toFormat(e)}${i}${this.e.toFormat(e)}`:h_}toDuration(e,i){return this.isValid?this.e.diff(this.s,e,i):Li.invalid(this.invalidReason)}mapEndpoints(e){return pn.fromDateTimes(e(this.s),e(this.e))}}class nP{static hasDST(e=yn.defaultZone){const i=nt.now().setZone(e).set({month:12});return!e.isUniversal&&i.offset!==i.set({month:6}).offset}static isValidIANAZone(e){return Xa.isValidZone(e)}static normalizeZone(e){return Gy(e,yn.defaultZone)}static getStartOfWeek({locale:e=null,locObj:i=null}={}){return(i||tr.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:i=null}={}){return(i||tr.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:i=null}={}){return(i||tr.create(e)).getWeekendDays().slice()}static months(e="long",{locale:i=null,numberingSystem:r=null,locObj:n=null,outputCalendar:s="gregory"}={}){return(n||tr.create(i,r,s)).months(e)}static monthsFormat(e="long",{locale:i=null,numberingSystem:r=null,locObj:n=null,outputCalendar:s="gregory"}={}){return(n||tr.create(i,r,s)).months(e,!0)}static weekdays(e="long",{locale:i=null,numberingSystem:r=null,locObj:n=null}={}){return(n||tr.create(i,r,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:i=null,numberingSystem:r=null,locObj:n=null}={}){return(n||tr.create(i,r,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return tr.create(e).meridiems()}static eras(e="short",{locale:i=null}={}){return tr.create(i,null,"gregory").eras(e)}static features(){return{relative:Ide(),localeWeek:Cde()}}}function FX(t,e){const i=n=>n.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),r=i(e)-i(t);return Math.floor(Li.fromMillis(r).as("days"))}function Wke(t,e,i){const r=[["years",(l,c)=>c.year-l.year],["quarters",(l,c)=>c.quarter-l.quarter+(c.year-l.year)*4],["months",(l,c)=>c.month-l.month+(c.year-l.year)*12],["weeks",(l,c)=>{const d=FX(l,c);return(d-d%7)/7}],["days",FX]],n={},s=t;let o,a;for(const[l,c]of r)i.indexOf(l)>=0&&(o=l,n[l]=c(t,e),a=s.plus(n),a>e?(n[l]--,t=s.plus(n),t>e&&(a=t,n[l]--,t=s.plus(n))):t=a);return[t,n,a,o]}function Zke(t,e,i,r){let[n,s,o,a]=Wke(t,e,i);const l=e-n,c=i.filter(f=>["hours","minutes","seconds","milliseconds"].indexOf(f)>=0);c.length===0&&(o<e&&(o=n.plus({[a]:1})),o!==n&&(s[a]=(s[a]||0)+l/(o-n)));const d=Li.fromObject(s,r);return c.length>0?Li.fromMillis(l,r).shiftTo(...c).plus(d):d}const Jke="missing Intl.DateTimeFormat.formatToParts support";function Bi(t,e=i=>i){return{regex:t,deser:([i])=>e(D2e(i))}}const Yke=" ",Hde=`[ ${Yke}]`,Wde=new RegExp(Hde,"g");function Xke(t){return t.replace(/\./g,"\\.?").replace(Wde,Hde)}function NX(t){return t.replace(/\./g,"").replace(Wde," ").toLowerCase()}function ou(t,e){return t===null?null:{regex:RegExp(t.map(Xke).join("|")),deser:([i])=>t.findIndex(r=>NX(i)===NX(r))+e}}function DX(t,e){return{regex:t,deser:([,i,r])=>tN(i,r),groups:e}}function sP(t){return{regex:t,deser:([e])=>e}}function Kke(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function Qke(t,e){const i=su(e),r=su(e,"{2}"),n=su(e,"{3}"),s=su(e,"{4}"),o=su(e,"{6}"),a=su(e,"{1,2}"),l=su(e,"{1,3}"),c=su(e,"{1,6}"),d=su(e,"{1,9}"),f=su(e,"{2,4}"),y=su(e,"{4,6}"),g=x=>({regex:RegExp(Kke(x.val)),deser:([E])=>E,literal:!0}),_=(x=>{if(t.literal)return g(x);switch(x.val){case"G":return ou(e.eras("short"),0);case"GG":return ou(e.eras("long"),0);case"y":return Bi(c);case"yy":return Bi(f,Kj);case"yyyy":return Bi(s);case"yyyyy":return Bi(y);case"yyyyyy":return Bi(o);case"M":return Bi(a);case"MM":return Bi(r);case"MMM":return ou(e.months("short",!0),1);case"MMMM":return ou(e.months("long",!0),1);case"L":return Bi(a);case"LL":return Bi(r);case"LLL":return ou(e.months("short",!1),1);case"LLLL":return ou(e.months("long",!1),1);case"d":return Bi(a);case"dd":return Bi(r);case"o":return Bi(l);case"ooo":return Bi(n);case"HH":return Bi(r);case"H":return Bi(a);case"hh":return Bi(r);case"h":return Bi(a);case"mm":return Bi(r);case"m":return Bi(a);case"q":return Bi(a);case"qq":return Bi(r);case"s":return Bi(a);case"ss":return Bi(r);case"S":return Bi(l);case"SSS":return Bi(n);case"u":return sP(d);case"uu":return sP(a);case"uuu":return Bi(i);case"a":return ou(e.meridiems(),0);case"kkkk":return Bi(s);case"kk":return Bi(f,Kj);case"W":return Bi(a);case"WW":return Bi(r);case"E":case"c":return Bi(i);case"EEE":return ou(e.weekdays("short",!1),1);case"EEEE":return ou(e.weekdays("long",!1),1);case"ccc":return ou(e.weekdays("short",!0),1);case"cccc":return ou(e.weekdays("long",!0),1);case"Z":case"ZZ":return DX(new RegExp(`([+-]${a.source})(?::(${r.source}))?`),2);case"ZZZ":return DX(new RegExp(`([+-]${a.source})(${r.source})?`),2);case"z":return sP(/[a-z_+-/]{1,256}?/i);case" ":return sP(/[^\S\n\r]/);default:return g(x)}})(t)||{invalidReason:Jke};return _.token=t,_}const ePe={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function tPe(t,e,i){const{type:r,value:n}=t;if(r==="literal"){const l=/^\s+$/.test(n);return{literal:!l,val:l?" ":n}}const s=e[r];let o=r;r==="hour"&&(e.hour12!=null?o=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?o="hour12":o="hour24":o=i.hour12?"hour12":"hour24");let a=ePe[o];if(typeof a=="object"&&(a=a[s]),a)return{literal:!1,val:a}}function iPe(t){return[`^${t.map(i=>i.regex).reduce((i,r)=>`${i}(${r.source})`,"")}$`,t]}function rPe(t,e,i){const r=t.match(e);if(r){const n={};let s=1;for(const o in i)if(r$(i,o)){const a=i[o],l=a.groups?a.groups+1:1;!a.literal&&a.token&&(n[a.token.val[0]]=a.deser(r.slice(s,s+l))),s+=l}return[r,n]}else return[r,{}]}function nPe(t){const e=s=>{switch(s){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let i=null,r;return ti(t.z)||(i=Xa.create(t.z)),ti(t.Z)||(i||(i=new Qn(t.Z)),r=t.Z),ti(t.q)||(t.M=(t.q-1)*3+1),ti(t.h)||(t.h<12&&t.a===1?t.h+=12:t.h===12&&t.a===0&&(t.h=0)),t.G===0&&t.y&&(t.y=-t.y),ti(t.u)||(t.S=HG(t.u)),[Object.keys(t).reduce((s,o)=>{const a=e(o);return a&&(s[a]=t[o]),s},{}),i,r]}let Ez=null;function sPe(){return Ez||(Ez=nt.fromMillis(1555555555555)),Ez}function oPe(t,e){if(t.literal)return t;const i=Co.macroTokenToFormatOpts(t.val),r=Xde(i,e);return r==null||r.includes(void 0)?t:r}function Zde(t,e){return Array.prototype.concat(...t.map(i=>oPe(i,e)))}class Jde{constructor(e,i){if(this.locale=e,this.format=i,this.tokens=Zde(Co.parseFormat(i),e),this.units=this.tokens.map(r=>Qke(r,e)),this.disqualifyingUnit=this.units.find(r=>r.invalidReason),!this.disqualifyingUnit){const[r,n]=iPe(this.units);this.regex=RegExp(r,"i"),this.handlers=n}}explainFromTokens(e){if(this.isValid){const[i,r]=rPe(e,this.regex,this.handlers),[n,s,o]=r?nPe(r):[null,null,void 0];if(r$(r,"a")&&r$(r,"H"))throw new Z1("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:this.tokens,regex:this.regex,rawMatches:i,matches:r,result:n,zone:s,specificOffset:o}}else return{input:e,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function Yde(t,e,i){return new Jde(t,i).explainFromTokens(e)}function aPe(t,e,i){const{result:r,zone:n,specificOffset:s,invalidReason:o}=Yde(t,e,i);return[r,n,s,o]}function Xde(t,e){if(!t)return null;const r=Co.create(e,t).dtFormatter(sPe()),n=r.formatToParts(),s=r.resolvedOptions();return n.map(o=>tPe(o,t,s))}const Iz="Invalid DateTime",zX=864e13;function RE(t){return new Uu("unsupported zone",`the zone "${t.name}" is not supported`)}function Cz(t){return t.weekData===null&&(t.weekData=rO(t.c)),t.weekData}function Mz(t){return t.localWeekData===null&&(t.localWeekData=rO(t.c,t.loc.getMinDaysInFirstWeek(),t.loc.getStartOfWeek())),t.localWeekData}function Vv(t,e){const i={ts:t.ts,zone:t.zone,c:t.c,o:t.o,loc:t.loc,invalid:t.invalid};return new nt({...i,...e,old:i})}function Kde(t,e,i){let r=t-e*60*1e3;const n=i.offset(r);if(e===n)return[r,e];r-=(n-e)*60*1e3;const s=i.offset(r);return n===s?[r,n]:[t-Math.min(n,s)*60*1e3,Math.max(n,s)]}function oP(t,e){t+=e*60*1e3;const i=new Date(t);return{year:i.getUTCFullYear(),month:i.getUTCMonth()+1,day:i.getUTCDate(),hour:i.getUTCHours(),minute:i.getUTCMinutes(),second:i.getUTCSeconds(),millisecond:i.getUTCMilliseconds()}}function QA(t,e,i){return Kde(eN(t),e,i)}function VX(t,e){const i=t.o,r=t.c.year+Math.trunc(e.years),n=t.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,s={...t.c,year:r,month:n,day:Math.min(t.c.day,nO(r,n))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},o=Li.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),a=eN(s);let[l,c]=Kde(a,i,t.zone);return o!==0&&(l+=o,c=t.zone.offset(l)),{ts:l,o:c}}function p_(t,e,i,r,n,s){const{setZone:o,zone:a}=i;if(t&&Object.keys(t).length!==0||e){const l=e||a,c=nt.fromObject(t,{...i,zone:l,specificOffset:s});return o?c:c.setZone(a)}else return nt.invalid(new Uu("unparsable",`the input "${n}" can't be parsed as ${r}`))}function aP(t,e,i=!0){return t.isValid?Co.create(tr.create("en-US"),{allowZ:i,forceSimple:!0}).formatDateTimeFromString(t,e):null}function kz(t,e){const i=t.c.year>9999||t.c.year<0;let r="";return i&&t.c.year>=0&&(r+="+"),r+=Yn(t.c.year,i?6:4),e?(r+="-",r+=Yn(t.c.month),r+="-",r+=Yn(t.c.day)):(r+=Yn(t.c.month),r+=Yn(t.c.day)),r}function jX(t,e,i,r,n,s){let o=Yn(t.c.hour);return e?(o+=":",o+=Yn(t.c.minute),(t.c.millisecond!==0||t.c.second!==0||!i)&&(o+=":")):o+=Yn(t.c.minute),(t.c.millisecond!==0||t.c.second!==0||!i)&&(o+=Yn(t.c.second),(t.c.millisecond!==0||!r)&&(o+=".",o+=Yn(t.c.millisecond,3))),n&&(t.isOffsetFixed&&t.offset===0&&!s?o+="Z":t.o<0?(o+="-",o+=Yn(Math.trunc(-t.o/60)),o+=":",o+=Yn(Math.trunc(-t.o%60))):(o+="+",o+=Yn(Math.trunc(t.o/60)),o+=":",o+=Yn(Math.trunc(t.o%60)))),s&&(o+="["+t.zone.ianaName+"]"),o}const Qde={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},lPe={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},cPe={ordinal:1,hour:0,minute:0,second:0,millisecond:0},ehe=["year","month","day","hour","minute","second","millisecond"],uPe=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],dPe=["year","ordinal","hour","minute","second","millisecond"];function hPe(t){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[t.toLowerCase()];if(!e)throw new Que(t);return e}function UX(t){switch(t.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return hPe(t)}}function pPe(t){if(OE===void 0&&(OE=yn.now()),t.type!=="iana")return t.offset(OE);const e=t.name;let i=Qj.get(e);return i===void 0&&(i=t.offset(OE),Qj.set(e,i)),i}function BX(t,e){const i=Gy(e.zone,yn.defaultZone);if(!i.isValid)return nt.invalid(RE(i));const r=tr.fromObject(e);let n,s;if(ti(t.year))n=yn.now();else{for(const l of ehe)ti(t[l])&&(t[l]=Qde[l]);const o=Tde(t)||Ede(t);if(o)return nt.invalid(o);const a=pPe(i);[n,s]=QA(t,a,i)}return new nt({ts:n,zone:i,loc:r,o:s})}function GX(t,e,i){const r=ti(i.round)?!0:i.round,n=(o,a)=>(o=WG(o,r||i.calendary?0:2,!0),e.loc.clone(i).relFormatter(i).format(o,a)),s=o=>i.calendary?e.hasSame(t,o)?0:e.startOf(o).diff(t.startOf(o),o).get(o):e.diff(t,o).get(o);if(i.unit)return n(s(i.unit),i.unit);for(const o of i.units){const a=s(o);if(Math.abs(a)>=1)return n(a,o)}return n(t>e?-0:0,i.units[i.units.length-1])}function qX(t){let e={},i;return t.length>0&&typeof t[t.length-1]=="object"?(e=t[t.length-1],i=Array.from(t).slice(0,t.length-1)):i=Array.from(t),[e,i]}let OE;const Qj=new Map;class nt{constructor(e){const i=e.zone||yn.defaultZone;let r=e.invalid||(Number.isNaN(e.ts)?new Uu("invalid input"):null)||(i.isValid?null:RE(i));this.ts=ti(e.ts)?yn.now():e.ts;let n=null,s=null;if(!r)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(i))[n,s]=[e.old.c,e.old.o];else{const a=bg(e.o)&&!e.old?e.o:i.offset(this.ts);n=oP(this.ts,a),r=Number.isNaN(n.year)?new Uu("invalid input"):null,n=r?null:n,s=r?null:a}this._zone=i,this.loc=e.loc||tr.create(),this.invalid=r,this.weekData=null,this.localWeekData=null,this.c=n,this.o=s,this.isLuxonDateTime=!0}static now(){return new nt({})}static local(){const[e,i]=qX(arguments),[r,n,s,o,a,l,c]=i;return BX({year:r,month:n,day:s,hour:o,minute:a,second:l,millisecond:c},e)}static utc(){const[e,i]=qX(arguments),[r,n,s,o,a,l,c]=i;return e.zone=Qn.utcInstance,BX({year:r,month:n,day:s,hour:o,minute:a,second:l,millisecond:c},e)}static fromJSDate(e,i={}){const r=B2e(e)?e.valueOf():NaN;if(Number.isNaN(r))return nt.invalid("invalid input");const n=Gy(i.zone,yn.defaultZone);return n.isValid?new nt({ts:r,zone:n,loc:tr.fromObject(i)}):nt.invalid(RE(n))}static fromMillis(e,i={}){if(bg(e))return e<-zX||e>zX?nt.invalid("Timestamp out of range"):new nt({ts:e,zone:Gy(i.zone,yn.defaultZone),loc:tr.fromObject(i)});throw new bo(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,i={}){if(bg(e))return new nt({ts:e*1e3,zone:Gy(i.zone,yn.defaultZone),loc:tr.fromObject(i)});throw new bo("fromSeconds requires a numerical input")}static fromObject(e,i={}){e=e||{};const r=Gy(i.zone,yn.defaultZone);if(!r.isValid)return nt.invalid(RE(r));const n=tr.fromObject(i),s=sO(e,UX),{minDaysInFirstWeek:o,startOfWeek:a}=MX(s,n),l=yn.now(),c=ti(i.specificOffset)?r.offset(l):i.specificOffset,d=!ti(s.ordinal),f=!ti(s.year),y=!ti(s.month)||!ti(s.day),g=f||y,b=s.weekYear||s.weekNumber;if((g||d)&&b)throw new Z1("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(y&&d)throw new Z1("Can't mix ordinal dates with month/day");const _=b||s.weekday&&!g;let x,E,C=oP(l,c);_?(x=uPe,E=lPe,C=rO(C,o,a)):d?(x=dPe,E=cPe,C=Tz(C)):(x=ehe,E=Qde);let k=!1;for(const ee of x){const pe=s[ee];ti(pe)?k?s[ee]=E[ee]:s[ee]=C[ee]:k=!0}const O=_?V2e(s,o,a):d?j2e(s):Tde(s),D=O||Ede(s);if(D)return nt.invalid(D);const B=_?IX(s,o,a):d?CX(s):s,[j,Z]=QA(B,c,r),X=new nt({ts:j,zone:r,o:Z,loc:n});return s.weekday&&g&&e.weekday!==X.weekday?nt.invalid("mismatched weekday",`you can't specify both a weekday of ${s.weekday} and a date of ${X.toISO()}`):X.isValid?X:nt.invalid(X.invalid)}static fromISO(e,i={}){const[r,n]=Ake(e);return p_(r,n,i,"ISO 8601",e)}static fromRFC2822(e,i={}){const[r,n]=Lke(e);return p_(r,n,i,"RFC 2822",e)}static fromHTTP(e,i={}){const[r,n]=Rke(e);return p_(r,n,i,"HTTP",i)}static fromFormat(e,i,r={}){if(ti(e)||ti(i))throw new bo("fromFormat requires an input string and a format");const{locale:n=null,numberingSystem:s=null}=r,o=tr.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0}),[a,l,c,d]=aPe(o,e,i);return d?nt.invalid(d):p_(a,l,r,`format ${i}`,e,c)}static fromString(e,i,r={}){return nt.fromFormat(e,i,r)}static fromSQL(e,i={}){const[r,n]=jke(e);return p_(r,n,i,"SQL",e)}static invalid(e,i=null){if(!e)throw new bo("need to specify a reason the DateTime is invalid");const r=e instanceof Uu?e:new Uu(e,i);if(yn.throwOnInvalid)throw new f2e(r);return new nt({invalid:r})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,i={}){const r=Xde(e,tr.fromObject(i));return r?r.map(n=>n?n.val:null).join(""):null}static expandFormat(e,i={}){return Zde(Co.parseFormat(e),tr.fromObject(i)).map(n=>n.val).join("")}static resetCache(){OE=void 0,Qj.clear()}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Cz(this).weekYear:NaN}get weekNumber(){return this.isValid?Cz(this).weekNumber:NaN}get weekday(){return this.isValid?Cz(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?Mz(this).weekday:NaN}get localWeekNumber(){return this.isValid?Mz(this).weekNumber:NaN}get localWeekYear(){return this.isValid?Mz(this).weekYear:NaN}get ordinal(){return this.isValid?Tz(this.c).ordinal:NaN}get monthShort(){return this.isValid?nP.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?nP.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?nP.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?nP.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,i=6e4,r=eN(this.c),n=this.zone.offset(r-e),s=this.zone.offset(r+e),o=this.zone.offset(r-n*i),a=this.zone.offset(r-s*i);if(o===a)return[this];const l=r-o*i,c=r-a*i,d=oP(l,o),f=oP(c,a);return d.hour===f.hour&&d.minute===f.minute&&d.second===f.second&&d.millisecond===f.millisecond?[Vv(this,{ts:l}),Vv(this,{ts:c})]:[this]}get isInLeapYear(){return f2(this.year)}get daysInMonth(){return nO(this.year,this.month)}get daysInYear(){return this.isValid?yx(this.year):NaN}get weeksInWeekYear(){return this.isValid?QC(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?QC(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:i,numberingSystem:r,calendar:n}=Co.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:i,numberingSystem:r,outputCalendar:n}}toUTC(e=0,i={}){return this.setZone(Qn.instance(e),i)}toLocal(){return this.setZone(yn.defaultZone)}setZone(e,{keepLocalTime:i=!1,keepCalendarTime:r=!1}={}){if(e=Gy(e,yn.defaultZone),e.equals(this.zone))return this;if(e.isValid){let n=this.ts;if(i||r){const s=e.offset(this.ts),o=this.toObject();[n]=QA(o,s,e)}return Vv(this,{ts:n,zone:e})}else return nt.invalid(RE(e))}reconfigure({locale:e,numberingSystem:i,outputCalendar:r}={}){const n=this.loc.clone({locale:e,numberingSystem:i,outputCalendar:r});return Vv(this,{loc:n})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const i=sO(e,UX),{minDaysInFirstWeek:r,startOfWeek:n}=MX(i,this.loc),s=!ti(i.weekYear)||!ti(i.weekNumber)||!ti(i.weekday),o=!ti(i.ordinal),a=!ti(i.year),l=!ti(i.month)||!ti(i.day),c=a||l,d=i.weekYear||i.weekNumber;if((c||o)&&d)throw new Z1("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(l&&o)throw new Z1("Can't mix ordinal dates with month/day");let f;s?f=IX({...rO(this.c,r,n),...i},r,n):ti(i.ordinal)?(f={...this.toObject(),...i},ti(i.day)&&(f.day=Math.min(nO(f.year,f.month),f.day))):f=CX({...Tz(this.c),...i});const[y,g]=QA(f,this.o,this.zone);return Vv(this,{ts:y,o:g})}plus(e){if(!this.isValid)return this;const i=Li.fromDurationLike(e);return Vv(this,VX(this,i))}minus(e){if(!this.isValid)return this;const i=Li.fromDurationLike(e).negate();return Vv(this,VX(this,i))}startOf(e,{useLocaleWeeks:i=!1}={}){if(!this.isValid)return this;const r={},n=Li.normalizeUnit(e);switch(n){case"years":r.month=1;case"quarters":case"months":r.day=1;case"weeks":case"days":r.hour=0;case"hours":r.minute=0;case"minutes":r.second=0;case"seconds":r.millisecond=0;break}if(n==="weeks")if(i){const s=this.loc.getStartOfWeek(),{weekday:o}=this;o<s&&(r.weekNumber=this.weekNumber-1),r.weekday=s}else r.weekday=1;if(n==="quarters"){const s=Math.ceil(this.month/3);r.month=(s-1)*3+1}return this.set(r)}endOf(e,i){return this.isValid?this.plus({[e]:1}).startOf(e,i).minus(1):this}toFormat(e,i={}){return this.isValid?Co.create(this.loc.redefaultToEN(i)).formatDateTimeFromString(this,e):Iz}toLocaleString(e=iO,i={}){return this.isValid?Co.create(this.loc.clone(i),e).formatDateTime(this):Iz}toLocaleParts(e={}){return this.isValid?Co.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:i=!1,suppressMilliseconds:r=!1,includeOffset:n=!0,extendedZone:s=!1}={}){if(!this.isValid)return null;const o=e==="extended";let a=kz(this,o);return a+="T",a+=jX(this,o,i,r,n,s),a}toISODate({format:e="extended"}={}){return this.isValid?kz(this,e==="extended"):null}toISOWeekDate(){return aP(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:i=!1,includeOffset:r=!0,includePrefix:n=!1,extendedZone:s=!1,format:o="extended"}={}){return this.isValid?(n?"T":"")+jX(this,o==="extended",i,e,r,s):null}toRFC2822(){return aP(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return aP(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?kz(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:i=!1,includeOffsetSpace:r=!0}={}){let n="HH:mm:ss.SSS";return(i||e)&&(r&&(n+=" "),i?n+="z":e&&(n+="ZZ")),aP(this,n,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():Iz}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const i={...this.c};return e.includeConfig&&(i.outputCalendar=this.outputCalendar,i.numberingSystem=this.loc.numberingSystem,i.locale=this.loc.locale),i}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,i="milliseconds",r={}){if(!this.isValid||!e.isValid)return Li.invalid("created by diffing an invalid DateTime");const n={locale:this.locale,numberingSystem:this.numberingSystem,...r},s=G2e(i).map(Li.normalizeUnit),o=e.valueOf()>this.valueOf(),a=o?this:e,l=o?e:this,c=Zke(a,l,s,n);return o?c.negate():c}diffNow(e="milliseconds",i={}){return this.diff(nt.now(),e,i)}until(e){return this.isValid?pn.fromDateTimes(this,e):this}hasSame(e,i,r){if(!this.isValid)return!1;const n=e.valueOf(),s=this.setZone(e.zone,{keepLocalTime:!0});return s.startOf(i,r)<=n&&n<=s.endOf(i,r)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const i=e.base||nt.fromObject({},{zone:this.zone}),r=e.padding?this<i?-e.padding:e.padding:0;let n=["years","months","days","hours","minutes","seconds"],s=e.unit;return Array.isArray(e.unit)&&(n=e.unit,s=void 0),GX(i,this.plus(r),{...e,numeric:"always",units:n,unit:s})}toRelativeCalendar(e={}){return this.isValid?GX(e.base||nt.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(nt.isDateTime))throw new bo("min requires all arguments be DateTimes");return kX(e,i=>i.valueOf(),Math.min)}static max(...e){if(!e.every(nt.isDateTime))throw new bo("max requires all arguments be DateTimes");return kX(e,i=>i.valueOf(),Math.max)}static fromFormatExplain(e,i,r={}){const{locale:n=null,numberingSystem:s=null}=r,o=tr.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0});return Yde(o,e,i)}static fromStringExplain(e,i,r={}){return nt.fromFormatExplain(e,i,r)}static buildFormatParser(e,i={}){const{locale:r=null,numberingSystem:n=null}=i,s=tr.fromOpts({locale:r,numberingSystem:n,defaultToEN:!0});return new Jde(s,e)}static fromFormatParser(e,i,r={}){if(ti(e)||ti(i))throw new bo("fromFormatParser requires an input string and a format parser");const{locale:n=null,numberingSystem:s=null}=r,o=tr.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0});if(!o.equals(i.locale))throw new bo(`fromFormatParser called with a locale of ${o}, but the format parser was created for ${i.locale}`);const{result:a,zone:l,specificOffset:c,invalidReason:d}=i.explainFromTokens(e);return d?nt.invalid(d):p_(a,l,r,`format ${i.format}`,e,c)}static get DATE_SHORT(){return iO}static get DATE_MED(){return ede}static get DATE_MED_WITH_WEEKDAY(){return g2e}static get DATE_FULL(){return tde}static get DATE_HUGE(){return ide}static get TIME_SIMPLE(){return rde}static get TIME_WITH_SECONDS(){return nde}static get TIME_WITH_SHORT_OFFSET(){return sde}static get TIME_WITH_LONG_OFFSET(){return ode}static get TIME_24_SIMPLE(){return ade}static get TIME_24_WITH_SECONDS(){return lde}static get TIME_24_WITH_SHORT_OFFSET(){return cde}static get TIME_24_WITH_LONG_OFFSET(){return ude}static get DATETIME_SHORT(){return dde}static get DATETIME_SHORT_WITH_SECONDS(){return hde}static get DATETIME_MED(){return pde}static get DATETIME_MED_WITH_SECONDS(){return fde}static get DATETIME_MED_WITH_WEEKDAY(){return v2e}static get DATETIME_FULL(){return mde}static get DATETIME_FULL_WITH_SECONDS(){return yde}static get DATETIME_HUGE(){return gde}static get DATETIME_HUGE_WITH_SECONDS(){return vde}}function jT(t){if(nt.isDateTime(t))return t;if(t&&t.valueOf&&bg(t.valueOf()))return nt.fromJSDate(t);if(t&&typeof t=="object")return nt.fromObject(t);throw new bo(`Unknown datetime argument: ${t}, of type ${typeof t}`)}const fPe="shortOffset";function mPe(t){return"timeZoneIANA"in t}function yPe(t){return t.startsWith("UTC")}function oO(t,e=!1){return{json:{read:{source:t,reader:(i,r)=>r[t]?eL(r[t]):null},write:!!e&&{allowNull:!0,writer(i,r){r[t]=i?gPe(i):null}}}}}function eL(t,e=Ya){return t?mPe(t)?t.timeZoneIANA:vPe(t,e):e}function gPe(t){return{timeZoneIANA:t}}function vPe(t,e=Ya){if(!t||!yX.has(t.timeZone))return e;const i=yX.get(t.timeZone);return yPe(t.timeZone)||t.respectsDaylightSaving?i:bPe(i)}function bPe(t){const e=nt.local().setZone(t),i=Math.min(e.set({month:1,day:1}).offset,e.set({month:5}).offset);return i===0?"Etc/UTC":`Etc/GMT${Qn.instance(-i).formatOffset(0,"narrow")}`}function the(t,e,i,r,n){if(e&&n==="date")return{timeZone:pp,timeZoneName:void 0};const s=r.timeStyle||r.hour,o=i===Lg;return{timeZone:o?n==="timestamp-offset"?void 0:t??pp:i,timeZoneName:o&&s?fPe:void 0}}function wPe(t){const e=new Set(["etc/utc","etc/gmt","gmt"]),i=new Set(Intl.supportedValuesOf("timeZone").map((r=>r.toLowerCase())));return t===Ya||t===Lg||e.has(t.toLowerCase())||i.has(t.toLowerCase())}const _Pe={year:void 0,month:void 0,day:void 0,weekday:void 0},xPe={hour:void 0,minute:void 0,second:void 0},ihe={timeZone:pp},Cd={year:"numeric",month:"numeric",day:"numeric"},UT={year:"numeric",month:"long",day:"numeric"},BT={year:"numeric",month:"short",day:"numeric"},GT={year:"numeric",month:"long",weekday:"long",day:"numeric"},ky={hour:"numeric",minute:"numeric"},r0={...ky,second:"numeric"},rhe={hourCycle:"h23"},qT={...ky,...rhe},HT={...r0,...rhe},nhe={"short-date":Cd,"short-date-short-time":{...Cd,...ky},"short-date-short-time-24":{...Cd,...qT},"short-date-long-time":{...Cd,...r0},"short-date-long-time-24":{...Cd,...HT},"short-date-le":Cd,"short-date-le-short-time":{...Cd,...ky},"short-date-le-short-time-24":{...Cd,...qT},"short-date-le-long-time":{...Cd,...r0},"short-date-le-long-time-24":{...Cd,...HT},"long-month-day-year":UT,"long-month-day-year-short-time":{...UT,...ky},"long-month-day-year-short-time-24":{...UT,...qT},"long-month-day-year-long-time":{...UT,...r0},"long-month-day-year-long-time-24":{...UT,...HT},"day-short-month-year":BT,"day-short-month-year-short-time":{...BT,...ky},"day-short-month-year-short-time-24":{...BT,...qT},"day-short-month-year-long-time":{...BT,...r0},"day-short-month-year-long-time-24":{...BT,...HT},"long-date":GT,"long-date-short-time":{...GT,...ky},"long-date-short-time-24":{...GT,...qT},"long-date-long-time":{...GT,...r0},"long-date-long-time-24":{...GT,...HT},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":ky,"long-time":r0},SPe=is()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"}),she={ar:"ar-u-nu-latn-ca-gregory",nn:"no-NN"},$Pe=new Intl.DateTimeFormat("bs",{month:"long"}).formatToParts(new Date(2025,2));var hae;const TPe=(hae=$Pe.find((({type:t})=>t==="month")))==null?void 0:hae.value.toLowerCase();function ohe(){var i;const t=Wa(),e=(i=VG(t))==null?void 0:i.language;return(e&&she[e])??t}TPe!=="mart"&&(she.bs="sr-Latn-CS");let eU=new WeakMap;const rN=nhe["short-date-short-time"];function EPe(t){let e=eU.get(t);if(!e){const i=ohe(),r=XG(t.timeZone??Ya),n={...t,timeZone:r};e=new Intl.DateTimeFormat(i,n),eU.set(t,e)}return e}function G_(t){return nhe[t]}function Pl(t,e=rN){return EPe(e).format(t)}function IPe(t,e=rN){return Pl(new Date(t),{...e,...ihe,...xPe})}function CPe(t,e=rN){return Pl(new Date(`1970-01-01T${t}Z`),{...e,...ihe,..._Pe})}function MPe(t,e=rN){if(e.timeZone)return Pl(new Date(t),e);const i=nt.fromISO(t,{setZone:!0}),r=i.offset===0?pp:e.timeZone,n={...e,timeZone:r};return i.toLocaleString(n,{locale:ohe()})}function XG(t){switch(t){case Ya:return p2e;case Lg:return pp;default:return t}}UG((()=>{eU=new WeakMap}));const kPe={ar:"ar-u-nu-latn",bs:"sr-Latn-CS",nn:"no-NN"};let tL=new WeakMap,ahe={};function tU(t){var i;const e=t||ahe;if(!tL.has(e)){const r=Wa(),n=(i=VG(r))==null?void 0:i.language,s=n&&kPe[n]||r;tL.set(e,new Intl.NumberFormat(s,t))}return tL.get(e)}function eM(t={}){const e={};return t.digitSeparator!=null&&(e.useGrouping=t.digitSeparator),t.places!=null&&(e.minimumFractionDigits=e.maximumFractionDigits=t.places),e}function Qr(t,e){return Object.is(t,-0)&&(t=0),tU(e).format(t)}function Npt(t,e=Wa()){var r,n;if(!t)return null;let i=HX.get(e);if(!i){const s=tU().formatToParts(12345.6),o=[...tU({useGrouping:!1}).format(9876543210)].reverse(),a=new Map(o.map(((g,b)=>[g,b]))),l=new RegExp(`[${(r=s.find((g=>g.type==="group")))==null?void 0:r.value}]`,"g"),c=new RegExp(`[${(n=s.find((g=>g.type==="decimal")))==null?void 0:n.value}]`),d=new RegExp(`[${o.join("")}]`,"g"),f=/[\u200E\u200F\u202A\u202B\u202C\u202D\u202E\u2066\u2067\u2068\u2069\u061C]/g,y=/[-\u2212\u2013\u2014\u2015]/g;i=g=>{if((g=g.trim().replaceAll(l,"").replace(c,".").replace(d,(_=>String(a.get(_)))).replaceAll(f,"").replaceAll(y,"-"))==="")return null;const b=Number(g);return isNaN(b)?null:b},HX.set(e,i)}return i(t)}UG((()=>{tL=new WeakMap,ahe={}}));const HX=new Map,lhe=()=>Ie.getLogger("esri.intl.substitute");function xo(t,e,i={}){const{format:r={}}=i;return Ja(t,(n=>PPe(n,e,r)))}function PPe(t,e,i){let r,n;const s=t.indexOf(":");if(s===-1?r=t.trim():(r=t.slice(0,s).trim(),n=t.slice(s+1).trim()),!r)return"";const o=e2(r,e);if(o==null)return"";const a=(n?i==null?void 0:i[n]:null)??(i==null?void 0:i[r]);return a?APe(o,a):n?LPe(o,n):KG(o)}function APe(t,e){switch(e.type){case"date":return Pl(t,e.intlOptions);case"number":return Qr(t,e.intlOptions);default:return lhe().warn("missing format descriptor for key {key}"),KG(t)}}function LPe(t,e){switch(e.toLowerCase()){case"dateformat":return Pl(t);case"numberformat":return Qr(t);default:return lhe().warn(`inline format is unsupported since 4.12: ${e}`),/^(dateformat|datestring)/i.test(e)?Pl(t):/^numberformat/i.test(e)?Qr(t):KG(t)}}function KG(t){switch(typeof t){case"string":return t;case"number":return Qr(t);case"boolean":return""+t;default:return t instanceof Date?Pl(t):""}}const che={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:"no",nl:!0,no:!0,nn:"no",pl:!0,pt:"pt-BR","pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,zh:"zh-CN","zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function RPe(t){return t in che}function WX(t){if(RPe(t)){const e=che[t];return e===!0?t:e}return null}const FE=[],vx=new Map;function ZX(t){for(const e of vx.keys())dhe(t.pattern,e)&&vx.delete(e)}function OPe(t){return FE.includes(t)||(ZX(t),FE.unshift(t)),Ei((()=>{const e=FE.indexOf(t);e>-1&&(FE.splice(e,1),ZX(t))}))}async function QG(t){const e=Wa();vx.has(t)||vx.set(t,FPe(t,e));const i=vx.get(t);return i&&await NPe.add(i),i}function uhe(t){const e=VG(t);return e?WX(t)??WX(e.language):null}async function FPe(t,e){const i=[];for(const r of FE)if(dhe(r.pattern,t))try{return await r.fetchMessageBundle(t,e)}catch(n){i.push(n)}throw i.length?new ie("intl:message-bundle-error",`Errors occurred while loading "${t}"`,{errors:i}):new ie("intl:no-message-bundle-loader",`No loader found for message bundle "${t}"`)}function dhe(t,e){return typeof t=="string"?e.startsWith(t):t.test(e)}UG((()=>{vx.clear()}));const NPe=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(t){return this._increase(),t.then((()=>this._decrease()),(()=>this._decrease())),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=Nl())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function DPe(t,e,i,r){const n=e.exec(i);if(!n)throw new ie("esri-intl:invalid-bundle",`Bundle id "${i}" is not compatible with the pattern "${e}"`);const s=n[1]?`${n[1]}/`:"",o=n[2],a=uhe(r),l=`${s}${o}.json`,c=a?`${s}${o}_${a}.json`:l;let d;try{d=await JX(t(c))}catch(f){if(c===l)throw new ie("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:f});try{d=await JX(t(l))}catch(y){throw new ie("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:y})}}return d}async function JX(t){if(YX.fetchBundleAsset!=null)return YX.fetchBundleAsset(t);const e=await fi(t,{responseType:"text"});return JSON.parse(e.data)}let zPe=class{constructor({base:e="",pattern:i,location:r=new URL(window.location.href)}){let n;n=typeof r=="string"?s=>new URL(s,new URL(r,window.location.href)).href:r instanceof URL?s=>new URL(s,r).href:r,this.pattern=typeof i=="string"?new RegExp(`^${i}`):i,this.getAssetUrl=n,e=e?e.endsWith("/")?e:e+"/":"",this.matcher=new RegExp(`^${e}(?:(.*)\\/)?(.*)$`)}fetchMessageBundle(e,i){return DPe(this.getAssetUrl,this.matcher,e,i)}};function VPe(t){return new zPe(t)}const YX={};OPe(VPe({pattern:"esri/",location:Ir}));const XX={};function jPe(t){var i;const e={async:t.async,isDebug:t.isDebug,locale:t.locale,baseUrl:t.baseUrl,has:{...t.has},map:{...t.map},packages:((i=t.packages)==null?void 0:i.slice())||[],paths:{...XX.paths,...t.paths}};return t.hasOwnProperty("async")||(e.async=!0),t.hasOwnProperty("isDebug")||(e.isDebug=!1),t.baseUrl||(e.baseUrl=XX.baseUrl),e}let UPe=class{constructor(){const e=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach((i=>{this[i]=(...r)=>e[i](...r)}))}},iL=class{constructor(){this._dispatcher=new UPe,this._workerPostMessage({type:ks.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(e){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=e,e&&this.addEventListener("message",e)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(e){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=e,e&&this.addEventListener("messageerror",e)}get onerror(){return this._onerrorHandler}set onerror(e){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=e,e&&this.addEventListener("error",e)}postMessage(e){MR((()=>{this._workerMessageHandler(new MessageEvent("message",{data:e}))}))}dispatchEvent(e){return this._dispatcher.dispatchEvent(e)}addEventListener(e,i,r){this._dispatcher.addEventListener(e,i,r)}removeEventListener(e,i,r){this._dispatcher.removeEventListener(e,i,r)}_workerPostMessage(e){MR((()=>{this.dispatchEvent(new MessageEvent("message",{data:e}))}))}async _workerMessageHandler(e){const i=KC(e);if(i&&i.type===ks.OPEN){const{modulePath:r,jobId:n}=i;let s=await i$.loadWorker(r);s||(s=await import(r));const o=i$.connect(s);this._workerPostMessage({type:ks.OPENED,jobId:n,data:o})}}};const iU=()=>Ie.getLogger("esri.core.workers.workerFactory"),{HANDSHAKE:BPe}=ks,GPe='let globalId=0;const outgoing=new Map,configuration={CONFIGURATION};self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;let s=null;return new Promise(((r,i)=>{if(t){if(t.aborted)return i(createAbortError());s=()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))},t.addEventListener("abort",s)}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})})).finally((()=>{t&&t.removeEventListener("abort",s)}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,fullVersion:r}=configuration.kernelInfo,{revision:t,fullVersion:n,version:s}=e.kernelInfo;esriConfig.assetsPath!==esriConfig.defaultAssetsPath&&o!==t&&console.warn(`Version mismatch detected between ArcGIS Maps SDK for JavaScript modules and assets. For more information visit https://bit.ly/3QnsuSo.\nModules version: ${r}\nAssets version: ${n??s}\nAssets path: ${esriConfig.assetsPath}`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let n;function t(e){const o=n.connect(e);self.postMessage({type:2,jobId:r,data:o},[o])}"function"==typeof define&&define.amd?require([workerPath],(e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((e=>(n=e.default,checkWorkerRevision(n),n.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then((e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||import(o.modulePath))).then(t)})):(self.RemoteClient||importScripts(workerPath),n=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const s=outgoing.get(r);outgoing.delete(r),o.error?s.reject(JSON.parse(o.error)):s.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let lP,cP;const KX="Failed to create Worker. Fallback to execute module in main thread";async function qPe(){if(!fe("esri-workers"))return QX(new iL);if(!lP&&!cP)try{const e=GPe.split("{CONFIGURATION}").join(HPe());lP=URL.createObjectURL(new Blob([e],{type:"text/javascript"}))}catch(e){cP=e||{}}let t;if(lP)try{t=new Worker(lP,{name:"esri-worker-"+WPe++})}catch{iU().warn(KX,cP),t=new iL}else iU().warn(KX,cP),t=new iL;return QX(t)}async function QX(t){return new Promise((e=>{function i(n){const s=KC(n);s&&s.type===BPe&&(t.removeEventListener("message",i),t.removeEventListener("error",r),e(t))}function r(n){n.preventDefault(),t.removeEventListener("message",i),t.removeEventListener("error",r),iU().warn("Failed to create Worker. Fallback to execute module in main thread",n),(t=new iL).addEventListener("message",i),t.addEventListener("error",r)}t.addEventListener("message",i),t.addEventListener("error",r)}))}function HPe(){let t;if(Si.default!=null){const n={...Si};delete n.default,t=JSON.parse(JSON.stringify(n))}else t=JSON.parse(JSON.stringify(Si));t.assetsPath=Ba(t.assetsPath),t.defaultAssetsPath=t.defaultAssetsPath?Ba(t.defaultAssetsPath):void 0,t.request.interceptors=[],t.log.interceptors=[],t.locale=Wa(),t.has={"esri-csp-restrictions":fe("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":fe("esri-2d-update-debug"),"esri-2d-log-updating":fe("esri-2d-log-updating"),"featurelayer-pbf":fe("featurelayer-pbf"),"featurelayer-fast-triangulation-enabled":fe("featurelayer-fast-triangulation-enabled"),"featurelayer-simplify-thresholds":fe("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":fe("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":fe("featurelayer-simplify-mobile-factor"),"featurelayer-query-max-depth":fe("featurelayer-query-max-depth"),"featurelayer-query-tile-max-features":fe("featurelayer-query-tile-max-features"),"featurelayer-query-tile-concurrency":fe("featurelayer-query-tile-concurrency"),"featurelayer-query-pausing-enabled":fe("featurelayer-query-pausing-enabled"),"featurelayer-snapshot-concurrency":fe("featurelayer-snapshot-concurrency"),"featurelayer-snapshot-enabled":fe("featurelayer-snapshot-enabled"),"esri-atomics":fe("esri-atomics"),"esri-shared-array-buffer":fe("esri-shared-array-buffer"),"esri-tiles-debug":fe("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":fe("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":fe("feature-polyline-generalization-factor"),"host-webworker":1},t.workers.loaderUrl&&(t.workers.loaderUrl=Ba(t.workers.loaderUrl)),t.workers.workerPath?t.workers.workerPath=Ba(t.workers.workerPath):t.workers.workerPath=Ba(Ir("esri/core/workers/RemoteClient.js")),t.workers.useDynamicImport=!1;const e=Si.workers.loaderConfig,i=jPe({baseUrl:e==null?void 0:e.baseUrl,locale:Wa(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...e==null?void 0:e.has},map:{...e==null?void 0:e.map},paths:{...e==null?void 0:e.paths},packages:(e==null?void 0:e.packages)||[]});return JSON.stringify({esriConfig:t,loaderConfig:i,kernelInfo:{buildDate:Fce,fullVersion:SG,revision:Nce}})}let WPe=0;const{ABORT:eK,INVOKE:ZPe,OPEN:JPe,OPENED:YPe,RESPONSE:WT}=ks;let XPe=class hhe{static async create(e){const i=await qPe();return new hhe(i,e)}constructor(e,i){this._outJobs=new Map,this._inJobs=new Map,this.worker=e,this.id=i,e.addEventListener("message",this._onMessage.bind(this)),e.addEventListener("error",(r=>{r.preventDefault(),Ie.getLogger("esri.core.workers.WorkerOwner").error(r)}))}terminate(){this.worker.terminate()}async open(e,i={}){const{signal:r}=i,n=Xue();return new Promise(((s,o)=>{const a={resolve:s,reject:o,abortHandle:K7(r,(()=>{this._outJobs.delete(n),this._post({type:eK,jobId:n})}))};this._outJobs.set(n,a),this._post({type:JPe,jobId:n,modulePath:e})}))}_onMessage(e){const i=KC(e);if(i)switch(i.type){case YPe:this._onOpenedMessage(i);break;case WT:this._onResponseMessage(i);break;case eK:this._onAbortMessage(i);break;case ZPe:this._onInvokeMessage(i)}}_onAbortMessage(e){const i=this._inJobs,r=e.jobId,n=i.get(r);n&&(n.controller&&n.controller.abort(),i.delete(r))}_onInvokeMessage(e){const{methodName:i,jobId:r,data:n,abortable:s}=e,o=s?new AbortController:null,a=this._inJobs,l=u2e[i];let c;try{if(typeof l!="function")throw new TypeError(`${i} is not a function`);c=l.call(null,n,{signal:o?o.signal:null})}catch(d){return void this._post({type:WT,jobId:r,error:XC(d)})}gp(c)?(a.set(r,{controller:o,promise:c}),c.then((d=>{a.has(r)&&(a.delete(r),this._post({type:WT,jobId:r},d))}),(d=>{a.has(r)&&(a.delete(r),d||(d={message:"Error encountered at method"+i}),Tn(d)||this._post({type:WT,jobId:r,error:XC(d||{message:`Error encountered at method ${i}`})}))}))):this._post({type:WT,jobId:r},c)}_onOpenedMessage(e){const{jobId:i,data:r}=e,n=this._outJobs.get(i);n&&(this._outJobs.delete(i),Nr(n.abortHandle),n.resolve(r))}_onResponseMessage(e){const{jobId:i,error:r,data:n}=e,s=this._outJobs.get(i);s&&(this._outJobs.delete(i),Nr(s.abortHandle),r?s.reject(ie.fromJSON(JSON.parse(r))):s.resolve(n))}_post(e,i,r){return zG(this.worker,e,i,r)}};const tK=fe("host-browser")?Math.min(navigator.hardwareConcurrency-1,fe("workers-pool-size")??8):0;let lb=fe("esri-mobile")?Math.min(tK,3):tK;lb||(lb=fe("safari")&&fe("mac")?7:2);let iK=0;const rL=[];function KPe(){phe()}async function uP(t,e){const i=new c2e,{registryTarget:r,...n}=e;return await i.open(t,n),r&&QMe(r,i),i}async function QPe(t,e={}){if(typeof t!="string")throw new ie("workers:undefined-module","modulePath is missing");let i=e.strategy||"distributed";if(fe("host-webworker")&&!fe("esri-workers")&&(i="local"),i==="local"){let r=await i$.loadWorker(t);r||(r=await import(t)),Wi(e.signal);const n=e.client||r;return uP([i$.connect(r,e.schedule)],{...e,client:n})}if(await phe(),Wi(e.signal),i==="dedicated"){const r=iK++%lb;return uP([await rL[r].open(t,e)],e)}if(e.maxNumWorkers&&e.maxNumWorkers>0){const r=Math.min(e.maxNumWorkers,lb);if(r<lb){const n=new Array(r);for(let s=0;s<r;++s){const o=iK++%lb;n[s]=rL[o].open(t,e)}return uP(n,e)}}return uP(rL.map((r=>r.open(t,e))),e)}let dP=null;async function phe(){if(dP)return dP;new AbortController;const t=[];for(let e=0;e<lb;e++){const i=XPe.create(e).then((r=>(rL[e]=r,r)));t.push(i)}return dP=Promise.all(t),dP}function Gg(){return[0,0,0]}function eAe(t){return[t[0],t[1],t[2]]}function z$(t,e,i){return[t,e,i]}function tAe(t,e,i){return[t,e,i]}function iAe(t,e=Gg()){const i=Math.min(3,t.length);for(let r=0;r<i;++r)e[r]=t[r];return e}function fhe(){return Gg()}function mhe(){return z$(1,1,1)}function yhe(){return z$(1,0,0)}function ghe(){return z$(0,1,0)}function vhe(){return z$(0,0,1)}const rAe=fhe(),bhe=mhe(),nAe=yhe(),sAe=ghe(),oAe=vhe();Object.freeze(Object.defineProperty({__proto__:null,ONES:bhe,UNIT_X:nAe,UNIT_Y:sAe,UNIT_Z:oAe,ZEROS:rAe,clone:eAe,create:Gg,freeze:tAe,fromArray:iAe,fromValues:z$,ones:mhe,unitX:yhe,unitY:ghe,unitZ:vhe,zeros:fhe},Symbol.toStringTag,{value:"Module"}));const jpt=Math.PI/180,Upt=/(?:SPHEROID|ELLIPSOID)\[([^\]]+)]/i,Km=tn.radius,au=tn.eccentricitySquared,aAe={a1:Km*au,a2:Km*au*Km*au,a3:Km*au*au/2,a4:Km*au*Km*au*2.5,a5:Km*au+Km*au*au/2,a6:1-au},Bpt={4267:{a:63782064e-1,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:tn.radius,f:tn.flattening},4490:{a:6378137,f:1/298.257222101},104900:{a:2439700,f:0},104901:{a:6051e3,f:0},104902:{a:6051800,f:0},104903:{a:kg.radius,f:kg.flattening},104904:{a:3393400,f:1/192.0430107526882},104905:{a:Qh.radius,f:Qh.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492e3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1e4,f:0},104912:{a:2409300,f:0},104913:{a:15e3,f:0},104914:{a:4e4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85e3,f:0},104918:{a:1821460,f:0},104919:{a:5e3,f:0},104920:{a:12e3,f:0},104921:{a:3e4,f:3},104922:{a:18e3,f:0},104923:{a:14e3,f:0},104924:{a:49300,f:0},104925:{a:60268e3,f:1/10.2079945799458},104926:{a:16e3,f:0},104927:{a:9500,f:0},104928:{a:56e4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16e3,f:0},104932:{a:133e3,f:0},104933:{a:718e3,f:0},104934:{a:888e3,f:0},104935:{a:1986300,f:0},104936:{a:1e4,f:0},104937:{a:41900,f:0},104938:{a:11e4,f:0},104939:{a:50100,f:0},104940:{a:764e3,f:0},104941:{a:11e3,f:0},104942:{a:529800,f:0},104943:{a:2575e3,f:0},104944:{a:25559e3,f:1/43.61604095563141},104945:{a:578900,f:0},104946:{a:33e3,f:0},104947:{a:21e3,f:0},104948:{a:13e3,f:0},104949:{a:31e3,f:0},104950:{a:27e3,f:0},104951:{a:42e3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15e3,f:0},104955:{a:54e3,f:0},104956:{a:77e3,f:0},104957:{a:27e3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764e3,f:.01708124697141011},104961:{a:74e3,f:0},104962:{a:79e3,f:0},104963:{a:104e3,f:.14423076923076922},104964:{a:29e3,f:0},104965:{a:17e4,f:0},104966:{a:208e3,f:0},104967:{a:4e4,f:0},104968:{a:1352600,f:0},104969:{a:1195e3,f:0},104970:{a:593e3,f:0},104971:{a:Qh.radius,f:0},104972:{a:47e4,f:0},104973:{a:255e3,f:0},104974:{a:2439400,f:0}};var be;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",t[t.WGS84=2]="WGS84",t[t.WEB_MERCATOR=3]="WEB_MERCATOR",t[t.WGS84_ECEF=4]="WGS84_ECEF",t[t.CGCS2000=5]="CGCS2000",t[t.SPHERICAL_MARS_PCPF=6]="SPHERICAL_MARS_PCPF",t[t.GCSMARS2000=7]="GCSMARS2000",t[t.SPHERICAL_MOON_PCPF=8]="SPHERICAL_MOON_PCPF",t[t.GCSMOON2000=9]="GCSMOON2000",t[t.LON_LAT=10]="LON_LAT",t[t.PLATE_CARREE=11]="PLATE_CARREE"})(be||(be={}));const lAe={[be.WGS84]:{[be.CGCS2000]:Ar,[be.GCSMARS2000]:null,[be.GCSMOON2000]:null,[be.LON_LAT]:Ar,[be.SPHERICAL_ECEF]:QI,[be.SPHERICAL_MARS_PCPF]:null,[be.SPHERICAL_MOON_PCPF]:null,[be.UNKNOWN]:null,[be.WEB_MERCATOR]:bx,[be.PLATE_CARREE]:wx,[be.WGS84]:Ar,[be.WGS84_ECEF]:Sx},[be.CGCS2000]:{[be.CGCS2000]:Ar,[be.GCSMARS2000]:null,[be.GCSMOON2000]:null,[be.LON_LAT]:Ar,[be.SPHERICAL_ECEF]:QI,[be.SPHERICAL_MARS_PCPF]:null,[be.SPHERICAL_MOON_PCPF]:null,[be.UNKNOWN]:null,[be.WEB_MERCATOR]:bx,[be.PLATE_CARREE]:wx,[be.WGS84]:Ar,[be.WGS84_ECEF]:Sx},[be.GCSMARS2000]:{[be.CGCS2000]:null,[be.GCSMARS2000]:Ar,[be.GCSMOON2000]:null,[be.LON_LAT]:Ar,[be.SPHERICAL_ECEF]:null,[be.SPHERICAL_MARS_PCPF]:sK,[be.SPHERICAL_MOON_PCPF]:null,[be.UNKNOWN]:null,[be.WEB_MERCATOR]:null,[be.PLATE_CARREE]:null,[be.WGS84]:null,[be.WGS84_ECEF]:null},[be.GCSMOON2000]:{[be.CGCS2000]:null,[be.GCSMARS2000]:null,[be.GCSMOON2000]:Ar,[be.LON_LAT]:Ar,[be.SPHERICAL_ECEF]:null,[be.SPHERICAL_MARS_PCPF]:null,[be.SPHERICAL_MOON_PCPF]:nK,[be.UNKNOWN]:null,[be.WEB_MERCATOR]:null,[be.PLATE_CARREE]:null,[be.WGS84]:null,[be.WGS84_ECEF]:null},[be.WEB_MERCATOR]:{[be.CGCS2000]:KI,[be.GCSMARS2000]:null,[be.GCSMOON2000]:null,[be.LON_LAT]:KI,[be.SPHERICAL_ECEF]:uAe,[be.SPHERICAL_MARS_PCPF]:null,[be.SPHERICAL_MOON_PCPF]:null,[be.UNKNOWN]:null,[be.WEB_MERCATOR]:Ar,[be.PLATE_CARREE]:pAe,[be.WGS84]:KI,[be.WGS84_ECEF]:dAe},[be.WGS84_ECEF]:{[be.CGCS2000]:$x,[be.GCSMARS2000]:null,[be.GCSMOON2000]:null,[be.LON_LAT]:$x,[be.SPHERICAL_ECEF]:xAe,[be.SPHERICAL_MARS_PCPF]:null,[be.SPHERICAL_MOON_PCPF]:null,[be.UNKNOWN]:null,[be.WEB_MERCATOR]:SAe,[be.PLATE_CARREE]:fAe,[be.WGS84]:$x,[be.WGS84_ECEF]:Ar},[be.SPHERICAL_ECEF]:{[be.CGCS2000]:xx,[be.GCSMARS2000]:null,[be.GCSMOON2000]:null,[be.LON_LAT]:xx,[be.SPHERICAL_ECEF]:Ar,[be.SPHERICAL_MARS_PCPF]:null,[be.SPHERICAL_MOON_PCPF]:null,[be.UNKNOWN]:null,[be.WEB_MERCATOR]:bAe,[be.PLATE_CARREE]:mAe,[be.WGS84]:xx,[be.WGS84_ECEF]:wAe},[be.SPHERICAL_MARS_PCPF]:{[be.CGCS2000]:null,[be.GCSMARS2000]:aK,[be.GCSMOON2000]:null,[be.LON_LAT]:aK,[be.SPHERICAL_ECEF]:null,[be.SPHERICAL_MARS_PCPF]:Ar,[be.SPHERICAL_MOON_PCPF]:null,[be.UNKNOWN]:null,[be.WEB_MERCATOR]:null,[be.PLATE_CARREE]:null,[be.WGS84]:null,[be.WGS84_ECEF]:null},[be.SPHERICAL_MOON_PCPF]:{[be.CGCS2000]:null,[be.GCSMARS2000]:null,[be.GCSMOON2000]:oK,[be.LON_LAT]:oK,[be.SPHERICAL_ECEF]:null,[be.SPHERICAL_MARS_PCPF]:null,[be.SPHERICAL_MOON_PCPF]:Ar,[be.UNKNOWN]:null,[be.WEB_MERCATOR]:null,[be.PLATE_CARREE]:null,[be.WGS84]:null,[be.WGS84_ECEF]:null},[be.UNKNOWN]:{[be.CGCS2000]:null,[be.GCSMARS2000]:null,[be.GCSMOON2000]:null,[be.LON_LAT]:null,[be.SPHERICAL_ECEF]:null,[be.SPHERICAL_MARS_PCPF]:null,[be.SPHERICAL_MOON_PCPF]:null,[be.UNKNOWN]:Ar,[be.WEB_MERCATOR]:null,[be.PLATE_CARREE]:null,[be.WGS84]:null,[be.WGS84_ECEF]:null},[be.LON_LAT]:{[be.CGCS2000]:Ar,[be.GCSMARS2000]:Ar,[be.GCSMOON2000]:Ar,[be.LON_LAT]:Ar,[be.SPHERICAL_ECEF]:QI,[be.SPHERICAL_MARS_PCPF]:sK,[be.SPHERICAL_MOON_PCPF]:nK,[be.UNKNOWN]:null,[be.WEB_MERCATOR]:bx,[be.PLATE_CARREE]:wx,[be.WGS84]:Ar,[be.WGS84_ECEF]:Sx},[be.PLATE_CARREE]:{[be.CGCS2000]:_x,[be.GCSMARS2000]:null,[be.GCSMOON2000]:null,[be.LON_LAT]:_x,[be.SPHERICAL_ECEF]:yAe,[be.SPHERICAL_MARS_PCPF]:null,[be.SPHERICAL_MOON_PCPF]:null,[be.UNKNOWN]:null,[be.WEB_MERCATOR]:gAe,[be.PLATE_CARREE]:Ar,[be.WGS84]:_x,[be.WGS84_ECEF]:vAe}};function whe(t,e){var i;return(i=cAe(t,e))==null?void 0:i.projector}function cAe(t,e){if(t==null||e==null)return null;if(Pp.source.spatialReference===t&&Pp.dest.spatialReference===e)return Pp;const i=rK(t,Pp.source),r=rK(e,Pp.dest);return i===be.UNKNOWN&&r===be.UNKNOWN?es(t,e)?Pp.projector=Ar:Pp.projector=null:Pp.projector=lAe[i][r],Pp}function rK(t,e){return t?e.spatialReference===t?e.spatialReferenceId:(e.spatialReference=t,"metersPerUnit"in e&&(e.metersPerUnit=Dc(t,1)),KR(t)?e.spatialReferenceId=be.SPHERICAL_ECEF:nw(t)?e.spatialReferenceId=be.WGS84:dp(t)?e.spatialReferenceId=be.WEB_MERCATOR:mCe(t)?e.spatialReferenceId=be.PLATE_CARREE:t.wkt===bCe.wkt?e.spatialReferenceId=be.WGS84_ECEF:t.wkid===rw.CGCS2000?e.spatialReferenceId=be.CGCS2000:t.wkt===kG.wkt?e.spatialReferenceId=be.SPHERICAL_MARS_PCPF:t.wkt===PG.wkt?e.spatialReferenceId=be.SPHERICAL_MOON_PCPF:iue(t)?e.spatialReferenceId=be.GCSMARS2000:rue(t)?e.spatialReferenceId=be.GCSMOON2000:e.spatialReferenceId=be.UNKNOWN):be.UNKNOWN}function Ar(t,e,i,r){t!==i&&(i[r++]=t[e++],i[r++]=t[e++],i[r]=t[e])}function KI(t,e,i,r){i[r]=s$*(t[e]/Lb),i[r+1]=s$*(_he-2*Math.atan(Math.exp(-t[e+1]/Lb))),i[r+2]=t[e+2]}function uAe(t,e,i,r){const n=t[e]/Lb,s=_he-2*Math.atan(Math.exp(-t[e+1]/Lb)),o=Lb+t[e+2],a=Math.cos(s)*o;i[r]=Math.cos(n)*a,i[r+1]=Math.sin(n)*a,i[r+2]=Math.sin(s)*o}function dAe(t,e,i,r){KI(t,e,i,r),Sx(i,r,i,r)}function hAe(t,e,i,r,n){const s=.4999999*Math.PI,o=to(n$*t[e+1],-s,s),a=Math.sin(o);i[r++]=n$*t[e]*n.radius,i[r++]=n.halfSemiMajorAxis*Math.log((1+a)/(1-a)),i[r]=t[e+2]}function bx(t,e,i,r){hAe(t,e,i,r,tn)}function wx(t,e,i,r){i[r]=t[e]*lK,i[r+1]=t[e+1]*lK,i[r+2]=t[e+2]}function _x(t,e,i,r){i[r]=t[e]*cK,i[r+1]=t[e+1]*cK,i[r+2]=t[e+2]}function pAe(t,e,i,r){KI(t,e,i,r),wx(i,r,i,r)}function fAe(t,e,i,r){$x(t,e,i,r),wx(i,r,i,r)}function mAe(t,e,i,r){xx(t,e,i,r),wx(i,r,i,r)}function yAe(t,e,i,r){_x(t,e,i,r),QI(i,r,i,r)}function gAe(t,e,i,r){_x(t,e,i,r),bx(i,r,i,r)}function vAe(t,e,i,r){_x(t,e,i,r),Sx(i,r,i,r)}function eq(t,e,i,r,n){const s=n+t[e+2],o=n$*t[e+1],a=n$*t[e],l=Math.cos(o)*s;i[r]=Math.cos(a)*l,i[r+1]=Math.sin(a)*l,i[r+2]=Math.sin(o)*s}function nK(t,e,i,r){eq(t,e,i,r,kg.radius)}function sK(t,e,i,r){eq(t,e,i,r,Qh.radius)}function QI(t,e,i,r){eq(t,e,i,r,tn.radius)}function tq(t,e,i,r,n){const s=t[e],o=t[e+1],a=t[e+2],l=Math.sqrt(s*s+o*o+a*a),c=HEe(a/(l===0?1:l)),d=Math.atan2(o,s);i[r++]=s$*d,i[r++]=s$*c,i[r]=l-n}function oK(t,e,i,r){tq(t,e,i,r,kg.radius)}function aK(t,e,i,r){tq(t,e,i,r,Qh.radius)}function xx(t,e,i,r){tq(t,e,i,r,tn.radius)}function bAe(t,e,i,r){xx(t,e,i,r),bx(i,r,i,r)}function wAe(t,e,i,r){xx(t,e,i,r),Sx(i,r,i,r)}function _Ae(t,e,i,r,n){const s=n$*t[e],o=n$*t[e+1],a=t[e+2],l=Math.sin(o),c=Math.cos(o),d=n.radius/Math.sqrt(1-n.eccentricitySquared*l*l);i[r++]=(d+a)*c*Math.cos(s),i[r++]=(d+a)*c*Math.sin(s),i[r++]=(d*(1-n.eccentricitySquared)+a)*l}function Sx(t,e,i,r){_Ae(t,e,i,r,tn)}function $x(t,e,i,r){const n=aAe,s=t[e],o=t[e+1],a=t[e+2];let l,c,d,f,y,g,b,_,x,E,C,k,O,D,B,j,Z,X,ee,pe,he;l=Math.abs(a),c=s*s+o*o,d=Math.sqrt(c),f=c+a*a,y=Math.sqrt(f),pe=Math.atan2(o,s),g=a*a/f,b=c/f,D=n.a2/y,B=n.a3-n.a4/y,b>.3?(_=l/y*(1+b*(n.a1+D+g*B)/y),ee=Math.asin(_),E=_*_,x=Math.sqrt(1-E)):(x=d/y*(1-g*(n.a5-D-b*B)/y),ee=Math.acos(x),E=1-x*x,_=Math.sqrt(E)),C=1-tn.eccentricitySquared*E,k=tn.radius/Math.sqrt(C),O=n.a6*k,D=d-k*x,B=l-O*_,Z=x*D+_*B,j=x*B-_*D,X=j/(O/C+Z),ee+=X,he=Z+j*X/2,a<0&&(ee=-ee),i[r++]=s$*pe,i[r++]=s$*ee,i[r]=he}function xAe(t,e,i,r){$x(t,e,i,r),QI(i,r,i,r)}function SAe(t,e,i,r){$x(t,e,i,r),bx(i,r,i,r)}const Pp={source:{spatialReference:null,spatialReferenceId:be.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:be.UNKNOWN,metersPerUnit:1},projector:Ar},n$=k$(1),s$=oce(1),_he=.5*Math.PI,Lb=tn.radius,lK=Lb*Math.PI/180,cK=180/(Lb*Math.PI);function g2(t,e,i,r,n,s,o=Math.floor(t.length/3)){const a=whe(e,n);if(a==null)return!1;if(a===Ar){if(t===r&&i===s)return!0;const c=i+3*o;for(let d=i,f=s;d<c;d++,f++)r[f]=t[d];return!0}const l=i+3*o;for(let c=i,d=s;c<l;c+=3,d+=3)a(t,c,r,d);return!0}const Gpt=Object.freeze(Object.defineProperty({__proto__:null,projectBuffer:g2},Symbol.toStringTag,{value:"Module"}));function uK(t,e,i,r,n,s){return hP[0]=t,hP[1]=e,hP[2]=i,g2(hP,r,0,n,s,0)}const hP=Gg();let pP=0,Pz=class rU{static fromGE(e){const i=new rU;return i._wkt=e.wkt,i._wkid=e.wkid,i._isInverse=e.isInverse,i}constructor(e){this.uid=pP++,e?(this._wkt=e.wkt!=null?e.wkt:null,this._wkid=e.wkid!=null?e.wkid:-1,this._isInverse=e.isInverse!=null&&e.isInverse===!0):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}get wkt(){return this._wkt}set wkt(e){this._wkt=e,this.uid=pP++}get wkid(){return this._wkid}set wkid(e){this._wkid=e,this.uid=pP++}get isInverse(){return this._isInverse}set isInverse(e){this._isInverse=e,this.uid=pP++}getInverse(){const e=new rU;return e._wkt=this.wkt,e._wkid=this._wkid,e._isInverse=!this.isInverse,e}},aO=class NE{static cacheKey(e,i){var r,n,s,o,a,l;return[((r=e.wkid)==null?void 0:r.toString())??"-1",((n=e.wkt)==null?void 0:n.toString())??"",((s=e.wkt2)==null?void 0:s.toString())??"",((o=i.wkid)==null?void 0:o.toString())??"-1",((a=i.wkt)==null?void 0:a.toString())??"",((l=i.wkt2)==null?void 0:l.toString())??""].join()}static fromGE(e){const i=new NE;let r="";for(const n of e.steps){const s=Pz.fromGE(n);i.steps.push(s),r+=s.uid.toString()+","}return i._cachedProjection={},i._gtlistentry=null,i._chain=r,i}constructor(e){if(this.steps=[],this._cachedProjection={},this._chain="",this._gtlistentry=null,e==null?void 0:e.steps)for(const i of e.steps)i instanceof Pz?this.steps.push(i):this.steps.push(new Pz({wkid:i.wkid,wkt:i.wkt,isInverse:i.isInverse}))}getInverse(){const e=new NE;e.steps=[];for(let i=this.steps.length-1;i>=0;i--){const r=this.steps[i];e.steps.push(r.getInverse())}return e}getGTListEntry(){let e="";for(const i of this.steps)e+=i.uid.toString()+",";return e!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=e),this._gtlistentry}assignCachedGe(e,i,r){this._cachedProjection[NE.cacheKey(e,i)]=r}getCachedGeTransformation(e,i){let r="";for(const s of this.steps)r+=s.uid.toString()+",";r!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=r);const n=this._cachedProjection[NE.cacheKey(e,i)];return n===void 0?null:n}};function xhe(t,e,i){if(e==null||i==null||i.vcsWkid||es(e,i)||Ag(e)||Ag(i))return null;const r=XS(e)/XS(i);if(r===1)return null;switch(t){case"point":case"esriGeometryPoint":return n=>$Ae(n,r);case"polyline":case"esriGeometryPolyline":return n=>EAe(n,r);case"polygon":case"esriGeometryPolygon":return n=>TAe(n,r);case"multipoint":case"esriGeometryMultipoint":return n=>IAe(n,r);case"extent":case"esriGeometryEnvelope":return n=>CAe(n,r);default:return null}}function $Ae(t,e){(t==null?void 0:t.z)!=null&&(t.z*=e)}function TAe(t,e){if(t)for(const i of t.rings)for(const r of i)r.length>2&&(r[2]*=e)}function EAe(t,e){if(t)for(const i of t.paths)for(const r of i)r.length>2&&(r[2]*=e)}function IAe(t,e){if(t)for(const i of t.points)i.length>2&&(i[2]*=e)}function CAe(t,e){t&&t.zmin!=null&&t.zmax!=null&&(t.zmin*=e,t.zmax*=e)}let Ku=null,Rg=null,eC=null,nL={};const iq=new gw;function qg(){return!!Ku&&CG()}function She(){return!!qg()||(vt(iq),Og(),!1)}function $he(t,e){return!t||!e||rd(t,e)||She()}function MAe(t,e){return!rd(t,e)&&!qg()}function Og(t){return eC==null&&(eC=Promise.all([Yce(),ye(()=>import("./geometryEngineBase-DGkk6OIh.js"),__vite__mapDeps([6,7])).then((e=>e.g)),ye(()=>import("./hydrated-DhsJKZXG.js"),[])])),eC.then((([,e,{hydratedAdapter:i}])=>{Wi(t),Rg=i,Ku=e.default,Ku._enableProjection(dCe),iq.notify()}))}function um(t,e,i=null,r=null){return Array.isArray(t)?t.length===0?[]:(GCe(t),nU(Rg,t,t[0].spatialReference,e,i,r)):(KS(t),nU(Rg,[t],t.spatialReference,e,i,r)[0])}function nU(t,e,i,r,n=null,s=null){if(i==null||r==null)return e;if(rd(i,r,n))return e.map((o=>sL(o,i,r)));if(n==null&&KR(i))return e.map((o=>sL(o,i,et.WGS84))).map((o=>tM(o,r)));if(n==null&&KR(r))return e.map((o=>tM(o,et.WGS84))).map((o=>sL(o,et.WGS84,r)));if(n==null){const o=aO.cacheKey(i,r);nL[o]!==void 0?n=nL[o]:((n=Ihe(i,r,void 0))==null&&(n=new aO),nL[o]=n)}if(Ku==null||t==null)throw new nN;return s!=null?Ku._project(t,e,i,r,n,s):Ku._project(t,e,i,r,n)}function The(t,e){const i=Ehe([t],e);return i.pending!=null?{pending:i.pending,geometry:null}:i.geometries!=null?{pending:null,geometry:i.geometries[0]}:{pending:null,geometry:null}}function Ehe(t,e){if(!qg()){for(const i of t)if(i!=null&&!es(i.spatialReference,e)&&kl(i.spatialReference)&&kl(e)&&!rd(i.spatialReference,e))return vt(iq),{pending:Og(),geometries:null}}return{pending:null,geometries:t.map((i=>i==null?null:es(i.spatialReference,e)?i:kl(i.spatialReference)&&kl(e)?tM(i,e):null))}}function Ihe(t,e,i=null){if(t==null||e==null)return null;if(Ku==null||Rg==null)throw new nN;const r=Ku._getTransformation(Rg,t,e,i,i==null?void 0:i.spatialReference);return r!==null?aO.fromGE(r):null}function kAe(t,e,i=null){if(Ku==null||Rg==null)throw new nN;const r=Ku._getTransformationBySuitability(Rg,t,e,i,i==null?void 0:i.spatialReference);if(r!==null){const n=[];for(const s of r)n.push(aO.fromGE(s));return n}return[]}let nN=class extends ie{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}};function PAe(){Ku=null,Rg=null,eC=null,nL={}}const AAe={get loadPromise(){return eC}};function tM(t,e){try{const i=um(t,e);if(i==null)return null;"xmin"in t&&"xmin"in i&&(i.zmin=t.zmin,i.zmax=t.zmax);const r=xhe(i.type,t.spatialReference,e);return r!=null&&r(i),i}catch(i){if(!(i instanceof nN))throw i;return null}}async function Che(t,e,i){const r=t.spatialReference;return r!=null&&e!=null&&await sN(r,e,null,i),tM(t,e)}function rd(t,e,i){return!i&&(!!es(t,e)||kl(t)&&kl(e)&&!!whe(t,e))}function LAe(t,e){if(es(t,e))return!0;if(!kl(t)||!kl(e))return!1;const i=nw(t)||dp(t)||XY(t),r=nw(e)||dp(e)||XY(e);return i&&r}async function sN(t,e,i,r){if(qg())return mY(r);if(Array.isArray(t)){for(const{source:n,dest:s,geographicTransformation:o}of t)if(n&&s&&!rd(n,s,o))return Og(r)}else if(t&&e&&!rd(t,e,i))return Og(r);return mY(r)}function sL(t,e,i){return t?"x"in t?Mhe(t,e,new _t,i,0):"xmin"in t?Rhe(t,e,new Qt,i,0):"rings"in t?Lhe(t,e,new br,i,0):"paths"in t?Phe(t,e,new Yr,i,0):"points"in t?khe(t,e,new _c,i,0):null:null}function RAe(t,e,i=e.spatialReference,r=0){return i!=null&&t.spatialReference!=null&&Mhe(t,t.spatialReference,e,i,r)!=null}function Mhe(t,e,i,r,n){wo[0]=t.x,wo[1]=t.y;const s=t.z;return wo[2]=s!==void 0?s:n,g2(wo,e,0,wo,r,0)?(i.x=wo[0],i.y=wo[1],i.spatialReference=r,s!==void 0||Ag(r)?(i.z=wo[2],i.hasZ=!0):(i.z=void 0,i.hasZ=!1),t.m===void 0?(i.m=void 0,i.hasM=!1):(i.m=t.m,i.hasM=!0),i):null}function OAe(t,e,i=e.spatialReference,r=0){return t.spatialReference!=null&&i!=null&&khe(t,t.spatialReference,e,i,r)!=null}function khe(t,e,i,r,n){const{points:s,hasZ:o,hasM:a}=t,l=[],c=s.length,d=[];for(const y of s)d.push(y[0],y[1],o?y[2]:n);if(!g2(d,e,0,d,r,0,c))return null;const f=o||Ag(r);for(let y=0;y<c;++y){const g=3*y,b=d[g],_=d[g+1];f&&a?l.push([b,_,d[g+2],s[y][3]]):f?l.push([b,_,d[g+2]]):a?l.push([b,_,s[y][2]]):l.push([b,_])}return i.points=l,i.spatialReference=r,i.hasZ=o,i.hasM=a,i}function FAe(t,e,i=e.spatialReference,r=0){return t.spatialReference!=null&&i!=null&&Phe(t,t.spatialReference,e,i,r)!=null}function Phe(t,e,i,r,n){const{paths:s,hasZ:o,hasM:a}=t,l=[];if(!Ohe(s,o??!1,a??!1,e,l,r,n))return null;const c=o||Ag(r);return i.paths=l,i.spatialReference=r,i.hasZ=c,i.hasM=a,i}function Ahe(t,e,i=e.spatialReference,r=0){return t.spatialReference!=null&&i!=null&&Lhe(t,t.spatialReference,e,i,r)!=null}function Lhe(t,e,i,r,n){const{rings:s,hasZ:o,hasM:a}=t,l=[];if(!Ohe(s,o??!1,a??!1,e,l,r,n))return null;const c=o||Ag(r);return i.rings=l,i.spatialReference=r,i.hasZ=c,i.hasM=a,i}function NAe(t,e,i=e.spatialReference,r=0){return t.spatialReference!=null&&i!=null&&Rhe(t,t.spatialReference,e,i,r)!=null}function Rhe(t,e,i,r,n){const{xmin:s,ymin:o,xmax:a,ymax:l,hasZ:c,hasM:d}=t,f=c?t.zmin:n;if(!uK(s,o,f,e,wo,r))return null;const y=c||Ag(r);i.xmin=wo[0],i.ymin=wo[1],y&&(i.zmin=wo[2]);const g=c?t.zmax:n;return uK(a,l,g,e,wo,r)?(i.xmax=wo[0],i.ymax=wo[1],y&&(i.zmax=wo[2]),d&&(i.mmin=t.mmin,i.mmax=t.mmax),i.spatialReference=r,i):null}function Ohe(t,e,i,r,n,s,o=0){const a=new Array;for(const d of t)for(const f of d)a.push(f[0],f[1],e?f[2]:o);if(!g2(a,r,0,a,s,0))return!1;let l=0;n.length=0;const c=e||Ag(s);for(const d of t){const f=new Array;for(const y of d)c&&i?f.push([a[l++],a[l++],a[l++],y[3]]):c?f.push([a[l++],a[l++],a[l++]]):i?(f.push([a[l++],a[l++],y[2]]),l++):(f.push([a[l++],a[l++]]),l++);n.push(f)}return!0}const wo=Gg(),Hpt=Object.freeze(Object.defineProperty({__proto__:null,canProjectWithoutEngine:rd,getTransformation:Ihe,getTransformations:kAe,initializeProjection:sN,isEqualBaseGCS:LAe,isLoaded:qg,isLoadedOrLoad:She,isLoadedOrLoadFor:$he,load:Og,project:um,projectExtent:NAe,projectMany:nU,projectMultipoint:OAe,projectOrLoad:The,projectOrLoadMany:Ehe,projectPoint:RAe,projectPolygon:Ahe,projectPolyline:FAe,projectWithZConversion:Che,projectWithoutEngine:sL,requiresLoad:MAe,test:AAe,tryProjectWithZConversion:tM,unload:PAe},Symbol.toStringTag,{value:"Module"}));var sU,nS;let Ys=(nS=class extends ve{constructor(e){super(e),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new sU({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}},sU=nS,nS);u([h({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Ys.prototype,"cols",void 0),u([h({type:si,json:{write:!0}})],Ys.prototype,"level",void 0),u([h({type:String,json:{write:!0}})],Ys.prototype,"levelValue",void 0),u([h({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Ys.prototype,"origin",void 0),u([h({type:Number,json:{write:!0}})],Ys.prototype,"resolution",void 0),u([h({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Ys.prototype,"rows",void 0),u([h({type:Number,json:{write:!0}})],Ys.prototype,"scale",void 0),Ys=sU=u([V("esri.layers.support.LOD")],Ys);let DAe=class{constructor(e,i,r,n,s=void 0){this.id=e,this.level=i,this.row=r,this.col=n,this.extent=s}};var ly;const dK=new Gt({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});var sS;let Us=(sS=class extends ve{static create(e={}){const{resolutionFactor:i=1,scales:r,size:n=256,spatialReference:s=et.WebMercator,numLODs:o=24}=e;if(!kl(s)){const y=[];if(r)for(let g=0;g<r.length;g++){const b=r[g];y.push(new Ys({level:g,scale:b,resolution:b}))}else{let g=5e-4;for(let b=o-1;b>=0;b--)y.unshift(new Ys({level:b,scale:g,resolution:g})),g*=2}return new ly({dpi:96,lods:y,origin:new _t(0,0,s),size:[n,n],spatialReference:s})}const a=aa(s),l=e.origin?new _t({x:e.origin.x,y:e.origin.y,spatialReference:s}):new _t(a?{x:a.origin[0],y:a.origin[1],spatialReference:s}:{x:0,y:0,spatialReference:s}),c=96,d=1/(Dc(s)*39.37*c),f=[];if(r)for(let y=0;y<r.length;y++){const g=r[y],b=g*d;f.push(new Ys({level:y,scale:g,resolution:b}))}else{let y=L$(s)?512/n*5916575275917094e-7:256/n*591657527591555e-6;const g=Math.ceil(o/i);f.push(new Ys({level:0,scale:y,resolution:y*d}));for(let b=1;b<g;b++){const _=y/2**i,x=_*d;f.push(new Ys({level:b,scale:_,resolution:x})),y=_}}return new ly({dpi:c,lods:f,origin:l,size:[n,n],spatialReference:s})}constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.size=null,this.spatialReference=null}get isWrappable(){const{spatialReference:e,origin:i}=this;if(e&&i){const r=aa(e);return e.isWrappable&&!!r&&Math.abs(r.origin[0]-i.x)<=r.dx}return!1}readOrigin(e,i){return _t.fromJSON({spatialReference:i.spatialReference,...e})}set lods(e){let i=0,r=0;const n=[],s=this._levelToLOD={};e&&(i=-1/0,r=1/0,e.forEach((o=>{n.push(o.scale),i=o.scale>i?o.scale:i,r=o.scale<r?o.scale:r,s[o.level]=o}))),this._set("scales",n),this._set("lods",e),this._initializeUpsampleLevels()}readSize(e,i){return[i.cols,i.rows]}writeSize(e,i){i.cols=e[0],i.rows=e[1]}zoomToScale(e){const i=this.scales;if(e<=0)return i[0];if(e>=i.length-1)return i[i.length-1];const r=Math.floor(e),n=r+1;return i[r]/(i[r]/i[n])**(e-r)}scaleToZoom(e){const i=this.scales,r=i.length-1;let n=0;for(;n<r;n++){const s=i[n],o=i[n+1];if(s<=e)return n;if(o===e)return n+1;if(s>e&&o<e)return n+Math.log(s/e)/Math.log(s/o)}return n}tileAt(e,i,r,n){const s=this.lodAt(e);if(!s)return null;let o,a;if(typeof i=="number")o=i,a=r;else if(es(i.spatialReference,this.spatialReference))o=i.x,a=i.y,n=r;else{const d=HF(i,this.spatialReference);if(d==null)return null;o=d.x,a=d.y,n=r}const l=s.resolution*this.size[0],c=s.resolution*this.size[1];return n||(n=new DAe(null,0,0,0,_n())),n.level=e,n.row=Math.floor((this.origin.y-a)/c+.001),n.col=Math.floor((o-this.origin.x)/l+.001),this.updateTileInfo(n),n}updateTileInfo(e,i=ly.ExtrapolateOptions.NONE){let r=this.lodAt(e.level);if(!r&&i===ly.ExtrapolateOptions.POWER_OF_TWO){const a=this.lods[this.lods.length-1];a.level<e.level&&(r=a)}if(!r)return;const n=e.level-r.level,s=r.resolution*this.size[0]/2**n,o=r.resolution*this.size[1]/2**n;e.id=`${e.level}/${e.row}/${e.col}`,e.extent||(e.extent=_n()),e.extent[0]=this.origin.x+e.col*s,e.extent[1]=this.origin.y-(e.row+1)*o,e.extent[2]=e.extent[0]+s,e.extent[3]=e.extent[1]+o}upsampleTile(e){const i=this._upsampleLevels[e.level];return!(!i||i.parentLevel===-1)&&(e.level=i.parentLevel,e.row=Math.floor(e.row/i.factor+.001),e.col=Math.floor(e.col/i.factor+.001),this.updateTileInfo(e),!0)}getTileBounds(e,i){const r=this.lodAt(i.level);if(r==null)return null;const{resolution:n}=r,s=n*this.size[0],o=n*this.size[1];return e[0]=this.origin.x+i.col*s,e[1]=this.origin.y-(i.row+1)*o,e[2]=e[0]+s,e[3]=e[1]+o,e}lodAt(e){var i;return((i=this._levelToLOD)==null?void 0:i[e])??null}clone(){return ly.fromJSON(this.write({}))}getCompatibleForVTL(e){if(this.size[0]!==this.size[1]||this.size[0]===256&&e===512)return null;const i=(this.size[0]===512&&e===256?-1:0)+(this.spatialReference.isGeographic?1:0);if(this.size[0]===e&&i===0)return this;const r=[],n=this.lods.length-i;for(let s=0;s<n;s++){const o=s+i,{scale:a,resolution:l}=o>=0?this.lods[o]:{scale:2*this.lods[0].scale,resolution:2*this.lods[0].resolution};r.push(new Ys({level:s,scale:a,resolution:l}))}return new ly({size:[e,e],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:r})}_initializeUpsampleLevels(){const e=this.lods;this._upsampleLevels=[];let i=null;for(let r=0;r<e.length;r++){const n=e[r];this._upsampleLevels[n.level]={parentLevel:i?i.level:-1,factor:i?i.resolution/n.resolution:0},i=n}}},ly=sS,sS);u([h({type:Number,json:{write:!0}})],Us.prototype,"compressionQuality",void 0),u([h({type:Number,json:{write:!0}})],Us.prototype,"dpi",void 0),u([h({type:String,json:{read:dK.read,write:dK.write,origins:{"web-scene":{read:!1,write:!1}}}})],Us.prototype,"format",void 0),u([h({readOnly:!0})],Us.prototype,"isWrappable",null),u([h({type:_t,json:{write:!0}})],Us.prototype,"origin",void 0),u([De("origin")],Us.prototype,"readOrigin",null),u([h({type:[Ys],value:null,json:{write:!0}})],Us.prototype,"lods",null),u([h({readOnly:!0})],Us.prototype,"scales",void 0),u([h({cast:t=>Array.isArray(t)?t:typeof t=="number"?[t,t]:[256,256]})],Us.prototype,"size",void 0),u([De("size",["rows","cols"])],Us.prototype,"readSize",null),u([Ve("size",{cols:{type:si},rows:{type:si}})],Us.prototype,"writeSize",null),u([h({type:et,json:{write:!0}})],Us.prototype,"spatialReference",void 0),Us=ly=u([V("esri.layers.support.TileInfo")],Us),(function(t){var e;(e=t.ExtrapolateOptions||(t.ExtrapolateOptions={}))[e.NONE=0]="NONE",e[e.POWER_OF_TWO=1]="POWER_OF_TWO"})(Us||(Us={}));const oL={widthBreakpoint:{getValue(t){const e=t.viewSize[0],i=t.breakpoints,r=this.values;return e<=i.xsmall?r.xsmall:e<=i.small?r.small:e<=i.medium?r.medium:e<=i.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(t){const e=t.viewSize[1],i=t.breakpoints,r=this.values;return e<=i.xsmall?r.xsmall:e<=i.small?r.small:e<=i.medium?r.medium:e<=i.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(t){const e=t.viewSize,i=e[0],r=e[1],n=this.values;return r>=i?n.portrait:n.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},Az={xsmall:544,small:768,medium:992,large:1200};function zAe(t){const e=t;return e&&e.xsmall<e.small&&e.small<e.medium&&e.medium<e.large}function Lz(t,e){return e?oL[t].valueToClassName[e].split(" "):[]}const VAe=t=>{let e=class extends t{constructor(...i){super(...i),this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=Az}initialize(){this.addHandles($e((()=>[this.breakpoints,this.size]),(()=>this._updateClassNames()),kt))}destroy(){this.destroyed||this._removeActiveClassNames()}set breakpoints(i){if(i!==this._get("breakpoints")){if(!zAe(i)){const r=JSON.stringify(Az,null,2);console.warn("provided breakpoints are not valid, using defaults:"+r),i=Az}this._set("breakpoints",{...i})}}_updateClassNames(){if(!this.container)return;const i=ra.acquire(),r=ra.acquire();let n,s=!1;for(n in oL){const o=this[n],a=oL[n].getValue({viewSize:this.size,breakpoints:this.breakpoints});o!==a&&(s=!0,this[n]=a,Lz(n,o).forEach((l=>r.push(l))),Lz(n,a).forEach((l=>i.push(l))))}s&&(this._applyClassNameChanges(i,r),ra.release(i),ra.release(r))}_applyClassNameChanges(i,r){const n=this.container;n&&(r.forEach((s=>n.classList.remove(s))),i.forEach((s=>n.classList.add(s))))}_removeActiveClassNames(){const i=this.container;if(!i)return;let r;for(r in oL)Lz(r,this[r]).forEach((n=>i.classList.remove(n)))}};return u([h()],e.prototype,"breakpoints",null),u([h()],e.prototype,"orientation",void 0),u([h()],e.prototype,"widthBreakpoint",void 0),u([h()],e.prototype,"heightBreakpoint",void 0),e=u([V("esri.views.BreakpointsOwner")],e),e};function rq(t){return typeof t=="string"?document.getElementById(t):t??null}function hK(t,e){for(;;){const i=t.firstChild;if(!i)break;e.appendChild(i)}}let Rb=class extends tt{constructor(){super(...arguments),this.updating=!1,this._handleId=0,this._scheduleHandleId=0,this._pendingPromises=new Set}destroy(){this.removeAll()}add(e,i,r={}){return this._installWatch(e,i,r,$e)}addWhen(e,i,r={}){return this._installWatch(e,i,r,Sn)}addOnCollectionChange(e,i,{initial:r=!1,final:n=!1}={}){const s=++this._handleId;return this.addHandles([eo(e,"after-changes",this._createSyncUpdatingCallback(),td),eo(e,"change",i,{onListenerAdd:r?o=>i({added:o.toArray(),removed:[]}):void 0,onListenerRemove:n?o=>i({added:[],removed:o.toArray()}):void 0})],s),Ei((()=>this.removeHandles(s)))}addPromise(e){if(e==null)return e;const i=++this._handleId;this.addHandles(Ei((()=>{this._pendingPromises.delete(e)&&(this._pendingPromises.size!==0||this.hasHandles(fP)||this._set("updating",!1))})),i),this._pendingPromises.add(e),this._set("updating",!0);const r=()=>this.removeHandles(i);return e.then(r,r),e}removeAll(){this._pendingPromises.clear(),this.removeAllHandles(),this._set("updating",!1)}_installWatch(e,i,r={},n){const s=++this._handleId;r.sync||this._installSyncUpdatingWatch(e,s);const o=n(e,i,r);return this.addHandles(o,s),Ei((()=>this.removeHandles(s)))}_installSyncUpdatingWatch(e,i){const r=this._createSyncUpdatingCallback(),n=$e(e,r,{sync:!0,equals:()=>!1});return this.addHandles(n,i),n}_createSyncUpdatingCallback(){return()=>{this.removeHandles(fP),++this._scheduleHandleId;const e=this._scheduleHandleId;this._get("updating")||this._set("updating",!0),this.addHandles(o2((()=>{e===this._scheduleHandleId&&(this._set("updating",this._pendingPromises.size>0),this.removeHandles(fP))})),fP)}}};u([h({readOnly:!0})],Rb.prototype,"updating",void 0),Rb=u([V("esri.core.support.UpdatingHandles")],Rb);const fP=-42;/*!
 * @esri/arcgis-html-sanitizer - v4.1.0 - Tue Dec 03 2024 09:13:28 GMT-0500 (Eastern Standard Time)
 * Copyright (c) 2024 - Environmental Systems Research Institute, Inc.
 * Apache-2.0
 * 
 * js-xss
 * Copyright (c) 2012-2018 Zongmin Lei(雷宗民) <leizongmin@gmail.com>
 * http://ucdok.com
 * MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var lO=function(){return lO=Object.assign||function(e){for(var i,r=1,n=arguments.length;r<n;r++){i=arguments[r];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},lO.apply(this,arguments)},oU={exports:{}},on={},aU={exports:{}},xw={};function Fhe(){var t={};return t["align-content"]=!1,t["align-items"]=!1,t["align-self"]=!1,t["alignment-adjust"]=!1,t["alignment-baseline"]=!1,t.all=!1,t["anchor-point"]=!1,t.animation=!1,t["animation-delay"]=!1,t["animation-direction"]=!1,t["animation-duration"]=!1,t["animation-fill-mode"]=!1,t["animation-iteration-count"]=!1,t["animation-name"]=!1,t["animation-play-state"]=!1,t["animation-timing-function"]=!1,t.azimuth=!1,t["backface-visibility"]=!1,t.background=!0,t["background-attachment"]=!0,t["background-clip"]=!0,t["background-color"]=!0,t["background-image"]=!0,t["background-origin"]=!0,t["background-position"]=!0,t["background-repeat"]=!0,t["background-size"]=!0,t["baseline-shift"]=!1,t.binding=!1,t.bleed=!1,t["bookmark-label"]=!1,t["bookmark-level"]=!1,t["bookmark-state"]=!1,t.border=!0,t["border-bottom"]=!0,t["border-bottom-color"]=!0,t["border-bottom-left-radius"]=!0,t["border-bottom-right-radius"]=!0,t["border-bottom-style"]=!0,t["border-bottom-width"]=!0,t["border-collapse"]=!0,t["border-color"]=!0,t["border-image"]=!0,t["border-image-outset"]=!0,t["border-image-repeat"]=!0,t["border-image-slice"]=!0,t["border-image-source"]=!0,t["border-image-width"]=!0,t["border-left"]=!0,t["border-left-color"]=!0,t["border-left-style"]=!0,t["border-left-width"]=!0,t["border-radius"]=!0,t["border-right"]=!0,t["border-right-color"]=!0,t["border-right-style"]=!0,t["border-right-width"]=!0,t["border-spacing"]=!0,t["border-style"]=!0,t["border-top"]=!0,t["border-top-color"]=!0,t["border-top-left-radius"]=!0,t["border-top-right-radius"]=!0,t["border-top-style"]=!0,t["border-top-width"]=!0,t["border-width"]=!0,t.bottom=!1,t["box-decoration-break"]=!0,t["box-shadow"]=!0,t["box-sizing"]=!0,t["box-snap"]=!0,t["box-suppress"]=!0,t["break-after"]=!0,t["break-before"]=!0,t["break-inside"]=!0,t["caption-side"]=!1,t.chains=!1,t.clear=!0,t.clip=!1,t["clip-path"]=!1,t["clip-rule"]=!1,t.color=!0,t["color-interpolation-filters"]=!0,t["column-count"]=!1,t["column-fill"]=!1,t["column-gap"]=!1,t["column-rule"]=!1,t["column-rule-color"]=!1,t["column-rule-style"]=!1,t["column-rule-width"]=!1,t["column-span"]=!1,t["column-width"]=!1,t.columns=!1,t.contain=!1,t.content=!1,t["counter-increment"]=!1,t["counter-reset"]=!1,t["counter-set"]=!1,t.crop=!1,t.cue=!1,t["cue-after"]=!1,t["cue-before"]=!1,t.cursor=!1,t.direction=!1,t.display=!0,t["display-inside"]=!0,t["display-list"]=!0,t["display-outside"]=!0,t["dominant-baseline"]=!1,t.elevation=!1,t["empty-cells"]=!1,t.filter=!1,t.flex=!1,t["flex-basis"]=!1,t["flex-direction"]=!1,t["flex-flow"]=!1,t["flex-grow"]=!1,t["flex-shrink"]=!1,t["flex-wrap"]=!1,t.float=!1,t["float-offset"]=!1,t["flood-color"]=!1,t["flood-opacity"]=!1,t["flow-from"]=!1,t["flow-into"]=!1,t.font=!0,t["font-family"]=!0,t["font-feature-settings"]=!0,t["font-kerning"]=!0,t["font-language-override"]=!0,t["font-size"]=!0,t["font-size-adjust"]=!0,t["font-stretch"]=!0,t["font-style"]=!0,t["font-synthesis"]=!0,t["font-variant"]=!0,t["font-variant-alternates"]=!0,t["font-variant-caps"]=!0,t["font-variant-east-asian"]=!0,t["font-variant-ligatures"]=!0,t["font-variant-numeric"]=!0,t["font-variant-position"]=!0,t["font-weight"]=!0,t.grid=!1,t["grid-area"]=!1,t["grid-auto-columns"]=!1,t["grid-auto-flow"]=!1,t["grid-auto-rows"]=!1,t["grid-column"]=!1,t["grid-column-end"]=!1,t["grid-column-start"]=!1,t["grid-row"]=!1,t["grid-row-end"]=!1,t["grid-row-start"]=!1,t["grid-template"]=!1,t["grid-template-areas"]=!1,t["grid-template-columns"]=!1,t["grid-template-rows"]=!1,t["hanging-punctuation"]=!1,t.height=!0,t.hyphens=!1,t.icon=!1,t["image-orientation"]=!1,t["image-resolution"]=!1,t["ime-mode"]=!1,t["initial-letters"]=!1,t["inline-box-align"]=!1,t["justify-content"]=!1,t["justify-items"]=!1,t["justify-self"]=!1,t.left=!1,t["letter-spacing"]=!0,t["lighting-color"]=!0,t["line-box-contain"]=!1,t["line-break"]=!1,t["line-grid"]=!1,t["line-height"]=!1,t["line-snap"]=!1,t["line-stacking"]=!1,t["line-stacking-ruby"]=!1,t["line-stacking-shift"]=!1,t["line-stacking-strategy"]=!1,t["list-style"]=!0,t["list-style-image"]=!0,t["list-style-position"]=!0,t["list-style-type"]=!0,t.margin=!0,t["margin-bottom"]=!0,t["margin-left"]=!0,t["margin-right"]=!0,t["margin-top"]=!0,t["marker-offset"]=!1,t["marker-side"]=!1,t.marks=!1,t.mask=!1,t["mask-box"]=!1,t["mask-box-outset"]=!1,t["mask-box-repeat"]=!1,t["mask-box-slice"]=!1,t["mask-box-source"]=!1,t["mask-box-width"]=!1,t["mask-clip"]=!1,t["mask-image"]=!1,t["mask-origin"]=!1,t["mask-position"]=!1,t["mask-repeat"]=!1,t["mask-size"]=!1,t["mask-source-type"]=!1,t["mask-type"]=!1,t["max-height"]=!0,t["max-lines"]=!1,t["max-width"]=!0,t["min-height"]=!0,t["min-width"]=!0,t["move-to"]=!1,t["nav-down"]=!1,t["nav-index"]=!1,t["nav-left"]=!1,t["nav-right"]=!1,t["nav-up"]=!1,t["object-fit"]=!1,t["object-position"]=!1,t.opacity=!1,t.order=!1,t.orphans=!1,t.outline=!1,t["outline-color"]=!1,t["outline-offset"]=!1,t["outline-style"]=!1,t["outline-width"]=!1,t.overflow=!1,t["overflow-wrap"]=!1,t["overflow-x"]=!1,t["overflow-y"]=!1,t.padding=!0,t["padding-bottom"]=!0,t["padding-left"]=!0,t["padding-right"]=!0,t["padding-top"]=!0,t.page=!1,t["page-break-after"]=!1,t["page-break-before"]=!1,t["page-break-inside"]=!1,t["page-policy"]=!1,t.pause=!1,t["pause-after"]=!1,t["pause-before"]=!1,t.perspective=!1,t["perspective-origin"]=!1,t.pitch=!1,t["pitch-range"]=!1,t["play-during"]=!1,t.position=!1,t["presentation-level"]=!1,t.quotes=!1,t["region-fragment"]=!1,t.resize=!1,t.rest=!1,t["rest-after"]=!1,t["rest-before"]=!1,t.richness=!1,t.right=!1,t.rotation=!1,t["rotation-point"]=!1,t["ruby-align"]=!1,t["ruby-merge"]=!1,t["ruby-position"]=!1,t["shape-image-threshold"]=!1,t["shape-outside"]=!1,t["shape-margin"]=!1,t.size=!1,t.speak=!1,t["speak-as"]=!1,t["speak-header"]=!1,t["speak-numeral"]=!1,t["speak-punctuation"]=!1,t["speech-rate"]=!1,t.stress=!1,t["string-set"]=!1,t["tab-size"]=!1,t["table-layout"]=!1,t["text-align"]=!0,t["text-align-last"]=!0,t["text-combine-upright"]=!0,t["text-decoration"]=!0,t["text-decoration-color"]=!0,t["text-decoration-line"]=!0,t["text-decoration-skip"]=!0,t["text-decoration-style"]=!0,t["text-emphasis"]=!0,t["text-emphasis-color"]=!0,t["text-emphasis-position"]=!0,t["text-emphasis-style"]=!0,t["text-height"]=!0,t["text-indent"]=!0,t["text-justify"]=!0,t["text-orientation"]=!0,t["text-overflow"]=!0,t["text-shadow"]=!0,t["text-space-collapse"]=!0,t["text-transform"]=!0,t["text-underline-position"]=!0,t["text-wrap"]=!0,t.top=!1,t.transform=!1,t["transform-origin"]=!1,t["transform-style"]=!1,t.transition=!1,t["transition-delay"]=!1,t["transition-duration"]=!1,t["transition-property"]=!1,t["transition-timing-function"]=!1,t["unicode-bidi"]=!1,t["vertical-align"]=!1,t.visibility=!1,t["voice-balance"]=!1,t["voice-duration"]=!1,t["voice-family"]=!1,t["voice-pitch"]=!1,t["voice-range"]=!1,t["voice-rate"]=!1,t["voice-stress"]=!1,t["voice-volume"]=!1,t.volume=!1,t["white-space"]=!1,t.widows=!1,t.width=!0,t["will-change"]=!1,t["word-break"]=!0,t["word-spacing"]=!0,t["word-wrap"]=!0,t["wrap-flow"]=!1,t["wrap-through"]=!1,t["writing-mode"]=!1,t["z-index"]=!1,t}function jAe(t,e,i){}function UAe(t,e,i){}var BAe=/javascript\s*\:/img;function GAe(t,e){return BAe.test(e)?"":e}xw.whiteList=Fhe();xw.getDefaultWhiteList=Fhe;xw.onAttr=jAe;xw.onIgnoreAttr=UAe;xw.safeAttrValue=GAe;var qAe={indexOf:function(t,e){var i,r;if(Array.prototype.indexOf)return t.indexOf(e);for(i=0,r=t.length;i<r;i++)if(t[i]===e)return i;return-1},forEach:function(t,e,i){var r,n;if(Array.prototype.forEach)return t.forEach(e,i);for(r=0,n=t.length;r<n;r++)e.call(i,t[r],r,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(t){return String.prototype.trimRight?t.trimRight():t.replace(/(\s*$)/g,"")}},ZT=qAe;function HAe(t,e){t=ZT.trimRight(t),t[t.length-1]!==";"&&(t+=";");var i=t.length,r=!1,n=0,s=0,o="";function a(){if(!r){var d=ZT.trim(t.slice(n,s)),f=d.indexOf(":");if(f!==-1){var y=ZT.trim(d.slice(0,f)),g=ZT.trim(d.slice(f+1));if(y){var b=e(n,o.length,y,g,d);b&&(o+=b+"; ")}}}n=s+1}for(;s<i;s++){var l=t[s];if(l==="/"&&t[s+1]==="*"){var c=t.indexOf("*/",s+2);if(c===-1)break;s=c+1,n=s+1,r=!1}else l==="("?r=!0:l===")"?r=!1:l===";"?r||a():l===`
`&&a()}return ZT.trim(o)}var WAe=HAe,mP=xw,ZAe=WAe;function pK(t){return t==null}function JAe(t){var e={};for(var i in t)e[i]=t[i];return e}function Nhe(t){t=JAe(t||{}),t.whiteList=t.whiteList||mP.whiteList,t.onAttr=t.onAttr||mP.onAttr,t.onIgnoreAttr=t.onIgnoreAttr||mP.onIgnoreAttr,t.safeAttrValue=t.safeAttrValue||mP.safeAttrValue,this.options=t}Nhe.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,i=e.options,r=i.whiteList,n=i.onAttr,s=i.onIgnoreAttr,o=i.safeAttrValue,a=ZAe(t,function(l,c,d,f,y){var g=r[d],b=!1;if(g===!0?b=g:typeof g=="function"?b=g(f):g instanceof RegExp&&(b=g.test(f)),b!==!0&&(b=!1),f=o(d,f),!!f){var _={position:c,sourcePosition:l,source:y,isWhite:b};if(b){var x=n(d,f,_);return pK(x)?d+":"+f:x}else{var x=s(d,f,_);if(!pK(x))return x}}});return a};var YAe=Nhe;(function(t,e){var i=xw,r=YAe;function n(o,a){var l=new r(a);return l.process(o)}e=t.exports=n,e.FilterCSS=r;for(var s in i)e[s]=i[s]})(aU,aU.exports);var nq=aU.exports,sq={indexOf:function(t,e){var i,r;if(Array.prototype.indexOf)return t.indexOf(e);for(i=0,r=t.length;i<r;i++)if(t[i]===e)return i;return-1},forEach:function(t,e,i){var r,n;if(Array.prototype.forEach)return t.forEach(e,i);for(r=0,n=t.length;r<n;r++)e.call(i,t[r],r,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(t){var e=/\s|\n|\t/,i=e.exec(t);return i?i.index:-1}},XAe=nq.FilterCSS,KAe=nq.getDefaultWhiteList,cO=sq;function Dhe(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var zhe=new XAe;function QAe(t,e,i){}function eLe(t,e,i){}function tLe(t,e,i){}function iLe(t,e,i){}function Vhe(t){return t.replace(nLe,"&lt;").replace(sLe,"&gt;")}function rLe(t,e,i,r){if(i=Hhe(i),e==="href"||e==="src"){if(i=cO.trim(i),i==="#")return"#";if(!(i.substr(0,7)==="http://"||i.substr(0,8)==="https://"||i.substr(0,7)==="mailto:"||i.substr(0,4)==="tel:"||i.substr(0,11)==="data:image/"||i.substr(0,6)==="ftp://"||i.substr(0,2)==="./"||i.substr(0,3)==="../"||i[0]==="#"||i[0]==="/"))return""}else if(e==="background"){if(yP.lastIndex=0,yP.test(i))return""}else if(e==="style"){if(fK.lastIndex=0,fK.test(i)||(mK.lastIndex=0,mK.test(i)&&(yP.lastIndex=0,yP.test(i))))return"";r!==!1&&(r=r||zhe,i=r.process(i))}return i=Whe(i),i}var nLe=/</g,sLe=/>/g,oLe=/"/g,aLe=/&quot;/g,lLe=/&#([a-zA-Z0-9]*);?/gim,cLe=/&colon;?/gim,uLe=/&newline;?/gim,yP=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,fK=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,mK=/u\s*r\s*l\s*\(.*/gi;function jhe(t){return t.replace(oLe,"&quot;")}function Uhe(t){return t.replace(aLe,'"')}function Bhe(t){return t.replace(lLe,function(i,r){return r[0]==="x"||r[0]==="X"?String.fromCharCode(parseInt(r.substr(1),16)):String.fromCharCode(parseInt(r,10))})}function Ghe(t){return t.replace(cLe,":").replace(uLe," ")}function qhe(t){for(var e="",i=0,r=t.length;i<r;i++)e+=t.charCodeAt(i)<32?" ":t.charAt(i);return cO.trim(e)}function Hhe(t){return t=Uhe(t),t=Bhe(t),t=Ghe(t),t=qhe(t),t}function Whe(t){return t=jhe(t),t=Vhe(t),t}function dLe(){return""}function hLe(t,e){typeof e!="function"&&(e=function(){});var i=!Array.isArray(t);function r(o){return i?!0:cO.indexOf(t,o)!==-1}var n=[],s=!1;return{onIgnoreTag:function(o,a,l){if(r(o))if(l.isClosing){var c="[/removed]",d=l.position+c.length;return n.push([s!==!1?s:l.position,d]),s=!1,c}else return s||(s=l.position),"[removed]";else return e(o,a,l)},remove:function(o){var a="",l=0;return cO.forEach(n,function(c){a+=o.slice(l,c[0]),l=c[1]}),a+=o.slice(l),a}}}function pLe(t){for(var e="",i=0;i<t.length;){var r=t.indexOf("<!--",i);if(r===-1){e+=t.slice(i);break}e+=t.slice(i,r);var n=t.indexOf("-->",r);if(n===-1)break;i=n+3}return e}function fLe(t){var e=t.split("");return e=e.filter(function(i){var r=i.charCodeAt(0);return r===127?!1:r<=31?r===10||r===13:!0}),e.join("")}on.whiteList=Dhe();on.getDefaultWhiteList=Dhe;on.onTag=QAe;on.onIgnoreTag=eLe;on.onTagAttr=tLe;on.onIgnoreTagAttr=iLe;on.safeAttrValue=rLe;on.escapeHtml=Vhe;on.escapeQuote=jhe;on.unescapeQuote=Uhe;on.escapeHtmlEntities=Bhe;on.escapeDangerHtml5Entities=Ghe;on.clearNonPrintableCharacter=qhe;on.friendlyAttrValue=Hhe;on.escapeAttrValue=Whe;on.onIgnoreTagStripAll=dLe;on.StripTagBody=hLe;on.stripCommentTag=pLe;on.stripBlankChar=fLe;on.cssFilter=zhe;on.getDefaultCSSWhiteList=KAe;var oN={},Py=sq;function mLe(t){var e=Py.spaceIndex(t),i;return e===-1?i=t.slice(1,-1):i=t.slice(1,e+1),i=Py.trim(i).toLowerCase(),i.slice(0,1)==="/"&&(i=i.slice(1)),i.slice(-1)==="/"&&(i=i.slice(0,-1)),i}function yLe(t){return t.slice(0,2)==="</"}function gLe(t,e,i){var r="",n=0,s=!1,o=!1,a=0,l=t.length,c="",d="";e:for(a=0;a<l;a++){var f=t.charAt(a);if(s===!1){if(f==="<"){s=a;continue}}else if(o===!1){if(f==="<"){r+=i(t.slice(n,a)),s=a,n=a;continue}if(f===">"){r+=i(t.slice(n,s)),d=t.slice(s,a+1),c=mLe(d),r+=e(s,r.length,c,d,yLe(d)),n=a+1,s=!1;continue}if(f==='"'||f==="'")for(var y=1,g=t.charAt(a-y);g.trim()===""||g==="=";){if(g==="="){o=f;continue e}g=t.charAt(a-++y)}}else if(f===o){o=!1;continue}}return n<t.length&&(r+=i(t.substr(n))),r}var vLe=/[^a-zA-Z0-9\\_:.-]/gim;function bLe(t,e){var i=0,r=0,n=[],s=!1,o=t.length;function a(y,g){if(y=Py.trim(y),y=y.replace(vLe,"").toLowerCase(),!(y.length<1)){var b=e(y,g||"");b&&n.push(b)}}for(var l=0;l<o;l++){var c=t.charAt(l),d,f;if(s===!1&&c==="="){s=t.slice(i,l),i=l+1,r=t.charAt(i)==='"'||t.charAt(i)==="'"?i:_Le(t,l+1);continue}if(s!==!1&&l===r){if(f=t.indexOf(c,l+1),f===-1)break;d=Py.trim(t.slice(r+1,f)),a(s,d),s=!1,l=f,i=l+1;continue}if(/\s|\n|\t/.test(c))if(t=t.replace(/\s|\n|\t/g," "),s===!1)if(f=wLe(t,l),f===-1){d=Py.trim(t.slice(i,l)),a(d),s=!1,i=l+1;continue}else{l=f-1;continue}else if(f=xLe(t,l-1),f===-1){d=Py.trim(t.slice(i,l)),d=yK(d),a(s,d),s=!1,i=l+1;continue}else continue}return i<t.length&&(s===!1?a(t.slice(i)):a(s,yK(Py.trim(t.slice(i))))),Py.trim(n.join(" "))}function wLe(t,e){for(;e<t.length;e++){var i=t[e];if(i!==" ")return i==="="?e:-1}}function _Le(t,e){for(;e<t.length;e++){var i=t[e];if(i!==" ")return i==="'"||i==='"'?e:-1}}function xLe(t,e){for(;e>0;e--){var i=t[e];if(i!==" ")return i==="="?e:-1}}function SLe(t){return t[0]==='"'&&t[t.length-1]==='"'||t[0]==="'"&&t[t.length-1]==="'"}function yK(t){return SLe(t)?t.substr(1,t.length-2):t}oN.parseTag=gLe;oN.parseAttr=bLe;var $Le=nq.FilterCSS,Iu=on,Zhe=oN,TLe=Zhe.parseTag,ELe=Zhe.parseAttr,aL=sq;function gP(t){return t==null}function ILe(t){var e=aL.spaceIndex(t);if(e===-1)return{html:"",closing:t[t.length-2]==="/"};t=aL.trim(t.slice(e+1,-1));var i=t[t.length-1]==="/";return i&&(t=aL.trim(t.slice(0,-1))),{html:t,closing:i}}function CLe(t){var e={};for(var i in t)e[i]=t[i];return e}function MLe(t){var e={};for(var i in t)Array.isArray(t[i])?e[i.toLowerCase()]=t[i].map(function(r){return r.toLowerCase()}):e[i.toLowerCase()]=t[i];return e}function Jhe(t){t=CLe(t||{}),t.stripIgnoreTag&&(t.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),t.onIgnoreTag=Iu.onIgnoreTagStripAll),t.whiteList||t.allowList?t.whiteList=MLe(t.whiteList||t.allowList):t.whiteList=Iu.whiteList,t.onTag=t.onTag||Iu.onTag,t.onTagAttr=t.onTagAttr||Iu.onTagAttr,t.onIgnoreTag=t.onIgnoreTag||Iu.onIgnoreTag,t.onIgnoreTagAttr=t.onIgnoreTagAttr||Iu.onIgnoreTagAttr,t.safeAttrValue=t.safeAttrValue||Iu.safeAttrValue,t.escapeHtml=t.escapeHtml||Iu.escapeHtml,this.options=t,t.css===!1?this.cssFilter=!1:(t.css=t.css||{},this.cssFilter=new $Le(t.css))}Jhe.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,i=e.options,r=i.whiteList,n=i.onTag,s=i.onIgnoreTag,o=i.onTagAttr,a=i.onIgnoreTagAttr,l=i.safeAttrValue,c=i.escapeHtml,d=e.cssFilter;i.stripBlankChar&&(t=Iu.stripBlankChar(t)),i.allowCommentTag||(t=Iu.stripCommentTag(t));var f=!1;i.stripIgnoreTagBody&&(f=Iu.StripTagBody(i.stripIgnoreTagBody,s),s=f.onIgnoreTag);var y=TLe(t,function(g,b,_,x,E){var C={sourcePosition:g,position:b,isClosing:E,isWhite:Object.prototype.hasOwnProperty.call(r,_)},k=n(_,x,C);if(!gP(k))return k;if(C.isWhite){if(C.isClosing)return"</"+_+">";var O=ILe(x),D=r[_],B=ELe(O.html,function(j,Z){var X=aL.indexOf(D,j)!==-1,ee=o(_,j,Z,X);return gP(ee)?X?(Z=l(_,j,Z,d),Z?j+'="'+Z+'"':j):(ee=a(_,j,Z,X),gP(ee)?void 0:ee):ee});return x="<"+_,B&&(x+=" "+B),O.closing&&(x+=" /"),x+=">",x}else return k=s(_,x,C),gP(k)?c(x):k},c);return f&&(y=f.remove(y)),y};var kLe=Jhe;(function(t,e){var i=on,r=oN,n=kLe;function s(a,l){var c=new n(l);return c.process(a)}e=t.exports=s,e.filterXSS=s,e.FilterXSS=n,(function(){for(var a in i)e[a]=i[a];for(var l in r)e[l]=r[l]})();function o(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}o()&&(self.filterXSS=t.exports)})(oU,oU.exports);var f_=oU.exports,PLe=function(t){if(typeof t!="object"||t===null||Object.prototype.toString.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},ALe=(function(){function t(e,i){var r=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],article:["style"],aside:["style"],audio:["autoplay","controls","loop","muted","preload"],b:[],blockquote:["style"],br:[],code:["style"],dd:["style"],del:["style"],details:["open","style"],div:["align","aria-hidden","aria-label","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],footer:["style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],header:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],main:["style"],mark:["style"],nav:["style"],ol:[],p:["style"],pre:["style"],section:["style"],source:["media","src","type"],span:["aria-hidden","aria-label","style"],strong:[],sub:["style"],summary:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],time:["style"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.arcgisCSSWhiteList=lO(lO({},f_.getDefaultCSSWhiteList()),{"align-items":!0,"align-self":!0,flex:!0,"flex-basis":!0,"flex-direction":!0,"flex-flow":!0,"flex-grow":!0,"flex-shrink":!0,"flex-wrap":!0,float:!0,gap:!0,grid:!0,"grid-area":!0,"grid-auto-columns":!0,"grid-auto-flow":!0,"grid-auto-rows":!0,"grid-column":!0,"grid-column-end":!0,"grid-column-start":!0,"grid-row":!0,"grid-row-end":!0,"grid-row-start":!0,"grid-template":!0,"grid-template-areas":!0,"grid-template-columns":!0,"grid-template-rows":!0,"justify-content":!0,"justify-items":!0,"justify-self":!0,"line-height":!0,overflow:!0}),this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(s,o,a,l){return s==="a"&&o==="href"||(s==="img"||s==="source")&&o==="src"?r.sanitizeUrl(a):f_.safeAttrValue(s,o,a,l)}},this._entityMap={"&":"&#x38;","<":"&#x3C;",">":"&#x3E;",'"':"&#x22;","'":"&#x27;","/":"&#x2F;"};var n;e&&!i?n=e:e&&i?(n=Object.create(this.arcgisFilterOptions),n.css={whiteList:this.arcgisCSSWhiteList},Object.keys(e).forEach(function(s){if(s==="whiteList")n.whiteList=r._extendObjectOfArrays([r.arcgisWhiteList,e.whiteList||{}]);else if(s==="css"){var o=e.css.whiteList;o!=null&&e.css instanceof Object&&Object.keys(o).forEach(function(a){return n.css.whiteList[a]=o[a]})}else n[s]=e[s]})):(n=Object.create(this.arcgisFilterOptions),n.whiteList=this.arcgisWhiteList,n.css={whiteList:this.arcgisCSSWhiteList}),this.xssFilterOptions=n,this._xssFilter=new f_.FilterXSS(n)}return t.prototype.sanitize=function(e,i){switch(i===void 0&&(i={}),typeof e){case"number":return isNaN(e)||!isFinite(e)?null:e;case"boolean":return e;case"string":return this._xssFilter.process(e);case"object":return this._iterateOverObject(e,i);default:return i.allowUndefined&&typeof e>"u"?void 0:null}},t.prototype.sanitizeUrl=function(e,i){var r=(i??{}).isProtocolRequired,n=r===void 0?!0:r,s=this._trim(e.substring(0,e.indexOf(":"))),o=e==="/",a=/^#/.test(e),l=s&&this.allowedProtocols.indexOf(s.toLowerCase())>-1;return o||a||l?f_.escapeAttrValue(e):!s&&!n?f_.escapeAttrValue("https://".concat(e)):""},t.prototype.sanitizeHTMLAttribute=function(e,i,r,n){return typeof this.xssFilterOptions.safeAttrValue=="function"?this.xssFilterOptions.safeAttrValue(e,i,r,n):f_.safeAttrValue(e,i,r,n)},t.prototype.validate=function(e,i){i===void 0&&(i={});var r=this.sanitize(e,i);return{isValid:e===r,sanitized:r}},t.prototype.encodeHTML=function(e){var i=this;return String(e).replace(/[&<>"'\/]/g,function(r){return i._entityMap[r]})},t.prototype.encodeAttrValue=function(e){var i=/^[a-zA-Z0-9]$/;return String(e).replace(/[\x00-\xFF]/g,function(r,n){return i.test(r)?r:"&#x".concat(Number(e.charCodeAt(n)).toString(16),";")})},t.prototype._extendObjectOfArrays=function(e){var i={};return e.forEach(function(r){Object.keys(r).forEach(function(n){Array.isArray(r[n])&&Array.isArray(i[n])?i[n]=i[n].concat(r[n]):i[n]=r[n]})}),i},t.prototype._iterateOverObject=function(e,i){var r=this;i===void 0&&(i={});try{var n=!1,s=void 0;if(Array.isArray(e))s=e.reduce(function(a,l){var c=r.validate(l,i);return c.isValid?a.concat([l]):(n=!0,a.concat([c.sanitized]))},[]);else if(PLe(e)){var o=Object.keys(e);s=o.reduce(function(a,l){var c=e[l],d=r.validate(c,i);return d.isValid?a[l]=c:(n=!0,a[l]=d.sanitized),a},{})}else return i.allowUndefined&&typeof e>"u"?void 0:null;return n?s:e}catch{return null}},t.prototype._trim=function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},t})();const LLe=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"],RLe=LLe.reduce(((t,e)=>(t[e]=[],t)),{}),OLe=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],oq=new ALe({whiteList:RLe,onTagAttr:(t,e,i)=>{const r=`${e}="${i}"`;if(OLe.includes(e))return r},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0),Yhe="http://www.w3.org/",aN=`${Yhe}2000/svg`,Xhe=`${Yhe}1999/xlink`;let gK=[],aq=(t,e)=>{let i={};return Object.keys(t).forEach((r=>{i[r]=t[r]})),e&&Object.keys(e).forEach((r=>{i[r]=e[r]})),i},lq=(t,e)=>t.vnodeSelector===e.vnodeSelector&&(t.properties&&e.properties?t.properties.key===e.properties.key&&t.properties.bind===e.properties.bind:!t.properties&&!e.properties),Khe=t=>{if(typeof t!="string")throw new Error("Style values must be strings")},FLe=(t,e,i)=>{if(e.vnodeSelector!==""){for(let r=i;r<t.length;r++)if(lq(t[r],e))return r}return-1},Rz=(t,e,i,r)=>{let n=t[e];if(n.vnodeSelector==="")return;let s=n.properties;if(!(s&&(s.key===void 0?s.bind:s.key))){for(let o=0;o<t.length;o++)if(o!==e){let a=t[o];if(lq(a,n))throw new Error(`${i.vnodeSelector} had a ${n.vnodeSelector} child ${r==="added"?r:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},NLe=t=>{if(t.properties){let e=t.properties.enterAnimation;e&&e(t.domNode,t.properties)}},lU=[],cU=!1,Qhe=t=>{(t.children||[]).forEach(Qhe),t.properties&&t.properties.afterRemoved&&t.properties.afterRemoved.apply(t.properties.bind||t.properties,[t.domNode])},vK=()=>{cU=!1,lU.forEach(Qhe),lU.length=0},bK=t=>{lU.push(t),cU||(cU=!0,typeof window<"u"&&"requestIdleCallback"in window?window.requestIdleCallback(vK,{timeout:16}):setTimeout(vK,16))},wK=t=>{let e=t.domNode;if(t.properties){let i=t.properties.exitAnimation;if(i)return e.style.pointerEvents="none",void i(e,()=>{e.parentNode&&(e.parentNode.removeChild(e),bK(t))},t.properties)}e.parentNode&&(e.parentNode.removeChild(e),bK(t))},DLe=(t,e,i)=>{if(!e)return;let r=i.eventHandlerInterceptor,n=Object.keys(e),s=n.length;for(let o=0;o<s;o++){let a=n[o],l=e[a];if(a==="className")throw new Error('Property "className" is not supported, use "class".');if(a==="class")dU(t,l,!0);else if(a==="classes"){let c=Object.keys(l),d=c.length;for(let f=0;f<d;f++){let y=c[f];l[y]&&t.classList.add(y)}}else if(a==="styles"){let c=Object.keys(l),d=c.length;for(let f=0;f<d;f++){let y=c[f],g=l[y];g&&(Khe(g),i.styleApplyer(t,y,g))}}else if(a!=="key"&&l!=null){let c=typeof l;c==="function"?(a.lastIndexOf("on",0)===0&&(r&&(l=r(a,l,t,e)),a==="oninput"&&(function(){let d=l;l=function(f){d.apply(this,[f]),f.target["oninput-value"]=f.target.value}})()),t[a]=l):i.namespace===aN?a==="href"?t.setAttributeNS(Xhe,a,l):t.setAttribute(a,l):c==="string"&&a!=="value"?a==="innerHTML"?t[a]=oq.sanitize(l):uU(t)&&a in t?t[a]=l:t.setAttribute(a,l):t[a]=l}}};function uU(t){if(!(t instanceof Element&&t.tagName.includes("-")))return!1;const e=window.customElements.get(t.tagName.toLowerCase());return!!e&&t instanceof e}let uO,zLe=(t,e,i)=>{if(e)for(let r of e)tC(r,t,void 0,i)},epe=(t,e,i)=>{zLe(t,e.children,i),e.text&&(t.textContent=e.text),DLe(t,e.properties,i),e.properties&&e.properties.afterCreate&&e.properties.afterCreate.apply(e.properties.bind||e.properties,[t,i,e.vnodeSelector,e.properties,e.children])},tC=(t,e,i,r)=>{let n,s=0,o=t.vnodeSelector,a=e.ownerDocument;if(o==="")n=t.domNode=a.createTextNode(t.text),i!==void 0?e.insertBefore(n,i):e.appendChild(n);else{for(let l=0;l<=o.length;++l){let c=o.charAt(l);if(l===o.length||c==="."||c==="#"){let d=o.charAt(s-1),f=o.slice(s,l);d==="."?n.classList.add(f):d==="#"?n.id=f:(f==="svg"&&(r=aq(r,{namespace:aN})),r.namespace!==void 0?n=t.domNode=a.createElementNS(r.namespace,f):(n=t.domNode=t.domNode||a.createElement(f),f==="input"&&t.properties&&t.properties.type!==void 0&&n.setAttribute("type",t.properties.type)),i!==void 0?e.insertBefore(n,i):n.parentNode!==e&&e.appendChild(n)),s=l+1}}epe(n,t,r)}},dU=(t,e,i)=>{e&&e.split(" ").forEach((r=>{r&&t.classList.toggle(r,i)}))},VLe=(t,e,i,r)=>{if(!i)return;let n=!1,s=Object.keys(i),o=s.length;for(let a=0;a<o;a++){let l=s[a],c=i[l],d=e[l];if(l==="class")d!==c&&(dU(t,d,!1),dU(t,c,!0));else if(l==="classes"){let f=t.classList,y=Object.keys(c),g=y.length;for(let b=0;b<g;b++){let _=y[b],x=!!c[_];x!==!!d[_]&&(n=!0,x?f.add(_):f.remove(_))}}else if(l==="styles"){let f=Object.keys(c),y=f.length;for(let g=0;g<y;g++){let b=f[g],_=c[b];_!==d[b]&&(n=!0,_?(Khe(_),r.styleApplyer(t,b,_)):r.styleApplyer(t,b,""))}}else if(c||typeof d!="string"||(c=""),l!=="value"||uU(t)){if(c!==d){let f=typeof c;f==="function"&&r.eventHandlerInterceptor||(r.namespace===aN?l==="href"?t.setAttributeNS(Xhe,l,c):t.setAttribute(l,c):f==="string"?l==="innerHTML"?t[l]=oq.sanitize(c):l==="role"&&c===""?t.removeAttribute(l):uU(t)&&l in t?t[l]=c:t.setAttribute(l,c):t[l]!==c&&(t[l]=c),n=!0)}}else{let f=t[l];f!==c&&(t["oninput-value"]?f===t["oninput-value"]:c!==d)&&(t[l]=c,t["oninput-value"]=void 0),c!==d&&(n=!0)}}return n},jLe=(t,e,i,r,n)=>{if(i===r)return!1;r=r||gK;let s,o=(i=i||gK).length,a=r.length,l=0,c=0,d=!1;for(;c<a;){let f=l<o?i[l]:void 0,y=r[c];if(f!==void 0&&lq(f,y))d=uO(f,y,n)||d,l++;else{let g=FLe(i,y,l+1);if(g>=0){for(s=l;s<g;s++)wK(i[s]),Rz(i,s,t,"removed");d=uO(i[g],y,n)||d,l=g+1}else tC(y,e,l<o?i[l].domNode:void 0,n),NLe(y),Rz(r,c,t,"added")}c++}if(o>l)for(s=l;s<o;s++)wK(i[s]),Rz(i,s,t,"removed");return d};uO=(t,e,i)=>{let r=t.domNode,n=!1;if(t===e)return!1;let s=!1;if(e.vnodeSelector===""){if(e.text!==t.text){let o=r.ownerDocument.createTextNode(e.text);return r.parentNode.replaceChild(o,r),e.domNode=o,n=!0,n}e.domNode=r}else e.vnodeSelector.lastIndexOf("svg",0)===0&&(i=aq(i,{namespace:aN})),t.text!==e.text&&(s=!0,e.text===void 0?r.removeChild(r.firstChild):r.textContent=e.text),e.domNode=r,s=jLe(e,r,t.children,e.children,i)||s,s=VLe(r,t.properties,e.properties,i)||s,e.properties&&e.properties.afterUpdate&&e.properties.afterUpdate.apply(e.properties.bind||e.properties,[r,i,e.vnodeSelector,e.properties,e.children]);return s&&e.properties&&e.properties.updateAnimation&&e.properties.updateAnimation(r,e.properties,t.properties),n};let vP=(t,e)=>({getLastRender:()=>t,update:i=>{if(t.vnodeSelector!==i.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let r=t;t=i,uO(r,i,e)},domNode:t.domNode});const ULe={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(t,e,i)=>{e.charAt(0)==="-"?t.style.setProperty(e,i):t.style[e]=i}};let DE=t=>aq(ULe,t),sg={append:(t,e,i)=>(i=DE(i),tC(e,t,void 0,i),vP(e,i)),insertBefore:(t,e,i)=>(i=DE(i),tC(e,t.parentNode,t,i),vP(e,i)),merge:(t,e,i)=>(i=DE(i),e.domNode=t,epe(t,e,i),vP(e,i)),replace:(t,e,i)=>(i=DE(i),tC(e,t.parentNode,t,i),t.parentNode.removeChild(t),vP(e,i))},tpe,BLe=(t,e)=>{let i=[];for(;t&&t!==e;)i.push(t),t=t.parentNode;return i};tpe=Array.prototype.find?(t,e)=>t.find(e):(t,e)=>t.filter(e)[0];let GLe=(t,e)=>{let i=t;return e.forEach((r=>{i=i&&i.children?tpe(i.children,(n=>n.domNode===r)):void 0})),i},qLe=(t,e,i)=>{let r=function(n){i("domEvent",n);let s=e(),o=BLe(n.currentTarget,s.domNode);o.reverse();let a,l=GLe(s.getLastRender(),o);return t.scheduleRender(),l&&(a=l.properties[`on${n.type}`].apply(l.properties.bind||this,arguments)),i("domEventProcessed",n),a};return(n,s,o,a)=>r},dO=t=>{let e,i,r=DE(t),n=r.performanceLogger,s=!0,o=!1,a=[],l=[],c=(f,y,g)=>{let b,_=()=>b;r.eventHandlerInterceptor=qLe(e,_,n),b=f(y,g(),r),a.push(b),l.push(g)},d=()=>{if(i=void 0,s){s=!1,n("renderStart",void 0);for(let f=0;f<a.length;f++){let y=l[f]();n("rendered",void 0),a[f].update(y),n("patched",void 0)}n("renderDone",void 0),s=!0}};return e={renderNow:d,scheduleRender:()=>{i||o||(i=requestAnimationFrame(d))},stop:()=>{i&&(cancelAnimationFrame(i),i=void 0),o=!0},resume:()=>{o=!1,s=!0,e.scheduleRender()},append:(f,y)=>{c(sg.append,f,y)},insertBefore:(f,y)=>{c(sg.insertBefore,f,y)},merge:(f,y)=>{c(sg.merge,f,y)},replace:(f,y)=>{c(sg.replace,f,y)},detach:f=>{for(let y=0;y<l.length;y++)if(l[y]===f)return l.splice(y,1),a.splice(y,1)[0];throw new Error("renderFunction was not found")}},e},cy=class extends tt{constructor(){super(...arguments),this.items=new Ze,this._watchUpdatingTracking=new Rb,this._callbacks=new Map,this._projector=dO(),this._hiddenProjector=dO()}get needsRender(){return this.items.length>0}get updating(){var e;return((e=this._watchUpdatingTracking)==null?void 0:e.updating)??!1}initialize(){const e=document.createElement("div");e.className="esri-overlay-surface",this._set("surface",e),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),e.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange((()=>this.items),(i=>{for(const r of i.added){const n=()=>r.render();this._callbacks.set(r,n),this._projector.append(this.surface,n)}for(const r of i.removed){const n=this._projector.detach(this._callbacks.get(r));this.surface.removeChild(n.domNode),this._callbacks.delete(r)}}))}addItem(e){this.items.add(e)}removeItem(e){this.items.remove(e)}destroy(){this.items.removeAll(),this._callbacks.forEach((e=>this._projector.detach(e))),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(e){const i=this._hiddenSurface,r=this._hiddenProjector;let n;const s=()=>(n=e.render(),n);r.append(i,s),r.renderNow();const o={left:0,top:0,right:0,bottom:0};if(n!=null&&n.domNode){const a=n.domNode.getBoundingClientRect();o.left=a.left,o.top=a.top,o.right=a.right,o.bottom=a.bottom}for(r.detach(s);i.firstChild;)i.removeChild(i.firstChild);return o}overlaps(e,i){const r=this.computeBoundingRect(e),n=this.computeBoundingRect(i);return Math.max(r.left,n.left)<=Math.min(r.right,n.right)&&Math.max(r.top,n.top)<=Math.min(r.bottom,n.bottom)}get hasVisibleItems(){return this.items.some((e=>e.visible))}async prepare(){await document.fonts.load(this._fontString()).catch((()=>{}))}renderCanvas(e,i){const r=!!(i!=null&&i.disableDecorations);if(!this.items.some((s=>s.visible&&!(r&&s.isDecoration))))return;const n=e.getContext("2d");n.save(),n.font=this._fontString(),this.items.forEach((s=>{r&&s.isDecoration||(n.save(),s.renderCanvas(n),n.restore())})),n.restore()}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};u([h({readOnly:!0})],cy.prototype,"surface",void 0),u([h({readOnly:!0})],cy.prototype,"items",void 0),u([h({readOnly:!0})],cy.prototype,"needsRender",null),u([h({readOnly:!0})],cy.prototype,"_watchUpdatingTracking",void 0),u([h({readOnly:!0})],cy.prototype,"updating",null),cy=u([V("esri.views.overlay.ViewOverlay")],cy);const _K=cy,Oz=[0,0];function HLe(t){const e=(t.ownerDocument||window.document).defaultView,i=t.getBoundingClientRect();return Oz[0]=i.left+((e==null?void 0:e.pageXOffset)??0),Oz[1]=i.top+((e==null?void 0:e.pageYOffset)??0),Oz}function xK(t){t&&(t.textContent="",t.parentNode&&t.parentNode.removeChild(t))}function WLe(t){const e=document.createElement("div");return t.appendChild(e),e}const m_=16,JT=750,ZLe=512,JLe=2,YLe=t=>{let e=class extends t{constructor(...i){super(...i),this._freqInfo={freq:m_,time:JT},this._overlayRenderTaskHandle=null,this.height=0,this.messagesCommon=null,this.overlay=null,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.addHandles([$e((()=>this.cursor),(r=>{const{surface:n}=this;n&&n.setAttribute("data-cursor",r)})),$e((()=>this.navigating),(r=>{const{surface:n}=this;n&&n.setAttribute("data-navigating",r.toString())}))])}initialize(){this.addHandles([$e((()=>this.ui),((i,r)=>this._handleUIChange(i,r)),kt),this.on("focus",(()=>this.notifyChange("focused"))),this.on("blur",(()=>this.notifyChange("focused")))])}destroy(){var i;this.destroyed||((i=this.ui)==null||i.destroy(),this.container=null)}get container(){return this._get("container")??null}set container(i){const r=this._get("container"),n=rq(i);if(n||typeof i!="string"||Ie.getLogger(this).error("#container",`element with id '${i}' not found`),r===n)return;if(this._stopMeasuring(),r&&(r.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(xK(this.root),this._set("root",null)),this.userContent&&(hK(this.userContent,r),xK(this.userContent),this._set("userContent",null))),!n)return this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),void this._set("container",null);n.classList.add("esri-view");const s=document.createElement("div");s.className="esri-view-user-storage",hK(n,s),n.appendChild(s),this._set("userContent",s);const o=document.createElement("div");o.className="esri-view-root",n.insertBefore(o,n.firstChild),this._set("root",o);const a=document.createElement("div");a.className="esri-view-surface",a.setAttribute("role","application"),a.tabIndex=0,o.appendChild(a),this._set("surface",a);const l=new _K;o.appendChild(l.surface),this._set("overlay",l),this.addHandles($e((()=>l.needsRender),(c=>{c&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=HS({render:()=>{var d;return(d=this.overlay)==null?void 0:d.render()}}):this._overlayRenderTaskHandle=Nr(this._overlayRenderTaskHandle)}))),this.forceDOMReadyCycle(),this._set("container",n),this._startMeasuring()}get focused(){const i=document.activeElement===this.surface;return document.hasFocus()&&i}get size(){return[this.width,this.height]}set ui(i){const r=this._get("ui");r!==i&&(r==null||r.destroy()),this._set("ui",i)}blur(){var i;(i=this.surface)==null||i.blur()}focus(){var i;(i=this.surface)==null||i.focus()}pageToContainer(i,r,n){const s=this.position;return i-=s?s[0]:0,r-=s?s[1]:0,n?(n[0]=i,n[1]=r):n=[i,r],n}containerToPage(i,r,n){const s=this.position;return i+=s?s[0]:0,r+=s?s[1]:0,n?(n[0]=i,n[1]=r):n=[i,r],n}_handleUIChange(i,r){this.removeHandles("ui"),r&&r!==i&&r.destroy(),i&&(i.view=this,this.addHandles($e((()=>this.root),(n=>{i.container=n?WLe(n):null}),kt),"ui")),this._set("ui",i)}_stopMeasuring(){this.removeHandles("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const i=this._freqInfo;i.freq=m_,i.time=JT;const r=HS({prepare:o=>{const a=this._measure(),l=this._freqInfo;if(l.time+=o.deltaTime,a&&(l.freq=m_,this._get("resizing")||this._set("resizing",!0)),l.time<l.freq)return;l.time=0;const c=this._position();l.freq=c||a?m_:Math.min(JT,l.freq*JLe),!a&&l.freq>=ZLe&&(r.pause(),this._get("resizing")&&this._set("resizing",!1))}}),n=new ResizeObserver((o=>{i.freq=m_,i.time=JT,r.resume()}));this.container!=null&&n.observe(this.container);const s=Ei((()=>n.disconnect()));this.addHandles([$$(window,"resize",(()=>{i.freq=m_,i.time=JT,r.resume()})),s,r],"measuring"),this._measure(),this._position()}_measure(){const i=this.container,r=i?i.clientWidth:0,n=i?i.clientHeight:0;if(r===0||n===0)return this.suspended||this._set("suspended",!0),!1;const s=this.width,o=this.height;return r===s&&n===o?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",r),this._set("height",n),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:s,oldHeight:o,width:r,height:n}),!0)}_position(){const i=this.container,r=this.position,n=i&&HLe(i);return!!n&&(!r||n[0]!==r[0]||n[1]!==r[1])&&(this._set("position",[n[0],n[1]]),!0)}forceDOMReadyCycle(){}};return u([h()],e.prototype,"container",null),u([h({readOnly:!0})],e.prototype,"focused",null),u([h({readOnly:!0})],e.prototype,"height",void 0),u([h()],e.prototype,"messagesCommon",void 0),u([h({type:_K})],e.prototype,"overlay",void 0),u([h({readOnly:!0})],e.prototype,"position",void 0),u([h({readOnly:!0})],e.prototype,"resizing",void 0),u([h({readOnly:!0})],e.prototype,"root",void 0),u([h({value:null,readOnly:!0})],e.prototype,"size",null),u([h({readOnly:!0})],e.prototype,"surface",void 0),u([h({readOnly:!0})],e.prototype,"suspended",void 0),u([h({nonNullable:!0})],e.prototype,"ui",null),u([h({readOnly:!0})],e.prototype,"userContent",void 0),u([h({readOnly:!0})],e.prototype,"width",void 0),u([h()],e.prototype,"widthBreakpoint",void 0),e=u([V("esri.views.DOMContainer")],e),e};function XLe(t,e,i){return im(t.map(((r,n)=>e.apply(i,[r,n]))))}async function KLe(t,e,i){return(await im(t.map(((r,n)=>e.apply(i,[r,n]))))).map((r=>r.value))}function cq(t){return{ok:!0,value:t}}function uq(t){return{ok:!1,error:t}}function QLe(t){return t!=null&&t.ok===!0?t.value:null}function eRe(t){return t!=null&&t.ok===!1?t.error:null}async function lN(t){if(t==null)return{ok:!1,error:new Error("no promise provided")};try{return cq(await t)}catch(e){return uq(e)}}async function tRe(t){try{return cq(await t)}catch(e){return dh(e),uq(e)}}function Fg(t,e){return new uy(t,e)}let uy=class extends tt{get value(){return QLe(this._result)}get error(){return eRe(this._result)}get finished(){return this._result!=null}constructor(e,i){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=Eo(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:r}=this._abortController;this.promise=e(r),this.promise.then((n=>{this._result=cq(n),this._cleanup()}),(n=>{this._result=uq(n),this._cleanup()})),this._abortHandle=ed(i,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=Nr(this._abortHandle),this._abortController=null}};u([h()],uy.prototype,"value",null),u([h()],uy.prototype,"error",null),u([h()],uy.prototype,"finished",null),u([h()],uy.prototype,"promise",void 0),u([h()],uy.prototype,"_result",void 0),uy=u([V("esri.core.asyncUtils.ReactiveTask")],uy);const ipe=fe("mac")?"Meta":"Control",iRe=new Set(["Alt","Control","Meta","Shift","Ctrl","Primary"]),rRe=t=>iRe.has(t);let nRe=class{constructor(e,i=[]){this.eventType=e,this.keyModifiers=i}matches(e){if(e.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const i=e.modifiers;for(const r of this.keyModifiers)if(!i.has(r))return!1;return!0}},fs=class{constructor(e){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=e}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const e in this._incoming){const i=this._incoming[e];for(const r of i)this._incomingEventMatches.push(r.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map((e=>e.eventType))),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(e){this._manager||(e.setEventCallback((i=>this._handleEvent(i))),e.setUninstallCallback((()=>this._onUninstall())),this._manager=e)}onUninstall(){}registerIncoming(e,i,r){let n;typeof i=="function"?(r=i,n=[]):n=i||[];const s=typeof e=="string"?new nRe(e,n):e,o=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},a=d=>{const f=this._incoming[d.match.eventType];if(f){const y=f.indexOf(d);f.splice(y,1),o(),this._manager&&this._manager.updateDependencies()}},l=new sRe(s,r,{onPause:a,onRemove:a,onResume:d=>{const f=this._incoming[d.match.eventType];f&&!f.includes(d)&&(f.push(d),o(),this._manager&&this._manager.updateDependencies())}});let c=this._incoming[s.eventType];return c||(c=[],this._incoming[s.eventType]=c),c.push(l),o(),this._manager&&this._manager.updateDependencies(),l}registerOutgoing(e){if(this._outgoing[e])throw new Error("There is already a callback registered for this outgoing InputEvent: "+e);const i=new oRe(e,{onEmit:(r,n,s,o)=>{var a;(a=this._manager)==null||a.emit(r.eventType,n,s,o)},onRemove:r=>{var n;delete this._outgoing[r.eventType],(n=this._manager)==null||n.updateDependencies()}});return this._outgoing[e]=i,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),i}startCapturingPointer(e){var i;(i=this._manager)==null||i.setPointerCapture(e,!0)}stopCapturingPointer(e){var i;(i=this._manager)==null||i.setPointerCapture(e,!1)}refreshHasPendingInputs(){var e;(e=this._manager)==null||e.refreshHasPendingInputs()}_onUninstall(){this._manager&&(this.onUninstall(),this._manager=null)}_handleEvent(e){var r;const i=this._incoming[e.type];if(i){for(const n of i)if(n.match.matches(e)&&((r=n.callback)==null||r.call(n,e),e.shouldStopPropagation()))break}}},sRe=class{constructor(e,i,r){this.match=e,this._callback=i,this._handler=r}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}},oRe=class{constructor(e,i){this.eventType=e,this._removed=!1,this._handler=i}emit(e,i,r){this._removed||this._handler.onEmit(this,e,i,r)}remove(){this._removed=!0,this._handler.onRemove(this)}},aRe=class extends fs{constructor(e){super(!0),this._onChange=e,this._value="mouse",this._x=null,this._y=null,this.registerIncoming("pointer-move",(i=>this._update(i.data)))}_update(e){const i=e.native.pointerType==="touch"?"touch":"mouse",{x:r,y:n}=e;i===this._value&&this._x===r&&this._y===n||(this._value=i,this._x=r,this._y=n,this._onChange(i,r,n))}},lRe=class extends fs{get multiTouchActive(){return this._multiTouchActive.value}constructor(){super(!0),this._activeTouchPointerIds=new Set,this._multiTouchActive=Kb(!1),this._onPointerAdd=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.add(e.native.pointerId),this._update())},this._onPointerRemove=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.delete(e.native.pointerId),this._update())},this.registerIncoming("pointer-down",this._onPointerAdd),this.registerIncoming("pointer-up",this._onPointerRemove),this.registerIncoming("pointer-capture-lost",this._onPointerRemove),this.registerIncoming("pointer-cancel",this._onPointerRemove)}_update(){this._multiTouchActive.value=this._activeTouchPointerIds.size>1}},cRe=class{constructor(e,i){this._owner=i,this._properties={},this._afterDispatchHandle=null;for(const r in e){const n=e[r],s=new $le(n,void 0,void 0,2,2);this._properties[r]={pool:s,acquired:[]}}this._afterDispatchHandle=ITe((()=>this._release()))}destroy(){this._afterDispatchHandle&&(this._afterDispatchHandle.remove(),this._afterDispatchHandle=null);for(const e in this._properties){const i=this._properties[e];for(const r of i.acquired)wY(r)||i.pool.release(r);i.pool.destroy(),i.pool=null,i.acquired=null}this._properties=null,this._owner=null}get(e){const i=this._owner._get(e),r=this._properties[e];let n=r.pool.acquire();for(r.acquired.push(n);n===i;)r.acquired.push(n),n=r.pool.acquire();return n}_release(){for(const e in this._properties){const i=this._properties[e];let r=0;for(const n of i.acquired)wY(n)?i.acquired[r++]=n:i.pool.release(n);i.acquired.length=r}}},rc=class extends tt{constructor(e){super(e),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._handlersPriority=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=ipe,this._latestPointerType="mouse",this._propertiesPool=new cRe({latestPointerLocation:hRe},this),this.latestPointerLocation=null,this._paused=!1,this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const e=Object.keys(this._nameToGroup);for(const i of e)this.uninstallHandlers(i);this.eventSource.destroy(),this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some((e=>e.handler.hasPendingInputs))}get latestPointerType(){return this._latestPointerType}get multiTouchActive(){return this._multiTouchHandler.multiTouchActive}get updating(){return this.hasPendingInputs||this._paused}installHandlers(e,i,r=Kf.INTERNAL){if(this._nameToGroup[e]||i.length===0)return;const n={name:e,handlers:i.map((s=>({handler:s,active:!0,removed:!1,priorityIndex:0,groupPriority:r,eventCallback:null,uninstallCallback:null})))};this._nameToGroup[e]=n;for(let s=n.handlers.length-1;s>=0;s--){const o=n.handlers[s];this._handlers.push(o),o.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(a,l,c,d,f)=>{this._emitInputEvent(o.priorityIndex+1,a,l,c,f,d)},setPointerCapture:(a,l)=>{this._setPointerCapture(n,o,a,l)},setEventCallback:a=>{o.eventCallback=a},setUninstallCallback:a=>{o.uninstallCallback=a},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(e){const i=this._nameToGroup[e];i?(i.handlers.forEach((r=>{var n;r.removed=!0,(n=r.uninstallCallback)==null||n.call(r)})),delete this._nameToGroup[e],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):Ie.getLogger(this).error("There is no InputHandler group registered under the name `"+e+"`")}hasHandlers(e){return this._nameToGroup[e]!==void 0}isModifierKeyDown(e){return this._activeKeyModifiers.has(e)}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const e=new Set,i=new Set;this._handlersPriority=[];for(let r=this._handlers.length-1;r>=0;r--){const n=this._handlers[r];n.priorityIndex=r,this._handlersPriority.push(n)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let r=this._handlersPriority.length-1;r>=0;r--){const n=this._handlersPriority[r];n.priorityIndex=r;let s=n.handler.hasSideEffects;if(!s){for(const o of n.handler.outgoingEventTypes)if(e.has(o)){s=!0;break}}if(s)for(const o of n.handler.incomingEventMatches){e.add(o.eventType);for(const a of o.keyModifiers)rRe(a)||i.add(a)}n.active=s}this._sourceEvents=e,this._keyModifiers=i,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(e,i,r){this._latestPointerType=e;const n=this._get("latestPointerLocation");if(n==null||n.x!==i||n.y!==r){const s=this._propertiesPool.get("latestPointerLocation");s.x=i,s.y=r,this._set("latestPointerLocation",s)}}_onEventReceived(e,i){if(e==="pointer-capture-lost"){const s=i;this._pointerCaptures.delete(s.native.pointerId)}this._updateKeyModifiers(e,i);const r=this.test.timestamp!=null?this.test.timestamp:i.native?i.native.timestamp:void 0,n=i.native?i.native.cancelable:void 0;this._emitInputEventFromSource(e,i,r,n)}_updateKeyModifiers(e,i){if(!i)return;let r=!1;const n=()=>{r||(this._activeKeyModifiers=new Set(this._activeKeyModifiers),r=!0)},s=(a,l)=>{l&&!this._activeKeyModifiers.has(a)?(n(),this._activeKeyModifiers.add(a)):!l&&this._activeKeyModifiers.has(a)&&(n(),this._activeKeyModifiers.delete(a))};if(e==="key-down"||e==="key-up"){const a=i.key;this._keyModifiers.has(a)&&s(a,e==="key-down")}const o=i.native;s("Alt",!!(o!=null&&o.altKey)),s("Control",!!(o!=null&&o.ctrlKey)),s("Ctrl",!!(o!=null&&o.ctrlKey)),s("Shift",!!(o!=null&&o.shiftKey)),s("Meta",!!(o!=null&&o.metaKey)),s("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new aRe(((e,i,r)=>this._setLatestPointer(e,i,r))),this._multiTouchHandler=new lRe,this.installHandlers("input-manager-logic",[this._latestPointerHandler,this._multiTouchHandler],Kf.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,Kf.INTERNAL)}_setPointerCapture(e,i,r,n){const s=e.name+"-"+i.priorityIndex,o=this._pointerCaptures.get(r.pointerId)||new Set;this._pointerCaptures.set(r.pointerId,o),n?(o.add(s),o.size===1&&this.eventSource&&this.eventSource.setPointerCapture(r,!0)):o.has(s)&&(o.delete(s),o.size===0&&(this._pointerCaptures.delete(r.pointerId),this.eventSource&&this.eventSource.setPointerCapture(r,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter((e=>!e.removed)),this.updateDependencies()}_emitInputEventFromSource(e,i,r,n){this._emitInputEvent(0,e,i,r,n)}_emitInputEvent(e,i,r,n,s,o){const a=n!==void 0?n:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),l=s!==void 0&&s,c={event:new uRe(i,r,a,o||this._activeKeyModifiers,l),priorityIndex:e};this._currentPropagation?this._currentPropagation.events.push(c):this._doNewPropagation(c)}_doNewPropagation(e){this._currentPropagation={events:new YC,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:e.event.timestamp},this._currentPropagation.events.push(e),this._continuePropagation()}_continuePropagation(){var i,r,n;this._paused=!1;const e=this._currentPropagation;if(e){for(;e.events.length>0;){const{event:s,priorityIndex:o}=e.events.pop(),a=(i=s.data)==null?void 0:i.eventId;if(!(a!=null&&this._stoppedPropagationEventIds.has(a)))for(e.currentHandler=this._handlersPriority[o];e.currentHandler;){if(e.currentHandler.removed)e.needsHandlerGarbageCollect=!0;else{if(e.currentHandler.active&&!s.shouldStopPropagation()&&((n=(r=e.currentHandler).eventCallback)==null||n.call(r,s)),s.shouldStopPropagation()){a!=null&&this._stoppedPropagationEventIds.add(a);break}if(s.shouldPausePropagation((()=>this._continuePropagation())))return void this._pausePropagation({event:s,priorityIndex:e.currentHandler.priorityIndex+1})}e.currentHandler=this._handlersPriority[e.currentHandler.priorityIndex+1]}}e.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}}_pausePropagation(e){const i=new YC;i.push(e);const r=this._currentPropagation;if(r){for(;r.events.length;)i.push(r.events.pop());r.events=i,r.currentHandler=null,this._paused=!0}}_compareHandlerPriority(e,i){if(e.handler.hasSideEffects!==i.handler.hasSideEffects)return e.handler.hasSideEffects?1:-1;if(e.groupPriority!==i.groupPriority)return e.groupPriority>i.groupPriority?-1:1;for(const r of e.handler.incomingEventMatches)for(const n of i.handler.incomingEventMatches){if(r.eventType!==n.eventType)continue;const s=r.keyModifiers.filter((o=>n.keyModifiers.includes(o)));if(s.length===r.keyModifiers.length!=(s.length===n.keyModifiers.length))return r.keyModifiers.length>n.keyModifiers.length?-1:1}return e.priorityIndex>i.priorityIndex?-1:1}_sortHandlersPriority(e){const i=[];for(const r of e){let n=0;for(;n<i.length&&this._compareHandlerPriority(r,i[n])>=0;)n++;i.splice(n,0,r)}return i}get debug(){const e=i=>{const r=this._setPointerCapture;this._setPointerCapture=()=>{},i(),this._setPointerCapture=r};return{injectEvent:(i,r)=>{e((()=>this._onEventReceived(i,r)))},disablePointerCapture:e}}};u([h({readOnly:!0})],rc.prototype,"hasPendingInputs",null),u([h({constructOnly:!0})],rc.prototype,"eventSource",void 0),u([h({constructOnly:!0})],rc.prototype,"recognizers",void 0),u([h()],rc.prototype,"_latestPointerType",void 0),u([h()],rc.prototype,"latestPointerType",null),u([h()],rc.prototype,"multiTouchActive",null),u([h({readOnly:!0})],rc.prototype,"latestPointerLocation",void 0),u([h()],rc.prototype,"_paused",void 0),u([h({readOnly:!0})],rc.prototype,"updating",null),rc=u([V("esri.views.input.InputManager")],rc);let uRe=class{constructor(e,i,r,n,s){this.type=e,this.data=i,this.timestamp=r,this.modifiers=n,this.cancelable=s,this._propagationState=Ay.NONE,this._resumeCallback=null}stopPropagation(){this._propagationState|=Ay.STOPPED}shouldStopPropagation(){return(this._propagationState&Ay.STOPPED)!==0}defer(e){this._propagationState|=Ay.PAUSED;const i=(r,n)=>{this._propagationState&=~Ay.PAUSED;const s=this._resumeCallback;if(this._resumeCallback=null,s&&s(),n)throw r;return r};return(typeof e=="function"?e():e).then((r=>i(r,!1)),(r=>i(r,!0)))}shouldPausePropagation(e){return!!(this._propagationState&Ay.PAUSED)&&(this._resumeCallback=e,!0)}preventDefault(){this.data.native.preventDefault()}};var Ay;(function(t){t[t.NONE=0]="NONE",t[t.STOPPED=1]="STOPPED",t[t.PAUSED=2]="PAUSED"})(Ay||(Ay={}));const Kf={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3};let dRe=class{};const hRe=dRe;function Qm(t){return t!=null&&"open"in t&&"declaredClass"in t}function SK(t){return t!=null&&"declaredClass"in t&&"dockOptions"in t}const pRe=t=>{let e=class extends t{constructor(){super(...arguments),this._popupSetupTask=null,this.popup={},this.popupEnabled=!0}initialize(){this.addHandles([$e((()=>[this.ui,this.popup]),(([i,r],n)=>{const s="popup",o="manual";if(n){const[a,l]=n;a&&Qm(l)&&(l.view=null,SK(l)&&(a.remove(l,s),l!==r&&r&&l.destroy()))}i&&Qm(r)&&(r.view=this,SK(r)&&i.add(r,{key:s,position:o,internal:!0}))}),ta),this.on("click",(i=>{this.popup&&this.popupEnabled&&(i.pointerType!=="mouse"||i.button===0)&&(Qm(this.popup)?this.popup.viewModel.handleViewClick(i):i.defer((async()=>{await this.setupPopup(),Qm(this.popup)&&!this.destroyed&&this.ready&&this.popupEnabled&&this.popup.viewModel.handleViewClick(i)})))}),Kf.WIDGET)]),E$((()=>this.ready&&this.popupEnabled&&!this.updating)).then((()=>{ye(()=>Promise.resolve().then(()=>Qne),void 0)}))}destroy(){this.destroyed||this.closePopup()}async openPopup(i){if(Qm(this.popup))return this.popup.open(i);try{if(await this.setupPopup(),!this.popup)return void Ie.getLogger(this).error(new ie("view:null-popup","Popup is null and can't be opened"));this.popup.open(i)}catch{}}closePopup(){var i;(i=this._popupSetupTask)==null||i.abort(),Qm(this.popup)&&this.popup.close()}async fetchPopupFeatures(i,r){return await this.when(),this._popupHitsToFeatures(await this._getPopupHits(i,r),r)}async setupPopup(){var i;if((i=this._popupSetupTask)==null||i.abort(),this.popup&&!Qm(this.popup))return this._popupSetupTask=Fg((async r=>{const{default:n}=await ye(()=>Promise.resolve().then(()=>Qne),void 0);if(Wi(r),!this.popup||Qm(this.popup))return;const s=this.popup;delete s.open,delete s.close,this.popup=new n(s)})),this._popupSetupTask.promise}async _popupHitsToFeatures({location:i,hits:r},n){const s=[],o=[];let a=!1;const l=iTe(n,fe("popup-view-fetch-timeout")??mRe),c=y=>{const g=new fRe(y);return o.push(g),s.push(g.promise),g},d=y=>{const g=o.at(-1);return g&&g.layerView===y&&!a?g:c(y)};for(const y of r)"graphic"in y?(d(y.layerView).graphics.push(y.graphic),a=!1):(s.push(y.layerView.fetchPopupFeaturesAtLocation(y.mapPoint,l)),a=!0);o.map((y=>y.resolve(l)));const f=tTe(s).then((y=>y.filter((g=>!!g)).flat()));return{pendingFeatures:s,allGraphicsPromise:f,location:i}}async _getPopupHits(i,r){const{hits:n,location:s}=await this.popupHitTest(i);Wi(r);const o=[];for(const a of n)if("graphic"in a){if(this._isValidPopupGraphic(a.graphic,r)){const l=this._isValidPopupGraphicsLayerView(a.layerView)?a.layerView:void 0;o.push({graphic:a.graphic,layerView:l})}}else this._isValidPopupLocationLayerView(a.layerView)&&o.push({mapPoint:a.mapPoint,layerView:a.layerView});return{hits:o,location:s}}_isValidPopupGraphic(i,r){return i&&!!i.getEffectivePopupTemplate(r==null?void 0:r.defaultPopupTemplateEnabled)}_isValidPopupGraphicsLayerView(i){return!i||(!("layer"in i)||!i.suspended)&&"fetchPopupFeaturesFromGraphics"in i}_isValidPopupLocationLayerView(i){return(!("layer"in i)||!i.suspended)&&"fetchPopupFeaturesAtLocation"in i}};return u([h()],e.prototype,"popup",void 0),u([h()],e.prototype,"popupEnabled",void 0),e=u([V("esri.views.PopupView")],e),e};let fRe=class{constructor(e){this.layerView=e,this._resolver=Nl(),this.graphics=[]}get promise(){return this._resolver.promise}resolve(e){const{layerView:i,graphics:r,_resolver:n}=this;if(!i)return n.resolve(r),n.promise;let s;return i.fetchPopupFeaturesFromGraphics(r,e).catch((o=>(s=o,null))).then((o=>{o?n.resolve(o):n.reject(s)})),n.promise}};const mRe=5e3;function nm(t,e,i=Ze){return e||(e=new i),e===t||(e.removeAll(),yRe(t)?e.addMany(t):t&&e.add(t)),e}function rpe(t){return t}function yRe(t){return t&&(Array.isArray(t)||"items"in t&&Array.isArray(t.items))}var Ly;(function(t){t[t.PENDING=0]="PENDING",t[t.RESOLVED=1]="RESOLVED",t[t.REJECTED=2]="REJECTED"})(Ly||(Ly={}));let gRe=class{constructor(){this._resolver=Nl(),this._status=Ly.PENDING,this._resolvingPromises=[],this._resolver.promise.then((()=>{this._status=Ly.RESOLVED,this._cleanUp()}),(()=>{this._status=Ly.REJECTED,this._cleanUp()})),this.promise=this._resolver.promise}destroy(){this._cleanUp()}addResolvingPromise(e){this._resolvingPromises.push(e),this._tryResolve()}isResolved(){return this._status===Ly.RESOLVED}isRejected(){return this._status===Ly.REJECTED}isFulfilled(){return this._status!==Ly.PENDING}abort(){this._resolver.reject(fr())}_cleanUp(){this._allPromise=null,this._resolvingPromises=null}_tryResolve(){if(this.isFulfilled())return;const e=Nl(),i=[...this._resolvingPromises,e.promise],r=this._allPromise=Promise.all(i);r.then((()=>{this.isFulfilled()||this._allPromise!==r||this._resolver.resolve()}),(n=>{this.isFulfilled()||this._allPromise!==r||Tn(n)||this._resolver.reject(n)})),e.resolve()}};const npe=t=>{let e=class extends t{constructor(...i){super(...i),this._promiseProps=new gRe,this.addResolvingPromise(Promise.resolve())}destroy(){this._promiseProps.destroy()}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(i,r){return this._promiseProps.promise.then((()=>this)).then(i,r)}catch(i){return this.when(null,i)}addResolvingPromise(i){i&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in i?i.when():i)}};return e=u([V("esri.core.Promise")],e),e};let Wh=class extends npe(tt){};Wh=u([V("esri.core.Promise")],Wh),(function(t){t.EsriPromiseMixin=npe})(Wh||(Wh={}));const vRe="not-loaded",bRe="loading",wRe="failed",$K="loaded",spe=t=>{let e=class extends t{constructor(...i){super(...i),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise((r=>{const n=this.load.bind(this);this.load=s=>{const o=new Promise(((a,l)=>{const c=K7(s,l);this.destroyed&&l(new ie("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this.when(a,l).finally((()=>{c&&c.remove()}))}));if(this.loadStatus===vRe){this._set("loadStatus",bRe);const a=this._loadController=new AbortController;n({signal:a.signal})}return r(),o}}))),this.when((()=>{this._set("loadStatus",$K),this._loadController=null}),(r=>{this._set("loadStatus",wRe),this._set("loadError",r),this._loadController=null}))}destroy(){this._loadController&&(this._loadController=Eo(this._loadController),this._promiseProps.abort()),this._set("loadError",null),this._set("loadWarnings",[])}get loaded(){return this.loadStatus===$K}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){var i;return this.isFulfilled()||(this._set("loadError",new ie("load:cancelled","Cancelled")),(i=this._loadController)==null||i.abort(),this._promiseProps.abort()),this}};return u([h({readOnly:!0})],e.prototype,"loaded",null),u([h({readOnly:!0})],e.prototype,"loadError",void 0),u([h({clonable:!1})],e.prototype,"loadStatus",void 0),u([h({type:[Dl],readOnly:!0})],e.prototype,"loadWarnings",null),e=u([V("esri.core.Loadable")],e),e};let Mo=class extends spe(Wh){};Mo=u([V("esri.core.Loadable")],Mo),(function(t){function e(i){return!(!i||!i.load)}t.LoadableMixin=spe,t.isLoadable=e})(Mo||(Mo={}));async function cN(t,e){return await t.load(),_Re(t,e)}async function _Re(t,e){const i=[],r=(...s)=>{for(const o of s)o!=null&&(Array.isArray(o)?r(...o):Ze.isCollection(o)?o.forEach((a=>r(a))):Mo.isLoadable(o)&&i.push(o))};e(r);let n=null;if(await KLe(i,(async s=>{const o=await lN(xRe(s)?s.loadAll():s.load());o.ok!==!1||n||(n=o)})),n)throw n.error;return t}function xRe(t){return"loadAll"in t&&typeof t.loadAll=="function"}let bP;function SRe(t){return bP&&!bP.destroyed||(bP=t()),bP}var hU;const $Re=new Gt({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let mn=hU=class extends tt{constructor(t){super(t),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(t){t!=="asc"&&t!=="desc"||this._set("sortOrder",t)}clone(){return new hU({categories:this.categories?se(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(t,e){let i=[];this.categories&&(i=this.categories.map((o=>Array.isArray(o)?JSON.stringify(o):o)));let r="";if(this.extent){const o=HF(this.extent,et.WGS84);o!=null&&(r=`${o.xmin},${o.ymin},${o.xmax},${o.ymax}`)}let n=this.query;!this.disableExtraQuery&&t.extraQuery&&(n="("+n+")"+t.extraQuery);const s={categories:i,bbox:r,q:n,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(s.sortField=this.sortField.split(",").map((o=>$Re.toJSON(o.trim()))).join(","),s.sortOrder=this.sortOrder),{query:{...e,...s}}}};u([h()],mn.prototype,"categories",void 0),u([h()],mn.prototype,"disableExtraQuery",void 0),u([h({type:Qt})],mn.prototype,"extent",void 0),u([h()],mn.prototype,"filter",void 0),u([h()],mn.prototype,"num",void 0),u([h()],mn.prototype,"query",void 0),u([h()],mn.prototype,"sortField",void 0),u([h()],mn.prototype,"sortOrder",null),u([h()],mn.prototype,"start",void 0),mn=hU=u([V("esri.portal.PortalQueryParams")],mn);var pU;let hn=pU=class extends ve{constructor(t){super(t),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.sourceJSON=null,this.tags=null,this.title=null}get thumbnailUrl(){var i;const t=this.url,e=this.thumbnail;return t&&e&&this.portal?(i=this.portal)==null?void 0:i.normalizeUrl(`${t}/info/${e}?f=json`):null}get url(){var e;const t=(e=this.portal)==null?void 0:e.restUrl;return t?t+"/community/groups/"+this.id:null}fetchCategorySchema(t){return this.portal.request(this.url+"/categorySchema",t).then((e=>{const i=e.categorySchema||[];return i.some((r=>r.source==="contentCategorySetsGroupQuery.LivingAtlas"))?this._fetchCategorySchemaSet("LivingAtlas",t):i}))}fetchMembers(t){return this.portal.request(this.url+"/users",t)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}toJSON(){throw new ie("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const e=new pU({sourceJSON:t});return e.read(t),e}queryItems(t,e){let i=En(mn,t);const r=this.portal;return parseFloat(r.currentVersion)>5?(i=i||new mn,r.queryPortal(`/content/groups/${this.id}/search`,i,"PortalItem",e)):(i=i?i.clone():new mn,i.query="group:"+this.id+(i.query?" "+i.query:""),r.queryItems(i,e))}_fetchCategorySchemaSet(t,e){const i=this.portal;return i.fetchSelf(i.authMode,!0,e).then((r=>{const n=r.contentCategorySetsGroupQuery;if(n){const s=new mn({disableExtraQuery:!0,num:1,query:n});return i.queryGroups(s,e)}throw new ie("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")})).then((r=>{if(r.total){const n=r.results[0],s=new mn({num:1,query:`typekeywords:"${t}"`});return n.queryItems(s,e)}throw new ie("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")})).then((r=>r.total?r.results[0].fetchData("json",e).then((n=>{const s=n==null?void 0:n.categorySchema;return s!=null&&s.length?s:[]})):[]))}};u([h()],hn.prototype,"access",void 0),u([h({type:Date})],hn.prototype,"created",void 0),u([h()],hn.prototype,"description",void 0),u([h()],hn.prototype,"id",void 0),u([h()],hn.prototype,"isInvitationOnly",void 0),u([h({type:Date})],hn.prototype,"modified",void 0),u([h()],hn.prototype,"owner",void 0),u([h()],hn.prototype,"portal",void 0),u([h()],hn.prototype,"snippet",void 0),u([h()],hn.prototype,"sortField",void 0),u([h()],hn.prototype,"sortOrder",void 0),u([h()],hn.prototype,"sourceJSON",void 0),u([h()],hn.prototype,"tags",void 0),u([h()],hn.prototype,"thumbnail",void 0),u([h({readOnly:!0})],hn.prototype,"thumbnailUrl",null),u([h()],hn.prototype,"title",void 0),u([h({readOnly:!0})],hn.prototype,"url",null),hn=pU=u([V("esri.portal.PortalGroup")],hn);let n0=class extends tt{constructor(e){super(e),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};u([h()],n0.prototype,"nextQueryParams",void 0),u([h()],n0.prototype,"queryParams",void 0),u([h()],n0.prototype,"results",void 0),u([h()],n0.prototype,"total",void 0),n0=u([V("esri.portal.PortalQueryResult")],n0);let Gp=class extends ve{constructor(e){super(e),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){var i;const e=(i=this.portal)==null?void 0:i.restUrl;return e?`${e}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new ie("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};u([h({type:Date})],Gp.prototype,"created",void 0),u([h()],Gp.prototype,"id",void 0),u([h()],Gp.prototype,"portal",void 0),u([h()],Gp.prototype,"title",void 0),u([h({readOnly:!0})],Gp.prototype,"url",null),u([h()],Gp.prototype,"username",void 0),Gp=u([V("esri.portal.PortalFolder")],Gp);var fU;let Xi=fU=class extends ve{constructor(t){super(t),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.id=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userLicenseTypeId=null,this.userType=null}get thumbnailUrl(){const t=this.url,e=this.thumbnail;return t&&e?this.portal.normalizeUrl(`${t}/info/${e}?f=json`):null}get userContentUrl(){var e;const t=(e=this.portal)==null?void 0:e.restUrl;return t?`${t}/content/users/${this.id}`:null}get url(){var e;const t=(e=this.portal)==null?void 0:e.restUrl;return t?`${t}/community/users/${this.id}`:null}addItem(t){const e=t&&t.item,i=t==null?void 0:t.data,r=t==null?void 0:t.folder,n={method:"post"};e&&(n.query=e.createPostQuery(),i!=null&&(typeof i=="string"?n.query.text=i:typeof i=="object"&&(n.query.text=JSON.stringify(i))));let s=this.userContentUrl;return r&&(s+="/"+(typeof r=="string"?r:r.id)),this.portal.request(s+"/addItem",n).then((o=>(e.id=o.id,e.portal=this.portal,e.loaded?e.reload():e.load())))}async deleteItem(t,e=!1){let i=this.userContentUrl;t.ownerFolder&&(i+="/"+t.ownerFolder);const r=e?{permanentDelete:!0}:{};await this.portal.request(i+`/items/${t.id}/delete`,{method:"post",query:r}),t.id=null,t.portal=null}async deleteItems(t,e=!1){t=t.slice();const i=this.userContentUrl+"/deleteItems",r=[],n=t.map((s=>s.id));if(n.length){const s={method:"post",query:{items:n.join(","),permanentDelete:e}},o=await this.portal.request(i,s);for(const a of o.results){const l=t.find((f=>a.itemId===f.id)),c=a.success;let d=null;c?(l.id=null,l.portal=null):a.error&&(d=new ie("portal:delete-item-failed",a.error.message,a.error)),r.push({item:l,success:c,error:d})}}return r}fetchFolders(){const t={query:{num:1}};return this.portal.request(this.userContentUrl??"",t).then((e=>{let i;return i=e&&e.folders?e.folders.map((r=>{const n=Gp.fromJSON(r);return n.portal=this.portal,n})):[],i}))}fetchGroups(){return this.portal.request(this.url??"").then((t=>{let e;return e=t&&t.groups?t.groups.map((i=>{const r=hn.fromJSON(i);return r.portal=this.portal,r})):[],e}))}async fetchItems(t){t??(t={});let e=this.userContentUrl??"";t.folder&&(e+="/"+t.folder.id);const{default:i}=await ye(()=>Promise.resolve().then(()=>ope),void 0),r={folders:!1,inRecycleBin:!!t.inRecycleBin||null,foldersContent:!(t.folder||!t.includeSubfolderItems)||null,num:t.num||10,start:t.start||1,sortField:t.sortField||"created",sortOrder:t.sortOrder||"asc"},n=await this.portal.request(e,{query:r});let s;return n!=null&&n.items?(s=n.items.map((o=>{const a=i.fromJSON(o);return a.portal=this.portal,a})),await Promise.all(s.map((o=>o.load()))),{items:s,nextStart:n.nextStart,total:n.total}):{items:[],nextStart:-1,total:0}}fetchTags(){return this.portal.request(this.url+"/tags").then((t=>t.tags))}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}queryFavorites(t){return this.favGroupId?(this._favGroup||(this._favGroup=new hn({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(t)):Promise.reject(new ie("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}async restoreItem(t,e){const i=this.userContentUrl,r=e?{folderID:typeof e=="string"?e:e.id}:null;await this.portal.request(i+`/items/${t.id}/restore`,{method:"post",query:r})}toJSON(){throw new ie("internal:not-yet-implemented","PortalUser.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const e=new fU({sourceJSON:t});return e.read(t),e}};u([h()],Xi.prototype,"access",void 0),u([h({type:Date})],Xi.prototype,"created",void 0),u([h()],Xi.prototype,"culture",void 0),u([h()],Xi.prototype,"description",void 0),u([h()],Xi.prototype,"email",void 0),u([h()],Xi.prototype,"favGroupId",void 0),u([h()],Xi.prototype,"fullName",void 0),u([h()],Xi.prototype,"id",void 0),u([h({type:Date})],Xi.prototype,"modified",void 0),u([h()],Xi.prototype,"orgId",void 0),u([h()],Xi.prototype,"portal",void 0),u([h()],Xi.prototype,"preferredView",void 0),u([h()],Xi.prototype,"privileges",void 0),u([h()],Xi.prototype,"region",void 0),u([h()],Xi.prototype,"role",void 0),u([h()],Xi.prototype,"roleId",void 0),u([h()],Xi.prototype,"sourceJSON",void 0),u([h()],Xi.prototype,"thumbnail",void 0),u([h({readOnly:!0})],Xi.prototype,"thumbnailUrl",null),u([h()],Xi.prototype,"units",void 0),u([h({readOnly:!0})],Xi.prototype,"userContentUrl",null),u([h({readOnly:!0})],Xi.prototype,"url",null),u([h()],Xi.prototype,"username",void 0),u([h()],Xi.prototype,"userLicenseTypeId",void 0),u([h()],Xi.prototype,"userType",void 0),Xi=fU=u([V("esri.portal.PortalUser")],Xi);var dl;let YT;const TK={PortalGroup:()=>Promise.resolve({default:hn}),PortalItem:()=>ye(()=>Promise.resolve().then(()=>ope),void 0),PortalUser:()=>Promise.resolve({default:Xi})};var wh;let ze=(wh=class extends ve.JSONSupportMixin(Mo){constructor(e){super(e),this._esriIdCredentialCreateHandle=null,this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.basemapGalleryGroupQuery3D=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.default3DBasemapQuery=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.layoutGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.hasClassificationSchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.recycleBinEnabled=!1,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=Si.portalUrl,this.urlKey=null,this.user=null,this.use3dBasemaps=!0,this.useDefault3dBasemap=!1,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(e){return typeof e=="string"?{url:e}:e}destroy(){EK.unregister(this),this.defaultBasemap=hr(this.defaultBasemap),this.defaultDevBasemap=hr(this.defaultDevBasemap),this.defaultVectorBasemap=hr(this.defaultVectorBasemap),this._esriIdCredentialCreateHandle=Nr(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(e){if(e)for(const i of e)Si.request.trustedServers.includes(i)||Si.request.trustedServers.push(i);return e}readDefaultBasemap(e){return this._readBasemap(e)}readDefaultDevBasemap(e){return this._readBasemap(e)}readDefaultVectorBasemap(e){return this._readBasemap(e)}get extraQuery(){var r;const e=(r=this.user)==null?void 0:r.orgId,i=!e||this.canSearchPublic;return this.id&&!i?` AND orgid:${this.id}`:null}get hasAPIKey(){return qIe(this.restUrl)}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get restUrl(){let e=this.url;if(e){const i=e.indexOf("/sharing");e=i>0?e.slice(0,i):this.url.replace(/\/+$/,""),e+="/sharing/rest"}return e}get thumbnailUrl(){const e=this.restUrl,i=this.thumbnail;return e&&i?this._normalizeSSL(e+"/portals/self/resources/"+i):null}readUrlKey(e){return e&&e.toLowerCase()}readUser(e){let i=null;return e&&(i=Xi.fromJSON(e),i.portal=this),i}load(e){const i=ye(()=>Promise.resolve().then(()=>GRe),void 0).then((({default:r})=>{Wi(e),YT=r})).then((()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,e))).then((r=>{var n;if(!this.hasAPIKey&&Rt){const s=Rt;this.credential=s.findCredential(this.restUrl),this.credential||this.authMode!==dl.AUTH_MODE_AUTO&&this.authMode!==dl.AUTH_MODE_NO_PROMPT||((n=this._esriIdCredentialCreateHandle)==null||n.remove(),this._esriIdCredentialCreateHandle=s.on("credential-create",TRe(new WeakRef(this))),EK.register(this,this._esriIdCredentialCreateHandle,this))}this.sourceJSON=r,this.read(r)}));return this.addResolvingPromise(i),Promise.resolve(this)}async createElevationLayers(){await this.load();const e=this._getHelperService("defaultElevationLayers"),i=(await ye(async()=>{const{default:r}=await import("./ElevationLayer-COoizbvc.js");return{default:r}},__vite__mapDeps([135,136,137,138,139]))).default;return e?e.map((r=>new i({id:r.id,url:r.url}))):[]}async fetchBasemaps(e,i){const r=await this._fetchBasemaps(e,i);if((i==null?void 0:i.include3d)===!0&&this.use3dBasemaps!==!1){const n=await this._fetchBasemaps3D(e,i);r.unshift(...n)}return r}async fetchDefault3DBasemap(e){if(!this.useDefault3dBasemap||!this.default3DBasemapQuery||this.default3DBasemapQuery==="none")return null;const i=new mn;i.query=this.default3DBasemapQuery,i.disableExtraQuery=!0;const r=(await this.queryItems(i,e)).results.find((n=>n.type==="Web Scene"));return r?new YT({portalItem:r}):null}fetchCategorySchema(e){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",e).then((i=>i.categorySchema)):Nc(e)?Promise.reject(fr()):Promise.resolve([])}async fetchClassificationSchema(e){return this.hasClassificationSchema?this.request(this.restUrl+"/portals/self/classification/classificationSchema",e).then((i=>i.classificationSchema)):null}fetchFeaturedGroups(e){const i=this.featuredGroups,r=new mn({num:100,sortField:"title"});if(i!=null&&i.length){const n=[];for(const s of i)n.push(`(title:"${s.title}" AND owner:${s.owner})`);return r.query=n.join(" OR "),this.queryGroups(r,e).then((s=>s.results))}return Nc(e)?Promise.reject(fr()):Promise.resolve([])}fetchRegions(e){var r;const i=((r=this.user)==null?void 0:r.culture)||this.culture||Wa();return this.request(this.restUrl+"/portals/regions",{...e,query:{culture:i}})}fetchSettings(e){var r;const i=((r=this.user)==null?void 0:r.culture)||this.culture||Wa();return this.request(this.restUrl+"/portals/self/settings",{...e,query:{culture:i}})}static getDefault(){return SRe((()=>new dl))}queryGroups(e,i){return this.queryPortal("/community/groups",e,"PortalGroup",i)}queryItems(e,i){return this.queryPortal("/search",e,"PortalItem",i)}queryUsers(e,i){return e.sortField||(e.sortField="username"),this.queryPortal("/community/users",e,"PortalUser",i)}fetchSelf(e=this.authMode,i=!1,r){const n=this.restUrl+"/portals/self",s={authMode:e,query:{culture:Wa().toLowerCase()},withCredentials:!0,...r};return s.authMode==="auto"&&(s.authMode="no-prompt"),i&&(s.query.default=!0),this.request(n,s)}queryPortal(e,i,r,n){const s=En(mn,i),o=a=>this.request(this.restUrl+e,{...s.toRequestOptions(this),...n}).then((l=>{const c=s.clone();return c.start=l.nextStart,new n0({nextQueryParams:c,queryParams:s,total:l.total,results:dl._resultsToTypedArray(a,{portal:this},l,n)})})).then((l=>Promise.all(l.results.map((c=>typeof c.when=="function"?c.when():l))).then((()=>l),(c=>(dh(c),l)))));return r&&TK[r]?TK[r]().then((({default:a})=>(Wi(n),o(a)))):o()}signIn(){if(this.hasAPIKey)return this.load().then((()=>{if(!this.user)throw new ie("portal:not-authenticated","Unable to authenticate user. Portal.user is missing")}));if(this.authMode===dl.AUTH_MODE_ANONYMOUS||this.authMode===dl.AUTH_MODE_NO_PROMPT&&!Rt)return Promise.reject(new ie("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const e=i=>Promise.resolve().then((()=>this.loadStatus==="not-loaded"?(i||(this.authMode="immediate"),this.load().then((()=>null))):this.loadStatus==="loading"?this.load().then((()=>this.credential?null:(this.credential=i,this.fetchSelf("immediate")))):this.user&&this.credential===i?null:(this.credential=i,this.fetchSelf("immediate")))).then((r=>{r&&(this.sourceJSON=r,this.read(r))}));return Rt?Rt.getCredential(this.restUrl,{prompt:this.authMode!==dl.AUTH_MODE_NO_PROMPT}).then((i=>e(i))):e(this.credential)}normalizeUrl(e){var r;const i=(r=this.credential)==null?void 0:r.token;return this._normalizeSSL(i?e+(e.includes("?")?"&":"?")+"token="+i:e)}requestToTypedArray(e,i,r){return this.request(e,i).then((n=>{const s=dl._resultsToTypedArray(r,{portal:this},n);return Promise.all(s.map((o=>typeof o.when=="function"?o.when():n))).then((()=>s),(()=>s))}))}request(e,i={}){const r={f:"json",...i.query},{authMode:n=this.authMode===dl.AUTH_MODE_ANONYMOUS||this.authMode===dl.AUTH_MODE_NO_PROMPT?this.authMode:"auto",body:s=null,cacheBust:o=!1,method:a="auto",responseType:l="json",signal:c}=i,d={authMode:n,body:s,cacheBust:o,method:a,query:r,responseType:l,timeout:0,signal:c};return i.withCredentials&&(d.withCredentials=!0),fi(this._normalizeSSL(e),d).then((f=>f.data))}toJSON(){throw new ie("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new dl({sourceJSON:e})}_getHelperService(e){const i=this.helperServices&&this.helperServices[e];if(!i)throw new ie("portal:service-not-found",`The \`helperServices\` do not include an entry named "${e}"`);return i}async _fetchBasemaps(e,i){const r=new mn;r.query=e||($j()?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),r.disableExtraQuery=!0;const n=await this.queryGroups(r,i);if(!n.total)return[];const s=n.results[0];r.num=100,r.query='type:"Web Map" -type:"Web Application"',r.sortField=s.sortField||"name",r.sortOrder=s.sortOrder||"desc";const o=await s.queryItems(r,i);return o.total?o.results.filter((a=>a.type==="Web Map")).map((a=>new YT({portalItem:a}))):[]}async _fetchBasemaps3D(e,i){const r=e||this.basemapGalleryGroupQuery3D;if(!r)return[];if($j())return[];const n=new mn({query:r,disableExtraQuery:!0}),s=await this.queryGroups(n,i);if(!s.total)return[];const o=s.results[0];n.num=100,n.query='type:"Web Scene"',n.sortField=o.sortField||"name",n.sortOrder=o.sortOrder||"desc";const a=await o.queryItems(n,i);return a.total?a.results.filter((l=>l.type==="Web Scene")).map((l=>new YT({portalItem:l}))):[]}_normalizeSSL(e){return e.replace(/^http:/i,"https:").replace(":7080",":7443")}_readBasemap(e){if(e){const i=YT.fromJSON(e);return i.portalItem={portal:this},i}return null}static _resultsToTypedArray(e,i,r,n){let s;if(r){const o=n!=null?n.signal:null;s=r.listings||r.notifications||r.userInvitations||r.tags||r.items||r.groups||r.comments||r.provisions||r.results||r.relatedItems||r,(e||i)&&(s=s.map((a=>{const l=Object.assign(e?e.fromJSON(a):a,i);return typeof l.load=="function"&&l.load(o),l})))}else s=[];return s}},dl=wh,wh.AUTH_MODE_ANONYMOUS="anonymous",wh.AUTH_MODE_AUTO="auto",wh.AUTH_MODE_IMMEDIATE="immediate",wh.AUTH_MODE_NO_PROMPT="no-prompt",wh);u([h()],ze.prototype,"access",void 0),u([h()],ze.prototype,"allSSL",void 0),u([h()],ze.prototype,"authMode",void 0),u([h()],ze.prototype,"authorizedCrossOriginDomains",void 0),u([De("authorizedCrossOriginDomains")],ze.prototype,"readAuthorizedCrossOriginDomains",null),u([h()],ze.prototype,"basemapGalleryGroupQuery",void 0),u([h({json:{name:"3DBasemapGalleryGroupQuery"}})],ze.prototype,"basemapGalleryGroupQuery3D",void 0),u([h()],ze.prototype,"bingKey",void 0),u([h()],ze.prototype,"canListApps",void 0),u([h()],ze.prototype,"canListData",void 0),u([h()],ze.prototype,"canListPreProvisionedItems",void 0),u([h()],ze.prototype,"canProvisionDirectPurchase",void 0),u([h()],ze.prototype,"canSearchPublic",void 0),u([h()],ze.prototype,"canShareBingPublic",void 0),u([h()],ze.prototype,"canSharePublic",void 0),u([h()],ze.prototype,"canSignInArcGIS",void 0),u([h()],ze.prototype,"canSignInIDP",void 0),u([h()],ze.prototype,"colorSetsGroupQuery",void 0),u([h()],ze.prototype,"commentsEnabled",void 0),u([h({type:Date})],ze.prototype,"created",void 0),u([h()],ze.prototype,"credential",void 0),u([h()],ze.prototype,"culture",void 0),u([h()],ze.prototype,"currentVersion",void 0),u([h()],ze.prototype,"customBaseUrl",void 0),u([h()],ze.prototype,"default3DBasemapQuery",void 0),u([h()],ze.prototype,"defaultBasemap",void 0),u([De("defaultBasemap")],ze.prototype,"readDefaultBasemap",null),u([h()],ze.prototype,"defaultDevBasemap",void 0),u([De("defaultDevBasemap")],ze.prototype,"readDefaultDevBasemap",null),u([h({type:Qt})],ze.prototype,"defaultExtent",void 0),u([h()],ze.prototype,"defaultVectorBasemap",void 0),u([De("defaultVectorBasemap")],ze.prototype,"readDefaultVectorBasemap",null),u([h()],ze.prototype,"description",void 0),u([h()],ze.prototype,"devBasemapGalleryGroupQuery",void 0),u([h()],ze.prototype,"eueiEnabled",void 0),u([h({readOnly:!0})],ze.prototype,"extraQuery",null),u([h()],ze.prototype,"featuredGroups",void 0),u([h()],ze.prototype,"featuredItemsGroupQuery",void 0),u([h()],ze.prototype,"galleryTemplatesGroupQuery",void 0),u([h()],ze.prototype,"layoutGroupQuery",void 0),u([h()],ze.prototype,"livingAtlasGroupQuery",void 0),u([h({readOnly:!0})],ze.prototype,"hasAPIKey",null),u([h()],ze.prototype,"hasCategorySchema",void 0),u([h()],ze.prototype,"hasClassificationSchema",void 0),u([h()],ze.prototype,"helpBase",void 0),u([h()],ze.prototype,"helperServices",void 0),u([h()],ze.prototype,"helpMap",void 0),u([h()],ze.prototype,"homePageFeaturedContent",void 0),u([h()],ze.prototype,"homePageFeaturedContentCount",void 0),u([h()],ze.prototype,"httpPort",void 0),u([h()],ze.prototype,"httpsPort",void 0),u([h()],ze.prototype,"id",void 0),u([h()],ze.prototype,"ipCntryCode",void 0),u([h({readOnly:!0})],ze.prototype,"isOrganization",null),u([h()],ze.prototype,"isPortal",void 0),u([h()],ze.prototype,"isReadOnly",void 0),u([h({readOnly:!0})],ze.prototype,"itemPageUrl",null),u([h()],ze.prototype,"layerTemplatesGroupQuery",void 0),u([h()],ze.prototype,"maxTokenExpirationMinutes",void 0),u([h({type:Date})],ze.prototype,"modified",void 0),u([h()],ze.prototype,"name",void 0),u([h()],ze.prototype,"portalHostname",void 0),u([h()],ze.prototype,"portalMode",void 0),u([h()],ze.prototype,"portalProperties",void 0),u([h()],ze.prototype,"region",void 0),u([h()],ze.prototype,"recycleBinEnabled",void 0),u([h({readOnly:!0})],ze.prototype,"restUrl",null),u([h()],ze.prototype,"rotatorPanels",void 0),u([h()],ze.prototype,"showHomePageDescription",void 0),u([h()],ze.prototype,"sourceJSON",void 0),u([h()],ze.prototype,"staticImagesUrl",void 0),u([h({json:{name:"2DStylesGroupQuery"}})],ze.prototype,"stylesGroupQuery2d",void 0),u([h({json:{name:"stylesGroupQuery"}})],ze.prototype,"stylesGroupQuery3d",void 0),u([h()],ze.prototype,"supportsHostedServices",void 0),u([h()],ze.prototype,"symbolSetsGroupQuery",void 0),u([h()],ze.prototype,"templatesGroupQuery",void 0),u([h()],ze.prototype,"thumbnail",void 0),u([h({readOnly:!0})],ze.prototype,"thumbnailUrl",null),u([h()],ze.prototype,"units",void 0),u([h()],ze.prototype,"url",void 0),u([h()],ze.prototype,"urlKey",void 0),u([De("urlKey")],ze.prototype,"readUrlKey",null),u([h()],ze.prototype,"user",void 0),u([De("user")],ze.prototype,"readUser",null),u([h()],ze.prototype,"use3dBasemaps",void 0),u([h()],ze.prototype,"useDefault3dBasemap",void 0),u([h()],ze.prototype,"useStandardizedQuery",void 0),u([h()],ze.prototype,"useVectorBasemaps",void 0),u([h()],ze.prototype,"vectorBasemapGalleryGroupQuery",void 0),ze=dl=u([V("esri.portal.Portal")],ze);const EK=new FinalizationRegistry((t=>{t.remove()}));function TRe(t){const e=Rt;return()=>{const i=t.deref();i&&e.findCredential(i.restUrl)&&i.signIn().catch((()=>{}))}}let qp=class extends tt{constructor(e){super(e),this.portalItem=null}normalizeCtorArgs(e){return e!=null&&e.portalItem&&e.path?{...e,path:IK(e.path,e.portalItem)}:e}set path(e){e!=null&&Ha(e)?Ie.getLogger(this).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",e)}_castPath(e){return IK(e,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get cdnUrl(){return this.portalItem&&this.path?`${this.portalItem.itemCdnUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(e="json",i){const r=this.cdnUrl;if(r==null)throw new ie("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(r,{responseType:e,query:{token:this.portalItem.apiKey,_ts:i!=null&&i.cacheBust?Date.now():null},signal:i==null?void 0:i.signal})}async update(e,i){const{addOrUpdateResources:r}=await ye(()=>import("./resourceUtils-B3t1c9YU.js"),[]);return await r(this.portalItem,[{resource:this,content:e,compress:i==null?void 0:i.compress,access:i==null?void 0:i.access}],"update",i),this}hasPath(){return this.path!=null}};function IK(t,e){return t==null?t:(t=t.replace(/^\/+/,""),e!=null&&Ha(t)&&(t=bG(t,e.itemUrl)),t==null?void 0:t.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}u([h()],qp.prototype,"portalItem",void 0),u([h({type:String,value:null})],qp.prototype,"path",null),u([yi("path")],qp.prototype,"_castPath",null),u([h({type:String,readOnly:!0})],qp.prototype,"url",null),u([h({type:String,readOnly:!0})],qp.prototype,"cdnUrl",null),u([h({type:String,readOnly:!0})],qp.prototype,"itemRelativeUrl",null),qp=u([V("esri.portal.PortalItemResource")],qp);let cb=class extends tt{constructor(e){super(e),this.created=null,this.rating=null}};u([h({type:Date})],cb.prototype,"created",void 0),u([h()],cb.prototype,"rating",void 0),cb=u([V("esri.portal.PortalRating")],cb);var s0;const ERe=new Set(["3DTiles Service","CSV","Feature Collection","Feature Service","Feed","GeoJson","Group Layer","Image Service","KML","Knowledge Graph Layer","Map Service","Media Layer","Scene Service","Stream Service","Video Service","Vector Tile Service","WCS","WFS","WMS","WMTS"]),IRe=new Set(["KML","GeoJson","CSV"]);let At=s0=class extends ve.JSONSupportMixin(Mo){static from(t){return c2(s0,t)}constructor(t){super(t),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.classification=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.isOrgItem=!1,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.sourceUrl=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}destroy(){this.portal=null}get displayName(){const t=this.type,e=this.typeKeywords||[];let i=t;return t==="Feature Service"||t==="Feature Collection"?i=e.includes("Table")?"Table":e.includes("Route Layer")?"Route Layer":e.includes("Markup")?"Markup":"Feature Layer":t==="Image Service"?i=e.includes("Elevation 3D Layer")?"Elevation Layer":e.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":t==="Scene Service"?i="Scene Layer":t==="Video Service"?i="Video Layer":t==="Scene Package"?i="Scene Layer Package":t==="Stream Service"?i="Feature Layer":t==="Geoprocessing Service"?i=e.includes("Web Tool")?"Tool":"Geoprocessing Service":t==="Geoenrichment Service"?i="GeoEnrichment Service":t==="Geocoding Service"?i="Locator":t==="Microsoft Powerpoint"?i="Microsoft PowerPoint":t==="GeoJson"?i="GeoJSON":t==="Globe Service"?i="Globe Layer":t==="Vector Tile Service"?i="Tile Layer":t==="netCDF"?i="NetCDF":t==="Map Service"?i=e.includes("Spatiotemporal")||!e.includes("Hosted Service")&&!e.includes("Tiled")||e.includes("Relational")?"Map Image Layer":"Tile Layer":t!=null&&t.toLowerCase().includes("add in")?i=t.replaceAll(/(add in)/gi,"Add-In"):t==="datastore catalog service"?i="Big Data File Share":t==="Compact Tile Package"?i="Tile Package (tpkx)":t==="Raster function template"?i="Raster Function Template":t==="OGCFeatureServer"?i="OGC Feature Layer":t==="web mapping application"&&e.includes("configurableApp")?i="Instant App":t==="Insights Page"?i="Insights Report":t==="Excalibur Imagery Project"?i="Excalibur Project":t==="3DTiles Service"?i="3D tiles layer":t==="3DTiles Package"&&(i="3D tiles package"),i}readExtent(t){return t&&t.length?new Qt(t[0][0],t[0][1],t[1][0],t[1][1]):null}get iconUrl(){var g;const t=((g=this.type)==null?void 0:g.toLowerCase())||"",e=this.typeKeywords||[],i="esri/images/portal/",r="16";let n,s=!1,o=!1,a=!1,l=!1,c=!1,d=!1,f=!1,y=!1;return t.indexOf("service")>0||t==="feature collection"||t==="kml"||t==="wms"||t==="wmts"||t==="wfs"?(s=e.includes("Hosted Service"),t==="feature service"||t==="feature collection"||t==="kml"||t==="wfs"?(o=e.includes("Table"),a=e.includes("Route Layer"),l=e.includes("Markup"),c=e.includes("Spatiotemporal"),d=e.includes("UtilityNetwork"),n=c&&o?"spatiotemporaltable":o?"table":a?"routelayer":l?"markup":c?"spatiotemporal":d?"utilitynetwork":s?"featureshosted":"features"):t==="map service"||t==="wms"||t==="wmts"?(c=e.includes("Spatiotemporal"),f=e.includes("Relational"),n=c||f?"mapimages":s||e.includes("Tiled")||t==="wmts"?"maptiles":"mapimages"):n=t==="scene service"?e.includes("Line")?"sceneweblayerline":e.includes("3DObject")?"sceneweblayermultipatch":e.includes("Point")?"sceneweblayerpoint":e.includes("IntegratedMesh")?"sceneweblayermesh":e.includes("PointCloud")?"sceneweblayerpointcloud":e.includes("Polygon")?"sceneweblayerpolygon":e.includes("Building")?"sceneweblayerbuilding":e.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":t==="image service"?e.includes("Elevation 3D Layer")?"elevationlayer":e.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":t==="stream service"?"streamlayer":t==="vector tile service"?"vectortile":t==="datastore catalog service"?"datastorecollection":t==="geocoding service"?"geocodeservice":t==="video service"?e.includes("Live Stream")?"livestreamvideolayer":"videolayer":t==="geoprocessing service"?e.includes("Web Tool")?"tool":"layers":t==="geodata service"?"geodataservice":t==="3dtiles service"?e.includes("3DObject")?"3dobjecttileslayer":e.includes("IntegratedMesh")?"integratedmeshtileslayer":"3dtileslayer":"layers"):t==="web map"||t==="cityengine web scene"?n="maps":t==="web scene"?n=e.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":t==="web mapping application"&&e.includes("configurableApp")?n="instantapps":t==="web mapping application"||t==="mobile application"||t==="application"||t==="operation view"||t==="desktop application"?n="apps":t==="map document"||t==="map package"||t==="published map"||t==="scene document"||t==="globe document"||t==="basemap package"||t==="mobile basemap package"||t==="mobile map package"||t==="project package"||t==="project template"||t==="pro map"||t==="layout"||t==="layer"&&e.includes("ArcGIS Pro")||t==="explorer map"&&e.indexOf("Explorer Document")?n="mapsgray":t==="service definition"||t==="shapefile"||t==="cad drawing"||t==="geojson"||t==="netcdf"||t==="administrative report"?n="datafiles":t==="360 vr experience"?n="360vr":t==="explorer add in"||t==="desktop add in"||t==="windows viewer add in"||t==="windows viewer configuration"?n="appsgray":t==="arcgis pro add in"||t==="arcgis pro configuration"?n="addindesktop":t==="pdf"?n="pdf":t==="microsoft word"?n="word":t==="microsoft excel"?n="excel":t==="microsoft powerpoint"?n="ppt":t==="rule package"||t==="file geodatabase"||t==="sqlite geodatabase"||t==="csv collection"||t==="kml collection"||t==="windows mobile package"||t==="map template"||t==="desktop application template"||t==="gml"||t==="arcpad package"||t==="code sample"||t==="document link"||t==="earth configuration"||t==="operations dashboard add in"||t==="rules package"||t==="workflow manager package"||t==="explorer map"&&e.includes("Explorer Mapping Application")||e.includes("Document")?n="datafilesgray":t==="network analysis service"||t==="geoprocessing service"||t==="geodata service"||t==="geometry service"||t==="geoprocessing package"||t==="locator package"||t==="geoprocessing sample"||t==="workflow manager service"?n="toolsgray":t==="layer"||t==="layer package"||t==="explorer layer"?n="layersgray":t==="analysis model"?n="analysismodel":t==="scene package"?n="scenepackage":t==="3dtiles package"?n="3dtileslayerpackage":t==="3dtiles service"?n="3dtileslayer":t==="mobile scene package"?n="mobilescenepackage":t==="tile package"||t==="compact tile package"?n="tilepackage":t==="task file"?n="taskfile":t==="report template"?n="report-template":t==="statistical data collection"?n="statisticaldatacollection":t==="insights workbook"?n="workbook":t==="insights model"?n="insightsmodel":t==="insights page"?n="insightspage":t==="insights theme"?n="insightstheme":t==="hub initiative"?n="hubinitiative":t==="hub page"?n="hubpage":t==="hub site application"?n="hubsite":t==="hub event"?n="hubevent":t==="hub project"?n="hubproject":t==="relational database connection"?n="relationaldatabaseconnection":t==="big data file share"?n="datastorecollection":t==="image collection"?n="imagecollection":t==="desktop style"?n="desktopstyle":t==="style"?n=e.includes("Dictionary")?"dictionarystyle":"style":t==="dashboard"?n="dashboard":t==="raster function template"?n="rasterprocessingtemplate":t==="vector tile package"?n="vectortilepackage":t==="ortho mapping project"?n="orthomappingproject":t==="ortho mapping template"?n="orthomappingtemplate":t==="solution"?n="solutions":t==="geopackage"?n="geopackage":t==="deep learning package"?n="deeplearningpackage":t==="real time analytic"?n="realtimeanalytics":t==="reality mapping project"?n="realitymappingproject":t==="big data analytic"?n="bigdataanalytics":t==="feed"?n="feed":t==="excalibur imagery project"?n="excaliburimageryproject":t==="notebook"?n="notebook":t==="storymap"?n="storymap":t==="survey123 add in"?n="survey123addin":t==="mission"?n="mission":t==="mission report"?n="missionreport":t==="mission template"?n="missiontemplate":t==="quickcapture project"?n="quickcaptureproject":t==="pro report"?n="proreport":t==="pro report template"?n="proreporttemplate":t==="urban model"?n="urbanmodel":t==="urban project"?n="urbanproject":t==="web experience"?n="experiencebuilder":t==="web experience template"?n="webexperiencetemplate":t==="experience builder widget"?n="experiencebuilderwidget":t==="experience builder widget package"?n="experiencebuilderwidgetpackage":t==="workflow"?n="workflow":t==="kernel gateway connection"?n="kernelgatewayconnection":t==="insights script"?n="insightsscript":t==="hub initiative template"?n="hubinitiativetemplate":t==="storymap theme"?n="storymaptheme":t==="knowledge graph"?n="knowledgegraph":t==="knowledge graph layer"?n="knowledgegraphlayer":t==="knowledge studio project"?n="knowledgestudio":t==="native application"?n="nativeapp":t==="native application installer"?n="nativeappinstaller":t==="web link chart"?n="linkchart":t==="knowledge graph web investigation"?n="investigation":t==="ogcfeatureserver"?n="features":t==="pro presentation"?n="propresentation":t==="pro project"?n="proproject":t==="insights workbook package"?n="insightsworkbookpackage":t==="apache parquet"?n="apacheparquet":t==="notebook code snippet library"?n="notebookcodesnippets":t==="suitability model"?n="suitabilitymodel":t==="esri classifier definition"?n="classifierdefinition":t==="esri classification schema"?n="classificationschema":t==="insights data engineering workbook"?n="dataengineeringworkbook":t==="insights data engineering model"?n="dataengineeringmodel":t==="deep learning studio project"?n="deeplearningproject":t==="discussion"?n="discussion":t==="allsource project"?n="allsourceproject":t==="api key"?n="apikey":t==="data pipeline"?n="datapipelines":t==="group layer"?(y=e.includes("Map"),n=y?"layergroup2d":"layergroup"):n=t==="media layer"?"onlinemedialayer":t==="form"?e.includes("Survey123")?"survey":"datafilesgray":t==="csv"?"csv":t==="image"?"image":"maps",n?Ir(i+n+r+".png"):null}get isLayer(){return this.type!=null&&ERe.has(this.type)}get itemCdnUrl(){return $G(this.itemUrl)}get itemPageUrl(){var e;const t=(e=this.portal)==null?void 0:e.itemPageUrl;return t&&this.id?`${t}?id=${this.id}`:null}get itemUrl(){var e;const t=(e=this.portal)==null?void 0:e.restUrl;return t&&this.id?`${t}/content/items/${this.id}`:null}get thumbnailUrl(){var i;const t=this.itemUrl,e=this.thumbnail;return t&&e?((i=this.portal)==null?void 0:i.normalizeUrl(`${t}/info/${e}?f=json`))??null:null}get userItemUrl(){var i,r,n;const t=(i=this.portal)==null?void 0:i.restUrl;if(!t)return null;const e=this.owner||((n=(r=this.portal)==null?void 0:r.user)==null?void 0:n.id);return e?`${t}/content/users/${this.ownerFolder?`${e}/${this.ownerFolder}`:e}/items/${this.id}`:null}load(t){const e=this.portal??(this.portal=ze.getDefault()),i=e.load(t).then((()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?e.request(this.itemUrl,{signal:t!=null?t.signal:null,query:{token:this.apiKey}}):{})).then((r=>{this.sourceJSON=r,this.read(r)}));return this.addResolvingPromise(i),Promise.resolve(this)}async addRating(t){const e={method:"post",query:{}},i=t instanceof cb?t.rating:t;return i==null||isNaN(i)||typeof t!="number"||(e.query.rating=i),this.portal?(await this.portal.request(this.itemUrl+"/addRating",e),new cb({rating:i,created:new Date})):null}clone(){const t={access:this.access,accessInformation:this.accessInformation,applicationProxies:se(this.applicationProxies),avgRating:this.avgRating,categories:se(this.categories),classification:se(this.classification),created:se(this.created),culture:this.culture,description:this.description,extent:se(this.extent),groupCategories:se(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:se(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:se(this.screenshots),size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:se(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:se(this.typeKeywords),url:this.url};this.loaded&&(t.loadStatus="loaded");const e=new s0({sourceJSON:this.sourceJSON}).set(t);return e._set("isOrgItem",this.isOrgItem),e}createPostQuery(){var e;const t=this.toJSON();for(const i of["tags","typeKeywords","categories"])t[i]=(e=t[i])==null?void 0:e.join(", ");for(const i of["extent","classification"]){const r=t[i];r&&(t[i]=JSON.stringify(r))}return t}async deleteRating(){await this.portal.request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(t="json",e){return this.portal.request(this.itemUrl+"/data",{responseType:t,...e,query:{token:this.apiKey}})}async fetchRating(t){const e=await this.portal.request(this.itemUrl+"/rating",{query:{token:this.apiKey},...t});return e.rating!=null?(e.created=new Date(e.created),new cb(e)):null}fetchRelatedItems(t,e){return this.portal.requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...t,token:this.apiKey},...e},s0)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}reload(){return this.portal.request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then((t=>(this.applicationProxies&&!Object.hasOwn(t,"appProxies")&&(this.applicationProxies=null),this.sourceJSON=t,this.read(t),this)))}update(t){return this.id?this.load().then((()=>this.portal.signIn())).then((()=>{const e=t==null?void 0:t.data,i={method:"post"};i.query=this.createPostQuery();for(const r in i.query)i.query[r]===null&&(i.query[r]="");return i.query.clearEmptyFields=!0,e!=null&&(typeof e=="string"?i.query.text=e:typeof e=="object"&&(i.query.text=JSON.stringify(e))),this.portal.request(`${this.userItemUrl}/update`,i).then((()=>this.reload()))})):Promise.reject(new ie("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async copy(t){if(!this.id)throw new ie("portal:item-does-not-exist","The item does not exist yet");await this.load();const{portal:e,itemUrl:i}=this;await e.signIn();const{copyResources:r,folder:n,tags:s,title:o}=t||{},a={method:"post",query:{copyPrivateResources:r==="all",folder:typeof n=="string"?n:n==null?void 0:n.id,includeResources:!!r,tags:s==null?void 0:s.join(","),title:o}},{itemId:l}=await e.request(`${i}/copy`,a);return new s0({id:l,portal:e})}updateThumbnail(t){return this.id?this.load().then((()=>this.portal.signIn())).then((()=>{const e=t.thumbnail,i=t.filename,r={method:"post"};if(typeof e=="string")cm(e)?r.query={data:e}:r.query={url:Ba(e)},i!=null&&(r.query.filename=i);else{const n=new FormData;i!=null?n.append("file",e,i):n.append("file",e),r.body=n}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,r).then((()=>this.reload()))})):Promise.reject(new ie("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(t={},e){const{fetchResources:i}=await ye(()=>import("./resourceUtils-B3t1c9YU.js"),[]);return i(this,t,e)}async addResource(t,e,i){const{addOrUpdateResources:r}=await ye(()=>import("./resourceUtils-B3t1c9YU.js"),[]);return t.portalItem=this,await r(this,[{resource:t,content:e,compress:i==null?void 0:i.compress,access:i==null?void 0:i.access}],"add",i),t}async removeResource(t,e){const{removeResource:i}=await ye(()=>import("./resourceUtils-B3t1c9YU.js"),[]);if(t.portalItem&&t.portalItem.itemUrl!==this.itemUrl)throw new ie("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return i(this,t,e)}async removeAllResources(t){const{removeAllResources:e}=await ye(()=>import("./resourceUtils-B3t1c9YU.js"),[]);return e(this,t)}resourceFromPath(t){return new qp({portalItem:this,path:t})}toJSON(){var i,r;const t=this.extent,e={accessInformation:this.accessInformation,categories:se(this.categories),classification:se(this.classification),created:(i=this.created)==null?void 0:i.getTime(),description:this.description,extent:t&&[[t.xmin,t.ymin],[t.xmax,t.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:(r=this.modified)==null?void 0:r.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:se(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:se(this.typeKeywords),url:this.url};return C$e(e)}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");return new s0({sourceJSON:t})}_getPostQuery(){const t=this.toJSON();for(const e in t)e==="tags"&&t[e]!==null&&(t[e]=t[e].join(", ")),e==="typeKeywords"&&t[e]!==null&&(t[e]=t[e].join(", ")),e==="extent"&&t[e]&&(t[e]=JSON.stringify(t[e]));return t}};u([h({type:["private","shared","org","public"]})],At.prototype,"access",void 0),u([h()],At.prototype,"accessInformation",void 0),u([h({type:String})],At.prototype,"apiKey",void 0),u([h({json:{read:{source:"appProxies"}}})],At.prototype,"applicationProxies",void 0),u([h()],At.prototype,"avgRating",void 0),u([h()],At.prototype,"categories",void 0),u([h()],At.prototype,"classification",void 0),u([h({type:Date})],At.prototype,"created",void 0),u([h()],At.prototype,"culture",void 0),u([h()],At.prototype,"description",void 0),u([h({readOnly:!0})],At.prototype,"displayName",null),u([h({type:Qt})],At.prototype,"extent",void 0),u([De("extent")],At.prototype,"readExtent",null),u([h()],At.prototype,"groupCategories",void 0),u([h({readOnly:!0})],At.prototype,"iconUrl",null),u([h()],At.prototype,"id",void 0),u([h({readOnly:!0})],At.prototype,"isLayer",null),u([h({type:Boolean,readOnly:!0})],At.prototype,"isOrgItem",void 0),u([h()],At.prototype,"itemControl",void 0),u([h({readOnly:!0})],At.prototype,"itemPageUrl",null),u([h({readOnly:!0})],At.prototype,"itemUrl",null),u([h()],At.prototype,"licenseInfo",void 0),u([h({type:Date})],At.prototype,"modified",void 0),u([h()],At.prototype,"name",void 0),u([h()],At.prototype,"numComments",void 0),u([h()],At.prototype,"numRatings",void 0),u([h()],At.prototype,"numViews",void 0),u([h()],At.prototype,"owner",void 0),u([h()],At.prototype,"ownerFolder",void 0),u([h({type:ze})],At.prototype,"portal",void 0),u([h()],At.prototype,"screenshots",void 0),u([h()],At.prototype,"size",void 0),u([h()],At.prototype,"snippet",void 0),u([h()],At.prototype,"sourceJSON",void 0),u([h({type:String})],At.prototype,"sourceUrl",void 0),u([h({type:String})],At.prototype,"spatialReference",void 0),u([h()],At.prototype,"tags",void 0),u([h()],At.prototype,"thumbnail",void 0),u([h({readOnly:!0})],At.prototype,"thumbnailUrl",null),u([h()],At.prototype,"title",void 0),u([h()],At.prototype,"type",void 0),u([h()],At.prototype,"typeKeywords",void 0),u([h({type:String,json:{read(t,e){var i;if(IRe.has(e.type)){const r=(i=this.portal)==null?void 0:i.restUrl;t||(t=r&&this.id?`${r}/content/items/${this.id}/data`:null)}return t}}})],At.prototype,"url",void 0),u([h({readOnly:!0})],At.prototype,"userItemUrl",null),At=s0=u([V("esri.portal.PortalItem")],At);const ope=Object.freeze(Object.defineProperty({__proto__:null,get default(){return At}},Symbol.toStringTag,{value:"Module"}));async function CRe(t){if(!t)return;const e=t.includes("-vector")?t.slice(0,t.indexOf("-vector")):t.includes("-3d")?t.slice(0,t.indexOf("-3d")):t,i=await QG("esri/t9n/basemaps");return i[t]||i[e]}const mU={satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return Ir("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return Ir("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return Ir("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return Ir("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return Ir("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return Ir("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get"dark-gray"(){return{...this["dark-gray-vector"],id:"dark-gray"}},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return Ir("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get gray(){return{...this["gray-vector"],id:"gray"}},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return Ir("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},get streets(){return{...this["streets-vector"],id:"streets"}},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return Ir("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},get topo(){return{...this["topo-vector"],id:"topo"}},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return Ir("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return Ir("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return Ir("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"topo-3d":{id:"topo-3d",is3d:!0,get thumbnailUrl(){return Ir("esri/images/basemap/topo-3d.png")},baseMapLayers:[{id:"topo-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/1e7d1784d1ef4b79ba6764d0bd6c3150/resources/styles/root.json",layerType:"VectorTileLayer",title:"Topographic",visibility:!0,opacity:1},{id:"topo-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-3d":{id:"navigation-3d",is3d:!0,get thumbnailUrl(){return Ir("esri/images/basemap/navigation-3d.jpg")},baseMapLayers:[{id:"navigation-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/ccc904ff872b4144b94934e55e32784b/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation",visibility:!0,opacity:1},{id:"navigation-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-3d":{id:"streets-3d",is3d:!0,get thumbnailUrl(){return Ir("esri/images/basemap/streets-3d.png")},baseMapLayers:[{id:"streets-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/198298c4c64c4cb19de5b46aa00c198d/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"streets-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"streets-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"osm-3d":{id:"osm-3d",is3d:!0,get thumbnailUrl(){return Ir("esri/images/basemap/osm-3d.png")},baseMapLayers:[{id:"osm-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/8628d259c9d14bdc848771c23c513940/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap",visibility:!0,opacity:1},{id:"osm-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"gray-3d":{id:"gray-3d",is3d:!0,get thumbnailUrl(){return Ir("esri/images/basemap/gray-3d.png")},baseMapLayers:[{id:"gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/01a14b466345455ba4176d2e6390db92/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-dark-3d":{id:"navigation-dark-3d",itemId:"5a1365328b4943f09a54cf5fd1205707",is3d:!0,baseMapLayers:[{id:"navigation-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/451a1777ab3f4bf095fae24a117439d9/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation Dark"},{id:"navigation-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-dark-3d":{id:"streets-dark-3d",itemId:"8a4efa2c20484ec9b4557895e65736ff",is3d:!0,baseMapLayers:[{id:"streets-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/bc599b6d741a4ac084b7eea7bf8c5938/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Streets Night (for 3D)"},{id:"streets-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"streets-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"dark-gray-3d":{id:"dark-gray-3d",itemId:"a8b7322a5fe94002bb0f5e0eeb0c5c18",is3d:!0,baseMapLayers:[{id:"dark-gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/4178f71acb934fb89f169e7d667c20c6/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Dark Gray Canvas (for 3D)"},{id:"dark-gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"dark-gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]}};let Hp=class extends tt{constructor(e){super(e),this.apiKey=null,this.id=null,this.language=null,this.places=null,this.serviceUrl="https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2",this.worldview=null}get languageParameter(){const e=this.language;let i=e==="local"||e==="global"?e:uhe(e??Wa())??"global";return i=i==="no"?"nb":i,i}};u([h()],Hp.prototype,"apiKey",void 0),u([h()],Hp.prototype,"id",void 0),u([h()],Hp.prototype,"language",void 0),u([h()],Hp.prototype,"places",void 0),u([h()],Hp.prototype,"serviceUrl",void 0),u([h()],Hp.prototype,"worldview",void 0),Hp=u([V("esri.support.BasemapStyle")],Hp);const MRe=Hp,wP=new WeakMap;function dq(t){return!t.destroyed&&(wP.has(t)||t.addHandles([$e((()=>{const e=t.parent;return!(!e||!("type"in e))&&(e.type==="catalog-dynamic-group"||dq(e))}),(e=>wP.set(t,e)),ta),Ei((()=>wP.delete(t)))]),wP.get(t))}function ape(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="feature"}function yft(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="graphics"}function kRe(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="map-image"}function PRe(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="knowledge-graph"&&"layers"in t}function gft(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="knowledge-graph-sublayer"}function yU(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="subtype-group"&&"sublayers"in t}function fh(t){return(t==null?void 0:t.type)==="subtype-sublayer"}const vft={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};function gU(t){const e=t==null?void 0:t.type;return e==="building-scene"||e==="integrated-mesh"||e==="point-cloud"||e==="scene"}function bft(t){return t==="integrated-mesh"||t==="integrated-mesh-3dtiles"}function uN(t){var e;return(t==null?void 0:t.type)==="feature"&&!t.url&&((e=t.source)==null?void 0:e.type)==="memory"}function wft(t){var i;const e=t==null?void 0:t.type;return(e==="feature"||e==="subtype-group"||e==="oriented-imagery")&&((i=t==null?void 0:t.source)==null?void 0:i.type)==="feature-layer"}async function hq(t,e){const i=Rt==null?void 0:Rt.findServerInfo(t);if((i==null?void 0:i.currentVersion)!=null)return i.owningSystemUrl||null;const r=t.toLowerCase().indexOf("/rest/services");if(r===-1)return null;const n=`${t.slice(0,r)}/rest/info`,s=e!=null?e.signal:null,{data:o}=await fi(n,{query:{f:"json"},responseType:"json",signal:s});return(o==null?void 0:o.owningSystemUrl)||null}function lpe(t){if(!("capabilities"in t))return!1;switch(t.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"imagery":case"knowledge-graph-sublayer":case"ogc-feature":case"oriented-imagery":case"scene":case"sublayer":case"subtype-group":case"subtype-sublayer":case"wfs":return!0;default:return!1}}function cpe(t){return lpe(t)?"effectiveCapabilities"in t?t.effectiveCapabilities:t.capabilities:null}function ARe(t){if(!("editingEnabled"in t))return!1;switch(t.type){case"csv":case"feature":case"geojson":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":return!0;default:return!1}}function LRe(t){return!!ARe(t)&&("effectiveEditingEnabled"in t?t.effectiveEditingEnabled:t.editingEnabled)}function _ft(t){const e=new Ze;for(const i of t.allLayers.concat(t.allTables))i.type==="csv"||dq(i)||("charts"in i&&e.push(i),i.type==="subtype-group"&&e.push(...i.sublayers));return e}function RRe(t,e){return null}function xft(t){return null}function vU(t){return!t||t.type==="Feature Service"&&!t.sourceUrl}function Sft(t,e){!e||!vU(t)||RRe(t.url)}const ORe=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wcs","wms","wmts"]),upe=new Set(["catalog","csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","knowledge-graph","map-image","map-notes","media","ogc-feature","oriented-imagery","route","stream","subtype-group","tile","unknown","unsupported","vector-tile","video","web-tile","wcs","wfs","wms","wmts"]),FRe=new Set([...upe,"link-chart"]);function NRe(t){switch(t.layerContainerType){case"basemap":return ORe;case"operational-layers":return t.origin==="link-chart"?FRe:upe;default:return null}}function DRe(t,e){if(e.restrictedWebMapWriting){const i=NRe(e);return i==null||i.has(t.type)&&!uN(t)}return!0}function zRe(t,e){var i;if(e)if(uN(t)){const r=e2("featureCollection.layers",e),n=(i=r==null?void 0:r[0])==null?void 0:i.layerDefinition;n&&CK(t,n)}else t.type!=="group"&&CK(t,e)}function CK(t,e){"maxScale"in t&&(e.maxScale=zR(t.maxScale)??void 0),"minScale"in t&&(e.minScale=zR(t.minScale)??void 0)}function VRe(t,e){if(zRe(t,e),e&&(e.id=t.id,"blendMode"in t&&(e.blendMode=t.blendMode,e.blendMode==="normal"&&delete e.blendMode),e.opacity=zR(t.opacity)??void 0,e.title=t.title||"Layer",e.visibility=t.visible,"legendEnabled"in t&&t.type!=="wmts"))if(uN(t)){const i=e.featureCollection;i&&(i.showLegend=t.legendEnabled)}else e.showLegend=t.legendEnabled}function bU(t,e,i){if(!t.persistenceEnabled)return null;if(!("write"in t)||!t.write)return i!=null&&i.messages&&i.messages.push(new ie("layer:unsupported",`Layers (${t.title}, ${t.id}) of type '${t.declaredClass}' cannot be persisted`,{layer:t})),null;if(uN(t)&&!t.isTable)e=t.resourceInfo;else if(DRe(t,i)){const r={};return t.write(r,i)?r:null}return e!=null&&VRe(t,e=se(e)),e}var zE;let jRe=0,hl=zE=class extends ve.JSONSupportMixin(Mo){constructor(t){super(t),this.id=null,this.portalItem=null,this.spatialReference=null,this.style=null,this.thumbnailUrl=null,this.title="Basemap",this.id=Date.now().toString(16)+"-basemap-"+jRe++,this.baseLayers=new Ze,this.referenceLayers=new Ze;const e=r=>{r.parent&&r.parent!==this&&"remove"in r.parent&&r.parent.remove(r),r.parent=this,r.type==="elevation"&&Ie.getLogger(this).error(`Layer '${r.title}, id:${r.id}' of type '${r.type}' is not supported as a basemap layer and will therefore be ignored.`)},i=r=>{r.parent=null};this.addHandles([this.baseLayers.on("after-add",(r=>e(r.item))),this.referenceLayers.on("after-add",(r=>e(r.item))),this.baseLayers.on("after-remove",(r=>i(r.item))),this.referenceLayers.on("after-remove",(r=>i(r.item)))])}initialize(){this.when().catch((t=>{Ie.getLogger(this).error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,t)})),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const t=this.baseLayers.toArray();for(const i of t)i.destroy();const e=this.referenceLayers.toArray();for(const i of e)i.destroy();this.baseLayers.destroy(),this.referenceLayers.destroy(),this.portalItem=hr(this.portalItem)}normalizeCtorArgs(t){return t&&"resourceInfo"in t&&(this._set("resourceInfo",t.resourceInfo),delete(t={...t}).resourceInfo),t}set baseLayers(t){this._set("baseLayers",nm(t,this._get("baseLayers")))}_writeBaseLayers(t,e,i){const r=[];t&&(i={...i,layerContainerType:"basemap"},this.baseLayers.forEach((n=>{const s=bU(n,i.webmap?i.webmap.getLayerJSONFromResourceInfo(n):null,i);s!=null&&r.push(s)})),this.referenceLayers.forEach((n=>{const s=bU(n,i.webmap?i.webmap.getLayerJSONFromResourceInfo(n):null,i);s!=null&&(n.type!=="scene"&&(s.isReference=!0),r.push(s))}))),e.baseMapLayers=r}set referenceLayers(t){this._set("referenceLayers",nm(t,this._get("referenceLayers")))}writeTitle(t,e){e.title=t||"Basemap"}load(t){return this.addResolvingPromise(this._loadFromSource(t)),Promise.resolve(this)}loadAll(){return cN(this,(t=>{t(this.baseLayers,this.referenceLayers)}))}clone(){const t={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.map((e=>ER(e)?e.clone():e)),referenceLayers:this.referenceLayers.map((e=>ER(e)?e.clone():e))};return this.loaded&&(t.loadStatus="loaded"),new zE({resourceInfo:this.resourceInfo}).set(t)}read(t,e){this.resourceInfo||this._set("resourceInfo",{data:t,context:e}),super.read(t,e)}write(t,e){var i;return t=t||{},e!=null&&e.origin||(e={origin:"web-map",...e}),super.write(t,e),!this.loaded&&((i=this.resourceInfo)!=null&&i.data.baseMapLayers)&&(t.baseMapLayers=this.resourceInfo.data.baseMapLayers.map((r=>{const n=se(r);return n.url&&cp(n.url)&&(n.url=`https:${n.url}`),n.templateUrl&&cp(n.templateUrl)&&(n.templateUrl=`https:${n.templateUrl}`),n}))),t}async _loadFromSource(t){const{resourceInfo:e,portalItem:i,style:r}=this;Wi(t);const n=[];if(e){const s=e.context?e.context.url:null;if(n.push(this._loadLayersFromJSON(e.data,s,t)),e.data.id&&!e.data.title){const o=e.data.id;n.push(CRe(o).then((a=>{a&&this.read({title:a},e.context)})))}}else i?n.push(this._loadFromItem(i,t)):r&&n.push(this._loadFromStylesService(r,t));await Promise.all(n)}async _loadLayersFromJSON(t,e,i){var l,c;const r=(l=this.resourceInfo)==null?void 0:l.context,n=((c=this.portalItem)==null?void 0:c.portal)||(r==null?void 0:r.portal)||null,s=BRe[(r==null?void 0:r.origin)||""]??"web-map",{populateOperationalLayers:o}=await ye(async()=>{const{populateOperationalLayers:d}=await import("./layersCreator-CXTaOhJI.js");return{populateOperationalLayers:d}},__vite__mapDeps([140,141,142,143,144,145])),a=[];if(Wi(i),t.baseMapLayers&&Array.isArray(t.baseMapLayers)){const d={context:{...r,origin:s,url:e,portal:n,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},f=b=>s==="web-scene"&&b.layerType==="ArcGISSceneServiceLayer"||b.isReference,y=o(this.baseLayers,t.baseMapLayers.filter((b=>!f(b))),d);a.push(y);const g=o(this.referenceLayers,t.baseMapLayers.filter(f),d);a.push(g)}await Promise.allSettled(a)}async _loadFromItem(t,e){const i=await t.load(e),r=await i.fetchData("json",e),n=rn(t.itemUrl??"");return this._set("resourceInfo",{data:r.baseMap??{},context:{origin:URe[t.type||""]??"web-map",portal:t.portal||ze.getDefault(),url:n}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:r.spatialReference},this.resourceInfo.context),this.read({title:t.title,thumbnailUrl:t.thumbnailUrl},{origin:"portal-item",portal:t.portal||ze.getDefault(),url:n}),this._loadLayersFromJSON(this.resourceInfo.data,n,e)}async _loadFromStylesService(t,e){const i=t.serviceUrl.endsWith("/webmaps")?t.serviceUrl.slice(0,-8):t.serviceUrl,r=`${i}/styles/${t.id}/self`,n=`${i}/webmaps/${t.id}`,s=t.apiKey??Si.apiKeys.basemapStyles,[o,a]=await Promise.all([(await fi(r,{query:{token:s},signal:e==null?void 0:e.signal})).data,(await fi(n,{query:{language:t.languageParameter,places:t.places,worldview:t.worldview,token:s},signal:e==null?void 0:e.signal})).data]);this.thumbnailUrl??(this.thumbnailUrl=o.thumbnailUrl);const l=rn(n);if(this._set("resourceInfo",{data:a.baseMap??{},context:{origin:"web-map",url:l}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:a.spatialReference},this.resourceInfo.context),await this._loadLayersFromJSON(this.resourceInfo.data,l,e),s)for(const c of[...this.baseLayers,...this.referenceLayers])"apiKey"in c&&(c.apiKey=s)}static fromId(t){const e=mU[t];return e?e.itemId?new zE({portalItem:{id:e.itemId,portal:{url:"https://www.arcgis.com"}}}):zE.fromJSON(e,e.is3d?{origin:"web-scene",portal:new ze({url:"https://www.arcgis.com"})}:{origin:"web-map"}):null}};u([h({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(t,e,i,r){this._writeBaseLayers(t,e,r)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:Ze}},writer(t,e,i,r){this._writeBaseLayers(t,e,r)}}}}}})],hl.prototype,"baseLayers",null),u([h({type:String,json:{origins:{"web-scene":{write:!0}}}})],hl.prototype,"id",void 0),u([h({type:At})],hl.prototype,"portalItem",void 0),u([h()],hl.prototype,"referenceLayers",null),u([h({readOnly:!0})],hl.prototype,"resourceInfo",void 0),u([h({type:et})],hl.prototype,"spatialReference",void 0),u([h({type:MRe})],hl.prototype,"style",void 0),u([h()],hl.prototype,"thumbnailUrl",void 0),u([h({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],hl.prototype,"title",void 0),u([Ve("title")],hl.prototype,"writeTitle",null),hl=zE=u([V("esri.Basemap")],hl);const URe={"Web Scene":"web-scene","Web Map":"web-map","Link Chart":"link-chart"},BRe={"web-scene":"web-scene","web-map":"web-map","link-chart":"link-chart"},iC=hl,GRe=Object.freeze(Object.defineProperty({__proto__:null,default:iC},Symbol.toStringTag,{value:"Module"})),hO={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function dpe(t){return!!hO[t]||!!hO[t.toLowerCase()]}function pq(t){return hO[t]??hO[t.toLowerCase()]}function qRe(t){return[...pq(t)]}function Fz(t,e,i){i<0&&++i,i>1&&--i;const r=6*i;return r<1?t+(e-t)*r:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}function hpe(t,e,i,r=1){const n=(t%360+360)%360/360,s=i<=.5?i*(e+1):i+e-i*e,o=2*i-s;return[Math.round(255*Fz(o,s,n+1/3)),Math.round(255*Fz(o,s,n)),Math.round(255*Fz(o,s,n-1/3)),r]}function HRe(t){const e=t.length>5,i=e?8:4,r=(1<<i)-1,n=e?1:17,s=e?t.length===9:t.length===5;let o=+("0x"+t.slice(1));if(isNaN(o))return null;const a=[0,0,0,1];let l;return s&&(l=o&r,o>>=i,a[3]=n*l/255),l=o&r,o>>=i,a[2]=n*l,l=o&r,o>>=i,a[1]=n*l,l=o&r,o>>=i,a[0]=n*l,a}function ppe(t){if(t[0]!=="#"||isNaN(+`0x${t.slice(1)}`))return null;switch(t.length){case 4:case 5:{const e=parseInt(t.slice(1,2),16),i=parseInt(t.slice(2,3),16),r=parseInt(t.slice(3,4),16),n=t.length===4?15:parseInt(t.slice(4),16);return[e+16*e,i+16*i,r+16*r,(n+16*n)/255]}case 7:case 9:return[parseInt(t.slice(1,3),16),parseInt(t.slice(3,5),16),parseInt(t.slice(5,7),16),(t.length===7?255:parseInt(t.slice(7),16))/255];default:return null}}function fpe(t){const e=t.toLowerCase().match(/^(rgba?|hsla?)\(([\s.\-,%0-9]+)\)/);if(e){const i=e[2].split(/\s*,\s*/),r=e[1];if(r==="rgb"&&i.length===3||r==="rgba"&&i.length===4){const n=i[0];if(n.charAt(n.length-1)==="%"){const s=i.map((o=>2.56*parseFloat(o)));return i.length===4&&(s[3]=parseFloat(i[3])),MK(s)}return MK(i.map((s=>parseFloat(s))))}if(r==="hsl"&&i.length===3||r==="hsla"&&i.length===4)return hpe(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100,parseFloat(i[3]??"1"))}return null}function MK(t){return t[0]=Tx(t[0]),t[1]=Tx(t[1]),t[2]=Tx(t[2]),t[3]=t.length===4?ype(t[3]):1,t}function mpe(t){let e=dpe(t)?pq(t):null;return e??(e=fpe(t)),e??(e=ppe(t)),e}function $ft(t){const e=mpe(t);return e!=null?[e[0]/255,e[1]/255,e[2]/255,e[3]]:null}function ype(t){return gpe(t,0,1)}function Tx(t){return Math.round(gpe(t,0,255))}function gpe(t,e,i){return t=Number(t),isNaN(t)?i:t<e?e:t>i?i:t}const Tft=2.2;function _P(t){return to(oG(t),0,255)}function xP(t,e){const i=t.toString(16).padStart(2,"0");return e?i.slice(0,1):i}let lL=class Sa{static blendColors(e,i,r,n=new Sa){return n.r=Math.round(e.r+(i.r-e.r)*r),n.g=Math.round(e.g+(i.g-e.g)*r),n.b=Math.round(e.b+(i.b-e.b)*r),n.a=e.a+(i.a-e.a)*r,n._sanitize()}static fromRgb(e,i){const r=fpe(e);return r?Sa.fromArray(r,i):null}static fromHex(e,i=new Sa){const r=ppe(e);return r?Sa.fromArray(r,i):null}static fromArray(e,i=new Sa){return i._set(Number(e[0]),Number(e[1]),Number(e[2]),Number(e[3])),isNaN(i.a)&&(i.a=1),i._sanitize()}static fromString(e,i){const r=mpe(e);return r?Sa.fromArray(r,i):null}static fromJSON(e){return e!=null?new Sa([e[0],e[1],e[2],(e[3]??255)/255]):void 0}static toUnitRGB(e){return e!=null?[e.r/255,e.g/255,e.b/255]:null}static toUnitRGBA(e){return e!=null?[e.r/255,e.g/255,e.b/255,e.a!=null?e.a:1]:null}constructor(e){this.r=255,this.g=255,this.b=255,this.a=1,e&&this.setColor(e)}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(e){return typeof e=="string"?Sa.fromString(e,this):Array.isArray(e)?Sa.fromArray(e,this):(this._set(e.r??0,e.g??0,e.b??0,e.a??1),e instanceof Sa||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(e){const i=(e==null?void 0:e.capitalize)??!1,r=(e==null?void 0:e.digits)??6,n=r===3||r===4,s=r===4||r===8,o=`#${xP(this.r,n)}${xP(this.g,n)}${xP(this.b,n)}${s?xP(Math.round(255*this.a),n):""}`;return i?o.toUpperCase():o}toCss(e=!1){const i=this.r+", "+this.g+", "+this.b;return e?`rgba(${i}, ${this.a})`:`rgb(${i})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(e=Sa.AlphaMode.ALWAYS){const i=_P(this.r),r=_P(this.g),n=_P(this.b);return e===Sa.AlphaMode.ALWAYS||this.a!==1?[i,r,n,_P(255*this.a)]:[i,r,n]}clone(){return new Sa(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(e){return e!=null&&e.r===this.r&&e.g===this.g&&e.b===this.b&&e.a===this.a}_sanitize(){return this.r=Tx(this.r),this.g=Tx(this.g),this.b=Tx(this.b),this.a=ype(this.a),this}_set(e,i,r,n){this.r=e,this.g=i,this.b=r,this.a=n}};lL.prototype.declaredClass="esri.Color",(function(t){var e;(e=t.AlphaMode||(t.AlphaMode={}))[e.ALWAYS=0]="ALWAYS",e[e.UNLESS_OPAQUE=1]="UNLESS_OPAQUE"})(lL||(lL={}));const _e=lL;var wU;let cL=wU=class extends ve{constructor(t){super(t),this.type="none"}clone(){return new wU({type:this.type})}};u([at({none:"none",stayAbove:"stay-above"}),h({json:{write:{isRequired:!0}}})],cL.prototype,"type",void 0),cL=wU=u([V("esri.ground.NavigationConstraint")],cL);const WRe=Symbol("GroundInstance");function dN(t){const e=oG(100*(1-t));return Math.max(0,Math.min(e,100))}function iM(t){const e=1-t/100;return Math.max(0,Math.min(e,1))}var kK,_U,pae;let Wp=_U=(pae=class extends ve.JSONSupportMixin(Mo){constructor(t){super(t),this[kK]=!0,this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new Ze;const e=r=>{r.parent&&r.parent!==this&&"remove"in r.parent&&r.parent.remove(r),r.parent=this,r.type!=="elevation"&&r.type!=="base-elevation"&&Ie.getLogger(this).error(`Layer '${r.title}, id:${r.id}' of type '${r.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},i=r=>{r.parent=null};this.addHandles([this.layers.on("after-add",(r=>e(r.item))),this.layers.on("after-remove",(r=>i(r.item)))])}initialize(){this.when().catch((t=>{Tn(t)||Ie.getLogger(this).error("#load()","Failed to load ground",t)})),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const t=this.layers.removeAll();for(const e of t)hr(e);this.layers.destroy()}normalizeCtorArgs(t){return t&&"resourceInfo"in t&&(this._set("resourceInfo",t.resourceInfo),delete(t={...t}).resourceInfo),t}get layers(){return this._get("layers")}set layers(t){this._set("layers",nm(t,this._get("layers")))}writeLayers(t,e,i,r){const n=[];t&&(r={...r,layerContainerType:"ground"},t.forEach((s=>{if("write"in s){const o={};x$e(s)().write(o,r)&&n.push(o)}else r!=null&&r.messages&&r.messages.push(new ie("layer:unsupported",`Layers (${s.title}, ${s.id}) of type '${s.declaredClass}' cannot be persisted in the ground`,{layer:s}))}))),e.layers=n}load(t){return this.addResolvingPromise(this._loadFromSource(t)),Promise.resolve(this)}loadAll(){return cN(this,(t=>{t(this.layers)}))}async queryElevation(t,e){await this.load({signal:e==null?void 0:e.signal});const{ElevationQuery:i}=await ye(()=>import("./ElevationQuery-BSlruQ84.js"),[]);Wi(e);const r=new i,n=this.layers.filter(PK).toArray();return r.queryAll(n,t,e)}async createElevationSampler(t,e){await this.load({signal:e==null?void 0:e.signal});const{ElevationQuery:i}=await ye(()=>import("./ElevationQuery-BSlruQ84.js"),[]);Wi(e);const r=new i,n=this.layers.filter(PK).toArray();return r.createSamplerAll(n,t,e)}clone(){const t={opacity:this.opacity,surfaceColor:se(this.surfaceColor),navigationConstraint:se(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(t.loadStatus="loaded"),new _U({resourceInfo:this.resourceInfo}).set(t)}read(t,e){this.resourceInfo||this._set("resourceInfo",{data:t,context:e}),super.read(t,e)}_loadFromSource(t){const e=this.resourceInfo;return e?this._loadLayersFromJSON(e.data,e.context,t):Promise.resolve()}async _loadLayersFromJSON(t,e,i){const r=(e==null?void 0:e.origin)||"web-scene",n=(e==null?void 0:e.portal)||null,s=(e==null?void 0:e.url)||null,{populateOperationalLayers:o}=await ye(async()=>{const{populateOperationalLayers:l}=await import("./layersCreator-CXTaOhJI.js");return{populateOperationalLayers:l}},__vite__mapDeps([140,141,142,143,144,145]));Wi(i);const a=[];if(t.layers&&Array.isArray(t.layers)){const l={context:{origin:r,url:s,portal:n,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};a.push(o(this.layers,t.layers,l))}await Promise.allSettled(a)}},kK=WRe,pae);function ZRe(t){return t&&"createElevationSampler"in t}function PK(t){return t.type==="elevation"||ZRe(t)}u([h({json:{read:!1,write:{isRequired:!0}}})],Wp.prototype,"layers",null),u([Ve("layers")],Wp.prototype,"writeLayers",null),u([h({readOnly:!0})],Wp.prototype,"resourceInfo",void 0),u([h({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:si,read:{reader:iM,source:"transparency"},write:{writer:(t,e)=>{e.transparency=dN(t)},target:"transparency"}}})],Wp.prototype,"opacity",void 0),u([h({type:_e,json:{type:[si],write:(t,e)=>{e.surfaceColor=t.toJSON().slice(0,3)}}})],Wp.prototype,"surfaceColor",void 0),u([h({type:cL,json:{write:!0}})],Wp.prototype,"navigationConstraint",void 0),Wp=_U=u([V("esri.Ground")],Wp);const pO=Wp,JRe="randomUUID"in crypto;function V$(){if(JRe)return crypto.randomUUID();const t=crypto.getRandomValues(new Uint16Array(8));t[3]=4095&t[3]|16384,t[4]=16383&t[4]|32768;const e=i=>t[i].toString(16).padStart(4,"0");return e(0)+e(1)+"-"+e(2)+"-"+e(3)+"-"+e(4)+"-"+e(5)+e(6)+e(7)}function Eft(){return`{${V$().toUpperCase()}}`}function YRe(){return`{${V$()}}`}function XRe(t){const e=t.toUpperCase();return t[0]!=="{"?`{${e}}`:e}const y_={Base64:0,Hex:1,String:2,Raw:3},Ex=8,vpe=(1<<Ex)-1;function og(t,e){const i=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(i>>16)<<16|65535&i}function KRe(t){const e=[];for(let i=0,r=t.length*Ex;i<r;i+=Ex)e[i>>5]|=(t.charCodeAt(i/Ex)&vpe)<<i%32;return e}function QRe(t){const e=[];for(let i=0,r=32*t.length;i<r;i+=Ex)e.push(String.fromCharCode(t[i>>5]>>>i%32&vpe));return e.join("")}function eOe(t){const e="0123456789abcdef",i=[];for(let r=0,n=4*t.length;r<n;r++)i.push(e.charAt(t[r>>2]>>r%4*8+4&15)+e.charAt(t[r>>2]>>r%4*8&15));return i.join("")}function tOe(t){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=[];for(let n=0,s=4*t.length;n<s;n+=3){const o=(t[n>>2]>>n%4*8&255)<<16|(t[n+1>>2]>>(n+1)%4*8&255)<<8|t[n+2>>2]>>(n+2)%4*8&255;for(let a=0;a<4;a++)8*n+6*a>32*t.length?r.push("="):r.push(i.charAt(o>>6*(3-a)&63))}return r.join("")}function iOe(t,e){return t<<e|t>>>32-e}function hN(t,e,i,r,n,s){return og(iOe(og(og(e,t),og(r,s)),n),i)}function co(t,e,i,r,n,s,o){return hN(e&i|~e&r,t,e,n,s,o)}function uo(t,e,i,r,n,s,o){return hN(e&r|i&~r,t,e,n,s,o)}function ho(t,e,i,r,n,s,o){return hN(e^i^r,t,e,n,s,o)}function po(t,e,i,r,n,s,o){return hN(i^(e|~r),t,e,n,s,o)}function rOe(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;let i=1732584193,r=-271733879,n=-1732584194,s=271733878;for(let o=0;o<t.length;o+=16){const a=i,l=r,c=n,d=s;i=co(i,r,n,s,t[o],7,-680876936),s=co(s,i,r,n,t[o+1],12,-389564586),n=co(n,s,i,r,t[o+2],17,606105819),r=co(r,n,s,i,t[o+3],22,-1044525330),i=co(i,r,n,s,t[o+4],7,-176418897),s=co(s,i,r,n,t[o+5],12,1200080426),n=co(n,s,i,r,t[o+6],17,-1473231341),r=co(r,n,s,i,t[o+7],22,-45705983),i=co(i,r,n,s,t[o+8],7,1770035416),s=co(s,i,r,n,t[o+9],12,-1958414417),n=co(n,s,i,r,t[o+10],17,-42063),r=co(r,n,s,i,t[o+11],22,-1990404162),i=co(i,r,n,s,t[o+12],7,1804603682),s=co(s,i,r,n,t[o+13],12,-40341101),n=co(n,s,i,r,t[o+14],17,-1502002290),r=co(r,n,s,i,t[o+15],22,1236535329),i=uo(i,r,n,s,t[o+1],5,-165796510),s=uo(s,i,r,n,t[o+6],9,-1069501632),n=uo(n,s,i,r,t[o+11],14,643717713),r=uo(r,n,s,i,t[o],20,-373897302),i=uo(i,r,n,s,t[o+5],5,-701558691),s=uo(s,i,r,n,t[o+10],9,38016083),n=uo(n,s,i,r,t[o+15],14,-660478335),r=uo(r,n,s,i,t[o+4],20,-405537848),i=uo(i,r,n,s,t[o+9],5,568446438),s=uo(s,i,r,n,t[o+14],9,-1019803690),n=uo(n,s,i,r,t[o+3],14,-187363961),r=uo(r,n,s,i,t[o+8],20,1163531501),i=uo(i,r,n,s,t[o+13],5,-1444681467),s=uo(s,i,r,n,t[o+2],9,-51403784),n=uo(n,s,i,r,t[o+7],14,1735328473),r=uo(r,n,s,i,t[o+12],20,-1926607734),i=ho(i,r,n,s,t[o+5],4,-378558),s=ho(s,i,r,n,t[o+8],11,-2022574463),n=ho(n,s,i,r,t[o+11],16,1839030562),r=ho(r,n,s,i,t[o+14],23,-35309556),i=ho(i,r,n,s,t[o+1],4,-1530992060),s=ho(s,i,r,n,t[o+4],11,1272893353),n=ho(n,s,i,r,t[o+7],16,-155497632),r=ho(r,n,s,i,t[o+10],23,-1094730640),i=ho(i,r,n,s,t[o+13],4,681279174),s=ho(s,i,r,n,t[o],11,-358537222),n=ho(n,s,i,r,t[o+3],16,-722521979),r=ho(r,n,s,i,t[o+6],23,76029189),i=ho(i,r,n,s,t[o+9],4,-640364487),s=ho(s,i,r,n,t[o+12],11,-421815835),n=ho(n,s,i,r,t[o+15],16,530742520),r=ho(r,n,s,i,t[o+2],23,-995338651),i=po(i,r,n,s,t[o],6,-198630844),s=po(s,i,r,n,t[o+7],10,1126891415),n=po(n,s,i,r,t[o+14],15,-1416354905),r=po(r,n,s,i,t[o+5],21,-57434055),i=po(i,r,n,s,t[o+12],6,1700485571),s=po(s,i,r,n,t[o+3],10,-1894986606),n=po(n,s,i,r,t[o+10],15,-1051523),r=po(r,n,s,i,t[o+1],21,-2054922799),i=po(i,r,n,s,t[o+8],6,1873313359),s=po(s,i,r,n,t[o+15],10,-30611744),n=po(n,s,i,r,t[o+6],15,-1560198380),r=po(r,n,s,i,t[o+13],21,1309151649),i=po(i,r,n,s,t[o+4],6,-145523070),s=po(s,i,r,n,t[o+11],10,-1120210379),n=po(n,s,i,r,t[o+2],15,718787259),r=po(r,n,s,i,t[o+9],21,-343485551),i=og(i,a),r=og(r,l),n=og(n,c),s=og(s,d)}return[i,r,n,s]}function fq(t,e=y_.Hex){const i=e||y_.Base64,r=rOe(KRe(t),t.length*Ex);switch(i){case y_.Raw:return r;case y_.Hex:return eOe(r);case y_.String:return QRe(r);case y_.Base64:return tOe(r)}}function nOe(t){return t&&"getAtOrigin"in t&&"originOf"in t}function xU(t){return mq[sOe(t)]||aOe}function sOe(t){return t.type==="json"?"application/json":t.type==="blob"?t.blob.type:oOe(t.url)}function oOe(t){const e=Rce(t);return SU[e]||bpe}const mq={},bpe="text/plain",aOe=mq[bpe],SU={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip","bin.gz":"application/octet-stream"};for(const t in SU)mq[SU[t]]=t;function lOe(t){const e=(t==null?void 0:t.origins)??[void 0];return(i,r)=>{const n=cOe(t,i,r);for(const s of e){const o=aG(i,s,r);for(const a in n)o[a]=n[a]}}}function cOe(t,e,i){if((t==null?void 0:t.type)==="resource")return uOe(t,e,i);switch((t==null?void 0:t.type)??"other"){case"other":return{read:!0,write:!0};case"url":{const{read:r,write:n}=FIe;return{read:r,write:n}}}}function uOe(t,e,i){var n,s;const r=d2(e,i);return{type:String,read:(o,a,l)=>{const c=UF(o,a,l);return r.type===String?c:typeof r.type=="function"?new r.type({url:c}):void 0},write:{isRequired:(s=(n=r.json)==null?void 0:n.write)==null?void 0:s.isRequired,writer(o,a,l,c){if(!(c!=null&&c.resources))return typeof o=="string"?void(a[l]=tw(o,c)):void(a[l]=o.write({},c));const d=pOe(o),f=tw(d,{...c,verifyItemRelativeUrls:c!=null&&c.verifyItemRelativeUrls?{writtenUrls:c.verifyItemRelativeUrls.writtenUrls,rootPath:void 0}:void 0},WS.NO),y=r.type!==String&&(!nOe(this)||(c==null?void 0:c.origin)&&this.originIdOf(i)>Bf(c.origin)),g={object:this,propertyName:i,value:o,targetUrl:f,dest:a,targetPropertyName:l,context:c,params:t};c!=null&&c.portalItem&&f&&!Ha(f)?y&&(t!=null&&t.contentAddressed)?$U(g):y?dOe(g):hOe(g):c!=null&&c.portalItem&&(f==null||zce(f)!=null||A$(f)||y)?$U(g):a[l]=f}}}}function $U(t){var b;const{targetUrl:e,params:i,value:r,context:n,dest:s,targetPropertyName:o}=t;if(!n.portalItem)return;const a=Vce(e),l=_pe(r,e,n);if(i!=null&&i.contentAddressed&&l.type!=="json")return void((b=n.messages)==null?void 0:b.push(new ie("persistable:contentAddressingUnsupported",`Property "${o}" is trying to serializing a resource with content of type ${l.type} with content addressing. Content addressing is only supported for json resources.`,{content:l})));const c=i!=null&&i.contentAddressed&&l.type==="json"?fq(l.jsonString):(a==null?void 0:a.filename)??V$(),d=Pg((i==null?void 0:i.prefix)??(a==null?void 0:a.prefix),c),f=`${d}.${xU(l)}`;if(i!=null&&i.contentAddressed&&n.resources&&l.type==="json"){const _=n.resources.toKeep.find((({resource:x})=>x.path===f))??n.resources.toAdd.find((({resource:x})=>x.path===f));if(_)return void(s[o]=_.resource.itemRelativeUrl)}const y=n.portalItem.resourceFromPath(f);A$(e)&&n.resources&&n.resources.pendingOperations.push(SIe(e).then((_=>{y.path=`${d}.${xU({type:"blob",blob:_})}`,s[o]=y.itemRelativeUrl})).catch((()=>{})));const g=(i==null?void 0:i.compress)??!1;n.resources&&wpe({...t,resource:y,content:l,compress:g,updates:n.resources.toAdd}),s[o]=y.itemRelativeUrl}function dOe(t){const{context:e,targetUrl:i,params:r,value:n,dest:s,targetPropertyName:o}=t;if(!e.portalItem)return;const a=e.portalItem.resourceFromPath(i),l=_pe(n,i,e),c=xU(l),d=Rce(a.path),f=(r==null?void 0:r.compress)??!1;c===d?(e.resources&&wpe({...t,resource:a,content:l,compress:f,updates:e.resources.toUpdate}),s[o]=i):$U(t)}function hOe({context:t,targetUrl:e,dest:i,targetPropertyName:r}){t.portalItem&&t.resources&&(t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(e),compress:!1}),i[r]=e)}function wpe({object:t,propertyName:e,updates:i,resource:r,content:n,compress:s}){const o=a=>{fOe(t,e,a)};i.push({resource:r,content:n,compress:s,finish:o})}function _pe(t,e,i){return typeof t=="string"?{type:"url",url:e}:{type:"json",jsonString:JSON.stringify(t.toJSON(i))}}function pOe(t){return t==null?null:typeof t=="string"?t:t.url}function fOe(t,e,i){typeof t[e]=="string"?t[e]=i.url:t[e].url=i.url}let uL=class extends bt.ClonableMixin(ve){constructor(e){super(e),this.color=null}};u([h({type:_e,json:{type:[si],write:!0}})],uL.prototype,"color",void 0),uL=u([V("esri.effects.FocusAreaOutline")],uL);const mOe=uL;var dL;let TU=dL=class extends ve.JSONSupportMixin(Ze.ofType(br)){constructor(t){super(t)}clone(){return new dL(this.items.map((t=>t.clone())))}write(t,e){return this.toJSON(e)}toJSON(t){var i;const e=(i=t==null?void 0:t.layer)==null?void 0:i.spatialReference;return e?this.toArray().map((r=>{var s;if(!e.equals(r.spatialReference)){if(!rd(r.spatialReference,e))return(s=t==null?void 0:t.messages)==null||s.push(new Dl("scenefilter:unsupported","Scene filters with incompatible spatial references are not supported",{modification:this,spatialReference:t.layer.spatialReference,context:t})),null;const o=new br;Ahe(r,o,e),r=o}const n=r.toJSON(t);return delete n.spatialReference,n})).filter((r=>r!=null)):this.toArray().map((r=>r.toJSON(t)))}static fromJSON(t,e){const i=new dL;return t.forEach((r=>i.add(br.fromJSON(r,e)))),i}};TU=dL=u([V("esri.layers.support.PolygonCollection")],TU);const rC=TU;let Zp=class extends ve.JSONSupportMixin(bt){constructor(e){super(e),this.id=`focusarea-${V$()}`,this.title=null,this.enabled=!0,this.outline=null,this.geometries=new rC}readGeometries(e,i,r){var n,s;Array.isArray(e)?this.geometries=rC.fromJSON(e,r):(s=(n=r.hooks)==null?void 0:n.onAfterLoad)==null||s.call(n,(()=>this._loadGeometries(rm(e,r),r)))}async _loadGeometries(e,i){const r=await fi(e,{responseType:"json"});this.geometries=rC.fromJSON(r.data,i)}};u([h({type:String,nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}}),h()],Zp.prototype,"id",void 0),u([h({type:String,json:{write:!0}})],Zp.prototype,"title",void 0),u([h({type:Boolean,nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}})],Zp.prototype,"enabled",void 0),u([h({type:mOe,json:{write:!0}})],Zp.prototype,"outline",void 0),u([h({type:rC,nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}},clonable:t=>new rC(t.items.map((e=>e.clone())))}),lOe({origins:["web-scene","portal-item"],type:"resource",prefix:"geometries",contentAddressed:!0})],Zp.prototype,"geometries",void 0),u([De(["web-scene","portal-item"],"geometries")],Zp.prototype,"readGeometries",null),Zp=u([V("esri.effects.FocusArea")],Zp);const yOe=Zp;let VE=class extends ve.JSONSupportMixin(bt){constructor(e){super(e),this.areas=new Ze,this.style="bright"}};u([h({type:Ze.ofType(yOe),nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}},clonable:t=>new Ze(t.items.map((e=>e.clone())))})],VE.prototype,"areas",void 0),u([h({type:["bright","dark"],nonNullable:!0,json:{write:!0}})],VE.prototype,"style",void 0),VE=u([V("esri.effects.FocusAreas")],VE);const xpe=VE;function gOe(t){return typeof t=="object"&&t!=null&&"loaded"in t&&t.loaded===!0&&"type"in t}function vOe(t){var e,i;return!(!gOe(t)||!((i=(e=cpe(t))==null?void 0:e.operations)!=null&&i.supportsEditing)||"editingEnabled"in t&&!LRe(t)||dq(t))}const bOe=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,wOe="screenUtils.toPt: input not recognized!",Spe=96;function pi(t){return t?t/72*Spe:0}function ji(t){return t?72*t/Spe:0}function Ti(t){if(typeof t=="string"){const e=t.match(bOe);if(e){const i=Number(e[1]),r=e[3]&&e[3].toLowerCase(),n=t.charAt(0)==="-",s=r==="px"?ji(i):i;return n?-s:s}return console.warn(wOe),null}return t}function Rs(t=0,e=0){return{x:t,y:e}}function kft(t){return t?Rs(t.x,t.y):null}function Pft(t=0,e=0){return[t,e]}function Aft(t=0,e=0,i=0){return[t,e,i]}function Lft(t){return t}function Rft(t){return t}function Oft(t){return t}function Fft(t,e){return e?(e[0]=t.x,e[1]=t.y,e.length>2&&(e[2]=0),e):[t.x,t.y]}function pN(){const t=new Float32Array(16);return t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function _Oe(t){const e=new Float32Array(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function xOe(t,e,i,r,n,s,o,a,l,c,d,f,y,g,b,_){const x=new Float32Array(16);return x[0]=t,x[1]=e,x[2]=i,x[3]=r,x[4]=n,x[5]=s,x[6]=o,x[7]=a,x[8]=l,x[9]=c,x[10]=d,x[11]=f,x[12]=y,x[13]=g,x[14]=b,x[15]=_,x}const SOe=pN();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:SOe,clone:_Oe,create:pN,fromValues:xOe},Symbol.toStringTag,{value:"Module"}));let yq=1e-6;function la(){return yq}function $Oe(t){yq=t}const fN=Math.random,TOe=Math.PI/180,EOe=180/Math.PI;function gq(t){return t*TOe}function IOe(t){return t*EOe}function COe(t,e){return Math.abs(t-e)<=yq*Math.max(1,Math.abs(t),Math.abs(e))}Object.freeze(Object.defineProperty({__proto__:null,RANDOM:fN,equals:COe,getEpsilon:la,setEpsilon:$Oe,toDegree:IOe,toRadian:gq},Symbol.toStringTag,{value:"Module"}));function $pe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Hg(t,e,i,r,n,s,o,a,l,c,d,f,y,g,b,_,x){return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t[4]=s,t[5]=o,t[6]=a,t[7]=l,t[8]=c,t[9]=d,t[10]=f,t[11]=y,t[12]=g,t[13]=b,t[14]=_,t[15]=x,t}function mN(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Wg(t,e){if(t===e){const i=e[1],r=e[2],n=e[3],s=e[6],o=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=i,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=s,t[11]=e[14],t[12]=n,t[13]=o,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function MOe(t,e){return Tpe(t,e)||mN(t),t}function Tpe(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],d=e[8],f=e[9],y=e[10],g=e[11],b=e[12],_=e[13],x=e[14],E=e[15],C=i*a-r*o,k=i*l-n*o,O=i*c-s*o,D=r*l-n*a,B=r*c-s*a,j=n*c-s*l,Z=d*_-f*b,X=d*x-y*b,ee=d*E-g*b,pe=f*x-y*_,he=f*E-g*_,ne=y*E-g*x;let re=C*ne-k*he+O*pe+D*ee-B*X+j*Z;return re?(re=1/re,t[0]=(a*ne-l*he+c*pe)*re,t[1]=(n*he-r*ne-s*pe)*re,t[2]=(_*j-x*B+E*D)*re,t[3]=(y*B-f*j-g*D)*re,t[4]=(l*ee-o*ne-c*X)*re,t[5]=(i*ne-n*ee+s*X)*re,t[6]=(x*O-b*j-E*k)*re,t[7]=(d*j-y*O+g*k)*re,t[8]=(o*he-a*ee+c*Z)*re,t[9]=(r*ee-i*he-s*Z)*re,t[10]=(b*B-_*O+E*C)*re,t[11]=(f*O-d*B-g*C)*re,t[12]=(a*X-o*pe-l*Z)*re,t[13]=(i*pe-r*X+n*Z)*re,t[14]=(_*k-b*D-x*C)*re,t[15]=(d*D-f*k+y*C)*re,t):null}function kOe(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],d=e[8],f=e[9],y=e[10],g=e[11],b=e[12],_=e[13],x=e[14],E=e[15];return t[0]=a*(y*E-g*x)-f*(l*E-c*x)+_*(l*g-c*y),t[1]=-(r*(y*E-g*x)-f*(n*E-s*x)+_*(n*g-s*y)),t[2]=r*(l*E-c*x)-a*(n*E-s*x)+_*(n*c-s*l),t[3]=-(r*(l*g-c*y)-a*(n*g-s*y)+f*(n*c-s*l)),t[4]=-(o*(y*E-g*x)-d*(l*E-c*x)+b*(l*g-c*y)),t[5]=i*(y*E-g*x)-d*(n*E-s*x)+b*(n*g-s*y),t[6]=-(i*(l*E-c*x)-o*(n*E-s*x)+b*(n*c-s*l)),t[7]=i*(l*g-c*y)-o*(n*g-s*y)+d*(n*c-s*l),t[8]=o*(f*E-g*_)-d*(a*E-c*_)+b*(a*g-c*f),t[9]=-(i*(f*E-g*_)-d*(r*E-s*_)+b*(r*g-s*f)),t[10]=i*(a*E-c*_)-o*(r*E-s*_)+b*(r*c-s*a),t[11]=-(i*(a*g-c*f)-o*(r*g-s*f)+d*(r*c-s*a)),t[12]=-(o*(f*x-y*_)-d*(a*x-l*_)+b*(a*y-l*f)),t[13]=i*(f*x-y*_)-d*(r*x-n*_)+b*(r*y-n*f),t[14]=-(i*(a*x-l*_)-o*(r*x-n*_)+b*(r*l-n*a)),t[15]=i*(a*y-l*f)-o*(r*y-n*f)+d*(r*l-n*a),t}function POe(t){const e=t[0],i=t[1],r=t[2],n=t[3],s=t[4],o=t[5],a=t[6],l=t[7],c=t[8],d=t[9],f=t[10],y=t[11],g=t[12],b=t[13],_=t[14],x=t[15];return(e*o-i*s)*(f*x-y*_)-(e*a-r*s)*(d*x-y*b)+(e*l-n*s)*(d*_-f*b)+(i*a-r*o)*(c*x-y*g)-(i*l-n*o)*(c*_-f*g)+(r*l-n*a)*(c*b-d*g)}function Epe(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],d=e[7],f=e[8],y=e[9],g=e[10],b=e[11],_=e[12],x=e[13],E=e[14],C=e[15];let k=i[0],O=i[1],D=i[2],B=i[3];return t[0]=k*r+O*a+D*f+B*_,t[1]=k*n+O*l+D*y+B*x,t[2]=k*s+O*c+D*g+B*E,t[3]=k*o+O*d+D*b+B*C,k=i[4],O=i[5],D=i[6],B=i[7],t[4]=k*r+O*a+D*f+B*_,t[5]=k*n+O*l+D*y+B*x,t[6]=k*s+O*c+D*g+B*E,t[7]=k*o+O*d+D*b+B*C,k=i[8],O=i[9],D=i[10],B=i[11],t[8]=k*r+O*a+D*f+B*_,t[9]=k*n+O*l+D*y+B*x,t[10]=k*s+O*c+D*g+B*E,t[11]=k*o+O*d+D*b+B*C,k=i[12],O=i[13],D=i[14],B=i[15],t[12]=k*r+O*a+D*f+B*_,t[13]=k*n+O*l+D*y+B*x,t[14]=k*s+O*c+D*g+B*E,t[15]=k*o+O*d+D*b+B*C,t}function AOe(t,e,i){const r=i[0],n=i[1],s=i[2];if(e===t)t[12]=e[0]*r+e[4]*n+e[8]*s+e[12],t[13]=e[1]*r+e[5]*n+e[9]*s+e[13],t[14]=e[2]*r+e[6]*n+e[10]*s+e[14],t[15]=e[3]*r+e[7]*n+e[11]*s+e[15];else{const o=e[0],a=e[1],l=e[2],c=e[3],d=e[4],f=e[5],y=e[6],g=e[7],b=e[8],_=e[9],x=e[10],E=e[11];t[0]=o,t[1]=a,t[2]=l,t[3]=c,t[4]=d,t[5]=f,t[6]=y,t[7]=g,t[8]=b,t[9]=_,t[10]=x,t[11]=E,t[12]=o*r+d*n+b*s+e[12],t[13]=a*r+f*n+_*s+e[13],t[14]=l*r+y*n+x*s+e[14],t[15]=c*r+g*n+E*s+e[15]}return t}function LOe(t,e,i){const r=i[0],n=i[1],s=i[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function ROe(t,e,i,r){let n=r[0],s=r[1],o=r[2],a=Math.sqrt(n*n+s*s+o*o);if(a<=la())return void $pe(t,e);a=1/a,n*=a,s*=a,o*=a;const l=Math.sin(i),c=Math.cos(i),d=1-c,f=e[0],y=e[1],g=e[2],b=e[3],_=e[4],x=e[5],E=e[6],C=e[7],k=e[8],O=e[9],D=e[10],B=e[11],j=n*n*d+c,Z=s*n*d+o*l,X=o*n*d-s*l,ee=n*s*d-o*l,pe=s*s*d+c,he=o*s*d+n*l,ne=n*o*d+s*l,re=s*o*d-n*l,ke=o*o*d+c;t[0]=f*j+_*Z+k*X,t[1]=y*j+x*Z+O*X,t[2]=g*j+E*Z+D*X,t[3]=b*j+C*Z+B*X,t[4]=f*ee+_*pe+k*he,t[5]=y*ee+x*pe+O*he,t[6]=g*ee+E*pe+D*he,t[7]=b*ee+C*pe+B*he,t[8]=f*ne+_*re+k*ke,t[9]=y*ne+x*re+O*ke,t[10]=g*ne+E*re+D*ke,t[11]=b*ne+C*re+B*ke,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15])}function OOe(t,e,i){const r=Math.sin(i),n=Math.cos(i),s=e[4],o=e[5],a=e[6],l=e[7],c=e[8],d=e[9],f=e[10],y=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*n+c*r,t[5]=o*n+d*r,t[6]=a*n+f*r,t[7]=l*n+y*r,t[8]=c*n-s*r,t[9]=d*n-o*r,t[10]=f*n-a*r,t[11]=y*n-l*r,t}function FOe(t,e,i){const r=Math.sin(i),n=Math.cos(i),s=e[0],o=e[1],a=e[2],l=e[3],c=e[8],d=e[9],f=e[10],y=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*n-c*r,t[1]=o*n-d*r,t[2]=a*n-f*r,t[3]=l*n-y*r,t[8]=s*r+c*n,t[9]=o*r+d*n,t[10]=a*r+f*n,t[11]=l*r+y*n,t}function NOe(t,e,i){const r=Math.sin(i),n=Math.cos(i),s=e[0],o=e[1],a=e[2],l=e[3],c=e[4],d=e[5],f=e[6],y=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*n+c*r,t[1]=o*n+d*r,t[2]=a*n+f*r,t[3]=l*n+y*r,t[4]=c*n-s*r,t[5]=d*n-o*r,t[6]=f*n-a*r,t[7]=y*n-l*r,t}function DOe(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function zOe(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function VOe(t,e,i){if(e===0)return mN(t);let r=i[0],n=i[1],s=i[2],o=Math.sqrt(r*r+n*n+s*s);if(o<=la())return null;o=1/o,r*=o,n*=o,s*=o;const a=Math.sin(e),l=Math.cos(e),c=1-l;return t[0]=r*r*c+l,t[1]=n*r*c+s*a,t[2]=s*r*c-n*a,t[3]=0,t[4]=r*n*c-s*a,t[5]=n*n*c+l,t[6]=s*n*c+r*a,t[7]=0,t[8]=r*s*c+n*a,t[9]=n*s*c-r*a,t[10]=s*s*c+l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function jOe(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=i,t[7]=0,t[8]=0,t[9]=-i,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function UOe(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function BOe(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=i,t[2]=0,t[3]=0,t[4]=-i,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Ipe(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3],a=r+r,l=n+n,c=s+s,d=r*a,f=r*l,y=r*c,g=n*l,b=n*c,_=s*c,x=o*a,E=o*l,C=o*c;return t[0]=1-(g+_),t[1]=f+C,t[2]=y-E,t[3]=0,t[4]=f-C,t[5]=1-(d+_),t[6]=b+x,t[7]=0,t[8]=y+E,t[9]=b-x,t[10]=1-(d+g),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}function GOe(t,e){const i=qOe,r=-e[0],n=-e[1],s=-e[2],o=e[3],a=e[4],l=e[5],c=e[6],d=e[7],f=r*r+n*n+s*s+o*o;return f>0?(i[0]=2*(a*o+d*r+l*s-c*n)/f,i[1]=2*(l*o+d*n+c*r-a*s)/f,i[2]=2*(c*o+d*s+a*n-l*r)/f):(i[0]=2*(a*o+d*r+l*s-c*n),i[1]=2*(l*o+d*n+c*r-a*s),i[2]=2*(c*o+d*s+a*n-l*r)),Ipe(t,e,i),t}const qOe=Gg();function HOe(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function WOe(t,e){const i=e[0],r=e[1],n=e[2],s=e[4],o=e[5],a=e[6],l=e[8],c=e[9],d=e[10];return t[0]=Math.sqrt(i*i+r*r+n*n),t[1]=Math.sqrt(s*s+o*o+a*a),t[2]=Math.sqrt(l*l+c*c+d*d),t}function ZOe(t,e){const i=e[0]+e[5]+e[10];let r=0;return i>0?(r=2*Math.sqrt(i+1),t[3]=.25*r,t[0]=(e[6]-e[9])/r,t[1]=(e[8]-e[2])/r,t[2]=(e[1]-e[4])/r):e[0]>e[5]&&e[0]>e[10]?(r=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/r,t[0]=.25*r,t[1]=(e[1]+e[4])/r,t[2]=(e[8]+e[2])/r):e[5]>e[10]?(r=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/r,t[0]=(e[1]+e[4])/r,t[1]=.25*r,t[2]=(e[6]+e[9])/r):(r=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/r,t[0]=(e[8]+e[2])/r,t[1]=(e[6]+e[9])/r,t[2]=.25*r),t}function JOe(t,e,i,r){const n=e[0],s=e[1],o=e[2],a=e[3],l=n+n,c=s+s,d=o+o,f=n*l,y=n*c,g=n*d,b=s*c,_=s*d,x=o*d,E=a*l,C=a*c,k=a*d,O=r[0],D=r[1],B=r[2];return t[0]=(1-(b+x))*O,t[1]=(y+k)*O,t[2]=(g-C)*O,t[3]=0,t[4]=(y-k)*D,t[5]=(1-(f+x))*D,t[6]=(_+E)*D,t[7]=0,t[8]=(g+C)*B,t[9]=(_-E)*B,t[10]=(1-(f+b))*B,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}function YOe(t,e,i,r,n){const s=e[0],o=e[1],a=e[2],l=e[3],c=s+s,d=o+o,f=a+a,y=s*c,g=s*d,b=s*f,_=o*d,x=o*f,E=a*f,C=l*c,k=l*d,O=l*f,D=r[0],B=r[1],j=r[2],Z=n[0],X=n[1],ee=n[2],pe=(1-(_+E))*D,he=(g+O)*D,ne=(b-k)*D,re=(g-O)*B,ke=(1-(y+E))*B,Fe=(x+C)*B,Ae=(b+k)*j,we=(x-C)*j,Re=(1-(y+_))*j;return t[0]=pe,t[1]=he,t[2]=ne,t[3]=0,t[4]=re,t[5]=ke,t[6]=Fe,t[7]=0,t[8]=Ae,t[9]=we,t[10]=Re,t[11]=0,t[12]=i[0]+Z-(pe*Z+re*X+Ae*ee),t[13]=i[1]+X-(he*Z+ke*X+we*ee),t[14]=i[2]+ee-(ne*Z+Fe*X+Re*ee),t[15]=1,t}function XOe(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],o=i+i,a=r+r,l=n+n,c=i*o,d=r*o,f=r*a,y=n*o,g=n*a,b=n*l,_=s*o,x=s*a,E=s*l;return t[0]=1-f-b,t[1]=d+E,t[2]=y-x,t[3]=0,t[4]=d-E,t[5]=1-c-b,t[6]=g+_,t[7]=0,t[8]=y+x,t[9]=g-_,t[10]=1-c-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function KOe(t,e,i,r,n,s,o){const a=1/(i-e),l=1/(n-r),c=1/(s-o);return t[0]=2*s*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*s*l,t[6]=0,t[7]=0,t[8]=(i+e)*a,t[9]=(n+r)*l,t[10]=(o+s)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*s*2*c,t[15]=0,t}function QOe(t,e,i,r,n){const s=1/Math.tan(e/2);let o;return t[0]=s/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,n!=null&&n!==1/0?(o=1/(r-n),t[10]=(n+r)*o,t[14]=2*n*r*o):(t[10]=-1,t[14]=-2*r),t}function e3e(t,e,i,r){const n=Math.tan(e.upDegrees*Math.PI/180),s=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),a=Math.tan(e.rightDegrees*Math.PI/180),l=2/(o+a),c=2/(n+s);return t[0]=l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(o-a)*l*.5,t[9]=(n-s)*c*.5,t[10]=r/(i-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*i/(i-r),t[15]=0,t}function t3e(t,e,i,r,n,s,o){const a=1/(e-i),l=1/(r-n),c=1/(s-o);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+i)*a,t[13]=(n+r)*l,t[14]=(o+s)*c,t[15]=1,t}function i3e(t,e,i,r){const n=e[0],s=e[1],o=e[2];let a=n-i[0],l=s-i[1],c=o-i[2];const d=la();if(Math.abs(a)<d&&Math.abs(l)<d&&Math.abs(c)<d)return void mN(t);let f=1/Math.sqrt(a*a+l*l+c*c);a*=f,l*=f,c*=f;const y=r[0],g=r[1],b=r[2];let _=g*c-b*l,x=b*a-y*c,E=y*l-g*a;f=Math.sqrt(_*_+x*x+E*E),f?(f=1/f,_*=f,x*=f,E*=f):(_=0,x=0,E=0);let C=l*E-c*x,k=c*_-a*E,O=a*x-l*_;f=Math.sqrt(C*C+k*k+O*O),f?(f=1/f,C*=f,k*=f,O*=f):(C=0,k=0,O=0),t[0]=_,t[1]=C,t[2]=a,t[3]=0,t[4]=x,t[5]=k,t[6]=l,t[7]=0,t[8]=E,t[9]=O,t[10]=c,t[11]=0,t[12]=-(_*n+x*s+E*o),t[13]=-(C*n+k*s+O*o),t[14]=-(a*n+l*s+c*o),t[15]=1}function r3e(t,e,i,r){const n=e[0],s=e[1],o=e[2],a=r[0],l=r[1],c=r[2];let d=n-i[0],f=s-i[1],y=o-i[2],g=d*d+f*f+y*y;g>0&&(g=1/Math.sqrt(g),d*=g,f*=g,y*=g);let b=l*y-c*f,_=c*d-a*y,x=a*f-l*d;return g=b*b+_*_+x*x,g>0&&(g=1/Math.sqrt(g),b*=g,_*=g,x*=g),t[0]=b,t[1]=_,t[2]=x,t[3]=0,t[4]=f*x-y*_,t[5]=y*b-d*x,t[6]=d*_-f*b,t[7]=0,t[8]=d,t[9]=f,t[10]=y,t[11]=0,t[12]=n,t[13]=s,t[14]=o,t[15]=1,t}function n3e(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function s3e(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2+t[9]**2+t[10]**2+t[11]**2+t[12]**2+t[13]**2+t[14]**2+t[15]**2)}function o3e(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t[9]=e[9]+i[9],t[10]=e[10]+i[10],t[11]=e[11]+i[11],t[12]=e[12]+i[12],t[13]=e[13]+i[13],t[14]=e[14]+i[14],t[15]=e[15]+i[15],t}function Cpe(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t[9]=e[9]-i[9],t[10]=e[10]-i[10],t[11]=e[11]-i[11],t[12]=e[12]-i[12],t[13]=e[13]-i[13],t[14]=e[14]-i[14],t[15]=e[15]-i[15],t}function a3e(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12]*i,t[13]=e[13]*i,t[14]=e[14]*i,t[15]=e[15]*i,t}function l3e(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t[4]=e[4]+i[4]*r,t[5]=e[5]+i[5]*r,t[6]=e[6]+i[6]*r,t[7]=e[7]+i[7]*r,t[8]=e[8]+i[8]*r,t[9]=e[9]+i[9]*r,t[10]=e[10]+i[10]*r,t[11]=e[11]+i[11]*r,t[12]=e[12]+i[12]*r,t[13]=e[13]+i[13]*r,t[14]=e[14]+i[14]*r,t[15]=e[15]+i[15]*r,t}function c3e(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function u3e(t,e){if(t===e)return!0;const i=t[0],r=t[1],n=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],d=t[8],f=t[9],y=t[10],g=t[11],b=t[12],_=t[13],x=t[14],E=t[15],C=e[0],k=e[1],O=e[2],D=e[3],B=e[4],j=e[5],Z=e[6],X=e[7],ee=e[8],pe=e[9],he=e[10],ne=e[11],re=e[12],ke=e[13],Fe=e[14],Ae=e[15],we=la();return Math.abs(i-C)<=we*Math.max(1,Math.abs(i),Math.abs(C))&&Math.abs(r-k)<=we*Math.max(1,Math.abs(r),Math.abs(k))&&Math.abs(n-O)<=we*Math.max(1,Math.abs(n),Math.abs(O))&&Math.abs(s-D)<=we*Math.max(1,Math.abs(s),Math.abs(D))&&Math.abs(o-B)<=we*Math.max(1,Math.abs(o),Math.abs(B))&&Math.abs(a-j)<=we*Math.max(1,Math.abs(a),Math.abs(j))&&Math.abs(l-Z)<=we*Math.max(1,Math.abs(l),Math.abs(Z))&&Math.abs(c-X)<=we*Math.max(1,Math.abs(c),Math.abs(X))&&Math.abs(d-ee)<=we*Math.max(1,Math.abs(d),Math.abs(ee))&&Math.abs(f-pe)<=we*Math.max(1,Math.abs(f),Math.abs(pe))&&Math.abs(y-he)<=we*Math.max(1,Math.abs(y),Math.abs(he))&&Math.abs(g-ne)<=we*Math.max(1,Math.abs(g),Math.abs(ne))&&Math.abs(b-re)<=we*Math.max(1,Math.abs(b),Math.abs(re))&&Math.abs(_-ke)<=we*Math.max(1,Math.abs(_),Math.abs(ke))&&Math.abs(x-Fe)<=we*Math.max(1,Math.abs(x),Math.abs(Fe))&&Math.abs(E-Ae)<=we*Math.max(1,Math.abs(E),Math.abs(Ae))}function d3e(t){const e=la(),i=t[0],r=t[1],n=t[2],s=t[4],o=t[5],a=t[6],l=t[8],c=t[9],d=t[10];return Math.abs(1-(i*i+s*s+l*l))<=e&&Math.abs(1-(r*r+o*o+c*c))<=e&&Math.abs(1-(n*n+a*a+d*d))<=e}function h3e(t){return t[0]===1&&t[1]===0&&t[2]===0&&t[4]===0&&t[5]===1&&t[6]===0&&t[8]===0&&t[9]===0&&t[10]===1}const p3e=Epe,f3e=Cpe;Object.freeze(Object.defineProperty({__proto__:null,add:o3e,adjoint:kOe,copy:$pe,determinant:POe,equals:u3e,exactEquals:c3e,frob:s3e,fromQuat:XOe,fromQuat2:GOe,fromRotation:VOe,fromRotationTranslation:Ipe,fromRotationTranslationScale:JOe,fromRotationTranslationScaleOrigin:YOe,fromScaling:zOe,fromTranslation:DOe,fromXRotation:jOe,fromYRotation:UOe,fromZRotation:BOe,frustum:KOe,getRotation:ZOe,getScale:WOe,getTranslation:HOe,hasIdentityRotation:h3e,identity:mN,invert:Tpe,invertOrIdentity:MOe,isOrthoNormal:d3e,lookAt:i3e,mul:p3e,multiply:Epe,multiplyScalar:a3e,multiplyScalarAndAdd:l3e,ortho:t3e,perspective:QOe,perspectiveFromFieldOfView:e3e,rotate:ROe,rotateX:OOe,rotateY:FOe,rotateZ:NOe,scale:LOe,set:Hg,str:n3e,sub:f3e,subtract:Cpe,targetTo:r3e,translate:AOe,transpose:Wg},Symbol.toStringTag,{value:"Module"}));const m3e=(t,e)=>{const i=Hg(t,e,0,0,0,0,e,0,0,0,0,e,0,0,0,0,1);return Wg(i,i)},y3e=(t,e)=>{const i=Hg(t,e,0,0,.5-.5*e,0,e,0,.5-.5*e,0,0,e,.5-.5*e,0,0,0,1);return Wg(i,i)},g3e=(t,e)=>{const i=1-e,r=Hg(t,.2126+.7874*i,.7152-.7152*i,.0722-.0722*i,0,.2126-.2126*i,.7152+.2848*i,.0722-.0722*i,0,.2126-.2126*i,.7152-.7152*i,.0722+.9278*i,0,0,0,0,1);return Wg(r,r)},v3e=(t,e)=>{const i=Math.sin(e*Math.PI/180),r=Math.cos(e*Math.PI/180),n=Hg(t,.213+.787*r-.213*i,.715-.715*r-.715*i,.072-.072*r+.928*i,0,.213-.213*r+.143*i,.715+.285*r+.14*i,.072-.072*r-.283*i,0,.213-.213*r-.787*i,.715-.715*r+.715*i,.072+.928*r+.072*i,0,0,0,0,1);return Wg(n,n)},b3e=(t,e)=>{const i=1-2*e,r=Hg(t,i,0,0,e,0,i,0,e,0,0,i,e,0,0,0,1);return Wg(r,r)},w3e=(t,e)=>{const i=Hg(t,.213+.787*e,.715-.715*e,.072-.072*e,0,.213-.213*e,.715+.285*e,.072-.072*e,0,.213-.213*e,.715-.715*e,.072+.928*e,0,0,0,0,1);return Wg(i,i)},_3e=(t,e)=>{const i=1-e,r=Hg(t,.393+.607*i,.769-.769*i,.189-.189*i,0,.349-.349*i,.686+.314*i,.168-.168*i,0,.272-.272*i,.534-.534*i,.131+.869*i,0,0,0,0,1);return Wg(r,r)};let Mpe=class kpe{constructor(e,i,r){this.strength=e,this.radius=i,this.threshold=r,this.type="bloom"}interpolate(e,i,r){this.strength=Ua(e.strength,i.strength,r),this.radius=Ua(e.radius,i.radius,r),this.threshold=Ua(e.threshold,i.threshold,r)}clone(){return new kpe(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:nC(this.radius),strength:this.strength,threshold:this.threshold}}},Ppe=class Ape{constructor(e){this.radius=e,this.type="blur"}interpolate(e,i,r){this.radius=Math.round(Ua(e.radius,i.radius,r))}clone(){return new Ape(this.radius)}toJSON(){return{type:"blur",radius:nC(this.radius)}}},EU=class Lpe{constructor(e,i){this.type=e,this.amount=i,this.type!=="invert"&&this.type!=="grayscale"&&this.type!=="sepia"||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,i,r){this.amount=Ua(e.amount,i.amount,r),this._updateMatrix()}clone(){return new Lpe(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const e=this._colorMatrix||pN();switch(this.type){case"brightness":this._colorMatrix=m3e(e,this.amount);break;case"contrast":this._colorMatrix=y3e(e,this.amount);break;case"grayscale":this._colorMatrix=g3e(e,this.amount);break;case"invert":this._colorMatrix=b3e(e,this.amount);break;case"saturate":this._colorMatrix=w3e(e,this.amount);break;case"sepia":this._colorMatrix=_3e(e,this.amount)}}},Rpe=class Ope{constructor(e,i,r,n){this.offsetX=e,this.offsetY=i,this.blurRadius=r,this.color=n,this.type="drop-shadow"}interpolate(e,i,r){this.offsetX=Ua(e.offsetX,i.offsetX,r),this.offsetY=Ua(e.offsetY,i.offsetY,r),this.blurRadius=Ua(e.blurRadius,i.blurRadius,r),this.color[0]=Math.round(Ua(e.color[0],i.color[0],r)),this.color[1]=Math.round(Ua(e.color[1],i.color[1],r)),this.color[2]=Math.round(Ua(e.color[2],i.color[2],r)),this.color[3]=Ua(e.color[3],i.color[3],r)}clone(){return new Ope(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const e=[...this.color];return e[3]*=255,{type:"drop-shadow",xoffset:nC(this.offsetX),yoffset:nC(this.offsetY),blurRadius:nC(this.blurRadius),color:e}}},Fpe=class Npe{constructor(e){this.angle=e,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,i,r){this.angle=Ua(e.angle,i.angle,r),this._updateMatrix()}clone(){return new Npe(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const e=this._colorMatrix||pN();this._colorMatrix=v3e(e,this.angle)}},Dpe=class zpe{constructor(e){this.amount=e,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(e,i,r){this.amount=Ua(e.amount,i.amount,r)}clone(){return new zpe(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}};function Ua(t,e,i){return t+(e-t)*i}function nC(t){return Math.round(1e3*ji(t))/1e3}function x3e(t){switch(t.type){case"grayscale":case"sepia":case"invert":return new EU(t.type,0);case"saturate":case"brightness":case"contrast":return new EU(t.type,1);case"opacity":return new Dpe(1);case"hue-rotate":return new Fpe(0);case"blur":return new Ppe(0);case"drop-shadow":return new Rpe(0,0,0,[...pq("transparent")]);case"bloom":return new Mpe(0,0,1)}}function Vpe(t,e){const i=t.length>e.length?t:e;return(t.length>e.length?e:t).every(((r,n)=>r.type===i[n].type))}function jpe(t,e){const i=t.length>e.length?t:e,r=t.length>e.length?e:t;for(let n=r.length;n<i.length;n++)r.push(x3e(i[n]))}function S3e(t){const e=t[0];return!!e&&"type"in e}const Nz=()=>Ie.getLogger("esri.support.basemapUtils");function $3e(){return{}}function T3e(t){for(const e in t){const i=t[e];hr(i),delete t[e]}}function E3e(t,e){let i;if(typeof t=="string"){const r=t in mU,n=!r&&t.includes("/");if(!r&&!n){if($j())Nz().warn(`Unable to find basemap definition for: ${t}. See available styles at https://developers.arcgis.com/rest/basemap-styles/`);else{const s=Object.entries(mU).filter((([o,a])=>a.classic||a.is3d)).map((([o])=>`"${o}"`)).sort().join(", ");Nz().warn(`Unable to find basemap definition for: ${t}. Try one of these: ${s}`)}return null}e&&(i=e[t]),i||(i=r?iC.fromId(t):new iC({style:{id:t}}),e&&(e[t]=i))}else i=En(iC,t);return i!=null&&i.destroyed&&(Nz().warn("The provided basemap is already destroyed",{basemap:i}),i=null),i}function I3e(t){return new ph({getCollections:()=>[t.tables,t.layers],getChildrenFunction:e=>{const i=[];return"tables"in e&&i.push(e.tables),"layers"in e&&i.push(e.layers),i},itemFilterFunction:e=>{const i=e.parent;return!!i&&"tables"in i&&i.tables.includes(e)}})}function Dz(t){for(const e of t.values())e==null||e.destroy();t.clear()}const AK={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function C3e(t){let e=null;if(typeof t=="string")if(t in AK){const i=AK[t];e=new pO({resourceInfo:{data:{layers:[i]}}})}else Ie.getLogger("esri.support.groundUtils").warn(`Unable to find ground definition for: ${t}. Try "world-elevation"`);else e=En(pO,t);return e}let Upe=0;const Bpe=t=>{let e=class extends t{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+Upe++})}};return e=u([V("esri.core.Identifiable")],e),e},M3e=t=>{let e=class extends t{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Upe++})}};return e=u([V("esri.core.Identifiable.NumericIdentifiable")],e),e};let jE=class extends Bpe(class{}){};jE=u([V("esri.core.Identifiable")],jE),(function(t){t.IdentifiableMixin=Bpe,t.NumericIdentifiableMixin=M3e})(jE||(jE={}));const dm=jE;async function k3e(t){var r;const e="portalItem"in t?t:{portalItem:t},{fromItem:i}=await ye(async()=>{const{fromItem:n}=await import("./portalLayers-8LHZQikZ.js");return{fromItem:n}},__vite__mapDeps([145,143,142,141,144]));try{return await i(e)}catch(n){const s=e==null?void 0:e.portalItem,o=(s==null?void 0:s.id)||"unset",a=((r=s==null?void 0:s.portal)==null?void 0:r.url)||Si.portalUrl;throw Ie.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+a+"', id: '"+o+"')",n),n}}const IU={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8};function zz(t,e,i,r=Ya){const n=new Xa(XG(r)),s=nt.fromJSDate(t,{zone:n}),o=i==="decades"||i==="centuries"?"year":qpe(i);return i==="decades"&&(e*=10),i==="centuries"&&(e*=100),s.plus({[o]:e}).toJSDate()}function Dft(t,e,i="milliseconds"){const r=t.getTime(),n=Gpe(e,i,"milliseconds");return new Date(r+n)}function LK(t,e,i=Ya){const r=new Xa(XG(i)),n=nt.fromJSDate(t,{zone:r});if(e==="decades"||e==="centuries"){const o=n.startOf("year"),{year:a}=o,l=a-a%(e==="decades"?10:100);return o.set({year:l}).toJSDate()}const s=qpe(e);return n.startOf(s).toJSDate()}function Gpe(t,e,i){return t===0?0:t*IU[e]/IU[i]}function zft(t,e){return t&&e?t.intersection(e):t||e}function qpe(t){switch(t){case"milliseconds":return"millisecond";case"seconds":return"second";case"minutes":return"minute";case"hours":return"hour";case"days":return"day";case"weeks":return"week";case"months":return"month";case"years":return"year"}}var nc,oS;let Hi=(oS=class extends ve{static get allTime(){return RK}static get empty(){return P3e}static fromArray(e){return new nc({start:e[0]!=null?new Date(e[0]):e[0],end:e[1]!=null?new Date(e[1]):e[1]})}constructor(e){super(e),this.end=null,this.start=null}readEnd(e,i){return i.end!=null?new Date(i.end):null}writeEnd(e,i){i.end=(e==null?void 0:e.getTime())??null}get isAllTime(){return this.equals(nc.allTime)}get isEmpty(){return this.equals(nc.empty)}readStart(e,i){return i.start!=null?new Date(i.start):null}writeStart(e,i){i.start=(e==null?void 0:e.getTime())??null}clone(){return new nc({end:this.end,start:this.start})}equals(e){var o,a,l,c;if(!e)return!1;const i=((o=this.start)==null?void 0:o.getTime())??this.start,r=((a=this.end)==null?void 0:a.getTime())??this.end,n=((l=e.start)==null?void 0:l.getTime())??e.start,s=((c=e.end)==null?void 0:c.getTime())??e.end;return i===n&&r===s}expandTo(e,i=Ya){if(this.isEmpty||this.isAllTime)return this.clone();let r=this.start;r&&(r=LK(r,e,i));let n=this.end;if(n){const s=LK(n,e,i);n=n.getTime()===s.getTime()?s:zz(s,1,e,i)}return new nc({start:r,end:n})}intersection(e){var l,c,d,f;if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return nc.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const i=((l=this.start)==null?void 0:l.getTime())??-1/0,r=((c=this.end)==null?void 0:c.getTime())??1/0,n=((d=e.start)==null?void 0:d.getTime())??-1/0,s=((f=e.end)==null?void 0:f.getTime())??1/0;let o,a;return n>=i&&n<=r?o=n:i>=n&&i<=s&&(o=i),r>=n&&r<=s?a=r:s>=i&&s<=r&&(a=s),o==null||a==null||isNaN(o)||isNaN(a)?nc.empty:new nc({start:o===-1/0?null:new Date(o),end:a===1/0?null:new Date(a)})}offset(e,i,r=Ya){if(this.isEmpty||this.isAllTime)return this.clone();const n=new nc,{start:s,end:o}=this;return s!=null&&(n.start=zz(s,e,i,r)),o!=null&&(n.end=zz(o,e,i,r)),n}toArray(){var e,i;return this.isEmpty?[void 0,void 0]:[((e=this.start)==null?void 0:e.getTime())??null,((i=this.end)==null?void 0:i.getTime())??null]}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return RK.clone();const i=this.start!=null&&e.start!=null?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,r=this.end!=null&&e.end!=null?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new nc({start:i,end:r})}},nc=oS,oS);u([h({type:Date,json:{write:{allowNull:!0}}})],Hi.prototype,"end",void 0),u([De("end")],Hi.prototype,"readEnd",null),u([Ve("end")],Hi.prototype,"writeEnd",null),u([h({readOnly:!0,json:{read:!1}})],Hi.prototype,"isAllTime",null),u([h({readOnly:!0,json:{read:!1}})],Hi.prototype,"isEmpty",null),u([h({type:Date,json:{write:{allowNull:!0}}})],Hi.prototype,"start",void 0),u([De("start")],Hi.prototype,"readStart",null),u([Ve("start")],Hi.prototype,"writeStart",null),Hi=nc=u([V("esri.time.TimeExtent")],Hi);const RK=new Hi,P3e=new Hi({start:void 0,end:void 0});let A3e=0,zr=class extends ad.EventedMixin(dm.IdentifiableMixin(Mo)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new Qt(-180,-90,180,90,et.WGS84),this.id=Date.now().toString(16)+"-layer-"+A3e++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.persistenceEnabled=!1,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=et.WGS84,this.title=null,this.type=null,this.url=null,this.visibilityTimeExtent=null,this.visible=!0}static async fromArcGISServerUrl(e){const i=typeof e=="string"?{url:e}:e;return(await ye(async()=>{const{fromUrl:r}=await import("./arcgisLayers-Bvvin3WP.js");return{fromUrl:r}},__vite__mapDeps([146,143,142,144]))).fromUrl(i)}static fromPortalItem(e){return k3e(e)}initialize(){this.when().catch((e=>{Tn(e)||Ie.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:e})}))}destroy(){const e=this.parent;if(e){const i=this;"layers"in e&&e.layers.includes(i)?e.layers.remove(i):"tables"in e&&e.tables.includes(i)?e.tables.remove(i):"baseLayers"in e&&e.baseLayers.includes(i)?e.baseLayers.remove(i):"referenceLayers"in e&&e.referenceLayers.includes(i)&&e.referenceLayers.remove(i),this._set("parent",null)}}get effectiveVisible(){let e=this.visible;const i=this.parent;return e&&i&&"effectiveVisible"in i&&e&&(e=i.effectiveVisible),e}get hasAttributionData(){return this.attributionDataUrl!=null}get parsedUrl(){return rn(this.url)}createLayerView(e,i){return Promise.reject(new ie("layer:create-layer-view","Layer does not support creating a layer view"))}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await fi(e,{query:{f:"json"},responseType:"json"})).data;throw new ie("layer:no-attribution-data","Layer does not have attribution data")}};u([h({type:String})],zr.prototype,"attributionDataUrl",void 0),u([h({readOnly:!0})],zr.prototype,"effectiveVisible",null),u([h({type:Qt})],zr.prototype,"fullExtent",void 0),u([h({readOnly:!0})],zr.prototype,"hasAttributionData",null),u([h({type:String,clonable:!1})],zr.prototype,"id",void 0),u([h({type:Boolean,nonNullable:!0})],zr.prototype,"legendEnabled",void 0),u([h({type:["show","hide","hide-children"]})],zr.prototype,"listMode",void 0),u([h({type:Number,range:{min:0,max:1},nonNullable:!0})],zr.prototype,"opacity",void 0),u([h({clonable:!1})],zr.prototype,"parent",void 0),u([h({readOnly:!0})],zr.prototype,"parsedUrl",null),u([h({type:Boolean,readOnly:!0})],zr.prototype,"persistenceEnabled",void 0),u([h({type:Boolean})],zr.prototype,"popupEnabled",void 0),u([h({type:Boolean})],zr.prototype,"attributionVisible",void 0),u([h({type:et})],zr.prototype,"spatialReference",void 0),u([h({type:String})],zr.prototype,"title",void 0),u([h({readOnly:!0,json:{read:!1}})],zr.prototype,"type",void 0),u([h()],zr.prototype,"url",void 0),u([h({type:Hi})],zr.prototype,"visibilityTimeExtent",void 0),u([h({type:Boolean,nonNullable:!0})],zr.prototype,"visible",void 0),zr=u([V("esri.layers.Layer")],zr);function CU(t,e,i){let r,n;if(t)for(let s=0,o=t.length;s<o;s++){if(r=t.at(s),(r==null?void 0:r[e])===i)return r;if((r==null?void 0:r.type)==="group"&&(n=CU(r.layers,e,i),n))return n}}const L3e=t=>{let e=class extends t{constructor(...i){super(...i),this.layers=new Ze;const r=o=>{o.parent&&"remove"in o.parent&&o.parent.remove(o)},n=o=>{o.parent=this,this.layerAdded(o),o.type!=="elevation"&&o.type!=="base-elevation"||Ie.getLogger(this).error(`Layer 'title:${o.title}, id:${o.id}' of type '${o.type}' is not supported as an operational layer and will therefore be ignored.`)},s=o=>{o.parent=null,this.layerRemoved(o)};this.addHandles([this.layers.on("before-add",(o=>{if(o.item===this)return o.preventDefault(),void Ie.getLogger(this).error("#add()","Cannot add layer to itself.");r(o.item)})),this.layers.on("after-add",(o=>n(o.item))),this.layers.on("after-remove",(o=>s(o.item)))])}destroy(){const i=this.layers.toArray();for(const r of i)r.destroy();this.layers.destroy()}set layers(i){this._set("layers",nm(i,this._get("layers")))}add(i,r){const n=this.layers;if(r=n.getNextIndex(r),i instanceof zr){const s=i;s.parent===this?this.reorder(s,r):n.add(s,r)}else gp(i)?i.then((s=>{this.destroyed||this.add(s,r)})):Ie.getLogger(this).error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(i,r){const n=this.layers;let s=n.getNextIndex(r);i.slice().forEach((o=>{o.parent!==this?(n.add(o,s),s+=1):this.reorder(o,s)}))}findLayerById(i){return CU(this.layers,"id",i)}findLayerByUid(i){return CU(this.layers,"uid",i)}remove(i){return this.layers.remove(i)}removeMany(i){return this.layers.removeMany(i)}removeAll(){return this.layers.removeAll()}reorder(i,r){return this.layers.reorder(i,r)}layerAdded(i){}layerRemoved(i){}};return u([h()],e.prototype,"layers",null),e=u([V("esri.support.LayersMixin")],e),e},R3e=new Set(["feature","subtype-group"]);function MU(t,e,i){if(t)for(let r=0,n=t.length;r<n;r++){const s=t.at(r);if(s[e]===i)return s;if((s==null?void 0:s.type)==="group"){const o=MU(s.tables,e,i);if(o)return o}}}const O3e=t=>{let e=class extends t{constructor(...i){super(...i),this.tables=new Ze,this.addHandles([this.tables.on("after-add",(r=>{const n=r.item;n.parent&&n.parent!==this&&"tables"in n.parent&&n.parent.tables.remove(n),n.parent=this,R3e.has(n.type)||Ie.getLogger(this).error(`Layer 'title:${n.title}, id:${n.id}' of type '${n.type}' is not supported as a table and will therefore be ignored.`)})),this.tables.on("after-remove",(r=>{r.item.parent=null}))])}destroy(){const i=this.tables.toArray();for(const r of i)r.destroy();this.tables.destroy()}set tables(i){this._set("tables",nm(i,this._get("tables")))}findTableById(i){return MU(this.tables,"id",i)}findTableByUid(i){return MU(this.tables,"uid",i)}};return u([h()],e.prototype,"tables",null),e=u([V("esri.support.TablesMixin")],e),e};let sc=class extends O3e(L3e(ad.EventedMixin(tt))){constructor(e){super(e),this.allLayers=new ph({getCollections:()=>{var i,r,n;return[(i=this.basemap)==null?void 0:i.baseLayers,(r=this.ground)==null?void 0:r.layers,this.layers,(n=this.basemap)==null?void 0:n.referenceLayers]},getChildrenFunction:i=>"layers"in i?i.layers:null}),this.focusAreas=new xpe,this.allTables=I3e(this),this.basemap=null,this.editableLayers=new ph({getCollections:()=>[this.allLayers],itemFilterFunction:vOe}),this.ground=new pO,this._basemapCache=$3e()}destroy(){T3e(this._basemapCache),this._basemapCache=null,this.focusAreas.destroy(),this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),this.basemap=hr(this.basemap),hr(this.ground),this._set("ground",null)}castBasemap(e){return E3e(e,this._basemapCache)}castGround(e){return C3e(e)??this._get("ground")}findLayerById(e){return this.allLayers.find((i=>i.id===e))}findTableById(e){return this.allTables.find((i=>i.id===e))}};u([h({readOnly:!0,dependsOn:[]})],sc.prototype,"allLayers",void 0),u([h({type:xpe,nonNullable:!0,json:{write:{overridePolicy:t=>({enabled:t.areas.length>0,ignoreOrigin:!0})}}})],sc.prototype,"focusAreas",void 0),u([h({readOnly:!0})],sc.prototype,"allTables",void 0),u([h({type:iC,json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],sc.prototype,"basemap",void 0),u([yi("basemap")],sc.prototype,"castBasemap",null),u([h({readOnly:!0})],sc.prototype,"editableLayers",void 0),u([h({type:pO,nonNullable:!0})],sc.prototype,"ground",void 0),u([yi("ground")],sc.prototype,"castGround",null),u([h()],sc.prototype,"undoRedo",void 0),sc=u([V("esri.Map")],sc);const Hpe=sc;let sC=class extends Ze{constructor(e){super(e),this.addHandles([this.on("before-add",(i=>{i.item==null&&i.preventDefault()})),this.on("after-add",(i=>this._own(i.item))),this.on("after-remove",(i=>this._release(i.item)))])}get owner(){return this._get("owner")}set owner(e){e!==this._get("owner")&&(this._releaseAll(),this._set("owner",e),this._ownAll())}_ownAll(){for(const e of this.items)this._own(e)}_releaseAll(){for(const e of this.items)this._release(e)}_createNewInstance(e){return this.itemType?new(Ze.ofType(this.itemType.Type))(e):new Ze(e)}};function OK(t,e){return{type:t,cast:rpe,set(i){const r=nm(i,this._get(e),t);r.owner=this,this._set(e,r)}}}u([h()],sC.prototype,"owner",null),sC=u([V("esri.core.support.OwningCollection")],sC);var UE;const fO=is()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),Wpe=fO.jsonValues.slice();T$e(Wpe,"orthometric");const oC=is()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let Xo=UE=class extends ve{constructor(t){super(t),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(t,e,i){return fO.write(t,e,i)}readHeightModel(t,e,i){return fO.read(t)||(i!=null&&i.messages&&i.messages.push(F3e(t,{context:i})),null)}readHeightUnit(t,e,i){return oC.read(t)||(i!=null&&i.messages&&i.messages.push(FK(t,{context:i})),null)}readHeightUnitService(t,e,i){return AG(t)||oC.read(t)||(i!=null&&i.messages&&i.messages.push(FK(t,{context:i})),null)}readVertCRS(t,e){return e.vertCRS||e.ellipsoid||e.geoid}clone(){return new UE({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(t){return!!t&&(this===t||this.heightModel===t.heightModel&&this.heightUnit===t.heightUnit&&this.vertCRS===t.vertCRS)}static deriveUnitFromSR(t,e){const i=fue(e);return new UE({heightModel:t.heightModel,heightUnit:i??void 0,vertCRS:t.vertCRS})}write(t,e){return e={origin:"web-scene",...e},super.write(t,e)}static fromJSON(t){if(!t)return null;const e=new UE;return e.read(t,{origin:"web-scene"}),e}};function FK(t,e){return new Dl("height-unit:unsupported",`Height unit of value '${t}' is not supported`,e)}function F3e(t,e){return new Dl("height-model:unsupported",`Height model of value '${t}' is not supported`,e)}u([h({type:fO.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:Wpe,default:"ellipsoidal",write:{isRequired:!0}}}}})],Xo.prototype,"heightModel",void 0),u([Ve("web-scene","heightModel")],Xo.prototype,"writeHeightModel",null),u([De(["web-scene","service"],"heightModel")],Xo.prototype,"readHeightModel",null),u([h({type:oC.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:oC.jsonValues,write:{writer:oC.write,isRequired:!0}}}}})],Xo.prototype,"heightUnit",void 0),u([De("web-scene","heightUnit")],Xo.prototype,"readHeightUnit",null),u([De("service","heightUnit")],Xo.prototype,"readHeightUnitService",null),u([h({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],Xo.prototype,"vertCRS",void 0),u([De("service","vertCRS",["vertCRS","ellipsoid","geoid"])],Xo.prototype,"readVertCRS",null),Xo=UE=u([V("esri.geometry.HeightModelInfo")],Xo);let mO=class extends sC{constructor(e){super(e),this.addHandles(this.on("before-add",(i=>{i.item!=null&&i.item.parent===this.owner&&(Ie.getLogger(this).warn("Analysis inside the collection must be unique. Not adding this element again."),i.preventDefault())})))}_own(e){e.parent=this.owner}_release(e){e.parent=null}};mO=u([V("esri.support.AnalysesCollection")],mO);let Vz;async function N3e(){return Vz==null&&(Vz=ye(()=>import("./WhereClauseCache-ylOMUZoU.js"),__vite__mapDeps([15,16])).then((t=>new t.WhereClauseCache(500,500)))),Vz}async function vq(t,e){const i=await N3e(),r=i.get(t,e);if(r==null)throw i.getError(t,e);return r}function aC(t,e){return t||(t=null),e||(e=null),t==="1=1"?e??t:e==="1=1"?t??e:t&&e?`(${t}) AND (${e})`:t??e}function kU(t,e){return t||(t=null),e||(e=null),t==="1=1"||e==="1=1"||t===e?t==="1=1"?t:e:t&&e?`(${t}) OR (${e})`:t??e}function Zpe(t,e){return e.length===0?null:`${t} IN (${D3e(e)})`}function D3e(t){return t.map((e=>typeof e=="string"?z3e(e):e)).join(",")}function z3e(t){return`'${t.replaceAll("'","''")}'`}function uw(t){return typeof t=="number"}function Gft(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t}function qft(t){return typeof t=="boolean"}function v2(t){return typeof t=="string"||t instanceof String}function V3e(t){return t==null||v2(t)}function Hft(t){return Array.isArray(t)}function Jpe(t){return(t==null?void 0:t.declaredClass)==="esri.Graphic"}function Wft(t){return t instanceof Date}const j3e="HH:mm",U3e="HH:mm:ss",B3e="HH:mm:ss.SSS",G3e=[B3e,U3e,j3e,"TT"],q3e="yyyy-MM-dd";function NK(t){if(!t||!v2(t))return null;const e=nt.fromFormat(t,q3e);return e.isValid?e:null}function DK(t){return t&&v2(t)?K$e(G3e,(e=>{const i=nt.fromFormat(t,e);return i.isValid?i:null}))??null:null}function zK(t){if(!t||!v2(t))return null;const e=nt.fromISO(t);return e.isValid?e:null}var yO;(function(t){t.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",t.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(yO||(yO={}));const Ype=new Set(["integer","small-integer","long","big-integer","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeLong","esriFieldTypeBigInteger"]);function H3e(t){return t!=null&&Ype.has(t.type)}function Xpe(t){return t!=null&&(t.type==="date-only"||t.type==="esriFieldTypeDateOnly")}function Kpe(t){return t!=null&&(t.type==="timestamp-offset"||t.type==="esriFieldTypeTimestampOffset")}function Qpe(t){return t!=null&&(t.type==="time-only"||t.type==="esriFieldTypeTimeOnly")}const W3e=new Set(["single","double","esriFieldTypeSingle","esriFieldTypeDouble"]);iG(Ype,W3e);function Zft(t,e){const i=t==null?void 0:t.domain;if(!i||i.type!=="range")return;const r="range"in i?i.range[0]:i.minValue,n="range"in i?i.range[1]:i.maxValue,s=H3e(t);return Xpe(t)||Qpe(t)||Kpe(t)?{...Z3e(t,n,r),isInteger:s}:{min:r!=null&&typeof r=="number"?r:null,max:n!=null&&typeof n=="number"?n:null,rawMin:r,rawMax:n,isInteger:s}}function Z3e(t,e,i){var r,n,s,o,a,l;return Xpe(t)?{min:(r=NK(i))==null?void 0:r.toMillis(),max:(n=NK(e))==null?void 0:n.toMillis(),rawMin:i,rawMax:e}:Qpe(t)?{min:(s=DK(i))==null?void 0:s.toMillis(),max:(o=DK(e))==null?void 0:o.toMillis(),rawMin:i,rawMax:e}:Kpe(t)?{min:(a=zK(i))==null?void 0:a.toMillis(),max:(l=zK(e))==null?void 0:l.toMillis(),rawMin:i,rawMax:e}:{max:null,min:null}}function J3e(t){if(!t)return;const e=t.match(Y3e);return e!=null&&e.groups?e.groups.doubleQuoted??e.groups.singleQuoted??e.groups.dotNotation:void 0}const Y3e=/^(\$feature\[(?:"(?<doubleQuoted>[^"]+)"|'(?<singleQuoted>[^']+)')\]|\$feature\.(?<dotNotation>[a-zA-Z_][a-zA-Z0-9_]*))$/i;function X3e(t){var e,i;return((i=(e=t.match(K3e))==null?void 0:e[1])==null?void 0:i.replace(/\\'/g,"'"))??null}const K3e=/^hash\(\$feature\['((\\'|[^'])+)'\]\) \* 8\.381e-8$/;let jz;function fp(){return jz||(jz=(async()=>{const[t,e,i]=await Promise.all([ye(()=>import("./arcadeUtils-Boz8QJa3.js"),__vite__mapDeps([147,148,149,150,25,151,14,16,152])),ye(()=>import("./batchExec-ClwYm-C4.js"),__vite__mapDeps([153,70])),ye(()=>import("./aiServices-Nm2lznYt.js").then(r=>r.ag),__vite__mapDeps([149,150,25,151]))]);return{arcade:t.arcade,arcadeUtils:t,batchExec:e,aiServices:i,Dictionary:t.Dictionary,Feature:t.arcadeFeature,Voxel:t.Voxel}})()),jz}const Q3e=/^([0-9_])/,eFe=/[^a-z0-9_\u0080-\uffff]+/gi;function tFe(t){return t==null?null:t.trim().replaceAll(eFe,"_").replace(Q3e,"F$1")||null}const iFe=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],rFe=["field","normalizationField"];function VK(t,e){if(t!=null&&e!=null){for(const i of Array.isArray(t)?t:[t])if(jK(iFe,i,e),"visualVariables"in i&&i.visualVariables)for(const r of i.visualVariables)jK(rFe,r,e)}}function jK(t,e,i){if(t)for(const r of t){const n=e2(r,e),s=n&&typeof n!="function"&&i.get(n);s&&xn(r,s.name,e)}}function efe(t,e){var i;if(t!=null&&((i=e==null?void 0:e.fields)!=null&&i.length))if("startField"in t){const r=e.get(t.startField),n=e.get(t.endField);t.startField=(r==null?void 0:r.name)??null,t.endField=(n==null?void 0:n.name)??null}else{const r=e.get(t.startTimeField),n=e.get(t.endTimeField);t.startTimeField=(r==null?void 0:r.name)??null,t.endTimeField=(n==null?void 0:n.name)??null}}const Uz=new Set;function yN(t,e){return t&&e?(Uz.clear(),Ng(Uz,t,e),Array.from(Uz).sort()):[]}function Ng(t,e,i){var r;if(i)if((r=e==null?void 0:e.fields)!=null&&r.length)if(i.includes("*"))for(const{name:n}of e.fields)t.add(n);else for(const n of i)ca(t,e,n);else{if(i.includes("*"))return t.clear(),void t.add("*");for(const n of i)n!=null&&t.add(n)}}function ca(t,e,i){if(typeof i=="string")if(e){const r=e.get(i);r&&t.add(r.name)}else t.add(i)}function Jft(t,e){return e==null||t==null?[]:e.includes("*")?(t.fields??[]).map((i=>i.name)):e}function Yft(t,e,i=1){if(!e||!t)return[];if(e.includes("*"))return["*"];const r=yN(t,e);return r.length/t.fields.length>=i?["*"]:r}async function io(t,e,i){var s;if(!i)return;let r;const n=J3e(i);if(n)r=[n];else{const{arcadeUtils:o}=await fp();r=o.extractFieldNames(i,(s=e==null?void 0:e.fields)==null?void 0:s.map((a=>a.name)))}for(const o of r)ca(t,e,o)}async function bq(t,e,i){if(i&&i!=="1=1"){const r=await vq(i,e);if(!r.isStandardized)throw new ie("fieldUtils:collectFilterFields","Where clause is not standardized",{where:i});Ng(t,e,r.fieldNames)}}function nFe({displayField:t,fields:e}){return t||(e!=null&&e.length?Bz(e,"name-or-title")||Bz(e,"unique-identifier")||Bz(e,"type-or-category")||sFe(e):null)}function sFe(t){for(const e of t){if(!(e!=null&&e.name))continue;const i=e.name.toLowerCase();if(i.includes("name")||i.includes("title"))return e.name}return null}function Bz(t,e){for(const i of t)if(i!=null&&i.valueType&&i.valueType===e)return i.name;return null}async function Xft(t,e){var r;if(!e)return;const i=(r=e.elevationInfo)==null?void 0:r.featureExpressionInfo;return i?i.collectRequiredFields(t,e.fieldsIndex):void 0}function oFe(t,e,i){i.onStatisticExpression?io(t,e,i.onStatisticExpression.expression):t.add(i.onStatisticField)}async function Kft(t,e,i){if(!e||!i||!("fields"in i))return;const r=[],n=i.popupTemplate;r.push(tfe(t,e,n)),i.fields&&r.push(...i.fields.map((async s=>oFe(t,e.fieldsIndex,s)))),await Promise.all(r)}async function Qft(t,e){var s,o,a;const{fieldsIndex:i,trackInfo:r}=e;if(!e||!r||!i)return;const n=[(s=r.latestObservations.renderer)==null?void 0:s.collectRequiredFields(t,i),(o=r.previousObservations.renderer)==null?void 0:o.collectRequiredFields(t,i),(a=r.trackLines.renderer)==null?void 0:a.collectRequiredFields(t,i)];r.popupTemplate&&n.push(tfe(t,e,r.popupTemplate));for(const l of[r.latestObservations.labelingInfo,r.previousObservations.labelingInfo,r.trackLines.labelingInfo])if(l)for(const c of l)n.push(nfe(t,i,c));await Promise.all(n)}async function tfe(t,e,i){const r=[];i!=null&&i.expressionInfos&&r.push(...i.expressionInfos.map((s=>io(t,e.fieldsIndex,s.expression))));const n=i==null?void 0:i.content;if(Array.isArray(n))for(const s of n)s.type==="expression"&&s.expressionInfo&&r.push(io(t,e.fieldsIndex,s.expressionInfo.expression));await Promise.all(r)}async function emt(t,e,i){e&&(e.timeInfo&&(i!=null&&i.timeExtent)&&Ng(t,e.fieldsIndex,[e.timeInfo.startField,e.timeInfo.endField]),e.floorInfo&&Ng(t,e.fieldsIndex,[e.floorInfo.floorField]),(i==null?void 0:i.where)!=null&&await bq(t,e.fieldsIndex,i.where))}async function tmt(t,e,i){e&&i&&await Promise.all(i.map((r=>aFe(t,e,r))))}async function aFe(t,e,i){e&&i&&(i.valueExpression?await io(t,e.fieldsIndex,i.valueExpression):i.field&&ca(t,e.fieldsIndex,i.field))}function imt(t){return t?yN(t.fieldsIndex,ife(t)):[]}function lFe(t){if(!t)return[];const e=t.geometryFieldsInfo;return e?yN(t.fieldsIndex,[e.shapeAreaField,e.shapeLengthField]):[]}async function rmt(t,e,i){if(!e||!i)return;const r=e.fieldsIndex;await Promise.all(i.filters.map((n=>bq(t,r,n.where))))}const cFe=new Set(["oid","global-id","guid"]),uFe=new Set(["oid","global-id"]),dFe=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^shape$/i,/^shape_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/objectid/i,/^perimeter_/i,/_perimeter$/i,/_i$/i];function hFe(t){const e=new Set;rfe(t).forEach((r=>e.add(r))),lFe(t).forEach((r=>e.add(r.toLowerCase())));const i=t&&"infoFor3D"in t?t.infoFor3D:void 0;return i&&(Object.values(i.assetMapFieldRoles).forEach((r=>e.add(r.toLowerCase()))),Object.values(i.transformFieldRoles).forEach((r=>e.add(r.toLowerCase())))),Array.from(e)}function ife(t){if(!t)return[];const e="editFieldsInfo"in t&&t.editFieldsInfo;if(!e)return[];const{creationDateField:i,creatorField:r,editDateField:n,editorField:s}=e;return[i,r,n,s].filter(Boolean)}function rfe(t){return ife(t).map((e=>e.toLowerCase()))}function pFe(t,e){var i;return t.editable&&!cFe.has(t.type)&&!rfe(e).includes(((i=t.name)==null?void 0:i.toLowerCase())??"")}function fFe(t,e){var r;const i=((r=t.name)==null?void 0:r.toLowerCase())??"";return!((e==null?void 0:e.objectIdField)!=null&&i===e.objectIdField.toLowerCase()||(e==null?void 0:e.globalIdField)!=null&&i===e.globalIdField.toLowerCase()||hFe(e).includes(i)||uFe.has(t.type)||dFe.some((n=>n.test(i))))}async function nmt(t,e){const{labelingInfo:i,fieldsIndex:r}=e;i!=null&&i.length&&await Promise.all(i.map((n=>nfe(t,r,n))))}async function nfe(t,e,i){if(!i)return;const r=i.getLabelExpression(),n=i.where;if(r.type==="arcade")await io(t,e,r.expression);else{const s=r.expression.match(/{[^}]*}/g);s&&s.forEach((o=>{ca(t,e,o.slice(1,-1))}))}await bq(t,e,n)}function mFe(t){const e=t.defaultValue;return e!==void 0&&ofe(t,e)?e:t.nullable?null:void 0}function smt(t){const e=typeof t=="string"?{type:t}:t;return lfe(e)?255:e.type==="esriFieldTypeDate"||e.type==="date"?8:void 0}function sfe(t){return typeof t=="number"&&!isNaN(t)&&isFinite(t)}function yFe(t){return t===null||sfe(t)}function gFe(t){return t===null||Number.isInteger(t)}function vFe(){return!0}function ofe(t,e){let i;switch(t.type){case"date":case"integer":case"long":case"small-integer":case"big-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":case"esriFieldTypeBigInteger":i=t.nullable?gFe:Number.isInteger;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":i=t.nullable?yFe:sfe;break;case"string":case"esriFieldTypeString":i=t.nullable?V3e:v2;break;default:i=vFe}return arguments.length===1?i:i(e)}const bFe=["integer","small-integer","big-integer","long"],wFe=["single","double"],_Fe=["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeLong","esriFieldTypeBigInteger"],xFe=["esriFieldTypeSingle","esriFieldTypeDouble"],afe=new Set([...bFe,..._Fe]),SFe=new Set([...wFe,...xFe]),$Fe=iG(afe,SFe);function TFe(t){return t!=null&&afe.has(t.type)}function wq(t){return t!=null&&$Fe.has(t.type)}function lfe(t){return t!=null&&(t.type==="string"||t.type==="esriFieldTypeString")}function _q(t){return t!=null&&(t.type==="date"||t.type==="esriFieldTypeDate")}function EFe(t){return t!=null&&(t.type==="date-only"||t.type==="esriFieldTypeDateOnly")}function IFe(t){return t!=null&&(t.type==="timestamp-offset"||t.type==="esriFieldTypeTimestampOffset")}function xq(t){return t!=null&&(t.type==="time-only"||t.type==="esriFieldTypeTimeOnly")}function UK(t){return t!=null&&(t.type==="oid"||t.type==="esriFieldTypeOID")}function BK(t){return t!=null&&(t.type==="global-id"||t.type==="esriFieldTypeGlobalID")}function omt(t,e){return CFe(t,e)===null}var gO,vO;function amt(t){return t==null||typeof t=="number"&&isNaN(t)?null:t}function CFe(t,e){return t==null||t.nullable&&e===null?null:ofe(t,e)?wq(t)&&!MFe(t.type,Number(e))?gO.OUT_OF_RANGE:null:vO.INVALID_TYPE}function MFe(t,e){const i=typeof t=="string"?cfe(t):t;if(!i)return!1;const r=i.min,n=i.max;return i.isInteger?Number.isInteger(e)&&e>=r&&e<=n:e>=r&&e<=n}function cfe(t){switch(t){case"esriFieldTypeSmallInteger":case"small-integer":return kFe;case"esriFieldTypeInteger":case"esriFieldTypeLong":case"integer":case"long":return PFe;case"esriFieldTypeBigInteger":case"big-integer":return AFe;case"esriFieldTypeSingle":case"single":return LFe;case"esriFieldTypeDouble":case"double":return RFe}}(function(t){t.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"})(gO||(gO={})),(function(t){t.INVALID_TYPE="type-validation-error::invalid-type"})(vO||(vO={}));const kFe={min:-32768,max:32767,isInteger:!0,rawMin:-32768,rawMax:32767},PFe={min:-2147483648,max:2147483647,isInteger:!0,rawMin:-2147483648,rawMax:2147483647},AFe={min:-Number.MAX_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,isInteger:!0,rawMin:-Number.MAX_SAFE_INTEGER,rawMax:Number.MAX_SAFE_INTEGER},LFe={min:-34e37,max:12e37,isInteger:!1,rawMin:-34e37,rawMax:12e37},RFe={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1,rawMin:-Number.MAX_VALUE,rawMax:Number.MAX_VALUE};function lmt(t,e,i){switch(t){case yO.INVALID_CODED_VALUE:return`Value ${i} is not in the coded domain - field: ${e.name}, domain: ${JSON.stringify(e.domain)}`;case yO.VALUE_OUT_OF_RANGE:return`Value ${i} is out of the range of valid values - field: ${e.name}, domain: ${JSON.stringify(e.domain)}`;case vO.INVALID_TYPE:return`Value ${i} is not a valid value for the field type - field: ${e.name}, type: ${e.type}, nullable: ${e.nullable}`;case gO.OUT_OF_RANGE:{const{min:r,max:n}=cfe(e.type);return`Value ${i} is out of range for the number type - field: ${e.name}, type: ${e.type}, value range is ${r} to ${n}`}}}function ufe(t,e){return!OFe(t,e,null)}function OFe(t,e,i){if(!(t!=null&&t.attributes)||!e)return!0;const r=new Set(Object.keys(t.attributes));let n=!1;for(const s of e)if(!r.has(s)&&(n=!0,i==null))break;return n}function PU(t){return!!t&&["raster.itempixelvalue","raster.servicepixelvalue"].some((e=>t.toLowerCase().startsWith(e)))}function Sq(t){const e=t==null?void 0:t.match(/{[^}]+}/g);return e?e.map((i=>i.slice(1,-1).split(":")[0].trim())):[]}let hL=class extends ve{constructor(e){super(e),this.type=null}};u([h({type:["attachments","custom","fields","media","text","expression","relationship","utility-network-associations"],readOnly:!0,json:{read:!1,write:!0}})],hL.prototype,"type",void 0),hL=u([V("esri.popup.content.Content")],hL);const hm=hL,SP=new Gt({asc:"ascending",desc:"descending"});let BE=class extends bt.ClonableMixin(ve){constructor(e){super(e),this.field=null,this.order="ascending"}};u([h({type:String,json:{write:!0}})],BE.prototype,"field",void 0),u([h({type:SP.apiValues,json:{type:SP.jsonValues,read:SP.read,write:SP.write}})],BE.prototype,"order",void 0),BE=u([V("esri.popup.support.AttachmentsOrderByInfo")],BE);const dfe=BE;let dy=class extends bt.ClonableMixin(hm){constructor(e){super(e),this.description=null,this.displayType="auto",this.orderByFields=null,this.title=null,this.type="attachments"}};u([h({type:String,json:{write:!0}})],dy.prototype,"description",void 0),u([h({type:["auto","preview","list"],json:{write:!0}})],dy.prototype,"displayType",void 0),u([h({type:[dfe],json:{write:!0}})],dy.prototype,"orderByFields",void 0),u([h({type:String,json:{write:!0}})],dy.prototype,"title",void 0),u([h({type:["attachments"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],dy.prototype,"type",void 0),dy=u([V("esri.popup.content.AttachmentsContent")],dy);const o$=dy;var AU;let o0=AU=class extends hm{constructor(t){super(t),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new AU({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?se(this.outFields):null})}};u([h()],o0.prototype,"creator",void 0),u([h()],o0.prototype,"destroyer",void 0),u([h()],o0.prototype,"outFields",void 0),u([h({type:["custom"],readOnly:!0})],o0.prototype,"type",void 0),o0=AU=u([V("esri.popup.content.CustomContent")],o0);const hfe=o0;var LU;let q_=LU=class extends ve{constructor(t){super(t),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new LU({title:this.title,expression:this.expression})}};u([h({type:String,json:{write:!0}})],q_.prototype,"title",void 0),u([h({type:String,json:{write:!0}})],q_.prototype,"expression",void 0),u([h({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],q_.prototype,"returnType",void 0),q_=LU=u([V("esri.popup.ElementExpressionInfo")],q_);const pfe=q_;var RU;let GE=RU=class extends hm{constructor(t){super(t),this.expressionInfo=null,this.type="expression"}clone(){var t;return new RU({expressionInfo:(t=this.expressionInfo)==null?void 0:t.clone()})}};u([h({type:pfe,json:{write:!0}})],GE.prototype,"expressionInfo",void 0),u([h({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],GE.prototype,"type",void 0),GE=RU=u([V("esri.popup.content.ExpressionContent")],GE);const Ob=GE;let H_=class extends bt.ClonableMixin(ve){constructor(e){super(e),this.dateFormat=null,this.digitSeparator=!1,this.places=null}};u([at(SPe)],H_.prototype,"dateFormat",void 0),u([h({type:Boolean,json:{write:!0}})],H_.prototype,"digitSeparator",void 0),u([h({type:si,json:{write:!0}})],H_.prototype,"places",void 0),H_=u([V("esri.popup.support.FieldInfoFormat")],H_);const Ks=H_;var OU;let gu=OU=class extends ve{constructor(t){super(t),this.fieldName=null,this.format=void 0,this.isEditable=!0,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){var t;return new OU({fieldName:this.fieldName,format:(t=this.format)==null?void 0:t.clone(),isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};u([h({type:String,json:{write:!0}})],gu.prototype,"fieldName",void 0),u([h({type:Ks,json:{write:!0}})],gu.prototype,"format",void 0),u([h({type:Boolean,json:{write:{alwaysWriteDefaults:!0},default:!0}})],gu.prototype,"isEditable",void 0),u([h({type:String,json:{write:!0}})],gu.prototype,"label",void 0),u([at(new Gt({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],gu.prototype,"stringFieldOption",void 0),u([h({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],gu.prototype,"statisticType",void 0),u([h({type:String,json:{write:!0}})],gu.prototype,"tooltip",void 0),u([h({type:Boolean,json:{write:!0}})],gu.prototype,"visible",void 0),gu=OU=u([V("esri.popup.FieldInfo")],gu);const Ps=gu;var FU;let Jp=FU=class extends hm{constructor(t){super(t),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}writeFieldInfos(t,e){e.fieldInfos=t&&t.map((i=>i.toJSON()))}clone(){return new FU(se({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};u([h({type:Object,json:{write:!0}})],Jp.prototype,"attributes",void 0),u([h({type:String,json:{write:!0}})],Jp.prototype,"description",void 0),u([h({type:[Ps]})],Jp.prototype,"fieldInfos",void 0),u([Ve("fieldInfos")],Jp.prototype,"writeFieldInfos",null),u([h({type:String,json:{write:!0}})],Jp.prototype,"title",void 0),u([h({type:["fields"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],Jp.prototype,"type",void 0),Jp=FU=u([V("esri.popup.content.FieldsContent")],Jp);const dw=Jp;let a0=class extends ve{constructor(e){super(e),this.altText=null,this.caption="",this.title="",this.type=null}};u([h({type:String,json:{write:!0}})],a0.prototype,"altText",void 0),u([h({type:String,json:{write:!0}})],a0.prototype,"caption",void 0),u([h({type:String,json:{write:!0}})],a0.prototype,"title",void 0),u([h({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],a0.prototype,"type",void 0),a0=u([V("esri.popup.content.mixins.MediaInfo")],a0);const $q=a0;var NU;let l0=NU=class extends tt{constructor(t){super(t),this.color=null,this.fieldName=null,this.tooltip=null,this.value=null}clone(){var t;return new NU({color:(t=this.color)==null?void 0:t.clone(),fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};u([h()],l0.prototype,"color",void 0),u([h()],l0.prototype,"fieldName",void 0),u([h()],l0.prototype,"tooltip",void 0),u([h()],l0.prototype,"value",void 0),l0=NU=u([V("esri.popup.content.support.ChartMediaInfoValueSeries")],l0);const ffe=l0;var DU;let hy=DU=class extends ve{constructor(t){super(t),this.colors=null,this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new DU({colors:se(this.colors),fields:se(this.fields),normalizeField:this.normalizeField,series:se(this.series),tooltipField:this.tooltipField})}};u([h({type:[_e],json:{type:[[si]],write:!0}})],hy.prototype,"colors",void 0),u([h({type:[String],json:{write:{isRequired:!0}}})],hy.prototype,"fields",void 0),u([h({type:String,json:{write:!0}})],hy.prototype,"normalizeField",void 0),u([h({type:[ffe],json:{read:!1}})],hy.prototype,"series",void 0),u([h({type:String,json:{write:!0}})],hy.prototype,"tooltipField",void 0),hy=DU=u([V("esri.popup.content.support.ChartMediaInfoValue")],hy);const FFe=hy;let qE=class extends $q{constructor(e){super(e),this.type=null,this.value=void 0}};u([h({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],qE.prototype,"type",void 0),u([h({type:FFe,json:{write:{isRequired:!0}}})],qE.prototype,"value",void 0),qE=u([V("esri.popup.content.mixins.ChartMediaInfo")],qE);const gN=qE,vN=is()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var zU;let pL=zU=class extends gN{constructor(t){super(t),this.type="bar-chart"}clone(){var t;return new zU({altText:this.altText,title:this.title,caption:this.caption,value:(t=this.value)==null?void 0:t.clone()})}};u([h({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:{writer:vN.write,isRequired:!0}}})],pL.prototype,"type",void 0),pL=zU=u([V("esri.popup.content.BarChartMediaInfo")],pL);const mfe=pL;var VU;let fL=VU=class extends gN{constructor(t){super(t),this.type="column-chart"}clone(){var t;return new VU({altText:this.altText,title:this.title,caption:this.caption,value:(t=this.value)==null?void 0:t.clone()})}};u([h({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:{writer:vN.write,isRequired:!0}}})],fL.prototype,"type",void 0),fL=VU=u([V("esri.popup.content.ColumnChartMediaInfo")],fL);const yfe=fL;var jU;let HE=jU=class extends ve{constructor(t){super(t),this.linkURL=null,this.sourceURL=null}clone(){return new jU({linkURL:this.linkURL,sourceURL:this.sourceURL})}};u([h({type:String,json:{write:!0}})],HE.prototype,"linkURL",void 0),u([h({type:String,json:{write:{isRequired:!0}}})],HE.prototype,"sourceURL",void 0),HE=jU=u([V("esri.popup.content.support.ImageMediaInfoValue")],HE);const NFe=HE;var UU;let W_=UU=class extends $q{constructor(t){super(t),this.refreshInterval=0,this.type="image",this.value=void 0}clone(){var t;return new UU({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:(t=this.value)==null?void 0:t.clone()})}};u([h({type:Number,json:{write:!0}})],W_.prototype,"refreshInterval",void 0),u([h({type:["image"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],W_.prototype,"type",void 0),u([h({type:NFe,json:{write:{isRequired:!0}}})],W_.prototype,"value",void 0),W_=UU=u([V("esri.popup.content.ImageMediaInfo")],W_);const gfe=W_;var BU;let mL=BU=class extends gN{constructor(t){super(t),this.type="line-chart"}clone(){var t;return new BU({altText:this.altText,title:this.title,caption:this.caption,value:(t=this.value)==null?void 0:t.clone()})}};u([h({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:{writer:vN.write,isRequired:!0}}})],mL.prototype,"type",void 0),mL=BU=u([V("esri.popup.content.LineChartMediaInfo")],mL);const vfe=mL;var GU;let yL=GU=class extends gN{constructor(t){super(t),this.type="pie-chart"}clone(){var t;return new GU({altText:this.altText,title:this.title,caption:this.caption,value:(t=this.value)==null?void 0:t.clone()})}};u([h({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:{writer:vN.write,isRequired:!0}}})],yL.prototype,"type",void 0),yL=GU=u([V("esri.popup.content.PieChartMediaInfo")],yL);const bfe=yL,qU={base:$q,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":mfe,"column-chart":yfe,"line-chart":vfe,"pie-chart":bfe,image:gfe}};var HU;let vu=HU=class extends hm{constructor(t){super(t),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(t){return t&&t.map((e=>e.type==="image"?gfe.fromJSON(e):e.type==="barchart"?mfe.fromJSON(e):e.type==="columnchart"?yfe.fromJSON(e):e.type==="linechart"?vfe.fromJSON(e):e.type==="piechart"?bfe.fromJSON(e):void 0)).filter(Boolean)}writeMediaInfos(t,e){e.mediaInfos=t&&t.map((i=>i.toJSON()))}clone(){return new HU(se({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};u([h()],vu.prototype,"activeMediaInfoIndex",void 0),u([h({type:Object,json:{write:!0}})],vu.prototype,"attributes",void 0),u([h({type:String,json:{write:!0}})],vu.prototype,"description",void 0),u([h({types:[qU]})],vu.prototype,"mediaInfos",void 0),u([De("mediaInfos")],vu.prototype,"readMediaInfos",null),u([Ve("mediaInfos")],vu.prototype,"writeMediaInfos",null),u([h({type:String,json:{write:!0}})],vu.prototype,"title",void 0),u([h({type:["media"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],vu.prototype,"type",void 0),vu=HU=u([V("esri.popup.content.MediaContent")],vu);const a$=vu;var WU;let WE=WU=class extends ve{constructor(t){super(t),this.field=null,this.order=null}clone(){return new WU({field:this.field,order:this.order})}};u([h({type:String,json:{write:!0}})],WE.prototype,"field",void 0),u([h({type:["asc","desc"],json:{write:!0}})],WE.prototype,"order",void 0),WE=WU=u([V("esri.popup.support.RelatedRecordsInfoFieldOrder")],WE);const Tq=WE;let Fd=class extends bt.ClonableMixin(hm){constructor(e){super(e),this.description=null,this.displayCount=null,this.displayType="list",this.orderByFields=null,this.relationshipId=null,this.title=null,this.type="relationship"}};u([h({type:String,json:{write:!0}})],Fd.prototype,"description",void 0),u([h({type:Number,json:{type:si,write:!0}})],Fd.prototype,"displayCount",void 0),u([h({type:["list"],json:{write:{isRequired:!0}}})],Fd.prototype,"displayType",void 0),u([h({type:[Tq],json:{write:!0}})],Fd.prototype,"orderByFields",void 0),u([h({type:Number,json:{type:si,write:{isRequired:!0}}})],Fd.prototype,"relationshipId",void 0),u([h({type:String,json:{write:!0}})],Fd.prototype,"title",void 0),u([h({type:["relationship"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],Fd.prototype,"type",void 0),Fd=u([V("esri.popup.content.RelationshipContent")],Fd);const rM=Fd;var ZU;let ZE=ZU=class extends hm{constructor(t){super(t),this.text=null,this.type="text"}clone(){return new ZU({text:this.text})}};u([h({type:String,json:{write:!0}})],ZE.prototype,"text",void 0),u([h({type:["text"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],ZE.prototype,"type",void 0),ZE=ZU=u([V("esri.popup.content.TextContent")],ZE);const nd=ZE;let Yp=class extends bt.ClonableMixin(ve){constructor(e){super(e),this.title=null,this.description=null,this.type=null,this.associatedNetworkSourceId=null,this.associatedAssetGroup=null,this.associatedAssetType=null}};u([h({type:String,json:{write:!0}})],Yp.prototype,"title",void 0),u([h({type:String,json:{write:!0}})],Yp.prototype,"description",void 0),u([h({type:["attachment","connectivity","container","content","structure"],json:{write:!0}})],Yp.prototype,"type",void 0),u([h({type:Number,json:{type:si,write:!0}})],Yp.prototype,"associatedNetworkSourceId",void 0),u([h({type:Number,json:{type:si,write:!0}})],Yp.prototype,"associatedAssetGroup",void 0),u([h({type:Number,json:{type:si,write:!0}})],Yp.prototype,"associatedAssetType",void 0),Yp=u([V("esri.popup.support.UtilityNetworkAssociationType")],Yp);const wfe=Yp;let py=class extends bt.ClonableMixin(hm){constructor(e){super(e),this.description=null,this.displayCount=null,this.title=null,this.associationTypes=[],this.type="utility-network-associations"}};u([h({type:String,json:{write:!0}})],py.prototype,"description",void 0),u([h({type:Number,json:{type:si,write:!0}})],py.prototype,"displayCount",void 0),u([h({type:String,json:{write:!0}})],py.prototype,"title",void 0),u([h({type:[wfe],json:{write:!0}})],py.prototype,"associationTypes",void 0),u([at({utilityNetworkAssociations:"utility-network-associations"})],py.prototype,"type",void 0),py=u([V("esri.popup.content.UtilityNetworkAssociationsContent")],py);const Eq=py,DFe={base:null,key:"type",typeMap:{attachment:o$,media:a$,text:nd,expression:Ob,field:dw,relationship:rM,utilityNetworkAssociations:Eq}},zFe={base:null,key:"type",typeMap:{attachment:o$,media:a$,text:nd,expression:Ob,field:dw,relationship:rM}};var JU;let c0=JU=class extends ve{constructor(t){super(t),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new JU({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};u([h({type:String,json:{write:!0}})],c0.prototype,"name",void 0),u([h({type:String,json:{write:!0}})],c0.prototype,"title",void 0),u([h({type:String,json:{write:!0}})],c0.prototype,"expression",void 0),u([h({type:["string","number"],json:{write:!0}})],c0.prototype,"returnType",void 0),c0=JU=u([V("esri.popup.ExpressionInfo")],c0);const Ht=c0;var YU;let JE=YU=class extends ve{constructor(t){super(t),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new YU({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};u([h({type:Boolean,json:{write:!0}})],JE.prototype,"returnTopmostRaster",void 0),u([h({type:Boolean,json:{write:!0}})],JE.prototype,"showNoDataRecords",void 0),JE=YU=u([V("esri.popup.LayerOptions")],JE);const VFe=JE;var XU;let YE=XU=class extends ve{constructor(t){super(t),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new XU({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?se(this.orderByFields):null})}};u([h({type:Boolean,json:{write:!0}})],YE.prototype,"showRelatedRecords",void 0),u([h({type:[Tq],json:{write:!0}})],YE.prototype,"orderByFields",void 0),YE=XU=u([V("esri.popup.RelatedRecordsInfo")],YE);const GK=YE;var KU;let oc=KU=class extends dm.IdentifiableMixin(tt){constructor(t){super(t),this.active=!1,this.className=null,this.disabled=!1,this.icon=null,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new KU({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};u([h()],oc.prototype,"active",void 0),u([h()],oc.prototype,"className",void 0),u([h()],oc.prototype,"disabled",void 0),u([h()],oc.prototype,"icon",void 0),u([h()],oc.prototype,"id",void 0),u([h()],oc.prototype,"indicator",void 0),u([h()],oc.prototype,"title",void 0),u([h()],oc.prototype,"type",void 0),u([h()],oc.prototype,"visible",void 0),oc=KU=u([V("esri.support.actions.ActionBase")],oc);const bN=oc;var QU;let gL=QU=class extends bN{constructor(t){super(t),this.image=null,this.type="button"}clone(){return new QU({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};u([h()],gL.prototype,"image",void 0),gL=QU=u([V("esri.support.actions.ActionButton")],gL);const j$=gL;var e6;let XE=e6=class extends bN{constructor(t){super(t),this.image=null,this.type="toggle",this.value=!1}clone(){return new e6({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};u([h()],XE.prototype,"image",void 0),u([h()],XE.prototype,"value",void 0),XE=e6=u([V("esri.support.actions.ActionToggle")],XE);const Iq=XE,XT="relationships/",qK="expression/",jFe=Ze.ofType({key:"type",defaultKeyValue:"button",base:bN,typeMap:{button:j$,toggle:Iq}}),UFe={base:hm,key:"type",typeMap:{media:a$,custom:hfe,text:nd,attachments:o$,fields:dw,expression:Ob,relationship:rM,utilityNetworkAssociations:Eq}},_fe=new Set(["attachments","fields","media","text","expression","relationship"]),BFe=new Set([..._fe,"utility-network-associations"]);let Zn=class extends bt.ClonableMixin(ve){constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title=""}castContent(e){return Array.isArray(e)?e.map((i=>lp(UFe,i))):typeof e=="string"||typeof e=="function"||e instanceof HTMLElement||gp(e)?e:(Ie.getLogger(this).error("content error","unsupported content value",{value:e}),null)}readContent(e,i){const{popupElements:r}=i;return Array.isArray(r)&&r.length>0?this._readPopupInfoElements(i.description,i.mediaInfos,r):this._readPopupInfo(i)}writeWebSceneContent(e,i,r,n){this._writePopupTemplateContent(e,i,n)}writeWebMapContent(e,i,r,n){this._writePopupTemplateContent(e,i,n)}writeFieldInfos(e,i,r,n){const{content:s}=this,o=Array.isArray(s)?s:null;if(e){const a=o?o.filter((c=>c.type==="fields")):[],l=a.length&&a.every((c=>{var d;return(d=c.fieldInfos)==null?void 0:d.length}));i.fieldInfos=e.filter(Boolean).map((c=>{const d=c.toJSON(n);return l&&(d.visible=!1),d}))}if(o)for(const a of o)a.type==="fields"&&this._writeFieldsContent(a,i)}writeLayerOptions(e,i,r,n){i[r]=!e||e.showNoDataRecords===null&&e.returnTopmostRaster===null?null:e.toJSON(n)}writeTitle(e,i){i.title=e||""}async collectRequiredFields(e,i){const r=this.expressionInfos||[];await this._collectExpressionInfoFields(e,i,[...r,...this._getContentExpressionInfos(this.content,r)]),Ng(e,i,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(e){const i=new Set;return await this.collectRequiredFields(i,e),[...i].sort()}_writePopupTemplateContent(e,i,r){typeof e!="string"?Array.isArray(e)&&(i.popupElements=e.filter((n=>(r==null?void 0:r.origin)==="web-scene"?_fe.has(n.type):BFe.has(n.type))).map((n=>n==null?void 0:n.toJSON(r))),i.popupElements.forEach((n=>{n.type==="attachments"?this._writeAttachmentContent(i):n.type==="media"?this._writeMediaContent(n,i):n.type==="text"?this._writeTextContent(n,i):n.type==="relationship"&&this._writeRelationshipContent(n,i)}))):i.description=e}_writeFieldsContent(e,i){if(!Array.isArray(e.fieldInfos)||!e.fieldInfos.length)return;const r=se(e.fieldInfos);Array.isArray(i.fieldInfos)?r.forEach((n=>{const s=i.fieldInfos.find((o=>{var a,l;return((a=o.fieldName)==null?void 0:a.toLowerCase())===((l=n.fieldName)==null?void 0:l.toLowerCase())}));s?s.visible=!0:i.fieldInfos.push(n)})):i.fieldInfos=r}_writeAttachmentContent(e){e.showAttachments||(e.showAttachments=!0)}_writeRelationshipContent(e,i){var s,o;const r=((s=e.orderByFields)==null?void 0:s.map((a=>this._toFieldOrderJSON(a,e.relationshipId))))||[],n=[...((o=i.relatedRecordsInfo)==null?void 0:o.orderByFields)||[],...r];i.relatedRecordsInfo={showRelatedRecords:!0,...(n==null?void 0:n.length)&&{orderByFields:n}}}_writeTextContent(e,i){!i.description&&e.text&&(i.description=e.text)}_writeMediaContent(e,i){if(!Array.isArray(e.mediaInfos)||!e.mediaInfos.length)return;const r=se(e.mediaInfos);Array.isArray(i.mediaInfos)?i.mediaInfos=[...i.mediaInfos,...r]:i.mediaInfos=r}_readPopupInfoElements(e,i,r){const n={description:!1,mediaInfos:!1};return r.map((s=>s.type==="media"?(s.mediaInfos||!i||n.mediaInfos||(s.mediaInfos=i,n.mediaInfos=!0),a$.fromJSON(s)):s.type==="text"?(s.text||!e||n.description||(s.text=e,n.description=!0),nd.fromJSON(s)):s.type==="attachments"?o$.fromJSON(s):s.type==="fields"?dw.fromJSON(s):s.type==="expression"?Ob.fromJSON(s):s.type==="relationship"?rM.fromJSON(s):s.type==="utilityNetworkAssociations"?Eq.fromJSON(s):void 0)).filter(Boolean)}_toRelationshipContent(e){const{field:i,order:r}=e;if(!(i!=null&&i.startsWith(XT)))return null;const n=i.replace(XT,"").split("/");if(n.length!==2)return null;const s=parseInt(n[0],10),o=n[1];return!Number.isNaN(s)&&o?rM.fromJSON({relationshipId:s,orderByFields:[{field:o,order:r}]}):null}_toFieldOrderJSON(e,i){const{order:r,field:n}=e;return{field:`${XT}${i}/${n}`,order:r}}_readPopupInfo({description:e,mediaInfos:i,showAttachments:r,relatedRecordsInfo:n={showRelatedRecords:!1}}){const s=[];e?s.push(new nd({text:e})):s.push(new dw),Array.isArray(i)&&i.length&&s.push(a$.fromJSON({mediaInfos:i})),r&&s.push(o$.fromJSON({displayType:"auto"}));const{showRelatedRecords:o,orderByFields:a}=n;return o&&(a!=null&&a.length)&&a.forEach((l=>{const c=this._toRelationshipContent(l);c&&s.push(c)})),s.length?s:e}_getContentElementFields(e){const i=e==null?void 0:e.type;if(i==="attachments")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)];if(i==="custom")return e.outFields||[];if(i==="fields")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...this._getFieldInfoFields(e.fieldInfos??this.fieldInfos)];if(i==="media"){const r=e.mediaInfos||[];return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...r.reduce(((n,s)=>[...n,...this._getMediaInfoFields(s)]),[])]}return i==="text"?this._extractFieldNames(e.text):i==="relationship"||i==="utility-network-associations"?[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)]:[]}_getMediaInfoFields(e){const{caption:i,title:r,value:n}=e,s=n||{},{fields:o,normalizeField:a,tooltipField:l,sourceURL:c,linkURL:d}=s,f=[...this._extractFieldNames(r),...this._extractFieldNames(i),...this._extractFieldNames(c),...this._extractFieldNames(d),...o??[]];return a&&f.push(a),l&&f.push(l),f}_getContentExpressionInfos(e,i){return Array.isArray(e)?e.reduce(((r,n)=>[...r,...n.type==="expression"&&n.expressionInfo?[n.expressionInfo]:[]]),i):[]}_getContentFields(e){return typeof e=="string"?this._extractFieldNames(e):Array.isArray(e)?e.reduce(((i,r)=>[...i,...this._getContentElementFields(r)]),[]):[]}async _collectExpressionInfoFields(e,i,r){r&&await Promise.all(r.map((n=>io(e,i,n.expression))))}_getFieldInfoFields(e){return e?e.filter((({fieldName:i,visible:r})=>!(r!==void 0&&!r||!i||i.startsWith(XT)||i.startsWith(qK)))).map((i=>i.fieldName)):[]}_getActionsFields(e){return e?e.toArray().reduce(((i,r)=>[...i,...this._getActionFields(r)]),[]):[]}_getActionFields(e){const{className:i,title:r,type:n}=e,s=n==="button"||n==="toggle"?e.image:"";return[...this._extractFieldNames(r),...this._extractFieldNames(i),...this._extractFieldNames(s)]}_getTitleFields(e){return typeof e=="string"?this._extractFieldNames(e):[]}_extractFieldNames(e){return Sq(e).filter((i=>!(i.indexOf(XT)===0||i.indexOf(qK)===0)))}};u([h({type:jFe})],Zn.prototype,"actions",void 0),u([h()],Zn.prototype,"content",void 0),u([yi("content")],Zn.prototype,"castContent",null),u([De("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments","relatedRecordsInfo"])],Zn.prototype,"readContent",null),u([Ve("web-scene","content",{popupElements:{type:Ze.ofType(zFe)},showAttachments:{type:Boolean},mediaInfos:{type:Ze.ofType(qU)},description:{type:String},relatedRecordsInfo:{type:GK}})],Zn.prototype,"writeWebSceneContent",null),u([Ve("content",{popupElements:{type:Ze.ofType(DFe)},showAttachments:{type:Boolean},mediaInfos:{type:Ze.ofType(qU)},description:{type:String},relatedRecordsInfo:{type:GK}})],Zn.prototype,"writeWebMapContent",null),u([h({type:[Ht],json:{write:!0}})],Zn.prototype,"expressionInfos",void 0),u([h({type:[Ps]})],Zn.prototype,"fieldInfos",void 0),u([Ve("fieldInfos")],Zn.prototype,"writeFieldInfos",null),u([h({type:VFe})],Zn.prototype,"layerOptions",void 0),u([Ve("layerOptions")],Zn.prototype,"writeLayerOptions",null),u([h({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],Zn.prototype,"lastEditInfoEnabled",void 0),u([h()],Zn.prototype,"outFields",void 0),u([h()],Zn.prototype,"overwriteActions",void 0),u([h()],Zn.prototype,"returnGeometry",void 0),u([h({json:{type:String}})],Zn.prototype,"title",void 0),u([Ve("title")],Zn.prototype,"writeTitle",null),Zn=u([V("esri.PopupTemplate")],Zn);const pm=Zn;function bmt(t,e){switch(e.type){case"object-id":case"unique-id-simple":return t.attributes[e.fieldName];case"unique-id-composite":{const i=[];for(const r of e.fieldNames)i.push(t.attributes[r]??null);return JSON.stringify(i)}}}function GFe(t,e){var i,r,n;if("uniqueIdFields"in e&&((i=e.uniqueIdFields)!=null&&i.length)){if(e.uniqueIdFields.length===1)return(r=t.attributes)==null?void 0:r[e.uniqueIdFields[0]];const s=e.uniqueIdFields.map((o=>{var a;return(a=t.attributes)==null?void 0:a[o]}));return JSON.stringify(s)}return"objectIdField"in e&&e.objectIdField?(n=t.attributes)==null?void 0:n[e.objectIdField]:null}const HK=new Gt({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let qFe=0,wn=class extends ve{constructor(e){super(e),this.id="sym"+qFe++,this.type=null,this.color=new _e([0,0,0,1])}readColor(e){return(e==null?void 0:e[0])!=null?[e[0],e[1],e[2],e[3]/255]:e}async collectRequiredFields(e,i){}hash(){return JSON.stringify(this.toJSON())}clone(){}};u([h({type:HK.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:HK.write,isRequired:!0}}})],wn.prototype,"type",void 0),u([h({type:_e,json:{write:{allowNull:!0}}})],wn.prototype,"color",void 0),u([De("color")],wn.prototype,"readColor",null),wn=u([V("esri.symbols.Symbol")],wn);var t6;let hs=t6=class extends wn{constructor(t){super(t),this.data=null,this.type="cim"}readData(t,e){return e}writeData(t,e){Object.assign(e,t)}async collectRequiredFields(t,e){var i;if(((i=this.data)==null?void 0:i.type)==="CIMSymbolReference"){const r=this.data.primitiveOverrides;if(r){const n=r.map((s=>{const o=s.valueExpressionInfo;return o?io(t,e,o.expression):null}));await Promise.all(n)}}}clone(){return new t6({data:se(this.data)})}hash(){return cle(JSON.stringify(this.data)).toString()}};u([h({json:{write:!1}})],hs.prototype,"color",void 0),u([h({json:{write:!0}})],hs.prototype,"data",void 0),u([De("data",["symbol"])],hs.prototype,"readData",null),u([Ve("data",{})],hs.prototype,"writeData",null),u([at({CIMSymbolReference:"cim"},{readOnly:!0})],hs.prototype,"type",void 0),hs=t6=u([V("esri.symbols.CIMSymbol")],hs);let oa=class extends ve{constructor(e){super(e),this.enabled=!0,this.type=null,this.ignoreDrivers=!1}writeEnabled(e,i,r){e||(i[r]=e)}};u([h({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],oa.prototype,"enabled",void 0),u([Ve("enabled")],oa.prototype,"writeEnabled",null),u([h({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0,json:{write:{isRequired:!0}}})],oa.prototype,"type",void 0),oa=u([V("esri.symbols.Symbol3DLayer")],oa);function HFe(t,e){const i=e.transparency!=null?iM(e.transparency):1,r=e.color;return r&&Array.isArray(r)?new _e([r[0]||0,r[1]||0,r[2]||0,i]):null}function WFe(t,e){e.color=t.toJSON().slice(0,3);const i=dN(t.a);i!==0&&(e.transparency=i)}function Zg(t){return{type:_e,nonNullable:t==null?void 0:t.nonNullable,json:{type:[si],default:null,read:{source:["color","transparency"],reader:HFe},write:{target:{color:{type:[si],isRequired:t==null?void 0:t.colorRequiredOnWrite},transparency:{type:si}},writer:WFe}}}}const mp={type:Number,cast:Ti,json:{write:!0}};var bO;function xmt(t){return t==="emissive"?bO.Emissive:bO.Color}(function(t){t[t.Emissive=0]="Emissive",t[t.Color=1]="Color"})(bO||(bO={}));let u0=class extends ve{constructor(e){super(e),this.color=new _e([0,0,0,1]),this.extensionLength=0,this.size=ji(1)}clone(){}cloneProperties(){return{color:se(this.color),size:this.size,extensionLength:this.extensionLength}}};u([h({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0,isRequired:!0}}})],u0.prototype,"type",void 0),u([h(Zg({colorRequiredOnWrite:!0}))],u0.prototype,"color",void 0),u([h({...mp,json:{write:{overridePolicy:t=>({enabled:!!t})}}})],u0.prototype,"extensionLength",void 0),u([h(mp)],u0.prototype,"size",void 0),u0=u([V("esri.symbols.edges.Edges3D")],u0);const Cq=u0;var i6;let vL=i6=class extends Cq{constructor(t){super(t),this.type="sketch"}clone(){return new i6(this.cloneProperties())}};u([at({sketch:"sketch"},{readOnly:!0})],vL.prototype,"type",void 0),vL=i6=u([V("esri.symbols.edges.SketchEdges3D")],vL);const ZFe=vL;var r6;let bL=r6=class extends Cq{constructor(t){super(t),this.type="solid"}clone(){return new r6(this.cloneProperties())}};u([at({solid:"solid"},{readOnly:!0})],bL.prototype,"type",void 0),bL=r6=u([V("esri.symbols.edges.SolidEdges3D")],bL);const xfe=bL,Sfe={types:{key:"type",base:Cq,typeMap:{solid:xfe,sketch:ZFe}},json:{write:!0}};var n6;let J1=n6=class extends ve{constructor(){super(...arguments),this.strength=null,this.source="emissive"}clone(){const t={strength:this.strength,source:this.source};return new n6(t)}};u([h({json:{write:!1}})],J1.prototype,"strength",void 0),u([h({json:{write:!1}})],J1.prototype,"source",void 0),J1=n6=u([V("esri.symbols.support.Symbol3DEmissive")],J1);var s6;let Ga=s6=class extends ve{constructor(t){super(t),this.color=null,this.emissive=new J1({source:"emissive"})}clone(){var e,i;const t={color:((e=this.color)==null?void 0:e.clone())??null,emissive:((i=this.emissive)==null?void 0:i.clone())??null};return new s6(t)}};u([h(Zg())],Ga.prototype,"color",void 0),u([h({type:J1,json:{write:!1}})],Ga.prototype,"emissive",void 0),Ga=s6=u([V("esri.symbols.support.Symbol3DMaterial")],Ga);var o6,aS;let pf=(aS=class extends oa{constructor(e){super(e),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){var e,i;return new o6({edges:(e=this.edges)==null?void 0:e.clone(),enabled:this.enabled,material:(i=this.material)==null?void 0:i.clone(),castShadows:this.castShadows,size:this.size})}},o6=aS,aS);u([at({Extrude:"extrude"},{readOnly:!0})],pf.prototype,"type",void 0),u([h({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],pf.prototype,"size",void 0),u([h({type:Ga,json:{write:!0}})],pf.prototype,"material",void 0),u([h({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],pf.prototype,"castShadows",void 0),u([h(Sfe)],pf.prototype,"edges",void 0),pf=o6=u([V("esri.symbols.ExtrudeSymbol3DLayer")],pf);let lC=class extends ve{constructor(e){super(e)}clone(){throw new Error("Subclasses of LinePattern3D should implement their own clone method.")}};u([h({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],lC.prototype,"type",void 0),lC=u([V("esri.symbols.patterns.LinePattern3D")],lC);const JFe=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var a6;const YFe=is()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let ub=a6=class extends lC{constructor(t){super(t),this.type="style",this.style="solid"}clone(){const t={style:this.style};return new a6(t)}};u([h({type:["style"],json:{write:{isRequired:!0}}})],ub.prototype,"type",void 0),u([at(YFe),h({type:JFe,json:{write:{isRequired:!0}}})],ub.prototype,"style",void 0),ub=a6=u([V("esri.symbols.patterns.LineStylePattern3D")],ub);let cC=class extends ve{constructor(e){super(e),this.type="style"}clone(){throw new Error("Subclasses of Pattern3D should implement their own clone method.")}};u([h({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],cC.prototype,"type",void 0),cC=u([V("esri.symbols.patterns.Pattern3D")],cC);const XFe=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var l6;let Y1=l6=class extends cC{constructor(t){super(t),this.type="style",this.style="solid"}clone(){return new l6({style:this.style})}};u([h({type:["style"],json:{write:{isRequired:!0}}})],Y1.prototype,"type",void 0),u([h({type:XFe,json:{read:!0,write:{isRequired:!0}}})],Y1.prototype,"style",void 0),Y1=l6=u([V("esri.symbols.patterns.StylePattern3D")],Y1);const KFe={types:{key:"type",base:cC,typeMap:{style:Y1}},json:{write:!0}},$fe={types:{key:"type",base:lC,typeMap:{style:ub}},json:{write:!0}},uC=new _e("white"),QFe=new _e([255,255,255,0]);function eNe(t){return t.r===0&&t.g===0&&t.b===0}var c6;let dC=c6=class extends Ga{constructor(t){super(t),this.colorMixMode=null}clone(){var e,i;const t={color:((e=this.color)==null?void 0:e.clone())??null,colorMixMode:this.colorMixMode,emissive:((i=this.emissive)==null?void 0:i.clone())??null};return new c6(t)}};u([at({multiply:"multiply",replace:"replace",tint:"tint"})],dC.prototype,"colorMixMode",void 0),dC=c6=u([V("esri.symbols.support.Symbol3DFillMaterial")],dC);function tNe(t,e=!1){return t<=ile?e?new Array(t).fill(0):new Array(t):new Float64Array(t)}function Emt(t){return(tle(t)?t.byteLength/8:t.length)<=ile?Array.from(t):new Float64Array(t)}function Imt(t,e,i){return Array.isArray(t)?t.slice(e,e+i):t.subarray(e,e+i)}function b2(t=sNe){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function Mq(t,e,i,r,n,s,o=b2()){return o[0]=t,o[1]=e,o[2]=i,o[3]=r,o[4]=n,o[5]=s,o}function Cmt(t,e=b2()){return iNe(t,0,t.length/3,e)}function iNe(t,e,i,r=b2()){return Tfe(r,u6),rNe(r,t,e,i),r}function Mmt(t,e=tNe(24)){const[i,r,n,s,o,a]=t;return e[0]=i,e[1]=r,e[2]=n,e[3]=i,e[4]=r,e[5]=a,e[6]=i,e[7]=o,e[8]=n,e[9]=i,e[10]=o,e[11]=a,e[12]=s,e[13]=r,e[14]=n,e[15]=s,e[16]=r,e[17]=a,e[18]=s,e[19]=o,e[20]=n,e[21]=s,e[22]=o,e[23]=a,e}function kmt(t,e){const i=isFinite(t[2])||isFinite(t[5]);return new Qt(i?{xmin:t[0],xmax:t[3],ymin:t[1],ymax:t[4],zmin:t[2],zmax:t[5],spatialReference:e}:{xmin:t[0],xmax:t[3],ymin:t[1],ymax:t[4],spatialReference:e})}function Pmt(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[3]),t[4]=Math.max(t[4],e[4]),t[5]=Math.max(t[5],e[5])}function Amt(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[3]=Math.max(t[3],e[2]),t[4]=Math.max(t[4],e[3])}function Lmt(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[0]),t[4]=Math.max(t[4],e[1]),t[5]=Math.max(t[5],e[2])}function rNe(t,e,i=0,r=e.length/3){let n=t[0],s=t[1],o=t[2],a=t[3],l=t[4],c=t[5];for(let d=0;d<r;d++)n=Math.min(n,e[i+3*d]),s=Math.min(s,e[i+3*d+1]),o=Math.min(o,e[i+3*d+2]),a=Math.max(a,e[i+3*d]),l=Math.max(l,e[i+3*d+1]),c=Math.max(c,e[i+3*d+2]);t[0]=n,t[1]=s,t[2]=o,t[3]=a,t[4]=l,t[5]=c}function Rmt(t,e,i){const r=e.length;let n=t[0],s=t[1],o=t[2],a=t[3],l=t[4],c=t[5];if(i)for(let d=0;d<r;d++){const f=e[d];n=Math.min(n,f[0]),s=Math.min(s,f[1]),o=Math.min(o,f[2]),a=Math.max(a,f[0]),l=Math.max(l,f[1]),c=Math.max(c,f[2])}else for(let d=0;d<r;d++){const f=e[d];n=Math.min(n,f[0]),s=Math.min(s,f[1]),a=Math.max(a,f[0]),l=Math.max(l,f[1])}t[0]=n,t[1]=s,t[2]=o,t[3]=a,t[4]=l,t[5]=c}function Omt(t){for(let e=0;e<6;e++)if(!isFinite(t[e]))return!1;return!0}function w2(t){return t[0]>=t[3]?0:t[3]-t[0]}function _2(t){return t[1]>=t[4]?0:t[4]-t[1]}function x2(t){return t[2]>=t[5]?0:t[5]-t[2]}function Fmt(t){const e=w2(t),i=x2(t),r=_2(t);return Math.sqrt(e*e+i*i+r*r)}function Nmt(t,e=[0,0,0]){return e[0]=t[0]+w2(t)/2,e[1]=t[1]+_2(t)/2,e[2]=t[2]+x2(t)/2,e}function Dmt(t,e=[0,0,0]){return e[0]=w2(t),e[1]=_2(t),e[2]=x2(t),e}function zmt(t,e){return e[0]>=t[0]&&e[1]>=t[1]&&e[2]>=t[2]&&e[0]<=t[3]&&e[1]<=t[4]&&e[2]<=t[5]}function nNe(t,e){return Math.max(e[0],t[0])<=Math.min(e[3],t[3])&&Math.max(e[1],t[1])<=Math.min(e[4],t[4])&&Math.max(e[2],t[2])<=Math.min(e[5],t[5])}function Vmt(t,e){return e==null||nNe(t,e)}function jmt(t,e,i,r,n=t){return n[0]=t[0]+e,n[1]=t[1]+i,n[2]=t[2]+r,n[3]=t[3]+e,n[4]=t[4]+i,n[5]=t[5]+r,n}function Umt(t,e,i=t){const r=t[0]+w2(t)/2,n=t[1]+_2(t)/2,s=t[2]+x2(t)/2;return i[0]=r+(t[0]-r)*e,i[1]=n+(t[1]-n)*e,i[2]=s+(t[2]-s)*e,i[3]=r+(t[3]-r)*e,i[4]=n+(t[4]-n)*e,i[5]=s+(t[5]-s)*e,i}function Bmt(t,e){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Gmt(t,e,i=t){return i[0]=e[0],i[1]=e[1],i[2]=e[2],i!==t&&(i[3]=t[3],i[4]=t[4],i[5]=t[5]),i}function qmt(t,e,i=t){return i[3]=e[0],i[4]=e[1],i[5]=e[2],i!==t&&(i[0]=t[0],i[1]=t[1],i[2]=t[2]),t}function Tfe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function Hmt(t){return t?Tfe(t,u6):b2(u6)}function Wmt(t,e){return e||(e=_n()),e[0]=t[0],e[1]=t[1],e[2]=t[3],e[3]=t[4],e}function Zmt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=Number.NEGATIVE_INFINITY,t[3]=e[2],t[4]=e[3],t[5]=Number.POSITIVE_INFINITY,t}function Jmt(t,e,i,r,n){return t[0]=e,t[1]=i,t[2]=Number.NEGATIVE_INFINITY,t[3]=r,t[4]=n,t[5]=Number.POSITIVE_INFINITY,t}function WK(t){return t.length===6}function Ymt(t){return w2(t)===0&&_2(t)===0&&x2(t)===0}function Xmt(t,e,i){if(t==null||e==null)return t===e;if(!WK(t)||!WK(e))return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}const u6=[1/0,1/0,1/0,-1/0,-1/0,-1/0],sNe=[0,0,0,0,0,0];b2();function Kmt(t,{isPrimitive:e,width:i,depth:r,height:n}){const s=e?10:1;if(i==null&&n==null&&r==null)return[s*t[0],s*t[1],s*t[2]];const o=z$(i,r,n);let a;for(let l=0;l<3;l++){const c=o[l];if(c!=null){a=c/t[l];break}}for(let l=0;l<3;l++)o[l]==null&&(o[l]=t[l]*a);return o}const oNe=Mq(-.5,-.5,-.5,.5,.5,.5),aNe=Mq(-.5,-.5,0,.5,.5,1),lNe=Mq(-.5,-.5,0,.5,.5,.5);function Qmt(t){switch(t){case"sphere":case"cube":case"diamond":return oNe;case"cylinder":case"cone":case"inverted-cone":return aNe;case"tetrahedron":return lNe;default:return}}const kq=["butt","square","round"],cNe=[...kq,"none"],Efe=["miter","bevel","round"];var d6;let d0=d6=class extends ve{constructor(t){super(t),this.color=new _e([0,0,0,1]),this.size=ji(1),this.pattern=null,this.patternCap="butt"}clone(){const t={color:this.color!=null?this.color.clone():null,size:this.size,pattern:this.pattern!=null?this.pattern.clone():null,patternCap:this.patternCap};return new d6(t)}};u([h(Zg({colorRequiredOnWrite:!0}))],d0.prototype,"color",void 0),u([h({...mp,json:{write:{isRequired:!0}}})],d0.prototype,"size",void 0),u([h($fe)],d0.prototype,"pattern",void 0),u([h({type:kq,json:{default:"butt",write:{overridePolicy(){return{enabled:this.pattern!=null}}}}})],d0.prototype,"patternCap",void 0),d0=d6=u([V("esri.symbols.support.Symbol3DOutline")],d0);var wL,lS;let ea=(lS=class extends oa{constructor(e){super(e),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const e={edges:this.edges!=null?this.edges.clone():null,enabled:this.enabled,material:this.material!=null?this.material.clone():null,pattern:this.pattern!=null?this.pattern.clone():null,castShadows:this.castShadows,outline:this.outline!=null?this.outline.clone():null};return new wL(e)}static fromSimpleFillSymbol(e){var n,s,o;const i=e.outline&&e.outline.style&&e.outline.style!=="solid"?new ub({style:e.outline.style}):null,r={size:((n=e.outline)==null?void 0:n.width)??0,color:(((s=e.outline)==null?void 0:s.color)??uC).clone(),pattern:i};return i&&((o=e.outline)!=null&&o.cap)&&(r.patternCap=e.outline.cap),new wL({material:new dC({color:(e.color??QFe).clone()}),pattern:e.style&&e.style!=="solid"?new Y1({style:e.style}):null,outline:r})}},wL=lS,lS);u([at({Fill:"fill"},{readOnly:!0})],ea.prototype,"type",void 0),u([h({type:dC,json:{write:!0}})],ea.prototype,"material",void 0),u([h(KFe)],ea.prototype,"pattern",void 0),u([h({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],ea.prototype,"castShadows",void 0),u([h({type:d0,json:{write:!0}})],ea.prototype,"outline",void 0),u([h(Sfe)],ea.prototype,"edges",void 0),ea=wL=u([V("esri.symbols.FillSymbol3DLayer")],ea);var h6;const uNe=is()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let h0=h6=class extends ve{constructor(t){super(t)}readHref(t,e,i){return t?rm(t,i):e.dataURI}writeHref(t,e,i,r){t&&(cm(t)?e.dataURI=t:(e.href=tw(t,r),Ha(e.href)&&(e.href=Yu(e.href))))}clone(){return new h6({href:this.href,primitive:this.primitive})}};u([h({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],h0.prototype,"href",void 0),u([De("href")],h0.prototype,"readHref",null),u([Ve("href",{href:{type:String},dataURI:{type:String}})],h0.prototype,"writeHref",null),u([at(uNe)],h0.prototype,"primitive",void 0),h0=h6=u([V("esri.symbols.support.IconSymbol3DLayerResource")],h0);const dNe="circle";var p6;let X1=p6=class extends tt{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new p6({x:this.x,y:this.y})}};u([h({type:Number})],X1.prototype,"x",void 0),u([h({type:Number})],X1.prototype,"y",void 0),X1=p6=u([V("esri.symbols.support.Symbol3DAnchorPosition2D")],X1);var f6;let KE=f6=class extends ve{constructor(t){super(t),this.color=new _e([0,0,0,1]),this.size=ji(1)}clone(){const t={color:this.color!=null?this.color.clone():null,size:this.size};return new f6(t)}};u([h(Zg({colorRequiredOnWrite:!0}))],KE.prototype,"color",void 0),u([h({...mp,json:{write:{isRequired:!0}}})],KE.prototype,"size",void 0),KE=f6=u([V("esri.symbols.support.Symbol3DIconOutline")],KE);var Z_,cS;let Js=(cS=class extends oa{constructor(e){super(e),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=null,this.outline=null,this.angle=0}clone(){return new Z_({anchor:this.anchor,anchorPosition:se(this.anchorPosition),enabled:this.enabled,material:se(this.material),outline:se(this.outline),resource:se(this.resource),angle:this.angle,size:this.size})}static fromSimpleMarkerSymbol(e){const i=e.color||uC,r=ZK(e),n=e.outline&&e.outline.width>0?{size:e.outline.width,color:(e.outline.color||uC).clone()}:null;return new Z_({size:e.size,angle:e.angle,resource:{primitive:pNe((()=>Ie.getLogger(this.prototype)),e.style)},material:{color:i},outline:n,anchor:r?"relative":void 0,anchorPosition:r})}static fromPictureMarkerSymbol(e){const i=!e.color||eNe(e.color)?uC:e.color,r=ZK(e);return new Z_({size:e.width<=e.height?e.height:e.width,angle:e.angle,resource:{href:e.url},material:{color:i.clone()},anchor:r?"relative":void 0,anchorPosition:r})}static fromCIMSymbol(e){return new Z_({resource:{href:Cce({mediaType:"application/json",data:JSON.stringify(e.data)})}})}},Z_=cS,cS);function ZK(t){const e="width"in t?t.width:t.size,i="height"in t?t.height:t.size,r=JK(t.xoffset),n=JK(t.yoffset);return(r||n)&&e&&i?{x:-r/e,y:n/i}:null}function JK(t){return isFinite(t)?t:0}u([h({type:Ga,json:{write:!0}})],Js.prototype,"material",void 0),u([h({type:h0,json:{write:!0}})],Js.prototype,"resource",void 0),u([at({Icon:"icon"},{readOnly:!0})],Js.prototype,"type",void 0),u([h({...mp,json:{write:{isRequired:!0}}})],Js.prototype,"size",void 0),u([at({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"},{default:"center"})],Js.prototype,"anchor",void 0),u([h({type:X1,json:{type:[Number],read:{reader:t=>new X1({x:t[0],y:t[1]})},write:{writer:(t,e)=>{e.anchorPosition=[t.x,t.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],Js.prototype,"anchorPosition",void 0),u([h({type:KE,json:{write:!0}})],Js.prototype,"outline",void 0),u([h({type:Number,json:{write:!0,default:0}})],Js.prototype,"angle",void 0),Js=Z_=u([V("esri.symbols.IconSymbol3DLayer")],Js);const hNe={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function pNe(t,e){return hNe[e]||(t().warn(`${e} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}const fNe=["begin","end","begin-end"],Ife=["arrow","circle","square","diamond","cross","x"];let Tf=class extends bt.ClonableMixin(ve){constructor(e){super(e),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(e){return e!=null&&e.placement===this.placement&&e.style===this.style&&(this.color==null&&e.color==null||this.color!=null&&e.color!=null&&this.color.toJSON()===e.color.toJSON())}};u([h({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0,isRequired:!0}}})],Tf.prototype,"type",void 0),u([h({type:fNe,json:{default:"begin-end",write:!0}})],Tf.prototype,"placement",void 0),u([h({type:Ife,json:{default:"arrow",write:!0}})],Tf.prototype,"style",void 0),u([h({type:_e,json:{type:[si],default:null,write:!0}})],Tf.prototype,"color",void 0),Tf=u([V("esri.symbols.LineStyleMarker3D")],Tf);var _L,uS;let Qo=(uS=class extends oa{constructor(e){super(e),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=ji(1),this.pattern=null,this.marker=null}clone(){const e={enabled:this.enabled,material:this.material!=null?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:this.pattern!=null?this.pattern.clone():null,marker:this.marker!=null?this.marker.clone():null};return new _L(e)}static fromSimpleLineSymbol(e){var r;const i={enabled:!0,size:e.width??ji(1),cap:e.cap||"butt",join:e.join||"miter",pattern:e.style?new ub({style:e.style}):null,material:new Ga({color:(e.color||uC).clone()}),marker:e.marker?new Tf({placement:e.marker.placement,style:e.marker.style,color:((r=e.marker.color)==null?void 0:r.clone())??null}):null};return new _L(i)}},_L=uS,uS);u([h({type:Ga,json:{write:!0}})],Qo.prototype,"material",void 0),u([at({Line:"line"},{readOnly:!0})],Qo.prototype,"type",void 0),u([h({type:Efe,json:{write:!0,default:"miter"}})],Qo.prototype,"join",void 0),u([h({type:kq,json:{write:!0,default:"butt"}})],Qo.prototype,"cap",void 0),u([h({...mp,json:{write:{isRequired:!0}}})],Qo.prototype,"size",void 0),u([h($fe)],Qo.prototype,"pattern",void 0),u([h({types:{key:"type",base:Tf,typeMap:{style:Tf}},json:{write:!0}})],Qo.prototype,"marker",void 0),Qo=_L=u([V("esri.symbols.LineSymbol3DLayer")],Qo);var m6;const mNe=is()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let QE=m6=class extends ve{clone(){return new m6({href:this.href,primitive:this.primitive})}};u([h({type:String,json:{read:UF,write:iw}})],QE.prototype,"href",void 0),u([at(mNe)],QE.prototype,"primitive",void 0),QE=m6=u([V("esri.symbols.support.ObjectSymbol3DLayerResource")],QE);const yNe="sphere";var y6;let Z0=y6=class extends tt{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new y6({x:this.x,y:this.y,z:this.z})}};u([h({type:Number})],Z0.prototype,"x",void 0),u([h({type:Number})],Z0.prototype,"y",void 0),u([h({type:Number})],Z0.prototype,"z",void 0),Z0=y6=u([V("esri.symbols.support.Symbol3DAnchorPosition3D")],Z0);var g6,dS;let Ts=(dS=class extends oa{constructor(e){super(e),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){var e,i,r;return new g6({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:(e=this.anchorPosition)==null?void 0:e.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:((i=this.material)==null?void 0:i.clone())??null,castShadows:this.castShadows,resource:(r=this.resource)==null?void 0:r.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}},g6=dS,dS);u([h({type:Ga,json:{write:!0}})],Ts.prototype,"material",void 0),u([h({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Ts.prototype,"castShadows",void 0),u([h({type:QE,json:{write:!0}})],Ts.prototype,"resource",void 0),u([at({Object:"object"},{readOnly:!0})],Ts.prototype,"type",void 0),u([h({type:Number,json:{write:!0}})],Ts.prototype,"width",void 0),u([h({type:Number,json:{write:!0}})],Ts.prototype,"height",void 0),u([h({type:Number,json:{write:!0}})],Ts.prototype,"depth",void 0),u([at({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"},{default:"origin"})],Ts.prototype,"anchor",void 0),u([h({type:Z0,json:{type:[Number],read:{reader:t=>new Z0({x:t[0],y:t[1],z:t[2]})},write:{writer:(t,e)=>{e.anchorPosition=[t.x,t.y,t.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],Ts.prototype,"anchorPosition",void 0),u([h({type:Number,json:{write:!0}})],Ts.prototype,"heading",void 0),u([h({type:Number,json:{write:!0}})],Ts.prototype,"tilt",void 0),u([h({type:Number,json:{write:!0}})],Ts.prototype,"roll",void 0),u([h({readOnly:!0})],Ts.prototype,"isPrimitive",null),Ts=g6=u([V("esri.symbols.ObjectSymbol3DLayer")],Ts);var v6,hS;let qs=(hS=class extends oa{constructor(e){super(e),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(e,i){return e??(i.height==null&&i.size!=null?i.size:void 0)}readHeight(e,i){return e??(i.width==null&&i.size!=null?i.size:void 0)}clone(){return new v6({enabled:this.enabled,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}},v6=hS,hS);u([h({type:Ga,json:{write:!0}})],qs.prototype,"material",void 0),u([h({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],qs.prototype,"castShadows",void 0),u([at({Path:"path"},{readOnly:!0})],qs.prototype,"type",void 0),u([h({type:["circle","quad"],json:{write:!0,default:"circle"}})],qs.prototype,"profile",void 0),u([h({type:Efe,json:{write:!0,default:"miter"}})],qs.prototype,"join",void 0),u([h({type:cNe,json:{write:!0,default:"butt"}})],qs.prototype,"cap",void 0),u([h({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],qs.prototype,"width",void 0),u([De("width",["width","size","height"])],qs.prototype,"readWidth",null),u([h({type:Number,json:{write:!0}})],qs.prototype,"height",void 0),u([De("height",["height","size","width"])],qs.prototype,"readHeight",null),u([h({type:["center","bottom","top"],json:{write:!0,default:"center"}})],qs.prototype,"anchor",void 0),u([h({type:["heading","all"],json:{write:!0,default:"all"}})],qs.prototype,"profileRotation",void 0),qs=v6=u([V("esri.symbols.PathSymbol3DLayer")],qs);const gNe=["none","underline","line-through"],vNe=["normal","italic","oblique"],bNe=["normal","lighter","bold","bolder"],Cfe={type:Number,cast:t=>{const e=na(t);return e===0?1:to(e,.1,4)},nonNullable:!0},wNe=["left","right","center"],_Ne=["baseline","top","middle","bottom"],Mfe={type:wNe,nonNullable:!0},kfe={type:_Ne,nonNullable:!0},xNe=8;var b6;let ci=b6=class extends ve{constructor(t){super(t),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(t){return Ti(t)}clone(){return new b6({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};u([h({type:gNe,json:{default:"none",write:!0}})],ci.prototype,"decoration",void 0),u([h({type:String,json:{write:!0}})],ci.prototype,"family",void 0),u([h({type:Number,json:{write:{overridePolicy:(t,e,i)=>({enabled:!i||!i.textSymbol3D})}}})],ci.prototype,"size",void 0),u([yi("size")],ci.prototype,"castSize",null),u([h({type:vNe,json:{default:"normal",write:!0}})],ci.prototype,"style",void 0),u([h({type:bNe,json:{default:"normal",write:!0}})],ci.prototype,"weight",void 0),ci=b6=u([V("esri.symbols.Font")],ci);var w6;let K1=w6=class extends ve{constructor(){super(...arguments),this.color=new _e([0,0,0,1]),this.size=0}clone(){const t={color:se(this.color),size:this.size};return new w6(t)}};u([h(Zg())],K1.prototype,"color",void 0),u([h(mp)],K1.prototype,"size",void 0),K1=w6=u([V("esri.symbols.support.Symbol3DHalo")],K1);let hC=class extends bt.ClonableMixin(ve){constructor(e){super(e),this.color=null}};u([h(Zg())],hC.prototype,"color",void 0),hC=u([V("esri.symbols.support.Symbol3DTextBackground")],hC);var xL,pS;let us=(pS=class extends oa{constructor(e){super(e),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline"}get font(){return this._get("font")||null}set font(e){e!=null&&this._userSize!=null&&(e.size=this._userSize),this._set("font",e)}writeFont(e,i,r,n){const s={...n,textSymbol3D:!0};i.font=e.write({},s),delete i.font.size}get size(){var e;return this._userSize!=null?this._userSize:((e=this.font)==null?void 0:e.size)!=null?this.font.size:9}set size(e){this._userSize=e,this.font!=null&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const e=new xL({enabled:this.enabled,font:this.font&&se(this.font),halo:this.halo&&se(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:this.material!=null?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:se(this.background)});return e._userSize=this._userSize,e}static fromTextSymbol(e){return new xL({font:e.font!=null?e.font.clone():new ci,halo:SNe(e.haloColor,e.haloSize),horizontalAlignment:e.horizontalAlignment,lineHeight:e.lineHeight,material:e.color?new Ga({color:e.color.clone()}):null,text:e.text,verticalAlignment:e.verticalAlignment,background:e.backgroundColor?new hC({color:e.backgroundColor.clone()}):null})}},xL=pS,pS);function SNe(t,e){return t&&e!=null&&e>0?new K1({color:se(t),size:e}):null}u([h({type:ci,json:{write:!0}})],us.prototype,"font",null),u([Ve("font")],us.prototype,"writeFont",null),u([h({type:K1,json:{write:!0}})],us.prototype,"halo",void 0),u([h({...Mfe,json:{default:"center",write:!0}})],us.prototype,"horizontalAlignment",void 0),u([h({...Cfe,json:{default:1,write:!0}})],us.prototype,"lineHeight",void 0),u([h({type:Ga,json:{write:!0}})],us.prototype,"material",void 0),u([h({type:hC,json:{write:!0}})],us.prototype,"background",void 0),u([h(mp)],us.prototype,"size",null),u([h({type:String,json:{write:!0}})],us.prototype,"text",void 0),u([at({Text:"text"},{readOnly:!0})],us.prototype,"type",void 0),u([h({...kfe,json:{default:"baseline",write:!0}})],us.prototype,"verticalAlignment",void 0),us=xL=u([V("esri.symbols.TextSymbol3DLayer")],us);var _6,fS;let ff=(fS=class extends oa{constructor(e){super(e),this.color=x6.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new _6({color:se(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}},_6=fS,fS);u([h({type:_e,nonNullable:!0,json:{type:[si],write:(t,e,i)=>e[i]=t.toArray(_e.AlphaMode.UNLESS_OPAQUE),default:()=>x6.clone(),defaultEquals:t=>t.toCss(!0)===x6.toCss(!0)}})],ff.prototype,"color",void 0),u([at({Water:"water"},{readOnly:!0})],ff.prototype,"type",void 0),u([h({type:["small","medium","large"],json:{write:!0,default:"medium"}})],ff.prototype,"waterbodySize",void 0),u([h({type:Number,json:{write:!0,default:null}})],ff.prototype,"waveDirection",void 0),u([h({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],ff.prototype,"waveStrength",void 0),ff=_6=u([V("esri.symbols.WaterSymbol3DLayer")],ff);const x6=new _e([0,119,190]);var S6;let zu=S6=class extends tt{constructor(t){super(t),this.name=null,this.styleUrl=null,this.styleName=null,this.portal=null}clone(){return new S6({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};u([h({type:String})],zu.prototype,"name",void 0),u([h({type:String})],zu.prototype,"styleUrl",void 0),u([h({type:String})],zu.prototype,"styleName",void 0),u([h({type:ze})],zu.prototype,"portal",void 0),zu=S6=u([V("esri.symbols.support.StyleOrigin")],zu);var $6;let Fb=$6=class extends tt{constructor(){super(...arguments),this.url=""}clone(){return new $6({url:this.url})}};u([h({type:String})],Fb.prototype,"url",void 0),Fb=$6=u([V("esri.symbols.support.Thumbnail")],Fb);const Pfe={icon:Js,object:Ts,line:Qo,path:qs,fill:ea,extrude:pf,text:us,water:ff},$Ne=Ze.ofType({base:oa,key:"type",typeMap:Pfe,errorContext:"symbol-layer"});let za=class extends wn{constructor(e){super(e),this.styleOrigin=null,this.thumbnail=null,this.type=null;const i=this.__accessor__&&this.__accessor__.metadata&&this.__accessor__.metadata.symbolLayers,r=i==null?void 0:i.type,n=r||Ze;this._set("symbolLayers",new n)}get color(){return null}set color(e){this.constructed&&Ie.getLogger(this).error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(e){nm(e,this._get("symbolLayers"))}readStyleOrigin(e,i,r){if(e.styleUrl&&e.name){const n=rm(e.styleUrl,r);return new zu({styleUrl:n,name:e.name})}if(e.styleName&&e.name)return new zu({portal:(r==null?void 0:r.portal)||ze.getDefault(),styleName:e.styleName,name:e.name});r!=null&&r.messages&&r.messages.push(new Dl("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:r,definition:e}))}writeStyleOrigin(e,i,r,n){if(e.styleUrl&&e.name){let s=tw(e.styleUrl,n);Ha(s)&&(s=Yu(s)),i.styleOrigin={styleUrl:s,name:e.name}}else e.styleName&&e.name&&(e.portal&&(n!=null&&n.portal)&&!Ice(e.portal.restUrl,n.portal.restUrl)?n!=null&&n.messages&&n.messages.push(new Dl("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):i.styleOrigin={styleName:e.styleName,name:e.name})}normalizeCtorArgs(e){return e instanceof oa||e&&Pfe[e.type]?{symbolLayers:[e]}:Array.isArray(e)?{symbolLayers:e}:e}};u([h({json:{read:!1,write:!1}})],za.prototype,"color",null),u([h({type:$Ne,nonNullable:!0,json:{write:!0}}),yi(rpe)],za.prototype,"symbolLayers",null),u([h({type:zu})],za.prototype,"styleOrigin",void 0),u([De("styleOrigin")],za.prototype,"readStyleOrigin",null),u([Ve("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],za.prototype,"writeStyleOrigin",null),u([h({type:Fb,json:{read:!1}})],za.prototype,"thumbnail",void 0),u([h({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],za.prototype,"type",void 0),za=u([V("esri.symbols.Symbol3D")],za);let Q1=class extends ve{constructor(e){super(e),this.visible=!0}clone(){throw new Error("Subclasses of Callout3D should implement their own clone method.")}};u([h({type:["line"],constructOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,isRequired:!0}}})],Q1.prototype,"type",void 0),u([h({readOnly:!0})],Q1.prototype,"visible",void 0),Q1=u([V("esri.symbols.callouts.Callout3D")],Q1);var T6;let SL=T6=class extends ve{constructor(t){super(t),this.color=new _e("white")}clone(){return new T6({color:se(this.color)})}};u([h(Zg({colorRequiredOnWrite:!0}))],SL.prototype,"color",void 0),SL=T6=u([V("esri.symbols.callouts.LineCallout3DBorder")],SL);const TNe=SL;var E6;let mf=E6=class extends Q1{constructor(t){super(t),this.type="line",this.color=new _e([0,0,0,1]),this.size=ji(1),this.border=null}get visible(){return this.size>0&&this.color!=null&&this.color.a>0}clone(){return new E6({color:se(this.color),size:this.size,border:se(this.border)})}};u([at({line:"line"})],mf.prototype,"type",void 0),u([h(Zg({colorRequiredOnWrite:!0}))],mf.prototype,"color",void 0),u([h({...mp,json:{write:{isRequired:!0}}})],mf.prototype,"size",void 0),u([h({type:TNe,json:{write:!0}})],mf.prototype,"border",void 0),u([h({readOnly:!0})],mf.prototype,"visible",null),mf=E6=u([V("esri.symbols.callouts.LineCallout3D")],mf);function Pq(t){if(!t)return!1;const e=t.verticalOffset;return!(!e||e.screenLength<=0||e.maxWorldLength!=null&&e.maxWorldLength<=0)}function Afe(t){if(!t||!t.supportsCallout||!t.supportsCallout())return!1;const e=t.callout;return!!(e!=null&&e.visible)&&!!Pq(t)}function nyt(t){return t.type==="point-3d"||t.type==="label-3d"}function syt(t){return t.horizontalAlignment==="center"}const Lfe={types:{key:"type",base:Q1,typeMap:{line:mf}},json:{write:!0}};var I6;let qy=I6=class extends ve{constructor(t){super(t),this.screenLength=0,this.minWorldLength=0,this.maxWorldLength=null}clone(){return new I6({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};u([h({...mp,json:{write:{isRequired:!0}}})],qy.prototype,"screenLength",void 0),u([h({type:Number,nonNullable:!0,json:{write:!0,default:0}})],qy.prototype,"minWorldLength",void 0),u([h({type:Number,json:{write:!0}})],qy.prototype,"maxWorldLength",void 0),qy=I6=u([V("esri.symbols.support.Symbol3DVerticalOffset")],qy);var $L;const Rfe=Ze.ofType({base:null,key:"type",typeMap:{text:us}});let Pu=$L=class extends za{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new Rfe,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return Afe(this)}hasVisibleVerticalOffset(){return Pq(this)}clone(){return new $L({styleOrigin:se(this.styleOrigin),symbolLayers:se(this.symbolLayers),thumbnail:se(this.thumbnail),callout:se(this.callout),verticalOffset:se(this.verticalOffset)})}static fromTextSymbol(t){return new $L({symbolLayers:new Ze([us.fromTextSymbol(t)])})}};u([h({type:qy,json:{write:!0}})],Pu.prototype,"verticalOffset",void 0),u([h(Lfe)],Pu.prototype,"callout",void 0),u([h({json:{read:!1,write:!1}})],Pu.prototype,"styleOrigin",void 0),u([h({type:Rfe})],Pu.prototype,"symbolLayers",void 0),u([at({LabelSymbol3D:"label-3d"},{readOnly:!0})],Pu.prototype,"type",void 0),Pu=$L=u([V("esri.symbols.LabelSymbol3D")],Pu);var TL;const Ofe=Ze.ofType({base:null,key:"type",typeMap:{line:Qo,path:qs}}),ENe=Ze.ofType({base:null,key:"type",typeMap:{line:Qo,path:qs}});let Bu=TL=class extends za{constructor(t){super(t),this.symbolLayers=new Ofe,this.type="line-3d"}clone(){return new TL({styleOrigin:se(this.styleOrigin),symbolLayers:se(this.symbolLayers),thumbnail:se(this.thumbnail)})}static fromSimpleLineSymbol(t){return new TL({symbolLayers:new Ze([Qo.fromSimpleLineSymbol(t)])})}};u([h({type:Ofe,json:{type:ENe}})],Bu.prototype,"symbolLayers",void 0),u([at({LineSymbol3D:"line-3d"},{readOnly:!0})],Bu.prototype,"type",void 0),Bu=TL=u([V("esri.symbols.LineSymbol3D")],Bu);var EL;const Ffe=Ze.ofType({base:null,key:"type",typeMap:{fill:ea}});let Gf=EL=class extends za{constructor(t){super(t),this.symbolLayers=new Ffe,this.type="mesh-3d"}clone(){return new EL({styleOrigin:se(this.styleOrigin),symbolLayers:se(this.symbolLayers),thumbnail:se(this.thumbnail)})}static fromSimpleFillSymbol(t){return new EL({symbolLayers:new Ze([ea.fromSimpleFillSymbol(t)])})}};u([h({type:Ffe})],Gf.prototype,"symbolLayers",void 0),u([at({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],Gf.prototype,"type",void 0),Gf=EL=u([V("esri.symbols.MeshSymbol3D")],Gf);let eI=class extends wn{constructor(e){super(e),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};u([at({esriSLS:"simple-line"},{readOnly:!0})],eI.prototype,"type",void 0),u([h({type:Number,cast:Ti,json:{write:!0}})],eI.prototype,"width",void 0),eI=u([V("esri.symbols.LineSymbol")],eI);var C6;let Nd=C6=class extends ve{constructor(t){super(t),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(t,e,i,r){e[i]=(r==null?void 0:r.origin)==="web-map"?"arrow":t}set color(t){this._set("color",t)}readColor(t){return(t==null?void 0:t[0])!=null?[t[0],t[1],t[2],t[3]/255]:t}writeColor(t,e,i,r){(r==null?void 0:r.origin)==="web-map"||(e[i]=t)}clone(){return new C6({color:se(this.color),placement:this.placement,style:this.style})}hash(){var t;return`${this.placement}.${(t=this.color)==null?void 0:t.hash()}.${this.style}`}};u([h({type:["begin","end","begin-end"],json:{write:!0}})],Nd.prototype,"placement",void 0),u([at({"line-marker":"line-marker"},{readOnly:!0}),h({json:{origins:{"web-map":{write:!1}}}})],Nd.prototype,"type",void 0),u([h({type:Ife})],Nd.prototype,"style",void 0),u([Ve("style")],Nd.prototype,"writeStyle",null),u([h({type:_e,value:null,json:{write:{allowNull:!0}}})],Nd.prototype,"color",null),u([De("color")],Nd.prototype,"readColor",null),u([Ve("color")],Nd.prototype,"writeColor",null),Nd=C6=u([V("esri.symbols.LineSymbolMarker")],Nd);const INe=Nd;var M6;const Gz=new Gt({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let Xr=M6=class extends eI{constructor(...t){super(...t),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(t,e,i,r,n,s){if(t&&typeof t!="string")return t;const o={};return t!=null&&(o.style=t),e!=null&&(o.color=e),i!=null&&(o.width=Ti(i)),r!=null&&(o.cap=r),n!=null&&(o.join=n),s!=null&&(o.miterLimit=Ti(s)),o}clone(){var t;return new M6({color:se(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:(t=this.marker)==null?void 0:t.clone()})}hash(){var t,e;return`${super.hash()}.${(t=this.color)==null?void 0:t.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${(e=this.marker)==null?void 0:e.hash()}`}};u([at({esriSLS:"simple-line"},{readOnly:!0})],Xr.prototype,"type",void 0),u([h({type:Gz.apiValues,json:{read:Gz.read,write:Gz.write}})],Xr.prototype,"style",void 0),u([h({type:["butt","round","square"],json:{write:{overridePolicy:(t,e,i)=>({enabled:t!=="round"&&(i==null?void 0:i.origin)==null})}}})],Xr.prototype,"cap",void 0),u([h({type:["miter","round","bevel"],json:{write:{overridePolicy:(t,e,i)=>({enabled:t!=="round"&&(i==null?void 0:i.origin)==null})}}})],Xr.prototype,"join",void 0),u([h({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":INe}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],Xr.prototype,"marker",void 0),u([h({type:Number,json:{read:!1,write:!1}})],Xr.prototype,"miterLimit",void 0),Xr=M6=u([V("esri.symbols.SimpleLineSymbol")],Xr);let ex=class extends wn{constructor(e){super(e),this.outline=null,this.type=null}hash(){var e;return`${this.type}.${(e=this.outline)==null?void 0:e.hash()}`}};u([h({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":Xr}},json:{default:null,write:!0}})],ex.prototype,"outline",void 0),u([h({type:["simple-fill","picture-fill"],readOnly:!0})],ex.prototype,"type",void 0),ex=u([V("esri.symbols.FillSymbol")],ex);function CNe(t,e,i){return e.imageData?Cce({mediaType:e.contentType||"image/png",isBase64:!0,data:e.imageData}):Nfe(e.url,i)}function Nfe(t,e){if(!Ha(t)){const i=kNe(e);if(i)return Pg(i,"images",t)}return rm(t,e)}function MNe(t,e,i,r){if(cm(t)){const n=ew(t);if(!n)return;e.contentType=n.mediaType,e.imageData=n.data,i&&i.imageData===e.imageData&&i.url&&iw(i.url,e,"url",r)}else iw(t,e,"url",r)}const Dfe={json:{read:{source:["imageData","url"],reader:CNe},write:{writer(t,e,i,r){MNe(t,e,this.source,r)}}}},zfe={readOnly:!0,json:{read:{source:["imageData","url"],reader(t,e,i){const r={};return e.imageData&&(r.imageData=e.imageData),e.contentType&&(r.contentType=e.contentType),e.url&&(r.url=Nfe(e.url,i)),r}}}};function kNe(t){var n,s;if(!t)return null;const{origin:e,layer:i}=t;if(e!=="service"&&e!=="portal-item")return null;const r=i==null?void 0:i.type;return r==="feature"||r==="stream"?(n=i.parsedUrl)==null?void 0:n.path:r==="map-image"||r==="tile"?(s=t.url)==null?void 0:s.path:null}var k6;let Pa=k6=class extends ex{constructor(...t){super(...t),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(t,e,i,r){if(t&&typeof t!="string"&&t.imageData==null)return t;const n={};return t&&(n.url=t),e&&(n.outline=e),i!=null&&(n.width=Ti(i)),r!=null&&(n.height=Ti(r)),n}clone(){const t=new k6({color:se(this.color),height:this.height,outline:se(this.outline),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return t._set("source",se(this.source)),t}hash(){var t;return`${super.hash()}.${(t=this.color)==null?void 0:t.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};u([at({esriPFS:"picture-fill"},{readOnly:!0})],Pa.prototype,"type",void 0),u([h(Dfe)],Pa.prototype,"url",void 0),u([h({type:Number,json:{write:!0}})],Pa.prototype,"xscale",void 0),u([h({type:Number,json:{write:!0}})],Pa.prototype,"yscale",void 0),u([h({type:Number,cast:Ti,json:{write:!0}})],Pa.prototype,"width",void 0),u([h({type:Number,cast:Ti,json:{write:!0}})],Pa.prototype,"height",void 0),u([h({type:Number,cast:Ti,json:{write:!0}})],Pa.prototype,"xoffset",void 0),u([h({type:Number,cast:Ti,json:{write:!0}})],Pa.prototype,"yoffset",void 0),u([h(zfe)],Pa.prototype,"source",void 0),Pa=k6=u([V("esri.symbols.PictureFillSymbol")],Pa);let yf=class extends wn{constructor(e){super(e),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};u([h({type:Number,json:{read:t=>t&&-1*t,write:(t,e)=>e.angle=t&&-1*t}})],yf.prototype,"angle",void 0),u([h({type:["simple-marker","picture-marker"],readOnly:!0})],yf.prototype,"type",void 0),u([h({type:Number,cast:Ti,json:{write:!0}})],yf.prototype,"xoffset",void 0),u([h({type:Number,cast:Ti,json:{write:!0}})],yf.prototype,"yoffset",void 0),u([h({cast:t=>t==="auto"?t:na(Ti(t)),json:{write:!0}})],yf.prototype,"size",void 0),yf=u([V("esri.symbols.MarkerSymbol")],yf);var P6;let Ko=P6=class extends yf{constructor(...t){super(...t),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string"&&t.imageData==null)return t;const r={};return t&&(r.url=t),e!=null&&(r.width=Ti(e)),i!=null&&(r.height=Ti(i)),r}readHeight(t,e){return e.size||t}readWidth(t,e){return e.size||t}clone(){const t=new P6({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return t._set("source",se(this.source)),t}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};u([h({json:{write:!1}})],Ko.prototype,"color",void 0),u([at({esriPMS:"picture-marker"},{readOnly:!0})],Ko.prototype,"type",void 0),u([h(Dfe)],Ko.prototype,"url",void 0),u([h(zfe)],Ko.prototype,"source",void 0),u([h({type:Number,cast:Ti,json:{write:!0}})],Ko.prototype,"height",void 0),u([De("height",["height","size"])],Ko.prototype,"readHeight",null),u([h({type:Number,cast:Ti,json:{write:!0}})],Ko.prototype,"width",void 0),u([h({json:{write:!1}})],Ko.prototype,"size",void 0),Ko=P6=u([V("esri.symbols.PictureMarkerSymbol")],Ko);var p0;const Vfe=Ze.ofType({base:null,key:"type",typeMap:{icon:Js,object:Ts,text:us}});let sa=p0=class extends za{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.symbolLayers=new Vfe,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const t of this.symbolLayers.items)switch(t.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return Afe(this)}hasVisibleVerticalOffset(){return Pq(this)}clone(){return new p0({verticalOffset:se(this.verticalOffset),callout:se(this.callout),styleOrigin:se(this.styleOrigin),symbolLayers:se(this.symbolLayers),thumbnail:se(this.thumbnail)})}static fromSimpleMarkerSymbol(t){return new p0({symbolLayers:new Ze([Js.fromSimpleMarkerSymbol(t)])})}static fromPictureMarkerSymbol(t){return new p0({symbolLayers:new Ze([Js.fromPictureMarkerSymbol(t)])})}static fromCIMSymbol(t){var r,n;if(((n=(r=t.data)==null?void 0:r.symbol)==null?void 0:n.type)!=="CIMPointSymbol")return null;const i=t.data.symbol;return new p0(i!=null&&i.callout?{symbolLayers:new Ze([Js.fromCIMSymbol(t)]),callout:new mf({size:.5,color:new _e([0,0,0])}),verticalOffset:new qy({screenLength:40})}:{symbolLayers:new Ze([Js.fromCIMSymbol(t)])})}static fromTextSymbol(t){return new p0({symbolLayers:new Ze([us.fromTextSymbol(t)])})}};u([h({type:qy,json:{write:!0}})],sa.prototype,"verticalOffset",void 0),u([h(Lfe)],sa.prototype,"callout",void 0),u([h({type:Vfe,json:{origins:{"web-scene":{write:!0}}}})],sa.prototype,"symbolLayers",void 0),u([at({PointSymbol3D:"point-3d"},{readOnly:!0})],sa.prototype,"type",void 0),sa=p0=u([V("esri.symbols.PointSymbol3D")],sa);var tI;const jfe=Ze.ofType({base:null,key:"type",typeMap:{extrude:pf,fill:ea,icon:Js,line:Qo,object:Ts,text:us,water:ff}});let Ac=tI=class extends za{constructor(t){super(t),this.symbolLayers=new jfe,this.type="polygon-3d"}initialize(){const t=e=>{e.type==="line"&&Mg(Ie.getLogger(this),"LineSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use FillSymbol3DLayer.outline instead.",version:"4.28"}),e.type==="text"&&Mg(Ie.getLogger(this),"TextSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use Labels instead.",version:"4.28"})};for(const e of this.symbolLayers)t(e);this.addHandles(eo((()=>this.symbolLayers),"after-add",(({item:e})=>t(e)),td))}clone(){return new tI({styleOrigin:se(this.styleOrigin),symbolLayers:se(this.symbolLayers),thumbnail:se(this.thumbnail)})}static fromJSON(t){var i;const e=new tI;if(e.read(t),e.symbolLayers.length===2&&e.symbolLayers.at(0).type==="fill"&&e.symbolLayers.at(1).type==="line"){const r=e.symbolLayers.at(0),n=e.symbolLayers.at(1);!n.enabled||(i=t.symbolLayers)!=null&&i[1]&&t.symbolLayers[1].enable===!1||(r.outline={size:n.size,color:n.material!=null?n.material.color:null}),e.symbolLayers.removeAt(1)}return e}static fromSimpleFillSymbol(t){return new tI({symbolLayers:new Ze([ea.fromSimpleFillSymbol(t)])})}};u([h({type:jfe,json:{write:!0}})],Ac.prototype,"symbolLayers",void 0),u([at({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],Ac.prototype,"type",void 0),Ac=tI=u([V("esri.symbols.PolygonSymbol3D")],Ac);var A6;const qz=new Gt({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let So=A6=class extends ex{constructor(...t){super(...t),this.color=new _e([0,0,0,.25]),this.outline=new Xr,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string")return t;const r={};return t&&(r.style=t),e&&(r.outline=e),i&&(r.color=i),r}clone(){return new A6({color:se(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};u([h()],So.prototype,"color",void 0),u([h()],So.prototype,"outline",void 0),u([at({esriSFS:"simple-fill"},{readOnly:!0})],So.prototype,"type",void 0),u([h({type:qz.apiValues,json:{read:qz.read,write:qz.write}})],So.prototype,"style",void 0),So=A6=u([V("esri.symbols.SimpleFillSymbol")],So);var L6;const Hz=new Gt({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let Fr=L6=class extends yf{constructor(...t){super(...t),this.color=new _e([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new Xr}normalizeCtorArgs(t,e,i,r){if(t&&typeof t!="string")return t;const n={};return t&&(n.style=t),e!=null&&(n.size=Ti(e)),i&&(n.outline=i),r&&(n.color=r),n}writeColor(t,e){t&&this.style!=="x"&&this.style!=="cross"&&(e.color=t.toJSON()),t===null&&(e.color=null)}set path(t){this.style="path",this._set("path",t)}clone(){return new L6({angle:this.angle,color:se(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var t;return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${(t=this.outline)==null?void 0:t.hash()}`}};u([h()],Fr.prototype,"color",void 0),u([Ve("color")],Fr.prototype,"writeColor",null),u([at({esriSMS:"simple-marker"},{readOnly:!0})],Fr.prototype,"type",void 0),u([h()],Fr.prototype,"size",void 0),u([h({type:Hz.apiValues,json:{read:Hz.read,write:Hz.write}})],Fr.prototype,"style",void 0),u([h({type:String,json:{write:!0}})],Fr.prototype,"path",null),u([h({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":Xr}},json:{default:null,write:!0}})],Fr.prototype,"outline",void 0),Fr=L6=u([V("esri.symbols.SimpleMarkerSymbol")],Fr);var R6;let Tt=R6=class extends wn{constructor(...t){super(...t),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new ci,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string")return t;const r={};return t&&(r.text=t),e&&(r.font=e),i&&(r.color=i),r}writeLineWidth(t,e,i,r){r&&typeof r!="string"?r.origin:e[i]=t}castLineWidth(t){return Ti(t)}writeLineHeight(t,e,i,r){r&&typeof r!="string"?r.origin:e[i]=t}clone(){return new R6({angle:this.angle,backgroundColor:se(this.backgroundColor),borderLineColor:se(this.borderLineColor),borderLineSize:this.borderLineSize,color:se(this.color),font:this.font&&this.font.clone(),haloColor:se(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var t,e,i;return`${(t=this.backgroundColor)==null?void 0:t.hash()}.${this.borderLineColor}.${this.borderLineSize}.${(e=this.color)==null?void 0:e.hash()}.${this.font&&this.font.hash()}.${(i=this.haloColor)==null?void 0:i.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};u([h({type:_e,json:{write:!0}})],Tt.prototype,"backgroundColor",void 0),u([h({type:_e,json:{write:!0}})],Tt.prototype,"borderLineColor",void 0),u([h({type:Number,json:{write:!0},cast:Ti})],Tt.prototype,"borderLineSize",void 0),u([h({type:ci,json:{write:!0}})],Tt.prototype,"font",void 0),u([h({...Mfe,json:{write:!0}})],Tt.prototype,"horizontalAlignment",void 0),u([h({type:Boolean,json:{write:!0}})],Tt.prototype,"kerning",void 0),u([h({type:_e,json:{write:!0}})],Tt.prototype,"haloColor",void 0),u([h({type:Number,cast:Ti,json:{write:!0}})],Tt.prototype,"haloSize",void 0),u([h({type:Boolean,json:{write:!0}})],Tt.prototype,"rightToLeft",void 0),u([h({type:Boolean,json:{write:!0}})],Tt.prototype,"rotated",void 0),u([h({type:String,json:{write:!0}})],Tt.prototype,"text",void 0),u([at({esriTS:"text"},{readOnly:!0})],Tt.prototype,"type",void 0),u([h({...kfe,json:{write:!0}})],Tt.prototype,"verticalAlignment",void 0),u([h({type:Number,cast:Ti,json:{write:!0}})],Tt.prototype,"xoffset",void 0),u([h({type:Number,cast:Ti,json:{write:!0}})],Tt.prototype,"yoffset",void 0),u([h({type:Number,json:{read:t=>t&&-1*t,write:(t,e)=>e.angle=t&&-1*t}})],Tt.prototype,"angle",void 0),u([h({type:Number,json:{write:!0}})],Tt.prototype,"width",void 0),u([h({type:Number})],Tt.prototype,"lineWidth",void 0),u([Ve("lineWidth")],Tt.prototype,"writeLineWidth",null),u([yi("lineWidth")],Tt.prototype,"castLineWidth",null),u([h(Cfe)],Tt.prototype,"lineHeight",void 0),u([Ve("lineHeight")],Tt.prototype,"writeLineHeight",null),Tt=R6=u([V("esri.symbols.TextSymbol")],Tt);var O6;let Is=O6=class extends wn{constructor(t){super(t),this.color=null,this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get _fetchCacheKey(){const t=this.portal!=null?this.portal:ze.getDefault(),e=t.user?t.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${e}:${t.url}`}read(t,e){this.portal=e==null?void 0:e.portal,super.read(t,e)}clone(){return new O6({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(t){return this._fetchSymbol(t)}async fetchCIMSymbol(t){Kle(Ie.getLogger(this),"WebStyleSymbol.fetchCIMSymbol is deprecated in favour of WebStyleSymbol.fetchSymbol which now supports both web and cim symbology",{version:"4.33",replacement:"WebStyleSymbol.fetchSymbol",see:"https://arcg.is/0CXPTr#fetchSymbol",warnOnce:!0});const e=await this._fetchSymbol({...t,acceptedFormats:["cim"]});if((e==null?void 0:e.type)!=="cim")throw new ie("webstylesymbol:fetchCIMSymbol","Resolved web style symbol is not of type 'cim'");return e}async _fetchSymbol(t){const e=t!=null?t.cache:null,i=e?this._fetchCacheKey:null;if(e!=null){const o=i&&e.get(i);if(o)return o.clone()}const{resolveWebStyleSymbol:r}=await ye(()=>Promise.resolve().then(()=>hQe),void 0);Wi(t);const n=r(this,{portal:this.portal},t);n.catch((o=>{Ie.getLogger(this).error("#fetchSymbol()","Failed to create symbol from style",o)}));const s=await n;return e!=null&&e.set(i,s.clone()),s}};u([h({json:{write:!1}})],Is.prototype,"color",void 0),u([h({type:String,json:{write:!0}})],Is.prototype,"styleName",void 0),u([h({type:ze,json:{write:!1}})],Is.prototype,"portal",void 0),u([h({type:String,json:{read:UF,write:iw}})],Is.prototype,"styleUrl",void 0),u([h({type:Fb,json:{read:!1}})],Is.prototype,"thumbnail",void 0),u([h({type:String,json:{write:!0}})],Is.prototype,"name",void 0),u([at({styleSymbolReference:"web-style"},{readOnly:!0})],Is.prototype,"type",void 0),u([h()],Is.prototype,"_fetchCacheKey",null),Is=O6=u([V("esri.symbols.WebStyleSymbol")],Is);function wN(t){if(!t)return!1;switch(t.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function vp(t){switch(t==null?void 0:t.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const ag={base:wn,key:"type",typeMap:{"simple-fill":So,"picture-fill":Pa,"picture-marker":Ko,"simple-line":Xr,"simple-marker":Fr,text:Tt,"label-3d":Pu,"line-3d":Bu,"mesh-3d":Gf,"point-3d":sa,"polygon-3d":Ac,"web-style":Is,cim:hs},errorContext:"symbol"},cyt={base:wn,key:"type",typeMap:{"picture-marker":Ko,"simple-marker":Fr,"point-3d":sa,cim:hs},errorContext:"symbol"},uyt={base:wn,key:"type",typeMap:{"simple-line":Xr,"line-3d":Bu,cim:hs},errorContext:"symbol"},dyt={base:wn,key:"type",typeMap:{"simple-fill":So,"picture-fill":Pa,"polygon-3d":Ac,cim:hs},errorContext:"symbol"},PNe={base:wn,key:"type",typeMap:{"picture-marker":Ko,"simple-marker":Fr,text:Tt,"web-style":Is,cim:hs},errorContext:"symbol"},ANe=C$({types:ag}),Ufe={base:wn,key:"type",typeMap:{"simple-fill":So,"picture-fill":Pa,"picture-marker":Ko,"simple-line":Xr,"simple-marker":Fr,text:Tt,"line-3d":Bu,"mesh-3d":Gf,"point-3d":sa,"polygon-3d":Ac,"web-style":Is,cim:hs},errorContext:"symbol"},LNe={base:wn,key:"type",typeMap:{text:Tt,"label-3d":Pu},errorContext:"symbol"},YK={base:wn,key:"type",typeMap:{"line-3d":Bu,"mesh-3d":Gf,"point-3d":sa,"polygon-3d":Ac,"web-style":Is,cim:hs},errorContext:"symbol"},RNe={base:wn,key:"type",typeMap:{"label-3d":Pu},errorContext:"symbol"},Bfe=lp(ag);var F6;function ONe(t){if(!t)return null;const e={};for(const i in t){const r=hp(t[i]);r&&(e[i]=r)}return Object.keys(e).length!==0?e:null}function FNe(t){if(t==null)return null;const e={};for(const i in t){const r=t[i];r&&(e[i]=r.toJSON())}return Object.keys(e).length!==0?e:null}var mS;let qi=(mS=class extends bt.ClonableMixin(ve){constructor(e){super(e),this.isAggregate=!1,this.layer=null,this.origin=null,this.sourceLayer=null,this._version=0,Object.defineProperty(this,"uid",{value:BA(),configurable:!0}),Object.defineProperty(this,"_lastMeshTransform",{value:{},configurable:!0,writable:!0,enumerable:!1}),arguments.length>1&&CEe(Ie.getLogger(this),"Graphic",{version:"4.30"})}initialize(){this._watchMeshGeometryChanges()}set aggregateGeometries(e){const i=this._get("aggregateGeometries");JSON.stringify(i)!==JSON.stringify(e)&&this._set("aggregateGeometries",e)}set attributes(e){const i=this._get("attributes");i!==e&&(this._set("attributes",e),this._notifyLayer("attributes",i,e))}set geometry(e){const i=this._get("geometry");i!==e&&(this._set("geometry",e),(e==null?void 0:e.type)!=="mesh"&&this._notifyLayer("geometry",i,e))}set popupTemplate(e){const i=this._get("popupTemplate");i!==e&&(this._set("popupTemplate",e),this._notifyLayer("popupTemplate",i,e))}set symbol(e){const i=this._get("symbol");i!==e&&(this._set("symbol",e),this._notifyLayer("symbol",i,e))}get version(){return this._version}set visible(e){const i=this._get("visible");i!==e&&(this._set("visible",e),this._notifyLayer("visible",i,e))}cloneShallow(){return new F6({aggregateGeometries:this.aggregateGeometries,attributes:this.attributes,geometry:this.geometry,isAggregate:this.isAggregate,layer:this.layer,popupTemplate:this.popupTemplate,sourceLayer:this.sourceLayer,symbol:this.symbol,visible:this.visible,origin:this.origin})}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;const i=this.origin&&"layer"in this.origin?this.origin.layer:null;for(const r of[i,this.sourceLayer,this.layer])if(r){if("popupTemplate"in r&&r.popupTemplate)return r.popupTemplate;if(e&&"defaultPopupTemplate"in r&&r.defaultPopupTemplate!=null)return r.defaultPopupTemplate}return null}getAttribute(e){var i;return(i=this.attributes)==null?void 0:i[e]}setAttribute(e,i){if(this.attributes){const r=this.getAttribute(e);this.attributes[e]=i,this._notifyLayer("attributes",r,i,e)}else this.attributes={[e]:i}}getObjectId(){const e=this.sourceLayer??this.layer;return e?GFe(this,e):null}getGlobalId(){const e=this.sourceLayer??this.layer;return e&&"globalIdField"in e&&e.globalIdField?this.getAttribute(e.globalIdField):null}toJSON(){var e;return{aggregateGeometries:FNe(this.aggregateGeometries),geometry:this.geometry!=null?this.geometry.toJSON():null,symbol:this.symbol!=null?this.symbol.toJSON():null,attributes:qC(this.attributes)?this.attributes.toJSON():{...this.attributes},popupTemplate:((e=this.popupTemplate)==null?void 0:e.toJSON())??null}}notifyMeshTransformChanged(e={}){const{geometry:i}=this;if((i==null?void 0:i.type)==="mesh"){const r={origin:i.origin,transform:i.transform};this._notifyLayer("origin-transform",r,r,e.action)}}_notifyLayer(e,i,r,n){if(this._version++,!this.layer||!("graphicChanged"in this.layer))return;const s={graphic:this,property:e,oldValue:i,newValue:r};e==="origin-transform"&&(s.action=n),e==="attributes"&&(s.attributeName=n),this.layer.graphicChanged(s)}_watchMeshGeometryChanges(){this.addHandles([Sn((()=>{var e,i;return((e=this.geometry)==null?void 0:e.type)==="mesh"&&this.geometry.vertexSpace.origin?{localMatrix:(i=this.geometry.transform)==null?void 0:i.localMatrix,origin:this.geometry.vertexSpace.origin}:void 0}),(({localMatrix:e,origin:i})=>{this._lastMeshTransform.localMatrix===e&&this._lastMeshTransform.origin===i||(this._lastMeshTransform.localMatrix=e,this._lastMeshTransform.origin=i,this.notifyMeshTransformChanged())})),Sn((()=>{var e;return((e=this.geometry)==null?void 0:e.type)==="mesh"?{vertexAttributes:this.geometry.vertexAttributes}:void 0}),(()=>{var i;const e=this.geometry;(e==null?void 0:e.type)==="mesh"&&e.vertexSpace.origin?(this._lastMeshTransform.localMatrix=(i=e.transform)==null?void 0:i.localMatrix,this._lastMeshTransform.origin=e.vertexSpace.origin):(this._lastMeshTransform.localMatrix=void 0,this._lastMeshTransform.origin=void 0),this._notifyLayer("geometry",this.geometry,this.geometry)}),{equals:(e,i)=>e===i,sync:!0})])}},F6=mS,mS);u([h({value:null,json:{read:ONe}})],qi.prototype,"aggregateGeometries",null),u([h({value:null})],qi.prototype,"attributes",null),u([h({value:null,types:R$,json:{read:hp}})],qi.prototype,"geometry",null),u([h({type:Boolean})],qi.prototype,"isAggregate",void 0),u([h({clonable:!1})],qi.prototype,"layer",void 0),u([h({clonable:"reference"})],qi.prototype,"origin",void 0),u([h({type:pm,value:null})],qi.prototype,"popupTemplate",null),u([h({clonable:"reference"})],qi.prototype,"sourceLayer",void 0),u([h({value:null,types:ag})],qi.prototype,"symbol",null),u([h({clonable:!1,json:{read:!1,write:!1}})],qi.prototype,"_version",void 0),u([h({type:Boolean,value:!0})],qi.prototype,"visible",null),qi=F6=u([V("esri.Graphic")],qi);let pC=class extends sC{_own(e){e.layer&&"remove"in e.layer&&e.layer!==this.owner&&e.layer.remove(e),e.layer=this.owner}_release(e){e.layer===this.owner&&(e.layer=null)}};u([lG({Type:qi,ensureType:En(qi)})],pC.prototype,"itemType",void 0),pC=u([V("esri.support.GraphicsCollection")],pC);let fy=class extends tt{constructor(e){super(e),this.view=null,this.baseLayerViews=new Ze,this.referenceLayerViews=new Ze,this._loadingHandle=$e((()=>{var i,r;return(r=(i=this.view)==null?void 0:i.map)==null?void 0:r.basemap}),(i=>{i&&i.load().catch((()=>{}))}),kt)}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null);for(const e of this.baseLayerViews)e.destroy();this.baseLayerViews.length=0;for(const e of this.referenceLayerViews)e.destroy();this.referenceLayerViews.length=0}get suspended(){var e;return((e=this.view)==null?void 0:e.suspended)??!0}get updating(){var i,r,n;if((i=this.view)!=null&&i.suspended)return!1;const e=(n=(r=this.view)==null?void 0:r.map)==null?void 0:n.basemap;return!!(e!=null&&e.loaded)&&(this.baseLayerViews.some((s=>s.updating))||this.referenceLayerViews.some((s=>s.updating)))}};u([h({constructOnly:!0})],fy.prototype,"view",void 0),u([h({readOnly:!0})],fy.prototype,"baseLayerViews",void 0),u([h({readOnly:!0})],fy.prototype,"referenceLayerViews",void 0),u([h({readOnly:!0})],fy.prototype,"suspended",null),u([h({type:Boolean,readOnly:!0})],fy.prototype,"updating",null),fy=u([V("esri.views.BasemapView")],fy);const NNe=fy;let pl=class extends tt{constructor(e){super(e),this.factor=1.5,this.offset=Rs(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};u([h({type:Number})],pl.prototype,"factor",void 0),u([h({nonNullable:!0})],pl.prototype,"offset",void 0),u([h()],pl.prototype,"position",void 0),u([h({type:Number,range:{min:0}})],pl.prototype,"size",void 0),u([h()],pl.prototype,"maskUrl",void 0),u([h()],pl.prototype,"maskEnabled",void 0),u([h()],pl.prototype,"overlayUrl",void 0),u([h()],pl.prototype,"overlayEnabled",void 0),u([h({readOnly:!0})],pl.prototype,"version",null),u([h({type:Boolean})],pl.prototype,"visible",void 0),pl=u([V("esri.views.Magnifier")],pl);const Gfe=pl;let fC=class{constructor(e){this._observable=new gw,this._map=new Map(e)}get size(){return vt(this._observable),this._map.size}clear(){this._map.size>0&&(this._map.clear(),this._observable.notify())}delete(e){const i=this._map.delete(e);return i&&this._observable.notify(),i}entries(){return vt(this._observable),this._map.entries()}forEach(e,i){vt(this._observable),this._map.forEach(((r,n)=>e.call(i,r,n,this)),i)}get(e){return vt(this._observable),this._map.get(e)}has(e){return vt(this._observable),this._map.has(e)}keys(){return vt(this._observable),this._map.keys()}set(e,i){return this._map.set(e,i),this._observable.notify(),this}values(){return vt(this._observable),this._map.values()}[Symbol.iterator](){return vt(this._observable),this._map[Symbol.iterator]()}[Symbol.dispose](){this._observable.destroy()}get[Symbol.toStringTag](){return this._map[Symbol.toStringTag]}};var N6;let db=N6=class extends ve{constructor(t){super(t),this.name=null,this.code=null}clone(){return new N6({name:this.name,code:this.code})}};u([h({type:String,json:{write:{isRequired:!0}}})],db.prototype,"name",void 0),u([h({type:[String,Number],json:{write:{isRequired:!0}}})],db.prototype,"code",void 0),db=N6=u([V("esri.layers.support.CodedValue")],db);const DNe=new Gt({inherited:"inherited",codedValue:"coded-value",range:"range"});let lg=class extends ve{constructor(e){super(e),this.name=null,this.type=null}};u([h({type:String,json:{write:!0}})],lg.prototype,"name",void 0),u([at(DNe),h({json:{write:{isRequired:!0}}})],lg.prototype,"type",void 0),lg=u([V("esri.layers.support.Domain")],lg);var D6,yS;let cg=(yS=class extends lg{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let i=null;if(this.codedValues){const r=String(e);this.codedValues.some((n=>(String(n.code)===r&&(i=n.name),!!i)))}return i}clone(){return new D6({codedValues:se(this.codedValues),name:this.name})}},D6=yS,yS);u([h({type:[db],json:{write:{isRequired:!0}}})],cg.prototype,"codedValues",void 0),u([at({codedValue:"coded-value"})],cg.prototype,"type",void 0),cg=D6=u([V("esri.layers.support.CodedValueDomain")],cg);var z6,gS;let mC=(gS=class extends lg{constructor(e){super(e),this.type="inherited"}clone(){return new z6}},z6=gS,gS);u([at({inherited:"inherited"})],mC.prototype,"type",void 0),mC=z6=u([V("esri.layers.support.InheritedDomain")],mC);var V6,vS;let J0=(vS=class extends lg{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new V6({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}},V6=vS,vS);u([h({json:{type:[Number],read:{source:"range",reader:(t,e)=>{var i;return(i=e.range)==null?void 0:i[1]}},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:"range",writer(t,e,i){e[i]=[this.minValue||0,t]},isRequired:!0}}})],J0.prototype,"maxValue",void 0),u([h({json:{type:[Number],read:{source:"range",reader:(t,e)=>{var i;return(i=e.range)==null?void 0:i[0]}},write:{target:"range",writer(t,e,i){e[i]=[t,this.maxValue||0]},isRequired:!0}}})],J0.prototype,"minValue",void 0),u([at({range:"range"})],J0.prototype,"type",void 0),J0=V6=u([V("esri.layers.support.RangeDomain")],J0);const qfe={key:"type",base:lg,typeMap:{range:J0,"coded-value":cg,inherited:mC}};function _N(t){if(!(t!=null&&t.type))return null;switch(t.type){case"range":return J0.fromJSON(t);case"codedValue":return cg.fromJSON(t);case"inherited":return mC.fromJSON(t)}return null}const Aq=new Gt({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"});var j6;const zNe=new Gt({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});var bS;let cs=(bS=class extends ve{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=void 0,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(e,{description:i}){let r=null;try{r=i?JSON.parse(i):null}catch{}return(r==null?void 0:r.value)??null}readValueType(e,{description:i}){let r=null;try{r=i?JSON.parse(i):null}catch{}return r?zNe.fromJSON(r.fieldValueType):null}clone(){var e;return new j6({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:((e=this.domain)==null?void 0:e.clone())??null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}},j6=bS,bS);u([h({type:String,json:{write:!0}})],cs.prototype,"alias",void 0),u([h({type:[String,Number],json:{write:{allowNull:!0}}})],cs.prototype,"defaultValue",void 0),u([h()],cs.prototype,"description",void 0),u([De("description")],cs.prototype,"readDescription",null),u([h({types:qfe,json:{read:{reader:_N},write:!0}})],cs.prototype,"domain",void 0),u([h({type:Boolean,json:{write:!0}})],cs.prototype,"editable",void 0),u([h({type:si,json:{write:{overridePolicy:t=>({enabled:Number.isFinite(t)})}}})],cs.prototype,"length",void 0),u([h({type:String,json:{write:!0}})],cs.prototype,"name",void 0),u([h({type:Boolean,json:{write:!0}})],cs.prototype,"nullable",void 0),u([at(Aq)],cs.prototype,"type",void 0),u([h()],cs.prototype,"valueType",void 0),u([De("valueType",["description"])],cs.prototype,"readValueType",null),u([h({type:Boolean,json:{read:!1}})],cs.prototype,"visible",void 0),cs=j6=u([V("esri.layers.support.Field")],cs);var U6;let J_=U6=class extends ve{constructor(t){super(t),this.type="map-layer"}clone(){const{mapLayerId:t,gdbVersion:e}=this;return new U6({mapLayerId:t,gdbVersion:e})}};u([at({mapLayer:"map-layer"}),h({json:{write:{isRequired:!0}}})],J_.prototype,"type",void 0),u([h({type:si,json:{write:{isRequired:!0}}})],J_.prototype,"mapLayerId",void 0),u([h({type:String,json:{write:!0}})],J_.prototype,"gdbVersion",void 0),J_=U6=u([V("esri.layers.support.source.MapLayerSource")],J_);var B6;let Xp=B6=class extends ve{constructor(t){super(t),this.type="query-table"}clone(){const{workspaceId:t,query:e,oidFields:i,spatialReference:r,geometryType:n}=this,s={workspaceId:t,query:e,oidFields:i,spatialReference:(r==null?void 0:r.clone())??void 0,geometryType:n};return new B6(s)}};u([at({queryTable:"query-table"}),h({json:{write:{isRequired:!0}}})],Xp.prototype,"type",void 0),u([h({type:String,json:{write:!0}})],Xp.prototype,"workspaceId",void 0),u([h({type:String,json:{write:!0}})],Xp.prototype,"query",void 0),u([h({type:String,json:{write:!0}})],Xp.prototype,"oidFields",void 0),u([h({type:et,json:{write:!0}})],Xp.prototype,"spatialReference",void 0),u([at(ZMe)],Xp.prototype,"geometryType",void 0),Xp=B6=u([V("esri.layers.support.source.QueryTableDataSource")],Xp);var G6;let Y_=G6=class extends ve{constructor(t){super(t),this.type="raster"}clone(){const{workspaceId:t,dataSourceName:e}=this;return new G6({workspaceId:t,dataSourceName:e})}};u([at({raster:"raster"}),h({json:{write:{isRequired:!0}}})],Y_.prototype,"type",void 0),u([h({type:String,json:{write:!0}})],Y_.prototype,"dataSourceName",void 0),u([h({type:String,json:{write:!0}})],Y_.prototype,"workspaceId",void 0),Y_=G6=u([V("esri.layers.support.source.RasterDataSource")],Y_);var q6;let f0=q6=class extends ve{constructor(t){super(t),this.type="table"}clone(){const{workspaceId:t,gdbVersion:e,dataSourceName:i}=this;return new q6({workspaceId:t,gdbVersion:e,dataSourceName:i})}};u([at({table:"table"}),h({json:{write:{isRequired:!0}}})],f0.prototype,"type",void 0),u([h({type:String,json:{write:!0}})],f0.prototype,"workspaceId",void 0),u([h({type:String,json:{write:!0}})],f0.prototype,"gdbVersion",void 0),u([h({type:String,json:{write:!0}})],f0.prototype,"dataSourceName",void 0),f0=q6=u([V("esri.layers.support.source.TableDataSource")],f0);var H6,W6;const VNe=is()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let fl=H6=class extends ve{constructor(t){super(t),this.type="join-table"}readLeftTableSource(t,e,i){return XK()(t,e,i)}castLeftTableSource(t){return lp(Z6(),t)}readRightTableSource(t,e,i){return XK()(t,e,i)}castRightTableSource(t){return lp(Z6(),t)}clone(){const{leftTableKey:t,rightTableKey:e,leftTableSource:i,rightTableSource:r,joinType:n}=this,s={leftTableKey:t,rightTableKey:e,leftTableSource:(i==null?void 0:i.clone())??void 0,rightTableSource:(r==null?void 0:r.clone())??void 0,joinType:n};return new H6(s)}};u([at({joinTable:"join-table"}),h({json:{write:{isRequired:!0}}})],fl.prototype,"type",void 0),u([h({type:String,json:{write:!0}})],fl.prototype,"leftTableKey",void 0),u([h({type:String,json:{write:!0}})],fl.prototype,"rightTableKey",void 0),u([h({json:{write:!0}})],fl.prototype,"leftTableSource",void 0),u([De("leftTableSource")],fl.prototype,"readLeftTableSource",null),u([yi("leftTableSource")],fl.prototype,"castLeftTableSource",null),u([h({json:{write:!0}})],fl.prototype,"rightTableSource",void 0),u([De("rightTableSource")],fl.prototype,"readRightTableSource",null),u([yi("rightTableSource")],fl.prototype,"castRightTableSource",null),u([at(VNe)],fl.prototype,"joinType",void 0),fl=H6=u([V("esri.layers.support.source.JoinTableDataSource")],fl);let Wz=null;function XK(){return Wz||(Wz=C$({types:Z6()})),Wz}let Zz=null;function Z6(){return Zz||(Zz={key:"type",base:null,typeMap:{"data-layer":Au,"map-layer":J_}}),Zz}const jNe={key:"type",base:null,typeMap:{"join-table":fl,"query-table":Xp,raster:Y_,table:f0}};var wS;let Au=(wS=class extends ve{constructor(e){super(e),this.type="data-layer"}clone(){const{fields:e,dataSource:i}=this;return new W6({fields:e,dataSource:i})}},W6=wS,wS);u([at({dataLayer:"data-layer"}),h({json:{write:{isRequired:!0}}})],Au.prototype,"type",void 0),u([h({type:[cs],json:{write:!0}})],Au.prototype,"fields",void 0),u([h({types:jNe,json:{write:!0}})],Au.prototype,"dataSource",void 0),Au=W6=u([V("esri.layers.support.source.DataLayerSource")],Au),Au.from=En(Au);let m0=class extends bt.ClonableMixin(ve){constructor(e){super(e),this.onFields=null,this.operator=null,this.searchTerm=null,this.searchType=null}};u([h({type:[String],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.onFields!=null&&this.onFields.length>0}}}}})],m0.prototype,"onFields",void 0),u([h({type:String,json:{write:!0}})],m0.prototype,"operator",void 0),u([h({type:String,json:{write:!0}})],m0.prototype,"searchTerm",void 0),u([h({type:String,json:{write:!0}})],m0.prototype,"searchType",void 0),m0=u([V("esri.rest.support.FullTextSearch")],m0);const UNe=m0;var J6;const KK=new Gt({upperLeft:"upper-left",lowerLeft:"lower-left"});let Ry=J6=class extends ve{constructor(t){super(t),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new J6(se({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};u([h({type:Qt,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],Ry.prototype,"extent",void 0),u([h({type:["view","edit"],json:{write:!0}})],Ry.prototype,"mode",void 0),u([h({type:String,json:{read:KK.read,write:KK.write}})],Ry.prototype,"originPosition",void 0),u([h({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],Ry.prototype,"tolerance",void 0),Ry=J6=u([V("esri.rest.support.QuantizationParameters")],Ry);const BNe=new Gt({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"});var Y6;const QK=new Gt({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let hc=Y6=class extends ve{constructor(t){super(t),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(t,e){this.statisticType!=="percentile-continuous"&&this.statisticType!=="percentile-discrete"||(e.statisticParameters=se(t))}clone(){return new Y6({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:se(this.statisticParameters)})}};u([h({type:Number,json:{write:!0}})],hc.prototype,"maxPointCount",void 0),u([h({type:Number,json:{write:!0}})],hc.prototype,"maxRecordCount",void 0),u([h({type:Number,json:{write:!0}})],hc.prototype,"maxVertexCount",void 0),u([h({type:String,json:{write:!0}})],hc.prototype,"onStatisticField",void 0),u([h({type:String,json:{write:!0}})],hc.prototype,"outStatisticFieldName",void 0),u([h({type:String,json:{read:{source:"statisticType",reader:QK.read},write:{target:"statisticType",writer:QK.write}}})],hc.prototype,"statisticType",void 0),u([h({type:Object})],hc.prototype,"statisticParameters",void 0),u([Ve("statisticParameters")],hc.prototype,"writeStatisticParameters",null),hc=Y6=u([V("esri.rest.support.StatisticDefinition")],hc);var IL;const GNe=new Gt({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});var qb;let dt=(qb=class extends ve{static from(e){return c2(IL,e)}constructor(e){super(e),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.fullText=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.returnTrueCurves=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}castDatumTransformation(e){return typeof e=="number"||typeof e=="object"?e:null}writeHistoricMoment(e,i){i.historicMoment=e&&e.getTime()}writeParameterValues(e,i){if(e){const r={};for(const n in e){const s=e[n];Array.isArray(s)?r[n]=s.map((o=>o instanceof Date?o.getTime():o)):s instanceof Date?r[n]=s.getTime():r[n]=s}i.parameterValues=r}}writeStart(e,i){i.resultOffset=this.start,i.resultRecordCount=this.num||10,i.where="1=1"}writeWhere(e,i){i.where=e||"1=1"}clone(){return new IL(se({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,fullText:this.fullText,formatOf3DObjects:this.formatOf3DObjects,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:this.historicMoment!=null?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,returnTrueCurves:this.returnTrueCurves,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}},IL=qb,qb.MAX_MAX_RECORD_COUNT_FACTOR=5,qb);u([h({json:{write:!0}})],dt.prototype,"aggregateIds",void 0),u([h({type:Boolean,json:{write:!0}})],dt.prototype,"cacheHint",void 0),u([h({type:Boolean,json:{default:!1,write:!0}})],dt.prototype,"compactGeometryEnabled",void 0),u([h({json:{write:!0}})],dt.prototype,"datumTransformation",void 0),u([yi("datumTransformation")],dt.prototype,"castDatumTransformation",null),u([h({type:Boolean,json:{default:!1,write:!0}})],dt.prototype,"defaultSpatialReferenceEnabled",void 0),u([h({type:Number,json:{write:!0}})],dt.prototype,"distance",void 0),u([h({type:Au,json:{write:!0}})],dt.prototype,"dynamicDataSource",void 0),u([h({type:String,json:{write:!0}})],dt.prototype,"formatOf3DObjects",void 0),u([h({type:[UNe],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.fullText!=null&&this.fullText.length>0}}}}})],dt.prototype,"fullText",void 0),u([h({type:String,json:{write:!0}})],dt.prototype,"gdbVersion",void 0),u([h({types:R$,json:{read:hp,write:!0}})],dt.prototype,"geometry",void 0),u([h({type:Number,json:{write:!0}})],dt.prototype,"geometryPrecision",void 0),u([h({type:[String],json:{write:!0}})],dt.prototype,"groupByFieldsForStatistics",void 0),u([h({type:String,json:{write:!0}})],dt.prototype,"having",void 0),u([h({type:Date})],dt.prototype,"historicMoment",void 0),u([Ve("historicMoment")],dt.prototype,"writeHistoricMoment",null),u([h({type:Number,json:{write:!0}})],dt.prototype,"maxAllowableOffset",void 0),u([h({type:Number,cast:t=>t<1?1:t>dt.MAX_MAX_RECORD_COUNT_FACTOR?dt.MAX_MAX_RECORD_COUNT_FACTOR:t,json:{write:{overridePolicy:t=>({enabled:t>1})}}})],dt.prototype,"maxRecordCountFactor",void 0),u([h({type:["xyFootprint"],json:{write:!0}})],dt.prototype,"multipatchOption",void 0),u([h({type:Number,json:{read:{source:"resultRecordCount"}}})],dt.prototype,"num",void 0),u([h({json:{write:!0}})],dt.prototype,"objectIds",void 0),u([h({type:[String],json:{write:!0}})],dt.prototype,"orderByFields",void 0),u([h({type:[String],json:{write:!0}})],dt.prototype,"outFields",void 0),u([h({type:et,json:{name:"outSR",write:!0}})],dt.prototype,"outSpatialReference",void 0),u([h({type:[hc],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.outStatistics!=null&&this.outStatistics.length>0}}}}})],dt.prototype,"outStatistics",void 0),u([h({json:{write:!0}})],dt.prototype,"parameterValues",void 0),u([Ve("parameterValues")],dt.prototype,"writeParameterValues",null),u([h({type:_t,json:{write:!0}})],dt.prototype,"pixelSize",void 0),u([h({type:Ry,json:{write:!0}})],dt.prototype,"quantizationParameters",void 0),u([h({type:[Object],json:{write:!0}})],dt.prototype,"rangeValues",void 0),u([h({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:this.spatialRelationship==="relation"}}}}})],dt.prototype,"relationParameter",void 0),u([h({type:String,json:{write:!0}})],dt.prototype,"resultType",void 0),u([h({type:Boolean,json:{default:!1,write:!0}})],dt.prototype,"returnCentroid",void 0),u([h({type:Boolean,json:{default:!1,write:!0}})],dt.prototype,"returnDistinctValues",void 0),u([h({type:Boolean,json:{default:!0,write:!0}})],dt.prototype,"returnExceededLimitFeatures",void 0),u([h({type:Boolean,json:{write:!0}})],dt.prototype,"returnGeometry",void 0),u([h({type:Boolean,json:{default:!1,write:!0}})],dt.prototype,"returnQueryGeometry",void 0),u([h({type:Boolean,json:{default:!1,write:!0}})],dt.prototype,"returnM",void 0),u([h({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],dt.prototype,"returnZ",void 0),u([h({type:Boolean,json:{write:!0}})],dt.prototype,"returnTrueCurves",void 0),u([h({type:et,json:{write:!0}})],dt.prototype,"sourceSpatialReference",void 0),u([at(BNe,{ignoreUnknown:!1,name:"spatialRel"})],dt.prototype,"spatialRelationship",void 0),u([h({type:Number,json:{read:{source:"resultOffset"}}})],dt.prototype,"start",void 0),u([Ve("start"),Ve("num")],dt.prototype,"writeStart",null),u([h({type:String,json:{write:!0}})],dt.prototype,"sqlFormat",void 0),u([h({type:String,json:{write:!0}})],dt.prototype,"text",void 0),u([h({type:Hi,json:{write:!0}})],dt.prototype,"timeExtent",void 0),u([h({type:Boolean,json:{default:!1,write:!0}})],dt.prototype,"timeReferenceUnknownClient",void 0),u([at(GNe,{ignoreUnknown:!1}),h({json:{write:{overridePolicy(t){return{enabled:!!t&&this.distance!=null}}}}})],dt.prototype,"units",void 0),u([h({type:String,json:{write:{overridePolicy(t){return{enabled:t!=null||this.start!=null&&this.start>0}}}}})],dt.prototype,"where",void 0),u([Ve("where")],dt.prototype,"writeWhere",null),dt=IL=u([V("esri.rest.support.Query")],dt);function ey(t){return!(t==null||typeof t!="object"||!("createQuery"in t)||!t.createQuery)}let ac=class extends ad.EventedAccessor{constructor(e){super(e),this._selectionMap=new fC,this._sources=new Ze,this._trashCan=[],this._layerEditHandles=new Ze,this._vizTaskId=0,this.view=null,this.showHighlight=!0,this.highlightName="default"}initialize(){this.addHandles([$e((()=>[this.view,this.showHighlight]),(()=>this._refreshVisualization())),$e((()=>this.view),(e=>{e==null||e.when().then((()=>this.syncSources()))}),kt),eo((()=>this.sources),"change",(e=>{var n;const i=this._selectionMap,r=[];for(const s of e.removed){const o=i.get(s);o&&(i.delete(s),(n=o.highlightHandle)==null||n.remove(),r.push({layer:s,selection:[],added:[],removed:[...o.selection]}))}this._refreshListeners(),r.length&&this._onSelectionChange(r)}),{onListenerAdd:()=>this._refreshListeners()})])}destroy(){this.clear(),this._layerEditHandles.drain(Nr)}get selections(){return Array.from(this._selectionMap.entries()).map((e=>{const[i,r]=e;return{layer:i,selection:[...r.selection]}}))}get count(){let e=0;for(const i of this._selectionMap.values())e+=i.selection.length;return e}get hasSelection(){return this.count>0}get sources(){return this._sources}set sources(e){nm(e,this._sources)}syncSources(){var n;const e=new Set,i=(n=this.view)==null?void 0:n.map;if(!i)return;const r=s=>{var o,a,l,c,d;PRe(s)?((o=s.layers)==null||o.forEach(r),(a=s.tables)==null||a.forEach(r)):kRe(s)?((l=s.sublayers)==null||l.forEach(r),(c=s.subtables)==null||c.forEach(r)):yU(s)?(d=s.sublayers)==null||d.forEach(r):ey(s)&&e.add(s)};i.allLayers.forEach(r),i.allTables.forEach(r),this.sources=[...e]}async getSelectedFeatures(e,i={},r="layerView"){const{view:n,selections:s}=this;if(!n&&r==="layerView")return Ie.getLogger(this).warn("Cannot query layer views without a view."),[];const o=(e!=null&&e.length?s.filter((a=>e.includes(a.layer))):s).map((async a=>{const{layer:l,selection:c}=a;if(!c.length)return;const d=fh(l)?l.parent:l;if(d!=null){if(n&&r==="layerView"&&!eQ(d)&&tQ(d)){const f=await n.whenLayerView(d).catch((()=>null));if(f)return iQ(f,c,i)}return iQ(d,c,i)}})).filter(Kr);return(await Promise.all(o)).filter(Kr)}updateSelection(e){const i=new Map;for(const[s,o]of this._selectionMap)i.set(s,[...o.selection]);let r=!1;const n=e.current.concat(e.added);for(const s of n){const o=s.sourceLayer,a=s.getObjectId();if(this.sources.includes(o)&&(ey(o)||fh(o))&&a!==null){const l=lm(i,o,(()=>[]));l.includes(a)||(l.push(a),r=!0)}}for(const s of e.removed){const o=s.sourceLayer,a=s.getObjectId();if(this.sources.includes(o)&&(ey(o)||fh(o))&&a!==null){const l=i.get(o),c=l==null?void 0:l.indexOf(a);c!==void 0&&c>=0&&(l==null||l.splice(c,1),r=!0)}}if(r){const{_selectionMap:s,_trashCan:o}=this,a=[];for(const[l,c]of i){const d=s.get(l);d!==void 0&&o.push(d),s.set(l,{selection:c}),a.push({layer:l,selection:c,...nY(d!==void 0?d.selection:[],c)})}this._onSelectionChange(a)}}setSelection(e,i){this._setSelection(e,i)}getSelection(e){const i=this._selectionMap.get(e);return i==null?void 0:i.selection}appendToSelection(e,i){const r=this._selectionMap.get(e),n=r!==void 0?[...r.selection]:[];for(const s of i)n.includes(s)||n.push(s);this._setSelection(e,n)}removeFromSelection(e,i){const r=this._selectionMap.get(e);if(!r)return;const n=[];for(const s of r.selection)i.includes(s)||n.push(s);this._setSelection(e,n)}toggleInSelection(e,i){const r=this._selectionMap.get(e);if(!r||r.selection.length===0)return void this._setSelection(e,i);const n=new Set(r.selection),s=new Set(i),o=_Te(n,s);this._setSelection(e,Array.from(o))}clear(){const e=this._selectionMap.values();this._trashCan.push(...e);const i=[];for(const[r,n]of this._selectionMap.entries())i.push({layer:r,added:[],removed:[...n.selection],selection:[]});this._selectionMap.clear(),this._onSelectionChange(i)}_onSelectionChange(e){this._refreshVisualization(),this.emit("selection-change",{view:this.view,changes:e})}_refreshVisualization(){var o;for(this._vizTaskId++;this._trashCan.length>0;){const a=this._trashCan.pop();(o=a==null?void 0:a.highlightHandle)==null||o.remove()}if(this.view==null)return;const{sources:e,view:i,_selectionMap:r,showHighlight:n}=this,s=this._vizTaskId;for(const a of e){const l=r.get(a),c=fh(a)?a.parent:a;if(c!=null&&tQ(c)){if(eQ(c))continue;i.whenLayerView(c).then((d=>{var f;(f=l==null?void 0:l.highlightHandle)==null||f.remove(),l!=null&&n&&s===this._vizTaskId&&"highlight"in d&&typeof d.highlight=="function"&&l.selection.length>0&&(l.highlightHandle=d.highlight(l.selection,this.highlightName))})).catch((()=>{var d;(d=l==null?void 0:l.highlightHandle)==null||d.remove()}))}}}_refreshListeners(){this._layerEditHandles.drain(Nr);const e=new Set(this.sources.map((i=>fh(i)?i.parent:i)));for(const i of e)ey(i)&&"on"in i&&i.on&&this._layerEditHandles.push(i.on("edits",(r=>this._onLayerEdit(r,i))))}_onLayerEdit(e,i){if(yU(i))this._onParentLayerEdit(e,i);else if(e.deletedFeatures.length&&this._selectionMap.has(i)){const r=[];e.deletedFeatures.forEach((({error:n,objectId:s})=>{s!=null&&n==null&&r.push(s)})),this.removeFromSelection(i,r)}}_onParentLayerEdit(e,i){var o;const{deletedFeatures:r,edits:n,updatedFeatures:s}=e;if((o=n==null?void 0:n.updateFeatures)==null||o.forEach((a=>{var f;const l=a.getObjectId()??a.attributes[i.objectIdField];if(l==null||(f=s.find((y=>y.objectId===l)))!=null&&f.error)return;const c=i.findSublayerForFeature(a);if(!ey(c))return;const d=i.sublayers.find((y=>{var g;return!(!ey(y)||!((g=this.getSelection(y))!=null&&g.includes(l)))}));ey(d)&&d!==c&&(this.removeFromSelection(d,[l]),this.appendToSelection(c,[l]))})),r.length){const a=[];r.forEach((({error:l,objectId:c})=>{c!=null&&l==null&&a.push(c)})),i.sublayers.forEach((l=>{ey(l)&&this._selectionMap.has(l)&&this.removeFromSelection(l,a)}))}}_setSelection(e,i){if(!this.sources.includes(e))throw new Error(`Cannot set selection on layer ${e.title} because it is not in 'sources'`);const r=this._selectionMap.get(e);if(r===void 0||!HNe(r,{selection:i})){r!==void 0&&this._trashCan.push(r),this._selectionMap.set(e,{selection:[...i]});const n={layer:e,selection:[...i],...nY(r!==void 0?r.selection:[],i)};this._onSelectionChange([n])}}};u([h()],ac.prototype,"_selectionMap",void 0),u([h()],ac.prototype,"_sources",void 0),u([h({readOnly:!0,nonNullable:!0})],ac.prototype,"selections",null),u([h({readOnly:!0,nonNullable:!0})],ac.prototype,"count",null),u([h()],ac.prototype,"view",void 0),u([h({readOnly:!0,nonNullable:!0})],ac.prototype,"hasSelection",null),u([h()],ac.prototype,"showHighlight",void 0),u([h()],ac.prototype,"sources",null),u([h()],ac.prototype,"highlightName",void 0),ac=u([V("esri.views.SelectionManager")],ac);const eQ=t=>{var e;return fh(t)?((e=t.parent)==null?void 0:e.isTable)===!0:t.isTable},qNe=t=>t.layer!==void 0,tQ=t=>(t==null?void 0:t.when)!==void 0,HNe=(t,e)=>{if(t==null&&e==null)return!0;if(t!=null&&e==null||t==null&&e!=null)return!1;if(t!=null&&e!=null&&t.selection!=null&&e.selection!=null){const i=[...t.selection],r=[...e.selection];if(i.length!==r.length)return!1;i.sort(),r.sort();for(let n=0;n<i.length;n++)if(i[n]!==r[n])return!1}return!0},iQ=async(t,e,i={})=>{let r;if(qNe(t)){const n=t;r=n===void 0?null:await n.queryFeatures(new dt({...i,objectIds:e})).then((s=>({data:s,layer:t.layer})))}else{const n=t;r=n===void 0?null:await n.queryFeatures(new dt({...i,objectIds:e})).then((s=>({data:s,layer:n})))}return r},WNe=ac;let iI=class extends bt.ClonableMixin(tt){constructor(e){super(e),this.accentColor=new _e([255,127,0]),this.textColor=new _e([255,255,255])}};u([h({type:_e,nonNullable:!0})],iI.prototype,"accentColor",void 0),u([h({type:_e,nonNullable:!0})],iI.prototype,"textColor",void 0),iI=u([V("esri.views.Theme")],iI);const X6=iI;var rQ;(function(t){t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right"})(rQ||(rQ={}));const Hfe=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],Wfe={};function Zfe(t){return!!Wfe[t]}function ZNe(t){for(const e of t)if(!Zfe(e))return!1;return!0}Hfe.forEach((t=>{Wfe[t]=!0}));let Jfe=class{constructor(e){this._handlers=new Map,this._counter=0,this._handlerCounts=new Map,this.view=e,this.inputManager=null}connect(e){e&&this.disconnect(),this.inputManager=e,this._handlers.forEach((({handler:i,priority:r},n)=>{var s;return(s=this.inputManager)==null?void 0:s.installHandlers(n,[i],r)}))}disconnect(){this.inputManager&&this._handlers.forEach(((e,i)=>{var r;return(r=this.inputManager)==null?void 0:r.uninstallHandlers(i)})),this.inputManager=null}destroy(){this.disconnect(),this._handlers.clear(),this.view=null}on(e,i,r,n){const s=Array.isArray(e)?e:e.split(",");if(!ZNe(s))return s.some(Zfe)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let o,a;Array.isArray(i)?a=i:(o=i,a=[]),typeof r=="function"?o=r:n=r,n=n??Kf.DEFAULT;const l=this._createUniqueGroupName(),c=new JNe(this.view,s,a,o);this._handlers.set(l,{handler:c,priority:n});for(const d of s){const f=this._handlerCounts.get(d)||0;this._handlerCounts.set(d,f+1)}return this.inputManager&&this.inputManager.installHandlers(l,[c],n),Ei((()=>this._removeHandler(l,s)))}hasHandler(e){return!!this._handlerCounts.get(e)}_removeHandler(e,i){if(this._handlers.has(e)){this._handlers.delete(e);for(const r of i){const n=this._handlerCounts.get(r);n===void 0||(n===1?this._handlerCounts.delete(r):this._handlerCounts.set(r,n-1))}}this.inputManager&&this.inputManager.uninstallHandlers(e)}_createUniqueGroupName(){return this._counter+=1,`viewEvents_${this._counter}`}},JNe=class extends fs{constructor(e,i,r,n){super(!0),this._latestDragStart=void 0,this.view=e;for(const s of i)switch(s){case"click":this.registerIncoming("click",r,(o=>n(KNe(e,o))));break;case"double-click":this.registerIncoming("double-click",r,(o=>n(QNe(e,o))));break;case"immediate-click":this.registerIncoming("immediate-click",r,(o=>n(eDe(e,o))));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",r,(o=>n(tDe(e,o))));break;case"hold":this.registerIncoming("hold",r,(o=>n(iDe(e,o))));break;case"drag":this.registerIncoming("drag",r,(o=>{const a=this._wrapDrag(o);a&&n(a)}));break;case"key-down":this.registerIncoming("key-down",r,(o=>n(rDe(o))));break;case"key-up":this.registerIncoming("key-up",r,(o=>n(nDe(o))));break;case"pointer-down":this.registerIncoming("pointer-down",r,(o=>n(KT(o,"pointer-down"))));break;case"pointer-move":this.registerIncoming("pointer-move",r,(o=>n(KT(o,"pointer-move"))));break;case"pointer-up":this.registerIncoming("pointer-up",r,(o=>n(KT(o,"pointer-up"))));break;case"pointer-drag":this.registerIncoming("pointer-drag",r,(o=>n(sDe(o))));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",r,(o=>n(oDe(o))));break;case"pointer-enter":this.registerIncoming("pointer-enter",r,(o=>n(KT(o,"pointer-enter"))));break;case"pointer-leave":this.registerIncoming("pointer-leave",r,(o=>n(KT(o,"pointer-leave"))));break;case"gamepad":this.registerIncoming("gamepad",r,(o=>{n(aDe(o))}));break;case"focus":this.registerIncoming("focus",r,(o=>{n(YNe(o))}));break;case"blur":this.registerIncoming("blur",r,(o=>{n(XNe(o))}))}}_wrapDrag(e){const i=e.data,{x:r,y:n}=i.center,{action:s,pointerType:o,button:a}=i;if(s==="start"&&(this._latestDragStart=i),!this._latestDragStart)return;const l=i.pointer.native,c=i.buttons,{cancelable:d,timestamp:f}=e,y={x:this._latestDragStart.center.x,y:this._latestDragStart.center.y};return s==="end"&&(this._latestDragStart=void 0),{type:"drag",action:s,x:r,y:n,origin:y,pointerType:o,button:a,buttons:c,radius:i.radius,angle:oce(i.angle),native:l,timestamp:f,cancelable:d,stopPropagation:()=>e.stopPropagation(),defer:g=>e.defer(g),preventDefault:()=>e.preventDefault()}}};function YNe(t){return{type:"focus",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),defer:e=>t.defer(e),preventDefault:()=>t.preventDefault()}}function XNe(t){return{type:"blur",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),defer:e=>t.defer(e),preventDefault:()=>t.preventDefault()}}function KNe(t,e){const{pointerType:i,button:r,buttons:n,x:s,y:o,native:a,eventId:l}=e.data,{cancelable:c,timestamp:d}=e;return{type:"click",pointerType:i,button:r,buttons:n,x:s,y:o,native:a,timestamp:d,screenPoint:Rs(s,o),mapPoint:S2(t,s,o),eventId:l,cancelable:c,stopPropagation:()=>e.stopPropagation(),defer:f=>e.defer(f),preventDefault:()=>e.preventDefault()}}function QNe(t,e){const{pointerType:i,button:r,buttons:n,x:s,y:o,native:a,eventId:l}=e.data,{cancelable:c,timestamp:d}=e;return{type:"double-click",pointerType:i,button:r,buttons:n,x:s,y:o,native:a,timestamp:d,mapPoint:S2(t,s,o),eventId:l,cancelable:c,stopPropagation:()=>e.stopPropagation(),defer:f=>e.defer(f),preventDefault:()=>e.preventDefault()}}function eDe(t,e){const{pointerType:i,button:r,buttons:n,x:s,y:o,native:a,eventId:l}=e.data,c=a.pointerId,{cancelable:d,timestamp:f}=e;return{type:"immediate-click",pointerId:c,pointerType:i,button:r,buttons:n,x:s,y:o,native:a,timestamp:f,mapPoint:S2(t,s,o),eventId:l,cancelable:d,stopPropagation:()=>e.stopPropagation(),defer:y=>e.defer(y),preventDefault:()=>e.preventDefault()}}function tDe(t,e){const{pointerType:i,button:r,buttons:n,x:s,y:o,native:a,eventId:l}=e.data,c=a.pointerId,{cancelable:d,timestamp:f}=e;return{type:"immediate-double-click",pointerId:c,pointerType:i,button:r,buttons:n,x:s,y:o,native:a,timestamp:f,mapPoint:S2(t,s,o),eventId:l,cancelable:d,stopPropagation:()=>e.stopPropagation(),defer:y=>e.defer(y),preventDefault:()=>e.preventDefault()}}function iDe(t,e){const{pointerType:i,button:r,buttons:n,x:s,y:o,native:a}=e.data,{cancelable:l,timestamp:c}=e;return{type:"hold",pointerType:i,button:r,buttons:n,x:s,y:o,native:a,timestamp:c,mapPoint:S2(t,s,o),cancelable:l,stopPropagation:()=>e.stopPropagation(),defer:d=>e.defer(d),preventDefault:()=>e.preventDefault()}}function S2(t,e,i){return t.toMap(Rs(e,i),{exclude:[]})}function rDe(t){const{key:e,repeat:i,native:r}=t.data,{cancelable:n,timestamp:s}=t;return{type:"key-down",key:e,repeat:i,native:r,timestamp:s,cancelable:n,stopPropagation:()=>t.stopPropagation(),defer:o=>t.defer(o),preventDefault:()=>t.preventDefault()}}function nDe(t){const{key:e,native:i}=t.data,{cancelable:r,timestamp:n}=t;return{type:"key-up",key:e,native:i,timestamp:n,cancelable:r,stopPropagation:()=>t.stopPropagation(),defer:s=>t.defer(s),preventDefault:()=>t.preventDefault()}}function KT(t,e){const{x:i,y:r,button:n,buttons:s,native:o,eventId:a}=t.data,l=o.pointerId,c=o.pointerType,{cancelable:d,timestamp:f}=t;return{type:e,x:i,y:r,pointerId:l,pointerType:c,button:n,buttons:s,native:o,timestamp:f,eventId:a,cancelable:d,stopPropagation:()=>t.stopPropagation(),defer:y=>t.defer(y),preventDefault:()=>t.preventDefault()}}function sDe(t){const{x:e,y:i,buttons:r,native:n,eventId:s}=t.data.currentEvent,{button:o}=t.data.startEvent,a=t.data.startEvent.native.pointerId,l=t.data.startEvent.native.pointerType,c=t.data.action,d={x:t.data.startEvent.x,y:t.data.startEvent.y},{cancelable:f,timestamp:y}=t;return{type:"pointer-drag",x:e,y:i,pointerId:a,pointerType:l,button:o,buttons:r,action:c,origin:d,native:n,timestamp:y,eventId:s,cancelable:f,stopPropagation:()=>t.stopPropagation(),defer:g=>t.defer(g),preventDefault:()=>t.preventDefault()}}function oDe(t){const{cancelable:e,data:i,timestamp:r}=t,{x:n,y:s,deltaY:o,native:a}=i;return{type:"mouse-wheel",x:n,y:s,deltaY:o,native:a,timestamp:r,cancelable:e,stopPropagation:()=>t.stopPropagation(),defer:l=>t.defer(l),preventDefault:()=>t.preventDefault()}}function aDe(t){const{action:e,state:i,device:r}=t.data,{cancelable:n,timestamp:s}=t,{buttons:o,axes:a}=i;return{type:"gamepad",device:r,timestamp:s,action:e,buttons:o,axes:a,cancelable:n,stopPropagation:()=>t.stopPropagation(),defer:l=>t.defer(l),preventDefault:()=>t.preventDefault()}}var nM,nQ,sQ;(function(t){t[t.USER=0]="USER",t[t.MANAGER=1]="MANAGER"})(nM||(nM={})),(function(t){t[t.None=0]="None",t[t.Unfocused=1]="Unfocused",t[t.Focused=2]="Focused",t[t.Unselected=4]="Unselected",t[t.Selected=8]="Selected",t[t.All=15]="All"})(nQ||(nQ={})),(function(t){t[t.None=0]="None",t[t.Custom1=16]="Custom1",t[t.Custom2=32]="Custom2",t[t.Custom3=64]="Custom3",t[t.Custom4=128]="Custom4",t[t.Custom5=256]="Custom5",t[t.Custom6=512]="Custom6",t[t.Custom7=1024]="Custom7",t[t.Custom8=2048]="Custom8",t[t.Custom9=4096]="Custom9",t[t.Custom10=8192]="Custom10",t[t.Custom11=16384]="Custom11",t[t.Custom12=32768]="Custom12",t[t.All=65520]="All"})(sQ||(sQ={}));const lDe="z",cDe="r",Yfe={cancel:"Escape",complete:"Enter"},xyt={...Yfe,redo:cDe,undo:lDe,center:"Alt",constraint:"Shift",delete:["Backspace","Delete"],vertexAdd:"f",pan:" "},Syt={toggle:"Control"},$yt={enterInputMode:"Tab",commit:"Enter",discard:"Escape",next:"Tab"},Tyt={moveUp:{key:"ArrowUp",modifier:"Shift",repeats:!0},moveDown:{key:"ArrowDown",modifier:"Shift",repeats:!0},moveLeft:{key:"ArrowLeft",modifier:"Shift",repeats:!0},moveRight:{key:"ArrowRight",modifier:"Shift",repeats:!0},scaleUp:{key:"+",modifier:"Shift"},scaleDown:{key:"-",modifier:"Shift"},factorModifier:{key:ipe,continuePropagation:!0},toggleOpacity:"t",preserveAspectRatio:{key:"Shift",continuePropagation:!0},rotateIncrements:{key:"Shift",continuePropagation:!0}};let Eyt=class{constructor(){this._bindings=new Map}add(e,i){return this.addToggle(e,(r=>{r.type==="key-down"&&i(r)}))}addToggle(e,i){const r=uDe.fromDefinition(e,i),n=lm(this._bindings,r.key,(()=>[]));return n.push(r),Ei((()=>G7(n,r)))}register(e,i=Kf.WIDGET){return yw([e.on("key-down",(r=>this.dispatch(e.inputManager,r)),i),e.on("key-up",(r=>this.dispatch(e.inputManager,r)),i)])}dispatch(e,i){const r=i.key,n=this._bindings.get(r);if(n)for(const s of n)s.process(e,i)}},uDe=class K6{constructor(e,i,r,n,s){this.key=e,this.modifiers=i,this.repeats=r,this.continuePropagation=n,this.callback=s}process(e,i){if(!(i.key!==this.key||"repeat"in i&&i.repeat&&!this.repeats)){for(const r of this.modifiers)if(!e.isModifierKeyDown(r))return;this.continuePropagation||i.stopPropagation(),this.callback(i)}}static fromDefinition(e,i){if(typeof e=="string")return new K6(e,[],!1,!1,i);const{key:r,modifier:n,repeats:s,continuePropagation:o}=e;return new K6(r,n?Array.isArray(n)?n:[n]:[],!!s,!!o,i)}};function dDe(t){return[t.on("before-add",(e=>{const i=e.item;if(i==null||t.includes(i))return Ie.getLogger("esri.views.interactive.interactiveToolUtils").warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void e.preventDefault();i.onAdd()})),t.on("after-remove",(e=>{const i=e.item;i.active&&(i.view.activeTool=null),i.destroy()}))]}function Q6(t){return t.visible&&t.getEditableFlag!=null&&t.getEditableFlag(nM.USER)&&t.getEditableFlag(nM.MANAGER)}function hDe(t){return t.type==="key-down"&&t.key===Yfe.cancel}function Dd(t){return Rs(t.x,t.y)}function Xfe(t,e){var r;const i=(r=t instanceof HTMLElement?t:t.surface)==null?void 0:r.getBoundingClientRect();return i?Rs(e.clientX-i.left,e.clientY-i.top):Rs(0,0)}function Kfe(t,e){return e instanceof Event?Xfe(t,e):Dd(e)}function Qfe(t){if(t instanceof Event)return!0;if(typeof t=="object"&&"type"in t)switch(t.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}let pDe=class{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._externallyDragging=!1,this._revertToNullActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}hasFocusedManipulators(){return this._grabbedManipulators.size>0||this._draggedManipulators.size>0}handleInputEvent(e,i){const r=()=>e.stopPropagation();switch(e.type){case"pointer-move":aQ(e.pointerType)&&this._pointerLocations.set(e.pointerId,{x:e.x,y:e.y,pointerType:e.pointerType});break;case"drag":this._grabbedManipulators.size>0?this._stopDrag=!0:e.action==="start"?this._externallyDragging=!0:e.action==="end"&&(this._externallyDragging=!1),this._stopDrag&&(r(),e.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!lQ(e))break;const n=Dd(e),s=g_(n,e.pointerType,i.forEachTool);if(s==null)break;const o=s.manipulator,a=s.tool;o==null||a==null||!o.interactive||o.grabbable&&o.grabbableForEvent(e)||!o.grabbing||o.dragging||this._releaseManipulatorBeforeDragging(o,e,i),o!=null&&a!=null&&o.interactive&&o.grabbable&&o.grabbableForEvent(e)&&!o.grabbing&&(this._grabbedManipulators.set(e.pointerId,{manipulator:o,tool:a,start:n,pointerType:e.pointerType}),this._grabbedManipulators.size===1&&i.activeTool==null&&(this._revertToNullActiveTool=!0,i.setActiveTool(s.tool)),o.grabbing=!0,o.events.emit("grab-changed",{action:"start",pointerType:e.pointerType,screenPoint:n}),r());break}case"pointer-up":this._draggedManipulators.has(e.pointerId)||this._handlePointerEnd(e,i);break;case"pointer-drag":{if(!lQ(e))break;const n=this._grabbedManipulators.get(e.pointerId),s=n==null?void 0:n.manipulator,o=n==null?void 0:n.tool;if(s==null||o==null)break;const a=Dd(e);a.x=to(a.x,0,i.view.width),a.y=to(a.y,0,i.view.height);const l=n.start,c=this._draggedManipulators.get(e.pointerId);switch(e.action){case"start":case"update":e.action!=="update"&&this._grabbedManipulators.size!==1||(s.dragging=!0,c?s.events.emit("drag",{action:"update",start:l,screenPoint:a}):s.events.emit("drag",{action:"start",start:l,screenPoint:a,pointerType:e.pointerType}),this._draggedManipulators.set(e.pointerId,{tool:o,manipulator:s,start:l}));break;case"end":s.dragging=!1,c&&s.events.emit("drag",{action:"end",start:l,screenPoint:a}),this._draggedManipulators.delete(e.pointerId),this._handlePointerEnd(e,i)}r();break}case"immediate-click":{const n=Dd(e),s=g_(n,e.pointerType,i.forEachTool);if(fDe(e)||i.forEachTool((c=>{if((s==null||s.tool!==c||c.automaticManipulatorSelection)&&c.manipulators){let d=!1;c.manipulators.forEach((({manipulator:f})=>{f.selected&&(f.selected=!1,d=!0)})),d&&c.onManipulatorSelectionChanged&&c.onManipulatorSelectionChanged()}})),s==null)break;const{manipulator:o,tool:a}=s;if(!o.interactive)break;o.selectable&&a.automaticManipulatorSelection&&(o.selected=!o.selected,a.onManipulatorSelectionChanged&&a.onManipulatorSelectionChanged());const l=e.native.shiftKey;o.events.emit("immediate-click",{screenPoint:n,button:e.button,pointerType:e.pointerType,shiftKey:l,stopPropagation:r}),Jz(o,r);break}case"click":{const n=Dd(e),s=g_(n,e.pointerType,i.forEachTool),o=s==null?void 0:s.manipulator;if(o==null||!o.interactive)break;const a=e.native.shiftKey;o.events.emit(e.type,{screenPoint:n,button:e.button,pointerType:e.pointerType,shiftKey:a}),r();break}case"double-click":{const n=Dd(e),s=g_(n,e.pointerType,i.forEachTool),o=s!=null?s.manipulator:null;if(o==null||!o.interactive)break;const a=e.native.shiftKey;o.events.emit("double-click",{screenPoint:n,button:e.button,pointerType:e.pointerType,shiftKey:a,stopPropagation:r}),Jz(o,r);break}case"immediate-double-click":{const n=Dd(e),s=g_(n,e.pointerType,i.forEachTool),o=s!=null?s.manipulator:null;if(o==null||!o.interactive)break;const a=e.native.shiftKey;o.events.emit("immediate-double-click",{screenPoint:n,button:e.button,pointerType:e.pointerType,shiftKey:a,stopPropagation:r}),e.pointerType==="mouse"&&Jz(o,r);break}}this._onFocusChange(i.forEachTool)}_releaseManipulatorBeforeDragging(e,i,r){e.grabbing=!1,e.events.emit("grab-changed",{action:"end",pointerType:i.pointerType,screenPoint:Dd(i)}),this._grabbedManipulators.forEach((({manipulator:n},s)=>{n===e&&this._grabbedManipulators.delete(s)})),this._afterManipulatorRelease(r.setActiveTool)}_handlePointerEnd(e,i){var n;const r=(n=this._grabbedManipulators.get(e.pointerId))==null?void 0:n.manipulator;r!=null&&r.grabbing&&(r.grabbing=!1,r.events.emit("grab-changed",{action:"end",pointerType:e.pointerType,screenPoint:Dd(e)}),this._grabbedManipulators.delete(e.pointerId),this._afterManipulatorRelease(i.setActiveTool))}_onFocusChange(e){this._updateCursor(),this._updateFocusedManipulatorTools(e)}_updateCursor(){this._grabbedManipulators.size>0?this._cursor=oQ(this._grabbedManipulators)||"grabbing":this._hoveredManipulators.size>0?this._cursor=oQ(this._hoveredManipulators)||"pointer":this._cursor=null}_updateFocusedManipulatorTools(e){const i=new Set,r=new Set;this._grabbedManipulators.forEach((({tool:n})=>{i.add(n)})),this._hoveredManipulators.forEach((({tool:n})=>{r.add(n)})),e((n=>{n.hasGrabbedManipulators=i.has(n),n.hasHoveredManipulators=r.has(n);const s=this._grabbedManipulators.values(),o=MEe(s,(({tool:a})=>a===n));n.firstGrabbedManipulator=o!=null?o.manipulator:null}))}clearPointers(e,{forEachTool:i,setActiveTool:r},n=!0,s){const o=(a,l)=>a===e&&(s==null||s===l);this._grabbedManipulators.forEach((({tool:a,manipulator:l,pointerType:c},d)=>{o(a,l)&&(this._grabbedManipulators.delete(d),l.grabbing=!1,l.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:c}))})),this._draggedManipulators.forEach((({tool:a,manipulator:l},c)=>{o(a,l)&&(this._draggedManipulators.delete(c),l.dragging=!1,l.events.emit("drag",{action:"cancel"}))})),n&&this._hoveredManipulators.forEach((({tool:a,manipulator:l},c)=>{o(a,l)&&(this._hoveredManipulators.delete(c),l.hovering=!1)})),this._afterManipulatorRelease(r),this._onFocusChange(i)}updateHoveredStateFromKnownPointers(e){this._pointerLocations.forEach(((i,r)=>{this._updateHoveredStateForPointerAtScreenPosition(Rs(i.x,i.y),r,i.pointerType,e)}))}handleHoverEvent(e,i){const r=e.type;r!=="pointer-up"&&r!=="immediate-click"&&r!=="pointer-move"||!aQ(e.pointerType)||(r!=="pointer-up"&&this._externallyDragging?this._clearHoveredManipulatorStates(e.pointerId):this._updateHoveredStateForPointerAtScreenPosition(Dd(e),e.pointerId,e.pointerType,i))}_updateHoveredStateForPointerAtScreenPosition(e,i,r,n){var a;let s=g_(e,r,n);const o=(a=this._hoveredManipulators.get(i))==null?void 0:a.manipulator;s==null||s.manipulator.interactive||(s=null),s!=null&&o===s.manipulator||(o!=null&&(o.hovering=!1),s!=null?(s.manipulator.hovering=!0,this._hoveredManipulators.set(i,s)):this._hoveredManipulators.delete(i),this._onFocusChange(n))}_afterManipulatorRelease(e){this._grabbedManipulators.size===0&&this._revertToNullActiveTool&&(e(null),this._revertToNullActiveTool=!1)}_clearHoveredManipulatorStates(e){this._hoveredManipulators.forEach((({manipulator:i},r)=>{e===r&&(this._hoveredManipulators.delete(e),i.hovering=!1)}))}};function oQ(t){for(const{manipulator:e}of t.values())if(e!=null&&e.interactive){if(e.grabbing&&e.grabCursor)return e.grabCursor;if(e.cursor)return e.cursor}return null}function g_(t,e,i){let r=null;return i((n=>{if(n.manipulators==null||!Q6(n))return!1;const s=n.manipulators.intersect(t,e);return s!=null&&(r={tool:n,manipulator:s},!0)})),r}function aQ(t){return t==="mouse"}function lQ(t){return t.pointerType!=="mouse"||t.button===0}function fDe(t){return!!t.native.shiftKey}function Jz(t,e){t!=null&&t.consumesClicks&&e()}const cQ="attached",Yz="tools",mDe=1e3;let zd=class extends tt{constructor(e){super(e),this._updatingHandles=new Rb,this._clock=T$,this._manipulatorState=new pDe,this.tools=new Ze,this.cursor=null,this._interacting=!1,this._interactingTimeout=mDe,this._interactingTimeoutHandle=null,this._forEachTool=i=>{for(const r of this.tools.items)if(i(r))return}}initialize(){this.addHandles([this.view.on(Hfe,(e=>{this._handleInputEvent(e)}),Kf.TOOL),...dDe(this.tools),this.tools.on("before-add",(({item:e})=>{this._updateToolEditableFlag(e)})),this.tools.on("before-remove",(({item:e})=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs),this._updateCursor()})),this.tools.on("change",(()=>{this._refreshToolWatchers()}))])}destroy(){this.activeTool=null,this.tools.drain((e=>e.destroy())),this._clearInteractingTimeout(),this._interacting=!1,this._updatingHandles.destroy()}get _manipulatorStateEventArgs(){return{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:e=>{this.activeTool=e},view:this.view}}set activeTool(e){if(e!=null&&!this.view.ready)return void Ie.getLogger(this).error("Cannot set active tool while view is not ready.");if(e===this.activeTool)return;const i=this.activeTool;this._set("activeTool",e),i!=null&&i.deactivate(),e!=null&&e.activate(),this._removeIncompleteTools(e);for(const r of this.tools){this._updateToolEditableFlag(r);const n=Q6(r);this.activeTool!=null&&n||this._manipulatorState.clearPointers(r,this._manipulatorStateEventArgs,!n)}this._updateCursor()}get updating(){return this._updatingHandles.updating||this.tools.some((e=>e.updating))}get interacting(){return this._interacting}_clearInteractingTimeout(){this._interactingTimeoutHandle=Nr(this._interactingTimeoutHandle)}_startInteractingTimeout(){this._clearInteractingTimeout(),this._interactingTimeoutHandle=this._clock.setTimeout((()=>this._interacting=!1),this._interactingTimeout)}attach(){var e;this.view.type==="3d"?this.addHandles([$e((()=>{const{state:i}=this.view;return"camera"in i&&i.camera}),(()=>this._forEachManipulator((i=>i.onViewChange())))),(e=this.view.elevationProvider)==null?void 0:e.on("elevation-change",(i=>this._forEachManipulator((r=>r.onElevationChange(i)))))],cQ):this.addHandles($e((()=>this.view.extent),(()=>this._forEachManipulator((i=>i.onViewChange())))))}detach(){this.activeTool=null,this.tools.removeAll(),this.removeHandles(cQ),this._clearInteractingTimeout(),this._interacting=!1}_forEachManipulator(e){this._forEachTool((i=>{i.manipulators&&i.manipulators.forEach((({manipulator:r})=>e(r,i)))}))}_handleInputEvent(e){let i=!1;const r={...e,stopPropagation:()=>{i=!0,e.stopPropagation()}};this.activeTool!=null?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(r):this._forEachTool((n=>{!i&&n.visible&&n.handleInputEvent(r)})),!i&&hDe(e)&&this.activeTool&&(e.stopPropagation(),e.preventDefault(),this.activeTool.cancel(),this.activeTool=null),this._manipulatorState.handleInputEvent(r,this._manipulatorStateEventArgs),i||this.activeTool==null||this.activeTool.handleInputEventAfter(r),this._manipulatorState.handleHoverEvent(r,this._forEachTool),this._updateCursor(),e.type==="pointer-move"&&(this._manipulatorState.hasFocusedManipulators()||this.activeTool)&&(this._interacting=!0,this._startInteractingTimeout())}_refreshToolWatchers(){this.removeHandles(Yz),this._forEachTool((e=>{if(e instanceof tt){const i=$e((()=>[e.cursor,e.visible,e.editable]),(()=>{Q6(e)||this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs),this._updateCursor()}));this.addHandles(i,Yz)}e.manipulators&&this.addHandles([e.manipulators.on("after-remove",(i=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs,!0,i.item.manipulator)})),e.manipulators.on("change",(()=>{this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}))],Yz)})),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateToolEditableFlag(e){var i;(i=e.setEditableFlag)==null||i.call(e,nM.MANAGER,this.activeTool==null||e===this.activeTool)}_updateCursor(){let e=this._manipulatorState.cursor;e==null&&this._forEachTool((i=>!(i.cursor==null||!i.visible)&&(e=i.cursor,!0))),this._get("cursor")!==e&&this._set("cursor",e)}_removeIncompleteTools(e){this.tools.filter((i=>(e==null||i!==e)&&!i.created&&i.removeIncompleteOnCancel)).forEach((i=>{this.tools.remove(i)}))}get test(){}};u([h({constructOnly:!0,nonNullable:!0})],zd.prototype,"view",void 0),u([h({value:null})],zd.prototype,"activeTool",null),u([h({readOnly:!0,type:Ze})],zd.prototype,"tools",void 0),u([h({readOnly:!0})],zd.prototype,"cursor",void 0),u([h({readOnly:!0})],zd.prototype,"updating",null),u([h()],zd.prototype,"_interacting",void 0),u([h({readOnly:!0})],zd.prototype,"interacting",null),zd=u([V("esri.views.ToolViewManager")],zd);const yDe=new _e("cyan"),gDe=1,vDe=.25,bDe=new _e("black"),wDe=.4,_De=.2,kyt=.25,eme="default",xDe="temporary",SDe=new _e("yellow");var eB;let ml=eB=class extends tt{constructor(t){super(t),this.name=eme,this.color=yDe.clone(),this.haloColor=null,this.haloOpacity=gDe,this.fillOpacity=vDe,this.shadowColor=bDe.clone(),this.shadowOpacity=wDe,this.shadowDifference=_De,this.haloWidth=2.1,this.haloBlur=.8/this.haloWidth}equals(t){return this.color.equals(t.color)&&(this.haloColor||this.color).equals(t.haloColor||t.color)&&this.haloOpacity===t.haloOpacity&&this.fillOpacity===t.fillOpacity&&this.haloWidth===t.haloWidth&&this.haloBlur===t.haloBlur&&this.shadowColor.equals(t.shadowColor)&&this.shadowOpacity===t.shadowOpacity&&this.shadowDifference===t.shadowDifference}clone(){var t,e;return new eB({...this,color:this.color.clone(),haloColor:(t=this.haloColor)==null?void 0:t.clone(),shadowColor:(e=this.shadowColor)==null?void 0:e.clone()})}assignFrom(t){var e;this.color=t.color.clone(),this.haloColor=(e=t.haloColor)==null?void 0:e.clone(),this.haloOpacity=t.haloOpacity,this.fillOpacity=t.fillOpacity,this.shadowColor=t.shadowColor.clone(),this.shadowDifference=t.shadowDifference,this.shadowOpacity=t.shadowOpacity,this.haloBlur=t.haloBlur,this.haloWidth=t.haloWidth}};u([h({type:String,constructOnly:!0,nonNullable:!0})],ml.prototype,"name",void 0),u([h({type:_e,nonNullable:!0})],ml.prototype,"color",void 0),u([h({type:_e})],ml.prototype,"haloColor",void 0),u([h({nonNullable:!0})],ml.prototype,"haloOpacity",void 0),u([h({nonNullable:!0})],ml.prototype,"fillOpacity",void 0),u([h({type:_e,nonNullable:!0})],ml.prototype,"shadowColor",void 0),u([h({nonNullable:!0})],ml.prototype,"shadowOpacity",void 0),u([h({nonNullable:!0})],ml.prototype,"shadowDifference",void 0),u([h({nonNullable:!0})],ml.prototype,"haloWidth",void 0),u([h({nonNullable:!0})],ml.prototype,"haloBlur",void 0),ml=eB=u([V("esri.views.support.HighlightOptions")],ml);const wg=ml;function $De(){return new(Ze.ofType(wg))([new wg({name:eme}),new wg({name:xDe,color:SDe})])}let X_=class extends tt{constructor(e){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",e.mapping==="standard"?this._detectedDeviceType="standard":TDe.test(e.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=e.index}get native(){const e=navigator.getGamepads?navigator.getGamepads():[];return this.nativeIndex!=null&&this.nativeIndex<e.length?e[this.nativeIndex]:null}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return EDe[this.deviceType]}};u([h({nonNullable:!0,readOnly:!0})],X_.prototype,"nativeIndex",void 0),u([h({type:String,readOnly:!0})],X_.prototype,"deviceType",null),u([h({type:Number,readOnly:!0})],X_.prototype,"axisThreshold",null),X_=u([V("esri.views.input.gamepad.GamepadInputDevice")],X_);const Lq=X_,TDe=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),EDe={standard:.15,spacemouse:.025,unknown:0};let rI=class extends tt{constructor(...e){super(...e),this.devices=new Ze,this.enabledFocusMode="document"}};u([h({type:Ze.ofType(Lq),readOnly:!0})],rI.prototype,"devices",void 0),u([h({type:["document","view","none"]})],rI.prototype,"enabledFocusMode",void 0),rI=u([V("esri.views.input.gamepad.GamepadSettings")],rI);const IDe=rI;let CL=class extends tt{constructor(){super(...arguments),this.gamepad=new IDe}};u([h({readOnly:!0})],CL.prototype,"gamepad",void 0),CL=u([V("esri.views.input.Input")],CL);const CDe=CL,Rq=()=>Si.respectPrefersReducedMotion&&window.matchMedia("(prefers-reduced-motion: reduce)").matches,Xz=()=>h({type:["pan","rotate","zoom","none"],nonNullable:!0});let y0=class extends tt{constructor(e){super(e),this.dragPrimary="pan",this.dragSecondary="rotate",this.dragTertiary="zoom",this.mouseWheel="zoom"}};u([Xz()],y0.prototype,"dragPrimary",void 0),u([Xz()],y0.prototype,"dragSecondary",void 0),u([Xz()],y0.prototype,"dragTertiary",void 0),u([h({type:["zoom","none"],nonNullable:!0})],y0.prototype,"mouseWheel",void 0),y0=u([V("esri.views.navigation.NavigationActionMap")],y0);const Oq=y0;let my=class extends tt{constructor(e){super(e),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};u([h({type:Boolean,nonNullable:!0})],my.prototype,"enabled",void 0),u([h({type:Lq})],my.prototype,"device",void 0),u([h({type:["pan","zoom"],nonNullable:!0})],my.prototype,"mode",void 0),u([h({type:["forward-down","forward-up"],nonNullable:!0})],my.prototype,"tiltDirection",void 0),u([h({type:Number,nonNullable:!0})],my.prototype,"velocityFactor",void 0),my=u([V("esri.views.navigation.gamepad.GamepadSettings")],my);const tme=my;let yy=class extends tt{constructor(e){super(e),this.actionMap=new Oq,this.browserTouchPanEnabled=!0,this.gamepad=new tme,this.momentumEnabled=!0}get effectiveMomentumEnabled(){return this.momentumEnabled&&!Rq()}get mouseWheelZoomEnabled(){return this.actionMap.mouseWheel==="zoom"}set mouseWheelZoomEnabled(e){Qle(Ie.getLogger(this),"mouseWheelZoomEnabled",{replacement:"actionMap.mouseWheel",version:"4.32",warnOnce:!0}),this.actionMap.mouseWheel=e?"zoom":"none"}};u([h({type:Oq,nonNullable:!0})],yy.prototype,"actionMap",void 0),u([h({type:Boolean})],yy.prototype,"browserTouchPanEnabled",void 0),u([h({type:tme,nonNullable:!0})],yy.prototype,"gamepad",void 0),u([h({type:Boolean})],yy.prototype,"momentumEnabled",void 0),u([h({type:Boolean})],yy.prototype,"mouseWheelZoomEnabled",null),yy=u([V("esri.views.navigation.Navigation")],yy);const xN=yy;function Nyt(t,e,i){const r=ime(t),n=e,s=MDe(r,n,i);if(r){const o=Xo.deriveUnitFromSR(r,t.spatialReference).heightUnit;if(!i&&o!==r.heightUnit){const a=new ie("layerview:unmatched-height-unit",`The vertical units of the layer must match the horizontal units (${o})`,{horizontalUnit:o});return new ie("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:r,error:a})}}if(!kDe(t)||s===ja.Unsupported)return new ie("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:r});switch(s){case ja.Units:{const o=(r==null?void 0:r.heightUnit)||"unknown",a=(n==null?void 0:n.heightUnit)||"unknown",l=new ie("layerview:incompatible-height-unit",`The vertical units of the layer (${o}) must match the vertical units of the scene (${a})`,{layerUnit:o,sceneUnit:a});return new ie("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:r,sceneHeightModelInfo:n,error:l})}case ja.HeightModel:{const o=(r==null?void 0:r.heightModel)||"unknown",a=(n==null?void 0:n.heightModel)||"unknown",l=new ie("layerview:incompatible-height-model",`The height model of the layer (${o}) must match the height model of the scene (${a})`,{layerHeightModel:o,sceneHeightModel:a});return new ie("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:r,sceneHeightModelInfo:n,error:l})}case ja.CRS:{const o=(r==null?void 0:r.vertCRS)||"unknown",a=(n==null?void 0:n.vertCRS)||"unknown",l=new ie("layerview:incompatible-vertical-datum",`The vertical datum of the layer (${o}) must match the vertical datum of the scene (${a})`,{layerDatum:o,sceneDatum:a});return new ie("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:r,sceneHeightModelInfo:n,error:l})}}return null}function MDe(t,e,i){if(!uQ(t)||!uQ(e))return ja.Unsupported;if(t==null||e==null)return ja.Ok;if(!i&&t.heightUnit!==e.heightUnit)return ja.Units;if(t.heightModel!==e.heightModel)return ja.HeightModel;switch(t.heightModel){case"gravity-related-height":return ja.Ok;case"ellipsoidal":return t.vertCRS===e.vertCRS?ja.Ok:ja.CRS;default:return ja.Unsupported}}var ja;function uQ(t){return t==null||t.heightModel!=null&&t.heightUnit!=null}function kDe(t){return"heightModelInfo"in t&&t.heightModelInfo!=null||t.spatialReference!=null||!sme(t)}function ime(t){var r;if(t.type==="integrated-mesh-3dtiles")return null;const e=t.url?up(t.url):void 0;return!(((r=t.spatialReference)==null?void 0:r.vcsWkid)==null&&e!=null&&e.serverType==="ImageServer")&&rme(t)&&t.heightModelInfo?t.heightModelInfo:sme(t)?Xo.deriveUnitFromSR(ADe,t.spatialReference):null}function rme(t){return"heightModelInfo"in t}function nme(t){if(t.type==="unknown"||!("capabilities"in t))return!1;switch(t.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"oriented-imagery":case"wfs":case"knowledge-graph-sublayer":return!0;default:return!1}}function sme(t){return nme(t)?!!(t.capabilities&&t.capabilities.data&&t.capabilities.data.supportsZ):ome(t)}function PDe(t){return t.layers!=null||ome(t)||nme(t)||rme(t)}function ome(t){switch(t.type){case"building-scene":case"elevation":case"integrated-mesh":case"integrated-mesh-3dtiles":case"point-cloud":case"scene":case"voxel":return!0;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"catalog":case"catalog-footprint":case"catalog-dynamic-group":case"csv":case"dimension":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"knowledge-graph":case"link-chart":case"knowledge-graph-sublayer":case"line-of-sight":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"oriented-imagery":case"parquet":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"video":case"viewshed":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}(function(t){t[t.Ok=0]="Ok",t[t.Units=1]="Units",t[t.HeightModel=2]="HeightModel",t[t.CRS=3]="CRS",t[t.Unsupported=4]="Unsupported"})(ja||(ja={}));const ADe=new Xo({heightModel:"gravity-related-height"});var wO;(function(t){t[t.Global=1]="Global",t[t.Local=2]="Local"})(wO||(wO={}));let tB,Kz=null;async function LDe(t){Kz||(Kz=ye(()=>import("./geometryServiceUtils-C4Tx3jgY.js"),[]).then((e=>tB=e))),await Kz,Wi(t)}async function ame(t,e,i,r){if(!t)return null;const n=t.spatialReference;return qg()||rd(n,e)?um(t,e):tB?tB.projectGeometry(t,e,i,r):(await Promise.race([LDe(r),Og(r)]),ame(t,e,i,r))}async function Dyt(t,e){try{return t!=null&&t.spatialReference?await Che(t,e):null}catch{return null}}let cr=class extends tt{constructor(e){super(e),this.required={extent:!1,heightModelInfo:!1,tileInfo:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=Eo(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return this.userSpatialReference??this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return this.userSpatialReference==null||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){var r,n,s,o;const e=(r=this.map)==null?void 0:r.call(this),i=[];return this.priorityCollection!=null&&i.push(this.priorityCollection),i.push({parent:e==null?void 0:e.basemap,layers:(n=e==null?void 0:e.basemap)==null?void 0:n.baseLayers},{layers:e==null?void 0:e.layers},{parent:e==null?void 0:e.ground,layers:(s=e==null?void 0:e.ground)==null?void 0:s.layers},{parent:e==null?void 0:e.basemap,layers:(o=e==null?void 0:e.basemap)==null?void 0:o.referenceLayers}),i}get _spatialReferenceTask(){if(this.suspended)return this._get("_spatialReferenceTask")??{updating:!1};let e;if(this._collectLayers(this.mapCollections,(r=>{const n=this._getSupportedSpatialReferences(r);if(n.length>0){const s=this._narrowDownSpatialReferenceCandidates(e,n);s!=null&&(e=s)}return(e==null?void 0:e.length)===1}))&&(e==null?void 0:e.length)!==1)return{updating:!0};const i=this._pickSpatialReferenceCandidate(e);return{spatialReference:(i==null?void 0:i.spatialReference)??null,viewingMode:(i==null?void 0:i.viewingMode)??null,updating:!1}}get _tileInfoTask(){var s,o;if(!this.required.tileInfo)return this._get("_tileInfoTask")??{updating:!1};const e=(s=this.map)==null?void 0:s.call(this),i=this.spatialReference;if(!i)return{updating:this._spatialReferenceTask.updating};let r;const n=this._collectLayers([{parent:e==null?void 0:e.basemap,layers:(o=e==null?void 0:e.basemap)==null?void 0:o.baseLayers},{layers:e==null?void 0:e.layers}],(a=>{var l;return!(!("tileInfo"in a)||!((l=a.tileInfo)!=null&&l.spatialReference.equals(i)))&&(r=a,!0)}),(a=>"tileInfo"in a));return r?{tileInfo:r.tileInfo,updating:!1}:{updating:n}}get _heightModelInfoTask(){var r;if(!this.required.heightModelInfo||this.suspended&&((r=this._get("_heightModelInfoTask"))!=null&&r.heightModelInfo))return this._get("_heightModelInfoTask")??{updating:!1};let e={};const i=this._collectLayers(this.mapCollections,(n=>{var o,a;const s=ime(n);return!!s&&(e={heightModelInfo:s,vcsWkid:(o=n.spatialReference)==null?void 0:o.vcsWkid,latestVcsWkid:(a=n.spatialReference)==null?void 0:a.latestVcsWkid},!0)}),(n=>PDe(n)));return{...e,updating:i}}get _extentCandidatesTask(){if(this.suspended||!this.required.extent)return this._get("_extentCandidatesTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const e=[],i=this._collectLayers(this.mapCollections,(r=>{const n="fullExtents"in r&&r.fullExtents||(r.fullExtent!=null?[r.fullExtent]:[]),s=this.requiresExtentInSpatialReference?null:n[0],o=n.find((a=>a.spatialReference.equals(this.spatialReference)))??s;if(o)return e.push({extent:o,layer:r}),!0;if(this._getSupportedSpatialReferences(r).length>0)for(const a of n)e.push({extent:a,layer:r});return!1}));return{candidates:e,updating:i}}get _extentTask(){const{candidates:e,updating:i}=this._extentCandidatesTask;if(i)return{updating:i};if(e==null||e.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const r=this._pickExtentCandidate(e),n=this.spatialReference;return r.extent.equals(this._projectExtentTask.input)&&n.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:this._projectExtentTask.task!=null&&!this._projectExtentTask.task.finished}:(this._projectExtentTask.task!=null&&(this._projectExtentTask.task=Eo(this._projectExtentTask.task)),this._projectExtentTask={input:r.extent.clone(),output:null,spatialReference:n.clone(),task:Fg((async s=>{try{const o=await ame(r.extent,n,"portalItem"in r.layer?r.layer.portalItem:void 0,s);this._projectExtentTask={...this._projectExtentTask,task:null,output:o}}catch{if(Nc(s))return;this._projectExtentTask={...this._projectExtentTask,task:null}}}))},{updating:!0})}_narrowDownSpatialReferenceCandidates(e,i){if(e==null)return i;const r=new Array;for(const n of e)for(const s of i){if(!n.spatialReference.equals(s.spatialReference))continue;const o=ODe(n.viewingMode,s.viewingMode);if(o!==!1){r.push({spatialReference:n.spatialReference,viewingMode:o});break}}return r.length>0?r:null}_pickSpatialReferenceCandidate(e){const i=this.defaultSpatialReference;return e==null||e.length<1?i?{spatialReference:i,viewingMode:null}:null:(i!=null&&e.length>1&&e.some((({spatialReference:r})=>r.equals(i)))&&(e=e.filter((({spatialReference:r})=>r.equals(i)))),e.length>1&&e.some((({viewingMode:r})=>r!==wO.Local))&&(e=e.filter((({viewingMode:r})=>r!==wO.Local))),e[0])}_getSupportedSpatialReferences(e){const i="supportedSpatialReferences"in e&&e.supportedSpatialReferences||(e.spatialReference?[e.spatialReference]:[]);if(i.length===0)return[];const r=[];for(const n of i){const s=this.getSpatialReferenceSupport(n,e);if(s!=null){const o=s.constraints??[{spatialReference:n,viewingMode:null}];for(const{spatialReference:a,viewingMode:l}of o)this.requiresExtentInSpatialReference&&this.userSpatialReference!=null&&!a.equals(this.userSpatialReference)||r.push({spatialReference:a,viewingMode:l})}}return r}_pickExtentCandidate(e){const i=this.spatialReference;return e.find((({extent:r})=>i.equals(r.spatialReference)))||e[0]}_collectLayers(e,i,r=()=>!0){var s;switch(this._loadMaybe((s=this.map)==null?void 0:s.call(this))){case"loading":return!0;case"failed":return!1}const n=new RDe(r,i);for(const o of e)if(this._collectCollection(o,n),n.done||n.preloading===this.sourcePreloadCount)break;return n.updating}_collectCollection(e,i){if(e.layers){switch(this._loadMaybe(e.parent)){case"loading":return i.updating=!0,void++i.preloading;case"failed":return}for(const r of e.layers)if(i.layerFilter(r)){switch(this._loadMaybe(r)){case"failed":continue;case"loading":i.updating=!0,++i.preloading;break;case"loaded":if(i.updating||(i.done=i.pushLayer(r)),i.done||i.preloading===this.sourcePreloadCount)break;"layers"in r&&this._collectCollection({layers:r.layers},i)}if(i.done||i.preloading===this.sourcePreloadCount)break}}}_loadMaybe(e){return e&&"loadStatus"in e&&e.loadStatus!=null?e.loadStatus==="not-loaded"?(e.load().catch((i=>{Tn(i)})),"loading"):e.loadStatus:"loaded"}};u([h()],cr.prototype,"required",void 0),u([h({constructOnly:!0})],cr.prototype,"map",void 0),u([h({constructOnly:!0})],cr.prototype,"getSpatialReferenceSupport",void 0),u([h()],cr.prototype,"defaultSpatialReference",void 0),u([h()],cr.prototype,"userSpatialReference",void 0),u([h()],cr.prototype,"sourcePreloadCount",void 0),u([h()],cr.prototype,"priorityCollection",void 0),u([h()],cr.prototype,"requiresExtentInSpatialReference",void 0),u([h()],cr.prototype,"suspended",void 0),u([h({readOnly:!0})],cr.prototype,"ready",null),u([h({readOnly:!0})],cr.prototype,"heightModelInfoReady",null),u([h({readOnly:!0})],cr.prototype,"spatialReference",null),u([h({readOnly:!0})],cr.prototype,"extent",null),u([h({readOnly:!0})],cr.prototype,"heightModelInfo",null),u([h({readOnly:!0})],cr.prototype,"vcsWkid",null),u([h({readOnly:!0})],cr.prototype,"latestVcsWkid",null),u([h({readOnly:!0})],cr.prototype,"viewingMode",null),u([h({readOnly:!0})],cr.prototype,"tileInfo",null),u([h({readOnly:!0})],cr.prototype,"mapCollections",null),u([h({readOnly:!0})],cr.prototype,"_spatialReferenceTask",null),u([h({readOnly:!0})],cr.prototype,"_tileInfoTask",null),u([h({readOnly:!0})],cr.prototype,"_heightModelInfoTask",null),u([h({readOnly:!0})],cr.prototype,"_extentCandidatesTask",null),u([h()],cr.prototype,"_extentTask",null),u([h()],cr.prototype,"_projectExtentTask",void 0),cr=u([V("esri.views.support.DefaultsFromMap")],cr);let RDe=class{constructor(e,i){this.layerFilter=e,this.pushLayer=i,this.preloading=-1,this.updating=!1,this.done=!1}};function ODe(t,e){return t!=null?e!=null?t===e&&t:t:e}function FDe(t){return"tryRecycleWith"in t}let NDe=class{constructor(e,i,r){this.layer=e,this.view=i,this.layerViewImporter=r,this._controller=new AbortController,this._deferred=Nl(),this._started=!1,this.done=!1,this.promise=this._deferred.promise,ed(this._controller.signal,(()=>{var s;(s=this._recycleController)==null||s.abort();const n=new ie("cancelled:layerview-create","layerview creation cancelled",{layer:e});this._deferred.reject(n)}))}tryRecycle(e){var n;if(!this.done||!this.layerView||!FDe(this.layerView))return null;(n=this._recycleController)==null||n.abort(),this._recycleController=new AbortController;const i=this.layer.type,r=this._recycleController.signal;for(let s=0;s<e.length;s++){const o=e[s];if(o.type!==i)continue;const a=this.layerView.tryRecycleWith(o,{signal:r});if(a){e.splice(s,1),this.layer=o;const l=this.layerView,c=l.view;return this.promise=a.then((()=>(Wi(r),o.emit("layerview-destroy",{view:c,layerView:l}),c.emit("layerview-destroy",{view:c,layerView:l}),o.emit("layerview-create",{view:c,layerView:l}),c.emit("layerview-create",{view:c,layerView:l}),l))),this.promise}}return null}destroy(){this._controller.abort();const{layerView:e}=this;if(e){const{layer:i,view:r}=this;i.emit("layerview-destroy",{view:r,layerView:e}),r.emit("layerview-destroy",{layer:i,layerView:e})}this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null,this._map=null,this.promise=null,this._deferred=null}async start(){var n,s;const{view:e}=this;if(this._started||!e.map)return;this._started=!0;const{_controller:{signal:i},layer:r}=this;this._map=e.map;try{let o,a;if(await r.load({signal:i}),r.prefetchResources&&await r.prefetchResources({signal:i}),DDe(r))o=await r.createLayerView(e,{signal:i});else{if(!this.layerViewImporter.hasLayerViewModule(r))throw new ie("layer:view-not-supported","No layerview implementation was found");const d=await this.layerViewImporter.importLayerView(r);Wi(i),o="default"in d?new d.default({layer:r,view:e}):new d({layer:r,view:e})}const l=()=>{a=Nr(a),o.destroyed||o.destroy(),o.layer=null,o.parent=null,o.view=null,this.done=!0};a=ed(i,l),Wi(i);try{await o.when()}catch(d){throw l(),d}if(!((s=(n=this._map)==null?void 0:n.allLayers)==null?void 0:s.includes(r)))return l(),void this._deferred.reject(new ie("view:no-layerview-for-layer","The layer has been removed from the map",{layer:r}));this.layerView=o,r.emit("layerview-create",{view:e,layerView:o}),e.emit("layerview-create",{layer:r,layerView:o}),this.done=!0,this._deferred.resolve(o)}catch(o){r.emit("layerview-create-error",{view:e,error:o}),e.emit("layerview-create-error",{layer:r,error:o}),this.done=!0,this._deferred.reject(new ie("layerview:create-error","layerview creation failed",{layer:r,error:o}))}}};function DDe(t){return t.createLayerView!==zr.prototype.createLayerView}function zDe(t){return t!=null&&typeof t=="object"&&"layerViews"in t}let yl=class extends tt{constructor(e){super(e),this._layerLayerViewInfoMap=new Map,this._recyclingInfoMap=new Map,this._watchUpdatingTracking=new Rb,this.supportsGround=!0,this._preloadLayerViewModules=()=>{var r,n;const i=(r=this.view.map)==null?void 0:r.allLayers;if(i)for(const s of i)((n=this.layerViewFilter)==null?void 0:n.call(this,s))!==!1&&this.layerViewImporter.hasLayerViewModule(s)&&this.layerViewImporter.importLayerView(s)},this._reschedule=()=>this.destroyed?Promise.reject():(this._workPromise==null&&(this._workPromise=Nl(),this._workPromise.promise.catch((()=>{}))),this.removeHandles("reschedule"),this.addHandles(o2(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{var d,f,y;const i=this.view.map;if(this.destroyed||!i)return void this.clear();if(this._map!==i&&(this.clear(),this._map=i),this._workPromise==null)return void this.notifyChange("updating");this.removeHandles("reschedule"),this.removeHandles("collection-change");const r=new Set,n=[],s=this.view.ready,o=g=>{var b;if(g!=null){for(const _ of g)if(_){if(((b=this.layerViewFilter)==null?void 0:b.call(this,_))===!1)continue;r.add(_);const x=this._layerLayerViewInfoMap.get(_);x&&s?x.start():x||this._recyclingInfoMap.has(_)||n.push(_),"layers"in _&&_.layers&&o(_.layers)}}};for(const g of this._rootCollectionNames)o(Mc(this,g));const a=new Array,l=g=>{const b=g.tryRecycle(n);b?(this._recyclingInfoMap.set(g.layer,g),this.notifyChange("updating"),b.then((()=>{this._recyclingInfoMap.delete(g.layer),this._layerLayerViewInfoMap.set(g.layer,g),this._reschedule(),this.notifyChange("updating")})).catch((_=>{Tn(_)||(this._recyclingInfoMap.delete(g.layer),g.destroy(),this._reschedule(),this.notifyChange("updating"))}))):a.push(g)};for(const g of this._layerLayerViewInfoMap.values())r.has(g.layer)||(this._layerLayerViewInfoMap.delete(g.layer),l(g));for(const g of this._recyclingInfoMap.values())r.has(g.layer)||(this._recyclingInfoMap.delete(g.layer),l(g));for(const g of n)this._createLayerView(g);this._refreshCollections(),a.forEach((g=>g.destroy()));const c=[(d=i==null?void 0:i.ground)==null?void 0:d.layers,(f=i==null?void 0:i.basemap)==null?void 0:f.baseLayers,(y=i==null?void 0:i.basemap)==null?void 0:y.referenceLayers,i==null?void 0:i.layers].filter((g=>!!g));r.forEach((g=>"layers"in g&&c.push(g.layers))),this.addHandles(c.map((g=>this._watchUpdatingTracking.addOnCollectionChange((()=>g),this._reschedule))),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.addHandles([eo((()=>{var e,i;return(i=(e=this.view)==null?void 0:e.map)==null?void 0:i.allLayers}),"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),$e((()=>{const e=this.view,i=e==null?void 0:e.map;return[i==null?void 0:i.basemap,i==null?void 0:i.ground,i==null?void 0:i.layers,e==null?void 0:e.ready]}),(()=>this._reschedule()),ta)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),Dz(this._recyclingInfoMap),Dz(this._layerLayerViewInfoMap),this._watchUpdatingTracking.destroy(),this._map=null,this._workPromise!=null&&(this._workPromise.reject(fr()),this._workPromise=null)}get _layersToLayerViews(){const e=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&e.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(e)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return this._workPromise!=null||this._watchUpdatingTracking.updating||FTe(this._layerLayerViewInfoMap,(e=>!e.done))||this._recyclingInfoMap.size>0}get updatingRemaining(){let e=0;for(const i of this._layerLayerViewInfoMap.values())i.done||++e;return e}clear(){this.destroyed||(this._clearCollections(),Dz(this._layerLayerViewInfoMap))}async whenLayerView(e){if(await this._reschedule(),!this._layerLayerViewInfoMap.has(e)){if(this._recyclingInfoMap.has(e))return this._recyclingInfoMap.get(e).promise;throw new ie("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:e})}return this._layerLayerViewInfoMap.get(e).promise}isCreatingLayerViewsForLayer(e,i){var s;this.commitProperty("updatingRemaining");const r=this._layerLayerViewInfoMap.get(e);if(!(r!=null&&r.done))return!0;const n=r.layerView;return!(!n||!i||n.parent===i)||!!(r.done&&n&&"layers"in e&&((s=e.layers)!=null&&s.length))&&e.layers.some((o=>this.isCreatingLayerViewsForLayer(o,n)))}_refreshCollections(){for(const[e,i]of this._layersToLayerViews)this._populateLayerViewsOwners(Mc(this,e),Mc(this,i),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_clearCollections(){var e;for(const i of this._layersToLayerViews.values())(e=Mc(this,i))==null||e.removeAll()}_populateLayerViewsOwners(e,i,r){if(!e||!i)return void(i==null?void 0:i.removeAll());let n=0;for(const s of e){const o=this._layerLayerViewInfoMap.get(s);if(!(o!=null&&o.layerView))continue;const a=o.layerView;a.layer=s,a.parent=r,i.at(n)!==a&&i.splice(n,0,a),"layers"in s&&zDe(a)&&this._populateLayerViewsOwners(s.layers,a.layerViews,a),n+=1}n<i.length&&i.splice(n)}_createLayerView(e){e.load().catch((()=>{})),this.layerViewImporter.hasLayerViewModule(e)&&this.layerViewImporter.importLayerView(e);const i=new NDe(e,this.view,this.layerViewImporter);i.promise.then((()=>this._refreshCollections()),(r=>{r&&(Tn(r)||r.name==="cancelled:layerview-create")||Ie.getLogger(this).error(`Failed to create layerview for layer title:'${e.title??"no title"}', id:'${e.id??"no id"}' of type '${e.type}'.`,{layer:e,error:r}),this._refreshCollections()})),this._layerLayerViewInfoMap.set(e,i),this.view.ready&&i.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};u([h()],yl.prototype,"_workPromise",void 0),u([h({readOnly:!0})],yl.prototype,"_watchUpdatingTracking",void 0),u([h({readOnly:!0})],yl.prototype,"_layersToLayerViews",null),u([h({readOnly:!0})],yl.prototype,"_rootCollectionNames",null),u([h({constructOnly:!0})],yl.prototype,"layerViewFilter",void 0),u([h()],yl.prototype,"layerViewImporter",void 0),u([h()],yl.prototype,"supportsGround",void 0),u([h({readOnly:!0})],yl.prototype,"updating",null),u([h({readOnly:!0})],yl.prototype,"updatingRemaining",null),u([h({constructOnly:!0})],yl.prototype,"view",void 0),yl=u([V("esri.views.support.LayerViewManager")],yl);const VDe=yl;let K_=class extends tt{constructor(e){super(e),this.featureTitleFields=!1,this.utilityNetworkFields=!1,this.globalIdField=!1}};u([h()],K_.prototype,"featureTitleFields",void 0),u([h()],K_.prototype,"utilityNetworkFields",void 0),u([h()],K_.prototype,"globalIdField",void 0),K_=u([V("esri.views.support.RequiredFieldsOptions")],K_);const jDe=K_;var nI,Hb;let ft=(Hb=class extends ad.EventedMixin(Wh.EsriPromiseMixin(tt)){constructor(e){super(e),this._userSpatialReference=null,this._cursor=null,this.handles=new M$,this.updatingHandles=new Rb,this.allLayerViews=new ph({getCollections:()=>{var i,r,n;return[(i=this.basemapView)==null?void 0:i.baseLayerViews,(r=this.groundView)==null?void 0:r.layerViews,this.layerViews,(n=this.basemapView)==null?void 0:n.referenceLayerViews]},getChildrenFunction:BDe}),this.analyses=new mO,this.basemapView=null,this.displayFilterEnabled=!0,this.fatalError=null,this.graphics=new pC,this.groundView=null,this.typeSpecificPreconditionsReady=!0,this.layerViews=new Ze,this.magnifier=new Gfe,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this._readyStateWaitingTask=null,this.supportsGround=!0,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new CDe,this.navigation=new xN,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new Jfe(this),this.persistableViewModels=new Ze,this.requiredFieldsOptions=new jDe,this._isValid=!1,this._readyCycleForced=!1,this._lockedSpatialReference=null,this._userTimeZone=null,this._lockedTimeZone=null,this._userTimeExtent=null,this._lockedTimeExtent=null,this.theme=null,this.handles.add($e((()=>this.preconditionsReady),(i=>{var n,s;const r=this.ready;if(i?(this._lockedSpatialReference=this.spatialReference,this._lockedTimeZone=this.timeZone,this._lockedTimeExtent=this.timeExtent,nI.views.add(this)):(this._lockedSpatialReference=null,nI.views.remove(this)),this.notifyChange("spatialReference"),!i&&r)(n=this.toolViewManager)==null||n.detach(),this.analysisViewManager!=null&&this.analysisViewManager.detach(),(s=this.layerViewManager)==null||s.clear(),this._teardown();else if(i&&!r){try{this._startup()}catch(o){return void queueMicrotask((()=>{this.fatalError=new ie("view:startup-error","View._startup failed",o)}))}this.analysisViewManager!=null&&this.analysisViewManager.attach(),this.toolViewManager.attach()}}),td))}initialize(){this.addResolvingPromise(Promise.all([this.loadAsyncDependencies(),this.validate()]).then((()=>(this._isValid=!0,E$((()=>this.ready)))))),this.basemapView=new NNe({view:this}),this.layerViewManager=new VDe({view:this,layerViewFilter:e=>{var i;return((i=this.layerViewFilter)==null?void 0:i.call(this,e))??!0},layerViewImporter:{importLayerView:e=>this.importLayerView(e),hasLayerViewModule:e=>this.hasLayerViewModule(e)},supportsGround:this.supportsGround}),this.toolViewManager=new zd({view:this}),this.selectionManager=new WNe({view:this}),this.addHandles([Sn((()=>this.readyState==="map-content-error"&&!this.spatialReference),(()=>{Ie.getLogger(this).warn("#spatialReference","no spatial reference could be derived from the currently added map layers")})),$e((()=>this.initialExtentRequired),(e=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:e}),ta),$e((()=>this.ready),(e=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=e,this.defaultsFromMap.userSpatialReference=e?this.spatialReference:this._userSpatialReference)}),td),$e((()=>this._userSpatialReference),(e=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=e)}),ta)])}destroy(){var e,i;this.destroyed||(nI.views.remove(this),this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=hr(this.graphics),this.analyses=hr(this.analyses),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),hr(this.analysisViewManager),this.toolViewManager=hr(this.toolViewManager),this.layerViewManager=hr(this.layerViewManager),this.selectionManager=hr(this.selectionManager),this.basemapView=hr(this.basemapView),(e=this.groundView)==null||e.destroy(),(i=this.layerViews)==null||i.forEach((r=>r.destroy())),this.layerViews.length=0,this.invalidate(),this._emitter.clear(),this.handles.destroy(),this.map=hr(this.map),this.updatingHandles.destroy())}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return Ie.getLogger(this).error("#toMap()","Not implemented on this instance of View"),null}get activeTool(){var e;return(e=this.toolViewManager)==null?void 0:e.activeTool}set activeTool(e){this.toolViewManager&&(this.toolViewManager.activeTool=e)}get animation(){return this._get("animation")}set animation(e){this._set("animation",e)}get center(){return null}get defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new cr({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:(e,i)=>this.getSpatialReferenceSupport(e,i),...this.defaultsFromMapSettings})}get extent(){return this._get("extent")}set extent(e){this._set("extent",e)}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get highlights(){return this._get("highlights")??$De()}set highlights(e){this._set("highlights",nm(e,this._get("highlights"),Ze.ofType(wg)))}get interacting(){return this.navigating}get navigating(){return!1}get preconditionsReady(){var e;return!this.destroying&&!this.destroyed&&!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||Mo.isLoadable(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._lockedSpatialReference&&!((e=this.defaultsFromMap)!=null&&e.ready)||!this.typeSpecificPreconditionsReady)}get resolution(){return 0}set map(e){e!==this._get("map")&&(e!=null&&e.destroyed&&(Ie.getLogger(this).warn("#map","The provided map is already destroyed",{map:e}),e=null),Mo.isLoadable(e)&&e.load().catch((()=>{})),this.constructed&&!this.destroyed&&(this.forceReadyCycle(),this._lockedSpatialReference=null),this._set("map",e))}get readyState(){var e,i,r,n;if(this.destroyed)return this._get("readyState");if(!this.map)return"missing-map";if("container"in this&&!this.container)return"missing-container";if(this.fatalError)return"rendering-error";if((((e=this.defaultsFromMap)==null?void 0:e.ready)??!1)&&!this.spatialReference){const s=!("loaded"in this.map)||this.map.loaded,o=this.map.ground.loaded,a=((i=this.map.basemap)==null?void 0:i.loaded)??!0;return s&&a&&o&&!((r=this.map)!=null&&r.allLayers.length)?"empty-map":(this._readyStateWaitingTask||(this._readyStateWaitingTask=Fg((l=>s2(fe("view-readyState-waiting-delay"),null,l))),this.addHandles(this._readyStateWaitingTask),this.addHandles(this._readyStateWaitingTask,"ready-state-task")),(n=this._readyStateWaitingTask)!=null&&n.finished?"map-content-error":"loading")}return this._readyStateWaitingTask=Eo(this._readyStateWaitingTask),this.removeHandles("ready-state-task"),this.ready?"ready":"loading"}get spatialReference(){var i,r;const e=this._userSpatialReference||this._lockedSpatialReference||this.getDefaultSpatialReference()||null;if(e&&((r=(i=this.defaultsFromMap)==null?void 0:i.required)!=null&&r.heightModelInfo)){const n=e.clone();return n.vcsWkid=this.defaultsFromMap.vcsWkid,n.latestVcsWkid=this.defaultsFromMap.latestVcsWkid,n}return e}set spatialReference(e){const i=!es(e,this._get("spatialReference"));this._set("_userSpatialReference",e),i&&(this._set("spatialReference",e),this._spatialReferenceChanged(e))}_spatialReferenceChanged(e){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get timeExtent(){return this._userTimeExtent??this._lockedTimeExtent??this.getDefaultTimeExtent()??null}set timeExtent(e){this._userTimeExtent=e}get timeZone(){return this._userTimeZone??this._lockedTimeZone??this.getDefaultTimeZone()??Ya}set timeZone(e){this._userTimeZone=e,wPe(e)||Ie.getLogger(this).warn("#timeZone",`the parsed value '${e}' may not be a valid IANA time zone`)}get tools(){var e;return(e=this.toolViewManager)==null?void 0:e.tools}get initialExtent(){var e;return(e=this.defaultsFromMap)==null?void 0:e.extent}get cursor(){var e;return((e=this.toolViewManager)==null?void 0:e.cursor)??this._cursor??"default"}set cursor(e){this._cursor=e,this.notifyChange("cursor")}get size(){return[this.width,this.height]}get effectiveTheme(){return this.theme??new X6}whenLayerView(e){var i;return((i=this.layerViewManager)==null?void 0:i.whenLayerView(e))??Promise.reject()}getDefaultSpatialReference(){var e;return(e=this.defaultsFromMap)==null?void 0:e.spatialReference}getDefaultHeightModelInfo(){var e;return(this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)??((e=this.defaultsFromMap)==null?void 0:e.heightModelInfo)??null}getDefaultTimeZone(){return null}getDefaultTimeExtent(){return null}importLayerView(e){throw new ie("view:importLayerView-missing","importLayerView() not implemented")}hasLayerViewModule(e){return!1}async validate(){}async loadAsyncDependencies(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(e){return this.getSpatialReferenceSupport(e)!=null}when(e,i){return this.isResolved()&&!this.ready&&Ie.getLogger(this).warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(e,i)}forceReadyCycle(){this.ready&&(Sn((()=>this.destroyed||this.preconditionsReady===!1),(()=>this._readyCycleForced=!1),{once:!0}),this._readyCycleForced=!0)}addAndActivateTool(e){this.toolViewManager.tools.add(e),this.activeTool=e}tryFatalErrorRecovery(){this.fatalError=null}},nI=Hb,Hb.views=new Ze,Hb);u([h()],ft.prototype,"_userSpatialReference",void 0),u([h()],ft.prototype,"activeTool",null),u([h({readOnly:!0})],ft.prototype,"allLayerViews",void 0),u([h(OK(mO,"analyses"))],ft.prototype,"analyses",void 0),u([h()],ft.prototype,"animation",null),u([h()],ft.prototype,"basemapView",void 0),u([h()],ft.prototype,"center",null),u([h()],ft.prototype,"defaultsFromMapSettings",null),u([h()],ft.prototype,"defaultsFromMap",null),u([h()],ft.prototype,"displayFilterEnabled",void 0),u([h({type:Qt})],ft.prototype,"extent",null),u([h()],ft.prototype,"fatalError",void 0),u([h(OK(pC,"graphics"))],ft.prototype,"graphics",void 0),u([h()],ft.prototype,"groundView",void 0),u([h({readOnly:!0,type:Xo})],ft.prototype,"heightModelInfo",null),u([h({type:Ze.ofType(wg)})],ft.prototype,"highlights",null),u([h({readOnly:!0})],ft.prototype,"interacting",null),u([h({constructOnly:!0})],ft.prototype,"layerViewFilter",void 0),u([h({readOnly:!0})],ft.prototype,"navigating",null),u([h({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_lockedSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],ft.prototype,"preconditionsReady",null),u([h({readOnly:!0})],ft.prototype,"typeSpecificPreconditionsReady",void 0),u([h({type:Ze,readOnly:!0})],ft.prototype,"layerViews",void 0),u([h()],ft.prototype,"resolution",null),u([h({type:Gfe})],ft.prototype,"magnifier",void 0),u([h({value:null,type:Hpe})],ft.prototype,"map",null),u([h()],ft.prototype,"padding",void 0),u([h({readOnly:!0})],ft.prototype,"ready",void 0),u([h()],ft.prototype,"_readyStateWaitingTask",void 0),u([h({readOnly:!0})],ft.prototype,"readyState",null),u([h({type:et})],ft.prototype,"spatialReference",null),u([h()],ft.prototype,"stationary",null),u([h({readOnly:!0})],ft.prototype,"supportsGround",void 0),u([h({type:Hi})],ft.prototype,"timeExtent",null),u([h({type:String,nonNullable:!0})],ft.prototype,"timeZone",null),u([h()],ft.prototype,"tools",null),u([h()],ft.prototype,"toolViewManager",void 0),u([h({readOnly:!0})],ft.prototype,"type",void 0),u([h({type:Number})],ft.prototype,"scale",void 0),u([h({readOnly:!0})],ft.prototype,"updating",void 0),u([h({readOnly:!0})],ft.prototype,"initialExtentRequired",void 0),u([h({readOnly:!0})],ft.prototype,"initialExtent",null),u([h()],ft.prototype,"cursor",null),u([h({readOnly:!0})],ft.prototype,"input",void 0),u([h({type:xN,nonNullable:!0})],ft.prototype,"navigation",void 0),u([h()],ft.prototype,"layerViewManager",void 0),u([h()],ft.prototype,"analysisViewManager",void 0),u([h()],ft.prototype,"selectionManager",void 0),u([h()],ft.prototype,"width",void 0),u([h()],ft.prototype,"height",void 0),u([h({readOnly:!0})],ft.prototype,"resizing",void 0),u([h({value:null,readOnly:!0})],ft.prototype,"size",null),u([h({readOnly:!0})],ft.prototype,"suspended",void 0),u([h({readOnly:!0})],ft.prototype,"viewEvents",void 0),u([h({readOnly:!0})],ft.prototype,"persistableViewModels",void 0),u([h()],ft.prototype,"_isValid",void 0),u([h()],ft.prototype,"_readyCycleForced",void 0),u([h()],ft.prototype,"_lockedSpatialReference",void 0),u([h()],ft.prototype,"_userTimeZone",void 0),u([h()],ft.prototype,"_lockedTimeZone",void 0),u([h()],ft.prototype,"_userTimeExtent",void 0),u([h()],ft.prototype,"_lockedTimeExtent",void 0),u([h({type:X6})],ft.prototype,"theme",void 0),u([h({readOnly:!0,type:X6})],ft.prototype,"effectiveTheme",null),ft=nI=u([V("esri.views.View")],ft);const Qz=globalThis.$arcgis;Qz&&!Qz.views&&Object.defineProperty(Qz,"views",{configurable:!1,enumerable:!0,writable:!1,value:ft.views});const UDe=ft;function BDe(t){return t.layerViews}function Ix(t,e){return t[0]=e[0],t[1]=e[1],t}function gn(t,e,i){return t[0]=e,t[1]=i,t}function lme(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t}function sM(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t}function cme(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t}function ume(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t}function GDe(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function qDe(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function HDe(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t}function WDe(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t}function ZDe(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function $2(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t}function JDe(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t}function SN(t,e){const i=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(i*i+r*r)}function _O(t,e){const i=e[0]-t[0],r=e[1]-t[1];return i*i+r*r}function xO(t){const e=t[0],i=t[1];return Math.sqrt(e*e+i*i)}function dme(t){const e=t[0],i=t[1];return e*e+i*i}function hme(t,e){return t[0]=-e[0],t[1]=-e[1],t}function YDe(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function iB(t,e){const i=e[0],r=e[1];let n=i*i+r*r;return n>0&&(n=1/Math.sqrt(n),t[0]=e[0]*n,t[1]=e[1]*n),t}function pme(t,e){return t[0]*e[0]+t[1]*e[1]}function fme(t,e,i){const r=e[0]*i[1]-e[1]*i[0];return t[0]=t[1]=0,t[2]=r,t}function XDe(t,e,i,r){const n=e[0],s=e[1];return t[0]=n+r*(i[0]-n),t[1]=s+r*(i[1]-s),t}function KDe(t,e=1){const i=2*fN()*Math.PI;return t[0]=Math.cos(i)*e,t[1]=Math.sin(i)*e,t}function QDe(t,e,i){const r=e[0],n=e[1];return t[0]=i[0]*r+i[2]*n,t[1]=i[1]*r+i[3]*n,t}function $o(t,e,i){const r=e[0],n=e[1];return t[0]=i[0]*r+i[2]*n+i[4],t[1]=i[1]*r+i[3]*n+i[5],t}function e5e(t,e,i){const r=e[0],n=e[1];return t[0]=i[0]*r+i[3]*n+i[6],t[1]=i[1]*r+i[4]*n+i[7],t}function t5e(t,e,i){const r=e[0],n=e[1];return t[0]=i[0]*r+i[4]*n+i[12],t[1]=i[1]*r+i[5]*n+i[13],t}function i5e(t,e,i,r){const n=e[0]-i[0],s=e[1]-i[1],o=Math.sin(r),a=Math.cos(r);return t[0]=n*a-s*o+i[0],t[1]=n*o+s*a+i[1],t}function r5e(t,e){const i=t[0],r=t[1],n=e[0],s=e[1];let o=i*i+r*r;o>0&&(o=1/Math.sqrt(o));let a=n*n+s*s;a>0&&(a=1/Math.sqrt(a));const l=(i*n+r*s)*o*a;return l>1?0:l<-1?Math.PI:Math.acos(l)}function n5e(t){return"vec2("+t[0]+", "+t[1]+")"}function s5e(t,e){return t[0]===e[0]&&t[1]===e[1]}function o5e(t,e){const i=t[0],r=t[1],n=e[0],s=e[1],o=la();return Math.abs(i-n)<=o*Math.max(1,Math.abs(i),Math.abs(n))&&Math.abs(r-s)<=o*Math.max(1,Math.abs(r),Math.abs(s))}function a5e(t,e,i,r,n){let s=e[0]-i[0],o=e[1]-i[1];const a=(r[0]*s+r[1]*o)*(n-1);return s=r[0]*a,o=r[1]*a,t[0]=e[0]+s,t[1]=e[1]+o,t}const l5e=xO,Fq=sM,c5e=cme,u5e=ume,d5e=SN,h5e=_O,p5e=dme;Object.freeze(Object.defineProperty({__proto__:null,add:lme,angle:r5e,ceil:GDe,copy:Ix,cross:fme,dist:d5e,distance:SN,div:u5e,divide:ume,dot:pme,equals:o5e,exactEquals:s5e,floor:qDe,inverse:YDe,len:l5e,length:xO,lerp:XDe,max:WDe,min:HDe,mul:c5e,multiply:cme,negate:hme,normalize:iB,projectAndScale:a5e,random:KDe,rotate:i5e,round:ZDe,scale:$2,scaleAndAdd:JDe,set:gn,sqrDist:h5e,sqrLen:p5e,squaredDistance:_O,squaredLength:dme,str:n5e,sub:Fq,subtract:sM,transformMat2:QDe,transformMat2d:$o,transformMat3:e5e,transformMat4:t5e},Symbol.toStringTag,{value:"Module"}));function en(){return[0,0]}function f5e(t){return[t[0],t[1]]}function T2(t,e){return[t,e]}function m5e(t,e){return[t,e]}function y5e(t,e=en()){const i=Math.min(2,t.length);for(let r=0;r<i;++r)e[r]=t[r];return e}function mme(){return en()}function yme(){return T2(1,1)}function gme(){return T2(1,0)}function vme(){return T2(0,1)}const g5e=mme(),v5e=yme(),b5e=gme(),w5e=vme();Object.freeze(Object.defineProperty({__proto__:null,ONES:v5e,UNIT_X:b5e,UNIT_Y:w5e,ZEROS:g5e,clone:f5e,create:en,freeze:m5e,fromArray:y5e,fromValues:T2,ones:yme,unitX:gme,unitY:vme,zeros:mme},Symbol.toStringTag,{value:"Module"}));function _5e(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function E2(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function x5e(t,e,i,r,n,s,o){return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t[4]=s,t[5]=o,t}function Nq(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],o=e[4],a=e[5];let l=i*s-r*n;return l?(l=1/l,t[0]=s*l,t[1]=-r*l,t[2]=-n*l,t[3]=i*l,t[4]=(n*a-s*o)*l,t[5]=(r*o-i*a)*l,t):null}function S5e(t){return t[0]*t[3]-t[1]*t[2]}function mh(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=i[0],d=i[1],f=i[2],y=i[3],g=i[4],b=i[5];return t[0]=r*c+s*d,t[1]=n*c+o*d,t[2]=r*f+s*y,t[3]=n*f+o*y,t[4]=r*g+s*b+a,t[5]=n*g+o*b+l,t}function Dg(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=Math.sin(i),d=Math.cos(i);return t[0]=r*d+s*c,t[1]=n*d+o*c,t[2]=r*-c+s*d,t[3]=n*-c+o*d,t[4]=a,t[5]=l,t}function I2(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=i[0],d=i[1];return t[0]=r*c,t[1]=n*c,t[2]=s*d,t[3]=o*d,t[4]=a,t[5]=l,t}function tp(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=i[0],d=i[1];return t[0]=r,t[1]=n,t[2]=s,t[3]=o,t[4]=r*c+s*d+a,t[5]=n*c+o*d+l,t}function $N(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=i,t[2]=-i,t[3]=r,t[4]=0,t[5]=0,t}function bme(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function Dq(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function $5e(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function T5e(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+1)}function E5e(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t}function wme(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t}function I5e(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t}function C5e(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t[4]=e[4]+i[4]*r,t[5]=e[5]+i[5]*r,t}function M5e(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function k5e(t,e){const i=t[0],r=t[1],n=t[2],s=t[3],o=t[4],a=t[5],l=e[0],c=e[1],d=e[2],f=e[3],y=e[4],g=e[5],b=la();return Math.abs(i-l)<=b*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(r-c)<=b*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(n-d)<=b*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(s-f)<=b*Math.max(1,Math.abs(s),Math.abs(f))&&Math.abs(o-y)<=b*Math.max(1,Math.abs(o),Math.abs(y))&&Math.abs(a-g)<=b*Math.max(1,Math.abs(a),Math.abs(g))}const P5e=mh,A5e=wme;Object.freeze(Object.defineProperty({__proto__:null,add:E5e,copy:_5e,determinant:S5e,equals:k5e,exactEquals:M5e,frob:T5e,fromRotation:$N,fromScaling:bme,fromTranslation:Dq,identity:E2,invert:Nq,mul:P5e,multiply:mh,multiplyScalar:I5e,multiplyScalarAndAdd:C5e,rotate:Dg,scale:I2,set:x5e,str:$5e,sub:A5e,subtract:wme,translate:tp},Symbol.toStringTag,{value:"Module"}));function ip(){return[1,0,0,1,0,0]}function L5e(t){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function R5e(t,e,i,r,n,s){return[t,e,i,r,n,s]}const O5e=ip();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:O5e,clone:L5e,create:ip,fromValues:R5e},Symbol.toStringTag,{value:"Module"}));const $P={102100:{maxX:20037508342788905e-9,minX:-20037508342788905e-9,plus180Line:new Yr({paths:[[[20037508342788905e-9,-20037508342788905e-9],[20037508342788905e-9,20037508342788905e-9]]],spatialReference:et.WebMercator}),minus180Line:new Yr({paths:[[[-20037508342788905e-9,-20037508342788905e-9],[-20037508342788905e-9,20037508342788905e-9]]],spatialReference:et.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new Yr({paths:[[[180,-180],[180,180]]],spatialReference:et.WGS84}),minus180Line:new Yr({paths:[[[-180,-180],[-180,180]]],spatialReference:et.WGS84})}};function hb(t,e){return Math.ceil((t-e)/(2*e))}function _me(t,e){const i=yC(t);for(const r of i)for(const n of r)n[0]+=e;return t}function yC(t){return bn(t)?t.rings:t.paths}function F5e(t,e){return e?{...e,query:{...t??{},...e.query}}:{query:t}}function zq(t){return typeof t=="string"?rn(t):se(t)}function N5e(t,e,i){const r={};for(const n in t){if(n==="declaredClass")continue;const s=t[n];if(s!=null&&typeof s!="function")if(Array.isArray(s))r[n]=s.map((o=>N5e(o)));else if(typeof s=="object")if(s.toJSON){const o=s.toJSON(i==null?void 0:i[n]);r[n]=e?o:JSON.stringify(o)}else r[n]=e?s:JSON.stringify(s);else r[n]=s}return r}function D5e(t,e){var i;return t?e&&IG(t)?e:EG(t)??((i=Rt==null?void 0:Rt.findCredential(t))==null?void 0:i.token):null}async function Gyt(t,e,i){const r=D5e(t,e);if(r)return r;!Rt&&Si.request.useIdentity&&await ye(()=>import("./IdentityManager-BuTuS8EE.js"),[]);const n=await Rt.getCredential(t,i);return n==null?void 0:n.token}async function z5e(t,e,i,r){const n=zq(t),s=e[0].spatialReference,o={...r,responseType:"json",query:{...n.query,f:"json",sr:JS(s),target:JSON.stringify({geometryType:bw(e[0]),geometries:e}),cutter:JSON.stringify(i)}},a=await fi(n.path+"/cut",o),{cutIndexes:l,geometries:c=[]}=a.data;return{cutIndexes:l,geometries:c.map((d=>{const f=hp(d);return f.spatialReference=s,f}))}}function V5e(t){return{geometryType:bw(t[0]),geometries:t.map((e=>e.toJSON()))}}function xme(t,e,i){const r=WMe(e);return t.map((n=>{const s=r.fromJSON(n);return s.spatialReference=i,s}))}async function j5e(t,e,i){const r=typeof t=="string"?rn(t):t,n=e[0].spatialReference,s=bw(e[0]),o={...i,query:{...r.query,f:"json",sr:JS(n),geometries:JSON.stringify(V5e(e))}},{data:a}=await fi(r.path+"/simplify",o);return xme(a.geometries,s,n)}const Sme=()=>Ie.getLogger("esri.geometry.support.normalizeUtils");function U5e(t){return t.type==="polygon"}function B5e(t){return t[0].type==="polygon"}function G5e(t){return t[0].type==="polyline"}function dQ(t){const e=[];let i=0,r=0;for(let n=0;n<t.length;n++){const s=t[n];let o=null;for(let a=0;a<s.length;a++)o=s[a],e.push(o),a===0?(i=o[0],r=i):(i=Math.min(i,o[0]),r=Math.max(r,o[0]));o&&e.push([(i+r)/2,0])}return e}function q5e(t,e){if(!(t instanceof Yr||t instanceof br)){const n="straightLineDensify: the input geometry is neither polyline nor polygon";throw Sme().error(n),new ie("internal:geometry",n)}const i=yC(t),r=[];for(const n of i){const s=[];r.push(s),s.push([n[0][0],n[0][1]]);for(let o=0;o<n.length-1;o++){const a=n[o][0],l=n[o][1],c=n[o+1][0],d=n[o+1][1],f=Math.sqrt((c-a)*(c-a)+(d-l)*(d-l)),y=(d-l)/f,g=(c-a)/f,b=f/e;if(b>1){for(let C=1;C<=b-1;C++){const k=C*e,O=g*k+a,D=y*k+l;s.push([O,D])}const _=(f+Math.floor(b-1)*e)/2,x=g*_+a,E=y*_+l;s.push([x,E])}s.push([c,d])}}return U5e(t)?new br({rings:r,spatialReference:t.spatialReference}):new Yr({paths:r,spatialReference:t.spatialReference})}function hQ(t,e,i){if(e){const r=q5e(t,1e6);t=W1(r,!0)}return i&&(t=_me(t,i)),t}function pQ(t,e,i){if(Array.isArray(t)){const r=t[0];if(r>e){const n=hb(r,e);t[0]=r+n*(-2*e)}else if(r<i){const n=hb(r,i);t[0]=r+n*(-2*i)}}else{const r=t.x;if(r>e){const n=hb(r,e);t=t.clone().offset(n*(-2*e),0)}else if(r<i){const n=hb(r,i);t=t.clone().offset(n*(-2*i),0)}}return t}function H5e(t,e){let i=-1;for(let r=0;r<e.cutIndexes.length;r++){const n=e.cutIndexes[r],s=e.geometries[r],o=yC(s);for(let a=0;a<o.length;a++){const l=o[a];l.some((c=>{if(c[0]<180)return!0;{let d=0;for(let y=0;y<l.length;y++){const g=l[y][0];d=g>d?g:d}d=Number(d.toFixed(9));const f=-360*hb(d,180);for(let y=0;y<l.length;y++){const g=s.getPoint(a,y);s.setPoint(a,y,g.clone().offset(f,0))}return!0}}))}if(n===i){if(B5e(t))for(const a of yC(s))t[n]=t[n].addRing(a);else if(G5e(t))for(const a of yC(s))t[n]=t[n].addPath(a)}else i=n,t[n]=s}return t}async function $me(t,e,i){if(!Array.isArray(t))return $me([t],e);e&&typeof e!="string"&&Sme().warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const r=typeof e=="string"?e:(e==null?void 0:e.url)??Si.geometryServiceUrl;let n,s,o,a,l,c,d,f,y=0;const g=[],b=[];for(const O of t)if(O!=null)if(n||(n=O.spatialReference,s=aa(n),o=n.isWebMercator,c=o?102100:4326,a=$P[c].maxX,l=$P[c].minX,d=$P[c].plus180Line,f=$P[c].minus180Line),s)if(O.type==="mesh")b.push(O);else if(O.type==="point")b.push(pQ(O.clone(),a,l));else if(O.type==="multipoint"){const D=O.clone();D.points=D.points.map((B=>pQ(B,a,l))),b.push(D)}else if(O.type==="extent"){const D=O.clone()._normalize(!1,!1,s);b.push(D.rings?new br(D):D)}else if(O.extent){const D=O.extent,B=hb(D.xmin,l)*(2*a);let j=B===0?O.clone():_me(O.clone(),B);D.offset(B,0);let{xmin:Z,xmax:X}=D;Z=Number(Z.toFixed(9)),X=Number(X.toFixed(9)),D.intersects(d)&&X!==a?(y=X>y?X:y,j=hQ(j,o),g.push(j),b.push("cut")):D.intersects(f)&&Z!==l?(y=X*(2*a)>y?X*(2*a):y,j=hQ(j,o,360),g.push(j),b.push("cut")):b.push(j)}else b.push(O.clone());else b.push(O);else b.push(O);let _=hb(y,a),x=-90;const E=_,C=new Yr;for(;_>0;){const O=360*_-180;C.addPath([[O,x],[O,-1*x]]),x*=-1,_--}if(g.length>0&&E>0){const O=H5e(g,await z5e(r,g,C,i)),D=[],B=[];for(let X=0;X<b.length;X++){const ee=b[X];if(ee!=="cut")B.push(ee);else{const pe=O.shift(),he=t[X];he!=null&&he.type==="polygon"&&he.rings&&he.rings.length>1&&pe.rings.length>=he.rings.length?(D.push(pe),B.push("simplify")):B.push(o?Xf(pe):pe)}}if(!D.length)return B;const j=await j5e(r,D,i),Z=[];for(let X=0;X<B.length;X++){const ee=B[X];ee!=="simplify"?Z.push(ee):Z.push(o?Xf(j.shift()):j.shift())}return Z}const k=[];for(let O=0;O<b.length;O++){const D=b[O];if(D!=="cut")k.push(D);else{const B=g.shift();k.push(o===!0?Xf(B):B)}}return k}function W5e(t){if(!t)return null;const e=t.extent;if(!e)return null;const i=t.spatialReference&&aa(t.spatialReference);if(!i)return e;const[r,n]=i.valid,s=2*n,{width:o}=e;let a,{xmin:l,xmax:c}=e;if([l,c]=[c,l],t.type==="extent"||o===0||o<=n||o>s||l<r||c>n)return e;switch(t.type){case"polygon":if(!(t.rings.length>1))return e;a=dQ(t.rings);break;case"polyline":if(!(t.paths.length>1))return e;a=dQ(t.paths);break;case"multipoint":a=t.points}const d=e.clone();for(let f=0;f<a.length;f++){let y=a[f][0];y<0?(y+=n,c=Math.max(y,c)):(y-=n,l=Math.min(y,l))}return d.xmin=l,d.xmax=c,d.width<o?(d.xmin-=n,d.xmax-=n,d):e}function Vq(t,e,i){const r=aa(i);if(r==null)return t;const[n,s]=r.valid,o=2*s;let a=0,l=0;e>s?a=Math.ceil(Math.abs(e-s)/o):e<n&&(a=-Math.ceil(Math.abs(e-n)/o)),t>s?l=Math.ceil(Math.abs(t-s)/o):t<n&&(l=-Math.ceil(Math.abs(t-n)/o));let c=t+(a-l)*o;const d=c-e;return d>s?c-=o:d<n&&(c+=o),c}function qyt(t,e){const i=aa(e);if(i){const[r,n]=i.valid,s=n-r;if(t<r)for(;t<r;)t+=s;if(t>n)for(;t>n;)t-=s}return t}const Tme=96,Eme=39.37,Z5e=180/Math.PI;function Ime(t){return t.wkid?t:t.spatialReference||et.WGS84}function jq(t,e){return e.type?gn(t,e.x,e.y):Ix(t,e)}function Cme(t){return Dc(t)}function TN(t,e,i=0){let r=t.width,n=t.height;if(i!==0){const a=k$(i),l=Math.abs(Math.cos(a)),c=Math.abs(Math.sin(a));r=t.width*l+t.height*c,n=t.width*c+t.height*l}const s=Math.max(1,e[0]),o=Math.max(1,e[1]);return Math.max(r/s,n/o)*ize(t.spatialReference)}async function sI(t,e,i,r){var a,l,c;let n,s;if(!t||Array.isArray(t)&&!t.length)return null;if(Ze.isCollection(t)&&(t=t.toArray()),Array.isArray(t)&&t.length&&typeof t[0]=="object"){const d=t.every((g=>"attributes"in g)),f=t.some((g=>!g.geometry));let y=t;if(d&&f&&e&&e.allLayerViews){const g=new Map;for(const E of t){const C=E.layer,k=g.get(C)||[],O=E.attributes[C.objectIdField];O!=null&&k.push(O),g.set(C,k)}const b=[];g.forEach(((E,C)=>{var O;const k=(O=e.allLayerViews)==null?void 0:O.find((D=>D.layer.id===C.id));if(k&&"queryFeatures"in k){const D=C.createQuery();D.objectIds=E,D.returnGeometry=!0,b.push(k.queryFeatures(D))}}));const _=await Promise.all(b),x=[];for(const E of _)if(E&&E.features&&E.features.length)for(const C of E.features)C.geometry!=null&&x.push(C.geometry);y=x}for(const g of y)r=await sI(g,e,i,r);return r}if(Array.isArray(t)&&t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number")n=new _t(t);else if(t instanceof Cs)n=t;else if("geometry"in t){if(t.geometry)n=t.geometry;else if(t.layer){const d=t.layer,f=(a=e.allLayerViews)==null?void 0:a.find((y=>y.layer.id===d.id));if(f&&"queryFeatures"in f){const y=d.createQuery();y.objectIds=[t.attributes[d.objectIdField]],y.returnGeometry=!0;const g=await f.queryFeatures(y);n=(c=(l=g==null?void 0:g.features)==null?void 0:l[0])==null?void 0:c.geometry}}}if(n==null)return null;switch(n.type){case"point":s=new Qt({xmin:n.x,ymin:n.y,xmax:n.x,ymax:n.y,spatialReference:n.spatialReference});break;case"extent":case"multipoint":case"polygon":case"polyline":s=W5e(n);break;default:s=n.extent}if(!s)return null;qg()||rd(s.spatialReference,i)||await Og();const o=um(s,i);if(!o)return null;if(r){const d=o.center,f=d.clone();f.x=Vq(d.x,r.center.x,i),f.x!==d.x&&o.centerAt(f),r=r.union(o)}else r=o;return r}function J5e(t){var e;if(t&&(!Array.isArray(t)||typeof t[0]!="number")&&(typeof t=="object"||Array.isArray(t)&&typeof t[0]=="object")){if("layer"in t&&((e=t.layer)==null?void 0:e.minScale)!=null&&t.layer.maxScale!=null){const i=t.layer;return{min:i.minScale,max:i.maxScale}}if(Array.isArray(t)&&t.length&&t.every((i=>"layer"in i))){let i=0,r=0;for(const n of t){const s=n.layer;s!=null&&s.minScale&&s.maxScale&&(i=s.minScale<i?s.minScale:i,r=s.maxScale>r?s.maxScale:r)}return i&&r?{min:i,max:r}:null}}}function fQ(t,e){const i=Ime(t);return es(i,e)||i.imageCoordinateSystem||e.imageCoordinateSystem?t:um(t,e)}async function Y5e(t,e){var x;if(!t||!e)return new ps({targetGeometry:new _t,scale:0,rotation:0});let i=e.spatialReference;const{constraints:r,padding:n,viewpoint:s,size:o}=e,a=[n?o[0]-n.left-n.right:o[0],n?o[1]-n.top-n.bottom:o[1]];let l=null;t instanceof ps?l=t:t.viewpoint?l=t.viewpoint:t.target&&t.target.declaredClass==="esri.Viewpoint"&&(l=t.target);let c=null;l!=null&&l.targetGeometry?c=l.targetGeometry:t instanceof Qt?c=t:t instanceof Cs?c=await sI(t,e,i):t&&(c=await sI(t.center,e,i)||await sI(t.target,e,i)||await sI(t,e,i)),!c&&(s!=null&&s.targetGeometry)?c=s.targetGeometry:!c&&e.extent&&(c=e.extent),i||(i=Ime(e.spatialReference||e.extent||c)),qg()||es(c.spatialReference,i)||rd(c.spatialReference,i)||await Og();const d=fQ(c,i),f="center"in d?d.center:d;e.pickClosestTarget!==!1&&f.type==="point"&&((x=s.targetGeometry)==null?void 0:x.type)==="point"&&(f.x=Vq(f.x,s.targetGeometry.x,f.spatialReference));let y=0;l?y=l.rotation:t.hasOwnProperty("rotation")?y=t.rotation:s&&(y=s.rotation);let g=0;g=(l==null?void 0:l.targetGeometry)!=null&&l.targetGeometry.type==="point"?l.scale:"scale"in t&&t.scale?t.scale:"zoom"in t&&t.zoom!==-1&&r&&r.effectiveLODs?r.zoomToScale(t.zoom):Array.isArray(c)||c.type==="point"||c.type==="extent"&&c.width===0&&c.height===0?s.scale:TN(fQ(c.extent,i),a,y);const b=J5e(t.target??t);b&&(b.min&&b.min<g?g=b.min:b.max&&b.max>g&&(g=b.max));let _=new ps({targetGeometry:f,scale:g,rotation:y});return r&&(_=r.fit(_),r.constrainByGeometry(_),r.rotationEnabled||(_.rotation=s.rotation)),_}function ko(t,e){const i=t.targetGeometry,r=e.targetGeometry;return i.x=r.x,i.y=r.y,i.spatialReference=r.spatialReference,t.scale=e.scale,t.rotation=e.rotation,t}function X5e(t,e,i){return i?gn(t,.5*(e[0]-i.right+i.left),.5*(e[1]-i.bottom+i.top)):$2(t,e,.5)}const K5e=(function(){const t=en();return function(e,i,r){const n=i.targetGeometry;jq(t,n);const s=.5*U$(i);return e.xmin=t[0]-s*r[0],e.ymin=t[1]-s*r[1],e.xmax=t[0]+s*r[0],e.ymax=t[1]+s*r[1],e.spatialReference=n.spatialReference,e}})();function Q5e(t,e,i,r,n){var s;return rB(t,e,i.center),t.scale=TN(i,r),(s=n==null?void 0:n.constraints)==null||s.constrain(t),t}function eze(t,e,i,r){return Gq(t,e,i,r),Nq(t,t)}const Mme=(function(){const t=en();return function(e,i,r){return Fq(e,rze(e,i),X5e(t,i,r))}})(),tze=(function(){const t=ip(),e=en();return function(i,r,n,s){const o=U$(r),a=Uq(r);return gn(e,o,o),bme(t,e),Dg(t,t,a),tp(t,t,Mme(e,n,s)),tp(t,t,[0,s.top-s.bottom]),gn(i,t[4],t[5])}})();function U$(t){var e;return t.scale*kme((e=t.targetGeometry)==null?void 0:e.spatialReference)}function kme(t){return kl(t)?1/(Cme(t)*Eme*Tme):1}function Uq(t){return gq(t.rotation)||0}function ize(t){return kl(t)?Cme(t)*Eme*Tme:1}function rze(t,e){return $2(t,e,.5)}const Bq=(function(){const t=en(),e=en(),i=en();return function(r,n,s,o,a,l){return hme(t,n),$2(e,s,.5*l),gn(i,1/o*l,-1/o*l),Dq(r,e),a&&Dg(r,r,a),I2(r,r,i),tp(r,r,t),r}})(),Gq=(function(){const t=en();return function(e,i,r,n){const s=U$(i),o=Uq(i);return jq(t,i.targetGeometry),Bq(e,t,r,s,o,n)}})(),nze=(function(){const t=en();return function(e,i,r,n){const s=U$(i);return jq(t,i.targetGeometry),Bq(e,t,r,s,0,n)}})();function Pme(t){const e=aa(t);return e?e.valid[1]-e.valid[0]:0}function sze(t,e){return Math.round(Pme(t)/e)}const oze=(function(){const t=en(),e=en(),i=[0,0,0];return function(r,n,s){sM(t,r,n),iB(t,t),sM(e,r,s),iB(e,e),fme(i,t,e);let o=Math.acos(pme(t,e)/(xO(t)*xO(e)))*Z5e;return i[2]<0&&(o=-o),isNaN(o)&&(o=0),o}})(),aze=(function(){const t=en();return function(e,i,r,n){const s=e.targetGeometry;return ko(e,i),tze(t,i,r,n),s.x+=t[0],s.y+=t[1],e}})(),rB=function(t,e,i){ko(t,e);const r=t.targetGeometry;return r.x=i.x,r.y=i.y,r.spatialReference=i.spatialReference,t},lze=(function(){const t=en();return function(e,i,r,n,s){s||(s="center"),Fq(t,r,n),$2(t,t,.5);const o=t[0],a=t[1];switch(s){case"center":gn(t,0,0);break;case"left":gn(t,-o,0);break;case"top":gn(t,0,a);break;case"right":gn(t,o,0);break;case"bottom":gn(t,0,-a);break;case"top-left":gn(t,-o,a);break;case"bottom-left":gn(t,-o,-a);break;case"top-right":gn(t,o,a);break;case"bottom-right":gn(t,o,-a)}return EN(e,i,t),e}})();function Hyt(t,e,i){return ko(t,e),t.rotation+=i,t}function cze(t,e,i){return ko(t,e),t.rotation=i,t}const uze=(function(){const t=en();return function(e,i,r,n,s){return ko(e,i),isNaN(r)||r===0||(Lme(t,n,i,s),e.scale=i.scale*r,Rme(t,t,e,s),EN(e,e,gn(t,t[0]-n[0],n[1]-t[1]))),e}})();function mQ(t,e,i){return ko(t,e),t.scale=i,t}const Ame=(function(){const t=en();return function(e,i,r,n,s,o){return ko(e,i),isNaN(r)||r===0||(Lme(t,s,i,o),e.scale=i.scale*r,e.rotation+=n,Rme(t,t,e,o),EN(e,e,gn(t,t[0]-s[0],s[1]-t[1]))),e}})(),Wyt=(function(){const t=en(),e=en();return function(i,r,n,s,o,a,l){return Mme(e,a,l),lme(t,o,e),s?Ame(i,r,n,s,t,a):uze(i,r,n,t,a)}})(),Lme=(function(){const t=ip();return function(e,i,r,n){return $o(e,i,eze(t,r,n,1))}})(),Rme=(function(){const t=ip();return function(e,i,r,n){return $o(e,i,Gq(t,r,n,1))}})(),EN=(function(){const t=en(),e=ip();return function(i,r,n){ko(i,r);const s=U$(r),o=i.targetGeometry;return $N(e,Uq(r)),I2(e,e,T2(s,s)),$o(t,n,e),o.x+=t[0],o.y+=t[1],i}})();function Qf(){const t=new Float32Array(6);return t[0]=1,t[3]=1,t}function dze(t){const e=new Float32Array(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function hze(t,e,i,r,n,s){const o=new Float32Array(6);return o[0]=t,o[1]=e,o[2]=i,o[3]=r,o[4]=n,o[5]=s,o}function Ome(t,e,i,r){const n=e[r],s=e[r+1];t[r]=i[0]*n+i[2]*s+i[4],t[r+1]=i[1]*n+i[3]*s+i[5]}function Fme(t,e,i,r=0,n=0,s=2){const o=n||e.length/s;for(let a=r;a<o;a++)Ome(t,e,i,a*s)}Object.freeze(Object.defineProperty({__proto__:null,clone:dze,create:Qf,fromValues:hze,transform:Ome,transformMany:Fme},Symbol.toStringTag,{value:"Module"}));function pze(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function fze(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Nme(t,e,i,r,n,s,o,a,l,c){return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t[4]=s,t[5]=o,t[6]=a,t[7]=l,t[8]=c,t}function Dme(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function mze(t,e){if(t===e){const i=e[1],r=e[2],n=e[5];t[1]=e[3],t[2]=e[6],t[3]=i,t[5]=e[7],t[6]=r,t[7]=n}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function yze(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],d=e[8],f=d*o-a*c,y=-d*s+a*l,g=c*s-o*l;let b=i*f+r*y+n*g;return b?(b=1/b,t[0]=f*b,t[1]=(-d*r+n*c)*b,t[2]=(a*r-n*o)*b,t[3]=y*b,t[4]=(d*i-n*l)*b,t[5]=(-a*i+n*s)*b,t[6]=g*b,t[7]=(-c*i+r*l)*b,t[8]=(o*i-r*s)*b,t):null}function gze(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],d=e[8];return t[0]=o*d-a*c,t[1]=n*c-r*d,t[2]=r*a-n*o,t[3]=a*l-s*d,t[4]=i*d-n*l,t[5]=n*s-i*a,t[6]=s*c-o*l,t[7]=r*l-i*c,t[8]=i*o-r*s,t}function vze(t){const e=t[0],i=t[1],r=t[2],n=t[3],s=t[4],o=t[5],a=t[6],l=t[7],c=t[8];return e*(c*s-o*l)+i*(-c*n+o*a)+r*(l*n-s*a)}function qq(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],d=e[7],f=e[8],y=i[0],g=i[1],b=i[2],_=i[3],x=i[4],E=i[5],C=i[6],k=i[7],O=i[8];return t[0]=y*r+g*o+b*c,t[1]=y*n+g*a+b*d,t[2]=y*s+g*l+b*f,t[3]=_*r+x*o+E*c,t[4]=_*n+x*a+E*d,t[5]=_*s+x*l+E*f,t[6]=C*r+k*o+O*c,t[7]=C*n+k*a+O*d,t[8]=C*s+k*l+O*f,t}function nB(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],d=e[7],f=e[8],y=i[0],g=i[1];return t[0]=r,t[1]=n,t[2]=s,t[3]=o,t[4]=a,t[5]=l,t[6]=y*r+g*o+c,t[7]=y*n+g*a+d,t[8]=y*s+g*l+f,t}function zme(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],d=e[7],f=e[8],y=Math.sin(i),g=Math.cos(i);return t[0]=g*r+y*o,t[1]=g*n+y*a,t[2]=g*s+y*l,t[3]=g*o-y*r,t[4]=g*a-y*n,t[5]=g*l-y*s,t[6]=c,t[7]=d,t[8]=f,t}function bze(t,e,i){const r=i[0],n=i[1],s=i[2];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=n*e[3],t[4]=n*e[4],t[5]=n*e[5],t[6]=s*e[6],t[7]=s*e[7],t[8]=s*e[8],t}function wze(t,e,i){const r=i[0],n=i[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=n*e[3],t[4]=n*e[4],t[5]=n*e[5],t}function _ze(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function xze(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=i,t[2]=0,t[3]=-i,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Sze(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function $ze(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function Tze(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],o=i+i,a=r+r,l=n+n,c=i*o,d=r*o,f=r*a,y=n*o,g=n*a,b=n*l,_=s*o,x=s*a,E=s*l;return t[0]=1-f-b,t[3]=d-E,t[6]=y+x,t[1]=d+E,t[4]=1-c-b,t[7]=g-_,t[2]=y-x,t[5]=g+_,t[8]=1-c-f,t}function Eze(t,e){const i=e[0],r=e[1],n=e[2],s=e[4],o=e[5],a=e[6],l=e[8],c=e[9],d=e[10],f=d*o-a*c,y=-d*s+a*l,g=c*s-o*l,b=i*f+r*y+n*g;if(!b)return null;const _=1/b;return t[0]=f*_,t[1]=(-d*r+n*c)*_,t[2]=(a*r-n*o)*_,t[3]=y*_,t[4]=(d*i-n*l)*_,t[5]=(-a*i+n*s)*_,t[6]=g*_,t[7]=(-c*i+r*l)*_,t[8]=(o*i-r*s)*_,t}function Ize(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],d=e[8],f=e[9],y=e[10],g=e[11],b=e[12],_=e[13],x=e[14],E=e[15],C=i*a-r*o,k=i*l-n*o,O=i*c-s*o,D=r*l-n*a,B=r*c-s*a,j=n*c-s*l,Z=d*_-f*b,X=d*x-y*b,ee=d*E-g*b,pe=f*x-y*_,he=f*E-g*_,ne=y*E-g*x;let re=C*ne-k*he+O*pe+D*ee-B*X+j*Z;return re?(re=1/re,t[0]=(a*ne-l*he+c*pe)*re,t[1]=(l*ee-o*ne-c*X)*re,t[2]=(o*he-a*ee+c*Z)*re,t[3]=(n*he-r*ne-s*pe)*re,t[4]=(i*ne-n*ee+s*X)*re,t[5]=(r*ee-i*he-s*Z)*re,t[6]=(_*j-x*B+E*D)*re,t[7]=(x*O-b*j-E*k)*re,t[8]=(b*B-_*O+E*C)*re,t):null}function Cze(t,e,i){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/i,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function Mze(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function kze(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2)}function Pze(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t}function Vme(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t}function Aze(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t}function Lze(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t[4]=e[4]+i[4]*r,t[5]=e[5]+i[5]*r,t[6]=e[6]+i[6]*r,t[7]=e[7]+i[7]*r,t[8]=e[8]+i[8]*r,t}function Rze(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function Oze(t,e){const i=t[0],r=t[1],n=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],d=t[8],f=e[0],y=e[1],g=e[2],b=e[3],_=e[4],x=e[5],E=e[6],C=e[7],k=e[8],O=la();return Math.abs(i-f)<=O*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(r-y)<=O*Math.max(1,Math.abs(r),Math.abs(y))&&Math.abs(n-g)<=O*Math.max(1,Math.abs(n),Math.abs(g))&&Math.abs(s-b)<=O*Math.max(1,Math.abs(s),Math.abs(b))&&Math.abs(o-_)<=O*Math.max(1,Math.abs(o),Math.abs(_))&&Math.abs(a-x)<=O*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(l-E)<=O*Math.max(1,Math.abs(l),Math.abs(E))&&Math.abs(c-C)<=O*Math.max(1,Math.abs(c),Math.abs(C))&&Math.abs(d-k)<=O*Math.max(1,Math.abs(d),Math.abs(k))}function Fze(t){const e=la(),i=t[0],r=t[1],n=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],d=t[8];return Math.abs(1-(i*i+s*s+l*l))<=e&&Math.abs(1-(r*r+o*o+c*c))<=e&&Math.abs(1-(n*n+a*a+d*d))<=e}const Nze=qq,Dze=Vme;Object.freeze(Object.defineProperty({__proto__:null,add:Pze,adjoint:gze,copy:fze,determinant:vze,equals:Oze,exactEquals:Rze,frob:kze,fromMat2d:$ze,fromMat4:pze,fromQuat:Tze,fromRotation:xze,fromScaling:Sze,fromTranslation:_ze,identity:Dme,invert:yze,isOrthoNormal:Fze,mul:Nze,multiply:qq,multiplyScalar:Aze,multiplyScalarAndAdd:Lze,normalFromMat4:Ize,normalFromMat4Legacy:Eze,projection:Cze,rotate:zme,scale:bze,scaleByVec2:wze,set:Nme,str:Mze,sub:Dze,subtract:Vme,translate:nB,transpose:mze},Symbol.toStringTag,{value:"Module"}));function ML(){const t=new Float32Array(9);return t[0]=1,t[4]=1,t[8]=1,t}function zze(t){const e=new Float32Array(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function Vze(t,e,i,r,n,s,o,a,l){const c=new Float32Array(9);return c[0]=t,c[1]=e,c[2]=i,c[3]=r,c[4]=n,c[5]=s,c[6]=o,c[7]=a,c[8]=l,c}Object.freeze(Object.defineProperty({__proto__:null,clone:zze,create:ML,fromValues:Vze},Symbol.toStringTag,{value:"Module"}));function oM(){return new Float32Array(2)}function jze(t){const e=new Float32Array(2);return e[0]=t[0],e[1]=t[1],e}function hw(t,e){const i=new Float32Array(2);return i[0]=t,i[1]=e,i}function jme(){return oM()}function Ume(){return hw(1,1)}function Bme(){return hw(1,0)}function Gme(){return hw(0,1)}const Uze=jme(),Bze=Ume(),Gze=Bme(),qze=Gme();Object.freeze(Object.defineProperty({__proto__:null,ONES:Bze,UNIT_X:Gze,UNIT_Y:qze,ZEROS:Uze,clone:jze,create:oM,fromValues:hw,ones:Ume,unitX:Bme,unitY:Gme,zeros:jme},Symbol.toStringTag,{value:"Module"}));function Hze(t){return t instanceof Float32Array&&t.length>=2}function Wze(t){return Array.isArray(t)&&t.length>=2}function e4(t){return Hze(t)||Wze(t)}var sB;const Ap=[0,0];let Kp=sB=class extends ve{constructor(t){super(t),this._viewpoint2D={center:en(),rotation:0,scale:0,spatialReference:void 0},this.center=[0,0],this.extent=new Qt,this.id=0,this.inverseTransform=ip(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=ip(),this.transformNoRotation=ip(),this.displayMat3=ML(),this.displayViewMat3=ML(),this.viewMat3=ML(),this.viewMat2d=Qf(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(t){this._set("pixelRatio",t),this._update()}set size(t){this._set("size",t),this._update()}set viewpoint(t){if(t){const e=this._viewpoint2D,i=t.targetGeometry;e.center[0]=i.x,e.center[1]=i.y,e.rotation=t.rotation,e.scale=t.scale,e.spatialReference=i.spatialReference}this._update()}get visibleArea(){const[t,e]=this.size;return[this.toMap([0,0],0,0),this.toMap([0,0],0,e),this.toMap([0,0],t,e),this.toMap([0,0],t,0)]}copy(t){const e=this.size,i=this.viewpoint;return i&&e?(this.viewpoint=ko(i,t.viewpoint),this._set("size",Ix(e,t.size))):(this.viewpoint=t.viewpoint.clone(),this._set("size",[t.size[0],t.size[1]])),this._set("pixelRatio",t.pixelRatio),this}clone(){return new sB({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(t,e,i){return e4(e)?$o(t,e,this.inverseTransform):(Ap[0]=e,Ap[1]=i,$o(t,Ap,this.inverseTransform))}toScreen(t,e,i){return e4(e)?$o(t,e,this.transform):(Ap[0]=e,Ap[1]=i,$o(t,Ap,this.transform))}toScreenNoRotation(t,e,i){return e4(e)?$o(t,e,this.transformNoRotation):(Ap[0]=e,Ap[1]=i,$o(t,Ap,this.transformNoRotation))}wrapMapCoordinate(t,e){Ix(t,e);const[i]=e,[r]=this.center,{extent:n,spatialReference:s}=this;let{xmin:o,xmax:a}=n;if(s.isWrappable){const l=Pme(s)/2;o=Math.max(o,r-l),a=Math.min(a,r+l)}return(i<o||i>a)&&(t[0]=Vq(i,r,s)),t}getScreenTransform(t,e){const{center:i}=this._viewpoint2D,r=this._get("pixelRatio")||1,n=this._get("size");return Bq(t,i,n,e,0,r),t}_update(){const{center:t,spatialReference:e,scale:i,rotation:r}=this._viewpoint2D,n=this._get("pixelRatio")||1,s=this._get("size"),o=new ps({targetGeometry:new _t(t[0],t[1],e),scale:i,rotation:r});if(this._set("viewpoint",o),!s||!e||!i)return;this.resolution=U$(o),this.rotation=r,this.scale=i,this.spatialReference=e,Ix(this.center,t);const a=s[0]!==0?2/s[0]:0,l=s[1]!==0?-2/s[1]:0;Nme(this.displayMat3,a,0,0,0,l,0,-1,1,1);const c=Dme(this.viewMat3),d=hw(s[0]/2,s[1]/2),f=hw(-s[0]/2,-s[1]/2),y=gq(r);nB(c,c,d),zme(c,c,y),nB(c,c,f),qq(this.displayViewMat3,this.displayMat3,c);const g=Dq(this.viewMat2d,d);return Dg(g,g,y),tp(g,g,f),K5e(this.extent,o,s),Gq(this.transform,o,s,n),Nq(this.inverseTransform,this.transform),nze(this.transformNoRotation,o,s,n),this.worldScreenWidth=sze(this.spatialReference,this.resolution),this._set("id",this.id+1),this.notifyChange("visibleArea"),this}};u([h({readOnly:!0})],Kp.prototype,"id",void 0),u([h({value:1,json:{write:!0}})],Kp.prototype,"pixelRatio",null),u([h({json:{write:!0}})],Kp.prototype,"size",null),u([h()],Kp.prototype,"spatialReference",void 0),u([h({type:ps,json:{write:!0}})],Kp.prototype,"viewpoint",null),u([h({readOnly:!0})],Kp.prototype,"visibleArea",null),Kp=sB=u([V("esri.views.2d.ViewState")],Kp);const yQ=Kp;var oB,aB;let Ef=oB=class extends tt{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new oB({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};u([h()],Ef.prototype,"left",void 0),u([h()],Ef.prototype,"top",void 0),u([h()],Ef.prototype,"right",void 0),u([h()],Ef.prototype,"bottom",void 0),Ef=oB=u([V("esri.views.2d.PaddedViewState.Padding")],Ef);let Q_=aB=class extends yQ{constructor(...t){super(...t),this.paddedViewState=new yQ,this._updateContent=(()=>{const e=en();return()=>{const i=this._get("size"),r=this._get("padding");if(!i||!r)return;const n=this.paddedViewState;gn(e,r.left+r.right,r.top+r.bottom),sM(e,i,e),Ix(n.size,e);const s=n.viewpoint;s&&(this.viewpoint=s)}})(),this.addHandles($e((()=>[this.size,this.padding]),(()=>this._updateContent()),td)),this.padding=new Ef,this.size=[0,0]}set padding(t){this._set("padding",t||new Ef)}set viewpoint(t){if(t){this.paddedViewState.viewpoint=t;let e=t;const i=this._get("padding");i&&(e=aze(t.clone(),t,this._get("size"),i));const{targetGeometry:r,rotation:n,scale:s}=e,{x:o,y:a,spatialReference:l}=r,c=this._viewpoint2D;c.center[0]=o,c.center[1]=a,c.rotation=n,c.scale=s,c.spatialReference=l,this._update()}}clone(){return new aB({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};u([h()],Q_.prototype,"paddedViewState",void 0),u([h({type:Ef})],Q_.prototype,"padding",null),u([h()],Q_.prototype,"viewpoint",null),Q_=aB=u([V("esri.views.2d.PaddedViewState")],Q_);const Hq=Q_;var go;(function(t){t[t.ANIMATING=0]="ANIMATING",t[t.INTERACTING=1]="INTERACTING",t[t.IDLE=2]="IDLE"})(go||(go={}));const qme=Symbol("Yield");let Zze=class{constructor(){this._tasks=new Array,this._numPendingTasks=Kb(0),this._running=Kb(!1)}get length(){return this._tasks.length}get updating(){return this._numPendingTasks.value>0}get running(){return this._running.value}_updateRunning(){this._running.value=this._tasks.length>0}destroy(){this.cancelAll()}runTask(e){if(this.length===0)return qme;for(;!e.done&&this._process(e);)e.madeProgress()}push(e,i,r){return new Promise(((n,s)=>{this._tasks.push(new gQ(n,s,e,i,r)),++this._numPendingTasks.value,this._updateRunning()})).finally((()=>--this._numPendingTasks.value))}unshift(e,i,r){return new Promise(((n,s)=>{this._tasks.unshift(new gQ(n,s,e,i,r)),++this._numPendingTasks.value,this._updateRunning()})).finally((()=>--this._numPendingTasks.value))}_process(e){var r;if(this._tasks.length===0)return!1;const i=this._tasks.shift();this._updateRunning();try{const n=Nc(i.signal);if(n&&!i.abortCallback)i.reject(fr());else{const s=n?(r=i.abortCallback)==null?void 0:r.call(i,fr()):i.callback(e);gp(s)?s.then(i.resolve,i.reject):i.resolve(s)}}catch(n){i.reject(n)}return!0}cancelAll(){const e=fr();for(const i of this._tasks)if(i.abortCallback){const r=i.abortCallback(e);i.resolve(r)}else i.reject(e);this._tasks.length=0,this._updateRunning()}},gQ=class{constructor(e,i,r,n=void 0,s=void 0){this.resolve=e,this.reject=i,this.callback=r,this.signal=n,this.abortCallback=s}},oI=class extends tt{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};u([h()],oI.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),u([h()],oI.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),oI=u([V("esri.views.support.debugFlags")],oI);const Jze=new oI;function Yze(){return new SO.Scheduler}var ni;(function(t){t.RESOURCE_CONTROLLER_IMMEDIATE="immediate",t.RESOURCE_CONTROLLER="schedule",t.SLIDE="slide",t.STREAM_DATA_LOADER="stream loader",t.ELEVATION_QUERY="elevation query",t.TERRAIN_SURFACE="terrain",t.SURFACE_GEOMETRY_UPDATES="surface geometry updates",t.LOD_RENDERER="LoD renderer",t.GRAPHICS_CORE="Graphics3D",t.I3S_CONTROLLER="I3S",t.POINT_CLOUD_LAYER="point cloud",t.FEATURE_TILE_FETCHER="feature fetcher",t.OVERLAY="overlay",t.OVERLAY_RENDERER="overlay renderer",t.STAGE="stage",t.GRAPHICS_DECONFLICTOR="graphics deconflictor",t.FILTER_VISIBILITY="Graphics3D filter visibility",t.SCALE_VISIBILITY="Graphics3D scale visibility",t.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",t.POINT_OF_INTEREST_FREQUENT="POI frequent",t.POINT_OF_INTEREST_INFREQUENT="POI infrequent",t.LABELER="labeler",t.FEATURE_QUERY_ENGINE="feature query",t.FEATURE_TILE_TREE="feature tile tree",t.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",t.ELEVATION_ALIGNMENT="elevation alignment",t.ELEVATION_ALIGNMENT_SCENE="elevation alignment scene",t.TEXT_TEXTURE_ATLAS="text texture atlas",t.TEXTURE_UNLOAD="texture unload",t.LINE_OF_SIGHT_TOOL="line of sight tool",t.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",t.ELEVATION_PROFILE="elevation profile",t.SNAPPING="snapping",t.SHADOW_ACCUMULATOR="shadow accumulator",t.CLOUDS_GENERATOR="clouds generator",t.MAPVIEW_FETCH_QUEUE="mapview fetch queue",t.MAPVIEW_LAYERVIEW_UPDATE="mapview layerview update",t.MAPVIEW_VECTOR_TILE_PARSING_QUEUE="mapview vector tile parsing queue",t[t.NONE=0]="NONE",t[t.TEST_PRIO=1]="TEST_PRIO"})(ni||(ni={}));const yc=0,vQ=new Map([[ni.RESOURCE_CONTROLLER_IMMEDIATE,yc],[ni.RESOURCE_CONTROLLER,4],[ni.SLIDE,yc],[ni.STREAM_DATA_LOADER,yc],[ni.ELEVATION_QUERY,yc],[ni.TERRAIN_SURFACE,1],[ni.SURFACE_GEOMETRY_UPDATES,1],[ni.LOD_RENDERER,2],[ni.GRAPHICS_CORE,2],[ni.I3S_CONTROLLER,2],[ni.POINT_CLOUD_LAYER,2],[ni.FEATURE_TILE_FETCHER,2],[ni.CLOUDS_GENERATOR,2],[ni.OVERLAY,4],[ni.OVERLAY_RENDERER,4],[ni.STAGE,4],[ni.GRAPHICS_DECONFLICTOR,4],[ni.FILTER_VISIBILITY,4],[ni.SCALE_VISIBILITY,4],[ni.FRUSTUM_VISIBILITY,4],[ni.POINT_OF_INTEREST_FREQUENT,6],[ni.POINT_OF_INTEREST_INFREQUENT,30],[ni.LABELER,8],[ni.FEATURE_QUERY_ENGINE,8],[ni.FEATURE_TILE_TREE,16],[ni.FEATURE_TILE_TREE_ACTIVE,yc],[ni.ELEVATION_ALIGNMENT,12],[ni.ELEVATION_ALIGNMENT_SCENE,14],[ni.TEXT_TEXTURE_ATLAS,12],[ni.TEXTURE_UNLOAD,12],[ni.LINE_OF_SIGHT_TOOL,16],[ni.LINE_OF_SIGHT_TOOL_INTERACTIVE,yc],[ni.SNAPPING,yc],[ni.SHADOW_ACCUMULATOR,30],[ni.MAPVIEW_FETCH_QUEUE,yc],[ni.MAPVIEW_LAYERVIEW_UPDATE,2],[ni.MAPVIEW_VECTOR_TILE_PARSING_QUEUE,yc]]);function bQ(t){return vQ.has(t)?vQ.get(t):typeof t=="number"?t:1}const Xze=6.5,wQ=1,Kze=30,Qze=1e3/30,e4e=100,_Q=.9;var SO,jv;(function(t){class e{get updating(){return this._updating.value}_updatingChanged(){this._updating.value=this._tasks.some((s=>s.needsUpdate))}constructor(){this._updating=Kb(!0),this._microTaskQueued=!1,this._frameNumber=0,this.performanceInfo={total:new HI("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new r,this._state=go.INTERACTING,this._tasks=new WI,this._runQueue=new WI,this._load=0,this._idleStateCallbacks=new WI,this._idleUpdatesStartFired=!1,this._forceTask=!1,this._debug=!1,this._debugHandle=$e((()=>Jze.SCHEDULER_LOG_SLOW_TASKS),(s=>this._debug=s),kt);for(const s of Object.keys(ni))this.performanceInfo.tasks.set(ni[s],new HI(ni[s]))}destroy(){this._tasks.toArray().forEach((s=>s.remove())),this._tasks.clear(),Nr(this._debugHandle),this._microTaskQueued=!1,this._updatingChanged()}taskRunningChanged(s){this._updatingChanged(),s&&this._budget.remaining>0&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask((()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.remaining>0&&this._schedule()&&this._runFrame())})))}registerTask(s,o){const a=new i(this,s,o);return this._tasks.push(a),this._updatingChanged(),this.performanceInfo.tasks.has(s)||this.performanceInfo.tasks.set(s,new HI(s)),a}registerIdleStateCallbacks(s,o){const a={idleBegin:s,idleEnd:o};this._idleStateCallbacks.push(a),this.state===go.IDLE&&this._idleUpdatesStartFired&&a.idleBegin();const l=this;return{remove:()=>this._removeIdleStateCallbacks(a),set idleBegin(c){l._idleUpdatesStartFired&&(a.idleEnd(),l._state===go.IDLE&&c()),a.idleBegin=c},set idleEnd(c){a.idleEnd=c}}}get load(){return this._load}set state(s){this._state!==s&&(this._state=s,this.state!==go.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll((o=>o.idleEnd()))))}get state(){return this._state}frame(s){this._startFrameTaskTimes();const o=this._updateBudget(s);if(o){const a=this._budget.now();this._runFrame(),this._recordFrameTaskTimes(this._budget.now()-a)}else this._recordFrameTaskTimes(0);return o}_updateBudget(s){this._test&&(this._test.usedBudget=0),++this._frameNumber;let o=Xze,a=s.frameDuration,l=wQ;switch(this.state){case go.IDLE:o=0,a=Math.max(e4e,s.frameDuration),l=Kze;break;case go.INTERACTING:a=Math.max(Qze,s.frameDuration);case go.ANIMATING:}return a=a-s.elapsedFrameTime-o,this.state!==go.IDLE&&a<wQ&&!this._forceTask?(this._forceTask=!0,!1):(a=Math.max(a,l),this._budget.reset(a),this._updateLoad(),this._schedule())}_runFrame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case go.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll((s=>s.idleBegin()))),this._runIdle();break;case go.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test&&(this._test.usedBudget=this._budget.elapsed)}stopFrame(){this._budget.reset(0),this._budget.madeProgress()}_removeIdleStateCallbacks(s){this._idleUpdatesStartFired&&s.idleEnd(),this._idleStateCallbacks.removeUnordered(s)}removeTask(s){this._tasks.removeUnordered(s),this._runQueue.removeUnordered(s),this._updatingChanged()}_updateTask(s){this._tasks.forAll((o=>{o.name===s&&o.setPriority(s)}))}_getState(s){if(this._runQueue.some((a=>a.name===s)))return jv.SCHEDULED;let o=jv.IDLE;return this._tasks.forAll((a=>{a.name===s&&a.needsUpdate&&(a.schedulePriority<=1?o=jv.READY:o!==jv.READY&&(o=jv.WAITING))})),o}_getRuntime(s){let o=0;return this._tasks.forAll((a=>{a.name===s&&(o+=a.runtime)})),o}_resetRuntimes(){this._tasks.forAll((s=>s.runtime=0))}_getRunning(){const s=new Map;if(this._tasks.forAll((a=>{a.needsUpdate&&s.set(a.name,(s.get(a.name)||0)+1)})),s.size===0)return null;let o="";return s.forEach(((a,l)=>{o+=a>1?` ${a}x ${l}`:` ${l}`})),o}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const s=this._tasks.reduce(((o,a)=>a.needsUpdate?++o:o),0);this._load=this._load*_Q+s*(1-_Q)}_schedule(){for(this._runQueue.filterInPlace((s=>!!s.needsUpdate||(s.schedulePriority=s.basePriority,!1))),this._tasks.forAll((s=>{s.basePriority===yc&&s.needsUpdate&&!this._runQueue.includes(s)&&s.blockFrame!==this._frameNumber&&this._runQueue.unshift(s)}));this._runQueue.length===0;){let s=!1,o=0;if(this._tasks.forAll((a=>{a.needsUpdate&&a.schedulePriority!==0&&a.basePriority!==yc&&a.blockFrame!==this._frameNumber&&(s=!0,o=Math.max(o,a.basePriority),a.schedulePriority===1?(a.schedulePriority=0,this._runQueue.push(a)):--a.schedulePriority)})),!s)return this._updatingChanged(),!1}return this._updatingChanged(),!0}_run(){do for(;this._runQueue.length>0;){const s=this._budget.now(),o=this._runQueue.pop();this._budget.resetProgress();try{o.task.runTask(this._budget)===qme&&(o.blockFrame=this._frameNumber)}catch(l){Ie.getLogger("esri.views.support.Scheduler").error(`Exception in task "${o.name}"`,l),o.blockFrame=this._frameNumber}!this._budget.hasProgressed&&o.blockFrame!==this._frameNumber&&o.needsUpdate&&(o.name,ni.I3S_CONTROLLER,o.blockFrame=this._frameNumber),o.schedulePriority=o.basePriority;const a=this._budget.now()-s;if(o.runtime+=a,this._frameTaskTimes.set(o.priority,this._frameTaskTimes.get(o.priority)+a),this._budget.remaining<=0)return void this._updatingChanged()}while(this._schedule());this._updatingChanged()}_startFrameTaskTimes(){for(const s of Object.keys(ni))this._frameTaskTimes.set(ni[s],0)}_recordFrameTaskTimes(s){this._frameTaskTimes.forEach(((o,a)=>this.performanceInfo.tasks.get(a).push(o))),this.performanceInfo.total.push(s)}get test(){return this._test}}t.Scheduler=e;class i{get task(){return this._task.value}get updating(){return this._queue.running}constructor(s,o,a){this._scheduler=s,this.name=o,this.blockFrame=0,this.runtime=0,this._queue=new Zze,this._handles=new M$,this._basePriority=bQ(o),this.schedulePriority=this._basePriority,this._task=Kb(a??this._queue),this._handles.add(Sn((()=>this.task.running),(l=>s.taskRunningChanged(l))))}remove(){this.processQueue(Wq),this._scheduler.removeTask(this),this.schedule=xQ.schedule,this.reschedule=xQ.reschedule,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(s){if(this.name===s)return;this.name=s;const o=bQ(s);this._basePriority!==yc&&this.schedulePriority===0||(this.schedulePriority=o),this._basePriority=o}get priority(){return this.name}set priority(s){this.setPriority(s)}get needsUpdate(){return this.updating||this.task.running}schedule(s,o,a){return this._queue.push(s,o,a)}reschedule(s,o,a){return this._queue.unshift(s,o,a)}processQueue(s){return this._queue.runTask(s)}}class r{constructor(){this._begin=(performance==null?void 0:performance.now())??0,this._budget=0,this._done=!1,this._progressed=!1,this._enabled=!0}run(s){return!this.done&&(s()===!0&&this.madeProgress(),!0)}get done(){return this._done}get budget(){return this._budget}madeProgress(){return this._progressed=!0,this._done=this.elapsed>=this._budget&&this._enabled,this._done}get enabled(){return this._enabled}set enabled(s){this._enabled=s}reset(s){this._begin=this.now(),this._budget=s,this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return this.now()-this._begin}resetProgress(){this._progressed=!1,this._done=!1}get hasProgressed(){return this._progressed}}t.Budget=r})(SO||(SO={})),(function(t){t.SCHEDULED="s",t.READY="r",t.WAITING="w",t.IDLE="i"})(jv||(jv={}));const Wq=new SO.Budget;Wq.enabled=!1;let t4e=class{remove(){}processQueue(){}schedule(e,i,r){try{if(Nc(i)){const n=fr();return r?Promise.resolve(r(n)):Promise.reject(n)}return ij(e(Wq))}catch(n){return Promise.reject(n)}}reschedule(e,i,r){return this.schedule(e,i,r)}};const xQ=new t4e;let i4e=class{constructor(e){this.view=e,this._stationaryHandle=null,this._frameTaskHandle=null,this._updateParameters=null,this._updateRequested=!1,this._scheduler=Yze(),this._schedulerHandle=Sn((()=>this._scheduler.updating),(()=>this.requestFrame())),this.stationary=!0,this.prepare=()=>{var i;this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions,this._updateParameters.targetState.copy(this.view.state),((i=this.view.animation)==null?void 0:i.target)==null||gp(this.view.animation.target)||(this._updateParameters.targetState.viewpoint=this.view.animation.target))},this.update=i=>{var a,l,c;if(this._updateRequested=!1,(a=this.view)==null?void 0:a.destroyed)return;const{allLayerViews:r,graphicsView:n,labelManager:s,state:{id:o}}=this.view;r==null||r.forEach(this._updateLayerView,this),s!=null&&(s.lastUpdateId!==o&&(s.viewChange(),s.lastUpdateId=o),s.updateRequested&&s.processUpdate(this._updateParameters)),n!=null&&(n.lastUpdateId!==o&&(n.viewChange(),n.lastUpdateId=o),n.updateRequested&&n.processUpdate(this._updateParameters)),(l=this.view.graphicsTileStore)==null||l.setViewState(this._updateParameters.state),this.view.animation?this._scheduler.state=go.ANIMATING:this.view.interacting?this._scheduler.state=go.INTERACTING:this._scheduler.state=go.IDLE,this._scheduler.frame(i)||this._updateRequested||this._scheduler.state!==go.IDLE||((c=this._frameTaskHandle)==null||c.pause())}}destroy(){this.stop(),this._schedulerHandle.remove(),this._scheduler.destroy()}get scheduler(){return this._scheduler}start(){if(this._frameTaskHandle)return;const e=this.view;this.stationary=e.stationary,this._updateParameters={state:e.state,targetState:new Hq,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:e.renderingOptions},this._stationaryHandle=$e((()=>e.stationary),(i=>{this.stationary=i,this.requestFrame()})),this._frameTaskHandle=HS(this),this.requestUpdate()}stop(){var e;this._frameTaskHandle&&(this._updateRequested=!1,(e=this._stationaryHandle)==null||e.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(e){var n;if(!e.attached)return void this.requestUpdate();const i=this.view.state,r=e.lastUpdateId;r!=null&&(this.stationary||e.moving)||(e.moving=!0),r!==i.id&&e.viewChange(),this.stationary&&e.moving&&(e.moving=!1,e.moveEnd()),e.lastUpdateId=i.id,e.updateRequested&&e.processUpdate(this._updateParameters),"layerViews"in e&&((n=e.layerViews)==null||n.forEach(this._updateLayerView,this))}};function r4e(t,e){const{spatialReference:i}=e,r=[e.x,e.y];let n,s,o,a;const l=[0,0],c=n4e(t);for(let y=0;y<c.length;y++){const g=c[y];for(let b=0;b<g.length-1;b++){dMe(l,r,g,b);const _=SN(r,l);(n==null||_<n)&&(n=_,s=[...l],o=y,a=b)}}if(n==null||!s||o==null||a==null)throw new ie("nearest-coordinate:failed","Failed to find the nearest coordinate");const[d,f]=s;return{coordinate:new _t({x:d,y:f,spatialReference:i}),distance:n}}function n4e(t){switch(t.type){case"extent":return[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]];case"polygon":return t.rings;case"polyline":return t.paths}}var lB;let Y0=lB=class extends dm.NumericIdentifiableMixin(tt){constructor(t){super(t),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(this.geometry==null||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return um(this.geometry,this.spatialReference)}catch(t){return Ie.getLogger(this).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:t}),null}return this.geometry}constrain(t,e){if(this.normalizedGeometry==null)return t;const i=t.targetGeometry;if(this.normalizedGeometry.type==="extent"?h2(this.normalizedGeometry,i):LG(this.normalizedGeometry,i))return t;const{coordinate:r}=r4e(this.normalizedGeometry,i);return r&&(t.targetGeometry=r),t}clone(){var t,e;return new lB({geometry:(t=this.geometry)==null?void 0:t.clone(),spatialReference:(e=this.spatialReference)==null?void 0:e.clone()})}};u([h({constructOnly:!0})],Y0.prototype,"geometry",void 0),u([h({readOnly:!0})],Y0.prototype,"normalizedGeometry",null),u([h({constructOnly:!0})],Y0.prototype,"spatialReference",void 0),Y0=lB=u([V("esri.views.2d.constraints.GeometryConstraint")],Y0);var cB;let aI=cB=class extends dm.NumericIdentifiableMixin(tt){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(t,e){return this.enabled&&e&&(this.rotationEnabled||(t.rotation=e.rotation)),t}clone(){return new cB({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};u([h()],aI.prototype,"enabled",void 0),u([h()],aI.prototype,"rotationEnabled",void 0),aI=cB=u([V("esri.views.2d.constraints.RotationConstraint")],aI);const Hme=aI;var uB;let $a=uB=class extends dm.NumericIdentifiableMixin(tt){constructor(t){super(t),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let t,{lods:e,minScale:i,maxScale:r,minZoom:n,maxZoom:s}=this,o=-1,a=-1,l=!1,c=!1;if(i!==0&&r!==0&&i<r&&([i,r]=[r,i]),!(e!=null&&e.length))return this._set("effectiveMinScale",i),void this._set("effectiveMaxScale",r);e=e.map((d=>d.clone())),e.sort(((d,f)=>f.scale-d.scale)),e.forEach(((d,f)=>d.level=f));for(const d of e)!l&&i>0&&i>=d.scale&&(o=d.level,l=!0),!c&&r>0&&r>=d.scale&&(a=t?t.level:-1,c=!0),t=d;n===-1&&(n=i===0?0:o),s===-1&&(s=r===0?e.length-1:a),n=Math.max(n,0),n=Math.min(n,e.length-1),s=Math.max(s,0),s=Math.min(s,e.length-1),n>s&&([n,s]=[s,n]),i=e[n].scale,r=e[s].scale,e.splice(0,n),e.splice(s-n+1),e.forEach(((d,f)=>{this._lodByScale[d.scale]=d,this._scales[f]=d.scale})),this._set("effectiveLODs",e),this._set("effectiveMinZoom",n),this._set("effectiveMaxZoom",s),this._set("effectiveMinScale",i),this._set("effectiveMaxScale",r)}constrain(t,e){if(e&&t.scale===e.scale)return t;const i=this.effectiveMinScale,r=this.effectiveMaxScale,n=t.targetGeometry,s=e&&e.targetGeometry,o=r!==0&&t.scale<r,a=i!==0&&t.scale>i;if(o||a){const l=a?i:r;if(e&&s){const c=(l-e.scale)/(t.scale-e.scale);n.x=s.x+(n.x-s.x)*c,n.y=s.y+(n.y-s.y)*c}t.scale=l}return this.snapToZoom&&this.effectiveLODs&&(t.scale=this._getClosestScale(t.scale)),t}fit(t){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(t,null);const e=this.scaleToZoom(t.scale),i=Math.abs(e-Math.floor(e));return t.scale=this.zoomToScale(i>.99?Math.round(e):Math.floor(e)),t}zoomToScale(t){if(!this.effectiveLODs)return 0;t-=this.effectiveMinZoom,t=Math.max(0,t);const e=this._scales;if(t<=0)return e[0];if(t>=e.length)return e[e.length-1];const i=Math.floor(t),r=Math.ceil(t);return e[i]+(t-i)*(e[r]-e[i])}scaleToZoom(t){if(!this.effectiveLODs)return-1;const e=this._scales;let i,r;if(t>=e[0])return this.effectiveMinZoom;if(t<=e[e.length-1])return this.effectiveMaxZoom;for(let n=0;n<e.length-1;n++){if(i=e[n],r=e[n+1],r===t)return n+this.effectiveMinZoom+1;if(i>t&&r<t)return n+this.effectiveMinZoom+1-(t-r)/(i-r)}return-1}snapToClosestScale(t){if(!this.effectiveLODs)return t;const e=this.scaleToZoom(t);return this.zoomToScale(Math.round(e))}snapToNextScale(t,e=.5){if(!this.effectiveLODs)return t*e;const i=Math.round(this.scaleToZoom(t));return this.zoomToScale(i+1)}snapToPreviousScale(t,e=2){if(!this.effectiveLODs)return t*e;const i=Math.round(this.scaleToZoom(t));return this.zoomToScale(i-1)}clone(){return new uB({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(t){return this._lodByScale[t]||(t=this._scales.reduce(((e,i)=>Math.abs(i-t)<=Math.abs(e-t)?i:e),this._scales[0])),this._lodByScale[t].scale}};u([h({readOnly:!0})],$a.prototype,"effectiveLODs",void 0),u([h({readOnly:!0})],$a.prototype,"effectiveMinZoom",void 0),u([h({readOnly:!0})],$a.prototype,"effectiveMaxZoom",void 0),u([h({readOnly:!0})],$a.prototype,"effectiveMinScale",void 0),u([h({readOnly:!0})],$a.prototype,"effectiveMaxScale",void 0),u([h()],$a.prototype,"lods",void 0),u([h()],$a.prototype,"minZoom",void 0),u([h()],$a.prototype,"maxZoom",void 0),u([h()],$a.prototype,"minScale",void 0),u([h()],$a.prototype,"maxScale",void 0),u([h()],$a.prototype,"snapToZoom",void 0),$a=uB=u([V("esri.views.2d.constraints.ZoomConstraint")],$a);const Wme=$a,s4e={base:null,key:"type",typeMap:{extent:Qt,polygon:br}};let un=class extends tt{constructor(e){super(e),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0,this.customConstraints=new Ze}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(e){e?this._set("geometry",e):this._set("geometry",null)}get version(){var e,i,r;return`${(e=this._zoom)==null?void 0:e.uid}/${(i=this._rotation)==null?void 0:i.uid}/${(r=this._geometry)==null?void 0:r.uid}`}get _geometry(){var i,r;const e=this._get("_geometry");return e&&this.geometry===e.geometry&&((i=this.view)==null?void 0:i.constraintsInfo.spatialReference)===e.spatialReference?e:new Y0({geometry:this.geometry,spatialReference:(r=this.view)==null?void 0:r.constraintsInfo.spatialReference})}get _rotation(){return new Hme({rotationEnabled:this.rotationEnabled})}get _zoom(){var l;const e=this._get("_zoom"),i=this.lods||((l=this.view)==null?void 0:l.constraintsInfo.lods),r=this.minZoom,n=this.maxZoom,s=this.minScale,o=this.maxScale,a=this.snapToZoom;return e&&e.lods===i&&e.minZoom===r&&e.maxZoom===n&&e.minScale===s&&e.maxScale===o&&e.snapToZoom===a?e:new Wme({lods:i,minZoom:r,maxZoom:n,minScale:s,maxScale:o,snapToZoom:a})}canZoomInTo(e){const i=this.effectiveMaxScale;return i===0||e>=i}canZoomOutTo(e){const i=this.effectiveMinScale;return i===0||e<=i}constrain(e,i){return this._zoom.constrain(e,i),this._rotation.constrain(e,i),this._geometry.constrain(e,i),this.customConstraints.forEach((r=>r.constrain(e,i))),e}constrainByGeometry(e){return this._geometry.constrain(e),this.customConstraints.forEach((i=>{var r;return(r=i.applyPanConstraint)==null?void 0:r.call(i,e)})),e}fit(e){return this._zoom.fit(e)}zoomToScale(e){return this._zoom.zoomToScale(e)}scaleToZoom(e){return this._zoom.scaleToZoom(e)}snapScale(e){return this._zoom.snapToClosestScale(e)}snapToNextScale(e){return this._zoom.snapToNextScale(e)}snapToPreviousScale(e){return this._zoom.snapToPreviousScale(e)}};u([h({readOnly:!0})],un.prototype,"effectiveLODs",null),u([h({readOnly:!0})],un.prototype,"effectiveMinScale",null),u([h({readOnly:!0})],un.prototype,"effectiveMaxScale",null),u([h({readOnly:!0})],un.prototype,"effectiveMinZoom",null),u([h({readOnly:!0})],un.prototype,"effectiveMaxZoom",null),u([h({types:s4e,value:null})],un.prototype,"geometry",null),u([h({type:[Ys]})],un.prototype,"lods",void 0),u([h()],un.prototype,"minScale",void 0),u([h()],un.prototype,"maxScale",void 0),u([h()],un.prototype,"minZoom",void 0),u([h()],un.prototype,"maxZoom",void 0),u([h()],un.prototype,"rotationEnabled",void 0),u([h()],un.prototype,"snapToZoom",void 0),u([h({type:Ze})],un.prototype,"customConstraints",void 0),u([h()],un.prototype,"view",void 0),u([h({readOnly:!0})],un.prototype,"version",null),u([h({type:Y0,readOnly:!0})],un.prototype,"_geometry",null),u([h({type:Hme})],un.prototype,"_rotation",null),u([h({readOnly:!0,type:Wme})],un.prototype,"_zoom",null),un=u([V("esri.views.2d.MapViewConstraints")],un);const SQ=un;let fo=class extends tt{constructor(e){super(e),this.constraints=null,this.ready=!1,this.resizeAlign="center",this.addHandles([$e((()=>{var i;return(i=this.constraints)==null?void 0:i.version}),(i=>{this.constraints&&i&&this.ready&&(this.state.viewpoint=this.constraints.fit(this.state.paddedViewState.viewpoint))}),td)])}get center(){if(!this.ready)return this._get("center");const{center:e,spatialReference:i}=this.state.paddedViewState;return this.state.commitProperty("id"),new _t({x:e[0],y:e[1],spatialReference:i})}set center(e){if(e==null)return;if(!this.ready)return void this._set("center",e);let i;try{i=this._project(e,this.state.spatialReference)}catch(n){return void Ie.getLogger(this).error(new ie("mapview:invalid-center","could not project the value in the view's spatial reference",{input:e,error:n}))}const r=this.viewpoint;rB(r,r,i),this.viewpoint=r}get extent(){return this.ready?(this.state.commitProperty("id"),this.state.paddedViewState.extent.clone()):this._get("extent")}set extent(e){if(e==null)return;if(!e.width||!e.height)return void Ie.getLogger(this).error(new ie("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",e),this._set("center",void 0),this._set("viewpoint",void 0),this._set("scale",void 0),void this._set("zoom",void 0);let i;try{i=this._project(e,this.state.spatialReference)}catch(n){return void Ie.getLogger(this).error(new ie("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:n}))}const r=this.viewpoint;Q5e(r,r,i,this.state.size,{constraints:this.constraints}),this.viewpoint=r}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(e){this.ready?(this.state.padding=e,this._set("padding",this.state.padding)):this._set("padding",e)}get resolution(){return this.ready?(this.state.commitProperty("id"),this.state.resolution):0}get rotation(){return this.ready?(this.state.commitProperty("id"),this.state.rotation):this._get("rotation")}set rotation(e){if(isNaN(e))return;if(!this.ready)return void this._set("rotation",e);const i=this.viewpoint;cze(i,i,e),this.viewpoint=i}get scale(){return this.ready?(this.state.commitProperty("id"),this.state.scale):this._get("scale")}set scale(e){if(!e||isNaN(e))return;if(!this.ready){this._set("scale",e),this._set("zoom",void 0);const r=this._get("extent");return void(r&&(this._set("extent",void 0),this._set("center",r.center)))}const i=this.viewpoint;mQ(i,i,e),this.viewpoint=i}get viewpoint(){return this.ready?this.state.paddedViewState.viewpoint.clone():this._get("viewpoint")}set viewpoint(e){var s;if(e==null)return;if(!this.ready)return this._set("viewpoint",e),this._set("extent",void 0),this._set("center",void 0),this._set("zoom",void 0),void this._set("scale",void 0);let i,r;try{i=this._project(e,this.state.spatialReference),!e.scale||isNaN(e.scale)?r=new ie("mapview:invalid-viewpoint",`invalid scale value of ${e.scale}`):e.targetGeometry==null&&(r=new ie("mapview:invalid-viewpoint","geometry not defined"))}catch(o){r=new ie("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:o})}if(r)return void Ie.getLogger(this).error(r);this._scaleBeforeChangingSpatialReference=null;const n=new ps({targetGeometry:new _t,scale:0,rotation:0});ko(n,i),(s=this.constraints)==null||s.constrain(n,this.state.paddedViewState.viewpoint),this.state.viewpoint=n,this._set("viewpoint",n)}get visibleArea(){return this.ready?this.state.visibleArea:null}get zoom(){var e;return this.ready?((e=this.constraints)==null?void 0:e.scaleToZoom(this.scale))??-1:this._get("zoom")}set zoom(e){var n,s;if(!(e>=0))return;if(!this.ready){this._set("zoom",e),this._set("scale",void 0);const o=this._get("extent");return void(o&&(this._set("extent",void 0),this._set("center",o.center)))}const i=((n=this.constraints)==null?void 0:n.zoomToScale(e))??0;if(!i)return void this._set("zoom",-1);const r=this.viewpoint;mQ(r,r,i),this.viewpoint=r,this._set("zoom",((s=this.constraints)==null?void 0:s.scaleToZoom(this.scale))??-1)}getUserStartupOptions(e){if(!e[0]&&!e[1])return{center:void 0,rotation:void 0,scale:void 0};const{padding:i,constraints:r}=this,n=this._get("center"),s=this._get("extent"),o=this._get("scale"),a=this._get("rotation"),l=this._get("viewpoint"),c=this._get("zoom"),d=c!=null&&r!=null&&r.zoomToScale(c)||void 0;let f,y,g;const b=l==null?void 0:l.rotation,_=l==null?void 0:l.targetGeometry;(_==null?void 0:_.type)==="extent"?f=_:(_==null?void 0:_.type)==="point"&&(y=_,g=l==null?void 0:l.scale);const x=s??f;return{center:n??y??(x==null?void 0:x.center),rotation:a??b,scale:(o??d??g??(x&&TN(x,[e[0]-i.left-i.right,e[1]-i.top-i.bottom])))||void 0}}startup(e,i,r,n){var o;const s=e.targetGeometry;try{this._project(e,r)}catch(a){Ie.getLogger(this).warn(new Dl("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:s.toJSON(),spatialReference:r,error:a})),e.targetGeometry=n||new _t({x:0,y:0,spatialReference:r})}(o=this.constraints)==null||o.fit(e),this._set("state",new Hq({padding:this.padding,size:i,viewpoint:e})),this._set("ready",!0)}teardown(){this._set("ready",!1);const{center:[e,i],spatialReference:r,rotation:n,scale:s}=this.state.paddedViewState,o=new _t({x:e,y:i,spatialReference:r});this._set("viewpoint",null),this._set("extent",null),this._set("center",o),this._set("zoom",-1),this._set("rotation",n),this._set("scale",s),this._set("state",null)}changeSpatialReference(e){var l;const i=this.state.paddedViewState.clone();if(this._scaleBeforeChangingSpatialReference==null)this._scaleBeforeChangingSpatialReference=i.scale;else{const c=i.viewpoint.clone();c.scale=this._scaleBeforeChangingSpatialReference,i.viewpoint=c}const r=i.clone(),[n,s]=i.center;let o=null;try{o=this._project(new _t({x:n,y:s,spatialReference:i.spatialReference}),e)}catch(c){CG()||Ie.getLogger(this).warn(new Dl("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:o==null?void 0:o.toJSON(),spatialReference:e,error:c}))}o||(o=new _t({x:0,y:0,spatialReference:e}));const a=rB(new ps({targetGeometry:new _t,scale:0,rotation:0}),i.viewpoint,o);r.viewpoint=a;try{const d=[i.size[0]/2,i.size[1]/2],f=[d[0]+20,d[1]],y=i.toMap([0,0],f),{x:g,y:b}=this._project(new _t({x:y[0],y:y[1],spatialReference:i.spatialReference}),e);y[0]=g,y[1]=b,r.toScreen(y,y);const _=oze(d,y,f),x=Math.hypot(y[0]-d[0],y[1]-d[1])/20;!Number.isFinite(x)||Math.abs(x)>4?(a.rotation=0,a.targetGeometry=new _t({x:0,y:0,spatialReference:e})):(a.scale*=x,a.scale>fe("mapview-srswitch-adjust-rotation-scale-threshold")?a.rotation=0:a.rotation+=Number.isFinite(_)?_:0)}catch{}(l=this._get("constraints"))==null||l.constrain(a,void 0),this._get("state").viewpoint=a}resize(e,i){var o;if(!this.ready)return;const r=this.state;let n=this.state.paddedViewState.viewpoint;const s=this.state.paddedViewState.size.slice();r.size=[e,i],lze(n,n,s,this.state.paddedViewState.size,this.resizeAlign),n=((o=this.constraints)==null?void 0:o.constrain(n,void 0))??n,this.state.viewpoint=n}toMap(e){if(!this.ready)return null;const i=[0,0],[r,n]=this.state.toMap(i,[e.x,e.y]),s=this.state.spatialReference;return new _t({x:r,y:n,spatialReference:s})}toScreen(e,i){if(!this.ready)return null;const r=this._project(e,this.state.spatialReference),n=[r.x,r.y];return(i==null?void 0:i.pickClosestTarget)===!1||this.state.paddedViewState.wrapMapCoordinate(n,n),this.state.toScreen(n,n),Rs(n[0],n[1])}_project(e,i){var s;const r=(e==null?void 0:e.targetGeometry)||e;if(!i)return e;if(!r)return null;if(i.imageCoordinateSystem||(s=r.spatialReference)!=null&&s.imageCoordinateSystem||es(i,r.spatialReference))return e;const n=um(r,i);if(!n)throw new ie("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:r,spatialReference:i});return o4e(e)?(e.targetGeometry=n,e):n}};function o4e(t){return(t==null?void 0:t.declaredClass)==="esri.Viewpoint"}u([h({type:_t})],fo.prototype,"center",null),u([h()],fo.prototype,"constraints",void 0),u([h({type:Qt})],fo.prototype,"extent",null),u([h({value:{top:0,right:0,bottom:0,left:0},cast:t=>({top:0,right:0,bottom:0,left:0,...t})})],fo.prototype,"padding",null),u([h()],fo.prototype,"ready",void 0),u([h()],fo.prototype,"resizeAlign",void 0),u([h({readOnly:!0})],fo.prototype,"resolution",null),u([h({type:Number})],fo.prototype,"rotation",null),u([h({type:Number})],fo.prototype,"scale",null),u([h({readOnly:!0})],fo.prototype,"state",void 0),u([h({type:ps})],fo.prototype,"viewpoint",null),u([h({readOnly:!0})],fo.prototype,"visibleArea",null),u([h()],fo.prototype,"zoom",null),fo=u([V("esri.views.2d.ViewStateManager")],fo);const $Q=160;let lI=class extends tt{constructor(){super(...arguments),this._timer=void 0}get stationary(){return!this._timer}flip(){this._timestamp=performance.now(),this._timer==null&&(this._timer=setInterval((()=>{performance.now()-this._timestamp>=$Q&&this.clear()}),$Q))}clear(){this._timer&&(clearInterval(this._timer),this._timer=void 0)}};u([h()],lI.prototype,"_timer",void 0),u([h()],lI.prototype,"stationary",null),lI=u([V("esri.views.2d.support.StationaryManager")],lI);const a4e=t=>{let e=class extends t{constructor(...i){super(...i),this.fullOpacity=1,this.stateManager=new fo({constraints:new SQ({view:this})}),this.stationaryManager=new lI,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!1,labelsAnimationTime:0,labelCollisionsEnabled:!1},this.frameTask=new i4e(this),this.viewEvents=new Jfe(this),this.padding={top:0,right:0,bottom:0,left:0},this.addHandles([$e((()=>this.viewpoint),(()=>this.stationaryManager.flip()),td)])}get constraintsInfo(){return{lods:null,spatialReference:null}}get extent(){var i;return((i=this.stateManager)==null?void 0:i.extent)??null}set extent(i){this.stateManager.extent=i}get state(){return this.stateManager.state}get interacting(){return!1}get stationary(){return!this.animation&&this.stationaryManager.stationary}set animation(i){const r=this._get("animation");if(i===r)return;if(r&&r.stop(),i!==this.animationManager.animation&&this.animationManager.stop(),!i||i.isFulfilled())return void this._set("animation",null);this._set("animation",i);const n=()=>{var s;this.destroyed||i===this._get("animation")&&(this._set("animation",null),(s=this.frameTask)==null||s.requestFrame())};i.when(n,n)}get constraints(){var i;return(i=this.stateManager)==null?void 0:i.constraints}set constraints(i){i.view=this;const r=this.stateManager.constraints;this.stateManager.constraints=i,r==null||r.destroy()}get padding(){var i;return(i=this.stateManager)==null?void 0:i.padding}set padding(i){this.stateManager&&(this.stateManager.padding=i)}get resizeAlign(){return this.stateManager.resizeAlign}set resizeAlign(i){this.stateManager.resizeAlign=i}get rotation(){return this.stateManager.rotation??0}set rotation(i){const{rotationEnabled:r}=this.constraints;this.constraints.rotationEnabled=!0,this.stateManager.rotation=i,this.constraints.rotationEnabled=r}get viewpoint(){return this.stateManager.viewpoint??null}set viewpoint(i){this.stateManager.viewpoint=i,this.frameTask.requestFrame()}};return u([h({readOnly:!0})],e.prototype,"animationManager",void 0),u([h({readOnly:!0})],e.prototype,"fullOpacity",void 0),u([h()],e.prototype,"stateManager",void 0),u([h()],e.prototype,"constraintsInfo",null),u([h()],e.prototype,"extent",null),u([h({readOnly:!0})],e.prototype,"state",null),u([h({readOnly:!0})],e.prototype,"mapViewNavigation",void 0),u([h()],e.prototype,"renderingOptions",void 0),u([h({readOnly:!0})],e.prototype,"interacting",null),u([h()],e.prototype,"stationary",null),u([h()],e.prototype,"animation",null),u([h({type:SQ})],e.prototype,"constraints",null),u([h()],e.prototype,"padding",null),u([h()],e.prototype,"resizeAlign",null),u([h()],e.prototype,"rotation",null),u([h({readOnly:!0})],e.prototype,"viewEvents",void 0),u([h({type:ps})],e.prototype,"viewpoint",null),e=u([V("esri.views.Viewport2DBaseMixin")],e),e};let gy=class extends Wh{constructor(e){super(e),this.state="running",this.target=null,this._resolver=null}initialize(){this._resolver=Nl(),this.addResolvingPromise(this._resolver.promise)}get done(){return this.state==="finished"||this.state==="stopped"}stop(){var e;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),(e=this._resolver)==null||e.reject(new ie("view:animation-stopped","ViewAnimation stopped")))}finish(){var e;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),(e=this._resolver)==null||e.resolve())}update(e,i){i||(i=gp(e)?"waiting-for-target":"running"),this._set("target",e),this._set("state",i)}};u([h({readOnly:!0})],gy.prototype,"done",null),u([h({readOnly:!0,type:String})],gy.prototype,"state",void 0),u([h()],gy.prototype,"target",void 0),gy=u([V("esri.views.ViewAnimation")],gy),(function(t){t.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"}})(gy||(gy={}));const dB=gy;let kL=class extends tt{constructor(e){super(e),this._gotoTask=null}destroy(){this._gotoTask=null}async goTo(e,i){if(!e)return void Ie.getLogger(this).error("#goTo()","target cannot be null or undefined");const r=new dB;this.view.animation=r,await E$((()=>this.view.ready),i);const n={...i,animate:(i==null?void 0:i.animate)??!Rq(),animationMode:(i==null?void 0:i.animationMode)??"auto"},{extent:s,spatialReference:o,size:a,viewpoint:l,constraints:c,padding:d,allLayerViews:f}=this.view,y=Y5e(e,{extent:s,spatialReference:o,size:a,viewpoint:l,constraints:c,padding:d,allLayerViews:f,pickClosestTarget:(i==null?void 0:i.pickClosestTarget)??!0});return r==null||r.update(y),this._gotoTask={},n.animate?this._gotoAnimated(y,n):this._gotoImmediate(y,n)}_gotoImmediate(e,i){const r=this._gotoTask,n=this.view.animation,s=e.then((o=>{if(Wi(i),r!==this._gotoTask)throw new ie("view:goto-interrupted","Goto was interrupted");this.view.viewpoint=n.target=o,n.finish()}));return this._cancellableGoTo(r,n,s,i)}_gotoAnimated(e,i){const r=this._gotoTask,n=this.view.animation;if(!n)return Promise.resolve();const s=e.then((o=>{if(Wi(i),r!==this._gotoTask)throw new ie("view:goto-interrupted","Goto was interrupted");return n.update(o),this.view.animationManager.animate(n,this.view.viewpoint,i),n.when().then((()=>{}),(()=>{}))}));return this._cancellableGoTo(r,n,s,i)}_cancellableGoTo(e,i,r,n){const s=()=>e===this._gotoTask;return Q7(r,n).finally((()=>{s()&&(i.done||i.stop())}))}};u([h({constructOnly:!0})],kL.prototype,"view",void 0),kL=u([V("esri.views.2d.GoToManager")],kL);function Zme(t,e){switch(e){case"primary":return t.pointerType==="touch"||t.button===0;case"secondary":return t.pointerType!=="touch"&&t.button===2;case"tertiary":return t.pointerType!=="touch"&&t.button===1}}function Jme(t,e){return e.some((i=>Zme(t,i)))}function TQ(t,{dragPrimary:e,dragSecondary:i,dragTertiary:r}){return[{key:"primary",value:e},{key:"secondary",value:i},{key:"tertiary",value:r}].filter((n=>n.value===t)).map((n=>n.key))}let EQ=class extends fs{constructor(e,i){super(!0),this._view=e,this.registerIncoming("double-click",i,(r=>this._handleDoubleClick(r,i)))}_handleDoubleClick(e,i){Zme(e.data,"primary")&&(e.stopPropagation(),i?this._view.mapViewNavigation.zoomOut([e.data.x,e.data.y]):this._view.mapViewNavigation.zoomIn([e.data.x,e.data.y]))}},l4e=class extends fs{constructor(e,i,r){super(!0),this.view=e,this.pointerType=i,this.registerIncoming("double-tap-drag",r,(n=>this._handleDoubleTapDrag(n)))}_handleDoubleTapDrag(e){const{data:i}=e,{pointerType:r}=i;if(r!==this.pointerType)return;e.stopPropagation();const{action:n,delta:s}=i,{view:o}=this,{mapViewNavigation:a}=o;switch(n){case"begin":{const{scale:l}=o;this._startScale=l,this._currentScale=l,this._previousDelta=s,a.begin();break}case"update":{if(this._previousDelta.y===s.y)return;this._previousDelta=s;const l=1.015**s.y,c=this._startScale*l,d=c/this._currentScale;a.setViewpointImmediate(d),this._currentScale=c;break}case"end":{const{constraints:l}=o,{effectiveLODs:c,snapToZoom:d}=l;if(!d||!c)return void a.end();const f=l.snapScale(this._currentScale),y=(s.y>0?Math.max(f,l.snapToPreviousScale(this._startScale)):Math.min(f,l.snapToNextScale(this._startScale)))/this._currentScale;a.zoom(y).then((()=>{a.end()}));break}}}},IN=class{constructor(e){this._callbacks=e,this._currentCount=0,this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(e){const i=e.data,r=i.pointers.size;switch(i.action){case"start":this._currentCount=r,this._emitStart(e);break;case"added":this._emitEnd(this._previousEvent),this._currentCount=r,this._emitStart(e);break;case"update":this._emitUpdate(e);break;case"removed":this._startEvent&&this._emitEnd(this._previousEvent),this._currentCount=r,this._emitStart(e);break;case"end":this._emitEnd(e),this._currentCount=0}this._previousEvent=e}_emitStart(e){var i,r;this._startEvent=e,(r=(i=this._callbacks).condition)!=null&&r.call(i,this._currentCount,e)&&this._callbacks.start(this._currentCount,e,this._startEvent)}_emitUpdate(e){var i,r;(r=(i=this._callbacks).condition)!=null&&r.call(i,this._currentCount,e)&&this._callbacks.update(this._currentCount,e,this._startEvent)}_emitEnd(e){var i,r;(r=(i=this._callbacks).condition)!=null&&r.call(i,this._currentCount,e)&&this._callbacks.end(this._currentCount,e,this._startEvent),this._startEvent=null}},c4e=class extends fs{constructor(e,i,r){super(!0),this.view=e,this.pointerActions=i,this.registerIncoming("drag",r,(n=>this._handleDrag(n))),this.registerIncoming("pointer-down",(()=>this.stopMomentumNavigation()))}onInstall(e){super.onInstall(e),this._dragEventSeparator=new IN({start:(i,r)=>{this.view.mapViewNavigation.pan.begin(this.view,r.data),r.stopPropagation()},update:(i,r)=>{this.view.mapViewNavigation.pan.update(this.view,r.data),r.stopPropagation()},end:(i,r)=>{this.view.mapViewNavigation.pan.end(this.view,r.data),r.stopPropagation()},condition:(i,r)=>i===1&&Jme(r.data,this.pointerActions)})}_handleDrag(e){const i=this.view.mapViewNavigation;i.pinch.zoomMomentum||i.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(e)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}},u4e=class extends fs{constructor(e,i,r){super(!0),this._view=e,this.pointerActions=i;const n=this._view.mapViewNavigation;this._dragEventSeparator=new IN({start:(s,o)=>{n.rotate.begin(this._view,o.data),o.stopPropagation()},update:(s,o)=>{n.rotate.update(this._view,o.data),o.stopPropagation()},end:(s,o)=>{n.rotate.end(),o.stopPropagation()},condition:(s,o)=>s===1&&Jme(o.data,this.pointerActions)}),this.registerIncoming("drag",r,(s=>this._dragEventSeparator.handle(s)))}};function Yme(t){const e=t[0],i=t[1],r=t[2];return Math.sqrt(e*e+i*i+r*r)}function d4e(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function h4e(t,e,i,r){return t[0]=e,t[1]=i,t[2]=r,t}function p4e(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t}function Xme(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t}function Kme(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t}function Qme(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t}function f4e(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function m4e(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function y4e(t,e){return t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t}function g4e(t,e){return t[0]=Math.sign(e[0]),t[1]=Math.sign(e[1]),t[2]=Math.sign(e[2]),t}function v4e(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t}function b4e(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t}function w4e(t,e=0,i=1){return t[0]=Math.min(Math.max(t[0],e),i),t[1]=Math.min(Math.max(t[1],e),i),t[2]=Math.min(Math.max(t[2],e),i),t}function _4e(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function eye(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t}function x4e(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t}function tye(t,e){const i=e[0]-t[0],r=e[1]-t[1],n=e[2]-t[2];return Math.sqrt(i*i+r*r+n*n)}function iye(t,e){const i=e[0]-t[0],r=e[1]-t[1],n=e[2]-t[2];return i*i+r*r+n*n}function rye(t){const e=t[0],i=t[1],r=t[2];return e*e+i*i+r*r}function S4e(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function $4e(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function hB(t,e){const i=e[0],r=e[1],n=e[2];let s=i*i+r*r+n*n;return s>0&&(s=1/Math.sqrt(s),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s),t}function nye(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function T4e(t,e,i){const r=e[0],n=e[1],s=e[2],o=i[0],a=i[1],l=i[2];return t[0]=n*l-s*a,t[1]=s*o-r*l,t[2]=r*a-n*o,t}function E4e(t,e,i){const r=e[0],n=e[1],s=e[2],o=i[0],a=i[1],l=i[2],c=n*l-s*a,d=s*o-r*l,f=r*a-n*o,y=Math.sqrt(c*c+d*d+f*f);return t[0]=c/y,t[1]=d/y,t[2]=f/y,t}function I4e(t,e,i,r){const n=e[0],s=e[1],o=e[2];return t[0]=n+r*(i[0]-n),t[1]=s+r*(i[1]-s),t[2]=o+r*(i[2]-o),t}function C4e(t,e,i,r,n,s){const o=s*s,a=o*(2*s-3)+1,l=o*(s-2)+s,c=o*(s-1),d=o*(3-2*s);return t[0]=e[0]*a+i[0]*l+r[0]*c+n[0]*d,t[1]=e[1]*a+i[1]*l+r[1]*c+n[1]*d,t[2]=e[2]*a+i[2]*l+r[2]*c+n[2]*d,t}function M4e(t,e,i,r,n,s){const o=1-s,a=o*o,l=s*s,c=a*o,d=3*s*a,f=3*l*o,y=l*s;return t[0]=e[0]*c+i[0]*d+r[0]*f+n[0]*y,t[1]=e[1]*c+i[1]*d+r[1]*f+n[1]*y,t[2]=e[2]*c+i[2]*d+r[2]*f+n[2]*y,t}function k4e(t,e=1){const i=fN,r=2*i()*Math.PI,n=2*i()-1,s=Math.sqrt(1-n*n)*e;return t[0]=Math.cos(r)*s,t[1]=Math.sin(r)*s,t[2]=n*e,t}function P4e(t,e,i){const r=e[0],n=e[1],s=e[2];return t[0]=i[0]*r+i[4]*n+i[8]*s+i[12],t[1]=i[1]*r+i[5]*n+i[9]*s+i[13],t[2]=i[2]*r+i[6]*n+i[10]*s+i[14],t}function A4e(t,e,i){const r=e[0],n=e[1],s=e[2];return t[0]=r*i[0]+n*i[3]+s*i[6],t[1]=r*i[1]+n*i[4]+s*i[7],t[2]=r*i[2]+n*i[5]+s*i[8],t}function L4e(t,e,i){const r=i[0],n=i[1],s=i[2],o=i[3],a=e[0],l=e[1],c=e[2],d=n*c-s*l,f=s*a-r*c,y=r*l-n*a,g=n*y-s*f,b=s*d-r*y,_=r*f-n*d,x=2*o;return t[0]=a+d*x+2*g,t[1]=l+f*x+2*b,t[2]=c+y*x+2*_,t}function R4e(t,e,i,r){const n=[],s=[];return n[0]=e[0]-i[0],n[1]=e[1]-i[1],n[2]=e[2]-i[2],s[0]=n[0],s[1]=n[1]*Math.cos(r)-n[2]*Math.sin(r),s[2]=n[1]*Math.sin(r)+n[2]*Math.cos(r),t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t}function O4e(t,e,i,r){const n=[],s=[];return n[0]=e[0]-i[0],n[1]=e[1]-i[1],n[2]=e[2]-i[2],s[0]=n[2]*Math.sin(r)+n[0]*Math.cos(r),s[1]=n[1],s[2]=n[2]*Math.cos(r)-n[0]*Math.sin(r),t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t}function F4e(t,e,i,r){const n=[],s=[];return n[0]=e[0]-i[0],n[1]=e[1]-i[1],n[2]=e[2]-i[2],s[0]=n[0]*Math.cos(r)-n[1]*Math.sin(r),s[1]=n[0]*Math.sin(r)+n[1]*Math.cos(r),s[2]=n[2],t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t}function N4e(t,e){hB(IQ,t),hB(CQ,e);const i=nye(IQ,CQ);return i>1?0:i<-1?Math.PI:Math.acos(i)}const IQ=Gg(),CQ=Gg();function D4e(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function z4e(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function V4e(t,e){if(t===e)return!0;const i=t[0],r=t[1],n=t[2],s=e[0],o=e[1],a=e[2],l=la();return Math.abs(i-s)<=l*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(r-o)<=l*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(n-a)<=l*Math.max(1,Math.abs(n),Math.abs(a))}function j4e(t,e,i){const r=i[0]-e[0],n=i[1]-e[1],s=i[2]-e[2];let o=r*r+n*n+s*s;return o>0?(o=1/Math.sqrt(o),t[0]=r*o,t[1]=n*o,t[2]=s*o,t):(t[0]=0,t[1]=0,t[2]=0,t)}const U4e=Xme,B4e=Kme,G4e=Qme,q4e=tye,H4e=iye,W4e=Yme,Z4e=rye;Object.freeze(Object.defineProperty({__proto__:null,abs:y4e,add:p4e,angle:N4e,bezier:M4e,ceil:f4e,clamp:w4e,copy:d4e,cross:T4e,crossAndNormalize:E4e,direction:j4e,dist:q4e,distance:tye,div:G4e,divide:Qme,dot:nye,equals:V4e,exactEquals:z4e,floor:m4e,hermite:C4e,inverse:$4e,len:W4e,length:Yme,lerp:I4e,max:b4e,min:v4e,mul:B4e,multiply:Kme,negate:S4e,normalize:hB,random:k4e,rotateX:R4e,rotateY:O4e,rotateZ:F4e,round:_4e,scale:eye,scaleAndAdd:x4e,set:h4e,sign:g4e,sqrDist:H4e,sqrLen:Z4e,squaredDistance:iye,squaredLength:rye,str:D4e,sub:U4e,subtract:Xme,transformMat3:A4e,transformMat4:P4e,transformQuat:L4e},Symbol.toStringTag,{value:"Module"}));function lu(t){let e=t*t;return t<0&&(e*=-1),e}function J4e(t){return t.translation[0]=0,t.translation[1]=0,t.translation[2]=0,t.heading=0,t.tilt=0,t}function Y4e(t,e,i){const r=i,n=t.state,s=t.device,o=e.tiltDirection==="forward-down"?1:-1,a=1;return s.deviceType==="standard"?(r.translation[0]=lu(n.axes[0]),r.translation[1]=lu(n.axes[1]),r.translation[2]=lu(n.buttons[7])-lu(n.buttons[6]),r.heading=lu(n.axes[2]),r.tilt=lu(n.axes[3])):s.deviceType==="spacemouse"&&(r.translation[0]=1.2*lu(n.axes[0]),r.translation[1]=1.2*lu(n.axes[1]),r.translation[2]=2*-lu(n.axes[2]),r.heading=1.2*lu(n.axes[5]),r.tilt=1.2*lu(n.axes[3])),r.tilt*=o,eye(r.translation,r.translation,a),r}function X4e(t){return t.translation[0]===0&&t.translation[1]===0&&t.translation[2]===0&&t.heading===0&&t.tilt===0&&t.zoom===0}let K4e=class extends fs{constructor(e){super(!0),this._view=e,this._frameTask=null,this._watchHandles=new M$,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming("gamepad",(i=>this._handleGamePadEvent(i))),this._handle.pause()}onInstall(e){super.onInstall(e),this._watchHandles.add([$e((()=>{var i;return(i=this._view.navigation.gamepad)==null?void 0:i.enabled}),(i=>{i?(this._handle.resume(),this._frameTask||(this._frameTask=HS({update:r=>this._frameUpdate(r.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))}),kt)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(e){var r;const i=this._view.navigation.gamepad.device;i&&e.data.device!==i||this._currentDevice&&this._currentDevice!==e.data.device||(e.data.action==="end"?(this._currentDevice=null,J4e(this._transformation)):(this._currentDevice=e.data.device,Y4e(e.data,this._view.navigation.gamepad,this._transformation)),(r=this._frameTask)==null||r.resume())}_frameUpdate(e){var f;const i=this._transformation;if(X4e(i))return void((f=this._frameTask)==null?void 0:f.pause());const r=this._view.viewpoint.clone(),n=this._view.navigation.gamepad.velocityFactor,s=eVe*n*e;EN(r,r,[i.translation[0]*s,-i.translation[1]*s]);const o=1+i.translation[2]*tVe*e,a=this._view.constraints.rotationEnabled?-i.heading*Q4e*e:0,l=this._view.size,c=[l[0]/2,l[1]];Ame(r,r,o,a,c,l);const d=this._view.constraints.constrain(r,this._view.viewpoint);this._view.viewpoint=d}};const Q4e=.06,eVe=.7,tVe=6e-4;function sye(t){const e=()=>t(document.visibilityState==="visible");return document.addEventListener("visibilitychange",e),Ei((()=>document.removeEventListener("visibilitychange",e)))}let iVe=class extends fs{constructor(e,i,r){super(!0),this.view=e,this.keys=i,this._isSticky=!1,this._pressedKeys=new Set,this._timeout=void 0,this._currentDirection=void 0,this._stickyKeyDuration=200,this._handleKey=n=>{const s=this._keyMap[n.data.key];if(n.modifiers.has("Meta")||n.modifiers.has("Control"))return void this._stopMovement();if(s==null)return;n.stopPropagation(),n.preventDefault();const o=n.type==="key-down";if(this._pressedKeys[o?"add":"delete"](s),o){if(this._direction===s)return;this._direction=s,this._isSticky=!1,this._setTimeout((()=>{this._isSticky&&this._handlePopKey()}))}else{const a=this._timeout===void 0,l=this._pressedKeys.size>0;a||l?this._handlePopKey():this._isSticky=!0}},this._handlePopKey=()=>{this._direction=Array.from(this._pressedKeys).pop(),this._direction==null&&this._stopMovement()},this._stopMovement=()=>{this._isSticky=!1,this._direction=void 0,this._pressedKeys.clear(),this._setTimeout(void 0)},this._keyMap={[i.left]:"left",[i.right]:"right",[i.up]:"up",[i.down]:"down"},this.registerIncoming("key-down",r,this._handleKey),this.registerIncoming("key-up",r,this._handleKey),this.registerIncoming("blur",r,this._stopMovement),this._visibilityHandle=sye((n=>n?null:this._stopMovement()))}onUninstall(){var e;this._stopMovement(),(e=this._visibilityHandle)==null||e.remove()}get _direction(){return this._currentDirection}set _direction(e){const i=this._currentDirection!=null;if(e!=null){if(i||this.view.mapViewNavigation.begin(),this._currentDirection!==e)switch(e){case"left":this.view.mapViewNavigation.continuousPanLeft();break;case"right":this.view.mapViewNavigation.continuousPanRight();break;case"up":this.view.mapViewNavigation.continuousPanUp();break;case"down":this.view.mapViewNavigation.continuousPanDown()}}else i&&this.view.mapViewNavigation.stop();this._currentDirection=e}_setTimeout(e){clearTimeout(this._timeout),this._timeout=e===void 0?void 0:setTimeout((()=>{this._timeout=void 0,e()}),this._stickyKeyDuration)}},rVe=class extends fs{constructor(e,i,r){super(!0),this.view=e,this.keys=i,this._keyToDirection=new Map,this._pressed=!1,this._addKeysMapping(i),this.registerIncoming("key-down",r,(n=>this._handleKeyDown(n))),this.registerIncoming("key-up",r,(n=>this._handleKeyUp(n))),this.registerIncoming("blur",r,(()=>this._handleStop())),this._visibilityHandle=sye((n=>n?null:this._handleStop()))}onUninstall(){var e;(e=this._visibilityHandle)==null||e.remove(),this._handleStop()}_addKeysMapping(e){this._addKeyMapping(e.clockwise,"clockwise"),this._addKeyMapping(e.counterClockwise,"counterClockwise"),this._addKeyMapping(e.reset,"reset")}_addKeyMapping(e,i){for(const r of e)this._keyToDirection.set(r,i)}_handleKeyDown(e){e.data.repeat||this._handleKey(e,!0)}_handleKeyUp(e){this._handleKey(e,!1)}_handleStop(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(e,i){const r=e.modifiers;if(r.size>0&&!r.has("Shift")||!this.view.constraints.rotationEnabled)return;const n=this._keyToDirection.get(e.data.key);if(this._pressed=n!=null,this._pressed){if(e.preventDefault(),i)switch(this.view.mapViewNavigation.begin(),n){case"clockwise":this.view.mapViewNavigation.continuousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continuousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation()}}};var tx;(function(t){t[t.IN=0]="IN",t[t.OUT=1]="OUT"})(tx||(tx={}));let nVe=class extends fs{constructor(e,i,r){super(!0),this.view=e,this.keys=i,this._keysToZoomAction={},this.registerIncoming("key-down",r,(n=>this._handleKeyDown(n))),i.zoomIn.forEach((n=>this._keysToZoomAction[n]=tx.IN)),i.zoomOut.forEach((n=>this._keysToZoomAction[n]=tx.OUT))}_handleKeyDown(e){this._handleKey(e)}_handleKey(e){const i=e.modifiers;if(i.size>0&&!i.has("Shift"))return;const{key:r}=e.data;if(!(r in this._keysToZoomAction))return;const n=this._keysToZoomAction[r],{mapViewNavigation:s}=this.view;let o=null;switch(n){case tx.IN:o=s.zoomIn();break;case tx.OUT:o=s.zoomOut();break;default:return}s.begin(),o.then((()=>s.end())),e.stopPropagation()}};const sVe=.6;let oVe=class extends fs{constructor(e,i){super(!0),this._view=e,this._canZoom=!0,this.registerIncoming("mouse-wheel",i,(r=>this._handleMouseWheel(r)))}_handleMouseWheel(e){if(this._view.navigation.actionMap.mouseWheel!=="zoom"||(e.preventDefault(),e.stopPropagation(),!this._canZoom))return;const i=this._view.mapViewNavigation,{x:r,y:n,deltaY:s}=e.data,o=1/sVe**(1/60*s),a=i.zoom(o,[r,n]);a&&(this._canZoom=!1,a.catch((()=>{})).then((()=>{this._canZoom=!0,i.end()})))}},aVe=class extends fs{constructor(e){super(!0),this.view=e,this.registerIncoming("drag",(r=>this._handleDrag(r))),this.registerIncoming("pointer-down",(()=>this._stopMomentumNavigation()));const i=this.view.mapViewNavigation;this._dragEventSeparator=new IN({start:(r,n)=>{i.pinch.begin(this.view,n.data),n.stopPropagation()},update:(r,n)=>{i.pinch.update(this.view,n.data),n.stopPropagation()},end:(r,n)=>{i.pinch.end(this.view),n.stopPropagation()},condition:r=>r>=2})}_handleDrag(e){this._dragEventSeparator.handle(e)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}};function MQ(t){const e=t.native;return e?{buttons:e.buttons.map((i=>i.pressed?i.value||1:0)),axes:e.axes.map((i=>uVe(i,t.axisThreshold)))}:{buttons:[],axes:[]}}function lVe(t,e){if(t.axes.length!==e.axes.length||t.buttons.length!==e.buttons.length)return!1;for(let i=0;i<t.axes.length;i++)if(t.axes[i]!==e.axes[i])return!1;for(let i=0;i<t.buttons.length;i++)if(t.buttons[i]!==e.buttons[i])return!1;return!0}function cVe(t){for(let e=0;e<t.axes.length;e++)if(t.axes[e]!==0)return!1;for(let e=0;e<t.buttons.length;e++)if(t.buttons[e]!==0)return!1;return!0}function uVe(t,e){const i=Math.abs(t);return i<e?0:Math.sign(t)*(i-e)/(1-e)}let dVe=class{constructor(e,i){this._element=e,this._input=i,this._hasEventListeners=!1,this._onConnectGamepad=s=>{this._connectGamepad(s.gamepad)},this._onDisconnectGamepad=s=>{const o=s.gamepad,a=o.index,l=this._inputDevices[a];l&&(this._emitGamepadEvent(o,MQ(l),!1),this._inputDevices.splice(a,1),this._latestUpdate.splice(a,1),this._input.gamepad.devices.remove(l),this.ensurePollingState())},this._frameTask=null,this._latestUpdate=new Array,this._inputDevices=new Array,this._callback=null;const r="getGamepads"in window.navigator,n=window.isSecureContext;this.supported=r&&n,this.supported&&(kQ((s=>this._connectGamepad(s))),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(e){this._hasEventListeners!==e&&(this._hasEventListeners=e,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}set onEvent(e){this._callback=e}_connectGamepad(e){const i=new Lq(e);i.deviceType!=="unknown"&&(this._inputDevices[e.index]=i,this._input.gamepad.devices.add(i)),this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this._frameTask==null&&(this._frameTask=HS({update:()=>this._readGamepadState()}))}_stopPolling(){this._frameTask!=null&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=new Array)}_readGamepadState(){const e=document.hasFocus(),i=this._element.contains(document.activeElement),r=this._input.gamepad.enabledFocusMode==="document"&&!e||this._input.gamepad.enabledFocusMode==="view"&&!i;kQ((n=>{const s=this._inputDevices[n.index];if(!s)return;const o=this._latestUpdate[n.index],a=MQ(s),l=r||cVe(a);o&&(o.timestamp===n.timestamp||!o.active&&l||lVe(o.state,a))||this._emitGamepadEvent(n,a,!l)}))}_emitGamepadEvent(e,i,r){const n=this._latestUpdate[e.index],s=n&&n.active;if(!s&&!r)return;const o=!s&&r?"start":s&&r?"update":"end";this._latestUpdate[e.index]={timestamp:e.timestamp,state:i,active:r},this._callback&&this._callback({device:this._inputDevices[e.index],state:i,action:o})}};function hVe(t){if(!t||!t.connected)return!1;for(let e=0;e<t.axes.length;e++)if(isNaN(t.axes[e]))return!1;return!0}function kQ(t){for(const e of navigator.getGamepads())hVe(e)&&t(e)}const PQ=fe("edge"),pVe=fe("chrome"),fVe=fe("ff"),mVe=fe("safari"),AQ="esri-view-surface",v_={touchNone:`${AQ}--touch-none`,touchPan:`${AQ}--touch-pan`};var Wb;let yVe=(Wb=class{constructor(e,i){this._active={},this._callback=()=>{},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=e,e.getAttribute("tabindex")||e.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new dVe(e,i),this._gamepadSource.onEvent=r=>this._callback("gamepad",r)}destroy(){this._callback=()=>{},this.activeEvents=null,this._activePointerCaptures.forEach((e=>this._releasePointerCaptureSafe(e))),this._activePointerCaptures.clear(),this._gamepadSource=hr(this._gamepadSource),this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(e){this._browserTouchPanningEnabled=e,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(e){this._callback=e}set activeEvents(e){for(const i in this._active)if(!e||!e.has(i)){const r=this._active[i];this._element.removeEventListener(t4[i],r),delete this._active[i]}e&&e.forEach((i=>{if(!this._active[i]&&t4[i]){const r=(this._eventHandlers[i]||this._handleDefault).bind(this,i);this._element.addEventListener(t4[i],r),this._active[i]=r}})),this._gamepadSource&&(this._gamepadSource.hasEventListeners=(e==null?void 0:e.has("gamepad"))??!1)}setPointerCapture(e,i){i?this._setPointerCaptureSafe(e.pointerId):(this._releasePointerCaptureSafe(e.pointerId),this._activePointerCaptures.delete(e.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?v_.touchNone:v_.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?v_.touchPan:v_.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(v_.touchNone),this._element.classList.remove(v_.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_setPointerCaptureSafe(e){try{this._element.setPointerCapture(e),this._activePointerCaptures.add(e)}catch{}}_releasePointerCaptureSafe(e){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(e))return;this._element.releasePointerCapture(e)}catch{}}_updateNormalizedPointerLikeEvent(e,i){const r=Xfe(this._element,e);return Wb.test.disableSubpixelCoordinates&&(r.x=Math.round(r.x),r.y=Math.round(r.y)),i.x=r.x,i.y=r.y,i}_handleKey(e,i){const{key:r}=i;r&&e==="key-up"&&this._keyDownState.delete(r);const n={native:i,key:r,repeat:!!r&&this._keyDownState.has(r)};r&&e==="key-down"&&this._keyDownState.add(n.key),this._callback(e,n)}_handlePointer(e,i){const r=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});this._callback(e,r)}_handlePointerPreventDefault(e,i){const r=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});i.preventDefault(),this._callback(e,r)}_getDeltaFromTrackpadOrMouseWheel(e){return e.shiftKey&&fe("mac")&&e.deltaY===0?e.deltaX:e.deltaY}_handleMouseWheel(e,i){let r=this._getDeltaFromTrackpadOrMouseWheel(i);switch(i.deltaMode){case 0:PQ&&(r=r/document.documentElement.clientHeight*600);break;case 1:r*=30;break;case 2:r*=900}PQ?r*=.7:pVe||mVe?r*=.6:fVe&&(r*=1.375);const n=100,s=Math.abs(r);s>n&&(r=r/s*200/(1+Math.exp(-.02*(s-n))));const o=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,deltaY:r});this._callback(e,o)}_handlePointerCaptureLost(e,i){this._activePointerCaptures.delete(i.pointerId),this._handleDefault(e,i)}_handleDefault(e,i){const r={native:i};i.preventDefault(),this._callback(e,r)}_preventAltKeyDefault(e){e.key==="Alt"&&e.preventDefault()}_preventMultiTouchPanning(e){e.touches.length>1&&e.preventDefault()}},Wb.test={disableSubpixelCoordinates:!1},Wb);const t4={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};let gVe=class extends fs{constructor(){super(!0),this.registerIncoming("context-menu",(e=>e.data.native.preventDefault()))}};const oye=()=>({maximumClickDelay:300}),vVe=(t={})=>({...oye(),movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500,...t}),Zq=(t={})=>({...oye(),maximumDoubleClickDistance:10,maximumDoubleTouchDistance:35,maximumDoubleClickDelay:250,maximumDoubleTouchDelay:350,...t});function $O(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)}function bVe(t,e){const i=e.x-t.x,r=e.y-t.y;return Math.sqrt(i*i+r*r)}function wVe(t,e){if(e?(e.radius=0,e.center.x=0,e.center.y=0):e={radius:0,center:Rs()},t.length===0)return e;if(t.length===1)return e.center.x=t[0].x,e.center.y=t[0].y,e;if(t.length===2){const[k,O]=t,[D,B]=[O.x-k.x,O.y-k.y];return e.radius=Math.sqrt(D*D+B*B)/2,e.center.x=(k.x+O.x)/2,e.center.y=(k.y+O.y)/2,e}let i=0,r=0;for(let k=0;k<t.length;k++)i+=t[k].x,r+=t[k].y;i/=t.length,r/=t.length;const n=t.map((k=>k.x-i)),s=t.map((k=>k.y-r));let o=0,a=0,l=0,c=0,d=0,f=0,y=0;for(let k=0;k<n.length;k++){const O=n[k],D=s[k],B=O*O,j=D*D;o+=B,a+=j,l+=O*D,c+=B*O,d+=j*D,f+=O*j,y+=D*B}const g=.5*(c+f),b=.5*(d+y),_=o*a-l*l,x=(g*a-b*l)/_,E=(o*b-l*g)/_,C=Rs(x+i,E+r);return{radius:Math.sqrt(x*x+E*E+(o+a)/t.length),center:C}}function Nb(t){const{native:e}=t,{pointerId:i,button:r,pointerType:n}=e;return n==="mouse"?`${i}:${r}`:`${n}`}let _Ve=class extends fs{constructor(e={},i=T$){super(!1),this._clock=i,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=Rs(0,0),this._pointerState=new Map,this._parameters=Zq(e),this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new IN({start:(r,n)=>this._dragStart(r,n),update:(r,n)=>this._dragUpdate(n),end:(r,n)=>this._dragEnd(n)}),this.registerIncoming("drag",(r=>this._dragEventSeparator.handle(r))),this.registerIncoming("pointer-down",(r=>this._handlePointerDown(r))),this.registerIncoming("pointer-up",(()=>this._handlePointerUp()))}onUninstall(){this._pointerState.forEach((e=>{e.doubleTapTimeout=Nr(e.doubleTapTimeout)}))}get hasPendingInputs(){for(const e of this._pointerState.values())if(e.doubleTapTimeout!=null)return!0;return!1}_clearPointerDown(e){const i=this._pointerState.get(e);i&&(i.doubleTapTimeout=Nr(i.doubleTapTimeout),this._pointerState.delete(e),this.refreshHasPendingInputs())}_dragStart(e,i){if(!this._doubleTapDragReady||e!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:r,modifiers:n}=i,{center:s}=r;this._dragStartCenter=s;const o=i4("begin",Rs(0,0),r);this._doubleTapDrag.emit(o,void 0,n),i.stopPropagation()}_dragUpdate(e){if(!this._doubleTapDragActive)return;const{data:i,modifiers:r}=e,{center:n}=i,s=i4("update",Rs(n.x-this._dragStartCenter.x,n.y-this._dragStartCenter.y),i);this._doubleTapDrag.emit(s,void 0,r),e.stopPropagation()}_dragEnd(e){if(!this._doubleTapDragActive)return;const{data:i,modifiers:r}=e,{center:n}=i,s=i4("end",Rs(n.x-this._dragStartCenter.x,n.y-this._dragStartCenter.y),i);this._doubleTapDrag.emit(s,void 0,r),this._doubleTapDragActive=!1,e.stopPropagation()}_handlePointerDown(e){const{data:i}=e,r=Nb(i),n=this._pointerState.get(r),{pointerType:s}=i.native;if(n){const o=s==="touch"?this._parameters.maximumDoubleTouchDistance:this._parameters.maximumDoubleClickDistance;this._clearPointerDown(r),$O(n.event.data,i)>o?this._storePointerDown(e):this._doubleTapDragReady=!0}else this._storePointerDown(e)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(e){const{data:i}=e,{pointerType:r}=i.native,n=Nb(i),s=r==="touch"?this._parameters.maximumDoubleTouchDelay:this._parameters.maximumDoubleClickDelay,o=this._clock.setTimeout((()=>this._clearPointerDown(n)),s);this._pointerState.set(n,{event:e,doubleTapTimeout:o}),this.refreshHasPendingInputs()}};function i4(t,e,i){const{button:r,buttons:n,pointer:s,pointers:o,pointerType:a,timestamp:l}=i;return{action:t,delta:e,button:r,buttons:n,pointer:s,pointers:o,pointerType:a,timestamp:l}}let xVe=class extends fs{constructor(e){super(!1),this._navigationTouch=e,this._startStateModifiers=new Set,this._activePointerMap=new Map,this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(e,i,r,n){return{action:e,pointerType:this._pointerType,button:this._mouseButton,buttons:i.buttons,timestamp:n,pointers:SVe(this._activePointerMap),pointer:i,angle:r.angle,radius:r.radius,center:r.center}}_addPointer(e){const i=e.native.pointerId,r=TP(this._activePointerMap).angle,n={event:e,initialAngle:0,lastAngle:0};this._activePointerMap.set(i,n);const s=PL(n,aye(this._activePointerMap));n.initialAngle=s,n.lastAngle=s,this._updatePointerAngles(r)}_updatePointer(e){if(e&&e.x==null&&e.y==null)return;const i=e.native.pointerId,r=this._activePointerMap.get(i);r?r.event=e:this._addPointer(e)}_removePointer(e){const i=TP(this._activePointerMap).angle;this._activePointerMap.delete(e),this._updatePointerAngles(i)}_updatePointerAngles(e){const i=TP(this._activePointerMap);this._activePointerMap.forEach((r=>{r.initialAngle=PL(r,i)-e,r.lastAngle=PL(r,i)-e}))}_emitEvent(e,i,r){const n=TP(this._activePointerMap);this._drag.emit(this._createPayload(e,i,n,r),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(e){const i=e.data.native.pointerId,r=e.timestamp;this._activePointerMap.get(i)&&(this._activePointerMap.size===1?(this._updatePointer(e.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",e.data,r),this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._removePointer(i)):(this._removePointer(i),this._emitEvent("removed",e.data,e.timestamp)))}_handlePointerDrag(e){const i=e.data,r=i.currentEvent,n=e.timestamp;switch(i.action){case"start":case"update":this._isDragging?this._activePointerMap.has(r.native.pointerId)?(this._updatePointer(r),!this._isCurrentDragSuppressed&&this._emitEvent("update",r,n)):(this._addPointer(r),this._emitEvent("added",r,n),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(r),this._pointerType=e.data.startEvent.pointerType,this._mouseButton=e.data.startEvent.button,this._startStateModifiers=e.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",r,n))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&this._pointerType==="touch"&&this._activePointerMap.size===1}};function aye(t){const e=[];return t.forEach((i=>{e.push(Rs(i.event.x,i.event.y))})),wVe(e)}function TP(t){const e=aye(t);let i=0;return t.forEach((r=>{let n=PL(r,e),s=n-r.lastAngle;for(;s>Math.PI;)s-=2*Math.PI;for(;s<-Math.PI;)s+=2*Math.PI;n=r.lastAngle+s,r.lastAngle=n;const o=n-r.initialAngle;i+=o})),i/=t.size||1,{angle:i,radius:e.radius,center:e.center}}function SVe(t){const e=new Map;return t.forEach(((i,r)=>e.set(r,i.event))),e}function PL(t,e){const i=t.event,r=i.x-e.center.x,n=i.y-e.center.y;return Math.atan2(n,r)}var LQ;(function(t){t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right",t[t.Back=3]="Back",t[t.Forward=4]="Forward",t[t.Undefined=-1]="Undefined"})(LQ||(LQ={}));let $Ve=class extends fs{constructor(e={},i=T$){super(!1),this._clock=i,this._pointerState=new Map,this._parameters=Zq(e),this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach((e=>{e.immediateDoubleClick&&e.immediateDoubleClick.timeoutHandle.remove()})),super.onUninstall()}_handlePointerDown(e){const i=e.data,r=Nb(i);if(!this._pointerState.has(r)){const n={downButton:i.native.button,x:i.x,y:i.y,immediateDoubleClick:null};this._pointerState.set(r,n),this.startCapturingPointer(i.native)}}_handlePointerUp(e){const i=e.data,r=Nb(i),n=this._pointerState.get(r);if(n&&n.downButton===i.native.button){const s=n.immediateDoubleClick,o=e.data.native.pointerType==="touch"?this._parameters.maximumDoubleTouchDistance:this._parameters.maximumDoubleClickDistance;s?(s.timeoutHandle.remove(),$O(s,e.data)>o?this._startImmediateDoubleClick(e,n):(this._immediateDoubleClick.emit(e.data,void 0,s.modifiers),this._removeState(i))):$O(n,e.data)>o?this._removeState(i):this._startImmediateDoubleClick(e,n)}}_startImmediateDoubleClick(e,i){const r=e.data.native.pointerType==="touch"?this._parameters.maximumDoubleTouchDelay:this._parameters.maximumDoubleClickDelay;i.immediateDoubleClick={x:e.data.x,y:e.data.y,modifiers:e.modifiers,timeoutHandle:this._clock.setTimeout((()=>this._removeState(e.data)),r)}}_removeState(e){const i=Nb(e);this._pointerState.delete(i),this.stopCapturingPointer(e.native),this.refreshHasPendingInputs()}},TVe=class extends fs{constructor(e={},i=T$){super(!1),this._clock=i,this._pointerState=new Map,this._parameters=vVe(e),this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",(r=>this._handlePointerDown(r))),this.registerIncoming("pointer-up",(r=>this._handlePointerLoss(r,"pointer-up"))),this.registerIncoming("pointer-capture-lost",(r=>this._handlePointerLoss(r,"pointer-capture-lost"))),this.registerIncoming("pointer-cancel",(r=>this._handlePointerLoss(r,"pointer-cancel"))),this._moveHandle=this.registerIncoming("pointer-move",(r=>this._handlePointerMove(r))),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach((e=>{e.holdTimeout=Nr(e.holdTimeout)})),super.onUninstall()}_handlePointerDown(e){const i=e.data,r=i.native.pointerId;let n=null;this._pointerState.size===0&&(n=this._clock.setTimeout((()=>{const o=this._pointerState.get(r);if(o){if(!o.isDragging){const a=o.previousEvent;this._pointerHold.emit(a,void 0,e.modifiers),o.holdEmitted=!0}o.holdTimeout=null}}),this._parameters.holdDelay));const s={startEvent:i,previousEvent:i,startTimestamp:e.timestamp,isDragging:!1,downButton:i.native.button,holdTimeout:n,modifiers:new Set};this._pointerState.set(r,s),this.startCapturingPointer(i.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(e)}_handlePointerMove(e){const i=e.data,r=i.native.pointerId,n=this._pointerState.get(r);n&&(n.isDragging?this._pointerDrag.emit(EP("update",n,i),void 0,n.modifiers):bVe(i,n.startEvent)>this._getDragThreshold(i.native.pointerType)&&this._startDragging(e),n.previousEvent=i)}_getDragThreshold(e){switch(e){case"touch":return this._parameters.movementUntilTouchDrag;case"pen":return this._parameters.movementUntilPenDrag;default:return this._parameters.movementUntilMouseDrag}}_startDragging(e){const i=e.data,r=i.native.pointerId;this._pointerState.forEach((n=>{n.holdTimeout!=null&&(n.holdTimeout.remove(),n.holdTimeout=null),n.isDragging||(n.modifiers=e.modifiers,n.isDragging=!0,r===n.startEvent.native.pointerId?this._pointerDrag.emit(EP("start",n,i)):this._pointerDrag.emit(EP("start",n,n.previousEvent),e.timestamp))}))}_handlePointerLoss(e,i){const r=e.data,n=r.native.pointerId,s=this._pointerState.get(n);s&&(s.holdTimeout!=null&&(s.holdTimeout.remove(),s.holdTimeout=null),s.isDragging?this._pointerDrag.emit(EP("end",s,i==="pointer-up"?r:s.previousEvent),void 0,s.modifiers):i==="pointer-up"&&s.downButton===r.native.button&&e.timestamp-s.startTimestamp<=this._parameters.maximumClickDelay&&!s.holdEmitted&&this._immediateClick.emit(r),this._pointerState.delete(n),this.stopCapturingPointer(r.native),this._pointerState.size===0&&this._moveHandle.pause())}};function EP(t,e,i){return{action:t,startEvent:e.startEvent,previousEvent:e.previousEvent,currentEvent:i}}let EVe=class extends fs{constructor(e={},i=T$){super(!1),this._clock=i,this._pointerState=new Map,this._parameters=Zq(e),this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",(r=>this._handleImmediateClick(r))),this.registerIncoming("pointer-down",(r=>this._handlePointerDown(r)))}onUninstall(){this._pointerState.forEach((e=>e.doubleClickTimer=Nr(e.doubleClickTimer)))}get hasPendingInputs(){for(const e of this._pointerState.values())if(e.doubleClickTimer!=null)return!0;return!1}_clearDoubleClickTimer(e,i){const r=this._pointerState.get(e);r&&(r.doubleClickTimer=Nr(r.doubleClickTimer),i&&this._click.emit(r.event.data,void 0,r.event.modifiers),this._pointerState.delete(e),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(e){const i=this._pointerState.get(e);i.pointerDownCount===1&&this._click.emit(i.event.data,void 0,i.event.modifiers),i.doubleClickTimer=null,this._pointerState.delete(e),this.refreshHasPendingInputs()}_handleImmediateClick(e){const i=e.data,{pointerType:r}=i.native,n=IVe(i);if(!this._pointerState.has(n))return void this._startClick(e);const s=this._pointerState.get(n),{data:o,modifiers:a}=s.event,l=r==="touch"?this._parameters.maximumDoubleTouchDistance:this._parameters.maximumDoubleClickDistance;$O(o,i)>l?(this._clearDoubleClickTimer(n,!0),this._startClick(e)):(this._clearDoubleClickTimer(n,!1),s.pointerDownCount===2&&this._doubleClick.emit(o,void 0,a))}_handlePointerDown(e){const i=Nb(e.data),r=this._pointerState.get(i);r&&(r.pointerDownCount+=1)}_startClick(e){const{data:i}=e,{native:{pointerType:r}}=i,n=Nb(i),s=r==="touch"?this._parameters.maximumDoubleTouchDelay:this._parameters.maximumDoubleClickDelay,o=this._clock.setTimeout((()=>this._doubleClickTimeoutExceeded(n)),s);this._pointerState.set(n,{event:e,doubleClickTimer:o,pointerDownCount:1}),this.refreshHasPendingInputs()}};function IVe(t){const{pointerId:e,pointerType:i,button:r}=t.native;return i==="mouse"?`${e}:${r}`:`${i}`}const IP={counter:"Control",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwise:["a","A"],counterClockwise:["d","D"],reset:["n","N"]}},RQ=Symbol("handles");let g0=class extends tt{initialize(){const e=()=>{var i;return(i=this.view)==null?void 0:i.ready};this.addHandles([Sn((()=>!e()),(()=>this._disconnect())),Sn(e,(()=>this._connect()))])}destroy(){this._disconnect()}get latestPointerType(){var e;return(e=this._inputManager)==null?void 0:e.latestPointerType}get latestPointerLocation(){var e;return(e=this._inputManager)==null?void 0:e.latestPointerLocation}get multiTouchActive(){var e;return((e=this._inputManager)==null?void 0:e.multiTouchActive)??!1}isModifierKeyDown(e){var i;return((i=this._inputManager)==null?void 0:i.isModifierKeyDown(e))??!1}_disconnect(){this.view.viewEvents.disconnect(),this.removeHandles(RQ),this._inputManager=hr(this._inputManager)}_connect(){const e=this.view.surface,i=new yVe(e,this.view.input),r=[new $Ve,new TVe,new EVe,new xVe(this.view.navigation),new _Ve],n=new rc({eventSource:i,recognizers:r}),s=new c4e(this.view,["primary"]),o=new u4e(this.view,["secondary"]);n.installHandlers("prevent-context-menu",[new gVe],Kf.INTERNAL),n.installHandlers("navigation",[new aVe(this.view),new K4e(this.view),new oVe(this.view),new EQ(this.view),new EQ(this.view,[IP.counter]),s,new iVe(this.view,IP.pan),new nVe(this.view,IP.zoom),new rVe(this.view,IP.rotate),o,new l4e(this.view,"touch")],Kf.INTERNAL),this.view.viewEvents.connect(n),this._source=i,this._inputManager=n,this.addHandles([$e((()=>{var a,l;return(l=(a=this.view)==null?void 0:a.navigation)==null?void 0:l.browserTouchPanEnabled}),(a=>{this._source&&(this._source.browserTouchPanningEnabled=!a)}),kt),$e((()=>{const{actionMap:a}=this.view.navigation;return{panActions:TQ("pan",a),rotateActions:TQ("rotate",a)}}),(({panActions:a,rotateActions:l})=>{s.pointerActions=a,o.pointerActions=l}),ta)],RQ)}get test(){}};u([h()],g0.prototype,"view",void 0),u([h()],g0.prototype,"latestPointerType",null),u([h()],g0.prototype,"latestPointerLocation",null),u([h()],g0.prototype,"multiTouchActive",null),g0=u([V("esri.views.2d.input.MapViewInputManager")],g0);const CVe=g0,MVe=t=>{let e=class extends t{constructor(...i){super(...i),this.goToManager=new kL({view:this}),this.inputManager=new CVe({view:this}),this.addHandles([this.on("resize",(r=>this.stateManager.resize(r.width,r.height)))])}get interacting(){return this.navigating}get stationary(){return!this.animation&&!this.navigating&&!this.resizing&&this.stationaryManager.stationary}on(i,r,n,s){return this.inputManager&&this.viewEvents.on(i,r,n,s)||super.on(i,r)}hasEventListener(i){return super.hasEventListener(i)||this.viewEvents.hasHandler(i)}goTo(i,r){return this.goToManager.goTo(i,r)}toMap(i){if(!this.ready)return null;const r=Qfe(i)?Kfe(this,i):i;return this.stateManager.toMap(r)}};return u([h()],e.prototype,"goToManager",void 0),u([h({readOnly:!0})],e.prototype,"interacting",null),u([h()],e.prototype,"stationary",null),u([h({readOnly:!0})],e.prototype,"inputManager",void 0),e=u([V("esri.views.Viewport2DMixin")],e),e};let OQ=class{constructor(e){this._view=e,this.viewpoint=new ps({targetGeometry:new _t,scale:0,rotation:0})}get view(){return this._view}get size(){const[e,i]=this._view.size;return Math.sqrt(e*e+i*i)}get scale(){return this.viewpoint.scale}get rotation(){return this.viewpoint.rotation}get center(){return this.viewpoint.targetGeometry}get scaleToResolutionFactor(){return kme(this.center.spatialReference)}pixelsPerPanAtZoom(e){return 1/(e*this.scaleToResolutionFactor)}zoomAtPixelsPerPan(e){return 1/(e*this.scaleToResolutionFactor)}pixelsPerRotate(){return this.size/2}compareTo(e,i){i.pan=vue(this.center,e.center);let r=Math.abs(e.rotation-this.rotation);r=r>=180?360-r:r,i.rotate=k$(r),i.sourceZoom=this.scale,i.targetZoom=e.scale}interpolate(e,i,r){const{pan:n,rotate:s,zoom:o,zoomOffset:a}=r,{center:l}=this;l.spatialReference=e.center.spatialReference,l.x=kE(e.center.x,i.center.x,n),l.y=kE(e.center.y,i.center.y,n),this.viewpoint.scale=kE(e.scale,i.scale+a,o);let c=e.rotation;const d=i.rotation;Math.abs(d-c)>=180&&(c+=360*(c<d?1:-1)),this.viewpoint.rotation=kE(c,d,s)}copyFrom(e){ko(this.viewpoint,e.viewpoint),this._view=e.view}};function QT(t,e,i,r){const n=3*t,s=3*(i-t)-n,o=1-n-s,a=3*e,l=3*(r-e)-a,c=1-a-l;function d(b){return((o*b+s)*b+n)*b}function f(b){return((c*b+l)*b+a)*b}function y(b){return(3*o*b+2*s)*b+n}function g(b,_){let x,E,C,k,O,D;for(C=b,D=0;D<8;D++){if(k=d(C)-b,Math.abs(k)<_)return C;if(O=y(C),Math.abs(O)<1e-6)break;C-=k/O}if(x=0,E=1,C=b,C<x)return x;if(C>E)return E;for(;x<E;){if(k=d(C),Math.abs(k-b)<_)return C;b>k?x=C:E=C,C=.5*(E-x)+x}return C}return function(b,_=1e-6){return f(g(b,_))}}const vc={};vc.ease=QT(.25,.1,.25,1),vc.linear=QT(0,0,1,1),vc.easeIn=vc["ease-in"]=QT(.42,0,1,1),vc.easeOut=vc["ease-out"]=QT(0,0,.58,1),vc.easeInOut=vc["ease-in-out"]=QT(.42,0,.58,1);const kVe=t=>t,aM=t=>t*t,TO=t=>1-aM(1-t),FQ=t=>t<.5?aM(2*t)/2:(TO(2*(t-.5))+1)/2,EO=t=>t*t*t,pB=t=>1-EO(1-t),NQ=t=>t<.5?EO(2*t)/2:(pB(2*(t-.5))+1)/2,IO=t=>t*t*t*t,fB=t=>1-IO(1-t),DQ=t=>t<.5?IO(2*t)/2:(fB(2*(t-.5))+1)/2,CO=t=>t*t*t*t*t,mB=t=>1-CO(1-t),zQ=t=>t<.5?CO(2*t)/2:(mB(2*(t-.5))+1)/2,MO=t=>1-Math.cos(t*Math.PI/2),yB=t=>1-MO(1-t),VQ=t=>t<.5?MO(2*t)/2:(yB(2*(t-.5))+1)/2,kO=t=>2**(10*(t-1)),PO=t=>1-kO(1-t),jQ=t=>t<.5?kO(2*t)/2:(PO(2*(t-.5))+1)/2,AO=t=>-(Math.sqrt(1-t*t)-1),gB=t=>1-AO(1-t),UQ=t=>t<.5?AO(2*t)/2:(gB(2*(t-.5))+1)/2;function zc(t){const e=2*(t-Math.sqrt((t-1)*t)),i=e/2/t;return r=>r<i?t*r*r:e*r-e+1}function Vc(t,e){return(i,r)=>i<e?e*t(i/e,r):1-t((1-i)/(1-e),r)*(1-e)}const BQ=Vc(zc(1),1),GQ=Vc(zc(1),0),LO=Vc(zc(1),.5),qQ=Vc(zc(2),1),HQ=Vc(zc(2),0),WQ=Vc(zc(2),.5),ZQ=Vc(zc(3),1),JQ=Vc(zc(3),0),YQ=Vc(zc(3),.5),XQ=Vc(zc(4),1),KQ=Vc(zc(4),0),QQ=Vc(zc(4),.5),eee={linear:kVe,"in-quad":aM,"out-quad":TO,"in-out-quad":FQ,"in-coast-quad":BQ,"out-coast-quad":GQ,"in-out-coast-quad":LO,"in-cubic":EO,"out-cubic":pB,"in-out-cubic":NQ,"in-coast-cubic":qQ,"out-coast-cubic":HQ,"in-out-coast-cubic":WQ,"in-quart":IO,"out-quart":fB,"in-out-quart":DQ,"in-coast-quart":ZQ,"out-coast-quart":JQ,"in-out-coast-quart":YQ,"in-quint":CO,"out-quint":mB,"in-out-quint":zQ,"in-coast-quint":XQ,"out-coast-quint":KQ,"in-out-coast-quint":QQ,"in-sine":MO,"out-sine":yB,"in-out-sine":VQ,"in-expo":kO,"out-expo":PO,"in-out-expo":jQ,"in-circ":AO,"out-circ":gB,"in-out-circ":UQ,"quad-in":aM,"quad-out":TO,"quad-in-out":FQ,"quad-in-coast":BQ,"quad-out-coast":GQ,"quad-in-out-coast":LO,"cubic-in":EO,"cubic-out":pB,"cubic-in-out":NQ,"cubic-in-coast":qQ,"cubic-out-coast":HQ,"cubic-in-out-coast":WQ,"quart-in":IO,"quart-out":fB,"quart-in-out":DQ,"quart-in-coast":ZQ,"quart-out-coast":JQ,"quart-in-out-coast":YQ,"quint-in":CO,"quint-out":mB,"quint-in-out":zQ,"quint-in-coast":XQ,"quint-out-coast":KQ,"quint-in-out-coast":QQ,"sine-in":MO,"sine-out":yB,"sine-in-out":VQ,"expo-in":kO,"expo-out":PO,"expo-in-out":jQ,"circ-in":AO,"circ-out":gB,"circ-in-out":UQ,ease:t=>vc.ease(t),"ease-in":t=>vc.easeIn(t),"ease-out":t=>vc.easeOut(t),"ease-in-out":t=>vc.easeInOut(t)};let PVe=class{constructor(){this.pan=0,this.rotate=0,this.fov=0,this.sourceZoom=0,this.targetZoom=0}};const RO={desiredScreenFlow:2,minDuration:500,maxDuration:8e3},lye={maxDuration:4e3};let AVe=class cye{constructor(e){this._createCamera=e,this.compared=new PVe,this.segmentStart=0,this.segmentEnd=1,this.settings={desiredScreenFlow:RO.desiredScreenFlow},this.source=e(),this.target=e()}clone(){const e=new cye(this._createCamera);return e.copyFrom(this),e}copyFrom(e){this.update(e.source,e.target,e.settings)}update(e,i,r){this.source!==e&&this.source.copyFrom(e),this.target!==i&&this.target.copyFrom(i),this.source.compareTo(this.target,this.compared),this.settings.desiredScreenFlow=r.desiredScreenFlow??RO.desiredScreenFlow,this.desiredPixelFlow=this.settings.desiredScreenFlow*this.target.size,this.halfWindowSize=this.target.size/2}halfWindowPanAtZoom(e){const i=this.target.pixelsPerPanAtZoom(e);return this.halfWindowSize/i}get hasZoom(){return Math.abs(this.compared.sourceZoom-this.compared.targetZoom)>1e-5}get hasPan(){return this.compared.pan>la()}get hasFov(){return Math.abs(this.compared.fov)>la()}get hasRotate(){return this.compared.rotate>la()}},LVe=class{constructor(){this.pan=0,this.rotate=0,this.zoom=0,this.fov=0,this.zoomOffset=0}},RVe=class{constructor(){this.segments=new Array}get time(){return this.segments.reduce(((e,i)=>e+i.time),0)}interpolateComponentsAt(e,i){e=Math.min(Math.max(e,0),1),e*=this.time;let r=0,n=0;const s=this.definition,o=this.segments.reduce(((a,l)=>a||l.definition.hasZoom),!1);for(let a=0;a<this.segments.length;a++){const l=this.segments[a],c=l.definition;if(e<=l.time||a===this.segments.length-1){if(this.segmentInterpolateComponentsAt(l,l.time===0?0:e/l.time,i),s.hasPan&&!isNaN(i.pan)&&isFinite(s.compared.pan)?i.pan=(r+c.compared.pan*i.pan)/s.compared.pan:i.pan=1,s.hasRotate&&!isNaN(i.rotate)&&isFinite(s.compared.rotate)?i.rotate=(n+c.compared.rotate*i.rotate)/s.compared.rotate:i.rotate=1,o&&!isNaN(i.zoom)&&isFinite(c.compared.targetZoom)){const{sourceZoom:d,targetZoom:f}=c.compared,y=i.zoom*(f-d)+d,g=this.segments[0].definition.compared.sourceZoom,b=this.segments[this.segments.length-1].definition.compared.targetZoom,_=Math.abs(f-g)>Math.abs(d-g)?f:d;i.zoomOffset=_-b,i.zoom=(y-g)/(_-g)}else i.zoom=1;return i}e-=l.time,r+=c.compared.pan,n+=c.compared.rotate}}segmentInterpolateComponentsAt(e,i,r){e.interpolateComponentsAt(i,r)}},r4=class{get time(){return this._time}constructor(e){e&&this.update(e)}update(e){e&&(this.definition?this.definition.copyFrom(e):this.definition=e.clone()),this._updatePrecomputedVariables(),this._updatePixelFlow()}_updatePrecomputedVariables(){const e=this.definition,i=e.compared,r=i.sourceZoom,n=i.targetZoom;this._zoomSign=r>n?1:-1,this._panPixelsAtSource=i.pan*e.source.pixelsPerPanAtZoom(r);const s=(e.source.pixelsPerRotate()+e.target.pixelsPerRotate())/2;this._rotatePixels=i.rotate*s}_updatePixelFlow(){const e=this.definition.compared.sourceZoom,i=this.definition.compared.targetZoom,{hasZoom:r,hasPan:n,hasRotate:s}=this.definition;let o=0,a=0;r&&(n&&(o=(i/e-1)/(-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2*this._panPixelsAtSource)),s&&(a=this._zoomSign*(Math.log(e/i)/Math.LN2)*this.definition.halfWindowSize/this._rotatePixels)),this._zoomPixelFlow=0,this._panPixelFlow=0,this._rotatePixelFlow=0;const l=this.definition.desiredPixelFlow;if(r&&n&&s){const c=o+a+o*a;this._zoomPixelFlow=o*a/c*l,this._panPixelFlow=a/c*l,this._rotatePixelFlow=o/c*l}else if(r&&n){const c=1+o;this._zoomPixelFlow=o/c*l,this._panPixelFlow=1/c*l}else if(r&&s){const c=1+a;this._zoomPixelFlow=a/c*l,this._rotatePixelFlow=1/c*l}else if(n&&s){const c=this._panPixelsAtSource/this._rotatePixels,d=1+c;this._panPixelFlow=c/d*l,this._rotatePixelFlow=1/d*l}else n?this._panPixelFlow=l:r?this._zoomPixelFlow=l:s&&(this._rotatePixelFlow=l);if(this._time=Math.max(this.rotateTime,this.zoomTime,this.panTime),this.fovTime>this._time){const c=this.fovTime/this._time;this._time=this.fovTime,this._zoomPixelFlow/=c,this._panPixelFlow/=c,this._rotatePixelFlow/=c}}get rotateTime(){return this.definition.hasRotate?this._rotatePixels/this._rotatePixelFlow:0}get zoomTime(){return this.definition.hasZoom?this._zoomSign*(Math.log(this.definition.compared.sourceZoom/this.definition.compared.targetZoom)/Math.LN2)*this.definition.halfWindowSize/this._zoomPixelFlow:0}get fovTime(){return this.definition.hasFov?Math.abs(this.definition.compared.fov)/OVe:0}get panTime(){if(!this.definition.hasPan)return 0;if(this.definition.hasZoom){const e=-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2,i=e*this._panPixelsAtSource;return Math.log(i*(this._zoomPixelFlow/this._panPixelFlow)+1)/(e*this._zoomPixelFlow)}return this._panPixelsAtSource/this._panPixelFlow}_interpolateComponentsZoom(e){if(e===0||e===1)return e;if(this.definition.hasZoom){const i=this.definition.compared.sourceZoom,r=this.definition.compared.targetZoom;return(i*(i/r)**-e-i)/(r-i)}return e}_interpolateComponentsFov(e){if(e===0)return this.definition.segmentStart;if(e===1)return this.definition.segmentEnd;if(this.definition.hasFov){const{segmentStart:i,segmentEnd:r}=this.definition;return i+e*(r-i)}return this.definition.segmentStart}_interpolateComponentsPan(e){if(e===0||e===1)return e;if(this.definition.hasPan&&this.definition.hasZoom){const i=-1/(this._zoomSign*this.definition.halfWindowSize)*this._zoomPixelFlow;return 1/this._panPixelsAtSource*(this._panPixelFlow*(2**(i*e*this._time)-1))/(i*Math.LN2)}return e}_interpolateComponentsRotate(e){return e}interpolateComponentsAt(e,i){e=Math.min(Math.max(e,0),1),i.zoom=this._interpolateComponentsZoom(e),i.pan=this._interpolateComponentsPan(e),i.rotate=this._interpolateComponentsRotate(e),i.zoomOffset=0,i.fov=this._interpolateComponentsFov(e)}};const OVe=k$(45);function FVe(t,e,i){const r=e-t.compared.sourceZoom,n=t.halfWindowPanAtZoom(r);return-t.halfWindowSize*(i.ascensionFactor*Math.LN2*t.compared.pan+n)*Math.log(t.compared.sourceZoom/e)/(t.desiredPixelFlow*Math.LN2*n)}function NVe(t,e,i){const r=1/e,n=Math.log(t.compared.sourceZoom*r),s=1/t.desiredPixelFlow,o=1/Math.LN2,a=e-t.compared.sourceZoom,l=1/a,c=(i.ascensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(a))/t.halfWindowPanAtZoom(1);return t.halfWindowSize*r*s*o*l*c-t.halfWindowSize*n*s*o*l+t.halfWindowSize*n*s*o*c/(a*a)}function DVe(t,e,i){const r=e-t.compared.sourceZoom,n=1/r,s=1/e,o=Math.log(t.compared.sourceZoom*s),a=(i.ascensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(r))/t.halfWindowPanAtZoom(1);return t.halfWindowSize*n*(-2*n*s*a+2*n*o+2*s-2*o*a/(r*r)-a/(e*e))/(t.desiredPixelFlow*Math.LN2)}function zVe(t,e){return-t.halfWindowSize*Math.log(t.compared.sourceZoom/e)/(t.desiredPixelFlow*Math.LN2)}function VVe(t,e){return t.halfWindowSize/(e*t.desiredPixelFlow*Math.LN2)}function jVe(t,e){return-t.halfWindowSize/(e*e*t.desiredPixelFlow*Math.LN2)}function UVe(t,e,i){return-t.compared.pan*t.halfWindowSize*(i.ascensionFactor+i.descensionFactor-1)/(t.desiredPixelFlow*t.halfWindowPanAtZoom(e))}function BVe(t,e,i){return t.compared.pan*t.halfWindowSize*(i.ascensionFactor+i.descensionFactor-1)/(t.desiredPixelFlow*t.halfWindowPanAtZoom(e*e))}function GVe(t,e,i){return-2*t.compared.pan*t.halfWindowSize*(i.ascensionFactor+i.descensionFactor-1)/(t.desiredPixelFlow*t.halfWindowPanAtZoom(e*e*e))}function qVe(t,e,i){return t.halfWindowSize*(-t.halfWindowPanAtZoom(e)-i.descensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(t.compared.targetZoom))*Math.log(e/t.compared.targetZoom)/(t.desiredPixelFlow*Math.LN2*t.halfWindowPanAtZoom(-e+t.compared.targetZoom))}function HVe(t,e,i){const r=Math.log(e/t.compared.targetZoom),n=1/t.desiredPixelFlow,s=1/Math.LN2,o=-e+t.compared.targetZoom,a=1/o,l=(-t.halfWindowPanAtZoom(e)-i.descensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(t.compared.targetZoom))/t.halfWindowPanAtZoom(1);return-t.halfWindowSize*r*n*s*a+t.halfWindowSize*r*n*s*l/(o*o)+t.halfWindowSize*n*s*a*l/e}function WVe(t,e,i){const r=e-t.compared.targetZoom,n=1/r,s=1/e,o=Math.log(e/t.compared.targetZoom),a=(t.halfWindowPanAtZoom(e)+i.descensionFactor*Math.LN2*t.compared.pan-t.halfWindowPanAtZoom(t.compared.targetZoom))/t.halfWindowPanAtZoom(1);return t.halfWindowSize*n*(-2*n*s*a-2*n*o+2*s+2*o*a/(r*r)-a/(e*e))/(t.desiredPixelFlow*Math.LN2)}function ZVe(t,e){return t.halfWindowSize*Math.log(e/t.compared.targetZoom)/(t.desiredPixelFlow*Math.LN2)}function JVe(t,e){return t.halfWindowSize/(e*t.desiredPixelFlow*Math.LN2)}function YVe(t,e){return-t.halfWindowSize/(e*e*t.desiredPixelFlow*Math.LN2)}function XVe(t){const e=t.compared.sourceZoom-t.compared.targetZoom;if(e===0)return t.compared.pan*t.halfWindowSize/(t.desiredPixelFlow*t.halfWindowPanAtZoom(t.compared.sourceZoom));const i=Math.LN2*t.compared.pan,r=e,n=t.halfWindowPanAtZoom(r),s=t.halfWindowSize*Math.log(t.compared.sourceZoom/t.compared.targetZoom)/(t.desiredPixelFlow*Math.LN2*n);return t.compared.sourceZoom<=t.compared.targetZoom?s*(i-n):s*(i+n)}function KVe(t,e){let i=QVe(t,e);const r={ascensionFactor:e.ascensionFactor!=null?e.ascensionFactor:.5,descensionFactor:e.descensionFactor!=null?e.descensionFactor:.5},n=r.ascensionFactor===0,s=r.descensionFactor===0,o=n?zVe:FVe,a=n?VVe:NVe,l=n?jVe:DVe,c=s?ZVe:qVe,d=s?JVe:HVe,f=s?YVe:WVe,y=D=>o(t,D,r)+UVe(t,D,r)+c(t,D,r),g=D=>a(t,D,r)+BVe(t,D,r)+d(t,D,r),b=D=>l(t,D,r)+GVe(t,D,r)+f(t,D,r);let _=y(i);const x=XVe(t);let E;const C=e.maximumIterations||20,k=e.maximumDistance!=null?e.maximumDistance:1/0;for(E=0;E<C;E++){const D=e.desiredSlope??1e-6;let B=g(i);Math.abs(B)>D&&(B+=D);const j=B/b(i);if(isNaN(j)||i>=k&&j<0){if(!isFinite(k))return null;i=k,_=y(i);break}if(i-=j,i<=t.compared.sourceZoom||i<=t.compared.targetZoom)return null;const Z=y(i);if(Math.abs(Z-_)/_<=.005)break;_=Z}return isNaN(_)||_>x*(1-.3)||i<=t.compared.sourceZoom||i<=t.compared.targetZoom?null:i}function QVe(t,e){const i=Math.max(t.compared.sourceZoom,t.compared.targetZoom),r=t.source.zoomAtPixelsPerPan(t.desiredPixelFlow/t.compared.pan)/2;return r<i?e.maximumDistance!=null?i+(e.maximumDistance-i)/2:1.5*i:e.maximumDistance?Math.min(e.maximumDistance,r):r}let eje=class extends RVe{constructor(e,i){super(),this._preallocSegments=[new r4,new r4,new r4],this._ascensionSegment=null,this._descensionSegment=null,this.update(e,i)}update(e,i){if(!e)return;this.definition?this.definition.copyFrom(e):this.definition=e.clone();const r=i!=null&&i.apex?KVe(e,i.apex):null;this.segments.length=0,this._ascensionSegment=null,this._descensionSegment=null,r?this._updateWithApex(r,i==null?void 0:i.apex):this._updateWithoutApex()}segmentInterpolateComponentsAt(e,i,r){e.interpolateComponentsAt(i,r),e===this._ascensionSegment?r.zoom=TO(r.zoom):e===this._descensionSegment&&(r.zoom=aM(r.zoom))}_updateWithApex(e,i){const[r,n,s]=this._preallocSegments,o=(i==null?void 0:i.ascensionFactor)??.5,a=Math.min(1-o,(i==null?void 0:i.ascensionFactor)!=null&&i.descensionFactor!=null?i.descensionFactor:.5),l=1-o-a;r.definition?r.definition.copyFrom(this.definition):r.definition=this.definition.clone(),r.definition.compared.targetZoom=e,r.definition.compared.pan=this.definition.compared.pan*o,r.definition.compared.rotate=this.definition.compared.rotate*o,r.definition.segmentEnd=o,r.update(),this._ascensionSegment=r,this.segments.push(r),l>0&&(n.definition?n.definition.copyFrom(this.definition):n.definition=this.definition.clone(),n.definition.copyFrom(this.definition),n.definition.compared.sourceZoom=e,n.definition.compared.targetZoom=e,n.definition.compared.pan=this.definition.compared.pan*l,n.definition.compared.rotate=this.definition.compared.rotate*l,n.definition.segmentStart=r.definition.segmentEnd,n.definition.segmentEnd=r.definition.segmentEnd+l,n.update(),this.segments.push(n)),s.definition?s.definition.copyFrom(this.definition):s.definition=this.definition.clone(),s.definition.compared.sourceZoom=e,s.definition.compared.pan=this.definition.compared.pan*a,s.definition.compared.rotate=this.definition.compared.rotate*a,s.definition.segmentStart=o+l,s.update(),this._descensionSegment=s,this.segments.push(s)}_updateWithoutApex(){const[e]=this._preallocSegments;e.update(this.definition),this.segments.push(e)}};const tje=new LVe;let ije=class{get time(){return this._time}get isLinear(){return this.path.segments.length===1}constructor(e){this._time=0,this._easing=LO,this.definition=new AVe(e),this.path=new eje}update(e,i,r){this.definition.update(e,i,r),this.path.update(this.definition,r),this._time=this._applyTimeSettings(lTe(isFinite(this.path.time)?this.path.time:0),r),this._easing=r.easing??(this._time>=1e3?LO:PO)}cameraAt(e,i){e=Math.min(Math.max(0,e),1),e=this._normalizedEasing(e);const r=this.path.interpolateComponentsAt(e,tje);i.interpolate(this.definition.source,this.definition.target,r)}_normalizedEasing(e){const i=this._easing(0,this._time),r=this._easing(1,this._time);return(this._easing(e,this._time)-i)/(r-i)}_applyTimeSettings(e,i){const r=i.speedFactor!=null?i.speedFactor:1,n=i.minDuration??RO.minDuration/r,s=i.maxDuration??RO.maxDuration/r;return e=i.duration!=null?i.duration:Math.min(Math.max(e/r,n),s)}};const rje=2e3,nje=64;let sje=class{constructor(e){this._view=e,this._animation=new ije((()=>new OQ(this._view))),this._current=new OQ(this._view)}get _source(){return this._animation.definition.source}get _target(){return this._animation.definition.target}get duration(){return this._animation.time}get animation(){return this._animation}update(e,i,r={}){ko(this._current.viewpoint,e),ko(this._source.viewpoint,e),ko(this._target.viewpoint,i),this._animation.update(this._source,this._target,r)}applyRatio(e,i){this._animation.cameraAt(i,this._current),ko(e,this._current.viewpoint)}},e1=class extends tt{constructor(e){super(e),this._animation=null,this._destinationViewState=new Hq,this.updateFunction=null,this.easing=eee.ease,this.viewpoint=new ps({targetGeometry:new _t,scale:0,rotation:0}),this._updateTask=HS({postRender:this._postRender.bind(this)}),this._updateTask.pause(),this._transition=new sje(e.view)}destroy(){this._updateTask=Nr(this._updateTask)}get animation(){return this._animation}set animation(e){this._animation=e,this.view.animation=e}animate(e,i,r){this.stop();const n=this.viewpoint;ko(n,i);const s=e.target;this._transition.update(this.viewpoint,s,{apex:{maximumDistance:Math.min(Math.min(i.scale,s.scale)*nje,this.view.constraints.effectiveMinScale),desiredSlope:5e-8},duration:r==null?void 0:r.duration,maxDuration:(r==null?void 0:r.animationMode)==="auto"?1/0:(r==null?void 0:r.maxDuration)??lye.maxDuration,speedFactor:r==null?void 0:r.speedFactor,easing:(typeof(r==null?void 0:r.easing)=="string"?eee[r.easing]:r==null?void 0:r.easing)||this.easing}),(r==null?void 0:r.animationMode)==="auto"&&(this._destinationViewState.copy(this.view.state),this._destinationViewState.viewpoint=s,oje(this._transition.animation,r,this.view.state,this._destinationViewState)||this._transition.update(this.viewpoint,s,{duration:0}));const o=()=>{this.animation===e&&this._updateTask&&(e.state==="finished"&&(this._transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return e.when(o,o),this._startTime=performance.now(),this._updateTask.resume(),this.animation=e,e}animateContinuous(e,i){this.stop(),this.updateFunction=i,this.viewpoint=e;const r=new dB({target:e.clone()}),n=()=>{this.animation===r&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return r.when(n,n),this._startTime=performance.now(),this._updateTask.resume(),this.animation=r,r}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(e){var r,n;const i=this.animation;if(i&&i.state!==dB.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,e.deltaTime),(r=this.animation)==null||r.update(this.viewpoint);else{const s=performance.now()-this._startTime,o=this._transition.duration,a=o>0?s/o:1,l=a>=1;this._transition.applyRatio(this.viewpoint,a),l&&((n=this.animation)==null||n.finish())}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};function oje(t,e,i,r){if((e==null?void 0:e.duration)!=null)return!0;const{time:n,isLinear:s}=t,o=(e==null?void 0:e.speedFactor)||1;if(n>((e==null?void 0:e.maxDuration)??lye.maxDuration/o))return!1;if(s){const l=en(),c=Rs(...r.toScreen(l,...i.center)),d=Rs(...i.toScreen(l,...r.center)),f=d!=null&&d.x>-1*i.size[0]&&d.x<(1.5+.5)*i.size[0]&&d.y>-1*i.size[1]&&d.y<(1.5+.5)*i.size[1],y=c!=null&&c.x>-1*r.size[0]&&c.x<(1.5+.5)*r.size[0]&&c.y>-1*r.size[1]&&c.y<(1.5+.5)*r.size[1];if(n>rje/o&&!f&&!y)return!1}return!0}u([h()],e1.prototype,"easing",void 0),u([h()],e1.prototype,"view",void 0),u([h()],e1.prototype,"viewpoint",void 0),e1=u([V("esri.views.2d.AnimationManager")],e1);const aje=e1;function Tr(){return Promise.all([ye(()=>import("./webglDeps-5_lJRAuR.js"),__vite__mapDeps([154,155,156,157])),ye(()=>import("./mapViewDeps-Dvx3V1jo.js"),__vite__mapDeps([158,159,66,160,156,155,129,107,62,161,63,37,162,61,82,163,114,113,69,14,64,70,164,67,68,112,154,157,165,77,166,167,168,126,123,105,60,12,8,17,169,170,65,171,72,172,74,42,58,173,174,175,176,122,177,178]))])}const eE=()=>Tr().then((()=>ye(()=>import("./TileLayerView2D-C53BzhvJ.js"),__vite__mapDeps([179,62,163,162,61,37,155,82,114,113,69,14,112,165,160,156,129,107,161,63,77,166,167,66,159,64,70,67,68,126,123,105,172,60,12,8,17,74,42,58,180,181,182,176,183,184,174,175,185,186,187,188])))),Uv=()=>Tr().then((()=>ye(()=>import("./FeatureLayerView2D-BB9Q9a0s.js").then(t=>t.F),__vite__mapDeps([189,14,190,191,192,12,8,20,183,163,175,62,61,37,156,155,176,162,82,114,113,69,159,66,160,129,107,161,63,64,70,77,164,193,76,188,185])))),tee={"base-dynamic":()=>Tr().then((()=>ye(()=>import("./BaseDynamicLayerView2D-BVRriBeY.js"),__vite__mapDeps([194,195,162,61,37,155,82,163,114,113,69,14,181,160,156,129,107,66,182,183,196,185])))),"base-tile":eE,"bing-maps":eE,catalog:()=>Tr().then((()=>ye(()=>import("./CatalogLayerView2D-bJZvox19.js"),__vite__mapDeps([197,183,163])))),"catalog-dynamic-group":()=>Tr().then((()=>ye(()=>import("./CatalogDynamicGroupLayerView2D-ChJFnHSK.js"),__vite__mapDeps([198,183,163])))),"catalog-footprint":()=>Tr().then((()=>ye(()=>import("./CatalogFootprintLayerView2D-8i_8Fj2v.js"),__vite__mapDeps([199,189,14,190,191,192,12,8,20,183,163,175,62,61,37,156,155,176,162,82,114,113,69,159,66,160,129,107,161,63,64,70,77,164,193,76,188,185])))),csv:Uv,"geo-rss":()=>Tr().then((()=>ye(()=>import("./GeoRSSLayerView2D-N0umzZe1.js"),__vite__mapDeps([200,183,163,173,174,175,62,61,37,156,155,176,162,82,114,113,69,14,159,66,160,129,107,161,63,64,70,172,60,12,8,17,74,42,58])))),feature:Uv,geojson:Uv,parquet:Uv,graphics:()=>Tr().then((()=>ye(()=>import("./GraphicsLayerView2D-4K9cdnAT.js"),__vite__mapDeps([201,183,163,173,174,175,62,61,37,156,155,176,162,82,114,113,69,14,159,66,160,129,107,161,63,64,70,172,60,12,8,17,74,42,58])))),group:()=>Tr().then((()=>ye(()=>import("./GroupLayerView2D-hiR7mymb.js"),__vite__mapDeps([202,183,163])))),imagery:()=>Tr().then((()=>ye(()=>import("./ImageryLayerView2D-B39aYkdF.js"),__vite__mapDeps([203,204,155,37,90,162,61,82,163,114,113,69,14,183,172,60,62,63,12,8,17,159,66,160,156,129,107,161,64,70,74,42,58,184,174,175,176,195,181,182,196,94,190,188,185])))),"imagery-tile":()=>Tr().then((()=>ye(()=>import("./ImageryTileLayerView2D-0Ux0P5DW.js"),__vite__mapDeps([205,206,204,155,37,90,162,61,82,163,114,113,69,14,183,93,207,176,160,156,129,107,66,182,161,63,208,94,190,188,185])))),kml:()=>Tr().then((()=>ye(()=>import("./KMLLayerView2D-Ck5Plu41.js"),__vite__mapDeps([209,210,181,163,160,156,155,129,107,66,182,195,162,61,37,82,114,113,69,14,183,173,174,175,62,176,159,161,63,64,70,172,60,12,8,17,74,42,58,171,72,94,168,154,157,126,123,105,166,207])))),"knowledge-graph":()=>Tr().then((()=>ye(()=>import("./KnowledgeGraphLayerView2D-DasuKEKz.js"),__vite__mapDeps([211,183,163])))),"link-chart":()=>Tr().then((()=>ye(()=>import("./KnowledgeGraphLayerView2D-DasuKEKz.js"),__vite__mapDeps([211,183,163])))),"knowledge-graph-sublayer":Uv,"map-image":()=>Tr().then((()=>ye(()=>import("./MapImageLayerView2D-DrBP1Nb6.js"),__vite__mapDeps([212,195,162,61,37,155,82,163,114,113,69,14,181,160,156,129,107,66,182,183,172,60,62,63,12,8,17,159,161,64,70,74,42,58,184,174,175,176,196,190,185,186,187,188])))),"map-notes":()=>Tr().then((()=>ye(()=>import("./MapNotesLayerView2D-DsibsD92.js"),__vite__mapDeps([213,183,163,173,174,175,62,61,37,156,155,176,162,82,114,113,69,14,159,66,160,129,107,161,63,64,70,172,60,12,8,17,74,42,58])))),media:()=>Tr().then((()=>ye(()=>import("./MediaLayerView2D-B7erUDeL.js"),__vite__mapDeps([214,215,74,42,62,163,162,61,37,155,82,114,113,69,14,112,165,160,156,129,107,161,63,77,166,167,66,159,64,70,67,68,126,123,105,172,60,12,8,17,58,169,216,170,183])))),"ogc-feature":()=>Tr().then((()=>ye(()=>import("./OGCFeatureLayerView2D-1NMqJrTQ.js"),__vite__mapDeps([217,189,14,190,191,192,12,8,20,183,163,175,62,61,37,156,155,176,162,82,114,113,69,159,66,160,129,107,161,63,64,70,77,164,193,76,188,185])))),"open-street-map":eE,"oriented-imagery":Uv,route:()=>Tr().then((()=>ye(()=>import("./RouteLayerView2D-Dxt7kx_A.js"),__vite__mapDeps([218,219,220,183,163,173,174,175,62,61,37,156,155,176,162,82,114,113,69,14,159,66,160,129,107,161,63,64,70,172,60,12,8,17,74,42,58])))),stream:()=>Tr().then((()=>ye(()=>import("./StreamLayerView2D-Co-kHqDn.js"),__vite__mapDeps([221,189,14,190,191,192,12,8,20,183,163,175,62,61,37,156,155,176,162,82,114,113,69,159,66,160,129,107,161,63,64,70,77,164,193,76,188,185])))),"subtype-group":()=>Tr().then((()=>ye(()=>import("./SubtypeGroupLayerView2D-H7RuGHp1.js"),__vite__mapDeps([222,189,14,190,191,192,12,8,20,183,163,175,62,61,37,156,155,176,162,82,114,113,69,159,66,160,129,107,161,63,64,70,77,164,193,76,188,185])))),tile:eE,"vector-tile":()=>Tr().then((()=>ye(()=>import("./VectorTileLayerView2D-xqgy3pTU.js"),__vite__mapDeps([223,112,167,113,114,155,162,61,37,82,163,69,14,176,23,115,116,183,185])))),video:()=>Tr().then((()=>ye(()=>import("./VideoLayerView2D-CFERQMuZ.js"),__vite__mapDeps([224,225,226,216,82,162,61,37,155,163,114,113,69,14,159,66,160,156,129,107,62,161,63,64,70,170,183,173,174,175,176,172,60,12,8,17,74,42,58])))),wcs:()=>Tr().then((()=>ye(()=>import("./ImageryTileLayerView2D-0Ux0P5DW.js"),__vite__mapDeps([205,206,204,155,37,90,162,61,82,163,114,113,69,14,183,93,207,176,160,156,129,107,66,182,161,63,208,94,190,188,185])))),"web-tile":eE,wfs:Uv,wms:()=>Tr().then((()=>ye(()=>import("./WMSLayerView2D-CN3k3fYe.js"),__vite__mapDeps([227,195,162,61,37,155,82,163,114,113,69,14,181,160,156,129,107,66,182,183,196,185,228,190])))),wmts:()=>Tr().then((()=>ye(()=>import("./WMTSLayerView2D-CLXnUF7m.js"),__vite__mapDeps([229,180,181,163,160,156,155,129,107,66,182,162,61,37,82,114,113,69,14,176,183,185])))),"line-of-sight":null,"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"integrated-mesh":null,"integrated-mesh-3dtiles":null,"point-cloud":null,viewshed:null,voxel:null,scene:null,unknown:null,unsupported:null};function lje(t){const e=t.declaredClass?t.declaredClass.slice(t.declaredClass.lastIndexOf(".")+1):"Unknown",i=e.replaceAll(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new ie(`${i}:view-not-supported`,`${e} is not supported in 2D`)}const iee={hasLayerViewModule:t=>tee[t.type]!=null,importLayerView:t=>{const e=tee[t.type];if(e==null)throw lje(t);return e(t)}};var El;let B$=(El=class{static getId(e,i,r,n){return typeof e=="object"?`${e.level}/${e.row}/${e.col}/${e.world}`:`${e}/${i}/${r}/${n}`}constructor(e,i,r,n){this.set(e,i,r,n)}get key(){return this}get id(){return this.toString()}get normalizedId(){return`${this.level}/${this.row}/${this.col}`}set id(e){this.set(e)}get hash(){const e=4095&this.row,i=4095&this.col,r=63&this.level;return(3&this.world)<<30|i<<22|e<<8|r}acquire(e,i,r,n){this.set(e,i,r,n)}contains(e){const i=e.level-this.level;return i>=0&&this.row===e.row>>i&&this.col===e.col>>i&&this.world===e.world}containsChild(e){const i=e.level-this.level;return i>0&&this.row===e.row>>i&&this.col===e.col>>i&&this.world===e.world}equals(e){return this.level===e.level&&this.row===e.row&&this.col===e.col&&this.world===e.world}clone(){return new El(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(e,i,r,n){if(e==null)this.level=0,this.row=0,this.col=0,this.world=0;else if(typeof e=="object")this.level=e.level||0,this.row=e.row||0,this.col=e.col||0,this.world=e.world||0;else if(typeof e=="string"){const[s,o,a,l]=e.split("/");this.level=parseFloat(s),this.row=parseFloat(o),this.col=parseFloat(a),this.world=parseFloat(l)}else this.level=+e,this.row=+i,this.col=+r,this.world=+n||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new El(this.level-1,this.row>>1,this.col>>1,this.world)}getNormalizedNeighbor(e,i,r){const n=this.clone();return n.col+=e,n.row+=i,r.normalizeKey(n),n}getChildKeys(){const e=this.level+1,i=this.row<<1,r=this.col<<1,n=this.world;return[new El(e,i,r,n),new El(e,i,r+1,n),new El(e,i+1,r,n),new El(e,i+1,r+1,n)]}compareRowMajor(e){return this.row<e.row?-1:this.row>e.row?1:this.col<e.col?-1:this.col>e.col?1:0}},El.pool=new Bg(El,null,null,25,50),El);function b_(t,e){return[t,e]}function Bv(t,e,i){return t[0]=e,t[1]=i,t}function cje(t,e,i,r,n){return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t}const cu=new B$("0/0/0/0");let uje=class uye{static create(e,i,r=null){const n=aa(e.spatialReference),s=i.origin||b_(e.origin.x,e.origin.y),o=b_(e.size[0]*i.resolution,e.size[1]*i.resolution),a=b_(-1/0,-1/0),l=b_(1/0,1/0),c=b_(1/0,1/0);r!=null&&(Bv(a,Math.max(0,Math.floor((r.xmin-s[0])/o[0])),Math.max(0,Math.floor((s[1]-r.ymax)/o[1]))),Bv(l,Math.max(0,Math.floor((r.xmax-s[0])/o[0])),Math.max(0,Math.floor((s[1]-r.ymin)/o[1]))),Bv(c,l[0]-a[0]+1,l[1]-a[1]+1));const{cols:d,rows:f}=i;let y,g,b,_;return!r&&d&&f&&(Bv(a,d[0],f[0]),Bv(l,d[1],f[1]),Bv(c,d[1]-d[0]+1,f[1]-f[0]+1)),e.isWrappable?(y=b_(Math.ceil(Math.round((n.valid[1]-n.valid[0])/i.resolution)/e.size[0]),c[1]),g=!0,b=n.origin,_=n.valid):(y=c,g=!1),new uye(i.level,i.resolution,i.scale,s,a,l,c,o,y,g,b,_)}constructor(e,i,r,n,s,o,a,l,c,d,f,y){this.level=e,this.resolution=i,this.scale=r,this.origin=n,this.first=s,this.last=o,this.size=a,this.norm=l,this.worldSize=c,this.wrap=d,this._spatialReferenceOrigin=f,this._spatialReferenceValid=y}normalizeCol(e){if(!this.wrap)return e;const i=this.worldSize[0];return e<0?i-1-Math.abs((e+1)%i):e%i}normalizeKey(e){if(!this.wrap)return;const i=this.worldSize[0],r=e.col;r<0?(e.col=r+i,e.world-=1):r>=i&&(e.col=r-i,e.world+=1)}denormalizeCol(e,i){return this.wrap?this.worldSize[0]*i+e:e}getWorldForColumn(e){return this.wrap?Math.floor(e/this.worldSize[0]):0}getFirstColumnForWorld(e){return e*this.worldSize[0]+this.first[0]}getLastColumnForWorld(e){return e*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(e){return(e-this.origin[0])/this.norm[0]}getXForColumn(e){const i=this.origin[0]+e*this.norm[0],r=this._spatialReferenceOrigin,n=this._spatialReferenceValid;return this.wrap&&r&&n?i===r[0]?n[0]:this.origin[0]===r[0]&&e===this.worldSize[0]?n[1]:i:i}getRowForY(e){return(this.origin[1]-e)/this.norm[1]}getYForRow(e){return this.origin[1]-e*this.norm[1]}getTileBounds(e,i,r=!1){cu.set(i);const n=r?cu.col:this.denormalizeCol(cu.col,cu.world),s=cu.row;return cje(e,this.getXForColumn(n),this.getYForRow(s+1),this.getXForColumn(n+1),this.getYForRow(s)),e}getTileCoords(e,i,r=!1){cu.set(i);const n=r?cu.col:this.denormalizeCol(cu.col,cu.world);return Array.isArray(e)?Bv(e,this.getXForColumn(n),this.getYForRow(cu.row)):(e.x=this.getXForColumn(n),e.y=this.getYForRow(cu.row)),e}};var Zb;let Jq=(Zb=class{constructor(){this.spans=[]}acquire(e){this.lodInfo=e}release(){this.lodInfo=null,this.spans.length=0}*keys(){const e=this.lodInfo;for(const{row:i,colFrom:r,colTo:n}of this.spans)for(let s=r;s<=n;s++){const o=e.getWorldForColumn(s);yield new B$(e.level,i,e.normalizeCol(s),o)}}forEach(e,i){const{spans:r,lodInfo:n}=this,{level:s}=n;if(r.length!==0)for(const{row:o,colFrom:a,colTo:l}of r)for(let c=a;c<=l;c++)e.call(i,s,o,n.normalizeCol(c),n.getWorldForColumn(c))}},Zb.pool=new Bg(Zb),Zb),n4=class{constructor(e,i,r){this.row=e,this.colFrom=i,this.colTo=r}};const Pr=new B$("0/0/0/0");let dje=class dye{static create(e,i){e[1]>i[1]&&([e,i]=[i,e]);const[r,n]=e,[s,o]=i,a=s-r,l=o-n,c=l!==0?a/l:0,d=(Math.ceil(n)-n)*c,f=(Math.floor(n)-n)*c;return new dye(r,Math.floor(n),Math.ceil(o),c,a<0?d:f,a<0?f:d,a<0?s:r,a<0?r:s)}constructor(e,i,r,n,s,o,a,l){this.x=e,this.ymin=i,this.ymax=r,this.invM=n,this.leftAdjust=s,this.rightAdjust=o,this.leftBound=a,this.rightBound=l}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}};const al=[[0,0],[0,0],[0,0],[0,0]],hje=1e-6;let pje=class{constructor(e,i=null,r=e.lods[0].level,n=e.lods[e.lods.length-1].level){this.tileInfo=e,this.fullExtent=i,this.scales=[],this._infoByScale={},this._infoByLevel={};const s=e.lods.filter((a=>a.level>=r&&a.level<=n));this.minScale=s[0].scale,this.maxScale=s[s.length-1].scale;const o=this._lodInfos=s.map((a=>uje.create(e,a,i)));s.forEach(((a,l)=>{this._infoByLevel[a.level]=o[l],this._infoByScale[a.scale]=o[l],this.scales[l]=a.scale}),this),this._wrap=e.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(e){return this._infoByLevel[typeof e=="number"?e:e.level]}getTileBounds(e,i,r=!1){Pr.set(i);const n=this._infoByLevel[Pr.level];return n?n.getTileBounds(e,Pr,r):e}getTileCoords(e,i,r=!1){Pr.set(i);const n=this._infoByLevel[Pr.level];return n?n.getTileCoords(e,Pr,r):e}getTileCoverage(e,i=192,r=!0,n="closest"){if(!r&&(e.scale>this.minScale||e.scale<this.maxScale))return null;const s=n==="closest"?this.getClosestInfoForScale(e.scale):this.getSmallestInfoForScale(e.scale),o=Jq.pool.acquire(s),a=this._wrap;let l,c,d,f=1/0,y=-1/0;const g=o.spans;al[0][0]=al[0][1]=al[1][1]=al[3][0]=-i,al[1][0]=al[2][0]=e.size[0]+i,al[2][1]=al[3][1]=e.size[1]+i;for(const E of al)e.toMap(E,E),E[0]=s.getColumnForX(E[0]),E[1]=s.getRowForY(E[1]);const b=[];let _=3;for(let E=0;E<4;E++){if(al[E][1]===al[_][1]){_=E;continue}const C=dje.create(al[E],al[_]);f=Math.min(C.ymin,f),y=Math.max(C.ymax,y),b[C.ymin]===void 0&&(b[C.ymin]=[]),b[C.ymin].push(C),_=E}if(f==null||y==null||y-f>100)return null;let x=[];for(l=f;l<y;){b[l]!=null&&(x=x.concat(b[l])),c=1/0,d=-1/0;for(let E=x.length-1;E>=0;E--){const C=x[E];c=Math.min(c,C.getLeftCol()),d=Math.max(d,C.getRightCol())}if(c=Math.floor(c),d=Math.floor(d),l>=s.first[1]&&l<=s.last[1])if(a)if(s.size[0]<s.worldSize[0]){const E=Math.floor(d/s.worldSize[0]);for(let C=Math.floor(c/s.worldSize[0]);C<=E;C++)g.push(new n4(l,Math.max(s.getFirstColumnForWorld(C),c),Math.min(s.getLastColumnForWorld(C),d)))}else g.push(new n4(l,c,d));else c>s.last[0]||d<s.first[0]||(c=Math.max(c,s.first[0]),d=Math.min(d,s.last[0]),g.push(new n4(l,c,d)));l+=1;for(let E=x.length-1;E>=0;E--){const C=x[E];C.ymax>=l?C.incrRow():x.splice(E,1)}}return o}getTileParentId(e){Pr.set(e);const i=this._infoByLevel[Pr.level],r=this._lodInfos.indexOf(i)-1;return r<0?null:(this._getTileIdAtLOD(Pr,this._lodInfos[r],Pr),Pr.id)}getTileResolution(e){const i=this._infoByLevel[typeof e=="object"?e.level:e];return i?i.resolution:-1}getTileScale(e){const i=this._infoByLevel[e.level];return i?i.scale:-1}intersects(e,i){Pr.set(i);const r=this._infoByLevel[Pr.level],n=e.lodInfo;if(n.resolution>r.resolution){this._getTileIdAtLOD(Pr,n,Pr);const o=n.denormalizeCol(Pr.col,Pr.world);for(const a of e.spans)if(a.row===Pr.row&&a.colFrom<=o&&a.colTo>=o)return!0}if(n.resolution<r.resolution){const[o,a,l,c]=e.spans.reduce(((_,x)=>(_[0]=Math.min(_[0],x.row),_[1]=Math.max(_[1],x.row),_[2]=Math.min(_[2],x.colFrom),_[3]=Math.max(_[3],x.colTo),_)),[1/0,-1/0,1/0,-1/0]),d=r.denormalizeCol(Pr.col,Pr.world),f=n.getColumnForX(r.getXForColumn(d)),y=n.getRowForY(r.getYForRow(Pr.row)),g=n.getColumnForX(r.getXForColumn(d+1))-1,b=n.getRowForY(r.getYForRow(Pr.row+1))-1;return!(f>c||g<l||y>a||b<o)}const s=n.denormalizeCol(Pr.col,Pr.world);return e.spans.some((o=>o.row===Pr.row&&o.colFrom<=s&&o.colTo>=s))}normalizeBounds(e,i,r){if(e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],this._wrap){const n=aa(this.tileInfo.spatialReference),s=-r*(n.valid[1]-n.valid[0]);e[0]+=s,e[2]+=s}return e}getSmallestInfoForScale(e){const i=this.scales;if(this._infoByScale[e])return this._infoByScale[e];if(e>i[0])return this._infoByScale[i[0]];for(let r=1;r<i.length-1;r++)if(e>i[r]+hje)return this._infoByScale[i[r-1]];return this._infoByScale[i[i.length-1]]}getClosestInfoForScale(e){const i=this.scales;return this._infoByScale[e]||(e=i.reduce(((r,n)=>Math.abs(n-e)<Math.abs(r-e)?n:r),i[0])),this._infoByScale[e]}scaleToLevel(e){const i=this.scales;if(this._infoByScale[e])return this._infoByScale[e].level;for(let r=i.length-1;r>=0;r--)if(e<i[r])return r===i.length-1?this._infoByScale[i[i.length-1]].level:this._infoByScale[i[r]].level+(i[r]-e)/(i[r]-i[r+1]);return this._infoByScale[i[0]].level}scaleToZoom(e){return this.tileInfo.scaleToZoom(e)}zoomToScale(e){return this.tileInfo.zoomToScale(e)}_getTileIdAtLOD(e,i,r){const n=this._infoByLevel[r.level];return e.set(r),i.resolution<n.resolution?null:(i.resolution===n.resolution||(e.level=i.level,e.col=Math.floor(r.col*n.resolution/i.resolution+.01),e.row=Math.floor(r.row*n.resolution/i.resolution+.01)),e)}},fje=class{constructor(e,i){this.item=e,this.controller=i,this.promise=null}},mje=class{constructor(e){this._schedule=null,this._task=null,this._deferreds=new fC,this._controllers=new fC,this._processingItems=new fC,this._pausedSignal=Kb(!1),this.concurrency=1,e.concurrency&&(this.concurrency=e.concurrency),this._queue=new YC(e.peeker),this.process=e.process;const i=e.scheduler;e.priority&&i&&(this._task=i.registerTask(e.priority,this))}destroy(){this.clear(),this._schedule=Nr(this._schedule),this._task=Nr(this._task)}get updating(){var e;return!!((e=this._task)!=null&&e.updating)||this.running}get length(){return this._processingItems.size+this._queue.length}abort(e){const i=this._controllers.get(e);i&&i.abort()}clear(){this._queue.clear();const e=[];this._controllers.forEach((i=>e.push(i))),this._controllers.clear(),e.forEach((i=>i.abort())),this._processingItems.clear(),this._cancelNext()}forEach(e){this._deferreds.forEach(((i,r)=>e(r)))}get(e){const i=this._deferreds.get(e);return i?i.promise:void 0}isOngoing(e){return this._processingItems.has(e)}has(e){return this._deferreds.has(e)}pause(){this._pausedSignal.value||(this._pausedSignal.value=!0,this._cancelNext())}push(e,i){const r=this.get(e);if(r)return r;const n=new AbortController;let s=null;i&&(s=ed(i,(()=>n.abort())));const o=()=>{const d=this._processingItems.get(e);d&&d.controller.abort(),a(),c.reject(fr())},a=()=>{l.remove(),s!=null&&s.remove(),this._removeItem(e),this._queue.remove(e),this._scheduleNext()},l=K7(n.signal,o),c=Nl();return this._deferreds.set(e,c),this._controllers.set(e,n),c.promise.then(a,a),this._queue.push(e),this._scheduleNext(),c.promise}last(){return this._queue.last()}lastPromise(){const e=this.last();return e?this.get(e):null}peek(){return this._queue.peek()}popLast(){var i;const e=this._queue.popLast();return e&&((i=this._deferreds.get(e))==null||i.reject(fr()),this._removeItem(e)),e}reset(){const e=Array.from(this._processingItems.values());this._processingItems.clear();for(const i of e)this._queue.push(i.item),i.controller.abort();this._scheduleNext()}resume(){this._pausedSignal.value&&(this._pausedSignal.value=!1,this._scheduleNext())}takeAll(){const e=[];for(;this._queue.length;)e.push(this._queue.pop());return this.clear(),e}get running(){return!this._pausedSignal.value&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(e){for(;!e.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),e.madeProgress()}_removeItem(e){this._deferreds.delete(e),this._controllers.delete(e),this._processingItems.delete(e)}_scheduleNext(){this._task||this._pausedSignal.value||this._schedule||(this._schedule=o2((()=>{this._schedule=null,this._next()})))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(e,i){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).resolve(i))}_processError(e,i){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).reject(i))}_canProcessFulfillment(e){return!!this._deferreds.get(e.item)&&this._processingItems.get(e.item)===e}_process(e){if(e==null)return;let i;const r=new AbortController,n=new fje(e,r);this._processingItems.set(e,n);try{i=this.process(e,r.signal)}catch(s){this._processError(n,s)}gp(i)?(n.promise=i,i.then((s=>this._processResult(n,s)),(s=>this._processError(n,s)))):this._processResult(n,i)}get test(){}};const ree=[0,0];let Qp=class extends tt{constructor(e){super(e),this._keyToItem=new Map,this._tilesByScale=new Map,this.concurrency=6}initialize(){const{concurrency:e,process:i,scheduler:r,priority:n}=this;this._queue=new mje({concurrency:e,scheduler:r,priority:n,process:(s,o)=>{const a=this._keyToItem.get(s);return i(a,{signal:o})},peeker:s=>this._peek(s)})}destroy(){this.clear(),this._queue=hr(this._queue)}get length(){return this._queue?this._queue.length:0}abort(e){const i=typeof e=="string"?e:e.id;this._queue.abort(i)}clear(){this._queue.clear(),this._keyToItem.clear(),this._tilesByScale.clear()}has(e){return typeof e=="string"?this._keyToItem.has(e):this._keyToItem.has(e.id)}pause(){this._queue.pause()}push(e){const i=e.key.id;if(this._queue.has(i))return this._queue.get(i);const r=this._queue.push(i),n=this.tileInfoView.getTileScale(e.key),s=lm(this._tilesByScale,n,(()=>new Set)),o=()=>{s.delete(e.key),s.size===0&&this._tilesByScale.delete(n),this._keyToItem.delete(i)};return s.add(e.key),this._keyToItem.set(i,e),r.then(o,o),r}reset(){this._queue.reset()}resume(){this._queue.resume()}_peek(e){if(!this.state)return e.values().next().value;const i=new Set;for(const o of e)i.add(this._keyToItem.get(o).key);const r=this.state.scale;let n,s=Number.POSITIVE_INFINITY;for(const[o,a]of this._tilesByScale)if(Cle(a,(l=>i.has(l)))){const l=Math.abs(o-r);l<s&&(n=a,s=l)}return this._getClosestTileKey(n,e).id}_getClosestTileKey(e,i){const r=this.tileInfoView,n=this.state.center;let s,o=Number.POSITIVE_INFINITY;for(const a of e)if(i.has(a.id)){r.getTileCoords(ree,a);const l=SN(ree,n);l<o&&(o=l,s=a)}return s}};u([h({constructOnly:!0})],Qp.prototype,"concurrency",void 0),u([h({constructOnly:!0})],Qp.prototype,"priority",void 0),u([h({constructOnly:!0})],Qp.prototype,"process",void 0),u([h({constructOnly:!0})],Qp.prototype,"scheduler",void 0),u([h()],Qp.prototype,"state",void 0),u([h({constructOnly:!0})],Qp.prototype,"tileInfoView",void 0),Qp=u([V("esri.views.2d.tiling.TileQueue")],Qp);const Ngt=Qp;let yje=class{constructor(e,i,r){this.maxSize=e,this._tileInfoView=i,this._removedFunc=r,this._tilePerId=new Map,this._tileKeysPerLevel=[]}clear(){this._tilePerId.clear(),this._tileKeysPerLevel=[]}has(e){return this._tilePerId.has(e)}get(e){return this._tilePerId.get(e)}pop(e){const i=this._tilePerId.get(e);if(!i)return;const r=i.key.level,n=this._tileKeysPerLevel[r];nee(this._tilePerId,e);for(let s=0;s<n.length;s++)if(n[s].id===e){n.splice(s,1);break}return i.visible=!0,i}add(e){e.visible=!1;const i=e.key,r=i.id;if(this._tilePerId.has(r))return;this._tilePerId.set(r,e);const n=i.level;this._tileKeysPerLevel[n]||(this._tileKeysPerLevel[n]=[]),this._tileKeysPerLevel[n].push(i)}prune(e,i,r){let n=this._tilePerId.size;if(n<=this.maxSize)return;let s=this._tileKeysPerLevel.length-1;for(;n>this.maxSize&&s>=0;)s!==e&&(n=this._pruneAroundCenterTile(n,i,r,s)),s--;n>this.maxSize&&(n=this._pruneAroundCenterTile(n,i,r,e))}_pruneAroundCenterTile(e,i,r,n){const s=this._tileKeysPerLevel[n];if(!s||s.length===0)return e;const{size:o,origin:a}=this._tileInfoView.tileInfo,l=r*o[0],c=r*o[1],d=[0,0],f=[0,0];for(s.sort(((y,g)=>(d[0]=a.x+l*(y.col+.5),d[1]=a.y-c*(y.row+.5),f[0]=a.x+l*(g.col+.5),f[1]=a.y-c*(g.row+.5),_O(d,i)-_O(f,i))));s.length>0;){const y=s.pop();if(this._removeTile(y.id),--e===this.maxSize)break}return e}_removeTile(e){const i=this._tilePerId.get(e);this._removedFunc&&i&&this._removedFunc(i),nee(this._tilePerId,e)}};function nee(t,e){t.delete(e)}const Gv=new B$(0,0,0,0),Lp=new Map,tE=[],s4=[];let zgt=class{constructor(e){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=e.acquireTile,this.releaseTile=e.releaseTile,this.tileInfoView=e.tileInfoView,e.resampling!=null&&(this.resampling=e.resampling),e.cachePolicy&&(this.cachePolicy=e.cachePolicy),e.coveragePolicy&&(this.coveragePolicy=e.coveragePolicy),e.buffer!=null&&(this.buffer=e.buffer),e.cacheSize&&(this._tileCache=new yje(e.cacheSize,this.tileInfoView,(i=>{this.releaseTile(i)})))}destroy(){this.tileIndex.clear()}update(e){var E,C;const{resampling:i,tileIndex:r}=this,{scale:n,center:s,resolution:o}=e.state,{minScale:a,maxScale:l}=this.tileInfoView,c=!e.stationary&&n>this._previousScale;if(this._previousScale=n,!i&&(n>a||n<l))return this.tiles.length=0,void this.clear();const d=this.tileInfoView.getTileCoverage(e.state,this.buffer,this.resampling,this.coveragePolicy);if(!d)return this.tiles.length=0,void this.clear();const{spans:f,lodInfo:y}=d,{level:g}=y;this.tiles.length=0,r.forEach((k=>k.visible=!0));let b=0,_=0;if(f.length>0)for(const{row:k,colFrom:O,colTo:D}of f)for(let B=O;B<=D;B++){b++;const j=Gv.set(g,k,y.normalizeCol(B),y.getWorldForColumn(B)).id;let Z=r.get(j);if(Z)Z.isReady?(Lp.set(j,Z),_++):c||this._addParentTile(j,Lp);else{if((E=this._tileCache)!=null&&E.has(j)){if(Z=this._tileCache.pop(j),this.tileIndex.set(j,Z),Z.isReady){Lp.set(j,Z),_++;continue}}else Z=this.acquireTile(Gv),this.tileIndex.set(j,Z);c||this._addParentTile(j,Lp)}}const x=_===b;for(const[k,O]of r){if(Lp.has(k))continue;Gv.set(k);const D=this.tileInfoView.intersects(d,Gv),B=this.cachePolicy==="purge"?Gv.level!==g:Gv.level>g;!D||!c&&x?!B&&D||tE.push(O):O.isReady?B&&this.cachePolicy==="purge"&&this._hasReadyAncestor(Gv,g)?tE.push(O):s4.push(O):B&&tE.push(O)}for(const k of s4)k.isReady&&Lp.set(k.key.id,k);for(const k of tE)this._tileCache?this._tileCache.add(k):this.releaseTile(k),r.delete(k.key.id);for(const k of Lp.values())this.tiles.push(k);for(const k of r.values())Lp.has(k.key.id)||(k.visible=!1);(C=this._tileCache)==null||C.prune(g,s,o),Jq.pool.release(d),s4.length=0,tE.length=0,Lp.clear()}clear(){const{tileIndex:e}=this;for(const i of e.values())this.releaseTile(i);e.clear()}refresh(e){var i;for(const r of this.tileIndex.values())e(r);(i=this._tileCache)==null||i.clear()}updateCacheSize(e){this._tileCache&&(this._tileCache.maxSize=e)}_addParentTile(e,i){var s;let r=e,n=null;for(;r=this.tileInfoView.getTileParentId(r),r;)if(this.tileIndex.has(r)){if(n=this.tileIndex.get(r),n==null?void 0:n.isReady){i.has(n.key.id)||i.set(n.key.id,n);break}}else if((s=this._tileCache)!=null&&s.has(r)&&(n=this._tileCache.pop(r),this.tileIndex.set(r,n),n==null?void 0:n.isReady)){i.has(n.key.id)||i.set(n.key.id,n);break}}_hasReadyAncestor(e,i){const r=_n();this.tileInfoView.getTileBounds(r,e,!0);for(const n of this.tileIndex.values())if(n.isReady&&n.key.level>=i&&n.key.level<e.level){const s=_n();if(this.tileInfoView.getTileBounds(s,n.key,!0),PMe(s,r))return!0}return!1}},gje=class{constructor(e,i={}){this.events=new ad,this._hasMajorPerformanceCaveat=!1,this._lastRenderFrameCounter=0,e!=null?(this._canvas=document.createElement("canvas"),this._canvas.setAttribute("style","width: 100%; height:100%; display:block; willChange:transform"),e.contains(this._canvas)||e.appendChild(this._canvas)):i.canvas!=null&&(this._canvas=i.canvas);const r={failIfMajorPerformanceCaveat:!0,alpha:!0,antialias:!1,depth:!0,stencil:!0,powerPreference:"high-performance"};let n=this._canvas.getContext("webgl2",r);n||(n=this._canvas.getContext("webgl2",{...r,failIfMajorPerformanceCaveat:!1}),this._hasMajorPerformanceCaveat=!0),this._gl=n,this._handles=yw([$$(this._canvas,"webglcontextlost",(s=>this.events.emit("webgl-context-lost",s)))])}destroy(){this._canvas.remove(),this._canvas=null,this._handles.remove(),this._gl=null}get gl(){return this._gl}get canvas(){return this._canvas}render(e,i){if(this._hasMajorPerformanceCaveat||fe("esri-force-performance-mode")){if(++this._lastRenderFrameCounter>=fe("esri-performance-mode-frames-between-render")&&(i(),this._lastRenderViewState=e.state.clone(),this._lastRenderFrameCounter=0),this._lastRenderViewState){const[r,n,s,o,a,l]=this._computeViewTransform(this._lastRenderViewState,e.state);this._canvas.style.transform=`matrix(${r}, ${n}, ${s}, ${o}, ${a}, ${l})`}}else i()}resize(e){const i=this._canvas,r=i.style,{state:{size:n},pixelRatio:s}=e,o=n[0],a=n[1],l=Math.round(o*s),c=Math.round(a*s);i.width===l&&i.height===c||(i.width=l,i.height=c),r.width=o+"px",r.height=a+"px"}_computeViewTransform(e,i){const[r,n]=e.center,[s,o]=i.center,[a,l]=e.toScreen([0,0],s,o),[c,d]=e.toScreen([0,0],r,n),f=c-a,y=d-l,g=e.scale/i.scale,b=i.rotation-e.rotation,_=ip();return E2(_),I2(_,_,[g,g]),Dg(_,_,k$(b)),tp(_,_,[f,y]),_}};function vje(t,e,i,r,n){hye(t,e,i||0,r||t.length-1,n||bje)}function hye(t,e,i,r,n){for(;r>i;){if(r-i>600){var s=r-i+1,o=e-i+1,a=Math.log(s),l=.5*Math.exp(2*a/3),c=.5*Math.sqrt(a*l*(s-l)/s)*(o-s/2<0?-1:1);hye(t,e,Math.max(i,Math.floor(e-o*l/s+c)),Math.min(r,Math.floor(e+(s-o)*l/s+c)),n)}var d=t[e],f=i,y=r;for(iE(t,i,e),n(t[r],d)>0&&iE(t,i,r);f<y;){for(iE(t,f,y),f++,y--;n(t[f],d)<0;)f++;for(;n(t[y],d)>0;)y--}n(t[i],d)===0?iE(t,i,y):iE(t,++y,r),y<=e&&(i=y+1),e<=y&&(r=y-1)}}function iE(t,e,i){var r=t[e];t[e]=t[i],t[i]=r}function bje(t,e){return t<e?-1:t>e?1:0}function OO(t,e){if(!(this instanceof OO))return new OO(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&(typeof e=="function"?this.toBBox=e:this._initFormat(e)),this.clear()}function wje(t,e,i){if(!i)return e.indexOf(t);for(var r=0;r<e.length;r++)if(i(t,e[r]))return r;return-1}function w_(t,e){cI(t,0,t.children.length,e,t)}function cI(t,e,i,r,n){n||(n=t1(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(var s,o=e;o<i;o++)s=t.children[o],uI(n,t.leaf?r(s):s);return n}function uI(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function see(t,e){return t.minX-e.minX}function oee(t,e){return t.minY-e.minY}function o4(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function CP(t){return t.maxX-t.minX+(t.maxY-t.minY)}function _je(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function xje(t,e){var i=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),n=Math.min(t.maxX,e.maxX),s=Math.min(t.maxY,e.maxY);return Math.max(0,n-i)*Math.max(0,s-r)}function a4(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function MP(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function t1(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function aee(t,e,i,r,n){for(var s,o=[e,i];o.length;)(i=o.pop())-(e=o.pop())<=r||(s=e+Math.ceil((i-e)/r/2)*r,vje(t,s,e,i,n),o.push(e,s,s,i))}OO.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,i=[],r=this.toBBox;if(!MP(t,e))return i;for(var n,s,o,a,l=[];e;){for(n=0,s=e.children.length;n<s;n++)o=e.children[n],MP(t,a=e.leaf?r(o):o)&&(e.leaf?i.push(o):a4(t,a)?this._all(o,i):l.push(o));e=l.pop()}return i},collides:function(t){var e=this.data,i=this.toBBox;if(!MP(t,e))return!1;for(var r,n,s,o,a=[];e;){for(r=0,n=e.children.length;r<n;r++)if(s=e.children[r],MP(t,o=e.leaf?i(s):s)){if(e.leaf||a4(t,o))return!0;a.push(s)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,i=t.length;e<i;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var n=this.data;this.data=r,r=n}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t!=null&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=t1([]),this},remove:function(t,e){if(t==null)return this;for(var i,r,n,s,o=this.data,a=this.toBBox(t),l=[],c=[];o||l.length;){if(o||(o=l.pop(),r=l[l.length-1],i=c.pop(),s=!0),o.leaf&&(n=wje(t,o.children,e))!==-1)return o.children.splice(n,1),l.push(o),this._condense(l),this;s||o.leaf||!a4(o,a)?r?(i++,o=r.children[i],s=!1):o=null:(l.push(o),c.push(i),i=0,r=o,o=o.children[0])}return this},toBBox:function(t){return t},compareMinX:see,compareMinY:oee,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},_build:function(t,e,i,r){var n,s=i-e+1,o=this._maxEntries;if(s<=o)return w_(n=t1(t.slice(e,i+1)),this.toBBox),n;r||(r=Math.ceil(Math.log(s)/Math.log(o)),o=Math.ceil(s/Math.pow(o,r-1))),(n=t1([])).leaf=!1,n.height=r;var a,l,c,d,f=Math.ceil(s/o),y=f*Math.ceil(Math.sqrt(o));for(aee(t,e,i,y,this.compareMinX),a=e;a<=i;a+=y)for(aee(t,a,c=Math.min(a+y-1,i),f,this.compareMinY),l=a;l<=c;l+=f)d=Math.min(l+f-1,c),n.children.push(this._build(t,l,d,r-1));return w_(n,this.toBBox),n},_chooseSubtree:function(t,e,i,r){for(var n,s,o,a,l,c,d,f;r.push(e),!e.leaf&&r.length-1!==i;){for(d=f=1/0,n=0,s=e.children.length;n<s;n++)l=o4(o=e.children[n]),(c=_je(t,o)-l)<f?(f=c,d=l<d?l:d,a=o):c===f&&l<d&&(d=l,a=o);e=a||e.children[0]}return e},_insert:function(t,e,i){var r=this.toBBox,n=i?t:r(t),s=[],o=this._chooseSubtree(n,this.data,e,s);for(o.children.push(t),uI(o,n);e>=0&&s[e].children.length>this._maxEntries;)this._split(s,e),e--;this._adjustParentBBoxes(n,s,e)},_split:function(t,e){var i=t[e],r=i.children.length,n=this._minEntries;this._chooseSplitAxis(i,n,r);var s=this._chooseSplitIndex(i,n,r),o=t1(i.children.splice(s,i.children.length-s));o.height=i.height,o.leaf=i.leaf,w_(i,this.toBBox),w_(o,this.toBBox),e?t[e-1].children.push(o):this._splitRoot(i,o)},_splitRoot:function(t,e){this.data=t1([t,e]),this.data.height=t.height+1,this.data.leaf=!1,w_(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,i){var r,n,s,o,a,l,c,d;for(l=c=1/0,r=e;r<=i-e;r++)o=xje(n=cI(t,0,r,this.toBBox),s=cI(t,r,i,this.toBBox)),a=o4(n)+o4(s),o<l?(l=o,d=r,c=a<c?a:c):o===l&&a<c&&(c=a,d=r);return d},_chooseSplitAxis:function(t,e,i){var r=t.leaf?this.compareMinX:see,n=t.leaf?this.compareMinY:oee;this._allDistMargin(t,e,i,r)<this._allDistMargin(t,e,i,n)&&t.children.sort(r)},_allDistMargin:function(t,e,i,r){t.children.sort(r);var n,s,o=this.toBBox,a=cI(t,0,e,o),l=cI(t,i-e,i,o),c=CP(a)+CP(l);for(n=e;n<i-e;n++)s=t.children[n],uI(a,t.leaf?o(s):s),c+=CP(a);for(n=i-e-1;n>=e;n--)s=t.children[n],uI(l,t.leaf?o(s):s),c+=CP(l);return c},_adjustParentBBoxes:function(t,e,i){for(var r=i;r>=0;r--)uI(e[r],t)},_condense:function(t){for(var e,i=t.length-1;i>=0;i--)t[i].children.length===0?i>0?(e=t[i-1].children).splice(e.indexOf(t[i]),1):this.clear():w_(t[i],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};function Sje(t,{timeZone:e,timeExtent:i}){return{$view:{scale:t,timeZone:e,timeProperties:{currentStart:i==null?void 0:i.start,currentEnd:i==null?void 0:i.end}}}}let lee=class pye{constructor(e,i){this.key=new B$(0,0,0,0),this.bounds=_n(),this.objectIds=new Set,this.key.set(i);const r=e.getLODInfoAt(this.key);this.tileInfoView=e,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=r.resolution,this.level=r.level,this.scale=r.scale,this.minScale=e.zoomToScale(r.level-1),this.maxScale=e.zoomToScale(r.level+1)}get lod(){return this.tileInfoView.getLODInfoAt(this.key)}get id(){return this.key.id}get extent(){return CMe(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createArcadeEvaluationOptions(e){return Sje(this.scale,e)}createChildTiles(){const e=this.key.getChildKeys(),i=ra.acquire();for(let r=0;r<e.length;r++)i[r]=new pye(this.tileInfoView,e[r]);return i}getQuantizationParameters(){return Ry.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}};const qv={added:[],removed:[]},l4=new Set,$je=new B$(0,0,0,0);function Tje(t,e){const i=aa(e);if(!i)return null;const[r,n]=i.valid;return t[2]>n?[_n([t[0],t[1],n,t[3]]),_n([r,t[1],r+t[2]-n,t[3]])]:t[0]<r?[_n([r,t[1],t[2],t[3]]),_n([n-(r-t[0]),t[1],n,t[3]])]:null}let Eje=class extends ad{constructor(e){super(),this._tiles=new Map,this._index=OO(9,fe("esri-csp-restrictions")?i=>({minX:i.bounds[0],minY:i.bounds[1],maxX:i.bounds[2],maxY:i.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=e}destroy(){this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(e){return this._tiles.has(e)}get(e){return this._tiles.get(e)}getIntersectingTiles(e){if(!e||YF(e)===0||XF(e)===0)return[];const i=Tje(e,this.tileScheme.spatialReference);return i!=null?[...new Set([...this.boundsIntersections(i[0]),...this.boundsIntersections(i[1])])]:this.boundsIntersections(e)}boundsIntersections(e){return this._index.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]})}updateTiles(e){const i={added:[],removed:[]};for(const r of e.added)if(!this.has(r)){const n=new lee(this.tileScheme,r);this._tiles.set(r,n),this._index.insert(n),i.added.push(n)}for(const r of e.removed)if(this.has(r)){const n=this.get(r);this._tiles.delete(r),this._index.remove(n),i.removed.push(n)}this.tiles.length=0,this._tiles.forEach((r=>this.tiles.push(r))),(i.added.length||i.removed.length)&&this.emit("update",i)}setViewState(e){const i=this.tileScheme.getTileCoverage(e,0);if(!i)return;const{spans:r,lodInfo:n}=i,{level:s}=n;if(r.length>0)for(const{row:o,colFrom:a,colTo:l}of r)for(let c=a;c<=l;c++){const d=$je.set(s,o,n.normalizeCol(c),n.getWorldForColumn(c)).id;if(l4.add(d),!this.has(d)){const f=new lee(this.tileScheme,d);this._tiles.set(d,f),this._index.insert(f),this.tiles.push(f),qv.added.push(f)}}for(let o=this.tiles.length-1;o>=0;o--){const a=this.tiles[o];l4.has(a.id)||(this._tiles.delete(a.id),this.tiles.splice(o,1),this._index.remove(a),qv.removed.push(a))}(qv.added.length||qv.removed.length)&&this.emit("update",qv),Jq.pool.release(i),l4.clear(),qv.added.length=0,qv.removed.length=0}};const Bgt=1e-30,ix=512,kP=16777216,Ggt=8,fye=29,mye=24,qgt=4,Hgt=0,Wgt=0,Zgt=0,Jgt=1,Ygt=2,Xgt=3,Kgt=4,Qgt=5,evt=6,tvt=12,ivt=13,rvt=5,Ije=6,nvt=5,svt=6;var cee;(function(t){t[t.FilterFlags=0]="FilterFlags",t[t.Animation=1]="Animation",t[t.GPGPU=2]="GPGPU",t[t.VV=3]="VV",t[t.DD0=4]="DD0",t[t.DD1=5]="DD1",t[t.DD2=6]="DD2",t[t.LocalTimeOrigin=7]="LocalTimeOrigin"})(cee||(cee={}));const yye=6,Cje=1<<yye,ovt=Cje<<1,avt=1.05,lvt=3,cvt=1,Mje=3,kje=3,uvt=5,dvt=6,hvt=1.15,Pje=4,pvt=128,Aje=256,fvt=Aje-2*Pje,mvt=2,yvt=128,gye=1,gvt=10,Lje=1024,vvt=128,bvt=4,wvt=1,_vt=1<<20,xvt=.75,Svt=10,$vt=.75,Tvt=256,Rje=32,Oje=512,Evt=0,Ivt=1,Fje=1,Cvt=[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],Mvt=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],rE=256;var uee,dee,hee,pee,fee,vB,mee,yee,Yd,bB,gC,jr,FO,Ic,wB,Bn,gt,NO,l$,Db,_B,lM,gee,vee,bee;(function(t){t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL",t[t.COLOR=16384]="COLOR"})(uee||(uee={})),(function(t){t[t.COLOR=6144]="COLOR",t[t.DEPTH=6145]="DEPTH",t[t.STENCIL=6146]="STENCIL",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(dee||(dee={})),(function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(hee||(hee={})),(function(t){t[t.ZERO=0]="ZERO",t[t.ONE=1]="ONE",t[t.SRC_COLOR=768]="SRC_COLOR",t[t.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",t[t.SRC_ALPHA=770]="SRC_ALPHA",t[t.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",t[t.DST_ALPHA=772]="DST_ALPHA",t[t.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",t[t.DST_COLOR=774]="DST_COLOR",t[t.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",t[t.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",t[t.CONSTANT_COLOR=32769]="CONSTANT_COLOR",t[t.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",t[t.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",t[t.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA"})(pee||(pee={})),(function(t){t[t.ADD=32774]="ADD",t[t.MIN=32775]="MIN",t[t.MAX=32776]="MAX",t[t.SUBTRACT=32778]="SUBTRACT",t[t.REVERSE_SUBTRACT=32779]="REVERSE_SUBTRACT"})(fee||(fee={})),(function(t){t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",t[t.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER",t[t.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER",t[t.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER",t[t.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER",t[t.TRANSFORM_FEEDBACK_BUFFER=35982]="TRANSFORM_FEEDBACK_BUFFER"})(vB||(vB={})),(function(t){t[t.FRONT=1028]="FRONT",t[t.BACK=1029]="BACK",t[t.FRONT_AND_BACK=1032]="FRONT_AND_BACK"})(mee||(mee={})),(function(t){t[t.CW=2304]="CW",t[t.CCW=2305]="CCW"})(yee||(yee={})),(function(t){t[t.BYTE=5120]="BYTE",t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.SHORT=5122]="SHORT",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.INT=5124]="INT",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.FLOAT=5126]="FLOAT",t[t.HALF_FLOAT=5131]="HALF_FLOAT"})(Yd||(Yd={})),(function(t){t[t.NEVER=512]="NEVER",t[t.LESS=513]="LESS",t[t.EQUAL=514]="EQUAL",t[t.LEQUAL=515]="LEQUAL",t[t.GREATER=516]="GREATER",t[t.NOTEQUAL=517]="NOTEQUAL",t[t.GEQUAL=518]="GEQUAL",t[t.ALWAYS=519]="ALWAYS"})(bB||(bB={})),(function(t){t[t.ZERO=0]="ZERO",t[t.KEEP=7680]="KEEP",t[t.REPLACE=7681]="REPLACE",t[t.INCR=7682]="INCR",t[t.DECR=7683]="DECR",t[t.INVERT=5386]="INVERT",t[t.INCR_WRAP=34055]="INCR_WRAP",t[t.DECR_WRAP=34056]="DECR_WRAP"})(gC||(gC={})),(function(t){t[t.NEAREST=9728]="NEAREST",t[t.LINEAR=9729]="LINEAR",t[t.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",t[t.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",t[t.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",t[t.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR"})(jr||(jr={})),(function(t){t[t.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(FO||(FO={})),(function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_3D=32879]="TEXTURE_3D",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY"})(Ic||(Ic={})),(function(t){t[t.MIN_LOD=33082]="MIN_LOD",t[t.MAX_LOD=33083]="MAX_LOD",t[t.BASE_LEVEL=33084]="BASE_LEVEL",t[t.MAX_LEVEL=33085]="MAX_LEVEL",t[t.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE"})(wB||(wB={})),(function(t){t[t.ALPHA=6406]="ALPHA",t[t.RGB=6407]="RGB",t[t.RGBA=6408]="RGBA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.RED=6403]="RED",t[t.RG=33319]="RG",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER"})(Bn||(Bn={})),(function(t){t[t.RGBA4=32854]="RGBA4",t[t.R16F=33325]="R16F",t[t.RG16F=33327]="RG16F",t[t.RGB32F=34837]="RGB32F",t[t.RGBA16F=34842]="RGBA16F",t[t.R32F=33326]="R32F",t[t.RG32F=33328]="RG32F",t[t.RGBA32F=34836]="RGBA32F",t[t.R11F_G11F_B10F=35898]="R11F_G11F_B10F",t[t.RGB8=32849]="RGB8",t[t.RGBA8=32856]="RGBA8",t[t.RGB5_A1=32855]="RGB5_A1",t[t.R8=33321]="R8",t[t.RG8=33323]="RG8",t[t.R8I=33329]="R8I",t[t.R8UI=33330]="R8UI",t[t.R16I=33331]="R16I",t[t.R16UI=33332]="R16UI",t[t.R32I=33333]="R32I",t[t.R32UI=33334]="R32UI",t[t.RG8I=33335]="RG8I",t[t.RG8UI=33336]="RG8UI",t[t.RG16I=33337]="RG16I",t[t.RG16UI=33338]="RG16UI",t[t.RG32I=33339]="RG32I",t[t.RG32UI=33340]="RG32UI",t[t.RGB16F=34843]="RGB16F",t[t.RGB9_E5=35901]="RGB9_E5",t[t.SRGB8=35905]="SRGB8",t[t.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",t[t.RGB565=36194]="RGB565",t[t.RGBA32UI=36208]="RGBA32UI",t[t.RGB32UI=36209]="RGB32UI",t[t.RGBA16UI=36214]="RGBA16UI",t[t.RGB16UI=36215]="RGB16UI",t[t.RGBA8UI=36220]="RGBA8UI",t[t.RGB8UI=36221]="RGB8UI",t[t.RGBA32I=36226]="RGBA32I",t[t.RGB32I=36227]="RGB32I",t[t.RGBA16I=36232]="RGBA16I",t[t.RGB16I=36233]="RGB16I",t[t.RGBA8I=36238]="RGBA8I",t[t.RGB8I=36239]="RGB8I",t[t.R8_SNORM=36756]="R8_SNORM",t[t.RG8_SNORM=36757]="RG8_SNORM",t[t.RGB8_SNORM=36758]="RGB8_SNORM",t[t.RGBA8_SNORM=36759]="RGBA8_SNORM",t[t.RGB10_A2=32857]="RGB10_A2",t[t.RGB10_A2UI=36975]="RGB10_A2UI"})(gt||(gt={})),(function(t){t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(NO||(NO={})),(function(t){t[t.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",t[t.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8"})(l$||(l$={})),(function(t){t[t.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",t[t.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24",t[t.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F"})(Db||(Db={})),(function(t){t[t.STENCIL_INDEX8=36168]="STENCIL_INDEX8"})(_B||(_B={})),(function(t){t[t.FLOAT=5126]="FLOAT",t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.BYTE=5120]="BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.SHORT=5122]="SHORT",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.INT=5124]="INT",t[t.HALF_FLOAT=5131]="HALF_FLOAT",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV"})(lM||(lM={})),(function(t){t[t.STATIC_DRAW=35044]="STATIC_DRAW",t[t.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",t[t.STREAM_DRAW=35040]="STREAM_DRAW",t[t.STATIC_READ=35045]="STATIC_READ",t[t.DYNAMIC_READ=35049]="DYNAMIC_READ",t[t.STREAM_READ=35041]="STREAM_READ",t[t.STATIC_COPY=35046]="STATIC_COPY",t[t.DYNAMIC_COPY=35050]="DYNAMIC_COPY",t[t.STREAM_COPY=35042]="STREAM_COPY"})(gee||(gee={})),(function(t){t[t.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",t[t.VERTEX_SHADER=35633]="VERTEX_SHADER"})(vee||(vee={})),(function(t){t[t.FRAMEBUFFER=36160]="FRAMEBUFFER",t[t.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER",t[t.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER"})(bee||(bee={}));const kvt=33984;var DO,wee;(function(t){t[t.Texture=0]="Texture",t[t.TileTexture=1]="TileTexture",t[t.BufferObject=2]="BufferObject",t[t.VertexArrayObject=3]="VertexArrayObject",t[t.Shader=4]="Shader",t[t.Program=5]="Program",t[t.FramebufferObject=6]="FramebufferObject",t[t.Renderbuffer=7]="Renderbuffer",t[t.TransformFeedback=8]="TransformFeedback",t[t.Sync=9]="Sync",t[t.UNCOUNTED=10]="UNCOUNTED",t[t.LinesOfCode=10]="LinesOfCode",t[t.Uniform=11]="Uniform",t[t.COUNT=12]="COUNT"})(DO||(DO={})),(function(t){t[t.NONE=0]="NONE",t[t.BACK=1029]="BACK"})(wee||(wee={}));const Pvt=36064,Avt=36065,Lvt=36066,Rvt=33306,Ovt=36096,Fvt=36128;var Es,_ee,xee,See,$ee,Tee,Eee,Oy,Iee;(function(t){t[t.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",t[t.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",t[t.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",t[t.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",t[t.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",t[t.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",t[t.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",t[t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",t[t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC"})(Es||(Es={})),(function(t){t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_VEC2=35664]="FLOAT_VEC2",t[t.FLOAT_VEC3=35665]="FLOAT_VEC3",t[t.FLOAT_VEC4=35666]="FLOAT_VEC4",t[t.INT=5124]="INT",t[t.INT_VEC2=35667]="INT_VEC2",t[t.INT_VEC3=35668]="INT_VEC3",t[t.INT_VEC4=35669]="INT_VEC4",t[t.BOOL=35670]="BOOL",t[t.BOOL_VEC2=35671]="BOOL_VEC2",t[t.BOOL_VEC3=35672]="BOOL_VEC3",t[t.BOOL_VEC4=35673]="BOOL_VEC4",t[t.FLOAT_MAT2=35674]="FLOAT_MAT2",t[t.FLOAT_MAT3=35675]="FLOAT_MAT3",t[t.FLOAT_MAT4=35676]="FLOAT_MAT4",t[t.SAMPLER_2D=35678]="SAMPLER_2D",t[t.SAMPLER_CUBE=35680]="SAMPLER_CUBE",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2",t[t.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3",t[t.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4",t[t.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3",t[t.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4",t[t.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2",t[t.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4",t[t.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2",t[t.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3",t[t.SAMPLER_3D=35679]="SAMPLER_3D",t[t.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW",t[t.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY",t[t.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW",t[t.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW",t[t.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D",t[t.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D",t[t.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE",t[t.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY",t[t.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D",t[t.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D",t[t.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE",t[t.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY"})(_ee||(_ee={})),(function(t){t[t.OBJECT_TYPE=37138]="OBJECT_TYPE",t[t.SYNC_CONDITION=37139]="SYNC_CONDITION",t[t.SYNC_STATUS=37140]="SYNC_STATUS",t[t.SYNC_FLAGS=37141]="SYNC_FLAGS"})(xee||(xee={})),(function(t){t[t.UNSIGNALED=37144]="UNSIGNALED",t[t.SIGNALED=37145]="SIGNALED"})(See||(See={})),(function(t){t[t.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED",t[t.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED",t[t.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED",t[t.WAIT_FAILED=37149]="WAIT_FAILED"})($ee||($ee={})),(function(t){t[t.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE"})(Tee||(Tee={})),(function(t){t[t.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT"})(Eee||(Eee={})),(function(t){t[t.INVALID_ENUM=1280]="INVALID_ENUM",t[t.INVALID_VALUE=1281]="INVALID_VALUE",t[t.INVALID_OPERATION=1282]="INVALID_OPERATION",t[t.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",t[t.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",t[t.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL"})(Oy||(Oy={})),(function(t){t[t.COMPLETION_STATUS_KHR=37297]="COMPLETION_STATUS_KHR"})(Iee||(Iee={}));const Nje=()=>Ie.getLogger("esri.views.webgl.checkWebGLError");function Dje(t){switch(t){case Oy.INVALID_ENUM:return"Invalid Enum. An unacceptable value has been specified for an enumerated argument.";case Oy.INVALID_VALUE:return"Invalid Value. A numeric argument is out of range.";case Oy.INVALID_OPERATION:return"Invalid Operation. The specified command is not allowed for the current state.";case Oy.INVALID_FRAMEBUFFER_OPERATION:return"Invalid Framebuffer operation. The currently bound framebuffer is not framebuffer complete when trying to render to or to read from it.";case Oy.OUT_OF_MEMORY:return"Out of memory. Not enough memory is left to execute the command.";case Oy.CONTEXT_LOST_WEBGL:return"WebGL context has been lost";default:return"Unknown error"}}const vye=!!fe("enable-feature:webgl-debug");function bye(){return vye}function Nvt(){return vye}function Hv(t,e=bye()){if(e){const i=t.getError();if(i){const r=Dje(i),n=new Error().stack;Nje().error(new ie("webgl-error","WebGL error occurred",{message:r,stack:n}))}}}var zO;(function(t){t[t.TextureDescriptor=0]="TextureDescriptor",t[t.Texture=1]="Texture",t[t.Renderbuffer=2]="Renderbuffer"})(zO||(zO={}));function zje(t){switch(t){case Yd.BYTE:case Yd.UNSIGNED_BYTE:return 1;case Yd.SHORT:case Yd.UNSIGNED_SHORT:case Yd.HALF_FLOAT:return 2;case Yd.FLOAT:case Yd.INT:case Yd.UNSIGNED_INT:return 4}}function Vje(t){const e=t.gl;switch(e.getError()){case e.NO_ERROR:return null;case e.INVALID_ENUM:return"An unacceptable value has been specified for an enumerated argument";case e.INVALID_VALUE:return"An unacceptable value has been specified for an argument";case e.INVALID_OPERATION:return"The specified command is not allowed for the current state";case e.INVALID_FRAMEBUFFER_OPERATION:return"The currently bound framebuffer is not framebuffer complete";case e.OUT_OF_MEMORY:return"Not enough memory is left to execute the command";case e.CONTEXT_LOST_WEBGL:return"WebGL context is lost"}return"Unknown error"}function Dvt(t,e,i,r,n=0){var o;const s=t.gl;t.bindBuffer(i);for(const a of r){const l=e.get(a.name);if(l==null){console.warn(`There is no location for vertex attribute '${a.name}' defined.`);continue}const c=n*a.stride;if(a.count<=4)s.vertexAttribPointer(l,a.count,a.type,a.normalized,a.stride,a.offset+c),s.enableVertexAttribArray(l),a.divisor>0&&t.gl.vertexAttribDivisor(l,a.divisor);else if(a.count===9)for(let d=0;d<3;d++)s.vertexAttribPointer(l+d,3,a.type,a.normalized,a.stride,a.offset+12*d+c),s.enableVertexAttribArray(l+d),a.divisor>0&&t.gl.vertexAttribDivisor(l+d,a.divisor);else if(a.count===16)for(let d=0;d<4;d++)s.vertexAttribPointer(l+d,4,a.type,a.normalized,a.stride,a.offset+16*d+c),s.enableVertexAttribArray(l+d),a.divisor>0&&((o=t.gl)==null||o.vertexAttribDivisor(l+d,a.divisor));else console.error("Unsupported vertex attribute element count: "+a.count);if(bye()){const d=Vje(t),f=zje(a.type),y=a.offset,g=Math.round(f/y)!==f/y?`. Offset not a multiple of stride. DataType requires ${f} bytes, but descriptor has an offset of ${y}`:"";d&&console.error(`Unable to bind vertex attribute "${a.name}" with baseInstanceOffset ${c}${g}:`,d,a)}}}function zvt(t,e,i,r){var s,o,a;const n=t.gl;t.bindBuffer(i);for(const l of r){const c=e.get(l.name);if(l.count<=4)n.disableVertexAttribArray(c),l.divisor&&l.divisor>0&&((s=t.gl)==null||s.vertexAttribDivisor(c,0));else if(l.count===9)for(let d=0;d<3;d++)n.disableVertexAttribArray(c+d),l.divisor&&l.divisor>0&&((o=t.gl)==null||o.vertexAttribDivisor(c+d,0));else if(l.count===16)for(let d=0;d<4;d++)n.disableVertexAttribArray(c+d),l.divisor&&l.divisor>0&&((a=t.gl)==null||a.vertexAttribDivisor(c+d,0));else console.error("Unsupported vertex attribute element count: "+l.count)}t.unbindBuffer(vB.ARRAY_BUFFER)}function jje(t){switch(t){case Bn.ALPHA:case Bn.LUMINANCE:case Bn.RED:case Bn.RED_INTEGER:case gt.R8:case gt.R8I:case gt.R8UI:case gt.R8_SNORM:case _B.STENCIL_INDEX8:return 1;case Bn.LUMINANCE_ALPHA:case Bn.RG:case Bn.RG_INTEGER:case gt.RGBA4:case gt.R16F:case gt.R16I:case gt.R16UI:case gt.RG8:case gt.RG8I:case gt.RG8UI:case gt.RG8_SNORM:case gt.RGB565:case gt.RGB5_A1:case Db.DEPTH_COMPONENT16:return 2;case Bn.RGB:case Bn.RGB_INTEGER:case gt.RGB8:case gt.RGB8I:case gt.RGB8UI:case gt.RGB8_SNORM:case gt.SRGB8:case Db.DEPTH_COMPONENT24:return 3;case Bn.RGBA:case Bn.RGBA_INTEGER:case gt.RGBA8:case gt.R32F:case gt.R11F_G11F_B10F:case gt.RG16F:case gt.R32I:case gt.R32UI:case gt.RG16I:case gt.RG16UI:case gt.RGBA8I:case gt.RGBA8UI:case gt.RGBA8_SNORM:case gt.SRGB8_ALPHA8:case gt.RGB9_E5:case gt.RGB10_A2UI:case gt.RGB10_A2:case Db.DEPTH_COMPONENT32F:case l$.DEPTH24_STENCIL8:return 4;case l$.DEPTH32F_STENCIL8:return 5;case gt.RGB16F:case gt.RGB16I:case gt.RGB16UI:return 6;case gt.RG32F:case gt.RG32I:case gt.RG32UI:case gt.RGBA16F:case gt.RGBA16I:case gt.RGBA16UI:return 8;case gt.RGB32F:case gt.RGB32I:case gt.RGB32UI:return 12;case gt.RGBA32F:case gt.RGBA32I:case gt.RGBA32UI:return 16;case Es.COMPRESSED_RGB_S3TC_DXT1_EXT:case Es.COMPRESSED_RGBA_S3TC_DXT1_EXT:return .5;case Es.COMPRESSED_RGBA_S3TC_DXT3_EXT:case Es.COMPRESSED_RGBA_S3TC_DXT5_EXT:return 1;case Es.COMPRESSED_R11_EAC:case Es.COMPRESSED_SIGNED_R11_EAC:case Es.COMPRESSED_RGB8_ETC2:case Es.COMPRESSED_SRGB8_ETC2:case Es.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:case Es.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:return .5;case Es.COMPRESSED_RG11_EAC:case Es.COMPRESSED_SIGNED_RG11_EAC:case Es.COMPRESSED_RGBA8_ETC2_EAC:case Es.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:return 1}return 0}let wye=class{constructor(e=0,i=e){this.width=e,this.height=i,this.type=zO.TextureDescriptor,this.target=Ic.TEXTURE_2D,this.pixelFormat=Bn.RGBA,this.dataType=lM.UNSIGNED_BYTE,this.samplingMode=jr.LINEAR,this.wrapMode=FO.REPEAT,this.maxAnisotropy=1,this.flipped=!1,this.hasMipmap=!1,this.isOpaque=!1,this.unpackAlignment=4,this.preMultiplyAlpha=!1,this.compareEnabled=!1,this.linearFilterDepth=!1,this.depth=1,this.isImmutable=!1}};function Uje(t){return t.width<=0||t.height<=0||t.depth<=0?0:Math.round(t.width*t.height*t.depth*(t.hasMipmap?4/3:1)*(t.internalFormat==null?4:jje(t.internalFormat))*(t.target===Ic.TEXTURE_CUBE_MAP?6:1))}const nE=()=>Ie.getLogger("esri/views/webgl/textureUtils");function sE(t){const{width:e,height:i,depth:r}=t;(e!=null&&e<0||i!=null&&i<0||r!=null&&r<0)&&nE().error("Negative dimension parameters are not allowed!");const{internalFormat:n}=t;if(n&&(_ye(n)||xye(n))){const{linearFilterDepth:s,compareEnabled:o,samplingMode:a,hasMipmap:l}=t;l&&nE().error("Depth textures cannot have mipmaps"),s?a!==jr.LINEAR&&a!==jr.NEAREST&&nE().error("Depth textures cannot sample mipmaps"):(a!==jr.NEAREST&&nE().error("Depth textures without filtering must use NEAREST filtering"),o&&nE().error("Depth textures without filtering cannot use compare function"))}}function Bje(t){return t in gt}function _ye(t){return t in Db}function xye(t){return t in l$}function Gje(t){return t!=null&&t in Es}function i1(t){return t!=null&&"type"in t&&t.type==="compressed"}function qje(t){return t!=null&&"byteLength"in t}function Cee(t){return t!=null&&!i1(t)&&!qje(t)}function __(t){return t===Ic.TEXTURE_3D||t===Ic.TEXTURE_2D_ARRAY}function Mee(t,e,i,r=1){let n=Math.max(e,i);return t===Ic.TEXTURE_3D&&(n=Math.max(n,r)),Math.floor(Math.log2(n))+1}function PP(t){if(t.internalFormat!=null)return t.internalFormat;switch(t.dataType){case lM.FLOAT:switch(t.pixelFormat){case Bn.RGBA:return gt.RGBA32F;case Bn.RGB:return gt.RGB32F;default:throw new ie("texture:unknown-format","Unable to derive format")}case lM.UNSIGNED_BYTE:switch(t.pixelFormat){case Bn.RGBA:return gt.RGBA8;case Bn.RGB:return gt.RGB8}}const{pixelFormat:e}=t;return t.internalFormat=e===NO.DEPTH_STENCIL?l$.DEPTH24_STENCIL8:e===NO.DEPTH_COMPONENT?Db.DEPTH_COMPONENT24:e,t.internalFormat}function Hje(t){let e="width"in t?t.width:t.codedWidth,i="height"in t?t.height:t.codedHeight;return t instanceof HTMLVideoElement&&(e=t.videoWidth,i=t.videoHeight),{width:e,height:i,depth:1}}let Wje=class Sye extends wye{constructor(e,i){switch(super(),this.context=e,Object.assign(this,i),this.internalFormat){case gt.R16F:case gt.R32F:case gt.R8_SNORM:case gt.R8:this.pixelFormat=Bn.RED;break;case gt.R8I:case gt.R8UI:case gt.R16I:case gt.R16UI:case gt.R32I:case gt.R32UI:this.pixelFormat=Bn.RED_INTEGER}}static validate(e,i){return new Sye(e,i)}};const Rp=()=>Ie.getLogger("esri/views/webgl/Texture");var Jn;let Zje=(Jn=class{constructor(e,i=null,r=null){if(this.type=zO.Texture,this._glName=null,this._samplingModeDirty=!1,this._wrapModeDirty=!1,this._shadowFilterDirty=!1,this._wasImmutablyAllocated=!1,"context"in e)this._descriptor=e,r=i;else{const n=Wje.validate(e,i);if(!n)throw new ie("texture:invalid-descriptor","Texture descriptor invalid");this._descriptor=n}this._descriptor.target===Ic.TEXTURE_CUBE_MAP?this._setDataCubeMap(r):this.setData(r)}get glName(){return this._glName}get descriptor(){return this._descriptor}get usedMemory(){return Uje(this._descriptor)}get cachedMemory(){return this.usedMemory}get isDirty(){return this._samplingModeDirty||this._wrapModeDirty||this._shadowFilterDirty}get hasWebGLTextureObject(){return!!this._glName}dispose(){this.abortCompression(),this._descriptor.context.gl&&this.hasWebGLTextureObject&&(this._descriptor.context.instanceCounter.decrement(DO.Texture,this),this._descriptor.context.unbindTexture(this),this._descriptor.context.gl.deleteTexture(this._glName),this._glName=null)}release(){this.dispose()}resize(e,i){const r=this._descriptor;if(r.width!==e||r.height!==i){if(this._wasImmutablyAllocated)throw new ie("texture:immutable-resize","Immutable textures can't be resized!");r.width=e,r.height=i,this._descriptor.target===Ic.TEXTURE_CUBE_MAP?this._setDataCubeMap(null):this.setData(null)}}enableCompression(e){this._descriptor.compress=e}disableCompression(){this._descriptor.compress=void 0}setData(e){this.abortCompression(),!i1(e)&&this._descriptor.internalFormat&&this._descriptor.internalFormat in Es&&(this._descriptor.internalFormat=void 0),this._setData(e),!i1(e)&&this._descriptor.compress&&this._compressOnWorker(e)}updateData(e,i,r,n,s,o,a=0){o||Rp().error("An attempt to use uninitialized data!"),this.hasWebGLTextureObject||Rp().error("An attempt to update uninitialized texture!");const l=this._descriptor;l.internalFormat=PP(l);const{context:c,pixelFormat:d,dataType:f,target:y,isImmutable:g}=l;if(g&&!this._wasImmutablyAllocated)throw new ie("texture:uninitialized","Cannot update immutable texture before allocation!");const b=c.bindTexture(this,Jn.TEXTURE_UNIT_FOR_UPDATES,!0);(i<0||r<0||i+n>l.width||r+s>l.height)&&Rp().error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage();const{gl:_}=c;a&&(n&&s||Rp().warn("Must pass width and height if `UNPACK_SKIP_ROWS` is used"),_.pixelStorei(_.UNPACK_SKIP_ROWS,a)),Cee(o)?_.texSubImage2D(y,e,i,r,n,s,d,f,o):i1(o)?_.compressedTexSubImage2D(y,e,i,r,n,s,l.internalFormat,o.levels[e]):_.texSubImage2D(y,e,i,r,n,s,d,f,o),a&&_.pixelStorei(_.UNPACK_SKIP_ROWS,0),c.bindTexture(b,Jn.TEXTURE_UNIT_FOR_UPDATES)}updateData3D(e,i,r,n,s,o,a,l){l||Rp().error("An attempt to use uninitialized data!"),this.hasWebGLTextureObject||Rp().error("An attempt to update an uninitialized texture!");const c=this._descriptor;c.internalFormat=PP(c);const{context:d,pixelFormat:f,dataType:y,isImmutable:g,target:b}=c;if(g&&!this._wasImmutablyAllocated)throw new ie("texture:uninitialized","Cannot update immutable texture before allocation!");__(b)||Rp().warn("Attempting to set 3D texture data on a non-3D texture");const _=d.bindTexture(this,Jn.TEXTURE_UNIT_FOR_UPDATES);d.setActiveTexture(Jn.TEXTURE_UNIT_FOR_UPDATES),(i<0||r<0||n<0||i+s>c.width||r+o>c.height||n+a>c.depth)&&Rp().error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage();const{gl:x}=d;if(i1(l))l=l.levels[e],x.compressedTexSubImage3D(b,e,i,r,n,s,o,a,c.internalFormat,l);else{const E=l;x.texSubImage3D(b,e,i,r,n,s,o,a,f,y,E)}d.bindTexture(_,Jn.TEXTURE_UNIT_FOR_UPDATES)}generateMipmap(){const e=this._descriptor;if(e.width===0||e.height===0)return;if(!e.hasMipmap){if(this._wasImmutablyAllocated)throw new ie("texture:immutable-change","Cannot add mipmaps to immutable texture after allocation");e.hasMipmap=!0,this._samplingModeDirty=!0,sE(e)}e.samplingMode===jr.LINEAR?(this._samplingModeDirty=!0,e.samplingMode=jr.LINEAR_MIPMAP_NEAREST):e.samplingMode===jr.NEAREST&&(this._samplingModeDirty=!0,e.samplingMode=jr.NEAREST_MIPMAP_NEAREST);const i=this._descriptor.context.bindTexture(this,Jn.TEXTURE_UNIT_FOR_UPDATES);this._descriptor.context.setActiveTexture(Jn.TEXTURE_UNIT_FOR_UPDATES),this._descriptor.context.gl.generateMipmap(e.target),this._descriptor.context.bindTexture(i,Jn.TEXTURE_UNIT_FOR_UPDATES)}clearMipmap(){const e=this._descriptor;if(e.hasMipmap){if(this._wasImmutablyAllocated)throw new ie("texture:immutable-change","Cannot delete mipmaps to immutable texture after allocation");e.hasMipmap=!1,this._samplingModeDirty=!0,sE(e)}e.samplingMode===jr.LINEAR_MIPMAP_NEAREST?(this._samplingModeDirty=!0,e.samplingMode=jr.LINEAR):e.samplingMode===jr.NEAREST_MIPMAP_NEAREST&&(this._samplingModeDirty=!0,e.samplingMode=jr.NEAREST)}setSamplingMode(e){e!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=e,this._samplingModeDirty=!0)}setWrapMode(e){e!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=e,sE(this._descriptor),this._wrapModeDirty=!0)}setShadowFiltering(e){e!==this._descriptor.linearFilterDepth&&(this._descriptor.linearFilterDepth=this._descriptor.compareEnabled=e,this.setSamplingMode(e?jr.LINEAR:jr.NEAREST),sE(this._descriptor),this._shadowFilterDirty=!0)}applyChanges(){this._samplingModeDirty&&(this._applySamplingMode(),this._samplingModeDirty=!1),this._wrapModeDirty&&(this._applyWrapMode(),this._wrapModeDirty=!1),this._shadowFilterDirty&&(this._applyShadowMode(),this._shadowFilterDirty=!1)}abortCompression(){this._compressionAbortController=Eo(this._compressionAbortController)}_setData(e,i){var l;const r=this._descriptor,n=(l=r.context)==null?void 0:l.gl;if(!n)return;Hv(n),this.hasWebGLTextureObject||(this._glName=n.createTexture(),r.context.instanceCounter.increment(DO.Texture,this)),sE(r);const s=r.context.bindTexture(this,Jn.TEXTURE_UNIT_FOR_UPDATES);r.context.setActiveTexture(Jn.TEXTURE_UNIT_FOR_UPDATES),this._configurePixelStorage(),Hv(n);const o=i??r.target,a=__(o);if(Cee(e))this._setDataFromTexImageSource(e,o);else{const{width:c,height:d,depth:f}=r;if(c==null||d==null)throw new ie("texture:missing-size","Width and height must be specified!");if(a&&f==null)throw new ie("texture:missing-depth","Depth must be specified!");if(r.internalFormat=PP(r),r.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(o,r.internalFormat,r.hasMipmap,c,d,f),i1(e)){if(!Gje(r.internalFormat))throw new ie("texture:format-mismatch","Attempting to use compressed data with an uncompressed format!");this._setDataFromCompressedSource(e,r.internalFormat,o)}else this._texImage(o,0,r.internalFormat,c,d,f,e),Hv(n),r.hasMipmap&&this.generateMipmap()}this._applySamplingMode(),this._applyWrapMode(),this._applyAnisotropicFilteringParameters(),this._applyShadowMode(),Hv(n),r.context.bindTexture(s,Jn.TEXTURE_UNIT_FOR_UPDATES)}_setDataCubeMap(e=null){for(let i=Ic.TEXTURE_CUBE_MAP_POSITIVE_X;i<=Ic.TEXTURE_CUBE_MAP_NEGATIVE_Z;i++)this._setData(e,i)}_configurePixelStorage(){const e=this._descriptor.context.gl,{unpackAlignment:i,flipped:r,preMultiplyAlpha:n}=this._descriptor;e.pixelStorei(e.UNPACK_ALIGNMENT,i),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,r?1:0),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n?1:0)}_setDataFromTexImageSource(e,i){const{gl:r}=this._descriptor.context,n=this._descriptor;n.internalFormat=PP(n);const s=__(i),{width:o,height:a,depth:l}=Hje(e);n.width&&n.height,n.width||(n.width=o),n.height||(n.height=a),s&&n.depth,s&&(n.depth=l),n.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(i,n.internalFormat,n.hasMipmap,o,a,l),this._texImage(i,0,n.internalFormat,o,a,l,e),Hv(r),n.hasMipmap&&(this.generateMipmap(),Hv(r))}_setDataFromCompressedSource(e,i,r){const n=this._descriptor,{width:s,height:o,depth:a}=n,l=e.levels,c=Mee(r,s,o,a),d=Math.min(c,l.length)-1;this._descriptor.context.gl.texParameteri(n.target,wB.MAX_LEVEL,d),this._forEachMipmapLevel(((f,y,g,b)=>{const _=l[Math.min(f,l.length-1)];this._compressedTexImage(r,f,i,y,g,b,_)}),d)}_texStorage(e,i,r,n,s,o){const{gl:a}=this._descriptor.context;if(!Bje(i)&&!_ye(i)&&!xye(i))throw new ie("texture:missing-format","Immutable textures must have a sized internal format");if(!this._descriptor.isImmutable)return;const l=r?Mee(e,n,s,o):1;if(__(e)){if(o==null)throw new ie("texture:missing-depth","Missing depth dimension for 3D texture upload");a.texStorage3D(e,l,i,n,s,o)}else a.texStorage2D(e,l,i,n,s);this._wasImmutablyAllocated=!0}_texImage(e,i,r,n,s,o,a){const l=this._descriptor.context.gl,c=__(e),{isImmutable:d,pixelFormat:f,dataType:y}=this._descriptor;if(d){if(a!=null){const g=a;if(c){if(o==null)throw new ie("texture:missing-depth","Missing depth dimension for 3D texture upload");l.texSubImage3D(e,i,0,0,0,n,s,o,f,y,g)}else l.texSubImage2D(e,i,0,0,n,s,f,y,g)}}else{const g=a;if(c){if(o==null)throw new ie("texture:missing-depth","Missing depth dimension for 3D texture upload");l.texImage3D(e,i,r,n,s,o,0,f,y,g)}else l.texImage2D(e,i,r,n,s,0,f,y,g)}}_compressedTexImage(e,i,r,n,s,o,a){const l=this._descriptor.context.gl,c=__(e);if(this._descriptor.isImmutable){if(a!=null)if(c){if(o==null)throw new ie("texture:missing-depth","Missing depth dimension for 3D texture upload");l.compressedTexSubImage3D(e,i,0,0,0,n,s,o,r,a)}else l.compressedTexSubImage2D(e,i,0,0,n,s,r,a)}else if(c){if(o==null)throw new ie("texture:missing-depth","Missing depth dimension for 3D texture upload");l.compressedTexImage3D(e,i,r,n,s,o,0,a)}else l.compressedTexImage2D(e,i,r,n,s,0,a)}async _compressOnWorker(e){var g,b,_,x;const{width:i,height:r,context:n,flipped:s,preMultiplyAlpha:o,hasMipmap:a}=this._descriptor,l=(g=this._descriptor.compress)==null?void 0:g.compressionTracker,c=(b=this._descriptor.compress)==null?void 0:b.compressionCallback,{compressedTextureETC:d,compressedTextureS3TC:f}=n.capabilities;if(!((_=Jn.compressionWorkerHandle)!=null&&_.isCompressible(e,this._descriptor))||!d&&!f)return;this.abortCompression();const y=new AbortController;this._compressionAbortController=y,l==null||l.increment();try{let E;e instanceof Uint8Array?E=e.buffer:(E=await createImageBitmap(e,{imageOrientation:s?"flipY":"none"}),Wi(y));const C={data:E,width:i,height:r,needsFlip:e instanceof Uint8Array&&this.descriptor.flipped,components:this._descriptor.pixelFormat===Bn.RGBA?4:3,preMultiplyAlpha:o,hasMipmap:a,hasETC:!!d,hasS3TC:!!f},k=await Jn.compressionWorkerHandle.invoke(C,y.signal,"low");if(Wi(y),k.compressedTexture&&this.hasWebGLTextureObject){const O=this.usedMemory;this._descriptor.internalFormat=k.internalFormat,this._setData(k.compressedTexture),c==null||c(O-this.usedMemory)}}catch(E){Tn(E)||Rp().error("Texture compression failed!")}finally{l==null||l.decrement(),(x=this._compressionAbortController)!=null&&x.signal.aborted&&(this._compressionAbortController=null)}}_forEachMipmapLevel(e,i=1/0){let{width:r,height:n,depth:s,hasMipmap:o,target:a}=this._descriptor;const l=a===Ic.TEXTURE_3D;if(r==null||n==null||l&&s==null)throw new ie("texture:missing-size","Missing texture dimensions for mipmap calculation");for(let c=0;e(c,r,n,s),o&&(r!==1||n!==1||l&&s!==1)&&!(c>=i);++c)r=Math.max(1,r>>1),n=Math.max(1,n>>1),l&&(s=Math.max(1,s>>1))}_applySamplingMode(){var s;const e=this._descriptor,i=(s=e.context)==null?void 0:s.gl;let r=e.samplingMode,n=e.samplingMode;r===jr.LINEAR_MIPMAP_NEAREST||r===jr.LINEAR_MIPMAP_LINEAR?(r=jr.LINEAR,e.hasMipmap||(n=jr.LINEAR)):r!==jr.NEAREST_MIPMAP_NEAREST&&r!==jr.NEAREST_MIPMAP_LINEAR||(r=jr.NEAREST,e.hasMipmap||(n=jr.NEAREST)),i.texParameteri(e.target,i.TEXTURE_MAG_FILTER,r),i.texParameteri(e.target,i.TEXTURE_MIN_FILTER,n)}_applyWrapMode(){var r;const e=this._descriptor,i=(r=e.context)==null?void 0:r.gl;typeof e.wrapMode=="number"?(i.texParameteri(e.target,i.TEXTURE_WRAP_S,e.wrapMode),i.texParameteri(e.target,i.TEXTURE_WRAP_T,e.wrapMode)):(i.texParameteri(e.target,i.TEXTURE_WRAP_S,e.wrapMode.s),i.texParameteri(e.target,i.TEXTURE_WRAP_T,e.wrapMode.t))}_applyShadowMode(){var n;const e=this._descriptor,i=(n=e.context)==null?void 0:n.gl,r=e.compareEnabled?i.COMPARE_REF_TO_TEXTURE:i.NONE;i.texParameteri(e.target,i.TEXTURE_COMPARE_MODE,r),e.compareEnabled&&i.texParameteri(e.target,i.TEXTURE_COMPARE_FUNC,i.GREATER),Hv(i)}_applyAnisotropicFilteringParameters(){const e=this._descriptor,i=e.context.capabilities.textureFilterAnisotropic;i&&e.context.gl.texParameterf(e.target,i.TEXTURE_MAX_ANISOTROPY,e.maxAnisotropy??1)}},Jn.TEXTURE_UNIT_FOR_UPDATES=0,Jn.compressionWorkerHandle=null,Jn);const c4=()=>Ie.getLogger("esri.views.2d.engine.webgl.painter.highlight.HighlightGradient");function Jje(t,e){e.fillColor[0]=t.color.r/255,e.fillColor[1]=t.color.g/255,e.fillColor[2]=t.color.b/255,e.fillColor[3]=t.color.a,t.haloColor?(e.outlineColor[0]=t.haloColor.r/255,e.outlineColor[1]=t.haloColor.g/255,e.outlineColor[2]=t.haloColor.b/255,e.outlineColor[3]=t.haloColor.a):(e.outlineColor[0]=e.fillColor[0],e.outlineColor[1]=e.fillColor[1],e.outlineColor[2]=e.fillColor[2],e.outlineColor[3]=e.fillColor[3]),e.fillColor[3]*=t.fillOpacity,e.outlineColor[3]*=t.haloOpacity,e.fillColor[0]*=e.fillColor[3],e.fillColor[1]*=e.fillColor[3],e.fillColor[2]*=e.fillColor[3],e.outlineColor[0]*=e.outlineColor[3],e.outlineColor[1]*=e.outlineColor[3],e.outlineColor[2]*=e.outlineColor[3],e.outlineWidth=(1-t.haloBlur)*t.haloWidth,e.outerHaloWidth=t.haloBlur*t.haloWidth/2,e.innerHaloWidth=t.haloBlur*t.haloWidth/2,e.outlinePosition=0}const Yje=[0,0,0,0];let $ye=class{constructor(){this.type="single",this._highlightOptions=new wg,this._convertedHighlightOptions={fillColor:[0,0,0,0],outlineColor:[0,0,0,0],outlinePosition:0,outlineWidth:0,innerHaloWidth:0,outerHaloWidth:0},this._optionsShadeTexKey="",this._texelData=new Uint8Array(4*rE),this._minMaxDistance=[0,0]}setHighlightOptions(e){this._highlightOptions=e}applyHighlightOptions(e,i){this._updateGradientTexture(e),e.bindTexture(this._shadeTex,Ije),i.setUniform2fv("u_minMaxDistance",this._minMaxDistance)}destroy(){var e;(e=this._shadeTex)==null||e.dispose(),this._shadeTex=null}getReasonsWithGradients(){return[{activeReasons:(1<<yye)-1,activeGradient:this}]}_updateGradientTexture(e){const i=Xje(this._highlightOptions);if(i===this._optionsShadeTexKey)return;this._optionsShadeTexKey=i,Jje(this._highlightOptions,this._convertedHighlightOptions);const r=this._convertedHighlightOptions,n=r.outlinePosition-r.outlineWidth/2-r.outerHaloWidth,s=r.outlinePosition-r.outlineWidth/2,o=r.outlinePosition+r.outlineWidth/2,a=r.outlinePosition+r.outlineWidth/2+r.innerHaloWidth,l=Math.sqrt(Math.PI/2)*Fje,c=Math.abs(n)>l?Math.round(10*(Math.abs(n)-l))/10:0,d=Math.abs(a)>l?Math.round(10*(Math.abs(a)-l))/10:0;let f;c&&!d?c4().error("The outer rim of the highlight is "+c+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards positive values (inwards)."):!c&&d?c4().error("The inner rim of the highlight is "+d+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards negative values (outwards)."):c&&d&&c4().error("The highlight is "+Math.max(c,d)+"px away from the edge of the feature; consider reducing some width values.");const y=[void 0,void 0,void 0,void 0];function g(_,x,E){y[0]=(1-E)*_[0]+E*x[0],y[1]=(1-E)*_[1]+E*x[1],y[2]=(1-E)*_[2]+E*x[2],y[3]=(1-E)*_[3]+E*x[3]}const{_texelData:b}=this;for(let _=0;_<rE;++_)f=n+_/(rE-1)*(a-n),f<n?(y[0]=0,y[1]=0,y[2]=0,y[3]=0):f<s?g(Yje,r.outlineColor,(f-n)/(s-n)):f<o?[y[0],y[1],y[2],y[3]]=r.outlineColor:f<a?g(r.outlineColor,r.fillColor,(f-o)/(a-o)):[y[0],y[1],y[2],y[3]]=r.fillColor,b[4*_]=255*y[0],b[4*_+1]=255*y[1],b[4*_+2]=255*y[2],b[4*_+3]=255*y[3];if(this._minMaxDistance[0]=n,this._minMaxDistance[1]=a,!this._shadeTex){const _=new wye;_.wrapMode=FO.CLAMP_TO_EDGE,_.width=rE,_.height=1,this._shadeTex=new Zje(e,_)}this._shadeTex.updateData(0,0,0,rE,1,this._texelData)}};function Xje(t){return`${t.color};${t.haloColor};${t.haloOpacity};${t.fillOpacity};${t.haloWidth};${t.haloBlur}`}let Kje=class{constructor(){this.type="multi",this.gradients=[]}setHighlightOptions(e){for(let i=0;i<e.length;i++)this.gradients[i]||(this.gradients[i]=new $ye),this.gradients[i].setHighlightOptions(e[i]);for(let i=e.length+1;i<this.gradients.length;i++)this.gradients[i].destroy();this.gradients.length=e.length}destroy(){for(const e of this.gradients)e.destroy()}getReasonsWithGradients(){let e=1;const i=[];for(let r=0;r<this.gradients.length;r++){const n=this.gradients[r];i.push({activeReasons:e,activeGradient:n}),e<<=1}return i}};var kee,Pee,Aee,Lee,Ree,Oee,VO,Fee,Nee;(function(t){t[t.FILL=0]="FILL",t[t.LINE=1]="LINE",t[t.MARKER=2]="MARKER",t[t.TEXT=3]="TEXT",t[t.LABEL=4]="LABEL"})(kee||(kee={})),(function(t){t[t.NONE=0]="NONE",t[t.MAP=1]="MAP",t[t.LABEL=2]="LABEL",t[t.LABEL_ALPHA=4]="LABEL_ALPHA",t[t.HITTEST=8]="HITTEST",t[t.HIGHLIGHT=16]="HIGHLIGHT",t[t.CLIP=32]="CLIP",t[t.DEBUG=64]="DEBUG",t[t.NUM_DRAW_PHASES=9]="NUM_DRAW_PHASES"})(Pee||(Pee={})),(function(t){t[t.SIZE=0]="SIZE",t[t.COLOR=1]="COLOR",t[t.OPACITY=2]="OPACITY",t[t.ROTATION=3]="ROTATION"})(Aee||(Aee={})),(function(t){t[t.MINMAX_TARGETS_OUTLINE=128]="MINMAX_TARGETS_OUTLINE",t[t.SCALE_TARGETS_OUTLINE=256]="SCALE_TARGETS_OUTLINE",t[t.FIELD_TARGETS_OUTLINE=512]="FIELD_TARGETS_OUTLINE",t[t.UNIT_TARGETS_OUTLINE=1024]="UNIT_TARGETS_OUTLINE"})(Lee||(Lee={})),(function(t){t[t.SPRITE=0]="SPRITE",t[t.GLYPH=1]="GLYPH"})(Ree||(Ree={})),(function(t){t[t.DEFAULT=0]="DEFAULT",t[t.SIMPLE=1]="SIMPLE",t[t.DOT_DENSITY=2]="DOT_DENSITY",t[t.OUTLINE_FILL=3]="OUTLINE_FILL",t[t.OUTLINE_FILL_SIMPLE=4]="OUTLINE_FILL_SIMPLE",t[t.HEATMAP=5]="HEATMAP",t[t.PIE_CHART=6]="PIE_CHART"})(Oee||(Oee={})),(function(t){t[t.All=0]="All",t[t.Highlight=1]="Highlight",t[t.InsideEffect=2]="InsideEffect",t[t.OutsideEffect=3]="OutsideEffect"})(VO||(VO={})),(function(t){t[t.BATCHING=0]="BATCHING",t[t.STRICT_ORDER=1]="STRICT_ORDER",t[t.STRICT_MARKERS_AND_TEXT=2]="STRICT_MARKERS_AND_TEXT"})(Fee||(Fee={})),(function(t){t[t.FILL=0]="FILL",t[t.LINE=1]="LINE",t[t.MARKER=2]="MARKER",t[t.TEXT=3]="TEXT"})(Nee||(Nee={}));const Tye={color:{write:[!0,!0,!0,!0],blendMode:"composite"},depth:!1,stencil:{write:!1,test:{ref:t=>t.stencilRef,compare:bB.EQUAL,mask:255,op:{fail:gC.KEEP,zFail:gC.KEEP,zPass:gC.REPLACE}}}},Qje={color:{write:[!0,!0,!0,!0],blendMode:"additive"},depth:!1,stencil:!1},eUe={...Tye,color:{write:[!0,!0,!0,!0],blendMode:"delete"}};function tUe({pixelRatio:t,state:e,displayLevel:i,requiredLevel:r},n){const s=1/2**(i-n.key.level),o=1/2**(r-n.key.level);return{displayMat3:e.displayMat3,displayViewMat3:e.displayViewMat3,displayViewScreenMat3:n.transforms.displayViewScreenMat3,viewMat3:e.viewMat3,tileMat3:n.transforms.tileMat3,displayZoomFactor:s,requiredZoomFactor:o,tileOffset:[n.x,n.y],currentScale:e.scale,currentZoom:i,metersPerSRUnit:Dc(e.spatialReference),rotation:e.rotation,pixelRatio:t}}function Eye(t){var e;return((e=t.passOptions)==null?void 0:e.type)==="highlight"}function Iye(t){var e;return((e=t.passOptions)==null?void 0:e.type)==="hittest"}function iUe(t){if(!Iye(t))return null;const{position:e,distance:i,smallSymbolDistance:r,smallSymbolSizeThreshold:n}=t.passOptions;return{position:e,distance:i,smallSymbolDistance:r,smallSymbolSizeThreshold:n}}function rUe(t){if(!Eye(t))return null;const{activeReasons:e,highlightAll:i}=t.passOptions;return{activeReasons:e,highlightAll:i?1:0}}function Bvt(t,e,i){const r={};for(const n in i)typeof i[n]!="function"?r[n]=i[n]:r[n]=i[n](t,e);return r}function Gvt(t,e){const{attributeView:i,context:r}=t;return{storage:i.getUniforms(r),view:tUe(t,e),hittestRequest:iUe(t),highlight:rUe(t)}}function qvt(t){return{inside:t.selection===VO.InsideEffect,outside:t.selection===VO.OutsideEffect}}function nUe(t){return Iye(t)?Qje:Eye(t)&&t.passOptions.stepType==="clear"?eUe:Tye}function Hvt(t){const{row:e,col:i}=t.key,r=i*ix,n=e*ix;return{tileOffsetFromLocalOrigin:[r%kP,n%kP],maxIntsToLocalOrigin:[Math.floor(r/kP),Math.floor(n/kP)]}}const sUe=new Gt({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch",mesh:"mesh"});function Wvt(t){return sUe.toJSON(t)}function Zvt(t){const{bandCount:e,attributeTable:i,colormap:r,pixelType:n}=t.raster.rasterInfo;return e===1&&(i!=null||r!=null||n==="u8"||n==="s8")}function oUe(t,e){return e==null?(t==null||t.destroy(),null):((t==null?void 0:t.type)==="single"&&Array.isArray(e)&&(t.destroy(),t=null),(t==null?void 0:t.type)!=="multi"||Array.isArray(e)||(t.destroy(),t=null),t||(t=Array.isArray(e)?new Kje:new $ye),Array.isArray(e)?t.type==="multi"&&t.setHighlightOptions(e):t.type==="single"&&t.setHighlightOptions(e),t)}function Jvt(t,e,i,r){const{painter:n,highlightGradient:s}=t,{highlight:o}=n.effects;if(!s)return;const a=t.passOptions,l=s.getReasonsWithGradients();for(let c=0;c<l.length;c++){const d={...t,passOptions:{type:"highlight",activeGradient:l[c].activeGradient,activeReasons:l[c].activeReasons,stepType:"burn",highlightAll:e}};if(o.bind(d),i(d),c<l.length-1){let y=0;for(let g=c+1;g<l.length;g++)y|=l[g].activeReasons;i({...t,passOptions:{type:"highlight",activeGradient:l[c].activeGradient,activeReasons:y,stepType:"clear",highlightAll:e}})}const f={...t,passOptions:{type:"highlight",activeGradient:l[c].activeGradient,activeReasons:l[c].activeReasons,stepType:"draw",highlightAll:e}};n.setPipelineState(nUe(t)),n.updatePipelineState(t.context),o.draw(f),o.unbind()}t.passOptions=a}const AP=t=>parseFloat(t)/100;function aUe(t,e,i){const r=typeof t.left=="string"?AP(t.left)*e:t.left,n=typeof t.right=="string"?AP(t.right)*e:t.right,s=typeof t.top=="string"?AP(t.top)*i:t.top,o=typeof t.bottom=="string"?AP(t.bottom)*i:t.bottom,a=s;return{xmin:r,xmax:Math.max(e-n,r),ymin:a,ymax:Math.max(i-o,s)}}function Cye(t,e,i,r){switch(e.type){case"rect":{const{width:n,height:s}=t,{xmin:o,xmax:a,ymin:l,ymax:c}=aUe(e,n,s),{x:d,y:f}=i;return d>o&&d<a&&f>l&&f<c}case"path":return e.path.length===0||!Array.isArray(e.path[0][0])||RG(e.path,[i.x,i.y]);case"geometry":return e.geometry==null||(e.geometry.type==="polygon"?LG(e.geometry,r):h2(e.geometry,r))}}function lUe(t){if(!t.highlights)return null;const e=t.highlights.findIndex((i=>i.name==="default"));return e===-1?null:t.highlights.items[e]}function cUe(t,e){if(!t.highlights){if(!e)return;t.highlights=new Ze([new wg])}const i=t.highlights.findIndex((r=>r.name==="default"));e?t.highlights.items[i].assignFrom(e):(t.highlights.removeAt(i),t.highlights.length===0&&(t.highlights=null))}async function uUe(t,e,i){const r=Qfe(e)?Kfe(t,e):e;if(!t.ready||isNaN(r.x)||isNaN(r.y))return{screenPoint:r,results:[]};let n=new Set;const s=new Set;let o=!1,a=null,l=null;i!=null&&i.include?zee(i.include,Dee(t,(y=>{n.add(y),u4(y,(g=>s.add(g)))}),((y,g)=>{s.add(y),n.add(g)}),(y=>{a||(a=new Set),a.add(y)}),(y=>n.add(y)),(()=>o=!0))):(o=!0,n=new Set(t.allLayerViews),n.forEach((y=>{u4(y,(g=>s.add(g)))}))),i!=null&&i.exclude&&zee(i.exclude,Dee(t,(y=>{n.delete(y),u4(y,(g=>s.delete(g)))}),(y=>s.delete(y)),(y=>{l||(l=new Set),l.add(y)})));const c=t.toMap(r),d=t.allLayerViews.filter((y=>!y.suspended&&n.has(y)&&y.clips.every((g=>Cye(t,g,r,c))))).reverse();let f=[...o?t.graphicsView.hitTest(c).map((y=>({type:"graphic",graphic:y,layer:null,mapPoint:c}))):[],...await Promise.all(d.map((y=>y.hitTest(c,r))).toArray())].filter(Kr).flat().filter(Kr);return f=f.filter((y=>{var g;return y.type!=="graphic"||((g=y.layer)==null?void 0:g.type)!=="subtype-group"||s.has(y.graphic.layer)})),a&&(f=f.filter((y=>!("graphic"in y)||!y.graphic||(a==null?void 0:a.has(xB(y.graphic)))))),l&&(f=f.filter((y=>!("graphic"in y)||!y.graphic||!(l!=null&&l.has(xB(y.graphic)))))),{screenPoint:r,results:f}}function Dee(t,e,i,r,n,s){return o=>{if(o instanceof qi){if(o.layer===t)s==null||s();else{const a=t.allLayerViews.find((l=>l.layer===o.layer));a&&(n==null||n(a))}r(xB(o))}else if(!("layer"in o&&"element"in o))if(o.type==="subtype-sublayer"){const a=t.allLayerViews.find((l=>l.layer===o.parent));a&&i(o,a)}else{const a=t.allLayerViews.find((l=>l.layer===o));a&&e(a)}}}function zee(t,e){if(t)if(jR(t))for(const i of t)if(jR(i))for(const r of i)e(r);else e(i);else e(t)}function xB(t){var i,r;const e=t.getObjectId();return e?`${((i=t.layer)==null?void 0:i.uid)??((r=t.sourceLayer)==null?void 0:r.uid)??"MapView"}/${e}`:`"MapView/${t.uid}`}function u4({layer:t},e){(t==null?void 0:t.type)==="subtype-group"&&t.sublayers.forEach((i=>{e(i)}))}let oE=null,jO=!0;function dUe(t,e,i){if(!t||!e)throw new Error("Cannot construct image data without dimensions");if(jO)try{return new ImageData(t,e)}catch{jO=!1}return Mye(t,e,i)}function Yvt(t,e,i,r){if(!e||!i)throw new Error("Cannot construct image data without dimensions");if(jO)try{return new ImageData(t,e,i)}catch{jO=!1}const n=Mye(e,i,r);return n.data.set(t,0),n}function hUe(){return oE||(oE=document.createElement("canvas"),oE.width=1,oE.height=1),oE}function Mye(t,e,i){return i||(i=hUe()),i.getContext("2d").createImageData(t,e)}async function pUe(t,e){const i=window.URL.createObjectURL(t);try{const{data:r}=await fi(i,{...e,responseType:"image"});return r}catch(r){throw Tn(r)?r:new ie("invalid-image",`Could not fetch requested image at ${i}`)}finally{window.URL.revokeObjectURL(i)}}async function fUe(t,e){const{arrayBuffer:i,mediaType:r}=await mUe(t,e),n=r==="image/png";if(r==="image/gif"){const{isAnimatedGIF:s,parseGif:o}=await ye(()=>import("./gif-DGZ7WAR0.js"),[]);if(s(i))return o(i,e)}if(n){const{isAnimatedPNG:s,parseApng:o}=await ye(()=>import("./apng-DvSc2k6h.js"),__vite__mapDeps([230,7]));if(s(i))return o(i,e)}return pUe(new Blob([i],{type:r}),e)}async function mUe(t,e){var n;const i=ew(t);if(i!=null&&i.isBase64)return{arrayBuffer:_ce(i.data),mediaType:i.mediaType};const r=await fi(t,{responseType:"array-buffer",...e});return{arrayBuffer:r.data,mediaType:((n=r.getHeader)==null?void 0:n.call(r,"Content-Type"))??""}}function kye(t,e,i){const{ctx:r,canvas:n}=Aye(t,i),s=r.getImageData(0,0,t.width,t.height),o=Rye(n,e);return Lye(n),{dataUrl:o,data:s}}function Pye(t,e){const{ctx:i,canvas:r}=Aye(t,e),n=i.getImageData(0,0,t.width,t.height);return Lye(r),n}function Aye(t,e){const i=yUe();e.premultipliedAlpha&&wUe(t),i.width=t.width,i.height=t.height;const r=i.getContext("2d",{willReadFrequently:!0});return r.putImageData(t,0,0),e.flipY&&bUe(r),{ctx:r,canvas:i}}function Lye(t){t.width=0,t.height=0}function yUe(){return d4==null&&(d4=document.createElement("canvas")),d4}let d4=null;function Rye(t,e){const i=_Ue[e.format],r=e.quality/100;return t.toDataURL(i,r)}function Oye(t,e){const i=vUe(t),r=SUe[i];return{format:i,quality:to(e??r,0,100)}}function Fye(t,e){return e/Math.max(t[0],t[1])}function gUe(t,e,i,r=0,n=0,s=t.width-r,o=t.height-n,a=!1){const{data:l}=t,{width:c,height:d,data:f}=e,y=s/c,g=o/d,b=Math.ceil(y/2),_=Math.ceil(g/2),x=t.width;for(let E=0;E<d;E++)for(let C=0;C<c;C++){const k=4*(C+(a?d-E-1:E)*c);let O=0,D=0,B=0,j=0,Z=0,X=0;const ee=(E+.5)*g;for(let pe=Math.floor(E*g);pe<(E+1)*g;pe++){const he=Math.abs(ee-(pe+.5))/_,ne=(C+.5)*y,re=he*he;for(let ke=Math.floor(C*y);ke<(C+1)*y;ke++){const Fe=Math.abs(ne-(ke+.5))/b,Ae=Math.sqrt(re+Fe*Fe);if(Ae>=1)continue;let we=2*Ae*Ae*Ae-3*Ae*Ae+1;const Re=4*(r+ke+(n+pe)*x);X+=we*l[Re+3],D+=we,!i&&l[Re+3]<255&&(we=we*l[Re+3]/255),B+=we*l[Re],j+=we*l[Re+1],Z+=we*l[Re+2],O+=we}}f[k]=B/O,f[k+1]=j/O,f[k+2]=Z/O,f[k+3]=X/D}return e}function vUe(t){switch(t){case"png":case"jpg":case"jpeg":return t;default:return xUe}}function bUe(t){t.save(),t.globalCompositeOperation="copy",t.scale(1,-1),t.translate(0,-t.canvas.height),t.drawImage(t.canvas,0,0),t.restore()}function wUe(t){const e=t.data,i=e.length;for(let r=0;r<i;r+=4){const n=e[r+3];if(n!==255&&n>0){const s=255/n;e[r]=e[r]*s,e[r+1]=e[r+1]*s,e[r+2]=e[r+2]*s}}}const _Ue={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},Vee=98,xUe="png",SUe={png:100,jpg:Vee,jpeg:Vee},Xvt=Object.freeze(Object.defineProperty({__proto__:null,createEmptyImageData:dUe,encode:kye,encodeData:Pye,getFormatAndQuality:Oye,getMaximumResolutionScale:Fye,resampleHermite:gUe,toDataUrl:Rye},Symbol.toStringTag,{value:"Module"})),Nye={flipY:!0,premultipliedAlpha:!0};async function $Ue(t,e){const i=await Dye(t,e),{format:r,quality:n}=Oye(e==null?void 0:e.format,e==null?void 0:e.quality);return kye(i,{format:r,quality:n},Nye)}async function TUe(t,e){const i=await Dye(t,e);return Pye(i,Nye)}function Dye(t,e){const i=CUe(e||{},IUe(t.stage,t.size),t.size,t.padding),r=EUe(e,t.allLayerViews);return t.stage.takeScreenshot(i,r,t.backgroundColor,e==null?void 0:e.rotation)}function EUe(t={},e){if(!t.layers)return;const i=[];return t.layers.forEach((r=>{const n=e.find((s=>s.layer.id===r.id));n!=null&&n.container&&i.push(n.container)})),i}function IUe(t,e){return Math.min(4,Fye(e,Math.min(4096,t.context.parameters.maxTextureSize)))}function CUe(t,e,i,r){t.ignorePadding&&(r={left:0,right:0,top:0,bottom:0});let n=null;t.width!=null&&t.height!=null?n=[t.width,t.height]:t.width==null&&t.height!=null?n=[t.height,t.height]:t.width!=null&&t.height==null?n=[t.width,t.width]:t.width==null&&t.height==null&&(n=null);const s=i[0]-(r.left+r.right),o=i[1]-(r.top+r.bottom);let a,l,c=t.area||{x:0,y:0,width:s,height:o};if(n){const d=s/o,f=n[0]/n[1];if(f>d){const y=c.width/f;c={x:c.x,y:Math.round(c.y+(c.height-y)/2),width:c.width,height:Math.round(y)}}else{const y=c.height*f;c={x:Math.round(c.x+(c.width-y)/2),y:c.y,width:Math.round(y),height:c.height}}}else n=[c.width,c.height];return n[0]>c.width?(a=Math.min(n[0]/c.width,e),l=n[0]/c.width/a):(a=1,l=n[0]/c.width),{cropArea:{x:Math.round((c.x+r.left)*a),y:Math.round((c.y+r.top)*a),width:Math.round(c.width*a),height:Math.round(c.height*a)},outputScale:l,resolutionScale:a}}const MUe=t=>t.includes("Brush");let zye=class{constructor(){this._names=new Map}begin(e){this._names.has(e)||(this._names.set(e,!1),MUe(e)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${e}.Start`))}end(e){this._names.has(e)&&!this._names.get(e)&&(this._names.set(e,!0),performance.mark(`Esri.${e}.End`))}record(e){this._names.has(e)||(this._names.set(e,!0),performance.mark(`Esri.${e}`))}},kUe=class{constructor(e){this.getUnmaskedRenderer=e}};function PUe(t){const e=t.getExtension("WEBGL_debug_renderer_info");return e?new kUe((()=>t.getParameter(e.UNMASKED_RENDERER_WEBGL))):null}let jee;function AUe(){return jee??(jee=OUe()),jee}let LUe=class{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1,this.unmaskedRenderer="unloaded"}};function RUe(t){var n;if(typeof WebGL2RenderingContext>"u")return null;const e=document.createElement("canvas");if(!e)return null;let i=e.getContext("webgl2",{failIfMajorPerformanceCaveat:!0});if(i==null&&(i=e.getContext("webgl2"),i!=null&&(t.majorPerformanceCaveat=!0,t.unmaskedRenderer=((n=PUe(i))==null?void 0:n.getUnmaskedRenderer())??"unknown")),i==null)return i;t.available=!0,t.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),t.supportsVertexShaderSamplers=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const r=i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT);return r&&(t.supportsHighPrecisionFragment=r.precision>0),i}function OUe(){const t=new LUe,e=RUe(t);return e==null||(t.supportsColorBufferFloat=e.getExtension("EXT_color_buffer_float")!==null,t.supportsColorBufferFloatBlend=e.getExtension("EXT_float_blend")!==null,t.supportsColorBufferHalfFloat=t.supportsColorBufferFloat||e.getExtension("EXT_color_buffer_half_float")!==null),t}function FUe(t){const e=AUe();return e.available?t==="3d"&&e.majorPerformanceCaveat?new ie("webgl:major-performance-caveat-detected",`Your WebGL implementation (${e.unmaskedRenderer}) doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.`):e.supportsHighPrecisionFragment?e.supportsVertexShaderSamplers?null:new ie("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new ie("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):new ie("webgl:required","WebGL2 is required but not supported.",new Error().stack)}function NUe(t){return t&&"nodeType"in t}function DUe(t){return t&&typeof t.render=="function"}const Uee={component:"esri-component"};let v0=class extends tt{constructor(){super(...arguments),this.widget=null}destroy(){var e;this.node=null,(e=this.widget)==null||e.destroy()}get id(){var e,i;return this._get("id")??((e=this.widget)==null?void 0:e.id)??((i=this.node)==null?void 0:i.id)}set id(e){this._set("id",e)}set node(e){const i=this._get("node");e!==i&&(e&&e.classList.add(Uee.component),i&&i.classList.remove(Uee.component),this._set("node",e))}castNode(e){var i;return(i=this.widget)==null||i.destroy(),e?typeof e=="string"||NUe(e)?(this._set("widget",null),rq(e)):(DUe(e)&&!e.domNode&&(e.domNode=document.createElement("div")),this._set("widget",e),e.domNode):(this._set("widget",null),null)}};u([h()],v0.prototype,"id",null),u([h()],v0.prototype,"node",null),u([yi("node")],v0.prototype,"castNode",null),u([h({readOnly:!0})],v0.prototype,"widget",void 0),v0=u([V("esri.views.ui.Component")],v0);const AL=v0,Vye="calcite-mode-",jye="dark",zUe="light",VUe=/\W/g,jUe="--esri-calcite-mode-name";function Uye(){return getComputedStyle(document.body).getPropertyValue(jUe).replaceAll(VUe,"").toLowerCase()}function Yq(){return Uye()===jye}function UUe(){const t=Uye();switch(t){case jye:case zUe:return`${Vye}${t}`;default:return null}}function BUe(t){const e=UUe();e&&(GUe(t),t.classList.add(e))}function GUe(t){Array.from(t.classList).forEach((e=>{e.startsWith(Vye)&&t.classList.remove(e)}))}const CN=new Map;function Bye(){CN.clear()}function qUe(t){return CN.get(t)}function HUe(t,e){CN.set(t,e)}function h4(t){CN.delete(t)}function rx(...t){const e=ra.acquire();for(let r=0;r<t.length;r++){const n=t[r],s=typeof n;if(s==="string")e.push(n);else if(Array.isArray(n))e.push.apply(e,n);else if(s==="object")for(const o in n)n[o]&&e.push(o)}const i=e.join(" ");return ra.release(e),i}(()=>{const t=new Map,e=new ResizeObserver((r=>{var n;Bye();for(const s of r)(n=t.get(s.target))==null||n(s)})),i=(r,n,s)=>(t.set(r,n),e.observe(r,s),Ei((()=>{e.unobserve(r),t.delete(r)})));return(r,n,s)=>{let o=null;return yw([$e((()=>typeof r=="function"?r():r),(a=>{o==null||o.remove(),a&&(o=i(a,n,s))}),ta),Ei((()=>o==null?void 0:o.remove()))])}})();function Al(t){const e=t==null?void 0:t.closest("[dir]");return e!==null&&e instanceof HTMLElement&&e.dir==="rtl"||document.dir==="rtl"}function Bee(t){const e="data-node-ref";this[t.getAttribute(e)]=null}function Gee(t){const e="data-node-ref";this[t.getAttribute(e)]=t}function WUe(t){return t==="Enter"||t===" "}async function Gye(t,e){await tG(n2(e));const i=typeof t=="function"?t():t;i&&("setFocus"in i&&typeof i.setFocus=="function"?await i.setFocus():i instanceof HTMLElement&&i.focus())}const ZUe={left:0,top:0,bottom:0,right:0},qye={bottom:30,top:15,right:15,left:15},Op="esri-ui",wa={ui:Op,corner:`${Op}-corner`,innerContainer:`${Op}-inner-container`,manualContainer:`${Op}-manual-container`,cornerContainer:`${Op}-corner-container`,topLeft:`${Op}-top-left`,topRight:`${Op}-top-right`,bottomLeft:`${Op}-bottom-left`,bottomRight:`${Op}-bottom-right`};function JUe(t){return t&&!t._started&&typeof t.postMixInProperties=="function"&&typeof t.buildRendering=="function"&&typeof t.postCreate=="function"&&typeof t.startup=="function"}function LP(t){return t===0?"0":`${t}px`}function p4(t){const e=typeof t=="object"&&t!==null&&Object.getPrototypeOf(t);return(e===null||e===Object.prototype)&&("component"in t||"index"in t||"position"in t)?t:null}function f4(t,{top:e,bottom:i,left:r,right:n}){t.style.top=e,t.style.bottom=i,t.style.left=r,t.style.right=n}let Vd=class extends ad.EventedAccessor{constructor(e){super(e),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentMap=new Map,this._removeWidgetHandleKey=Symbol("componentOnRemoveSymbol"),this._locale=Wa(),this.view=null,this._applyViewPadding=()=>{const i=this.container;i&&f4(i,this._toPixelPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const i=this._innerContainer;i&&f4(i,this._toPixelPosition(this.padding))},this._initContainers()}initialize(){this.addHandles([$e((()=>{var e;return[(e=this.view)==null?void 0:e.padding,this.container]}),this._applyViewPadding,kt),$e((()=>this.padding),this._applyUIPadding,kt),$e((()=>[this.container,this._locale]),(([e,i])=>{e&&e.setAttribute("lang",i)}),kt),jG((e=>{this._locale=e}))])}destroy(){this.container=null;for(const e of this._components)e.destroy();this._components.length=0,this._componentMap.clear()}set container(e){const i=this._get("container");e!==i&&(e&&(e.classList.add(wa.ui),BUe(e),this._attachContainers(e)),i&&(i.classList.remove(wa.ui),f4(i,{top:"",bottom:"",left:"",right:""}),i.textContent=""),this._set("container",e))}get height(){var s;const e=((s=this.view)==null?void 0:s.height)??0;if(e===0)return e;const i=this._getViewPadding(),{top:r,bottom:n}=i;return Math.max(e-r-n,0)}get padding(){return this._get("padding")}set padding(e){this._overrideIfSome("padding",e)}castPadding(e){return typeof e=="number"?{bottom:e,top:e,right:e,left:e}:{...qye,...e}}get width(){var s;const e=((s=this.view)==null?void 0:s.width)??0;if(e===0)return e;const i=this._getViewPadding(),{left:r,right:n}=i;return Math.max(e-r-n,0)}add(e,i){let r,n,s;if(Array.isArray(e))return void e.forEach((a=>this.add(a,i)));const o=p4(e);o&&({index:r,position:i,component:e,key:n}=o),i&&typeof i=="object"&&({index:r,key:n,position:i,internal:s}=i),!e||i&&!this._isValidPosition(i)||this._add(e,i,r??this._getNumComponentsAtPosition(i),n,s)}remove(e,i){var n;if(!e)return;if(Array.isArray(e))return e.map((s=>this.remove(s,i)));const r=this._find(e);if(r){const s=this._componentMap.get(r);if(!s||s.key!==i)return;const o=this._components.indexOf(r),a=r.node.parentNode;return a==null||a.removeChild(r.node),this._componentMap.delete(r),(n=r.widget)==null||n.removeHandlesReference(this._removeWidgetHandleKey),this._components.forEach((l=>{const c=this._componentMap.get(l);c&&c.position===s.position&&c.index>s.index&&c.index--})),this._components.splice(o,1)[0]}}empty(e,i={removeInternal:!1}){if(Array.isArray(e)){for(const s of e)this.empty(s,i);return}const r=this._positionNameToContainerLookup[e??"manual"],n=Array.prototype.slice.call(r.children).map((s=>this._findByNode(s))).filter((s=>{var o;return s==null?!1:!(((o=this._componentMap.get(s))==null?void 0:o.internal)??!1)||i.removeInternal}));for(const s of n)this.remove(s)}move(e,i){if(Array.isArray(e)&&e.forEach((o=>this.move(o,i))),!e)return;let r;const n=p4(e)||p4(i);if(n&&(r=n.index,i=n.position,e=n.component||e),i&&!this._isValidPosition(i))return;const s=this.remove(e);s&&this.add(s,{position:i,index:r})}find(e){if(!e)return null;const i=this._findById(e);return i&&(i.widget||i.node)}getComponents(e,i={includeInternal:!1}){return e?Array.isArray(e)?e.flatMap((r=>this._getComponentsAtPosition(r,i))):this._getComponentsAtPosition(e,i):this._components.filter((r=>{var n;return i.includeInternal||!((n=this._componentMap.get(r))!=null&&n.internal)})).map((({widget:r,node:n})=>r??n))}getPosition(e){for(const i in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[i].contains(e))return i;return null}_add(e,i,r,n,s){e instanceof AL||(e=new AL({node:e}));const{widget:o}=e;o!=null&&o instanceof tt&&o.addHandles(Ei((()=>{queueMicrotask((()=>this.remove(e)))})),this._removeWidgetHandleKey),this._components.some((a=>{var l,c;return((l=this._componentMap.get(a))==null?void 0:l.position)===i&&((c=this._componentMap.get(a))==null?void 0:c.index)===r}))&&this._components.forEach((a=>{const l=this._componentMap.get(a);l&&l.position===i&&l.index>=r&&l.index++})),this._place({component:e,position:i,index:r}),this._components.push(e),this._componentMap.set(e,{key:n,position:i,internal:s,index:r})}_find(e){return e?e instanceof AL?this._findByComponent(e):typeof e=="string"?this._findById(e):"domNode"in e?this._findByNode(e.domNode):this._findByNode(e):null}_getViewPadding(){var e;return((e=this.view)==null?void 0:e.padding)??ZUe}_attachContainers(e){e.appendChild(this._innerContainer),e.appendChild(this._manualContainer)}_initContainers(){const e=document.createElement("div");e.classList.add(wa.innerContainer,wa.cornerContainer);const i=document.createElement("div");i.classList.add(wa.innerContainer,wa.manualContainer);const r=document.createElement("div");r.classList.add(wa.topLeft,wa.corner),e.appendChild(r);const n=document.createElement("div");n.classList.add(wa.topRight,wa.corner),e.appendChild(n);const s=document.createElement("div");s.classList.add(wa.bottomLeft,wa.corner),e.appendChild(s);const o=document.createElement("div");o.classList.add(wa.bottomRight,wa.corner),e.appendChild(o),this._innerContainer=e,this._manualContainer=i;const a=Al();this._cornerNameToContainerLookup={"top-left":r,"top-right":n,"bottom-left":s,"bottom-right":o,"top-leading":a?n:r,"top-trailing":a?r:n,"bottom-leading":a?o:s,"bottom-trailing":a?s:o},this._positionNameToContainerLookup={manual:i,...this._cornerNameToContainerLookup}}_isValidPosition(e){return!!this._positionNameToContainerLookup[e]}_place(e){var l,c;const i=e.position??"manual",{component:r,index:n}=e,s=this._positionNameToContainerLookup[i],o=n!=null&&n>-1;if(JUe(r.widget)&&r.widget.startup(),!o)return void s.appendChild(r.node);const a=Array.from(s.children);if(a.length!==0){for(const d of a){const f=this._findByNode(d);if(f&&n<(((l=this._componentMap.get(f))==null?void 0:l.index)??0))return void((c=d.parentNode)==null?void 0:c.insertBefore(r.node,d))}s.appendChild(r.node)}else s.appendChild(r.node)}_toPixelPosition(e){return{top:LP(e.top),left:LP(e.left),right:LP(e.right),bottom:LP(e.bottom)}}_findByComponent(e){return this._components.find((i=>i===e))??null}_findById(e){return this._components.find((({id:i})=>i===e))??null}_findByNode(e){return e?this._components.find((({node:i})=>i===e)):null}_getComponentsAtPosition(e,i){const r=this._positionNameToContainerLookup[e];return Array.prototype.slice.call(r.children).map((n=>this._findByNode(n))).filter(Kr).filter((n=>{var s;return i.includeInternal||!((s=this._componentMap.get(n))!=null&&s.internal)})).map((({widget:n,node:s})=>n??s))}_getNumComponentsAtPosition(e){const i=this._positionNameToContainerLookup[e];return(i==null?void 0:i.children.length)??0}};u([h()],Vd.prototype,"_locale",void 0),u([h()],Vd.prototype,"container",null),u([h()],Vd.prototype,"height",null),u([h({value:qye})],Vd.prototype,"padding",null),u([yi("padding")],Vd.prototype,"castPadding",null),u([h()],Vd.prototype,"view",void 0),u([h()],Vd.prototype,"width",null),Vd=u([V("esri.views.ui.UI")],Vd);const YUe=Vd,XUe={handleInterceptedEvent:(t,e,i,r)=>(t.scheduleRender(),e.properties[`on${r.type}`].apply(e.properties.bind||i,[r]))},KUe={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(t,e,i)=>{e.charAt(0)==="-"?t.style.setProperty(e,i):t.style[e]=i}},QUe=t=>({...KUe,...t}),e6e=(t,e)=>{const i=[];for(;t&&t!==e;)i.push(t),t=t.parentNode;return i},t6e=(t,e)=>t.find(e),qee=(t,e,i=!1)=>{let r=t;return e.forEach(((n,s)=>{const o=r!=null&&r.children?t6e(r.children,(a=>a.domNode===n)):void 0;i&&!o&&s!==e.length-1||(r=o)})),r},i6e=t=>{let e;const i={...XUe,...t},r=QUe(i),n=r.performanceLogger;let s,o=!0,a=!1;const l=[],c=[],d=(y,g,b)=>{var E;let _;r.eventHandlerInterceptor=(C,k,O,D)=>function(B){let j;n("domEvent",B);const Z=e6e(B.currentTarget,_.domNode),X=Z.some((pe=>{var he;return customElements.get((he=pe==null?void 0:pe.tagName)==null?void 0:he.toLowerCase())}));if(B.eventPhase===Event.CAPTURING_PHASE||!X)Z.reverse(),j=qee(_.getLastRender(),Z);else{const pe=B.composedPath(),he=pe.slice(pe.indexOf(B.currentTarget),pe.indexOf(_.domNode)).reverse();j=qee(_.getLastRender(),he,!0)}let ee;return j&&(ee=i.handleInterceptedEvent(e,j,this,B)),n("domEventProcessed",B),ee},(E=i.postProcessProjectionOptions)==null||E.call(i,r);const x=b();_=y(g,x,r),r.eventHandlerInterceptor=void 0,l.push(_),c.push(b),i.afterFirstVNodeRendered&&i.afterFirstVNodeRendered(_,x)};let f=()=>{if(s=void 0,o){o=!1,n("renderStart",void 0);for(let y=0;y<l.length;y++){const g=c[y]();n("rendered",void 0);try{l[y].update(g)}catch(b){console.error(b)}n("patched",void 0)}n("renderDone",void 0),o=!0}};return i.modifyDoRenderImplementation&&(f=i.modifyDoRenderImplementation(f,l,c)),e={renderNow:f,scheduleRender:()=>{s||a||(s=requestAnimationFrame(f))},stop:()=>{s&&(cancelAnimationFrame(s),s=void 0),a=!0},resume:()=>{a=!1,o=!0,e.scheduleRender()},append:(y,g)=>{d(sg.append,y,g)},insertBefore:(y,g)=>{d(sg.insertBefore,y,g)},merge:(y,g)=>{d(sg.merge,y,g)},replace:(y,g)=>{d(sg.replace,y,g)},detach:y=>{for(let g=0;g<c.length;g++)if(c[g]===y)return c.splice(g,1),l.splice(g,1)[0];throw new Error("renderFunction was not found")}},e};let Hye;function r6e(){zae||Vae(Ba(Ir(Hye)))}function zl(t){var i;const e=[];for(const r of Object.keys(t))customElements.get(`calcite-${r}`)||e.push((i=t[r])==null?void 0:i.call(t));return e.length>0?Promise.all(e):null}Hye="components/assets";const Wye=Symbol("widget"),Zye=Symbol("widget-test-data"),n6e=[],s6e={},UO=new WeakMap;function Jye(t,e){let i=e.children;if(i!=null&&i.length)for(let n=0;n<i.length;++n)i[n]=Jye(t,i[n]);else i=n6e;const r=e.vnodeSelector;if(BO(r)){const n=e.properties||s6e,s=n.key||r,o={key:s,afterCreate:o6e,afterUpdate:a6e,afterRemoved:Yye,parentWidget:t,widgetConstructor:r,widgetProperties:{...n,key:s,children:i}};return{vnodeSelector:r.vnodeSelector,properties:o,children:void 0,text:void 0,domNode:null}}return e}function o6e(t,e,i,{parentWidget:r,widgetConstructor:n,widgetProperties:s}){var a;const o=new n(s);o.container=t,UO.set(t,o),(a=o.afterCreate)==null||a.call(o,o,t),r.addHandles(Ei((()=>Yye(t)))),queueMicrotask((()=>{o[Zye].projector.renderNow()}))}function a6e(t,e,i,{widgetProperties:r}){var s;const n=UO.get(t);n&&(n.set(r),(s=n.afterUpdate)==null||s.call(n,n,t))}function Yye(t){var i;const e=UO.get(t);e&&((i=e.afterRemoved)==null||i.call(e,e,t),e.destroy(),UO.delete(t))}function BO(t){return typeof t=="function"&&t[Wye]}const Hee=new Set;function l6e(t){Hee.add(t),t.finally((()=>Hee.delete(t)))}function c6e(t){return Ei()}var Wee;let u6e=0;function Xye(t,e){const i=Object.prototype.hasOwnProperty;for(const r in e)i.call(e,r)&&i.call(t,r)&&(t[r]!=null&&e[r]!=null&&typeof t[r]=="object"&&typeof e[r]=="object"?Xye(t[r],e[r]):t[r]=e[r]);return t}const d6e=i6e({postProcessProjectionOptions(t){const e=t.eventHandlerInterceptor,i=/capture$/i;t.eventHandlerInterceptor=(r,n,s,o)=>{const a=e==null?void 0:e(r,n,s,o),l=i.test(r);if(!((r=r.replace(i,"")).toLowerCase()in s)||l){const c=r[2].toLowerCase()+r.slice(3),d=g=>a==null?void 0:a.call(s,g);s.addEventListener(c,d,l);const f=()=>s.removeEventListener(c,d,l),y=o.afterRemoved;o.afterRemoved=g=>{y==null||y(g),f()}}return a}},handleInterceptedEvent(t,e,i,r){const{eventPhase:n,type:s}=r,o=n===Event.CAPTURING_PHASE;let a=`on${s}${o?"capture":""}`;const l=e.properties;(l&&a in l||(a=`on${s[0].toUpperCase()}${s.slice(1)}${o?"Capture":""}`,l&&a in l))&&(Bye(),t.scheduleRender(),l[a].call(l.bind||i,r))}});let m4=!1;var Jb;let _s=(Jb=class extends Wh.EsriPromiseMixin(ad.EventedAccessor){constructor(e,i){super(e,i),this._attached=!1,this._projector=d6e,this._readyForTrueRender=!1,this.key=this,this.autoRenderingEnabled=!0,this._loadLocale=Zu((async()=>{var l;if((l=this._messageBundleProps)!=null&&l.length){const c=await Promise.allSettled(this._messageBundleProps.map((async({bundlePath:d,propertyName:f})=>{if(this.destroyed)return;let y=await QG(d);this.uiStrings&&Object.keys(this.uiStrings)&&(y=Xye(se(y),this.uiStrings)),this[f]=y})));if(this.destroyed)return;for(const d of c)d.status==="rejected"&&Ie.getLogger(this).error("widget-intl:locale-error",this.declaredClass,d.reason)}await this.loadLocale()})),this.addHandles(c6e()),r6e();const r="esri-widget-uid-"+V$(),n=this.render.bind(this);this._trackingTarget=new t2((()=>{this.autoRenderingEnabled&&this.scheduleRender()}));const s=()=>({vnodeSelector:"div",properties:{key:`${r}-hidden`,class:"",styles:{display:"none"}},domNode:null,children:void 0,text:void 0}),o=()=>{var f,y;if(!this._readyForTrueRender||this.destroyed)return null;const l=n()??s(),c=l.properties??(l.properties={});if(c.key??(c.key=r),BO(l.vnodeSelector)){if(!this.visible)return s()}else this.visible?c.styles||(c.styles={}):(c.class="",c.styles={display:"none"}),(f=c.styles).display??(f.display="");let d=0;return(y=l.children)==null||y.forEach((g=>{var b;BO(g.vnodeSelector)||(g.properties??(g.properties={}),(b=g.properties).key??(b.key=`${this.id}--${d++}`))})),Jye(this,l)};this.render=()=>{if(m4)return o();let l=qUe(this)??null;if(l)return l;this._trackingTarget.clear(),m4=!0;try{l=ap(this._trackingTarget,o)}catch(c){throw Ie.getLogger(this).error(c),c}finally{m4=!1}return l&&HUe(this,l),l};const a=this.beforeFirstRender();a?this._resourcesFetch=a.then((()=>{this._readyForTrueRender=!0,this._postInitialize()})):(this._resourcesFetch=Promise.resolve().then((()=>{this._postInitialize()})),this._readyForTrueRender=!0),this.addResolvingPromise(this._resourcesFetch),l6e(this._resourcesFetch)}normalizeCtorArgs(e,i){const r={...e};return i&&(r.container=i),r}postInitialize(){}beforeFirstRender(){var i;const e=this.loadDependencies();return(i=this._messageBundleProps)!=null&&i.length||e?Promise.all([e,this._loadLocale()]).then((()=>{})).catch(tj):null}loadDependencies(){return null}loadLocale(){return null}destroy(){this.destroyed||(hr(this._trackingTarget),hr(this.viewModel),this._detach(this.container),this._set("container",null),this._emitter.clear(),this.render=()=>null,this._projector=null,h4(this))}set container(e){this._get("container")||this._set("container",e)}castContainer(e){return rq(e)}get domNode(){return this.container}set domNode(e){this.container=e}get icon(){return null}set icon(e){this._overrideIfSome("icon",e)}get id(){var e;return this._get("id")||((e=this.container)==null?void 0:e.id)||Date.now().toString(16)+"-widget-"+u6e++}set id(e){e&&this._set("id",e)}get label(){return this.declaredClass.split(".").pop()}set label(e){this._overrideIfSome("label",e)}get renderable(){return this._resourcesFetch}get visible(){return this._get("visible")}set visible(e){this._set("visible",e)}get[(Wee=Wye,Zye)](){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(h4(this),this._projector.scheduleRender())}classes(...e){return rx.apply(this,e)}renderNow(){h4(this),this._projector.renderNow()}_postInitialize(){var i;if(this.destroyed)return;this.scheduleRender(),(i=this._delegatedEventNames)!=null&&i.length&&this.addHandles($e((()=>this.viewModel),((r,n)=>{n&&this.removeHandles("delegated-events"),r&&zF(r)&&this.addHandles(this._delegatedEventNames.map((s=>$$(r,s,(o=>{this.emit(s,o)})))),"delegated-events")}),ta)),this.postInitialize();const e=async()=>{await this._loadLocale().catch(tj),this.scheduleRender()};this.addHandles([jG(e),$e((()=>this.uiStrings),e)]),this.addHandles(Sn((()=>this.container),(r=>{this.destroyed||this._attach(r)}),{initial:!0,once:!0}))}_attach(e){e&&(this._projector.merge(e,this.render),this._attached=!0)}_detach(e){var i;this._attached&&(this._projector.detach(this.render),this._attached=!1),(i=e==null?void 0:e.parentNode)==null||i.removeChild(e)}},Jb[Wee]=!0,Jb.vnodeSelector="div",Jb);u([h()],_s.prototype,"_readyForTrueRender",void 0),u([h({value:null})],_s.prototype,"container",null),u([yi("container")],_s.prototype,"castContainer",null),u([h()],_s.prototype,"icon",null),u([h()],_s.prototype,"id",null),u([h()],_s.prototype,"label",null),u([h()],_s.prototype,"renderable",null),u([h()],_s.prototype,"uiStrings",void 0),u([h()],_s.prototype,"viewModel",void 0),u([h({value:!0})],_s.prototype,"visible",null),u([h()],_s.prototype,"key",void 0),u([h()],_s.prototype,"children",void 0),u([h()],_s.prototype,"afterCreate",void 0),u([h()],_s.prototype,"afterUpdate",void 0),u([h()],_s.prototype,"afterRemoved",void 0),_s=u([V("esri.widgets.Widget")],_s);const Zi=_s;var Zee,Jee,Yee,Xee,Kee,Qee,ete,tte,ite,rte,nte,ste,ote,ate,lte;(function(t){t.U8="U8",t.I8="I8",t.U16="U16",t.I16="I16",t.U32="U32",t.I32="I32",t.F32="F32",t.F64="F64",t.Utf8String="Utf8String",t.NotSet="NotSet"})(Zee||(Zee={})),(function(t){t.Png="Png",t.Jpeg="Jpeg",t.Dds="Dds",t.Raw="Raw",t.Dxt1="Dxt1",t.Dxt5="Dxt5",t.Bc7="Bc7",t.Basis="Basis",t.Etc1="Etc1",t.Etc2="Etc2",t.Astc="Astc",t.Pvrtc="Pvrtc",t.NotSet="NotSet"})(Jee||(Jee={})),(function(t){t.Position="Position",t.Normal="Normal",t.TexCoord="TexCoord",t.Color="Color",t.Tangent="Tangent",t.FeatureIndex="FeatureIndex",t.UvRegion="UvRegion",t.FeatureVariable="FeatureVariable",t.NotSet="NotSet"})(Yee||(Yee={})),(function(t){t.Opaque="Opaque",t.Mask="Mask",t.Blend="Blend"})(Xee||(Xee={})),(function(t){t.None="None",t.Mask="Mask",t.Alpha="Alpha",t.PreMultAlpha="PreMultAlpha",t.NotSet="NotSet"})(Kee||(Kee={})),(function(t){t.Points="Points",t.Lines="Lines",t.LineStrip="LineStrip",t.Triangles="Triangles",t.TriangleStrip="TriangleStrip",t.NotSet="NotSet"})(Qee||(Qee={})),(function(t){t.None="None",t.WrapXBit="WrapXBit",t.WrapYBit="WrapYBit",t.WrapXy="WrapXy",t.NotSet="NotSet"})(ete||(ete={})),(function(t){t.Linear="Linear",t.Nearest="Nearest",t.NotSet="NotSet"})(tte||(tte={})),(function(t){t.Linear="Linear",t.Nearest="Nearest",t.NearestMipmapNearest="NearestMipmapNearest",t.LinearMipmapNearest="LinearMipmapNearest",t.NearestMipmapLinear="NearestMipmapLinear",t.LinearMipmapLinear="LinearMipmapLinear",t.NotSet="NotSet"})(ite||(ite={})),(function(t){t.FeatureId="FeatureId",t.GlobalUid="GlobalUid",t.UnspecifiedDateTime="UnspecifiedDateTime",t.EcmaIso8601DateTime="EcmaIso8601DateTime",t.EcmaIso8601DateOnly="EcmaIso8601DateOnly",t.TimeOnly="TimeOnly",t.TimeStamp="TimeStamp",t.ColorRgb="ColorRgb",t.ColorRgba="ColorRgba",t.Unrecognized="Unrecognized",t.NotSet="NotSet"})(rte||(rte={})),(function(t){t.Texture="Texture",t.VertexAtrb="VertexAtrb",t.Implicit="Implicit",t.NotSet="NotSet"})(nte||(nte={})),(function(t){t.Front="Front",t.Back="Back",t.None="None",t.NotSet="NotSet"})(ste||(ste={})),(function(t){t.Pbr="Pbr",t.Unlit="Unlit"})(ote||(ote={})),(function(t){t.Rgb8="Rgb8",t.Rgba8="Rgba8",t.R8="R8",t.Bgr8="Bgr8",t.Bgra8="Bgra8",t.Rg8="Rg8",t.Ga8="Ga8",t.Etc1="Etc1",t.Etc2="Etc2",t.Dxt1="Dxt1",t.Dxt5="Dxt5",t.Bc7="Bc7",t.NotSet="NotSet"})(ate||(ate={})),(function(t){t[t.Succeeded=0]="Succeeded",t[t.Failed=1]="Failed",t[t.MissingInputs=2]="MissingInputs"})(lte||(lte={}));const h6e=new Map;function p6e(t){return h6e.get(t)}function cte(t,e){return t&&"copyright"in t&&(!e||typeof t.originOf=="function"&&t.originOf("copyright")==="user")}function f6e(t,e){return t.length!==e.length||t.some(((i,r)=>i.text!==e[r].text))}function aE(t,e,i){!i||!e||t.find((r=>r.layerView===e&&r.text===i))||t.push({text:i,layerView:e})}function m6e(t){return t.type==="bing-maps"}const Fp=[];let r1=class extends tt{constructor(e){super(e),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.removeHandles("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new Ze,this.view=null,this._allLayerViewsChange=i=>{var n;this.removeHandles("suspension"),this.removeHandles("visible-geometry-changed");const r=(n=this.view)==null?void 0:n.allLayerViews;r&&(this.addHandles(r.map((s=>$e((()=>{var o;return[s.suspended,(o=s.layer)==null?void 0:o.attributionVisible]}),(()=>this._updateAttributionItems())))).toArray(),"suspension"),r.forEach((s=>{s.declaredClass==="esri.views.3d.layers.Tiles3DLayerView3D"&&this.addHandles(s.on("visible-geometry-changed",(()=>this._updateAttributionItems())),"visible-geometry-changed")}))),i!=null&&i.removed&&i.removed.forEach((s=>{this._pendingAttributions.delete(s),this._fetchedAttributionData.delete(s)})),this._updateAttributionItems()},this.addHandles([eo((()=>{var i;return(i=this.view)==null?void 0:i.allLayerViews}),"change",(i=>this._allLayerViewsChange(i)),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),Sn((()=>{var i;return((i=this.view)==null?void 0:i.stationary)===!0}),(()=>this._updateAttributionItems()))])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){var e;return(e=this.view)!=null&&e.ready?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const e=this.view,i=e==null?void 0:e.allLayerViews;if(Fp.length=0,!e||!i)return void this._clear();i.forEach((n=>{var a,l;if(n.suspended||!((a=n.layer)!=null&&a.attributionVisible))return;const s=n.layer;if(cte(s,"user"))return void aE(Fp,n,s.copyright);if(s.hasAttributionData){if(this._fetchedAttributionData.has(n)){const c=this._fetchedAttributionData.get(n);return void(c?aE(Fp,n,this._getDynamicAttribution(c,e,s)):cte(s)&&aE(Fp,n,s.copyright))}return void this._fetchAttributionData(n)}const o="portalItem"in s?(l=s.portalItem)==null?void 0:l.accessInformation:void 0;aE(Fp,n,o||s.copyright)}));const r=i.find((n=>{var s;return((s=n.layer)==null?void 0:s.type)==="integrated-mesh-3dtiles"}));if(this.view&&r){const n=p6e(this.view);if(n){const s=n.getAttributionText();for(let o=0;o<s.length;++o)aE(Fp,r,s[o])}}f6e(this.items,Fp)&&(this.items.removeAll(),this.items.addMany(Fp)),Fp.length=0,this.notifyChange("state")}async _fetchAttributionData(e){if(this._pendingAttributions.has(e))return;this._pendingAttributions.add(e);const i=await lN(e.layer.fetchAttributionData());if(this._pendingAttributions.has(e)){const r=i.ok?this._createContributionIndex(i.value,m6e(e.layer)):null;this._pendingAttributions.delete(e),this._fetchedAttributionData.set(e,r)}this._updateAttributionItems()}_createContributionIndex(e,i){const r=e.contributors,n={};if(!r)return n;for(let s=0;s<r.length;s++){const o=r[s],a=o.coverageAreas;if(!a)return;for(const l of a){const c=l.bbox,d=l.zoomMin-(i&&l.zoomMin?1:0),f=l.zoomMax-(i&&l.zoomMax?1:0),y=new Qt({xmin:c[1],ymin:c[0],xmax:c[3],ymax:c[2],spatialReference:et.WGS84}),g={extent:Xf(y),attribution:o.attribution||"",score:l.score!=null?l.score:100,id:s};for(let b=d;b<=f;b++)n[b]??(n[b]=[]),n[b].push(g)}}return n.maxKey=Math.max.apply(null,Object.keys(n)),n}_getDynamicAttribution(e,i,r){var d;const{extent:n,scale:s}=i;let o=((d=r.tileInfo)==null?void 0:d.scaleToZoom(s))??0;if(o=Math.min(e.maxKey??0,Math.round(o)),!n||o==null||o<=-1)return"";const a=e[o],l=HF(n.center.clone().normalize(),et.WebMercator),c=new Set;return a?a.filter((f=>{const y=f.id,g=!c.has(y)&&l&&f.extent&&h2(f.extent,l);return g&&c.add(y),g})).sort(((f,y)=>y.score-f.score||f.objectId-y.objectId)).map((f=>f.attribution)).join(", "):""}};u([h({readOnly:!0,type:Ze})],r1.prototype,"items",void 0),u([h({readOnly:!0})],r1.prototype,"state",null),u([h()],r1.prototype,"view",void 0),r1=u([V("esri.widgets.Attribution.AttributionViewModel")],r1);const Kye=r1,Vt={button:"esri-button",buttonDisabled:"esri-button--disabled",buttonHalf:"esri-button--half",buttonSecondary:"esri-button--secondary",buttonSmall:"esri-button--small",buttonTertiary:"esri-button--tertiary",buttonThird:"esri-button--third",empty:"esri-widget__content--empty",heading:"esri-widget__heading",interactive:"esri-interactive",panel:"esri-widget--panel",table:"esri-widget__table",widget:"esri-widget",widgetButton:"esri-widget--button"};function y6e(){return function(t,e){if(!t[e])throw new TypeError(`Cannot auto bind undefined function '${String(e)}'`);return{value:v6e(t[e])}}}function g6e(t){const e=t==null?void 0:t.type;return t instanceof KeyboardEvent||e==="keyup"||e==="keydown"||e==="keypress"}function v6e(t){return function(e,...i){g6e(e)?WUe(e.key)&&(e.preventDefault(),e.stopPropagation(),e.target.click()):t.call(this,e,...i)}}function nn(t){return(e,i)=>{e.hasOwnProperty("_messageBundleProps")||(e._messageBundleProps=e._messageBundleProps?e._messageBundleProps.slice():[]),e._messageBundleProps.push({bundlePath:t,propertyName:i})}}var b6e=function(t){return{vnodeSelector:"",properties:void 0,children:void 0,text:t.toString(),domNode:null}},Qye=function(t,e){for(var i=0,r=t.length;i<r;i++){var n=t[i];Array.isArray(n)?Qye(n,e):n!=null&&n!==!1&&(n.hasOwnProperty("vnodeSelector")||(n=b6e(n)),e.push(n))}},w6e=function(t,e){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];if(i.length===1&&typeof i[0]=="string")return{vnodeSelector:t,properties:e||void 0,children:void 0,text:i[0],domNode:null};var n=[];return Qye(i,n),{vnodeSelector:t,properties:e||void 0,children:n,text:void 0,domNode:null}};function G(t,e,...i){return typeof t!="function"||BO(t)?w6e(t,e??null,...i):t(e,...i)}function _6e(...t){return t}const x_="esri-attribution",S_={base:x_,poweredBy:`${x_}__powered-by`,sources:`${x_}__sources`,open:`${x_}--open`,sourcesOpen:`${x_}__sources--open`,link:`${x_}__link`};let Ho=class extends Zi{constructor(e,i){super(e,i),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._resizeObserver=new ResizeObserver((r=>r.forEach((({target:n})=>this._checkSourceTextOverflow(n))))),this.itemDelimiter=" | ",this.messages=null,this.viewModel=new Kye}initialize(){this.addHandles(eo((()=>{var e;return(e=this.viewModel)==null?void 0:e.items}),"change",(()=>this.scheduleRender())))}destroy(){var e;(e=this._resizeObserver)==null||e.disconnect()}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce(((e,i)=>(e.includes(i.text)||e.push(i.text),e)),[]).join(this.itemDelimiter)}get icon(){return"description"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const e={[S_.open]:this._isOpen};return G("div",{bind:this,class:this.classes(S_.base,Vt.widget,e),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this._renderSourcesNode(),this._renderPoweredBy())}_renderPoweredBy(){return G("div",{class:S_.poweredBy},"Powered by"," ",G("a",{class:S_.link,href:"https://www.esri.com/",rel:"noreferrer",target:"_blank"},"Esri"))}_renderSourcesNode(){const e=this._isOpen,i=this._isInteractive,r=i?0:void 0,{attributionText:n}=this,s={[S_.sourcesOpen]:e,[Vt.interactive]:i};return G("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(S_.sources,s),innerHTML:n,tabIndex:r})}_afterSourcesNodeCreate(e){this._prevSourceNodeHeight=e.clientWidth,this._resizeObserver.observe(e)}_checkSourceTextOverflow(e){let i=!1;const{clientHeight:r,clientWidth:n,scrollWidth:s}=e,o=s>n,a=this._attributionTextOverflowed!==o;if(this._attributionTextOverflowed=o,a&&(i=!0),this._isOpen){const l=r<this._prevSourceNodeHeight;this._prevSourceNodeHeight=r,l&&(this._isOpen=!1,i=!0)}i&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};u([h()],Ho.prototype,"_isOpen",void 0),u([h()],Ho.prototype,"_isInteractive",null),u([h()],Ho.prototype,"_attributionTextOverflowed",void 0),u([h()],Ho.prototype,"_prevSourceNodeHeight",void 0),u([h({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],Ho.prototype,"attributionText",null),u([h()],Ho.prototype,"icon",null),u([h()],Ho.prototype,"itemDelimiter",void 0),u([h()],Ho.prototype,"label",null),u([h(),nn("esri/widgets/Attribution/t9n/Attribution")],Ho.prototype,"messages",void 0),u([h()],Ho.prototype,"view",null),u([h({type:Kye})],Ho.prototype,"viewModel",void 0),u([y6e()],Ho.prototype,"_toggleState",null),Ho=u([V("esri.widgets.Attribution")],Ho);const x6e=Ho;function S6e(){const t=fe("mapview-essential-goto-duration");return t==null?t:t}function $6e(t){var e,i;return((e=t==null?void 0:t.spatialReference)==null?void 0:e.isWebMercator)||((i=t==null?void 0:t.spatialReference)==null?void 0:i.isGeographic)||!1}function T6e(t,e,i){return t.goTo(e,i)}const ege=t=>{let e=class extends t{constructor(...i){super(...i),this.goToOverride=null,this.view=null}callGoTo(i){const{view:r}=this;return r2(r),this.goToOverride?this.goToOverride(r,i):T6e(r,i.target,i.options)}};return u([h()],e.prototype,"goToOverride",void 0),u([h()],e.prototype,"view",void 0),e=u([V("esri.widgets.support.GoTo")],e),e};let b0=class extends ege(tt){constructor(e){super(e),this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this._watchForView(kt)}destroy(){this.view=null}get canShowNorth(){return $6e(this.view)}get state(){var e;return!((e=this.view)!=null&&e.ready)||this.view.type==="2d"&&!this.view.constraints.rotationEnabled?"disabled":this.canShowNorth?"compass":"rotation"}reset(){var e,i;(e=this.view)!=null&&e.ready&&(((i=this.view)==null?void 0:i.type)==="2d"?this.callGoTo({target:{rotation:0},options:{animationMode:"always",duration:S6e()}}):this.callGoTo({target:{heading:0}}))}_updateForRotation(e){e!=null&&this._set("orientation",{z:e})}_updateForCamera(e){if(!e)return;const i=-e.heading;this._set("orientation",{x:0,y:0,z:i})}_updateRotationWatcher(e){this.removeAllHandles(),this._watchForView(),e&&this.addHandles(e.type==="2d"?$e((()=>e==null?void 0:e.rotation),this._updateForRotation,kt):$e((()=>e==null?void 0:e.camera),this._updateForCamera,kt))}_watchForView(e){this.addHandles($e((()=>this.view),this._updateRotationWatcher,e))}};u([h({readOnly:!0})],b0.prototype,"canShowNorth",null),u([h({readOnly:!0})],b0.prototype,"orientation",void 0),u([h({readOnly:!0})],b0.prototype,"state",null),u([h()],b0.prototype,"view",void 0),b0=u([V("esri.widgets.Compass.CompassViewModel")],b0);const tge=b0,ute="esri-compass",dte={base:ute,iconContainer:`${ute}__icon-container`};let ef=class extends Zi{constructor(e,i){super(e,i),this.messages=null,this.viewModel=new tge,this._reset=()=>{this.viewModel.reset()},this._toRotationTransform=r=>({transform:`rotateZ(${r.z}deg)`})}loadDependencies(){return zl({button:()=>ye(()=>Promise.resolve().then(()=>yD),void 0),icon:()=>ye(()=>Promise.resolve().then(()=>X$),void 0)})}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get icon(){return this.viewModel.state==="rotation"?"arrow-up":"compass-needle"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}reset(){return this.viewModel.reset()}render(){const{orientation:e,state:i}=this.viewModel,{messages:r}=this;return G("div",{class:this.classes(dte.base,Vt.widget)},G("calcite-button",{class:Vt.widgetButton,disabled:i==="disabled",kind:"neutral",label:r.reset,onclick:this._reset,round:!0,scale:"s",title:r.reset},G("div",{"aria-hidden":"true",class:dte.iconContainer,title:r.reset},G("calcite-icon",{icon:this.icon,styles:this._toRotationTransform(e)}))))}};u([h()],ef.prototype,"goToOverride",null),u([h()],ef.prototype,"icon",null),u([h()],ef.prototype,"label",null),u([h(),nn("esri/widgets/Compass/t9n/Compass")],ef.prototype,"messages",void 0),u([h()],ef.prototype,"view",null),u([h({type:tge})],ef.prototype,"viewModel",void 0),ef=u([V("esri.widgets.Compass")],ef);const E6e=ef,hte="esri-navigation-toggle",pte={base:hte,isLayoutHorizontal:`${hte}--horizontal`};let n1=class extends tt{constructor(e){super(e),this._navigationMode="pan",this.view=null,e!=null&&e.isDefaultViewModel||IEe(Ie.getLogger(this),"Navigation Toggle","arcgis-navigation-toggle",{version:"4.33"})}normalizeCtorArgs(e={}){const{isDefaultViewModel:i,...r}=e;return r}initialize(){this.addHandles(Sn((()=>{var e,i;return(i=(e=this.view)==null?void 0:e.navigation)==null?void 0:i.actionMap}),(()=>this._updateNavigationActionMap())))}destroy(){this.view=null}get state(){var e,i;return(e=this.view)!=null&&e.ready&&((i=this.view)==null?void 0:i.type)==="3d"?"ready":"disabled"}get navigationMode(){return this._navigationMode}set navigationMode(e){this._navigationMode=e,this._updateNavigationActionMap()}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate")}_updateNavigationActionMap(){var r,n;const e=(n=(r=this.view)==null?void 0:r.navigation)==null?void 0:n.actionMap;if(!e)return;const i=this._navigationMode==="pan";e.dragPrimary=i?"pan":"rotate",e.dragSecondary=i?"rotate":"pan"}};u([h({readOnly:!0})],n1.prototype,"state",null),u([h()],n1.prototype,"_navigationMode",void 0),u([h()],n1.prototype,"view",void 0),n1=u([V("esri.widgets.NavigationToggle.NavigationToggleViewModel")],n1);const ige=n1;let tf=class extends Zi{constructor(e,i){super(e,i),this.messages=null,this.viewModel=new ige({isDefaultViewModel:!0}),this.toggle=()=>this.viewModel.toggle(),this._panButton=null,this._rotateButton=null,this._toggle=()=>{var n;const r=((n=this.viewModel)==null?void 0:n.navigationMode)==="pan"?this._rotateButton:this._panButton;Gye(r),this.toggle()},e!=null&&e.isDefaultUI||EEe(Ie.getLogger(this),"Navigation Toggle","arcgis-navigation-toggle",{version:"4.32"})}normalizeCtorArgs(e={}){const{isDefaultUI:i,...r}=e;return r}loadDependencies(){return zl({button:()=>ye(()=>Promise.resolve().then(()=>yD),void 0)})}get icon(){return"move"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){var n,s;const e=((n=this.viewModel)==null?void 0:n.state)==="disabled",i=((s=this.viewModel)==null?void 0:s.navigationMode)==="pan",r=this.messages.toggle;return G("div",{class:this.classes(pte.base,Vt.widget,{[pte.isLayoutHorizontal]:this.layout==="horizontal"})},G("calcite-button",{afterCreate:o=>{this._panButton=o},appearance:i?"outline-fill":"solid",class:Vt.widgetButton,disabled:e,iconStart:"move",kind:"neutral",label:r,onclick:this._toggle,tabIndex:i?void 0:-1,title:r}),G("calcite-button",{afterCreate:o=>{this._rotateButton=o},appearance:i?"solid":"outline-fill",class:Vt.widgetButton,disabled:e,iconStart:"rotate",kind:"neutral",label:r,onclick:this._toggle,tabIndex:i?-1:void 0,title:r}))}};u([h()],tf.prototype,"icon",null),u([h()],tf.prototype,"label",null),u([h({value:"vertical"})],tf.prototype,"layout",null),u([h(),nn("esri/widgets/NavigationToggle/t9n/NavigationToggle")],tf.prototype,"messages",void 0),u([h()],tf.prototype,"view",null),u([h({type:ige})],tf.prototype,"viewModel",void 0),tf=u([V("esri.widgets.NavigationToggle")],tf);const I6e=tf;let w0=class extends tt{get canZoomIn(){var r,n,s;if(!((r=this.view)==null?void 0:r.ready))return!1;const i=(s=(n=this.view)==null?void 0:n.constraints)==null?void 0:s.effectiveMaxScale;return i===0||this._scale>i}get canZoomOut(){var n;const{view:e}=this;if(!(e==null?void 0:e.ready))return!1;const r=(n=e.constraints)==null?void 0:n.effectiveMinScale;return r===0||this._scale<r}get _scale(){var i,r,n;const e=(r=(i=this.view)==null?void 0:i.animation)==null?void 0:r.target;return(e&&"then"in e||e==null?void 0:e.scale)??((n=this.view)==null?void 0:n.scale)??0}};u([h({readOnly:!0})],w0.prototype,"canZoomIn",null),u([h({readOnly:!0})],w0.prototype,"canZoomOut",null),u([h()],w0.prototype,"view",void 0),u([h()],w0.prototype,"_scale",null),w0=u([V("esri.widgets.Zoom.ZoomConditions2D")],w0);const C6e=w0;let s1=class extends tt{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};u([h({readOnly:!0})],s1.prototype,"canZoomIn",null),u([h({readOnly:!0})],s1.prototype,"canZoomOut",null),u([h()],s1.prototype,"view",void 0),s1=u([V("esri.widgets.Zoom.ZoomConditions3D")],s1);const M6e=s1;let vy=class extends tt{constructor(e){super(e)}destroy(){this.view=null}get canZoomIn(){return this._zoomConditions!=null&&this._zoomConditions.canZoomIn}get canZoomOut(){var e;return this._zoomConditions!=null&&((e=this._zoomConditions)==null?void 0:e.canZoomOut)}get state(){var e;return(e=this.view)!=null&&e.ready?"ready":"disabled"}set view(e){e?e.type==="2d"?this._zoomConditions=new C6e({view:e}):e.type==="3d"&&(this._zoomConditions=new M6e({view:e})):this._zoomConditions=null,this._set("view",e)}zoomIn(){const e=this.view;this.canZoomIn&&e&&(e.type==="2d"?e.mapViewNavigation.zoomIn():Wu(e.goTo({zoomFactor:2})))}zoomOut(){const e=this.view;this.canZoomOut&&e&&(e.type==="2d"?e.mapViewNavigation.zoomOut():Wu(e.goTo({zoomFactor:.5})))}};u([h()],vy.prototype,"_zoomConditions",void 0),u([h()],vy.prototype,"canZoomIn",null),u([h()],vy.prototype,"canZoomOut",null),u([h({readOnly:!0})],vy.prototype,"state",null),u([h()],vy.prototype,"view",null),vy=u([V("esri.widgets.Zoom.ZoomViewModel")],vy);const rge=vy,fte={base:"esri-zoom",horizontalLayout:"esri-zoom--horizontal"};let rf=class extends Zi{constructor(e,i){super(e,i),this.messages=null,this.viewModel=new rge,this.zoomIn=()=>this.viewModel.zoomIn(),this.zoomOut=()=>this.viewModel.zoomOut()}loadDependencies(){return zl({button:()=>ye(()=>Promise.resolve().then(()=>yD),void 0)})}get icon(){return"magnifying-glass-plus"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}set view(e){this.viewModel.view=e}get view(){return this.viewModel.view}render(){const e={[fte.horizontalLayout]:this.layout==="horizontal"},{canZoomIn:i,canZoomOut:r}=this.viewModel,{zoomIn:n,zoomOut:s}=this.messages;return G("div",{class:this.classes(fte.base,Vt.widget,e)},G("calcite-button",{class:Vt.widgetButton,disabled:!i,iconStart:"plus",kind:"neutral",label:n,onclick:this.zoomIn,title:n}),G("calcite-button",{class:Vt.widgetButton,disabled:!r,iconStart:"minus",kind:"neutral",label:s,onclick:this.zoomOut,title:s}))}};u([h()],rf.prototype,"icon",null),u([h()],rf.prototype,"label",null),u([h({value:"vertical"})],rf.prototype,"layout",null),u([h(),nn("esri/widgets/Zoom/t9n/Zoom")],rf.prototype,"messages",void 0),u([h()],rf.prototype,"view",null),u([h({type:rge})],rf.prototype,"viewModel",void 0),rf=u([V("esri.widgets.Zoom")],rf);const k6e=rf;function P6e(t){return(t==null?void 0:t.view)!==void 0}let LL=class extends YUe{constructor(e){super(e),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[],this._updateViewAwareWidgets=i=>{this.components.forEach((r=>{const n=this._find(r),s=n==null?void 0:n.widget;P6e(s)&&(s.view=i)}))},this._componentsWatcher=(i,r)=>{this._removeComponents(r),this._addComponents(i),this._adjustPadding(i)}}initialize(){this.addHandles([$e((()=>this.components),this._componentsWatcher,kt),$e((()=>this.view),this._updateViewAwareWidgets,kt)])}_add(e,i,r,n,s){let o=e;if(typeof e=="string"&&this._defaultPositionLookup[e]){if(this._find(e))return;o=this._createComponent(e)}super._add(o,i,r,n,s)}_removeComponents(e){e.forEach((i=>{const r=this._find(i);r&&(this.remove(r),r.destroy())}))}_adjustPadding(e){if(!e.includes("attribution")&&!this._isOverridden("padding")){const{top:i}=this.padding;this.padding=i}}_addComponents(e){this.constructed&&e.forEach((i=>this.add(this._createComponent(i),this._defaultPositionLookup[i])))}_createComponent(e){const i=this._createWidget(e);return new AL({id:e,node:i})}_createWidget(e){const i=this.view;switch(e){case"attribution":return new x6e({view:i});case"compass":return new E6e({view:i});case"navigation-toggle":return new I6e({view:i,isDefaultUI:!0});case"zoom":return new k6e({view:i})}}};u([h()],LL.prototype,"components",void 0),LL=u([V("esri.views.ui.DefaultUI")],LL);const nge=LL;let RL=class extends nge{constructor(e){super(e),this.components=["attribution","zoom"]}};u([h()],RL.prototype,"components",void 0),RL=u([V("esri.views.ui.2d.DefaultUI2D")],RL);const sge=RL;let oge=class SB{constructor(e,i,r=""){this.major=e,this.minor=i,this._context=r}lessThan(e,i){return this.major<e||e===this.major&&this.minor<i}greaterEqual(e,i){return!this.lessThan(e,i)}validate(e){if(this.major!==e.major){const i=this._context&&this._context+":",r=this._context&&this._context+" ";throw new ie(i+"unsupported-version",`Required major ${r}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:e})}}clone(){return new SB(this.major,this.minor,this._context)}static parse(e,i=""){const[r,n]=e.split("."),s=/^\s*\d+\s*$/;if(!(r!=null&&r.match)||!s.test(r))throw new ie((i&&i+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:e});if(!(n!=null&&n.match)||!s.test(n))throw new ie((i&&i+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:e});const o=parseInt(r,10),a=parseInt(n,10);return new SB(o,a,i)}},Cx=class extends oge{constructor(e,i){super(e,i,"webmap")}};function y4(t){return t!=null&&typeof t=="object"&&"declaredClass"in t&&t.declaredClass==="esri.WebMap"}const age=new Cx(2,34);var $B;let OL=$B=class extends ve{constructor(t){super(t),this.color=new _e([0,0,0,1])}clone(){return new $B(se({color:this.color}))}};u([h({type:_e,json:{write:!0}})],OL.prototype,"color",void 0),OL=$B=u([V("esri.webmap.background.ColorBackground")],OL);const MN=OL;let lge,cge,uge,dge,hge,pge,fge;async function A6e(){const[,{GraphicsView2D:t,GraphicContainer:e,LabelManager:i,MapViewNavigation:r,MagnifierView2D:n,GridView2D:s,Stage:o}]=await Promise.all([ye(()=>import("./webglDeps-5_lJRAuR.js"),__vite__mapDeps([154,155,156,157])),ye(()=>import("./mapViewDeps-Dvx3V1jo.js"),__vite__mapDeps([158,159,66,160,156,155,129,107,62,161,63,37,162,61,82,163,114,113,69,14,64,70,164,67,68,112,154,157,165,77,166,167,168,126,123,105,60,12,8,17,169,170,65,171,72,172,74,42,58,173,174,175,176,122,177,178]))]);cge=t,uge=e,dge=i,hge=r,pge=n,fge=s,lge=o}var _S;let _i=(_S=class extends MVe(a4e(VAe(pRe(YLe(UDe))))){constructor(e){super(e),this._magnifierView=null,this._gridView=null,this.stage=null,this._resolveWhenReady=[],this.rootLayerViews=new ph({getCollections:()=>{var i,r;return[(i=this.basemapView)==null?void 0:i.baseLayerViews,this.layerViews,(r=this.basemapView)==null?void 0:r.referenceLayerViews]},getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.graphicsView=null,this.labelManager=null,this.navigation=new xN({actionMap:new Oq({dragTertiary:"none"})}),this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.supersampleScreenshotsEnabled=!0,this.supportsGround=!1,this.floors=new Ze,this.grid=null,this.map=null,this.spatialReferenceLocked=!1,this.timeline=new zye,this.type="2d",this.view2dType=null,this.ui=new sge,this.test={takeScreenshot:async i=>TUe(this._getScreenshotView(i),i)},this.padding={top:0,right:0,bottom:0,left:0},KPe()}destroy(){this.layerViewManager.clear(),this._set("preconditionsReady",!1),this.frameTask=hr(this.frameTask),this.goToManager.destroy(),this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new Eje(this.featuresTilingScheme)}get constraintsInfo(){var r,n;const e=(r=this.defaultsFromMap)==null?void 0:r.tileInfo,i=this.spatialReference;return{lods:(n=e==null?void 0:e.spatialReference)!=null&&n.equals(i)?e.lods:null,spatialReference:i}}get initialExtentRequired(){var a;if(!this.stateManager)return!1;const{scale:e,constraints:i,center:r,viewpoint:n,extent:s}=this;let o=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&((a=this.map.initialViewProperties)!=null&&a.viewpoint))&&!s&&(i!=null&&i.effectiveLODs||(o=-1),(!r||e===0&&o===-1)&&((n==null?void 0:n.targetGeometry)==null||n.targetGeometry.type!=="extent"&&!n.scale))}get defaultsFromMapSettings(){return{required:{extent:!1,heightModelInfo:!1,tileInfo:!0},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get scheduler(){return this.frameTask.scheduler}get typeSpecificPreconditionsReady(){const e=this._getDefaultViewpoint();if(!e)return!1;const i=e.targetGeometry,r=this.spatialReference;return $he(i.spatialReference,r)}get background(){return y4(this.map)?this.map.initialViewProperties.background:null}set background(e){this._override("background",e)}get center(){var e;return((e=this.stateManager)==null?void 0:e.center)??null}set center(e){this.stateManager.center=e}get highlightOptions(){return lUe(this)}set highlightOptions(e){cUe(this,e)}get padding(){var e;return(e=this.stateManager)==null?void 0:e.padding}set padding(e){this.stateManager&&(this.stateManager.padding=e)}get rendering(){var e;return((e=this.stage)==null?void 0:e.renderRequested)??!1}get resolution(){return this.stateManager.resolution??0}get scale(){var e;return((e=this.stateManager)==null?void 0:e.scale)??0}set scale(e){this.stateManager&&(this.stateManager.scale=e)}get tileInfo(){var e;return(e=this.featuresTilingScheme)==null?void 0:e.tileInfo}get updating(){var r,n,s,o;const e=!(!this.magnifier.visible||this.magnifier.position===null||!((r=this._magnifierView)!=null&&r.updatingHandles.updating)),i=!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some((a=>!a.destroyed&&!("layerViews"in a)&&a.updating===!0))||e);if(fe("esri-2d-log-updating")){const a=this.allLayerViews.reduce(((l,c)=>({...l,[`${c.layer.id}(${c.layer.type})`]:!c.destroyed&&!("layerViews"in c)&&c.updating})),{});console.log(`Updating MapView: ${i}
-> Null LayerViewManager: ${!this.layerViewManager}
-> Null LabelManager: ${!this.labelManager}
-> Null GraphicsView: ${!this.graphicsView}
-> layerViewManager.updating: ${(n=this.layerViewManager)==null?void 0:n.updating}
-> labelManager.updating: ${(s=this.labelManager)==null?void 0:s.updating}
-> graphicsView.updating: ${(o=this.graphicsView)==null?void 0:o.updating}
-> allLayerViews: ${JSON.stringify(a)}
-> updatingMagnifier: ${e}
`)}return i}get visibleArea(){const e=this.stateManager.visibleArea;return e&&new br({rings:[e.map((i=>[i[0],i[1]]))],spatialReference:this.spatialReference})}get zoom(){return this.stateManager.zoom??-1}set zoom(e){this.stateManager.zoom=e}get navigating(){var e;return((e=this.mapViewNavigation)==null?void 0:e.interacting)??!1}async hitTest(e,i){return uUe(this,e,i)}async takeScreenshot(e){return $Ue(this._getScreenshotView(e),e)}toScreen(e,i){return this.stateManager.toScreen(e,i)}whenLayerView(e){return super.whenLayerView(e)}graphicChanged(e){this.graphicsView&&this.graphicsView.graphicUpdateHandler(e)}whenReady(){return new Promise((e=>{this.ready?e(this):this._resolveWhenReady.push(e)}))}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){var e;return this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties.spatialReference||((e=this.defaultsFromMap)==null?void 0:e.spatialReference)||null}getDefaultTimeZone(){return y4(this.map)?this.map.initialViewProperties.timeZone:null}getDefaultTimeExtent(){return y4(this.map)?this.map.initialViewProperties.timeExtent:null}hasLayerViewModule(e){return iee.hasLayerViewModule(e)}importLayerView(e){return iee.importLayerView(e)}pixelSizeAt(){return this.ready?this.resolution:(Ie.getLogger(this).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}async popupHitTest(e){var c;const i=this.toMap(e),r=await this.hitTest(e),n=this.allLayerViews.toArray().filter((d=>d.clips.every((f=>Cye(this,f,e,i))))).reverse(),s=new globalThis.Map(n.map((d=>[d.layer.uid,d]))),o=[];let a=0,l=0;for(;a<r.results.length||l<n.length;){const d=r.results.at(a);if(d&&d.type!=="graphic"){++a;continue}const f=s.get((c=(d==null?void 0:d.layer)??(d==null?void 0:d.graphic.layer))==null?void 0:c.uid);if((!d||f)&&l<n.length&&n.at(l)!==f){const y=n.at(l);"fetchPopupFeaturesAtLocation"in y&&o.push({mapPoint:i,layerView:y}),++l}else d&&(o.push({graphic:d.graphic,layerView:f}),++a)}return{hits:o,location:i}}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}async validate(){let e=FUe(this.type);if(fe("safari")&&fe("safari")<9&&(e=new ie("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:fe("safari")})),e!=null){Ie.getLogger(this).warn("#validate()",e.message);const i=document.createElement("div");i.setAttribute("style","display: flex; flex-direction: column; gap: 8px; padding: 20px; height: 100%; justify-content: center; color: black; background: white; font-family: sans-serif;");const r=document.createElement("div");r.innerHTML="Unable to display map. WebGL2 support is required.",r.setAttribute("style","font-size: 24px; font-weight: bold;");const n=document.createElement("div");n.innerHTML="Ensure that your browser and hardware meet the minimum requirements.",n.setAttribute("style","font-size: 18px;");const s=document.createElement("a");throw s.innerHTML="https://esriurl.com/systemRequirements",s.target="_blank",s.setAttribute("style","font-size: 18px;"),s.href="https://esriurl.com/systemRequirements",i.appendChild(r),i.appendChild(n),i.appendChild(s),this.surface.appendChild(i),e}}loadAsyncDependencies(){return A6e()}_getDefaultViewpoint(){var x;const{constraints:e,initialExtent:i,map:r,padding:n,size:s}=this;if(!e)return null;const o=r&&"initialViewProperties"in r?r.initialViewProperties:void 0,a=this.stateManager.getUserStartupOptions(this.size),l=o==null?void 0:o.viewpoint,c=((x=l==null?void 0:l.targetGeometry)==null?void 0:x.extent)??i,d=c==null?void 0:c.center,f=(l==null?void 0:l.rotation)??0,y=(l==null?void 0:l.scale)||c&&TN(c,[s[0]-n.left-n.right,s[1]-n.top-n.bottom]),g=a.center??d,b=a.rotation??f,_=a.scale??y;return g&&_?new ps({targetGeometry:g,scale:_,rotation:b}):null}_startup(){var l;this.timeline.begin("MapView Startup");const e=this._getDefaultViewpoint();this.stateManager.startup(e,this.size,this.spatialReference,(l=this.defaultsFromMap.extent)==null?void 0:l.center),this.graphics.owner=this;const i=new gje(this.surface),r=new lge(this.surface,{canvas:this.renderCanvas,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline},i);this.stage=r,this._magnifierView=new pge,this._magnifierView.magnifier=this.magnifier,this._gridView=new fge;const n=new dge({view:this});this._set("labelManager",n);const s=new aje({view:this});this._set("animationManager",s);const o=new hge({view:this,animationManager:s});this._set("mapViewNavigation",o),this._setupSpatialReferenceDependentProperties(),this.addHandles([this.rootLayerViews.on("change",(()=>this._updateStageChildren())),r.on("webgl-error",(c=>this.fatalError=c.error)),$e((()=>this.stationary),(c=>r.stationary=c),ta),$e((()=>this.background),(c=>{r.backgroundColor=c==null?void 0:c.color,this._magnifierView.backgroundColor=c==null?void 0:c.color}),ta),$e((()=>this.magnifier),(c=>this._magnifierView.magnifier=c),ta),$e((()=>this.grid),(c=>this._gridView.grid=c),ta),$e((()=>this.renderingOptions),(c=>r.renderingOptions=c),ta),$e((()=>this.highlights.items.map((c=>({name:c.name,options:{fillColor:c.color,haloColor:c.haloColor,fillOpacity:c.fillOpacity,haloOpacity:c.haloOpacity,haloWidth:c.haloWidth,haloBlur:c.haloBlur}})))),(()=>{r.highlightGradient=oUe(r.highlightGradient,this.highlights.items)}),ta),$e((()=>this.state.id),(()=>r.state=this.state),ta)],"map-view"),this._updateStageChildren();const a=this._resolveWhenReady;this._resolveWhenReady=[],a.forEach((c=>c(this))),this.timeline.end("MapView Startup"),this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.removeHandles("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animation=null,this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._gridView.destroy(),this.stage.destroy(),this.stage=null,this._set("graphicsView",null),this._magnifierView=null,this._gridView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask.stop(),this.stationaryManager.clear(),this._set("ready",!1),this.stateManager.teardown()}_updateStageChildren(){this.stage.removeAllChildren(),this.rootLayerViews.forEach((i=>{this.stage.addChild(i.container)}));const e=this.graphicsView;this.stage.addChild(e.container),this.stage.addChild(this._magnifierView),this.stage.addChild(this._gridView)}_setupSpatialReferenceDependentProperties(){const e=new pje(Us.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",e);const i=new cge({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new uge(e)});this._set("graphicsView",i)}_destroySpatialReferenceDependentProperties(){const e=this.graphicsView;this._set("graphicsView",null),e.destroy(),this._set("featuresTilingScheme",null)}_getScreenshotView(e){var o;const{allLayerViews:i,padding:r,size:n,stage:s}=this;return{allLayerViews:i,backgroundColor:e!=null&&e.ignoreBackground?null:(o=this.background)==null?void 0:o.color,padding:r,size:n,stage:s}}_spatialReferenceChanged(e){if(this.ready){this.frameTask.stop();for(const i of this.allLayerViews)i.processDetach();this._destroySpatialReferenceDependentProperties(),this.stateManager.changeSpatialReference(e),this.stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const i of this.allLayerViews)i.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}}},_S.type="2d",_S);u([h({constructOnly:!0})],_i.prototype,"deactivatedWebGLExtensions",void 0),u([h({constructOnly:!0})],_i.prototype,"debugWebGLExtensions",void 0),u([h({readOnly:!0})],_i.prototype,"featuresTilingScheme",void 0),u([h({readOnly:!0})],_i.prototype,"graphicsTileStore",null),u([h()],_i.prototype,"graphicsView",void 0),u([h()],_i.prototype,"constraintsInfo",null),u([h()],_i.prototype,"initialExtentRequired",null),u([h()],_i.prototype,"labelManager",void 0),u([h({type:xN,nonNullable:!0})],_i.prototype,"navigation",void 0),u([h({constructOnly:!0})],_i.prototype,"renderCanvas",void 0),u([h()],_i.prototype,"renderingOptions",void 0),u([h({constructOnly:!0})],_i.prototype,"supersampleScreenshotsEnabled",void 0),u([h({readOnly:!0})],_i.prototype,"supportsGround",void 0),u([h()],_i.prototype,"defaultsFromMapSettings",null),u([h({readOnly:!0})],_i.prototype,"typeSpecificPreconditionsReady",null),u([h({type:MN})],_i.prototype,"background",null),u([h()],_i.prototype,"center",null),u([h({type:Ze})],_i.prototype,"floors",void 0),u([h()],_i.prototype,"grid",void 0),u([h({type:wg})],_i.prototype,"highlightOptions",null),u([h()],_i.prototype,"map",void 0),u([h()],_i.prototype,"padding",null),u([h({readOnly:!0})],_i.prototype,"rendering",null),u([h({readOnly:!0})],_i.prototype,"resolution",null),u([h()],_i.prototype,"scale",null),u([h({constructOnly:!0})],_i.prototype,"spatialReferenceLocked",void 0),u([h({readOnly:!0})],_i.prototype,"tileInfo",null),u([h({type:zye,readOnly:!0})],_i.prototype,"timeline",void 0),u([h({readOnly:!0})],_i.prototype,"type",void 0),u([h({readOnly:!0})],_i.prototype,"updating",null),u([h({readOnly:!0})],_i.prototype,"view2dType",void 0),u([h({readOnly:!0})],_i.prototype,"visibleArea",null),u([h()],_i.prototype,"zoom",null),u([h({readOnly:!0})],_i.prototype,"navigating",null),u([h(),yi((t=>t instanceof nge?t:c2(sge,t)))],_i.prototype,"ui",void 0),_i=u([V("esri.views.View2D")],_i);const L6e=_i;let FL=class extends L6e{constructor(e){super(e),this.view2dType="map"}};u([h({readOnly:!0})],FL.prototype,"view2dType",void 0),FL=u([V("esri.views.MapView")],FL);const R6e=FL;let O6e=class mge{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(mj),this._values=new Map,this.multipleOriginsSupported=!0}clone(e){const i=new mge,r=this._originStores[Nt.DEFAULTS];r&&r.forEach(((n,s)=>{i.set(s,se(n),Nt.DEFAULTS)}));for(let n=Nt.SERVICE;n<mj;n++){const s=this._originStores[n];s&&s.forEach(((o,a)=>{e&&e.has(a)||i.set(a,se(o),n)}))}return i}get(e,i){const r=i===void 0?this._values:this._originStores[i];return r?r.get(e):void 0}keys(e){const i=e==null?this._values:this._originStores[e];return i?[...i.keys()]:[]}set(e,i,r=Nt.USER){let n=this._originStores[r];if(n||(n=new Map,this._originStores[r]=n),n.set(e,i),!this._values.has(e)||this._propertyOriginMap.get(e)<=r){const s=this._values.get(e);return this._values.set(e,i),this._propertyOriginMap.set(e,r),s!==i}return!1}delete(e,i=Nt.USER){const r=this._originStores[i];if(!r)return;const n=r.get(e);if(r.delete(e),this._values.has(e)&&this._propertyOriginMap.get(e)===i){this._values.delete(e);for(let s=i-1;s>=0;s--){const o=this._originStores[s];if(o&&o.has(e)){this._values.set(e,o.get(e)),this._propertyOriginMap.set(e,s);break}}}return n}has(e,i){const r=i===void 0?this._values:this._originStores[i];return!!r&&r.has(e)}revert(e,i){for(;i>0&&!this.has(e,i);)--i;const r=this._originStores[i],n=r==null?void 0:r.get(e),s=this._values.get(e);return this._values.set(e,n),this._propertyOriginMap.set(e,i),s!==n}originOf(e){return this._propertyOriginMap.get(e)||Nt.DEFAULTS}isAtOrigin(e,i){return this.has(e,i)&&this.originOf(e)===i}isBelowOrigin(e,i){return!this.has(e)||this.originOf(e)<i}forEach(e){this._values.forEach(e)}};const yge=t=>{let e=class extends t{constructor(...i){super(...i);const r=da(this),n=r.store,s=new O6e;r.store=s,hce(r,n,s)}read(i,r){fce(this,i,r)}getAtOrigin(i,r){const n=g4(this),s=Bf(r);if(typeof i=="string")return n.get(i,s);const o={};return i.forEach((a=>{o[a]=n.get(a,s)})),o}originOf(i){return GC(this.originIdOf(i))}originIdOf(i){return g4(this).originOf(i)}revert(i,r){const n=g4(this),s=Bf(r),o=da(this);let a;a=typeof i=="string"?i==="*"?n.keys(s):[i]:i,a.forEach((l=>{o.invalidate(l),n.revert(l,s),o.commit(l)}))}};return e=u([V("esri.core.ReadOnlyMultiOriginJSONSupport")],e),e};function g4(t){return da(t).store}let mte=class extends yge(tt){};mte=u([V("esri.core.ReadOnlyMultiOriginJSONSupport")],mte);const F6e=t=>{let e=class extends t{constructor(...i){super(...i)}clear(i,r="user"){da(this).clearOrigin(i,Bf(r))}write(i,r){return gce(this,i=i||{},r),i}setAtOrigin(i,r,n){da(this).setAtOrigin(i,r,Bf(n))}removeOrigin(i){const r=yte(this),n=Bf(i),s=r.keys(n);for(const o of s)r.originOf(o)===n&&r.set(o,r.get(o,n),Nt.USER)}updateOrigin(i,r){const n=yte(this),s=Bf(r),o=Mc(this,i);for(let a=s+1;a<mj;++a)n.delete(i,a);n.set(i,o,s)}toJSON(i){return this.write({},i)}};return e=u([V("esri.core.MultiOriginJSONSupport.WriteableMultiOriginJSONSupport")],e),e.prototype.toJSON.isDefaultToJSON=!0,e};function yte(t){return da(t).store}const kN=t=>{let e=class extends F6e(yge(t)){constructor(...i){super(...i)}};return e=u([V("esri.core.MultiOriginJSONSupport")],e),e};let TB=class extends kN(tt){};TB=u([V("esri.core.MultiOriginJSONSupport")],TB);async function N6e(t){const e=t.spatialReference;if(e.isWGS84)return t.clone();if(e.isWebMercator)return W1(t);const i=et.WGS84;return await sN(e,i),um(t,i)}function D6e(t,e){if(!Xq(t,e)){const i=t.typeKeywords;i?i.push(e):t.typeKeywords=[e]}}function Xq(t,e){var i;return!!((i=t.typeKeywords)!=null&&i.includes(e))}function b0t(t){return Xq(t,Kq.HOSTED_SERVICE)}function z6e(t,e){const i=t.typeKeywords;if(i){const r=i.indexOf(e);r>-1&&i.splice(r,1)}}function w0t(t,e,i){i?D6e(t,e):z6e(t,e)}async function _0t(t){const e=t.clone().normalize();let i;if(e.length>1)for(const r of e)i?r.width>i.width&&(i=r):i=r;else i=e[0];return N6e(i)}const Kq={CHARTS:"Charts",DYNAMIC:"Dynamic",DEVELOPER_BASEMAP:"DeveloperBasemap",GROUP_LAYER_MAP:"Map",HOSTED_SERVICE:"Hosted Service",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",ORIENTED_IMAGERY_LAYER:"OrientedImageryLayer",SINGLE_LAYER:"Singlelayer",SUBTYPE_GROUP_LAYER:"SubtypeGroupLayer",SUBTYPE_GROUP_TABLE:"SubtypeGroupTable",TABLE:"Table",TILED_IMAGERY:"Tiled Imagery"};function V6e(t){var l;const{portal:e,isOrgItem:i,itemControl:r}=t,n=(l=e.user)==null?void 0:l.privileges;let s=!n||n.includes("features:user:edit"),o=!!i&&!!(n!=null&&n.includes("features:user:fullEdit"));const a=r==="update"||r==="admin";return a?o=s=!0:o&&(s=!0),{features:{edit:s,fullEdit:o},content:{updateItem:a}}}let by=class extends ve{constructor(e){super(e),this.facilityIdField=null,this.layerId=null,this.nameField=null,this.siteIdField=null,this.sublayerId=null}};u([h({type:String,json:{write:{isRequired:!0}}})],by.prototype,"facilityIdField",void 0),u([h({type:String,json:{write:{isRequired:!0}}})],by.prototype,"layerId",void 0),u([h({type:String,json:{write:{isRequired:!0}}})],by.prototype,"nameField",void 0),u([h({type:String,json:{write:!0}})],by.prototype,"siteIdField",void 0),u([h({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],by.prototype,"sublayerId",void 0),by=u([V("esri.layers.support.FacilityLayerInfo")],by);const j6e=by;let bu=class extends ve{constructor(e){super(e),this.facilityIdField=null,this.layerId=null,this.levelIdField=null,this.levelNumberField=null,this.longNameField=null,this.shortNameField=null,this.sublayerId=null,this.verticalOrderField=null}};u([h({type:String,json:{write:{isRequired:!0}}})],bu.prototype,"facilityIdField",void 0),u([h({type:String,json:{write:{isRequired:!0}}})],bu.prototype,"layerId",void 0),u([h({type:String,json:{write:{isRequired:!0}}})],bu.prototype,"levelIdField",void 0),u([h({type:String,json:{write:{isRequired:!0}}})],bu.prototype,"levelNumberField",void 0),u([h({type:String,json:{write:{isRequired:!0}}})],bu.prototype,"longNameField",void 0),u([h({type:String,json:{write:{isRequired:!0}}})],bu.prototype,"shortNameField",void 0),u([h({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],bu.prototype,"sublayerId",void 0),u([h({type:String,json:{write:{isRequired:!0}}})],bu.prototype,"verticalOrderField",void 0),bu=u([V("esri.layers.support.LevelLayerInfo")],bu);const U6e=bu;let _0=class extends ve{constructor(e){super(e),this.layerId=null,this.nameField=null,this.siteIdField=null,this.sublayerId=null}};u([h({type:String,json:{write:{isRequired:!0}}})],_0.prototype,"layerId",void 0),u([h({type:String,json:{write:{isRequired:!0}}})],_0.prototype,"nameField",void 0),u([h({type:String,json:{write:{isRequired:!0}}})],_0.prototype,"siteIdField",void 0),u([h({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],_0.prototype,"sublayerId",void 0),_0=u([V("esri.layers.support.SiteLayerInfo")],_0);const B6e=_0;let o1=class extends ve{constructor(e){super(e),this.levelLayer=null,this.facilityLayer=null,this.siteLayer=null}};u([h({type:U6e,json:{write:{isRequired:!0}}})],o1.prototype,"levelLayer",void 0),u([h({type:j6e,json:{write:{isRequired:!0}}})],o1.prototype,"facilityLayer",void 0),u([h({type:B6e,json:{write:!0}})],o1.prototype,"siteLayer",void 0),o1=u([V("esri.support.MapFloorInfo")],o1);const G6e=o1;var Zh;(function(t){t[t.SAVE=0]="SAVE",t[t.SAVE_AS=1]="SAVE_AS"})(Zh||(Zh={}));var EB;let a1=EB=class extends ve{constructor(t){super(t),this.activeRange=null,this.currentRangeExtent=null,this.fullRangeExtent=null}clone(){return new EB(se({activeRange:this.activeRange,currentRangeExtent:this.currentRangeExtent,fullRangeExtent:this.fullRangeExtent}))}};u([h({type:String,nonNullable:!0,json:{read:{source:"activeRangeName"},write:{target:"activeRangeName",isRequired:!0}}})],a1.prototype,"activeRange",void 0),u([h({type:[Number],json:{write:!0}})],a1.prototype,"currentRangeExtent",void 0),u([h({type:[Number],json:{write:!0}})],a1.prototype,"fullRangeExtent",void 0),a1=EB=u([V("esri.webdoc.RangeInfo")],a1);const Qq=a1;var IB;let jd=IB=class extends ve{constructor(t){super(t),this.enabled=!1,this.longNames=!1,this.minimized=!1,this.pinnedLevels=!1,this.site=null,this.facility=null,this.level=null}clone(){return new IB(se({enabled:this.enabled,longNames:this.longNames,minimized:this.minimized,pinnedLevels:this.pinnedLevels,site:this.site,facility:this.facility,level:this.level}))}};u([h({type:Boolean,json:{read:{source:"enabled"},write:{target:"enabled"}}})],jd.prototype,"enabled",void 0),u([h({type:Boolean,json:{read:{source:"longNames"},write:{target:"longNames"}}})],jd.prototype,"longNames",void 0),u([h({type:Boolean,json:{read:{source:"minimized"},write:{target:"minimized"}}})],jd.prototype,"minimized",void 0),u([h({type:Boolean,json:{read:{source:"pinnedLevels"},write:{target:"pinnedLevels"}}})],jd.prototype,"pinnedLevels",void 0),u([h({type:String,json:{read:{source:"site"},write:{target:"site"}}})],jd.prototype,"site",void 0),u([h({type:String,json:{read:{source:"facility"},write:{target:"facility"}}})],jd.prototype,"facility",void 0),u([h({type:String,json:{read:{source:"level"},write:{target:"level"}}})],jd.prototype,"level",void 0),jd=IB=u([V("esri.webdoc.widgets.FloorFilter")],jd);const q6e=jd;var CB;const RP=new Gt({slider:"slider",picker:"picker"});let l1=CB=class extends ve{constructor(t){super(t),this.interactionMode=null,this.numStops=null,this.stopInterval=null}clone(){return new CB({interactionMode:this.interactionMode,numStops:this.numStops,stopInterval:this.stopInterval})}};u([h({type:RP.apiValues,nonNullable:!0,json:{type:RP.jsonValues,default:null,read:{reader:RP.read},write:{isRequired:!0,writer:RP.write}}})],l1.prototype,"interactionMode",void 0),u([h({type:si,json:{read:{source:"numberOfStops"},write:{target:"numberOfStops",overridePolicy(){const t=this.stopInterval!=null;return{enabled:!t,isRequired:!t}}}}})],l1.prototype,"numStops",void 0),u([h({type:Number,json:{write:{overridePolicy(){return{isRequired:this.numStops==null}}}}})],l1.prototype,"stopInterval",void 0),l1=CB=u([V("esri.webdoc.widgets.Range")],l1);const H6e=l1,eH=is()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0});let Gu=class extends bt.ClonableMixin(ve){constructor(e){super(e),this.unit="milliseconds",this.value=0}toMilliseconds(){return Gpe(this.value,this.unit,"milliseconds")}};u([at(eH,{nonNullable:!0})],Gu.prototype,"unit",void 0),u([h({type:Number,json:{write:!0},nonNullable:!0})],Gu.prototype,"value",void 0),Gu=u([V("esri.time.TimeInterval")],Gu);var MB;let ss=MB=class extends ve{constructor(t){super(t),this.currentTimeExtent=null,this.fullTimeExtent=null,this.loop=!1,this.numStops=null,this.numThumbs=null,this.stopDelay=null,this.stopInterval=null,this.stops=null}readCurrentTimeExtent(t){return t?Hi.fromArray(t):void 0}writeCurrentTimeExtent(t,e,i){t&&xn(i,t.toArray(),e)}readFullTimeExtent(t,e){const i=e.properties;if(!i)return;const r=i.endTime!=null?new Date(i.endTime):null,n=i.startTime!=null?new Date(i.startTime):null;return new Hi({start:n,end:r})}writeFullTimeExtent(t,e){if(!t)return;const i=e.properties=e.properties||{},r=t.end,n=t.start;r&&(i.endTime=r!=null?r.getTime():null),n&&(i.startTime=n!=null?n.getTime():null)}readStopInterval(t,e,i){return t?Gu.fromJSON({value:t.interval,unit:t.units},i):null}writeStopInterval(t,e,i,r){if(!t)return;const n=t.toJSON(r);xn("properties.timeStopInterval",{interval:n.value,units:n.unit},e)}readStops(t){return t!=null&&t.length?t.map((e=>new Date(e))):null}writeStops(t,e,i){t!=null&&t.length&&xn(i,t.map((r=>r.getTime())),e)}clone(){return new MB(se({currentTimeExtent:this.currentTimeExtent,fullTimeExtent:this.fullTimeExtent,loop:this.loop,numStops:this.numStops,numThumbs:this.numThumbs,stopDelay:this.stopDelay,stopInterval:this.stopInterval,stops:this.stops}))}};u([h({type:Hi,json:{type:[[si,I$]],read:{source:"properties.currentTimeExtent"},write:{target:"properties.currentTimeExtent"}}})],ss.prototype,"currentTimeExtent",void 0),u([De("currentTimeExtent")],ss.prototype,"readCurrentTimeExtent",null),u([Ve("currentTimeExtent")],ss.prototype,"writeCurrentTimeExtent",null),u([h({type:Hi,json:{read:{source:["properties.endTime","properties.startTime"]},write:{target:{"properties.endTime":{type:Number},"properties.startTime":{type:Number}}}}})],ss.prototype,"fullTimeExtent",void 0),u([De("fullTimeExtent")],ss.prototype,"readFullTimeExtent",null),u([Ve("fullTimeExtent")],ss.prototype,"writeFullTimeExtent",null),u([h({type:Boolean,nonNullable:!0,json:{default:!1,read:{source:"properties.loop"},write:{target:"properties.loop"}}})],ss.prototype,"loop",void 0),u([h({type:si,json:{read:{source:"properties.numberOfStops"},write:{target:"properties.numberOfStops",overridePolicy(){var r;const t=!!this.stopInterval,e=!!((r=this.stops)!=null&&r.length),i=!(t||e);return{enabled:i,isRequired:i}}}}})],ss.prototype,"numStops",void 0),u([h({type:[1,2],nonNullable:!0,json:{type:si,read:{source:"properties.thumbCount"},write:{target:"properties.thumbCount",isRequired:!0}}})],ss.prototype,"numThumbs",void 0),u([h({type:Number,nonNullable:!0,json:{read:{source:"properties.thumbMovingRate"},write:{target:"properties.thumbMovingRate",isRequired:!0}}})],ss.prototype,"stopDelay",void 0),u([h({type:Gu,json:{read:{source:"properties.timeStopInterval"},write:{target:{"properties.timeStopInterval.interval":{type:Number},"properties.timeStopInterval.units":{type:eH.jsonValues.filter((t=>t!=="esriTimeUnitsUnknown"))}},overridePolicy(){var i;const t=this.numStops!=null,e=!!((i=this.stops)!=null&&i.length);return{enabled:!e,isRequired:!(t||e)}}}}})],ss.prototype,"stopInterval",void 0),u([De("stopInterval")],ss.prototype,"readStopInterval",null),u([Ve("stopInterval")],ss.prototype,"writeStopInterval",null),u([h({type:[Date],json:{type:[si],read:{source:"properties.stops"},write:{target:"properties.stops",overridePolicy(){return{isRequired:this.numStops==null&&!this.stopInterval}}}}})],ss.prototype,"stops",void 0),u([De("stops")],ss.prototype,"readStops",null),u([Ve("stops")],ss.prototype,"writeStops",null),ss=MB=u([V("esri.webdoc.widgets.TimeSlider")],ss);const W6e=ss;var kB;let c1=kB=class extends ve{constructor(t){super(t),this.range=null,this.timeSlider=null,this.floorFilter=null}clone(){return new kB(se({range:this.range,timeSlider:this.timeSlider,floorFilter:this.floorFilter}))}};u([h({type:H6e,json:{write:!0}})],c1.prototype,"range",void 0),u([h({type:W6e,json:{write:!0}})],c1.prototype,"timeSlider",void 0),u([h({type:q6e,json:{write:!0}})],c1.prototype,"floorFilter",void 0),c1=kB=u([V("esri.webdoc.Widgets")],c1);const Z6e=c1,J6e={width:600,height:400},OP=1.5;function Y6e(t,e){e=e||J6e;let{width:i,height:r}=e;const n=i/r;return n<OP?r=i/OP:n>OP&&(i=r*OP),i>t.width&&(r*=t.width/i,i=t.width),r>t.height&&(i*=t.height/r,r=t.height),{width:Math.round(i),height:Math.round(r)}}function X6e(t,e){return{...gge(t,e),readResourcePaths:[]}}function I0t(t,e,i){const r=rn(t.itemUrl);return{...gge(t,e),messages:[],writtenProperties:[],blockedRelativeUrls:[],verifyItemRelativeUrls:r?{rootPath:r.path,writtenUrls:[]}:null,resources:i?{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}:null}}function gge(t,e){return{origin:e,url:rn(t.itemUrl),portal:t.portal||ze.getDefault(),portalItem:t}}let Fy=class extends ve{constructor(e){super(e),this.geometries=[],this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){const e=this.geometries.map((n=>n.toJSON())),i=this.geometries[0],r={};return r.outSR=JS(this.outSpatialReference),r.inSR=JS(i.spatialReference),r.geometries=JSON.stringify({geometryType:bw(i),geometries:e}),this.transformation&&(r.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),this.transformForward!=null&&(r.transformForward=this.transformForward),r}};u([h()],Fy.prototype,"geometries",void 0),u([h({type:et,json:{read:{source:"outSR"}}})],Fy.prototype,"outSpatialReference",void 0),u([h()],Fy.prototype,"transformation",void 0),u([h()],Fy.prototype,"transformForward",void 0),Fy=u([V("esri.rest.support.ProjectParameters")],Fy);const K6e=En(Fy);async function Q6e(t,e,i){e=K6e(e);const r=zq(t),n={...r.query,f:"json",...e.toJSON()},s=e.outSpatialReference,o=bw(e.geometries[0]),a=F5e(n,i);return fi(r.path+"/project",a).then((({data:{geometries:l}})=>xme(l,o,s)))}function eBe(t,e){var i;return e.resourceInfo?vge(e,e.resourceInfo,{origin:t.origin}):(i=e.portalItem)!=null&&i.id?tBe(t,e,e.portalItem):Promise.resolve()}function vge(t,e,i){const r={context:{...i,layerContainerType:"operational-layers"}};return t.portalItem&&(r.context.portal=t.portalItem.portal||ze.getDefault()),ye(()=>import("./layersCreator-CXTaOhJI.js"),__vite__mapDeps([140,141,142,143,144,145])).then((({populateOperationalLayers:n})=>{const s=[],o=e.operationalLayers;o!=null&&o.length&&s.push(n(t.layers,o,r));const a={...r,context:{...r.context,layerContainerType:"tables"},defaultLayerType:"ArcGISFeatureLayer"},l=e.tables;return l!=null&&l.length&&s.push(n(t.tables,l,a)),Promise.allSettled(s).then((()=>{}))}))}async function tBe(t,e,i){var o;if(await i.load().catch((a=>{throw new ie(`${t.name}:load-portal-item`,"Failed to load portal item",{error:a})})),i.type!==t.itemType)throw new ie(`${t.name}:invalid-portal-item`,`Invalid portal item type '${i.type}', expected '${t.itemType}'`,{type:i.type});const r=await i.fetchData();e.resourceInfo=r;const n=X6e(i,t.origin);await iBe(t,e,r,n),e.resourceReferences={portalItem:i,paths:n.readResourcePaths};const s=await nBe(e.initialViewProperties,i,Ie.getLogger(e));if(s){const a=((o=e.initialViewProperties)==null?void 0:o.clone())??t.createInitialViewProperties();a.viewpoint=s,e.initialViewProperties=a}}function iBe(t,e,i,r){const n=rBe(t,i);return e.read(n,r),vge(e,n,r)}function rBe(t,e){const i=t.parseVersion(e.version||"",t.name);return t.currentVersion.validate(i),e.version=`${i.major}.${i.minor}`,e}async function nBe(t,e,i){var s;if((s=t==null?void 0:t.viewpoint)==null?void 0:s.targetGeometry)return null;const n=await sBe(t,e,i);return n?new ps({targetGeometry:n}):null}async function sBe(t,e,i){const r=t==null?void 0:t.spatialReference,n=e==null?void 0:e.extent;if(!r||!n)return null;if(r.isWGS84)return n.clone();if(r.isWebMercator)return Xf(n);const{getGeometryServiceURL:s}=await ye(()=>import("./geometryServiceUtils-C4Tx3jgY.js"),[]);try{const o=await s(e),a=new Fy({geometries:[n],outSpatialReference:r});return(await Q6e(o,a))[0]}catch(o){i.error("Error projecting item's extent:",o)}return null}function gte(t){return{enabled:!!(t!=null&&t.length)}}var PB;let u1=PB=class extends ve{constructor(t){super(t),this.exactMatch=!1,this.name=null,this.type=null}clone(){return new PB({exactMatch:this.exactMatch,type:this.type,name:this.name})}};u([h({type:Boolean,json:{write:!0}})],u1.prototype,"exactMatch",void 0),u([h({type:String,json:{write:!0}})],u1.prototype,"name",void 0),u([at(Aq)],u1.prototype,"type",void 0),u1=PB=u([V("esri.webdoc.applicationProperties.SearchLayerField")],u1);const oBe=u1;var AB;let d1=AB=class extends ve{constructor(t){super(t),this.field=null,this.id=null,this.subLayer=null}clone(){return new AB(se({field:this.field,id:this.id,subLayer:this.subLayer}))}};u([h({type:oBe,json:{write:{isRequired:!0}}})],d1.prototype,"field",void 0),u([h({type:String,json:{write:{isRequired:!0}}})],d1.prototype,"id",void 0),u([h({type:si,json:{write:!0}})],d1.prototype,"subLayer",void 0),d1=AB=u([V("esri.webdoc.applicationProperties.SearchLayer")],d1);const aBe=d1;var LB;let h1=LB=class extends ve{constructor(t){super(t),this.exactMatch=!1,this.name=null,this.type=null}clone(){return new LB({exactMatch:this.exactMatch,type:this.type,name:this.name})}};u([h({type:Boolean,json:{write:!0}})],h1.prototype,"exactMatch",void 0),u([h({type:String,json:{write:!0}})],h1.prototype,"name",void 0),u([at(Aq)],h1.prototype,"type",void 0),h1=LB=u([V("esri.webdoc.applicationProperties.SearchTableField")],h1);const lBe=h1;var RB;let dI=RB=class extends ve{constructor(t){super(t),this.field=null,this.id=null}clone(){return new RB(se({field:this.field,id:this.id}))}};u([h({type:lBe,json:{write:{isRequired:!0}}})],dI.prototype,"field",void 0),u([h({type:String,json:{write:{isRequired:!0}}})],dI.prototype,"id",void 0),dI=RB=u([V("esri.webdoc.applicationProperties.SearchTable")],dI);const cBe=dI;var OB;const bge=Ze.ofType(aBe),wge=Ze.ofType(cBe);let Ud=OB=class extends ve{constructor(t){super(t),this.addressSearchEnabled=!0,this.enabled=!0,this.hintText=null,this.layers=new bge,this.tables=new wge}readAddressSearchEnabled(t){return!t}writeAddressSearchEnabled(t,e,i){e[i]=!t}clone(){return new OB(se({addressSearchEnabled:this.addressSearchEnabled,enabled:this.enabled,hintText:this.hintText,layers:this.layers,tables:this.tables}))}};u([h({type:Boolean,nonNullable:!0,json:{read:{source:"disablePlaceFinder"},write:{target:"disablePlaceFinder",isRequired:!0},origins:{"web-scene":{read:!1,write:!1}}}})],Ud.prototype,"addressSearchEnabled",void 0),u([De("addressSearchEnabled")],Ud.prototype,"readAddressSearchEnabled",null),u([Ve("addressSearchEnabled")],Ud.prototype,"writeAddressSearchEnabled",null),u([h({type:Boolean,nonNullable:!0,json:{write:!0,origins:{"web-map":{write:{isRequired:!0}},"web-scene":{default:!0,write:!0}}}})],Ud.prototype,"enabled",void 0),u([h({type:String,json:{write:!0}})],Ud.prototype,"hintText",void 0),u([h({type:bge,json:{write:{overridePolicy:gte},origins:{"web-scene":{write:{isRequired:!0}}}}})],Ud.prototype,"layers",void 0),u([h({type:wge,json:{read:!0,write:{overridePolicy:gte}}})],Ud.prototype,"tables",void 0),Ud=OB=u([V("esri.webdoc.applicationProperties.Search")],Ud);const uBe=Ud;var FB;let NL=FB=class extends ve{constructor(t){super(t),this.search=null}clone(){return new FB(se({search:this.search}))}};u([h({type:uBe,json:{write:!0}})],NL.prototype,"search",void 0),NL=FB=u([V("esri.webdoc.applicationProperties.Viewing")],NL);const dBe=NL;var NB;let p1=NB=class extends ve{constructor(t){super(t),this.editing=null,this.offline=null,this.viewing=null}clone(){return new NB(se({editing:this.editing,offline:this.offline,viewing:this.viewing}))}};u([h({json:{write:!0}})],p1.prototype,"editing",void 0),u([h({json:{write:!0}})],p1.prototype,"offline",void 0),u([h({type:dBe,json:{write:!0}})],p1.prototype,"viewing",void 0),p1=NB=u([V("esri.webmap.ApplicationProperties")],p1);const hBe=p1;var DB;let zf=DB=class extends ve{constructor(){super(...arguments),this.url=""}destroy(){this.url=""}get isSecureUrl(){return Mce(this.url)}get isDataURI(){return cm(this.url)}clone(){return new DB({url:this.url})}};u([h({type:String,json:{write:{isRequired:!0}}})],zf.prototype,"url",void 0),u([h()],zf.prototype,"isSecureUrl",null),u([h()],zf.prototype,"isDataURI",null),zf=DB=u([V("esri.webdoc.support.SlideThumbnail")],zf);const pBe={type:Hi,json:{read:{source:"timeExtent",reader:t=>t?Array.isArray(t)?Hi.fromArray(t):Hi.fromJSON(t):null},write:{writer:(t,e,i,r)=>{t&&(t.isEmpty?r!=null&&r.messages&&r.messages.push(new ie("invalid-timeExtent","TimeExtent cannot be empty")):e[i]=t.toArray())},target:{timeExtent:{type:[[si,I$]]}}}}};var zB;let Bd=zB=class extends dm.IdentifiableMixin(ve){constructor(t){super(t),this.name=null,this.thumbnail=new zf,this.timeExtent=null}castThumbnail(t){return typeof t=="string"?new zf({url:t}):En(zf,t)}set viewpoint(t){const{targetGeometry:e,scale:i}=t;e!=null&&e.type==="point"&&i==null&&Ie.getLogger(this).warn("Bookmark.viewpoint should include 'scale' when its targetGeometry is a point.",t),this._set("viewpoint",t)}readViewpoint(t,e){const{extent:i,viewpoint:r}=e;return ps.fromJSON(r||{targetGeometry:i})}writeViewpoint(t,e,i,r){if(!t)return;const{targetGeometry:n}=t;if(n==null||n.type==="extent")n!=null&&(e.extent=n.toJSON()),e[i]=t.toJSON();else{const s="Bookmark.viewpoint cannot be written to JSON when the viewpoint's targetGeometry is not an extent.";r!=null&&r.messages?r.messages.push(new ie("property:unsupported",s)):Ie.getLogger(this).error(s)}}clone(){return new zB(se({name:this.name,thumbnail:this.thumbnail,timeExtent:this.timeExtent,viewpoint:this.viewpoint}))}};u([h({type:String,nonNullable:!0,json:{write:{isRequired:!0}}})],Bd.prototype,"name",void 0),u([h({type:zf,json:{write:{overridePolicy:t=>({enabled:!(!t||!t.url)})}}})],Bd.prototype,"thumbnail",void 0),u([yi("thumbnail")],Bd.prototype,"castThumbnail",null),u([h(pBe)],Bd.prototype,"timeExtent",void 0),u([h({type:ps,nonNullable:!0,json:{write:!0}})],Bd.prototype,"viewpoint",null),u([De("viewpoint",["extent","viewpoint"])],Bd.prototype,"readViewpoint",null),u([Ve("viewpoint")],Bd.prototype,"writeViewpoint",null),Bd=zB=u([V("esri.webmap.Bookmark")],Bd);const fBe=Bd;let nf=class extends bt.ClonableMixin(tt){constructor(e){super(e),this.background=null,this.rangeInfo=null,this.spatialReference=null,this.timeExtent=null,this.timeZone=Ya,this.viewpoint=null}};u([h({type:MN})],nf.prototype,"background",void 0),u([h({type:Qq})],nf.prototype,"rangeInfo",void 0),u([h({type:et})],nf.prototype,"spatialReference",void 0),u([h({type:Hi})],nf.prototype,"timeExtent",void 0),u([h({nonNullable:!0})],nf.prototype,"timeZone",void 0),u([h({type:ps})],nf.prototype,"viewpoint",void 0),nf=u([V("esri.webmap.InitialViewProperties")],nf);const GO=nf,_ge=Ze.ofType(fBe),mBe=new Map([["image/jpeg","jpeg"],["image/jpg","jpg"],["image/png","png"],["image/gif","gif"]]),yBe="ArcGIS Pro",gBe=Kq.JSAPI;let Sr=class extends kN(Mo.LoadableMixin(Wh.EsriPromiseMixin(Hpe))){constructor(e){super(e),this._isAuthoringAppSetByUser=!1,this._isAuthoringAppVersionSetByUser=!1,this._thumbnailFilename=null,this._updateFromPromise=null,this.resourceReferences={portalItem:null,paths:[]},this.applicationProperties=null,this.bookmarks=new _ge,this.floorInfo=null,this.initialViewProperties=new GO,this.portalItem=null,this.sourceVersion=null,this.widgets=null,this._debouncedSaveOperations=Zu((async(i,r,n)=>{const{save:s,saveAs:o}=await ye(()=>import("./webdocSaveUtils-BAeCFjv1.js"),__vite__mapDeps([231,232,233,234,235,236]));switch(i){case Zh.SAVE:return s(this.context,this,r);case Zh.SAVE_AS:return o(this.context,this,n,r)}})),this.authoringApp=this.authoringAppVersion=null,this._isAuthoringAppSetByUser=this._isAuthoringAppVersionSetByUser=!1}destroy(){this.portalItem=hr(this.portalItem)}initialize(){if(this.when().catch((e=>{Ie.getLogger(this).error("#load()","Failed to load web map",e)})),this.resourceInfo){let e;try{e=this._validateJSON(this.resourceInfo)}catch(i){return void this.addResolvingPromise(Promise.reject(i))}this.read(e)}}set authoringApp(e){this._isAuthoringAppSetByUser=!0,this._set("authoringApp",e)}writeAuthoringApp(e,i){e&&this._isAuthoringAppSetByUser?i.authoringApp=e:i.authoringApp=gBe}set authoringAppVersion(e){this._isAuthoringAppVersionSetByUser=!0,this._set("authoringAppVersion",e)}writeAuthoringAppVersion(e,i){e&&this._isAuthoringAppVersionSetByUser?i.authoringAppVersion=e:i.authoringAppVersion=Dce}readInitialViewProperties(e,i){var o,a;const r=new GO;i.background&&(r.background=MN.fromJSON(i.background));const n=(o=i.initialState)==null?void 0:o.timeExtent;n&&(r.timeExtent=Hi.fromArray(n));const s=(a=i.initialState)==null?void 0:a.viewpoint;return s&&(s.rotation&&Cx.parse(i.version||"","webmap").lessThan(2,20)&&i.authoringApp===yBe&&(s.rotation*=-1),r.viewpoint=ps.fromJSON(s)),i.mapRangeInfo&&(r.rangeInfo=Qq.fromJSON(i.mapRangeInfo)),i.spatialReference&&(r.spatialReference=et.fromJSON(i.spatialReference)),i.timeZone&&(r.timeZone=i.timeZone),r}writeInitialViewProperties(e,i,r,n){var a;if(!e)return;(a=e.background)!=null&&a.color&&(i.background=e.background.write({},n));const{timeExtent:s,viewpoint:o}=e;if(o||s){const l={};o&&(l.viewpoint=o.write({},n)),s&&(l.timeExtent=s.toArray()),i.initialState=l}e.rangeInfo&&(i.mapRangeInfo=e.rangeInfo.toJSON(n)),e.spatialReference&&(i.spatialReference=e.spatialReference.write({},n)),i.timeZone=e.timeZone}writeLayers(e,i,r,n){i[r]=this._writeLayers(e,n,"operational-layers")}readSourceVersion(e,i){const[r,n]=i.version.split(".");return new Cx(parseInt(r,10),parseInt(n,10))}writeSourceVersion(e,i,r){i[r]=`${this.context.currentVersion.major}.${this.context.currentVersion.minor}`}writeTables(e,i,r,n){const s=this._writeLayers(e,n,"tables");s.length&&(i[r]=s)}get thumbnailUrl(){var e;return((e=this.portalItem)==null?void 0:e.thumbnailUrl)||null}set thumbnailUrl(e){e?(this._override("thumbnailUrl",e),this._thumbnailFilename=this._generateCustomThumbnailFilename(e)):this._clearThumbnailOverride()}get updatingFromView(){return!!this._updateFromPromise}load(e){return this.addResolvingPromise(eBe(this.context,this)),Promise.resolve(this)}loadAll(){return cN(this,(e=>{e(this.ground,this.basemap,this.layers,this.tables)}))}read(e,i){i={...i,origin:this.context.origin};const r=this._getAuthoringPropsState();mce(this,e,(n=>super.read(e,n)),i),this._restoreAuthoringPropsFromState(r)}write(e,i){if(this.loadStatus!=="loaded"){const r=new ie("webmap:not-loaded","Web map must be loaded before it can be serialized");throw Ie.getLogger(this).error("#toJSON()","Web map must be loaded before it can be serialized",this.loadError||this.loadStatus),r}return this._removeDanglingLayerRefs(),i={...i,origin:this.context.origin,restrictedWebMapWriting:!0,webmap:this},super.write(e,i)}async save(e){return this._debouncedSaveOperations(Zh.SAVE,e)}async saveAs(e,i){return this._debouncedSaveOperations(Zh.SAVE_AS,i,e)}async updateFrom(e,i){const r=this._updateFromInternal(e,i);this._updateFromPromise=r,await r,r===this._updateFromPromise&&(this._updateFromPromise=null)}getLayerJSONFromResourceInfo(e){var r,n,s,o;const i=this.resourceInfo;return this._collectAllLayersJSON([...((r=i==null?void 0:i.baseMap)==null?void 0:r.baseMapLayers)||[],...(i==null?void 0:i.operationalLayers)||[],...((o=(s=(n=this.basemap)==null?void 0:n.resourceInfo)==null?void 0:s.data)==null?void 0:o.baseMapLayers)||[]]).find((a=>a.id===e.id))}async updateItemThumbnail(){var e;this.thumbnailUrl&&this._isOverridden("thumbnailUrl")&&(await((e=this.portalItem)==null?void 0:e.updateThumbnail({thumbnail:this.thumbnailUrl,filename:this._thumbnailFilename})),this._clearThumbnailOverride())}getThumbnailState(){let e=this.thumbnailUrl;return e&&(e=this._isOverridden("thumbnailUrl")?e:Lce(e,"w","8192")),{thumbnailUrl:e,filename:this._thumbnailFilename}}restoreThumbnailFromState(e){this.thumbnailUrl=e.thumbnailUrl,this._thumbnailFilename=e.filename}_collectAllLayersJSON(e){return e.reduce(((i,r)=>(i.push(r),r.layerType==="GroupLayer"&&(i=i.concat(this._collectAllLayersJSON(r.layers||[]))),i)),[])}_writeLayers(e,i,r){return i={...i,layerContainerType:r},e.map((n=>bU(n,r==="tables"?null:this.getLayerJSONFromResourceInfo(n),i))).filter(Kr).toArray()}_validateJSON(e){const i=Cx.parse(e.version||"","webmap");return this.context.currentVersion.validate(i),e.version=`${i.major}.${i.minor}`,e}_removeDanglingLayerRefs(){var o,a;const e=this.applicationProperties,i=(o=e==null?void 0:e.viewing)==null?void 0:o.search,r=l=>this.allLayers.some((c=>c.id===l));if(i!=null&&i.layers&&(i.layers=i.layers.filter((l=>r(l.id)))),i!=null&&i.tables&&(i.tables=i.tables.filter((l=>this.tables.some((c=>c.id===l.id))))),e){const l=(a=e.editing)==null?void 0:a.locationTracking;l!=null&&l.info&&!r(l.info.layerId)&&(e.editing=null)}const n="presentation"in this?this.presentation:null,s=n==null?void 0:n.slides;s&&s.forEach((l=>{l.visibleLayers&&(l.visibleLayers=l.visibleLayers.filter((c=>r(c.id))))}))}async _updateFromInternal(e,i){if(i??(i={}),await E$((()=>e.ready)),this._updateInitialViewProperties(e,i),e.map===this)for(const r of e.allLayerViews)"visible"in r&&"visible"in r.layer&&r._isOverridden("visible")&&(r.layer.visible=r.visible),"featureEffect"in r&&"featureEffect"in r.layer&&r._isOverridden("featureEffect")&&(r.layer.featureEffect=r.featureEffect);await this._updateThumbnailUrl(e,i)}_updateInitialViewProperties(e,i){var r,n;if(i.backgroundExcluded||(this.initialViewProperties.background=(r=e.background)==null?void 0:r.clone()),this.initialViewProperties.spatialReference=(n=e.spatialReference)==null?void 0:n.clone(),this.initialViewProperties.timeZone=e.timeZone,i.viewpointExcluded||(this.initialViewProperties.viewpoint=new ps({rotation:e.rotation,scale:i.scalePreserved?e.scale:null,targetGeometry:this._getViewExtent(e)})),!i.widgetsExcluded)for(const s of e.persistableViewModels)s.updateWebDocument(this)}_getViewExtent(e){const i=e.center.clone().normalize(),r=e.extent.clone(),n=r.width/2;return r.xmin=i.x-n,r.xmax=i.x+n,r}async _updateThumbnailUrl(e,i){if(i.thumbnailExcluded)return;const r=Y6e(e,i.thumbnailSize),n=await e.takeScreenshot({format:"png",width:r.width,height:r.height});this._setAutoGeneratedThumbnail(n.dataUrl)}_setAutoGeneratedThumbnail(e){this.thumbnailUrl=e,this._thumbnailFilename=null}_clearThumbnailOverride(){this._clearOverride("thumbnailUrl"),this.clear("thumbnailUrl","user"),this._thumbnailFilename=null}_generateCustomThumbnailFilename(e){if(cm(e)){const i=ew(e),r=i==null?void 0:i.mediaType,n=r&&mBe.get(r.toLowerCase())||null,s=`thumbnail${Date.now()}`;return n?`${s}.${n}`:s}return null}_getAuthoringPropsState(){return{authoringApp:this.authoringApp,authoringAppVersion:this.authoringAppVersion,isAuthoringAppSetByUser:this._isAuthoringAppSetByUser,isAuthoringAppVersionSetByUser:this._isAuthoringAppVersionSetByUser}}_restoreAuthoringPropsFromState(e){e.isAuthoringAppSetByUser?this.authoringApp=e.authoringApp:this._isAuthoringAppSetByUser=!1,e.isAuthoringAppVersionSetByUser?this.authoringAppVersion=e.authoringAppVersion:this._isAuthoringAppVersionSetByUser=!1}};u([h()],Sr.prototype,"_updateFromPromise",void 0),u([h({type:hBe,json:{write:!0}})],Sr.prototype,"applicationProperties",void 0),u([h({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],Sr.prototype,"authoringApp",null),u([Ve("authoringApp")],Sr.prototype,"writeAuthoringApp",null),u([h({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],Sr.prototype,"authoringAppVersion",null),u([Ve("authoringAppVersion")],Sr.prototype,"writeAuthoringAppVersion",null),u([h({type:_ge,json:{write:{overridePolicy:t=>({enabled:!!(t&&t.length>0),ignoreOrigin:!0})}}})],Sr.prototype,"bookmarks",void 0),u([h({type:G6e,json:{name:"mapFloorInfo",write:!0}})],Sr.prototype,"floorInfo",void 0),u([h({type:GO,nonNullable:!0,json:{read:{source:["background","initialState.timeExtent","initialState.viewpoint","mapRangeInfo","spatialReference","timeZone"]},write:{ignoreOrigin:!0,target:{background:{type:MN},"initialState.timeExtent":{type:Hi},"initialState.viewpoint":{type:ps},mapRangeInfo:{type:Qq},spatialReference:{type:et},"timeZone:":{type:String}}}}})],Sr.prototype,"initialViewProperties",void 0),u([De("initialViewProperties")],Sr.prototype,"readInitialViewProperties",null),u([Ve("initialViewProperties")],Sr.prototype,"writeInitialViewProperties",null),u([h({json:{read:!1,write:{target:"operationalLayers",ignoreOrigin:!0}}})],Sr.prototype,"layers",void 0),u([Ve("layers")],Sr.prototype,"writeLayers",null),u([h({type:At})],Sr.prototype,"portalItem",void 0),u([h()],Sr.prototype,"resourceInfo",void 0),u([h({readOnly:!0,type:Cx,json:{read:{source:"version"},write:{allowNull:!0,ignoreOrigin:!0,target:"version",isRequired:!0}}})],Sr.prototype,"sourceVersion",void 0),u([De("sourceVersion")],Sr.prototype,"readSourceVersion",null),u([Ve("sourceVersion")],Sr.prototype,"writeSourceVersion",null),u([h({json:{read:!1,write:{ignoreOrigin:!0}}})],Sr.prototype,"tables",void 0),u([Ve("tables")],Sr.prototype,"writeTables",null),u([h()],Sr.prototype,"thumbnailUrl",null),u([h()],Sr.prototype,"updatingFromView",null),u([h({type:Z6e,json:{write:!0}})],Sr.prototype,"widgets",void 0),Sr=u([V("esri.WebDocument2D")],Sr);const vBe=Sr,pr=(t=>t)(["operational-layers","basemap","ground"]);var VB;let x0=VB=class extends ve{constructor(t){super(t),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new VB({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};u([h({type:String,json:{write:!0}})],x0.prototype,"expression",void 0),u([h({type:String,json:{write:!0}})],x0.prototype,"name",void 0),u([h({type:["boolean","date","number","string"],json:{write:!0}})],x0.prototype,"returnType",void 0),u([h({type:String,json:{write:!0}})],x0.prototype,"title",void 0),x0=VB=u([V("esri.form.ExpressionInfo")],x0);const bBe=x0;let S0=class extends ve{constructor(e){super(e),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};u([h({type:String,json:{write:!0}})],S0.prototype,"description",void 0),u([h({type:String,json:{write:!0}})],S0.prototype,"label",void 0),u([h()],S0.prototype,"type",void 0),u([h({type:String,json:{write:!0}})],S0.prototype,"visibilityExpression",void 0),S0=u([V("esri.form.elements.Element")],S0);const zg=S0;let DL=class extends bt.ClonableMixin(ve){constructor(e){super(e),this.type=null}};u([h()],DL.prototype,"type",void 0),DL=u([V("esri.form.elements.inputs.attachments.Input")],DL);const Vg=DL,PN=["any","capture","upload"];let f1=class extends Vg{constructor(e){super(e),this.type="audio",this.inputMethod="any",this.maxDuration=null}};u([h({type:["audio"],readOnly:!0,json:{write:!0}})],f1.prototype,"type",void 0),u([h({type:PN,json:{write:!0}})],f1.prototype,"inputMethod",void 0),u([h({type:Number,json:{write:!0}})],f1.prototype,"maxDuration",void 0),f1=u([V("esri.form.elements.inputs.attachments.AudioInput")],f1);const vte=f1;let hI=class extends Vg{constructor(e){super(e),this.type="document",this.maxFileSize=null}};u([h({type:["document"],readOnly:!0,json:{write:!0}})],hI.prototype,"type",void 0),u([h({type:Number,json:{write:!0}})],hI.prototype,"maxFileSize",void 0),hI=u([V("esri.form.elements.inputs.attachments.DocumentInput")],hI);const bte=hI;let m1=class extends Vg{constructor(e){super(e),this.type="image",this.inputMethod="any",this.maxImageSize=null}};u([h({type:["image"],readOnly:!0,json:{write:!0}})],m1.prototype,"type",void 0),u([h({type:PN,json:{write:!0}})],m1.prototype,"inputMethod",void 0),u([h({type:Number,json:{write:!0}})],m1.prototype,"maxImageSize",void 0),m1=u([V("esri.form.elements.inputs.attachments.ImageInput")],m1);const wte=m1;let pI=class extends Vg{constructor(e){super(e),this.type="signature",this.inputMethod="any"}};u([h({type:["signature"],readOnly:!0,json:{write:!0}})],pI.prototype,"type",void 0),u([h({type:PN,json:{write:!0}})],pI.prototype,"inputMethod",void 0),pI=u([V("esri.form.elements.inputs.attachments.SignatureInput")],pI);const _te=pI;let y1=class extends Vg{constructor(e){super(e),this.type="video",this.inputMethod="any",this.maxDuration=null}};u([h({type:["video"],readOnly:!0,json:{write:!0}})],y1.prototype,"type",void 0),u([h({type:PN,json:{write:!0}})],y1.prototype,"inputMethod",void 0),u([h({type:Number,json:{write:!0}})],y1.prototype,"maxDuration",void 0),y1=u([V("esri.form.elements.inputs.attachments.VideoInput")],y1);const xte=y1;function xge(t){return{nestableTypes:{base:Vg,key:"type",typeMap:{audio:vte,document:bte,image:wte,signature:_te,video:xte}},allTypes:{base:Vg,key:"type",typeMap:{attachment:t,audio:vte,document:bte,image:wte,signature:_te,video:xte}}}}function wBe(t,e,i){return t?t.map((r=>lp(e.nestableTypes,r))):null}function _Be(t,e,i){if(!t)return null;const r=e.nestableTypes.typeMap;return t.filter((n=>r[n.type])).map((n=>r[n.type].fromJSON(n)))}function xBe(t,e,i){if(!t)return null;const r=e.nestableTypes.typeMap;return t.filter((n=>r[n.type])).map((n=>n.toJSON()))}let Xd=class extends Vg{constructor(e){super(e),this.type="attachment",this.attachmentAssociationType="exact",this.inputTypes=null}castInputs(e){return wBe(e,v4)}readInputs(e,i){return _Be(i.inputTypes,v4)}writeInputs(e,i){i.inputTypes=xBe(e,v4)}};u([h({type:["attachment"],readOnly:!0,json:{write:!0}})],Xd.prototype,"type",void 0),u([h({type:["any","exact","exactOrNone"],json:{write:!0}})],Xd.prototype,"attachmentAssociationType",void 0),u([h({json:{write:{isRequired:!0}}})],Xd.prototype,"inputTypes",void 0),u([yi("inputTypes")],Xd.prototype,"castInputs",null),u([De("inputTypes")],Xd.prototype,"readInputs",null),u([Ve("inputTypes")],Xd.prototype,"writeInputs",null),Xd=u([V("esri.form.elements.inputs.attachments.AttachmentInput")],Xd);const v4=xge(Xd),SBe=Xd;var jB;const $Be=xge(SBe);let gl=jB=class extends zg{constructor(t){super(t),this.allowUserRename=!0,this.attachmentKeyword=null,this.displayFilename=!1,this.editableExpression=null,this.filenameExpression="{attachmentKeyword}_{now}",this.input=null,this.maxAttachmentCount=null,this.minAttachmentCount=null,this.type="attachment",this.useOriginalFilename=!0}clone(){var t;return new jB({allowUserRename:this.allowUserRename,attachmentKeyword:this.attachmentKeyword,description:this.description,displayFilename:this.displayFilename,editableExpression:this.editableExpression,filenameExpression:this.filenameExpression,input:(t=this.input)==null?void 0:t.clone(),label:this.label,maxAttachmentCount:this.maxAttachmentCount,minAttachmentCount:this.minAttachmentCount,useOriginalFilename:this.useOriginalFilename,visibilityExpression:this.visibilityExpression})}};u([h({type:Boolean,json:{write:!0}})],gl.prototype,"allowUserRename",void 0),u([h({type:String,json:{write:{isRequired:!0}}})],gl.prototype,"attachmentKeyword",void 0),u([h({type:Boolean,json:{write:!0}})],gl.prototype,"displayFilename",void 0),u([h({type:String,json:{write:!0}})],gl.prototype,"editableExpression",void 0),u([h({type:String,json:{write:!0}})],gl.prototype,"filenameExpression",void 0),u([h({types:$Be.allTypes,json:{read:{source:"inputType"},write:{target:"inputType",isRequired:!0}}})],gl.prototype,"input",void 0),u([h({type:Number,json:{write:!0}})],gl.prototype,"maxAttachmentCount",void 0),u([h({type:Number,json:{write:!0}})],gl.prototype,"minAttachmentCount",void 0),u([h({type:["attachment"],readOnly:!0,json:{read:!1,write:!0}})],gl.prototype,"type",void 0),u([h({type:Boolean,json:{write:!0}})],gl.prototype,"useOriginalFilename",void 0),gl=jB=u([V("esri.form.elements.AttachmentElement")],gl);const Ste=gl;let zL=class extends ve{constructor(e){super(e),this.type=null}};u([h()],zL.prototype,"type",void 0),zL=u([V("esri.form.elements.inputs.Input")],zL);const fm=zL;let fI=class extends fm{constructor(e){super(e),this.maxLength=null,this.minLength=0}};u([h({type:Number,json:{write:!0}})],fI.prototype,"maxLength",void 0),u([h({type:Number,json:{write:!0}})],fI.prototype,"minLength",void 0),fI=u([V("esri.form.elements.inputs.TextInput")],fI);const tH=fI;var UB;let VL=UB=class extends tH{constructor(t){super(t),this.type="barcode-scanner"}clone(){return new UB({maxLength:this.maxLength,minLength:this.minLength})}};u([h({type:["barcode-scanner"],json:{read:!1,write:!0}})],VL.prototype,"type",void 0),VL=UB=u([V("esri.form.elements.inputs.BarcodeScannerInput")],VL);const TBe=VL;var BB;let g1=BB=class extends fm{constructor(t){super(t),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="combo-box"}clone(){return new BB({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};u([h({type:String,json:{write:!0}})],g1.prototype,"noValueOptionLabel",void 0),u([h({type:Boolean,json:{write:!0}})],g1.prototype,"showNoValueOption",void 0),u([h({type:["combo-box"],json:{read:!1,write:!0}})],g1.prototype,"type",void 0),g1=BB=u([V("esri.form.elements.inputs.ComboBoxInput")],g1);const EBe=g1;var GB;function $te(t){return t??null}function Tte(t){return t??null}let Gd=GB=class extends fm{constructor(t){super(t),this.max=null,this.min=null,this.type="date-picker"}readMax(t,e){return $te(e.max)}writeMax(t,e){e.max=Tte(t)}readMin(t,e){return $te(e.min)}writeMin(t,e){e.min=Tte(t)}clone(){return new GB({max:this.max,min:this.min})}};u([h({type:String,json:{type:String,write:!0}})],Gd.prototype,"max",void 0),u([De("max")],Gd.prototype,"readMax",null),u([Ve("max")],Gd.prototype,"writeMax",null),u([h({type:String,json:{type:String,write:!0}})],Gd.prototype,"min",void 0),u([De("min")],Gd.prototype,"readMin",null),u([Ve("min")],Gd.prototype,"writeMin",null),u([h({type:["date-picker"],json:{read:!1,write:!0}})],Gd.prototype,"type",void 0),Gd=GB=u([V("esri.form.elements.inputs.DatePickerInput")],Gd);const IBe=Gd;var qB;function b4(t){return t??null}function w4(t){return t??null}let Ta=qB=class extends fm{constructor(t){super(t),this.includeTimeOffset=!0,this.max=null,this.min=null,this.timeResolution="minutes",this.type="datetimeoffset-picker"}readMax(t,e){return b4(e.max)}writeMax(t,e){e.max=w4(t)}readMin(t,e){return b4(e.min)}writeMin(t,e){e.min=w4(t)}readTimeResolution(t,e){return b4(e.timeResolution)}writeTimeResolution(t,e){e.timeResolution=w4(t)}clone(){return new qB({includeTimeOffset:this.includeTimeOffset,max:this.max,min:this.min,timeResolution:this.timeResolution})}};u([h({type:Boolean,json:{write:!0}})],Ta.prototype,"includeTimeOffset",void 0),u([h({type:String,json:{type:String,write:!0}})],Ta.prototype,"max",void 0),u([De("max")],Ta.prototype,"readMax",null),u([Ve("max")],Ta.prototype,"writeMax",null),u([h({type:String,json:{type:String,write:!0}})],Ta.prototype,"min",void 0),u([De("min")],Ta.prototype,"readMin",null),u([Ve("min")],Ta.prototype,"writeMin",null),u([h({type:String,json:{type:String,write:!0}})],Ta.prototype,"timeResolution",void 0),u([De("timeResolution")],Ta.prototype,"readTimeResolution",null),u([Ve("timeResolution")],Ta.prototype,"writeTimeResolution",null),u([h({type:["datetimeoffset-picker"],json:{read:!1,write:!0}})],Ta.prototype,"type",void 0),Ta=qB=u([V("esri.form.elements.inputs.DateTimeOffsetPickerInput")],Ta);const CBe=Ta;var HB;function Ete(t){return t!=null?new Date(t):null}function Ite(t){return t?t.getTime():null}let wu=HB=class extends fm{constructor(t){super(t),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(t,e){return Ete(e.max)}writeMax(t,e){e.max=Ite(t)}readMin(t,e){return Ete(e.min)}writeMin(t,e){e.min=Ite(t)}clone(){return new HB({includeTime:this.includeTime,max:this.max,min:this.min})}};u([h({type:Boolean,json:{write:!0}})],wu.prototype,"includeTime",void 0),u([h({type:Date,json:{type:Number,write:!0}})],wu.prototype,"max",void 0),u([De("max")],wu.prototype,"readMax",null),u([Ve("max")],wu.prototype,"writeMax",null),u([h({type:Date,json:{type:Number,write:!0}})],wu.prototype,"min",void 0),u([De("min")],wu.prototype,"readMin",null),u([Ve("min")],wu.prototype,"writeMin",null),u([h({type:["datetime-picker"],json:{read:!1,write:!0}})],wu.prototype,"type",void 0),wu=HB=u([V("esri.form.elements.inputs.DateTimePickerInput")],wu);const MBe=wu;var WB;let v1=WB=class extends fm{constructor(t){super(t),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="radio-buttons"}clone(){return new WB({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};u([h({type:String,json:{write:!0}})],v1.prototype,"noValueOptionLabel",void 0),u([h({type:Boolean,json:{write:!0}})],v1.prototype,"showNoValueOption",void 0),u([h({type:["radio-buttons"],json:{read:!1,write:!0}})],v1.prototype,"type",void 0),v1=WB=u([V("esri.form.elements.inputs.RadioButtonsInput")],v1);const kBe=v1;var ZB;let b1=ZB=class extends fm{constructor(t){super(t),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new ZB({offValue:this.offValue,onValue:this.onValue})}};u([h({type:[String,Number],json:{write:!0}})],b1.prototype,"offValue",void 0),u([h({type:[String,Number],json:{write:!0}})],b1.prototype,"onValue",void 0),u([h({type:["switch"],json:{read:!1,write:!0}})],b1.prototype,"type",void 0),b1=ZB=u([V("esri.form.elements.inputs.SwitchInput")],b1);const PBe=b1;var JB;let jL=JB=class extends tH{constructor(t){super(t),this.type="text-area"}clone(){return new JB({maxLength:this.maxLength,minLength:this.minLength})}};u([h({type:["text-area"],json:{read:!1,write:!0}})],jL.prototype,"type",void 0),jL=JB=u([V("esri.form.elements.inputs.TextAreaInput")],jL);const ABe=jL;var YB;let UL=YB=class extends tH{constructor(t){super(t),this.type="text-box"}clone(){return new YB({maxLength:this.maxLength,minLength:this.minLength})}};u([h({type:["text-box"],json:{read:!1,write:!0}})],UL.prototype,"type",void 0),UL=YB=u([V("esri.form.elements.inputs.TextBoxInput")],UL);const LBe=UL;var XB;function _4(t){return t??null}function x4(t){return t??null}let vl=XB=class extends fm{constructor(t){super(t),this.max=null,this.min=null,this.timeResolution="minutes",this.type="time-picker"}readMax(t,e){return _4(e.max)}writeMax(t,e){e.max=x4(t)}readMin(t,e){return _4(e.min)}writeMin(t,e){e.min=x4(t)}readTimeResolution(t,e){return _4(e.timeResolution)}writeTimeResolution(t,e){e.timeResolution=x4(t)}clone(){return new XB({max:this.max,min:this.min,timeResolution:this.timeResolution})}};u([h({type:String,json:{type:String,write:!0}})],vl.prototype,"max",void 0),u([De("max")],vl.prototype,"readMax",null),u([Ve("max")],vl.prototype,"writeMax",null),u([h({type:String,json:{type:String,write:!0}})],vl.prototype,"min",void 0),u([De("min")],vl.prototype,"readMin",null),u([Ve("min")],vl.prototype,"writeMin",null),u([h({type:String,json:{type:String,write:!0}})],vl.prototype,"timeResolution",void 0),u([De("timeResolution")],vl.prototype,"readTimeResolution",null),u([Ve("timeResolution")],vl.prototype,"writeTimeResolution",null),u([h({type:["time-picker"],json:{read:!1,write:!0}})],vl.prototype,"type",void 0),vl=XB=u([V("esri.form.elements.inputs.TimePickerInput")],vl);const RBe=vl,OBe={base:fm,key:"type",typeMap:{"barcode-scanner":TBe,"combo-box":EBe,"date-picker":IBe,"datetime-picker":MBe,"datetimeoffset-picker":CBe,"radio-buttons":kBe,switch:PBe,"text-area":ABe,"text-box":LBe,"time-picker":RBe}};var KB;let lc=KB=class extends zg{constructor(t){super(t),this.domain=null,this.editable=null,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field",this.valueExpression=null}clone(){return new KB({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};u([h({types:qfe,json:{read:{reader:_N},write:!0}})],lc.prototype,"domain",void 0),u([h({type:Boolean,json:{write:!0}})],lc.prototype,"editable",void 0),u([h({type:String,json:{write:!0}})],lc.prototype,"editableExpression",void 0),u([h({type:String,json:{write:!0}})],lc.prototype,"fieldName",void 0),u([h({type:String,json:{write:!0}})],lc.prototype,"hint",void 0),u([h({types:OBe,json:{read:{source:"inputType"},write:{target:"inputType"}}})],lc.prototype,"input",void 0),u([h({type:String,json:{write:!0}})],lc.prototype,"requiredExpression",void 0),u([h({type:String,json:{read:!1,write:!0}})],lc.prototype,"type",void 0),u([h({type:String,json:{write:!0}})],lc.prototype,"valueExpression",void 0),lc=KB=u([V("esri.form.elements.FieldElement")],lc);const Cte=lc;var QB;let sf=QB=class extends zg{constructor(t){super(t),this.displayCount=null,this.displayType="list",this.editableExpression=null,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new QB({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editableExpression:this.editableExpression,label:this.label,orderByFields:se(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};u([h({type:Number,json:{write:!0}})],sf.prototype,"displayCount",void 0),u([h({type:["list"],json:{write:!0}})],sf.prototype,"displayType",void 0),u([h({type:String,json:{write:!0}})],sf.prototype,"editableExpression",void 0),u([h({type:[Tq],json:{write:!0}})],sf.prototype,"orderByFields",void 0),u([h({type:Number,json:{write:!0}})],sf.prototype,"relationshipId",void 0),u([h({type:["relationship"],json:{read:!1,write:!0}})],sf.prototype,"type",void 0),sf=QB=u([V("esri.form.elements.RelationshipElement")],sf);const Mte=sf;var e8;let w1=e8=class extends zg{constructor(t){super(t),this.text=null,this.textFormat="plain-text",this.type="text"}clone(){return new e8({text:this.text,textFormat:this.textFormat,visibilityExpression:this.visibilityExpression})}};u([h({type:String,json:{write:!0}})],w1.prototype,"text",void 0),u([h({type:String,json:{write:!0}})],w1.prototype,"textFormat",void 0),u([h({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],w1.prototype,"type",void 0),w1=e8=u([V("esri.form.elements.TextElement")],w1);const kte=w1;let _1=class extends bt.ClonableMixin(zg){constructor(e){super(e),this.associationTypes=null,this.editableExpression=null,this.type="utilityNetworkAssociations"}};u([h({type:[wfe],json:{write:{isRequired:!0}}})],_1.prototype,"associationTypes",void 0),u([h({type:String,json:{write:!0}})],_1.prototype,"editableExpression",void 0),u([h({type:["utilityNetworkAssociations"],json:{read:!1,write:!0}})],_1.prototype,"type",void 0),_1=u([V("esri.form.elements.UtilityNetworkAssociationsElement")],_1);const Pte=_1,FBe=t=>t.type==="field",NBe=t=>t.type==="group",DBe=t=>t.type==="text";function Sge(t){return{typesWithGroup:{base:zg,key:"type",typeMap:{attachment:Ste,field:Cte,group:t,relationship:Mte,text:kte,utilityNetworkAssociations:Pte}},typesWithoutGroup:{base:zg,key:"type",typeMap:{attachment:Ste,field:Cte,relationship:Mte,text:kte,utilityNetworkAssociations:Pte}}}}function $ge(t,e,i=!0){if(!t)return null;const r=i?e.typesWithGroup.typeMap:e.typesWithoutGroup.typeMap;return t.filter((n=>r[n.type])).map((n=>r[n.type].fromJSON(n)))}function Tge(t,e,i=!0){if(!t)return null;const r=i?e.typesWithGroup.typeMap:e.typesWithoutGroup.typeMap;return t.filter((n=>r[n.type])).map((n=>n.toJSON()))}function Ege(t,e,i=!0){return t?t.map((r=>lp(i?e.typesWithGroup:e.typesWithoutGroup,r))):null}var t8;let Kd=t8=class extends zg{constructor(t){super(t),this.elements=null,this.initialState="expanded",this.type="group"}castElements(t){return Ege(t,S4,!1)}readElements(t,e){return $ge(e.formElements,S4,!1)}writeElements(t,e){e.formElements=Tge(t,S4,!1)}clone(){return new t8({description:this.description,elements:se(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};u([h({json:{write:!0}})],Kd.prototype,"elements",void 0),u([yi("elements")],Kd.prototype,"castElements",null),u([De("elements",["formElements"])],Kd.prototype,"readElements",null),u([Ve("elements")],Kd.prototype,"writeElements",null),u([h({type:["collapsed","expanded"],json:{write:!0}})],Kd.prototype,"initialState",void 0),u([h({type:String,json:{read:!1,write:!0}})],Kd.prototype,"type",void 0),Kd=t8=u([V("esri.form.elements.GroupElement")],Kd);const S4=Sge(Kd),zBe=Kd;var i8;const $4=Sge(zBe);let _u=i8=class extends ve{constructor(t){super(t),this.description=null,this.elements=null,this.expressionInfos=null,this.preserveFieldValuesWhenHidden=!1,this.title=null}castElements(t){return Ege(t,$4)}readElements(t,e){return $ge(e.formElements,$4)}writeElements(t,e){e.formElements=Tge(t,$4)}clone(){return new i8({description:this.description,expressionInfos:se(this.expressionInfos),elements:se(this.elements),title:this.title,preserveFieldValuesWhenHidden:this.preserveFieldValuesWhenHidden})}async getFieldsUsed(t,e){const i=new Set,{description:r,elements:n,expressionInfos:s,title:o}=this;if(vC(i,t,r),vC(i,t,o),!n)return[];const a=VBe(n,s).map((l=>io(i,t,l)));await Promise.all(a);for(const l of n)Ige(i,{fieldsIndex:t,relationships:e},l);return Array.from(i).sort()}};function Ige(t,e,i){var n;const{fieldsIndex:r}=e;if(!r||r.fields.length!==t.size)switch(vC(t,r,i.label),vC(t,r,i.description),i.type){case"field":ca(t,r,i.fieldName);break;case"group":i.elements.forEach((s=>Ige(t,e,s)));break;case"relationship":if(e.relationships){const s=e.relationships.find((o=>o.id===i.relationshipId));s&&ca(t,r,s.keyField)}Ng(t,r,(n=i.orderByFields)==null?void 0:n.map((s=>s.field)));break;case"text":vC(t,r,i.text)}}function VBe(t,e){if(!e||e.length===0)return[];const i=Cge(t),r=[];for(const n of e)i.has(n.name)&&r.push(n.expression);return r}function Cge(t){const e=new Set;for(const i of t)if(vY(e,i.visibilityExpression),!DBe(i)){if(NBe(i))PR(e,Cge(i.elements));else if(vY(e,i.editableExpression),FBe(i)){const{requiredExpression:r,valueExpression:n}=i;PR(e,[r,n])}}return e}function vC(t,e,i){Ng(t,e,Sq(i))}u([h({type:String,json:{write:!0}})],_u.prototype,"description",void 0),u([h({json:{write:!0}})],_u.prototype,"elements",void 0),u([yi("elements")],_u.prototype,"castElements",null),u([De("elements",["formElements"])],_u.prototype,"readElements",null),u([Ve("elements")],_u.prototype,"writeElements",null),u([h({type:[bBe],json:{write:!0}})],_u.prototype,"expressionInfos",void 0),u([h({type:Boolean,json:{default:!1,write:!0}})],_u.prototype,"preserveFieldValuesWhenHidden",void 0),u([h({type:String,json:{write:!0}})],_u.prototype,"title",void 0),_u=i8=u([V("esri.form.FormTemplate")],_u);const jBe=_u;function Ate(t,e,i){if(t.hasM==null||t.hasZ)for(const r of e)for(const n of r)n.length>2&&(n[2]*=i)}function UBe(t,e,i){if(!t&&!e||!i)return;const r=XS(i);Lte(t,i,r),Lte(e,i,r)}function Lte(t,e,i){if(t)for(const r of t)BBe(r.geometry,e,i)}function BBe(t,e,i){if(!(t!=null&&t.spatialReference)||es(t.spatialReference,e))return;const r=XS(t.spatialReference)/i;if(r!==1){if("x"in t)t.z!=null&&(t.z*=r);else if("rings"in t)Ate(t,t.rings,r);else if("paths"in t)Ate(t,t.paths,r);else if("points"in t&&(t.hasM==null||t.hasZ))for(const n of t.points)n.length>2&&(n[2]*=r)}}function r8(t,e,i){if(!(i!=null&&i.features)||!i.hasZ)return;const r=xhe(i.geometryType,e,t.outSpatialReference);if(r!=null)for(const n of i.features)r(n.geometry)}var n8;const s8=new Gt({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let jn=n8=class extends ve{constructor(t){super(t),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(t,e){return this.readFeaturesWithClass(t,e,qi)}writeGeometryType(t,e,i,r){if(t)return void s8.write(t,e,i,r);const{features:n}=this;if(n){for(const s of n)if((s==null?void 0:s.geometry)!=null)return void s8.write(s.geometry.type,e,i,r)}}readQueryGeometry(t,e){if(!t)return null;const i=!!t.spatialReference,r=hp(t);return r&&!i&&e.spatialReference&&(r.spatialReference=et.fromJSON(e.spatialReference)),r}writeSpatialReference(t,e){if(t)return void(e.spatialReference=t.toJSON());const{features:i}=this;if(i){for(const r of i)if(r&&r.geometry!=null&&r.geometry.spatialReference)return void(e.spatialReference=r.geometry.spatialReference.toJSON())}}clone(){return new n8(this.cloneProperties())}cloneProperties(){return se({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(t){const e=this.write();if(e.features&&Array.isArray(t)&&t.length>0)for(let i=0;i<e.features.length;i++){const r=e.features[i];if(r.geometry){const n=t==null?void 0:t[i];r.geometry=(n==null?void 0:n.toJSON())||r.geometry}}return e}quantize(t){const{scale:[e,i],translate:[r,n]}=t,s=c=>Math.round((c-r)/e),o=c=>Math.round((n-c)/i),a=this.features,l=this._getQuantizationFunction(this.geometryType,s,o);for(let c=0,d=a.length;c<d;c++)l!=null&&l(a[c].geometry)||(a.splice(c,1),c--,d--);return this.transform=t,this}unquantize(){var y,g;const{geometryType:t,features:e,transform:i}=this;if(!i)return this;const{translate:[r,n],scale:[s,o]}=i,a=b=>b*s+r,l=b=>n-b*o;let c=null,d=null;if(this.hasZ&&((y=i==null?void 0:i.scale)==null?void 0:y[2])!=null){const{translate:[,,b],scale:[,,_]}=i;c=x=>x*_+b}if(this.hasM&&((g=i==null?void 0:i.scale)==null?void 0:g[3])!=null){const{translate:[,,,b],scale:[,,,_]}=i;d=x=>x==null?x:x*_+b}const f=this._getHydrationFunction(t,a,l,c,d);for(const{geometry:b}of e)b!=null&&f&&f(b);return this.transform=null,this}readFeaturesWithClass(t,e,i){var s;const r=et.fromJSON(e.spatialReference),n=[];for(let o=0;o<t.length;o++){const a=t[o],l=i.fromJSON(a),c=(s=a.geometry)==null?void 0:s.spatialReference;l.geometry==null||c||(l.geometry.spatialReference=r);const d=a.aggregateGeometries,f=l.aggregateGeometries;if(d&&f!=null)for(const y in f){const g=f[y],b=d[y],_=b==null?void 0:b.spatialReference;g==null||_||(g.spatialReference=r)}n.push(l)}return n}_quantizePoints(t,e,i){let r,n;const s=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];if(o>0){const c=e(l[0]),d=i(l[1]);c===r&&d===n||(s.push([c-r,d-n]),r=c,n=d)}else r=e(l[0]),n=i(l[1]),s.push([r,n])}return s.length>0?s:null}_getQuantizationFunction(t,e,i){return t==="point"?r=>(r.x=e(r.x),r.y=i(r.y),r):t==="polyline"||t==="polygon"?r=>{const n=bn(r)?r.rings:r.paths,s=[];for(let o=0,a=n.length;o<a;o++){const l=n[o],c=this._quantizePoints(l,e,i);c&&s.push(c)}return s.length>0?(bn(r)?r.rings=s:r.paths=s,r):null}:t==="multipoint"?r=>{const n=this._quantizePoints(r.points,e,i);return n&&n.length>0?(r.points=n,r):null}:t==="extent"?r=>r:null}_getHydrationFunction(t,e,i,r,n){return t==="point"?s=>{s.x=e(s.x),s.y=i(s.y),r&&(s.z=r(s.z))}:t==="polyline"||t==="polygon"?s=>{const o=bn(s)?s.rings:s.paths;let a,l;for(let c=0,d=o.length;c<d;c++){const f=o[c];for(let y=0,g=f.length;y<g;y++){const b=f[y];y>0?(a+=b[0],l+=b[1]):(a=b[0],l=b[1]),b[0]=e(a),b[1]=i(l)}}if(r&&n)for(let c=0,d=o.length;c<d;c++){const f=o[c];for(let y=0,g=f.length;y<g;y++){const b=f[y];b[2]=r(b[2]),b[3]=n(b[3])}}else if(r)for(let c=0,d=o.length;c<d;c++){const f=o[c];for(let y=0,g=f.length;y<g;y++){const b=f[y];b[2]=r(b[2])}}else if(n)for(let c=0,d=o.length;c<d;c++){const f=o[c];for(let y=0,g=f.length;y<g;y++){const b=f[y];b[2]=n(b[2])}}}:t==="extent"?s=>{s.xmin=e(s.xmin),s.ymin=i(s.ymin),s.xmax=e(s.xmax),s.ymax=i(s.ymax),r&&s.zmax!=null&&s.zmin!=null&&(s.zmax=r(s.zmax),s.zmin=r(s.zmin)),n&&s.mmax!=null&&s.mmin!=null&&(s.mmax=n(s.mmax),s.mmin=n(s.mmin))}:t==="multipoint"?s=>{const o=s.points;let a,l;for(let c=0,d=o.length;c<d;c++){const f=o[c];c>0?(a+=f[0],l+=f[1]):(a=f[0],l=f[1]),f[0]=e(a),f[1]=i(l)}if(r&&n)for(let c=0,d=o.length;c<d;c++){const f=o[c];f[2]=r(f[2]),f[3]=n(f[3])}else if(r)for(let c=0,d=o.length;c<d;c++){const f=o[c];f[2]=r(f[2])}else if(n)for(let c=0,d=o.length;c<d;c++){const f=o[c];f[2]=n(f[2])}}:null}};u([h({type:String,json:{write:!0}})],jn.prototype,"displayFieldName",void 0),u([h({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],jn.prototype,"exceededTransferLimit",void 0),u([h({type:[qi],json:{write:!0}})],jn.prototype,"features",void 0),u([De("features")],jn.prototype,"readFeatures",null),u([h({type:[cs],json:{write:!0}})],jn.prototype,"fields",void 0),u([h({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:s8.read}}})],jn.prototype,"geometryType",void 0),u([Ve("geometryType")],jn.prototype,"writeGeometryType",null),u([h({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],jn.prototype,"hasM",void 0),u([h({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],jn.prototype,"hasZ",void 0),u([h({types:R$,json:{write:!0}})],jn.prototype,"queryGeometry",void 0),u([De("queryGeometry")],jn.prototype,"readQueryGeometry",null),u([h({type:et,json:{write:!0}})],jn.prototype,"spatialReference",void 0),u([Ve("spatialReference")],jn.prototype,"writeSpatialReference",null),u([h({json:{write:!0}})],jn.prototype,"transform",void 0),jn=n8=u([V("esri.rest.support.FeatureSet")],jn),jn.prototype.toJSON.isDefaultToJSON=!0;let GBe=0,gf=class extends Mo.LoadableMixin(Wh.EsriPromiseMixin(Ze)){constructor(e){super(e),this._idToClientGeometry=null,this.type="memory"}load(e){const i=e!=null?e.signal:null;return this.addResolvingPromise(this._startWorker(i)),Promise.resolve(this)}destroy(){var e;(e=this._connection)==null||e.close(),this._connection=null}get _workerGeometryType(){var i;const e=(i=this.layer)==null?void 0:i.geometryType;return e?this._geometryTypeRequiresClientGraphicMapping(e)?"polygon":e:null}applyEdits(e){return this.load().then((()=>this._applyEdits(e)))}openPorts(){return this.load().then((()=>this._connection.openPorts()))}async queryFeatures(e,i={}){await this.load(i);const r=await this._connection.invoke("queryFeatures",e?e.toJSON():null,i);r8(e,this.layer.spatialReference,r);const n=jn.fromJSON(r);if(!this._requiresClientGraphicMapping()||!this._idToClientGeometry)return n;const s=this.layer.objectIdField;for(const o of n.features){const a=o.attributes[s],l=this._idToClientGeometry.get(a);l!==void 0&&(o.geometry=l)}return n.geometryType=this.layer.geometryType,n}async queryFeaturesJSON(e,i={}){if(this._requiresClientGraphicMapping())throw new ie("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");await this.load(i);const r=await this._connection.invoke("queryFeatures",e?e.toJSON():null,i);return r8(e,this.layer.spatialReference,r),r}queryFeatureCount(e,i={}){return this.load(i).then((()=>this._connection.invoke("queryFeatureCount",e?e.toJSON():null,i)))}queryObjectIds(e,i={}){return this.load(i).then((()=>this._connection.invoke("queryObjectIds",e?e.toJSON():null,i)))}queryExtent(e,i={}){return this.load(i).then((()=>this._connection.invoke("queryExtent",e?e.toJSON():null,i))).then((r=>({count:r.count,extent:Qt.fromJSON(r.extent)})))}querySnapping(e,i={}){return this.load(i).then((()=>this._connection.invoke("querySnapping",e,i)))}async queryAttributeBins(e,i={}){return await this.load(),this._connection.invoke("queryAttributeBins",e==null?void 0:e.toJSON(),i)}async _applyEdits(e){if(!this._connection)throw new ie("feature-layer-source:edit-failure","Memory source not loaded");const i=this.layer.objectIdField;let r=null;const n=[],s=[];await Promise.all([this._prepareClientMapping(e.addFeatures,null),this._prepareClientMapping(e.updateFeatures,null)]);const o=d=>"objectId"in d&&d.objectId!=null?d.objectId:"attributes"in d&&d.attributes[i]!=null?d.attributes[i]:null;if(e.addFeatures&&(r=this._prepareAddFeatures(e.addFeatures)),e.deleteFeatures)for(const d of e.deleteFeatures){const f=o(d);f!=null&&n.push(f)}const a=e.updateFeatures&&this._idToClientGeometry?new Map:null;if(e.updateFeatures){for(const d of e.updateFeatures)if(s.push(this._serializeFeature(d)),a&&d.geometry!=null){const f=o(d);f!=null&&a.set(f,d)}}UBe(r?r.features:null,s,this.layer.spatialReference);const{fullExtent:l,featureEditResults:c}=await this._connection.invoke("applyEdits",{adds:r?r.features:[],updates:s,deletes:n});return this.fullExtent=l,r&&r.finish(c.uidToObjectId),this._updateIdToClientGeometries(a,c),this._createEditsResult(c)}async _prepareClientMapping(e,i){if(this._layerOrSourceGeometryType!=="mesh"||e==null)return;const r=[];for(const{geometry:n}of e)n==null||n.type!=="mesh"||n.hasExtent||n.loaded||r.push(n.load({signal:i}));r.length&&await Promise.all(r)}_updateIdToClientGeometries(e,i){if(this._idToClientGeometry){if(e)for(const r of i.updateResults){if(!r.success)continue;const n=e.get(r.objectId);n!=null&&this._addIdToClientGeometry(n)}for(const r of i.deleteResults)r.success&&this._idToClientGeometry.delete(r.objectId)}}_createEditsResult(e){return{addFeatureResults:e.addResults?e.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:e.updateResults?e.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:e.deleteResults?e.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(e){const i=e.success===!0?null:e.error||{code:void 0,description:""};return{objectId:e.objectId,globalId:e.globalId,error:i?new ie("feature-layer-source:edit-failure",i.description,{code:i.code}):null}}_prepareAddFeatures(e){const i=new Map,r=new Array(e.length);let n=null;for(let o=0;o<e.length;o++){const a=e[o],l=this._serializeFeature(a);n||a.geometry==null||(n=a.geometry.type),r[o]=l,i.set(`${l.uid}`,a)}const s=this;return{features:r,inferredGeometryType:n,finish(o){const a=s.sourceJSON.objectIdField;for(const l in o){const c=o[l],d=i.get(l);d&&(d.attributes||(d.attributes={}),c===-1?delete d.attributes[a]:d.attributes[a]=c,s._addIdToClientGeometry(d))}}}}_addIdToClientGeometry(e){var n;if(!this._idToClientGeometry)return;const i=this.sourceJSON.objectIdField,r=(n=e.attributes)==null?void 0:n[i];r!=null&&this._idToClientGeometry.set(r,e.geometry??null)}get _layerOrSourceGeometryType(){var e,i;return((e=this.layer)==null?void 0:e.geometryType)??((i=this.sourceJSON)==null?void 0:i.geometryType)}_requiresClientGraphicMapping(){return this._geometryTypeRequiresClientGraphicMapping(this._layerOrSourceGeometryType)}_geometryRequiresClientGraphicMapping(e){return this._geometryTypeRequiresClientGraphicMapping(e.type)}_geometryTypeRequiresClientGraphicMapping(e){return e==="mesh"||e==="multipatch"||e==="extent"}_serializeFeature(e){const{attributes:i}=e,r=this._geometryForSerialization(e),n=(GBe++).toString();return r?{uid:n,geometry:r.toJSON(),attributes:i}:{uid:n,attributes:i}}_geometryForSerialization(e){const{geometry:i}=e;return i==null?null:this._geometryRequiresClientGraphicMapping(i)?i.extent?br.fromExtent(i.extent):null:i}async _startWorker(e){this._connection=await QPe("MemorySourceWorker",{strategy:fe("feature-layers-workers")?"dedicated":"local",signal:e,registryTarget:this});const{fields:i,spatialReference:r,objectIdField:n,hasM:s,hasZ:o,timeInfo:a,dateFieldsTimeZone:l}=this.layer,c=this.layer.originOf("spatialReference")==="defaults";await this._prepareClientMapping(this.items,e);const d=this._prepareAddFeatures(this.items);this.addHandles(this.on("before-changes",(b=>{Ie.getLogger(this).error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),b.preventDefault()})));const f={features:d.features,fields:i==null?void 0:i.map((b=>b.toJSON())),geometryType:lX.toJSON(this._workerGeometryType),hasM:this._layerOrSourceGeometryType!=="mesh"&&s,hasZ:this._layerOrSourceGeometryType==="mesh"||o,objectIdField:n,spatialReference:c?null:r&&r.toJSON(),timeInfo:(a==null?void 0:a.toJSON())??null,dateFieldsTimeZone:l},y=await this._connection.invoke("load",f,{signal:e});for(const b of y.warnings)Ie.getLogger(this.layer).warn("#load()",`${b.message} (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{warning:b});y.featureErrors.length&&Ie.getLogger(this.layer).warn("#load()",`Encountered ${y.featureErrors.length} validation errors while loading features. (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{errors:y.featureErrors});const g=y.layerDefinition;this._geometryTypeRequiresClientGraphicMapping(d.inferredGeometryType)&&(g.geometryType=lX.toJSON(d.inferredGeometryType)),this.sourceJSON=g,this._requiresClientGraphicMapping()&&(this._idToClientGeometry=new Map),d.finish(y.assignedObjectIds)}};u([lG({Type:qi,ensureType:En(qi)})],gf.prototype,"itemType",void 0),u([h()],gf.prototype,"type",void 0),u([h({constructOnly:!0})],gf.prototype,"layer",void 0),u([h({readOnly:!0})],gf.prototype,"_workerGeometryType",null),u([h()],gf.prototype,"sourceJSON",void 0),gf=u([V("esri.layers.graphics.sources.MemorySource")],gf);function qBe(t){return"portalItem"in t}const HBe=t=>{let e=class extends t{get apiKey(){var i;return this._isOverridden("apiKey")?this._get("apiKey"):qBe(this)?(i=this.portalItem)==null?void 0:i.apiKey:null}set apiKey(i){i!=null?this._override("apiKey",i):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return u([h({type:String})],e.prototype,"apiKey",null),e=u([V("esri.layers.mixins.APIKeyMixin")],e),e},WBe=t=>{let e=class extends t{get title(){if(this._get("title")&&this.originOf("title")!=="defaults")return this._get("title");if(this.url){const i=up(this.url);if(i!=null&&i.title)return i.title}return this._get("title")||""}set title(i){this._set("title",i)}set url(i){this._set("url",jIe(i,Ie.getLogger(this)))}};return u([h()],e.prototype,"title",null),u([h({type:String})],e.prototype,"url",null),e=u([V("esri.layers.mixins.ArcGISService")],e),e};let Rte=class extends SyntaxError{constructor(e,i,r,n){super(e),this.expected=i,this.found=r,this.location=n,this.name="SyntaxError"}format(e){let i="Error: "+this.message;if(this.location){let r=null;const n=e.find((l=>l.source===this.location.source));n&&(r=n.text.split(/\r\n|\n|\r/g));const s=this.location.start,o=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(s):s,a=this.location.source+":"+o.line+":"+o.column;if(r){const l=this.location.end,c="".padEnd(o.line.toString().length," "),d=r[s.line-1],f=(s.line===l.line?l.column:d.length+1)-s.column||1;i+=`
 --> `+a+`
`+c+` |
`+o.line+" | "+d+`
`+c+" | "+"".padEnd(s.column-1," ")+"".padEnd(f,"^")}else i+=`
 at `+a}return i}static buildMessage(e,i){function r(y){return y.codePointAt(0).toString(16).toUpperCase()}const n=Object.prototype.hasOwnProperty.call(RegExp.prototype,"unicode")?new RegExp("[\\p{C}\\p{Mn}\\p{Mc}]","gu"):null;function s(y){return n?y.replace(n,(g=>"\\u{"+r(g)+"}")):y}function o(y){return s(y.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(g=>"\\x0"+r(g))).replace(/[\x10-\x1F\x7F-\x9F]/g,(g=>"\\x"+r(g))))}function a(y){return s(y.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(g=>"\\x0"+r(g))).replace(/[\x10-\x1F\x7F-\x9F]/g,(g=>"\\x"+r(g))))}const l={literal:y=>'"'+o(y.text)+'"',class(y){const g=y.parts.map((b=>Array.isArray(b)?a(b[0])+"-"+a(b[1]):a(b)));return"["+(y.inverted?"^":"")+g.join("")+"]"+(y.unicode?"u":"")},any:()=>"any character",end:()=>"end of input",other:y=>y.description};function c(y){return l[y.type](y)}function d(y){const g=y.map(c);if(g.sort(),g.length>0){let b=1;for(let _=1;_<g.length;_++)g[_-1]!==g[_]&&(g[b]=g[_],b++);g.length=b}switch(g.length){case 1:return g[0];case 2:return g[0]+" or "+g[1];default:return g.slice(0,-1).join(", ")+", or "+g[g.length-1]}}function f(y){return y?'"'+o(y)+'"':"end of input"}return"Expected "+d(e)+" but "+f(i)+" found."}};function ZBe(t,e){const i={},r=(e=e!==void 0?e:{}).grammarSource,n={start:Mw};let s=Mw;const o="none",a=")",l=",",c="(",d="%",f="px",y="cm",g="mm",b="in",_="pt",x="pc",E="deg",C="rad",k="grad",O="turn",D="#",B=".",j="e",Z=/^[ \t\n\r]/,X=/^[a-z\-]/,ee=/^[0-9a-fA-F]/,pe=/^[+\-]/,he=/^[0-9]/,ne=tl("none"),re=ki("none",!1),ke=ki(")",!1),Fe=ki(",",!1),Ae=Zc([" ","	",`
`,"\r"],!1,!1,!1),we=tl("function"),Re=ki("(",!1),je=tl("identifier"),ue=Zc([["a","z"],"-"],!1,!1,!1),Ne=tl("percentage"),Pt=ki("%",!1),Ot=tl("length"),Xt=ki("px",!1),oi=ki("cm",!1),vi=ki("mm",!1),ui=ki("in",!1),Qe=ki("pt",!1),In=ki("pc",!1),Ao=tl("angle"),Vl=ki("deg",!1),ro=ki("rad",!1),Lo=ki("grad",!1),dd=ki("turn",!1),jl=tl("number"),ym=tl("color"),hd=ki("#",!1),gm=Zc([["0","9"],["a","f"],["A","F"]],!1,!1,!1),Qa=Zc(["+","-"],!1,!1,!1),Gn=Zc([["0","9"]],!1,!1,!1),vm=ki(".",!1),Yg=ki("e",!1);function _p(){return[]}function Xg(Q,Me){return{type:"function",name:Q,parameters:Me||[]}}function pd(Q,Me){return Me.length>0?av(Q,Me,3):[Q]}function Kg(Q){return{type:"quantity",value:Q.value,unit:Q.unit}}function fd(Q){return{type:"color",colorType:Q.type,value:Q.value}}function Cw(Q){return Q}function Bc(){return qn()}function Gc(Q){return{value:Q,unit:"%"}}function Qg(Q){return{value:Q,unit:"px"}}function ev(Q){return{value:Q,unit:"cm"}}function tv(Q){return{value:Q,unit:"mm"}}function bm(Q){return{value:Q,unit:"in"}}function wm(Q){return{value:Q,unit:"pt"}}function _m(Q){return{value:Q,unit:"pc"}}function qc(Q){return{value:Q,unit:"deg"}}function Hc(Q){return{value:Q,unit:"rad"}}function Ul(Q){return{value:Q,unit:"grad"}}function Wc(Q){return{value:Q,unit:"turn"}}function Bl(Q){return{value:Q,unit:null}}function iv(){return{type:"hex",value:qn()}}function xm(Q){return{type:"function",value:Q}}function Sm(){return{type:"named",value:qn()}}function rv(){return parseFloat(qn())}let Ce=0|e.peg$currPos,Ji=Ce;const el=[{line:1,column:1}];let Ro,Os=Ce,Gl=e.peg$maxFailExpected||[],mt=0|e.peg$silentFails;if(e.startRule){if(!(e.startRule in n))throw new Error(`Can't start parsing from rule "`+e.startRule+'".');s=n[e.startRule]}function qn(){return t.substring(Ji,Ce)}function ha(Q=Ce){const Me=t.codePointAt(Q);return Me===void 0?"":String.fromCodePoint(Me)}function ki(Q,Me){return{type:"literal",text:Q,ignoreCase:Me}}function Zc(Q,Me,Ge,Et){return{type:"class",parts:Q,inverted:Me,ignoreCase:Ge,unicode:Et}}function tT(){return{type:"end"}}function tl(Q){return{type:"other",description:Q}}function il(Q){let Me,Ge=el[Q];if(Ge)return Ge;if(Q>=el.length)Me=el.length-1;else for(Me=Q;!el[--Me];);for(Ge=el[Me],Ge={line:Ge.line,column:Ge.column};Me<Q;)t.charCodeAt(Me)===10?(Ge.line++,Ge.column=1):Ge.column++,Me++;return el[Q]=Ge,Ge}function Mt(Q,Me,Ge){const Et=il(Q),bi=il(Me);return{source:r,start:{offset:Q,line:Et.line,column:Et.column},end:{offset:Me,line:bi.line,column:bi.column}}}function qt(Q){Ce<Os||(Ce>Os&&(Os=Ce,Gl=[]),Gl.push(Q))}function nv(Q,Me,Ge){return new Rte(Rte.buildMessage(Q,Me),Q,Me,Ge)}function Mw(){let Q;return Q=kw(),Q===i&&(Q=md()),Q}function kw(){let Q,Me;return mt++,Q=Ce,an(),t.substr(Ce,4)===o?(Me=o,Ce+=4):(Me=i,mt===0&&qt(re)),Me!==i?(an(),Ji=Q,Q=_p()):(Ce=Q,Q=i),mt--,Q===i&&mt===0&&qt(ne),Q}function md(){let Q,Me;if(Q=[],Me=yd(),Me!==i)for(;Me!==i;)Q.push(Me),Me=yd();else Q=i;return Q}function yd(){let Q,Me,Ge,Et;return Q=Ce,an(),Me=wr(),Me!==i?(an(),Ge=Pw(),Ge===i&&(Ge=null),an(),t.charCodeAt(Ce)===41?(Et=a,Ce++):(Et=i,mt===0&&qt(ke)),Et!==i?(an(),Ji=Q,Q=Xg(Me,Ge)):(Ce=Q,Q=i)):(Ce=Q,Q=i),Q}function Pw(){let Q,Me,Ge,Et,bi,Yi,_r,Cr;if(Q=Ce,Me=sv(),Me!==i){for(Ge=[],Et=Ce,bi=an(),t.charCodeAt(Ce)===44?(Yi=l,Ce++):(Yi=i,mt===0&&qt(Fe)),Yi===i&&(Yi=null),_r=an(),Cr=sv(),Cr!==i?(bi=[bi,Yi,_r,Cr],Et=bi):(Ce=Et,Et=i);Et!==i;)Ge.push(Et),Et=Ce,bi=an(),t.charCodeAt(Ce)===44?(Yi=l,Ce++):(Yi=i,mt===0&&qt(Fe)),Yi===i&&(Yi=null),_r=an(),Cr=sv(),Cr!==i?(bi=[bi,Yi,_r,Cr],Et=bi):(Ce=Et,Et=i);Ji=Q,Q=pd(Me,Ge)}else Ce=Q,Q=i;return Q}function sv(){let Q,Me;return Q=Ce,Me=$m(),Me===i&&(Me=ov(),Me===i&&(Me=Jc(),Me===i&&(Me=Lw()))),Me!==i&&(Ji=Q,Me=Kg(Me)),Q=Me,Q===i&&(Q=Ce,Me=Tm(),Me!==i&&(Ji=Q,Me=fd(Me)),Q=Me),Q}function an(){let Q,Me;for(mt++,Q=[],Me=t.charAt(Ce),Z.test(Me)?Ce++:(Me=i,mt===0&&qt(Ae));Me!==i;)Q.push(Me),Me=t.charAt(Ce),Z.test(Me)?Ce++:(Me=i,mt===0&&qt(Ae));return mt--,Q}function wr(){let Q,Me,Ge;return mt++,Q=Ce,Me=Aw(),Me!==i?(t.charCodeAt(Ce)===40?(Ge=c,Ce++):(Ge=i,mt===0&&qt(Re)),Ge!==i?(Ji=Q,Q=Me):(Ce=Q,Q=i)):(Ce=Q,Q=i),mt--,Q===i&&(Me=i,mt===0&&qt(we)),Q}function Aw(){let Q,Me,Ge;if(mt++,Q=Ce,Me=[],Ge=t.charAt(Ce),X.test(Ge)?Ce++:(Ge=i,mt===0&&qt(ue)),Ge!==i)for(;Ge!==i;)Me.push(Ge),Ge=t.charAt(Ce),X.test(Ge)?Ce++:(Ge=i,mt===0&&qt(ue));else Me=i;return Me!==i&&(Ji=Q,Me=Bc()),Q=Me,mt--,Q===i&&(Me=i,mt===0&&qt(je)),Q}function $m(){let Q,Me,Ge;return mt++,Q=Ce,an(),Me=Hn(),Me!==i?(t.charCodeAt(Ce)===37?(Ge=d,Ce++):(Ge=i,mt===0&&qt(Pt)),Ge!==i?(Ji=Q,Q=Gc(Me)):(Ce=Q,Q=i)):(Ce=Q,Q=i),mt--,Q===i&&mt===0&&qt(Ne),Q}function ov(){let Q,Me,Ge;return mt++,Q=Ce,an(),Me=Hn(),Me!==i?(t.substr(Ce,2)===f?(Ge=f,Ce+=2):(Ge=i,mt===0&&qt(Xt)),Ge!==i?(Ji=Q,Q=Qg(Me)):(Ce=Q,Q=i)):(Ce=Q,Q=i),Q===i&&(Q=Ce,an(),Me=Hn(),Me!==i?(t.substr(Ce,2)===y?(Ge=y,Ce+=2):(Ge=i,mt===0&&qt(oi)),Ge!==i?(Ji=Q,Q=ev(Me)):(Ce=Q,Q=i)):(Ce=Q,Q=i),Q===i&&(Q=Ce,an(),Me=Hn(),Me!==i?(t.substr(Ce,2)===g?(Ge=g,Ce+=2):(Ge=i,mt===0&&qt(vi)),Ge!==i?(Ji=Q,Q=tv(Me)):(Ce=Q,Q=i)):(Ce=Q,Q=i),Q===i&&(Q=Ce,an(),Me=Hn(),Me!==i?(t.substr(Ce,2)===b?(Ge=b,Ce+=2):(Ge=i,mt===0&&qt(ui)),Ge!==i?(Ji=Q,Q=bm(Me)):(Ce=Q,Q=i)):(Ce=Q,Q=i),Q===i&&(Q=Ce,an(),Me=Hn(),Me!==i?(t.substr(Ce,2)===_?(Ge=_,Ce+=2):(Ge=i,mt===0&&qt(Qe)),Ge!==i?(Ji=Q,Q=wm(Me)):(Ce=Q,Q=i)):(Ce=Q,Q=i),Q===i&&(Q=Ce,an(),Me=Hn(),Me!==i?(t.substr(Ce,2)===x?(Ge=x,Ce+=2):(Ge=i,mt===0&&qt(In)),Ge!==i?(Ji=Q,Q=_m(Me)):(Ce=Q,Q=i)):(Ce=Q,Q=i)))))),mt--,Q===i&&mt===0&&qt(Ot),Q}function Jc(){let Q,Me,Ge;return mt++,Q=Ce,Me=Hn(),Me!==i?(t.substr(Ce,3)===E?(Ge=E,Ce+=3):(Ge=i,mt===0&&qt(Vl)),Ge!==i?(Ji=Q,Q=qc(Me)):(Ce=Q,Q=i)):(Ce=Q,Q=i),Q===i&&(Q=Ce,Me=Hn(),Me!==i?(t.substr(Ce,3)===C?(Ge=C,Ce+=3):(Ge=i,mt===0&&qt(ro)),Ge!==i?(Ji=Q,Q=Hc(Me)):(Ce=Q,Q=i)):(Ce=Q,Q=i),Q===i&&(Q=Ce,Me=Hn(),Me!==i?(t.substr(Ce,4)===k?(Ge=k,Ce+=4):(Ge=i,mt===0&&qt(Lo)),Ge!==i?(Ji=Q,Q=Ul(Me)):(Ce=Q,Q=i)):(Ce=Q,Q=i),Q===i&&(Q=Ce,Me=Hn(),Me!==i?(t.substr(Ce,4)===O?(Ge=O,Ce+=4):(Ge=i,mt===0&&qt(dd)),Ge!==i?(Ji=Q,Q=Wc(Me)):(Ce=Q,Q=i)):(Ce=Q,Q=i)))),mt--,Q===i&&(Me=i,mt===0&&qt(Ao)),Q}function Lw(){let Q,Me;return mt++,Q=Ce,an(),Me=Hn(),Me!==i?(Ji=Q,Q=Bl(Me)):(Ce=Q,Q=i),mt--,Q===i&&mt===0&&qt(jl),Q}function Tm(){let Q,Me,Ge,Et;if(mt++,Q=Ce,t.charCodeAt(Ce)===35?(Me=D,Ce++):(Me=i,mt===0&&qt(hd)),Me!==i){if(Ge=[],Et=t.charAt(Ce),ee.test(Et)?Ce++:(Et=i,mt===0&&qt(gm)),Et!==i)for(;Et!==i;)Ge.push(Et),Et=t.charAt(Ce),ee.test(Et)?Ce++:(Et=i,mt===0&&qt(gm));else Ge=i;Ge!==i?(Ji=Q,Q=iv()):(Ce=Q,Q=i)}else Ce=Q,Q=i;return Q===i&&(Q=Ce,Me=yd(),Me!==i&&(Ji=Q,Me=xm(Me)),Q=Me,Q===i&&(Q=Ce,Me=Aw(),Me!==i&&(Ji=Q,Me=Sm()),Q=Me)),mt--,Q===i&&(Me=i,mt===0&&qt(ym)),Q}function Hn(){let Q,Me,Ge,Et,bi,Yi,_r,Cr;for(Q=Ce,Me=t.charAt(Ce),pe.test(Me)?Ce++:(Me=i,mt===0&&qt(Qa)),Me===i&&(Me=null),Ge=Ce,Et=[],bi=t.charAt(Ce),he.test(bi)?Ce++:(bi=i,mt===0&&qt(Gn));bi!==i;)Et.push(bi),bi=t.charAt(Ce),he.test(bi)?Ce++:(bi=i,mt===0&&qt(Gn));if(t.charCodeAt(Ce)===46?(bi=B,Ce++):(bi=i,mt===0&&qt(vm)),bi!==i){if(Yi=[],_r=t.charAt(Ce),he.test(_r)?Ce++:(_r=i,mt===0&&qt(Gn)),_r!==i)for(;_r!==i;)Yi.push(_r),_r=t.charAt(Ce),he.test(_r)?Ce++:(_r=i,mt===0&&qt(Gn));else Yi=i;Yi!==i?(Et=[Et,bi,Yi],Ge=Et):(Ce=Ge,Ge=i)}else Ce=Ge,Ge=i;if(Ge===i)if(Ge=[],Et=t.charAt(Ce),he.test(Et)?Ce++:(Et=i,mt===0&&qt(Gn)),Et!==i)for(;Et!==i;)Ge.push(Et),Et=t.charAt(Ce),he.test(Et)?Ce++:(Et=i,mt===0&&qt(Gn));else Ge=i;if(Ge!==i){if(Et=Ce,t.charCodeAt(Ce)===101?(bi=j,Ce++):(bi=i,mt===0&&qt(Yg)),bi!==i){if(Yi=t.charAt(Ce),pe.test(Yi)?Ce++:(Yi=i,mt===0&&qt(Qa)),Yi===i&&(Yi=null),_r=[],Cr=t.charAt(Ce),he.test(Cr)?Ce++:(Cr=i,mt===0&&qt(Gn)),Cr!==i)for(;Cr!==i;)_r.push(Cr),Cr=t.charAt(Ce),he.test(Cr)?Ce++:(Cr=i,mt===0&&qt(Gn));else _r=i;_r!==i?(bi=[bi,Yi,_r],Et=bi):(Ce=Et,Et=i)}else Ce=Et,Et=i;Et===i&&(Et=null),Ji=Q,Q=rv()}else Ce=Q,Q=i;return Q}function pa(Q,Me){return Q.map((function(Ge){return Ge[Me]}))}function av(Q,Me,Ge){return[Q].concat(pa(Me,Ge))}Ro=s();const Fs=Ro!==i&&Ce===t.length;function Em(){throw Ro!==i&&Ce<t.length&&qt(tT()),nv(Gl,Os<t.length?ha(Os):null,Os<t.length?Mt(Os,Os+1):Mt(Os,Os))}return e.peg$library?{peg$result:Ro,peg$currPos:Ce,peg$FAILED:i,peg$maxFailExpected:Gl,peg$maxFailPos:Os,peg$success:Fs,peg$throw:Fs?void 0:Em}:Fs?Ro:void Em()}function iH(t){if(!t||t.length===0)return null;if(typeof t=="string"){const i=Ote(t);return i&&i.length!==0?i:null}const e=t.map((i=>{if(!Number.isFinite(i.scale)||i.scale<=0)throw new ie("effect:invalid-scale","scale must be finite and greater than 0",{stop:i});return{scale:i.scale,effects:Ote(i.value)}}));e.sort(((i,r)=>r.effects.length-i.effects.length));for(let i=0;i<e.length-1;i++){if(!Vpe(e[i].effects,e[i+1].effects))throw new ie("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:e[i].effects,b:e[i+1].effects});jpe(e[i].effects,e[i+1].effects)}return e.sort(((i,r)=>r.scale-i.scale)),e}function Ote(t){let e;if(!t)return[];try{e=ZBe(t)}catch(i){throw new ie("effect:invalid-syntax","Invalid effect syntax",{value:t,error:i})}return e.map((i=>JBe(i)))}function JBe(t){try{switch(t.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return YBe(t);case"opacity":return XBe(t);case"hue-rotate":return KBe(t);case"blur":return QBe(t);case"drop-shadow":return e8e(t);case"bloom":return t8e(t)}}catch(e){throw e.details.filter=t,e}throw new ie("effect:unknown-effect",`Effect '${t.name}' is not supported`,{effect:t})}function YBe(t){let e=1;return G$(t.parameters,1),t.parameters.length===1&&(e=Lu(t.parameters[0])),new EU(t.name,e)}function XBe(t){let e=1;return G$(t.parameters,1),t.parameters.length===1&&(e=Lu(t.parameters[0])),new Dpe(e)}function KBe(t){let e=0;return G$(t.parameters,1),t.parameters.length===1&&(e=a8e(t.parameters[0])),new Fpe(e)}function QBe(t){let e=0;return G$(t.parameters,1),t.parameters.length===1&&(e=sH(t.parameters[0]),C2(e,t.parameters[0])),new Ppe(e)}function e8e(t){const e=[];let i=null;for(const r of t.parameters)if(r.type==="color"){if(e.length&&Object.freeze(e),i)throw new ie("effect:type-error","Accepts only one color",{});i=l8e(r)}else{const n=sH(r);if(Object.isFrozen(e))throw new ie("effect:type-error","<length> parameters not consecutive",{lengths:e});e.push(n),e.length===3&&C2(n,r)}if(e.length<2||e.length>3)throw new ie("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${e.length}}`,{lengths:e});return new Rpe(e[0],e[1],e[2]||0,i||Mge("black"))}function t8e(t){let e=1,i=0,r=0;return G$(t.parameters,3),t.parameters[0]&&(e=Lu(t.parameters[0])),t.parameters[1]&&(i=sH(t.parameters[1]),C2(i,t.parameters[1])),t.parameters[2]&&(r=Lu(t.parameters[2])),new Mpe(e,i,r)}function G$(t,e){if(t.length>e)throw new ie("effect:type-error",`Function supports up to ${e} parameters, Actual: ${t.length}`,{parameters:t})}function AN(t){if(t.type==="color")return"<color>";if(t.unit){if(t.unit in nH)return"<length>";if(t.unit in rH)return"<angle>";if(t.unit==="%")return"<percentage>"}return"<double>"}function C2(t,e){if(t<0)throw new ie("effect:type-error",`Negative values are not allowed, Actual: ${t}`,{term:e})}function i8e(t){if(t.type!=="quantity"||t.unit!==null)throw new ie("effect:type-error",`Expected <double>, Actual: ${AN(t)}`,{term:t})}function r8e(t){if(t.type!=="quantity"||t.unit!==null&&t.unit!=="%")throw new ie("effect:type-error",`Expected <double> or <percentage>, Actual: ${AN(t)}`,{term:t})}const rH={deg:1,grad:.9,rad:180/Math.PI,turn:360};function n8e(t){if(t.type!=="quantity"||!(t.value===0&&t.unit===null||t.unit&&rH[t.unit]!=null))throw new ie("effect:type-error",`Expected <angle>, Actual: ${AN(t)}`,{term:t})}const nH={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function s8e(t){if(t.type!=="quantity"||!(t.value===0&&t.unit===null||t.unit&&nH[t.unit]!=null))throw new ie("effect:type-error",`Expected <length>, Actual: ${AN(t)}`,{term:t})}function Lu(t){r8e(t);const e=t.value;return C2(e,t),t.unit==="%"?.01*e:e}function o8e(t){return i8e(t),C2(t.value,t),t.value}function a8e(t){return n8e(t),t.value*rH[t.unit]||0}function sH(t){return s8e(t),t.value*nH[t.unit]||0}function l8e(t){switch(t.colorType){case"hex":return HRe(t.value);case"named":return Mge(t.value);case"function":return d8e(t.value)}}function Mge(t){if(!dpe(t))throw new ie("effect:unknown-color",`color '${t}' isn't valid`,{namedColor:t});return qRe(t)}const c8e=/^rgba?/i,u8e=/^hsla?/i;function d8e(t){if(G$(t.parameters,4),c8e.test(t.name))return[Lu(t.parameters[0]),Lu(t.parameters[1]),Lu(t.parameters[2]),t.parameters[3]?Lu(t.parameters[3]):1];if(u8e.test(t.name))return hpe(o8e(t.parameters[0]),Lu(t.parameters[1]),Lu(t.parameters[2]),t.parameters[3]?Lu(t.parameters[3]):1);throw new ie("effect:syntax-error",`Invalid color function '${t.name}'`,{colorFunction:t})}function cM(t,e,i){var r;try{return p8e(t)}catch(n){(r=i==null?void 0:i.messages)==null||r.push(n)}return null}function uM(t,e,i,r){try{const n=h8e(t);xn(i,n,e)}catch(n){r.messages&&r.messages.push(n)}}function h8e(t){const e=iH(t);return e?S3e(e)?e.map((i=>i.toJSON())):e.map((({scale:i,effects:r})=>({scale:i,value:r.map((n=>n.toJSON()))}))):null}function p8e(t){if(!t||t.length===0)return null;if(f8e(t)){const e=[];for(const i of t)e.push({scale:i.scale,value:qO(i.value)});return e}return qO(t)}function f8e(t){const e=t[0];return!!e&&"scale"in e}function qO(t){if(!(t!=null&&t.length))return"";const e=[];for(const i of t){let r=[];switch(i.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":r=[Np(i,"amount")];break;case"blur":r=[Np(i,"radius","pt")];break;case"hue-rotate":r=[Np(i,"angle","deg")];break;case"drop-shadow":r=[Np(i,"xoffset","pt"),Np(i,"yoffset","pt"),Np(i,"blurRadius","pt"),m8e(i,"color")];break;case"bloom":r=[Np(i,"strength"),Np(i,"radius","pt"),Np(i,"threshold")]}const n=`${i.type}(${r.filter(Boolean).join(" ")})`;iH(n),e.push(n)}return e.join(" ")}function Np(t,e,i){if(t[e]==null)throw new ie("effect:missing-parameter",`Missing parameter '${e}' in ${t.type} effect`,{effect:t});return i?t[e]+i:""+t[e]}function m8e(t,e){if(t[e]==null)throw new ie("effect:missing-parameter",`Missing parameter '${e}' in ${t.type} effect`,{effect:t});const i=t[e];return`rgba(${i[0]||0}, ${i[1]||0}, ${i[2]||0}, ${i[3]/255||0})`}const y8e={type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:{layerContainerTypes:pr}},"portal-item":{read:!0,write:{layerContainerTypes:pr}}}}},Fte={read:{reader:cM},write:{allowNull:!0,writer:uM,layerContainerTypes:pr}},g8e={json:{read:!1,write:!1,origins:{"web-map":Fte,"portal-item":Fte}}},v8e=t=>{let e=class extends t{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return u([h(y8e)],e.prototype,"blendMode",void 0),u([h(g8e)],e.prototype,"effect",void 0),e=u([V("esri.layers.mixins.BlendLayer")],e),e},b8e=t=>{let e=class extends t{constructor(){super(...arguments),this.customParameters=null}};return u([h({type:Object,json:{write:{overridePolicy:i=>({enabled:!!(i&&Object.keys(i).length>0)})}}})],e.prototype,"customParameters",void 0),e=u([V("esri.layers.mixins.CustomParametersMixin")],e),e},kge=96;function G0t(t,e){const i=t.extent,r=t.width,n=Dc(i==null?void 0:i.spatialReference);return i&&r?i.width/r*n*oue*kge:0}function q0t(t,e){return t/(Dc(e)*oue*kge)}function w8e(t,e,i){return _8e(t,e)&&x8e(t,i)}function _8e(t,e){return e===0||Ju(t,e)||t<e}function x8e(t,e){return e===0||Ju(t,e)||t>e}function S8e(t,e){return Ju(t,e)?0:(t||Number.POSITIVE_INFINITY)>(e||Number.POSITIVE_INFINITY)?1:-1}const Nte={write:{overridePolicy:(t,e,i)=>({enabled:!i||i.filterMode==="scale"})}};let vf=class extends bt.ClonableMixin(ve){constructor(e){super(e),this.id=V$(),this.maxScale=0,this.minScale=0,this.title="",this.where=null}};u([h({type:String,json:{write:!0}})],vf.prototype,"id",void 0),u([h({type:Number,json:Nte})],vf.prototype,"maxScale",void 0),u([h({type:Number,json:Nte})],vf.prototype,"minScale",void 0),u([h({type:String,json:{write:!0}})],vf.prototype,"title",void 0),u([h({type:String,json:{write:!0}})],vf.prototype,"where",void 0),vf=u([V("esri.layers.support.DisplayFilter")],vf);function $8e(t,e){return{...e,filterMode:t.mode}}function T8e(t,e){return Pge(t,e).next().value??null}function W0t(t,e,i){const r=E8e(t);if(r&&(ace(e,r[0])||yj(i,r[1])))return"";const n=Array.from(Pge(t,e,i)),s=I8e(n,e,i)?"1=1":n.map((o=>o.where||"1=1")).reduce(((o,a)=>kU(o,a)),"");return s&&s!=="1=1"?s:""}function E8e(t){if(Age(t)==="manual")return null;const e=[Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY];for(const{minScale:i,maxScale:r}of t.filters)e[0]=Math.max(e[0],dM(i)),e[1]=Math.min(e[1],HO(r));return e}function*Pge(t,e,i){if(Age(t)==="manual"){const r=t.filters.find((n=>n.id===t.activeFilterId));r&&(yield r)}else{typeof e=="object"&&(e=e.scale);for(const r of t.filters)C8e(r.minScale,r.maxScale,e,i)&&(yield r)}}function I8e(t,e,i){var s,o;if(t.length===0)return!0;const r=dM((s=t.at(0))==null?void 0:s.minScale),n=HO((o=t.at(-1))==null?void 0:o.maxScale);if(yj(r,e)||ace(n,i))return!0;for(let a=0;a<t.length-1;a++){const l=t[a],c=t[a+1];if(yj(dM(c.minScale),HO(l.maxScale)))return!0}return!1}function C8e(t,e,i,r){return t=dM(t),i=dM(i),e=HO(e),!(!Ju(i,t)&&(r??i)>t)&&!WEe(e,i)&&(r===void 0||!Ju(r,t))}function Age(t){return"mode"in t?t.mode:t.filterMode}function dM(t){return t||Number.POSITIVE_INFINITY}function HO(t){return t||0}let $0=class extends bt.ClonableMixin(ve){constructor(e){super(e),this.activeFilterId=null,this.filters=new(Ze.ofType(vf)),this.mode="manual"}writeFilters(e,i,r,n){const s=e.toArray();this.mode==="scale"&&s.sort(((o,a)=>{const l=S8e(a.minScale,o.minScale),c=o.maxScale-a.maxScale;return l===0?c:l})),i[r]=s.map((o=>o.toJSON(n)))}write(e,i){return super.write(e,$8e(this,i))}};u([h({type:String,json:{write:{overridePolicy:(t,e,i)=>({enabled:i.filterMode==="manual",isRequired:!0})}}})],$0.prototype,"activeFilterId",void 0),u([h({type:Ze.ofType(vf),nonNullable:!0,json:{write:!0}})],$0.prototype,"filters",void 0),u([Ve("filters")],$0.prototype,"writeFilters",null),u([h({type:["manual","scale"],nonNullable:!0,json:{name:"filterMode",write:!0}})],$0.prototype,"mode",void 0),$0=u([V("esri.layers.support.DisplayFilterInfo")],$0);const M8e=t=>{let e=class extends t{constructor(){super(...arguments),this.displayFilterEnabled=!0,this.displayFilterInfo=null}};return u([h(k8e)],e.prototype,"displayFilterEnabled",void 0),u([h(P8e)],e.prototype,"displayFilterInfo",void 0),e=u([V("esri.layers.mixins.DisplayFilteredLayer")],e),e},k8e={type:Boolean,json:{name:"layerDefinition.disableDisplayFilter",read:{reader:t=>!t},write:{layerContainerTypes:pr,writer(t,e,i){xn(i,!t,e)}},origins:{"web-scene":{write:!1,read:!1}}}},P8e={type:$0,json:{name:"layerDefinition.displayFilterInfo",write:{enabled:!0,allowNull:!0,layerContainerTypes:pr},origins:{"web-scene":{write:!1,read:!1}}}},o8=YRe(),Lge=new Map,Rge=new Map;async function J0t(t,e,i){if(!t||!i)return!1;if(!e)return!0;const r=new URL(t).host;let n=Lge.get(r);if(!n){const s=t.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,"");n=(await fi(s,{responseType:"json",query:{f:"json"}})).data.defaultVersionName}return n===e}async function Dte(t,e,i=!1){var s,o,a;if(!t||!e)return!0;const r=t.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),n=(s=Rge.get(r))==null?void 0:s.entries();if(n){for(const[l,c]of n)if(c.name===e){const d=!((o=c.stack)!=null&&o.hasForwardEdits());if(!d&&i){const[{deleteForwardEdits:f},{default:y}]=await Promise.all([ye(()=>import("./deleteForwardEdits-BZXY6rby.js"),[]),ye(()=>import("./DeleteForwardEditsParameters-CaZXAfHR.js"),[])]),g=await f(r,l,new y({sessionId:o8,moment:c.moment}));return g.success&&((a=c.stack)==null||a.clearForwardEdits()),g.success}return d}}return!0}function BL(t,e){var n;if(!t)return!1;const i=t.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),r=(n=Rge.get(i))==null?void 0:n.entries();if(r){for(const[s,o]of r)if(o.name===e)return o.lockType==="edit"}return!1}const oH=new ad.EventEmitter;function Oge(t){return oH.on("apply-edits",new WeakRef(t))}function Fge(t){return oH.on("update-moment",new WeakRef(t))}function zte(t,e,i=null,r=!1){const n=Nl();return r=e==null||r,oH.emit("apply-edits",{serviceUrl:t,layerId:e,gdbVersion:i,mayReceiveServiceEdits:r,result:n.promise}),n}const Nge=Symbol();function Y0t(t){return t!=null&&typeof t=="object"&&Nge in t}function lE(t){return t!=null&&typeof t=="object"&&"gdbVersion"in t}function bC(t,e,i){const r=new URL(t).host,n=Lge.get(r),s=o=>!o||o===n;return s(e)&&s(i)||e===i}const A8e=t=>{var r;var e;let i=(r=class extends t{constructor(...n){super(...n),this[e]=!0,this._applyEditsHandler=s=>{const{serviceUrl:o,layerId:a,gdbVersion:l,mayReceiveServiceEdits:c,result:d}=s,f=o===this.url,y=a!=null&&this.layerId!=null&&a===this.layerId,g=lE(this),b=lE(this)&&bC(o,l,this.gdbVersion);if(!f||g&&!b||!y&&!c)return;const _=d.then((x=>{var k;if(this.lastEditsEventDate=new Date,y&&(x.addedFeatures.length||x.updatedFeatures.length||x.deletedFeatures.length||x.addedAttachments.length||x.updatedAttachments.length||x.deletedAttachments.length))return this.emit("edits",se(x)),x;const E=(k=x.editedFeatures)==null?void 0:k.find((({layerId:O})=>O===this.layerId));if(E){const{adds:O,updates:D,deletes:B}=E.editedFeatures,j={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:O?O.map((({attributes:Z})=>({objectId:this.objectIdField&&Z[this.objectIdField],globalId:this.globalIdField&&Z[this.globalIdField]}))):[],deletedFeatures:B?B.map((({attributes:Z})=>({objectId:this.objectIdField&&Z[this.objectIdField],globalId:this.globalIdField&&Z[this.globalIdField]}))):[],updatedFeatures:D?D.map((({current:{attributes:Z}})=>({objectId:this.objectIdField&&Z[this.objectIdField],globalId:this.globalIdField&&Z[this.globalIdField]}))):[],editedFeatures:se(x.editedFeatures),exceededTransferLimit:!1,historicMoment:se(x.historicMoment)};return this.emit("edits",j),j}const C={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:[],deletedFeatures:[],updatedFeatures:[],editedFeatures:se(x.editedFeatures),exceededTransferLimit:!1,historicMoment:se(x.historicMoment)};return"historicMoment"in this&&this._shouldUpdateHistoricMoment(o,l,C.historicMoment)&&this.emit("edits",C),C})).then((x=>("historicMoment"in this&&this._shouldUpdateHistoricMoment(o,l,x.historicMoment)&&(this.historicMoment=x.historicMoment),x)));this.emit("apply-edits",{result:_})},this._updateMomentHandler=s=>{const{serviceUrl:o,gdbVersion:a,moment:l}=s,c=o===this.url,d=lE(this),f=lE(this)&&bC(o,a,this.gdbVersion),y=lE(this)&&!bC(o,this.gdbVersion,null);c&&d&&f&&y&&"historicMoment"in this&&this.historicMoment!==l&&(this.historicMoment=l)},this.when().then((()=>{this.addHandles(Oge(this._applyEditsHandler)),"historicMoment"in this&&this.addHandles(Fge(this._updateMomentHandler))}),(()=>{}))}_shouldUpdateHistoricMoment(n,s,o){return"historicMoment"in this&&this.historicMoment!==o&&BL(n,s)}},e=Nge,r);return u([h()],i.prototype,"lastEditsEventDate",void 0),i=u([V("esri.layers.mixins.EditBusLayer")],i),i};var a8;const T4=new Gt({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),E4=new Gt({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let qd=a8=class extends ve{constructor(t){super(t),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(t={}){const{where:e,geometry:i,spatialRelationship:r,timeExtent:n,objectIds:s,units:o,distance:a}=this;return new dt({geometry:se(i),objectIds:se(s),spatialRelationship:r,timeExtent:se(n),where:e,units:o,distance:a,...t})}clone(){const{where:t,geometry:e,spatialRelationship:i,timeExtent:r,objectIds:n,units:s,distance:o}=this;return new a8({geometry:se(e),objectIds:se(n),spatialRelationship:i,timeExtent:se(r),where:t,units:s,distance:o})}};u([h({type:String,json:{write:!0}})],qd.prototype,"where",void 0),u([h({types:R$,json:{write:!0}})],qd.prototype,"geometry",void 0),u([h({type:T4.apiValues,json:{name:"spatialRel",read:{reader:T4.read},write:{allowNull:!1,writer:T4.write,overridePolicy(){return{enabled:this.geometry!=null}}}}})],qd.prototype,"spatialRelationship",void 0),u([h({type:Number,json:{write:{overridePolicy(t){return{enabled:t!=null&&this.geometry!=null}}}}})],qd.prototype,"distance",void 0),u([h({type:[Number],json:{write:!0}})],qd.prototype,"objectIds",void 0),u([h({type:E4.apiValues,json:{read:E4.read,write:{writer:E4.write,overridePolicy(t){return{enabled:t!=null&&this.geometry!=null}}}}})],qd.prototype,"units",void 0),u([h({type:Hi,json:{write:!0}})],qd.prototype,"timeExtent",void 0),qd=a8=u([V("esri.layers.support.FeatureFilter")],qd);const L8e=qd;var l8;const Vte={read:{reader:cM},write:{writer:uM,overridePolicy(){return{allowNull:this.excludedEffect!=null,isRequired:this.excludedEffect==null}}}},jte={read:{reader:cM},write:{writer:uM,overridePolicy(){return{allowNull:this.includedEffect!=null,isRequired:this.includedEffect==null}}}},Ute={name:"showExcludedLabels",default:!0};let T0=l8=class extends ve{constructor(t){super(t),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}write(t,e){var r,n;const i=super.write(t,e);if(e!=null&&e.origin){if(i.filter){const s=Object.keys(i.filter);if(s.length>1||s[0]!=="where")return(r=e.messages)==null||r.push(new ie("web-document-write:unsupported-feature-effect","Invalid feature effect 'filter'. A filter can only contain a 'where' property",{layer:e.layer,effect:this})),null}if("showExcludedLabels"in i)return(n=e.messages)==null||n.push(new ie("web-document-write:unsupported-feature-effect","Invalid value for property 'excludedLabelsVisible' which should always be 'true'",{layer:e.layer,effect:this})),null}return i}clone(){return new l8({filter:this.filter!=null?this.filter.clone():null,includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};u([h({type:L8e,json:{write:{allowNull:!0,writer(t,e,i,r){const n=t==null?void 0:t.write({},r);n&&Object.keys(n).length!==0?xn(i,n,e):xn(i,null,e)}}}})],T0.prototype,"filter",void 0),u([h({json:{read:cM,write:{writer:uM,allowNull:!0},origins:{"web-map":Vte,"portal-item":Vte}}})],T0.prototype,"includedEffect",void 0),u([h({json:{read:cM,write:{writer:uM,allowNull:!0},origins:{"web-map":jte,"portal-item":jte}}})],T0.prototype,"excludedEffect",void 0),u([h({type:Boolean,json:{write:!0,name:"showExcludedLabels",origins:{"web-map":Ute,"portal-item":Ute}}})],T0.prototype,"excludedLabelsVisible",void 0),T0=l8=u([V("esri.layers.support.FeatureEffect")],T0);const Bte={write:{allowNull:!0}},R8e={type:T0,json:{origins:{"web-map":Bte,"portal-item":Bte}}},O8e=t=>{let e=class extends t{constructor(){super(...arguments),this.featureEffect=null}};return u([h(R8e)],e.prototype,"featureEffect",void 0),e=u([V("esri.layers.mixins.FeatureEffectLayer")],e),e};var c8;let mI=c8=class extends ve{constructor(t){super(t)}async collectRequiredFields(t,e){return io(t,e,this.expression)}clone(){return new c8({expression:this.expression,title:this.title})}equals(t){return this.expression===t.expression&&this.title===t.title}};u([h({type:String,json:{write:{isRequired:!0}}})],mI.prototype,"expression",void 0),u([h({type:String,json:{write:!0}})],mI.prototype,"title",void 0),mI=c8=u([V("esri.symbols.support.FeatureExpressionInfo")],mI);const Gte=mI,LN={unknown:1,inches:Ii(1,"meters","inches"),feet:Ii(1,"meters","feet"),"us-feet":Ii(1,"meters","us-feet"),yards:Ii(1,"meters","yards"),miles:Ii(1,"meters","miles"),"nautical-miles":Ii(1,"meters","nautical-miles"),millimeters:Ii(1,"meters","millimeters"),centimeters:Ii(1,"meters","centimeters"),decimeters:Ii(1,"meters","decimeters"),meters:Ii(1,"meters","meters"),kilometers:Ii(1,"meters","kilometers"),"decimal-degrees":1/OCe(1,"meters",tn.radius)};function X0t(t){return!!t&&LN[t]!=null}function K0t(t){return 1/(LN[t]||1)}function F8e(){const t=Object.keys(LN);return G7(t,"decimal-degrees"),t.sort(),t}const N8e=F8e();var u8;const FP=is()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),qte=new Gt({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});var xS;let of=(xS=class extends ve{constructor(e){super(e),this.featureExpressionInfo=void 0,this.offset=null}readFeatureExpressionInfo(e,i){return e!=null?e.expression?e:void 0:i.featureExpression&&i.featureExpression.value===0?{expression:"0"}:void 0}writeFeatureExpressionInfo(e,i,r,n){i[r]=e.write({},n),e.expression==="0"&&(i.featureExpression={value:0})}get mode(){const{offset:e,featureExpressionInfo:i}=this;return this._isOverridden("mode")?this._get("mode"):e!=null||i?"relative-to-ground":"on-the-ground"}set mode(e){this._override("mode",e)}set unit(e){this._set("unit",e)}write(e,i){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(e,i):null}clone(){return new u8({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}equals(e){return this.mode===e.mode&&this.offset===e.offset&&this.unit===e.unit&&X$e(this.featureExpressionInfo,e.featureExpressionInfo)}},u8=xS,xS);u([h({type:Gte,json:{write:!0}})],of.prototype,"featureExpressionInfo",void 0),u([De("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],of.prototype,"readFeatureExpressionInfo",null),u([Ve("featureExpressionInfo",{featureExpressionInfo:{type:Gte},"featureExpression.value":{type:[0]}})],of.prototype,"writeFeatureExpressionInfo",null),u([h({type:FP.apiValues,nonNullable:!0,json:{type:FP.jsonValues,read:FP.read,write:{writer:FP.write,isRequired:!0}}})],of.prototype,"mode",null),u([h({type:Number,json:{write:!0}})],of.prototype,"offset",void 0),u([h({type:N8e,json:{type:String,read:qte.read,write:qte.write}})],of.prototype,"unit",null),of=u8=u([V("esri.symbols.support.ElevationInfo")],of);let x1=class extends ve{constructor(e){super(e),this.description=null,this.label=null,this.type=null}};u([h({type:String,json:{write:!0}})],x1.prototype,"description",void 0),u([h({type:String,json:{write:!0}})],x1.prototype,"label",void 0),u([h()],x1.prototype,"type",void 0),x1=u([V("esri.tables.elements.AttributeTableElement")],x1);const q$=x1;let yI=class extends bt.ClonableMixin(q$){constructor(e){super(e),this.displayType="auto",this.type="attachment"}clone(){return super.clone()}};u([h({type:["auto"],json:{write:!0}})],yI.prototype,"displayType",void 0),u([h({type:["attachment"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],yI.prototype,"type",void 0),yI=u([V("esri.tables.elements.AttributeTableAttachmentElement")],yI);const Dge=yI;let E0=class extends bt.ClonableMixin(q$){constructor(e){super(e),this.description=null,this.fieldName=null,this.label=null,this.type="field"}clone(){return super.clone()}};u([h({type:String,json:{read:!1,write:!1}})],E0.prototype,"description",void 0),u([h({type:String,json:{write:{enabled:!0,isRequired:!0}}})],E0.prototype,"fieldName",void 0),u([h({type:String,json:{read:!1,write:!1}})],E0.prototype,"label",void 0),u([h({type:["field"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],E0.prototype,"type",void 0),E0=u([V("esri.tables.elements.AttributeTableFieldElement")],E0);const zge=E0;let gI=class extends bt.ClonableMixin(q$){constructor(e){super(e),this.relationshipId=null,this.type="relationship"}clone(){return super.clone()}};u([h({type:Number,json:{type:si,write:{enabled:!0,isRequired:!0}}})],gI.prototype,"relationshipId",void 0),u([h({type:["relationship"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],gI.prototype,"type",void 0),gI=u([V("esri.tables.elements.AttributeTableRelationshipElement")],gI);const Vge=gI,jge={base:q$,key:"type",typeMap:{attachment:Dge,field:zge,relationship:Vge}};function D8e(t){return{typesWithGroup:{base:q$,key:"type",typeMap:{attachment:Dge,field:zge,group:t,relationship:Vge}},typesWithoutGroup:jge}}let vI=class extends bt.ClonableMixin(q$){constructor(e){super(e),this.elements=null,this.type="group"}clone(){return super.clone()}};u([h({types:[jge],json:{name:"attributeTableElements",write:!0}})],vI.prototype,"elements",void 0),u([h({type:["group"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],vI.prototype,"type",void 0),vI=u([V("esri.tables.elements.AttributeTableGroupElement")],vI);const z8e=vI;let bI=class extends bt.ClonableMixin(ve){constructor(e){super(e),this.field=null,this.order=null}};u([h({type:String,json:{write:!0}})],bI.prototype,"field",void 0),u([h({type:["asc","desc"],json:{write:!0}})],bI.prototype,"order",void 0),bI=u([V("esri.tables.support.FieldOrder")],bI);const V8e=bI;var d8;const j8e=D8e(z8e);let wI=d8=class extends ve{constructor(t){super(t),this.elements=null,this.orderByFields=null}clone(){return new d8({elements:se(this.elements),orderByFields:se(this.orderByFields)})}};u([h({types:[j8e.typesWithGroup],json:{name:"attributeTableElements",write:!0}})],wI.prototype,"elements",void 0),u([h({type:[V8e],json:{write:!0}})],wI.prototype,"orderByFields",void 0),wI=d8=u([V("esri.tables.AttributeTableTemplate")],wI);const U8e=wI,B8e={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:{enabled:!0,layerContainerTypes:pr}}},RN={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(t,e)=>!e.disablePopup},write:{enabled:!0,writer(t,e,i){e[i]=!t}}}},ON={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:{enabled:!0,layerContainerTypes:pr}}},G8e={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:iw}}},q8e={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:{enabled:!0,layerContainerTypes:pr}}},H8e={value:null,type:of,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:{enabled:!0,layerContainerTypes:pr}}};function sbt(t){return{type:t,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const Uge={write:{enabled:!0,layerContainerTypes:pr},read:!0},h8={type:Number,json:{origins:{"web-document":Uge,"portal-item":{write:{layerContainerTypes:pr}}}}},W8e={...h8,json:{...h8.json,origins:{"web-document":{...Uge,write:{enabled:!0,layerContainerTypes:pr,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(t,e,i)=>{var r;return i&&i.origin!=="service"||!e.drawingInfo||e.drawingInfo.transparency===void 0?(r=e.layerDefinition)!=null&&r.drawingInfo&&e.layerDefinition.drawingInfo.transparency!==void 0?iM(e.layerDefinition.drawingInfo.transparency):void 0:iM(e.drawingInfo.transparency)}}}},obt={type:Qt,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(t,e)=>{const i=Qt.fromJSON(t);return e.spatialReference!=null&&typeof e.spatialReference=="object"&&(i.spatialReference=et.fromJSON(e.spatialReference)),i}}}},read:!1}},Z8e={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},J8e={type:Number,json:{origins:{service:{write:{enabled:!1}}},name:"layerDefinition.minScale",write:{layerContainerTypes:pr}}},Y8e={type:Number,json:{origins:{service:{write:{enabled:!1}}},name:"layerDefinition.maxScale",write:{layerContainerTypes:pr}}},Bge={json:{write:{ignoreOrigin:!0,layerContainerTypes:pr},origins:{"web-map":{read:!1,write:!1}}}},X8e={type:U8e,json:{name:"attributeTableInfo",write:!0}};let af=class extends bt.ClonableMixin(ve){constructor(e){super(e),this.creatorField=null,this.creationDateField=null,this.editorField=null,this.editDateField=null,this.realm=null,this.timeZone=null}};u([h()],af.prototype,"creatorField",void 0),u([h()],af.prototype,"creationDateField",void 0),u([h()],af.prototype,"editorField",void 0),u([h()],af.prototype,"editDateField",void 0),u([h()],af.prototype,"realm",void 0),u([h(oO("dateFieldsTimeReference",!0))],af.prototype,"timeZone",void 0),af=u([V("esri.layers.support.EditFieldsInfo")],af);let Qd=class extends bt.ClonableMixin(ve){constructor(e){super(e)}};u([h({constructOnly:!0,json:{write:!0}})],Qd.prototype,"name",void 0),u([h({constructOnly:!0,json:{write:!0}})],Qd.prototype,"fields",void 0),u([h({constructOnly:!0,json:{write:!0}})],Qd.prototype,"isAscending",void 0),u([h({constructOnly:!0,json:{write:!0}})],Qd.prototype,"indexType",void 0),u([h({constructOnly:!0,json:{write:!0}})],Qd.prototype,"isUnique",void 0),u([h({constructOnly:!0,json:{write:!0}})],Qd.prototype,"description",void 0),Qd=u([V("esri.layers.support.FeatureIndex")],Qd);async function aH(t,e,i){e=e.clone(),t.capabilities.query.supportsMaxRecordCountFactor&&(e.maxRecordCountFactor=Gge(t));const r=K8e(t),n=t.capabilities.query.supportsPagination;e.start=0,e.num=r;let s=null;for(;;){const o=await t.source.queryFeaturesJSON(e,i);if(s==null?s=o:s.features=s.features.concat(o.features),s.exceededTransferLimit=o.exceededTransferLimit,!n||!o.exceededTransferLimit)break;e.start+=r}return s}function K8e(t){return Gge(t)*Q8e(t)}function Q8e(t){return t.capabilities.query.maxRecordCount||2e3}function Gge(t){return t.capabilities.query.supportsMaxRecordCountFactor?dt.MAX_MAX_RECORD_COUNT_FACTOR:1}var p8;let _I=p8=class extends ve{constructor(t){super(t),this.minValue=0,this.maxValue=0}clone(){return new p8({minValue:this.minValue,maxValue:this.maxValue})}};u([h({type:Number,json:{write:!0}})],_I.prototype,"minValue",void 0),u([h({type:Number,json:{write:!0}})],_I.prototype,"maxValue",void 0),_I=p8=u([V("esri.renderers.support.AuthoringInfoClassBreakInfo")],_I);var f8;let Ny=f8=class extends ve{constructor(t){super(t),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=new Array}clone(){return new f8({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:se(this.classBreakInfos)})}};u([h({type:String,json:{write:!0}})],Ny.prototype,"field",void 0),u([h({type:String,json:{write:!0}})],Ny.prototype,"normalizationField",void 0),u([h({type:String,json:{write:!0}})],Ny.prototype,"label",void 0),u([h({type:[_I],json:{write:!0}})],Ny.prototype,"classBreakInfos",void 0),Ny=f8=u([V("esri.renderers.support.AuthoringInfoFieldInfo")],Ny);var m8;let S1=m8=class extends ve{constructor(t){super(t),this.label=null,this.size=null,this.value=null}clone(){return new m8({label:this.label,value:this.value,size:this.size})}};u([h({type:String,json:{write:!0}})],S1.prototype,"label",void 0),u([h({type:Number,json:{write:!0}})],S1.prototype,"size",void 0),u([h({type:Number,json:{write:!0}})],S1.prototype,"value",void 0),S1=m8=u([V("esri.renderers.support.AuthoringInfoSizeStop")],S1);const e9e=S1;var y8;const NP=new Gt({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),DP=new Gt({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),Hte={key:t=>typeof t=="number"?"number":"string",typeMap:{number:Number,string:String},base:null},Wte=["high-to-low","above-and-below","centered-on","extremes"],Zte=[...new Set(["high-to-low","above-and-below","centered-on","extremes","above","below","high-to-low","above-and-below","above","below","reference-size","spike"])],Jte=["seconds","minutes","hours","days","months","years"],t9e=["circle","diamond","hexagon-flat","hexagon-pointy","square"],i9e=["triangle-closed-outline","triangle-gradient-fill-closed","triangle-gradient-fill-closed-outline","triangle-gradient-fill-open","triangle-gradient-fill-open-outline","triangle-open-outline","triangle-solid-fill-closed","triangle-solid-fill-closed-outline","triangle-solid-fill-open","triangle-solid-fill-open-outline"];let os=y8=class extends ve{constructor(t){super(t),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(t){return typeof t=="string"||typeof t=="number"?t:null}get normalizationField(){return this.theme==="reference-size"||this.theme==="spike"?this._get("normalizationField"):null}set normalizationField(t){this._set("normalizationField",t)}get referenceSizeScale(){return this.theme==="reference-size"?this._get("referenceSizeScale"):null}set referenceSizeScale(t){this._set("referenceSizeScale",t)}get referenceSizeSymbolStyle(){return this.theme==="reference-size"?this._get("referenceSizeSymbolStyle"):null}set referenceSizeSymbolStyle(t){this._set("referenceSizeSymbolStyle",t)}get spikeSymbolStyle(){return this.theme==="spike"?this._get("spikeSymbolStyle"):null}set spikeSymbolStyle(t){this._set("spikeSymbolStyle",t)}castStartTime(t){return typeof t=="string"||typeof t=="number"?t:null}get sizeStops(){return this.theme==="reference-size"||this.theme==="spike"?this._get("sizeStops"):null}set sizeStops(t){this._set("sizeStops",t)}get style(){return this.type==="color"?this._get("style"):null}set style(t){this._set("style",t)}get theme(){return this.type==="color"||this.type==="size"?this._get("theme")||"high-to-low":null}set theme(t){this._set("theme",t)}clone(){return new y8({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,normalizationField:this.normalizationField,referenceSizeScale:this.referenceSizeScale,referenceSizeSymbolStyle:this.referenceSizeSymbolStyle,spikeSymbolStyle:this.spikeSymbolStyle,sizeStops:se(this.sizeStops),startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};u([h({types:Hte,json:{write:!0}})],os.prototype,"endTime",void 0),u([yi("endTime")],os.prototype,"castEndTime",null),u([h({type:String,json:{write:!0}})],os.prototype,"field",void 0),u([h({type:Number,json:{write:!0}})],os.prototype,"maxSliderValue",void 0),u([h({type:Number,json:{write:!0}})],os.prototype,"minSliderValue",void 0),u([h({type:String,json:{origins:{"web-scene":{write:!1}},write:!0}})],os.prototype,"normalizationField",null),u([h({type:Number,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],os.prototype,"referenceSizeScale",null),u([h({type:t9e,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],os.prototype,"referenceSizeSymbolStyle",null),u([h({type:i9e,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],os.prototype,"spikeSymbolStyle",null),u([h({types:Hte,json:{write:!0}})],os.prototype,"startTime",void 0),u([yi("startTime")],os.prototype,"castStartTime",null),u([h({type:[e9e],json:{origins:{"web-scene":{write:!1}},write:!0}})],os.prototype,"sizeStops",null),u([h({type:NP.apiValues,value:null,json:{type:NP.jsonValues,read:NP.read,write:NP.write}})],os.prototype,"style",null),u([h({type:Zte,value:null,json:{type:Zte,origins:{"web-scene":{type:Wte,write:{writer:(t,e)=>{Wte.includes(t)&&(e.theme=t)}}}},write:!0}})],os.prototype,"theme",null),u([h({type:DP.apiValues,json:{type:DP.jsonValues,read:DP.read,write:DP.write}})],os.prototype,"type",void 0),u([h({type:Jte,json:{type:Jte,write:!0}})],os.prototype,"units",void 0),os=y8=u([V("esri.renderers.support.AuthoringInfoVisualVariable")],os);const r9e=os;let Mx=class extends ve{constructor(e){super(e),this.type=null}};u([h({readOnly:!0,json:{read:!1,write:!0}})],Mx.prototype,"type",void 0),Mx=u([V("esri.rest.support.ColorRamp")],Mx);var g8;let If=g8=class extends Mx{constructor(t){super(t),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new g8({fromColor:se(this.fromColor),toColor:se(this.toColor),algorithm:this.algorithm})}};u([at({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],If.prototype,"algorithm",void 0),u([h({type:_e,json:{type:[si],write:!0}})],If.prototype,"fromColor",void 0),u([h({type:_e,json:{type:[si],write:!0}})],If.prototype,"toColor",void 0),u([h({type:["algorithmic"]})],If.prototype,"type",void 0),If=g8=u([V("esri.rest.support.AlgorithmicColorRamp")],If);var v8;let nx=v8=class extends Mx{constructor(t){super(t),this.colorRamps=null,this.type="multipart"}clone(){return new v8({colorRamps:se(this.colorRamps)})}};u([h({type:[If],json:{write:!0}})],nx.prototype,"colorRamps",void 0),u([h({type:["multipart"]})],nx.prototype,"type",void 0),nx=v8=u([V("esri.rest.support.MultipartColorRamp")],nx);const n9e={key:"type",base:Mx,typeMap:{algorithmic:If,multipart:nx}};function s9e(t){return t!=null&&t.type?t.type==="algorithmic"?If.fromJSON(t):t.type==="multipart"?nx.fromJSON(t):null:null}var b8;const Wv=new Gt({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),zP=new Gt({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),Yte=new Gt({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),Xte=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers"],o9e=["high-to-low","above-and-below","above","below"],a9e=["flow-line","wave-front"],l9e=["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"];let Lr=b8=class extends ve{constructor(t){super(t),this.colorRamp=null,this.fadeRatio=null,this.isAutoGenerated=!1,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const t=this._get("classificationMethod"),e=this.type;return e&&e!=="relationship"?e==="class-breaks-size"||e==="class-breaks-color"?t||"manual":null:t}set classificationMethod(t){this._set("classificationMethod",t)}readColorRamp(t){return t?s9e(t):void 0}get fields(){return this.type&&this.type!=="predominance"?null:this._get("fields")}set fields(t){this._set("fields",t)}get field1(){return this.type&&this.type!=="relationship"?null:this._get("field1")}set field1(t){this._set("field1",t)}get field2(){return this.type&&this.type!=="relationship"?null:this._get("field2")}set field2(t){this._set("field2",t)}get flowTheme(){return this.type==="flow"?this._get("flowTheme"):null}set flowTheme(t){this._set("flowTheme",t)}get focus(){return this.type&&this.type!=="relationship"?null:this._get("focus")}set focus(t){this._set("focus",t)}get numClasses(){return this.type&&this.type!=="relationship"?null:this._get("numClasses")}set numClasses(t){this._set("numClasses",t)}get statistics(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("statistics"):null}set statistics(t){this._set("statistics",t)}get standardDeviationInterval(){const t=this.type;return t&&t!=="relationship"&&t!=="class-breaks-size"&&t!=="class-breaks-color"||this.classificationMethod&&this.classificationMethod!=="standard-deviation"?null:this._get("standardDeviationInterval")}set standardDeviationInterval(t){this._set("standardDeviationInterval",t)}get type(){return this._get("type")}set type(t){let e=t;t==="classed-size"?e="class-breaks-size":t==="classed-color"&&(e="class-breaks-color"),this._set("type",e)}get univariateSymbolStyle(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(t){this._set("univariateSymbolStyle",t)}get univariateTheme(){return this.type==="univariate-color-size"?this._get("univariateTheme"):null}set univariateTheme(t){this._set("univariateTheme",t)}clone(){var t;return new b8({classificationMethod:this.classificationMethod,colorRamp:se(this.colorRamp),fadeRatio:se(this.fadeRatio),fields:(t=this.fields)==null?void 0:t.slice(),field1:se(this.field1),field2:se(this.field2),isAutoGenerated:this.isAutoGenerated,focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map((e=>e.clone())),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}};u([h({type:Wv.apiValues,value:null,json:{type:Wv.jsonValues,read:Wv.read,write:Wv.write,origins:{"web-document":{default:"manual",type:Wv.jsonValues,read:Wv.read,write:Wv.write}}}})],Lr.prototype,"classificationMethod",null),u([h({types:n9e,json:{write:!0}})],Lr.prototype,"colorRamp",void 0),u([De("colorRamp")],Lr.prototype,"readColorRamp",null),u([h({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Lr.prototype,"fadeRatio",void 0),u([h({type:[String],value:null,json:{write:!0}})],Lr.prototype,"fields",null),u([h({type:Ny,value:null,json:{write:!0}})],Lr.prototype,"field1",null),u([h({type:Ny,value:null,json:{write:!0}})],Lr.prototype,"field2",null),u([h({type:a9e,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Lr.prototype,"flowTheme",null),u([h({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],Lr.prototype,"focus",null),u([h({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],Lr.prototype,"isAutoGenerated",void 0),u([h({type:Number,value:null,json:{type:si,write:!0}})],Lr.prototype,"numClasses",null),u([h({type:Xte,json:{type:Xte,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],Lr.prototype,"lengthUnit",void 0),u([h({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Lr.prototype,"maxSliderValue",void 0),u([h({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Lr.prototype,"minSliderValue",void 0),u([h({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Lr.prototype,"statistics",null),u([h({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],Lr.prototype,"standardDeviationInterval",null),u([h({type:zP.apiValues,value:null,json:{type:zP.jsonValues,read:zP.read,write:zP.write,origins:{"web-scene":{type:Yte.jsonValues,write:{writer:Yte.write,overridePolicy:t=>({enabled:t!=="flow"})}}}}})],Lr.prototype,"type",null),u([h({type:[r9e],json:{write:!0}})],Lr.prototype,"visualVariables",void 0),u([h({type:l9e,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Lr.prototype,"univariateSymbolStyle",null),u([h({type:o9e,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Lr.prototype,"univariateTheme",null),Lr=b8=u([V("esri.renderers.support.AuthoringInfo")],Lr);const I4=new Gt({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary",pieChart:"pie-chart"},{ignoreUnknown:!0});let Ll=class extends ve{constructor(e){super(e),this.authoringInfo=null,this.type=null}async getRequiredFields(e){if(!this.collectRequiredFields)return[];const i=new Set;return await this.collectRequiredFields(i,e),Array.from(i).sort()}getSymbol(e,i){}async getSymbolAsync(e,i){}get symbols(){return[]}get arcadeRequired(){return!1}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};u([h({type:Lr,json:{write:!0}})],Ll.prototype,"authoringInfo",void 0),u([h({type:I4.apiValues,readOnly:!0,json:{type:I4.jsonValues,read:!1,write:{writer:I4.write,ignoreOrigin:!0,isRequired:!0}}})],Ll.prototype,"type",void 0),Ll=u([V("esri.renderers.Renderer")],Ll);let xI=class extends bt.ClonableMixin(ve){constructor(){super(...arguments),this.showLegend=null,this.title=null}};u([h({type:Boolean,json:{write:!0}})],xI.prototype,"showLegend",void 0),u([h({type:String,json:{write:!0}})],xI.prototype,"title",void 0),xI=u([V("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],xI);const qge=xI,C4=new Gt({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let vo=class extends ve{constructor(e){super(e),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(e){return e==null?e:typeof e=="function"?(Ie.getLogger(this).error(".field: field must be a string value"),null):l2(e)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};u([h()],vo.prototype,"index",void 0),u([h({type:C4.apiValues,readOnly:!0,json:{read:C4.read,write:{writer:C4.write,isRequired:!0}}})],vo.prototype,"type",void 0),u([h({type:String,json:{write:!0}})],vo.prototype,"field",void 0),u([yi("field")],vo.prototype,"castField",null),u([h({type:String,json:{write:!0}})],vo.prototype,"valueExpression",void 0),u([h({type:String,json:{write:!0}})],vo.prototype,"valueExpressionTitle",void 0),u([h({readOnly:!0})],vo.prototype,"arcadeRequired",null),u([h({type:qge,json:{write:!0}})],vo.prototype,"legendOptions",void 0),vo=u([V("esri.renderers.visualVariables.VisualVariable")],vo);var w8;let I0=w8=class extends ve{constructor(t){super(t),this.color=null,this.label=null,this.value=null}writeValue(t,e,i){e[i]=t??0}clone(){return new w8({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};u([h({type:_e,json:{type:[si],write:{isRequired:!0}}})],I0.prototype,"color",void 0),u([h({type:String,json:{write:!0}})],I0.prototype,"label",void 0),u([h({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],I0.prototype,"value",void 0),u([Ve("value")],I0.prototype,"writeValue",null),I0=w8=u([V("esri.renderers.visualVariables.support.ColorStop")],I0);const c9e=I0;var _8;let Dy=_8=class extends vo{constructor(t){super(t),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(t){t&&Array.isArray(t)&&(t=t.filter((e=>!!e))).sort(((e,i)=>e.value-i.value)),this._set("stops",t)}clone(){var t;return new _8({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map((e=>e.clone())),legendOptions:(t=this.legendOptions)==null?void 0:t.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map((t=>t.value||0))}};u([h({readOnly:!0})],Dy.prototype,"cache",null),u([h({type:["color"],json:{type:["colorInfo"]}})],Dy.prototype,"type",void 0),u([h({type:String,json:{write:!0}})],Dy.prototype,"normalizationField",void 0),u([h({type:[c9e],json:{write:!0}})],Dy.prototype,"stops",null),Dy=_8=u([V("esri.renderers.visualVariables.ColorVariable")],Dy);var x8;let wy=x8=class extends ve{constructor(t){super(t),this.label=null,this.opacity=null,this.value=null}readOpacity(t,e){return iM(e.transparency)}writeOpacity(t,e,i){e[i]=dN(t)}clone(){return new x8({label:this.label,opacity:this.opacity,value:this.value})}};u([h({type:String,json:{write:!0}})],wy.prototype,"label",void 0),u([h({type:Number,json:{type:si,write:{target:"transparency",isRequired:!0}}})],wy.prototype,"opacity",void 0),u([De("opacity",["transparency"])],wy.prototype,"readOpacity",null),u([Ve("opacity")],wy.prototype,"writeOpacity",null),u([h({type:Number,json:{write:{isRequired:!0}}})],wy.prototype,"value",void 0),wy=x8=u([V("esri.renderers.visualVariables.support.OpacityStop")],wy);const u9e=wy;var S8;let Cf=S8=class extends vo{constructor(t){super(t),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(t){t&&Array.isArray(t)&&(t=t.filter((e=>!!e))).sort(((e,i)=>e.value-i.value)),this._set("stops",t)}clone(){var t;return new S8({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map((e=>e.clone())),legendOptions:(t=this.legendOptions)==null?void 0:t.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map((t=>t.value||0))}};u([h({readOnly:!0})],Cf.prototype,"cache",null),u([h({type:["opacity"],json:{type:["transparencyInfo"]}})],Cf.prototype,"type",void 0),u([h({type:String,json:{write:!0}})],Cf.prototype,"normalizationField",void 0),u([h({type:[u9e],json:{write:!0}})],Cf.prototype,"stops",null),Cf=S8=u([V("esri.renderers.visualVariables.OpacityVariable")],Cf);var $8;let zy=$8=class extends vo{constructor(t){super(t),this.axis=null,this.type="rotation",this.rotationType="geographic"}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}clone(){var t;return new $8({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:(t=this.legendOptions)==null?void 0:t.clone()})}};u([h({readOnly:!0})],zy.prototype,"cache",null),u([h({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],zy.prototype,"axis",void 0),u([h({type:["rotation"],json:{type:["rotationInfo"]}})],zy.prototype,"type",void 0),u([h({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],zy.prototype,"rotationType",void 0),zy=$8=u([V("esri.renderers.visualVariables.RotationVariable")],zy);function d9e(t){return Ti(t)}var T8;let Ru=T8=class extends ve{constructor(t){super(t),this.label=null,this.size=null,this.value=null,this.useMinValue=null,this.useMaxValue=null}clone(){return new T8({label:this.label,size:this.size,value:this.value,useMaxValue:this.useMaxValue,useMinValue:this.useMinValue})}};u([h({type:String,json:{write:!0}})],Ru.prototype,"label",void 0),u([h({type:Number,cast:Ti,json:{write:{isRequired:!0}}})],Ru.prototype,"size",void 0),u([h({type:Number,json:{write:{isRequired:!0}}})],Ru.prototype,"value",void 0),u([h({type:Boolean,json:{write:!1}})],Ru.prototype,"useMinValue",void 0),u([h({type:Boolean,json:{write:!1}})],Ru.prototype,"useMaxValue",void 0),Ru=T8=u([V("esri.renderers.visualVariables.support.SizeStop")],Ru);let GL=class extends qge{constructor(){super(...arguments),this.customValues=null}};u([h({type:[Number],json:{write:!0}})],GL.prototype,"customValues",void 0),GL=u([V("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],GL);const Hge=GL;var em,ds;function sx(t){return t&&t.declaredClass==="esri.renderers.visualVariables.SizeVariable"}function pw(t){return t!=null&&!isNaN(t)&&isFinite(t)}function Wge(t){return t.valueExpression?em.Expression:t.field&&typeof t.field=="string"?em.Field:em.Unknown}function h9e(t,e){const i=e||Wge(t),r=t.valueUnit||"unknown";return i===em.Unknown?ds.Constant:t.stops?ds.Stops:t.minSize!=null&&t.maxSize!=null&&t.minDataValue!=null&&t.maxDataValue!=null?ds.ClampedLinear:r==="unknown"?t.minSize!=null&&t.minDataValue!=null?t.minSize&&t.minDataValue?ds.Proportional:ds.Additive:ds.Identity:ds.RealWorldSize}(function(t){t.Unknown="unknown",t.Expression="expression",t.Field="field"})(em||(em={})),(function(t){t.Unknown="unknown",t.Stops="stops",t.ClampedLinear="clamped-linear",t.Proportional="proportional",t.Additive="additive",t.Constant="constant",t.Identity="identity",t.RealWorldSize="real-world-size"})(ds||(ds={}));const Zge=()=>Ie.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),FN=t=>Zge().warn(`The visualVariable should be an instance of esri.renderers.visualVariables.${t}`),NN=()=>Zge().error("Use of arcade expressions requires an arcade context"),Kte=new qi,qL=Math.PI,Jge=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function Yge(t,e,i){const r="visualVariables"in t&&t.visualVariables?t.visualVariables.find((b=>b.type==="color")):t;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.ColorVariable")return void FN("ColorVariable");const n=typeof e=="number",s=n?null:e,o=s==null?void 0:s.attributes;let a=n?e:null;const l=r.field,{ipData:c,hasExpression:d}=r.cache;let f=r.cache.compiledFunc;if(!l&&!d){const b=r.stops;return b&&b[0]&&b[0].color}if(typeof a!="number")if(d){if((i==null?void 0:i.arcade)==null)return void NN();const b={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},_=i.arcade.arcadeUtils,x=_.getViewInfo(b),E=_.createExecContext(s,x,i.timeZone);if(!f){const C=_.createSyntaxTree(r.valueExpression);f=_.createFunction(C),r.cache.compiledFunc=f}a=_.executeFunction(f,E)}else o&&(a=o[l]);const y=r.normalizationField,g=o!=null&&y!=null?parseFloat(o[y]):void 0;if(a!=null&&(!y||n||!isNaN(g)&&g!==0)){pw(g)&&!n&&(a/=g);const b=lH(a,c);if(b){const _=b[0],x=b[1],E=_===x?r.stops[_].color:_e.blendColors(r.stops[_].color,r.stops[x].color,b[2],i!=null?i.color:void 0);return new _e(E)}}}function Xge(t,e,i){const r="visualVariables"in t&&t.visualVariables?t.visualVariables.find((b=>b.type==="opacity")):t;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.OpacityVariable")return void FN("OpacityVariable");const n=typeof e=="number",s=n?null:e,o=s==null?void 0:s.attributes;let a=n?e:null;const l=r.field,{ipData:c,hasExpression:d}=r.cache;let f=r.cache.compiledFunc;if(!l&&!d){const b=r.stops;return b&&b[0]&&b[0].opacity}if(typeof a!="number")if(d){if((i==null?void 0:i.arcade)==null)return void NN();const b={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},_=i.arcade.arcadeUtils,x=_.getViewInfo(b),E=_.createExecContext(s,x,i.timeZone);if(!f){const C=_.createSyntaxTree(r.valueExpression);f=_.createFunction(C),r.cache.compiledFunc=f}a=_.executeFunction(f,E)}else o&&(a=o[l]);const y=r.normalizationField,g=o!=null&&y!=null?parseFloat(o[y]):void 0;if(a!=null&&(!y||n||!isNaN(g)&&g!==0)){pw(g)&&!n&&(a/=g);const b=lH(a,c);if(b){const _=b[0],x=b[1];if(_===x)return r.stops[_].opacity;{const E=r.stops[_].opacity;return E+(r.stops[x].opacity-E)*b[2]}}}}function Kge(t,e,i){const r="visualVariables"in t&&t.visualVariables?t.visualVariables.find((g=>g.type==="rotation")):t;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.RotationVariable")return void FN("RotationVariable");const n=r.axis||"heading",s=n==="heading"&&r.rotationType==="arithmetic"?90:0,o=n==="heading"&&r.rotationType==="arithmetic"?-1:1,a=typeof e=="number"?null:e,l=a==null?void 0:a.attributes,c=r.field,{hasExpression:d}=r.cache;let f=r.cache.compiledFunc,y=null;if(!c&&!d)return y;if(d){if((i==null?void 0:i.arcade)==null)return void NN();const g={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},b=i.arcade.arcadeUtils,_=b.getViewInfo(g),x=b.createExecContext(a,_,i.timeZone);if(!f){const E=b.createSyntaxTree(r.valueExpression);f=b.createFunction(E),r.cache.compiledFunc=f}y=b.executeFunction(f,x)}else l&&(y=l[c]);return y=typeof y!="number"||isNaN(y)?null:s+o*y,y}function p9e(t,e,i){const r=typeof e=="number",n=r?null:e,s=n==null?void 0:n.attributes;let o=r?e:null;const{isScaleDriven:a}=t.cache;let l=t.cache.compiledFunc;if(a){const d=i!=null?i.scale:void 0,f=i!=null?i.view:void 0;o=d==null||f==="3d"?f9e(t):d}else if(!r)switch(t.inputValueType){case em.Expression:{if((i==null?void 0:i.arcade)==null)return void NN();const d={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},f=i.arcade.arcadeUtils,y=f.getViewInfo(d),g=f.createExecContext(n,y,i.timeZone);if(!l){const b=f.createSyntaxTree(t.valueExpression);l=f.createFunction(b),t.cache.compiledFunc=l}o=f.executeFunction(l,g);break}case em.Field:s&&(o=s[t.field]);break;case em.Unknown:o=null}if(!pw(o))return null;if(r||!t.normalizationField)return o;const c=s?parseFloat(s[t.normalizationField]):null;return pw(c)&&c!==0?o/c:null}function f9e(t){let e=null,i=null;const r=t.stops;return r?(e=r[0].value,i=r[r.length-1].value):(e=t.minDataValue||0,i=t.maxDataValue||0),(e+i)/2}function DN(t,e,i){const r="visualVariables"in t&&t.visualVariables?t.visualVariables.find((s=>s.type==="size")):t;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.SizeVariable")return void FN("SizeVariable");const n=eve(p9e(r,e,i),r,e,i,r.cache.ipData);return n==null||isNaN(n)?void 0:n}function Za(t,e,i){return t==null?null:sx(t)?DN(t,e,i):pw(t)?t:null}function Qge(t,e,i){return pw(i)&&t>i?i:pw(e)&&t<e?e:t}function m9e(t,e,i,r){const n=Za(e.minSize,i,r)||e.minDataValue;return t==null&&n==null?null:(t??0)+(n??0)}function y9e(t,e,i){const r=t.stops;let n=(r==null?void 0:r.length)&&r[0].size;return n==null&&(n=t.minSize),Za(n,e,i)}function g9e(t,e,i,r){const n=Za(e.minSize,i,r);if(t==null)return n;const{minDataValue:s,maxDataValue:o}=e;if(s==null||o==null)return null;const a=(t-s)/(o-s),l=Za(e.maxSize,i,r),c=r!=null?r.shape:void 0;if(t<=s)return n;if(t>=o)return l;if(n==null||l==null)return null;if(e.scaleBy==="area"&&c){const d=c==="circle",f=d?qL*(n/2)**2:n*n,y=f+a*((d?qL*(l/2)**2:l*l)-f);return d?2*Math.sqrt(y/qL):Math.sqrt(y)}return n+a*(l-n)}function v9e(t,e,i,r){const n=Za(e.minSize,i,r);if(t==null||n==null)return n;const s=r!=null?r.shape:void 0,{minDataValue:o}=e;if(o==null)return null;const a=t/o,l=Za(e.maxSize,i,r);let c=null;return c=s==="circle"?2*Math.sqrt(a*(n/2)**2):s==="square"||s==="diamond"||s==="image"?Math.sqrt(a*n**2):a*n,Qge(c,n,l)}function b9e(t,e,i,r,n){var l,c,d;if(t==null)return null;const[s,o,a]=lH(t,n);if(s===o)return Za((l=e.stops)==null?void 0:l[s].size,i,r);{const f=Za((c=e.stops)==null?void 0:c[s].size,i,r),y=Za((d=e.stops)==null?void 0:d[o].size,i,r);return f==null||y==null?null:f+(y-f)*a}}function w9e(t,e,i,r){const n=((r==null?void 0:r.resolution)??1)*LN[e.valueUnit],s=Za(e.minSize,i,r),o=Za(e.maxSize,i,r),{valueRepresentation:a}=e;if(t==null)return s;let l=null;return l=a==="area"?2*Math.sqrt(t/qL)/n:a==="radius"||a==="distance"?2*t/n:t/n,Qge(l,s,o)}function eve(t,e,i,r,n){switch(e.transformationType){case ds.Additive:return m9e(t,e,i,r);case ds.Constant:return y9e(e,i,r);case ds.ClampedLinear:return g9e(t,e,i,r);case ds.Proportional:return v9e(t,e,i,r);case ds.Stops:return b9e(t,e,i,r,n);case ds.RealWorldSize:return w9e(t,e,i,r);case ds.Identity:return t;case ds.Unknown:return null}}function _9e(t,e,i){const{isScaleDriven:r}=t.cache;if(!(r&&i==="3d"||e))return null;const n={scale:e,view:i};let s=Za(t.minSize,Kte,n),o=Za(t.maxSize,Kte,n);if(s!=null||o!=null){if(s>o){const a=o;o=s,s=a}return{minSize:s,maxSize:o}}}function x9e(t,e,i){if(!t.visualVariables)return;const r=[],n=[],s=[],o=[],a=[];for(const l of t.visualVariables)switch(l.type){case"color":n.push(l);break;case"opacity":s.push(l);break;case"rotation":a.push(l);break;case"size":o.push(l)}return n.forEach((l=>{const c=Yge(l,e,i);r.push({variable:l,value:c})})),s.forEach((l=>{const c=Xge(l,e,i);r.push({variable:l,value:c})})),a.forEach((l=>{const c=Kge(l,e,i);r.push({variable:l,value:c})})),o.forEach((l=>{const c=DN(l,e,i);r.push({variable:l,value:c})})),r}function lH(t,e){if(!e)return;let i=0,r=e.length-1;return e.some(((n,s)=>t<n?(r=s,!0):(i=s,!1))),[i,r,(t-e[i])/(e[r]-e[i])]}function S9e(t,e,i){const r=["proportional","proportional","proportional"];for(const n of t){const s=n.useSymbolValue?"symbol-value":DN(n,e,i)??"proportional";switch(n.axis){case"width":r[0]=s;break;case"depth":r[1]=s;break;case"height":r[2]=s;break;case"width-and-depth":r[0]=s,r[1]=s;break;case"all":case void 0:case null:r[0]=s,r[1]=s,r[2]=s;break;default:n.axis}}return r}const Sw=Object.freeze(Object.defineProperty({__proto__:null,getAllSizes:S9e,getColor:Yge,getOpacity:Xge,getRotationAngle:Kge,getSize:DN,getSizeForValue:eve,getSizeFromNumberOrVariable:Za,getSizeRangeAtScale:_9e,getVisualVariableValues:x9e,viewScaleRE:Jge},Symbol.toStringTag,{value:"Module"}));var E8;const VP=new Gt({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),I8=new Gt({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers"});function Qte(t){if(t!=null)return typeof t=="string"||typeof t=="number"?d9e(t):t.type==="size"?sx(t)?t:(delete(t={...t}).type,new $i(t)):void 0}function eie(t,e,i){if(typeof t!="object")return t;const r=new $i;return r.read(t,i),r}let $i=E8=class extends vo{constructor(t){super(t),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:this.valueExpression!=null&&Jge.test(this.valueExpression)}}set index(t){sx(this.maxSize)&&(this.maxSize.index=`visualVariables[${t}].maxSize`),sx(this.minSize)&&(this.minSize.index=`visualVariables[${t}].minSize`),this._set("index",t)}get inputValueType(){return Wge(this)}set maxDataValue(t){t&&this.stops&&(Ie.getLogger(this).warn("cannot set maxDataValue when stops is not null."),t=null),this._set("maxDataValue",t)}set maxSize(t){t&&this.stops&&(Ie.getLogger(this).warn("cannot set maxSize when stops is not null."),t=null),this._set("maxSize",t)}castMaxSize(t){return Qte(t)}readMaxSize(t,e,i){return eie(t,e,i)}set minDataValue(t){t&&this.stops&&(Ie.getLogger(this).warn("cannot set minDataValue when stops is not null."),t=null),this._set("minDataValue",t)}set minSize(t){t&&this.stops&&(Ie.getLogger(this).warn("cannot set minSize when stops is not null."),t=null),this._set("minSize",t)}castMinSize(t){return Qte(t)}readMinSize(t,e,i){return eie(t,e,i)}get arcadeRequired(){return!!this.valueExpression||this.minSize!=null&&typeof this.minSize=="object"&&this.minSize.arcadeRequired||this.maxSize!=null&&typeof this.maxSize=="object"&&this.maxSize.arcadeRequired}set stops(t){this.minDataValue==null&&this.maxDataValue==null&&this.minSize==null&&this.maxSize==null?t&&Array.isArray(t)&&(t=t.filter((e=>!!e))).sort(((e,i)=>e.value-i.value)):t&&(Ie.getLogger(this).warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),t=null),this._set("stops",t)}get transformationType(){return h9e(this,this.inputValueType)}readValueExpression(t,e){return t||e.expression&&"$view.scale"}writeValueExpressionWebScene(t,e,i,r){if(t==="$view.scale"){if(r!=null&&r.messages){const n=this.index,s=typeof n=="string"?n:`visualVariables[${n}]`;r.messages.push(new ie("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:s+".valueExpression",context:r}))}}else e[i]=t}readValueUnit(t){return t?I8.read(t):null}clone(){var t,e;return new E8({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:sx(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:sx(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:(t=this.stops)==null?void 0:t.map((i=>i.clone())),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:(e=this.legendOptions)==null?void 0:e.clone()})}flipSizes(){if(this.transformationType===ds.ClampedLinear){const{minSize:t,maxSize:e}=this;return this.minSize=e,this.maxSize=t,this}if(this.transformationType===ds.Stops){const t=this.stops;if(!t)return this;const e=t.map((r=>r.size)).reverse(),i=t.length;for(let r=0;r<i;r++)t[r].size=e[r];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){var t;return(t=this.stops)==null?void 0:t.map((e=>e.value||0))}};u([h({readOnly:!0})],$i.prototype,"cache",null),u([h({type:VP.apiValues,json:{type:VP.jsonValues,origins:{"web-map":{read:!1}},read:VP.read,write:VP.write}})],$i.prototype,"axis",void 0),u([h()],$i.prototype,"index",null),u([h({type:String,readOnly:!0})],$i.prototype,"inputValueType",null),u([h({type:Hge,json:{write:!0}})],$i.prototype,"legendOptions",void 0),u([h({type:Number,value:null,json:{write:!0}})],$i.prototype,"maxDataValue",null),u([h({type:Number,value:null,json:{write:!0}})],$i.prototype,"maxSize",null),u([yi("maxSize")],$i.prototype,"castMaxSize",null),u([De("maxSize")],$i.prototype,"readMaxSize",null),u([h({type:Number,value:null,json:{write:!0}})],$i.prototype,"minDataValue",null),u([h({type:Number,value:null,json:{write:!0}})],$i.prototype,"minSize",null),u([yi("minSize")],$i.prototype,"castMinSize",null),u([De("minSize")],$i.prototype,"readMinSize",null),u([h({type:String,json:{write:!0}})],$i.prototype,"normalizationField",void 0),u([h({readOnly:!0})],$i.prototype,"arcadeRequired",null),u([h({type:String})],$i.prototype,"scaleBy",void 0),u([h({type:[Ru],value:null,json:{write:!0}})],$i.prototype,"stops",null),u([h({type:["outline"],json:{write:!0}})],$i.prototype,"target",void 0),u([h({type:String,readOnly:!0})],$i.prototype,"transformationType",null),u([h({type:["size"],json:{type:["sizeInfo"]}})],$i.prototype,"type",void 0),u([h({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],$i.prototype,"useSymbolValue",void 0),u([h({type:String,json:{write:!0}})],$i.prototype,"valueExpression",void 0),u([De("valueExpression",["valueExpression","expression"])],$i.prototype,"readValueExpression",null),u([Ve("web-scene","valueExpression")],$i.prototype,"writeValueExpressionWebScene",null),u([h({type:["radius","diameter","area","width","distance"],json:{write:!0}})],$i.prototype,"valueRepresentation",void 0),u([h({type:I8.apiValues,json:{write:I8.write,origins:{"web-map":{read:!1},"web-scene":{write:!0},"portal-item":{write:!0}}}})],$i.prototype,"valueUnit",void 0),u([De("valueUnit")],$i.prototype,"readValueUnit",null),$i=E8=u([V("esri.renderers.visualVariables.SizeVariable")],$i);const $9e={color:Dy,size:$i,opacity:Cf,rotation:zy},T9e=new Gt({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),E9e=/^\[([^\]]+)\]$/i;let HL=class extends tt{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(e){if(this._resetVariables(),e=e==null?void 0:e.filter((i=>!!i)),e==null?void 0:e.length){for(const i of e)switch(i.type){case"color":this.colorVariables.push(i);break;case"opacity":this.opacityVariables.push(i);break;case"rotation":this.rotationVariables.push(i);break;case"size":this.sizeVariables.push(i)}this.sizeVariables.length&&this.sizeVariables.some((i=>!!i.target))&&e.sort(((i,r)=>{let n=null;return n=i.target===r.target?0:i.target?1:-1,n}));for(let i=0;i<e.length;i++)e[i].index=i;this._set("visualVariables",e)}else this._set("visualVariables",e)}readVariables(e,i,r){const{rotationExpression:n,rotationType:s}=i,o=n==null?void 0:n.match(E9e),a=o==null?void 0:o[1];if(a&&(e||(e=[]),e.push({type:"rotationInfo",rotationType:s,field:a})),e)return e.map((l=>{const c=T9e.read(l.type),d=$9e[c];d||(Ie.getLogger(this).warn(`Unknown variable type: ${c}`),r!=null&&r.messages&&r.messages.push(new Dl("visual-variable:unsupported",`visualVariable of type '${c}' is not supported`,{definition:l,context:r})));const f=new d;return f.read(l,r),f}))}writeVariables(e,i){const r=[];for(const n of e){const s=n.toJSON(i);s&&r.push(s)}return r}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};u([h()],HL.prototype,"visualVariables",null),HL=u([V("esri.renderers.visualVariables.VisualVariableFactory")],HL);const I9e={base:vo,key:"type",typeMap:{opacity:Cf,color:Dy,rotation:zy,size:$i}},H$=t=>{let e=class extends t{constructor(){super(...arguments),this._vvFactory=new HL}set visualVariables(i){this._vvFactory.visualVariables=i,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(i,r,n){return this._vvFactory.readVariables(i,r,n)}writeVisualVariables(i,r,n,s){r[n]=this._vvFactory.writeVariables(i,s)}get arcadeRequiredForVisualVariables(){var i;return((i=this.visualVariables)==null?void 0:i.some((({arcadeRequired:r})=>r)))??!1}hasVisualVariables(i,r){return i?this.getVisualVariablesForType(i,r).length>0:this.getVisualVariablesForType("size",r).length>0||this.getVisualVariablesForType("color",r).length>0||this.getVisualVariablesForType("opacity",r).length>0||this.getVisualVariablesForType("rotation",r).length>0}getVisualVariablesForType(i,r){var n;return((n=this.visualVariables)==null?void 0:n.filter((s=>s.type===i&&(typeof r=="string"?s.target===r:r!==!1||!s.target))))??[]}async collectVVRequiredFields(i,r){let n=[];this.visualVariables&&(n=n.concat(this.visualVariables));for(const s of n)s&&(s.field&&ca(i,r,s.field),s.normalizationField&&ca(i,r,s.normalizationField),s.valueExpression&&(C9e(s.valueExpression,i,r)||await io(i,r,s.valueExpression)))}};return u([h({types:[I9e],value:null,json:{write:!0}})],e.prototype,"visualVariables",null),u([De("visualVariables",["visualVariables","rotationType","rotationExpression"])],e.prototype,"readVisualVariables",null),u([Ve("visualVariables")],e.prototype,"writeVisualVariables",null),e=u([V("esri.renderers.mixins.VisualVariablesMixin")],e),e};function C9e(t,e,i){const r=X3e(t);return r!=null&&(ca(e,i,r),!0)}const cH=[252,146,31,255],M9e=[153,153,153,255],k9e={type:"esriSMS",style:"esriSMSCircle",size:6,color:cH,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},P9e={type:"esriSLS",style:"esriSLSSolid",width:.75,color:cH},A9e={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},L9e={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},R9e={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},O9e={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},F9e={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null},WO=Fr.fromJSON(k9e),zN=Xr.fromJSON(P9e),tve=So.fromJSON(A9e),N9e=Tt.fromJSON(L9e);function mbt(t){if(t==null)return null;switch(t.type){case"mesh":return null;case"point":case"multipoint":return WO;case"polyline":return zN;case"polygon":case"extent":return tve}return null}const ybt=Fr.fromJSON(R9e),gbt=Xr.fromJSON(O9e),vbt=So.fromJSON(F9e),D9e=sa.fromSimpleMarkerSymbol(WO),z9e=Bu.fromSimpleLineSymbol(zN),V9e=Ac.fromSimpleFillSymbol(tve),j9e=new Gf({symbolLayers:new Ze([new ea({material:{color:cH},edges:new xfe({size:ji(1),color:new _e(M9e)})})])}),U9e=new Bu({symbolLayers:new Ze([new Qo({material:{color:new _e([0,0,0])},size:ji(1)})])}),B9e=new Ac({symbolLayers:new Ze([new ea({outline:{color:new _e([0,0,0]),size:ji(1)}})])});function bbt(t){if(t==null)return null;switch(t.type){case"mesh":return j9e;case"point":case"multipoint":return D9e;case"polyline":return z9e;case"polygon":case"extent":return V9e}return null}const tie="#useCIMFallbackSymbology()",Mf={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function c$(t,e=Mf){var l,c,d,f;if(!t)return{symbol:null};const{retainId:i=Mf.retainId,ignoreDrivers:r=Mf.ignoreDrivers,hasLabelingContext:n=Mf.hasLabelingContext,retainCIM:s=Mf.retainCIM,cimFallbackEnabled:o=Mf.cimFallbackEnabled}=e;let a=null;if(vp(t)||t instanceof Is)a=t.clone();else if(t.type==="cim"){const y=(c=(l=t.data)==null?void 0:l.symbol)==null?void 0:c.type;switch(y){case"CIMPointSymbol":a=s?t.clone():sa.fromCIMSymbol(t);break;case"CIMLineSymbol":o&&(a=U9e.clone(),(d=e==null?void 0:e.logWarning)==null||d.call(e,tie,"Unsupported CIM line symbology converted to fallback 3D line symbology"));break;case"CIMPolygonSymbol":o&&(a=B9e.clone(),(f=e==null?void 0:e.logWarning)==null||f.call(e,tie,"Unsupported CIM polygon symbology converted to fallback 3D polygon symbology"))}if(!a)return{error:new ie("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${y||"unknown"}' is unsupported in 3D`,{symbol:t})}}else if(t instanceof Xr)a=Bu.fromSimpleLineSymbol(t);else if(t instanceof Fr)a=sa.fromSimpleMarkerSymbol(t);else if(t instanceof Ko)a=sa.fromPictureMarkerSymbol(t);else if(t instanceof So)a=e.geometryType&&e.geometryType==="mesh"?Gf.fromSimpleFillSymbol(t):Ac.fromSimpleFillSymbol(t);else{if(!(t instanceof Tt))return{error:new ie("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${t.type||t.declaredClass}' is unsupported in 3D`,{symbol:t})};a=n?Pu.fromTextSymbol(t):sa.fromTextSymbol(t)}return i&&a&&a.type!=="cim"&&(a.id=t.id),!r||a.type==="cim"||a instanceof Is||a.symbolLayers.forEach((y=>y.ignoreDrivers=!0)),{symbol:a}}function ZO(t,e,i,r){const n=ive(t,{},{context:r,isLabelSymbol:!1});n!=null&&xn(i,n,e)}function iie(t,e,i,r){const n=ive(t,{},{context:r,isLabelSymbol:!0});n!=null&&(e[i]=n)}function rie(t){return vp(t)||t instanceof Is}function G9e(t){return(t==null?void 0:t.type)==="polygon-3d"||(t==null?void 0:t.type)==="line-3d"}function ive(t,e,i){var a;if(t==null)return null;const{context:r,isLabelSymbol:n}=i,s=r==null?void 0:r.origin,o=r==null?void 0:r.messages;if(s==="web-scene"&&!rie(t)){const l=c$(t,{retainCIM:!0,hasLabelingContext:n});return l.symbol!=null?l.symbol.write(e,r):(o==null||o.push(new ie("symbol:unsupported",`Symbols of type '${t.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:t,context:r,error:l.error})),null)}return gU(r==null?void 0:r.layer)&&G9e(t)?(o==null||o.push(new ie("symbol:unsupported",`Symbols of type '${t.declaredClass}' are not supported on layers of type '${(a=r==null?void 0:r.layer)==null?void 0:a.declaredClass}'.`,{symbol:t,context:r})),null):(s==="web-map"||s==="portal-item"&&!gU(r==null?void 0:r.layer))&&rie(t)?(o==null||o.push(new ie("symbol:unsupported",`Symbols of type '${t.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:t,context:r})),null):t.write(e,r)}function rve(t,e){return ANe(t,null,e)}const VN={types:Ufe,json:{write:{writer:ZO},origins:{"web-scene":{types:YK,write:{writer:ZO},read:{reader:C$({types:YK})}}}}},uH=J7({json:{origins:{"web-scene":{write:{isRequired:!0}}}}},VN),dH={types:{base:wn,key:"type",typeMap:{"simple-fill":ag.typeMap["simple-fill"],"picture-fill":ag.typeMap["picture-fill"],"polygon-3d":ag.typeMap["polygon-3d"],cim:ag.typeMap.cim}},json:{write:{writer:ZO},origins:{"web-scene":{type:Ac,write:{writer:ZO}}}}},WL={cast:t=>t==null||typeof t=="string"||typeof t=="number"?t:`${t}`,json:{type:String,write:{writer:(t,e)=>{e.value=t==null?void 0:t.toString()}}}};var C8;let As=C8=class extends H$(Ll){constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.type="simple"}async collectRequiredFields(t,e){await Promise.all([this.collectSymbolFields(t,e),this.collectVVRequiredFields(t,e)])}async collectSymbolFields(t,e){await Promise.all(this.symbols.map((i=>i.collectRequiredFields(t,e))))}getSymbol(t,e){return this.symbol}async getSymbolAsync(t,e){return this.symbol}get symbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){var t;return((t=this.visualVariables)==null?void 0:t.reduce(((e,i)=>e+i.getAttributeHash()),""))??""}getMeshHash(){return this.symbols.reduce(((t,e)=>t+JSON.stringify(e)),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new C8({description:this.description,label:this.label,symbol:se(this.symbol),visualVariables:se(this.visualVariables),authoringInfo:se(this.authoringInfo)})}};u([h({type:String,json:{write:!0}})],As.prototype,"description",void 0),u([h({type:String,json:{write:!0}})],As.prototype,"label",void 0),u([h(uH)],As.prototype,"symbol",void 0),u([at({simple:"simple"})],As.prototype,"type",void 0),As=C8=u([V("esri.renderers.SimpleRenderer")],As);const q9e=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function M8(t){return t instanceof tt}function nie(t){return t instanceof Ze?Object.keys(t.items):M8(t)?da(t).keys():t?Object.keys(t):[]}function jP(t,e){return t instanceof Ze?t.items[e]:t[e]}function H9e(t,e){return!(!Array.isArray(t)||!Array.isArray(e))&&t.length!==e.length}function wC(t){return t?t.declaredClass:null}function nve(t,e){var f;const i=t.diff;if(i&&typeof i=="function")return i(t,e);const r=nie(t),n=nie(e);if(r.length===0&&n.length===0)return;if(!r.length||!n.length||H9e(t,e))return{type:"complete",oldValue:t,newValue:e};const s=n.filter((y=>!r.includes(y))),o=r.filter((y=>!n.includes(y))),a=r.filter((y=>n.includes(y)&&jP(t,y)!==jP(e,y))).concat(s,o).sort(),l=wC(t);if(l&&q9e.has(l)&&a.length)return{type:"complete",oldValue:t,newValue:e};let c;const d=M8(t)&&M8(e);for(const y of a){const g=jP(t,y),b=jP(e,y);let _;if((d||typeof g!="function"&&typeof b!="function")&&g!==b&&(g!=null||b!=null)){if(i&&i[y]&&typeof i[y]=="function")_=(f=i[y])==null?void 0:f.call(i,g,b);else if(g instanceof Date&&b instanceof Date){if(g.getTime()===b.getTime())continue;_={type:"complete",oldValue:g,newValue:b}}else _=typeof g=="object"&&typeof b=="object"&&wC(g)===wC(b)?nve(g,b):{type:"complete",oldValue:g,newValue:b};_!=null&&(c!=null?c.diff[y]=_:c={type:"partial",diff:{[y]:_}})}}return c}function wbt(t,e){return W9e(t,e)}function W9e(t,e){if(t==null)return!1;const i=e.split(".");let r=t;for(const n of i){if(r.type==="complete")return!0;if(r.type!=="partial")return!1;{const s=r.diff[n];if(!s)return!1;r=s}}return!0}function _bt(t,e){if(!t)return!1;if(t.type==="partial"){const i=Object.keys(t.diff);return i.length===1&&i[0]===e}return!1}function Z9e(t,e){if(typeof t!="function"&&typeof e!="function"&&(t!=null||e!=null))return t==null||e==null||typeof t=="object"&&typeof e=="object"&&wC(t)!==wC(e)?{type:"complete",oldValue:t,newValue:e}:nve(t,e)}function UP(t){if(t==null)return!0;switch(t.type){case"complete":return!1;case"collection":{const e=t;for(const i of e.added)if(!UP(i))return!1;for(const i of e.removed)if(!UP(i))return!1;for(const i of e.changed)if(!UP(i))return!1;return!0}case"partial":for(const e in t.diff)if(!UP(t.diff[e]))return!1;return!0}}var k8;const J9e=is()({ascendingValues:"ascending-values",descendingValues:"descending-values"});let SI=k8=class extends bt.ClonableMixin(ve){static from(t){return c2(k8,t)}constructor(t){super(t),this.title=null,this.order=null}};u([h({type:String,json:{write:!0}})],SI.prototype,"title",void 0),u([at(J9e)],SI.prototype,"order",void 0),SI=k8=u([V("esri.renderers.support.RendererLegendOptions")],SI);const hH=SI;let ju=class extends bt.ClonableMixin(ve){constructor(e){super(e),this.value=null,this.value2=null,this.value3=null}};u([h(WL)],ju.prototype,"value",void 0),u([h(WL)],ju.prototype,"value2",void 0),u([h(WL)],ju.prototype,"value3",void 0),ju=u([V("esri.renderers.support.UniqueValue")],ju);let bf=class extends bt.ClonableMixin(ve){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.values=null}castValues(e){if(e==null)return null;const i=typeof(e=Array.isArray(e)?e:[e])[0];return i==="string"||i==="number"?e.map((r=>new ju({value:r}))):i==="object"?e[0]instanceof ju?e:e.map((r=>new ju(r))):null}};u([h({type:String,json:{write:!0}})],bf.prototype,"description",void 0),u([h({type:String,json:{write:!0}})],bf.prototype,"label",void 0),u([h(VN)],bf.prototype,"symbol",void 0),u([h({type:[ju],json:{type:[[String]],read:{reader:t=>t?t.map((e=>new ju({value:e[0],value2:e[1],value3:e[2]}))):null},write:{writer:(t,e)=>{const i=[];for(const r of t){const n=[r.value,r.value2,r.value3].filter(Kr).map((s=>s.toString()));i.push(n)}e.values=i}}}})],bf.prototype,"values",void 0),u([yi("values")],bf.prototype,"castValues",null),bf=u([V("esri.renderers.support.UniqueValueClass")],bf);let pb=class extends bt.ClonableMixin(ve){constructor(e){super(e),this.heading=null,this.classes=null}};u([h({type:String,json:{write:!0}})],pb.prototype,"heading",void 0),u([h({type:[bf],json:{write:{isRequired:!0}}})],pb.prototype,"classes",void 0),pb=u([V("esri.renderers.support.UniqueValueGroup")],pb);var P8;let Vu=P8=class extends ve{constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.value=null}clone(){return new P8({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){var e;const t=JSON.stringify((e=this.symbol)==null?void 0:e.toJSON());return`${this.value}.${t}`}};u([h({type:String,json:{write:!0}})],Vu.prototype,"description",void 0),u([h({type:String,json:{write:!0}})],Vu.prototype,"label",void 0),u([h(uH)],Vu.prototype,"symbol",void 0),u([h(WL)],Vu.prototype,"value",void 0),Vu=P8=u([V("esri.renderers.support.UniqueValueInfo")],Vu);const sie=new Map;async function Y9e(t,e){try{return{data:(await pH(t,e)).data,baseUrl:xG(t),styleUrl:t}}catch(i){return dh(i),null}}function X9e(t,e,i){var l;const r=e.portal!=null?e.portal:ze.getDefault();let n;const s=`${r.url} - ${(l=r.user)==null?void 0:l.username} - ${t}`,o=sie.get(s);if(o)return o;const a=K9e(t,r,i).then((c=>(n=c,c.fetchData()))).then((c=>({data:c,baseUrl:n.itemUrl??"",styleName:t})));return sie.set(s,a),a}function K9e(t,e,i){return e.load(i).then((()=>{const r=new mn({disableExtraQuery:!0,query:`owner:${oie} AND type:${aie} AND typekeywords:"${t}"`});return e.queryItems(r,i)})).then((({results:r})=>{var o;let n=null;const s=t.toLowerCase();if(r&&Array.isArray(r)){for(const a of r)if(((o=a.typeKeywords)==null?void 0:o.some((c=>c.toLowerCase()===s)))&&a.type===aie&&a.owner===oie){n=a;break}}if(!n)throw new ie("symbolstyleutils:style-not-found",`The style '${t}' could not be found`,{styleName:t});return n.load(i)}))}function sve(t,e,i){return(t==null?void 0:t.styleUrl)!=null?Y9e(t.styleUrl,i):(t==null?void 0:t.styleName)!=null?X9e(t.styleName,e,i):Promise.reject(new ie("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function ove(t){return t===null||t.type==="CIMSymbolReference"?t:{type:"CIMSymbolReference",symbol:t}}function Q9e(t,e){for(const i of e)switch(i){case"cim":if(t.cimRef)return{format:i,url:encodeURI(t.cimRef)};break;case"web-gltf-basisu":{const r=M4(t,"gltf_basisu");if(r)return{format:i,url:r};break}case"web-gltf":{const r=M4(t,"gltf");if(r)return{format:i,url:r};break}case"web":{const r=M4(t,"gltf");if(r)return{format:"web-gltf",url:r};if(t.webRef)return{format:i,url:encodeURI(t.webRef)};break}}}function M4(t,e){var i,r;if(!fe("enable-feature:force-wosr"))return(r=(i=t.formatInfos)==null?void 0:i.find((n=>n.type===e)))==null?void 0:r.href}function pH(t,e){const i={responseType:"json",query:{f:"json"},...e};return fi(Yu(t),i)}const oie="esri_en",aie="Style",e7e="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";var $I;const lie="uvInfos-watcher",cie="uvGroups-watcher",t7e=",",i7e=En(Vu);function r7e(t){const{field1:e,field2:i,field3:r,fieldDelimiter:n,uniqueValueInfos:s,valueExpression:o}=t,a=!(!e||!i);return[{classes:(s??[]).map((l=>{var E;const{symbol:c,label:d,value:f,description:y}=l,[g,b,_]=a?((E=f==null?void 0:f.toString())==null?void 0:E.split(n||""))||[]:[f],x=[];return(e||o)&&x.push(g),i&&x.push(b),r&&x.push(_),{symbol:c,label:d,values:[x],description:y}}))}]}function $_(t){return t!=null&&t!==""&&(typeof t!="string"||t.trim()!==""&&t.toLowerCase()!=="<null>")||(t=null),t+""}let vr=$I=class extends H$(Ll){constructor(t){super(t),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this._isInfosSource=null,this.type="unique-value",this.backgroundFillSymbol=null,this.orderByClassesEnabled=!1,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(e,i){if(!e&&!i)return;if(!e||!i)return{type:"complete",oldValue:e,newValue:i};let r=!1;const n={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let s=0;s<i.length;s++){const o=e.find((a=>a.value===i[s].value));o?Z9e(o,i[s])?(n.changed.push({type:"complete",oldValue:o,newValue:i[s]}),r=!0):n.unchanged.push({oldValue:o,newValue:i[s]}):(n.added.push(i[s]),r=!0)}for(let s=0;s<e.length;s++)i.find((o=>o.value===e[s].value))||(n.removed.push(e[s]),r=!0);return r?n:void 0}},this._set("uniqueValueInfos",[]),this._set("uniqueValueGroups",[])}get _cache(){return{compiledFunc:null}}set field(t){this._set("field",t),this._updateFieldDelimiter(),this._updateUniqueValues()}castField(t){return t==null||typeof t=="function"?t:l2(t)}writeField(t,e,i,r){typeof t=="string"?e[i]=t:r!=null&&r.messages?r.messages.push(new ie("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):Ie.getLogger(this).error(".field: cannot write field to JSON since it's not a string value")}set field2(t){this._set("field2",t),this._updateFieldDelimiter(),this._updateUniqueValues()}set field3(t){this._set("field3",t),this._updateUniqueValues()}set valueExpression(t){this._set("valueExpression",t),this._updateUniqueValues()}set defaultSymbol(t){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",t)}set fieldDelimiter(t){this._set("fieldDelimiter",t),this._updateUniqueValues()}readPortal(t,e,i){return i.portal||ze.getDefault()}readStyleOrigin(t,e,i){if(e.styleName)return Object.freeze({styleName:e.styleName});if(e.styleUrl){const r=rm(e.styleUrl,i);return Object.freeze({styleUrl:r})}}writeStyleOrigin(t,e,i,r){t.styleName?e.styleName=t.styleName:t.styleUrl&&(e.styleUrl=tw(t.styleUrl,r))}set uniqueValueGroups(t){this.styleOrigin?Ie.getLogger(this).error("#uniqueValueGroups=","Cannot modify unique value groups of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueGroups",t),this._updateInfosFromGroups(),this._isInfosSource=!1,this._watchUniqueValueGroups())}set uniqueValueInfos(t){this.styleOrigin?Ie.getLogger(this).error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",t),this._updateValueInfoMap(),this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos())}addUniqueValueInfo(t,e){var r;if(this.styleOrigin)return void Ie.getLogger(this).error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let i;i=typeof t=="object"?i7e(t):new Vu({value:t,symbol:Bfe(e)}),(r=this.uniqueValueInfos)==null||r.push(i),this._valueInfoMap[$_(i.value)]=i,this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}removeUniqueValueInfo(t){if(this.styleOrigin)return void Ie.getLogger(this).error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");const e=this.uniqueValueInfos;if(e)for(let i=0;i<e.length;i++){const r=e[i];if(String(r.value)===String(t)){delete this._valueInfoMap[$_(t)],e.splice(i,1);break}}this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}async getUniqueValueInfo(t,e){let i=e;return this.valueExpression&&(e==null?void 0:e.arcade)==null&&(i={...i,arcade:await fp()}),this._getUniqueValueInfo(t,i)}getSymbol(t,e){if(this.valueExpression&&(e==null?void 0:e.arcade)==null)return void Ie.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this._getUniqueValueInfo(t,e);return(i==null?void 0:i.symbol)||this.defaultSymbol}async getSymbolAsync(t,e){let i=e;if(this.valueExpression&&(i==null?void 0:i.arcade)==null){const n=await fp(),{arcadeUtils:s}=n;s.hasGeometryOperations(this.valueExpression)&&await s.enableGeometryOperations(),i={...i,arcade:n}}const r=this._getUniqueValueInfo(t,i);return(r==null?void 0:r.symbol)||this.defaultSymbol}get symbols(){const t=[];for(const e of this.uniqueValueInfos??[])e.symbol&&t.push(e.symbol);return this.defaultSymbol&&t.push(this.defaultSymbol),t}getAttributeHash(){var t;return((t=this.visualVariables)==null?void 0:t.reduce(((e,i)=>e+i.getAttributeHash()),""))??""}getMeshHash(){var r;const t=JSON.stringify(this.backgroundFillSymbol),e=JSON.stringify(this.defaultSymbol),i=(r=this.uniqueValueInfos)==null?void 0:r.reduce(((n,s)=>n+s.getMeshHash()),"");return`${t}.${e}.${i}.${`${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}`}.${this.valueExpression}`}clone(){const t=new $I({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:se(this.defaultSymbol),orderByClassesEnabled:this.orderByClassesEnabled,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:se(this.visualVariables),legendOptions:se(this.legendOptions),authoringInfo:se(this.authoringInfo),backgroundFillSymbol:se(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(t._isDefaultSymbolDerived=!0),t._set("portal",this.portal);const e=se(this.uniqueValueInfos),i=se(this.uniqueValueGroups);return this.styleOrigin&&(t._set("styleOrigin",Object.freeze(se(this.styleOrigin))),Object.freeze(e),Object.freeze(i)),t._set("uniqueValueInfos",e),t._updateValueInfoMap(),t._set("uniqueValueGroups",i),t._isInfosSource=this._isInfosSource,t._watchUniqueValueInfosAndGroups(),t}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}async collectRequiredFields(t,e){const i=[this.collectVVRequiredFields(t,e),this.collectSymbolFields(t,e)];await Promise.all(i)}async collectSymbolFields(t,e){const i=[...this.symbols.map((r=>r.collectRequiredFields(t,e))),io(t,e,this.valueExpression)];ca(t,e,this.field),ca(t,e,this.field2),ca(t,e,this.field3),await Promise.all(i)}populateFromStyle(){return sve(this.styleOrigin,{portal:this.portal}).then((t=>{var i;const e=[];return this._valueInfoMap={},t!=null&&t.data&&Array.isArray(t.data.items)&&t.data.items.forEach((r=>{const n=new Is({styleUrl:t.styleUrl,styleName:t.styleName,portal:this.portal,name:r.name});this.defaultSymbol||r.name!==t.data.defaultItem||(this.defaultSymbol=n,this._isDefaultSymbolDerived=!0);const s=new Vu({value:r.name,symbol:n});e.push(s),this._valueInfoMap[$_(r.name)]=s})),this._set("uniqueValueInfos",Object.freeze(e)),this._updateGroupsFromInfos(!0),this._isInfosSource=null,this._watchUniqueValueInfos(),!this.defaultSymbol&&((i=this.uniqueValueInfos)!=null&&i.length)&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this}))}_updateFieldDelimiter(){this.field&&this.field2&&!this.fieldDelimiter&&this._set("fieldDelimiter",t7e)}_updateUniqueValues(){this._isInfosSource!=null&&(this._isInfosSource?this._updateGroupsFromInfos():this._updateInfosFromGroups())}_updateValueInfoMap(){this._valueInfoMap={};const{uniqueValueInfos:t}=this;if(t)for(const e of t)this._valueInfoMap[$_(e.value)]=e}_watchUniqueValueInfosAndGroups(){this._watchUniqueValueInfos(),this._watchUniqueValueGroups()}_watchUniqueValueInfos(){this.removeHandles(lie);const{uniqueValueInfos:t}=this;if(t){const e=[];for(const i of t)e.push($e((()=>({symbol:i.symbol,value:i.value,label:i.label,description:i.description})),((r,n)=>{r!==n&&(this._updateGroupsFromInfos(),this._isInfosSource=!0)}),{sync:!0}));this.addHandles(e,lie)}}_watchUniqueValueGroups(){this.removeHandles(cie);const{uniqueValueGroups:t}=this;if(t){const e=[];for(const i of t){e.push($e((()=>({classes:i.classes})),((r,n)=>{r!==n&&(this._updateInfosFromGroups(),this._isInfosSource=!1)}),{sync:!0}));for(const r of i.classes??[])e.push($e((()=>({symbol:r.symbol,values:r.values,label:r.label,description:r.description})),((n,s)=>{n!==s&&(this._updateInfosFromGroups(),this._isInfosSource=!1)}),{sync:!0}))}this.addHandles(e,cie)}}_updateInfosFromGroups(){if(!this.uniqueValueGroups)return this._set("uniqueValueInfos",null),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const t=[],{field:e,field2:i,field3:r,fieldDelimiter:n,uniqueValueGroups:s,valueExpression:o}=this;if(!e&&!o)return this._set("uniqueValueInfos",t),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const a=!(!e||!i);for(const l of s)for(const c of l.classes??[]){const{symbol:d,label:f,values:y,description:g}=c;for(const b of y??[]){const{value:_,value2:x,value3:E}=b,C=[_];i&&C.push(x),r&&C.push(E);const k=a?C.join(n||""):C[0]??void 0;t.push(new Vu({symbol:d,label:f,value:k,description:g}))}}this._set("uniqueValueInfos",t),this._updateValueInfoMap(),this._watchUniqueValueInfos()}_updateGroupsFromInfos(t=!1){if(!this.uniqueValueInfos)return this._set("uniqueValueGroups",null),void this._watchUniqueValueGroups();const{field:e,field2:i,valueExpression:r,fieldDelimiter:n,uniqueValueInfos:s}=this;if(!e&&!r||!s.length)return this._set("uniqueValueGroups",[]),void this._watchUniqueValueGroups();const o=!(!e||!i),a=s.map((c=>{var E;const{symbol:d,label:f,value:y,description:g}=c,[b,_,x]=o?((E=y==null?void 0:y.toString())==null?void 0:E.split(n||""))||[]:[y];return new bf({symbol:d,label:f,description:g,values:[new ju({value:b,value2:_,value3:x})]})})),l=[new pb({classes:a})];t&&Object.freeze(l),this._set("uniqueValueGroups",l),this._watchUniqueValueGroups()}_getUniqueValueInfo(t,e){return this.valueExpression?this._getUnqiueValueInfoForExpression(t,e):this._getUnqiueValueInfoForFields(t)}_getUnqiueValueInfoForExpression(t,e){const{viewingMode:i,scale:r,spatialReference:n,arcade:s,timeZone:o}=e??{};let a=this._cache.compiledFunc;const l=s.arcadeUtils;if(!a){const d=l.createSyntaxTree(this.valueExpression);a=l.createFunction(d),this._cache.compiledFunc=a}const c=l.executeFunction(a,l.createExecContext(t,l.getViewInfo({viewingMode:i,scale:r,spatialReference:n}),o));return this._valueInfoMap[$_(c)]}_getUnqiueValueInfoForFields(t){const e=this.field,i=t.attributes;let r;if(this.field2){const n=this.field2,s=this.field3,o=[];e&&o.push(i[e]),n&&o.push(i[n]),s&&o.push(i[s]),r=o.join(this.fieldDelimiter||"")}else e&&(r=i[e]);return this._valueInfoMap[$_(r)]}static fromPortalStyle(t,e){const i=new $I(e==null?void 0:e.properties);i._set("styleOrigin",Object.freeze({styleName:t})),i._set("portal",(e==null?void 0:e.portal)||ze.getDefault());const r=i.populateFromStyle();return r.catch((n=>{Ie.getLogger(this.prototype).error(`#fromPortalStyle('${t}'[, ...])`,"Failed to create unique value renderer from style name",n)})),r}static fromStyleUrl(t,e){const i=new $I(e==null?void 0:e.properties);i._set("styleOrigin",Object.freeze({styleUrl:t}));const r=i.populateFromStyle();return r.catch((n=>{Ie.getLogger(this.prototype).error(`#fromStyleUrl('${t}'[, ...])`,"Failed to create unique value renderer from style URL",n)})),r}};u([h({readOnly:!0})],vr.prototype,"_cache",null),u([at({uniqueValue:"unique-value"})],vr.prototype,"type",void 0),u([h(dH)],vr.prototype,"backgroundFillSymbol",void 0),u([h({value:null,json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],vr.prototype,"field",null),u([yi("field")],vr.prototype,"castField",null),u([Ve("field")],vr.prototype,"writeField",null),u([h({type:String,value:null,json:{write:!0}})],vr.prototype,"field2",null),u([h({type:String,value:null,json:{write:!0}})],vr.prototype,"field3",null),u([h({type:Boolean,json:{name:"drawInClassOrder",default:!1,write:!0,origins:{"web-scene":{write:!1}}}})],vr.prototype,"orderByClassesEnabled",void 0),u([h({type:String,value:null,json:{write:!0}})],vr.prototype,"valueExpression",null),u([h({type:String,json:{write:!0}})],vr.prototype,"valueExpressionTitle",void 0),u([h({type:hH,json:{write:!0}})],vr.prototype,"legendOptions",void 0),u([h({type:String,json:{write:!0}})],vr.prototype,"defaultLabel",void 0),u([h(J7({...VN},{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],vr.prototype,"defaultSymbol",null),u([h({type:String,value:null,json:{write:!0}})],vr.prototype,"fieldDelimiter",null),u([h({type:ze,readOnly:!0})],vr.prototype,"portal",void 0),u([De("portal",["styleName"])],vr.prototype,"readPortal",null),u([h({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],vr.prototype,"styleOrigin",void 0),u([De("styleOrigin",["styleName","styleUrl"])],vr.prototype,"readStyleOrigin",null),u([Ve("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],vr.prototype,"writeStyleOrigin",null),u([h({type:[pb],json:{read:{source:["uniqueValueGroups","uniqueValueInfos"],reader:(t,e,i)=>(e.uniqueValueGroups||r7e(e)).map((r=>pb.fromJSON(r,i)))},write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],vr.prototype,"uniqueValueGroups",null),u([h({type:[Vu],json:{read:!1,write:{isRequired:!0,overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0,isRequired:!0}}}}})],vr.prototype,"uniqueValueInfos",null),vr=$I=u([V("esri.renderers.UniqueValueRenderer")],vr);var A8,SS;let Vn=(SS=class extends ve{constructor(e){super(e),this.attachmentTypes=null,this.attachmentsWhere=null,this.cacheHint=void 0,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.orderByFields=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(e,i){i.resultOffset=this.start,i.resultRecordCount=this.num||10}clone(){return new A8(se({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,cacheHint:this.cacheHint,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}},A8=SS,SS);u([h({type:[String],json:{write:!0}})],Vn.prototype,"attachmentTypes",void 0),u([h({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],Vn.prototype,"attachmentsWhere",void 0),u([h({type:Boolean,json:{write:!0}})],Vn.prototype,"cacheHint",void 0),u([h({type:[String],json:{write:!0}})],Vn.prototype,"keywords",void 0),u([h({type:[String],json:{write:!0}})],Vn.prototype,"globalIds",void 0),u([h({json:{write:!0}})],Vn.prototype,"name",void 0),u([h({type:Number,json:{read:{source:"resultRecordCount"}}})],Vn.prototype,"num",void 0),u([h({type:[Number],json:{write:!0}})],Vn.prototype,"objectIds",void 0),u([h({type:[String],json:{write:!0}})],Vn.prototype,"orderByFields",void 0),u([h({type:Boolean,json:{default:!1,write:!0}})],Vn.prototype,"returnMetadata",void 0),u([h({type:[Number],json:{write:!0}})],Vn.prototype,"size",void 0),u([h({type:Number,json:{read:{source:"resultOffset"}}})],Vn.prototype,"start",void 0),u([Ve("start"),Ve("num")],Vn.prototype,"writeStart",null),u([h({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],Vn.prototype,"where",void 0),Vn=A8=u([V("esri.rest.support.AttachmentQuery")],Vn),Vn.from=En(Vn);const ave=is()({naturalLog:"natural-log",squareRoot:"square-root",percentOfTotal:"percent-of-total",log:"log",field:"field"}),uie="percent-of-total",die="field",Tbt=t=>{let e=class extends t{constructor(){super(...arguments),this.normalizationField=null,this.normalizationMaxValue=null,this.normalizationMinValue=null,this.normalizationTotal=null}get normalizationType(){let i=this._get("normalizationType");const r=!!this.normalizationField,n=this.normalizationTotal!=null;return r||n?(i=r&&die||n&&uie||null,r&&n&&Ie.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):i!==die&&i!==uie||(i=null),i}set normalizationType(i){this._set("normalizationType",i)}};return u([h({type:String,json:{name:"parameters.normalizationField",write:!0}})],e.prototype,"normalizationField",void 0),u([h({type:Number,json:{name:"parameters.normalizationMaxValue",write:!0}})],e.prototype,"normalizationMaxValue",void 0),u([h({type:Number,json:{name:"parameters.normalizationMinValue",write:!0}})],e.prototype,"normalizationMinValue",void 0),u([h({type:Number,json:{name:"parameters.normalizationTotal",write:!0}})],e.prototype,"normalizationTotal",void 0),u([at(ave,{name:"parameters.normalizationType"})],e.prototype,"normalizationType",null),e=u([V("esri.rest.support.NormalizationBinParametersMixin")],e),e};var L8,$S;let ar=($S=class extends ve{constructor(e){super(e),this.cacheHint=void 0,this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(e,i){i.historicMoment=e&&e.getTime()}writeStart(e,i){i.resultOffset=this.start,i.resultRecordCount=this.num||10,this.start>0&&this.where==null&&(i.definitionExpression="1=1")}clone(){return new L8(se({cacheHint:this.cacheHint,dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}},L8=$S,$S);u([h({type:Boolean,json:{write:!0}})],ar.prototype,"cacheHint",void 0),u([h({type:Au,json:{write:!0}})],ar.prototype,"dynamicDataSource",void 0),u([h({type:String,json:{write:!0}})],ar.prototype,"gdbVersion",void 0),u([h({type:Number,json:{write:!0}})],ar.prototype,"geometryPrecision",void 0),u([h({type:Date})],ar.prototype,"historicMoment",void 0),u([Ve("historicMoment")],ar.prototype,"_writeHistoricMoment",null),u([h({type:Number,json:{write:!0}})],ar.prototype,"maxAllowableOffset",void 0),u([h({json:{write:!0}})],ar.prototype,"objectIds",void 0),u([h({type:[String],json:{write:!0}})],ar.prototype,"orderByFields",void 0),u([h({type:[String],json:{write:!0}})],ar.prototype,"outFields",void 0),u([h({type:et,json:{read:{source:"outSR"},write:{target:"outSR"}}})],ar.prototype,"outSpatialReference",void 0),u([h({json:{write:!0}})],ar.prototype,"relationshipId",void 0),u([h({type:Number,json:{read:{source:"resultOffset"}}})],ar.prototype,"start",void 0),u([Ve("start"),Ve("num")],ar.prototype,"writeStart",null),u([h({type:Number,json:{read:{source:"resultRecordCount"}}})],ar.prototype,"num",void 0),u([h({json:{write:!0}})],ar.prototype,"returnGeometry",void 0),u([h({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],ar.prototype,"returnM",void 0),u([h({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],ar.prototype,"returnZ",void 0),u([h({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],ar.prototype,"where",void 0),ar=L8=u([V("esri.rest.support.RelationshipQuery")],ar),ar.from=En(ar);const Ebt=Object.freeze(Object.defineProperty({__proto__:null,get default(){return ar}},Symbol.toStringTag,{value:"Module"})),R8=new Gt({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"});async function n7e(t,e,i,r){const n=await Jg(t);if(await fH(t,e,r),!n.addAttachment)throw new ie(r,"Layer source does not support addAttachment capability");return n.addAttachment(e,i)}function fH(t,e,i){var s,o;const{attributes:r}=e,{objectIdField:n}=t;return(o=(s=t.capabilities)==null?void 0:s.data)!=null&&o.supportsAttachment?e?r?n&&r[n]?Promise.resolve():Promise.reject(new ie(i,`feature is missing the identifying attribute ${n}`)):Promise.reject(new ie(i,"'attributes' are required on a feature to query attachments")):Promise.reject(new ie(i,"A feature is required to add/delete/update attachments")):Promise.reject(new ie(i,"this layer doesn't support attachments"))}async function s7e(t,e,i,r,n){const s=await Jg(t);if(await fH(t,e,n),!s.updateAttachment)throw new ie(n,"Layer source does not support updateAttachment capability");return s.updateAttachment(e,i,r)}async function o7e(t,e,i){const{applyEdits:r}=await ye(()=>import("./editingSupport-BIJLYcWa.js"),[]),n=await t.load();let s=i;return n.type==="feature"&&n.infoFor3D&&e.deleteFeatures!=null&&n.globalIdField!=null&&(s={...s,globalIdToObjectId:await C7e(n,e.deleteFeatures,n.globalIdField)}),r(n,n.source,e,i)}async function a7e(t,e,i){const{uploadAssets:r}=await ye(()=>import("./editingSupport-BIJLYcWa.js"),[]),n=await t.load();return r(n,n.source,e,i)}async function l7e(t,e,i,r){const n=await Jg(t);if(await fH(t,e,r),!n.deleteAttachments)throw new ie(r,"Layer source does not support deleteAttachments capability");return n.deleteAttachments(e,i)}async function c7e(t,e,i){const r=(await t.load({signal:e==null?void 0:e.signal})).source;if(!r.fetchRecomputedExtents)throw new ie(i,"Layer source does not support fetchUpdates capability");return r.fetchRecomputedExtents(e)}async function u7e(t,e,i,r){var g,b,_,x;e=Vn.from(e),await t.load();const n=t.source,s=t.capabilities;if(!((g=s==null?void 0:s.data)!=null&&g.supportsAttachment))throw new ie(r,"this layer doesn't support attachments");const{attachmentTypes:o,objectIds:a,globalIds:l,num:c,size:d,start:f,where:y}=e;if(!((b=s==null?void 0:s.operations)!=null&&b.supportsQueryAttachments)&&((o==null?void 0:o.length)>0||(l==null?void 0:l.length)>0||(d==null?void 0:d.length)>0||c||f||y))throw new ie(r,"when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",e);if(!(a!=null&&a.length||l!=null&&l.length||y))throw new ie(r,"'objectIds', 'globalIds', or 'where' are required to perform attachment query",e);if(!n.queryAttachments)throw new ie(r,"Layer source does not support queryAttachments capability",e);return!((_=s==null?void 0:s.attachment)!=null&&_.supportsOrderByFields)&&((x=e.orderByFields)!=null&&x.length)&&((e=e.clone()).orderByFields=null),n.queryAttachments(e)}async function d7e(t,e,i,r){const n=await Jg(t);if(!n.queryObjectIds)throw new ie(r,"Layer source does not support queryObjectIds capability");return n.queryObjectIds(dt.from(e)??t.createQuery(),i)}async function h7e(t,e,i,r){const n=await Jg(t);if(!n.queryFeatureCount)throw new ie(r,"Layer source does not support queryFeatureCount capability");return n.queryFeatureCount(dt.from(e)??t.createQuery(),i)}async function p7e(t,e,i,r){const n=await Jg(t);if(!n.queryExtent)throw new ie(r,"Layer source does not support queryExtent capability");return n.queryExtent(dt.from(e)??t.createQuery(),i)}async function f7e(t,e,i,r){const n=await Jg(t);if(!n.queryRelatedFeatures)throw new ie(r,"Layer source does not support queryRelatedFeatures capability");return n.queryRelatedFeatures(ar.from(e),i)}async function m7e(t,e,i,r){const n=await Jg(t);if(!n.queryRelatedFeaturesCount)throw new ie(r,"Layer source does not support queryRelatedFeaturesCount capability");return n.queryRelatedFeaturesCount(ar.from(e),i)}async function y7e(t){const e=t.source;if(e!=null&&e.refresh)try{const{dataChanged:i,updates:r}=await e.refresh();if(r!=null&&(t.sourceJSON={...t.sourceJSON,...r},t.read(r,{origin:"service",url:t.parsedUrl})),i)return!0}catch{}if(t.definitionExpression)try{return(await vq(t.definitionExpression,t.fieldsIndex)).hasDateFunctions}catch{}return!1}function g7e(t){var o,a;const e=new dt;e.historicMoment=t.historicMoment,e.gdbVersion=t.gdbVersion,e.returnGeometry=!0,e.outFields=["*"],e.multipatchOption=t.geometryType==="multipatch"?"xyFootprint":null;const i=(o=t.capabilities)==null?void 0:o.query;i&&(e.compactGeometryEnabled=i.supportsCompactGeometry,e.defaultSpatialReferenceEnabled=i.supportsDefaultSpatialReference);const r=(a=t.capabilities)==null?void 0:a.data;r!=null&&r.supportsZ&&t.returnZ!=null&&(e.returnZ=t.returnZ),r!=null&&r.supportsM&&t.returnM!=null&&(e.returnM=t.returnM);const{timeOffset:n,timeExtent:s}=t;return e.timeExtent=n!=null&&s!=null?s.offset(-n.value,n.unit):s||null,e}function lve(t){const{globalIdField:e,fields:i}=t;if(e)return e;if(i){for(const r of i)if(r.type==="esriFieldTypeGlobalID")return r.name}}function cve(t){const{objectIdField:e,fields:i}=t;if(e)return e;if(i){for(const r of i)if(r.type==="esriFieldTypeOID")return r.name}}function v7e(t){return t.currentVersion?t.currentVersion:t.hasOwnProperty("capabilities")||t.hasOwnProperty("drawingInfo")||t.hasOwnProperty("hasAttachments")||t.hasOwnProperty("htmlPopupType")||t.hasOwnProperty("relationships")||t.hasOwnProperty("timeInfo")||t.hasOwnProperty("typeIdField")||t.hasOwnProperty("types")?10:9.3}function b7e(t,e,i,r){var l,c;const n=i==null?void 0:i.feature,s=!!((l=t.subtypes)!=null&&l.length);if(s&&!(i!=null&&i.excludeImpliedDomains)){const d=_7e(t,e);if(d)return d}const o=s&&w7e(t,n);if(o){const d=(c=o==null?void 0:o.domains)==null?void 0:c[e];return(d==null?void 0:d.type)==="inherited"?r:d}const a=hve(t.types,t.typeIdField,n);if(a){const d=a.domains&&a.domains[e];if(d&&(d==null?void 0:d.type)!=="inherited")return d}if(r)return r;if(!(i!=null&&i.excludeImpliedDomains)){const d=x7e(t,e);if(d)return d}return null}function w7e(t,e){const{subtypes:i,subtypeField:r}=t;if(!(e!=null&&e.attributes)||!(i!=null&&i.length)||!r)return null;const n=e.attributes[r];return n==null?null:i.find((s=>s.code===n))}function _7e(t,e){var o,a;const{fieldsIndex:i,subtypeField:r}=t,{name:n,type:s}=i.get(e)??{};if(!n)return null;if((r&&((o=i.get(r))==null?void 0:o.name))===n&&((a=t.subtypes)!=null&&a.length)){const l=t.subtypes.map((c=>new db({code:uve(c.code,s),name:c.name})));if(l!=null&&l.length)return new cg({codedValues:l})}return null}function x7e(t,e){var s,o;const{fieldsIndex:i}=t,{name:r,type:n}=i.get(e)??{};if(!r)return null;if(("typeIdField"in t?(s=i.get(t.typeIdField))==null?void 0:s.name:null)===r&&"types"in t&&((o=t.types)!=null&&o.length)){const a=t.types.map((l=>new db({code:uve(l.id,n),name:l.name})));return new cg({codedValues:a})}return null}function uve(t,e){return e?lfe({type:e})&&typeof t=="number"?`${t}`:TFe({type:e})&&typeof t=="string"?Number.parseInt(t,10):t:t}async function Jg(t){return(await t.load()).source}async function Ibt(t,e){if(!Rt)return;const i=Rt.findCredential(t);if(i)return i.userId;let r;try{const n=await hq(t,e);n&&(r=await Rt.checkSignInStatus(`${n}/sharing`))}catch{}return r?r.userId:null}async function dve(t,e){if(!Rt||Rt.findCredential(t))return;let i;try{const r=await hq(t,e);r&&(i=await Rt.checkSignInStatus(`${r}/sharing`))}catch{}if(i)try{const r=e!=null?e.signal:null;await Rt.getCredential(t,{signal:r})}catch{}}async function S7e(t,e,i){var n;const r=(n=t.parsedUrl)==null?void 0:n.path;r&&t.authenticationTriggerEvent===e&&await dve(r,i)}async function Cbt(t){var i;const e=(i=t.parsedUrl)==null?void 0:i.path;e&&$7e(t)&&await dve(e)}function $7e(t){return T7e(t)&&("serviceDefinitionExpression"in t&&JO(t.serviceDefinitionExpression)||"definitionExpression"in t&&JO(t.definitionExpression))}function T7e(t){var e;return!(!lpe(t)||!((e=t.capabilities)!=null&&e.query.supportsCurrentUser))}function JO(t){return!!(t!=null&&t.toLowerCase().includes("current_user"))}function E7e(t){return!ZL(t)&&(t.userHasUpdateItemPrivileges||t.editingEnabled)}const k4=C$({types:Ufe});function mH(t,e){var i;if(t.defaultSymbol)return(i=t.types)!=null&&i.length?new vr({defaultSymbol:k4(t.defaultSymbol,t,e),field:t.typeIdField,uniqueValueInfos:t.types.map((r=>({id:r.id,symbol:k4(r.symbol,r,e)})))}):new As({symbol:k4(t.defaultSymbol,t,e)})}function I7e(t){var r,n,s;let e=(r=t.sourceJSON)==null?void 0:r.cacheMaxAge;if(!e)return!1;const i=(s=(n=t.editingInfo)==null?void 0:n.lastEditDate)==null?void 0:s.getTime();return i==null||(e*=1e3,Date.now()-i<e)}async function C7e(t,e,i){if(e==null)return null;const r=[],{objectIdField:n}=t;if(e.forEach((c=>{let d=null;if("attributes"in c){const{attributes:f}=c;d={globalId:f[i],objectId:f[n]!=null&&f[n]!==-1?f[n]:null}}else d={globalId:c.globalId,objectId:c.objectId!=null&&c.objectId!==-1?c.objectId:null};d.globalId!=null&&(d.objectId!=null&&d.objectId!==-1||r.push(d.globalId))})),r.length===0)return null;const s=t.createQuery();s.where=r.map((c=>`${i}='${c}'`)).join(" OR "),s.returnGeometry=!1,s.outFields=[n,i],s.cacheHint=!1;const o=await tRe(aH(t,s));if(!o.ok)return null;const a=new Map,l=o.value.features;for(const c of l){const d=c.attributes[i],f=c.attributes[n];d!=null&&f!=null&&f!==-1&&a.set(XRe(d),f)}return a}function hve(t,e,i){if(!e||!i||!t)return null;const r=i.getAttribute(e);return r==null?null:t.find((n=>{const{id:s}=n;return s!=null&&s.toString()===r.toString()}))??null}function ZL(t){var e;return((e=t.sourceJSON)==null?void 0:e.isMultiServicesView)||M7e(t)}function M7e(t){var e,i;return!!((i=(e=t.sourceJSON)==null?void 0:e.capabilities)!=null&&i.toLowerCase().split(",").map((r=>r.trim())).includes("map"))}function k7e(t,e,i){var s;const r=e==null?void 0:e.queryAttributeBins;if(!((s=e==null?void 0:e.operations)!=null&&s.supportsQueryBins)||!r)throw new ie(i,"Layer source does not support binning");switch(t.binParameters.type){case"auto-interval":if(!r.supportsAutoInterval)throw new ie(i,"Layer source does not support auto-interval binning");if(t.binParameters.normalizationType&&(!r.supportsNormalization||!hie(t.binParameters.normalizationType,r.supportedNormalizationTypes)))throw new ie(i,"Layer source does not support normalization binning");break;case"date":if(!r.supportsDate)throw new ie(i,"Layer source does not support date binning");if(t.binParameters.snapToData&&!r.supportsSnapToData)throw new ie(i,"Layer source does not support snapToData binning");if(t.binParameters.returnFullIntervalBin&&!r.supportsReturnFullIntervalBin)throw new ie(i,"Layer source does not support returnFullIntervalBin binning");break;case"fixed-boundaries":if(!r.supportsFixedBoundaries)throw new ie(i,"Layer source does not support fixed-boundaries binning");break;case"fixed-interval":if(!r.supportsFixedInterval)throw new ie(i,"Layer source does not support fixed-interval binning");if(t.binParameters.normalizationType&&(!r.supportsNormalization||!hie(t.binParameters.normalizationType,r.supportedNormalizationTypes)))throw new ie(i,"Layer source does not support normalization binning")}if(t.binParameters.stackBy&&!r.supportsStackBy)throw new ie(i,"Layer source does not support stackBy binning");if(t.binParameters.splitBy&&!r.supportsSplitBy)throw new ie(i,"Layer source does not support splitBy binning");if(t.binParameters.firstDayOfWeek&&!r.supportsFirstDayOfWeek)throw new ie(i,"Layer source does not support firstDayOfWeek binning");const n=r==null?void 0:r.supportedStatistics;if(t.outStatistics&&n){const o=new Map([["count","count"],["sum","sum"],["min","min"],["max","max"],["avg","avg"],["stddev","stddev"],["var","var"],["percentile-continuous","percentileContinuous"],["percentile-discrete","percentileDiscrete"],["centroid-aggregate","centroid"],["convex-hull-aggregate","convexHull"],["envelope-aggregate","envelope"]]);for(const{statisticType:a}of t.outStatistics){const l=o.get(a);if(l&&!n[l])throw new ie(i,`Layer source does not support ${a} statistic type`)}}}function hie(t,e){return t!=null&&!!(e!=null&&e[ave.toJSON(t)])}let $1=class extends bt.ClonableMixin(ve){constructor(e){super(e),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};u([h({type:String,json:{read:{source:"shapeAreaFieldName"}}})],$1.prototype,"shapeAreaField",void 0),u([h({type:String,json:{read:{source:"shapeLengthFieldName"}}})],$1.prototype,"shapeLengthField",void 0),u([h({type:String,json:{read:t=>UCe.read(t)||BCe.read(t)}})],$1.prototype,"units",void 0),$1=u([V("esri.layers.support.GeometryFieldsInfo")],$1);var O8;let T1=O8=class extends ve{constructor(t){super(t),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new Ze}clone(){return new O8({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};u([h({type:String,json:{write:{isRequired:!0}}})],T1.prototype,"floorField",void 0),u([h({json:{read:!1,write:!1}})],T1.prototype,"viewAllMode",void 0),u([h({json:{read:!1,write:!1}})],T1.prototype,"viewAllLevelIds",void 0),T1=O8=u([V("esri.layers.support.LayerFloorInfo")],T1);const pie=new Gt({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),fie=new Gt({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let bl=class extends bt.ClonableMixin(ve){constructor(e){super(e),this.cardinality=null,this.catalogId=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};u([h({json:{read:pie.read,write:pie.write}})],bl.prototype,"cardinality",void 0),u([h({json:{name:"catalogID"}})],bl.prototype,"catalogId",void 0),u([h({json:{read:!0,write:!0}})],bl.prototype,"composite",void 0),u([h({json:{read:!0,write:!0}})],bl.prototype,"id",void 0),u([h({json:{read:!0,write:!0}})],bl.prototype,"keyField",void 0),u([h({json:{read:!0,write:!0}})],bl.prototype,"keyFieldInRelationshipTable",void 0),u([h({json:{read:!0,write:!0}})],bl.prototype,"name",void 0),u([h({json:{read:!0,write:!0}})],bl.prototype,"relatedTableId",void 0),u([h({json:{read:!0,write:!0}})],bl.prototype,"relationshipTableId",void 0),u([h({json:{read:fie.read,write:fie.write}})],bl.prototype,"role",void 0),bl=u([V("esri.layers.support.Relationship")],bl);const P7e=[["binary","application/octet-stream","bin",""]];function Pbt(t,e){return yve(e.name,(t==null?void 0:t.supportedFormats)??[])!=null}function Abt(t,e){if(!t)return!1;const i=A7e(e,t.supportedFormats??[]);return i!=null&&t.editFormats.includes(i)}function pve(t,e){return gH(F7e(t,e))}function fve(t,e){return gH(yve(t,e))}function Lbt(t,e){return gve(O7e(t,e))}function A7e(t,e){return fve(t.name,e)??pve(t.type,e)}function jN(t,e,i){return pve(t,i)??fve(e,i)}function mve({supportedFormats:t}){return jN("model/gltf-binary","glb",t)}function Rbt(t){const e=mve(t);return e!=null&&t.editFormats.includes(e)}function L7e({supportedFormats:t}){return jN("model/gltf+json","gltf",t)}function R7e(t){if(!t)return null;const e=mve(t),i=L7e(t);let r=null;for(const n of t.queryFormats){if(n===e)return n;n===i&&(r=n)}return r}function Obt({supportedFormats:t}){return jN("application/esri3do-SR_world","wld",t)}function Fbt({supportedFormats:t}){return jN("application/esri3do-SR_prj","prj",t)}function yH(t){return[...P7e,...t]}function O7e(t,e){return yH(e).find((i=>gH(i)===t))}function F7e(t,e){const i=t.toLowerCase();return yH(e).find((r=>gve(r)===i))}function yve(t,e){const i=t.toLowerCase();return yH(e).find((r=>N7e(r).some((n=>i.endsWith(n)))))}function gH(t){return t==null?void 0:t[0]}function gve(t){return t==null?void 0:t[1].toLowerCase()}function N7e(t){return(t==null?void 0:t[2].split(",").map((e=>e.toLowerCase())))??[]}function Nbt(t){var e;return(e=t.tables)==null?void 0:e.find((i=>i.role==="assetMaps"))}function it(t,e,i){return!!vve(t,e,i)}function E1(t,e,i){return vve(t,e,i)}function vve(t,e,i){return t&&t.hasOwnProperty(e)?t[e]:i}const D7e={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function z7e(t){var i;const e=(i=t==null?void 0:t.supportedSpatialAggregationStatistics)==null?void 0:i.map((r=>r.toLowerCase()));return{envelope:!!(e!=null&&e.includes("envelopeaggregate")),centroid:!!(e!=null&&e.includes("centroidaggregate")),convexHull:!!(e!=null&&e.includes("convexhullaggregate"))}}function M2(t,e){var r;const i=(r=t==null?void 0:t.supportedOperationsWithCacheHint)==null?void 0:r.map((n=>n.toLowerCase()));return!!(i!=null&&i.includes(e.toLowerCase()))}function V7e(t){var i;const e=(i=t==null?void 0:t.supportedStatisticTypes)==null?void 0:i.map((r=>r.toLowerCase()));return{count:!!(e!=null&&e.includes("count")),sum:!!(e!=null&&e.includes("sum")),min:!!(e!=null&&e.includes("min")),max:!!(e!=null&&e.includes("max")),avg:!!(e!=null&&e.includes("avg")),var:!!(e!=null&&e.includes("var")),stddev:!!(e!=null&&e.includes("stddev")),percentileContinuous:!!(e!=null&&e.includes("percentile_cont")),percentileDiscrete:!!(e!=null&&e.includes("percentile_disc")),envelope:!!(e!=null&&e.includes("envelopeaggregate")),centroid:!!(e!=null&&e.includes("centroidaggregate")),convexHull:!!(e!=null&&e.includes("convexhullaggregate"))}}function j7e(t){var i;const e=(i=t==null?void 0:t.supportedNormalizationTypes)==null?void 0:i.map((r=>r.toLowerCase()));return{field:!!(e!=null&&e.includes("field")),log:!!(e!=null&&e.includes("log")),naturalLog:!!(e!=null&&e.includes("naturallog")),percentOfTotal:!!(e!=null&&e.includes("percentoftotal")),squareRoot:!!(e!=null&&e.includes("squareroot"))}}function bve(t,e){return{analytics:U7e(t),attachment:B7e(t),data:G7e(t),metadata:q7e(t),operations:H7e(t.capabilities,t,e),query:W7e(t,e),queryAttributeBins:Y7e(t),queryRelated:Z7e(t),queryTopFeatures:J7e(t),editing:X7e(t)}}function U7e(t){return{supportsCacheHint:M2(t.advancedQueryCapabilities,"queryAnalytics")}}function B7e(t){const e=t.attachmentProperties,i={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:M2(t.advancedQueryCapabilities,"queryAttachments"),supportsOrderByFields:it(t.advancedQueryCapabilities,"supportsQueryAttachmentOrderByFields",!1),supportsResize:it(t,"supportsAttachmentsResizing",!1)};return e&&Array.isArray(e)&&e.forEach((r=>{const n=D7e[r.name];n&&(i[n]=!!r.isEnabled)})),i}function G7e(t){return{isVersioned:it(t,"isDataVersioned",!1),isBranchVersioned:it(t,"isDataBranchVersioned",!1),supportsAttachment:it(t,"hasAttachments",!1),supportsM:it(t,"hasM",!1),supportsZ:it(t,"hasZ",!1)}}function q7e(t){return{supportsAdvancedFieldProperties:it(t,"supportsFieldDescriptionProperty",!1)}}function H7e(t,e,i){var y;const r=(t==null?void 0:t.toLowerCase().split(",").map((g=>g.trim())))??[],n=i?up(i):null,s=r.includes((n==null?void 0:n.serverType)==="MapServer"?"data":"query"),o=r.includes("editing")&&!e.datesInUnknownTimezone&&((y=e.uniqueIdInfo)==null?void 0:y.OIDFieldContainsHashValue)!==!0;let a=o&&r.includes("create"),l=o&&r.includes("delete"),c=o&&r.includes("update");const d=r.includes("changetracking"),f=e.advancedQueryCapabilities;return o&&!(a||l||c)&&(a=l=c=!0),{supportsCalculate:it(e,"supportsCalculate",!1),supportsTruncate:it(e,"supportsTruncate",!1),supportsValidateSql:it(e,"supportsValidateSql",!1),supportsAdd:a,supportsDelete:l,supportsEditing:o,supportsChangeTracking:d,supportsQuery:s,supportsQueryAnalytics:it(f,"supportsQueryAnalytic",!1),supportsQueryAttachments:it(f,"supportsQueryAttachments",!1),supportsQueryBins:it(f,"supportsQueryBins",!1)||!!e.queryBinsCapabilities,supportsQueryTopFeatures:it(f,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:it(e,"supportsAttachmentsResizing",!1),supportsSync:r.includes("sync"),supportsUpdate:c,supportsExceedsLimitStatistics:it(e,"supportsExceedsLimitStatistics",!1),supportsAsyncConvert3D:it(e,"supportsAsyncConvert3D",!1)}}function W7e(t,e){const i=t.advancedQueryCapabilities,r=t.ownershipBasedAccessControlForFeatures,n=t.archivingInfo,s=t.currentVersion,o=e==null?void 0:e.includes("MapServer"),a=!o||s>=fe("mapserver-pbf-version-support"),l=qR(e),c=new Set((t.supportedQueryFormats??"").split(",").map((d=>d.toLowerCase().trim())));return{maxRecordCount:E1(t,"maxRecordCount",void 0),maxRecordCountFactor:E1(t,"maxRecordCountFactor",void 0),maxUniqueIDCount:E1(t,"maxUniqueIDCount",void 0),standardMaxRecordCount:E1(t,"standardMaxRecordCount",void 0),supportedSpatialAggregationStatistics:z7e(i),supportsCacheHint:it(i,"supportsQueryWithCacheHint",!1)||M2(i,"query"),supportsCentroid:it(i,"supportsReturningGeometryCentroid",!1),supportsCompactGeometry:l,supportsCurrentUser:it(i,"supportsCurrentUserQueries",!1),supportsDefaultSpatialReference:it(i,"supportsDefaultSR",!1),supportsDisjointSpatialRelationship:it(i,"supportsDisjointSpatialRel",!1),supportsDistance:it(i,"supportsQueryWithDistance",!1),supportsDistinct:it(i,"supportsDistinct",t.supportsAdvancedQueries),supportsExtent:it(i,"supportsReturningQueryExtent",!1),supportsFormatPBF:a&&c.has("pbf"),supportsFullTextSearch:it(i,"supportsFullTextSearch",!1),supportsGeometryProperties:it(i,"supportsReturningGeometryProperties",!1),supportsHavingClause:it(i,"supportsHavingClause",!1),supportsHistoricMoment:it(n,"supportsQueryWithHistoricMoment",!1),supportsMaxRecordCountFactor:it(i,"supportsMaxRecordCountFactor",!1),supportsOrderBy:it(i,"supportsOrderBy",t.supportsAdvancedQueries),supportsPagination:it(i,"supportsPagination",!1),supportsPaginationOnAggregatedQueries:it(i,"supportsPaginationOnAggregatedQueries",!1),supportsPercentileStatistics:it(i,"supportsPercentileStatistics",!1),supportsQuantization:it(t,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:it(t,"supportsQuantizationEditMode",!1),supportsQueryByAnonymous:it(r,"allowAnonymousToQuery",!0),supportsQueryByOthers:it(r,"allowOthersToQuery",!0),supportsQueryGeometry:it(t,"supportsReturningQueryGeometry",!1),supportsResultType:it(i,"supportsQueryWithResultType",!1),supportsReturnMesh:!!R7e(t.infoFor3D),supportsSpatialAggregationStatistics:it(i,"supportsSpatialAggregationStatistics",!1),supportsSqlExpression:it(i,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:it(t,"useStandardizedQueries",!1),supportsStatistics:it(i,"supportsStatistics",t.supportsStatistics),supportsTopFeaturesQuery:it(i,"supportsTopFeaturesQuery",!1),supportsTrueCurve:it(i,"supportsTrueCurve",!1),tileMaxRecordCount:E1(t,"tileMaxRecordCount",void 0)}}function Z7e(t){const e=t.advancedQueryCapabilities,i=it(e,"supportsAdvancedQueryRelated",!1);return{supportsPagination:it(e,"supportsQueryRelatedPagination",!1),supportsCount:i,supportsOrderBy:i,supportsCacheHint:M2(e,"queryRelated")}}function J7e(t){return{supportsCacheHint:M2(t.advancedQueryCapabilities,"queryTopFilter")}}function Y7e(t){const e=t?t.queryBinsCapabilities:void 0;return{supportsDate:it(e,"supportsDateBin",!1),supportsFixedInterval:it(e,"supportsFixedIntervalBin",!1),supportsAutoInterval:it(e,"supportsAutoIntervalBin",!1),supportsFixedBoundaries:it(e,"supportsFixedBoundariesBin",!1),supportsStackBy:it(e,"supportsStackBy",!1),supportsSplitBy:it(e,"supportsSplitBy",!1),supportsSnapToData:it(e,"supportsSnapToData",!1),supportsReturnFullIntervalBin:it(e,"supportsReturnFullIntervalBin",!1),supportsFirstDayOfWeek:it(e,"supportsFirstDayOfWeek",!1),supportsNormalization:it(e,"supportsNormalization",!1),supportedStatistics:V7e(e),supportedNormalizationTypes:j7e(e)}}function X7e(t){const e=t.ownershipBasedAccessControlForFeatures,i=t?t.advancedEditingCapabilities:void 0;return{supportsGeometryUpdate:it(t,"allowGeometryUpdates",!0),supportsGlobalId:it(t,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:it(t,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:it(t,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:it(t,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:it(t,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:it(e,"allowAnonymousToDelete",!0),supportsDeleteByOthers:it(e,"allowOthersToDelete",!0),supportsUpdateByAnonymous:it(e,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:it(e,"allowOthersToUpdate",!0),supportsAsyncApplyEdits:it(i,"supportsAsyncApplyEdits",!1),zDefault:E1(t,"zDefault",void 0)}}function Dbt(t){var e;return{operations:{supportsAppend:it(t,"supportsAppend",!1),supportsCoverageQuery:((e=t==null?void 0:t.playbackInfo)==null?void 0:e.klv["0601"])??!1,supportsExportClip:it(t,"supportsExportClip",!1),supportsExportFrameset:it(t,"supportsExportFrameset",!1),supportsMensuration:it(t,"supportsMensuration",!1),supportsPreviews:it(t,"supportsPreviews",!1),supportsUpdate:it(t,"supportsUpdate",!1)}}}let lf=class extends bt.ClonableMixin(ve){constructor(e){super(e),this.code=null,this.defaultValues={},this.domains=null,this.name=null}readDomains(e){if(!e)return null;const i={};for(const r of Object.keys(e))i[r]=_N(e[r]);return i}writeDomains(e,i){var n;if(!e)return;const r={};for(const s of Object.keys(e))e[s]&&(r[s]=(n=e[s])==null?void 0:n.toJSON());i.domains=r}};u([h({type:Number,json:{write:!0}})],lf.prototype,"code",void 0),u([h({type:Object,json:{write:!0}})],lf.prototype,"defaultValues",void 0),u([h({json:{write:!0}})],lf.prototype,"domains",void 0),u([De("domains")],lf.prototype,"readDomains",null),u([Ve("domains")],lf.prototype,"writeDomains",null),u([h({type:String,json:{write:!0}})],lf.prototype,"name",void 0),lf=u([V("esri.layers.support.Subtype")],lf);const K7e=t=>{let e=class extends t{constructor(){super(...arguments),this.copyright=null,this.capabilities=null,this.dateFieldsTimeZone=null,this.datesInUnknownTimezone=!1,this.definitionExpression=null,this.displayField=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.fieldsIndex=null,this.floorInfo=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.globalIdField=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.indexes=new(Ze.ofType(Qd)),this.isTable=!1,this.layerId=void 0,this.maxScale=0,this.minScale=0,this.objectIdField=null,this.preferredTimeZone=null,this.relationships=null,this.returnM=void 0,this.returnZ=void 0,this.serviceDefinitionExpression=null,this.serviceItemId=null,this.sourceJSON=null,this.spatialReference=et.WGS84,this.subtypeField=null,this.subtypes=null,this.trackIdField=null,this.uniqueIdFields=null,this.version=void 0,this._isUrlHostModified=!1,this._isUrlHostModificationEnabled=!1}getFieldDomain(){throw new Error("Not implemented")}getField(i){return this.fieldsIndex.get(i)}get authenticationTriggerEvent(){if(!this.url)return null;const{capabilities:i}=this;if(i){const{query:n,operations:s,editing:o}=i;if(!n.supportsQueryByOthers||!n.supportsQueryByAnonymous||s.supportsEditing&&!(o.supportsUpdateByOthers&&o.supportsUpdateByAnonymous&&o.supportsDeleteByOthers&&o.supportsDeleteByAnonymous))return"load"}if(JO(this.serviceDefinitionExpression)||JO(this.definitionExpression))return"load";if(this.userHasUpdateItemPrivileges){if(I7e(this))return"load";if(this.hasUpdateItemRestrictions)return i.operations.supportsQuery?"editing":"load"}if(this.userHasFullEditingPrivileges&&this.hasFullEditingRestrictions)return"editing";const r=this.editFieldsInfo;return(r!=null&&r.creatorField||r!=null&&r.editorField)&&(i!=null&&i.operations.supportsEditing)?"editing":null}readCapabilitiesFromService(i,r){return bve(r,this.url)}readEditingInfo(i,r){const{editingInfo:n}=r;return n?{lastEditDate:n.lastEditDate!=null?new Date(n.lastEditDate):null}:null}get effectiveCapabilities(){const i=this.capabilities;if(!i)return null;const r=se(i),{operations:n,editing:s}=r;return ZL(this)?(this.userHasUpdateItemPrivileges&&(n.supportsQuery=!0),r):this.userHasUpdateItemPrivileges?(n.supportsAdd=n.supportsDelete=n.supportsEditing=n.supportsQuery=n.supportsUpdate=s.supportsDeleteByOthers=s.supportsGeometryUpdate=s.supportsUpdateByOthers=!0,r):(this.userHasFullEditingPrivileges&&n.supportsEditing&&(n.supportsAdd=n.supportsDelete=n.supportsUpdate=s.supportsGeometryUpdate=!0),r)}get effectiveEditingEnabled(){return!1}readGlobalIdFieldFromService(i,r){return lve(r)}get hasFullEditingRestrictions(){const i=this.capabilities;if(!i||ZL(this))return!1;const{operations:r,editing:n}=i;return r.supportsEditing&&!(r.supportsAdd&&r.supportsDelete&&r.supportsUpdate&&n.supportsGeometryUpdate)}get hasUpdateItemRestrictions(){const i=this.capabilities;if(!i)return!1;const{operations:r,editing:n}=i;return ZL(this)?!r.supportsQuery:!(r.supportsAdd&&r.supportsDelete&&r.supportsEditing&&r.supportsQuery&&r.supportsUpdate&&n.supportsDeleteByOthers&&n.supportsGeometryUpdate&&n.supportsUpdateByOthers)}readIsTableFromService(i,r){return r.type==="Table"}readMaxScale(i,r){return r.effectiveMaxScale||i||0}readMinScale(i,r){return r.effectiveMinScale||i||0}readObjectIdFieldFromService(i,r){return cve(r)}readServiceDefinitionExpression(i,r){return r.definitionQuery||r.definitionExpression}readUniqueIdFields(i,r){var n;return(n=r.uniqueIdInfo)!=null&&n.OIDFieldContainsHashValue?r.uniqueIdInfo.fields:null}set url(i){if(i==null)return void this._set("url",i);const r=UIe({layer:this,url:i,nonStandardUrlAllowed:!0,logger:Ie.getLogger(this)});this._set("url",r.url),r.layerId!=null&&this._set("layerId",r.layerId)}writeUrl(i,r,n,s){BIe(this,i,null,r,s)}readVersion(i,r){return v7e(r)}get isUrlHostModified(){var o;const{loaded:i,url:r,_isUrlHostModified:n}=this;if(n)return!0;if(!i||!r||this.originIdOf("url")<Nt.USER)return!1;const s=(o=this.sourceJSON)==null?void 0:o.preferredHost;if(!s||!ep(r,`https://${s}`,!0))return!1;for(let a=Nt.USER-1;a>=Nt.PORTAL_ITEM;a--){const l=this.getAtOrigin("url",GC(a));if(l)return!ep(r,l,!0)}return!1}applyPreferredHost(i){const{url:r,portalItem:n}=this;!r||vU(n)}applyHostFromPortalItem(){const{url:i,portalItem:r}=this;if(!i||this.originIdOf("url")===Nt.USER||!(r!=null&&r.url)||!vU(r)||!Xq(r,Kq.HOSTED_SERVICE)||ep(i,r.url,!0)||!this._isUrlHostModificationEnabled)return;const n=AIe(r.url);this._set("url",Pce(i,n)),this._isUrlHostModified=!0}};return u([h({readOnly:!0})],e.prototype,"authenticationTriggerEvent",null),u([h({type:String,json:{origins:{service:{read:{source:"copyrightText"}}}}})],e.prototype,"copyright",void 0),u([h({readOnly:!0,json:{read:!1,origins:{service:{read:{source:["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","isDataBranchVersioned","isDataVersioned","maxRecordCount","maxRecordCountFactor","maxUniqueIDCount","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"]}}}}})],e.prototype,"capabilities",void 0),u([De("service","capabilities")],e.prototype,"readCapabilitiesFromService",null),u([h(oO("dateFieldsTimeReference"))],e.prototype,"dateFieldsTimeZone",void 0),u([h({type:Boolean})],e.prototype,"datesInUnknownTimezone",void 0),u([h({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],e.prototype,"definitionExpression",void 0),u([h({type:String,json:{origins:{service:{read:{source:"displayField"}}}}})],e.prototype,"displayField",void 0),u([h({readOnly:!0,type:af})],e.prototype,"editFieldsInfo",void 0),u([h({readOnly:!0})],e.prototype,"editingInfo",void 0),u([De("editingInfo")],e.prototype,"readEditingInfo",null),u([h({readOnly:!0})],e.prototype,"effectiveCapabilities",null),u([h()],e.prototype,"effectiveEditingEnabled",null),u([h((()=>{const i=se(H8e),r=i.json.origins;return r["web-map"]={read:!1,write:!1},r["portal-item"]={read:!1,write:!1},i})())],e.prototype,"elevationInfo",void 0),u([h()],e.prototype,"fieldsIndex",void 0),u([h({type:T1,json:{name:"layerDefinition.floorInfo",write:{layerContainerTypes:pr}}})],e.prototype,"floorInfo",void 0),u([h({type:Qt,json:{origins:{service:{read:{source:"extent"}}}}})],e.prototype,"fullExtent",void 0),u([h()],e.prototype,"gdbVersion",void 0),u([h({readOnly:!0,type:$1,json:{read:{source:"geometryProperties"}}})],e.prototype,"geometryFieldsInfo",void 0),u([h({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:R8.read}}}})],e.prototype,"geometryType",void 0),u([h({type:String})],e.prototype,"globalIdField",void 0),u([De("service","globalIdField",["globalIdField","fields"])],e.prototype,"readGlobalIdFieldFromService",null),u([h({readOnly:!0})],e.prototype,"hasFullEditingRestrictions",null),u([h({type:Boolean,json:{origins:{service:{read:!0}}}})],e.prototype,"hasM",void 0),u([h({readOnly:!0})],e.prototype,"hasUpdateItemRestrictions",null),u([h({type:Boolean,json:{origins:{service:{read:!0}}}})],e.prototype,"hasZ",void 0),u([h({readOnly:!0,type:Xo})],e.prototype,"heightModelInfo",void 0),u([h({type:Date})],e.prototype,"historicMoment",void 0),u([h({type:Ze.ofType(Qd),readOnly:!0})],e.prototype,"indexes",void 0),u([h({readOnly:!0})],e.prototype,"isTable",void 0),u([De("service","isTable",["type"])],e.prototype,"readIsTableFromService",null),u([h({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{read:!1,write:{target:"id"}}},read:!1}})],e.prototype,"layerId",void 0),u([h(Y8e)],e.prototype,"maxScale",void 0),u([De("service","maxScale",["maxScale","effectiveMaxScale"])],e.prototype,"readMaxScale",null),u([h(J8e)],e.prototype,"minScale",void 0),u([De("service","minScale",["minScale","effectiveMinScale"])],e.prototype,"readMinScale",null),u([h({type:String})],e.prototype,"objectIdField",void 0),u([De("service","objectIdField",["objectIdField","fields"])],e.prototype,"readObjectIdFieldFromService",null),u([h(oO("preferredTimeReference"))],e.prototype,"preferredTimeZone",void 0),u([h({type:[bl],readOnly:!0})],e.prototype,"relationships",void 0),u([h({type:Boolean})],e.prototype,"returnM",void 0),u([h({type:Boolean})],e.prototype,"returnZ",void 0),u([h({readOnly:!0,json:{write:!1}})],e.prototype,"serverGens",void 0),u([h({readOnly:!0})],e.prototype,"serviceDefinitionExpression",void 0),u([De("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],e.prototype,"readServiceDefinitionExpression",null),u([h({type:String,readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],e.prototype,"serviceItemId",void 0),u([h()],e.prototype,"sourceJSON",void 0),u([h({type:et,json:{origins:{service:{read:{source:"extent.spatialReference"}}}}})],e.prototype,"spatialReference",void 0),u([h({type:String,readOnly:!0,json:{origins:{service:{read:!0}}}})],e.prototype,"subtypeField",void 0),u([h({type:[lf],readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],e.prototype,"subtypes",void 0),u([h({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],e.prototype,"trackIdField",void 0),u([h({type:[String],readOnly:!0})],e.prototype,"uniqueIdFields",void 0),u([De("service","uniqueIdFields",["uniqueIdInfo.OIDFieldContainsHashValue","uniqueIdInfo.fields"])],e.prototype,"readUniqueIdFields",null),u([h(G8e)],e.prototype,"url",null),u([Ve("url")],e.prototype,"writeUrl",null),u([h({json:{origins:{service:{read:!0}},read:!1}})],e.prototype,"version",void 0),u([De("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],e.prototype,"readVersion",null),u([h({readOnly:!0})],e.prototype,"isUrlHostModified",null),e=u([V("esri.layers.mixins.FeatureLayerBase")],e),e};let Hy=class extends bt.ClonableMixin(ve){constructor(e){super(e),this.expression=null,this.title=null,this.returnType=null}};u([h({type:String,json:{write:!0}})],Hy.prototype,"expression",void 0),u([h({type:String,json:{write:!0}})],Hy.prototype,"title",void 0),u([h({type:String,json:{write:!0}})],Hy.prototype,"returnType",void 0),Hy=u([V("esri.layers.support.ExpressionInfo")],Hy);var F8,TS;let _o=(TS=class extends ve{constructor(e){super(e),this.isAutoGenerated=!1,this.name=null,this.alias=null,this.onStatisticField=null,this.onStatisticExpression=null,this.statisticType=null}clone(){return new F8({name:this.name,alias:this.alias,isAutoGenerated:this.isAutoGenerated,onStatisticExpression:se(this.onStatisticExpression),onStatisticField:this.onStatisticField,statisticType:this.statisticType})}},F8=TS,TS);u([h({type:Boolean,json:{write:!0}})],_o.prototype,"isAutoGenerated",void 0),u([h({type:String,json:{write:!0}})],_o.prototype,"name",void 0),u([h({type:String,json:{write:!0}})],_o.prototype,"alias",void 0),u([h({type:String,json:{write:!0}})],_o.prototype,"onStatisticField",void 0),u([h({type:Hy,json:{write:!0}})],_o.prototype,"onStatisticExpression",void 0),u([h({type:String,json:{write:!0}})],_o.prototype,"statisticType",void 0),_o=F8=u([V("esri.layers.support.AggregateField")],_o);let _g=class extends ve{constructor(){super(...arguments),this.type=null}};u([h({type:["selection","cluster","binning"],readOnly:!0,json:{read:!1,write:!0}})],_g.prototype,"type",void 0),_g=u([V("esri.layers.support.FeatureReduction")],_g);const vH="__begin__",bH="__end__",Q7e=new RegExp(vH,"ig"),eGe=new RegExp(bH,"ig"),mie=new RegExp("^"+vH,"i"),yie=new RegExp(bH+"$","i"),YO='"',tGe=YO+" + ",iGe=" + "+YO;function rGe(t){return t.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function nGe(t){return t.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function wH(t){const e={expression:"",type:"none"};return t.labelExpressionInfo?t.labelExpressionInfo.value?(e.expression=t.labelExpressionInfo.value,e.type="conventional"):t.labelExpressionInfo.expression&&(e.expression=t.labelExpressionInfo.expression,e.type="arcade"):t.labelExpression!=null&&(e.expression=rGe(t.labelExpression),e.type="conventional"),e}function sGe(t){const e=wH(t);if(!e)return null;switch(e.type){case"conventional":return N8(e.expression);case"arcade":return e.expression}return null}function oGe(t){const e=wH(t);if(!e)return null;switch(e.type){case"conventional":return lGe(e.expression);case"arcade":return wve(e.expression)}return null}function N8(t){let e;return t?(e=Ja(t,(i=>vH+'$feature["'+i+'"]'+bH)),e=mie.test(e)?e.replace(mie,""):YO+e,e=yie.test(e)?e.replace(yie,""):e+YO,e=e.replaceAll(Q7e,tGe).replaceAll(eGe,iGe)):e='""',e}const aGe=/^\s*\{([^}]+)\}\s*$/i;function lGe(t){const e=t==null?void 0:t.match(aGe);return(e==null?void 0:e[1].trim())||null}const cGe=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*$/i,uGe=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,dGe=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(.+)(\1)\s*\));?\s*$/i;function wve(t){if(!t)return null;let e=cGe.exec(t)||uGe.exec(t);return e?e[1]||e[3]:(e=dGe.exec(t),e?e[2]:null)}var D8,ES;let wf=(ES=class extends ve{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(e,i){return i.value?N8(i.value):e}writeExpression(e,i,r){this.value!=null&&(e=N8(this.value)),e!=null&&(i[r]=e)}clone(){return new D8({expression:this.expression,title:this.title,value:this.value})}},D8=ES,ES);u([h({type:String,json:{write:{writerEnsuresNonNull:!0}}})],wf.prototype,"expression",void 0),u([De("expression",["expression","value"])],wf.prototype,"readExpression",null),u([Ve("expression")],wf.prototype,"writeExpression",null),u([h({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],wf.prototype,"title",void 0),u([h({json:{read:!1,write:!1}})],wf.prototype,"value",void 0),wf=D8=u([V("esri.layers.support.LabelExpressionInfo")],wf);var z8;const BP=new Gt({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function GP(t,e,i){return{enabled:!gU(i==null?void 0:i.layer)}}function _ve(t){var e;return!t||t.origin!=="service"&&((e=t.layer)==null?void 0:e.type)!=="map-image"}function hGe(t){return(t==null?void 0:t.type)==="map-image"}function xve(t){var e,i;return!!hGe(t)&&!!((i=(e=t.capabilities)==null?void 0:e.exportMap)!=null&&i.supportsArcadeExpressionForLabeling)}function pGe(t){return _ve(t)||xve(t==null?void 0:t.layer)}var IS;let Lt=(IS=class extends ve{static evaluateWhere(e,i){const r=(n,s,o)=>{switch(s){case"=":return n==o;case"<>":return n!=o;case">":return n>o;case">=":return n>=o;case"<":return n<o;case"<=":return n<=o}return!1};try{if(e==null)return!0;const n=e.split(" ");if(n.length===3)return r(i[n[0]],n[1],n[2]);if(n.length===7){const s=r(i[n[0]],n[1],n[2]),o=n[3],a=r(i[n[4]],n[5],n[6]);switch(o){case"AND":return s&&a;case"OR":return s||a}}return!1}catch{}}constructor(e){super(e),this.type="label",this.name=null,this.allowOverrun=!1,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition="curved",this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.repeatLabelDistance=null,this.symbol=N9e,this.useCodedValues=void 0,this.where=null}readLabelExpression(e,i){const r=i.labelExpressionInfo;if(!r||!r.value&&!r.expression)return e}writeLabelExpression(e,i,r){if(this.labelExpressionInfo){if(this.labelExpressionInfo.value!=null)e=nGe(this.labelExpressionInfo.value);else if(this.labelExpressionInfo.expression!=null){const n=wve(this.labelExpressionInfo.expression);n&&(e="["+n+"]")}}e!=null&&(i[r]=e)}writeLabelExpressionInfo(e,i,r,n){if(e==null&&this.labelExpression!=null&&_ve(n))e=new wf({expression:this.getLabelExpressionArcade()});else if(!e)return;const s=e.toJSON(n);s.expression&&(i[r]=s)}writeMaxScale(e,i){(e||this.minScale)&&(i.maxScale=e)}writeMinScale(e,i){(e||this.maxScale)&&(i.minScale=e)}getLabelExpression(){return wH(this)}getLabelExpressionArcade(){return sGe(this)}getLabelExpressionSingleField(){return oGe(this)}hash(){return JSON.stringify(this)}clone(){return new z8({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:se(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:se(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}},z8=IS,IS);u([h({type:String,json:{write:!0}})],Lt.prototype,"name",void 0),u([h({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1},"portal-item":{default:!1,write:{overridePolicy:GP}}}}})],Lt.prototype,"allowOverrun",void 0),u([h({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1},"portal-item":{default:"static",write:{overridePolicy:GP}}}}})],Lt.prototype,"deconflictionStrategy",void 0),u([h({type:String,json:{write:{overridePolicy(t,e,i){return this.labelExpressionInfo&&(i==null?void 0:i.origin)==="service"&&xve(i.layer)?{enabled:!1}:{allowNull:!0}}}}})],Lt.prototype,"labelExpression",void 0),u([De("labelExpression")],Lt.prototype,"readLabelExpression",null),u([Ve("labelExpression")],Lt.prototype,"writeLabelExpression",null),u([h({type:wf,json:{write:{overridePolicy:(t,e,i)=>pGe(i)?{allowNull:!0}:{enabled:!1}}}})],Lt.prototype,"labelExpressionInfo",void 0),u([Ve("labelExpressionInfo")],Lt.prototype,"writeLabelExpressionInfo",null),u([h({type:BP.apiValues,json:{type:BP.jsonValues,read:BP.read,write:BP.write}})],Lt.prototype,"labelPlacement",void 0),u([h({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],Lt.prototype,"labelPosition",void 0),u([h({type:Number})],Lt.prototype,"maxScale",void 0),u([Ve("maxScale")],Lt.prototype,"writeMaxScale",null),u([h({type:Number})],Lt.prototype,"minScale",void 0),u([Ve("minScale")],Lt.prototype,"writeMinScale",null),u([h({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:GP}}}}})],Lt.prototype,"repeatLabel",void 0),u([h({type:Number,cast:Ti,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:GP}}}}})],Lt.prototype,"repeatLabelDistance",void 0),u([h({types:LNe,json:{origins:{"web-scene":{types:RNe,write:iie,default:null}},write:iie,default:null}})],Lt.prototype,"symbol",void 0),u([h({type:Boolean,json:{write:!0}})],Lt.prototype,"useCodedValues",void 0),u([h({type:String,json:{write:!0}})],Lt.prototype,"where",void 0),Lt=z8=u([V("esri.layers.support.LabelClass")],Lt);var V8;let Ou=V8=class extends ve{constructor(t){super(t),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){var t;return new V8({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:((t=this.symbol)==null?void 0:t.clone())??null})}getMeshHash(){const t=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${t}`}};u([h({type:String,json:{write:!0}})],Ou.prototype,"description",void 0),u([h({type:String,json:{write:!0}})],Ou.prototype,"label",void 0),u([h({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],Ou.prototype,"minValue",void 0),u([h({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],Ou.prototype,"maxValue",void 0),u([h(uH)],Ou.prototype,"symbol",void 0),Ou=V8=u([V("esri.renderers.support.ClassBreakInfo")],Ou);var j8;const Sve="log",JL="percent-of-total",YL="field",qP=new Gt({esriNormalizeByLog:Sve,esriNormalizeByPercentOfTotal:JL,esriNormalizeByField:YL}),fGe=En(Ou);let Nn=j8=class extends H$(Ll){constructor(t){super(t),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(t,e,i){if(!Array.isArray(t))return;let r=e.minValue;return t.map((n=>{const s=new Ou;return s.read(n,i),s.minValue==null&&(s.minValue=r),s.maxValue==null&&(s.maxValue=s.minValue),r=s.maxValue,s}))}writeClassBreakInfos(t,e,i,r){const n=t.map((s=>s.write({},r)));this._areClassBreaksConsecutive()&&n.forEach((s=>delete s.classMinValue)),e[i]=n}castField(t){return t==null?t:typeof t=="function"?(Ie.getLogger(this).error(".field: field must be a string value"),null):l2(t)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let t=this._get("normalizationType");const e=!!this.normalizationField,i=this.normalizationTotal!=null;return e||i?(t=e&&YL||i&&JL||null,e&&i&&Ie.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):t!==YL&&t!==JL||(t=null),t}set normalizationType(t){this._set("normalizationType",t)}addClassBreakInfo(t,e,i){let r=null;r=typeof t=="number"?new Ou({minValue:t,maxValue:e,symbol:Bfe(i)}):fGe(se(t)),this.classBreakInfos.push(r),this.classBreakInfos.length===1&&this.notifyChange("minValue")}removeClassBreakInfo(t,e){const i=this.classBreakInfos.length;for(let r=0;r<i;r++){const n=[this.classBreakInfos[r].minValue,this.classBreakInfos[r].maxValue];if(n[0]===t&&n[1]===e){this.classBreakInfos.splice(r,1);break}}}getBreakIndex(t,e){return this.valueExpression&&(e==null?void 0:e.arcade)==null&&Ie.getLogger(this).warn(""),this.valueExpression?this._getBreakIndexForExpression(t,e):this._getBreakIndexForField(t)}async getClassBreakInfo(t,e){let i=e;this.valueExpression&&(e==null?void 0:e.arcade)==null&&(i={...i,arcade:await fp()});const r=this.getBreakIndex(t,i);return r!==-1?this.classBreakInfos[r]:null}getSymbol(t,e){if(this.valueExpression&&(e==null?void 0:e.arcade)==null)return void Ie.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this.getBreakIndex(t,e);return i>-1?this.classBreakInfos[i].symbol:this.defaultSymbol}async getSymbolAsync(t,e){let i=e;if(this.valueExpression&&(e==null?void 0:e.arcade)==null){const n=await fp(),{arcadeUtils:s}=n;s.hasGeometryOperations(this.valueExpression)&&await s.enableGeometryOperations(),i={...i,arcade:n}}const r=this.getBreakIndex(t,i);return r>-1?this.classBreakInfos[r].symbol:this.defaultSymbol}get symbols(){const t=[];return this.classBreakInfos.forEach((e=>{e.symbol&&t.push(e.symbol)})),this.defaultSymbol&&t.push(this.defaultSymbol),t}getAttributeHash(){var t;return((t=this.visualVariables)==null?void 0:t.reduce(((e,i)=>e+i.getAttributeHash()),""))??""}getMeshHash(){const t=JSON.stringify(this.backgroundFillSymbol),e=JSON.stringify(this.defaultSymbol),i=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${t}.${e}.${this.classBreakInfos.reduce(((r,n)=>r+n.getMeshHash()),"")}.${i}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){var t,e;return new j8({field:this.field,backgroundFillSymbol:(t=this.backgroundFillSymbol)==null?void 0:t.clone(),defaultLabel:this.defaultLabel,defaultSymbol:(e=this.defaultSymbol)==null?void 0:e.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:se(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:se(this.visualVariables),legendOptions:se(this.legendOptions),authoringInfo:se(this.authoringInfo)})}async collectRequiredFields(t,e){const i=[this.collectVVRequiredFields(t,e),this.collectSymbolFields(t,e)];await Promise.all(i)}async collectSymbolFields(t,e){const i=[...this.symbols.map((r=>r.collectRequiredFields(t,e))),io(t,e,this.valueExpression)];ca(t,e,this.field),ca(t,e,this.normalizationField),await Promise.all(i)}_getBreakIndexForExpression(t,e){const{viewingMode:i,scale:r,spatialReference:n,arcade:s,timeZone:o}=e??{},{valueExpression:a}=this;let l=this._compiledValueExpression.valueExpression===a?this._compiledValueExpression.compiledFunction:null;const c=s.arcadeUtils;if(!l){const f=c.createSyntaxTree(a);l=c.createFunction(f),this._compiledValueExpression.compiledFunction=l}this._compiledValueExpression.valueExpression=a;const d=c.executeFunction(l,c.createExecContext(t,c.getViewInfo({viewingMode:i,scale:r,spatialReference:n}),o));return this._getBreakIndexfromInfos(d)}_getBreakIndexForField(t){const e=this.field,i=t.attributes,r=this.normalizationType;let n=parseFloat(i[e]);if(r){const s=this.normalizationTotal,o=parseFloat(this.normalizationField?i[this.normalizationField]:void 0);if(r===Sve)n=Math.log(n)*Math.LOG10E;else if(r!==JL||s==null||isNaN(s)){if(r===YL&&!isNaN(o)){if(isNaN(n)||isNaN(o))return-1;n/=o}}else n=n/s*100}return this._getBreakIndexfromInfos(n)}_getBreakIndexfromInfos(t){const e=this.isMaxInclusive;if(t!=null&&typeof t=="number"&&!isNaN(t))for(let i=0;i<this.classBreakInfos.length;i++){const r=[this.classBreakInfos[i].minValue,this.classBreakInfos[i].maxValue];if(r[0]<=t&&(e?t<=r[1]:t<r[1]))return i}return-1}_areClassBreaksConsecutive(){const t=this.classBreakInfos,e=t.length;for(let i=1;i<e;i++)if(t[i-1].maxValue!==t[i].minValue)return!1;return!0}};u([h(dH)],Nn.prototype,"backgroundFillSymbol",void 0),u([h({type:[Ou],json:{write:{isRequired:!0}}})],Nn.prototype,"classBreakInfos",void 0),u([De("classBreakInfos")],Nn.prototype,"readClassBreakInfos",null),u([Ve("classBreakInfos")],Nn.prototype,"writeClassBreakInfos",null),u([h({type:String,json:{write:!0}})],Nn.prototype,"defaultLabel",void 0),u([h(VN)],Nn.prototype,"defaultSymbol",void 0),u([h({type:String,json:{write:!0}})],Nn.prototype,"field",void 0),u([yi("field")],Nn.prototype,"castField",null),u([h({type:Boolean})],Nn.prototype,"isMaxInclusive",void 0),u([h({type:hH,json:{write:!0}})],Nn.prototype,"legendOptions",void 0),u([h({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return this.classBreakInfos.length!==0&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],Nn.prototype,"minValue",null),u([h({type:String,json:{write:!0}})],Nn.prototype,"normalizationField",void 0),u([h({type:Number,json:{write:!0}})],Nn.prototype,"normalizationTotal",void 0),u([h({type:qP.apiValues,value:null,json:{type:qP.jsonValues,read:qP.read,write:qP.write}})],Nn.prototype,"normalizationType",null),u([at({classBreaks:"class-breaks"})],Nn.prototype,"type",void 0),u([h({type:String,json:{write:!0}})],Nn.prototype,"valueExpression",void 0),u([h({type:String,json:{write:!0}})],Nn.prototype,"valueExpressionTitle",void 0),Nn=j8=u([V("esri.renderers.ClassBreaksRenderer")],Nn);const U8=-3,mGe=U8-1;var _f;(function(t){t[t.ALL=0]="ALL",t[t.SOME=1]="SOME"})(_f||(_f={}));let yGe=class{get size(){return this._size}constructor(e=10485760){this._maxSize=e,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._users=new Map,this._sizeLimits=new Map}destroy(){this.clearAll(),this._sizeLimits.clear(),this._users.clear()}register(e){this._users.set(e.id.slice(0,-1),e)}deregister(e){this.clear(e),this._sizeLimits.delete(e),this._users.delete(e.id.slice(0,-1))}get maxSize(){return this._maxSize}set maxSize(e){this._maxSize=Math.max(e,-1),this._checkSize()}getSize(e,i){const r=this._db.get(e.id+i);return(r==null?void 0:r.size)??0}put(e,i,r,n,s){i=e.id+i;const o=this._db.get(i);if(o&&(this._size-=o.size,e.size-=o.size,this._db.delete(i),o.entry!==r&&this._notifyRemove(i,o.entry,o.size,_f.ALL)),n>this._maxSize)return void this._notifyRemove(i,r,n,_f.ALL);if(r===void 0)return void console.warn("Refusing to cache undefined entry ");if(!n||n<0)return console.warn(`Refusing to cache entry with size ${n} for key ${i}`),void this._notifyRemove(i,r,0,_f.ALL);const a=1+Math.max(s,mGe)-U8;this._db.set(i,new gGe(r,n,a)),this._size+=n,e.size+=n,this._checkSize()}updateSize(e,i,r,n){i=e.id+i;const s=this._db.get(i);if(s&&s.entry===r){for(this._size-=s.size,e.size-=s.size;n>this._maxSize;){const o=this._notifyRemove(i,r,n,_f.SOME);if(!(o!=null&&o>0))return void this._db.delete(i);n=o}s.size=n,this._size+=n,e.size+=n,this._checkSize()}}pop(e,i){i=e.id+i;const r=this._db.get(i);if(r)return this._size-=r.size,e.size-=r.size,this._db.delete(i),++this._hit,r.entry;++this._miss}get(e,i){i=e.id+i;const r=this._db.get(i);if(r!==void 0)return this._db.delete(i),r.lives=r.lifetime,this._db.set(i,r),++this._hit,r.entry;++this._miss}peek(e,i){const r=this._db.get(e.id+i);return r?++this._hit:++this._miss,r==null?void 0:r.entry}get performanceInfo(){const e={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},i={},r=new Array;this._db.forEach(((o,a)=>{const l=o.lifetime;r[l]=(r[l]||0)+o.size,this._users.forEach((c=>{const{id:d,name:f}=c;if(a.startsWith(d)){const y=i[f]||0;i[f]=y+o.size}}))}));const n={};this._users.forEach((o=>{const a=o.name;if("hitRate"in o&&typeof o.hitRate=="number"&&!isNaN(o.hitRate)&&o.hitRate>0){const l=i[a]||0;i[a]=l,n[a]=Math.round(100*o.hitRate)+"%"}else n[a]="0%"}));const s=Object.keys(i);s.sort(((o,a)=>i[a]-i[o])),s.forEach((o=>e[o]=Math.round(i[o]/2**20)+"MB / "+n[o]));for(let o=r.length-1;o>=0;--o){const a=r[o];a&&(e["Priority "+(o+U8-1)]=Math.round(a/this._size*100)+"%")}return e}resetStats(){this._hit=this._miss=0,this._users.forEach((e=>e.resetHitRate()))}clear(e){const i=e.id;this._db.forEach(((r,n)=>{n.startsWith(i)&&(this._size-=r.size,this._db.delete(n),this._notifyRemove(n,r.entry,r.size,_f.ALL))})),e.size=0}clearAll(){this._db.forEach(((e,i)=>this._notifyRemove(i,e.entry,e.size,_f.ALL))),this._users.forEach((e=>e.size=0)),this._size=0,this._db.clear()}*values(e){for(const[i,r]of this._db)i.startsWith(e.id)&&(yield r.entry)}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(e,i,r,n){var a;const s=(a=this._users.get(e.split(P4)[0]))==null?void 0:a.removeFunc,o=s==null?void 0:s(i,n,r);return typeof o=="number"?o:null}_checkSize(){this._sizeLimits.forEach(((e,i)=>this._checkSizeLimits(e,i))),this._checkSizeLimits(this.maxSize)}setMaxSize(e,i){i==null||i<=0?this._sizeLimits.delete(e):this._sizeLimits.set(e,i)}_checkSizeLimits(e,i){const r=i??this;if(r.size<=e)return;const n=i==null?void 0:i.id;let s=!0;for(;s;){s=!1;for(const[o,a]of this._db)if(a.lifetime===0&&(!n||o.startsWith(n))){const l=i??this._users.get(o.split(P4)[0]);if(this._purgeItem(o,a,l),r.size<=.9*e)return;s||(s=this._db.has(o))}}for(const[o,a]of this._db)if(!n||o.startsWith(n)){const l=i??this._users.get(o.split(P4)[0]);if(this._purgeItem(o,a,l),r.size<=.9*e)return}}_purgeItem(e,i,r){if(this._db.delete(e),i.lives<=1){this._size-=i.size,r&&(r.size-=i.size);const n=this._notifyRemove(e,i.entry,i.size,_f.SOME);n!=null&&n>0&&(this._size+=n,r&&(r.size+=n),i.lives=i.lifetime,i.size=n,this._db.set(e,i))}else--i.lives,this._db.set(e,i)}},gGe=class{constructor(e,i,r){this.entry=e,this.size=i,this.lifetime=r,this.lives=r}};const P4=":";let $ve=class{constructor(e,i){this.removeFunc=i,this._storage=new yGe,this.id="",this.name="",this.size=0,this._storage.maxSize=e,this._storage.register(this)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(e,i,r=1){this._storage.put(this,e,i,r,1)}pop(e){return this._storage.pop(this,e)}get(e){return this._storage.get(this,e)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(e){this._storage.maxSize=e}resetHitRate(){}},gie=class Tve{static parse(e,i,r){const n=[],s=[],o=e.split(";");for(let a=0;a<o.length;a++){const l=o[a];if(l){if(l.includes("po:")){const c=l.slice(3).split("|");if(c.length===3){const[d,f,y]=c,g=bGe(d,f,y);g&&s.push(g)}}else if(l.includes("|")){for(const c of l.split("|"))if(i.has(c)){n.push(c);break}}else if(i.has(l))n.push(l);else if(a===0){n.length=0,n.push(wGe(r));break}}}return new Tve(n,s)}constructor(e,i){this.partNames=e,this.overrides=i}};function vGe(t,e){if(t==="DashTemplate")return e.split(" ").map((i=>Number(i)));if(t==="Color"){const i=new _e(e).toRgba();return[i[0],i[1],i[2],255*i[3]]}return Number(e)}function bGe(t,e,i){return{primitiveName:t,propertyName:e,value:vGe(e,i),defaultValue:null}}function wGe(t){switch(t){case"esriGeometryPolyline":return"Invalid_L";case"esriGeometryPolygon":return"Invalid_A";default:return"Invalid_P"}}var CS;let hh=(CS=class{},CS.instance=new Xa("Etc/UTC"),CS);function _Ge(t){return t instanceof _w?t===hh.instance:(t==null?void 0:t.toString().toLowerCase())==="unknown"}function qbt(t){return _Ge(t)?hh.instance:t}function xGe(t){return"timeZone"in t}function SGe(t){return"timeZone"in t}function $Ge(t){return"dateFieldsTimeZone"in t}const TGe=new Map;let hM=class XL{static fromJSON(e){return new XL(e.fields,e.timeZoneByFieldName)}static fromLayer(e){return new XL(e.fields??[],bie(e))}static fromLayerJSON(e){return new XL(e.fields??[],bie(e))}constructor(e=[],i){var n;this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=e||[],this._timeZoneByFieldName=i?new Map(i):null;const r=[];for(const s of this.fields){const o=s==null?void 0:s.name,a=vie(o);if(o&&a){const l=X0(o);this._fieldsMap.set(o,s),this._fieldsMap.set(l,s),this._normalizedFieldsMap.set(a,s),r.push(`${l}:${s.type}:${(n=this._timeZoneByFieldName)==null?void 0:n.get(o)}`),_q(s)?(this.dateFields.push(s),this._dateFieldsSet.add(s)):wq(s)&&(this._numericFieldsSet.add(s),this.numericFields.push(s)),UK(s)||BK(s)||(s.editable=s.editable==null||!!s.editable,s.nullable=s.nullable==null||!!s.nullable)}}r.sort(),this.uid=r.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const e of this.fields)UK(e)||BK(e)||e.nullable||mFe(e)!==void 0||this._requiredFields.push(e)}return this._requiredFields}equals(e){return this.uid===(e==null?void 0:e.uid)}has(e){return this.get(e)!=null}get(e){if(!e)return;let i=this._fieldsMap.get(e);return i||(i=this._fieldsMap.get(X0(e))??this._normalizedFieldsMap.get(vie(e)),i&&this._fieldsMap.set(e,i),i)}getTimeZone(e){const i=this.get(e&&typeof e!="string"?e.name:e);return i?this._timeZoneByFieldName?this._timeZoneByFieldName.get(i.name):i.type==="date"||i.type==="esriFieldTypeDate"?(Ie.getLogger("esri.layers.support.FieldsIndex").errorOnce(new ie("getTimeZone:no-timezone-information",`no time zone information for field '${i.name}'`)),pp):Eve.has(i.type)?Lg:null:null}getLuxonTimeZone(e){const i=this.getTimeZone(e);return i?i===Lg?hh.instance:i===pp?Qn.utcInstance:lm(TGe,i,(()=>Xa.create(i))):null}isDateField(e){return this._dateFieldsSet.has(this.get(e))}isTimeOnlyField(e){return xq(this.get(e))}isNumericField(e){return this._numericFieldsSet.has(this.get(e))}normalizeFieldName(e){var i;return((i=this.get(e))==null?void 0:i.name)??void 0}toJSON(){return{fields:this.fields.map((e=>qC(e)?e.toJSON():e)),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}};function X0(t){return t.trim().toLowerCase()}function vie(t){var e;return((e=tFe(t))==null?void 0:e.toLowerCase())??""}const Eve=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function bie(t){const e=new Map;if(!t.fields)return e;const i=t.datesInUnknownTimezone===!0,{timeInfo:r,editFieldsInfo:n}=t,s=(r?"startField"in r?r.startField:r.startTimeField:"")??"",o=(r?"endField"in r?r.endField:r.endTimeField:"")??"",a=$Ge(t)?t.dateFieldsTimeZone??null:t.dateFieldsTimeReference?eL(t.dateFieldsTimeReference):null,l=n?xGe(n)?n.timeZone??a:n.dateFieldsTimeReference?eL(n.dateFieldsTimeReference):a??pp:null,c=r?SGe(r)?r.timeZone??a:r.timeReference?eL(r.timeReference):a:null,d=new Map([[X0((n==null?void 0:n.creationDateField)??""),l],[X0((n==null?void 0:n.editDateField)??""),l],[X0(s),c],[X0(o),c]]);for(const{name:f,type:y}of t.fields)if(Eve.has(y))e.set(f,Lg);else if(y!=="date"&&y!=="esriFieldTypeDate")e.set(f,null);else if(i)e.set(f,Lg);else{const g=d.get(X0(f??""))??a;e.set(f,g)}return e}var ei;(function(t){t.AsyncNotEnabled="AsyncNotEnabled",t.ModulesNotSupported="ModulesNotSupported",t.CircularModules="CircularModules",t.CannotCompareDateAndTime="CannotCompareDateAndTime",t.NeverReach="NeverReach",t.UnsupportedHashType="UnsupportedHashType",t.InvalidParameter="InvalidParameter",t.FeatureSetDoesNotHaveSubtypes="FeatureSetDoesNotHaveSubtypes",t.UnexpectedToken="UnexpectedToken",t.Unrecognized="Unrecognized",t.UnrecognizedType="UnrecognizedType",t.MaximumCallDepth="MaximumCallDepth",t.BooleanConditionRequired="BooleanConditionRequired",t.TypeNotAllowedInFeature="TypeNotAllowedInFeature",t.KeyMustBeString="KeyMustBeString",t.WrongNumberOfParameters="WrongNumberOfParameters",t.CallNonFunction="CallNonFunction",t.NoFunctionInTemplateLiteral="NoFunctionInTemplateLiteral",t.NoFunctionInDictionary="NoFunctionInDictionary",t.NoFunctionInArray="NoFunctionInArray",t.AssignModuleFunction="AssignModuleFunction",t.LogicExpressionOrAnd="LogicExpressionOrAnd",t.LogicalExpressionOnlyBoolean="LogicalExpressionOnlyBoolean",t.FunctionNotFound="FunctionNotFound",t.InvalidMemberAccessKey="InvalidMemberAccessKey",t.UnsupportedUnaryOperator="UnsupportUnaryOperator",t.InvalidIdentifier="InvalidIdentifier",t.MemberOfNull="MemberOfNull",t.UnsupportedOperator="UnsupportedOperator",t.Cancelled="Cancelled",t.ModuleAccessorMustBeString="ModuleAccessorMustBeString",t.ModuleExportNotFound="ModuleExportNotFound",t.Immutable="Immutable",t.OutOfBounds="OutOfBounds",t.IllegalResult="IllegalResult",t.FieldNotFound="FieldNotFound",t.PortalRequired="PortalRequired",t.LogicError="LogicError",t.ArrayAccessorMustBeNumber="ArrayAccessMustBeNumber",t.KeyAccessorMustBeString="KeyAccessorMustBeString",t.WrongSpatialReference="WrongSpatialReference",t.CannotChangeTimeZoneTime="CannotChangeTimeZoneTime",t.CannotChangeTimeZoneDateOnly="CannotChangeTimeZoneDateOnly"})(ei||(ei={}));const Ive={[ei.TypeNotAllowedInFeature]:"Feature attributes only support dates, numbers, strings, guids.",[ei.LogicError]:"Logic error - {reason}",[ei.CannotCompareDateAndTime]:"Cannot compare date or dateonly with timeonly types",[ei.NeverReach]:"Encountered unreachable logic",[ei.AsyncNotEnabled]:"Async Arcade must be enabled for this script",[ei.ModuleAccessorMustBeString]:"Module accessor must be a string",[ei.ModuleExportNotFound]:"Module has no export with provided identifier",[ei.ModulesNotSupported]:"Current profile does not support modules",[ei.ArrayAccessorMustBeNumber]:"Array accessor must be a number",[ei.FunctionNotFound]:"Function not found",[ei.FieldNotFound]:"Key not found - {key}",[ei.CircularModules]:"Circular module dependencies are not allowed",[ei.Cancelled]:"Execution cancelled",[ei.UnsupportedHashType]:"Type not supported in hash function",[ei.IllegalResult]:"Value is not a supported return type",[ei.PortalRequired]:"Portal is required",[ei.InvalidParameter]:"Invalid parameter",[ei.WrongNumberOfParameters]:"Call with wrong number of parameters",[ei.Unrecognized]:"Unrecognized code structure",[ei.UnrecognizedType]:"Unrecognized type",[ei.WrongSpatialReference]:"Cannot work with geometry in this spatial reference. It is different to the execution spatial reference",[ei.BooleanConditionRequired]:"Conditions must use booleans",[ei.NoFunctionInDictionary]:"Dictionaries cannot contain functions.",[ei.NoFunctionInArray]:"Arrays cannot contain functions.",[ei.NoFunctionInTemplateLiteral]:"Template Literals do not expect functions by value.",[ei.KeyAccessorMustBeString]:"Accessor must be a string",[ei.KeyMustBeString]:"Object keys must be a string",[ei.Immutable]:"Object is immutable",[ei.UnexpectedToken]:"Unexpected token",[ei.MemberOfNull]:"Cannot access property of null object",[ei.MaximumCallDepth]:"Exceeded maximum function depth",[ei.OutOfBounds]:"Out of bounds",[ei.InvalidIdentifier]:"Identifier not recognized",[ei.CallNonFunction]:"Expression is not a function",[ei.InvalidMemberAccessKey]:"Cannot access value using a key of this type",[ei.AssignModuleFunction]:"Cannot assign function to module variable",[ei.UnsupportedUnaryOperator]:"Unsupported unary operator",[ei.UnsupportedOperator]:"Unsupported operator",[ei.LogicalExpressionOnlyBoolean]:"Logical expressions must be boolean",[ei.LogicExpressionOrAnd]:"Logical expression can only be combined with || or &&",[ei.CannotChangeTimeZoneTime]:"Cannot change the timezone of a Time",[ei.CannotChangeTimeZoneDateOnly]:"Cannot change the timezone of a DateOnly",[ei.FeatureSetDoesNotHaveSubtypes]:"FeatureSet does not have subtypes"};let EGe=class extends Error{constructor(...e){super(...e)}},wie=class Cve extends EGe{constructor(e,i){super(_H(i)+e.message,{cause:e}),this.loc=null,Error.captureStackTrace&&Error.captureStackTrace(this,Cve),i!=null&&i.loc&&(this.loc=i.loc)}},IGe=class Mve extends Error{constructor(e,i,r,n){super("Execution error - "+_H(r)+Ja(Ive[i],n)),this.loc=null,this.declaredRootClass="esri.arcade.arcadeexecutionerror",Error.captureStackTrace&&Error.captureStackTrace(this,Mve),r!=null&&r.loc&&(this.loc=r.loc)}};function _H(t){var e,i;return t&&t.loc?`Line : ${(e=t.loc.start)==null?void 0:e.line}, ${(i=t.loc.start)==null?void 0:i.column}: `:""}let Wbt=class kve extends Error{constructor(e,i,r,n){super("Compilation error - "+_H(r)+Ja(Ive[i],n)),this.loc=null,this.declaredRootClass="esri.arcade.arcadecompilationerror",Error.captureStackTrace&&Error.captureStackTrace(this,kve),r!=null&&r.loc&&(this.loc=r.loc)}},Zbt=class Pve extends Error{constructor(){super("Uncompilable code structures"),this.declaredRootClass="esri.arcade.arcadeuncompilableerror",Error.captureStackTrace&&Error.captureStackTrace(this,Pve)}};function Jbt(t,e,i){return i.declaredRootClass==="esri.arcade.arcadeexecutionerror"||i.declaredRootClass==="esri.arcade.arcadecompilationerror"?i.loc===null&&(e!=null&&e.loc)?new wie(i,{cause:i}):i:(i.declaredRootClass==="esri.arcade.featureset.support.featureseterror"||i.declaredRootClass==="esri.arcade.featureset.support.sqlerror"||i.declaredRootClass,e!=null&&e.loc?new wie(i,{cause:i}):i)}var XO;(function(t){t.UnrecognizedUri="UnrecognizedUri",t.UnsupportedUriProtocol="UnsupportedUriProtocol"})(XO||(XO={}));const CGe={[XO.UnrecognizedUri]:"Unrecognized uri - {uri}",[XO.UnsupportedUriProtocol]:"Unrecognized uri protocol"};let Ybt=class Ave extends Error{constructor(e,i){super(Ja(CGe[e],i)),this.declaredRootClass="esri.arcade.arcademoduleerror",Error.captureStackTrace&&Error.captureStackTrace(this,Ave)}};function KL(t){return t.toLowerCase().replaceAll(/[\s-]+/g,"")}let Xbt=class{constructor(e,i){const r=new Map;for(const n of e){const s=KL(n);if(r.has(s))throw new Error(`${n} already added as ${r.get(s)}`);r.set(s,n)}if(i!=null)for(const[n,s]of i){const o=KL(n);if(r.has(o))throw new Error(`${n} already associated with ${r.get(o)}`);r.set(o,s)}this._enumMap=r}lookup(e){return this._enumMap.get(KL(e))}get(e){const i=this.lookup(e);if(i==null)throw new IGe(null,ei.InvalidParameter,null);return i}};var KO;(function(t){t.TimeZoneNotRecognized="TimeZoneNotRecognized"})(KO||(KO={}));const MGe={[KO.TimeZoneNotRecognized]:"Timezone identifier has not been recognized."};let kGe=class Lve extends Error{constructor(e,i){super(Ja(MGe[e],i)),this.declaredRootClass="esri.arcade.arcadedate.dateerror",Error.captureStackTrace&&Error.captureStackTrace(this,Lve)}};function T_(t,e,i){return t<e?t-e:t>i?t-i:0}function E_(t,e,i){return t<e?e:t>i?i:t}let Jh=class On{constructor(e){this._date=e,this.declaredRootClass="esri.arcade.arcadedate"}static fromParts(e=0,i=1,r=1,n=0,s=0,o=0,a=0,l){if(isNaN(e)||isNaN(i)||isNaN(r)||isNaN(n)||isNaN(s)||isNaN(o)||isNaN(a))return null;const c=nt.local(e,i).daysInMonth;let d=nt.fromObject({day:E_(r,1,c),year:e,month:E_(i,1,12),hour:E_(n,0,23),minute:E_(s,0,59),second:E_(o,0,59),millisecond:E_(a,0,999)},{zone:ih(l)});return d=d.plus({months:T_(i,1,12),days:T_(r,1,c),hours:T_(n,0,23),minutes:T_(s,0,59),seconds:T_(o,0,59),milliseconds:T_(a,0,999)}),new On(d)}static get systemTimeZoneCanonicalName(){return Intl.DateTimeFormat().resolvedOptions().timeZone??"system"}static arcadeDateAndZoneToArcadeDate(e,i){const r=ih(i);return e.isUnknownTimeZone||r===hh.instance?On.fromParts(e.year,e.monthJS+1,e.day,e.hour,e.minute,e.second,e.millisecond,r):new On(e._date.setZone(r))}static dateJSToArcadeDate(e){return new On(nt.fromJSDate(e,{zone:"system"}))}static dateJSAndZoneToArcadeDate(e,i="system"){const r=ih(i);return new On(nt.fromJSDate(e,{zone:r}))}static unknownEpochToArcadeDate(e){return new On(nt.fromMillis(e,{zone:hh.instance}))}static unknownDateJSToArcadeDate(e){return new On(nt.fromMillis(e.getTime(),{zone:hh.instance}))}static epochToArcadeDate(e,i="system"){const r=ih(i);return new On(nt.fromMillis(e,{zone:r}))}static dateTimeToArcadeDate(e){return new On(e)}clone(){return new On(this._date)}changeTimeZone(e){const i=ih(e);return On.dateTimeToArcadeDate(this._date.setZone(i))}static dateTimeAndZoneToArcadeDate(e,i){const r=ih(i);return e.zone===hh.instance||r===hh.instance?On.fromParts(e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond,r):new On(e.setZone(r))}static nowToArcadeDate(e){const i=ih(e);return new On(nt.fromJSDate(new Date,{zone:i}))}static nowUTCToArcadeDate(){return new On(nt.utc())}get isSystem(){return this.timeZone==="system"||this.timeZone===On.systemTimeZoneCanonicalName}equals(e){return this.isSystem&&e.isSystem?this.toNumber()===e.toNumber():this.isUnknownTimeZone===e.isUnknownTimeZone&&this._date.equals(e._date)}get isUnknownTimeZone(){return this._date.zone===hh.instance}get isValid(){return this._date.isValid}get hour(){return this._date.hour}get second(){return this._date.second}get day(){return this._date.day}get dayOfWeekISO(){return this._date.weekday}get dayOfWeekJS(){let e=this._date.weekday;return e>6&&(e=0),e}get millisecond(){return this._date.millisecond}get monthISO(){return this._date.month}get weekISO(){return this._date.weekNumber}get yearISO(){return this._date.weekYear}get monthJS(){return this._date.month-1}get year(){return this._date.year}get minute(){return this._date.minute}get zone(){return this._date.zone}get timeZoneOffset(){return this.isUnknownTimeZone?0:this._date.offset}get timeZone(){if(this.isUnknownTimeZone)return"unknown";if(this._date.zone.type==="system")return"system";const e=this.zone;return e.type==="fixed"?e.fixed===0?"UTC":e.formatOffset(0,"short"):e.name}stringify(){return JSON.stringify(this.toJSDate())}plus(e){return new On(this._date.plus(e))}diff(e,i){return this._date.diff(e._date,i)[i]}toISODate(){return this._date.toISODate()}toISOString(e){return e?this._date.toISO({suppressMilliseconds:!0,includeOffset:!this.isUnknownTimeZone}):this._date.toISO({includeOffset:!this.isUnknownTimeZone})}toISOTime(e,i){return this._date.toISOTime({suppressMilliseconds:e,includeOffset:i&&!this.isUnknownTimeZone})}toFormat(e,i){return this.isUnknownTimeZone&&(e=e.replaceAll("Z","")),this._date.toFormat(e,i)}toJSDate(){return this._date.toJSDate()}toSQLValue(){return this._date.toFormat("yyyy-LL-dd HH:mm:ss")}toSQLWithKeyword(){return`timestamp '${this.toSQLValue()}'`}toDateTime(){return this._date}toNumber(){return this._date.toMillis()}getTime(){return this._date.toMillis()}toUTC(){return new On(this._date.toUTC())}toLocal(){return new On(this._date.toLocal())}toString(){return this.toISOString(!0)}static fromReaderAsTimeStampOffset(e){if(!e)return null;const i=nt.fromISO(e,{setZone:!0});return new On(i)}};function ih(t,e=!0){if(t instanceof _w)return t;switch(KL(t)){case"system":return"system";case"utc":return"UTC";case"unknown":return hh.instance}if(/^[+-]?[0-9]{1,2}([:][0-9]{2})?$/.test(t)){const r=Qn.parseSpecifier("UTC"+(t.startsWith("+")||t.startsWith("-")?"":"+")+t);if(r)return r}const i=Xa.create(t);if(!i.isValid){if(e)throw new kGe(KO.TimeZoneNotRecognized);return null}return i}function _ie(t){t=t.replaceAll(/LTS|LT|L{1,4}|l{1,4}/g,"[$&]");let e="";const i=/(\[[^[]*\])|(\\)?([Hh]mm(ss)?|Mo|M{1,4}|Do|DDDo|D{1,4}|d{2,4}|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;for(const r of t.match(i)||[])switch(r){case"D":e+="d";break;case"DD":e+="dd";break;case"DDD":e+="o";break;case"d":e+="c";break;case"ddd":e+="ccc";break;case"dddd":e+="cccc";break;case"M":e+="L";break;case"MM":e+="LL";break;case"MMM":e+="LLL";break;case"MMMM":e+="LLLL";break;case"YY":e+="yy";break;case"Y":case"YYYY":e+="yyyy";break;case"Q":e+="q";break;case"X":case"x":e+=r;break;default:r.length>=2&&r.slice(0,1)==="["&&r.slice(-1)==="]"?e+=`'${r.slice(1,-1)}'`:e+=`'${r}'`}return e}const xie="esri.core.sql.dateonly";let Rve=class wl{constructor(e,i,r){this._year=e,this._month=i,this._day=r,this.declaredRootClass=xie}static isDateOnly(e){return typeof e=="object"&&e!=null&&"declaredRootClass"in e&&e.declaredRootClass===xie}get month(){return this._month}get monthJS(){return this._month-1}get year(){return this._year}get day(){return this._day}get isValid(){return this.toDateTime("unknown").isValid}equals(e){return wl.isDateOnly(e)&&e.day===this.day&&e.month===this.month&&e.year===this.year}clone(){return new wl(this._year,this._month,this._day)}toDateTime(e){return nt.fromObject({day:this.day,month:this.month,year:this.year},{zone:ih(e)})}toDateTimeLuxon(e){return nt.fromObject({day:this.day,month:this.month,year:this.year},{zone:ih(e)})}toString(){return`${this.year.toString().padStart(4,"0")}-${this.month.toString().padStart(2,"0")}-${this.day.toString().padStart(2,"0")}`}toFormat(e=null,i=!0){if(e===null||e==="")return this.toString();if(i&&(e=_ie(e)),!e)return"";const r=this.toDateTime("unknown");return Jh.dateTimeToArcadeDate(r).toFormat(e,{locale:Wa(),numberingSystem:"latn"})}toArcadeDate(){const e=this.toDateTime("unknown");return Jh.dateTimeToArcadeDate(e)}toNumber(){return this.toDateTime("unknown").toMillis()}toJSDate(){return this.toDateTime("unknown").toJSDate()}toStorageFormat(){return this.toFormat("yyyy-LL-dd",!1)}toSQLValue(){return this.toFormat("yyyy-LL-dd",!1)}toSQLWithKeyword(){return"date '"+this.toFormat("yyyy-LL-dd",!1)+"'"}plus(e,i){return wl.fromDateTime(this.toUTCDateTime().plus({[e]:i}))}toUTCDateTime(){return nt.utc(this.year,this.month,this.day,0,0,0,0)}difference(e,i){switch(i.toLowerCase()){case"days":case"day":case"d":return this.toUTCDateTime().diff(e.toUTCDateTime(),"days").days;case"months":case"month":return this.toUTCDateTime().diff(e.toUTCDateTime(),"months").months;case"minutes":case"minute":case"m":return i==="M"?this.toUTCDateTime().diff(e.toUTCDateTime(),"months").months:this.toUTCDateTime().diff(e.toUTCDateTime(),"minutes").minutes;case"seconds":case"second":case"s":return this.toUTCDateTime().diff(e.toUTCDateTime(),"seconds").seconds;case"milliseconds":case"millisecond":case"ms":default:return this.toUTCDateTime().diff(e.toUTCDateTime(),"milliseconds").milliseconds;case"hours":case"hour":case"h":return this.toUTCDateTime().diff(e.toUTCDateTime(),"hours").hours;case"years":case"year":case"y":return this.toUTCDateTime().diff(e.toUTCDateTime(),"years").years}}static fromMilliseconds(e){const i=nt.fromMillis(e,{zone:Qn.utcInstance});return i.isValid?wl.fromParts(i.year,i.month,i.day):null}static fromSeconds(e){const i=nt.fromSeconds(e,{zone:Qn.utcInstance});return i.isValid?wl.fromParts(i.year,i.month,i.day):null}static fromReader(e){if(!e)return null;const i=e.split("-");return i.length!==3?null:new wl(parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10))}static fromParts(e,i,r){const n=new wl(e,i,r);return n.isValid===!1?null:n}static fromDateJS(e){return wl.fromParts(e.getFullYear(),e.getMonth()+1,e.getDay())}static fromDateTime(e){return wl.fromParts(e.year,e.month,e.day)}static fromSqlTimeStampOffset(e){return this.fromDateTime(e.toDateTime())}static fromString(e,i=null){if(e===""||e===null)return null;const r=[];if(i)(i=_ie(i))&&r.push(i);else if(i===null||i===""){const n=nt.fromISO(e,{setZone:!0});return n.isValid?wl.fromParts(n.year,n.month,n.day):null}for(const n of r){const s=nt.fromFormat(e,i??n);if(s.isValid)return new wl(s.year,s.month,s.day)}return null}static fromNow(e="system"){const i=nt.fromJSDate(new Date).setZone(ih(e));return new wl(i.year,i.month,i.day)}};function Qbt(t){if(t==null)return null;switch(t.type){case"polygon":case"multipoint":case"polyline":return t.extent;case"point":return new Qt({xmin:t.x,ymin:t.y,xmax:t.x,ymax:t.y,spatialReference:t.spatialReference});case"extent":return t}return null}function ewt(t){if(t==null)return null;const e=t.clone();return t.cache._geVersion!==void 0&&(e.cache._geVersion=t.cache._geVersion),e}function HP(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t}function Sie(t){if(!t)return"";const e=/(a|A|hh?|HH?|mm?|ss?|SSS|S|.)/g;let i="";for(const r of t.match(e)||[])switch(r){case"SSS":case"m":case"mm":case"h":case"hh":case"H":case"HH":case"s":case"ss":i+=r;break;case"A":case"a":i+="a";break;default:i+=`'${r}'`}return i}const $ie="esri.core.sql.timeonly";let Ove=class Hd{constructor(e,i,r,n){this._hour=e,this._minute=i,this._second=r,this._millisecond=n,this.declaredRootClass=$ie}static isTimeOnly(e){return typeof e=="object"&&e!=null&&"declaredRootClass"in e&&e.declaredRootClass===$ie}get hour(){return this._hour}get minute(){return this._minute}get second(){return this._second}get millisecond(){return this._millisecond}equals(e){return Hd.isTimeOnly(e)&&e.hour===this.hour&&e.minute===this.minute&&e.second===this.second&&e.millisecond===this.millisecond}clone(){return new Hd(this.hour,this.minute,this.second,this.millisecond)}isValid(){return HP(this.hour)&&HP(this.minute)&&HP(this.second)&&HP(this.millisecond)&&this.hour>=0&&this.hour<24&&this.minute>=0&&this.minute<60&&this.second>=0&&this.second<60&&this.millisecond>=0&&this.millisecond<1e3}toString(){return`${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}`+(this.millisecond>0?"."+this.millisecond.toString().padStart(3,"0"):"")}toSQLValue(){return this.toString()}toSQLWithKeyword(){return`time '${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}${this.millisecond>0?"."+this.millisecond.toString().padStart(3,"0"):""}'`}toStorageString(){return`${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}`}toFormat(e=null){return e===null||e===""?this.toString():(e=Sie(e))?nt.local(1970,1,1,this._hour,this._minute,this._second,this._millisecond).toFormat(e,{locale:Wa(),numberingSystem:"latn"}):""}toNumber(){return this.millisecond+1e3*this.second+1e3*this.minute*60+60*this.hour*60*1e3}static fromParts(e,i,r,n){const s=new Hd(e,i,r,n);return s.isValid()?s:null}static fromReader(e){if(!e)return null;const i=e.split(":");return i.length!==3?null:new Hd(parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10),0)}static fromMilliseconds(e){if(e>864e5||e<0)return null;const i=Math.floor(e/1e3%60),r=Math.floor(e/6e4%60),n=Math.floor(e/36e5%24),s=Math.floor(e%1e3);return new Hd(n,r,i,s)}static fromDateJS(e){return new Hd(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}static fromDateTime(e){return new Hd(e.hour,e.minute,e.second,e.millisecond)}static fromSqlTimeStampOffset(e){return this.fromDateTime(e.toDateTime())}static fromString(e,i=null){if(e===""||e===null)return null;const r=[];i?(i=Sie(i))&&r.push(i):i!==null&&i!==""||(r.push("HH:mm:ss"),r.push("HH:mm:ss.SSS"),r.push("hh:mm:ss a"),r.push("hh:mm:ss.SSS a"),r.push("HH:mm"),r.push("hh:mm a"),r.push("H:mm"),r.push("h:mm a"),r.push("H:mm:ss"),r.push("h:mm:ss a"),r.push("H:mm:ss.SSS"),r.push("h:mm:ss.SSS a"));for(const n of r){const s=nt.fromFormat(e,n);if(s.isValid)return new Hd(s.hour,s.minute,s.second,s.millisecond)}return null}plus(e,i){switch(e){case"days":case"years":case"months":return this.clone();case"hours":case"minutes":case"seconds":case"milliseconds":return Hd.fromDateTime(this.toUTCDateTime().plus({[e]:i}))}return null}toUTCDateTime(){return nt.utc(1970,1,1,this.hour,this.minute,this.second,this.millisecond)}difference(e,i){switch(i.toLowerCase()){case"days":case"day":case"d":return this.toUTCDateTime().diff(e.toUTCDateTime(),"days").days;case"months":case"month":return this.toUTCDateTime().diff(e.toUTCDateTime(),"months").months;case"minutes":case"minute":case"m":return i==="M"?this.toUTCDateTime().diff(e.toUTCDateTime(),"months").months:this.toUTCDateTime().diff(e.toUTCDateTime(),"minutes").minutes;case"seconds":case"second":case"s":return this.toUTCDateTime().diff(e.toUTCDateTime(),"seconds").seconds;case"milliseconds":case"millisecond":case"ms":default:return this.toUTCDateTime().diff(e.toUTCDateTime(),"milliseconds").milliseconds;case"hours":case"hour":case"h":return this.toUTCDateTime().diff(e.toUTCDateTime(),"hours").hours;case"years":case"year":case"y":return this.toUTCDateTime().diff(e.toUTCDateTime(),"years").years}}};const PGe=["geometry","scale","timeProperties"];function twt(t,e){if(e!=null)for(const i of PGe)e.hasArcadeDependency(i)&&t.add(i);return t}function AGe(t,e){return Fve.create(t,e,null,["$feature","$view"])}function LGe(t,e,i){return Fve.create(t,e,i,["$feature","$view","$config"])}let Fve=class Nve{static async create(e,i,r,n){const{arcade:s,Dictionary:o}=await fp();let a;try{a=s.parseScript(e)}catch(g){throw new ie("arcade-bad-expression","Failed to parse arcade script",{script:e,error:g})}const l=s.scriptUsesGeometryEngine(a);l&&await s.enableGeometrySupport(),await s.loadDependentModules(new Set,a,null,!1,l);const c={vars:n.reduce(((g,b)=>({...g,[b]:null})),{}),spatialReference:i,useAsync:!1},d=s.compileScript(a,c);let f=null;r!=null&&(f=new o(r),f.immutable=!0);const y=new o;return y.immutable=!1,y.setField("scale",0),new Nve(e,s,a,d,i,y,f,o)}constructor(e,i,r,n,s,o,a,l){this.script=e,this._arcade=i,this._syntaxTree=r,this._compiled=n,this._spatialReference=s,this._viewDict=o,this._configDict=a,this._dictionaryCtor=l,this._dependencies=new Map,this._featureReader=new Dve,this._dependencies.set("geometry",i.scriptTouchesGeometry(this._syntaxTree)),this._dependencies.set("scale",this._arcade.referencesMember(this._syntaxTree,"scale")),this._dependencies.set("timeProperties",this._arcade.scriptUsesViewProperties(this._syntaxTree,["timeProperties"]))}evaluate(e,i){var n;const r=(n=i.$view)==null?void 0:n.timeZone;if(i.$view){let s;if(this._viewDict.setField("scale",i.$view.scale),i.$view.timeProperties!=null){const{currentStart:o,currentEnd:a}=i.$view.timeProperties;s=new this._dictionaryCtor({currentStart:o!=null?r!=null?Jh.epochToArcadeDate(o,r):Jh.unknownEpochToArcadeDate(o):void 0,currentEnd:a!=null?r!=null?Jh.epochToArcadeDate(a,r):Jh.unknownEpochToArcadeDate(a):void 0,startIncluded:!0,endIncluded:!0})}this._viewDict.setField("timeProperties",s)}return this._compiled({vars:{$view:this._viewDict,$config:this._configDict,$feature:e},spatialReference:this._spatialReference,timeZone:r})}repurposeFeature(e,i){return this._featureReader.bind(e,i,this._spatialReference),this._featureReader}references(e){return this._dependencies.get(e)??!1}},Dve=class{constructor(){this._boundTarget=null,this._boundSchema={fields:null,fieldsIndex:null,spatialReference:null,get geometryType(){return null},get objectIdField(){return null}},this.arcadeDeclaredClass="esri.arcade.Feature",this._contextTimeZone=null}bind(e,i,r){const n=i??new hM(zve(e.attributes));this._boundTarget=e,this._boundSchema.fields=n.fields,this._boundSchema.fieldsIndex=n,this._boundSchema.spatialReference=r}_getField(e){return this._boundSchema.fieldsIndex.get(e)}get contextTimeZone(){return this._contextTimeZone}set contextTimeZone(e){this._contextTimeZone=e}readArcadeFeature(){return this}hasField(e){return this._boundSchema.fieldsIndex.has(e)}geometry(){if("fromJSON"in this._boundTarget)return this._boundTarget.geometry;const e=hp(this._boundTarget.geometry);if(e){if(!this._boundSchema.spatialReference)throw new Error("InternalError: Expected spatial reference to be defined");e.spatialReference=this._boundSchema.spatialReference}return e}isUnknownDateTimeField(e){return this._boundSchema.fieldsIndex.getTimeZone(e)===Lg}field(e,i=!0){const r=this._getField(e);if(r){const n=this._boundTarget.attributes[r.name];if(n==null)return null;switch(r.type){case"date-only":case"esriFieldTypeDateOnly":return Rve.fromReader(n);case"time-only":case"esriFieldTypeTimeOnly":return Ove.fromReader(n);case"esriFieldTypeTimestampOffset":case"timestamp-offset":return Jh.fromReaderAsTimeStampOffset(n);case"date":case"esriFieldTypeDate":return this.isUnknownDateTimeField(e)?Jh.unknownEpochToArcadeDate(n):Jh.epochToArcadeDate(n,this.contextTimeZone??Ya);default:return n}}if(i)throw new Error(`Field ${e} does not exist`);return null}setField(e,i){throw new Error("Unable to update feature attribute values, feature is readonly")}keys(){return this._boundSchema.fieldsIndex.fields.map((e=>e.name))}castToText(e=!1){return JSON.stringify(this._boundTarget)}gdbVersion(){return null}fullSchema(){return this._boundSchema}castAsJson(e=null){var i;return{attributes:this._boundTarget.attributes,geometry:(e==null?void 0:e.keepGeometryType)===!0?this.geometry():((i=this.geometry())==null?void 0:i.toJSON())??null}}castAsJsonAsync(e=null,i=null){return Promise.resolve(this.castAsJson(i))}};function zve(t){const e=[];for(const i in t)e.push({name:i,alias:i,type:typeof t[i]=="string"?"esriFieldTypeString":"esriFieldTypeDouble"});return e}let RGe=class Vve{static async from(e,i,r){const n=e.dictionary_version?oge.parse(e.dictionary_version):null,s=new Set(e.itemsNames),o={};if(i)for(const f in i)o[f]=i[f];if(e.authoringInfo.configuration)for(const f of e.authoringInfo.configuration)o.hasOwnProperty(f.name)||(o[f.name]=f.value);const a=new Set(e.authoringInfo.symbol);for(const f of Object.keys(r))a.delete(f);a.size&&Ie.getLogger("esri.renderers.support.DictionaryScriptEvaluator").warnOnce("missing-fields: fieldMap entries for the following symbol fields are missing",{symbolFields:a});const l=await LGe(e.expression,null,o);if(!l)throw new ie("dictionary-renderer:expression-error","Unable to create dictionary renderer expression");const c=!n||!n.greaterEqual(4,0);c&&Ie.getLogger("esri.renderers.support.DictionaryScriptEvaluator").warnOnce("Dictionary script does not support native field types. Applying fallback",{version:n});const d=new OGe(r,c);return new Vve(c,s,l,d)}constructor(e,i,r,n){this._requiresFieldCoercionToString=e,this._itemNames=i,this._compiled=r,this._reader=n}get itemNames(){return this._itemNames}evaluate(e,i,r,n){try{return this._reader.bind(e,r,n),this._compiled.evaluate(this._reader,{$view:{scale:i}})}catch(s){Ie.getLogger("esri.renderers.support.DictionaryScriptEvaluator").warnOnce("arcade: dictionary script evaluation failed",{error:s})}return null}createDictionaryFieldsIndex(e){if(!this._requiresFieldCoercionToString)return new hM(e);const i=e.map((r=>({...r,type:"esriFieldTypeString"})));return new hM(i)}},OGe=class extends Dve{constructor(e,i){super(),this._fieldMap=e,this._requiresFieldCoercionToString=i}_getField(e){const i=this._fieldMap[e]??e;return this._boundSchema.fieldsIndex.get(i)}field(e){if(!this._requiresFieldCoercionToString)return super.field(e,!1);const i=this._getField(e);return i==null||this._boundTarget.attributes[i.name]==null?"":""+this._boundTarget.attributes[i.name]}};var Tie,Eie,Iie,Cie,Yh,Mie,B8,G8,q8,kie,H8,W8,Pie,Aie,Lie,Rie,Z8,J8,Oie,Fie,kx,Wt,K0,QO,Nie,qf,Die,zie,ox,Y8,Vie,jie,Uie,Bie,Gie,qie,Hie,qa,Zs,Wie,Zie,Lc,Jie,Yie,Xie,Kie,Eu,_C,Q0,ax,Qie,ere,tre,X8,ire,e3,rre,t3,lx,nre,K8,sre,ore;(function(t){t[t.BUTT=0]="BUTT",t[t.ROUND=1]="ROUND",t[t.SQUARE=2]="SQUARE",t[t.UNKNOWN=4]="UNKNOWN"})(Tie||(Tie={})),(function(t){t[t.BEVEL=0]="BEVEL",t[t.ROUND=1]="ROUND",t[t.MITER=2]="MITER",t[t.UNKNOWN=4]="UNKNOWN"})(Eie||(Eie={})),(function(t){t[t.SCREEN=0]="SCREEN",t[t.MAP=1]="MAP"})(Iie||(Iie={})),(function(t){t[t.Tint=0]="Tint",t[t.Ignore=1]="Ignore",t[t.Multiply=99]="Multiply"})(Cie||(Cie={})),(function(t){t.Both="Both",t.JustBegin="JustBegin",t.JustEnd="JustEnd",t.None="None"})(Yh||(Yh={})),(function(t){t[t.Mosaic=0]="Mosaic",t[t.Centered=1]="Centered"})(Mie||(Mie={})),(function(t){t[t.Normal=0]="Normal",t[t.Superscript=1]="Superscript",t[t.Subscript=2]="Subscript"})(B8||(B8={})),(function(t){t[t.MSSymbol=0]="MSSymbol",t[t.Unicode=1]="Unicode"})(G8||(G8={})),(function(t){t[t.Unspecified=0]="Unspecified",t[t.TrueType=1]="TrueType",t[t.PSOpenType=2]="PSOpenType",t[t.TTOpenType=3]="TTOpenType",t[t.Type1=4]="Type1"})(q8||(q8={})),(function(t){t[t.Display=0]="Display",t[t.Map=1]="Map"})(kie||(kie={})),(function(t){t.None="None",t.Loop="Loop",t.Oscillate="Oscillate"})(H8||(H8={})),(function(t){t.Linear="Linear",t.EaseIn="EaseIn",t.EaseOut="EaseOut",t.EaseInOut="EaseInOut"})(W8||(W8={})),(function(t){t[t.Z=0]="Z",t[t.X=1]="X",t[t.Y=2]="Y"})(Pie||(Pie={})),(function(t){t[t.XYZ=0]="XYZ",t[t.ZXY=1]="ZXY",t[t.YXZ=2]="YXZ"})(Aie||(Aie={})),(function(t){t[t.Rectangle=0]="Rectangle",t[t.RoundedRectangle=1]="RoundedRectangle",t[t.Oval=2]="Oval"})(Lie||(Lie={})),(function(t){t[t.None=0]="None",t[t.Alpha=1]="Alpha",t[t.Screen=2]="Screen",t[t.Multiply=3]="Multiply",t[t.Add=4]="Add"})(Rie||(Rie={})),(function(t){t[t.TTB=0]="TTB",t[t.RTL=1]="RTL",t[t.BTT=2]="BTT"})(Z8||(Z8={})),(function(t){t[t.None=0]="None",t[t.SignPost=1]="SignPost",t[t.FaceNearPlane=2]="FaceNearPlane"})(J8||(J8={})),(function(t){t[t.Float=0]="Float",t[t.String=1]="String",t[t.Boolean=2]="Boolean"})(Oie||(Oie={})),(function(t){t[t.Intersect=0]="Intersect",t[t.Subtract=1]="Subtract"})(Fie||(Fie={})),(function(t){t.OpenEnded="OpenEnded",t.Block="Block",t.Crossed="Crossed"})(kx||(kx={})),(function(t){t.FullGeometry="FullGeometry",t.PerpendicularFromFirstSegment="PerpendicularFromFirstSegment",t.ReversedFirstSegment="ReversedFirstSegment",t.PerpendicularToSecondSegment="PerpendicularToSecondSegment",t.SecondSegmentWithTicks="SecondSegmentWithTicks",t.DoublePerpendicular="DoublePerpendicular",t.OppositeToFirstSegment="OppositeToFirstSegment",t.TriplePerpendicular="TriplePerpendicular",t.HalfCircleFirstSegment="HalfCircleFirstSegment",t.HalfCircleSecondSegment="HalfCircleSecondSegment",t.HalfCircleExtended="HalfCircleExtended",t.OpenCircle="OpenCircle",t.CoverageEdgesWithTicks="CoverageEdgesWithTicks",t.GapExtentWithDoubleTicks="GapExtentWithDoubleTicks",t.GapExtentMidline="GapExtentMidline",t.Chevron="Chevron",t.PerpendicularWithArc="PerpendicularWithArc",t.ClosedHalfCircle="ClosedHalfCircle",t.TripleParallelExtended="TripleParallelExtended",t.ParallelWithTicks="ParallelWithTicks",t.Parallel="Parallel",t.PerpendicularToFirstSegment="PerpendicularToFirstSegment",t.ParallelOffset="ParallelOffset",t.OffsetOpposite="OffsetOpposite",t.OffsetSame="OffsetSame",t.CircleWithArc="CircleWithArc",t.DoubleJog="DoubleJog",t.PerpendicularOffset="PerpendicularOffset",t.LineExcludingLastSegment="LineExcludingLastSegment",t.MultivertexArrow="MultivertexArrow",t.CrossedArrow="CrossedArrow",t.ChevronArrow="ChevronArrow",t.ChevronArrowOffset="ChevronArrowOffset",t.PartialFirstSegment="PartialFirstSegment",t.Arch="Arch",t.CurvedParallelTicks="CurvedParallelTicks",t.Arc90Degrees="Arc90Degrees",t.TipWithPerpendicularAndTicks="TipWithPerpendicularAndTicks",t.ConcentricCircles="ConcentricCircles",t.DoubleJogArrow="DoubleJogArrow",t.LinkedChevrons="LinkedChevrons",t.SegmentThenHalfCircle="SegmentThenHalfCircle",t.LineWithStraightTicks="LineWithStraightTicks",t.DoubleCurve="DoubleCurve",t.ParallelWithTicksByWidth="ParallelWithTicksByWidth",t.EnclosingRoundedRectangle="EnclosingRoundedRectangle"})(Wt||(Wt={})),(function(t){t.Mitered="Mitered",t.Bevelled="Bevelled",t.Rounded="Rounded",t.Square="Square",t.TrueBuffer="TrueBuffer"})(K0||(K0={})),(function(t){t.ClosePath="ClosePath",t.ConvexHull="ConvexHull",t.RectangularBox="RectangularBox"})(QO||(QO={})),(function(t){t.BeginningOfLine="BeginningOfLine",t.EndOfLine="EndOfLine"})(Nie||(Nie={})),(function(t){t.Mitered="Mitered",t.Bevelled="Bevelled",t.Rounded="Rounded",t.Square="Square"})(qf||(qf={})),(function(t){t.Fast="Fast",t.Accurate="Accurate"})(Die||(Die={})),(function(t){t.BeginningOfLine="BeginningOfLine",t.EndOfLine="EndOfLine"})(zie||(zie={})),(function(t){t.Sinus="Sinus",t.Square="Square",t.Triangle="Triangle",t.Random="Random"})(ox||(ox={})),(function(t){t[t.None=0]="None",t[t.Default=1]="Default",t[t.Force=2]="Force"})(Y8||(Y8={})),(function(t){t[t.Buffered=0]="Buffered",t[t.Left=1]="Left",t[t.Right=2]="Right",t[t.AlongLine=3]="AlongLine"})(Vie||(Vie={})),(function(t){t[t.Linear=0]="Linear",t[t.Rectangular=1]="Rectangular",t[t.Circular=2]="Circular",t[t.Buffered=3]="Buffered"})(jie||(jie={})),(function(t){t[t.Discrete=0]="Discrete",t[t.Continuous=1]="Continuous"})(Uie||(Uie={})),(function(t){t[t.AcrossLine=0]="AcrossLine",t[t.AlongLine=1]="AlongLine"})(Bie||(Bie={})),(function(t){t[t.Auto=0]="Auto",t[t.Clockwise=1]="Clockwise",t[t.Counterclockwise=2]="Counterclockwise"})(Gie||(Gie={})),(function(t){t[t.Left=0]="Left",t[t.Right=1]="Right",t[t.Center=2]="Center",t[t.Justify=3]="Justify"})(qie||(qie={})),(function(t){t[t.Base=0]="Base",t[t.MidPoint=1]="MidPoint",t[t.ThreePoint=2]="ThreePoint",t[t.FourPoint=3]="FourPoint",t[t.Underline=4]="Underline",t[t.CircularCW=5]="CircularCW",t[t.CircularCCW=6]="CircularCCW"})(Hie||(Hie={})),(function(t){t.Butt="Butt",t.Round="Round",t.Square="Square"})(qa||(qa={})),(function(t){t.NoConstraint="NoConstraint",t.HalfPattern="HalfPattern",t.HalfGap="HalfGap",t.FullPattern="FullPattern",t.FullGap="FullGap",t.Custom="Custom"})(Zs||(Zs={})),(function(t){t[t.None=-1]="None",t[t.Custom=0]="Custom",t[t.Circle=1]="Circle",t[t.OpenArrow=2]="OpenArrow",t[t.ClosedArrow=3]="ClosedArrow",t[t.Diamond=4]="Diamond"})(Wie||(Wie={})),(function(t){t[t.ExtraLeading=0]="ExtraLeading",t[t.Multiple=1]="Multiple",t[t.Exact=2]="Exact"})(Zie||(Zie={})),(function(t){t.Bevel="Bevel",t.Round="Round",t.Miter="Miter"})(Lc||(Lc={})),(function(t){t[t.Default=0]="Default",t[t.String=1]="String",t[t.Numeric=2]="Numeric"})(Jie||(Jie={})),(function(t){t[t.InsidePolygon=0]="InsidePolygon",t[t.PolygonCenter=1]="PolygonCenter",t[t.RandomlyInsidePolygon=2]="RandomlyInsidePolygon"})(Yie||(Yie={})),(function(t){t[t.Tint=0]="Tint",t[t.Replace=1]="Replace",t[t.Multiply=2]="Multiply"})(Xie||(Xie={})),(function(t){t[t.ClipAtBoundary=0]="ClipAtBoundary",t[t.RemoveIfCenterOutsideBoundary=1]="RemoveIfCenterOutsideBoundary",t[t.DoNotTouchBoundary=2]="DoNotTouchBoundary",t[t.DoNotClip=3]="DoNotClip"})(Kie||(Kie={})),(function(t){t.NoConstraint="NoConstraint",t.WithMarkers="WithMarkers",t.WithFullGap="WithFullGap",t.WithHalfGap="WithHalfGap",t.Custom="Custom"})(Eu||(Eu={})),(function(t){t.Fixed="Fixed",t.Random="Random",t.RandomFixedQuantity="RandomFixedQuantity"})(_C||(_C={})),(function(t){t.LineMiddle="LineMiddle",t.LineBeginning="LineBeginning",t.LineEnd="LineEnd",t.SegmentMidpoint="SegmentMidpoint"})(Q0||(Q0={})),(function(t){t.OnPolygon="OnPolygon",t.CenterOfMass="CenterOfMass",t.BoundingBoxCenter="BoundingBoxCenter"})(ax||(ax={})),(function(t){t[t.Low=0]="Low",t[t.Medium=1]="Medium",t[t.High=2]="High"})(Qie||(Qie={})),(function(t){t[t.MarkerCenter=0]="MarkerCenter",t[t.MarkerBounds=1]="MarkerBounds"})(ere||(ere={})),(function(t){t[t.None=0]="None",t[t.PropUniform=1]="PropUniform",t[t.PropNonuniform=2]="PropNonuniform",t[t.DifUniform=3]="DifUniform",t[t.DifNonuniform=4]="DifNonuniform"})(tre||(tre={})),(function(t){t.Tube="Tube",t.Strip="Strip",t.Wall="Wall"})(X8||(X8={})),(function(t){t[t.Random=0]="Random",t[t.Increasing=1]="Increasing",t[t.Decreasing=2]="Decreasing",t[t.IncreasingThenDecreasing=3]="IncreasingThenDecreasing"})(ire||(ire={})),(function(t){t[t.Relative=0]="Relative",t[t.Absolute=1]="Absolute"})(e3||(e3={})),(function(t){t[t.Normal=0]="Normal",t[t.LowerCase=1]="LowerCase",t[t.Allcaps=2]="Allcaps"})(rre||(rre={})),(function(t){t[t.LTR=0]="LTR",t[t.RTL=1]="RTL"})(t3||(t3={})),(function(t){t.Draft="Draft",t.Picture="Picture",t.Text="Text"})(lx||(lx={})),(function(t){t[t.Top=0]="Top",t[t.Center=1]="Center",t[t.Baseline=2]="Baseline",t[t.Bottom=3]="Bottom"})(nre||(nre={})),(function(t){t[t.Right=0]="Right",t[t.Upright=1]="Upright"})(K8||(K8={})),(function(t){t[t.Small=0]="Small",t[t.Medium=1]="Medium",t[t.Large=2]="Large"})(sre||(sre={})),(function(t){t[t.Calm=0]="Calm",t[t.Rippled=1]="Rippled",t[t.Slight=2]="Slight",t[t.Moderate=3]="Moderate"})(ore||(ore={}));const FGe={color:[128,128,128,1],outlinecolor:[0,0,0,1],backgroundcolor:[128,128,128,1],borderlinecolor:[0,0,0,1],tintcolor:[255,255,255,1]},$n={CIMVectorMarker:{scalesymbolsproportionally:!1,respectframe:!0,anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMPictureMarker:{scalex:1,texturefilter:"Draft",anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMTextSymbol:{angle:0,anglex:0,angley:0,halosize:1,height:10,horizontalalignment:"Left",kerning:!0,letterspacing:0,letterwidth:100,ligatures:!0,linegap:0,offsetx:0,offsety:0,strikethrough:!1,textcase:"Normal",textstring:"",underline:!1,verticalalignment:"Bottom",enable:!0,colorlocked:!1},CIMSolidStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMPictureStroke:{texturefilter:"Draft",capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMGradientStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1,gradientMethod:"AcrossLine",gradientSize:75,gradientSizeUnits:e3.Relative,gradientType:"Discrete",interval:5},CIMSolidFill:{enable:!0,colorlocked:!1},CIMPictureFill:{offsetx:0,offsety:0,rotation:0,scalex:1,height:10,texturefilter:"Draft",enable:!0,colorlocked:!1},CIMHatchFill:{offsetx:0,offsety:0,rotation:0,separation:4,enable:!0,colorlocked:!1},CIMGradientFill:{enable:!0,angle:90,gradientMethod:"Linear",gradientSize:75,gradientSizeUnits:e3.Relative,gradientType:"Discrete",interval:5},CIMGeometricEffectAddControlPoints:{angletolerance:120},CIMGeometricEffectArrow:{arrowtype:"OpenEnded",width:5},CIMGeometricEffectBuffer:{size:1},CIMGeometricEffectCut:{begincut:1,endcut:1,middlecut:0,invert:!1},CIMGeometricEffectDashes:{customendingoffset:0,linedashending:"NoConstraint",offsetalongline:0},CIMGeometricEffectDonut:{method:"Mitered",option:"Accurate",width:2},CIMGeometricEffectJog:{angle:225,length:20,position:50},CIMGeometricEffectControlMeasureLine:{rule:"FullGeometry"},CIMGeometricEffectMove:{offsetx:1,offsety:-1},CIMGeometricEffectOffset:{method:"Square",offset:1,option:"Fast"},CIMGeometricEffectRadial:{angle:0,length:5},CIMGeometricEffectRotate:{angle:15},CIMGeometricEffectScale:{xscalefactor:1.15,yscalefactor:1.15},CIMGeometricEffectWave:{amplitude:2,period:3,seed:1,waveform:"Sinus"},CIMMarkerPlacementAlongLine:{customendingoffset:0,endings:"WithHalfGap",offsetalongline:0,placeperpart:!0,angletoline:!0,offset:0},CIMMarkerPlacementAtExtremities:{extremityplacement:"Both",offsetalongline:0,angletoline:!0,offset:0},CIMMarkerPlacementAtRatioPositions:{beginposition:0,endposition:0,flipfirst:!0,angletoline:!0,offset:0},CIMMarkerPlacementInsidePolygon:{gridangle:0,gridtype:"Fixed",offsetx:0,offsety:0,randomness:100,seed:0,shiftoddrows:!1,stepx:16,stepy:16,clipping:"ClipAtBoundary"},CIMMarkerPlacementOnLine:{relativeto:"LineMiddle",startpointoffset:0,angletoline:!0,offset:0},CIMMarkerPlacementOnVertices:{placeperpart:!0,placeoncontrolpoints:!0,placeonendpoints:!0,placeonregularvertices:!0,angletoline:!0,offset:0},CIMMarkerPlacementPolygonCenter:{method:"OnPolygon",offsetx:0,offsety:0,clipatboundary:!1},CIMAnimatedSymbolProperties:{playanimation:!1,reverseanimation:!1,randomizestarttime:!1,randomizestartseed:0,starttimeoffset:0,duration:3,endingduration:3,useendingduration:!1,repeattype:H8.Loop,repeatdelay:0,easing:W8.Linear},CIMSymbolAnimationSize:{tosize:10},CIMSymbolAnimationScale:{scalefactor:1},CIMSymbolAnimationColor:{tocolor:[255,255,255,1]},CIMSymbolAnimationTransparency:{totransparency:0},CIMSymbolAnimationRotation:{torotation:0,rotateclockwise:!1},CIMSymbolAnimationOffset:{offsetx:0,offsety:0},CIMSymbolAnimationMoveAlongLine:{speed:30,distanceAlong:100}};function NGe(t){return typeof t=="function"}function nwt(t,e,i,r){return NGe(t)?t(e,i,r):t}function swt(t){return[t.r,t.g,t.b,t.a]}const DGe=` /-,
`;function are(t){let e=t.length;for(;e--;)if(!DGe.includes(t.charAt(e)))return!1;return!0}function zGe(t,e){const i=[];let r=0,n=-1;do if(n=t.indexOf("[",r),n>=r){if(n>r){const s=t.slice(r,n);i.push([s,null,are(s)])}if(r=n+1,n=t.indexOf("]",r),n>=r){if(n>r){const s=e[t.slice(r,n)];s&&i.push([null,s,!1])}r=n+1}}while(n!==-1);if(r<t.length){const s=t.slice(r);i.push([s,null,are(s)])}return i}function owt(t,e,i){let r="",n=null;for(const s of e){const[o,a,l]=s;if(o!=null&&o!=="")l?n=o:(n!=null&&(r+=n,n=null),r+=o);else{const c=t.readAttribute(a);c!=null&&c!==""&&(n!==null&&(r+=n,n=null),r+=c)}}return jve(r,i)}function VGe(t,e,i,r){let n="",s=null;for(const o of e){const[a,l,c]=o;if(a!=null&&a!=="")c?s=a:(s!=null&&(n+=s,s=null),n+=a);else{let d=l;i!=null&&(d=eqe(l,i));const f=t.attributes[d];f!=null&&f!==""&&(s!=null&&(n+=s,s=null),n+=f)}}return jve(n,r)}function jve(t,e){switch(typeof t!="string"&&(t=String(t)),e){case"LowerCase":return t.toLowerCase();case"Allcaps":return t.toUpperCase();default:return t}}function awt(t,e,i,r,n,s,o=!0){const a=e/n,l=i/s,c=Math.ceil(a/2),d=Math.ceil(l/2);for(let f=0;f<s;f++)for(let y=0;y<n;y++){const g=4*(y+(o?s-f-1:f)*n);let b=0,_=0,x=0,E=0,C=0,k=0,O=0;const D=(f+.5)*l;for(let B=Math.floor(f*l);B<(f+1)*l;B++){const j=Math.abs(D-(B+.5))/d,Z=(y+.5)*a,X=j*j;for(let ee=Math.floor(y*a);ee<(y+1)*a;ee++){let pe=Math.abs(Z-(ee+.5))/c;const he=Math.sqrt(X+pe*pe);he>=-1&&he<=1&&(b=2*he*he*he-3*he*he+1,b>0&&(pe=4*(ee+B*e),O+=b*t[pe+3],x+=b,t[pe+3]<255&&(b=b*t[pe+3]/250),E+=b*t[pe],C+=b*t[pe+1],k+=b*t[pe+2],_+=b))}}r[g]=E/_,r[g+1]=C/_,r[g+2]=k/_,r[g+3]=O/x}}function Uve(t){return t?[t[0],t[1],t[2],t[3]/255]:[0,0,0,0]}function xH(t){var e;return((e=t.data)==null?void 0:e.symbol)??null}function SH(t){return t.type==="CIMVectorMarker"||t.type==="CIMPictureMarker"||t.type==="CIMBarChartMarker"||t.type==="CIMCharacterMarker"||t.type==="CIMPieChartMarker"||t.type==="CIMStackedBarChartMarker"}function Bve(t){return t.type==="CIMGradientStroke"||t.type==="CIMPictureStroke"||t.type==="CIMSolidStroke"}function jGe(t){return t!=null&&(t.type==="CIMGradientFill"||t.type==="CIMHatchFill"||t.type==="CIMPictureFill"||t.type==="CIMSolidFill"||t.type==="CIMWaterFill")}function UN(t){return t!=null&&(t.type==="CIMMarkerPlacementAlongLineRandomSize"||t.type==="CIMMarkerPlacementAlongLineSameSize"||t.type==="CIMMarkerPlacementAlongLineVariableSize"||t.type==="CIMMarkerPlacementAtExtremities"||t.type==="CIMMarkerPlacementAtMeasuredUnits"||t.type==="CIMMarkerPlacementAtRatioPositions"||t.type==="CIMMarkerPlacementOnLine"||t.type==="CIMMarkerPlacementOnVertices")}const jt=(t,e=0)=>t==null||isNaN(t)?e:t,lwt=(t,e)=>t??e,cwt=(t,e)=>t??e,uwt=t=>t.tintColor?Uve(t.tintColor):[255,255,255,1],UGe=t=>{if(!t)return!1;for(const e of t)switch(e.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectDonut":case"CIMGeometricEffectOffset":case"CIMGeometricEffectTaperedPolygon":case"CIMGeometricEffectEnclosingPolygon":return!0}return!1};function BGe(){return ye(()=>import("./geometryEngineJSON-Dr6Udo8L.js").then(t=>t.g),__vite__mapDeps([5,6,7,8]))}function GGe(t){if(!t)return"normal";switch(t.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function qGe(t){if(!t)return"normal";switch(t.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function Gve(t){let e="normal",i="normal";if(t){const r=t.toLowerCase();r.includes("italic")?e="italic":r.includes("oblique")&&(e="oblique"),r.includes("bold")?i="bold":r.includes("light")&&(i="lighter")}return{style:e,weight:i}}function qve(t){return t.underline?"underline":t.strikethrough?"line-through":"none"}function xC(t){if(!t)return null;switch(t.type){case"CIMPolygonSymbol":if(t.symbolLayers)for(const e of t.symbolLayers){const i=xC(e);if(i!=null)return i}break;case"CIMTextSymbol":return xC(t.symbol);case"CIMSolidFill":return t.color}return null}function i3(t){if(t)switch(t.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const e=t.symbolLayers;if(e)for(const i of e){const r=i3(i);if(r!=null)return r}break}case"CIMTextSymbol":return i3(t.symbol);case"CIMSolidStroke":return t.color}}function dwt(t){for(const e of t)if(e.enable)switch(e.type){case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return!0}return!1}function r3(t){if(t)switch(t.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(t.symbolLayers)for(const e of t.symbolLayers){const i=r3(e);if(i!==void 0)return i}break;case"CIMTextSymbol":return r3(t.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return t.width}}function HGe(t){switch(t){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function WGe(t){switch(t){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function ZGe(t){return(t?Object.keys(t):[]).map((e=>({name:e,alias:e,type:typeof t[e]=="string"?"esriFieldTypeString":"esriFieldTypeDouble"})))}const I_=t=>t.includes("data:image/svg+xml");function n3(t){if(!t)return null;switch(t.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function k2(t){return t&&t.charAt(0).toLowerCase()+t.slice(1)}function hwt(t,e,i,r,n,s,o=!0){const{infos:a}=s;let l=1,c=0,d=0,f=0,y=1;for(const{absoluteAnchorPoint:_,offsetX:x,offsetY:E,rotation:C,size:k,frameHeight:O,rotateClockWise:D,scaleSymbolsProportionally:B}of a)y=_?1:l,d=ure(x,E,c,y,d),f=cre(x,E,c,y,f),O&&(B||o)&&(l*=k/O),c=dre(C,D,c);const g=ure(r,n,c,y,d),b=cre(r,n,c,y,f);return{size:t*l,rotation:dre(e,i,c),offsetX:g,offsetY:b}}function JGe(t){if(t==null)return!1;if(Array.isArray(t))return t.every((e=>JGe(e)));switch(typeof t){case"string":return!!t;case"number":return!isNaN(t)}}function YGe(t,e){if(e==="color"||e==="outlinecolor"||e==="backgroundcolor"||e==="borderlinecolor"||e==="tintcolor")return[...FGe[e]];const i=$n[t];if(!i)throw new Error(`InternalError: default value for type ${t}.`);return i[e]}function XGe(t){return t.split(" ").map((e=>Number(e)))}function KGe(t){return typeof t=="string"?XGe(t):t}function Hve(t){return t!=null&&t.dashTemplate&&(t.dashTemplate=KGe(t.dashTemplate)),t}function Q8(t){if(t==null)return"Normal";switch(t.type){case"CIMTextSymbol":return t.textCase??"Normal";case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const e=t.symbolLayers;if(!e)return"Normal";for(const i of e)if(i.type==="CIMVectorMarker")return Q8(i)}break;case"CIMVectorMarker":{const e=t.markerGraphics;if(!e)return"Normal";for(const i of e)if(i.symbol)return Q8(i.symbol)}}return"Normal"}function QGe(t){if(t)switch(t.type){case"CIMTextSymbol":return t.height;case"CIMPointSymbol":{let e=0;if(t.symbolLayers){for(const i of t.symbolLayers)if(i)switch(i.type){case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":{const r=i.size??$n.CIMVectorMarker.size;r>e&&(e=r);break}}}return e}case"CIMLineSymbol":case"CIMPolygonSymbol":{let e=0;if(t.symbolLayers){for(const i of t.symbolLayers)if(i)switch(i.type){case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":{const r=i.width;r!=null&&r>e&&(e=r);break}case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":if(i.markerPlacement&&UN(i.markerPlacement)){const r=i.size??$n.CIMVectorMarker.size;r>e&&(e=r)}break;case"CIMPictureFill":{const r=i.height;r!=null&&r>e&&(e=r)}}}return e}}}function eqe(t,e){if(e!==null){const i=e.get(t);return i?i.name:t}return t}function tqe(t){return t.map((e=>({...e,propertyName:k2(e.propertyName)})))}function lre(t){const e={};for(const i in t){const r=t[i];e[k2(i)]=r}return e}function cre(t,e,i,r,n){const s=i*Math.PI/180;if(s){const o=Math.cos(s);return(Math.sin(s)*t+o*e)*r+n}return e*r+n}function ure(t,e,i,r,n){const s=i*Math.PI/180;return s?(Math.cos(s)*t-Math.sin(s)*e)*r+n:t*r+n}function dre(t,e,i){return e?i-t:i+t}function pwt(t,e,i){const r=i==="Color"||i==="TintColor"||i==="ToColor",n=i==="Rotation"||i==="Angle"||i==="ToRotation";let s=e[k2(i)];if(s!=null&&(r?s=[s[0]/255,s[1]/255,s[2]/255,s[3]/255]:n&&(s*=Math.PI/180)),s==null&&(s=YGe(e.type,i.toLowerCase()),s!=null&&(r?s=[s[0]/255,s[1]/255,s[2]/255,s[3]]:n&&(s*=Math.PI/180))),e.primitiveName!=null){const o=t[e.primitiveName];if(o!=null){const a=o[i];a==null||(typeof a=="string"||typeof a=="number"||Array.isArray(a)?(s=a,s!=null&&(r?s=[s[0]/255,s[1]/255,s[2]/255,s[3]/255]:n&&(s*=Math.PI/180))):(s={valueExpressionInfo:a,defaultValue:s},s!=null&&(r?s={type:"Process",op:"ArcadeColor",value:s}:n&&(s={type:"Process",op:"Divide",left:s,right:180/Math.PI}))))}}if(s==null)throw new Error(`Failed to derive a value or an expression for "${i}".`);return s}function fwt(t,e,i){if(e[k2(i)]!=null)return!0;if(e.primitiveName!=null){const r=t[e.primitiveName];if(r!=null&&r[i]!=null)return!0}return!1}function cE(t,e){return Math.max(Math.min((t??e)/100,1),0)}const iqe={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};let Wve=class{constructor(e,i,r,n){this.url=e,this.fieldMap=r,this.dictionaryInfo=n,this._symbolPartCache=new $ve(100);const s=async()=>RGe.from(await n,i,r);this._evaluator=s()}async getSymbolAsync(e,i,r=!0){var f;const n=await this._evaluator,s=(i==null?void 0:i.fields)??zve(e.attributes),o=n.createDictionaryFieldsIndex(s),a=n.evaluate(e,(i==null?void 0:i.scale)??0,o,i==null?void 0:i.spatialReference);if(a==null)return null;const l=bw(e.geometry),c=gie.parse(a,n.itemNames,l),d=l==="esriGeometryPoint"&&!((f=e.geometry)!=null&&f.hasZ);return await this._cimPartsToCIMSymbol(e,c.partNames,c.overrides,d,i,r,o)}async getSymbolForControlString(e,i,r){const n=await this._evaluator,s=gie.parse(e,n.itemNames,i),o=i==="esriGeometryPoint"&&!r,a=hre(await Promise.all(s.partNames.map((l=>this._getSymbolPart(l)))),s.overrides,o);return new hs({data:a})}async _cimPartsToCIMSymbol(e,i,r,n,s,o,a){const l=i.map((f=>this._getSymbolPart(f,s)));let c=await Promise.all(l);if(o&&this.fieldMap&&c.length>0){const{OverrideHelper:f}=await ye(()=>Promise.resolve().then(()=>nlt),void 0);c=se(c);for(const y of c)f.applyDictionaryTextOverrides(y,e,this.fieldMap,a,Q8(y))}const d=hre(c,r,n);return new hs({data:d})}async _fetchSymbolPart(e,i){const r=await this.dictionaryInfo,n=(this.url+"/"+r.cimRefTemplateUrl).replaceAll(/\{itemName\}/gi,e),{data:s}=await fi(n,{responseType:"json",query:{f:"json"},...i});return s}async _getSymbolPart(e,i){let r=this._symbolPartCache.get(e);return r||(r=this._fetchSymbolPart(e,i),this._symbolPartCache.put(e,r)),r}};function hre(t,e,i){if(!t||t.length===0)return null;const r={...t[0]};if(t.length>1){r.effects=null,r.symbolLayers=[];for(const n of t){const s=n;if(s.effects!=null)for(const o of s.symbolLayers)o.effects==null?o.effects=s.effects:o.effects.unshift(...s.effects);r.symbolLayers.unshift(...s.symbolLayers)}}return i&&(r.callout=iqe),{type:"CIMSymbolReference",symbol:r,primitiveOverrides:e}}var e9;let xu=e9=class extends H$(Ll){constructor(t){super(t),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}get _loader(){const t=this.getDictionaryInfo();return new Wve(this.url,this.config,this.fieldMap??{},t)}writeData(t,e){t&&(e.scalingExpressionInfo={expression:t,returnType:"number"})}writeVisualVariables(t,e,i,r){r!=null&&r.origin||super.writeVisualVariables(t,e,i,r)}clone(){return new e9({config:se(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:se(this.fieldMap),url:se(this.url),visualVariables:se(this.visualVariables)})}async getSymbolAsync(t,e,i=!0){return this._loader.getSymbolAsync(t,e,i)}async getSymbolForControlString(t,e,i){return this._loader.getSymbolForControlString(t,e,i)}getDictionaryInfo(){return this._dictionaryInfoPromise||(this._dictionaryInfoPromise=this._fetchDictionaryInfo()),this._dictionaryInfoPromise}async collectRequiredFields(t,e){await this.collectVVRequiredFields(t,e),this.scaleExpression&&await io(t,e,this.scaleExpression);for(const i in this.fieldMap){const r=this.fieldMap[i];e.has(r)&&t.add(r)}}get arcadeRequired(){return!0}getSymbol(){return null}get symbols(){return[]}getAttributeHash(){var t;return((t=this.visualVariables)==null?void 0:t.reduce(((e,i)=>e+i.getAttributeHash()),""))??""}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}async _fetchDictionaryInfo(){const{data:t}=await fi(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"}});return t}};u([h({type:Wve})],xu.prototype,"_loader",null),u([h({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],xu.prototype,"config",void 0),u([h({type:Object,json:{write:!0}})],xu.prototype,"fieldMap",void 0),u([h({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],xu.prototype,"scaleExpression",void 0),u([Ve("scaleExpression")],xu.prototype,"writeData",null),u([h({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(t){return{enabled:!!t&&!!this.scaleExpression}}}}})],xu.prototype,"scaleExpressionTitle",void 0),u([h({type:String,json:{write:!0}})],xu.prototype,"url",void 0),u([Ve("visualVariables")],xu.prototype,"writeVisualVariables",null),xu=e9=u([V("esri.renderers.DictionaryRenderer")],xu);var t9;let cf=t9=class extends ve{constructor(t){super(t),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(t){return t==null?t:typeof t=="function"?(Ie.getLogger(this).error(".field: field must be a string value"),null):l2(t)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){var t;return new t9({color:(t=this.color)==null?void 0:t.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};u([h({type:_e,json:{type:[Number],write:!0}})],cf.prototype,"color",void 0),u([h({type:String,json:{write:!0}})],cf.prototype,"field",void 0),u([yi("field")],cf.prototype,"castField",null),u([h({type:String,json:{write:!0}})],cf.prototype,"label",void 0),u([h({type:String,json:{write:!0}})],cf.prototype,"valueExpression",void 0),u([h({type:String,json:{write:!0}})],cf.prototype,"valueExpressionTitle",void 0),cf=t9=u([V("esri.renderers.support.AttributeColorInfo")],cf);const Zve=cf;var i9;let QL=i9=class extends ve{constructor(){super(...arguments),this.unit=null}clone(){return new i9({unit:this.unit})}};u([h({type:String,json:{write:!0}})],QL.prototype,"unit",void 0),QL=i9=u([V("esri.renderers.support.DotDensityLegendOptions")],QL);const rqe=QL;var r9;let Ea=r9=class extends H$(Ll){constructor(t){super(t),this.attributes=null,this.backgroundColor=new _e([0,0,0,0]),this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new Xr,this.dotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}calculateDotValue(t){if(this.referenceScale==null)return this.dotValue;const e=t/this.referenceScale*this.dotValue;return e<1?1:e}getSymbol(){return new So({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}get symbols(){return[this.getSymbol()]}getAttributeHash(){var t;return((t=this.attributes)==null?void 0:t.reduce(((e,i)=>e+i.getAttributeHash()),""))??""}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new r9({attributes:se(this.attributes),backgroundColor:se(this.backgroundColor),dotBlendingEnabled:se(this.dotBlendingEnabled),dotShape:se(this.dotShape),dotSize:se(this.dotSize),dotValue:se(this.dotValue),legendOptions:se(this.legendOptions),outline:se(this.outline),referenceScale:se(this.referenceScale),seed:se(this.seed),visualVariables:se(this.visualVariables),authoringInfo:se(this.authoringInfo)})}getControllerHash(){var e;return`${(e=this.attributes)==null?void 0:e.map((i=>i.field||i.valueExpression||""))}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(t,e){await this.collectVVRequiredFields(t,e);for(const i of this.attributes??[])i.valueExpression&&await io(t,e,i.valueExpression),i.field&&t.add(i.field)}};u([h({type:[Zve],json:{write:!0}})],Ea.prototype,"attributes",void 0),u([h({type:_e,json:{write:!0}})],Ea.prototype,"backgroundColor",void 0),u([h({type:Boolean,json:{write:!0}})],Ea.prototype,"dotBlendingEnabled",void 0),u([h({type:String,json:{write:!1}})],Ea.prototype,"dotShape",void 0),u([h({type:Number,json:{write:!0}})],Ea.prototype,"dotSize",void 0),u([h({type:rqe,json:{write:!0}})],Ea.prototype,"legendOptions",void 0),u([h({type:Xr,json:{default:null,write:!0}})],Ea.prototype,"outline",void 0),u([h({type:Number,json:{write:!0}})],Ea.prototype,"dotValue",void 0),u([h({type:Number,json:{write:!0}})],Ea.prototype,"referenceScale",void 0),u([h({type:Number,json:{write:!0}})],Ea.prototype,"seed",void 0),u([at({dotDensity:"dot-density"})],Ea.prototype,"type",void 0),Ea=r9=u([V("esri.renderers.DotDensityRenderer")],Ea);var n9;let Hf=n9=class extends ve{constructor(t){super(t),this.color=null,this.ratio=null}clone(){return new n9({color:this.color&&this.color.clone(),ratio:this.ratio})}};u([h({type:_e,json:{type:[si],default:null,write:{isRequired:!0}}})],Hf.prototype,"color",void 0),u([h({type:Number,json:{write:{isRequired:!0}}})],Hf.prototype,"ratio",void 0),Hf=n9=u([V("esri.renderers.support.HeatmapColorStop")],Hf);let I1=class extends bt.ClonableMixin(ve){constructor(){super(...arguments),this.minLabel=null,this.maxLabel=null,this.title=null}};u([h({type:String,json:{write:!0}})],I1.prototype,"minLabel",void 0),u([h({type:String,json:{write:!0}})],I1.prototype,"maxLabel",void 0),u([h({type:String,json:{write:!0}})],I1.prototype,"title",void 0),I1=u([V("esri.renderers.support.HeatmapLegendOptions")],I1);function nqe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function sqe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function oqe(t,e,i,r,n){return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t}function aqe(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t}function Jve(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t}function Yve(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t[3]=e[3]*i[3],t}function Xve(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t[3]=e[3]/i[3],t}function lqe(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function cqe(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function uqe(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t[3]=Math.min(e[3],i[3]),t}function dqe(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t[3]=Math.max(e[3],i[3]),t}function hqe(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function pqe(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t}function fqe(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t}function Kve(t,e){const i=e[0]-t[0],r=e[1]-t[1],n=e[2]-t[2],s=e[3]-t[3];return Math.sqrt(i*i+r*r+n*n+s*s)}function Qve(t,e){const i=e[0]-t[0],r=e[1]-t[1],n=e[2]-t[2],s=e[3]-t[3];return i*i+r*r+n*n+s*s}function e0e(t){const e=t[0],i=t[1],r=t[2],n=t[3];return Math.sqrt(e*e+i*i+r*r+n*n)}function t0e(t){const e=t[0],i=t[1],r=t[2],n=t[3];return e*e+i*i+r*r+n*n}function mqe(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function yqe(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function gqe(t,e){const i=e[0],r=e[1],n=e[2],s=e[3];let o=i*i+r*r+n*n+s*s;return o>0&&(o=1/Math.sqrt(o),t[0]=i*o,t[1]=r*o,t[2]=n*o,t[3]=s*o),t}function vqe(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function i0e(t,e,i,r){const n=e[0],s=e[1],o=e[2],a=e[3];return t[0]=n+r*(i[0]-n),t[1]=s+r*(i[1]-s),t[2]=o+r*(i[2]-o),t[3]=a+r*(i[3]-a),t}function bqe(t,e=1){const i=fN;let r,n,s,o,a,l;do r=2*i()-1,n=2*i()-1,a=r*r+n*n;while(a>=1);do s=2*i()-1,o=2*i()-1,l=s*s+o*o;while(l>=1);const c=Math.sqrt((1-a)/l);return t[0]=e*r,t[1]=e*n,t[2]=e*s*c,t[3]=e*o*c,t}function wqe(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3];return t[0]=i[0]*r+i[4]*n+i[8]*s+i[12]*o,t[1]=i[1]*r+i[5]*n+i[9]*s+i[13]*o,t[2]=i[2]*r+i[6]*n+i[10]*s+i[14]*o,t[3]=i[3]*r+i[7]*n+i[11]*s+i[15]*o,t}function _qe(t,e,i){const r=e[0],n=e[1],s=e[2],o=i[0],a=i[1],l=i[2],c=i[3],d=c*r+a*s-l*n,f=c*n+l*r-o*s,y=c*s+o*n-a*r,g=-o*r-a*n-l*s;return t[0]=d*c+g*-o+f*-l-y*-a,t[1]=f*c+g*-a+y*-o-d*-l,t[2]=y*c+g*-l+d*-a-f*-o,t[3]=e[3],t}function xqe(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function Sqe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function $qe(t,e){const i=t[0],r=t[1],n=t[2],s=t[3],o=e[0],a=e[1],l=e[2],c=e[3],d=la();return Math.abs(i-o)<=d*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(r-a)<=d*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(n-l)<=d*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(s-c)<=d*Math.max(1,Math.abs(s),Math.abs(c))}const Tqe=Jve,Eqe=Yve,Iqe=Xve,Cqe=Kve,Mqe=Qve,kqe=e0e,Pqe=t0e;Object.freeze(Object.defineProperty({__proto__:null,add:aqe,ceil:lqe,copy:nqe,copyVec3:sqe,dist:Cqe,distance:Kve,div:Iqe,divide:Xve,dot:vqe,equals:$qe,exactEquals:Sqe,floor:cqe,inverse:yqe,len:kqe,length:e0e,lerp:i0e,max:dqe,min:uqe,mul:Eqe,multiply:Yve,negate:mqe,normalize:gqe,random:bqe,round:hqe,scale:pqe,scaleAndAdd:fqe,set:oqe,sqrDist:Mqe,sqrLen:Pqe,squaredDistance:Qve,squaredLength:t0e,str:xqe,sub:Tqe,subtract:Jve,transformMat4:wqe,transformQuat:_qe},Symbol.toStringTag,{value:"Module"}));function BN(){return[0,0,0,0]}function Aqe(t){return[t[0],t[1],t[2],t[3]]}function $w(t,e,i,r){return[t,e,i,r]}function Lqe(t,e,i,r){return[t,e,i,r]}function Rqe(t,e=BN()){const i=Math.min(4,t.length);for(let r=0;r<i;++r)e[r]=t[r];return e}function r0e(){return BN()}function n0e(){return $w(1,1,1,1)}function s0e(){return $w(1,0,0,0)}function o0e(){return $w(0,1,0,0)}function a0e(){return $w(0,0,1,0)}function l0e(){return $w(0,0,0,1)}const Oqe=r0e(),Fqe=n0e(),Nqe=s0e(),Dqe=o0e(),zqe=a0e(),Vqe=l0e();Object.freeze(Object.defineProperty({__proto__:null,ONES:Fqe,UNIT_W:Vqe,UNIT_X:Nqe,UNIT_Y:Dqe,UNIT_Z:zqe,ZEROS:Oqe,clone:Aqe,create:BN,freeze:Lqe,fromArray:Rqe,fromValues:$w,ones:n0e,unitW:l0e,unitX:s0e,unitY:o0e,unitZ:a0e,zeros:r0e},Symbol.toStringTag,{value:"Module"}));const $H=2.4;function jqe(t){return ji(t*$H)}function Uqe(t){return pi(t)/$H}function Bqe(t,e,i,r){let{color:n,ratio:s}=e,{color:o,ratio:a}=i;a===s&&(a===1?s-=1e-6:a+=1e-6);const l=to((r-s)/(a-s),0,1);i0e(t,n.toArray(),o.toArray(),l)}function gwt(t){const i=new Uint8ClampedArray(2048);if(t=t.filter((({ratio:a})=>a>=0&&a<=1)).sort(((a,l)=>a.ratio-l.ratio)).map((({color:a,ratio:l})=>({color:a,ratio:Math.max(l,.001)}))),t.length<1)return i;let r=t[0],n=t[0],s=1;const o=BN();for(let a=0;a<512;a++){const l=(a+.5)/512;for(;l>n.ratio&&s<t.length;)r=n,n=t[s++];Bqe(o,r,n,l),i.set(o,4*a)}return i}function vwt(t,e,i){const r=Math.sqrt(t**2+e**2)/i;return r>1?0:3/(Math.PI*i**2)*(1-r**2)**2}function bwt(t){return typeof t=="function"?t:t?e=>+e[t]:()=>1}var s9;function pre(t){if(t!=null){const{maxDensity:e,minDensity:i,radius:r}=t;if(e!=null||i!=null||r!=null){const{blurRadius:n,maxPixelIntensity:s,minPixelIntensity:o,...a}=t;return a}}return t}let ls=s9=class extends Ll{constructor(t){super(t),this.authoringInfo=null,this.colorStops=[new Hf({ratio:0,color:new _e("rgba(255, 140, 0, 0)")}),new Hf({ratio:.75,color:new _e("rgba(255, 140, 0, 1)")}),new Hf({ratio:.9,color:new _e("rgba(255, 0,   0, 1)")})],this.field=null,this.legendOptions=null,this.maxDensity=.04,this.minDensity=0,this.radius=18,this.referenceScale=0,this.type="heatmap",this.valueExpression=null,this.valueExpressionTitle=null}normalizeCtorArgs(t){return pre(t)}get blurRadius(){return Uqe(this.radius)}set blurRadius(t){const e=this.maxPixelIntensity,i=this.minPixelIntensity;this._set("radius",jqe(t)),this._set("maxDensity",e*this._pixelIntensityToDensity),this._set("minDensity",i*this._pixelIntensityToDensity)}get maxPixelIntensity(){return this.maxDensity/this._pixelIntensityToDensity}set maxPixelIntensity(t){this._set("maxDensity",t*this._pixelIntensityToDensity)}get minPixelIntensity(){return this.minDensity/this._pixelIntensityToDensity}set minPixelIntensity(t){this._set("minDensity",t*this._pixelIntensityToDensity)}get _pixelIntensityToDensity(){return 24/($H**2*this.blurRadius**4)}read(t,e){t=pre(t),super.read(t,e)}getSymbol(){return new Fr}async getSymbolAsync(){return this.getSymbol()}get symbols(){return[this.getSymbol()]}async collectRequiredFields(t,e){const i=this.field,r=this.valueExpression;i&&typeof i=="string"&&ca(t,e,i),r&&typeof r=="string"&&await io(t,e,r)}getAttributeHash(){return""}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new s9({authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),colorStops:se(this.colorStops),field:this.field,legendOptions:se(this.legendOptions),maxDensity:this.maxDensity,minDensity:this.minDensity,radius:this.radius,referenceScale:this.referenceScale,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};u([h({type:Lr,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],ls.prototype,"authoringInfo",void 0),u([h({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],ls.prototype,"blurRadius",null),u([h({type:[Hf],json:{write:{isRequired:!0}}})],ls.prototype,"colorStops",void 0),u([h({type:String,json:{write:!0}})],ls.prototype,"field",void 0),u([h({type:I1,json:{write:!0}})],ls.prototype,"legendOptions",void 0),u([h({type:Number,json:{write:!0}})],ls.prototype,"maxDensity",void 0),u([h({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],ls.prototype,"maxPixelIntensity",null),u([h({type:Number,json:{write:!0}})],ls.prototype,"minDensity",void 0),u([h({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],ls.prototype,"minPixelIntensity",null),u([h({type:Number,cast:Ti,json:{write:!0}})],ls.prototype,"radius",void 0),u([h({type:Number,range:{min:0},json:{default:0,write:!0}})],ls.prototype,"referenceScale",void 0),u([at({heatmap:"heatmap"})],ls.prototype,"type",void 0),u([h({type:String,json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],ls.prototype,"valueExpression",void 0),u([h({type:String})],ls.prototype,"valueExpressionTitle",void 0),u([h({readOnly:!0})],ls.prototype,"_pixelIntensityToDensity",null),ls=s9=u([V("esri.renderers.HeatmapRenderer")],ls);let eb=class extends bt.ClonableMixin(ve){constructor(){super(...arguments),this.color=new _e([0,0,0,0]),this.label=null,this.threshold=0}};u([h({type:_e,json:{write:!0}})],eb.prototype,"color",void 0),u([h({type:String,json:{write:!0}})],eb.prototype,"label",void 0),u([h({type:Number,range:{min:0,max:1},json:{write:!0}})],eb.prototype,"threshold",void 0),eb=u([V("esri.renderers.support.OthersCategory")],eb);const Gqe={base:vo,key:"type",typeMap:{size:$i,opacity:Cf}};let Ia=class extends H$(bt.ClonableMixin(Ll)){constructor(e){super(e),this.attributes=null,this.backgroundFillSymbol=null,this.defaultColor=new _e([0,0,0,0]),this.defaultLabel=null,this.holePercentage=0,this.othersCategory=new eb,this.legendOptions=null,this.outline=null,this.size=12,this.type="pie-chart",this.visualVariables=null}getSymbol(){var e;return new Fr({size:this.size?this.size/2+(((e=this.outline)==null?void 0:e.width)||0):0})}async getSymbolAsync(){return this.getSymbol()}get symbols(){return[this.getSymbol(),this.backgroundFillSymbol].filter(Kr)}getAttributeHash(){var e;return((e=this.visualVariables)==null?void 0:e.reduce(((i,r)=>i+r.getAttributeHash()),""))??""}getMeshHash(){return this.symbols.reduce(((e,i)=>e+JSON.stringify(i)),"")}async collectRequiredFields(e,i){await this.collectVVRequiredFields(e,i);for(const r of this.attributes)r.valueExpression&&await io(e,i,r.valueExpression),r.field&&e.add(r.field)}};u([h({type:[Zve],json:{write:!0}})],Ia.prototype,"attributes",void 0),u([h(dH)],Ia.prototype,"backgroundFillSymbol",void 0),u([h({type:_e,json:{write:!0}})],Ia.prototype,"defaultColor",void 0),u([h({type:String,json:{write:!0}})],Ia.prototype,"defaultLabel",void 0),u([h({type:Number,range:{min:0,max:1},json:{write:!0}})],Ia.prototype,"holePercentage",void 0),u([h({type:eb,json:{write:!0}})],Ia.prototype,"othersCategory",void 0),u([h({type:hH,json:{write:!0}})],Ia.prototype,"legendOptions",void 0),u([h({type:Xr,json:{default:null,write:!0}})],Ia.prototype,"outline",void 0),u([h({type:Number,cast:Ti,json:{write:!0}})],Ia.prototype,"size",void 0),u([at({pieChart:"pie-chart"})],Ia.prototype,"type",void 0),u([h({types:[Gqe]})],Ia.prototype,"visualVariables",void 0),Ia=u([V("esri.renderers.PieChartRenderer")],Ia);const P2={key:"type",base:Ll,typeMap:{heatmap:ls,simple:As,"unique-value":vr,"class-breaks":Nn,"dot-density":Ea,dictionary:xu,"pie-chart":Ia},errorContext:"renderer"},qqe={key:"type",base:Ll,typeMap:{simple:As,"unique-value":vr,"class-breaks":Nn,heatmap:ls},errorContext:"renderer",validate:Hqe};function Hqe(t){switch(t.type){case"simple":return Wqe(t);case"unique-value":return Zqe(t);case"class-breaks":return Jqe(t);case"heatmap":return t}}function Wqe(t){if(t.symbol)return t;Ie.getLogger("esri.renderers.support.types").error("Removed invalid 'simple' renderer without a symbol from web scene.")}function Zqe(t){const e=t.uniqueValueInfos,i=e==null?void 0:e.filter((({symbol:r,label:n},s)=>(r||Ie.getLogger("esri.renderers.support.types").error(`Removed invalid unique value info ([${s}] ${n}) without a symbol from web scene.`),!!r)));return(i==null?void 0:i.length)!==(e==null?void 0:e.length)&&(t.uniqueValueInfos=i),t}function Jqe(t){const e=t.classBreakInfos,i=e==null?void 0:e.filter((({symbol:r,label:n},s)=>(r||Ie.getLogger("esri.renderers.support.types").error(`Removed invalid class break info ([${s}] ${n}) without a symbol from web scene.`),!!r)));return(i==null?void 0:i.length)!==(e==null?void 0:e.length)&&(t.classBreakInfos=i),t}function Yqe(t,e){return pM(t,null,e)}const Xqe=C$({types:P2});function pM(t,e,i){return t?t&&(t.styleName||t.styleUrl)&&t.type!=="uniqueValue"?(i!=null&&i.messages&&i.messages.push(new Dl("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+t.type+"'",{definition:t,context:i})),null):Xqe(t,e,i):null}var o9;let Gs=o9=class extends _g{constructor(t){super(t),this.type="binning",this.binType="geohash",this.fixedBinLevel=null,this.labelingInfo=null,this.labelsVisible=!0,this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.size=Ti("12px"),this.fields=[],this.renderer=null}writeFields(t,e,i){const r=t.filter((n=>n.statisticType!=="avg_angle")).map((n=>n.toJSON()));xn(i,r,e)}readRenderer(t,e,i){var n;const r=(n=e.drawingInfo)==null?void 0:n.renderer;return r?pM(r,e,i)??void 0:mH(e,i)}clone(){return new o9({fields:se(this.fields),fixedBinLevel:this.fixedBinLevel,labelingInfo:se(this.labelingInfo),labelsVisible:this.labelsVisible,maxScale:this.maxScale,popupEnabled:this.popupEnabled,popupTemplate:se(this.popupTemplate),renderer:se(this.renderer),binType:se(this.binType),size:this.size})}};u([at({binning:"binning"})],Gs.prototype,"type",void 0),u([at({geohash:"geohash",square:"square"}),h({type:["geohash","square"]})],Gs.prototype,"binType",void 0),u([h({type:Number,json:{write:!0}})],Gs.prototype,"fixedBinLevel",void 0),u([h({type:[Lt],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],Gs.prototype,"labelingInfo",void 0),u([h(ON)],Gs.prototype,"labelsVisible",void 0),u([h({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],Gs.prototype,"maxScale",void 0),u([h(RN)],Gs.prototype,"popupEnabled",void 0),u([h({type:pm,json:{name:"popupInfo",write:!0}})],Gs.prototype,"popupTemplate",void 0),u([h({cast:t=>t==="auto"?t:na(Ti(t))})],Gs.prototype,"size",void 0),u([h({type:[_o],json:{write:!0}})],Gs.prototype,"fields",void 0),u([Ve("fields")],Gs.prototype,"writeFields",null),u([h({types:P2,json:{write:{target:"drawingInfo.renderer"}}})],Gs.prototype,"renderer",void 0),u([De("renderer",["drawingInfo.renderer"])],Gs.prototype,"readRenderer",null),Gs=o9=u([V("esri.layers.support.FeatureReductionBinning")],Gs);var a9;function fre(t){var e;return t.type==="simple"&&!((e=t.visualVariables)!=null&&e.length)}let Dn=a9=class extends ve{constructor(t){super(t),this.type="cluster",this.clusterRadius=Ti("80px"),this.clusterMinSize=Ti("12px"),this.clusterMaxSize=Ti("50px"),this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.renderer=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=[]}readRenderer(t,e,i){var n,s;const r=(n=e.drawingInfo)==null?void 0:n.renderer;return(s=r==null?void 0:r.authoringInfo)!=null&&s.isAutoGenerated?null:r?fre(r)?null:pM(r,e,i)??void 0:mH(e,i)}readSymbol(t,e,i){var n,s;const r=(n=e.drawingInfo)==null?void 0:n.renderer;if((s=r==null?void 0:r.authoringInfo)!=null&&s.isAutoGenerated)return null;if(r&&fre(r)){const o=pM(r,e,i);return o==null?void 0:o.symbol}return null}writeSymbol(t,e,i,r){var s,o;const n=(o=(s=this.renderer)==null?void 0:s.authoringInfo)==null?void 0:o.isAutoGenerated;if(!this.renderer||n){const a=new As({symbol:t});e.drawingInfo={renderer:a.write({},r)}}}writeFields(t,e,i){const r=t.filter((n=>n.statisticType!=="avg_angle")).map((n=>n.toJSON()));xn(i,r,e)}readFields(t,e,i){return t.filter((r=>!r.isAutoGenerated)).map((r=>_o.fromJSON(r)))}clone(){return new a9({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:se(this.labelingInfo),labelsVisible:this.labelsVisible,fields:se(this.fields),maxScale:this.maxScale,renderer:se(this.renderer),symbol:se(this.symbol),popupEnabled:this.popupEnabled,popupTemplate:se(this.popupTemplate)})}};u([h({type:["cluster"],readOnly:!0,json:{write:!0}})],Dn.prototype,"type",void 0),u([h({cast:t=>t==="auto"?t:na(Ti(t)),json:{write:!0}})],Dn.prototype,"clusterRadius",void 0),u([h({type:Number,cast:Ti,json:{write:!0}})],Dn.prototype,"clusterMinSize",void 0),u([h({type:Number,cast:Ti,json:{write:!0}})],Dn.prototype,"clusterMaxSize",void 0),u([h({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],Dn.prototype,"maxScale",void 0),u([h(RN)],Dn.prototype,"popupEnabled",void 0),u([h({type:pm,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],Dn.prototype,"popupTemplate",void 0),u([h({types:P2,json:{write:{target:"drawingInfo.renderer"}}})],Dn.prototype,"renderer",void 0),u([De("renderer",["drawingInfo.renderer"])],Dn.prototype,"readRenderer",null),u([h({types:PNe})],Dn.prototype,"symbol",void 0),u([De("symbol",["drawingInfo.renderer"])],Dn.prototype,"readSymbol",null),u([Ve("symbol")],Dn.prototype,"writeSymbol",null),u([h({type:[Lt],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],Dn.prototype,"labelingInfo",void 0),u([h(ON)],Dn.prototype,"labelsVisible",void 0),u([h({type:[_o],json:{write:!0}})],Dn.prototype,"fields",void 0),u([Ve("fields")],Dn.prototype,"writeFields",null),u([De("fields")],Dn.prototype,"readFields",null),Dn=a9=u([V("esri.layers.support.FeatureReductionCluster")],Dn);var l9;let SC=l9=class extends _g{constructor(t){super(t),this.type="selection"}clone(){return new l9}};u([h({type:["selection"]})],SC.prototype,"type",void 0),SC=l9=u([V("esri.layers.support.FeatureReductionSelection")],SC);const mre={key:"type",base:_g,typeMap:{cluster:Dn,binning:Gs}},Kqe={types:{key:"type",base:_g,typeMap:{selection:SC,cluster:Dn,binning:Gs}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:mre},"portal-item":{types:mre},"web-scene":{types:{key:"type",base:_g,typeMap:{selection:SC}},name:"layerDefinition.featureReduction",write:{layerContainerTypes:pr}}}}},Qqe=()=>Ie.getLogger("esri.views.2d.layers.support.clusterUtils");fe.add("esri-cluster-arcade-enabled",!0);const eHe=fe("esri-cluster-arcade-enabled"),tHe=new Set(["simple-line","simple-fill","picture-fill"]);function yre(t,e){let i=e.clone();if(!iHe(i))return i;if(e.symbols.some((r=>tHe.has(r.type)))&&(i=new As({symbol:new Fr})),i.authoringInfo||(i.authoringInfo=new Lr),i.authoringInfo.isAutoGenerated=!0,"visualVariables"in i){const r=(i.visualVariables||[]).filter((n=>n.valueExpression!=="$view.scale"));r.forEach((n=>{n.type==="rotation"?n.field?n.field=Zv(t,n.field,"avg_angle","number"):n.valueExpression&&(n.field=uE(t,n.valueExpression,"avg_angle","number"),n.valueExpression=null):n.normalizationField?(n.field=Zv(t,n.field,"avg_norm","number",n.normalizationField),n.normalizationField=null):n.field?n.field=Zv(t,n.field,"avg","number"):n.valueExpression&&(n.field=uE(t,n.valueExpression,"avg","number"),n.valueExpression=null)})),i.visualVariables=r}switch(i.type){case"simple":break;case"pie-chart":for(const r of i.attributes)r.field?r.field=Zv(t,r.field,"sum","number"):r.valueExpression&&(r.field=uE(t,r.valueExpression,"sum","number"),r.valueExpression=null);break;case"unique-value":i.field?i.field=Zv(t,i.field,"mode","string"):i.valueExpression&&(i.field=uE(t,i.valueExpression,"mode","string"),i.valueExpression=null);break;case"class-breaks":i.normalizationField?(i.field=Zv(t,i.field,"avg_norm","number",i.normalizationField),i.normalizationField=null):i.field?i.field=Zv(t,i.field,"avg","number"):i.valueExpression&&(i.field=uE(t,i.valueExpression,"avg","number"),i.valueExpression=null)}return i}const iHe=t=>{const e=i=>Qqe().error(new ie("Unsupported-renderer",i,{renderer:t}));if(!t)return!1;switch(t.type){case"unique-value":if(t.field2||t.field3)return e("FeatureReductionCluster does not support multi-field UniqueValueRenderers"),!1;break;case"class-breaks":if(t.normalizationField){const i=t.normalizationType;if(i!=="field")return e(`FeatureReductionCluster does not support a normalizationType of ${i}`),!1}break;case"simple":case"pie-chart":break;default:return e(`FeatureReductionCluster does not support renderers of type ${t.type}`),!1}if(!eHe){if("valueExpression"in t&&t.valueExpression)return e("FeatureReductionCluster does not currently support renderer.valueExpression. Support will be added in a future release"),!1;if(("visualVariables"in t&&t.visualVariables||[]).some((i=>!(!("valueExpression"in i)||!i.valueExpression))))return e("FeatureReductionCluster does not currently support visualVariables with a valueExpression. Support will be added in a future release"),!1}return!0};function rHe(t,e,i){switch(t){case"sum":return`cluster_sum_${e}`;case"avg":case"avg_angle":return`cluster_avg_${e}`;case"mode":return`cluster_type_${e}`;case"avg_norm":{const r=i,n="field",s=e.toLowerCase()+",norm:"+n+","+r.toLowerCase();return"cluster_avg_"+fq(s)}}}function uE(t,e,i,r){const n=fq(e),s=i==="mode"?`cluster_type_${n}`:i==="sum"?`cluster_sum_${n}`:`cluster_avg_${n}`;return t.some((o=>o.name===s))||t.push(new _o({name:s,isAutoGenerated:!0,onStatisticExpression:new Hy({expression:e,returnType:r}),statisticType:i})),s}function Zv(t,e,i,r,n){if(e==="cluster_count"||t.some((o=>o.name===e)))return e;const s=rHe(i,e,n);return t.some((o=>o.name===s))||(i==="avg_norm"?t.push(new _o({name:s,isAutoGenerated:!0,onStatisticExpression:new Hy({expression:`$feature.${e} / $feature.${n}`,returnType:r}),statisticType:"avg"})):t.push(new _o({name:s,isAutoGenerated:!0,onStatisticField:e,statisticType:i}))),s}const nHe=t=>{let e=class extends t{constructor(...i){super(...i),this.addHandles($e((()=>this.renderer),(()=>{if(this.featureReduction){const r=this._normalizeFeatureReduction(this.featureReduction);this._set("featureReduction",r)}}),td))}set featureReduction(i){const r=this._normalizeFeatureReduction(i);this._set("featureReduction",r)}set renderer(i){}_withClusterVariable(i,r,n){const s=i.clone();return"visualVariables"in s&&(s.visualVariables||(s.visualVariables=[]),s.visualVariables.some((o=>o.type==="size"))||s.visualVariables.push(new $i({field:"cluster_count",stops:[new Ru({value:1}),new Ru({useMinValue:!0,size:r}),new Ru({useMaxValue:!0,size:n})]}))),s}_normalizeFeatureReduction(i){var f;if((i==null?void 0:i.type)!=="cluster")return i;const r=i.clone(),n=[new _o({name:"cluster_count",alias:"cluster_count",isAutoGenerated:!0,statisticType:"count"})],s=(r.fields??[]).filter((y=>!y.isAutoGenerated)),o=i.renderer&&!((f=i.renderer.authoringInfo)!=null&&f.isAutoGenerated),{clusterMinSize:a,clusterMaxSize:l}=r;if(o){r.fields=[...n,...s];const y=this._withClusterVariable(r.renderer,a,l);return r.effectiveFeatureRenderer=y,r.effectiveClusterRenderer=y,r}if(i.symbol){if(r.fields=[...n,...s],r.renderer=null,!this.renderer)return r.effectiveFeatureRenderer=null,r.effectiveClusterRenderer=null,r;const y=yre(n,this.renderer),g=this._withClusterVariable(y,a,l),b="visualVariables"in g&&g.visualVariables?g.visualVariables:[],_=new As({symbol:i.symbol,visualVariables:b});return r.fields=[...n,...s],r.effectiveFeatureRenderer=g,r.effectiveClusterRenderer=_,r}if(!this.renderer)return i;const c=yre(n,this.renderer);r.fields=[...n,...s],r.renderer=c;const d=this._withClusterVariable(c,a,l);return r.effectiveFeatureRenderer=d,r.effectiveClusterRenderer=d,r}};return u([h(Kqe)],e.prototype,"featureReduction",null),e=u([V("esri.layers.mixins.FeatureReductionLayer")],e),e},gre={ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,ArcGISVideoLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GeoRSS:!0,GroupLayer:!0,KML:!0,KnowledgeGraphLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},vre={ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},bre={ArcGISFeatureLayer:!0,SubtypeGroupTable:!0},sHe={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GroupLayer:!0,IntegratedMesh3DTilesLayer:!0,Object3DTilesLayer:!0,IntegratedMeshLayer:!0,KML:!0,LineOfSightLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,RasterDataLayer:!0,VectorTileLayer:!0,ViewshedLayer:!0,Voxel:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/basemap":{ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-scene/tables":{ArcGISFeatureLayer:!0},"web-map/operational-layers":gre,"web-map/basemap":vre,"web-map/tables":bre,"link-chart/operational-layers":{...gre,LinkChartLayer:!0},"link-chart/basemap":vre,"link-chart/tables":bre,"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,BuildingSceneLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,MediaLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,SubtypeGroupLayer:!0,WCS:!0},"portal-item/tables":{ArcGISFeatureLayer:!0,SubtypeGroupTable:!0}},oHe=t=>{let e=class extends t{constructor(){super(...arguments),this.persistenceEnabled=!0,this.title=null}readId(i,r,n){var s;return((s=n==null?void 0:n.portalItem)==null?void 0:s.type)==="Group Layer"?void 0:i}writeListMode(i,r,n,s){(s&&s.layerContainerType==="ground"||i&&nIe(this,n,{},s))&&(r[n]=i)}writeOperationalLayerType(i,r,n){i&&(r[n]=i)}writeTitle(i,r){r.title=i??"Layer"}readVisibilityTimeExtent(i){return i?Hi.fromArray(i):null}writeVisibilityTimeExtent(i,r,n,s){i&&s.layerContainerType!=="tables"&&(i.isEmpty?s!=null&&s.messages&&s.messages.push(new ie("layer:invalid-visibilityTimeExtent","visibilityTimeExtent cannot be empty")):r[n]=i.toArray())}read(i,r){r&&(r.layer=this),mce(this,i,(n=>super.read(i,n)),r)}write(i,r){var o,a;if(!this.persistenceEnabled&&!(r!=null&&r.ignorePersistenceEnabled))return null;if(r!=null&&r.origin){const l=`${r.origin}/${r.layerContainerType||"operational-layers"}`,c=sHe[l];let d=!!(c!=null&&c[this.operationalLayerType]);if(this.operationalLayerType==="ArcGISTiledElevationServiceLayer"&&l==="web-scene/operational-layers"&&(d=!1),this.operationalLayerType==="ArcGISDimensionLayer"&&l==="web-map/operational-layers"&&(d=!1),!d)return(o=r.messages)==null||o.push(new ie("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${l}'`,{layer:this})),null}const n=super.write(i,{...r,layer:this}),s=!!r&&!!r.messages&&!!r.messages.filter((l=>l instanceof ie&&l.name==="web-document-write:property-required")).length;return A$(n==null?void 0:n.url)?((a=r==null?void 0:r.messages)==null||a.push(new ie("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&s?null:n}beforeSave(){}};return u([h({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],e.prototype,"id",void 0),u([De("id",["id"])],e.prototype,"readId",null),u([h(Bge)],e.prototype,"listMode",void 0),u([Ve("listMode")],e.prototype,"writeListMode",null),u([h({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1},"web-scene":{name:"layerType",read:!1,write:{enabled:!0,ignoreOrigin:!0,layerContainerTypes:pr,isRequired:!0}}}}})],e.prototype,"operationalLayerType",void 0),u([Ve("operationalLayerType")],e.prototype,"writeOperationalLayerType",null),u([h(h8)],e.prototype,"opacity",void 0),u([h({type:Boolean,readOnly:!1})],e.prototype,"persistenceEnabled",void 0),u([h({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],e.prototype,"title",void 0),u([Ve("title"),Ve(["web-scene"],"title")],e.prototype,"writeTitle",null),u([h({type:Hi,json:{origins:{"web-scene":{write:{layerContainerTypes:pr}}}}})],e.prototype,"visibilityTimeExtent",void 0),u([De("visibilityTimeExtent")],e.prototype,"readVisibilityTimeExtent",null),u([Ve(["portal-item","web-map","web-scene"],"visibilityTimeExtent",{visibilityTimeExtent:{type:[[si,I$]]}})],e.prototype,"writeVisibilityTimeExtent",null),u([h({type:Boolean,json:{name:"visibility",write:{layerContainerTypes:pr}}})],e.prototype,"visible",void 0),e=u([V("esri.layers.mixins.OperationalLayer")],e),e};var c9;const WP=new Gt({asc:"ascending",desc:"descending"});var MS;let tb=(MS=class extends ve{constructor(e){super(e),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new c9({field:this.field,valueExpression:this.valueExpression,order:this.order})}},c9=MS,MS);u([h({type:String,json:{write:!0}})],tb.prototype,"field",void 0),u([h({type:String,json:{write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],tb.prototype,"valueExpression",void 0),u([h({type:WP.apiValues,json:{type:WP.jsonValues,read:WP.read,write:WP.write}})],tb.prototype,"order",void 0),tb=c9=u([V("esri.layers.support.OrderByInfo")],tb);function aHe(t,e,i){if(!t)return null;const r=t.find((s=>!!s.field));if(!r)return null;const n=new tb;return n.read(r,i),[n]}function lHe(t,e,i,r){const n=t.find((s=>!!s.field));n&&xn(i,[n.toJSON()],e)}const cHe={type:[tb],json:{origins:{"web-scene":{write:!1,read:!1}},name:"layerDefinition.orderBy",read:{reader:aHe},write:{writer:lHe}}},uHe=t=>{let e=class extends t{constructor(){super(...arguments),this.orderBy=null}};return u([h(cHe)],e.prototype,"orderBy",void 0),e=u([V("esri.layers.mixins.OrderedLayer")],e),e},dHe=t=>{let e=class extends t{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=hr(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(i){i!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",i))}readPortalItem(i,r,n){if(r.itemId)return new At({id:r.itemId,portal:n==null?void 0:n.portal})}writePortalItem(i,r){i!=null&&i.id&&(r.itemId=i.id)}async loadFromPortal(i,r){var n;if((n=this.portalItem)!=null&&n.id)try{const{load:s}=await ye(()=>import("./layersLoader-K1mJ11g5.js"),__vite__mapDeps([237,142,141,143]));return Wi(r),await s({instance:this,supportedTypes:i.supportedTypes,validateItem:i.validateItem,supportsData:i.supportsData,layerModuleTypeMap:i.layerModuleTypeMap,populateGroupLayer:i.populateGroupLayer},r)}catch(s){throw Tn(s)||Ie.getLogger(this).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})
  ${s}`),s}}async finishLoadEditablePortalLayer(i){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(i).catch((r=>(dh(r),!0))))}async setUserPrivileges(i,r){if(!Si.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(r);if(this.url)try{const{features:{edit:n,fullEdit:s},content:{updateItem:o}}=await this._fetchUserPrivileges(i,r);this._set("userHasEditingPrivileges",n),this._set("userHasFullEditingPrivileges",s),this._set("userHasUpdateItemPrivileges",o)}catch(n){dh(n)}}async _fetchUserPrivileges(i,r){let n=this.portalItem;if(!i||!n||!n.loaded||n.sourceUrl)return this._fetchFallbackUserPrivileges(r);const s=!(Rt!=null&&Rt.findCredential(this.url)),o=i===n.id;if(o&&n.portal.user)return this._getUserPrivileges(n,s);let a,l;if(o)a=n.portal.url;else try{a=await hq(this.url,r)}catch(y){dh(y)}if(!a||!bIe(a,n.portal.url))return this._fetchFallbackUserPrivileges(r);try{const y=r!=null?r.signal:null;l=await(Rt==null?void 0:Rt.getCredential(`${a}/sharing`,{prompt:!1,signal:y}))}catch(y){dh(y)}const c=!0,d=!1,f=!1;if(!l)return{features:{edit:c,fullEdit:d},content:{updateItem:f}};try{if(o?await n.reload():(n=new At({id:i,portal:{url:a}}),await n.load(r)),n.portal.user)return this._getUserPrivileges(n,s)}catch(y){dh(y)}return{features:{edit:c,fullEdit:d},content:{updateItem:f}}}_getUserPrivileges(i,r){const n=V6e(i);return r&&(n.features.edit=!0),n}async _fetchFallbackUserPrivileges(i){let r=!0;try{r=await this._fetchUserHasEditingPrivileges(i)}catch(n){dh(n)}return{features:{edit:r,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(i){const r=this.url?Rt==null?void 0:Rt.findCredential(this.url):null;if(!r)return!0;const n=ZP.credential===r?ZP.user:await this._fetchEditingUser(i);return ZP.credential=r,ZP.user=n,(n==null?void 0:n.privileges)==null||n.privileges.includes("features:user:edit")}async _fetchEditingUser(i){var d,f;const r=(f=(d=this.portalItem)==null?void 0:d.portal)==null?void 0:f.user;if(r)return r;const n=Rt==null?void 0:Rt.findServerInfo(this.url??"");if(!(n!=null&&n.owningSystemUrl))return null;const s=`${n.owningSystemUrl}/sharing/rest`,o=ze.getDefault();if(o&&o.loaded&&Yu(o.restUrl)===Yu(s))return o.user;const a=`${s}/community/self`,l=i!=null?i.signal:null,c=await lN(fi(a,{authMode:"no-prompt",query:{f:"json"},signal:l}));return c.ok?Xi.fromJSON(c.value.data):null}read(i,r){r&&(r.layer=this),super.read(i,r)}write(i,r){var o;const n=r==null?void 0:r.portal,s=((o=this.portalItem)==null?void 0:o.id)&&(this.portalItem.portal||ze.getDefault());return n&&s&&!Ice(s.restUrl,n.restUrl)?(r.messages&&r.messages.push(new ie("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(i,{...r,layer:this})}};return u([h({type:At})],e.prototype,"portalItem",null),u([De("web-document","portalItem",["itemId"])],e.prototype,"readPortalItem",null),u([Ve("web-document","portalItem",{itemId:{type:String}})],e.prototype,"writePortalItem",null),u([h({clonable:!1})],e.prototype,"resourceReferences",void 0),u([h({type:Boolean,readOnly:!0})],e.prototype,"userHasEditingPrivileges",void 0),u([h({type:Boolean,readOnly:!0})],e.prototype,"userHasFullEditingPrivileges",void 0),u([h({type:Boolean,readOnly:!0})],e.prototype,"userHasUpdateItemPrivileges",void 0),e=u([V("esri.layers.mixins.PortalLayer")],e),e},ZP={credential:null,user:null};let TI=class extends tt{constructor(){super(...arguments),this.updating=!1,this.status="unknown"}};u([h()],TI.prototype,"updating",void 0),u([h()],TI.prototype,"status",void 0),TI=u([V("esri.layers.support.PublishingInfo")],TI);const hHe=Symbol(),pHe=t=>{var r;var e;let i=(r=class extends t{constructor(){super(...arguments),this[e]=!0}get publishingInfo(){if(this.destroyed)return null;const n=this._get("publishingInfo");if(n)return n;const s=new TI;return this._checkPublishingStatus(s),s}_checkPublishingStatus(n){let a=0;const l=async d=>{let f;n.updating=!0;try{f=await this.fetchPublishingStatus()}catch{f="unavailable"}f!=="published"&&f!=="unavailable"||(n.status==="publishing"&&this.refresh(),c.remove()),n.status=f,n.updating=!1,c.removed||(a=setTimeout(l,d,d+125))},c={removed:!1,remove(){this.removed=!0,clearTimeout(a)}};this.when().catch((()=>c.remove())),l(250),this.addHandles(c)}},e=hHe,r);return u([h({readOnly:!0,clonable:!1})],i.prototype,"publishingInfo",null),i=u([V("esri.layers.mixins.PublishableLayer")],i),i},ug=new Ze,$C=new WeakMap;function fHe(t){yHe(t)&&ug.push(new WeakRef(t))}function mHe(t){const e=ug.find((i=>i.deref()===t));e&&ug.remove(e)}function yHe(t){return t!=null&&typeof t=="object"&&"refreshInterval"in t&&"refresh"in t}function c0e(t,e){return Number.isFinite(t)&&Number.isFinite(e)?e<=0?t:c0e(e,t%e):0}let A4=0,JP=0;function gHe(){const t=Date.now();let e=!1;for(const i of ug){const r=i.deref();r?r.refreshInterval&&t-($C.get(r)??0)+5>=6e4*r.refreshInterval&&($C.set(r,t),r.refresh(t)):e=!0}if(e)for(let i=ug.length-1;i>=0;i--)ug.at(i).deref()||ug.removeAt(i)}Lle((()=>{const t=Date.now();let e=0;for(const i of ug){const r=i.deref();r&&(e=c0e(Math.round(6e4*r.refreshInterval),e),r.refreshInterval?$C.get(r)||$C.set(r,t):$C.delete(r))}if(e!==JP){if(JP=e,clearInterval(A4),JP===0)return void(A4=0);A4=setInterval(gHe,JP)}}),td);const wre=.1,vHe=t=>{let e=class extends t{constructor(...i){super(...i),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=Zu((()=>this.hasDataChanged())),this.when().then((()=>{this.destroyed||fHe(this)}),(()=>{}))}destroy(){mHe(this)}castRefreshInterval(i){return i>=wre?i:i<=0?0:wre}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(i=Date.now()){Wu(this._debounceHasDataChanged()).then((r=>{r&&this._set("refreshTimestamp",i),this.emit("refresh",{dataChanged:r})}),(r=>{Ie.getLogger(this).error(r),this.emit("refresh",{dataChanged:!1,error:r})}))}async hasDataChanged(){return!0}get test(){}};return u([h({type:Number,json:{write:!0,origins:{"web-scene":{write:{enabled:!0,layerContainerTypes:pr}}}}})],e.prototype,"refreshInterval",void 0),u([yi("refreshInterval")],e.prototype,"castRefreshInterval",null),u([h({readOnly:!0})],e.prototype,"refreshTimestamp",void 0),u([h({readOnly:!0})],e.prototype,"refreshParameters",null),e=u([V("esri.layers.mixins.RefreshableLayer")],e),e},bHe=t=>{let e=class extends t{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const i={minScale:this.minScale,maxScale:this.maxScale},r=this.parent;r&&"effectiveScaleRange"in r&&wHe(i,r.effectiveScaleRange);const n=this._get("effectiveScaleRange");return n&&n.minScale===i.minScale&&n.maxScale===i.maxScale?n:i}};return u([h({type:Number,nonNullable:!0,json:{write:!0}})],e.prototype,"minScale",void 0),u([h({type:Number,nonNullable:!0,json:{write:!0}})],e.prototype,"maxScale",void 0),u([h({readOnly:!0})],e.prototype,"effectiveScaleRange",null),e=u([V("esri.layers.mixins.ScaleRangeLayer")],e),e};function wHe(t,e){return t.minScale=t.minScale>0?e.minScale>0?Math.min(t.minScale,e.minScale):t.minScale:e.minScale,t.maxScale=t.maxScale>0?e.maxScale>0?Math.max(t.maxScale,e.maxScale):t.maxScale:e.maxScale,t}function _re(t,e){return Gu.fromJSON({value:t,unit:e})}let Ss=class extends bt.ClonableMixin(ve){constructor(e){super(e),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeZone=null,this.trackIdField=null,this.useTime=!0,this.stops=null}readFullTimeExtent(e,i){return i.timeExtent&&Array.isArray(i.timeExtent)&&i.timeExtent.length===2?Hi.fromArray(i.timeExtent):null}writeFullTimeExtent(e,i){(e==null?void 0:e.start)!=null&&e.end!=null?i.timeExtent=e.toArray():i.timeExtent=null}readInterval(e,i){return i.timeInterval&&i.timeIntervalUnits?_re(i.timeInterval,i.timeIntervalUnits):i.defaultTimeInterval&&i.defaultTimeIntervalUnits?_re(i.defaultTimeInterval,i.defaultTimeIntervalUnits):null}writeInterval(e,i){i.timeInterval=(e==null?void 0:e.toJSON().value)??null,i.timeIntervalUnits=(e==null?void 0:e.toJSON().unit)??null}};u([h({type:Boolean,json:{name:"exportOptions.timeDataCumulative",write:!0}})],Ss.prototype,"cumulative",void 0),u([h({type:String,json:{name:"endTimeField",write:{enabled:!0,allowNull:!0}}})],Ss.prototype,"endField",void 0),u([h({type:Hi,json:{write:{enabled:!0,allowNull:!0}}})],Ss.prototype,"fullTimeExtent",void 0),u([De("fullTimeExtent",["timeExtent"])],Ss.prototype,"readFullTimeExtent",null),u([Ve("fullTimeExtent")],Ss.prototype,"writeFullTimeExtent",null),u([h({type:Boolean,json:{write:!0}})],Ss.prototype,"hasLiveData",void 0),u([h({type:Gu,json:{write:{enabled:!0,allowNull:!0}}})],Ss.prototype,"interval",void 0),u([De("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],Ss.prototype,"readInterval",null),u([Ve("interval")],Ss.prototype,"writeInterval",null),u([h({type:String,json:{name:"startTimeField",write:{enabled:!0,allowNull:!0}}})],Ss.prototype,"startField",void 0),u([h(oO("timeReference",!0))],Ss.prototype,"timeZone",void 0),u([h({type:String,json:{write:{enabled:!0,allowNull:!0}}})],Ss.prototype,"trackIdField",void 0),u([h({type:Boolean,json:{name:"exportOptions.useTime",write:!0}})],Ss.prototype,"useTime",void 0),u([h({type:[Date],json:{read:!1}})],Ss.prototype,"stops",void 0),Ss=u([V("esri.layers.support.TimeInfo")],Ss);const _He={type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation",layerContainerTypes:pr}}},xHe=t=>{let e=class extends t{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(i,r){const n=r.timeInfo.exportOptions;if(!n)return null;const s=n.timeOffset,o=eH.fromJSON(n.timeOffsetUnits);return s&&o?new Gu({value:s,unit:o}):null}set timeInfo(i){efe(i,this.fieldsIndex),this._set("timeInfo",i)}};return u([h({type:Hi,json:{write:!1}})],e.prototype,"timeExtent",void 0),u([h({type:Gu})],e.prototype,"timeOffset",void 0),u([De("service","timeOffset",["timeInfo.exportOptions"])],e.prototype,"readOffset",null),u([h({value:null,type:Ss,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],e.prototype,"timeInfo",null),u([h(_He)],e.prototype,"useViewTime",void 0),e=u([V("esri.layers.mixins.TemporalLayer")],e),e};let Sc=class extends bt.ClonableMixin(ve){constructor(e){super(e),this.labelingInfo=null,this.labelsVisible=!0,this.renderer=null,this.visible=!0}};u([h({type:[Lt],json:{write:!0}})],Sc.prototype,"labelingInfo",void 0),u([h(ON)],Sc.prototype,"labelsVisible",void 0),u([h({types:P2,json:{write:!0}})],Sc.prototype,"renderer",void 0),u([h({type:Boolean,json:{write:!0}})],Sc.prototype,"visible",void 0),Sc=u([V("esri.layers.support.TrackPartInfo")],Sc);let Ca=class extends bt.ClonableMixin(ve){constructor(e){super(e),this.enabled=!0,this.fields=[],this.latestObservations=new Sc({renderer:new As({symbol:WO.clone()})}),this.maxDisplayDuration=null,this.maxDisplayObservationsPerTrack=0,this.popupEnabled=!0,this.popupTemplate=null,this.previousObservations=new Sc({renderer:new As({symbol:WO.clone()})}),this.trackLines=new Sc({renderer:new As({symbol:zN.clone()})}),this.timeField="startTimeField"}writeFields(e,i,r){const n=e.filter((s=>s.statisticType!=="avg_angle")).map((s=>s.toJSON()));xn(r,n,i)}};u([h({type:Boolean,json:{write:!0}})],Ca.prototype,"enabled",void 0),u([h({type:[_o],json:{write:!0}})],Ca.prototype,"fields",void 0),u([Ve("fields")],Ca.prototype,"writeFields",null),u([h({type:Sc,json:{write:!0}})],Ca.prototype,"latestObservations",void 0),u([h({type:Gu,json:{write:!0}})],Ca.prototype,"maxDisplayDuration",void 0),u([h({type:Number,json:{write:!0}})],Ca.prototype,"maxDisplayObservationsPerTrack",void 0),u([h(RN)],Ca.prototype,"popupEnabled",void 0),u([h({type:pm,json:{name:"popupInfo",write:!0}})],Ca.prototype,"popupTemplate",void 0),u([h({type:Sc,json:{write:!0}})],Ca.prototype,"previousObservations",void 0),u([h({type:Sc,json:{write:!0}})],Ca.prototype,"trackLines",void 0),u([h({type:["timeReceived","startTimeField","endTimeField"],json:{read:!0,write:!0}})],Ca.prototype,"timeField",void 0),Ca=u([V("esri.layers.support.TrackInfo")],Ca);const SHe=t=>{let e=class extends t{constructor(){super(...arguments),this.trackInfo=null}};return u([h({type:Ca})],e.prototype,"trackInfo",void 0),e=u([V("esri.layers.mixins.TrackableLayer")],e),e},xre=new Gt({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let rh=class extends bt.ClonableMixin(ve){constructor(e){super(e),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};u([h({json:{write:!0}})],rh.prototype,"name",void 0),u([h({json:{write:!0}})],rh.prototype,"description",void 0),u([h({json:{read:xre.read,write:xre.write}})],rh.prototype,"drawingTool",void 0),u([h({json:{write:!0}})],rh.prototype,"prototype",void 0),u([h({json:{write:!0}})],rh.prototype,"thumbnail",void 0),rh=u([V("esri.layers.support.FeatureTemplate")],rh);let eh=class extends bt.ClonableMixin(ve){constructor(e){super(e),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(e){const i={};for(const r of Object.keys(e))i[r]=_N(e[r]);return i}writeDomains(e,i){var n;const r={};for(const s of Object.keys(e))e[s]&&(r[s]=(n=e[s])==null?void 0:n.toJSON());i.domains=r}};u([h({json:{write:!0}})],eh.prototype,"id",void 0),u([h({json:{write:!0}})],eh.prototype,"name",void 0),u([h({json:{write:!0}})],eh.prototype,"domains",void 0),u([De("domains")],eh.prototype,"readDomains",null),u([Ve("domains")],eh.prototype,"writeDomains",null),u([h({type:[rh],json:{write:!0}})],eh.prototype,"templates",void 0),eh=u([V("esri.layers.support.FeatureType")],eh);function $He(){return{fields:{type:[cs],value:null,set:function(t){if(t&&fe("big-integer-warning-enabled")){const e=t.filter((i=>i.type==="big-integer"||i.type==="oid"&&(i.length||0)>=8));if(e.length){const i=e.map((r=>`'${r.name}'`)).join(", ");Ie.getLogger(this).warn("#fields",`Layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}') references big-integer field(s): ${i}, support for which is experimental. Only integers less than ${Number.MAX_SAFE_INTEGER} (Number.MAX_SAFE_INTEGER) are supported.`)}}this._set("fields",t)}},fieldsIndex:{readOnly:!0,get(){return hM.fromLayer(this)}},outFields:{type:[String],json:{read:!1},set:function(t){this._userOutFields=t,this.notifyChange("outFields")},get:function(){var e;const t=this._userOutFields;if(!(t!=null&&t.length))return null;if(t.includes("*"))return["*"];if(!this.fields)return t;for(const i of t)((e=this.fieldsIndex)==null?void 0:e.has(i))||Ie.getLogger("esri.layers.support.fieldProperties").error("field-attributes-layer:invalid-field",`Invalid field ${i} found in outFields`,{layer:this,outFields:t});return yN(this.fieldsIndex,t)}}}}const L4=()=>Ie.getLogger("esri.layers.support.labelingInfo"),THe=/\[([^[\]]+)\]/gi;function Sre(t,e,i){return t?t.map((r=>{var s;const n=new Lt;if(n.read(r,i),n.labelExpression){const o=e.fields||((s=e.layerDefinition)==null?void 0:s.fields)||this.fields;n.labelExpression=n.labelExpression.replaceAll(THe,((a,l)=>`[${EHe(l,o)}]`))}return n})):null}function EHe(t,e){if(!e)return t;const i=t.toLowerCase();for(let r=0;r<e.length;r++){const n=e[r].name;if(n.toLowerCase()===i)return n}return t}const $re=["above-right","above-center","above-left","center-center","center-left","center-right","below-center","below-left","below-right"],IHe={esriGeometryPoint:$re,esriGeometryMultiPatch:["always-horizontal"],esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:["center-along","above-along","below-along"],esriGeometryMultipoint:$re,esriGeometryEnvelope:null};function Cwt(t,e){const i=[];for(const r of t){const n=r.labelPlacement,s=IHe[e];if(!r.symbol)return L4().warn("No ILabelClass symbol specified."),[];if(!s)return L4().error(new ie("labeling:unsupported-geometry-type",`Unable to create labels for layer, geometry type '${e}' is not supported`)),[];if(s.includes(n))i.push(r);else{const o=s[0];n&&L4().warn(`Found invalid label placement type ${n} for ${e}. Defaulting to ${o}`);const a=r.clone();a.labelPlacement=o,i.push(a)}}return i}const CHe="relationships/",MHe="expression/";let Wo=class extends tt{constructor(e){super(e),this._featureUtils=null,this.effectivePopupTemplate=null}get _arcadeTask(){return this.expressionsUsedInTitle.length>0?this._get("_arcadeTask")||Fg((()=>fp())):null}get featureUtilsPromise(){return this._get("featureUtilsPromise")??ye(()=>Promise.resolve().then(()=>VJe),void 0).then((e=>this._featureUtils=e))}get calculatedExpressions(){var i;const e=new Ze;if(!this.expressionsUsedInTitle.length)return e;if(!((i=this._arcadeTask)!=null&&i.value)){for(const r of this.expressionsUsedInTitle??[])e.push({name:r.name,invalid:!0});return e}for(const r of this.expressionsUsedInTitle)try{const n=this._arcadeTask.value.arcade.parseScript(r.expression,["$layer","$map","$datastore"]);if(n.isAsync){e.push({name:r.name,invalid:!0});break}e.push({name:r.name,syntax:n,invalid:!1,func:this._arcadeTask.value.arcade.compileScript(n,{vars:{$feature:"any"}})})}catch{e.push({name:r.name,invalid:!0});break}return e}get expressionsUsedInTitle(){var i,r,n;let e=((i=this.effectivePopupTemplate)==null?void 0:i.title)??"";return typeof e!="string"?[]:(e=e.toLowerCase(),((n=(r=this.effectivePopupTemplate)==null?void 0:r.expressionInfos)==null?void 0:n.filter((s=>e.includes(`{expression/${s.name.toLowerCase()}}`))))??[])}get fieldInfoMap(){return this._featureUtils?this._createFieldInfoMap(this._featureUtils.getAllFieldInfos(this.effectivePopupTemplate)):null}get hasBadExpressions(){return this.calculatedExpressions.some((e=>e.invalid===!0))}get requiredFields(){var r,n;const e=new Set;if((r=this._arcadeTask)!=null&&r.value&&!this.hasBadExpressions)for(const s of((n=this.calculatedExpressions)==null?void 0:n.toArray())??[])try{const o=this._arcadeTask.value.arcade.extractFieldLiterals(s.syntax);for(const a of o){const l=a.split("."),c=this.fieldsIndex.get(l.at(-1)??"");c&&e.add(c.name)}}catch{}const i=this._extractFieldNames(this.workingTitle);for(const s of i){const o=this.fieldsIndex.get(s);o&&e.add(o.name)}return this.objectIdField!=null&&e.add(this.objectIdField),e}get titleFromDisplayField(){var i,r;let e="";return this.displayField&&(e=((i=this.fieldsIndex.get(this.displayField))==null?void 0:i.name)??""),e||(e=((r=this.fieldsIndex.get(this.objectIdField))==null?void 0:r.name)??""),e?`{${e}}`:""}get workingTitle(){const e=this.effectivePopupTemplate?this.effectivePopupTemplate.title:"";return e===""||e==null||this.hasBadExpressions||typeof e!="string"?this.titleFromDisplayField:e}async getTitle(e,i,r){const n=i.getObjectId()??i.attributes[e.objectIdField];return(await this.getTitles(e,[i],r)).get(n)??""}async getTitles(e,i,r){var o;const n=new Map,s=(r==null?void 0:r.timeZone)??"system";try{const[{substituteFieldsInLinksAndAttributes:a}]=await Promise.all([this.featureUtilsPromise,(o=this._arcadeTask)==null?void 0:o.promise]);r!=null&&r.fetchMissingFields&&(i=await this._checkAndReQueryGraphics(e,i));const{fieldInfoMap:l,workingTitle:c}=this,d=c&&l;i.forEach((f=>{const y=f.getObjectId()??f.attributes[e.objectIdField],g=d?a({attributes:f.attributes,expressionAttributes:null,fieldInfoMap:l,globalAttributes:this._createFormattedAttributes(e,f,s).global,layer:e,text:c}):"";n.set(y,g)}))}catch{}return n}async _checkAndReQueryGraphics(e,i){const r=i.map((n=>n.getObjectId()??n.attributes[e.objectIdField])).filter(Kr);if(r.length!==i.length)return i;if(i.some((n=>!ufe(n,this.requiredFields)))){const n=e.createQuery();n.where="1=1",n.outFields=[...this.requiredFields],n.objectIds=r;const s=await e.queryFeatures(n);if((s==null?void 0:s.features.length)===i.length)return s.features}return i}_createFieldInfoMap(e){const i=new Map;if(!e)return i;for(const r of e){if(!r.fieldName)continue;const n=this.fieldsIndex.get(r.fieldName),s=(n==null?void 0:n.name)??r.fieldName;r.fieldName=s,i.set(s.toLowerCase(),r)}return i}_createFormattedAttributes(e,i,r="system"){var a,l;const n=((a=this.effectivePopupTemplate)==null?void 0:a.fieldInfos)??[],s={};if(!this._featureUtils)return{};if(!this.hasBadExpressions&&this.calculatedExpressions.length>0&&((l=this._arcadeTask)!=null&&l.value)){const c=this._arcadeTask.value.Feature.createFromGraphicLikeObject(i.geometry,i.attributes,e,null);for(const d of this.calculatedExpressions)try{s[`expression/${d.name}`]=d.func({vars:{$feature:c}})}catch{}}const o={...i.attributes,...s};return{global:this._featureUtils.formatAttributes({fieldInfos:n,attributes:o,graphic:i,timeZone:r,layer:e,fieldInfoMap:this.fieldInfoMap}),content:[]}}_extractFieldNames(e){return Sq(e).filter((i=>!(i.indexOf(CHe)===0||i.indexOf(MHe)===0)))}};u([h({readOnly:!0})],Wo.prototype,"_arcadeTask",null),u([h()],Wo.prototype,"_featureUtils",void 0),u([h({readOnly:!0})],Wo.prototype,"featureUtilsPromise",null),u([h({readOnly:!0})],Wo.prototype,"calculatedExpressions",null),u([h()],Wo.prototype,"displayField",void 0),u([h()],Wo.prototype,"effectivePopupTemplate",void 0),u([h()],Wo.prototype,"expressionsUsedInTitle",null),u([h()],Wo.prototype,"fieldsIndex",void 0),u([h()],Wo.prototype,"fieldInfoMap",null),u([h()],Wo.prototype,"fields",void 0),u([h()],Wo.prototype,"objectIdField",void 0),u([h()],Wo.prototype,"requiredFields",null),Wo=u([V("esri.layers.support.TitleCreator")],Wo);const C1=[];function kHe(t,e){if(qR(t.url??""))return!0;const{wkid:i}=e;for(const r of C1){if((t.version??0)>=r[0])return!0;if(typeof r[1]=="function"&&(r[1]=r[1]()),r[1].has(i))return!1}return!0}C1.push([10.91,()=>{const t=new Set([9709,9716,9741,9761,9766]);for(let e=9712;e<=9713;e++)t.add(e);for(let e=9748;e<=9749;e++)t.add(e);for(let e=20904;e<=20932;e++)t.add(e);for(let e=21004;e<=21032;e++)t.add(e);for(let e=21207;e<=21264;e++)t.add(e);for(let e=21307;e<=21364;e++)t.add(e);for(let e=23301;e<=23333;e++)t.add(e);for(let e=102759;e<=102760;e++)t.add(e);for(let e=102934;e<=102955;e++)t.add(e);return t}]),C1.push([10.9,()=>{const t=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let e=9356;e<=9360;e++)t.add(e);for(let e=9404;e<=9407;e++)t.add(e);for(let e=9476;e<=9482;e++)t.add(e);for(let e=9487;e<=9494;e++)t.add(e);for(let e=9697;e<=9699;e++)t.add(e);return t}]),C1.push([10.81,()=>{const t=new Set([9265,9333,103598,103699]);for(let e=9248;e<=9254;e++)t.add(e);for(let e=9271;e<=9273;e++)t.add(e);for(let e=9284;e<=9285;e++)t.add(e);for(let e=21453;e<=21463;e++)t.add(e);return t}]),C1.push([10.8,()=>{const t=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let e=8035;e<=8036;e++)t.add(e);for(let e=8455;e<=8456;e++)t.add(e);for(let e=8518;e<=8529;e++)t.add(e);for(let e=8533;e<=8536;e++)t.add(e);for(let e=8538;e<=8540;e++)t.add(e);for(let e=8677;e<=8679;e++)t.add(e);for(let e=8902;e<=8903;e++)t.add(e);for(let e=8907;e<=8910;e++)t.add(e);for(let e=8949;e<=8951;e++)t.add(e);for(let e=8972;e<=8987;e++)t.add(e);for(let e=9039;e<=9040;e++)t.add(e);for(let e=9068;e<=9069;e++)t.add(e);for(let e=9140;e<=9141;e++)t.add(e);for(let e=9148;e<=9150;e++)t.add(e);for(let e=9153;e<=9159;e++)t.add(e);for(let e=9205;e<=9218;e++)t.add(e);for(let e=9221;e<=9222;e++)t.add(e);for(let e=54098;e<=54101;e++)t.add(e);return t}]),C1.push([10.71,()=>{const t=new Set([6316]);for(let e=8351;e<=8353;e++)t.add(e);for(let e=9294;e<=9297;e++)t.add(e);for(let e=22619;e<=22621;e++)t.add(e);for(let e=103586;e<=103594;e++)t.add(e);return t}]);async function PHe(t,e,i){const r=t&&t.getAtOrigin&&t.getAtOrigin("renderer",e.origin);if(r&&r.type==="unique-value"&&r.styleOrigin){const n=await lN(r.populateFromStyle());if(Wi(i),n.ok===!1){const s=n.error;e!=null&&e.messages&&e.messages.push(new Dl("renderer:style-reference",`Failed to create unique value renderer from style reference: ${s.message}`,{error:s,context:e})),t.clear("renderer",e==null?void 0:e.origin)}}}function AHe({displayField:t,editFieldsInfo:e,fields:i,objectIdField:r,title:n},s){if(!i)return null;const o=FHe({editFieldsInfo:e,fields:i,objectIdField:r},s);if(!o.length)return null;const a=zHe({titleBase:n,fields:i,displayField:t}),l=DHe();return new pm({title:a,content:l,fieldInfos:o})}const LHe=(t,e)=>e.visibleFieldNames?e.visibleFieldNames.has(t.name):fFe(t,e);function RHe({fields:t,ignoreFieldTypes:e,sortDisabled:i}){const r=t;return e&&(t=t.filter((n=>!e.includes(n.type)))),t===r&&(t=t.slice()),i!==!0&&t.sort(OHe),t}function OHe(t,e){return t.type==="oid"?-1:e.type==="oid"?1:Tre(t)?-1:Tre(e)?1:(t.alias||t.name).toLocaleLowerCase().localeCompare((e.alias||e.name).toLocaleLowerCase())}function FHe(t,e){const i=e==null?void 0:e.visibleFieldNames;return RHe({fields:t.fields??[],ignoreFieldTypes:(e==null?void 0:e.ignoreFieldTypes)||VHe,sortDisabled:e==null?void 0:e.sortDisabled}).map((r=>new Ps({fieldName:r.name,isEditable:pFe(r,t),label:r.alias,format:NHe(r),visible:LHe(r,{...t,visibleFieldNames:i})})))}function NHe(t){switch(t.type){case"small-integer":case"integer":case"single":return new Ks({digitSeparator:!0,places:0});case"double":return new Ks({digitSeparator:!0,places:2});case"string":return PU(t.name)?new Ks({digitSeparator:!0,places:0}):void 0;default:return}}function DHe(){return[new dw,new o$]}function zHe(t){const e=nFe(t),{titleBase:i}=t;return e?`${i}: {${e.trim()}}`:i??""}function Tre(t){var i;return(t.name&&t.name.toLowerCase())==="name"?!0:((i=t.alias)==null?void 0:i.toLowerCase())==="name"}const VHe=["geometry","blob","raster","guid","xml"],zs="FeatureLayer";function YP(t,e){return new ie("layer:unsupported",`Layer (${t.title}, ${t.id}) of type '${t.declaredClass}' ${e}`,{layer:t})}function Ere(t){return t&&t instanceof Ze}const R4=$He();function O4(t,e,i){const r=!!(i!=null&&i.writeLayerSchema);return{enabled:r,ignoreOrigin:r}}let lt=class extends K7e(nHe(O8e(pHe(A8e(M8e(v8e(uHe(xHe(SHe(bHe(vHe(WBe(oHe(dHe(kN(b8e(HBe(bt.ClonableMixin(zr))))))))))))))))))){constructor(...e){super(...e),this.attributeTableTemplate=null,this.charts=null,this.copyright=null,this.displayField=null,this.dynamicDataSource=null,this.fields=null,this.fieldsIndex=null,this.formTemplate=null,this.fullExtent=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.infoFor3D=null,this.isTable=!1,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.objectIdField=null,this.operationalLayerType="ArcGISFeatureLayer",this.outFields=null,this.path=null,this.popupEnabled=!0,this.popupTemplate=null,this.resourceInfo=null,this.screenSizePerspectiveEnabled=!0,this.spatialReference=et.WGS84,this.subtypeCode=null,this.supportedSourceTypes=new Set(["Feature Layer","Oriented Imagery Layer","Table","Catalog Layer"]),this.templates=null,this.timeInfo=null,this.title=null,this.sublayerTitleMode="item-title",this.type="feature",this.typeIdField=null,this.types=null,this.visible=!0,this._debouncedSaveOperations=Zu((async(i,r,n)=>{const{save:s,saveAs:o}=await ye(()=>import("./featureLayerUtils-DWHi-wb2.js"),__vite__mapDeps([238,232,239,236,142]));switch(i){case Zh.SAVE:return s(this,r);case Zh.SAVE_AS:return o(this,n,r)}}))}destroy(){var e;(e=this.source)==null||e.destroy()}normalizeCtorArgs(e,i){return typeof e=="string"?{url:e,...i}:e}load(e){var n;const i=e!=null?e.signal:null;if((n=this.portalItem)!=null&&n.loaded&&this.source)return this.addResolvingPromise(this.createGraphicsSource(i).then((s=>this.initLayerProperties(s)))),Promise.resolve(this);const r=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection","Scene Service"]},e).catch(dh).then((async()=>{if(this.url&&this.layerId==null&&/FeatureServer|MapServer\/*$/i.test(this.url)){const s=await this._fetchFirstValidLayerId(i);s!=null&&(this.layerId=s)}if(!this.url&&!this._hasMemorySource())throw new ie("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return this.initLayerProperties(await this.createGraphicsSource(i))})).then((()=>S7e(this,"load",e)));return this.addResolvingPromise(r),Promise.resolve(this)}get _titleCreator(){const e=this._get("_titleCreator");return hr(e),new Wo({fieldsIndex:this.fieldsIndex,objectIdField:this.objectIdField,fields:this.fields,displayField:this.displayField,effectivePopupTemplate:this.popupTemplate??this.defaultPopupTemplate})}readCapabilities(e,i){return i=i.layerDefinition||i,bve(i,this.url)}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")??0)+1}get editingEnabled(){var e;return!(this.loaded&&!((e=this.capabilities)!=null&&e.operations.supportsEditing))&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)}set editingEnabled(e){this._overrideIfSome("editingEnabled",e)}readEditingEnabled(e,i){return this._readEditingEnabled(i,!1)}readEditingEnabledFromWebMap(e,i,r){return this._readEditingEnabled(i,!0,r)}writeEditingEnabled(e,i){this._writeEditingEnabled(e,i,!1)}writeEditingEnabledToWebMap(e,i,r,n){this._writeEditingEnabled(e,i,!0,n)}get effectiveEditingEnabled(){return E7e(this)}get featureTitleFields(){return[...this._titleCreator.requiredFields]}readIsTable(e,i){return(i=(i==null?void 0:i.layerDefinition)??i).type==="Table"||!i.geometryType}writeIsTable(e,i,r,n){n!=null&&n.writeLayerSchema&&xn(r,e?"Table":"Feature Layer",i)}readGlobalIdField(e,i){return lve(i.layerDefinition||i)}readObjectIdField(e,i){return cve(i.layerDefinition||i)}get parsedUrl(){const e=rn(this.url);return e!=null&&(this.dynamicDataSource!=null?e.path=Pg(e.path,"dynamicLayer"):this.layerId!=null&&(e.path=Pg(e.path,this.layerId.toString()))),e}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){VK(e,this.fieldsIndex),this._set("renderer",e)}readRenderer(e,i,r){var s;i=i.layerDefinition||i;const n=(s=i.drawingInfo)==null?void 0:s.renderer;if(n){const o=pM(n,i,r)??void 0;return o||Ie.getLogger(this).error("Failed to create renderer",{rendererDefinition:i.drawingInfo.renderer,layer:this,context:r}),o}return mH(i,r)}set source(e){const i=this._get("source");i!==e&&(Ere(i)&&this._resetMemorySource(i),Ere(e)&&this._initMemorySource(e),this._set("source",e))}castSource(e){return e?Array.isArray(e)||e instanceof Ze?new gf({layer:this,items:e}):e:null}readSource(e,i){const r=jn.fromJSON(i.featureSet);return new gf({layer:this,items:(r==null?void 0:r.features)??[]})}readTemplates(e,i){const r=i.editFieldsInfo,n=r==null?void 0:r.creatorField,s=r==null?void 0:r.editorField;return e=e==null?void 0:e.map((o=>rh.fromJSON(o))),this._fixTemplates(e,n),this._fixTemplates(e,s),e}readTitle(e,i){var s,o,a;const r=((s=i.layerDefinition)==null?void 0:s.name)??i.name,n=i.title||((o=i.layerDefinition)==null?void 0:o.title);if(r){const l=(a=this.portalItem)==null?void 0:a.title;if(this.sublayerTitleMode==="item-title")return this.url?VIe(this.url,r):r;let c=r;if(!c&&this.url){const d=up(this.url);d!=null&&(c=d.title)}return c?(this.sublayerTitleMode==="item-title-and-service-name"&&l&&l!==c&&(c=l+" - "+c),TG(c)):void 0}if(this.sublayerTitleMode==="item-title"&&n)return n}readTitleFromWebMap(e,i){var r;return i.title||((r=i.layerDefinition)==null?void 0:r.name)}readTypeIdField(e,i){let r=(i=i.layerDefinition||i).typeIdField;if(r&&i.fields){r=r.toLowerCase();const n=i.fields.find((s=>s.name.toLowerCase()===r));n&&(r=n.name)}return r}readTypes(e,i){e=(i=i.layerDefinition||i).types;const r=i.editFieldsInfo,n=r==null?void 0:r.creatorField,s=r==null?void 0:r.editorField;return e==null?void 0:e.map((o=>(o=eh.fromJSON(o),this._fixTemplates(o.templates,n),this._fixTemplates(o.templates,s),o)))}readVisible(e,i){var r;return((r=i.layerDefinition)==null?void 0:r.defaultVisibility)!=null?!!i.layerDefinition.defaultVisibility:i.visibility!=null?!!i.visibility:void 0}async addAttachment(e,i){const r=await n7e(this,e,i,zs);return this.lastEditsEventDate=new Date,r}async updateAttachment(e,i,r){const n=await s7e(this,e,i,r,zs);return this.lastEditsEventDate=new Date,n}async applyEdits(e,i){return o7e(this,e,i)}async uploadAssets(e,i){return a7e(this,e,i)}on(e,i){return super.on(e,i)}createPopupTemplate(e){return AHe(this,e)}async createGraphicsSource(e){if(this._hasMemorySource()&&this.source)return this.source.load({signal:e});const{default:i}=await Q7(ye(()=>import("./FeatureLayerSource-C2ab-Bxt.js"),__vite__mapDeps([240,40,47,241,242,243,43,80,42,81,244,245,26,18,246,247,14])),e);return new i({layer:this,supportedSourceTypes:this.supportedSourceTypes}).load({signal:e})}createQuery(){const e=g7e(this);e.dynamicDataSource=this.dynamicDataSource;const i=this.subtypeCode!=null?`${this.subtypeField} = ${this.subtypeCode}`:null,r=aC(this.definitionExpression,i);return e.where=r||"1=1",e}async deleteAttachments(e,i){const r=await l7e(this,e,i,zs);return this.lastEditsEventDate=new Date,r}async fetchRecomputedExtents(e){return c7e(this,e,zs)}async getFeatureTitle(e,i){return this._titleCreator.getTitle(this,e,i)}async getFeatureTitles(e,i){return this._titleCreator.getTitles(this,e,i)}getFeatureType(e){return hve(this.types,this.typeIdField,e)}getFieldDomain(e,i){var r;return b7e(this,e,i,((r=this.getField(e))==null?void 0:r.domain)??null)}async queryAttachments(e,i){return u7e(this,e,i,zs)}async queryFeatures(e,i){const r=await this.load(),n=await r.source.queryFeatures(dt.from(e)??r.createQuery(),i);if(n!=null&&n.features)for(const s of n.features)s.layer=s.sourceLayer=r;return n}async queryObjectIds(e,i){return await d7e(this,e,i,zs)}async queryFeatureCount(e,i){return h7e(this,e,i,zs)}async queryExtent(e,i){return p7e(this,e,i,zs)}async queryRelatedFeatures(e,i){return f7e(this,e,i,zs)}async queryRelatedFeaturesCount(e,i){return m7e(this,e,i,zs)}async queryTopFeatures(e,i){var a;const{source:r,capabilities:n}=await this.load();if(!r.queryTopFeatures||!((a=n==null?void 0:n.query)!=null&&a.supportsTopFeaturesQuery))throw new ie(zs,"Layer source does not support queryTopFeatures capability");const s=await ye(()=>import("./TopFeaturesQuery-B4rktjOx.js"),[]),o=await r.queryTopFeatures(s.default.from(e),i);if(o!=null&&o.features)for(const l of o.features)l.layer=l.sourceLayer=this;return o}async queryAttributeBins(e,i){const{source:r,capabilities:n}=await this.load();if(!r.queryAttributeBins)throw new ie(zs,"Layer source does not support queryAttributeBins capability");k7e(e,n,zs);const s=await ye(()=>import("./AttributeBinsQuery-BaFq3gKY.js"),__vite__mapDeps([192,12,8,20])),o=await r.queryAttributeBins(s.default.from(e),i);if(o.features)for(const a of o.features)a.layer=a.sourceLayer=this;return o}async queryTopObjectIds(e,i){const{source:r,capabilities:n}=await this.load();if(!r.queryTopObjectIds||!(n!=null&&n.query.supportsTopFeaturesQuery))throw new ie(zs,"Layer source does not support queryTopObjectIds capability");const s=await ye(()=>import("./TopFeaturesQuery-B4rktjOx.js"),[]);return(await r.queryTopObjectIds(s.default.from(e),i)).filter(uw)}async queryTopFeaturesExtent(e,i){var o;const{source:r,capabilities:n}=await this.load();if(!r.queryTopExtents||!((o=n==null?void 0:n.query)!=null&&o.supportsTopFeaturesQuery))throw new ie(zs,"Layer source does not support queryTopExtents capability");const s=await ye(()=>import("./TopFeaturesQuery-B4rktjOx.js"),[]);return r.queryTopExtents(s.default.from(e),i)}async queryTopFeatureCount(e,i){var o;const{source:r,capabilities:n}=await this.load();if(!r.queryTopCount||!((o=n==null?void 0:n.query)!=null&&o.supportsTopFeaturesQuery))throw new ie(zs,"Layer source does not support queryFeatureCount capability");const s=await ye(()=>import("./TopFeaturesQuery-B4rktjOx.js"),[]);return r.queryTopCount(s.default.from(e),i)}read(e,i){const r=e.featureCollection;if((r||e.type==="Feature Collection")&&(this.resourceInfo=e),r){const{layers:n,showLegend:s}=r;(n==null?void 0:n.length)===1&&(super.read(n[0],i),s!=null&&super.read({showLegend:s},i))}super.read(e,i),i&&i.origin==="service"&&(this.revert(["objectIdField","fields","timeInfo","dateFieldsTimeZone"],"service"),this.spatialReference||this.revert(["spatialReference"],"service"))}write(e,i){i={...i,origin:(i==null?void 0:i.origin)??void 0,writeLayerSchema:(i==null?void 0:i.writeLayerSchema)??this._hasMemorySource()};const{origin:r,layerContainerType:n,messages:s}=i;if(this.dynamicDataSource)return s==null||s.push(YP(this,"using a dynamic data source cannot be written to web scenes, web maps and feature service items")),null;if(this.isTable){if((r==="web-map"||r==="web-scene")&&n!=="tables")return s==null||s.push(YP(this,`a table source can only be written to tables, not ${n}`)),null;if(this._hasMemorySource())return s==null||s.push(YP(this,"using an in-memory table source cannot be written to web scenes and web maps")),null}else if(this.loaded&&(r==="web-map"||r==="web-scene")&&n==="tables")return s==null||s.push(YP(this,"using a non-table source cannot be written to tables in web maps or web scenes")),null;return super.write(e,i)}clone(){if(this._hasMemorySource())throw new ie(zs,`FeatureLayer (title: ${this.title}, id: ${this.id}) created using in-memory source cannot be cloned`);return super.clone()}serviceSupportsSpatialReference(e){var i;return!!this.loaded&&(((i=this.source)==null?void 0:i.type)==="memory"||kHe(this,e))}async save(e){return this._debouncedSaveOperations(Zh.SAVE,e)}async saveAs(e,i){return this._debouncedSaveOperations(Zh.SAVE_AS,i,e)}_readEditingEnabled(e,i,r){var s;let n=(s=e.layerDefinition)==null?void 0:s.capabilities;return n?this._hasEditingCapability(n):(n=e.capabilities,i&&(r==null?void 0:r.origin)==="web-map"&&!this._hasMemorySource()&&n?this._hasEditingCapability(n):void 0)}_hasEditingCapability(e){return e.toLowerCase().split(",").map((i=>i.trim())).includes("editing")}_writeEditingEnabled(e,i,r,n){var s,o;if(!e){const a=(o=(s=this.capabilities)==null?void 0:s.operations)!=null&&o.supportsSync?"Query,Sync":"Query";xn("layerDefinition.capabilities",a,i),r&&!(n!=null&&n.writeLayerSchema)&&(i.capabilities=a)}}_fetchFirstValidLayerId(e){return fi(this.url??"",{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:e}).then((i=>{const r=i.data;if(r)return this.applyPreferredHost(r),this.findFirstValidLayerId(r)}))}async initLayerProperties(e){var i;return this._set("source",e),e.sourceJSON&&(this.sourceJSON=e.sourceJSON,this.read(e.sourceJSON,{origin:"service",portalItem:this.portalItem,portal:(i=this.portalItem)==null?void 0:i.portal,url:this.parsedUrl})),this._verifySource(),this._verifyFields(),VK(this.renderer,this.fieldsIndex),efe(this.timeInfo,this.fieldsIndex),this._hasMemorySource()&&this.geometryType==="mesh"&&(this.capabilities.query.supportsReturnMesh=!0),PHe(this,{origin:"service"})}async hasDataChanged(){return y7e(this)}async fetchPublishingStatus(){const e=this.source;return e!=null&&e.fetchPublishingStatus?e.fetchPublishingStatus():"unavailable"}_verifyFields(){var i,r;const e=((i=this.parsedUrl)==null?void 0:i.path)??"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+e+")"),this.isTable||this._hasMemorySource()||e.search(/\/FeatureServer\//i)!==-1||(r=this.fields)!=null&&r.some((n=>n.type==="geometry"))||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+e+")")}_fixTemplates(e,i){e&&e.forEach((r=>{var s;const n=(s=r.prototype)==null?void 0:s.attributes;n&&i&&delete n[i]}))}_verifySource(){if(this._hasMemorySource()){if(this.url)throw new ie("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new ie("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}_initMemorySource(e){e.forEach((i=>{i.layer=this,i.sourceLayer=this})),this.addHandles([e.on("after-add",(i=>{i.item.layer=this,i.item.sourceLayer=this})),e.on("after-remove",(i=>{i.item.layer=null,i.item.sourceLayer=null}))],"fl-source")}_resetMemorySource(e){e.forEach((i=>{i.layer=null,i.sourceLayer=null})),this.removeHandles("fl-source")}_hasMemorySource(){return!(this.url||!this.source)}findFirstValidLayerId(e){return Array.isArray(e.layers)&&e.layers.length>0?e.layers[0].id:Array.isArray(e.tables)&&e.tables.length>0?e.tables[0].id:void 0}};u([h({clonable:!1,readOnly:!0})],lt.prototype,"_titleCreator",null),u([h(X8e)],lt.prototype,"attributeTableTemplate",void 0),u([De("service","capabilities")],lt.prototype,"readCapabilities",null),u([h({json:{origins:{"web-scene":{write:!1}},write:!0}})],lt.prototype,"charts",void 0),u([h({readOnly:!0})],lt.prototype,"createQueryVersion",null),u([h({json:{read:{source:"layerDefinition.copyrightText"}}})],lt.prototype,"copyright",void 0),u([h({json:{read:{source:"layerDefinition.displayField"}}})],lt.prototype,"displayField",void 0),u([h({types:ag,readOnly:!0})],lt.prototype,"defaultSymbol",void 0),u([h({type:Au})],lt.prototype,"dynamicDataSource",void 0),u([h({type:Boolean})],lt.prototype,"editingEnabled",null),u([De(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],lt.prototype,"readEditingEnabled",null),u([De("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],lt.prototype,"readEditingEnabledFromWebMap",null),u([Ve(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],lt.prototype,"writeEditingEnabled",null),u([Ve("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],lt.prototype,"writeEditingEnabledToWebMap",null),u([h({readOnly:!0})],lt.prototype,"effectiveEditingEnabled",null),u([h({clonable:!1,readOnly:!0})],lt.prototype,"featureTitleFields",null),u([h({...R4.fields,json:{read:{source:"layerDefinition.fields"},origins:{service:{name:"fields"},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:O4}}}}})],lt.prototype,"fields",void 0),u([h(R4.fieldsIndex)],lt.prototype,"fieldsIndex",void 0),u([h({type:jBe,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],lt.prototype,"formTemplate",void 0),u([h({json:{read:{source:"layerDefinition.extent"}}})],lt.prototype,"fullExtent",void 0),u([h({json:{origins:{"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:O4,writer(t,e,i){const r=t?R8.toJSON(t):null;r&&xn(i,r,e)}}}},read:{source:"layerDefinition.geometryType",reader:R8.read}}})],lt.prototype,"geometryType",void 0),u([h({json:{read:{source:"layerDefinition.hasM"}}})],lt.prototype,"hasM",void 0),u([h({json:{read:{source:"layerDefinition.hasZ"}}})],lt.prototype,"hasZ",void 0),u([h(Z8e)],lt.prototype,"id",void 0),u([h({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],lt.prototype,"infoFor3D",void 0),u([h({json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],lt.prototype,"isTable",void 0),u([De("service","isTable",["type","geometryType"]),De("isTable",["layerDefinition.type","layerDefinition.geometryType"])],lt.prototype,"readIsTable",null),u([Ve("web-map","isTable")],lt.prototype,"writeIsTable",null),u([h(ON)],lt.prototype,"labelsVisible",void 0),u([h({type:[Lt],json:{origins:{service:{name:"drawingInfo.labelingInfo",read:Sre,write:!1}},name:"layerDefinition.drawingInfo.labelingInfo",read:Sre,write:{layerContainerTypes:pr}}})],lt.prototype,"labelingInfo",void 0),u([h((()=>{const t=se(W8e);return t.json.origins["portal-item"]={write:{target:"layerDefinition.drawingInfo.transparency",writer(e,i,r){xn(r,dN(e),i)}}},t})())],lt.prototype,"opacity",void 0),u([h(q8e)],lt.prototype,"legendEnabled",void 0),u([h({type:["show","hide"],json:(()=>{const t=se(Bge.json);return t.origins["portal-item"]={read:!1,write:!1},t})()})],lt.prototype,"listMode",void 0),u([De("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],lt.prototype,"readGlobalIdField",null),u([h({json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:O4}}}}})],lt.prototype,"objectIdField",void 0),u([De("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],lt.prototype,"readObjectIdField",null),u([h({type:["ArcGISFeatureLayer"],json:{write:{target:"layerType",ignoreOrigin:!0,layerContainerTypes:pr}}})],lt.prototype,"operationalLayerType",void 0),u([h(R4.outFields)],lt.prototype,"outFields",void 0),u([h({readOnly:!0})],lt.prototype,"parsedUrl",null),u([h({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],lt.prototype,"path",void 0),u([h(RN)],lt.prototype,"popupEnabled",void 0),u([h({type:pm,json:{name:"popupInfo",write:!0}})],lt.prototype,"popupTemplate",void 0),u([h({readOnly:!0})],lt.prototype,"defaultPopupTemplate",null),u([h({types:P2,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:qqe,name:"layerDefinition.drawingInfo.renderer",write:{layerContainerTypes:pr,overridePolicy:(t,e,i)=>({ignoreOrigin:i==null?void 0:i.writeLayerSchema,layerContainerTypes:pr})}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:(t,e,i)=>({ignoreOrigin:i==null?void 0:i.writeLayerSchema,layerContainerTypes:pr})}}})],lt.prototype,"renderer",null),u([De("service","renderer",["drawingInfo.renderer","defaultSymbol"]),De("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],lt.prototype,"readRenderer",null),u([h()],lt.prototype,"resourceInfo",void 0),u([h((()=>{const t=se(B8e);return t.json.origins["portal-item"]={read:!1,write:!1},t})())],lt.prototype,"screenSizePerspectiveEnabled",void 0),u([h({clonable:!1})],lt.prototype,"source",null),u([yi("source")],lt.prototype,"castSource",null),u([De("portal-item","source",["featureSet"]),De("web-map","source",["featureSet"])],lt.prototype,"readSource",null),u([h({json:{read:{source:"layerDefinition.extent.spatialReference"}}})],lt.prototype,"spatialReference",void 0),u([h({type:Number})],lt.prototype,"subtypeCode",void 0),u([h({type:[rh]})],lt.prototype,"templates",void 0),u([De("templates",["editFieldsInfo","creatorField","editorField","templates"])],lt.prototype,"readTemplates",null),u([h({type:Ss})],lt.prototype,"timeInfo",void 0),u([h()],lt.prototype,"title",void 0),u([De("service","title",["name"]),De("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],lt.prototype,"readTitle",null),u([De("web-map","title",["layerDefinition.name","title"])],lt.prototype,"readTitleFromWebMap",null),u([h({type:String})],lt.prototype,"sublayerTitleMode",void 0),u([h({json:{read:!1}})],lt.prototype,"type",void 0),u([h({type:String})],lt.prototype,"typeIdField",void 0),u([De("service","typeIdField"),De("typeIdField",["layerDefinition.typeIdField"])],lt.prototype,"readTypeIdField",null),u([h({type:[eh]})],lt.prototype,"types",void 0),u([De("service","types",["types"]),De("types",["layerDefinition.types"])],lt.prototype,"readTypes",null),u([h({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility",layerContainerTypes:pr}}}}})],lt.prototype,"visible",void 0),u([De("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],lt.prototype,"readVisible",null),lt=u([V("esri.layers.FeatureLayer")],lt);const Pwt=Object.freeze(Object.defineProperty({__proto__:null,get default(){return lt}},Symbol.toStringTag,{value:"Module"}));let uf=class extends ve{constructor(e){super(e),this.moment=null,this.fullUpdate=!1,this.validateErrorsCreated=!1,this.exceededTransferLimit=null,this.serviceEdits=null,this.discoveredSubnetworks=null}};u([h({type:Date,json:{type:Number,write:{writer:(t,e)=>{e.moment=t?t.getTime():null}}}})],uf.prototype,"moment",void 0),u([h({type:Boolean,json:{write:!0}})],uf.prototype,"fullUpdate",void 0),u([h({type:Boolean,json:{write:!0}})],uf.prototype,"validateErrorsCreated",void 0),u([h({type:Boolean,json:{write:!0}})],uf.prototype,"exceededTransferLimit",void 0),u([h({type:[Object],json:{write:!0}})],uf.prototype,"serviceEdits",void 0),u([h({type:[Object],json:{write:!0}})],uf.prototype,"discoveredSubnetworks",void 0),uf=u([V("esri.rest.networks.support.ValidateNetworkTopologyResult")],uf);const jHe=uf,UHe=is()({Pending:"job-waiting",InProgress:"job-executing",Completed:"job-succeeded"});let _y=class extends jHe{constructor(e){super(e),this.statusUrl=null,this.status=null,this.submissionTime=null,this.lastUpdatedTime=null,this._timer=void 0}destroy(){clearInterval(this._timer)}async checkJobStatus(e){const i={...e,query:{f:"json"}},{data:r}=await fi(this.statusUrl,i);return this.read(r),this.editsResolver&&this.editsResolver.resolve({edits:null,addedFeatures:[],updatedFeatures:[],deletedFeatures:[],addedAttachments:[],updatedAttachments:[],deletedAttachments:[],exceededTransferLimit:!0,historicMoment:null}),this}async waitForJobCompletion(e={}){const{interval:i=1e3,statusCallback:r}=e;return new Promise(((n,s)=>{this._clearTimer();const o=setInterval((()=>{this._timer||s(fr()),this.checkJobStatus().then((a=>{const{status:l}=a;switch(this.status=l,l){case"job-succeeded":this._clearTimer(),n(this);break;case"job-waiting":case"job-executing":r&&r(this)}}),(a=>{this._clearTimer(),s(a)}))}),i);this._timer=o}))}_clearTimer(){clearInterval(this._timer),this._timer=void 0}};u([h()],_y.prototype,"editsResolver",void 0),u([h({type:String,json:{write:!0}})],_y.prototype,"statusUrl",void 0),u([at(UHe)],_y.prototype,"status",void 0),u([h({type:Date,json:{type:Number,write:{writer:(t,e)=>{e.submissionTime=t?t.getTime():null}}}})],_y.prototype,"submissionTime",void 0),u([h({type:Date,json:{type:Number,write:{writer:(t,e)=>{e.lastUpdatedTime=t?t.getTime():null}}}})],_y.prototype,"lastUpdatedTime",void 0),_y=u([V("esri.networks.support.TopologyValidationJobInfo")],_y);const BHe=_y;var vn;(function(t){t[t.RTJunctionJunctionConnectivity=1]="RTJunctionJunctionConnectivity",t[t.RTContainment=2]="RTContainment",t[t.RTAttachment=3]="RTAttachment",t[t.RTJunctionEdgeConnectivity=4]="RTJunctionEdgeConnectivity",t[t.RTEdgeJunctionEdgeConnectivity=5]="RTEdgeJunctionEdgeConnectivity"})(vn||(vn={}));const XP=new Gt({connected:"connected",upstream:"upstream",downstream:"downstream",shortestPath:"shortest-path",subnetwork:"subnetwork",subnetworkController:"subnetwork-controller",loops:"loops",isolation:"isolation",path:"path",circuit:"circuit"}),Rwt=new Gt({junctionJunctionConnectivity:"junction-junction-connectivity",connectivity:"connectivity",attachment:"attachment",containment:"containment",junctionEdgeFromConnectivity:"junction-edge-from-connectivity",junctionEdgeMidspanConnectivity:"junction-edge-midspan-connectivity",junctionEdgeToConnectivity:"junction-edge-to-connectivity"}),GHe={connectivity:1,"junction-junction-connectivity":1,containment:2,attachment:3,"junction-edge-from-connectivity":4,"junction-edge-midspan-connectivity":5,"junction-edge-to-connectivity":6},Owt=new Gt({normal:"normal",rebuild:"rebuild",forceRebuild:"force-rebuild"});function qHe(t,e,i="from"){const{fromRuleElement:r,viaRuleElement:n,toRuleElement:s}=u0e(t),o=[];switch(t.ruleType){case vn.RTContainment:case vn.RTAttachment:i==="from"&&Fu(e,r,!1)?o.push(s):i==="to"&&Fu(e,s,!1)&&o.push(r);break;case vn.RTJunctionEdgeConnectivity:case vn.RTJunctionJunctionConnectivity:Fu(e,r,!0)?o.push(s):Fu(e,s,!0)&&o.push(r);break;case vn.RTEdgeJunctionEdgeConnectivity:n&&(Fu(e,n,!0)?(o.push(r),o.push(s)):(Fu(e,r,!0)||Fu(e,s,!0))&&o.push(n));break;default:return[]}return o}function EI(t,e,i){const{fromRuleElement:r,viaRuleElement:n,toRuleElement:s}=u0e(t);switch(t.ruleType){case vn.RTContainment:case vn.RTAttachment:return KP(e,i,r,s,!1,!1);case vn.RTJunctionEdgeConnectivity:case vn.RTJunctionJunctionConnectivity:return KP(e,i,r,s,!0,!0);case vn.RTEdgeJunctionEdgeConnectivity:return KP(e,i,r,n,!0,!0)||KP(e,i,s,n,!0,!0);default:return!1}}function KP(t,e,i,r,n,s){if(!i||!r)return!1;const o=Fu(t,i,s),a=Fu(e,r,s);if(n){const l=Fu(t,r,s),c=Fu(e,i,s);return o&&a||l&&c}return o&&a}function HHe(t,e){var n;const i=(n=t.terminal)==null?void 0:n.terminalId,r=e.terminalId;return i==null&&r==null||(i===1?r==null||r===1:i===r)}function Fu(t,e,i){var s,o,a,l;const{assetGroupCode:r,assetTypeCode:n}=t;return("layerId"in t?t.layerId===((s=e.networkSource)==null?void 0:s.layerId):t.networkSourceId===((o=e.networkSource)==null?void 0:o.sourceId))&&(r==null||r===((a=e.assetGroup)==null?void 0:a.assetGroupCode))&&(n==null||n===((l=e.assetType)==null?void 0:l.assetTypeCode))&&(!i||!("terminalId"in t)||HHe(e,t))}function u0e(t){return{fromRuleElement:{networkSource:t.fromNetworkSource,assetGroup:t.fromAssetGroup,assetType:t.fromAssetType,terminal:t.fromTerminal},viaRuleElement:t.viaNetworkSource?{networkSource:t.viaNetworkSource,assetGroup:t.viaAssetGroup,assetType:t.viaAssetType,terminal:t.viaTerminal}:void 0,toRuleElement:{networkSource:t.toNetworkSource,assetGroup:t.toAssetGroup,assetType:t.toAssetType,terminal:t.toTerminal}}}function C_(t){var n;let e=null,i=null,r=null;if(Jpe(t))e=u9(t),[i,r]=WHe(t);else if(fh(t)){e=((n=t.parent)==null?void 0:n.layerId)??null;const[s]=s3(t);s===t.subtypeField&&(i=t.subtypeCode)}else e=t.layerId??null;return{layerId:e,assetGroupCode:i,assetTypeCode:r}}function u9(t){var r;const{sourceLayer:e}=t;let i;return ape(e)?i=e.layerId:fh(e)&&(i=(r=e.parent)==null?void 0:r.layerId),i??null}function WHe(t){const[e,i]=s3(t.sourceLayer);return[e?t.attributes[e]:null,i?t.attributes[i]:null]}function s3(t){return!t||!("fieldsIndex"in t)?[null,null]:[t.fieldsIndex.normalizeFieldName("assetGroup")??null,t.fieldsIndex.normalizeFieldName("assetType")??null]}async function Ire(t,e){if(t==="Utility Network Layer"){const{default:i}=await ye(()=>Promise.resolve().then(()=>oWe),void 0);return new i({layerUrl:e})}return null}async function ZHe(t){var o;let e="portalItem"in t?t:{portalItem:t};!e.portalItem||e.portalItem instanceof At||(e={...e,portalItem:new At(e.portalItem)});const i=e.portalItem;if(await i.load(),i.type!=="Feature Service")throw new ie("portal:unknown-item-type","Unknown item type '${type}'",{type:i.type});const r=i.url,n=await fi(r,{responseType:"json",query:{f:"json"}}),s="Network Layer";if((o=n.data.type)!=null&&o.includes(s))return Ire(n.data.type,r);if(n.data.layers){const a=n.data.layers.find((l=>l.type.includes(s)));if(a){const l=`${r}/${a.id}`;return Ire(a.type,l)}}return null}let Fn=class extends kN(Mo){static fromPortalItem(e){return ZHe(e)}constructor(e){super(e),this.id=null,this.title=null,this.layerUrl=null,this.dataElement=null,this.fullExtent=null,this.spatialReference=null,this.type=null,this.sourceJSON=null,this.gdbVersion=null,this.historicMoment=null,this._sourceIdByLayerId=new Map,this._layerIdBySourceId=new Map,this._applyEditsHandler=i=>{const{serviceUrl:r,gdbVersion:n,result:s}=i,o=r===this.featureServiceUrl,a=bC(r,n,this.gdbVersion);o&&a&&s.then((l=>{BL(r,n)&&(this.historicMoment=l.historicMoment)}))},this._updateMomentHandler=i=>{const{serviceUrl:r,gdbVersion:n,moment:s}=i,o=r===this.featureServiceUrl,a=bC(r,n,this.gdbVersion);o&&a&&(this.historicMoment=s)},this.when().then((()=>{this.addHandles([Oge(this._applyEditsHandler),Fge(this._updateMomentHandler)])}),(()=>{}))}initialize(){this.when().catch((e=>{Tn(e)||Ie.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:e})}))}get datasetName(){var e;return((e=this.dataElement)==null?void 0:e.name)??null}get owner(){var e;return((e=this.dataElement)==null?void 0:e.userIdentity)??null}get schemaGeneration(){var e;return((e=this.dataElement)==null?void 0:e.schemaGeneration)??null}get parsedUrl(){return rn(this.layerUrl)}get featureServiceUrl(){return up(this.parsedUrl.path).url.path}get networkServiceUrl(){return this.featureServiceUrl.replace(/\/FeatureServer/i,"/UtilityNetworkServer")}get layerId(){return up(this.parsedUrl.path).sublayer}get networkSystemLayers(){return null}async load(e){return this.addResolvingPromise(this._fetchDataElement(this.featureServiceUrl,this.layerId.toString(),e)),this.addResolvingPromise(this._fetchLayerMetaData(this.layerUrl,e)),this}getLayerIdBySourceId(e){if(!this.dataElement)return null;const i=this._layerIdBySourceId.get(e);if(i!=null)return i;const r=this.dataElement.domainNetworks,n=this._traverseNetworkSources(r,this._layerIdBySourceId,"sourceId","layerId",e);return n>=0?n:null}getSourceIdByLayerId(e){if(!this.dataElement)return null;const i=this._sourceIdByLayerId.get(e);if(i!=null)return i;const r=this.dataElement.domainNetworks,n=this._traverseNetworkSources(r,this._sourceIdByLayerId,"layerId","sourceId",e);return n>=0?n:null}getObjectIdsFromElements(e){const i=[],r=new Map;for(const s of e){const o=this.getLayerIdBySourceId(s.networkSourceId);if(o==null)continue;let a=r.get(o);a===void 0&&(a=[]),a.push(s.objectId),r.set(o,a)}const n=this.featureServiceUrl;return r.forEach(((s,o)=>i.push({layerUrl:`${n}/${o}`,objectIds:s}))),i}async queryNamedTraceConfigurations(e,i){var a;const[{queryNamedTraceConfigurations:r},{default:n}]=await Promise.all([ye(()=>import("./queryNamedTraceConfigurations-DwKn4-qn.js"),[]),ye(()=>import("./QueryNamedTraceConfigurationsParameters-DtkTxd_G.js"),[])]),s=this.networkServiceUrl,o=n.from(e);return(a=await r(s,o,{...i}))==null?void 0:a.namedTraceConfigurations}async validateTopology(e,i){var d,f,y;if(!e.validateArea)throw new ie("network:undefined-validateArea","the network must have validateArea defined in the validate network topology parameters.");const[{validateNetworkTopology:r},{default:n}]=await Promise.all([ye(()=>import("./validateNetworkTopology-B9r9psjk.js"),[]),ye(()=>import("./ValidateNetworkTopologyParameters-2biyPsHS.js"),[])]),s=n.from(e);BL(this.featureServiceUrl,this.gdbVersion||null)?(s.sessionID=o8,await Dte(this.featureServiceUrl,this.gdbVersion,!0)):s.sessionID=null,s.gdbVersion=this.gdbVersion;const o=this.networkServiceUrl,a=this.featureServiceUrl,l=zte(a,null,this.gdbVersion,!0),c=await r(o,s,{...i});if(c!=null&&c.serviceEdits){const g=[];for(const b of c.serviceEdits){const{editedFeatures:_}=b,x=_!=null&&_.spatialReference?new et(_.spatialReference):null;g.push({layerId:b.layerId,editedFeatures:{adds:((d=_==null?void 0:_.adds)==null?void 0:d.map((E=>QP(E,x))))||[],updates:((f=_==null?void 0:_.updates)==null?void 0:f.map((E=>({original:QP(E[0],x),current:QP(E[1],x)}))))||[],deletes:((y=_==null?void 0:_.deletes)==null?void 0:y.map((E=>QP(E,x))))||[],spatialReference:x}})}l.resolve({edits:null,addedFeatures:[],updatedFeatures:[],deletedFeatures:[],addedAttachments:[],updatedAttachments:[],deletedAttachments:[],editedFeatures:g,exceededTransferLimit:!1,historicMoment:c.moment})}return c}async submitTopologyValidationJob(e,i){let r=null;if(!e.validateArea)throw new ie("network:undefined-validateArea","the network must have validateArea defined in the validate network topology parameters.");if(!this.gdbVersion){const d=this.layerUrl.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,"");r=(await fi(d,{responseType:"json",query:{f:"json"}})).data.defaultVersionName}const[{submitValidateNetworkTopologyJob:n},{default:s}]=await Promise.all([ye(()=>import("./validateNetworkTopology-B9r9psjk.js"),[]),ye(()=>import("./ValidateNetworkTopologyParameters-2biyPsHS.js"),[])]),o=s.from(e);BL(this.featureServiceUrl,this.gdbVersion||null)?(o.sessionID=o8,await Dte(this.featureServiceUrl,this.gdbVersion,!0)):o.sessionID=null,o.gdbVersion=this.gdbVersion||r;const a=this.networkServiceUrl,l=this.featureServiceUrl?zte(this.featureServiceUrl,null,this.gdbVersion,!0):void 0,c=await n(a,o,{...i});return new BHe({statusUrl:c,editsResolver:l})}getSourceTypeById(e){if(!this.dataElement)return null;for(const i of this.dataElement.domainNetworks)for(const r of[i.edgeSources??[],i.junctionSources??[]])for(const n of r)if(n.sourceId===e)return r===i.edgeSources?"edge":"junction";return null}_traverseNetworkSources(e,i,r,n,s){for(const o of e)for(const a of[o.edgeSources??[],o.junctionSources??[]])for(const l of a)if(l[r]===s)return i.set(s,l[n]),l[n];return-1}async _fetchLayerMetaData(e,i){const r=await fi(e,{responseType:"json",query:{f:"json"},...i});this.sourceJSON=r.data,this.read(r.data,{origin:"service"})}async _fetchDataElement(e,i,r){if(this.dataElement)return;const n=await fi(`${e}/queryDataElements`,{responseType:"json",query:{layers:JSON.stringify([i]),f:"json"},...r}).then((s=>{var o;return(o=s.data.layerDataElements)==null?void 0:o[0]}));n&&this.read(n,{origin:"service"})}};function QP(t,e){return new qi({attributes:t.attributes,geometry:hp({...t.geometry,spatialReference:e})})}u([h({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}},service:{read:!0}},read:!1}})],Fn.prototype,"id",void 0),u([h({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}},service:{read:{source:"name"}}},read:!1}})],Fn.prototype,"title",void 0),u([h({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"url"},write:{target:"url",isRequired:!0}}},read:!1}})],Fn.prototype,"layerUrl",void 0),u([h({type:Object,json:{origins:{service:{read:!0}},read:!1}})],Fn.prototype,"dataElement",void 0),u([h({type:Qt,json:{origins:{service:{read:{source:"extent"}}},read:!1}})],Fn.prototype,"fullExtent",void 0),u([h({type:et,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:!1}})],Fn.prototype,"spatialReference",void 0),u([h({type:["utility","trace"],readOnly:!0,json:{read:!1,write:!1}})],Fn.prototype,"type",void 0),u([h({readOnly:!0})],Fn.prototype,"datasetName",null),u([h({readOnly:!0})],Fn.prototype,"owner",null),u([h({readOnly:!0})],Fn.prototype,"schemaGeneration",null),u([h({readOnly:!0})],Fn.prototype,"parsedUrl",null),u([h({readOnly:!0})],Fn.prototype,"featureServiceUrl",null),u([h({readOnly:!0})],Fn.prototype,"networkServiceUrl",null),u([h({readOnly:!0})],Fn.prototype,"layerId",null),u([h()],Fn.prototype,"sourceJSON",void 0),u([h({readOnly:!0})],Fn.prototype,"networkSystemLayers",null),u([h()],Fn.prototype,"gdbVersion",void 0),u([h({type:Date})],Fn.prototype,"historicMoment",void 0),Fn=u([V("esri.networks.Network")],Fn);const JHe=Fn;let xy=class extends ve.JSONSupportMixin(Mo){constructor(e){super(e),this.rulesCategorized={attachment:[],containment:[],connectivity:[]},this.request=fi}initialize(){}async load(e){const i=this.rulesLayer.load(e).then((()=>this._initializeRulesTable()));return this.addResolvingPromise(i),this}getFeaturesCanAssociateWithClause(e,i,r){const n=new Map,[s,o]=s3(e.sourceLayer);if(!s||!o)return"";const a=C_(e),l=C_(i);r.forEach((d=>{const{type:f,direction:y}=d;this._getRulesForAssociationType(f).forEach((g=>{qHe(g,a,y).filter((b=>{var _;return((_=b.networkSource)==null?void 0:_.layerId)===l.layerId})).forEach((b=>{var E,C;const _=(E=b.assetGroup)==null?void 0:E.assetGroupCode,x=(C=b.assetType)==null?void 0:C.assetTypeCode;if(_!=null&&x!=null){const k=n.get(_)??new Set;k.add(x),n.set(_,k)}}))}))}));let c=[];return this._mergeAssetCodes(n).forEach(((d,f)=>{const y=`${s} IN (${f})`,g=Zpe(o,[...d]);y&&g&&c.push(aC(y,g))})),c.length>1&&(c=c.map((d=>`(${d})`))),c.join(" OR ")}getFeaturesCanAssociateWith(e,i,r){return u9(e)==null?[]:i.filter((n=>this.canAssociateFeatures(e,n,r)))}canAssociateFeatures(e,i,r){if(!this._canSupportAssociations([e,i]))return!1;const n=C_(e),s=C_(i);return r.some((o=>{const{type:a,direction:l}=o;return this._getRulesForAssociationType(a).some((c=>l==="to"?EI(c,s,n):EI(c,n,s)))}))}getLayersCanAssociateWith(e,i,r){return u9(e)==null?[]:i.filter((n=>this.canAssociateFeatureToLayer(e,n,r)))}canAssociateFeatureToLayer(e,i,r){if(!this._canSupportAssociations([e,i]))return!1;const n=C_(e),s=C_(i);return r.some((o=>{const{type:a,direction:l}=o;return this._getRulesForAssociationType(a).some((c=>l==="to"?EI(c,s,n):EI(c,n,s)))}))}getFeatureSQL(e,i){var c,d;const r=e.layerId.toString(),n=(c=e.fieldsIndex)==null?void 0:c.normalizeFieldName("assetGroup"),s=(d=e.fieldsIndex)==null?void 0:d.normalizeFieldName("assetType"),o=n?i.attributes[n]:null,a=s?i.attributes[s]:null,l=this.rulesHash[r];if(l){const f=l.assetGroupHash[o];if(f)return f.assetTypeHash[a]||null}return null}async _initializeRulesTable(){var n,s,o,a,l,c,d,f,y,g,b;const e={};let i;(function(_){_[_.from=0]="from",_[_.to=1]="to",_[_.via=2]="via"})(i||(i={}));const r=[{networkSourceId:"fromNetworkSource",assetGroupId:"fromAssetGroup",assetTypeId:"fromAssetType"},{networkSourceId:"toNetworkSource",assetGroupId:"toAssetGroup",assetTypeId:"toAssetType"},{networkSourceId:"viaNetworkSource",assetGroupId:"viaAssetGroup",assetTypeId:"viaAssetType"}];this.rulesCategorized={attachment:[],containment:[],connectivity:[]};for(const _ of this.rules){if(_.ruleType===vn.RTAttachment){this.rulesCategorized.attachment.push(_);continue}if(_.ruleType===vn.RTContainment){this.rulesCategorized.containment.push(_);continue}if(_.ruleType===vn.RTJunctionJunctionConnectivity){this.rulesCategorized.connectivity.push(_);continue}this.rulesCategorized.connectivity.push(_);let x=[[i.from,i.to],[i.to,i.from]];_.ruleType===vn.RTEdgeJunctionEdgeConnectivity&&(x=[[i.from,i.via],[i.via,i.from],[i.to,i.via],[i.via,i.to]]);for(const E of x){const C=E.shift(),k=E.shift();let O=!1;switch(_.ruleType){case vn.RTEdgeJunctionEdgeConnectivity:O=C===i.from||C===i.to;break;case vn.RTJunctionEdgeConnectivity:O=C===i.to}const D=r[C],B=((n=_[D.networkSourceId])==null?void 0:n.layerId.toString())??"",j=(o=(s=_[D.assetGroupId])==null?void 0:s.assetGroupCode)==null?void 0:o.toString(),Z=_[D.assetTypeId],X=(a=Z==null?void 0:Z.assetTypeCode)==null?void 0:a.toString(),ee=r[k],pe=((l=_[ee.networkSourceId])==null?void 0:l.layerId.toString())??"",he=(d=(c=_[ee.assetGroupId])==null?void 0:c.assetGroupCode)==null?void 0:d.toString(),ne=_[ee.assetTypeId],re=(f=ne==null?void 0:ne.assetTypeCode)==null?void 0:f.toString(),ke=e[B]??{assetGroupHash:{}};if(!(j&&X&&he&&re))continue;const Fe=ke.assetGroupHash[j]??{assetTypeHash:{}},Ae=Fe.assetTypeHash[X]??{};if(Ae[pe]=Ae[pe]??{},O){Ae[B]=Ae[B]??{};const Re=aC(`assetgroup = ${j}`,`assettype = ${X}`);(ne==null?void 0:ne.connectivityPolicy)==="esriNECPEndVertex"?Ae[B].endVertex=(y=Ae[B])!=null&&y.endVertex?`${Ae[B].endVertex}`:`(${Re})`:Ae[B].anyVertex=Ae[B].anyVertex?`${Ae[B].anyVertex}`:`(${Re})`}const we=aC(`assetgroup = ${he}`,`assettype = ${re}`);(ne==null?void 0:ne.connectivityPolicy)==="esriNECPEndVertex"?Ae[pe].endVertex=(g=Ae[pe])!=null&&g.endVertex?kU(Ae[pe].endVertex,we):`(${we})`:Ae[pe].anyVertex=(b=Ae[pe])!=null&&b.anyVertex?kU(Ae[pe].anyVertex,we):`(${we})`,Fe.assetTypeHash[X]=Ae,ke.assetGroupHash[j]=Fe,e[B]=ke}}this._set("rulesHash",e)}_getRulesForAssociationType(e){const{rulesCategorized:i}=this;switch(e){case"attachment":return i.attachment;case"containment":return i.containment;case"connectivity":case"junction-junction-connectivity":return i.connectivity.filter((r=>r.ruleType===vn.RTJunctionJunctionConnectivity));case"junction-edge-from-connectivity":case"junction-edge-midspan-connectivity":case"junction-edge-to-connectivity":return i.connectivity.filter((r=>r.ruleType===vn.RTJunctionEdgeConnectivity||r.ruleType===vn.RTEdgeJunctionEdgeConnectivity));default:return[]}}_areSetsEqual(e,i){if(e.size!==i.size)return!1;for(const r of e)if(!i.has(r))return!1;return!0}_mergeAssetCodes(e){const i=new Map,r=new Set;for(const[n,s]of e){const o=new Set([n]);for(const[l,c]of e)n!==l&&!r.has(l)&&this._areSetsEqual(s,c)&&(o.add(l),r.add(l));const a=Array.from(o).sort().join(",");i.set(a,s)}return i}_canSupportAssociations(e){return e.every((i=>{const r=Jpe(i)?i.sourceLayer:i,[n,s]=s3(r);return n!=null&&s!=null}))}};u([h({constructOnly:!0})],xy.prototype,"rulesLayer",void 0),u([h({constructOnly:!0})],xy.prototype,"rules",void 0),u([h({readOnly:!0})],xy.prototype,"rulesHash",void 0),u([h()],xy.prototype,"rulesCategorized",void 0),u([h({constructOnly:!0})],xy.prototype,"request",void 0),xy=u([V("esri.networks.RulesTable")],xy);let cc=class extends ve{constructor(e){super(e),this.conditionBarriers=[],this.outputConditions=[],this.functions=[],this.functionBarriers=[],this.traversabilityScope=null,this.shortestPathNetworkAttributeName=null,this.includeBarriers=null,this.validateConsistency=null,this.ignoreBarriersAtStartingPoints=null}};u([h({type:[Object],json:{write:!0}})],cc.prototype,"conditionBarriers",void 0),u([h({type:[Object],json:{write:!0}})],cc.prototype,"outputConditions",void 0),u([h({type:[Object],json:{write:!0}})],cc.prototype,"functions",void 0),u([h({type:[Object],json:{write:!0}})],cc.prototype,"functionBarriers",void 0),u([h({type:["junctions","edges","junctionsAndEdges"],json:{write:!0}})],cc.prototype,"traversabilityScope",void 0),u([h({type:String,json:{write:!0}})],cc.prototype,"shortestPathNetworkAttributeName",void 0),u([h({type:Boolean,json:{write:!0}})],cc.prototype,"includeBarriers",void 0),u([h({type:Boolean,json:{write:!0}})],cc.prototype,"validateConsistency",void 0),u([h({type:Boolean,json:{write:!0}})],cc.prototype,"ignoreBarriersAtStartingPoints",void 0),cc=u([V("esri.networks.support.TraceConfiguration")],cc);const TH=cc;let ur=class extends TH{constructor(e){super(e),this.filterBarriers=[],this.arcadeExpressionBarrier=null,this.circuitName=null,this.domainNetworkName=null,this.filterBitsetNetworkAttributeName=null,this.filterFunctionBarriers=[],this.filterScope=null,this.includeContainers=null,this.includeContent=null,this.includeIsolated=null,this.includeStructures=null,this.allowIndeterminateFlow=null,this.includeUpToFirstSpatialContainer=null,this.inferConnectivity=null,this.maxHops=null,this.nearestNeighbor=null,this.numPaths=null,this.outputFilterCategories=[],this.outputFilters=[],this.propagators=[],this.subnetworkName=null,this.targetTierName=null,this.diagramTemplateName=null,this.tierName=null,this.validateLocatability=null}};u([h({type:[Object],json:{write:!0}})],ur.prototype,"filterBarriers",void 0),u([h({type:String,json:{write:!0}})],ur.prototype,"arcadeExpressionBarrier",void 0),u([h({type:String,json:{write:!0}})],ur.prototype,"circuitName",void 0),u([h({type:String,json:{write:!0}})],ur.prototype,"domainNetworkName",void 0),u([h({type:String,json:{write:!0}})],ur.prototype,"filterBitsetNetworkAttributeName",void 0),u([h({type:[Object],json:{write:!0}})],ur.prototype,"filterFunctionBarriers",void 0),u([h({type:["junctions","edges","junctionsAndEdges"],json:{write:!0}})],ur.prototype,"filterScope",void 0),u([h({type:Boolean,json:{write:!0}})],ur.prototype,"includeContainers",void 0),u([h({type:Boolean,json:{write:!0}})],ur.prototype,"includeContent",void 0),u([h({type:Boolean,json:{write:!0}})],ur.prototype,"includeIsolated",void 0),u([h({type:Boolean,json:{write:!0}})],ur.prototype,"includeStructures",void 0),u([h({type:Boolean,json:{write:!0}})],ur.prototype,"allowIndeterminateFlow",void 0),u([h({type:Boolean,json:{write:!0}})],ur.prototype,"includeUpToFirstSpatialContainer",void 0),u([h({type:Boolean,json:{write:!0}})],ur.prototype,"inferConnectivity",void 0),u([h({type:Number,json:{write:!0}})],ur.prototype,"maxHops",void 0),u([h({type:Object,json:{write:!0}})],ur.prototype,"nearestNeighbor",void 0),u([h({type:Number,json:{write:!0}})],ur.prototype,"numPaths",void 0),u([h({type:[Object],json:{write:!0}})],ur.prototype,"outputFilterCategories",void 0),u([h({type:[Object],json:{write:!0}})],ur.prototype,"outputFilters",void 0),u([h({type:[Object],json:{write:!0}})],ur.prototype,"propagators",void 0),u([h({type:String,json:{write:!0}})],ur.prototype,"subnetworkName",void 0),u([h({type:String,json:{write:!0}})],ur.prototype,"targetTierName",void 0),u([h({type:String,json:{write:!0}})],ur.prototype,"diagramTemplateName",void 0),u([h({type:String,json:{write:!0}})],ur.prototype,"tierName",void 0),u([h({type:Boolean,json:{write:!0}})],ur.prototype,"validateLocatability",void 0),ur=u([V("esri.networks.support.UNTraceConfiguration")],ur);const YHe=ur;let Ma=class extends TB{constructor(e){super(e),this.globalId=null,this.title=null,this.traceConfiguration=null,this.creationDate=null,this.creator=null,this.description=null,this.minStartingPoints=null,this.resultTypes=[],this.tags=[],this.traceType=null}readTraceConfiguration(e,i){return e.tierName!==void 0?YHe.fromJSON(e):TH.fromJSON(e)}};u([h({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"id"},write:{target:"id",isRequired:!0}},service:{read:{source:"globalId"},write:{target:"globalId",isRequired:!0}}},read:!1}})],Ma.prototype,"globalId",void 0),u([h({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"title"},write:{target:"title",isRequired:!0}},service:{read:{source:"name"},write:{target:"name",isRequired:!0}}},read:!1}})],Ma.prototype,"title",void 0),u([h({type:TH,json:{origins:{service:{read:!0,write:!0}},read:!1}})],Ma.prototype,"traceConfiguration",void 0),u([De("service","traceConfiguration")],Ma.prototype,"readTraceConfiguration",null),u([h({type:Date,json:{origins:{service:{read:!0,write:!0}},read:!1}})],Ma.prototype,"creationDate",void 0),u([h({type:String,json:{origins:{service:{read:!0,write:!0}},read:!1}})],Ma.prototype,"creator",void 0),u([h({type:String,json:{origins:{service:{read:!0,write:!0}},read:!1}})],Ma.prototype,"description",void 0),u([h({type:["none","one","many"],json:{origins:{service:{read:{source:"minNumStartingPoints"},write:{target:"minNumStartingPoints"}}},read:!1}})],Ma.prototype,"minStartingPoints",void 0),u([h({json:{origins:{service:{read:!0,write:!0}},read:!1}})],Ma.prototype,"resultTypes",void 0),u([h({type:[String],json:{origins:{service:{read:!0,write:!0}},read:!1}})],Ma.prototype,"tags",void 0),u([h({type:XP.apiValues,json:{type:XP.jsonValues,origins:{service:{read:XP.read,write:XP.write}},read:!1}})],Ma.prototype,"traceType",void 0),Ma=u([V("esri.networks.support.NamedTraceConfiguration")],Ma);const XHe=Ma;function KHe(t){var g,b,_,x,E,C,k,O,D,B,j;const e=t==null?void 0:t.fieldsIndex,i="fromnetworksourceid",r="fromglobalid",n="fromterminalid",s="tonetworksourceid",o="toglobalid",a="toterminalid",l="status",c="associationtype",d="iscontentvisible",f="percentalong",y="globalid";return{fromNetworkSourceId:((g=e==null?void 0:e.get(i))==null?void 0:g.name)??i,fromGlobalId:((b=e==null?void 0:e.get(r))==null?void 0:b.name)??r,fromTerminalId:((_=e==null?void 0:e.get(n))==null?void 0:_.name)??n,toNetworkSourceId:((x=e==null?void 0:e.get(s))==null?void 0:x.name)??s,toGlobalId:((E=e==null?void 0:e.get(o))==null?void 0:E.name)??o,toTerminalId:((C=e==null?void 0:e.get(a))==null?void 0:C.name)??a,status:((k=e==null?void 0:e.get(l))==null?void 0:k.name)??l,associationType:((O=e==null?void 0:e.get(c))==null?void 0:O.name)??c,isContentVisible:((D=e==null?void 0:e.get(d))==null?void 0:D.name)??d,percentAlong:((B=e==null?void 0:e.get(f))==null?void 0:B.name)??f,globalId:((j=e==null?void 0:e.get((t==null?void 0:t.globalIdField)??y))==null?void 0:j.name)??y}}function jwt(t,e){if(e.type!=="feature"&&e.type!=="subtype-group")return[];if(!e.url)return[];const i="utilityNetworks"in t.map?t.map.utilityNetworks??[]:[];for(const r of i)if(r.isUtilityLayer(e)){const n=e.fieldsIndex.get("assetgroup"),s=e.fieldsIndex.get("assettype");return[n==null?void 0:n.name,s==null?void 0:s.name].filter((o=>o!=null))}return[]}let uc=class extends tt{constructor(e){super(e),this.rulesTableId=null,this.rulesTableUrl=null,this.subnetworksTableId=null,this.subnetworksTableUrl=null,this.dirtyAreasLayerId=null,this.dirtyAreasLayerUrl=null,this.associationsTable=null,this.associationsTableId=null,this.associationsTableUrl=null}destroy(){var e;(e=this.associationsTable)==null||e.destroy()}async loadAssociationsTable(){if(!this.associationsTable){const{associationsTableUrl:e}=this;if(!e)throw new ie("utility-network-system-layers:missing-associations-table-url","Unable to load the associations table, as the `associationsTableUrl` is not set.");this.associationsTable=new lt({url:e})}return await this.associationsTable.load(),this.associationsTable}};u([h({constructOnly:!0})],uc.prototype,"rulesTableId",void 0),u([h({constructOnly:!0})],uc.prototype,"rulesTableUrl",void 0),u([h({constructOnly:!0})],uc.prototype,"subnetworksTableId",void 0),u([h({constructOnly:!0})],uc.prototype,"subnetworksTableUrl",void 0),u([h({constructOnly:!0})],uc.prototype,"dirtyAreasLayerId",void 0),u([h({constructOnly:!0})],uc.prototype,"dirtyAreasLayerUrl",void 0),u([h()],uc.prototype,"associationsTable",void 0),u([h({constructOnly:!0})],uc.prototype,"associationsTableId",void 0),u([h({constructOnly:!0})],uc.prototype,"associationsTableUrl",void 0),uc=u([V("esri.networks.support.NetworkSystemLayers")],uc);let M1=class extends ve{constructor(e){super(e),this.id=null,this.name=null}};u([h({type:Number,json:{read:{source:"terminalId"},write:{target:"terminalId"}}})],M1.prototype,"id",void 0),u([h({type:String,json:{read:{source:"terminalName"},write:{target:"terminalName"}}})],M1.prototype,"name",void 0),u([h({type:Boolean,json:{write:!0}})],M1.prototype,"isUpstreamTerminal",void 0),M1=u([V("esri.networks.support.Terminal")],M1);const QHe=M1,eA=new Gt({esriUNTMBidirectional:"bidirectional",esriUNTMDirectional:"directional"});let xf=class extends ve{constructor(e){super(e),this.defaultConfiguration=null,this.id=null,this.name=null,this.terminals=[],this.traversabilityModel=null}};u([h({type:String,json:{write:!0}})],xf.prototype,"defaultConfiguration",void 0),u([h({type:Number,json:{read:{source:"terminalConfigurationId"},write:{target:"terminalConfigurationId"}}})],xf.prototype,"id",void 0),u([h({type:String,json:{read:{source:"terminalConfigurationName"},write:{target:"terminalConfigurationName"}}})],xf.prototype,"name",void 0),u([h({type:[QHe],json:{write:!0}})],xf.prototype,"terminals",void 0),u([h({type:eA.apiValues,json:{type:eA.jsonValues,read:eA.read,write:eA.write}})],xf.prototype,"traversabilityModel",void 0),xf=u([V("esri.networks.support.TerminalConfiguration")],xf);let k1=class extends ve{constructor(e){super(e),this.line=null,this.multipoint=null,this.polygon=null}};u([h({type:Yr,json:{write:!0},readOnly:!0})],k1.prototype,"line",void 0),u([h({type:_c,json:{read:{source:"point"},write:{target:"point"}},readOnly:!0})],k1.prototype,"multipoint",void 0),u([h({type:br,json:{write:!0},readOnly:!0})],k1.prototype,"polygon",void 0),k1=u([V("esri.rest.networks.support.AggregatedGeometry")],k1);const eWe=k1;let Yo=class extends ve{constructor(e){super(e),this.type="networkElement",this.assetGroupCode=null,this.assetTypeCode=null,this.globalId=null,this.networkSourceId=null,this.objectId=null,this.positionFrom=null,this.positionTo=null,this.terminalId=null}};u([h({json:{write:!1}})],Yo.prototype,"type",void 0),u([h({type:Number,json:{write:!0}})],Yo.prototype,"assetGroupCode",void 0),u([h({type:Number,json:{write:!0}})],Yo.prototype,"assetTypeCode",void 0),u([h({type:String,json:{write:!0}})],Yo.prototype,"globalId",void 0),u([h({type:Number,json:{write:!0}})],Yo.prototype,"networkSourceId",void 0),u([h({type:Number,json:{write:!0}})],Yo.prototype,"objectId",void 0),u([h({type:Number,json:{write:!0}})],Yo.prototype,"positionFrom",void 0),u([h({type:Number,json:{write:!0}})],Yo.prototype,"positionTo",void 0),u([h({type:Number,json:{write:!0}})],Yo.prototype,"terminalId",void 0),Yo=u([V("esri.rest.networks.support.NetworkElement")],Yo);let yh=class extends Yo{constructor(e){super(e),this.type="telecomNetworkElement",this.firstUnit=null,this.numUnits=null}};u([h({json:{write:!1}})],yh.prototype,"type",void 0),u([h({json:{write:!0}})],yh.prototype,"firstUnit",void 0),u([h({json:{write:!0}})],yh.prototype,"numUnits",void 0),yh=u([V("esri.rest.networks.support.TelecomNetworkElement")],yh);let df=class extends ve{constructor(e){super(e),this.edgeElement=null,this.junctionElement=null}readEdgeElement(e,i){return new yh({networkSourceId:i.edgeNetworkSourceId,globalId:i.edgeGlobalId,objectId:i.edgeObjectId,positionFrom:i.edgePositionFrom,positionTo:i.edgePositionTo,firstUnit:i.edgeFirstUnit,numUnits:i.edgeNumUnits})}writeEdgeElement(e,i){i.edgeNetworkSourceId=e.networkSourceId,i.edgeGlobalId=e.globalId,i.edgeObjectId=e.objectId,i.edgePositionFrom=e.positionFrom,i.edgePositionTo=e.positionTo,i.edgeFirstUnit=e.firstUnit,i.edgeNumUnits=e.numUnits}readJunctionElement(e,i){return new yh({networkSourceId:i.junctionNetworkSourceId,globalId:i.junctionGlobalId,objectId:i.junctionObjectId,terminalId:i.junctionTerminalId,firstUnit:i.junctionFirstUnit,numUnits:i.junctionNumUnits})}writeJunctionElement(e,i){i.junctionNetworkSourceId=e.networkSourceId,i.junctionGlobalId=e.globalId,i.junctionObjectId=e.objectId,i.junctionTerminalId=e.terminalId,i.junctionFirstUnit=e.firstUnit,i.junctionNumUnits=e.numUnits}};u([h({type:yh,json:{read:{source:["edgeNetworkSourceId","edgeGlobalId","edgeObjectId","edgePositionFrom","edgePositionTo","edgeFirstUnit","edgeNumUnits"]},write:!0}})],df.prototype,"edgeElement",void 0),u([De("edgeElement")],df.prototype,"readEdgeElement",null),u([Ve("edgeElement")],df.prototype,"writeEdgeElement",null),u([h({type:yh,json:{read:{source:["junctionNetworkSourceId","junctionGlobalId","junctionObjectId","junctionTerminalId","junctionFirstUnit","junctionNumUnits"]},write:!0}})],df.prototype,"junctionElement",void 0),u([De("junctionElement")],df.prototype,"readJunctionElement",null),u([Ve("junctionElement")],df.prototype,"writeJunctionElement",null),df=u([V("esri.rest.networks.support.CircuitPathConnectivityElement")],df);const tWe=df,tA=new Gt({startingPoint:"starting-point",barrier:"barrier",stoppingPoint:"stopping-point"});let Wd=class extends ve{constructor(e){super(e),this.globalId=null,this.isFilterBarrier=!1,this.percentAlong=null,this.terminalId=null,this.type=null,this.firstUnit=null,this.numUnits=null}};u([h({type:String,json:{write:!0}})],Wd.prototype,"globalId",void 0),u([h({type:Boolean,json:{write:!0}})],Wd.prototype,"isFilterBarrier",void 0),u([h({type:Number,json:{write:!0}})],Wd.prototype,"percentAlong",void 0),u([h({type:Number,json:{write:!0}})],Wd.prototype,"terminalId",void 0),u([h({type:tA.apiValues,json:{type:tA.jsonValues,read:{reader:tA.read,source:"traceLocationType"},write:{writer:tA.write,target:"traceLocationType"}}})],Wd.prototype,"type",void 0),u([h({type:Number,json:{write:!0}})],Wd.prototype,"firstUnit",void 0),u([h({type:Number,json:{write:!0}})],Wd.prototype,"numUnits",void 0),Wd=u([V("esri.rest.networks.support.TraceLocation")],Wd);const Cre=Wd;let hf=class extends ve{constructor(e){super(e),this.pathId=null,this.orderId=null,this.startingPoint=null,this.stoppingPoint=null,this.pathConnectivity=[],this.geometry=null}};u([h({type:Number,json:{write:!0}})],hf.prototype,"pathId",void 0),u([h({type:Number,json:{write:!0}})],hf.prototype,"orderId",void 0),u([h({type:Cre,json:{write:!0}})],hf.prototype,"startingPoint",void 0),u([h({type:Cre,json:{write:!0}})],hf.prototype,"stoppingPoint",void 0),u([h({type:[tWe],json:{write:!0}})],hf.prototype,"pathConnectivity",void 0),u([h({type:Yr,json:{write:!0}})],hf.prototype,"geometry",void 0),hf=u([V("esri.rest.networks.support.CircuitPath")],hf);const EH=hf;let C0=class extends ve{constructor(e){super(e),this.circuit=null,this.geometry=null,this.path=null}readCircuit(e,i){var n;const r=(n=i.sections)==null?void 0:n.map((s=>({...s,path:EH.fromJSON(s.path)})));return{name:i.name,globalId:i.globalId,isSectioned:i.isSectioned,sectionOrder:i.sectionOrder,startLocation:i.startLocation,stopLocation:i.stopLocation,sections:r,subcircuits:i.subcircuits,lastVerifiedTime:i.lastVerifiedTime?new Date(i.lastVerifiedTime):null,lastExportedTime:i.lastExportedTime?new Date(i.lastExportedTime):null,circuitType:i.circuitType,status:i.status}}};u([h({type:Object,json:{write:!0,read:{source:["name","globalId","isSectioned","sectionOrder","startLocation","stopLocation","sections","subcircuits","lastVerifiedTime","lastExportedTime","circuitType","status"]}}})],C0.prototype,"circuit",void 0),u([De("circuit")],C0.prototype,"readCircuit",null),u([h({type:Yr,json:{write:!0}})],C0.prototype,"geometry",void 0),u([h({type:EH,json:{write:!0}})],C0.prototype,"path",void 0),C0=u([V("esri.rest.networks.support.CircuitTraceResult")],C0);const iWe=C0;let P1=class extends ve{constructor(e){super(e),this.functionType=null,this.networkAttributeName=null,this.result=null}};u([h({type:["add","subtract","average","count","min","max"],json:{write:!0},readOnly:!0})],P1.prototype,"functionType",void 0),u([h({type:String,json:{write:!0},readOnly:!0})],P1.prototype,"networkAttributeName",void 0),u([h({type:Number,json:{write:!0},readOnly:!0})],P1.prototype,"result",void 0),P1=u([V("esri.rest.networks.support.FunctionResult")],P1);const rWe=P1;let _l=class extends ve{constructor(e){super(e),this.aggregatedGeometry=null,this.circuits=null,this.elements=null,this.globalFunctionResults=null,this.kFeaturesForKNNFound=!1,this.paths=null,this.startingPointsIgnored=!1,this.warnings=null}readNetworkElements(e,i){return i.elements!=null?i.elements.map((r=>"firstUnit"in r&&"numUnits"in r?new yh({...r}):new Yo({...r}))):[]}writeNetworkElements(e,i){i.elements=e.map((r=>r.toJSON()))}};u([h({type:eWe,json:{write:!0},readOnly:!0})],_l.prototype,"aggregatedGeometry",void 0),u([h({type:[iWe],json:{write:!0},readOnly:!0})],_l.prototype,"circuits",void 0),u([h({type:[Yo],json:{write:!0},readOnly:!0})],_l.prototype,"elements",void 0),u([De("elements")],_l.prototype,"readNetworkElements",null),u([Ve("elements")],_l.prototype,"writeNetworkElements",null),u([h({type:[rWe],json:{write:!0},readOnly:!0})],_l.prototype,"globalFunctionResults",void 0),u([h({type:Boolean,json:{write:!0},readOnly:!0})],_l.prototype,"kFeaturesForKNNFound",void 0),u([h({type:[EH],json:{write:!0},readOnly:!0})],_l.prototype,"paths",void 0),u([h({type:Boolean,json:{write:!0},readOnly:!0})],_l.prototype,"startingPointsIgnored",void 0),u([h({type:[String],json:{write:!0},readOnly:!0})],_l.prototype,"warnings",void 0),_l=u([V("esri.rest.networks.support.TraceResult")],_l);const nWe=is()({Pending:"job-waiting",InProgress:"job-executing",Completed:"job-succeeded"});let M0=class extends _l{constructor(e){super(e),this.statusUrl=null,this.status=null,this.submissionTime=null,this.lastUpdatedTime=null,this._timer=void 0}destroy(){clearInterval(this._timer)}async checkJobStatus(e){const i={...e,query:{f:"json"}},{data:r}=await fi(this.statusUrl,i),n=r.traceResults?{...r.traceResults,...r}:r;return this.read(n),this}async waitForJobCompletion(e={}){const{interval:i=1e3,statusCallback:r}=e;return new Promise(((n,s)=>{this._clearTimer();const o=setInterval((()=>{this._timer||s(fr()),this.checkJobStatus().then((a=>{const{status:l}=a;switch(this.status=l,l){case"job-succeeded":this._clearTimer(),n(this);break;case"job-waiting":case"job-executing":r&&r(this)}}),(a=>{this._clearTimer(),s(a)}))}),i);this._timer=o}))}_clearTimer(){clearInterval(this._timer),this._timer=void 0}};u([h({type:String,json:{write:!0}})],M0.prototype,"statusUrl",void 0),u([at(nWe)],M0.prototype,"status",void 0),u([h({type:Date,json:{type:Number,write:{writer:(t,e)=>{e.submissionTime=t?t.getTime():null}}}})],M0.prototype,"submissionTime",void 0),u([h({type:Date,json:{type:Number,write:{writer:(t,e)=>{e.lastUpdatedTime=t?t.getTime():null}}}})],M0.prototype,"lastUpdatedTime",void 0),M0=u([V("esri.networks.support.TraceJobInfo")],M0);let Zd=class extends JHe{constructor(e){super(e),this.sharedNamedTraceConfigurations=[],this.type="utility",this._terminalById=new Map,this._circuitManagerMap=new Map,this._unitIdentifierManager=null}get serviceTerritoryFeatureLayerId(){var e;return((e=this.dataElement)==null?void 0:e.serviceTerritoryFeatureLayerId)??null}get networkSystemLayers(){var e,i,r,n,s,o,a,l;return new uc({rulesTableId:(e=this.sourceJSON)==null?void 0:e.systemLayers.rulesTableId,rulesTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${(i=this.sourceJSON)==null?void 0:i.systemLayers.rulesTableId}`:null,subnetworksTableId:(r=this.sourceJSON)==null?void 0:r.systemLayers.subnetworksTableId,subnetworksTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${(n=this.sourceJSON)==null?void 0:n.systemLayers.subnetworksTableId}`:null,dirtyAreasLayerId:(s=this.sourceJSON)==null?void 0:s.systemLayers.dirtyAreasLayerId,dirtyAreasLayerUrl:this.sourceJSON?`${this.featureServiceUrl}/${(o=this.sourceJSON)==null?void 0:o.systemLayers.dirtyAreasLayerId}`:null,associationsTableId:(a=this.sourceJSON)==null?void 0:a.systemLayers.associationsTableId,associationsTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${(l=this.sourceJSON)==null?void 0:l.systemLayers.associationsTableId}`:null})}get terminalConfigurations(){var e;return((e=this.dataElement)==null?void 0:e.terminalConfigurations.map((i=>xf.fromJSON(i))))||[]}get domainNetworkNames(){var e;return((e=this.dataElement)==null?void 0:e.domainNetworks.map((i=>i.domainNetworkName)))||[]}get _utilityLayerList(){var i,r;const e=new Set;return(r=(i=this.dataElement)==null?void 0:i.domainNetworks)==null||r.map((n=>{var s,o;(s=n==null?void 0:n.edgeSources)==null||s.map((({layerId:a,sourceId:l})=>{this._layerIdBySourceId.set(l,a),this._sourceIdByLayerId.set(a,l),e.add(a)})),(o=n==null?void 0:n.junctionSources)==null||o.map((({layerId:a,sourceId:l})=>{this._layerIdBySourceId.set(l,a),this._sourceIdByLayerId.set(a,l),e.add(a)}))})),e}get hasTelecomNetwork(){var e;return((e=this.dataElement)==null?void 0:e.domainNetworks.some((i=>i.isTelecomNetwork)))??!1}async load(e){return this.addResolvingPromise(super.load(e)),this.addResolvingPromise(this._loadNamedTraceConfigurationsFromNetwork(e)),this}getTerminalConfiguration(e){var c,d,f,y;let i=null,r=null;const n=e.sourceLayer;let s=null;if((n==null?void 0:n.type)==="feature"){if(s=n.layerId,s===null)return null}else if((n==null?void 0:n.type)!=="subtype-sublayer"||(s=((c=n==null?void 0:n.parent)==null?void 0:c.layerId)??null,s===null))return null;const o=e.attributes;if(o==null)return null;for(const g of Object.keys(o))g.toUpperCase()==="ASSETGROUP"&&(i=e.getAttribute(g)),g.toUpperCase()==="ASSETTYPE"&&(r=e.getAttribute(g));if(!this.dataElement)return null;let a=null;const l=this.dataElement.domainNetworks;for(const g of l){const b=(d=g.junctionSources)==null?void 0:d.find((_=>_.layerId===s));if(b){const _=(f=b.assetGroups)==null?void 0:f.find((x=>x.assetGroupCode===i));if(_){const x=(y=_.assetTypes)==null?void 0:y.find((E=>E.assetTypeCode===r));if(x!=null&&x.isTerminalConfigurationSupported){a=x.terminalConfigurationId;break}}}}if(a!=null){const g=this.dataElement.terminalConfigurations,b=g==null?void 0:g.find((_=>_.terminalConfigurationId===a));return b?xf.fromJSON(b):null}return null}getTierNames(e){var r,n;const i=(r=this.dataElement)==null?void 0:r.domainNetworks.find((s=>s.domainNetworkName===e));return((n=i==null?void 0:i.tiers)==null?void 0:n.map((s=>s.name)))||[]}async getRulesTable(){return this._sharedRulesTable||(this._sharedRulesTable=this._createRulesTable()),await this._sharedRulesTable}async getCircuitManager(e){var n;if(!this.hasTelecomNetwork)return null;const i=(n=this.dataElement)==null?void 0:n.domainNetworks.find((s=>s.domainNetworkName===e&&s.isTelecomNetwork));if(!i)return null;const{default:r}=await ye(()=>import("./CircuitManager-BIz1BxVP.js"),[]);return lm(this._circuitManagerMap,e,(()=>new r({utilityNetwork:this,telecomDomainNetwork:i})))}async getUnitIdentifierManager(){if(!this.hasTelecomNetwork)return null;if(this._unitIdentifierManager)return this._unitIdentifierManager;const{default:e}=await ye(()=>import("./UnitIdentifierManager-B9HUJG_B.js"),[]);return this._unitIdentifierManager=new e({utilityNetwork:this}),this._unitIdentifierManager}getTerminalById(e){if(!this.dataElement||e==null)return null;const i=this._terminalById.get(e);return i??(this.terminalConfigurations.forEach((r=>{r.terminals.forEach((n=>{this._terminalById.set(n.id,n)}))})),this._terminalById.get(e))}isUtilityLayer(e){var i,r;return"layerId"in e?this._utilityLayerList.has(e==null?void 0:e.layerId)&&(((i=e.url)==null?void 0:i.startsWith(this.featureServiceUrl))??!1):!(e.type!=="subtype-sublayer"||!e.parent)&&this._utilityLayerList.has(e.parent.layerId)&&(((r=e.parent.url)==null?void 0:r.startsWith(this.featureServiceUrl))??!1)}async queryAssociations(e,i){const[{queryAssociations:r},{default:n}]=await Promise.all([ye(()=>import("./queryAssociations-CmhW97nU.js"),__vite__mapDeps([248,249])),ye(()=>import("./QueryAssociationsParameters-CCvqXXfs.js"),[])]),s=n.from(e);return s.gdbVersion=this.gdbVersion,s.moment=this.historicMoment,(await r(this.networkServiceUrl,s,i)).associations}async synthesizeAssociationGeometries(e){const[{synthesizeAssociationGeometries:i},{default:r}]=await Promise.all([ye(()=>import("./synthesizeAssociationGeometries-D8Yd2TWX.js"),__vite__mapDeps([250,249])),ye(()=>import("./SynthesizeAssociationGeometriesParameters-k_BsJSTH.js"),[])]),n=r.from(e);return n.gdbVersion=this.gdbVersion,n.moment=this.historicMoment,i(this.networkServiceUrl,n)}async trace(e){const[{trace:i},{default:r}]=await Promise.all([ye(()=>import("./trace-y5fvbZJp.js"),[]),ye(()=>import("./TraceParameters-DegoYhH_.js"),[])]),n=r.from(e);return n.gdbVersion=this.gdbVersion,n.moment=this.historicMoment,i(this.networkServiceUrl,n)}async submitTraceJob(e){const[{submitTraceJob:i},{default:r}]=await Promise.all([ye(()=>import("./trace-y5fvbZJp.js"),[]),ye(()=>import("./TraceParameters-DegoYhH_.js"),[])]),n=r.from(e);n.gdbVersion=this.gdbVersion,n.moment=this.historicMoment;const s=await i(this.networkServiceUrl,n);return new M0({statusUrl:s})}async canAddAssociation(e){const i=await this.getRulesTable();if(!i)return!1;const{fromNetworkElement:r,toNetworkElement:n}=e;if(!r||!n)return!1;await i.load();let s=null;switch(e.associationType){case"containment":s=i.rulesCategorized.containment;break;case"attachment":s=i.rulesCategorized.attachment;break;default:s=i.rulesCategorized.connectivity}return s.some((o=>EI(o,r,n)))}generateAddAssociations(e){const{associationsTable:i}=this.networkSystemLayers,{fromNetworkSourceId:r,fromGlobalId:n,fromTerminalId:s,toNetworkSourceId:o,toGlobalId:a,toTerminalId:l,associationType:c,isContentVisible:d,percentAlong:f,globalId:y}=KHe(i);return{addFeatures:e.map((g=>{var b,_,x,E,C,k;return new qi({attributes:{[r]:(b=g.fromNetworkElement)==null?void 0:b.networkSourceId,[n]:(_=g.fromNetworkElement)==null?void 0:_.globalId,[s]:(x=g.fromNetworkElement)==null?void 0:x.terminalId,[o]:(E=g.toNetworkElement)==null?void 0:E.networkSourceId,[a]:(C=g.toNetworkElement)==null?void 0:C.globalId,[l]:(k=g.toNetworkElement)==null?void 0:k.terminalId,[c]:GHe[g.associationType],[d]:g.isContentVisible==null?void 0:g.isContentVisible?1:0,[f]:g.percentAlong,[y]:g.globalId}})})),id:this.networkSystemLayers.associationsTableId,identifierFields:{globalIdField:(i==null?void 0:i.globalIdField)??"globalid",objectIdField:(i==null?void 0:i.objectIdField)??"objectid"}}}generateDeleteAssociations(e){const{associationsTable:i,associationsTableId:r}=this.networkSystemLayers;return{deleteFeatures:e.map((n=>({globalId:n.globalId}))),id:r,identifierFields:{globalIdField:(i==null?void 0:i.globalIdField)??"globalid",objectIdField:(i==null?void 0:i.objectIdField)??"objectid"}}}async loadAssociationsTable(){return this.networkSystemLayers.loadAssociationsTable()}async _loadNamedTraceConfigurationsFromNetwork(e){var n;if(((n=this.sharedNamedTraceConfigurations)==null?void 0:n.length)===0)return;const i=this.sharedNamedTraceConfigurations.map((s=>s.globalId)),r=await this.queryNamedTraceConfigurations({globalIds:i},e);for(const s of this.sharedNamedTraceConfigurations){const o=r==null?void 0:r.find((a=>a.globalId===s.globalId));if(o){const a=o.write({},{origin:"service"});s.read(a,{origin:"service"})}}}async _createRulesTable(){var o;const e=this.networkSystemLayers.rulesTableUrl,i=new lt({url:e});await i.load();const r=(o=this.dataElement)==null?void 0:o.domainNetworks;if(!r)return null;const n=r.flatMap((a=>[...a.edgeSources||[],...a.junctionSources||[]])),s=(await sWe(i)).map((a=>this._hydrateRuleInfo(i,n,a)));return new xy({rulesLayer:i,rules:s})}_hydrateRuleInfo(e,i,r){const n=e.fieldsIndex,s=n.get("RULETYPE"),o=n.get("CREATIONDATE"),a=n.get("FROMNETWORKSOURCEID"),l=n.get("FROMASSETGROUP"),c=n.get("FROMASSETTYPE"),d=n.get("FROMTERMINALID"),f=n.get("TONETWORKSOURCEID"),y=n.get("TOASSETGROUP"),g=n.get("TOASSETTYPE"),b=n.get("TOTERMINALID"),_=n.get("VIANETWORKSOURCEID"),x=n.get("VIAASSETGROUP"),E=n.get("VIAASSETTYPE"),C=n.get("VIATERMINALID"),k=r.attributes[s.name],O=new Date(r.attributes[o.name]),D=[{networkSourceId:r.attributes[a.name],assetGroupId:r.attributes[l.name],assetTypeId:r.attributes[c.name],terminalId:r.attributes[d.name]},{networkSourceId:r.attributes[f.name],assetGroupId:r.attributes[y.name],assetTypeId:r.attributes[g.name],terminalId:r.attributes[b.name]},{networkSourceId:r.attributes[_.name],assetGroupId:r.attributes[x.name],assetTypeId:r.attributes[E.name],terminalId:r.attributes[C.name]}];let B;(function(Z){Z[Z.from=0]="from",Z[Z.to=1]="to",Z[Z.via=2]="via"})(B||(B={}));const j={ruleType:k,creationDate:O};for(const Z of[B.from,B.to,B.via]){if(k!==vn.RTEdgeJunctionEdgeConnectivity&&Z===B.via)continue;const X=D[Z],ee=i.find((ke=>ke.sourceId===X.networkSourceId)),pe=ee==null?void 0:ee.assetGroups.find((ke=>ke.assetGroupCode===X.assetGroupId)),he=pe==null?void 0:pe.assetTypes.find((ke=>ke.assetTypeCode===X.assetTypeId)),ne=this._getTerminal(he,X);let re="";switch(Z){case B.from:re="from";break;case B.to:re="to";break;case B.via:re="via"}j[`${re}NetworkSource`]=ee,j[`${re}AssetGroup`]=pe,j[`${re}AssetType`]=he,j[`${re}Terminal`]=ne==null?void 0:ne.toJSON()}return j}_getTerminal(e,i){var s,o;const r=e==null?void 0:e.terminalConfigurationId,n=(s=this.terminalConfigurations)==null?void 0:s.find((a=>a.id===r));return((o=n==null?void 0:n.terminals)==null?void 0:o.find((a=>a.id===i.terminalId)))??null}};async function sWe(t){const e=new dt({where:"1=1",outFields:["*"]});return(await aH(t,e)).features}u([h({type:[XHe],json:{origins:{"web-map":{read:{source:"traceConfigurations"},write:{target:"traceConfigurations"}},service:{read:{source:"traceConfigurations"}}},read:!1}})],Zd.prototype,"sharedNamedTraceConfigurations",void 0),u([h({type:["utility"],readOnly:!0,json:{read:!1,write:!1}})],Zd.prototype,"type",void 0),u([h({readOnly:!0})],Zd.prototype,"serviceTerritoryFeatureLayerId",null),u([h({readOnly:!0})],Zd.prototype,"networkSystemLayers",null),u([h({readOnly:!0})],Zd.prototype,"terminalConfigurations",null),u([h({readOnly:!0})],Zd.prototype,"domainNetworkNames",null),u([h({readOnly:!0})],Zd.prototype,"hasTelecomNetwork",null),Zd=u([V("esri.networks.UtilityNetwork")],Zd);const d0e=Zd,oWe=Object.freeze(Object.defineProperty({__proto__:null,default:d0e},Symbol.toStringTag,{value:"Module"}));let A1=class extends bt.ClonableMixin(ve){constructor(e){super(e),this.expression=null,this.returnType="string",this.title=null}};u([h({type:String,json:{write:{isRequired:!0}}})],A1.prototype,"expression",void 0),u([h({type:["number","string"],json:{write:!0}})],A1.prototype,"returnType",void 0),u([h({type:String,json:{write:!0}})],A1.prototype,"title",void 0),A1=u([V("esri.webdoc.geotriggersInfo.ExpressionInfo")],A1);const h0e=A1,iA=new Gt({deviceLocation:"device-location"});let II=class extends bt.ClonableMixin(ve){constructor(e){super(e),this.filterExpression=null,this.type="device-location"}};u([h({type:h0e,json:{write:!0}})],II.prototype,"filterExpression",void 0),u([h({type:iA.apiValues,readOnly:!0,json:{type:iA.jsonValues,read:iA.read,write:iA.write}})],II.prototype,"type",void 0),II=u([V("esri.webdoc.geotriggersInfo.DeviceLocationFeed")],II);const aWe=II;let CI=class extends bt.ClonableMixin(ve){constructor(e){super(e),this.geometry=null,this.where=null}};u([h({types:R$,json:{read:hp,write:!0}})],CI.prototype,"geometry",void 0),u([h({type:String,json:{write:!0}})],CI.prototype,"where",void 0),CI=u([V("esri.webdoc.geotriggersInfo.FeatureFilter")],CI);const lWe=CI;let L1=class extends bt.ClonableMixin(ve){constructor(e){super(e),this.layerId=null,this.layerUrl=null,this.type="feature-layer"}};u([h({type:String,json:{write:{overridePolicy(){return{isRequired:this.layerUrl===null}}}}})],L1.prototype,"layerId",void 0),u([h({type:String,json:{write:{overridePolicy(){return{isRequired:this.layerId===null}}}}})],L1.prototype,"layerUrl",void 0),u([at({featureLayer:"feature-layer"},{readOnly:!0})],L1.prototype,"type",void 0),L1=u([V("esri.webdoc.geotriggersInfo.FeatureLayerSource")],L1);const cWe=L1;let k0=class extends bt.ClonableMixin(ve){constructor(e){super(e),this.fenceSource=null,this.filter=null,this.bufferDistance=null,this.type="features"}};u([h({type:cWe,json:{write:{isRequired:!0}}})],k0.prototype,"fenceSource",void 0),u([h({type:lWe,json:{write:!0}})],k0.prototype,"filter",void 0),u([h({type:Number,json:{write:!0}})],k0.prototype,"bufferDistance",void 0),u([at({features:"features"},{readOnly:!0})],k0.prototype,"type",void 0),k0=u([V("esri.webdoc.geotriggersInfo.FeatureFenceParameters")],k0);const uWe=k0;let eR=class extends bt.ClonableMixin(ve){constructor(e){super(e),this.type="fence"}};u([at({fence:"fence"},{readOnly:!0})],eR.prototype,"type",void 0),eR=u([V("esri.webdoc.geotriggersInfo.Geotrigger")],eR);const p0e=eR;let MI=class extends bt.ClonableMixin(ve){constructor(e){super(e),this.expressionInfo=null,this.requestedActions=null}};u([h({type:h0e,json:{write:!0}})],MI.prototype,"expressionInfo",void 0),u([h({type:[String],json:{write:!0}})],MI.prototype,"requestedActions",void 0),MI=u([V("esri.webdoc.geotriggersInfo.GeotriggerNotificationOptions")],MI);const dWe=MI,hWe=new Gt({enterContainsAndExitDoesNotContain:"enter-contains-and-exit-does-not-contain",enterContainsAndExitDoesNotIntersect:"enter-contains-and-exit-does-not-intersect",enterIntersectsAndExitDoesNotIntersect:"enter-intersects-and-exit-does-not-intersect"}),pWe=new Gt({useGeometry:"use-geometry",useGeometryWithAccuracy:"use-geometry-with-accuracy"}),rA=new Gt({enter:"enter",enterOrExit:"enter-or-exit",exit:"exit"});let Su=class extends p0e{constructor(e){super(e),this.enterExitRule="enter-contains-and-exit-does-not-intersect",this.feed=null,this.feedAccuracyMode="use-geometry",this.fenceNotificationRule=null,this.fenceParameters=null,this.name=null,this.notificationOptions=null,this.type="fence"}};u([at(hWe)],Su.prototype,"enterExitRule",void 0),u([h({type:aWe,json:{write:{isRequired:!0}}})],Su.prototype,"feed",void 0),u([at(pWe)],Su.prototype,"feedAccuracyMode",void 0),u([h({type:rA.apiValues,json:{type:rA.jsonValues,read:rA.read,write:{writer:rA.write,isRequired:!0}}})],Su.prototype,"fenceNotificationRule",void 0),u([h({type:uWe,json:{write:{isRequired:!0}}})],Su.prototype,"fenceParameters",void 0),u([h({type:String,json:{write:!0}})],Su.prototype,"name",void 0),u([h({type:dWe,json:{write:!0}})],Su.prototype,"notificationOptions",void 0),u([at({fence:"fence"},{readOnly:!0})],Su.prototype,"type",void 0),Su=u([V("esri.webdoc.geotriggersInfo.FenceGeotrigger")],Su);const fWe=Su,mWe={base:p0e,key:"type",typeMap:{fence:fWe}};let tR=class extends bt.ClonableMixin(ve){constructor(e){super(e),this.geotriggers=null}};u([h({types:[mWe],json:{write:{isRequired:!0}}})],tR.prototype,"geotriggers",void 0),tR=u([V("esri.webdoc.GeotriggersInfo")],tR);const yWe=tR;let iR=class extends bt.ClonableMixin(ve){constructor(e){super(e),this.enabled=!0}};u([h({type:Boolean,nonNullable:!0,json:{write:!0}})],iR.prototype,"enabled",void 0),iR=u([V("esri.webdoc.ips.AppleIPSProperties")],iR);const gWe=iR;let rR=class extends bt.ClonableMixin(ve){constructor(e){super(e),this.enabled=!0}};u([h({type:Boolean,nonNullable:!0,json:{write:!0}})],rR.prototype,"enabled",void 0),rR=u([V("esri.webdoc.ips.GNSSProperties")],rR);const vWe=rR;let R1=class extends bt.ClonableMixin(ve){constructor(e){super(e),this.enabled=!0,this.distance=5,this.units="meter"}};u([h({type:Boolean,nonNullable:!0,json:{write:!0}})],R1.prototype,"enabled",void 0),u([h({type:Number,nonNullable:!0,json:{write:!0}})],R1.prototype,"distance",void 0),u([h({type:["feet","meter"],nonNullable:!0,json:{write:!0}})],R1.prototype,"units",void 0),R1=u([V("esri.webdoc.ips.PathSnappingProperties")],R1);const bWe=R1;let nR=class extends bt.ClonableMixin(ve){constructor(e){super(e),this.enabled=!0}};u([h({type:Boolean,nonNullable:!0,json:{write:!0}})],nR.prototype,"enabled",void 0),nR=u([V("esri.webdoc.ips.SmoothingProperties")],nR);const wWe=nR;let P0=class extends bt.ClonableMixin(ve){constructor(e){super(e),this.appleIPS=null,this.gnss=null,this.smoothing=null,this.pathSnapping=null}};u([h({type:gWe,json:{name:"AppleIPS",write:!0}})],P0.prototype,"appleIPS",void 0),u([h({type:vWe,json:{name:"GNSS",write:!0}})],P0.prototype,"gnss",void 0),u([h({type:wWe,json:{write:!0}})],P0.prototype,"smoothing",void 0),u([h({type:bWe,json:{write:!0}})],P0.prototype,"pathSnapping",void 0),P0=u([V("esri.webdoc.ips.Configuration")],P0);const _We=P0;let O1=class extends bt.ClonableMixin(ve){constructor(e){super(e),this.portalItem=null}readPortalItem(e,i,r){const{itemId:n}=i;if(n)return new At({id:n,portal:r==null?void 0:r.portal})}writePortalItem(e,i){e!=null&&e.id&&(i.itemId=e.id)}};u([h({type:At,json:{write:{isRequired:!0}}})],O1.prototype,"portalItem",void 0),u([De("portalItem",["itemId"])],O1.prototype,"readPortalItem",null),u([Ve("portalItem",{itemId:{type:String}})],O1.prototype,"writePortalItem",null),O1=u([V("esri.webdoc.ips.PositioningService")],O1);const xWe=O1;let kI=class extends bt.ClonableMixin(ve){constructor(e){super(e),this.positioningService=null,this.configuration=null}};u([h({type:xWe,json:{write:{isRequired:!0}}})],kI.prototype,"positioningService",void 0),u([h({type:_We,json:{write:!0}})],kI.prototype,"configuration",void 0),kI=u([V("esri.webdoc.IPSInfo")],kI);const SWe=kI,$We={currentVersion:age,createInitialViewProperties:()=>new GO,parseVersion:Cx.parse,itemType:"Web Map",name:"webmap",origin:"web-map"},TWe=Ze.ofType(d0e);var kS;let A0=(kS=class extends vBe{constructor(e){super(e),this.geotriggersInfo=null,this.ipsInfo=null,this.presentation=null,this.utilityNetworks=null}destroy(){if(this.utilityNetworks){const e=this.utilityNetworks.removeAll();for(const i of e)i.destroy();this.utilityNetworks.destroy()}}get context(){return $We}loadAll(){return cN(this,(e=>{var i,r;e(this.ground,this.basemap,this.layers,this.tables,(r=(i=this.ipsInfo)==null?void 0:i.positioningService)==null?void 0:r.portalItem)}))}static fromJSON(e){if(e)return new this({resourceInfo:e});throw new ie("webmap:empty-resource","Expected a JSON resource but got nothing")}},kS.VERSION=age,kS);u([h({type:yWe,json:{write:!0}})],A0.prototype,"geotriggersInfo",void 0),u([h({type:SWe,json:{write:!0,name:"mapIPSInfo"}})],A0.prototype,"ipsInfo",void 0),u([h({json:{write:!0}})],A0.prototype,"presentation",void 0),u([h({type:TWe,json:{read:!0,write:!0}})],A0.prototype,"utilityNetworks",void 0),A0=u([V("esri.WebMap")],A0);const f0e=A0;/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
v4.33.24 */function nA(t){t.el.childElem&&(t.el.childElem.ownedBy=t.el);const e=EWe(t);if(!e){const i=LWe(t);if(!i){y0e(t);return}return kre(i,t,!0),i}return IWe(e,t.el.parent)||(t.el.parent=e,e.localName==="arcgis-expand"?CWe(e,t):e.localName==="arcgis-placement"?MWe(e,t):kre(e,t,!1)),e}function EWe({el:t}){for(let e=t.parentElement;e;e=(e==null?void 0:e.parentElement)??null){if(Mre.has(e.localName))return e;if("ownedBy"in e&&e.ownedBy instanceof HTMLElement&&Mre.has(e.ownedBy.localName))return e.ownedBy}}const Mre=new Set(["arcgis-map","arcgis-scene","arcgis-link-chart","arcgis-expand","arcgis-placement"]);function IWe(t,e){if(t!==e)return!1;const i=t.localName;return i==="arcgis-expand"||i==="arcgis-placement"}function GN(t,e,i="arcgisReady"){const r=t;if(r.view)e(r.view);else{let n=function(s){s.target===t&&(GN(t,e,i),t.removeEventListener(i,n))};t.addEventListener(i,n)}}const CWe=(t,e)=>GN(t,i=>{var r;e.el.childElem&&t.content!=null&&t.content.append(e.el.childElem),t.expandIcon=e.icon||((r=e.widget)==null?void 0:r.icon)||t.expandIcon,e.position=t.position,e.el.view=i}),MWe=(t,e)=>GN(t,i=>{e.el.childElem&&e.el.append(e.el.childElem),e.position=t.position,e.el.view=i}),kre=(t,e,i)=>GN(t,r=>{i?y0e(e):e.el.childElem&&kWe(t,e),e.el.view=r},"arcgisViewReadyChange");function kWe(t,e){var l;const i=e.el.childElem??e.el,r=t==null?void 0:t.childElem,n=[...t.children],s={};for(const c of n){if(c===r)continue;const d=c.position??"manual";s[d]??(s[d]=[]),s[d].push({child:c,position:d,index:n.indexOf(c)})}const o=(l=s[e.position??"manual"])==null?void 0:l.findIndex(({child:c})=>c===e.el),a=t.view.ui;a.remove(i),a.add(i,{position:e.position,index:o})}function PWe(t,e){return e===void 0||(t==null?void 0:t.targetGeometry)!==(e==null?void 0:e.targetGeometry)||(t==null?void 0:t.rotation)!==(e==null?void 0:e.rotation)||(t==null?void 0:t.scale)!==(e==null?void 0:e.scale)}function AWe(t,e){return m0e(e==null?void 0:e.center,t)}function m0e(t,e){if(typeof e=="string")return m0e(t,e.split(",").map(Number));if(!t)return e;if(Array.isArray(e)){const i=e[0],r=e[1],n=e.length>2?e[2]:void 0;if(i!==t.longitude||r!==t.latitude||n!==t.z)return e}else if(e&&!(t!=null&&t.equals(e)))return e}function y0e(t){t.el.childElem&&(t.el.shadowRoot??t.el).append(t.el.childElem)}function LWe(t,e){const i=t.referenceElement;if(typeof i!="string")return i??void 0;const r=i.includes("#")||i.includes(".")||i.includes("["),n=t.el.getRootNode();return(r?void 0:n.querySelector(`#${i}`))??n.querySelector(i)??void 0}/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
v4.33.24 */const RWe=Mi`@layer{arcgis-map{display:block;height:100%;.esri-view{height:100%;width:100%}}}`,OWe=tce(f0e),FWe=tce(R6e);var Ig;let NWe=(Ig=class extends z7{constructor(){super(),this._map=OWe(this),this.view=FWe(this),this.allLayerViews=this.view.allLayerViews,this.autoDestroyDisabled=!1,this.background=this.view.background,this.basemap=this._map.basemap,this.basemapView=this.view.basemapView,this.constraints=this.view.constraints,this.displayFilterDisabled=this.view.displayFilterEnabled,this.fatalError=this.view.fatalError,this.floors=this.view.floors,this.graphics=this.view.graphics,this.ground=this._map.ground,this.highlights=this.view.highlights,this.highlightOptions=this.view.highlightOptions,this.ipsInfo=this._map.ipsInfo,this.layerViews=this.view.layerViews,this.magnifier=this.view.magnifier,this.map=this.view.map,this.navigation=this.view.navigation,this.padding=this.view.padding,this.popup=this.view.popup,this.popupDisabled=this.view.popupEnabled,this.ready=this.view.ready,this.resizeAlign=this.view.resizeAlign,this.resolution=this.view.resolution,this.rotation=this.view.rotation,this.spatialReference=this.view.spatialReference,this.suspended=this.view.suspended,this.theme=this.view.theme,this.timeExtent=this.view.timeExtent,this.timeZone=this.view.timeZone,this.updating=this.view.updating,this.visibleArea=this.view.visibleArea,this.arcgisViewChange=VC(),this.arcgisViewClick=ws(()=>this.view,"click"),this.arcgisViewDoubleClick=ws(()=>this.view,"double-click"),this.arcgisViewDrag=ws(()=>this.view,"drag"),this.arcgisViewHold=ws(()=>this.view,"hold"),this.arcgisViewImmediateClick=ws(()=>this.view,"immediate-click"),this.arcgisViewImmediateDoubleClick=ws(()=>this.view,"immediate-double-click"),this.arcgisViewKeyDown=ws(()=>this.view,"key-down"),this.arcgisViewKeyUp=ws(()=>this.view,"key-up"),this.arcgisViewLayerviewCreate=ws(()=>this.view,"layerview-create"),this.arcgisViewLayerviewCreateError=ws(()=>this.view,"layerview-create-error"),this.arcgisViewLayerviewDestroy=ws(()=>this.view,"layerview-destroy"),this.arcgisViewMouseWheel=ws(()=>this.view,"mouse-wheel"),this.arcgisViewPointerDown=ws(()=>this.view,"pointer-down"),this.arcgisViewPointerEnter=ws(()=>this.view,"pointer-enter"),this.arcgisViewPointerLeave=ws(()=>this.view,"pointer-leave"),this.arcgisViewPointerMove=ws(()=>this.view,"pointer-move"),this.arcgisViewPointerUp=ws(()=>this.view,"pointer-up"),this.arcgisViewReadyChange=VC(),this.view.ui={components:["attribution"]}}get center(){return this.view.center}set center(e){const i=AWe(e,this.view);i&&(this.view.center=i)}get extent(){return this.view.extent}set extent(e){var i;e&&!((i=this.extent)!=null&&i.equals(e))&&(this.view.extent=e)}get focusAreas(){return this.map?this.map.focusAreas:{areas:[],style:"bright"}}set focusAreas(e){this.map&&(this.map.focusAreas=e)}get gamepad(){return this.view.input.gamepad}get interacting(){return this.view.interacting}get itemId(){var e;return(e=this._map.portalItem)==null?void 0:e.id}set itemId(e){jEe(this._map,this),this._map.portalItem={id:e},this.view.map=this._map}get navigating(){return this.view.navigating}get scale(){return this.view.scale}set scale(e){this.view.scale=e}get stationary(){return this.view.stationary}get viewpoint(){return this.view.viewpoint}set viewpoint(e){PWe(this.viewpoint,e)&&(this.view.viewpoint=e)}get zoom(){return this.view.zoom}set zoom(e){this.view.zoom=e}async addLayer(e,i){var r;(r=this.map)==null||r.add(e,i)}async addLayers(e,i){var r;(r=this.map)==null||r.addMany(e,i)}async addTable(e){var i;(i=this.map)==null||i.tables.add(e)}async addTables(e,i){var r;(r=this.map)==null||r.tables.addMany(e,i)}async closePopup(){this.view.closePopup()}async destroy(){await this.manager.destroy()}async goTo(e,i){return await this.view.goTo(e,i)}async hitTest(e,i){return await this.view.hitTest(e,i)}async openPopup(e){await this.view.openPopup(e)}async takeScreenshot(e){return await this.view.takeScreenshot(e)}toMap(e){return this.view.toMap(e)}toScreen(e,i){return this.view.toScreen(e,i)}async tryFatalErrorRecovery(){this.view.tryFatalErrorRecovery()}async whenLayerView(e){return await this.view.whenLayerView(e)}async viewOnReady(e,i){return await this.componentOnReady(),await this.view.whenReady().then(()=>e==null?void 0:e()).catch(i)}load(){const e=this;e.el.childElem=document.createElement("div"),e.el.append(e.el.childElem),this.view.container=e.el.childElem}loaded(){this.map||(this.map=this._map),this.manager.onLifecycle(()=>[$e(()=>this.map,e=>{e&&(this._map=e)},{initial:!0,sync:!0}),$e(()=>this.view.stationary,()=>this.arcgisViewChange.emit(),{initial:!0}),$e(()=>this.view.ready,()=>this.arcgisViewReadyChange.emit(),{initial:this.view.ready})])}},Ig.properties={_map:16,view:32,allLayerViews:0,autoDestroyDisabled:5,background:0,basemap:1,basemapView:0,center:1,constraints:0,displayFilterDisabled:5,extent:0,fatalError:0,floors:0,focusAreas:0,gamepad:32,graphics:0,ground:1,highlights:0,highlightOptions:0,interacting:32,ipsInfo:0,itemId:3,layerViews:0,magnifier:0,map:0,navigating:32,navigation:0,padding:0,popup:0,popupDisabled:5,ready:4,resizeAlign:1,resolution:8,rotation:9,scale:9,spatialReference:0,stationary:32,suspended:7,theme:0,timeExtent:0,timeZone:1,updating:4,viewpoint:0,visibleArea:0,zoom:9},Ig.shadowRootOptions=jC,Ig.styles=RWe,Ig);X7("arcgis-map",NWe);/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const DWe=new Set(["children","localName","ref","style","className"]),Pre=new WeakMap,Are=(t,e,i,r,n)=>{const s=n==null?void 0:n[e];s===void 0?(t[e]=i,i==null&&e in HTMLElement.prototype&&t.removeAttribute(e)):i!==r&&((o,a,l)=>{let c=Pre.get(o);c===void 0&&Pre.set(o,c=new Map);let d=c.get(a);l!==void 0?d===void 0?(c.set(a,d={handleEvent:l}),o.addEventListener(a,d)):d.handleEvent=l:d!==void 0&&(c.delete(a),o.removeEventListener(a,d))})(t,s,i)},g0e=({react:t,tagName:e,elementClass:i,events:r,displayName:n})=>{const s=new Set(Object.keys(r??{})),o=t.forwardRef(((a,l)=>{const c=t.useRef(new Map),d=t.useRef(null),f={},y={};for(const[g,b]of Object.entries(a))DWe.has(g)?f[g==="className"?"class":g]=b:s.has(g)||g in i.prototype?y[g]=b:f[g]=b;return t.useLayoutEffect((()=>{if(d.current===null)return;const g=new Map;for(const b in y)Are(d.current,b,a[b],c.current.get(b),r),c.current.delete(b),g.set(b,a[b]);for(const[b,_]of c.current)Are(d.current,b,void 0,_,r);c.current=g})),t.useLayoutEffect((()=>{var g;(g=d.current)==null||g.removeAttribute("defer-hydration")}),[]),f.suppressHydrationWarning=!0,t.createElement(e,{...f,ref:t.useCallback((g=>{d.current=g,typeof l=="function"?l(g):l!==null&&(l.current=g)}),[l])})}));return o.displayName=n??i.name,o},IH=_$e(mae,g0e),zWe=IH(V7("arcgis-features",{onArcgisClose:"arcgisClose",onArcgisPropertyChange:"arcgisPropertyChange",onArcgisReady:"arcgisReady",onArcgisTriggerAction:"arcgisTriggerAction"})),VWe=IH(V7("arcgis-legend",{onArcgisPropertyChange:"arcgisPropertyChange",onArcgisReady:"arcgisReady"})),jWe=IH(V7("arcgis-map",{onArcgisViewChange:"arcgisViewChange",onArcgisViewClick:"arcgisViewClick",onArcgisViewDoubleClick:"arcgisViewDoubleClick",onArcgisViewDrag:"arcgisViewDrag",onArcgisViewHold:"arcgisViewHold",onArcgisViewImmediateClick:"arcgisViewImmediateClick",onArcgisViewImmediateDoubleClick:"arcgisViewImmediateDoubleClick",onArcgisViewKeyDown:"arcgisViewKeyDown",onArcgisViewKeyUp:"arcgisViewKeyUp",onArcgisViewLayerviewCreate:"arcgisViewLayerviewCreate",onArcgisViewLayerviewCreateError:"arcgisViewLayerviewCreateError",onArcgisViewLayerviewDestroy:"arcgisViewLayerviewDestroy",onArcgisViewMouseWheel:"arcgisViewMouseWheel",onArcgisViewPointerDown:"arcgisViewPointerDown",onArcgisViewPointerEnter:"arcgisViewPointerEnter",onArcgisViewPointerLeave:"arcgisViewPointerLeave",onArcgisViewPointerMove:"arcgisViewPointerMove",onArcgisViewPointerUp:"arcgisViewPointerUp",onArcgisViewReadyChange:"arcgisViewReadyChange"}));/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ri=KM(class extends QM{constructor(){super(...arguments),this.key=ct}render(t,e){return this.key=t,e}update(t,[e,i]){return e!==this.key&&(Lae(t),this.key=e),i}});/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */function UWe(t){return t.map(e=>{let i="";for(let r=0;r<e;r++)i+=((1+Math.random())*65536|0).toString(16).substring(1);return i}).join("-")}const ld=()=>UWe([2,1,1,1,3]);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 *//*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var BWe=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],d9=BWe.join(","),v0e=typeof Element>"u",fM=v0e?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,o3=!v0e&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t==null?void 0:t.ownerDocument},a3=function t(e,i){var r;i===void 0&&(i=!0);var n=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),s=n===""||n==="true",o=s||i&&e&&t(e.parentNode);return o},GWe=function(e){var i,r=e==null||(i=e.getAttribute)===null||i===void 0?void 0:i.call(e,"contenteditable");return r===""||r==="true"},b0e=function(e,i,r){if(a3(e))return[];var n=Array.prototype.slice.apply(e.querySelectorAll(d9));return i&&fM.call(e,d9)&&n.unshift(e),n=n.filter(r),n},w0e=function t(e,i,r){for(var n=[],s=Array.from(e);s.length;){var o=s.shift();if(!a3(o,!1))if(o.tagName==="SLOT"){var a=o.assignedElements(),l=a.length?a:o.children,c=t(l,!0,r);r.flatten?n.push.apply(n,c):n.push({scopeParent:o,candidates:c})}else{var d=fM.call(o,d9);d&&r.filter(o)&&(i||!e.includes(o))&&n.push(o);var f=o.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(o),y=!a3(f,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(o));if(f&&y){var g=t(f===!0?o.children:f.children,!0,r);r.flatten?n.push.apply(n,g):n.push({scopeParent:o,candidates:g})}else s.unshift.apply(s,o.children)}}return n},_0e=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},x0e=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||GWe(e))&&!_0e(e)?0:e.tabIndex},qWe=function(e,i){var r=x0e(e);return r<0&&i&&!_0e(e)?0:r},HWe=function(e,i){return e.tabIndex===i.tabIndex?e.documentOrder-i.documentOrder:e.tabIndex-i.tabIndex},S0e=function(e){return e.tagName==="INPUT"},WWe=function(e){return S0e(e)&&e.type==="hidden"},ZWe=function(e){var i=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return i},JWe=function(e,i){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===i)return e[r]},YWe=function(e){if(!e.name)return!0;var i=e.form||o3(e),r=function(a){return i.querySelectorAll('input[type="radio"][name="'+a+'"]')},n;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")n=r(window.CSS.escape(e.name));else try{n=r(e.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var s=JWe(n,e.form);return!s||s===e},XWe=function(e){return S0e(e)&&e.type==="radio"},KWe=function(e){return XWe(e)&&!YWe(e)},QWe=function(e){var i,r=e&&o3(e),n=(i=r)===null||i===void 0?void 0:i.host,s=!1;if(r&&r!==e){var o,a,l;for(s=!!((o=n)!==null&&o!==void 0&&(a=o.ownerDocument)!==null&&a!==void 0&&a.contains(n)||e!=null&&(l=e.ownerDocument)!==null&&l!==void 0&&l.contains(e));!s&&n;){var c,d,f;r=o3(n),n=(c=r)===null||c===void 0?void 0:c.host,s=!!((d=n)!==null&&d!==void 0&&(f=d.ownerDocument)!==null&&f!==void 0&&f.contains(n))}}return s},Lre=function(e){var i=e.getBoundingClientRect(),r=i.width,n=i.height;return r===0&&n===0},eZe=function(e,i){var r=i.displayCheck,n=i.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var s=fM.call(e,"details>summary:first-of-type"),o=s?e.parentElement:e;if(fM.call(o,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof n=="function"){for(var a=e;e;){var l=e.parentElement,c=o3(e);if(l&&!l.shadowRoot&&n(l)===!0)return Lre(e);e.assignedSlot?e=e.assignedSlot:!l&&c!==e.ownerDocument?e=c.host:e=l}e=a}if(QWe(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return Lre(e);return!1},tZe=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var i=e.parentElement;i;){if(i.tagName==="FIELDSET"&&i.disabled){for(var r=0;r<i.children.length;r++){var n=i.children.item(r);if(n.tagName==="LEGEND")return fM.call(i,"fieldset[disabled] *")?!0:!n.contains(e)}return!0}i=i.parentElement}return!1},h9=function(e,i){return!(i.disabled||a3(i)||WWe(i)||eZe(i,e)||ZWe(i)||tZe(i))},Rre=function(e,i){return!(KWe(i)||x0e(i)<0||!h9(e,i))},iZe=function(e){var i=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(i)||i>=0)},rZe=function t(e){var i=[],r=[];return e.forEach(function(n,s){var o=!!n.scopeParent,a=o?n.scopeParent:n,l=qWe(a,o),c=o?t(n.candidates):a;l===0?o?i.push.apply(i,c):i.push(a):r.push({documentOrder:s,tabIndex:l,item:n,isScope:o,content:c})}),r.sort(HWe).reduce(function(n,s){return s.isScope?n.push.apply(n,s.content):n.push(s.content),n},[]).concat(i)},nZe=function(e,i){i=i||{};var r;return i.getShadowRoot?r=w0e([e],i.includeContainer,{filter:Rre.bind(null,i),flatten:!1,getShadowRoot:i.getShadowRoot,shadowRootFilter:iZe}):r=b0e(e,i.includeContainer,Rre.bind(null,i)),rZe(r)},sZe=function(e,i){i=i||{};var r;return i.getShadowRoot?r=w0e([e],i.includeContainer,{filter:h9.bind(null,i),flatten:!0,getShadowRoot:i.getShadowRoot}):r=b0e(e,i.includeContainer,h9.bind(null,i)),r};const CH={getShadowRoot:!0};function $0e(t){return Array.isArray(t)?t:Array.from(t)}function Qu(t){const r=W$(t,"[dir]");return r?r.getAttribute("dir"):"ltr"}function qN(t){return t.getRootNode()}function v_t(t){const e=qN(t);return"host"in e?e:null}function T0e(t){return t.host||null}function HN(t,{selector:e,id:i}){if(!t)return null;t.assignedSlot&&(t=t.assignedSlot);const r=qN(t);return(i?"getElementById"in r?r.getElementById(i):null:e?r.querySelector(e):null)||HN(T0e(r),{selector:e,id:i})}function W$(t,e){return t?t.closest(e)||W$(T0e(qN(t)),e):null}function oZe(t){return typeof(t==null?void 0:t.setFocus)=="function"}async function mM(t,e=!1,i="tabbable",r,n){return t?oZe(t)&&r!==t?t.setFocus(n):(i==="tabbable"?lZe:uZe)(t,e,n):void 0}function aZe(t,e){if(t)return nZe(t,{...CH,includeContainer:e})[0]??t}function lZe(t,e,i){var r;(r=aZe(t,e))==null||r.focus(i)}function cZe(t,e){if(t)return sZe(t,{...CH,includeContainer:e})[0]??t}function uZe(t,e,i){var r;(r=cZe(t,e))==null||r.focus(i)}function Ore(t,e){return Array.from(t.children).filter(i=>i.matches(e))}function dZe(t,e){return t.filter(i=>i.matches(e))}function Fre(t,e,i){if(typeof e=="string"&&e!=="")return e;if(e===""||e===!0)return t[i]}function Nre(t,e){return!(e.left>t.right||e.right<t.left||e.top>t.bottom||e.bottom<t.top)}function A2(t){return(!!t).toString()}function hZe(t){return lr(t)||mZe(t)}function pZe(t){return yZe(t).filter(e=>e.nodeType===Node.TEXT_NODE).map(e=>e.textContent).join("").trim()}function fZe(t){var e;for(const i of t.childNodes)if(i.nodeType===Node.TEXT_NODE&&((e=i.textContent)==null?void 0:e.trim())!==""||i.nodeType===Node.ELEMENT_NODE)return!0;return!1}function mZe(t){return!!pZe(t)}function yZe(t){return t.currentTarget.assignedNodes({flatten:!0})}function lr(t){return!!Rc(t).length}function Rc(t,e){return E0e(t.currentTarget,e)}function E0e(t,e){const i=t.assignedElements({flatten:!0});return e?dZe(i,e):i}function sR(t){return!!(t.isPrimary&&t.button===0)}function gZe(t){return t.detail===0}const Wf=(t,e,i,r=!0,n=!0,s=!1)=>{const o=t.indexOf(e),a=o===0,l=o===t.length-1;r&&(i=i==="previous"&&a?"last":i==="next"&&l?"first":i);let c;return i==="previous"?c=t[o-1]||t[r?t.length-1:o]:i==="next"?c=t[o+1]||t[r?0:o]:i==="last"?c=t[t.length-1]:c=t[0],mM(c,n,"tabbable",s?c:void 0),c};function vZe(t,e){if(t.parentNode!==e.parentNode)return!1;const i=Array.from(t.parentNode.children);return i.indexOf(t)<i.indexOf(e)}async function bZe(t,e){return I0e(t,e,"animation")}async function wZe(t,e){return I0e(t,e,"transition")}function Dre(t,e,i){const r=e==="transition"?"transitionProperty":"animationName";return t.getAnimations().find(n=>n[r]===i)}async function I0e(t,e,i){let r=Dre(t,i,e);if(r||(await p9(),r=Dre(t,i,e)),!!r)try{await r.finished}catch{}}async function p9(){await new Promise(t=>requestAnimationFrame(()=>t()))}function M_(t){return t.endsWith("px")?parseFloat(t):t.endsWith("vw")?zre(parseFloat(t),window.innerWidth):t.endsWith("vh")?zre(parseFloat(t),window.innerHeight):0}function zre(t,e){return t*e/100}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const _Ze=Mi`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host{position:absolute;inset:0;display:flex;block-size:100%;inline-size:100%;flex-direction:column;overflow:hidden}.main{position:relative;display:flex;block-size:100%;inline-size:100%;flex:1 1 auto;flex-direction:row;justify-content:space-between;overflow:hidden}.content{display:flex;block-size:100%;inline-size:100%;flex-direction:column;flex-wrap:nowrap;overflow:auto;justify-content:space-between}.content ::slotted(calcite-shell-center-row),.content ::slotted(calcite-panel),.content ::slotted(calcite-flow){flex:1 1 auto;align-self:stretch;max-block-size:unset}.content--behind{position:absolute;inset:0;border-width:0px;z-index:calc(var(--calcite-z-index) - 1);display:initial}.content--non-interactive{pointer-events:none;display:flex;block-size:100%;inline-size:100%;flex-direction:column;flex-wrap:nowrap}::slotted(calcite-shell-center-row){inline-size:unset}::slotted(.header .heading){font-size:var(--calcite-font-size--2);line-height:1.375;font-weight:var(--calcite-font-weight-normal)}slot[name=panel-start]::slotted(calcite-shell-panel),slot[name=panel-end]::slotted(calcite-shell-panel){position:relative;z-index:calc(var(--calcite-z-index) + 1)}slot[name=panel-end]::slotted(calcite-shell-panel){margin-inline-start:auto}::slotted(calcite-panel),::slotted(calcite-flow){border-width:var(--calcite-border-width-sm);border-color:var(--calcite-shell-border-color, var(--calcite-color-border-3));border-inline-start-width:var(--calcite-border-width-none);border-inline-end-width:var(--calcite-border-width-none);border-style:solid}slot[name=center-row]::slotted(calcite-shell-center-row:not([detached])),slot[name=panel-top]::slotted(calcite-shell-center-row:not([detached])),slot[name=panel-bottom]::slotted(calcite-shell-center-row:not([detached])){border-color:var(--calcite-shell-border-color, var(--calcite-color-border-3));border-inline-start-width:var(--calcite-border-width-sm);border-inline-end-width:var(--calcite-border-width-sm)}.center-content{display:flex;flex-direction:column;justify-content:space-between;block-size:100%;inline-size:100%;min-inline-size:0}.content-bottom{justify-content:flex-end}::slotted(calcite-shell-center-row){flex:none;align-self:stretch}::slotted(calcite-tip-manager){position:absolute;z-index:var(--calcite-z-index-toast);box-sizing:border-box}@keyframes in-up{0%{opacity:0;transform:translate3D(0,5px,0)}to{opacity:1;transform:translateZ(0)}}::slotted(calcite-tip-manager){animation:in-up var(--calcite-internal-animation-timing-slow) ease-in-out;border-radius:.25rem;--tw-shadow: 0 6px 20px -4px rgba(0, 0, 0, .1), 0 4px 12px -2px rgba(0, 0, 0, .08);--tw-shadow-colored: 0 6px 20px -4px var(--tw-shadow-color), 0 4px 12px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow);inset-block-end:.5rem;inset-inline:var(--calcite-shell-tip-spacing, 26vw)}slot[name=center-row]::slotted(calcite-shell-center-row),slot[name=panel-bottom]::slotted(calcite-shell-center-row){margin-block-start:auto}slot[name=panel-top]::slotted(calcite-shell-center-row){margin-block-end:auto}.position-wrapper{position:absolute;pointer-events:none;inset:0}slot[name=modals]::slotted(calcite-modal){position:absolute}:host([hidden]){display:none}[hidden]{display:none}`,Md={main:"main",content:"content",contentBehind:"content--behind",contentBottom:"content-bottom",contentNonInteractive:"content--non-interactive",footer:"footer",positionedSlotWrapper:"positioned-slot-wrapper",contentBehindCenterContent:"center-content"},uu={centerRow:"center-row",panelStart:"panel-start",panelEnd:"panel-end",panelTop:"panel-top",panelBottom:"panel-bottom",header:"header",footer:"footer",alerts:"alerts",sheets:"sheets",modals:"modals",dialogs:"dialogs"},iF=class iF extends ir{constructor(){super(),this.hasAlerts=!1,this.hasDialogs=!1,this.hasFooter=!1,this.hasHeader=!1,this.hasModals=!1,this.hasOnlyPanelBottom=!1,this.hasPanelBottom=!1,this.hasPanelTop=!1,this.hasSheets=!1,this.panelIsResizing=!1,this.contentBehind=!1,this.listen("calciteInternalShellPanelResizeStart",this.handleCalciteInternalShellPanelResizeStart),this.listen("calciteInternalShellPanelResizeEnd",this.handleCalciteInternalShellPanelResizeEnd)}willUpdate(e){(e.has("hasPanelTop")&&(this.hasUpdated||this.hasPanelTop!==!1)||e.has("hasPanelBottom")&&(this.hasUpdated||this.hasPanelBottom!==!1))&&(this.hasOnlyPanelBottom=!this.hasPanelTop&&this.hasPanelBottom)}handleCalciteInternalShellPanelResizeStart(e){this.panelIsResizing=!0,e.stopPropagation()}handleCalciteInternalShellPanelResizeEnd(e){this.panelIsResizing=!1,e.stopPropagation()}handleHeaderSlotChange(e){this.hasHeader=!!lr(e)}handleFooterSlotChange(e){this.hasFooter=!!lr(e)}handleAlertsSlotChange(e){var i;this.hasAlerts=!!lr(e),(i=Rc(e))==null||i.map(r=>{r.tagName==="CALCITE-ALERT"&&(r.embedded=!0)})}handleSheetsSlotChange(e){var i;this.hasSheets=!!lr(e),(i=Rc(e))==null||i.map(r=>{r.tagName==="CALCITE-SHEET"&&(r.embedded=!0)})}handleModalsSlotChange(e){var i;this.hasModals=!!lr(e),(i=Rc(e))==null||i.map(r=>{r.tagName==="CALCITE-MODAL"&&(r.embedded=!0)})}handlePanelTopChange(e){this.hasPanelTop=lr(e)}handlePanelBottomChange(e){this.hasPanelBottom=lr(e)}handleDialogsSlotChange(e){var i;this.hasDialogs=!!lr(e),(i=Rc(e))==null||i.map(r=>{r.tagName==="CALCITE-DIALOG"&&(r.embedded=!0)})}renderHeader(){return Se`<div .hidden=${!this.hasHeader}>${ri("header",Se`<slot name=${uu.header} @slotchange=${this.handleHeaderSlotChange}></slot>`)}</div>`}renderFooter(){return ri("footer",Se`<div class=${Te(Md.footer)} .hidden=${!this.hasFooter}><slot name=${uu.footer} @slotchange=${this.handleFooterSlotChange}></slot></div>`)}renderAlerts(){return Se`<div .hidden=${!this.hasAlerts}>${ri("alerts",Se`<slot name=${uu.alerts} @slotchange=${this.handleAlertsSlotChange}></slot>`)}</div>`}renderSheets(){return Se`<div .hidden=${!this.hasSheets}>${ri("sheets",Se`<slot name=${uu.sheets} @slotchange=${this.handleSheetsSlotChange}></slot>`)}</div>`}renderModals(){return Se`<div .hidden=${!this.hasModals}>${ri("modals",Se`<slot name=${uu.modals} @slotchange=${this.handleModalsSlotChange}></slot>`)}</div>`}renderDialogs(){return Se`<div .hidden=${!this.hasDialogs}>${ri("dialogs",Se`<slot name=${uu.dialogs} @slotchange=${this.handleDialogsSlotChange}></slot>`)}</div>`}renderContent(){const{panelIsResizing:e}=this,i=ri("default-slot",Se`<slot></slot>`),r=e?Se`<div class=${Te(Md.contentNonInteractive)}>${i}</div>`:i,n=ri("center-row-slot",Se`<slot name=${uu.centerRow}></slot>`),s=ri("panel-bottom-slot",Se`<slot name=${uu.panelBottom} @slotchange=${this.handlePanelBottomChange}></slot>`),o=ri("panel-top-slot",Se`<slot name=${uu.panelTop} @slotchange=${this.handlePanelTopChange}></slot>`),a="content-container";return this.contentBehind?[ri(a,Se`<div class=${Te({[Md.content]:!0,[Md.contentBehind]:!0})}>${r}</div>`),Se`<div class=${Te({[Md.contentBehindCenterContent]:!0,[Md.contentBottom]:this.hasOnlyPanelBottom})}>${o}${s}${n}</div>`]:[ri(a,Se`<div class=${Te({[Md.content]:!0,[Md.contentBottom]:this.hasOnlyPanelBottom})}>${o}${r}${s}${n}</div>`)]}renderMain(){return Se`<div class=${Te(Md.main)}><slot name=${uu.panelStart}></slot>${this.renderContent()}<slot name=${uu.panelEnd}></slot></div>`}renderPositionedSlots(){return Se`<div class=${Te(Md.positionedSlotWrapper)}>${this.renderAlerts()}${this.renderModals()}${this.renderDialogs()}${this.renderSheets()}</div>`}render(){return Se`${this.renderHeader()}${this.renderMain()}${this.renderFooter()}${this.renderPositionedSlots()}`}};iF.properties={hasAlerts:[16,{},{state:!0}],hasDialogs:[16,{},{state:!0}],hasFooter:[16,{},{state:!0}],hasHeader:[16,{},{state:!0}],hasModals:[16,{},{state:!0}],hasOnlyPanelBottom:[16,{},{state:!0}],hasPanelBottom:[16,{},{state:!0}],hasPanelTop:[16,{},{state:!0}],hasSheets:[16,{},{state:!0}],panelIsResizing:[16,{},{state:!0}],contentBehind:[7,{},{reflect:!0,type:Boolean}]},iF.styles=_Ze;let f9=iF;rr("calcite-shell",f9);const MH=Symbol.for("controller"),xZe=t=>typeof t=="object"&&t!==null&&(MH in t||"hostConnected"in t||"hostDisconnected"in t||"hostUpdate"in t||"hostUpdated"in t);let PI;const AI=t=>{PI!==t&&(PI=t,queueMicrotask(()=>PI===t?PI=void 0:0))},WN=t=>PI;let L0=[];const SZe=t=>{if(t===void 0){L0=[];return}const e=L0.indexOf(t);L0=e===-1?[...L0,t]:L0.slice(0,e+1),queueMicrotask(()=>L0=[])},$Ze=()=>L0;let Vre;const TZe=()=>{const t=Vre;return Vre=void 0,t},EZe=async(t,e)=>{const i=kH(t);if(i===void 0)return t;if(await i.ready,typeof e=="function"){const r=i.watchExports(n=>e(n,r))}return i.exports},IZe=async t=>{const e=kH(t);return await e.ready,e},kH=t=>{const i=WN().manager.X(t);if(i!==void 0)return i;if(xZe(t))return t;const r=TZe();if(r!==void 0)return r},CZe=(t,e,i)=>{const r=Object.keys(t),n=r.length;dg===void 0&&queueMicrotask(ZN),dg??(dg=new Map);let s=dg.get(t);return s===void 0&&(s={callbacks:[],keyCount:n},dg.set(t,s)),s.keyCount!==n&&(s.callbacks.forEach(o=>o(r)),s.callbacks=[],s.keyCount=n),s.callbacks.push(o=>{const a=c=>ii(e,null,c),l=o[n];l===void 0?a(void 0):t[l]===i?a(l):a(void 0)}),i};let dg;const ZN=()=>{dg==null||dg.forEach(({callbacks:t},e)=>{const i=Object.keys(e);t.forEach(r=>r(i))}),dg=void 0},MZe=(t,e,i)=>{const r=t.manager;return r.V!==ct&&r.V!==i&&r.S(void 0,void 0),r.T.length===0&&queueMicrotask(()=>r.S(void 0,void 0)),r.V=i,r.T.push((n,s)=>ii(e,void 0,i===s?n:void 0)),i},kZe=(t=[WN(),...$Ze()],e,i)=>{const r=Array.isArray(t)?t:[t];let n=r.length+1;const s=o=>{n-=1,o!==void 0&&(n=Math.min(n,0)),n===0&&e(o)};r.forEach(o=>CZe(o,a=>s(a===void 0?void 0:{key:a,host:o,isReactive:!1}),i));for(const o of r)if("manager"in o&&o.manager.component===o){MZe(o,a=>s(a===void 0?void 0:{key:a,host:o,isReactive:!0}),i);break}return i},PZe=(t="",e={},i=WN())=>{const r={emit:n=>{t===""&&ZN();const s=new CustomEvent(t,{detail:n,cancelable:!0,bubbles:!0,composed:!0,...e});return i.el.dispatchEvent(s),s}};return t===""&&kZe(void 0,n=>t=n.key,r),r};PZe.bind(null,"");var C0e;C0e=MH;var PS,AS,Tb,LS,RS,OS,FS,NS,Ky,Eb,Fa,ch,Ff,DS,oR;class AZe{constructor(e){Ye(this,DS);Ye(this,PS);Ye(this,AS);Ye(this,Tb);Ye(this,LS);Ye(this,RS);Ye(this,OS);Ye(this,FS);Ye(this,NS);Ye(this,Ky);Ye(this,Eb);Ye(this,Fa);Ye(this,ch);Ye(this,Ff);Ue(this,PS,[]),Ue(this,AS,[]),Ue(this,Tb,[]),Ue(this,LS,[]),Ue(this,RS,[]),Ue(this,OS,[]),Ue(this,FS,[]),Ue(this,NS,[]),Ue(this,Ky,[]),Ue(this,Eb,!1),this.P=new op,this.connectedCalled=!1,this.loadedCalled=!1,this[C0e]=!0,Ue(this,Ff,[]);const i=this,r=e??WN();Ue(i,Fa,r),i.ready=i.P.promise,Ue(i,ch,Ure(i)),i.component=r,Y(i,Fa).addController(i),Y(i,Fa).manager===void 0||(SZe(i),queueMicrotask(()=>i.catchUpLifecycle()))}catchUpLifecycle(){const{manager:e}=Y(this,Fa);e.connectedCalled&&!this.connectedCalled&&this.triggerConnected(),Y(e,Eb)&&this.triggerLoad().then(()=>e.loadedCalled&&this.triggerLoaded()).catch(console.error)}get exports(){return Y(this,ch)}set exports(e){const i=Y(this,ch);i!==e&&(Ue(this,ch,e),Y(this,Ff).forEach(ii),this.connectedCalled&&this.O!==!1&&Y(this,Fa).requestUpdate(this.O,i)),this.P.resolve(e)}setProvisionalExports(e,i=!0){Ue(this,ch,i?Ure(e):e),Y(this,Ff).forEach(ii)}watchExports(e){const i=()=>e(Y(this,ch));return Y(this,Ff).push(i),()=>void Y(this,Ff).splice(Y(this,Ff).indexOf(i),1)}get use(){return AI(Y(this,Fa)),EZe}get useRef(){return AI(Y(this,Fa)),IZe}get useRefSync(){return AI(Y(this,Fa)),kH}controllerRemoved(){Y(this,Fa).el.isConnected&&this.triggerDisconnected(),this.triggerDestroy()}onConnected(e){Y(this,PS).push(e)}onDisconnected(e){Y(this,AS).push(e)}onLoad(e){Y(this,Tb).push(e)}onLoaded(e){Y(this,LS).push(e)}onUpdate(e){Y(this,RS).push(e)}onUpdated(e){Y(this,OS).push(e)}onDestroy(e){Y(this,FS).push(e)}onLifecycle(e){Y(this,NS).push(e),this.connectedCalled&&Y(this,Fa).el.isConnected&&yr(this,DS,oR).call(this,e)}triggerConnected(){const e=this;e.hostConnected&&ii(e.hostConnected,e),Y(e,PS).forEach(ii),e.triggerLifecycle(),e.connectedCalled=!0}triggerDisconnected(){const e=this;e.hostDisconnected&&ii(e.hostDisconnected,e),Y(e,AS).forEach(ii),Y(e,Ky).forEach(ii),Ue(e,Ky,[])}async triggerLoad(){if(Y(this,Eb))return;Ue(this,Eb,!0);const e=this;e.hostLoad&&await GS(e.hostLoad,e),Y(this,Tb).length>0&&await Promise.allSettled(Y(this,Tb).map(GS)),this.P.resolve(Y(this,ch))}triggerLoaded(){this.loadedCalled||(this.hostLoaded&&ii(this.hostLoaded,this),Y(this,LS).forEach(ii),this.loadedCalled=!0)}triggerUpdate(e){this.hostUpdate&&ii(this.hostUpdate,this,e),Y(this,RS).forEach(jre,e)}triggerUpdated(e){this.hostUpdated&&ii(this.hostUpdated,this,e),Y(this,OS).forEach(jre,e)}triggerDestroy(){this.hostDestroy&&ii(this.hostDestroy,this),Y(this,FS).forEach(ii)}triggerLifecycle(){this.hostLifecycle&&yr(this,DS,oR).call(this,()=>this.hostLifecycle()),Y(this,NS).forEach(yr(this,DS,oR),this)}}PS=new WeakMap,AS=new WeakMap,Tb=new WeakMap,LS=new WeakMap,RS=new WeakMap,OS=new WeakMap,FS=new WeakMap,NS=new WeakMap,Ky=new WeakMap,Eb=new WeakMap,Fa=new WeakMap,ch=new WeakMap,Ff=new WeakMap,DS=new WeakSet,oR=function(e){AI(Y(this,Fa));const i=ii(e);(Array.isArray(i)?i:[i]).forEach(n=>{typeof n=="function"?Y(this,Ky).push(n):typeof n=="object"&&typeof n.remove=="function"&&Y(this,Ky).push(n.remove)})};function jre(t){ii(t,void 0,this)}const LZe=AZe,Ure=t=>{if(typeof t!="object"&&typeof t!="function"||t===null)return t;const e={get(r,n,s){if(!((n==="exports"||n==="_exports")&&n in r&&r[n]===i)&&(n in r||n in Promise.prototype||typeof n=="symbol"))return typeof r=="function"?r[n]:Reflect.get(r,n,s)}},i=new Proxy(t,e);return i},RZe=1,OZe=2,FZe=4,NZe=8,DZe=16,zZe=32,VZe=64,M0e=t=>{var i,r;let e=t;for(;e=e.parentNode??e.host;)if((i=e==null?void 0:e.constructor)!=null&&i.lumina){const n=e;return(r=n.manager)!=null&&r.loadedCalled||(n.J??n._offspring).push(t),(n.I??n._postLoad).promise}return!1},Bre={};function PH(){}const aR=Object.defineProperty,jZe=globalThis.HTMLElement??PH;var Na,Nf,zS,BM,m9;const FW=class FW extends jZe{constructor(){var n,s;super();Ye(this,BM);Ye(this,Na);Ye(this,Nf);Ye(this,zS);Ue(this,Nf,{}),Ue(this,zS,[]),this.I=new op,this.H=new op,this.J=[];const i=this,r=i.constructor;i._offspring=i.J,i._postLoad=i.I,(n=r.C)==null||n.forEach(o=>{Object.hasOwn(i,o)&&(Y(i,Nf)[o]=i[o],delete i[o])}),r.A?yr(s=i,BM,m9).call(s,{a:r.A}):r.B.then(async o=>{var a,l;await r.K.p,yr(l=i,BM,m9).call(l,await(((a=o.default)==null?void 0:a.then(c=>typeof c=="function"?{a:c}:c))??o))}).catch(o=>{i.H.reject(o),setTimeout(()=>{throw o})})}static F(){for(const i of this.C??[])aR(this.prototype,i,{configurable:!0,enumerable:!0,get(){return Y(this,Nf)[i]},set(r){Y(this,Nf)[i]=r}});for(const i of this.E??[])aR(this.prototype,i,{async value(...r){return Y(this,Na)||await this.H.promise,await Y(this,Na)[i](...r)},configurable:!0});for(const i of this.D??[])aR(this.prototype,i,{value(...r){return Y(this,Na)[i](...r)},configurable:!0})}get manager(){var i;return(i=Y(this,Na))==null?void 0:i.manager}attributeChangedCallback(i,r,n){var s;(s=Y(this,Na))==null||s.attributeChangedCallback(i,r,n),Y(this,Na)||Y(this,zS).push(i)}connectedCallback(){var i,r;Y(this,Na)?(r=(i=Y(this,Na)).connectedCallback)==null||r.call(i):queueMicrotask(()=>this.G=M0e(this))}disconnectedCallback(){var i,r;(r=(i=Y(this,Na))==null?void 0:i.disconnectedCallback)==null||r.call(i)}async componentOnReady(){return await this.H.promise,this}addController(){}requestUpdate(){var i;(i=Y(this,Na))==null||i.requestUpdate()}};Na=new WeakMap,Nf=new WeakMap,zS=new WeakMap,BM=new WeakSet,m9=function(i){var y;const r=this.constructor,n=r.L,s=Y(this,Nf),o=Object.values(i).find(g=>g.L===n),a=`${n}--lazy`;let l=o;for(;l&&!Object.hasOwn(l,"lumina");)l=Object.getPrototypeOf(l);BZe(l),!r.A&&(r.A=o,customElements.define(a,o)),o.N=this;const d=document.createElement(a);o.N=void 0,Ue(this,Na,d),Ue(this,Nf,d),Y(this,zS).forEach(g=>d.attributeChangedCallback(g,null,this.getAttribute(g))),Object.entries(s).forEach(UZe,d);const f=this.isConnected;(f||this.G)&&((y=d.connectedCallback)==null||y.call(d),f||d.disconnectedCallback())},FW.lumina=!0;let Gre=FW;function UZe([t,e]){this[t]=e}const BZe=t=>{const e=t.prototype,i=Element.prototype;Object.hasOwn(e,"isConnected")||(e.setAttribute=function(n,s){i.setAttribute.call(this.el,n,s)},e.removeAttribute=function(n){i.removeAttribute.call(this.el,n)},aR(e,"isConnected",{get(){return Reflect.get(i,"isConnected",this.el)}}))};var Df,ku,VS;class GZe extends LZe{constructor(i){super(i);Ye(this,Df);Ye(this,ku);Ye(this,VS);this.destroyed=!1,this.R=!1,this.V=ct,this.T=[],Ue(this,VS,new WeakMap),Ue(this,ku,i),this.exports=void 0,this.hasDestroy=y9 in i&&typeof i.destroy=="function",qu.prototype.addController.call(i,{hostConnected:()=>{if(this.destroyed){const r=i.el.localName;throw i.el.remove(),new Error(`The ${r} component has already been destroyed. It cannot be used again. If you meant to disconnect and reconnect a component without automatic destroy, set the ${y9} prop.`)}Y(this,Df)!==void 0&&clearTimeout(Y(this,Df)),ZN();for(const r of i.M)"triggerConnected"in r?r.triggerConnected():ii(r.hostConnected,r)},hostDisconnected:()=>{for(const r of i.M)"triggerDisconnected"in r?r.triggerDisconnected():ii(r.hostDisconnected,r);this.hasDestroy&&!this.destroyed&&this.U()},hostUpdate:()=>{for(const r of i.M)"triggerUpdate"in r?r.triggerUpdate(this.Q):ii(r.hostUpdate,r,this.Q)},hostUpdated:()=>{for(const r of i.M)"triggerUpdated"in r?r.triggerUpdated(this.Q):ii(r.hostUpdated,r,this.Q);this.Q=void 0}}),queueMicrotask(()=>this.R=!0),AI(i)}async destroy(){if(!this.destroyed){Y(this,ku).el.isConnected&&(this.hasDestroy=!1,Y(this,ku).el.remove()),Ue(this,Df,void 0),this.destroyed=!0;for(const i of Y(this,ku).M)"triggerDestroy"in i?i.triggerDestroy():ii(i.hostDestroy,i);Y(this,ku).M.splice(0)}}U(){Y(this,Df)!==void 0&&clearTimeout(Y(this,Df)),!Y(this,ku).el.isConnected&&!Y(this,ku).autoDestroyDisabled&&Ue(this,Df,Eae(()=>void Y(this,ku).destroy(),qZe))}S(i,r){const n=this.T;this.V=ct,this.T=[],n.forEach(s=>s(i,r))}W(i,r){(typeof r=="object"&&r!==null||typeof r=="function")&&Y(this,VS).set(r,i)}X(i){if(typeof i=="object"&&i!==null||typeof i=="function")return Y(this,VS).get(i)}}Df=new WeakMap,ku=new WeakMap,VS=new WeakMap;let qZe=1e3;const y9="autoDestroyDisabled";var Ib,GM,qM,Cb,uh,x$,k0e,P0e;const kC=class kC extends qu{constructor(){super();Ye(this,x$);Ye(this,Ib);Ye(this,GM);Ye(this,qM);Ye(this,Cb);Ye(this,uh);this.M=[],this.manager=new GZe(this);const i=this,r=i.constructor,n=r.N,s=r.K.o,o=kC.prototype.shouldUpdate;Ue(i,Cb,(n==null?void 0:n.H)??new op),i.I=(n==null?void 0:n.I)??new op,i.J=(n==null?void 0:n.J)??[],i._offspring=i.J,i._postLoad=i.I,i.el=n??i,Ue(i,qM,i.enableUpdating),i.enableUpdating=PH,i.shouldUpdate!==o&&(Ue(i,GM,i.shouldUpdate),i.shouldUpdate=o),s&&(Ue(i,Ib,new Map),r.elementProperties.forEach((a,l)=>Y(i,Ib).set(l,s())))}static finalizeStyles(i){var s;const r=super.finalizeStyles(i),n=this.shadowRootOptions===Bre;return((s=this.K)==null?void 0:s.commonStyles)===void 0||n?r:[this.K.commonStyles,...r]}static createProperty(i,r){const n=typeof r=="number"?r:Array.isArray(r)?r[0]:0,s=Array.isArray(r)?r[1]:void 0,o=(s==null?void 0:s.hasChanged)??XM,a={attribute:n&RZe&&typeof i=="string"?Mae(i):!1,reflect:!!(n&OZe),type:n&FZe?Boolean:n&NZe?Number:void 0,state:!!(n&DZe),readOnly:!!(n&zZe),noAccessor:!!(n&VZe),c:!1,...s,hasChanged(l,c){const d=o(l,c);return a.c=d,d}};super.createProperty(i,a)}static getPropertyDescriptor(i,r,n){const s=this.K,o=super.getPropertyDescriptor(i,r,n);return n.d=o,{...o,get(){var a,l;return(a=s.t)==null||a.call(s,Y(this,Ib).get(i)),(l=o.get)==null?void 0:l.call(this)},set(a){var c,d;const l=this.manager;if(n.readOnly&&(l.R||l.connectedCalled))throw Error(`Cannot assign to read-only property "${i}" of ${this.el.localName}. Trying to assign "${a}"`);o.set.call(this,a??void 0),n.c&&((d=(c=Y(this,Ib))==null?void 0:c.get(i))==null||d.notify()),l.T.length>0&&(ZN(),l==null||l.S(i,a))}}}connectedCallback(){var n,s;if(this.el.hasAttribute("defer-hydration"))return;const i=(s=(n=this.constructor.K).c)==null?void 0:s.call(n,()=>this.requestUpdate());Ue(this,uh,i);const r=!this.manager.connectedCalled;super.connectedCallback(),r?queueMicrotask(()=>yr(this,x$,P0e).call(this).catch(o=>{Y(this,Cb).reject(o),setTimeout(()=>{throw o})})):i&&this.requestUpdate()}disconnectedCallback(){var i;super.disconnectedCallback(),(i=Y(this,uh))==null||i.destroy(),Ue(this,uh,void 0)}createRenderRoot(){const i=this.el.shadowRoot,r=this.constructor,n=r.shadowRootOptions,o=i??(n===Bre?this.el:this.el.attachShadow(n));if(this.isConnected){const a=o.getRootNode();a.adoptedStyleSheets=[...a.adoptedStyleSheets,...r.elementStyles.map(l=>"styleSheet"in l?l.styleSheet:l)]}return o}shouldUpdate(i){var r;return this.manager.Q=i,((r=Y(this,GM))==null?void 0:r.call(this,i))??!0}update(i){Y(this,uh)?yr(this,x$,k0e).call(this,i):super.update(i)}listen(i,r,n){const s=(r==null?void 0:r.bind(this))??r;this.manager.onLifecycle(()=>(this.el.addEventListener(i,s,n),()=>this.el.removeEventListener(i,s,n)))}listenOn(i,r,n,s){const o=(n==null?void 0:n.bind(this))??n;this.manager.onLifecycle(()=>(i.addEventListener(r,o,s),()=>i.removeEventListener(r,o,s)))}async componentOnReady(){return await Y(this,Cb).promise,this}addController(i){var r;this.M.push(i),!(MH in i)&&this.renderRoot&&this.el.isConnected&&((r=i.hostConnected)==null||r.call(i))}removeController(i){var r;this.M.splice(this.M.indexOf(i),1),(r=i.controllerRemoved)==null||r.call(i)}};Ib=new WeakMap,GM=new WeakMap,qM=new WeakMap,Cb=new WeakMap,uh=new WeakMap,x$=new WeakSet,k0e=function(i){try{Y(this,uh).clear(),this.constructor.K.r(Y(this,uh),()=>Yk(kC.prototype,this,"update").call(this,i))}catch(r){throw Y(this,uh).clear(),r}},P0e=async function(){var s,o;const i=this.el.G??M0e(this.el);i&&await i;const r=[];for(const a of this.M)"triggerLoad"in a?r.push(a.triggerLoad()):r.push(GS(a.hostLoad,a));await Promise.all(r),await((s=this.load)==null?void 0:s.call(this)),this.manager.hasDestroy&&this.manager.onUpdate(a=>a.has(y9)&&this.manager.U()),Y(this,qM).call(this,!0),this.performUpdate(),this.I.resolve(),await Promise.resolve();const n=this.J.filter(a=>{var l;return!((l=a.manager)!=null&&l.loadedCalled)});n.length&&await Promise.allSettled(n.map(async a=>await a.componentOnReady())),this.J.length=0,this.el.setAttribute(this.constructor.K.hydratedAttribute,"");for(const a of this.M)"triggerLoaded"in a?a.triggerLoaded():ii(a.hostLoaded,a);(o=this.loaded)==null||o.call(this),Y(this,Cb).resolve()},kC.lumina=!0;let qre=kC;const HZe={},WZe=(t,e)=>i=>{const r=i.tagName;let n=HZe;const s={name:r,get prototype(){var a;if(n===void 0){const l=customElements.get(r);if(!l)throw new Error(`Custom element "${r}" not found`);(a=l.F)==null||a.call(l),l.F=PH,n=l.prototype,Object.defineProperty(s,"prototype",{value:n})}return n}},o=e({...i,react:t,elementClass:s});return n=void 0,o},jc=(t,e)=>({tagName:t,events:e}),Uc=WZe(mae,g0e),ZZe=Uc(jc("calcite-action",{})),JZe=Uc(jc("calcite-action-bar",{onCalciteActionBarCollapse:"calciteActionBarCollapse",onCalciteActionBarExpand:"calciteActionBarExpand",onCalciteActionBarToggle:"calciteActionBarToggle"})),bp=Uc(jc("calcite-block",{onCalciteBlockBeforeClose:"calciteBlockBeforeClose",onCalciteBlockBeforeOpen:"calciteBlockBeforeOpen",onCalciteBlockClose:"calciteBlockClose",onCalciteBlockCollapse:"calciteBlockCollapse",onCalciteBlockExpand:"calciteBlockExpand",onCalciteBlockOpen:"calciteBlockOpen",onCalciteBlockSortHandleBeforeClose:"calciteBlockSortHandleBeforeClose",onCalciteBlockSortHandleBeforeOpen:"calciteBlockSortHandleBeforeOpen",onCalciteBlockSortHandleClose:"calciteBlockSortHandleClose",onCalciteBlockSortHandleOpen:"calciteBlockSortHandleOpen",onCalciteBlockToggle:"calciteBlockToggle"})),JN=Uc(jc("calcite-carousel",{onCalciteCarouselChange:"calciteCarouselChange",onCalciteCarouselPause:"calciteCarouselPause",onCalciteCarouselPlay:"calciteCarouselPlay",onCalciteCarouselResume:"calciteCarouselResume",onCalciteCarouselStop:"calciteCarouselStop"})),Qs=Uc(jc("calcite-carousel-item",{})),F1=Uc(jc("calcite-label",{})),YZe=Uc(jc("calcite-option",{})),XZe=Uc(jc("calcite-panel",{onCalcitePanelClose:"calcitePanelClose",onCalcitePanelCollapse:"calcitePanelCollapse",onCalcitePanelExpand:"calcitePanelExpand",onCalcitePanelScroll:"calcitePanelScroll",onCalcitePanelToggle:"calcitePanelToggle"})),KZe=Uc(jc("calcite-select",{onCalciteSelectChange:"calciteSelectChange"})),QZe=Uc(jc("calcite-shell",{})),eJe=Uc(jc("calcite-shell-panel",{onCalciteShellPanelCollapse:"calciteShellPanelCollapse",onCalciteShellPanelExpand:"calciteShellPanelExpand"})),dE=Uc(jc("calcite-slider",{onCalciteSliderChange:"calciteSliderChange",onCalciteSliderInput:"calciteSliderInput"}));function yM(t,e,i,r){let n=null,s=1e3;typeof e=="number"?(s=e,r=i):(n=e??null,s=i);let o,a=0;const l=()=>{a=0,t.apply(r,o)},c=(...d)=>{n&&n.apply(r,d),o=d,s?a||(a=setTimeout(l,s)):l()};return c.remove=()=>{a&&(clearTimeout(a),a=0)},c.forceUpdate=()=>{a&&(clearTimeout(a),l())},c.hasPendingUpdates=()=>!!a,c}function g9(t){var e;switch(t==null?void 0:t.type){case"point":return t;case"extent":return t.center;case"polygon":return t.centroid;case"multipoint":case"polyline":return(e=t.extent)==null?void 0:e.center;default:return null}}const A0e=()=>zl({action:()=>ye(()=>Promise.resolve().then(()=>tW),void 0)});function L0e(t,e,i){const{title:r,textEnabled:n}=e,{type:s,active:o,uid:a,disabled:l,indicator:c}=t;return t.visible?G("calcite-action",{...e,active:s==="toggle"&&t.value,appearance:"solid","data-action-id":t.id,"data-action-uid":a,disabled:l,icon:tJe(t),indicator:c,loading:o,scale:"s",text:r??"",title:n?void 0:r},i):null}function tJe(t){return t.icon?t.icon:"image"in t&&t.image||t.className?void 0:"question"}function iJe(t){return t?{backgroundImage:`url(${t})`}:{}}function rJe({action:t,feature:e}){const i=e==null?void 0:e.attributes,r="image"in t?t.image:void 0;return r&&i?xo(r,i):r??""}var l3;(function(t){t[t.KILOBYTES=1024]="KILOBYTES",t[t.MEGABYTES=1048576]="MEGABYTES",t[t.GIGABYTES=1073741824]="GIGABYTES"})(l3||(l3={}));function nJe(t,e){return{type:sw(e),value:t,unit:e}}function b_t(t){return{value:t}}function sJe(t,e){return{type:sw(e),value:t,unit:e}}function oJe(t,e){return{type:sw(e),value:t,unit:e}}function YN(t,e,i="arithmetic"){return{type:sw(e),value:t,unit:e,rotationType:i}}function w_t(t,e){const i=aJe(t,e);return t.type==="angle"?YN(i,e,t.rotationType):nJe(i,e)}function aJe(t,e){return Ii(t.value,t.unit,e)}function __t(t,e){return t==null?e:e==null||t.value>Ii(e.value,e.unit,t.unit)?t:e}function x_t(t,e){return t==null?null:{...t,value:t.value*e}}function lJe(t,e,i){if(e===i)return t;switch(i){case"arithmetic":case"geographic":return 90-t}}const S_t=sJe(0,"meters"),$_t=oJe(0,"square-meters");YN(0,"radians");const T_t=YN(0,"degrees"),E_t=YN(0,"degrees","geographic");function R0e(t,e,i){return t.units[e][i]}function Z$(t,e,i,r=2,n="abbr"){return`${Qr(e,{minimumFractionDigits:r,maximumFractionDigits:r,signDisplay:e>0?"never":"exceptZero"})} ${R0e(t,i,n)}`}function XN(t,e,i,r=2,n="abbr"){return`${Qr(e,{minimumFractionDigits:r,maximumFractionDigits:r,signDisplay:"exceptZero"})} ${R0e(t,i,n)}`}function I_t(t,e,i,r=2,n="abbr"){const s=uue(e,i);return Z$(t,Ii(e,i,s),s,r,n)}function C_t(t,e,i,r=2,n="abbr"){const s=uue(e,i);return XN(t,Ii(e,i,s),s,r,n)}function M_t(t,e,i,r=2,n="abbr"){const s=due(e,i);return Z$(t,Ii(e,i,s),s,r,n)}function k_t(t,e,i,r=2,n="abbr"){const s=due(e,i);return XN(t,Ii(e,i,s),s,r,n)}function P_t(t,e,i,r=2,n="abbr"){const s=hue(e,i);return Z$(t,Ii(e,i,s),s,r,n)}function A_t(t,e,i,r=2,n="abbr"){const s=hue(e,i);return XN(t,Ii(e,i,s),s,r,n)}function L_t(t,e,i,r=2,n="abbr"){const s=pue(e,i);return Z$(t,Ii(e,i,s),s,r,n)}function R_t(t,e,i,r=2,n="abbr"){const s=pue(e,i);return XN(t,Ii(e,i,s),s,r,n)}function O_t(t,e,i,r=2,n="abbr"){const s=LCe(e,i);return Z$(t,Ii(e,i,s),s,r,n)}function F_t(t,e,i,r=2,n="abbr"){const s=RCe(e,i);return Z$(t,Ii(e,i,s),s,r,n)}const cJe=(t,e)=>({style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:e,minimumFractionDigits:e,signDisplay:t>0?"never":"exceptZero"});function N_t(t,e,i,r,n,s=uce,o=!0){let a=s.normalize(lJe(Ii(t,e,"degrees"),i,r),0,o);const l=cJe(a,n??2);return a=uJe(a,l),Qr(a,l)}const Hre=new Map;function uJe(t,e){const i=JSON.stringify(e);let r=Hre.get(i);return r||(r=new Intl.NumberFormat("en-US",e),Hre.set(i,r)),/^[-+]?360\.?0*°?$/.test(r.format(t))?0:t}const Wre=["B","kB","MB","GB","TB"];function dJe(t,e){let i=(e=Math.round(e))===0?0:Math.floor(Math.log(e)/Math.log(l3.KILOBYTES));i=to(i,0,Wre.length-1);const r=Qr(e/l3.KILOBYTES**i,{maximumFractionDigits:2});return Ja(t.units.bytes[Wre[i]],{fileSize:r})}function hJe(t){const{exifInfo:e,exifName:i,tagName:r}=t;if(!e||!i||!r)return null;const n=e.find((s=>s.name===i));return n?pJe({tagName:r,tags:n.tags}):null}function pJe(t){const{tagName:e,tags:i}=t;if(!i||!e)return null;const r=i.find((n=>n.name===e));return(r==null?void 0:r.value)||null}var v9;const fJe={1:{id:1,rotation:0,mirrored:!1},2:{id:2,rotation:0,mirrored:!0},3:{id:3,rotation:180,mirrored:!1},4:{id:4,rotation:180,mirrored:!0},5:{id:5,rotation:-90,mirrored:!0},6:{id:6,rotation:90,mirrored:!1},7:{id:7,rotation:90,mirrored:!0},8:{id:8,rotation:-90,mirrored:!1}};let ka=v9=class extends ve{constructor(t){super(t),this.contentType=null,this.exifInfo=null,this.id=null,this.globalId=null,this.keywords=null,this.name=null,this.parentGlobalId=null,this.parentObjectId=null,this.size=null,this.url=null}get orientationInfo(){const{exifInfo:t}=this,e=hJe({exifName:"Exif IFD0",tagName:"Orientation",exifInfo:t});return fJe[e]||null}clone(){return new v9({contentType:this.contentType,exifInfo:this.exifInfo,id:this.id,globalId:this.globalId,keywords:this.keywords,name:this.name,parentGlobalId:this.parentGlobalId,parentObjectId:this.parentObjectId,size:this.size,url:this.url})}};u([h({type:String})],ka.prototype,"contentType",void 0),u([h()],ka.prototype,"exifInfo",void 0),u([h({readOnly:!0})],ka.prototype,"orientationInfo",null),u([h({type:si})],ka.prototype,"id",void 0),u([h({type:String})],ka.prototype,"globalId",void 0),u([h({type:String})],ka.prototype,"keywords",void 0),u([h({type:String})],ka.prototype,"name",void 0),u([h({json:{read:!1}})],ka.prototype,"parentGlobalId",void 0),u([h({json:{read:!1}})],ka.prototype,"parentObjectId",void 0),u([h({type:si})],ka.prototype,"size",void 0),u([h({json:{read:!1}})],ka.prototype,"url",void 0),ka=v9=u([V("esri.rest.query.support.AttachmentInfo")],ka);const D_t=",",mJe={years:365,months:30,days:1,hours:1/24,minutes:1/1440,seconds:1/86400,milliseconds:1/864e5},yJe=new Set(["integer","small-integer"]);let F4=null;function O0e(t){return _q(t)||EFe(t)||IFe(t)}async function z_t(t){const{field:e,field2:i,field3:r,normalizationField:n,valueExpression:s}=t;let o=[];if(s){if(!F4){const{arcadeUtils:a}=await fp();F4=a}o=F4.extractFieldNames(s)}return e&&o.push(e),i&&o.push(i),r&&o.push(r),n&&o.push(n),o}function hE(t){return String(t).padStart(2,"0")}function Zre(t,e,i){let r;return e==="date"||e==="number"?(e==="number"&&(t=new Date(t)),r=`TIMESTAMP'${i?t.getFullYear():t.getUTCFullYear()}-${hE((i?t.getMonth():t.getUTCMonth())+1)}-${hE(i?t.getDate():t.getUTCDate())} ${hE(i?t.getHours():t.getUTCHours())}:${hE(i?t.getMinutes():t.getUTCMinutes())}:${hE(i?t.getSeconds():t.getUTCSeconds())}'`):r=t,r}function V_t(t,e,i,r){const{hasQueryEngine:n}=t,s=`(${Zre(i,Jre(t,i),n)} - ${Zre(e,Jre(t,e),n)})`;let o=mJe[r],a="/";return o<1&&(o=1/o,a="*"),{sqlExpression:o===1?s:`(${s} ${a} ${o})`,sqlWhere:null}}function Jre(t,e){if(e instanceof Date)return"date";if(typeof e=="number")return"number";if(typeof e=="string"){const i=t.getField(e);if(e.toLowerCase()==="<now>")return;if(_q(i))return"field"}}function j_t(t,e){const i=e&&t.getField(e);return!!i&&yJe.has(i.type)}function U_t(t){return`cast(${t} as float)`}function AH(t,e){const{format:i,timeZoneOptions:r,fieldType:n}=e??{};let s,o;if(r&&({timeZone:s,timeZoneName:o}=the(r.layerTimeZone,r.datesInUnknownTimezone,r.viewTimeZone,G_(i||"short-date-short-time"),n)),typeof t=="string"&&isNaN(Date.parse(n==="time-only"?`1970-01-01T${t}Z`:t)))return t;switch(n){case"date-only":{const a=G_(i||"short-date");return typeof t=="string"?IPe(t,{...a}):Pl(t,{...a,timeZone:pp})}case"time-only":{const a=G_(i||"short-time");return typeof t=="string"?CPe(t,a):Pl(t,{...a,timeZone:pp})}case"timestamp-offset":{if(!s&&typeof t=="string"&&new Date(t).toISOString()!==t)return t;const a=i||r?G_(i||"short-date-short-time"):void 0,l=a?{...a,timeZone:s,timeZoneName:o}:void 0;return typeof t=="string"?MPe(t,l):Pl(t,l)}default:{const a=i||r?G_(i||"short-date-short-time"):void 0;return Pl(typeof t=="string"?new Date(t):t,a?{...a,timeZone:s,timeZoneName:o}:void 0)}}}const gJe="esri.widgets.Feature.support.featureUtils",b9=()=>Ie.getLogger(gJe),vJe=/href=(""|'')/gi,bJe=/(\{([^{\r\n]+)\})/g,wJe=/'/g,F0e=/^\s*expression\//i,_Je=/(\n)/gi,xJe=/[\u00A0-\u9999<>&]/gim,SJe=/href\s*=\s*(?:"([^"]+)"|'([^']+)')/gi,$Je=/^(?:mailto:|tel:)/,N0e="relationships/",Yre=G_("short-date-short-time");function LH(t){if(t!=null)return(t.sourceLayer||t.layer)??void 0}async function gM({type:t,value:e,event:i}){try{return typeof e=="function"?e(i):await e}catch(r){return void b9().error("error",`An error occurred when calling the "${t}" function`,{error:r,graphic:i.graphic,value:e})}}function RH(t=""){if(t)return!$Je.test(t.trim().toLowerCase())}function KN(t){return!!t&&F0e.test(t)}function TJe(t,e){if(!e||!KN(e)||!t)return;const i=e.replace(F0e,"").toLowerCase();return t.find((({name:r})=>r.toLowerCase()===i))}function OH(t,e){const i=TJe(e,t==null?void 0:t.fieldName);return i?i.title||null:t?t.label||t.fieldName:null}function EJe(t,e){const i=e.get(t.toLowerCase());return`{${(i==null?void 0:i.fieldName)||t}}`}function IJe(t){return t.replaceAll(vJe,"")}function u$(t,e){const i=FH(e,t);return i?i.name:t}function D0e(t,e){return t&&t.map((i=>u$(i,e)))}function FH(t,e){return t&&typeof t.getField=="function"&&e?t.getField(e)??null:null}function z0e(t){return`${t}`.trim()}function hg({attributes:t,globalAttributes:e,layer:i,text:r,expressionAttributes:n,fieldInfoMap:s}){return r?c3({formattedAttributes:e,template:PJe(r,{...e,...n,...t},i),fieldInfoMap:s}):""}function c3({formattedAttributes:t,template:e,fieldInfoMap:i}){return z0e(IJe(Ja(Ja(e,(r=>EJe(r,i))),t)))}function CJe(t,e,i=!1){const r=e[t];if(typeof r=="string"){const s=(i?encodeURIComponent(r):r).replaceAll(wJe,"%27");e[t]=s}}function MJe(t,e=!1){const i={...t};return Object.keys(i).forEach((r=>CJe(r,i,e))),i}function kJe(t,e,i){const r=(e=z0e(e))&&e[0]!=="{";return Ja(t,MJe(i,r||!1))}function u3(t,e){return t.replaceAll(bJe,((i,r,n)=>{const s=FH(e,n);return s?`{${s.name}}`:r}))}function PJe(t,e,i){const r=u3(t,i);return r&&r.replaceAll(SJe,((n,s,o)=>kJe(n,s||o,e)))}function AJe(t,e){if(typeof t=="string"&&e&&e.dateFormat==null&&(e.places!=null||e.digitSeparator!=null)){const i=Number(t);if(!isNaN(i))return i}return t}function V0e(t){return t!=null&&typeof t=="object"&&"fieldsIndex"in t&&"geometryType"in t&&"getField"in t&&"load"in t&&"loaded"in t&&"objectIdField"in t&&"spatialReference"in t&&"type"in t&&(t.type==="feature"||t.type==="scene"||t.type==="subtype-group"||t.type==="subtype-sublayer"||t.type==="sublayer")&&"when"in t}function j0e(t){return t!=null&&typeof t=="object"&&"createQuery"in t&&"queryFeatureCount"in t&&"queryObjectIds"in t&&"queryRelatedFeatures"in t&&"queryRelatedFeaturesCount"in t&&"relationships"in t}function L2(t){return V0e(t)&&j0e(t)}function U0e(t){return!(!(t&&typeof t=="object"&&"createQuery"in t&&"getField"in t&&"queryFeatureCount"in t&&"queryFeatures"in t&&"queryObjectIds"in t&&"capabilities"in t&&"fields"in t&&"fieldsIndex"in t&&"type"in t)||t.type!=="feature"&&t.type!=="subtype-group"&&t.type!=="subtype-sublayer"&&t.type!=="sublayer"||!("when"in t))&&(t.type==="subtype-sublayer"&&"parent"in t&&t.parent&&typeof t.parent=="object"?"globalIdField"in t.parent:"globalIdField"in t)}function LJe(t){return!!t&&typeof t=="object"&&"sourceLayer"in t&&L2(t.sourceLayer)}function B0e(t,e){var d;const{fieldInfos:i,fieldName:r,preventPlacesFormatting:n,layer:s,timeZone:o}=e,a=NH(i,r),l=FH(s,r);if(a&&!PU(r)){const f=l==null?void 0:l.type,y=(d=a.format)==null?void 0:d.dateFormat;if(f==="date"||f==="date-only"||f==="time-only"||f==="timestamp-offset"||y)return AH(t,{format:y,fieldType:f,timeZoneOptions:{layerTimeZone:s&&"preferredTimeZone"in s?s.preferredTimeZone:null,viewTimeZone:o,datesInUnknownTimezone:!(!s||!("datesInUnknownTimezone"in s))&&!!s.datesInUnknownTimezone}})}const c=a==null?void 0:a.format;return typeof t=="string"&&PU(r)&&c?RJe(t,c):typeof(t=AJe(t,c))=="string"||t==null||c==null?J$(t):Qr(t,n?{...eM(c),minimumFractionDigits:0,maximumFractionDigits:20}:eM(c))}function RJe(t,e){return t=t.trim(),/\d{2}-\d{2}/.test(t)?t:t.includes(",")?N4(t,",",", ",e):t.includes(";")?N4(t,";","; ",e):t.includes(" ")?N4(t," "," ",e):Qr(Number(t),eM(e))}function N4(t,e,i,r){return t.trim().split(e).map((n=>Qr(Number(n),eM(r)))).join(i)}function NH(t,e){if(t!=null&&t.length&&e)return t.find((i=>{var r;return((r=i.fieldName)==null?void 0:r.toLowerCase())===e.toLowerCase()}))}function OJe({fieldName:t,graphic:e,layer:i}){if(Xh(t)||!i||typeof i.getFeatureType!="function")return null;const{typeIdField:r}=i;if(!r||t!==r)return null;const n=i.getFeatureType(e);return n?n.name:null}function FJe({fieldName:t,value:e,graphic:i,layer:r}){if(Xh(t)||!r||typeof r.getFieldDomain!="function")return null;const n=i&&r.getFieldDomain(t,{feature:i,excludeImpliedDomains:fe("esri-widget-legacy-field-domain-calculation")});return n&&n.type==="coded-value"?n.getName(e):null}function G0e(t,e,i,r){const{creatorField:n,creationDateField:s,editorField:o,editDateField:a}=t;if(!e)return;const l=the(r&&"preferredTimeZone"in r?r.preferredTimeZone:null,!(!r||!("datesInUnknownTimezone"in r))&&!!r.datesInUnknownTimezone,i,Yre,"date"),c={...Yre,...l},d=e[a];if(typeof d=="number"){const y=e[o];return{type:"edit",date:Pl(d,c),user:y}}const f=e[s];if(typeof f=="number"){const y=e[n];return{type:"create",date:Pl(f,c),user:y}}return null}function q0e(t,e){const i=new Map;if(!t)return i;for(const r of t){if(!r.fieldName)continue;const n=u$(r.fieldName,e);r.fieldName=n,i.set(n.toLowerCase(),r)}return i}function w9(t){const e=[];if(!t)return e;const{fieldInfos:i,content:r}=t;return i&&e.push(...i),r&&Array.isArray(r)&&r.forEach((n=>{if(n.type==="fields"){const s=n==null?void 0:n.fieldInfos;s&&e.push(...s)}})),e}function QN(t){return t.replaceAll(xJe,(e=>`&#${e.charCodeAt(0)};`))}function J$(t){return typeof t=="string"?t.replaceAll(_Je,'<br class="esri-text-new-line" />'):t}function H0e(t){var f;const{value:e,fieldName:i,fieldInfos:r,fieldInfoMap:n,layer:s,graphic:o,timeZone:a}=t;if(e==null)return"";const l=FJe({fieldName:i,value:e,graphic:o,layer:s});if(l)return l;const c=OJe({fieldName:i,graphic:o,layer:s});if(c)return c;if(n.get(i.toLowerCase()))return B0e(e,{fieldInfos:r||Array.from(n.values()),fieldName:i,layer:s,timeZone:a});const d=(f=s==null?void 0:s.fieldsIndex)==null?void 0:f.get(i);return d&&(O0e(d)||xq(d))?AH(e,{fieldType:d.type,timeZoneOptions:{layerTimeZone:s&&"preferredTimeZone"in s?s.preferredTimeZone:null,viewTimeZone:a,datesInUnknownTimezone:!(!s||!("datesInUnknownTimezone"in s))&&!!s.datesInUnknownTimezone}}):J$(e)}function lR({fieldInfos:t,attributes:e,layer:i,graphic:r,fieldInfoMap:n,relatedInfos:s,timeZone:o}){const a={};return s==null||s.forEach((l=>zJe({attributes:a,relatedInfo:l,fieldInfoMap:n,fieldInfos:t,layer:i,timeZone:o}))),e&&Object.keys(e).forEach((l=>{const c=e[l];a[l]=H0e({fieldName:l,fieldInfos:t,fieldInfoMap:n,layer:i,value:c,graphic:r,timeZone:o})})),a}async function DH(t,e){var d,f;const{layer:i,graphic:r,outFields:n,objectIds:s,returnGeometry:o,spatialReference:a}=t,l=s[0];if(typeof l!="number"&&typeof l!="string"){const y="Could not query required fields for the specified feature. The feature's ID is invalid.",g={layer:i,graphic:r,objectId:l,requiredFields:n};return b9().warn(y,g),null}if(!((f=(d=cpe(i))==null?void 0:d.operations)!=null&&f.supportsQuery)){const y="The specified layer cannot be queried. The following fields will not be available.",g={layer:i,graphic:r,requiredFields:n,returnGeometry:o};return b9().warn(y,g),null}const c=i.createQuery();return c.objectIds=s,c.outFields=n!=null&&n.length?n:[i.objectIdField],c.returnGeometry=!!o,c.returnZ=!!o,c.returnM=!!o,c.outSpatialReference=a,(await i.queryFeatures(c,e)).features[0]}async function NJe(t){var r;if(!((r=t.expressionInfos)!=null&&r.length))return!1;const e=await fp(),{arcadeUtils:{hasGeometryFunctions:i}}=e;return i(t)}async function W0e({graphic:t,popupTemplate:e,layer:i,spatialReference:r},n){if(!i||!e||(typeof i.load=="function"&&await i.load(n),!t.attributes))return;const s=i.objectIdField,o=t.attributes[s];if(o==null)return;const a=[o],l=await e.getRequiredFields(i.fieldsIndex),c=ufe(t,l),d=c?[]:l.includes(s)?l:[...l,s],f=e.returnGeometry||await NJe(e);if(c&&!f)return;const y=await DH({layer:i,graphic:t,outFields:d,objectIds:a,returnGeometry:f,spatialReference:r},n);y&&(y.geometry&&(t.geometry=y.geometry),y.attributes&&(t.attributes={...t.attributes,...y.attributes}))}function Xh(t=""){return!!t&&t.includes(N0e)}function DJe(t){return t?`${N0e}${t.layerId}/${t.fieldName}`:""}function Xre({attributes:t,graphic:e,relatedInfo:i,fieldInfos:r,fieldInfoMap:n,layer:s,timeZone:o}){t&&e&&i&&Object.keys(e.attributes).forEach((a=>{const l=DJe({layerId:i.relation.id.toString(),fieldName:a}),c=e.attributes[a];t[l]=H0e({fieldName:l,fieldInfos:r,fieldInfoMap:n,layer:s,value:c,graphic:e,timeZone:o})}))}function zJe({attributes:t,relatedInfo:e,fieldInfoMap:i,fieldInfos:r,layer:n,timeZone:s}){var o,a;t&&e&&((o=e.relatedFeatures)==null||o.forEach((l=>Xre({attributes:t,graphic:l,relatedInfo:e,fieldInfoMap:i,fieldInfos:r,layer:n,timeZone:s}))),(a=e.relatedStatsFeatures)==null||a.forEach((l=>Xre({attributes:t,graphic:l,relatedInfo:e,fieldInfoMap:i,fieldInfos:r,layer:n,timeZone:s}))))}const Kre=t=>{if(!t)return!1;const e=t.toUpperCase();return e.includes("CURRENT_TIMESTAMP")||e.includes("CURRENT_DATE")||e.includes("CURRENT_TIME")},Z0e=({layer:t,method:e,query:i,definitionExpression:r})=>{var o,a;if(!((a=(o=t.capabilities)==null?void 0:o.query)!=null&&a.supportsCacheHint)||e==="attachments")return;const n=i.where!=null?i.where:null,s=i.geometry!=null?i.geometry:null;Kre(r)||Kre(n)||(s==null?void 0:s.type)==="extent"||i.resultType==="tile"||(i.cacheHint=!0)},J0e=({query:t,layer:e,method:i})=>{Z0e({layer:e,method:i,query:t,definitionExpression:`${e.definitionExpression} ${e.serviceDefinitionExpression??""}`})},Y0e=({queryPayload:t,layer:e,method:i})=>{Z0e({layer:e,method:i,query:t,definitionExpression:`${e.definitionExpression} ${e.serviceDefinitionExpression??""}`})};function X0e(t,e,i){var r,n;return t&&e&&i?e.type==="sublayer"?cx({layers:(r=e.layer)==null?void 0:r.allSublayers,map:t,relatedLayer:e,relationship:i})||cx({layers:(n=e.layer)==null?void 0:n.subtables,map:t,relatedLayer:e,relationship:i}):cx({layers:t.allLayers,map:t,relatedLayer:e,relationship:i})||cx({layers:t.allTables,map:t,relatedLayer:e,relationship:i}):null}function K0e(t,e){var i;return t&&"utilityNetworks"in t&&e?(i=t.utilityNetworks)==null?void 0:i.find((r=>r.isUtilityLayer(e))):null}function Qre(t,e){return t==null?void 0:t.allTables.find((i=>{var r;return i.type==="feature"&&i.layerId===e.id&&i.url===((r=e.layer)==null?void 0:r.url)}))}function cx({map:t,relationship:e,relationship:{relatedTableId:i},relatedLayer:r,layers:n}){var s;if(!n)return null;for(const o of n){if(o.type==="map-image"){const l=cx({layers:o.sublayers,map:t,relatedLayer:r,relationship:e})||cx({layers:o.subtables,map:t,relatedLayer:r,relationship:e});if(l)return l;continue}if(!L2(o))continue;if(r.type==="sublayer"){if(o!==r&&o.id===i)return o.isTable?Qre(t,o):o;continue}const a=r.type==="scene"&&r.associatedLayer?r.associatedLayer.url:r.url;if(!a)return null;if(o.type!=="sublayer"){if(o!==r&&o.url===a&&o.layerId===i)return o}else if(o!==r&&((s=o.layer)==null?void 0:s.url)===a&&o.id===i)return o.isTable?Qre(t,o):o}return null}const VJe=Object.freeze(Object.defineProperty({__proto__:null,applyTextFormattingHTML:J$,createFieldInfoMap:q0e,findRelatedLayer:X0e,findUtilityNetwork:K0e,fixTokens:u3,formatAttributes:lR,formatEditInfo:G0e,formatValueToFieldInfo:B0e,getAllFieldInfos:w9,getFieldInfo:NH,getFieldInfoLabel:OH,getFixedFieldName:u$,getFixedFieldNames:D0e,getSourceLayer:LH,graphicCallback:gM,htmlEntities:QN,isAssociatedFeatureSupportedLayer:U0e,isExpressionField:KN,isFeatureSupportedLayer:V0e,isGraphicForRelatableFeatureSupportedLayer:LJe,isRelatableFeatureSupportedLayer:L2,isRelatableLayer:j0e,isRelatedField:Xh,preLayerQueryCallback:J0e,preRequestCallback:Y0e,querySourceLayer:DH,queryUpdatedFeature:W0e,shouldOpenInNewTab:RH,substituteAttributes:c3,substituteFieldsInLinksAndAttributes:hg},Symbol.toStringTag,{value:"Module"})),ene={editing:!1,operations:{add:!0,update:!0,delete:!0}},Q0e=Ze.ofType(ka);let Hs=class extends tt{constructor(e){super(e),this._getAttachmentsPromise=null,this._attachmentLayer=null,this.capabilities={...ene},this.activeAttachmentInfo=null,this.activeFileInfo=null,this.attachmentInfos=new Q0e,this.fileInfos=new Ze,this.graphic=null,this.mode="view",this.orderByFields=null,this.filesEnabled=!1,this.addHandles($e((()=>this.graphic),(()=>this._graphicChanged()),kt))}destroy(){this._attachmentLayer=null,this.graphic=null}castCapabilities(e){return{...ene,...e}}get state(){return this._getAttachmentsPromise?"loading":this.graphic?"ready":"disabled"}get supportsResizeAttachments(){const{graphic:e}=this;if(!e)return!1;const i=e.layer||e.sourceLayer;return(i==null?void 0:i.loaded)&&"capabilities"in i&&i.capabilities&&"attachment"in i.capabilities&&i.capabilities.attachment&&"supportsResize"in i.capabilities.attachment&&i.capabilities.attachment.supportsResize||!1}async getAttachments(){const{_attachmentLayer:e,attachmentInfos:i,orderByFields:r}=this;if(!e||typeof e.queryAttachments!="function")throw new ie("invalid-layer","getAttachments(): A valid layer is required.");const n=this._getObjectId();if(typeof n!="number")throw new ie("invalid-object-id","getAttachments(): Numeric object id is required");const s=r==null?void 0:r.map((d=>`${d.field} ${d.order==="descending"?"DESC":"ASC"}`)),o=new Vn({objectIds:[n],returnMetadata:!0,orderByFields:s}),a=[],l=e.queryAttachments(o).then((d=>d[n]||a)).catch((()=>a));this._getAttachmentsPromise=l,this.notifyChange("state");const c=await l;return i.destroyAll(),c.length&&i.addMany(c),this._getAttachmentsPromise=null,this.notifyChange("state"),c}async addAttachment(e,i=this.graphic){var l;const{_attachmentLayer:r,attachmentInfos:n,capabilities:s}=this;if(!i)throw new ie("invalid-graphic","addAttachment(): A valid graphic is required.",{graphic:i});if(!e)throw new ie("invalid-attachment","addAttachment(): An attachment is required.",{attachment:e});if(!((l=s.operations)!=null&&l.add))throw new ie("invalid-capabilities","addAttachment(): add capabilities are required.");if(!r||typeof r.addAttachment!="function")throw new ie("invalid-layer","addAttachment(): A valid layer is required.");const o=r.addAttachment(i,e).then((c=>this._queryAttachment(c.objectId,i))),a=await o;return n.add(a),a}async deleteAttachment(e){var l;const{_attachmentLayer:i,attachmentInfos:r,graphic:n,capabilities:s}=this;if(!e)throw new ie("invalid-attachment-info","deleteAttachment(): An attachmentInfo is required.",{attachmentInfo:e});if(!((l=s.operations)!=null&&l.delete))throw new ie("invalid-capabilities","deleteAttachment(): delete capabilities are required.");if(!i||typeof i.deleteAttachments!="function")throw new ie("invalid-layer","deleteAttachment(): A valid layer is required.");if(!n)throw new ie("invalid-graphic","deleteAttachment(): A graphic is required.");const o=i.deleteAttachments(n,[e.id]).then((()=>e)),a=await o;return r.remove(a),a.destroy(),a}async updateAttachment(e,i=this.activeAttachmentInfo){var d;const{_attachmentLayer:r,attachmentInfos:n,graphic:s,capabilities:o}=this;if(!e)throw new ie("invalid-attachment","updateAttachment(): An attachment is required.",{attachment:e});if(!i)throw new ie("invalid-attachment-info","updateAttachment(): An attachmentInfo is required.",{attachmentInfo:i});if(!((d=o.operations)!=null&&d.update))throw new ie("invalid-capabilities","updateAttachment(): Update capabilities are required.");const a=n.indexOf(i);if(!r||typeof r.updateAttachment!="function")throw new ie("invalid-layer","updateAttachment(): A valid layer is required.");if(!s)throw new ie("invalid-graphic","updateAttachment(): A graphic is required.");const l=r.updateAttachment(s,i.id,e).then((f=>this._queryAttachment(f.objectId))),c=await l;return n.splice(a,1,c),c}async commitFiles(){return await Promise.all(this.fileInfos.items.map((e=>this.addAttachment(e.form)))),this.fileInfos.removeAll(),this.getAttachments()}addFile(e,i){if(!e||!i)return null;const r={file:e,form:i};return this.fileInfos.add(r),r}updateFile(e,i,r=this.activeFileInfo){if(!e||!i||!r)return null;const n=this.fileInfos.indexOf(r);return n>-1&&this.fileInfos.splice(n,1,{file:e,form:i}),this.fileInfos.items[n]}deleteFile(e){const i=this.fileInfos.find((r=>r.file===e));return i?(this.fileInfos.remove(i),i):null}async _queryAttachment(e,i){const{_attachmentLayer:r}=this;if(!e||!(r!=null&&r.queryAttachments))throw new ie("invalid-attachment-id","Could not query attachment.");const n=this._getObjectId(i);if(typeof n!="number")throw new ie("invalid-object-id","getAttachments(): Numeric object id is required");const s=new Vn({objectIds:[n],attachmentsWhere:`AttachmentId=${e}`,returnMetadata:!0});return r.queryAttachments(s).then((o=>o[n][0]))}_getObjectId(e=this.graphic){return(e==null?void 0:e.getObjectId())??null}_graphicChanged(){this.graphic&&(this._setAttachmentLayer(),this.getAttachments().catch((()=>this.attachmentInfos.destroyAll())))}_setAttachmentLayer(){const{graphic:e}=this,i=LH(e);this._attachmentLayer=i?i.type==="scene"&&i.associatedLayer!=null?i.associatedLayer:i:null}};u([h()],Hs.prototype,"capabilities",void 0),u([yi("capabilities")],Hs.prototype,"castCapabilities",null),u([h()],Hs.prototype,"activeAttachmentInfo",void 0),u([h()],Hs.prototype,"activeFileInfo",void 0),u([h({readOnly:!0,type:Q0e})],Hs.prototype,"attachmentInfos",void 0),u([h()],Hs.prototype,"fileInfos",void 0),u([h({type:qi})],Hs.prototype,"graphic",void 0),u([h()],Hs.prototype,"mode",void 0),u([h({type:[dfe]})],Hs.prototype,"orderByFields",void 0),u([h({readOnly:!0})],Hs.prototype,"state",null),u([h()],Hs.prototype,"filesEnabled",void 0),u([h({readOnly:!0})],Hs.prototype,"supportsResizeAttachments",null),Hs=u([V("esri.widgets.Attachments.AttachmentsViewModel")],Hs);function tne(t){const e=t.toLowerCase();return e==="image/bmp"||e==="image/emf"||e==="image/exif"||e==="image/gif"||e==="image/x-icon"||e==="image/jpeg"||e==="image/png"||e==="image/tiff"||e==="image/x-wmf"}function jJe(t){const e=Ir("esri/themes/base/images/files/");return t?t==="text/plain"?`${e}text-32.svg`:t==="application/pdf"?`${e}pdf-32.svg`:t==="text/csv"?`${e}csv-32.svg`:t==="application/gpx+xml"?`${e}gpx-32.svg`:t==="application/x-dwf"?`${e}cad-32.svg`:t==="application/postscript"||t==="application/json"||t==="text/xml"||t==="model/vrml"?`${e}code-32.svg`:t==="application/x-zip-compressed"||t==="application/x-7z-compressed"||t==="application/x-gzip"||t==="application/x-tar"||t==="application/x-gtar"||t==="application/x-bzip2"||t==="application/gzip"||t==="application/x-compress"||t==="application/x-apple-diskimage"||t==="application/x-rar-compressed"||t==="application/zip"?`${e}zip-32.svg`:t.includes("image/")?`${e}image-32.svg`:t.includes("audio/")?`${e}sound-32.svg`:t.includes("video/")?`${e}video-32.svg`:t.includes("msexcel")||t.includes("ms-excel")||t.includes("spreadsheetml")?`${e}excel-32.svg`:t.includes("msword")||t.includes("ms-word")||t.includes("wordprocessingml")?`${e}word-32.svg`:t.includes("powerpoint")||t.includes("presentationml")?`${e}report-32.svg`:`${e}generic-32.svg`:`${e}generic-32.svg`}const Vf={left:"esri-icon-left",plus:"esri-icon-plus",right:"esri-icon-right",table:"esri-icon-table",trash:"esri-icon-trash",zoomInMagnifyingGlass:"esri-icon-zoom-in-magnifying-glass"},ine={addButton:!0,addSubmitButton:!0,cancelAddButton:!0,cancelUpdateButton:!0,deleteButton:!0,errorMessage:!0,progressBar:!0,updateButton:!0},Ni="esri-attachments",Jt={base:Ni,loaderContainer:`${Ni}__loader-container`,loader:`${Ni}__loader`,container:`${Ni}__container`,containerList:`${Ni}__container--list`,containerPreview:`${Ni}__container--preview`,actions:`${Ni}__actions`,deleteButton:`${Ni}__delete-button`,addAttachmentButton:`${Ni}__add-attachment-button`,errorMessage:`${Ni}__error-message`,items:`${Ni}__items`,item:`${Ni}__item`,itemButton:`${Ni}__item-button`,itemMask:`${Ni}__item-mask`,itemMaskIcon:`${Ni}__item-mask--icon`,itemImage:`${Ni}__image`,itemImageResizable:`${Ni}__image--resizable`,itemLabel:`${Ni}__label`,itemFilename:`${Ni}__filename`,itemChevronIcon:`${Ni}__item-chevron-icon`,itemLink:`${Ni}__item-link`,itemLinkOverlay:`${Ni}__item-link-overlay`,itemLinkOverlayIcon:`${Ni}__item-link-overlay-icon`,itemAddIcon:`${Ni}__item-add-icon`,formNode:`${Ni}__form-node`,fileFieldset:`${Ni}__file-fieldset`,fileLabel:`${Ni}__file-label`,fileName:`${Ni}__file-name`,fileInput:`${Ni}__file-input`,metadata:`${Ni}__metadata`,metadataFieldset:`${Ni}__metadata-fieldset`,progressBar:`${Ni}__progress-bar`},D4=window.CSS;let Bs=class extends Zi{constructor(e,i){super(e,i),this.displayType="auto",this.messages=null,this.messagesUnits=null,this.selectedFile=null,this.submitting=!1,this.viewModel=null,this.visibleElements={...ine},this._supportsImageOrientation=D4&&D4.supports&&D4.supports("image-orientation","from-image"),this._addAttachmentForm=null,this._updateAttachmentForm=null}normalizeCtorArgs(e){return e!=null&&e.viewModel||(e={viewModel:new Hs,...e}),e}initialize(){this.addHandles([eo((()=>{var e;return(e=this.viewModel)==null?void 0:e.attachmentInfos}),"change",(()=>this.scheduleRender())),eo((()=>{var e;return(e=this.viewModel)==null?void 0:e.fileInfos}),"change",(()=>this.scheduleRender())),$e((()=>{var e;return(e=this.viewModel)==null?void 0:e.mode}),(()=>this._modeChanged()),kt)])}loadDependencies(){return zl({icon:()=>ye(()=>Promise.resolve().then(()=>X$),void 0)})}get capabilities(){return this.viewModel.capabilities}set capabilities(e){this.viewModel.capabilities=e}get effectiveDisplayType(){const{displayType:e}=this;return e&&e!=="auto"?e:this.viewModel.supportsResizeAttachments?"preview":"list"}get graphic(){return this.viewModel.graphic}set graphic(e){this.viewModel.graphic=e}get icon(){return"attachment"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}castVisibleElements(e){return{...ine,...e}}addAttachment(){const{_addAttachmentForm:e,viewModel:i}=this;return this._set("submitting",!0),this._set("error",null),i.addAttachment(e).then((r=>(this._set("submitting",!1),this._set("error",null),i.mode="view",r))).catch((r=>{throw this._set("submitting",!1),this._set("error",new ie("attachments:add-attachment",this.messages.addErrorMessage,r)),r}))}deleteAttachment(e){const{viewModel:i}=this;return this._set("submitting",!0),this._set("error",null),i.deleteAttachment(e).then((r=>(this._set("submitting",!1),this._set("error",null),i.mode="view",r))).catch((r=>{throw this._set("submitting",!1),this._set("error",new ie("attachments:delete-attachment",this.messages.deleteErrorMessage,r)),r}))}updateAttachment(){const{viewModel:e}=this,{_updateAttachmentForm:i}=this;return this._set("submitting",!0),this._set("error",null),e.updateAttachment(i).then((r=>(this._set("submitting",!1),this._set("error",null),e.mode="view",r))).catch((r=>{throw this._set("submitting",!1),this._set("error",new ie("attachments:update-attachment",this.messages.updateErrorMessage,r)),r}))}addFile(){const e=this.viewModel.addFile(this.selectedFile,this._addAttachmentForm);return this.viewModel.mode="view",e}updateFile(){const{viewModel:e}=this,i=e.updateFile(this.selectedFile,this._updateAttachmentForm,e.activeFileInfo);return e.mode="view",i}deleteFile(e){var r;const i=this.viewModel.deleteFile(e||((r=this.viewModel.activeFileInfo)==null?void 0:r.file));return this.viewModel.mode="view",i}render(){const{submitting:e,viewModel:i}=this,{state:r}=i;return G("div",{class:this.classes(Jt.base,Vt.widget)},e?this._renderProgressBar():null,r==="loading"?this._renderLoading():this._renderAttachments(),this._renderErrorMessage())}_renderErrorMessage(){const{error:e,visibleElements:i}=this;return e&&i.errorMessage?G("div",{class:Jt.errorMessage,key:"error-message"},e.message):null}_renderAttachments(){const{activeFileInfo:e,mode:i,activeAttachmentInfo:r}=this.viewModel;return i==="add"?this._renderAddForm():i==="edit"?this._renderDetailsForm(r||e):this._renderAttachmentContainer()}_renderLoading(){return G("div",{class:Jt.loaderContainer,key:"loader"},G("div",{class:Jt.loader}))}_renderProgressBar(){return this.visibleElements.progressBar?G("div",{class:Jt.progressBar,key:"progress-bar"}):null}_renderAddForm(){const{submitting:e,selectedFile:i}=this,r=e||!i,n=this.visibleElements.cancelAddButton?G("button",{bind:this,class:this.classes(Vt.button,Vt.buttonTertiary,Vt.buttonSmall,Vt.buttonHalf,e&&Vt.buttonDisabled),disabled:e,onclick:this._cancelForm,type:"button"},this.messages.cancel):null,s=this.visibleElements.addSubmitButton?G("button",{class:this.classes(Vt.button,Vt.buttonSecondary,Vt.buttonSmall,Vt.buttonHalf,{[Vt.buttonDisabled]:r}),disabled:r,type:"submit"},this.messages.add):null,o=i?G("span",{class:Jt.fileName,key:"file-name"},i.name):null,a=G("form",{afterCreate:Gee,afterRemoved:Bee,bind:this,"data-node-ref":"_addAttachmentForm",onsubmit:this._submitAddAttachment},G("fieldset",{class:Jt.fileFieldset},o,G("label",{class:this.classes(Jt.fileLabel,Vt.button,Vt.buttonSecondary)},i?this.messages.changeFile:this.messages.selectFile,G("input",{bind:this,class:Jt.fileInput,name:"attachment",onchange:this._handleFileInputChange,type:"file"}))),s,n);return G("div",{class:Jt.formNode,key:"add-form-container"},a)}_renderDetailsForm(e){var O,D,B;const{visibleElements:i,viewModel:r,selectedFile:n,submitting:s}=this,{capabilities:o}=r,a=s||!n;let l,c,d,f;n?(l=n.type,c=n.name,d=n.size):e&&"file"in e?(l=e.file.type,c=e.file.name,d=e.file.size):e&&"contentType"in e&&(l=e.contentType,c=e.name,d=e.size,f=e.url);const y=o.editing&&((O=o.operations)!=null&&O.delete)&&i.deleteButton?G("button",{bind:this,class:this.classes(Vt.button,Vt.buttonSmall,Vt.buttonTertiary,Jt.deleteButton,{[Vt.buttonDisabled]:s}),disabled:s,key:"delete-button",onclick:j=>this._submitDeleteAttachment(j,e),type:"button"},this.messages.delete):void 0,g=o.editing&&((D=o.operations)!=null&&D.update)&&i.updateButton?G("button",{class:this.classes(Vt.button,Vt.buttonSmall,Vt.buttonThird,{[Vt.buttonDisabled]:a}),disabled:a,key:"update-button",type:"submit"},this.messages.update):void 0,b=this.visibleElements.cancelUpdateButton?G("button",{bind:this,class:this.classes(Vt.button,Vt.buttonSmall,Vt.buttonTertiary,Vt.buttonThird,{[Vt.buttonDisabled]:s}),disabled:s,key:"cancel-button",onclick:this._cancelForm,type:"button"},this.messages.cancel):void 0,_=o.editing&&((B=o.operations)!=null&&B.update)?G("fieldset",{class:Jt.fileFieldset,key:"file"},G("span",{class:Jt.fileName,key:"file-name"},c),G("label",{class:this.classes(Jt.fileLabel,Vt.button,Vt.buttonSecondary)},this.messages.changeFile,G("input",{bind:this,class:Jt.fileInput,name:"attachment",onchange:this._handleFileInputChange,type:"file"}))):void 0,x=G("fieldset",{class:Jt.metadataFieldset,key:"size"},G("label",null,dJe(this.messagesUnits,d??0))),E=G("fieldset",{class:Jt.metadataFieldset,key:"content-type"},G("label",null,l)),C=f!=null?G("a",{class:Jt.itemLink,href:f,rel:"noreferrer",target:"_blank"},this._renderImageMask(e,400),G("div",{class:Jt.itemLinkOverlay},G("span",{class:Jt.itemLinkOverlayIcon},G("calcite-icon",{icon:"launch"})))):this._renderImageMask(e,400),k=G("form",{afterCreate:Gee,afterRemoved:Bee,bind:this,"data-node-ref":"_updateAttachmentForm",onsubmit:j=>this._submitUpdateAttachment(j,e)},G("div",{class:Jt.metadata},x,E),_,G("div",{class:Jt.actions},y,b,g));return G("div",{class:Jt.formNode,key:"edit-form-container"},C,k)}_renderImageMask(e,i){return e?"file"in e?this._renderGenericImageMask(e.file.name,e.file.type):this._renderImageMaskForAttachment(e,i):null}_renderGenericImageMask(e,i){const{supportsResizeAttachments:r}=this.viewModel,n=jJe(i),s={[Jt.itemImageResizable]:r};return G("div",{class:this.classes(Jt.itemMaskIcon,Jt.itemMask),key:n},G("img",{alt:e,class:this.classes(s,Jt.itemImage),src:n,title:e}))}_renderImageMaskForAttachment(e,i){const{supportsResizeAttachments:r}=this.viewModel;if(!e)return null;const{contentType:n,name:s,size:o,url:a}=e;if(!r||!tne(n))return this._renderGenericImageMask(s,n);const l=this._getCSSTransform(e),c=l?{transform:l,"image-orientation":"none"}:{},d=`${a}${a!=null&&a.includes("?")?"&":"?"}w=${i}&s=${o}`,f={[Jt.itemImageResizable]:r};return G("div",{class:this.classes(Jt.itemMask),key:d},G("img",{alt:s,class:this.classes(f,Jt.itemImage),src:d,styles:c,title:s}))}_renderFile(e){const{file:i}=e;return G("li",{class:Jt.item,key:i},G("button",{"aria-label":this.messages.attachmentDetails,bind:this,class:Jt.itemButton,key:"details-button",onclick:()=>this._startEditFile(e),title:this.messages.attachmentDetails,type:"button"},this._renderImageMask(e),G("label",{class:Jt.itemLabel},G("span",{class:Jt.itemFilename},i.name||this.messages.noTitle),G("span",{"aria-hidden":"true",class:this.classes(Jt.itemChevronIcon,Al(this.container)?Vf.left:Vf.right)}))))}_renderAttachmentInfo({attachmentInfo:e,displayType:i}){const{viewModel:r,effectiveDisplayType:n}=this,{capabilities:s,supportsResizeAttachments:o}=r,{contentType:a,name:l,url:c}=e,d=this._renderImageMask(e,i==="list"?48:400),f=s.editing?G("span",{"aria-hidden":"true",class:this.classes(Jt.itemChevronIcon,Al(this.container)?Vf.left:Vf.right)}):null,y=[d,n==="preview"&&o&&tne(a)?null:G("label",{class:Jt.itemLabel},G("span",{class:Jt.itemFilename},l||this.messages.noTitle),f)],g=s.editing?G("button",{"aria-label":this.messages.attachmentDetails,bind:this,class:Jt.itemButton,"data-attachment-info-id":e.id,key:"details-button",onclick:()=>this._startEditAttachment(e),title:this.messages.attachmentDetails,type:"button"},y):G("a",{class:Jt.itemButton,href:c??void 0,key:"details-link",rel:"noreferrer",target:"_blank"},y);return G("li",{class:Jt.item,key:e},g)}_renderAttachmentContainer(){var b;const{effectiveDisplayType:e,viewModel:i,visibleElements:r}=this,{attachmentInfos:n,capabilities:s,fileInfos:o}=i,a=!!(n!=null&&n.length),l=!!(o!=null&&o.length),c={[Jt.containerList]:e!=="preview",[Jt.containerPreview]:e==="preview"},d=s.editing&&((b=s.operations)!=null&&b.add)&&r.addButton?G("button",{bind:this,class:this.classes(Vt.button,Vt.buttonTertiary,Jt.addAttachmentButton),onclick:()=>this._startAddAttachment(),type:"button"},G("span",{"aria-hidden":"true",class:this.classes(Jt.itemAddIcon,Vf.plus)}),this.messages.add):void 0,f=a?G("ul",{class:Jt.items,key:"attachments-list"},n.toArray().map((_=>this._renderAttachmentInfo({attachmentInfo:_,displayType:e})))):void 0,y=l?G("ul",{class:Jt.items,key:"file-list"},o.toArray().map((_=>this._renderFile(_)))):void 0,g=l||a?void 0:G("div",{class:Vt.empty},this.messages.noAttachments);return G("div",{class:this.classes(Jt.container,c),key:"attachments-container"},f,y,g,d)}_modeChanged(){this._set("error",null),this._set("selectedFile",null)}_handleFileInputChange(e){var n;const i=e.target,r=(n=i.files)==null?void 0:n.item(0);this._set("selectedFile",r)}_submitDeleteAttachment(e,i){e.preventDefault(),i&&("file"in i?this.deleteFile(i.file):i&&this.deleteAttachment(i))}_submitAddAttachment(e){e.preventDefault(),this.viewModel.filesEnabled?this.addFile():this.addAttachment()}_submitUpdateAttachment(e,i){e.preventDefault(),i&&"file"in i?this.updateFile():this.updateAttachment()}_startEditAttachment(e){const{viewModel:i}=this;i.activeFileInfo=null,i.activeAttachmentInfo=e,i.mode="edit"}_startEditFile(e){const{viewModel:i}=this;i.activeAttachmentInfo=null,i.activeFileInfo=e,i.mode="edit"}_startAddAttachment(){this.viewModel.mode="add"}_cancelForm(e){e.preventDefault(),this.viewModel.mode="view"}_getCSSTransform(e){const{orientationInfo:i}=e;return!this._supportsImageOrientation&&i?[i.rotation?`rotate(${i.rotation}deg)`:"",i.mirrored?"scaleX(-1)":""].join(" "):""}};u([h()],Bs.prototype,"capabilities",null),u([h()],Bs.prototype,"displayType",void 0),u([h({readOnly:!0})],Bs.prototype,"effectiveDisplayType",null),u([h()],Bs.prototype,"graphic",null),u([h()],Bs.prototype,"icon",null),u([h()],Bs.prototype,"label",null),u([h(),nn("esri/widgets/Attachments/t9n/Attachments")],Bs.prototype,"messages",void 0),u([h(),nn("esri/core/t9n/Units")],Bs.prototype,"messagesUnits",void 0),u([h({readOnly:!0})],Bs.prototype,"selectedFile",void 0),u([h({readOnly:!0})],Bs.prototype,"submitting",void 0),u([h({readOnly:!0})],Bs.prototype,"error",void 0),u([h({type:Hs})],Bs.prototype,"viewModel",void 0),u([h()],Bs.prototype,"visibleElements",void 0),u([yi("visibleElements")],Bs.prototype,"castVisibleElements",null),Bs=u([V("esri.widgets.Attachments")],Bs);let fb=class extends Hs{constructor(e){super(e),this.description=null,this.title=null}};u([h()],fb.prototype,"description",void 0),u([h()],fb.prototype,"title",void 0),fb=u([V("esri.widgets.Feature.FeatureAttachments.FeatureAttachmentsViewModel")],fb);function zb({level:t,class:e,...i},r){const n=ebe(t);return G(`h${n}`,{...i,"aria-level":String(n),class:rx(Vt.heading,e),role:"heading"},r)}function ebe(t){return to(Math.ceil(t),1,6)}function UJe(t,e=1){return ebe(t+e)}const z4="esri-feature-element-info",V4={base:z4,title:`${z4}__title`,description:`${z4}__description`};let gh=class extends Zi{constructor(e,i){super(e,i),this.description=null,this.headingLevel=2,this.title=null}render(){return G("div",{class:V4.base},this._renderTitle(),this._renderDescription())}_renderTitle(){const{title:e}=this;return e?G(zb,{class:V4.title,innerHTML:e,level:this.headingLevel}):null}_renderDescription(){const{description:e}=this;return e?G("div",{class:V4.description,innerHTML:e,key:"description"}):null}};u([h()],gh.prototype,"description",void 0),u([h()],gh.prototype,"headingLevel",void 0),u([h()],gh.prototype,"title",void 0),gh=u([V("esri.widgets.Feature.support.FeatureElementInfo")],gh);const BJe={base:"esri-feature-attachments"};let Jd=class extends Zi{constructor(e,i){super(e,i),this._featureElementInfo=null,this.attachmentsWidget=new Bs,this.headingLevel=2,this.viewModel=new fb}initialize(){this._featureElementInfo=new gh,this.addHandles([$e((()=>{var e,i;return[(e=this.viewModel)==null?void 0:e.description,(i=this.viewModel)==null?void 0:i.title,this.headingLevel]}),(()=>this._setupFeatureElementInfo()),kt),$e((()=>this.viewModel),(e=>this.attachmentsWidget.viewModel=e),kt)])}destroy(){var e;this.attachmentsWidget.viewModel=null,this.attachmentsWidget.destroy(),(e=this._featureElementInfo)==null||e.destroy()}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get displayType(){return this.attachmentsWidget.displayType}set displayType(e){this.attachmentsWidget.displayType=e}get graphic(){return this.viewModel.graphic}set graphic(e){this.viewModel.graphic=e}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}render(){var i;const{attachmentsWidget:e}=this;return G("div",{class:BJe.base},(i=this._featureElementInfo)==null?void 0:i.render(),e==null?void 0:e.render())}_setupFeatureElementInfo(){var n;const{description:e,title:i,headingLevel:r}=this;(n=this._featureElementInfo)==null||n.set({description:e,title:i,headingLevel:r})}};u([h({readOnly:!0})],Jd.prototype,"attachmentsWidget",void 0),u([h()],Jd.prototype,"description",null),u([h()],Jd.prototype,"displayType",null),u([h()],Jd.prototype,"graphic",null),u([h()],Jd.prototype,"headingLevel",void 0),u([h()],Jd.prototype,"title",null),u([h({type:fb})],Jd.prototype,"viewModel",void 0),Jd=u([V("esri.widgets.Feature.FeatureAttachments")],Jd);let Nu=class extends tt{constructor(e){super(e),this._loadingPromise=null,this.created=null,this.creator=null,this.destroyer=null,this.graphic=null,this.addHandles($e((()=>this.creator),(i=>{this._destroyContent(),this._createContent(i)}),kt))}destroy(){this._destroyContent()}get state(){return this._loadingPromise?"loading":"ready"}_destroyContent(){const{created:e,graphic:i,destroyer:r}=this;e&&i&&(gM({type:"content",value:r,event:{graphic:i}}),this._set("created",null))}async _createContent(e){const i=this.graphic;if(!i||!e)return;const r=gM({type:"content",value:e,event:{graphic:i}});this._loadingPromise=r,this.notifyChange("state");const n=await r;r===this._loadingPromise&&(this._loadingPromise=null,this.notifyChange("state"),this._set("created",n))}};u([h({readOnly:!0})],Nu.prototype,"created",void 0),u([h()],Nu.prototype,"creator",void 0),u([h()],Nu.prototype,"destroyer",void 0),u([h({type:qi})],Nu.prototype,"graphic",void 0),u([h({readOnly:!0})],Nu.prototype,"state",null),Nu=u([V("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],Nu);function tbe(t){return e=>{e.hasOwnProperty("_delegatedEventNames")||(e._delegatedEventNames=e._delegatedEventNames?e._delegatedEventNames.slice():[]);const i=e._delegatedEventNames,r=Array.isArray(t)?t:GJe(t);i.push(...r)}}function GJe(t){return t.split(",").map((e=>e.trim()))}function ibe(t){return t&&typeof t.render=="function"}function qJe(t){return t&&typeof t.postMixInProperties=="function"&&typeof t.buildRendering=="function"&&typeof t.postCreate=="function"&&typeof t.startup=="function"}const j4="esri-feature-content",U4={base:j4,loaderContainer:`${j4}__loader-container`,loader:`${j4}__loader`};let jf=class extends Zi{constructor(e,i){super(e,i),this.viewModel=null,this._addTargetToAnchors=r=>{Array.from(r.querySelectorAll("a")).forEach((n=>{RH(n.href)&&!n.hasAttribute("target")&&n.setAttribute("target","_blank")}))}}get creator(){var e;return(e=this.viewModel)==null?void 0:e.creator}set creator(e){this.viewModel&&(this.viewModel.creator=e)}get graphic(){var e;return(e=this.viewModel)==null?void 0:e.graphic}set graphic(e){this.viewModel&&(this.viewModel.graphic=e)}render(){var i;const e=(i=this.viewModel)==null?void 0:i.state;return G("div",{class:U4.base},e==="loading"?this._renderLoading():this._renderCreated())}_renderLoading(){return G("div",{class:U4.loaderContainer,key:"loader"},G("div",{class:U4.loader}))}_renderCreated(){var i;const e=(i=this.viewModel)==null?void 0:i.created;return e?e instanceof HTMLElement?G("div",{afterCreate:this._attachToNode,bind:e,key:e}):ibe(e)?G("div",{key:e},!e.destroyed&&e.render()):G("div",{afterCreate:this._addTargetToAnchors,innerHTML:e,key:e}):null}_attachToNode(e){const i=this;e.appendChild(i)}};u([h()],jf.prototype,"creator",null),u([h()],jf.prototype,"graphic",null),u([h({type:Nu})],jf.prototype,"viewModel",void 0),jf=u([V("esri.widgets.Feature.FeatureContent")],jf);let bc=class extends tt{constructor(e){super(e),this.attributes=null,this.expressionInfos=null,this.description=null,this.fieldInfos=null,this.title=null}get formattedFieldInfos(){const{expressionInfos:e,fieldInfos:i}=this,r=[];return i==null||i.forEach((n=>{if(!(!n.hasOwnProperty("visible")||n.visible))return;const s=n.clone();s.label=OH(s,e),r.push(s)})),r}};u([h()],bc.prototype,"attributes",void 0),u([h({type:[Ht]})],bc.prototype,"expressionInfos",void 0),u([h()],bc.prototype,"description",void 0),u([h({type:[Ps]})],bc.prototype,"fieldInfos",void 0),u([h({readOnly:!0})],bc.prototype,"formattedFieldInfos",null),u([h()],bc.prototype,"title",void 0),bc=u([V("esri.widgets.Feature.FeatureFields.FeatureFieldsViewModel")],bc);const HJe=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,target:"_blank",label:"{messages.view}"},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"App Studio Player"},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Collector"},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Explorer"},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Navigator"},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Survey123"},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Trek2There"},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Workforce"},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"iForm"},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"FlowFinity"},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Laserfische"},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Microsoft Power Bi"}];function WJe(t,e){if(typeof e!="string"||!e)return e;const i=HJe.find((l=>l.pattern.test(e)));if(!i)return e;const r=e.match(i.pattern),n=r==null?void 0:r[2],s=Ja(Ja(i.label,{messages:t,hierPart:n}),{appName:i.appName}),o=i.target?` target="${i.target}"`:"",a=i.target==="_blank"?' rel="noreferrer"':"";return oq.sanitizeUrl(Ba(e)).replace(i.pattern,`<a${o} href="$1"${a}>${s}</a>`)}const sA="esri-feature-fields",oA={base:sA,fieldHeader:`${sA}__field-header`,fieldData:`${sA}__field-data`,fieldDataDate:`${sA}__field-data--date`};let pc=class extends Zi{constructor(e,i){super(e,i),this._featureElementInfo=null,this.viewModel=new bc,this.messages=null,this.messagesURIUtils=null}initialize(){this._featureElementInfo=new gh,this.addHandles($e((()=>{var e,i;return[(e=this.viewModel)==null?void 0:e.description,(i=this.viewModel)==null?void 0:i.title]}),(()=>this._setupFeatureElementInfo()),kt))}destroy(){var e;(e=this._featureElementInfo)==null||e.destroy()}get attributes(){return this.viewModel.attributes}set attributes(e){this.viewModel.attributes=e}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get expressionInfos(){return this.viewModel.expressionInfos}set expressionInfos(e){this.viewModel.expressionInfos=e}get fieldInfos(){return this.viewModel.fieldInfos}set fieldInfos(e){this.viewModel.fieldInfos=e}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}render(){var e;return G("div",{class:oA.base},(e=this._featureElementInfo)==null?void 0:e.render(),this._renderFields())}_renderFieldInfo(e,i){var d;const{attributes:r}=this.viewModel,n=e.fieldName||"",s=e.label||n,o=r?r[n]==null?"":r[n]:"",a=!!((d=e.format)!=null&&d.dateFormat),l=typeof o=="number"&&!a?this._forceLTR(o):WJe(this.messagesURIUtils,o),c={[oA.fieldDataDate]:a};return G("tr",{key:`fields-element-info-row-${n}-${i}`},G("th",{class:oA.fieldHeader,innerHTML:s,key:`fields-element-info-row-header-${n}-${i}`}),G("td",{class:this.classes(oA.fieldData,c),innerHTML:l,key:`fields-element-info-row-data-${n}-${i}`}))}_renderFields(){const{formattedFieldInfos:e}=this.viewModel;return e!=null&&e.length?G("table",{class:Vt.table,summary:this.messages.fieldsSummary},G("tbody",null,e.map(((i,r)=>this._renderFieldInfo(i,r))))):null}_setupFeatureElementInfo(){var r;const{description:e,title:i}=this;(r=this._featureElementInfo)==null||r.set({description:e,title:i})}_forceLTR(e){return`&lrm;${e}`}};u([h()],pc.prototype,"attributes",null),u([h()],pc.prototype,"description",null),u([h()],pc.prototype,"expressionInfos",null),u([h()],pc.prototype,"fieldInfos",null),u([h()],pc.prototype,"title",null),u([h({type:bc,nonNullable:!0})],pc.prototype,"viewModel",void 0),u([h(),nn("esri/widgets/Feature/t9n/Feature")],pc.prototype,"messages",void 0),u([h(),nn("esri/widgets/support/t9n/uriUtils")],pc.prototype,"messagesURIUtils",void 0),pc=u([V("esri.widgets.Feature.FeatureFields")],pc);const ZJe=/^-?(\d+)(\.(\d+))?$/i;function JJe(t,e){return t-e}function YJe(t,e){let i,r;return i=Number(t.toFixed(e)),i<t?r=i+1/10**e:(r=i,i-=1/10**e),i=Number(i.toFixed(e)),r=Number(r.toFixed(e)),[i,r]}function XJe(t,e,i,r,n){const s=cR(t,e,i,r),o=s.previous==null||s.previous<=n,a=s.next==null||s.next<=n;return o&&a||s.previous+s.next<=2*n}function d3(t){const e=String(t),i=e.match(ZJe);if(i!=null&&i[1])return{integer:i[1].split("").length,fractional:i[3]?i[3].split("").length:0};if(e.toLowerCase().includes("e")){const r=e.split("e"),n=r[0],s=r[1];if(n&&s){const o=Number(n);let a=Number(s);const l=a>0;l||(a=Math.abs(a));const c=d3(o);return l?(c.integer+=a,a>c.fractional?c.fractional=0:c.fractional-=a):(c.fractional+=a,a>c.integer?c.integer=1:c.integer-=a),c}}return{integer:0,fractional:0}}function cR(t,e,i,r){const n={previous:null,next:null};if(i!=null){const s=t-i,o=e-i-s;n.previous=Math.floor(Math.abs(100*o/s))}if(r!=null){const s=r-t,o=r-e-s;n.next=Math.floor(Math.abs(100*o/s))}return n}function h3(t,e={}){const i=t.slice(),{tolerance:r=2,strictBounds:n=!1,indexes:s=i.map(((o,a)=>a))}=e;s.sort(JJe);for(let o=0;o<s.length;o++){const a=s[o],l=i[a],c=a===0?null:i[a-1],d=a===i.length-1?null:i[a+1],f=d3(l).fractional;if(f){let y,g=0,b=!1;for(;g<=f&&!b;){const _=YJe(l,g);y=n&&o===0?_[1]:_[0],b=XJe(l,y,c,d,r),g++}b&&(i[a]=y)}}return i}const KJe={maximumFractionDigits:20};function QJe(t){return Qr(t,KJe)}function rbe(t,e,i,r){if(t)if(t.type!=="CIMTextSymbol"){if(t.effects)for(const n of t.effects)rne(n,e);if(t.symbolLayers)for(const n of t.symbolLayers){switch(n.type){case"CIMPictureMarker":case"CIMVectorMarker":eYe(n,e,r);break;case"CIMPictureStroke":case"CIMSolidStroke":case"CIMGradientStroke":!(r!=null&&r.preserveOutlineWidth)&&n.width&&(n.width*=e);break;case"CIMPictureFill":n.height&&(n.height*=e),n.offsetX&&(n.offsetX*=e),n.offsetY&&(n.offsetY*=e);break;case"CIMHatchFill":rbe(n.lineSymbol,e,!0,{...r,preserveOutlineWidth:!1}),n.offsetX&&(n.offsetX*=e),n.offsetY&&(n.offsetY*=e),n.separation&&(n.separation*=e)}if(n.effects)for(const s of n.effects)rne(s,e)}}else t.height!=null&&(t.height*=e)}function eYe(t,e,i){if(t&&(t.markerPlacement&&tYe(t.markerPlacement,e),t.offsetX&&(t.offsetX*=e),t.offsetY&&(t.offsetY*=e),t.anchorPoint&&t.anchorPointUnits==="Absolute"&&(t.anchorPoint={x:t.anchorPoint.x*e,y:t.anchorPoint.y*e}),t.size=t.size!=null?t.size*e:0,t.type==="CIMVectorMarker"&&t.markerGraphics))for(const r of t.markerGraphics)t.scaleSymbolsProportionally||rbe(r.symbol,e,!0,i)}function tYe(t,e){switch(UN(t)&&t.offset&&(t.offset*=e),t.type){case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineSameSize":if(t.customEndingOffset&&(t.customEndingOffset*=e),t.offsetAlongLine&&(t.offsetAlongLine*=e),t.placementTemplate&&t.placementTemplate.length){const i=t.placementTemplate.map((r=>r*e));t.placementTemplate=i}break;case"CIMMarkerPlacementAlongLineVariableSize":if(t.maxRandomOffset&&(t.maxRandomOffset*=e),t.placementTemplate&&t.placementTemplate.length){const i=t.placementTemplate.map((r=>r*e));t.placementTemplate=i}break;case"CIMMarkerPlacementOnLine":t.startPointOffset&&(t.startPointOffset*=e);break;case"CIMMarkerPlacementAtExtremities":t.offsetAlongLine&&(t.offsetAlongLine*=e);break;case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementOnVertices":break;case"CIMMarkerPlacementAtRatioPositions":t.beginPosition&&(t.beginPosition*=e),t.endPosition&&(t.endPosition*=e);break;case"CIMMarkerPlacementPolygonCenter":t.offsetX&&(t.offsetX*=e),t.offsetY&&(t.offsetY*=e);break;case"CIMMarkerPlacementInsidePolygon":t.offsetX&&(t.offsetX*=e),t.offsetY&&(t.offsetY*=e),t.stepX&&(t.stepX*=e),t.stepY&&(t.stepY*=e)}}function rne(t,e){switch(t.type){case"CIMGeometricEffectArrow":case"CIMGeometricEffectDonut":t.width&&(t.width*=e);break;case"CIMGeometricEffectBuffer":t.size&&(t.size*=e);break;case"CIMGeometricEffectCut":t.beginCut&&(t.beginCut*=e),t.endCut&&(t.endCut*=e),t.middleCut&&(t.middleCut*=e);break;case"CIMGeometricEffectDashes":if(t.customEndingOffset&&(t.customEndingOffset*=e),t.offsetAlongLine&&(t.offsetAlongLine*=e),t.dashTemplate&&t.dashTemplate.length){const i=t.dashTemplate.map((r=>r*e));t.dashTemplate=i}break;case"CIMGeometricEffectExtension":case"CIMGeometricEffectJog":case"CIMGeometricEffectRadial":t.length&&(t.length*=e);break;case"CIMGeometricEffectMove":t.offsetX&&(t.offsetX*=e),t.offsetY&&(t.offsetY*=e);break;case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":t.offset&&(t.offset*=e);break;case"CIMGeometricEffectRegularPolygon":t.radius&&(t.radius*=e);break;case"CIMGeometricEffectTaperedPolygon":t.fromWidth&&(t.fromWidth*=e),t.length&&(t.length*=e),t.toWidth&&(t.toWidth*=e);break;case"CIMGeometricEffectWave":t.amplitude&&(t.amplitude*=e),t.period&&(t.period*=e)}}function nbe(t){const e=[];return _9(xH(t),e),e.length?new _e(Uve(e[0])):null}function _9(t,e){var n;if(!t)return;let i;i=t.type==="CIMTextSymbol"?t.symbol:t;const r=t.type==="CIMPolygonSymbol";if(i!=null&&i.symbolLayers){for(const s of i.symbolLayers)if(!(s.colorLocked||r&&(Bve(s)||SH(s)&&s.markerPlacement&&UN(s.markerPlacement))))switch(s.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":s.tintColor&&p3(e,s.tintColor);break;case"CIMVectorMarker":(n=s.markerGraphics)==null||n.forEach((o=>{_9(o.symbol,e)}));break;case"CIMSolidStroke":case"CIMSolidFill":p3(e,s.color);break;case"CIMGradientFill":iYe(e,s);break;case"CIMHatchFill":_9(s.lineSymbol,e)}}}function p3(t,e){for(const i of t)if(i.join(".")===e.join("."))return;t.push(e)}function iYe(t,e){var r,n;switch((r=e.colorRamp)==null?void 0:r.type){case"CIMMultipartColorRamp":(n=e.colorRamp.colorRamps)==null||n.forEach((s=>{s.type==="CIMLinearContinuousColorRamp"&&nne(t,s)}));break;case"CIMLinearContinuousColorRamp":case"CIMPolarContinuousColorRamp":nne(t,e.colorRamp)}}function nne(t,e){e&&(e.fromColor&&p3(t,e.fromColor),e.toColor&&p3(t,e.toColor))}function sbe(t,e,i){e instanceof _e||(e=new _e(e));const r=xH(t);r&&x9(r,e)}function x9(t,e,i){var s;if(!t)return;let r;r=t.type==="CIMTextSymbol"?t.symbol:t;const n=(r==null?void 0:r.type)==="CIMPolygonSymbol";if(r!=null&&r.symbolLayers)for(const o of r.symbolLayers){if(o.colorLocked||n&&(Bve(o)||SH(o)&&o.markerPlacement&&UN(o.markerPlacement)))continue;const a=e.toArray();switch(o.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":o.tintColor=a;break;case"CIMVectorMarker":(s=o.markerGraphics)==null||s.forEach((l=>{x9(l.symbol,e)}));break;case"CIMSolidStroke":case"CIMSolidFill":o.color=a;break;case"CIMGradientFill":rYe(o,e);break;case"CIMHatchFill":x9(o.lineSymbol,e)}}}function rYe(t,e){var r,n;switch((r=t.colorRamp)==null?void 0:r.type){case"CIMMultipartColorRamp":(n=t.colorRamp.colorRamps)==null||n.forEach((s=>{s.type==="CIMLinearContinuousColorRamp"&&sne(s,e)}));break;case"CIMLinearContinuousColorRamp":case"CIMPolarContinuousColorRamp":sne(t.colorRamp,e)}}function sne(t,e){if(t&&(t.fromColor&&(t.fromColor=e.toArray()),t.toColor)){const i=e.clone();i.a=0,t.toColor=i.toArray()}}function K_t(t,e,i=!1){const r=xH(t);if(i&&(e=360-e),(r==null?void 0:r.type)!=="CIMTextSymbol"){if((r==null?void 0:r.type)==="CIMPointSymbol"&&r.symbolLayers){const n=e-(r.angle||0);for(const s of r.symbolLayers)if(SH(s)){let o=s.rotation||0;s.rotateClockwise?o-=n:o+=n,s.rotation=o}r.angle=e}}else r.angle=e}const obe="picture-fill",abe="simple-fill",nYe="simple-line",lbe="simple-marker",sYe="text",oYe="cim",one=new Map([["dash",[4,3]],["dashdot",[4,3,1,3]],["dot",[1,3]],["longdash",[8,3]],["longdashdot",[8,3,1,3]],["longdashdotdot",[8,3,1,3,1,3]],["shortdash",[4,1]],["shortdashdot",[4,1,1,1]],["shortdashdotdot",[4,1,1,1,1,1]],["shortdot",[1,1]],["solid",[]]]),B4=new $ve(1e3);function aYe(t){const e=t.style;let i=null;if(t)switch(t.type){case lbe:e!=="cross"&&e!=="x"&&(i=t.color);break;case abe:e&&e!=="solid"?e!=="none"&&(i={type:"pattern",x:0,y:0,src:Ir(`esri/symbols/patterns/${e}.png`),width:5,height:5}):i=t.color;break;case obe:i={type:"pattern",src:t.url,width:pi(t.width)*t.xscale,height:pi(t.height)*t.yscale,x:pi(t.xoffset),y:pi(t.yoffset)};break;case sYe:i=t.color;break;case oYe:i=nbe(t)}return i}function lYe(t,e){const i=t+"-"+e;return B4.get(i)!==void 0?Promise.resolve(B4.get(i)):fi(t,{responseType:"image"}).then((r=>{const n=r.data,s=n.naturalWidth,o=n.naturalHeight,a=document.createElement("canvas");a.width=s,a.height=o;const l=a.getContext("2d");l.fillStyle=e,l.fillRect(0,0,s,o),l.globalCompositeOperation="destination-in",l.drawImage(n,0,0);const c=a.toDataURL();return B4.put(i,c),c}))}function vM(t){if(!t)return null;let e=null;switch(t.type){case abe:case obe:case lbe:e=vM(t.outline);break;case nYe:{const i=pi(t.width);t.style!=null&&t.style!=="none"&&i!==0&&(e={color:t.color,style:zH(t.style),width:i,cap:t.cap,join:t.join==="miter"?pi(t.miterLimit):t.join},e.dashArray=cbe(e).join(",")||"none");break}default:e=null}return e}function cbe(t){if(!(t!=null&&t.style))return[];const{dashArray:e,style:i,width:r}=t;if(typeof e=="string"&&e!=="none")return e.split(",").map((o=>Number(o)));const n=r??0,s=one.has(i)?one.get(i).map((o=>o*n)):[];if(t.cap!=="butt")for(const[o,a]of s.entries())s[o]=o%2==1?a+n:Math.max(a-n,1);return s}const zH=(()=>{const t={};return e=>{if(t[e])return t[e];const i=e.replaceAll("-","");return t[e]=i,i}})(),cYe=new _e([128,128,128]),uYe=new _e("white");function dYe(t){var i,r;const e=(i=t.symbolLayers)==null?void 0:i.at(-1);if(e&&"outline"in e)return(r=e==null?void 0:e.outline)==null?void 0:r.size}function hYe(t){var e;if(!t)return 0;if(vp(t)){const i=dYe(t);return i??0}return ji((e=vM(t))==null?void 0:e.width)}function eD(t){if(t==null||!("symbolLayers"in t)||t.symbolLayers==null)return!1;switch(t.type){case"point-3d":return t.symbolLayers.some((e=>e.type==="object"));case"line-3d":return t.symbolLayers.some((e=>e.type==="path"));case"polygon-3d":return t.symbolLayers.some((e=>e.type==="object"||e.type==="extrude"));default:return!1}}function pYe(t){var e;return((e=t.resource)==null?void 0:e.href)??""}function k_(t,e){if(!t)return null;let i=null;return vp(t)?i=fYe(t):wN(t)&&(i=t.type==="cim"?nbe(t):t.color?new _e(t.color):null),i?bM(i,e):null}function fYe(t){const e=t.symbolLayers;if(!e)return null;let i=null;return e.forEach((r=>{var n;r.type==="object"&&((n=r.resource)!=null&&n.href)||(i=r.type==="water"?r.color:r.material?r.material.color:null)})),i?new _e(i):null}function bM(t,e){if(e==null||t==null)return t;const i=t.toRgba();return i[3]=i[3]*e,new _e(i)}function mYe(t,e,i){const r=t.symbolLayers;if(!r)return;const n=s=>bM(e??s??(i!=null?uYe:null),i);r.forEach((s=>{var o,a;if(s.type!=="object"||!((o=s.resource)!=null&&o.href)||e)if(s.type==="water")s.color=n(s.color);else{const l=s.material!=null?s.material.color:null,c=n(l);if(s.material==null?s.material=new Ga({color:c}):s.material.color=c,i!=null&&"outline"in s&&((a=s.outline)==null?void 0:a.color)!=null&&(s.outline.color=bM(s.outline.color,i)),"marker"in s&&s.marker!=null){const d=n(s.marker.color);s.marker.color=d}}}))}function yYe(t,e,i){var r;(e=e??t.color)&&(t.color=bM(e,i)),i!=null&&"outline"in t&&((r=t.outline)!=null&&r.color)&&(t.outline.color=bM(t.outline.color,i))}function G4(t,e,i){t&&(e||i!=null)&&(e&&(e=new _e(e)),vp(t)?mYe(t,e,i):wN(t)&&yYe(t,e,i))}async function gYe(t,e){const i=t.symbolLayers;i&&await XLe(i,(async r=>vYe(r,e)))}async function vYe(t,e){switch(t.type){case"extrude":wYe(t,e);break;case"icon":case"line":case"text":bYe(t,e);break;case"path":xYe(t,e);break;case"object":await _Ye(t,e)}}function bYe(t,e){const i=ube(e);i!=null&&(t.size=i)}function ube(t){for(const e of t)if(typeof e=="number")return e;return null}function wYe(t,e){const i=e[2];typeof i=="number"&&(t.size=i)}async function _Ye(t,e){const{resourceSize:i,symbolSize:r}=await SYe(t),n=dbe(e,i,r);n!=null&&(t.width=TC(e[0],r[0],i[0],n),t.depth=TC(e[1],r[1],i[1],n),t.height=TC(e[2],r[2],i[2],n))}function xYe(t,e){const i=dbe(e,bhe,[t.width,void 0,t.height]);i!=null&&(t.width=TC(e[0],t.width,1,i),t.height=TC(e[2],t.height,1,i))}function dbe(t,e,i){for(let r=0;r<3;r++){const n=t[r];switch(n){case"symbol-value":{const s=i[r];return s!=null?s/e[r]:1}case"proportional":break;default:if(n&&e[r])return n/e[r]}}return null}async function SYe(t){const{computeObjectLayerResourceSize:e}=await ye(()=>import("./symbolLayerUtils-BXbMGxqv.js"),[]),i=await e(t,10),{width:r,height:n,depth:s}=t,o=[r,s,n];let a=1;for(let l=0;l<3;l++){const c=o[l];if(c!=null){a=c/i[l];break}}for(let l=0;l<3;l++)o[l]==null&&(o[l]=i[l]*a);return{resourceSize:i,symbolSize:o}}function TC(t,e,i,r){switch(t){case"proportional":return i*r;case"symbol-value":return e??i;default:return t}}function $Ye(t,e){const i=ube(e);if(i!=null)switch(t.type){case"simple-marker":t.size=i;break;case"picture-marker":{const r=t.width/t.height;r>1?(t.width=i,t.height=i*r):(t.width=i*r,t.height=i);break}case"simple-line":t.width=i;break;case"text":t.font.size=i}}async function TYe(t,e){if(t&&e)return vp(t)?gYe(t,e):void(wN(t)&&$Ye(t,e))}function EYe(t,e,i){if(t&&e!=null)if(vp(t)){const r=t.symbolLayers;r&&r.forEach((n=>{if(n.type==="object")switch(i){case"tilt":n.tilt=(n.tilt??0)+e;break;case"roll":n.roll=(n.roll??0)+e;break;default:n.heading=(n.heading??0)+e}n.type==="icon"&&(n.angle+=e)}))}else wN(t)&&(t.type!=="simple-marker"&&t.type!=="picture-marker"&&t.type!=="text"||(t.angle+=e))}function R2(t){if(!t)return null;const e=t.effects.filter((i=>i.type!=="bloom")).map((i=>i.toJSON()));return qO(e)}function Q_t(t){return t!=null&&t.type==="polygon-3d"&&t.symbolLayers.some((e=>e.type==="extrude"))}const hbe="<",pbe=">";function fbe(t,e,i,r){let n="";return e===0?n=`${hbe} `:e===i&&(n=`${pbe} `),n+(r?AH(t,r):QJe(t))}const IYe=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwcdIkqhiWn5fHwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6JrzFUAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwaeIkqhiWl5/HwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6sKxboAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwadJEqhiWl5fPwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu75+IUcAAAAASUVORK5CYII="];async function S9(t){if(!("visualVariables"in t)||!t.visualVariables)return null;const e=t.visualVariables.find((o=>o.type==="color"));if(!e)return null;let i=null,r=null;if(e.stops){if(e.stops.length===1)return e.stops[0].color;i=e.stops[0].value,r=e.stops[e.stops.length-1].value}const n=i!=null&&r!=null?i+(r-i)/2:0,{getColor:s}=await ye(async()=>{const{getColor:o}=await Promise.resolve().then(()=>Sw);return{getColor:o}},void 0);return s(e,n)??null}async function mbe(t,e){const i=t.trailCap,r=t.trailWidth||1,n=e||await S9(t)||t.color;return new Xr({cap:i,color:n,width:r})}function CYe(t,e){var i,r;if(!e.field)return null;if("featureReduction"in t)switch((i=t.featureReduction)==null?void 0:i.type){case"cluster":case"binning":{const n=t.featureReduction.fields.find((({name:s})=>s.toLowerCase()===e.field.toLowerCase()));return n&&"getField"in t?t.getField(n.onStatisticField):null}}return"getField"in t?(r=t.getField)==null?void 0:r.call(t,e.field):null}function MYe(t,e){var r,n,s;const i="popupTemplate"in t?(r=t.popupTemplate)==null?void 0:r.fieldInfos:null;if(i!=null&&i.length&&e)return(s=(n=i.find((o=>{var a;return((a=o.fieldName)==null?void 0:a.toLowerCase())===e.toLowerCase()})))==null?void 0:n.format)==null?void 0:s.dateFormat}function kYe(t,e,i){var s,o,a,l;const r=CYe(t,e);if(!r||!O0e(r)&&!xq(r))return null;let n=MYe(t,r.name);if(!n&&r.type==="date"){let c=0,d=0;e.stops?(c=((o=(s=e.stops)==null?void 0:s.at(0))==null?void 0:o.value)??c,d=((l=(a=e.stops)==null?void 0:a.at(-1))==null?void 0:l.value)??d):"minDataValue"in e&&"maxDataValue"in e&&(c=e.minDataValue??c,d=e.maxDataValue??d),n=d-c>2*IU.days?"short-date":"short-date-short-time"}return{fieldType:r.type,format:n,timeZoneOptions:{layerTimeZone:"preferredTimeZone"in t?t.preferredTimeZone:null,viewTimeZone:i,datesInUnknownTimezone:"datesInUnknownTimezone"in t&&t.datesInUnknownTimezone}}}function Kh(t,e){var i,r;if("authoringInfo"in t)return(r=(i=t.authoringInfo)==null?void 0:i.visualVariables)==null?void 0:r.find((({theme:n})=>n===e))}const PYe=new _e([64,64,64]);function ybe(t,e){const i=[],r=t.length-1;return t.length===5?i.push(0,2,4):i.push(0,r),t.map(((n,s)=>i.includes(s)?fbe(n,s,r,e):null))}async function $9(t,e,i){let r=!1,n=[],s=[];if(t.stops){const c=t.stops;n=c.map((d=>d.value)),r=c.some((d=>!!d.label)),r&&(s=c.map((d=>d.label)))}const o=n[0],a=n[n.length-1];if(o==null&&a==null)return null;const l=r?null:ybe(n,i);return(await Promise.all(n.map((async(c,d)=>{const f=t.type==="opacity"?await AYe(c,t,e):(await ye(async()=>{const{getColor:g}=await Promise.resolve().then(()=>Sw);return{getColor:g}},void 0)).getColor(t,c),y=r?s[d]:(l==null?void 0:l[d])??"";return f==null?null:{value:c,color:f,label:y}})))).filter(Kr).reverse()}async function AYe(t,e,i){const r=new _e(i??PYe),n=(await ye(async()=>{const{getOpacity:s}=await Promise.resolve().then(()=>Sw);return{getOpacity:s}},void 0)).getOpacity(e,t);return n!=null&&(r.a=n),r}function LYe(t){let e=!1,i=[],r=[];i=t.map((a=>a.value)),e=t.some((a=>!!a.label)),e&&(r=t.map((a=>a.label??"")));const n=i[0],s=i[i.length-1];if(n==null&&s==null)return null;const o=e?null:ybe(i);return i.map(((a,l)=>({value:a,color:gbe(a,t),label:e?r[l]:(o==null?void 0:o[l])??""}))).reverse()}function gbe(t,e){const{startIndex:i,endIndex:r,weight:n}=RYe(t,e);if(i===r)return e[i].color;const s=_e.blendColors(e[i].color,e[r].color,n);return new _e(s)}function RYe(t,e){let i=0,r=e.length-1;return e.some(((n,s)=>t<n.value?(r=s,!0):(i=s,!1))),{startIndex:i,endIndex:r,weight:(t-e[i].value)/(e[r].value-e[i].value)}}function OYe(t,e){let i=[];if(t&&t.type==="multipart")t.colorRamps.reverse().forEach(((r,n)=>{n===0?i.push({value:e.max,color:new _e(r.toColor),label:"high"}):i.push({value:null,color:new _e(r.toColor),label:""}),n===t.colorRamps.length-1?i.push({value:e.min,color:new _e(r.fromColor),label:"low"}):i.push({value:null,color:new _e(r.fromColor),label:""})}));else{let r,n;t&&t.type==="algorithmic"?(r=t.fromColor,n=t.toColor):(r=[0,0,0,1],n=[255,255,255,1]),i=[{value:e.max,color:new _e(n),label:"high"},{value:e.min,color:new _e(r),label:"low"}]}return i}function vbe(t){if(!t.colorStops)return[];const e=[...t.colorStops].filter((r=>{var n;return((n=r.color)==null?void 0:n.a)>0}));let i=e.length-1;if(e&&e[0]){const r=e[i];r&&r.ratio!==1&&(e.push(new Hf({ratio:1,color:r.color})),i++)}return e.map(((r,n)=>{var o,a;let s="";return n===0?s=((o=t.legendOptions)==null?void 0:o.minLabel)||"low":n===i&&(s=((a=t.legendOptions)==null?void 0:a.maxLabel)||"high"),{color:r.color,label:s,ratio:r.ratio}})).reverse()}async function ll(t,e,i){lm(t,e,(()=>[])).push(...i)}async function FYe(t){var i,r;const e=new Map;if(!t)return e;if("visualVariables"in t&&t.visualVariables){for(const n of t.visualVariables)if(NYe(n)){const s=(await $9(n)??[]).map((o=>o.color));await ll(e,n.field||n.valueExpression,s)}}if(t.type==="heatmap"){const n=vbe(t).map((s=>s.color));await ll(e,t.field||t.valueExpression,n)}else if(t.type==="pie-chart"){for(const n of t.attributes)await ll(e,n.field||n.valueExpression,[n.color]);await ll(e,"default",[(i=t==null?void 0:t.othersCategory)==null?void 0:i.color,k_(t.backgroundFillSymbol,null)])}else if(t.type==="dot-density"){for(const n of t.attributes)await ll(e,n.field||n.valueExpression,[n.color]);await ll(e,"default",[t.backgroundColor])}else if(t.type==="unique-value")if(((r=t.authoringInfo)==null?void 0:r.type)==="predominance")for(const n of t.uniqueValueInfos??[])await ll(e,n.value.toString(),[k_(n.symbol,null)]);else{const n=(t.uniqueValueInfos??[]).map((c=>k_(c.symbol,null))),{field:s,field2:o,field3:a,valueExpression:l}=t;(s||l)&&await ll(e,s||l,n),o&&await ll(e,o,n),a&&await ll(e,a,n)}else if(t.type==="class-breaks"){const n=t.classBreakInfos.map((a=>k_(a.symbol,null))),{field:s,valueExpression:o}=t;await ll(e,s??o,n)}else t.type==="simple"&&await ll(e,"default",[k_(t.symbol,null)]);return"defaultSymbol"in t&&t.defaultSymbol&&await ll(e,"default",[k_(t.defaultSymbol,null)]),e.forEach(((n,s)=>{const o=U7(n.filter(Boolean),((a,l)=>JSON.stringify(a)===JSON.stringify(l)));e.set(s,o)})),e}function NYe(t){return t.type==="color"}function bbe(t){const e={};for(const i in t){if(i==="declaredClass")continue;const r=t[i];if(r!=null&&typeof r!="function")if(Array.isArray(r)){e[i]=[];for(let n=0;n<r.length;n++)e[i][n]=bbe(r[n])}else typeof r=="object"?r.toJSON&&(e[i]=JSON.stringify(r)):e[i]=r}return e}function DYe(t){return 32+t.length}const wbe=16;function zYe(t){if(!t)return 0;let e=UH;for(const i in t)t.hasOwnProperty(i)&&(e+=VH(t[i],!1));return e}function VYe(t){if(!t)return 0;if(typeof t[0]=="number")return jH(t);if(Array.isArray(t))return jYe(t);let e=UH;for(const i in t)t.hasOwnProperty(i)&&(e+=VH(t[i]));return e}function jYe(t){const e=t.length;if(e===0||typeof t[0]=="number")return _be(t,8);let i=xbe;for(let r=0;r<e;r++)i+=VH(t[r]);return i}function VH(t,e=!0){switch(typeof t){case"object":return e?VYe(t):UH;case"string":return DYe(t);case"number":return wbe;case"boolean":return 4;default:return 8}}function jH(...t){return t.reduce(((e,i)=>e+(i?tle(i)?i.byteLength+UYe:Array.isArray(i)?_be(i,wbe):0:0)),0)}function _be(t,e){return xbe+t.length*e}const UH=32,xbe=16,UYe=145;var Vy;(function(t){t[t.varint=0]="varint",t[t.fixed64=1]="fixed64",t[t.delimited=2]="delimited",t[t.fixed32=5]="fixed32",t[t.unknown=99]="unknown"})(Vy||(Vy={}));const ane=4294967296,BYe=new TextDecoder("utf-8"),GYe=fe("safari")||fe("ios")?6:fe("ff")?12:32;var _h;let qYe=(_h=class{constructor(e,i,r=0,n=e?e.byteLength:0){this._tag=0,this._dataType=Vy.unknown,this._init(e,i,r,n)}_init(e,i,r,n){this._data=e,this._dataView=i,this._pos=r,this._end=n}get usedMemory(){return 64+jH(this._data)}asUnsafe(){return this}clone(){return new _h(this._data,this._dataView,this._pos,this._end)}pos(){return this._pos}move(e){this._pos=e}nextTag(e){for(;;){if(this._pos===this._end)return!1;const i=this._decodeVarint();if(this._tag=i>>3,this._dataType=7&i,!e||e===this._tag)break;this.skip()}return!0}next(){if(this._pos===this._end)return!1;const e=this._decodeVarint();return this._tag=e>>3,this._dataType=7&e,!0}empty(){return this._pos>=this._end}tag(){return this._tag}getInt32(){return this._decodeVarint()}getInt64(){return this._decodeVarint()}getUInt32(){let e=4294967295;if(e=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128||(e=(e|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128)||(e=(e|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128)||(e=(e|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128)||(e=(e|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128))return e;throw new Error("Varint overflow")}getUInt64(){return this._decodeVarint()}getSInt32(){const e=this.getUInt32();return e>>>1^-(1&e)}getSInt64(){return this._decodeSVarint()}getBool(){const e=this._data[this._pos]!==0;return this._skip(1),e}getEnum(){return this._decodeVarint()}getFixed64(){const e=this._dataView,i=this._pos,r=e.getUint32(i,!0)+e.getUint32(i+4,!0)*ane;return this._skip(8),r}getSFixed64(){const e=this._dataView,i=this._pos,r=e.getUint32(i,!0)+e.getInt32(i+4,!0)*ane;return this._skip(8),r}getDouble(){const e=this._dataView.getFloat64(this._pos,!0);return this._skip(8),e}getFixed32(){const e=this._dataView.getUint32(this._pos,!0);return this._skip(4),e}getSFixed32(){const e=this._dataView.getInt32(this._pos,!0);return this._skip(4),e}getFloat(){const e=this._dataView.getFloat32(this._pos,!0);return this._skip(4),e}getString(){const e=this._getLength(),i=this._pos,r=this._toString(this._data,i,i+e);return this._skip(e),r}getBytes(){const e=this._getLength(),i=this._pos,r=this._toBytes(this._data,i,i+e);return this._skip(e),r}getLength(){return this._getLengthUnsafe()}processMessageWithArgs(e,i,r,n){const s=this.getMessage(),o=e(s,i,r,n);return s.release(),o}processMessage(e){const i=this.getMessage(),r=e(i);return i.release(),r}getMessage(){const e=this._getLength(),i=_h.pool.acquire();return i._init(this._data,this._dataView,this._pos,this._pos+e),this._skip(e),i}release(){_h.pool.release(this)}dataType(){return this._dataType}skip(){switch(this._dataType){case Vy.varint:this._decodeVarint();break;case Vy.fixed64:this._skip(8);break;case Vy.delimited:this._skip(this._getLength());break;case Vy.fixed32:this._skip(4);break;default:throw new Error("Invalid data type!")}}skipLen(e){this._skip(e)}_skip(e){if(this._pos+e>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=e}_decodeVarint(){const e=this._data;let i=this._pos,r=0,n=0;if(this._end-i>=10)do{if(n=e[i++],r|=127&n,!(128&n)||(n=e[i++],r|=(127&n)<<7,!(128&n))||(n=e[i++],r|=(127&n)<<14,!(128&n))||(n=e[i++],r|=(127&n)<<21,!(128&n))||(n=e[i++],r+=268435456*(127&n),!(128&n))||(n=e[i++],r+=34359738368*(127&n),!(128&n))||(n=e[i++],r+=4398046511104*(127&n),!(128&n))||(n=e[i++],r+=562949953421312*(127&n),!(128&n))||(n=e[i++],r+=72057594037927940*(127&n),!(128&n))||(n=e[i++],r+=9223372036854776e3*(127&n),!(128&n)))break;throw new Error("Varint too long!")}while(!1);else{let s=1;for(;i!==this._end&&(n=e[i],128&n);)++i,r+=(127&n)*s,s*=128;if(i===this._end)throw new Error("Varint overrun!");++i,r+=n*s}return this._pos=i,r}_decodeSVarint(){const e=this._data;let i,r=0,n=0;const s=1&e[this._pos];if(n=e[this._pos++],r|=127&n,!(128&n)||(n=e[this._pos++],r|=(127&n)<<7,!(128&n))||(n=e[this._pos++],r|=(127&n)<<14,!(128&n))||(n=e[this._pos++],r|=(127&n)<<21,!(128&n))||(n=e[this._pos++],r+=268435456*(127&n),!(128&n))||(n=e[this._pos++],r+=34359738368*(127&n),!(128&n))||(n=e[this._pos++],r+=4398046511104*(127&n),!(128&n)))return s?-(r+1)/2:r/2;if(i=BigInt(r),n=e[this._pos++],i+=0x2000000000000n*BigInt(127&n),!(128&n)||(n=e[this._pos++],i+=0x100000000000000n*BigInt(127&n),!(128&n))||(n=e[this._pos++],i+=0x8000000000000000n*BigInt(127&n),!(128&n)))return Number(s?-(i+1n)/2n:i/2n);throw new Error("Varint too long!")}_getLength(){if(this._dataType!==Vy.delimited)throw new Error("Not a delimited data type!");return this._decodeVarint()}_getLengthUnsafe(){return this.getUInt32()}_toString(e,i,r){if((r=Math.min(this._end,r))-i>GYe){const o=e.subarray(i,r);return BYe.decode(o)}let n="",s="";for(let o=i;o<r;++o){const a=e[o];128&a?s+="%"+a.toString(16):(n+=decodeURIComponent(s)+String.fromCharCode(a),s="")}return s.length&&(n+=decodeURIComponent(s)),n}_toBytes(e,i,r){return r=Math.min(this._end,r),new Uint8Array(e.buffer,i,r-i)}},_h.pool=new Bg(_h,void 0,(e=>{e._data=null,e._dataView=null})),_h);const Jv=2;let rp=class N1{constructor(e=[],i=[]){this.lengths=e??[],this.coords=i??[]}static fromJSON(e){return new N1(e.lengths,e.coords)}static fromRect(e){const[i,r,n,s]=e,o=n-i,a=s-r;return new N1([5],[i,r,o,0,0,a,-o,0,0,-a])}get isPoint(){return this.lengths.length===0&&this.coords.length>=2}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce(((e,i)=>e+i))}get usedMemory(){return 64+jH(this.lengths,this.coords)}area(){let e=0,i=0;if(!this.lengths.length)return 0;for(let r=0;r<this.lengths.length;r++){const n=this.lengths[r];if(n<3)continue;let s=this.coords[Jv*i],o=this.coords[Jv*i+1];for(let a=1;a<n;a+=1){const l=this.coords[Jv*(a+i)],c=this.coords[Jv*(a+i)+1];e+=-.5*(l-s)*(c+o),s=l,o=c}i+=n}return e}forEachVertex(e){let i=0;this.lengths.length||e(this.coords[0],this.coords[1]);for(let r=0;r<this.lengths.length;r++){const n=this.lengths[r];for(let s=0;s<n;s++)e(this.coords[Jv*(s+i)],this.coords[Jv*(s+i)+1]);i+=n}}deltaDecode(){const e=this.clone(),{coords:i,lengths:r}=e;let n=0;for(const s of r){for(let o=1;o<s;o++)i[2*(n+o)]+=i[2*(n+o)-2],i[2*(n+o)+1]+=i[2*(n+o)-1];n+=s}return e}clone(e){if(this.lengths.length===0)return new N1([],[this.coords[0],this.coords[1]]);const i=(this.lengths.length===0?1:this.lengths.reduce(((n,s)=>n+s)))*Jv,r=this.coords.slice(0,i);return e?(e.set(r),new N1(this.lengths,e)):new N1(Array.from(this.lengths),Array.from(r))}};function BH(t,e){return t?e?4:3:e?3:2}function HYe(t,e,i,r){if(!(e!=null&&e.lengths.length))return null;t.lengths.length&&(t.lengths.length=0),t.coords.length&&(t.coords.length=0);const n=t.coords,s=[],o=i?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:a,coords:l}=e,c=BH(i,r);let d=0;for(const f of a){const y=WYe(o,l,d,f,i,r);y&&s.push(y),d+=f*c}if(s.sort(((f,y)=>{let g=f[2]-y[2];return g===0&&i&&(g=f[4]-y[4]),g})),s.length){let f=6*s[0][2];n[0]=s[0][0]/f,n[1]=s[0][1]/f,i&&(f=6*s[0][4],n[2]=f!==0?s[0][3]/f:0),(n[0]<o[0]||n[0]>o[1]||n[1]<o[2]||n[1]>o[3]||i&&(n[2]<o[4]||n[2]>o[5]))&&(n.length=0)}if(!n.length){const f=e.lengths[0]?ZYe(l,0,a[0],i,r):null;if(!f)return null;n[0]=f[0],n[1]=f[1],i&&f.length>2&&(n[2]=f[2])}return t}function WYe(t,e,i,r,n,s){const o=BH(n,s);let a=i,l=i+o,c=0,d=0,f=0,y=0,g=0;for(let _=0,x=r-1;_<x;_++,a+=o,l+=o){const E=e[a],C=e[a+1],k=e[a+2],O=e[l],D=e[l+1],B=e[l+2];let j=E*D-O*C;y+=j,c+=(E+O)*j,d+=(C+D)*j,n&&(j=E*B-O*k,f+=(k+B)*j,g+=j),E<t[0]&&(t[0]=E),E>t[1]&&(t[1]=E),C<t[2]&&(t[2]=C),C>t[3]&&(t[3]=C),n&&(k<t[4]&&(t[4]=k),k>t[5]&&(t[5]=k))}if(y>0&&(y*=-1),g>0&&(g*=-1),!y)return null;const b=[c,d,.5*y];return n&&(b[3]=f,b[4]=.5*g),b}function ZYe(t,e,i,r,n){const s=BH(r,n);let o=e,a=e+s,l=0,c=0,d=0,f=0;for(let y=0,g=i-1;y<g;y++,o+=s,a+=s){const b=t[o],_=t[o+1],x=t[o+2],E=t[a],C=t[a+1],k=t[a+2],O=r?YYe(b,_,x,E,C,k):JYe(b,_,E,C);if(O)if(l+=O,r){const D=KYe(b,_,x,E,C,k);c+=O*D[0],d+=O*D[1],f+=O*D[2]}else{const D=XYe(b,_,E,C);c+=O*D[0],d+=O*D[1]}}return l>0?r?[c/l,d/l,f/l]:[c/l,d/l]:i>0?r?[t[e],t[e+1],t[e+2]]:[t[e],t[e+1]]:null}function JYe(t,e,i,r){const n=i-t,s=r-e;return Math.sqrt(n*n+s*s)}function YYe(t,e,i,r,n,s){const o=r-t,a=n-e,l=s-i;return Math.sqrt(o*o+a*a+l*l)}function XYe(t,e,i,r){return[t+.5*(i-t),e+.5*(r-e)]}function KYe(t,e,i,r,n,s){return[t+.5*(r-t),e+.5*(n-e),i+.5*(s-i)]}let QYe=class uR{constructor(e=null,i={},r,n,s=0){this.geometry=e,this.attributes=i,this.centroid=r,this.objectId=n,this.displayId=s}static fromJSON(e){const i=e.geometry?rp.fromJSON(e.geometry):null,r=e.centroid?rp.fromJSON(e.centroid):null,n=e.objectId;return new uR(i,e.attributes,r,n)}weakClone(){const e=new uR(this.geometry,this.attributes,this.centroid,this.objectId);return e.displayId=this.displayId,e}clone(){var r,n;const e=(r=this.geometry)==null?void 0:r.clone(),i=new uR(e,{...this.attributes},(n=this.centroid)==null?void 0:n.clone(),this.objectId);return i.displayId=this.displayId,i}ensureCentroid(e){return this.centroid??(this.centroid=HYe(new rp,this.geometry,e.hasZ,e.hasM)),this.centroid}get usedMemory(){var e;return 128+zYe(this.attributes)+(((e=this.geometry)==null?void 0:e.usedMemory)??0)}};function eXe(t){var e,i;return!!((i=(e=t.geometry)==null?void 0:e.coords)!=null&&i.length)}let tXe=class Sbe{constructor(){this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){const e=new Sbe;return e.globalIdFieldName=this.globalIdFieldName,e.geohashFieldName=this.geohashFieldName,e.geometryProperties=this.geometryProperties,e.geometryType=this.geometryType,e.spatialReference=this.spatialReference,e.hasZ=this.hasZ,e.hasM=this.hasM,e.features=this.features,e.fields=this.fields,e.transform=this.transform,e.exceededTransferLimit=this.exceededTransferLimit,e.uniqueIdField=this.uniqueIdField,e.queryGeometry=this.queryGeometry,e.queryGeometryType=this.queryGeometryType,e}};const $be=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"];let e1t=class{constructor(e){this._options=e,this.geometryTypes=$be,this._coordinatePtr=0,this._vertexDimension=0}createFeatureResult(){return new tXe}prepareFeatures(e){this._vertexDimension=2,e.hasZ&&this._vertexDimension++,e.hasM&&this._vertexDimension++}finishFeatureResult(e){if(!(e!=null&&e.features)||!e.hasZ||!this._options.sourceSpatialReference||!e.spatialReference||es(e.spatialReference,this._options.sourceSpatialReference)||e.spatialReference.vcsWkid)return;const i=XS(this._options.sourceSpatialReference)/XS(e.spatialReference);if(i!==1)for(const r of e.features){if(!eXe(r))continue;const n=r.geometry.coords;for(let s=2;s<n.length;s+=3)n[s]*=i}}addFeature(e,i){e.features.push(i)}createFeature(){return new QYe(null,{},null,0)}createSpatialReference(){return{wkid:0}}createGeometry(){return new rp}addField(e,i){e.fields.push(i)}allocateCoordinates(e){e.coords.length=e.lengths.reduce(((i,r)=>i+r),0)*this._vertexDimension,this._coordinatePtr=0}addCoordinate(e,i){e.coords[this._coordinatePtr++]=i}addCoordinatePoint(e,i){e.coords.push(i)}addLength(e,i){e.lengths.push(i)}addQueryGeometry(e,i){e.queryGeometry=i.queryGeometry,e.queryGeometryType=i.queryGeometryType}createPointGeometry(){return new rp}};const lne=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGeometry","esriFieldTypeBlob","esriFieldTypeRaster","esriFieldTypeGUID","esriFieldTypeGlobalID","esriFieldTypeXML","esriFieldTypeBigInteger","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"],cne=["sqlTypeBigInt","sqlTypeBinary","sqlTypeBit","sqlTypeChar","sqlTypeDate","sqlTypeDecimal","sqlTypeDouble","sqlTypeFloat","sqlTypeGeometry","sqlTypeGUID","sqlTypeInteger","sqlTypeLongNVarchar","sqlTypeLongVarbinary","sqlTypeLongVarchar","sqlTypeNChar","sqlTypeNVarchar","sqlTypeOther","sqlTypeReal","sqlTypeSmallInt","sqlTypeSqlXml","sqlTypeTime","sqlTypeTimestamp","sqlTypeTimestamp2","sqlTypeTinyInt","sqlTypeVarbinary","sqlTypeVarchar"],une=["upperLeft","lowerLeft"];function dne(t){return t>=lne.length?null:lne[t]}function iXe(t){return t>=cne.length?null:cne[t]}function hne(t){return t>=une.length?null:une[t]}function pne(t,e){return e>=t.geometryTypes.length?null:t.geometryTypes[e]}function rXe(t,e,i){const n=t.asUnsafe(),s=e.createPointGeometry(i);for(;n.next();)switch(n.tag()){case 3:{const o=n.getUInt32(),a=n.pos()+o;let l=0;for(;n.pos()<a;)e.addCoordinatePoint(s,n.getSInt64(),l++);break}default:n.skip()}return s}function nXe(t,e,i){const s=t.asUnsafe(),o=e.createGeometry(i),a=2+(i.hasZ?1:0)+(i.hasM?1:0);for(;s.next();)switch(s.tag()){case 2:{const l=s.getUInt32(),c=s.pos()+l;let d=0;for(;s.pos()<c;)e.addLength(o,s.getUInt32(),d++);break}case 3:{const l=s.getUInt32(),c=s.pos()+l;let d=0;for(e.allocateCoordinates(o);s.pos()<c;)e.addCoordinate(o,s.getSInt64(),d),d++,d===a&&(d=0);break}default:s.skip()}return o}function sXe(t){const n=t.asUnsafe(),s=new rp;let o="esriGeometryPoint";for(;n.next();)switch(n.tag()){case 2:{const a=n.getUInt32(),l=n.pos()+a;for(;n.pos()<l;)s.lengths.push(n.getUInt32());break}case 3:{const a=n.getUInt32(),l=n.pos()+a;for(;n.pos()<l;)s.coords.push(n.getSInt64());break}case 1:o=$be[n.getEnum()];break;default:n.skip()}return{queryGeometry:s,queryGeometryType:o}}function oXe(t){const d=t.asUnsafe();for(;d.next();)switch(d.tag()){case 1:return d.getString();case 2:return d.getFloat();case 3:return d.getDouble();case 4:return d.getSInt32();case 5:return d.getUInt32();case 6:return d.getInt64();case 7:return d.getUInt64();case 8:return d.getSInt64();case 9:return d.getBool();default:return d.skip(),null}return null}function aXe(t){const a=t.asUnsafe(),l={type:dne(0)};for(;a.next();)switch(a.tag()){case 1:l.name=a.getString();break;case 2:l.type=dne(a.getEnum());break;case 3:l.alias=a.getString();break;case 4:l.sqlType=iXe(a.getEnum());break;case 5:a.skip();break;case 6:l.defaultValue=a.getString();break;default:a.skip()}return l}function lXe(t){const r={},n=t.asUnsafe();for(;n.next();)switch(n.tag()){case 1:r.name=n.getString();break;case 2:r.isSystemMaintained=n.getBool();break;default:n.skip()}return r}function cXe(t,e,i,r){const a=e.createFeature(i);let l=0;for(;t.next();)switch(t.tag()){case 1:{const c=r[l++].name;a.attributes[c]=t.processMessage(oXe);break}case 2:a.geometry=t.processMessageWithArgs(nXe,e,i);break;case 4:a.centroid=t.processMessageWithArgs(rXe,e,i);break;default:t.skip()}return a}function uXe(t){const s=[1,1,1,1],o=t.asUnsafe();for(;o.next();)switch(o.tag()){case 1:s[0]=o.getDouble();break;case 2:s[1]=o.getDouble();break;case 4:s[2]=o.getDouble();break;case 3:s[3]=o.getDouble();break;default:o.skip()}return s}function dXe(t){const s=[0,0,0,0],o=t.asUnsafe();for(;o.next();)switch(o.tag()){case 1:s[0]=o.getDouble();break;case 2:s[1]=o.getDouble();break;case 4:s[2]=o.getDouble();break;case 3:s[3]=o.getDouble();break;default:o.skip()}return s}function hXe(t){const n={originPosition:hne(0)},s=t.asUnsafe();for(;s.next();)switch(s.tag()){case 1:n.originPosition=hne(s.getEnum());break;case 2:n.scale=s.processMessage(uXe);break;case 3:n.translate=s.processMessage(dXe);break;default:s.skip()}return n}function pXe(t){const n={},s=t.asUnsafe();for(;s.next();)switch(s.tag()){case 1:n.shapeAreaFieldName=s.getString();break;case 2:n.shapeLengthFieldName=s.getString();break;case 3:n.units=s.getString();break;default:s.skip()}return n}function fXe(t,e){const a=e.createSpatialReference();for(;t.next();)switch(t.tag()){case 1:a.wkid=t.getUInt32();break;case 5:a.wkt=t.getString();break;case 2:a.latestWkid=t.getUInt32();break;case 3:a.vcsWkid=t.getUInt32();break;case 4:a.latestVcsWkid=t.getUInt32();break;default:t.skip()}return a}function mXe(t,e){const _=e.createFeatureResult(),x=t.asUnsafe();_.geometryType=pne(e,0);let E=!1;for(;x.next();)switch(x.tag()){case 1:_.objectIdFieldName=x.getString();break;case 3:_.globalIdFieldName=x.getString();break;case 4:_.geohashFieldName=x.getString();break;case 5:_.geometryProperties=x.processMessage(pXe);break;case 7:_.geometryType=pne(e,x.getEnum());break;case 8:_.spatialReference=x.processMessageWithArgs(fXe,e);break;case 10:_.hasZ=x.getBool();break;case 11:_.hasM=x.getBool();break;case 12:_.transform=x.processMessage(hXe);break;case 9:_.exceededTransferLimit=x.getBool();break;case 13:e.addField(_,x.processMessage(aXe));break;case 15:E||(e.prepareFeatures(_),E=!0),e.addFeature(_,x.processMessageWithArgs(cXe,e,_,_.fields));break;case 2:_.uniqueIdField=x.processMessage(lXe);break;default:x.skip()}return e.finishFeatureResult(_),_}function yXe(t,e){const n={};let s=null;for(;t.next();)switch(t.tag()){case 4:s=t.processMessageWithArgs(sXe);break;case 1:n.featureResult=t.processMessageWithArgs(mXe,e);break;default:t.skip()}return s!=null&&n.featureResult&&e.addQueryGeometry(n,s),n}function gXe(t,e){try{const r=new qYe(new Uint8Array(t),new DataView(t)),n={};for(;r.next();)r.tag()===2?n.queryResult=r.processMessageWithArgs(yXe,e):r.skip();return n}catch(i){throw new ie("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:i})}}function vXe(t,e){const i=gXe(t,e),r=i.queryResult.featureResult,n=i.queryResult.queryGeometry,s=i.queryResult.queryGeometryType;if(r&&r.features&&r.features.length&&r.objectIdFieldName){const o=r.objectIdFieldName;for(const a of r.features)a.attributes&&(a.objectId=a.attributes[o])}return r&&(r.queryGeometry=n,r.queryGeometryType=s),r}const fne="Layer does not support extent calculation.";function bXe(t,e){if(e&&t.type==="extent")return`${t.xmin},${t.ymin},${t.xmax},${t.ymax}`;if(e&&t.type==="point")return`${t.x},${t.y}`;const i=t.toJSON();return delete i.spatialReference,JSON.stringify(i)}function wXe(t,e,i){var c,d;const r=t.geometry,n=t.toJSON();delete n.compactGeometryEnabled,delete n.defaultSpatialReferenceEnabled;const s=n;let o,a,l;if(r&&(a=r.spatialReference,l=JS(a),s.geometryType=bw(r),s.geometry=bXe(r,t.compactGeometryEnabled),s.inSR=l),n.groupByFieldsForStatistics&&(s.groupByFieldsForStatistics=n.groupByFieldsForStatistics.join(",")),n.objectIds)switch((c=i==null?void 0:i.uniqueIdFields)==null?void 0:c.length){case void 0:s.objectIds=n.objectIds.join(",");break;case 1:s.uniqueIds=JSON.stringify(n.objectIds),delete s.objectIds;break;default:s.uniqueIds=JSON.stringify(n.objectIds.map((f=>JSON.parse(f)))),delete s.objectIds}if(n.orderByFields&&(s.orderByFields=n.orderByFields.join(",")),!n.outFields||!n.returnDistinctValues&&(e!=null&&e.returnCountOnly||e!=null&&e.returnExtentOnly||e!=null&&e.returnIdsOnly)?delete s.outFields:n.outFields.includes("*")?s.outFields="*":s.outFields=n.outFields.join(","),n.outSR?(s.outSR=JS(n.outSR),o=t.outSpatialReference):r&&(n.returnGeometry||n.returnCentroid)&&(s.outSR=s.inSR,o=a),n.returnGeometry&&delete n.returnGeometry,n.outStatistics&&(s.outStatistics=JSON.stringify(n.outStatistics)),n.fullText&&(s.fullText=JSON.stringify(n.fullText)),n.pixelSize&&(s.pixelSize=JSON.stringify(n.pixelSize)),n.quantizationParameters&&(t.defaultSpatialReferenceEnabled&&a!=null&&((d=t.quantizationParameters)==null?void 0:d.extent)!=null&&a.equals(t.quantizationParameters.extent.spatialReference)&&delete n.quantizationParameters.extent.spatialReference,s.quantizationParameters=JSON.stringify(n.quantizationParameters)),n.parameterValues&&(s.parameterValues=JSON.stringify(n.parameterValues)),n.rangeValues&&(s.rangeValues=JSON.stringify(n.rangeValues)),n.dynamicDataSource&&(s.layer=JSON.stringify({source:n.dynamicDataSource}),delete n.dynamicDataSource),n.timeExtent){const f=n.timeExtent,{start:y,end:g}=f;y==null&&g==null||(s.time=y===g?y:`${y??"null"},${g??"null"}`),delete n.timeExtent}return t.defaultSpatialReferenceEnabled&&a!=null&&o!=null&&a.equals(o)&&(s.defaultSR=s.inSR,delete s.inSR,delete s.outSR),s}async function _Xe(t,e,i,r,n){var o;const s=(o=e.timeExtent)!=null&&o.isEmpty?{data:{features:[]}}:await O2(t,e,"json",r,void 0,n);return r8(e,i,s.data),s}async function i1t(t,e,i,r,n){var a;if((a=e.timeExtent)!=null&&a.isEmpty)return{data:i.createFeatureResult()};const s=await xXe(t,e,r,n),o=s;return o.data=vXe(s.data,i),o}function xXe(t,e,i,r){return O2(t,e,"pbf",i,void 0,r)}function r1t(t,e,i,r){var n;return(n=e.timeExtent)!=null&&n.isEmpty?Promise.resolve({data:{objectIds:[]}}):O2(t,e,"json",i,{returnIdsOnly:!0},r)}function n1t(t,e,i,r){var n;return(n=e.timeExtent)!=null&&n.isEmpty?Promise.resolve({data:{count:0}}):O2(t,e,"json",i,{returnIdsOnly:!0,returnCountOnly:!0},r)}async function s1t(t,e,i){var s;if((s=e.timeExtent)!=null&&s.isEmpty)return{data:{count:0,extent:null}};const r=await O2(t,e,"json",i,{returnExtentOnly:!0,returnCountOnly:!0}),n=r.data;if(n.hasOwnProperty("extent"))return r;if(n.features)throw new Error(fne);if(n.hasOwnProperty("count"))throw new Error(fne);return r}function SXe(t,e){if(!t.returnIdsOnly||!e.uniqueIdFields)return t;const i={...t,returnUniqueIdsOnly:!0};return delete i.returnIdsOnly,i}async function O2(t,e,i,r={},n={},s={}){const o=typeof t=="string"?rn(t):t,a=e.geometry?[e.geometry]:[],l=await $me(a,null,{signal:r.signal}),c=l==null?void 0:l[0];c!=null&&((e=e.clone()).geometry=c);const d=bbe({...o.query,f:i,...SXe(n,s),...wXe(e,n,s)});return fi(Pg(o.path,$Xe(e,n)?"query3d":"query"),{...r,responseType:i==="pbf"?"array-buffer":"json",query:{...d,...r.query}})}function $Xe(t,e){return t.formatOf3DObjects!=null&&!(e.returnCountOnly||e.returnExtentOnly||e.returnIdsOnly)}async function q4(t,e,i,r){const n=await TXe(t,e,i,r);return jn.fromJSON(n)}async function TXe(t,e,i,r){const n=zq(t),s={...i},o=dt.from(e),{data:a}=await _Xe(n,o,o.sourceSpatialReference,s,r);return a}const EXe="esri.widgets.Feature.support.relatedFeatureUtils",mne=()=>Ie.getLogger(EXe),yne=new Map;function dR(t){if(!Xh(t))return null;const[e,i]=t.split("/").slice(1);return{layerId:e,fieldName:i}}function IXe(t,e){if(!e.relationships)return null;let i=null;const{relationships:r}=e;return r.some((n=>n.id===parseInt(t,10)&&(i=n,!0))),i}function CXe({originRelationship:t,relationships:e,layerId:i}){return e.find((({relatedTableId:r,id:n})=>`${r}`===i&&n===(t==null?void 0:t.id)))??null}function MXe(t,e){const i=e.toLowerCase();for(const r in t)if(r.toLowerCase()===i)return t[r];return null}function kXe(t,e){const i=IXe(t,e);if(i)return{url:`${e.url}/${i.relatedTableId}`,sourceSpatialReference:e.spatialReference,relation:i,relatedFields:[],outStatistics:[]}}function PXe(t,e){if(!e||!t)return;const{features:i,statsFeatures:r}=t,n=i==null?void 0:i.value;e.relatedFeatures=n?n.features:[];const s=r==null?void 0:r.value;e.relatedStatsFeatures=s?s.features:[]}function AXe(t,e,i,r){var s;const n=new ar;return n.outFields=["*"],n.relationshipId=typeof e.id=="number"?e.id:parseInt(e.id,10),n.objectIds=[t.attributes[i.objectIdField]],n.gdbVersion=i.gdbVersion??null,n.historicMoment=i.historicMoment??null,((s=i.queryRelatedFeatures)==null?void 0:s.call(i,n,r))??Promise.resolve({})}function LXe(t,e,i){let r=0;const n=[];for(;r<e.length;)n.push(`${t} IN (${e.slice(r,i+r)})`),r+=i;return n.join(" OR ")}function RXe(t){return t?U7(t):void 0}function OXe(t){return t?U7(t,((e,i)=>JSON.stringify(e.toJSON())===JSON.stringify(i.toJSON()))):void 0}async function FXe(t,e,i,r){const n=i.layerId.toString(),{layerInfo:s,relation:o,relatedFields:a,outStatistics:l,url:c,sourceSpatialReference:d}=e,f=RXe(a),y=OXe(l);if(!s||!o)return null;const g=CXe({originRelationship:o,relationships:s.relationships,layerId:n});if(g!=null&&g.relationshipTableId&&g.keyFieldInRelationshipTable){const _=(await AXe(t,g,i,r))[t.attributes[i.objectIdField]];if(!_)return null;const x=_.features.map((E=>E.attributes[s.objectIdField]));if(y!=null&&y.length&&s.supportsStatistics){const E=new dt;E.where=LXe(s.objectIdField,x,1e3),E.outFields=f,E.outStatistics=y,E.sourceSpatialReference=d;const C={features:Promise.resolve(_),statsFeatures:q4(c,E)};return im(C)}}const b=g==null?void 0:g.keyField;if(b){const _=wq(jXe(s.fields,b)),x=MXe(t.attributes,o.keyField),E=_?`${b}=${x}`:`${b}='${x}'`,C=i.historicMoment,k=i.gdbVersion,O=q4(c,new dt({where:E,outFields:f,sourceSpatialReference:d,historicMoment:C,gdbVersion:k}),r),D=y!=null&&y.length&&s.supportsStatistics?q4(c,new dt({where:E,outFields:f,outStatistics:y,sourceSpatialReference:d}),r):null,B={features:O};return D&&(B.statsFeatures=D),im(B)}return null}function NXe(t,e){return fi(t,{query:{f:"json"},signal:e==null?void 0:e.signal})}function DXe({relatedInfos:t,layer:e},i){const r={};return t.forEach(((n,s)=>{const{relation:o}=n;if(!o){const f=new ie("editor:relation-required","A relation is required on a layer to retrieve related records.");throw mne().error(f),f}const{relatedTableId:a}=o;if(typeof a!="number"){const f=new ie("editor:related-table","A related table ID is required on a layer to retrieve related records.");throw mne().error(f),f}const l=`${e.url}/${a}`,c=yne.get(l),d=c??NXe(l);c||yne.set(l,d),r[s]=d})),Q7(im(r),i)}function zXe({graphic:t,relatedInfos:e,layer:i},r){const n={};return e.forEach(((s,o)=>{s.layerInfo&&(n[o]=FXe(t,s,i,r))})),im(n)}function VXe({relatedInfo:t,fieldName:e,fieldInfo:i}){var r,n;if((r=t.relatedFields)==null||r.push(e),i.statisticType){const s=new hc({statisticType:i.statisticType,onStatisticField:e,outStatisticFieldName:e});(n=t.outStatistics)==null||n.push(s)}}function jXe(t,e){if(t!=null){e=e.toLowerCase();for(const i of t)if(i&&i.name.toLowerCase()===e)return i}return null}const gne={chartAnimation:!0};let Er=class extends tt{constructor(e){super(e),this.abilities={...gne},this.activeMediaInfoIndex=0,this.attributes=null,this.description=null,this.fieldInfoMap=null,this.formattedAttributes=null,this.expressionAttributes=null,this.isAggregate=!1,this.layer=null,this.mediaInfos=null,this.popupTemplate=null,this.relatedInfos=null,this.title=null}castAbilities(e){return{...gne,...e}}get activeMediaInfo(){return this.formattedMediaInfos[this.activeMediaInfoIndex]||null}get formattedMediaInfos(){return this._formatMediaInfos()||[]}get formattedMediaInfoCount(){return this.formattedMediaInfos.length}setActiveMedia(e){this._setContentElementMedia(e)}next(){this._pageContentElementMedia(1)}previous(){this._pageContentElementMedia(-1)}_setContentElementMedia(e){const{formattedMediaInfoCount:i}=this,r=(e+i)%i;this.activeMediaInfoIndex=r}_pageContentElementMedia(e){const{activeMediaInfoIndex:i}=this,r=i+e;this._setContentElementMedia(r)}_formatMediaInfos(){const{mediaInfos:e,layer:i}=this,r=this.attributes??{},n=this.formattedAttributes??{},s=this.expressionAttributes??{},o=this.fieldInfoMap??new Map;return(e==null?void 0:e.map((a=>{const l=a==null?void 0:a.clone();return l?(l.title=hg({attributes:r,fieldInfoMap:o,globalAttributes:n,expressionAttributes:s,layer:i,text:l.title}),l.caption=hg({attributes:r,fieldInfoMap:o,globalAttributes:n,expressionAttributes:s,layer:i,text:l.caption}),l.altText=hg({attributes:r,fieldInfoMap:o,globalAttributes:n,expressionAttributes:s,layer:i,text:l.altText}),l.type==="image"?l.value?(this._setImageValue({value:l.value,formattedAttributes:n,layer:i}),l.value.sourceURL?l:void 0):void 0:l.type==="pie-chart"||l.type==="line-chart"||l.type==="column-chart"||l.type==="bar-chart"?l.value?(this._setChartValue({value:l.value,chartType:l.type,attributes:r,formattedAttributes:n,layer:i,expressionAttributes:s}),l):void 0:null):null})).filter(Kr))??[]}_setImageValue(e){const i=this.fieldInfoMap??new Map,{value:r,formattedAttributes:n,layer:s}=e,{linkURL:o,sourceURL:a}=r;if(a){const l=u3(a,s);r.sourceURL=c3({formattedAttributes:n,template:l,fieldInfoMap:i})}if(o){const l=u3(o,s);r.linkURL=c3({formattedAttributes:n,template:l,fieldInfoMap:i})}}_setChartValue(e){const{value:i,attributes:r,formattedAttributes:n,chartType:s,layer:o,expressionAttributes:a}=e,{popupTemplate:l,relatedInfos:c}=this,{fields:d,normalizeField:f}=i,y=o;if(i.fields=D0e(d,y),f&&(i.normalizeField=u$(f,y)),!d.some((b=>!!(n[b]!=null||Xh(b)&&(c!=null&&c.size)))))return;const g=(l==null?void 0:l.fieldInfos)??[];d.forEach(((b,_)=>{var C;const x=(C=i.colors)==null?void 0:C[_];if(Xh(b))return void(i.series=[...i.series,...this._getRelatedChartInfos({fieldInfos:g,fieldName:b,formattedAttributes:n,chartType:s,value:i,color:x})]);const E=this._getChartOption({value:i,attributes:r,chartType:s,formattedAttributes:n,expressionAttributes:a,fieldName:b,fieldInfos:g,color:x});i.series.push(E)}))}_getRelatedChartInfos(e){var b;const{fieldInfos:i,fieldName:r,formattedAttributes:n,chartType:s,value:o,color:a}=e,l=[],c=dR(r),d=c&&((b=this.relatedInfos)==null?void 0:b.get(c.layerId.toString()));if(!d)return l;const{relatedFeatures:f,relation:y}=d;if(!y||!f)return l;const{cardinality:g}=y;return f.forEach((_=>{const{attributes:x}=_;x&&Object.keys(x).forEach((E=>{E===c.fieldName&&l.push(this._getChartOption({value:o,attributes:x,formattedAttributes:n,fieldName:r,chartType:s,relatedFieldName:E,hasMultipleRelatedFeatures:(f==null?void 0:f.length)>1,fieldInfos:i,color:a}))}))})),g==="one-to-many"||g==="many-to-many"?l:[l[0]]}_getTooltip({label:e,value:i,chartType:r}){return r==="pie-chart"?`${e}`:`${e}: ${i}`}_getChartOption(e){var Z;const{value:i,attributes:r,formattedAttributes:n,expressionAttributes:s,fieldName:o,relatedFieldName:a,fieldInfos:l,chartType:c,hasMultipleRelatedFeatures:d,color:f}=e,y=this.layer,g=this.fieldInfoMap??new Map,{normalizeField:b,tooltipField:_}=i,x=b?Xh(b)?r[dR(b).fieldName]:r[b]:null,E=KN(o)&&s&&s[o]!==void 0?s[o]:a&&r[a]!==void 0?r[a]:r[o]!==void 0?r[o]:n[o],C=E===void 0?null:E&&x?E/x:E,k=new ffe({fieldName:o,color:f,value:typeof C=="number"?C:Number(C)});if(Xh(o)){const X=g.get(o.toLowerCase()),ee=_&&g.get(_.toLowerCase()),pe=(X==null?void 0:X.fieldName)??o,he=d&&_?dR(_).fieldName:(ee==null?void 0:ee.fieldName)??_,ne=d&&he?r[he]:n[he]??(X==null?void 0:X.label)??(X==null?void 0:X.fieldName)??a,re=d&&a?r[a]:n[pe];return k.tooltip=this._getTooltip({label:ne,value:re,chartType:c}),k}const O=NH(l,o),D=u$(o,y),B=_&&n[_]!==void 0?n[_]:OH(O||new Ps({fieldName:D}),(Z=this.popupTemplate)==null?void 0:Z.expressionInfos),j=n[D];return k.tooltip=this._getTooltip({label:B,value:j,chartType:c}),k}};u([h()],Er.prototype,"abilities",void 0),u([yi("abilities")],Er.prototype,"castAbilities",null),u([h()],Er.prototype,"activeMediaInfoIndex",void 0),u([h({readOnly:!0})],Er.prototype,"activeMediaInfo",null),u([h()],Er.prototype,"attributes",void 0),u([h()],Er.prototype,"description",void 0),u([h()],Er.prototype,"fieldInfoMap",void 0),u([h()],Er.prototype,"formattedAttributes",void 0),u([h()],Er.prototype,"expressionAttributes",void 0),u([h({readOnly:!0})],Er.prototype,"formattedMediaInfos",null),u([h()],Er.prototype,"isAggregate",void 0),u([h()],Er.prototype,"layer",void 0),u([h({readOnly:!0})],Er.prototype,"formattedMediaInfoCount",null),u([h()],Er.prototype,"mediaInfos",void 0),u([h()],Er.prototype,"popupTemplate",void 0),u([h()],Er.prototype,"relatedInfos",void 0),u([h()],Er.prototype,"title",void 0),Er=u([V("esri.widgets.Feature.FeatureMedia.FeatureMediaViewModel")],Er);const _a="esri-feature-media",Do={base:_a,mediaContainer:`${_a}__container`,mediaItemContainer:`${_a}__item-container`,mediaItem:`${_a}__item`,mediaItemText:`${_a}__item-text`,mediaItemTitle:`${_a}__item-title`,mediaItemCaption:`${_a}__item-caption`,mediaNavigation:`${_a}__item-navigation`,mediaPagination:`${_a}__pagination`,mediaPaginationText:`${_a}__pagination-text`,mediaChart:`${_a}__chart`,mediaPaginationButton:`${_a}__pagination-button`,mediaPaginationIcon:`${_a}__pagination-icon`,mediaChartRendered:`${_a}__chart--rendered`},H4=15,ty="category",pE="value",UXe="rgba(50, 50, 50, 1)",BXe=250,GXe=500,qXe=200;let yo=class extends Zi{constructor(e,i){super(e,i),this._refreshTimer=null,this._refreshIntervalInfo=null,this._featureElementInfo=null,this._chartRootMap=new WeakMap,this.viewModel=new Er,this.messages=null,this._disposeChart=r=>{var n;(n=this._chartRootMap.get(r))==null||n.dispose(),this._chartRootMap.delete(r)},this._createChart=async r=>{const{destroyed:n,viewModel:s}=this;if(n||!s||!r)return;const{createRoot:o}=await ye(()=>import("./chartUtilsAm5-Bu61VUJ4.js"),__vite__mapDeps([251,252,253,254])),a=await o(r);this._chartRootMap.set(r,a),this._renderChart({mediaInfo:s.activeMediaInfo,root:a})}}initialize(){this._featureElementInfo=new gh,this.addHandles([$e((()=>{var e,i;return[(e=this.viewModel)==null?void 0:e.activeMediaInfo,(i=this.viewModel)==null?void 0:i.activeMediaInfoIndex]}),(()=>this._setupMediaRefreshTimer()),kt),$e((()=>{var e,i;return[(e=this.viewModel)==null?void 0:e.description,(i=this.viewModel)==null?void 0:i.title]}),(()=>this._setupFeatureElementInfo()),kt)])}loadDependencies(){return zl({icon:()=>ye(()=>Promise.resolve().then(()=>X$),void 0)})}destroy(){var e;this._clearMediaRefreshTimer(),(e=this._featureElementInfo)==null||e.destroy()}get attributes(){return this.viewModel.attributes}set attributes(e){this.viewModel.attributes=e}get activeMediaInfoIndex(){return this.viewModel.activeMediaInfoIndex}set activeMediaInfoIndex(e){this.viewModel.activeMediaInfoIndex=e}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get fieldInfoMap(){return this.viewModel.fieldInfoMap}set fieldInfoMap(e){this.viewModel.fieldInfoMap=e}get layer(){return this.viewModel.layer}set layer(e){this.viewModel.layer=e}get mediaInfos(){return this.viewModel.mediaInfos}set mediaInfos(e){this.viewModel.mediaInfos=e}get popupTemplate(){return this.viewModel.popupTemplate}set popupTemplate(e){this.viewModel.popupTemplate=e}get relatedInfos(){return this.viewModel.relatedInfos}set relatedInfos(e){this.viewModel.relatedInfos=e}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}render(){var e;return G("div",{bind:this,class:Do.base,onkeyup:this._handleMediaKeyup},(e=this._featureElementInfo)==null?void 0:e.render(),this._renderMedia())}_renderMedia(){const{formattedMediaInfoCount:e,activeMediaInfoIndex:i}=this.viewModel,r=this._renderMediaText();return e?G("div",{class:Do.mediaContainer,key:"media-element-container"},this._renderMediaInfo(),G("div",{class:Do.mediaNavigation},r,e>1?G("div",{class:Do.mediaPagination},this._renderMediaPageButton("previous"),G("span",{class:Do.mediaPaginationText},xo(this.messages.pageText,{index:i+1,total:e})),this._renderMediaPageButton("next")):null)):null}_renderMediaText(){const{activeMediaInfo:e}=this.viewModel;if(!e)return null;const i=e&&e.title?G("div",{class:Do.mediaItemTitle,innerHTML:e.title,key:"media-title"}):null,r=e&&e.caption?G("div",{class:Do.mediaItemCaption,innerHTML:e.caption,key:"media-caption"}):null;return i||r?G("div",{class:Do.mediaItemText,key:"media-text"},i,r):null}_renderImageMediaInfo(e){if(!e.value)return null;const{_refreshIntervalInfo:i}=this,{activeMediaInfoIndex:r,formattedMediaInfoCount:n}=this.viewModel,{value:s,refreshInterval:o,altText:a,title:l,type:c}=e,{sourceURL:d,linkURL:f}=s,y=RH(f??void 0)?"_blank":"_self",g=y==="_blank"?"noreferrer":"",b=o?i:null,_=b?b.timestamp:0,x=b?b.sourceURL:d,E=G("img",{alt:a||l,key:`media-${c}-${r}-${n}-${_}`,src:x??void 0});return(f?G("a",{href:f,rel:g,target:y,title:l},E):null)??E}_renderChartMediaInfo(e){const{activeMediaInfoIndex:i,formattedMediaInfoCount:r}=this.viewModel;return G("div",{afterCreate:this._createChart,afterRemoved:this._disposeChart,bind:this,class:Do.mediaChart,key:`media-${e.type}-${i}-${r}`})}_renderMediaInfoType(){const{activeMediaInfo:e}=this.viewModel;return e?e.type==="image"?this._renderImageMediaInfo(e):e.type.includes("chart")?this._renderChartMediaInfo(e):null:null}_renderMediaInfo(){const{activeMediaInfo:e}=this.viewModel;return e?G("div",{class:Do.mediaItemContainer,key:"media-container"},G("div",{class:Do.mediaItem,key:"media-item-container"},this._renderMediaInfoType())):null}_renderMediaPageButton(e){if(this.viewModel.formattedMediaInfoCount<2)return null;const i=e==="previous",r=i?this.messages.previous:this.messages.next,n=i?"chevron-left":"chevron-right",s=i?"media-previous":"media-next",o=i?this._previous:this._next;return G("button",{"aria-label":r,bind:this,class:Do.mediaPaginationButton,key:s,onclick:o,tabIndex:0,title:r,type:"button"},G("calcite-icon",{class:Do.mediaPaginationIcon,icon:n,scale:"s"}))}_setupFeatureElementInfo(){var r;const{description:e,title:i}=this;(r=this._featureElementInfo)==null||r.set({description:e,title:i})}_next(){this.viewModel.next()}_previous(){this.viewModel.previous()}_getRenderer(){if(!this.viewModel)return;const{isAggregate:e,layer:i}=this.viewModel;return e&&(i!=null&&i.featureReduction)&&"renderer"in i.featureReduction?i.featureReduction.renderer:i==null?void 0:i.renderer}async _getSeriesColors(e){const{colorAm5:i}=await ye(()=>import("./chartCommon-CHQEIH-H.js"),__vite__mapDeps([255,252,256,253,257])),r=new Map;return e.forEach((n=>{n.color&&r.set(n,i(n.color.toCss(!0)))})),r}async _getRendererColors(){const{colorAm5:e}=await ye(()=>import("./chartCommon-CHQEIH-H.js"),__vite__mapDeps([255,252,256,253,257])),i=new Map,r=this._getRenderer(),n="default";if(!r)return i;const s=await FYe(r);return s.delete(n),Array.from(s.values()).every((o=>(o==null?void 0:o.length)===1))&&Array.from(s.keys()).forEach((o=>{var l,c;const a=(c=(l=s.get(o))==null?void 0:l[0])==null?void 0:c.toCss(!0);a&&i.set(o,e(a))})),i}_handleMediaKeyup(e){const{key:i}=e;i==="ArrowLeft"&&(e.stopPropagation(),this.viewModel.previous()),i==="ArrowRight"&&(e.stopPropagation(),this.viewModel.next())}_canAnimateChart(){return!!this.viewModel&&!!this.viewModel.abilities.chartAnimation&&!Rq()}_getChartAnimationMS(){return this._canAnimateChart()?BXe:0}_getChartSeriesAnimationMS(){return this._canAnimateChart()?GXe:0}async _renderChart(e){const{root:i,mediaInfo:r}=e,{value:n,type:s}=r,{ResponsiveThemeAm5:o,DarkThemeAm5:a,AnimatedThemeAm5:l,ColorSetAm5:c,ThemeAm5:d,esriChartColorSet:f}=await ye(async()=>{const{ResponsiveThemeAm5:O,DarkThemeAm5:D,AnimatedThemeAm5:B,ColorSetAm5:j,ThemeAm5:Z,esriChartColorSet:X}=await import("./chartCommon-CHQEIH-H.js");return{ResponsiveThemeAm5:O,DarkThemeAm5:D,AnimatedThemeAm5:B,ColorSetAm5:j,ThemeAm5:Z,esriChartColorSet:X}},__vite__mapDeps([255,252,256,253,257])),y=d.new(i);y.rule("ColorSet").set("colors",f),y.rule("ColorSet").set("reuse",!0);const g=[o.new(i),y];Yq()&&g.push(a.new(i)),this._canAnimateChart()&&g.push(l.new(i)),i.setThemes(g);const b=await this._getRendererColors(),_=await this._getSeriesColors(n.series),x=c.new(i,{}),E=_.get(n.series[0]),C=E?{lineSettings:{stroke:E}}:void 0,k=n.series.map(((O,D)=>{const B=_.get(O)||b.get(O.fieldName)||x.getIndex(D);return{[ty]:O.tooltip,[pE]:O.value,columnSettings:{fill:B,stroke:B},...C}})).filter((O=>s!=="pie-chart"||O.value!=null&&O.value>0));s==="pie-chart"?this._createPieChart(e,k):this._createXYChart(e,k)}_getDirection(){return Al(this.container)?"rtl":"ltr"}async _customizeChartTooltip(e,i="horizontal"){var n;const{colorAm5:r}=await ye(()=>import("./chartCommon-CHQEIH-H.js"),__vite__mapDeps([255,252,256,253,257]));e.setAll({pointerOrientation:i}),(n=e.get("background"))==null||n.setAll({stroke:r(UXe)}),e.label.setAll({direction:this._getDirection(),oversizedBehavior:"wrap",maxWidth:qXe})}async _createPieChart(e,i){const{TooltipAm5:r}=await ye(()=>import("./chartCommon-CHQEIH-H.js"),__vite__mapDeps([255,252,256,253,257])),{PieChartAm5:n,PieSeriesAm5:s}=await ye(async()=>{const{PieChartAm5:_,PieSeriesAm5:x}=await import("./pieChart-DhSYOTzj.js");return{PieChartAm5:_,PieSeriesAm5:x}},__vite__mapDeps([258,259,252,257,254])),{mediaInfo:o,root:a}=e,{title:l}=o,c=5,d=(o==null?void 0:o.altText)||(o==null?void 0:o.title)||"",f=a.container.children.push(n.new(a,{ariaLabel:d,focusable:!0,paddingBottom:c,paddingTop:c,paddingLeft:c,paddingRight:c})),y=`{category}: {valuePercentTotal.formatNumber('0.00')}%
 ({value})`,g=r.new(a,{labelText:y}),b=f.series.push(s.new(a,{name:l,valueField:pE,categoryField:ty,tooltip:g}));b.ticks.template.set("forceHidden",!0),b.labels.template.set("forceHidden",!0),b.slices.template.states.create("active",{shiftRadius:c}),this._customizeChartTooltip(g),b.slices.template.setAll({ariaLabel:y,focusable:!0,templateField:"columnSettings"}),b.data.setAll(i),b.appear(this._getChartSeriesAnimationMS()),f.appear(this._getChartAnimationMS()),f.root.dom.classList.toggle(Do.mediaChartRendered,!0)}_getMinSeriesValue(e){let i=0;return e.forEach((r=>i=Math.min(r.value,i))),i}async _createColumnChart(e,i,r){const{TooltipAm5:n,ScrollbarAm5:s}=await ye(()=>import("./chartCommon-CHQEIH-H.js"),__vite__mapDeps([255,252,256,253,257])),{CategoryAxisAm5:o,AxisRendererXAm5:a,ValueAxisAm5:l,AxisRendererYAm5:c,ColumnSeriesAm5:d}=await ye(async()=>{const{CategoryAxisAm5:O,AxisRendererXAm5:D,ValueAxisAm5:B,AxisRendererYAm5:j,ColumnSeriesAm5:Z}=await import("./xyChart-DjzIxuI9.js");return{CategoryAxisAm5:O,AxisRendererXAm5:D,ValueAxisAm5:B,AxisRendererYAm5:j,ColumnSeriesAm5:Z}},__vite__mapDeps([260,252,257,254,259,256])),{mediaInfo:f,root:y}=i,{value:g,title:b}=f;e.setAll({wheelX:"panX",wheelY:"zoomX"});const _=e.xAxes.push(o.new(y,{renderer:a.new(y,{inversed:Al(this.container)}),categoryField:ty}));_.get("renderer").labels.template.setAll({forceHidden:!0});const x=e.yAxes.push(l.new(y,{renderer:c.new(y,{inside:!1}),min:this._getMinSeriesValue(g.series)}));x.get("renderer").labels.template.setAll({direction:this._getDirection()});const E="{categoryX}",C=n.new(y,{labelText:E}),k=e.series.push(d.new(y,{name:b,xAxis:_,yAxis:x,valueYField:pE,categoryXField:ty,tooltip:C}));this._customizeChartTooltip(C),k.columns.template.setAll({ariaLabel:E,focusable:!0,templateField:"columnSettings"}),g.series.length>H4&&e.set("scrollbarX",s.new(y,{orientation:"horizontal"})),_.data.setAll(r),k.data.setAll(r),k.appear(this._getChartSeriesAnimationMS()),e.appear(this._getChartAnimationMS())}async _createBarChart(e,i,r){const{TooltipAm5:n,ScrollbarAm5:s}=await ye(()=>import("./chartCommon-CHQEIH-H.js"),__vite__mapDeps([255,252,256,253,257])),{CategoryAxisAm5:o,AxisRendererXAm5:a,ValueAxisAm5:l,AxisRendererYAm5:c,ColumnSeriesAm5:d}=await ye(async()=>{const{CategoryAxisAm5:O,AxisRendererXAm5:D,ValueAxisAm5:B,AxisRendererYAm5:j,ColumnSeriesAm5:Z}=await import("./xyChart-DjzIxuI9.js");return{CategoryAxisAm5:O,AxisRendererXAm5:D,ValueAxisAm5:B,AxisRendererYAm5:j,ColumnSeriesAm5:Z}},__vite__mapDeps([260,252,257,254,259,256])),{mediaInfo:f,root:y}=i,{value:g,title:b}=f;e.setAll({wheelX:"panY",wheelY:"zoomY"});const _=e.yAxes.push(o.new(y,{renderer:c.new(y,{inversed:!0}),categoryField:ty}));_.get("renderer").labels.template.setAll({forceHidden:!0});const x=e.xAxes.push(l.new(y,{renderer:a.new(y,{inside:!1,inversed:Al(this.container)}),min:this._getMinSeriesValue(g.series)}));x.get("renderer").labels.template.setAll({direction:this._getDirection()});const E="{categoryY}",C=n.new(y,{labelText:E}),k=e.series.push(d.new(y,{name:b,xAxis:x,yAxis:_,valueXField:pE,categoryYField:ty,tooltip:C}));this._customizeChartTooltip(C,"vertical"),k.columns.template.setAll({ariaLabel:E,focusable:!0,templateField:"columnSettings"}),g.series.length>H4&&e.set("scrollbarY",s.new(y,{orientation:"vertical"})),_.data.setAll(r),k.data.setAll(r),k.appear(this._getChartSeriesAnimationMS()),e.appear(this._getChartAnimationMS())}async _createLineChart(e,i,r){var D,B,j;const{TooltipAm5:n,ScrollbarAm5:s}=await ye(()=>import("./chartCommon-CHQEIH-H.js"),__vite__mapDeps([255,252,256,253,257])),{CategoryAxisAm5:o,AxisRendererXAm5:a,ValueAxisAm5:l,AxisRendererYAm5:c,LineSeriesAm5:d}=await ye(async()=>{const{CategoryAxisAm5:Z,AxisRendererXAm5:X,ValueAxisAm5:ee,AxisRendererYAm5:pe,LineSeriesAm5:he}=await import("./xyChart-DjzIxuI9.js");return{CategoryAxisAm5:Z,AxisRendererXAm5:X,ValueAxisAm5:ee,AxisRendererYAm5:pe,LineSeriesAm5:he}},__vite__mapDeps([260,252,257,254,259,256])),{root:f,mediaInfo:y}=i,{value:g,title:b}=y;e.setAll({wheelX:"panX",wheelY:"zoomX"});const _=e.xAxes.push(o.new(f,{renderer:a.new(f,{inversed:Al(this.container)}),categoryField:ty}));_.get("renderer").labels.template.setAll({forceHidden:!0});const x=e.yAxes.push(l.new(f,{renderer:c.new(f,{inside:!1}),min:this._getMinSeriesValue(g.series)}));x.get("renderer").labels.template.setAll({direction:this._getDirection()});const E="{categoryX}",C=(B=(D=r[0])==null?void 0:D.lineSettings)==null?void 0:B.stroke,k=n.new(f,{getFillFromSprite:!C,labelText:E});C&&((j=k.get("background"))==null||j.setAll({fill:C}));const O=e.series.push(d.new(f,{name:b,xAxis:_,yAxis:x,valueYField:pE,categoryXField:ty,tooltip:k}));O.strokes.template.setAll({templateField:"lineSettings"}),this._customizeChartTooltip(k,"vertical"),g.series.length>H4&&e.set("scrollbarX",s.new(f,{orientation:"horizontal"})),_.data.setAll(r),O.data.setAll(r),O.appear(this._getChartSeriesAnimationMS()),e.appear(this._getChartAnimationMS())}async _createXYChart(e,i){const{XYChartAm5:r,XYCursorAm5:n}=await ye(()=>import("./xyChart-DjzIxuI9.js"),__vite__mapDeps([260,252,257,254,259,256])),{root:s,mediaInfo:o}=e,{type:a}=o,l=(o==null?void 0:o.altText)||(o==null?void 0:o.title)||"",c=s.container.children.push(r.new(s,{ariaLabel:l,focusable:!0,panX:!0,panY:!0}));c.set("cursor",n.new(s,{})),a==="column-chart"&&await this._createColumnChart(c,e,i),a==="bar-chart"&&await this._createBarChart(c,e,i),a==="line-chart"&&await this._createLineChart(c,e,i),c.root.dom.classList.toggle(Do.mediaChartRendered,!0)}_clearMediaRefreshTimer(){const{_refreshTimer:e}=this;e&&(clearTimeout(e),this._refreshTimer=null)}_updateMediaInfoTimestamp(e){const i=Date.now();this._refreshIntervalInfo={timestamp:i,sourceURL:e&&this._getImageSource(e,i)}}_setupMediaRefreshTimer(){this._clearMediaRefreshTimer();const{activeMediaInfo:e}=this.viewModel;(e==null?void 0:e.type)==="image"&&(e==null?void 0:e.refreshInterval)>0&&this._setRefreshTimeout(e)}_setRefreshTimeout(e){const{refreshInterval:i,value:r}=e,n=6e4*i;this._updateMediaInfoTimestamp(r.sourceURL);const s=setInterval((()=>{this._updateMediaInfoTimestamp(r.sourceURL)}),n);this._refreshTimer=s}_getImageSource(e,i){const r=e.includes("?")?"&":"?",[n,s=""]=e.split("#");return`${n}${r}timestamp=${i}${s?"#":""}${s}`}};u([h()],yo.prototype,"_refreshIntervalInfo",void 0),u([h()],yo.prototype,"attributes",null),u([h()],yo.prototype,"activeMediaInfoIndex",null),u([h()],yo.prototype,"description",null),u([h()],yo.prototype,"fieldInfoMap",null),u([h()],yo.prototype,"layer",null),u([h()],yo.prototype,"mediaInfos",null),u([h()],yo.prototype,"popupTemplate",null),u([h()],yo.prototype,"relatedInfos",null),u([h()],yo.prototype,"title",null),u([h({type:Er})],yo.prototype,"viewModel",void 0),u([h(),nn("esri/widgets/Feature/t9n/Feature")],yo.prototype,"messages",void 0),yo=u([V("esri.widgets.Feature.FeatureMedia")],yo);var vne,bne;function l1t(t){return cs.fromJSON(t.toJSON())}function c1t(t){return t.toJSON?t.toJSON():t}function u1t(t){return t instanceof Date}function d1t(t){return t instanceof nt}function h1t(t){return t instanceof Jh}function p1t(t){return t instanceof Rve}function f1t(t){return t instanceof Ove}(function(t){t[t.Standardised=0]="Standardised",t[t.StandardisedNoInterval=1]="StandardisedNoInterval",t[t.SqlServer=2]="SqlServer",t[t.Oracle=3]="Oracle",t[t.Postgres=4]="Postgres",t[t.PGDB=5]="PGDB",t[t.FILEGDB=6]="FILEGDB",t[t.NotEvaluated=7]="NotEvaluated"})(vne||(vne={})),(function(t){t[t.InFeatureSet=0]="InFeatureSet",t[t.NotInFeatureSet=1]="NotInFeatureSet",t[t.Unknown=2]="Unknown"})(bne||(bne={}));const m1t=1e3,y1t={point:"point"},g1t={point:"esriGeometryPoint",polygon:"esriGeometryPolygon",polyline:"esriGeometryPolyline",multipoint:"esriGeometryMultipoint",extent:"esriGeometryEnvelope",esriGeometryPoint:"esriGeometryPoint",esriGeometryPolygon:"esriGeometryPolygon",esriGeometryPolyline:"esriGeometryPolyline",esriGeometryMultipoint:"esriGeometryMultipoint",esriGeometryEnvelope:"esriGeometryEnvelope",envelope:"esriGeometryEnvelope"},v1t={"small-integer":"esriFieldTypeSmallInteger",integer:"esriFieldTypeInteger",long:"esriFieldTypeLong",single:"esriFieldTypeSingle",double:"esriFieldTypeDouble",string:"esriFieldTypeString",date:"esriFieldTypeDate","date-only":"esriFieldTypeDateOnly","time-only":"esriFieldTypeTimeOnly","timestamp-offset":"esriFieldTypeTimestampOffset",oid:"esriFieldTypeOID",geometry:"esriFieldTypeGeometry",blob:"esriFieldTypeBlob",raster:"esriFieldTypeRaster",guid:"esriFieldTypeGUID","global-id":"esriFieldTypeGlobalID",xml:"esriFieldTypeXML","big-integer":"esriFieldTypeBigInteger",esriFieldTypeSmallInteger:"esriFieldTypeSmallInteger",esriFieldTypeInteger:"esriFieldTypeInteger",esriFieldTypeLong:"esriFieldTypeLong",esriFieldTypeSingle:"esriFieldTypeSingle",esriFieldTypeDouble:"esriFieldTypeDouble",esriFieldTypeString:"esriFieldTypeString",esriFieldTypeDate:"esriFieldTypeDate",esriFieldTypeDateOnly:"esriFieldTypeDateOnly",esriFieldTypeTimeOnly:"esriFieldTypeTimeOnly",esriFieldTypeTimestampOffset:"esriFieldTypeTimestampOffset",esriFieldTypeOID:"esriFieldTypeOID",esriFieldTypeGeometry:"esriFieldTypeGeometry",esriFieldTypeBlob:"esriFieldTypeBlob",esriFieldTypeRaster:"esriFieldTypeRaster",esriFieldTypeGUID:"esriFieldTypeGUID",esriFieldTypeGlobalID:"esriFieldTypeGlobalID",esriFieldTypeXML:"esriFieldTypeXML",esriFieldTypeBigInteger:"esriFieldTypeBigInteger"};function b1t(t){return t===void 0?"":t=(t=(t=t.replace(/\/featureserver\/[0-9]*/i,"/FeatureServer")).replace(/\/mapserver\/[0-9]*/i,"/MapServer")).split("?")[0]}function w1t(t,e){e||(e={}),typeof e=="function"&&(e={cmp:e});const i=typeof e.cycles=="boolean"&&e.cycles,r=e.cmp&&(n=e.cmp,function(o){return function(a,l){const c={key:a,value:o[a]},d={key:l,value:o[l]};return n(c,d)}});var n;const s=[];return(function o(a){if(a!=null&&a.toJSON&&typeof a.toJSON=="function"&&(a=a.toJSON()),a===void 0)return;if(typeof a=="number")return isFinite(a)?""+a:"null";if(typeof a!="object")return JSON.stringify(a);let l,c;if(Array.isArray(a)){for(c="[",l=0;l<a.length;l++)l&&(c+=","),c+=o(a[l])||"null";return c+"]"}if(a===null)return"null";if(s.includes(a)){if(i)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}const d=s.push(a)-1,f=Object.keys(a).sort(r==null?void 0:r(a));for(c="",l=0;l<f.length;l++){const y=f[l],g=o(a[y]);g&&(c&&(c+=","),c+=JSON.stringify(y)+":"+g)}return s.splice(d,1),"{"+c+"}"})(t)}function HXe(t){switch(t.type){case"catalog":case"csv":case"feature":case"geojson":case"knowledge-graph-sublayer":case"oriented-imagery":case"subtype-group":case"wfs":return!0;default:return!1}}function WXe(t){switch(t.type){case"catalog-footprint":case"subtype-sublayer":return!0;default:return HXe(t)}}const ZXe="esri.widgets.Feature.support.arcadeFeatureUtils",W4=()=>Ie.getLogger(ZXe);function JXe(t){return typeof t=="string"?J$(QN(t)):Array.isArray(t)?YXe(t):(t==null?void 0:t.declaredClass)==="esri.arcade.Dictionary"?XXe(t):t}function YXe(t){return`<ul class="esri-widget__list">${t.map((e=>`<li>${typeof e=="string"?J$(QN(e)):e}</li>`)).join("")}</ul>`}function XXe(t){const e=t.keys().map((i=>{const r=t.field(i);return`<tr><th>${i}</th><td>${typeof r=="string"?J$(QN(r)):r}</td></tr>`})).join("");return`<table class="${Vt.table}">${e}</table>`}async function Tbe(){const[t,e]=await Promise.all([ye(()=>import("./arcade-Bxpv28MF.js"),__vite__mapDeps([261,150])),ye(()=>import("./arcade-B76PVFLZ.js").then(i=>i.v),__vite__mapDeps([148,149,150,25,151,14,16,152]))]);return{executor:t,syntaxUtils:e}}function KXe(t){return"createQuery"in t&&"queryFeatures"in t}async function QXe({graphic:t,view:e,options:i}){const{isAggregate:r}=t,n=t.layer??t.sourceLayer;if(!r||!n||(e==null?void 0:e.type)!=="2d")return[];const s=await e.whenLayerView(n);if(!KXe(s))return[];const o=s.createQuery(),a=t.getObjectId();o.aggregateIds=a!=null?[a]:[];const{features:l}=await s.queryFeatures(o,i);return l}function eKe({layer:t,aggregatedFeatures:e,interceptor:i}){const{fields:r,objectIdField:n,geometryType:s,spatialReference:o,displayField:a}=t;return new lt({fields:r,objectIdField:n,geometryType:s,spatialReference:o,displayField:a,interceptor:i,...t.type==="feature"?{templates:t.templates,typeIdField:t.typeIdField,types:t.types}:null,source:e})}function tKe(t){const e=t.declaredClass==="esri.views.3d.layers.VoxelGraphic";return t.isAggregate?"popup-feature-reduction":e?"popup-voxel":"popup"}function Ebe(t){var e,i;return{scale:t==null?void 0:t.scale,timeProperties:{currentStart:(e=t==null?void 0:t.timeExtent)==null?void 0:e.start,currentEnd:(i=t==null?void 0:t.timeExtent)==null?void 0:i.end,startIncluded:!0,endIncluded:!0}}}function iKe(t){return{$voxel:t}}async function rKe(t,e,i,r,n){let s=null;if(n.has("$aggregatedfeatures")){const o=await QXe({graphic:t,view:e,options:i}),a=t.sourceLayer||t.layer;s=eKe({layer:a,aggregatedFeatures:o,interceptor:r})}return{vars:{$feature:t,$aggregatedFeatures:s,$view:Ebe(e)},[Symbol.dispose]:()=>s==null?void 0:s[Symbol.dispose]()}}function nKe(t,e,i,r){var s;const n=(t.sourceLayer||t.layer)??void 0;return{$feature:t,$layer:n!=null&&WXe(n)?n:(n==null?void 0:n.type)==="scene"&&n.associatedLayer!=null?n.associatedLayer:void 0,$map:e,$datastore:n==null?void 0:n.url,$userInput:i,$graph:(n==null?void 0:n.type)==="knowledge-graph-sublayer"?(s=n==null?void 0:n.parentCompositeLayer)==null?void 0:s.knowledgeGraph:void 0,$view:Ebe(r)}}async function sKe(t,{graphic:e,map:i,location:r,view:n,options:s,interceptor:o,arcadeExecutor:a}){switch(t){case"popup":return{vars:nKe(e,i,r,n),[Symbol.dispose](){}};case"popup-feature-reduction":{const l=new Set(a.variablesUsed);return await rKe(e,n,s,o,l)}case"popup-voxel":return{vars:iKe(e),[Symbol.dispose](){}};default:throw new Error(`Unexpected profile name ${t}`)}}async function Ibe({expressionInfo:t,arcade:{executor:e,syntaxUtils:i},graphic:r}){const n=t==null?void 0:t.expression;if(!n)return null;const s=tKe(r),o=e.createArcadeProfile(s);let a;try{a=await e.createArcadeExecutor(n,o)}catch(c){return W4().error("arcade-executor-error",{error:c,expressionInfo:t}),null}const l=new Set;return a.variablesUsed.includes("$view")&&(i.scriptUsesViewProperties(a.syntaxTree,["scale"])&&l.add("view-scale"),i.scriptUsesViewProperties(a.syntaxTree,["timeProperties"])&&l.add("view-time-extent")),{dependencies:l,async evaluate({graphic:c,interceptor:d,location:f,map:y,options:g,spatialReference:b,view:_}){var C;const x=await sKe(s,{graphic:c,map:y,location:f,view:_,options:g,interceptor:d,arcadeExecutor:a}),E={abortSignal:(g==null?void 0:g.signal)??void 0,interceptor:d??void 0,rawOutput:!0,spatialReference:b??void 0,timeZone:_==null?void 0:_.timeZone,console(...k){W4().info(...k)}};try{return await a.executeAsync(x.vars,E)}catch(k){return(C=g==null?void 0:g.signal)!=null&&C.aborted?void 0:void W4().error("arcade-execution-error",{error:k,graphic:c,expressionInfo:t})}finally{x[Symbol.dispose]()}}}}async function oKe(t,e){if(!(t!=null&&t.length))return{dependencies:new Set,expressions:new Map};const i=await Tbe(),r=new Set,n=new Map;for(const s of t){const o=await Ibe({expressionInfo:s,arcade:i,graphic:e});n.set(`expression/${s.name}`,o),o==null||o.dependencies.forEach((a=>r.add(a)))}return{dependencies:r,expressions:n}}const wne=1;let Ws=class extends tt{constructor(e){super(e),this._compileTask=null,this._evaluateTask=null,this.expressionInfo=null,this.graphic=null,this.contentElementViewModel=null,this.interceptor=null,this.location=null,this.view=null,this._createVM=()=>{var n,s;const i=(n=this.contentElement)==null?void 0:n.type;(s=this.contentElementViewModel)==null||s.destroy();const r=i==="fields"?new bc:i==="media"?new Er:i==="text"?new Nu:null;this._set("contentElementViewModel",r)},this._compileThrottled=yM(this._startCompile,(()=>this.notifyChange("state")),wne,this),this._evaluateThrottled=yM(this._startEvaluate,(()=>this.notifyChange("state")),wne,this),this.addHandles([$e((()=>[this.expressionInfo,this.graphic]),(()=>this._compileThrottled()),kt),$e((()=>[this.contentElement]),(()=>this._createVM()),kt),Sn((()=>{var n,s,o,a,l,c;if(!((n=this._compileTask)!=null&&n.finished))return null;const i=this._compileTask.value,r=i==null?void 0:i.dependencies;return[i,this.spatialReference,this.map,this.view,r!=null&&r.has("view-scale")?(s=this.view)==null?void 0:s.scale:null,r!=null&&r.has("view-time-extent")?(a=(o=this.view)==null?void 0:o.timeExtent)==null?void 0:a.start:null,r!=null&&r.has("view-time-extent")?(c=(l=this.view)==null?void 0:l.timeExtent)==null?void 0:c.end:null]}),(([i])=>this._evaluateThrottled(i)))])}initialize(){this.addHandles([this._compileThrottled,this._evaluateThrottled])}destroy(){var e;this._compileTask=Eo(this._compileTask),this._evaluateTask=Eo(this._evaluateTask),(e=this.contentElementViewModel)==null||e.destroy(),this._set("contentElementViewModel",null)}get contentElement(){var e;return(e=this._evaluateTask)==null?void 0:e.value}get spatialReference(){var e;return((e=this.view)==null?void 0:e.spatialReference)??null}set spatialReference(e){this._override("spatialReference",e)}get state(){var r,n;const{contentElement:e,contentElementViewModel:i}=this;return this._compileThrottled.hasPendingUpdates()||this._evaluateThrottled.hasPendingUpdates()||!((r=this._compileTask)!=null&&r.finished)||!((n=this._evaluateTask)!=null&&n.finished)?"loading":e||i?"ready":"disabled"}get map(){var e;return((e=this.view)==null?void 0:e.map)??null}set map(e){this._override("map",e)}_startCompile(){this._evaluateTask=Eo(this._evaluateTask),this._compileTask=Eo(this._compileTask),this._compileTask=Fg((async e=>{const{expressionInfo:i,graphic:r}=this;if(!i||!r)return null;const n=await Tbe();Wi(e);const s=await Ibe({expressionInfo:i,arcade:n,graphic:r});return Wi(e),s}))}_startEvaluate(e){this._evaluateTask=Eo(this._evaluateTask),this._evaluateTask=Fg((async i=>{const{graphic:r}=this;if(!e||!r)return null;const{interceptor:n,spatialReference:s,map:o,location:a,view:l}=this,c=await e.evaluate({graphic:r,interceptor:n,location:a,map:o,options:{signal:i},spatialReference:s,view:l});Wi(i);const d=c;if(!d||d.declaredClass!=="esri.arcade.Dictionary")return null;const f=await d.castAsJsonAsync(i);Wi(i);const y=f==null?void 0:f.type,g=y==="media"?a$.fromJSON(f):y==="text"?nd.fromJSON(f):y==="fields"?dw.fromJSON(f):null;return g.type==="media"&&!g.mediaInfos||g.type==="fields"&&!g.fieldInfos||g.type==="text"&&!g.text?null:g}))}};u([h()],Ws.prototype,"_compileTask",void 0),u([h()],Ws.prototype,"_evaluateTask",void 0),u([h({type:pfe})],Ws.prototype,"expressionInfo",void 0),u([h({type:qi})],Ws.prototype,"graphic",void 0),u([h({readOnly:!0})],Ws.prototype,"contentElement",null),u([h({readOnly:!0})],Ws.prototype,"contentElementViewModel",void 0),u([h()],Ws.prototype,"interceptor",void 0),u([h({type:_t})],Ws.prototype,"location",void 0),u([h()],Ws.prototype,"spatialReference",null),u([h({readOnly:!0})],Ws.prototype,"state",null),u([h()],Ws.prototype,"map",null),u([h()],Ws.prototype,"view",void 0),Ws=u([V("esri.widgets.Feature.FeatureExpression.FeatureExpressionViewModel")],Ws);const _ne="esri-feature",xne={base:`${_ne}-expression`,loadingSpinnerContainer:`${_ne}__loading-container`};let hR=class extends Zi{constructor(e,i){super(e,i),this._contentWidget=null,this.viewModel=new Ws}initialize(){this.addHandles($e((()=>{var e;return(e=this.viewModel)==null?void 0:e.contentElementViewModel}),(()=>this._setupExpressionWidget()),kt))}loadDependencies(){return zl({loader:()=>ye(()=>Promise.resolve().then(()=>F2),void 0)})}destroy(){this._destroyContentWidget()}render(){var i;const{state:e}=this.viewModel;return G("div",{class:xne.base},e==="loading"?this._renderLoading():e==="disabled"?null:(i=this._contentWidget)==null?void 0:i.render())}_renderLoading(){return G("div",{class:xne.loadingSpinnerContainer,key:"loading-container"},G("calcite-loader",{inline:!0,label:""}))}_destroyContentWidget(){const{_contentWidget:e}=this;e&&(e.viewModel=null,e.destroy()),this._contentWidget=null}_setupExpressionWidget(){const{contentElementViewModel:e,contentElement:i}=this.viewModel,r=i==null?void 0:i.type;this._destroyContentWidget();const n=e?r==="fields"?new pc({viewModel:e}):r==="media"?new yo({viewModel:e}):r==="text"?new jf({viewModel:e}):null:null;this._contentWidget=n,this.scheduleRender()}};u([h({type:Ws})],hR.prototype,"viewModel",void 0),hR=u([V("esri.widgets.Feature.FeatureExpression")],hR);var Sne,$ne;(function(t){t.Text="text",t.Number="number",t.Date="date",t.Unsupported="unsupported"})(Sne||(Sne={})),(function(t){t.CANNOT_BE_EMPTY="input-validation-error::cannot-be-empty",t.TOO_SHORT="length-validation-error::too-short",t.TOO_LONG="length-validation-error::too-long"})($ne||($ne={}));const aKe=t=>{var i;const e=[];if(t.formTemplate){const{description:r,title:n}=t.formTemplate;(i=t.fields)==null||i.forEach((s=>{const o=n&&uY(n,s.name),a=r&&uY(r,s.name);(o||a)&&e.push(s.name)}))}return e},Z4=100;let mi=class extends bt.ClonableMixin(dm.IdentifiableMixin(tt)){constructor(e){super(e),this._loaded=!1,this._queryAbortController=null,this._queryPageAbortController=null,this._queryFeatureCountAbortController=null,this.featuresPerPage=10,this.activeCategory=null,this.allCategories=null,this.description=null,this.graphic=null,this.layer=null,this.map=null,this.orderByFields=null,this.featureCount=0,this.relationshipId=null,this.showAllEnabled=!1,this.title=null,this._cancelQuery=()=>{const{_queryAbortController:i}=this;i&&i.abort(),this._queryAbortController=null},this._cancelQueryFeatureCount=()=>{const{_queryFeatureCountAbortController:i}=this;i&&i.abort(),this._queryFeatureCountAbortController=null},this._cancelQueryPage=()=>{const{_queryPageAbortController:i}=this;i&&i.abort(),this._queryPageAbortController=null},this._queryController=async()=>{this._cancelQuery();const i=new AbortController;this._queryAbortController=i,await Wu(this._query()),this._queryAbortController===i&&(this._queryAbortController=null)},this._queryFeatureCountController=async()=>{this._loaded=!1,this._cancelQueryFeatureCount();const i=new AbortController;this._queryFeatureCountAbortController=i,await Wu(this._queryFeatureCount()),this._queryFeatureCountAbortController===i&&(this._queryFeatureCountAbortController=null),this._loaded=!0},this._queryPageController=async()=>{const i=new AbortController;this._queryPageAbortController=i,await Wu(this._queryPage()),this._queryPageAbortController===i&&(this._queryPageAbortController=null)},this._queryDebounced=Zu(this._queryController,Z4),this._queryFeatureCountDebounced=Zu(this._queryFeatureCountController,Z4),this._queryPageDebounced=Zu(this._queryPageController,Z4),this._query=async()=>{var n;const{_queryAbortController:i,relatedFeatures:r}=this;this.featureCount&&(((n=this.relatedLayer)==null?void 0:n.type)!=="subtype-group"||this.activeCategory)&&(this._destroyRelatedFeatureViewModels(),this.featurePage=1,r.destroyAll(),this.destroyed||r.addMany(this._sliceFeatures(await this._queryRelatedFeatures({signal:i==null?void 0:i.signal}))))},this.addHandles([$e((()=>{var i;return[this.displayCount,this.graphic,this.layer,(i=this.layer)==null?void 0:i.loaded,this.map,this.orderByFields,this.relationshipId,this.featuresPerPage,this.showAllEnabled,this.canQuery,this.featureCount,this.activeCategory]}),(()=>this._queryDebounced()),kt),$e((()=>[this.featurePage,this.showAllEnabled]),(()=>this._queryPageDebounced())),$e((()=>[this.layer,this.relationshipId,this.objectId,this.canQuery,this.activeCategory]),(()=>this._queryFeatureCountDebounced()))])}destroy(){this._destroyRelatedFeatureViewModels(),this.relatedFeatures.destroyAll(),this._cancelQuery(),this._cancelQueryFeatureCount(),this._cancelQueryPage()}set featurePage(e){const{featuresPerPage:i,featureCount:r}=this,n=1,s=Math.ceil(r/i)||1;this._set("featurePage",Math.min(Math.max(e,n),s))}get featurePage(){return this._get("featurePage")}get orderByFieldsFixedCasing(){const{orderByFields:e,relatedLayer:i}=this;return e&&(i!=null&&i.loaded)?e.map((r=>{const n=r.clone();return n.field=u$(r.field,i),n})):e??[]}get supportsCacheHint(){var e,i,r;return!!((r=(i=(e=this.layer)==null?void 0:e.capabilities)==null?void 0:i.queryRelated)!=null&&r.supportsCacheHint)}get canLoad(){return!!this.map&&this.relationshipId!=null&&typeof this.objectId=="number"}get canQuery(){var i,r;const e=(r=(i=this.layer)==null?void 0:i.capabilities)==null?void 0:r.queryRelated;return!!(this.relatedLayer&&this.relationship&&this.relationshipId!=null&&this.objectId!=null&&(e!=null&&e.supportsCount)&&(e!=null&&e.supportsPagination))}get allCategoriesCount(){var e;return((e=this.allCategories)==null?void 0:e.length)??0}get categories(){const{allCategories:e}=this;return this.showAllEnabled?e:(e==null?void 0:e.slice(0,this.displayCount))??null}set displayCount(e){this._set("displayCount",Math.min(Math.max(e??3,0),10))}get displayCount(){return this._get("displayCount")}get itemDescriptionFieldName(){var e;return((e=this.orderByFieldsFixedCasing[0])==null?void 0:e.field)||null}get objectId(){var e,i;return(this.objectIdField&&((i=(e=this.graphic)==null?void 0:e.attributes)==null?void 0:i[this.objectIdField]))??null}get objectIdField(){var e;return((e=this.layer)==null?void 0:e.objectIdField)||null}get relatedFeatures(){return this._get("relatedFeatures")||new Ze}get relatedLayer(){const{layer:e,map:i,relationship:r}=this;if(!(e!=null&&e.loaded)||!i||!r)return null;const n=e.type==="subtype-sublayer"&&e.parent&&L2(e.parent)?e.parent:e;return X0e(i,n,r)??null}get relatedLayerKeyField(){var r,n;const{relatedLayer:e,relationshipId:i}=this;return e!=null&&e.loaded&&i!=null?(n=(r=e.relationships)==null?void 0:r.find((s=>s.id===i)))==null?void 0:n.keyField:null}get relatedLayerKeyFields(){var i;const{relatedLayer:e}=this;return e!=null&&e.loaded?((i=e.relationships)==null?void 0:i.map((r=>r.keyField)).filter(Kr))??[]:[]}get relationship(){var r;const{relationshipId:e,layer:i}=this;return e!=null&&(i!=null&&i.loaded)?((r=i.relationships)==null?void 0:r.find((({id:n})=>n===e)))??null:null}get relationshipKey(){var i,r;const{relationshipKeyField:e}=this;return(e&&((r=(i=this.graphic)==null?void 0:i.attributes)==null?void 0:r[e]))??null}get relationshipKeyField(){var e;return((e=this.relationship)==null?void 0:e.keyField)||null}get relatedFeatureViewModels(){return this._get("relatedFeatureViewModels")||new Ze}get state(){const{_queryAbortController:e,_queryFeatureCountAbortController:i,_queryPageAbortController:r,canQuery:n,_loaded:s,canLoad:o}=this;return i||o&&!s?"loading":e||r?"querying":n?"ready":"disabled"}getRelatedFeatureByObjectId(e){return this.relatedFeatures.find((i=>i.getObjectId()===e))}refresh(){this._queryFeatureCountDebounced()}_destroyRelatedFeatureViewModels(){var e;(e=this.relatedFeatureViewModels)==null||e.destroyAll()}async _queryFeatureCount(){const{layer:e,relatedLayer:i}=this;await(e==null?void 0:e.load()),await(i==null?void 0:i.load());const{_queryFeatureCountAbortController:r,activeCategory:n,canQuery:s,objectId:o,relatedLayerKeyField:a,relationshipId:l,relationshipKey:c,supportsCacheHint:d}=this;if(!s||!e||!i||o==null)return this._set("featureCount",0),void this._set("allCategories",null);if((i==null?void 0:i.type)==="subtype-group"&&!n){if(this._set("featureCount",0),this._destroyRelatedFeatureViewModels(),this.featurePage=1,this.relatedFeatures.destroyAll(),a&&c!=null){const{default:_}=await ye(()=>import("./uniqueValues-DdXJfV1v.js"),__vite__mapDeps([262,1,2,3,0,192,12,8,20])),{uniqueValueInfos:x}=await _({layer:i,sqlWhere:`${a} = '${c}'`,field:i.subtypeField,signal:r==null?void 0:r.signal}),E=x.map((({count:C,value:k})=>{var D,B;const O=(B=(D=i.subtypes)==null?void 0:D.find((j=>j.code===k)))==null?void 0:B.name;return k!=null&&O?{count:C,value:k,name:O}:void 0})).filter(Kr);this._set("allCategories",E)}return}const{historicMoment:f,gdbVersion:y}=e,g=new ar({cacheHint:d,gdbVersion:y,historicMoment:f,relationshipId:l,returnGeometry:!1,objectIds:[o],where:this._getRelationshipWhereClause(i)}),b=await e.queryRelatedFeaturesCount(g,{signal:r==null?void 0:r.signal});this._set("allCategories",null),this._set("featureCount",b[o]||0)}_getRelationshipWhereClause(e){const{activeCategory:i}=this,r=e.createQuery(),n="subtypeField"in e?e.subtypeField:void 0,s=i&&n?`${n} = ${i.value}`:void 0,o=r.where;return o&&s?`(${o}) AND (${s})`:o??s}_sliceFeatures(e){const{showAllEnabled:i,displayCount:r}=this;return i?e:r?e.slice(0,r):[]}async _queryPage(){var o;const{relatedFeatures:e,featurePage:i,showAllEnabled:r,_queryPageAbortController:n,featureCount:s}=this;!r||i<2||!s||((o=this.relatedLayer)==null?void 0:o.type)==="subtype-group"&&!this.activeCategory||e.addMany(await this._queryRelatedFeatures({signal:n==null?void 0:n.signal}))}async _queryRelatedFeatures(e){var ee;const{displayCount:i,featureCount:r,featurePage:n,featuresPerPage:s,layer:o,orderByFieldsFixedCasing:a,relatedLayer:l,relatedLayerKeyFields:c,relationshipId:d,showAllEnabled:f,supportsCacheHint:y}=this,{canQuery:g,objectId:b}=this;if(!g||!o||!l||b==null)return[];const _=f?((n-1)*s+r)%r:0,x=f?s:i,E=l.objectIdField,C="subtypeField"in l?l.subtypeField:void 0,k=[...a.map((pe=>pe.field)),...aKe(l),...c,E,C].filter(lKe),O=a.map((pe=>`${pe.field} ${pe.order}`)),{historicMoment:D,gdbVersion:B}=o,j=new ar({orderByFields:O,start:_,num:x,outFields:k,cacheHint:y,historicMoment:D,gdbVersion:B,relationshipId:d,returnGeometry:!1,objectIds:[b],where:this._getRelationshipWhereClause(l)}),Z=await o.queryRelatedFeatures(j,{signal:e==null?void 0:e.signal}),X=((ee=Z[b])==null?void 0:ee.features)||[];return l.type==="subtype-group"&&C?X.forEach((pe=>{var re;const he=pe.attributes[C],ne=(re=l.findSublayerForSubtypeCode)==null?void 0:re.call(l,he);pe.sourceLayer=ne,pe.layer=ne})):X.forEach((pe=>{pe.sourceLayer=l,pe.layer=l})),X}};function lKe(t){return t!=null&&t!==""}u([h()],mi.prototype,"_loaded",void 0),u([h()],mi.prototype,"_queryAbortController",void 0),u([h()],mi.prototype,"_queryPageAbortController",void 0),u([h()],mi.prototype,"_queryFeatureCountAbortController",void 0),u([h({value:1})],mi.prototype,"featurePage",null),u([h()],mi.prototype,"featuresPerPage",void 0),u([h({readOnly:!0})],mi.prototype,"orderByFieldsFixedCasing",null),u([h({readOnly:!0})],mi.prototype,"supportsCacheHint",null),u([h({readOnly:!0})],mi.prototype,"canLoad",null),u([h({readOnly:!0})],mi.prototype,"canQuery",null),u([h()],mi.prototype,"activeCategory",void 0),u([h({readOnly:!0})],mi.prototype,"allCategories",void 0),u([h({readOnly:!0})],mi.prototype,"allCategoriesCount",null),u([h({readOnly:!0})],mi.prototype,"categories",null),u([h()],mi.prototype,"description",void 0),u([h({value:3})],mi.prototype,"displayCount",null),u([h({type:qi})],mi.prototype,"graphic",void 0),u([h({readOnly:!0})],mi.prototype,"itemDescriptionFieldName",null),u([h()],mi.prototype,"layer",void 0),u([h()],mi.prototype,"map",void 0),u([h({readOnly:!0})],mi.prototype,"objectId",null),u([h({readOnly:!0})],mi.prototype,"objectIdField",null),u([h()],mi.prototype,"orderByFields",void 0),u([h({readOnly:!0})],mi.prototype,"relatedFeatures",null),u([h({readOnly:!0})],mi.prototype,"relatedLayer",null),u([h({readOnly:!0})],mi.prototype,"relatedLayerKeyField",null),u([h({readOnly:!0})],mi.prototype,"relatedLayerKeyFields",null),u([h({readOnly:!0})],mi.prototype,"relationship",null),u([h({readOnly:!0})],mi.prototype,"relationshipKey",null),u([h({readOnly:!0})],mi.prototype,"relationshipKeyField",null),u([h({readOnly:!0})],mi.prototype,"featureCount",void 0),u([h({readOnly:!0})],mi.prototype,"relatedFeatureViewModels",null),u([h()],mi.prototype,"relationshipId",void 0),u([h()],mi.prototype,"showAllEnabled",void 0),u([h()],mi.prototype,"state",null),u([h()],mi.prototype,"title",void 0),mi=u([V("esri.widgets.Feature.FeatureRelationship.FeatureRelationshipViewModel")],mi);var pR;const fR="esri-feature",fE=`${fR}-relationship`,Dp={base:fE,listContainer:`${fE}__list`,listItem:`${fE}__list-item`,listItemHidden:`${fE}__list-item--hidden`,listContainerQuerying:`${fE}__list--querying`,featureObserver:`${fR}__feature-observer`,stickySpinnerContainer:`${fR}__sticky-loading-container`,loadingSpinnerContainer:`${fR}__loading-container`},Tne={title:!0,description:!0};let xs=pR=class extends Zi{constructor(t,e){super(t,e),this._featureElementInfo=null,this._relatedFeatureIntersectionObserverNode=null,this._relatedFeatureIntersectionObserver=new IntersectionObserver((([i])=>{i!=null&&i.isIntersecting&&this._increaseFeaturePage()}),{root:window.document}),this.flowItems=null,this.flowType="feature-relationship",this.headingLevel=2,this.viewModel=new mi,this.messages=null,this.messagesCommon=null,this.visibleElements={...Tne},this._increaseFeaturePage=()=>{const{state:i,showAllEnabled:r,relatedFeatures:n,featuresPerPage:s,featurePage:o}=this.viewModel;i==="ready"&&r&&n.length>=s*o&&this.viewModel.featurePage++}}initialize(){this._featureElementInfo=new gh,this.addHandles([$e((()=>[this.viewModel.description,this.viewModel.title,this.headingLevel]),(()=>this._setupFeatureElementInfo()),kt),$e((()=>[this.viewModel.state,this.viewModel.showAllEnabled,this._relatedFeatureIntersectionObserverNode]),(()=>this._handleRelatedFeatureObserverChange())),eo((()=>this.viewModel.relatedFeatureViewModels),"change",(()=>this._setupRelatedFeatureViewModels()))])}loadDependencies(){return zl({chip:()=>ye(()=>import("./index-DKs2lWDb.js"),[]),icon:()=>ye(()=>Promise.resolve().then(()=>X$),void 0),list:()=>ye(()=>import("./index-CtzIiGON.js"),__vite__mapDeps([263,264,265])),"list-item":()=>ye(()=>import("./index-ChUHMvrp.js"),__vite__mapDeps([266,265,267])),loader:()=>ye(()=>Promise.resolve().then(()=>F2),void 0),notice:()=>ye(()=>import("./index-BCL-ToTJ.js"),[])})}destroy(){this._unobserveRelatedFeatureObserver(),this._featureElementInfo=hr(this._featureElementInfo)}get displayShowAllButton(){const{showAllEnabled:t,featureCount:e,displayCount:i,state:r,allCategoriesCount:n}=this.viewModel;return!t&&r==="ready"&&(!!n&&(n>i||i===0)||!!e&&(e>i||i===0))}get displayListItems(){const{relatedFeatureViewModels:t,allCategoriesCount:e}=this.viewModel;return this.displayShowAllButton||!!t.length||!!e}get allItemsDescription(){const{messages:t}=this,{featureCount:e,allCategories:i,allCategoriesCount:r}=this.viewModel;return xo(t==null?void 0:t.numberRecords,{number:Qr(i?r:e)})}get description(){return this.viewModel.description}set description(t){this.viewModel.description=t}get title(){const{activeCategory:t,title:e}=this.viewModel;return(t==null?void 0:t.name)??e}set title(t){this.viewModel.title=t}castVisibleElements(t){return{...Tne,...t}}render(){var e;const{state:t}=this.viewModel;return G("div",{class:this.classes(Dp.base,Vt.widget)},(e=this._featureElementInfo)==null?void 0:e.render(),t==="loading"?this._renderLoading():t==="disabled"?this._renderRelationshipNotFound():this._renderRelatedFeatures())}async _selectCategory(t){const{flowItems:e,featureVisibleElements:i,viewModel:r}=this;e&&(r.activeCategory=t,r.showAllEnabled=!0,e.push(new pR({flowItems:e,featureVisibleElements:i,visibleElements:{title:!1,description:!1},viewModel:r})))}async _selectRecord(t){const{flowItems:e,featureVisibleElements:i}=this;if(!e)return;t.abilities={relationshipContent:!0};const{default:r}=await ye(()=>Promise.resolve().then(()=>hKe),void 0);e.push(new r({flowItems:e,flowType:this.flowType,viewModel:t,visibleElements:i}))}_showAllRecords(){const{flowItems:t}=this;if(!t)return;const{viewModel:e,featureVisibleElements:i}=this;e.showAllEnabled=!0;const r=new pR({flowItems:t,featureVisibleElements:i,visibleElements:{title:!1,description:!1},viewModel:e});t.push(r)}_renderStickyLoading(){return this.viewModel.state==="querying"?G("div",{class:Dp.stickySpinnerContainer,key:"sticky-loader"},this._renderLoadingIcon()):null}_renderLoadingIcon(){return G("calcite-loader",{inline:!0,label:""})}_renderLoading(){return G("div",{class:Dp.loadingSpinnerContainer,key:"loading-container"},this._renderLoadingIcon())}_renderShowAllIconNode(){return G("calcite-icon",{icon:"list",scale:"s",slot:"content-end"})}_renderChevronIconNode(){const t=Al(this.container)?"chevron-left":"chevron-right";return G("calcite-icon",{icon:t,scale:"s",slot:"content-end"})}_renderCategory(t){const{count:e,name:i,value:r}=t,n=Qr(e);return G("calcite-list-item",{class:Dp.listItem,disabled:!e,key:r,label:i,onCalciteListItemSelect:()=>this._selectCategory(t)},G("calcite-chip",{label:n,scale:"s",slot:"content-end"},n),this._renderChevronIconNode())}_renderRelatedFeature(t){var n;const{itemDescriptionFieldName:e}=this.viewModel,i=t.title;t.description=e&&((n=t.formattedAttributes)==null?void 0:n.global[e]);const r=t.state==="loading";return G("calcite-list-item",{class:this.classes(Dp.listItem,{[Dp.listItemHidden]:r}),description:Cg(t.description??""),key:t.uid,label:Cg(i),onCalciteListItemSelect:()=>this._selectRecord(t)},this._renderChevronIconNode())}_renderShowAllListItem(){var t;return this.displayShowAllButton?G("calcite-list-item",{description:this.allItemsDescription,key:"show-all-item",label:(t=this.messages)==null?void 0:t.showAll,onCalciteListItemSelect:()=>this._showAllRecords()},this._renderShowAllIconNode()):null}_renderNoRelatedFeaturesMessage(){var t;return G("calcite-notice",{icon:"information",key:"no-related-features-message",kind:"brand",open:!0,scale:"s",width:"full"},G("div",{slot:"message"},(t=this.messages)==null?void 0:t.noRelatedFeatures))}_renderFeatureObserver(){return G("div",{afterCreate:this._relatedFeatureIntersectionObserverCreated,bind:this,class:Dp.featureObserver,key:"feature-observer"})}_renderList(){var i;const{relatedFeatureViewModels:t,categories:e}=this.viewModel;return G("calcite-list",{displayMode:"flat",label:(i=this.messages)==null?void 0:i.relatedFeaturesList},(e==null?void 0:e.map((r=>this._renderCategory(r))))??t.toArray().map((r=>this._renderRelatedFeature(r))),this._renderShowAllListItem())}_renderRelatedFeatures(){const{displayListItems:t}=this,{state:e}=this.viewModel;return G("div",{class:this.classes(Dp.listContainer,{[Dp.listContainerQuerying]:e==="querying"}),key:"list-container"},t?this._renderList():e==="ready"?this._renderNoRelatedFeaturesMessage():null,this._renderStickyLoading(),this._renderFeatureObserver())}_renderRelationshipNotFound(){var t;return G("calcite-notice",{icon:"exclamation-mark-triangle",key:"relationship-not-found",kind:"danger",open:!0,scale:"s",width:"full"},G("div",{slot:"message"},(t=this.messages)==null?void 0:t.relationshipNotFound))}_setupRelatedFeatureViewModels(){const{relatedFeatureViewModels:t}=this.viewModel,e="related-feature-viewmodels";this.removeHandles(e),t==null||t.forEach((i=>{this.addHandles($e((()=>[i.title,i.state]),(()=>this.scheduleRender()),kt),e)})),this.scheduleRender()}_setupFeatureElementInfo(){var n;const{headingLevel:t,visibleElements:e}=this,i=e.description&&this.description,r=e.title&&this.title;(n=this._featureElementInfo)==null||n.set({description:i,title:r,headingLevel:t})}async _handleRelatedFeatureObserverChange(){this._unobserveRelatedFeatureObserver();const{state:t,showAllEnabled:e}=this.viewModel;await s2(0),this._relatedFeatureIntersectionObserverNode&&t==="ready"&&e&&this._relatedFeatureIntersectionObserver.observe(this._relatedFeatureIntersectionObserverNode)}_relatedFeatureIntersectionObserverCreated(t){this._relatedFeatureIntersectionObserverNode=t}_unobserveRelatedFeatureObserver(){this._relatedFeatureIntersectionObserverNode&&this._relatedFeatureIntersectionObserver.unobserve(this._relatedFeatureIntersectionObserverNode)}};u([h()],xs.prototype,"_relatedFeatureIntersectionObserverNode",void 0),u([h({readOnly:!0})],xs.prototype,"displayShowAllButton",null),u([h({readOnly:!0})],xs.prototype,"displayListItems",null),u([h({readOnly:!0})],xs.prototype,"allItemsDescription",null),u([h()],xs.prototype,"description",null),u([h()],xs.prototype,"featureVisibleElements",void 0),u([h()],xs.prototype,"flowItems",void 0),u([h()],xs.prototype,"flowType",void 0),u([h()],xs.prototype,"headingLevel",void 0),u([h()],xs.prototype,"title",null),u([h({type:mi})],xs.prototype,"viewModel",void 0),u([h(),nn("esri/widgets/Feature/t9n/Feature")],xs.prototype,"messages",void 0),u([h(),nn("esri/t9n/common")],xs.prototype,"messagesCommon",void 0),u([h()],xs.prototype,"visibleElements",void 0),u([yi("visibleElements")],xs.prototype,"castVisibleElements",null),xs=pR=u([V("esri.widgets.Feature.FeatureRelationship")],xs);let ux=class extends tt{constructor(e){super(e),this.title=!0,this.description=!0}};u([h({type:Boolean,nonNullable:!0})],ux.prototype,"title",void 0),u([h({type:Boolean,nonNullable:!0})],ux.prototype,"description",void 0),ux=u([V("esri.widgets.Feature.FeatureUtilityNetworkAssociations.VisibleElements")],ux);const Ene={assetGroup:"assetgroup",assetType:"assettype"};function cKe(t){var a;const{attributes:e,sourceLayer:i}=t;if(!e||!i)return"";const r="displayField"in i?i.displayField:null,n=r!=null?e[r]:null,s=n!=null?n.toString():null,o=(a=t.getObjectId())==null?void 0:a.toString();return s||o||""}const Ine=100;let di=class extends bt.ClonableMixin(dm.IdentifiableMixin(tt)){constructor(e){super(e),this._loaded=!1,this._queryAbortController=null,this._queryPageAbortController=null,this._queryFeatureCountAbortController=null,this.networkSourceIdsInUse=new Set,this.source="popup",this.description=null,this.graphic=null,this.layer=null,this.map=null,this.featureCount=0,this.associationTypes=null,this.showAllEnabled=!1,this.title=null,this.attachmentsFeatureCount=0,this.structureFeatureCount=0,this.contentFeatureCount=0,this.containerFeatureCount=0,this.connectivityFeatureCount=0,this._queryOpenAssociationType=async()=>{this.activeAssociationType&&await this._queryDebounced(this.activeAssociationType)},this._cancelQuery=()=>{const{_queryAbortController:i}=this;i&&i.abort(),this._queryAbortController=null},this._cancelQueryFeatureCount=()=>{const{_queryFeatureCountAbortController:i}=this;i&&i.abort(),this._queryFeatureCountAbortController=null},this._queryController=async i=>{this._cancelQuery();const r=new AbortController;this._queryAbortController=r,await Wu(this._query(i)),this._queryAbortController===r&&(this._queryAbortController=null)},this._queryFeatureCountController=async()=>{this._loaded=!1,this._cancelQueryFeatureCount();const i=new AbortController;this._queryFeatureCountAbortController=i,await Wu(this._queryFeatureCount()),this._queryFeatureCountAbortController===i&&(this._queryFeatureCountAbortController=null),this._loaded=!0},this._queryDebounced=Zu(this._queryController,Ine),this._queryFeatureCountDebounced=Zu(this._queryFeatureCountController,Ine)}initialize(){this.addHandles([$e((()=>[this.graphic,this.layer,this.map,this.associationTypes,this.objectId,this.globalId,this.canQuery]),(()=>this.refresh()),kt),$e((()=>this.activeAssociationType),(e=>this._queryDebounced(e)),kt)])}destroy(){this._cancelQuery(),this._cancelQueryFeatureCount(),this._destroyAssociatedFeatureViewModels()}get supportsCacheHint(){var e,i,r;return!!((r=(i=(e=this.layer)==null?void 0:e.capabilities)==null?void 0:i.query)!=null&&r.supportsCacheHint)}get canLoad(){return!!this.map&&!!this.associationTypes&&typeof this.globalId=="string"}get canQuery(){var i,r;const e=(r=(i=this.layer)==null?void 0:i.capabilities)==null?void 0:r.query;return!!this.associationTypes&&typeof this.globalId=="string"&&!!(e!=null&&e.supportsPagination)}set displayCount(e){this._set("displayCount",Math.max(e??3,0))}get displayCount(){return this._get("displayCount")}get objectId(){var e,i;return(this.objectIdField&&((i=(e=this.graphic)==null?void 0:e.attributes)==null?void 0:i[this.objectIdField]))??null}get objectIdField(){var e;return((e=this.layer)==null?void 0:e.objectIdField)||null}get globalId(){var e,i;return(this.globalIdField&&((i=(e=this.graphic)==null?void 0:e.attributes)==null?void 0:i[this.globalIdField]))??null}get globalIdField(){const{layer:e}=this;return e==null?void 0:e.globalIdField}get activeAssociationType(){return this._get("activeAssociationType")}set activeAssociationType(e){e&&!this.associationTypes.includes(e)||this._set("activeAssociationType",e)}get state(){const{_queryAbortController:e,_queryFeatureCountAbortController:i,_queryPageAbortController:r,canQuery:n,_loaded:s,canLoad:o,source:a}=this;return i||o&&!s?"loading":e||r?"querying":!n||a==="popup"&&this.featureCount===0?"disabled":"ready"}get utilityNetwork(){const{layer:e,map:i}=this;if(!(e!=null&&e.loaded)||!i)return null;const r=fh(e)?e.parent:e;return K0e(i,r)}get attachmentsAssociations(){return this._get("attachmentsAssociations")||new Ze}get structureAssociations(){return this._get("structureAssociations")||new Ze}get contentAssociations(){return this._get("contentAssociations")||new Ze}get containerAssociations(){return this._get("containerAssociations")||new Ze}get connectivityAssociations(){return this._get("connectivityAssociations")||new Ze}get associationFeatures(){return this._get("associationFeatures")||new fC}get associationViewModels(){return this._get("associationViewModels")||new Map}async refresh(){await this._queryFeatureCountDebounced(),await this._queryOpenAssociationType()}getFeatureCountForAssociationType(e){switch(e){case"attachment":return this.attachmentsFeatureCount;case"structure":return this.structureFeatureCount;case"content":return this.contentFeatureCount;case"container":return this.containerFeatureCount;case"connectivity":return this.connectivityFeatureCount}}_destroyAssociatedFeatureViewModels(){this.associationViewModels.forEach((e=>e.destroyAll()))}async _loadUtiltyNetworks(){var r;const e=this.map;if(!e)return;await Promise.allSettled(((r=e.utilityNetworks)==null?void 0:r.map((async n=>{await n.load()})))??[]);const i=this.utilityNetwork;if(i){const n=s=>{if("layerId"in s&&i.isUtilityLayer(s)){const o=i.getSourceIdByLayerId(s.layerId);o!==null&&this.networkSourceIdsInUse.add(o)}};this._set("networkSourceIdsInUse",new Set),e.allLayers.forEach(n),e.allTables.forEach(n)}}async _findLayersBySourceId(e){const{utilityNetwork:i,map:r}=this,n=c=>{const d=c;return c.url&&d.layerId===s?c.url.replace(/\/\d+$/,"")===(i==null?void 0:i.featureServiceUrl):!1};await(i==null?void 0:i.load());const s=i.getLayerIdBySourceId(e),o=r.allLayers.filter(n),a=r.allTables.filter(n),l=o.concat(a).toArray();return await Promise.allSettled(l.map((c=>c.load()))),l}_clearAssociations(){this.attachmentsAssociations.removeAll(),this.structureAssociations.removeAll(),this.contentAssociations.removeAll(),this.containerAssociations.removeAll(),this.connectivityAssociations.removeAll()}_clearFeatures(){this.associationFeatures.forEach((e=>e.removeAll())),this.associationFeatures.clear()}_getAssociationsByType(e){switch(e){case"attachment":return this.attachmentsAssociations;case"structure":return this.structureAssociations;case"connectivity":return this.connectivityAssociations;case"container":return this.containerAssociations;case"content":return this.contentAssociations}}async _queryLayer(e,i,r,n,s){const o=this._getFeatureQueryWhereClause(e,i,r,n),a=new dt({where:o,outFields:["*"],cacheHint:this.supportsCacheHint}),l=jn.fromJSON(await aH(e,a,s));return l.features.forEach((c=>{c.layer=c.sourceLayer=yU(e)?e.findSublayerForFeature(c):e})),l.features}async _createAssociationFeatureObjects(e,i,r,n,s,o){if(e.length===0)return[];const a=new Map;for(const[c,d]of i){const f=await this._findLayersBySourceId(c);for(const y of f)(await this._queryLayer(y,d,n,s,o)).forEach((g=>{if(this.source==="popup"?g.sourceLayer&&g.getEffectivePopupTemplate():g.sourceLayer){const b=a.get(g.attributes[y.globalIdField])??[];b.push(g),a.set(g.attributes[y.globalIdField],b)}}))}const l=[];return await Promise.all(e.toArray().map((async c=>{const{fromNetworkElement:d,toNetworkElement:f}=c,y=d.globalId===r?f:d,g=a.get(y.globalId)??[];await Promise.all(g.map((async b=>{var E,C;const _=(C=(E=this.utilityNetwork)==null?void 0:E.getTerminalById(y==null?void 0:y.terminalId))==null?void 0:C.name,x=b.sourceLayer&&"getFeatureTitle"in b.sourceLayer?await b.sourceLayer.getFeatureTitle(b):cKe(b);l.push({title:x,feature:b,association:c,terminalName:_})})))}))),l}_parseFeatureObjects(e,i){const r=new Map;e.forEach((n=>{const s=n==null?void 0:n.feature,o=s.sourceLayer;lm(r,o,(()=>new Ze)).add(n)}));for(const[n,s]of r)this._sortFeatureObjectsByTitle(s),i.set(n,s)}_sortFeatureObjectsByTitle(e){e.sort(this._compareByFeatureTitle)}_compareByFeatureTitle(e,i){return e.title.localeCompare(i.title,void 0,{numeric:!0})}async _queryAssociations(e){const{layer:i,globalId:r,associationTypes:n,utilityNetwork:s,canQuery:o}=this;if(await Promise.allSettled([i==null?void 0:i.load(),s==null?void 0:s.load()]),this._clearAssociations(),!(o&&i&&n&&s&&r))return;const a=fh(i)?i.parent:i,l=new Yo({globalId:r,networkSourceId:s.getSourceIdByLayerId(a.layerId)}),c=new Set;n.forEach((b=>{switch(b.type){case"attachment":case"structure":c.add("attachment");break;case"container":case"content":c.add("containment");break;case"connectivity":c.add("connectivity"),c.add("junction-junction-connectivity"),c.add("junction-edge-from-connectivity"),c.add("junction-edge-midspan-connectivity"),c.add("junction-edge-to-connectivity")}}));const d=await(s==null?void 0:s.queryAssociations({elements:[l],types:Array.from(c)},{signal:e==null?void 0:e.signal})),f=new Map,y=new Map;n.forEach((b=>{y.set(b.type,b),f.set(b.type,[])})),d.forEach((b=>{var E,C,k,O,D,B;const{toNetworkElement:_,fromNetworkElement:x}=b;switch(b.associationType){case"connectivity":case"junction-junction-connectivity":case"junction-edge-from-connectivity":case"junction-edge-midspan-connectivity":case"junction-edge-to-connectivity":if((x==null?void 0:x.globalId)===r){if(this._shouldDiscardNetworkElement(_,"connectivity",y))break;(E=f.get("connectivity"))==null||E.push(_.globalId)}else{if(this._shouldDiscardNetworkElement(x,"connectivity",y))break;(C=f.get("connectivity"))==null||C.push(x.globalId)}this.connectivityAssociations.add(b);break;case"containment":if((x==null?void 0:x.globalId)===r){if(this._shouldDiscardNetworkElement(_,"content",y))break;(k=f.get("content"))==null||k.push(_.globalId),this.contentAssociations.add(b)}else{if(this._shouldDiscardNetworkElement(x,"container",y))break;(O=f.get("container"))==null||O.push(x.globalId),this.containerAssociations.add(b)}break;case"attachment":if((x==null?void 0:x.globalId)===r){if(this._shouldDiscardNetworkElement(_,"attachment",y))break;(D=f.get("attachment"))==null||D.push(_.globalId),this.attachmentsAssociations.add(b)}else{if(this._shouldDiscardNetworkElement(x,"structure",y))break;(B=f.get("structure"))==null||B.push(x.globalId),this.structureAssociations.add(b)}}}));const g=n.map((async b=>{const{associatedNetworkSourceId:_,associatedAssetGroup:x,associatedAssetType:E}=b,C=f.get(b.type),k=x!=null?await this._countAssociatedFeatures(_,C,x,E,e):C.length;switch(b.type){case"attachment":this._set("attachmentsFeatureCount",k);break;case"structure":this._set("structureFeatureCount",k);break;case"content":this._set("contentFeatureCount",k);break;case"container":this._set("containerFeatureCount",k);break;case"connectivity":this._set("connectivityFeatureCount",k)}}));await Promise.allSettled(g)}async _countAssociatedFeatureCount(e,i,r,n,s){const o=this._getFeatureQueryWhereClause(e,i,r,n);return e.queryFeatureCount({where:o,outFields:["*"],returnGeometry:!1},{signal:s==null?void 0:s.signal})}async _countAssociatedFeatures(e,i,r,n,s){if(i.length===0)return 0;const o=(await this._findLayersBySourceId(e)).map((async a=>this._countAssociatedFeatureCount(a,i,r,n,s)));return(await Promise.all(o)).reduce(((a,l)=>a+l),0)}async _queryAssociatedFeatures(e,i){const{layer:r,globalId:n,associationTypes:s,utilityNetwork:o,canQuery:a,associationFeatures:l}=this;if(await Promise.allSettled([r==null?void 0:r.load(),o==null?void 0:o.load()]),!(a&&r&&s&&o))return;const c=this._getAssociationsByType(e.type),{associatedAssetGroup:d,associatedAssetType:f}=e,y=new Map;c.forEach((b=>{const{fromNetworkElement:_,toNetworkElement:x}=b,{networkSourceId:E,elementGlobalId:C}=_.globalId===n?{networkSourceId:x.networkSourceId,elementGlobalId:x.globalId}:{networkSourceId:_.networkSourceId,elementGlobalId:_.globalId},k=y.get(E)||[];k.push(C),y.set(E,k)}));const g=await this._createAssociationFeatureObjects(c,y,n,d,f,i);this._parseFeatureObjects(g,l)}async _queryFeatureCount(){await this._loadUtiltyNetworks();const{_queryFeatureCountAbortController:e,canQuery:i}=this;i?(await this._queryAssociations(e),this._set("featureCount",this.attachmentsFeatureCount+this.structureFeatureCount+this.contentFeatureCount+this.containerFeatureCount+this.connectivityFeatureCount)):this._set("featureCount",0)}async _query(e){if(!e)return;await this._loadUtiltyNetworks();const{_queryAbortController:i}=this;this._destroyAssociatedFeatureViewModels(),this._clearFeatures(),this.featureCount!==0&&(this.destroyed||await this._queryAssociatedFeatures(e,{signal:i==null?void 0:i.signal}))}_shouldDiscardNetworkElement(e,i,r){var l;if(!e)return!1;const{networkSourceIdsInUse:n}=this,{networkSourceId:s}=e,o=(l=r.get(i))==null?void 0:l.associatedNetworkSourceId,a=n.has(s);return o!=null&&o!==s||!a}_getFeatureQueryWhereClause(e,i,r,n){const s=e.globalIdField,o=e.fieldsIndex.get(Ene.assetGroup),a=e.fieldsIndex.get(Ene.assetType),l=r!=null,c=n!=null;return[s?Zpe(s,i):null,l?`(${o==null?void 0:o.name} = ${r})`:null,l&&c?`(${a==null?void 0:a.name} = ${n})`:null].filter(Boolean).join(" AND ")}};u([h()],di.prototype,"_loaded",void 0),u([h()],di.prototype,"_queryAbortController",void 0),u([h()],di.prototype,"_queryPageAbortController",void 0),u([h()],di.prototype,"_queryFeatureCountAbortController",void 0),u([h({readOnly:!0})],di.prototype,"supportsCacheHint",null),u([h({readOnly:!0})],di.prototype,"canLoad",null),u([h({readOnly:!0})],di.prototype,"canQuery",null),u([h()],di.prototype,"networkSourceIdsInUse",void 0),u([h({constructOnly:!0})],di.prototype,"source",void 0),u([h()],di.prototype,"description",void 0),u([h({value:3})],di.prototype,"displayCount",null),u([h({type:qi})],di.prototype,"graphic",void 0),u([h()],di.prototype,"layer",void 0),u([h()],di.prototype,"map",void 0),u([h({readOnly:!0})],di.prototype,"objectId",null),u([h({readOnly:!0})],di.prototype,"objectIdField",null),u([h({readOnly:!0})],di.prototype,"globalId",null),u([h({readOnly:!0})],di.prototype,"globalIdField",null),u([h()],di.prototype,"featureCount",void 0),u([h()],di.prototype,"associationTypes",void 0),u([h()],di.prototype,"activeAssociationType",null),u([h()],di.prototype,"showAllEnabled",void 0),u([h()],di.prototype,"state",null),u([h()],di.prototype,"title",void 0),u([h({readOnly:!0})],di.prototype,"utilityNetwork",null),u([h({readOnly:!0})],di.prototype,"attachmentsFeatureCount",void 0),u([h({readOnly:!0})],di.prototype,"structureFeatureCount",void 0),u([h({readOnly:!0})],di.prototype,"attachmentsAssociations",null),u([h({readOnly:!0})],di.prototype,"structureAssociations",null),u([h({readOnly:!0})],di.prototype,"contentFeatureCount",void 0),u([h({readOnly:!0})],di.prototype,"containerFeatureCount",void 0),u([h({readOnly:!0})],di.prototype,"contentAssociations",null),u([h({readOnly:!0})],di.prototype,"containerAssociations",null),u([h({readOnly:!0})],di.prototype,"connectivityFeatureCount",void 0),u([h({readOnly:!0})],di.prototype,"connectivityAssociations",null),u([h({readOnly:!0})],di.prototype,"associationFeatures",null),u([h({readOnly:!0})],di.prototype,"associationViewModels",null),di=u([V("esri.widgets.support.UtilityNetworkAssociations.FeatureUtilityNetworkAssociationsViewModel")],di);const T9="esri-feature-utility-network-associations",Cne=`${T9}__loading-container`,aA={base:T9,listContainer:`${T9}__list`,loadingContainer:Cne,loadingContainerSticky:`${Cne}--sticky`};let Zo=class extends Zi{constructor(e,i){super(e,i),this._featureElementInfo=null,this.onSelectAssociationType=()=>{},this.flowType="feature-utility-network-associations",this.flowItems=null,this.parentFeatureViewModel=null,this.headingLevel=5,this.viewModel=new di,this.messages=null,this.messagesCommon=null,this.visibleElements=new ux}initialize(){this._featureElementInfo=new gh,this.addHandles([$e((()=>[this.viewModel.description,this.viewModel.title,this.headingLevel]),(()=>this._setupFeatureElementInfo()),kt)])}loadDependencies(){return zl({icon:()=>ye(()=>Promise.resolve().then(()=>X$),void 0),list:()=>ye(()=>import("./index-CtzIiGON.js"),__vite__mapDeps([263,264,265])),"list-item":()=>ye(()=>import("./index-ChUHMvrp.js"),__vite__mapDeps([266,265,267])),loader:()=>ye(()=>Promise.resolve().then(()=>F2),void 0),notice:()=>ye(()=>import("./index-BCL-ToTJ.js"),[])})}destroy(){this._featureElementInfo=hr(this._featureElementInfo)}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}render(){var i;const{state:e}=this.viewModel;return G("div",{class:this.classes(aA.base,Vt.widget)},(i=this._featureElementInfo)==null?void 0:i.render(),e==="loading"?this._renderLoading():e==="disabled"?this._renderAssociationNotFound():this._renderContent())}_renderStickyLoading(){return this.viewModel.state==="querying"?G("div",{class:aA.loadingContainerSticky,key:"sticky-loader"},this._renderLoadingIcon()):null}_renderLoadingIcon(){return G("calcite-loader",{inline:!0,label:this.messagesCommon.loading})}_renderLoading(){return G("div",{class:aA.loadingContainer,key:"loading-container"},this._renderLoadingIcon())}_renderAssociationNotFound(){var e;return G("calcite-notice",{icon:"information",key:"association-not-found",kind:"info",open:!0,scale:"s",width:"full"},G("div",{slot:"message"},(e=this.messages)==null?void 0:e.noAssociations))}_renderAssociationType(e){const{viewModel:i}=this,r=this._getAssociationTypeTitle(e);return G("calcite-list-item",{description:Cg(e.description),key:`association-type-${e.type}`,label:Cg(r),value:e.type,onCalciteListItemSelect:()=>this.onSelectAssociationType({viewModel:i,listType:e,title:r})},G("calcite-icon",{flipRtl:!0,icon:"chevron-right",scale:"s",slot:"content-end"}))}_renderAssociations(e){const{viewModel:i}=this;return i.source==="featureForm"||i.getFeatureCountForAssociationType(e.type)>0?this._renderAssociationType(e):void 0}_renderContent(){const{messages:e,viewModel:i}=this,{state:r,associationTypes:n}=i;return G("div",{class:aA.listContainer,key:"list-container"},r==="ready"?G("div",null,G("calcite-list",{displayMode:"flat",label:e==null?void 0:e.associationsList},n.map((s=>this._renderAssociations(s))))):null,this._renderStickyLoading())}_getAssociationTypeTitle(e){const{messages:i}=this;if(e.title)return e.title;switch(e.type){case"attachment":return i.associationsAttachments;case"connectivity":return i.associationsConnectivity;case"structure":return i.associationsStructure;case"content":return i.associationsContents;case"container":return i.associationsContainer}}_setupFeatureElementInfo(){var s;const{headingLevel:e,visibleElements:i}=this,r=i.description&&this.description,n=i.title&&this.title;(s=this._featureElementInfo)==null||s.set({description:r,title:n,headingLevel:e})}};u([h({constructOnly:!0})],Zo.prototype,"onSelectAssociationType",void 0),u([h()],Zo.prototype,"flowType",void 0),u([h()],Zo.prototype,"flowItems",void 0),u([h()],Zo.prototype,"parentFeatureViewModel",void 0),u([h()],Zo.prototype,"featureVisibleElements",void 0),u([h()],Zo.prototype,"description",null),u([h()],Zo.prototype,"headingLevel",void 0),u([h()],Zo.prototype,"title",null),u([h({type:di})],Zo.prototype,"viewModel",void 0),u([h(),nn("esri/widgets/Feature/t9n/Feature")],Zo.prototype,"messages",void 0),u([h(),nn("esri/t9n/common")],Zo.prototype,"messagesCommon",void 0),u([h({type:ux,nonNullable:!0})],Zo.prototype,"visibleElements",void 0),Zo=u([V("esri.widgets.Feature.FeatureUtilityNetworkAssociations")],Zo);let uKe=class{constructor(e,i){this.preLayerQueryCallback=e,this.preRequestCallback=i,this.preLayerQueryCallback||(this.preLayerQueryCallback=r=>{}),this.preRequestCallback||(this.preLayerQueryCallback=r=>{})}};var D1;const Mne=1,kne="content-view-models",Pne="relationship-view-models",dKe="association-view-models",Ane={attachmentsContent:!0,chartAnimation:!0,customContent:!0,expressionContent:!0,fieldsContent:!0,mediaContent:!0,textContent:!0,relationshipContent:!0,utilityNetworkAssociationsContent:!0};var Yb;let Gi=(Yb=class extends dm.IdentifiableMixin(tt){constructor(e){super(e),this._error=null,this._graphicChangedTask=null,this._evaluateExpressionAttributesTask=null,this._associationVMAbortController=null,this._expressionAttributes=null,this._graphicExpressionAttributes=null,this.abilities={...Ane},this.content=null,this.contentViewModels=[],this.description=null,this.defaultPopupTemplateEnabled=!1,this.formattedAttributes=null,this.lastEditInfo=null,this.location=null,this.relatedInfos=new Map,this.title="",this.view=null,this._graphicChangedThrottled=yM(this._graphicChanged,(()=>this.notifyChange("waitingForContent")),Mne,this),this._isAllowedContentType=i=>{const{abilities:r}=this;return i.type==="attachments"&&!!r.attachmentsContent||i.type==="custom"&&!!r.customContent||i.type==="fields"&&!!r.fieldsContent||i.type==="media"&&!!r.mediaContent||i.type==="text"&&!!r.textContent||i.type==="expression"&&!!r.expressionContent||i.type==="relationship"&&!!r.relationshipContent||i.type==="utility-network-associations"&&!!r.utilityNetworkAssociationsContent},this._evaluateExpressionAttributesThrottled=yM(this._evaluateExpressionAttributes,(()=>this.notifyChange("waitingForContent")),Mne,this),this.addHandles([$e((()=>[this.graphic,this._effectivePopupTemplate,this.abilities,this.timeZone]),(()=>this._graphicChangedThrottled()),kt),Sn((()=>{var n,s,o,a,l,c,d;if(!((n=this._graphicChangedTask)!=null&&n.finished)||this._graphicChangedTask.value==null)return null;const i=this._graphicChangedTask.value,r=(s=i==null?void 0:i.expressionInfos)==null?void 0:s.dependencies;return[i,r!=null&&r.has("view-scale")?(o=this.view)==null?void 0:o.scale:null,r!=null&&r.has("view-time-extent")?(l=(a=this.view)==null?void 0:a.timeExtent)==null?void 0:l.start:null,r!=null&&r.has("view-time-extent")?(d=(c=this.view)==null?void 0:c.timeExtent)==null?void 0:d.end:null]}),(([i])=>this._evaluateExpressionAttributesThrottled(i)))])}initialize(){this.addHandles([this._graphicChangedThrottled,this._evaluateExpressionAttributesThrottled])}destroy(){this._clear(),this._graphicChangedTask=Eo(this._graphicChangedTask),this._evaluateExpressionAttributesTask=Eo(this._evaluateExpressionAttributesTask),this._error=null,this.graphic=null,this._destroyContentViewModels(),this.relatedInfos.clear()}get _effectivePopupTemplate(){return this.graphic!=null?this.graphic.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled):null}get _fieldInfoMap(){return q0e(w9(this._effectivePopupTemplate),this._sourceLayer)}get _sourceLayer(){return LH(this.graphic)}castAbilities(e){return{...Ane,...e}}get isFeatureFromTable(){var e;return((e=this._sourceLayer)==null?void 0:e.isTable)||!1}get state(){return this.graphic?this._error?"error":this.waitingForContent?"loading":"ready":"disabled"}set graphic(e){this._set("graphic",(e==null?void 0:e.clone())??null)}get spatialReference(){var e;return((e=this.view)==null?void 0:e.spatialReference)??null}set spatialReference(e){this._override("spatialReference",e)}get timeZone(){var e;return((e=this.view)==null?void 0:e.timeZone)??Ya}set timeZone(e){this._overrideIfSome("timeZone",e)}get map(){var e;return((e=this.view)==null?void 0:e.map)||null}set map(e){this._override("map",e)}get waitingForContent(){const{_graphicChangedThrottled:e,_evaluateExpressionAttributesThrottled:i,_graphicChangedTask:r,_evaluateExpressionAttributesTask:n,_associationVMAbortController:s}=this;return e.hasPendingUpdates()||i.hasPendingUpdates()||r!=null&&!r.finished||n!=null&&!n.finished||!!s}setActiveMedia(e,i){const r=this.contentViewModels[e];r instanceof Er&&r.setActiveMedia(i)}nextMedia(e){const i=this.contentViewModels[e];i instanceof Er&&i.next()}previousMedia(e){const i=this.contentViewModels[e];i instanceof Er&&i.previous()}async updateGeometry(){var a;const{graphic:e,spatialReference:i,_sourceLayer:r}=this;await(r==null?void 0:r.load());const n=r==null?void 0:r.objectIdField;if(!n||!e||!r)return;const s=(a=e==null?void 0:e.attributes)==null?void 0:a[n];if(s==null)return;const o=[s];if(!e.geometry){const l=await DH({layer:r,graphic:e,outFields:[],objectIds:o,returnGeometry:!0,spatialReference:i}),c=l==null?void 0:l.geometry;c&&(e.geometry=c)}}_clear(){this._set("title",""),this._set("content",null),this._set("formattedAttributes",null)}_graphicChanged(){this._evaluateExpressionAttributesTask=Eo(this._evaluateExpressionAttributesTask),this._graphicChangedTask=Eo(this._graphicChangedTask),this._graphicChangedTask=Fg((async e=>{this._error=null,this._clear();const{graphic:i}=this;try{if(!i)return null;const{_sourceLayer:r,_effectivePopupTemplate:n}=this,s=this.spatialReference;await W0e({graphic:i,popupTemplate:n,layer:r,spatialReference:s},{signal:e});const[{value:o},{value:a}]=await im([this._getContent(),this._getTitle()]),[,{value:l}]=await im([this._checkForRelatedFeatures({signal:e}),oKe(n==null?void 0:n.expressionInfos,i)]);return{expressionInfos:l,content:o,title:a}}catch(r){throw Tn(r)||(this._error=r,Ie.getLogger(this).error("error","The popupTemplate could not be displayed for this feature.",{error:r,graphic:i,popupTemplate:this._effectivePopupTemplate})),r}}))}_compileContentElement(e,i){return e.type==="attachments"?this._compileAttachments(e,i):e.type==="custom"?this._compileCustom(e,i):e.type==="fields"?this._compileFields(e,i):e.type==="media"?this._compileMedia(e,i):e.type==="text"?this._compileText(e,i):e.type==="expression"?this._compileExpression(e,i):e.type==="relationship"?this._compileRelationship(e,i):e.type==="utility-network-associations"?this._compileUtilityNetworkAssociation(e,i):void 0}_compileContent(e){if(this._destroyContentViewModels(),this.graphic)return Array.isArray(e)?e.filter(this._isAllowedContentType).map(((i,r)=>this._compileContentElement(i,r))).filter(Kr):typeof e=="string"?this._compileText(new nd({text:e}),0).text:e}_destroyContentViewModels(){this.removeHandles(Pne),this.removeHandles(kne),this.contentViewModels.forEach((e=>e&&!e.destroyed&&e.destroy())),this._set("contentViewModels",[])}_matchesFeature(e,i){var s;const r=(s=e==null?void 0:e.graphic)==null?void 0:s.getObjectId(),n=i==null?void 0:i.getObjectId();return r!=null&&n!=null&&r===n}_setRelatedFeaturesViewModels({relatedFeatureViewModels:e,relatedFeatures:i,map:r}){const{view:n,spatialReference:s,timeZone:o}=this;i==null||i.filter(Boolean).forEach((a=>{e.some((l=>this._matchesFeature(l,a)))||e.add(new D1({abilities:{relationshipContent:!1},map:r,view:n,spatialReference:s,timeZone:o,graphic:a}))})),e.forEach((a=>{(i==null?void 0:i.find((c=>this._matchesFeature(a,c))))||e.remove(a)}))}_setExpressionContentVM(e,i){const r=this.formattedAttributes,{contentElement:n,contentElementViewModel:s}=e,o=n==null?void 0:n.type;s&&o&&(o==="fields"&&(this._createFieldsFormattedAttributes({contentElement:n,contentElementIndex:i,formattedAttributes:r}),s.set(this._createFieldsVMParams(n,i))),o==="media"&&(this._createMediaFormattedAttributes({contentElement:n,contentElementIndex:i,formattedAttributes:r}),s.set(this._createMediaVMParams(n,i))),o==="text"&&s.set(this._createTextVMParams(n)))}_compileRelationship(e,i){const{displayCount:r,orderByFields:n,relationshipId:s,title:o,description:a}=e,{_sourceLayer:l,graphic:c,map:d}=this;if(!L2(l))return;const f=new mi({displayCount:r,graphic:c,orderByFields:n,relationshipId:s,layer:l,map:d,...this._compileTitleAndDesc({title:o,description:a})});return this.contentViewModels[i]=f,this.addHandles(eo((()=>f.relatedFeatures),"change",(()=>this._setRelatedFeaturesViewModels(f))),Pne),e}_matchesGlobalFeature(e,i){const r=e==null?void 0:e.association.globalId,n=i==null?void 0:i.association.globalId;return r!=null&&n!=null&&r===n}async _setUpUtilityNetworkAssociationsViewModels(e,i,r){const{view:n,spatialReference:s,timeZone:o}=this;e.forEach(((a,l)=>{const c=i.get(l);c?a.forEach((d=>{c.find((f=>this._matchesGlobalFeature(d,f)))||(a.remove(d),a.length===0&&e.delete(l))})):(a.removeAll(),e.delete(l))})),i.forEach(((a,l)=>{const c=e.get(l)||new Ze;a==null||a.filter(Boolean).forEach((d=>{if(!c.some((f=>this._matchesGlobalFeature(f,d)))){const{association:f,feature:y,terminalName:g,title:b}=d;c.add({title:b,association:f,featureViewModel:new D1({abilities:{utilityNetworkAssociationsContent:!1},map:r,view:n,spatialReference:s,timeZone:o,graphic:y}),terminalName:g})}})),e.set(l,c)})),this._sortListObjectsByTitle(e)}async _sortListObjectsByTitle(e){for(const i of e.values())i.sort(this._compareByFeatureTitle)}_compareByFeatureTitle(e,i){return e.title.localeCompare(i.title,void 0,{numeric:!0})}_compileUtilityNetworkAssociation(e,i){const{displayCount:r,title:n,description:s,associationTypes:o}=e,{_sourceLayer:a,graphic:l,map:c}=this;if(!U0e(a))return;const d=new di({graphic:l,displayCount:r,associationTypes:o,layer:a,map:c,...this._compileTitleAndDesc({title:n,description:s})});return this.contentViewModels[i]=d,this.addHandles([$e((()=>d.associationFeatures.values()),(()=>this._setUpUtilityNetworkAssociationsViewModels(d.associationViewModels,d.associationFeatures,d.map)))],dKe),e}_compileExpression(e,i){const{expressionInfo:r}=e,{graphic:n,map:s,spatialReference:o,view:a,location:l}=this,c=new Ws({expressionInfo:r,graphic:n,interceptor:D1.interceptor,map:s,spatialReference:o,view:a,location:l});return this.contentViewModels[i]=c,this.addHandles($e((()=>c.contentElementViewModel),(()=>this._setExpressionContentVM(c,i)),kt),kne),e}_compileAttachments(e,i){const{graphic:r}=this,{description:n,title:s,orderByFields:o}=e;return this.contentViewModels[i]=new fb({graphic:r,orderByFields:o,...this._compileTitleAndDesc({title:s,description:n})}),e}_compileCustom(e,i){const{graphic:r}=this,{creator:n,destroyer:s}=e;return this.contentViewModels[i]=new Nu({graphic:r,creator:n,destroyer:s}),e}_compileTitleAndDesc({title:e,description:i}){const{_fieldInfoMap:r,_sourceLayer:n,graphic:s,formattedAttributes:o}=this,a=s==null?void 0:s.attributes,l=this._expressionAttributes,c=o.global;return{title:hg({attributes:a,fieldInfoMap:r,globalAttributes:c,expressionAttributes:l,layer:n,text:e}),description:hg({attributes:a,fieldInfoMap:r,globalAttributes:c,expressionAttributes:l,layer:n,text:i})}}_createFieldsVMParams(e,i){const r=this._effectivePopupTemplate,n=this.formattedAttributes,s={...n==null?void 0:n.global,...n==null?void 0:n.content[i]},o=(e==null?void 0:e.fieldInfos)||(r==null?void 0:r.fieldInfos),a=o==null?void 0:o.filter((({fieldName:f})=>!!f&&(KN(f)||Xh(f)||s.hasOwnProperty(f)))),l=r==null?void 0:r.expressionInfos,{description:c,title:d}=e;return{attributes:s,expressionInfos:l,fieldInfos:a,...this._compileTitleAndDesc({title:d,description:c})}}_compileFields(e,i){const r=e.clone(),n=new bc(this._createFieldsVMParams(e,i));return this.contentViewModels[i]=n,r.fieldInfos=n.formattedFieldInfos.slice(),r}_createMediaVMParams(e,i){const{abilities:r,graphic:n,_fieldInfoMap:s,_effectivePopupTemplate:o,relatedInfos:a,_sourceLayer:l,_expressionAttributes:c}=this,d=this.formattedAttributes,f=(n==null?void 0:n.attributes)??{},{description:y,mediaInfos:g,title:b}=e;return{abilities:{chartAnimation:r.chartAnimation},activeMediaInfoIndex:e.activeMediaInfoIndex||0,attributes:f,isAggregate:n==null?void 0:n.isAggregate,layer:l,fieldInfoMap:s,formattedAttributes:{...d==null?void 0:d.global,...d==null?void 0:d.content[i]},expressionAttributes:c,mediaInfos:g,popupTemplate:o,relatedInfos:a,...this._compileTitleAndDesc({title:b,description:y})}}_compileMedia(e,i){const r=e.clone(),n=new Er(this._createMediaVMParams(e,i));return r.mediaInfos=n.formattedMediaInfos.slice(),this.contentViewModels[i]=n,r}_createTextVMParams(e){var o;const{graphic:i,_fieldInfoMap:r,_sourceLayer:n,_expressionAttributes:s}=this;if(e&&e.text){const a=(i==null?void 0:i.attributes)??{},l=((o=this.formattedAttributes)==null?void 0:o.global)??{};e.text=hg({attributes:a,fieldInfoMap:r,globalAttributes:l,expressionAttributes:s,layer:n,text:e.text})}return{graphic:i,creator:e.text}}_compileText(e,i){const r=e.clone();return this.contentViewModels[i]=new Nu(this._createTextVMParams(r)),r}_compileLastEditInfo(){const{_effectivePopupTemplate:e,_sourceLayer:i,graphic:r,timeZone:n}=this;if(!e)return;const{lastEditInfoEnabled:s}=e,o=i==null?void 0:i.editFieldsInfo;return s&&o?G0e(o,r==null?void 0:r.attributes,n,i):void 0}_compileTitle(e){var l;const{_fieldInfoMap:i,_sourceLayer:r,graphic:n,_expressionAttributes:s}=this,o=(n==null?void 0:n.attributes)??{},a=((l=this.formattedAttributes)==null?void 0:l.global)??{};return hg({attributes:o,fieldInfoMap:i,globalAttributes:a,expressionAttributes:s,layer:r,text:e})}async _getTitle(){const{_effectivePopupTemplate:e,graphic:i}=this;return i?gM({type:"title",value:e==null?void 0:e.title,event:{graphic:i}}):null}async _getContent(){const{_effectivePopupTemplate:e,graphic:i}=this;return i?gM({type:"content",value:e==null?void 0:e.content,event:{graphic:i}}):null}_evaluateExpressionAttributes({title:e,content:i,expressionInfos:r}){this._evaluateExpressionAttributesTask=Eo(this._evaluateExpressionAttributesTask),this._evaluateExpressionAttributesTask=Fg((async n=>{const{graphic:s,map:o,view:a,spatialReference:l,location:c}=this;try{if(!s)return;let d;if(r!=null){const f=[];for(const[y,g]of r.expressions.entries())g!=null?f.push(g.evaluate({graphic:s,interceptor:D1.interceptor,location:c,map:o,options:{signal:n},spatialReference:l,view:a}).then((b=>[y,JXe(b)])).catch((()=>[y,void 0]))):f.push(Promise.resolve([y,void 0]));d=Object.fromEntries(await Promise.all(f)),Wi(n)}this._expressionAttributes=d,this._graphicExpressionAttributes={...s.attributes,...d},this._set("formattedAttributes",this._createFormattedAttributes(i)),this._set("title",this._compileTitle(e)),this._set("lastEditInfo",this._compileLastEditInfo()||null),this._set("content",this._compileContent(i)||null)}catch(d){Tn(d)||(this._error=d,Ie.getLogger(this).error("error","The popupTemplate could not be displayed for this feature.",{error:d,graphic:s,popupTemplate:this._effectivePopupTemplate}))}}))}_createMediaFormattedAttributes({contentElement:e,contentElementIndex:i,formattedAttributes:r}){const{_effectivePopupTemplate:n,graphic:s,relatedInfos:o,_sourceLayer:a,_fieldInfoMap:l,_graphicExpressionAttributes:c,timeZone:d}=this;r.content[i]=lR({fieldInfos:n==null?void 0:n.fieldInfos,graphic:s,attributes:{...c,...e.attributes},layer:a,fieldInfoMap:l,relatedInfos:o,timeZone:d})}_createFieldsFormattedAttributes({contentElement:e,contentElementIndex:i,formattedAttributes:r}){if(e.fieldInfos){const{graphic:n,relatedInfos:s,_sourceLayer:o,_fieldInfoMap:a,_graphicExpressionAttributes:l,timeZone:c}=this;r.content[i]=lR({fieldInfos:e.fieldInfos,graphic:n,attributes:{...l,...e.attributes},layer:o,fieldInfoMap:a,relatedInfos:s,timeZone:c})}}_createFormattedAttributes(e){const{_effectivePopupTemplate:i,graphic:r,relatedInfos:n,_sourceLayer:s,_fieldInfoMap:o,_graphicExpressionAttributes:a,timeZone:l}=this,c=i==null?void 0:i.fieldInfos,d={global:lR({fieldInfos:c,graphic:r,attributes:a,layer:s,fieldInfoMap:o,relatedInfos:n,timeZone:l}),content:[]};return Array.isArray(e)&&e.forEach(((f,y)=>{f.type==="fields"&&this._createFieldsFormattedAttributes({contentElement:f,contentElementIndex:y,formattedAttributes:d}),f.type==="media"&&this._createMediaFormattedAttributes({contentElement:f,contentElementIndex:y,formattedAttributes:d})})),d}_checkForRelatedFeatures(e){const{graphic:i,_effectivePopupTemplate:r}=this;return this._queryRelatedInfos(i,w9(r),e)}async _queryRelatedInfos(e,i,r){const{relatedInfos:n,_sourceLayer:s}=this;n.clear();const o=(s==null?void 0:s.associatedLayer)!=null?await(s==null?void 0:s.associatedLayer.load(r)):s;if(!o||!e)return;const a=i.filter((d=>!!d.fieldName&&Xh(d.fieldName)));if(!(a!=null&&a.length))return;i.forEach((d=>this._configureRelatedInfo(d,o)));const l=await DXe({relatedInfos:n,layer:o},r);Object.keys(l).forEach((d=>{var g;const f=n.get(d.toString()),y=(g=l[d])==null?void 0:g.value;f&&y&&(f.layerInfo=y.data)}));const c=await zXe({graphic:e,relatedInfos:n,layer:o},r);Object.keys(c).forEach((d=>{var f;PXe((f=c[d])==null?void 0:f.value,n.get(d.toString()))}))}_configureRelatedInfo(e,i){const{relatedInfos:r}=this,n=dR(e.fieldName||"");if(!n)return;const{layerId:s,fieldName:o}=n;if(!s)return;const a=r.get(s.toString())||kXe(s,i);a&&(VXe({relatedInfo:a,fieldName:o,fieldInfo:e}),this.relatedInfos.set(s,a))}},D1=Yb,Yb.interceptor=new uKe(J0e,Y0e),Yb);u([h()],Gi.prototype,"_error",void 0),u([h()],Gi.prototype,"_graphicChangedTask",void 0),u([h()],Gi.prototype,"_evaluateExpressionAttributesTask",void 0),u([h()],Gi.prototype,"_associationVMAbortController",void 0),u([h({readOnly:!0})],Gi.prototype,"_effectivePopupTemplate",null),u([h({readOnly:!0})],Gi.prototype,"_fieldInfoMap",null),u([h({readOnly:!0})],Gi.prototype,"_sourceLayer",null),u([h()],Gi.prototype,"abilities",void 0),u([yi("abilities")],Gi.prototype,"castAbilities",null),u([h({readOnly:!0})],Gi.prototype,"content",void 0),u([h({readOnly:!0})],Gi.prototype,"contentViewModels",void 0),u([h()],Gi.prototype,"description",void 0),u([h({type:Boolean})],Gi.prototype,"defaultPopupTemplateEnabled",void 0),u([h({readOnly:!0})],Gi.prototype,"isFeatureFromTable",null),u([h({readOnly:!0})],Gi.prototype,"state",null),u([h({readOnly:!0})],Gi.prototype,"formattedAttributes",void 0),u([h({type:qi,value:null})],Gi.prototype,"graphic",null),u([h({readOnly:!0})],Gi.prototype,"lastEditInfo",void 0),u([h({type:_t})],Gi.prototype,"location",void 0),u([h({readOnly:!0})],Gi.prototype,"relatedInfos",void 0),u([h({type:et})],Gi.prototype,"spatialReference",null),u([h()],Gi.prototype,"timeZone",null),u([h({readOnly:!0})],Gi.prototype,"title",void 0),u([h()],Gi.prototype,"map",null),u([h({readOnly:!0})],Gi.prototype,"waitingForContent",null),u([h()],Gi.prototype,"view",void 0),Gi=D1=u([V("esri.widgets.Feature.FeatureViewModel")],Gi);const kd="esri-feature",Zr={base:kd,container:`${kd}__size-container`,title:`${kd}__title`,main:`${kd}__main-container`,contentNode:`${kd}__content-node`,contentNodeText:`${kd}__content-node--text`,contentElement:`${kd}__content-element`,text:`${kd}__text`,lastEditedInfo:`${kd}__last-edited-info`,loadingSpinnerContainer:`${kd}__loading-container`},Cbe=t=>{let e=class extends t{constructor(){super(...arguments),this.renderNodeContent=i=>ibe(i)&&!i.destroyed?G("div",{class:Zr.contentNode,key:i},i.render()):i instanceof HTMLElement?G("div",{afterCreate:this._attachToNode,bind:i,class:Zr.contentNode,key:i}):qJe(i)?G("div",{afterCreate:this._attachToNode,bind:i.domNode,class:Zr.contentNode,key:i}):null}_attachToNode(i){const r=this;i.appendChild(r)}};return e=u([V("esri.widgets.Feature.support.FeatureContentMixin")],e),e},Lne={title:!0,content:!0,lastEditedInfo:!0};let Wr=class extends Cbe(Zi){constructor(e,i){super(e,i),this._contentWidgets=[],this.flowType="feature",this.flowItems=null,this.headingLevel=2,this.messages=null,this.messagesCommon=null,this.visibleElements={...Lne},this.viewModel=new Gi}initialize(){this.addHandles($e((()=>{var e;return(e=this.viewModel)==null?void 0:e.contentViewModels}),(()=>this._setupContentWidgets()),kt))}loadDependencies(){return zl({notice:()=>ye(()=>import("./index-BCL-ToTJ.js"),[]),loader:()=>ye(()=>Promise.resolve().then(()=>F2),void 0)})}destroy(){this._destroyContentWidgets()}get graphic(){return this.viewModel.graphic}set graphic(e){this.viewModel.graphic=e}get defaultPopupTemplateEnabled(){return this.viewModel.defaultPopupTemplateEnabled}set defaultPopupTemplateEnabled(e){this.viewModel.defaultPopupTemplateEnabled=e}get isTable(){return this.viewModel.isFeatureFromTable}get icon(){return"polygon"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get location(){return this.viewModel.location}set location(e){this.viewModel.location=e}get spatialReference(){return this.viewModel.spatialReference}set spatialReference(e){this.viewModel.spatialReference=e}get timeZone(){return this.viewModel.timeZone}set timeZone(e){this.viewModel.timeZone=e}get title(){return this.viewModel.title}castVisibleElements(e){return{...Lne,...e}}get map(){return this.viewModel.map}set map(e){this.viewModel.map=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}setActiveMedia(e,i){return this.viewModel.setActiveMedia(e,i)}nextMedia(e){return this.viewModel.nextMedia(e)}previousMedia(e){return this.viewModel.previousMedia(e)}render(){const{state:e}=this.viewModel,i=G("div",{class:Zr.container,key:"container"},this._renderTitle(),e==="error"?this._renderError():e==="loading"?this._renderLoading():this._renderContentContainer());return G("div",{class:this.classes(Zr.base,Vt.widget)},i)}_renderError(){const{messagesCommon:e,messages:i,visibleElements:r}=this;return G("calcite-notice",{icon:"exclamation-mark-circle",kind:"danger",open:!0,scale:"s"},r.title?G("div",{key:"error-title",slot:"title"},e.errorMessage):null,G("div",{key:"error-message",slot:"message"},i.loadingError))}_renderLoading(){return G("div",{class:Zr.loadingSpinnerContainer,key:"loading-container"},G("calcite-loader",{inline:!0,label:""}))}_renderContentContainer(){const{visibleElements:e}=this;return e.content?G("div",{class:Zr.main},[this._renderContent(),this._renderLastEditInfo()]):null}_renderTitle(){const{visibleElements:e,title:i}=this;return e.title?G(zb,{class:Zr.title,innerHTML:i,level:this.headingLevel}):null}_renderContent(){const e=this.viewModel.content,i="content";if(!e)return null;if(Array.isArray(e))return e.length?G("div",{class:Zr.contentNode,key:`${i}-content-elements`},e.map(this._renderContentElement,this)):null;if(typeof e=="string"){const r=this._contentWidgets[0];return!r||r.destroyed?null:G("div",{class:this.classes(Zr.contentNode,Zr.contentNodeText),key:`${i}-content`},r.render())}return this.renderNodeContent(e)}_renderContentElement(e,i){var n;const{visibleElements:r}=this;if(typeof r.content!="boolean"&&!((n=r.content)!=null&&n[e.type]))return null;switch(e.type){case"attachments":return this._renderAttachments(i);case"custom":return this._renderCustom(e,i);case"fields":return this._renderFields(i);case"media":return this._renderMedia(i);case"text":return this._renderText(e,i);case"expression":return this._renderExpression(i);case"relationship":return this._renderRelationship(i);case"utility-network-associations":return this._renderAssociation(i);default:return null}}_renderAttachments(e){const i=this._contentWidgets[e];if(!i||i.destroyed)return null;const{state:r,attachmentInfos:n}=i.viewModel;return r==="loading"||n.length>0?G("div",{class:this.classes(Zr.contentElement),key:this._buildKey("attachments-element",e)},i.render()):null}_renderRelationship(e){const i=this._contentWidgets[e];return i&&!i.destroyed&&this.flowItems?G("div",{class:Zr.contentElement,key:this._buildKey("relationship-element",e)},i.render()):null}_renderAssociation(e){const i=this._contentWidgets[e];return i&&!i.destroyed&&this.flowItems?G("div",{class:Zr.contentElement,key:this._buildKey("utility-network-association-element",e)},i.render()):null}_renderExpression(e){const i=this._contentWidgets[e];return i&&!i.destroyed&&i.viewModel.contentElement?G("div",{class:Zr.contentElement,key:this._buildKey("expression-element",e)},i.render()):null}_renderCustom(e,i){const{creator:r}=e,n=this._contentWidgets[i];return!n||n.destroyed?null:r?G("div",{class:Zr.contentElement,key:this._buildKey("custom-element",i)},n.render()):null}_renderFields(e){const i=this._contentWidgets[e];return!i||i.destroyed?null:G("div",{class:Zr.contentElement,key:this._buildKey("fields-element",e)},i.render())}_renderMedia(e){const i=this._contentWidgets[e];return!i||i.destroyed?null:G("div",{class:Zr.contentElement,key:this._buildKey("media-element",e)},i.render())}_renderLastEditInfo(){const{visibleElements:e,messages:i}=this,{lastEditInfo:r}=this.viewModel;if(!r||!e.lastEditedInfo)return null;const{date:n,user:s}=r,o=r.type==="edit"?s?i.lastEditedByUser:i.lastEdited:s?i.lastCreatedByUser:i.lastCreated,a=xo(o,{date:n,user:s});return G("div",{class:this.classes(Zr.lastEditedInfo,Zr.contentElement),key:"edit-info-element"},a)}_renderText(e,i){const r=e.text,n=this._contentWidgets[i];return!n||n.destroyed?null:r?G("div",{class:this.classes(Zr.contentElement,Zr.text),key:this._buildKey("text-element",i)},n.render()):null}_buildKey(e,...i){var r,n;return`${e}__${((n=(r=this.viewModel)==null?void 0:r.graphic)==null?void 0:n.uid)||"0"}-${i.join("-")}`}_destroyContentWidget(e){e&&(e.viewModel=null,!e.destroyed&&e.destroy())}_destroyContentWidgets(){this._contentWidgets.forEach((e=>this._destroyContentWidget(e))),this._contentWidgets=[]}_setupContentWidgets(){this._destroyContentWidgets();const{headingLevel:e,visibleElements:i,flowItems:r,viewModel:n}=this,s=n==null?void 0:n.content,{contentViewModels:o}=n;if(Array.isArray(s))s.forEach(((a,l)=>{if(a.type==="attachments"&&(this._contentWidgets[l]=new Jd({displayType:a.displayType,headingLevel:i.title&&e<6?e+1:e,viewModel:o[l]})),a.type==="fields"&&(this._contentWidgets[l]=new pc({viewModel:o[l]})),a.type==="media"&&(this._contentWidgets[l]=new yo({viewModel:o[l]})),a.type==="text"&&(this._contentWidgets[l]=new jf({viewModel:o[l]})),a.type==="custom"&&(this._contentWidgets[l]=new jf({viewModel:o[l]})),a.type==="expression"&&(this._contentWidgets[l]=new hR({viewModel:o[l]})),a.type==="relationship"){const c=new xs({flowItems:r,featureVisibleElements:i,viewModel:o[l]});this._contentWidgets[l]=c}if(a.type==="utility-network-associations"){const c=async f=>{const{viewModel:y,listType:g,title:b}=f;if(!r)return;y.activeAssociationType=g;const{default:_}=await ye(()=>import("./FeatureUtilityNetworkAssociationList-DqWai0ZZ.js"),[]),x=new _({viewModel:y,parentFeatureViewModel:n,listType:g,title:b,featureVisibleElements:i,description:n.title,flowItems:r});r.push(x)},d=new Zo({flowItems:r,onSelectAssociationType:c,parentFeatureViewModel:n,featureVisibleElements:i,viewModel:o[l]});this._contentWidgets[l]=d}}),this);else{const a=o[0];a&&!a.destroyed&&(this._contentWidgets[0]=new jf({viewModel:a}))}this.scheduleRender()}};u([h()],Wr.prototype,"flowType",void 0),u([h()],Wr.prototype,"graphic",null),u([h()],Wr.prototype,"defaultPopupTemplateEnabled",null),u([h()],Wr.prototype,"flowItems",void 0),u([h()],Wr.prototype,"headingLevel",void 0),u([h({readOnly:!0})],Wr.prototype,"isTable",null),u([h()],Wr.prototype,"icon",null),u([h()],Wr.prototype,"label",null),u([h()],Wr.prototype,"location",null),u([h(),nn("esri/widgets/Feature/t9n/Feature")],Wr.prototype,"messages",void 0),u([h(),nn("esri/t9n/common")],Wr.prototype,"messagesCommon",void 0),u([h()],Wr.prototype,"spatialReference",null),u([h()],Wr.prototype,"timeZone",null),u([h({readOnly:!0})],Wr.prototype,"title",null),u([h()],Wr.prototype,"visibleElements",void 0),u([yi("visibleElements")],Wr.prototype,"castVisibleElements",null),u([h()],Wr.prototype,"map",null),u([h()],Wr.prototype,"view",null),u([h({type:Gi})],Wr.prototype,"viewModel",void 0),Wr=u([V("esri.widgets.Feature")],Wr);const hKe=Object.freeze(Object.defineProperty({__proto__:null,get default(){return Wr}},Symbol.toStringTag,{value:"Module"}));let jy=class extends ad.EventedAccessor{constructor(e){super(e),this.location=null,this.screenLocationEnabled=!1,this.view=null,this.addHandles([Sn((()=>{const i=this.screenLocationEnabled?this.view:null;return i?[i.size,i.type==="3d"?i.camera:i.viewpoint]:null}),(()=>this.notifyChange("screenLocation"))),$e((()=>this.screenLocation),((i,r)=>{i!=null&&r!=null&&this.emit("view-change")}))])}destroy(){this.view=null}get screenLocation(){const{location:e,view:i,screenLocationEnabled:r}=this,n=i==null?void 0:i.spatialReference,s=n?The(e,n).geometry:null;return r&&s&&(i!=null&&i.ready)?i.toScreen(s):null}};u([h()],jy.prototype,"location",void 0),u([h()],jy.prototype,"screenLocation",null),u([h()],jy.prototype,"screenLocationEnabled",void 0),u([h()],jy.prototype,"view",void 0),jy=u([V("esri.widgets.support.AnchorElementViewModel")],jy);let EC=class extends jy{constructor(e){super(e),this.visible=!1}};u([h()],EC.prototype,"visible",void 0),EC=u([V("esri.widgets.Spinner.SpinnerViewModel")],EC);const J4="esri-spinner",Y4={base:J4,spinnerStart:`${J4}--start`,spinnerFinish:`${J4}--finish`};let R0=class extends Zi{constructor(e,i){super(e,i),this._animationDelay=500,this._animationPromise=null,this.viewModel=new EC}initialize(){this.addHandles($e((()=>this.visible),(e=>this._visibleChange(e))))}destroy(){this._animationPromise=null}get location(){return this.viewModel.location}set location(e){this.viewModel.location=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}get visible(){return this.viewModel.visible}set visible(e){this.viewModel.visible=e}show(e){const{location:i,promise:r}=e??{};i&&(this.viewModel.location=i),this.visible=!0;const n=()=>this.hide();r&&r.catch((()=>{})).then(n)}hide(){this.visible=!1}render(){const{visible:e}=this,{screenLocation:i}=this.viewModel,r=!!i,n=e&&r,s=!e&&r,o={[Y4.spinnerStart]:n,[Y4.spinnerFinish]:s},a=this._getPositionStyles();return G("div",{class:this.classes(Y4.base,o),styles:a})}_visibleChange(e){if(e)return void(this.viewModel.screenLocationEnabled=!0);const i=s2(this._animationDelay);this._animationPromise=i,i.catch((()=>{})).then((()=>{this._animationPromise===i&&(this.viewModel.screenLocationEnabled=!1,this._animationPromise=null)}))}_getPositionStyles(){const{screenLocation:e,view:i}=this.viewModel;if(i==null||e==null)return{};const{padding:r}=i;return{left:e.x-r.left+"px",top:e.y-r.top+"px"}}};u([h()],R0.prototype,"location",null),u([h()],R0.prototype,"view",null),u([h({type:EC})],R0.prototype,"viewModel",void 0),u([h()],R0.prototype,"visible",null),R0=u([V("esri.widgets.Spinner")],R0);const Vs="esri-features",zn={icon:`${Vs}__icon`,actionImage:`${Vs}__action-image`,base:Vs,container:`${Vs}__container`,contentContainer:`${Vs}__content-container`,contentFeature:`${Vs}__content-feature`,flowItemCollapsed:`${Vs}__flow-item--collapsed`,header:`${Vs}__header`,footer:`${Vs}__footer`,featureMenuObserver:`${Vs}__feature-menu-observer`,actionExit:`${Vs}__action--exit`,loader:`${Vs}__loader`,featuresHeading:`${Vs}__heading`,paginationText:`${Vs}__pagination-text`,paginationActionBar:`${Vs}__pagination-action-bar`,paginationMenuButton:`${Vs}__pagination-menu-button`,paginationPrevious:`${Vs}__pagination-previous`},Vb=Ze.ofType({key:"type",defaultKeyValue:"button",base:bN,typeMap:{button:j$,toggle:Iq}}),pg=new j$({icon:"magnifying-glass-plus",id:"zoom-to-feature",title:"{messages.zoom}",className:Vf.zoomInMagnifyingGlass}),Rne=new j$({icon:"trash",id:"remove-selected-feature",title:"{messages.remove}",className:Vf.trash}),dx=new j$({icon:"magnifying-glass-plus",id:"zoom-to-clustered-features",title:"{messages.zoom}",className:Vf.zoomInMagnifyingGlass}),Wy=new Iq({icon:"table",id:"browse-clustered-features",title:"{messages.browseClusteredFeatures}",className:Vf.table,value:!1}),lA=pg.clone();let Sy=class extends Zi{constructor(e,i){super(e,i),this.flowItems=null,this.messages=null,this.closed=!1,this.closable=!0,this.selectLastFlowItem=!0,this._handleOpenFeature=r=>{this.emit("open-feature",{feature:r})},this._handleZoomToFeature=r=>{this.emit("zoom-to-feature",{featureWidget:r})}}loadDependencies(){return Promise.all([A0e(),zl({action:()=>ye(()=>Promise.resolve().then(()=>tW),void 0),"action-bar":()=>ye(()=>Promise.resolve().then(()=>s_e),void 0),"action-group":()=>ye(()=>Promise.resolve().then(()=>n_e),void 0),"flow-item":()=>ye(()=>import("./index-CllQbXPI.js"),[])})])}render(){const{flowItems:e}=this,i=e==null?void 0:e.toArray();return G(_6e,null,i==null?void 0:i.map(((r,n)=>this._renderFlowItem(r,this.selectLastFlowItem&&n===i.length-1))))}_handleCloseClick(){this.emit("close")}_handleExitClick(){this.emit("exit")}_handleDrillInBackClick(){const{flowItems:e}=this,i=e==null?void 0:e.pop();i&&("activeCategory"in i.viewModel?(i.viewModel.activeCategory=null,e!=null&&e.length||(i.viewModel.showAllEnabled=!1)):"showAllEnabled"in i.viewModel&&(i.viewModel.showAllEnabled=!1),i&&(i.viewModel=null,i.destroy()))}_getExitMessage(e){switch(e.flowType){case"feature":case"feature-association":return"";case"feature-relationship":return this.messages.exitRelatedRecords;case"feature-utility-network-associations":case"feature-utility-network-association-type":return this.messages.exitAssociations}}_renderFlowItem(e,i){const{messages:r,closable:n,closed:s}=this,o="graphic"in e&&!e.isTable,a=e.flowType==="feature-association",l=this._getExitMessage(e),c=r.selectFeature;return G("calcite-flow-item",{bind:this,closable:n,closed:s,description:Cg(this._getDrillInFlowItemDescription(e)??""),heading:Cg(e.title??""),key:`flow-item-${e.viewModel.uid}`,selected:i,onCalciteFlowItemBack:d=>{d.preventDefault(),this._handleDrillInBackClick()},onCalciteFlowItemClose:this._handleCloseClick},G("calcite-action",{appearance:"transparent",bind:this,class:zn.actionExit,icon:"move-up",key:"exit-action",onclick:this._handleExitClick,slot:"header-actions-start",text:l,title:l}),o?G("calcite-action",{appearance:"transparent",bind:this,icon:"zoom-to-object",key:"open-feature-action",onclick:()=>this._handleOpenFeature(e),slot:"header-actions-end",text:c,title:c}):null,a?G("calcite-action-bar",{expandDisabled:!0,expanded:!0,key:"header-action-bar",scale:"s",slot:"action-bar"},G("calcite-action-group",{overlayPositioning:"fixed",scale:"s"},L0e(lA,{key:`action-${lA.uid}`,title:this._getActionTitle(lA),text:this._getActionTitle(lA),textEnabled:!0,onclick:()=>this._handleZoomToFeature(e),bind:this}))):null,G("div",{class:zn.container},e.render()))}_getActionTitle(e){const{messages:i}=this,r=e.title??"";return e.id==="zoom-to-feature"?xo(r,{messages:i}):r}_getDrillInFlowItemDescription(e){switch(e.flowType){case"feature":case"feature-association":case"feature-utility-network-associations":return e.viewModel.description??"";case"feature-relationship":return e.allItemsDescription;case"feature-utility-network-association-type":return e.description??""}}};u([h()],Sy.prototype,"flowItems",void 0),u([h(),nn("esri/widgets/Features/t9n/Features")],Sy.prototype,"messages",void 0),u([h()],Sy.prototype,"closed",void 0),u([h()],Sy.prototype,"closable",void 0),u([h()],Sy.prototype,"selectLastFlowItem",void 0),Sy=u([V("esri.widgets.Features.FeaturesDrillIn")],Sy);let pKe=class{constructor(e){this._observable=new gw,this._set=new Set(e)}get size(){return vt(this._observable),this._set.size}add(e){const i=this._set.size;return this._set.add(e),this._set.size!==i&&this._observable.notify(),this}clear(){this._set.size>0&&(this._set.clear(),this._observable.notify())}delete(e){const i=this._set.delete(e);return i&&this._observable.notify(),i}entries(){return vt(this._observable),this._set.entries()}forEach(e,i){vt(this._observable),this._set.forEach(((r,n)=>e.call(i,r,n,this)),i)}has(e){return vt(this._observable),this._set.has(e)}keys(){return vt(this._observable),this._set.keys()}values(){return vt(this._observable),this._set.values()}[Symbol.iterator](){return vt(this._observable),this._set[Symbol.iterator]()}[Symbol.dispose](){this._observable.destroy()}get[Symbol.toStringTag](){return this._set[Symbol.toStringTag]}};const fKe="OBJECTID";var sn;(function(t){t[t.size=22]="size",t[t.lineWidth=50]="lineWidth",t[t.maxSize=120]="maxSize",t[t.maxOutlineSize=80]="maxOutlineSize",t[t.tallSymbolWidth=20]="tallSymbolWidth"})(sn||(sn={}));const IC={fill:[{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"}],meshSymbol3DFill:[{type:"path",path:"M -10,-8 L 6,0 L 6,6 L -10,6 L -10,-8 Z"},{type:"path",path:"M -10,-8 L -7,-10 L 9,-2 L 6,0 L -10,-8 Z"},{type:"path",path:"M 6,0 L 9,-2 L 9,4 L 6,6 L 6,0 Z"}],pathSymbol3DLayer:[{type:"path",path:"M 3,12 L 12,0 L 11,-2 L -4,5 L -1,5 L 1,7 L 3,10 L 3,12 Z"},{type:"circle",cx:-2,cy:10,r:5}]};function mKe(t,e,i){const r=sn.size;let n=r,s=r;t<1?n*=.75:t>1&&(s*=1.25);const o=0,a=0;let l=r,c=r;return e&&i&&(n=s=l=c=0),[{type:"path",path:[{command:"M",values:[l,o]},{command:"L",values:[i?l:.875*l,o]},{command:"L",values:[i?n-.5*l:a,s-.5*c]},{command:"L",values:[n-.5*l,s-.5*c]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[l,o]},{command:"L",values:[l,e?o:.125*c]},{command:"L",values:[n-.5*l,e?s-.5*c:c]},{command:"L",values:[n-.5*l,s-.5*c]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[n-.5*l,s-.5*c]},{command:"L",values:[i?n-.5*l:a,s-.5*c]},{command:"L",values:[i?n-.5*l:a,e?s-.5*c:c]},{command:"L",values:[n-.5*l,e?s-.5*c:c]},{command:"Z",values:[]}]}]}function yKe(t){const e=sn.size,i=.5*t,r=0,n=0;return[{type:"path",path:[{command:"M",values:[n,.7*e*.5]},{command:"L",values:[.3*e,.7*e]},{command:"L",values:[.3*e,.7*e+i]},{command:"L",values:[n,.7*e+i-.7*e*.5]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*e,.7*e]},{command:"L",values:[.3*e,.7*e+i]},{command:"L",values:[e,i]},{command:"L",values:[e,r]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*e,r]},{command:"L",values:[e,r]},{command:"L",values:[.3*e,.7*e]},{command:"L",values:[n,.7*e*.5]},{command:"Z",values:[]}]}]}function gKe(){return[{type:"path",path:"M80,80.2v-27c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4C8.3,59.3,5.7,58,3.9,56c-1.1-1.2-2.4-2.1-3.9-2.8v27"},{type:"path",path:"M11,59.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8v-24c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-1.1-1.2-2.4-2.1-3.9-2.8v24c1.5,0.7,2.8,1.6,3.9,2.8C5.7,58,8.3,59.3,11,59.4z"},{type:"path",path:"M11,35.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8V3.6c-1.5,0.7-2.8,1.6-3.9,2.8c-2.2,2.1-4.6,3.4-7.1,3.4s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6S42.5,9.9,40,9.9s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.5,0-5-1.3-7.1-3.4C2.8,5.3,1.4,4.3,0,3.6v25.6c1.5,0.7,2.8,1.6,3.9,2.8C5.7,34.1,8.3,35.3,11,35.4z"}]}function vKe(t,e){let i=e?sn.tallSymbolWidth:t;const r=t,n=e?4:6;i<=sn.size?i-=.5*n:i-=n;const s=0,o=0,a=e?.35*i:.5*i;return[{type:"path",path:[{command:"M",values:[.5*i,s]},{command:"L",values:[i,.5*a]},{command:"L",values:[.5*i,a]},{command:"L",values:[o,.5*a]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[s,.5*a]},{command:"L",values:[.5*i,a]},{command:"L",values:[.5*i,r]},{command:"L",values:[o,r-.5*a]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.5*i,a]},{command:"L",values:[.5*i,r]},{command:"L",values:[i,r-.5*a]},{command:"L",values:[i,.5*a]},{command:"Z",values:[]}]}]}function bKe(t,e){let i=e?sn.tallSymbolWidth:t;const r=t,n=e?4:6;i<=sn.size?i-=.5*n:i-=n;const s=.5*i,o=.15*i,a=0,l=r-o;return[{type:"ellipse",cx:.5*i,cy:l,rx:s,ry:o},{type:"path",path:[{command:"M",values:[a,o]},{command:"L",values:[a,l]},{command:"L",values:[i,l]},{command:"L",values:[i,o]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*i,cy:o,rx:s,ry:o}]}function wKe(t,e){let i=e?sn.tallSymbolWidth:t;const r=t,n=e?4:6;i<=sn.size?i-=.5*n:i-=n;const s=.15*i,o=r-s;return[{type:"ellipse",cx:.5*i,cy:o,rx:.5*i,ry:s},{type:"path",path:[{command:"M",values:[.5*i,0]},{command:"L",values:[i,o]},{command:"L",values:[0,o]},{command:"Z",values:[]}]}]}function _Ke(t){let e=t;const i=t,r=6;e<sn.size?e-=.5*r:e-=r;const n=.15*e,s=0;return[{type:"path",path:[{command:"M",values:[0,s]},{command:"L",values:[e,s]},{command:"L",values:[.5*e,i-n]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*e,cy:s,rx:.5*e,ry:n}]}function xKe(t){let e=t;const i=t,r=4;e<sn.size?e-=.5*r:e-=r;const n=0,s=0,o=e,a=i,l=Math.floor(t/10)-1||1;return[{type:"path",path:[{command:"M",values:[.45*o,n]},{command:"L",values:[o,.5*a-l]},{command:"L",values:[.45*o-l,.5*a+l]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*o,n]},{command:"L",values:[.45*o-l,.5*a+l]},{command:"L",values:[s,.5*a-l]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[s,.5*a-l]},{command:"L",values:[.45*o-l,.5*a+l]},{command:"L",values:[.45*o,i]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*o,i]},{command:"L",values:[o,.5*a-l]},{command:"L",values:[.45*o-l,.5*a+l]},{command:"Z",values:[]}]}]}function SKe(t){const e=t,i=2;let r=t;r<sn.size?r-=.5*i:r-=i;const n=0,s=0;return[{type:"path",path:[{command:"M",values:[.45*e,n]},{command:"L",values:[e,r]},{command:"L",values:[.45*e,.6*r]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*e,n]},{command:"L",values:[.45*e,.6*r]},{command:"L",values:[s,r]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[s,r]},{command:"L",values:[.45*e,.6*r]},{command:"L",values:[e,r]},{command:"Z",values:[]}]}]}function xg(t,e){return Math.round(Math.min(Math.max(t+255*e*.75,0),255))}function R1t(t,e){if(t==null)return new _e;if("type"in t&&(t.type==="linear"||t.type==="pattern"))return t;const i=new _e(t);return new _e([xg(i.r,e),xg(i.g,e),xg(i.b,e),i.a])}function Mbe(t){return"r"in t&&"g"in t&&"b"in t}function kbe(t){return"h"in t&&"s"in t&&"v"in t}function Pbe(t){return"l"in t&&"a"in t&&"b"in t}function Abe(t){return"l"in t&&"c"in t&&"h"in t}function $Ke(t){return"x"in t&&"y"in t&&"z"in t}const TKe=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],EKe=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function Lbe(t,e){const i=[];let r,n;if(t[0].length!==e.length)throw new Error("dimensions do not match");const s=t.length,o=t[0].length;let a=0;for(r=0;r<s;r++){for(a=0,n=0;n<o;n++)a+=t[r][n]*e[n];i.push(a)}return i}function Rbe(t){const e=[t.r/255,t.g/255,t.b/255].map((r=>r<=.04045?r/12.92:((r+.055)/1.055)**2.4)),i=Lbe(TKe,e);return{x:100*i[0],y:100*i[1],z:100*i[2]}}function GH(t){const e=Lbe(EKe,[t.x/100,t.y/100,t.z/100]).map((i=>{const r=i<=.0031308?12.92*i:1.055*i**.4166666666666667-.055;return Math.min(1,Math.max(r,0))}));return{r:Math.round(255*e[0]),g:Math.round(255*e[1]),b:Math.round(255*e[2])}}function Obe(t){const e=[t.x/95.047,t.y/100,t.z/108.883].map((i=>i>.008856451679035631?i**.3333333333333333:7.787037037037035*i+.13793103448275862));return{l:116*e[1]-16,a:500*(e[0]-e[1]),b:200*(e[1]-e[2])}}function Fbe(t){const e=t.l,i=[(e+16)/116+t.a/500,(e+16)/116,(e+16)/116-t.b/200].map((r=>r>6/29?r**3:3*(6/29)**2*(r-4/29)));return{x:95.047*i[0],y:100*i[1],z:108.883*i[2]}}function IKe(t){const e=t.l,i=t.a,r=t.b,n=Math.sqrt(i*i+r*r);let s=Math.atan2(r,i);return s=s>0?s:s+2*Math.PI,{l:e,c:n,h:s}}function CKe(t){const e=t.l,i=t.c,r=t.h;return{l:e,a:i*Math.cos(r),b:i*Math.sin(r)}}function MKe(t){return Obe(Rbe(t))}function kKe(t){return GH(Fbe(t))}function PKe(t){return IKe(Obe(Rbe(t)))}function AKe(t){return GH(Fbe(CKe(t)))}function LKe(t){const e=t.r,i=t.g,r=t.b,n=Math.max(e,i,r),s=n-Math.min(e,i,r);let o=n,a=s===0?0:n===e?(i-r)/s%6:n===i?(r-e)/s+2:(e-i)/s+4,l=s===0?0:s/o;return a<0&&(a+=6),a*=60,l*=100,o*=100/255,{h:a,s:l,v:o}}function RKe(t){const e=(t.h+360)%360/60,i=t.s/100,r=t.v/100*255,n=r*i,s=n*(1-Math.abs(e%2-1));let o;switch(Math.floor(e)){case 0:o={r:n,g:s,b:0};break;case 1:o={r:s,g:n,b:0};break;case 2:o={r:0,g:n,b:s};break;case 3:o={r:0,g:s,b:n};break;case 4:o={r:s,g:0,b:n};break;case 5:case 6:o={r:n,g:0,b:s};break;default:o={r:0,g:0,b:0}}return o.r=Math.round(o.r+r-n),o.g=Math.round(o.g+r-n),o.b=Math.round(o.b+r-n),o}function Tw(t){return Mbe(t)?t:Abe(t)?AKe(t):Pbe(t)?kKe(t):$Ke(t)?GH(t):kbe(t)?RKe(t):t}function tD(t){return kbe(t)?t:LKe(Tw(t))}function OKe(t){return Pbe(t)?t:MKe(Tw(t))}function O1t(t){return Abe(t)?t:PKe(Tw(t))}function FKe(t){let{r:e,g:i,b:r,a:n}=t;return n<1&&(e=Math.round(n*e+255*(1-n)),i=Math.round(n*i+255*(1-n)),r=Math.round(n*r+255*(1-n))),new _e({r:e,g:i,b:r})}function Nbe(t,e){const{r:i,g:r,b:n}=e!=null&&e.ignoreAlpha?t:FKe(t);return .2126*i+.7152*r+.0722*n}var E9;function F1t(t,e=E9.High){return Nbe(t,{ignoreAlpha:!0})>e?new _e([0,0,0,t.a]):new _e([255,255,255,t.a])}function N1t(t,e){const i=OKe(t);i.l*=1-e;const r=Tw(i),n=t.clone();return n.setColor(r),n.a=t.a,n}function D1t(t,e){const i=t.clone();return i.a*=e,i}function z1t(t,e){const i=tD(t);i.s*=e;const r=Tw(i),n=t.clone();return n.setColor(r),n.a=t.a,n}function V1t(t){return _e.toUnitRGBA(t)}function j1t(t){return $w(t[0],t[1],t[2],t.length>3?t[3]:1)}function U1t(t,e){const i=_e.toUnitRGBA(t);return i[3]*=e,i}function B1t(t,e,i={}){if(t.length===0||e<=0)return[];if((t=t.map((r=>typeof r=="string"?new _e(r):r))).length===1||e===1){const r=[],n=t[0];for(let s=0;s<e;s++)r.push(n.clone());return r}if(i.shuffle&&(t=Yae(se(t),i.seed)),t.length>=e){const r=[],n=(t.length-1)/(e-1);for(let s=0;s<e;s++){const o=Math.round(s*n);r.push(t[o].clone())}return r}return NKe(t,e,i)}function NKe(t,e,i={}){const r=[],n=t.length-1,s=Math.ceil((e-t.length)/n);e:for(let o=0;o<n;o++){const a=t[o],l=t[o+1];for(let c=1;c<=s;c++){const d=c/(s+1);if(r.push(DKe(a,l,d,i)),r.length+t.length===e)break e}}return[...t.map((o=>o.clone())),...Yae(r,i.seed??1)]}(function(t){t[t.Low=160]="Low",t[t.High=225]="High"})(E9||(E9={}));const X4=(t,e)=>{const i=Math.floor(10*e())-5;return Math.min(255,Math.max(0,t+i))};function DKe(t,e,i,r={}){const n=t.r,s=t.g,o=t.b,a=e.r,l=e.g,c=e.b,d=Math.round(n+(a-n)*i),f=Math.round(s+(l-s)*i),y=Math.round(o+(c-o)*i);if(!r.offset)return new _e([d,f,y]);const g=B7(r.seed);return new _e([X4(d,g),X4(f,g),X4(y,g)])}let zKe=0;function VKe(){return zKe++}let jKe=0;function UKe(){return jKe++}let BKe=0;function GKe(){return BKe++}const qKe="http://www.w3.org/2000/svg",One=fe("android"),HKe=fe("chrome")||One&&One>=4?"auto":"optimizeLegibility",WKe={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},ZKe=/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g;let Ur={},zi={};const JKe=Math.PI;function fg(t,e){const i=t*(JKe/180);return Math.abs(e*Math.sin(i))+Math.abs(e*Math.cos(i))}function Dbe(t){return t.map((e=>`${e.command} ${e.values.join(" ")}`)).join(" ").trim()}function qH(t,e,i,r,n){if(t){if(t.type==="circle")return G("circle",{cx:t.cx,cy:t.cy,fill:e,"fill-rule":"evenodd",r:t.r,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-dashoffset":i.dashOffset,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width});if(t.type==="ellipse")return G("ellipse",{cx:t.cx,cy:t.cy,fill:e,"fill-rule":"evenodd",rx:t.rx,ry:t.ry,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width});if(t.type==="rect")return G("rect",{fill:e,"fill-rule":"evenodd",height:t.height,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width,width:t.width,x:t.x,y:t.y});if(t.type==="image")return G("image",{alt:n||"image",height:t.height,href:t.src,preserveAspectRatio:"none",width:t.width,x:t.x,y:t.y});if(t.type==="path"){const s=typeof t.path!="string"?Dbe(t.path):t.path;return G("path",{d:s,fill:e,"fill-rule":"evenodd",stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width})}if(t.type==="text")return r2(r),G("text",{"dominant-baseline":r.dominantBaseline,fill:e,"fill-rule":"evenodd","font-family":r.font.family,"font-size":r.font.size,"font-style":r.font.style,"font-variant":r.font.variant,"font-weight":r.font.weight,kerning:r.kerning,rotate:r.rotate,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width,"text-anchor":r.align,"text-decoration":r.decoration,"text-rendering":HKe,x:t.x,y:t.y},t.text)}return null}function HH(t){if(!t)return{fill:"none",pattern:null,linearGradient:null};if(!("type"in t))return{fill:new _e(t).toString(),pattern:null,linearGradient:null};if(t.type==="pattern"){const i=`patternId-${VKe()}`;return{fill:`url(#${i})`,pattern:{id:i,x:t.x,y:t.y,width:t.width,height:t.height,image:{x:0,y:0,width:t.width,height:t.height,href:t.src}},linearGradient:null}}const e=`linearGradientId-${UKe()}`;return{fill:`url(#${e})`,pattern:null,linearGradient:{id:e,x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,stops:t.colors.map((i=>({offset:i.offset,color:i.color&&new _e(i.color).toString()})))}}}function WH(t){const e={color:"none",width:1,cap:"butt",join:"4",dashArray:"none",dashOffset:"0"};return t&&(t.width!=null&&(e.width=t.width),t.cap&&(e.cap=t.cap),t.join&&(e.join=t.join.toString()),t.color&&(e.color=new _e(t.color).toString()),t.dashArray&&(e.dashArray=t.dashArray),t.dashoffset&&(e.dashOffset=t.dashoffset),t.style&&!t.dashArray&&(e.dashArray=cbe(t).join(",")||"none")),e}function zbe(t,e){const i={align:null,decoration:null,kerning:null,rotate:null,font:{style:null,variant:null,weight:null,size:null,family:null}};if(t){const r=t.alignBaseline,n=r==="baseline"?"auto":r==="top"?"text-top":r==="bottom"?"hanging":r;i.align=t.align,i.dominantBaseline=n,i.decoration=t.decoration,i.kerning=t.kerning?"auto":"0",i.rotate=t.rotated?"90":"0",r2(e),i.font.style=e.style||"normal",i.font.variant=e.variant||"normal",i.font.weight=e.weight||"normal",i.font.size=e.size&&e.size.toString()||"10pt",i.font.family=e.family||"serif"}return i}function Vbe(t){const{pattern:e,linearGradient:i}=t;if(e)return G("pattern",{height:e.height,id:e.id,patternUnits:"userSpaceOnUse",width:e.width,x:e.x,y:e.y},G("image",{height:e.image.height,href:e.image.href,width:e.image.width,x:e.image.x,y:e.image.y}));if(i){const r=i.stops.map(((n,s)=>G("stop",{key:`${s}-stop`,offset:n.offset,"stop-color":n.color})));return G("linearGradient",{gradientUnits:"userSpaceOnUse",id:i.id,x1:i.x1,x2:i.x2,y1:i.y1,y2:i.y2},r)}return null}function YKe(t,e){if(!t||t.length===0)return null;const i=[];for(const r of t){const{shape:n,fill:s,stroke:o,font:a}=r,l=HH(s),c=WH(o),d=n.type==="text"?zbe(n,a):null,f=qH(n,l.fill,c,d);f&&i.push(f)}return G("mask",{id:e,maskUnits:"userSpaceOnUse"},G("g",null,i))}function Fne(t,e,i){return tp(t,E2(t),[e,i])}function Nne(t,e,i,r,n){return I2(t,E2(t),[e,i]),t[4]=t[4]*e-r*e+r,t[5]=t[5]*i-n*i+n,t}function XKe(t,e,i,r){const n=e%360*Math.PI/180;Dg(t,E2(t),n);const s=Math.cos(n),o=Math.sin(n),a=t[4],l=t[5];return t[4]=a*s-l*o+r*o-i*s+i,t[5]=l*s+a*o-i*o-r*s+r,t}function zo(t,e){Ur&&"left"in Ur?(Ur.left!=null&&Ur.left>t&&(Ur.left=t),(Ur.right==null||Ur.right<t)&&(Ur.right=t),(Ur.top==null||Ur.top>e)&&(Ur.top=e),(Ur.bottom==null||Ur.bottom<e)&&(Ur.bottom=e)):Ur={left:t,bottom:e,right:t,top:e}}function Dne(t){const e=t.args,i=e.length;let r;switch(t.action){case"M":case"L":case"C":case"S":case"Q":case"T":for(r=0;r<i;r+=2)zo(e[r],e[r+1]);zi.x=e[i-2],zi.y=e[i-1];break;case"H":for(r=0;r<i;++r)zo(e[r],zi.y);zi.x=e[i-1];break;case"V":for(r=0;r<i;++r)zo(zi.x,e[r]);zi.y=e[i-1];break;case"m":{let n=0;for(("x"in zi)||(zo(zi.x=e[0],zi.y=e[1]),n=2),r=n;r<i;r+=2)zo(zi.x+=e[r],zi.y+=e[r+1]);break}case"l":case"t":for(r=0;r<i;r+=2)zo(zi.x+=e[r],zi.y+=e[r+1]);break;case"h":for(r=0;r<i;++r)zo(zi.x+=e[r],zi.y);break;case"v":for(r=0;r<i;++r)zo(zi.x,zi.y+=e[r]);break;case"c":for(r=0;r<i;r+=6)zo(zi.x+e[r],zi.y+e[r+1]),zo(zi.x+e[r+2],zi.y+e[r+3]),zo(zi.x+=e[r+4],zi.y+=e[r+5]);break;case"s":case"q":for(r=0;r<i;r+=4)zo(zi.x+e[r],zi.y+e[r+1]),zo(zi.x+=e[r+2],zi.y+=e[r+3]);break;case"A":for(r=0;r<i;r+=7)zo(e[r+5],e[r+6]);zi.x=e[i-2],zi.y=e[i-1];break;case"a":for(r=0;r<i;r+=7)zo(zi.x+=e[r+5],zi.y+=e[r+6])}}function zne(t,e,i){const r=WKe[t.toLowerCase()];let n;typeof r=="number"&&(r?e.length>=r&&(n={action:t,args:e.slice(0,e.length-e.length%r)},i.push(n),Dne(n)):(n={action:t,args:[]},i.push(n),Dne(n)))}function KKe(t){const e=(typeof t.path!="string"?Dbe(t.path):t.path).match(ZKe),i=[];if(Ur={},zi={},!e)return null;let r="",n=[];const s=e.length;for(let a=0;a<s;++a){const l=e[a],c=parseFloat(l);isNaN(c)?(r&&zne(r,n,i),n=[],r=l):n.push(c)}zne(r,n,i);const o={x:0,y:0,width:0,height:0};return Ur&&"left"in Ur&&(o.x=Ur.left,o.y=Ur.top,o.width=Ur.right-Ur.left,o.height=Ur.bottom-Ur.top),o}function jbe(t){const e={x:0,y:0,width:0,height:0};if(t.type==="circle")e.x=t.cx-t.r,e.y=t.cy-t.r,e.width=2*t.r,e.height=2*t.r;else if(t.type==="ellipse")e.x=t.cx-t.rx,e.y=t.cy-t.ry,e.width=2*t.rx,e.height=2*t.ry;else if(t.type==="image"||t.type==="rect")e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height;else if(t.type==="path"){const i=KKe(t);e.x=i.x,e.y=i.y,e.width=i.width,e.height=i.height}return e}function Ube(t){const e={x:0,y:0,width:0,height:0};let i=null,r=Number.NEGATIVE_INFINITY,n=Number.NEGATIVE_INFINITY;for(const s of t)i?(i.x=Math.min(i.x,s.x),i.y=Math.min(i.y,s.y),r=Math.max(r,s.x+s.width),n=Math.max(n,s.y+s.height)):(i=e,i.x=s.x,i.y=s.y,r=s.x+s.width,n=s.y+s.height);return i&&(i.width=r-i.x,i.height=n-i.y),i}function I9(t,e,i,r,n,s,o,a,l){let c=(o&&s?fg(s,e):e)/2,d=(o&&s?fg(s,i):i)/2;if(l){const C=l[0],k=l[1];c=(o&&s?fg(s,C):C)/2,d=(o&&s?fg(s,k):k)/2}const f=t.width+r,y=t.height+r,g=Qf(),b=Qf();let _=!1;if(n&&f!==0&&y!==0){const C=e!==i?e/i:f/y,k=e>i?e:i;let O=1,D=1;isNaN(k)||(C>1?(O=k/f,D=k/C/y):(D=k/y,O=k*C/f)),mh(b,b,Nne(g,O,D,c,d)),_=!0}const x=t.x+(f-r)/2,E=t.y+(y-r)/2;if(mh(b,b,Fne(g,c-x,d-E)),!_&&(f>e||y>i)){const C=f/e>y/i,k=(C?e:i)/(C?f:y);mh(b,b,Nne(g,k,k,x,E))}return a&&mh(b,b,Fne(g,a[0],a[1])),s&&mh(b,b,XKe(g,s,x,E)),`matrix(${b[0]},${b[1]},${b[2]},${b[3]},${b[4]},${b[5]})`}function QKe(t,e,i){const r=t==null?void 0:t.effects.find((c=>c.type==="bloom"));if(!r)return null;const{strength:n,radius:s}=r,o=n>0?s:0,a=(n+o)*e,l=4*n+1;return G("filter",{filterUnits:"userSpaceOnUse",height:"300%",id:`bloom${i}`,width:"300%",x:"-100%",y:"-100%"},G("feMorphology",{in:"SourceGraphic",operator:"dilate",radius:(n+.5*o)*(5**(e/100)*(.4+e/100)),result:"dilate"}),G("feGaussianBlur",{in:"dilate",result:"blur",stdDeviation:a/25}),G("feGaussianBlur",{in:"blur",result:"intensityBlur",stdDeviation:a/50}),G("feComponentTransfer",{in:"SourceGraphic",result:"intensityBrightness"},G("feFuncR",{slope:l,type:"linear"}),G("feFuncG",{slope:l,type:"linear"}),G("feFuncB",{slope:l,type:"linear"})),G("feMerge",null,G("feMergeNode",{in:"intensityBlur"}),G("feMergeNode",{in:"intensityBrightness"}),G("feGaussianBlur",{stdDeviation:n/10})))}function Bbe(t,e,i,r={}){var y,g,b;const n=[],s=[],o=GKe(),a=QKe(r.effectView,e,o);let l=null;if(a){const _=(y=r.effectView)==null?void 0:y.effects.find((k=>k.type==="bloom")),x=r.clipBloomEffect||!_.strength?0:(_.strength+_.radius/2)/3,E=e+e*x,C=i+i*x;l=[Math.max(E,10),Math.max(C,10)]}let c=e,d=i;if(r.useRotationSize)for(let _=0;_<t.length;_++){const x=((g=r.rotations)==null?void 0:g[_])??0;c=Math.max(fg(x,e),c),d=Math.max(fg(x,i),d)}for(let _=0;_<t.length;_++){const x=t[_],E=[],C=[];let k=0,O=0,D=0;for(const X of x){const{shape:ee,fill:pe,stroke:he,font:ne,offset:re}=X;r.ignoreStrokeWidth||ee.type==="text"||(k+=(he==null?void 0:he.width)||0);const ke=HH(pe),Fe=WH(he),Ae=ee.type==="text"?zbe(ee,ne):null;n.push(Vbe(ke)),E.push(qH(ee,ke.fill,Fe,Ae,r.ariaLabel)),C.push(jbe(ee)),re&&(O+=re[0],D+=re[1])}const B=((b=r.rotations)==null?void 0:b[_])??0;r.useRotationSize&&(O+=(c-fg(B,e))/2,D+=(d-fg(B,i))/2);const j=I9(Ube(C),e,i,k,r.scale??!1,B,r.useRotationSize??!1,[O,D],l);let Z=null;if(r.masking){const X=`mask-${_}`,ee=r.masking[_];n.push(YKe(ee,X)),Z=`url(#${X})`}s.push(Z?G("g",{mask:Z},G("g",{transform:j},E)):G("g",{transform:j},E))}return a&&(r2(l),c=l[0],d=l[1]),G("svg",{"aria-label":r.ariaLabel,focusable:!1,height:d,role:"img",style:"display: block;",width:c,xmlns:qKe},a,G("defs",null,n),a?G("g",{filter:`url(#bloom${o})`},s):s)}const Vne=dO();function eQe(t,e){Vne.append(t,e),Vne.detach(e)}function Y$(t,e,i){const r=Math.ceil(e[0]),n=Math.ceil(e[1]);if(!t.some((o=>!!o.length)))return null;const s=(i==null?void 0:i.node)||document.createElement("div");return i.opacity!=null&&(s.style.opacity=i.opacity.toString()),i.effectView!=null&&(s.style.filter=R2(i.effectView)),eQe(s,(()=>Bbe(t,r,n,i))),s}function tQe(t,e){t=Math.ceil(t),e=Math.ceil(e);const i=document.createElement("canvas");i.width=t,i.height=e,i.style.width=t+"px",i.style.height=e+"px";const r=i.getContext("2d");return r.clearRect(0,0,t,e),r}function iQe(t,e,i){return t?fi(t,{responseType:"image"}).then((r=>{const n=r.data,s=n.width,o=n.height,a=s/o;let l=e;if(i){const c=Math.max(s,o);l=Math.min(l,c)}return{image:n,width:a<=1?Math.ceil(l*a):l,height:a<=1?l:Math.ceil(l/a)}})):Promise.reject(new ie("renderUtils: imageDataSize","href not provided."))}function rQe(t,e){return!(!t||e==="ignore")&&(e!=="multiply"||t.r!==255||t.g!==255||t.b!==255||t.a!==1)}function nQe(t,e,i,r,n){switch(n){case"multiply":t[e]*=i[0],t[e+1]*=i[1],t[e+2]*=i[2],t[e+3]*=i[3];break;default:{const s=tD({r:t[e],g:t[e+1],b:t[e+2]});s.h=r.h,s.s=r.s,s.v=s.v/100*r.v;const o=Tw(s);t[e]=o.r,t[e+1]=o.g,t[e+2]=o.b,t[e+3]*=i[3];break}}}function sQe(t,e,i,r,n){return iQe(t,e,n).then((s=>{const o=s.width??e,a=s.height??e;if(s.image&&rQe(i,r)){let l=s.image.width,c=s.image.height;fe("edge")&&/\.svg$/i.test(t)&&(l-=1,c-=1);const d=tQe(o,a);d.drawImage(s.image,0,0,l,c,0,0,o,a);const f=d.getImageData(0,0,o,a),y=[i.r/255,i.g/255,i.b/255,i.a],g=tD(i);for(let b=0;b<f.data.length;b+=4)nQe(f.data,b,y,g,r);d.putImageData(f,0,0),t=d.canvas.toDataURL("image/png")}else{const l=Rt==null?void 0:Rt.findCredential(t);if(l!=null&&l.token){const c=t.includes("?")?"&":"?";t=`${t}${c}token=${l.token}`}}return{url:t,width:o,height:a}})).catch((()=>({url:t,width:e,height:e})))}const Gbe="esri-relationship-ramp",P_=`${Gbe}--diamond`,iy=`${Gbe}--square`,oQe="http://www.w3.org/2000/svg",dr={diamondContainer:`${P_}__container`,diamondLeftCol:`${P_}__left-column`,diamondRightCol:`${P_}__right-column`,diamondMidCol:`${P_}__middle-column`,diamondMidColLabel:`${P_}__middle-column--label`,diamondMidColRamp:`${P_}__middle-column--ramp`,squareTable:`${iy}__table`,squareTableRow:`${iy}__table-row`,squareTableCell:`${iy}__table-cell`,squareTableLabel:`${iy}__table-label`,squareTableLabelLeftBottom:`${iy}__table-label--left-bottom`,squareTableLabelRightBottom:`${iy}__table-label--right-bottom`,squareTableLabelLeftTop:`${iy}__table-label--left-top`,squareTableLabelRightTop:`${iy}__table-label--right-top`};function qbe(t,e,i={}){const{focus:r,labels:n}=t,s=!!r,o=aQe(t,e,i),a={justifyContent:"center"},l=Al(),c=i.key??e;return s?G("div",{class:dr.diamondContainer,key:`${c}-container`,styles:a},G("div",{class:dr.diamondLeftCol},l?n.right:n.left),G("div",{class:dr.diamondMidCol},G("div",{class:dr.diamondMidColLabel},n.top),o,G("div",{class:dr.diamondMidColLabel},n.bottom)),G("div",{class:dr.diamondRightCol},l?n.left:n.right)):G("div",{class:dr.squareTable,key:`${c}-container`},G("div",{class:dr.squareTableRow},G("div",{class:rx(dr.squareTableCell,dr.squareTableLabel,dr.squareTableLabelRightBottom)},l?n.top:n.left),G("div",{class:dr.squareTableCell}),G("div",{class:rx(dr.squareTableCell,dr.squareTableLabel,dr.squareTableLabelLeftBottom)},l?n.left:n.top)),G("div",{class:dr.squareTableRow},G("div",{class:dr.squareTableCell}),o,G("div",{class:dr.squareTableCell})),G("div",{class:dr.squareTableRow},G("div",{class:rx(dr.squareTableCell,dr.squareTableLabel,dr.squareTableLabelRightTop)},l?n.right:n.bottom),G("div",{class:dr.squareTableCell}),G("div",{class:rx(dr.squareTableCell,dr.squareTableLabel,dr.squareTableLabelLeftTop)},l?n.bottom:n.right)))}function jne(t,e,i){const r=`${i}_arrowStart`,n=`${i}_arrowEnd`,s=t==="left",o={markerStart:null,markerEnd:null};switch(e){case"HL":s?o.markerStart=`url(#${n})`:o.markerEnd=`url(#${r})`;break;case"LL":o.markerStart=`url(#${n})`;break;case"LH":s?o.markerEnd=`url(#${r})`:o.markerStart=`url(#${n})`;break;default:o.markerEnd=`url(#${r})`}return o}function aQe(t,e,i={}){const{focus:r,numClasses:n,colors:s,rotation:o}=t,{opacity:a,effectList:l,ariaLabel:c}=i,d=i.size??60,f=!!r,y=Math.sqrt(d**2+d**2)+(f?0:5),g=[],b=[],_=[],x=(d||75)/n;for(let pe=0;pe<n;pe++){const he=pe*x;for(let ne=0;ne<n;ne++){const re=ne*x,ke=HH(s[pe][ne]),Fe=WH(null),Ae={type:"rect",x:re,y:he,width:x,height:x},we=Vbe(ke);we&&g.push(we);const Re=qH(Ae,ke.fill,Fe,null);Re&&b.push(Re),_.push(jbe(Ae))}}const E=15,C=15,k=10;let O=null;f||(O="margin: -15px -15px -18px -15px");const D=jne("left",r,e),B=jne("right",r,e),j=Ube(_),Z=I9(j,y,y,0,!1,o,!1),X=I9(j,y,y,0,!1,f?-45:null,!1),ee={filter:R2(l)??void 0,opacity:a==null?"":`${a}`};return G("div",{class:f?dr.diamondMidColRamp:dr.squareTableCell,styles:ee},G("svg",{"aria-label":c,focusable:!1,height:y,role:"image",style:O,width:y,xmlns:oQe},G("defs",null,G("marker",{id:`${e}_arrowStart`,markerHeight:"10",markerUnits:"strokeWidth",markerWidth:"10",orient:"auto",refX:"5",refY:"5"},G("polyline",{fill:"none",points:"0,0 5,5 0,10",stroke:"#555555","stroke-width":"1"})),G("marker",{id:`${e}_arrowEnd`,markerHeight:"10",markerUnits:"strokeWidth",markerWidth:"10",orient:"auto",refX:"0",refY:"5"},G("polyline",{fill:"none",points:"5,0 0,5 5,10",stroke:"#555555","stroke-width":"1"})),g),G("g",{transform:Z},b),G("g",{transform:X},G("line",{fill:"none","marker-end":D.markerEnd,"marker-start":D.markerStart,stroke:"#555555","stroke-width":"1",x1:-10,x2:-10,y1:d-E,y2:E}),G("line",{fill:"none","marker-end":B.markerEnd,"marker-start":B.markerStart,stroke:"#555555","stroke-width":"1",x1:C,x2:d-C,y1:d+k,y2:d+k}))))}function lQe(t){return t=t||globalThis.location.hostname,cQe.some((e=>(t==null?void 0:t.match(e))!=null))}function Une(t,e){return t?(e=e||globalThis.location.hostname)?e.match(Hbe)!=null||e.match(Zbe)!=null?t.replace("static.arcgis.com","staticdev.arcgis.com"):e.match(Wbe)!=null||e.match(Jbe)!=null?t.replace("static.arcgis.com","staticqa.arcgis.com"):t:t:null}const Hbe=/^devext\.arcgis\.com$/,Wbe=/^qaext\.arcgis\.com$/,Zbe=/^[\w-]*\.mapsdevext\.arcgis\.com$/,Jbe=/^[\w-]*\.mapsqa\.arcgis\.com$/,cQe=[/^([\w-]*\.)?[\w-]*\.zrh-dev-local\.esri\.com$/,Hbe,Wbe,/^jsapps\.esri\.com$/,Zbe,Jbe],uQe=["web-gltf","web","cim"];function Ybe(t,e,i){const r=t.name;return r==null?Promise.reject(new ie("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference")):t.styleName==="Esri2DPointSymbolsStyle"?dQe(r,e,i):sve(t,e,i).then((n=>Kbe(n,r,e,Q9e,i)))}function Xbe(t,e){return e.items.find((i=>i.name===t))}async function Kbe(t,e,i,r,n){var x,E;const s=(i==null?void 0:i.portal)!=null?i.portal:ze.getDefault(),o={portal:s,url:rn(t.baseUrl)},a=Xbe(e,t.data);if(!a)throw new ie("symbolstyleutils:symbol-name-not-found",`The symbol name '${e}' could not be found`,{symbolName:e});const l=(n==null?void 0:n.acceptedFormats)??uQe,c=r(a,l);if(!c)throw new ie("symbolstyleutils:symbol-reference-no-accepted-format",`The symbol name '${e}' does not have an accepted format (one of ${l})`,{symbolName:e});const{url:d,format:f}=c;let y=rm(d,o),g=((x=a.thumbnail)==null?void 0:x.href)??null;const b=(E=a.thumbnail)==null?void 0:E.imageData;lQe()&&(y=Une(y)??"",g=Une(g));const _={portal:s,url:rn(xG(y)),origin:"portal-item"};return pH(y,n).then((C=>{const k=f==="cim"?ove(C.data):C.data,O=rve(k,_);if(O&&vp(O)){if(g){const D=rm(g,o);O.thumbnail=new Fb({url:D})}else b&&(O.thumbnail=new Fb({url:`data:image/png;base64,${b}`}));t.styleUrl?O.styleOrigin=new zu({portal:i.portal,styleUrl:t.styleUrl,name:e}):t.styleName&&(O.styleOrigin=new zu({portal:i.portal,styleName:t.styleName,name:e}))}return O}))}function dQe(t,e,i){const r=e7e.replaceAll(/\{SymbolName\}/gi,t),n=e.portal!=null?e.portal:ze.getDefault();return pH(r,i).then((s=>{const o=ove(s.data);return rve(o,{portal:n,url:rn(xG(r)),origin:"portal-item"})}))}const hQe=Object.freeze(Object.defineProperty({__proto__:null,fetchSymbolFromStyle:Kbe,getStyleItemFromStyle:Xbe,resolveWebStyleSymbol:Ybe},Symbol.toStringTag,{value:"Module"})),ib=sn.size,mR=sn.maxSize,ZH=sn.maxOutlineSize,Bne=sn.lineWidth,C9=sn.tallSymbolWidth;function hx(t){const e=t.outline,i=t.material!=null?t.material.color:null,r=i!=null?i.toHex():null;if(e==null||"pattern"in e&&e.pattern!=null&&e.pattern.type==="style"&&e.pattern.style==="none")return t.type==="fill"&&r==="#ffffff"?{color:"#bdc3c7",width:.75}:null;const n=pi(e.size)||0;return{color:"rgba("+(e.color!=null?e.color.toRgba():"255,255,255,1")+")",width:Math.min(n,ZH),style:"pattern"in e&&e.pattern!=null&&e.pattern.type==="style"?zH(e.pattern.style):null,join:"butt",cap:"patternCap"in e?e.patternCap:"butt"}}async function pQe(t,e){var r,n,s;if((r=t.thumbnail)!=null&&r.url)return t.thumbnail.url;if(e.type==="icon"&&((n=e==null?void 0:e.resource)==null?void 0:n.href))return pYe(e);const i=Ir("esri/images/Legend/legend3dsymboldefault.png");if(t.styleOrigin&&(t.styleOrigin.styleName||t.styleOrigin.styleUrl)){const o=await Ybe(t.styleOrigin,{portal:t.styleOrigin.portal}).catch((()=>null));if(o&&"thumbnail"in o&&((s=o.thumbnail)!=null&&s.url))return o.thumbnail.url}return i}function K4(t,e=1){const i=t.a,r=tD(t),n=r.h,s=r.s/e,o=100-(100-r.v)/e,{r:a,g:l,b:c}=Tw({h:n,s,v:o});return[a,l,c,i]}function f3(t){var e;return t.type==="water"?t.color==null?null:t.color:((e=t.material)==null?void 0:e.color)==null?null:t.material.color}function Ai(t,e=0){const i=f3(t);if(!i){if(t.type==="fill")return null;const n=cYe.r,s=xg(n,e);return[s,s,s,100]}const r=i.toRgba();for(let n=0;n<3;n++)r[n]=xg(r[n],e);return r}async function Qbe(t,e){const i=t.style;return i==="none"?null:{type:"pattern",x:0,y:0,src:await lYe(Ir(`esri/symbols/patterns/${i}.png`),e.toCss(!0)),width:5,height:5}}function Gne(t){return t.outline?hx(t):{color:"rgba(0, 0, 0, 1)",width:1.5}}function JH(t,e){const i=f3(t);if(!i)return null;let r="rgba(";return r+=xg(i.r,e)+",",r+=xg(i.g,e)+",",r+=xg(i.b,e)+",",r+i.a+");"}function M9(t,e){const i=JH(t,e);return i?"pattern"in t&&t.pattern!=null&&t.pattern.type==="style"&&t.pattern.style==="none"?null:{color:i,width:Math.min(t.size?pi(t.size):.75,ZH),style:"pattern"in t&&t.pattern!=null&&t.pattern.type==="style"?zH(t.pattern.style):null,cap:"cap"in t?t.cap:null,join:"join"in t?t.join==="miter"?pi(2):t.join:null}:{}}function cA(t,e,i){const r=i!=null?.75*i:0;return{type:"linear",x1:r?.25*r:0,y1:r?.5*r:0,x2:r||4,y2:r?.5*r:4,colors:[{color:t,offset:0},{color:e,offset:1}]}}function fQe(t){const e=t.depth,i=t.height,r=t.width;return r!==0&&e!==0&&i!==0&&r===e&&r!=null&&i!=null&&r<i}function mQe(t,e,i){var n,s;const r=[];if(!t)return r;switch(t.type){case"icon":{const l=e,c=e;switch(((n=t.resource)==null?void 0:n.primitive)??dNe){case"circle":r.push({shape:{type:"circle",cx:0,cy:0,r:.5*e},fill:Ai(t,0),stroke:hx(t)});break;case"square":r.push({shape:{type:"path",path:[{command:"M",values:[0,c]},{command:"L",values:[0,0]},{command:"L",values:[l,0]},{command:"L",values:[l,c]},{command:"Z",values:[]}]},fill:Ai(t,0),stroke:hx(t)});break;case"triangle":r.push({shape:{type:"path",path:[{command:"M",values:[0,c]},{command:"L",values:[.5*l,0]},{command:"L",values:[l,c]},{command:"Z",values:[]}]},fill:Ai(t,0),stroke:hx(t)});break;case"cross":r.push({shape:{type:"path",path:[{command:"M",values:[.5*l,0]},{command:"L",values:[.5*l,c]},{command:"M",values:[0,.5*c]},{command:"L",values:[l,.5*c]}]},stroke:Gne(t)});break;case"x":r.push({shape:{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[l,c]},{command:"M",values:[l,0]},{command:"L",values:[0,c]}]},stroke:Gne(t)});break;case"kite":r.push({shape:{type:"path",path:[{command:"M",values:[0,.5*c]},{command:"L",values:[.5*l,0]},{command:"L",values:[l,.5*c]},{command:"L",values:[.5*l,c]},{command:"Z",values:[]}]},fill:Ai(t,0),stroke:hx(t)})}break}case"object":switch(((s=t.resource)==null?void 0:s.primitive)??yNe){case"cone":{const o=cA(Ai(t,0),Ai(t,-.6),i?C9:e),a=wKe(e,i);r.push({shape:a[0],fill:o},{shape:a[1],fill:o});break}case"inverted-cone":{const o=Ai(t,0),a=cA(o,Ai(t,-.6),e),l=_Ke(e);r.push({shape:l[0],fill:a},{shape:l[1],fill:o});break}case"cube":{const o=vKe(e,i);r.push({shape:o[0],fill:Ai(t,0)},{shape:o[1],fill:Ai(t,-.3)},{shape:o[2],fill:Ai(t,-.5)});break}case"cylinder":{const o=cA(Ai(t,0),Ai(t,-.6),i?C9:e),a=bKe(e,i);r.push({shape:a[0],fill:o},{shape:a[1],fill:o},{shape:a[2],fill:Ai(t,0)});break}case"diamond":{const o=xKe(e);r.push({shape:o[0],fill:Ai(t,-.3)},{shape:o[1],fill:Ai(t,0)},{shape:o[2],fill:Ai(t,-.3)},{shape:o[3],fill:Ai(t,-.7)});break}case"sphere":{const o=cA(Ai(t,0),Ai(t,-.6));o.x1=0,o.y1=0,o.x2=.25*e,o.y2=.25*e,r.push({shape:{type:"circle",cx:0,cy:0,r:.5*e},fill:o});break}case"tetrahedron":{const o=SKe(e);r.push({shape:o[0],fill:Ai(t,-.3)},{shape:o[1],fill:Ai(t,0)},{shape:o[2],fill:Ai(t,-.6)});break}}break}return r}function iD(t){const e=typeof(t==null?void 0:t.size)=="number"?t==null?void 0:t.size:null;return e?pi(e):null}function yQe(t){return t.type==="icon"?"multiply":"tint"}async function gQe(t,e){const i=iD(e),r=e!=null&&e.maxSize?pi(e.maxSize):null,n=(e==null?void 0:e.disableUpsampling)??!1,s=t.symbolLayers,o=[],a=[];let l=!1,c=0,d=0,f=0;s.forEach((b=>{var C,k,O,D;if(b.type!=="icon"&&b.type!=="object")return;b&&b.type==="icon"&&(f=Math.max(b.size&&pi(b.size),f));const _=b.type==="icon"?b.size&&pi(b.size):0,x=i||_?Math.ceil(Math.min(i||_,r||mR)):ib;let E=b.type==="icon"?b.angle:null;if((e==null?void 0:e.rotation)!=null&&(E=(E??0)+e.rotation),a.push(E),(C=b==null?void 0:b.resource)==null?void 0:C.href){const B=pQe(t,b).then((j=>{var ee;const Z=(ee=b==null?void 0:b.material)==null?void 0:ee.color,X=yQe(b);return sQe(j,x,Z,X,n)})).then((j=>{const Z=j.width,X=j.height;return c=Math.max(c,Z),d=Math.max(d,X),E&&(l=!0),[{shape:{type:"image",x:0,y:0,width:Z,height:X,src:j.url},fill:null,stroke:null}]}));o.push(B)}else{let B=x;b.type==="icon"&&i&&(B=x*(_/f));const j=(e==null?void 0:e.symbolConfig)==="tall"||((k=e==null?void 0:e.symbolConfig)==null?void 0:k.isTall)||b.type==="object"&&fQe(b);c=Math.max(c,j?C9:B),d=Math.max(d,B),E&&((O=b.resource)!=null&&O.primitive)&&["square","triangle","x"].includes((D=b.resource)==null?void 0:D.primitive)&&(l=!0),o.push(Promise.resolve(mQe(b,B,j)))}}));const y=await Promise.allSettled(o),g=[];return y.forEach((b=>{b.status==="fulfilled"?g.push(b.value):b.reason&&Ie.getLogger("esri.symbols.support.previewSymbol3D").warn("error while building swatchInfo!",b.reason)})),Y$(g,[c,d],{node:e==null?void 0:e.node,scale:!1,opacity:e==null?void 0:e.opacity,ariaLabel:e==null?void 0:e.ariaLabel,rotations:a,useRotationSize:l})}function vQe(t,e){const i=t.symbolLayers,r=[],n=eD(t),s=iD(e),o=(e!=null&&e.maxSize?pi(e.maxSize):null)||ZH;let a,l=0,c=0;return i.forEach(((d,f)=>{if(!d||d.type!=="line"&&d.type!=="path")return;const y=[];switch(d.type){case"line":{const g=M9(d,0);if(g==null)break;const b=(g==null?void 0:g.width)||0;f===0&&(a=b);const _=Math.min(s||b,o),x=f===0?_:s?_*(b/a):_,E=x>Bne/2?2*x:Bne;c=Math.max(c,x),l=Math.max(l,E),g.width=x,y.push({shape:{type:"path",path:[{command:"M",values:[0,.5*c]},{command:"L",values:[l,.5*c]}]},stroke:g});break}case"path":{const g=Math.min(s||ib,o),b=Ai(d,0),_=Ai(d,-.2),x=JH(d,-.4),E=x?{color:x,width:1}:{};if(d.profile==="quad"){const C=d.width,k=d.height,O=mKe(C&&k?C/k:1,k===0,C===0),D={...E,join:"bevel"};y.push({shape:O[0],fill:_,stroke:D},{shape:O[1],fill:_,stroke:D},{shape:O[2],fill:b,stroke:D})}else y.push({shape:IC.pathSymbol3DLayer[0],fill:_,stroke:E},{shape:IC.pathSymbol3DLayer[1],fill:b,stroke:E});c=Math.max(c,g),l=c}}r.push(y)})),Promise.resolve(Y$(r,[l,c],{node:e==null?void 0:e.node,scale:n,opacity:e==null?void 0:e.opacity,ariaLabel:e==null?void 0:e.ariaLabel}))}async function bQe(t,e){const i=t.type==="mesh-3d",r=t.symbolLayers,n=iD(e),s=e!=null&&e.maxSize?pi(e.maxSize):null,o=n||ib,a=[];let l=0,c=0,d=!1;for(let f=0;f<r.length;f++){const y=r.at(f),g=[];if(!i||y.type==="fill"){switch(y.type){case"fill":{const b=Math.min(o,s||mR);if(l=Math.max(l,b),c=Math.max(c,b),d=!0,i){const _=IC.meshSymbol3DFill,x=JH(y,-.4),E=x?{color:x,width:1,join:"round"}:{};g.push({shape:_[0],fill:Ai(y,0),stroke:E},{shape:_[1],fill:Ai(y,-.2),stroke:E},{shape:_[2],fill:Ai(y,-.6),stroke:E})}else{let _=Ai(y,0);const x="pattern"in y?y.pattern:null,E=hx(y),C=f3(y);x!=null&&x.type==="style"&&x.style!=="solid"&&C&&(_=await Qbe(x,C)),g.push({shape:IC.fill[0],fill:_,stroke:E})}break}case"line":{const b=M9(y,0);if(b==null)break;const _={stroke:b,shape:IC.fill[0]};l=Math.max(l,ib),c=Math.max(c,ib),g.push(_);break}case"extrude":{const b={join:"round",width:1,...M9(y,-.4)},_=Ai(y,0),x=Ai(y,-.2),E=Math.min(o,s||mR),C=yKe(E);b.width=1,g.push({shape:C[0],fill:x,stroke:b},{shape:C[1],fill:x,stroke:b},{shape:C[2],fill:_,stroke:b});const k=ib,O=.7*ib+.5*E;l=Math.max(l,k),c=Math.max(c,O);break}case"water":{const b=f3(y),_=K4(b),x=K4(b,2),E=K4(b,3),C=gKe();d=!0,g.push({shape:C[0],fill:_},{shape:C[1],fill:x},{shape:C[2],fill:E});const k=Math.min(o,s||mR);l=Math.max(l,k),c=Math.max(c,k);break}}a.push(g)}}return Y$(a,[l,c],{node:e==null?void 0:e.node,scale:d,opacity:e==null?void 0:e.opacity,ariaLabel:e==null?void 0:e.ariaLabel})}function wQe(t,e){if(t.symbolLayers.length===0)return Promise.reject(new ie("symbolPreview: renderPreviewHTML3D","No symbolLayers in the symbol."));switch(t.type){case"point-3d":return gQe(t,e);case"line-3d":return vQe(t,e);case"polygon-3d":case"mesh-3d":return bQe(t,e)}return Promise.reject(new ie("symbolPreview: swatchInfo3D","symbol not supported."))}const _Qe=Object.freeze(Object.defineProperty({__proto__:null,getPatternDescriptor:Qbe,getSizeFromOptions:iD,getSymbolLayerFill:Ai,previewSymbol3D:wQe},Symbol.toStringTag,{value:"Module"})),qne={HH:315,HL:45,LL:135,LH:225},xQe={2:[["HL","HH"],["LL","LH"]],3:[["HL","HM","HH"],["ML","MM","MH"],["LL","LM","LH"]],4:[["HL","HM1","HM2","HH"],["M2L","M2M1","M2M2","M2H"],["M1L","M1M1","M1M2","M1H"],["LL","LM1","LM2","LH"]]};function SQe(t){if(!t)return;const{type:e}=t;if(e.includes("3d"))return Ai(t.symbolLayers.at(0));if(e==="simple-line"){const i=vM(t);return i&&i.color}if(t.type==="simple-marker"&&(t.style==="x"||t.style==="cross")){const i=vM(t);return i&&i.color}return aYe(t)}function $Qe(t,e){const i=e.HH.label,r=e.LL.label,n=e.HL.label,s=e.LH.label;switch(t){case"HH":default:return{top:i,bottom:r,left:n,right:s};case"HL":return{top:n,bottom:s,left:r,right:i};case"LL":return{top:r,bottom:i,left:s,right:n};case"LH":return{top:s,bottom:n,left:i,right:r}}}function TQe(t){const{focus:e,infos:i,numClasses:r}=t,n=xQe[r],s={};i.forEach((a=>{s[a.value]={label:a.label,fill:SQe(a.symbol)}}));const o=[];for(let a=0;a<r;a++){const l=[];for(let c=0;c<r;c++){const d=s[n[a][c]];l.push(d.fill)}o.push(l)}return{type:"relationship-ramp",numClasses:r,focus:e,colors:o,labels:$Qe(e,s),rotation:ewe(e)}}function ewe(t){let e=qne[t];return t&&e==null&&(e=qne.HH),e||0}let A_=null;const Hne=[255,255,255];function Wne(t,e){return Math.floor(Math.random()*(e-t+1)+t)}function EQe(t,e,i){const{backgroundColor:r,outline:n,dotSize:s}=t,o=(i==null?void 0:i.swatchSize)||sn.size,a=.8,l=Math.round(o*o/Math.max(s,.5)**2*a),c=window.devicePixelRatio,d=document.createElement("canvas"),f=o*c;d.width=f,d.height=f,d.style.width=d.width/c+"px",d.style.height=d.height/c+"px";const y=d.getContext("2d");if(r&&(y.fillStyle=r.toCss(!0),y.fillRect(0,0,f,f),y.fill()),y.fillStyle=(e==null?void 0:e.toCss(!0))??"",A_&&A_.length/2===l)for(let b=0;b<2*l;b+=2){const _=A_[b],x=A_[b+1];y.fillRect(_,x,s*c,s*c),y.fill()}else{A_=[];for(let b=0;b<2*l;b+=2){const _=Wne(0,f),x=Wne(0,f);A_.push(_,x),y.fillRect(_,x,s*c,s*c),y.fill()}}n&&(n.color&&(y.strokeStyle=n.color.toCss(!0)),y.lineWidth=n.width,y.strokeRect(0,0,f,f));const g=new Image(o,o);return g.src=d.toDataURL(),g.ariaLabel=(i==null?void 0:i.ariaLabel)??null,g.alt=(i==null?void 0:i.ariaLabel)??"",g}function IQe(t,e={}){const i=e.radius||40,r=2*Math.PI*i,n=t.length,s=r/n,o=[],a=vM(e.outline);(a==null?void 0:a.width)!=null&&(a.width*=2),(a||e.backgroundColor)&&o.push({shape:{type:"circle",cx:i,cy:i,r:i},fill:e.backgroundColor,stroke:a,offset:[0,0]});const l=e.values,c=l&&l.length===n&&l.reduce(((b,_)=>b+_),0)===100,d=[0];for(let b=0;b<n;b++){let _=null;c&&(_=l[b]*r/100,d.push(_+d[b])),o.push({shape:{type:"circle",cx:i,cy:i,r:i/2},fill:[0,0,0,0],stroke:{width:i,dashArray:`${(_??s)/2} ${r}`,dashoffset:"-"+(c?d[b]/2:b*(s/2)),color:t[b]},offset:[0,0]})}let f=null;const y=2*i+((a==null?void 0:a.width)||0),g=e.holePercentage;if(g){a&&o.push({shape:{type:"circle",cx:i,cy:i,r:i*g},fill:null,stroke:a,offset:[0,0]});const b=y/2;f=[[{shape:{type:"circle",cx:b,cy:b,r:b},fill:Hne,stroke:a?{...a,color:Hne}:null,offset:[0,0]},{shape:{type:"circle",cx:b,cy:b,r:i*g},fill:[0,0,0],stroke:null,offset:[0,0]}]]}return Y$([o],[y,y],{effectView:e.effectList,ignoreStrokeWidth:!0,masking:f,rotations:[-90],ariaLabel:e.ariaLabel})}function O0(t,e={}){const n=e.align==="horizontal",s=n?75:24,o=n?24:75,a=e.width??s,l=e.height??o,c=e.gradient??!0,d=window.devicePixelRatio,f=a*d,y=l*d,g=document.createElement("canvas");g.width=f,g.height=y,g.ariaLabel=e.ariaLabel??null,g.style.width=`${a}px`,g.style.height=`${l}px`;const b=g.getContext("2d"),_=n?f:0,x=n?0:y;if(c){const C=b.createLinearGradient(0,0,_,x),k=t.length,O=k===1?0:1/(k-1);t.forEach(((D,B)=>C.addColorStop(B*O,D.toString()))),b.fillStyle=C,b.fillRect(0,0,f,y)}else{const C=n?f/t.length:f,k=n?y:y/t.length;let O=0,D=0;for(const B of t)b.fillStyle=B.toString(),b.fillRect(O,D,C,k),O=n?O+C:0,D=n?0:D+k}const E=document.createElement("div");return E.style.width=`${a}px`,E.style.height=`${l}px`,CQe(E,e==null?void 0:e.effectList),E.appendChild(g),E}function CQe(t,e){if(!e)return;t.style.filter=R2(e);const i=e.effects;if(i){for(const r of i)if((r==null?void 0:r.type)==="drop-shadow"){r.offsetX<0?t.style.marginLeft=`${Math.abs(r.offsetX)}px`:t.style.marginRight=`${r.offsetX}px`;break}}}async function twe(t,e){switch(t.type){case"web-style":{const{previewWebStyleSymbol:i}=await ye(()=>import("./previewWebStyleSymbol-DI6hI6Zj.js"),[]);return i(t,twe,e)}case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":{const{previewSymbol3D:i}=await ye(()=>Promise.resolve().then(()=>_Qe),void 0);return i(t,e)}case"simple-marker":case"simple-line":case"simple-fill":case"picture-marker":case"picture-fill":case"text":{const{previewSymbol2D:i}=await ye(()=>import("./previewSymbol2D-CcxKkDx5.js"),[]);return i(t,e)}case"cim":{const{previewCIMSymbol:i}=await ye(()=>Promise.resolve().then(()=>ult),void 0);return i(t,e)}default:return}}function iwe(t){return t&&"opacity"in t?t.opacity*iwe(t.parent):1}async function Zne(t,e){var k;if(!t)return;const i=t.sourceLayer,r=(e!=null&&e.useSourceLayer?i:t.layer)??i,n=e!=null&&e.ignoreOpacity?1:iwe(r);if(t.symbol!=null&&(e==null||e.ignoreGraphicSymbol!==!0)){const O=t.symbol.type==="web-style"?await t.symbol.fetchSymbol({...e,acceptedFormats:e==null?void 0:e.webStyleAcceptedFormats,cache:e==null?void 0:e.webStyleCache}):t.symbol.clone();return G4(O,null,n),O}const s=(e==null?void 0:e.renderer)??MQe(r);let o=s&&"getSymbolAsync"in s?await s.getSymbolAsync(t,e):null;if(!o)return;if(o=o.type==="web-style"?await o.fetchSymbol({...e,acceptedFormats:e==null?void 0:e.webStyleAcceptedFormats,cache:e==null?void 0:e.webStyleCache}):o.clone(),!s||!("visualVariables"in s)||!((k=s.visualVariables)!=null&&k.length))return G4(o,null,n),o;if("arcadeRequiredForVisualVariables"in s&&s.arcadeRequiredForVisualVariables&&(e==null?void 0:e.arcade)==null){const O={...e};O.arcade=await fp(),e=O}const{getColor:a,getOpacity:l,getAllSizes:c,getRotationAngle:d}=await ye(()=>Promise.resolve().then(()=>Sw),void 0),f=[],y=[],g=[],b=[];for(const O of s.visualVariables)switch(O.type){case"color":f.push(O);break;case"opacity":y.push(O);break;case"rotation":b.push(O);break;case"size":O.target||g.push(O)}const _=!!f.length&&f[f.length-1],x=_?a(_,t,e):null,E=!!y.length&&y[y.length-1];let C=E?l(E,t,e):null;if(n!=null&&(C=C!=null?C*n:n),e!=null&&e.ignoreOpacity&&(C=1),x!=null&&E&&C!=null&&(x.a=1),G4(o,x,C),g.length&&(e==null?void 0:e.ignoreSizeVariables)!==!0){const O=c(g,t,e);await TYe(o,O)}if((e==null?void 0:e.ignoreRotationVariables)!==!0)for(const O of b)EYe(o,d(O,t,e),O.axis);return o}function MQe(t){if(t)return"renderer"in t?t.renderer:void 0}function kQe(t){return t&&typeof t.highlight=="function"}function PQe(t,e,i){return t==null||t>=i&&(e===0||t<=e)}function G1t(t,e){if(e&&t){const{minScale:i,maxScale:r}=t;if(AQe(i,r))return PQe(e,i,r)}return!0}function AQe(t,e){return t!=null&&t>0||e!=null&&e>0}function q1t(t){return!(t!=null&&t.minScale)||!t.maxScale||t.minScale>=t.maxScale}const H1t=()=>!fe("disable-feature:layer-based-scale-visibility"),LQe="esri.widgets.Popup.PopupViewModel",m3=()=>Ie.getLogger(LQe),RQe=t=>{const{event:e,view:i,viewModel:r}=t,{action:n}=e;if(!n)return Promise.reject(new ie("trigger-action:missing-arguments","Event has no action"));const{disabled:s,id:o}=n;if(!o)return Promise.reject(new ie("trigger-action:invalid-action","action.id is missing"));if(s)return Promise.reject(new ie("trigger-action:invalid-action","Action is disabled"));if(o===pg.id)return nwe(r).catch(tj);if(o===dx.id)return FQe(r);if(o===Wy.id)return r.browseClusterEnabled=!r.browseClusterEnabled,r.featureMenuOpen=r.browseClusterEnabled,Promise.resolve();if(o===Rne.id){r.visible=!1;const{selectedFeature:a}=r;if(!a)return Promise.reject(new ie(`trigger-action:${Rne.id}`,"selectedFeature is required",{selectedFeature:a}));const{sourceLayer:l}=a;return l?l.remove(a):i==null||i.graphics.remove(a),Promise.resolve()}return Promise.resolve()};function rwe(t){const{selectedFeature:e,location:i,view:r}=t;return r?e??i??null:null}function rb(t){var e,i;return!!t&&t.isAggregate&&((i=(e=t.sourceLayer)==null?void 0:e.featureReduction)==null?void 0:i.type)==="cluster"}async function OQe(t,e){if((e==null?void 0:e.type)!=="3d"||!t||t.declaredClass!=="esri.Graphic")return!0;const i=e.getViewForGraphic(t);if(i&&"whenGraphicBounds"in i){let r=null;try{r=await i.whenGraphicBounds(t,{useViewElevation:!0})}catch{}return!r||!r.boundingBox||r.boundingBox[0]===r.boundingBox[3]&&r.boundingBox[1]===r.boundingBox[4]&&r.boundingBox[2]===r.boundingBox[5]}return!0}async function nwe(t,e){var f,y;const{location:i,selectedFeature:r,view:n,zoomFactor:s}=t;await((f=e==null?void 0:e.viewModel)==null?void 0:f.updateGeometry());const o=e==null?void 0:e.graphic,a=o!=null&&o.geometry?o:rwe(t);if(!n||!a){const g=new ie("zoom-to:invalid-target-or-view","Cannot zoom to location without a target and view.",{target:a,view:n});throw m3().error(g),g}const l=n.scale/s,c=(o==null?void 0:o.geometry)??((y=t.selectedFeature)==null?void 0:y.geometry)??i,d=c!=null&&c.type==="point"&&await OQe(o??r,n);pg.active=!0,pg.disabled=!0;try{await t.zoomTo({target:{target:a,scale:d?l:void 0}})}catch(g){if(Tn(g))return;const b=new ie("zoom-to:invalid-graphic","Could not zoom to the location of the graphic.",{graphic:o??r});m3().error(b)}finally{pg.active=!1,pg.disabled=!1,t.zoomToLocation=null,d&&(t.location=c)}}async function FQe(t){const{selectedFeature:e,view:i}=t;if((i==null?void 0:i.type)!=="2d"){const o=new ie("zoomToCluster:invalid-view","View must be 2d MapView.",{view:i});throw m3().error(o),o}if(!e||!rb(e)){const o=new ie("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:e});throw m3().error(o),o}const[r,n]=await YH(i,e);dx.active=!0,dx.disabled=!0;const{extent:s}=await r.queryExtent(n);s&&await t.zoomTo({target:s}),dx.active=!1,dx.disabled=!1}async function NQe(t){const{view:e,selectedFeature:i}=t;if(!e||!i)return;const[r,n]=await YH(e,i),{extent:s}=await r.queryExtent(n);t.selectedClusterBoundaryFeature.geometry=s,e.graphics.add(t.selectedClusterBoundaryFeature)}async function DQe(t){const{selectedFeature:e,view:i}=t;if(!i||!e)return;const[r,n]=await YH(i,e);Wy.active=!0,Wy.disabled=!0;const{features:s}=await r.queryFeatures(n);Wy.active=!1,Wy.disabled=!1,Wy.value=!0;const o={features:[e].concat(s)};(t==null?void 0:t.initialDisplayMode)==="feature"&&(o.featureMenuOpen=!0),t==null||t.open(o)}async function YH(t,e){const i=await t.whenLayerView(e.sourceLayer),r=i.createQuery(),n=e.getObjectId();return r.aggregateIds=n!=null?[n]:[],[i,r]}function zQe(t){Wy.value=!1;const e=t.features.filter((i=>rb(i)));e.length&&(t.features=e)}const Q4="location-scale-handle",VQe=()=>[pg.clone()],jQe=()=>[dx.clone(),Wy.clone()];let eV=null;function UQe(t,e){return t==="building-scene"||t==="map-image"||t==="tile"||t==="imagery"||e==="2d"&&t==="imagery-tile"}let Yt=class extends ege(jy){constructor(e){super(e),this._pendingPromises=new pKe,this._fetchFeaturesController=null,this._highlightPromises={"highlight-active-feature":null,"highlight-selected-feature":null},this._selectedClusterFeature=null,this.actions=new Vb,this.activeFeature=null,this.autoCloseEnabled=!1,this.browseClusterEnabled=!1,this.content=null,this.defaultPopupTemplateEnabled=!1,this.featurePage=null,this.featuresPerPage=20,this.featureMenuOpen=!1,this.featureMenuTitle=null,this.featureViewModelAbilities=null,this.featureViewModels=[],this.highlightEnabled=!0,this.includeDefaultActions=!0,this.initialDisplayMode="feature",this.selectedClusterBoundaryFeature=new qi({symbol:new So({outline:{width:1.5,color:"cyan"},style:"none"})}),this.title=null,this.updateLocationEnabled=!1,this.view=null,this.visible=!1,this.zoomFactor=4,this.zoomToLocation=null,this._debouncedLocationUpdate=Zu((async i=>{var o,a,l,c;const{spatialReference:r}=this,n=(a=(o=this.selectedFeature)==null?void 0:o.geometry)==null?void 0:a.type,s=this.location??i;if(n&&n!=="mesh"&&r&&s&&this.selectedFeature)if(n!=="point")try{const d=this.selectedFeature;let f=d.geometry;const y=this._getHighlightLayer(d),g=d.getObjectId();if(!y||!this.view)return;if(g){const x=(l=this.view)==null?void 0:l.allLayerViews.find((k=>k.layer.uid===y.uid));if(!x||!("queryFeatures"in x))return;const E=x.createQuery();E.outSpatialReference=r,E.objectIds=[g],E.returnGeometry=!0;const{features:C}=await x.queryFeatures(E);f=(c=C[0])==null?void 0:c.geometry}if(!f||f.type==="mesh")return;f=um(f,r),eV||(eV=await Promise.all([await ye(()=>import("./intersectsOperator-B5AyFfPH.js").then(x=>x.i),__vite__mapDeps([268,269,270,271,272,72,273,274,275,276])),await ye(()=>import("./proximityOperator-DnY04qV-.js").then(x=>x.p),__vite__mapDeps([277,271,270,269,272,72,273,274,278,276]))]));const[b,_]=eV;if(!b.execute(f,s)){const x=_.getNearestCoordinate(f,s).coordinate??s;this.selectedFeature===d&&(this.location=x)}}catch(d){Tn(d)||Ie.getLogger(this).error(d)}else this.location=g9(this.selectedFeature.geometry)??s}))}initialize(){this.addHandles([this.on("view-change",(()=>this._autoClose())),$e((()=>[this.highlightEnabled,this.selectedFeature,this.visible,this.view]),(()=>this._highlightSelectedFeature())),$e((()=>[this.highlightEnabled,this.activeFeature,this.visible,this.view]),(()=>this._highlightActiveFeature())),$e((()=>{var e,i;return(i=(e=this.view)==null?void 0:e.animation)==null?void 0:i.state}),(e=>this._animationStateChange(e))),$e((()=>this.location),(e=>this._locationChange(e))),$e((()=>this.selectedFeature),(e=>this._selectedFeatureChange(e))),$e((()=>[this.selectedFeatureIndex,this.featureCount,this.featuresPerPage]),(()=>this._selectedFeatureIndexChange())),$e((()=>[this.featurePage,this.selectedFeatureIndex,this.featureCount,this.featuresPerPage,this.featureViewModels]),(()=>this._setGraphicOnFeatureViewModels())),$e((()=>this.featureViewModels),(()=>this._featureViewModelsChange())),this.on("trigger-action",(e=>RQe({event:e,viewModel:this,view:this.view}))),Sn((()=>!this.waitingForResult),(()=>this._waitingForResultChange()),td),$e((()=>[this.features,this.map,this.spatialReference,this.timeZone]),(()=>this._updateFeatureVMs())),$e((()=>{var e;return(e=this.view)==null?void 0:e.scale}),(()=>this._viewScaleChange())),Sn((()=>!this.visible),(()=>this.browseClusterEnabled=!1)),$e((()=>this.browseClusterEnabled),(e=>e?this.enableClusterBrowsing():this.disableClusterBrowsing()))])}destroy(){this._cancelFetchingFeatures(),this._pendingPromises.clear(),this.browseClusterEnabled=!1,this.view=null,this.map=null,this.spatialReference=null,this.timeZone=null}get active(){return!(!this.visible||this.waitingForResult)}get allActions(){const e=this._get("allActions")||new Vb;e.removeAll();const{actions:i,defaultActions:r,defaultPopupTemplateEnabled:n,includeDefaultActions:s,selectedFeature:o}=this,a=s?r.concat(i):i,l=o&&(typeof o.getEffectivePopupTemplate=="function"&&o.getEffectivePopupTemplate(n)||o.popupTemplate),c=l==null?void 0:l.actions,d=l!=null&&l.overwriteActions?c:(c==null?void 0:c.concat(a))??a;return d==null||d.filter(Boolean).forEach((f=>e.add(f))),e}get defaultActions(){const e=this._get("defaultActions")||new Vb;return e.removeAll(),e.addMany(rb(this.selectedFeature)?jQe():VQe()),e}get featureCount(){return this.features.length}set features(e){const i=e||[];this._set("features",i);const{pendingPromisesCount:r,promiseCount:n,selectedFeatureIndex:s}=this,o=n&&i.length;this.initialDisplayMode!=="list"?o&&r&&s===-1?this.selectedFeatureIndex=0:o&&s!==-1||(this.selectedFeatureIndex=i.length?0:-1):(!o||o&&r===n)&&(this.selectedFeatureIndex=-1)}set location(e){var s,o;let i=e;const r=(s=this.spatialReference)==null?void 0:s.isWebMercator;((o=e==null?void 0:e.spatialReference)==null?void 0:o.isWGS84)&&r&&(i=Xf(e)),this._set("location",i)}get map(){var e;return((e=this.view)==null?void 0:e.map)??null}set map(e){this._override("map",e)}get pendingPromisesCount(){return this._pendingPromises.size}get promiseCount(){return this.promises.length}get promises(){return this._get("promises")||[]}set promises(e){this._pendingPromises.clear(),this.features=[],Array.isArray(e)&&e.length?(this._set("promises",e),(e=e.slice()).forEach((i=>this._pendingPromises.add(i))),e.reduce(((i,r)=>i.finally((()=>r.then((n=>{this._pendingPromises.has(r)&&this._updateFeatures(n)})).finally((()=>this._pendingPromises.delete(r))).catch((()=>{}))))),Promise.resolve())):this._set("promises",[])}get selectedFeature(){const{features:e,selectedFeatureIndex:i}=this;return i===-1?null:e[i]||null}get selectedFeatureIndex(){const e=this._get("selectedFeatureIndex");return typeof e=="number"?e:-1}set selectedFeatureIndex(e){const{featureCount:i}=this;(isNaN(e)||e<0||!i)&&(e=-1),this.activeFeature=null,this._set("selectedFeatureIndex",e)}get selectedFeatureViewModel(){return this.featureViewModels[this.selectedFeatureIndex]||null}get spatialReference(){var e;return((e=this.view)==null?void 0:e.spatialReference)??null}set spatialReference(e){this._override("spatialReference",e)}get state(){const{view:e,map:i}=this;return e?e.ready?"ready":"disabled":i?"ready":"disabled"}get timeZone(){var e;return((e=this.view)==null?void 0:e.timeZone)??Ya}set timeZone(e){this._overrideIfSome("timeZone",e)}get waitingForContents(){return this.featureViewModels.some((e=>e.waitingForContent))}get waitingForResult(){return!(!(this._fetchFeaturesController||this.pendingPromisesCount>0)||this.featureCount!==0)}centerAtLocation(){const{view:e}=this,i=rwe(this);return i&&e?this.callGoTo({target:{target:i,scale:e.scale}}):Promise.reject(new ie("center-at-location:invalid-target-or-view","Cannot center at a location without a target and view.",{target:i,view:e}))}zoomTo(e){return this.callGoTo(e)}clear(){this.set({promises:[],features:[],content:null,title:null,location:null,activeFeature:null})}fetchFeatures(e,i){var n;const{view:r}=this;if(!r||!e)throw new ie("fetch-features:invalid-screenpoint-or-view","Cannot fetch features without a screenPoint and view.",{screenPoint:e,view:r});return r.fetchPopupFeatures(e,{pointerType:(n=i==null?void 0:i.event)==null?void 0:n.pointerType,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,signal:i==null?void 0:i.signal})}open(e){const i={updateLocationEnabled:!1,promises:[],fetchFeatures:!1,...e,visible:!0},{fetchFeatures:r}=i;delete i.fetchFeatures,r&&this._setFetchFeaturesPromises(i.location);const n=["actionsMenuOpen","collapsed"];for(const s of n)delete i[s];this.set(i)}triggerAction(e){const i=this.allActions.at(e);i&&!i.disabled&&this.emit("trigger-action",{action:i})}next(){return this.selectedFeatureIndex=this._getRoundRobinIndex(this.selectedFeatureIndex+1,this.featureCount),this}previous(){return this.selectedFeatureIndex=this._getRoundRobinIndex(this.selectedFeatureIndex-1,this.featureCount),this}disableClusterBrowsing(){zQe(this),this._clearBrowsedClusterGraphics()}async enableClusterBrowsing(){const{view:e,selectedFeature:i}=this;(e==null?void 0:e.type)==="2d"?rb(i)?(await NQe(this),await DQe(this)):Ie.getLogger(this).warn("enableClusterBrowsing:invalid-selectedFeature: Selected feature must represent an aggregate/cluster graphic.",i):Ie.getLogger(this).warn("enableClusterBrowsing:invalid-view: View must be 2d MapView.",i)}handleViewClick(e){this._fetchFeaturesAndOpen(e)}_getRoundRobinIndex(e,i){return(e+i)%i}_animationStateChange(e){this.zoomToLocation||(pg.disabled=e==="waiting-for-target")}_clearBrowsedClusterGraphics(){var i,r;const e=[this.selectedClusterBoundaryFeature,this._selectedClusterFeature].filter(Kr);(r=(i=this.view)==null?void 0:i.graphics)==null||r.removeMany(e),this._selectedClusterFeature=null,this.selectedClusterBoundaryFeature.geometry=null}_viewScaleChange(){if(rb(this.selectedFeature))return this.browseClusterEnabled=!1,this.visible=!1,void this.clear();this.browseClusterEnabled&&(this.features=this.selectedFeature?[this.selectedFeature]:[])}_locationChange(e){const{selectedFeature:i,updateLocationEnabled:r,view:n}=this;n&&r&&e&&(!i||i.geometry)&&this.centerAtLocation()}_selectedFeatureIndexChange(){this.featurePage=this.featureCount>0?Math.floor(this.selectedFeatureIndex/this.featuresPerPage)+1:null}_featureViewModelsChange(){this.featurePage=this.featureCount>0?1:null}_setGraphicOnFeatureViewModels(){const{features:e,featureCount:i,featurePage:r,featuresPerPage:n,featureViewModels:s}=this;if(r==null)return;const o=((r-1)*n+i)%i,a=o+n;s.slice(o,a).forEach(((l,c)=>{l&&(l.graphic??(l.graphic=e[o+c]))}))}async _selectedFeatureChange(e){var o,a;const{location:i,updateLocationEnabled:r,view:n}=this;if(!e||!n)return;if(this.browseClusterEnabled)return this._selectedClusterFeature&&(n.graphics.remove(this._selectedClusterFeature),this._selectedClusterFeature=null),rb(e)?void 0:(e.symbol=await Zne(e),this._selectedClusterFeature=e,void n.graphics.add(this._selectedClusterFeature));const s=(o=e.sourceLayer)==null?void 0:o.type;if(s!=="map-image"&&s!=="imagery"&&s!=="imagery-tile"||(e.symbol=await Zne(e)),!r&&i||!e.geometry){if(r&&!e.geometry){await this.centerAtLocation();const l=(a=n.center)==null?void 0:a.clone();l&&(this.location=l)}}else this.location=g9(e.geometry)}_waitingForResultChange(){!this.featureCount&&this.promises&&(this.visible=!1)}async _setFetchFeaturesPromises(e){const{pendingFeatures:i}=await this._fetchFeaturesWithController({mapPoint:e});this.promises=i}_destroyFeatureVMs(){this.featureViewModels.forEach((e=>e&&!e.destroyed&&e.destroy())),this._set("featureViewModels",[])}_updateFeatureVMs(){const{selectedFeature:e,features:i,featureViewModels:r,view:n,spatialReference:s,map:o,timeZone:a,location:l}=this;if(rb(i[0])||(this.browseClusterEnabled=!1),this._destroyFeatureVMs(),!(i!=null&&i.length))return;const c=r.slice(),d=[];i.forEach(((f,y)=>{if(!f)return;let g=null;if(c.some(((b,_)=>(b&&b.graphic===f&&(g=b,c.splice(_,1)),!!g))),g)d[y]=g;else{const b=new Gi({abilities:this.featureViewModelAbilities,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,spatialReference:s,graphic:f===e?f:null,location:l,map:o,view:n,timeZone:a});d[y]=b}})),c.forEach((f=>f&&!f.destroyed&&f.destroy())),this._set("featureViewModels",d)}async _getScreenPoint(e,i){const{spatialReference:r,view:n}=this;if(!n)return null;await(n==null?void 0:n.when());const s=e==null?void 0:e.spatialReference;return s&&r?(await sN(s,r,null,i),n.toScreen(e)):null}_cancelFetchingFeatures(){const e=this._fetchFeaturesController;e&&e.abort(),this._fetchFeaturesController=null}async _projectScreenPointAndFetchFeatures({mapPoint:e,screenPoint:i,event:r,signal:n}){return this.fetchFeatures(i??await this._getScreenPoint(e??this.location,{signal:n}),{signal:n,event:r})}_fetchFeaturesWithController({mapPoint:e,screenPoint:i,event:r}){this._cancelFetchingFeatures();const n=new AbortController,{signal:s}=n;this._fetchFeaturesController=n;const o=this._projectScreenPointAndFetchFeatures({mapPoint:e,screenPoint:i,signal:s,event:r});return o.catch((()=>{})).then((()=>{this._fetchFeaturesController=null})),o}async _fetchFeaturesAndOpen(e){const{mapPoint:i,screenPoint:r}=e,{view:n}=this;this.removeHandles(Q4),this.addHandles([$e((()=>{var o;return(o=this.view)==null?void 0:o.scale}),(()=>this._debouncedLocationUpdate(i).catch((o=>{Tn(o)||Ie.getLogger(this).error(o)})))),Sn((()=>!this.visible),(()=>{this.removeHandles(Q4)}),{once:!0})],Q4);const{pendingFeatures:s}=await this._fetchFeaturesWithController({mapPoint:i,screenPoint:r,event:e});n!=null&&n.popup&&"open"in n.popup&&n.popup.open({location:i??void 0,promises:s})}_autoClose(){this.autoCloseEnabled&&(this.visible=!1)}async _getLayerView(e,i){return await e.when(),e.whenLayerView(i)}_getHighlightLayer(e){const{layer:i,sourceLayer:r}=e;return r&&"layer"in r&&r.layer?r.layer:(r==null?void 0:r.type)==="map-notes"||(r==null?void 0:r.type)==="subtype-group"?r:i??r}_getHighlightLayerView(e,i){return i.type==="subtype-sublayer"&&i.parent&&this._mapIncludesLayer(i.parent)?this._getLayerView(e,i.parent):i&&this._mapIncludesLayer(i)?this._getLayerView(e,i):null}_getHighlightTarget(e,i,r){if(UQe(i.type,r))return e;const n=e.getObjectId();if(n!=null)return n;const s=i.type==="imagery"?void 0:"objectIdField"in i?i.objectIdField||fKe:null,o=e.attributes;return o&&s&&o[s]||e}_mapIncludesLayer(e){var i,r;return!!((r=(i=this.map)==null?void 0:i.allLayers)!=null&&r.includes(e))}async _highlightFeature(e,i){this.removeHandles(e);const r=this[i];if(!r)return;const{highlightEnabled:n,view:s,visible:o}=this;if(!s||!n||!o)return;const a=this._getHighlightLayer(r);if(!a)return;const l=this._getHighlightLayerView(s,a);if(!l)return;this._highlightPromises[e]=l;const c=await l;if(!(c&&kQe(c)&&this._highlightPromises[e]===l&&this[i]&&this.highlightEnabled))return;const d=c.highlight(this._getHighlightTarget(r,a,s.type));this.addHandles(d,e)}async _highlightActiveFeature(){return this._highlightFeature("highlight-active-feature","activeFeature")}async _highlightSelectedFeature(){return this._highlightFeature("highlight-selected-feature","selectedFeature")}_updateFeatures(e){const{features:i}=this,r=e.filter((n=>!i.includes(n)));r!=null&&r.length&&(this.features=i.concat(r))}};u([h()],Yt.prototype,"_fetchFeaturesController",void 0),u([h({type:Vb})],Yt.prototype,"actions",void 0),u([h({readOnly:!0})],Yt.prototype,"active",null),u([h()],Yt.prototype,"activeFeature",void 0),u([h({readOnly:!0})],Yt.prototype,"allActions",null),u([h()],Yt.prototype,"autoCloseEnabled",void 0),u([h()],Yt.prototype,"browseClusterEnabled",void 0),u([h()],Yt.prototype,"content",void 0),u([h({type:Vb,readOnly:!0})],Yt.prototype,"defaultActions",null),u([h({type:Boolean})],Yt.prototype,"defaultPopupTemplateEnabled",void 0),u([h({readOnly:!0})],Yt.prototype,"featureCount",null),u([h()],Yt.prototype,"featurePage",void 0),u([h({value:[]})],Yt.prototype,"features",null),u([h()],Yt.prototype,"featuresPerPage",void 0),u([h()],Yt.prototype,"featureMenuOpen",void 0),u([h()],Yt.prototype,"featureMenuTitle",void 0),u([h()],Yt.prototype,"featureViewModelAbilities",void 0),u([h({readOnly:!0})],Yt.prototype,"featureViewModels",void 0),u([h()],Yt.prototype,"highlightEnabled",void 0),u([h()],Yt.prototype,"includeDefaultActions",void 0),u([h()],Yt.prototype,"initialDisplayMode",void 0),u([h({type:_t})],Yt.prototype,"location",null),u([h()],Yt.prototype,"map",null),u([h({readOnly:!0})],Yt.prototype,"pendingPromisesCount",null),u([h({readOnly:!0})],Yt.prototype,"promiseCount",null),u([h()],Yt.prototype,"promises",null),u([h({readOnly:!0})],Yt.prototype,"selectedClusterBoundaryFeature",void 0),u([h({value:null,readOnly:!0})],Yt.prototype,"selectedFeature",null),u([h({value:-1})],Yt.prototype,"selectedFeatureIndex",null),u([h({readOnly:!0})],Yt.prototype,"selectedFeatureViewModel",null),u([h({type:et})],Yt.prototype,"spatialReference",null),u([h({readOnly:!0})],Yt.prototype,"state",null),u([h()],Yt.prototype,"timeZone",null),u([h()],Yt.prototype,"title",void 0),u([h()],Yt.prototype,"updateLocationEnabled",void 0),u([h()],Yt.prototype,"view",void 0),u([h()],Yt.prototype,"visible",void 0),u([h({readOnly:!0})],Yt.prototype,"waitingForContents",null),u([h({readOnly:!0})],Yt.prototype,"waitingForResult",null),u([h()],Yt.prototype,"zoomFactor",void 0),u([h()],Yt.prototype,"zoomToLocation",void 0),u([h()],Yt.prototype,"centerAtLocation",null),Yt=u([V("esri.widgets.Features.FeaturesViewModel")],Yt);let Tl=class extends tt{constructor(){super(...arguments),this.actionBar=!0,this.closeButton=!0,this.collapseButton=!1,this.featureMenuHeading=!0,this.featureNavigation=!0,this.featureListLayerTitle=!0,this.flow=!0,this.heading=!0,this.spinner=!0}};u([h({type:Boolean,nonNullable:!0})],Tl.prototype,"actionBar",void 0),u([h({type:Boolean,nonNullable:!0})],Tl.prototype,"closeButton",void 0),u([h({type:Boolean,nonNullable:!0})],Tl.prototype,"collapseButton",void 0),u([h({type:Boolean,nonNullable:!0})],Tl.prototype,"featureMenuHeading",void 0),u([h({type:Boolean,nonNullable:!0})],Tl.prototype,"featureNavigation",void 0),u([h({type:Boolean,nonNullable:!0})],Tl.prototype,"featureListLayerTitle",void 0),u([h({type:Boolean,nonNullable:!0})],Tl.prototype,"flow",void 0),u([h({type:Boolean,nonNullable:!0})],Tl.prototype,"heading",void 0),u([h({type:Boolean,nonNullable:!0})],Tl.prototype,"spinner",void 0),Tl=u([V("esri.widgets.Features.FeaturesVisibleElements")],Tl);const Jne="selected-index",BQe=0,Yne="features-spinner";function Xne(t){return(t==null?void 0:t.declaredClass.startsWith("esri.layers."))??!1}let gi=class extends Cbe(Zi){constructor(e,i){super(e,i),this._featureMenuIntersectionObserverCallback=([r])=>{r!=null&&r.isIntersecting&&this.viewModel.featurePage!=null&&this.viewModel.featurePage++},this._featureMenuIntersectionObserver=new IntersectionObserver(this._featureMenuIntersectionObserverCallback,{root:window.document}),this._featureMenuIntersectionObserverNode=null,this._spinner=null,this._feature=null,this._focusAbortController=null,this._drillInFlowItems=new Ze,this._drillInWidget=new Sy({flowItems:this._drillInFlowItems}),this._rootNode=null,this._rootFlowItemNode=null,this._featureMenuViewportNode=null,this._actionBarMenuNode=null,this.collapsed=!1,this.featureNavigationTop=!1,this.headerActions=new Vb,this.headingLevel=2,this.messages=null,this.messagesCommon=null,this.responsiveActionsEnabled=!1,this.viewModel=new Yt,this.visibleElements=new Tl,this._previousFeature=()=>{this.viewModel.previous()},this._nextFeature=()=>{this.viewModel.next()},this._handleFeatureBack=()=>{this.initialDisplayMode==="list"?(this.selectedFeatureIndex=-1,this._focusFlowItemNode()):this._openFeatureMenu()},this._handleFeatureMenuBack=()=>{this.initialDisplayMode==="list"?(this.selectedFeatureIndex=-1,this._focusFlowItemNode()):this.featureMenuOpen&&this._closeFeatureMenu()},this._storeRootNode=r=>{this._rootNode=r},this._displaySpinnerThrottled=yM((()=>this._displaySpinner()),BQe),this._addSelectedFeatureIndexHandle(),this.addHandles([this._displaySpinnerThrottled,$e((()=>{var r;return(r=this.viewModel)==null?void 0:r.active}),(()=>this._toggleScreenLocationEnabled())),$e((()=>{var r;return(r=this.viewModel)==null?void 0:r.active}),(r=>this._drillInWidget.closed=!r)),$e((()=>{var r;return(r=this.visibleElements)==null?void 0:r.closeButton}),(r=>this._drillInWidget.closable=r)),$e((()=>{var r;return(r=this.visibleElements)==null?void 0:r.spinner}),(r=>this._spinnerEnabledChange(r))),$e((()=>{var r;return(r=this.viewModel)==null?void 0:r.view}),((r,n)=>this._viewChange(r,n))),$e((()=>{var r,n;return(n=(r=this.viewModel)==null?void 0:r.view)==null?void 0:n.ready}),((r,n)=>this._viewReadyChange(r??!1,n??!1))),$e((()=>{var r,n;return[(r=this.viewModel)==null?void 0:r.waitingForResult,(n=this.viewModel)==null?void 0:n.location]}),(()=>{this._hideSpinner(),this._displaySpinnerThrottled()})),$e((()=>{var r;return(r=this.viewModel)==null?void 0:r.screenLocation}),(()=>this._closeOpenActionMenu())),$e((()=>{var r;return(r=this.selectedFeatureWidget)==null?void 0:r.viewModel}),(()=>this._destroyDrillInFlowItemWidgets())),$e((()=>this.featureMenuOpen),(()=>this._drillInWidget.selectLastFlowItem=this.initialDisplayMode==="list"||!this.featureMenuOpen),kt),$e((()=>{var n;const r=(n=this.selectedFeatureWidget)==null?void 0:n.viewModel;return[r==null?void 0:r.title,r==null?void 0:r.state]}),(()=>this._setTitleFromFeatureWidget())),$e((()=>{var n;const r=(n=this.selectedFeatureWidget)==null?void 0:n.viewModel;return[r==null?void 0:r.content,r==null?void 0:r.state]}),(()=>this._setContentFromFeatureWidget())),$e((()=>{var r;return(r=this.viewModel)==null?void 0:r.featureViewModels}),(()=>this._featureMenuViewportScrollTop())),$e((()=>this._drillInFlowItems.length),(()=>this._focusFlowItemNode())),this._drillInWidget.on("close",(()=>this.close())),this._drillInWidget.on("exit",(()=>this._destroyDrillInFlowItemWidgets())),this._drillInWidget.on("open-feature",(({feature:r})=>this._openRelatedFeature(r))),this._drillInWidget.on("zoom-to-feature",(({featureWidget:r})=>nwe(this.viewModel,r)))])}loadDependencies(){return Promise.all([A0e(),zl({action:()=>ye(()=>Promise.resolve().then(()=>tW),void 0),"action-bar":()=>ye(()=>Promise.resolve().then(()=>s_e),void 0),"action-group":()=>ye(()=>Promise.resolve().then(()=>n_e),void 0),button:()=>ye(()=>Promise.resolve().then(()=>yD),void 0),icon:()=>ye(()=>Promise.resolve().then(()=>X$),void 0),flow:()=>ye(()=>import("./index-yPGWiDqC.js"),[]),"flow-item":()=>ye(()=>import("./index-CllQbXPI.js"),[]),list:()=>ye(()=>import("./index-CtzIiGON.js"),__vite__mapDeps([263,264,265])),"list-item":()=>ye(()=>import("./index-ChUHMvrp.js"),__vite__mapDeps([266,265,267])),"list-item-group":()=>ye(()=>import("./index-By5FDvLB.js"),__vite__mapDeps([279,267])),loader:()=>ye(()=>Promise.resolve().then(()=>F2),void 0)})])}destroy(){var e,i,r;this._destroyDrillInFlowItemWidgets(),this._destroySelectedFeatureWidget(),this._destroySpinner(),this._unobserveFeatureMenuObserver(),(e=this._featureMenuIntersectionObserver)==null||e.disconnect(),(i=this._drillInWidget)==null||i.destroy(),(r=this._focusAbortController)==null||r.abort()}get _hideActionText(){var i;if(!this.responsiveActionsEnabled)return!1;const e=(i=this.view)==null?void 0:i.widthBreakpoint;return e==="xsmall"||e==="small"||e==="medium"}get _featureNavigationVisible(){return this.viewModel.active&&this.viewModel.featureCount>1&&!!this.viewModel.selectedFeature&&this.visibleElements.featureNavigation}get _isCollapsed(){return this._collapseEnabled&&this.collapsed}get _collapseEnabled(){return this.visibleElements.collapseButton&&(this.initialDisplayMode==="list"||!!this.title&&!!this.content)}get active(){return this.viewModel.active}get content(){return this.viewModel.content}set content(e){this.viewModel.content=e}get icon(){return null}get featureMenuOpen(){return this.viewModel.featureMenuOpen}set featureMenuOpen(e){this.viewModel.featureMenuOpen=e}get featureMenuTitle(){return this.viewModel.featureMenuTitle}set featureMenuTitle(e){this.viewModel.featureMenuTitle=e}get features(){return this.viewModel.features}set features(e){this.viewModel.features=e}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get initialDisplayMode(){return this.viewModel.initialDisplayMode}set initialDisplayMode(e){this.viewModel.initialDisplayMode=e}get location(){return this.viewModel.location}set location(e){this.viewModel.location=e}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get map(){return this.viewModel.map}set map(e){this.viewModel.map=e}get promises(){return this.viewModel.promises}set promises(e){this.viewModel.promises=e}get selectedFeature(){return this.viewModel.selectedFeature}get selectedDrillInFeature(){const e=Array.from(this._drillInFlowItems).at(-1);if(!e)return null;const{flowType:i}=e;return i==="feature-association"||i==="feature-relationship"?e.graphic??null:null}get selectedFeatureIndex(){return this.viewModel.selectedFeatureIndex}set selectedFeatureIndex(e){this.viewModel.selectedFeatureIndex=e}get selectedFeatureWidget(){const{_feature:e,headingLevel:i,_drillInFlowItems:r,timeZone:n,spatialReference:s,map:o}=this,{selectedFeatureViewModel:a}=this.viewModel,l={title:!1};return a?(e?(e.viewModel=a,e.visibleElements=l):this._feature=new Wr({flowItems:r,headingLevel:i+1,timeZone:n,spatialReference:s,map:o,viewModel:a,visibleElements:l}),this._feature):null}get spatialReference(){return this.viewModel.spatialReference}set spatialReference(e){this.viewModel.spatialReference=e}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}get timeZone(){return this.viewModel.timeZone}set timeZone(e){this.viewModel.timeZone=e}get updateLocationEnabled(){return this.viewModel.updateLocationEnabled}set updateLocationEnabled(e){this.viewModel.updateLocationEnabled=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}get visible(){return this.viewModel.visible}set visible(e){this.viewModel.visible=e}blur(){var i;const{active:e}=this.viewModel;e?(i=this._rootFlowItemNode)==null||i.blur():Ie.getLogger(this).warn("Features can only be blurred when currently active.")}clear(){return this.viewModel.clear()}close(){this.viewModel.visible=!1}fetchFeatures(e,i){return this.viewModel.fetchFeatures(e,i)}focus(){const{active:e}=this.viewModel;e?this._focusFlowItemNode():Ie.getLogger(this).warn("Features can only be focused when currently active.")}next(){return this.viewModel.next()}open(e){this.removeHandles(Jne);const i={collapsed:(e==null?void 0:e.collapsed)??!1};this.set(i),this.viewModel.open(e),this.addHandles(Sn((()=>!this.viewModel.waitingForResult),(()=>this._addSelectedFeatureIndexHandle()),{once:!0}))}previous(){return this.viewModel.previous()}triggerAction(e){return this.viewModel.triggerAction(e)}render(){return G("div",{afterCreate:this._storeRootNode,bind:this,class:this.classes(zn.base,Vt.widget,Vt.panel),onkeydown:this._onMainKeydown},this._renderHeader(),this._renderContentContainer())}_renderFeatureNavigation(){return[this._renderPagination(),this.initialDisplayMode==="list"?this._renderFeaturePaginationText():this._renderFeatureMenuButton()]}_renderHeader(){return this.featureNavigationTop&&this._featureNavigationVisible?G("div",{class:zn.header,key:"header-actions"},this._renderFeatureNavigation()):null}_renderFooter(){return!this.featureNavigationTop&&this._featureNavigationVisible?G("div",{class:zn.footer,key:"footer-actions",slot:"footer"},this._renderFeatureNavigation()):null}_renderFeaturePaginationText(){const{messages:e,viewModel:i}=this,{featureCount:r,selectedFeatureIndex:n}=i;return G("div",{class:zn.paginationText,key:"feature-pagination-text"},xo(e.pageText,{index:Qr(n+1),total:Qr(r)}))}_renderFeatureMenuButton(){const{messages:e,viewModel:i}=this,{featureCount:r,selectedFeatureIndex:n,pendingPromisesCount:s}=i;return G("calcite-action",{appearance:"solid",bind:this,class:zn.paginationMenuButton,icon:"list",key:"feature-menu-button",label:e.selectFeature,loading:s>0,onclick:this._handlePaginationMenuButton,scale:"s",text:xo(e.pageText,{index:Qr(n+1),total:Qr(r)}),textEnabled:!0,title:e.selectFeature})}_renderPagination(){const{previous:e,next:i}=this.messagesCommon.pagination;return G("calcite-action-bar",{class:zn.paginationActionBar,expandDisabled:!0,key:"pagination-action-bar",layout:"horizontal",overflowActionsDisabled:!0,scale:"s"},G("calcite-action-group",{scale:"s"},G("calcite-action",{appearance:"solid",class:zn.paginationPrevious,icon:"chevron-left",iconFlipRtl:!0,label:e,onclick:this._previousFeature,scale:"s",text:e,title:e}),G("calcite-action",{appearance:"solid",icon:"chevron-right",iconFlipRtl:!0,label:i,onclick:this._nextFeature,scale:"s",text:i,title:i})))}_renderFeatureMenuItem(e){const{initialDisplayMode:i}=this,{selectedFeatureViewModel:r,featureViewModels:n}=this.viewModel,s=e===r,o=n.indexOf(e);return G("calcite-list-item",{bind:this,"data-feature-index":o,key:`feature-menu-item-${e.uid}`,onblur:this._removeActiveFeature,onfocus:this._setActiveFeature,onmouseleave:this._removeActiveFeature,onmouseover:this._setActiveFeature,selected:s,onCalciteListItemSelect:this._selectFeature},G("span",{innerHTML:e.title||this.messagesCommon.untitled,slot:"content"}),i==="list"?G("calcite-icon",{flipRtl:!0,icon:"chevron-right",scale:"s",slot:"content-end"}):null)}_groupResultsByLayer(){const{featureViewModels:e}=this.viewModel,i=new Map;return e.forEach((r=>{const n=r==null?void 0:r.graphic;if(!n)return;const{layer:s,sourceLayer:o}=n,a=(Xne(s)?s:null)||(Xne(o)?o:null),l=i.get(a)??[];i.set(a,[...l,r])})),i}_renderFeatureMenu(){const{messages:e,viewModel:i}=this,r=this._groupResultsByLayer(),n=this.initialDisplayMode==="list"?"none":"single";return i.featureViewModels.length?G("calcite-list",{displayMode:"flat",label:e==null?void 0:e.featuresList,selectionAppearance:"icon",selectionMode:n},Array.from(r.keys(),(s=>{var l;const o=(l=r.get(s))==null?void 0:l.map((c=>this._renderFeatureMenuItem(c))),a=s?s.title??this.messagesCommon.untitled:null;return this.visibleElements.featureListLayerTitle&&a!==null?G("calcite-list-item-group",{heading:a,key:(s==null?void 0:s.uid)||"map-graphics"},o):o}))):null}_renderHeaderAction(e,i){const r=e.title||"";return e.visible?G("calcite-action",{active:e.type==="toggle"&&e.value,appearance:"solid",bind:this,"data-action-id":e.id,"data-action-uid":e.uid,disabled:e.disabled,icon:e.icon??void 0,indicator:e.indicator,key:`header-action-${i}`,loading:e.active,onclick:this._triggerHeaderAction,slot:"header-actions-end",text:r,title:r}):null}_renderHeaderActions(){return this.headerActions.map(((e,i)=>this._renderHeaderAction(e,i))).toArray()}_renderContentFeature(){const{headingLevel:e,visibleElements:i,_isCollapsed:r,_collapseEnabled:n,featureNavigationTop:s,_drillInFlowItems:o,initialDisplayMode:a,selectedFeature:l,featureMenuOpen:c}=this,{title:d,active:f}=this.viewModel,y=i.heading&&d?d:"";if(a==="list"&&!l)return null;const g=o.length===0&&(a==="list"?!!l:!c);return G("calcite-flow-item",{afterCreate:this._storeRootFlowItemNode,bind:this,class:this.classes({[zn.contentFeature]:!0,[zn.flowItemCollapsed]:r}),closable:i.closeButton,closed:!f,collapsed:r,collapseDirection:s?"down":"up",collapsible:n,headingLevel:e,key:"root-flow-item",selected:g,onCalciteFlowItemBack:this._handleFeatureBack,onCalciteFlowItemClose:this.close,onCalciteFlowItemToggle:this._handleCollapseToggle},y?G(zb,{class:this.classes(zn.featuresHeading,Vt.heading),innerHTML:y,key:"header-content",level:this.headingLevel,slot:"header-content"}):null,this._renderHeaderActions(),this._renderActionBar(),G("div",{class:this.classes(zn.container,zn.contentContainer)},this._renderContent()),this._renderFooter())}_renderFeatureMenuContainer(){const{viewModel:e,visibleElements:i,featureMenuTitle:r,messages:n,messagesCommon:s,initialDisplayMode:o,featureMenuOpen:a,selectedFeature:l,_collapseEnabled:c,_isCollapsed:d,featureNavigationTop:f,headingLevel:y}=this,{active:g,featureViewModels:b,pendingPromisesCount:_}=e,{featureMenuHeading:x}=i,E=r??n.selectFeature;if(o==="feature"&&!a)return null;const C=o==="list"?!l:a;return G("calcite-flow-item",{afterCreate:this._storeFeatureMenuFlowItemNode,bind:this,class:this.classes({[zn.flowItemCollapsed]:d}),closable:o==="list"&&i.closeButton,closed:!g,collapsed:o==="list"&&d,collapseDirection:f?"down":"up",collapsible:o==="list"&&c,description:x?xo(n.total,{total:b.length}):void 0,heading:x?E:void 0,headingLevel:y,key:"feature-menu",loading:e.waitingForContents,selected:C,onCalciteFlowItemBack:k=>{k.preventDefault(),this._handleFeatureMenuBack()},onCalciteFlowItemClose:this.close,onCalciteFlowItemToggle:this._handleCollapseToggle},o==="list"?this._renderHeaderActions():null,_>0?G("calcite-loader",{class:zn.loader,inline:!0,key:"feature-menu-loader",label:s.loading,slot:"header-actions-end"}):null,G("div",{class:zn.container},this._renderFeatureMenu()),G("div",{afterCreate:this._featureMenuIntersectionObserverCreated,bind:this,class:zn.featureMenuObserver}),o==="feature"?G("calcite-button",{appearance:"transparent",onclick:this._handleFeatureMenuBack,slot:"footer-actions",width:"full"},s.back):null)}_renderContentContainer(){const e=this.initialDisplayMode==="list"?[this._renderFeatureMenuContainer(),this._renderContentFeature(),this._drillInWidget.render()]:[this._renderContentFeature(),this._drillInWidget.render(),this._renderFeatureMenuContainer()];return this.visibleElements.flow?G("calcite-flow",{key:"content-container"},e):e}_getFallbackIcon(e){const{className:i,icon:r}=e;if(r)return null;const n=rJe({action:e,feature:this.selectedFeature}),s={[zn.icon]:!!i,[zn.actionImage]:!!n};return i&&(s[i]=!0),n||i?G("span",{"aria-hidden":"true",class:this.classes(zn.icon,s),key:"icon",styles:iJe(n)}):null}_renderActionBar(){var e;return!this._isCollapsed&&this.visibleElements.actionBar&&((e=this.viewModel.allActions)!=null&&e.length)?G("calcite-action-bar",{expandDisabled:!0,expanded:!this._hideActionText,key:"header-action-bar",scale:"s",slot:"action-bar"},G("calcite-action-group",{afterCreate:i=>this._actionBarMenuNode=i,overlayPositioning:"fixed",scale:"s"},this._renderActions())):null}_renderActions(){return this.viewModel.allActions.toArray().map(((e,i)=>{const r=this._getActionTitle(e);return L0e(e,{key:`action-${i}`,title:r,text:r,textEnabled:!this._hideActionText,onclick:this._triggerAction,bind:this},this._getFallbackIcon(e))}))}_renderContent(){var i;const e=(i=this.viewModel)==null?void 0:i.content;return e?typeof e=="string"?G("div",{class:Zr.contentNode,innerHTML:e,key:e}):this.renderNodeContent(e):null}_handleCollapseToggle(){this.collapsed=!this.collapsed}async _openRelatedFeature(e){await e.viewModel.updateGeometry();const i=e.graphic,r=i==null?void 0:i.geometry;if(r==null||i==null)return;this._destroyDrillInFlowItemWidgets(),await this.viewModel.zoomTo({target:r});const n=g9(r);this.open({features:[i],location:n??void 0}),this._focusFlowItemNode()}_handlePaginationMenuButton(){this._updateFeatureMenu()}_openFeatureMenu(){this._updateFeatureMenu(!0)}_closeFeatureMenu(){this._updateFeatureMenu(!1)}_updateFeatureMenu(e=!this.featureMenuOpen){this.featureMenuOpen=e,this._focusFlowItemNode()}async _focusFlowItemNode(){var r,n;(r=this._focusAbortController)==null||r.abort(),this._focusAbortController=new AbortController;const e=this._focusAbortController.signal;await Wu(tG(e));const i=(n=this._rootNode)==null?void 0:n.querySelector("calcite-flow-item[selected]");Gye(i)}_storeRootFlowItemNode(e){this._rootFlowItemNode=e}_storeFeatureMenuFlowItemNode(e){this._featureMenuViewportNode=e}_setActiveFeature(e){var n;const{viewModel:i}=this,r=e.currentTarget["data-feature-index"];i.activeFeature=((n=i.features)==null?void 0:n[r])||null}_removeActiveFeature(){this.viewModel.activeFeature=null}_selectFeature(e){const i=e.currentTarget["data-feature-index"];isNaN(i)||(this.viewModel.selectedFeatureIndex=i),this.initialDisplayMode==="feature"?this._handleFeatureMenuBack():this._focusFlowItemNode()}_unobserveFeatureMenuObserver(){this._featureMenuIntersectionObserverNode&&this._featureMenuIntersectionObserver.unobserve(this._featureMenuIntersectionObserverNode)}_featureMenuIntersectionObserverCreated(e){this._unobserveFeatureMenuObserver(),this._featureMenuIntersectionObserver.observe(e),this._featureMenuIntersectionObserverNode=e}_getActionTitle(e){const{messages:i,selectedFeature:r,messagesCommon:n}=this,{id:s}=e,o=r==null?void 0:r.attributes,a=e.title??"",l=s==="zoom-to-feature"?xo(a,{messages:i}):s==="remove-selected-feature"?xo(a,{messages:n}):s==="zoom-to-clustered-features"||s==="browse-clustered-features"?xo(a,{messages:i}):e.title;return l&&o?xo(l,o):l??""}_onMainKeydown(e){const{key:i}=e;i==="ArrowLeft"&&(e.stopPropagation(),this._handleFeatureMenuBack(),this.previous()),i==="ArrowRight"&&(e.stopPropagation(),this._handleFeatureMenuBack(),this.next())}_featureMenuViewportScrollTop(){this._featureMenuViewportNode&&this._featureMenuViewportNode.scrollContentTo({top:0})}_setContentFromFeatureWidget(){const{selectedFeatureWidget:e}=this;e&&(this.viewModel.content=e)}_setTitleFromFeatureWidget(){const{selectedFeatureWidget:e,messagesCommon:i}=this,r=e==null?void 0:e.viewModel;e&&(this.viewModel.title=(r==null?void 0:r.state)==="error"?i==null?void 0:i.errorMessage:(r==null?void 0:r.title)||"")}_addSelectedFeatureIndexHandle(){const e=$e((()=>{var i;return(i=this.viewModel)==null?void 0:i.selectedFeatureIndex}),((i,r)=>this._selectedFeatureIndexUpdated(i,r)));this.addHandles(e,Jne)}_selectedFeatureIndexUpdated(e,i){const{featureCount:r}=this.viewModel;r&&e!==i&&e!==-1&&(this._destroyDrillInFlowItemWidgets(),this._rootFlowItemNode&&this._rootFlowItemNode.scrollContentTo({top:0}))}_triggerHeaderAction(e){const i=e.currentTarget;if(i.disabled)return;const r=i.dataset.actionUid,n=this.headerActions.find((({uid:s})=>s===r));n&&!n.disabled&&((n==null?void 0:n.type)==="toggle"&&(n.value=!n.value),this.emit("trigger-header-action",{action:n}))}_triggerAction(e){const i=e.currentTarget;if(i.disabled)return;const r=i.dataset.actionUid,{allActions:n}=this.viewModel,s=n.findIndex((a=>a.uid===r)),o=n.at(s);o&&o.type==="toggle"&&(o.value=!o.value),this.viewModel.triggerAction(s)}_createSpinner(e){e&&(this._spinner=new R0({view:e}),e.ui.add(this._spinner,{key:Yne,position:"manual",internal:!0}))}_wireUpView(e){var i;this._destroySpinner(),e&&((i=this.visibleElements)!=null&&i.spinner)&&this._createSpinner(e)}_hideSpinner(){const{_spinner:e}=this;e&&(e.location=null,e.hide())}_viewReadyChange(e,i){var r;e?this._wireUpView((r=this.viewModel)==null?void 0:r.view):i&&this.viewModel.clear()}_viewChange(e,i){e&&i&&this.viewModel.clear()}_destroySelectedFeatureWidget(){const{_feature:e}=this;e&&(e.viewModel=null,!e.destroyed&&e.destroy()),this._feature=null}_closeOpenActionMenu(){const{_actionBarMenuNode:e}=this;e&&(e.menuOpen=!1)}_destroyDrillInFlowItemWidgets(){this._drillInFlowItems.drain((e=>{"showAllEnabled"in e.viewModel&&(e.viewModel.showAllEnabled=!1),"activeCategory"in e.viewModel&&(e.viewModel.activeCategory=null),e.viewModel=null,e.destroy()}))}_toggleScreenLocationEnabled(){const{viewModel:e}=this;e&&(e.screenLocationEnabled=e.active)}_displaySpinner(){const{_spinner:e}=this;if(!e)return;const{location:i,waitingForResult:r}=this.viewModel;r&&i?e.show({location:i}):e.hide()}_destroySpinner(){var i,r;const{_spinner:e}=this;e&&((r=(i=e.view)==null?void 0:i.ui)==null||r.remove(e,Yne),e.destroy(),this._spinner=null)}_spinnerEnabledChange(e){var i;this._destroySpinner(),e&&this._createSpinner((i=this.viewModel)==null?void 0:i.view)}};u([h()],gi.prototype,"_drillInFlowItems",void 0),u([h()],gi.prototype,"_hideActionText",null),u([h()],gi.prototype,"_featureNavigationVisible",null),u([h()],gi.prototype,"_isCollapsed",null),u([h()],gi.prototype,"_collapseEnabled",null),u([h({readOnly:!0})],gi.prototype,"active",null),u([h()],gi.prototype,"collapsed",void 0),u([h()],gi.prototype,"content",null),u([h()],gi.prototype,"icon",null),u([h()],gi.prototype,"featureMenuOpen",null),u([h()],gi.prototype,"featureMenuTitle",null),u([h()],gi.prototype,"featureNavigationTop",void 0),u([h()],gi.prototype,"features",null),u([h()],gi.prototype,"goToOverride",null),u([h({type:Vb})],gi.prototype,"headerActions",void 0),u([h()],gi.prototype,"headingLevel",void 0),u([h()],gi.prototype,"initialDisplayMode",null),u([h()],gi.prototype,"location",null),u([h()],gi.prototype,"label",null),u([h()],gi.prototype,"map",null),u([h(),nn("esri/widgets/Features/t9n/Features")],gi.prototype,"messages",void 0),u([h(),nn("esri/t9n/common")],gi.prototype,"messagesCommon",void 0),u([h()],gi.prototype,"promises",null),u([h()],gi.prototype,"responsiveActionsEnabled",void 0),u([h({readOnly:!0})],gi.prototype,"selectedFeature",null),u([h({readOnly:!0})],gi.prototype,"selectedDrillInFeature",null),u([h()],gi.prototype,"selectedFeatureIndex",null),u([h({readOnly:!0})],gi.prototype,"selectedFeatureWidget",null),u([h()],gi.prototype,"spatialReference",null),u([h()],gi.prototype,"title",null),u([h()],gi.prototype,"timeZone",null),u([h()],gi.prototype,"updateLocationEnabled",null),u([h()],gi.prototype,"view",null),u([h({type:Yt}),tbe(["triggerAction","trigger-action"])],gi.prototype,"viewModel",void 0),u([h({type:Tl,nonNullable:!0})],gi.prototype,"visibleElements",void 0),u([h()],gi.prototype,"visible",null),gi=u([V("esri.widgets.Features")],gi);const xl="esri-popup",Yv=`${xl}--is-docked`,Mn={base:xl,baseHidden:`${xl}--hidden`,main:`${xl}__main-container`,shadow:`${xl}--shadow`,isDocked:Yv,isDockedTopLeft:`${Yv}-top-left`,isDockedTopCenter:`${Yv}-top-center`,isDockedTopRight:`${Yv}-top-right`,isDockedBottomLeft:`${Yv}-bottom-left`,isDockedBottomCenter:`${Yv}-bottom-center`,isDockedBottomRight:`${Yv}-bottom-right`,alignTopCenter:`${xl}--aligned-top-center`,alignBottomCenter:`${xl}--aligned-bottom-center`,alignTopLeft:`${xl}--aligned-top-left`,alignBottomLeft:`${xl}--aligned-bottom-left`,alignTopRight:`${xl}--aligned-top-right`,alignBottomRight:`${xl}--aligned-bottom-right`,pointer:`${xl}__pointer`,pointerDirection:`${xl}__pointer-direction`};let y3=class extends Yt{constructor(e){super(e)}};y3=u([V("esri.widgets.Popup.PopupViewModel")],y3);let fc=class extends tt{constructor(){super(...arguments),this.actionBar=!0,this.closeButton=!0,this.collapseButton=!0,this.featureMenuHeading=!0,this.featureNavigation=!0,this.featureListLayerTitle=!0,this.heading=!0,this.spinner=!0}};u([h({type:Boolean,nonNullable:!0})],fc.prototype,"actionBar",void 0),u([h({type:Boolean,nonNullable:!0})],fc.prototype,"closeButton",void 0),u([h({type:Boolean,nonNullable:!0})],fc.prototype,"collapseButton",void 0),u([h({type:Boolean,nonNullable:!0})],fc.prototype,"featureMenuHeading",void 0),u([h({type:Boolean,nonNullable:!0})],fc.prototype,"featureNavigation",void 0),u([h({type:Boolean,nonNullable:!0})],fc.prototype,"featureListLayerTitle",void 0),u([h({type:Boolean,nonNullable:!0})],fc.prototype,"heading",void 0),u([h({type:Boolean,nonNullable:!0})],fc.prototype,"spinner",void 0),fc=u([V("esri.widgets.Popup.PopupVisibleElements")],fc);const GQe=200,Kne={buttonEnabled:!0,position:"auto",breakpoint:{width:544}};let xi=class extends Zi{constructor(e,i){super(e,i),this._dockAction=new j$({id:"popup-dock-action"}),this._featuresWidget=new gi({responsiveActionsEnabled:!0}),this._containerNode=null,this._mainContainerNode=null,this._pointerOffsetInPx=16,this._focusAbortController=null,this.alignment="auto",this.dockEnabled=!1,this.headingLevel=2,this.messages=null,this.viewModel=new y3,this.visibleElements=new fc}initialize(){this.addHandles([$e((()=>{var e,i;return[(i=(e=this.viewModel)==null?void 0:e.view)==null?void 0:i.widthBreakpoint,this.dockEnabled]}),(()=>this._handleDockIcon()),kt),$e((()=>{var e,i;return[this.dockEnabled,(e=this.messages)==null?void 0:e.undock,(i=this.messages)==null?void 0:i.dock]}),(()=>this._handleDockEnabled()),kt),$e((()=>this.dockOptions),(e=>{const{_dockAction:i}=this,r=this._featuresWidget.headerActions;r.remove(i),e.buttonEnabled&&r.add(i)}),kt),$e((()=>{var e;return(e=this.viewModel)==null?void 0:e.screenLocation}),(()=>this._positionContainer())),$e((()=>{var e;return[(e=this.viewModel)==null?void 0:e.active,this.dockEnabled]}),(()=>this._toggleScreenLocationEnabled())),$e((()=>{var e,i,r,n,s,o,a;return[(e=this.viewModel)==null?void 0:e.screenLocation,(r=(i=this.viewModel)==null?void 0:i.view)==null?void 0:r.padding,(s=(n=this.viewModel)==null?void 0:n.view)==null?void 0:s.size,(o=this.viewModel)==null?void 0:o.active,(a=this.viewModel)==null?void 0:a.location,this.alignment]}),(()=>this.reposition())),$e((()=>{var e,i;return(i=(e=this.viewModel)==null?void 0:e.view)==null?void 0:i.size}),((e,i)=>this._updateDockEnabledForViewSize(e,i))),$e((()=>{var e;return(e=this.viewModel)==null?void 0:e.view}),((e,i)=>this._viewChange(e,i))),$e((()=>{var e,i;return(i=(e=this.viewModel)==null?void 0:e.view)==null?void 0:i.ready}),((e,i)=>this._viewReadyChange(e??!1,i??!1))),$e((()=>this.viewModel),(()=>this._featuresWidget.viewModel=this.viewModel),kt),$e((()=>this._featureNavigationTop),(e=>this._featuresWidget.featureNavigationTop=e),kt),$e((()=>this.headingLevel),(e=>this._featuresWidget.headingLevel=e),kt),$e((()=>this.visibleElements.actionBar),(e=>this._featuresWidget.visibleElements.actionBar=!!e),kt),$e((()=>this.visibleElements.closeButton),(e=>this._featuresWidget.visibleElements.closeButton=!!e),kt),$e((()=>this.visibleElements.collapseButton),(e=>this._featuresWidget.visibleElements.collapseButton=!!e),kt),$e((()=>this.visibleElements.heading),(e=>this._featuresWidget.visibleElements.heading=!!e),kt),$e((()=>this.visibleElements.spinner),(e=>this._featuresWidget.visibleElements.spinner=!!e),kt),$e((()=>this.visibleElements.featureNavigation),(e=>this._featuresWidget.visibleElements.featureNavigation=!!e),kt),$e((()=>this.visibleElements.featureMenuHeading),(e=>this._featuresWidget.visibleElements.featureMenuHeading=!!e),kt),$e((()=>this.visibleElements.featureListLayerTitle),(e=>this._featuresWidget.visibleElements.featureListLayerTitle=!!e),kt),eo((()=>this._featuresWidget),"trigger-header-action",(e=>{e.action===this._dockAction&&(this.dockEnabled=!this.dockEnabled)}))])}destroy(){var e;this._dockAction.destroy(),this._featuresWidget&&(this._featuresWidget.viewModel=new Yt,this._featuresWidget.destroy()),(e=this._focusAbortController)==null||e.abort()}get _featureNavigationTop(){const{currentAlignment:e,currentDockPosition:i}=this;return e==="bottom-left"||e==="bottom-center"||e==="bottom-right"||i==="top-left"||i==="top-center"||i==="top-right"}get actions(){return this.viewModel.actions}set actions(e){this.viewModel.actions=e}get active(){return this.viewModel.active}get autoCloseEnabled(){return this.viewModel.autoCloseEnabled}set autoCloseEnabled(e){this.viewModel.autoCloseEnabled=e}get defaultPopupTemplateEnabled(){return this.viewModel.defaultPopupTemplateEnabled}set defaultPopupTemplateEnabled(e){this.viewModel.defaultPopupTemplateEnabled=e}get content(){return this.viewModel.content}set content(e){this.viewModel.content=e}get collapsed(){return this._featuresWidget.collapsed}set collapsed(e){this._featuresWidget.collapsed=e}get currentAlignment(){return this._getCurrentAlignment()}get currentDockPosition(){return this._getCurrentDockPosition()}get dockOptions(){return this._get("dockOptions")||Kne}set dockOptions(e){var l,c;const i={...Kne},r=(c=(l=this.viewModel)==null?void 0:l.view)==null?void 0:c.breakpoints,n={};r&&(n.width=r.xsmall,n.height=r.xsmall);const s={...i,...e},o={...i.breakpoint,...n},{breakpoint:a}=s;typeof a=="object"?s.breakpoint={...o,...a}:a&&(s.breakpoint=o),this._set("dockOptions",s),this._setCurrentDockPosition(),this.reposition()}get featureCount(){return this.viewModel.featureCount}get featureMenuOpen(){return this.viewModel.featureMenuOpen}set featureMenuOpen(e){this.viewModel.featureMenuOpen=e}get features(){return this.viewModel.features}set features(e){this.viewModel.features=e}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get highlightEnabled(){return this.viewModel.highlightEnabled}set highlightEnabled(e){this.viewModel.highlightEnabled=e}get icon(){return"popup"}set icon(e){this._overrideIfSome("icon",e)}get initialDisplayMode(){return this.viewModel.initialDisplayMode}set initialDisplayMode(e){this.viewModel.initialDisplayMode=e}get location(){return this.viewModel.location}set location(e){this.viewModel.location=e}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get promises(){return this.viewModel.promises}set promises(e){this.viewModel.promises=e}get selectedFeature(){return this.viewModel.selectedFeature}get selectedDrillInFeature(){return this._featuresWidget.selectedDrillInFeature??null}get selectedFeatureIndex(){return this.viewModel.selectedFeatureIndex}set selectedFeatureIndex(e){this.viewModel.selectedFeatureIndex=e}get selectedFeatureWidget(){return this._featuresWidget.selectedFeatureWidget}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}get updateLocationEnabled(){return this.viewModel.updateLocationEnabled}set updateLocationEnabled(e){this.viewModel.updateLocationEnabled=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}get visible(){return this.viewModel.visible}set visible(e){this.viewModel.visible=e}blur(){const{active:e}=this.viewModel;e||Ie.getLogger(this).warn("Popup can only be blurred when currently active."),this._featuresWidget.blur()}clear(){return this.viewModel.clear()}close(){this.visible=!1}fetchFeatures(e,i){return this.viewModel.fetchFeatures(e,i)}focus(){const{active:e}=this.viewModel;e||Ie.getLogger(this).warn("Popup can only be focused when currently active."),this._handleFocus()}next(){return this.viewModel.next()}open(e){const i=!!e&&!!e.featureMenuOpen,r={collapsed:!!e&&!!e.collapsed,featureMenuOpen:i};this.set(r),this.viewModel.open(e),e!=null&&e.shouldFocus&&this._handleFocus(!0)}previous(){return this.viewModel.previous()}reposition(){this.renderNow(),this._positionContainer(),this._setCurrentAlignment()}triggerAction(e){return this.viewModel.triggerAction(e)}render(){var f,y,g,b;const{dockEnabled:e,currentAlignment:i,currentDockPosition:r}=this,{active:n,screenLocation:s}=this.viewModel,o=n&&e,a=n&&!e,l=(y=(f=this.selectedFeature)==null?void 0:f.layer)==null?void 0:y.title,c=(b=(g=this.selectedFeature)==null?void 0:g.layer)==null?void 0:b.id,d={[Mn.alignTopCenter]:i==="top-center",[Mn.alignBottomCenter]:i==="bottom-center",[Mn.alignTopLeft]:i==="top-left",[Mn.alignBottomLeft]:i==="bottom-left",[Mn.alignTopRight]:i==="top-right",[Mn.alignBottomRight]:i==="bottom-right",[Mn.isDocked]:o,[Mn.shadow]:a,[Mn.isDockedTopLeft]:r==="top-left",[Mn.isDockedTopCenter]:r==="top-center",[Mn.isDockedTopRight]:r==="top-right",[Mn.isDockedBottomLeft]:r==="bottom-left",[Mn.isDockedBottomCenter]:r==="bottom-center",[Mn.isDockedBottomRight]:r==="bottom-right"};return G("div",{afterCreate:this._positionContainer,afterUpdate:this._positionContainer,"aria-hidden":(!n).toString(),"aria-label":Cg(this.title??""),"aria-modal":"false",bind:this,class:this.classes(Mn.base,d,{[Mn.baseHidden]:!s&&!e}),"data-layer-id":c,"data-layer-title":l,role:"dialog"},n?[this._renderMainContainer(),this._renderPointer()]:null)}_renderPointer(){return this.dockEnabled?null:G("div",{class:Mn.pointer,key:"popup-pointer",role:"presentation"},G("div",{class:this.classes(Mn.pointerDirection,Mn.shadow)}))}_renderMainContainer(){const{dockEnabled:e}=this,i={[Mn.shadow]:e};return G("div",{afterCreate:this._setMainContainerNode,afterUpdate:this._setMainContainerNode,bind:this,class:this.classes(Mn.main,Vt.widget,i)},this._featuresWidget.render())}_getAnimationDurationMS(){const{_containerNode:e}=this;return e?1e3*parseFloat(window.getComputedStyle(e).animationDuration):GQe}async _handleFocus(e=!1){var r;(r=this._focusAbortController)==null||r.abort(),this._focusAbortController=new AbortController;const i=this._focusAbortController.signal;e&&await E$((()=>{var n;return((n=this.viewModel)==null?void 0:n.active)===!0}),{signal:i}),await Wu(tG(i)),await Wu(s2(this._getAnimationDurationMS(),i)),this._featuresWidget.focus()}_isOutsideView(e){const{popupHeight:i,popupWidth:r,screenLocation:n,side:s,view:o}=e;if(isNaN(r)||isNaN(i)||!o||!n)return!1;const a=o.padding;return s==="right"&&n.x+r/2>o.width-a.right||s==="left"&&n.x-r/2<a.left||s==="top"&&n.y-i<a.top||s==="bottom"&&n.y+i>o.height-a.bottom}_calculateAutoAlignment(e){if(e!=="auto")return e;const{_pointerOffsetInPx:i,_containerNode:r,_mainContainerNode:n,viewModel:s}=this,{screenLocation:o,view:a}=s;if(o==null||!a||!r)return"top-center";function l(O){return parseInt(O.replaceAll(/[^-\d.]/g,""),10)}const c=n?window.getComputedStyle(n,null):null,d=c?l(c.getPropertyValue("max-height")):0,f=c?l(c.getPropertyValue("height")):0,{height:y,width:g}=r.getBoundingClientRect(),b=g+i,_=Math.max(y,d,f)+i,x=this._isOutsideView({popupHeight:_,popupWidth:b,screenLocation:o,side:"right",view:a}),E=this._isOutsideView({popupHeight:_,popupWidth:b,screenLocation:o,side:"left",view:a}),C=this._isOutsideView({popupHeight:_,popupWidth:b,screenLocation:o,side:"top",view:a}),k=this._isOutsideView({popupHeight:_,popupWidth:b,screenLocation:o,side:"bottom",view:a});return E?C?"bottom-right":"top-right":x?C?"bottom-left":"top-left":C?k?"top-center":"bottom-center":"top-center"}_callCurrentAlignment(e){return typeof e=="function"?e.call(this):e}_getCurrentAlignment(){const{alignment:e,dockEnabled:i,_containerNode:r}=this;return!i&&this.viewModel.active&&r?this._calculatePositionResult(this._calculateAutoAlignment(this._callCurrentAlignment(e))):null}_setCurrentAlignment(){this._set("currentAlignment",this._getCurrentAlignment())}_setCurrentDockPosition(){this._set("currentDockPosition",this._getCurrentDockPosition())}_calculatePositionResult(e){const i=["left","right"];return Al(this.container)&&i.reverse(),e==null?void 0:e.replace(/leading/gi,i[0]).replaceAll(/trailing/gi,i[1])}_callDockPosition(e){return typeof e=="function"?e.call(this):e}_getDockPosition(){var e;return this._calculatePositionResult(this._calculateAutoDockPosition(this._callDockPosition((e=this.dockOptions)==null?void 0:e.position)))}_getCurrentDockPosition(){return this.dockEnabled&&this.viewModel.active?this._getDockPosition():null}_calculateAutoDockPosition(e){var a;if(e!=="auto")return e;const i=(a=this.viewModel)==null?void 0:a.view,r=Al(this.container)?"top-left":"top-right";if(!i)return r;const n=i.padding||{left:0,right:0},s=i.width-n.left-n.right,{breakpoints:o}=i;return o&&s<=o.xsmall?"bottom-center":r}_getDockIcon(){const e=this._getDockPosition();if(this.dockEnabled)return"minimize";switch(e){case"top-left":case"bottom-left":return"dock-left";case"top-center":return"maximize";case"bottom-center":return"dock-bottom";default:return"dock-right"}}_handleDockIcon(){this._dockAction.icon=this._getDockIcon()}_handleDockEnabled(){var e,i;this._dockAction.title=this.dockEnabled?(e=this.messages)==null?void 0:e.undock:(i=this.messages)==null?void 0:i.dock}_setMainContainerNode(e){this._mainContainerNode=e}_positionContainer(e=this._containerNode){if(e&&(this._containerNode=e),!this._containerNode)return;const{screenLocation:i}=this.viewModel,{width:r}=this._containerNode.getBoundingClientRect(),n=this._calculatePositionStyle(i,r);n&&Object.assign(this._containerNode.style,n)}_calculateFullWidth(e){const{currentAlignment:i,_pointerOffsetInPx:r}=this;return i==="top-left"||i==="bottom-left"||i==="top-right"||i==="bottom-right"?e+r:e}_calculateAlignmentPosition(e,i,r,n){const{currentAlignment:s,_pointerOffsetInPx:o}=this;if(!r)return;const{padding:a}=r,l=n/2,c=r.height-i,d=r.width-e;return s==="bottom-center"?{top:i+o-a.top,left:e-l-a.left}:s==="top-left"?{bottom:c+o-a.bottom,right:d+o-a.right}:s==="bottom-left"?{top:i+o-a.top,right:d+o-a.right}:s==="top-right"?{bottom:c+o-a.bottom,left:e+o-a.left}:s==="bottom-right"?{top:i+o-a.top,left:e+o-a.left}:s==="top-center"?{bottom:c+o-a.bottom,left:e-l-a.left}:void 0}_calculatePositionStyle(e,i){const{dockEnabled:r,view:n}=this;if(!n)return;if(r)return{left:"",top:"",right:"",bottom:""};if(e==null||!i)return;const s=this._calculateFullWidth(i),o=this._calculateAlignmentPosition(e.x,e.y,n,s);return o?{top:o.top!==void 0?`${o.top}px`:"auto",left:o.left!==void 0?`${o.left}px`:"auto",bottom:o.bottom!==void 0?`${o.bottom}px`:"auto",right:o.right!==void 0?`${o.right}px`:"auto"}:void 0}_viewChange(e,i){e&&i&&(this.close(),this.clear())}_viewReadyChange(e,i){e?this._wireUpView():i&&(this.close(),this.clear())}_wireUpView(){this._setDockEnabledForViewSize(this.dockOptions)}_dockingThresholdCrossed(e,i,r){const[n,s]=e,[o,a]=i,{width:l=0,height:c=0}=r??{};return n<=l&&o>l||n>l&&o<=l||s<=c&&a>c||s>c&&a<=c}_updateDockEnabledForViewSize(e,i){var d,f;if(!e||!i)return;const r=((f=(d=this.viewModel)==null?void 0:d.view)==null?void 0:f.padding)||{left:0,right:0,top:0,bottom:0},n=r.left+r.right,s=r.top+r.bottom,o=[],a=[];o[0]=e[0]-n,o[1]=e[1]-s,a[0]=i[0]-n,a[1]=i[1]-s;const{dockOptions:l}=this,c=l.breakpoint;this._dockingThresholdCrossed(o,a,c)&&this._setDockEnabledForViewSize(l),this._setCurrentDockPosition()}_toggleScreenLocationEnabled(){const{dockEnabled:e,viewModel:i}=this;if(!i)return;const r=i.active&&!e;i.screenLocationEnabled=r}_shouldDockAtCurrentViewSize(e){var l,c;const i=e.breakpoint,r=(c=(l=this.viewModel)==null?void 0:l.view)==null?void 0:c.ui;if(!r)return!1;const{width:n,height:s}=r;if(isNaN(n)||isNaN(s)||!i)return!1;const o=i.hasOwnProperty("width")&&n<=(i.width??0),a=i.hasOwnProperty("height")&&s<=(i.height??0);return o||a}_setDockEnabledForViewSize(e){e.breakpoint&&(this.dockEnabled=this._shouldDockAtCurrentViewSize(e))}};u([h()],xi.prototype,"_containerNode",void 0),u([h({readOnly:!0})],xi.prototype,"_featureNavigationTop",null),u([h()],xi.prototype,"actions",null),u([h({readOnly:!0})],xi.prototype,"active",null),u([h()],xi.prototype,"alignment",void 0),u([h()],xi.prototype,"autoCloseEnabled",null),u([h()],xi.prototype,"defaultPopupTemplateEnabled",null),u([h()],xi.prototype,"content",null),u([h()],xi.prototype,"collapsed",null),u([h({readOnly:!0})],xi.prototype,"currentAlignment",null),u([h({readOnly:!0})],xi.prototype,"currentDockPosition",null),u([h()],xi.prototype,"dockOptions",null),u([h()],xi.prototype,"dockEnabled",void 0),u([h({readOnly:!0})],xi.prototype,"featureCount",null),u([h()],xi.prototype,"featureMenuOpen",null),u([h()],xi.prototype,"features",null),u([h()],xi.prototype,"goToOverride",null),u([h()],xi.prototype,"headingLevel",void 0),u([h()],xi.prototype,"highlightEnabled",null),u([h()],xi.prototype,"icon",null),u([h()],xi.prototype,"initialDisplayMode",null),u([h()],xi.prototype,"location",null),u([h()],xi.prototype,"label",null),u([h(),nn("esri/widgets/Popup/t9n/Popup")],xi.prototype,"messages",void 0),u([h()],xi.prototype,"promises",null),u([h({readOnly:!0})],xi.prototype,"selectedFeature",null),u([h({readOnly:!0})],xi.prototype,"selectedDrillInFeature",null),u([h()],xi.prototype,"selectedFeatureIndex",null),u([h({readOnly:!0})],xi.prototype,"selectedFeatureWidget",null),u([h()],xi.prototype,"title",null),u([h()],xi.prototype,"updateLocationEnabled",null),u([h()],xi.prototype,"view",null),u([h({type:y3}),tbe(["triggerAction","trigger-action"])],xi.prototype,"viewModel",void 0),u([h()],xi.prototype,"visible",null),u([h({type:fc,nonNullable:!0})],xi.prototype,"visibleElements",void 0),xi=u([V("esri.widgets.Popup")],xi);const swe=xi,Qne=Object.freeze(Object.defineProperty({__proto__:null,default:swe},Symbol.toStringTag,{value:"Module"})),qQe="6e7cf1cccdbd4711b9c79d568d8c108b",HQe="U.S. Presidential Election Trends (2000-2024)",WQe=2311162,ZQe=2311162,owe=18489200,g3=[2008,2012,2016,2020,2024],awe=g3[0],lwe=g3[g3.length-1],JQe=new qi({geometry:new _t({longitude:-98.5795,latitude:39.8283}),attributes:{ObjectID:1776,state:`U.S. Presidential Election Results ${awe}-${lwe}`,dem_2000:50999897,rep_2000:48885097,oth_2000:3458956,rep_ev_2000:271,dem_ev_2000:266,dem_2004:59028444,rep_2004:62040610,oth_2004:2529916,rep_ev_2004:286,dem_ev_2004:251,dem_2008:69498516,rep_2008:59948323,oth_2008:2352485,rep_ev_2008:173,dem_ev_2008:365,dem_2012:65915795,rep_2012:60933504,oth_2012:2345950,rep_ev_2012:206,dem_ev_2012:332,dem_2016:65853514,rep_2016:62984828,oth_2016:750884,rep_ev_2016:304,dem_ev_2016:227,dem_2020:81268856,rep_2020:74216752,oth_2020:2922155,rep_ev_2020:232,dem_ev_2020:306,dem_2024:75019257,rep_2024:77303573,oth_2024:3101635,rep_ev_2024:312,dem_ev_2024:226}}),Cl={2e3:{republican:{candidate:"Bush",electoralVotes:271},democrat:{candidate:"Gore",electoralVotes:266},other:{candidate:"Other",electoralVotes:0}},2004:{republican:{candidate:"Bush",electoralVotes:286},democrat:{candidate:"Kerry",electoralVotes:251},other:{candidate:"Other",electoralVotes:0}},2008:{republican:{candidate:"McCain",electoralVotes:173},democrat:{candidate:"Obama",electoralVotes:365},other:{candidate:"Other",electoralVotes:0}},2012:{republican:{candidate:"Romney",electoralVotes:206},democrat:{candidate:"Obama",electoralVotes:332},other:{candidate:"Other",electoralVotes:0}},2016:{republican:{candidate:"Trump",electoralVotes:304},democrat:{candidate:"Clinton",electoralVotes:227},other:{candidate:"Other",electoralVotes:0}},2020:{republican:{candidate:"Trump",electoralVotes:232},democrat:{candidate:"Biden",electoralVotes:306},other:{candidate:"Other",electoralVotes:0}},2024:{republican:{candidate:"Trump",electoralVotes:312},democrat:{candidate:"Harris",electoralVotes:226},other:{candidate:"Other",electoralVotes:0}}},wM={title:{state:"{state}",county:"{county} County, {state}",country:`U.S. Presidential Election Results ${awe}-${lwe}`}},Xn=new _e("rgba(220, 75, 0, 1)"),Kn=new _e("rgba(60, 108, 204,1)"),Ls=new _e("rgba(181, 166, 0, 1)"),Ki=new _e("#f7f7f7"),Qi=1,_M=Xn.toJSON(),xM=Kn.toJSON(),SM=Ls.toJSON(),rD="SUM_",kn=[{value:0,size:8},{value:1e5,size:10},{value:5e5,size:15},{value:4e6,size:20},{value:12e6,size:50}],Pn=[{value:0,size:2},{value:1e4,size:4},{value:1e5,size:8},{value:5e5,size:16},{value:2e6,size:32}],An=[{value:0,size:2},{value:1e4,size:4},{value:1e5,size:8},{value:5e5,size:16},{value:2e6,size:32}],Ln=[{value:0,size:6},{value:.1,size:12},{value:1,size:24},{value:2,size:32},{value:3,size:50}],Rn=[{value:0,size:3},{value:1e3,size:6},{value:5e3,size:10},{value:1e4,size:14},{value:5e4,size:20}],uA=t=>`
    var dem = $feature.SUM_dem_${t};
    var rep = $feature.SUM_rep_${t};
    var oth = $feature.SUM_oth_${t};
    var all = [dem, rep, oth];
  `,tV=t=>`
    var dem = $feature.dem_${t};
    var rep = $feature.rep_${t};
    var oth = $feature.oth_${t};
    var all = [dem, rep, oth];
  `,iV=t=>`
    var demNext = $feature.dem_${t};
    var repNext = $feature.rep_${t};
    var othNext = $feature.oth_${t};
    var allNext = Sum([demNext, repNext, othNext]);
  `,yR=t=>{const e=t,i=t-4;return`
    var demNext = $feature.dem_${e};
    var repNext = $feature.rep_${e};
    var othNext = $feature.oth_${e};
    var allNext = Sum([demNext, repNext, othNext]);

    var demPrevious = $feature.dem_${i};
    var repPrevious = $feature.rep_${i};
    var othPrevious = $feature.oth_${i};
    var allPrevious = Sum([demPrevious, repPrevious, othPrevious]);


    var percentNext = (votesNext / allNext) * 100;
    var percentPrevious = (votesPrevious / allPrevious) * 100;
    var shift = percentNext - percentPrevious;
  `},rV=t=>`
    ${yR(t)}

    var shiftText = IIF(shift > 0, Text(shift, '+#,###.0'), Text(shift, '#,###.0'));
    return shiftText + "%";
  `,nV=t=>`
    var demNext = $feature.SUM_dem_${t};
    var repNext = $feature.SUM_rep_${t};
    var othNext = $feature.SUM_oth_${t};
    var allNext = Sum([demNext, repNext, othNext]);
  `,gR=t=>{const e=t,i=t-4;return`
    var demNext = $feature.SUM_dem_${e};
    var repNext = $feature.SUM_rep_${e};
    var othNext = $feature.SUM_oth_${e};
    var allNext = Sum([demNext, repNext, othNext]);

    var demPrevious = $feature.SUM_dem_${i};
    var repPrevious = $feature.SUM_rep_${i};
    var othPrevious = $feature.SUM_oth_${i};
    var allPrevious = Sum([demPrevious, repPrevious, othPrevious]);


    var percentNext = (votesNext / allNext) * 100;
    var percentPrevious = (votesPrevious / allPrevious) * 100;
    var shift = percentNext - percentPrevious;
  `},sV=t=>`
    ${gR(t)}

    var shiftText = IIF(shift > 0, Text(shift, '+#,###.0'), Text(shift, '#,###.0'));
    return shiftText + "%";
  `,Px=`
  var share = (votes / allNext);
  return Text(share, '##.0%');
`,$c=`
  var diff = votesNext - votesPrevious;
  var change = ( (votesNext - votesPrevious) / votesPrevious );
  var diffText = IIF(diff > 0, Text(diff, '+#,###'), Text(diff, '#,###'));
  var changeText = IIF(change > 0, Text(change, '↑#,###.#%'), Text(abs(change), '↓#,###.#%'));
`,Ax=`
  var diff = votesNext - votesPrevious;
  var change = ( (votesNext - votesPrevious) / votesPrevious );
  return IIF(diff > 0, "green", "red");
`,Lx=`
  return IIF(shift > 0, "green", "red");
`,er=`
  var change = valueNext - valuePrevious;
  IIF(change > 0, Text(change, '+#,###'), Text(change, '#,###'));
`,YQe=`
  var scaleFactorBase = ( ${owe} / $view.scale );
  var scaleFactor = When(
    scaleFactorBase >= 1, 1,  // 1
    scaleFactorBase >= 0.5, scaleFactorBase * 1,  // 0.6
    scaleFactorBase >= 0.25, scaleFactorBase * 1,  // 0.45
    scaleFactorBase >= 0.125, scaleFactorBase * 1,  // 0.3125
    scaleFactorBase * 1  // 0.1875
  );
`,XQe=`
  var sizeFactor = When(
    value >= ${Pn[4].value}, ${Pn[4].size},
    value >= ${Pn[3].value}, ${Pn[3].size} + (${Oc(Pn[3],Pn[4])} * (value - ${Pn[3].value})),
    value >= ${Pn[2].value}, ${Pn[2].size} + (${Oc(Pn[2],Pn[3])} * (value - ${Pn[2].value})),
    value >= ${Pn[1].value}, ${Pn[1].size} + (${Oc(Pn[1],Pn[2])} * (value - ${Pn[1].value})),
    value > ${Pn[0].value}, ${Pn[0].size} + (${Oc(Pn[0],Pn[1])} * value),
    0
  );
`,L_=`
  ${XQe}

  ${YQe}
  return sizeFactor * scaleFactor;
`;`${kn[4].value}${kn[4].size}${kn[3].value}${kn[3].size}${Oc(kn[3],kn[4])}${kn[3].value}${kn[2].value}${kn[2].size}${Oc(kn[2],kn[3])}${kn[2].value}${kn[1].value}${kn[1].size}${Oc(kn[1],kn[2])}${kn[1].value}${kn[0].value}${kn[0].size}${Oc(kn[0],kn[1])}`;const KQe=`
  var sizeFactor = When(
    percentStateVotes >= ${Ln[4].value}, ${Ln[4].size},
    percentStateVotes >= ${Ln[3].value}, ${Ln[3].size} + (${Oc(Ln[3],Ln[4])} * (percentStateVotes - ${Ln[3].value})),
    percentStateVotes >= ${Ln[2].value}, ${Ln[2].size} + (${Oc(Ln[2],Ln[3])} * (percentStateVotes - ${Ln[2].value})),
    percentStateVotes >= ${Ln[1].value}, ${Ln[1].size} + (${Oc(Ln[1],Ln[2])} * (percentStateVotes - ${Ln[1].value})),
    percentStateVotes > ${Ln[0].value}, ${Ln[0].size} + (${Oc(Ln[0],Ln[1])} * percentStateVotes),
    0
  );
`,QQe=`
  var scaleFactorBase = Round( ${ZQe} / $view.scale, 1 );
  var scaleFactor = When(
    scaleFactorBase >= 8, scaleFactorBase / 6,
    scaleFactorBase >= 4, scaleFactorBase / 3,  // 1
    scaleFactorBase >= 2, scaleFactorBase / 1.7,
    scaleFactorBase >= 1, scaleFactorBase,  // 1
    scaleFactorBase >= 0.5, scaleFactorBase * 1.2,  // 0.6
    scaleFactorBase >= 0.25, scaleFactorBase * 1.2,  // 0.45
    scaleFactorBase >= 0.125, scaleFactorBase * 2.5,  // 0.3125
    scaleFactorBase * 3  // 0.1875
  );
`,R_=`
  ${KQe}

  ${QQe}
  return sizeFactor * scaleFactor;
`;function Oc(t,e){const i=e.size-t.size,r=e.value-t.value;return i/r}const eet=t=>{const e=t,i=t-4;return new pm({title:`${wM.title.state}`,fieldInfos:[new Ps({fieldName:`SUM_dem_${i}`,label:`${i} Democrat votes`,format:new Ks({places:0,digitSeparator:!0})}),new Ps({fieldName:`SUM_rep_${i}`,label:`${i} Republican votes`,format:new Ks({places:0,digitSeparator:!0})}),new Ps({fieldName:`SUM_oth_${i}`,label:`${i} Other votes`,format:new Ks({places:0,digitSeparator:!0})}),new Ps({fieldName:`SUM_dem_${e}`,label:`${e} Democrat votes`,format:new Ks({places:0,digitSeparator:!0})}),new Ps({fieldName:`SUM_rep_${e}`,label:`${e} Republican votes`,format:new Ks({places:0,digitSeparator:!0})}),new Ps({fieldName:`SUM_oth_${e}`,label:`${e} Other votes`,format:new Ks({places:0,digitSeparator:!0})})],content:[new nd({text:`
          <span style='color: {expression/winner-color}; font-weight:bolder'>{expression/winner}</span>
          won ${wM.title.state}'s <strong>{ev_${e}}</strong> electoral votes by a margin of <span style='color: {expression/winner-color}; font-weight:bolder'>{expression/winner-margin-votes}</span> votes (<span style='color: {expression/winner-color}; font-weight:bolder'>{expression/winner-margin}</span> points).
          The {expression/winner-votes} votes cast for {expression/winner} comprise
          {expression/winner-percent-state-votes} of the total votes cast in the state.
        `}),new nd({text:`
          <div class="table-container">
            Votes in ${e} and the change from ${i}
            <br/>
            <br/>
            <table class="esri-widget popup">
              <tr class="head"><td>Party</td><td>Votes</td><td>+/-</td><td>%</td><td>+/-</td><td>% Change</td></tr>

              <tr class="dem"><td><span style='color:${Kn}; font-weight:bolder'>${Cl[e].democrat.candidate}</span></td><td class="num">{SUM_dem_${e}}</td><td class="num"><span style='color: {expression/dem-change-color}'>{expression/dem${i}diff${e}}</span></td>

              <td class="num">{expression/demShare${e}}</td>
              <td class="num"><span style='color: {expression/dem-shift-color}'>{expression/dem${i}shift${e}}</span></td>

              <td class="num"><span style='color: {expression/dem-change-color}'>{expression/dem${i}change${e}}</span></td></tr>


              <tr class="rep"><td><span style='color:${Xn}; font-weight:bolder'>${Cl[e].republican.candidate}</span></td><td class="num">{SUM_rep_${e}}</td><td class="num"><span style='color: {expression/rep-change-color}'>{expression/rep${i}diff${e}}</span></td>

              <td class="num">{expression/repShare${e}}</td>
              <td class="num"><span style='color: {expression/rep-shift-color}'>{expression/rep${i}shift${e}}</span></td>

              <td class="num"><span style='color: {expression/rep-change-color}'>{expression/rep${i}change${e}}</span></td></tr>


              <tr class="oth"><td><span style='color:${Ls}; font-weight:bolder'>${Cl[e].other.candidate}</span></td><td class="num">{SUM_oth_${e}}</td><td class="num"><span style='color: {expression/oth-change-color}'>{expression/oth${i}diff${e}}</span></td>

              <td class="num">{expression/othShare${e}}</td>
              <td class="num"><span style='color: {expression/oth-shift-color}'>{expression/oth${i}shift${e}}</span></td>

              <td class="num"><span style='color: {expression/oth-change-color}'>{expression/oth${i}change${e}}</span></td></tr>
            </table>
          </div>
        `})],expressionInfos:[new Ht({title:"winner % of state votes",name:"winner-percent-state-votes",expression:`
          ${uA(e)}

          var winnerTotal = Max(all);
          return Text(winnerTotal/Sum(all), "#%");
        `}),new Ht({title:"winner votes",name:"winner-votes",expression:`
          ${uA(e)}

          return Text(Max(all), "#,###");
        `}),new Ht({title:"winner-color",name:"winner-color",expression:`
          ${uA(e)}

          Decode( Max(all),
            dem, "${Kn}",
            rep, "${Xn}",
            oth, "${Ls}",
          "#000000"
          );
        `}),new Ht({title:"winner",name:"winner",expression:`
          ${uA(e)}

          Decode( Max(all),
            dem, "${Cl[e].democrat.candidate}",
            rep, "${Cl[e].republican.candidate}",
            oth, "${Cl[e].other.candidate}",
          "tie"
          );
        `}),new Ht({title:`Democrat change from ${i}`,name:`dem${i}change${e}`,expression:`
          var votesNext = $feature.SUM_dem_${e};
          var votesPrevious = $feature.SUM_dem_${i};
          ${$c}
          return changeText;
        `}),new Ht({title:`Republican change from ${i}`,name:`rep${i}change${e}`,expression:`
          var votesNext = $feature.SUM_rep_${e}
          var votesPrevious = $feature.SUM_rep_${i}
          ${$c}
          return changeText;
        `}),new Ht({title:`Other change from ${i}`,name:`oth${i}change${e}`,expression:`
          var votesNext = $feature.SUM_oth_${e};
          var votesPrevious = $feature.SUM_oth_${i};
          ${$c}
          return changeText;
        `}),new Ht({title:`Democrat diff from ${i}`,name:`dem${i}diff${e}`,expression:`
          var votesNext = $feature.SUM_dem_${e};
          var votesPrevious = $feature.SUM_dem_${i};
          ${$c}
          return diffText;
        `}),new Ht({title:`Republican diff from ${i}`,name:`rep${i}diff${e}`,expression:`
          var votesNext = $feature.SUM_rep_${e}
          var votesPrevious = $feature.SUM_rep_${i}
          ${$c}
          return diffText;
        `}),new Ht({title:`Other diff from ${i}`,name:`oth${i}diff${e}`,expression:`
          var votesNext = $feature.SUM_oth_${e};
          var votesPrevious = $feature.SUM_oth_${i};
          ${$c}
          return diffText;
        `}),new Ht({title:`Republican shift from ${i}`,name:`rep${i}shift${e}`,expression:`
          var votesNext = $feature.SUM_rep_${e}
          var votesPrevious = $feature.SUM_rep_${i}

          ${sV(e)}
        `}),new Ht({title:`Democrat shift from ${i}`,name:`dem${i}shift${e}`,expression:`
          var votesNext = $feature.SUM_dem_${e};
          var votesPrevious = $feature.SUM_dem_${i};

          ${sV(e)}
        `}),new Ht({title:`Other shift from ${i}`,name:`oth${i}shift${e}`,expression:`
          var votesNext = $feature.SUM_oth_${e};
          var votesPrevious = $feature.SUM_oth_${i};

          ${sV(e)}
        `}),new Ht({title:`Republican share ${e}`,name:`repShare${e}`,expression:`
          ${nV(e)}

          var votes = $feature.SUM_rep_${e}

          ${Px}
        `}),new Ht({title:`Democrat share ${e}`,name:`demShare${e}`,expression:`
          ${nV(e)}

          var votes = $feature.SUM_dem_${e};

          ${Px}
        `}),new Ht({title:`Other share ${e}`,name:`othShare${e}`,expression:`
          ${nV(e)}

          var votes = $feature.SUM_oth_${e};

          ${Px}
        `}),new Ht({title:"shift-color",name:"dem-shift-color",expression:`
          var votesNext = $feature.SUM_dem_${e};
          var votesPrevious = $feature.SUM_dem_${i};
          ${gR(e)}
          ${Lx}
        `}),new Ht({title:"shift-color",name:"rep-shift-color",expression:`
          var votesNext = $feature.SUM_rep_${e}
          var votesPrevious = $feature.SUM_rep_${i}
          ${gR(e)}
          ${Lx}
        `}),new Ht({title:"shift-color",name:"oth-shift-color",expression:`
          var votesNext = $feature.SUM_oth_${e};
          var votesPrevious = $feature.SUM_oth_${i};
          ${gR(e)}
          ${Lx}
        `}),new Ht({title:"change-color",name:"dem-change-color",expression:`
          var votesNext = $feature.SUM_dem_${e};
          var votesPrevious = $feature.SUM_dem_${i};
          ${Ax}
        `}),new Ht({title:"change-color",name:"rep-change-color",expression:`
          var votesNext = $feature.SUM_rep_${e}
          var votesPrevious = $feature.SUM_rep_${i}
          ${Ax}
        `}),new Ht({title:"change-color",name:"oth-change-color",expression:`
          var votesNext = $feature.SUM_oth_${e};
          var votesPrevious = $feature.SUM_oth_${i};
          ${Ax}
        `}),new Ht({title:"winner-margin",name:"winner-margin",expression:`
          var fields = [
            $feature.SUM_dem_${e},
            $feature.SUM_rep_${e},
            $feature.SUM_oth_${e}
          ];

          var top2 = Top(Reverse(Sort(fields)), 2);
          var winner = First(top2);
          var secondPlace = top2[1];
          var total = Sum(fields);
          return Text( (winner - secondPlace) / total, "#.#%");
        `}),new Ht({title:"winner-margin-votes",name:"winner-margin-votes",expression:`
          var fields = [
            $feature.SUM_dem_${e},
            $feature.SUM_rep_${e},
            $feature.SUM_oth_${e}
          ];

          var top2 = Top(Reverse(Sort(fields)), 2);
          var winner = First(top2);
          var secondPlace = top2[1];
          return Text( (winner - secondPlace), "#,###");
        `})]})},tet=t=>{const e=t,i=t-4;return new pm({title:`${wM.title.county}`,fieldInfos:[new Ps({fieldName:`dem_${i}`,label:`${i} Democrat votes`,format:new Ks({places:0,digitSeparator:!0})}),new Ps({fieldName:`rep_${i}`,label:`${i} Republican votes`,format:new Ks({places:0,digitSeparator:!0})}),new Ps({fieldName:`oth_${i}`,label:`${i} Other votes`,format:new Ks({places:0,digitSeparator:!0})}),new Ps({fieldName:`dem_${e}`,label:`${e} Democrat votes`,format:new Ks({places:0,digitSeparator:!0})}),new Ps({fieldName:`rep_${e}`,label:`${e} Republican votes`,format:new Ks({places:0,digitSeparator:!0})}),new Ps({fieldName:`oth_${e}`,label:`${e} Other votes`,format:new Ks({places:0,digitSeparator:!0})})],content:[new nd({text:`
          <span style='color: {expression/winner-color}; font-weight:bolder'>{expression/winner}</span>
          won ${wM.title.county} by a margin of
          <span style='color: {expression/winner-color}; font-weight:bolder'>{expression/winner-margin-votes}</span> votes (<span style='color: {expression/winner-color}; font-weight:bolder'>{expression/winner-margin}</span> points).
          The {expression/winner-votes} votes cast for {expression/winner} comprise
          {expression/winner-percent-state-votes} of the total votes cast in the state.
        `}),new nd({text:`
          <div class="table-container">
            Votes in ${e} and the change from ${i}
            <br/>
            <br/>
            <table class="esri-widget popup">
              <tr class="head"><td>Party</td><td>Votes</td><td>+/-</td><td>%</td><td>+/-</td><td>% Change</td></tr>

              <tr class="dem"><td><span style='color:${Kn}; font-weight:bolder'>${Cl[e].democrat.candidate}</span></td><td class="num">{${`dem_${e}`}}</td><td class="num"><span style='color: {expression/dem-change-color}'>{expression/dem${i}diff${e}}</span></td>

              <td class="num">{expression/demShare${e}}</td>
              <td class="num"><span style='color: {expression/dem-shift-color}'>{expression/dem${i}shift${e}}</span></td>

              <td class="num"><span style='color: {expression/dem-change-color}'>{expression/dem${i}change${e}}</span></td></tr>


              <tr class="rep"><td><span style='color:${Xn}; font-weight:bolder'>${Cl[e].republican.candidate}</span></td><td class="num">{${`rep_${e}`}}</td><td class="num"><span style='color: {expression/rep-change-color}'>{expression/rep${i}diff${e}}</span></td>

              <td class="num">{expression/repShare${e}}</td>
              <td class="num"><span style='color: {expression/rep-shift-color}'>{expression/rep${i}shift${e}}</span></td>

              <td class="num"><span style='color: {expression/rep-change-color}'>{expression/rep${i}change${e}}</span></td></tr>


              <tr class="oth"><td><span style='color:${Ls}; font-weight:bolder'>${Cl[e].other.candidate}</span></td><td class="num">{${`oth_${e}`}}</td><td class="num"><span style='color: {expression/oth-change-color}'>{expression/oth${i}diff${e}}</span></td>

              <td class="num">{expression/othShare${e}}</td>
              <td class="num"><span style='color: {expression/oth-shift-color}'>{expression/oth${i}shift${e}}</span></td>

              <td class="num"><span style='color: {expression/oth-change-color}'>{expression/oth${i}change${e}}</span></td></tr>
            </table>
          </div>
        `})],expressionInfos:[new Ht({title:"winner % of state votes",name:"winner-percent-state-votes",expression:`
          var dem = $feature.${`dem_${e}`};
          var rep = $feature.${`rep_${e}`};
          var oth = $feature.${`oth_${e}`};
          var all = [dem, rep, oth];

          var winnerTotal = Max(all);
          return Text(winnerTotal/$feature.TOTAL_STATE_VOTES_${e}, "#%");
        `}),new Ht({title:"winner votes",name:"winner-votes",expression:`
          ${tV(e)}

          return Text(Max(all), "#,###");
        `}),new Ht({title:"winner-color",name:"winner-color",expression:`
          ${tV(e)}

          Decode( Max(all),
            dem, "${Kn}",
            rep, "${Xn}",
            oth, "${Ls}",
          "#000000"
          );
        `}),new Ht({title:"winner",name:"winner",expression:`
          ${tV(e)}

          Decode( Max(all),
            dem, "${Cl[e].democrat.candidate}",
            rep, "${Cl[e].republican.candidate}",
            oth, "${Cl[e].other.candidate}",
          "tie"
          );
        `}),new Ht({title:`Democrat change from ${i}`,name:`dem${i}change${e}`,expression:`
          var votesNext = $feature.${`dem_${e}`};
          var votesPrevious = $feature.${`dem_${i}`};
          ${$c}
          return changeText;
        `}),new Ht({title:`Republican change from ${i}`,name:`rep${i}change${e}`,expression:`
          var votesNext = $feature.${`rep_${e}`};
          var votesPrevious = $feature.${`rep_${i}`};
          ${$c}
          return changeText;
        `}),new Ht({title:`Other change from ${i}`,name:`oth${i}change${e}`,expression:`
          var votesNext = $feature.${`oth_${e}`};
          var votesPrevious = $feature.${`oth_${i}`};
          ${$c}
          return changeText;
        `}),new Ht({title:`Democrat diff from ${i}`,name:`dem${i}diff${e}`,expression:`
          var votesNext = $feature.${`dem_${e}`};
          var votesPrevious = $feature.${`dem_${i}`};
          ${$c}
          return diffText;
        `}),new Ht({title:`Republican diff from ${i}`,name:`rep${i}diff${e}`,expression:`
          var votesNext = $feature.${`rep_${e}`};
          var votesPrevious = $feature.${`rep_${i}`};
          ${$c}
          return diffText;
        `}),new Ht({title:`Other diff from ${i}`,name:`oth${i}diff${e}`,expression:`
          var votesNext = $feature.${`oth_${e}`};
          var votesPrevious = $feature.${`oth_${i}`};
          ${$c}
          return diffText;
        `}),new Ht({title:`Republican shift from ${i}`,name:`rep${i}shift${e}`,expression:`
          var votesNext = $feature.${`rep_${e}`};
          var votesPrevious = $feature.${`rep_${i}`};

          ${rV(e)}
        `}),new Ht({title:`Democrat shift from ${i}`,name:`dem${i}shift${e}`,expression:`
          var votesNext = $feature.${`dem_${e}`};
          var votesPrevious = $feature.${`dem_${i}`};

          ${rV(e)}
        `}),new Ht({title:`Other shift from ${i}`,name:`oth${i}shift${e}`,expression:`
          var votesNext = $feature.${`oth_${e}`};
          var votesPrevious = $feature.${`oth_${i}`};

          ${rV(e)}
        `}),new Ht({title:`Republican share ${e}`,name:`repShare${e}`,expression:`
          ${iV(e)}

          var votes = $feature.${`rep_${e}`};

          ${Px}
        `}),new Ht({title:`Democrat share ${e}`,name:`demShare${e}`,expression:`
          ${iV(e)}

          var votes = $feature.${`dem_${e}`};

          ${Px}
        `}),new Ht({title:`Other share ${e}`,name:`othShare${e}`,expression:`
          ${iV(e)}

          var votes = $feature.${`oth_${e}`};

          ${Px}
        `}),new Ht({title:"shift-color",name:"dem-shift-color",expression:`
          var votesNext = $feature.${`dem_${e}`};
          var votesPrevious = $feature.${`dem_${i}`};
          ${yR(e)}
          ${Lx}
        `}),new Ht({title:"shift-color",name:"rep-shift-color",expression:`
          var votesNext = $feature.${`rep_${e}`};
          var votesPrevious = $feature.${`rep_${i}`};
          ${yR(e)}
          ${Lx}
        `}),new Ht({title:"shift-color",name:"oth-shift-color",expression:`
          var votesNext = $feature.${`oth_${e}`};
          var votesPrevious = $feature.${`oth_${i}`};
          ${yR(e)}
          ${Lx}
        `}),new Ht({title:"change-color",name:"dem-change-color",expression:`
          var votesNext = $feature.${`dem_${e}`};
          var votesPrevious = $feature.${`dem_${i}`};
          ${Ax}
        `}),new Ht({title:"change-color",name:"rep-change-color",expression:`
          var votesNext = $feature.${`rep_${e}`};
          var votesPrevious = $feature.${`rep_${i}`};
          ${Ax}
        `}),new Ht({title:"change-color",name:"oth-change-color",expression:`
          var votesNext = $feature.${`oth_${e}`};
          var votesPrevious = $feature.${`oth_${i}`};
          ${Ax}
        `}),new Ht({title:"winner-margin",name:"winner-margin",expression:`
          var fields = [
            $feature.${`dem_${e}`},
            $feature.${`rep_${e}`},
            $feature.${`oth_${e}`}
          ];

          var top2 = Top(Reverse(Sort(fields)), 2);
          var winner = First(top2);
          var secondPlace = top2[1];
          var total = Sum(fields);
          return Text( (winner - secondPlace) / total, "#.#%");
        `}),new Ht({title:"winner-margin-votes",name:"winner-margin-votes",expression:`
          var fields = [
            $feature.${`dem_${e}`},
            $feature.${`rep_${e}`},
            $feature.${`oth_${e}`}
          ];

          var top2 = Top(Reverse(Sort(fields)), 2);
          var winner = First(top2);
          var secondPlace = top2[1];
          return Text( (winner - secondPlace), "#,###");
        `})]})},iet=t=>{const{level:e,year:i}=t;return e==="state"?eet(i):tet(i)},ret={rings:[[[8.5,.2],[7.06,.33],[5.66,.7],[4.35,1.31],[3.16,2.14],[2.14,3.16],[1.31,4.35],[.7,5.66],[.33,7.06],[.2,8.5],[.33,9.94],[.7,11.34],[1.31,12.65],[2.14,13.84],[3.16,14.86],[4.35,15.69],[5.66,16.3],[7.06,16.67],[8.5,16.8],[9.94,16.67],[11.34,16.3],[12.65,15.69],[13.84,14.86],[14.86,13.84],[15.69,12.65],[16.3,11.34],[16.67,9.94],[16.8,8.5],[16.67,7.06],[16.3,5.66],[15.69,4.35],[14.86,3.16],[13.84,2.14],[12.65,1.31],[11.34,.7],[9.94,.33],[8.5,.2]]]};function Tc(t){const{primitiveName:e,color:i,donutEnabled:r,anchorPoint:n,outline:s}=t,o=r?{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",enable:!0,color:i,width:2.4}]}:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:i}]};return s&&s.color&&o.symbolLayers.push({type:"CIMSolidStroke",enable:!0,color:s.color,width:1}),{type:"CIMVectorMarker",enable:!0,anchorPoint:n,anchorPointUnits:"Relative",primitiveName:e,frame:{xmin:0,ymin:0,xmax:17,ymax:17},markerGraphics:[{type:"CIMMarkerGraphic",geometry:ret,symbol:o}],scaleSymbolsProportionally:!0,respectFrame:!0}}function net(t){const e=t,i=t-4;return new As({symbol:new hs({data:{type:"CIMSymbolReference",symbol:{type:"CIMPointSymbol",symbolLayers:[Tc({primitiveName:"democrat-positive-votes",anchorPoint:{x:.5,y:0},color:xM,donutEnabled:!1}),Tc({primitiveName:"democrat-negative-votes",anchorPoint:{x:.5,y:0},color:xM,donutEnabled:!0}),Tc({primitiveName:"republican-positive-votes",anchorPoint:{x:-.5,y:0},color:_M,donutEnabled:!1}),Tc({primitiveName:"republican-negative-votes",anchorPoint:{x:-.5,y:0},color:_M,donutEnabled:!0}),Tc({primitiveName:"other-positive-votes",anchorPoint:{x:0,y:-.75},color:SM,donutEnabled:!1}),Tc({primitiveName:"other-negative-votes",anchorPoint:{x:0,y:-.75},color:SM,donutEnabled:!0})]},primitiveOverrides:[{type:"CIMPrimitiveOverride",primitiveName:"democrat-positive-votes",propertyName:"Size",valueExpressionInfo:{type:"CIMExpressionInfo",title:"Increase in Democrat votes",expression:`
                var votesNext = $feature.SUM_dem_${e};
                var votesPrevious = $feature.SUM_dem_${i};
                var change = votesNext - votesPrevious;
                var value = IIF( change > 0, change, 0);
                ${L_}
              `,returnType:"Default"}},{type:"CIMPrimitiveOverride",primitiveName:"democrat-negative-votes",propertyName:"Size",valueExpressionInfo:{type:"CIMExpressionInfo",title:"Decrease in Democrat votes",expression:`
                var votesNext = $feature.SUM_dem_${e};
                var votesPrevious = $feature.SUM_dem_${i};
                var change = votesNext - votesPrevious;
                var value = IIF( change < 0, Abs(change), 0);
                ${L_}
              `,returnType:"Default"}},{type:"CIMPrimitiveOverride",primitiveName:"republican-positive-votes",propertyName:"Size",valueExpressionInfo:{type:"CIMExpressionInfo",title:"Increase in Republican votes",expression:`
                var valueNext = $feature.SUM_rep_${e};
                var valuePrevious = $feature.SUM_rep_${i};
                var change = valueNext - valuePrevious;
                var value = IIF( change > 0, change, 0);
                ${L_}
              `,returnType:"Default"}},{type:"CIMPrimitiveOverride",primitiveName:"republican-negative-votes",propertyName:"Size",valueExpressionInfo:{type:"CIMExpressionInfo",title:"Decrease in Republican votes",expression:`
                var valueNext = $feature.SUM_rep_${e};
                var valuePrevious = $feature.SUM_rep_${i};
                var change = valueNext - valuePrevious;
                var value = IIF( change < 0, Abs(change), 0);
                ${L_}
              `,returnType:"Default"}},{type:"CIMPrimitiveOverride",primitiveName:"other-positive-votes",propertyName:"Size",valueExpressionInfo:{type:"CIMExpressionInfo",title:"Increase in Other votes",expression:`
                var valueNext = $feature.SUM_oth_${e};
                var valuePrevious = $feature.SUM_oth_${i};
                var change = valueNext - valuePrevious;
                var value = IIF( change > 0, change, 0);
                ${L_}
              `,returnType:"Default"}},{type:"CIMPrimitiveOverride",primitiveName:"other-negative-votes",propertyName:"Size",valueExpressionInfo:{type:"CIMExpressionInfo",title:"Decrease in Other votes",expression:`
                var valueNext = $feature.SUM_oth_${e};
                var valuePrevious = $feature.SUM_oth_${i};
                var change = valueNext - valuePrevious;
                var value = IIF( change < 0, Abs(change), 0);
                ${L_}
              `,returnType:"Default"}}]}})})}function set(t){const e=t,i=t-4;return new As({symbol:new hs({data:{type:"CIMSymbolReference",symbol:{type:"CIMPointSymbol",symbolLayers:[Tc({primitiveName:"democrat-positive-votes",anchorPoint:{x:.5,y:0},color:xM,donutEnabled:!1}),Tc({primitiveName:"democrat-negative-votes",anchorPoint:{x:.5,y:0},color:xM,donutEnabled:!0}),Tc({primitiveName:"republican-positive-votes",anchorPoint:{x:-.5,y:0},color:_M,donutEnabled:!1}),Tc({primitiveName:"republican-negative-votes",anchorPoint:{x:-.5,y:0},color:_M,donutEnabled:!0}),Tc({primitiveName:"other-positive-votes",anchorPoint:{x:0,y:-.75},color:SM,donutEnabled:!1}),Tc({primitiveName:"other-negative-votes",anchorPoint:{x:0,y:-.75},color:SM,donutEnabled:!0})]},primitiveOverrides:[{type:"CIMPrimitiveOverride",primitiveName:"democrat-positive-votes",propertyName:"Size",valueExpressionInfo:{type:"CIMExpressionInfo",title:"Increase in Democrat votes",expression:`
                var votesNext = $feature.dem_${e};
                var votesPrevious = $feature.dem_${i};
                var change = votesNext - votesPrevious;
                var value = IIF( change > 0, change, 0);
                var percentStateVotes = ( value / $feature.TOTAL_STATE_VOTES_${e} ) * $feature.ev_${e};
                ${R_}
              `,returnType:"Default"}},{type:"CIMPrimitiveOverride",primitiveName:"democrat-negative-votes",propertyName:"Size",valueExpressionInfo:{type:"CIMExpressionInfo",title:"Decrease in Democrat votes",expression:`
                var votesNext = $feature.dem_${e};
                var votesPrevious = $feature.dem_${i};
                var change = votesNext - votesPrevious;
                var value = IIF( change < 0, Abs(change), 0);
                var percentStateVotes = ( value / $feature.TOTAL_STATE_VOTES_${e} ) * $feature.ev_${e};
                ${R_}
              `,returnType:"Default"}},{type:"CIMPrimitiveOverride",primitiveName:"republican-positive-votes",propertyName:"Size",valueExpressionInfo:{type:"CIMExpressionInfo",title:"Increase in Republican votes",expression:`
                var valueNext = $feature.rep_${e};
                var valuePrevious = $feature.rep_${i};
                var change = valueNext - valuePrevious;
                var value = IIF( change > 0, change, 0);
                var percentStateVotes = ( value / $feature.TOTAL_STATE_VOTES_${e} ) * $feature.ev_${e};
                ${R_}
              `,returnType:"Default"}},{type:"CIMPrimitiveOverride",primitiveName:"republican-negative-votes",propertyName:"Size",valueExpressionInfo:{type:"CIMExpressionInfo",title:"Decrease in Republican votes",expression:`
                var valueNext = $feature.rep_${e};
                var valuePrevious = $feature.rep_${i};
                var change = valueNext - valuePrevious;
                var value = IIF( change < 0, Abs(change), 0);
                var percentStateVotes = ( value / $feature.TOTAL_STATE_VOTES_${e} ) * $feature.ev_${e};
                ${R_}
              `,returnType:"Default"}},{type:"CIMPrimitiveOverride",primitiveName:"other-positive-votes",propertyName:"Size",valueExpressionInfo:{type:"CIMExpressionInfo",title:"Increase in Other votes",expression:`
                var valueNext = $feature.oth_${e};
                var valuePrevious = $feature.oth_${i};
                var change = valueNext - valuePrevious;
                var value = IIF( change > 0, change, 0);
                var percentStateVotes = ( value / $feature.TOTAL_STATE_VOTES_${e} ) * $feature.ev_${e};
                ${R_}
              `,returnType:"Default"}},{type:"CIMPrimitiveOverride",primitiveName:"other-negative-votes",propertyName:"Size",valueExpressionInfo:{type:"CIMExpressionInfo",title:"Decrease in Other votes",expression:`
                var valueNext = $feature.oth_${e};
                var valuePrevious = $feature.oth_${i};
                var change = valueNext - valuePrevious;
                var value = IIF( change < 0, Abs(change), 0);
                var percentStateVotes = ( value / $feature.TOTAL_STATE_VOTES_${e} ) * $feature.ev_${e};
                ${R_}
              `,returnType:"Default"}}]}})})}const oet=t=>{const{level:e,year:i}=t;return e==="state"?net(i):set(i)},Vo=.8,jo=.8,Uo=12244700,Bo=577791,aet=t=>{const e=t,i=t-4;return[new Lt({minScale:Uo,where:`ABS(SUM_dem_${e} - SUM_dem_${i}) >= 500000`,labelExpressionInfo:{expression:`
          var valueNext = $feature.SUM_dem_${e};
          var valuePrevious = $feature.SUM_dem_${i};
          ${er}
        `},deconflictionStrategy:"none",symbol:new Tt({font:new ci({weight:"bold",family:"Noto Sans",size:"10pt"}),haloColor:new _e(Ki),haloSize:Qi,color:new _e(Kn),xoffset:-50*Vo,yoffset:-25*jo})}),new Lt({minScale:Uo,where:`ABS(SUM_dem_${e} - SUM_dem_${i}) >= 100000 AND ABS(SUM_dem_${e} - SUM_dem_${i}) < 500000`,labelExpressionInfo:{expression:`
          var valueNext = $feature.SUM_dem_${e};
          var valuePrevious = $feature.SUM_dem_${i};
          ${er}
        `},deconflictionStrategy:"none",symbol:new Tt({font:new ci({weight:"bold",family:"Noto Sans",size:"10pt"}),haloColor:new _e(Ki),haloSize:Qi,color:new _e(Kn),xoffset:-40*Vo,yoffset:-20*jo})}),new Lt({minScale:Uo,where:`ABS(SUM_dem_${e} - SUM_dem_${i}) >= 50000 AND ABS(SUM_dem_${e} - SUM_dem_${i}) < 100000`,labelExpressionInfo:{expression:`
          var valueNext = $feature.SUM_dem_${e};
          var valuePrevious = $feature.SUM_dem_${i};
          ${er}
        `},deconflictionStrategy:"none",symbol:new Tt({font:new ci({weight:"bold",family:"Noto Sans",size:"10pt"}),haloColor:new _e(Ki),haloSize:Qi,color:new _e(Kn),xoffset:-40*Vo,yoffset:-10*jo})}),new Lt({minScale:Uo,where:`ABS(SUM_dem_${e} - SUM_dem_${i}) >= 10000 AND ABS(SUM_dem_${e} - SUM_dem_${i}) < 50000`,labelExpressionInfo:{expression:`
          var valueNext = $feature.SUM_dem_${e};
          var valuePrevious = $feature.SUM_dem_${i};
          ${er}
        `},deconflictionStrategy:"none",symbol:new Tt({font:new ci({weight:"bold",family:"Noto Sans",size:"10pt"}),haloColor:new _e(Ki),haloSize:Qi,color:new _e(Kn),xoffset:-30*Vo,yoffset:-10*jo})}),new Lt({minScale:Uo,where:`ABS(SUM_dem_${e} - SUM_dem_${i}) < 10000`,labelExpressionInfo:{expression:`
          var valueNext = $feature.SUM_dem_${e};
          var valuePrevious = $feature.SUM_dem_${i};
          ${er}
        `},deconflictionStrategy:"none",symbol:new Tt({font:new ci({weight:"bold",family:"Noto Sans",size:"10pt"}),haloColor:new _e(Ki),haloSize:Qi,color:new _e(Kn),xoffset:-20*Vo,yoffset:-10*jo})}),new Lt({minScale:Uo,where:`ABS(SUM_rep_${e} - SUM_rep_${i}) >= 500000`,labelExpressionInfo:{expression:`
          var valueNext = $feature.SUM_rep_${e};
          var valuePrevious = $feature.SUM_rep_${i};
          ${er}
        `},deconflictionStrategy:"none",symbol:new Tt({font:new ci({weight:"bold",family:"Noto Sans",size:"10pt"}),haloColor:new _e(Ki),haloSize:Qi,color:new _e(Xn),xoffset:50*Vo,yoffset:-20*jo})}),new Lt({minScale:Uo,where:`ABS(SUM_rep_${e} - SUM_rep_${i}) >= 100000 AND ABS(SUM_rep_${e} - SUM_rep_${i}) < 500000`,labelExpressionInfo:{expression:`
          var valueNext = $feature.SUM_rep_${e};
          var valuePrevious = $feature.SUM_rep_${i};
          ${er}
        `},deconflictionStrategy:"none",symbol:new Tt({font:new ci({weight:"bold",family:"Noto Sans",size:"10pt"}),haloColor:new _e(Ki),haloSize:Qi,color:new _e(Xn),xoffset:35*Vo,yoffset:-20*jo})}),new Lt({minScale:Uo,where:`ABS(SUM_rep_${e} - SUM_rep_${i}) >= 50000 AND ABS(SUM_rep_${e} - SUM_rep_${i}) < 100000`,labelExpressionInfo:{expression:`
          var valueNext = $feature.SUM_rep_${e};
          var valuePrevious = $feature.SUM_rep_${i};
          ${er}
        `},deconflictionStrategy:"none",symbol:new Tt({font:new ci({weight:"bold",family:"Noto Sans",size:"10pt"}),haloColor:new _e(Ki),haloSize:Qi,color:new _e(Xn),xoffset:30*Vo,yoffset:-17*jo})}),new Lt({minScale:Uo,where:`ABS(SUM_rep_${e} - SUM_rep_${i}) >= 10000 AND ABS(SUM_rep_${e} - SUM_rep_${i}) < 50000`,labelExpressionInfo:{expression:`
          var valueNext = $feature.SUM_rep_${e};
          var valuePrevious = $feature.SUM_rep_${i};
          ${er}
        `},deconflictionStrategy:"none",symbol:new Tt({font:new ci({weight:"bold",family:"Noto Sans",size:"10pt"}),haloColor:new _e(Ki),haloSize:Qi,color:new _e(Xn),xoffset:25*Vo,yoffset:-12*jo})}),new Lt({minScale:Uo,where:`ABS(SUM_rep_${e} - SUM_rep_${i}) < 10000`,labelExpressionInfo:{expression:`
          var valueNext = $feature.SUM_rep_${e};
          var valuePrevious = $feature.SUM_rep_${i};
          ${er}
        `},deconflictionStrategy:"none",symbol:new Tt({font:new ci({weight:"bold",family:"Noto Sans",size:"10pt"}),haloColor:new _e(Ki),haloSize:Qi,color:new _e(Xn),xoffset:20*Vo,yoffset:-10*jo})}),new Lt({minScale:Uo,where:`ABS(SUM_oth_${e} - SUM_oth_${i}) >= 500000`,labelExpressionInfo:{expression:`
          var valueNext = $feature.SUM_oth_${e};
          var valuePrevious = $feature.SUM_oth_${i};
          ${er}
        `},deconflictionStrategy:"none",symbol:new Tt({font:new ci({weight:"bold",family:"Noto Sans",size:"10pt"}),haloColor:new _e(Ki),haloSize:Qi,color:new _e(Ls),xoffset:20*Vo,yoffset:30*jo})}),new Lt({minScale:Uo,where:`ABS(SUM_oth_${e} - SUM_oth_${i}) >= 100000 AND ABS(SUM_oth_${e} - SUM_oth_${i}) < 500000`,labelExpressionInfo:{expression:`
        var valueNext = $feature.SUM_oth_${e};
        var valuePrevious = $feature.SUM_oth_${i};
          ${er}
        `},deconflictionStrategy:"none",symbol:new Tt({font:new ci({weight:"bold",family:"Noto Sans",size:"10pt"}),haloColor:new _e(Ki),haloSize:Qi,color:new _e(Ls),xoffset:20*Vo,yoffset:30*jo})}),new Lt({minScale:Uo,where:`
        (ABS(SUM_oth_${e} - SUM_oth_${i}) >= 50000 AND ABS(SUM_oth_${e} - SUM_oth_${i}) < 100000)
      `,labelExpressionInfo:{expression:`
        var valueNext = $feature.SUM_oth_${e};
        var valuePrevious = $feature.SUM_oth_${i};
          ${er}
        `},deconflictionStrategy:"none",symbol:new Tt({font:new ci({weight:"bold",family:"Noto Sans",size:"10pt"}),haloColor:new _e(Ki),haloSize:Qi,color:new _e(Ls),xoffset:20*Vo,yoffset:20*jo})}),new Lt({minScale:Uo,where:`
        (ABS(SUM_oth_${e} - SUM_oth_${i}) >= 10000 AND ABS(SUM_oth_${e} - SUM_oth_${i}) < 50000)
      `,labelExpressionInfo:{expression:`
        var valueNext = $feature.SUM_oth_${e};
        var valuePrevious = $feature.SUM_oth_${i};
          ${er}
        `},deconflictionStrategy:"none",symbol:new Tt({font:new ci({weight:"bold",family:"Noto Sans",size:"10pt"}),haloColor:new _e(Ki),haloSize:Qi,color:new _e(Ls),xoffset:20*Vo,yoffset:15*jo})}),new Lt({minScale:Uo,where:`
        (ABS(SUM_oth_${e} - SUM_oth_${i}) < 10000)
      `,labelExpressionInfo:{expression:`
          var valueNext = $feature.SUM_oth_${e};
          var valuePrevious = $feature.SUM_oth_${i};
          ${er}
        `},deconflictionStrategy:"none",symbol:new Tt({font:new ci({weight:"bold",family:"Noto Sans",size:"10pt"}),haloColor:new _e(Ki),haloSize:Qi,color:new _e(Ls),xoffset:10*Vo,yoffset:10*jo})})]},cet=t=>{const e=t,i=t-4;return[new Lt({minScale:Bo,where:`ABS(((dem_${e} - dem_${i}) / TOTAL_STATE_VOTES_${e}) * 100) >= 10`,labelExpressionInfo:{expression:`
          var valueNext = $feature.dem_${e};
          var valuePrevious = $feature.dem_${i};
          ${er}
        `},deconflictionStrategy:"none",labelPlacement:"center-center",symbol:new Tt({font:new ci({weight:"bold",family:"Noto Sans",size:"10pt"}),haloColor:new _e(Ki),haloSize:Qi,color:new _e(Kn),xoffset:-50,yoffset:-25})}),new Lt({minScale:Bo,where:`ABS(((dem_${e} - dem_${i}) / TOTAL_STATE_VOTES_${e}) * 100) >= 5 AND ABS(((dem_${e} - dem_${i}) / TOTAL_STATE_VOTES_${e}) * 100) < 10`,labelExpressionInfo:{expression:`
          var valueNext = $feature.dem_${e};
          var valuePrevious = $feature.dem_${i};
          ${er}
        `},deconflictionStrategy:"none",labelPlacement:"center-center",symbol:new Tt({font:new ci({weight:"bold",family:"Noto Sans",size:"10pt"}),haloColor:new _e(Ki),haloSize:Qi,color:new _e(Kn),xoffset:-40,yoffset:-20})}),new Lt({minScale:Bo,where:`ABS(((dem_${e} - dem_${i}) / TOTAL_STATE_VOTES_${e}) * 100) >= 1 AND ABS(((dem_${e} - dem_${i}) / TOTAL_STATE_VOTES_${e}) * 100) < 5`,labelExpressionInfo:{expression:`
          var valueNext = $feature.dem_${e};
          var valuePrevious = $feature.dem_${i};
          ${er}
        `},deconflictionStrategy:"none",labelPlacement:"center-center",symbol:new Tt({font:new ci({weight:"bold",family:"Noto Sans",size:"10pt"}),haloColor:new _e(Ki),haloSize:Qi,color:new _e(Kn),xoffset:-40,yoffset:-10})}),new Lt({minScale:Bo,where:`ABS(((dem_${e} - dem_${i}) / TOTAL_STATE_VOTES_${e}) * 100) >= 0.5 AND ABS(((dem_${e} - dem_${i}) / TOTAL_STATE_VOTES_${e}) * 100) < 1`,labelExpressionInfo:{expression:`
          var valueNext = $feature.dem_${e};
          var valuePrevious = $feature.dem_${i};
          ${er}
        `},deconflictionStrategy:"none",labelPlacement:"center-center",symbol:new Tt({font:new ci({weight:"bold",family:"Noto Sans",size:"10pt"}),haloColor:new _e(Ki),haloSize:Qi,color:new _e(Kn),xoffset:-30,yoffset:-10})}),new Lt({minScale:Bo,where:`ABS(((dem_${e} - dem_${i}) / TOTAL_STATE_VOTES_${e}) * 100) < 0.5`,labelExpressionInfo:{expression:`
          var valueNext = $feature.dem_${e};
          var valuePrevious = $feature.dem_${i};
          ${er}
        `},deconflictionStrategy:"none",labelPlacement:"center-center",symbol:new Tt({font:new ci({weight:"bold",family:"Noto Sans",size:"10pt"}),haloColor:new _e(Ki),haloSize:Qi,color:new _e(Kn),xoffset:-20,yoffset:-10})}),new Lt({minScale:Bo,where:`ABS(((rep_${e} - rep_${i}) / TOTAL_STATE_VOTES_${e}) * 100) >= 10`,labelExpressionInfo:{expression:`
          var valueNext = $feature.rep_${e};
          var valuePrevious = $feature.rep_${i};
          ${er}
        `},deconflictionStrategy:"none",labelPlacement:"center-center",symbol:new Tt({font:new ci({weight:"bold",family:"Noto Sans",size:"10pt"}),haloColor:new _e(Ki),haloSize:Qi,color:new _e(Xn),xoffset:60,yoffset:-20})}),new Lt({minScale:Bo,where:`ABS(((rep_${e} - rep_${i}) / TOTAL_STATE_VOTES_${e}) * 100) >= 5 AND ABS(((rep_${e} - rep_${i}) / TOTAL_STATE_VOTES_${e}) * 100) < 10`,labelExpressionInfo:{expression:`
          var valueNext = $feature.rep_${e};
          var valuePrevious = $feature.rep_${i};
          ${er}
        `},deconflictionStrategy:"none",labelPlacement:"center-center",symbol:new Tt({font:new ci({weight:"bold",family:"Noto Sans",size:"10pt"}),haloColor:new _e(Ki),haloSize:Qi,color:new _e(Xn),xoffset:45,yoffset:-20})}),new Lt({minScale:Bo,where:`ABS(((rep_${e} - rep_${i}) / TOTAL_STATE_VOTES_${e}) * 100) >= 1 AND ABS(((rep_${e} - rep_${i}) / TOTAL_STATE_VOTES_${e}) * 100) < 5`,labelExpressionInfo:{expression:`
          var valueNext = $feature.rep_${e};
          var valuePrevious = $feature.rep_${i};
          ${er}
        `},deconflictionStrategy:"none",labelPlacement:"center-center",symbol:new Tt({font:new ci({weight:"bold",family:"Noto Sans",size:"10pt"}),haloColor:new _e(Ki),haloSize:Qi,color:new _e(Xn),xoffset:30,yoffset:-20})}),new Lt({minScale:Bo,where:`ABS(((rep_${e} - rep_${i}) / TOTAL_STATE_VOTES_${e}) * 100) >= 0.5 AND ABS(((rep_${e} - rep_${i}) / TOTAL_STATE_VOTES_${e}) * 100) < 1`,labelExpressionInfo:{expression:`
          var valueNext = $feature.rep_${e};
          var valuePrevious = $feature.rep_${i};
          ${er}
        `},deconflictionStrategy:"none",labelPlacement:"center-center",symbol:new Tt({font:new ci({weight:"bold",family:"Noto Sans",size:"10pt"}),haloColor:new _e(Ki),haloSize:Qi,color:new _e(Xn),xoffset:20,yoffset:-10})}),new Lt({minScale:Bo,where:`ABS(((rep_${e} - rep_${i}) / TOTAL_STATE_VOTES_${e}) * 100) < 0.5`,labelExpressionInfo:{expression:`
          var valueNext = $feature.rep_${e};
          var valuePrevious = $feature.rep_${i};
          ${er}
        `},deconflictionStrategy:"none",labelPlacement:"center-center",symbol:new Tt({font:new ci({weight:"bold",family:"Noto Sans",size:"10pt"}),haloColor:new _e(Ki),haloSize:Qi,color:new _e(Xn),xoffset:20,yoffset:-10})}),new Lt({minScale:Bo,where:`ABS(((oth_${e} - oth_${i}) / TOTAL_STATE_VOTES_${e}) * 100) >= 10`,labelExpressionInfo:{expression:`
          var valueNext = $feature.oth_${e};
          var valuePrevious = $feature.oth_${i};
          ${er}
        `},deconflictionStrategy:"none",labelPlacement:"center-center",symbol:new Tt({font:new ci({weight:"bold",family:"Noto Sans",size:"10pt"}),haloColor:new _e(Ki),haloSize:Qi,color:new _e(Ls),xoffset:30,yoffset:40})}),new Lt({minScale:Bo,where:`ABS(((oth_${e} - oth_${i}) / TOTAL_STATE_VOTES_${e}) * 100) >= 5 AND ABS(((oth_${e} - oth_${i}) / TOTAL_STATE_VOTES_${e}) * 100) < 10`,labelExpressionInfo:{expression:`
        var valueNext = $feature.oth_${e};
        var valuePrevious = $feature.oth_${i};
          ${er}
        `},deconflictionStrategy:"none",labelPlacement:"center-center",symbol:new Tt({font:new ci({weight:"bold",family:"Noto Sans",size:"10pt"}),haloColor:new _e(Ki),haloSize:Qi,color:new _e(Ls),xoffset:30,yoffset:40})}),new Lt({minScale:Bo,where:`
        (ABS(((oth_${e} - oth_${i}) / TOTAL_STATE_VOTES_${e}) * 100) >= 1 AND ABS(((oth_${e} - oth_${i}) / TOTAL_STATE_VOTES_${e}) * 100) < 5)
      `,labelExpressionInfo:{expression:`
        var valueNext = $feature.oth_${e};
        var valuePrevious = $feature.oth_${i};
          ${er}
        `},deconflictionStrategy:"none",labelPlacement:"center-center",symbol:new Tt({font:new ci({weight:"bold",family:"Noto Sans",size:"10pt"}),haloColor:new _e(Ki),haloSize:Qi,color:new _e(Ls),xoffset:30,yoffset:35})}),new Lt({minScale:Bo,where:`
        (ABS(((oth_${e} - oth_${i}) / TOTAL_STATE_VOTES_${e}) * 100) >= 0.5 AND ABS(((oth_${e} - oth_${i}) / TOTAL_STATE_VOTES_${e}) * 100) < 1)
      `,labelExpressionInfo:{expression:`
        var valueNext = $feature.oth_${e};
        var valuePrevious = $feature.oth_${i};
          ${er}
        `},deconflictionStrategy:"none",labelPlacement:"center-center",symbol:new Tt({font:new ci({weight:"bold",family:"Noto Sans",size:"10pt"}),haloColor:new _e(Ki),haloSize:Qi,color:new _e(Ls),xoffset:20,yoffset:30})}),new Lt({minScale:Bo,where:`
        (ABS(((oth_${e} - oth_${i}) / TOTAL_STATE_VOTES_${e}) * 100) < 0.5)
      `,labelExpressionInfo:{expression:`
          var valueNext = $feature.oth_${e};
          var valuePrevious = $feature.oth_${i};
          ${er}
        `},deconflictionStrategy:"none",labelPlacement:"center-center",symbol:new Tt({font:new ci({weight:"bold",family:"Noto Sans",size:"10pt"}),haloColor:new _e(Ki),haloSize:Qi,color:new _e(Ls),xoffset:15,yoffset:18})})]},uet=t=>{const{level:e,year:i}=t;return e==="county"?cet(i):aet(i)},ese=t=>({popupTemplate:iet(t),renderer:oet(t),labelingInfo:uet(t)});function dA(t){const e=eM({places:0,digitSeparator:!0});return Qr(t,e)}function det(t){return t.map(e=>new Ps({fieldName:e,format:new Ks({places:0,digitSeparator:!0})}))}const cwe=t=>{const{level:e,year:i}=t,r=e==="state"?rD:"",n=[i-16,i-12,i-8,i-4,i],s=n.map(a=>[`${r}rep_${a}`,`${r}dem_${a}`,`${r}oth_${a}`]).flat(),o=[];if(e==="country"){const a=[2e3,2004,2008,2012,2016,2020,2024],l=new hfe({creator:c=>{const{graphic:d}=c,f=document.createElement("div");f.id="electoral-vote-results";let y="<table class='esri-widget popup'>";y+="<tr class='head'><td>Year</td><td>Republican</td><td>Votes</td><td>+/-</td><td>Democrat</td><td>Votes</td><td>+/-</td></tr>";let g="<table class='esri-widget popup'>";g+="<tr class='head'><td>Year</td><td>Republican</td><td>Votes</td><td>%</td><td>Democrat</td><td>Votes</td><td>%</td></tr>";const b=JSON.parse(JSON.stringify(Cl)),_=`rgba(${Xn.toRgba()})`,x=`rgba(${Kn.toRgba()})`;a.forEach(C=>{const k=C.toString(),O={r:{name:b[k].republican.candidate,votes:b[k].republican.electoralVotes,weight:"normal",class:"none",margin:"-"},d:{name:b[k].democrat.candidate,votes:b[k].democrat.electoralVotes,weight:"normal",class:"none",margin:"-"}},D={r:{name:b[k].republican.candidate,votes:d.attributes[`rep_${k}`],weight:"normal",class:"none",margin:"-"},d:{name:b[k].democrat.candidate,votes:d.attributes[`dem_${k}`],weight:"normal",class:"none",margin:"-"}},B=[O.r.votes,O.d.votes],j=Math.max(...B),Z=B.indexOf(j)===0?"r":"d";O[Z].weight="bolder",Z==="r"&&(O.r.class="rep"),Z==="d"&&(O.d.class="dem");const X=[D.r.votes,D.d.votes],ee=Math.max(...X),pe=X.indexOf(ee)===0?"r":"d";D[pe].weight="bolder",pe==="r"&&(D.r.class="rep"),pe==="d"&&(D.d.class="dem");const he=B.sort((we,Re)=>Re-we),ne=X.sort((we,Re)=>Re-we),re=Qr(he[0]-he[1],{signDisplay:"always"}),ke=Qr((ne[0]-ne[1])/(ne[0]+ne[1]),{style:"percent",minimumFractionDigits:1,maximumFractionDigits:1,signDisplay:"always"});O[Z].margin=re,D[pe].margin=ke;let Fe="";Fe+=`<tr><td>${k}</td>`,Fe+=`<td class='${O.r.class}'><span style='color:${_}; font-weight: ${O.r.weight}'>${O.r.name}</span></td>`,Fe+=`<td class='${O.r.class}'><span style='color:${_}; font-weight: ${O.r.weight}'>${dA(O.r.votes)}</span></td>`,Fe+=`<td class='${O.r.class}'><span style='color:${_}; font-weight: ${O.r.weight}'>${O.r.margin}</span></td>`,Fe+=`<td class='${O.d.class}'><span style='color:${x}; font-weight: ${O.d.weight}'>${O.d.name}</span></td>`,Fe+=`<td class='${O.d.class}'><span style='color:${x}; font-weight: ${O.d.weight}'>${dA(O.d.votes)}</span></td>`,Fe+=`<td class='${O.d.class}'><span style='color:${x}; font-weight: ${O.d.weight}'>${O.d.margin}</span></td>`,Fe+="</tr>",y+=Fe;let Ae="";Ae+=`<tr><td>${k}</td>`,Ae+=`<td class='${D.r.class}'><span style='color:${_}; font-weight: ${D.r.weight}'>${D.r.name}</span></td>`,Ae+=`<td class='${D.r.class}'><span style='color:${_}; font-weight: ${D.r.weight}'>${dA(D.r.votes)}</span></td>`,Ae+=`<td class='${D.r.class}'><span style='color:${_}; font-weight: ${D.r.weight}'>${D.r.margin}</span></td>`,Ae+=`<td class='${D.d.class}'><span style='color:${x}; font-weight: ${D.d.weight}'>${D.d.name}</span></td>`,Ae+=`<td class='${D.d.class}'><span style='color:${x}; font-weight: ${D.d.weight}'>${dA(D.d.votes)}</span></td>`,Ae+=`<td class='${D.d.class}'><span style='color:${x}; font-weight: ${D.d.weight}'>${D.d.margin}</span></td>`,Ae+="</tr>",g+=Ae}),y+="</table>",g+="</table>";const E=`
          <calcite-tabs>
              <calcite-tab-nav slot="title-group">
                  <calcite-tab-title selected>
                    Elector Vote Total
                  </calcite-tab-title>
                  <calcite-tab-title>
                    Popular Vote Total
                  </calcite-tab-title>
              </calcite-tab-nav>
              <calcite-tab selected>
                  ${y}
              </calcite-tab>
              <calcite-tab>
                  ${g}
              </calcite-tab>
          </calcite-tabs>
        `;return f.innerHTML=E,f}});o.push(l)}else o.push(new Ob({expressionInfo:{expression:`
            Expects($feature, "*");

            var result = "";

            var dMargins = [];
            var rMargins = [];

            var years = [${n}];

            var rColorHex = "${Xn.toHex()}";
            var dColorHex = "${Kn.toHex()}";
            var oColorHex = "${Ls.toHex()}";

            for (var i in years){
              var y = Text(years[i]);

              var rVotes = $feature[\`${r}rep_\${y}\`];
              var dVotes = $feature[\`${r}dem_\${y}\`];
              var oVotes = $feature[\`${r}oth_\${y}\`];

              var allVotes = Reverse(Sort([rVotes, dVotes, oVotes]));
              var sumVotes = Sum(allVotes);

              var winner = Decode(Max(allVotes),
                rVotes, "r",
                dVotes, "d",
                "o"
              );

              var marginTotal = allVotes[0] - allVotes[1];
              var marginPercent = Round(((allVotes[0] / sumVotes) - (allVotes[1] / sumVotes)) * 100, 1);

              if(winner == "r"){
                Push(rMargins, marginPercent);
              }
              if(winner == "d"){
                Push(dMargins, marginPercent);
              }
            }

            var yCount = Count(years);
            var strongThreshold = yCount * 0.75;
            var contestedThreshold = yCount * 0.5;

            var dCount = Count(dMargins);
            var dAvg = Sum(dMargins) / yCount;

            var rCount = Count(rMargins);
            var rAvg = Sum(rMargins) / yCount;


            var trend = When(
              (dCount > strongThreshold) && (dAvg > 5), \` shown <b><span style='color:\${dColorHex}'>strong Democrat</span></b> support\`,
              (dCount > strongThreshold) && (dAvg <= 5), \`<b><span style='color:\${dColorHex}'>leaned Democrat</span></b>\`,
              (dCount > contestedThreshold), \`been <b>contested</b>, but tends to <b><span style='color:\${dColorHex}'>lean Democrat</span></b>\`,

              (rCount > strongThreshold) && (rAvg > 5), \` shown <b><span style='color:\${rColorHex}'>strong Republican</span></b> support\`,
              (rCount > strongThreshold) && (rAvg <= 5), \`<b><span style='color:\${rColorHex}'>leaned Republican</span></b>\`,
              (rCount > contestedThreshold), \`been <b>contested</b>, but tend to <b><span style='color:\${rColorHex}'> lean Republican</span></b>\`,
              "contested"
            );

            var geographyName = iif(haskey($feature, "county"), \`\${$feature.county}, \${$feature.state}\`, $feature.state);

            result = \`In the last \${yCount} U.S. presidential elections, \${geographyName} voters have \${trend}.\`;

            return {
              type: "text",
              text: result
            };
          `}}),new Ob({expressionInfo:{expression:`
            Expects($feature, "*");
            var years = [${n}];
            var candidates = {
              "2000": {
                republican: {
                  candidate: "Bush",
                  electoralVotes: 271
                },
                democrat: {
                  candidate: "Gore",
                  electoralVotes: 266
                },
                other: {
                  candidate: "Other",
                  electoralVotes: 0
                }
              },
              "2004": {
                republican: {
                  candidate: "Bush",
                  electoralVotes: 286
                },
                democrat: {
                  candidate: "Kerry",
                  electoralVotes: 251
                },
                other: {
                  candidate: "Other",
                  electoralVotes: 0
                }
              },
              "2008": {
                republican: {
                  candidate: "McCain",
                  electoralVotes: 173
                },
                democrat: {
                  candidate: "Obama",
                  electoralVotes: 365
                },
                other: {
                  candidate: "Other",
                  electoralVotes: 0
                }
              },
              "2012": {
                republican: {
                  candidate: "Romney",
                  electoralVotes: 206
                },
                democrat: {
                  candidate: "Obama",
                  electoralVotes: 332
                },
                other: {
                  candidate: "Other",
                  electoralVotes: 0
                }
              },
              "2016": {
                republican: {
                  candidate: "Trump",
                  electoralVotes: 304
                },
                democrat: {
                  candidate: "Clinton",
                  electoralVotes: 227
                },
                other: {
                  candidate: "Other",
                  electoralVotes: 0
                }
              },
              "2020": {
                republican: {
                  candidate: "Trump",
                  electoralVotes: 232
                },
                democrat: {
                  candidate: "Biden",
                  electoralVotes: 306
                },
                other: {
                  candidate: "Other",
                  electoralVotes: 0
                }
              },
              "2024": {
                republican: {
                  candidate: "Trump",
                  electoralVotes: 312
                },
                democrat: {
                  candidate: "Harris",
                  electoralVotes: 226
                },
                other: {
                  candidate: "Other",
                  electoralVotes: 0
                }
              }
            };


            var table = "<table class='esri-widget popup'>";
            table += "<tr class='head'><td>Year</td><td>Republican</td><td>Votes</td><td>%</td><td>Democrat</td><td>Votes</td><td>%</td></tr>";

            // var results = {};

            for (var i in years){
              var y = Text(years[i]);

              var results = {
                r: {
                  name: candidates[y].republican.candidate,
                  votes: $feature[\`${r}rep_\${y}\`],
                  weight: "normal",
                  class: "none",
                  margin: "-"
                },
                d: {
                  name: candidates[y].democrat.candidate,
                  votes: $feature[\`${r}dem_\${y}\`],
                  weight: "normal",
                  class: "none",
                  margin: "-"
                },
                o: {
                  name: candidates[y].other.candidate,
                  votes: $feature[\`${r}oth_\${y}\`],
                  weight: "normal",
                  class: "none",
                  margin: "-"
                }
              };

              var allVotes = Reverse(Sort([results.r.votes, results.d.votes, results.o.votes]));
              var sumVotes = Sum(allVotes);
              var winner = Decode(Max(allVotes),
                results.r.votes, "r",
                results.d.votes, "d",
                "o"
              );

              results[winner].weight = "bolder";

              if(winner == "r"){
                results.r.class = "rep";
              }
              if(winner == "d"){
                results.d.class = "dem";
              }


              var marginTotal = Text(allVotes[0] - allVotes[1], "#,###");
              var marginPercent = Text((allVotes[0] / sumVotes) - (allVotes[1] / sumVotes), "+#.0%;-#.0%");

              results[winner].margin = marginPercent;

              var tr = "";
              tr += \`<tr><td>\${y}</td>\`;

              var rColor = "rgba(${Xn.toRgba()})";
              var dColor = "rgba(${Kn.toRgba()})";

              tr += \`<td class='\${results.r.class}'><span style='color:\${rColor}; font-weight: \${results.r.weight}'>\${results.r.name}</span></td>\`;
              tr += \`<td class='\${results.r.class}'><span style='color:\${rColor}; font-weight: \${results.r.weight}'>\${Text(results.r.votes, "#,###")}</span></td>\`;
              tr += \`<td class='\${results.r.class}'><span style='color:\${rColor}; font-weight: \${results.r.weight}'>\${results.r.margin}</span></td>\`;

              tr += \`<td class='\${results.d.class}'><span style='color:\${dColor}; font-weight: \${results.d.weight}'>\${results.d.name}</span></td>\`;
              tr += \`<td class='\${results.d.class}'><span style='color:\${dColor}; font-weight: \${results.d.weight}'>\${Text(results.d.votes, "#,###")}</span></td>\`;
              tr += \`<td class='\${results.d.class}'><span style='color:\${dColor}; font-weight: \${results.d.weight}'>\${results.d.margin}</span></td>\`;

              tr += "</tr>";

              table += tr;

            }

            table += "</table>";

            return {
              type: "text",
              text: table
            }
          `}}),new Ob({expressionInfo:{expression:`
            Expects($feature, "*");
            var fieldsMargin = [];
            var fieldsTotal = [];
            var colors = [];
            var attributes = {};
            var mediaInfos = [];

            var years = [${n}];
            var candidates = {
              "2000": {
                republican: {
                  candidate: "Bush",
                  electoralVotes: 271
                },
                democrat: {
                  candidate: "Gore",
                  electoralVotes: 266
                },
                other: {
                  candidate: "Other",
                  electoralVotes: 0
                }
              },
              "2004": {
                republican: {
                  candidate: "Bush",
                  electoralVotes: 286
                },
                democrat: {
                  candidate: "Kerry",
                  electoralVotes: 251
                },
                other: {
                  candidate: "Other",
                  electoralVotes: 0
                }
              },
              "2008": {
                republican: {
                  candidate: "McCain",
                  electoralVotes: 173
                },
                democrat: {
                  candidate: "Obama",
                  electoralVotes: 365
                },
                other: {
                  candidate: "Other",
                  electoralVotes: 0
                }
              },
              "2012": {
                republican: {
                  candidate: "Romney",
                  electoralVotes: 206
                },
                democrat: {
                  candidate: "Obama",
                  electoralVotes: 332
                },
                other: {
                  candidate: "Other",
                  electoralVotes: 0
                }
              },
              "2016": {
                republican: {
                  candidate: "Trump",
                  electoralVotes: 304
                },
                democrat: {
                  candidate: "Clinton",
                  electoralVotes: 227
                },
                other: {
                  candidate: "Other",
                  electoralVotes: 0
                }
              },
              "2020": {
                republican: {
                  candidate: "Trump",
                  electoralVotes: 232
                },
                democrat: {
                  candidate: "Biden",
                  electoralVotes: 306
                },
                other: {
                  candidate: "Other",
                  electoralVotes: 0
                }
              },
              "2024": {
                republican: {
                  candidate: "Trump",
                  electoralVotes: 312
                },
                democrat: {
                  candidate: "Harris",
                  electoralVotes: 226
                },
                other: {
                  candidate: "Other",
                  electoralVotes: 0
                }
              }
            };

            var rColor = [${Xn.toJSON()}];
            var dColor = [${Kn.toJSON()}];
            var oColor = [${Ls.toJSON()}];
            var resultsColors = [rColor, dColor, oColor];

            var rColorHex = "${Xn.toHex()}";
            var dColorHex = "${Kn.toHex()}";
            var oColorHex = "${Ls.toHex()}";

            for (var i in years){
              var y = Text(years[i]);

              var results = {
                r: {
                  name: candidates[y].republican.candidate,
                  votes: $feature[\`${r}rep_\${y}\`],
                  margin: null,
                  color: rColor,
                  hexColor: rColorHex
                },
                d: {
                  name: candidates[y].democrat.candidate,
                  votes: $feature[\`${r}dem_\${y}\`],
                  margin: null,
                  color: dColor,
                  hexColor: dColorHex
                },
                o: {
                  name: candidates[y].other.candidate,
                  votes: $feature[\`${r}oth_\${y}\`],
                  margin: null,
                  color: oColor,
                  hexColor: oColorHex
                }
              };

              var allVotes = Reverse(Sort([results.r.votes, results.d.votes, results.o.votes]));
              var sumVotes = Sum(allVotes);

              var winner = Decode(Max(allVotes),
                results.r.votes, "r",
                results.d.votes, "d",
                "o"
              );

              var marginTotal = allVotes[0] - allVotes[1];
              var marginPercent = Round(((allVotes[0] / sumVotes) - (allVotes[1] / sumVotes)) * 100, 1);

              results[winner].margin = marginPercent;

              var winnerInfo = results[winner];
              var fieldNameMargin = \`\${winnerInfo.name} (\${y}) - margin\`;
              var fieldNameTotal = \`\${winnerInfo.name} (\${y}) - total\`;
              attributes[fieldNameMargin] = winnerInfo.margin;
              attributes[fieldNameTotal] = marginTotal;

              Push(fieldsMargin, fieldNameMargin);
              Push(fieldsTotal, fieldNameTotal);
              Push(colors, winnerInfo.color);

              var rCandidateName = \`\${results.r.name} (\${y}) - votes\`;
              var dCandidateName = \`\${results.d.name} (\${y}) - votes\`;
              var oCandidateName = \`\${results.o.name} (\${y}) - votes\`;

              attributes[rCandidateName] = results.r.votes;
              attributes[dCandidateName] = results.d.votes;
              attributes[oCandidateName] = results.o.votes;

              var evFieldName = \`ev_\${y}\`;

              var title = "";

              if(haskey($feature, "county")){
                title = \`<span style='color:\${winnerInfo.hexColor}'><b>\${winnerInfo.name}</b></span> won \${$feature.county}, \${$feature.state} in \${y}\`;
              } else {
                title = \`<span style='color:\${winnerInfo.hexColor}'><b>\${winnerInfo.name}</b></span> won \${$feature.state}'s \${$feature[evFieldName]} electoral votes in \${y}\`;
              }

              var resultsChart = {
                type: "barchart",
                title,
                value: {
                  fields: [
                    rCandidateName,
                    dCandidateName,
                    oCandidateName
                  ],
                  colors: resultsColors
                }
              };

              Push(mediaInfos, resultsChart);
            }

            Insert(mediaInfos, 0, {
              type: "columnchart",
              title: "Margin of victory trend (% points)",
              value: { fields: fieldsMargin, colors }
            });

            Insert(mediaInfos, 1, {
              type: "columnchart",
              title: "Margin of victory trend (total votes)",
              value: { fields: fieldsTotal, colors }
            });

            return {
              type: "media",
              attributes,
              mediaInfos
            };
          `}}));return new pm({title:wM.title[e],fieldInfos:det(s),content:o})},het={rings:[[[0,0],[0,10],[10,10],[10,0],[0,0]]]};function pet(t){const{primitiveName:e,color:i,outline:r,offsetX:n}=t,s={type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:i,primitiveName:e}]};r&&r.color&&s.symbolLayers.push({type:"CIMSolidStroke",enable:!0,color:r.color,width:.5});const o=10;return{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:0,y:0},anchorPointUnits:"Relative",size:o,primitiveName:e,frame:{xmin:0,ymin:0,xmax:10,ymax:10},offsetX:o*n,offsetY:0,markerGraphics:[{type:"CIMMarkerGraphic",geometry:het,symbol:s}],scaleSymbolsProportionally:!0,respectFrame:!0}}function fet(t){const{year:e,primitiveName:i,fieldPrefix:r}=t;return{type:"CIMPrimitiveOverride",primitiveName:i,propertyName:"Color",valueExpressionInfo:{type:"CIMExpressionInfo",title:"Winner",expression:`
        var rColor = ${JSON.stringify(_M)};
        var dColor = ${JSON.stringify(xM)};
        var oColor = ${JSON.stringify(SM)};

        var demVotes = $feature.${r}dem_${e};
        var repVotes = $feature.${r}rep_${e};
        var othVotes = $feature.${r}oth_${e};

        var allVotes = [demVotes, repVotes, othVotes];

        Decode(Max(allVotes),
          demVotes, dColor,
          repVotes, rColor,
          oColor
        );
      `,returnType:"Default"}}}const met=`
  var scaleFactorBase = ( ${owe} / $view.scale );
  var scaleFactor = When(
    scaleFactorBase >= 1, 1,
    scaleFactorBase >= 0.5, scaleFactorBase * 0.6,
    scaleFactorBase >= 0.25, scaleFactorBase * 0.45,
    scaleFactorBase >= 0.125, scaleFactorBase * 0.3125,
    scaleFactorBase * 0.1875
  );
`,yet=`
  var sizeFactor = When(
    value >= ${An[4].value}, ${An[4].size},
    value >= ${An[3].value}, ${An[3].size} + (${mg(An[3],An[4])} * (value - ${An[3].value})),
    value >= ${An[2].value}, ${An[2].size} + (${mg(An[2],An[3])} * (value - ${An[2].value})),
    value >= ${An[1].value}, ${An[1].size} + (${mg(An[1],An[2])} * (value - ${An[1].value})),
    value > ${An[0].value}, ${An[0].size} + (${mg(An[0],An[1])} * value),
    0
  );
`,uwe=`
  ${yet}

  ${met}
  var size = sizeFactor * scaleFactor;
`,get=`
  var sizeFactor = When(
    value >= ${Rn[4].value}, ${Rn[4].size},
    value >= ${Rn[3].value}, ${Rn[3].size} + (${mg(Rn[3],Rn[4])} * (value - ${Rn[3].value})),
    value >= ${Rn[2].value}, ${Rn[2].size} + (${mg(Rn[2],Rn[3])} * (value - ${Rn[2].value})),
    value >= ${Rn[1].value}, ${Rn[1].size} + (${mg(Rn[1],Rn[2])} * (value - ${Rn[1].value})),
    value > ${Rn[0].value}, ${Rn[0].size} + (${mg(Rn[0],Rn[1])} * value),
    0
  );
`,vet=`
  var scaleFactorBase = Round( ${WQe} / $view.scale, 1 );
  var scaleFactor = When(
    scaleFactorBase >= 8, scaleFactorBase / 8,
    scaleFactorBase >= 4, scaleFactorBase / 6,
    scaleFactorBase >= 2, scaleFactorBase / 4,
    scaleFactorBase >= 1, scaleFactorBase * 0.6,
    scaleFactorBase >= 0.5, scaleFactorBase * 0.6,
    scaleFactorBase >= 0.25, scaleFactorBase * 0.45,
    scaleFactorBase >= 0.125, scaleFactorBase * 0.3125,
    scaleFactorBase
  );
`,dwe=`
  ${get}

  ${vet}
  var size = sizeFactor * scaleFactor;
`;function mg(t,e){const i=e.size-t.size,r=e.value-t.value;return i/r}function bet(t){const{year:e,primitiveName:i,fieldPrefix:r}=t;return{type:"CIMPrimitiveOverride",primitiveName:i,propertyName:"Size",valueExpressionInfo:{type:"CIMExpressionInfo",title:"Margin of Victory",expression:`
        var demVotes = $feature.${r}dem_${e};
        var repVotes = $feature.${r}rep_${e};
        var othVotes = $feature.${r}oth_${e};

        var allVotes = Reverse(Sort([demVotes, repVotes, othVotes]));

        var value = allVotes[0] - allVotes[1];

        ${r===rD?uwe:dwe}

        return size;
      `,returnType:"Default"}}}function wet(t){const{year:e,primitiveName:i,fieldPrefix:r}=t;return{type:"CIMPrimitiveOverride",primitiveName:i,propertyName:"OffsetX",valueExpressionInfo:{type:"CIMExpressionInfo",title:"Margin of Victory",expression:`

        function isEven(v){
          return v % 2 == 0;
        }
        var interval = 4;
        var years = [${g3}];
        var selectedYear = ${e};

        var numItems = Count(years);
        var isEvenItems = isEven(numItems);
        var middleIndex = Floor(numItems / 2);

        if(isEvenItems){
          middleIndex -= 0.5;
        }

        var index = IndexOf(years, selectedYear);

        if(!isEvenItems && index == middleIndex){
          return 0;
        }

        var direction = iif(index < middleIndex, -1, 1);

        var yearStart = iif(direction < 0, selectedYear, years[middleIndex]);
        var yearEnd = iif(direction < 0, years[middleIndex], selectedYear);

        var sizes = [];

        var offsetX = 0;

        for (var year = yearStart; year <= yearEnd; year+=interval){
          var demVotes = $feature[\`${r}dem_\${year}\`];
          var repVotes = $feature[\`${r}rep_\${year}\`];
          var othVotes = $feature[\`${r}oth_\${year}\`];

          var allVotes = Reverse(Sort([demVotes, repVotes, othVotes]));

          var value = allVotes[0] - allVotes[1];

          ${r===rD?uwe:dwe}

          var factor = iif(
            (year == yearStart) || (year == yearEnd)
          , 0.5, 1);

          offsetX += (size * factor);
        }

        return offsetX * direction;

      `,returnType:"Default"}}}function _et(t){const{level:e,year:i}=t;return new As({symbol:xet({level:e,year:i})})}function xet(t){const{level:e,year:i}=t,r=e==="state"?rD:"",n=[i-16,i-12,i-8,i-4,i];return new hs({data:{type:"CIMSymbolReference",symbol:{type:"CIMPointSymbol",symbolLayers:[...n.map(s=>pet({primitiveName:`election-${s}`,offsetX:n.indexOf(s)-2,color:[0,0,0,255],outline:{color:[255,255,255,100]}}))]},primitiveOverrides:[...n.map(s=>fet({primitiveName:`election-${s}`,year:s,fieldPrefix:r})),...n.map(s=>bet({primitiveName:`election-${s}`,year:s,fieldPrefix:r})),...n.map(s=>wet({primitiveName:`election-${s}`,year:s,fieldPrefix:r}))]}})}const tse=t=>({popupTemplate:cwe(t),renderer:_et(t)}),$et=t=>(...e)=>{const i=gae(),r=new t(...e),n=r.exports;yae(i.at(-1));const s=r.component.manager;s.W(r,n),r.watchExports(s.W.bind(s,r)),Fxe(r);const o=[r.component,...i].reverse();return Iae(o,a=>a===void 0?void 0:Tet(r,a,n),n)},Tet=(t,{host:e,key:i,isReactive:r},n)=>{var f;const s=e,o=s[i]!==t.exports,a=s[i]!==n,l=n!==t.exports;if(o&&!a&&l&&(s[i]=t.exports),e===t.component){if(r){const y=t.component.manager;a&&y.W(t,s[i]),t.onUpdate(g=>{if(g.has(i)){const b=s[i];b!==t.exports&&y.W(t,b)}})}t.O=r?void 0:i}const d=(f=t.component.constructor.elementProperties.get(i))==null?void 0:f.readOnly;t.watchExports(()=>{s[i]!==t.exports&&(d?Vxe(()=>{s[i]=t.exports}):s[i]=t.exports)})},Eet=(t,e)=>{let i=t;for(;i;){if(i===e)return!0;if(!i.parentNode)return!1;i.parentNode instanceof ShadowRoot?i=i.parentNode.host:i=i.parentNode}return!1},Iet=(t,e,i)=>{const r=Cet(e).subscribe;return r(n=>{n.some(o=>Eet(t,o.target))&&i()})},oV={},Cet=t=>{const e=t.join(","),i=oV[e];if(i!==void 0)return i;const r=new Set,n=new MutationObserver(o=>r.forEach(a=>a(o)));globalThis.document&&n.observe(document.documentElement,{attributes:!0,attributeFilter:t,subtree:!0});const s={subscribe:o=>(r.add(o),()=>{r.delete(o),r.size===0&&(n.disconnect(),oV[e]=void 0)})};return oV[e]=s,s},Met=(t,e)=>{var r,n;let i=t;for(;i;){const s=(r=i.closest)==null?void 0:r.call(i,e);if(s)return s;const o=(n=i.getRootNode)==null?void 0:n.call(i);if(o===globalThis.document)return;i=o.host}},ket=(t,e,i)=>{const r=Met(t,`[${e}]`);return(r==null?void 0:r.getAttribute(e))??i},Pet="ar,bg,bs,ca,cs,da,de,el,en,es,et,fi,fr,he,hr,hu,id,it,ja,ko,lt,lv,nl,nb,no,pl,pt-BR,pt-PT,ro,ru,sk,sl,sr,sv,th,tr,uk,vi,zh-CN,zh-HK,zh-TW".split(","),Aet=new Set(Pet),v3="en",Let={pt:"pt-PT",nb:"no",nn:"no",zh:"zh-CN"},Ret=async(t,e,i="")=>{const r=`${e}/${i}`,n=`${r}${t}.json`;return aV[n]??(aV[n]=hwe(t,r)),await aV[n]},aV={},hwe=async(t,e)=>{const i=`${e}${t}.json`;try{const r=await fetch(i);if(r.ok)return await r.json()}catch(r){return console.error(r),{}}return t===v3?{}:await hwe(v3,e)},pwe=t=>{var i;const e=ket(t,"lang",((i=globalThis.navigator)==null?void 0:i.language)||v3);return{lang:e,t9nLocale:fwe(e)}},fwe=t=>{const[e,i]=t.split("-"),r=e.toLowerCase();let n=r;return i&&(n=`${r}-${i.toUpperCase()}`),n=Let[n]??n,Aet.has(n)?n:i?fwe(r):v3},Oet=(t,e,i,r)=>{let n;const s=()=>Fet(t,e(),r).then(o=>{((n==null?void 0:n.lang)!==o.lang||n.t9nLocale!==o.t9nLocale||n.t9nStrings!==o.t9nStrings)&&i(o),n=o}).catch(console.error);return queueMicrotask(s),Iet(t,["lang"],s)},Fet=async(t,e,i=t.localName.split("-").slice(1).join("-"))=>{const{lang:r,t9nLocale:n}=pwe(t),s=`${e}/${i}/t9n`,a=i===null?{}:await Ret(n,s,"messages.");return{lang:r,t9nLocale:n,t9nStrings:a}},Net=t=>mwe(void 0,t),XH=t=>e=>mwe(e,t);let Det=class extends k7{constructor(e,i){super(e);const r=this.exports;try{U1(this.component);const n=i(this.component,this),s=this.exports!==r;if(Oxe(n)){s||this.setProvisionalExports(n);const o=n.then(a=>{this.exports=a,super.catchUpLifecycle()}).catch(a=>{this.P.reject(a),console.error(a)});this.onLoad(async()=>await o)}else(!s||n!==void 0)&&(this.exports=n),queueMicrotask(()=>super.catchUpLifecycle())}catch(n){this.P.reject(n),console.error(n)}}catchUpLifecycle(){}};const mwe=$et(Det),zet=(t,e)=>new Vet(t,e);var jS,US,HM;class Vet extends k7{constructor(i,r){super();Ye(this,jS);Ye(this,US);Ye(this,HM);Ue(this,US,i),Ue(this,HM,r),Ue(this,jS,new MutationObserver(n=>{n.forEach(s=>{i.includes(s.attributeName)&&r.call(this.component,this.component.el.getAttribute(s.attributeName),s.oldValue,s.attributeName)})}))}hostConnected(){Y(this,US).forEach(i=>{this.component.el.hasAttribute(i)&&Y(this,HM).call(this.component,null,this.component.el.getAttribute(i),i)}),Y(this,jS).observe(this.component.el,{attributes:!0,attributeOldValue:!0,attributeFilter:Y(this,US)})}hostDisconnected(){Y(this,jS).disconnect()}}jS=new WeakMap,US=new WeakMap,HM=new WeakMap;const jet=t=>(e={})=>Net((i,r)=>{const n=pwe(i.el),s={_lang:n.lang,_t9nLocale:n.t9nLocale,_loading:!0},o=i;r.onLifecycle(()=>Oet(i.el,()=>t("./assets"),({t9nLocale:l,t9nStrings:c,lang:d})=>{const f={...c,_lang:d,_t9nLocale:l,_loading:!1};r.exports=f;const y=c.componentLabel;typeof y=="string"&&"label"in i&&i.label==null&&(i.label??(i.label=y)),a(o.messageOverrides)},e.name));const a=l=>{const c=r.exports,d=c._original??c,f=ywe(d,l);l&&(f._original=d),r.exports=f};return"messageOverrides"in o&&r.onUpdate(l=>{l.has("messageOverrides")&&a(o.messageOverrides)}),e.blocking?(r.setProvisionalExports(s,!1),r.ready):s}),ywe=(t,e)=>{if(!e)return t;const i={...t};return Object.entries(e).forEach(([r,n])=>{typeof n=="object"?i[r]=ywe(t[r],n):i[r]=n??t[r]}),i};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Po=jet(Dae);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const O_={percentage:"percentage",progressRing:"ring--progress",ring:"ring",rings:"rings",text:"text",trackRing:"ring--track"},Uet=Mi`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{position:relative;margin-inline:auto;display:flex;align-items:center;justify-content:center;opacity:1;flex-direction:column;min-block-size:var(--calcite-loader-size);font-size:var(--calcite-loader-font-size);stroke-width:var(--calcite-internal-stroke-width);fill:none;transform:scale(1);padding-block:var(--calcite-loader-spacing, 4rem)}:host([scale=s]){--calcite-internal-stroke-width: 3;--calcite-internal-text-offset: var(--calcite-spacing-xxs);--calcite-internal-loader-font-size: var(--calcite-font-size--3);--calcite-internal-loader-size: 2rem;--calcite-internal-loader-size-inline: .75rem;--calcite-internal-loader-value-line-height: .625rem}:host([scale=m]){--calcite-internal-stroke-width: 6;--calcite-internal-text-offset: var(--calcite-spacing-sm);--calcite-internal-loader-font-size: var(--calcite-font-size-0);--calcite-internal-loader-size: 4rem;--calcite-internal-loader-size-inline: 1rem;--calcite-internal-loader-value-line-height: 1.375rem}:host([scale=l]){--calcite-internal-stroke-width: 8;--calcite-internal-text-offset: var(--calcite-spacing-md);--calcite-internal-loader-font-size: var(--calcite-font-size-2);--calcite-internal-loader-size: 6rem;--calcite-internal-loader-size-inline: 1.5rem;--calcite-internal-loader-value-line-height: 1.71875rem}.text{display:block;text-align:center;font-size:var(--calcite-font-size--2);line-height:1rem;margin-block-start:var(--calcite-loader-text-spacing, var(--calcite-internal-text-offset));font-weight:var(--calcite-loader-text-weight, var(--calcite-font-weight-normal));color:var(--calcite-loader-text-color, var(--calcite-color-text-1))}.percentage{display:block;text-align:center;font-size:var(--calcite-loader-font-size);inline-size:var(--calcite-loader-size, var(--calcite-internal-loader-size));line-height:var(--calcite-internal-loader-value-line-height);align-self:center;color:var(--calcite-loader-text-color, var(--calcite-color-text-1))}.rings{position:relative;display:flex;overflow:visible;opacity:1;inline-size:var(--calcite-loader-size, var(--calcite-internal-loader-size));block-size:var(--calcite-loader-size, var(--calcite-internal-loader-size))}.ring{position:absolute;inset-block-start:0px;transform-origin:center;overflow:visible;inset-inline-start:0;inline-size:var(--calcite-loader-size, var(--calcite-internal-loader-size));block-size:var(--calcite-loader-size, var(--calcite-internal-loader-size))}.ring--track{stroke:var(--calcite-loader-track-color, var(--calcite-color-transparent-press))}.ring--progress{stroke:var(--calcite-loader-progress-color, var(--calcite-color-brand));transform:rotate(-90deg);transition:all var(--calcite-internal-animation-timing-fast) linear}:host([type=indeterminate]) .ring--progress{animation:loader-clockwise calc(var(--calcite-internal-animation-timing-slow) / var(--calcite-internal-duration-factor) * 2 / var(--calcite-internal-duration-factor)) linear infinite}:host([inline]){--calcite-internal-stroke-width: 2;position:relative;margin:0;stroke:currentColor;stroke-width:2;padding-block:0px;block-size:var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline)));min-block-size:var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline)));inline-size:var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline)));vertical-align:calc(var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline))) * -1 * .2)}:host([inline]) .rings{inset-block-start:0px;margin:0;inset-inline-start:0;inline-size:var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline)));block-size:var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline)))}:host([inline]) .ring{inline-size:var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline)));block-size:var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline)))}:host([inline]) .ring--progress{stroke:var(--calcite-loader-progress-color-inline, currentColor)}:host([complete]){opacity:0;transform:scale(.75);transform-origin:center;transition:opacity var(--calcite-internal-animation-timing-medium) linear 1s,transform var(--calcite-internal-animation-timing-medium) linear 1s}:host([complete]) .rings{opacity:0;transform:scale(.75);transform-origin:center;transition:opacity calc(.18s * var(--calcite-internal-duration-factor)) linear .8s,transform calc(.18s * var(--calcite-internal-duration-factor)) linear .8s}:host([complete]) .percentage{color:var(--calcite-color-brand);transform:scale(1.05);transform-origin:center;transition:color var(--calcite-internal-animation-timing-medium) linear,transform var(--calcite-internal-animation-timing-medium) linear}@keyframes loader-clockwise{0%{transform:rotate(0)}to{transform:rotate(360deg)}}:host([hidden]){display:none}[hidden]{display:none}`,rF=class rF extends ir{constructor(){super(...arguments),this.messages=Po({name:null}),this.complete=!1,this.inline=!1,this.scale="m",this.text="",this.type="indeterminate",this.value=0}connectedCallback(){super.connectedCallback(),this.updateFormatter()}load(){requestAnimationFrame(()=>this.valueChangeHandler())}willUpdate(e){e.has("value")&&(this.hasUpdated||this.value!==0)&&this.valueChangeHandler(),(e.has("type")&&(this.hasUpdated||this.type!=="indeterminate")||e.has("messages"))&&this.updateFormatter()}valueChangeHandler(){this.complete=this.type.startsWith("determinate")&&this.value===100}formatValue(){return this.type!=="determinate-value"?`${this.value}`:this.formatter.format(this.value/100)}getSize(e){return{s:32,m:64,l:96}[e]}getInlineSize(e){return{s:12,m:16,l:24}[e]}updateFormatter(){var e;this.type!=="determinate-value"||((e=this.formatter)==null?void 0:e.resolvedOptions().locale)===this.messages._lang||(this.formatter=new Intl.NumberFormat(this.messages._lang,{style:"percent"}))}render(){const{el:e,inline:i,label:r,text:n,type:s,value:o}=this,a=e.id||ld(),l=s!=="indeterminate",c=Math.floor(o);return this.el.ariaLabel=r,this.el.ariaValueMax=l?"100":void 0,this.el.ariaValueMin=l?"0":void 0,this.el.ariaValueNow=l?c.toString():void 0,Hu(this.el,"id",a),this.el.role="progressbar",Se`<div class=${Te(O_.rings)}>${this.renderRing("track")}${this.renderRing("progress")}${!i&&l&&Se`<div class=${Te(O_.percentage)}>${this.formatValue()}</div>`||""}</div>${!i&&n&&Se`<div class=${Te(O_.text)}>${n}</div>`||""}`}renderRing(e){const{inline:i,scale:r,value:n}=this,s=i?this.getInlineSize(r):this.getSize(r),a=s*.45;let l;if(e==="progress"){const c=2*a*Math.PI,d=(this.type.startsWith("determinate")?n:24)/100*c,f=c-d;l={"stroke-dasharray":`${d} ${f}`}}return Se`<svg aria-hidden=true class=${Te({[O_.ring]:!0,[O_.trackRing]:e==="track",[O_.progressRing]:e==="progress"})} style=${GI(l)} viewBox=${`0 0 ${s} ${s}`}>${Da`<circle cx=${s/2} cy=${s/2} r=${a??ct} />`}</svg>`}};rF.properties={complete:[7,{},{reflect:!0,type:Boolean}],inline:[7,{},{reflect:!0,type:Boolean}],label:1,scale:[3,{},{reflect:!0}],text:1,type:[3,{},{reflect:!0}],value:[9,{},{type:Number}]},rF.styles=Uet;let b3=rF;rr("calcite-loader",b3);const F2=Object.freeze(Object.defineProperty({__proto__:null,Loader:b3},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */function ts(t,e,i){const r=Bet(t);return new r(e,i)}function Bet(t){class e extends window.MutationObserver{constructor(r){super(r),this.observedEntry=[],this.callback=r}observe(r,n){return this.observedEntry.push({target:r,options:n}),super.observe(r,n)}unobserve(r){const n=this.observedEntry.filter(s=>s.target!==r);this.observedEntry=[],this.callback(super.takeRecords(),this),this.disconnect(),n.forEach(s=>this.observe(s.target,s.options))}}return(function(){return t==="intersection"?window.IntersectionObserver:t==="mutation"?e:window.ResizeObserver})()}function $M(t,e,i,r){if(t&&(e&&t.unobserve(e),!!i)){if(t instanceof MutationObserver){t.observe(i,r);return}t.observe(i)}}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const ise=new Set,rse={trace:0,debug:1,info:2,warn:4,error:8,off:10};function Get(t){return rse[t]>=rse[USe]}function z1(t,...e){if(!Get(t))return;console[t].call(this,"%ccalcite","background: #007AC2; color: #fff; border-radius: 4px; padding: 2px 4px;",...e)}let lV;const k9={debug:t=>z1("debug",t),info:t=>z1("info",t),warn:t=>z1("warn",t),error:t=>z1("error",t),trace:t=>z1("trace",t),deprecated:qet};function qet(t,{component:e,name:i,suggested:r,removalVersion:n}){const s=`${t}:${t==="component"?"":e}${i}`;if(ise.has(s))return;ise.add(s);const o=Array.isArray(r);o&&!lV&&(lV=new Intl.ListFormat("en",{style:"long",type:"disjunction"}));const a=`[${i}] ${t} is deprecated and will be removed in ${n==="future"?"a future version":`v${n}`}.${r?` Use ${o?lV.format(r.map(l=>`"${l}"`)):`"${r}"`} instead.`:""}`;z1("warn",a)}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const nse={flipRtl:"flip-rtl",svg:"svg"},gwe={},cV={},vwe={s:16,m:24,l:32};function bwe({icon:t,scale:e}){const i=vwe[e],r=Zet(t),n=r.charAt(r.length-1)==="F";return`${n?r.substring(0,r.length-1):r}${i}${n?"F":""}`}async function Het(t){const e=bwe(t),i=wwe(e);if(i)return i;cV[e]||(cV[e]=fetch(Dae(`./assets/icon/${e}.json`)).then(n=>n.json()).catch(()=>(k9.error(`${t.icon} (${t.scale}) icon failed to load`),"")));const r=await cV[e];return gwe[e]=r,r}function Wet(t){return wwe(bwe(t))}function wwe(t){return gwe[t]}function Zet(t){const e=!isNaN(Number(t.charAt(0))),i=t.split("-");if(i.length>0){const n=/[a-z]/i;t=i.map((s,o)=>s.replace(n,function(l,c){return o===0&&c===0?l:l.toUpperCase()})).join("")}return e?`i${t}`:t}const Jet=Mi`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{display:inline-flex;color:var(--calcite-icon-color, var(--calcite-ui-icon-color, currentColor))}:host([scale=s]){inline-size:16px;block-size:16px;min-inline-size:16px;min-block-size:16px}:host([scale=m]){inline-size:24px;block-size:24px;min-inline-size:24px;min-block-size:24px}:host([scale=l]){inline-size:32px;block-size:32px;min-inline-size:32px;min-block-size:32px}.flip-rtl{transform:scaleX(-1)}.svg{display:block}:host([hidden]){display:none}[hidden]{display:none}`,nF=class nF extends ir{constructor(){super(...arguments),this.visible=!1,this.flipRtl=!1,this.icon=null,this.preload=!1,this.scale="m"}connectedCallback(){if(super.connectedCallback(),this.preload){this.visible=!0,this.loadIconPathData();return}this.visible||this.waitUntilVisible(()=>{this.visible=!0,this.loadIconPathData()})}willUpdate(e){(e.has("icon")&&(this.hasUpdated||this.icon!==null)||e.has("scale")&&(this.hasUpdated||this.scale!=="m"))&&this.loadIconPathData()}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this.intersectionObserver)==null||e.disconnect(),this.intersectionObserver=null}async loadIconPathData(){const{icon:e,scale:i,visible:r}=this;if(!e||!r)return;const n={icon:e,scale:i},s=Wet(n)||await Het(n);e===this.icon&&(this.pathData=s)}waitUntilVisible(e){if(this.intersectionObserver=ts("intersection",i=>{i.forEach(r=>{r.isIntersecting&&(this.intersectionObserver.disconnect(),this.intersectionObserver=null,e())})},{rootMargin:"50px"}),!this.intersectionObserver){e();return}this.intersectionObserver.observe(this.el)}render(){const{el:e,flipRtl:i,pathData:r,scale:n,textLabel:s}=this,o=Qu(e),a=vwe[n],l=!!s,c=[].concat(r||"");return this.el.ariaHidden=A2(!l),this.el.ariaLabel=l?s:null,this.el.role=l?"img":null,Se`<svg aria-hidden=true class=${Te({[nse.flipRtl]:o==="rtl"&&i,[nse.svg]:!0})} fill=currentColor height=100% viewBox=${`0 0 ${a} ${a}`} width=100% xmlns=http://www.w3.org/2000/svg>${c.map(d=>typeof d=="string"?Da`<path d=${d??ct} />`:Da`<path d=${d.d??ct} opacity=${("opacity"in d?d.opacity:1)??ct} />`)}</svg>`}};nF.properties={pathData:[16,{},{state:!0}],visible:[16,{},{state:!0}],flipRtl:[7,{},{reflect:!0,type:Boolean}],icon:[3,{},{reflect:!0}],preload:[7,{},{reflect:!0,type:Boolean}],scale:[3,{},{reflect:!0}],textLabel:1},nF.styles=Jet;let w3=nF;rr("calcite-icon",w3);const X$=Object.freeze(Object.defineProperty({__proto__:null,Icon:w3},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */function Yet(){const{disabled:t}=this;t||HTMLElement.prototype.click.call(this)}function _we(t){t.target.disabled&&t.preventDefault()}const xwe=["mousedown","mouseup","click"];function Swe(t){t.target.disabled&&(t.stopImmediatePropagation(),t.preventDefault())}const _3={capture:!0};function cd(t){if(t.disabled){t.el.setAttribute("aria-disabled","true"),t.el.contains(document.activeElement)&&document.activeElement.blur(),Xet(t);return}Qet(t),t.el.removeAttribute("aria-disabled")}function Xet(t){t.el.click=Yet,Ket(t.el)}function Ket(t){t.addEventListener("pointerdown",_we,_3),xwe.forEach(e=>t.addEventListener(e,Swe,_3))}function Qet(t){delete t.el.click,ett(t.el)}function ett(t){t.removeEventListener("pointerdown",_we,_3),xwe.forEach(e=>t.removeEventListener(e,Swe,_3))}const ttt={container:"interaction-container"},ud=({children:t,disabled:e})=>Se`<div class=${Te(ttt.container)} .inert=${e}>${t}</div>`;/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */function ua(t){return t==="l"?"m":"s"}async function itt(t){await t.componentOnReady(),await t.updateComplete}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Ka=()=>XH((t,e)=>{let i;function r(){i==null||i.abort()}return e.onLoad(()=>{t.listen("focus",()=>{i=new AbortController,t.el.addEventListener("focusout",r,{signal:i.signal})})}),e.onDisconnected(()=>{t.el.removeEventListener("focusout",r)}),async(n,s)=>{if(t.disabled)return;const o=ntt(n());if(!o)return;const{target:a,includeContainer:l,strategy:c}=o,d=qN(t.el),f=d.activeElement;if(await itt(t),!(f!==d.activeElement||i&&!(i!=null&&i.signal.aborted)))return t.el.removeEventListener("focus",r),mM(a,l,c,t.el,s)}});function rtt(t){return"target"in t&&("includeContainer"in t||"strategy"in t)}function ntt(t){if(t)return rtt(t)?t:{target:t}}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const stt=["calcite-input","calcite-input-number","calcite-input-text","calcite-text-area"];function ott(t){return`${t.split("-").map((r,n)=>n===0?r:`${r[0].toUpperCase()}${r.slice(1)}`).join("")}${stt.includes(t)?"Input":"Change"}`}const P9="hidden-form-input";function KH(t){return"checked"in t}const A9=new WeakMap,QH=new WeakSet;function att(t,e){if(W$(e.parentElement,"[form]"))return!0;const r="calciteInternalFormComponentRegister";let n=!1;return t.addEventListener(r,s=>{n=s.composedPath().some(o=>QH.has(o)),s.stopPropagation()},{once:!0}),e.dispatchEvent(new CustomEvent(r,{bubbles:!0,composed:!0})),n}function ltt(t,{status:e,message:i,icon:r}){"status"in t&&(t.status=e),"validationIcon"in t&&typeof t.validationIcon!="string"&&(t.validationIcon=r),"validationMessage"in t&&!t.validationMessage&&(t.validationMessage=i)}function $we(t){return t.nodeName==="CALCITE-RADIO-BUTTON"?W$(t,"calcite-radio-button-group"):t}const ctt=new CustomEvent("calciteInvalid",{bubbles:!0,composed:!0});function sse(t){var a;const e=t==null?void 0:t.target,i=e==null?void 0:e.validationMessage,r=$we(e==null?void 0:e.parentElement);if(!r)return;const n=(a=r==null?void 0:r.nodeName)==null?void 0:a.toLowerCase(),s=n==null?void 0:n.split("-");if(s.length<2||s[0]!=="calcite")return;t==null||t.preventDefault(),"validity"in r&&(r.validity=e==null?void 0:e.validity),r.dispatchEvent(ctt),ltt(r,{message:i,icon:!0,status:"invalid"});const o=ott(n);r.addEventListener(o,()=>{"status"in r&&(r.status="idle"),"validationIcon"in r&&(r.validationIcon===""||r.validationIcon===!0)&&(r.validationIcon=!1),"validationMessage"in r&&r.validationMessage===i&&(r.validationMessage=""),"validity"in r&&(r.validity=e==null?void 0:e.validity)},{once:!0})}function Twe(t){const{formEl:e}=t;return e?(e.addEventListener("invalid",sse,!0),e.requestSubmit(),e.removeEventListener("invalid",sse,!0),requestAnimationFrame(()=>{const i=e.querySelectorAll("[status=invalid]");for(const r of i)if(r!=null&&r.validationMessage){r==null||r.setFocus();break}}),!0):!1}function Ewe(t){var e;(e=t.formEl)==null||e.reset()}function Iwe(t){const{el:e,value:i}=t,r=eW(t);if(!r||att(r,e))return;t.formEl=r,t.defaultValue=i,KH(t)&&(t.defaultChecked=t.checked);const n=utt.bind(t);r.addEventListener("reset",n),A9.set(t.el,n),QH.add(e)}function eW(t){const{el:e,form:i}=t;return i?HN(e,{id:i}):W$(e,"form")}function utt(){var t;if("status"in this&&(this.status="idle"),"validationIcon"in this&&(this.validationIcon=!1),"validationMessage"in this&&(this.validationMessage=""),KH(this)){this.checked=this.defaultChecked;return}this.value=this.defaultValue,(t=this.onFormReset)==null||t.call(this)}function Cwe(t){const{el:e,formEl:i}=t;if(!i)return;const r=A9.get(e);i.removeEventListener("reset",r),A9.delete(e),t.formEl=null,QH.delete(e)}function Mwe(t,e){t.defaultValue=e}const dtt="calciteInternalHiddenInputInput",kwe=t=>{t.target.dispatchEvent(new CustomEvent(dtt,{bubbles:!0}))},ose=t=>t.removeEventListener("input",kwe);function htt(t){const{el:e,formEl:i,name:r,value:n}=t,{ownerDocument:s}=e,o=e.querySelectorAll(`input[slot="${P9}"]`);if(!i||!r){o.forEach(f=>{ose(f),f.remove()});return}const a=Array.isArray(n)?n:[n],l=[],c=new Set;o.forEach(f=>{const y=a.find(g=>g==f.value);y!=null?(c.add(y),ase(t,f,y)):l.push(f)});let d;a.forEach(f=>{if(c.has(f))return;let y=l.pop();y||(y=s.createElement("input"),y.ariaHidden="true",y.slot=P9),d||(d=s.createDocumentFragment()),d.append(y),y.addEventListener("input",kwe),ase(t,y,f)}),d&&e.append(d),l.forEach(f=>{ose(f),f.remove()})}function ase(t,e,i){var c;const{defaultValue:r,disabled:n,form:s,name:o,required:a}=t;e.defaultValue=r,e.disabled=n,e.name=o,e.required=a,e.tabIndex=-1,s?e.setAttribute("form",s):e.removeAttribute("form"),KH(t)?(e.checked=t.checked,e.defaultChecked=t.defaultChecked,e.value=t.checked?i||"on":""):e.value=i||"",(c=t.syncHiddenFormInput)==null||c.call(t,e);const l=$we(t.el);if(l&&"validity"in l)for(const d in{...e==null?void 0:e.validity})l.validity[d]=e.validity[d]}const Pwe=({component:t})=>(htt(t),Se`<slot name=${P9}></slot>`);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const du={button:"button",buttonTextVisible:"button--text-visible",buttonCompact:"button--compact",indicatorText:"indicator-text",iconContainer:"icon-container",slotContainer:"slot-container",slotContainerHidden:"slot-container--hidden",textContainer:"text-container",textContainerVisible:"text-container--visible",indicatorWithIcon:"indicator-with-icon",indicatorWithoutIcon:"indicator-without-icon"},lse="calcite-action",ptt={button:t=>`${lse}-${t}-button`,indicator:t=>`${lse}-${t}-indicator`},ftt={tooltip:"tooltip"},mtt=Mi`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex;cursor:pointer;background-color:transparent;--calcite-internal-action-text-color: var(--calcite-color-text-3);border-radius:var(--calcite-action-corner-radius, var(--calcite-action-corner-radius-start-start, var(--calcite-corner-radius)) var(--calcite-action-corner-radius-start-end, var(--calcite-corner-radius)) var(--calcite-action-corner-radius-end-end, var(--calcite-corner-radius)) var(--calcite-action-corner-radius-end-start, var(--calcite-corner-radius)))}.interaction-container{border-radius:inherit}:host([width=full]){flex:1 0 auto}:host([width=full]) .button{justify-content:center}:host([width=full]) .button .text-container--visible{flex:none}:host([drag-handle]){cursor:move;--calcite-internal-action-text-color: var(--calcite-color-border-input);--calcite-internal-action-padding-inline: var(--calcite-spacing-xxs)}.button{border-radius:inherit;position:relative;margin:0;display:flex;inline-size:auto;align-items:center;justify-content:flex-start;border-style:none;font-family:var(--calcite-font-family);font-size:var(--calcite-font-size--2);line-height:1rem;font-weight:var(--calcite-font-weight-medium);outline-color:transparent;background-color:var(--calcite-action-background-color, var(--calcite-color-foreground-1));color:var(--calcite-action-text-color, var(--calcite-internal-action-text-color));text-align:unset;flex:1 0 auto;cursor:inherit}.button:hover{background-color:var(--calcite-action-background-color-hover, var(--calcite-color-foreground-2));color:var(--calcite-action-text-color-press, var(--calcite-action-text-color-pressed, var(--calcite-color-text-1)))}.button:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.button:active{background-color:var(--calcite-action-background-color-press, var(--calcite-action-background-color-pressed, var(--calcite-color-foreground-3)))}.icon-container{pointer-events:none;margin:0;display:flex;align-items:center;justify-content:center;min-inline-size:1rem;min-block-size:1.5rem}.text-container{margin:0;inline-size:0px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;line-height:1.5rem;opacity:0;transition-property:opacity;transition-duration:var(--calcite-animation-timing);transition-timing-function:cubic-bezier(.4,0,.2,1);transition-property:inline-size}.text-container--visible{inline-size:auto;flex:1 1 auto;opacity:1}:host([active]) .button{background-color:var(--calcite-action-background-color, var(--calcite-color-foreground-3));color:var(--calcite-action-text-color-press, var(--calcite-action-text-color-pressed, var(--calcite-color-text-1)))}:host([active]) .button:hover{background-color:var(--calcite-action-background-color-hover, var(--calcite-color-foreground-3))}:host([active]) .button:active{background-color:var(--calcite-action-background-color-press, var(--calcite-action-background-color-pressed, var(--calcite-color-foreground-3)))}:host([loading]) .button:hover,:host([loading]) .button:focus{background-color:var(--calcite-action-background-color, var(--calcite-color-foreground-1))}:host([loading]) .text-container{opacity:var(--calcite-opacity-disabled)}:host([loading]) calcite-loader[inline]{margin-inline-end:0px}:host([appearance=transparent]):host([active]) .button{background-color:var(--calcite-color-transparent-press)}:host([appearance=transparent]) .button{background-color:transparent;transition-property:box-shadow;transition-duration:var(--calcite-animation-timing);transition-timing-function:cubic-bezier(.4,0,.2,1)}:host([appearance=transparent]) .button:hover{background-color:var(--calcite-color-transparent-hover)}:host([appearance=transparent]) .button:active{background-color:var(--calcite-color-transparent-press)}:host([active-descendant]) .button{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}:host([scale=s]) .button{font-size:var(--calcite-font-size--2);line-height:1rem;font-weight:var(--calcite-font-weight-normal);padding-inline:var(--calcite-internal-action-padding-inline, .5rem);padding-block:var(--calcite-internal-action-padding-block, var(--calcite-spacing-xxs))}:host([scale=s]) .button--text-visible .icon-container{margin-inline-end:.5rem}:host([scale=m]) .button{font-size:var(--calcite-font-size--1);line-height:1rem;font-weight:var(--calcite-font-weight-normal);padding-inline:var(--calcite-internal-action-padding-inline, 1rem);padding-block:var(--calcite-internal-action-padding-block, var(--calcite-spacing-md))}:host([scale=m]) .button--text-visible .icon-container{margin-inline-end:.75rem}:host([scale=l]) .button{font-size:var(--calcite-font-size-0);line-height:1.25rem;font-weight:var(--calcite-font-weight-normal);padding-inline:var(--calcite-internal-action-padding-inline, 1.25rem);padding-block:var(--calcite-internal-action-padding-block, var(--calcite-spacing-xl))}:host([scale=l]) .button--text-visible .icon-container{margin-inline-end:1rem}:host([alignment=center]) .button{justify-content:center}:host([alignment=end]) .button{justify-content:flex-end}:host([alignment=center]) .button .text-container--visible,:host([alignment=end]) .button .text-container--visible{flex:0 1 auto}:host([scale=s][compact]) .button,:host([scale=m][compact]) .button,:host([scale=l][compact]) .button{padding-inline:0px}.slot-container{display:flex}.slot-container--hidden{display:none}.button--text-visible{inline-size:100%}.indicator-with-icon{position:relative}.indicator-with-icon:after{content:"";position:absolute;block-size:.5rem;inline-size:.5rem;border-radius:9999px;inset-block-end:-.275rem;inset-inline-end:-.275rem;background-color:var(--calcite-action-indicator-color, var(--calcite-color-brand))}.indicator-without-icon{margin-inline:.25rem;inline-size:1rem;position:relative}.indicator-without-icon:after{content:"";position:absolute;block-size:.5rem;inline-size:.5rem;border-radius:9999px;inset-block-end:-.275rem;inset-inline-end:-.275rem;background-color:var(--calcite-action-indicator-color, var(--calcite-color-brand))}.indicator-text{position:absolute;inline-size:1px;block-size:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}:host([hidden]){display:none}[hidden]{display:none}:host([disabled]) .button,:host([disabled]) .button:hover,:host([disabled]) .button:focus{cursor:default;opacity:var(--calcite-opacity-disabled);background-color:var(--calcite-action-background-color, var(--calcite-action-background-color, var(--calcite-color-foreground-1)))}:host([disabled]):host([active]) .button,:host([disabled]):host([active]) .button:hover,:host([disabled]):host([active]) .button:focus{opacity:var(--calcite-opacity-disabled);background-color:var(--calcite-action-background-color-press, var(--calcite-action-background-color-press, var(--calcite-action-background-color-pressed, var(--calcite-color-foreground-3))))}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}`,sF=class sF extends ir{constructor(){super(...arguments),this.guid=ld(),this.buttonEl=Fc(),this.buttonId=ptt.button(this.guid),this.mutationObserver=ts("mutation",()=>this.requestUpdate()),this.messages=Po({blocking:!0}),this.focusSetter=Ka()(this),this.active=!1,this.activeDescendant=!1,this.appearance="solid",this.compact=!1,this.disabled=!1,this.dragHandle=!1,this.iconFlipRtl=!1,this.indicator=!1,this.loading=!1,this.scale="m",this.width="auto",this.textEnabled=!1,this.type="button"}async setFocus(e){return this.focusSetter(()=>this.buttonEl.value,e)}connectedCallback(){var e;super.connectedCallback(),this.formEl=eW(this),(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0,subtree:!0})}updated(){cd(this)}disconnectedCallback(){var e;super.disconnectedCallback(),this.formEl=null,(e=this.mutationObserver)==null||e.disconnect()}handleClick(){const{type:e}=this;e==="submit"?Twe(this):e==="reset"&&Ewe(this)}handleTooltipSlotChange(e){const r=e.target.assignedElements({flatten:!0}).filter(n=>n==null?void 0:n.matches("calcite-tooltip"))[0];r&&(r.referenceElement=this.buttonEl.value)}storeIndicatorEl(e){this.indicatorEl=e}renderTextContainer(){const{text:e,textEnabled:i}=this,r={[du.textContainer]:!0,[du.textContainerVisible]:i};return e?ri("text-container",Se`<div class=${Te(r)}>${e}</div>`):null}renderIndicatorText(){const{indicator:e,messages:i,buttonId:r}=this;return Se`<div aria-labelledby=${r??Vr} aria-live=polite class=${Te(du.indicatorText)} role=region ${Ri(this.storeIndicatorEl)}>${e?i.indicator:null}</div>`}renderIconContainer(){var g;const{loading:e,icon:i,scale:r,el:n,iconFlipRtl:s,indicator:o}=this,a=r==="l"?"l":"m",l=e?Se`<calcite-loader inline .label=${this.messages.loading} .scale=${a}></calcite-loader>`:null,c=i?Se`<calcite-icon class=${Te({[du.indicatorWithIcon]:o})} .flipRtl=${s} .icon=${i} .scale=${ua(this.scale)}></calcite-icon>`:null,d=l||c,f=d||((g=n.children)==null?void 0:g.length),y=Se`<div class=${Te({[du.slotContainer]:!0,[du.slotContainerHidden]:e})}><slot></slot></div>`;return f?ri("icon-container",Se`<div aria-hidden=true class=${Te(du.iconContainer)}>${d}${y}</div>`):null}renderButton(){var C,k,O,D,B,j,Z,X,ee,pe,he,ne,re;const{compact:e,disabled:i,icon:r,loading:n,textEnabled:s,label:o,text:a,indicator:l,indicatorEl:c,buttonId:d,messages:f}=this,y=o||a||"",g=l?f.indicatorLabel.replace("{label}",y):y,b={[du.button]:!0,[du.buttonTextVisible]:s,[du.buttonCompact]:e},_=Se`${this.renderIconContainer()}${this.renderTextContainer()}${!r&&l&&ri("indicator-no-icon",Se`<div class=${Te(du.indicatorWithoutIcon)}></div>`)||""}`,x=l&&c?[c]:[],E=[...((C=this.aria)==null?void 0:C.controlsElements)??[],...x];return this.dragHandle?Se`<span .ariaBusy=${n} .ariaControlsElements=${E} .ariaDescribedByElements=${(k=this.aria)==null?void 0:k.describedByElements} .ariaExpanded=${(O=this.aria)==null?void 0:O.expanded} .ariaHasPopup=${(D=this.aria)==null?void 0:D.hasPopup} .ariaLabel=${g} .ariaLabelledByElements=${(B=this.aria)==null?void 0:B.labelledByElements} .ariaOwnsElements=${(j=this.aria)==null?void 0:j.ownsElements} .ariaPressed=${(Z=this.aria)==null?void 0:Z.pressed} class=${Te(b)} id=${d??Vr} role=button tabindex=${this.disabled?null:0} ${Ri(this.buttonEl)}>${_}</span>`:Se`<button .ariaBusy=${n} .ariaControlsElements=${E} .ariaDescribedByElements=${(X=this.aria)==null?void 0:X.describedByElements} .ariaExpanded=${(ee=this.aria)==null?void 0:ee.expanded} .ariaHasPopup=${(pe=this.aria)==null?void 0:pe.hasPopup} .ariaLabel=${g} .ariaLabelledByElements=${(he=this.aria)==null?void 0:he.labelledByElements} .ariaOwnsElements=${(ne=this.aria)==null?void 0:ne.ownsElements} .ariaPressed=${(re=this.aria)==null?void 0:re.pressed} class=${Te(b)} .disabled=${i} id=${d??Vr} @click=${this.handleClick} ${Ri(this.buttonEl)}>${_}</button>`}render(){return ud({disabled:this.disabled,children:Se`${this.renderButton()}<slot name=${ftt.tooltip} @slotchange=${this.handleTooltipSlotChange}></slot>${this.renderIndicatorText()}`})}};sF.properties={aria:[0,{},{attribute:!1}],active:[7,{},{reflect:!0,type:Boolean}],activeDescendant:[7,{},{reflect:!0,type:Boolean}],alignment:[3,{},{reflect:!0}],appearance:[3,{},{reflect:!0}],compact:[7,{},{reflect:!0,type:Boolean}],disabled:[7,{},{reflect:!0,type:Boolean}],dragHandle:[7,{},{reflect:!0,type:Boolean}],form:[3,{},{reflect:!0}],icon:[3,{},{reflect:!0}],iconFlipRtl:[7,{},{reflect:!0,type:Boolean}],indicator:[7,{},{reflect:!0,type:Boolean}],label:1,loading:[7,{},{reflect:!0,type:Boolean}],messageOverrides:[0,{},{attribute:!1}],scale:[3,{},{reflect:!0}],width:[3,{},{reflect:!0}],text:1,textEnabled:[7,{},{reflect:!0,type:Boolean}],type:[3,{},{reflect:!0}]},sF.styles=mtt;let x3=sF;rr("calcite-action",x3);const tW=Object.freeze(Object.defineProperty({__proto__:null,Action:x3},Symbol.toStringTag,{value:"Module"})),Awe=["top","right","bottom","left"],cse=["start","end"],use=Awe.reduce((t,e)=>t.concat(e,e+"-"+cse[0],e+"-"+cse[1]),[]),d$=Math.min,jb=Math.max,S3=Math.round,hA=Math.floor,np=t=>({x:t,y:t}),ytt={left:"right",right:"left",bottom:"top",top:"bottom"},gtt={start:"end",end:"start"};function L9(t,e,i){return jb(t,d$(e,i))}function Ew(t,e){return typeof t=="function"?t(e):t}function sm(t){return t.split("-")[0]}function sp(t){return t.split("-")[1]}function Lwe(t){return t==="x"?"y":"x"}function iW(t){return t==="y"?"height":"width"}const vtt=new Set(["top","bottom"]);function yg(t){return vtt.has(sm(t))?"y":"x"}function rW(t){return Lwe(yg(t))}function Rwe(t,e,i){i===void 0&&(i=!1);const r=sp(t),n=rW(t),s=iW(n);let o=n==="x"?r===(i?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=T3(o)),[o,T3(o)]}function btt(t){const e=T3(t);return[$3(t),e,$3(e)]}function $3(t){return t.replace(/start|end/g,e=>gtt[e])}const dse=["left","right"],hse=["right","left"],wtt=["top","bottom"],_tt=["bottom","top"];function xtt(t,e,i){switch(t){case"top":case"bottom":return i?e?hse:dse:e?dse:hse;case"left":case"right":return e?wtt:_tt;default:return[]}}function Stt(t,e,i,r){const n=sp(t);let s=xtt(sm(t),i==="start",r);return n&&(s=s.map(o=>o+"-"+n),e&&(s=s.concat(s.map($3)))),s}function T3(t){return t.replace(/left|right|bottom|top/g,e=>ytt[e])}function $tt(t){return{top:0,right:0,bottom:0,left:0,...t}}function Owe(t){return typeof t!="number"?$tt(t):{top:t,right:t,bottom:t,left:t}}function E3(t){const{x:e,y:i,width:r,height:n}=t;return{width:r,height:n,top:i,left:e,right:e+r,bottom:i+n,x:e,y:i}}function pse(t,e,i){let{reference:r,floating:n}=t;const s=yg(e),o=rW(e),a=iW(o),l=sm(e),c=s==="y",d=r.x+r.width/2-n.width/2,f=r.y+r.height/2-n.height/2,y=r[a]/2-n[a]/2;let g;switch(l){case"top":g={x:d,y:r.y-n.height};break;case"bottom":g={x:d,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:f};break;case"left":g={x:r.x-n.width,y:f};break;default:g={x:r.x,y:r.y}}switch(sp(e)){case"start":g[o]-=y*(i&&c?-1:1);break;case"end":g[o]+=y*(i&&c?-1:1);break}return g}const Ttt=async(t,e,i)=>{const{placement:r="bottom",strategy:n="absolute",middleware:s=[],platform:o}=i,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:n}),{x:d,y:f}=pse(c,r,l),y=r,g={},b=0;for(let _=0;_<a.length;_++){const{name:x,fn:E}=a[_],{x:C,y:k,data:O,reset:D}=await E({x:d,y:f,initialPlacement:r,placement:y,strategy:n,middlewareData:g,rects:c,platform:o,elements:{reference:t,floating:e}});d=C??d,f=k??f,g={...g,[x]:{...g[x],...O}},D&&b<=50&&(b++,typeof D=="object"&&(D.placement&&(y=D.placement),D.rects&&(c=D.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:n}):D.rects),{x:d,y:f}=pse(c,y,l)),_=-1)}return{x:d,y:f,placement:y,strategy:n,middlewareData:g}};async function TM(t,e){var i;e===void 0&&(e={});const{x:r,y:n,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:y=!1,padding:g=0}=Ew(e,t),b=Owe(g),x=a[y?f==="floating"?"reference":"floating":f],E=E3(await s.getClippingRect({element:(i=await(s.isElement==null?void 0:s.isElement(x)))==null||i?x:x.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:d,strategy:l})),C=f==="floating"?{x:r,y:n,width:o.floating.width,height:o.floating.height}:o.reference,k=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),O=await(s.isElement==null?void 0:s.isElement(k))?await(s.getScale==null?void 0:s.getScale(k))||{x:1,y:1}:{x:1,y:1},D=E3(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:C,offsetParent:k,strategy:l}):C);return{top:(E.top-D.top+b.top)/O.y,bottom:(D.bottom-E.bottom+b.bottom)/O.y,left:(E.left-D.left+b.left)/O.x,right:(D.right-E.right+b.right)/O.x}}const Ett=t=>({name:"arrow",options:t,async fn(e){const{x:i,y:r,placement:n,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:d=0}=Ew(t,e)||{};if(c==null)return{};const f=Owe(d),y={x:i,y:r},g=rW(n),b=iW(g),_=await o.getDimensions(c),x=g==="y",E=x?"top":"left",C=x?"bottom":"right",k=x?"clientHeight":"clientWidth",O=s.reference[b]+s.reference[g]-y[g]-s.floating[b],D=y[g]-s.reference[g],B=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let j=B?B[k]:0;(!j||!await(o.isElement==null?void 0:o.isElement(B)))&&(j=a.floating[k]||s.floating[b]);const Z=O/2-D/2,X=j/2-_[b]/2-1,ee=d$(f[E],X),pe=d$(f[C],X),he=ee,ne=j-_[b]-pe,re=j/2-_[b]/2+Z,ke=L9(he,re,ne),Fe=!l.arrow&&sp(n)!=null&&re!==ke&&s.reference[b]/2-(re<he?ee:pe)-_[b]/2<0,Ae=Fe?re<he?re-he:re-ne:0;return{[g]:y[g]+Ae,data:{[g]:ke,centerOffset:re-ke-Ae,...Fe&&{alignmentOffset:Ae}},reset:Fe}}});function Itt(t,e,i){return(t?[...i.filter(n=>sp(n)===t),...i.filter(n=>sp(n)!==t)]:i.filter(n=>sm(n)===n)).filter(n=>t?sp(n)===t||(e?$3(n)!==n:!1):!0)}const Ctt=function(t){return t===void 0&&(t={}),{name:"autoPlacement",options:t,async fn(e){var i,r,n;const{rects:s,middlewareData:o,placement:a,platform:l,elements:c}=e,{crossAxis:d=!1,alignment:f,allowedPlacements:y=use,autoAlignment:g=!0,...b}=Ew(t,e),_=f!==void 0||y===use?Itt(f||null,g,y):y,x=await TM(e,b),E=((i=o.autoPlacement)==null?void 0:i.index)||0,C=_[E];if(C==null)return{};const k=Rwe(C,s,await(l.isRTL==null?void 0:l.isRTL(c.floating)));if(a!==C)return{reset:{placement:_[0]}};const O=[x[sm(C)],x[k[0]],x[k[1]]],D=[...((r=o.autoPlacement)==null?void 0:r.overflows)||[],{placement:C,overflows:O}],B=_[E+1];if(B)return{data:{index:E+1,overflows:D},reset:{placement:B}};const j=D.map(ee=>{const pe=sp(ee.placement);return[ee.placement,pe&&d?ee.overflows.slice(0,2).reduce((he,ne)=>he+ne,0):ee.overflows[0],ee.overflows]}).sort((ee,pe)=>ee[1]-pe[1]),X=((n=j.filter(ee=>ee[2].slice(0,sp(ee[0])?2:3).every(pe=>pe<=0))[0])==null?void 0:n[0])||j[0][0];return X!==a?{data:{index:E+1,overflows:D},reset:{placement:X}}:{}}}},Mtt=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var i,r;const{placement:n,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:d=!0,crossAxis:f=!0,fallbackPlacements:y,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:_=!0,...x}=Ew(t,e);if((i=s.arrow)!=null&&i.alignmentOffset)return{};const E=sm(n),C=yg(a),k=sm(a)===a,O=await(l.isRTL==null?void 0:l.isRTL(c.floating)),D=y||(k||!_?[T3(a)]:btt(a)),B=b!=="none";!y&&B&&D.push(...Stt(a,_,b,O));const j=[a,...D],Z=await TM(e,x),X=[];let ee=((r=s.flip)==null?void 0:r.overflows)||[];if(d&&X.push(Z[E]),f){const re=Rwe(n,o,O);X.push(Z[re[0]],Z[re[1]])}if(ee=[...ee,{placement:n,overflows:X}],!X.every(re=>re<=0)){var pe,he;const re=(((pe=s.flip)==null?void 0:pe.index)||0)+1,ke=j[re];if(ke&&(!(f==="alignment"?C!==yg(ke):!1)||ee.every(we=>yg(we.placement)===C?we.overflows[0]>0:!0)))return{data:{index:re,overflows:ee},reset:{placement:ke}};let Fe=(he=ee.filter(Ae=>Ae.overflows[0]<=0).sort((Ae,we)=>Ae.overflows[1]-we.overflows[1])[0])==null?void 0:he.placement;if(!Fe)switch(g){case"bestFit":{var ne;const Ae=(ne=ee.filter(we=>{if(B){const Re=yg(we.placement);return Re===C||Re==="y"}return!0}).map(we=>[we.placement,we.overflows.filter(Re=>Re>0).reduce((Re,je)=>Re+je,0)]).sort((we,Re)=>we[1]-Re[1])[0])==null?void 0:ne[0];Ae&&(Fe=Ae);break}case"initialPlacement":Fe=a;break}if(n!==Fe)return{reset:{placement:Fe}}}return{}}}};function fse(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function mse(t){return Awe.some(e=>t[e]>=0)}const ktt=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:i}=e,{strategy:r="referenceHidden",...n}=Ew(t,e);switch(r){case"referenceHidden":{const s=await TM(e,{...n,elementContext:"reference"}),o=fse(s,i.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:mse(o)}}}case"escaped":{const s=await TM(e,{...n,altBoundary:!0}),o=fse(s,i.floating);return{data:{escapedOffsets:o,escaped:mse(o)}}}default:return{}}}}},Ptt=new Set(["left","top"]);async function Att(t,e){const{placement:i,platform:r,elements:n}=t,s=await(r.isRTL==null?void 0:r.isRTL(n.floating)),o=sm(i),a=sp(i),l=yg(i)==="y",c=Ptt.has(o)?-1:1,d=s&&l?-1:1,f=Ew(e,t);let{mainAxis:y,crossAxis:g,alignmentAxis:b}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return a&&typeof b=="number"&&(g=a==="end"?b*-1:b),l?{x:g*d,y:y*c}:{x:y*c,y:g*d}}const Ltt=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var i,r;const{x:n,y:s,placement:o,middlewareData:a}=e,l=await Att(e,t);return o===((i=a.offset)==null?void 0:i.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:n+l.x,y:s+l.y,data:{...l,placement:o}}}}},Rtt=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:i,y:r,placement:n}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:x=>{let{x:E,y:C}=x;return{x:E,y:C}}},...l}=Ew(t,e),c={x:i,y:r},d=await TM(e,l),f=yg(sm(n)),y=Lwe(f);let g=c[y],b=c[f];if(s){const x=y==="y"?"top":"left",E=y==="y"?"bottom":"right",C=g+d[x],k=g-d[E];g=L9(C,g,k)}if(o){const x=f==="y"?"top":"left",E=f==="y"?"bottom":"right",C=b+d[x],k=b-d[E];b=L9(C,b,k)}const _=a.fn({...e,[y]:g,[f]:b});return{..._,data:{x:_.x-i,y:_.y-r,enabled:{[y]:s,[f]:o}}}}}};function nD(){return typeof window<"u"}function K$(t){return Fwe(t)?(t.nodeName||"").toLowerCase():"#document"}function Fl(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function wp(t){var e;return(e=(Fwe(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function Fwe(t){return nD()?t instanceof Node||t instanceof Fl(t).Node:!1}function sd(t){return nD()?t instanceof Element||t instanceof Fl(t).Element:!1}function yp(t){return nD()?t instanceof HTMLElement||t instanceof Fl(t).HTMLElement:!1}function yse(t){return!nD()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Fl(t).ShadowRoot}const Ott=new Set(["inline","contents"]);function N2(t){const{overflow:e,overflowX:i,overflowY:r,display:n}=od(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+i)&&!Ott.has(n)}const Ftt=new Set(["table","td","th"]);function Ntt(t){return Ftt.has(K$(t))}const Dtt=[":popover-open",":modal"];function sD(t){return Dtt.some(e=>{try{return t.matches(e)}catch{return!1}})}const ztt=["transform","translate","scale","rotate","perspective"],Vtt=["transform","translate","scale","rotate","perspective","filter"],jtt=["paint","layout","strict","content"];function oD(t){const e=nW(),i=sd(t)?od(t):t;return ztt.some(r=>i[r]?i[r]!=="none":!1)||(i.containerType?i.containerType!=="normal":!1)||!e&&(i.backdropFilter?i.backdropFilter!=="none":!1)||!e&&(i.filter?i.filter!=="none":!1)||Vtt.some(r=>(i.willChange||"").includes(r))||jtt.some(r=>(i.contain||"").includes(r))}function Utt(t){let e=jg(t);for(;yp(e)&&!h$(e);){if(oD(e))return e;if(sD(e))return null;e=jg(e)}return null}function nW(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Btt=new Set(["html","body","#document"]);function h$(t){return Btt.has(K$(t))}function od(t){return Fl(t).getComputedStyle(t)}function aD(t){return sd(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function jg(t){if(K$(t)==="html")return t;const e=t.assignedSlot||t.parentNode||yse(t)&&t.host||wp(t);return yse(e)?e.host:e}function Nwe(t){const e=jg(t);return h$(e)?t.ownerDocument?t.ownerDocument.body:t.body:yp(e)&&N2(e)?e:Nwe(e)}function EM(t,e,i){var r;e===void 0&&(e=[]),i===void 0&&(i=!0);const n=Nwe(t),s=n===((r=t.ownerDocument)==null?void 0:r.body),o=Fl(n);if(s){const a=R9(o);return e.concat(o,o.visualViewport||[],N2(n)?n:[],a&&i?EM(a):[])}return e.concat(n,EM(n,[],i))}function R9(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function Dwe(t){const e=od(t);let i=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const n=yp(t),s=n?t.offsetWidth:i,o=n?t.offsetHeight:r,a=S3(i)!==s||S3(r)!==o;return a&&(i=s,r=o),{width:i,height:r,$:a}}function sW(t){return sd(t)?t:t.contextElement}function Rx(t){const e=sW(t);if(!yp(e))return np(1);const i=e.getBoundingClientRect(),{width:r,height:n,$:s}=Dwe(e);let o=(s?S3(i.width):i.width)/r,a=(s?S3(i.height):i.height)/n;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const Gtt=np(0);function zwe(t){const e=Fl(t);return!nW()||!e.visualViewport?Gtt:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function qtt(t,e,i){return e===void 0&&(e=!1),!i||e&&i!==Fl(t)?!1:e}function fw(t,e,i,r){e===void 0&&(e=!1),i===void 0&&(i=!1);const n=t.getBoundingClientRect(),s=sW(t);let o=np(1);e&&(r?sd(r)&&(o=Rx(r)):o=Rx(t));const a=qtt(s,i,r)?zwe(s):np(0);let l=(n.left+a.x)/o.x,c=(n.top+a.y)/o.y,d=n.width/o.x,f=n.height/o.y;if(s){const y=Fl(s),g=r&&sd(r)?Fl(r):r;let b=y,_=R9(b);for(;_&&r&&g!==b;){const x=Rx(_),E=_.getBoundingClientRect(),C=od(_),k=E.left+(_.clientLeft+parseFloat(C.paddingLeft))*x.x,O=E.top+(_.clientTop+parseFloat(C.paddingTop))*x.y;l*=x.x,c*=x.y,d*=x.x,f*=x.y,l+=k,c+=O,b=Fl(_),_=R9(b)}}return E3({width:d,height:f,x:l,y:c})}function lD(t,e){const i=aD(t).scrollLeft;return e?e.left+i:fw(wp(t)).left+i}function Vwe(t,e){const i=t.getBoundingClientRect(),r=i.left+e.scrollLeft-lD(t,i),n=i.top+e.scrollTop;return{x:r,y:n}}function Htt(t){let{elements:e,rect:i,offsetParent:r,strategy:n}=t;const s=n==="fixed",o=wp(r),a=e?sD(e.floating):!1;if(r===o||a&&s)return i;let l={scrollLeft:0,scrollTop:0},c=np(1);const d=np(0),f=yp(r);if((f||!f&&!s)&&((K$(r)!=="body"||N2(o))&&(l=aD(r)),yp(r))){const g=fw(r);c=Rx(r),d.x=g.x+r.clientLeft,d.y=g.y+r.clientTop}const y=o&&!f&&!s?Vwe(o,l):np(0);return{width:i.width*c.x,height:i.height*c.y,x:i.x*c.x-l.scrollLeft*c.x+d.x+y.x,y:i.y*c.y-l.scrollTop*c.y+d.y+y.y}}function Wtt(t){return Array.from(t.getClientRects())}function Ztt(t){const e=wp(t),i=aD(t),r=t.ownerDocument.body,n=jb(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=jb(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-i.scrollLeft+lD(t);const a=-i.scrollTop;return od(r).direction==="rtl"&&(o+=jb(e.clientWidth,r.clientWidth)-n),{width:n,height:s,x:o,y:a}}const gse=25;function Jtt(t,e){const i=Fl(t),r=wp(t),n=i.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(n){s=n.width,o=n.height;const d=nW();(!d||d&&e==="fixed")&&(a=n.offsetLeft,l=n.offsetTop)}const c=lD(r);if(c<=0){const d=r.ownerDocument,f=d.body,y=getComputedStyle(f),g=d.compatMode==="CSS1Compat"&&parseFloat(y.marginLeft)+parseFloat(y.marginRight)||0,b=Math.abs(r.clientWidth-f.clientWidth-g);b<=gse&&(s-=b)}else c<=gse&&(s+=c);return{width:s,height:o,x:a,y:l}}const Ytt=new Set(["absolute","fixed"]);function Xtt(t,e){const i=fw(t,!0,e==="fixed"),r=i.top+t.clientTop,n=i.left+t.clientLeft,s=yp(t)?Rx(t):np(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,l=n*s.x,c=r*s.y;return{width:o,height:a,x:l,y:c}}function vse(t,e,i){let r;if(e==="viewport")r=Jtt(t,i);else if(e==="document")r=Ztt(wp(t));else if(sd(e))r=Xtt(e,i);else{const n=zwe(t);r={x:e.x-n.x,y:e.y-n.y,width:e.width,height:e.height}}return E3(r)}function jwe(t,e){const i=jg(t);return i===e||!sd(i)||h$(i)?!1:od(i).position==="fixed"||jwe(i,e)}function Ktt(t,e){const i=e.get(t);if(i)return i;let r=EM(t,[],!1).filter(a=>sd(a)&&K$(a)!=="body"),n=null;const s=od(t).position==="fixed";let o=s?jg(t):t;for(;sd(o)&&!h$(o);){const a=od(o),l=oD(o);!l&&a.position==="fixed"&&(n=null),(s?!l&&!n:!l&&a.position==="static"&&!!n&&Ytt.has(n.position)||N2(o)&&!l&&jwe(t,o))?r=r.filter(d=>d!==o):n=a,o=jg(o)}return e.set(t,r),r}function Qtt(t){let{element:e,boundary:i,rootBoundary:r,strategy:n}=t;const o=[...i==="clippingAncestors"?sD(e)?[]:Ktt(e,this._c):[].concat(i),r],a=o[0],l=o.reduce((c,d)=>{const f=vse(e,d,n);return c.top=jb(f.top,c.top),c.right=d$(f.right,c.right),c.bottom=d$(f.bottom,c.bottom),c.left=jb(f.left,c.left),c},vse(e,a,n));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function eit(t){const{width:e,height:i}=Dwe(t);return{width:e,height:i}}function tit(t,e,i){const r=yp(e),n=wp(e),s=i==="fixed",o=fw(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=np(0);function c(){l.x=lD(n)}if(r||!r&&!s)if((K$(e)!=="body"||N2(n))&&(a=aD(e)),r){const g=fw(e,!0,s,e);l.x=g.x+e.clientLeft,l.y=g.y+e.clientTop}else n&&c();s&&!r&&n&&c();const d=n&&!r&&!s?Vwe(n,a):np(0),f=o.left+a.scrollLeft-l.x-d.x,y=o.top+a.scrollTop-l.y-d.y;return{x:f,y,width:o.width,height:o.height}}function uV(t){return od(t).position==="static"}function bse(t,e){if(!yp(t)||od(t).position==="fixed")return null;if(e)return e(t);let i=t.offsetParent;return wp(t)===i&&(i=i.ownerDocument.body),i}function Uwe(t,e){const i=Fl(t);if(sD(t))return i;if(!yp(t)){let n=jg(t);for(;n&&!h$(n);){if(sd(n)&&!uV(n))return n;n=jg(n)}return i}let r=bse(t,e);for(;r&&Ntt(r)&&uV(r);)r=bse(r,e);return r&&h$(r)&&uV(r)&&!oD(r)?i:r||Utt(t)||i}const iit=async function(t){const e=this.getOffsetParent||Uwe,i=this.getDimensions,r=await i(t.floating);return{reference:tit(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function rit(t){return od(t).direction==="rtl"}const O9={convertOffsetParentRelativeRectToViewportRelativeRect:Htt,getDocumentElement:wp,getClippingRect:Qtt,getOffsetParent:Uwe,getElementRects:iit,getClientRects:Wtt,getDimensions:eit,getScale:Rx,isElement:sd,isRTL:rit};function Bwe(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function nit(t,e){let i=null,r;const n=wp(t);function s(){var a;clearTimeout(r),(a=i)==null||a.disconnect(),i=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const c=t.getBoundingClientRect(),{left:d,top:f,width:y,height:g}=c;if(a||e(),!y||!g)return;const b=hA(f),_=hA(n.clientWidth-(d+y)),x=hA(n.clientHeight-(f+g)),E=hA(d),k={rootMargin:-b+"px "+-_+"px "+-x+"px "+-E+"px",threshold:jb(0,d$(1,l))||1};let O=!0;function D(B){const j=B[0].intersectionRatio;if(j!==l){if(!O)return o();j?o(!1,j):r=setTimeout(()=>{o(!1,1e-7)},1e3)}j===1&&!Bwe(c,t.getBoundingClientRect())&&o(),O=!1}try{i=new IntersectionObserver(D,{...k,root:n.ownerDocument})}catch{i=new IntersectionObserver(D,k)}i.observe(t)}return o(!0),s}function sit(t,e,i,r){r===void 0&&(r={});const{ancestorScroll:n=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=sW(t),d=n||s?[...c?EM(c):[],...EM(e)]:[];d.forEach(E=>{n&&E.addEventListener("scroll",i,{passive:!0}),s&&E.addEventListener("resize",i)});const f=c&&a?nit(c,i):null;let y=-1,g=null;o&&(g=new ResizeObserver(E=>{let[C]=E;C&&C.target===c&&g&&(g.unobserve(e),cancelAnimationFrame(y),y=requestAnimationFrame(()=>{var k;(k=g)==null||k.observe(e)})),i()}),c&&!l&&g.observe(c),g.observe(e));let b,_=l?fw(t):null;l&&x();function x(){const E=fw(t);_&&!Bwe(_,E)&&i(),_=E,b=requestAnimationFrame(x)}return i(),()=>{var E;d.forEach(C=>{n&&C.removeEventListener("scroll",i),s&&C.removeEventListener("resize",i)}),f==null||f(),(E=g)==null||E.disconnect(),g=null,l&&cancelAnimationFrame(b)}}const oit=Ltt,ait=Ctt,lit=Rtt,wse=Mtt,cit=ktt,uit=Ett,dit=(t,e,i)=>{const r=new Map,n={platform:O9,...i},s={...n.platform,_c:r};return Ttt(t,e,{...n,platform:s})};function Gwe(t,e,{signal:i,edges:r}={}){let n,s=null;const o=r!=null&&r.includes("leading"),a=r==null||r.includes("trailing"),l=()=>{s!==null&&(t.apply(n,s),n=void 0,s=null)},c=()=>{a&&l(),g()};let d=null;const f=()=>{d!=null&&clearTimeout(d),d=setTimeout(()=>{d=null,c()},e)},y=()=>{d!==null&&(clearTimeout(d),d=null)},g=()=>{y(),n=void 0,s=null},b=()=>{l()},_=function(...x){if(i!=null&&i.aborted)return;n=this,s=x;const E=d==null;f(),o&&E&&l()};return _.schedule=f,_.cancel=g,_.flush=b,i==null||i.addEventListener("abort",g,{once:!0}),_}function hit(t){return pit(t)}function dV(t){return t.assignedSlot?t.assignedSlot:t.parentNode instanceof ShadowRoot?t.parentNode.host:t.parentNode}function pit(t){for(let e=t;e;e=dV(e))if(e instanceof Element&&getComputedStyle(e).display==="none")return null;for(let e=dV(t);e;e=dV(e)){if(!(e instanceof Element))continue;const i=getComputedStyle(e);if(i.display!=="contents"&&(i.position!=="static"||oD(i)||e.tagName==="BODY"))return e}return null}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */(function(){{const e=O9.getOffsetParent;O9.getOffsetParent=i=>e(i,hit)}})();function _se(t){const e=window.devicePixelRatio||1;return Math.round(t*e)/e}const qwe=(async(t,{referenceEl:e,floatingEl:i,overlayPositioning:r="absolute",placement:n,flipDisabled:s,flipPlacements:o,offsetDistance:a,offsetSkidding:l,arrowEl:c,type:d})=>{var O;if(!e||!i)return;const f=Qu(i)==="rtl",{x:y,y:g,placement:b,strategy:_,middlewareData:x}=await dit(e,i,{strategy:r,placement:n==="auto"||n==="auto-start"||n==="auto-end"?void 0:xse(n,f),middleware:mit({placement:n,flipDisabled:s,flipPlacements:o==null?void 0:o.map(D=>xse(D,f)),offsetDistance:a,offsetSkidding:l,arrowEl:c,type:d})});if(c&&x.arrow){const{x:D,y:B}=x.arrow,j=b.split("-")[0],Z=D!=null?"left":"top",X=vit[j],ee={left:"",top:"",bottom:"",right:""};"floatingLayout"in t&&(t.floatingLayout=j==="left"||j==="right"?"horizontal":"vertical"),Object.assign(c.style,{...ee,[Z]:`${Z=="left"?D:B}px`,[j]:"100%",transform:X})}const C=((O=x.hide)==null?void 0:O.referenceHidden)?"hidden":null,k=C?"none":null;i.setAttribute(fit,b),Object.assign(i.style,{pointerEvents:k,position:_,transform:`translate(${_se(y)}px,${_se(g)}px)`,visibility:C})}),fit="data-placement",Hwe=["top","bottom","right","left","top-start","top-end","bottom-start","bottom-end","right-start","right-end","left-start","left-end","leading","trailing","leading-start","leading-end","trailing-start","trailing-end"],F9="bottom-start",Wwe="bottom-end",I3={animation:"calcite-floating-ui-anim",animationActive:"calcite-floating-ui-anim--active"};function mit({placement:t,flipDisabled:e,flipPlacements:i,offsetDistance:r,offsetSkidding:n,arrowEl:s,type:o}){const a=[lit(),cit()];return o==="menu"&&a.push(wse({fallbackPlacements:i||["top-start","top","top-end","bottom-start","bottom","bottom-end"]})),a.push(oit({mainAxis:typeof r=="number"?r:0,crossAxis:typeof n=="number"?n:0})),t==="auto"||t==="auto-start"||t==="auto-end"?a.push(ait({alignment:t==="auto-start"?"start":t==="auto-end"?"end":null})):e||a.push(wse(i?{fallbackPlacements:i}:{})),s&&a.push(uit({element:s})),a}function yit(t){return Hwe.includes(t)}function Zwe(t,e){const i=t.filter(yit);return i.length!==t.length&&console.warn(`${e.tagName}: Invalid value found in: flipPlacements. Try any of these: ${Hwe.map(r=>`"${r}"`).join(", ").trim()}`,{el:e}),i}function xse(t,e=!1){const i=["left","right"];return e&&i.reverse(),t.replace(/leading/gi,i[0]).replace(/trailing/gi,i[1])}async function Jwe(t,e,i=!1){if(!t.open||!e.floatingEl||!e.referenceEl)return;if(Object.assign(e.floatingEl.style,{display:"block",position:e.overlayPositioning??"absolute"}),!IM.get(t))return Ywe(t);await(i?git(t):qwe)(t,e)}function git(t){let e=C3.get(t);return e||(e=Gwe(qwe,Nae.reposition,{edges:["leading","trailing"]}),C3.set(t,e),e)}const vit={top:"",left:"rotate(-90deg)",bottom:"rotate(180deg)",right:"rotate(90deg)"},IM=new WeakMap,C3=new WeakMap;async function Ywe(t){const{referenceEl:e,floatingEl:i}=t;if(!i.isConnected)return;const r=sit;IM.set(t,{state:"pending"});let n;const s=r(e,i,()=>{const o=t.reposition();n||(n=o)});return IM.set(t,{state:"active",cleanUp:s}),n}function oW(t){const{floatingEl:e}=t;e&&Object.assign(e.style,{display:"",pointerEvents:"",position:"",transform:"",visibility:""})}async function LI(t){const{floatingEl:e,referenceEl:i}=t;if(oW(t),!(!e||!i)&&(aW(t),!!t.open))return Ywe(t)}function aW(t){var i;const e=IM.get(t);(e==null?void 0:e.state)==="active"&&e.cleanUp(),IM.delete(t),(i=C3.get(t))==null||i.cancel(),C3.delete(t)}const Sse=4,$se=Math.ceil(Math.hypot(Sse,Sse));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */function Tse(t){return t[t.openProp||"open"]}async function lW(t){await t.updateComplete,Tse(t)?t.onBeforeOpen():t.onBeforeClose(),await t.updateComplete,t.transitionEl&&await wZe(t.transitionEl,t.transitionProp),Tse(t)?t.onOpen():t.onClose()}/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const cW=Symbol.for(""),bit=t=>{if((t==null?void 0:t.r)===cW)return t==null?void 0:t._$litStatic$},wit=t=>({_$litStatic$:t,r:cW}),N9=(t,...e)=>({_$litStatic$:e.reduce(((i,r,n)=>i+(s=>{if(s._$litStatic$!==void 0)return s._$litStatic$;throw Error(`Value passed to 'literal' function must be a 'literal' result: ${s}. Use 'unsafeStatic' to pass non-literal values, but
            take care to ensure page security.`)})(r)+t[n+1]),t[0]),r:cW}),Ese=new Map,_it=t=>(e,...i)=>{const r=i.length;let n,s;const o=[],a=[];let l,c=0,d=!1;for(;c<r;){for(l=e[c];c<r&&(s=i[c],(n=bit(s))!==void 0);)l+=n+e[++c],d=!0;c!==r&&a.push(s),o.push(l),c++}if(c===r&&o.push(e[r]),d){const f=o.join("$$lit$$");(e=Ese.get(f))===void 0&&(o.raw=o,Ese.set(f,e=o)),i=a}return t(e,...i)},Xwe=_it(Se);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const uW=({children:t,...e})=>{const i=e.level?wit(`h${e.level}`):N9`div`;return ri(e.key,Xwe`<${i} class=${Te(e.class)}>${t}</${i}>`)};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Ise={arrow:"calcite-floating-ui-arrow",arrowStroke:"calcite-floating-ui-arrow__stroke"},xit={width:12,height:6,strokeWidth:1},Sit=({floatingLayout:t,key:e,ref:i})=>{const{width:r,height:n,strokeWidth:s}=xit,o=r/2,a=t==="vertical",l=`M0,0 H${r} L${r-o},${n} Q${o},${n} ${o},${n} Z`;return ri(e,Se`<svg aria-hidden=true class=${Te(Ise.arrow)} height=${r} viewBox=${`0 0 ${r} ${r+(a?0:s)}`} width=${r+(a?s:0)} ${Ri(i)}>${Da`${Da`<path class=${Te(Ise.arrowStroke)} d=${l??ct} fill=none stroke-width=${s+1} />`||""}<path d=${l??ct} stroke=none />`}</svg>`)};/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var Kwe=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],M3=Kwe.join(","),Qwe=typeof Element>"u",mw=Qwe?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,k3=!Qwe&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t==null?void 0:t.ownerDocument},P3=function t(e,i){var r;i===void 0&&(i=!0);var n=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),s=n===""||n==="true",o=s||i&&e&&t(e.parentNode);return o},$it=function(e){var i,r=e==null||(i=e.getAttribute)===null||i===void 0?void 0:i.call(e,"contenteditable");return r===""||r==="true"},e_e=function(e,i,r){if(P3(e))return[];var n=Array.prototype.slice.apply(e.querySelectorAll(M3));return i&&mw.call(e,M3)&&n.unshift(e),n=n.filter(r),n},t_e=function t(e,i,r){for(var n=[],s=Array.from(e);s.length;){var o=s.shift();if(!P3(o,!1))if(o.tagName==="SLOT"){var a=o.assignedElements(),l=a.length?a:o.children,c=t(l,!0,r);r.flatten?n.push.apply(n,c):n.push({scopeParent:o,candidates:c})}else{var d=mw.call(o,M3);d&&r.filter(o)&&(i||!e.includes(o))&&n.push(o);var f=o.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(o),y=!P3(f,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(o));if(f&&y){var g=t(f===!0?o.children:f.children,!0,r);r.flatten?n.push.apply(n,g):n.push({scopeParent:o,candidates:g})}else s.unshift.apply(s,o.children)}}return n},i_e=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},nb=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||$it(e))&&!i_e(e)?0:e.tabIndex},Tit=function(e,i){var r=nb(e);return r<0&&i&&!i_e(e)?0:r},Eit=function(e,i){return e.tabIndex===i.tabIndex?e.documentOrder-i.documentOrder:e.tabIndex-i.tabIndex},r_e=function(e){return e.tagName==="INPUT"},Iit=function(e){return r_e(e)&&e.type==="hidden"},Cit=function(e){var i=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return i},Mit=function(e,i){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===i)return e[r]},kit=function(e){if(!e.name)return!0;var i=e.form||k3(e),r=function(a){return i.querySelectorAll('input[type="radio"][name="'+a+'"]')},n;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")n=r(window.CSS.escape(e.name));else try{n=r(e.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var s=Mit(n,e.form);return!s||s===e},Pit=function(e){return r_e(e)&&e.type==="radio"},Ait=function(e){return Pit(e)&&!kit(e)},Lit=function(e){var i,r=e&&k3(e),n=(i=r)===null||i===void 0?void 0:i.host,s=!1;if(r&&r!==e){var o,a,l;for(s=!!((o=n)!==null&&o!==void 0&&(a=o.ownerDocument)!==null&&a!==void 0&&a.contains(n)||e!=null&&(l=e.ownerDocument)!==null&&l!==void 0&&l.contains(e));!s&&n;){var c,d,f;r=k3(n),n=(c=r)===null||c===void 0?void 0:c.host,s=!!((d=n)!==null&&d!==void 0&&(f=d.ownerDocument)!==null&&f!==void 0&&f.contains(n))}}return s},Cse=function(e){var i=e.getBoundingClientRect(),r=i.width,n=i.height;return r===0&&n===0},Rit=function(e,i){var r=i.displayCheck,n=i.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var s=mw.call(e,"details>summary:first-of-type"),o=s?e.parentElement:e;if(mw.call(o,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof n=="function"){for(var a=e;e;){var l=e.parentElement,c=k3(e);if(l&&!l.shadowRoot&&n(l)===!0)return Cse(e);e.assignedSlot?e=e.assignedSlot:!l&&c!==e.ownerDocument?e=c.host:e=l}e=a}if(Lit(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return Cse(e);return!1},Oit=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var i=e.parentElement;i;){if(i.tagName==="FIELDSET"&&i.disabled){for(var r=0;r<i.children.length;r++){var n=i.children.item(r);if(n.tagName==="LEGEND")return mw.call(i,"fieldset[disabled] *")?!0:!n.contains(e)}return!0}i=i.parentElement}return!1},A3=function(e,i){return!(i.disabled||P3(i)||Iit(i)||Rit(i,e)||Cit(i)||Oit(i))},D9=function(e,i){return!(Ait(i)||nb(i)<0||!A3(e,i))},Fit=function(e){var i=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(i)||i>=0)},Nit=function t(e){var i=[],r=[];return e.forEach(function(n,s){var o=!!n.scopeParent,a=o?n.scopeParent:n,l=Tit(a,o),c=o?t(n.candidates):a;l===0?o?i.push.apply(i,c):i.push(a):r.push({documentOrder:s,tabIndex:l,item:n,isScope:o,content:c})}),r.sort(Eit).reduce(function(n,s){return s.isScope?n.push.apply(n,s.content):n.push(s.content),n},[]).concat(i)},Dit=function(e,i){i=i||{};var r;return i.getShadowRoot?r=t_e([e],i.includeContainer,{filter:D9.bind(null,i),flatten:!1,getShadowRoot:i.getShadowRoot,shadowRootFilter:Fit}):r=e_e(e,i.includeContainer,D9.bind(null,i)),Nit(r)},zit=function(e,i){i=i||{};var r;return i.getShadowRoot?r=t_e([e],i.includeContainer,{filter:A3.bind(null,i),flatten:!0,getShadowRoot:i.getShadowRoot}):r=e_e(e,i.includeContainer,A3.bind(null,i)),r},F_=function(e,i){if(i=i||{},!e)throw new Error("No node provided");return mw.call(e,M3)===!1?!1:D9(i,e)},Vit=Kwe.concat("iframe").join(","),hV=function(e,i){if(i=i||{},!e)throw new Error("No node provided");return mw.call(e,Vit)===!1?!1:A3(i,e)};/*!
* focus-trap 7.6.5
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function z9(t,e){(e==null||e>t.length)&&(e=t.length);for(var i=0,r=Array(e);i<e;i++)r[i]=t[i];return r}function jit(t){if(Array.isArray(t))return z9(t)}function Uit(t,e,i){return(e=Wit(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Bit(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Git(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mse(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),i.push.apply(i,r)}return i}function kse(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?Mse(Object(i),!0).forEach(function(r){Uit(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Mse(Object(i)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))})}return t}function qit(t){return jit(t)||Bit(t)||Zit(t)||Git()}function Hit(t,e){if(typeof t!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Wit(t){var e=Hit(t,"string");return typeof e=="symbol"?e:e+""}function Zit(t,e){if(t){if(typeof t=="string")return z9(t,e);var i={}.toString.call(t).slice(8,-1);return i==="Object"&&t.constructor&&(i=t.constructor.name),i==="Map"||i==="Set"?Array.from(t):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?z9(t,e):void 0}}var Pse={activateTrap:function(e,i){if(e.length>0){var r=e[e.length-1];r!==i&&r._setPausedState(!0)}var n=e.indexOf(i);n===-1||e.splice(n,1),e.push(i)},deactivateTrap:function(e,i){var r=e.indexOf(i);r!==-1&&e.splice(r,1),e.length>0&&!e[e.length-1]._isManuallyPaused()&&e[e.length-1]._setPausedState(!1)}},Jit=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},Yit=function(e){return(e==null?void 0:e.key)==="Escape"||(e==null?void 0:e.key)==="Esc"||(e==null?void 0:e.keyCode)===27},CC=function(e){return(e==null?void 0:e.key)==="Tab"||(e==null?void 0:e.keyCode)===9},Xit=function(e){return CC(e)&&!e.shiftKey},Kit=function(e){return CC(e)&&e.shiftKey},Ase=function(e){return setTimeout(e,0)},mE=function(e){for(var i=arguments.length,r=new Array(i>1?i-1:0),n=1;n<i;n++)r[n-1]=arguments[n];return typeof e=="function"?e.apply(void 0,r):e},pA=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},Qit=[],ert=function(e,i){var r=(i==null?void 0:i.document)||document,n=(i==null?void 0:i.trapStack)||Qit,s=kse({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:Xit,isKeyBackward:Kit},i),o={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,manuallyPaused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},a,l=function(ne,re,ke){return ne&&ne[re]!==void 0?ne[re]:s[ke||re]},c=function(ne,re){var ke=typeof(re==null?void 0:re.composedPath)=="function"?re.composedPath():void 0;return o.containerGroups.findIndex(function(Fe){var Ae=Fe.container,we=Fe.tabbableNodes;return Ae.contains(ne)||(ke==null?void 0:ke.includes(Ae))||we.find(function(Re){return Re===ne})})},d=function(ne){var re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ke=re.hasFallback,Fe=ke===void 0?!1:ke,Ae=re.params,we=Ae===void 0?[]:Ae,Re=s[ne];if(typeof Re=="function"&&(Re=Re.apply(void 0,qit(we))),Re===!0&&(Re=void 0),!Re){if(Re===void 0||Re===!1)return Re;throw new Error("`".concat(ne,"` was specified but was not a node, or did not return a node"))}var je=Re;if(typeof Re=="string"){try{je=r.querySelector(Re)}catch(ue){throw new Error("`".concat(ne,'` appears to be an invalid selector; error="').concat(ue.message,'"'))}if(!je&&!Fe)throw new Error("`".concat(ne,"` as selector refers to no known node"))}return je},f=function(){var ne=d("initialFocus",{hasFallback:!0});if(ne===!1)return!1;if(ne===void 0||ne&&!hV(ne,s.tabbableOptions))if(c(r.activeElement)>=0)ne=r.activeElement;else{var re=o.tabbableGroups[0],ke=re&&re.firstTabbableNode;ne=ke||d("fallbackFocus")}else ne===null&&(ne=d("fallbackFocus"));if(!ne)throw new Error("Your focus-trap needs to have at least one focusable element");return ne},y=function(){if(o.containerGroups=o.containers.map(function(ne){var re=Dit(ne,s.tabbableOptions),ke=zit(ne,s.tabbableOptions),Fe=re.length>0?re[0]:void 0,Ae=re.length>0?re[re.length-1]:void 0,we=ke.find(function(ue){return F_(ue)}),Re=ke.slice().reverse().find(function(ue){return F_(ue)}),je=!!re.find(function(ue){return nb(ue)>0});return{container:ne,tabbableNodes:re,focusableNodes:ke,posTabIndexesFound:je,firstTabbableNode:Fe,lastTabbableNode:Ae,firstDomTabbableNode:we,lastDomTabbableNode:Re,nextTabbableNode:function(Ne){var Pt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,Ot=re.indexOf(Ne);return Ot<0?Pt?ke.slice(ke.indexOf(Ne)+1).find(function(Xt){return F_(Xt)}):ke.slice(0,ke.indexOf(Ne)).reverse().find(function(Xt){return F_(Xt)}):re[Ot+(Pt?1:-1)]}}}),o.tabbableGroups=o.containerGroups.filter(function(ne){return ne.tabbableNodes.length>0}),o.tabbableGroups.length<=0&&!d("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(o.containerGroups.find(function(ne){return ne.posTabIndexesFound})&&o.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},g=function(ne){var re=ne.activeElement;if(re)return re.shadowRoot&&re.shadowRoot.activeElement!==null?g(re.shadowRoot):re},b=function(ne){if(ne!==!1&&ne!==g(document)){if(!ne||!ne.focus){b(f());return}ne.focus({preventScroll:!!s.preventScroll}),o.mostRecentlyFocusedNode=ne,Jit(ne)&&ne.select()}},_=function(ne){var re=d("setReturnFocus",{params:[ne]});return re||(re===!1?!1:ne)},x=function(ne){var re=ne.target,ke=ne.event,Fe=ne.isBackward,Ae=Fe===void 0?!1:Fe;re=re||pA(ke),y();var we=null;if(o.tabbableGroups.length>0){var Re=c(re,ke),je=Re>=0?o.containerGroups[Re]:void 0;if(Re<0)Ae?we=o.tabbableGroups[o.tabbableGroups.length-1].lastTabbableNode:we=o.tabbableGroups[0].firstTabbableNode;else if(Ae){var ue=o.tabbableGroups.findIndex(function(vi){var ui=vi.firstTabbableNode;return re===ui});if(ue<0&&(je.container===re||hV(re,s.tabbableOptions)&&!F_(re,s.tabbableOptions)&&!je.nextTabbableNode(re,!1))&&(ue=Re),ue>=0){var Ne=ue===0?o.tabbableGroups.length-1:ue-1,Pt=o.tabbableGroups[Ne];we=nb(re)>=0?Pt.lastTabbableNode:Pt.lastDomTabbableNode}else CC(ke)||(we=je.nextTabbableNode(re,!1))}else{var Ot=o.tabbableGroups.findIndex(function(vi){var ui=vi.lastTabbableNode;return re===ui});if(Ot<0&&(je.container===re||hV(re,s.tabbableOptions)&&!F_(re,s.tabbableOptions)&&!je.nextTabbableNode(re))&&(Ot=Re),Ot>=0){var Xt=Ot===o.tabbableGroups.length-1?0:Ot+1,oi=o.tabbableGroups[Xt];we=nb(re)>=0?oi.firstTabbableNode:oi.firstDomTabbableNode}else CC(ke)||(we=je.nextTabbableNode(re))}}else we=d("fallbackFocus");return we},E=function(ne){var re=pA(ne);if(!(c(re,ne)>=0)){if(mE(s.clickOutsideDeactivates,ne)){a.deactivate({returnFocus:s.returnFocusOnDeactivate});return}mE(s.allowOutsideClick,ne)||ne.preventDefault()}},C=function(ne){var re=pA(ne),ke=c(re,ne)>=0;if(ke||re instanceof Document)ke&&(o.mostRecentlyFocusedNode=re);else{ne.stopImmediatePropagation();var Fe,Ae=!0;if(o.mostRecentlyFocusedNode)if(nb(o.mostRecentlyFocusedNode)>0){var we=c(o.mostRecentlyFocusedNode),Re=o.containerGroups[we].tabbableNodes;if(Re.length>0){var je=Re.findIndex(function(ue){return ue===o.mostRecentlyFocusedNode});je>=0&&(s.isKeyForward(o.recentNavEvent)?je+1<Re.length&&(Fe=Re[je+1],Ae=!1):je-1>=0&&(Fe=Re[je-1],Ae=!1))}}else o.containerGroups.some(function(ue){return ue.tabbableNodes.some(function(Ne){return nb(Ne)>0})})||(Ae=!1);else Ae=!1;Ae&&(Fe=x({target:o.mostRecentlyFocusedNode,isBackward:s.isKeyBackward(o.recentNavEvent)})),b(Fe||o.mostRecentlyFocusedNode||f())}o.recentNavEvent=void 0},k=function(ne){var re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;o.recentNavEvent=ne;var ke=x({event:ne,isBackward:re});ke&&(CC(ne)&&ne.preventDefault(),b(ke))},O=function(ne){(s.isKeyForward(ne)||s.isKeyBackward(ne))&&k(ne,s.isKeyBackward(ne))},D=function(ne){Yit(ne)&&mE(s.escapeDeactivates,ne)!==!1&&(ne.preventDefault(),a.deactivate())},B=function(ne){var re=pA(ne);c(re,ne)>=0||mE(s.clickOutsideDeactivates,ne)||mE(s.allowOutsideClick,ne)||(ne.preventDefault(),ne.stopImmediatePropagation())},j=function(){if(o.active)return Pse.activateTrap(n,a),o.delayInitialFocusTimer=s.delayInitialFocus?Ase(function(){b(f())}):b(f()),r.addEventListener("focusin",C,!0),r.addEventListener("mousedown",E,{capture:!0,passive:!1}),r.addEventListener("touchstart",E,{capture:!0,passive:!1}),r.addEventListener("click",B,{capture:!0,passive:!1}),r.addEventListener("keydown",O,{capture:!0,passive:!1}),r.addEventListener("keydown",D),a},Z=function(){if(o.active)return r.removeEventListener("focusin",C,!0),r.removeEventListener("mousedown",E,!0),r.removeEventListener("touchstart",E,!0),r.removeEventListener("click",B,!0),r.removeEventListener("keydown",O,!0),r.removeEventListener("keydown",D),a},X=function(ne){var re=ne.some(function(ke){var Fe=Array.from(ke.removedNodes);return Fe.some(function(Ae){return Ae===o.mostRecentlyFocusedNode})});re&&b(f())},ee=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(X):void 0,pe=function(){ee&&(ee.disconnect(),o.active&&!o.paused&&o.containers.map(function(ne){ee.observe(ne,{subtree:!0,childList:!0})}))};return a={get active(){return o.active},get paused(){return o.paused},activate:function(ne){if(o.active)return this;var re=l(ne,"onActivate"),ke=l(ne,"onPostActivate"),Fe=l(ne,"checkCanFocusTrap");Fe||y(),o.active=!0,o.paused=!1,o.nodeFocusedBeforeActivation=g(r),re==null||re();var Ae=function(){Fe&&y(),j(),pe(),ke==null||ke()};return Fe?(Fe(o.containers.concat()).then(Ae,Ae),this):(Ae(),this)},deactivate:function(ne){if(!o.active)return this;var re=kse({onDeactivate:s.onDeactivate,onPostDeactivate:s.onPostDeactivate,checkCanReturnFocus:s.checkCanReturnFocus},ne);clearTimeout(o.delayInitialFocusTimer),o.delayInitialFocusTimer=void 0,Z(),o.active=!1,o.paused=!1,pe(),Pse.deactivateTrap(n,a);var ke=l(re,"onDeactivate"),Fe=l(re,"onPostDeactivate"),Ae=l(re,"checkCanReturnFocus"),we=l(re,"returnFocus","returnFocusOnDeactivate");ke==null||ke();var Re=function(){Ase(function(){we&&b(_(o.nodeFocusedBeforeActivation)),Fe==null||Fe()})};return we&&Ae?(Ae(_(o.nodeFocusedBeforeActivation)).then(Re,Re),this):(Re(),this)},pause:function(ne){return o.active?(o.manuallyPaused=!0,this._setPausedState(!0,ne)):this},unpause:function(ne){return o.active?(o.manuallyPaused=!1,n[n.length-1]!==this?this:this._setPausedState(!1,ne)):this},updateContainerElements:function(ne){var re=[].concat(ne).filter(Boolean);return o.containers=re.map(function(ke){return typeof ke=="string"?r.querySelector(ke):ke}),o.active&&y(),pe(),this}},Object.defineProperties(a,{_isManuallyPaused:{value:function(){return o.manuallyPaused}},_setPausedState:{value:function(ne,re){if(o.paused===ne)return this;if(o.paused=ne,ne){var ke=l(re,"onPause"),Fe=l(re,"onPostPause");ke==null||ke(),Z(),pe(),Fe==null||Fe()}else{var Ae=l(re,"onUnpause"),we=l(re,"onPostUnpause");Ae==null||Ae(),y(),j(),pe(),we==null||we()}return this}}}),a.updateContainerElements(e),a};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const vR=new WeakSet;function trt(t,e){return vR.has(t)||mM(e),!1}function irt(t,e){const i=(e==null?void 0:e.fallbackFocus)||t,r=(e==null?void 0:e.clickOutsideDeactivates)??!0;return{fallbackFocus:i,...e,document:t.ownerDocument,tabbableOptions:CH,trapStack:jSe,clickOutsideDeactivates:n=>(vR.has(t)||vR.add(t),typeof r=="function"?r(n):r),onPostDeactivate:()=>{vR.delete(t)},setReturnFocus:n=>{const s=typeof(e==null?void 0:e.setReturnFocus)=="function"?e.setReturnFocus(n):e==null?void 0:e.setReturnFocus;return s===void 0?trt(t,n):s}}}function Lse(t,{focusTrapOptions:e},i){return!(e!=null&&e.extraContainers)&&!i?t:[t,...Rse(e==null?void 0:e.extraContainers),...Rse(i)]}function Rse(t=[]){return Array.isArray(t)?t:[t]}const rrt=t=>XH((e,i)=>{let r,n,s;const o=t.focusTrapOptions;i.onConnected(()=>{e[t.triggerProp]&&r&&a.activate()}),i.onUpdate(l=>{e.hasUpdated&&l.has("focusTrapDisabled")&&(e.focusTrapDisabled?a.deactivate():a.activate())}),i.onDisconnected(()=>a.deactivate());const a={activate:()=>{const l=n||e.el;if(l.isConnected){if(!r){const c={...o,...e.focusTrapOptions};s||(s=Lse(l,e)),r=ert(s,irt(l,c))}(typeof e.focusTrapDisabledOverride=="function"?!e.focusTrapDisabledOverride():!e.focusTrapDisabled)&&r.activate()}},deactivate:()=>r==null?void 0:r.deactivate(),overrideFocusTrapEl:l=>{if(r)throw new Error("Focus trap already created");n=l},setExtraContainers:l=>{const c=n||e.el;s=Lse(c,e,l)},updateContainerElements:()=>r==null?void 0:r.updateContainerElements(s)};return a});/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */function cD(t){return t==="Enter"||t===" "}const dW=["0","1","2","3","4","5","6","7","8","9"];/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const nrt=5;function srt({startX:t,startY:e,endX:i,endY:r}){return Math.hypot(i-t,r-e)>nrt}class ort{constructor(){this.registeredElements=new Map,this.registeredElementCount=0,this.queryPopover=e=>{const{registeredElements:i}=this,r=e.find(n=>i.has(n));return i.get(r)},this.togglePopovers=e=>{const i=e.composedPath(),r=this.queryPopover(i);r&&!r.triggerDisabled&&(r.open=!r.open),Array.from(this.registeredElements.values()).filter(n=>n!==r&&n.autoClose&&n.open&&!i.includes(n)).forEach(n=>n.open=!1)},this.keyDownHandler=e=>{e.defaultPrevented||(e.key==="Escape"?this.closeAllPopovers():cD(e.key)&&this.togglePopovers(e))},this.pointerDownHandler=e=>{if(e.defaultPrevented||!sR(e))return;const{clientX:i,clientY:r}=e;this.pointerDownPosition={x:i,y:r}},this.clickHandler=e=>{gZe(e)||e.defaultPrevented||this.pointerDownPosition&&srt({endY:e.clientY,endX:e.clientX,startY:this.pointerDownPosition.y,startX:this.pointerDownPosition.x})||(this.pointerDownPosition=void 0,this.togglePopovers(e))}}registerElement(e,i){this.registeredElementCount++,this.registeredElements.set(e,i),this.registeredElementCount===1&&this.addListeners()}unregisterElement(e){this.registeredElements.delete(e)&&this.registeredElementCount--,this.registeredElementCount===0&&this.removeListeners()}closeAllPopovers(){Array.from(this.registeredElements.values()).forEach(e=>e.open=!1)}addListeners(){window.addEventListener("pointerdown",this.pointerDownHandler),window.addEventListener("click",this.clickHandler),window.addEventListener("keydown",this.keyDownHandler)}removeListeners(){window.removeEventListener("pointerdown",this.pointerDownHandler),window.removeEventListener("click",this.clickHandler),window.removeEventListener("keydown",this.keyDownHandler)}}const hu={positionContainer:"position-container",container:"container",closeButtonContainer:"close-button-container",closeButton:"close-button",content:"content",hasHeader:"has-header",header:"header",headerContainer:"header-container",heading:"heading"},Ose="auto",Fse="aria-controls",Nse="aria-expanded",art=Mi`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{display:contents;--calcite-floating-ui-z-index: var(--calcite-popover-z-index, var(--calcite-z-index-popup))}.position-container{inline-size:max-content;display:none;max-inline-size:100vw;max-block-size:100vh;inset-block-start:0;left:0;z-index:var(--calcite-floating-ui-z-index)}@starting-style{.position-container{opacity:0;inset-block-start:0;left:0}}.position-container{max-inline-size:var(--calcite-popover-max-size-x, 100vw)}.position-container .calcite-floating-ui-anim{position:relative;transition-duration:var(--calcite-floating-ui-transition);transition-property:inset-block-start,left,opacity,display;transition-behavior:allow-discrete;opacity:0;box-shadow:0 0 16px #00000029;z-index:var(--calcite-z-index);border-radius:.25rem}.position-container[data-placement^=bottom] .calcite-floating-ui-anim{inset-block-start:-5px}.position-container[data-placement^=top] .calcite-floating-ui-anim{inset-block-start:5px}.position-container[data-placement^=left] .calcite-floating-ui-anim{left:5px}.position-container[data-placement^=right] .calcite-floating-ui-anim{left:-5px}.position-container[data-placement] .calcite-floating-ui-anim--active{opacity:1;inset-block-start:0;left:0}@starting-style{.position-container[data-placement] .calcite-floating-ui-anim--active{opacity:0}}.calcite-floating-ui-arrow{pointer-events:none;position:absolute;z-index:calc(var(--calcite-z-index) * -1);fill:var(--calcite-color-foreground-1)}.calcite-floating-ui-arrow__stroke{stroke:var(--calcite-color-border-3)}:host([scale=s]) .heading{padding:.5rem .75rem;font-size:var(--calcite-font-size--1);line-height:1.375}:host([scale=m]) .heading{padding:.75rem 1rem;font-size:var(--calcite-font-size-0);line-height:1.375}:host([scale=l]) .heading{padding:1rem 1.25rem;font-size:var(--calcite-font-size-1);line-height:1.375}.position-container .calcite-floating-ui-anim{border-width:1px;border-style:solid;background-color:var(--calcite-popover-background-color, var(--calcite-color-foreground-1));border-color:var(--calcite-popover-border-color, var(--calcite-color-border-3));border-radius:var(--calcite-popover-corner-radius, var(--calcite-corner-radius-round))}.calcite-floating-ui-arrow{fill:var(--calcite-popover-background-color, var(--calcite-color-foreground-1))}.calcite-floating-ui-arrow__stroke{stroke:var(--calcite-popover-border-color, var(--calcite-color-border-3))}.header{display:flex;flex:1 1 auto;align-items:stretch;justify-content:flex-start;border-width:0px;border-bottom-width:1px;border-style:solid;border-block-end-color:var(--calcite-popover-border-color, var(--calcite-color-border-3))}.heading{margin:0;display:block;flex:1 1 auto;align-self:center;white-space:normal;font-weight:var(--calcite-font-weight-medium);word-wrap:break-word;word-break:break-word;color:var(--calcite-popover-text-color, var(--calcite-color-text-1))}.header-container{position:relative;display:flex;height:100%;flex-direction:row;flex-wrap:nowrap;border-radius:.25rem;color:var(--calcite-popover-text-color, var(--calcite-color-text-1))}.header-container.has-header{flex-direction:column}.content{display:flex;height:100%;width:100%;flex-direction:column;flex-wrap:nowrap;align-self:center;word-wrap:break-word;word-break:break-word}.close-button-container{display:flex;overflow:hidden;flex:0 0 auto;border-start-end-radius:var(--calcite-popover-corner-radius, var(--calcite-corner-radius-round));border-end-end-radius:var(--calcite-popover-corner-radius, var(--calcite-corner-radius-round));--calcite-action-corner-radius-start-end: var(--calcite-popover-corner-radius, var(--calcite-corner-radius-sharp));--calcite-action-corner-radius-end-end: var(--calcite-popover-corner-radius, var(--calcite-corner-radius-sharp))}::slotted(calcite-panel),::slotted(calcite-flow){height:100%}:host([hidden]){display:none}[hidden]{display:none}`,Dse=new ort,oF=class oF extends ir{constructor(){super(...arguments),this.focusTrap=rrt({triggerProp:"open",focusTrapOptions:{allowOutsideClick:!0,escapeDeactivates:e=>(e.defaultPrevented||(this.open=!1,e.preventDefault()),!1)}})(this),this.guid=`calcite-popover-${ld()}`,this.hasLoaded=!1,this.mutationObserver=ts("mutation",()=>this.focusTrap.updateContainerElements()),this.transitionProp="opacity",this.messages=Po(),this.focusSetter=Ka()(this),this.floatingLayout="vertical",this.autoClose=!1,this.closable=!1,this.flipDisabled=!1,this.focusTrapDisabled=!1,this.offsetDistance=$se,this.offsetSkidding=0,this.open=!1,this.overlayPositioning="absolute",this.placement=Ose,this.pointerDisabled=!1,this.scale="m",this.triggerDisabled=!1,this.calcitePopoverBeforeClose=ot({cancelable:!1}),this.calcitePopoverBeforeOpen=ot({cancelable:!1}),this.calcitePopoverClose=ot({cancelable:!1}),this.calcitePopoverOpen=ot({cancelable:!1})}async reposition(e=!1){const{referenceEl:i,placement:r,overlayPositioning:n,flipDisabled:s,filteredFlipPlacements:o,offsetDistance:a,offsetSkidding:l,arrowEl:c,floatingEl:d}=this;return Jwe(this,{floatingEl:d,referenceEl:i,overlayPositioning:n,placement:r,flipDisabled:s,flipPlacements:o,offsetDistance:a,offsetSkidding:l,arrowEl:c,type:"popover"},e)}async setFocus(e){return this.focusSetter(()=>this.el,e)}async updateFocusTrapElements(){this.focusTrap.updateContainerElements()}connectedCallback(){var e;super.connectedCallback(),(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0,subtree:!0}),this.setFilteredPlacements(),requestAnimationFrame(()=>this.setUpReferenceElement(this.hasLoaded))}willUpdate(e){e.has("flipPlacements")&&this.flipPlacementsHandler(),e.has("open")&&(this.hasUpdated||this.open!==!1)&&this.openHandler(),(e.has("offsetDistance")&&(this.hasUpdated||this.offsetDistance!==$se)||e.has("offsetSkidding")&&(this.hasUpdated||this.offsetSkidding!==0)||e.has("overlayPositioning")&&(this.hasUpdated||this.overlayPositioning!=="absolute")||e.has("placement")&&(this.hasUpdated||this.placement!==Ose))&&this.reposition(!0),e.has("referenceElement")&&this.referenceElementHandler()}loaded(){this.referenceElement&&!this.referenceEl&&this.setUpReferenceElement(),this.hasLoaded=!0}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this.mutationObserver)==null||e.disconnect(),this.removeReferences(),aW(this)}flipPlacementsHandler(){this.setFilteredPlacements(),this.reposition(!0)}openHandler(){lW(this),this.reposition(!0),this.setExpandedAttr()}referenceElementHandler(){this.setUpReferenceElement(),this.reposition(!0)}setFloatingEl(e){this.floatingEl=e,e&&requestAnimationFrame(()=>this.setUpReferenceElement())}setTransitionEl(e){e&&(this.transitionEl=e)}setFilteredPlacements(){const{el:e,flipPlacements:i}=this;this.filteredFlipPlacements=i?Zwe(i,e):null}setUpReferenceElement(e=!0){this.removeReferences(),this.referenceEl=this.getReferenceElement(),LI(this);const{el:i,referenceElement:r,referenceEl:n}=this;e&&r&&!n&&console.warn(`${i.tagName}: reference-element id "${r}" was not found.`,{el:i}),this.addReferences()}getId(){return this.el.id||this.guid}setExpandedAttr(){const{referenceEl:e,open:i}=this;e&&"setAttribute"in e&&e.setAttribute(Nse,A2(i))}addReferences(){const{referenceEl:e}=this;if(!e)return;const i=this.getId();"setAttribute"in e&&e.setAttribute(Fse,i),Dse.registerElement(e,this.el),this.setExpandedAttr()}removeReferences(){const{referenceEl:e}=this;e&&("removeAttribute"in e&&(e.removeAttribute(Fse),e.removeAttribute(Nse)),Dse.unregisterElement(e))}getReferenceElement(){const{referenceElement:e,el:i}=this;return(typeof e=="string"?HN(i,{id:e}):e)||null}hide(){this.open=!1}onBeforeOpen(){this.calcitePopoverBeforeOpen.emit()}onOpen(){this.calcitePopoverOpen.emit(),this.focusTrap.activate()}onBeforeClose(){this.calcitePopoverBeforeClose.emit()}onClose(){this.calcitePopoverClose.emit(),oW(this),this.focusTrap.deactivate()}storeArrowEl(e){this.arrowEl=e,this.reposition(!0)}renderCloseButton(){const{messages:e,closable:i}=this;return i?ri(hu.closeButtonContainer,Se`<div class=${Te(hu.closeButtonContainer)}><calcite-action appearance=transparent class=${Te(hu.closeButton)} @click=${this.hide} .scale=${this.scale} .text=${e.close}><calcite-icon icon=x .scale=${ua(this.scale)}></calcite-icon></calcite-action></div>`):null}renderHeader(){const{heading:e,headingLevel:i}=this,r=e?uW({class:hu.heading,level:i,children:e}):null;return r?ri(hu.header,Se`<div class=${Te(hu.header)}>${r}${this.renderCloseButton()}</div>`):null}render(){const{referenceEl:e,heading:i,label:r,open:n,pointerDisabled:s,floatingLayout:o}=this,a=e&&n,l=!a,c=s?null:ri("floating-arrow",Sit({floatingLayout:o,ref:this.storeArrowEl}));return this.el.inert=l,this.el.ariaLabel=r,this.el.ariaLive="polite",Hu(this.el,"id",this.getId()),this.el.role="dialog",Se`<div class=${Te(hu.positionContainer)} ${Ri(this.setFloatingEl)}><div class=${Te({[hu.container]:!0,[I3.animation]:!0,[I3.animationActive]:a})} ${Ri(this.setTransitionEl)}>${c}<div class=${Te({[hu.hasHeader]:!!i,[hu.headerContainer]:!0})}>${this.renderHeader()}<div class=${Te(hu.content)}><slot></slot></div>${i?null:this.renderCloseButton()}</div></div></div>`}};oF.properties={floatingLayout:[16,{},{state:!0}],referenceEl:[16,{},{state:!0}],autoClose:[7,{},{reflect:!0,type:Boolean}],closable:[7,{},{reflect:!0,type:Boolean}],flipDisabled:[7,{},{reflect:!0,type:Boolean}],flipPlacements:[0,{},{attribute:!1}],focusTrapDisabled:[7,{},{reflect:!0,type:Boolean}],focusTrapOptions:[0,{},{attribute:!1}],heading:1,headingLevel:[11,{},{type:Number,reflect:!0}],label:1,messageOverrides:[0,{},{attribute:!1}],offsetDistance:[11,{},{type:Number,reflect:!0}],offsetSkidding:[11,{},{reflect:!0,type:Number}],open:[7,{},{reflect:!0,type:Boolean}],overlayPositioning:[3,{},{reflect:!0}],placement:[3,{},{reflect:!0}],pointerDisabled:[7,{},{reflect:!0,type:Boolean}],referenceElement:1,scale:[3,{},{reflect:!0}],triggerDisabled:[7,{},{reflect:!0,type:Boolean}]},oF.styles=art;let V9=oF;rr("calcite-popover",V9);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */function L3(t,e){return(t+e)%e}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const zse={menu:"menu",defaultTrigger:"default-trigger"},pV="calcite-action-menu",fV={button:t=>`${pV}-${t}-menu-button`,menu:t=>`${pV}-${t}-menu`,action:(t,e)=>`${pV}-${t}-action-${e}`},p$={tooltip:"tooltip",trigger:"trigger"},lrt={menu:"ellipsis"};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const crt=Mi`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{box-sizing:border-box;display:flex;flex-direction:column;font-size:var(--calcite-font-size-1)}::slotted(calcite-action-group:not(:last-of-type)){border-block-end-width:var(--calcite-border-width-sm)}.default-trigger{position:relative;block-size:100%;flex:0 1 auto;align-self:stretch}slot[name=trigger]::slotted(calcite-action),calcite-action::slotted([slot=trigger]){position:relative;block-size:100%;flex:0 1 auto;align-self:stretch}.menu{display:flex;max-block-size:45vh;flex-direction:column;flex-wrap:nowrap;overflow-y:auto;overflow-x:hidden;outline:2px solid transparent;outline-offset:2px;gap:var(--calcite-action-menu-items-space, 0)}:host([hidden]){display:none}[hidden]{display:none}`,urt=["ArrowUp","ArrowDown","End","Home"],aF=class aF extends ir{constructor(){super(...arguments),this.guid=ld(),this.actionElements=[],this.menuButtonClick=()=>{this.toggleOpen()},this.menuButtonId=fV.button(this.guid),this.menuButtonKeyDown=e=>{const{key:i}=e,{actionElements:r,activeMenuItemIndex:n,open:s}=this;if(r.length){if(cD(i)){if(e.preventDefault(),!s){this.toggleOpen();return}const o=r[n];o?o.click():this.toggleOpen(!1)}if(i==="Tab"){this.open=!1;return}if(i==="Escape"){this.toggleOpen(!1),e.preventDefault();return}this.handleActionNavigation(e,i,r)}},this.menuId=fV.menu(this.guid),this._open=!1,this.updateAction=(e,i)=>{const{guid:r,activeMenuItemIndex:n}=this,s=fV.action(r,i);e.tabIndex=-1,e.setAttribute("role","menuitem"),e.id||(e.id=s),e.activeDescendant=i===n},this.focusSetter=Ka()(this),this.activeMenuItemIndex=-1,this.appearance="solid",this.expanded=!1,this.overlayPositioning="absolute",this.placement="auto",this.scale="m",this.calciteActionMenuCollapse=ot({cancelable:!1}),this.calciteActionMenuExpand=ot({cancelable:!1}),this.calciteActionMenuOpen=ot({cancelable:!1})}get open(){return this._open}set open(e){const i=this._open;e!==i&&(this._open=e,this.openHandler(e))}async setFocus(e){return this.focusSetter(()=>this.menuButtonEl,e)}connectedCallback(){super.connectedCallback(),this.connectMenuButtonEl()}willUpdate(e){e.has("expanded")&&(this.hasUpdated||this.expanded!==!1)&&this.expandedHandler(),e.has("activeMenuItemIndex")&&(this.hasUpdated||this.activeMenuItemIndex!==-1)&&this.updateActions(this.actionElements),e.has("expanded")&&this.hasUpdated&&(this.expanded?this.calciteActionMenuExpand.emit():this.calciteActionMenuCollapse.emit())}disconnectedCallback(){super.disconnectedCallback(),this.disconnectMenuButtonEl()}expandedHandler(){this.open=!1,this.setTooltipReferenceElement()}openHandler(e){this.menuButtonEl&&(this.menuButtonEl.active=e,this.menuButtonEl.aria={expanded:e}),this.popoverEl&&(this.popoverEl.open=e),this.activeMenuItemIndex=this.open?0:-1,this.calciteActionMenuOpen.emit(),this.setTooltipReferenceElement()}connectMenuButtonEl(){const{menuButtonId:e,menuId:i,open:r,label:n}=this,s=this.slottedMenuButtonEl||this.defaultMenuButtonEl;this.menuButtonEl!==s&&(this.disconnectMenuButtonEl(),this.menuButtonEl=s,this.setTooltipReferenceElement(),s&&(s.active=r,s.setAttribute("aria-controls",i),s.setAttribute("aria-expanded",A2(r)),s.setAttribute("aria-haspopup","true"),s.id||(s.id=e),s.label||(s.label=n),s.text||(s.text=n),s.addEventListener("click",this.menuButtonClick),s.addEventListener("keydown",this.menuButtonKeyDown)))}disconnectMenuButtonEl(){const{menuButtonEl:e}=this;e&&(e.removeEventListener("click",this.menuButtonClick),e.removeEventListener("keydown",this.menuButtonKeyDown),this.menuButtonEl=null)}setMenuButtonEl(e){const i=e.target.assignedElements({flatten:!0}).filter(r=>r==null?void 0:r.matches("calcite-action"));this.slottedMenuButtonEl=i[0],this.connectMenuButtonEl()}setDefaultMenuButtonEl(e){this.defaultMenuButtonEl=e,this.connectMenuButtonEl()}setPopoverEl(e){e&&(this.popoverEl=e,e.open=this.open)}handleCalciteActionClick(){this.open=!1,this.setFocus()}updateTooltip(e){const i=e.target.assignedElements({flatten:!0}).filter(r=>r==null?void 0:r.matches("calcite-tooltip"));this.tooltipEl=i[0],this.setTooltipReferenceElement()}setTooltipReferenceElement(){const{tooltipEl:e,expanded:i,menuButtonEl:r,open:n}=this;e&&(e.referenceElement=!i&&!n?r:null)}updateActions(e){e==null||e.forEach(this.updateAction)}async handleDefaultSlotChange(e){const i=e.target.assignedElements({flatten:!0}).reduce((r,n)=>n!=null&&n.matches("calcite-action")?(r.push(n),r):n!=null&&n.matches("calcite-action-group")?r.concat(Array.from(n.querySelectorAll("calcite-action"))):r,[]);await this.componentOnReady(),this.actionElements=i.filter(r=>!r.disabled&&!r.hidden)}isValidKey(e,i){return!!i.find(r=>r===e)}handleActionNavigation(e,i,r){if(!this.isValidKey(i,urt))return;if(e.preventDefault(),!this.open){this.toggleOpen(),(i==="Home"||i==="ArrowDown")&&(this.activeMenuItemIndex=0),(i==="End"||i==="ArrowUp")&&(this.activeMenuItemIndex=r.length-1);return}i==="Home"&&(this.activeMenuItemIndex=0),i==="End"&&(this.activeMenuItemIndex=r.length-1);const n=this.activeMenuItemIndex;i==="ArrowUp"&&(this.activeMenuItemIndex=L3(Math.max(n-1,-1),r.length)),i==="ArrowDown"&&(this.activeMenuItemIndex=L3(n+1,r.length))}toggleOpen(e=!this.open){this.open=e}handlePopoverOpen(e){e.stopPropagation(),this.open=!0,this.setFocus()}handlePopoverClose(e){e.stopPropagation(),this.open=!1}renderMenuButton(){const{appearance:e,label:i,scale:r,expanded:n}=this;return Se`<slot name=${p$.trigger} @slotchange=${this.setMenuButtonEl}><calcite-action .appearance=${e} .aria=${{expanded:n}} class=${Te(zse.defaultTrigger)} .icon=${lrt.menu} .scale=${r} .text=${i} .textEnabled=${n} ${Ri(this.setDefaultMenuButtonEl)}></calcite-action></slot>`}renderMenuItems(){const{actionElements:e,activeMenuItemIndex:i,menuId:r,menuButtonEl:n,label:s,placement:o,overlayPositioning:a,flipPlacements:l}=this,c=e[i],d=(c==null?void 0:c.id)||null;return Se`<calcite-popover auto-close .flipPlacements=${l} focus-trap-disabled .label=${s} offset-distance=0 @calcitePopoverClose=${this.handlePopoverClose} @calcitePopoverOpen=${this.handlePopoverOpen} .overlayPositioning=${a} .placement=${o} pointer-disabled .referenceElement=${n} trigger-disabled ${Ri(this.setPopoverEl)}><div aria-activedescendant=${d??ct} aria-labelledby=${(n==null?void 0:n.id)??ct} class=${Te(zse.menu)} id=${r??ct} @click=${this.handleCalciteActionClick} role=menu tabindex=-1><slot @slotchange=${this.handleDefaultSlotChange}></slot></div></calcite-popover>`}render(){return Se`${this.renderMenuButton()}${this.renderMenuItems()}<slot name=${p$.tooltip} @slotchange=${this.updateTooltip}></slot>`}};aF.properties={activeMenuItemIndex:[16,{},{state:!0}],menuButtonEl:[16,{},{state:!0}],appearance:[3,{},{reflect:!0}],expanded:[7,{},{reflect:!0,type:Boolean}],flipPlacements:[0,{},{attribute:!1}],label:1,open:[7,{},{reflect:!0,type:Boolean}],overlayPositioning:[3,{},{reflect:!0}],placement:[3,{},{reflect:!0}],scale:[3,{},{reflect:!0}]},aF.styles=crt;let j9=aF;rr("calcite-action-menu",j9);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const CM={menuActions:"menu-actions",menuTooltip:"menu-tooltip"},drt={menu:"ellipsis"},hrt={container:"container"};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const prt=Mi`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host{display:flex;flex-direction:column;padding:0;background-color:transparent;border-color:var(--calcite-action-group-border-color, var(--calcite-color-border-3));border-style:solid;border-width:0}.container{display:flex;flex-grow:1;flex-direction:column}:host([columns="1"]){--calcite-internal-action-group-columns: 1}:host([columns="2"]){--calcite-internal-action-group-columns: 2}:host([columns="3"]){--calcite-internal-action-group-columns: 3}:host([columns="4"]){--calcite-internal-action-group-columns: 4}:host([columns="5"]){--calcite-internal-action-group-columns: 5}:host([columns="6"]){--calcite-internal-action-group-columns: 6}:host(:first-child){padding-block-start:0px}:host([layout=horizontal]),:host([layout=horizontal]) .container{flex-direction:row}:host([layout=grid]){display:grid}:host([layout=grid]) .container{display:grid;place-content:stretch;background-color:transparent;grid-template-columns:repeat(var(--calcite-action-group-columns, var(--calcite-internal-action-group-columns, 3)),auto);gap:var(--calcite-action-group-gap, 1px);padding:var(--calcite-action-group-gap, 1px)}:host([layout=horizontal]) ::slotted(calcite-action-group){border-inline-end:var(--calcite-size-px)}:host([hidden]){display:none}[hidden]{display:none}`,PC=class PC extends ir{constructor(){super(...arguments),this.messages=Po(),this.focusSetter=Ka()(this),this.hasMenuActions=!1,this.expanded=!1,this.layout="vertical",this.menuOpen=!1,this.overlayPositioning="absolute",this.scale="m",this.calciteActionGroupCollapse=ot({cancelable:!1}),this.calciteActionGroupExpand=ot({cancelable:!1})}async setFocus(e){return this.focusSetter(()=>this.el,e)}willUpdate(e){e.has("expanded")&&((this.hasUpdated||this.expanded!==!1)&&(this.menuOpen=!1),this.hasUpdated&&(this.expanded?this.calciteActionGroupExpand.emit():this.calciteActionGroupCollapse.emit()))}setMenuOpen(e){this.menuOpen=!!e.currentTarget.open}handleMenuActionsSlotChange(e){this.hasMenuActions=lr(e)}renderMenu(){const{expanded:e,menuOpen:i,scale:r,layout:n,messages:s,overlayPositioning:o,hasMenuActions:a,menuFlipPlacements:l,menuPlacement:c}=this;return Se`<calcite-action-menu .expanded=${e} .flipPlacements=${l??(n==="horizontal"?["top","bottom"]:["left","right"])} .hidden=${!a} .label=${s.more} @calciteActionMenuOpen=${this.setMenuOpen} .open=${i} .overlayPositioning=${o} .placement=${c??(n==="horizontal"?"bottom-start":"leading-start")} .scale=${r}><calcite-action .aria=${{expanded:e}} .icon=${drt.menu} .scale=${r} slot=${p$.trigger} .text=${s.more} .textEnabled=${e}></calcite-action><slot name=${CM.menuActions} @slotchange=${this.handleMenuActionsSlotChange}></slot><slot name=${CM.menuTooltip} slot=${p$.tooltip}></slot></calcite-action-menu>`}render(){return Se`<div .ariaLabel=${this.label} class=${Te(hrt.container)} role=group><slot></slot>${this.renderMenu()}</div>`}};PC.properties={hasMenuActions:[16,{},{state:!0}],columns:[11,{},{type:Number,reflect:!0}],expanded:[7,{},{reflect:!0,type:Boolean}],label:1,layout:[3,{},{reflect:!0}],menuFlipPlacements:[0,{},{attribute:!1}],menuOpen:[7,{},{reflect:!0,type:Boolean}],menuPlacement:[3,{},{reflect:!0}],messageOverrides:[0,{},{attribute:!1}],overlayPositioning:[3,{},{reflect:!0}],scale:[3,{},{reflect:!0}]},PC.shadowRootOptions={mode:"open",delegatesFocus:!0},PC.styles=prt;let R3=PC;rr("calcite-action-group",R3);const n_e=Object.freeze(Object.defineProperty({__proto__:null,ActionGroup:R3},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const hW=t=>Array.from(t.querySelectorAll("calcite-action")).filter(e=>e.closest("calcite-action-menu")?e.slot===p$.trigger:!0),frt=({actionGroups:t,expanded:e,overflowCount:i})=>{let r=i;t.reverse().forEach(n=>{let s=0;const o=hW(n).reverse();o.forEach(a=>{a.slot===CM.menuActions&&(a.removeAttribute("slot"),a.textEnabled=e)}),r>0&&o.some(a=>(o.filter(c=>!c.slot).length>1&&o.length>2&&!a.closest("calcite-action-menu")&&(a.textEnabled=!0,a.setAttribute("slot",CM.menuActions),s++,s>1&&r--),r<1)),n.manager.component.requestUpdate()})},Vse={chevronsLeft:"chevrons-left",chevronsRight:"chevrons-right"};function mrt(t,e){var i;return t||((i=e.closest("calcite-shell-panel"))==null?void 0:i.position)||"start"}function yrt({el:t,expanded:e}){hW(t).filter(i=>i.slot!==CM.menuActions).forEach(i=>i.textEnabled=e),t.querySelectorAll("calcite-action-group, calcite-action-menu").forEach(i=>i.expanded=e)}const grt=({tooltip:t,referenceElement:e,expanded:i,ref:r})=>(t&&(t.referenceElement=!i&&e?e:null),r&&r(e),e),vrt=({expanded:t,expandText:e,collapseText:i,expandLabel:r,collapseLabel:n,toggle:s,el:o,position:a,tooltip:l,ref:c,scale:d})=>{const f=Qu(o)==="rtl",y=t?i:e,g=t?n:r,b=[Vse.chevronsLeft,Vse.chevronsRight];f&&b.reverse();const _=mrt(a,o)==="end",x=_?b[1]:b[0],E=_?b[0]:b[1];return Se`<calcite-action .aria=${{expanded:t}} .icon=${t?x:E} id=expand-toggle .label=${g} @click=${s} .scale=${d} .text=${y} .textEnabled=${t} title=${(!t&&!l?y:null)??ct} ${Ri(k=>grt({tooltip:l,referenceElement:k,expanded:t,ref:c}))}></calcite-action>`};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const brt=()=>XH((t,e)=>{const i=new Set;return e.onDisconnected(()=>{i.forEach(r=>r.cancel())}),{add:r=>{[r].flat().forEach(n=>i.add(n))},resources:i}});/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const wrt=({bufferSize:t=0,containerSize:e,itemSizes:i})=>{const r=e-t;let n=i.length,s=0;for(const[o,a]of i.entries())if(s=s+a,s>r){n=o;break}else continue;return n},_rt=({bufferSize:t=0,containerSize:e,itemSizes:i})=>Math.max(i.length-wrt({bufferSize:t,itemSizes:i,containerSize:e}),0),jse={container:"container",actionGroupEnd:"action-group--end"},mV={actionsEnd:"actions-end",bottomActions:"bottom-actions",expandTooltip:"expand-tooltip"},xrt=Mi`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host{display:inline-flex;align-self:stretch;background:transparent}.container{display:inline-flex;flex:1 1 auto;flex-direction:column;gap:var(--calcite-action-bar-items-space, 0);background-color:var(--calcite-action-bar-background-color, var(--calcite-color-foreground-1))}@keyframes in{0%{opacity:0}to{opacity:1}}:host([floating]) .container{animation:in var(--calcite-internal-animation-timing-slow) ease-in-out;overflow:hidden;border-radius:var(--calcite-action-bar-corner-radius, var(--calcite-corner-radius-round));--tw-shadow: 0 6px 20px -4px rgba(0, 0, 0, .1), 0 4px 12px -2px rgba(0, 0, 0, .08);--tw-shadow-colored: 0 6px 20px -4px var(--tw-shadow-color), 0 4px 12px -2px var(--tw-shadow-color);box-shadow:var(--calcite-action-bar-shadow, var(--tw-ring-offset-shadow, 0 0 rgba(0, 0, 0, 0)), var(--tw-ring-shadow, 0 0 rgba(0, 0, 0, 0)), var(--tw-shadow))}:host([layout=vertical]){flex-direction:column}:host([layout=vertical]):host([overflow-actions-disabled]) .container{overflow-y:auto}:host([layout=vertical]):host([expanded]) .container{max-inline-size:var(--calcite-action-bar-expanded-max-width, auto)}:host([layout=vertical]) .action-group--end{margin-block-start:auto}:host([layout=vertical]) ::slotted(calcite-action-group:not(:last-of-type)){border-block-end-width:var(--calcite-border-width-sm)}:host([layout=horizontal]){flex-direction:row}:host([layout=horizontal]) .container{flex-direction:row}:host([layout=horizontal]):host([overflow-actions-disabled]) .container{overflow-x:auto}:host([layout=horizontal]) .action-group--end{margin-inline-start:auto}:host([layout=horizontal]) ::slotted(calcite-action-group:not(:last-of-type)){border-inline-end-width:var(--calcite-border-width-sm)}.action-group--end{justify-content:flex-end}:host([hidden]){display:none}[hidden]{display:none}`,lF=class lF extends ir{constructor(){super(),this.mutationObserver=ts("mutation",()=>this.mutationObserverHandler()),this.cancelable=brt()(this),this.resize=Gwe(({width:e,height:i})=>{const{expanded:r,expandDisabled:n,layout:s,overflowActionsDisabled:o,actionGroups:a}=this;if(o||s==="vertical"&&!i||s==="horizontal"&&!e)return;const l=this.getItemSizes();this.updateGroups();const c=this.hasActionsEnd||this.hasBottomActions||!n?a.length+1:a.length,d=_rt({bufferSize:c,containerSize:s==="horizontal"?e:i,itemSizes:l});frt({actionGroups:a,expanded:r,overflowCount:d})},Nae.resize),this.resizeHandler=e=>{const{width:i,height:r}=e.contentRect;this.resize({width:i,height:r})},this.resizeObserver=ts("resize",e=>this.resizeHandlerEntries(e)),this.toggleExpand=()=>{this.expanded=!this.expanded,this.calciteActionBarToggle.emit()},this.messages=Po(),this.focusSetter=Ka()(this),this.hasActionsEnd=!1,this.hasBottomActions=!1,this.floating=!1,this.expandDisabled=!1,this.expanded=!1,this.layout="vertical",this.overflowActionsDisabled=!1,this.overlayPositioning="absolute",this.scale="m",this.calciteActionBarCollapse=ot({cancelable:!1}),this.calciteActionBarExpand=ot({cancelable:!1}),this.calciteActionBarToggle=ot({cancelable:!1}),this.listen("calciteActionMenuOpen",this.actionMenuOpenHandler)}async overflowActions(){this.resize({width:this.el.clientWidth,height:this.el.clientHeight})}async setFocus(e){return this.focusSetter(()=>this.el,e)}connectedCallback(){var e;super.connectedCallback(),this.updateGroups(),this.overflowActions(),(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0,subtree:!0}),this.overflowActionsDisabledHandler(this.overflowActionsDisabled),this.cancelable.add(this.resize)}willUpdate(e){e.has("expandDisabled")&&(this.hasUpdated||this.expandDisabled!==!1)&&this.overflowActions(),e.has("layout")&&(this.hasUpdated||this.layout!=="vertical")&&this.updateGroups(),e.has("overflowActionsDisabled")&&(this.hasUpdated||this.overflowActionsDisabled!==!1)&&this.overflowActionsDisabledHandler(this.overflowActionsDisabled),e.has("expanded")&&this.hasUpdated&&(this.expandedHandler(),this.expanded?this.calciteActionBarExpand.emit():this.calciteActionBarCollapse.emit())}loaded(){this.overflowActions()}disconnectedCallback(){var e,i;super.disconnectedCallback(),(e=this.mutationObserver)==null||e.disconnect(),(i=this.resizeObserver)==null||i.disconnect()}getItemSizes(){const{el:e,layout:i,expandToggleEl:r}=this,n=hW(e);r&&n.push(r);const s=i==="horizontal"?"clientWidth":"clientHeight",o=Math.max(...n.map(a=>a[s]||0));return n.map(a=>a[s]||o)}expandedHandler(){const{el:e,expanded:i}=this;yrt({el:e,expanded:i}),this.overflowActions()}overflowActionsDisabledHandler(e){var i,r;if(e){(i=this.resizeObserver)==null||i.disconnect();return}(r=this.resizeObserver)==null||r.observe(this.el),this.overflowActions()}actionMenuOpenHandler(e){var i;if(e.target.menuOpen){const r=e.composedPath();(i=this.actionGroups)==null||i.forEach(n=>{r.includes(n)||(n.menuOpen=!1)})}}mutationObserverHandler(){this.updateGroups(),this.overflowActions()}resizeHandlerEntries(e){e.forEach(this.resizeHandler)}updateGroups(){const e=Array.from(this.el.querySelectorAll("calcite-action-group"));this.actionGroups=e,e.forEach(i=>{i.layout=this.layout,i.scale=this.scale})}handleDefaultSlotChange(){this.updateGroups()}handleActionsEndSlotChange(e){this.hasActionsEnd=lr(e)}handleBottomActionsSlotChange(e){this.hasBottomActions=lr(e)}handleTooltipSlotChange(e){const i=Rc(e).filter(r=>r==null?void 0:r.matches("calcite-tooltip"));this.expandTooltip=i[0]}renderBottomActionGroup(){const{expanded:e,expandDisabled:i,el:r,position:n,toggleExpand:s,scale:o,layout:a,messages:l,actionsEndGroupLabel:c,overlayPositioning:d}=this,f=i?null:vrt({collapseLabel:l.collapseLabel,collapseText:l.collapse,el:r,expandLabel:l.expandLabel,expandText:l.expand,expanded:e,position:n,ref:y=>this.expandToggleEl=y,scale:o,toggle:s,tooltip:this.expandTooltip});return Se`<calcite-action-group class=${Te(jse.actionGroupEnd)} .hidden=${this.expandDisabled&&!(this.hasActionsEnd||this.hasBottomActions)} .label=${c} .layout=${a} .overlayPositioning=${d} .scale=${o}><slot name=${mV.actionsEnd} @slotchange=${this.handleActionsEndSlotChange}></slot><slot name=${mV.bottomActions} @slotchange=${this.handleBottomActionsSlotChange}></slot><slot name=${mV.expandTooltip} @slotchange=${this.handleTooltipSlotChange}></slot>${f}</calcite-action-group>`}render(){return Se`<div class=${Te(jse.container)}><slot @slotchange=${this.handleDefaultSlotChange}></slot>${this.renderBottomActionGroup()}</div>`}};lF.properties={expandTooltip:[16,{},{state:!0}],hasActionsEnd:[16,{},{state:!0}],hasBottomActions:[16,{},{state:!0}],actionsEndGroupLabel:1,floating:[7,{},{reflect:!0,type:Boolean}],expandDisabled:[7,{},{reflect:!0,type:Boolean}],expanded:[7,{},{reflect:!0,type:Boolean}],layout:[3,{},{reflect:!0}],messageOverrides:[0,{},{attribute:!1}],overflowActionsDisabled:[7,{},{reflect:!0,type:Boolean}],overlayPositioning:[3,{},{reflect:!0}],position:[3,{},{reflect:!0}],scale:[3,{},{reflect:!0}]},lF.styles=xrt;let O3=lF;rr("calcite-action-bar",O3);const s_e=Object.freeze(Object.defineProperty({__proto__:null,ActionBar:O3},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const o_e="calciteInternalLabelClick",uD="calciteInternalLabelConnected",F3="calciteInternalLabelDisconnected",Use="calcite-label",f$=new WeakMap,MC=new WeakMap,MM=new WeakMap,N3=new WeakMap,Ub=new Set,Srt=t=>{const{id:e}=t,i=e&&HN(t,{selector:`${Use}[for="${e}"]`});if(i)return i;const r=W$(t,Use);return!r||$rt(r,t)?null:r};function $rt(t,e){let i;const r="custom-element-ancestor-check",n=o=>{o.stopImmediatePropagation();const a=o.composedPath();i=a.slice(a.indexOf(e),a.indexOf(t))};return t.addEventListener(r,n,{once:!0}),e.dispatchEvent(new CustomEvent(r,{composed:!0,bubbles:!0})),t.removeEventListener(r,n),i.filter(o=>o!==e&&o!==t).filter(o=>{var a;return(a=o.tagName)==null?void 0:a.includes("-")}).length>0}function D2(t){if(!t)return;const e=Srt(t.el);if(MC.has(e)&&e===t.labelEl||!e&&Ub.has(t))return;const i=Ert.bind(t);if(e){t.labelEl=e;const r=f$.get(e)||[];r.push(t),f$.set(e,r.sort(a_e)),MC.has(t.labelEl)||(MC.set(t.labelEl,Bse),t.labelEl.addEventListener(o_e,Bse)),Ub.delete(t),document.removeEventListener(uD,MM.get(t)),N3.set(t,i),document.addEventListener(F3,i)}else Ub.has(t)||(i(),document.removeEventListener(F3,N3.get(t)))}function pW(t){if(!t||(Ub.delete(t),document.removeEventListener(uD,MM.get(t)),document.removeEventListener(F3,N3.get(t)),MM.delete(t),N3.delete(t),!t.labelEl))return;const e=f$.get(t.labelEl);e.length===1&&(t.labelEl.removeEventListener(o_e,MC.get(t.labelEl)),MC.delete(t.labelEl)),f$.set(t.labelEl,e.filter(i=>i!==t).sort(a_e)),t.labelEl=null}function a_e(t,e){return vZe(t.el,e.el)?-1:1}function fW(t){var e,i;return t.label||((i=(e=t.labelEl)==null?void 0:e.textContent)==null?void 0:i.trim())||""}function Bse(t){const e=t.detail.sourceEvent.target,i=f$.get(this),r=i.find(o=>o.el===e);if(i.includes(r))return;const s=i[0];s.disabled||s.onLabelClick(t)}function Trt(){Ub.has(this)&&D2(this)}function Ert(){Ub.add(this);const t=MM.get(this)||Trt.bind(this);MM.set(this,t),document.addEventListener(uD,t)}async function Irt(t){var r;if(await t.componentOnReady(),f$.has(t))return;const i=(r=t.ownerDocument)==null?void 0:r.getElementById(t.for);i&&requestAnimationFrame(()=>{for(const n of Ub)if(n.el===i){D2(n);break}})}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Crt={container:"container"},Mrt=Mi`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex}:host([alignment=start]){text-align:start}:host([alignment=end]){text-align:end}:host([alignment=center]){text-align:center}:host([scale=s]) .container{gap:.25rem;font-size:var(--calcite-font-size--2);line-height:1rem;margin-block-end:var(--calcite-label-margin-bottom, .5rem)}:host([scale=m]) .container{gap:.5rem;font-size:var(--calcite-font-size--1);line-height:1rem;margin-block-end:var(--calcite-label-margin-bottom, .75rem)}:host([scale=l]) .container{gap:.5rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;margin-block-end:var(--calcite-label-margin-bottom, 1rem)}:host .container{margin-inline:0px;margin-block-start:0px;inline-size:100%;line-height:1.375;color:var(--calcite-color-text-1);color:var(--calcite-label-text-color, var(--calcite-color-text-1))}:host([layout=block]) .container,:host([layout=default]) .container{display:flex;flex-direction:column}:host([layout=inline]) .container,:host([layout=inline-space-between]) .container{display:flex;flex-direction:row;align-items:center;gap:.5rem}:host([layout=inline][scale=l]) .container{gap:.75rem}:host([layout=inline-space-between]) .container{justify-content:space-between}:host([disabled])>.container{opacity:var(--calcite-opacity-disabled)}:host([disabled]) ::slotted(*[disabled]),:host([disabled]) ::slotted(*[disabled] *){--tw-bg-opacity: 1}:host([disabled]) ::slotted(calcite-input-message:not([active])){--tw-bg-opacity: 0}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host([hidden]){display:none}[hidden]{display:none}`,cF=class cF extends ir{constructor(){super(),this.alignment="start",this.layout="default",this.scale="m",this.calciteInternalLabelClick=ot({bubbles:!1,cancelable:!1}),this.listen("click",this.labelClickHandler)}connectedCallback(){super.connectedCallback(),document.dispatchEvent(new CustomEvent(uD))}willUpdate(e){e.has("for")&&Irt(this.el)}disconnectedCallback(){super.disconnectedCallback(),document.dispatchEvent(new CustomEvent(F3))}labelClickHandler(e){var i;((i=window.getSelection())==null?void 0:i.type)!=="Range"&&this.calciteInternalLabelClick.emit({sourceEvent:e})}render(){return Se`<div class=${Te(Crt.container)}><slot></slot></div>`}};cF.properties={alignment:[3,{},{reflect:!0}],for:[3,{},{reflect:!0}],layout:[3,{},{reflect:!0}],scale:[3,{},{reflect:!0}]},cF.styles=Mrt;let D3=cF;rr("calcite-label",D3);const ext=Object.freeze(Object.defineProperty({__proto__:null,Label:D3},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const krt=Mi`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{display:block}:host([hidden]){display:none}[hidden]{display:none}`,uF=class uF extends ir{constructor(){super(...arguments),this.mutationObserver=ts("mutation",()=>{this.ensureTextContentDependentProps(),this.calciteInternalOptionChange.emit()}),this.disabled=!1,this.calciteInternalOptionChange=ot({cancelable:!1})}connectedCallback(){var e;super.connectedCallback(),this.ensureTextContentDependentProps(),(e=this.mutationObserver)==null||e.observe(this.el,{attributeFilter:["label","value"],characterData:!0,childList:!0,subtree:!0})}willUpdate(e){e.has("disabled")&&(this.hasUpdated||this.disabled!==!1)&&this.handlePropChange(this.disabled,e.get("disabled"),"disabled"),e.has("label")&&this.handlePropChange(this.label,e.get("label"),"label"),e.has("selected")&&this.handlePropChange(this.selected,e.get("selected"),"selected"),e.has("value")&&this.handlePropChange(this.value,e.get("value"),"value")}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this.mutationObserver)==null||e.disconnect()}handlePropChange(e,i,r){(r==="label"||r==="value")&&this.ensureTextContentDependentProps(),this.calciteInternalOptionChange.emit()}ensureTextContentDependentProps(){const{el:{textContent:e},internallySetLabel:i,internallySetValue:r,label:n,value:s}=this;(!n||n===i)&&(this.label=e,this.internallySetLabel=e),(s==null||s===r)&&(this.value=e,this.internallySetValue=e)}render(){return Se`<slot>${this.label}</slot>`}};uF.properties={disabled:[7,{},{reflect:!0,type:Boolean}],label:1,selected:[7,{},{reflect:!0,type:Boolean}],value:1},uF.styles=krt;let U9=uF;rr("calcite-option",U9);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Gse={valid:"check-circle",invalid:"exclamation-mark-triangle",idle:"information"},Prt=Mi`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{box-sizing:border-box;display:flex;block-size:auto;inline-size:100%;align-items:center;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-1);opacity:1;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;margin-block-start:var(--calcite-input-message-spacing, var(--calcite-input-message-spacing-value, var(--calcite-spacing-xxs)))}.calcite-input-message-icon{pointer-events:none;display:inline-flex;flex-shrink:0;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;margin-inline-end:var(--calcite-spacing-sm)}:host([status=invalid]) .calcite-input-message-icon{color:var(--calcite-input-message-icon-color, var(--calcite-icon-color, var(--calcite-color-status-danger)))}:host([status=valid]) .calcite-input-message-icon{color:var(--calcite-input-message-icon-color, var(--calcite-icon-color, var(--calcite-color-status-success)))}:host([status=idle]) .calcite-input-message-icon{color:var(--calcite-input-message-icon-color, var(--calcite-icon-color, var(--calcite-color-brand)))}:host([scale=s]){font-size:var(--calcite-font-size--3);line-height:.75rem}:host([scale=m]){font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=l]){font-size:var(--calcite-font-size--1);line-height:1rem}:host([hidden]){display:none}[hidden]{display:none}`,Art={inputMessageIcon:"calcite-input-message-icon"},dF=class dF extends ir{constructor(){super(...arguments),this.iconFlipRtl=!1,this.scale="m",this.status="idle"}connectedCallback(){super.connectedCallback(),this.requestedIcon=Fre(Gse,this.icon,this.status)}willUpdate(e){(e.has("status")&&(this.hasUpdated||this.status!=="idle")||e.has("icon"))&&(this.requestedIcon=Fre(Gse,this.icon,this.status))}render(){const e=this.el.hidden;return Hu(this.el,"calcite-hydrated-hidden",e),Se`${this.renderIcon(this.requestedIcon)}<slot></slot>`}renderIcon(e){if(e)return Se`<calcite-icon class=${Te(Art.inputMessageIcon)} .flipRtl=${this.iconFlipRtl} .icon=${e} scale=s></calcite-icon>`}};dF.properties={icon:[3,{converter:RF},{reflect:!0}],iconFlipRtl:[7,{},{reflect:!0,type:Boolean}],scale:[3,{},{reflect:!0}],status:[3,{},{reflect:!0}]},dF.styles=Prt;let z3=dF;rr("calcite-input-message",z3);const txt=Object.freeze(Object.defineProperty({__proto__:null,InputMessage:z3},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const ry={alignmentCenter:"internal-label-alignment--center",alignmentEnd:"internal-label-alignment--end",container:"internal-label--container",requiredIndicator:"internal-label-required--indicator",spacingBottom:"internal-label-spacing--bottom",spacingInlineEnd:"internal-label-spacing-inline--end",spacingInlineStart:"internal-label-spacing-inline--start",text:"internal-label--text"},l_e=({alignmentCenter:t,bottomSpacingDisabled:e,labelText:i,onClick:r,required:n,spacingInlineEnd:s,spacingInlineStart:o,tooltipText:a})=>Se`<div class=${Te({[ry.alignmentCenter]:t,[ry.alignmentEnd]:!t,[ry.container]:!0,[ry.spacingBottom]:!e,[ry.spacingInlineEnd]:s,[ry.spacingInlineStart]:o})} @click=${r}><div class=${Te(ry.text)}>${i}${n&&Se`<span aria-hidden=true class=${Te(ry.requiredIndicator)} title=${a??ct}>*</span>`||""}</div><slot name=label-content></slot></div>`;/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Lrt={validationContainer:"validation-container"},Rrt=()=>{},c_e=({scale:t,status:e,id:i,icon:r,message:n,ref:s})=>Se`<div class=${Te(Lrt.validationContainer)} ${Ri(s||Rrt)}><calcite-input-message aria-live=polite .icon=${r} id=${i??ct} .scale=${t} .status=${e}>${n}</calcite-input-message></div>`;/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Ort=Mi`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{--calcite-icon-size: 1rem;--calcite-spacing-eighth: .125rem;--calcite-spacing-quarter: .25rem;--calcite-spacing-half: .5rem;--calcite-spacing-three-quarters: .75rem;--calcite-spacing: 1rem;--calcite-spacing-plus-quarter: 1.25rem;--calcite-spacing-plus-half: 1.5rem;--calcite-spacing-double: 2rem;--calcite-menu-min-width: 10rem;--calcite-header-min-height: 3rem;--calcite-footer-min-height: 3rem}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex;flex-direction:column;font-size:var(--calcite-select-font-size);font-weight:var(--calcite-internal-select-font-weight, var(--calcite-font-weight-regular))}.wrapper{position:relative;display:flex;align-items:stretch;inline-size:var(--select-width);block-size:var(--calcite-internal-select-block-size, 32px)}.wrapper:focus-within .icon,.wrapper:active .icon,.wrapper:hover .icon{color:var(--calcite-select-icon-color-hover, var(--calcite-color-text-1))}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host([scale=s]){--calcite-internal-select-font-size: var(--calcite-font-size--2);--calcite-select-spacing-inline: .5rem 2rem;--calcite-internal-select-icon-container-padding-inline: var(--calcite-spacing-sm);--calcite-internal-select-block-size: 24px}:host([scale=m]){--calcite-internal-select-font-size: var(--calcite-font-size--1);--calcite-select-spacing-inline: .75rem 2.5rem;--calcite-internal-select-icon-container-padding-inline: var(--calcite-spacing-md)}:host([scale=l]){--calcite-internal-select-font-size: var(--calcite-font-size-0);--calcite-select-spacing-inline: 1rem 3rem;--calcite-internal-select-icon-container-padding-inline: var(--calcite-spacing-lg);--calcite-internal-select-block-size: 44px}:host([width=auto]){inline-size:auto}:host([width=half]){inline-size:50%}:host([width=full]){inline-size:100%}.select{margin:0;box-sizing:border-box;inline-size:100%;cursor:pointer;appearance:none;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;border-style:solid;font-family:inherit;outline-color:transparent;font-weight:inherit;font-size:var(--calcite-select-font-size, var(--calcite-internal-select-font-size));color:var(--calcite-select-text-color, var(--calcite-color-text-2));border-color:var(--calcite-select-border-color, var(--calcite-color-border-input));border-width:var(--calcite-select-internal-border-width, var(--calcite-border-width-sm));padding-inline:var(--calcite-select-spacing-inline);padding-block:var(--calcite-internal-select-spacing-block);border-inline-end-width:0;line-height:var(--calcite-internal-select-line-height, normal);background-color:var(--calcite-select-background-color, var(--calcite-color-foreground-1));border-radius:var(--calcite-select-corner-radius, var(--calcite-corner-radius-none));box-shadow:var(--calcite-select-shadow, var(--calcite-shadow-small))}.select:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}select:disabled{border-color:var(--calcite-color-border-input);--tw-bg-opacity: 1}.icon-container{pointer-events:none;position:absolute;inset-block:0px;display:flex;align-items:center;border-width:0px;border-style:solid;border-color:var(--calcite-color-border-input);background-color:transparent;color:var(--calcite-color-text-2);inset-inline-end:0px;border-start-start-radius:var(--calcite-select-corner-radius, var(--calcite-corner-radius-none));border-start-end-radius:var(--calcite-select-corner-radius, var(--calcite-corner-radius-none));border-end-start-radius:var(--calcite-select-corner-radius, var(--calcite-corner-radius-none));border-end-end-radius:var(--calcite-select-corner-radius, var(--calcite-corner-radius-none));border-color:var(--calcite-select-border-color, var(--calcite-color-border-input));border-inline-width:0 var(--calcite-select-internal-icon-border-inline-end-width, var(--calcite-border-width-sm));padding-inline:var(--calcite-internal-select-icon-container-padding-inline)}.icon-container .icon{color:var(--calcite-select-icon-color, var(--calcite-color-text-3))}:host([status=invalid]) select,:host([status=invalid]) .icon-container{border-color:var(--calcite-color-status-danger)}:host([status=invalid]) select:focus,:host([status=invalid]) .icon-container:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-status-danger);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.select:focus~.icon-container{border-color:transparent}.internal-label-alignment--center{align-items:center}.internal-label-alignment--end{align-items:end}.internal-label--container{display:flex;justify-content:space-between;color:var(--calcite-color-text-1)}.internal-label-required--indicator{font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-status-danger);padding-inline:var(--calcite-spacing-base)}.internal-label-required--indicator:hover{cursor:help}.internal-label--text{line-height:1}:host([scale=s]) .internal-label-spacing--bottom{margin-block-end:var(--calcite-spacing-xxs)}:host([scale=s]) .internal-label-spacing-inline--end{margin-inline-end:var(--calcite-spacing-sm)}:host([scale=s]) .internal-label-spacing-inline--start{margin-inline-start:var(--calcite-spacing-sm)}:host([scale=s]) .internal-label--text{font-size:var(--calcite-font-size--2)}:host([scale=m]) .internal-label-spacing--bottom{margin-block-end:var(--calcite-spacing-sm)}:host([scale=m]) .internal-label-spacing-inline--end{margin-inline-end:var(--calcite-spacing-sm)}:host([scale=m]) .internal-label-spacing-inline--start{margin-inline-start:var(--calcite-spacing-sm)}:host([scale=m]) .internal-label--text{font-size:var(--calcite-font-size--1)}:host([scale=l]) .internal-label-spacing--bottom{margin-block-end:var(--calcite-spacing-sm)}:host([scale=l]) .internal-label-spacing-inline--end{margin-inline-end:var(--calcite-spacing-md)}:host([scale=l]) .internal-label-spacing-inline--start{margin-inline-start:var(--calcite-spacing-md)}:host([scale=l]) .internal-label--text{font-size:var(--calcite-font-size-0)}.validation-container{display:flex;flex-direction:column;align-items:flex-start;align-self:stretch}:host([scale=m]) .validation-container,:host([scale=l]) .validation-container{padding-block-start:.5rem}:host([scale=s]) .validation-container{padding-block-start:.25rem}::slotted(input[slot=hidden-form-input]){margin:0!important;opacity:0!important;outline:none!important;padding:0!important;position:absolute!important;inset:0!important;transform:none!important;-webkit-appearance:none!important;z-index:-1!important}:host([hidden]){display:none}[hidden]{display:none}`,fA={icon:"icon",iconContainer:"icon-container",select:"select",wrapper:"wrapper"},qse={validationMessage:"selectValidationMessage"};function mA(t){return t.tagName==="CALCITE-OPTION"}function Frt(t){return t.tagName==="CALCITE-OPTION-GROUP"}const hF=class hF extends ir{constructor(){super(),this.componentToNativeEl=new Map,this.mutationObserver=ts("mutation",()=>this.populateInternalSelect()),this.messages=Po(),this.focusSetter=Ka()(this),this.disabled=!1,this.required=!1,this.scale="m",this.status="idle",this.validity={valid:!1,badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valueMissing:!1},this.value=null,this.width="auto",this.calciteSelectChange=ot({cancelable:!1}),this.listen("calciteInternalOptionChange",this.handleOptionOrGroupChange),this.listen("calciteInternalOptionGroupChange",this.handleOptionOrGroupChange)}async setFocus(e){return this.focusSetter(()=>this.selectEl,e)}connectedCallback(){var e;super.connectedCallback(),(e=this.mutationObserver)==null||e.observe(this.el,{subtree:!0,childList:!0}),D2(this),Iwe(this)}willUpdate(e){var i;e.has("value")&&(this.hasUpdated||this.value!==null)&&this.updateItemsFromValue(this.value),e.has("selectedOption")&&(this.value=(i=this.selectedOption)==null?void 0:i.value)}updated(){cd(this)}loaded(){var i,r;typeof this.value=="string"&&this.updateItemsFromValue(this.value),this.populateInternalSelect();const e=(i=this.selectEl)==null?void 0:i.selectedOptions[0];this.selectFromNativeOption(e),Mwe(this,((r=this.selectedOption)==null?void 0:r.value)??"")}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this.mutationObserver)==null||e.disconnect(),pW(this),Cwe(this)}handleInternalSelectChange(){const e=this.selectEl.selectedOptions[0];this.selectFromNativeOption(e),requestAnimationFrame(()=>this.emitChangeEvent())}handleOptionOrGroupChange(e){e.stopPropagation();const i=e.target,r=this.componentToNativeEl.get(i);r&&(this.updateNativeElement(i,r),mA(i)&&i.selected&&(this.deselectAllExcept(i),this.selectedOption=i))}onLabelClick(){this.setFocus()}updateItemsFromValue(e){this.el.querySelectorAll("calcite-option").forEach(i=>i.selected=i.value===e)}updateNativeElement(e,i){if(i.disabled=e.disabled,i.label=e.label,mA(e)){const r=i;r.selected=e.selected,r.value=e.value,r.innerText=e.label}}populateInternalSelect(){const e=Array.from(this.el.children).filter(i=>i.tagName==="CALCITE-OPTION"||i.tagName==="CALCITE-OPTION-GROUP");this.clearInternalSelect(),e.forEach(i=>{var r;return(r=this.selectEl)==null?void 0:r.append(this.toNativeElement(i))})}clearInternalSelect(){this.componentToNativeEl.forEach(e=>e.remove()),this.componentToNativeEl.clear()}storeSelectRef(e){e&&(this.selectEl=e)}selectFromNativeOption(e){if(!e)return;let i;this.componentToNativeEl.forEach((r,n)=>{mA(n)&&r===e&&(n.selected=!0,i=n,this.deselectAllExcept(n))}),i&&(this.selectedOption=i)}toNativeElement(e){if(mA(e)){const i=document.createElement("option");return this.updateNativeElement(e,i),this.componentToNativeEl.set(e,i),i}if(Frt(e)){const i=document.createElement("optgroup");return this.updateNativeElement(e,i),Array.from(e.children).forEach(r=>{const n=this.toNativeElement(r);i.append(n),this.componentToNativeEl.set(e,n)}),this.componentToNativeEl.set(e,i),i}throw new Error("unsupported element child provided")}deselectAllExcept(e){this.el.querySelectorAll("calcite-option").forEach(i=>{i!==e&&(i.selected=!1)})}emitChangeEvent(){this.calciteSelectChange.emit()}renderChevron(){return Se`<div class=${Te(fA.iconContainer)}><calcite-icon class=${Te(fA.icon)} icon=chevron-down .scale=${ua(this.scale)}></calcite-icon></div>`}render(){const{disabled:e}=this;return ud({disabled:e,children:Se`${this.labelText&&l_e({labelText:this.labelText,onClick:this.onLabelClick,required:this.required,tooltipText:this.messages.required})||""}<div class=${Te(fA.wrapper)}><select aria-errormessage=${qse.validationMessage} .ariaInvalid=${this.status==="invalid"} .ariaLabel=${fW(this)} class=${Te(fA.select)} .disabled=${e} @change=${this.handleInternalSelectChange} .required=${this.required} ${Ri(this.storeSelectRef)}><slot></slot></select>${this.renderChevron()}${Pwe({component:this})}</div>${this.validationMessage&&this.status==="invalid"?c_e({icon:this.validationIcon,id:qse.validationMessage,message:this.validationMessage,scale:this.scale,status:this.status}):null}`})}};hF.properties={disabled:[7,{},{reflect:!0,type:Boolean}],form:[3,{},{reflect:!0}],label:1,labelText:1,name:[3,{},{reflect:!0}],required:[7,{},{reflect:!0,type:Boolean}],scale:[3,{},{reflect:!0}],selectedOption:[0,{},{attribute:!1}],status:[3,{},{reflect:!0}],validationIcon:[3,{converter:RF},{reflect:!0}],validationMessage:1,validity:[0,{},{attribute:!1}],value:1,width:[3,{},{reflect:!0}],messageOverrides:[0,{},{attribute:!1}]},hF.styles=Ort;let B9=hF;rr("calcite-select",B9);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Hse={scrim:"scrim",content:"content"},Wse={s:72,l:480},Nrt=Mi`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{position:absolute;inset:0;z-index:var(--calcite-z-index-overlay);display:flex;block-size:100%;inline-size:100%;flex-direction:column;align-items:stretch}@keyframes calcite-scrim-fade-in{0%{--tw-bg-opacity: 0}to{--tw-text-opacity: 1}}.scrim{position:absolute;inset:0;display:flex;flex-direction:column;align-content:center;align-items:center;justify-content:center;overflow:hidden;animation:calcite-scrim-fade-in var(--calcite-internal-animation-timing-medium) ease-in-out;background-color:var(--calcite-scrim-background, var(--calcite-color-transparent-scrim))}.content{padding:1rem}:host([hidden]){display:none}[hidden]{display:none}`,pF=class pF extends ir{constructor(){super(...arguments),this.loaderRef=Fc(),this.resizeObserver=ts("resize",()=>this.handleResize()),this.messages=Po(),this.hasContent=!1,this.loading=!1}connectedCallback(){var e;super.connectedCallback(),(e=this.resizeObserver)==null||e.observe(this.el)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this.resizeObserver)==null||e.disconnect()}handleDefaultSlotChange(e){this.hasContent=hZe(e)}getScale(e){return e<Wse.s?"s":e>=Wse.l?"l":"m"}handleResize(){const{el:e}=this;this.loaderScale=this.getScale(Math.min(e.clientHeight,e.clientWidth)??0)}render(){const{hasContent:e,loading:i,loaderScale:r,messages:n}=this;return Se`<div class=${Te(Hse.scrim)}>${i&&r?Se`<calcite-loader .label=${n.loading} .scale=${r} ${Ri(this.loaderRef)}></calcite-loader>`:null}<div class=${Te(Hse.content)} .hidden=${!e}><slot @slotchange=${this.handleDefaultSlotChange}></slot></div></div>`}};pF.properties={hasContent:[16,{},{state:!0}],loaderScale:[16,{},{state:!0}],loading:[7,{},{reflect:!0,type:Boolean}],messageOverrides:[0,{},{attribute:!1}]},pF.styles=Nrt;let G9=pF;rr("calcite-scrim",G9);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const gr={actionBarContainer:"action-bar-container",container:"container",contentBottom:"content-bottom",contentTop:"content-top",header:"header",headerContainer:"header-container",headerContainerBorderEnd:"header-container--border-end",headingTextContent:"heading-text-content",heading:"heading",description:"description",headerContent:"header-content",headerActions:"header-actions",headerActionsEnd:"header-actions--end",headerActionsStart:"header-actions--start",icon:"icon",contentWrapper:"content-wrapper",fabContainer:"fab-container",footer:"footer",footerContent:"footer-content",footerActions:"footer-actions",footerStart:"footer-start",footerEnd:"footer-end",headerSlottedContent:"header--slotted-content",headerNonSlottedContent:"header--non-slotted-content",menuAction:"menu-action"},Zse={close:"close",collapse:"collapse"},yA={close:"x",menu:"ellipsis",expand:"chevron-down",collapse:"chevron-up"},cl={actionBar:"action-bar",alerts:"alerts",contentBottom:"content-bottom",contentTop:"content-top",headerActionsStart:"header-actions-start",headerActionsEnd:"header-actions-end",headerMenuActions:"header-menu-actions",headerContent:"header-content",fab:"fab",footer:"footer",footerEnd:"footer-end",footerStart:"footer-start",footerActions:"footer-actions"};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Drt=Mi`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{position:relative;box-sizing:border-box;display:flex;block-size:100%;inline-size:100%;flex:1 1 auto;overflow:hidden;--calcite-min-header-height: calc(var(--calcite-icon-size) * 3);border-radius:var(--calcite-panel-corner-radius, var(--calcite-corner-radius-sharp))}slot[name=alerts]::slotted(calcite-alert){block-size:0}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}.header{margin:0;display:flex;align-content:space-between;align-items:center;fill:var(--calcite-color-text-2);color:var(--calcite-color-text-2)}.heading{margin:0;padding:0;font-weight:var(--calcite-font-weight-medium)}.header .heading{flex:1 1 auto;padding:.5rem}:host([scale=s]){--calcite-internal-panel-default-space: var(--calcite-spacing-sm);--calcite-internal-panel-header-vertical-padding: var(--calcite-spacing-sm-plus)}:host([scale=s]) .header-content .heading{font-size:var(--calcite-font-size--1)}:host([scale=s]) .header-content .description{font-size:var(--calcite-font-size--2)}:host([scale=s]) .header-content .icon{margin-inline-end:var(--calcite-spacing-sm)}:host([scale=m]){--calcite-internal-panel-default-space: var(--calcite-spacing-md);--calcite-internal-panel-header-vertical-padding: var(--calcite-spacing-md-plus)}:host([scale=m]) .header-content .heading{font-size:var(--calcite-font-size-0)}:host([scale=m]) .header-content .description{font-size:var(--calcite-font-size--1)}:host([scale=m]) .header-content .icon{margin-inline-end:var(--calcite-spacing-md)}:host([scale=l]){--calcite-internal-panel-default-space: var(--calcite-spacing-lg);--calcite-internal-panel-header-vertical-padding: var(--calcite-spacing-xl)}:host([scale=l]) .header-content .heading{font-size:var(--calcite-font-size-1)}:host([scale=l]) .header-content .description{font-size:var(--calcite-font-size-0)}:host([scale=l]) .header-content .icon{margin-inline-end:var(--calcite-spacing-lg)}.content-top,.content-bottom{display:flex;align-items:flex-start;align-self:stretch;padding:var(--calcite-internal-panel-default-space);border-block-start:1px solid var(--calcite-panel-border-color, var(--calcite-color-border-3));background-color:var(--calcite-panel-background-color, var(--calcite-color-foreground-1))}.container{position:relative;margin:0;display:flex;inline-size:100%;flex:1 1 auto;flex-direction:column;align-items:stretch;overflow:hidden;background-color:var(--calcite-color-background);padding:0;color:var(--calcite-color-text-2);transition:max-block-size var(--calcite-animation-timing),inline-size var(--calcite-animation-timing);box-sizing:border-box;font-size:var(--calcite-font-size--1)}.container *{box-sizing:border-box}.header{z-index:var(--calcite-z-index-header);display:flex;flex-direction:column;background-color:var(--calcite-panel-header-background-color, var(--calcite-color-foreground-1));border-block-end:1px solid var(--calcite-panel-border-color, var(--calcite-panel-header-border-block-end, var(--calcite-color-border-3)))}.header-container{display:flex;inline-size:100%;flex-direction:row;align-items:stretch;justify-content:flex-start;flex:0 0 auto}.header-container--border-end{border-block-end:1px solid var(--calcite-panel-border-color, var(--calcite-color-border-3))}.action-bar-container{inline-size:100%}.action-bar-container ::slotted(calcite-action-bar){inline-size:100%}.header-content{display:flex;flex-direction:column;overflow:hidden;padding-inline:.75rem;padding-block:.875rem;margin-inline-end:auto;justify-content:center}.header-content .heading-text-content{flex:1 1 auto;overflow:hidden}.header-content .heading,.header-content .description{display:block;flex:none;overflow-wrap:break-word;padding:0;line-height:var(--calcite-font-line-height-relative-snug)}.header-content .heading{font-weight:var(--calcite-font-weight-medium);color:var(--calcite-panel-heading-text-color, var(--calcite-color-text-1))}.header-content .heading:only-child{margin-block-end:0px}.header-content .description{color:var(--calcite-panel-description-text-color, var(--calcite-color-text-2))}#close,#collapse,.back-button,calcite-action-menu{--calcite-action-background-color: var(--calcite-panel-header-action-background-color);--calcite-action-background-color-hover: var(--calcite-panel-header-action-background-color-hover);--calcite-action-background-color-press: var(--calcite-panel-header-action-background-color-press);--calcite-action-text-color: var(--calcite-panel-header-action-text-color);--calcite-action-text-color-press: var(--calcite-panel-header-action-text-color-press)}.back-button{border-width:0px;border-style:solid;border-inline-end-width:1px;border-color:var(--calcite-panel-border-color, var(--calcite-color-border-3))}.header-actions{display:flex;flex-direction:row;flex-wrap:nowrap;align-items:stretch}.header-actions--end{margin-inline-start:auto}.content-wrapper{position:relative;display:flex;block-size:100%;flex:1 1 auto;flex-direction:column;flex-wrap:nowrap;align-items:stretch;overflow:auto;color:var(--calcite-color-text-2);outline-color:transparent;padding:var(--calcite-panel-space, var(--calcite-panel-content-space, 0));background:var(--calcite-panel-background-color, var(--calcite-color-background))}.content-wrapper:focus-visible{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.header-content{flex:1 1 auto;justify-content:center;padding-block:var(--calcite-internal-panel-header-vertical-padding);padding-inline:var(--calcite-internal-panel-default-space)}.header-content.header--slotted-content{padding:var(--calcite-panel-header-content-space, var(--calcite-internal-panel-header-vertical-padding) var(--calcite-internal-panel-default-space))}.header-content.header--non-slotted-content{align-items:center;flex-direction:row}.footer{margin-block-start:auto;display:flex;flex-direction:row;align-content:space-between;align-items:center;justify-content:center;font-size:var(--calcite-font-size--2);line-height:1.375;border-block-start:1px solid var(--calcite-panel-border-color, var(--calcite-color-border-3));padding:var(--calcite-panel-footer-space, var(--calcite-panel-footer-padding, var(--calcite-internal-panel-default-space)));background-color:var(--calcite-panel-footer-background-color, var(--calcite-color-foreground-1))}.footer-content{display:flex;flex:1 1 0%;flex-direction:row;align-items:center;justify-content:center}.footer-actions{display:flex;flex:1 1 0%;flex-direction:row;align-items:center;justify-content:space-evenly;gap:var(--calcite-internal-panel-default-space)}.footer-start{display:flex;flex:1 1 0%;flex-direction:row;align-items:center;justify-content:flex-start;margin-inline-end:auto;gap:var(--calcite-internal-panel-default-space)}.footer-end{display:flex;flex:1 1 0%;flex-direction:row;align-items:center;justify-content:flex-end;margin-inline-start:auto;gap:var(--calcite-internal-panel-default-space)}.fab-container{position:sticky;inset-block-end:0px;z-index:var(--calcite-z-index-sticky);margin-block:0px;margin-inline:auto;display:block;padding:.5rem;inset-inline:0;inline-size:fit-content}calcite-icon{--calcite-icon-color: var(--calcite-panel-icon-color, var(--calcite-color-text-1))}:host([hidden]){display:none}[hidden]{display:none}`,fF=class fF extends ir{constructor(){super(),this.containerRef=Fc(),this.resizeObserver=ts("resize",()=>this.resizeHandler()),this.messages=Po(),this._closed=!1,this.focusSetter=Ka()(this),this.hasActionBar=!1,this.hasContentBottom=!1,this.hasContentTop=!1,this.hasEndActions=!1,this.hasFab=!1,this.hasFooterActions=!1,this.hasFooterContent=!1,this.hasFooterEndContent=!1,this.hasFooterStartContent=!1,this.hasHeaderContent=!1,this.hasMenuItems=!1,this.hasStartActions=!1,this.showHeaderContent=!1,this.closable=!1,this.collapseDirection="down",this.collapsed=!1,this.collapsible=!1,this.disabled=!1,this.iconFlipRtl=!1,this.loading=!1,this.menuOpen=!1,this.menuPlacement=Wwe,this.overlayPositioning="absolute",this.scale="m",this.calcitePanelClose=ot({cancelable:!0}),this.calcitePanelCollapse=ot({cancelable:!1}),this.calcitePanelExpand=ot({cancelable:!1}),this.calcitePanelScroll=ot({cancelable:!1}),this.calcitePanelToggle=ot({cancelable:!1}),this.listen("keydown",this.panelKeyDownHandler),this.listen("calcitePanelClose",this.panelCloseHandler)}get closed(){return this._closed}set closed(e){const i=this._closed;e!==i&&this.setClosedState(e)}async scrollContentTo(e){var i;(i=this.panelScrollEl)==null||i.scrollTo(e)}async setFocus(e){return this.focusSetter(()=>this.containerRef.value,e)}willUpdate(e){e.has("collapsed")&&this.hasUpdated&&(this.collapsed?this.calcitePanelCollapse.emit():this.calcitePanelExpand.emit())}updated(){cd(this)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this.resizeObserver)==null||e.disconnect()}async setClosedState(e){var i;if(this.beforeClose&&e)try{await((i=this.beforeClose)==null?void 0:i.call(this))}catch{return}this._closed=e}resizeHandler(){const{panelScrollEl:e}=this;if(!e||typeof e.scrollHeight!="number"||typeof e.offsetHeight!="number")return;e.scrollHeight>e.offsetHeight?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}closeClickHandler(){this.emitCloseEvent()}emitCloseEvent(){this.calcitePanelClose.emit()}panelKeyDownHandler(e){this.closable&&e.key==="Escape"&&!e.defaultPrevented&&(this.emitCloseEvent(),e.preventDefault())}panelCloseHandler(e){e.defaultPrevented||e.target!==this.el||(this.closed=!0)}collapse(){this.collapsed=!this.collapsed,this.calcitePanelToggle.emit()}panelScrollHandler(){this.calcitePanelScroll.emit()}handleHeaderActionsStartSlotChange(e){this.hasStartActions=lr(e)}handleHeaderActionsEndSlotChange(e){this.hasEndActions=lr(e)}handleHeaderMenuActionsSlotChange(e){this.hasMenuItems=lr(e)}handleActionBarSlotChange(e){const i=Rc(e).filter(r=>r==null?void 0:r.matches("calcite-action-bar"));i.forEach(r=>r.layout="horizontal"),this.hasActionBar=!!i.length}handleHeaderContentSlotChange(e){this.hasHeaderContent=lr(e)}handleFabSlotChange(e){this.hasFab=lr(e)}handleFooterActionsSlotChange(e){this.hasFooterActions=lr(e)}handleFooterEndSlotChange(e){this.hasFooterEndContent=lr(e)}handleFooterStartSlotChange(e){this.hasFooterStartContent=lr(e)}handleFooterSlotChange(e){this.hasFooterContent=lr(e)}contentBottomSlotChangeHandler(e){this.hasContentBottom=lr(e)}contentTopSlotChangeHandler(e){this.hasContentTop=lr(e)}setPanelScrollEl(e){$M(this.resizeObserver,this.panelScrollEl,e),this.panelScrollEl=e}handleAlertsSlotChange(e){var i;(i=Rc(e))==null||i.map(r=>{r.nodeName==="CALCITE-ALERT"&&(r.embedded=!0)})}renderHeaderContent(){const{heading:e,headingLevel:i,description:r,hasHeaderContent:n,icon:s,scale:o}=this,a=s?Se`<calcite-icon class=${Te(gr.icon)} .flipRtl=${this.iconFlipRtl} .icon=${s} .scale=${ua(o)}></calcite-icon>`:null,l=e?uW({class:gr.heading,level:i,children:e}):null,c=r?Se`<span class=${Te(gr.description)}>${r}</span>`:null;return!n&&(l||c)?ri("header-content",Se`<div class=${Te({[gr.headerContent]:!0,[gr.headerNonSlottedContent]:!0})}>${a}<div class=${Te(gr.headingTextContent)}>${l}${c}</div></div>`):null}renderActionBar(){return Se`<div class=${Te(gr.actionBarContainer)} .hidden=${!this.hasActionBar}><slot name=${cl.actionBar} @slotchange=${this.handleActionBarSlotChange}></slot></div>`}renderHeaderSlottedContent(){return ri("slotted-header-content",Se`<div class=${Te({[gr.headerContent]:!0,[gr.headerSlottedContent]:!0})} .hidden=${!this.hasHeaderContent}><slot name=${cl.headerContent} @slotchange=${this.handleHeaderContentSlotChange}></slot></div>`)}renderHeaderStartActions(){const{hasStartActions:e}=this;return ri("header-actions-start",Se`<div class=${Te({[gr.headerActionsStart]:!0,[gr.headerActions]:!0})} .hidden=${!e}><slot name=${cl.headerActionsStart} @slotchange=${this.handleHeaderActionsStartSlotChange}></slot></div>`)}renderHeaderActionsEnd(){const{hasEndActions:e,messages:i,closable:r,collapsed:n,collapseDirection:s,collapsible:o,hasMenuItems:a}=this,{collapse:l,expand:c,close:d}=i,f=[yA.expand,yA.collapse];s==="up"&&f.reverse();const y=o?Se`<calcite-action .aria=${{expanded:!n}} .icon=${n?f[0]:f[1]} id=${Zse.collapse} .label=${l} @click=${this.collapse} .scale=${this.scale} .text=${l} title=${(n?c:l)??ct}></calcite-action>`:null,g=r?Se`<calcite-action .ariaLabel=${d} .icon=${yA.close} id=${Zse.close} @click=${this.closeClickHandler} .scale=${this.scale} .text=${d} title=${d??ct}></calcite-action>`:null,b=Se`<slot name=${cl.headerActionsEnd} @slotchange=${this.handleHeaderActionsEndSlotChange}></slot>`,_=e||y||g||a;return ri("header-actions-end",Se`<div class=${Te({[gr.headerActionsEnd]:!0,[gr.headerActions]:!0})} .hidden=${!_}>${b}${this.renderMenu()}${y}${g}</div>`)}renderMenu(){const{hasMenuItems:e,messages:i,menuOpen:r,menuFlipPlacements:n,menuPlacement:s}=this;return ri("menu",Se`<calcite-action-menu .flipPlacements=${n??["top","bottom"]} .hidden=${!e} .label=${i.options} .open=${r} .overlayPositioning=${this.overlayPositioning} .placement=${s}><calcite-action class=${Te(gr.menuAction)} .icon=${yA.menu} .scale=${this.scale} slot=${p$.trigger} .text=${i.options}></calcite-action><slot name=${cl.headerMenuActions} @slotchange=${this.handleHeaderMenuActionsSlotChange}></slot></calcite-action-menu>`)}renderHeaderNode(){const{hasHeaderContent:e,hasStartActions:i,hasEndActions:r,closable:n,collapsible:s,hasMenuItems:o,hasActionBar:a,hasContentTop:l}=this,c=this.renderHeaderContent(),d=e||!!c||i||r||s||n||o||a||l;return this.showHeaderContent=d,Se`<header class=${Te(gr.header)} .hidden=${!(d||a||l)}><div class=${Te({[gr.headerContainer]:!0,[gr.headerContainerBorderEnd]:a})} .hidden=${!d}>${this.renderHeaderStartActions()}${this.renderHeaderSlottedContent()}${c}${this.renderHeaderActionsEnd()}</div>${this.renderActionBar()}${this.renderContentTop()}</header>`}renderFooterNode(){const{hasFooterEndContent:e,hasFooterStartContent:i,hasFooterContent:r,hasFooterActions:n}=this,s=i||e||r||n;return Se`<footer class=${Te(gr.footer)} .hidden=${!s}><div class=${Te(gr.footerContent)} .hidden=${!r}><slot name=${cl.footer} @slotchange=${this.handleFooterSlotChange}></slot></div><div class=${Te(gr.footerStart)} .hidden=${r||!i}><slot name=${cl.footerStart} @slotchange=${this.handleFooterStartSlotChange}></slot></div><div class=${Te(gr.footerEnd)} .hidden=${r||!e}><slot name=${cl.footerEnd} @slotchange=${this.handleFooterEndSlotChange}></slot></div><div class=${Te(gr.footerActions)} .hidden=${r||!n}>${ri("footer-actions-slot",Se`<slot name=${cl.footerActions} @slotchange=${this.handleFooterActionsSlotChange}></slot>`)}</div></footer>`}renderContent(){return Se`<div class=${Te(gr.contentWrapper)} .hidden=${this.collapsible&&this.collapsed} @scroll=${this.panelScrollHandler} ${Ri(this.setPanelScrollEl)}><slot></slot>${this.renderFab()}</div>`}renderContentBottom(){return Se`<div class=${Te(gr.contentBottom)} .hidden=${!this.hasContentBottom}><slot name=${cl.contentBottom} @slotchange=${this.contentBottomSlotChangeHandler}></slot></div>`}renderContentTop(){return Se`<div class=${Te(gr.contentTop)} .hidden=${!this.hasContentTop}><slot name=${cl.contentTop} @slotchange=${this.contentTopSlotChangeHandler}></slot></div>`}renderFab(){return Se`<div class=${Te(gr.fabContainer)} .hidden=${!this.hasFab}><slot name=${cl.fab} @slotchange=${this.handleFabSlotChange}></slot></div>`}render(){const{disabled:e,loading:i,closed:r}=this,n=Se`<article .ariaBusy=${i} class=${Te(gr.container)} .hidden=${r} ${Ri(this.containerRef)}>${this.renderHeaderNode()}${this.renderContent()}${this.renderContentBottom()}${this.renderFooterNode()}${ri("alerts",Se`<slot name=${cl.alerts} @slotchange=${this.handleAlertsSlotChange}></slot>`)}</article>`;return ud({disabled:e,children:Se`${i?Se`<calcite-scrim .loading=${i}></calcite-scrim>`:null}${n}`})}};fF.properties={hasActionBar:[16,{},{state:!0}],hasContentBottom:[16,{},{state:!0}],hasContentTop:[16,{},{state:!0}],hasEndActions:[16,{},{state:!0}],hasFab:[16,{},{state:!0}],hasFooterActions:[16,{},{state:!0}],hasFooterContent:[16,{},{state:!0}],hasFooterEndContent:[16,{},{state:!0}],hasFooterStartContent:[16,{},{state:!0}],hasHeaderContent:[16,{},{state:!0}],hasMenuItems:[16,{},{state:!0}],hasStartActions:[16,{},{state:!0}],showHeaderContent:[16,{},{state:!0}],beforeClose:[0,{},{attribute:!1}],closable:[7,{},{reflect:!0,type:Boolean}],closed:[7,{},{reflect:!0,type:Boolean}],collapseDirection:1,collapsed:[7,{},{reflect:!0,type:Boolean}],collapsible:[7,{},{reflect:!0,type:Boolean}],description:1,disabled:[7,{},{reflect:!0,type:Boolean}],heading:1,headingLevel:[11,{},{type:Number,reflect:!0}],icon:[3,{},{reflect:!0}],iconFlipRtl:[7,{},{reflect:!0,type:Boolean}],loading:[7,{},{reflect:!0,type:Boolean}],menuFlipPlacements:[0,{},{attribute:!1}],menuOpen:[7,{},{reflect:!0,type:Boolean}],menuPlacement:[3,{},{reflect:!0}],messageOverrides:[0,{},{attribute:!1}],overlayPositioning:[3,{},{reflect:!0}],scale:[3,{},{reflect:!0}]},fF.styles=Drt;let q9=fF;rr("calcite-panel",q9);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */function zrt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var RI={exports:{}},Vrt=RI.exports,Jse;function jrt(){return Jse||(Jse=1,(function(t,e){(function(i,r){t.exports=r()})(Vrt,function(){function i($,S){var I=Object.keys($);if(Object.getOwnPropertySymbols){var P=Object.getOwnPropertySymbols($);S&&(P=P.filter(function(F){return Object.getOwnPropertyDescriptor($,F).enumerable})),I.push.apply(I,P)}return I}function r($){for(var S=1;S<arguments.length;S++){var I=arguments[S]!=null?arguments[S]:{};S%2?i(Object(I),!0).forEach(function(P){l($,P,I[P])}):Object.getOwnPropertyDescriptors?Object.defineProperties($,Object.getOwnPropertyDescriptors(I)):i(Object(I)).forEach(function(P){Object.defineProperty($,P,Object.getOwnPropertyDescriptor(I,P))})}return $}function n($){return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},n($)}function s($,S){if(!($ instanceof S))throw new TypeError("Cannot call a class as a function")}function o($,S){for(var I=0;I<S.length;I++){var P=S[I];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty($,_(P.key),P)}}function a($,S,I){return S&&o($.prototype,S),Object.defineProperty($,"prototype",{writable:!1}),$}function l($,S,I){return(S=_(S))in $?Object.defineProperty($,S,{value:I,enumerable:!0,configurable:!0,writable:!0}):$[S]=I,$}function c($,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function");$.prototype=Object.create(S&&S.prototype,{constructor:{value:$,writable:!0,configurable:!0}}),Object.defineProperty($,"prototype",{writable:!1}),S&&f($,S)}function d($){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(S){return S.__proto__||Object.getPrototypeOf(S)},d($)}function f($,S){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(I,P){return I.__proto__=P,I},f($,S)}function y($){if($===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $}function g($){var S=(function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}})();return function(){var I,P=d($);if(S){var F=d(this).constructor;I=Reflect.construct(P,arguments,F)}else I=P.apply(this,arguments);return(function(z,H){if(H&&(typeof H=="object"||typeof H=="function"))return H;if(H!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return y(z)})(this,I)}}function b(){return b=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function($,S,I){var P=(function(z,H){for(;!Object.prototype.hasOwnProperty.call(z,H)&&(z=d(z))!==null;);return z})($,S);if(P){var F=Object.getOwnPropertyDescriptor(P,S);return F.get?F.get.call(arguments.length<3?$:I):F.value}},b.apply(this,arguments)}function _($){var S=(function(I,P){if(typeof I!="object"||I===null)return I;var F=I[Symbol.toPrimitive];if(F!==void 0){var z=F.call(I,P);if(typeof z!="object")return z;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(I)})($,"string");return typeof S=="symbol"?S:S+""}var x=function($){return!(!$||!$.Window)&&$ instanceof $.Window},E=void 0,C=void 0;function k($){E=$;var S=$.document.createTextNode("");S.ownerDocument!==$.document&&typeof $.wrap=="function"&&$.wrap(S)===S&&($=$.wrap($)),C=$}function O($){return x($)?$:($.ownerDocument||$).defaultView||C.window}typeof window<"u"&&window&&k(window);var D=function($){return!!$&&n($)==="object"},B=function($){return typeof $=="function"},j={window:function($){return $===C||x($)},docFrag:function($){return D($)&&$.nodeType===11},object:D,func:B,number:function($){return typeof $=="number"},bool:function($){return typeof $=="boolean"},string:function($){return typeof $=="string"},element:function($){if(!$||n($)!=="object")return!1;var S=O($)||C;return/object|function/.test(typeof Element>"u"?"undefined":n(Element))?$ instanceof Element||$ instanceof S.Element:$.nodeType===1&&typeof $.nodeName=="string"},plainObject:function($){return D($)&&!!$.constructor&&/function Object\b/.test($.constructor.toString())},array:function($){return D($)&&$.length!==void 0&&B($.splice)}};function Z($){var S=$.interaction;if(S.prepared.name==="drag"){var I=S.prepared.axis;I==="x"?(S.coords.cur.page.y=S.coords.start.page.y,S.coords.cur.client.y=S.coords.start.client.y,S.coords.velocity.client.y=0,S.coords.velocity.page.y=0):I==="y"&&(S.coords.cur.page.x=S.coords.start.page.x,S.coords.cur.client.x=S.coords.start.client.x,S.coords.velocity.client.x=0,S.coords.velocity.page.x=0)}}function X($){var S=$.iEvent,I=$.interaction;if(I.prepared.name==="drag"){var P=I.prepared.axis;if(P==="x"||P==="y"){var F=P==="x"?"y":"x";S.page[F]=I.coords.start.page[F],S.client[F]=I.coords.start.client[F],S.delta[F]=0}}}var ee={id:"actions/drag",install:function($){var S=$.actions,I=$.Interactable,P=$.defaults;I.prototype.draggable=ee.draggable,S.map.drag=ee,S.methodDict.drag="draggable",P.actions.drag=ee.defaults},listeners:{"interactions:before-action-move":Z,"interactions:action-resume":Z,"interactions:action-move":X,"auto-start:check":function($){var S=$.interaction,I=$.interactable,P=$.buttons,F=I.options.drag;if(F&&F.enabled&&(!S.pointerIsDown||!/mouse|pointer/.test(S.pointerType)||(P&I.options.drag.mouseButtons)!=0))return $.action={name:"drag",axis:F.lockAxis==="start"?F.startAxis:F.lockAxis},!1}},draggable:function($){return j.object($)?(this.options.drag.enabled=$.enabled!==!1,this.setPerAction("drag",$),this.setOnEvents("drag",$),/^(xy|x|y|start)$/.test($.lockAxis)&&(this.options.drag.lockAxis=$.lockAxis),/^(xy|x|y)$/.test($.startAxis)&&(this.options.drag.startAxis=$.startAxis),this):j.bool($)?(this.options.drag.enabled=$,this):this.options.drag},beforeMove:Z,move:X,defaults:{startAxis:"xy",lockAxis:"xy"},getCursor:function(){return"move"},filterEventType:function($){return $.search("drag")===0}},pe=ee,he={init:function($){var S=$;he.document=S.document,he.DocumentFragment=S.DocumentFragment||ne,he.SVGElement=S.SVGElement||ne,he.SVGSVGElement=S.SVGSVGElement||ne,he.SVGElementInstance=S.SVGElementInstance||ne,he.Element=S.Element||ne,he.HTMLElement=S.HTMLElement||he.Element,he.Event=S.Event,he.Touch=S.Touch||ne,he.PointerEvent=S.PointerEvent||S.MSPointerEvent},document:null,DocumentFragment:null,SVGElement:null,SVGSVGElement:null,SVGElementInstance:null,Element:null,HTMLElement:null,Event:null,Touch:null,PointerEvent:null};function ne(){}var re=he,ke={init:function($){var S=re.Element,I=$.navigator||{};ke.supportsTouch="ontouchstart"in $||j.func($.DocumentTouch)&&re.document instanceof $.DocumentTouch,ke.supportsPointerEvent=I.pointerEnabled!==!1&&!!re.PointerEvent,ke.isIOS=/iP(hone|od|ad)/.test(I.platform),ke.isIOS7=/iP(hone|od|ad)/.test(I.platform)&&/OS 7[^\d]/.test(I.appVersion),ke.isIe9=/MSIE 9/.test(I.userAgent),ke.isOperaMobile=I.appName==="Opera"&&ke.supportsTouch&&/Presto/.test(I.userAgent),ke.prefixedMatchesSelector="matches"in S.prototype?"matches":"webkitMatchesSelector"in S.prototype?"webkitMatchesSelector":"mozMatchesSelector"in S.prototype?"mozMatchesSelector":"oMatchesSelector"in S.prototype?"oMatchesSelector":"msMatchesSelector",ke.pEventTypes=ke.supportsPointerEvent?re.PointerEvent===$.MSPointerEvent?{up:"MSPointerUp",down:"MSPointerDown",over:"mouseover",out:"mouseout",move:"MSPointerMove",cancel:"MSPointerCancel"}:{up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"}:null,ke.wheelEvent=re.document&&"onmousewheel"in re.document?"mousewheel":"wheel"},supportsTouch:null,supportsPointerEvent:null,isIOS7:null,isIOS:null,isIe9:null,isOperaMobile:null,prefixedMatchesSelector:null,pEventTypes:null,wheelEvent:null},Fe=ke;function Ae($,S){if($.contains)return $.contains(S);for(;S;){if(S===$)return!0;S=S.parentNode}return!1}function we($,S){for(;j.element($);){if(je($,S))return $;$=Re($)}return null}function Re($){var S=$.parentNode;if(j.docFrag(S)){for(;(S=S.host)&&j.docFrag(S););return S}return S}function je($,S){return C!==E&&(S=S.replace(/\/deep\//g," ")),$[Fe.prefixedMatchesSelector](S)}var ue=function($){return $.parentNode||$.host};function Ne($,S){for(var I,P=[],F=$;(I=ue(F))&&F!==S&&I!==F.ownerDocument;)P.unshift(F),F=I;return P}function Pt($,S,I){for(;j.element($);){if(je($,S))return!0;if(($=Re($))===I)return je($,S)}return!1}function Ot($){return $.correspondingUseElement||$}function Xt($){var S=$ instanceof re.SVGElement?$.getBoundingClientRect():$.getClientRects()[0];return S&&{left:S.left,right:S.right,top:S.top,bottom:S.bottom,width:S.width||S.right-S.left,height:S.height||S.bottom-S.top}}function oi($){var S,I=Xt($);if(!Fe.isIOS7&&I){var P={x:(S=(S=O($))||C).scrollX||S.document.documentElement.scrollLeft,y:S.scrollY||S.document.documentElement.scrollTop};I.left+=P.x,I.right+=P.x,I.top+=P.y,I.bottom+=P.y}return I}function vi($){for(var S=[];$;)S.push($),$=Re($);return S}function ui($){return!!j.string($)&&(re.document.querySelector($),!0)}function Qe($,S){for(var I in S)$[I]=S[I];return $}function In($,S,I){return $==="parent"?Re(I):$==="self"?S.getRect(I):we(I,$)}function Ao($,S,I,P){var F=$;return j.string(F)?F=In(F,S,I):j.func(F)&&(F=F.apply(void 0,P)),j.element(F)&&(F=oi(F)),F}function Vl($){return $&&{x:"x"in $?$.x:$.left,y:"y"in $?$.y:$.top}}function ro($){return!$||"x"in $&&"y"in $||(($=Qe({},$)).x=$.left||0,$.y=$.top||0,$.width=$.width||($.right||0)-$.x,$.height=$.height||($.bottom||0)-$.y),$}function Lo($,S,I){$.left&&(S.left+=I.x),$.right&&(S.right+=I.x),$.top&&(S.top+=I.y),$.bottom&&(S.bottom+=I.y),S.width=S.right-S.left,S.height=S.bottom-S.top}function dd($,S,I){var P=I&&$.options[I];return Vl(Ao(P&&P.origin||$.options.origin,$,S,[$&&S]))||{x:0,y:0}}function jl($,S){var I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(J){return!0},P=arguments.length>3?arguments[3]:void 0;if(P=P||{},j.string($)&&$.search(" ")!==-1&&($=ym($)),j.array($))return $.forEach(function(J){return jl(J,S,I,P)}),P;if(j.object($)&&(S=$,$=""),j.func(S)&&I($))P[$]=P[$]||[],P[$].push(S);else if(j.array(S))for(var F=0,z=S;F<z.length;F++){var H=z[F];jl($,H,I,P)}else if(j.object(S))for(var W in S)jl(ym(W).map(function(J){return"".concat($).concat(J)}),S[W],I,P);return P}function ym($){return $.trim().split(/ +/)}var hd=function($,S){return Math.sqrt($*$+S*S)},gm=["webkit","moz"];function Qa($,S){$.__set||($.__set={});var I=function(F){if(gm.some(function(z){return F.indexOf(z)===0}))return 1;typeof $[F]!="function"&&F!=="__set"&&Object.defineProperty($,F,{get:function(){return F in $.__set?$.__set[F]:$.__set[F]=S[F]},set:function(z){$.__set[F]=z},configurable:!0})};for(var P in S)I(P);return $}function Gn($,S){$.page=$.page||{},$.page.x=S.page.x,$.page.y=S.page.y,$.client=$.client||{},$.client.x=S.client.x,$.client.y=S.client.y,$.timeStamp=S.timeStamp}function vm($){$.page.x=0,$.page.y=0,$.client.x=0,$.client.y=0}function Yg($){return $ instanceof re.Event||$ instanceof re.Touch}function _p($,S,I){return $=$||"page",(I=I||{}).x=S[$+"X"],I.y=S[$+"Y"],I}function Xg($,S){return S=S||{x:0,y:0},Fe.isOperaMobile&&Yg($)?(_p("screen",$,S),S.x+=window.scrollX,S.y+=window.scrollY):_p("page",$,S),S}function pd($){return j.number($.pointerId)?$.pointerId:$.identifier}function Kg($,S,I){var P=S.length>1?Cw(S):S[0];Xg(P,$.page),(function(F,z){z=z||{},Fe.isOperaMobile&&Yg(F)?_p("screen",F,z):_p("client",F,z)})(P,$.client),$.timeStamp=I}function fd($){var S=[];return j.array($)?(S[0]=$[0],S[1]=$[1]):$.type==="touchend"?$.touches.length===1?(S[0]=$.touches[0],S[1]=$.changedTouches[0]):$.touches.length===0&&(S[0]=$.changedTouches[0],S[1]=$.changedTouches[1]):(S[0]=$.touches[0],S[1]=$.touches[1]),S}function Cw($){for(var S={pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0},I=0;I<$.length;I++){var P=$[I];for(var F in S)S[F]+=P[F]}for(var z in S)S[z]/=$.length;return S}function Bc($){if(!$.length)return null;var S=fd($),I=Math.min(S[0].pageX,S[1].pageX),P=Math.min(S[0].pageY,S[1].pageY),F=Math.max(S[0].pageX,S[1].pageX),z=Math.max(S[0].pageY,S[1].pageY);return{x:I,y:P,left:I,top:P,right:F,bottom:z,width:F-I,height:z-P}}function Gc($,S){var I=S+"X",P=S+"Y",F=fd($),z=F[0][I]-F[1][I],H=F[0][P]-F[1][P];return hd(z,H)}function Qg($,S){var I=S+"X",P=S+"Y",F=fd($),z=F[1][I]-F[0][I],H=F[1][P]-F[0][P];return 180*Math.atan2(H,z)/Math.PI}function ev($){return j.string($.pointerType)?$.pointerType:j.number($.pointerType)?[void 0,void 0,"touch","pen","mouse"][$.pointerType]:/touch/.test($.type||"")||$ instanceof re.Touch?"touch":"mouse"}function tv($){var S=j.func($.composedPath)?$.composedPath():$.path;return[Ot(S?S[0]:$.target),Ot($.currentTarget)]}var bm=(function(){function $(S){s(this,$),this.immediatePropagationStopped=!1,this.propagationStopped=!1,this._interaction=S}return a($,[{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}]),$})();Object.defineProperty(bm.prototype,"interaction",{get:function(){return this._interaction._proxy},set:function(){}});var wm=function($,S){for(var I=0;I<S.length;I++){var P=S[I];$.push(P)}return $},_m=function($){return wm([],$)},qc=function($,S){for(var I=0;I<$.length;I++)if(S($[I],I,$))return I;return-1},Hc=function($,S){return $[qc($,S)]},Ul=(function($){c(I,$);var S=g(I);function I(P,F,z){var H;s(this,I),(H=S.call(this,F._interaction)).dropzone=void 0,H.dragEvent=void 0,H.relatedTarget=void 0,H.draggable=void 0,H.propagationStopped=!1,H.immediatePropagationStopped=!1;var W=z==="dragleave"?P.prev:P.cur,J=W.element,oe=W.dropzone;return H.type=z,H.target=J,H.currentTarget=J,H.dropzone=oe,H.dragEvent=F,H.relatedTarget=F.target,H.draggable=F.interactable,H.timeStamp=F.timeStamp,H}return a(I,[{key:"reject",value:function(){var P=this,F=this._interaction.dropState;if(this.type==="dropactivate"||this.dropzone&&F.cur.dropzone===this.dropzone&&F.cur.element===this.target)if(F.prev.dropzone=this.dropzone,F.prev.element=this.target,F.rejected=!0,F.events.enter=null,this.stopImmediatePropagation(),this.type==="dropactivate"){var z=F.activeDrops,H=qc(z,function(J){var oe=J.dropzone,K=J.element;return oe===P.dropzone&&K===P.target});F.activeDrops.splice(H,1);var W=new I(F,this.dragEvent,"dropdeactivate");W.dropzone=this.dropzone,W.target=this.target,this.dropzone.fire(W)}else this.dropzone.fire(new I(F,this.dragEvent,"dragleave"))}},{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}]),I})(bm);function Wc($,S){for(var I=0,P=$.slice();I<P.length;I++){var F=P[I],z=F.dropzone,H=F.element;S.dropzone=z,S.target=H,z.fire(S),S.propagationStopped=S.immediatePropagationStopped=!1}}function Bl($,S){for(var I=(function(z,H){for(var W=[],J=0,oe=z.interactables.list;J<oe.length;J++){var K=oe[J];if(K.options.drop.enabled){var ge=K.options.drop.accept;if(!(j.element(ge)&&ge!==H||j.string(ge)&&!je(H,ge)||j.func(ge)&&!ge({dropzone:K,draggableElement:H})))for(var Le=0,He=K.getAllElements();Le<He.length;Le++){var Be=He[Le];Be!==H&&W.push({dropzone:K,element:Be,rect:K.getRect(Be)})}}}return W})($,S),P=0;P<I.length;P++){var F=I[P];F.rect=F.dropzone.getRect(F.element)}return I}function iv($,S,I){for(var P=$.dropState,F=$.interactable,z=$.element,H=[],W=0,J=P.activeDrops;W<J.length;W++){var oe=J[W],K=oe.dropzone,ge=oe.element,Le=oe.rect,He=K.dropCheck(S,I,F,z,ge,Le);H.push(He?ge:null)}var Be=(function(Xe){for(var pt,st,It,ai=[],Zt=0;Zt<Xe.length;Zt++){var Dt=Xe[Zt],li=Xe[pt];if(Dt&&Zt!==pt)if(li){var ms=ue(Dt),mr=ue(li);if(ms!==Dt.ownerDocument)if(mr!==Dt.ownerDocument)if(ms!==mr){ai=ai.length?ai:Ne(li);var no=void 0;if(li instanceof re.HTMLElement&&Dt instanceof re.SVGElement&&!(Dt instanceof re.SVGSVGElement)){if(Dt===mr)continue;no=Dt.ownerSVGElement}else no=Dt;for(var Oo=Ne(no,li.ownerDocument),Xc=0;Oo[Xc]&&Oo[Xc]===ai[Xc];)Xc++;var qw=[Oo[Xc-1],Oo[Xc],ai[Xc]];if(qw[0])for(var Zl=qw[0].lastChild;Zl;){if(Zl===qw[1]){pt=Zt,ai=Oo;break}if(Zl===qw[2])break;Zl=Zl.previousSibling}}else It=li,(parseInt(O(st=Dt).getComputedStyle(st).zIndex,10)||0)>=(parseInt(O(It).getComputedStyle(It).zIndex,10)||0)&&(pt=Zt);else pt=Zt}else pt=Zt}return pt})(H);return P.activeDrops[Be]||null}function xm($,S,I){var P=$.dropState,F={enter:null,leave:null,activate:null,deactivate:null,move:null,drop:null};return I.type==="dragstart"&&(F.activate=new Ul(P,I,"dropactivate"),F.activate.target=null,F.activate.dropzone=null),I.type==="dragend"&&(F.deactivate=new Ul(P,I,"dropdeactivate"),F.deactivate.target=null,F.deactivate.dropzone=null),P.rejected||(P.cur.element!==P.prev.element&&(P.prev.dropzone&&(F.leave=new Ul(P,I,"dragleave"),I.dragLeave=F.leave.target=P.prev.element,I.prevDropzone=F.leave.dropzone=P.prev.dropzone),P.cur.dropzone&&(F.enter=new Ul(P,I,"dragenter"),I.dragEnter=P.cur.element,I.dropzone=P.cur.dropzone)),I.type==="dragend"&&P.cur.dropzone&&(F.drop=new Ul(P,I,"drop"),I.dropzone=P.cur.dropzone,I.relatedTarget=P.cur.element),I.type==="dragmove"&&P.cur.dropzone&&(F.move=new Ul(P,I,"dropmove"),I.dropzone=P.cur.dropzone)),F}function Sm($,S){var I=$.dropState,P=I.activeDrops,F=I.cur,z=I.prev;S.leave&&z.dropzone.fire(S.leave),S.enter&&F.dropzone.fire(S.enter),S.move&&F.dropzone.fire(S.move),S.drop&&F.dropzone.fire(S.drop),S.deactivate&&Wc(P,S.deactivate),I.prev.dropzone=F.dropzone,I.prev.element=F.element}function rv($,S){var I=$.interaction,P=$.iEvent,F=$.event;if(P.type==="dragmove"||P.type==="dragend"){var z=I.dropState;S.dynamicDrop&&(z.activeDrops=Bl(S,I.element));var H=P,W=iv(I,H,F);z.rejected=z.rejected&&!!W&&W.dropzone===z.cur.dropzone&&W.element===z.cur.element,z.cur.dropzone=W&&W.dropzone,z.cur.element=W&&W.element,z.events=xm(I,0,H)}}var Ce={id:"actions/drop",install:function($){var S=$.actions,I=$.interactStatic,P=$.Interactable,F=$.defaults;$.usePlugin(pe),P.prototype.dropzone=function(z){return(function(H,W){if(j.object(W)){if(H.options.drop.enabled=W.enabled!==!1,W.listeners){var J=jl(W.listeners),oe=Object.keys(J).reduce(function(ge,Le){return ge[/^(enter|leave)/.test(Le)?"drag".concat(Le):/^(activate|deactivate|move)/.test(Le)?"drop".concat(Le):Le]=J[Le],ge},{}),K=H.options.drop.listeners;K&&H.off(K),H.on(oe),H.options.drop.listeners=oe}return j.func(W.ondrop)&&H.on("drop",W.ondrop),j.func(W.ondropactivate)&&H.on("dropactivate",W.ondropactivate),j.func(W.ondropdeactivate)&&H.on("dropdeactivate",W.ondropdeactivate),j.func(W.ondragenter)&&H.on("dragenter",W.ondragenter),j.func(W.ondragleave)&&H.on("dragleave",W.ondragleave),j.func(W.ondropmove)&&H.on("dropmove",W.ondropmove),/^(pointer|center)$/.test(W.overlap)?H.options.drop.overlap=W.overlap:j.number(W.overlap)&&(H.options.drop.overlap=Math.max(Math.min(1,W.overlap),0)),"accept"in W&&(H.options.drop.accept=W.accept),"checker"in W&&(H.options.drop.checker=W.checker),H}return j.bool(W)?(H.options.drop.enabled=W,H):H.options.drop})(this,z)},P.prototype.dropCheck=function(z,H,W,J,oe,K){return(function(ge,Le,He,Be,Xe,pt,st){var It=!1;if(!(st=st||ge.getRect(pt)))return!!ge.options.drop.checker&&ge.options.drop.checker(Le,He,It,ge,pt,Be,Xe);var ai=ge.options.drop.overlap;if(ai==="pointer"){var Zt=dd(Be,Xe,"drag"),Dt=Xg(Le);Dt.x+=Zt.x,Dt.y+=Zt.y;var li=Dt.x>st.left&&Dt.x<st.right,ms=Dt.y>st.top&&Dt.y<st.bottom;It=li&&ms}var mr=Be.getRect(Xe);if(mr&&ai==="center"){var no=mr.left+mr.width/2,Oo=mr.top+mr.height/2;It=no>=st.left&&no<=st.right&&Oo>=st.top&&Oo<=st.bottom}return mr&&j.number(ai)&&(It=Math.max(0,Math.min(st.right,mr.right)-Math.max(st.left,mr.left))*Math.max(0,Math.min(st.bottom,mr.bottom)-Math.max(st.top,mr.top))/(mr.width*mr.height)>=ai),ge.options.drop.checker&&(It=ge.options.drop.checker(Le,He,It,ge,pt,Be,Xe)),It})(this,z,H,W,J,oe,K)},I.dynamicDrop=function(z){return j.bool(z)?($.dynamicDrop=z,I):$.dynamicDrop},Qe(S.phaselessTypes,{dragenter:!0,dragleave:!0,dropactivate:!0,dropdeactivate:!0,dropmove:!0,drop:!0}),S.methodDict.drop="dropzone",$.dynamicDrop=!1,F.actions.drop=Ce.defaults},listeners:{"interactions:before-action-start":function($){var S=$.interaction;S.prepared.name==="drag"&&(S.dropState={cur:{dropzone:null,element:null},prev:{dropzone:null,element:null},rejected:null,events:null,activeDrops:[]})},"interactions:after-action-start":function($,S){var I=$.interaction,P=($.event,$.iEvent);if(I.prepared.name==="drag"){var F=I.dropState;F.activeDrops=[],F.events={},F.activeDrops=Bl(S,I.element),F.events=xm(I,0,P),F.events.activate&&(Wc(F.activeDrops,F.events.activate),S.fire("actions/drop:start",{interaction:I,dragEvent:P}))}},"interactions:action-move":rv,"interactions:after-action-move":function($,S){var I=$.interaction,P=$.iEvent;if(I.prepared.name==="drag"){var F=I.dropState;Sm(I,F.events),S.fire("actions/drop:move",{interaction:I,dragEvent:P}),F.events={}}},"interactions:action-end":function($,S){if($.interaction.prepared.name==="drag"){var I=$.interaction,P=$.iEvent;rv($,S),Sm(I,I.dropState.events),S.fire("actions/drop:end",{interaction:I,dragEvent:P})}},"interactions:stop":function($){var S=$.interaction;if(S.prepared.name==="drag"){var I=S.dropState;I&&(I.activeDrops=null,I.events=null,I.cur.dropzone=null,I.cur.element=null,I.prev.dropzone=null,I.prev.element=null,I.rejected=!1)}}},getActiveDrops:Bl,getDrop:iv,getDropEvents:xm,fireDropEvents:Sm,filterEventType:function($){return $.search("drag")===0||$.search("drop")===0},defaults:{enabled:!1,accept:null,overlap:"pointer"}},Ji=Ce;function el($){var S=$.interaction,I=$.iEvent,P=$.phase;if(S.prepared.name==="gesture"){var F=S.pointers.map(function(oe){return oe.pointer}),z=P==="start",H=P==="end",W=S.interactable.options.deltaSource;if(I.touches=[F[0],F[1]],z)I.distance=Gc(F,W),I.box=Bc(F),I.scale=1,I.ds=0,I.angle=Qg(F,W),I.da=0,S.gesture.startDistance=I.distance,S.gesture.startAngle=I.angle;else if(H||S.pointers.length<2){var J=S.prevEvent;I.distance=J.distance,I.box=J.box,I.scale=J.scale,I.ds=0,I.angle=J.angle,I.da=0}else I.distance=Gc(F,W),I.box=Bc(F),I.scale=I.distance/S.gesture.startDistance,I.angle=Qg(F,W),I.ds=I.scale-S.gesture.scale,I.da=I.angle-S.gesture.angle;S.gesture.distance=I.distance,S.gesture.angle=I.angle,j.number(I.scale)&&I.scale!==1/0&&!isNaN(I.scale)&&(S.gesture.scale=I.scale)}}var Ro={id:"actions/gesture",before:["actions/drag","actions/resize"],install:function($){var S=$.actions,I=$.Interactable,P=$.defaults;I.prototype.gesturable=function(F){return j.object(F)?(this.options.gesture.enabled=F.enabled!==!1,this.setPerAction("gesture",F),this.setOnEvents("gesture",F),this):j.bool(F)?(this.options.gesture.enabled=F,this):this.options.gesture},S.map.gesture=Ro,S.methodDict.gesture="gesturable",P.actions.gesture=Ro.defaults},listeners:{"interactions:action-start":el,"interactions:action-move":el,"interactions:action-end":el,"interactions:new":function($){$.interaction.gesture={angle:0,distance:0,scale:1,startAngle:0,startDistance:0}},"auto-start:check":function($){if(!($.interaction.pointers.length<2)){var S=$.interactable.options.gesture;if(S&&S.enabled)return $.action={name:"gesture"},!1}}},defaults:{},getCursor:function(){return""},filterEventType:function($){return $.search("gesture")===0}},Os=Ro;function Gl($,S,I,P,F,z,H){if(!S)return!1;if(S===!0){var W=j.number(z.width)?z.width:z.right-z.left,J=j.number(z.height)?z.height:z.bottom-z.top;if(H=Math.min(H,Math.abs(($==="left"||$==="right"?W:J)/2)),W<0&&($==="left"?$="right":$==="right"&&($="left")),J<0&&($==="top"?$="bottom":$==="bottom"&&($="top")),$==="left"){var oe=W>=0?z.left:z.right;return I.x<oe+H}if($==="top"){var K=J>=0?z.top:z.bottom;return I.y<K+H}if($==="right")return I.x>(W>=0?z.right:z.left)-H;if($==="bottom")return I.y>(J>=0?z.bottom:z.top)-H}return!!j.element(P)&&(j.element(S)?S===P:Pt(P,S,F))}function mt($){var S=$.iEvent,I=$.interaction;if(I.prepared.name==="resize"&&I.resizeAxes){var P=S;I.interactable.options.resize.square?(I.resizeAxes==="y"?P.delta.x=P.delta.y:P.delta.y=P.delta.x,P.axes="xy"):(P.axes=I.resizeAxes,I.resizeAxes==="x"?P.delta.y=0:I.resizeAxes==="y"&&(P.delta.x=0))}}var qn,ha,ki={id:"actions/resize",before:["actions/drag"],install:function($){var S=$.actions,I=$.browser,P=$.Interactable,F=$.defaults;ki.cursors=(function(z){return z.isIe9?{x:"e-resize",y:"s-resize",xy:"se-resize",top:"n-resize",left:"w-resize",bottom:"s-resize",right:"e-resize",topleft:"se-resize",bottomright:"se-resize",topright:"ne-resize",bottomleft:"ne-resize"}:{x:"ew-resize",y:"ns-resize",xy:"nwse-resize",top:"ns-resize",left:"ew-resize",bottom:"ns-resize",right:"ew-resize",topleft:"nwse-resize",bottomright:"nwse-resize",topright:"nesw-resize",bottomleft:"nesw-resize"}})(I),ki.defaultMargin=I.supportsTouch||I.supportsPointerEvent?20:10,P.prototype.resizable=function(z){return(function(H,W,J){return j.object(W)?(H.options.resize.enabled=W.enabled!==!1,H.setPerAction("resize",W),H.setOnEvents("resize",W),j.string(W.axis)&&/^x$|^y$|^xy$/.test(W.axis)?H.options.resize.axis=W.axis:W.axis===null&&(H.options.resize.axis=J.defaults.actions.resize.axis),j.bool(W.preserveAspectRatio)?H.options.resize.preserveAspectRatio=W.preserveAspectRatio:j.bool(W.square)&&(H.options.resize.square=W.square),H):j.bool(W)?(H.options.resize.enabled=W,H):H.options.resize})(this,z,$)},S.map.resize=ki,S.methodDict.resize="resizable",F.actions.resize=ki.defaults},listeners:{"interactions:new":function($){$.interaction.resizeAxes="xy"},"interactions:action-start":function($){(function(S){var I=S.iEvent,P=S.interaction;if(P.prepared.name==="resize"&&P.prepared.edges){var F=I,z=P.rect;P._rects={start:Qe({},z),corrected:Qe({},z),previous:Qe({},z),delta:{left:0,right:0,width:0,top:0,bottom:0,height:0}},F.edges=P.prepared.edges,F.rect=P._rects.corrected,F.deltaRect=P._rects.delta}})($),mt($)},"interactions:action-move":function($){(function(S){var I=S.iEvent,P=S.interaction;if(P.prepared.name==="resize"&&P.prepared.edges){var F=I,z=P.interactable.options.resize.invert,H=z==="reposition"||z==="negate",W=P.rect,J=P._rects,oe=J.start,K=J.corrected,ge=J.delta,Le=J.previous;if(Qe(Le,K),H){if(Qe(K,W),z==="reposition"){if(K.top>K.bottom){var He=K.top;K.top=K.bottom,K.bottom=He}if(K.left>K.right){var Be=K.left;K.left=K.right,K.right=Be}}}else K.top=Math.min(W.top,oe.bottom),K.bottom=Math.max(W.bottom,oe.top),K.left=Math.min(W.left,oe.right),K.right=Math.max(W.right,oe.left);for(var Xe in K.width=K.right-K.left,K.height=K.bottom-K.top,K)ge[Xe]=K[Xe]-Le[Xe];F.edges=P.prepared.edges,F.rect=K,F.deltaRect=ge}})($),mt($)},"interactions:action-end":function($){var S=$.iEvent,I=$.interaction;if(I.prepared.name==="resize"&&I.prepared.edges){var P=S;P.edges=I.prepared.edges,P.rect=I._rects.corrected,P.deltaRect=I._rects.delta}},"auto-start:check":function($){var S=$.interaction,I=$.interactable,P=$.element,F=$.rect,z=$.buttons;if(F){var H=Qe({},S.coords.cur.page),W=I.options.resize;if(W&&W.enabled&&(!S.pointerIsDown||!/mouse|pointer/.test(S.pointerType)||(z&W.mouseButtons)!=0)){if(j.object(W.edges)){var J={left:!1,right:!1,top:!1,bottom:!1};for(var oe in J)J[oe]=Gl(oe,W.edges[oe],H,S._latestPointer.eventTarget,P,F,W.margin||ki.defaultMargin);J.left=J.left&&!J.right,J.top=J.top&&!J.bottom,(J.left||J.right||J.top||J.bottom)&&($.action={name:"resize",edges:J})}else{var K=W.axis!=="y"&&H.x>F.right-ki.defaultMargin,ge=W.axis!=="x"&&H.y>F.bottom-ki.defaultMargin;(K||ge)&&($.action={name:"resize",axes:(K?"x":"")+(ge?"y":"")})}return!$.action&&void 0}}}},defaults:{square:!1,preserveAspectRatio:!1,axis:"xy",margin:NaN,edges:null,invert:"none"},cursors:null,getCursor:function($){var S=$.edges,I=$.axis,P=$.name,F=ki.cursors,z=null;if(I)z=F[P+I];else if(S){for(var H="",W=0,J=["top","bottom","left","right"];W<J.length;W++){var oe=J[W];S[oe]&&(H+=oe)}z=F[H]}return z},filterEventType:function($){return $.search("resize")===0},defaultMargin:null},Zc=ki,tT={id:"actions",install:function($){$.usePlugin(Os),$.usePlugin(Zc),$.usePlugin(pe),$.usePlugin(Ji)}},tl=0,il={request:function($){return qn($)},cancel:function($){return ha($)},init:function($){if(qn=$.requestAnimationFrame,ha=$.cancelAnimationFrame,!qn)for(var S=["ms","moz","webkit","o"],I=0;I<S.length;I++){var P=S[I];qn=$["".concat(P,"RequestAnimationFrame")],ha=$["".concat(P,"CancelAnimationFrame")]||$["".concat(P,"CancelRequestAnimationFrame")]}qn=qn&&qn.bind($),ha=ha&&ha.bind($),qn||(qn=function(F){var z=Date.now(),H=Math.max(0,16-(z-tl)),W=$.setTimeout(function(){F(z+H)},H);return tl=z+H,W},ha=function(F){return clearTimeout(F)})}},Mt={defaults:{enabled:!1,margin:60,container:null,speed:300},now:Date.now,interaction:null,i:0,x:0,y:0,isScrolling:!1,prevTime:0,margin:0,speed:0,start:function($){Mt.isScrolling=!0,il.cancel(Mt.i),$.autoScroll=Mt,Mt.interaction=$,Mt.prevTime=Mt.now(),Mt.i=il.request(Mt.scroll)},stop:function(){Mt.isScrolling=!1,Mt.interaction&&(Mt.interaction.autoScroll=null),il.cancel(Mt.i)},scroll:function(){var $=Mt.interaction,S=$.interactable,I=$.element,P=$.prepared.name,F=S.options[P].autoScroll,z=qt(F.container,S,I),H=Mt.now(),W=(H-Mt.prevTime)/1e3,J=F.speed*W;if(J>=1){var oe={x:Mt.x*J,y:Mt.y*J};if(oe.x||oe.y){var K=nv(z);j.window(z)?z.scrollBy(oe.x,oe.y):z&&(z.scrollLeft+=oe.x,z.scrollTop+=oe.y);var ge=nv(z),Le={x:ge.x-K.x,y:ge.y-K.y};(Le.x||Le.y)&&S.fire({type:"autoscroll",target:I,interactable:S,delta:Le,interaction:$,container:z})}Mt.prevTime=H}Mt.isScrolling&&(il.cancel(Mt.i),Mt.i=il.request(Mt.scroll))},check:function($,S){var I;return(I=$.options[S].autoScroll)==null?void 0:I.enabled},onInteractionMove:function($){var S=$.interaction,I=$.pointer;if(S.interacting()&&Mt.check(S.interactable,S.prepared.name))if(S.simulation)Mt.x=Mt.y=0;else{var P,F,z,H,W=S.interactable,J=S.element,oe=S.prepared.name,K=W.options[oe].autoScroll,ge=qt(K.container,W,J);if(j.window(ge))H=I.clientX<Mt.margin,P=I.clientY<Mt.margin,F=I.clientX>ge.innerWidth-Mt.margin,z=I.clientY>ge.innerHeight-Mt.margin;else{var Le=Xt(ge);H=I.clientX<Le.left+Mt.margin,P=I.clientY<Le.top+Mt.margin,F=I.clientX>Le.right-Mt.margin,z=I.clientY>Le.bottom-Mt.margin}Mt.x=F?1:H?-1:0,Mt.y=z?1:P?-1:0,Mt.isScrolling||(Mt.margin=K.margin,Mt.speed=K.speed,Mt.start(S))}}};function qt($,S,I){return(j.string($)?In($,S,I):$)||O(I)}function nv($){return j.window($)&&($=window.document.body),{x:$.scrollLeft,y:$.scrollTop}}var Mw={id:"auto-scroll",install:function($){var S=$.defaults,I=$.actions;$.autoScroll=Mt,Mt.now=function(){return $.now()},I.phaselessTypes.autoscroll=!0,S.perAction.autoScroll=Mt.defaults},listeners:{"interactions:new":function($){$.interaction.autoScroll=null},"interactions:destroy":function($){$.interaction.autoScroll=null,Mt.stop(),Mt.interaction&&(Mt.interaction=null)},"interactions:stop":Mt.stop,"interactions:action-move":function($){return Mt.onInteractionMove($)}}},kw=Mw;function md($,S){var I=!1;return function(){return I||(C.console.warn(S),I=!0),$.apply(this,arguments)}}function yd($,S){return $.name=S.name,$.axis=S.axis,$.edges=S.edges,$}function Pw($){return j.bool($)?(this.options.styleCursor=$,this):$===null?(delete this.options.styleCursor,this):this.options.styleCursor}function sv($){return j.func($)?(this.options.actionChecker=$,this):$===null?(delete this.options.actionChecker,this):this.options.actionChecker}var an={id:"auto-start/interactableMethods",install:function($){var S=$.Interactable;S.prototype.getAction=function(I,P,F,z){var H=(function(W,J,oe,K,ge){var Le=W.getRect(K),He=J.buttons||{0:1,1:4,3:8,4:16}[J.button],Be={action:null,interactable:W,interaction:oe,element:K,rect:Le,buttons:He};return ge.fire("auto-start:check",Be),Be.action})(this,P,F,z,$);return this.options.actionChecker?this.options.actionChecker(I,P,H,this,z,F):H},S.prototype.ignoreFrom=md(function(I){return this._backCompatOption("ignoreFrom",I)},"Interactable.ignoreFrom() has been deprecated. Use Interactble.draggable({ignoreFrom: newValue})."),S.prototype.allowFrom=md(function(I){return this._backCompatOption("allowFrom",I)},"Interactable.allowFrom() has been deprecated. Use Interactble.draggable({allowFrom: newValue})."),S.prototype.actionChecker=sv,S.prototype.styleCursor=Pw}};function wr($,S,I,P,F){return S.testIgnoreAllow(S.options[$.name],I,P)&&S.options[$.name].enabled&&Jc(S,I,$,F)?$:null}function Aw($,S,I,P,F,z,H){for(var W=0,J=P.length;W<J;W++){var oe=P[W],K=F[W],ge=oe.getAction(S,I,$,K);if(ge){var Le=wr(ge,oe,K,z,H);if(Le)return{action:Le,interactable:oe,element:K}}}return{action:null,interactable:null,element:null}}function $m($,S,I,P,F){var z=[],H=[],W=P;function J(K){z.push(K),H.push(W)}for(;j.element(W);){z=[],H=[],F.interactables.forEachMatch(W,J);var oe=Aw($,S,I,z,H,P,F);if(oe.action&&!oe.interactable.options[oe.action.name].manualStart)return oe;W=Re(W)}return{action:null,interactable:null,element:null}}function ov($,S,I){var P=S.action,F=S.interactable,z=S.element;P=P||{name:null},$.interactable=F,$.element=z,yd($.prepared,P),$.rect=F&&P.name?F.getRect(z):null,Hn($,I),I.fire("autoStart:prepared",{interaction:$})}function Jc($,S,I,P){var F=$.options,z=F[I.name].max,H=F[I.name].maxPerElement,W=P.autoStart.maxInteractions,J=0,oe=0,K=0;if(!(z&&H&&W))return!1;for(var ge=0,Le=P.interactions.list;ge<Le.length;ge++){var He=Le[ge],Be=He.prepared.name;if(He.interacting()&&(++J>=W||He.interactable===$&&((oe+=Be===I.name?1:0)>=z||He.element===S&&(K++,Be===I.name&&K>=H))))return!1}return W>0}function Lw($,S){return j.number($)?(S.autoStart.maxInteractions=$,this):S.autoStart.maxInteractions}function Tm($,S,I){var P=I.autoStart.cursorElement;P&&P!==$&&(P.style.cursor=""),$.ownerDocument.documentElement.style.cursor=S,$.style.cursor=S,I.autoStart.cursorElement=S?$:null}function Hn($,S){var I=$.interactable,P=$.element,F=$.prepared;if($.pointerType==="mouse"&&I&&I.options.styleCursor){var z="";if(F.name){var H=I.options[F.name].cursorChecker;z=j.func(H)?H(F,I,P,$._interacting):S.actions.map[F.name].getCursor(F)}Tm($.element,z||"",S)}else S.autoStart.cursorElement&&Tm(S.autoStart.cursorElement,"",S)}var pa={id:"auto-start/base",before:["actions"],install:function($){var S=$.interactStatic,I=$.defaults;$.usePlugin(an),I.base.actionChecker=null,I.base.styleCursor=!0,Qe(I.perAction,{manualStart:!1,max:1/0,maxPerElement:1,allowFrom:null,ignoreFrom:null,mouseButtons:1}),S.maxInteractions=function(P){return Lw(P,$)},$.autoStart={maxInteractions:1/0,withinInteractionLimit:Jc,cursorElement:null}},listeners:{"interactions:down":function($,S){var I=$.interaction,P=$.pointer,F=$.event,z=$.eventTarget;I.interacting()||ov(I,$m(I,P,F,z,S),S)},"interactions:move":function($,S){(function(I,P){var F=I.interaction,z=I.pointer,H=I.event,W=I.eventTarget;F.pointerType!=="mouse"||F.pointerIsDown||F.interacting()||ov(F,$m(F,z,H,W,P),P)})($,S),(function(I,P){var F=I.interaction;if(F.pointerIsDown&&!F.interacting()&&F.pointerWasMoved&&F.prepared.name){P.fire("autoStart:before-start",I);var z=F.interactable,H=F.prepared.name;H&&z&&(z.options[H].manualStart||!Jc(z,F.element,F.prepared,P)?F.stop():(F.start(F.prepared,z,F.element),Hn(F,P)))}})($,S)},"interactions:stop":function($,S){var I=$.interaction,P=I.interactable;P&&P.options.styleCursor&&Tm(I.element,"",S)}},maxInteractions:Lw,withinInteractionLimit:Jc,validateAction:wr},av=pa,Fs={id:"auto-start/dragAxis",listeners:{"autoStart:before-start":function($,S){var I=$.interaction,P=$.eventTarget,F=$.dx,z=$.dy;if(I.prepared.name==="drag"){var H=Math.abs(F),W=Math.abs(z),J=I.interactable.options.drag,oe=J.startAxis,K=H>W?"x":H<W?"y":"xy";if(I.prepared.axis=J.lockAxis==="start"?K[0]:J.lockAxis,K!=="xy"&&oe!=="xy"&&oe!==K){I.prepared.name=null;for(var ge=P,Le=function(Be){if(Be!==I.interactable){var Xe=I.interactable.options.drag;if(!Xe.manualStart&&Be.testIgnoreAllow(Xe,ge,P)){var pt=Be.getAction(I.downPointer,I.downEvent,I,ge);if(pt&&pt.name==="drag"&&(function(st,It){if(!It)return!1;var ai=It.options.drag.startAxis;return st==="xy"||ai==="xy"||ai===st})(K,Be)&&av.validateAction(pt,Be,ge,P,S))return Be}}};j.element(ge);){var He=S.interactables.forEachMatch(ge,Le);if(He){I.prepared.name="drag",I.interactable=He,I.element=ge;break}ge=Re(ge)}}}}}};function Em($){var S=$.prepared&&$.prepared.name;if(!S)return null;var I=$.interactable.options;return I[S].hold||I[S].delay}var Q={id:"auto-start/hold",install:function($){var S=$.defaults;$.usePlugin(av),S.perAction.hold=0,S.perAction.delay=0},listeners:{"interactions:new":function($){$.interaction.autoStartHoldTimer=null},"autoStart:prepared":function($){var S=$.interaction,I=Em(S);I>0&&(S.autoStartHoldTimer=setTimeout(function(){S.start(S.prepared,S.interactable,S.element)},I))},"interactions:move":function($){var S=$.interaction,I=$.duplicate;S.autoStartHoldTimer&&S.pointerWasMoved&&!I&&(clearTimeout(S.autoStartHoldTimer),S.autoStartHoldTimer=null)},"autoStart:before-start":function($){var S=$.interaction;Em(S)>0&&(S.prepared.name=null)}},getHoldDuration:Em},Me=Q,Ge={id:"auto-start",install:function($){$.usePlugin(av),$.usePlugin(Me),$.usePlugin(Fs)}},Et=function($){return/^(always|never|auto)$/.test($)?(this.options.preventDefault=$,this):j.bool($)?(this.options.preventDefault=$?"always":"never",this):this.options.preventDefault};function bi($){var S=$.interaction,I=$.event;S.interactable&&S.interactable.checkAndPreventDefault(I)}var Yi={id:"core/interactablePreventDefault",install:function($){var S=$.Interactable;S.prototype.preventDefault=Et,S.prototype.checkAndPreventDefault=function(I){return(function(P,F,z){var H=P.options.preventDefault;if(H!=="never")if(H!=="always"){if(F.events.supportsPassive&&/^touch(start|move)$/.test(z.type)){var W=O(z.target).document,J=F.getDocOptions(W);if(!J||!J.events||J.events.passive!==!1)return}/^(mouse|pointer|touch)*(down|start)/i.test(z.type)||j.element(z.target)&&je(z.target,"input,select,textarea,[contenteditable=true],[contenteditable=true] *")||z.preventDefault()}else z.preventDefault()})(this,$,I)},$.interactions.docEvents.push({type:"dragstart",listener:function(I){for(var P=0,F=$.interactions.list;P<F.length;P++){var z=F[P];if(z.element&&(z.element===I.target||Ae(z.element,I.target)))return void z.interactable.checkAndPreventDefault(I)}}})},listeners:["down","move","up","cancel"].reduce(function($,S){return $["interactions:".concat(S)]=bi,$},{})};function _r($,S){if(S.phaselessTypes[$])return!0;for(var I in S.map)if($.indexOf(I)===0&&$.substr(I.length)in S.phases)return!0;return!1}function Cr($){var S={};for(var I in $){var P=$[I];j.plainObject(P)?S[I]=Cr(P):j.array(P)?S[I]=_m(P):S[I]=P}return S}var lv=(function(){function $(S){s(this,$),this.states=[],this.startOffset={left:0,right:0,top:0,bottom:0},this.startDelta=void 0,this.result=void 0,this.endResult=void 0,this.startEdges=void 0,this.edges=void 0,this.interaction=void 0,this.interaction=S,this.result=cv(),this.edges={left:!1,right:!1,top:!1,bottom:!1}}return a($,[{key:"start",value:function(S,I){var P,F,z=S.phase,H=this.interaction,W=(function(oe){var K=oe.interactable.options[oe.prepared.name],ge=K.modifiers;return ge&&ge.length?ge:["snap","snapSize","snapEdges","restrict","restrictEdges","restrictSize"].map(function(Le){var He=K[Le];return He&&He.enabled&&{options:He,methods:He._methods}}).filter(function(Le){return!!Le})})(H);this.prepareStates(W),this.startEdges=Qe({},H.edges),this.edges=Qe({},this.startEdges),this.startOffset=(P=H.rect,F=I,P?{left:F.x-P.left,top:F.y-P.top,right:P.right-F.x,bottom:P.bottom-F.y}:{left:0,top:0,right:0,bottom:0}),this.startDelta={x:0,y:0};var J=this.fillArg({phase:z,pageCoords:I,preEnd:!1});return this.result=cv(),this.startAll(J),this.result=this.setAll(J)}},{key:"fillArg",value:function(S){var I=this.interaction;return S.interaction=I,S.interactable=I.interactable,S.element=I.element,S.rect||(S.rect=I.rect),S.edges||(S.edges=this.startEdges),S.startOffset=this.startOffset,S}},{key:"startAll",value:function(S){for(var I=0,P=this.states;I<P.length;I++){var F=P[I];F.methods.start&&(S.state=F,F.methods.start(S))}}},{key:"setAll",value:function(S){var I=S.phase,P=S.preEnd,F=S.skipModifiers,z=S.rect,H=S.edges;S.coords=Qe({},S.pageCoords),S.rect=Qe({},z),S.edges=Qe({},H);for(var W=F?this.states.slice(F):this.states,J=cv(S.coords,S.rect),oe=0;oe<W.length;oe++){var K,ge=W[oe],Le=ge.options,He=Qe({},S.coords),Be=null;(K=ge.methods)!=null&&K.set&&this.shouldDo(Le,P,I)&&(S.state=ge,Be=ge.methods.set(S),Lo(S.edges,S.rect,{x:S.coords.x-He.x,y:S.coords.y-He.y})),J.eventProps.push(Be)}Qe(this.edges,S.edges),J.delta.x=S.coords.x-S.pageCoords.x,J.delta.y=S.coords.y-S.pageCoords.y,J.rectDelta.left=S.rect.left-z.left,J.rectDelta.right=S.rect.right-z.right,J.rectDelta.top=S.rect.top-z.top,J.rectDelta.bottom=S.rect.bottom-z.bottom;var Xe=this.result.coords,pt=this.result.rect;if(Xe&&pt){var st=J.rect.left!==pt.left||J.rect.right!==pt.right||J.rect.top!==pt.top||J.rect.bottom!==pt.bottom;J.changed=st||Xe.x!==J.coords.x||Xe.y!==J.coords.y}return J}},{key:"applyToInteraction",value:function(S){var I=this.interaction,P=S.phase,F=I.coords.cur,z=I.coords.start,H=this.result,W=this.startDelta,J=H.delta;P==="start"&&Qe(this.startDelta,H.delta);for(var oe=0,K=[[z,W],[F,J]];oe<K.length;oe++){var ge=K[oe],Le=ge[0],He=ge[1];Le.page.x+=He.x,Le.page.y+=He.y,Le.client.x+=He.x,Le.client.y+=He.y}var Be=this.result.rectDelta,Xe=S.rect||I.rect;Xe.left+=Be.left,Xe.right+=Be.right,Xe.top+=Be.top,Xe.bottom+=Be.bottom,Xe.width=Xe.right-Xe.left,Xe.height=Xe.bottom-Xe.top}},{key:"setAndApply",value:function(S){var I=this.interaction,P=S.phase,F=S.preEnd,z=S.skipModifiers,H=this.setAll(this.fillArg({preEnd:F,phase:P,pageCoords:S.modifiedCoords||I.coords.cur.page}));if(this.result=H,!H.changed&&(!z||z<this.states.length)&&I.interacting())return!1;if(S.modifiedCoords){var W=I.coords.cur.page,J={x:S.modifiedCoords.x-W.x,y:S.modifiedCoords.y-W.y};H.coords.x+=J.x,H.coords.y+=J.y,H.delta.x+=J.x,H.delta.y+=J.y}this.applyToInteraction(S)}},{key:"beforeEnd",value:function(S){var I=S.interaction,P=S.event,F=this.states;if(F&&F.length){for(var z=!1,H=0;H<F.length;H++){var W=F[H];S.state=W;var J=W.options,oe=W.methods,K=oe.beforeEnd&&oe.beforeEnd(S);if(K)return this.endResult=K,!1;z=z||!z&&this.shouldDo(J,!0,S.phase,!0)}z&&I.move({event:P,preEnd:!0})}}},{key:"stop",value:function(S){var I=S.interaction;if(this.states&&this.states.length){var P=Qe({states:this.states,interactable:I.interactable,element:I.element,rect:null},S);this.fillArg(P);for(var F=0,z=this.states;F<z.length;F++){var H=z[F];P.state=H,H.methods.stop&&H.methods.stop(P)}this.states=null,this.endResult=null}}},{key:"prepareStates",value:function(S){this.states=[];for(var I=0;I<S.length;I++){var P=S[I],F=P.options,z=P.methods,H=P.name;this.states.push({options:F,methods:z,index:I,name:H})}return this.states}},{key:"restoreInteractionCoords",value:function(S){var I=S.interaction,P=I.coords,F=I.rect,z=I.modification;if(z.result){for(var H=z.startDelta,W=z.result,J=W.delta,oe=W.rectDelta,K=0,ge=[[P.start,H],[P.cur,J]];K<ge.length;K++){var Le=ge[K],He=Le[0],Be=Le[1];He.page.x-=Be.x,He.page.y-=Be.y,He.client.x-=Be.x,He.client.y-=Be.y}F.left-=oe.left,F.right-=oe.right,F.top-=oe.top,F.bottom-=oe.bottom}}},{key:"shouldDo",value:function(S,I,P,F){return!(!S||S.enabled===!1||F&&!S.endOnly||S.endOnly&&!I||P==="start"&&!S.setStart)}},{key:"copyFrom",value:function(S){this.startOffset=S.startOffset,this.startDelta=S.startDelta,this.startEdges=S.startEdges,this.edges=S.edges,this.states=S.states.map(function(I){return Cr(I)}),this.result=cv(Qe({},S.result.coords),Qe({},S.result.rect))}},{key:"destroy",value:function(){for(var S in this)this[S]=null}}]),$})();function cv($,S){return{rect:S,coords:$,delta:{x:0,y:0},rectDelta:{left:0,right:0,top:0,bottom:0},eventProps:[],changed:!0}}function ql($,S){var I=$.defaults,P={start:$.start,set:$.set,beforeEnd:$.beforeEnd,stop:$.stop},F=function(z){var H=z||{};for(var W in H.enabled=H.enabled!==!1,I)W in H||(H[W]=I[W]);var J={options:H,methods:P,name:S,enable:function(){return H.enabled=!0,J},disable:function(){return H.enabled=!1,J}};return J};return S&&typeof S=="string"&&(F._defaults=I,F._methods=P),F}function Yc($){var S=$.iEvent,I=$.interaction.modification.result;I&&(S.modifiers=I.eventProps)}var gD={id:"modifiers/base",before:["actions"],install:function($){$.defaults.perAction.modifiers=[]},listeners:{"interactions:new":function($){var S=$.interaction;S.modification=new lv(S)},"interactions:before-action-start":function($){var S=$.interaction,I=$.interaction.modification;I.start($,S.coords.start.page),S.edges=I.edges,I.applyToInteraction($)},"interactions:before-action-move":function($){var S=$.interaction,I=S.modification,P=I.setAndApply($);return S.edges=I.edges,P},"interactions:before-action-end":function($){var S=$.interaction,I=S.modification,P=I.beforeEnd($);return S.edges=I.startEdges,P},"interactions:action-start":Yc,"interactions:action-move":Yc,"interactions:action-end":Yc,"interactions:after-action-start":function($){return $.interaction.modification.restoreInteractionCoords($)},"interactions:after-action-move":function($){return $.interaction.modification.restoreInteractionCoords($)},"interactions:stop":function($){return $.interaction.modification.stop($)}}},Rw=gD,Oi={base:{preventDefault:"auto",deltaSource:"page"},perAction:{enabled:!1,origin:{x:0,y:0}},actions:{}},Ow=(function($){c(I,$);var S=g(I);function I(P,F,z,H,W,J,oe){var K;s(this,I),(K=S.call(this,P)).relatedTarget=null,K.screenX=void 0,K.screenY=void 0,K.button=void 0,K.buttons=void 0,K.ctrlKey=void 0,K.shiftKey=void 0,K.altKey=void 0,K.metaKey=void 0,K.page=void 0,K.client=void 0,K.delta=void 0,K.rect=void 0,K.x0=void 0,K.y0=void 0,K.t0=void 0,K.dt=void 0,K.duration=void 0,K.clientX0=void 0,K.clientY0=void 0,K.velocity=void 0,K.speed=void 0,K.swipe=void 0,K.axes=void 0,K.preEnd=void 0,W=W||P.element;var ge=P.interactable,Le=(ge&&ge.options||Oi).deltaSource,He=dd(ge,W,z),Be=H==="start",Xe=H==="end",pt=Be?y(K):P.prevEvent,st=Be?P.coords.start:Xe?{page:pt.page,client:pt.client,timeStamp:P.coords.cur.timeStamp}:P.coords.cur;return K.page=Qe({},st.page),K.client=Qe({},st.client),K.rect=Qe({},P.rect),K.timeStamp=st.timeStamp,Xe||(K.page.x-=He.x,K.page.y-=He.y,K.client.x-=He.x,K.client.y-=He.y),K.ctrlKey=F.ctrlKey,K.altKey=F.altKey,K.shiftKey=F.shiftKey,K.metaKey=F.metaKey,K.button=F.button,K.buttons=F.buttons,K.target=W,K.currentTarget=W,K.preEnd=J,K.type=oe||z+(H||""),K.interactable=ge,K.t0=Be?P.pointers[P.pointers.length-1].downTime:pt.t0,K.x0=P.coords.start.page.x-He.x,K.y0=P.coords.start.page.y-He.y,K.clientX0=P.coords.start.client.x-He.x,K.clientY0=P.coords.start.client.y-He.y,K.delta=Be||Xe?{x:0,y:0}:{x:K[Le].x-pt[Le].x,y:K[Le].y-pt[Le].y},K.dt=P.coords.delta.timeStamp,K.duration=K.timeStamp-K.t0,K.velocity=Qe({},P.coords.velocity[Le]),K.speed=hd(K.velocity.x,K.velocity.y),K.swipe=Xe||H==="inertiastart"?K.getSwipe():null,K}return a(I,[{key:"getSwipe",value:function(){var P=this._interaction;if(P.prevEvent.speed<600||this.timeStamp-P.prevEvent.timeStamp>150)return null;var F=180*Math.atan2(P.prevEvent.velocityY,P.prevEvent.velocityX)/Math.PI;F<0&&(F+=360);var z=112.5<=F&&F<247.5,H=202.5<=F&&F<337.5;return{up:H,down:!H&&22.5<=F&&F<157.5,left:z,right:!z&&(292.5<=F||F<67.5),angle:F,speed:P.prevEvent.speed,velocity:{x:P.prevEvent.velocityX,y:P.prevEvent.velocityY}}}},{key:"preventDefault",value:function(){}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}}]),I})(bm);Object.defineProperties(Ow.prototype,{pageX:{get:function(){return this.page.x},set:function($){this.page.x=$}},pageY:{get:function(){return this.page.y},set:function($){this.page.y=$}},clientX:{get:function(){return this.client.x},set:function($){this.client.x=$}},clientY:{get:function(){return this.client.y},set:function($){this.client.y=$}},dx:{get:function(){return this.delta.x},set:function($){this.delta.x=$}},dy:{get:function(){return this.delta.y},set:function($){this.delta.y=$}},velocityX:{get:function(){return this.velocity.x},set:function($){this.velocity.x=$}},velocityY:{get:function(){return this.velocity.y},set:function($){this.velocity.y=$}}});var U2=a(function $(S,I,P,F,z){s(this,$),this.id=void 0,this.pointer=void 0,this.event=void 0,this.downTime=void 0,this.downTarget=void 0,this.id=S,this.pointer=I,this.event=P,this.downTime=F,this.downTarget=z}),iT=(function($){return $.interactable="",$.element="",$.prepared="",$.pointerIsDown="",$.pointerWasMoved="",$._proxy="",$})({}),rT=(function($){return $.start="",$.move="",$.end="",$.stop="",$.interacting="",$})({}),B2=0,G2=(function(){function $(S){var I=this,P=S.pointerType,F=S.scopeFire;s(this,$),this.interactable=null,this.element=null,this.rect=null,this._rects=void 0,this.edges=null,this._scopeFire=void 0,this.prepared={name:null,axis:null,edges:null},this.pointerType=void 0,this.pointers=[],this.downEvent=null,this.downPointer={},this._latestPointer={pointer:null,event:null,eventTarget:null},this.prevEvent=null,this.pointerIsDown=!1,this.pointerWasMoved=!1,this._interacting=!1,this._ending=!1,this._stopped=!0,this._proxy=void 0,this.simulation=null,this.doMove=md(function(K){this.move(K)},"The interaction.doMove() method has been renamed to interaction.move()"),this.coords={start:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},prev:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},cur:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},delta:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},velocity:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0}},this._id=B2++,this._scopeFire=F,this.pointerType=P;var z=this;this._proxy={};var H=function(K){Object.defineProperty(I._proxy,K,{get:function(){return z[K]}})};for(var W in iT)H(W);var J=function(K){Object.defineProperty(I._proxy,K,{value:function(){return z[K].apply(z,arguments)}})};for(var oe in rT)J(oe);this._scopeFire("interactions:new",{interaction:this})}return a($,[{key:"pointerMoveTolerance",get:function(){return 1}},{key:"pointerDown",value:function(S,I,P){var F=this.updatePointer(S,I,P,!0),z=this.pointers[F];this._scopeFire("interactions:down",{pointer:S,event:I,eventTarget:P,pointerIndex:F,pointerInfo:z,type:"down",interaction:this})}},{key:"start",value:function(S,I,P){return!(this.interacting()||!this.pointerIsDown||this.pointers.length<(S.name==="gesture"?2:1)||!I.options[S.name].enabled)&&(yd(this.prepared,S),this.interactable=I,this.element=P,this.rect=I.getRect(P),this.edges=this.prepared.edges?Qe({},this.prepared.edges):{left:!0,right:!0,top:!0,bottom:!0},this._stopped=!1,this._interacting=this._doPhase({interaction:this,event:this.downEvent,phase:"start"})&&!this._stopped,this._interacting)}},{key:"pointerMove",value:function(S,I,P){this.simulation||this.modification&&this.modification.endResult||this.updatePointer(S,I,P,!1);var F,z,H=this.coords.cur.page.x===this.coords.prev.page.x&&this.coords.cur.page.y===this.coords.prev.page.y&&this.coords.cur.client.x===this.coords.prev.client.x&&this.coords.cur.client.y===this.coords.prev.client.y;this.pointerIsDown&&!this.pointerWasMoved&&(F=this.coords.cur.client.x-this.coords.start.client.x,z=this.coords.cur.client.y-this.coords.start.client.y,this.pointerWasMoved=hd(F,z)>this.pointerMoveTolerance);var W,J,oe,K=this.getPointerIndex(S),ge={pointer:S,pointerIndex:K,pointerInfo:this.pointers[K],event:I,type:"move",eventTarget:P,dx:F,dy:z,duplicate:H,interaction:this};H||(W=this.coords.velocity,J=this.coords.delta,oe=Math.max(J.timeStamp/1e3,.001),W.page.x=J.page.x/oe,W.page.y=J.page.y/oe,W.client.x=J.client.x/oe,W.client.y=J.client.y/oe,W.timeStamp=oe),this._scopeFire("interactions:move",ge),H||this.simulation||(this.interacting()&&(ge.type=null,this.move(ge)),this.pointerWasMoved&&Gn(this.coords.prev,this.coords.cur))}},{key:"move",value:function(S){S&&S.event||vm(this.coords.delta),(S=Qe({pointer:this._latestPointer.pointer,event:this._latestPointer.event,eventTarget:this._latestPointer.eventTarget,interaction:this},S||{})).phase="move",this._doPhase(S)}},{key:"pointerUp",value:function(S,I,P,F){var z=this.getPointerIndex(S);z===-1&&(z=this.updatePointer(S,I,P,!1));var H=/cancel$/i.test(I.type)?"cancel":"up";this._scopeFire("interactions:".concat(H),{pointer:S,pointerIndex:z,pointerInfo:this.pointers[z],event:I,eventTarget:P,type:H,curEventTarget:F,interaction:this}),this.simulation||this.end(I),this.removePointer(S,I)}},{key:"documentBlur",value:function(S){this.end(S),this._scopeFire("interactions:blur",{event:S,type:"blur",interaction:this})}},{key:"end",value:function(S){var I;this._ending=!0,S=S||this._latestPointer.event,this.interacting()&&(I=this._doPhase({event:S,interaction:this,phase:"end"})),this._ending=!1,I===!0&&this.stop()}},{key:"currentAction",value:function(){return this._interacting?this.prepared.name:null}},{key:"interacting",value:function(){return this._interacting}},{key:"stop",value:function(){this._scopeFire("interactions:stop",{interaction:this}),this.interactable=this.element=null,this._interacting=!1,this._stopped=!0,this.prepared.name=this.prevEvent=null}},{key:"getPointerIndex",value:function(S){var I=pd(S);return this.pointerType==="mouse"||this.pointerType==="pen"?this.pointers.length-1:qc(this.pointers,function(P){return P.id===I})}},{key:"getPointerInfo",value:function(S){return this.pointers[this.getPointerIndex(S)]}},{key:"updatePointer",value:function(S,I,P,F){var z,H,W,J=pd(S),oe=this.getPointerIndex(S),K=this.pointers[oe];return F=F!==!1&&(F||/(down|start)$/i.test(I.type)),K?K.pointer=S:(K=new U2(J,S,I,null,null),oe=this.pointers.length,this.pointers.push(K)),Kg(this.coords.cur,this.pointers.map(function(ge){return ge.pointer}),this._now()),z=this.coords.delta,H=this.coords.prev,W=this.coords.cur,z.page.x=W.page.x-H.page.x,z.page.y=W.page.y-H.page.y,z.client.x=W.client.x-H.client.x,z.client.y=W.client.y-H.client.y,z.timeStamp=W.timeStamp-H.timeStamp,F&&(this.pointerIsDown=!0,K.downTime=this.coords.cur.timeStamp,K.downTarget=P,Qa(this.downPointer,S),this.interacting()||(Gn(this.coords.start,this.coords.cur),Gn(this.coords.prev,this.coords.cur),this.downEvent=I,this.pointerWasMoved=!1)),this._updateLatestPointer(S,I,P),this._scopeFire("interactions:update-pointer",{pointer:S,event:I,eventTarget:P,down:F,pointerInfo:K,pointerIndex:oe,interaction:this}),oe}},{key:"removePointer",value:function(S,I){var P=this.getPointerIndex(S);if(P!==-1){var F=this.pointers[P];this._scopeFire("interactions:remove-pointer",{pointer:S,event:I,eventTarget:null,pointerIndex:P,pointerInfo:F,interaction:this}),this.pointers.splice(P,1),this.pointerIsDown=!1}}},{key:"_updateLatestPointer",value:function(S,I,P){this._latestPointer.pointer=S,this._latestPointer.event=I,this._latestPointer.eventTarget=P}},{key:"destroy",value:function(){this._latestPointer.pointer=null,this._latestPointer.event=null,this._latestPointer.eventTarget=null}},{key:"_createPreparedEvent",value:function(S,I,P,F){return new Ow(this,S,this.prepared.name,I,this.element,P,F)}},{key:"_fireEvent",value:function(S){var I;(I=this.interactable)==null||I.fire(S),(!this.prevEvent||S.timeStamp>=this.prevEvent.timeStamp)&&(this.prevEvent=S)}},{key:"_doPhase",value:function(S){var I=S.event,P=S.phase,F=S.preEnd,z=S.type,H=this.rect;if(H&&P==="move"&&(Lo(this.edges,H,this.coords.delta[this.interactable.options.deltaSource]),H.width=H.right-H.left,H.height=H.bottom-H.top),this._scopeFire("interactions:before-action-".concat(P),S)===!1)return!1;var W=S.iEvent=this._createPreparedEvent(I,P,F,z);return this._scopeFire("interactions:action-".concat(P),S),P==="start"&&(this.prevEvent=W),this._fireEvent(W),this._scopeFire("interactions:after-action-".concat(P),S),!0}},{key:"_now",value:function(){return Date.now()}}]),$})();function Fw($){uv($.interaction)}function uv($){if(!(function(I){return!(!I.offset.pending.x&&!I.offset.pending.y)})($))return!1;var S=$.offset.pending;return Hl($.coords.cur,S),Hl($.coords.delta,S),Lo($.edges,$.rect,S),S.x=0,S.y=0,!0}function gd($){var S=$.x,I=$.y;this.offset.pending.x+=S,this.offset.pending.y+=I,this.offset.total.x+=S,this.offset.total.y+=I}function Hl($,S){var I=$.page,P=$.client,F=S.x,z=S.y;I.x+=F,I.y+=z,P.x+=F,P.y+=z}rT.offsetBy="";var vd={id:"offset",before:["modifiers","pointer-events","actions","inertia"],install:function($){$.Interaction.prototype.offsetBy=gd},listeners:{"interactions:new":function($){$.interaction.offset={total:{x:0,y:0},pending:{x:0,y:0}}},"interactions:update-pointer":function($){return(function(S){S.pointerIsDown&&(Hl(S.coords.cur,S.offset.total),S.offset.pending.x=0,S.offset.pending.y=0)})($.interaction)},"interactions:before-action-start":Fw,"interactions:before-action-move":Fw,"interactions:before-action-end":function($){var S=$.interaction;if(uv(S))return S.move({offset:!0}),S.end(),!1},"interactions:stop":function($){var S=$.interaction;S.offset.total.x=0,S.offset.total.y=0,S.offset.pending.x=0,S.offset.pending.y=0}}},Im=vd,dv=(function(){function $(S){s(this,$),this.active=!1,this.isModified=!1,this.smoothEnd=!1,this.allowResume=!1,this.modification=void 0,this.modifierCount=0,this.modifierArg=void 0,this.startCoords=void 0,this.t0=0,this.v0=0,this.te=0,this.targetOffset=void 0,this.modifiedOffset=void 0,this.currentOffset=void 0,this.lambda_v0=0,this.one_ve_v0=0,this.timeout=void 0,this.interaction=void 0,this.interaction=S}return a($,[{key:"start",value:function(S){var I=this.interaction,P=rl(I);if(!P||!P.enabled)return!1;var F=I.coords.velocity.client,z=hd(F.x,F.y),H=this.modification||(this.modification=new lv(I));if(H.copyFrom(I.modification),this.t0=I._now(),this.allowResume=P.allowResume,this.v0=z,this.currentOffset={x:0,y:0},this.startCoords=I.coords.cur.page,this.modifierArg=H.fillArg({pageCoords:this.startCoords,preEnd:!0,phase:"inertiastart"}),this.t0-I.coords.cur.timeStamp<50&&z>P.minSpeed&&z>P.endSpeed)this.startInertia();else{if(H.result=H.setAll(this.modifierArg),!H.result.changed)return!1;this.startSmoothEnd()}return I.modification.result.rect=null,I.offsetBy(this.targetOffset),I._doPhase({interaction:I,event:S,phase:"inertiastart"}),I.offsetBy({x:-this.targetOffset.x,y:-this.targetOffset.y}),I.modification.result.rect=null,this.active=!0,I.simulation=this,!0}},{key:"startInertia",value:function(){var S=this,I=this.interaction.coords.velocity.client,P=rl(this.interaction),F=P.resistance,z=-Math.log(P.endSpeed/this.v0)/F;this.targetOffset={x:(I.x-z)/F,y:(I.y-z)/F},this.te=z,this.lambda_v0=F/this.v0,this.one_ve_v0=1-P.endSpeed/this.v0;var H=this.modification,W=this.modifierArg;W.pageCoords={x:this.startCoords.x+this.targetOffset.x,y:this.startCoords.y+this.targetOffset.y},H.result=H.setAll(W),H.result.changed&&(this.isModified=!0,this.modifiedOffset={x:this.targetOffset.x+H.result.delta.x,y:this.targetOffset.y+H.result.delta.y}),this.onNextFrame(function(){return S.inertiaTick()})}},{key:"startSmoothEnd",value:function(){var S=this;this.smoothEnd=!0,this.isModified=!0,this.targetOffset={x:this.modification.result.delta.x,y:this.modification.result.delta.y},this.onNextFrame(function(){return S.smoothEndTick()})}},{key:"onNextFrame",value:function(S){var I=this;this.timeout=il.request(function(){I.active&&S()})}},{key:"inertiaTick",value:function(){var S,I,P,F,z,H,W,J=this,oe=this.interaction,K=rl(oe).resistance,ge=(oe._now()-this.t0)/1e3;if(ge<this.te){var Le,He=1-(Math.exp(-K*ge)-this.lambda_v0)/this.one_ve_v0;this.isModified?(S=0,I=0,P=this.targetOffset.x,F=this.targetOffset.y,z=this.modifiedOffset.x,H=this.modifiedOffset.y,Le={x:nT(W=He,S,P,z),y:nT(W,I,F,H)}):Le={x:this.targetOffset.x*He,y:this.targetOffset.y*He};var Be={x:Le.x-this.currentOffset.x,y:Le.y-this.currentOffset.y};this.currentOffset.x+=Be.x,this.currentOffset.y+=Be.y,oe.offsetBy(Be),oe.move(),this.onNextFrame(function(){return J.inertiaTick()})}else oe.offsetBy({x:this.modifiedOffset.x-this.currentOffset.x,y:this.modifiedOffset.y-this.currentOffset.y}),this.end()}},{key:"smoothEndTick",value:function(){var S=this,I=this.interaction,P=I._now()-this.t0,F=rl(I).smoothEndDuration;if(P<F){var z={x:Cm(P,0,this.targetOffset.x,F),y:Cm(P,0,this.targetOffset.y,F)},H={x:z.x-this.currentOffset.x,y:z.y-this.currentOffset.y};this.currentOffset.x+=H.x,this.currentOffset.y+=H.y,I.offsetBy(H),I.move({skipModifiers:this.modifierCount}),this.onNextFrame(function(){return S.smoothEndTick()})}else I.offsetBy({x:this.targetOffset.x-this.currentOffset.x,y:this.targetOffset.y-this.currentOffset.y}),this.end()}},{key:"resume",value:function(S){var I=S.pointer,P=S.event,F=S.eventTarget,z=this.interaction;z.offsetBy({x:-this.currentOffset.x,y:-this.currentOffset.y}),z.updatePointer(I,P,F,!0),z._doPhase({interaction:z,event:P,phase:"resume"}),Gn(z.coords.prev,z.coords.cur),this.stop()}},{key:"end",value:function(){this.interaction.move(),this.interaction.end(),this.stop()}},{key:"stop",value:function(){this.active=this.smoothEnd=!1,this.interaction.simulation=null,il.cancel(this.timeout)}}]),$})();function rl($){var S=$.interactable,I=$.prepared;return S&&S.options&&I.name&&S.options[I.name].inertia}var vD={id:"inertia",before:["modifiers","actions"],install:function($){var S=$.defaults;$.usePlugin(Im),$.usePlugin(Rw),$.actions.phases.inertiastart=!0,$.actions.phases.resume=!0,S.perAction.inertia={enabled:!1,resistance:10,minSpeed:100,endSpeed:10,allowResume:!0,smoothEndDuration:300}},listeners:{"interactions:new":function($){var S=$.interaction;S.inertia=new dv(S)},"interactions:before-action-end":function($){var S=$.interaction,I=$.event;return(!S._interacting||S.simulation||!S.inertia.start(I))&&null},"interactions:down":function($){var S=$.interaction,I=$.eventTarget,P=S.inertia;if(P.active)for(var F=I;j.element(F);){if(F===S.element){P.resume($);break}F=Re(F)}},"interactions:stop":function($){var S=$.interaction.inertia;S.active&&S.stop()},"interactions:before-action-resume":function($){var S=$.interaction.modification;S.stop($),S.start($,$.interaction.coords.cur.page),S.applyToInteraction($)},"interactions:before-action-inertiastart":function($){return $.interaction.modification.setAndApply($)},"interactions:action-resume":Yc,"interactions:action-inertiastart":Yc,"interactions:after-action-inertiastart":function($){return $.interaction.modification.restoreInteractionCoords($)},"interactions:after-action-resume":function($){return $.interaction.modification.restoreInteractionCoords($)}}};function nT($,S,I,P){var F=1-$;return F*F*S+2*F*$*I+$*$*P}function Cm($,S,I,P){return-I*($/=P)*($-2)+S}var bD=vD;function sT($,S){for(var I=0;I<S.length;I++){var P=S[I];if($.immediatePropagationStopped)break;P($)}}var hv=(function(){function $(S){s(this,$),this.options=void 0,this.types={},this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.global=void 0,this.options=Qe({},S||{})}return a($,[{key:"fire",value:function(S){var I,P=this.global;(I=this.types[S.type])&&sT(S,I),!S.propagationStopped&&P&&(I=P[S.type])&&sT(S,I)}},{key:"on",value:function(S,I){var P=jl(S,I);for(S in P)this.types[S]=wm(this.types[S]||[],P[S])}},{key:"off",value:function(S,I){var P=jl(S,I);for(S in P){var F=this.types[S];if(F&&F.length)for(var z=0,H=P[S];z<H.length;z++){var W=H[z],J=F.indexOf(W);J!==-1&&F.splice(J,1)}}}},{key:"getRect",value:function(S){return null}}]),$})(),q2=(function(){function $(S){s(this,$),this.currentTarget=void 0,this.originalEvent=void 0,this.type=void 0,this.originalEvent=S,Qa(this,S)}return a($,[{key:"preventOriginalDefault",value:function(){this.originalEvent.preventDefault()}},{key:"stopPropagation",value:function(){this.originalEvent.stopPropagation()}},{key:"stopImmediatePropagation",value:function(){this.originalEvent.stopImmediatePropagation()}}]),$})();function pv($){return j.object($)?{capture:!!$.capture,passive:!!$.passive}:{capture:!!$,passive:!1}}function bd($,S){return $===S||(typeof $=="boolean"?!!S.capture===$&&!S.passive:!!$.capture==!!S.capture&&!!$.passive==!!S.passive)}var fv={id:"events",install:function($){var S,I=[],P={},F=[],z={add:H,remove:W,addDelegate:function(K,ge,Le,He,Be){var Xe=pv(Be);if(!P[Le]){P[Le]=[];for(var pt=0;pt<F.length;pt++){var st=F[pt];H(st,Le,J),H(st,Le,oe,!0)}}var It=P[Le],ai=Hc(It,function(Zt){return Zt.selector===K&&Zt.context===ge});ai||(ai={selector:K,context:ge,listeners:[]},It.push(ai)),ai.listeners.push({func:He,options:Xe})},removeDelegate:function(K,ge,Le,He,Be){var Xe,pt=pv(Be),st=P[Le],It=!1;if(st)for(Xe=st.length-1;Xe>=0;Xe--){var ai=st[Xe];if(ai.selector===K&&ai.context===ge){for(var Zt=ai.listeners,Dt=Zt.length-1;Dt>=0;Dt--){var li=Zt[Dt];if(li.func===He&&bd(li.options,pt)){Zt.splice(Dt,1),Zt.length||(st.splice(Xe,1),W(ge,Le,J),W(ge,Le,oe,!0)),It=!0;break}}if(It)break}}},delegateListener:J,delegateUseCapture:oe,delegatedEvents:P,documents:F,targets:I,supportsOptions:!1,supportsPassive:!1};function H(K,ge,Le,He){if(K.addEventListener){var Be=pv(He),Xe=Hc(I,function(pt){return pt.eventTarget===K});Xe||(Xe={eventTarget:K,events:{}},I.push(Xe)),Xe.events[ge]||(Xe.events[ge]=[]),Hc(Xe.events[ge],function(pt){return pt.func===Le&&bd(pt.options,Be)})||(K.addEventListener(ge,Le,z.supportsOptions?Be:Be.capture),Xe.events[ge].push({func:Le,options:Be}))}}function W(K,ge,Le,He){if(K.addEventListener&&K.removeEventListener){var Be=qc(I,function(ms){return ms.eventTarget===K}),Xe=I[Be];if(Xe&&Xe.events)if(ge!=="all"){var pt=!1,st=Xe.events[ge];if(st){if(Le==="all"){for(var It=st.length-1;It>=0;It--){var ai=st[It];W(K,ge,ai.func,ai.options)}return}for(var Zt=pv(He),Dt=0;Dt<st.length;Dt++){var li=st[Dt];if(li.func===Le&&bd(li.options,Zt)){K.removeEventListener(ge,Le,z.supportsOptions?Zt:Zt.capture),st.splice(Dt,1),st.length===0&&(delete Xe.events[ge],pt=!0);break}}}pt&&!Object.keys(Xe.events).length&&I.splice(Be,1)}else for(ge in Xe.events)Xe.events.hasOwnProperty(ge)&&W(K,ge,"all")}}function J(K,ge){for(var Le=pv(ge),He=new q2(K),Be=P[K.type],Xe=tv(K)[0],pt=Xe;j.element(pt);){for(var st=0;st<Be.length;st++){var It=Be[st],ai=It.selector,Zt=It.context;if(je(pt,ai)&&Ae(Zt,Xe)&&Ae(Zt,pt)){var Dt=It.listeners;He.currentTarget=pt;for(var li=0;li<Dt.length;li++){var ms=Dt[li];bd(ms.options,Le)&&ms.func(He)}}}pt=Re(pt)}}function oe(K){return J(K,!0)}return(S=$.document)==null||S.createElement("div").addEventListener("test",null,{get capture(){return z.supportsOptions=!0},get passive(){return z.supportsPassive=!0}}),$.events=z,z}},wd={methodOrder:["simulationResume","mouseOrPen","hasPointer","idle"],search:function($){for(var S=0,I=wd.methodOrder;S<I.length;S++){var P=I[S],F=wd[P]($);if(F)return F}return null},simulationResume:function($){var S=$.pointerType,I=$.eventType,P=$.eventTarget,F=$.scope;if(!/down|start/i.test(I))return null;for(var z=0,H=F.interactions.list;z<H.length;z++){var W=H[z],J=P;if(W.simulation&&W.simulation.allowResume&&W.pointerType===S)for(;J;){if(J===W.element)return W;J=Re(J)}}return null},mouseOrPen:function($){var S,I=$.pointerId,P=$.pointerType,F=$.eventType,z=$.scope;if(P!=="mouse"&&P!=="pen")return null;for(var H=0,W=z.interactions.list;H<W.length;H++){var J=W[H];if(J.pointerType===P){if(J.simulation&&!mv(J,I))continue;if(J.interacting())return J;S||(S=J)}}if(S)return S;for(var oe=0,K=z.interactions.list;oe<K.length;oe++){var ge=K[oe];if(!(ge.pointerType!==P||/down/i.test(F)&&ge.simulation))return ge}return null},hasPointer:function($){for(var S=$.pointerId,I=0,P=$.scope.interactions.list;I<P.length;I++){var F=P[I];if(mv(F,S))return F}return null},idle:function($){for(var S=$.pointerType,I=0,P=$.scope.interactions.list;I<P.length;I++){var F=P[I];if(F.pointers.length===1){var z=F.interactable;if(z&&(!z.options.gesture||!z.options.gesture.enabled))continue}else if(F.pointers.length>=2)continue;if(!F.interacting()&&S===F.pointerType)return F}return null}};function mv($,S){return $.pointers.some(function(I){return I.id===S})}var wD=wd,oT=["pointerDown","pointerMove","pointerUp","updatePointer","removePointer","windowBlur"];function Nw($,S){return function(I){var P=S.interactions.list,F=ev(I),z=tv(I),H=z[0],W=z[1],J=[];if(/^touch/.test(I.type)){S.prevTouchTime=S.now();for(var oe=0,K=I.changedTouches;oe<K.length;oe++){var ge=K[oe],Le={pointer:ge,pointerId:pd(ge),pointerType:F,eventType:I.type,eventTarget:H,curEventTarget:W,scope:S},He=yv(Le);J.push([Le.pointer,Le.eventTarget,Le.curEventTarget,He])}}else{var Be=!1;if(!Fe.supportsPointerEvent&&/mouse/.test(I.type)){for(var Xe=0;Xe<P.length&&!Be;Xe++)Be=P[Xe].pointerType!=="mouse"&&P[Xe].pointerIsDown;Be=Be||S.now()-S.prevTouchTime<500||I.timeStamp===0}if(!Be){var pt={pointer:I,pointerId:pd(I),pointerType:F,eventType:I.type,curEventTarget:W,eventTarget:H,scope:S},st=yv(pt);J.push([pt.pointer,pt.eventTarget,pt.curEventTarget,st])}}for(var It=0;It<J.length;It++){var ai=J[It],Zt=ai[0],Dt=ai[1],li=ai[2];ai[3][$](Zt,I,Dt,li)}}}function yv($){var S=$.pointerType,I=$.scope,P={interaction:wD.search($),searchDetails:$};return I.fire("interactions:find",P),P.interaction||I.interactions.new({pointerType:S})}function gv($,S){var I=$.doc,P=$.scope,F=$.options,z=P.interactions.docEvents,H=P.events,W=H[S];for(var J in P.browser.isIOS&&!F.events&&(F.events={passive:!1}),H.delegatedEvents)W(I,J,H.delegateListener),W(I,J,H.delegateUseCapture,!0);for(var oe=F&&F.events,K=0;K<z.length;K++){var ge=z[K];W(I,ge.type,ge.listener,oe)}}var H2={id:"core/interactions",install:function($){for(var S={},I=0;I<oT.length;I++){var P=oT[I];S[P]=Nw(P,$)}var F,z=Fe.pEventTypes;function H(){for(var W=0,J=$.interactions.list;W<J.length;W++){var oe=J[W];if(oe.pointerIsDown&&oe.pointerType==="touch"&&!oe._interacting)for(var K=function(){var He=Le[ge];$.documents.some(function(Be){return Ae(Be.doc,He.downTarget)})||oe.removePointer(He.pointer,He.event)},ge=0,Le=oe.pointers;ge<Le.length;ge++)K()}}(F=re.PointerEvent?[{type:z.down,listener:H},{type:z.down,listener:S.pointerDown},{type:z.move,listener:S.pointerMove},{type:z.up,listener:S.pointerUp},{type:z.cancel,listener:S.pointerUp}]:[{type:"mousedown",listener:S.pointerDown},{type:"mousemove",listener:S.pointerMove},{type:"mouseup",listener:S.pointerUp},{type:"touchstart",listener:H},{type:"touchstart",listener:S.pointerDown},{type:"touchmove",listener:S.pointerMove},{type:"touchend",listener:S.pointerUp},{type:"touchcancel",listener:S.pointerUp}]).push({type:"blur",listener:function(W){for(var J=0,oe=$.interactions.list;J<oe.length;J++)oe[J].documentBlur(W)}}),$.prevTouchTime=0,$.Interaction=(function(W){c(oe,W);var J=g(oe);function oe(){return s(this,oe),J.apply(this,arguments)}return a(oe,[{key:"pointerMoveTolerance",get:function(){return $.interactions.pointerMoveTolerance},set:function(K){$.interactions.pointerMoveTolerance=K}},{key:"_now",value:function(){return $.now()}}]),oe})(G2),$.interactions={list:[],new:function(W){W.scopeFire=function(oe,K){return $.fire(oe,K)};var J=new $.Interaction(W);return $.interactions.list.push(J),J},listeners:S,docEvents:F,pointerMoveTolerance:1},$.usePlugin(Yi)},listeners:{"scope:add-document":function($){return gv($,"add")},"scope:remove-document":function($){return gv($,"remove")},"interactable:unset":function($,S){for(var I=$.interactable,P=S.interactions.list.length-1;P>=0;P--){var F=S.interactions.list[P];F.interactable===I&&(F.stop(),S.fire("interactions:destroy",{interaction:F}),F.destroy(),S.interactions.list.length>2&&S.interactions.list.splice(P,1))}}},onDocSignal:gv,doOnInteractions:Nw,methodNames:oT},_d=H2,Wl=(function($){return $[$.On=0]="On",$[$.Off=1]="Off",$})(Wl||{}),Dw=(function(){function $(S,I,P,F){s(this,$),this.target=void 0,this.options=void 0,this._actions=void 0,this.events=new hv,this._context=void 0,this._win=void 0,this._doc=void 0,this._scopeEvents=void 0,this._actions=I.actions,this.target=S,this._context=I.context||P,this._win=O(ui(S)?this._context:S),this._doc=this._win.document,this._scopeEvents=F,this.set(I)}return a($,[{key:"_defaults",get:function(){return{base:{},perAction:{},actions:{}}}},{key:"setOnEvents",value:function(S,I){return j.func(I.onstart)&&this.on("".concat(S,"start"),I.onstart),j.func(I.onmove)&&this.on("".concat(S,"move"),I.onmove),j.func(I.onend)&&this.on("".concat(S,"end"),I.onend),j.func(I.oninertiastart)&&this.on("".concat(S,"inertiastart"),I.oninertiastart),this}},{key:"updatePerActionListeners",value:function(S,I,P){var F,z=this,H=(F=this._actions.map[S])==null?void 0:F.filterEventType,W=function(J){return(H==null||H(J))&&_r(J,z._actions)};(j.array(I)||j.object(I))&&this._onOff(Wl.Off,S,I,void 0,W),(j.array(P)||j.object(P))&&this._onOff(Wl.On,S,P,void 0,W)}},{key:"setPerAction",value:function(S,I){var P=this._defaults;for(var F in I){var z=F,H=this.options[S],W=I[z];z==="listeners"&&this.updatePerActionListeners(S,H.listeners,W),j.array(W)?H[z]=_m(W):j.plainObject(W)?(H[z]=Qe(H[z]||{},Cr(W)),j.object(P.perAction[z])&&"enabled"in P.perAction[z]&&(H[z].enabled=W.enabled!==!1)):j.bool(W)&&j.object(P.perAction[z])?H[z].enabled=W:H[z]=W}}},{key:"getRect",value:function(S){return S=S||(j.element(this.target)?this.target:null),j.string(this.target)&&(S=S||this._context.querySelector(this.target)),oi(S)}},{key:"rectChecker",value:function(S){var I=this;return j.func(S)?(this.getRect=function(P){var F=Qe({},S.apply(I,P));return"width"in F||(F.width=F.right-F.left,F.height=F.bottom-F.top),F},this):S===null?(delete this.getRect,this):this.getRect}},{key:"_backCompatOption",value:function(S,I){if(ui(I)||j.object(I)){for(var P in this.options[S]=I,this._actions.map)this.options[P][S]=I;return this}return this.options[S]}},{key:"origin",value:function(S){return this._backCompatOption("origin",S)}},{key:"deltaSource",value:function(S){return S==="page"||S==="client"?(this.options.deltaSource=S,this):this.options.deltaSource}},{key:"getAllElements",value:function(){var S=this.target;return j.string(S)?Array.from(this._context.querySelectorAll(S)):j.func(S)&&S.getAllElements?S.getAllElements():j.element(S)?[S]:[]}},{key:"context",value:function(){return this._context}},{key:"inContext",value:function(S){return this._context===S.ownerDocument||Ae(this._context,S)}},{key:"testIgnoreAllow",value:function(S,I,P){return!this.testIgnore(S.ignoreFrom,I,P)&&this.testAllow(S.allowFrom,I,P)}},{key:"testAllow",value:function(S,I,P){return!S||!!j.element(P)&&(j.string(S)?Pt(P,S,I):!!j.element(S)&&Ae(S,P))}},{key:"testIgnore",value:function(S,I,P){return!(!S||!j.element(P))&&(j.string(S)?Pt(P,S,I):!!j.element(S)&&Ae(S,P))}},{key:"fire",value:function(S){return this.events.fire(S),this}},{key:"_onOff",value:function(S,I,P,F,z){j.object(I)&&!j.array(I)&&(F=P,P=null);var H=jl(I,P,z);for(var W in H){W==="wheel"&&(W=Fe.wheelEvent);for(var J=0,oe=H[W];J<oe.length;J++){var K=oe[J];_r(W,this._actions)?this.events[S===Wl.On?"on":"off"](W,K):j.string(this.target)?this._scopeEvents[S===Wl.On?"addDelegate":"removeDelegate"](this.target,this._context,W,K,F):this._scopeEvents[S===Wl.On?"add":"remove"](this.target,W,K,F)}}return this}},{key:"on",value:function(S,I,P){return this._onOff(Wl.On,S,I,P)}},{key:"off",value:function(S,I,P){return this._onOff(Wl.Off,S,I,P)}},{key:"set",value:function(S){var I=this._defaults;for(var P in j.object(S)||(S={}),this.options=Cr(I.base),this._actions.methodDict){var F=P,z=this._actions.methodDict[F];this.options[F]={},this.setPerAction(F,Qe(Qe({},I.perAction),I.actions[F])),this[z](S[F])}for(var H in S)H!=="getRect"?j.func(this[H])&&this[H](S[H]):this.rectChecker(S.getRect);return this}},{key:"unset",value:function(){if(j.string(this.target))for(var S in this._scopeEvents.delegatedEvents)for(var I=this._scopeEvents.delegatedEvents[S],P=I.length-1;P>=0;P--){var F=I[P],z=F.selector,H=F.context,W=F.listeners;z===this.target&&H===this._context&&I.splice(P,1);for(var J=W.length-1;J>=0;J--)this._scopeEvents.removeDelegate(this.target,this._context,S,W[J][0],W[J][1])}else this._scopeEvents.remove(this.target,"all")}}]),$})(),W2=(function(){function $(S){var I=this;s(this,$),this.list=[],this.selectorMap={},this.scope=void 0,this.scope=S,S.addListeners({"interactable:unset":function(P){var F=P.interactable,z=F.target,H=j.string(z)?I.selectorMap[z]:z[I.scope.id],W=qc(H,function(J){return J===F});H.splice(W,1)}})}return a($,[{key:"new",value:function(S,I){I=Qe(I||{},{actions:this.scope.actions});var P=new this.scope.Interactable(S,I,this.scope.document,this.scope.events);return this.scope.addDocument(P._doc),this.list.push(P),j.string(S)?(this.selectorMap[S]||(this.selectorMap[S]=[]),this.selectorMap[S].push(P)):(P.target[this.scope.id]||Object.defineProperty(S,this.scope.id,{value:[],configurable:!0}),S[this.scope.id].push(P)),this.scope.fire("interactable:new",{target:S,options:I,interactable:P,win:this.scope._win}),P}},{key:"getExisting",value:function(S,I){var P=I&&I.context||this.scope.document,F=j.string(S),z=F?this.selectorMap[S]:S[this.scope.id];if(z)return Hc(z,function(H){return H._context===P&&(F||H.inContext(S))})}},{key:"forEachMatch",value:function(S,I){for(var P=0,F=this.list;P<F.length;P++){var z=F[P],H=void 0;if((j.string(z.target)?j.element(S)&&je(S,z.target):S===z.target)&&z.inContext(S)&&(H=I(z)),H!==void 0)return H}}}]),$})(),zw=(function(){function $(){var S=this;s(this,$),this.id="__interact_scope_".concat(Math.floor(100*Math.random())),this.isInitialized=!1,this.listenerMaps=[],this.browser=Fe,this.defaults=Cr(Oi),this.Eventable=hv,this.actions={map:{},phases:{start:!0,move:!0,end:!0},methodDict:{},phaselessTypes:{}},this.interactStatic=(function(P){var F=function z(H,W){var J=P.interactables.getExisting(H,W);return J||((J=P.interactables.new(H,W)).events.global=z.globalEvents),J};return F.getPointerAverage=Cw,F.getTouchBBox=Bc,F.getTouchDistance=Gc,F.getTouchAngle=Qg,F.getElementRect=oi,F.getElementClientRect=Xt,F.matchesSelector=je,F.closest=we,F.globalEvents={},F.version="1.10.27",F.scope=P,F.use=function(z,H){return this.scope.usePlugin(z,H),this},F.isSet=function(z,H){return!!this.scope.interactables.get(z,H&&H.context)},F.on=md(function(z,H,W){if(j.string(z)&&z.search(" ")!==-1&&(z=z.trim().split(/ +/)),j.array(z)){for(var J=0,oe=z;J<oe.length;J++){var K=oe[J];this.on(K,H,W)}return this}if(j.object(z)){for(var ge in z)this.on(ge,z[ge],H);return this}return _r(z,this.scope.actions)?this.globalEvents[z]?this.globalEvents[z].push(H):this.globalEvents[z]=[H]:this.scope.events.add(this.scope.document,z,H,{options:W}),this},"The interact.on() method is being deprecated"),F.off=md(function(z,H,W){if(j.string(z)&&z.search(" ")!==-1&&(z=z.trim().split(/ +/)),j.array(z)){for(var J=0,oe=z;J<oe.length;J++){var K=oe[J];this.off(K,H,W)}return this}if(j.object(z)){for(var ge in z)this.off(ge,z[ge],H);return this}var Le;return _r(z,this.scope.actions)?z in this.globalEvents&&(Le=this.globalEvents[z].indexOf(H))!==-1&&this.globalEvents[z].splice(Le,1):this.scope.events.remove(this.scope.document,z,H,W),this},"The interact.off() method is being deprecated"),F.debug=function(){return this.scope},F.supportsTouch=function(){return Fe.supportsTouch},F.supportsPointerEvent=function(){return Fe.supportsPointerEvent},F.stop=function(){for(var z=0,H=this.scope.interactions.list;z<H.length;z++)H[z].stop();return this},F.pointerMoveTolerance=function(z){return j.number(z)?(this.scope.interactions.pointerMoveTolerance=z,this):this.scope.interactions.pointerMoveTolerance},F.addDocument=function(z,H){this.scope.addDocument(z,H)},F.removeDocument=function(z){this.scope.removeDocument(z)},F})(this),this.InteractEvent=Ow,this.Interactable=void 0,this.interactables=new W2(this),this._win=void 0,this.document=void 0,this.window=void 0,this.documents=[],this._plugins={list:[],map:{}},this.onWindowUnload=function(P){return S.removeDocument(P.target)};var I=this;this.Interactable=(function(P){c(z,P);var F=g(z);function z(){return s(this,z),F.apply(this,arguments)}return a(z,[{key:"_defaults",get:function(){return I.defaults}},{key:"set",value:function(H){return b(d(z.prototype),"set",this).call(this,H),I.fire("interactable:set",{options:H,interactable:this}),this}},{key:"unset",value:function(){b(d(z.prototype),"unset",this).call(this);var H=I.interactables.list.indexOf(this);H<0||(I.interactables.list.splice(H,1),I.fire("interactable:unset",{interactable:this}))}}]),z})(Dw)}return a($,[{key:"addListeners",value:function(S,I){this.listenerMaps.push({id:I,map:S})}},{key:"fire",value:function(S,I){for(var P=0,F=this.listenerMaps;P<F.length;P++){var z=F[P].map[S];if(z&&z(I,this,S)===!1)return!1}}},{key:"init",value:function(S){return this.isInitialized?this:(function(I,P){return I.isInitialized=!0,j.window(P)&&k(P),re.init(P),Fe.init(P),il.init(P),I.window=P,I.document=P.document,I.usePlugin(_d),I.usePlugin(fv),I})(this,S)}},{key:"pluginIsInstalled",value:function(S){var I=S.id;return I?!!this._plugins.map[I]:this._plugins.list.indexOf(S)!==-1}},{key:"usePlugin",value:function(S,I){if(!this.isInitialized)return this;if(this.pluginIsInstalled(S))return this;if(S.id&&(this._plugins.map[S.id]=S),this._plugins.list.push(S),S.install&&S.install(this,I),S.listeners&&S.before){for(var P=0,F=this.listenerMaps.length,z=S.before.reduce(function(W,J){return W[J]=!0,W[vv(J)]=!0,W},{});P<F;P++){var H=this.listenerMaps[P].id;if(H&&(z[H]||z[vv(H)]))break}this.listenerMaps.splice(P,0,{id:S.id,map:S.listeners})}else S.listeners&&this.listenerMaps.push({id:S.id,map:S.listeners});return this}},{key:"addDocument",value:function(S,I){if(this.getDocIndex(S)!==-1)return!1;var P=O(S);I=I?Qe({},I):{},this.documents.push({doc:S,options:I}),this.events.documents.push(S),S!==this.document&&this.events.add(P,"unload",this.onWindowUnload),this.fire("scope:add-document",{doc:S,window:P,scope:this,options:I})}},{key:"removeDocument",value:function(S){var I=this.getDocIndex(S),P=O(S),F=this.documents[I].options;this.events.remove(P,"unload",this.onWindowUnload),this.documents.splice(I,1),this.events.documents.splice(I,1),this.fire("scope:remove-document",{doc:S,window:P,scope:this,options:F})}},{key:"getDocIndex",value:function(S){for(var I=0;I<this.documents.length;I++)if(this.documents[I].doc===S)return I;return-1}},{key:"getDocOptions",value:function(S){var I=this.getDocIndex(S);return I===-1?null:this.documents[I].options}},{key:"now",value:function(){return(this.window.Date||Date).now()}}]),$})();function vv($){return $&&$.replace(/\/.*$/,"")}var aT=new zw,nr=aT.interactStatic,Mm=typeof globalThis<"u"?globalThis:window;aT.init(Mm);var lT=Object.freeze({__proto__:null,edgeTarget:function(){},elements:function(){},grid:function($){var S=[["x","y"],["left","top"],["right","bottom"],["width","height"]].filter(function(P){var F=P[0],z=P[1];return F in $||z in $}),I=function(P,F){for(var z=$.range,H=$.limits,W=H===void 0?{left:-1/0,right:1/0,top:-1/0,bottom:1/0}:H,J=$.offset,oe=J===void 0?{x:0,y:0}:J,K={range:z,grid:$,x:null,y:null},ge=0;ge<S.length;ge++){var Le=S[ge],He=Le[0],Be=Le[1],Xe=Math.round((P-oe.x)/$[He]),pt=Math.round((F-oe.y)/$[Be]);K[He]=Math.max(W.left,Math.min(W.right,Xe*$[He]+oe.x)),K[Be]=Math.max(W.top,Math.min(W.bottom,pt*$[Be]+oe.y))}return K};return I.grid=$,I.coordFields=S,I}}),bv={id:"snappers",install:function($){var S=$.interactStatic;S.snappers=Qe(S.snappers||{},lT),S.createSnapGrid=S.snappers.grid}},_D=bv,cT={start:function($){var S=$.state,I=$.rect,P=$.edges,F=$.pageCoords,z=S.options,H=z.ratio,W=z.enabled,J=S.options,oe=J.equalDelta,K=J.modifiers;H==="preserve"&&(H=I.width/I.height),S.startCoords=Qe({},F),S.startRect=Qe({},I),S.ratio=H,S.equalDelta=oe;var ge=S.linkedEdges={top:P.top||P.left&&!P.bottom,left:P.left||P.top&&!P.right,bottom:P.bottom||P.right&&!P.top,right:P.right||P.bottom&&!P.left};if(S.xIsPrimaryAxis=!(!P.left&&!P.right),S.equalDelta){var Le=(ge.left?1:-1)*(ge.top?1:-1);S.edgeSign={x:Le,y:Le}}else S.edgeSign={x:ge.left?-1:1,y:ge.top?-1:1};if(W!==!1&&Qe(P,ge),K!=null&&K.length){var He=new lv($.interaction);He.copyFrom($.interaction.modification),He.prepareStates(K),S.subModification=He,He.startAll(r({},$))}},set:function($){var S=$.state,I=$.rect,P=$.coords,F=S.linkedEdges,z=Qe({},P),H=S.equalDelta?uT:wv;if(Qe($.edges,F),H(S,S.xIsPrimaryAxis,P,I),!S.subModification)return null;var W=Qe({},I);Lo(F,W,{x:P.x-z.x,y:P.y-z.y});var J=S.subModification.setAll(r(r({},$),{},{rect:W,edges:F,pageCoords:P,prevCoords:P,prevRect:W})),oe=J.delta;return J.changed&&(H(S,Math.abs(oe.x)>Math.abs(oe.y),J.coords,J.rect),Qe(P,J.coords)),J.eventProps},defaults:{ratio:"preserve",equalDelta:!1,modifiers:[],enabled:!1}};function uT($,S,I){var P=$.startCoords,F=$.edgeSign;S?I.y=P.y+(I.x-P.x)*F.y:I.x=P.x+(I.y-P.y)*F.x}function wv($,S,I,P){var F=$.startRect,z=$.startCoords,H=$.ratio,W=$.edgeSign;if(S){var J=P.width/H;I.y=z.y+(J-F.height)*W.y}else{var oe=P.height*H;I.x=z.x+(oe-F.width)*W.x}}var Vw=ql(cT,"aspectRatio"),dT=function(){};dT._defaults={};var jw=dT;function xp($,S,I){return j.func($)?Ao($,S.interactable,S.element,[I.x,I.y,S]):Ao($,S.interactable,S.element)}var Uw={start:function($){var S=$.rect,I=$.startOffset,P=$.state,F=$.interaction,z=$.pageCoords,H=P.options,W=H.elementRect,J=Qe({left:0,top:0,right:0,bottom:0},H.offset||{});if(S&&W){var oe=xp(H.restriction,F,z);if(oe){var K=oe.right-oe.left-S.width,ge=oe.bottom-oe.top-S.height;K<0&&(J.left+=K,J.right+=K),ge<0&&(J.top+=ge,J.bottom+=ge)}J.left+=I.left-S.width*W.left,J.top+=I.top-S.height*W.top,J.right+=I.right-S.width*(1-W.right),J.bottom+=I.bottom-S.height*(1-W.bottom)}P.offset=J},set:function($){var S=$.coords,I=$.interaction,P=$.state,F=P.options,z=P.offset,H=xp(F.restriction,I,S);if(H){var W=(function(J){return!J||"left"in J&&"top"in J||((J=Qe({},J)).left=J.x||0,J.top=J.y||0,J.right=J.right||J.left+J.width,J.bottom=J.bottom||J.top+J.height),J})(H);S.x=Math.max(Math.min(W.right-z.right,S.x),W.left+z.left),S.y=Math.max(Math.min(W.bottom-z.bottom,S.y),W.top+z.top)}},defaults:{restriction:null,elementRect:null,offset:null,endOnly:!1,enabled:!1}},hT=ql(Uw,"restrict"),Z2={top:1/0,left:1/0,bottom:-1/0,right:-1/0},J2={top:-1/0,left:-1/0,bottom:1/0,right:1/0};function Y2($,S){for(var I=0,P=["top","left","bottom","right"];I<P.length;I++){var F=P[I];F in $||($[F]=S[F])}return $}var _v={noInner:Z2,noOuter:J2,start:function($){var S,I=$.interaction,P=$.startOffset,F=$.state,z=F.options;z&&(S=Vl(xp(z.offset,I,I.coords.start.page))),S=S||{x:0,y:0},F.offset={top:S.y+P.top,left:S.x+P.left,bottom:S.y-P.bottom,right:S.x-P.right}},set:function($){var S=$.coords,I=$.edges,P=$.interaction,F=$.state,z=F.offset,H=F.options;if(I){var W=Qe({},S),J=xp(H.inner,P,W)||{},oe=xp(H.outer,P,W)||{};Y2(J,Z2),Y2(oe,J2),I.top?S.y=Math.min(Math.max(oe.top+z.top,W.y),J.top+z.top):I.bottom&&(S.y=Math.max(Math.min(oe.bottom+z.bottom,W.y),J.bottom+z.bottom)),I.left?S.x=Math.min(Math.max(oe.left+z.left,W.x),J.left+z.left):I.right&&(S.x=Math.max(Math.min(oe.right+z.right,W.x),J.right+z.right))}},defaults:{inner:null,outer:null,offset:null,endOnly:!1,enabled:!1}},xD=ql(_v,"restrictEdges"),X2=Qe({get elementRect(){return{top:0,left:0,bottom:1,right:1}},set elementRect($){}},Uw.defaults),SD=ql({start:Uw.start,set:Uw.set,defaults:X2},"restrictRect"),$D={width:-1/0,height:-1/0},TD={width:1/0,height:1/0},ED=ql({start:function($){return _v.start($)},set:function($){var S=$.interaction,I=$.state,P=$.rect,F=$.edges,z=I.options;if(F){var H=ro(xp(z.min,S,$.coords))||$D,W=ro(xp(z.max,S,$.coords))||TD;I.options={endOnly:z.endOnly,inner:Qe({},_v.noInner),outer:Qe({},_v.noOuter)},F.top?(I.options.inner.top=P.bottom-H.height,I.options.outer.top=P.bottom-W.height):F.bottom&&(I.options.inner.bottom=P.top+H.height,I.options.outer.bottom=P.top+W.height),F.left?(I.options.inner.left=P.right-H.width,I.options.outer.left=P.right-W.width):F.right&&(I.options.inner.right=P.left+H.width,I.options.outer.right=P.left+W.width),_v.set($),I.options=z}},defaults:{min:null,max:null,endOnly:!1,enabled:!1}},"restrictSize"),xv={start:function($){var S,I=$.interaction,P=$.interactable,F=$.element,z=$.rect,H=$.state,W=$.startOffset,J=H.options,oe=J.offsetWithOrigin?(function(Le){var He=Le.interaction.element,Be=Vl(Ao(Le.state.options.origin,null,null,[He])),Xe=Be||dd(Le.interactable,He,Le.interaction.prepared.name);return Xe})($):{x:0,y:0};if(J.offset==="startCoords")S={x:I.coords.start.page.x,y:I.coords.start.page.y};else{var K=Ao(J.offset,P,F,[I]);(S=Vl(K)||{x:0,y:0}).x+=oe.x,S.y+=oe.y}var ge=J.relativePoints;H.offsets=z&&ge&&ge.length?ge.map(function(Le,He){return{index:He,relativePoint:Le,x:W.left-z.width*Le.x+S.x,y:W.top-z.height*Le.y+S.y}}):[{index:0,relativePoint:null,x:S.x,y:S.y}]},set:function($){var S=$.interaction,I=$.coords,P=$.state,F=P.options,z=P.offsets,H=dd(S.interactable,S.element,S.prepared.name),W=Qe({},I),J=[];F.offsetWithOrigin||(W.x-=H.x,W.y-=H.y);for(var oe=0,K=z;oe<K.length;oe++)for(var ge=K[oe],Le=W.x-ge.x,He=W.y-ge.y,Be=0,Xe=F.targets.length;Be<Xe;Be++){var pt=F.targets[Be],st=void 0;(st=j.func(pt)?pt(Le,He,S._proxy,ge,Be):pt)&&J.push({x:(j.number(st.x)?st.x:Le)+ge.x,y:(j.number(st.y)?st.y:He)+ge.y,range:j.number(st.range)?st.range:F.range,source:pt,index:Be,offset:ge})}for(var It={target:null,inRange:!1,distance:0,range:0,delta:{x:0,y:0}},ai=0;ai<J.length;ai++){var Zt=J[ai],Dt=Zt.range,li=Zt.x-W.x,ms=Zt.y-W.y,mr=hd(li,ms),no=mr<=Dt;Dt===1/0&&It.inRange&&It.range!==1/0&&(no=!1),It.target&&!(no?It.inRange&&Dt!==1/0?mr/Dt<It.distance/It.range:Dt===1/0&&It.range!==1/0||mr<It.distance:!It.inRange&&mr<It.distance)||(It.target=Zt,It.distance=mr,It.range=Dt,It.inRange=no,It.delta.x=li,It.delta.y=ms)}return It.inRange&&(I.x=It.target.x,I.y=It.target.y),P.closest=It,It},defaults:{range:1/0,targets:null,offset:null,offsetWithOrigin:!0,origin:null,relativePoints:null,endOnly:!1,enabled:!1}},ID=ql(xv,"snap"),Bw={start:function($){var S=$.state,I=$.edges,P=S.options;if(!I)return null;$.state={options:{targets:null,relativePoints:[{x:I.left?0:1,y:I.top?0:1}],offset:P.offset||"self",origin:{x:0,y:0},range:P.range}},S.targetFields=S.targetFields||[["width","height"],["x","y"]],xv.start($),S.offsets=$.state.offsets,$.state=S},set:function($){var S=$.interaction,I=$.state,P=$.coords,F=I.options,z=I.offsets,H={x:P.x-z[0].x,y:P.y-z[0].y};I.options=Qe({},F),I.options.targets=[];for(var W=0,J=F.targets||[];W<J.length;W++){var oe=J[W],K=void 0;if(K=j.func(oe)?oe(H.x,H.y,S):oe){for(var ge=0,Le=I.targetFields;ge<Le.length;ge++){var He=Le[ge],Be=He[0],Xe=He[1];if(Be in K||Xe in K){K.x=K[Be],K.y=K[Xe];break}}I.options.targets.push(K)}}var pt=xv.set($);return I.options=F,pt},defaults:{range:1/0,targets:null,offset:null,endOnly:!1,enabled:!1}},CD=ql(Bw,"snapSize"),Gw={aspectRatio:Vw,restrictEdges:xD,restrict:hT,restrictRect:SD,restrictSize:ED,snapEdges:ql({start:function($){var S=$.edges;return S?($.state.targetFields=$.state.targetFields||[[S.left?"left":"right",S.top?"top":"bottom"]],Bw.start($)):null},set:Bw.set,defaults:Qe(Cr(Bw.defaults),{targets:void 0,range:void 0,offset:{x:0,y:0}})},"snapEdges"),snap:ID,snapSize:CD,spring:jw,avoid:jw,transform:jw,rubberband:jw},MD={id:"modifiers",install:function($){var S=$.interactStatic;for(var I in $.usePlugin(Rw),$.usePlugin(_D),S.modifiers=Gw,Gw){var P=Gw[I],F=P._defaults,z=P._methods;F._methods=z,$.defaults.perAction[I]=F}}},kD=MD,K2=(function($){c(I,$);var S=g(I);function I(P,F,z,H,W,J){var oe;if(s(this,I),Qa(y(oe=S.call(this,W)),z),z!==F&&Qa(y(oe),F),oe.timeStamp=J,oe.originalEvent=z,oe.type=P,oe.pointerId=pd(F),oe.pointerType=ev(F),oe.target=H,oe.currentTarget=null,P==="tap"){var K=W.getPointerIndex(F);oe.dt=oe.timeStamp-W.pointers[K].downTime;var ge=oe.timeStamp-W.tapTime;oe.double=!!W.prevTap&&W.prevTap.type!=="doubletap"&&W.prevTap.target===oe.target&&ge<500}else P==="doubletap"&&(oe.dt=F.timeStamp-W.tapTime,oe.double=!0);return oe}return a(I,[{key:"_subtractOrigin",value:function(P){var F=P.x,z=P.y;return this.pageX-=F,this.pageY-=z,this.clientX-=F,this.clientY-=z,this}},{key:"_addOrigin",value:function(P){var F=P.x,z=P.y;return this.pageX+=F,this.pageY+=z,this.clientX+=F,this.clientY+=z,this}},{key:"preventDefault",value:function(){this.originalEvent.preventDefault()}}]),I})(bm),Sv={id:"pointer-events/base",before:["inertia","modifiers","auto-start","actions"],install:function($){$.pointerEvents=Sv,$.defaults.actions.pointerEvents=Sv.defaults,Qe($.actions.phaselessTypes,Sv.types)},listeners:{"interactions:new":function($){var S=$.interaction;S.prevTap=null,S.tapTime=0},"interactions:update-pointer":function($){var S=$.down,I=$.pointerInfo;!S&&I.hold||(I.hold={duration:1/0,timeout:null})},"interactions:move":function($,S){var I=$.interaction,P=$.pointer,F=$.event,z=$.eventTarget;$.duplicate||I.pointerIsDown&&!I.pointerWasMoved||(I.pointerIsDown&&pT($),xd({interaction:I,pointer:P,event:F,eventTarget:z,type:"move"},S))},"interactions:down":function($,S){(function(I,P){for(var F=I.interaction,z=I.pointer,H=I.event,W=I.eventTarget,J=I.pointerIndex,oe=F.pointers[J].hold,K=vi(W),ge={interaction:F,pointer:z,event:H,eventTarget:W,type:"hold",targets:[],path:K,node:null},Le=0;Le<K.length;Le++){var He=K[Le];ge.node=He,P.fire("pointerEvents:collect-targets",ge)}if(ge.targets.length){for(var Be=1/0,Xe=0,pt=ge.targets;Xe<pt.length;Xe++){var st=pt[Xe].eventable.options.holdDuration;st<Be&&(Be=st)}oe.duration=Be,oe.timeout=setTimeout(function(){xd({interaction:F,eventTarget:W,pointer:z,event:H,type:"hold"},P)},Be)}})($,S),xd($,S)},"interactions:up":function($,S){pT($),xd($,S),(function(I,P){var F=I.interaction,z=I.pointer,H=I.event,W=I.eventTarget;F.pointerWasMoved||xd({interaction:F,eventTarget:W,pointer:z,event:H,type:"tap"},P)})($,S)},"interactions:cancel":function($,S){pT($),xd($,S)}},PointerEvent:K2,fire:xd,collectEventTargets:Q2,defaults:{holdDuration:600,ignoreFrom:null,allowFrom:null,origin:{x:0,y:0}},types:{down:!0,move:!0,up:!0,cancel:!0,tap:!0,doubletap:!0,hold:!0}};function xd($,S){var I=$.interaction,P=$.pointer,F=$.event,z=$.eventTarget,H=$.type,W=$.targets,J=W===void 0?Q2($,S):W,oe=new K2(H,P,F,z,I,S.now());S.fire("pointerEvents:new",{pointerEvent:oe});for(var K={interaction:I,pointer:P,event:F,eventTarget:z,targets:J,type:H,pointerEvent:oe},ge=0;ge<J.length;ge++){var Le=J[ge];for(var He in Le.props||{})oe[He]=Le.props[He];var Be=dd(Le.eventable,Le.node);if(oe._subtractOrigin(Be),oe.eventable=Le.eventable,oe.currentTarget=Le.node,Le.eventable.fire(oe),oe._addOrigin(Be),oe.immediatePropagationStopped||oe.propagationStopped&&ge+1<J.length&&J[ge+1].node!==oe.currentTarget)break}if(S.fire("pointerEvents:fired",K),H==="tap"){var Xe=oe.double?xd({interaction:I,pointer:P,event:F,eventTarget:z,type:"doubletap"},S):oe;I.prevTap=Xe,I.tapTime=Xe.timeStamp}return oe}function Q2($,S){var I=$.interaction,P=$.pointer,F=$.event,z=$.eventTarget,H=$.type,W=I.getPointerIndex(P),J=I.pointers[W];if(H==="tap"&&(I.pointerWasMoved||!J||J.downTarget!==z))return[];for(var oe=vi(z),K={interaction:I,pointer:P,event:F,eventTarget:z,type:H,path:oe,targets:[],node:null},ge=0;ge<oe.length;ge++){var Le=oe[ge];K.node=Le,S.fire("pointerEvents:collect-targets",K)}return H==="hold"&&(K.targets=K.targets.filter(function(He){var Be,Xe;return He.eventable.options.holdDuration===((Be=I.pointers[W])==null||(Xe=Be.hold)==null?void 0:Xe.duration)})),K.targets}function pT($){var S=$.interaction,I=$.pointerIndex,P=S.pointers[I].hold;P&&P.timeout&&(clearTimeout(P.timeout),P.timeout=null)}var fT=Object.freeze({__proto__:null,default:Sv});function $v($){var S=$.interaction;S.holdIntervalHandle&&(clearInterval(S.holdIntervalHandle),S.holdIntervalHandle=null)}var PD={id:"pointer-events/holdRepeat",install:function($){$.usePlugin(Sv);var S=$.pointerEvents;S.defaults.holdRepeatInterval=0,S.types.holdrepeat=$.actions.phaselessTypes.holdrepeat=!0},listeners:["move","up","cancel","endall"].reduce(function($,S){return $["pointerEvents:".concat(S)]=$v,$},{"pointerEvents:new":function($){var S=$.pointerEvent;S.type==="hold"&&(S.count=(S.count||0)+1)},"pointerEvents:fired":function($,S){var I=$.interaction,P=$.pointerEvent,F=$.eventTarget,z=$.targets;if(P.type==="hold"&&z.length){var H=z[0].eventable.options.holdRepeatInterval;H<=0||(I.holdIntervalHandle=setTimeout(function(){S.pointerEvents.fire({interaction:I,eventTarget:F,type:"hold",pointer:P,event:P},S)},H))}}})},ek=PD,tk={id:"pointer-events/interactableTargets",install:function($){var S=$.Interactable;S.prototype.pointerEvents=function(P){return Qe(this.events.options,P),this};var I=S.prototype._backCompatOption;S.prototype._backCompatOption=function(P,F){var z=I.call(this,P,F);return z===this&&(this.events.options[P]=F),z}},listeners:{"pointerEvents:collect-targets":function($,S){var I=$.targets,P=$.node,F=$.type,z=$.eventTarget;S.interactables.forEachMatch(P,function(H){var W=H.events,J=W.options;W.types[F]&&W.types[F].length&&H.testIgnoreAllow(J,P,z)&&I.push({node:P,eventable:W,props:{interactable:H}})})},"interactable:new":function($){var S=$.interactable;S.events.getRect=function(I){return S.getRect(I)}},"interactable:set":function($,S){var I=$.interactable,P=$.options;Qe(I.events.options,S.pointerEvents.defaults),Qe(I.events.options,P.pointerEvents||{})}}},ik=tk,rk={id:"pointer-events",install:function($){$.usePlugin(fT),$.usePlugin(ek),$.usePlugin(ik)}},nk=rk,km={id:"reflow",install:function($){var S=$.Interactable;$.actions.phases.reflow=!0,S.prototype.reflow=function(I){return(function(P,F,z){for(var H=P.getAllElements(),W=z.window.Promise,J=W?[]:null,oe=function(){var ge=H[K],Le=P.getRect(ge);if(!Le)return 1;var He,Be=Hc(z.interactions.list,function(st){return st.interacting()&&st.interactable===P&&st.element===ge&&st.prepared.name===F.name});if(Be)Be.move(),J&&(He=Be._reflowPromise||new W(function(st){Be._reflowResolve=st}));else{var Xe=ro(Le),pt=(function(st){return{coords:st,get page(){return this.coords.page},get client(){return this.coords.client},get timeStamp(){return this.coords.timeStamp},get pageX(){return this.coords.page.x},get pageY(){return this.coords.page.y},get clientX(){return this.coords.client.x},get clientY(){return this.coords.client.y},get pointerId(){return this.coords.pointerId},get target(){return this.coords.target},get type(){return this.coords.type},get pointerType(){return this.coords.pointerType},get buttons(){return this.coords.buttons},preventDefault:function(){}}})({page:{x:Xe.x,y:Xe.y},client:{x:Xe.x,y:Xe.y},timeStamp:z.now()});He=(function(st,It,ai,Zt,Dt){var li=st.interactions.new({pointerType:"reflow"}),ms={interaction:li,event:Dt,pointer:Dt,eventTarget:ai,phase:"reflow"};li.interactable=It,li.element=ai,li.prevEvent=Dt,li.updatePointer(Dt,Dt,ai,!0),vm(li.coords.delta),yd(li.prepared,Zt),li._doPhase(ms);var mr=st.window,no=mr.Promise,Oo=no?new no(function(Xc){li._reflowResolve=Xc}):void 0;return li._reflowPromise=Oo,li.start(Zt,It,ai),li._interacting?(li.move(ms),li.end(Dt)):(li.stop(),li._reflowResolve()),li.removePointer(Dt,Dt),Oo})(z,P,ge,F,pt)}J&&J.push(He)},K=0;K<H.length&&!oe();K++);return J&&W.all(J).then(function(){return P})})(this,I,$)}},listeners:{"interactions:stop":function($,S){var I=$.interaction;I.pointerType==="reflow"&&(I._reflowResolve&&I._reflowResolve(),(function(P,F){P.splice(P.indexOf(F),1)})(S.interactions.list,I))}}},AD=km;if(nr.use(Yi),nr.use(Im),nr.use(nk),nr.use(bD),nr.use(kD),nr.use(Ge),nr.use(tT),nr.use(kw),nr.use(AD),nr.default=nr,n(t)==="object"&&t)try{t.exports=nr}catch{}return nr.default=nr,nr})})(RI,RI.exports)),RI.exports}var Urt=jrt();const Yse=zrt(Urt);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const u_e=(t,e,i)=>Math.max(e,Math.min(t,i)),Brt=new RegExp(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/),Xse=t=>{const e=(""+t).match(Brt);return!e||parseInt(e[1])===0?0:Math.max(0,(e[1]?e[1].length:0)-(e[2]?+e[2]:0))};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */function H9(t,e,i){return e?`${t}-${e}`:i?`${t}-${i}`:`${t}-m`}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const pu={container:"container",actionBarContainer:"action-bar-container",contentContainer:"content-container",content:"content",contentHeader:"content__header",contentBody:"content__body",contentOverlay:"content--overlay",floatAll:"float-all",floatContent:"float--content",resizeHandle:"resize-handle",resizeHandleBar:"resize-handle-bar"},Kse={actionBar:"action-bar",header:"header"},Qse={dragVertical:"drag-resize-vertical",dragHorizontal:"drag-resize-horizontal"},Grt=Mi`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{pointer-events:none;position:relative;display:flex;flex:0 1 auto;align-items:stretch;z-index:var(--calcite-shell-panel-z-index, var(--calcite-z-index));--calcite-shell-panel-max-height: unset;--calcite-internal-shell-panel-shadow-block-start: 0 4px 8px -1px rgba(0, 0, 0, .08), 0 2px 4px -1px rgba(0, 0, 0, .04);--calcite-internal-shell-panel-shadow-block-end: 0 -4px 8px -1px rgba(0, 0, 0, .08), 0 -2px 4px -1px rgba(0, 0, 0, .04);--calcite-internal-shell-panel-shadow-inline-start: 4px 0 8px -1px rgba(0, 0, 0, .08), 2px 0 4px -1px rgba(0, 0, 0, .04);--calcite-internal-shell-panel-shadow-inline-end: -4px 0 8px -1px rgba(0, 0, 0, .08), -2px 0 4px -1px rgba(0, 0, 0, .04)}.calcite--rtl.content--overlay{--calcite-internal-shell-panel-shadow-inline-start: -4px 0 8px -1px rgba(0, 0, 0, .08), -2px 0 4px -1px rgba(0, 0, 0, .04);--calcite-internal-shell-panel-shadow-inline-end: 4px 0 8px -1px rgba(0, 0, 0, .08), 2px 0 4px -1px rgba(0, 0, 0, .04)}:host([layout=vertical]){z-index:var(--calcite-shell-panel-z-index, calc(var(--calcite-z-index) + 1))}:host([layout=vertical][display-mode=overlay]){z-index:var(--calcite-shell-panel-z-index, calc(var(--calcite-z-index-header) + 1))}:host([layout=vertical][display-mode=float-all]) .content{flex:2}:host([layout=vertical]:not([display-mode=float-all])) .width-s{--calcite-internal-shell-panel-width: var(--calcite-shell-panel-width, 12vw);--calcite-internal-shell-panel-max-width: var(--calcite-shell-panel-max-width, 300px);--calcite-internal-shell-panel-min-width: var(--calcite-shell-panel-min-width, 150px)}:host([layout=vertical][display-mode=float-all]) .width-s{--calcite-internal-shell-panel-width: var(--calcite-shell-panel-width, 12vw);--calcite-internal-shell-panel-min-width: var(--calcite-shell-panel-min-width, 150px)}:host([layout=vertical]:not([display-mode=float-all])) .width-m{--calcite-internal-shell-panel-width: var(--calcite-shell-panel-width, 20vw);--calcite-internal-shell-panel-max-width: var(--calcite-shell-panel-max-width, 420px);--calcite-internal-shell-panel-min-width: var(--calcite-shell-panel-min-width, 240px)}:host([layout=vertical][display-mode=float-all]) .width-m{--calcite-internal-shell-panel-width: var(--calcite-shell-panel-width, 20vw);--calcite-internal-shell-panel-min-width: var(--calcite-shell-panel-min-width, 240px)}:host([layout=vertical]:not([display-mode=float-all])) .width-l{--calcite-internal-shell-panel-width: var(--calcite-shell-panel-width, 45vw);--calcite-internal-shell-panel-max-width: var(--calcite-shell-panel-max-width, 680px);--calcite-internal-shell-panel-min-width: var(--calcite-shell-panel-min-width, 340px)}:host([layout=vertical][display-mode=float-all]) .width-l{--calcite-internal-shell-panel-width: var(--calcite-shell-panel-width, 45vw);--calcite-internal-shell-panel-min-width: var(--calcite-shell-panel-min-width, 340px)}:host([layout=horizontal]) .content{--calcite-internal-shell-panel-height: var(--calcite-shell-panel-height);--calcite-internal-shell-panel-min-height: var(--calcite-shell-panel-min-height, 5vh);--calcite-internal-shell-panel-max-height: var(--calcite-shell-panel-max-height, 30vh)}:host([layout=horizontal]) .height-s{--calcite-internal-shell-panel-height: var(--calcite-shell-panel-height);--calcite-internal-shell-panel-min-height: var(--calcite-shell-panel-min-height, 5vh);--calcite-internal-shell-panel-max-height: var(--calcite-shell-panel-max-height, 20vh)}:host([layout=horizontal]) .height-l{--calcite-internal-shell-panel-height: var(--calcite-shell-panel-height);--calcite-internal-shell-panel-min-height: var(--calcite-shell-panel-min-height, 5vh);--calcite-internal-shell-panel-max-height: var(--calcite-shell-panel-max-height, 40vh)}.container{pointer-events:none;box-sizing:border-box;display:flex;block-size:100%;flex:1 1 auto;align-items:stretch;background-color:transparent;font-size:var(--calcite-font-size--1);color:var(--calcite-shell-panel-text-color, var(--calcite-color-text-2))}.container *{box-sizing:border-box}.container.float-all{margin-block:var(--calcite-spacing-sm);margin-inline:var(--calcite-spacing-sm)}.float-all{max-block-size:var(--calcite-internal-shell-panel-max-height, calc(100% - 1rem) );box-shadow:var(--calcite-shell-panel-shadow, var(--calcite-shadow-sm));border-radius:var(--calcite-shell-panel-corner-radius, var(--calcite-corner-radius-round));overflow:hidden}:host([layout=vertical][position=start]) .float-all{border-inline-start:var(--calcite-border-width-sm) solid var(--calcite-shell-panel-border-color, var(--calcite-color-border-3))}:host([layout=vertical][position=end]) .float-all{border-inline-end:var(--calcite-border-width-sm) solid var(--calcite-shell-border-color, var(--calcite-shell-panel-border-color, var(--calcite-color-border-3)))}:host([layout=horizontal]) .float-all{border-inline:var(--calcite-border-width-sm) solid var(--calcite-shell-border-color, var(--calcite-shell-panel-border-color, var(--calcite-color-border-3)))}:host([layout=horizontal]) .container{block-size:auto;inline-size:100%;flex-direction:column}.resize-handle{position:absolute;box-sizing:border-box;display:flex;-webkit-user-select:none;user-select:none;align-items:center;justify-content:center;outline:2px solid transparent;outline-offset:2px;--calcite-internal-shell-panel-resize-handle-offset: calc( (var(--calcite-size-fixed-xxl) - var(--calcite-size-fixed-sm-plus)) / 2 * -1 );z-index:var(--calcite-z-index-header)}.resize-handle:active .resize-handle-bar,.resize-handle:hover .resize-handle-bar{color:var(--calcite-shell-panel-resize-icon-color, var(--calcite-color-text-1));background-color:var(--calcite-shell-panel-resize-background-color, var(--calcite-color-foreground-3))}.resize-handle-bar{pointer-events:none;display:flex;align-items:center;justify-content:center;color:var(--calcite-shell-panel-resize-icon-color, var(--calcite-color-border-input));background-color:var(--calcite-shell-panel-resize-background-color, var(--calcite-color-background))}.resize-handle:focus .resize-handle-bar{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline-color:transparent;outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus)}:host([position=start][layout=vertical]) .resize-handle{inline-size:var(--calcite-size-fixed-xxl);inset-inline-end:var(--calcite-internal-shell-panel-resize-handle-offset);block-size:100%}:host([position=start][layout=vertical]) .resize-handle-bar{block-size:100%;inline-size:var(--calcite-size-fixed-sm-plus);border-inline-start:var(--calcite-border-width-sm) solid var(--calcite-shell-border-color, var(--calcite-color-border-3))}:host([position=start][layout=vertical]):host([display-mode^=float]) .resize-handle-bar{border-start-end-radius:var(--calcite-shell-panel-corner-radius, var(--calcite-corner-radius-round));border-end-end-radius:var(--calcite-shell-panel-corner-radius, var(--calcite-corner-radius-round))}:host([position=end][layout=vertical]) .resize-handle{inline-size:var(--calcite-size-fixed-xxl);inset-inline-start:var(--calcite-internal-shell-panel-resize-handle-offset);block-size:100%}:host([position=end][layout=vertical]) .resize-handle-bar{block-size:100%;inline-size:var(--calcite-size-fixed-sm-plus);border-inline-end:var(--calcite-border-width-sm) solid var(--calcite-shell-border-color, var(--calcite-color-border-3))}:host([position=end][layout=vertical]):host([display-mode^=float]) .resize-handle-bar{border-start-start-radius:var(--calcite-shell-panel-corner-radius, var(--calcite-corner-radius-round));border-end-start-radius:var(--calcite-shell-panel-corner-radius, var(--calcite-corner-radius-round))}:host([position=start][layout=horizontal]) .resize-handle{block-size:var(--calcite-size-fixed-xxl);inline-size:100%;inset-block-end:var(--calcite-internal-shell-panel-resize-handle-offset)}:host([position=start][layout=horizontal]) .resize-handle-bar{inline-size:100%;block-size:var(--calcite-size-fixed-sm-plus);border-block-start:var(--calcite-border-width-sm) solid var(--calcite-shell-border-color, var(--calcite-color-border-3))}:host([position=start][layout=horizontal]):host([display-mode^=float]) .resize-handle-bar{border-end-end-radius:var(--calcite-shell-panel-corner-radius, var(--calcite-corner-radius-round));border-end-start-radius:var(--calcite-shell-panel-corner-radius, var(--calcite-corner-radius-round))}:host([position=end][layout=horizontal]) .resize-handle{block-size:var(--calcite-size-fixed-xxl);inline-size:100%;inset-block-start:var(--calcite-internal-shell-panel-resize-handle-offset)}:host([position=end][layout=horizontal]) .resize-handle-bar{inline-size:100%;block-size:var(--calcite-size-fixed-sm-plus);border-block-end:var(--calcite-border-width-sm) solid var(--calcite-shell-border-color, var(--calcite-color-border-3))}:host([position=end][layout=horizontal]):host([display-mode^=float]) .resize-handle-bar{border-start-start-radius:var(--calcite-shell-panel-corner-radius, var(--calcite-corner-radius-round));border-start-end-radius:var(--calcite-shell-panel-corner-radius, var(--calcite-corner-radius-round))}::slotted(calcite-panel),::slotted(calcite-flow){block-size:100%;inline-size:100%;flex:1 1 auto;max-block-size:unset;max-inline-size:unset}::slotted(.calcite-match-height){display:flex;flex:1 1 auto;overflow:hidden}.action-bar-container{pointer-events:auto;box-sizing:border-box;display:flex;flex:1 1 auto}.content-container{position:relative;box-sizing:border-box;display:flex;block-size:100%;inline-size:100%;flex:1 1 auto;align-items:stretch;align-self:stretch}:host([layout=horizontal]) .action-bar-container,:host([layout=horizontal]) .content-container{flex-direction:column}.content{pointer-events:auto;position:relative;box-sizing:border-box;display:flex;flex:1 1 auto;flex-direction:column;flex-wrap:nowrap;align-items:stretch;align-self:stretch;padding:0;background-color:var(--calcite-shell-panel-background-color, var(--calcite-color-background));transition:max-block-size var(--calcite-animation-timing),max-inline-size var(--calcite-animation-timing)}:host([layout=vertical]:not([display-mode=float-all])) .content{inline-size:var(--calcite-internal-shell-panel-width);max-inline-size:var(--calcite-internal-shell-panel-max-width);min-inline-size:var(--calcite-internal-shell-panel-min-width)}:host([layout=vertical][display-mode=float-all]) .content{inline-size:var(--calcite-internal-shell-panel-width);min-inline-size:var(--calcite-internal-shell-panel-min-width)}:host([layout=horizontal]) .content{block-size:var(--calcite-internal-shell-panel-height);max-block-size:var(--calcite-internal-shell-panel-max-height);min-block-size:var(--calcite-internal-shell-panel-min-height)}:host([resizable][layout=vertical][position=start]) .content{padding-inline-end:var(--calcite-size-fixed-sm-plus)}:host([resizable][layout=vertical][position=end]) .content{padding-inline-start:var(--calcite-size-fixed-sm-plus)}:host([resizable][layout=horizontal][position=start]) .content{padding-block-end:var(--calcite-size-fixed-sm-plus)}:host([resizable][layout=horizontal][position=end]) .content{padding-block-start:var(--calcite-size-fixed-sm-plus)}.content__header{display:flex;flex:0 1 auto;flex-direction:column;flex-wrap:nowrap;align-items:stretch}.content__body{display:flex;flex:1 1 auto;flex-direction:column;overflow:hidden}.content--overlay{position:absolute;--tw-shadow: 0 4px 8px -1px rgba(0, 0, 0, .08), 0 2px 4px -1px rgba(0, 0, 0, .04);--tw-shadow-colored: 0 4px 8px -1px var(--tw-shadow-color), 0 2px 4px -1px var(--tw-shadow-color);box-shadow:var(--calcite-shell-panel-shadow, var(--tw-ring-offset-shadow, 0 0 rgba(0, 0, 0, 0)), var(--tw-ring-shadow, 0 0 rgba(0, 0, 0, 0)), var(--tw-shadow))}:host([layout=vertical]) .content--overlay{inset-block-start:0px;block-size:100%}:host([layout=horizontal]) .content--overlay{inset-inline-start:0px;inline-size:100%}:host([layout=vertical][position=start]) .content--overlay{inset-inline-start:100%;box-shadow:var(--calcite-internal-shell-panel-shadow-inline-start)}:host([layout=vertical][position=end]) .content--overlay{inset-inline-end:100%;box-shadow:var(--calcite-internal-shell-panel-shadow-inline-end)}:host([layout=horizontal][position=start]) .content--overlay{inset-block-start:100%;box-shadow:var(--calcite-internal-shell-panel-shadow-block-start)}:host([layout=horizontal][position=end]) .content--overlay{inset-block-end:100%;box-shadow:var(--calcite-internal-shell-panel-shadow-block-end)}.float--content{margin-block-end:auto;block-size:auto;overflow:hidden;--tw-shadow: 0 4px 8px -1px rgba(0, 0, 0, .08), 0 2px 4px -1px rgba(0, 0, 0, .04);--tw-shadow-colored: 0 4px 8px -1px var(--tw-shadow-color), 0 2px 4px -1px var(--tw-shadow-color);box-shadow:var(--calcite-shell-panel-shadow, var(--tw-ring-offset-shadow, 0 0 rgba(0, 0, 0, 0)), var(--tw-ring-shadow, 0 0 rgba(0, 0, 0, 0)), var(--tw-shadow));border-radius:var(--calcite-shell-panel-corner-radius, var(--calcite-corner-radius-round));margin-inline:var(--calcite-spacing-sm);margin-block-start:var(--calcite-spacing-sm);max-block-size:var(--calcite-internal-shell-panel-max-height, calc(100% - 1rem) )}.float--content ::slotted(calcite-panel),.float--content ::slotted(calcite-flow){max-block-size:unset}:host([layout=horizontal]) .float--content{margin-block:var(--calcite-spacing-sm)}:host([position=start]) .float--content ::slotted(calcite-panel),:host([position=start]) .float--content ::slotted(calcite-flow),:host([position=end]) .float--content ::slotted(calcite-panel),:host([position=end]) .float--content ::slotted(calcite-flow){border-style:none}slot[name=action-bar]::slotted(calcite-action-bar),.content ::slotted(calcite-flow),.content ::slotted(calcite-panel:not([closed])){border:var(--calcite-border-width-sm) solid var(--calcite-shell-border-color, var(--calcite-color-border-3))}:host([position=start]:not([slot=panel-end])) slot[name=action-bar]::slotted(calcite-action-bar),:host([position=start]:not([slot=panel-end])) .content ::slotted(calcite-flow),:host([position=start]:not([slot=panel-end])) .content ::slotted(calcite-panel),:host([position=end][slot=panel-start]) slot[name=action-bar]::slotted(calcite-action-bar),:host([position=end][slot=panel-start]) .content ::slotted(calcite-flow),:host([position=end][slot=panel-start]) .content ::slotted(calcite-panel){border-inline-start:none}:host([resizable][layout=vertical]) .content ::slotted(calcite-flow),:host([resizable][layout=vertical]) .content ::slotted(calcite-panel){border-inline-start:none;border-inline-end:none}:host([resizable][layout=horizontal]) .content ::slotted(calcite-flow),:host([resizable][layout=horizontal]) .content ::slotted(calcite-panel){border-block-start:none;border-block-end:none}:host([position=end]:not([slot=panel-start])) slot[name=action-bar]::slotted(calcite-action-bar),:host([position=end]:not([slot=panel-start])) .content ::slotted(calcite-flow),:host([position=end]:not([slot=panel-start])) .content ::slotted(calcite-panel),:host([position=start][slot=panel-end]) slot[name=action-bar]::slotted(calcite-action-bar),:host([position=start][slot=panel-end]) .content ::slotted(calcite-flow),:host([position=start][slot=panel-end]) .content ::slotted(calcite-panel){border-inline-end:none}:host([layout=horizontal]) slot[name=action-bar]::slotted(calcite-action-bar){border-inline:0}:host([layout=horizontal][position=start]) .content ::slotted(calcite-flow),:host([layout=horizontal][position=start]) .content ::slotted(calcite-panel){border-inline:0;border-block-start:0}:host([layout=horizontal][position=end]) .content ::slotted(calcite-flow),:host([layout=horizontal][position=end]) .content ::slotted(calcite-panel){border-inline:0;border-block-end:0}:host([hidden]){display:none}[hidden]{display:none}`,mF=class mF extends ir{constructor(){super(...arguments),this.actionBars=[],this.contentRef=Fc(),this.messages=Po(),this.resizeValues={inlineSize:null,blockSize:null,minInlineSize:null,minBlockSize:null,maxInlineSize:null,maxBlockSize:null},this.hasHeader=!1,this.collapsed=!1,this.displayMode="dock",this.layout="vertical",this.position="start",this.resizable=!1,this.widthScale="m",this.calciteInternalShellPanelResizeEnd=ot({cancelable:!1}),this.calciteInternalShellPanelResizeStart=ot({cancelable:!1}),this.calciteShellPanelCollapse=ot({cancelable:!1}),this.calciteShellPanelExpand=ot({cancelable:!1})}willUpdate(e){e.has("layout")&&(this.hasUpdated||this.layout!=="vertical")&&this.setActionBarsLayout(this.actionBars),e.has("collapsed")&&this.hasUpdated&&(this.collapsed?this.calciteShellPanelCollapse.emit():this.calciteShellPanelExpand.emit())}disconnectedCallback(){super.disconnectedCallback(),this.cleanupInteractions()}getContentElDOMRect(){return this.contentRef.value.getBoundingClientRect()}handleKeyDown(e){const{key:i,defaultPrevented:r,shiftKey:n}=e,{position:s,layout:o,resizable:a,contentRef:l,el:c,resizeValues:{maxBlockSize:d,maxInlineSize:f,minBlockSize:y,minInlineSize:g}}=this,_=[...o==="horizontal"?["ArrowUp","ArrowDown"]:["ArrowLeft","ArrowRight"],"Home","End"];if(!a||!l.value||r||!_.includes(i))return;const x=this.getContentElDOMRect(),E=Qu(c)==="rtl"?-1:1,C=n?VSe:zSe;switch(i){case"ArrowUp":this.updateSize({size:x.height+(o==="horizontal"&&s==="end"?C:-C),type:"blockSize"}),e.preventDefault();break;case"ArrowDown":this.updateSize({size:x.height+(o==="horizontal"&&s==="end"?-C:C),type:"blockSize"}),e.preventDefault();break;case"ArrowLeft":this.updateSize({size:x.width+(o==="vertical"&&s==="end"?C:-C)*E,type:"inlineSize"}),e.preventDefault();break;case"ArrowRight":this.updateSize({size:x.width+(o==="vertical"&&s==="end"?-C:C)*E,type:"inlineSize"}),e.preventDefault();break;case"Home":this.updateSize({size:o==="horizontal"?y:g,type:o==="horizontal"?"blockSize":"inlineSize"}),e.preventDefault();break;case"End":this.updateSize({size:o==="horizontal"?d:f,type:o==="horizontal"?"blockSize":"inlineSize"}),e.preventDefault();break}}updateSize({type:e,size:i}){const{contentRef:r,resizeValues:n}=this;if(!r.value)return;const s=e==="blockSize"?"minBlockSize":"minInlineSize",o=e==="blockSize"?"maxBlockSize":"maxInlineSize",a=n[s]&&n[o]?u_e(i,n[s],n[o]):i,l=Math.round(a);this.resizeValues={...n,[e]:l},r.value.style[e]=i!==null?`${l}px`:null}cleanupInteractions(){var e;(e=this.interaction)==null||e.unset()}async setupInteractions(){this.cleanupInteractions();const{el:e,contentRef:i,resizable:r,position:n,collapsed:s,resizeHandleEl:o,layout:a}=this;if(!i.value||s||!r||!o)return;await this.el.componentOnReady();const{inlineSize:l,minInlineSize:c,blockSize:d,minBlockSize:f,maxInlineSize:y,maxBlockSize:g}=window.getComputedStyle(i.value),b={inlineSize:M_(l),blockSize:M_(d),minInlineSize:M_(c),minBlockSize:M_(f),maxInlineSize:M_(y)||window.innerWidth,maxBlockSize:M_(g)||window.innerHeight};this.resizeValues=b;const _=Qu(e)==="rtl";this.interaction=Yse(i.value,{context:e.ownerDocument}).resizable({edges:{top:n==="end"&&a==="horizontal"?o:!1,right:n===(_?"end":"start")&&a==="vertical"?o:!1,bottom:n==="start"&&a==="horizontal"?o:!1,left:n===(_?"start":"end")&&a==="vertical"?o:!1},modifiers:[Yse.modifiers.restrictSize({min:{width:b.minInlineSize,height:b.minBlockSize},max:{width:b.maxInlineSize,height:b.maxBlockSize}})],listeners:{resizestart:()=>{this.calciteInternalShellPanelResizeStart.emit()},resizeend:()=>{this.calciteInternalShellPanelResizeEnd.emit()},move:({rect:x})=>{const E=a==="horizontal";this.updateSize({size:E?x.height:x.width,type:E?"blockSize":"inlineSize"})}}})}setResizeHandleEl(e){this.resizeHandleEl=e,this.setupInteractions()}setActionBarsLayout(e){e.forEach(i=>i.layout=this.layout)}handleActionBarSlotChange(e){const i=Rc(e).filter(r=>r==null?void 0:r.matches("calcite-action-bar"));this.actionBars=i,this.setActionBarsLayout(i)}handleHeaderSlotChange(e){this.hasHeader=lr(e)}getResizeIcon(){const{layout:e}=this;return e==="horizontal"?Qse.dragVertical:Qse.dragHorizontal}renderHeader(){return ri("header",Se`<div class=${Te(pu.contentHeader)} .hidden=${!this.hasHeader}><slot name=${Kse.header} @slotchange=${this.handleHeaderSlotChange}></slot></div>`)}render(){const{collapsed:e,position:i,resizable:r,layout:n,displayMode:s,resizeValues:o}=this,a=Qu(this.el),l=!e&&r?ri("resize-handle",Se`<div .ariaLabel=${this.messages.resize} .ariaOrientation=${n==="horizontal"?"vertical":"horizontal"} .ariaValueMax=${n=="horizontal"?o.maxBlockSize:o.maxInlineSize} .ariaValueMin=${n=="horizontal"?o.minBlockSize:o.minInlineSize} .ariaValueNow=${n=="horizontal"?o.blockSize:o.inlineSize} class=${Te(pu.resizeHandle)} @keydown=${this.handleKeyDown} role=separator tabindex=0 touch-action=none ${Ri(this.setResizeHandleEl)}><div class=${Te(pu.resizeHandleBar)}><calcite-icon .icon=${this.getResizeIcon()} scale=s></calcite-icon></div></div>`):null,c=()=>n==="horizontal"?i==="start"?Iy.calciteAnimateInDown:Iy.calciteAnimateInUp:a==="ltr"&&i==="end"||a==="rtl"&&i==="start"?Iy.calciteAnimateInLeft:Iy.calciteAnimateInRight,d=Se`<div class=${Te(pu.contentContainer)}>${ri("content",Se`<div class=${Te({[Iy.rtl]:a==="rtl",[pu.content]:!0,[pu.contentOverlay]:s==="overlay",[pu.floatContent]:s==="float-content"||s==="float",[Iy.calciteAnimate]:s==="overlay",[c()]:s==="overlay",[H9("width",this.width,this.widthScale)]:!!(this.width||this.widthScale),[H9("height",this.height,this.heightScale)]:!!(this.height||this.heightScale)})} .hidden=${e} ${Ri(this.contentRef)}>${this.renderHeader()}<div class=${Te(pu.contentBody)}><slot></slot></div>${l}</div>`)}</div>`,y=[ri("action-bar-container",Se`<div class=${Te(pu.actionBarContainer)}><slot name=${Kse.actionBar} @slotchange=${this.handleActionBarSlotChange}></slot></div>`),d];return i==="end"&&y.reverse(),Se`<div class=${Te({[pu.container]:!0,[pu.floatAll]:s==="float-all"})}>${y}</div>`}};mF.properties={resizeValues:[16,{},{state:!0}],hasHeader:[16,{},{state:!0}],collapsed:[7,{},{reflect:!0,type:Boolean}],displayMode:[3,{},{reflect:!0}],heightScale:[3,{},{reflect:!0}],layout:[3,{},{reflect:!0}],messageOverrides:[0,{},{attribute:!1}],position:[3,{},{reflect:!0}],resizable:[7,{},{reflect:!0,type:Boolean}],height:[3,{},{reflect:!0}],widthScale:[3,{},{reflect:!0}],width:[3,{},{reflect:!0}]},mF.styles=Grt;let W9=mF;rr("calcite-shell-panel",W9);const qrt=t=>e=>Wrt(e,t);class Hrt extends Gae{constructor(e,i){super(e);const r=this.exports;try{G1(this.component);const n=i(this.component,this),s=this.exports!==r;if(QSe(n)){s||this.setProvisionalExports(n);const o=n.then(a=>{this.exports=a,super.catchUpLifecycle()}).catch(a=>{this.P.reject(a),console.error(a)});this.onLoad(async()=>await o)}else(!s||n!==void 0)&&(this.exports=n),queueMicrotask(()=>super.catchUpLifecycle())}catch(n){this.P.reject(n),console.error(n)}}catchUpLifecycle(){}}const Wrt=sG(Hrt),d_e=t=>Jrt,Zrt="arcgisPropertyChange",Jrt=(...t)=>{const e=S$(),i=F7(Zrt,void 0,e);let r=!0;return e.manager.onUpdated(n=>{if(r||!e.el.isConnected){r=!1;return}for(const s of t)n.has(s)&&i.emit({name:s})}),i};function eoe(t,e){const i=t.featureReduction;return i&&i.type!=="selection"&&(!("maxScale"in i)||!i.maxScale||i.maxScale<e.scale)?i:null}const kM=-1;let $u=class extends tt{constructor(e){super(e),this._from=null,this._to=null,this._final=null,this._current=[],this._time=0,this.duration=fe("mapview-transitions-duration"),this.effects=[]}set effect(e){if(this._get("effect")!==(e=e||"")){this._set("effect",e);try{this._transitionTo(toe(e))}catch(i){this._transitionTo([]),Ie.getLogger(this).warn("Invalid Effect",{effect:e,error:i})}}}get final(){return this._final}get hasEffects(){return this.transitioning||!!this.effects.length}set scale(e){this._updateForScale(e)}get transitioning(){return this._to!==null}canTransitionTo(e){try{return this.scale>0&&ioe(this._current,toe(e),this.scale)}catch{return!1}}transitionStep(e,i){this._applyTimeTransition(e),this._updateForScale(i)}endTransition(){this._applyTimeTransition(this.duration)}_transitionTo(e){this.scale>0&&ioe(this._current,e,this.scale)?(this._final=e,this._to=se(e),Yrt(this._current,this._to,this.scale),this._from=se(this._current),this._time=0):(this._from=this._to=this._final=null,this._current=e),this._set("effects",this._current[0]?se(this._current[0].effects):[])}_applyTimeTransition(e){if(!(this._to&&this._from&&this._current&&this._final))return;this._time+=e;const i=Math.min(1,this._time/this.duration);for(let r=0;r<this._current.length;r++){const n=this._current[r],s=this._from[r],o=this._to[r];n.scale=Xrt(s.scale,o.scale,i);for(let a=0;a<n.effects.length;a++){const l=n.effects[a],c=s.effects[a],d=o.effects[a];l.interpolate(c,d,i)}}i===1&&(this._current=this._final,this._set("effects",this._current[0]?se(this._current[0].effects):[]),this._from=this._to=this._final=null)}_updateForScale(e){if(this._set("scale",e),this._current.length===0)return;const i=this._current,r=this._current.length-1;let n,s,o=1;if(i.length===1||e>=i[0].scale)s=n=i[0].effects;else if(e<=i[r].scale)s=n=i[r].effects;else for(let a=0;a<r;a++){const l=i[a],c=i[a+1];if(l.scale>=e&&c.scale<=e){o=(e-l.scale)/(c.scale-l.scale),n=l.effects,s=c.effects;break}}for(let a=0;a<this.effects.length;a++)this.effects[a].interpolate(n[a],s[a],o)}};function toe(t){const e=iH(t)||[];return Krt(e)?[{scale:kM,effects:e}]:e}function ioe(t,e,i){var r,n,s,o;return!((r=t[0])!=null&&r.effects)||!((n=e[0])!=null&&n.effects)?!0:!((((s=t[0])==null?void 0:s.scale)===kM||((o=e[0])==null?void 0:o.scale)===kM)&&(t.length>1||e.length>1)&&i<=0)&&Vpe(t[0].effects,e[0].effects)}function Yrt(t,e,i){const r=t.length>e.length?t:e,n=t.length>e.length?e:t,s=n[n.length-1],o=(s==null?void 0:s.scale)??i,a=(s==null?void 0:s.effects)??[];for(let l=n.length;l<r.length;l++)n.push({scale:o,effects:[...a]});for(let l=0;l<r.length;l++)n[l].scale=n[l].scale===kM?i:n[l].scale,r[l].scale=r[l].scale===kM?i:r[l].scale,jpe(n[l].effects,r[l].effects)}function Xrt(t,e,i){return t+(e-t)*i}function Krt(t){const e=t[0];return!!e&&"type"in e}u([h()],$u.prototype,"_to",void 0),u([h()],$u.prototype,"duration",void 0),u([h({value:""})],$u.prototype,"effect",null),u([h({readOnly:!0})],$u.prototype,"effects",void 0),u([h({readOnly:!0})],$u.prototype,"final",null),u([h({readOnly:!0})],$u.prototype,"hasEffects",null),u([h({value:0})],$u.prototype,"scale",null),u([h({readOnly:!0})],$u.prototype,"transitioning",null),$u=u([V("esri.layers.effects.EffectView")],$u);function rxt(t){var i;const e=t.layer;return"floorInfo"in e&&((i=e.floorInfo)!=null&&i.floorField)&&"floors"in t.view?h_e(t.view.floors,e.floorInfo.floorField):null}function roe(t,e){var i;return"floorInfo"in e&&((i=e.floorInfo)!=null&&i.floorField)?h_e(t,e.floorInfo.floorField):null}function h_e(t,e){if(!(t!=null&&t.length))return null;const i=t.filter((r=>r!=="")).map((r=>`'${r}'`));return i.push("''"),`${e} IN (${i.join(",")}) OR ${e} IS NULL`}function nxt(t,e,i){return e.flatten((({sublayers:n})=>n)).length!==t.length?!0:!!t.some((n=>n.originIdOf("minScale")>i||n.originIdOf("maxScale")>i||n.originIdOf("renderer")>i||n.originIdOf("labelingInfo")>i||n.originIdOf("opacity")>i||n.originIdOf("labelsVisible")>i||n.originIdOf("source")>i))||!p_e(t,e)}function Qrt(t,e,i){return!!t.some((r=>{var a,l,c;const n=r.source,s=!n||n.type==="map-layer"&&n.mapLayerId===r.id&&(n.gdbVersion==null||n.gdbVersion===i);r.commitProperty("renderer"),r.commitProperty("labelingInfo"),r.commitProperty("opacity"),r.commitProperty("labelsVisible"),r.commitProperty("orderBy");const o=((c=(l=(a=r.layer)==null?void 0:a.capabilities)==null?void 0:l.exportMap)==null?void 0:c.supportsSublayerOrderBy)??!1;return!s||r.originIdOf("renderer")>Nt.SERVICE||r.originIdOf("labelingInfo")>Nt.SERVICE||r.originIdOf("opacity")>Nt.SERVICE||r.originIdOf("labelsVisible")>Nt.SERVICE||o&&r.originIdOf("orderBy")>Nt.SERVICE}))||!p_e(t,e)}function p_e(t,e){if(!(t!=null&&t.length)||e==null)return!0;const i=e.slice().reverse().flatten((({sublayers:s})=>s&&s.toArray().reverse())).map((s=>s.id)).toArray();if(t.length>i.length)return!1;let r=0;const n=i.length;for(const{id:s}of t){for(;r<n&&i[r]!==s;)r++;if(r>=n)return!1}return!0}function sxt(t){return!!t&&t.some((e=>{var i;return e.minScale!=null||((i=e.layerDefinition)==null?void 0:i.minScale)!=null}))}const ent={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"};let dc=class extends tt{constructor(e){super(e),this.floors=null,this.scale=0}destroy(){this.layer=null}get dynamicLayers(){if(!this.hasDynamicLayers)return null;const e=this.visibleSublayers.map((i=>{const r=roe(this.floors,i);return i.toExportImageJSON(r)}));return e.length?JSON.stringify(e):null}get hasDynamicLayers(){return this.layer&&Qrt(this.visibleSublayers,this.layer.serviceSublayers,this.layer.gdbVersion)}set layer(e){this._get("layer")!==e&&(this._set("layer",e),this.removeHandles("layer"),e&&this.addHandles([e.allSublayers.on("change",(()=>this.notifyChange("visibleSublayers"))),e.on("sublayer-update",(i=>this.notifyChange(ent[i.propertyName])))],"layer"))}get layers(){const e=this.visibleSublayers;return e?e.length?"show:"+e.map((i=>i.id)).join(","):"show:-1":null}get layerDefs(){var r;const e=!!((r=this.floors)!=null&&r.length),i=this.visibleSublayers.filter((n=>n.definitionExpression!=null||e&&n.floorInfo!=null));return i.length?JSON.stringify(i.reduce(((n,s)=>{const o=roe(this.floors,s),a=aC(o,s.definitionExpression);return a!=null&&(n[s.id]=a),n}),{})):null}get version(){this.commitProperty("layers"),this.commitProperty("layerDefs"),this.commitProperty("dynamicLayers");const e=this.layer;return e&&(e.commitProperty("dpi"),e.commitProperty("imageFormat"),e.commitProperty("imageTransparency"),e.commitProperty("gdbVersion")),(this._get("version")||0)+1}get visibleSublayers(){const e=[];if(!this.layer)return e;const i=this.layer.sublayers,r=this.scale,n=o=>{o.visible&&(r===0||w8e(r,o.minScale,o.maxScale))&&(o.sublayers?o.sublayers.forEach(n):e.unshift(o))};i&&i.forEach(n);const s=this._get("visibleSublayers");return!s||s.length!==e.length||s.some(((o,a)=>e[a]!==o))?e:s}toJSON(){const e=this.layer;let i={dpi:e.dpi,format:e.imageFormat,transparent:e.imageTransparency,gdbVersion:e.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?i.dynamicLayers=this.dynamicLayers:i={...i,layers:this.layers,layerDefs:this.layerDefs},i}};u([h({readOnly:!0})],dc.prototype,"dynamicLayers",null),u([h()],dc.prototype,"floors",void 0),u([h({readOnly:!0})],dc.prototype,"hasDynamicLayers",null),u([h()],dc.prototype,"layer",null),u([h({readOnly:!0})],dc.prototype,"layers",null),u([h({readOnly:!0})],dc.prototype,"layerDefs",null),u([h({type:Number})],dc.prototype,"scale",void 0),u([h({readOnly:!0})],dc.prototype,"version",null),u([h({readOnly:!0})],dc.prototype,"visibleSublayers",null),dc=u([V("esri.layers.support.ExportImageParameters")],dc);const tnt=9999999e31,int=2e-7,rnt={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],f32:[-34028234663852886e22,34028234663852886e22],f64:[-Number.MAX_VALUE,Number.MAX_VALUE],unknown:void 0,c64:void 0,c128:void 0};function V3(t){return rnt[t]??[-34028234663852886e22,34028234663852886e22]}const nnt={u1:1,u2:1,u4:1,u8:1,s8:1,u16:2,s16:2,u32:4,s32:4,f32:4,f64:8,unknown:4,c64:16,c128:32};function snt(t){return nnt[t]}function axt(t){return snt(t.pixelType)*t.bandCount}function lxt(t,e){return t==null||e==null?"s32":t<0?t>=-128&&e<128?"s8":t>=-32768&&e<32768?"s16":"s32":e<256?"u8":e<65536?"u16":"u32"}function ont(t){return((t==null?void 0:t.startsWith("s"))||(t==null?void 0:t.startsWith("u")))??!1}function cxt(t,e,i,r){let[n,s]=V3(i);const o=ont(i);return o&&(n-=1e-5,s+=1e-5),o?i.startsWith("u")?ant(t,e,r,[n,s]):lnt(t,e,r,[n,s]):cnt(t,e,r,[n,s])}function uxt(t,e){for(let i=0;i<e.length;i++)e[i]&&isNaN(t[i])&&(e[i]=0,t[i]=0)}function ant(t,e,i,r){const[n,s]=r;for(let o=0;o<e.length;o++)if(e[o]){const a=t[o];a<n||a>s?e[o]=0:i[o]=a+.5|0}}function lnt(t,e,i,r){const[n,s]=r;for(let o=0;o<e.length;o++)if(e[o]){const a=t[o];a<n||a>s?e[o]=0:i[o]=a+(a>0?.5:-.5)|0}}function cnt(t,e,i,r){const[n,s]=r;for(let o=0;o<e.length;o++)if(e[o]){const a=t[o];a<n||a>s?e[o]=0:i[o]=a}}function dxt(t,e,i){var g,b;if(t.depthCount&&t.depthCount>1)return;const{pixels:r,statistics:n,pixelType:s}=t,o=r[0].length,a=t.bandMasks??[],l=t.mask??new Uint8Array(o).fill(255),c=s==="f32"||s==="f64",d=V3(s);let f=!1;for(let _=0;_<r.length;_++){const x=typeof e=="number"?e:e[_];if(x==null)continue;const E=((g=n==null?void 0:n[_])==null?void 0:g.minValue)??d[0],C=((b=n==null?void 0:n[_])==null?void 0:b.maxValue)??d[1];if(E>x+Number.EPSILON||C<x-Number.EPSILON)continue;const k=a[_]||l.slice(),O=r[_],D=i==null?void 0:i.customFloatTolerance;if(c&&D!==0){let B=D;B||(B=Math.abs(x)>=tnt?int*Math.abs(x):s==="f32"?2**-23:Number.EPSILON);for(let j=0;j<O.length;j++)k[j]&&Math.abs(O[j]-x)<B&&(O[j]=0,k[j]=0,l[j]=0,f=!0)}else for(let B=0;B<O.length;B++)k[B]&&O[B]===x&&(O[B]=0,k[B]=0,l[B]=0,f=!0);a[_]=k}if(f){const _=t.bandMasks||t.pixels.length>1?a:null;i!=null&&i.matchAllNoData?t.mask=_&&_.length>1?y(_):l:(t.bandMasks=_,t.mask=l)}function y(_){if(_.length<2)return _[0];const x=_[0].length,E=new Uint8Array(x).fill(0);for(let C=0;C<_.length;C++){const k=_[C];for(let O=0;O<x;O++)k[O]&&(E[O]=255)}return E}f&&"updateStatistics"in t&&t.updateStatistics()}function f_e(t){return t==null||t.type==="simple"||t.type==="unique-value"||t.type==="class-breaks"||t.type==="dictionary"||t.type==="heatmap"}function hxt(t,e){if(t==null)return null;if(!f_e(t))return new ie("renderer-conversion-3d:unsupported-renderer",`Unsupported renderer of type '${t.type||t.declaredClass}'`,{renderer:t});switch(t.type){case"simple":return unt(t,e);case"unique-value":return dnt(t,e);case"class-breaks":return hnt(t,e);case"dictionary":case"heatmap":return null}return null}function mW(t,e){if(!e)return null;if(Array.isArray(e)||(e=[e]),e.length>0){const i=e.map((n=>n.details.symbol.type||n.details.symbol.declaredClass)).filter((n=>!!n));i.sort();const r=new Array;return i.forEach(((n,s)=>{s!==0&&n===i[s-1]||r.push(n)})),new ie("renderer-conversion-3d:unsupported-symbols",`Renderer contains symbols (${r.join(", ")}) which are not supported in 3D`,{renderer:t,symbolErrors:e})}return null}function unt(t,e){const i={...Mf,...e,cimFallbackEnabled:!0};return mW(t,c$(t.symbol,i).error)}function dnt(t,e){var s;const i={...Mf,...e,cimFallbackEnabled:!0},r=(s=t.uniqueValueInfos)==null?void 0:s.map((o=>c$(o.symbol,i).error)).filter(Kr),n=c$(t.defaultSymbol,i);return n.error&&(r==null||r.unshift(n.error)),mW(t,r)}function hnt(t,e){const i={...Mf,...e,cimFallbackEnabled:!0},r=t.classBreakInfos.map((s=>c$(s.symbol,i).error)).filter(Kr),n=c$(t.defaultSymbol,i);return n.error&&r.unshift(n.error),mW(t,r)}var Z9;function pnt(t){switch(t){case"circle":return{rings:[[[8.5,.2],[7.06,.33],[5.66,.7],[4.35,1.31],[3.16,2.14],[2.14,3.16],[1.31,4.35],[.7,5.66],[.33,7.06],[.2,8.5],[.33,9.94],[.7,11.34],[1.31,12.65],[2.14,13.84],[3.16,14.86],[4.35,15.69],[5.66,16.3],[7.06,16.67],[8.5,16.8],[9.94,16.67],[11.34,16.3],[12.65,15.69],[13.84,14.86],[14.86,13.84],[15.69,12.65],[16.3,11.34],[16.67,9.94],[16.8,8.5],[16.67,7.06],[16.3,5.66],[15.69,4.35],[14.86,3.16],[13.84,2.14],[12.65,1.31],[11.34,.7],[9.94,.33],[8.5,.2]]]};case"square":return{rings:[[[.5,.5],[.5,16.5],[16.5,16.5],[16.5,.5],[.5,.5]]]};case"diamond":return{rings:[[[8.5,.5],[.2,8.5],[8.5,16.5],[16.5,8.5],[8.5,.5]]]};case"hexagon-pointy":return{rings:[[[15.86,12.75],[15.86,4.25],[8.5,0],[1.14,4.25],[1.14,12.75],[8.5,17],[15.86,12.75]]]};case"hexagon-flat":return{rings:[[[12.75,15.86],[17,8.5],[12.75,1.14],[4.25,1.14],[0,8.5],[4.25,15.86],[12.75,15.86]]]}}}function yW(t){var e;return(t==null?void 0:t.type)==="CIMVectorMarker"?(e=t.markerGraphics)==null?void 0:e[0]:void 0}function m_e(t){var e,i;return((e=t==null?void 0:t.symbol)==null?void 0:e.type)==="CIMPolygonSymbol"?(i=t.symbol.symbolLayers)==null?void 0:i[0]:void 0}function fnt(t,e){(t==null?void 0:t.type)==="CIMVectorMarker"&&e!=null&&(t.size=e)}function mnt(t,e){const i=yW(t);i&&e!=null&&(i.geometry=pnt(e))}function ynt(t,e){const i=m_e(yW(t));i&&e!=null&&(i.color=e.toArray())}function gnt(t,e,i){const r=m_e(yW(t));r&&e!=null&&i&&(r.colorLocked=e)}function gW(t,e){var c;const{outerRingSize:i,innerDotSize:r,type:n,color:s,colorLocked:o,primitiveOverrides:a}=e,l=((c=t.data.symbol)==null?void 0:c.type)==="CIMPolygonSymbol"?t.data.symbol.symbolLayers:null;if((l==null?void 0:l.length)===2)for(const d of l){const f=d.primitiveName===Z9.OuterRing;fnt(d,f?i:r),mnt(d,n),ynt(d,s),gnt(d,o,f)}return i!=null&&r!=null&&(t.data.primitiveOverrides=null),a!==void 0&&(t.data.primitiveOverrides=se(a)),t}(function(t){t.OuterRing="reference-size-outer-ring",t.InnerDot="reference-size-inner-dot"})(Z9||(Z9={}));function vnt(t,e,i){const r=t.effectiveClusterRenderer;if(!r||!("visualVariables"in r)||!r.visualVariables)return null;const n=r.visualVariables.find((d=>d.type==="size"));if(!("stops"in n)||!n.stops)return null;const s=n.stops.find((d=>d.useMinValue)),o=n.stops.find((d=>d.useMaxValue));if(s==null||o==null)return null;const a=i.featuresTilingScheme.getClosestInfoForScale(i.scale).level,l=n.field,c=e.getDisplayStatistics(a,l);return c?new $i({field:n.field,minSize:t.clusterMinSize,minDataValue:c.minValue,maxSize:t.clusterMaxSize,maxDataValue:c.maxValue}):null}const bnt="spike-height-override";function wnt(t){var a;const{strokeColor:e,strokeWidth:i,symbolStyle:r}=t,n=(r==null?void 0:r.includes("solid-fill"))||(r==null?void 0:r.includes("gradient-fill"));let s=e==null?void 0:e.toArray(),o=!1;return r!=null&&r.includes("outline")&&n?o=!0:s=(a=t.color)==null?void 0:a.toArray(),{type:"CIMSolidStroke",effects:_nt(r),enable:!0,colorLocked:o,capStyle:qa.Round,joinStyle:Lc.Round,lineStyle3D:X8.Strip,miterLimit:4,width:i??ji(1),color:s}}function _nt(t){if(!(t!=null&&t.includes("closed")))return[{type:"CIMGeometricEffectAddControlPoints",angleTolerance:90,primitiveName:"spike-control-points"},{type:"CIMGeometricEffectSuppress",suppress:!0,invert:!0,primitiveName:"spike-stroke-suppress"}]}function noe(t){const{color:e,symbolStyle:i}=t,r=i==null?void 0:i.includes("solid-fill"),n=i==null?void 0:i.includes("gradient-fill");if(!r&&!n||!e)return;if(r)return{type:"CIMSolidFill",enable:!0,colorLocked:!1,color:e==null?void 0:e.toArray()};const s=e.clone();return s.a=0,{type:"CIMGradientFill",enable:!0,angle:90,colorRamp:{type:"CIMMultipartColorRamp",colorRamps:[{type:"CIMLinearContinuousColorRamp",fromColor:e.toArray(),toColor:s.toArray()}],weights:[1]},gradientMethod:"Linear",gradientSize:70,gradientSizeUnits:"Relative",gradientType:"Continuous"}}function y_e(t,e){var C,k,O;const{defaultHeight:i,baseWidth:r,color:n,strokeColor:s,primitiveOverrides:o,symbolStyle:a,strokeWidth:l}=e,c=((C=t.data.symbol)==null?void 0:C.type)==="CIMPointSymbol"?t.data.symbol:null,d=c==null?void 0:c.symbolLayers;if(!d)return t;const f=c.effects,y=f==null?void 0:f.find((D=>D.type==="CIMGeometricEffectTaperedPolygon")),g=f==null?void 0:f.find((D=>D.type==="CIMGeometricEffectRadial"&&D.primitiveName===bnt));r!=null&&y&&(y.fromWidth=r),i!=null&&g&&(g.length=i);const b=d==null?void 0:d.find((D=>D.type==="CIMSolidStroke")),_=d==null?void 0:d.find((D=>D.type==="CIMSolidFill")),x=d==null?void 0:d.find((D=>D.type==="CIMGradientFill")),E=((k=x==null?void 0:x.colorRamp)==null?void 0:k.type)==="CIMMultipartColorRamp"&&((O=x.colorRamp.colorRamps[0])==null?void 0:O.type)==="CIMLinearContinuousColorRamp"?x.colorRamp.colorRamps[0]:null;if(a){const D=(_==null?void 0:_.color)??(E==null?void 0:E.fromColor)??(b==null?void 0:b.color),B=n??(D?new _e(D):void 0),j=(b==null?void 0:b.color)??D,Z=s??(j?new _e(j):void 0),X=a.includes("solid-fill"),ee=a.includes("gradient-fill");if(X||ee||yV(d,_??x),B){if(X)yV(d,x),_?_.color=B==null?void 0:B.toArray():d.push(noe({...e,color:B}));else if(ee)if(yV(d,_),x){if(E&&n){const pe=B.clone();pe.a=0,E.fromColor=B.toArray(),E.toColor=pe.toArray()}}else d.push(noe({...e,color:B}))}if(b){const pe=wnt({...e,strokeColor:Z,color:B});b.effects=pe.effects,b.color=pe.color,b.width=pe.width,b.colorLocked=pe.colorLocked}}else if(b&&(s&&(b.color=s.toArray()),l!=null&&(b.width=l)),_&&n&&(_.color=n.toArray()),E&&n){const D=n.clone();D.a=0,E.fromColor=n.toArray(),E.toColor=D.toArray()}return o!==void 0&&(t.data.primitiveOverrides=se(o)),t}function yV(t,e){if(!e)return;const i=t.indexOf(e);i!==-1&&t.splice(i,1)}const gA=[["(",")"],[")","("],["<",">"],[">","<"],["[","]"],["]","["],["{","}"],["}","{"],["«","»"],["»","«"],["‹","›"],["›","‹"],["⁽","⁾"],["⁾","⁽"],["₍","₎"],["₎","₍"],["≤","≥"],["≥","≤"],["〈","〉"],["〉","〈"],["﹙","﹚"],["﹚","﹙"],["﹛","﹜"],["﹜","﹛"],["﹝","﹞"],["﹞","﹝"],["﹤","﹥"],["﹥","﹤"]],m$=["آ","أ","إ","ا"],xnt=["ﻵ","ﻷ","ﻹ","ﻻ"],Snt=["ﻶ","ﻸ","ﻺ","ﻼ"],j3=["ا","ب","ت","ث","ج","ح","خ","د","ذ","ر","ز","س","ش","ص","ض","ط","ظ","ع","غ","ف","ق","ك","ل","م","ن","ه","و","ي","إ","أ","آ","ة","ى","ل","م","ن","ه","و","ي","إ","أ","آ","ة","ى","ی","ئ","ؤ"],$nt=["ﺍ","ﺏ","ﺕ","ﺙ","ﺝ","ﺡ","ﺥ","ﺩ","ﺫ","ﺭ","ﺯ","ﺱ","ﺵ","ﺹ","ﺽ","ﻁ","ﻅ","ﻉ","ﻍ","ﻑ","ﻕ","ﻙ","ﻝ","ﻡ","ﻥ","ﻩ","ﻭ","ﻱ","ﺇ","ﺃ","ﺁ","ﺓ","ﻯ","ﯼ","ﺉ","ﺅ","ﹰ","ﹲ","ﹴ","ﹶ","ﹸ","ﹺ","ﹼ","ﹾ","ﺀ","ﺉ","ﺅ"],Tnt=["ﺎ","ﺐ","ﺖ","ﺚ","ﺞ","ﺢ","ﺦ","ﺪ","ﺬ","ﺮ","ﺰ","ﺲ","ﺶ","ﺺ","ﺾ","ﻂ","ﻆ","ﻊ","ﻎ","ﻒ","ﻖ","ﻚ","ﻞ","ﻢ","ﻦ","ﻪ","ﻮ","ﻲ","ﺈ","ﺄ","ﺂ","ﺔ","ﻰ","ﯽ","ﺊ","ﺆ","ﹰ","ﹲ","ﹴ","ﹶ","ﹸ","ﹺ","ﹼ","ﹾ","ﺀ","ﺊ","ﺆ"],Ent=["ﺎ","ﺒ","ﺘ","ﺜ","ﺠ","ﺤ","ﺨ","ﺪ","ﺬ","ﺮ","ﺰ","ﺴ","ﺸ","ﺼ","ﻀ","ﻄ","ﻈ","ﻌ","ﻐ","ﻔ","ﻘ","ﻜ","ﻠ","ﻤ","ﻨ","ﻬ","ﻮ","ﻴ","ﺈ","ﺄ","ﺂ","ﺔ","ﻰ","ﯿ","ﺌ","ﺆ","ﹱ","ﹲ","ﹴ","ﹷ","ﹹ","ﹻ","ﹽ","ﹿ","ﺀ","ﺌ","ﺆ"],Int=["ﺍ","ﺑ","ﺗ","ﺛ","ﺟ","ﺣ","ﺧ","ﺩ","ﺫ","ﺭ","ﺯ","ﺳ","ﺷ","ﺻ","ﺿ","ﻃ","ﻇ","ﻋ","ﻏ","ﻓ","ﻗ","ﻛ","ﻟ","ﻣ","ﻧ","ﻫ","ﻭ","ﻳ","ﺇ","ﺃ","ﺁ","ﺓ","ﻯ","ﯾ","ﺋ","ﺅ","ﹰ","ﹲ","ﹴ","ﹶ","ﹸ","ﹺ","ﹼ","ﹾ","ﺀ","ﺋ","ﺅ"],soe=["ء","آ","أ","ؤ","إ","ا","ة","د","ذ","ر","ز","و","ى"],Cnt=["ً","ً","ٌ","؟","ٍ","؟","َ","َ","ُ","ُ","ِ","ِ","ّ","ّ","ْ","ْ","ء","آ","آ","أ","أ","ؤ","ؤ","إ","إ","ئ","ئ","ئ","ئ","ا","ا","ب","ب","ب","ب","ة","ة","ت","ت","ت","ت","ث","ث","ث","ث","ج","ج","ج","ج","ح","ح","ح","ح","خ","خ","خ","خ","د","د","ذ","ذ","ر","ر","ز","ز","س","س","س","س","ش","ش","ش","ش","ص","ص","ص","ص","ض","ض","ض","ض","ط","ط","ط","ط","ظ","ظ","ظ","ظ","ع","ع","ع","ع","غ","غ","غ","غ","ف","ف","ف","ف","ق","ق","ق","ق","ك","ك","ك","ك","ل","ل","ل","ل","م","م","م","م","ن","ن","ن","ن","ه","ه","ه","ه","و","و","ى","ى","ي","ي","ي","ي","ﻵ","ﻶ","ﻷ","ﻸ","ﻹ","ﻺ","ﻻ","ﻼ","؟","؟","؟"],ooe=["ء","ف"],Mnt=["غ","ي"],knt=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],Pnt=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],N=0,Oe=1,$t=2,fn=3,A=4,nh=5,bR=6,L=7,mo=8,Go=9,fu=10,zt=11,ce=12,Ant=13,Lnt=14,Rnt=15,Ont=16,Fnt=17,ut=18,Nnt=["UBAT_L","UBAT_R","UBAT_EN","UBAT_AN","UBAT_ON","UBAT_B","UBAT_S","UBAT_AL","UBAT_WS","UBAT_CS","UBAT_ES","UBAT_ET","UBAT_NSM","UBAT_LRE","UBAT_RLE","UBAT_PDF","UBAT_LRO","UBAT_RLO","UBAT_BN"],th=100,Dnt=[th+0,N,N,N,N,th+1,th+2,th+3,Oe,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,th+4,A,A,A,N,A,N,A,N,A,A,A,N,N,A,A,N,N,N,N,N,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,N,N,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,N,N,N,N,N,N,N,N,N,N,N,N,N,N,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,N,N,A,A,N,N,A,A,N,N,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,N,N,N,th+5,L,L,th+6,th+7],znt=[[ut,ut,ut,ut,ut,ut,ut,ut,ut,bR,nh,bR,mo,nh,ut,ut,ut,ut,ut,ut,ut,ut,ut,ut,ut,ut,ut,ut,nh,nh,nh,bR,mo,A,A,zt,zt,zt,A,A,A,A,A,fu,Go,fu,Go,Go,$t,$t,$t,$t,$t,$t,$t,$t,$t,$t,Go,A,A,A,A,A,A,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,A,A,A,A,A,A,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,A,A,A,A,ut,ut,ut,ut,ut,ut,nh,ut,ut,ut,ut,ut,ut,ut,ut,ut,ut,ut,ut,ut,ut,ut,ut,ut,ut,ut,ut,ut,ut,ut,ut,ut,ut,Go,A,zt,zt,zt,zt,A,A,A,A,N,A,A,ut,A,A,zt,zt,$t,$t,A,N,A,A,A,$t,N,A,A,A,A,A,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,A,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,A,N,N,N,N,N,N,N,N],[N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,A,A,A,A,A,A,A,A,A,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,A,A,N,N,N,N,N,N,N,A,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,A,N,A,A,A,A,A,A,A,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,Oe,ce,Oe,ce,ce,Oe,ce,ce,Oe,ce,A,A,A,A,A,A,A,A,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,A,A,A,A,A,Oe,Oe,Oe,Oe,Oe,A,A,A,A,A,A,A,A,A,A,A],[fn,fn,fn,fn,A,A,A,A,L,zt,zt,L,Go,L,A,A,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,L,A,A,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,fn,fn,fn,fn,fn,fn,fn,fn,fn,fn,zt,fn,fn,L,L,L,ce,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,ce,ce,ce,ce,ce,ce,ce,fn,A,ce,ce,ce,ce,ce,ce,L,L,ce,ce,A,ce,ce,ce,ce,L,L,$t,$t,$t,$t,$t,$t,$t,$t,$t,$t,L,L,L,L,L,L],[L,L,L,L,L,L,L,L,L,L,L,L,L,L,A,L,L,ce,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,A,A,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,L,A,A,A,A,A,A,A,A,A,A,A,A,A,A,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,ce,ce,ce,ce,ce,ce,ce,ce,ce,Oe,Oe,A,A,A,A,Oe,A,A,A,A,A],[mo,mo,mo,mo,mo,mo,mo,mo,mo,mo,mo,ut,ut,ut,N,Oe,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,mo,nh,Ant,Lnt,Rnt,Ont,Fnt,Go,zt,zt,zt,zt,zt,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,Go,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,mo,ut,ut,ut,ut,ut,A,A,A,A,A,ut,ut,ut,ut,ut,ut,$t,N,A,A,$t,$t,$t,$t,$t,$t,fu,fu,A,A,A,N,$t,$t,$t,$t,$t,$t,$t,$t,$t,$t,fu,fu,A,A,A,A,N,N,N,N,N,N,N,N,N,N,N,N,N,A,A,A,zt,zt,zt,zt,zt,zt,zt,zt,zt,zt,zt,zt,zt,zt,zt,zt,zt,zt,zt,zt,zt,zt,zt,zt,zt,zt,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A],[N,N,N,N,N,N,N,A,A,A,A,A,A,A,A,A,A,A,A,N,N,N,N,N,A,A,A,A,A,Oe,ce,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,fu,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,A,Oe,Oe,Oe,Oe,Oe,A,Oe,A,Oe,Oe,A,Oe,Oe,A,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L],[ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,ce,ce,ce,ce,ce,ce,ce,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,Go,A,Go,A,A,Go,A,A,A,A,A,A,A,A,A,zt,A,A,fu,fu,A,A,A,A,A,zt,zt,A,A,A,A,A,L,L,L,L,L,A,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,A,A,ut],[A,A,A,zt,zt,zt,A,A,A,A,A,fu,Go,fu,Go,Go,$t,$t,$t,$t,$t,$t,$t,$t,$t,$t,Go,A,A,A,A,A,A,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,A,A,A,A,A,A,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,A,A,A,A,A,A,A,A,A,A,A,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,A,A,A,N,N,N,N,N,N,A,A,N,N,N,N,N,N,A,A,N,N,N,N,N,N,A,A,N,N,N,A,A,A,zt,zt,A,A,A,zt,zt,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A]];let Vnt=class{constructor(){this.inputFormat="ILYNN",this.outputFormat="VLNNN",this.sourceToTarget=[],this.targetToSource=[],this.levels=[]}bidiTransform(e,i,r){if(this.sourceToTarget=[],this.targetToSource=[],!e)return"";if(rst(this.sourceToTarget,this.targetToSource,e.length),!this.checkParameters(i,r))return e;i=this.inputFormat,r=this.outputFormat;let n=e;const s=sst,o=coe(i.charAt(1)),a=coe(r.charAt(1)),l=(i.charAt(0)==="I"?"L":i.charAt(0))+o,c=(r.charAt(0)==="I"?"L":r.charAt(0))+a,d=i.charAt(2)+r.charAt(2);s.defInFormat=l,s.defOutFormat=c,s.defSwap=d;const f=OI(e,l,c,d,s);let y=!1;return r.charAt(1)==="R"?y=!0:r.charAt(1)!=="C"&&r.charAt(1)!=="D"||(y=this.checkContextual(f)==="rtl"),this.sourceToTarget=Ml,this.targetToSource=nst(this.sourceToTarget),B3=this.targetToSource,n=i.charAt(3)===r.charAt(3)?f:r.charAt(3)==="S"?Unt(y,f):qnt(f,y,!0),this.sourceToTarget=Ml,this.targetToSource=B3,this.levels=dD,n}_inputFormatSetter(e){if(!uoe.test(e))throw new Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.inputFormat=e}_outputFormatSetter(e){if(!uoe.test(e))throw new Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.outputFormat=e}checkParameters(e,i){return e?this._inputFormatSetter(e):e=this.inputFormat,i?this._outputFormatSetter(i):i=this.outputFormat,e!==i}checkContextual(e){let i=U3(e);if(i!=="ltr"&&i!=="rtl"){try{i=document.dir.toLowerCase()}catch{}i!=="ltr"&&i!=="rtl"&&(i="ltr")}return i}hasBidiChar(e){return lst.test(e)}};function OI(t,e,i,r,n){const s=jnt(t,{inFormat:e,outFormat:i,swap:r},n);if(s.inFormat===s.outFormat)return t;e=s.inFormat,i=s.outFormat,r=s.swap;const o=e.slice(0,1),a=e.slice(1,4),l=i.slice(0,1),c=i.slice(1,4);if(n.inFormat=e,n.outFormat=i,n.swap=r,o==="L"&&i==="VLTR"){if(a==="LTR")return n.dir=N_,ny(t,n);if(a==="RTL")return n.dir=FI,ny(t,n)}if(o==="V"&&l==="V")return n.dir=a==="RTL"?FI:N_,gV(t,n);if(o==="L"&&i==="VRTL")return a==="LTR"?(n.dir=N_,t=ny(t,n)):(n.dir=FI,t=ny(t,n)),gV(t);if(e==="VLTR"&&i==="LLTR")return n.dir=N_,ny(t,n);if(o==="V"&&l==="L"&&a!==c)return t=gV(t),a==="RTL"?OI(t,"LLTR","VLTR",r,n):OI(t,"LRTL","VRTL",r,n);if(e==="VRTL"&&i==="LRTL")return OI(t,"LRTL","VRTL",r,n);if(o==="L"&&l==="L"){const d=n.swap;return n.swap=d.slice(0,1)+"N",a==="RTL"?(n.dir=FI,t=ny(t,n),n.swap="N"+d.slice(1,3),n.dir=N_,t=ny(t,n)):(n.dir=N_,t=ny(t,n),n.swap="N"+d.slice(1,3),t=OI(t,"VLTR","LRTL",n.swap,n)),t}return t}function jnt(t,e,i){if(e.inFormat===void 0&&(e.inFormat=i.defInFormat),e.outFormat===void 0&&(e.outFormat=i.defOutFormat),e.swap===void 0&&(e.swap=i.defSwap),e.inFormat===e.outFormat)return e;const r=e.inFormat.slice(0,1),n=e.outFormat.slice(0,1);let s,o=e.inFormat.slice(1,4),a=e.outFormat.slice(1,4);return o.charAt(0)==="C"&&(s=U3(t),o=s==="ltr"||s==="rtl"?s.toUpperCase():e.inFormat.charAt(2)==="L"?"LTR":"RTL",e.inFormat=r+o),a.charAt(0)==="C"&&(s=U3(t),s==="rtl"?a="RTL":s==="ltr"?(s=Gnt(t),a=s.toUpperCase()):a=e.outFormat.charAt(2)==="L"?"LTR":"RTL",e.outFormat=n+a),e}function Unt(t,e,i){if(e.length===0)return"";t===void 0&&(t=!0);const r=(e=String(e)).split("");let n=0,s=1,o=r.length;t||(n=r.length-1,s=-1,o=1);const a=Bnt(r,n,s,o);let l="";for(let c=0;c<r.length;c++)Jnt(a,a.length,c)>-1?(b_e(B3,c,!t,-1),Ml.splice(c,1)):l+=r[c];return l}function Bnt(t,e,i,r,n){let s=0;const o=[];let a=0;for(let l=e;l*i<r;l+=i)if(v_e(t[l])||PM(t[l])){if(t[l]==="ل"&&Ynt(t,l+i,i,r)){t[l]=ist(t[l+i],s===0?xnt:Snt),l+=i,tst(t,l,i,r),o[a]=l,a++,s=0;continue}const c=t[l];s===1?t[l]=aoe(t,l+i,i,r)?est(t[l]):vV(t[l],Tnt):aoe(t,l+i,i,r)===!0?t[l]=vV(t[l],Int):t[l]=vV(t[l],$nt),PM(c)||(s=1),Qnt(c)===!0&&(s=0)}else s=0;return o}function U3(t){const e=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(t);return e?e[0]<="z"?"ltr":"rtl":""}function Gnt(t){const e=t.split("");return e.reverse(),U3(e.join(""))}function qnt(t,e,i){if(t.length===0)return"";e===void 0&&(e=!0);let r="";const n=(t=String(t)).split("");for(let s=0;s<t.length;s++){let o=!1;if(n[s]>="ﹰ"&&n[s]<"\uFEFF"){const a=t.charCodeAt(s);n[s]>="ﻵ"&&n[s]<="ﻼ"?(e?(s>0&&i&&n[s-1]===" "?r=r.slice(0,-1)+"ل":(r+="ل",o=!0),r+=m$[(a-65269)/2]):(r+=m$[(a-65269)/2],r+="ل",s+1<t.length&&i&&n[s+1]===" "?s++:o=!0),o&&(b_e(B3,s,!0,1),Ml.splice(s,0,Ml[s]))):r+=Cnt[a-65136]}else r+=n[s]}return r}function ny(t,e){const i=t.split(""),r=[];return g_e(i,r,e),Wnt(i,r,e),loe(2,i,r,e),loe(1,i,r,e),dD=r,i.join("")}function g_e(t,e,i){const r=t.length,n=i.dir?Pnt:knt;let s=0,o=-1;const a=[],l=[];i.hiLevel=i.dir,i.lastArabic=!1,i.hasUbatAl=!1,i.hasUbatB=!1,i.hasUbatS=!1;for(let c=0;c<r;c++)a[c]=Znt(t[c]);for(let c=0;c<r;c++){const d=s,f=Xnt(t,a,l,c,i);l[c]=f,s=n[d][f];const y=240&s;s&=15;const g=n[s][ost];if(e[c]=g,y>0)if(y===16){for(let b=o;b<c;b++)e[b]=1;o=-1}else o=-1;if(n[s][ast])o===-1&&(o=c);else if(o>-1){for(let b=o;b<c;b++)e[b]=g;o=-1}a[c]===nh&&(e[c]=0),i.hiLevel|=g}i.hasUbatS&&Hnt(a,e,r,i)}function Hnt(t,e,i,r){for(let n=0;n<i;n++)if(t[n]===bR){e[n]=r.dir;for(let s=n-1;s>=0&&t[s]===mo;s--)e[s]=r.dir}}function Wnt(t,e,i){if(i.hiLevel!==0&&i.swap[0]!==i.swap[1])for(let r=0;r<t.length;r++)e[r]===1&&(t[r]=Knt(t[r]))}function Znt(t){const e=t.charCodeAt(0),i=Dnt[e>>8];return i<th?i:znt[i-th][255&e]}function gV(t,e){const i=t.split("");if(e){const r=[];g_e(i,r,e),dD=r}return i.reverse(),Ml.reverse(),i.join("")}function Jnt(t,e,i){for(let r=0;r<e;r++)if(t[r]===i)return r;return-1}function v_e(t){for(let e=0;e<ooe.length;e++)if(t>=ooe[e]&&t<=Mnt[e])return!0;return!1}function aoe(t,e,i,r){for(;e*i<r&&PM(t[e]);)e+=i;return!!(e*i<r&&v_e(t[e]))}function Ynt(t,e,i,r){for(;e*i<r&&PM(t[e]);)e+=i;let n=" ";if(!(e*i<r))return!1;n=t[e];for(let s=0;s<m$.length;s++)if(m$[s]===n)return!0;return!1}function loe(t,e,i,r){if(r.hiLevel<t)return;if(t===1&&r.dir===FI&&!r.hasUbatB)return e.reverse(),void Ml.reverse();const n=e.length;let s,o,a,l,c,d=0;for(;d<n;){if(i[d]>=t){for(s=d+1;s<n&&i[s]>=t;)s++;for(o=d,a=s-1;o<a;o++,a--)l=e[o],e[o]=e[a],e[a]=l,c=Ml[o],Ml[o]=Ml[a],Ml[a]=c;d=s}d++}}function Xnt(t,e,i,r,n){const s=e[r];return{UBAT_L:()=>(n.lastArabic=!1,N),UBAT_R:()=>(n.lastArabic=!1,Oe),UBAT_ON:()=>A,UBAT_AN:()=>fn,UBAT_EN:()=>n.lastArabic?fn:$t,UBAT_AL:()=>(n.lastArabic=!0,n.hasUbatAl=!0,Oe),UBAT_WS:()=>A,UBAT_CS:()=>{let o,a;return r<1||r+1>=e.length||(o=i[r-1])!==$t&&o!==fn||(a=e[r+1])!==$t&&a!==fn?A:(n.lastArabic&&(a=fn),a===o?a:A)},UBAT_ES:()=>(r>0?i[r-1]:nh)===$t&&r+1<e.length&&e[r+1]===$t?$t:A,UBAT_ET:()=>{if(r>0&&i[r-1]===$t)return $t;if(n.lastArabic)return A;let o=r+1;const a=e.length;for(;o<a&&e[o]===zt;)o++;return o<a&&e[o]===$t?$t:A},UBAT_NSM:()=>{if(n.inFormat==="VLTR"){const o=e.length;let a=r+1;for(;a<o&&e[a]===ce;)a++;if(a<o){const l=t[r].charCodeAt(0),c=l>=1425&&l<=2303||l===64286,d=e[a];if(c&&(d===Oe||d===L))return Oe}}return r<1||e[r-1]===nh?A:i[r-1]},UBAT_B:()=>(n.lastArabic=!0,n.hasUbatB=!0,n.dir),UBAT_S:()=>(n.hasUbatS=!0,A),UBAT_LRE:()=>(n.lastArabic=!1,A),UBAT_RLE:()=>(n.lastArabic=!1,A),UBAT_LRO:()=>(n.lastArabic=!1,A),UBAT_RLO:()=>(n.lastArabic=!1,A),UBAT_PDF:()=>(n.lastArabic=!1,A),UBAT_BN:()=>A}[Nnt[s]]()}function Knt(t){let e,i=0,r=gA.length-1;for(;i<=r;)if(e=Math.floor((i+r)/2),t<gA[e][0])r=e-1;else{if(!(t>gA[e][0]))return gA[e][1];i=e+1}return t}function Qnt(t){for(let e=0;e<soe.length;e++)if(soe[e]===t)return!0;return!1}function est(t){for(let e=0;e<j3.length;e++)if(t===j3[e])return Ent[e];return t}function vV(t,e){for(let i=0;i<j3.length;i++)if(t===j3[i])return e[i];return t}function PM(t){return t>="ً"&&t<="ٕ"}function coe(t){return t==="L"?"LTR":t==="R"?"RTL":t==="C"?"CLR":t==="D"?"CRL":""}function tst(t,e,i,r){for(;e*i<r&&PM(t[e]);)e+=i;return e*i<r&&(t[e]=" ",!0)}function ist(t,e){for(let i=0;i<m$.length;i++)if(t===m$[i])return e[i];return t}function rst(t,e,i){Ml=[],dD=[];for(let r=0;r<i;r++)t[r]=r,e[r]=r,Ml[r]=r}function nst(t){const e=new Array(t.length);for(let i=0;i<t.length;i++)e[t[i]]=i;return e}function b_e(t,e,i,r){for(let n=0;n<t.length;n++)(t[n]>e||!i&&t[n]===e)&&(t[n]+=r)}let Ml=[],B3=[],dD=[];const sst={dir:0,defInFormat:"LLTR",defSwap:"YN",inFormat:"LLTR",outFormat:"VLTR",swap:"YN",hiLevel:0,lastArabic:!1,hasUbatAl:!1,defOutFormat:""},ost=5,ast=6,N_=0,FI=1,uoe=/^[(I|V)][(L|R|C|D)][(Y|N)][(S|N)][N]$/,lst=/[\u0591-\u06ff\ufb1d-\ufefc]/,bV=new Vnt;function cst(t){if(t==null)return["",!1];if(!bV.hasBidiChar(t))return[t,!1];let e;return e=bV.checkContextual(t)==="rtl"?"IDNNN":"ICNNN",[bV.bidiTransform(t,e,"VLYSN"),!0]}let Q$=class{constructor(){this.setIdentity()}getAngle(){return(this.rz==null||this.rz===0&&this.rzCos!==1&&this.rzSin!==0)&&(this.rz=Math.atan2(this.rzSin,this.rzCos)),this.rz}setIdentity(){this.tx=0,this.ty=0,this.tz=0,this.s=1,this.rx=0,this.ry=0,this.rz=0,this.rzCos=1,this.rzSin=0}setTranslate(e,i){this.tx=e,this.ty=i}setTranslateZ(e){this.tz=e}setRotateCS(e,i){this.rz=void 0,this.rzCos=e,this.rzSin=i}setRotate(e){this.rz=e,this.rzCos=void 0,this.rzSin=void 0}setRotateY(e){this.ry=e}setScale(e){this.s=e}setMeasure(e){this.m=e}};const vW="arial-unicode-ms",doe="woff2",hoe=new Map,w_e=new Set;let ust=class{constructor(e,i){this.fontFace=e,this.promise=i}};async function dst(t){const e=fst(t),i=pst(t),r=hoe.get(e);if(r)return r.promise;const n=new FontFace(t.family,`url('${Si.fontsUrl}/woff2/${i}.${doe}') format('${doe}')`,{style:t.style,weight:t.weight}),s=document.fonts;if(s.has(n)&&n.status==="loading")return n.loaded;const o=n.load().then((()=>(s.add(n),n)));return hoe.set(e,new ust(n,o)),w_e.add(n),o}function yxt(t){return w_e.has(t)}function hst(t){if(!t)return vW;const e=t.toLowerCase().split(" ").join("-");switch(e){case"serif":return"noto-serif";case"sans-serif":return"arial-unicode-ms";case"monospace":return"ubuntu-mono";case"fantasy":return"cabin-sketch";case"cursive":return"redressed";default:return e}}function pst(t){const e=__e(t)+x_e(t);return hst(t.family)+(e.length>0?e:"-regular")}function fst(t){const e=__e(t)+x_e(t);return(t.family||vW)+(e.length>0?e:"-regular")}function __e(t){if(!t.weight)return"";switch(t.weight.toLowerCase()){case"bold":case"bolder":return"-bold"}return""}function x_e(t){if(!t.style)return"";switch(t.style.toLowerCase()){case"italic":case"oblique":return"-italic"}return""}let Ui=class{static fromOptimized(e,i,r=!1,n=!1,s=1){return new J9().initialize(e,i,r,n,s)}static fromJSON(e,i=!1,r=!1){const[n,s]=poe(e);return new X9().initialize(n,s,i,r,1)}static fromOptimizedCIM(e,i,r=!1,n=!1,s=1){return new foe().initialize(e,i,r,n,s)}static fromJSONCIM(e,i=!1,r=!1,n=1){const[s,o]=poe(e);return new moe().initialize(s,o,i,r,n)}static fromFeatureSetReader(e){const i=e.readGeometryForDisplay(),r=e.geometryType;return i&&r?this.fromOptimized(i,r):null}static fromFeatureSetReaderCIM(e){const i=e.readGeometryForDisplay(),r=e.geometryType;return i&&r?this.fromOptimizedCIM(i,r):null}static createEmptyOptimized(e,i=!1,r=!1,n=1){return new J9().initialize(new rp,e,i,r,n)}static createEmptyJSON(e,i=!1,r=!1){return new X9().initialize([],e,i,r,1)}static createEmptyOptimizedCIM(e,i=!1,r=!1,n=1){return new foe().initialize(new rp,e,i,r,n)}static createEmptyJSONCIM(e,i=!1,r=!1,n=1){return new moe().initialize([],e,i,r,n)}asJSON(){const e=ZF(this);return this.geometryType==="esriGeometryEnvelope"?{xmin:e[0][0][0],ymin:e[0][0][1],xmax:e[0][2][0],ymax:e[0][2][1]}:this.geometryType==="esriGeometryMultipoint"?{points:e.flat()}:this.geometryType==="esriGeometryPoint"?{x:e[0][0][0],y:e[0][0][1]}:this.geometryType==="esriGeometryPolygon"?{rings:e}:{paths:e}}getCurrentRingArea(){if(this.pathSize<3)return 0;let e,i,r=0;if(this.seekPathStart(),!this.nextPoint())return 0;e=this.x,i=this.y;const n=e,s=i;for(;this.nextPoint();)r+=(e-this.x)*(i+this.y),e=this.x,i=this.y;return r+=(e-n)*(i+s),-.5*r}invertY(){this.yFactor*=-1}},J9=class Y9 extends Ui{constructor(){super(...arguments),this._end=-1}initialize(e,i,r,n,s){return this.hasZ=r,this.hasM=n,this.geometryType=i,this._stride=2+Number(r)+Number(n),this._geometry=e,this._pathIndex=-1,this._pathOffset=0,this._pointOffset=-this._stride,this._end=-1,this.yFactor=s,this}reset(){this.initialize(this._geometry,this.geometryType,this.hasZ,this.hasM,this.yFactor)}seekPath(e){if(e>=0&&e<this.totalSize){if(this._pathIndex<e)for(;this._pathIndex<e&&this.nextPath(););else if(this._pathIndex>e)for(;this._pathIndex>e&&this.prevPath(););return!0}return!1}seekPathStart(){this._pointOffset=this._pathOffset-this._stride}seekPathEnd(){this._pointOffset=this._end}seekInPath(e){const i=this._pathOffset+e*this._stride;return i>=0&&i<this._end&&(this._pointOffset=i,!0)}nextPoint(){return(this._pointOffset+=this._stride)<this._end}prevPoint(){return(this._pointOffset-=this._stride)>=this._pathOffset}nextPath(){return!(this.pathIndex>=this.totalSize-1)&&(this._pathIndex>=0&&(this._pathOffset+=this._stride*this.pathSize),this._pathIndex++,this._pointOffset=this._pathOffset-this._stride,this._end=this._pointOffset+this._stride+this._stride*this.pathSize,!0)}prevPath(){return!(this.pathIndex<=0)&&(this._pathIndex--,this._end=this._pathOffset,this._pathOffset-=this._stride*this.pathSize,this._pointOffset=this._pathOffset-this._stride,!0)}getCurrentPath(){const e=this._end,i=this._geometry.coords,r=this._pathOffset;return new Y9().initialize(new rp([this.pathSize],i.slice(r,e)),this.geometryType,this.hasZ,this.hasM,this.yFactor)}pathLength(){const e=this._end,i=this._stride,r=this._geometry.coords;let n=0;for(let s=this._pathOffset+i;s<e;s+=i){const o=r[s-i],a=r[s-i+1],l=r[s]-o,c=r[s+1]-a;n+=Math.sqrt(l*l+c*c)}return n}startPath(){this._geometry.lengths.push(0)}pushPath(e){this.startPath(),this.pushPoints(e)}pushPoint(e){for(let i=0;i<this._stride;++i)this._geometry.coords.push(e[i]);this._geometry.lengths[this.totalSize-1]++}pushXY(e,i){this._geometry.coords.push(e,i),this._geometry.lengths[this.totalSize-1]++}pushPoints(e){for(const i of e)for(let r=0;r<this._stride;++r)this._geometry.coords.push(i[r]);this._geometry.lengths[this.totalSize-1]+=e.length}pushCursor(e){const i=e.asOptimized();this._geometry.coords.push(...i.coords),this._geometry.lengths.push(...i.lengths)}asOptimized(){const e=this._geometry.clone();if(this.yFactor!==1)for(let i=1;i<e.coords.length;i+=this._stride)e.coords[i]*=this.yFactor;return this.geometryType==="esriGeometryPoint"&&(e.lengths.length=0),e}isClosed(){const e=this._geometry.coords,i=this._pathOffset,r=this._end-this._stride;for(let n=0;n<this._stride;n++)if(e[i+n]!==e[r+n])return!1;return!0}clone(){return new Y9().initialize(this._geometry.clone(),this.geometryType,this.hasZ,this.hasM,this.yFactor)}get totalPoints(){return this._geometry.isPoint?1:this._geometry.lengths.reduce(((e,i)=>e+i))}get pathSize(){const{lengths:e}=this._geometry;return this._geometry.isPoint?1:this._pathIndex<0||this._pathIndex>e.length-1?0:e[this._pathIndex]}get totalSize(){return this._geometry.isPoint?1:this._geometry.lengths.length}get x(){return this._geometry.coords[this._pointOffset]}set x(e){this._geometry.coords[this._pointOffset]=e}get y(){return this.yFactor*this._geometry.coords[this._pointOffset+1]}set y(e){this._geometry.coords[this._pointOffset+1]=this.yFactor*e}get z(){return this._geometry.coords[this._pointOffset+2]}set z(e){this._geometry.coords[this._pointOffset+2]=e}get m(){const e=this.hasZ?3:2;return this._geometry.coords[this._pointOffset+e]}set m(e){this._geometry.coords[this._pointOffset+3]=e}get pathIndex(){return this._pathIndex}get _coordIndex(){return this._pointOffset/this._stride}};function mst(t){const e=[t.x,t.y];return t.z&&e.push(t.z),t.m&&e.push(t.m),e}function poe(t){return bn(t)?[t.rings,"esriGeometryPolygon"]:Xs(t)?[t.paths,"esriGeometryPolyline"]:mx(t)?[[t.points],"esriGeometryMultipoint"]:ia(t)?[[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]],"esriGeometryEnvelope"]:JC(t)?[[[mst(t)]],"esriGeometryPoint"]:[[],"esriGeometryPolyline"]}let X9=class K9 extends Ui{initialize(e,i,r,n,s){return this._paths=e,this.geometryType=i,this.hasZ=r,this.hasM=n,this._pathIndex=this._pointIndex=-1,this.yFactor=s,this._mIndex=this.hasZ?3:2,this}reset(){this._pathIndex=this._pointIndex=-1}seekPath(e){return this._pathIndex=e,this._pointIndex=-1,e>=0&&e<this.totalSize&&(this._currentPath=this._paths[e],!0)}seekPathStart(){this._pointIndex=-1}seekPathEnd(){this._pointIndex=this._currentPath.length}seekInPath(e){return e>=0&&e<this._currentPath.length&&(this._pointIndex=e,this._currentPoint=this._currentPath[this._pointIndex],!0)}nextPoint(){return this._currentPoint=this._currentPath[++this._pointIndex],this._pointIndex<this._currentPath.length}prevPoint(){return this._currentPoint=this._currentPath[--this._pointIndex],this._pointIndex>=0}nextPath(){return this._pointIndex=-1,this._currentPath=this._paths[++this._pathIndex],this._pathIndex<this.totalSize}prevPath(){return this.pathIndex>0&&(this._pointIndex=-1,this._pathIndex--,this._currentPath=this._paths[this._pathIndex],!0)}pathLength(){const e=this._currentPath.length,i=this._currentPath;let r=0;for(let n=1;n<e;n++){const s=i[n-1],o=i[n],a=s[0],l=s[1],c=o[0]-a,d=o[1]-l;r+=Math.sqrt(c*c+d*d)}return r}startPath(){this._paths.push([])}getCurrentPath(){return new K9().initialize([this._currentPath],this.geometryType,this.hasZ,this.hasM,this.yFactor)}pushPath(e){this._paths.push(e)}pushPoint(e){this._paths[this.totalSize-1].push(e)}pushXY(e,i){this._paths[this.totalSize-1].push([e,i])}pushPoints(e){this._paths[this.totalSize-1].push(...e)}pushCursor(e){const i=ZF(e);for(const r of i)this.pushPath(r)}asOptimized(){const e=new rp;if(this.geometryType==="esriGeometryPoint")e.coords.push(...this._paths[0][0]),e.lengths.length=0;else for(const i of this._paths){for(const r of i)e.coords.push(r[0]),e.coords.push(r[1]*this.yFactor),this.hasZ&&e.coords.push(r[2]),this.hasM&&e.coords.push(r[this._mIndex]);e.lengths.push(i.length)}return e}isClosed(){const e=this._currentPath[0],i=this._currentPath[this._currentPath.length-1];for(let r=0;r<e.length;r++)if(e[r]!==i[r])return!1;return!0}clone(){return new K9().initialize(se(this._paths),this.geometryType,this.hasZ,this.hasM,this.yFactor)}get totalPoints(){return this._paths.map((e=>e.length)).reduce(((e,i)=>e+i))}get pathSize(){return this._pathIndex<0||this._pathIndex>this.totalSize-1?-1:this._paths[this._pathIndex].length}get totalSize(){return this._paths.length}get x(){return this._currentPoint[0]}set x(e){this._currentPoint[0]=e}get y(){return this.yFactor*this._currentPoint[1]}set y(e){this._currentPoint[1]=this.yFactor*e}get z(){return this._currentPoint[2]}set z(e){this._currentPoint[2]=e}get m(){return this._currentPoint[this._mIndex]}set m(e){this._currentPoint[this._mIndex]=e}get pathIndex(){return this._pathIndex}};const vA=4,bA=1;let foe=class S_e extends J9{initialize(e,i,r,n,s){return super.initialize(e,i,r,n,s),this._controlPoints||(this._controlPoints=this._controlPoints=new Array(this.totalSize).fill(void 0).map((o=>new Set))),this}startPath(){super.startPath(),this._controlPoints.push(new Set)}clone(){const e=new S_e().initialize(this._geometry.clone(),this.geometryType,this.hasZ,this.hasM,this.yFactor);return e._controlPoints=this._controlPoints,e}setControlPoint(){this._controlPoints[this.pathIndex].add(this._coordIndex)}getControlPoint(){return this._controlPoints[this.pathIndex].has(this._coordIndex)}setControlPointAt(e){this._controlPoints[this.pathIndex].add(e)}getControlPointAt(e){return this._controlPoints[this.pathIndex].has(e)}},moe=class $_e extends X9{initialize(e,i,r,n,s){return super.initialize(e,i,r,n,s)}clone(){return new $_e().initialize(se(this._paths),this.geometryType,this.hasZ,this.hasM,this.yFactor)}setControlPoint(){this._paths[this.pathIndex][this._pointIndex][vA]=bA}getControlPoint(){return this._paths[this.pathIndex][this._pointIndex][vA]===bA}setControlPointAt(e){this._paths[this.pathIndex][e][vA]=bA}getControlPointAt(e){return this._paths[this.pathIndex][e][vA]===bA}};const yst=512;var Du,$s;(function(t){t[t.Unknown=0]="Unknown",t[t.Point=1]="Point",t[t.LineString=2]="LineString",t[t.Polygon=3]="Polygon"})(Du||(Du={}));let hi=class NI{constructor(e,i){this.x=e,this.y=i}static fromArray(e){return new NI(e[0],e[1])}clone(){return new NI(this.x,this.y)}equals(e,i){return e===this.x&&i===this.y}isEqual(e){return e.x===this.x&&e.y===this.y}setCoords(e,i){return this.x=e,this.y=i,this}normalize(){const e=this.x,i=this.y,r=Math.sqrt(e*e+i*i);return this.x/=r,this.y/=r,this}rightPerpendicular(){const e=this.x;return this.x=this.y,this.y=-e,this}leftPerpendicular(){const e=this.x;return this.x=-this.y,this.y=e,this}move(e,i){return this.x+=e,this.y+=i,this}assign(e){return this.x=e.x,this.y=e.y,this}assignAdd(e,i){return this.x=e.x+i.x,this.y=e.y+i.y,this}assignSub(e,i){return this.x=e.x-i.x,this.y=e.y-i.y,this}rotate(e,i){const r=this.x,n=this.y;return this.x=r*e-n*i,this.y=r*i+n*e,this}rotateReverse(e,i){const r=this.x,n=this.y;return this.x=r*e+n*i,this.y=-r*i+n*e,this}scale(e){return this.x*=e,this.y*=e,this}length(){const e=this.x,i=this.y;return Math.sqrt(e*e+i*i)}sub(e){return this.x-=e.x,this.y-=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}static distance(e,i){const r=i.x-e.x,n=i.y-e.y;return Math.sqrt(r*r+n*n)}static add(e,i){return new NI(e.x+i.x,e.y+i.y)}static sub(e,i){return new NI(e.x-i.x,e.y-i.y)}},wA=class{constructor(e,i,r){this.ratio=e,this.x=i,this.y=r}},gst=class{constructor(e,i,r,n=8,s=8){this._lines=[],this._starts=[],this.validateTessellation=!0,this._pixelRatio=n,this._pixelMargin=s,this._tileSize=yst*n,this._dz=e,this._yPos=i,this._xPos=r}setPixelMargin(e){e!==this._pixelMargin&&(this._pixelMargin=e,this.setExtent(this._extent))}setExtent(e){this._extent=e,this._finalRatio=this._tileSize/e*(1<<this._dz);let i=this._pixelRatio*this._pixelMargin;i/=this._finalRatio;const r=e>>this._dz;i>r&&(i=r),this._margin=i,this._xmin=r*this._xPos-i,this._ymin=r*this._yPos-i,this._xmax=this._xmin+r+2*i,this._ymax=this._ymin+r+2*i}reset(e){this._type=e,this._lines=[],this._starts=[],this._line=null,this._start=0}moveTo(e,i){this._pushLine(),this._prevIsIn=this._isIn(e,i),this._moveTo(e,i,this._prevIsIn),this._prevPt=new hi(e,i),this._firstPt=new hi(e,i),this._dist=0}lineTo(e,i){const r=this._isIn(e,i),n=new hi(e,i),s=hi.distance(this._prevPt,n);let o,a,l,c,d,f,y,g;if(r)this._prevIsIn?this._lineTo(e,i,!0):(o=this._prevPt,a=n,l=this._intersect(a,o),this._start=this._dist+s*(1-this._r),this._lineTo(l.x,l.y,!0),this._lineTo(a.x,a.y,!0));else if(this._prevIsIn)a=this._prevPt,o=n,l=this._intersect(a,o),this._lineTo(l.x,l.y,!0),this._lineTo(o.x,o.y,!1);else{const b=this._prevPt,_=n;if(b.x<=this._xmin&&_.x<=this._xmin||b.x>=this._xmax&&_.x>=this._xmax||b.y<=this._ymin&&_.y<=this._ymin||b.y>=this._ymax&&_.y>=this._ymax)this._lineTo(_.x,_.y,!1);else{const x=[];if((b.x<this._xmin&&_.x>this._xmin||b.x>this._xmin&&_.x<this._xmin)&&(c=(this._xmin-b.x)/(_.x-b.x),g=b.y+c*(_.y-b.y),g<=this._ymin?f=!1:g>=this._ymax?f=!0:x.push(new wA(c,this._xmin,g))),(b.x<this._xmax&&_.x>this._xmax||b.x>this._xmax&&_.x<this._xmax)&&(c=(this._xmax-b.x)/(_.x-b.x),g=b.y+c*(_.y-b.y),g<=this._ymin?f=!1:g>=this._ymax?f=!0:x.push(new wA(c,this._xmax,g))),(b.y<this._ymin&&_.y>this._ymin||b.y>this._ymin&&_.y<this._ymin)&&(c=(this._ymin-b.y)/(_.y-b.y),y=b.x+c*(_.x-b.x),y<=this._xmin?d=!1:y>=this._xmax?d=!0:x.push(new wA(c,y,this._ymin))),(b.y<this._ymax&&_.y>this._ymax||b.y>this._ymax&&_.y<this._ymax)&&(c=(this._ymax-b.y)/(_.y-b.y),y=b.x+c*(_.x-b.x),y<=this._xmin?d=!1:y>=this._xmax?d=!0:x.push(new wA(c,y,this._ymax))),x.length===0)d?f?this._lineTo(this._xmax,this._ymax,!0):this._lineTo(this._xmax,this._ymin,!0):f?this._lineTo(this._xmin,this._ymax,!0):this._lineTo(this._xmin,this._ymin,!0);else if(x.length>1&&x[0].ratio>x[1].ratio)this._start=this._dist+s*x[1].ratio,this._lineTo(x[1].x,x[1].y,!0),this._lineTo(x[0].x,x[0].y,!0);else{this._start=this._dist+s*x[0].ratio;for(let E=0;E<x.length;E++)this._lineTo(x[E].x,x[E].y,!0)}this._lineTo(_.x,_.y,!1)}}this._dist+=s,this._prevIsIn=r,this._prevPt=n}close(){if(this._line.length>2){const e=this._firstPt,i=this._prevPt;e.x===i.x&&e.y===i.y||this.lineTo(e.x,e.y);const r=this._line;let n=r.length;for(;n>=4&&(r[0].x===r[1].x&&r[0].x===r[n-2].x||r[0].y===r[1].y&&r[0].y===r[n-2].y);)r.pop(),r[0].x=r[n-2].x,r[0].y=r[n-2].y,--n}}result(e=!0){return this._pushLine(),this._lines.length===0?null:(this._type===Du.Polygon&&e&&vst.simplify(this._tileSize,this._margin*this._finalRatio,this._lines),this._lines)}resultWithStarts(){if(this._type!==Du.LineString)throw new Error("Only valid for lines");this._pushLine();const e=this._lines,i=e.length;if(i===0)return null;const r=[];for(let n=0;n<i;n++)r.push({line:e[n],start:this._starts[n]||0});return r}_isIn(e,i){return e>=this._xmin&&e<=this._xmax&&i>=this._ymin&&i<=this._ymax}_intersect(e,i){let r,n,s;if(i.x>=this._xmin&&i.x<=this._xmax)n=i.y<=this._ymin?this._ymin:this._ymax,s=(n-e.y)/(i.y-e.y),r=e.x+s*(i.x-e.x);else if(i.y>=this._ymin&&i.y<=this._ymax)r=i.x<=this._xmin?this._xmin:this._xmax,s=(r-e.x)/(i.x-e.x),n=e.y+s*(i.y-e.y);else{n=i.y<=this._ymin?this._ymin:this._ymax,r=i.x<=this._xmin?this._xmin:this._xmax;const o=(r-e.x)/(i.x-e.x),a=(n-e.y)/(i.y-e.y);o<a?(s=o,n=e.y+o*(i.y-e.y)):(s=a,r=e.x+a*(i.x-e.x))}return this._r=s,new hi(r,n)}_pushLine(){this._line&&(this._type===Du.Point?this._line.length>0&&(this._lines.push(this._line),this._starts.push(this._start)):this._type===Du.LineString?this._line.length>1&&(this._lines.push(this._line),this._starts.push(this._start)):this._type===Du.Polygon&&this._line.length>3&&(this._lines.push(this._line),this._starts.push(this._start))),this._line=[],this._start=0}_moveTo(e,i,r){this._type!==Du.Polygon?r&&(e=Math.round((e-(this._xmin+this._margin))*this._finalRatio),i=Math.round((i-(this._ymin+this._margin))*this._finalRatio),this._line.push(new hi(e,i))):(r||(e<this._xmin&&(e=this._xmin),e>this._xmax&&(e=this._xmax),i<this._ymin&&(i=this._ymin),i>this._ymax&&(i=this._ymax)),e=Math.round((e-(this._xmin+this._margin))*this._finalRatio),i=Math.round((i-(this._ymin+this._margin))*this._finalRatio),this._line.push(new hi(e,i)),this._isH=!1,this._isV=!1)}_lineTo(e,i,r){let n,s;if(this._type!==Du.Polygon)if(r){if(e=Math.round((e-(this._xmin+this._margin))*this._finalRatio),i=Math.round((i-(this._ymin+this._margin))*this._finalRatio),this._line.length>0&&(n=this._line[this._line.length-1],n.equals(e,i)))return;this._line.push(new hi(e,i))}else this._line&&this._line.length>0&&this._pushLine();else if(r||(e<this._xmin&&(e=this._xmin),e>this._xmax&&(e=this._xmax),i<this._ymin&&(i=this._ymin),i>this._ymax&&(i=this._ymax)),e=Math.round((e-(this._xmin+this._margin))*this._finalRatio),i=Math.round((i-(this._ymin+this._margin))*this._finalRatio),this._line&&this._line.length>0){n=this._line[this._line.length-1];const o=n.x===e,a=n.y===i;if(o&&a)return;this._isH&&o||this._isV&&a?(n.x=e,n.y=i,s=this._line[this._line.length-2],s.x===e&&s.y===i?(this._line.pop(),this._line.length<=1?(this._isH=!1,this._isV=!1):(s=this._line[this._line.length-2],this._isH=s.x===e,this._isV=s.y===i)):(this._isH=s.x===e,this._isV=s.y===i)):(this._line.push(new hi(e,i)),this._isH=o,this._isV=a)}else this._line.push(new hi(e,i))}},wxt=class{setExtent(e){this._ratio=e===4096?1:4096/e}get validateTessellation(){return this._ratio<1}reset(e){this._lines=[],this._line=null}moveTo(e,i){this._line&&this._lines.push(this._line),this._line=[];const r=this._ratio;this._line.push(new hi(e*r,i*r))}lineTo(e,i){const r=this._ratio;this._line.push(new hi(e*r,i*r))}close(){const e=this._line;e&&!e[0].isEqual(e[e.length-1])&&e.push(e[0])}result(){return this._line&&this._lines.push(this._line),this._lines.length===0?null:this._lines}};(function(t){t[t.sideLeft=0]="sideLeft",t[t.sideRight=1]="sideRight",t[t.sideTop=2]="sideTop",t[t.sideBottom=3]="sideBottom"})($s||($s={}));let vst=class $y{static simplify(e,i,r){if(!r)return;const n=-i,s=e+i,o=-i,a=e+i,l=[],c=[],d=r.length;for(let y=0;y<d;++y){const g=r[y];if(!g||g.length<2)continue;let b,_=g[0];const x=g.length;for(let E=1;E<x;++E)b=g[E],_.x===b.x&&(_.x<=n&&(_.y>b.y?(l.push(y),l.push(E),l.push($s.sideLeft),l.push(-1)):(c.push(y),c.push(E),c.push($s.sideLeft),c.push(-1))),_.x>=s&&(_.y<b.y?(l.push(y),l.push(E),l.push($s.sideRight),l.push(-1)):(c.push(y),c.push(E),c.push($s.sideRight),c.push(-1)))),_.y===b.y&&(_.y<=o&&(_.x<b.x?(l.push(y),l.push(E),l.push($s.sideTop),l.push(-1)):(c.push(y),c.push(E),c.push($s.sideTop),c.push(-1))),_.y>=a&&(_.x>b.x?(l.push(y),l.push(E),l.push($s.sideBottom),l.push(-1)):(c.push(y),c.push(E),c.push($s.sideBottom),c.push(-1)))),_=b}if(l.length===0||c.length===0)return;$y.fillParent(r,c,l),$y.fillParent(r,l,c);const f=[];$y.calcDeltas(f,c,l),$y.calcDeltas(f,l,c),$y.addDeltas(f,r)}static fillParent(e,i,r){const n=r.length,s=i.length;for(let o=0;o<s;o+=4){const a=i[o],l=i[o+1],c=i[o+2],d=e[a][l-1],f=e[a][l];let y=8092,g=-1;for(let b=0;b<n;b+=4){if(r[b+2]!==c)continue;const _=r[b],x=r[b+1],E=e[_][x-1],C=e[_][x];switch(c){case $s.sideLeft:case $s.sideRight:if(_A(d.y,E.y,C.y)&&_A(f.y,E.y,C.y)){const k=Math.abs(C.y-E.y);k<y&&(y=k,g=b)}break;case $s.sideTop:case $s.sideBottom:if(_A(d.x,E.x,C.x)&&_A(f.x,E.x,C.x)){const k=Math.abs(C.x-E.x);k<y&&(y=k,g=b)}}}i[o+3]=g}}static calcDeltas(e,i,r){const n=i.length;for(let s=0;s<n;s+=4){const o=[],a=$y.calcDelta(s,i,r,o);e.push(i[s]),e.push(i[s+1]),e.push(i[s+2]),e.push(a)}}static calcDelta(e,i,r,n){const s=i[e+3];if(s===-1)return 0;const o=n.length;return o>1&&n[o-2]===s?0:(n.push(s),$y.calcDelta(s,r,i,n)+1)}static addDeltas(e,i){const r=e.length;let n=0;for(let s=0;s<r;s+=4){const o=e[s+3];o>n&&(n=o)}for(let s=0;s<r;s+=4){const o=i[e[s]],a=e[s+1],l=n-e[s+3];switch(e[s+2]){case $s.sideLeft:o[a-1].x-=l,o[a].x-=l,a===1&&(o[o.length-1].x-=l),a===o.length-1&&(o[0].x-=l);break;case $s.sideRight:o[a-1].x+=l,o[a].x+=l,a===1&&(o[o.length-1].x+=l),a===o.length-1&&(o[0].x+=l);break;case $s.sideTop:o[a-1].y-=l,o[a].y-=l,a===1&&(o[o.length-1].y-=l),a===o.length-1&&(o[0].y-=l);break;case $s.sideBottom:o[a-1].y+=l,o[a].y+=l,a===1&&(o[o.length-1].y+=l),a===o.length-1&&(o[0].y+=l)}}}};const _A=(t,e,i)=>t>=e&&t<=i||t>=i&&t<=e,bst=512;let zp,wst=class{constructor(e){this._geometry=e}next(){const e=this._geometry;return this._geometry=null,e}};function bW(t,e,i){if(!t)return null;zp||(zp=new gst(0,0,0,1));const r=i?-1:1,n=t.geometryType==="esriGeometryPolygon",s=n?Du.Polygon:Du.LineString,o=n?3:2;let a,l;for(zp.reset(s),zp.setPixelMargin(e+1),zp.setExtent(bst);t.nextPath();)if(!(t.pathSize<o)){for(t.nextPoint(),a=t.x,l=r*t.y,zp.moveTo(a,l);t.nextPoint();)a=t.x,l=r*t.y,zp.lineTo(a,l);n&&zp.close()}const c=zp.result(!1);if(c){const d=Ui.createEmptyOptimizedCIM(t.geometryType);for(const f of c){d.startPath();for(const y of f)d.pushXY(y.x,r*y.y)}return d.reset(),d}return null}let _st=class{applyColorSubstitution(e,i){if(!i)return e;this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas"));const{width:r,height:n}=e,s=this._rasterizationCanvas,o=s.getContext("2d",{willReadFrequently:!0});e!==s&&(s.width=r,s.height=n,o.drawImage(e,0,0,r,n));const a=o.getImageData(0,0,r,n).data;if(i){for(const c of i)if(c&&c.oldColor&&c.oldColor.length===4&&c.newColor&&c.newColor.length===4){const[d,f,y,g]=c.oldColor,[b,_,x,E]=c.newColor;if(d===b&&f===_&&y===x&&g===E)continue;for(let C=0;C<a.length;C+=4)d===a[C]&&f===a[C+1]&&y===a[C+2]&&g===a[C+3]&&(a[C]=b,a[C+1]=_,a[C+2]=x,a[C+3]=E)}}const l=new ImageData(a,r,n);return o.putImageData(l,0,0),s}tintImageData(e,i){if(!i||i.length<4)return e;this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas"));const{width:r,height:n}=e,s=this._rasterizationCanvas,o=s.getContext("2d",{willReadFrequently:!0});e!==s&&(s.width=r,s.height=n,o.drawImage(e,0,0,r,n));const a=o.getImageData(0,0,r,n),l=new Uint8Array(a.data),c=[i[0]/255,i[1]/255,i[2]/255,i[3]/255];for(let f=0;f<l.length;f+=4)l[f]*=c[0],l[f+1]*=c[1],l[f+2]*=c[2],l[f+3]*=c[3];const d=new ImageData(new Uint8ClampedArray(l.buffer),r,n);return o.putImageData(d,0,0),s}};var xh;let xst=(xh=class{static local(){return xh.instance===null&&(xh.instance=new xh),xh.instance}execute(e,i,r,n){return new Sst(e,i)}},xh.instance=null,xh),Sst=class{constructor(e,i){this._inputGeometries=e,this._angleTolerance=i.angleTolerance!==void 0?i.angleTolerance:120,this._maxCosAngle=Math.cos((1-Math.abs(this._angleTolerance)/180)*Math.PI)}next(){let e=this._inputGeometries.next();if(!e)return null;for(;e;){if(e.geometryType==="esriGeometryPolygon")this._isClosed=!0;else if(e.geometryType==="esriGeometryPolyline")this._isClosed=!1;else{if(e.geometryType!=="esriGeometryEnvelope"){e=this._inputGeometries.next();continue}if(this._maxCosAngle)return e;this._isClosed=!0}for(;e.nextPath();)this._processPath(e);return e.reset(),e}return null}_processPath(e){if(e.nextPoint()){const i=e.x,r=e.y;let n=i,s=r,o=e.pathSize,a=0,l=0,c=0,d=0,f=0,y=0;this._isClosed&&++o;for(let g=1;e.nextPoint()||g<o;++g){let b,_;this._isClosed&&g===o-1?(b=i,_=r):(b=e.x,_=e.y);const x=b-n,E=_-s,C=Math.sqrt(x*x+E*E);g>1&&C>0&&c>0&&(a*x+l*E)/C/c<=this._maxCosAngle&&e.setControlPointAt(g-1),g===1&&(d=x,f=E,y=C),C>0&&(n=b,s=_,a=x,l=E,c=C)}this._isClosed&&c>0&&y>0&&(a*d+l*f)/y/c<=this._maxCosAngle&&e.setControlPointAt(0)}}};function yE(t,e){t[4]=e}let z2=class{constructor(e,i=!0,r=!0,n=0){this.isClosed=!1,this.geometryCursor=null,this.geometryCursor=!i&&e.geometryType==="esriGeometryPolygon"||!r&&e.geometryType==="esriGeometryPolyline"?null:e,this.geomUnitsPerPoint=n,this.iterateMultiPath=!1,this.iteratePath=!1,this.internalPlacement=new Q$}next(){if(!this.geometryCursor)return null;const e=this.processMultiPath(this.geometryCursor);return this.iterateMultiPath&&e||(this.geometryCursor=null),e}processMultiPath(e){for(;this.iteratePath||e.pathIndex<e.totalSize-1;){this.iteratePath||e.nextPath(),this.iterateMultiPath=!0;const i=this.processPath(e);if(i)return i}return this.iterateMultiPath=!1,null}},eT=class{constructor(e,i,r,n=0){this.isClosed=!1,this.inputGeometries=e,this.acceptPolygon=i,this.acceptPolyline=r,this.geomUnitsPerPoint=n,this.iteratePath=!1,this.multiPathCursor=null}next(){for(;;){if(!this.multiPathCursor){let e=this.inputGeometries.next();for(;e&&(this.isClosed=this.acceptPolygon&&e.geometryType==="esriGeometryPolygon"||e.geometryType==="esriGeometryEnvelope",this.multiPathCursor=e,!this.multiPathCursor);)e=this.inputGeometries.next();if(!this.multiPathCursor)return null}for(;this.iteratePath||this.multiPathCursor.nextPath();){this.multiPathCursor.seekPathStart();const e=this.processPath(this.multiPathCursor);if(e)return e}this.multiPathCursor=null}}};const AM=.03;let mm=class{constructor(e=0,i=!1){}isEmpty(e){if(!e.nextPoint())return!0;let i,r,n,s;for(i=e.x,r=e.y;e.nextPoint();i=r,r=s)if(n=e.x,s=e.y,n!==i||s!==r)return e.seekPathStart(),!1;return e.seekPathStart(),!0}normalize(e){const i=Math.sqrt(e[0]*e[0]+e[1]*e[1]);i!==0&&(e[0]/=i,e[1]/=i)}getLength(e,i,r,n){const s=r-e,o=n-i;return Math.sqrt(s*s+o*o)}getSegLength(e){const[[i,r],[n,s]]=e;return this.getLength(i,r,n,s)}getCoord2D(e,i,r,n,s){return[e+(r-e)*s,i+(n-i)*s]}getSegCoord2D(e,i){const[[r,n],[s,o]]=e;return this.getCoord2D(r,n,s,o,i)}getAngle(e,i,r,n,s){const o=r-e,a=n-i;return Math.atan2(a,o)}getAngleCS(e,i,r,n,s,o){e==null&&(e=[0,0]);const a=n-i,l=s-r,c=Math.sqrt(a*a+l*l);return c!==0?(e[0]=a/c,e[1]=l/c,e):(e[0]=1,e[1]=0,e)}getSegAngleCS(e,i,r){const[[n,s],[o,a]]=i;return this.getAngleCS(e,n,s,o,a,r)}cut(e,i,r,n,s,o){return[s<=0?[e,i]:this.getCoord2D(e,i,r,n,s),o>=1?[r,n]:this.getCoord2D(e,i,r,n,o)]}getSubCurve(e,i,r){const n=Ui.createEmptyOptimizedCIM("esriGeometryPolyline");return this.appendSubCurve(n,e,i,r)?n:null}appendSubCurve(e,i,r,n){e.startPath(),i.seekPathStart();let s=0,o=!0;if(!i.nextPoint())return!1;let a=i.x,l=i.y;for(;i.nextPoint();){const c=this.getLength(a,l,i.x,i.y);if(c!==0){if(o){if(s+c>r){const d=(r-s)/c;let f=1,y=!1;s+c>=n&&(f=(n-s)/c,y=!0);const g=this.cut(a,l,i.x,i.y,d,f);if(g&&e.pushPoints(g),y)break;o=!1}}else{if(s+c>n){const d=this.cut(a,l,i.x,i.y,0,(n-s)/c);d&&e.pushPoint(d[1]);break}e.pushXY(i.x,i.y)}s+=c,a=i.x,l=i.y}else a=i.x,l=i.y}return!0}getCIMPointAlong(e,i){if(!e.nextPoint())return null;let r,n,s,o,a=0;for(r=e.x,n=e.y;e.nextPoint();r=s,n=o){s=e.x,o=e.y;const l=this.getLength(r,n,s,o);if(l!==0){if(a+l>i){const c=(i-a)/l;return this.getCoord2D(r,n,s,o,c)}a+=l}}return null}offset(e,i,r,n,s){if(!e||e.length<2)return null;let o=0,a=e[o++],l=o;for(;o<e.length;){const y=e[o];y[0]===a[0]&&y[1]===a[1]||(o!==l&&(e[l]=e[o]),a=e[l++]),o++}const c=e[0][0]===e[l-1][0]&&e[0][1]===e[l-1][1];if(c&&--l,l<(c?3:2))return null;const d=[];a=c?e[l-1]:null;let f=e[0];for(let y=0;y<l;y++){const g=y===l-1?c?e[0]:null:e[y+1];if(a)if(g){const b=[g[0]-f[0],g[1]-f[1]];this.normalize(b);const _=[f[0]-a[0],f[1]-a[1]];this.normalize(_);const x=_[0]*b[1]-_[1]*b[0],E=_[0]*b[0]+_[1]*b[1];if(x===0&&E===1){f=g;continue}if(x>=0==i<=0){if(E<1){const C=[b[0]-_[0],b[1]-_[1]];this.normalize(C);const k=Math.sqrt((1+E)/2);if(k>1/n){const O=-Math.abs(i)/k;d.push([f[0]-C[0]*O,f[1]-C[1]*O])}}}else switch(r){case qf.Mitered:{const C=Math.sqrt((1+E)/2);if(C>0&&1/C<n){const k=[b[0]-_[0],b[1]-_[1]];this.normalize(k);const O=Math.abs(i)/C;d.push([f[0]-k[0]*O,f[1]-k[1]*O]);break}}case qf.Bevelled:d.push([f[0]+_[1]*i,f[1]-_[0]*i]),d.push([f[0]+b[1]*i,f[1]-b[0]*i]);break;case qf.Rounded:if(E<1){d.push([f[0]+_[1]*i,f[1]-_[0]*i]);const C=Math.floor(2.5*(1-E));if(C>0){const k=1/C;let O=k;for(let D=1;D<C;D++,O+=k){const B=[_[1]*(1-O)+b[1]*O,-_[0]*(1-O)-b[0]*O];this.normalize(B),d.push([f[0]+B[0]*i,f[1]+B[1]*i])}}d.push([f[0]+b[1]*i,f[1]-b[0]*i])}break;case qf.Square:default:if(x<0)d.push([f[0]+(_[1]+_[0])*i,f[1]+(_[1]-_[0])*i]),d.push([f[0]+(b[1]-b[0])*i,f[1]-(b[0]+b[1])*i]);else{const C=Math.sqrt((1+Math.abs(E))/2),k=[b[0]-_[0],b[1]-_[1]];this.normalize(k);const O=i/C;d.push([f[0]-k[0]*O,f[1]-k[1]*O])}}}else{const b=[f[0]-a[0],f[1]-a[1]];this.normalize(b),d.push([f[0]+b[1]*i,f[1]-b[0]*i])}else{const b=[g[0]-f[0],g[1]-f[1]];this.normalize(b),d.push([f[0]+b[1]*i,f[1]-b[0]*i])}a=f,f=g}return d.length<(c?3:2)?null:(c&&d.push([d[0][0],d[0][1]]),d)}};const wV=1.7320508075688772,$st=5,Tst=kx.OpenEnded;var Sh;let Est=(Sh=class{static local(){return Sh.instance===null&&(Sh.instance=new Sh),Sh.instance}execute(e,i,r,n,s){return new Ist(e,i,r)}},Sh.instance=null,Sh),Ist=class extends eT{constructor(e,i,r){super(e,!1,!0),this._curveHelper=new mm,this._width=(i.width!==void 0?i.width:$st)*r,this._arrowType=i.geometricEffectArrowType!==void 0?i.geometricEffectArrowType:i.arrowType!==void 0?i.arrowType:Tst,this._offsetFlattenError=AM*r}processPath(e){const i=Ui.createEmptyOptimizedCIM(e.geometryType);switch(this._arrowType){case kx.OpenEnded:default:this._constructSimpleArrow(i,e,!0);break;case kx.Block:this._constructSimpleArrow(i,e,!1);break;case kx.Crossed:this._constructCrossedArrow(i,e)}return i}_constructSimpleArrow(e,i,r){const n=i.pathLength();let s=this._width;n<2*s&&(s=n/2);const o=this._curveHelper.getSubCurve(i,0,n-s);if(!o||!o.nextPath())return;o.seekPathStart();const a=s/2;if(this._curveHelper.isEmpty(o))return;const l=vg(o),c=this._constructOffset(l,-a);if(!c)return;const d=this._constructOffset(l,a);if(!d)return;const f=this._constructArrowBasePoint(c,-a/2);if(!f)return;const y=this._constructArrowBasePoint(d,a/2);if(!y)return;i.seekInPath(i.pathSize-1);const g=[i.x,i.y];e.pushPath(d),e.nextPath(),e.nextPoint(),e.setControlPoint(),e.pushPoint(y),e.nextPoint(),e.setControlPoint(),e.pushPoint(g),e.nextPoint(),e.setControlPoint(),e.pushPoint(f),e.nextPoint(),e.setControlPoint(),e.pushPoints(c.reverse()),e.setControlPoint(),r||(e.setControlPointAt(0),e.setControlPointAt(e.pathSize-1),e.pushPoint(d[0])),e.reset()}_constructCrossedArrow(e,i){const r=i.pathLength();let n=this._width;r<n*(1+wV+1)&&(n=r/(1+wV+1)),i.seekPathStart();const s=this._curveHelper.getSubCurve(i,0,r-n*(1+wV));if(!s)return;s.nextPath();const o=n/2;if(this._curveHelper.isEmpty(s))return;const a=vg(s),l=this._constructOffset(a,o);if(!l)return;const c=this._constructOffset(a,-o);if(!c)return;const d=this._curveHelper.getSubCurve(i,0,r-n);if(!d||(d.nextPath(),this._curveHelper.isEmpty(d)))return;const f=vg(d),y=this._constructOffset(f,o);if(!y)return;const g=this._constructOffset(f,-o);if(!g)return;const b=y[y.length-1],_=this._constructArrowBasePoint(y,o/2);if(!_)return;const x=g[g.length-1],E=this._constructArrowBasePoint(g,-o/2);if(!E)return;i.seekInPath(i.pathSize-1);const C=[i.x,i.y];e.pushPath(l),e.nextPath(),e.nextPoint(),e.setControlPoint(),e.pushPoint(x),e.nextPoint(),e.setControlPoint(),e.pushPoint(E),e.nextPoint(),e.setControlPoint(),e.pushPoint(C),e.nextPoint(),e.setControlPoint(),e.pushPoint(_),e.nextPoint(),e.setControlPoint(),e.pushPoint(b),e.nextPoint(),e.setControlPoint(),e.pushPoints(c.reverse()),e.nextPoint(),e.setControlPoint(),e.reset()}_constructOffset(e,i){return this._curveHelper.offset(e,i,qf.Rounded,4,this._offsetFlattenError)}_constructArrowBasePoint(e,i){if(!e||e.length<2)return null;const r=e[e.length-2],n=e[e.length-1],s=[n[0]-r[0],n[1]-r[1]];return this._curveHelper.normalize(s),[n[0]+s[1]*i,n[1]-s[0]*i]}};var $h;let Cst=($h=class{static local(){return $h.instance===null&&($h.instance=new $h),$h.instance}execute(e,i,r,n,s,o,a){return new Mst(e,i,r,n,s,o,a)}},$h.instance=null,$h),Mst=class{constructor(e,i,r,n,s,o,a){this._preventClipping=a,this._inputGeometries=e,this._tileKey=n,this._geometryEngine=s,this._curveHelper=new mm,this._size=(i.size!==void 0?i.size:1)*r,this._maxInflateSize=o*r,this._offsetFlattenError=AM*r}next(){let e;for(;e=this._inputGeometries.next();){if(this._size===0)return e;if(e.geometryType==="esriGeometryEnvelope"){if(this._size>0){const s=Ui.createEmptyOptimizedCIM(e.geometryType),o=ZF(e)[0],a=this._curveHelper.offset(o,this._size,qf.Rounded,4,this._offsetFlattenError);if(a)return s.pushPath(a),s}else if(this._size<0){const s=e.asJSON();if(Math.min(s.xmax-s.xmin,s.ymax-s.ymin)+2*this._size>0)return Ui.fromJSONCIM({xmin:s.xmin-this._size,xmax:s.xmax+this._size,ymin:s.ymin-this._size,ymax:s.ymax+this._size})}}const i=this._geometryEngine;if(i==null)return null;const r=!this._preventClipping&&this._tileKey?bW(e,this._maxInflateSize,!0):e;if(!r)continue;const n=i.buffer(et.WebMercator,r.asJSON(),this._size,1);return n?Ui.fromJSONCIM(n):null}return null}};var Th;let kst=(Th=class{static local(){return Th.instance===null&&(Th.instance=new Th),Th.instance}execute(e,i,r,n,s){return new Pst(e,i,r)}},Th.instance=null,Th),Pst=class{constructor(e,i,r){this._defaultPointSize=20,this._inputGeometries=e,this._geomUnitsPerPoint=r,this._rule=i.rule??Wt.FullGeometry,this._defaultSize=this._defaultPointSize*r}next(){let e;for(;e=this._inputGeometries.next();){const i=this._processGeom(ZF(e));if(i!=null&&i.length)return Ui.fromJSONCIM({paths:i})}return null}_clone(e){return[e[0],e[1]]}_mid(e,i){return[(e[0]+i[0])/2,(e[1]+i[1])/2]}_mix(e,i,r,n){return[e[0]*i+r[0]*n,e[1]*i+r[1]*n]}_add(e,i){return[e[0]+i[0],e[1]+i[1]]}_add2(e,i,r){return[e[0]+i,e[1]+r]}_sub(e,i){return[e[0]-i[0],e[1]-i[1]]}_dist(e,i){return Math.sqrt((e[0]-i[0])*(e[0]-i[0])+(e[1]-i[1])*(e[1]-i[1]))}_norm(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}_normalize(e,i=1){const r=i/this._norm(e);e[0]*=r,e[1]*=r}_leftPerpendicular(e){const i=-e[1],r=e[0];e[0]=i,e[1]=r}_leftPerp(e){return[-e[1],e[0]]}_rightPerpendicular(e){const i=e[1],r=-e[0];e[0]=i,e[1]=r}_rightPerp(e){return[e[1],-e[0]]}_dotProduct(e,i){return e[0]*i[0]+e[1]*i[1]}_crossProduct(e,i){return e[0]*i[1]-e[1]*i[0]}_rotateDirect(e,i,r){const n=e[0]*i-e[1]*r,s=e[0]*r+e[1]*i;e[0]=n,e[1]=s}_makeCtrlPt(e){const i=[e[0],e[1]];return yE(i,1),i}_addAngledTicks(e,i,r,n){const s=this._sub(r,i);this._normalize(s);const o=this._crossProduct(s,this._sub(n,i));let a;a=o>0?this._rightPerp(s):this._leftPerp(s);const l=Math.abs(o)/2,c=[];c.push([i[0]+(a[0]-s[0])*l,i[1]+(a[1]-s[1])*l]),c.push(i),c.push(r),c.push([r[0]+(a[0]+s[0])*l,r[1]+(a[1]+s[1])*l]),e.push(c)}_addBezier2(e,i,r,n,s){if(s--===0)return void e.push(n);const o=this._mid(i,r),a=this._mid(r,n),l=this._mid(o,a);this._addBezier2(e,i,o,l,s),this._addBezier2(e,l,a,n,s)}_addBezier3(e,i,r,n,s,o){if(o--===0)return void e.push(s);const a=this._mid(i,r),l=this._mid(r,n),c=this._mid(n,s),d=this._mid(a,l),f=this._mid(l,c),y=this._mid(d,f);this._addBezier3(e,i,a,d,y,o),this._addBezier3(e,y,f,c,s,o)}_add90DegArc(e,i,r,n,s){const o=s??this._crossProduct(this._sub(r,i),this._sub(n,i))>0,a=this._mid(i,r),l=this._sub(a,i);o?this._leftPerpendicular(l):this._rightPerpendicular(l),a[0]+=l[0],a[1]+=l[1],this._addBezier3(e,i,this._mix(i,.33333,a,.66667),this._mix(r,.33333,a,.66667),r,4)}_addArrow(e,i,r){const n=i[0],s=i[1],o=i[i.length-1],a=this._sub(n,s),l=this._norm(a);this._normalize(a);const c=Math.abs(this._crossProduct(a,this._sub(o,s)));let d=this._dotProduct(a,this._sub(o,s));d<.05*l?d=.05*l:d>.95*l&&(d=.95*l);const f=.5*c,y=this._leftPerp(a),g=[s[0]+a[0]*d,s[1]+a[1]*d],b=i.length-1,_=[];_.push(r?[-y[0],-y[1]]:y);let x=[-a[0],-a[1]];for(let E=1;E<b-1;E++){const C=this._sub(i[E+1],i[E]);this._normalize(C);const k=this._dotProduct(C,x),O=this._crossProduct(C,x),D=Math.sqrt((1+k)/2),B=this._sub(C,x);this._normalize(B),B[0]/=D,B[1]/=D,_.push(O<0?[-B[0],-B[1]]:B),x=C}_.push(this._rightPerp(x));for(let E=_.length-1;E>0;E--)e.push([i[E][0]+_[E][0]*f,i[E][1]+_[E][1]*f]);e.push([g[0]+_[0][0]*f,g[1]+_[0][1]*f]),e.push([g[0]+_[0][0]*c,g[1]+_[0][1]*c]),e.push(n),e.push([g[0]-_[0][0]*c,g[1]-_[0][1]*c]),e.push([g[0]-_[0][0]*f,g[1]-_[0][1]*f]);for(let E=1;E<_.length;E++)e.push([i[E][0]-_[E][0]*f,i[E][1]-_[E][1]*f])}_addDash(e,i,r){const n=this._norm(r)/7;this._normalize(r);let s=[];for(let o=0;o<=7;o++)s.push([i[0]+r[0]*o*n,i[1]+r[1]*o*n]),1&o&&(e.push(s),s=[])}_cp2(e,i,r){return e.length>=2?e[1]:this._add2(e[0],i*this._defaultSize,r*this._defaultSize)}_cp3(e,i,r,n){if(e.length>=3)return e[2];const s=this._mix(e[0],1-r,i,r),o=this._sub(i,e[0]);return this._normalize(o),this._rightPerpendicular(o),[s[0]+o[0]*n*this._defaultSize,s[1]+o[1]*n*this._defaultSize]}_arrowPath(e){if(e.length>2)return e;const i=e[0],r=this._cp2(e,-4,0),n=this._sub(i,r);this._normalize(n);const s=this._rightPerp(n);return[i,r,[i[0]+(s[0]-n[0])*this._defaultSize,i[1]+(s[1]-n[1])*this._defaultSize]]}_arrowLastSeg(e){const i=e[0],r=this._cp2(e,-4,0);let n;if(e.length>=3)n=e[e.length-1];else{const s=this._sub(i,r);this._normalize(s);const o=this._rightPerp(s);n=[i[0]+(o[0]-s[0])*this._defaultSize,i[1]+(o[1]-s[1])*this._defaultSize]}return[r,n]}_processGeom(e){if(!e)return null;const i=[];for(const r of e){const n=r.length>1&&pMe(r)<this._defaultSize;if(!r||r.length===0||n)continue;const s=r.length;let o=r[0];switch(this._rule){case Wt.PerpendicularFromFirstSegment:{const a=this._cp2(r,0,-1),l=this._cp3(r,a,.5,4),c=[];c.push(l),c.push(this._mid(o,a)),i.push(c);break}case Wt.ReversedFirstSegment:{const a=this._cp2(r,0,-1);i.push([a,o]);break}case Wt.PerpendicularToSecondSegment:{if(r.length<3)return[];const a=this._cp2(r,-4,1),l=this._cp3(r,a,.882353,-1.94),c=[];c.push(this._mid(a,l)),c.push(o),i.push(c);break}case Wt.SecondSegmentWithTicks:{if(r.length<3)return[];const a=this._cp2(r,-4,1),l=this._cp3(r,a,.882353,-1.94),c=this._sub(l,a);let d;d=this._crossProduct(c,this._sub(o,a))>0?this._rightPerp(c):this._leftPerp(c);const f=[];f.push([a[0]+(d[0]-c[0])/3,a[1]+(d[1]-c[1])/3]),f.push(a),f.push(l),f.push([l[0]+(d[0]+c[0])/3,l[1]+(d[1]+c[1])/3]),i.push(f);break}case Wt.DoublePerpendicular:{const a=this._cp2(r,0,-1),l=this._cp3(r,a,.5,3),c=this._mid(o,a),d=this._sub(c,l);this._normalize(d);const f=this._crossProduct(d,this._sub(o,l));this._leftPerpendicular(d);const y=[];y.push(o),y.push([l[0]+d[0]*f,l[1]+d[1]*f]),i.push(y);const g=[];g.push([l[0]-d[0]*f,l[1]-d[1]*f]),g.push(a),i.push(g);break}case Wt.OppositeToFirstSegment:{const a=this._cp2(r,0,-1),l=this._cp3(r,a,.5,3),c=this._mid(o,a),d=this._sub(c,l);this._normalize(d);const f=this._crossProduct(d,this._sub(o,l));this._leftPerpendicular(d);const y=[];y.push([l[0]+d[0]*f,l[1]+d[1]*f]),y.push([l[0]-d[0]*f,l[1]-d[1]*f]),i.push(y);break}case Wt.TriplePerpendicular:{const a=this._cp2(r,0,-1),l=this._cp3(r,a,.5,4),c=this._mid(o,a),d=this._sub(c,l);this._normalize(d);const f=this._crossProduct(d,this._sub(o,l));this._leftPerpendicular(d);const y=[];y.push([l[0]+d[0]*f*.8,l[1]+d[1]*f*.8]),y.push([c[0]+.8*(o[0]-c[0]),c[1]+.8*(o[1]-c[1])]),i.push(y),i.push([l,c]);const g=[];g.push([l[0]-d[0]*f*.8,l[1]-d[1]*f*.8]),g.push([c[0]+.8*(a[0]-c[0]),c[1]+.8*(a[1]-c[1])]),i.push(g);break}case Wt.HalfCircleFirstSegment:{const a=this._cp2(r,0,-1),l=this._cp3(r,a,.5,4),c=this._mid(o,a);let d=this._sub(a,o);const f=Math.cos(Math.PI/18),y=Math.sin(Math.PI/18),g=Math.sqrt((1+f)/2),b=Math.sqrt((1-f)/2),_=[];let x;this._crossProduct(d,this._sub(l,o))>0?(_.push(o),d=this._sub(o,c),x=a):(_.push(a),d=this._sub(a,c),x=o),this._rotateDirect(d,g,b),d[0]/=g,d[1]/=g;for(let E=1;E<=18;E++)_.push(this._add(c,d)),this._rotateDirect(d,f,y);_.push(x),i.push(_);break}case Wt.HalfCircleSecondSegment:{const a=this._cp2(r,0,-1),l=this._cp3(r,a,1,-1);let c=this._sub(o,a);this._normalize(c);const d=this._crossProduct(c,this._sub(l,a))/2;this._leftPerpendicular(c);const f=[a[0]+c[0]*d,a[1]+c[1]*d];c=this._sub(a,f);const y=Math.cos(Math.PI/18);let g=Math.sin(Math.PI/18);d>0&&(g=-g);const b=[a];for(let _=1;_<=18;_++)this._rotateDirect(c,y,g),b.push(this._add(f,c));i.push(b);break}case Wt.HalfCircleExtended:{const a=this._cp2(r,0,-2),l=this._cp3(r,a,1,-1);let c;if(s>=4)c=r[3];else{const _=this._sub(o,a);c=this._add(l,_)}const d=this._dist(a,l)/2/.75,f=this._sub(a,o);this._normalize(f,d);const y=this._sub(l,c);this._normalize(y,d);const g=[c,l];i.push(g);const b=[this._clone(l)];this._addBezier3(b,l,this._add(l,y),this._add(a,f),a,4),b.push(o),i.push(b);break}case Wt.OpenCircle:{const a=this._cp2(r,-2,0),l=this._sub(a,o),c=Math.cos(Math.PI/18),d=-Math.sin(Math.PI/18),f=[a];for(let y=1;y<=33;y++)this._rotateDirect(l,c,d),f.push(this._add(o,l));i.push(f);break}case Wt.CoverageEdgesWithTicks:{const a=this._cp2(r,0,-1);let l,c;if(s>=3)l=r[2];else{const g=this._sub(a,o),b=this._leftPerp(g);l=[o[0]+b[0]-.25*g[0],o[1]+b[1]-.25*g[1]]}if(s>=4)c=r[3];else{const g=this._mid(o,a),b=this._sub(o,a);this._normalize(b),this._leftPerpendicular(b);const _=this._crossProduct(b,this._sub(l,g));this._rightPerpendicular(b),c=[l[0]+b[0]*_*2,l[1]+b[1]*_*2]}const d=this._sub(a,o);let f,y;f=this._crossProduct(d,this._sub(l,o))>0?this._rightPerp(d):this._leftPerp(d),y=[],y.push(l),y.push(o),y.push([o[0]+(f[0]-d[0])/3,o[1]+(f[1]-d[1])/3]),i.push(y),f=this._crossProduct(d,this._sub(c,a))>0?this._rightPerp(d):this._leftPerp(d),y=[],y.push([a[0]+(f[0]+d[0])/3,a[1]+(f[1]+d[1])/3]),y.push(a),y.push(c),i.push(y);break}case Wt.GapExtentWithDoubleTicks:{const a=this._cp2(r,0,2),l=this._cp3(r,a,0,1);let c;if(s>=4)c=r[3];else{const d=this._sub(a,o);c=this._add(l,d)}this._addAngledTicks(i,o,a,this._mid(l,c)),this._addAngledTicks(i,l,c,this._mid(o,a));break}case Wt.GapExtentMidline:{const a=this._cp2(r,2,0),l=this._cp3(r,a,0,1);let c;if(s>=4)c=r[3];else{const f=this._sub(a,o);c=this._add(l,f)}const d=[];d.push(this._mid(o,l)),d.push(this._mid(a,c)),i.push(d);break}case Wt.Chevron:{const a=this._cp2(r,-1,-1);let l;if(s>=3)l=r[2];else{const c=this._sub(a,o);this._leftPerpendicular(c),l=this._add(o,c)}i.push([a,this._makeCtrlPt(o),l]);break}case Wt.PerpendicularWithArc:{const a=this._cp2(r,0,-2),l=this._cp3(r,a,.5,-1),c=this._sub(a,o),d=this._norm(c);c[0]/=d,c[1]/=d;const f=this._crossProduct(c,this._sub(l,o));let y=this._dotProduct(c,this._sub(l,o));y<.05*d?y=.05*d:y>.95*d&&(y=.95*d);const g=[o[0]+c[0]*y,o[1]+c[1]*y];let b=this._leftPerp(c),_=[];if(_.push([g[0]-b[0]*f,g[1]-b[1]*f]),_.push([g[0]+b[0]*f,g[1]+b[1]*f]),i.push(_),s>=4){const k=r[3];let O=this._dotProduct(c,this._sub(k,o));O<.1*d?O=.1*d:O>.9*d&&(O=.9*d);const D=[o[0]+c[0]*O,o[1]+c[1]*O],B=this._crossProduct(c,this._sub(k,o)),j=[];j.push([D[0]-b[0]*B,D[1]-b[1]*B]),j.push([D[0]+b[0]*B,D[1]+b[1]*B]),i.push(j)}const x=[a[0]+b[0]*f,a[1]+b[1]*f];b=this._sub(a,x);const E=Math.cos(Math.PI/18);let C=Math.sin(Math.PI/18);f<0&&(C=-C),_=[o,a];for(let k=1;k<=9;k++)this._rotateDirect(b,E,C),_.push(this._add(x,b));i.push(_);break}case Wt.ClosedHalfCircle:{const a=this._cp2(r,2,0),l=this._mid(o,a),c=this._sub(a,l),d=Math.cos(Math.PI/18),f=Math.sin(Math.PI/18),y=[o,a];for(let g=1;g<=18;g++)this._rotateDirect(c,d,f),y.push(this._add(l,c));i.push(y);break}case Wt.TripleParallelExtended:{const a=this._cp2(r,0,-2),l=this._cp3(r,a,1,-2),c=this._mid(o,a),d=this._sub(l,a);this._normalize(d);const f=Math.abs(this._crossProduct(d,this._sub(c,a)))/2,y=this._dist(a,l),g=[a,o];g.push([o[0]+d[0]*y*.5,o[1]+d[1]*y*.5]),i.push(g);const b=[];b.push([c[0]-d[0]*f,c[1]-d[1]*f]),b.push([c[0]+d[0]*y*.375,c[1]+d[1]*y*.375]),yE(b[b.length-1],1),b.push([c[0]+d[0]*y*.75,c[1]+d[1]*y*.75]),i.push(b);const _=[a,l];i.push(_);break}case Wt.ParallelWithTicks:{const a=this._cp2(r,3,0),l=this._cp3(r,a,.5,-1),c=this._sub(l,a);this._normalize(c);const d=this._crossProduct(c,this._sub(l,o));this._leftPerpendicular(c),this._addAngledTicks(i,o,a,l),this._addAngledTicks(i,this._mix(o,1,c,d),this._mix(a,1,c,d),this._mid(o,a));break}case Wt.Parallel:{const a=this._cp2(r,3,0),l=this._cp3(r,a,.5,-1),c=this._sub(a,o);this._normalize(c);const d=this._leftPerp(c),f=this._crossProduct(c,this._sub(l,o));let y=[o,a];i.push(y),y=[],y.push([o[0]+d[0]*f,o[1]+d[1]*f]),y.push([a[0]+d[0]*f,a[1]+d[1]*f]),i.push(y);break}case Wt.PerpendicularToFirstSegment:{const a=this._cp2(r,3,0),l=this._cp3(r,a,.5,-1),c=this._mid(o,a),d=this._sub(a,o);this._normalize(d);const f=this._crossProduct(d,this._sub(l,o));this._leftPerpendicular(d);const y=[];y.push([c[0]-d[0]*f*.25,c[1]-d[1]*f*.25]),y.push([c[0]+d[0]*f*1.25,c[1]+d[1]*f*1.25]),i.push(y);break}case Wt.ParallelOffset:{const a=this._cp2(r,3,0),l=this._cp3(r,a,.5,-1),c=this._sub(a,o);this._normalize(c);const d=this._crossProduct(c,this._sub(l,o));this._leftPerpendicular(c);const f=[];f.push([o[0]-c[0]*d,o[1]-c[1]*d]),f.push([a[0]-c[0]*d,a[1]-c[1]*d]),i.push(f);const y=[];y.push([o[0]+c[0]*d,o[1]+c[1]*d]),y.push([a[0]+c[0]*d,a[1]+c[1]*d]),i.push(y);break}case Wt.OffsetOpposite:{const a=this._cp2(r,3,0),l=this._cp3(r,a,.5,-1),c=this._sub(a,o);this._normalize(c);const d=this._crossProduct(c,this._sub(l,o));this._leftPerpendicular(c);const f=[];f.push([o[0]-c[0]*d,o[1]-c[1]*d]),f.push([a[0]-c[0]*d,a[1]-c[1]*d]),i.push(f);break}case Wt.OffsetSame:{const a=this._cp2(r,3,0),l=this._cp3(r,a,.5,-1),c=this._sub(a,o);this._normalize(c);const d=this._crossProduct(c,this._sub(l,o));this._leftPerpendicular(c);const f=[];f.push([o[0]+c[0]*d,o[1]+c[1]*d]),f.push([a[0]+c[0]*d,a[1]+c[1]*d]),i.push(f);break}case Wt.CircleWithArc:{let a=this._cp2(r,3,0);const l=this._cp3(r,a,.5,-1);let c,d;if(s>=4)c=r[3],d=this._crossProduct(this._sub(c,a),this._sub(l,a))>0;else{c=a,d=this._crossProduct(this._sub(c,o),this._sub(l,o))>0;const _=24*this._geomUnitsPerPoint,x=this._sub(c,o);this._normalize(x,_);const E=Math.sqrt(2)/2;this._rotateDirect(x,E,d?E:-E),a=this._add(o,x)}const f=this._sub(a,o),y=Math.cos(Math.PI/18),g=Math.sin(Math.PI/18),b=[a];for(let _=1;_<=36;_++)this._rotateDirect(f,y,g),b.push(this._add(o,f));this._add90DegArc(b,a,c,l,d),yE(b[b.length-8],1),i.push(b);break}case Wt.DoubleJog:{let a,l=this._cp2(r,-3,1),c=this._cp3(r,l,-1,-.5);if(s>=4)a=r[3];else{const C=o;o=l,a=c;const k=this._dist(o,C),O=this._dist(a,C);let D=30*this._geomUnitsPerPoint;.5*k<D&&(D=.5*k),.5*O<D&&(D=.5*O),l=this._mix(o,D/k,C,(k-D)/k),c=this._mix(a,D/O,C,(O-D)/O)}const d=this._mid(o,l),f=this._mid(a,c),y=this._dist(o,l),g=this._dist(c,a);let b=Math.min(y,g)/8;b=Math.min(b,24*this._geomUnitsPerPoint);const _=Math.cos(Math.PI/4);let x=this._sub(o,l);this._normalize(x,b),this._crossProduct(x,this._sub(a,l))>0?this._rotateDirect(x,_,-_):this._rotateDirect(x,_,_);let E=[];E.push(l),E.push(this._add(d,x)),E.push(this._sub(d,x)),E.push(o),i.push(E),x=this._sub(a,c),this._normalize(x,b),this._crossProduct(x,this._sub(o,c))<0?this._rotateDirect(x,_,_):this._rotateDirect(x,_,-_),E=[],E.push(c),E.push(this._add(f,x)),E.push(this._sub(f,x)),E.push(a),i.push(E);break}case Wt.PerpendicularOffset:{const a=this._cp2(r,-4,1),l=this._cp3(r,a,.882353,-1.94),c=this._sub(l,a);this._crossProduct(c,this._sub(o,a))>0?this._rightPerpendicular(c):this._leftPerpendicular(c);const d=[c[0]/8,c[1]/8],f=this._sub(this._mid(a,l),d);i.push([f,o]);break}case Wt.LineExcludingLastSegment:{const a=this._arrowPath(r),l=[];let c=a.length-2;for(;c--;)l.push(a[c]);i.push(l);break}case Wt.MultivertexArrow:{const a=this._arrowPath(r),l=[];this._addArrow(l,a,!1),i.push(l);break}case Wt.CrossedArrow:{const a=this._arrowPath(r),l=[];this._addArrow(l,a,!0),i.push(l);break}case Wt.ChevronArrow:{const[a,l]=this._arrowLastSeg(r),c=10*this._geomUnitsPerPoint,d=this._sub(o,a),f=this._norm(d);this._normalize(d);const y=this._crossProduct(d,this._sub(l,a));let g=this._dotProduct(d,this._sub(l,a));g<.05*f?g=.05*f:g>.95*f-c&&(g=.95*f-c);const b=[a[0]+d[0]*g,a[1]+d[1]*g],_=this._leftPerp(d),x=[];x.push([b[0]+_[0]*y+d[0]*c,b[1]+_[1]*y+d[1]*c]),x.push(o),x.push([b[0]-_[0]*y+d[0]*c,b[1]-_[1]*y+d[1]*c]),i.push(x);break}case Wt.ChevronArrowOffset:{const[a,l]=this._arrowLastSeg(r),c=this._sub(o,a),d=this._norm(c);this._normalize(c);const f=this._crossProduct(c,this._sub(l,a));let y=this._dotProduct(c,this._sub(l,a));y<.05*d?y=.05*d:y>.95*d&&(y=.95*d);const g=[a[0]+c[0]*y,a[1]+c[1]*y];this._leftPerpendicular(c);const b=[];b.push([g[0]+c[0]*f*.5,g[1]+c[1]*f*.5]),b.push(this._mid(g,o)),b.push([g[0]-c[0]*f*.5,g[1]-c[1]*f*.5]),i.push(b);break}case Wt.PartialFirstSegment:{const[a,l]=this._arrowLastSeg(r),c=this._sub(o,a),d=this._norm(c);this._normalize(c);let f=this._dotProduct(c,this._sub(l,a));f<.05*d?f=.05*d:f>.95*d&&(f=.95*d);const y=[a[0]+c[0]*f,a[1]+c[1]*f];i.push([a,y]);break}case Wt.Arch:{const a=this._cp2(r,0,-1),l=this._cp3(r,a,.5,1),c=this._sub(o,a),d=this._mix(l,1,c,.55),f=this._mix(l,1,c,-.55),y=[o];this._addBezier2(y,o,d,l,4),this._addBezier2(y,l,f,a,4),i.push(y);break}case Wt.CurvedParallelTicks:{const a=this._cp2(r,-4,1),l=this._cp3(r,a,.882353,-1.94),c=this._sub(l,a);this._crossProduct(c,this._sub(o,a))>0?this._rightPerpendicular(c):this._leftPerpendicular(c);const d=[c[0]/8,c[1]/8],f=this._sub(this._mid(a,l),d),y=this._sub(this._mix(a,.75,l,.25),d),g=this._sub(this._mix(a,.25,l,.75),d),b=[a];this._addBezier2(b,a,y,f,3),this._addBezier2(b,f,g,l,3),i.push(b);for(let _=0;_<8;_++){const x=b[2*_+1],E=[this._clone(x)];E.push(this._add(x,[c[0]/4,c[1]/4])),i.push(E)}break}case Wt.Arc90Degrees:{const a=this._cp2(r,0,-1),l=this._cp3(r,a,.5,1),c=[a];this._add90DegArc(c,a,o,l),i.push(c);break}case Wt.TipWithPerpendicularAndTicks:{const[a,l]=this._arrowLastSeg(r),c=10*this._geomUnitsPerPoint,d=this._sub(o,a),f=this._norm(d);this._normalize(d);let y=this._crossProduct(d,this._sub(l,a)),g=this._dotProduct(d,this._sub(l,a));g<.05*f?g=.05*f:g>.95*f-c&&(g=.95*f-c);const b=this._leftPerp(d),_=[o[0]-d[0]*c,o[1]-d[1]*c],x=.5*Math.max(f-g-c,c);y=Math.abs(y);const E=[];E.push([_[0]+b[0]*(y+x)-d[0]*x,_[1]+b[1]*(y+x)-d[1]*x]),E.push([_[0]+b[0]*y,_[1]+b[1]*y]),E.push([_[0]-b[0]*y,_[1]-b[1]*y]),E.push([_[0]-b[0]*(y+x)-d[0]*x,_[1]-b[1]*(y+x)-d[1]*x]),i.push(E),i.push([_,o]);break}case Wt.ConcentricCircles:{const a=this._cp2(r,1,0),l=this._cp3(r,a,2,0),c=Math.cos(Math.PI/18),d=Math.sin(Math.PI/18);let f=this._dist(a,o),y=[f,0],g=[];for(let b=0;b<=36;b++)g.push(this._add(o,y)),this._rotateDirect(y,c,d);if(i.push(g),s>=4){g=[];const b=r[3];f=this._dist(b,o),y=[f,0];for(let _=0;_<=36;_++)g.push(this._add(o,y)),_===0&&(g.push(this._add(o,y)),yE(g[1],1)),this._rotateDirect(y,c,d);i.push(g)}g=[],f=this._dist(l,o),y=[f,0];for(let b=0;b<=36;b++)g.push(this._add(o,y)),this._rotateDirect(y,c,d);i.push(g);break}case Wt.DoubleJogArrow:{o=this._arrowPath(r)[0];const[a,l]=this._arrowLastSeg(r),c=this._sub(o,a),d=this._norm(c);this._normalize(c);const f=Math.abs(this._crossProduct(c,this._sub(l,o)));let y=Math.abs(this._dotProduct(c,this._sub(l,o)));y<.05*d?y=.05*d:y>.95*d&&(y=.95*d);const g=Math.max(f,y),b=this._leftPerp(c);let _=[];const x=[o[0]-c[0]*y*.5+b[0]*f*.5,o[1]-c[1]*y*.5+b[1]*f*.5];_.push([x[0],x[1]]),x[0]+=c[0]*g*.5+b[0]*g*.4,x[1]+=c[1]*g*.5+b[1]*g*.4,_.push([x[0],x[1]]),x[0]-=b[0]*g*.25,x[1]-=b[1]*g*.25,_.push([x[0],x[1]]),x[0]+=c[0]*g*.5+b[0]*g*.4,x[1]+=c[1]*g*.5+b[1]*g*.4,_.push([x[0],x[1]]),i.push(_),_=[],x[0]=o[0]-c[0]*y*.5-b[0]*f*.5,x[1]=o[1]-c[1]*y*.5-b[1]*f*.5,_.push([x[0],x[1]]),x[0]+=c[0]*g*.5-b[0]*g*.4,x[1]+=c[1]*g*.5-b[1]*g*.4,_.push([x[0],x[1]]),x[0]+=b[0]*g*.25,x[1]+=b[1]*g*.25,_.push([x[0],x[1]]),x[0]+=c[0]*g*.5-b[0]*g*.4,x[1]+=c[1]*g*.5-b[1]*g*.4,_.push([x[0],x[1]]),i.push(_);break}case Wt.LinkedChevrons:{const a=this._cp2(r,-5,0),l=this._cp3(r,a,-.2,1),c=this._sub(o,a);this._normalize(c);const d=this._leftPerp(c),f=Math.abs(this._crossProduct(c,this._sub(l,a)));i.push([a,o]);const y=[];y.push([o[0]-c[0]*f+d[0]*f,o[1]-c[1]*f+d[1]*f]),y.push(o),y.push([o[0]-c[0]*f-d[0]*f,o[1]-c[1]*f-d[1]*f]),i.push(y),this._addDash(i,a,[-c[0]*f+d[0]*f,-c[1]*f+d[1]*f]),this._addDash(i,a,[-c[0]*f-d[0]*f,-c[1]*f-d[1]*f]);break}case Wt.SegmentThenHalfCircle:{const a=this._cp2(r,2,0),l=this._cp3(r,a,1.5,0);let c;c=s>=4?r[3]:this._cp3(r,a,1.25,-.5);const d=this._sub(a,o);this._normalize(d);const f=.5*this._dist(a,l),y=this._crossProduct(d,this._sub(c,o))>0,g=Math.cos(Math.PI/18);let b=Math.sin(Math.PI/18);y&&(b=-b);const _=[o,a];d[0]*=f,d[1]*=f;const x=this._add(a,d);d[0]=-d[0],d[1]=-d[1];for(let E=1;E<=18;E++)this._rotateDirect(d,g,b),_.push(this._add(x,d));i.push(_);break}case Wt.LineWithStraightTicks:{const a=this._cp2(r,-2,1),l=this._cp3(r,a,-1,-.5),c=this._sub(l,a);this._normalize(c);const d=this._dotProduct(c,this._sub(a,o)),f=this._dotProduct(c,this._sub(l,o));let y=[o];y.push([o[0]+c[0]*d,o[1]+c[1]*d]),y.push(a),i.push(y),y=[o],y.push([o[0]+c[0]*f,o[1]+c[1]*f]),y.push(l),i.push(y);break}case Wt.DoubleCurve:{const a=this._cp2(r,-5,-1),l=this._cp3(r,a,2,0),c=Math.atan2(1,5),d=Math.cos(c),f=Math.sin(c),y=this._sub(a,o),g=this._dist(o,a);this._normalize(y),this._rotateDirect(y,d,-f);const b=[o];b.push([o[0]+y[0]*g*.5,o[1]+y[1]*g*.5]),yE(b[1],1),b.push([o[0]+y[0]*g*.8,o[1]+y[1]*g*.8]),this._addBezier2(b,b[2],[o[0]+y[0]*g,o[1]+y[1]*g],a,3);const _=this._sub(l,a),x=this._dist(a,l);this._normalize(_),this._rotateDirect(_,d,-f),this._addBezier2(b,a,[l[0]-_[0]*x,l[1]-_[1]*x],[l[0]-_[0]*x*.8,l[1]-_[1]*x*.8],3),b.push(l),i.push(b);break}case Wt.ParallelWithTicksByWidth:{const a=this._cp2(r,0,-1),l=this._cp3(r,a,.5,3),c=this._sub(a,o);this._normalize(c);const d=this._crossProduct(c,this._sub(l,o));this._leftPerpendicular(c),d>0?(this._addAngledTicks(i,o,[o[0]+c[0]*d,o[1]+c[1]*d],a),this._addAngledTicks(i,a,[a[0]+c[0]*d,a[1]+c[1]*d],o)):(this._addAngledTicks(i,[o[0]+c[0]*d,o[1]+c[1]*d],o,a),this._addAngledTicks(i,[a[0]+c[0]*d,a[1]+c[1]*d],o,a));break}case Wt.EnclosingRoundedRectangle:{const a=this._cp2(r,3,-2),l=[Math.min(o[0],a[0]),Math.max(o[1],a[1])],c=[Math.max(o[0],a[0]),Math.min(o[1],a[1])],d=c[0]-l[0],f=l[1]-c[1],y=Math.min(d,f)/10,g=[];g.push([l[0]+y+.75*(d-2*y),l[1]]),g.push([c[0]-y,l[1]]),this._add90DegArc(g,[c[0]-y,l[1]],[c[0],l[1]-y],[c[0],l[1]]),g.push([c[0],c[1]+y]),this._add90DegArc(g,[c[0],c[1]+y],[c[0]-y,c[1]],c),g.push([l[0]+y,c[1]]),this._add90DegArc(g,[l[0]+y,c[1]],[l[0],c[1]+y],[l[0],c[1]]),g.push([l[0],l[1]-y]),this._add90DegArc(g,[l[0],l[1]-y],[l[0]+y,l[1]],l),g.push([l[0]+y+.75*(d-2*y),l[1]]);break}case Wt.FullGeometry:default:i.push(r)}}return i}};var Eh;let Ast=(Eh=class{static local(){return Eh.instance===null&&(Eh.instance=new Eh),Eh.instance}execute(e,i,r,n,s){return new Lst(e,i,r)}},Eh.instance=null,Eh),Lst=class extends eT{constructor(e,i,r){super(e,!0,!0),this._curveHelper=new mm,this._beginCut=(i.beginCut!==void 0?i.beginCut:1)*r,this._endCut=(i.endCut!==void 0?i.endCut:1)*r,this._middleCut=(i.middleCut!==void 0?i.middleCut:0)*r,this._invert=i.invert!==void 0&&i.invert,this._beginCut<0&&(this._beginCut=0),this._endCut<0&&(this._endCut=0),this._middleCut<0&&(this._middleCut=0)}processPath(e){const{_beginCut:i,_endCut:r,_middleCut:n}=this,s=e.pathLength(),o=Ui.createEmptyOptimizedCIM("esriGeometryPolyline");if(this._invert){if(i!==0||r!==0||n!==0)if(i+r+n>=s)for(o.startPath();e.nextPoint();)o.pushXY(e.x,e.y);else this._curveHelper.appendSubCurve(o,e,0,i),this._curveHelper.appendSubCurve(o,e,.5*(s-n),.5*(s+n)),this._curveHelper.appendSubCurve(o,e,s-r,r)}else if(i===0&&r===0&&n===0)for(o.startPath();e.nextPoint();)o.pushXY(e.x,e.y);else i+r+n<s&&(n===0?this._curveHelper.appendSubCurve(o,e,i,s-r):(this._curveHelper.appendSubCurve(o,e,i,.5*(s-n)),this._curveHelper.appendSubCurve(o,e,.5*(s+n),s-r)));return o.totalSize===0?null:o}};const yoe=1e-7;let hD=class{constructor(){this._values=[],this.extPtGap=0,this.ctrlPtGap=0,this._length=0,this._currentValue=0}isEmpty(){return this._values.length===0}size(){return this._values.length}init(e,i,r=!0){if(this._setEmpty(),!e||e.length===0)return!1;for(let n=0;n<e.length;n++){let s=Math.abs(e[n]);r&&s<yoe&&(s=yoe),this._values.push(s),this._length+=s}return i&&1&e.length&&(this._length*=2),this._length!==0&&(this.ctrlPtGap=this.extPtGap=0,this._currentValue=-1,!0)}scale(e){const i=this._values?this._values.length:0;for(let r=0;r<i;++r)this._values[r]*=e;this._length*=e,this.extPtGap*=e,this.ctrlPtGap*=e}addValue(e){this._length+=e,this._values.push(e)}firstValue(){return this._values[0]}lastValue(){return this._values[this._values.length-1]}nextValue(){return this._currentValue++,this._currentValue===this._values.length&&(this._currentValue=0),this._values[this._currentValue]}reset(){this._currentValue=-1}length(){return this._length}_setEmpty(){this.extPtGap=this.ctrlPtGap=this._length=0,this._currentValue=-1,this._values.length=0}},Sf=class{constructor(){this.pt=null,this.ca=0,this.sa=0}};var Zy;(function(t){t[t.FAIL=0]="FAIL",t[t.END=1]="END",t[t.CONTINUE=2]="CONTINUE"})(Zy||(Zy={}));let xA=class{constructor(){this.reset()}reset(){this.segment=null,this.segmentLength=0,this.abscissa=0,this.isPathEnd=!1,this.isPartEnd=!1}isValid(){return this.segment!==null}copyTo(e){e.segment=this.segment,e.segmentLength=this.segmentLength,e.abscissa=this.abscissa,e.isPathEnd=this.isPathEnd,e.isPartEnd=this.isPartEnd}},pD=class extends mm{constructor(e=0,i=!1){super(e,i),this._tempPos=new xA,this._tempPt=[0,0],this._tolerance=AM,this._currentPosition=new xA}updateTolerance(e){this._tolerance=AM*e}init(e,i,r=!0){return r?(this._patternLength=i.length(),this._partExtPtGap=i.extPtGap,this._partCtrlPtGap=i.ctrlPtGap):(this._patternLength=0,this._partExtPtGap=0,this._partCtrlPtGap=0),this._currentPosition.reset(),this._partSegCount=0,this._pathCursor=e,this._seg=-1,this._setPosAtNextPart()}curPositionIsValid(){return this._currentPosition.isValid()}nextPosition(e,i=Zy.FAIL){const r=new xA;return!!this._nextPosition(e,r,null,i)&&(r.copyTo(this._currentPosition),!0)}curPointAndAngle(e){e.pt=this._getPoint(this._currentPosition);const[i,r]=this._getAngleCS(this._tempPt,this._currentPosition);e.ca=i,e.sa=r}nextPointAndAngle(e,i,r=Zy.FAIL){const n=this._tempPos;if(!this._nextPosition(e,n,null,r))return!1;n.copyTo(this._currentPosition),i.pt=this._getPoint(n);const[s,o]=this._getAngleCS(this._tempPt,n);return i.ca=s,i.sa=o,!0}nextCurve(e){if(e===0)return null;const i=Ui.createEmptyOptimizedCIM("esriGeometryPolyline");i.startPath(),i.nextPath();const r=new xA;return this._nextPosition(e,r,i,Zy.END)?(r.copyTo(this._currentPosition),i):null}isPathEnd(){return this._currentPosition.isPathEnd}getPathEnd(){return this._currentPosition.segment[1]}getPt(e){return this._pathCursor.seekInPath(e),[this._pathCursor.x,this._pathCursor.y]}getSeg(e){return[this.getPt(e),this.getPt(e+1)]}_nextPosition(e,i,r,n){if(this._currentPosition.isPathEnd)return!1;let s=this._currentPosition.abscissa;for(this._currentPosition.segmentLength>0&&(s/=this._currentPosition.segmentLength),this._currentPosition.copyTo(i);i.abscissa+e*this._partLengthRatio>i.segmentLength+this._tolerance;){if(r){if(r.pathSize===0)if(s===0){const a=i.segment[0];r.pushXY(a[0],a[1])}else r.pushPoint(this.getSegCoord2D(i.segment,s));const o=i.segment[1];r.pushXY(o[0],o[1])}if(s=0,e-=(i.segmentLength-i.abscissa)/this._partLengthRatio,this._partSegCount)i.segment=this._nextSegment(),i.segmentLength=this.getSegLength(i.segment),i.abscissa=0,this._partSegCount--;else{if(!this._setPosAtNextPart())return n!==Zy.FAIL&&(i.segmentLength=this.getSegLength(i.segment),i.isPartEnd=!0,n===Zy.END?(i.abscissa=i.segmentLength,i.isPathEnd=!0):i.abscissa=i.segmentLength+e,!0);this._currentPosition.copyTo(i)}}if(i.abscissa+=e*this._partLengthRatio,r){r.pathSize===0&&(s===0?r.pushPoint(i.segment[0]):r.pushPoint(this.getSegCoord2D(i.segment,s)));const o=i.abscissa/i.segmentLength;o===1?r.pushPoint(i.segment[1]):r.pushPoint(this.getSegCoord2D(i.segment,o))}return this._partSegCount||Math.abs(i.abscissa-i.segmentLength)<this._tolerance&&(i.isPathEnd=this._partIsLast,i.isPartEnd=!0),!0}_getPoint(e){const i=e.segmentLength<=0?0:e.abscissa/e.segmentLength;return this.getSegCoord2D(this._currentPosition.segment,i)}_getAngleCS(e,i){const r=i.segmentLength<=0?0:i.abscissa/i.segmentLength;return this.getSegAngleCS(e,this._currentPosition.segment,r)}_setPosAtNextPart(){for(;this._partSegCount;)this._hasNextSegment()&&this._nextSegment(),this._partSegCount--;if(!this._hasNextSegment())return!1;for(this._partLength=0,this._partIsLast=!0,this._partSegCount=0;this._hasNextSegment();)if(this._partLength+=this.getSegLength(this._nextSegment()),this._partSegCount++,this._pathCursor.getControlPointAt(this._getEndPointIndex())){this._partIsLast=!this._hasNextSegment();break}let e=this._partSegCount;for(;e;)this._previousSegment(),--e;this._currentPosition.segment=this._nextSegment(),this._currentPosition.segmentLength=this.getSegLength(this._currentPosition.segment),this._currentPosition.abscissa=0,this._currentPosition.isPathEnd=this._currentPosition.isPartEnd=!1,--this._partSegCount;const i=this._getStartPointIndex();this._ctrlPtBegin=this._pathCursor.getControlPointAt(i);let r=i+this._partSegCount+1;if(r>=this._pathCursor.pathSize&&(r=0),this._ctrlPtEnd=this._pathCursor.getControlPointAt(r),this._patternLength>0){const n=this._ctrlPtBegin?this._partCtrlPtGap:this._partExtPtGap,s=this._ctrlPtEnd?this._partCtrlPtGap:this._partExtPtGap;let o=Math.round((this._partLength-(n+s))/this._patternLength);o<=0&&(o=n+s>0?0:1),this._partLengthRatio=this._partLength/(n+s+o*this._patternLength),this._partLengthRatio<.01&&(this._partLengthRatio=1)}else this._partLengthRatio=1;return!0}_hasNextSegment(){return this._seg<this._pathCursor.pathSize-2}_previousSegment(){return this.getSeg(--this._seg)}_nextSegment(){return this.getSeg(++this._seg)}_getStartPointIndex(){return this._seg}_getEndPointIndex(){return this._seg+1}};var Ih;let Rst=(Ih=class{static local(){return Ih.instance===null&&(Ih.instance=new Ih),Ih.instance}execute(e,i,r,n,s){return new Ost(e,i,r)}},Ih.instance=null,Ih),Ost=class extends eT{constructor(e,i,r){super(e,!0,!0),this._firstCurve=null,this._walker=new pD,this._walker.updateTolerance(r),this._endings=i.lineDashEnding,this._customDashPos=-(i.offsetAlongLine??0)*r,this._offsetAtEnd=(i.customEndingOffset??0)*r;let n=Hve(i).dashTemplate;n==null&&(n=[]),n.length%2&&(n=[...n,...n]),this._pattern=new hD,this._pattern.init(n,!0),this._pattern.scale(r)}processPath(e){if(this._pattern.length()===0){this.iteratePath=!1;const n=vg(e);return Ui.fromJSONCIM({paths:[n]})}if(!this.iteratePath){let n=!0;switch(this._endings){case Zs.HalfPattern:case Zs.HalfGap:default:this._pattern.extPtGap=0;break;case Zs.FullPattern:this.isClosed||(this._pattern.extPtGap=.5*this._pattern.firstValue());break;case Zs.FullGap:this.isClosed||(this._pattern.extPtGap=.5*this._pattern.lastValue());break;case Zs.NoConstraint:this.isClosed||(n=!1);break;case Zs.Custom:this.isClosed||(this._pattern.extPtGap=.5*this._offsetAtEnd)}const s=e.pathLength();if(this._pattern.isEmpty()||s<.1*this._pattern.length()){const o=vg(e);return Ui.fromJSONCIM({paths:[o]})}if(!this._walker.init(e,this._pattern,n)){const o=vg(e);return Ui.fromJSONCIM({paths:[o]})}}let i;if(this.iteratePath)i=this._pattern.nextValue();else{let n;switch(this._endings){case Zs.HalfPattern:default:n=.5*this._pattern.firstValue();break;case Zs.HalfGap:n=.5*-this._pattern.lastValue();break;case Zs.FullGap:n=-this._pattern.lastValue();break;case Zs.FullPattern:n=0;break;case Zs.NoConstraint:case Zs.Custom:n=-this._customDashPos}let s=n/this._pattern.length();s-=Math.floor(s),n=s*this._pattern.length(),this._pattern.reset(),i=this._pattern.nextValue();let o=!1;for(;n>=i;)n-=i,i=this._pattern.nextValue(),o=!o;i-=n,o?(this._walker.nextPosition(i),i=this._pattern.nextValue()):this.isClosed&&(this._firstCurve=this._walker.nextCurve(i),i=this._pattern.nextValue(),this._walker.nextPosition(i),i=this._pattern.nextValue())}let r=this._walker.nextCurve(i);if(r)if(this._walker.isPathEnd()){if(this.iteratePath=!1,this._firstCurve){for(this._firstCurve.nextPath();this._firstCurve.nextPoint();)r.pushXY(this._firstCurve.x,this._firstCurve.y);this._firstCurve=null}}else i=this._pattern.nextValue(),!this._walker.nextPosition(i)||this._walker.isPathEnd()?(this.iteratePath=!1,this._firstCurve&&(r.pushCursor(this._firstCurve),this._firstCurve=null)):this.iteratePath=!0;else this.iteratePath=!1,r=this._firstCurve,this._firstCurve=null;return r==null||r.reset(),r}};var Ch;let Fst=(Ch=class{static local(){return Ch.instance===null&&(Ch.instance=new Ch),Ch.instance}execute(e,i,r,n,s,o,a){return new Nst(e,i,r,n,s,o,a)}},Ch.instance=null,Ch),Nst=class{constructor(e,i,r,n,s,o,a){switch(this._preventClipping=a,this._inputGeometries=e,this._tileKey=n,this._geometryEngine=s,this._maxInflateSize=o*r,this._width=(i.width!==void 0?i.width:2)*r,i.method){case K0.Mitered:case K0.Bevelled:case K0.Rounded:case K0.TrueBuffer:case K0.Square:}this._option=i.option}next(){let e;for(;e=this._inputGeometries.next();){if(e.geometryType==="esriGeometryEnvelope"&&this._width>0){const i=e.asJSON();return Math.min(i.xmax-i.xmin,i.ymax-i.ymin)-2*this._width<0?e:Ui.fromJSONCIM({paths:[[[i.xmin+this._width,i.ymin+this._width],[i.xmax-this._width,i.ymin+this._width],[i.xmax-this._width,i.ymax-this._width],[i.xmin+this._width,i.ymax-this._width],[i.xmin+this._width,i.ymin+this._width]],[[i.xmin,i.ymin],[i.xmin,i.ymax],[i.xmax,i.ymax],[i.xmax,i.ymin],[i.xmin,i.ymin]]]})}if(e.geometryType==="esriGeometryPolygon"){if(this._width===0)return e.clone();const i=this._geometryEngine;if(i==null)return null;const r=!this._preventClipping&&this._tileKey?bW(e,this._maxInflateSize,!0):e.clone();if(!r)continue;const n=i.buffer(et.WebMercator,r.asJSON(),-this._width,1);if(n){for(const s of n.rings)if(s){r.startPath();for(const o of s.reverse())r.pushXY(o[0],r.yFactor*o[1])}}return r}}return null}};var Mh;let Dst=(Mh=class{static local(){return Mh.instance===null&&(Mh.instance=new Mh),Mh.instance}execute(e,i,r,n,s){return new zst(e,i,r,s)}},Mh.instance=null,Mh),zst=class{constructor(e,i,r,n){this._inputGeometries=e,this._medhod=i.method,this._geometryEngine=n}next(){let e=this._inputGeometries.next();const i=this._medhod;for(;e!=null;){if(e.totalSize>0)switch(i){case QO.RectangularBox:return Vst(e);case QO.ConvexHull:return this._constructConvexHull(e);default:return jst(e)}e=this._inputGeometries.next()}return null}_constructConvexHull(e){switch(e.geometryType){case"esriGeometryPolyline":case"esriGeometryPolygon":{const i=this._geometryEngine;if(i==null)return null;const r=i.convexHull(et.WebMercator,e.asJSON());return r?Ui.fromJSONCIM(r):null}case"esriGeometryEnvelope":return e;default:return null}}};function Vst(t){const e=p2(t),i={xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3]};return Ui.fromJSONCIM(i)}function jst(t){switch(t.geometryType){case"esriGeometryPolyline":{const e=[];for(;t.nextPath();)Ust(t,e);return Ui.fromJSONCIM({rings:e})}case"esriGeometryPolygon":case"esriGeometryEnvelope":return t;default:return null}}function Ust(t,e){if(t.seekPathStart(),!t.nextPoint())return;const i=t.x,r=t.y,n=[[i,r]];for(e.push(n);t.nextPoint();)n.push([t.x,t.y]);n.push([i,r])}var kh;let Bst=(kh=class{static local(){return kh.instance===null&&(kh.instance=new kh),kh.instance}execute(e,i,r,n,s){return new Gst(e,i,r)}},kh.instance=null,kh),Gst=class extends eT{constructor(e,i,r){super(e,!1,!0),this._curveHelper=new mm,this._length=(i.length!==void 0?i.length:20)*r,this._angle=i.angle!==void 0?i.angle:225,this._position=i.position!==void 0?i.position:50,this._length<0&&(this._length=-this._length),this._position<20&&(this._position=20),this._position>80&&(this._position=80),this._mirror=!1}processPath(e){const i=Ui.createEmptyOptimizedCIM("esriGeometryPolyline");if(this._curveHelper.isEmpty(e))return null;e.seekInPath(0);const r=e.x,n=e.y;e.seekInPath(e.pathSize-1);const s=e.x,o=e.y,a=[s-r,o-n];this._curveHelper.normalize(a);const l=r+(s-r)*this._position/100,c=n+(o-n)*this._position/100,d=Math.cos((90-this._angle)/180*Math.PI);let f=Math.sin((90-this._angle)/180*Math.PI);this._mirror&&(f=-f),this._mirror=!this._mirror;const y=[l-this._length/2*d,c-this._length/2*f],g=[l+this._length/2*d,c+this._length/2*f];return i.pushPath([[r,n],y,g,[s,o]]),i}};var Ph;let qst=(Ph=class{static local(){return Ph.instance===null&&(Ph.instance=new Ph),Ph.instance}execute(e,i,r,n,s){return new Hst(e,i,r)}},Ph.instance=null,Ph),Hst=class{constructor(e,i,r){this._inputGeometries=e,this._offsetX=i.offsetX!==void 0?i.offsetX*r:0,this._offsetY=i.offsetY!==void 0?i.offsetY*r:0}next(){let e=this._inputGeometries.next();for(;e;){if(e.totalSize>0)return this._move(e.clone(),this._offsetX,this._offsetY);e=this._inputGeometries.next()}return null}_move(e,i,r){for(;e.nextPath();)for(;e.nextPoint();)e.x=e.x+i,e.y=e.y+r;return e.reset(),e}};const Wst=10;var Ah;let Zst=(Ah=class{static local(){return Ah.instance===null&&(Ah.instance=new Ah),Ah.instance}execute(e,i,r,n,s,o,a){return new Jst(e,i,r,n,s,o,a)}},Ah.instance=null,Ah),Jst=class{constructor(e,i,r,n,s,o,a){this._preventClipping=a,this._inputGeometries=e,this._tileKey=n,this._geometryEngine=s,this._curveHelper=new mm,this._offset=(i.offset??1)*r,this._method=i.method,this._maxInflateSize=Math.max(Math.abs(o*r),Wst),this._option=i.option,this._offsetFlattenError=AM*r}next(){let e;for(;e=this._inputGeometries.next();){if(this._offset===0)return e.clone();if(e.geometryType==="esriGeometryEnvelope"){if(this._method===qf.Rounded&&this._offset>0){const o=vg(e),a=this._curveHelper.offset(o,-this._offset,this._method,4,this._offsetFlattenError);if(a){const l=Ui.createEmptyOptimizedCIM(e.geometryType);return l.pushPath(a),l}return null}const s=e.asJSON();if(ia(s)&&Math.min(s.xmax-s.xmin,s.ymax-s.ymin)+2*this._offset>0)return Ui.fromJSONCIM({xmin:s.xmin-this._offset,xmax:s.xmax+this._offset,ymin:s.ymin-this._offset,ymax:s.ymax+this._offset})}const i=this._geometryEngine;if(i==null)continue;const r=!this._preventClipping&&this._tileKey?bW(e,this._maxInflateSize,!0):e.clone();if(!r)continue;const n=i.offset(et.WebMercator,r.asJSON(),-this._offset,1,this._method,4,this._offsetFlattenError);return n?Ui.fromJSONCIM(n):null}return null}};var Lh;let Yst=(Lh=class{static local(){return Lh.instance===null&&(Lh.instance=new Lh),Lh.instance}execute(e,i,r,n,s){return new Xst(e,i,r)}},Lh.instance=null,Lh),Xst=class{constructor(e,i,r){this._inputGeometries=e,this._length=(i.length!==void 0?i.length:$n.CIMGeometricEffectRadial.length)*r,this._angle=i.angle!==void 0?i.angle*Math.PI/180:$n.CIMGeometricEffectRadial.angle,this._lx=Math.cos(this._angle)*this._length,this._ly=Math.sin(this._angle)*this._length}next(){let e=this._inputGeometries.next();for(;e;){if(e.geometryType==="esriGeometryPoint"||e.geometryType==="esriGeometryMultipoint"){const i=Ui.createEmptyOptimizedCIM("esriGeometryPolyline");return e.nextPath()&&e.nextPoint()&&i.pushPath([[e.x,e.y],[e.x+this._lx,e.y+this._ly]]),i}if(e.geometryType==="esriGeometryPolygon"){const i=kue(e);if(!i)return null;const r=Ui.createEmptyOptimizedCIM("esriGeometryPolyline");return r.pushPath([[i[0],i[1]],[i[0]+this._lx,i[1]+this._ly]]),r}e=this._inputGeometries.next()}return null}};var Rh;let Kst=(Rh=class{static local(){return Rh.instance===null&&(Rh.instance=new Rh),Rh.instance}execute(e,i,r,n,s){return new Qst(e,i,r)}},Rh.instance=null,Rh),Qst=class{constructor(e,i,r){this._inputGeometries=e,this._reverse=i.reverse===void 0||i.reverse}next(){let e=this._inputGeometries.next();for(;e;){if(!this._reverse)return e;if(e.geometryType==="esriGeometryPolyline")return eot(e.clone());e=this._inputGeometries.next()}return null}};function eot(t){for(;t.nextPath();)for(let e=0;e<t.pathSize/2;e++){t.seekInPath(e);const i=t.x,r=t.y;t.seekInPath(t.pathSize-e-1);const n=t.x,s=t.y;t.x=i,t.y=r,t.seekInPath(e),t.x=n,t.y=s}return t.reset(),t}var Oh;let tot=(Oh=class{static local(){return Oh.instance===null&&(Oh.instance=new Oh),Oh.instance}execute(e,i,r,n,s){return new iot(e,i,r)}},Oh.instance=null,Oh),iot=class{constructor(e,i,r){this._inputGeometries=e,this._rotateAngle=i.angle!==void 0?i.angle*Math.PI/180:0}next(){let e=this._inputGeometries.next();for(;e;){if(this._rotateAngle===0||e.geometryType==="esriGeometryPoint")return e;if(e.totalSize>0){const i=p2(e),r=(i[2]+i[0])/2,n=(i[3]+i[1])/2;return e.reset(),this._rotate(e.clone(),r,n)}e=this._inputGeometries.next()}return null}_rotate(e,i,r){const n=Math.cos(this._rotateAngle),s=Math.sin(this._rotateAngle);for(;e.nextPath();)for(;e.nextPoint();){const o=e.x-i,a=e.y-r;e.x=i+o*n-a*s,e.y=r+o*s+a*n}return e.reset(),e}};var Fh;let rot=(Fh=class{static local(){return Fh.instance===null&&(Fh.instance=new Fh),Fh.instance}execute(e,i,r,n,s){return new not(e,i,r)}},Fh.instance=null,Fh),not=class{constructor(e,i,r){this._inputGeometries=e,this._xFactor=i.xScaleFactor!==void 0?i.xScaleFactor:1.15,this._yFactor=i.yScaleFactor!==void 0?i.yScaleFactor:1.15}next(){const e=this._inputGeometries.next();if(e){if(this._xFactor===1&&this._yFactor===1||e.geometryType==="esriGeometryPoint")return e;if(e.totalSize>0){const i=p2(e),r=(i[2]+i[0])/2,n=(i[3]+i[1])/2;return e.reset(),this._scaleCursor(e.clone(),r,n)}}return null}_scaleCursor(e,i,r){for(;e.nextPath();)for(;e.nextPoint();)e.x=i+(e.x-i)*this._xFactor,e.y=r+(e.y-r)*this._yFactor;return e.reset(),e}},Q9=class{constructor(){this._polyline=[]}beginPath(e){this._polyline.push([e])}lineTo(e){if(this._polyline.length===0)throw new Error("No path started. Call beginPath first.");this._polyline[this._polyline.length-1].push(e)}getPointCount(){return this._polyline.reduce(((e,i)=>e+i.length),0)}addSegment(e,i,r){r&&this.beginPath(e),this.lineTo(i)}getXY(e){let i=0;for(const r of this._polyline){if(e<i+r.length)return r[e-i];i+=r.length}return null}getGeometry(){return this._polyline}};var Nh;let sot=(Nh=class{static local(){return Nh.instance===null&&(Nh.instance=new Nh),Nh.instance}execute(e,i,r,n,s){return new oot(e,i,r)}},Nh.instance=null,Nh),oot=class extends eT{constructor(e,i,r){super(e,!1,!0),this._suppress=i.suppress!==void 0&&i.suppress,this._invert=i.invert!==void 0&&i.invert}processPath(e){if(e.totalSize<=0)return null;if(!this._suppress){const g=Ui.createEmptyOptimizedCIM("esriGeometryPolygon",!1,!1,e.yFactor);for(e.seekPathEnd();e.nextPoint();)g.pushXY(e.x,e.y);return g}const i=[],r=new Array(e.pathSize);let n=0;for(e.seekPathStart();e.nextPoint();)r[n++]=e.getControlPoint(),i.push([e.x,e.y]);let s=!0,o=!0,a=!1,l=!this._invert;n=0;const c=new Q9;let d=i[0];for(;n<i.length;){const g=i[n+1],b=r[n],_=r[n+1];n++,o&&(l=b||_?this._invert:!this._invert,o=!1),l?(c.addSegment(d,g,s),s=!1):a=!0,d=g,_&&(l?(l=!1,s=!0):l=!0)}const f=c.getGeometry();if(f.length===0)return null;if(!a&&i[0][0]===i[i.length-1][0]&&i[0][1]===i[i.length-1][1]){const g=f[f.length-1];return g[0][0]===g[g.length-1][0]&&g[0][1]===g[g.length-1][1]||g.push([g[0][0],g[0][1]]),Ui.fromJSONCIM({paths:f})}const y=f[f.length-1];return c.getPointCount()>1&&e.geometryType==="esriGeometryPolygon"&&y[0][0]===y[y.length-1][0]&&y[0][1]===y[y.length-1][1]&&f.length>1&&(f[f.length-1].push(...f[0]),f.splice(0,1)),Ui.fromJSONCIM({paths:f})}};function goe(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t}function T_e(t,e){return Math.sqrt(t*t+e*e)}function voe(t){const e=T_e(t[0],t[1]);t[0]/=e,t[1]/=e}function aot(t,e){return T_e(t[0]-e[0],t[1]-e[1])}function lot(t,e){return t[e+1]}function E_e(t){return t.length-1}function cot(t){let e=0;for(let i=0;i<E_e(t);i++)e+=uot(t,i);return e}function uot(t,e,i=1){let[r,n]=lot(t,e);return[r,n]=[Math.round(r),Math.round(n)],Math.sqrt(r*r+n*n)*i}let e7=class t7{constructor(e,i,r,n,s){this._segments=e,this._index=i,this._distance=r,this._xStart=n,this._yStart=s,this._done=!1}static create(e){return new t7(e,0,0,e[0][0],e[0][1])}clone(){return new t7(this._segments,this._index,this._distance,this.xStart,this.yStart)}equals(e){return this._index===e._index||e._index===this._index-1&&(this._distance===0||e._distance===1)||e._index===this._index+1&&(this._distance===1||e._distance===0)}leq(e){return this._index<e._index||this._index===e._index&&this._distance<=e._distance}geq(e){return this._index>e._index||this._index===e._index&&this._distance>=e._distance}get _segment(){return this._segments[this._index+1]}get angle(){const e=this.dy,i=(0*e+-1*-this.dx)/(1*this.length);let r=Math.acos(i);return e>0&&(r=2*Math.PI-r),r}get xStart(){return this._xStart}get yStart(){return this._yStart}get x(){return this.xStart+this.distance*this.dx}get y(){return this.yStart+this.distance*this.dy}get dx(){return this._segment[0]}get dy(){return this._segment[1]}get xMidpoint(){return this.xStart+.5*this.dx}get yMidpoint(){return this.yStart+.5*this.dy}get xEnd(){return this.xStart+this.dx}get yEnd(){return this.yStart+this.dy}get length(){const{dx:e,dy:i}=this;return Math.sqrt(e*e+i*i)}get remainingLength(){return this.length*(1-this._distance)}get backwardLength(){return this.length*this._distance}get distance(){return this._distance}get done(){return this._done}hasPrev(){return this._index-1>=0}hasNext(){return this._index+1<E_e(this._segments)}next(){return this.hasNext()?(this._xStart+=this.dx,this._yStart+=this.dy,this._distance=0,this._index+=1,this):null}prev(){return this.hasPrev()?(this._index-=1,this._xStart-=this.dx,this._yStart-=this.dy,this._distance=1,this):(this._done=!0,null)}_seekBackwards(e,i){const r=this.backwardLength;if(e<=r)return this._distance=(r-e)/this.length,this;let n=this.backwardLength;for(;this.prev();){if(n+this.length>e)return this._seekBackwards(e-n);n+=this.length}return this._distance=0,i?this:null}seek(e,i=!1){if(e<0)return this._seekBackwards(Math.abs(e),i);if(e<=this.remainingLength)return this._distance=(this.backwardLength+e)/this.length,this;let r=this.remainingLength;for(;this.next();){if(r+this.length>e)return this.seek(e-r,i);r+=this.length}return this._distance=1,i?this:null}};function Zxt(t,e,i,r=!0){const n=cot(t),s=e7.create(t),o=n/2;if(!r)return s.seek(o),void(s.x<ix&&s.y<ix&&s.x>=0&&s.y>=0&&i(s.clone(),0,o+0*e,n));const a=Math.max((n-e)/2,0),l=Math.floor(a/e),c=o-l*e;s.seek(c);for(let d=-l;d<=l;d++)s.x<ix&&s.y<ix&&s.x>=0&&s.y>=0&&i(s.clone(),d,o+d*e,n),s.seek(e)}function Jxt(t,e){const i=e;for(let r=0;r<t.length;r++){let n=t[r];dot(n,i);const s=[];s.push(n[0]);for(let o=1;o<n.length;o++){const[a,l]=n[o-1],[c,d]=n[o],f=c-a,y=d-l;s.push([f,y])}t[r]=s,n=s}return t}function dot(t,e){if(e<=0)return;const r=t.length;if(r<3)return;const n=[];let s=0;n.push(0);for(let f=1;f<r;f++)s+=aot(t[f],t[f-1]),n.push(s);e=Math.min(e,.2*s);const o=[];o.push(t[0][0]),o.push(t[0][1]);const a=t[r-1][0],l=t[r-1][1],c=goe([0,0],t[0],t[1]);voe(c),t[0][0]+=e*c[0],t[0][1]+=e*c[1],goe(c,t[r-1],t[r-2]),voe(c),t[r-1][0]+=e*c[0],t[r-1][1]+=e*c[1];for(let f=1;f<r;f++)n[f]+=e;n[r-1]+=e;const d=.5*e;for(let f=1;f<r-1;f++){let y=0,g=0,b=0;for(let _=f-1;_>=0&&!(n[_+1]<n[f]-d);_--){const x=d+n[_+1]-n[f],E=n[_+1]-n[_],C=n[f]-n[_]<d?1:x/E;if(Math.abs(C)<1e-6)break;const k=C*C,O=C*x-.5*k*E,D=C*E/e,B=t[_+1],j=t[_][0]-B[0],Z=t[_][1]-B[1];y+=D/O*(B[0]*C*x+.5*k*(x*j-E*B[0])-k*C*E*j/3),g+=D/O*(B[1]*C*x+.5*k*(x*Z-E*B[1])-k*C*E*Z/3),b+=D}for(let _=f+1;_<r&&!(n[_-1]>n[f]+d);_++){const x=d-n[_-1]+n[f],E=n[_]-n[_-1],C=n[_]-n[f]<d?1:x/E;if(Math.abs(C)<1e-6)break;const k=C*C,O=C*x-.5*k*E,D=C*E/e,B=t[_-1],j=t[_][0]-B[0],Z=t[_][1]-B[1];y+=D/O*(B[0]*C*x+.5*k*(x*j-E*B[0])-k*C*E*j/3),g+=D/O*(B[1]*C*x+.5*k*(x*Z-E*B[1])-k*C*E*Z/3),b+=D}o.push(y/b),o.push(g/b)}o.push(a),o.push(l);for(let f=0,y=0;f<r;f++)t[f][0]=o[y++],t[f][1]=o[y++]}const gE=()=>Ie.getLogger("esri.symbols.cim.effects.EffectTaperedPolygon");var Dh;let hot=(Dh=class{static local(){return Dh.instance===null&&(Dh.instance=new Dh),Dh.instance}execute(e,i,r,n,s){return new pot(e,i,r,n,s)}},Dh.instance=null,Dh),pot=class extends eT{constructor(e,i,r,n,s){super(e,!1,!0),this._slopeS=0,this._slopeC=1,this._lastTangent1=new hi(NaN,NaN),this._lastWidth=0,this._tileKey=null,this._halfFromWidth=Math.abs(i.fromWidth!==void 0?i.fromWidth:0)*r*.5,this._halfToWidth=Math.abs(i.toWidth!==void 0?i.toWidth:1)*r*.5,this._originalLength=(i.length!==void 0?i.length:0)*r,this._length=0,this._tileKey=n,this._geometryEngine=s}processPath(e){var b,_;if(e.totalSize<=0)return null;if(this._halfFromWidth<=0&&this._halfToWidth<=0){const x=Ui.createEmptyOptimizedCIM("esriGeometryPolygon",!1,!1,e.yFactor);for(e.seekPathEnd();e.prevPoint();)x.pushXY(e.x,e.y);for(e.seekPathStart();e.nextPoint();)x.pushXY(e.x,e.y);return x}const i=[];e.seekPathStart();let r=0,n=0;for(;e.nextPoint();)i.push([e.x-r,e.y-n]),r=e.x,n=e.y;let s=(b=this._geometryEngine)==null?void 0:b.simplify(et.WebMercator,{paths:[i]});s||this._tileKey!=null||(s={paths:[i]});const o=bn(s)?s.rings:Xs(s)?s.paths:null;if(!o)return gE().error(new ie("mapview-bad-resource","Unable to process geometry")),null;const a=new Q9,l=new Q9;let c=0;for(const x of o){r=x[0][0],n=x[0][1];for(let E=1;E<x.length;E++){const C=r+x[E][0],k=n+x[E][1];c+=Math.sqrt((C-r)*(C-r)+(k-n)*(k-n)),r=C,n=k}}if(this._originalLength===0||this._originalLength>c){this._length=c;const x=(this._halfToWidth-this._halfFromWidth)/this._length;if(Math.abs(x)<1){const E=x*x;this._slopeC=Math.sqrt(1/(1+E)),this._slopeS=Math.sqrt(E/(1+E)),x<0&&(this._slopeS=-this._slopeS)}else this._slopeC=this._slopeS=.7071}else this._length=this._originalLength,this._slopeC=1,this._slopeS=0;let d=0;const f=[];for(const x of o){const E=e7.create(x),C=e7.create(x);this._setFromOffset(C,a,l);let k=C.next(),O=E;for(;k&&O;)d=this._setOffset(O,k,d,a,l),O=E.next(),k=C.next();O=E,O&&this._setToOffset(O,d,a,l);const D=a.getGeometry(),B=l.getGeometry(),j=[];for(const Z of D)j.push(...Z);for(let Z=B.length-1;Z>=0;Z--){const X=B[Z];for(let ee=X.length-1;ee>=0;ee--)j.push(X[ee])}f.push(j)}const y={rings:f};fMe(y);let g=(_=this._geometryEngine)==null?void 0:_.simplify(et.WebMercator,y);if(!g){if(this._tileKey!=null)return null;g=y}return Ui.fromJSONCIM(g)}_setFromOffset(e,i,r){const n=this._halfFromWidth,s=new hi(e.xEnd-e.xStart,e.yEnd-e.yStart);s.normalize(),s.scale(n),i.beginPath([e.xStart-s.y,e.yStart+s.x]),r.beginPath([e.xStart+s.y,e.yStart-s.x])}_setToOffset(e,i,r,n){let s;s=(i+=Math.sqrt((e.xEnd-e.xStart)*(e.xEnd-e.xStart)+(e.yEnd-e.yStart)*(e.yEnd-e.yStart)))>=this._length?this._halfToWidth:this._halfFromWidth+(this._halfToWidth-this._halfFromWidth)*i/this._length;const o=new hi(e.xEnd-e.xStart,e.yEnd-e.yStart);o.normalize(),o.scale(s),r.lineTo([e.xEnd-o.y,e.yEnd+o.x]),n.lineTo([e.xEnd+o.y,e.yEnd-o.x])}_setOffset(e,i,r,n,s){const o=Math.sqrt((e.xEnd-e.xStart)*(e.xEnd-e.xStart)+(e.yEnd-e.yStart)*(e.yEnd-e.yStart));let a;a=r+o>=this._length?this._halfToWidth:this._halfFromWidth+(this._halfToWidth-this._halfFromWidth)*(r+o)/this._length,r+=o;const l=new hi(e.xEnd,e.yEnd),c=new hi(e.xEnd-e.xStart,e.yEnd-e.yStart);c.normalize();const d=new hi(i.xEnd-i.xStart,i.yEnd-i.yStart);d.normalize();const f=c.x*d.y-c.y*d.x;let y;y=Math.abs(f)===0?new hi(d.x,d.y):new hi((d.x-c.x)/f,(d.y-c.y)/f);const g=n.getPointCount(),b=s.getPointCount();c.leftPerpendicular(),d.leftPerpendicular();const _=c.x*d.x+c.y*d.y;if(_>.99){const x=new hi((c.x+d.x)*a/2,(c.y+d.y)*a/2),E=x.clone();E.rotate(this._slopeC,this._slopeS),n.lineTo([l.x+E.x,l.y+E.y]);const C=x.clone();C.rotateReverse(this._slopeC,this._slopeS),s.lineTo([l.x-C.x,l.y-C.y])}else{if(f<0){const D=y.clone().scale(-a);D.rotateReverse(this._slopeC,this._slopeS);const B=s.getXY(b-1);B||gE().error(new ie("mapview-bad-resource","Unable to process geometry, index out of scope"));const j=hi.add(l,D),Z=hi.sub(j,hi.fromArray(B));if(c.x*Z.y-c.y*Z.x>0){const X=new hi(-c.x*a,-c.y*a);X.rotateReverse(this._slopeC,this._slopeS);const ee=new hi(-d.x*a,-d.y*a);ee.rotateReverse(this._slopeC,this._slopeS),s.lineTo([l.x+X.x,l.y+X.y]),s.lineTo([l.x,l.y]),s.lineTo([l.x+ee.x,l.y+ee.y])}else s.lineTo([l.x+D.x,l.y+D.y])}else{const D=y.clone().scale(a);D.rotate(this._slopeC,this._slopeS);const B=n.getXY(g-1);B||gE().error(new ie("mapview-bad-resource","Unable to process geometry, index out of scope"));const j=hi.add(l,D),Z=hi.sub(j,hi.fromArray(B));if(c.x*Z.y-c.y*Z.x>0){const X=c.clone().scale(a);X.rotate(this._slopeC,this._slopeS);const ee=d.clone().scale(a);ee.rotate(this._slopeC,this._slopeS),n.lineTo([l.x+X.x,l.y+X.y]),n.lineTo([l.x,l.y]),n.lineTo([l.x+ee.x,l.y+ee.y])}else n.lineTo([l.x+D.x,l.y+D.y])}const x=Math.acos(_);let E=1;if(a>.25){const D=2*Math.acos(1-.25/a);D<x&&(E=Math.round(x/D))}const C=Math.cos(x/E),k=Math.sin(x/E),O=c.clone();if(f<0){O.rotate(this._slopeC,this._slopeS);const D=n.getXY(g-1);D||gE().error(new ie("mapview-bad-resource","Unable to process geometry, index out of scope"));const B=hi.add(l,O.clone().scale(this._lastWidth)),j=hi.sub(B,hi.fromArray(D)),Z=c.x*j.y-c.y*j.x;if(!isNaN(this._lastTangent1.x)&&!isNaN(this._lastTangent1.y)&&Z>0){const X=new hi(e.xStart,e.yStart),ee=this._lastTangent1.clone().scale(this._lastWidth);ee.rotate(this._slopeC,this._slopeS);const pe=c.clone().scale(this._lastWidth);pe.rotate(this._slopeC,this._slopeS),n.lineTo([X.x+ee.x,X.y+ee.y]),n.lineTo([X.x,X.y]),n.lineTo([X.x+pe.x,X.y+pe.y])}}else{O.scale(-1).rotateReverse(this._slopeC,this._slopeS);const D=s.getXY(b-1);D||gE().error(new ie("mapview-bad-resource","Unable to process geometry, index out of scope"));const B=hi.add(l,O.clone().scale(this._lastWidth)),j=hi.sub(B,hi.fromArray(D)),Z=c.x*j.y-c.y*j.x;if(!isNaN(this._lastTangent1.x)&&!isNaN(this._lastTangent1.y)&&Z>0){const X=new hi(e.xStart,e.yStart),ee=this._lastTangent1.clone().scale(-this._lastWidth);ee.rotateReverse(this._slopeC,this._slopeS);const pe=c.clone().scale(-this._lastWidth);pe.rotateReverse(this._slopeC,this._slopeS),s.lineTo([X.x+ee.x,X.y+ee.y]),s.lineTo([X.x,X.y]),s.lineTo([X.x+pe.x,X.y+pe.y])}}O.scale(a);for(let D=0;D<=E;D++)f<0?(n.lineTo([l.x+O.x,l.y+O.y]),O.rotateReverse(C,k)):(s.lineTo([l.x+O.x,l.y+O.y]),O.rotate(C,k))}return this._lastTangent1.setCoords(c.x,c.y),this._lastWidth=a,r}};var zh;let fot=(zh=class{static local(){return zh.instance===null&&(zh.instance=new zh),zh.instance}execute(e,i,r,n,s){return new mot(e,i,r)}},zh.instance=null,zh),mot=class{constructor(e,i,r){this._inputGeometries=e,this._height=(i.amplitude!==void 0?i.amplitude:2)*r,this._period=(i.period!==void 0?i.period:3)*r,this._style=i.waveform,this._height<=0&&(this._height=Math.abs(this._height)),this._period<=0&&(this._period=Math.abs(this._period)),this._pattern=new hD,this._pattern.addValue(this._period),this._pattern.addValue(this._period),this._walker=new pD,this._walker.updateTolerance(r)}next(){let e=this._inputGeometries.next();for(;e;){if(this._height===0||this._period===0)return e;const i=this._processGeom(e);if(i)return i;e=this._inputGeometries.next()}return null}_processGeom(e){const i=Ui.createEmptyOptimizedCIM(e.geometryType);for(;e.nextPath();){i.startPath();const r=e.pathLength();if(this._walker.init(e,this._pattern))switch(this._style){case ox.Sinus:default:this._constructCurve(i,r,!1);break;case ox.Square:this._constructSquare(i,r);break;case ox.Triangle:this._constructTriangle(i,r);break;case ox.Random:this._constructCurve(i,r,!0)}else for(;e.nextPoint();)i.pushXY(e.x,e.y)}return i}_constructCurve(e,i,r){let n=Math.round(i/this._period);n===0&&(n=1);const s=n*16+1,o=i/n,a=this._period/16,l=1/s,c=2*Math.PI*i/o,d=2*Math.PI*Math.random(),f=2*Math.PI*Math.random(),y=2*Math.PI*Math.random(),g=.75-Math.random()/2,b=.75-Math.random()/2,_=new Sf;this._walker.curPointAndAngle(_),e.pushPoint(_.pt);let x=0;for(;;){if(!this._walker.nextPointAndAngle(a,_)){e.pushPoint(this._walker.getPathEnd());break}{const E=x;let C;if(x+=l,r){const k=this._height/2*(1+.3*Math.sin(g*c*E+d));C=k*Math.sin(c*E+f),C+=k*Math.sin(b*c*E+y),C/=2}else C=.5*this._height*Math.sin(.5*c*E);e.pushXY(_.pt[0]-C*_.sa,_.pt[1]+C*_.ca)}}}_constructSquare(e,i){Math.round(i/this._period);let r=!0;for(;;){let n=!1;if(this._walker.curPositionIsValid()){const s=new Sf;this._walker.curPointAndAngle(s);const o=new Sf;if(this._walker.nextPointAndAngle(this._period,o)){const a=new Sf;this._walker.nextPointAndAngle(this._period,a)&&(r?(e.pushPoint(s.pt),r=!1):e.pushPoint(s.pt),e.pushXY(s.pt[0]-this._height/2*s.sa,s.pt[1]+this._height/2*s.ca),e.pushXY(o.pt[0]-this._height/2*o.sa,o.pt[1]+this._height/2*o.ca),e.pushXY(o.pt[0]+this._height/2*o.sa,o.pt[1]-this._height/2*o.ca),e.pushXY(a.pt[0]+this._height/2*a.sa,a.pt[1]-this._height/2*a.ca),n=!0)}}if(!n){e.pushPoint(this._walker.getPathEnd());break}}}_constructTriangle(e,i){Math.round(i/this._period);let r=!0;for(;;){let n=!1;if(this._walker.curPositionIsValid()){const s=new Sf;this._walker.curPointAndAngle(s);const o=new Sf;if(this._walker.nextPointAndAngle(this._period/2,o)){const a=new Sf;this._walker.nextPointAndAngle(this._period,a)&&(this._walker.nextPosition(this._period/2)&&(r?(e.pushPoint(s.pt),r=!1):e.pushPoint(s.pt),e.pushXY(o.pt[0]-this._height/2*o.sa,o.pt[1]+this._height/2*o.ca),e.pushXY(a.pt[0]+this._height/2*a.sa,a.pt[1]-this._height/2*a.ca)),n=!0)}}if(!n){e.pushPoint(this._walker.getPathEnd());break}}}};var Vh;let yot=(Vh=class{static local(){return Vh.instance===null&&(Vh.instance=new Vh),Vh.instance}execute(e,i,r,n,s){return new got(e,i,r)}},Vh.instance=null,Vh),got=class extends z2{constructor(e,i,r){super(e),this._geometryWalker=new pD,this._geometryWalker.updateTolerance(r),this._angleToLine=i.angleToLine??!0,this._offset=(i.offset?i.offset:0)*r,this._originalEndings=i.endings,this._offsetAtEnd=(i.customEndingOffset?i.customEndingOffset:0)*r,this._position=-(i.offsetAlongLine?i.offsetAlongLine:0)*r,this._pattern=new hD,this._pattern.init(i.placementTemplate,!1),this._pattern.scale(r),this._endings=this._originalEndings}processPath(e){if(this._pattern.isEmpty())return null;let i;if(this.iteratePath)i=this._pattern.nextValue();else{this._originalEndings===Eu.WithFullGap&&this.isClosed?this._endings=Eu.WithMarkers:this._endings=this._originalEndings,this._pattern.extPtGap=0;let n,s=!0;switch(this._endings){case Eu.NoConstraint:n=-this._position,n=this._adjustPosition(n),s=!1;break;case Eu.WithHalfGap:default:n=-this._pattern.lastValue()/2;break;case Eu.WithFullGap:n=-this._pattern.lastValue(),this._pattern.extPtGap=this._pattern.lastValue();break;case Eu.WithMarkers:n=0;break;case Eu.Custom:n=-this._position,n=this._adjustPosition(n),this._pattern.extPtGap=.5*this._offsetAtEnd}if(!this._geometryWalker.init(e,this._pattern,s))return null;this._pattern.reset();let o=0;for(;n>o;)n-=o,o=this._pattern.nextValue();o-=n,i=o,this.iteratePath=!0}const r=new Sf;return this._geometryWalker.nextPointAndAngle(i,r)?this._endings===Eu.WithFullGap&&this._geometryWalker.isPathEnd()?(this.iteratePath=!1,null):this._endings===Eu.WithMarkers&&this._geometryWalker.isPathEnd()&&(this.iteratePath=!1,this.isClosed)?null:(this.internalPlacement.setTranslate(r.pt[0]-this._offset*r.sa,r.pt[1]+this._offset*r.ca),this._angleToLine&&this.internalPlacement.setRotateCS(r.ca,r.sa),this.internalPlacement):(this.iteratePath=!1,null)}_adjustPosition(e){let i=e/this._pattern.length();return i-=Math.floor(i),i*this._pattern.length()}};var jh;let vot=(jh=class{static local(){return jh.instance===null&&(jh.instance=new jh),jh.instance}execute(e,i,r,n,s){return new bot(e,i,r)}},jh.instance=null,jh),bot=class extends z2{constructor(e,i,r){super(e,!1,!0),this._curveHelper=new mm,this._placePerPart=i.placePerPart??!1,this._angleToLine=i.angleToLine===void 0||i.angleToLine,this._offset=i.offset!==void 0?i.offset*r:0,this._type=i.extremityPlacement,this._position=i.offsetAlongLine!==void 0?i.offsetAlongLine*r:0,this._beginProcessed=!1}processMultiPath(e){return this._placePerPart?super.processMultiPath(e):this.processPath(e)}processPath(e){let i;switch(this._type){case Yh.Both:default:this._beginProcessed?(i=this._atExtremities(e,this._position,!1),this._beginProcessed=!1,this.iterateMultiPath=!1,this.iteratePath=!1):(i=this._atExtremities(e,this._position,!0),this._beginProcessed=!0,this.iterateMultiPath=!0,this.iteratePath=!0);break;case Yh.JustBegin:i=this._atExtremities(e,this._position,!0);break;case Yh.JustEnd:i=this._atExtremities(e,this._position,!1);case Yh.None:}return i}_atExtremities(e,i,r){if(this._placePerPart||(r?e.seekPath(0):e.seekPath(e.totalSize-1)),r||e.seekPathEnd(),r?e.nextPoint():e.prevPoint()){let n=0,[s,o]=[0,0],[a,l]=[e.x,e.y];const c=[0,0];for(;r?e.nextPoint():e.prevPoint();){s=a,o=l,a=e.x,l=e.y;const d=this._curveHelper.getLength(s,o,a,l);if(n+d>i){const f=(i-n)/d,[y,g]=this._curveHelper.getAngleCS(c,s,o,a,l,f),b=this._curveHelper.getCoord2D(s,o,a,l,f);return this.internalPlacement.setTranslate(b[0]-this._offset*g,b[1]+this._offset*y),this._angleToLine&&this.internalPlacement.setRotateCS(-y,-g),this.internalPlacement}n+=d}}return null}};var Uh;let wot=(Uh=class{static local(){return Uh.instance===null&&(Uh.instance=new Uh),Uh.instance}execute(e,i,r,n,s){return new _ot(e,i,r)}},Uh.instance=null,Uh),_ot=class extends z2{constructor(e,i,r){super(e),this._walker=new pD,this._walker.updateTolerance(r),this._angleToLine=i.angleToLine===void 0||i.angleToLine,this._offset=i.offset!==void 0?i.offset*r:0,this._beginGap=i.beginPosition!==void 0?i.beginPosition*r:0,this._endGap=i.endPosition!==void 0?i.endPosition*r:0,this._flipFirst=i.flipFirst===void 0||i.flipFirst,this._pattern=new hD,this._pattern.init(i.positionArray,!1,!1),this._subPathLen=0,this._posCount=this._pattern.size(),this._isFirst=!0,this._prevPos=0}processPath(e){if(this._pattern.isEmpty())return null;let i;if(this.iteratePath){const a=this._pattern.nextValue()*this._subPathLen,l=this._beginGap+a;i=l-this._prevPos,this._prevPos=l}else{if(this._posCount=this._pattern.size(),this._isFirst=!0,this._prevPos=0,this._subPathLen=e.pathLength()-this._beginGap-this._endGap,this._subPathLen<0)return this.iteratePath=!1,null;if(!this._walker.init(e,this._pattern,!1))return null;this._pattern.reset();const a=this._pattern.nextValue()*this._subPathLen,l=this._beginGap+a;i=l-this._prevPos,this._prevPos=l,this.iteratePath=!0}const r=new Sf;if(!this._walker.nextPointAndAngle(i,r,Zy.END))return this.iteratePath=!1,null;this.internalPlacement.setTranslate(r.pt[0]-this._offset*r.sa,r.pt[1]+this._offset*r.ca);const n=this._isFirst&&this._flipFirst;let s,o;return this._angleToLine?(s=r.ca,o=r.sa):(s=1,o=0),n&&(s=-s,o=-o),this.internalPlacement.setRotateCS(s,o),this._isFirst=!1,this._posCount--,this._posCount===0&&(this.iteratePath=!1),this.internalPlacement}};const vE=512,xot=10,Pd=24,G3=1e-6;var Bh;let Sot=(Bh=class{static local(){return Bh.instance===null&&(Bh.instance=new Bh),Bh.instance}execute(e,i,r,n,s){return new $ot(e,i,r,n,s)}},Bh.instance=null,Bh),$ot=class F0{constructor(e,i,r,n,s){if(this._xMin=0,this._xMax=0,this._yMin=0,this._yMax=0,this._currentX=0,this._currentY=0,this._accelerationMap=null,this._testInsidePolygon=!1,this._verticalSubdivision=!0,this._stepX=Math.abs(i.stepX??16)*r,this._stepY=Math.abs(i.stepY??16)*r,this._stepX=Math.round(128*this._stepX)/128,this._stepY=Math.round(128*this._stepY)/128,this._stepX!==0&&this._stepY!==0){if(this._gridType=i.gridType??_C.Fixed,this._gridType===_C.Random){const o=i.seed??13,a=1;this._randomLCG=new j7(o*a),this._randomness=(i.randomness??100)/100,this._gridAngle=0,this._shiftOddRows=!1,this._cosAngle=1,this._sinAngle=0,this._offsetX=0,this._offsetY=0,this._buildRandomValues()}else{if(this._randomness=0,this._gridAngle=i.gridAngle??0,this._shiftOddRows=i.shiftOddRows??!1,this._offsetX=(i.offsetX??0)*r,this._offsetY=(i.offsetY??0)*r,this._cosAngle=Math.cos(this._gridAngle/180*Math.PI),this._sinAngle=-Math.sin(this._gridAngle/180*Math.PI),this._stepX)if(this._offsetX<0)for(;this._offsetX<-.5*this._stepX;)this._offsetX+=this._stepX;else for(;this._offsetX>=.5*this._stepX;)this._offsetX-=this._stepX;if(this._stepY)if(this._offsetY<0)for(;this._offsetY<-.5*this._stepY;)this._offsetY+=this._stepY;else for(;this._offsetY>=.5*this._stepY;)this._offsetY-=this._stepY}if(this._graphicOriginX=0,this._graphicOriginY=0,n!=null){const[o,a,l,c]=n.split("/"),d=parseFloat(o),f=parseFloat(a),y=parseFloat(l),g=parseFloat(c);this._graphicOriginX=-(g*2**d+y)*vE,this._graphicOriginY=f*vE,this._testInsidePolygon=!0}this._internalPlacement=new Q$,this._calculateMinMax(e),this._geometryCursor=e}}next(){return this._geometryCursor?this._nextInside():null}_buildRandomValues(){if(!F0._randValues){F0._randValues=[];for(let e=0;e<Pd;e++)for(let i=0;i<Pd;i++)F0._randValues.push(this._randomLCG.getFloat()),F0._randValues.push(this._randomLCG.getFloat())}}_calculateMinMax(e){let i,r,n,s,o,a,l,c,d,f,y,g,b,_;this._xMin=0,this._xMax=0,this._yMin=0,this._yMax=0,l=c=b=y=Number.MAX_VALUE,d=f=_=g=-Number.MAX_VALUE;const x=this._cosAngle!==1;for(e.reset();e.nextPath();)for(;e.nextPoint();)a=e.x,o=e.y,i=a-this._graphicOriginX-this._offsetX,r=o-this._graphicOriginY-this._offsetY,x?(n=this._cosAngle*i-this._sinAngle*r,s=this._sinAngle*i+this._cosAngle*r):(n=i,s=r),l=Math.min(l,n),d=Math.max(d,n),c=Math.min(c,s),f=Math.max(f,s),y=Math.min(y,o),g=Math.max(g,o),b=Math.min(b,a),_=Math.max(_,a);y=y!==Number.MAX_VALUE?y:-512-this._stepY,g=g!==-Number.MAX_VALUE?g:this._stepY,b=b!==Number.MAX_VALUE?b:-this._stepX,_=_!==-Number.MAX_VALUE?_:vE+this._stepX;const E=g-y,C=_-b;if(this._verticalSubdivision=E>=C,this._polygonMin=this._verticalSubdivision?y:b,this._testInsidePolygon){let k=0-this._graphicOriginX-this._offsetX-this._stepX,O=vE-this._graphicOriginX-this._offsetX+this._stepX,D=-512-this._graphicOriginY-this._offsetY-this._stepY,B=0-this._graphicOriginY-this._offsetY+this._stepY;if(x){const j=[[k,D],[k,B],[O,D],[O,B]];k=D=Number.MAX_VALUE,O=B=-Number.MAX_VALUE;for(const Z of j){const X=this._cosAngle*Z[0]-this._sinAngle*Z[1],ee=this._sinAngle*Z[0]+this._cosAngle*Z[1];k=Math.min(k,X),O=Math.max(O,X),D=Math.min(D,ee),B=Math.max(B,ee)}}l=l!==Number.MAX_VALUE?Math.max(l,k):k,c=c!==Number.MAX_VALUE?Math.max(c,D):D,d=d!==-Number.MAX_VALUE?Math.min(d,O):O,f=f!==-Number.MAX_VALUE?Math.min(f,B):B}this._xMin=Math.round(l/this._stepX),this._xMax=Math.round(d/this._stepX),this._yMin=Math.round(c/this._stepY),this._yMax=Math.round(f/this._stepY),this._currentX=this._xMax+1,this._currentY=this._yMin-1,this._buildAccelerationMap(e,b,_,y,g)}_buildAccelerationMap(e,i,r,n,s){e.reset();const o=new Map,a=this._verticalSubdivision,l=a?s-n:r-i;let c=Math.ceil(l/xot);if(c<=1)return;const d=Math.floor(l/c);let f,y,g,b,_,x,E,C,k,O,D;for(c++,this._delta=d,a?(k=-512-2*this._stepY,O=2*this._stepY,D=n):(k=-2*this._stepX,O=vE+2*this._stepX,D=i);e.nextPath();)if(!(e.pathSize<2)&&e.nextPoint())for(f=e.x,y=e.y;e.nextPoint();f=g,y=b){if(g=e.x,b=e.y,a){if(y===b||y<k&&b<k||y>O&&b>O)continue;_=Math.min(y,b),x=Math.max(y,b)}else{if(f===g||f<k&&g<k||f>O&&g>O)continue;_=Math.min(f,g),x=Math.max(f,g)}for(;_<x;)E=Math.floor((_-D)/d),boe(E,f,y,g,b,o),_+=d;C=Math.floor((x-D)/d),C>E&&boe(C,f,y,g,b,o)}this._accelerationMap=o}_nextInside(){for(;;){if(this._currentX>this._xMax){if(this._currentY++,this._currentY>this._yMax)return null;this._currentX=this._xMin,this._shiftOddRows&&this._currentY%2&&this._currentX--}let e=this._currentX*this._stepX+this._offsetX;this._shiftOddRows&&this._currentY%2&&(e+=.5*this._stepX);const i=this._currentY*this._stepY+this._offsetY;let r,n;if(this._currentX++,this._gridType===_C.Random){const s=(this._currentX%Pd+Pd)%Pd,o=(this._currentY%Pd+Pd)%Pd;r=this._graphicOriginX+e+this._stepX*this._randomness*(.5-F0._randValues[o*Pd+s])*2/3,n=this._graphicOriginY+i+this._stepY*this._randomness*(.5-F0._randValues[o*Pd+s+1])*2/3}else r=this._graphicOriginX+this._cosAngle*e+this._sinAngle*i,n=this._graphicOriginY-this._sinAngle*e+this._cosAngle*i;if(!this._testInsidePolygon||this._isInsidePolygon(r,n,this._geometryCursor))return this._internalPlacement.setTranslate(r,n),this._internalPlacement}}_isInsidePolygon(e,i,r){if(this._accelerationMap==null)return Tot(e,i,r);e+=G3,i+=G3;const n=this._verticalSubdivision,s=n?i:e,o=Math.floor((s-this._polygonMin)/this._delta),a=this._accelerationMap.get(o);if(!a)return!1;let l,c,d,f=0;for(const y of a){if(l=y[0],c=y[1],n){if(l[1]>i==c[1]>i)continue;d=(c[0]-l[0])*(i-l[1])-(c[1]-l[1])*(e-l[0])}else{if(l[0]>e==c[0]>e)continue;d=(c[1]-l[1])*(e-l[0])-(c[0]-l[0])*(i-l[1])}d>0?f++:f--}return f!==0}};function Tot(t,e,i){let r,n,s,o,a=0;for(t+=G3,e+=G3,i.reset();i.nextPath();)if(i.nextPoint())for(r=i.x,n=i.y;i.nextPoint();r=s,n=o)s=i.x,o=i.y,n>e!=o>e&&((s-r)*(e-n)-(o-n)*(t-r)>0?a++:a--);return a!==0}function boe(t,e,i,r,n,s){let o=s.get(t);o||(o=[],s.set(t,o)),o.push([[e,i],[r,n]])}const Eot=.001;var Gh;let Iot=(Gh=class{static local(){return Gh.instance===null&&(Gh.instance=new Gh),Gh.instance}execute(e,i,r,n,s){return new Cot(e,i,r)}},Gh.instance=null,Gh),Cot=class extends z2{constructor(e,i,r){super(e),this._curveHelper=new mm,this._angleToLine=i.angleToLine===void 0||i.angleToLine,this._offset=i.offset!==void 0?i.offset*r:0,this._relativeTo=i.relativeTo,this._position=i.startPointOffset!==void 0?i.startPointOffset*r:0,this._epsilon=Eot*r}processPath(e){const i=this._position;if(this._relativeTo===Q0.SegmentMidpoint){if(this.iteratePath||(this.iteratePath=!0),e.nextPoint()){let[n,s]=[e.x,e.y],[o,a]=[0,0];const l=[0,0];for(;e.nextPoint();){o=e.x,a=e.y;const c=this._curveHelper.getLength(n,s,o,a);if(c<this._epsilon){n=o,s=a;continue}const d=.5+this._position/c,[f,y]=this._curveHelper.getAngleCS(l,n,s,o,a,d),g=this._curveHelper.getCoord2D(n,s,o,a,d);return this.internalPlacement.setTranslate(g[0]-this._offset*y,g[1]+this._offset*f),this._angleToLine&&this.internalPlacement.setRotateCS(f,y),this.internalPlacement}}return this.iteratePath=!1,null}const r=this._relativeTo===Q0.LineEnd;return this.onLine(e,i,r)}onLine(e,i,r){let n,s=!1;switch(this._relativeTo){case Q0.LineMiddle:default:e.seekPathStart(),n=e.pathLength()/2+i;break;case Q0.LineBeginning:n=i;break;case Q0.LineEnd:n=i,s=!0}r?e.seekPathEnd():e.seekPathStart();let o=0;if(r?e.prevPoint():e.nextPoint()){let[a,l]=[e.x,e.y],[c,d]=[0,0];const f=[0,0];for(;r?e.prevPoint():e.nextPoint();){c=e.x,d=e.y;const y=this._curveHelper.getLength(a,l,c,d);if(o+y>n){const g=(n-o)/y,[b,_]=this._curveHelper.getAngleCS(f,a,l,c,d,g),x=this._curveHelper.getCoord2D(a,l,c,d,g),E=s?-this._offset:this._offset;return this.internalPlacement.setTranslate(x[0]-E*_,x[1]+E*b),this._angleToLine&&(s?this.internalPlacement.setRotateCS(-b,-_):this.internalPlacement.setRotateCS(b,_)),this.internalPlacement}a=c,l=d,o+=y}}return null}};const Mot=1e-15;var qh;let kot=(qh=class{static local(){return qh.instance===null&&(qh.instance=new qh),qh.instance}execute(e,i,r,n,s){return new Pot(e,i,r)}},qh.instance=null,qh),Pot=class extends z2{constructor(e,i,r){super(e),this._curveHelper=new mm,this._angleToLine=i.angleToLine===void 0||i.angleToLine,this._offset=i.offset!==void 0?i.offset*r:0,this._endPoints=i.placeOnEndPoints===void 0||i.placeOnEndPoints,this._controlPoints=i.placeOnControlPoints===void 0||i.placeOnControlPoints,this._regularVertices=i.placeOnRegularVertices===void 0||i.placeOnRegularVertices,this._tags=[],this._tagIterator=0}processPath(e){if(this.iteratePath||(this._preparePath(e),this.iteratePath=!0),this._tagIterator>=this._tags.length)return this._tags.length=0,this._tagIterator=0,this.iteratePath=!1,null;const i=this._tags[this._tagIterator];this._angleToLine&&this.internalPlacement.setRotate(i[2]);let r=i[0],n=i[1];if(this._offset!==0){const s=Math.cos(i[2]),o=Math.sin(i[2]);r-=this._offset*o,n+=this._offset*s}return this.internalPlacement.setTranslate(r,n),this._tagIterator++,this.internalPlacement}_preparePath(e){this._tags.length=0,this._tagIterator=0,e.seekPathStart();const i=e.isClosed();let r=0,n=!1,s=0,o=0;if(e.seekPathStart(),e.nextPoint()){let a=e.x,l=e.y,c=e.getControlPoint(),d=!0,f=e.nextPoint();for(;f;){const y=e.x,g=e.y,b=e.getControlPoint();(this._angleToLine||this._offset!==0)&&(s=this._curveHelper.getAngle(a,l,y,g,0)),d?(d=!1,i?(r=s,n=c):(this._endPoints||this._controlPoints&&c)&&this._tags.push([a,l,s])):c?this._controlPoints&&this._tags.push([a,l,SA(o,s)]):this._regularVertices&&this._tags.push([a,l,SA(o,s)]),(this._angleToLine||this._offset!==0)&&(o=this._curveHelper.getAngle(a,l,y,g,1)),f=e.nextPoint(),f||(i?b||n?this._controlPoints&&this._tags.push([y,g,SA(o,r)]):this._regularVertices&&this._tags.push([y,g,SA(o,r)]):(this._endPoints||this._controlPoints&&b)&&this._tags.push([y,g,o])),a=y,l=g,c=b}}this._tagIterator=0}};function SA(t,e){const i=Math.PI;for(;Math.abs(e-t)>i+2*Mot;)e-t>i?e-=2*i:e+=2*i;return(t+e)/2}const Aot=100*222045e-21;function Lot(t){if(t.totalSize===0)return null;const e=p2(t);if(!e)return null;const i=4*(Math.abs(e[0])+Math.abs(e[2])+Math.abs(e[1])+Math.abs(e[3])+1)*Aot;let r=0,n=0;t.reset();for(let X=0;t.nextPath();X++){const ee=t.getCurrentRingArea();ee>n&&(n=ee,r=X)}if(t.seekPath(r),t.pathSize===0)return null;t.seekPathStart();const s=Due(t);if(Math.abs(n)<=2*i*i)return[(s[0]+s[2])/2,(s[1]+s[3])/2];t.seekPathStart();const o=wMe(t,_n());if(o===null)return null;if(t.totalPoints<4)return o;const a=[[NaN,NaN],[NaN,NaN],[NaN,NaN],[NaN,NaN]],l=[NaN,NaN,NaN,NaN],c=[NaN,NaN,NaN,NaN];let d=!1,f=bE(o,t,!0);f.distance===0&&(d=!0,a[0][0]=o[0],a[0][1]=o[1],f=bE(o,t,!1)),l[0]=f.distance,c[0]=0;const y=[NaN,NaN];let g=!1,b=.25,_=-1,x=NaN;do if(x=NaN,a[1]=_V(t,xV(s[0],s[2],b),i,e),isNaN(a[1][0])||isNaN(a[1][1])||(f=bE(a[1],t,!1),x=f.distance),!isNaN(x)&&x>i&&wR(a[1],t))g=!0,l[1]=x,c[1]=N0(a[1],o);else if(!isNaN(x)&&x>_&&(_=x,y[0]=a[1][0],y[1]=a[1][1]),b-=.01,b<.1){if(!(_>=0))break;g=!0,l[1]=_,a[1][0]=y[0],a[1][1]=y[1],c[1]=N0(a[1],o)}while(!g);g=!1,b=.5,_=-1;let E=.01,C=1;do if(x=NaN,a[2]=_V(t,xV(s[0],s[2],b),i,e),isNaN(a[2][0])||isNaN(a[2][1])||(f=bE(a[2],t,!1),x=f.distance),!isNaN(x)&&x>i&&wR(a[2],t))g=!0,l[2]=x,c[2]=N0(a[2],o);else if(!isNaN(x)&&x>_)_=x,y[0]=a[2][0],y[1]=a[2][1];else if(x>_&&(_=x,y[0]=a[2][0],y[1]=a[2][1]),b=.5+E*C,E+=.01,C*=-1,b<.3||b>.7){if(!(_>=0))break;g=!0,l[2]=_,a[2][0]=y[0],a[2][1]=y[1],c[2]=N0(a[2],o)}while(!g);g=!1,b=.75,_=-1;do if(x=NaN,a[3]=_V(t,xV(s[0],s[2],b),i,e),isNaN(a[3][0])||isNaN(a[3][1])||(f=bE(a[3],t,!1),x=f.distance),!isNaN(x)&&x>i&&wR(a[3],t))g=!0,l[3]=x,c[3]=N0(a[3],o);else if(x>_&&(_=x,y[0]=a[3][0],y[1]=a[3][1]),b+=.01,b>.9){if(!(_>=0))break;g=!0,l[3]=_,a[3][0]=y[0],a[3][1]=y[1],c[3]=N0(a[3],o)}while(!g);const k=[0,1,2,3],O=d?0:1;let D;for(let X=O;X<4;X++)for(let ee=O;ee<3;ee++){const pe=c[ee],he=c[ee+1];Fot(pe,he)>0&&(D=k[ee],k[ee]=k[ee+1],k[ee+1]=D,c[ee]=he,c[ee+1]=pe)}let B=O,j=0,Z=0;for(let X=O;X<4;X++){switch(X){case 0:Z=2*l[k[X]];break;case 1:Z=1.66666666*l[k[X]];break;case 2:Z=1.33333333*l[k[X]];break;case 3:Z=l[k[X]]}Z>j&&(j=Z,B=k[X])}return a[B]}function wR(t,e){let i,r,n,s,o=0;for(e.reset();e.nextPath()&&e.nextPoint();)for(i=e.x,r=e.y;e.nextPoint();i=n,r=s)n=e.x,s=e.y,r>t[1]!=s>t[1]&&((n-i)*(t[1]-r)-(s-r)*(t[0]-i)>0?o++:o--);return o!==0}function bE(t,e,i){if(i&&wR(t,e))return{coord:t,distance:0};let r=1/0,n=0,s=0,o=[0,0],a=[0,0];const l=[0,0];for(e.reset();e.nextPath()&&e.nextPoint();)if(!(e.pathSize<2))for(o[0]=e.x,o[1]=e.y;e.nextPoint();o=a){a=[e.x,e.y],$ue(l,t,o,a);const c=N0(t,l);c<r&&(r=c,n=l[0],s=l[1])}return{coord:[n,s],distance:Math.sqrt(r)}}function _V(t,e,i,r){const n=[e,0];let s=1/0,o=1/0,a=!1,l=!1;const c=[[e,r[1]-1],[e,r[3]+1]],d=[0,0],f=[0,0],y=[0,0],g=[[0,0],[0,0]],b=_n();for(t.reset();t.nextPath()&&t.nextPoint();)if(!(t.pathSize<2))for(g[0][0]=t.x,g[0][1]=t.y;t.nextPoint();g[0][0]=g[1][0],g[0][1]=g[1][1]){if(g[1][0]=t.x,g[1][1]=t.y,Rot(b,g)===null||(f[0]=c[0][0],f[1]=c[0][1],y[0]=c[1][0],y[1]=c[1][1],Oot(b,f,y)===0)||!eO(c[0],c[1],g[0],g[1],d))continue;const _=d[1];s>o?_<s&&(s=_,a=!0):_<o&&(o=_,l=!0)}return a&&l?n[1]=(s+o)/2:n[0]=n[1]=NaN,n}function Rot(t,e){if(e.length<2)return null;t||(t=_n());const[i,r]=e[0],[n,s]=e[1];return t[0]=Math.min(i,n),t[1]=Math.min(r,s),t[2]=Math.max(i,n),t[3]=Math.max(r,s),t}const $A=1,TA=4,woe=3,_oe=12;function Oot(t,e,i){let r=Ad(e,t),n=Ad(i,t);const s=t[0],o=t[1],a=t[2],l=t[3];if(r&n)return 0;if(!(r|n))return 4;const c=(r?1:0)|(n?2:0);do{const d=i[0]-e[0],f=i[1]-e[1];if(d>f)r&woe?(r&$A?(e[1]+=f*(s-e[0])/d,e[0]=s):(e[1]+=f*(a-e[0])/d,e[0]=a),r=Ad(e,t)):n&woe?(n&$A?(i[1]+=f*(s-i[0])/d,i[0]=s):(i[1]+=f*(a-i[0])/d,i[0]=a),n=Ad(i,t)):r?(r&TA?(e[0]+=d*(o-e[1])/f,e[1]=o):(e[0]+=d*(l-e[1])/f,e[1]=l),r=Ad(e,t)):(n&TA?(i[0]+=d*(o-i[1])/f,i[1]=o):(i[0]+=d*(l-i[1])/f,i[1]=l),n=Ad(i,t));else if(r&_oe?(r&TA?(e[0]+=d*(o-e[1])/f,e[1]=o):(e[0]+=d*(l-e[1])/f,e[1]=l),r=Ad(e,t)):n&_oe?(n&TA?(i[0]+=d*(o-i[1])/f,i[1]=o):(i[0]+=d*(l-i[1])/f,i[1]=l),n=Ad(i,t)):r?(r&$A?(e[1]+=f*(s-e[0])/d,e[0]=s):(e[1]+=f*(a-e[0])/d,e[0]=a),r=Ad(e,t)):(n&$A?(i[1]+=f*(s-i[0])/d,i[0]=s):(i[1]+=f*(a-i[0])/d,i[0]=a),n=Ad(i,t)),r&n)return 0}while(r|n);return c}function Ad(t,e){return(t[0]<e[0]?1:0)|(t[0]>e[2]?1:0)<<1|(t[1]<e[1]?1:0)<<2|(t[1]>e[3]?1:0)<<3}function xV(t,e,i){return t+(e-t)*i}function N0(t,e){return(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])}function Fot(t,e){if(t<e)return-1;if(t>e)return 1;if(t===e)return 0;const i=isNaN(t),r=isNaN(e);return i<r?-1:i>r?1:0}var Hh;let Not=(Hh=class{static local(){return Hh.instance===null&&(Hh.instance=new Hh),Hh.instance}execute(e,i,r,n,s){return new Dot(e,i,r)}},Hh.instance=null,Hh),Dot=class{constructor(e,i,r){this._geometryCursor=e,this._offsetX=i.offsetX!==void 0?i.offsetX*r:0,this._offsetY=i.offsetY!==void 0?i.offsetY*r:0,this._method=i.method!==void 0?i.method:ax.OnPolygon,this._placementPerPart=i.placePerPart!==void 0&&i.placePerPart,this._internalPlacement=new Q$}next(){const e=this._geometryCursor;if(!e)return null;if(!this._placementPerPart)return this._geometryCursor=null,this._polygonCenter(e);for(;e.nextPath();)if(!(e.getCurrentRingArea()<0))return this._polygonCenter(e.getCurrentPath());return this._geometryCursor=null,null}_polygonCenter(e){let i=!1;switch(this._method){case ax.CenterOfMass:{const r=$Me(e);r&&(this._internalPlacement.setTranslate(r[0]+this._offsetX,r[1]+this._offsetY),i=!0)}break;case ax.BoundingBoxCenter:{const r=p2(e);r&&(this._internalPlacement.setTranslate((r[2]+r[0])/2+this._offsetX,(r[3]+r[1])/2+this._offsetY),i=!0)}break;case ax.OnPolygon:default:{const r=Lot(e);r!==null&&(this._internalPlacement.setTranslate(r[0]+this._offsetX,r[1]+this._offsetY),i=!0)}}return i?this._internalPlacement:null}};function zot(t){if(!t)return null;switch(t.type){case"CIMGeometricEffectAddControlPoints":return xst.local();case"CIMGeometricEffectArrow":return Est.local();case"CIMGeometricEffectBuffer":return Cst.local();case"CIMGeometricEffectControlMeasureLine":return kst.local();case"CIMGeometricEffectCut":return Ast.local();case"CIMGeometricEffectDashes":return Rst.local();case"CIMGeometricEffectDonut":return Fst.local();case"CIMGeometricEffectJog":return Bst.local();case"CIMGeometricEffectMove":return qst.local();case"CIMGeometricEffectOffset":return Zst.local();case"CIMGeometricEffectRadial":return Yst.local();case"CIMGeometricEffectReverse":return Kst.local();case"CIMGeometricEffectRotate":return tot.local();case"CIMGeometricEffectScale":return rot.local();case"CIMGeometricEffectSuppress":return sot.local();case"CIMGeometricEffectTaperedPolygon":return hot.local();case"CIMGeometricEffectWave":return fot.local();case"CIMGeometricEffectEnclosingPolygon":return Dst.local()}return null}function Vot(t){if(!t)return null;switch(t.type){case"CIMMarkerPlacementAlongLineSameSize":return yot.local();case"CIMMarkerPlacementAtExtremities":return vot.local();case"CIMMarkerPlacementAtRatioPositions":return wot.local();case"CIMMarkerPlacementInsidePolygon":return Sot.local();case"CIMMarkerPlacementOnLine":return Iot.local();case"CIMMarkerPlacementOnVertices":return kot.local();case"CIMMarkerPlacementPolygonCenter":return Not.local()}return null}function SV(t){const e=t.getFrame(0);if(e instanceof HTMLImageElement||e instanceof HTMLCanvasElement)return e;const i=document.createElement("canvas");i.width=t.width,i.height=t.height;const r=i.getContext("2d");return e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0),i}function Vp(t,e=0){if(e===0)return t;const i=Math.cos(e),r=Math.sin(e),[n,s]=t;return[n*i+s*-r,n*r+s*i]}function I_e(t,e,i=0){const r=to(t,0,Got);for(let n=0;n<4;n++)e[i+n]=Math.floor(256*qot(r*Uot[n]))}function jot(t,e=0){let i=0;for(let r=0;r<4;r++)i+=t[e+r]*Bot[r];return i}const Uot=[1,256,65536,16777216],Bot=[1/256,1/65536,1/16777216,1/4294967296],Got=jot(new Uint8ClampedArray([255,255,255,255]));function qot(t){return t-Math.floor(t)}const Hot=15.5,$V=4,Wot=64,nSt=1024,sSt={outlineWidth:.75,referenceWidth:.75,cap:$n.CIMSolidStroke.capstyle,join:$n.CIMSolidStroke.joinstyle,miterLimit:$n.CIMSolidStroke.miterlimit},xoe=()=>Ie.getLogger("esri.symbols.cim.rasterizingUtils"),Zot=32,Jot=t=>t==="vertical"||t==="horizontal"||t==="cross"||t==="esriSFSCross"||t==="esriSFSVertical"||t==="esriSFSHorizontal";function oSt(t,e,i){const r=e.style,n=qEe(Math.ceil(i)),s=Jot(r)?8*n:16*n,o=2*n;t.width=s,t.height=s;const a=t.getContext("2d");a.strokeStyle="#ffffff",a.lineWidth=n,a.beginPath(),r!=="vertical"&&r!=="cross"&&r!=="esriSFSCross"&&r!=="esriSFSVertical"||(a.moveTo(s/2,-o),a.lineTo(s/2,s+o)),r!=="horizontal"&&r!=="cross"&&r!=="esriSFSCross"&&r!=="esriSFSHorizontal"||(a.moveTo(-o,s/2),a.lineTo(s+o,s/2)),r!=="backward-diagonal"&&r!=="diagonal-cross"&&r!=="esriSFSDiagonalCross"&&r!=="esriSFSBackwardDiagonal"||(a.moveTo(-o,-o),a.lineTo(s+o,s+o),a.moveTo(s-o,-o),a.lineTo(s+o,o),a.moveTo(-o,s-o),a.lineTo(o,s+o)),r!=="forward-diagonal"&&r!=="diagonal-cross"&&r!=="esriSFSForwardDiagonal"&&r!=="esriSFSDiagonalCross"||(a.moveTo(s+o,-o),a.lineTo(-o,s+o),a.moveTo(o,-o),a.lineTo(-o,o),a.moveTo(s+o,s-o),a.lineTo(s-o,s+o)),a.stroke();const l=a.getImageData(0,0,t.width,t.height),c=new Uint8Array(l.data);let d;for(let f=0;f<c.length;f+=4)d=c[f+3]/255,c[f]=c[f]*d,c[f+1]=c[f+1]*d,c[f+2]=c[f+2]*d;return[c,t.width,t.height,n]}function aSt(t){t.length%2==1&&(t=[...t,...t]);const e=t.reduce(((f,y)=>f+y),0),i=Math.round(e*$V),r=1,n=new Float32Array(i*r);let s=0,o=0,a=.5,l=!0;for(const f of t){for(s=o,o+=f*$V;a<=o;){const y=a-.5,g=Math.min(Math.abs(a-s),Math.abs(a-o));n[y]=l?-g:g,a++}l=!l}const c=n.length,d=new Uint8Array(4*c);for(let f=0;f<c;++f){const y=n[f]/$V;I_e(y/Wot*.5+.5,d,4*f)}return[d,i,r]}function lSt(t,e){t==null&&(t=[]);const i=e==="Butt",r=e==="Square",n=!i&&!r;t.length%2==1&&(t=[...t,...t]);const s=Hot,o=2*s;let a=0;for(const E of t)a+=E;const l=Math.round(a*s),c=new Float32Array(l*o),d=.5*s;let f=0,y=0,g=.5,b=!0;for(const E of t){for(f=y,y+=E*s;g<=y;){let C=.5;for(;C<o;){const k=(C-.5)*l+g-.5,O=n?(C-s)*(C-s):Math.abs(C-s);c[k]=b?i?Math.max(Math.max(f+d-g,O),Math.max(g-y+d,O)):O:n?Math.min((g-f)*(g-f)+O,(g-y)*(g-y)+O):r?Math.min(Math.max(g-f,O),Math.max(y-g,O)):Math.min(Math.max(g-f+d,O),Math.max(y+d-g,O)),C++}g++}b=!b}const _=c.length,x=new Uint8Array(4*_);for(let E=0;E<_;++E){const C=(n?Math.sqrt(c[E]):c[E])/s;I_e(C,x,4*E)}return[x,l,o]}function cSt(t,e){const{colorRamp:i,gradientType:r}=e,n=i.type==="CIMFixedColorRamp",s=e.interval||$n.CIMGradientFill.interval;let o=wW(i);return n&&(o=C_e(o,s)),r==="Discrete"||n?Xot(t,o,s):Yot(t,o)}let TV;function EA(t,e){const{colorRamp:i,gradientType:r}=e,n=wW(i),s=i.type==="CIMFixedColorRamp";if(r==="Continuous"&&!s)return _R(t,n);const o=e.interval??$n.CIMGradientFill.interval;if(s)return _R(t,C_e(n,o));const a=[];TV??(TV=document.createElement("canvas")),_W(TV,n,o,1,0);const l=TV.getContext("2d").getImageData(0,0,o,1).data;for(let c=0,d=0;c<o;c++,d=4*c){const f=[l[d+0],l[d+1],l[d+2],l[d+3]];a.push({offset:c/o,color:f}),a.push({offset:(c+1)/o,color:f})}return _R(t,a)}function wW(t){const e=[];switch(t.type){case"CIMPolarContinuousColorRamp":case"CIMLinearContinuousColorRamp":{t.type==="CIMPolarContinuousColorRamp"&&xoe().warnOnce("CIMPolarContinuousColorRamp is currently unsupported. Falling back to CIMLinearContinuousColorRamp.");const i=t;e.push({offset:0,color:[i.fromColor[0],i.fromColor[1],i.fromColor[2],i.fromColor[3]/255]}),e.push({offset:1,color:[i.toColor[0],i.toColor[1],i.toColor[2],i.toColor[3]/255]});break}case"CIMFixedColorRamp":{const i=t,r=1/(i.colors.length-1);let n=0;for(const s of i.colors)e.push({offset:n,color:[s[0],s[1],s[2],s[3]/255]}),n+=r;break}case"CIMMultipartColorRamp":{const i=t,r=i.weights.reduce(((s,o)=>s+o),0);let n=0;for(let s=0;s<i.colorRamps.length;s++){const o=i.colorRamps[s],a=i.weights[s],l=wW(o);for(const c of l)e.push({offset:(n+c.offset*a)/r,color:c.color});n+=a}break}default:xoe().error(`Color ramp "${t.type}" currently unsupported.`)}return e}function C_e(t,e){const i=[],r=(t.length-1)/(e-1);for(let n=0;n<e;n++){const s=t[Math.round(n*r)].color;i.push({offset:n/e,color:s}),i.push({offset:(n+1)/e,color:s})}return i}function Yot(t,e){return _W(t,e,Zot,1,gye),M_e(t)}function Xot(t,e,i){return _W(t,e,i,1,gye),M_e(t)}function _R(t,e,i=0){for(const{offset:r,color:n}of e)t.addColorStop(Math.min(Math.max(r,i),1-i),`rgba(${n[0]}, ${n[1]}, ${n[2]}, ${n[3]})`)}function _W(t,e,i,r,n){const s=i+2*n;t.width=s,t.height=r;const o=(n+1)/s,a=t.getContext("2d",{willReadFrequently:!0});if(e.length>0){const l=a.createLinearGradient(0,0,s,r);_R(l,e,o),a.fillStyle=l}else a.fillStyle="rgba(128, 128, 128, 1)";a.fillRect(0,0,s,r)}function M_e(t){const{width:e,height:i}=t,r=t.getContext("2d").getImageData(0,0,e,i),n=new Uint8Array(r.data);for(let s=0;s<n.length;s+=4){const o=n[s+3]/255;n[s]*=o,n[s+1]*=o,n[s+2]*=o}return[n,e,i]}function Kot(t){var n,s,o,a;const e=((s=(n=t[0])==null?void 0:n[0])==null?void 0:s[0])??0,i=((a=(o=t[0])==null?void 0:o[0])==null?void 0:a[1])??0,r={ymin:i,xmin:e,ymax:i,xmax:e,width:0,height:0};for(let l=0;l<t.length;l++){const c=t[l];for(let d=0;d<c.length;d++){const f=c[d][0],y=c[d][1];f<r.xmin&&(r.xmin=f),f>r.xmax&&(r.xmax=f),y<r.ymin&&(r.ymin=y),y>r.ymax&&(r.ymax=y)}}return r.width=Math.abs(r.xmax-r.xmin),r.height=Math.abs(r.ymax-r.ymin),r}function q3(t,e){const i=Kot(t),r=i.width===0?1:i.width,n=i.height===0?1:i.height,s=[];for(let o=0;o<t.length;o++){const a=t[o],l=[];for(let c=0;c<a.length;c++){let d=Math.round(a[c][0]-i.xmin),f=Math.round(a[c][1]-i.ymin);if(d=e.xmin+d*e.width/r,f=e.ymin+f*e.height/n,isNaN(d)||isNaN(f))throw new Error("Scaled shape has NaN values");l.push([d,f])}s.push(l)}return s}function Soe(t,e,i){const r=[];for(let n=0;n<t.length;n++){const s=t[n],o=[];for(let a=0;a<s.length;a++){const l=s[a][0]+e,c=s[a][1]+i;if(isNaN(l)||isNaN(c))throw new Error("Scaled shape has NaN values");o.push([l,c])}r.push(o)}return r}let Qot=class k_e{constructor(e=0,i=0,r=0,n=0){this.x=e,this.y=i,this.width=r,this.height=n}static fromExtent(e){return new k_e(e.xmin,-e.ymax,e.xmax-e.xmin,e.ymax-e.ymin)}get isEmpty(){return this.width<=0||this.height<=0}union(e){this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.width=Math.max(this.width,e.width),this.height=Math.max(this.height,e.height)}};function eat(t){return`rgb(${t.slice(0,3).toString()})`}function IA(t){return`rgba(${t.slice(0,3).toString()},${t[3]})`}let P_e=class{constructor(e){e&&(this._textRasterizationCanvas=e)}rasterizeText(e,i){var ne,re;this._textRasterizationCanvas||(this._textRasterizationCanvas=document.createElement("canvas"));const r=this._textRasterizationCanvas,n=r.getContext("2d",{willReadFrequently:!0});wE(n,i),this._parameters=i,this._textLines=e.split(/\r?\n/),this._lineHeight=this._computeLineHeight();const{decoration:s,weight:o}=i.font;this._lineThroughWidthOffset=s&&s==="line-through"?.1*this._lineHeight:0;const a=i.backgroundColor!=null||i.borderLine!=null,l=a?xNe:0,c=this._computeTextWidth(n,i)+2*l,d=this._lineHeight*this._textLines.length+2*l;if(r.width=c+2*this._lineThroughWidthOffset,r.height=d,r.width===0||r.height===0)return r.width=r.height=1,{size:[0,0],image:new Uint32Array(0),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0,canvas:r};this._renderedLineHeight=Math.round(this._lineHeight),this._renderedOutlineSize=(i.outline.size||0)*i.pixelRatio,this._renderedHaloSize=(i.halo.size||0)*i.pixelRatio,this._renderedWidth=c,this._renderedHeight=d,this._lineThroughWidthOffset*=i.pixelRatio;const f=(i.outline&&i.outline.color)??[0,0,0,0],y=i.color??[0,0,0,0],g=i.halo&&i.halo.color?i.halo.color:[0,0,0,0];this._fillStyle=IA(y),this._outlineStyle=IA(f),this._haloStyle=eat(g);const b=this._renderedLineHeight,_=this._renderedOutlineSize,x=this._renderedHaloSize;n.save(),n.clearRect(0,0,r.width,r.height),wE(n,i);const E=l*i.pixelRatio,C=tat(n.textAlign,this._renderedWidth-2*E,this._renderedHaloSize+this._renderedOutlineSize)+E,k=x+_+E,O=x>0;let D=this._lineThroughWidthOffset,B=0;if(a){n.save();const ke=i.backgroundColor??[0,0,0,0],Fe=((ne=i.borderLine)==null?void 0:ne.color)??[0,0,0,0],Ae=2*(((re=i.borderLine)==null?void 0:re.size)??0);n.fillStyle=IA(ke),n.strokeStyle=IA(Fe),n.lineWidth=Ae,n.fillRect(0,0,r.width,r.height),n.strokeRect(0,0,r.width,r.height),n.restore()}O&&this._renderHalo(n,C,k,D,B,i),_>0&&this._renderOutline(n,C,k,D,B,i),B+=k,D+=C;for(const ke of this._textLines)O?(n.globalCompositeOperation="destination-out",n.fillStyle="rgb(0, 0, 0)",n.fillText(ke,D,B),n.globalCompositeOperation="source-over",n.fillStyle=this._fillStyle,n.fillText(ke,D,B)):(n.fillStyle=this._fillStyle,n.fillText(ke,D,B)),s&&s!=="none"&&this._renderDecoration(n,D,B,s,o),B+=b;n.restore();const j=this._renderedWidth+2*this._lineThroughWidthOffset,Z=this._renderedHeight,X=n.getImageData(0,0,j,Z),ee=new Uint8Array(X.data);if(i.premultiplyColors){let ke;for(let Fe=0;Fe<ee.length;Fe+=4)ke=ee[Fe+3]/255,ee[Fe]=ee[Fe]*ke,ee[Fe+1]=ee[Fe+1]*ke,ee[Fe+2]=ee[Fe+2]*ke}let pe,he;switch(i.horizontalAlignment){case"left":pe=-.5;break;case"right":pe=.5;break;default:pe=0}switch(i.verticalAlignment){case"bottom":he=-.5;break;case"top":he=.5;break;case"baseline":he=-1/6;break;default:he=0}return{size:[j,Z],image:new Uint32Array(ee.buffer),sdf:!1,simplePattern:!1,anchorX:pe,anchorY:he,canvas:r}}_renderHalo(e,i,r,n,s,o){const a=this._renderedWidth,l=this._renderedHeight;this._outlineRasterizationCanvas||(this._outlineRasterizationCanvas=document.createElement("canvas")),this._outlineRasterizationCanvas.width=a,this._outlineRasterizationCanvas.height=l;const c=this._outlineRasterizationCanvas,d=c.getContext("2d");d.clearRect(0,0,a,l),wE(d,o);const{decoration:f,weight:y}=o.font;d.fillStyle=this._haloStyle,d.strokeStyle=this._haloStyle,d.lineJoin="round",this._renderOutlineNative(d,i,r,f,y,this._renderedHaloSize+this._renderedOutlineSize),e.globalAlpha=this._parameters.halo.color[3],e.drawImage(c,0,0,a,l,n,s,a,l),e.globalAlpha=1}_renderOutline(e,i,r,n,s,o){const a=this._renderedWidth,l=this._renderedHeight;this._outlineRasterizationCanvas||(this._outlineRasterizationCanvas=document.createElement("canvas")),this._outlineRasterizationCanvas.width=a,this._outlineRasterizationCanvas.height=l;const c=this._outlineRasterizationCanvas,d=c.getContext("2d");d.clearRect(0,0,a,l),wE(d,o);const{decoration:f,weight:y}=o.font;d.fillStyle=this._outlineStyle,d.strokeStyle=this._outlineStyle,d.lineJoin="round",this._renderOutlineNative(d,i,r,f,y,this._renderedOutlineSize),e.globalAlpha=this._parameters.outline.color[3],e.drawImage(c,0,0,a,l,n,s,a,l),e.globalAlpha=1}_renderOutlineNative(e,i,r,n,s,o){const a=this._renderedLineHeight;for(const l of this._textLines){const c=2*o,d=5,f=.1;for(let y=0;y<d;y++){const g=(1-(d-1)*f+y*f)*c;e.lineWidth=g,e.strokeText(l,i,r),n&&n!=="none"&&this._renderDecoration(e,i,r,n,s,g)}r+=a}}computeTextSize(e,i){this._textRasterizationCanvas||(this._textRasterizationCanvas=document.createElement("canvas"));const r=this._textRasterizationCanvas,n=r.getContext("2d");wE(n,i),this._parameters=i,this._textLines=e.split(/\r?\n/),this._lineHeight=this._computeLineHeight();const s=this._computeTextWidth(n,i),o=this._lineHeight*this._textLines.length;return r.width=s,r.height=o,[s*i.pixelRatio,o*i.pixelRatio]}_computeTextWidth(e,i){let r=0;for(const s of this._textLines)r=Math.max(r,e.measureText(s).width);const n=i.font;return(n.style==="italic"||n.style==="oblique"||typeof n.weight=="string"&&(n.weight==="bold"||n.weight==="bolder")||typeof n.weight=="number"&&n.weight>600)&&(r+=.3*e.measureText("w").width),r+=2*pi(this._parameters.halo.size),Math.round(r)}_computeLineHeightBase(){return 1.275*this._parameters.size}_computeLineHeight(){let e=this._computeLineHeightBase();const i=this._parameters.font.decoration;return i&&i==="underline"&&(e*=1.3),Math.round(e+2*pi(this._parameters.halo.size))}_renderDecoration(e,i,r,n,s,o){let a=.9*this._lineHeight;const l=s==="bold"?.06:s==="bolder"?.09:.04;switch(e.textAlign){case"center":i-=this._renderedWidth/2;break;case"right":i-=this._renderedWidth}const c=e.textBaseline;if(n==="underline")switch(a=.9*this._computeLineHeightBase(),c){case"top":r+=a;break;case"middle":r+=a/2}else if(n==="line-through")switch(c){case"top":r+=a/1.5;break;case"middle":r+=a/3}const d=o?1.5*o:Math.ceil(a*l);e.save(),e.beginPath(),e.strokeStyle=e.fillStyle,e.lineWidth=d,e.moveTo(i-this._lineThroughWidthOffset,r),e.lineTo(i+this._renderedWidth+2*this._lineThroughWidthOffset,r),e.stroke(),e.restore()}};function wE(t,e){const i=Math.max(e.size,.5),r=e.font,n=`${r.style} ${r.weight} ${pi(i).toFixed(1)}px ${r.family}, sans-serif`;let s;switch(t.font=n,t.textBaseline="top",e.horizontalAlignment){case"left":default:s="left";break;case"right":s="right";break;case"center":s="center"}t.textAlign=s}function tat(t,e,i){return t==="center"?.5*e:t==="right"?e-i:i}function A_e(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function iat(){const t=A_e("svg");return t.setAttribute("style","position: absolute;"),t.setAttribute("width","0"),t.setAttribute("height","0"),t.setAttribute("aria-hidden","true"),t.setAttribute("role","presentation"),document.body.appendChild(t),t}function rat(t){return t!=null&&document.body.removeChild(t),null}const nat=()=>Ie.getLogger("esri.views.2d.engine.webgl.alignmentUtils");var vh,Cc;function sat(t){if(!t)return vh.Center;switch(t){case"Left":case"left":return vh.Left;case"Right":case"right":return vh.Right;case"Justify":return nat().warnOnce("Horizontal alignment 'justify' is not implemented. Falling back to 'center'."),vh.Center;case"Center":case"center":return vh.Center}}function oat(t){if(!t)return Cc.Center;switch(t){case"Top":case"top":return Cc.Top;case"Center":case"middle":return Cc.Center;case"Baseline":case"baseline":return Cc.Baseline;case"Bottom":case"bottom":return Cc.Bottom}}function dSt(t){switch(t){case"above-left":case"esriServerPointLabelPlacementAboveLeft":return["right","bottom"];case"above-center":case"above-along":case"esriServerPointLabelPlacementAboveCenter":case"esriServerLinePlacementAboveAlong":return["center","bottom"];case"above-right":case"esriServerPointLabelPlacementAboveRight":return["left","bottom"];case"center-left":case"esriServerPointLabelPlacementCenterLeft":return["right","middle"];case"center-center":case"center-along":case"esriServerPointLabelPlacementCenterCenter":case"esriServerLinePlacementCenterAlong":case"always-horizontal":case"esriServerPolygonPlacementAlwaysHorizontal":return["center","middle"];case"center-right":case"esriServerPointLabelPlacementCenterRight":return["left","middle"];case"below-left":case"esriServerPointLabelPlacementBelowLeft":return["right","top"];case"below-center":case"below-along":case"esriServerPointLabelPlacementBelowCenter":case"esriServerLinePlacementBelowAlong":return["center","top"];case"below-right":case"esriServerPointLabelPlacementBelowRight":return["left","top"];default:return console.debug(`Found invalid placement type ${t}`),["center","middle"]}}function hSt(t){switch(t){case vh.Right:case"right":return-1;case vh.Center:case"center":return 0;case vh.Left:case"left":return 1;default:return console.debug(`Found invalid horizontal alignment ${t}`),0}}function pSt(t){switch(t){case Cc.Top:case"top":return 1;case Cc.Center:case"middle":return 0;case Cc.Bottom:case Cc.Baseline:case"baseline":case"bottom":return-1;default:return console.debug(`Found invalid vertical alignment ${t}`),0}}(function(t){t[t.Left=-1]="Left",t[t.Center=0]="Center",t[t.Right=1]="Right"})(vh||(vh={})),(function(t){t[t.Top=1]="Top",t[t.Center=0]="Center",t[t.Bottom=-1]="Bottom",t[t.Baseline=2]="Baseline"})(Cc||(Cc={}));let aat=class{constructor(e=0,i=0,r=0,n=0){this.x=e,this.y=i,this.width=r,this.height=n}get isEmpty(){return this.width<=0||this.height<=0}union(e){this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.width=Math.max(this.width,e.width),this.height=Math.max(this.height,e.height)}},DI=class i7{constructor(e,i,r,n){this.transformedX=0,this.transformedY=0,this.center=hw(e,i),this.centerT=oM(),this.halfWidth=r/2,this.halfHeight=n/2,this.width=r,this.height=n}get x(){return this.center[0]}get y(){return this.center[1]}get blX(){return this.center[0]+this.halfWidth}get blY(){return this.center[1]+this.halfHeight}get trX(){return this.center[0]-this.halfWidth}get trY(){return this.center[1]-this.halfHeight}get xmin(){return this.x-this.halfWidth}get xmax(){return this.x+this.halfWidth}get ymin(){return this.y-this.halfHeight}get ymax(){return this.y+this.halfHeight}set x(e){this.center[0]=e}set y(e){this.center[1]=e}clone(){return new i7(this.x,this.y,this.width,this.height)}serialize(e){return e.writeF32(this.center[0]),e.writeF32(this.center[1]),e.push(this.width),e.push(this.height),e}findCollisionDelta(e,i=4){const r=Math.abs(e.centerT[0]-this.centerT[0]),n=Math.abs(e.centerT[1]-this.centerT[1]),s=(e.halfWidth+this.halfWidth+i)/r,o=(e.halfHeight+this.halfHeight+i)/n,a=Math.min(s,o);return Math.log2(a)}extend(e){const i=Math.min(this.xmin,e.xmin),r=Math.min(this.ymin,e.ymin),n=Math.max(this.xmax,e.xmax)-i,s=Math.max(this.ymax,e.ymax)-r,o=i+n/2,a=r+s/2;this.width=n,this.height=s,this.halfWidth=n/2,this.halfHeight=s/2,this.x=o,this.y=a}static deserialize(e){const i=e.readF32(),r=e.readF32(),n=e.readInt32(),s=e.readInt32();return new i7(i,r,n,s)}};const L_e=22,R_e=4,lat=L_e+R_e,cat=L_e-6,$oe=3,uat=Math.PI/180,sy=8,dat=1.5;let O_e=class{constructor(e,i,r,n){this._rotationT=Qf(),this._xBounds=0,this._yBounds=0,this.minZoom=0,this.maxZoom=255,this._bounds=null;const s=r.rect,o=new Float32Array(8);e*=n,i*=n;const a=r.code?s.width*n:r.metrics.width,l=r.code?s.height*n:r.metrics.height;this.width=a,this.height=l,o[0]=e,o[1]=i,o[2]=e+a,o[3]=i,o[4]=e,o[5]=i+l,o[6]=e+a,o[7]=i+l,this._data=o,this._setTextureCoords(s),this._scale=n,this._mosaic=r,this.x=e,this.y=i,this.maxOffset=Math.max(e+a,i+l)}get mosaic(){return this._mosaic}set angle(e){this._angle=e,$N(this._rotationT,-e),this._setOffsets()}get angle(){return this._angle}get xTopLeft(){return this._data[0]}get yTopLeft(){return this._data[1]}get xBottomRight(){return this._data[6]}get yBottomRight(){return this._data[7]}get texcoords(){return this._texcoords}get textureBinding(){return this._mosaic.textureBinding}get offsets(){return this._offsets||this._setOffsets(),this._offsets}get char(){return String.fromCharCode(this._mosaic.code)}get code(){return this._mosaic.code}get bounds(){if(!this._bounds){const{height:e,width:i}=this._mosaic.metrics,r=i*this._scale,n=Math.abs(e)*this._scale,s=new Float32Array(8);s[0]=this.x,s[1]=this.y,s[2]=this.x+r,s[3]=this.y,s[4]=this.x,s[5]=this.y+n,s[6]=this.x+r,s[7]=this.y+n;const o=mh(Qf(),this._rotationT,this._transform);Fme(s,s,o);let a=1/0,l=1/0,c=-1/0,d=-1/0;for(let _=0;_<4;_++){const x=s[2*_],E=s[2*_+1];a=Math.min(a,x),l=Math.min(l,E),c=Math.max(c,x),d=Math.max(d,E)}const f=c-a,y=d-l,g=a+f/2,b=l+y/2;this._bounds=new DI(g,b,f,y)}return this._bounds}setTransform(e){this._transform=e,this._offsets=null}_setOffsets(){this._offsets||(this._offsets={topLeft:[0,0],topRight:[0,0],bottomLeft:[0,0],bottomRight:[0,0]});const e=mh(Qf(),this._rotationT,this._transform);this._offsets.topLeft[0]=this._data[0],this._offsets.topLeft[1]=this._data[1],this._offsets.topRight[0]=this._data[2],this._offsets.topRight[1]=this._data[3],this._offsets.bottomLeft[0]=this._data[4],this._offsets.bottomLeft[1]=this._data[5],this._offsets.bottomRight[0]=this._data[6],this._offsets.bottomRight[1]=this._data[7],$o(this._offsets.topLeft,this._offsets.topLeft,e),$o(this._offsets.topRight,this._offsets.topRight,e),$o(this._offsets.bottomLeft,this._offsets.bottomLeft,e),$o(this._offsets.bottomRight,this._offsets.bottomRight,e)}_setTextureCoords({x:e,y:i,width:r,height:n}){this._texcoords={topLeft:[e,i],topRight:[e+r,i],bottomLeft:[e,i+n],bottomRight:[e+r,i+n]}}};const hat=(t,e)=>({code:0,page:0,sdf:!0,rect:new aat(0,0,11,8),textureBinding:e,metrics:{advance:0,height:4,width:t,left:0,top:0}});function _E(t,e){return t.forEach((i=>$o(i,i,e))),{topLeft:t[0],topRight:t[1],bottomLeft:t[2],bottomRight:t[3]}}let pat=class{constructor(e,i,r){this._rotation=0,this._decorate(e,i,r),this.glyphs=e,this.bounds=this._createBounds(e),this.isMultiline=i.length>1,this._hasRotation=r.angle!==0,this._transform=this._createGlyphTransform(this.bounds,r),this._borderLineSizePx=r.borderLineSizePx,(r.borderLineSizePx||r.hasBackground)&&([this.bounds,this.textBox]=this.shapeBackground(this._transform));for(const n of e)n.setTransform(this._transform)}setRotation(e){if(e===0&&this._rotation===0)return;this._rotation=e;const i=this._transform,r=$N(Qf(),e);mh(i,r,i);for(const n of this.glyphs)n.setTransform(this._transform)}_decorate(e,i,r){if(!r.decoration||r.decoration==="none"||!e.length)return;const n=r.scale,s=r.decoration==="underline"?lat:cat,o=e[0].textureBinding;for(const a of i){const l=a.startX*n,c=a.startY*n,d=(a.width+a.glyphWidthEnd)*n;e.push(new O_e(l,c+s*n,hat(d,o),1))}}shapeBackground(e){const i=this._borderLineSizePx||0,r=(dat+i)/2,n=this._borderLineSizePx?r:0,{xmin:s,ymin:o,xmax:a,ymax:l,x:c,y:d,width:f,height:y}=this.bounds,g=[s-sy,o-sy],b=[a+sy,o-sy],_=[s-sy,l+sy],x=[a+sy,l+sy],E=_E([[g[0]-r,g[1]-r],[b[0]+r,b[1]-r],[g[0]+n,g[1]+n],[b[0]-n,b[1]+n]],e),C=_E([[_[0]+n,_[1]-n],[x[0]-n,x[1]-n],[_[0]-r,_[1]+r],[x[0]+r,x[1]+r]],e),k=_E([[g[0]-r,g[1]-r],[g[0]+n,g[1]+n],[_[0]-r,_[1]+r],[_[0]+n,_[1]-n]],e),O=_E([[b[0]-n,b[1]+n],[b[0]+r,b[1]-r],[x[0]-n,x[1]-n],[x[0]+r,x[1]+r]],e),D={main:_E([g,b,_,x],e),top:E,bot:C,left:k,right:O};return[new DI(c,d,f+2*r,y+2*r),D]}get boundsT(){const e=this.bounds,i=gn(oM(),e.x,e.y);if($o(i,i,this._transform),this._hasRotation){const r=Math.max(e.width,e.height);return new DI(i[0],i[1],r,r)}return new DI(i[0],i[1],e.width,e.height)}_createBounds(e){let i=1/0,r=1/0,n=0,s=0;for(const l of e)i=Math.min(i,l.xTopLeft),r=Math.min(r,l.yTopLeft),n=Math.max(n,l.xBottomRight),s=Math.max(s,l.yBottomRight);const o=n-i,a=s-r;return new DI(i+o/2,r+a/2,o,a)}_createGlyphTransform(e,i){const r=uat*i.angle,n=Qf(),s=oM();return tp(n,n,gn(s,i.xOffset,-i.yOffset)),i.useCIMAngleBehavior?Dg(n,n,r):(tp(n,n,gn(s,e.x,e.y)),Dg(n,n,r),tp(n,n,gn(s,-e.x,-e.y))),n}},CA=class{constructor(e,i,r,n,s,o){this.glyphWidthEnd=0,this.startX=0,this.startY=0,this.start=Math.max(0,Math.min(i,r)),this.end=Math.max(0,Math.max(i,r)),this.end<e.length&&(this.glyphWidthEnd=e[this.end].metrics.width),this.width=n,this.yMin=s,this.yMax=o}};const r7=t=>t===10,Toe=t=>t===32;function fat(t,e,i){const r=new Array,n=1/i.scale,s=i.maxLineWidth*n,o=e?t.length-1:0,a=e?-1:t.length,l=e?-1:1;let c=o,d=0,f=0,y=c,g=y,b=0,_=1/0,x=0;for(;c!==a;){const{code:C,metrics:k}=t[c],O=Math.abs(k.top);if(r7(C)||Toe(C)||(_=Math.min(_,O),x=Math.max(x,O+k.height)),r7(C))c!==o&&(r.push(new CA(t,y,c-l,d,_===1/0?0:_,x)),_=1/0,x=0),d=0,y=c+l,g=c+l,f=0;else if(Toe(C))g=c+l,f=0,b=k.advance,d+=k.advance;else if(d>s){if(g!==y){const D=g-2*l;d-=b,r.push(new CA(t,y,D,d-f,_,x)),_=1/0,x=0,y=g,d=f}else r.push(new CA(t,y,c-l,d,_,x)),_=1/0,x=0,y=c,g=c,d=0;d+=k.advance,f+=k.advance}else d+=k.advance,f+=k.advance;c+=l}const E=new CA(t,y,c-l,d,_,x);return E.start>=0&&E.end<t.length&&r.push(E),r}function mat(t,e){let i=0;for(let s=0;s<t.length;s++){const{width:o}=t[s];i=Math.max(o,i)}const r=e.decoration==="underline"?R_e:0,n=t[0].yMin;return{x:0,y:n,height:t[t.length-1].yMax+e.lineHeight*(t.length-1)+r-n,width:i}}function F_e(t,e){const i=e.scale,r=new Array,{glyphs:n,isRightToLeft:s}=t,o=fat(n,s,e),a=o.length?mat(o,e):{y:0,height:0},l=sat(e.horizontalAlignment),c=oat(e.verticalAlignment),d=c===Cc.Baseline?1:0,f=d?0:c-1,y=(1-d)*-a.y+f*(a.height/2)+-22*(d?1:0);for(let g=0;g<o.length;g++){const{start:b,end:_,width:x}=o[g];let E=-1*(l+1)*(x/2)-$oe;const C=(t.isRightToLeft?o.length-1-g:g)*e.lineHeight+y-$oe;o[g].startX=E,o[g].startY=C;for(let k=b;k<=_;k++){const O=n[k];if(r7(O.code))continue;const D=new O_e(E+O.metrics.left,C-O.metrics.top,O,i);E+=O.metrics.advance,r.push(D)}}return new pat(r,o,e)}const vSt=50;function bSt(t){if(!t)return null;const{xmin:e,ymin:i,xmax:r,ymax:n,spatialReference:s}=t;return new br({rings:[[[e,i],[e,n],[r,n],[r,i],[e,i]]],spatialReference:s})}function N_e(t){return ji(Math.round(pi(t)))}function D_e(t){const e=ji(Rje),i=ji(Oje);return Math.max(e,Math.min(t||i,i))}const sb=Math.PI/180,z_e=.5,zI=()=>Ie.getLogger("esri.symbols.cim.CIMSymbolDrawHelper");class Ms{constructor(e){this._t=e}static createIdentity(){return new Ms([1,0,0,0,1,0])}clone(){const e=this._t;return new Ms(e.slice())}transform(e){const i=this._t;return[i[0]*e[0]+i[1]*e[1]+i[2],i[3]*e[0]+i[4]*e[1]+i[5]]}static createScale(e,i){return new Ms([e,0,0,0,i,0])}scale(e,i){const r=this._t;return r[0]*=e,r[1]*=e,r[2]*=e,r[3]*=i,r[4]*=i,r[5]*=i,this}scaleRatio(){return Math.sqrt(this._t[0]*this._t[0]+this._t[1]*this._t[1])}static createTranslate(e,i){return new Ms([0,0,e,0,0,i])}translate(e,i){const r=this._t;return r[2]+=e,r[5]+=i,this}static createRotate(e){const i=Math.cos(e),r=Math.sin(e);return new Ms([i,-r,0,r,i,0])}rotate(e){return Ms.multiply(this,Ms.createRotate(e),this)}angle(){const e=this._t[0],i=this._t[3],r=Math.sqrt(e*e+i*i);return[e/r,i/r]}static multiply(e,i,r){const n=e._t,s=i._t,o=n[0]*s[0]+n[3]*s[1],a=n[1]*s[0]+n[4]*s[1],l=n[2]*s[0]+n[5]*s[1]+s[2],c=n[0]*s[3]+n[3]*s[4],d=n[1]*s[3]+n[4]*s[4],f=n[2]*s[3]+n[5]*s[4]+s[5],y=r._t;return y[0]=o,y[1]=a,y[2]=l,y[3]=c,y[4]=d,y[5]=f,r}invert(){const e=this._t;let i=e[0]*e[4]-e[1]*e[3];if(i===0)return new Ms([0,0,0,0,0,0]);i=1/i;const r=(e[1]*e[5]-e[2]*e[4])*i,n=(e[2]*e[3]-e[0]*e[5])*i,s=e[4]*i,o=-e[1]*i,a=-e[3]*i,l=e[0]*i;return new Ms([s,o,r,a,l,n])}}class xW{constructor(e,i){this._resourceManager=e,this._transfos=[],this._sizeTransfos=[],this._geomUnitsPerPoint=1,this._placementPool=new Bg(Q$,void 0,void 0,100),this._earlyReturn=!1,this._mapRotation=0,this._transfos.push(i||Ms.createIdentity()),this._sizeTransfos.push(i?i.scaleRatio():1)}setTransform(e,i){this._transfos=[e||Ms.createIdentity()],this._sizeTransfos=[i||(e?e.scaleRatio():1)]}setGeomUnitsPerPoint(e){this._geomUnitsPerPoint=e}transformPt(e){return this._transfos[this._transfos.length-1].transform(e)}transformSize(e){return e*this._sizeTransfos[this._sizeTransfos.length-1]}reverseTransformPt(e){return this._transfos[this._transfos.length-1].invert().transform(e)}reverseTransformSize(e){return e/this._sizeTransfos[this._sizeTransfos.length-1]}reverseTransformScalar(e){return e/this._transfos[this._transfos.length-1].scaleRatio()}getTransformAngle(){return this._transfos[this._transfos.length-1].angle()}geomUnitsPerPoint(){return this.isEmbedded()?1:this._geomUnitsPerPoint}prevGeomUnitsPerPoint(){return this._transfos.length>2?1:this._geomUnitsPerPoint}isEmbedded(){return this._transfos.length>1}back(){return this._transfos[this._transfos.length-1]}push(e,i){const r=i?e.scaleRatio():1;Ms.multiply(e,this.back(),e),this._transfos.push(e),this._sizeTransfos.push(this._sizeTransfos[this._sizeTransfos.length-1]*r)}pop(){this._transfos.splice(-1,1),this._sizeTransfos.splice(-1,1)}drawSymbol(e,i,r){if(e)switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":this.drawMultiLayerSymbol(e,i);break;case"CIMTextSymbol":this.drawTextSymbol(e,i,r)}}drawMultiLayerSymbol(e,i){if(!e||!i)return;const r=e.symbolLayers;if(!r)return;const n=e.effects;if(n&&n.length>0){const s=this.executeEffects(n,i);if(s){let o=s.next();for(;o;)this.drawSymbolLayers(r,o.asJSON()),o=s.next()}}else this.drawSymbolLayers(r,i)}executeEffects(e,i){const r=this._resourceManager.geometryEngine;let n=new wst(Ui.fromJSONCIM(i));for(const s of e){const o=zot(s);o&&(n=o.execute(n,s,this.geomUnitsPerPoint(),null,r))}return n}drawSymbolLayers(e,i){let r=e.length;for(;r--;){const n=e[r];if(!n||n.enable===!1)continue;const s=n.effects;if(s&&s.length>0){const o=this.executeEffects(s,i);if(o){let a=null;for(;(a=o.next())&&(this.drawSymbolLayer(n,a.asJSON()),!this._earlyReturn););}}else this.drawSymbolLayer(n,i);if(this._earlyReturn)return}}drawSymbolLayer(e,i){switch(e.type){case"CIMSolidFill":this.drawSolidFill(i,e.color,e.path);break;case"CIMHatchFill":this.drawHatchFill(i,e);break;case"CIMPictureFill":this.drawPictureFill(i,e);break;case"CIMGradientFill":this.drawGradientFill(i,e);break;case"CIMSolidStroke":this.drawSolidStroke(i,e.color,e.width,e.capStyle,e.joinStyle,e.miterLimit,e.path);break;case"CIMPictureStroke":this.drawPictureStroke(i,e);break;case"CIMGradientStroke":this.drawGradientStroke(i,e);break;case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":this.drawMarkerLayer(e,i)}}drawHatchFill(e,i){const r=gat(i,e,this.geomUnitsPerPoint());r&&(this.pushClipPath(e),this.drawMultiLayerSymbol(i.lineSymbol,r),this.popClipPath())}drawPictureFill(e,i){}drawGradientFill(e,i){}drawPictureStroke(e,i){}drawGradientStroke(e,i){}drawMarkerLayer(e,i){const r=e.markerPlacement;if(r){const n=Vot(r);if(n){const s=r.type==="CIMMarkerPlacementInsidePolygon"||r.type==="CIMMarkerPlacementPolygonCenter"&&r.clipAtBoundary;s&&this.pushClipPath(i);const o=n.execute(Ui.fromJSONCIM(i),r,this.geomUnitsPerPoint(),null,this._resourceManager.geometryEngine);if(o){let a=null;for(;(a=o.next())&&(this.drawMarker(e,a),!this._earlyReturn););}s&&this.popClipPath()}}else{const n=this._placementPool.acquire();if(JC(i))n.tx=i.x,n.ty=i.y,this.drawMarker(e,n);else if(bn(i)){const s=Cue(i);s&&([n.tx,n.ty]=s,this.drawMarker(e,n))}else if(Xs(i)){for(const s of i.paths)for(const o of s)if(n.tx=o[0],n.ty=o[1],this.drawMarker(e,n),this._earlyReturn)break}else for(const s of i.points)if(n.tx=s[0],n.ty=s[1],this.drawMarker(e,n),this._earlyReturn)break;this._placementPool.release(n)}}drawMarker(e,i){switch(e.type){case"CIMCharacterMarker":case"CIMPictureMarker":this.drawPictureMarker(e,i);break;case"CIMVectorMarker":this.drawVectorMarker(e,i)}}drawPictureMarker(e,i){if(!e)return;const r=this._resourceManager.getResource(e.url),n=jt(e.size,$n.CIMPictureMarker.size);if(r==null||n<=0)return;const s=r.width,o=r.height;if(!s||!o)return;const a=s/o,l=jt(e.scaleX,1),c=Ms.createIdentity(),d=e.anchorPoint;if(d){let x=d.x,E=d.y;e.anchorPointUnits!=="Absolute"&&(x*=n*a*l,E*=n),c.translate(-x,-E)}let f=jt(e.rotation);e.rotateClockwise&&(f=-f),this._mapRotation&&(f+=this._mapRotation),f&&c.rotate(f*sb);let y=jt(e.offsetX),g=jt(e.offsetY);if(y||g){if(this._mapRotation){const x=sb*this._mapRotation,E=Math.cos(x),C=Math.sin(x),k=y*C+g*E;y=y*E-g*C,g=k}c.translate(y,g)}const b=this.geomUnitsPerPoint();b!==1&&c.scale(b,b);const _=i.getAngle();_&&c.rotate(_),c.translate(i.tx,i.ty),this.push(c,!1),this.drawImage(e,n),this.pop()}drawVectorMarker(e,i){if(!e)return;const r=e.markerGraphics;if(!r)return;const n=jt(e.size,$n.CIMVectorMarker.size),s=e.frame,o=s?s.ymax-s.ymin:0,a=n&&o?n/o:1,l=Ms.createIdentity();s&&l.translate(.5*-(s.xmax+s.xmin),.5*-(s.ymax+s.ymin));const c=e.anchorPoint;if(c){let _=c.x,x=c.y;e.anchorPointUnits!=="Absolute"?s&&(_*=s.xmax-s.xmin,x*=s.ymax-s.ymin):(_/=a,x/=a),l.translate(-_,-x)}a!==1&&l.scale(a,a);let d=jt(e.rotation);e.rotateClockwise&&(d=-d),this._mapRotation&&(d+=this._mapRotation),d&&l.rotate(d*sb);let f=jt(e.offsetX),y=jt(e.offsetY);if(f||y){if(this._mapRotation){const _=sb*this._mapRotation,x=Math.cos(_),E=Math.sin(_),C=f*E+y*x;f=f*x-y*E,y=C}l.translate(f,y)}const g=this.geomUnitsPerPoint();g!==1&&l.scale(g,g);const b=i.getAngle();b&&l.rotate(b),l.translate(i.tx,i.ty),this.push(l,e.scaleSymbolsProportionally);for(const _ of r){_!=null&&_.symbol&&_.geometry||zI().error("Invalid marker graphic",_);let x=_.textString;if(typeof x=="number"&&(x=x.toString()),this.drawSymbol(_.symbol,_.geometry,x),this._earlyReturn)break}this.pop()}drawTextSymbol(e,i,r){if(!e||!JC(i)||jt(e.height,$n.CIMTextSymbol.height)<=0)return;const n=Ms.createIdentity();let s=jt(e.angle);s=-s,s&&n.rotate(s*sb);const o=jt(e.offsetX),a=jt(e.offsetY);(o||a)&&n.translate(o,a);const l=this.geomUnitsPerPoint();l!==1&&n.scale(l,l),n.translate(i.x,i.y),this.push(n,!1),this.drawText(e,r),this.pop()}}class yat extends xW{constructor(e,i){super(e,i),this.reset()}reset(){this._xmin=this._ymin=1/0,this._xmax=this._ymax=-1/0,this._clipCount=0}envelope(){return new Qot(this._xmin,this._ymin,this._xmax-this._xmin,this._ymax-this._ymin)}bounds(){return IMe(this._xmin,this._ymin,this._xmax,this._ymax)}drawSolidFill(e){if(e&&!(this._clipCount>0))if(bn(e))this._processPath(e.rings,0);else if(Xs(e))this._processPath(e.paths,0);else if(ia(e)){const i=$f(e);i&&this._processPath(i.rings,0)}else console.error("drawSolidFill Unexpected geometry type!")}drawSolidStroke(e,i,r){if(!e||this._clipCount>0||r==null||r<=0)return;const n=Math.max(.5*this.transformSize(jt(r,$n.CIMSolidStroke.width)),.5*z_e);if(bn(e))this._processPath(e.rings,n);else if(Xs(e))this._processPath(e.paths,n);else if(ia(e)){const s=$f(e);s&&this._processPath(s.rings,n)}else console.error("drawSolidStroke unexpected geometry type!")}drawMarkerLayer(e,i){bn(i)&&e.markerPlacement&&(e.markerPlacement.type==="CIMMarkerPlacementInsidePolygon"||e.markerPlacement.type==="CIMMarkerPlacementPolygonCenter"&&e.markerPlacement.clipAtBoundary)?this._processPath(i.rings,0):super.drawMarkerLayer(e,i)}drawHatchFill(e,i){this.drawSolidFill(e)}drawPictureFill(e,i){this.drawSolidFill(e)}drawGradientFill(e,i){this.drawSolidFill(e)}drawPictureStroke(e,i){this.drawSolidStroke(e,null,i.width)}drawGradientStroke(e,i){this.drawSolidStroke(e,null,i.width)}pushClipPath(e){this.drawSolidFill(e),this._clipCount++}popClipPath(){this._clipCount--}drawImage(e,i){const{url:r}=e,n=jt(e.scaleX,1);let s=n*i,o=i;const a=this._resourceManager.getResource(r);if(a!=null){const l=a.height/a.width;s=n*(i?l>1?i:i/l:a.width),o=i?l>1?i*l:i:a.height}this._merge(this.transformPt([-s/2,-o/2]),0),this._merge(this.transformPt([-s/2,o/2]),0),this._merge(this.transformPt([s/2,-o/2]),0),this._merge(this.transformPt([s/2,o/2]),0)}drawText(e,i){if(!i||i.length===0)return;this._textRasterizer||(this._textRasterizer=new P_e);const r=U_e(e);let[n,s]=this._textRasterizer.computeTextSize(i,r);n=ji(n),s=ji(s);const o=this.transformSize(1)*this.reverseTransformScalar(1);n*=o,s*=o;let a=0;switch(e.horizontalAlignment){case"Left":a=n/2;break;case"Right":a=-n/2}let l=0;switch(e.verticalAlignment){case"Bottom":l=s/2;break;case"Top":l=-s/2;break;case"Baseline":l=s/6}this._merge(this.transformPt([-n/2+a,-s/2+l]),0),this._merge(this.transformPt([-n/2+a,s/2+l]),0),this._merge(this.transformPt([n/2+a,-s/2+l]),0),this._merge(this.transformPt([n/2+a,s/2+l]),0)}_processPath(e,i){if(e)for(const r of e){const n=r?r.length:0;if(n>1){this._merge(this.transformPt(r[0]),i);for(let s=1;s<n;s++)this._merge(this.transformPt(r[s]),i)}}}_merge(e,i){e[0]-i<this._xmin&&(this._xmin=e[0]-i),e[0]+i>this._xmax&&(this._xmax=e[0]+i),e[1]-i<this._ymin&&(this._ymin=e[1]-i),e[1]+i>this._ymax&&(this._ymax=e[1]+i)}}class wSt extends xW{constructor(){super(...arguments),this._searchPoint=[0,0],this._searchDistPoint=0,this._textInfo=null,this._svg=null,this._path=null,this._canvas=null}destroy(){this._svg=rat(this._svg),this._path=null,this._canvas=null}hitTest(e,i,r,n,s,o){var c;const a=o*pi(1);this.setTransform(),this.setGeomUnitsPerPoint(a),this._searchPoint=[(e[0]+e[2])/2,(e[1]+e[3])/2],this._searchDistPoint=(e[2]-e[0])/2/a,this._textInfo=n;const l=i&&(i.type==="CIMPointSymbol"&&i.angleAlignment!=="Map"||i.type==="CIMTextSymbol");if(this._mapRotation=l?s:0,!fe("esri-mobile")){const d=ji(Mje*window.devicePixelRatio),f=ji(kje);!(((i==null?void 0:i.type)==="CIMLineSymbol"||(i==null?void 0:i.type)==="CIMPolygonSymbol")&&((c=i.symbolLayers)!=null&&c.some(jGe)))&&(i==null?void 0:i.type)!=="CIMMeshSymbol"&&(QGe(i)??0)<f&&(this._searchDistPoint=d)}return this._earlyReturn=!1,this.drawSymbol(i,r),this._earlyReturn}executeEffects(e,i){var r;return((r=e.at(-1))==null?void 0:r.type)==="CIMGeometricEffectDashes"&&(e=e.slice(0,-1)),super.executeEffects(e,i)}drawSolidFill(e,i,r){r!=null?this._hittestSvgPath(e,r,!0):this._hitTestFill(e)}drawHatchFill(e,i){this._hitTestFill(e)}drawPictureFill(e,i){this._hitTestFill(e)}drawGradientFill(e,i){this._hitTestFill(e)}drawSolidStroke(e,i,r,n,s,o,a){a!=null?this._hittestSvgPath(e,a,!1,r):this._hitTestStroke(e,r)}drawPictureStroke(e,i){this._hitTestStroke(e,i.width)}drawGradientStroke(e,i){this._hitTestStroke(e,i.width)}drawMarkerLayer(e,i){e.markerPlacement&&(e.markerPlacement.type==="CIMMarkerPlacementInsidePolygon"||e.markerPlacement.type==="CIMMarkerPlacementPolygonCenter"&&e.markerPlacement.clipAtBoundary)?this._hitTestFill(i):super.drawMarkerLayer(e,i)}pushClipPath(e){}popClipPath(){}drawImage(e,i){const{url:r}=e,n=jt(e.scaleX,1),s=this._resourceManager.getResource(r);if(s==null||s.height===0||i===0)return;const o=i*this.geomUnitsPerPoint(),a=o*n*(s.width/s.height),l=this.reverseTransformPt(this._searchPoint),c=this._searchDistPoint;Math.abs(l[0])<a/2+c&&Math.abs(l[1])<o/2+c&&(this._earlyReturn=!0)}drawText(e,i){var b;const r=this._textInfo;if(!r)return;const n=r.get(e);if(!n||!n.glyphMosaicItems.glyphs.length)return;const s=N_e(jt(e.height,$n.CIMTextSymbol.height)),{lineGapType:o,lineGap:a}=e,l=o?j_e(o,jt(a),s):0,c=((b=e.callout)==null?void 0:b.type)==="CIMBackgroundCallout",d=F_e(n.glyphMosaicItems,{scale:s/mye,angle:0,xOffset:0,yOffset:0,horizontalAlignment:e.horizontalAlignment,verticalAlignment:e.verticalAlignment,maxLineWidth:D_e(e.lineWidth),lineHeight:fye*Math.max(.25,Math.min(l||1,4)),decoration:e.font.decoration||"none",useCIMAngleBehavior:!0,hasBackground:c}),f=this.reverseTransformPt(this._searchPoint),y=f[0],g=f[1];for(const _ of d.glyphs)if(y>_.xTopLeft&&y<_.xBottomRight&&g>-_.yBottomRight&&g<-_.yTopLeft){this._earlyReturn=!0;break}}_hitTestFill(e){let i=null;if(ia(e)){const n=e;i=[[[n.xmin,n.ymin],[n.xmin,n.ymax],[n.xmax,n.ymax],[n.xmax,n.ymin],[n.xmin,n.ymin]]]}else if(bn(e))i=e.rings;else{if(!Xs(e))return;i=e.paths}const r=this.reverseTransformPt(this._searchPoint);vat(r,i)&&(this._earlyReturn=!0),!this._earlyReturn&&Eoe(r,i,this.reverseTransformScalar(this._searchDistPoint)*this.prevGeomUnitsPerPoint())&&(this._earlyReturn=!0)}_getSvgPath(){return this._svg!=null&&this._path!=null||(this._svg??(this._svg=iat()),this._path??(this._path=A_e("path")),this._svg.appendChild(this._path)),this._path}_getCanvasContext(e,i){return this._canvas??(this._canvas=document.createElement("canvas")),this._canvas.width=e,this._canvas.height=i,this._canvas.getContext("2d",{willReadFrequently:!0})}_hittestSvgPath(e,i,r,n=0){const s=this.reverseTransformScalar(this._searchDistPoint)*this.prevGeomUnitsPerPoint(),o=this.reverseTransformPt(this._searchPoint),a=_n();OG(a,e);const l={x:a[0],y:a[1],width:a[2]-a[0],height:a[3]-a[1]},c=this._getSvgPath();c.setAttribute("d",i);const d=c.getBBox();let f=Math.max(d.width/l.width,d.height/l.height),y=1;const g=2*s*f;g<1&&(y=2/g,f*=y,d.x*=y,d.y*=y,d.width*=y,d.height*=y);const b=1+n*f/2,_=this._getCanvasContext(d.width+2*b,d.height+2*b);_.setTransform(y,0,0,y,-d.x+b,-d.y+b);const x=new Path2D(i);r?_.fill(x):(_.lineWidth=n*(f/y),_.stroke(x));const E=(l.width*f-d.width)/2,C=(l.height*f-d.height)/2,k=Math.floor((o[0]-l.x-s)*f-E+b),O=Math.floor((l.height-(o[1]-l.y)-s)*f+C+b),D=Math.ceil(2*s*f),B=Math.ceil(2*s*f),j=_.getImageData(k,O,D,B).data;for(let Z=3;Z<j.length;Z+=4)if(j[Z]>127.5)return void(this._earlyReturn=!0)}_hitTestStroke(e,i){let r=null;if(ia(e)){const n=e;r=[[[n.xmin,n.ymin],[n.xmin,n.ymax],[n.xmax,n.ymax],[n.xmax,n.ymin],[n.xmin,n.ymin]]]}else if(bn(e))r=e.rings;else{if(!Xs(e))return;r=e.paths}Eoe(this.reverseTransformPt(this._searchPoint),r,jt(i,$n.CIMSolidStroke.width)*this.geomUnitsPerPoint()/2+this.reverseTransformScalar(this._searchDistPoint)*this.prevGeomUnitsPerPoint())&&(this._earlyReturn=!0)}}class V_e extends xW{constructor(e,i,r,n){super(i,r),this._applyAdditionalRenderProps=n,this._colorSubstitutionHelper=new _st,this._ctx=e}drawSolidFill(e,i){if(!e)return;if(bn(e))this._buildPath(e.rings,!0);else if(Xs(e))this._buildPath(e.paths,!0);else if(ia(e))this._buildPath($f(e).rings,!0);else{if(!mx(e))return;console.log("CanvasDrawHelper.drawSolidFill - No implementation!")}const r=this._ctx;r.fillStyle=typeof i=="string"?i:"rgba("+Math.round(i[0])+","+Math.round(i[1])+","+Math.round(i[2])+","+(i[3]??255)/255+")",r.fill("evenodd")}drawSolidStroke(e,i,r,n,s,o){if(!e||!i||r===0)return;if(bn(e))this._buildPath(e.rings,!0);else if(Xs(e))this._buildPath(e.paths,!1);else{if(!ia(e))return void console.log("CanvasDrawHelper.drawSolidStroke isn't implemented!");this._buildPath($f(e).rings,!0)}const a=this._ctx;a.strokeStyle=typeof i=="string"?i:"rgba("+Math.round(i[0])+","+Math.round(i[1])+","+Math.round(i[2])+","+(i[3]??255)/255+")",a.lineWidth=Math.max(this.transformSize(r),z_e),this._setCapStyle(n),this._setJoinStyle(s),a.miterLimit=o,a.stroke()}pushClipPath(e){if(this._ctx.save(),bn(e))this._buildPath(e.rings,!0);else if(Xs(e))this._buildPath(e.paths,!0);else{if(!ia(e))return;this._buildPath($f(e).rings,!0)}this._ctx.clip("evenodd")}popClipPath(){this._ctx.restore()}drawImage(e,i){const{colorSubstitutions:r,url:n,tintColor:s}=e,o=jt(e.scaleX,1),a=this._resourceManager.getResource(n);if(a==null)return;let l=i*(a.width/a.height),c=i;i||(l=a.width,c=a.height);const d=I_(n)||"src"in a&&I_(a.src);let f="getFrame"in a?SV(a):a;r&&(f=this._colorSubstitutionHelper.applyColorSubstitution(f,r)),this._applyAdditionalRenderProps&&!d&&s&&(f=this._colorSubstitutionHelper.tintImageData(f,s));const y=this.transformPt([0,0]),[g,b]=this.getTransformAngle(),_=this.transformSize(1),x=this._ctx;x.save(),x.setTransform({m11:o*_*g,m12:o*_*b,m21:-_*b,m22:_*g,m41:y[0],m42:y[1]}),x.drawImage(f,-l/2,-c/2,l,c),x.restore()}drawText(e,i){if(!i||i.length===0)return;this._textRasterizer||(this._textRasterizer=new P_e);const r=U_e(e,this.transformSize(ji(1))),n=this._textRasterizer.rasterizeText(i,r);if(!n)return;const{size:s,anchorX:o,anchorY:a,canvas:l}=n,c=s[0]*(o+.5),d=s[1]*(a-.5),f=this._ctx,y=this.transformPt([0,0]),[g,b]=this.getTransformAngle(),_=1;f.save(),f.setTransform({m11:_*g,m12:_*b,m21:-1*b,m22:_*g,m41:y[0]-_*c,m42:y[1]+_*d}),f.drawImage(l,0,0),f.restore()}drawPictureFill(e,i){if(!e)return;let{colorSubstitutions:r,height:n,offsetX:s,offsetY:o,rotation:a,scaleX:l,tintColor:c,url:d}=i;const f=this._resourceManager.getResource(d);if(f==null)return;if(bn(e))this._buildPath(e.rings,!0);else if(Xs(e))this._buildPath(e.paths,!0);else if(ia(e))this._buildPath($f(e).rings,!0);else{if(!mx(e))return;console.log("CanvasDrawHelper.drawPictureFill - No implementation!")}const y=this._ctx,g=I_(d)||"src"in f&&I_(f.src);let b,_="getFrame"in f?SV(f):f;if(r&&(_=this._colorSubstitutionHelper.applyColorSubstitution(_,r)),this._applyAdditionalRenderProps){g||c&&(_=this._colorSubstitutionHelper.tintImageData(_,c)),b=y.createPattern(_,"repeat");const x=this.transformSize(1);a||(a=0),s?s*=x:s=0,o?o*=x:o=0,n&&(n*=x);const E=n?n/f.height:1,C=l&&n?l*n/f.width:1;if(a!==0||E!==1||C!==1||s!==0||o!==0){const k=new DOMMatrix;k.rotateSelf(0,0,-a).translateSelf(s,o).scaleSelf(C,E,1),b.setTransform(k)}}else b=y.createPattern(_,"repeat");y.save(),y.fillStyle=b,y.fill("evenodd"),y.restore()}drawPictureStroke(e,i){if(!e)return;let{colorSubstitutions:r,capStyle:n,joinStyle:s,miterLimit:o,tintColor:a,url:l,width:c}=i;const d=this._resourceManager.getResource(l);if(d==null)return;let f;if(bn(e))f=e.rings;else if(Xs(e))f=e.paths;else{if(!ia(e))return mx(e)?void console.log("CanvasDrawHelper.drawPictureStroke - No implementation!"):void 0;f=$f(e).rings}c||(c=d.width);const y=I_(l)||"src"in d&&I_(d.src);let g="getFrame"in d?SV(d):d;r&&(g=this._colorSubstitutionHelper.applyColorSubstitution(g,r)),this._applyAdditionalRenderProps&&(y||a&&(g=this._colorSubstitutionHelper.tintImageData(g,a)));const b=Math.max(this.transformSize(pi(c)),.5),_=b/g.width,x=this._ctx,E=x.createPattern(g,"repeat-y");let C,k;x.save(),this._setCapStyle(n),this._setJoinStyle(s),o!==void 0&&(x.miterLimit=o),x.lineWidth=b;for(let O of f)if(O=se(O),Ioe(O),O&&!(O.length<=1)){C=this.transformPt(O[0]);for(let D=1;D<O.length;D++){k=this.transformPt(O[D]);const B=bat(C,k),j=new DOMMatrix;j.translateSelf(0,C[1]-b/2).scaleSelf(_,_,1).rotateSelf(0,0,90-B),E.setTransform(j),x.strokeStyle=E,x.beginPath(),x.moveTo(C[0],C[1]),x.lineTo(k[0],k[1]),x.stroke(),C=k}}x.restore()}drawGradientFill(e,i){if(!e)return;let r;if(bn(e))r=e.rings;else if(Xs(e))r=e.paths;else{if(!ia(e))return void zI().error("Unable to draw gradient fill");r=$f(e).rings}this._buildPath(r,!0);const{angle:n,gradientMethod:s,gradientSize:o,gradientSizeUnits:a}=i,l=$n.CIMGradientFill,c=i.gradientType??l.gradientType,d=-k$(n??0),f=AMe();for(const E of r){const C=E?E.length:0;if(C>1)for(let k=0;k<C;k++){let O=this.transformPt(E[k]);s!=="Linear"&&s!=="Rectangular"||(O=Vp(O,-d)),AE(f,O)}}const[y,g,b,_]=f,x=this._ctx;switch(x.save(),s){case"Buffered":zI().error(`Gradient method "${s}" currently unsupported.`);break;case"Linear":{const E=(g+_)/2,C=a==="Absolute"?this.transformSize(pi(o)):cE(o,l.gradientSize)*(b-y),[k,O]=c==="Discrete"?[b,b-C]:[y+C,y],D=Vp([k,E],d),B=Vp([O,E],d),j=x.createLinearGradient(D[0],D[1],B[0],B[1]);EA(j,i),x.fillStyle=j,x.fill("evenodd");break}case"Circular":{const E=sX(f),C=MMe(f)/2,k=a==="Absolute"?this.transformSize(pi(o)):cE(o,l.gradientSize)*C,[O,D]=c==="Discrete"?[C,C-k]:[k,0],B=x.createRadialGradient(E[0],E[1],O,E[0],E[1],D);EA(B,i),x.fillStyle=B,x.fill("evenodd");break}case"Rectangular":{const E=sX(f),C=E[0],k=E[1],O=Vp(E,d),D=(pe,he,ne,re,ke,Fe,Ae,we)=>{x.save(),this.pushClipPath(e);const Re=Vp([ke,Fe],d),je=Vp([Ae,we],d);x.beginPath(),x.moveTo(O[0],O[1]),x.lineTo(Re[0],Re[1]),x.lineTo(je[0],je[1]),x.lineTo(O[0],O[1]),x.clip();const ue=Vp([pe,he],d),Ne=Vp([ne,re],d),Pt=x.createLinearGradient(ue[0],ue[1],Ne[0],Ne[1]);EA(Pt,i),x.fillStyle=Pt,x.fill("evenodd"),x.restore()};let B=a==="Absolute"?this.transformSize(pi(o)):cE(o,l.gradientSize)*(YF(f)/2),[j,Z]=c==="Discrete"?[b,b-B]:[C+B,C];D(j,k,Z,k,b,g,b,_),[j,Z]=c==="Discrete"?[y,y+B]:[C-B,C],D(j,k,Z,k,y,_,y,g),B=a==="Absolute"?this.transformSize(pi(o)):cE(o,l.gradientSize)*(XF(f)/2);let[X,ee]=c==="Discrete"?[_,_-B]:[k+B,k];D(C,X,C,ee,b,_,y,_),[X,ee]=c==="Discrete"?[g,g+B]:[k-B,k],D(C,X,C,ee,y,g,b,g);break}}x.restore()}drawGradientStroke(e,i){const{capStyle:r,gradientMethod:n,gradientSize:s,gradientSizeUnits:o,joinStyle:a,miterLimit:l,width:c}=i;if(!e||c===0)return;let d;if(bn(e))d=e.rings;else if(Xs(e))d=e.paths;else{if(!ia(e))return void zI().error("Unable to draw gradient stroke");d=$f(e).rings}const f=i.gradientType??$n.CIMGradientStroke.gradientType,y=Math.max(this.transformSize(pi(c)),.5),g=this._ctx;let b,_;g.save(),this._setCapStyle(r),this._setJoinStyle(a),l!==void 0&&(g.miterLimit=l),g.lineWidth=y;for(let x of d){if(x=se(x),Ioe(x),!x||x.length<=1)continue;let E=0;b=this.transformPt(x[0]);for(let O=1;O<x.length;O++){_=this.transformPt(x[O]);const D=_[0]-b[0],B=_[1]-b[1];E+=Math.sqrt(D*D+B*B),b=_}const C=o==="Absolute"?this.transformSize(pi(s)):cE(s,$n.CIMGradientStroke.gradientSize)*(n==="AcrossLine"?y:E);let k=0;b=this.transformPt(x[0]);for(let O=1;O<x.length;O++){_=this.transformPt(x[O]);const D=_[0]-b[0],B=_[1]-b[1],j=Math.sqrt(D*D+B*B);let Z,X,ee,pe;switch(n){case"AcrossLine":{const[ne,re]=Vp([D/j,B/j],-Math.PI/2),ke=y/2,Fe=f==="Discrete"?ke:C-ke;Z=(b[0]+_[0])/2+ne*Fe,X=(b[1]+_[1])/2+re*Fe,ee=Z-ne*C,pe=X-re*C;break}case"AlongLine":{const ne=D/j,re=B/j;f==="Discrete"?(Z=b[0]-ne*k,X=b[1]-re*k,ee=Z+ne*C,pe=X+re*C):(ee=b[0]+ne*(E-k),pe=b[1]+re*(E-k),Z=ee-ne*C,X=pe-re*C);break}default:return zI().error("Unrecognized gradient method:",n),void g.restore()}const he=g.createLinearGradient(Z,X,ee,pe);EA(he,i),g.strokeStyle=he,g.beginPath(),g.moveTo(b[0],b[1]),g.lineTo(_[0],_[1]),g.stroke(),k+=j,b=_}}g.restore()}_buildPath(e,i){const r=this._ctx;if(r.beginPath(),e)for(const n of e){const s=n?n.length:0;if(s>1){let o=this.transformPt(n[0]);r.moveTo(o[0],o[1]);for(let a=1;a<s;a++)o=this.transformPt(n[a]),r.lineTo(o[0],o[1]);i&&r.closePath()}}}_setCapStyle(e){switch(e){case qa.Butt:this._ctx.lineCap="butt";break;case qa.Round:this._ctx.lineCap="round";break;case qa.Square:this._ctx.lineCap="square"}}_setJoinStyle(e){switch(e){case Lc.Bevel:this._ctx.lineJoin="bevel";break;case Lc.Round:this._ctx.lineJoin="round";break;case Lc.Miter:this._ctx.lineJoin="miter"}}}function gat(t,e,i){let r=jt(t.separation,$n.CIMHatchFill.separation)*i,n=jt(t.rotation);if(r===0)return null;r<0&&(r=-r);let s=0;const o=.5*r;for(;s>o;)s-=r;for(;s<-o;)s+=r;const a=_n();OG(a,e),a[0]-=o,a[1]-=o,a[2]+=o,a[3]+=o;const l=[[a[0],a[1]],[a[0],a[3]],[a[2],a[3]],[a[2],a[1]]];for(;n>180;)n-=180;for(;n<0;)n+=180;const c=Math.cos(n*sb),d=Math.sin(n*sb),f=-r*d,y=r*c;let g,b,_,x;s=jt(t.offsetX)*i*d-jt(t.offsetY)*i*c,g=_=Number.MAX_VALUE,b=x=-Number.MAX_VALUE;for(const j of l){const Z=j[0],X=j[1],ee=c*Z+d*X,pe=-d*Z+c*X;g=Math.min(g,ee),_=Math.min(_,pe),b=Math.max(b,ee),x=Math.max(x,pe)}_=Math.floor(_/r)*r;let E=c*g-d*_-f*s/r,C=d*g+c*_-y*s/r,k=c*b-d*_-f*s/r,O=d*b+c*_-y*s/r;const D=1+Math.round((x-_)/r),B=[];for(let j=0;j<D;j++)E+=f,C+=y,k+=f,O+=y,B.push([[E,C],[k,O]]);return{paths:B}}function vat(t,e){let i=0;for(const r of e){const n=r.length;for(let s=1;s<n;s++){const o=r[s-1],a=r[s];o[1]>t[1]!=a[1]>t[1]&&((a[0]-o[0])*(t[1]-o[1])-(a[1]-o[1])*(t[0]-o[0])>0?i++:i--)}}return i!==0}function Eoe(t,e,i){for(const r of e){const n=r.length;for(let s=1;s<n;s++){const o=r[s-1],a=r[s];let l=(a[0]-o[0])*(a[0]-o[0])+(a[1]-o[1])*(a[1]-o[1]);if(l===0)continue;l=Math.sqrt(l);const c=((a[0]-o[0])*(t[1]-o[1])-(a[1]-o[1])*(t[0]-o[0]))/l;if(Math.abs(c)<i){const d=((a[0]-o[0])*(t[0]-o[0])+(a[1]-o[1])*(t[1]-o[1]))/l;if(d>-i&&d<l+i)return!0}}}return!1}function bat(t,e){const i=e[0]-t[0],r=e[1]-t[1];return 180/Math.PI*Math.atan2(r,i)}const $f=t=>t?{spatialReference:t.spatialReference,rings:[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]}:null,j_e=(t,e,i)=>{switch(t){case"ExtraLeading":return 1+e/i;case"Multiple":return e;case"Exact":return e/i}};function U_e(t,e=1){var k;const i=qve(t),r=Gve(t.fontStyleName),n=t.fontFamilyName??vW,{weight:s,style:o}=r,a=e*(t.height||5),l=HGe(t.horizontalAlignment),c=WGe(t.verticalAlignment),d=xC(t),f=xC(t.haloSymbol),y=f!=null?e*(t.haloSize??0):0,g=i3(t.symbol),b=e*(r3(t.symbol)||0),_=((k=t.callout)==null?void 0:k.type)==="CIMBackgroundCallout"?t.callout.backgroundSymbol:null,x=xC(_),E=r3(_),C=i3(_);return{color:d,size:a,horizontalAlignment:l,verticalAlignment:c,font:{family:n,style:GGe(o),weight:qGe(s),decoration:i},outline:{size:b||0,color:g},halo:{size:y||0,color:f,style:o},backgroundColor:x,borderLine:E!=null&&C!=null?{size:E,color:C}:null,pixelRatio:1,premultiplyColors:!0}}const wat=1e-4;function Ioe(t){let e,i,r,n,s,o=t[0],a=1;for(;a<t.length;)e=t[a][0]-o[0],i=t[a][1]-o[1],n=e!==0?i/e:Math.PI/2,r!==void 0&&Math.abs(n-r)<=wat?(t.splice(a-1,1),o=s):(s=o,o=t[a],a++),r=n}const MA=Number.POSITIVE_INFINITY,SW=Math.PI,_St=2*SW,_at=128/SW,xat=256/360,xSt=SW/180,Sat=1/Math.LN2;function B_e(t,e){return(t%=e)>=0?t:t+e}function SSt(t){return B_e(t*_at,256)}function $St(t){return B_e(t*xat,256)}function TSt(t){return Math.log(t)*Sat}function ESt(t,e,i){return t*(1-i)+e*i}const $at=8,Tat=14,Eat=16;function ISt(t){return $at+Math.max((t-Tat)*Eat,0)}function CSt(t,e,i){let r,n,s,o=0;for(const a of i){r=a.length;for(let l=1;l<r;++l)n=a[l-1],s=a[l],n.y>e!=s.y>e&&((s.x-n.x)*(e-n.y)-(s.y-n.y)*(t-n.x)>0?o++:o--)}return o!==0}function MSt(t,e,i,r){let n,s,o,a;const l=r*r;for(const c of i){const d=c.length;if(!(d<2)){n=c[0].x,s=c[0].y;for(let f=1;f<d;++f){if(o=c[f].x,a=c[f].y,hMe(t,e,n,s,o,a)<l)return!0;n=o,s=a}}}return!1}function kSt(t,e,i,r,n,s,o){const a=Math.max(r,Math.min(e,s))-e,l=Math.max(n,Math.min(i,o))-i;return a*a+l*l<=t*t}function PSt(t,e){if(e===0||Number.isNaN(e))return t;const i=[],r=new hi(0,0),n=new hi(0,0),s=new hi(0,0);for(let o=0;o<t.length;o++){const a=t[o],l=[];for(let c=0;c<a.length;c++){const d=a[c-1],f=a[c],y=a[c+1];c===0?r.setCoords(0,0):r.assignSub(f,d).normalize().rightPerpendicular(),c===a.length-1?n.setCoords(0,0):n.assignSub(y,f).normalize().rightPerpendicular(),s.assignAdd(r,n).normalize();const g=s.x*n.x+s.y*n.y;g!==0&&s.scale(1/g),l.push(hi.add(f,s.scale(e)))}i.push(l)}return i}function ASt(t,e,i,r){const n=new hi(t[0],t[1]);if(n.scale(r),e==="viewport"){const s=-i*(Math.PI/180),o=Math.cos(s),a=Math.sin(s);n.rotate(o,a)}return n}const G_e=Math.PI,Iat=G_e/2,Coe=Math.PI/180,EV=96/72,Cat=1.4142135623730951,Moe=2,koe=4,H3=()=>Ie.getLogger("esri.symbols.cim.CIMSymbolHelper");function LSt(t){let e;switch(t.type){case"cim":return t.data;case"web-style":return t;case"simple-marker":{const i=To.fromSimpleMarker(t);if(!i)throw new Error("InternalError: Cannot convert symbol to CIM");e=i;break}case"picture-marker":e=To.fromPictureMarker(t);break;case"simple-line":e=To.fromSimpleLineSymbol(t);break;case"simple-fill":e=To.fromSimpleFillSymbol(t);break;case"picture-fill":e=To.fromPictureFillSymbol(t);break;case"text":e=To.fromTextSymbol(t)}return{type:"CIMSymbolReference",symbol:e}}function xR(t,e,i){switch(e.type){case"CIMSymbolReference":return xR(t,e.symbol,i);case"CIMPointSymbol":i==null&&(i={x:0,y:0}),t.drawSymbol(e,i);break;case"CIMLineSymbol":i==null&&(i={paths:[[[0,0],[10,0]]]}),t.drawSymbol(e,i);break;case"CIMPolygonSymbol":i==null&&(i={rings:[[[0,0],[0,10],[10,10],[10,0],[0,0]]]}),t.drawSymbol(e,i);break;case"CIMTextSymbol":{const r={x:0,y:0};t.drawSymbol(e,r);break}case"CIMVectorMarker":{const r=new Q$;t.drawMarker(e,r);break}}return t.envelope()}function Mat(t){if(!t)return 0;switch(t.type){case"CIMMarkerPlacementAlongLineSameSize":case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAtExtremities":case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementAtRatioPositions":case"CIMMarkerPlacementOnLine":case"CIMMarkerPlacementOnVertices":return Math.abs(t.offset);default:return 0}}function kat(t){if(!t)return 0;switch(t.type){case"CIMGeometricEffectArrow":return Math.abs(.5*t.width);case"CIMGeometricEffectBuffer":return Math.abs(t.size);case"CIMGeometricEffectControlMeasureLine":return 500;case"CIMGeometricEffectExtension":case"CIMGeometricEffectRadial":return Math.abs(t.length);case"CIMGeometricEffectJog":return Math.abs(.5*t.length);case"CIMGeometricEffectMove":return Math.max(Math.abs(jt(t.offsetX)),Math.abs(jt(t.offsetY)));case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":return Math.abs(t.offset);case"CIMGeometricEffectRegularPolygon":return Math.abs(t.radius);case"CIMGeometricEffectRotate":case"CIMGeometricEffectScale":default:return 0;case"CIMGeometricEffectTaperedPolygon":return .5*Math.max(Math.abs(t.fromWidth),Math.abs(t.toWidth));case"CIMGeometricEffectWave":return Math.abs(t.amplitude);case"CIMGeometricEffectDonut":return Math.abs(t.width)}}function Poe(t){if(!t)return 0;let e=0;for(const i of t)e+=kat(i);return e}class RSt{static getSymbolInflateSize(e,i,r,n,s){return e||(e=[0,0,0,0]),i?this._getInflateSize(e,i,r,n,s):e}static safeSize(e){const i=Math.max(Math.abs(e[0]),Math.abs(e[2])),r=Math.max(Math.abs(e[1]),Math.abs(e[3]));return Math.sqrt(i*i+r*r)}static _vectorMarkerBounds(e,i,r,n){let s=!0;const o=_n();if(i!=null&&i.markerGraphics)for(const a of i.markerGraphics){const l=[0,0,0,0];a.geometry&&(OG(o,a.geometry),l[0]=0,l[1]=0,l[2]=0,l[3]=0,this.getSymbolInflateSize(l,a.symbol,r,0,n),o[0]+=l[0],o[1]+=l[1],o[2]+=l[2],o[3]+=l[3],s?(e[0]=o[0],e[1]=o[1],e[2]=o[2],e[3]=o[3],s=!1):(e[0]=Math.min(e[0],o[0]),e[1]=Math.min(e[1],o[1]),e[2]=Math.max(e[2],o[2]),e[3]=Math.max(e[3],o[3])))}return e}static _getInflateSize(e,i,r,n,s){if(Fat(i)){const o=this._getLayersInflateSize(e,i.symbolLayers,r,n,s),a=Poe(i.effects);return a>0&&(o[0]-=a,o[1]-=a,o[2]+=a,o[3]+=a),o}return this._getTextInflatedSize(e,i,s)}static _getLayersInflateSize(e,i,r,n,s){let o=!0;if(!i)return e;for(const a of i){if(!a)continue;let l=[0,0,0,0];switch(a.type){case"CIMSolidFill":case"CIMPictureFill":case"CIMHatchFill":case"CIMGradientFill":break;case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":{const d=a;let f=d.width;f!=null&&(d.capStyle===qa.Square||d.joinStyle===Lc.Miter?f/=Cat:f/=2,l[0]=-f,l[1]=-f,l[2]=f,l[3]=f);break}case"CIMCharacterMarker":case"CIMVectorMarker":case"CIMPictureMarker":{const d=a;if(a.type==="CIMVectorMarker"){const _=a;if(l=this._vectorMarkerBounds(l,_,r,s),_.frame){const x=(_.frame.xmin+_.frame.xmax)/2,E=(_.frame.ymin+_.frame.ymax)/2;if(l[0]-=x,l[1]-=E,l[2]-=x,l[3]-=E,_.size!=null){const C=_.size/(_.frame.ymax-_.frame.ymin);l[0]*=C,l[1]*=C,l[2]*=C,l[3]*=C}}}else if(a.type==="CIMPictureMarker"){const _=a,x=r.getResource(_.url);let E=1;if(x!=null&&x.height&&(E=x.width/x.height),d.size!=null){const C=d.size/2,k=d.size*E*_.scaleX/2;l=[-k,-C,k,C]}}else if(d.size!=null){const _=d.size/2;l=[-_,-_,_,_]}if(d.anchorPoint){let _,x;d.anchorPointUnits==="Absolute"?(_=d.anchorPoint.x,x=d.anchorPoint.y):(_=d.anchorPoint.x*(l[2]-l[0]),x=d.anchorPoint.y*(l[3]-l[1]));const E=1.25*Math.sqrt(_*_+x*x);l[0]-=E,l[1]-=E,l[2]+=E,l[3]+=E}let f=jt(d.rotation);if(d.rotateClockwise&&(f=-f),n&&(f-=n),f){const _=Coe*f,x=Math.cos(_),E=Math.sin(_),C=_n([MA,MA,-MA,-MA]);AE(C,[l[0]*x-l[1]*E,l[0]*E+l[1]*x]),AE(C,[l[0]*x-l[3]*E,l[0]*E+l[3]*x]),AE(C,[l[2]*x-l[1]*E,l[2]*E+l[1]*x]),AE(C,[l[2]*x-l[3]*E,l[2]*E+l[3]*x]),l=C}let y=jt(d.offsetX),g=jt(d.offsetY);if(n){const _=Coe*n,x=Math.cos(_),E=Math.sin(_),C=y*E+g*x;y=y*x-g*E,g=C}l[0]+=y,l[1]+=g,l[2]+=y,l[3]+=g;const b=Mat(d.markerPlacement);b>0&&(l[0]-=b,l[1]-=b,l[2]+=b,l[3]+=b);break}}const c=Poe(a.effects);c>0&&(l[0]-=c,l[1]-=c,l[2]+=c,l[3]+=c),o?(e[0]=l[0],e[1]=l[1],e[2]=l[2],e[3]=l[3],o=!1):(e[0]=Math.min(e[0],l[0]),e[1]=Math.min(e[1],l[1]),e[2]=Math.max(e[2],l[2]),e[3]=Math.max(e[3],l[3]))}return e}static _getTextInflatedSize(e,i,r){var y;const n=N_e(i.height??$n.CIMTextSymbol.height);if(e[0]=-n/2,e[1]=-n/2,e[2]=n/2,e[3]=n/2,!r)return e;const s=r.get(i);if(!s||!s.glyphMosaicItems.glyphs.length)return e;const{lineGapType:o,lineGap:a}=i,l=o?j_e(o,a??0,n):0,c=((y=i.callout)==null?void 0:y.type)==="CIMBackgroundCallout",d=F_e(s.glyphMosaicItems,{scale:n/mye,angle:jt(i.angle),xOffset:jt(i.offsetX),yOffset:jt(i.offsetY),horizontalAlignment:i.horizontalAlignment,verticalAlignment:i.verticalAlignment,maxLineWidth:D_e(i.lineWidth),lineHeight:fye*Math.max(.25,Math.min(l||1,4)),decoration:i.font.decoration||"none",useCIMAngleBehavior:!0,hasBackground:c}).boundsT,f=Math.sqrt(d.width*d.width+d.height*d.height);return e[0]-=d.x+f,e[1]-=d.y-f,e[2]+=d.x+f,e[3]+=-d.y+f,e}}class To{static getEnvelope(e,i,r){if(!e)return null;const n=new yat(r);if(Array.isArray(e)){let s;for(const o of e)s?s.union(xR(n,o,i)):s=xR(n,o,i);return s}return xR(n,e,i)}static getTextureInfo(e,i,r,n,s){const o=n??this.getEnvelope(e,null,i);if(!o)return[0,0,0,0,1];const a=Math.max(o.width,o.height)*EV;let l=s!=null?Math.max(s/a,1):1;l*=EV,o.x*=l,o.y*=l,o.width*=l,o.height*=l,o.width=Math.max(Math.ceil(o.x+o.width)-Math.floor(o.x),1)-1,o.height=Math.max(Math.ceil(o.y+o.height)-Math.floor(o.y),1)-1;let c=o.x+.5*o.width,d=o.y+.5*o.height;return c+=o.x-Math.floor(o.x),d+=o.y-Math.floor(o.y),n||(o.width+=r,o.height+=r,c+=r/2,d+=r/2),[o.width,o.height,c,d,l]}static getTextureAnchor(e,i,r){const[n,s,o,a,l]=this.getTextureInfo(e,i,Moe,null,r);return[-o/n,-a/s,s/l*EV]}static rasterize(e,i,r,n,s=!0,o){const[a,l,c,d,f]=this.getTextureInfo(i,n,Moe,r,o);e.width=a,e.height=l;const y=e.getContext("2d",{willReadFrequently:!0}),g=Ms.createScale(f,-f);g.translate(.5*a-c,.5*l+d);const b=new V_e(y,n,g);switch(i.type){case"CIMPointSymbol":{const E={type:"point",x:0,y:0};b.drawSymbol(i,E);break}case"CIMVectorMarker":{const E=new Q$;b.drawMarker(i,E);break}}const _=y.getImageData(0,0,e.width,e.height),x=new Uint8Array(_.data);if(s){let E;for(let C=0;C<x.length;C+=4)E=x[C+3]/255,x[C]=x[C]*E,x[C+1]=x[C+1]*E,x[C+2]=x[C+2]*E}return[x,e.width,e.height,-c/a,-d/l]}static fromTextSymbol(e){const{text:i}=e;return{type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,anchorPointUnits:"Relative",dominantSizeAxis3D:"Y",size:10,billboardMode3D:"FaceNearPlane",frame:{xmin:-5,ymin:-5,xmax:5,ymax:5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{x:0,y:0},symbol:To.createCIMTextSymbolfromTextSymbol(e),textString:i}],scaleSymbolsProportionally:!0,respectFrame:!0}],scaleX:1,angleAlignment:"Display"}}static fromPictureFillSymbol(e){const{height:i,outline:r,width:n,xoffset:s,xscale:o,yoffset:a,yscale:l}=e,c=[],d={type:"CIMPolygonSymbol",symbolLayers:c};if(r){const _=Aoe(r);_&&c.push(_)}let f=e.url;e.type==="esriPFS"&&e.imageData&&(f=e.imageData);const y="angle"in e?e.angle??0:0,g=(n??0)*(o||1),b=(i??0)*(l||1);return c.push({type:"CIMPictureFill",invertBackfaceTexture:!1,scaleX:1,textureFilter:lx.Picture,tintColor:null,url:f,height:b,width:g,offsetX:jt(s),offsetY:jt(a),rotation:jt(-y),colorSubstitutions:null}),d}static fromSimpleFillSymbol(e){const{color:i,style:r,outline:n}=e,s=[],o={type:"CIMPolygonSymbol",symbolLayers:s};if(n){const a=Aoe(n);a&&s.push(a)}if(r&&r!=="solid"&&r!=="none"&&r!=="esriSFSSolid"&&r!=="esriSFSNull"){const a={type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",color:Sl(i),capStyle:qa.Butt,joinStyle:Lc.Miter,width:.75}]};let l=0;const c=ji(Nat(r)?8:10);switch(r){case"vertical":case"esriSFSVertical":l=90;break;case"forward-diagonal":case"esriSFSForwardDiagonal":case"diagonal-cross":case"esriSFSDiagonalCross":l=-45;break;case"backward-diagonal":case"esriSFSBackwardDiagonal":l=45;break;case"cross":case"esriSFSCross":l=0}s.push({type:"CIMHatchFill",lineSymbol:a,offsetX:0,offsetY:0,rotation:l,separation:c}),r==="cross"||r==="esriSFSCross"?s.push({type:"CIMHatchFill",lineSymbol:se(a),offsetX:0,offsetY:0,rotation:90,separation:c}):r!=="diagonal-cross"&&r!=="esriSFSDiagonalCross"||s.push({type:"CIMHatchFill",lineSymbol:se(a),offsetX:0,offsetY:0,rotation:45,separation:c})}else!r||r!=="solid"&&r!=="esriSFSSolid"||s.push({type:"CIMSolidFill",enable:!0,color:Sl(i)});return o}static fromSimpleLineSymbol(e){const{cap:i,color:r,join:n,marker:s,miterLimit:o,style:a,width:l}=e;let c=null;a!=="solid"&&a!=="none"&&a!=="esriSLSSolid"&&a!=="esriSLSNull"&&(c=[{type:"CIMGeometricEffectDashes",dashTemplate:n7(a,i),lineDashEnding:"NoConstraint",scaleDash:!0,offsetAlongLine:null}]);const d=[];if(s){let f;switch(s.placement){case"begin-end":f=Yh.Both;break;case"begin":f=Yh.JustBegin;break;case"end":f=Yh.JustEnd;break;default:f=Yh.None}const y=To.fromSimpleMarker(s,l,r).symbolLayers[0];y.markerPlacement={type:"CIMMarkerPlacementAtExtremities",placePerPart:!1,angleToLine:!0,offset:0,extremityPlacement:f,offsetAlongLine:0},d.push(y)}return d.push({type:"CIMSolidStroke",color:a!=="none"&&a!=="esriSLSNull"?Sl(r):[0,0,0,0],capStyle:H_e(i),joinStyle:W_e(n),miterLimit:o,width:l,effects:c}),{type:"CIMLineSymbol",symbolLayers:d}}static fromPictureMarker(e){const{angle:i,height:r,width:n,xoffset:s,yoffset:o}=e;let a=e.url;return e.type==="esriPMS"&&e.imageData&&(a=e.imageData),{type:"CIMPointSymbol",symbolLayers:[{type:"CIMPictureMarker",invertBackfaceTexture:!1,scaleX:1,textureFilter:lx.Picture,tintColor:null,url:a,size:r,width:n,offsetX:jt(s),offsetY:jt(o),rotation:jt(-i)}]}}static createCIMTextSymbolfromTextSymbol(e){const{angle:i,color:r,font:n,haloColor:s,haloSize:o,horizontalAlignment:a,kerning:l,lineWidth:c,text:d,verticalAlignment:f,xoffset:y,yoffset:g,backgroundColor:b,borderLineColor:_,borderLineSize:x}=e;let E,C,k,O,D,B;n&&(E=n.family,C=n.style,k=n.weight,O=n.size,D=n.decoration);let j=!1;return d&&(j=cst(d)[1]),(b||x)&&(B={type:"CIMBackgroundCallout",margin:null,backgroundSymbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",color:Sl(b)},{type:"CIMSolidStroke",color:Sl(_),width:x}]},accentBarSymbol:null,gap:null,leaderLineSymbol:null,lineStyle:null}),{type:"CIMTextSymbol",angle:i,blockProgression:Z8.BTT,depth3D:1,extrapolateBaselines:!0,fontEffects:B8.Normal,fontEncoding:G8.Unicode,fontFamilyName:E||"Arial",fontStyleName:Lat(C,k),fontType:q8.Unspecified,haloSize:o,height:O,hinting:Y8.Default,horizontalAlignment:Pat(a??"center"),kerning:l,letterWidth:100,ligatures:!0,lineGapType:"Multiple",lineWidth:c,offsetX:jt(y),offsetY:jt(g),strikethrough:D==="line-through",underline:D==="underline",symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:Sl(r)}]},haloSymbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:Sl(s)}]},shadowColor:[0,0,0,255],shadowOffsetX:1,shadowOffsetY:1,textCase:"Normal",textDirection:j?t3.RTL:t3.LTR,verticalAlignment:Aat(f??"baseline"),verticalGlyphOrientation:K8.Right,wordSpacing:100,billboardMode3D:J8.FaceNearPlane,callout:B}}static createPictureMarkerRasterizationParam(e){var l,c;const{angle:i,height:r,width:n,xoffset:s,yoffset:o}=e,a=e.url??((l=e.source)==null?void 0:l.url)??((c=e.source)==null?void 0:c.imageData);return a?{type:"sprite-rasterization-param",overrides:[],resource:{type:"CIMPictureMarker",invertBackfaceTexture:!1,scaleX:1,textureFilter:lx.Picture,tintColor:null,url:a,size:r,width:n,offsetX:jt(s),offsetY:jt(o),rotation:jt(-i)}}:null}static createPictureFillRasterizationParam(e){const{width:i,height:r,xoffset:n,yoffset:s,url:o}=e;return o?{type:"sprite-rasterization-param",overrides:[],resource:{type:"CIMPictureFill",scaleX:1,textureFilter:lx.Picture,tintColor:null,url:o,width:i,height:r,offsetX:jt(n),offsetY:jt(s),rotation:0}}:null}static fromSimpleMarker(e,i,r){const{style:n}=e,s=e.color??r;if(n==="path"||n==="esriSMSPath"){const f=[];if("outline"in e&&e.outline){const b=e.outline;f.push({type:"CIMSolidStroke",enable:!0,width:b.width,color:Sl(b.color),path:e.path})}f.push({type:"CIMSolidFill",enable:!0,color:Sl(s),path:e.path});const[y,g]=xE("square");return{type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,rotation:-jt(e.angle),size:jt(e.size||6),offsetX:jt(e.xoffset),offsetY:jt(e.yoffset),scaleSymbolsProportionally:!1,frame:y,markerGraphics:[{type:"CIMMarkerGraphic",geometry:g,symbol:{type:"CIMPolygonSymbol",symbolLayers:f}}]}]}}const o=[];let a,l,c=e.size;if("outline"in e&&e.outline&&e.outline.style!=="none"&&e.outline.style!=="esriSLSNull"){const f=e.outline,y=f.style!=="solid"&&f.style!=="esriSLSSolid";[a,l]=y?xE(n,e.size):xE(n);const g=f.width??zN.width;if(y){const x=g/e.size,E=(a.xmax-a.xmin)*x/2,C=(a.ymax-a.ymin)*x/2;a.xmin-=E,a.xmax+=E,a.ymin-=C,a.ymax+=C,c&&(c+=g)}const b=e.style!=="cross"&&e.style!=="x"||(e==null?void 0:e.outline.style)==="dot"||(e==null?void 0:e.outline.style)==="short-dot"?Zs.HalfGap:Zs.FullPattern,_=y?[{type:"CIMGeometricEffectAddControlPoints"},{type:"CIMGeometricEffectDashes",dashTemplate:n7(f.style,null).map((x=>f.width&&f.width>0?x*f.width:x)),lineDashEnding:b,controlPointEnding:Zs.FullPattern}]:void 0;o.push({type:"CIMSolidStroke",capStyle:y?qa.Round:qa.Butt,enable:!0,width:g,color:Sl(f.color),effects:_})}else!i||e.type!=="line-marker"||e.style!=="cross"&&e.style!=="x"?[a,l]=xE(n):([a,l]=xE(n),o.push({type:"CIMSolidStroke",enable:!0,width:i,color:Sl(s)}));o.push({type:"CIMSolidFill",enable:!0,color:Sl(s)});const d={type:"CIMPolygonSymbol",symbolLayers:o};return{type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,rotation:jt(-e.angle),size:jt(c||6*i),offsetX:jt(e.xoffset),offsetY:jt(e.yoffset),scaleSymbolsProportionally:!1,frame:a,markerGraphics:[{type:"CIMMarkerGraphic",geometry:l,symbol:d}]}]}}static fromCIMHatchFill(e,i){var l;const r=i*(e.separation??$n.CIMHatchFill.separation),n=r/2,s=se(e.lineSymbol);(l=s.symbolLayers)==null||l.forEach((c=>{var d;switch(c.type){case"CIMSolidStroke":c.width!=null&&(c.width*=i),(d=c.effects)==null||d.forEach((f=>{if(f.type==="CIMGeometricEffectDashes"){const y=f.dashTemplate;f.dashTemplate=y==null?void 0:y.map((g=>g*i))}}));break;case"CIMVectorMarker":{c.size!=null&&(c.size*=i);const f=c.markerPlacement;f!=null&&"placementTemplate"in f&&(f.placementTemplate=f.placementTemplate.map((y=>y*i)));break}}}));let o=this._getLineSymbolPeriod(s)||koe;for(;o<koe;)o*=2;const a=o/2;return{type:"CIMVectorMarker",frame:{xmin:-a,xmax:a,ymin:-n,ymax:n},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{paths:[[[-a,0],[a,0]]]},symbol:s}],size:r}}static fetchResources(e,i,r,n=null){return e&&i&&q_e(e,(s=>{Dat(s,i,r),"url"in s&&s.url&&r.push(i.fetchResource(s.url,{signal:n}))})),r}static fetchFonts(e,i,r){if(e&&i){if("symbolLayers"in e&&e.symbolLayers){for(const n of e.symbolLayers)if(n.type==="CIMVectorMarker"&&n.markerGraphics)for(const s of n.markerGraphics)s!=null&&s.symbol&&To.fetchFonts(s.symbol,i,r)}else if(e.type==="CIMTextSymbol"){const{fontFamilyName:n,fontStyleName:s}=e;if(!n||n.toLowerCase()==="calcitewebcoreicons")return;const{style:o,weight:a}=Gve(s),l=qve(e),c=new ci({family:n,style:o,weight:a,decoration:l});r.push(i.loadFont(c).catch((()=>{H3().error(`Unsupported font ${n} in CIM symbol`)})))}}}static _getLineSymbolPeriod(e){if(e){const i=this._getEffectsRepeat(e.effects);if(i)return i;if(e.symbolLayers){for(const r of e.symbolLayers)if(r){const n=this._getEffectsRepeat(r.effects);if(n)return n;switch(r.type){case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":{const s=this._getPlacementRepeat(r.markerPlacement);if(s)return s}}}}}return 0}static _getEffectsRepeat(e){if(e){for(const i of e)if(i)switch(i.type){case"CIMGeometricEffectDashes":{const r=i.dashTemplate;if(r&&r.length){let n=0;for(const s of r)n+=s;return 1&r.length&&(n*=2),n}break}case"CIMGeometricEffectWave":return i.period;default:H3().error(`unsupported geometric effect type ${i.type}`)}}return 0}static _getPlacementRepeat(e){if(e)switch(e.type){case"CIMMarkerPlacementAlongLineSameSize":case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineVariableSize":{const i=e.placementTemplate;if(i&&i.length){let r=0;for(const n of i)r+=+n;return 1&i.length&&(r*=2),r}break}}return 0}static fromCIMInsidePolygon(e){const i=e.markerPlacement,r={...e};r.markerPlacement=null,r.anchorPoint=null;const n=Math.abs(i.stepX),s=Math.abs(i.stepY),o=(i.randomness??100)/100;let a,l,c,d;if(i.gridType==="Random"){const f=ji(Lje),y=Math.max(Math.floor(f/n),1),g=Math.max(Math.floor(f/s),1);a=y*n/2,l=g*s/2,c=2*l;const b=new j7(i.seed),_=o*n/1.5,x=o*s/1.5;d=[];for(let E=0;E<y;E++)for(let C=0;C<g;C++){const k=E*n-a+_*(.5-b.getFloat()),O=C*s-l+x*(.5-b.getFloat());d.push({x:k,y:O}),E===0&&d.push({x:k+2*a,y:O}),C===0&&d.push({x:k,y:O+2*l})}}else i.shiftOddRows===!0?(a=n/2,l=s,c=2*s,d=[{x:-a,y:0},{x:a,y:0},{x:0,y:l},{x:0,y:-l}]):(a=n/2,l=s/2,c=s,d=[{x:-n,y:0},{x:0,y:-s},{x:-n,y:-s},{x:0,y:0},{x:n,y:0},{x:0,y:s},{x:n,y:s},{x:-n,y:s},{x:n,y:-s}]);return{type:"CIMVectorMarker",frame:{xmin:-a,xmax:a,ymin:-l,ymax:l},markerGraphics:d.map((f=>({type:"CIMMarkerGraphic",geometry:f,symbol:{type:"CIMPointSymbol",symbolLayers:[r]}}))),size:c}}}function q_e(t,e){if(t)switch(t.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const i=t.symbolLayers;if(!i)return;for(const r of i)if(e(r),r.type==="CIMVectorMarker"){const n=r.markerGraphics;if(!n)continue;for(const s of n)if(s){const o=s.symbol;o&&q_e(o,e)}}break}}}const H_e=t=>{if(!t)return qa.Butt;switch(t){case"butt":return qa.Butt;case"square":return qa.Square;case"round":return qa.Round}},W_e=t=>{if(!t)return Lc.Miter;switch(t){case"miter":return Lc.Miter;case"round":return Lc.Round;case"bevel":return Lc.Bevel}},Pat=t=>{if(t==null)return"Center";switch(t){case"left":return"Left";case"right":return"Right";case"center":return"Center"}},Aat=t=>{if(t==null)return"Center";switch(t){case"baseline":return"Baseline";case"top":return"Top";case"middle":return"Center";case"bottom":return"Bottom"}},Sl=t=>{if(!t)return[0,0,0,0];const{r:e,g:i,b:r,a:n}=t;return[e,i,r,255*n]},Lat=(t,e)=>{const i=Rat(e),r=Oat(t);return i&&r?`${i}-${r}`:`${i}${r}`},Rat=t=>{if(!t)return"";switch(t.toLowerCase()){case"bold":case"bolder":return"bold"}return""},Oat=t=>{if(!t)return"";switch(t.toLowerCase()){case"italic":case"oblique":return"italic"}return""},n7=(t,e)=>{const i=fe("safari")?.001:0,r=e==="butt";switch(t){case"dash":case"esriSLSDash":return r?[4,3]:[3,4];case"dash-dot":case"esriSLSDashDot":return r?[4,3,1,3]:[3,4,i,4];case"dot":case"esriSLSDot":return r?[1,3]:[i,4];case"long-dash":case"esriSLSLongDash":return r?[8,3]:[7,4];case"long-dash-dot":case"esriSLSLongDashDot":return r?[8,3,1,3]:[7,4,i,4];case"long-dash-dot-dot":case"esriSLSDashDotDot":return r?[8,3,1,3,1,3]:[7,4,i,4,i,4];case"short-dash":case"esriSLSShortDash":return r?[4,1]:[3,2];case"short-dash-dot":case"esriSLSShortDashDot":return r?[4,1,1,1]:[3,2,i,2];case"short-dash-dot-dot":case"esriSLSShortDashDotDot":return r?[4,1,1,1,1,1]:[3,2,i,2,i,2];case"short-dot":case"esriSLSShortDot":return r?[1,1]:[i,2];case"solid":case"esriSLSSolid":case"none":return H3().error("Unexpected: style does not require rasterization"),[0,0];default:return H3().error(`Tried to rasterize SLS, but found an unexpected style: ${t}!`),[0,0]}};function Fat(t){return t.symbolLayers!==void 0}const xE=(t,e=100)=>{const i=e/2;let r,n;const s=t;if(s==="circle"||s==="esriSMSCircle"){let a=Math.acos(1-.25/i),l=Math.ceil(G_e/a/4);l===0&&(l=1),a=Iat/l,l*=4;const c=[];c.push([i,0]);for(let d=1;d<l;d++)c.push([i*Math.cos(d*a),-i*Math.sin(d*a)]);c.push([i,0]),r={rings:[c]},n={xmin:-i,ymin:-i,xmax:i,ymax:i}}else if(s==="cross"||s==="esriSMSCross")r={paths:[[[0,i],[0,-i]],[[i,0],[-i,0]]]},n={xmin:-i,ymin:-i,xmax:i,ymax:i};else if(s==="diamond"||s==="esriSMSDiamond")r={rings:[[[-i,0],[0,i],[i,0],[0,-i],[-i,0]]]},n={xmin:-i,ymin:-i,xmax:i,ymax:i};else if(s==="square"||s==="esriSMSSquare")r={rings:[[[-i,-i],[-i,i],[i,i],[i,-i],[-i,-i]]]},n={xmin:-i,ymin:-i,xmax:i,ymax:i};else if(s==="x"||s==="esriSMSX")r={paths:[[[i,i],[-i,-i]],[[i,-i],[-i,i]]]},n={xmin:-i,ymin:-i,xmax:i,ymax:i};else if(s==="triangle"||s==="esriSMSTriangle"){const o=e*.5773502691896257,a=-o,l=2/3*e,c=l-e;r={rings:[[[a,c],[0,l],[o,c],[a,c]]]},n={xmin:a,ymin:c,xmax:o,ymax:l}}else s==="arrow"&&(r={rings:[[[-50,50],[50,0],[-50,-50],[-33,-20],[-33,20],[-50,50]]]},n={xmin:-i,ymin:-i,xmax:i,ymax:i});return[n,r]},Nat=t=>t==="vertical"||t==="horizontal"||t==="cross"||t==="esriSFSCross"||t==="esriSFSVertical"||t==="esriSFSHorizontal";function Dat(t,e,i){if(!(!t.effects||e.geometryEngine!=null)){if(e.geometryEnginePromise)return void i.push(e.geometryEnginePromise);UGe(t.effects)&&(e.geometryEnginePromise=BGe(),i.push(e.geometryEnginePromise),e.geometryEnginePromise.then((r=>e.geometryEngine=r)))}}function Aoe(t){if(!t)return null;let e=null;const{cap:i,color:r,join:n,miterLimit:s,style:o,width:a}=t;return o!=="solid"&&o!=="none"&&o!=="esriSLSSolid"&&o!=="esriSLSNull"&&(e=[{type:"CIMGeometricEffectDashes",dashTemplate:n7(o,i),lineDashEnding:"NoConstraint",scaleDash:!0,offsetAlongLine:null}]),{type:"CIMSolidStroke",color:o!=="esriSLSNull"&&o!=="none"?Sl(r):[0,0,0,0],capStyle:H_e(i),joinStyle:W_e(n),miterLimit:s,width:a,effects:e}}let zat=class{constructor(){this._resourceMap=new Map,this._inFlightResourceMap=new Map,this.geometryEngine=null,this.geometryEnginePromise=null}destroy(){this._inFlightResourceMap.clear(),this._resourceMap.clear()}getResource(e){return this._resourceMap.get(e)??null}async fetchResource(e,i){const r=this._resourceMap.get(e);if(r)return{width:r.width,height:r.height};let n=this._inFlightResourceMap.get(e);return n?n.then((s=>({width:s.width,height:s.height}))):(n=fUe(e,i),this._inFlightResourceMap.set(e,n),n.then((s=>(this._inFlightResourceMap.delete(e),this._resourceMap.set(e,s),{width:s.width,height:s.height})),(()=>({width:0,height:0}))))}deleteResource(e){this._inFlightResourceMap.delete(e),this._resourceMap.delete(e)}loadFont(e){return dst(e)}};function FSt(t){return t?{originPosition:t.originPosition==="upper-left"?"upperLeft":t.originPosition==="lower-left"?"lowerLeft":t.originPosition,scale:t.tolerance?[t.tolerance,t.tolerance,1,1]:[1,1,1,1],translate:t.extent!=null?[t.extent.xmin,t.extent.ymax,t.extent.zmin??0,t.extent.mmin??0]:[0,0,0,0]}:null}function Vat(t){return t.originPosition==="lowerLeft"&&t.scale.length===4&&t.translate.length===4}function Iw(t){if(Vat(t))return t;const{originPosition:e,scale:i,translate:r}=t,n=i[0]??1,s=i[1]??1;return{originPosition:"lowerLeft",scale:[n,e==="lowerLeft"?s:-s,i[2]??1,i[3]??1],translate:[r[0]??0,r[1]??0,r[2]??0,r[3]??0]}}function om({scale:t,translate:e},i){return Math.round((i-e[0])/t[0])}function am({scale:t,translate:e},i){return Math.round((i-e[1])/t[1])}function LM({scale:t,translate:e},i){return Math.round(((i??0)-e[2])/t[2])}function RM({scale:t,translate:e},i){return i?Math.round((i-e[3])/t[3]):0}function Z_e(t,e){return t&&e?Gat:t&&!e?Uat:!t&&e?Bat:jat}const jat=(t,e)=>{const i=[];if(!e.length)return null;const r=e[0];let n=om(t,r[0]),s=am(t,r[1]);i.push([n,s]);for(let o=1;o<e.length;o++){const[a,l]=e[o],c=om(t,a),d=am(t,l);c===n&&d===s||i.push([c-n,d-s]),n=c,s=d}return i},Uat=(t,e)=>{const i=[];if(!e.length)return null;const r=e[0];let n=om(t,r[0]),s=am(t,r[1]),o=LM(t,r[2]);i.push([n,s,o]);for(let a=1;a<e.length;a++){const[l,c,d]=e[a],f=om(t,l),y=am(t,c),g=LM(t,d);f===n&&y===s&&g===o||i.push([f-n,y-s,g]),n=f,s=y,o=g}return i},Bat=(t,e)=>{const i=[];if(!e.length)return null;const r=e[0];let n=om(t,r[0]),s=am(t,r[1]),o=RM(t,r[2]);i.push([n,s,o]);for(let a=1;a<e.length;a++){const[l,c,d]=e[a],f=om(t,l),y=am(t,c),g=RM(t,d);f===n&&y===s&&g===o||i.push([f-n,y-s,g]),n=f,s=y,o=g}return i},Gat=(t,e)=>{const i=[];if(!e.length)return null;const r=e[0];let n=om(t,r[0]),s=am(t,r[1]),o=LM(t,r[2]),a=RM(t,r[3]);i.push([n,s,o,a]);for(let l=1;l<e.length;l++){const[c,d,f,y]=e[l],g=om(t,c),b=am(t,d),_=LM(t,f),x=RM(t,y);g===n&&b===s&&_===o&&x===a||i.push([g-n,b-s,_,x]),n=g,s=b,o=_,a=x}return i};function qat(t,e,i,r){const n=[],s=Z_e(i,r);for(let o=0;o<e.length;o++){const a=s(t,e[o]);a&&a.length>=3&&n.push(a)}return n.length?n:null}function Hat(t,e,i,r){const n=[],s=Z_e(i,r);for(let o=0;o<e.length;o++){const a=s(t,e[o]);a&&a.length>=2&&n.push(a)}return n.length?n:null}function V2({scale:t,translate:e},i){return i*t[0]+e[0]}function j2({scale:t,translate:e},i){return i*t[1]+e[1]}function OM({scale:t,translate:e},i){return(i??0)*t[2]+e[2]}function FM({scale:t,translate:e},i){return i?i*t[3]+e[3]:0}function $W(t,e){return t&&e?Yat:t&&!e?Zat:!t&&e?Jat:Wat}const Wat=(t,e)=>{const i=new Array(e.length);if(!e.length)return i;const r=e[0];let n=V2(t,r[0]),s=j2(t,r[1]);i[0]=[n,s];const{scale:o,originPosition:a}=t,l=o[0],c=a==="lowerLeft"?o[1]:-o[1];for(let d=1;d<e.length;d++){const[f,y]=e[d];n+=l*f,s+=c*y,i[d]=[n,s]}return i},Zat=(t,e)=>{const i=new Array(e.length);if(!e.length)return i;const r=e[0];let n=V2(t,r[0]),s=j2(t,r[1]);i[0]=[n,s,OM(t,r[2])];const{scale:o,originPosition:a}=t,l=o[0],c=a==="lowerLeft"?o[1]:-o[1];for(let d=1;d<e.length;d++){const[f,y,g]=e[d];n+=l*f,s+=c*y,i[d]=[n,s,OM(t,g)]}return i},Jat=(t,e)=>{const i=new Array(e.length);if(!e.length)return i;const r=e[0];let n=V2(t,r[0]),s=j2(t,r[1]);i[0]=[n,s,FM(t,r[2])];const{scale:o,originPosition:a}=t,l=o[0],c=a==="lowerLeft"?o[1]:-o[1];for(let d=1;d<e.length;d++){const[f,y,g]=e[d];n+=l*f,s+=c*y,i[d]=[n,s,FM(t,g)]}return i},Yat=(t,e)=>{const i=new Array(e.length);if(!e.length)return i;const r=e[0];let n=V2(t,r[0]),s=j2(t,r[1]);i[0]=[n,s,OM(t,r[2]),FM(t,r[3])];const{scale:o,originPosition:a}=t,l=o[0],c=a==="lowerLeft"?o[1]:-o[1];for(let d=1;d<e.length;d++){const[f,y,g,b]=e[d];n+=l*f,s+=c*y,i[d]=[n,s,OM(t,g),FM(t,b)]}return i};function J_e(t,e,i){const r=new Array(i.length);for(let n=0;n<i.length;n++)r[n]=e(t,i[n]);return r}function NSt(t,e,i){const r=Iw(t);return e.x=om(r,i.x),e.y=am(r,i.y),i.z!=null&&(e.z=LM(r,i.z)),i.m!=null&&(e.m=RM(r,i.m)),e}function DSt(t,e,i){const r=qat(Iw(t),i.rings,i.hasZ,i.hasM);return r?(e.rings=r,e.hasZ=i.hasZ??!1,e.hasM=i.hasM??!1,e):null}function zSt(t,e,i){const r=Hat(Iw(t),i.paths,i.hasZ,i.hasM);return r?(e.paths=r,e.hasZ=i.hasZ??!1,e.hasM=i.hasM??!1,e):null}function Xat(t,e,i,r=(i==null?void 0:i.hasZ)??!1,n=(i==null?void 0:i.hasM)??!1){if(i!=null){const s=Iw(t);e.points=$W(r,n)(s,i.points),e.hasZ=r,e.hasM=n}return e}function Kat(t,e,i,r=(i==null?void 0:i.z)!=null,n=(i==null?void 0:i.m)!=null){if(i==null)return e;const s=Iw(t);return e.x=V2(s,i.x),e.y=j2(s,i.y),r&&(e.z=OM(s,i.z)),n&&(e.m=FM(s,i.m)),e}function Qat(t,e,i,r=(i==null?void 0:i.hasZ)??!1,n=(i==null?void 0:i.hasM)??!1){if(i!=null){const s=Iw(t);e.rings=J_e(s,$W(r,n),i.rings),e.hasZ=r,e.hasM=n}return e}function elt(t,e,i,r=(i==null?void 0:i.hasZ)??!1,n=(i==null?void 0:i.hasM)??!1){if(i!=null){const s=Iw(t);e.paths=J_e(s,$W(r,n),i.paths),e.hasZ=r,e.hasM=n}return e}function Y_e(t,e,i,r,n,s){if(t==null)return null;const o=t.references("geometry")&&s?tlt(e,r,s):e,a=t.repurposeFeature(o,n);try{return t.evaluate(a,i)}catch(l){return Ie.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",l),null}}const IV=new Map;function tlt(t,e,i){const{transform:r,hasZ:n,hasM:s}=i;IV.has(e)||IV.set(e,ilt(e));const o=IV.get(e)(t.geometry,r,n,s);return{...t,geometry:o}}function ilt(t){const e={};switch(t){case"esriGeometryPoint":return(i,r,n,s)=>Kat(r,e,i,n,s);case"esriGeometryPolygon":return(i,r,n,s)=>Qat(r,e,i,n,s);case"esriGeometryPolyline":return(i,r,n,s)=>elt(r,e,i,n,s);case"esriGeometryMultipoint":return(i,r,n,s)=>Xat(r,e,i,n,s);default:return Ie.getLogger("esri.views.2d.support.arcadeOnDemand").error(new ie("mapview-arcade",`Unable to handle geometryType: ${t}`)),i=>i}}const VSt=Object.freeze(Object.defineProperty({__proto__:null,default:Y_e},Symbol.toStringTag,{value:"Module"})),rlt=t=>{if(!t)return[0,0,0,0];const{r:e,g:i,b:r,a:n}=t;return[e,i,r,255*n]};var or;let TW=(or=class{static findApplicableOverrides(e,i,r){if(e&&i){if(e.primitiveName){let n=!1;for(const s of r)if(s.primitiveName===e.primitiveName){n=!0;break}if(!n)for(const s of i)s.primitiveName===e.primitiveName&&r.push(s)}switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(e.effects)for(const n of e.effects)or.findApplicableOverrides(n,i,r);if(e.symbolLayers)for(const n of e.symbolLayers)or.findApplicableOverrides(n,i,r);break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":case"CIMSolidFill":case"CIMPictureFill":case"CIMHatchFill":case"CIMGradientFill":case"CIMVectorMarker":case"CIMCharacterMarker":case"CIMPictureMarker":if(e.effects)for(const n of e.effects)or.findApplicableOverrides(n,i,r);if(e.markerPlacement&&or.findApplicableOverrides(e.markerPlacement,i,r),e.type==="CIMVectorMarker"){if(e.markerGraphics)for(const n of e.markerGraphics)or.findApplicableOverrides(n,i,r),or.findApplicableOverrides(n.symbol,i,r)}else e.type==="CIMCharacterMarker"?or.findApplicableOverrides(e.symbol,i,r):e.type==="CIMHatchFill"?or.findApplicableOverrides(e.lineSymbol,i,r):e.type==="CIMPictureMarker"&&or.findApplicableOverrides(e.animatedSymbolProperties,i,r)}}}static findEffectOverrides(e,i){if(!e)return null;if(e.type==="CIMGeometricEffectDashes"&&Hve(e),!i||!e.primitiveName)return{type:"cim-effect-param",effect:e,overrides:[]};const r=lre(e),n=e.primitiveName,s=[];for(const o of i)o.primitiveName===n&&s.push(lre(o));return{type:"cim-effect-param",effect:r,overrides:tqe(s)}}static async resolveSymbolOverrides(e,i,r,n,s,o,a){if(!(e!=null&&e.symbol))return null;let{symbol:l,primitiveOverrides:c}=e;const d=!!c;if(!d&&!n)return l;l=se(l),c=se(c);let f=!0;if(i||(i={attributes:{}},f=!1),d){if(f||(c=c.filter((y=>{var g;return!((g=y.valueExpressionInfo)!=null&&g.expression.includes("$feature"))}))),a||(c=c.filter((y=>{var g;return!((g=y.valueExpressionInfo)!=null&&g.expression.includes("$view"))}))),c.length>0){const y=ZGe(i.attributes),g={spatialReference:r,fields:y,geometryType:s};await or.createRenderExpressions(c,g),or.evaluateOverrides(c,i,s??"esriGeometryPoint",o,a,new hM(y))}or.applyOverrides(l,c)}return n&&or.applyDictionaryTextOverrides(l,i,n,null),l}static async createRenderExpressions(e,i){const r=[];for(const n of e){const s=n.valueExpressionInfo;if(!s||or._expressionToRenderExpression.has(s.expression))continue;const o=AGe(s.expression,i.spatialReference);r.push(o),o.then((a=>or._expressionToRenderExpression.set(s.expression,a)))}r.length>0&&await Promise.all(r)}static evaluateOverrides(e,i,r,n,s,o){const a={$view:{scale:s==null?void 0:s.scale}};for(const l of e){l.value&&typeof l.value=="object"&&Mbe(l.value)&&(l.propertyName==="Color"||l.propertyName==="StrokeColor")&&(l.value=rlt(l.value));const c=l.valueExpressionInfo;if(!c)continue;const d=or._expressionToRenderExpression.get(c.expression);d&&(l.value=Y_e(d,i,a,r,o,n))}}static applyDictionaryTextOverrides(e,i,r,n,s="Normal"){if(e!=null&&e.type)switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":case"CIMTextSymbol":{const o=e.symbolLayers;if(!o)return;for(const a of o)a&&a.type==="CIMVectorMarker"&&or.applyDictionaryTextOverrides(a,i,r,n,e.type==="CIMTextSymbol"?e.textCase:s)}break;case"CIMVectorMarker":{const o=e.markerGraphics;if(!o)return;for(const a of o)a&&or.applyDictionaryTextOverrides(a,i,r,n)}break;case"CIMMarkerGraphic":{const o=e.textString;if(o&&o.includes("[")){const a=zGe(o,r);e.textString=VGe(i,a,n,s)}}}}static applyOverrides(e,i,r,n){if(e.primitiveName){for(const s of i)if(s.primitiveName===e.primitiveName){const o=k2(s.propertyName);if(n&&n.push({cim:e,nocapPropertyName:o,value:e[o]}),r){let a=!1;for(const l of r)l.primitiveName===e.primitiveName&&(a=!0);a||r.push(s)}s.value!=null&&(e[o]=s.value)}}switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(e.effects)for(const s of e.effects)or.applyOverrides(s,i,r,n);if(e.symbolLayers)for(const s of e.symbolLayers)or.applyOverrides(s,i,r,n);break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMSolidFill":case"CIMVectorMarker":if(e.effects)for(const s of e.effects)or.applyOverrides(s,i,r,n);if(e.type==="CIMVectorMarker"&&e.markerGraphics)for(const s of e.markerGraphics)or.applyOverrides(s,i,r,n),or.applyOverrides(s.symbol,i,r,n)}}static restoreOverrides(e){for(const i of e)i.cim[i.nocapPropertyName]=i.value}static buildOverrideKey(e){let i="";for(const r of e)r.value!==void 0&&(i+=`${r.primitiveName}${r.propertyName}${JSON.stringify(r.value)}`);return i}static toValue(e,i){if(e==="DashTemplate")return i.split(" ").map((r=>Number(r)));if(e==="Color"){const r=new _e(i).toRgba();return r[3]*=255,r}return i}},or._expressionToRenderExpression=new Map,or);const nlt=Object.freeze(Object.defineProperty({__proto__:null,OverrideHelper:TW},Symbol.toStringTag,{value:"Module"})),slt=96/72;let X_e=class{constructor(e){this._spatialReference=e,this._imageDataCanvas=null,this._cimResourceManager=new zat}get _canvas(){return this._imageDataCanvas||(this._imageDataCanvas=document.createElement("canvas")),this._imageDataCanvas}get resourceManager(){return this._cimResourceManager}async rasterizeCIMSymbolAsync(e,i,r,n,s,o,a,l,c,d){if(!e)return null;const{data:f}=e;if(!f||f.type!=="CIMSymbolReference"||!f.symbol)return null;const{symbol:y}=f;o||(o=n3(y));const g=await TW.resolveSymbolOverrides(f,i,this._spatialReference,s,o,a,l),b=this._cimResourceManager,_=[];To.fetchResources(g,b,_),To.fetchFonts(g,b,_),_.length>0&&await Promise.all(_);const{width:x,height:E}=r;let C=Loe(o,x,E,n,d);const k=To.getEnvelope(g,C,b);if(!k)return null;k.x===1/0&&(k.x=x+2),k.y===1/0&&(k.y=-E/2),k.width===-1/0&&(k.width=x),k.height===-1/0&&(k.height=E);let O=1,D=0,B=0;switch(y.type){case"CIMPointSymbol":case"CIMTextSymbol":{let Z=1;k.width>x&&(Z=x/k.width);let X=1;k.height>E&&(X=E/k.height),n==="preview"&&(k.width<x&&(Z=x/k.width),k.height<E&&(X=E/k.height)),O=Math.min(Z,X),D=k.x+k.width/2,B=k.y+k.height/2}break;case"CIMLineSymbol":if(d){B=k.y+k.height/2,D=k.x+k.width/2;const Z=k.width-x,X=k.height-E;C={paths:q3(C.paths,{xmin:-1*k.width/2+Z,xmax:k.width/2-Z,ymin:-1*k.height/2+X,ymax:k.height/2-X,width:k.width-2*Z,height:k.height-2*X})}}else{(c||k.height>E)&&(O=E/k.height),B=k.y+k.height/2;const Z=k.x*O+x/2,X=(k.x+k.width)*O+x/2,ee=Xs(C)?C.paths:bn(C)?C.rings:null;if(ee===null)throw new Error("Bad geometry, can't rasterise symbol!");ee[0][0][0]-=Z/O,ee[0][2][0]-=(X-x)/O}break;case"CIMPolygonSymbol":if(d){B=k.y+k.height/2,D=k.x+k.width/2;const Z=k.width-x,X=k.height-E;C={paths:q3(C.rings,{xmin:-1*k.width/2+Z,xmax:k.width/2-Z,ymin:-1*k.height/2+X,ymax:k.height/2-X,width:k.width-2*Z,height:k.height-2*X})}}else{D=k.x+k.width/2,B=k.y+k.height/2;const Z=k.x*O+x/2,X=(k.x+k.width)*O+x/2,ee=k.y*O+E/2,pe=(k.y+k.height)*O+E/2,{rings:he}=C;Z<0&&(he[0][0][0]-=Z,he[0][3][0]-=Z,he[0][4][0]-=Z),ee<0&&(he[0][0][1]+=ee,he[0][1][1]+=ee,he[0][4][1]+=ee),X>x&&(he[0][1][0]-=X-x,he[0][2][0]-=X-x),pe>E&&(he[0][2][1]+=pe-E,he[0][3][1]+=pe-E)}}const j={type:"cim",data:{type:"CIMSymbolReference",symbol:g}};return this.rasterize(j,x,E,D,B,O,o,1,C)}rasterize(e,i,r,n,s,o,a,l=0,c=null,d=window.devicePixelRatio||1){const{data:f}=e;if(!f||f.type!=="CIMSymbolReference"||!f.symbol)return null;const{symbol:y}=f,g=this._canvas,b=d*slt;g.width=i*b,g.height=r*b,a||(a=n3(y)),c||(c=Loe(a,i,r,"legend")),g.width+=2*l,g.height+=2*l;const _=g.getContext("2d",{willReadFrequently:!0}),x=Ms.createIdentity();return x.translate(-n,-s),x.scale(o*b,-o*b),x.translate(i*b/2+l,r*b/2+l),_.clearRect(0,0,g.width,g.height),new V_e(_,this._cimResourceManager,x,!0).drawSymbol(y,c),_.getImageData(0,0,g.width,g.height)}};function olt(t,e,i,r){return e==="esriGeometryPolygon"?{rings:Soe(q3(t.rings,{xmin:0,ymin:0,width:i,height:r}),-1*i/2,-1*r/2)}:e==="esriGeometryPolyline"?{paths:Soe(q3(t.paths,{xmin:0,ymin:0,width:i,height:r}),-1*i/2,-1*r/2)}:null}function Loe(t,e,i,r,n){const o=-e/2+1,a=e/2-1,l=i/2-1,c=-i/2+1;if(n&&(t==="esriGeometryPolygon"||t==="esriGeometryPolyline")){const d=olt(n,t,e,i);if(d)return d}switch(t){case"esriGeometryPoint":return{x:0,y:0};case"esriGeometryPolyline":return{paths:[[[o,0],[0,0],[a,0]]]};default:return r==="legend"?{rings:[[[o,l],[a,0],[a,c],[o,c],[o,l]]]}:{rings:[[[o,l],[a,l],[a,c],[o,c],[o,l]]]}}}const USt=Object.freeze(Object.defineProperty({__proto__:null,CIMSymbolRasterizer:X_e},Symbol.toStringTag,{value:"Module"})),SR=new X_e(null),kA=ji(sn.size),Roe=ji(sn.maxSize),CV=ji(sn.lineWidth),alt=1;async function llt(t,e,i){const r=e==null?void 0:e.size;let n=r!=null&&typeof r=="object"&&"width"in r?r.width:r,s=r!=null&&typeof r=="object"&&"height"in r?r.height:r;if(!n||!s)if(i==="esriGeometryPolygon")n=s=e.maxSize?Math.min(e.maxSize,kA):kA;else{const o=await EW(t,e,i);o&&(n=o.width,s=o.height),i==="esriGeometryPolyline"&&(n=e.maxSize?Math.min(e.maxSize,CV):CV),n=n!=null&&isFinite(n)?Math.min(n,Roe):kA,s=s!=null&&isFinite(s)?Math.max(Math.min(s,Roe),alt):kA}return e.style==="legend"&&i==="esriGeometryPolyline"&&(n=CV),{width:n,height:s}}async function EW(t,e={},i){var c;const r=e.cimOptions||e;i??(i=r.geometryType||n3((c=t==null?void 0:t.data)==null?void 0:c.symbol));const{feature:n,fieldMap:s,viewParams:o}=r,a=await TW.resolveSymbolOverrides(t.data,n,null,s,i,null,o);if(!a)return null;(t=t.clone()).data={type:"CIMSymbolReference",symbol:a},t.data.primitiveOverrides=void 0;const l=[];return To.fetchResources(a,SR.resourceManager,l),To.fetchFonts(a,SR.resourceManager,l),l.length>0&&await Promise.all(l),To.getEnvelope(a,null,SR.resourceManager)}async function clt(t,e={}){var B,j;const{node:i,opacity:r,symbolConfig:n}=e,s=n!=null&&typeof n=="object"&&"isSquareFill"in n&&n.isSquareFill,o=e.cimOptions||e,a=o.geometryType||n3((B=t==null?void 0:t.data)==null?void 0:B.symbol),l=await llt(t,e,a),{feature:c,fieldMap:d}=o,f=e!=null&&e.geometry||s||a!=="esriGeometryPolygon"?"preview":"legend";let y=l;const g=l;if(e!=null&&e.geometry&&(a==="esriGeometryPolygon"||a==="esriGeometryPolyline")&&(pi(l.width)<200||pi(l.height)<200)){const X=l.width>l.height?ji(200)*l.height/l.width:ji(200);y={width:l.width>l.height?ji(200):ji(200)*l.width/l.height,height:X}}const b=await SR.rasterizeCIMSymbolAsync(t,c,y,f,d,a,null,o.viewParams,o.allowScalingUp,(j=e==null?void 0:e.geometry)==null?void 0:j.toJSON());if(!b)return null;const{width:_,height:x}=b,E=document.createElement("canvas");E.width=_,E.height=x,E.getContext("2d").putImageData(b,0,0);const C=pi(g.width),k=pi(g.height),O=new Image(C,k);O.src=E.toDataURL(),O.ariaLabel=e.ariaLabel??null,O.alt=e.ariaLabel??"",r!=null&&(O.style.opacity=`${r}`);let D=O;if(e.effectView!=null){const Z={shape:{type:"image",x:0,y:0,width:C,height:k,src:O.src},fill:null,stroke:null,offset:[0,0]};D=Y$([[Z]],[C,k],e)}return i&&D&&i.appendChild(D),D}const ult=Object.freeze(Object.defineProperty({__proto__:null,getCIMSymbolPreviewSize:EW,previewCIMSymbol:clt},Symbol.toStringTag,{value:"Module"})),s7=30,o7=12,a7=24,K_e=[255,255,255],W3=[200,200,200],mb=[128,128,128],dlt=20,hlt=5;function plt(t){return t.declaredClass==="esri.symbols.SimpleMarkerSymbol"}function flt(t){return t.declaredClass==="esri.symbols.PictureMarkerSymbol"}function mlt(t){return t.declaredClass==="esri.symbols.SimpleLineSymbol"}function ylt(t){return t.declaredClass==="esri.symbols.TextSymbol"}function glt(t,e){const i=t.length-1;return t.map(((r,n)=>fbe(r,n,i,e)))}async function vlt(t,e,i,r,n,s,o){const a=e.legendOptions,l=a==null?void 0:a.customValues,c=o||await _lt(t,i),d=e.stops,f=!!c,y=!!l,g=e.minSize!=null&&e.maxSize!=null,b=d&&d.length>1,_=!!e.target;if(!f||!y&&!(g||b&&!_))return;const x=eD(c);let E=!1,C=null,k=null;C=x&&!b?h3([e.minDataValue,e.maxDataValue]):l??await Slt(e,c,r,n==null?void 0:n.type);const O=t==null?void 0:t.authoringInfo,D=(O==null?void 0:O.type)==="univariate-color-size",B=D&&(O==null?void 0:O.univariateTheme)==="above-and-below",j=!!Kh(t,"reference-size"),Z=!!Kh(t,"spike");if(!C&&b&&(C=d.map((ne=>ne.value)),E=d.some((ne=>!!ne.label)),t.type==="flow"&&(C=h3(C)),E&&(k=d.map((ne=>ne.label)))),x&&C!=null&&(C==null?void 0:C.length)>2&&!B&&(C=[C[0],C[C.length-1]]),!C)return null;D&&(C==null?void 0:C.length)!==5&&(C=t1e({minSize:C[0],maxSize:C[C.length-1]}));const X=x?blt(t,C):null,ee=hYe(c),pe=E?null:glt(C,s);return(await Promise.all(C.map((async(ne,re)=>{let ke=x?X[re]:await V1(e,c,ne,r,n==null?void 0:n.type),Fe=ke;j&&(ke*=a7/e.maxSize||1,Fe=a7);const Ae=Elt(c,ke,t,re);return Z&&Ae.type==="cim"&&(Fe=await EW(Ae)),{value:ne,symbol:Ae,label:E?k[re]:pe[re],size:Fe,outlineSize:ee}})))).reverse()}function blt(t,e){const i=t==null?void 0:t.authoringInfo,r=(i==null?void 0:i.type)==="univariate-color-size";let n=[o7,s7];if(r){const s=e[0],o=e[e.length-1],a=o7,l=s7;n=e.map((c=>a+(c-s)/(o-s)*(l-a)))}return r&&(i==null?void 0:i.univariateTheme)==="below"&&n.reverse(),n}function wlt(t,e){var o;const i=t.classBreakInfos,r=i.length,n=r<2||!(e>=2)?i[0].symbol.clone():i[r-1].symbol.clone();return((o=t.visualVariables)==null?void 0:o.some((a=>a.type==="color")))&&(n.type.includes("3d")?Q_e(n):e1e(n)),n}async function _lt(t,e){var n,s,o,a,l;if(t.type==="flow")return mbe(t,e);if(t.type==="pie-chart")return new Fr({color:null,outline:(n=t.outline)!=null&&n.width?t.outline:new Xr});let i=null,r=null;if(t.type==="simple")i=t.symbol;else if(t.type==="class-breaks"){const c=t.classBreakInfos;i=c&&c[0]&&c[0].symbol,r=c.length>1}else if(t.type==="unique-value"){const c=t.uniqueValueInfos;i=(s=c==null?void 0:c[0])==null?void 0:s.symbol,r=c!=null&&c.length>1}if(!i||xlt(i))return null;if(i=i.clone(),e||r)if(i.type.includes("3d"))Q_e(i);else if(Kh(t,"reference-size")&&i.type==="cim")gW(i,{color:e??(t.type!=="class-breaks"?new _e(W3):null)});else if(Kh(t,"spike")&&i.type==="cim"){const c=new _e(W3),d=new _e(mb),f=((o=i.data.symbol)==null?void 0:o.type)==="CIMPointSymbol"?i.data.symbol:null,y=!!((l=(a=f==null?void 0:f.symbolLayers)==null?void 0:a.find((({type:_})=>_==="CIMSolidStroke")))!=null&&l.colorLocked);let g,b=e??void 0;if(b){const _=Nbe(b),x=Yq();(!x&&_>225||x&&_<25)&&(b=c,g=y?d:c)}else b=c,g=y?d:c;y_e(i,{color:b,strokeColor:g})}else e1e(i);return i}function xlt(t){var e;return vp(t)?((e=t.symbolLayers)==null?void 0:e.some((i=>(i==null?void 0:i.type)==="fill")))??!1:(t==null?void 0:t.type.includes("fill"))??!1}function Q_e(t){t.type==="line-3d"?t.symbolLayers.forEach((e=>{e.material={color:mb}})):t.symbolLayers.forEach((e=>{var i;e.type!=="icon"||(i=e.resource)!=null&&i.href?e.material={color:W3}:(e.material={color:K_e},e.outline={color:mb,size:1.5})}))}function e1e(t){var i,r;const e=Yq();t.type==="cim"?sbe(t,new _e(W3)):t.type.includes("line")?t.color=mb:(t.color=e?mb:K_e,t.type==="simple-marker"&&(t.outline?((r=(i=t.outline)==null?void 0:i.color)==null?void 0:r.toHex())==="#ffffff"&&(t.outline.color=mb):t.outline={color:mb,width:1.5}))}async function Slt(t,e,i,r){const n=(await ye(async()=>{const{getSizeRangeAtScale:a}=await Promise.resolve().then(()=>Sw);return{getSizeRangeAtScale:a}},void 0)).getSizeRangeAtScale(t,i,r),s=n&&t1e(n);if(!n||!s)return;let o=s.map((a=>$lt(a,t,n)));o=h3(o);for(let a=1;a<o.length-1;a++){const l=await Tlt(t,e,o[a],o[a-1],i,r);l&&(o[a]=l[0],s[a]=l[1])}return o}function t1e(t){const e=t.minSize,i=t.maxSize,r=hlt,n=(i-e)/(r-1),s=[];for(let o=0;o<r;o++)s.push(e+n*o);return s}function $lt(t,e,i){const r=i.minSize,n=i.maxSize,s=e.minDataValue,o=e.maxDataValue;let a;return t<=r?a=s:t>=n?a=o:a=(t-r)/(n-r)*(o-s)+s,a}async function Tlt(t,e,i,r,n,s){const o=await V1(t,e,i,n,s),a=await V1(t,e,r,n,s),l=d3(i),c=l.fractional,d=dlt;let f=l.integer,y=null,g=null;i>0&&i<1&&(y=10**c,f=d3(i*=y).integer);for(let b=f-1;b>=0;b--){const _=10**b;let x=Math.floor(i/_)*_,E=Math.ceil(i/_)*_;y!=null&&(x/=y,E/=y);let C=(x+E)/2;[,C]=h3([x,C,E],{indexes:[1]});const k=await V1(t,e,x,n,s),O=await V1(t,e,E,n,s),D=await V1(t,e,C,n,s),B=cR(o,k,a,null),j=cR(o,O,a,null),Z=cR(o,D,a,null);let X=B.previous<=d,ee=j.previous<=d;if(X&&ee&&(B.previous<=j.previous?(X=!0,ee=!1):(ee=!0,X=!1)),X?g=[x,k]:ee?g=[E,O]:Z.previous<=d&&(g=[C,D]),g)break}return g}async function V1(t,e,i,r,n){const{getSize:s}=await ye(()=>Promise.resolve().then(()=>Sw),void 0);return s(t,i,{scale:r,view:n,shape:e.type==="simple-marker"?e.style:null})}function Elt(t,e,i,r){var s,o;((s=i==null?void 0:i.authoringInfo)==null?void 0:s.type)==="univariate-color-size"&&((o=i==null?void 0:i.authoringInfo)==null?void 0:o.univariateTheme)==="above-and-below"&&i.type==="class-breaks"&&(t=wlt(i,r));const n=t.clone();if(vp(n))eD(n)||n.symbolLayers.forEach((a=>{a.type!=="fill"&&(a.size=e)}));else if(plt(n))n.size=e;else if(flt(n)){const a=n.width,l=n.height;n.height=e,n.width=e*(a/l)}else mlt(n)?n.width=e:ylt(n)?n.font&&(n.font.size=e):n.type==="cim"&&Kh(i,"reference-size")?gW(n,{innerDotSize:e,outerRingSize:a7}):n.type==="cim"&&Kh(i,"spike")&&y_e(n,{defaultHeight:e,primitiveOverrides:null});return n}function Ilt(t){const i=Math.floor(Math.log10(Math.abs(t)))+1,r=i<4||i>6?4:i,n=1e6,s=Math.abs(t)>=n?"compact":"standard";return Qr(t,{notation:s,minimumSignificantDigits:2,maximumSignificantDigits:r})}const Ooe=16,Clt="https://utility.arcgis.com/sharing/tools/legend",Mlt="esri.layers.ImageryLayer",klt="esri.layers.ImageryTileLayer",Plt="esri.layers.WCSLayer",PA=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i,Alt=new Gt({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),AA=new Fr({size:6,outline:{color:[128,128,128,.5],width:.5}}),Llt=new So({style:"solid"});function l7(t){return t.type==="flow"}function i1e(t){return t.type==="vector-field"}function r1e(t){return t.type==="raster-colormap"}function n1e(t){return t.type==="raster-stretch"}function s1e(t){return t.type==="raster-shaded-relief"}function j1(t){return t.declaredClass==="esri.renderers.SimpleRenderer"}function D0(t){return t.declaredClass==="esri.renderers.ClassBreaksRenderer"}function z0(t){return t.declaredClass==="esri.renderers.UniqueValueRenderer"}function o1e(t){return t.declaredClass==="esri.renderers.HeatmapRenderer"}function Rlt(t){return IW(t)||CW(t)||MW(t)||Olt(t)}function Olt(t){return t.declaredClass==="esri.renderers.PointCloudRGBRenderer"}function IW(t){return t.declaredClass==="esri.renderers.PointCloudClassBreaksRenderer"}function CW(t){return t.declaredClass==="esri.renderers.PointCloudStretchRenderer"}function MW(t){return t.declaredClass==="esri.renderers.PointCloudUniqueValueRenderer"}function a1e(t){return t.declaredClass==="esri.renderers.DotDensityRenderer"}function l1e(t){return t.declaredClass==="esri.renderers.PieChartRenderer"}function Flt(t,e){return j1(t)||D0(t)||z0(t)||o1e(t)||a1e(t)||l1e(t)?e.type==="2d"||f_e(t):n1e(t)||r1e(t)||s1e(t)||IW(t)||CW(t)||MW(t)||i1e(t)||l7(t)}function Nlt(t){return t.declaredClass==="esri.layers.BuildingSceneLayer"}function MV(t){return t.declaredClass==="esri.layers.SubtypeGroupLayer"}function Dlt(t){return t.declaredClass==="esri.layers.VoxelLayer"}function zlt(t){return t.declaredClass==="esri.layers.WMSLayer"}function Vlt(t){return t.declaredClass==="esri.layers.WMTSLayer"}function kV(t){return t.declaredClass==="esri.layers.MapImageLayer"}function Foe(t){return t.declaredClass==="esri.layers.TileLayer"}function D_(t){return t.declaredClass===Mlt}function LA(t){return t.declaredClass===klt}function jlt(t){return t.declaredClass===Plt}function Ult(t){return t.type==="stretch-ramp"}function Blt(t){const e="authoringInfo"in t?t==null?void 0:t.authoringInfo:null;return(e==null?void 0:e.type)==="univariate-color-size"}function Glt(t){const e="authoringInfo"in t?t==null?void 0:t.authoringInfo:null;return(e==null?void 0:e.type)==="univariate-color-size"&&(e==null?void 0:e.univariateTheme)==="above-and-below"}function Noe(t){return"sublayers"in t}function Doe(t){return t&&"symbol"in t}async function jp(t,e){const i=await QG("esri/widgets/Legend/t9n/Legend");return t!=="previewTemplateAriaLabel"||e||(t="previewAriaLabel"),xo(i[t],{label:e})}function qlt(t,e){const{field:i,field2:r,field3:n,fieldDelimiter:s,valueExpression:o}=t;if(!i)return null;const a=!i&&!o||!r&&!n?[e]:e==null?void 0:e.toString().split(s||""),l=i?{[i]:a==null?void 0:a[0]}:null;return l&&(r&&(l[r]=a==null?void 0:a[1]),n&&(l[n]=a==null?void 0:a[2])),l}const Hlt=new Fr({style:"path",path:"M10,5 L5,0 0,5 M5,0 L5,15",size:15,outline:{width:1,color:[85,85,85,1]}});let z_={},dn=class extends tt{constructor(t){super(t),this._hasColorRamp=!1,this._hasOpacityRamp=!1,this._hasSizeRamp=!1,this._webStyleSymbolCache=new Map,this._dotDensityUrlCache=new Map,this._scaleDrivenSizeVariable=null,this._hasClusterSizeVariable=!1,this._layerDefinitionExpression=null,this._layerDefinitionExpressionClause=null,this._layerDisplayFilterId=null,this._layerDisplayFilterClause=null,this.children=new Ze,this.layerView=null,this.layer=null,this.legendElements=[],this.parent=null,this.hideLayersNotInCurrentView=!1,this.keepCacheOnDestroy=!1,this.respectLayerDefinitionExpression=!1,this.respectLayerVisibility=!0,this.sublayerIds=[],this.title=null,this.view=null}initialize(){const t=()=>this.notifyChange("ready");this.addHandles([eo((()=>this.children),"change",(e=>{const{added:i,removed:r}=e;i.forEach((n=>{const s=`activeLayerInfo-ready-watcher-${n.layer.uid}`;this.addHandles($e((()=>n.ready),t,kt),s)})),r.forEach((n=>this.removeHandles(n.layer.uid))),t()}))]),this.keepCacheOnDestroy||(z_={})}destroy(){this._webStyleSymbolCache=null,this._dotDensityUrlCache=null,this._scaleDrivenSizeVariable=null,this.keepCacheOnDestroy||(z_=null),this._layerDefinitionExpressionClause=null}get effectList(){const t=this.layer;let e=null;return"effect"in t&&t.effect&&(e=new $u,e.effect=t.effect,e.endTransition(),e.scale=this.scale),e}get opacity(){var n;const t=this.layer.opacity,e=(n=this.parent)==null?void 0:n.opacity,i=this.layer.parent,r=i&&"uid"in i?this._getParentLayerOpacity(i):null;return e!=null?e*t:r!=null?r*t:t}get ready(){return this.layer===null||(this.children.length>0?this._isGroupActive():this.legendElements.length>0)}get scale(){var t;return((t=this.view)==null?void 0:t.scale)??0}get isScaleDriven(){const t=this.layer;if(t===null)return!1;if("effect"in t&&t.effect&&Array.isArray(t.effect))return!0;if("featureReduction"in t&&t.featureReduction){if(t.featureReduction.type==="cluster")return!0;if(t.featureReduction.type==="binning"&&"renderer"in t.featureReduction&&t.featureReduction.renderer)return this._isRendererScaleDriven(t.featureReduction.renderer)}return"renderer"in t&&t.renderer?!!("displayFilterInfo"in t&&t.displayFilterInfo&&z0(t.renderer))||this._isRendererScaleDriven(t.renderer):this._isLayerScaleDriven(this.layer)}get version(){return this._get("version")+1}async buildLegendElementsForFeatureCollections(t){if(!(!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView()))return this.legendElements=[],void this.notifyChange("ready");const e=Array.from(t,(i=>{var r;if(ape(i))return this._getRendererLegendElements(i.renderer,{title:i.title});if((r=i.featureSet)!=null&&r.features.length){const n=i.layerDefinition,s=n==null?void 0:n.drawingInfo,o=s&&Yqe(s.renderer),a=Alt.read(n.geometryType);return o?this._getRendererLegendElements(o,{title:i.name,geometryType:a}):(Ie.getLogger(this).warn("drawingInfo not available!"),null)}return null}));try{const i=[],r=await Promise.allSettled(e);for(const n of r)if(n.status==="fulfilled")for(const s of n.value??[])i.push(s);this.legendElements=i,this.notifyChange("ready")}catch(i){Ie.getLogger(this).warn("error while building legend for layer!",i)}}async buildLegendElementsForRenderer(t){try{const e=!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView();this.legendElements=e?await this._getRendererLegendElements(t):[],this.notifyChange("ready")}catch(e){Ie.getLogger(this).warn("error while building legend for layer!",e)}}async buildLegendElementsForFeatureReduction(t){try{const e=!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView();this.legendElements=e?await this._getLegendElementsForFeatureReduction(t):[],this.notifyChange("ready")}catch(e){Ie.getLogger(this).warn("error while building legend for layer!",e)}}async buildLegendElementsForTools(){var e,i;const t=this.layer;if(Dlt(t))this._constructLegendElementsForVoxelLayer();else if(Vlt(t))this._constructLegendElementsForWMTSlayer();else if(zlt(t))await this._constructLegendElementsForWMSSublayers();else if(Nlt(t))await this._constructLegendElementsForBuildingSceneLayer();else if(kV(t)||Foe(t)||MV(t))await this._constructLegendElementsForSublayers();else{this.removeHandles("imageryLayers-watcher");let r="default";if(D_(t)){const n=t;r=(((e=n==null?void 0:n.rasterFunction)==null?void 0:e.functionName)||"default")+"_"+((i=t.bandIds)!=null&&i.length?t.bandIds.join(""):"###")}if(LA(t)||t.type==="link-chart")return;await this._getLegendLayers(`${t.uid}-${r}`).then((async n=>{this.legendElements=[],this.notifyChange("ready");const s=n.map((async o=>{if(D_(t)){const l=$e((()=>[t.rasterFunction,t.bandIds]),(()=>Zu((async()=>{z_.default=null,t.renderer?await this.buildLegendElementsForRenderer(t.renderer):await this.buildLegendElementsForTools()}))()));this.addHandles(l,"imageryLayers-watcher")}const a=this._generateSymbolTableElementForLegendLayer(o);a!=null&&a.infos.length&&(D_(t)&&(a.title=t.title),this.legendElements.push(a)),this.notifyChange("ready")}));await Promise.allSettled(s)})).catch((n=>{Ie.getLogger(this).warn("Request to server for legend has failed!",n)}))}}async _isLayerInCurrentView(){const t=this.layer,e=this.layerView,i=e&&"createQuery"in e&&"queryFeatureCount"in e;if(!i&&!(e&&"createQuery"in t&&"queryFeatureCount"in t))return!0;await E$((()=>!e.updating));const r=i?"createQuery"in e&&e.createQuery():"createQuery"in t&&t.createQuery();return r?(r.geometry=this.view.extent,(i?"queryFeatureCount"in e&&await e.queryFeatureCount(r):"queryFeatureCount"in t&&await t.queryFeatureCount(r))!==0):!0}_getParentLayerOpacity(t){let e=1;const i=t.parent;return i&&"uid"in i&&(e=this._getParentLayerOpacity(i)),t.opacity*e}_isGroupActive(){return this.children.some((t=>t.ready))}_isRendererScaleDriven(t){if(t.type==="dot-density")return!0;const e="valueExpression"in t?t.valueExpression:null;if(PA.test(e))return!0;const i="visualVariables"in t?t.visualVariables:null;return!!(i!=null&&i.some((r=>this._isScaleDrivenSizeVariable(r))))||this._hasScaleDrivenSymbols(t)}_hasScaleDrivenSymbols(t){var e;switch(t.type){case"simple":return this._isScaleDrivenSymbol(t.symbol);case"class-breaks":return this._isScaleDrivenSymbol(t.defaultSymbol)||t.classBreakInfos.some((i=>this._isScaleDrivenSymbol(i.symbol)));case"unique-value":return this._isScaleDrivenSymbol(t.defaultSymbol)||!!((e=t.uniqueValueInfos)!=null&&e.some((i=>this._isScaleDrivenSymbol(i.symbol))))}return!1}_isScaleDrivenSymbol(t){if((t==null?void 0:t.type)==="cim"){const{primitiveOverrides:e,minScale:i,maxScale:r}=t.data,n=(e==null?void 0:e.some((s=>{var o;return/\$view\.scale/.test(((o=s.valueExpressionInfo)==null?void 0:o.expression)||"")})))??!1;return i!=null||r!=null||n}return!1}_isScaleDrivenSizeVariable(t){if(t&&t.type!=="size")return!1;const e=t,i=e.minSize,r=e.maxSize;return!(typeof i!="object"||!i||!this._isScaleDrivenSizeVariable(i))||!(typeof r!="object"||!r||!this._isScaleDrivenSizeVariable(r))||PA.test(e.valueExpression)}_isLayerScaleDriven(t){if("minScale"in t&&t.minScale>0||"maxScale"in t&&t.maxScale>0)return!0;if("sublayers"in t&&t.sublayers)return t.sublayers.some((i=>this._isLayerScaleDriven(i)));const e=t.parent;if(t.loaded===!1&&e&&kV(e)&&"source"in t&&t.source&&t.source.type==="map-layer"){for(const i of e.sourceJSON.layers??[])if(i.id===t.source.mapLayerId&&(i.minScale>0||i.maxScale>0))return!0}return!1}async _constructLegendElementsForVoxelLayer(){var r;this.legendElements=[],this.removeHandles("voxel-style-watcher"),this.removeHandles("voxel-current-variable");const t=this.layer;this.addHandles($e((()=>t.currentVariableId),(()=>this._constructLegendElementsForVoxelLayer())),"voxel-current-variable"),this.addHandles($e((()=>t.getVariableStyles()),(()=>this._constructLegendElementsForVoxelLayer())),"voxel-style-watcher");const e=t.getVariableStyle(null),i=[];if(e){if((r=e.uniqueValues)!=null&&r.length){const n=[];e.uniqueValues.forEach((s=>{s.enabled&&n.push({label:s.label||`${s.value}`,value:s.value,symbol:new So({color:s.color,outline:null})})})),n.length&&i.push({type:"symbol-table",title:e.label,infos:n})}else if(e.transferFunction){const{colorStops:n,stretchRange:s}=e.transferFunction,o=n.toArray().reverse(),a=s.map(((c,d)=>`${d===0?hbe:pbe} ${Ilt(c)}`)).reverse(),l=o.map((c=>({color:c.color,value:null,label:null})));l[0].label=a[0],l[l.length-1].label=a[1],i.push({type:"color-ramp",title:e.label,infos:l,preview:O0(o.map((c=>c.color)),{ariaLabel:await jp("previewColorRampAriaLabel")})})}}await this._generatePreviewsForLegendElements(i,{opacity:t.opacity}),this.legendElements=i,this.notifyChange("ready")}_constructLegendElementsForWMTSlayer(){var i,r;this.legendElements=[],this.removeHandles("wmts-activeLayer-watcher");const t=this.layer.activeLayer;this.addHandles($e((()=>{const{layer:n}=this;return n&&"activeLayer"in n&&n.activeLayer}),(()=>this._constructLegendElementsForWMTSlayer())),"wmts-activeLayer-watcher");const e=t.styleId?(r=(i=t.styles)==null?void 0:i.find((({id:n})=>n===t.styleId)))==null?void 0:r.legendUrl:void 0;e&&(this.legendElements=[{type:"symbol-table",title:t.title,infos:[{src:e,opacity:this.opacity}]}]),this.notifyChange("ready")}async _constructLegendElementsForWMSSublayers(){this.legendElements=[],this.removeHandles("wms-sublayers-watcher");const t=this.layer;let e=null;(t.customParameters||t.customLayerParameters)&&(e={...t.customParameters,...t.customLayerParameters}),this.addHandles($e((()=>{const{layer:i}=this;return i&&"sublayers"in i&&i.sublayers}),(()=>this._constructLegendElementsForWMSSublayers())),"wms-sublayers-watcher"),this.legendElements=await this._generateLegendElementsForWMSSublayers(t.sublayers,e),this.notifyChange("ready")}async _generateLegendElementsForWMSSublayers(t,e){var o,a;const i=this.layer,r=[];this.addHandles(t.on("change",(()=>this._constructLegendElementsForWMSSublayers())),"wms-sublayers-watcher");const n=((a=(o=this.sublayerIds)==null?void 0:o.map((l=>i.findSublayerById(l))))==null?void 0:a.filter(Kr))??[],s=n.length?n:t.toArray();for(const l of s){const c=$e((()=>[l.title,l.visible,l.legendEnabled]),(()=>this._constructLegendElementsForWMSSublayers()));if(this.addHandles(c,"wms-sublayers-watcher"),!this.respectLayerVisibility||l.visible&&l.legendEnabled){const d=await this._generateSymbolTableElementForWMSSublayer(l,e);d!=null&&d.infos.length&&r.unshift(d)}}return r}async _generateSymbolTableElementForWMSSublayer(t,e){if(!t.legendUrl&&t.sublayers){const i=(await this._generateLegendElementsForWMSSublayers(t.sublayers,e)).filter((r=>r));return{type:"symbol-table",title:t.title,infos:i}}return this._generateSymbolTableElementForLegendUrl(t,e)}async _generateSymbolTableElementForLegendUrl(t,e){var o;let i=t.legendUrl;if(!i)return;const r={type:"symbol-table",title:t.title||t.name||String(t.id??""),infos:[]};e&&(i=HA(i,e));let n=null;const s=(o=t.layer)==null?void 0:o.opacity;try{n=(await fi(i,{responseType:"image"})).data,n&&(n.style.opacity=s)}catch{}return r.infos.push({src:i,preview:n,opacity:s}),r}_getLegendLayers(t,e){const i=z_&&z_[t];return i?Promise.resolve(i):this._legendRequest(e).then((r=>{const n=r.layers;return z_[t]=n,n}))}_legendRequest(t){var n;const e=this.layer;let i={f:"json",dynamicLayers:t};if(D_(e)){const s=e.exportImageServiceParameters.rasterFunction;if(s&&(i.renderingRule=JSON.stringify(((n=s.functionDefinition)==null?void 0:n.toJSON())||s.toJSON())),e.bandIds&&(i.bandIds=e.bandIds.join()),e.raster||e.viewId||e.customParameters){const{raster:o,viewId:a,customParameters:l}=e;i={raster:o,viewId:a,...i,...l}}}let r=e.url.replace(/(\/)+$/,"");if("version"in e&&+e.version>=10.01){const s=r.indexOf("?");s>-1?r=r.slice(0,s)+"/legend"+r.slice(s):r+="/legend"}else{const s=r.toLowerCase().indexOf("/rest/"),o=s===-1?r:r.slice(0,s)+r.slice(s+5);r=Clt+"?soapUrl="+encodeURI(o)+"&returnbytes=true"}return fi(r,{query:i}).then((s=>s.data))}async _constructLegendElementsForBuildingSceneLayer(){this.legendElements=[],this.removeHandles("sublayers-watcher");const t=this.layer;this.addHandles($e((()=>t.sublayers),(()=>this._constructLegendElementsForBuildingSceneLayer())),"sublayers-watcher");try{this.legendElements=await this._generateLegendElementsForBuildingSublayers(t.sublayers,this.opacity),this.notifyChange("ready")}catch(e){Ie.getLogger(this).warn("Request to server for legend has failed!",e)}}async _generateLegendElementsForBuildingSublayers(t,e){let i=[];this.addHandles(t.on("change",(()=>this._constructLegendElementsForBuildingSceneLayer())),"sublayers-watcher");const r=t.toArray();for(const n of r){const s=$e((()=>["renderer"in n&&n.renderer,n.opacity,n.title,n.visible]),(()=>this._constructLegendElementsForBuildingSceneLayer()));if(this.addHandles(s,"sublayers-watcher"),!this.respectLayerVisibility||n.visible){const o=(n==null?void 0:n.opacity)!=null?n.opacity:null,a=o!=null?o*e:e;if(n.type==="building-group"){const l={type:"symbol-table",title:n.title,infos:[]},c=await this._generateLegendElementsForBuildingSublayers(n.sublayers,a);l.infos.push(...c),i=[l,...i]}else n.renderer&&(i=[...await this._getRendererLegendElements(n.renderer,{title:n.title,opacity:a,sublayer:n}),...i])}}return i.filter((n=>!!n&&(!("infos"in n)||!n.infos||n.infos.length>0)))}async _constructLegendElementsForSublayers(){this.legendElements=[],this.removeHandles("sublayers-watcher");const t=this.layer;if(kV(t)||Foe(t)||MV(t)){this.addHandles($e((()=>t.sublayers),(()=>this._constructLegendElementsForSublayers)),"sublayers-watcher");try{this.legendElements=await this._generateLegendElementsForSublayers(t.sublayers,this.opacity),this.notifyChange("ready")}catch(e){Ie.getLogger(this).warn("Request to server for legend has failed!",e)}}}async _generateLegendElementsForSublayers(t,e,i){const r=this.layer;let n=[];this.addHandles(t.on("change",(()=>this._constructLegendElementsForSublayers())),"sublayers-watcher");let s=t.toArray();!i&&this.sublayerIds&&this.sublayerIds.length&&(s=MV(r)?this.sublayerIds.map((o=>r.findSublayerForSubtypeCode(o))).filter(Kr):this.sublayerIds.map((o=>r.findSublayerById(o))).filter(Kr));for(const o of s){const a=$e((()=>[o.renderer,o.opacity,o.title,o.visible,o.legendEnabled]),(()=>this._constructLegendElementsForSublayers()));if(this.addHandles(a,"sublayers-watcher"),!this.respectLayerVisibility||o.visible&&o.legendEnabled&&this._isSublayerInScale(o)){const l=(o==null?void 0:o.opacity)!=null?o.opacity:null,c=l!=null?l*e:e,d=!Noe(o)||o.originIdOf("renderer")>Nt.SERVICE&&!o.sublayers;if(o.renderer&&d)await o.load(),n=[...await this._getRendererLegendElements(o.renderer,{title:o.title,opacity:c,sublayer:o}),...n];else if(Noe(o)){const f=await this._generateSymbolTableElementForSublayer(o,c,i);f&&n.unshift(f)}}}return n.filter((o=>!!o&&(!("infos"in o)||!o.infos||o.infos.length>0)))}async _generateSymbolTableElementForSublayer(t,e,i){if(!i){i=new Map;const n=this.layer,s=t.source;let o=null;if(!(!s||s.type==="map-layer"&&s.mapLayerId===t.id&&(!s.gdbVersion||s.gdbVersion===("gdbVersion"in n&&n.gdbVersion)))||t.originIdOf("renderer")>Nt.SERVICE||t.originIdOf("labelingInfo")>Nt.SERVICE||t.originIdOf("labelsVisible")>Nt.SERVICE){const l=new dc({layer:this.layer});o=l.hasDynamicLayers?l.dynamicLayers:null,l.destroy()}const a=o||`${n.uid}-default`;(await this._getLegendLayers(a,o)).forEach((l=>i.set(l.layerId,l)))}const r=i.get(t.id);if((!r||r!=null&&r.subLayerIds&&r.defaultVisibility)&&t.sublayers){const n=await this._generateLegendElementsForSublayers(t.sublayers,e,i);return{type:"symbol-table",title:t.title,infos:n}}return this._generateSymbolTableElementForLegendLayer(r,t,e)}_generateSymbolTableElementForLegendLayer(t,e,i){if(!(t!=null&&t.legend)||this.respectLayerVisibility&&!this._isLegendLayerInScale(t,e))return null;const r=e==null?void 0:e.renderer;let n=(e==null?void 0:e.title)||t.layerName;if(r&&(!e||(e==null?void 0:e.originIdOf("renderer"))>Nt.SERVICE)){const a=(e==null?void 0:e.title)||this._getRendererTitle(r,e);a&&(n&&typeof a!="string"&&"title"in a&&(a.title=n),n=a)}const s={type:"symbol-table",title:n,legendType:t.legendType||null,infos:[]},o=e?this._sanitizeLegendForSublayer(t.legend.slice(),e):t.legend;return t.legendGroups&&t.legendGroups.length>0?t.legendGroups.forEach((a=>{var c;const l={type:"symbol-table",title:a.heading,legendType:t.legendType||null,infos:this._generateSymbolTableElementInfosForLegendLayer(o.filter((d=>d.groupId===a.id)),t.layerId,i)};((c=l.infos)==null?void 0:c.length)>0&&s.infos.push(l)})):s.infos=this._generateSymbolTableElementInfosForLegendLayer(o,t.layerId,i),s.infos.length>0?s:null}_generateSymbolTableElementInfosForLegendLayer(t,e,i){return t.map((r=>{let n=r.url;if(r.imageData&&r.imageData.length>0)n=`data:image/png;base64,${r.imageData}`;else{if(n.indexOf("http")===0)return null;n=RIe(`${this.layer.url}/${e}/images/${n}`)}return{label:r.label,src:n,opacity:i??this.opacity,width:r.width,height:r.height}})).filter(Kr)}_isSublayerInScale(t){const e=t.minScale||0,i=t.maxScale||0;return!(e>0&&e<this.scale||i>this.scale)}_isLegendLayerInScale(t,e){const i=e||this.layer;let r=null,n=null,s=!0;return!i.minScale&&i.minScale!==0||!i.maxScale&&i.maxScale!==0?(t.minScale===0&&i.tileInfo&&(r=i.tileInfo.lods[0].scale),t.maxScale===0&&i.tileInfo&&(n=i.tileInfo.lods[i.tileInfo.lods.length-1].scale)):(r=Math.min(i.minScale,t.minScale)||i.minScale||t.minScale,n=Math.max(i.maxScale,t.maxScale)),(r>0&&r<this.scale||n>this.scale)&&(s=!1),s}_sanitizeLegendForSublayer(t,e){var o;if("version"in this.layer&&+this.layer.version<10.1||t.length===0)return t;const i=e.renderer,r=t.some((a=>a.values));let n=0,s=null;return r&&t.some(((a,l)=>(a.values||(n=l,s=a,s.label||(s.label="others")),s!=null))),i?i.type==="unique-value"?s&&(t.splice(n,1),t.push(s)):i.type==="class-breaks"&&(s&&t.splice(n,1),(o=i.legendOptions)!=null&&o.order||t.reverse(),s&&t.push(s)):s&&(t.splice(n,1),t.push(s)),t}async _getRendererLegendElements(t,e={}){if(!Flt(t,this.view))return Ie.getLogger(this).warn(`Renderer of type '${t.type}' not supported!`),[];if(Rlt(t))return this._constructPointCloudRendererLegendElements(t,e);if(a1e(t))return this._constructDotDensityRendererLegendElements(t);const i=await this._loadRenderer(t);return l1e(i)?this._constructPieChartRendererLegendElements(i):this._constructRendererLegendElements(i,e)}async _getLegendElementsForFeatureReduction(t){let e=null;return t.type==="binning"?e=t.renderer:t.type==="cluster"&&(e=this._getClusterRenderer(t)),e?this._getRendererLegendElements(e):[]}_getPointCloudRendererTitle(t){var e;return(((e=t.legendOptions)==null?void 0:e.title)||t.field)??""}async _constructPointCloudRendererLegendElements(t,e={}){var o;const i=e.title,r=[];let n=null,s=null;if(IW(t))n={type:"symbol-table",title:i||this._getPointCloudRendererTitle(t),infos:[]},t.colorClassBreakInfos.forEach((a=>{n.infos.unshift({label:a.label||a.minValue+" - "+a.maxValue,value:[a.minValue,a.maxValue],symbol:this._getAppliedCloneSymbol(AA,a.color)})}));else if(CW(t)){const a=t.stops;let l=null;if(a!=null&&a.length&&(a.length===1&&(l=a[0].color),!l)){const d=a[0].value,f=a[a.length-1].value;d!=null&&f!=null&&(l=gbe(d+(f-d)/2,a))}n={type:"symbol-table",title:null,infos:[{label:null,value:null,symbol:this._getAppliedCloneSymbol(AA,l||AA.color)}]};const c=LYe(t.stops??[])??[];s={type:"color-ramp",title:i||this._getPointCloudRendererTitle(t),infos:c,preview:O0(c.map((d=>d.color)),{ariaLabel:await jp("previewColorRampAriaLabel")})}}else MW(t)&&(n={type:"symbol-table",title:i||this._getPointCloudRendererTitle(t),infos:[]},(o=t.colorUniqueValueInfos)==null||o.forEach((a=>{n.infos.push({label:a.label||a.values.join(", "),value:a.values.join(", "),symbol:this._getAppliedCloneSymbol(AA,a.color)})})));return n!=null&&n.infos.length&&r.push(n),s!=null&&s.infos.length&&r.push(s),await this._generatePreviewsForLegendElements(r,{opacity:this.opacity,symbolConfig:{applyColorModulation:!!t.colorModulation}}),r}async _getElementInfoForDotDensity(t,e){const{color:i,label:r,valueExpressionTitle:n}=e,{backgroundColor:s,outline:o,dotSize:a}=t,l=this.effectList,c=l==null?void 0:l.effects.map((E=>E.toJSON())),d=qO(c),f=await jp("previewTemplateAriaLabel",r||n),y=a+"-"+i+"-"+s+"-"+(o&&JSON.stringify(o.toJSON()))+"-"+d,g=this._dotDensityUrlCache,b=g.has(y)?g.get(y):EQe(t,i,{ariaLabel:f});g.set(y,b);const _={shape:{type:"image",x:0,y:0,width:b.width,height:b.height,src:b.src},fill:null,stroke:null,offset:[0,0]},x=Y$([[_]],[b.width,b.height],{effectView:this.effectList,ariaLabel:f});return{opacity:1,src:b.src,preview:x,width:b.width,height:b.height}}async _constructDotDensityRendererLegendElements(t){var n;const e=t.calculateDotValue(this.view.scale),i=(n=t.legendOptions)==null?void 0:n.unit,r={type:"symbol-table",title:{value:e&&Math.round(e),unit:i||""},infos:[]};for(const s of t.attributes){const o=await this._getElementInfoForDotDensity(t,s);o.label=s.label||s.valueExpressionTitle||s.field,r.infos.push(o)}return[r]}async _constructPieChartRendererLegendElements(t){var o,a,l,c;const e=[];let i=null;const r=t.outline;t.attributes.forEach((d=>{const f=new Fr({color:d.color,outline:r}),y=d.label||d.valueExpressionTitle||d.field;e.push({label:y,symbol:f})}));const n=e.length?[...e]:[];if((o=t.othersCategory)!=null&&o.color&&((a=t.othersCategory)==null?void 0:a.threshold)!==0){const d=new Fr({color:t.othersCategory.color,outline:r});i=t.othersCategory.label||"Other",e.push({label:i,symbol:d})}if((l=t.defaultColor)!=null&&l.a){const d=new Fr({color:t.defaultColor,outline:r});e.push({label:t.defaultLabel,symbol:d})}const s=await this._getVisualVariableLegendElements(t,this.layer)||[];if(e.length){s.unshift({type:"symbol-table",title:null,infos:e});const d=n.filter((y=>y.label!==i)).map((y=>y.symbol.color)).filter(Boolean),f=IQe(d,{holePercentage:t.holePercentage,backgroundColor:(c=t.backgroundFillSymbol)==null?void 0:c.color,effectList:this.effectList,outline:r,ariaLabel:await jp("previewPieChartAriaLabel")});s.unshift({type:"pie-chart-ramp",title:this._getRendererTitle(t,this.layer),infos:e,preview:f})}return await this._generatePreviewsForLegendElements(s,{opacity:this.layer.opacity,effectView:this.effectList}),s}async _getWhereClause(t,e,i){const r=await vq(t,i),n=new Set,{field:s,field2:o,field3:a}=e;Ng(n,i,[s,o,a]),io(n,i,e.valueExpression);const l=new Set(Array.from(n,(d=>d.toLowerCase()))),c=r==null?void 0:r.fieldNames.map((d=>d.toLowerCase()));return c!=null&&c.some((d=>!l.has(d)))?null:r}async _processDefinitionExpression(t,e){if(!("definitionExpression"in t))return;const i=t.definitionExpression;i&&this.respectLayerDefinitionExpression?this._layerDefinitionExpression!==i&&(this._layerDefinitionExpressionClause=await this._getWhereClause(i,e,t.fieldsIndex)):this._layerDefinitionExpressionClause=null,this._layerDefinitionExpression=i}async _processDisplayFilter(t,e){if(!("displayFilterInfo"in t))return;const i=t.displayFilterInfo?T8e(t.displayFilterInfo,this.view):null;return i!=null&&i.where?this._layerDisplayFilterId!==(i==null?void 0:i.id)&&(this._layerDisplayFilterClause=await this._getWhereClause(i.where,e,t.fieldsIndex)):this._layerDisplayFilterClause=null,this._layerDisplayFilterId=i==null?void 0:i.id,i}async _constructRendererLegendElements(t,e={}){var E,C,k,O,D,B,j;const{title:i,sublayer:r}=e,n=r||this.layer,s=Kh(t,"reference-size"),o=Kh(t,"spike");let a=null;z0(t)&&(await this._processDefinitionExpression(n,t),a=await this._processDisplayFilter(n,t)),this._hasColorRamp=!1,this._hasOpacityRamp=!1,this._hasSizeRamp=!1,this._scaleDrivenSizeVariable=null;const l=await this._getVisualVariableLegendElements(t,n)||[],c={type:"symbol-table",title:i||this._getRendererTitle(t,n),infos:[]};let d=null,f=!1;const y=new Set;if(l7(t)&&!this._hasSizeRamp){const Z=await mbe(t);c.infos.push({label:null,symbol:Z})}else if(Blt(t)){let Z=i;const X=Glt(t)?"univariate-above-and-below-ramp":"univariate-color-size-ramp",ee=l.findIndex((ke=>ke.type==="color-ramp")),pe=ee!==-1?l.splice(ee,1)[0]:null,he=l.findIndex((ke=>ke.type==="size-ramp")),ne=he!==-1?l.splice(he,1)[0]:null,re=[];pe&&(Z=pe.title,re.push(pe)),ne&&(Z=ne.title,re.push(ne)),re.length>0&&l.push({type:X,title:Z,infos:re})}else if(o1e(t)){const Z=vbe(t);l.push({type:"heatmap-ramp",title:i||this._getRendererTitle(t,n),infos:Z,preview:O0(Z.map((X=>X.color)),{effectList:this.effectList,ariaLabel:await jp("previewColorRampAriaLabel")})})}else if(z0(t)){const Z=t.authoringInfo;if(Z&&Z.type==="relationship"){const{numClasses:X,field1:ee,field2:pe}=Z,he=Z.focus;if(X&&ee&&pe){const ne=[ee,pe];let re=ewe(he)||0;for(const Fe of ne){const{field:Ae,normalizationField:we,label:Re}=Fe,je=Re||{field:this._getFieldAlias(Ae,n),normField:we&&this._getFieldAlias(we,n)},ue=Hlt.clone();ue.angle=re,c.infos.push({label:je,symbol:ue}),y.add(ue),re+=90}const ke=TQe({focus:he,numClasses:X,infos:t.uniqueValueInfos??[]});l.unshift(ke)}}else if(D_(this.layer)||LA(this.layer))(E=t.uniqueValueInfos)==null||E.forEach((X=>{X.symbol&&this._checkClausesForUVR(t,X.value)&&c.infos.push({label:X.label||X.value,value:X.value,symbol:X.symbol})}));else{const{field:X,field2:ee,field3:pe,fieldDelimiter:he,valueExpression:ne,defaultSymbol:re}=t,ke=!(!X&&!ne||!ee&&!pe),Fe=this._layerDisplayFilterClause?a==null?void 0:a.title:null,Ae=[];if((C=t.uniqueValueGroups)==null||C.forEach((we=>{var je;const Re={type:"symbol-table",title:Fe||we.heading,infos:[]};(je=we.classes)==null||je.forEach((ue=>{const{symbol:Ne,values:Pt}=ue;if(Ne){const Ot=[],Xt=[];for(const Qe of Pt??[]){const{value:In,value2:Ao,value3:Vl}=Qe,ro=[],Lo=[];(X||ne)&&(ro.push(In),Lo.push(this._getDomainName(X,In,n))),ee&&(ro.push(Ao),Lo.push(this._getDomainName(ee,Ao,n))),pe&&(ro.push(Vl),Lo.push(this._getDomainName(pe,Vl,n))),Ot.push(ke?ro.join(he||""):ro[0]),Xt.push(Lo.join(" - "))}const oi=Ot.join(", ");let vi=ue.label;if(!vi){const Qe=Xt.filter(Boolean);vi=Qe.length?Qe.join(", "):oi}const ui=Ne.clone();ui.type==="cim"&&s&&gW(ui,{innerDotSize:.5*Ooe,outerRingSize:Ooe}),Ot.some((Qe=>this._checkClausesForUVR(t,Qe)))&&Re.infos.push({label:vi,value:oi,symbol:ui})}})),Re.infos.length&&Ae.push(Re)})),Ae.length){const we=Ae[0];if(Ae.length===1&&"title"in we&&!we.title){const Re=((k=we.infos)==null?void 0:k.filter(Doe))??[];c.infos.push(...Re)}else re&&(Ae.push({type:"symbol-table",infos:[{label:t.defaultLabel||"others",symbol:re}]}),f=!0),c.infos.push(...Ae);i||(O=t.legendOptions)!=null&&O.title||t.valueExpressionTitle||(c.title=null)}}t.defaultSymbol&&!f&&(c.infos.push({label:t.defaultLabel||"others",symbol:t.defaultSymbol}),f=!0)}else if(D0(t)){if(!s&&!o){if(d=this._isUnclassedRenderer(t),!d||!this._hasSizeRamp){const Z=t.classBreakInfos.filter((({symbol:ee})=>ee)),X=((D=t.legendOptions)==null?void 0:D.order)==="ascending-values";for(const{label:ee,minValue:pe,maxValue:he,symbol:ne}of Z){const re={label:ee||(d?null:`${pe} - ${he}`),value:[pe,he],symbol:ne};X?c.infos.push(re):c.infos.unshift(re)}d&&(c.title=null),this._updateInfosForClassedSizeRenderer(t,c.infos)}t.defaultSymbol&&!d&&(c.infos.push({label:t.defaultLabel||"others",symbol:t.defaultSymbol}),f=!0)}}else if(n1e(t))if(LA(this.layer)||jlt(this.layer)){const Z=await this._constructTileImageryStretchRendererElements(t);Ult(Z)?l.push(Z):c.infos=Z}else{const Z=this.layer;let X,ee;(B=t.customStatistics)!=null&&B.length&&({min:X,max:ee}=t.customStatistics[0]);let pe=[],he=Z.serviceRasterInfo;if(Z.rasterFunction)try{he=await Z.generateRasterInfo(Z.rasterFunction)}catch{}const ne=V3(he.pixelType);if(he.bandCount===1){const re=((j=Z.bandIds)==null?void 0:j[0])||0;X=X??(he.statistics?he.statistics[re].min:ne[0]),ee=ee??(he.statistics?he.statistics[re].max:ne[1]),X||ee?l.push(await this._getStretchLegendElements(t,{min:X,max:ee})):this._getServerSideLegend()}else if(Z.bandIds&&Z.bandIds.length===1)X=X??(he.statistics?he.statistics[Z.bandIds[0]].min:ne[0]),ee=ee??(he.statistics?he.statistics[Z.bandIds[0]].max:ne[1]),X||ee?l.push(await this._getStretchLegendElements(t,{min:X,max:ee})):this._getServerSideLegend();else if(he.bandCount>=3){const{bandInfos:re}=he,{bandIds:ke}=Z;re.length>=he.bandCount?(ke==null?void 0:ke.length)===3?(pe=ke.map((Fe=>re[Fe].name)),c.infos=this._createSymbolTableElementMultiBand(pe)):Z.format==="lerc"?(pe=[0,1,2].map((Fe=>re[Fe].name)),c.infos=this._createSymbolTableElementMultiBand(pe)):this._getServerSideLegend():Z.format==="lerc"?(pe=["band1","band2","band3"],c.infos=this._createSymbolTableElementMultiBand(pe)):this._getServerSideLegend()}else this._getServerSideLegend()}else if(r1e(t))t.colormapInfos.forEach((Z=>{c.infos.push({label:Z.label,value:Z.value,symbol:this._getAppliedCloneSymbol(Llt,Z.color)})}));else if(j1(t)){let Z=t.symbol;switch(e.geometryType){case"point":Z="pointSymbol"in n?n.pointSymbol:null;break;case"polyline":Z="lineSymbol"in n?n.lineSymbol:null;break;case"polygon":Z="polygonSymbol"in n?n.polygonSymbol:null}const X=this._hasClusterSizeVariable&&this._getClusterSymbol()||!this._hasSizeRamp;t.symbol&&X&&c.infos.push({label:t.label,symbol:Z})}else if(i1e(t)){t.outputUnit&&(this.title="("+t.toJSON().outputUnit+")"),c.title=t.attributeField;const Z=t.getClassBreakInfos();Z!=null&&Z.length?Z.forEach((X=>{c.infos.push({label:X.minValue+" - "+X.maxValue,symbol:X.symbol})})):c.infos.push({label:t.attributeField,symbol:t.getDefaultSymbol()})}else s1e(t)&&l.push(await this._getStretchLegendElements(t,{min:0,max:255}));const g=t.defaultSymbol;!g||f||j1(t)||d&&!this._hasColorRamp&&!this._hasSizeRamp&&!this._hasOpacityRamp||l.push({type:"symbol-table",infos:[{label:t.defaultLabel||"others",symbol:g}]}),c.infos.length&&l.unshift(c);const b=e.opacity==null?this.opacity:e.opacity,_=this._isTallSymbol("visualVariables"in t?t.visualVariables:null),x=D_(this.layer)||LA(this.layer);return await this._generatePreviewsForLegendElements(l,{opacity:b,symbolConfig:{isTall:_,isSquareFill:x},effectView:this.effectList},{defaultSymbol:g,arrowMarkerSymbols:y}),t=null,l}_checkClausesForUVR(t,e){const i=qlt(t,e);return!i||(!this._layerDefinitionExpressionClause||this._layerDefinitionExpressionClause.testFeature(i))&&(!this._layerDisplayFilterClause||this._layerDisplayFilterClause.testFeature(i))}_getServerSideLegend(){setTimeout((()=>this.buildLegendElementsForTools()),0)}_getAllInfos(t){const e=t==null?void 0:t.infos;return e?e.reduce(((i,r)=>i.concat(this._getAllInfos(r))),[]):[t]}async _constructTileImageryStretchRendererElements(t){var a,l,c;const e=this.layer,i=e.symbolizer.rasterInfo??e.raster.rasterInfo;let r,n;const s=(a=t==null?void 0:t.customStatistics)!=null&&a.length?t.customStatistics:i==null?void 0:i.statistics;if(s)({min:r,max:n}=s[0]);else{const d=V3(i.pixelType);r=d[0],n=d[1]}if(e.hasStandardTime()&&(r=e.getStandardTimeValue(r),n=e.getStandardTimeValue(n)),i.bandCount===1||((l=e.bandIds)==null?void 0:l.length)===1)return this._getStretchLegendElements(t,{min:r,max:n});const o=((c=e==null?void 0:e.bandIds)!=null&&c.length?e.bandIds:Array.from(Array(Math.min(i.bandCount,3)).keys())).map((d=>i.bandInfos[d].name));return o.length<3?o.push(o[1]):o.length>3&&o.splice(3),this._createSymbolTableElementMultiBand(o)}async _getStretchLegendElements(t,e){const i=t.colorRamp,r=OYe(i,e);return{type:"stretch-ramp",title:"",infos:r,preview:O0(r.map((n=>n.color)),{ariaLabel:await jp("previewColorRampAriaLabel")})}}_getClusterSymbol(){var r;const t=this.layer,e="featureReduction"in t&&t.featureReduction,i=e&&"symbol"in e&&e.renderer;return i&&((r=i==null?void 0:i.authoringInfo)==null?void 0:r.isAutoGenerated)!==!0?null:e&&"symbol"in e?e.symbol:null}async _getSizeLegendElement(t,e,i,r){return{type:"size-ramp",title:this._hasClusterSizeVariable?this._getClusterTitle(e):t,infos:await vlt(i,e,await S9(i),this.scale,this.view,r,this._hasClusterSizeVariable?this._getClusterSymbol():null)}}_createSymbolTableElementMultiBand(t){const e=[],i=["red","green","blue"];return t.forEach(((r,n)=>{e.push({label:{colorName:i[n],bandName:r},src:IYe[n],opacity:this.opacity??1})})),e}_updateInfosForClassedSizeRenderer(t,e){const i=t.authoringInfo&&t.authoringInfo.type==="class-breaks-size",r=t.classBreakInfos.some((n=>eD(n.symbol)));if(i&&r){const n=s7,s=o7,o=t.classBreakInfos.length,a=(n-s)/(o>1?o-1:o);e.forEach(((l,c)=>{l.size=n-a*c}))}}_isTallSymbol(t){let e=!1,i=!1;if(t)for(let r=0;r<t.length&&(!e||!i);r++){const n=t[r];n.type==="size"&&(n.axis==="height"&&(e=!0),n.axis==="width-and-depth"&&(i=!0))}return e&&i}async _generatePreviewsForLegendElements(t,e,i){var n,s;const r=[];for(const o of t)for(const a of o.infos??[])if("infos"in a&&a.infos&&r.push(this._generatePreviewsForLegendElements([a],e,i)),Doe(a)&&a.symbol&&!a.preview){let l=!0;if(a.symbol.type==="cim"){const{minScale:c,maxScale:d}=a.symbol.data;(c&&c<this.scale||d&&d>this.scale)&&(l=!1)}l&&r.push(this._generateSymbolPreviewForInfo(a,{...e,clipBloomEffect:"theme"in o&&o.theme==="spike",effectView:(n=i==null?void 0:i.arrowMarkerSymbols)!=null&&n.has(a.symbol)?null:e.effectView},i?{isDefault:a.symbol===i.defaultSymbol,applyScaleDrivenSize:!((s=i.arrowMarkerSymbols)!=null&&s.has(a.symbol))}:void 0))}await Promise.all(r)}async _generateSymbolPreviewForInfo(t,e,i){var r,n,s,o;try{let a=!(i!=null&&i.isDefault)&&t.size==null&&this._hasSizeRamp?ji(sn.size):t.size;if(this._scaleDrivenSizeVariable&&(i!=null&&i.applyScaleDrivenSize)){const{getSize:d}=await ye(()=>Promise.resolve().then(()=>Sw),void 0);a=d(this._scaleDrivenSizeVariable,null,{view:this.view.type,scale:this.scale,shape:t.symbol.type==="simple-marker"?t.symbol.style:null})}const l=t.symbol.type==="cim"?{style:"legend",cimOptions:{allowScalingUp:!(i!=null&&i.isDefault)&&this._hasSizeRamp||!(!this._scaleDrivenSizeVariable||!(i!=null&&i.applyScaleDrivenSize)),viewParams:this.isScaleDriven?{viewingMode:((r=this.view)==null?void 0:r.type)==="2d"?"map":(n=this.view)==null?void 0:n.viewingMode,scale:(s=this.view)==null?void 0:s.scale}:null}}:{},c=t.label&&typeof t.label!="string"?null:await jp("previewTemplateAriaLabel",t.label);t.preview=await twe(t.symbol,{size:a,scale:!1,ariaLabel:c,...e,...l})}catch{t.preview=null,Ie.getLogger(this).warn(`Generating symbol preview failed for symbol type: ${(o=t.symbol)==null?void 0:o.type}`)}}_getClusterRenderer(t){var n,s;this._hasClusterSizeVariable=!1;const e="renderer"in this.layer?this.layer.renderer:null,i=((n=t.renderer)==null?void 0:n.clone())||(e==null?void 0:e.clone()),r=vnt(t,this.layerView,this.view);if(r&&i!=null&&"visualVariables"in i&&!((s=i.visualVariables)==null?void 0:s.some((a=>a.type==="size"&&a.target!=="outline"&&!PA.test(a.valueExpression))))){if("clusterMinSize"in t&&"clusterMaxSize"in t){const{clusterMinSize:l,clusterMaxSize:c}=t;r.legendOptions=new Hge({showLegend:l!==c})}const a=i.visualVariables||[];i.visualVariables=a.concat([r]),this._hasClusterSizeVariable=!0}return i}async _loadRenderer(t){const e=[],i=t.clone(),r=await S9(i);if(D0(i)||z0(i)){const n=(i.classBreakInfos||i.uniqueValueInfos).map((s=>this._fetchSymbol(s.symbol,r).then((o=>{s.symbol=o})).catch((()=>{s.symbol=null}))));Array.prototype.push.apply(e,n)}return e.push(this._fetchSymbol(i.symbol||i.defaultSymbol,i.defaultSymbol?null:r).then((n=>{this._applySymbolToRenderer(i,n,j1(i))})).catch((()=>{this._applySymbolToRenderer(i,null,j1(i))}))),await Promise.allSettled(e),i}_applySymbolToRenderer(t,e,i){i?t.symbol=e:t.defaultSymbol=e}async _fetchSymbol(t,e){if(!t)throw new Error;if(t.type==="web-style"){const i=this._webStyleSymbolCache;try{const r=await t.fetchSymbol({cache:i});return this._getAppliedCloneSymbol(r,e)}catch{throw Ie.getLogger(this).warn("Fetching web-style failed!"),new Error}}return this._getAppliedCloneSymbol(t,e)}_getAppliedCloneSymbol(t,e){if(!t||!e)return t;const i=t.clone(),r=e&&e.toRgba();return i.type.includes("3d")?this._applyColorTo3dSymbol(i,r):i.type==="cim"?sbe(i,e):i.color&&(i.color=new _e(r||i.color)),i}_applyColorTo3dSymbol(t,e){e&&t.symbolLayers.forEach((i=>{i&&(i.material||(i.material={}),i.material.color=new _e(e))}))}async _getVisualVariableLegendElements(t,e){var y,g;if(!("visualVariables"in t)||t.type==="vector-field")return null;const i=t.visualVariables??[],r=[],n=[],s=[],o=Kh(t,"reference-size")??Kh(t,"spike");let a;if(((y=o==null?void 0:o.sizeStops)==null?void 0:y.length)===2&&(D0(t)||z0(t))){const[b,_]=o.sizeStops;a=new $i({field:o.field??void 0,normalizationField:o.normalizationField,minSize:to(b.size,10,100),maxSize:to(_.size,50,150),minDataValue:b.value,maxDataValue:_.value}),n.push(a)}for(const b of i)b.type==="color"?r.push(b):b.type==="size"?n.push(b):b.type==="opacity"&&s.push(b);const l=[...r,...n,...s];let c,d;if(r.length===0&&D0(t)&&t.classBreakInfos&&t.classBreakInfos.length===1){const b=t.classBreakInfos[0];c=b&&b.symbol}if(r.length===0&&j1(t)&&(c=t.symbol),c)if(c.type.includes("3d")){const b=c.symbolLayers.at(0);b.type==="water"?b.color!=null&&(d=b.color):((g=b.material)==null?void 0:g.color)!=null&&(d=b.material.color)}else c.url||(d=c.color);const f=this.effectList;return(await Promise.all(l.map((async b=>{if(!b.legendOptions||b.legendOptions.showLegend!==!1){const _=l7(t)?b.field:this._getRampTitle(b,e);let x=null;const E=kYe(e,b,this.view.timeZone);if(b.type==="color"){const C=await $9(b,null,E)??[];x={type:"color-ramp",title:_,infos:C,preview:O0(C.map((k=>k.color)),{effectList:f,ariaLabel:await jp("previewColorRampAriaLabel")})},this._hasColorRamp||(this._hasColorRamp=C.length>0)}else if(b.type==="size"&&b.target!=="outline")PA.test(b.valueExpression)?this._hasClusterSizeVariable||(this._scaleDrivenSizeVariable=b):(x=await this._getSizeLegendElement(_,b,t,E),a===b&&(o==null?void 0:o.theme)==="spike"&&(x.theme=o.theme),this._hasSizeRamp||(this._hasSizeRamp=!(x.infos==null||!x.infos.length)));else if(b.type==="opacity"){const C=await $9(b,d,E)??[];x={type:"opacity-ramp",title:_,infos:C,preview:O0(C.map((k=>k.color)),{effectList:f,ariaLabel:await jp("previewColorRampAriaLabel")})},this._hasOpacityRamp||(this._hasOpacityRamp=C.length>0)}return x!=null&&x.infos?x:null}})))).filter(Kr)}_getDomainName(t,e,i){var r;if(t&&typeof t!="function"){const n="getField"in i&&((r=i.getField)==null?void 0:r.call(i,t)),s=n&&"getFieldDomain"in i&&i.getFieldDomain?i.getFieldDomain(n.name,{excludeImpliedDomains:fe("esri-widget-legacy-field-domain-calculation")}):null;return(s==null?void 0:s.type)==="coded-value"?s.getName(e):null}return null}_getClusterTitle(t){const e=this.layer,i=t.field;if("featureReduction"in e&&e.featureReduction&&e.featureReduction.type==="cluster"){const r=e.featureReduction,n="popupTemplate"in r&&r.popupTemplate,s=n&&n.fieldInfos;if(s){for(const o of s)if(o.fieldName===i)return i==="cluster_count"?o.label||{showCount:!0}:o.label}}return{showCount:!0}}_getRampTitle(t,e){var c,d;let i=t.field,r=t.normalizationField,n=!1,s=!1,o=!1,a=null;i=typeof i=="function"?null:i,r=typeof r=="function"?null:r;const l=(c=t.legendOptions)==null?void 0:c.title;if(l!=null)a=l;else if(t.valueExpressionTitle)a=t.valueExpressionTitle;else{if("renderer"in e&&e.renderer&&"authoringInfo"in e.renderer&&((d=e.renderer.authoringInfo)!=null&&d.visualVariables)){const f=e.renderer.authoringInfo.visualVariables;for(let y=0;y<f.length;y++){const g=f[y];if(g.type==="color"){if(g.style==="ratio"){n=!0;break}if(g.style==="percent"){s=!0;break}if(g.style==="percent-of-total"){o=!0;break}}}}a={field:i&&this._getFieldAlias(i,e),normField:r&&this._getFieldAlias(r,e),ratio:n,ratioPercent:s,ratioPercentTotal:o}}return a}_getRendererTitle(t,e){var a;const i=t;if((a=i.legendOptions)!=null&&a.title)return i.legendOptions.title;if(i.valueExpressionTitle)return i.valueExpressionTitle;let r=i.field,n=null,s=null;if(D0(i)&&(n=i.normalizationField,s=i.normalizationType==="percent-of-total"),r=typeof r=="function"?null:r,n=typeof n=="function"?null:n,z0(i)){const{field2:l,field3:c,fieldDelimiter:d}=i;let f=r&&this._getFieldAlias(r,e);return l&&(f=`<${f}>${d}<${this._getFieldAlias(l,e)}>`,c&&(f=`${f}${d}<${this._getFieldAlias(c,e)}>`)),f}let o=null;return(r||n)&&(o={field:r&&this._getFieldAlias(r,e),normField:n&&this._getFieldAlias(n,e),normByPct:s}),o}_getFieldAlias(t,e){var d,f;const i="popupTemplate"in e?e.popupTemplate:null,r=i==null?void 0:i.fieldInfos;let n=r==null?void 0:r.find((y=>t===y.fieldName)),s=null;"getField"in e&&e.getField?s=e.getField(t):"fieldsIndex"in e&&e.fieldsIndex&&(s=e.fieldsIndex.get(t));let o=null;const a="featureReduction"in e&&e.featureReduction;a&&(n??(n="popupTemplate"in a?(f=(d=a.popupTemplate)==null?void 0:d.fieldInfos)==null?void 0:f.find((y=>{var g;return(t==null?void 0:t.toLowerCase())===((g=y.fieldName)==null?void 0:g.toLowerCase())})):void 0),"fields"in a&&a.fields&&(o=a.fields.find((y=>{var g;return((g=y.name)==null?void 0:g.toLowerCase())===(t==null?void 0:t.toLowerCase())}))));const l=n||s||o;let c=null;return l&&(c=(n==null?void 0:n.label)||(s==null?void 0:s.alias)||(o==null?void 0:o.alias)||"name"in l&&l.name||"fieldName"in l&&l.fieldName||null),c}_isUnclassedRenderer(t){const e=t.visualVariables;let i=!1;return D0(t)&&t.classBreakInfos&&t.classBreakInfos.length===1&&e&&(i=t.field?e.some((r=>!(!r||t.field!==r.field||(t.normalizationField||r.normalizationField)&&t.normalizationField!==r.normalizationField))):!!e.length),i}};u([h()],dn.prototype,"children",void 0),u([h({readOnly:!0})],dn.prototype,"effectList",null),u([h()],dn.prototype,"layerView",void 0),u([h()],dn.prototype,"layer",void 0),u([h()],dn.prototype,"legendElements",void 0),u([h({readOnly:!0})],dn.prototype,"opacity",null),u([h()],dn.prototype,"parent",void 0),u([h({readOnly:!0,dependsOn:[]})],dn.prototype,"ready",null),u([h()],dn.prototype,"hideLayersNotInCurrentView",void 0),u([h()],dn.prototype,"keepCacheOnDestroy",void 0),u([h()],dn.prototype,"respectLayerDefinitionExpression",void 0),u([h()],dn.prototype,"respectLayerVisibility",void 0),u([h({readOnly:!0})],dn.prototype,"scale",null),u([h()],dn.prototype,"sublayerIds",void 0),u([h({readOnly:!0})],dn.prototype,"isScaleDriven",null),u([h()],dn.prototype,"title",void 0),u([h({readOnly:!0,dependsOn:["ready"],value:0})],dn.prototype,"version",null),u([h()],dn.prototype,"view",void 0),dn=u([V("esri.widgets.Legend.support.ActiveLayerInfo")],dn);const Xv={state:"state",view:"view",allLayerViews:"all-layer-views",legendProperties:"legend-properties"},c1e=Ze.ofType(dn),Wlt=new Set(["esri.layers.BuildingSceneLayer","esri.layers.CatalogLayer","esri.layers.CSVLayer","esri.layers.FeatureLayer","esri.layers.GeoJSONLayer","esri.layers.GeoRSSLayer","esri.layers.GroupLayer","esri.layers.HeatmapLayer","esri.layers.ImageryLayer","esri.layers.ImageryTileLayer","esri.layers.MapImageLayer","esri.layers.OGCFeatureLayer","esri.layers.OrientedImageryLayer","esri.layers.ParquetLayer","esri.layers.PointCloudLayer","esri.layers.StreamLayer","esri.layers.SceneLayer","esri.layers.SubtypeGroupLayer","esri.layers.TileLayer","esri.layers.VoxelLayer","esri.layers.WFSLayer","esri.layers.WMSLayer","esri.layers.WMTSLayer","esri.layers.WCSLayer","esri.layers.LinkChartLayer","esri.layers.catalog.CatalogFootprintLayer","esri.layers.catalog.CatalogDynamicGroupLayer","esri.layers.knowledgeGraph.KnowledgeGraphSublayer","esri.layers.KnowledgeGraphLayer"]),u1e="view.basemapView.baseLayerViews",d1e="view.groundView.layerViews",h1e="view.basemapView.referenceLayerViews",Zlt=[u1e,d1e,"view.layerViews",h1e];let $l=class extends tt{constructor(e){super(e),this._layerViewByLayerId={},this._layerInfosByLayerViewId={},this._activeLayerInfosByLayerViewId={},this._activeLayerInfosWithNoParent=new Ze,this.activeLayerInfos=new c1e,this.basemapLegendVisible=!1,this.groundLegendVisible=!1,this.hideLayersNotInCurrentView=!1,this.keepCacheOnDestroy=!1,this.respectLayerDefinitionExpression=!1,this.respectLayerVisibility=!0,this.layerInfos=[],this.view=null}initialize(){this.addHandles($e((()=>this.view),(()=>this._viewHandles()),kt),Xv.view),this.addHandles(jG((()=>this._refresh())))}destroy(){this._destroyViewActiveLayerInfos(),this.view=null}get state(){var e;return(e=this.view)!=null&&e.ready?"ready":"disabled"}_viewHandles(){this.removeHandles(Xv.state),this.view&&this.addHandles($e((()=>this.state),(()=>this._stateHandles()),kt),Xv.state)}_stateHandles(){this._resetAll(),this.state==="ready"&&this._watchPropertiesAndAllLayerViews()}_resetAll(){this.removeHandles([Xv.allLayerViews,Xv.legendProperties]),this._destroyViewActiveLayerInfos(),this.activeLayerInfos.removeAll()}_destroyViewActiveLayerInfos(){Object.keys(this._activeLayerInfosByLayerViewId).forEach(this._destroyViewActiveLayerInfo,this)}_destroyViewActiveLayerInfo(e){this.removeHandles(e);const i=this._activeLayerInfosByLayerViewId[e];delete this._activeLayerInfosByLayerViewId[e],i!=null&&i.parent&&i.parent.children.remove(i)}_watchPropertiesAndAllLayerViews(){const{view:e}=this;if(!e)return;const{allLayerViews:i}=e;i.length&&this._refresh(),this.addHandles(i.on("change",(r=>this._allLayerViewsChangeHandle(r))),Xv.allLayerViews),this.addHandles($e((()=>[this.layerInfos,this.basemapLegendVisible,this.groundLegendVisible]),(()=>this._propertiesChangeHandle())),Xv.legendProperties)}_allLayerViewsChangeHandle(e){e.moved.length?this._propertiesChangeHandle():(e.removed.forEach((i=>this._destroyViewActiveLayerInfo(i.uid))),this._refresh())}_propertiesChangeHandle(){this._destroyViewActiveLayerInfos(),this._refresh()}_refresh(){this._layerInfosByLayerViewId={},this.activeLayerInfos.removeAll(),this._generateLayerViews().filter(this._filterLayerViewsByLayerInfos,this).filter(this._isLayerViewSupported,this).forEach(this._generateActiveLayerInfo,this),this._sortActiveLayerInfos(this.activeLayerInfos)}_sortActiveLayerInfos(e){const i=this.view;if(e.length<2||!i)return;const r=[];e.forEach((s=>{if(!s.parent){const o=s.layer.parent,a=o&&"uid"in o&&this._layerViewByLayerId[o.uid],l=a&&this._activeLayerInfosByLayerViewId[a.uid];l&&e.includes(l)&&(r.push(s),s.parent=l,l.children.add(s),this._sortActiveLayerInfos(l.children))}})),e.removeMany(r);const n={};i.allLayerViews.forEach(((s,o)=>n[s.layer.uid]=o)),e.sort(((s,o)=>{const a=n[s.layer.uid]||0;return(n[o.layer.uid]||0)-a}))}_generateLayerViews(){const e=[];return Zlt.filter(this._filterLayerViews,this).map((i=>Mc(this,i))).filter((i=>i!=null)).forEach(this._collectLayerViews("layerViews",e)),e}_filterLayerViews(e){const i=!this.basemapLegendVisible&&(e===u1e||e===h1e),r=!this.groundLegendVisible&&e===d1e;return!i&&!r}_collectLayerViews(e,i){const r=n=>(n&&n.forEach((s=>{i.push(s),r(s[e])})),i);return r}_filterLayerViewsByLayerInfos(e){const i=this.layerInfos;return!i||!i.length||i.some((r=>this._hasLayerInfo(r,e)))}_hasLayerInfo(e,i){const r=this._isLayerUIDMatching(e.layer,i.layer.uid);return r&&(this._layerInfosByLayerViewId[i.uid]=e),r}_isLayerUIDMatching(e,i){return e&&(e.uid===i||this._hasLayerUID(e.layers,i))}_hasLayerUID(e,i){return e&&e.some((r=>this._isLayerUIDMatching(r,i)))}_isLayerViewSupported(e){return!!Wlt.has(e.layer.declaredClass)&&(this._layerViewByLayerId[e.layer.uid]=e,!0)}_generateActiveLayerInfo(e){this._isLayerActive(e)?this._buildActiveLayerInfo(e):(this.removeHandles(e.uid),this.addHandles($e((()=>{var i;return[e.legendEnabled,(i=e.layer)==null?void 0:i.legendEnabled]}),(()=>this._layerActiveHandle(e))),e.uid))}_layerActiveHandle(e){this._isLayerActive(e)&&(this.removeHandles(e.uid),this._buildActiveLayerInfo(e))}_isLayerActive(e){var i;return!this.respectLayerVisibility||e.legendEnabled&&((i=e.layer)==null?void 0:i.legendEnabled)}_buildActiveLayerInfo(e){var a;const i=e.layer,r=e.uid,n=this._layerInfosByLayerViewId[r];let s=this._activeLayerInfosByLayerViewId[r];if(!s){const l=(n==null?void 0:n.title)!==void 0&&n.layer.uid===i.uid;s=new dn({layer:i,layerView:e,title:l?n.title:i.title,view:this.view??void 0,respectLayerDefinitionExpression:this.respectLayerDefinitionExpression,respectLayerVisibility:this.respectLayerVisibility,hideLayersNotInCurrentView:this.hideLayersNotInCurrentView,keepCacheOnDestroy:this.keepCacheOnDestroy,sublayerIds:(n==null?void 0:n.sublayerIds)||[]}),this._activeLayerInfosByLayerViewId[r]=s}const o=i.parent&&"uid"in i.parent?this._layerViewByLayerId[(a=i.parent)==null?void 0:a.uid]:null;if(s.parent=this._activeLayerInfosByLayerViewId[o==null?void 0:o.uid],!this.hasHandles(r)){const l=[$e((()=>i.title),(c=>this._titleHandle(c,s))),$e((()=>[i.opacity,"renderer"in i&&i.renderer,"pointSymbol"in i&&i.pointSymbol,"lineSymbol"in i&&i.lineSymbol,"polygonSymbol"in i&&i.polygonSymbol]),(()=>this._constructLegendElements(s))),Sn((()=>{var c;return((c=this.view)==null?void 0:c.stationary)===!0}),(()=>this._scaleHandle(s)),kt),$e((()=>e.layer?eoe(e.layer,e.view):null),(()=>this._constructLegendElements(s))),$e((()=>e.updating),(()=>{e.layer!=null&&eoe(e.layer,e.view)!=null&&this._constructLegendElements(s)})),$e((()=>"effect"in i&&i.effect),(()=>this._constructLegendElements(s))),Sn((()=>{var c;return(c=this.view)==null?void 0:c.timeZone}),(()=>this._constructLegendElements(s)),kt)];if(this.respectLayerVisibility){const c=$e((()=>e.legendEnabled),(f=>this._legendEnabledHandle(f,s))),d=$e((()=>i.legendEnabled),(f=>this._legendEnabledHandle(f,s)));l.push(c,d)}if(this.respectLayerDefinitionExpression&&"definitionExpression"in i){const c=$e((()=>[i.definitionExpression,this.respectLayerDefinitionExpression]),(()=>{s.respectLayerDefinitionExpression=this.respectLayerDefinitionExpression,this._constructLegendElements(s)}));l.push(c)}this.addHandles(l,r)}s.isScaleDriven||this._constructLegendElements(s),this._addActiveLayerInfo(s)}_titleHandle(e,i){i.title=e,this._constructLegendElements(i)}_legendEnabledHandle(e,i){e?this._addActiveLayerInfo(i):this._removeActiveLayerInfo(i)}_scaleHandle(e){(e.isScaleDriven||e.hideLayersNotInCurrentView)&&this._constructLegendElements(e)}_addActiveLayerInfo(e){var n;const{layerView:i,layer:r}=e;if(this._isLayerActive(i)&&!this.activeLayerInfos.includes(e)){const s=e.parent;if(s)s.children.includes(e)||s.children.push(e),this._sortActiveLayerInfos(s.children);else{const o=(n=this.layerInfos)==null?void 0:n.some((l=>l.layer.uid===r.uid)),a=r.parent;a&&"uid"in a&&this._layerViewByLayerId[a.uid]&&!o?this._activeLayerInfosWithNoParent.add(e):(this.activeLayerInfos.add(e),this._sortActiveLayerInfos(this.activeLayerInfos))}if(this._activeLayerInfosWithNoParent.length){const o=[];this._activeLayerInfosWithNoParent.forEach((a=>{const l=a.layer.parent,c=l&&"uid"in l?this._layerViewByLayerId[l==null?void 0:l.uid]:null,d=this._activeLayerInfosByLayerViewId[c==null?void 0:c.uid];d&&(o.push(a),a.parent=d)})),o.length&&(this._activeLayerInfosWithNoParent.removeMany(o),o.forEach((a=>this._addActiveLayerInfo(a))))}}}_removeActiveLayerInfo(e){const i=e.parent;i?i.children.remove(e):this.activeLayerInfos.remove(e)}_constructLegendElements(e){const i=e.layer;"featureCollections"in i&&i.featureCollections?e.buildLegendElementsForFeatureCollections(i.featureCollections):"featureReduction"in i&&i.featureReduction&&"renderer"in i.featureReduction&&(i.featureReduction.type==="binning"||i.featureReduction.type==="cluster")&&(!this.view||i.featureReduction.maxScale<=this.view.scale)?e.buildLegendElementsForFeatureReduction(i.featureReduction):"renderer"in i&&i.renderer&&!("sublayers"in i)?e.buildLegendElementsForRenderer(i.renderer):"url"in i&&i.url&&i.type!=="catalog"&&i.type!=="knowledge-graph"?e.buildLegendElementsForTools():e.children.forEach((r=>this._constructLegendElements(r)))}};u([h({type:c1e})],$l.prototype,"activeLayerInfos",void 0),u([h()],$l.prototype,"basemapLegendVisible",void 0),u([h()],$l.prototype,"groundLegendVisible",void 0),u([h()],$l.prototype,"hideLayersNotInCurrentView",void 0),u([h()],$l.prototype,"keepCacheOnDestroy",void 0),u([h()],$l.prototype,"respectLayerDefinitionExpression",void 0),u([h()],$l.prototype,"respectLayerVisibility",void 0),u([h()],$l.prototype,"layerInfos",void 0),u([h({readOnly:!0})],$l.prototype,"state",null),u([h()],$l.prototype,"view",void 0),$l=u([V("esri.widgets.Legend.LegendViewModel")],$l);const Di="esri-legend--card",SE="esri-legend",Ct={base:Di,stacked:`${SE}--stacked`,carouselTitle:`${Di}__carousel-title`,intervalSeparator:`${Di}__interval-separator`,imageryLayerStretchedImage:`${Di}__imagery-layer-image--stretched`,imageLabel:`${Di}__image-label`,layerCaption:`${Di}__layer-caption`,labelElement:`${Di}__label-element`,layerRow:`${Di}__layer-row`,labelCell:`${Di}__label-cell`,message:`${Di}__message`,rampLabel:`${Di}__ramp-label`,section:`${Di}__section`,serviceCaptionText:`${Di}__service-caption-text`,serviceContent:`${Di}__service-content`,service:`${Di}__service`,groupLayer:`${Di}__group-layer`,groupLayerChild:`${Di}__group-layer-child`,symbol:`${Di}__symbol`,sizeRampRow:`${Di}__size-ramp-row`,symbolRow:`${Di}__symbol-row`,symbolCell:`${Di}__symbol-cell`,carousel:`${Di}__carousel`,carouselItem:`${Di}__carousel-item`,intervalSeparatorsContainer:`${Di}__interval-separators-container`,relationshipLabelContainer:`${Di}__relationship-label-container`,labelContainer:`${Di}__label-container`,serviceCaptionContainer:`${Di}__service-caption-container`,symbolContainer:`${Di}__symbol-container`,colorRampContainer:`${Di}__color-ramp-container`,sizeRampContainer:`${Di}__size-ramp-container`,sizeRampPreview:`${Di}__size-ramp-preview`,pieChartRampPreview:`${Di}__pie-chart-ramp-preview`,sizeRampHorizontal:`${SE}__size-ramp--horizontal`,rampLabelsContainer:`${SE}__ramp-labels`,layerInfo:`${SE}__layer-cell ${SE}__layer-cell--info`,univariateAboveAndBelowColorRamp:"esri-univariate-above-and-below-ramp__color--card"};function Jlt(t,e){return e}function Br(t){const e=this;t.appendChild(e)}function y$(t,e,i){if(!e)return;if(typeof e=="number")return e;if(typeof e=="string")return Cg(e);if("value"in e||"unit"in e)return xo(t.dotValue,e);if("colorName"in e&&"bandName"in e)return t[e.colorName]+": "+(t[e.bandName]||e.bandName);if("showCount"in e)return e.showCount?t.clusterCountTitle:void 0;let r=null;return Jlt(e,i)?r=e.ratioPercentTotal?"showRatioPercentTotal":e.ratioPercent?"showRatioPercent":e.ratio?"showRatio":e.normField?"showNormField":e.field?"showField":null:p1e(e,i)&&(r=e.normField?"showNormField":e.normByPct?"showNormPct":e.field?"showField":null),r?xo(r==="showField"?"{field}":t[r],{field:e.field,normField:e.normField}):void 0}function p1e(t,e){return!e}function f1e(t,e){return!!(e&&e==="Stretched"&&"version"in t&&typeof t.version=="number"&&t.version>=10.3&&t.declaredClass==="esri.layers.ImageryLayer")}function Ylt(t,e){var i;return t.label?e[t.label]+": "+(typeof t.value=="string"?t.value:Qr(t.value??0,{style:"decimal",notation:(i=t.value)!=null&&i.toString().toLowerCase().includes("e")?"scientific":"standard"})):""}function m1e(t,e,i){switch(e){case"heatmap-ramp":return i[t.label]||t.label;case"stretch-ramp":return Ylt(t,i);default:return t.label}}function y1e(t,e){if(!t.title||typeof t.title=="string")return t.title;const i=t.type==="color-ramp"||t.type==="opacity-ramp",r=t.title,n=y$(e,r,i);return p1e(r,i)&&r.title?`${r.title} (${n})`:n}function g1e(t){return!(!t||typeof t!="object")}const Xlt=25,Klt=25,Qlt=100;let V0=class extends Zi{constructor(e,i){super(e,i),this.effectList=null,this.legendElement=null,this.opacity=1}render(){const e=this.legendElement.infos.slice().reverse();return G("div",{class:this.classes(Ct.layerRow,Ct.colorRampContainer)},this._renderRampLabel(e[0]),G("div",{class:Ct.symbolContainer},this._renderPreview(e),this._renderMiddleStopRampLabel(e)),this._renderRampLabel(e.at(-1)))}_renderPreview(e){const{opacity:i}=this,r=this.legendElement.type==="heatmap-ramp",n=e.length-1,s=Klt,o=n>2&&!r?Xlt*n:Qlt,a=o+20,l=10,c=[[{shape:{type:"path",path:`M0 ${s/2} L${l} 0 L${l} ${s} Z`},fill:e[0].color,stroke:{width:0}},{shape:{type:"rect",x:l,y:0,width:o,height:s},fill:{type:"linear",x1:l,y1:0,x2:o+l,y2:0,colors:e.map(((y,g)=>({color:y.color,offset:r&&"ratio"in y?y.ratio:g/n})))},stroke:{width:0}},{shape:{type:"path",path:`M${o+l} 0 L${a} ${s/2} L${o+l} ${s} Z`},fill:e[e.length-1].color,stroke:{width:0}}]],d=Bbe(c,a,s),f={filter:R2(this.effectList)??void 0,opacity:i==null?void 0:`${i}`};return G("div",{styles:f},d)}_renderMiddleStopRampLabel(e){const i=e.length%2!=0?e[e.length/2|0]:null;return i?G("div",{class:Ct.intervalSeparatorsContainer},G("div",{class:Ct.intervalSeparator},"|"),this._renderRampLabel(i)):null}_renderRampLabel(e){return G("div",{class:Ct.rampLabel},m1e(e,this.legendElement.type,this.messages))}};u([h()],V0.prototype,"effectList",void 0),u([h()],V0.prototype,"legendElement",void 0),u([h()],V0.prototype,"messages",void 0),u([h()],V0.prototype,"opacity",void 0),V0=u([V("esri.widgets.Legend.styles.card.ColorRamp")],V0);const ect="#ddd",js=window.devicePixelRatio,Kv="esri-spike-ramp",Zf={spikeRampContainer:`${Kv}__container`,spikeRampPreviewContainer:`${Kv}__preview-container`,spikeRampPreview:`${Kv}__preview`,spikeRampSymbolPreview:`${Kv}__symbol-preview`,spikeRampLines:`${Kv}__lines`,spikeRampLabelsContainer:`${Kv}__labels-container`,spikeRampLabel:`${Kv}__label`};function v1e(t){return t.infos.length!==5?null:G("div",{class:Zf.spikeRampContainer},G("div",{class:Zf.spikeRampPreviewContainer},tct(t),ict(t)),rct(t))}function tct(t){const[e,i,r]=kW(t).map((({preview:n})=>{if(!n)return null;const s=n.cloneNode(!0);return s.classList.add(Zf.spikeRampSymbolPreview),s}));return e&&i&&r?G("div",{class:Zf.spikeRampPreview},G("div",{afterCreate:Br,bind:r}),G("div",{afterCreate:Br,bind:i}),G("div",{afterCreate:Br,bind:e})):null}function ict(t){const[{width:e,height:i},{width:r},{width:n,height:s}]=kW(t).map((({size:Z})=>g1e(Z)?{width:pi(Z.width),height:pi(Z.height)}:{width:0,height:0})),o=10,a=8,l=e+r+n+3*o,c=i,d=document.createElement("canvas");d.width=(l+o)*js,d.height=c*js,d.style.width=d.width/js+"px",d.style.height=d.height/js+"px";const f=d.getContext("2d");f.beginPath();const y=l-(e/2+o),g=0,b=l+a;f.moveTo(y*js,g*js),f.lineTo(b*js,0*js);const x=(l-a)/2,E=(i-s)/2,C=l+a,k=(i-s)/2;f.moveTo(x*js,E*js),f.lineTo(C*js,k*js);const O=n/2,D=c-s,B=l+a,j=c-s;return f.moveTo(O*js,D*js),f.lineTo(B*js,j*js),f.strokeStyle=ect,f.lineWidth=.5*js,f.stroke(),G("div",{afterCreate:Br,bind:d,class:Zf.spikeRampLines})}function rct(t){const[{label:e,height:i},{label:r},{label:n,height:s}]=kW(t).map((({label:d,size:f})=>({label:d,height:g1e(f)?pi(f.height):0}))),o=i-s,a={position:"absolute",top:"0"},l={position:"absolute",top:o/2+"px"},c={position:"absolute",top:`${o}px`};return G("div",{class:Zf.spikeRampLabelsContainer},G("div",{class:Zf.spikeRampLabel,styles:a},e),G("div",{class:Zf.spikeRampLabel,styles:l},r),G("div",{class:Zf.spikeRampLabel,styles:c},n))}function kW(t){return t.infos.filter(((e,i)=>i%2==0))}const nct="#ddd",V_=window.devicePixelRatio;function sct(t){var i,r;if(!t)return;if(t.type.includes("3d")){if(!((i=t.symbolLayers)!=null&&i.length))return;const n=t.symbolLayers.at(-1),s=(r=n.resource)==null?void 0:r.primitive;return s==="circle"||s==="cross"||s==="kite"||s==="sphere"||s==="cube"||s==="diamond"}const e=t.style;return e==="circle"||e==="diamond"||e==="cross"}function oct(t){var e,i;if(t){if(t.type.includes("3d")){if(!((e=t.symbolLayers)!=null&&e.length))return;const r=t.symbolLayers.at(-1),n=(i=r==null?void 0:r.resource)==null?void 0:i.primitive;return n==="triangle"||n==="cone"||n==="tetrahedron"}return t.style==="triangle"}}let j0=class extends Zi{constructor(e,i){super(e,i),this.hasIndicators=!1,this.legendElement=null,this.opacity=1}render(){if(this.legendElement.theme==="spike")return G("div",{styles:{display:"flex",flex:"1",justifyContent:"center"}},v1e(this.legendElement));const{legendElement:e,hasIndicators:i,opacity:r}=this,n=e.infos,s=n.at(0),o=n.at(-1);if(!s||!o)return null;const{label:a,...l}=s,{label:c,...d}=o;let f=l.preview,y=d.preview;const g={"flex-direction":i?"column":"row-reverse"};if(!f||!y)return null;f=f.cloneNode(!0),f.style.display="flex",y=y.cloneNode(!0),y.style.display="flex";const b={opacity:`${r??""}`};return G("div",{class:this.classes(Ct.layerRow,{[Ct.sizeRampRow]:i})},G("div",{class:Ct.rampLabel},i?a:c),G("div",{class:Ct.sizeRampContainer,styles:g},G("div",{afterCreate:Br,bind:f,class:Ct.sizeRampPreview,styles:b}),this._renderSizeRampLines(e),G("div",{afterCreate:Br,bind:y,class:Ct.sizeRampPreview,styles:b})),G("div",{class:Ct.rampLabel},i?c:a))}_renderSizeRampLines(e){const i=e.infos,r=i.at(0),n=i.at(-1);if(!r||!n)return null;const s=r.symbol,o=this.hasIndicators,a=r.size&&typeof r.size=="number"?r.size:0,l=n.size&&typeof n.size=="number"?n.size:0,c=r.outlineSize||0,d=n.outlineSize||0,f=pi(a+c)*V_,y=pi(l+d)*V_,g=o?f:f+50*V_,b=o?f/2+50*V_:f,_=oct(s),x=sct(s),E=document.createElement("canvas");E.width=g,E.height=b,E.style.width=E.width/V_+"px",E.style.height=E.height/V_+"px";const C=E.getContext("2d");if(o){C.beginPath();const k=0,O=0,D=g/2-y/2,B=b;C.moveTo(k,O),C.lineTo(D,B);const j=g,Z=0,X=g/2+y/2,ee=b;C.moveTo(j,Z),C.lineTo(X,ee)}else{C.beginPath();const k=0,O=b/2-y/2,D=g;C.moveTo(k,O),C.lineTo(D,0);const j=0,Z=b/2+y/2,X=g,ee=b;C.moveTo(j,Z),C.lineTo(X,ee)}return C.strokeStyle=nct,C.stroke(),G("div",{afterCreate:Br,bind:E,styles:o?{display:"flex",marginTop:`-${_?0:x?f/2:0}px`,marginBottom:`-${_?y:x?y/2:0}px`}:{display:"flex",marginRight:`-${_?0:x?f/2:0}px`,marginLeft:`-${_?0:x?y/2:0}px`}})}};u([h()],j0.prototype,"hasIndicators",void 0),u([h()],j0.prototype,"legendElement",void 0),u([h()],j0.prototype,"messages",void 0),u([h()],j0.prototype,"opacity",void 0),j0=u([V("esri.widgets.Legend.styles.card.SizeRamp")],j0);const act=dO(),b1e=10,PW=20,fD=10,AW=20,LW={univariateAboveAndBelowSymbol:"esri-univariate-above-and-below-ramp__symbol",colorRamp:"esri-legend__color-ramp"};function lct(t="vertical"){const e="stroke:rgb(200, 200, 200);stroke-width:1";return t==="vertical"?G("svg",{height:"4",width:"10"},G("line",{style:e,x1:"0",x2:"10",y1:"2",y2:"2"})):G("svg",{height:"10",width:"10"},G("line",{style:e,x1:"5",x2:"5",y1:"0",y2:"10"}))}function cct(t,e="vertical"){const i=document.createElement("div");return i.style.height=`${PW}px`,i.className=LW.univariateAboveAndBelowSymbol,t!=null&&(i.style.opacity=t.toString()),act.append(i,lct.bind(null,e)),i}function w1e(t,e,i="vertical",r){t.infos.forEach(((n,s)=>{if(r&&s===2)n.preview=cct(e,i);else{const o=(uw(n.size)?pi(n.size):0)+(i==="horizontal"?AW:fD),a=n.preview,l=(a==null?void 0:a.tagName.toLowerCase())==="div",c=l?a:document.createElement("div");c.className=LW.univariateAboveAndBelowSymbol,i==="horizontal"?c.style.width=`${o}px`:c.style.height=`${o}px`,!l&&a&&c.appendChild(a),n.preview=c}}))}function mD(t,e="classic"){const i=t.infos,r=i.at(0),n=i.at(-1),s=uw(r.size)?pi(r.size):0,o=uw(n.size)?pi(n.size):0;return e==="classic"?(s+fD)/2:(s-o)/2}function g$(t,e){if(!t)return null;const i=t.infos.map((n=>n.color)),r=O0(e.type==="full"?i:e.type==="above"?i.slice(0,3):i.slice(2,5),{width:e.width,height:e.height,align:e.rampAlignment,effectList:e.effectList,ariaLabel:e.ariaLabel});return r.className=LW.colorRamp,e.opacity!=null&&(r.style.opacity=e.opacity.toString()),r}function RW(t,e,i,r="vertical"){let n=0;const s=t.infos,o=Math.floor(s.length/2),a=e==="full"||e==="above"?0:o,l=e==="full"||e==="below"?s.length-1:o;for(let c=a;c<=l;c++)if(i&&c===o)n+=r==="horizontal"?b1e:PW;else{const d=s[c].size;n+=(uw(d)?pi(d):0)+(r==="horizontal"?AW:fD)}return Math.round(n)}function v$(t,e,i,r="vertical"){const n=RW(t,e,i,r),s=t.infos,o=Math.floor(s.length/2),a=e==="full"||e==="above"?0:o,l=e==="full"||e==="below"?s.length-1:o,c=uw(s[a].size)?s[a].size:0,d=uw(s[l].size)?s[l].size:0,f=e==="full"?c+d:e==="above"?c:d,y=i?r==="vertical"?PW:b1e:0,g=r==="vertical"?fD*(e==="full"?2:1):AW*(e==="full"?2:1);return Math.round(n-(pi(f)/2+y/2+g/2))}function _1e(t,e,i="vertical"){const r=t.infos;let n=r.find((({type:o})=>o==="size-ramp")),s=r.find((({type:o})=>o==="color-ramp"));return n&&(n={...n},n.infos=[...n.infos],w1e(n,e,i,!0)),s&&(s={...s},s.infos=[...s.infos]),i==="horizontal"&&(n==null||n.infos.reverse(),s==null||s.infos.reverse()),{sizeRampElement:n,colorRampElement:s}}function x1e(t,e="vertical"){const i=t.infos;let r=i.find((({type:s})=>s==="size-ramp")),n=i.find((({type:s})=>s==="color-ramp"));return r&&(r={...r},r.infos=[...r.infos],w1e(r,null,e,!1)),n&&(n={...n},n.infos=[...n.infos]),e==="horizontal"&&(r==null||r.infos.reverse(),n==null||n.infos.reverse()),{sizeRampElement:r,colorRampElement:n}}const c7={marginLeft:"3px"},px={display:"table-cell",verticalAlign:"middle"},S1e={display:"flex",alignItems:"flex-start"};let U0=class extends Zi{constructor(e,i){super(e,i),this.effectList=null,this.legendElement=null,this.opacity=1}render(){var B;const{legendElement:e,opacity:i,effectList:r,key:n}=this,{sizeRampElement:s,colorRampElement:o}=_1e(e,i,"horizontal");if(!s)return null;const a=RW(s,"full",!0,"horizontal"),l=v$(s,"above",!0,"horizontal"),c=v$(s,"below",!0,"horizontal"),d=12,f=(B=this.messages)==null?void 0:B.previewColorRampAriaLabel,y=g$(o,{width:l,height:d,rampAlignment:"horizontal",opacity:i,type:"above",effectList:r,ariaLabel:f}),g=g$(o,{width:c,height:d,rampAlignment:"horizontal",opacity:i,type:"below",effectList:r,ariaLabel:f}),b=mD(s,"card"),_=s.infos.map((j=>j.label)),x=_.length-1,E=_.map(((j,Z)=>Z===0||Z===x?G("div",{key:Z},j):null)),C={display:"flex",flexDirection:"column"},k={display:"flex",flexDirection:"row"},O={marginTop:"3px",display:"flex"};Al(this.container)?O.marginRight=`${b}px`:O.marginLeft=`${b}px`;const D={width:`${a}px`,display:"flex",flexDirection:"row",justifyContent:"space-between"};return G("div",{class:Ct.layerRow,key:`${n}-container`,styles:C},G("div",{class:this.classes(Ct.symbolContainer,Ct.sizeRampHorizontal),styles:k},s.infos.map(((j,Z)=>G("div",{afterCreate:Br,bind:j.preview,class:Ct.symbol,key:Z})))),y?G("div",{class:Ct.univariateAboveAndBelowColorRamp,key:"color-ramp-preview",styles:O},G("div",{afterCreate:Br,bind:y}),G("div",{afterCreate:Br,bind:g})):null,G("div",{class:Ct.layerInfo},G("div",{class:Ct.rampLabelsContainer,styles:D},E)))}};u([h()],U0.prototype,"effectList",void 0),u([h()],U0.prototype,"legendElement",void 0),u([h()],U0.prototype,"messages",void 0),u([h()],U0.prototype,"opacity",void 0),U0=u([V("esri.widgets.Legend.styles.card.UnivariateAboveAndBelowRamp")],U0);let B0=class extends Zi{constructor(e,i){super(e,i),this.effectList=null,this.legendElement=null,this.opacity=1}render(){var E;const{legendElement:e,opacity:i,effectList:r,key:n}=this,{sizeRampElement:s,colorRampElement:o}=x1e(e,"horizontal");if(!s)return null;const a=RW(s,"full",!1,"horizontal"),l=v$(s,"full",!1,"horizontal"),c=g$(o,{width:l,height:12,rampAlignment:"horizontal",opacity:i,type:"full",effectList:r,ariaLabel:(E=this.messages)==null?void 0:E.previewColorRampAriaLabel}),d=mD(s,"card"),f=s.infos.length-1,y=s.infos.map(((C,k)=>k===0||k===f?G("div",{key:k},C.label):null)),g={display:"flex",flexDirection:"column"},b={display:"flex",flexDirection:"row"},_={marginTop:"3px",display:"flex"};Al(this.container)?_.marginRight=`${d}px`:_.marginLeft=`${d}px`;const x={width:`${a}px`,display:"flex",flexDirection:"row",justifyContent:"space-between"};return G("div",{class:Ct.layerRow,key:`${n}-container`,styles:g},G("div",{class:this.classes(Ct.symbolContainer,Ct.sizeRampHorizontal),styles:b},s.infos.map(((C,k)=>G("div",{afterCreate:Br,bind:C.preview,class:Ct.symbol,key:k})))),G("div",{class:Ct.univariateAboveAndBelowColorRamp,key:"color-ramp-preview",styles:_},G("div",{afterCreate:Br,bind:c})),G("div",{class:Ct.layerInfo},G("div",{class:Ct.rampLabelsContainer,styles:x},y)))}};u([h()],B0.prototype,"effectList",void 0),u([h()],B0.prototype,"legendElement",void 0),u([h()],B0.prototype,"messages",void 0),u([h()],B0.prototype,"opacity",void 0),B0=u([V("esri.widgets.Legend.styles.card.UnivariateColorSizeRamp")],B0);var u7;let mc=u7=class extends Zi{constructor(t,e){super(t,e),this.effectList=null,this.hasIndicators=!1,this.headingLevel=3,this.isChild=!1,this.legendElement=null}render(){const t=this._renderLegendElement(),e=y1e(this.legendElement,this.messages),i=this.hasIndicators&&!this.isChild?G("div",null,G(zb,{class:Ct.carouselTitle,level:this.headingLevel},this.activeLayerInfo.title),G(zb,{class:Ct.layerCaption,level:UJe(this.headingLevel)},e)):e?G(zb,{class:Ct.layerCaption,level:this.headingLevel},e):null;return G("section",{"aria-labelledby":this.key,class:Ct.section,id:`${this.key}-panel`,key:this.key,role:"tabpanel",tabIndex:0},i,t)}_renderLegendElement(){switch(this.legendElement.type){case"symbol-table":return this._renderSymbolTable(this.legendElement);case"size-ramp":return G(j0,{hasIndicators:this.hasIndicators,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case"color-ramp":case"opacity-ramp":case"heatmap-ramp":case"stretch-ramp":return G(V0,{effectList:this.effectList,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case"relationship-ramp":return qbe(this.legendElement,this.id,{opacity:this.layer.opacity,effectList:this.effectList,ariaLabel:this.messages.previewRelationshipRampAriaLabel,key:this.key});case"pie-chart-ramp":return G("div",{afterCreate:Br,bind:this.legendElement.preview,class:Ct.pieChartRampPreview,key:`${this.key}-preview`});case"univariate-above-and-below-ramp":return G(U0,{effectList:this.effectList,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case"univariate-color-size-ramp":return G(B0,{effectList:this.effectList,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});default:return null}}_renderSymbolTable(t){var s,o,a;const e=t.infos.map((l=>this._renderElementInfo(l,t.legendType))).filter(Boolean);if(!e.length)return null;const i=this.activeLayerInfo.legendElements.some((({type:l})=>l==="relationship-ramp")),r=(a=(o=(s=e[0])==null?void 0:s.properties)==null?void 0:o.classes)==null?void 0:a[Ct.symbolRow],n={[Ct.labelContainer]:!r&&!i,[Ct.relationshipLabelContainer]:i};return G("div",{class:this.classes(n)},e)}_renderElementInfo(t,e){var a;const{layer:i}=this,r="label"in t?t.label:null,n=`${this.key}-${r}`;if("type"in t&&t.type)return G(u7,{activeLayerInfo:this.activeLayerInfo,effectList:this.effectList,hasIndicators:this.hasIndicators,headingLevel:this.headingLevel,isChild:!0,key:n,layer:i,legendElement:t,messages:this.messages});if(!("preview"in t&&t.preview||"src"in t&&t.src))return null;const s=f1e(i,e),o=y$(this.messages,r,!1)||"";if("src"in t&&t.src)return G("div",{class:Ct.layerRow,key:`${n}-row`},this._renderImage(t,i,s),G("div",{class:Ct.imageLabel},o));if("symbol"in t&&t.preview){if(!((a=t.symbol)!=null&&a.type.includes("simple-fill"))){if(!t.label)return G("div",{afterCreate:Br,bind:t.preview,key:`${n}-row`});const l={[Ct.symbolCell]:this.hasIndicators};return G("div",{class:this.classes(Ct.layerRow,{[Ct.symbolRow]:this.hasIndicators}),key:`${n}-row`},G("div",{afterCreate:Br,bind:t.preview,class:this.classes(l)}),G("div",{class:this.classes(Ct.imageLabel,{[Ct.labelCell]:this.hasIndicators})},o))}return G("div",{class:Ct.layerRow,key:`${n}-row`},G("div",{class:Ct.labelElement,styles:this._getBackgroundStyles(t)},o))}return null}_getBackgroundStyles(t){var f,y;const e=t.symbol,i=e.color,r=!!(i!=null&&i.a),n="outline"in e?e.outline:null,s=!!((f=n==null?void 0:n.color)!=null&&f.a),o=new _e(r&&i?[i.r,i.g,i.b,i.a*this.layer.opacity]:[255,255,255,0]),a=s&&n.color?new _e([n.color.r,n.color.g,n.color.b,n.color.a*this.layer.opacity]):new _e([255,255,255,0]),l=((y=t.symbol.color)==null?void 0:y.isBright)??!0,c=l?"black":"white",d=l?"rgba(255, 255, 255, .6)":"rgba(0, 0, 0, .6)";return{background:r?o.toCss(!0):"none",color:c,textShadow:`-1px -1px 0 ${d},
                  1px -1px 0 ${d},
                  -1px 1px 0 ${d},
                  1px 1px 0 ${d}`,border:s?`1px solid ${a.toCss(!0)}`:"none",filter:R2(this.effectList)??void 0}}_renderImage(t,e,i){const{label:r,src:n,opacity:s}=t,o={[Ct.imageryLayerStretchedImage]:i,[Ct.symbol]:!i},a={opacity:`${s??e.opacity}`},l=y$(this.messages,r,!1);return G("img",{alt:l,"aria-label":l,border:0,class:this.classes(o),height:t.height,src:n,styles:a,width:t.width})}};u([h()],mc.prototype,"activeLayerInfo",void 0),u([h()],mc.prototype,"effectList",void 0),u([h()],mc.prototype,"hasIndicators",void 0),u([h()],mc.prototype,"headingLevel",void 0),u([h()],mc.prototype,"isChild",void 0),u([h()],mc.prototype,"layer",void 0),u([h()],mc.prototype,"legendElement",void 0),u([h()],mc.prototype,"messages",void 0),mc=u7=u([V("esri.widgets.Legend.styles.card.LegendElement")],mc);const uct=768;let gc=class extends Zi{constructor(t,e){super(t,e),this._hasIndicators=!1,this.activeLayerInfos=null,this.headingLevel=3,this.layout="stack",this.messages=null,this.messagesCommon=null,this.type="card",this.view=null}loadDependencies(){return zl({carousel:()=>ye(()=>Promise.resolve().then(()=>Dct),void 0),"carousel-item":()=>ye(()=>Promise.resolve().then(()=>Uct),void 0)})}render(){this._hasIndicators=this.layout==="auto"&&this.view&&this.view.container.clientWidth<=uct||this.layout==="stack";const t=this._hasIndicators?this._renderCarousel():this._renderLayers(),e={[Ct.stacked]:this._hasIndicators};return G("div",{class:this.classes(Ct.base,e)},t||G("div",{class:Ct.message},this.messages.noLegend))}_renderCarousel(){const t=[],e=this.activeLayerInfos;if(e)for(const i of e)this._renderSections(i,t);return t!=null&&t.length?G("calcite-carousel",{class:Ct.carousel,label:this.messages.carousel},t.map(((i,r)=>G("calcite-carousel-item",{class:Ct.carouselItem,key:r,label:xo(this.messagesCommon.pagination.pageText,{index:r+1,total:t.length})},i)))):null}_renderLayers(){var i;const t=this.activeLayerInfos,e=(i=t==null?void 0:t.toArray())==null?void 0:i.map((r=>this._renderLegendForLayer(r))).filter(Boolean);return e!=null&&e.length?e:null}_renderLegendForLayer(t){if(!t.ready)return null;if(t.children.length){const e=t.children.toArray().map(this._renderLegendForLayer,this);return G("section",{class:this.classes(Ct.service,Ct.groupLayer),key:t.layer.uid},G("div",{class:Ct.serviceCaptionContainer},t.title),e)}return this._renderLegendElementsForLayer(t)}_renderLegendElementsForLayer(t){var n;const e=(n=t.legendElements)==null?void 0:n.filter(Boolean);if(!(e!=null&&e.length))return null;const i=e.map((s=>G(mc,{activeLayerInfo:t,effectList:t.effectList,hasIndicators:this._hasIndicators,headingLevel:this.headingLevel,isChild:!1,key:`${t.layer.uid}-${s.type}`,layer:t.layer,legendElement:s,messages:this.messages}))),r={[Ct.groupLayerChild]:!!t.parent};return G("section",{class:this.classes(Ct.service,r),key:t.layer.uid},G("div",{class:Ct.serviceCaptionContainer},G("div",{class:Ct.serviceCaptionText},t.title)),G("div",{class:Ct.serviceContent},i))}_renderSections(t,e){if(!t.ready)return;if(t.children.length)for(const r of t.children)this._renderSections(r,e);const i=t.legendElements;if(i!=null&&i.length)for(const r of i){const n=G(mc,{activeLayerInfo:t,effectList:t.effectList,hasIndicators:this._hasIndicators,headingLevel:this.headingLevel,isChild:!1,key:`${t.layer.uid}-${r.type}`,layer:t.layer,legendElement:r,messages:this.messages});n&&e.push(n)}}};u([h()],gc.prototype,"activeLayerInfos",void 0),u([h()],gc.prototype,"headingLevel",void 0),u([h()],gc.prototype,"layout",void 0),u([h(),nn("esri/widgets/Legend/t9n/Legend")],gc.prototype,"messages",void 0),u([h(),nn("esri/t9n/common")],gc.prototype,"messagesCommon",void 0),u([h({readOnly:!0})],gc.prototype,"type",void 0),u([h()],gc.prototype,"view",void 0),gc=u([V("esri.widgets.Legend.styles.card.CardView")],gc);const $r="esri-legend",Ft={service:`${$r}__service`,label:`${$r}__service-label`,layer:`${$r}__layer`,groupLayer:`${$r}__group-layer`,groupLayerChild:`${$r}__group-layer-child`,layerTable:`${$r}__layer-table`,layerTableSizeRamp:`${$r}__layer-table--size-ramp`,layerChildTable:`${$r}__layer-child-table`,layerCaption:`${$r}__layer-caption`,layerBody:`${$r}__layer-body`,layerRow:`${$r}__layer-row`,layerInfo:`${$r}__layer-cell ${$r}__layer-cell--info`,imageryLayerStretchedImage:`${$r}__imagery-layer-image--stretched`,imageryLayerInfoStretched:`${$r}__imagery-layer-info--stretched`,symbolContainer:`${$r}__layer-cell ${$r}__layer-cell--symbols`,symbol:`${$r}__symbol`,rampContainer:`${$r}__ramps`,sizeRamp:`${$r}__size-ramp`,colorRamp:`${$r}__color-ramp`,opacityRamp:`${$r}__opacity-ramp`,rampLabelsContainer:`${$r}__ramp-labels`,rampLabel:`${$r}__ramp-label`,message:`${$r}__message`,univariateAboveAndBelowLabel:"esri-univariate-above-and-below-ramp__label"},dct=24;let G0=class extends Zi{constructor(t,e){super(t,e),this.legendElement=null,this.opacity=1}get _preview(){const t=this.legendElement.preview;if(!t)return null;const e=this.legendElement.type==="opacity-ramp"?Ft.opacityRamp:"";return t.className=`${Ft.colorRamp} ${e}`,this.opacity!=null&&(t.style.opacity=this.opacity.toString()),t}render(){const{legendElement:t,_preview:e}=this;if(!e)return null;const i={width:`${dct}px`},r={height:e.style.height};return G("div",{class:Ft.layerRow,key:`${this.key}-row`},G("div",{class:Ft.symbolContainer,styles:i},G("div",{afterCreate:Br,bind:e,class:Ft.rampContainer})),G("div",{class:Ft.layerInfo},G("div",{class:Ft.rampLabelsContainer,styles:r},t.infos.map(((n,s)=>this._renderRampLabel(n,s,t.type))))))}_renderRampLabel(t,e,i){return G("div",{class:t.label?Ft.rampLabel:void 0,key:`${this.key}-stop-${t.label??e}-label`},m1e(t,i,this.messages))}};u([h()],G0.prototype,"_preview",null),u([h()],G0.prototype,"legendElement",void 0),u([h()],G0.prototype,"messages",void 0),u([h()],G0.prototype,"opacity",void 0),G0=u([V("esri.widgets.Legend.styles.classic.ColorRamp")],G0);let VI=class extends Zi{constructor(e,i){super(e,i),this.legendElement=null}render(){const e=this.legendElement.infos.map((i=>this._renderRow(i))).filter(Boolean);return e.length?this.legendElement.theme==="spike"?v1e(this.legendElement):G("div",{class:Ft.layerBody},e):null}_renderRow(e){return e.preview?G("div",{class:Ft.layerRow,key:`${this.key}-${e.label}-row`},G("div",{class:this.classes(Ft.symbolContainer,Ft.sizeRamp)},G("div",{afterCreate:Br,bind:e.preview,class:Ft.symbol})),G("div",{class:Ft.layerInfo},y$(this.messages,e.label,!1)||"")):null}};u([h()],VI.prototype,"legendElement",void 0),u([h()],VI.prototype,"messages",void 0),VI=u([V("esri.widgets.Legend.styles.classic.SizeRamp")],VI);let q0=class extends Zi{constructor(t,e){super(t,e),this.effectList=null,this.legendElement=null,this.opacity=1}render(){const{legendElement:t,opacity:e,effectList:i,key:r}=this,{sizeRampElement:n,colorRampElement:s}=_1e(t,e);if(!n)return null;const o=this.messages.previewColorRampAriaLabel,a=v$(n,"above",!0),l=v$(n,"below",!0),c=12,d=g$(s,{width:c,height:a,rampAlignment:"vertical",opacity:e,type:"above",effectList:i,ariaLabel:o}),f=g$(s,{width:c,height:l,rampAlignment:"vertical",opacity:e,type:"below",effectList:i,ariaLabel:o}),y=mD(n),g=n.infos.map((B=>B.label)),b=g.map(((B,j)=>j===0?G("div",{class:B?d?Ft.univariateAboveAndBelowLabel:Ft.rampLabel:void 0,key:`${r}-color-ramp-above-label-${B??j}`},B):j===2?G("div",null):null)),_=g.length-1,x=Math.floor(g.length/2),E=g.map(((B,j)=>j===x||j===_?G("div",{class:B?d?Ft.univariateAboveAndBelowLabel:Ft.rampLabel:void 0,key:`${r}-color-ramp-below-label-${B??j}`},B):null)),C={display:"table-cell",verticalAlign:"middle"},k={marginTop:`${y}px`},O={height:`${a}px`},D={height:`${l}px`};return G("div",{key:`${r}-container`,styles:S1e},G("div",{class:Ft.layerBody},n.infos.map(((B,j)=>G("div",{class:this.classes(Ft.layerRow,Ft.sizeRamp),key:`${r}-row-${j}`},G("div",{afterCreate:Br,bind:B.preview,class:Ft.symbol,styles:C}),d||j%2!=0?null:G("div",{class:Ft.layerInfo},g[j]))))),d?G("div",{styles:k},G("div",{styles:c7},G("div",{styles:px},G("div",{afterCreate:Br,bind:d,class:Ft.rampContainer})),G("div",{styles:px},G("div",{class:Ft.rampLabelsContainer,styles:O},b))),G("div",{styles:c7},G("div",{styles:px},G("div",{afterCreate:Br,bind:f,class:Ft.rampContainer})),G("div",{styles:px},G("div",{class:Ft.rampLabelsContainer,styles:D},E)))):null)}};u([h()],q0.prototype,"effectList",void 0),u([h()],q0.prototype,"legendElement",void 0),u([h()],q0.prototype,"messages",void 0),u([h()],q0.prototype,"opacity",void 0),q0=u([V("esri.widgets.Legend.styles.classic.UnivariateAboveAndBelowRamp")],q0);let H0=class extends Zi{constructor(e,i){super(e,i),this.effectList=null,this.legendElement=null,this.opacity=1}render(){var x;const{legendElement:e,opacity:i,effectList:r,key:n}=this,{sizeRampElement:s,colorRampElement:o}=x1e(e);if(!s)return null;const a=mD(s),l=12,c=v$(s,"full",!1),d=g$(o,{width:l,height:c,rampAlignment:"vertical",opacity:i,type:"full",effectList:r,ariaLabel:(x=this.messages)==null?void 0:x.previewColorRampAriaLabel}),f=s.infos.length-1,y=s.infos.map(((E,C)=>C===0||C===f?G("div",{class:E.label?o?Ft.univariateAboveAndBelowLabel:Ft.rampLabel:void 0,key:`${n}-color-ramp-label-${E.label??C}`},E.label):null)),g={display:"table-cell",verticalAlign:"middle"},b={marginTop:`${a}px`},_={height:`${c}px`};return G("div",{key:`${n}-container`,styles:S1e},G("div",{class:Ft.layerBody},s.infos.map(((E,C)=>G("div",{class:this.classes(Ft.layerRow,Ft.sizeRamp),key:`${n}-row-${C}`},G("div",{afterCreate:Br,bind:E.preview,class:Ft.symbol,styles:g}))))),G("div",{styles:b},G("div",{styles:c7},G("div",{styles:px},G("div",{afterCreate:Br,bind:d,class:Ft.rampContainer})),G("div",{styles:px},G("div",{class:Ft.rampLabelsContainer,styles:_},y)))))}};u([h()],H0.prototype,"effectList",void 0),u([h()],H0.prototype,"legendElement",void 0),u([h()],H0.prototype,"messages",void 0),u([h()],H0.prototype,"opacity",void 0),H0=u([V("esri.widgets.Legend.styles.classic.UnivariateColorSizeRamp")],H0);var d7;let Ty=d7=class extends Zi{constructor(t,e){super(t,e),this.effectList=null,this.isChild=!1,this.legendElement=null}render(){const t=this._renderLegendElement(),e=y1e(this.legendElement,this.messages),i=this.isChild?Ft.layerChildTable:Ft.layerTable,r=e?G("div",{class:Ft.layerCaption},e):null,n={[Ft.layerTableSizeRamp]:this.legendElement.type==="size-ramp"||!this.isChild};return G("section",{class:this.classes(i,n),key:`${this.key}-table`},r,t)}_renderLegendElement(){switch(this.legendElement.type){case"symbol-table":return this._renderSymbolTable(this.legendElement);case"size-ramp":return G(VI,{key:this.key,legendElement:this.legendElement,messages:this.messages});case"color-ramp":case"opacity-ramp":case"heatmap-ramp":case"stretch-ramp":return G(G0,{key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case"relationship-ramp":return qbe(this.legendElement,this.id,{opacity:this.layer.opacity,effectList:this.effectList,ariaLabel:this.messages.previewRelationshipRampAriaLabel,key:this.key});case"pie-chart-ramp":return G("div",{afterCreate:Br,bind:this.legendElement.preview,key:`${this.key}-preview`});case"univariate-above-and-below-ramp":return G(q0,{effectList:this.effectList,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case"univariate-color-size-ramp":return G(H0,{effectList:this.effectList,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});default:return null}}_renderSymbolTable(t){const e=t.infos.map((i=>this._renderElementInfo(i,t.legendType))).filter(Boolean);return e.length?G("div",{class:Ft.layerBody},e):null}_renderElementInfo(t,e){const{layer:i}=this,r="label"in t?t.label:null,n=`${this.key}-${r}`;if("type"in t&&t.type)return G(d7,{effectList:this.effectList,isChild:!0,key:n,layer:i,legendElement:t,messages:this.messages});if(!("preview"in t&&t.preview||"src"in t&&t.src))return null;const s=f1e(i,e),o={[Ft.imageryLayerInfoStretched]:s},a={[Ft.imageryLayerInfoStretched]:s};return G("div",{class:Ft.layerRow,key:`${n}-row`},G("div",{class:this.classes(Ft.symbolContainer,a)},this._renderPreview(t,s)),G("div",{class:this.classes(Ft.layerInfo,o)},y$(this.messages,r,!1)||""))}_renderPreview(t,e){const{layer:i}=this;return"preview"in t&&t.preview?G("div",{afterCreate:Br,bind:t.preview,class:Ft.symbol}):"src"in t&&t.src?this._renderImage(t,i,e):null}_renderImage(t,e,i){const{label:r,src:n,opacity:s}=t,o={[Ft.imageryLayerStretchedImage]:i,[Ft.symbol]:!i},a={opacity:`${s??e.opacity}`},l=y$(this.messages,r,!1);return G("img",{alt:l,"aria-label":l,border:0,class:this.classes(o),height:t.height,src:n,styles:a,width:t.width})}};u([h()],Ty.prototype,"effectList",void 0),u([h()],Ty.prototype,"isChild",void 0),u([h()],Ty.prototype,"layer",void 0),u([h()],Ty.prototype,"legendElement",void 0),u([h()],Ty.prototype,"messages",void 0),Ty=d7=u([V("esri.widgets.Legend.styles.classic.LegendElement")],Ty);const hct=`${$r}__`;let Ec=class extends Zi{constructor(t,e){super(t,e),this.activeLayerInfos=null,this.headingLevel=3,this.messages=null,this.type="classic"}render(){const t=this.activeLayerInfos,e=t==null?void 0:t.toArray().map((i=>this._renderLegendForLayer(i))).filter(Boolean);return e!=null&&e.length?G("section",null,e):G("div",{class:Ft.message,key:"no-legend"},this.messages.noLegend)}_renderLegendForLayer(t,e){if(!t.ready)return null;const i=`${t.layer.uid}-version-${t.version}`,r=`${hct}${e?`${e}-`:""}${i}`,n=t.title?zb({level:this.headingLevel,class:this.classes(Vt.heading,Ft.label)},t.title):null;if(t.children.length){const s=t.children.toArray().map((o=>this._renderLegendForLayer(o,i)));return G("section",{class:this.classes(Ft.service,Ft.groupLayer),key:r},n,s)}return this._renderLegendElementsForLayer(t,n,r)}_renderLegendElementsForLayer(t,e,i){var o;const r=(o=t.legendElements)==null?void 0:o.filter(Boolean);if(!(r!=null&&r.length))return null;const n=r.map((a=>G(Ty,{effectList:t.effectList,isChild:!1,key:`${i}-${a.type}`,layer:t.layer,legendElement:a,messages:this.messages}))),s={[Ft.groupLayerChild]:!!t.parent};return G("section",{class:this.classes(Ft.service,s),key:i},e,G("div",{class:Ft.layer},n))}};u([h()],Ec.prototype,"activeLayerInfos",void 0),u([h()],Ec.prototype,"headingLevel",void 0),u([h(),nn("esri/widgets/Legend/t9n/Legend")],Ec.prototype,"messages",void 0),u([h({readOnly:!0})],Ec.prototype,"type",void 0),Ec=u([V("esri.widgets.Legend.styles.classic.ClassicView")],Ec);const pct={base:"esri-legend"};let as=class extends Zi{constructor(t,e){super(t,e),this.headingLevel=3,this.messages=null,this.viewModel=new $l,this.style=new Ec}initialize(){this.addHandles([eo((()=>this.view),"resize",(()=>this.scheduleRender())),eo((()=>this.activeLayerInfos),"change",(()=>this._refreshActiveLayerInfos(this.activeLayerInfos))),$e((()=>this.headingLevel),(t=>{const{style:e}=this;e&&(e.headingLevel=t)})),$e((()=>this.style),((t,e)=>{e&&t!==e&&e.destroy(),t&&(t.activeLayerInfos=this.activeLayerInfos,t.type==="card"&&(t.view=this.view),t.headingLevel=this.headingLevel)}),kt)])}destroy(){var t;(t=this.style)==null||t.destroy()}get activeLayerInfos(){return this.viewModel.activeLayerInfos}set activeLayerInfos(t){this.viewModel.activeLayerInfos=t}get basemapLegendVisible(){return this.viewModel.basemapLegendVisible}set basemapLegendVisible(t){this.viewModel.basemapLegendVisible=t}get groundLegendVisible(){return this.viewModel.groundLegendVisible}set groundLegendVisible(t){this.viewModel.groundLegendVisible=t}get hideLayersNotInCurrentView(){return this.viewModel.hideLayersNotInCurrentView}set hideLayersNotInCurrentView(t){this.viewModel.hideLayersNotInCurrentView=t}get keepCacheOnDestroy(){return this.viewModel.keepCacheOnDestroy}set keepCacheOnDestroy(t){this.viewModel.keepCacheOnDestroy=t}get respectLayerDefinitionExpression(){return this.viewModel.respectLayerDefinitionExpression}set respectLayerDefinitionExpression(t){this.viewModel.respectLayerDefinitionExpression=t}get respectLayerVisibility(){return this.viewModel.respectLayerVisibility}set respectLayerVisibility(t){this.viewModel.respectLayerVisibility=t}get icon(){return"legend"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get layerInfos(){return this.viewModel.layerInfos}set layerInfos(t){this.viewModel.layerInfos=t}set style(t){const e=this._get("style");t!==e&&(e==null||e.destroy()),this._set("style",t)}castStyle(t){if(t instanceof gc||t instanceof Ec)return t;if(typeof t=="string")return t==="card"?new gc:new Ec;if(t&&typeof t.type=="string"){const e={...t};return delete e.type,t.type==="card"?new gc(e):new Ec(e)}return new Ec}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}render(){return G("div",{class:this.classes(pct.base,Vt.widget,this.style instanceof Ec?Vt.panel:null)},this.style.render())}_refreshActiveLayerInfos(t){t.forEach((e=>{this.removeHandles(`version_${e.layer.uid}`),this._renderOnActiveLayerInfoChange(e)})),this.scheduleRender()}_renderOnActiveLayerInfoChange(t){const e=$e((()=>t.version),(()=>this.scheduleRender()));this.addHandles(e,`version_${t.layer.uid}`);const i=eo((()=>t.children),"change",(()=>t.children.forEach((r=>this._renderOnActiveLayerInfoChange(r)))),kt);this.addHandles(i,`version_${t.layer.uid}`),t.children.forEach((r=>this._renderOnActiveLayerInfoChange(r)))}};u([h()],as.prototype,"activeLayerInfos",null),u([h()],as.prototype,"basemapLegendVisible",null),u([h()],as.prototype,"groundLegendVisible",null),u([h()],as.prototype,"headingLevel",void 0),u([h()],as.prototype,"hideLayersNotInCurrentView",null),u([h()],as.prototype,"keepCacheOnDestroy",null),u([h()],as.prototype,"respectLayerDefinitionExpression",null),u([h()],as.prototype,"respectLayerVisibility",null),u([h()],as.prototype,"icon",null),u([h()],as.prototype,"label",null),u([h()],as.prototype,"layerInfos",null),u([h(),nn("esri/widgets/Legend/t9n/Legend")],as.prototype,"messages",void 0),u([h()],as.prototype,"style",null),u([yi("style")],as.prototype,"castStyle",null),u([h()],as.prototype,"view",null),u([h()],as.prototype,"viewModel",void 0),as=u([V("esri.widgets.Legend")],as);const fct=as;var Qy,WM,BS,ZM,h7,fae;let mct=(fae=class extends N7{constructor(i){super(i);Ye(this,ZM);Ye(this,Qy,H$e(void 0));Ye(this,WM);Ye(this,BS,!1);const{el:r}=i,n=r.view;this.setProvisionalExports(void 0),Object.defineProperty(r,"view",{get:()=>Y(this,Qy).value,set:s=>{if(this.exports===s)return;const o=r.view;Y(this,Qy).value=s,this.exports=s,this.component.requestUpdate("view",o),yr(this,ZM,h7).call(this)},configurable:!0,enumerable:!0}),i!==r&&Object.defineProperty(i,"view",{get:()=>r.view,set:s=>{r.view=s}}),queueMicrotask(()=>n?r.view=n:0)}hostConnected(){this.component.manager.hasDestroy&&(Y(this,WM)??Ue(this,WM,Sn(()=>{var i;return(i=Y(this,Qy).value)==null?void 0:i.destroyed},()=>{var i,r;return void((r=(i=this.component).destroy)==null?void 0:r.call(i).catch(console.error))},{sync:!0})),this.onDestroy(()=>{var i;return(i=Y(this,WM))==null?void 0:i.remove()})),this.component.manager.loadedCalled&&nA(this.component)}hostLoad(){this.component.manager.destroyed}hostLoaded(){var n;const{el:i}=this.component,r=((n=i.shadowRoot)==null?void 0:n.firstElementChild)??i.firstElementChild??void 0;i.childElem??(i.childElem=r),Ue(this,BS,!0),yr(this,ZM,h7).call(this),i.isConnected&&nA(this.component)}hostDisconnected(){var i,r;typeof this.component.el.childElem=="object"&&((r=(i=Y(this,Qy).value)==null?void 0:i.ui)==null||r.remove(this.component.el.childElem))}hostUpdate(i){i.has("position")&&this.component.el.childElem!=null&&typeof this.component.position=="string"&&nA(this.component),i.has("referenceElement")&&nA(this.component)}},Qy=new WeakMap,WM=new WeakMap,BS=new WeakMap,ZM=new WeakSet,h7=function(){!Y(this,BS)||Y(this,Qy).value==null||(Ue(this,BS,!1),this.component.arcgisReady.emit())},fae);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
v4.33.24 */const $1e=(t,e)=>i=>gct(i,t);var yF,JM,YM,Ug,T1e,E1e,I1e;class yct extends ice{constructor(i,r){var c;super(i,r);Ye(this,Ug);Ye(this,yF,new Map);Ye(this,JM);Ye(this,YM);new mct(i);const n=this,s=n.instance;let o=s.viewModel,a=s.visibleElements;const l=new Proxy(this.exports,{get(d,f,y){return f==="viewModel"?o:f==="visibleElements"?a:Reflect.get(d,f,y)}});if(Ue(n,YM,s),n.instance=l,n.exports=l,o){const d={component:i,get exports(){return n.instance.viewModel}};VEe(n).set("viewModel","viewModel"),i.addController(d),o=rce(i,new WeakRef(d),e$e(i)-1,o,Y(n,yF))}n.instance.visibleElements&&(a=yr(c=n,Ug,T1e).call(c,s))}hostConnected(){this.instance=Y(this,YM),super.hostConnected()}hostLoad(){Ue(this,JM,$e(()=>this.component.el.view,i=>{const r=this.instance;!("view"in r)&&typeof r.viewModel=="object"?r.viewModel.view=i:r.view=i,!("map"in r)&&typeof r.viewModel=="object"?r.viewModel.map=i==null?void 0:i.map:r.map=i==null?void 0:i.map},{sync:!0,initial:!0}))}hostUpdate(i){i.has("closed")&&(this.instance.visible=!this.component.closed)}hostLoaded(){const{el:i}=this.component;i.childElem??(i.childElem=document.createElement("div")),this.instance.container=i.childElem,this.component.closed!==void 0&&this.onLifecycle(()=>$e(()=>this.instance.visible,r=>this.component.closed=!r,{initial:!0}))}hostDestroy(){var i;(i=Y(this,JM))==null||i.remove(),super.hostDestroy()}}yF=new WeakMap,JM=new WeakMap,YM=new WeakMap,Ug=new WeakSet,T1e=function(i){return new Proxy(i.visibleElements,{get:(r,n)=>{if(typeof n=="symbol"||n in Promise.prototype)return r[n];const s=[n],o=yr(this,Ug,E1e).call(this,s);return R7(this.component,a=>{const l=a;this.component[l]=!1;let c=i.visibleElements??{},d;for(const y of s.slice(0,-1))if(typeof c[y]=="object"&&c[y]!==null)c=c[y];else{d=!!c[y];break}d===void 0&&(d=!!(c[s.slice(-1)[0]]??!0));const f=l.startsWith("hide")||l.startsWith("show")?l.startsWith("hide"):d;this.onUpdate(y=>{if(y.has(l)){const g=this.component[l];yr(this,Ug,I1e).call(this,s,g,f)}})},o)}})},E1e=function(i){const r=new Proxy({},{get:(n,s)=>{const o=Reflect.get(n,s);return typeof s=="symbol"||s in Promise.prototype?o:(i.push(s),r)}});return r},I1e=function(i,r,n){let s=this.instance.visibleElements??{};for(const a of i.slice(0,-1))(typeof s[a]!="object"||s[a]===null)&&(s[a]={}),s=s[a];const o=!!(n?!r:r);s[i.at(-1)]=o};const gct=sG(yct);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
v4.33.24 */const vct=Mi`@layer{arcgis-legend{display:block}}`,bct=$1e(fct),AC=class AC extends z7{constructor(){super(...arguments),this.widget=bct(this),this.viewModel=this.widget.viewModel,this.activeLayerInfos=this.widget.activeLayerInfos,this.autoDestroyDisabled=!1,this.basemapLegendVisible=this.widget.basemapLegendVisible,this.headingLevel=this.widget.headingLevel,this.hideLayersNotInCurrentView=this.widget.hideLayersNotInCurrentView,this.icon=this.widget.icon,this.label=this.widget.label,this.layerInfos=this.widget.layerInfos,this.legendStyle=this.widget.style,this.position="bottom-left",this.respectLayerDefinitionExpression=this.widget.respectLayerDefinitionExpression,this.respectLayerVisibilityDisabled=this.widget.respectLayerVisibility,this.state=this.viewModel.state,this.arcgisPropertyChange=d_e()("state"),this.arcgisReady=VC()}async destroy(){await this.manager.destroy()}};AC.properties={activeLayerInfos:0,autoDestroyDisabled:5,basemapLegendVisible:5,headingLevel:9,hideLayersNotInCurrentView:5,icon:1,label:1,layerInfos:0,legendStyle:1,position:1,referenceElement:1,respectLayerDefinitionExpression:5,respectLayerVisibilityDisabled:5,state:3},AC.shadowRootOptions=jC,AC.styles=vct;let p7=AC;X7("arcgis-legend",p7);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const wct={trigger:"trigger"},PV={content:"content",wrapper:"wrapper",triggerContainer:"trigger-container"},zoe="calcite-dropdown",RA={menuButton:t=>`${zoe}-${t}-menubutton`,menu:t=>`${zoe}-${t}-menu`},_ct=Mi`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:inline-block}.wrapper{--calcite-floating-ui-z-index: var(--calcite-z-index-dropdown);inline-size:max-content;display:none;max-inline-size:100vw;max-block-size:100vh;inset-block-start:0;left:0;z-index:var(--calcite-floating-ui-z-index)}@starting-style{.wrapper{opacity:0;inset-block-start:0;left:0}}.wrapper .calcite-floating-ui-anim{position:relative;transition-duration:var(--calcite-floating-ui-transition);transition-property:inset-block-start,left,opacity,display;transition-behavior:allow-discrete;opacity:0;box-shadow:0 0 16px #00000029;z-index:var(--calcite-z-index);border-radius:.25rem}.wrapper[data-placement^=bottom] .calcite-floating-ui-anim{inset-block-start:-5px}.wrapper[data-placement^=top] .calcite-floating-ui-anim{inset-block-start:5px}.wrapper[data-placement^=left] .calcite-floating-ui-anim{left:5px}.wrapper[data-placement^=right] .calcite-floating-ui-anim{left:-5px}.wrapper[data-placement] .calcite-floating-ui-anim--active{opacity:1;inset-block-start:0;left:0}@starting-style{.wrapper[data-placement] .calcite-floating-ui-anim--active{opacity:0}}.content{max-height:45vh;width:auto;overflow-y:auto;overflow-x:hidden;inline-size:var(--calcite-dropdown-width, var(--calcite-internal-dropdown-width));background-color:var(--calcite-dropdown-background-color, var(--calcite-color-foreground-1))}.trigger-container{position:relative;display:flex;height:100%;flex:1 1 auto;word-wrap:break-word;word-break:break-word}.width-s{--calcite-internal-dropdown-width: 12rem}.width-m{--calcite-internal-dropdown-width: 14rem}.width-l{--calcite-internal-dropdown-width: 16rem}@media (forced-colors: active){:host([open]) .wrapper{border:var(--calcite-border-width-sm) solid canvasText}}:host([hidden]){display:none}[hidden]{display:none}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}`,LC=class LC extends ir{constructor(){super(),this.focusLastDropdownItem=!1,this.groups=[],this.guid=ld(),this.items=[],this.mutationObserver=ts("mutation",()=>this.updateItems()),this.transitionProp="opacity",this.resizeObserver=ts("resize",e=>this.resizeObserverCallback(e)),this.focusSetter=Ka()(this),this.closeOnSelectDisabled=!1,this.disabled=!1,this.maxItems=0,this.offsetDistance=0,this.offsetSkidding=0,this.open=!1,this.overlayPositioning="absolute",this.placement=F9,this.scale="m",this.selectedItems=[],this.type="click",this.calciteDropdownBeforeClose=ot({cancelable:!1}),this.calciteDropdownBeforeOpen=ot({cancelable:!1}),this.calciteDropdownClose=ot({cancelable:!1}),this.calciteDropdownOpen=ot({cancelable:!1}),this.calciteDropdownSelect=ot({cancelable:!1}),this.listenOn(window,"click",this.closeCalciteDropdownOnClick),this.listen("calciteInternalDropdownCloseRequest",this.closeCalciteDropdownOnEvent),this.listenOn(window,"calciteDropdownOpen",this.closeCalciteDropdownOnOpenEvent),this.listen("pointerenter",this.pointerEnterHandler),this.listen("pointerleave",this.pointerLeaveHandler),this.listen("calciteInternalDropdownItemKeyEvent",this.calciteInternalDropdownItemKeyEvent),this.listen("calciteInternalDropdownItemSelect",this.handleItemSelect)}async reposition(e=!1){const{filteredFlipPlacements:i,floatingEl:r,offsetDistance:n,offsetSkidding:s,overlayPositioning:o,placement:a,referenceEl:l}=this;return Jwe(this,{floatingEl:r,referenceEl:l,offsetDistance:n,offsetSkidding:s,overlayPositioning:o,placement:a,flipPlacements:i,type:"menu"},e)}async setFocus(e){return this.focusSetter(()=>this.referenceEl,e)}connectedCallback(){var e;super.connectedCallback(),(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0,subtree:!0}),this.setFilteredPlacements(),this.updateItems(),LI(this)}willUpdate(e){e.has("open")&&(this.hasUpdated||this.open!==!1)&&this.openHandler(),e.has("disabled")&&(this.hasUpdated||this.disabled!==!1)&&this.handleDisabledChange(this.disabled),e.has("flipPlacements")&&this.flipPlacementsHandler(),e.has("maxItems")&&this.hasUpdated&&this.setMaxScrollerHeight(),this.hasUpdated&&(e.has("offsetDistance")&&this.offsetDistance!==0||e.has("offsetSkidding")&&this.offsetSkidding!==0||e.has("overlayPositioning")&&this.overlayPositioning!=="absolute"||e.has("placement")&&this.placement!==F9)&&this.reposition(!0),e.has("scale")&&(this.hasUpdated||this.scale!=="m")&&this.handlePropsChange()}updated(){cd(this)}loaded(){this.updateSelectedItems(),LI(this)}disconnectedCallback(){var e,i;super.disconnectedCallback(),(e=this.mutationObserver)==null||e.disconnect(),(i=this.resizeObserver)==null||i.disconnect(),aW(this)}openHandler(){lW(this),!this.disabled&&this.reposition(!0)}handleDisabledChange(e){e||(this.open=!1)}flipPlacementsHandler(){this.setFilteredPlacements(),this.reposition(!0)}handlePropsChange(){this.updateItems(),this.updateGroupProps()}closeCalciteDropdownOnClick(e){this.disabled||!this.open||e.composedPath().includes(this.el)||this.closeCalciteDropdown(!1)}closeCalciteDropdownOnEvent(e){this.closeCalciteDropdown(),e.stopPropagation()}closeCalciteDropdownOnOpenEvent(e){e.composedPath().includes(this.el)||(this.open=!1)}pointerEnterHandler(){this.disabled||this.type!=="hover"||this.toggleDropdown()}pointerLeaveHandler(){this.disabled||this.type!=="hover"||this.closeCalciteDropdown()}getTraversableItems(){return this.items.filter(e=>!e.disabled&&!e.hidden)}calciteInternalDropdownItemKeyEvent(e){const{keyboardEvent:i}=e.detail,r=i.target,n=this.getTraversableItems();switch(i.key){case"Tab":this.open=!1,this.updateTabIndexOfItems(r);break;case"ArrowDown":Wf(n,r,"next");break;case"ArrowUp":Wf(n,r,"previous");break;case"Home":Wf(n,r,"first");break;case"End":Wf(n,r,"last");break}e.stopPropagation()}handleItemSelect(e){this.updateSelectedItems(),e.stopPropagation(),this.calciteDropdownSelect.emit(),(!this.closeOnSelectDisabled||e.detail.requestedDropdownGroup.selectionMode==="none")&&this.closeCalciteDropdown(),e.stopPropagation()}setFilteredPlacements(){const{el:e,flipPlacements:i}=this;this.filteredFlipPlacements=i?Zwe(i,e):null}updateTriggers(e){this.triggers=e.target.assignedElements({flatten:!0}),this.reposition(!0)}updateItems(){this.items=this.groups.map(e=>Array.from(e==null?void 0:e.querySelectorAll("calcite-dropdown-item"))).reduce((e,i)=>[...e,...i],[]),this.updateSelectedItems(),this.reposition(!0),this.items.forEach(e=>e.scale=this.scale)}updateGroups(e){const i=e.target.assignedElements({flatten:!0}).filter(r=>r==null?void 0:r.matches("calcite-dropdown-group"));this.groups=i,this.updateItems(),this.updateGroupProps()}updateGroupProps(){this.groups.forEach((e,i)=>{e.scale=this.scale,e.position=i})}resizeObserverCallback(e){e.forEach(({target:i})=>{i===this.referenceEl?this.setDropdownWidth():i===this.scrollerEl&&this.setMaxScrollerHeight()})}setDropdownWidth(){const{referenceEl:e,scrollerEl:i}=this;!i||!e||(i.style.minWidth=`${e.clientWidth}px`)}setMaxScrollerHeight(){const{maxItems:e,items:i,scrollerEl:r}=this;if(!r)return;const n=i.length>=e&&e>0?this.getYDistanceFromScroller(i.at(e-1)):0;r.style.maxBlockSize=n>0?`${n}px`:"",this.reposition(!0)}setScrollerAndTransitionEl(e){$M(this.resizeObserver,this.scrollerEl,e),this.scrollerEl=e,this.transitionEl=e}onBeforeOpen(){this.focusOnFirstActiveOrDefaultItem(),this.calciteDropdownBeforeOpen.emit()}onOpen(){this.calciteDropdownOpen.emit()}onBeforeClose(){this.calciteDropdownBeforeClose.emit()}onClose(){this.calciteDropdownClose.emit(),oW(this)}setReferenceEl(e){$M(this.resizeObserver,this.referenceEl,e),this.referenceEl=e,LI(this)}setFloatingEl(e){this.floatingEl=e,LI(this)}keyDownHandler(e){if(!e.composedPath().includes(this.referenceEl))return;const{defaultPrevented:i,key:r}=e;if(!i){if(r==="Escape"){this.closeCalciteDropdown(),e.preventDefault();return}if(this.open&&e.shiftKey&&r==="Tab"){this.closeCalciteDropdown(),e.preventDefault();return}cD(r)?(this.toggleDropdown(),e.preventDefault()):(r==="ArrowDown"||r==="ArrowUp")&&(e.preventDefault(),this.focusLastDropdownItem=r==="ArrowUp",this.open=!0)}}updateSelectedItems(){this.selectedItems=this.items.filter(e=>e.selected)}getYDistanceFromScroller(e){const i=e.getBoundingClientRect();return e.offsetTop+i.height}closeCalciteDropdown(e=!0){this.open=!1,e&&mM(this.triggers[0])}async focusOnFirstActiveOrDefaultItem(){const i=this.getTraversableItems().find(r=>r.selected)||(this.focusLastDropdownItem?this.items.at(-1):this.items[0]);this.focusLastDropdownItem=!1,i&&(await this.updateComplete,await p9(),await p9(),await mM(i),i.scrollIntoView({block:"nearest"}))}toggleDropdown(){this.open=!this.open}updateTabIndexOfItems(e){this.items.forEach(i=>{i.tabIndex=e!==i?-1:0})}render(){const{open:e,guid:i}=this;return ud({disabled:this.disabled,children:Se`<div class=${Te(PV.triggerContainer)} id=${RA.menuButton(i)??ct} @click=${this.toggleDropdown} @keydown=${this.keyDownHandler} ${Ri(this.setReferenceEl)}><slot aria-controls=${RA.menu(i)??ct} .ariaExpanded=${e} aria-haspopup=menu name=${wct.trigger} @slotchange=${this.updateTriggers}></slot></div><div .ariaHidden=${!e} class=${Te({[PV.wrapper]:!0,[H9("width",this.width,this.widthScale)]:!!(this.width||this.widthScale)})} ${Ri(this.setFloatingEl)}><div aria-labelledby=${RA.menuButton(i)??ct} class=${Te({[PV.content]:!0,[I3.animation]:!0,[I3.animationActive]:e})} id=${RA.menu(i)??ct} role=menu ${Ri(this.setScrollerAndTransitionEl)}><slot @slotchange=${this.updateGroups}></slot></div></div>`})}};LC.properties={closeOnSelectDisabled:[7,{},{reflect:!0,type:Boolean}],disabled:[7,{},{reflect:!0,type:Boolean}],flipPlacements:[0,{},{attribute:!1}],maxItems:[11,{},{reflect:!0,type:Number}],offsetDistance:[11,{},{type:Number,reflect:!0}],offsetSkidding:[11,{},{reflect:!0,type:Number}],open:[7,{},{reflect:!0,type:Boolean}],overlayPositioning:[3,{},{reflect:!0}],placement:[3,{},{reflect:!0}],scale:[3,{},{reflect:!0}],selectedItems:[0,{},{attribute:!1}],type:[3,{},{reflect:!0}],widthScale:[3,{},{reflect:!0}],width:[3,{},{reflect:!0}]},LC.shadowRootOptions={mode:"open",delegatesFocus:!0},LC.styles=_ct;let Z3=LC;rr("calcite-dropdown",Z3);const XSt=Object.freeze(Object.defineProperty({__proto__:null,Dropdown:Z3},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Ey={container:"container",containerNone:"container--none-selection",icon:"dropdown-item-icon",iconEnd:"dropdown-item-icon--end",iconStart:"dropdown-item-icon--start",itemContent:"dropdown-item-content",link:"dropdown-link"},Voe={check:"check",bulletPoint:"bullet-point"};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const xct=Mi`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{position:relative;display:flex;flex-grow:1;align-items:center;outline-color:transparent}.container{position:relative;display:flex;flex-grow:1;cursor:pointer;align-items:center;text-decoration-line:none;color:var(--calcite-dropdown-item-text-color, var(--calcite-color-text-3));text-align:start;outline-color:transparent}.container a{outline:none;position:relative;display:flex;flex-grow:1;cursor:pointer;align-items:center;text-decoration-line:none;color:var(--calcite-dropdown-item-text-color, var(--calcite-color-text-3))}.dropdown-item-content{flex:1 1 auto;padding-block:.125rem}.dropdown-item-icon{position:relative;opacity:0;transition-timing-function:cubic-bezier(.4,0,.2,1);transform:scale(.9)}:host([scale=s]) .container{padding-block:.25rem;padding-inline:.5rem;font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=s]) .dropdown-item-icon,:host([scale=s]) .dropdown-item-icon--start{padding-inline-end:var(--calcite-spacing-sm)}:host([scale=s]) .dropdown-item-icon--end{padding-inline-start:var(--calcite-spacing-sm)}:host([scale=m]) .container{padding-block:.5rem;padding-inline:.75rem;font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=m]) .dropdown-item-icon,:host([scale=m]) .dropdown-item-icon--start{padding-inline-end:var(--calcite-spacing-md)}:host([scale=m]) .dropdown-item-icon--end{padding-inline-start:var(--calcite-spacing-md)}:host([scale=l]) .container{padding-block:.625rem;padding-inline:1rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l]) .dropdown-item-icon,:host([scale=l]) .dropdown-item-icon--start{padding-inline-end:var(--calcite-spacing-lg)}:host([scale=l]) .dropdown-item-icon--end{padding-inline-start:var(--calcite-spacing-lg)}:host(:focus) .container{text-decoration-line:none;outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}:host(:hover:not([disabled])) .container{background-color:var(--calcite-dropdown-item-background-color-hover, var(--calcite-color-foreground-2))}:host(:active:not([disabled])) .container{background-color:var(--calcite-dropdown-item-background-color-press, var(--calcite-color-foreground-3))}:host(:hover:not([disabled])) .container,:host(:active:not([disabled])) .container{text-decoration-line:none;color:var(--calcite-dropdown-item-text-color-press, var(--calcite-color-text-1))}:host(:hover:not([disabled])) .dropdown-link,:host(:active:not([disabled])) .dropdown-link{color:var(--calcite-dropdown-item-text-color-press, var(--calcite-color-text-1))}:host([selected]) .container:not(.container--none-selection),:host([selected]) .dropdown-link{font-weight:var(--calcite-font-weight-medium);color:var(--calcite-dropdown-item-text-color-press, var(--calcite-color-text-1))}:host([selected]) .container:not(.container--none-selection) calcite-icon,:host([selected]) .dropdown-link calcite-icon{color:var(--calcite-dropdown-item-icon-color-press, var(--calcite-color-brand))}:host(:hover:not([disabled])) .dropdown-item-icon{color:var(--calcite-dropdown-item-icon-color-hover)}:host([selected]) .dropdown-item-icon{opacity:1}:host([hidden]){display:none}[hidden]{display:none}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}`,gF=class gF extends ir{constructor(){super(),this.childLink=Fc(),this.focusSetter=Ka()(this),this.disabled=!1,this.scale="m",this.selected=!1,this.selectionMode="single",this.calciteDropdownItemSelect=ot({cancelable:!1}),this.calciteInternalDropdownCloseRequest=ot({cancelable:!1}),this.calciteInternalDropdownItemKeyEvent=ot({cancelable:!1}),this.calciteInternalDropdownItemSelect=ot({cancelable:!1}),this.listen("click",this.onClick),this.listen("keydown",this.keyDownHandler),this.listenOn(document.body,"calciteInternalDropdownItemChange",this.updateActiveItemOnChange)}async setFocus(e){return this.focusSetter(()=>this.el,e)}connectedCallback(){super.connectedCallback(),this.initialize()}load(){this.initialize()}updated(){cd(this)}onClick(){this.emitRequestedItem()}keyDownHandler(e){switch(e.key){case" ":case"Enter":this.emitRequestedItem(),this.href&&this.childLink.value.click(),e.preventDefault();break;case"Escape":this.calciteInternalDropdownCloseRequest.emit(),e.preventDefault();break;case"Tab":this.calciteInternalDropdownItemKeyEvent.emit({keyboardEvent:e});break;case"ArrowUp":case"ArrowDown":case"Home":case"End":e.preventDefault(),this.calciteInternalDropdownItemKeyEvent.emit({keyboardEvent:e});break}}updateActiveItemOnChange(e){e.composedPath().includes(this.parentDropdownGroupEl)&&(this.requestedDropdownGroup=e.detail.requestedDropdownGroup,this.requestedDropdownItem=e.detail.requestedDropdownItem,this.determineActiveItem()),e.stopPropagation()}initialize(){this.parentDropdownGroupEl=this.el.closest("calcite-dropdown-group"),this.selectionMode==="none"&&(this.selected=!1)}determineActiveItem(){switch(this.selectionMode){case"multiple":this.el===this.requestedDropdownItem&&(this.selected=!this.selected);break;case"single":this.el===this.requestedDropdownItem?this.selected=!0:this.requestedDropdownGroup===this.parentDropdownGroupEl&&(this.selected=!1);break;case"none":this.selected=!1;break}}emitRequestedItem(){this.calciteDropdownItemSelect.emit(),this.calciteInternalDropdownItemSelect.emit({requestedDropdownItem:this.el,requestedDropdownGroup:this.parentDropdownGroupEl})}render(){const{href:e,selectionMode:i,label:r,iconFlipRtl:n}=this,s=Se`<calcite-icon class=${Te(Ey.iconStart)} .flipRtl=${n==="start"||n==="both"} .icon=${this.iconStart} .scale=${ua(this.scale)}></calcite-icon>`,o=Se`<span class=${Te(Ey.itemContent)}><slot></slot></span>`,a=Se`<calcite-icon class=${Te(Ey.iconEnd)} .flipRtl=${n==="end"||n==="both"} .icon=${this.iconEnd} .scale=${ua(this.scale)}></calcite-icon>`,l=this.iconStart&&this.iconEnd?[s,o,a]:this.iconStart?[s,o]:this.iconEnd?[o,a]:o,c=e?Se`<a .ariaLabel=${r} class=${Te(Ey.link)} href=${e??Vr} rel=${this.rel??Vr} tabindex=-1 target=${this.target??Vr} ${Ri(this.childLink)}>${l}</a>`:l,d=e?null:i==="single"?"menuitemradio":i==="multiple"?"menuitemcheckbox":"menuitem",f=i!=="none"?A2(this.selected):null,{disabled:y}=this;return this.el.ariaChecked=f,this.el.ariaLabel=e?"":r,this.el.role=d,Hu(this.el,"tabIndex",y?-1:0),ud({disabled:y,children:Se`<div class=${Te({[Ey.container]:!0,[Ey.containerNone]:i==="none"})}>${i!=="none"?Se`<calcite-icon class=${Te(Ey.icon)} .icon=${i==="multiple"?Voe.check:Voe.bulletPoint} .scale=${ua(this.scale)}></calcite-icon>`:null}${c}</div>`})}};gF.properties={disabled:[7,{},{reflect:!0,type:Boolean}],href:[3,{},{reflect:!0}],iconEnd:[3,{},{reflect:!0}],iconFlipRtl:[3,{},{reflect:!0}],iconStart:[3,{},{reflect:!0}],label:1,rel:[3,{},{reflect:!0}],scale:[3,{},{reflect:!0}],selected:[7,{},{reflect:!0,type:Boolean}],selectionMode:1,target:[3,{},{reflect:!0}]},gF.styles=xct;let J3=gF;rr("calcite-dropdown-item",J3);const KSt=Object.freeze(Object.defineProperty({__proto__:null,DropdownItem:J3},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const joe={title:"dropdown-title",separator:"dropdown-separator"},Sct=Mi`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{display:block}.container{text-align:start}.dropdown-title{margin-block-end:-1px;display:block;cursor:default;overflow-wrap:break-word;border-width:0px;border-block-end-width:1px;border-style:solid;font-weight:var(--calcite-font-weight-bold);border-color:var(--calcite-dropdown-group-border-color, var(--calcite-color-border-3));color:var(--calcite-dropdown-group-title-text-color, var(--calcite-color-text-2))}.dropdown-separator{display:block;block-size:1px;background-color:var(--calcite-dropdown-group-border-color, var(--calcite-color-border-3))}:host([scale=s]){font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=s]) .dropdown-title{padding:.5rem}:host([scale=m]){font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=m]) .dropdown-title{padding:.75rem}:host([scale=l]){font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l]) .dropdown-title{padding:1rem}:host([hidden]){display:none}[hidden]{display:none}`,RC=class RC extends ir{constructor(){super(),this.mutationObserver=ts("mutation",()=>this.updateItems()),this.position=-1,this.scale="m",this.selectionMode="single",this.calciteInternalDropdownItemChange=ot({cancelable:!1}),this.listen("calciteInternalDropdownItemSelect",this.updateActiveItemOnChange)}connectedCallback(){var e;super.connectedCallback(),this.updateItems(),(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0})}willUpdate(e){e.has("selectionMode")&&(this.hasUpdated||this.selectionMode!=="single")&&this.updateItems()}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this.mutationObserver)==null||e.disconnect()}updateActiveItemOnChange(e){this.requestedDropdownGroup=e.detail.requestedDropdownGroup,this.requestedDropdownItem=e.detail.requestedDropdownItem,this.calciteInternalDropdownItemChange.emit({requestedDropdownGroup:this.requestedDropdownGroup,requestedDropdownItem:this.requestedDropdownItem})}updateItems(){Array.from(this.el.querySelectorAll("calcite-dropdown-item")).forEach(e=>e.selectionMode=this.selectionMode)}render(){const e=this.groupTitle?Se`<span aria-hidden=true class=${Te(joe.title)}>${this.groupTitle}</span>`:null,i=this.position>0?Se`<div class=${Te(joe.separator)} role=separator></div>`:null;return this.el.ariaLabel=this.groupTitle,this.el.role="group",Se`<div class=${Te({[Ey.container]:!0})}>${i}${e}<slot></slot></div>`}};RC.properties={groupTitle:[3,{},{reflect:!0}],position:[9,{},{type:Number}],scale:[3,{},{reflect:!0}],selectionMode:[3,{},{reflect:!0}]},RC.shadowRootOptions={mode:"open",delegatesFocus:!0},RC.styles=Sct;let Y3=RC;rr("calcite-dropdown-group",Y3);const QSt=Object.freeze(Object.defineProperty({__proto__:null,DropdownGroup:Y3},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Uoe={handle:"handle",dropdown:"dropdown"},Boe={drag:"drag",blank:"blank"},AV={label:"{label}",position:"{position}",total:"{total}"},Goe=["top","up","down","bottom"],$ct={trigger:"trigger"},LV={add:"add",move:"move",reorder:"reorder"},Tct=Mi`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex}.dropdown{block-size:100%}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host([hidden]){display:none}[hidden]{display:none}`,vF=class vF extends ir{constructor(){super(...arguments),this.focusSetter=Ka()(this),this.disabled=!1,this.messages=Po({blocking:!0}),this.addToItems=[],this.moveToItems=[],this.open=!1,this.overlayPositioning="absolute",this.placement=F9,this.scale="m",this.sortDisabled=!1,this.calciteSortHandleBeforeClose=ot({cancelable:!1}),this.calciteSortHandleBeforeOpen=ot({cancelable:!1}),this.calciteSortHandleClose=ot({cancelable:!1}),this.calciteSortHandleMove=ot({cancelable:!0}),this.calciteSortHandleAdd=ot({cancelable:!0}),this.calciteSortHandleOpen=ot({cancelable:!1}),this.calciteSortHandleReorder=ot({cancelable:!0})}get hasSetInfo(){return typeof this.setPosition=="number"&&typeof this.setSize=="number"}get hasValidSetInfo(){return this.hasSetInfo?this.setPosition>0&&this.setSize>1:!0}get hasReorderItems(){return!this.sortDisabled&&this.hasValidSetInfo}get hasNoItems(){return!this.hasReorderItems&&this.moveToItems.length<1&&this.addToItems.length<1}async setFocus(e){return this.focusSetter(()=>this.dropdownEl,e)}willUpdate(e){e.has("open")&&(this.hasUpdated||this.open!==!1)&&this.openHandler()}updated(){cd(this)}openHandler(){if(this.disabled){this.open=!1;return}this.dropdownEl&&(this.dropdownEl.open=this.open)}setDropdownEl(e){e&&(this.dropdownEl=e,this.openHandler())}getLabel(){const{label:e,messages:i,setPosition:r,setSize:n,hasSetInfo:s}=this;if(!s)return e??"";let o=e?i.repositionLabel.replace(AV.label,e):i.reposition;return o=o.replace(AV.position,r?r.toString():""),o.replace(AV.total,n?n.toString():"")}handleBeforeOpen(e){e.stopPropagation(),this.calciteSortHandleBeforeOpen.emit()}handleOpen(e){e.stopPropagation(),this.calciteSortHandleOpen.emit(),this.open=!0}handleBeforeClose(e){e.stopPropagation(),this.calciteSortHandleBeforeClose.emit()}handleClose(e){e.stopPropagation(),this.calciteSortHandleClose.emit(),this.open=!1}handleReorder(e){this.calciteSortHandleReorder.emit({reorder:e.target.dataset.value})}handleMoveTo(e){const i=e.target.dataset.id,r=this.moveToItems.find(n=>n.id===i);this.calciteSortHandleMove.emit({moveTo:r})}handleAddTo(e){const i=e.target.dataset.id,r=this.addToItems.find(n=>n.id===i);this.calciteSortHandleAdd.emit({addTo:r})}render(){const{disabled:e,flipPlacements:i,open:r,overlayPositioning:n,placement:s,scale:o,widthScale:a,hasNoItems:l}=this,c=this.getLabel(),d=e||l;return ud({disabled:e,children:Se`<calcite-dropdown class=${Te(Uoe.dropdown)} .disabled=${d} .flipPlacements=${i} @calciteDropdownBeforeClose=${this.handleBeforeClose} @calciteDropdownBeforeOpen=${this.handleBeforeOpen} @calciteDropdownClose=${this.handleClose} @calciteDropdownOpen=${this.handleOpen} .overlayPositioning=${n} .placement=${s} .scale=${o} .widthScale=${a} ${Ri(this.setDropdownEl)}><calcite-action .active=${r} appearance=transparent .aria=${{expanded:r}} class=${Te(Uoe.handle)} .dragHandle=${!0} .icon=${e?Boe.blank:Boe.drag} .label=${c} .scale=${o} slot=${$ct.trigger} .text=${c} title=${c??ct}></calcite-action>${this.renderReorderGroup()}${this.renderMoveToGroup()}${this.renderAddToGroup()}</calcite-dropdown>`})}renderAddToItem(e){return ri(e.id,Se`<calcite-dropdown-item data-id=${e.id??ct} .label=${e.label} @calciteDropdownItemSelect=${this.handleAddTo}>${e.label}</calcite-dropdown-item>`)}renderMoveToItem(e){return ri(e.id,Se`<calcite-dropdown-item data-id=${e.id??ct} .label=${e.label} @calciteDropdownItemSelect=${this.handleMoveTo}>${e.label}</calcite-dropdown-item>`)}renderReorderGroup(){return this.hasReorderItems?ri("reorder",Se`<calcite-dropdown-group .groupTitle=${this.messages.reorder} id=${LV.reorder} .scale=${this.scale} selection-mode=none>${this.renderTop()}${this.renderUp()}${this.renderDown()}${this.renderBottom()}</calcite-dropdown-group>`):null}renderAddToGroup(){const{messages:e,addToItems:i,scale:r}=this;return i.length?ri("add-to-items",Se`<calcite-dropdown-group .groupTitle=${e.addTo} id=${LV.add} .scale=${r} selection-mode=none>${i.map(n=>this.renderAddToItem(n))}</calcite-dropdown-group>`):null}renderMoveToGroup(){const{messages:e,moveToItems:i,scale:r}=this;return i.length?ri("move-to-items",Se`<calcite-dropdown-group .groupTitle=${e.moveTo} id=${LV.move} .scale=${r} selection-mode=none>${i.map(n=>this.renderMoveToItem(n))}</calcite-dropdown-group>`):null}renderDropdownItem(e,i){return ri(Goe[e],Se`<calcite-dropdown-item data-value=${Goe[e]??ct} .label=${i} @calciteDropdownItemSelect=${this.handleReorder}>${i}</calcite-dropdown-item>`)}renderTop(){const{setPosition:e}=this;return e!==1&&e!==2?this.renderDropdownItem(0,this.messages.moveToTop):null}renderUp(){return this.setPosition!==1?this.renderDropdownItem(1,this.messages.moveUp):null}renderDown(){return this.setPosition!==this.setSize?this.renderDropdownItem(2,this.messages.moveDown):null}renderBottom(){const{setPosition:e,setSize:i}=this;return e!==i&&e!==i-1?this.renderDropdownItem(3,this.messages.moveToBottom):null}};vF.properties={disabled:[7,{},{reflect:!0,type:Boolean}],flipPlacements:[0,{},{attribute:!1}],label:1,messageOverrides:[0,{},{attribute:!1}],messages:[0,{},{attribute:!1}],addToItems:[0,{},{attribute:!1}],moveToItems:[0,{},{attribute:!1}],open:[7,{},{reflect:!0,type:Boolean}],overlayPositioning:[3,{},{reflect:!0}],placement:[3,{},{reflect:!0}],scale:[3,{},{reflect:!0}],setPosition:[9,{},{type:Number}],setSize:[9,{},{type:Number}],sortDisabled:[7,{},{reflect:!0,type:Boolean}],widthScale:[3,{},{reflect:!0}]},vF.styles=Tct;let f7=vF;rr("calcite-sort-handle",f7);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Ect=Mi`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host(.calcite-sortable--chosen),:host(.calcite-sortable--drag),:host(.calcite-sortable--fallback),:host(.calcite-sortable--ghost){position:relative;overflow:hidden}:host(.calcite-sortable--ghost):before{content:"";position:absolute;inset-block:0px;inset-inline-start:0px;inset-inline-end:0px;z-index:var(--calcite-z-index);box-sizing:border-box;border-width:1px;border-style:dashed;border-color:var(--calcite-color-brand);background-color:var(--calcite-color-foreground-2)}:host(.calcite-sortable--drag){--tw-shadow: 0 6px 20px -4px rgba(0, 0, 0, .1), 0 4px 12px -2px rgba(0, 0, 0, .08);--tw-shadow-colored: 0 6px 20px -4px var(--tw-shadow-color), 0 4px 12px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}`;/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Qv={content:"content",toggle:"toggle",header:"header"},Hr={actionsEnd:"actions-end",container:"container",content:"content",contentStart:"content-start",controlContainer:"control-container",description:"description",header:"header",headerContainer:"header-container",headerHasContent:"header--has-content",heading:"heading",icon:"icon",iconStart:"icon--start",iconEnd:"icon--end",iconEndContainer:"icon-end-container",invalid:"invalid",statusIcon:"status-icon",title:"title",toggle:"toggle",toggleIcon:"toggle-icon",valid:"valid"},$E={actionsEnd:"actions-end",contentStart:"content-start",control:"control",headerMenuActions:"header-menu-actions",icon:"icon"},RV={expanded:"chevron-up",collapsed:"chevron-down",valid:"check-circle",invalid:"exclamation-mark-triangle"},Ict=Mi`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host{--calcite-icon-size: 1rem;--calcite-spacing-eighth: .125rem;--calcite-spacing-quarter: .25rem;--calcite-spacing-half: .5rem;--calcite-spacing-three-quarters: .75rem;--calcite-spacing: 1rem;--calcite-spacing-plus-quarter: 1.25rem;--calcite-spacing-plus-half: 1.5rem;--calcite-spacing-double: 2rem;--calcite-menu-min-width: 10rem;--calcite-header-min-height: 3rem;--calcite-footer-min-height: 3rem}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host([scale=s]) .header{gap:var(--calcite-spacing-sm)}:host([scale=s]) .header--has-content{padding:var(--calcite-spacing-sm)}:host([scale=s]) .icon-end-container{gap:var(--calcite-spacing-sm);padding-inline-end:var(--calcite-spacing-sm)}:host([scale=s]) .heading{font-size:var(--calcite-font-size-sm)}:host([scale=s]) .description{font-size:var(--calcite-font-size-xs)}:host([scale=s]){--calcite-internal-block-padding-block: var( --calcite-block-content-space, var(--calcite-block-padding, var(--calcite-spacing-xxs)) );--calcite-internal-block-padding-inline: var( --calcite-block-content-space, var(--calcite-block-padding, var(--calcite-spacing-sm)) )}:host([scale=m]) .header{gap:var(--calcite-spacing-md)}:host([scale=m]) .header--has-content{padding:var(--calcite-spacing-md)}:host([scale=m]) .icon-end-container{gap:var(--calcite-spacing-md);padding-inline-end:var(--calcite-spacing-md)}:host([scale=m]) .heading{font-size:var(--calcite-font-size)}:host([scale=m]) .description{font-size:var(--calcite-font-size-sm)}:host([scale=m]){--calcite-internal-block-padding-block: var( --calcite-block-content-space, var(--calcite-block-padding, var(--calcite-spacing-sm)) );--calcite-internal-block-padding-inline: var( --calcite-block-content-space, var(--calcite-block-padding, var(--calcite-spacing-md)) )}:host([scale=l]) .header{gap:var(--calcite-spacing-lg)}:host([scale=l]) .header--has-content{padding:var(--calcite-spacing-lg)}:host([scale=l]) .icon-end-container{gap:var(--calcite-spacing-lg);padding-inline-end:var(--calcite-spacing-lg)}:host([scale=l]) .heading{font-size:var(--calcite-font-size-md)}:host([scale=l]) .description{font-size:var(--calcite-font-size)}:host([scale=l]){--calcite-internal-block-padding-block: var( --calcite-block-content-space, var(--calcite-block-padding, var(--calcite-spacing-md)) );--calcite-internal-block-padding-inline: var( --calcite-block-content-space, var(--calcite-block-padding, var(--calcite-spacing-lg)) )}:host{display:flex;flex-shrink:0;flex-grow:0;flex-direction:column;border-width:0px;border-block-end-width:1px;border-style:solid;padding:0;transition-property:margin;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:var(--calcite-animation-timing);transition-timing-function:cubic-bezier(.215,.44,.42,.88);flex-basis:auto;border-color:var(--calcite-block-border-color, var(--calcite-color-border-3))}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}.header{margin:0;display:flex;align-content:space-between;align-items:center;fill:var(--calcite-color-text-2);color:var(--calcite-color-text-2)}.heading{margin:0;padding:0;font-weight:var(--calcite-font-weight-medium)}.header .heading{flex:1 1 auto;padding:.5rem}.header{justify-content:flex-start}.header,.toggle{grid-area:header}.header-container{display:grid;align-items:stretch;grid-template:auto/auto 1fr auto auto auto auto;grid-template-areas:"handle header icon-end control menu actions-end"}.icon--start,.icon--end{color:var(--calcite-block-icon-color, var(--calcite-color-text-3))}.actions-end{grid-area:actions-end}.toggle{margin:0;display:flex;cursor:pointer;flex-wrap:nowrap;align-items:center;justify-content:space-between;border-style:none;padding:0;font-family:var(--calcite-font-family);outline-color:transparent;text-align:initial;background-color:var(--calcite-block-header-background-color, transparent)}.toggle:hover{background-color:var(--calcite-block-header-background-color-hover, var(--calcite-color-foreground-2))}.toggle:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.toggle:active{background-color:var(--calcite-block-header-background-color-press, var(--calcite-color-foreground-3))}calcite-loader[inline]{align-self:center}calcite-sort-handle{grid-area:handle}.title{display:flex;flex-direction:column}.header .title .heading{padding:0;transition-property:color;transition-duration:var(--calcite-animation-timing);transition-timing-function:cubic-bezier(.4,0,.2,1);word-wrap:break-word;word-break:break-word;color:var(--calcite-block-heading-text-color, var(--calcite-color-text-2));font-weight:var(--calcite-font-weight-medium);line-height:var(--calcite-font-line-height-relative-snug)}.description{padding:0;word-wrap:break-word;word-break:break-word;color:var(--calcite-block-description-text-color, var(--calcite-color-text-3));font-weight:var(--calcite-font-weight-regular);line-height:var(--calcite-font-line-height-relative-snug)}.icon{display:flex}.status-icon.valid{color:var(--calcite-color-status-success)}.status-icon.invalid{color:var(--calcite-color-status-danger)}@keyframes spin{0%{transform:rotate(0)}50%{transform:rotate(180deg)}to{transform:rotate(360deg)}}.icon-end-container{display:flex;align-items:center;grid-area:icon-end}.toggle-icon{align-self:center;justify-self:end;transition-property:color;transition-duration:var(--calcite-animation-timing);transition-timing-function:cubic-bezier(.4,0,.2,1);color:var(--calcite-block-icon-color, var(--calcite-color-text-3))}.toggle:hover .toggle-icon{color:var(--calcite-block-icon-color-hover, var(--calcite-color-text-1))}.container{position:relative;display:flex;block-size:100%;flex-direction:column}.content{position:relative;min-block-size:0px;flex:1 1 0%}@keyframes in{0%{opacity:0}to{opacity:1}}.content{animation:in var(--calcite-internal-animation-timing-slow) ease-in-out;padding-block:var(--calcite-internal-block-padding-block);padding-inline:var(--calcite-internal-block-padding-inline)}.content-start{display:flex;align-items:center;color:var(--calcite-block-text-color, var(--calcite-color-text-3))}.control-container{margin:0;display:flex;grid-area:control}calcite-action-menu{grid-area:menu}.actions-end{display:flex;align-items:stretch}:host([expanded]){margin-block:.5rem}:host([expanded]) .header .title .heading{color:var(--calcite-block-heading-text-color, var(--calcite-block-heading-text-color-press, var(--calcite-color-text-1)))}:host([expanded]) .description{color:var(--calcite-block-description-text-color, var(--calcite-color-text-2))}:host([expanded]) .icon--start,:host([expanded]) .icon--end{color:var(--calcite-block-icon-color, var(--calcite-color-text-1))}:host([expanded][scale=s]){margin-block:var(--calcite-spacing-xxs)}:host([expanded][scale=l]){margin-block:var(--calcite-spacing-md)}:host([hidden]){display:none}[hidden]{display:none}`,bF=class bF extends ir{constructor(){super(...arguments),this.transitionProp="margin-top",this.blockSectionChildren=[],this.messages=Po(),this.focusSetter=Ka()(this),this.hasContentStart=!1,this.hasControl=!1,this.hasEndActions=!1,this.hasIcon=!1,this.hasMenuActions=!1,this.collapsible=!1,this.disabled=!1,this.dragDisabled=!1,this.dragHandle=!1,this.expanded=!1,this.loading=!1,this.menuPlacement=Wwe,this.addToItems=[],this.moveToItems=[],this.sortDisabled=!1,this.overlayPositioning="absolute",this.scale="m",this.setPosition=null,this.setSize=null,this.sortHandleOpen=!1,this.calciteInternalBlockUpdateSortMenuItems=ot({cancelable:!1}),this.calciteBlockBeforeClose=ot({cancelable:!1}),this.calciteBlockBeforeOpen=ot({cancelable:!1}),this.calciteBlockClose=ot({cancelable:!1}),this.calciteBlockCollapse=ot({cancelable:!1}),this.calciteBlockExpand=ot({cancelable:!1}),this.calciteBlockOpen=ot({cancelable:!1}),this.calciteBlockSortHandleBeforeClose=ot({cancelable:!1}),this.calciteBlockSortHandleBeforeOpen=ot({cancelable:!1}),this.calciteBlockSortHandleClose=ot({cancelable:!1}),this.calciteBlockSortHandleOpen=ot({cancelable:!1}),this.calciteBlockToggle=ot({cancelable:!1})}get open(){return this.expanded}set open(e){k9.deprecated("property",{name:"open",removalVersion:4,suggested:"expanded"}),this.expanded=e}async setFocus(e){return this.focusSetter(()=>this.el,e)}connectedCallback(){super.connectedCallback(),this.transitionEl=this.el}load(){!this.heading&&!this.label&&k9.warn(`${this.el.tagName} is missing both heading & label. Please provide a heading or label for the component to be accessible.`)}willUpdate(e){e.has("expanded")&&(this.hasUpdated||this.expanded!==!1)&&lW(this),e.has("sortHandleOpen")&&(this.hasUpdated||this.sortHandleOpen!==!1)&&this.sortHandleOpenHandler(),e.has("expanded")&&this.hasUpdated&&(this.expanded?this.calciteBlockExpand.emit():this.calciteBlockCollapse.emit()),e.has("scale")&&this.hasUpdated&&this.updateBlockSectionScale()}updated(){cd(this)}onBeforeOpen(){this.calciteBlockBeforeOpen.emit()}onOpen(){this.calciteBlockOpen.emit()}onBeforeClose(){this.calciteBlockBeforeClose.emit()}onClose(){this.calciteBlockClose.emit()}sortHandleOpenHandler(){this.sortHandleEl&&(this.sortHandleEl.open=this.sortHandleOpen)}setSortHandleEl(e){this.sortHandleEl=e,this.sortHandleOpenHandler()}handleSortHandleBeforeOpen(e){e.stopPropagation(),this.calciteBlockSortHandleBeforeOpen.emit()}handleSortHandleBeforeClose(e){e.stopPropagation(),this.calciteBlockSortHandleBeforeClose.emit()}handleSortHandleClose(e){e.stopPropagation(),this.sortHandleOpen=!1,this.calciteBlockSortHandleClose.emit()}handleSortHandleOpen(e){e.stopPropagation(),this.sortHandleOpen=!0,this.calciteBlockSortHandleOpen.emit()}onHeaderClick(){this.expanded=!this.expanded,this.calciteBlockToggle.emit()}controlSlotChangeHandler(e){this.hasControl=lr(e)}menuActionsSlotChangeHandler(e){this.hasMenuActions=lr(e)}iconSlotChangeHandler(e){this.hasIcon=lr(e)}actionsEndSlotChangeHandler(e){this.hasEndActions=lr(e)}handleContentStartSlotChange(e){this.hasContentStart=lr(e)}handleDefaultSlotChange(e){this.blockSectionChildren=Rc(e,"calcite-block-section"),this.updateBlockSectionScale()}updateBlockSectionScale(){this.blockSectionChildren.forEach(e=>{e.scale=this.scale})}renderScrim(){const{loading:e}=this,i=Se`<slot @slotchange=${this.handleDefaultSlotChange}></slot>`;return[e?Se`<calcite-scrim .loading=${e}></calcite-scrim>`:null,i]}renderLoaderStatusIcon(){const{loading:e,messages:i,status:r}=this;return e?ri("loader",Se`<div class=${Te(Hr.icon)}><calcite-loader inline .label=${i.loading} .scale=${this.scale}></calcite-loader></div>`):r?ri("status-icon",Se`<div class=${Te(Hr.icon)}><calcite-icon class=${Te({[Hr.statusIcon]:!0,[Hr.valid]:r=="valid",[Hr.invalid]:r=="invalid"})} .icon=${RV[r]} .scale=${ua(this.scale)}></calcite-icon></div>`):ri("icon-slot",Se`<div class=${Te(Hr.icon)} .hidden=${!this.hasIcon}>${ri("icon-slot",Se`<slot name=${$E.icon} @slotchange=${this.iconSlotChangeHandler}></slot>`)}</div>`)}renderActionsEnd(){return Se`<div class=${Te(Hr.actionsEnd)} .hidden=${!this.hasEndActions}><slot name=${$E.actionsEnd} @slotchange=${this.actionsEndSlotChangeHandler}></slot></div>`}renderContentStart(){return Se`<div class=${Te(Hr.contentStart)} .hidden=${!this.hasContentStart}><slot name=${$E.contentStart} @slotchange=${this.handleContentStartSlotChange}></slot></div>`}renderTitle(){const{heading:e,headingLevel:i,description:r}=this;return e||r?Se`<div class=${Te(Hr.title)}>${uW({class:Hr.heading,level:i,children:e})}${r?Se`<div class=${Te(Hr.description)}>${r}</div>`:null}</div>`:null}renderIcon(e){const{iconFlipRtl:i}=this,r=i==="both"||e==="start"?i==="start":i==="end",n=e==="start"?this.iconStart:this.iconEnd,s=e==="start"?Hr.iconStart:Hr.iconEnd;if(n)return ri(n,Se`<calcite-icon class=${Te(s)} .flipRtl=${r} .icon=${n} .scale=${ua(this.scale)}></calcite-icon>`)}render(){const{collapsible:e,loading:i,expanded:r,label:n,heading:s,messages:o,description:a,menuFlipPlacements:l,menuPlacement:c,moveToItems:d,addToItems:f,setPosition:y,setSize:g,dragDisabled:b,sortDisabled:_,iconEnd:x,hasContentStart:E,iconStart:C}=this,k=r?o.collapse:o.expand,O=!!(s||a||E||C||i||status),D=Se`<header class=${Te({[Hr.header]:!0,[Hr.headerHasContent]:O})} id=${Qv.header}>${this.renderIcon("start")}${this.renderContentStart()}${this.renderLoaderStatusIcon()}${this.renderTitle()}</header>`,B=r?RV.expanded:RV.collapsed,j=Se`<div class=${Te(Hr.headerContainer)}>${this.dragHandle?Se`<calcite-sort-handle .addToItems=${f} .disabled=${b} .label=${s||n} .moveToItems=${d} @calciteSortHandleBeforeClose=${this.handleSortHandleBeforeClose} @calciteSortHandleBeforeOpen=${this.handleSortHandleBeforeOpen} @calciteSortHandleClose=${this.handleSortHandleClose} @calciteSortHandleOpen=${this.handleSortHandleOpen} overlay-positioning=fixed .scale=${this.scale} .setPosition=${y} .setSize=${g} .sortDisabled=${_} ${Ri(this.setSortHandleEl)}></calcite-sort-handle>`:null}${e?Se`<button aria-controls=${Qv.content} aria-describedby=${Qv.header} .ariaExpanded=${e?r:null} class=${Te(Hr.toggle)} id=${Qv.toggle} @click=${this.onHeaderClick} title=${k??ct}>${D}<div class=${Te(Hr.iconEndContainer)}>${this.renderIcon("end")}<calcite-icon class=${Te(Hr.toggleIcon)} .icon=${B} .scale=${ua(this.scale)}></calcite-icon></div></button>`:D}${x&&!e?Se`<div class=${Te(Hr.iconEndContainer)}>${this.renderIcon("end")}</div>`:null}<div aria-labelledby=${Qv.header} class=${Te(Hr.controlContainer)} .hidden=${!this.hasControl}><slot name=${$E.control} @slotchange=${this.controlSlotChangeHandler}></slot></div><calcite-action-menu .flipPlacements=${l??["top","bottom"]} .hidden=${!this.hasMenuActions} .label=${o.options} .overlayPositioning=${this.overlayPositioning} .placement=${c} .scale=${this.scale}><slot name=${$E.headerMenuActions} @slotchange=${this.menuActionsSlotChangeHandler}></slot></calcite-action-menu>${this.renderActionsEnd()}</div>`;return ud({disabled:this.disabled,children:Se`<article aria-label=${n??ct} .ariaBusy=${i} class=${Te({[Hr.container]:!0})}>${j}<section aria-labelledby=${Qv.toggle} class=${Te(Hr.content)} .hidden=${!r} id=${Qv.content}>${this.renderScrim()}</section></article>`})}};bF.properties={hasContentStart:[16,{},{state:!0}],hasControl:[16,{},{state:!0}],hasEndActions:[16,{},{state:!0}],hasIcon:[16,{},{state:!0}],hasMenuActions:[16,{},{state:!0}],collapsible:[7,{},{reflect:!0,type:Boolean}],description:1,disabled:[7,{},{reflect:!0,type:Boolean}],dragDisabled:[7,{},{reflect:!0,type:Boolean}],dragHandle:[7,{},{reflect:!0,type:Boolean}],expanded:[7,{},{reflect:!0,type:Boolean}],heading:1,headingLevel:[11,{},{type:Number,reflect:!0}],iconEnd:[3,{},{reflect:!0}],iconFlipRtl:[3,{},{reflect:!0}],iconStart:[3,{},{reflect:!0}],loading:[7,{},{reflect:!0,type:Boolean}],label:1,menuFlipPlacements:[0,{},{attribute:!1}],menuPlacement:[3,{},{reflect:!0}],messageOverrides:[0,{},{attribute:!1}],addToItems:[0,{},{attribute:!1}],moveToItems:[0,{},{attribute:!1}],sortDisabled:[5,{},{type:Boolean}],open:[7,{},{reflect:!0,type:Boolean}],overlayPositioning:[3,{},{reflect:!0}],scale:[3,{},{reflect:!0}],setPosition:[9,{},{type:Number}],setSize:[9,{},{type:Number}],sortHandleOpen:[7,{},{reflect:!0,type:Boolean}],status:[3,{},{reflect:!0}]},bF.styles=[Ict,Ect];let m7=bF;rr("calcite-block",m7);function Cct(){return ae.jsx(ae.Fragment,{children:ae.jsxs(bp,{heading:"Legend",collapsible:!0,expanded:!0,children:[ae.jsx("p",{children:"This map shows the results of each of the previous 5 U.S. presidential elections from 2000 to 2024. Each square represents the election winner for the given area in one year. The most recent election (2024) is represented as the right-most square. Each square's color represents the winner of the election; its size is proportional to the margin of victory for the winner. Smaller squares indicate a closer election. Larger squares indicate a larger margin of victory."}),ae.jsx("img",{src:"./trend-legend-horizontal.png",className:"legend",alt:"Legend"})]})})}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Mct=Mi`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{position:relative;display:block;inline-size:100%}.track,.bar{position:absolute;inset-block-start:0px;block-size:2px}.track{z-index:var(--calcite-z-index);inline-size:100%;overflow:hidden;background-color:var(--calcite-progress-background-color, var(--calcite-color-border-3))}.bar{z-index:var(--calcite-z-index);background-color:var(--calcite-progress-fill-color, var(--calcite-color-brand))}@media (forced-colors: active){.track{background-color:highlightText}.bar{background-color:linkText}}.indeterminate{inline-size:20%;animation:looping-progress-bar-ani calc(var(--calcite-internal-animation-timing-medium) / var(--calcite-internal-duration-factor) * 11 / var(--calcite-internal-duration-factor)) linear infinite}.indeterminate.calcite--rtl{animation-name:looping-progress-bar-ani-rtl}.reversed{animation-direction:reverse}.text{padding-inline:0px;padding-block:1rem 0px;text-align:center;font-size:var(--calcite-font-size--2);line-height:1rem;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-progress-text-color, var(--calcite-color-text-2))}@keyframes looping-progress-bar-ani{0%{transform:translate3d(-100%,0,0)}50%{inline-size:40%}to{transform:translate3d(600%,0,0)}}@keyframes looping-progress-bar-ani-rtl{0%{transform:translate3d(100%,0,0)}50%{inline-size:40%}to{transform:translate3d(-600%,0,0)}}:host([hidden]){display:none}[hidden]{display:none}`,OV={track:"track",bar:"bar",text:"text"},wF=class wF extends ir{constructor(){super(...arguments),this.reversed=!1,this.type="determinate",this.value=0}render(){const e=this.type==="determinate",i=e?{width:`${this.value}%`}:{},r=Qu(this.el);return Se`<div .ariaLabel=${this.label||this.text} .ariaValueMax=${e?"100":void 0} .ariaValueMin=${e?"0":void 0} .ariaValueNow=${e?this.value:void 0} role=progressbar><div class=${Te(OV.track)}><div class=${Te({[OV.bar]:!0,indeterminate:this.type==="indeterminate",[Iy.rtl]:r==="rtl",reversed:this.reversed})} style=${GI(i)}></div></div>${this.text?Se`<div class=${Te(OV.text)}>${this.text}</div>`:null}</div>`}};wF.properties={label:1,reversed:[7,{},{reflect:!0,type:Boolean}],text:1,type:[3,{},{reflect:!0}],value:[9,{},{type:Number}]},wF.styles=Mct;let y7=wF;rr("calcite-progress",y7);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const qoe=(t,e,i)=>{const r=new Map;for(let n=e;n<=i;n++)r.set(t[n],n);return r},kct=KM(class extends QM{constructor(t){if(super(t),t.type!==LF.CHILD)throw Error("repeat() can only be used in text expressions")}dt(t,e,i){let r;i===void 0?i=e:e!==void 0&&(r=e);const n=[],s=[];let o=0;for(const a of t)n[o]=r?r(a,o):o,s[o]=i(a,o),o++;return{values:s,keys:n}}render(t,e,i){return this.dt(t,e,i).values}update(t,[e,i,r]){const n=CSe(t),{values:s,keys:o}=this.dt(e,i,r);if(!Array.isArray(n))return this.ut=o,s;const a=this.ut??(this.ut=[]),l=[];let c,d,f=0,y=n.length-1,g=0,b=s.length-1;for(;f<=y&&g<=b;)if(n[f]===null)f++;else if(n[y]===null)y--;else if(a[f]===o[g])l[g]=Dv(n[f],s[g]),f++,g++;else if(a[y]===o[b])l[b]=Dv(n[y],s[b]),y--,b--;else if(a[f]===o[b])l[b]=Dv(n[f],s[b]),NT(t,l[b+1],n[f]),f++,b--;else if(a[y]===o[g])l[g]=Dv(n[y],s[g]),NT(t,n[f],n[y]),y--,g++;else if(c===void 0&&(c=qoe(o,g,b),d=qoe(a,f,y)),c.has(a[f]))if(c.has(a[y])){const _=d.get(o[g]),x=_!==void 0?n[_]:null;if(x===null){const E=NT(t,n[f]);Dv(E,s[g]),l[g]=E}else l[g]=Dv(x,s[g]),NT(t,n[f],x),n[_]=null;g++}else sz(n[y]),y--;else sz(n[f]),f++;for(;g<=b;){const _=NT(t,l[b+1]);Dv(_,s[g]),l[g++]=_}for(;f<=y;){const _=n[f++];_!==null&&sz(_)}return this.ut=o,Lae(t,l),tm}});/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Pct={max:"320px"},Act={max:"476px"},Lct={max:"768px"};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const FV={width:{small:NV(Lct.max),xsmall:NV(Act.max),xxsmall:NV(Pct.max)}};function NV(t){return parseInt(t)}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Rct=6e3,cn={container:"container",containerOverlaid:"container--overlaid",containerEdged:"container--edged",itemContainer:"item-container",itemContainerForward:"item-container--forward",itemContainerBackward:"item-container--backward",pagination:"pagination",paginationItems:"pagination-items",paginationItem:"pagination-item",paginationItemIndividual:"pagination-item--individual",paginationItemVisible:"pagination-item--visible",paginationItemOutOfRange:"pagination-item--out-of-range",paginationItemSelected:"pagination-item--selected",paginationItemRangeEdge:"pagination-item--range-edge",pageNext:"page-next",pagePrevious:"page-previous",autoplayControl:"autoplay-control",autoplayProgress:"autoplay-progress"},j_={chevronLeft:"chevron-left",chevronRight:"chevron-right",inactive:"bullet-point",active:"bullet-point-large",pause:"pause-f",play:"play-f"},TE={medium:7,small:5,xsmall:3,xxsmall:1},Oct="calcite-carousel-container",Fct={host:t=>`${Oct}-${t}`},Nct=Mi`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex;inline-size:100%;--calcite-internal-carousel-pagination-space: 1.5rem;--calcite-internal-carousel-pagination-space-wide: 3.5rem;--calcite-internal-carousel-pagination-background-color: var( --calcite-carousel-pagination-background-color, transparent );--calcite-internal-carousel-pagination-background-color-hover: var( --calcite-carousel-pagination-background-color-hover, transparent );--calcite-internal-carousel-pagination-background-color-press: var( --calcite-carousel-pagination-background-color-press, transparent );--calcite-internal-carousel-pagination-background-color-selected: var( --calcite-carousel-pagination-background-color-selected, transparent );--calcite-internal-carousel-pagination-overlay-background-color: var( --calcite-carousel-pagination-background-color, var(--calcite-color-foreground-1) );--calcite-internal-carousel-pagination-overlay-background-color-hover: var( --calcite-carousel-pagination-background-color-hover, var(--calcite-color-foreground-2) );--calcite-internal-carousel-pagination-overlay-background-color-active: var( --calcite-carousel-pagination-background-color-press, var(--calcite-color-foreground-2) );--calcite-internal-carousel-pagination-overlay-background-color-selected: var( --calcite-carousel-pagination-background-color-selected, var(--calcite-color-foreground-1) );--calcite-internal-carousel-pagination-icon-color-hover: var( --calcite-carousel-pagination-icon-color-hover, var(--calcite-color-text-1) );--calcite-internal-carousel-pagination-icon-color: var( --calcite-carousel-pagination-icon-color, var(--calcite-color-border-1) );--calcite-internal-carousel-pagination-icon-color-selected: var( --calcite-carousel-pagination-icon-color-selected, var(--calcite-color-brand) );--calcite-internal-carousel-control-icon-color-hover: var( --calcite-carousel-control-icon-color-hover, var(--calcite-internal-carousel-pagination-icon-color-hover) );--calcite-internal-carousel-control-icon-color: var( --calcite-carousel-control-icon-color, var(--calcite-carousel-pagination-icon-color, var(--calcite-color-text-3)) );--calcite-internal-carousel-autoplay-progress-background-color: var( --calcite-carousel-autoplay-progress-background-color, var(--calcite-color-border-3) );--calcite-internal-carousel-autoplay-progress-fill-color: var( --calcite-carousel-autoplay-progress-fill-color, var(--calcite-color-brand) );--calcite-internal-carousel-autoplay-control-color: var( --calcite-carousel-pagination-icon-color, var(--calcite-color-text-3) )}.container{position:relative;display:flex;inline-size:100%;flex-direction:column;overflow:hidden;font-size:var(--calcite-font-size--1);line-height:1rem;color:var(--calcite-color-text-2);outline-color:transparent}.container:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.container--edged:not(.container--overlaid){padding-inline:var(--calcite-internal-carousel-pagination-space-wide);inline-size:calc(100% - var(--calcite-internal-carousel-pagination-space-wide) * 2)}.item-container{display:flex;flex:1 1 auto;align-items:flex-start;justify-content:center;overflow:auto;padding:.25rem;animation-name:none;animation-duration:var(--calcite-animation-timing)}.container--overlaid .item-container{padding:0}.item-container--forward{animation-name:item-forward}.item-container--backward{animation-name:item-backward}calcite-carousel-item:not([selected]){opacity:0}.pagination{margin:.75rem;display:flex;flex-direction:row;align-items:center;justify-content:center;inline-size:auto}.pagination-items{display:flex;flex-direction:row;align-items:center}.container--overlaid .pagination{position:absolute}.pagination-item.page-next,.pagination-item.page-previous{color:var(--calcite-internal-carousel-control-icon-color);--calcite-icon-color: var(--calcite-internal-carousel-control-icon-color)}.pagination-item.page-next:hover,.pagination-item.page-previous:hover{color:var(--calcite-internal-carousel-control-icon-color-hover);--calcite-icon-color: var(--calcite-internal-carousel-control-icon-color-hover)}.container--edged .page-next,.container--edged .page-previous{block-size:3rem;inline-size:3rem;position:absolute;inset-block-start:50%;transform:translateY(-50%)}.container--edged .page-next{inset-inline-end:0}.container--edged .page-previous{inset-inline-start:0}.container--overlaid .pagination{inset-block-start:unset;inset-block-end:0;inset-inline:0}.pagination-item.autoplay-control{position:relative;color:var(--calcite-internal-carousel-autoplay-control-color);--calcite-progress-fill-color: var(--calcite-internal-carousel-autoplay-progress-fill-color);--calcite-progress-background-color: var(--calcite-internal-carousel-autoplay-progress-background-color)}.autoplay-control:focus .autoplay-progress{inset-block-end:4px;inset-inline:2px;inline-size:calc(100% - 4px)}.autoplay-progress{position:absolute;inset-block-end:2px;inset-inline:0;inline-size:100%}.pagination-item{margin:0;block-size:2rem;inline-size:2rem;cursor:pointer;align-items:center;border-style:none;background-color:transparent;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;outline-color:transparent;-webkit-appearance:none;display:flex;align-content:center;justify-content:center;background-color:var(--calcite-internal-carousel-pagination-background-color);color:var(--calcite-internal-carousel-pagination-icon-color)}.pagination-item:hover{background-color:var(--calcite-internal-carousel-pagination-background-color-hover);color:var(--calcite-internal-carousel-pagination-icon-color-hover)}.pagination-item:focus{background-color:var(--calcite-internal-carousel-pagination-background-color-press);outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.pagination-item:active{background-color:var(--calcite-internal-carousel-pagination-background-color-press);color:var(--calcite-internal-carousel-pagination-icon-color-hover)}.pagination-item calcite-icon{color:inherit;pointer-events:none}.pagination-item.pagination-item--selected{background-color:var(--calcite-internal-carousel-pagination-background-color-selected);color:var(--calcite-internal-carousel-pagination-icon-color-selected)}.pagination-item--individual{pointer-events:none;inline-size:0px;padding:0;opacity:0;visibility:hidden;transition:var(--calcite-animation-timing) ease-in-out inline-size,var(--calcite-animation-timing) ease-in-out padding,var(--calcite-animation-timing) ease-in-out opacity}.pagination-item--individual.pagination-item--visible{pointer-events:auto;inline-size:2rem;opacity:1;visibility:visible}.pagination-item--range-edge calcite-icon{scale:.75;transition:var(--calcite-animation-timing) ease-in-out scale}.container--overlaid .pagination-item{background-color:var(--calcite-internal-carousel-pagination-overlay-background-color)}.container--overlaid .pagination-item:hover{background-color:var(--calcite-internal-carousel-pagination-overlay-background-color-hover)}.container--overlaid .pagination-item:focus{background-color:var(--calcite-internal-carousel-pagination-overlay-background-color-active)}.container--overlaid .pagination-item:active{background-color:var(--calcite-internal-carousel-pagination-overlay-background-color-active)}.container--overlaid .pagination-item.pagination-item--selected{background-color:var(--calcite-internal-carousel-pagination-overlay-background-color-selected);color:var(--calcite-internal-carousel-pagination-icon-color-selected)}@keyframes item-forward{0%{transform:translate3d(100px,0,0)}to{transform:translateZ(0)}}@keyframes item-backward{0%{transform:translate3d(-100px,0,0)}to{transform:translateZ(0)}}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host([hidden]){display:none}[hidden]{display:none}`,_F=class _F extends ir{constructor(){super(...arguments),this.autoplayHandler=()=>{this.clearIntervals(),this.slideDurationInterval=setInterval(this.timer,this.autoplayDuration/100)},this.containerRef=Fc(),this.containerId=Fct.host(ld()),this.itemContainerRef=Fc(),this.resizeHandler=({contentRect:{width:e}})=>{this.setMaxItemsToBreakpoint(e)},this.resizeObserver=ts("resize",e=>e.forEach(this.resizeHandler)),this.slideDurationInterval=null,this.slideInterval=null,this.tabListRef=Fc(),this.timer=()=>{let e=this.slideDurationRemaining;(!this.suspendedDueToFocus&&!this.suspendedDueToHover||this.userPreventsSuspend)&&(e<=.01?(e=1,this.direction="forward",this.nextItem(!1)):e=e-.01),e>0&&(this.slideDurationRemaining=e)},this.messages=Po(),this.focusSetter=Ka()(this),this.direction="standby",this.items=[],this.maxItems=TE.xxsmall,this.playing=!1,this.slideDurationRemaining=1,this.suspendedDueToFocus=!1,this.suspendedDueToHover=!1,this.suspendedSlideDurationRemaining=1,this.userPreventsSuspend=!1,this.arrowType="inline",this.autoplay=!1,this.autoplayDuration=Rct,this.controlOverlay=!1,this.disabled=!1,this.calciteCarouselChange=ot({cancelable:!1}),this.calciteCarouselPause=ot({cancelable:!1}),this.calciteCarouselPlay=ot({cancelable:!1}),this.calciteCarouselResume=ot({cancelable:!1}),this.calciteCarouselStop=ot({cancelable:!1})}async play(){this.playing||this.autoplay!==""&&!this.autoplay&&this.autoplay!=="paused"||this.handlePlay(!0)}async setFocus(e){return this.focusSetter(()=>this.containerRef.value,e)}async stop(){this.playing&&this.handlePause(!0)}connectedCallback(){var e;super.connectedCallback(),(e=this.resizeObserver)==null||e.observe(this.el)}async load(){(this.autoplay===""||this.autoplay)&&this.autoplay!=="paused"?this.handlePlay(!1):this.autoplay==="paused"&&(this.paused=!0)}willUpdate(e){e.has("autoplay")&&this.hasUpdated&&this.autoplayWatcher(this.autoplay),e.has("direction")&&(this.hasUpdated||this.direction!=="standby")&&this.directionWatcher(this.direction),e.has("playing")&&(this.hasUpdated||this.playing!==!1)&&(this.paused=!this.playing),(e.has("suspendedDueToFocus")&&(this.hasUpdated||this.suspendedDueToFocus!==!1)||e.has("suspendedDueToHover")&&(this.hasUpdated||this.suspendedDueToHover!==!1))&&this.suspendWatcher()}updated(){cd(this)}disconnectedCallback(){var e;super.disconnectedCallback(),this.clearIntervals(),(e=this.resizeObserver)==null||e.disconnect()}autoplayWatcher(e){e||this.handlePause(!1)}async directionWatcher(e){e==="standby"||!this.itemContainerRef.value||(await bZe(this.itemContainerRef.value,e==="forward"?"item-forward":"item-backward"),this.direction="standby")}suspendWatcher(){!this.suspendedDueToFocus&&!this.suspendedDueToHover?this.suspendEnd():this.suspendStart()}setMaxItemsToBreakpoint(e){if(e){if(e>=FV.width.small){this.maxItems=TE.medium;return}if(e>=FV.width.xsmall){this.maxItems=TE.small;return}if(e>=FV.width.xxsmall){this.maxItems=TE.xsmall;return}this.maxItems=TE.xxsmall}}clearIntervals(){clearInterval(this.slideDurationInterval),clearInterval(this.slideInterval)}nextItem(e){this.playing&&e&&(this.playing=!1);const i=L3(this.selectedIndex+1,this.items.length);this.setSelectedItem(i,e)}previousItem(){this.playing=!1;const e=L3(Math.max(this.selectedIndex-1,-1),this.items.length);this.setSelectedItem(e,!0)}handlePlay(e){this.playing=!0,this.autoplayHandler(),this.slideInterval=setInterval(this.autoplayHandler,this.autoplayDuration),e&&this.calciteCarouselPlay.emit()}handlePause(e){this.playing=!1,this.clearIntervals(),this.slideDurationRemaining=1,this.suspendedSlideDurationRemaining=1,e&&this.calciteCarouselStop.emit()}suspendStart(){this.suspendedSlideDurationRemaining=this.slideDurationRemaining}suspendEnd(){this.slideDurationRemaining=this.suspendedSlideDurationRemaining}handleSlotChange(e){const i=Rc(e);if(i.length<1)return;const r=i.findIndex(s=>s.selected),n=r>-1?r:0;this.items=i,this.setSelectedItem(n,!1)}setSelectedItem(e,i){const r=this.selectedIndex;this.items.forEach((n,s)=>{const o=e===s;n.selected=o,o&&(this.selectedItem=n,this.selectedIndex=s)}),i&&(this.playing=!1,r!==this.selectedIndex&&this.calciteCarouselChange.emit())}handleArrowClick(e){const i=e.target.dataset.direction;this.playing&&this.handlePause(!0),i==="next"?(this.direction="forward",this.nextItem(!0)):i==="previous"&&(this.direction="backward",this.previousItem())}handleItemSelection(e){const i=e.target,r=parseInt(i.dataset.index);r!==this.selectedIndex&&(this.playing&&this.handlePause(!0),this.direction=r>this.selectedIndex?"forward":"backward",this.setSelectedItem(r,!0))}toggleRotation(){this.userPreventsSuspend=!0,this.playing?this.handlePause(!0):this.handlePlay(!0)}handleFocusIn(){const e=this.playing;e&&(this.suspendedDueToFocus=!0),(!this.suspendedDueToFocus||!this.suspendedDueToHover)&&e&&this.calciteCarouselPause.emit()}handleMouseIn(){const e=this.playing;e&&(this.suspendedDueToHover=!0),(!this.suspendedDueToFocus||!this.suspendedDueToHover)&&e&&this.calciteCarouselPause.emit()}handleMouseOut(e){const i=!this.el.contains(e.relatedTarget),r=this.playing;i&&r&&(this.suspendedDueToHover=!1),i&&r&&!this.suspendedDueToFocus&&(this.userPreventsSuspend=!1,this.calciteCarouselResume.emit())}handleFocusOut(e){const i=!e.composedPath().includes(e.relatedTarget),r=this.playing;i&&r&&(this.suspendedDueToFocus=!1),i&&r&&!this.suspendedDueToHover&&(this.userPreventsSuspend=!1,this.calciteCarouselResume.emit())}containerKeyDownHandler(e){if(e.target!==this.containerRef.value)return;const i=this.items.length-1;switch(e.key){case" ":case"Enter":e.preventDefault(),(this.autoplay===""||this.autoplay||this.autoplay==="paused")&&this.toggleRotation();break;case"ArrowRight":e.preventDefault(),this.direction="forward",this.nextItem(!0);break;case"ArrowLeft":e.preventDefault(),this.direction="backward",this.previousItem();break;case"Home":if(e.preventDefault(),this.selectedIndex===0)return;this.direction="backward",this.setSelectedItem(0,!0);break;case"End":if(e.preventDefault(),this.selectedIndex===i)return;this.direction="forward",this.setSelectedItem(i,!0);break}}tabListKeyDownHandler(e){const i=Array(...this.tabListRef.value.querySelectorAll(`button:not(.${cn.paginationItemOutOfRange})`)),r=e.target;switch(e.key){case"ArrowRight":Wf(i,r,"next");break;case"ArrowLeft":Wf(i,r,"previous");break;case"Home":e.preventDefault(),Wf(i,r,"first");break;case"End":e.preventDefault(),Wf(i,r,"last");break}}renderRotationControl(){const e=this.playing?this.messages.pause:this.messages.play,i=this.slideDurationRemaining*100;return Se`<button .ariaLabel=${e} class=${Te({[cn.paginationItem]:!0,[cn.autoplayControl]:!0})} @click=${this.toggleRotation} title=${e??ct}><calcite-icon .icon=${this.playing?j_.pause:j_.play} scale=s></calcite-icon>${this.playing&&Se`<calcite-progress class=${Te(cn.autoplayProgress)} .label=${this.messages.carouselItemProgress} .value=${i}></calcite-progress>`||""}</button>`}renderPaginationArea(){return Se`<div class=${Te({[cn.pagination]:!0,[cn.containerOverlaid]:this.controlOverlay})} @keydown=${this.tabListKeyDownHandler} ${Ri(this.tabListRef)}>${(this.playing||this.autoplay===""||this.autoplay||this.autoplay==="paused")&&this.renderRotationControl()||""}${this.arrowType==="inline"&&this.renderArrow("previous")||""}${this.renderPaginationItems()}${this.arrowType==="inline"&&this.renderArrow("next")||""}</div>`}renderPaginationItems(){const{selectedIndex:e,maxItems:i,items:r,label:n,handleItemSelection:s}=this;return Se`<div .ariaLabel=${n} class=${Te(cn.paginationItems)} role=tablist>${kct(r,o=>o.id,(o,a)=>{const l=r.length,c=a===e,d=a===0,f=a===l-1,y=l-i-1,g=e<i,b=e>=y,_=g?0:e-Math.floor(i/2),x=b?l:_+i,E=g?0:b?y:_,C=g?i+1:x,k=!d&&!f&&!c&&(a===E-1||a===C),O=c||a<=C&&a>=E-1,D=l-1<=i,B=c?j_.active:j_.inactive;return Se`<button aria-controls=${(c?void 0:o.id)??ct} .ariaSelected=${c} class=${Te({[cn.paginationItem]:!0,[cn.paginationItemIndividual]:!0,[cn.paginationItemSelected]:c,[cn.paginationItemRangeEdge]:l-1>i&&k,[cn.paginationItemOutOfRange]:!(D||O),[cn.paginationItemVisible]:D||O})} data-index=${a??ct} @click=${s} role=tab title=${o.label??ct}><calcite-icon .icon=${B} scale=l></calcite-icon></button>`})}</div>`}renderArrow(e){const i=e==="previous",r=Qu(this.el),n=this.arrowType==="edge"?"m":"s",s=i?cn.pagePrevious:cn.pageNext,o=i?this.messages.previous:this.messages.next,a=i?j_.chevronLeft:j_.chevronRight;return Se`<button aria-controls=${this.containerId??ct} class=${Te({[cn.paginationItem]:!0,[s]:!0})} data-direction=${e??ct} @click=${this.handleArrowClick} title=${o??ct}><calcite-icon .flipRtl=${r==="rtl"} .icon=${a} .scale=${n}></calcite-icon></button>`}render(){const{direction:e}=this;return ud({disabled:this.disabled,children:Se`<div .ariaLabel=${this.label} .ariaLive=${this.playing?"off":"polite"} .ariaRoleDescription=${this.messages.carousel} class=${Te({[cn.container]:!0,[cn.containerOverlaid]:this.controlOverlay,[cn.containerEdged]:this.arrowType==="edge"})} @focusin=${this.handleFocusIn} @focusout=${this.handleFocusOut} @keydown=${this.containerKeyDownHandler} @mouseenter=${this.handleMouseIn} @mouseleave=${this.handleMouseOut} role=group tabindex=0 ${Ri(this.containerRef)}><section class=${Te({[cn.itemContainer]:!0,[cn.itemContainerForward]:e==="forward",[cn.itemContainerBackward]:e==="backward"})} id=${this.containerId??ct} ${Ri(this.itemContainerRef)}><slot @slotchange=${this.handleSlotChange}></slot></section>${this.items.length>1&&this.renderPaginationArea()||""}${this.arrowType==="edge"&&this.renderArrow("previous")||""}${this.arrowType==="edge"&&this.renderArrow("next")||""}</div>`})}};_F.properties={direction:[16,{},{state:!0}],items:[16,{},{state:!0}],maxItems:[16,{},{state:!0}],playing:[16,{},{state:!0}],selectedIndex:[16,{},{state:!0}],slideDurationRemaining:[16,{},{state:!0}],suspendedDueToFocus:[16,{},{state:!0}],suspendedDueToHover:[16,{},{state:!0}],suspendedSlideDurationRemaining:[16,{},{state:!0}],userPreventsSuspend:[16,{},{state:!0}],arrowType:[3,{},{reflect:!0}],autoplay:[3,{},{reflect:!0}],autoplayDuration:[11,{},{type:Number,reflect:!0}],controlOverlay:[7,{},{reflect:!0,type:Boolean}],disabled:[7,{},{reflect:!0,type:Boolean}],label:1,messageOverrides:[0,{},{attribute:!1}],paused:[5,{},{type:Boolean}],selectedItem:[0,{},{attribute:!1}]},_F.styles=Nct;let X3=_F;rr("calcite-carousel",X3);const Dct=Object.freeze(Object.defineProperty({__proto__:null,Carousel:X3},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Hoe={container:"container",selected:"selected"},zct="calcite-carousel-item",Vct={host:t=>`${zct}-${t}`},jct=Mi`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{display:flex}.container{display:none;inline-size:var(--calcite-container-size-content-fluid)}:host([selected]) .container{display:block}:host([hidden]){display:none}[hidden]{display:none}`,xF=class xF extends ir{constructor(){super(...arguments),this.guid=Vct.host(ld()),this.selected=!1}render(){const e=this.el.id||this.guid;return Hu(this.el,"id",e),Se`<div .ariaLabel=${this.label} class=${Te({[Hoe.container]:!0,[Hoe.selected]:this.selected})} role=tabpanel><slot></slot></div>`}};xF.properties={label:1,selected:[7,{},{reflect:!0,type:Boolean}]},xF.styles=jct;let K3=xF;rr("calcite-carousel-item",K3);const Uct=Object.freeze(Object.defineProperty({__proto__:null,CarouselItem:K3},Symbol.toStringTag,{value:"Module"}));function Bct(){return ae.jsx(ae.Fragment,{children:ae.jsx(bp,{heading:"Examples",collapsible:!0,children:ae.jsxs(JN,{label:"Examples",children:[ae.jsx(Qs,{label:"Gradual change",children:ae.jsxs("div",{className:"custom-content",children:[ae.jsx("img",{className:"examples",src:"./gradual-d.png",alt:"Gradual change"}),ae.jsxs("span",{children:[ae.jsx("b",{children:"Gradual change"}),". This example from Douglas County, Georgia shows a gradual swing from Republican support to Democrats over the last 5 elections. Voters showed strong support for Bush (R) in 2004. In 2008, the county leaned Democrat, and gradually increased support for Democrats in 2012, 2016, and 2020."]})]})}),ae.jsx(Qs,{label:"Bowtie",children:ae.jsxs("div",{className:"custom-content",children:[ae.jsx("img",{className:"examples",src:"./flip.png",alt:"Bowtie"}),ae.jsxs("span",{children:[ae.jsx("b",{children:"Bowtie"}),". In rare scenarios, some counties underwent a dramatic shift in support from one party to another. Anne Arundel County, Maryland went from strong Republican support in 2004 to strong Democrat support in 2020, creating a bowtie shape in the symbol."]})]})}),ae.jsx(Qs,{label:"No change",children:ae.jsxs("div",{className:"custom-content",children:[ae.jsx("img",{className:"examples",src:"./solid-r.png",alt:"No change"}),ae.jsxs("span",{children:[ae.jsx("b",{children:"No change."})," The populations of many areas are consistent in their support for one party over another. Shelby County, Alabama is an example of a county that has shown strong Republican support in each of the last 5 elections, posting margins of victory exceeding 40% in each of the previous 5 elections."]})]})}),ae.jsx(Qs,{label:"Inconsistent",children:ae.jsxs("div",{className:"custom-content",children:[ae.jsx("img",{className:"examples",src:"./contested.png",alt:"Contested"}),ae.jsxs("span",{children:[ae.jsx("b",{children:"Contested"}),". A few areas, especially in traditional swing states, have shown inconsistent support for either party over the last 5 elections. For example, Macomb County, Michigan showed strong support for Obama (D) in 2008 and 2012, but otherwise sided with Republicans in other elections."]})]})})]})})})}function Gct(){return ae.jsx(ae.Fragment,{children:ae.jsxs(bp,{heading:"Legend",collapsible:!0,expanded:!0,children:[ae.jsx("p",{children:"This map shows the change in votes for each party compared to the previous presidential election. The symbol is composed of three parts: a red circle for Republican change, a blue circle for Democratic change, and a yellow circle for third party change."}),ae.jsx("div",{className:"legendElement",children:ae.jsx("img",{src:"./legend-change-parties.png",className:"legend",alt:"Legend",style:{width:"300px"}})}),ae.jsx("p",{children:"Solid circles indicate an increase in votes for that party compared to the previous election. Hollow circles indicate a decrease in votes for that party compared to the previous election. The size of each circle indicates the magnitude of change, with larger circles indicating a larger change in votes."}),ae.jsx("div",{className:"legendElement",children:ae.jsx("img",{src:"./legend-change.png",className:"legend",alt:"Legend",style:{width:"120px"}})}),ae.jsxs("div",{className:"legendElement",children:[ae.jsx("b",{style:{fontSize:"12pt"},children:"Swing states"}),ae.jsx("img",{src:"./change-states.png",className:"legend",alt:"Legend",style:{width:"200px"}})]})]})})}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */function qct(t,e,i){const r=e[0]-t[0],n=i[0]-e[0],s=e[1]-t[1],o=i[1]-e[1],a=s/(r||n<0&&0),l=o/(n||r<0&&0),c=(a*n+l*r)/(r+n);return(Math.sign(a)+Math.sign(l))*Math.min(Math.abs(a),Math.abs(l),.5*Math.abs(c))||0}function Woe(t,e,i){const r=e[0]-t[0],n=e[1]-t[1];return r?(3*n/r-i)/2:i}function Zoe(t,e,i,r,n){const[s,o]=t,[a,l]=e,c=(a-s)/3,d=n([s+c,o+c*i]).join(","),f=n([a-c,l-c*r]).join(","),y=n([a,l]).join(",");return`C ${d} ${f} ${y}`}function Hct({width:t,height:e,min:i,max:r}){const n=r[0]-i[0],s=r[1]-i[1];return o=>{const a=(o[0]-i[0])/n*t,l=e-(o[1]-i[1])/s*e;return[a,l]}}function Wct(t){const[e,i]=t[0],r=[e,i],n=[e,i];return t.reduce(({min:s,max:o},[a,l])=>({min:[Math.min(s[0],a),Math.min(s[1],l)],max:[Math.max(o[0],a),Math.max(o[1],l)]}),{min:r,max:n})}function Zct({data:t,min:e,max:i,t:r}){if(t.length===0)return"";const[n,s]=r(t[0]),[o,a]=r(e),[l]=r(i);let c,d,f;const y=t.reduce((_,x,E)=>{if(d=t[E-2],f=t[E-1],E>1){const C=qct(d,f,x),k=c===void 0?Woe(d,f,C):c,O=Zoe(d,f,k,C,r);return c=C,`${_} ${O}`}return _},`M ${o},${a} L ${o},${s} L ${n},${s}`),g=t[t.length-1],b=Zoe(f,g,c,Woe(f,g,c),r);return`${y} ${b} L ${l},${a} Z`}const Jct=Mi`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{display:block;block-size:100%}.svg{fill:currentColor;stroke:transparent;margin:0;display:block;block-size:100%;inline-size:100%;padding:0}.svg .graph-path--highlight{fill:var(--calcite-graph-highlight-fill-color, var(--calcite-color-brand));opacity:.5}:host([hidden]){display:none}[hidden]{display:none}`,U_={svg:"svg",graphPath:"graph-path",graphPathHighlight:"graph-path--highlight"},DV="calcite-graph",oy={host:t=>`${DV}-${t}`,linearGradient:t=>`linear-gradient-${DV}-${t}`,mask:(t,e)=>`${DV}-${t}${e}`},SF=class SF extends ir{constructor(){super(...arguments),this.graphId=ld(),this.resizeObserver=ts("resize",()=>this.requestUpdate()),this.data=[]}connectedCallback(){var e;super.connectedCallback(),(e=this.resizeObserver)==null||e.observe(this.el)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this.resizeObserver)==null||e.disconnect()}render(){const{data:e,colorStops:i,el:r,highlightMax:n,highlightMin:s,min:o,max:a}=this,l=this.graphId,{clientHeight:c,clientWidth:d}=r;if(!e||e.length===0)return Se`<svg aria-hidden=true class=${Te(U_.svg)} height=${c??Vr} preserveAspectRatio=none viewBox=${`0 0 ${d} ${c}`} width=${d??Vr}></svg>`;const{min:f,max:y}=Wct(e);let g=f,b=y;(o<f[0]||o>f[0])&&(g=[o,0]),(a>y[0]||a<y[0])&&(b=[a,y[1]]);const _=Hct({min:g,max:b,width:d,height:c}),[x]=_([s,b[1]]),[E]=_([n,b[1]]),C=Zct({data:e,min:f,max:y,t:_}),k=i?`url(#${oy.linearGradient(l)})`:void 0;return Se`<svg aria-hidden=true class=${Te(U_.svg)} height=${c??Vr} preserveAspectRatio=none viewBox=${`0 0 ${d} ${c}`} width=${d??Vr}>${i?Da`<defs><linearGradient id=${oy.linearGradient(l)??Vr} x1=0 x2=1 y1=0 y2=0>${i.map(({offset:O,color:D,opacity:B})=>Da`<stop offset=${`${O*100}%`} stop-color=${D??Vr} stop-opacity=${B??Vr} />`)}</linearGradient></defs>`:null}${s!==void 0?[Da`<mask height=100% id=${oy.mask(l,1)??Vr} width=100% x=0% y=0%><path d=${`
            M 0,0
            L ${x-1},0
            L ${x-1},${c}
            L 0,${c}
            Z
          `} fill=white /></mask>`,Da`<mask height=100% id=${oy.mask(l,2)??Vr} width=100% x=0% y=0%><path d=${`
            M ${x+1},0
            L ${E-1},0
            L ${E-1},${c}
            L ${x+1}, ${c}
            Z
          `} fill=white /></mask>`,Da`<mask height=100% id=${oy.mask(l,3)??Vr} width=100% x=0% y=0%><path d=${`
                M ${E+1},0
                L ${d},0
                L ${d},${c}
                L ${E+1}, ${c}
                Z
              `} fill=white /></mask>`,Da`<path class=${Te(U_.graphPath)} d=${C??Vr} fill=${k??Vr} mask=${`url(#${oy.mask(l,1)})`} />`,Da`<path class=${Te(U_.graphPathHighlight)} d=${C??Vr} fill=${k??Vr} mask=${`url(#${oy.mask(l,2)})`} />`,Da`<path class=${Te(U_.graphPath)} d=${C??Vr} fill=${k??Vr} mask=${`url(#${oy.mask(l,3)})`} />`]:Da`<path class=${Te(U_.graphPath)} d=${C??Vr} fill=${k??Vr} />`}</svg>`}};SF.properties={colorStops:[0,{},{attribute:!1}],data:[0,{},{attribute:!1}],highlightMax:[9,{},{type:Number}],highlightMin:[9,{},{type:Number}],max:[11,{},{reflect:!0,type:Number}],min:[11,{},{reflect:!0,type:Number}]},SF.styles=Jct;let g7=SF;rr("calcite-graph",g7);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Yct=new RegExp("\\.(0+)?$"),Xct=new RegExp("0+$"),sr=class sr{constructor(e){if(e instanceof sr)return e;const[i,r]=nut(e).split(".").concat("");this.value=BigInt(i+r.padEnd(sr.DECIMALS,"0").slice(0,sr.DECIMALS))+BigInt(sr.ROUNDED&&r[sr.DECIMALS]>="5"),this.isNegative=e.charAt(0)==="-"}getIntegersAndDecimals(){const e=this.value.toString().replace("-","").padStart(sr.DECIMALS+1,"0"),i=e.slice(0,-sr.DECIMALS),r=e.slice(-sr.DECIMALS).replace(Xct,"");return{integers:i,decimals:r}}toString(){const{integers:e,decimals:i}=this.getIntegersAndDecimals();return`${this.isNegative?"-":""}${e}${i.length?"."+i:""}`}formatToParts(e){const{integers:i,decimals:r}=this.getIntegersAndDecimals(),n=e.numberFormatter.formatToParts(BigInt(i));return this.isNegative&&n.unshift({type:"minusSign",value:e.minusSign}),r.length&&(n.push({type:"decimal",value:e.decimal}),r.split("").forEach(s=>n.push({type:"fraction",value:s}))),n}format(e){const{integers:i,decimals:r}=this.getIntegersAndDecimals(),n=`${this.isNegative?e.minusSign:""}${e.numberFormatter.format(BigInt(i))}`,s=r.length?`${e.decimal}${r.split("").map(o=>e.numberFormatter.format(Number(o))).join("")}`:"";return`${n}${s}`}add(e){return sr.fromBigInt(this.value+new sr(e).value)}subtract(e){return sr.fromBigInt(this.value-new sr(e).value)}multiply(e){return sr._divRound(this.value*new sr(e).value,sr.SHIFT)}divide(e){return sr._divRound(this.value*sr.SHIFT,new sr(e).value)}};sr.DECIMALS=100,sr.ROUNDED=!0,sr.SHIFT=BigInt("1"+"0".repeat(sr.DECIMALS)),sr._divRound=(e,i)=>sr.fromBigInt(e/i+(sr.ROUNDED?e*BigInt(2)/i%BigInt(2):BigInt(0))),sr.fromBigInt=e=>Object.assign(Object.create(sr.prototype),{value:e,isNegative:e<BigInt(0)});let b$=sr;function OW(t){return!(!t||isNaN(Number(t)))}function e$t(t){return!t||!sut(t)?"":Q3(t,e=>{let i=!1;const r=e.split("").filter((n,s)=>n.match(/\./g)&&!i?(i=!0,!0):n.match(/-/g)&&s===0?!0:dW.includes(n)).join("");return OW(r)?new b$(r).toString():""})}const C1e=/^([-0])0+(?=\d)/,Kct=/(?!^\.)\.$/,Qct=/(?!^-)-/g,eut=/^-\b0\b\.?0*$/,tut=/0*$/,iut=new Set(["e","E","-",",",".",...dW]),t$t=t=>{const e=Array.from(t).filter(i=>iut.has(i)).join("");return Q3(e,i=>{const r=i.replace(Qct,"").replace(Kct,"").replace(C1e,"$1");return OW(r)?eut.test(r)?r:rut(r):i})};function rut(t){const e=t.split(".")[1],i=new b$(t).toString(),[r,n]=i.split(".");return e&&n!==e?`${r}.${e}`:i}function Q3(t,e){if(!t)return t;const i=t.toLowerCase().indexOf("e")+1;return i?t.replace(/[eE]*$/g,"").substring(0,i).concat(t.slice(i).replace(/[eE]/g,"")).split(/[eE]/).map((r,n)=>e(n===1?r.replace(/\./g,""):r)).join("e").replace(/^e/,"1e"):e(t)}function nut(t){const e=t.split(/[eE]/);if(e.length===1)return t;const i=+t;if(Number.isSafeInteger(i))return`${i}`;const r=t.charAt(0)==="-",n=+e[1],s=e[0].split("."),o=(r?s[0].substring(1):s[0])||"",a=s[1]||"",l=(f,y)=>{const g=Math.abs(y)-f.length,b=g>0?`${"0".repeat(g)}${f}`:f;return`${b.slice(0,y)}.${b.slice(y)}`},c=(f,y)=>{const g=y>f.length?`${f}${"0".repeat(y-f.length)}`:f;return`${g.slice(0,y)}.${g.slice(y)}`},d=n>0?`${o}${c(a,n)}`:`${l(o,n)}${a}`;return`${r?"-":""}${d.charAt(0)==="."?"0":""}${d.replace(Yct,"").replace(C1e,"")}`}function sut(t){return dW.some(e=>t.includes(e))}function i$t(t,e,i){const r=e.split(".")[1];if(r){const n=r.match(tut)[0];if(n&&i.delocalize(t).length!==e.length&&r.indexOf("e")===-1){const s=i.decimal;return t=t.includes(s)?t:`${t}${s}`,t.padEnd(t.length+n.length,i.localize("0"))}}return t}const eF="en",out=["ar","bg","bs","ca","cs","da","de","de-AT","de-CH","el",eF,"en-AU","en-CA","en-GB","es","es-MX","et","fi","fr","fr-CH","he","hi","hr","hu","id","it","it-CH","ja","ko","lt","lv","mk","no","nl","pl","pt","pt-PT","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-CN","zh-HK","zh-TW"];new Map(Object.entries({bg:{am:"пр.об.",pm:"сл.об."},bs:{am:"prijepodne",pm:"popodne"},ca:{am:"a. m.",pm:"p. m."},cs:{am:"dop.",pm:"odp."},es:{am:"a. m.",pm:"p. m."},"es-mx":{am:"a.m.",pm:"p.m."},"es-MX":{am:"a.m.",pm:"p.m."},fi:{am:"ap.",pm:"ip."},he:{am:"לפנה״צ",pm:"אחה״צ"},hu:{am:"de. ",pm:"du."},lt:{am:"priešpiet",pm:"popiet"},lv:{am:"priekšpusdienā",pm:"pēcpusdienā"},mk:{am:"претпл.",pm:"попл."},no:{am:"a.m.",pm:"p.m."},nl:{am:"a.m.",pm:"p.m."},"pt-pt":{am:"da manhã",pm:"da tarde"},"pt-PT":{am:"da manhã",pm:"da tarde"},ro:{am:"a.m.",pm:"p.m."},sl:{am:"dop.",pm:"pop."},sv:{am:"fm",pm:"em"},th:{am:"ก่อนเที่ยง",pm:"หลังเที่ยง"},tr:{am:"ÖÖ",pm:"ÖS"},uk:{am:"дп",pm:"пп"},vi:{am:"SA",pm:"CH"}}));const aut=["arab","arabext","latn"],zV=[...out],M1e=t=>aut.includes(t),VV=new Intl.NumberFormat().resolvedOptions().numberingSystem,k1e=VV==="arab"||!M1e(VV)?"latn":VV,lut=t=>M1e(t)?t:k1e;function cut(t){return t?zV.includes(t)?t:(t=t.toLowerCase(),t.includes("-")&&(t=t.replace(/(\w+)-(\w+)/,(e,i,r)=>`${i}-${r.toUpperCase()}`),zV.includes(t)||(t=t.split("-")[0])),t==="nb"||t==="nn"?"no":t==="zh"?"zh-CN":zV.includes(t)?t:(console.warn(`Translations for the "${t}" locale are not available and will fall back to the default, English (en).`),eF)):eF}class uut{constructor(){this.delocalize=e=>this._numberFormatOptions?Q3(e,i=>i.replace(new RegExp(`[${this._minusSign}]`,"g"),"-").replace(new RegExp(`[${this._group}]`,"g"),"").replace(new RegExp(`[${this._decimal}]`,"g"),".").replace(new RegExp(`[${this._digits.join("")}]`,"g"),this._getDigitIndex)):e,this.localize=e=>this._numberFormatOptions?Q3(e,i=>OW(i.trim())?new b$(i.trim()).format(this).replace(new RegExp(`[${this._actualGroup}]`,"g"),this._group):i):e}get group(){return this._group}get decimal(){return this._decimal}get minusSign(){return this._minusSign}get digits(){return this._digits}get numberFormatter(){return this._numberFormatter}get numberFormatOptions(){return this._numberFormatOptions}set numberFormatOptions(e){if(e.locale=cut(e==null?void 0:e.locale),e.numberingSystem=lut(e==null?void 0:e.numberingSystem),!this._numberFormatOptions&&e.locale===eF&&e.numberingSystem===k1e&&Object.keys(e).length===2||JSON.stringify(this._numberFormatOptions)===JSON.stringify(e))return;this._numberFormatOptions=e,this._numberFormatter=new Intl.NumberFormat(this._numberFormatOptions.locale,this._numberFormatOptions),this._digits=[...new Intl.NumberFormat(this._numberFormatOptions.locale,{useGrouping:!1,numberingSystem:this._numberFormatOptions.numberingSystem}).format(9876543210)].reverse();const i=new Map(this._digits.map((n,s)=>[n,s])),r=new Intl.NumberFormat(this._numberFormatOptions.locale,{numberingSystem:this._numberFormatOptions.numberingSystem}).formatToParts(-123456789e-1);this._actualGroup=r.find(n=>n.type==="group").value,this._group=this._actualGroup.trim().length===0||this._actualGroup==" "?" ":this._actualGroup,this._decimal=e.locale==="bs"||e.locale==="mk"?",":r.find(n=>n.type==="decimal").value,this._minusSign=r.find(n=>n.type==="minusSign").value,this._getDigitIndex=n=>i.get(n)}}const Joe=new uut;/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Ci={container:"container",containerRange:"container--range",graph:"graph",handle:"handle",handleExtension:"handle-extension",handleLabel:"handle__label",handleLabelMinValue:"handle__label--minValue",handleLabelValue:"handle__label--value",hyphen:"hyphen",hyphenWrap:"hyphen--wrap",static:"static",thumb:"thumb",thumbActive:"thumb--active",thumbContainer:"thumb-container",thumbMinValue:"thumb--minValue",thumbPrecise:"thumb--precise",thumbValue:"thumb--value",tick:"tick",tickActive:"tick--active",tickLabel:"tick__label",tickMax:"tick__label--max",tickMin:"tick__label--min",ticks:"ticks",track:"track",trackRange:"track__range",transformed:"transformed",scale:t=>`scale--${t}`},dut="calcite-slider",jV={validationMessage:"validationMessage",host:t=>`${dut}-${t}`},hut=250,put=Mi`@charset "UTF-8";:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}.scale--s{--calcite-slider-handle-size: .625rem;--calcite-slider-handle-extension-height: .4rem;--calcite-slider-container-font-size: var(--calcite-font-size--3)}.scale--s .handle__label,.scale--s .tick__label{line-height:.75rem}.scale--m{--calcite-slider-handle-size: .875rem;--calcite-slider-handle-extension-height: .5rem;--calcite-slider-container-font-size: var(--calcite-font-size--2)}.scale--m .handle__label,.scale--m .tick__label{line-height:1rem}.scale--l{--calcite-slider-handle-size: 1rem;--calcite-slider-handle-extension-height: .65rem;--calcite-slider-container-font-size: var(--calcite-font-size--1)}.scale--l .handle__label,.scale--l .tick__label{line-height:1rem}.handle__label,.tick__label{font-weight:var(--calcite-font-weight-medium);color:var(--calcite-slider-text-color, var(--calcite-color-text-2));font-size:var(--calcite-slider-container-font-size)}:host{display:block}:host .validation-container{padding-block-start:0!important}.container{position:relative;display:block;overflow-wrap:normal;word-break:normal;padding-inline:calc(var(--calcite-slider-handle-size) * .5);padding-block:calc(var(--calcite-slider-handle-size) * .5);margin-block:calc(var(--calcite-slider-handle-size) * .5);margin-inline:0;--calcite-slider-full-handle-height: calc( var(--calcite-slider-handle-size) + var(--calcite-slider-handle-extension-height) );touch-action:none;-webkit-user-select:none;user-select:none}:host([disabled]) .track__range,:host([disabled]) .tick--active{background-color:var(--calcite-color-text-3)}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}.scale--s .thumb:not(.thumb--precise){--calcite-slider-thumb-y-offset: -.375rem}.scale--m .thumb:not(.thumb--precise){--calcite-slider-thumb-y-offset: -.5rem}.scale--l .thumb:not(.thumb--precise){--calcite-slider-thumb-y-offset: -.55rem}:host([precise]:not([has-histogram])) .container .thumb--value{--calcite-slider-thumb-y-offset: calc(var(--calcite-slider-full-handle-height) * -1)}.thumb-container{position:relative;max-inline-size:100%}.thumb{--calcite-slider-thumb-x-offset: calc(var(--calcite-slider-handle-size) * .5);position:absolute;margin:0;display:flex;cursor:pointer;flex-direction:column;align-items:center;border-style:none;background-color:transparent;padding:0;font-family:inherit;outline:2px solid transparent;outline-offset:2px;transform:translate(var(--calcite-slider-thumb-x-offset),var(--calcite-slider-thumb-y-offset))}.thumb .handle__label{white-space:nowrap}.thumb .handle__label.static,.thumb .handle__label.transformed{position:absolute;inset-block:0px;opacity:0}.thumb .handle__label.hyphen:after{content:"—";display:inline-block;inline-size:1em}.thumb .handle__label.hyphen--wrap{display:flex}.thumb .handle{box-sizing:border-box;border-radius:9999px;outline-color:transparent;background-color:var(--calcite-slider-handle-fill-color, var(--calcite-color-foreground-1));block-size:var(--calcite-slider-handle-size);inline-size:var(--calcite-slider-handle-size);box-shadow:0 0 0 2px var(--calcite-color-text-3) inset;transition:border var(--calcite-internal-animation-timing-medium) ease,background-color var(--calcite-internal-animation-timing-medium) ease,box-shadow var(--calcite-animation-timing) ease}.thumb .handle-extension{inline-size:.125rem;block-size:var(--calcite-slider-handle-extension-height);background-color:var(--calcite-slider-handle-extension-color, var(--calcite-color-text-3))}.thumb:hover .handle{box-shadow:0 0 0 3px var(--calcite-color-brand) inset}.thumb:hover .handle-extension{background-color:var(--calcite-slider-accent-color, var(--calcite-color-brand))}.thumb:focus .handle{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(var(--calcite-spacing-base) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.thumb:focus .handle-extension{background-color:var(--calcite-slider-accent-color, var(--calcite-color-brand))}.thumb.thumb--minValue{transform:translate(calc(var(--calcite-slider-thumb-x-offset) * -1),var(--calcite-slider-thumb-y-offset))}.thumb.thumb--precise{--calcite-slider-thumb-y-offset: -.125rem}:host([label-handles]) .thumb{--calcite-slider-thumb-x-offset: 50%}:host([label-handles]):host(:not([has-histogram])) .scale--s .thumb:not(.thumb--precise){--calcite-slider-thumb-y-offset: -1.4375rem}:host([label-handles]):host(:not([has-histogram])) .scale--m .thumb:not(.thumb--precise){--calcite-slider-thumb-y-offset: -1.875rem}:host([label-handles]):host(:not([has-histogram])) .scale--l .thumb:not(.thumb--precise){--calcite-slider-thumb-y-offset: -2rem}:host([has-histogram][label-handles]) .handle__label,:host([label-handles]:not([has-histogram])) .thumb--minValue.thumb--precise .handle__label{margin-block-start:.5em}:host(:not([has-histogram]):not([precise])) .handle__label,:host([label-handles]:not([has-histogram])) .thumb--value .handle__label{margin-block-end:.5em}:host([label-handles][precise]):host(:not([has-histogram])) .scale--s .thumb--value{--calcite-slider-thumb-y-offset: -2.075rem}:host([label-handles][precise]):host(:not([has-histogram])) .scale--m .thumb--value{--calcite-slider-thumb-y-offset: -2.75rem}:host([label-handles][precise]):host(:not([has-histogram])) .scale--l .thumb--value{--calcite-slider-thumb-y-offset: -3.0625rem}.thumb:focus .handle,.thumb--active .handle{background-color:var(--calcite-slider-accent-color, var(--calcite-color-brand));box-shadow:0 0 8px #00000029}.thumb:hover.thumb--precise:after,.thumb:focus.thumb--precise:after,.thumb--active.thumb--precise:after{background-color:var(--calcite-slider-accent-color, var(--calcite-color-brand))}.track{position:relative;block-size:.125rem;border-radius:0;background-color:var(--calcite-slider-track-color, var(--calcite-color-border-2));transition:all var(--calcite-internal-animation-timing-medium) ease-in}.track__range{position:absolute;inset-block-start:0px;block-size:.125rem;background-color:var(--calcite-slider-track-fill-color, var(--calcite-color-brand))}.container--range .track__range:hover{cursor:ew-resize}.container--range .track__range:after{position:absolute;inline-size:100%;content:"";inset-block-start:calc(var(--calcite-slider-full-handle-height) * .5 * -1);block-size:calc(var(--calcite-slider-handle-size) + var(--calcite-slider-handle-extension-height))}@media (forced-colors: active){.thumb{outline-width:0;outline-offset:0}.handle{outline:2px solid transparent;outline-offset:2px}.thumb:focus .handle,.thumb .handle-extension,.thumb:hover .handle-extension,.thumb:focus .handle-extension,.thumb:active .handle-extension{background-color:canvasText}.track{background-color:canvasText}.track__range{background-color:highlight}}.tick{position:absolute;block-size:.25rem;inline-size:.125rem;border-width:1px;border-style:solid;background-color:var(--calcite-slider-tick-color, var(--calcite-color-border-input));border-color:var(--calcite-slider-tick-border-color, var(--calcite-color-foreground-1));inset-block-start:-2px;pointer-events:none;margin-inline-start:-.125rem}.tick--active{background-color:var(--calcite-slider-tick-selected-color, var(--calcite-color-brand))}.tick__label{pointer-events:none;margin-block-start:.875rem;display:flex;justify-content:center}.tick__label--min{transition:opacity var(--calcite-animation-timing)}.tick__label--max{transition:opacity var(--calcite-internal-animation-timing-fast)}:host([has-histogram][label-handles]) .tick__label--min,:host([has-histogram][label-handles]) .tick__label--max,:host([has-histogram][precise]) .tick__label--min,:host([has-histogram][precise]) .tick__label--max{font-weight:var(--calcite-font-weight-normal);color:var(--calcite-color-text-3)}.graph{color:var(--calcite-slider-graph-color, var(--calcite-color-foreground-3));block-size:48px}:host([label-ticks][ticks]) .container{padding-block-end:calc(.875rem + var(--calcite-slider-container-font-size))}:host([has-histogram]):host([precise][label-handles]) .container{padding-block-end:calc(var(--calcite-slider-full-handle-height) + 1em)}:host([has-histogram]):host([label-handles]:not([precise])) .container{padding-block-end:calc(var(--calcite-slider-handle-size) * .5 + 1em)}:host([has-histogram]):host([precise]:not([label-handles])) .container{padding-block-end:var(--calcite-slider-full-handle-height)}:host(:not([has-histogram])):host([precise]:not([label-handles])) .container{padding-block-start:var(--calcite-slider-full-handle-height)}:host(:not([has-histogram])):host([precise]:not([label-handles])) .container--range{padding-block-end:var(--calcite-slider-full-handle-height)}:host(:not([has-histogram])):host([label-handles]:not([precise])) .container{padding-block-start:calc(var(--calcite-slider-full-handle-height) + 4px)}:host(:not([has-histogram])):host([label-handles][precise]) .container{padding-block-start:calc(var(--calcite-slider-full-handle-height) + var(--calcite-slider-container-font-size) + 4px)}:host(:not([has-histogram])):host([label-handles][precise]) .container--range{padding-block-end:calc(var(--calcite-slider-full-handle-height) + var(--calcite-slider-container-font-size) + 4px)}.internal-label-alignment--center{align-items:center}.internal-label-alignment--end{align-items:end}.internal-label--container{display:flex;justify-content:space-between;color:var(--calcite-color-text-1)}.internal-label-required--indicator{font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-status-danger);padding-inline:var(--calcite-spacing-base)}.internal-label-required--indicator:hover{cursor:help}.internal-label--text{line-height:1}:host([scale=s]) .internal-label-spacing--bottom{margin-block-end:var(--calcite-spacing-xxs)}:host([scale=s]) .internal-label-spacing-inline--end{margin-inline-end:var(--calcite-spacing-sm)}:host([scale=s]) .internal-label-spacing-inline--start{margin-inline-start:var(--calcite-spacing-sm)}:host([scale=s]) .internal-label--text{font-size:var(--calcite-font-size--2)}:host([scale=m]) .internal-label-spacing--bottom{margin-block-end:var(--calcite-spacing-sm)}:host([scale=m]) .internal-label-spacing-inline--end{margin-inline-end:var(--calcite-spacing-sm)}:host([scale=m]) .internal-label-spacing-inline--start{margin-inline-start:var(--calcite-spacing-sm)}:host([scale=m]) .internal-label--text{font-size:var(--calcite-font-size--1)}:host([scale=l]) .internal-label-spacing--bottom{margin-block-end:var(--calcite-spacing-sm)}:host([scale=l]) .internal-label-spacing-inline--end{margin-inline-end:var(--calcite-spacing-md)}:host([scale=l]) .internal-label-spacing-inline--start{margin-inline-start:var(--calcite-spacing-md)}:host([scale=l]) .internal-label--text{font-size:var(--calcite-font-size-0)}.validation-container{display:flex;flex-direction:column;align-items:flex-start;align-self:stretch}:host([scale=m]) .validation-container,:host([scale=l]) .validation-container{padding-block-start:.5rem}:host([scale=s]) .validation-container{padding-block-start:.25rem}::slotted(input[slot=hidden-form-input]){margin:0!important;opacity:0!important;outline:none!important;padding:0!important;position:absolute!important;inset:0!important;transform:none!important;-webkit-appearance:none!important;z-index:-1!important}:host([hidden]){display:none}[hidden]{display:none}`;function qo(t){return Array.isArray(t)}const OC=class OC extends ir{constructor(){super(),this.dragEnd=e=>{this.disabled||(this.removeDragListeners(),this.focusActiveHandle(e.clientX),this.lastDragPropValue!=this[this.dragProp]&&this.emitChange(),this.dragProp=null,this.lastDragPropValue=null,this.minValueDragRange=null,this.maxValueDragRange=null,this.minMaxValueRange=null)},this.dragUpdate=e=>{if(!this.disabled&&(e.preventDefault(),this.dragProp)){const i=this.mapToRange(e.clientX||e.pageX);if(qo(this.value)&&this.dragProp==="minMaxValue")if(this.minValueDragRange&&this.maxValueDragRange&&this.minMaxValueRange){const r=i-this.minValueDragRange,n=i+this.maxValueDragRange;n<=this.max&&r>=this.min&&n-r===this.minMaxValueRange&&this.setValue({minValue:this.clamp(r,"minValue"),maxValue:this.clamp(n,"maxValue")})}else this.minValueDragRange=i-this.minValue,this.maxValueDragRange=this.maxValue-i,this.minMaxValueRange=this.maxValue-this.minValue;else if(qo(this.value)&&qo(this.previousEmittedValue)&&this.dragProp==="maxValue"){const[r,n]=this.previousEmittedValue;r===n&&i<r?(this.dragProp="minValue",this.minHandle.focus()):this.setValue({[this.dragProp]:this.clamp(i,this.dragProp)})}else this.setValue({[this.dragProp]:this.clamp(i,this.dragProp)})}},this.formatValue=e=>(Joe.numberFormatOptions={locale:this.messages._lang,numberingSystem:this.numberingSystem,useGrouping:this.groupSeparator},Joe.localize(e.toString())),this.guid=jV.host(ld()),this.messages=Po(),this.pointerUpDragEnd=e=>{this.disabled||!sR(e)||this.dragEnd(e)},this.trackRef=Fc(),this.focusSetter=Ka()(this),this.activeProp="value",this.maxValueDragRange=null,this.minMaxValueRange=null,this.minValueDragRange=null,this.tickValues=[],this.disabled=!1,this.fillPlacement="start",this.groupSeparator=!1,this.hasHistogram=!1,this.labelHandles=!1,this.labelTicks=!1,this.max=100,this.min=0,this.mirrored=!1,this.precise=!1,this.required=!1,this.scale="m",this.snap=!1,this.status="idle",this.step=1,this.validity={valid:!1,badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valueMissing:!1},this.value=0,this.calciteSliderChange=ot({cancelable:!1}),this.calciteSliderInput=ot({cancelable:!1}),this.listen("pointerdown",this.pointerDownHandler),this.listen("keydown",this.handleKeyDown),this.listen("touchstart",this.handleTouchStart)}async setFocus(e){return this.focusSetter(()=>this.minHandle||this.maxHandle,e)}connectedCallback(){super.connectedCallback(),this.setMinMaxFromValue(),this.setValueFromMinMax(),D2(this),Iwe(this),this.previousEmittedValue=this.value}load(){qo(this.value)||(this.value=this.snap?this.getClosestStep(this.value):this.clamp(this.value)),Mwe(this,this.value)}willUpdate(e){e.has("histogram")&&(this.hasHistogram=!!this.histogram),e.has("ticks")&&(this.tickValues=this.generateTickValues()),e.has("value")&&(this.hasUpdated||this.value!==0)&&this.setMinMaxFromValue(),(e.has("minValue")||e.has("maxValue"))&&this.setValueFromMinMax()}updated(){this.labelHandles&&(this.adjustHostObscuredHandleLabel("value"),qo(this.value)&&(this.adjustHostObscuredHandleLabel("minValue"),this.precise&&!this.hasHistogram||this.hyphenateCollidingRangeHandleLabels())),this.hideObscuredBoundingTickLabels(),cd(this)}disconnectedCallback(){super.disconnectedCallback(),pW(this),Cwe(this),this.removeDragListeners()}handleKeyDown(e){const i=this.shouldMirror(),{activeProp:r,max:n,min:s,pageStep:o,step:a}=this,l=this[r],{key:c}=e;if(cD(c)){e.preventDefault();return}let d;if(c==="ArrowUp"||c==="ArrowRight"?d=l+a*(i&&c==="ArrowRight"?-1:1):c==="ArrowDown"||c==="ArrowLeft"?d=l-a*(i&&c==="ArrowLeft"?-1:1):c==="PageUp"?o&&(d=l+o):c==="PageDown"?o&&(d=l-o):c==="Home"?d=s:c==="End"&&(d=n),isNaN(d))return;e.preventDefault();const f=Number(d.toFixed(Xse(a)));this.setValue({[r]:this.clamp(f,r)})}pointerDownHandler(e){if(this.disabled||!sR(e))return;const i=e.clientX||e.pageX,r=this.mapToRange(i);let n="value";qo(this.value)&&(r>=this.minValue&&r<=this.maxValue&&this.lastDragProp==="minMaxValue"?n="minMaxValue":n=Math.abs(this.maxValue-r)<Math.abs(this.minValue-r)||r>=this.maxValue?"maxValue":"minValue"),this.lastDragPropValue=this[n],this.dragStart(n),this.el.shadowRoot.querySelector(`.${Ci.thumb}:active`)||this.setValue({[n]:this.clamp(r,n)}),this.focusActiveHandle(i)}handleTouchStart(e){e.preventDefault()}buildThumbType(e){const i=[e];return this.labelHandles&&i.push("labeled"),this.precise&&i.push("precise"),this.hasHistogram&&i.push("histogram"),i.join("-")}setValueFromMinMax(){const{minValue:e,maxValue:i}=this;typeof e=="number"&&typeof i=="number"&&(this.value=[e,i])}setMinMaxFromValue(){const{value:e}=this;qo(e)&&(this.minValue=e[0],this.maxValue=e[1])}onLabelClick(){this.setFocus()}shouldMirror(){return this.mirrored&&!this.hasHistogram}shouldUseMinValue(){return qo(this.value)?this.hasHistogram&&this.maxValue===0||!this.hasHistogram&&this.minValue===0:!1}getTickDensity(){const e=(this.max-this.min)/this.ticks/hut;return e<1?1:e}generateTickValues(){const e=this.ticks??0;if(e<=0)return[];const i=[this.min],r=this.getTickDensity(),n=e*r;let s=this.min;for(;s<this.max;)s+=n,i.push(Math.min(s,this.max));return i.includes(this.max)||i.push(this.max),i}onThumbBlur(){this.activeProp=null}onThumbFocus(e){const i=e.currentTarget;this.activeProp=i.getAttribute("data-value-prop")}onThumbPointerDown(e){const i=e.currentTarget;this.pointerDownDragStart(e,i.getAttribute("data-value-prop"))}onTrackPointerDown(e){this.pointerDownDragStart(e,"minMaxValue")}pointerDownDragStart(e,i){sR(e)&&this.dragStart(i)}dragStart(e){this.dragProp=e,this.lastDragProp=this.dragProp,this.activeProp=e,window.addEventListener("pointermove",this.dragUpdate),window.addEventListener("pointerup",this.pointerUpDragEnd),window.addEventListener("pointercancel",this.dragEnd)}focusActiveHandle(e){this.dragProp==="minValue"?this.minHandle.focus():this.dragProp==="maxValue"||this.dragProp==="value"?this.maxHandle.focus():this.dragProp==="minMaxValue"&&this.getClosestHandle(e).focus()}emitInput(){this.calciteSliderInput.emit()}emitChange(){this.calciteSliderChange.emit(),this.previousEmittedValue=this.value}removeDragListeners(){window.removeEventListener("pointermove",this.dragUpdate),window.removeEventListener("pointerup",this.pointerUpDragEnd),window.removeEventListener("pointercancel",this.dragEnd)}setValue(e){let i;if(Object.keys(e).forEach(n=>{const s=e[n];i||(i=this[n]!==s),this[n]=s}),!i)return;this.dragProp||this.emitChange(),this.emitInput()}storeThumbRef(e){if(!e)return;e.getAttribute("data-value-prop")==="minValue"?this.minHandle=e:this.maxHandle=e}clamp(e,i){return e=u_e(e,this.min,this.max),i==="maxValue"&&(e=Math.max(e,this.minValue)),i==="minValue"&&(e=Math.min(e,this.maxValue)),e}mapToRange(e){const i=this.max-this.min,{left:r,width:n}=this.trackRef.value.getBoundingClientRect()||{left:0,width:0},s=(e-r)/n,o=this.shouldMirror(),a=this.clamp(this.min+i*(o?1-s:s)),l=Number(a.toFixed(Xse(this.step)));return this.snap&&this.step?this.getClosestStep(l):l}getClosestStep(e){const{max:i,min:r,step:n}=this,s=new b$(`${Math.floor((e-r)/n)}`).multiply(`${n}`).add(`${r}`).toString();let o=this.clamp(Number(s));return o>i&&(o-=n),o}getClosestHandle(e){return this.getDistanceX(this.maxHandle,e)>this.getDistanceX(this.minHandle,e)?this.minHandle:this.maxHandle}getDistanceX(e,i){return Math.abs(e.getBoundingClientRect().left-i)}getFontSizeForElement(e){return Number(window.getComputedStyle(e).getPropertyValue("font-size").match(/\d+/)[0])}getUnitInterval(e){e=this.clamp(e);const i=this.max-this.min;return(e-this.min)/i}adjustHostObscuredHandleLabel(e){const i=this.el.shadowRoot.querySelector(`.handle__label--${e}`),r=this.el.shadowRoot.querySelector(`.handle__label--${e}.static`),n=this.el.shadowRoot.querySelector(`.handle__label--${e}.transformed`),s=r.getBoundingClientRect(),o=this.getHostOffset(s.left,s.right);i.style.transform=`translateX(${o}px)`,n.style.transform=`translateX(${o}px)`}hyphenateCollidingRangeHandleLabels(){const{shadowRoot:e}=this.el,i=this.shouldMirror(),r=i?"value":"minValue",n=i?"minValue":"value",s=e.querySelector(`.handle__label--${r}`),o=e.querySelector(`.handle__label--${r}.static`),a=e.querySelector(`.handle__label--${r}.transformed`),l=this.getHostOffset(o.getBoundingClientRect().left,o.getBoundingClientRect().right),c=e.querySelector(`.handle__label--${n}`),d=e.querySelector(`.handle__label--${n}.static`),f=e.querySelector(`.handle__label--${n}.transformed`),y=this.getHostOffset(d.getBoundingClientRect().left,d.getBoundingClientRect().right),g=this.getFontSizeForElement(s),b=this.getRangeLabelOverlap(a,f),_=s,x=g/2;if(b>0){if(_.classList.add(Ci.hyphen,Ci.hyphenWrap),y===0&&l===0){let E=b/2-x;E=Math.sign(E)===-1?Math.abs(E):-E;const C=this.getHostOffset(a.getBoundingClientRect().left+E-x,a.getBoundingClientRect().right+E-x);let k=b/2;const O=this.getHostOffset(f.getBoundingClientRect().left+k,f.getBoundingClientRect().right+k);C!==0&&(E+=C,k+=C),O!==0&&(E+=O,k+=O),s.style.transform=`translateX(${E}px)`,a.style.transform=`translateX(${E-x}px)`,c.style.transform=`translateX(${k}px)`,f.style.transform=`translateX(${k}px)`}else if(l>0||y>0)s.style.transform=`translateX(${l+x}px)`,c.style.transform=`translateX(${b+y}px)`,f.style.transform=`translateX(${b+y}px)`;else if(l<0||y<0){let E=Math.abs(l)+b-x;E=Math.sign(E)===-1?Math.abs(E):-E,s.style.transform=`translateX(${E}px)`,a.style.transform=`translateX(${E-x}px)`}}else _.classList.remove(Ci.hyphen,Ci.hyphenWrap),s.style.transform=`translateX(${l}px)`,a.style.transform=`translateX(${l}px)`,c.style.transform=`translateX(${y}px)`,f.style.transform=`translateX(${y}px)`}hideObscuredBoundingTickLabels(){const e=qo(this.value);if(!this.hasHistogram&&!e&&!this.labelHandles&&!this.precise||!this.hasHistogram&&!e&&this.labelHandles&&!this.precise||!this.hasHistogram&&!e&&!this.labelHandles&&this.precise||!this.hasHistogram&&!e&&this.labelHandles&&this.precise||!this.hasHistogram&&e&&!this.precise||this.hasHistogram&&!this.precise&&!this.labelHandles)return;const i=this.el.shadowRoot.querySelector(`.${Ci.thumbMinValue}`),r=this.el.shadowRoot.querySelector(`.${Ci.thumbValue}`),n=this.el.shadowRoot.querySelector(`.${Ci.tickMin}`),s=this.el.shadowRoot.querySelector(`.${Ci.tickMax}`);!i&&r&&n&&s&&(n.style.opacity=this.isMinTickLabelObscured(n,r)?"0":"1",s.style.opacity=this.isMaxTickLabelObscured(s,r)?"0":"1"),i&&r&&n&&s&&(n.style.opacity=this.isMinTickLabelObscured(n,i)||this.isMinTickLabelObscured(n,r)?"0":"1",s.style.opacity=this.isMaxTickLabelObscured(s,i)||this.isMaxTickLabelObscured(s,r)&&this.hasHistogram?"0":"1")}getHostOffset(e,i){const{left:r,right:n}=this.el.getBoundingClientRect();return e<r?r-e:i>n?-(i-n):0}getRangeLabelOverlap(e,i){const r=e.getBoundingClientRect(),n=i.getBoundingClientRect(),s=this.getFontSizeForElement(e),o=r.right+s-n.left;return Math.max(o,0)}isMinTickLabelObscured(e,i){const r=e.getBoundingClientRect(),n=i.getBoundingClientRect();return Nre(r,n)}isMaxTickLabelObscured(e,i){const r=e.getBoundingClientRect(),n=i.getBoundingClientRect();return Nre(r,n)}internalLabelFormatter(e,i){const r=this.labelFormatter;if(!r)return this.formatValue(e);const n=r(e,i,this.formatValue);return n??this.formatValue(e)}render(){const e=this.el.id||this.guid,i=qo(this.value)?this.maxValue:this.value,r=this.minValue||this.min,n=this.shouldUseMinValue(),s=this.getUnitInterval(n?this.minValue:r)*100,o=this.getUnitInterval(i)*100,a=this.shouldMirror(),l=qo(this.value),c=this.buildThumbType("max"),d=this.renderThumb({type:c,thumbPlacement:c.includes("histogram")?"below":"above",maxInterval:o,minInterval:s,mirror:a}),f=this.buildThumbType("min"),y=l?this.renderThumb({type:f,thumbPlacement:f.includes("histogram")||f.includes("precise")?"below":"above",maxInterval:o,minInterval:s,mirror:a}):null,g=l?"start":this.fillPlacement,b=g==="none"?{left:"unset",right:"unset"}:g==="end"?{left:`${a?s:o}%`,right:`${a?o:s}%`}:{left:`${a?100-o:s}%`,right:`${a?s:100-o}%`};return Hu(this.el,"id",e),ud({disabled:this.disabled,children:Se`${this.labelText&&l_e({labelText:this.labelText,onClick:this.onLabelClick,required:this.required,tooltipText:this.messages.required})||""}<div aria-errormessage=${jV.validationMessage} .ariaInvalid=${this.status==="invalid"} .ariaLabel=${fW(this)} .ariaRequired=${this.required} class=${Te({[Ci.container]:!0,[Ci.containerRange]:l,[Ci.scale(this.scale)]:!0})}>${this.renderGraph()}<div class=${Te(Ci.track)} ${Ri(this.trackRef)}><div class=${Te(Ci.trackRange)} @pointerdown=${this.onTrackPointerDown} style=${GI(b)}></div><div class=${Te(Ci.ticks)}>${this.tickValues.map(_=>{const x=`${this.getUnitInterval(_)*100}%`;let E=!1;if(g==="start"||g==="end")if(n)E=_>=this.minValue&&_<=this.maxValue;else{const C=g==="start"?r:i,k=g==="start"?i:this.max;E=_>=C&&_<=k}return Se`<span class=${Te({[Ci.tick]:!0,[Ci.tickActive]:E})} style=${GI({left:a?"":x,right:a?x:""})}>${this.renderTickLabel(_)}</span>`})}</div></div><div class=${Te(Ci.thumbContainer)}>${y}${d}${Pwe({component:this})}</div></div>${this.validationMessage&&this.status==="invalid"?c_e({icon:this.validationIcon,id:jV.validationMessage,message:this.validationMessage,scale:this.scale,status:this.status}):null}`})}renderThumb({type:e,mirror:i,thumbPlacement:r,minInterval:n,maxInterval:s}){const o=e.includes("labeled"),a=e.includes("precise"),l=e.includes("min"),c=qo(this.value),d=l?this.minValue:c?this.maxValue:this.value,f=l?"minValue":c?"maxValue":"value",y=l?this.minLabel:c?this.maxLabel:this.minLabel,g=l?this.minValue:d,b=f==="minValue"?this.internalLabelFormatter(this.minValue,"min"):f==="maxValue"?this.internalLabelFormatter(this.maxValue,"max"):this.internalLabelFormatter(d,"value"),_=l?{left:`${i?100-n:n}%`}:{right:`${i?s:100-s}%`},x=`${Ci.handleLabel} ${l?Ci.handleLabelMinValue:Ci.handleLabelValue}`,C=[...o?[Se`<span aria-hidden=true class=${Te(x)}>${b}</span>`,Se`<span aria-hidden=true class=${`${x} ${Ci.static}`}>${b}</span>`,Se`<span aria-hidden=true class=${`${x} ${Ci.transformed}`}>${b}</span>`]:[],Se`<div class=${Te(Ci.handle)}></div>`,a&&Se`<div class=${Te(Ci.handleExtension)}></div>`||""];return r==="below"&&C.reverse(),ri(e,Se`<div .ariaLabel=${y} aria-orientation=horizontal .ariaValueMax=${this.max} .ariaValueMin=${this.min} .ariaValueNow=${g} class=${Te({[Ci.thumb]:!0,[Ci.thumbValue]:!l,[Ci.thumbActive]:this.lastDragProp!=="minMaxValue"&&this.dragProp===f,[Ci.thumbPrecise]:a,[Ci.thumbMinValue]:l})} data-value-prop=${f} @blur=${this.onThumbBlur} @focus=${this.onThumbFocus} @pointerdown=${this.onThumbPointerDown} role=slider style=${GI(_)} tabindex=0 ${Ri(this.storeThumbRef)}>${C}</div>`)}renderGraph(){return this.histogram?Se`<calcite-graph class=${Te(Ci.graph)} .colorStops=${this.histogramStops} .data=${this.histogram} .highlightMax=${qo(this.value)?this.maxValue:this.value} .highlightMin=${qo(this.value)?this.minValue:this.min} .max=${this.max} .min=${this.min}></calcite-graph>`:null}renderTickLabel(e){const{hasHistogram:i,labelHandles:r,labelTicks:n,max:s,min:o,precise:a,value:l}=this,c=qo(l),d=e===o,f=e===s,y=d||f;return n&&(!i&&(y||!a||!c)||i&&(y||!a&&!r))?Se`<span class=${Te({[Ci.tickLabel]:!0,[Ci.tickMin]:d,[Ci.tickMax]:f})}>${this.internalLabelFormatter(e,"tick")}</span>`:null}};OC.properties={activeProp:[16,{},{state:!0}],maxValueDragRange:[16,{},{state:!0}],minMaxValueRange:[16,{},{state:!0}],minValueDragRange:[16,{},{state:!0}],tickValues:[16,{},{state:!0}],disabled:[7,{},{reflect:!0,type:Boolean}],fillPlacement:[3,{},{reflect:!0}],form:[3,{},{reflect:!0}],groupSeparator:[7,{},{reflect:!0,type:Boolean}],hasHistogram:[7,{},{reflect:!0,type:Boolean}],histogram:[0,{},{attribute:!1}],histogramStops:[0,{},{attribute:!1}],labelFormatter:[0,{},{attribute:!1}],labelHandles:[7,{},{reflect:!0,type:Boolean}],labelTicks:[7,{},{reflect:!0,type:Boolean}],max:[11,{},{reflect:!0,type:Number}],maxLabel:1,maxValue:[9,{},{type:Number}],min:[11,{},{reflect:!0,type:Number}],minLabel:1,labelText:1,messageOverrides:[0,{},{attribute:!1}],minValue:[9,{},{type:Number}],mirrored:[7,{},{reflect:!0,type:Boolean}],name:[3,{},{reflect:!0}],numberingSystem:1,pageStep:[11,{},{reflect:!0,type:Number}],precise:[7,{},{reflect:!0,type:Boolean}],required:[7,{},{reflect:!0,type:Boolean}],scale:[3,{},{reflect:!0}],snap:[7,{},{reflect:!0,type:Boolean}],status:[3,{},{reflect:!0}],step:[11,{},{reflect:!0,type:Number}],ticks:[11,{},{reflect:!0,type:Number}],validationIcon:[3,{converter:RF},{reflect:!0}],validationMessage:1,validity:[0,{},{attribute:!1}],value:[11,{},{type:Number,reflect:!0}]},OC.shadowRootOptions={mode:"open",delegatesFocus:!0},OC.styles=put;let v7=OC;rr("calcite-slider",v7);function fut(){return ae.jsx(ae.Fragment,{children:ae.jsxs(bp,{heading:"Examples",collapsible:!0,children:["The following examples all represent change in presidential voting patterns from 2004 to 2024 in ",ae.jsx("b",{children:"Utah County, Utah"}),".",ae.jsxs(JN,{label:"Examples",children:[ae.jsx(Qs,{label:"Gradual change",children:ae.jsxs("div",{className:"custom-content",children:[ae.jsx("img",{className:"examples",src:"./change-ut-2004.png",alt:"Gradual change"}),ae.jsxs("span",{children:[ae.jsx("b",{children:"2004"}),". Strong increase in Republican support."]})]})}),ae.jsx(Qs,{label:"Bowtie",children:ae.jsxs("div",{className:"custom-content",children:[ae.jsx("img",{className:"examples",src:"./change-ut-2008.png",alt:"Bowtie"}),ae.jsxs("span",{children:[ae.jsx("b",{children:"2008"}),". Strong increase in Democratic support. Moderate increase for support for third party candidates."]})]})}),ae.jsx(Qs,{label:"No change",children:ae.jsxs("div",{className:"custom-content",children:[ae.jsx("img",{className:"examples",src:"./change-ut-2012.png",alt:"No change"}),ae.jsxs("span",{children:[ae.jsx("b",{children:"2012"}),". Strong increase in Republican support."]})]})}),ae.jsx(Qs,{label:"Inconsistent",children:ae.jsxs("div",{className:"custom-content",children:[ae.jsx("img",{className:"examples",src:"./change-ut-2016.png",alt:"Contested"}),ae.jsxs("span",{children:[ae.jsx("b",{children:"2016"}),". Strong increase in support for third party candidates. Moderate increase in Democratic support. Very strong decrease in Republican support."]})]})}),ae.jsx(Qs,{label:"Inconsistent",children:ae.jsxs("div",{className:"custom-content",children:[ae.jsx("img",{className:"examples",src:"./change-ut-2020.png",alt:"Contested"}),ae.jsxs("span",{children:[ae.jsx("b",{children:"2020"}),". Strong increase in support for both Republicans and Democrats."]})]})}),ae.jsx(Qs,{label:"Inconsistent",children:ae.jsxs("div",{className:"custom-content",children:[ae.jsx("img",{className:"examples",src:"./change-ut-2024.png",alt:"Contested"}),ae.jsxs("span",{children:[ae.jsx("b",{children:"2024"}),". Marginal increase in support for both Republicans and Democrats."]})]})})]})]})})}function mut(){return ae.jsx(ae.Fragment,{children:ae.jsx(bp,{heading:"Examples",collapsible:!0,children:ae.jsxs(JN,{label:"Examples",children:[ae.jsx(Qs,{label:"Slight Democratic swing",children:ae.jsxs("div",{className:"custom-content",children:[ae.jsx("img",{className:"examples",src:"./swing-slight-dem.png",alt:"Slight Democratic swing",style:{width:"400px"}}),ae.jsxs("span",{children:[ae.jsx("b",{children:"Slight Democratic swing"}),". In 2020, many counties in Michigan shifted slightly toward the Democratic candidate compared to 2016. The aggregation of these small shifts resulted in flipping the state from Republican to Democratic in 2020."]})]})}),ae.jsx(Qs,{label:"Dramatic Republican swing",children:ae.jsxs("div",{className:"custom-content",children:[ae.jsx("img",{className:"examples",src:"./swing-strong-r.png",alt:"Dramatic Republican swing",style:{width:"400px"}}),ae.jsxs("span",{children:[ae.jsx("b",{children:"Dramatic Republican swing"}),". Many rural counties in the midwest tend to have dramatic swings toward Republican support when an incumbent Democratic president (who performed well in those same counties) is running for re-election."]})]})}),ae.jsx(Qs,{label:"Dramatic third party swing",children:ae.jsxs("div",{className:"custom-content",children:[ae.jsx("img",{className:"examples",src:"./swing-strong-other.png",alt:"Dramatic third party swing",style:{width:"400px"}}),ae.jsxs("span",{children:[ae.jsx("b",{children:"Dramatic third party swing"}),". In rare cases, third party candidates have performed very well in certain areas, resulting in lackluster support for one or both major parties. In 2016, many rural counties in the west dramatically favored third party candidates over Democrats."]})]})}),ae.jsx(Qs,{label:"Dramatic swings both directions",children:ae.jsxs("div",{className:"custom-content",children:[ae.jsx("img",{className:"examples",src:"./swing-both.png",alt:"Dramatic swings both directions",style:{width:"400px"}}),ae.jsxs("span",{children:[ae.jsx("b",{children:"Dramatic swings both directions"}),". For the most part, counties tend to support the same party from one election to the next. In elections that come after an election with a strong third party candidate, or weak voter turnout, rural counties can show dramatic swings of support back to their traditional alliances."]})]})})]})})})}function yut(){return ae.jsx(ae.Fragment,{children:ae.jsxs(bp,{heading:"Legend",collapsible:!0,expanded:!0,children:[ae.jsx("p",{children:"This map shows the swing in support from the selected election compared to the previous. The magnitude of the swing is represented by the degree and orientation of the arrow."}),ae.jsx("div",{className:"legendElement",children:ae.jsx("img",{src:"./legend-swing.png",className:"legend",alt:"Legend",style:{width:"300px"}})}),ae.jsxs("div",{className:"legendElement",children:[ae.jsx("b",{style:{fontSize:"12pt"},children:"Swing states"}),ae.jsx("img",{src:"./change-states.png",className:"legend",alt:"Legend",style:{width:"200px"}})]}),ae.jsx("p",{children:"The size of each arrow corresponds to the change in votes in favor of the party with the most change."}),ae.jsx("div",{className:"legendElement",children:ae.jsx("img",{src:"./legend-swing-arrow.png",className:"legend",alt:"Legend",style:{width:"180px"}})})]})})}function gut(){return ae.jsx(ae.Fragment,{children:ae.jsxs(bp,{heading:"Legend",collapsible:!0,expanded:!0,children:[ae.jsx("p",{children:"This map shows the winner of the election. The shade of the state indicates the party awarded electoral votes in the given election. The arrows represent how far right or left the state leaned in that election in terms of the proportion of votes received by the winning party."}),ae.jsxs("div",{className:"legendElement",children:[ae.jsx("b",{children:"Lean"}),ae.jsx("img",{src:"./legend-lean.png",className:"legend",alt:"Legend",style:{width:"300px"}})]}),ae.jsx("p",{children:"The size of each arrow corresponds to the margin of victory for the winning party."}),ae.jsxs("div",{className:"legendElement",children:[ae.jsx("b",{children:"Margin of victory"}),ae.jsx("img",{src:"./legend-swing-arrow.png",className:"legend",alt:"Legend",style:{width:"180px"}})]})]})})}function vut(){return ae.jsx(ae.Fragment,{children:ae.jsx(bp,{heading:"Examples",collapsible:!0,children:ae.jsxs(JN,{label:"Examples",children:[ae.jsx(Qs,{label:"Slight Democratic swing",children:ae.jsxs("div",{className:"custom-content",children:[ae.jsx("img",{className:"examples",src:"./swing-slight-dem.png",alt:"Slight Democratic swing",style:{width:"400px"}}),ae.jsxs("span",{children:[ae.jsx("b",{children:"Slight lean"}),". In 2020, many counties in Michigan shifted slightly toward the Democratic candidate compared to 2016. The aggregation of these small shifts resulted in flipping the state from Republican to Democratic in 2020."]})]})}),ae.jsx(Qs,{label:"Dramatic Republican swing",children:ae.jsxs("div",{className:"custom-content",children:[ae.jsx("img",{className:"examples",src:"./swing-strong-r.png",alt:"Dramatic Republican swing",style:{width:"400px"}}),ae.jsxs("span",{children:[ae.jsx("b",{children:"Dramatic Republican swing"}),". Many rural counties in the midwest tend to have dramatic swings toward Republican support when an incumbent Democratic president (who performed well in those same counties) is running for re-election."]})]})}),ae.jsx(Qs,{label:"Dramatic Republican swing",children:ae.jsxs("div",{className:"custom-content",children:[ae.jsx("img",{className:"examples",src:"./swing-strong-r.png",alt:"Dramatic Republican swing",style:{width:"400px"}}),ae.jsxs("span",{children:[ae.jsx("b",{children:"Dramatic Republican swing"}),". Many rural counties in the midwest tend to have dramatic swings toward Republican support when an incumbent Democratic president (who performed well in those same counties) is running for re-election."]})]})})]})})})}function but(){return ae.jsx(ae.Fragment,{children:ae.jsxs(bp,{heading:"Legend",collapsible:!0,expanded:!0,children:[ae.jsx("p",{children:"This map shows the winner of the election on the state and county level."}),ae.jsx("div",{className:"legendElement",children:ae.jsx("img",{src:"./legend-winner.png",className:"legend",alt:"Legend"})})]})})}const Up=2004,xa=2024;function wut(t){const{onYearInput:e,rendererType:i}=t,[r,n]=Uf.useState(xa),[s,o]=Uf.useState(Up),[a,l]=Uf.useState(xa);Uf.useEffect(()=>{e(r),i==="winner"||i==="winner-lean"||i==="swing"||i==="change"?(o(Up),l(xa),r<Up?(n(Up),e(Up)):r>xa&&(n(xa),e(xa))):i==="trend"&&(o(2016),l(xa),r<2016?(n(2016),e(2016)):r>xa&&(n(xa),e(xa)))},[i,r,e,n]);let c;switch(i){case"winner":c=ae.jsxs(ae.Fragment,{children:[ae.jsx(F1,{layout:"inline",children:"Select an election year"}),ae.jsx("div",{className:"slider-container",children:ae.jsx(dE,{min:s,max:a,labelHandles:!0,labelTicks:!0,maxLabel:a.toString(),minLabel:s.toString(),ticks:4,step:4,value:r,onCalciteSliderInput:d=>{const f=d.target.value;n(f)},snap:!0})}),ae.jsx(but,{})]});break;case"winner-lean":c=ae.jsxs(ae.Fragment,{children:[ae.jsx(F1,{layout:"inline",children:"Select an election year"}),ae.jsx("div",{className:"slider-container",children:ae.jsx(dE,{min:s,max:a,labelHandles:!0,labelTicks:!0,maxLabel:a.toString(),minLabel:s.toString(),ticks:4,step:4,value:r,onCalciteSliderInput:d=>{const f=d.target.value;n(f)},snap:!0})}),ae.jsx(gut,{}),ae.jsx(vut,{})]});break;case"swing":c=ae.jsxs(ae.Fragment,{children:[ae.jsx(F1,{layout:"inline",children:"Select an election year"}),ae.jsx("div",{className:"slider-container",children:ae.jsx(dE,{min:s,max:a,labelHandles:!0,labelTicks:!0,maxLabel:a.toString(),minLabel:s.toString(),ticks:4,step:4,value:r,onCalciteSliderInput:d=>{const f=d.target.value;n(f)},snap:!0})}),ae.jsx(yut,{}),ae.jsx(mut,{})]});break;case"trend":c=ae.jsxs(ae.Fragment,{children:[ae.jsx(F1,{layout:"inline",children:"Select an election year"}),ae.jsx("div",{className:"slider-container",children:ae.jsx(dE,{min:s,max:a,labelHandles:!0,labelTicks:!0,maxLabel:a.toString(),minLabel:s.toString(),ticks:4,step:4,value:r,onCalciteSliderInput:d=>{const f=d.target.value;n(f)},snap:!0})}),ae.jsx(Cct,{}),ae.jsx(Bct,{})]});break;case"change":c=ae.jsxs(ae.Fragment,{children:[ae.jsx(F1,{layout:"inline",children:"Select an election year"}),ae.jsx("div",{className:"slider-container",children:ae.jsx(dE,{min:s,max:a,labelHandles:!0,labelTicks:!0,maxLabel:a.toString(),minLabel:s.toString(),ticks:4,step:4,value:r,onCalciteSliderInput:d=>{const f=d.target.value;n(f)},snap:!0})}),ae.jsx(Gct,{}),ae.jsx(fut,{})]});break;default:c=ae.jsx(ae.Fragment,{children:ae.jsx(VWe,{})});break}return ae.jsx(ae.Fragment,{children:c})}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const UV={container:"container",content:"content",scale:t=>`scale-${t}`},_ut={tabTitleId:t=>`calcite-tab-title-${t}`},xut=Mi`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{display:none}:host,.container,.content{block-size:100%;inline-size:100%}:host([selected]),:host([selected]) .container{display:flex;flex-direction:column}.content{box-sizing:border-box;padding-block:var(--calcite-tab-content-space-y, var(--calcite-tab-content-block-padding, var(--calcite-internal-tab-content-space-y)))}.scale-s{--calcite-internal-tab-content-space-y: .25rem;font-size:var(--calcite-font-size-sm);line-height:1rem}.scale-m{--calcite-internal-tab-content-space-y: .5rem;font-size:var(--calcite-font-size);line-height:1rem}.scale-l{--calcite-internal-tab-content-space-y: .625rem;font-size:var(--calcite-font-size-md);line-height:1.25rem}.container{display:none;block-size:100%;inline-size:100%;overflow:auto;outline-color:transparent}.container:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}:host([hidden]){display:none}[hidden]{display:none}`,$F=class $F extends ir{constructor(){super(),this.guid=_ut.tabTitleId(ld()),this.scale="m",this.selected=!1,this.listenOn(document.body,"calciteInternalTabChange",this.internalTabChangeHandler)}async getTabIndex(){return Array.prototype.indexOf.call($0e(this.el.parentElement.children).filter(e=>e.matches("calcite-tab")),this.el)}_updateAriaInfo(e=[],i=[]){this.labeledBy=i[e.indexOf(this.el.id)]||null}connectedCallback(){super.connectedCallback(),this.parentTabsEl=this.el.closest("calcite-tabs")}disconnectedCallback(){var e;super.disconnectedCallback(),(e=document.body)==null||e.dispatchEvent(new CustomEvent("calciteTabUnregister",{detail:this.el}))}internalTabChangeHandler(e){e.composedPath().find(r=>r.tagName==="CALCITE-TABS")===this.parentTabsEl&&(this.tab?this.selected=this.tab===e.detail.tab:this.getTabIndex().then(r=>{this.selected=r===e.detail.tab}),e.stopPropagation())}render(){const e=this.el.id||this.guid;return Hu(this.el,"aria-labelledby",this.labeledBy),Hu(this.el,"id",e),Se`<div class=${Te({[UV.container]:!0,[UV.scale(this.scale)]:!0})} role=tabpanel .tabIndex=${this.selected?0:-1}><section class=${Te(UV.content)}><slot></slot></section></div>`}};$F.properties={labeledBy:[16,{},{state:!0}],scale:1,selected:[7,{},{reflect:!0,type:Boolean}],tab:[3,{},{reflect:!0}]},$F.styles=xut;let b7=$F;rr("calcite-tab",b7);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const ul={buttonLoader:"calcite-button--loader",content:"content",contentSlotted:"content--slotted",icon:"icon",iconStart:"icon--start",iconEnd:"icon--end",loadingIn:"loading-in",loadingOut:"loading-out",iconStartEmpty:"icon-start-empty",iconEndEmpty:"icon-end-empty",buttonPadding:"button-padding",buttonPaddingShrunk:"button-padding--shrunk"},Sut=Mi`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:inline-block;inline-size:auto;vertical-align:middle;border-radius:var(--calcite-button-corner-radius, var(--calcite-internal-button-corner-radius, 0))}:host a,:host button{--calcite-internal-button-content-margin: .5rem;--calcite-internal-button-padding-x: 7px;--calcite-internal-button-padding-y: 3px;position:relative;box-sizing:border-box;display:flex;block-size:100%;inline-size:100%;cursor:pointer;-webkit-user-select:none;user-select:none;appearance:none;align-items:center;justify-content:center;border-style:none;text-align:center;font-family:inherit;font-weight:var(--calcite-font-weight-normal);text-decoration-line:none;outline-color:transparent;box-shadow:var(--calcite-button-shadow, var(--calcite-shadow-none));background-color:var(--calcite-button-background-color, var(--calcite-internal-button-background-color, var(--calcite-color-transparent)));border-block-start-color:var(--calcite-button-border-color, var(--calcite-internal-button-border-block-start-color, var(--calcite-internal-button-border-color, var(--calcite-color-transparent))));border-block-end-color:var(--calcite-button-border-color, var(--calcite-internal-button-border-block-end-color, var(--calcite-internal-button-border-color, var(--calcite-color-transparent))));border-inline-start-color:var(--calcite-button-border-color, var(--calcite-internal-button-border-inline-start-color, var(--calcite-internal-button-border-color, var(--calcite-color-transparent))));border-inline-end-color:var(--calcite-button-border-color, var(--calcite-internal-button-border-inline-end-color, var(--calcite-internal-button-border-color, var(--calcite-color-transparent))));border-style:solid;border-width:var(--calcite-border-width-sm);border-radius:var(--calcite-button-corner-radius, var(--calcite-internal-button-corner-radius, 0));color:var(--calcite-button-text-color, var(--calcite-internal-button-text-color, currentColor));padding-block:var(--calcite-internal-button-padding-y);padding-inline:var(--calcite-internal-button-padding-x);transition:color var(--calcite-animation-timing) ease-in-out,background-color var(--calcite-animation-timing) ease-in-out,box-shadow var(--calcite-animation-timing) ease-in-out,outline-color var(--calcite-internal-animation-timing-fast) ease-in-out}:host a:hover,:host button:hover{text-decoration-line:none}:host a:focus,:host button:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(var(--calcite-spacing-base) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}:host a span,:host button span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:host a calcite-loader,:host button calcite-loader{color:var(--calcite-button-loader-color, var(--calcite-internal-button-loader-color, var(--calcite-button-text-color, var(--calcite-internal-button-text-color))))}:host([round]){--calcite-internal-button-corner-radius: 50px}.content{margin-inline:var(--calcite-internal-button-content-margin)}.icon-start-empty .content{margin-inline-start:unset}.icon-end-empty .content{margin-inline-end:unset}:host([scale=m]) button,:host([scale=m]) a{--calcite-internal-button-content-margin: .75rem}:host([scale=l]) button,:host([scale=l]) a{--calcite-internal-button-content-margin: 1rem}:host([width=auto]){inline-size:auto}:host([width=half]){inline-size:50%}:host([width=full]){inline-size:100%}:host([alignment=center]:not([width=auto])) a,:host([alignment=center]:not([width=auto])) button{justify-content:center}:host([alignment=start]:not([width=auto])) a,:host([alignment=start]:not([width=auto])) button{justify-content:flex-start}:host([alignment=end]:not([width=auto])) a,:host([alignment=end]:not([width=auto])) button{justify-content:flex-end}:host([alignment*=space-between]:not([width=auto])) a,:host([alignment*=space-between]:not([width=auto])) button{justify-content:space-between}:host([alignment=icon-start-space-between]:not([width=auto])) .icon--start{margin-inline-end:auto}:host([alignment=icon-start-space-between]:not([width=auto])) a,:host([alignment=icon-start-space-between]:not([width=auto])) button{text-align:unset}:host([alignment=icon-end-space-between]:not([width=auto])) .icon--end{margin-inline-start:auto}:host([alignment=icon-end-space-between]:not([width=auto])) a,:host([alignment=icon-end-space-between]:not([width=auto])) button{text-align:unset}:host([alignment=center]) a:not(.content--slotted) .icon--start+.icon--end,:host([alignment=center]) button:not(.content--slotted) .icon--start+.icon--end{margin-inline-start:var(--calcite-internal-button-content-margin)}.icon--start,.icon--end{color:var(--calcite-button-icon-color, var(--calcite-icon-color, var(--calcite-ui-icon-color)))}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}@keyframes loader-in{0%{inline-size:0;opacity:0;transform:scale(.5)}to{inline-size:1em;opacity:1;transform:scale(1)}}@keyframes loader-out{0%{inline-size:1em;opacity:1;transform:scale(1)}to{inline-size:0;opacity:0;transform:scale(.5)}}.calcite-button--loader{display:flex}.calcite-button--loader calcite-loader{margin:0}:host([loading]) button.content--slotted .calcite-button--loader calcite-loader,:host([loading]) a.content--slotted .calcite-button--loader calcite-loader{margin-inline-end:var(--calcite-internal-button-content-margin)}:host([loading]) button:not(.content--slotted) .icon--start,:host([loading]) button:not(.content--slotted) .icon--end,:host([loading]) a:not(.content--slotted) .icon--start,:host([loading]) a:not(.content--slotted) .icon--end{display:none}:host([appearance]) button,:host([appearance]) a{--calcite-internal-button-border-color: var(--calcite-color-transparent);border-style:solid;border-width:var(--calcite-button-border-size, 1px)}:host([kind=brand]) button,:host([kind=brand]) a{--calcite-internal-button-text-color: var(--calcite-color-text-inverse);--calcite-internal-button-background-color: var(--calcite-color-brand);--calcite-internal-button-loader-color: var(--calcite-color-text-inverse)}:host([kind=brand]) button:hover,:host([kind=brand]) a:hover{--calcite-internal-button-background-color: var(--calcite-color-brand-hover)}:host([kind=brand]) button:active,:host([kind=brand]) a:active{--calcite-internal-button-background-color: var(--calcite-color-brand-press)}:host([kind=danger]) button,:host([kind=danger]) a{--calcite-internal-button-text-color: var(--calcite-color-text-inverse);--calcite-internal-button-background-color: var(--calcite-color-status-danger);--calcite-internal-button-loader-color: var(--calcite-color-text-inverse)}:host([kind=danger]) button:hover,:host([kind=danger]) a:hover{--calcite-internal-button-background-color: var(--calcite-color-status-danger-hover)}:host([kind=danger]) button:active,:host([kind=danger]) a:active{--calcite-internal-button-background-color: var(--calcite-color-status-danger-press)}:host([kind=neutral]) button,:host([kind=neutral]) a{--calcite-internal-button-text-color: var(--calcite-color-text-1);--calcite-internal-button-background-color: var(--calcite-color-foreground-3);--calcite-internal-button-loader-color: var(--calcite-color-text-1)}:host([kind=neutral]) button:hover,:host([kind=neutral]) a:hover{--calcite-internal-button-background-color: var(--calcite-color-foreground-2)}:host([kind=neutral]) button:active,:host([kind=neutral]) a:active{--calcite-internal-button-background-color: var(--calcite-color-foreground-1)}:host([kind=inverse]) button,:host([kind=inverse]) a{--calcite-internal-button-text-color: var(--calcite-color-text-inverse);--calcite-internal-button-background-color: var(--calcite-color-inverse);--calcite-internal-button-loader-color: var(--calcite-color-text-inverse)}:host([kind=inverse]) button:hover,:host([kind=inverse]) a:hover{--calcite-internal-button-background-color: var(--calcite-color-inverse-hover)}:host([kind=inverse]) button:active,:host([kind=inverse]) a:active{--calcite-internal-button-background-color: var(--calcite-color-inverse-press)}:host([appearance=outline-fill]) button,:host([appearance=outline-fill]) a{--calcite-internal-button-background-color: var(--calcite-color-foreground-1);border-style:solid;border-width:var(--calcite-button-border-size, 1px)}:host([appearance=outline-fill]) button:hover,:host([appearance=outline-fill]) a:hover{--calcite-internal-button-background-color: var(--calcite-color-foreground-2)}:host([appearance=outline-fill]) button:active,:host([appearance=outline-fill]) a:active{--calcite-internal-button-background-color: var(--calcite-color-foreground-3)}:host([appearance=outline-fill][kind=brand]) button,:host([appearance=outline-fill][kind=brand]) a{--calcite-internal-button-border-color: var(--calcite-color-brand);--calcite-internal-button-text-color: var(--calcite-color-brand);--calcite-internal-button-loader-color: var(--calcite-color-brand)}:host([appearance=outline-fill][kind=brand]) button:hover,:host([appearance=outline-fill][kind=brand]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-brand-hover);--calcite-internal-button-text-color: var(--calcite-color-brand-hover)}:host([appearance=outline-fill][kind=brand]) button:focus,:host([appearance=outline-fill][kind=brand]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-brand);--calcite-internal-button-text-color: var(--calcite-color-brand)}:host([appearance=outline-fill][kind=brand]) button:active,:host([appearance=outline-fill][kind=brand]) a:active{--calcite-internal-button-border-color: var(--calcite-color-brand-press);--calcite-internal-button-text-color: var(--calcite-color-brand-press)}:host([appearance=outline-fill][kind=brand]) button calcite-loader,:host([appearance=outline-fill][kind=brand]) a calcite-loader{--calcite-internal-button-loader-color: var(--calcite-color-brand)}:host([appearance=outline-fill][kind=danger]) button,:host([appearance=outline-fill][kind=danger]) a{--calcite-internal-button-border-color: var(--calcite-color-status-danger);--calcite-internal-button-text-color: var(--calcite-color-status-danger);--calcite-internal-button-loader-color: var(--calcite-color-status-danger)}:host([appearance=outline-fill][kind=danger]) button:hover,:host([appearance=outline-fill][kind=danger]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-status-danger-hover);--calcite-internal-button-text-color: var(--calcite-color-status-danger-hover)}:host([appearance=outline-fill][kind=danger]) button:focus,:host([appearance=outline-fill][kind=danger]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-status-danger);--calcite-internal-button-text-color: var(--calcite-color-status-danger)}:host([appearance=outline-fill][kind=danger]) button:active,:host([appearance=outline-fill][kind=danger]) a:active{--calcite-internal-button-border-color: var(--calcite-color-status-danger-press);--calcite-internal-button-text-color: var(--calcite-color-status-danger-press)}:host([appearance=outline-fill][kind=danger]) button calcite-loader,:host([appearance=outline-fill][kind=danger]) a calcite-loader{--calcite-internal-button-loader-color: var(--calcite-color-status-danger)}:host([appearance=outline-fill][kind=neutral]) button,:host([appearance=outline-fill][kind=neutral]) a{--calcite-internal-button-border-color: var(--calcite-color-border-1);--calcite-internal-button-text-color: var(--calcite-color-text-1);--calcite-internal-button-loader-color: var(--calcite-color-text-1)}:host([appearance=outline-fill][kind=neutral]) button:hover,:host([appearance=outline-fill][kind=neutral]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-border-input)}:host([appearance=outline-fill][kind=neutral]) button:focus,:host([appearance=outline-fill][kind=neutral]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-foreground-3)}:host([appearance=outline-fill][kind=neutral]) button:active,:host([appearance=outline-fill][kind=neutral]) a:active{--calcite-internal-button-border-color: var(--calcite-color-text-3)}:host([appearance=solid][kind=neutral]) button:hover,:host([appearance=solid][kind=neutral]) a:hover{--calcite-internal-button-background-color: var(--calcite-color-border-3)}:host([appearance=solid][kind=neutral]) button:active,:host([appearance=solid][kind=neutral]) a:active{--calcite-internal-button-background-color: var(--calcite-color-border-2)}:host([appearance=outline-fill][kind=inverse]) button,:host([appearance=outline-fill][kind=inverse]) a{--calcite-internal-button-text-color: var(--calcite-color-text-1);--calcite-internal-button-border-color: var(--calcite-color-inverse);--calcite-internal-button-loader-color: var(--calcite-color-text-1)}:host([appearance=outline-fill][kind=inverse]) button:hover,:host([appearance=outline-fill][kind=inverse]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-inverse-hover)}:host([appearance=outline-fill][kind=inverse]) button:focus,:host([appearance=outline-fill][kind=inverse]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-inverse)}:host([appearance=outline-fill][kind=inverse]) button:active,:host([appearance=outline-fill][kind=inverse]) a:active{--calcite-internal-button-border-color: var(--calcite-color-inverse-press)}:host([appearance=outline]) button,:host([appearance=outline]) a{--calcite-internal-button-background-color: var(--calcite-color-transparent);border-style:solid;border-width:var(--calcite-button-border-size, 1px)}:host([appearance=outline]) button:hover,:host([appearance=outline]) a:hover{--calcite-internal-button-background-color: var(--calcite-color-transparent-hover)}:host([appearance=outline]) button:active,:host([appearance=outline]) a:active{--calcite-internal-button-background-color: var(--calcite-color-transparent-press)}:host([appearance=outline][kind=brand]) button,:host([appearance=outline][kind=brand]) a{--calcite-internal-button-border-color: var(--calcite-color-brand);--calcite-internal-button-text-color: var(--calcite-color-brand);--calcite-internal-button-loader-color: var(--calcite-color-brand)}:host([appearance=outline][kind=brand]) button:hover,:host([appearance=outline][kind=brand]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-brand-hover);--calcite-internal-button-text-color: var(--calcite-color-brand-hover)}:host([appearance=outline][kind=brand]) button:focus,:host([appearance=outline][kind=brand]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-brand);--calcite-internal-button-text-color: var(--calcite-color-brand)}:host([appearance=outline][kind=brand]) button:active,:host([appearance=outline][kind=brand]) a:active{--calcite-internal-button-border-color: var(--calcite-color-brand-press);--calcite-internal-button-text-color: var(--calcite-color-brand-press)}:host([appearance=outline][kind=brand]) button calcite-loader,:host([appearance=outline][kind=brand]) a calcite-loader{--calcite-internal-button-loader-color: var(--calcite-color-brand)}:host([appearance=outline][kind=danger]) button,:host([appearance=outline][kind=danger]) a{--calcite-internal-button-border-color: var(--calcite-color-status-danger);--calcite-internal-button-text-color: var(--calcite-color-status-danger);--calcite-internal-button-loader-color: var(--calcite-color-status-danger)}:host([appearance=outline][kind=danger]) button:hover,:host([appearance=outline][kind=danger]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-status-danger-hover);--calcite-internal-button-text-color: var(--calcite-color-status-danger-hover)}:host([appearance=outline][kind=danger]) button:focus,:host([appearance=outline][kind=danger]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-status-danger);--calcite-internal-button-text-color: var(--calcite-color-status-danger)}:host([appearance=outline][kind=danger]) button:active,:host([appearance=outline][kind=danger]) a:active{--calcite-internal-button-border-color: var(--calcite-color-status-danger-press);--calcite-internal-button-text-color: var(--calcite-color-status-danger-press)}:host([appearance=outline][kind=danger]) button calcite-loader,:host([appearance=outline][kind=danger]) a calcite-loader{--calcite-internal-button-loader-color: var(--calcite-color-status-danger)}:host([appearance=outline][kind=neutral]) button,:host([appearance=outline][kind=neutral]) a{--calcite-internal-button-text-color: var(--calcite-color-text-1);--calcite-internal-button-border-color: var(--calcite-color-border-1);--calcite-internal-button-loader-color: var(--calcite-color-text-1)}:host([appearance=outline][kind=neutral]) button:hover,:host([appearance=outline][kind=neutral]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-border-input)}:host([appearance=outline][kind=neutral]) button:focus,:host([appearance=outline][kind=neutral]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-foreground-3)}:host([appearance=outline][kind=neutral]) button:active,:host([appearance=outline][kind=neutral]) a:active{--calcite-internal-button-border-color: var(--calcite-color-text-3)}:host([appearance=outline][kind=inverse]) button,:host([appearance=outline][kind=inverse]) a{--calcite-internal-button-text-color: var(--calcite-color-text-1);--calcite-internal-button-border-color: var(--calcite-color-inverse);--calcite-internal-button-loader-color: var(--calcite-color-text-1)}:host([appearance=outline][kind=inverse]) button:hover,:host([appearance=outline][kind=inverse]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-inverse-hover)}:host([appearance=outline][kind=inverse]) button:focus,:host([appearance=outline][kind=inverse]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-inverse)}:host([appearance=outline][kind=inverse]) button:active,:host([appearance=outline][kind=inverse]) a:active{--calcite-internal-button-border-color: var(--calcite-color-inverse-press)}:host([appearance=outline-fill][split-child=primary]) button,:host([appearance=outline][split-child=primary]) button,:host([appearance=outline-fill][split-child=primary]) a,:host([appearance=outline][split-child=primary]) a{border-inline-end-width:0;border-inline-start-width:1px}:host([appearance=outline-fill][split-child=secondary]) button,:host([appearance=outline][split-child=secondary]) button,:host([appearance=outline-fill][split-child=secondary]) a,:host([appearance=outline][split-child=secondary]) a{border-inline-start-width:0;border-inline-end-width:1px}:host([appearance=transparent]) button,:host([appearance=transparent]) a{--calcite-internal-button-background-color: var(--calcite-color-transparent)}:host([appearance=transparent]) button:hover,:host([appearance=transparent]) button:focus,:host([appearance=transparent]) a:hover,:host([appearance=transparent]) a:focus{--calcite-internal-button-background-color: var(--calcite-color-transparent-hover)}:host([appearance=transparent]) button:active,:host([appearance=transparent]) a:active{--calcite-internal-button-background-color: var(--calcite-color-transparent-press)}:host([appearance=transparent]:not(.enable-editing-button)) button,:host([appearance=transparent]:not(.enable-editing-button)) a{background-color:var(--calcite-color-transparent)}:host([appearance=transparent]:not(.enable-editing-button)) button:hover,:host([appearance=transparent]:not(.enable-editing-button)) a:hover{background-color:var(--calcite-color-transparent-hover)}:host([appearance=transparent]:not(.enable-editing-button)) button:active,:host([appearance=transparent]:not(.enable-editing-button)) a:active{background-color:var(--calcite-color-transparent-press)}:host([appearance=transparent][kind=brand]) button,:host([appearance=transparent][kind=brand]) a{--calcite-internal-button-text-color: var(--calcite-color-brand);--calcite-internal-button-loader-color: var(--calcite-color-brand)}:host([appearance=transparent][kind=brand]) button:hover,:host([appearance=transparent][kind=brand]) a:hover{--calcite-internal-button-text-color: var(--calcite-color-brand-hover)}:host([appearance=transparent][kind=brand]) button:focus,:host([appearance=transparent][kind=brand]) a:focus{--calcite-internal-button-text-color: var(--calcite-color-brand)}:host([appearance=transparent][kind=brand]) button:active,:host([appearance=transparent][kind=brand]) a:active{--calcite-internal-button-text-color: var(--calcite-color-brand-press)}:host([appearance=transparent][kind=brand]) button calcite-loader,:host([appearance=transparent][kind=brand]) a calcite-loader{--calcite-internal-button-loader-color: var(--calcite-color-brand)}:host([appearance=transparent][kind=danger]) button,:host([appearance=transparent][kind=danger]) a{--calcite-internal-button-text-color: var(--calcite-color-status-danger);--calcite-internal-button-loader-color: var(--calcite-color-status-danger)}:host([appearance=transparent][kind=danger]) button:hover,:host([appearance=transparent][kind=danger]) a:hover{--calcite-internal-button-text-color: var(--calcite-color-status-danger-hover)}:host([appearance=transparent][kind=danger]) button:focus,:host([appearance=transparent][kind=danger]) a:focus{--calcite-internal-button-text-color: var(--calcite-color-status-danger)}:host([appearance=transparent][kind=danger]) button:active,:host([appearance=transparent][kind=danger]) a:active{--calcite-internal-button-text-color: var(--calcite-color-status-danger-press)}:host([appearance=transparent][kind=danger]) button calcite-loader,:host([appearance=transparent][kind=danger]) a calcite-loader{--calcite-internal-button-loader-color: var(--calcite-color-status-danger)}:host([appearance=transparent][kind=neutral]:not(.cancel-editing-button)) button,:host([appearance=transparent][kind=neutral]:not(.cancel-editing-button)) a,:host([appearance=transparent][kind=neutral]:not(.cancel-editing-button)) calcite-loader{--calcite-internal-button-text-color: var(--calcite-color-text-1)}:host([appearance=transparent][kind=neutral].cancel-editing-button) button{--calcite-internal-button-text-color: var(--calcite-color-text-3)}:host([appearance=transparent][kind=neutral].cancel-editing-button) button:hover{--calcite-internal-button-text-color: var(--calcite-color-text-1);--calcite-internal-button-padding-y: 0}:host(.confirm-changes-button) button:focus,:host(.cancel-editing-button) button:focus,:host(.enable-editing-button) button:focus{outline-offset:-2px}:host([appearance=transparent][kind=inverse]) button:hover,:host([appearance=transparent][kind=inverse]) a:hover{background-color:var(--calcite-color-transparent-inverse-hover)}:host([appearance=transparent][kind=inverse]) button:active,:host([appearance=transparent][kind=inverse]) a:active{background-color:var(--calcite-color-transparent-inverse-press)}:host([appearance=transparent][kind=inverse]) button calcite-loader,:host([appearance=transparent][kind=inverse]) a calcite-loader{--calcite-internal-button-text-color: var(--calcite-color-text-inverse)}:host([scale=s]) button.content--slotted,:host([scale=s]) a.content--slotted{font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=s][appearance=transparent]) button.content--slotted,:host([scale=s][appearance=transparent]) a.content--slotted{--calcite-internal-button-padding-x: .5rem}:host([scale=s]) button,:host([scale=s]) a{--calcite-internal-button-padding-y: 3px}:host([scale=m]) button.content--slotted,:host([scale=m]) a.content--slotted{--calcite-internal-button-padding-x: 11px;font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=m]) button,:host([scale=m]) a{--calcite-internal-button-padding-y: 7px}:host([scale=m][appearance=transparent]) button.content--slotted,:host([scale=m][appearance=transparent]) a.content--slotted{--calcite-internal-button-padding-x: .75rem}:host([scale=l]) button.content--slotted,:host([scale=l]) a.content--slotted{--calcite-internal-button-padding-x: 15px;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l]) .button-padding{--calcite-internal-button-padding-x: 1rem;--calcite-internal-button-padding-y: 11px}:host([scale=l]) .button-padding--shrunk{--calcite-internal-button-padding-y: 9px}:host([scale=s]) button:not(.content--slotted),:host([scale=s]) a:not(.content--slotted){--calcite-internal-button-padding-x: .125rem;--calcite-internal-button-padding-y: 3px;inline-size:1.5rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;min-block-size:1.5rem}:host([scale=m]) button:not(.content--slotted),:host([scale=m]) a:not(.content--slotted){--calcite-internal-button-padding-x: .125rem;--calcite-internal-button-padding-y: 7px;inline-size:2rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;min-block-size:2rem}:host([scale=l]) button:not(.content--slotted),:host([scale=l]) a:not(.content--slotted){--calcite-internal-button-padding-x: .125rem;--calcite-internal-button-padding-y: 9px;inline-size:2.75rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;min-block-size:2.75rem}:host(:is([scale=s],[scale=m],[scale=l])[width=full]) a:not(.content--slotted),:host(:is([scale=s],[scale=m],[scale=l])[width=full]) button:not(.content--slotted){inline-size:var(--calcite-container-size-content-fluid)}:host([scale=l][appearance=transparent]) button:not(.content--slotted),:host([scale=l][appearance=transparent]) a:not(.content--slotted){--calcite-internal-button-padding-y: .625rem}:host([scale=s][icon-start][icon-end]) button:not(.content--slotted),:host([scale=s][icon-start][icon-end]) a:not(.content--slotted){--calcite-internal-button-padding-x: 23px;block-size:1.5rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=s][icon-start][icon-end][appearance=transparent]) button:not(.content--slotted),:host([scale=s][icon-start][icon-end][appearance=transparent]) a:not(.content--slotted){--calcite-internal-button-padding-x: 1.5rem}:host([scale=m][icon-start][icon-end]) button:not(.content--slotted),:host([scale=m][icon-start][icon-end]) a:not(.content--slotted){--calcite-internal-button-padding-x: 2rem;block-size:2rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=m][icon-start][icon-end][appearance=transparent]) button:not(.content--slotted),:host([scale=m][icon-start][icon-end][appearance=transparent]) a:not(.content--slotted){--calcite-internal-button-padding-x: 33px}:host([scale=l][icon-start][icon-end]) button:not(.content--slotted),:host([scale=l][icon-start][icon-end]) a:not(.content--slotted){--calcite-internal-button-padding-x: 43px;block-size:2.75rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l][icon-start][icon-end]) button:not(.content--slotted) .icon--start+.icon--end,:host([scale=l][icon-start][icon-end]) a:not(.content--slotted) .icon--start+.icon--end{margin-inline-start:1rem}:host([scale=l][icon-start][icon-end][appearance=transparent]) button:not(.content--slotted),:host([scale=l][icon-start][icon-end][appearance=transparent]) a:not(.content--slotted){--calcite-internal-button-padding-x: 2.75rem}:host([hidden]){display:none}[hidden]{display:none}`,TF=class TF extends ir{constructor(){super(...arguments),this.attributeWatch=zet(["aria-expanded"],this.handleGlobalAttributesChanged),this.contentRef=Fc(),this.mutationObserver=ts("mutation",()=>this.updateHasContent()),this.resizeObserver=ts("resize",()=>this.setTooltipText()),this.focusSetter=Ka()(this),this.messages=Po(),this.hasContent=!1,this.alignment="center",this.appearance="solid",this.disabled=!1,this.download=!1,this.kind="brand",this.loading=!1,this.round=!1,this.scale="m",this.splitChild=!1,this.type="button",this.width="auto"}async setFocus(e){return this.focusSetter(()=>this.childEl,e)}connectedCallback(){super.connectedCallback(),this.setupTextContentObserver(),D2(this),this.formEl=eW(this)}async load(){this.updateHasContent()}updated(){cd(this)}loaded(){this.setTooltipText()}disconnectedCallback(){var e,i;super.disconnectedCallback(),(e=this.mutationObserver)==null||e.disconnect(),pW(this),(i=this.resizeObserver)==null||i.disconnect(),this.formEl=null}handleGlobalAttributesChanged(){this.requestUpdate()}updateHasContent(){this.hasContent=fZe(this.el)}setupTextContentObserver(){var e;(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0,subtree:!0})}onLabelClick(){this.handleClick(),this.setFocus()}handleClick(){const{type:e}=this;this.href||(e==="submit"?Twe(this):e==="reset"&&Ewe(this))}setTooltipText(){const{contentRef:{value:e}}=this;e&&(this.tooltipText=e.offsetWidth<e.scrollWidth&&this.el.innerText||null)}setChildEl(e){$M(this.resizeObserver,this.childEl,e),this.childEl=e}render(){const e=this.href?"a":"button",i=this.href?N9`a`:N9`button`,r=this.loading?Se`<div class=${Te(ul.buttonLoader)}><calcite-loader class=${Te(this.loading?ul.loadingIn:ul.loadingOut)} inline .label=${this.messages.loading} .scale=${this.scale==="l"?"m":"s"}></calcite-loader></div>`:null,n=!this.iconStart&&!this.iconEnd,s=Se`<calcite-icon class=${Te({[ul.icon]:!0,[ul.iconStart]:!0})} .flipRtl=${this.iconFlipRtl==="start"||this.iconFlipRtl==="both"} .icon=${this.iconStart} .scale=${ua(this.scale)}></calcite-icon>`,o=Se`<calcite-icon class=${Te({[ul.icon]:!0,[ul.iconEnd]:!0})} .flipRtl=${this.iconFlipRtl==="end"||this.iconFlipRtl==="both"} .icon=${this.iconEnd} .scale=${ua(this.scale)}></calcite-icon>`,a=Se`<span class=${Te(ul.content)} ${Ri(this.contentRef)}><slot></slot></span>`;return ud({disabled:this.disabled,children:Xwe`<${i} .ariaBusy=${this.loading} .ariaExpanded=${this.el.ariaExpanded?this.el.ariaExpanded:null} .ariaLabel=${this.loading?this.messages.loading:fW(this)} aria-live=polite class=${Te({[ul.buttonPadding]:n,[ul.buttonPaddingShrunk]:!n,[ul.contentSlotted]:this.hasContent,[ul.iconStartEmpty]:!this.iconStart,[ul.iconEndEmpty]:!this.iconEnd})} .disabled=${e==="button"?this.disabled:null} download=${(e==="a"?this.download===!0||this.download===""?"":this.download||null:null)??ct} href=${(e==="a"&&this.href)??ct} name=${(e==="button"&&this.name)??ct} @click=${this.handleClick} rel=${(e==="a"&&this.rel)??ct} tabindex=${(this.disabled?-1:null)??ct} target=${(e==="a"&&this.target)??ct} title=${this.tooltipText??ct} type=${(e==="button"?this.type:null)??ct} ${Ri(this.setChildEl)}>${r}${this.iconStart?s:null}${this.hasContent?a:null}${this.iconEnd?o:null}</${i}>`})}};TF.properties={hasContent:[16,{},{state:!0}],tooltipText:[16,{},{state:!0}],alignment:[3,{},{reflect:!0}],appearance:[3,{},{reflect:!0}],disabled:[7,{},{reflect:!0,type:Boolean}],download:[3,{converter:RF},{reflect:!0}],form:[3,{},{reflect:!0}],href:[3,{},{reflect:!0}],iconEnd:[3,{},{reflect:!0}],iconFlipRtl:[3,{},{reflect:!0}],iconStart:[3,{},{reflect:!0}],kind:[3,{},{reflect:!0}],label:1,loading:[7,{},{reflect:!0,type:Boolean}],messageOverrides:[0,{},{attribute:!1}],name:[3,{},{reflect:!0}],rel:[3,{},{reflect:!0}],round:[7,{},{reflect:!0,type:Boolean}],scale:[3,{},{reflect:!0}],splitChild:[3,{},{reflect:!0}],target:[3,{},{reflect:!0}],type:[3,{},{reflect:!0}],width:[3,{},{reflect:!0}]},TF.styles=Sut;let tF=TF;rr("calcite-button",tF);const yD=Object.freeze(Object.defineProperty({__proto__:null,Button:tF},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const $ut="24px",Tut="32px",Eut="44px";/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Yoe={chevronRight:"chevron-right",chevronLeft:"chevron-left"},Ld={container:"container",containerHasEndTabTitleOverflow:"container--end-overflow",containerHasStartTabTitleOverflow:"container--start-overflow",scrollButton:"scroll-button",scrollButtonContainer:"scroll-button-container",scrollBackwardContainerButton:"scroll-button-container--backward",scrollForwardContainerButton:"scroll-button-container--forward",tabTitleSlotWrapper:"tab-titles-slot-wrapper",scale:t=>`scale-${t}`,position:t=>`position-${t}`},Iut=Mi`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{--calcite-internal-tab-nav-gradient-start-side: left;--calcite-internal-tab-nav-gradient-end-side: right;position:relative;display:flex}:host([bordered]):not([selected]) .container{background-color:var(--calcite-tab-background-color, var(--calcite-color-foreground-1))}:host([bordered]) calcite-button{--calcite-button-border-color: var(--calcite-tab-border-color, var(--calcite-color-border-1))}.scale-s{--calcite-internal-tab-nav-button-width: 24px;min-block-size:1.5rem}.scale-m{--calcite-internal-tab-nav-button-width: 32px;min-block-size:2rem}.scale-l{--calcite-internal-tab-nav-button-width: 44px;min-block-size:2.75rem}.calcite--rtl{--calcite-internal-tab-nav-gradient-start-side: right;--calcite-internal-tab-nav-gradient-end-side: left}.container--start-overflow .tab-titles-slot-wrapper{mask-image:linear-gradient(to var(--calcite-internal-tab-nav-gradient-end-side),transparent,transparent var(--calcite-internal-tab-nav-button-width),white var(--calcite-internal-tab-nav-button-width),white 51%)}.container--end-overflow .tab-titles-slot-wrapper{mask-image:linear-gradient(to var(--calcite-internal-tab-nav-gradient-start-side),transparent,transparent var(--calcite-internal-tab-nav-button-width),white var(--calcite-internal-tab-nav-button-width),white 51%)}.container--start-overflow.container--end-overflow .tab-titles-slot-wrapper{mask-image:linear-gradient(to var(--calcite-internal-tab-nav-gradient-end-side),transparent,transparent var(--calcite-internal-tab-nav-button-width),white var(--calcite-internal-tab-nav-button-width),white 51%,transparent 51%),linear-gradient(to var(--calcite-internal-tab-nav-gradient-start-side),transparent,transparent var(--calcite-internal-tab-nav-button-width),white var(--calcite-internal-tab-nav-button-width),white 51%,transparent 51%)}.container::-webkit-scrollbar{display:none;-ms-overflow-style:none;scrollbar-width:none}:host([layout=center]) ::slotted(calcite-tab-title){display:flex;flex-grow:1;flex-shrink:0;min-inline-size:auto;white-space:nowrap}:host([layout=center]) ::slotted(calcite-tab-title[selected]){overflow:unset}:host(:not([bordered])) .scale-l{--calcite-internal-tab-nav-gap: var(--calcite-spacing-xxl)}:host(:not([bordered])) .scale-m{--calcite-internal-tab-nav-gap: var(--calcite-spacing-xl)}:host(:not([bordered])) .scale-s{--calcite-internal-tab-nav-gap: var(--calcite-spacing-lg)}:host(:not([bordered])) .tab-titles-slot-wrapper{gap:var(--calcite-internal-tab-nav-gap)}:host([layout=center]:not([bordered])) .tab-titles-slot-wrapper{padding-inline:var(--calcite-spacing-xl)}.container,.tab-titles-slot-wrapper{display:flex;inline-size:100%;justify-content:flex-start;overflow:hidden;white-space:nowrap}.scroll-button-container{position:absolute;inset-block:0px}.scroll-button-container calcite-button{--calcite-button-text-color: var(--calcite-tab-text-color, var(--calcite-color-text-3));--calcite-button-background-color: var(--calcite-color-transparent);--calcite-offset-invert-focus: 1;block-size:var(--calcite-container-size-content-fluid)}.scroll-button-container calcite-button:hover .scroll-button-container calcite-button:focus{--calcite-button-background-color: var(--calcite-color-transparent-hover)}.scroll-button-container calcite-button:active{--calcite-button-background-color: var(--calcite-color-transparent-press)}.scroll-button-container--forward{inset-inline-end:0;z-index:var(--calcite-z-index)}.scroll-button-container--backward{inset-inline-start:0;z-index:var(--calcite-z-index)}:host(:not([bordered])) .scroll-button-container--backward:before,:host(:not([bordered])) .scroll-button-container--forward:before{background-color:var(--calcite-tab-border-color, var(--calcite-color-border-1));opacity:.5;content:"";inline-size:var(--calcite-border-width-sm);inset-block-start:var(--calcite-border-width-md);inset-block-end:var(--calcite-border-width-md);position:absolute}:host(:not([bordered])) .scroll-button-container--backward:before{inset-inline-end:0}:host(:not([bordered])) .scroll-button-container--forward:before{inset-inline-start:0}:host([hidden]){display:none}[hidden]{display:none}`,EF=class EF extends ir{constructor(){super(),this.effectiveDir="ltr",this.lastScrollWheelAxis="x",this.resizeObserver=ts("resize",()=>{this.updateScrollingState()}),this.makeFirstVisibleTabClosable=!1,this.messages=Po(),this.hasOverflowingEndTabTitle=!1,this.hasOverflowingStartTabTitle=!1,this.bordered=!1,this.layout="inline",this.position="bottom",this.scale="m",this.selectedTitle=null,this.calciteInternalTabChange=ot({cancelable:!1}),this.calciteInternalTabNavSlotChange=ot(),this.calciteTabChange=ot({cancelable:!1}),this.listen("calciteInternalTabsFocusPrevious",this.focusPreviousTabHandler),this.listen("calciteInternalTabsFocusNext",this.focusNextTabHandler),this.listen("calciteInternalTabsFocusFirst",this.focusFirstTabHandler),this.listen("calciteInternalTabsFocusLast",this.focusLastTabHandler),this.listen("calciteInternalTabsActivate",this.internalActivateTabHandler),this.listen("calciteInternalTabsClose",this.internalCloseTabHandler),this.listen("calciteInternalTabTitleRegister",this.updateTabTitles),this.listenOn(document.body,"calciteInternalTabChange",this.globalInternalTabChangeHandler)}connectedCallback(){var e;super.connectedCallback(),this.parentTabsEl=this.el.closest("calcite-tabs"),(e=this.resizeObserver)==null||e.observe(this.el)}async load(){const e=`calcite-tab-nav-${this.storageId}`;if(localStorage&&this.storageId&&localStorage.getItem(e)){const i=JSON.parse(localStorage.getItem(e));this.selectedTabId=i}}willUpdate(e){e.has("selectedTitle")&&(this.hasUpdated||this.selectedTitle!==null)&&this.calciteInternalTabChange.emit({tab:this.selectedTabId}),e.has("selectedTabId")&&this.selectedTabIdChanged();const{parentTabsEl:i}=this;this.layout=i==null?void 0:i.layout,this.bordered=i==null?void 0:i.bordered,this.effectiveDir=Qu(this.el)}loaded(){this.scrollTabTitleIntoView(this.selectedTitle,"instant"),this.tabTitles.length&&this.tabTitles.every(e=>!e.selected)&&!this.selectedTabId&&this.tabTitles[0].getTabIdentifier().then(e=>{this.calciteInternalTabChange.emit({tab:e})})}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this.resizeObserver)==null||e.disconnect()}get enabledTabTitles(){return Ore(this.el,"calcite-tab-title:not([disabled])").filter(e=>!e.closed)}get scrollerButtonWidth(){const{scale:e}=this;return parseInt(e==="s"?$ut:e==="m"?Tut:Eut)}get tabTitles(){return Ore(this.el,"calcite-tab-title")}focusPreviousTabHandler(e){this.handleTabFocus(e,e.target,"previous")}focusNextTabHandler(e){this.handleTabFocus(e,e.target,"next")}focusFirstTabHandler(e){this.handleTabFocus(e,e.target,"first")}focusLastTabHandler(e){this.handleTabFocus(e,e.target,"last")}internalActivateTabHandler(e){const i=e.target,r=this.selectedTitle;this.selectedTabId=e.detail.tab?e.detail.tab:this.getIndexOfTabTitle(i),e.stopPropagation(),this.selectedTitle=i,(r==null?void 0:r.id)!==i.id&&e.detail.userTriggered&&this.calciteTabChange.emit(),this.scrollTabTitleIntoView(i)}scrollTabTitleIntoView(e,i="smooth"){e&&requestAnimationFrame(()=>{const r=this.effectiveDir==="ltr",n=this.tabTitleContainerEl,s=n.getBoundingClientRect(),o=e.getBoundingClientRect(),a=n.scrollLeft,l=r?this.hasOverflowingStartTabTitle:this.hasOverflowingEndTabTitle,c=r?this.hasOverflowingEndTabTitle:this.hasOverflowingStartTabTitle;if(o.left<s.left+(l?this.scrollerButtonWidth:0)){const d=a+(o.left-s.left)-this.scrollerButtonWidth;n.scrollTo({left:d,behavior:i})}else if(o.right>s.right-(c?this.scrollerButtonWidth:0)){const d=a+(o.right-s.right)+this.scrollerButtonWidth;n.scrollTo({left:d,behavior:i})}})}internalCloseTabHandler(e){const i=e.target;this.handleTabTitleClose(i),e.stopPropagation()}async updateTabTitles(e){e.target.selected&&(this.selectedTabId=e.detail,this.selectedTitle=await this.getTabTitleById(this.selectedTabId))}globalInternalTabChangeHandler(e){this.syncId&&e.target!==this.el&&e.target.syncId===this.syncId&&this.selectedTabId!==e.detail.tab&&(this.selectedTabId=e.detail.tab),e.stopPropagation()}async selectedTabIdChanged(){await this.componentOnReady(),localStorage&&this.storageId&&this.selectedTabId!==void 0&&this.selectedTabId!==null&&localStorage.setItem(`calcite-tab-nav-${this.storageId}`,JSON.stringify(this.selectedTabId)),this.calciteInternalTabChange.emit({tab:this.selectedTabId})}onTabTitleWheel(e){e.preventDefault();const{deltaX:i,deltaY:r}=e,n=Math.abs(i),s=Math.abs(r);let o;n===s?o=this.lastScrollWheelAxis==="x"?i:r:n>s?(o=i,this.lastScrollWheelAxis="x"):(o=r,this.lastScrollWheelAxis="y");const a=(this.effectiveDir==="rtl"?-1:1)*o;e.currentTarget.scrollBy(a,0)}onSlotChange(){var n;(n=this.intersectionObserver)==null||n.disconnect();const e=this.tabTitles;e.forEach(s=>{var o;(o=this.intersectionObserver)==null||o.observe(s)});const i=this.getVisibleTabTitlesIndices(e);i.length>1&&this.makeFirstVisibleTabClosable&&(e[i[0]].closable=!0,this.makeFirstVisibleTabClosable=!1),this.calciteInternalTabNavSlotChange.emit(e)}storeTabTitleWrapperRef(e){e&&(this.tabTitleContainerEl=e,this.intersectionObserver=ts("intersection",()=>this.updateScrollingState(),{root:e,threshold:[0,.5,1]}))}updateScrollingState(){const e=this.tabTitleContainerEl;if(!e)return;let i,r;const n=e.scrollLeft,s=e.clientWidth,o=e.scrollWidth;this.effectiveDir==="ltr"?(i=n>0,r=n+s<o):(i=n<0,r=n!==-(o-s)),this.hasOverflowingStartTabTitle=i,this.hasOverflowingEndTabTitle=r}scrollToTabTitles(e){requestAnimationFrame(()=>{const i=this.tabTitleContainerEl,r=i.getBoundingClientRect(),n=Array.from(this.el.querySelectorAll("calcite-tab-title")),{effectiveDir:s}=this;e==="forward"&&n.reverse();let o=null;if(n.forEach(a=>{const l=a.getBoundingClientRect(),c=r.x+r.width,d=l.x+l.width;e==="forward"&&s==="ltr"||e==="backward"&&s==="rtl"?(l.x>c||d>c&&l.x>r.x)&&(o=a):(d<r.x||d<c&&l.x<r.x)&&(o=a)}),o){const{scrollerButtonWidth:a}=this,l=e==="forward"&&s==="ltr"||e==="backward"&&s==="rtl"?-a:o.offsetWidth-i.clientWidth+a,c=o.offsetLeft+l;i.scrollTo({left:c,behavior:"smooth"})}})}scrollToNextTabTitles(){this.scrollToTabTitles("forward")}scrollToPreviousTabTitles(){this.scrollToTabTitles("backward")}handleTabFocus(e,i,r){const n=Wf(this.enabledTabTitles,i,r);this.scrollTabTitleIntoView(n,"instant"),e.stopPropagation()}getIndexOfTabTitle(e,i=this.tabTitles){return i.indexOf(e)}onTabTitleScroll(){this.updateScrollingState()}async getTabTitleById(e){return Promise.all(this.tabTitles.map(i=>i.getTabIdentifier())).then(i=>this.tabTitles[i.indexOf(e)])}getVisibleTabTitlesIndices(e){return e.reduce((i,r,n)=>r.closed?i:[...i,n],[])}handleTabTitleClose(e){const{tabTitles:i}=this,r=e.selected,n=this.getVisibleTabTitlesIndices(i),s=n.length;if(s===1&&i[n[0]].closable)this.makeFirstVisibleTabClosable=!0,i[n[0]].closable=!1,this.selectedTabId=n[0],r&&i[n[0]].activateTab();else if(s>1){const o=i.findIndex(l=>l===e),a=n.find(l=>l>o);this.selectedTabId===o&&(this.selectedTabId=a||s-1,i[this.selectedTabId].activateTab())}requestAnimationFrame(()=>{i[this.selectedTabId].focus()})}render(){return this.el.role="tablist",Se`<div class=${Te({[Ld.container]:!0,[Ld.containerHasStartTabTitleOverflow]:!!this.hasOverflowingStartTabTitle,[Ld.containerHasEndTabTitleOverflow]:!!this.hasOverflowingEndTabTitle,[Ld.scale(this.scale)]:!0,[Ld.position(this.position)]:!0,[Iy.rtl]:this.effectiveDir==="rtl"})}>${this.renderScrollButton("start")}<div class=${Te({[Ld.tabTitleSlotWrapper]:!0})} @scroll=${this.onTabTitleScroll} @wheel=${this.onTabTitleWheel} ${Ri(this.storeTabTitleWrapperRef)}><slot @slotchange=${this.onSlotChange}></slot></div>${this.renderScrollButton("end")}</div>`}renderScrollButton(e){const{bordered:i,messages:r,hasOverflowingStartTabTitle:n,hasOverflowingEndTabTitle:s,scale:o}=this,a=e==="end";return ri(e,Se`<div class=${Te({[Ld.scrollButtonContainer]:!0,[Ld.scrollBackwardContainerButton]:!a,[Ld.scrollForwardContainerButton]:a})} .hidden=${a&&!s||!a&&!n}><calcite-button .appearance=${i?"outline-fill":"transparent"} .ariaLabel=${a?r.nextTabTitles:r.previousTabTitles} class=${Te({[Ld.scrollButton]:!0})} icon-flip-rtl=both .iconStart=${a?Yoe.chevronRight:Yoe.chevronLeft} kind=neutral @click=${a?this.scrollToNextTabTitles:this.scrollToPreviousTabTitles} .scale=${o} tabindex=-1></calcite-button></div>`)}};EF.properties={hasOverflowingEndTabTitle:[16,{},{state:!0}],hasOverflowingStartTabTitle:[16,{},{state:!0}],selectedTabId:[16,{},{state:!0}],bordered:[7,{},{reflect:!0,type:Boolean}],layout:[3,{},{reflect:!0}],messageOverrides:[0,{},{attribute:!1}],position:1,scale:1,selectedTitle:[0,{},{attribute:!1}],storageId:[3,{},{reflect:!0}],syncId:[3,{},{reflect:!0}]},EF.styles=Iut;let w7=EF;rr("calcite-tab-nav",w7);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Cut={section:"section"},Mut={titleGroup:"title-group"},kut=Mi`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{display:flex;flex-direction:column}:host([bordered]){box-shadow:inset 0 1px 0 var(--calcite-tab-border-color, var(--calcite-color-border-1));background-color:var(--calcite-tab-background-color, var(--calcite-color-foreground-1))}:host([bordered]) section{border-color:var(--calcite-tab-border-color, var(--calcite-color-border-1));border-style:solid}section{display:flex;flex-grow:1;overflow:hidden;border-width:1px;border-block-start-style:solid;border-block-start-color:var(--calcite-tab-border-color, var(--calcite-color-border-1))}:host([bordered][position=bottom]){box-shadow:inset 0 1px 0 var(--calcite-tab-border-color, var(--calcite-color-border-1)),inset 0 -1px 0 var(--calcite-tab-border-color, var(--calcite-color-border-1))}:host([bordered]:not([position=bottom])) ::slotted(calcite-tab-nav){margin-block-end:-1px}:host([position=bottom]){flex-direction:column-reverse}:host([position=bottom]) section{flex-direction:column-reverse;border-block-start-width:0px;border-block-end-width:1px}:host([bordered][scale=s]) section{padding:.75rem}:host([bordered][scale=m]) section{padding:.5rem}:host([bordered][scale=l]) section{padding:1rem}:host([position=bottom]:not([bordered])) section{border-block-end-style:solid;border-block-end-color:var(--calcite-tab-border-color, var(--calcite-color-border-1))}@media (forced-colors: active){:host([bordered]) section{border-block-start-width:0px;border-block-end-width:1px}:host([position=bottom][bordered]) section{border-block-start-width:1px;border-block-end-width:0px}}:host([hidden]){display:none}[hidden]{display:none}`,IF=class IF extends ir{constructor(){super(),this.slotRef=Fc(),this.tabs=[],this.titles=[],this.bordered=!1,this.layout="inline",this.position="top",this.scale="m",this.listen("calciteInternalTabNavSlotChange",this.calciteInternalTabNavSlotChangeHandler)}connectedCallback(){super.connectedCallback(),this.updateItems()}load(){this.updateItems()}willUpdate(e){var i,r;(e.has("position")&&(this.hasUpdated||this.position!=="top")||e.has("scale")&&(this.hasUpdated||this.scale!=="m"))&&this.updateItems(),(e.has("titles")||e.has("tabs"))&&this.hasUpdated&&((i=this.titles)==null?void 0:i.length)>0&&((r=this.tabs)==null?void 0:r.length)>0&&(this.updateAriaSettings(),this.updateItems())}calciteInternalTabNavSlotChangeHandler(e){e.stopPropagation(),e.detail.length!==this.titles.length&&(this.titles=e.detail)}defaultSlotChangeHandler(e){this.tabs=Rc(e,"calcite-tab")}async updateAriaSettings(){if(await this.componentOnReady(),!this.slotRef.value)return;let e,i;const r=E0e(this.slotRef.value,"calcite-tab");if(r.some(n=>n.tab)||this.titles.some(n=>n.tab))e=r.sort((n,s)=>n.tab.localeCompare(s.tab)).map(n=>n.id),i=this.titles.sort((n,s)=>n.tab.localeCompare(s.tab)).map(n=>n.id);else{const n=await Promise.all(r.map(o=>o.getTabIndex())),s=await Promise.all(this.titles.map(o=>o.getTabIndex()));e=n.reduce((o,a,l)=>(o[a]=r[l].id,o),[]),i=s.reduce((o,a,l)=>(o[a]=this.titles[l].id,o),[])}r.forEach(n=>n._updateAriaInfo(e,i)),this.titles.forEach(n=>n._updateAriaInfo(e,i))}updateItems(){const{position:e,scale:i}=this,r=this.el.querySelector("calcite-tab-nav");r&&(r.position=e,r.scale=i),Array.from(this.el.querySelectorAll("calcite-tab")).forEach(n=>{n.parentElement===this.el&&(n.scale=i)}),Array.from(this.el.querySelectorAll("calcite-tab-nav > calcite-tab-title")).forEach(n=>{n.position=e,n.scale=i})}render(){return Se`<slot name=${Mut.titleGroup}></slot><section class=${Te(Cut.section)}><slot @slotchange=${this.defaultSlotChangeHandler} ${Ri(this.slotRef)}></slot></section>`}};IF.properties={tabs:[16,{},{state:!0}],titles:[16,{},{state:!0}],bordered:[5,{},{type:Boolean}],layout:[3,{},{reflect:!0}],position:[3,{},{reflect:!0}],scale:[3,{},{reflect:!0}]},IF.styles=kut;let _7=IF;rr("calcite-tabs",_7);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Xoe={button:"x-button",buttonRound:"x-button--round"},Put=({disabled:t,focusable:e,key:i,label:r,onClick:n,ref:s,round:o=!0,scale:a,title:l})=>ri(i,Se`<button .ariaLabel=${r} class=${Te({[(c=>`x-button--${c}`)(a)]:!0,[Xoe.button]:!0,[Xoe.buttonRound]:o})} .disabled=${t} @click=${n} .tabIndex=${0} title=${l??ct} type=button ${Ri(s)}><calcite-icon icon=x .scale=${ua(a)}></calcite-icon></button>`);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const mu={container:"container",containerBottom:"container--bottom",content:"content",contentHasText:"content--has-text",iconEnd:"icon-end",iconPresent:"icon-present",iconStart:"icon-start",titleIcon:"calcite-tab-title--icon",scale:t=>`scale-${t}`,selectedIndicator:"selected-indicator"},Aut="calcite-tab-title",Lut={host:t=>`${Aut}-${t}`},Rut=Mi`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:block;outline:2px solid transparent;outline-offset:2px;margin-inline-start:0px}:host([layout=inline]){flex:0 1 auto}:host([layout=center]){flex:1 1 auto}.content{position:relative;margin-block-end:.125rem;box-sizing:border-box;display:flex;block-size:100%;align-items:center;justify-content:center}.scale-s .content{padding-block:.25rem;font-size:var(--calcite-font-size--2);line-height:1rem}.scale-s .x-button{inline-size:1.25rem}.scale-m .content{padding-block:.5rem;font-size:var(--calcite-font-size--1);line-height:1rem}.scale-m .x-button{inline-size:1.75rem}.scale-l .content{padding-block:.625rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}.scale-l .x-button{inline-size:2rem}:host([closable]) .content{border-block-end-color:transparent}:host([layout=inline]) .content,:host([layout=center]) .content{padding-inline:.25rem}:host([layout=center]) .scale-s,:host([layout=center]) .scale-m,:host([layout=center]) .scale-l{margin-block:0px;justify-content:center;text-align:center}:host([layout=center]) .scale-s .content,:host([layout=center]) .scale-m .content,:host([layout=center]) .scale-l .content{flex:1 1 auto;flex-grow:1}.container{position:relative;box-sizing:border-box;display:flex;block-size:100%;inline-size:100%;cursor:pointer;align-content:center;justify-content:space-between;padding-inline:0px;font-size:var(--calcite-font-size--1);line-height:1rem;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;outline-color:transparent;color:var(--calcite-tab-text-color, var(--calcite-color-text-3));background-color:var(--calcite-tab-background-color, transparent)}.selected-indicator{position:absolute;display:block;block-size:.125rem;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;inset-block-end:0;inset-inline-start:0;inset-inline-end:0;inline-size:100%}:host([bordered][selected]) .container:after{position:absolute;display:block;block-size:.125rem;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;inset-block-end:-1px;inset-inline-start:0;inset-inline-end:0;inline-size:100%;content:""}:host([bordered][selected]) .container.container--bottom:after{inset-block-start:-1px}:host([bordered][selected]:focus) .container:after{background:transparent}.container--bottom .selected-indicator{inset-block-end:unset;inset-block-start:0}:host(:not([bordered])) .container:hover,:host(:not([bordered])) .container:active{color:var(--calcite-color-text-1)}:host([bordered]:not([selected]):hover:not(:focus)) .selected-indicator{background-color:var(--calcite-color-foreground-2)}:host([bordered]:not([selected]):hover:not(:focus)) .container:not(.container--bottom) .selected-indicator{box-shadow:inset 0 1px var(--calcite-color-border-1)}:host([bordered]:not([selected]):hover:not(:focus)) .container.container--bottom .selected-indicator{box-shadow:inset 0 -1px var(--calcite-color-border-1)}:host([selected]:focus) .selected-indicator{block-size:4px}.calcite-tab-title--icon{position:relative;margin:0;display:inline-flex;align-self:center}.calcite-tab-title--icon svg{transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out}.content--has-text .icon-start,.content--has-text .calcite-tab-title--icon.icon-start{color:var(--calcite-tab-icon-color-start, var(--calcite-icon-color))}.content--has-text .calcite-tab-title--icon.icon-start .icon-end,.content--has-text .calcite-tab-title--icon.icon-end{color:var(--calcite-tab-icon-color-end, var(--calcite-icon-color))}.content--has-text{padding:.25rem}.content--has-text .calcite-tab-title--icon.icon-start{margin-inline-end:var(--calcite-spacing-sm)}.content--has-text .calcite-tab-title--icon.icon-end{margin-inline-start:var(--calcite-spacing-sm)}.x-button{display:flex;block-size:100%;cursor:pointer;appearance:none;align-content:center;align-items:center;justify-content:center;align-self:center;border-style:none;background-color:transparent;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;outline-color:transparent;margin-inline-start:var(--calcite-spacing-sm);margin-inline-end:var(--calcite-spacing-px);block-size:calc(100% - var(--calcite-spacing-xxs));color:var(--calcite-tab-close-icon-color, var(--calcite-color-text-3));background-color:var(--calcite-tab-close-icon-background-color, var(--calcite-color-transparent))}.x-button:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus)}.x-button:focus,.x-button:hover,.x-button:active{color:var(--calcite-tab-close-icon-color-press, var(--calcite-color-text-1));background-color:var(--calcite-tab-close-icon-background-color-press, var(--calcite-color-foreground-3))}:host([bordered]) .container{border-color:transparent;border-inline-width:var(--calcite-spacing-px);border-inline-style:solid}:host([bordered]) .container:hover,:host([bordered]) .container:active{color:var(--calcite-color-text-1)}:host([bordered]) .container .x-button calcite-icon{margin-block-start:var(--calcite-spacing-px)}:host([bordered]) .container .x-button:focus,:host([bordered]) .container .x-button:hover,:host([bordered]) .container .x-button:active{box-shadow:0 2px 0 0 var(--calcite-tab-close-icon-background-color-press, var(--calcite-color-foreground-3))}:host([bordered]) .container.container--bottom{border-block-start-style:solid;border-block-start-width:1px}:host([bordered]) .container.container--bottom .selected-indicator{inset-block-start:unset;inset-block-end:0}:host([bordered]) .container.container--bottom .x-button{box-shadow:0 -2px 0 0 var(--calcite-tab-close-icon-background-color, var(--calcite-color-transparent))}:host([bordered]) .container.container--bottom .x-button:focus,:host([bordered]) .container.container--bottom .x-button:hover,:host([bordered]) .container.container--bottom .x-button:active{box-shadow:0 -2px 0 0 var(--calcite-tab-close-icon-background-color-press, var(--calcite-color-foreground-3))}:host([bordered]) .container.container--bottom .x-button calcite-icon{margin-block-end:var(--calcite-spacing-px)}:host([bordered]) .container:not(.container--bottom){border-block-end-style:solid;border-block-end-width:1px}:host([bordered]) .container:not(.container--bottom) .x-button{block-size:calc(100% - var(--calcite-spacing-px));margin-block-start:-1px}:host([bordered]) .container .selected-indicator{inset-block-start:0;inset-block-end:unset;inset-inline-start:-1px;inset-inline-end:0;inline-size:calc(100% + var(--calcite-spacing-base))}:host([bordered]) .container:host(:not([selected])) .container .x-button{box-shadow:0 2px 0 0 transparent}:host([bordered]) .container:host(:not([selected])):host(:hover) .container:not(.container--bottom){border-block-end-color:var(--calcite-tab-border-color, var(--calcite-color-border-1))}:host([bordered]) .container:host(:not([selected])):host(:hover):host(:not(:focus)) .selected-indicator{box-shadow:inset 0 var(--calcite-internal-tab-shadow-length) var(--calcite-tab-border-color, var(--calcite-color-border-1))}:host([bordered]) .container:host(:not([selected])):host(:hover):host(:not(:focus)) :not(.container--bottom){--calcite-internal-tab-shadow-length: 1px}:host([bordered]) .container:host(:not([selected])):host(:hover):host(:not(:focus)) .container--bottom{--calcite-internal-tab-shadow-length: -1px}:host([bordered]) .container:hover{background-color:var(--calcite-tab-background-color-hover, var(--calcite-color-foreground-2));border-block-end-color:var(--calcite-color-border-1)}:host(:hover) .selected-indicator{background-color:var(--calcite-color-border-3)}:host([selected]) .selected-indicator,:host([selected]:hover) .selected-indicator,:host(:focus) .selected-indicator,:host(:active) .selected-indicator{background-color:var(--calcite-tab-accent-color-press, var(--calcite-color-brand))}:host([closed]){display:none}:host([selected]) .container{border-color:transparent;color:var(--calcite-tab-text-color, var(--calcite-color-text-1))}:host([selected][bordered]) .container{border-inline-color:var(--calcite-tab-border-color, var(--calcite-color-border-1))}:host([selected][bordered]) .container:after{background-color:var(--calcite-tab-background-color, var(--calcite-color-foreground-1))}:host([selected][bordered]) .container:hover,:host([selected][bordered]) .container:active{background:transparent}:host(:focus) .container{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}:host(:focus) .container:focus-within{outline-color:transparent}:host([icon-start][icon-end]) .calcite-tab-title--icon:first-child{margin-inline-end:var(--calcite-spacing-sm)}:host([layout=inline][bordered]) .scale-m .content,:host([layout=center][bordered]) .scale-m .content{padding-inline:.75rem}:host([layout=inline][bordered]) .scale-s .content,:host([layout=center][bordered]) .scale-s .content{padding-inline:.5rem}:host([layout=inline][bordered]) .scale-l .content,:host([layout=center][bordered]) .scale-l .content{padding-inline:1rem}:host([layout=inline][closable]) .scale-s .content,:host([layout=inline][closable]) .scale-m .content,:host([layout=inline][closable]) .scale-l .content{padding-inline-end:0}@media (forced-colors: active){:host{outline-width:0;outline-offset:0}:host(:focus) .container{outline-color:highlight}:host([bordered][selected]) .container{border-block-end-style:none}:host([bordered][selected]) .container--bottom{border-block-start-style:none}.x-button{z-index:var(--calcite-z-index)}.selected-indicator{background-color:highlight}}:host([hidden]){display:none}[hidden]{display:none}:host([disabled]) .container{pointer-events:none;opacity:.5}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}`,CF=class CF extends ir{constructor(){super(),this.closeButtonRef=Fc(),this.guid=Lut.host(ld()),this.mutationObserver=ts("mutation",()=>this.updateHasText()),this.resizeObserver=ts("resize",()=>{this.calciteInternalTabIconChanged.emit()}),this.messages=Po(),this.hasText=!1,this.bordered=!1,this.closable=!1,this.closed=!1,this.disabled=!1,this.position="top",this.scale="m",this.selected=!1,this.calciteInternalTabIconChanged=ot({cancelable:!1}),this.calciteInternalTabTitleRegister=ot({cancelable:!1}),this.calciteInternalTabsActivate=ot({cancelable:!1}),this.calciteInternalTabsClose=ot({cancelable:!1}),this.calciteInternalTabsFocusFirst=ot({cancelable:!1}),this.calciteInternalTabsFocusLast=ot({cancelable:!1}),this.calciteInternalTabsFocusNext=ot({cancelable:!1}),this.calciteInternalTabsFocusPrevious=ot({cancelable:!1}),this.calciteTabsActivate=ot({cancelable:!1}),this.calciteTabsClose=ot({cancelable:!1}),this.listenOn(document.body,"calciteInternalTabChange",this.internalTabChangeHandler),this.listen("click",this.onClick),this.listen("keydown",this.keyDownHandler)}async activateTab(e=!0){if(this.disabled||this.closed)return;const i={tab:this.tab,userTriggered:e};this.calciteInternalTabsActivate.emit(i),e&&requestAnimationFrame(()=>this.calciteTabsActivate.emit())}async getTabIdentifier(){return this.tab?this.tab:this.getTabIndex()}async getTabIndex(){return Array.prototype.indexOf.call($0e(this.el.parentElement.children).filter(e=>e.matches("calcite-tab-title")),this.el)}_updateAriaInfo(e=[],i=[]){this.controls=e[i.indexOf(this.el.id)]||null}connectedCallback(){super.connectedCallback(),this.setupTextContentObserver(),this.parentTabsEl=this.el.closest("calcite-tabs")}async load(){this.updateHasText(),this.tab&&this.selected&&this.activateTab(!1)}willUpdate(e){e.has("selected")&&(this.hasUpdated||this.selected!==!1)&&this.selectedHandler(),this.parentTabsEl&&(this.layout=this.parentTabsEl.layout,this.bordered=this.parentTabsEl.bordered)}updated(){cd(this)}async loaded(){this.calciteInternalTabTitleRegister.emit(await this.getTabIdentifier())}disconnectedCallback(){var e,i,r;super.disconnectedCallback(),(e=this.mutationObserver)==null||e.disconnect(),(i=document.body)==null||i.dispatchEvent(new CustomEvent("calciteTabTitleUnregister",{detail:this.el})),(r=this.resizeObserver)==null||r.disconnect()}selectedHandler(){this.selected&&this.activateTab(!1)}internalTabChangeHandler(e){e.composedPath().find(r=>r.tagName==="CALCITE-TABS")===this.parentTabsEl&&(this.tab?this.selected=this.tab===e.detail.tab:this.getTabIndex().then(r=>{this.selected=r===e.detail.tab}),e.stopPropagation())}onClick(){this.activateTab()}keyDownHandler(e){switch(e.key){case" ":case"Enter":e.composedPath().includes(this.closeButtonRef.value)||(this.activateTab(),e.preventDefault());break;case"ArrowRight":e.preventDefault(),Qu(this.el)==="ltr"?this.calciteInternalTabsFocusNext.emit():this.calciteInternalTabsFocusPrevious.emit();break;case"ArrowLeft":e.preventDefault(),Qu(this.el)==="ltr"?this.calciteInternalTabsFocusPrevious.emit():this.calciteInternalTabsFocusNext.emit();break;case"Home":e.preventDefault(),this.calciteInternalTabsFocusFirst.emit();break;case"End":e.preventDefault(),this.calciteInternalTabsFocusLast.emit();break}}closeClickHandler(){this.closeTabTitleAndNotify()}updateHasText(){this.hasText=this.el.textContent.trim().length>0}setContainerRef(e){$M(this.resizeObserver,this.containerEl,e),this.containerEl=e}setupTextContentObserver(){var e;(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0,subtree:!0})}closeTabTitleAndNotify(){this.closed=!0,this.calciteInternalTabsClose.emit({tab:this.tab}),this.calciteTabsClose.emit()}render(){const{el:e,closed:i}=this,r=e.id||this.guid,n=Se`<calcite-icon class=${Te({[mu.titleIcon]:!0,[mu.iconStart]:!0})} .flipRtl=${this.iconFlipRtl==="start"||this.iconFlipRtl==="both"} .icon=${this.iconStart} .scale=${ua(this.scale)}></calcite-icon>`,s=Se`<calcite-icon class=${Te({[mu.titleIcon]:!0,[mu.iconEnd]:!0})} .flipRtl=${this.iconFlipRtl==="end"||this.iconFlipRtl==="both"} .icon=${this.iconEnd} .scale=${ua(this.scale)}></calcite-icon>`;return Hu(this.el,"aria-controls",this.controls),this.el.ariaSelected=A2(this.selected),Hu(this.el,"id",r),this.el.role="tab",Hu(this.el,"tabIndex",this.selected&&!this.disabled?0:-1),ud({disabled:this.disabled,children:Se`<div class=${Te({[mu.container]:!0,[mu.containerBottom]:this.position==="bottom",[mu.iconPresent]:!!this.iconStart||!!this.iconEnd,[mu.scale(this.scale)]:!0})} .hidden=${i} ${Ri(this.setContainerRef)}><div class=${Te({[mu.content]:!0,[mu.contentHasText]:this.hasText})}>${this.iconStart?n:null}<slot></slot>${this.iconEnd?s:null}</div>${this.renderCloseButton()}<div class=${Te(mu.selectedIndicator)}></div></div>`})}renderCloseButton(){const{closable:e,messages:i}=this;return e?ri("close-button",Put({disabled:!1,focusable:!0,label:i.close,onClick:this.closeClickHandler,ref:this.closeButtonRef,round:!1,scale:this.scale,title:i.close})):null}};CF.properties={controls:[16,{},{state:!0}],hasText:[16,{},{state:!0}],bordered:[7,{},{reflect:!0,type:Boolean}],closable:[7,{},{reflect:!0,type:Boolean}],closed:[7,{},{reflect:!0,type:Boolean}],disabled:[7,{},{reflect:!0,type:Boolean}],iconEnd:[3,{},{reflect:!0}],iconFlipRtl:[3,{},{reflect:!0}],iconStart:[3,{},{reflect:!0}],layout:[3,{},{reflect:!0}],messageOverrides:[0,{},{attribute:!1}],position:1,scale:1,selected:[7,{},{reflect:!0,type:Boolean}],tab:[3,{},{reflect:!0}]},CF.styles=Rut;let x7=CF;rr("calcite-tab-title",x7);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
v4.33.24 */const Out=qrt((t,e)=>(e.onLoaded(()=>{const i=t.el;t.listenOn(i.childElem,"calciteFlowItemClose",()=>{t.arcgisClose.emit(),t.autoDestroyDisabled||t.destroy()})}),VC()));/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
v4.33.24 */const Fut=Mi`@layer{arcgis-features{display:flex;flex-direction:column;overflow:hidden;.esri-features{flex:1 1 auto;overflow:hidden}}}`,Nut=$1e(gi),FC=class FC extends z7{constructor(){super(...arguments),this.widget=Nut(this),this.viewModel=this.widget.viewModel,this.arcgisClose=Out(this),this.actions=this.viewModel.actions,this.active=this.widget.active,this.autoDestroyDisabled=!1,this.closed=!1,this.collapsed=this.widget.collapsed,this.content=this.widget.content,this.featureNavigationTop=this.widget.featureNavigationTop,this.featureViewModelAbilities=this.viewModel.featureViewModelAbilities,this.features=this.widget.features,this.featuresPerPage=this.viewModel.featuresPerPage,this.featuresTitle=this.widget.title,this.goToOverride=this.viewModel.goToOverride,this.headingLevel=this.widget.headingLevel,this.headerActions=this.widget.headerActions,this.hideActionBar=this.widget.visibleElements.actionBar,this.hideCloseButton=this.widget.visibleElements.closeButton,this.hideFeatureMenuHeading=this.widget.visibleElements.featureMenuHeading,this.hideFeatureNavigation=this.widget.visibleElements.featureNavigation,this.hideFlow=this.widget.visibleElements.flow,this.hideHeading=this.widget.visibleElements.heading,this.hideSpinner=this.widget.visibleElements.spinner,this.icon=this.widget.icon,this.includeDefaultActions=this.viewModel.includeDefaultActions,this.initialDisplayMode=this.widget.initialDisplayMode,this.label=this.widget.label,this.map=this.widget.map,this.position="bottom-left",this.promises=this.widget.promises,this.selectedFeature=this.widget.selectedFeature,this.selectedFeatureIndex=this.widget.selectedFeatureIndex,this.showCollapseButton=this.widget.visibleElements.collapseButton,this.spatialReference=this.widget.spatialReference,this.state=this.viewModel.state,this.timeZone=this.widget.timeZone,this.arcgisPropertyChange=d_e()("selectedFeature","selectedFeatureIndex","state"),this.arcgisReady=VC(),this.arcgisTriggerAction=ws(()=>this.widget,"trigger-action")}async clear(){var e;(e=this.widget)==null||e.clear()}async close(){var e;(e=this.widget)==null||e.close()}async destroy(){await this.manager.destroy()}async fetchFeatures(e,i){var r;return await((r=this.widget)==null?void 0:r.fetchFeatures(e,i))}async next(){var e;return(e=this.widget)==null?void 0:e.next()}async open(e){var i;(i=this.widget)==null||i.open(e)}async previous(){var e;return(e=this.widget)==null?void 0:e.previous()}async triggerAction(e){var i;(i=this.widget)==null||i.triggerAction(e)}};FC.properties={actions:0,active:7,autoDestroyDisabled:5,closed:5,collapsed:7,content:1,featureNavigationTop:5,featureViewModelAbilities:0,features:0,featuresPerPage:9,featuresTitle:1,goToOverride:0,headingLevel:9,headerActions:0,hideActionBar:5,hideCloseButton:5,hideFeatureMenuHeading:5,hideFeatureNavigation:5,hideFlow:5,hideHeading:5,hideSpinner:5,icon:1,includeDefaultActions:5,initialDisplayMode:1,label:1,map:0,position:1,promises:0,referenceElement:1,selectedFeature:0,selectedFeatureIndex:9,showCollapseButton:5,spatialReference:0,state:3,timeZone:1},FC.shadowRootOptions=jC,FC.styles=Fut;let S7=FC;X7("arcgis-features",S7);function Dut(){const t=JQe;return t.popupTemplate=cwe({level:"country",year:2024}),ae.jsx(ae.Fragment,{children:ae.jsx(bp,{heading:"Election results",collapsible:!0,children:ae.jsx(zWe,{features:[t],hideActionBar:!0,hideCloseButton:!0,hideFeatureMenuHeading:!0,hideFeatureNavigation:!0,hideHeading:!0})})})}const BV={winner:"Winner","winner-lean":"Winner with lean",swing:"Swing - dynamic rotation",change:"Change - all parties",trend:"20-year trend"};function zut(t){const{onYearInput:e,onRendererTypeChange:i}=t,[r,n]=Uf.useState("winner"),[s,o]=Uf.useState(BV[r]);return ae.jsx(ae.Fragment,{children:ae.jsxs(eJe,{slot:"panel-start",displayMode:"dock",widthScale:"m",children:[ae.jsx(JZe,{slot:"action-bar",children:ae.jsx(ZZe,{"data-action-id":"information",icon:"information",text:"Information"})}),ae.jsxs(XZe,{id:"tools",scale:"m",heading:s,"data-panel-id":"information",children:[ae.jsx(F1,{layout:"inline",children:"Select a variable"}),ae.jsx("div",{className:"slider-container",children:ae.jsx(KZe,{onCalciteSelectChange:async a=>{const l=a.target.value;n(l),i(l),o(BV[l])},children:Object.entries(BV).map(([a,l])=>ae.jsx(YZe,{label:l,value:a,selected:a===r},a))})}),ae.jsx(wut,{rendererType:r,onYearInput:e}),ae.jsx(Dut,{})]})]})})}Vae("https://js.arcgis.com/calcite-components/3.2.1/assets");Si.applicationName="U.S. Presidential Election Results (2000-2024)";const Vut={winner:"Winner","winner-lean":"Winner - with lean",swing:"Swing - dynamic rotation",change:"Change - all parties",trend:"20-year trend"};function jut(){const t=Uf.useRef(null),e=new f0e({portalItem:{id:qQe}}),i=async s=>{const o=t.current;if(!o||!e||(await e.load(),r=o==null?void 0:o.view,!r))return;let a,l;Array.isArray(s)?(a=Math.min(...s),l=Math.max(...s)):a=l=s,r.timeExtent={start:new Date(a,0,1),end:new Date(l,0,1)};const c=e.allLayers.find(f=>f.title==="Change - all parties");if(c&&!Array.isArray(s)){const f=ese({level:"county",year:s}),y=ese({level:"state",year:s}),g=c.layers.find(j=>j.title==="Counties");g.renderer=f.renderer,g.popupTemplate=f.popupTemplate,g.labelingInfo=f.labelingInfo;const b=c.layers.find(j=>j.title==="States");b.renderer=y.renderer,b.popupTemplate=y.popupTemplate,b.labelingInfo=y.labelingInfo;const _=e.allLayers.find(j=>j.title==="Winner"),x=_.layers.find(j=>j.title==="States"),E=_.layers.find(j=>j.title==="Counties");E.popupTemplate=f.popupTemplate,x.popupTemplate=y.popupTemplate;const C=e.allLayers.find(j=>j.title==="Winner - with lean"),k=C.layers.find(j=>j.title==="States"),O=C.layers.find(j=>j.title==="Counties");O.popupTemplate=f.popupTemplate,k.popupTemplate=y.popupTemplate;const B=e.allLayers.find(j=>j.title==="Swing - dynamic rotation").layers.find(j=>j.title==="Counties");B.popupTemplate=f.popupTemplate}const d=e.allLayers.find(f=>f.title==="20-year trend");if(d){const f=tse({level:"county",year:s}),y=tse({level:"state",year:s}),g=d.layers.find(_=>_.title==="Counties");g.renderer=f.renderer,g.popupTemplate=f.popupTemplate;const b=d.layers.find(_=>_.title==="States");b.renderer=y.renderer,b.popupTemplate=y.popupTemplate}};let r;const n=async()=>{const s=t.current;if(!s||!e)return;await e.load(),await i(2024),r=s==null?void 0:s.view,r.constraints={snapToZoom:!1},r.popup=new swe,r.popup.dockEnabled=!0,r.popup.dockOptions={buttonEnabled:!1,breakpoint:!1,position:"top-right"},r.padding={left:468},r.when(()=>{let a=null;const l=({target:f})=>{if(!document||f.tagName!=="CALCITE-ACTION")return;const y=document.querySelector("calcite-shell-panel");a&&(document.querySelector(`[data-action-id=${a}]`).active=!1,document.querySelector(`[data-panel-id=${a}]`).closed=!0);const g=f.dataset.actionId;g!==a?(y.collapsed=!1,r.padding={left:c?554:468},document.querySelector(`[data-action-id=${g}]`).active=!0,document.querySelector(`[data-panel-id=${g}]`).closed=!1,a=g,document.querySelector(`[data-panel-id=${g}]`).setFocus()):(a=null,y.collapsed=!0,r.padding={left:c?135:49})};let c=!1;const d=document.querySelectorAll("calcite-panel");for(let f=0;f<d.length;f++)d[f].addEventListener("calcitePanelClose",()=>{const y=document.querySelector("calcite-shell-panel");y.collapsed=!0,document.querySelector(`[data-action-id=${a}]`).active=!1,document.querySelector(`[data-action-id=${a}]`).setFocus(),a=null});document.querySelector("calcite-action-bar").addEventListener("click",l),document.addEventListener("calciteActionBarToggle",()=>{c=!c,r.padding={left:c?135:49}})})};return ae.jsx(ae.Fragment,{children:ae.jsxs(QZe,{contentBehind:!0,children:[ae.jsx("h2",{id:"header-title",slot:"header",children:HQe}),ae.jsx(zut,{onYearInput:s=>{i(s)},onRendererTypeChange:s=>{const o=e.layers.find(a=>a.title==="Election Visualizations").layers.find(a=>a.title===Vut[s]);o.visible=!0}}),ae.jsx(jWe,{id:"map",class:"map-only",map:e,ref:t,onArcgisViewReadyChange:n})]})})}Lxe.createRoot(document.getElementById("root")).render(ae.jsx(Uf.StrictMode,{children:ae.jsx(jut,{})}));export{V as $,D6e as A,TB as B,ze as C,rn as D,ct as E,W1 as F,Fy as G,et as H,ud as I,Q6e as J,Xq as K,ir as L,w0t as M,wft as N,uN as O,Jht as P,ve as Q,BL as R,cl as S,o8 as T,Dte as U,zte as V,bIe as W,u as X,h as Y,d0e as Z,ye as _,rr as a,mx as a$,c2 as a0,Qt as a1,Ve as a2,zq as a3,F5e as a4,N5e as a5,fi as a6,_l as a7,Cre as a8,YHe as a9,Wi as aA,im as aB,_ft as aC,Pg as aD,Rce as aE,Rwt as aF,Yo as aG,De as aH,yh as aI,Pee as aJ,VO as aK,Jvt as aL,Eie as aM,Tie as aN,ia as aO,pvt as aP,Pje as aQ,Qot as aR,I_e as aS,yee as aT,mee as aU,fee as aV,pee as aW,JC as aX,rp as aY,bn as aZ,Xs as a_,XP as aa,uQe as ab,pi as ac,sn as ad,aYe as ae,vM as af,_e as ag,Nbe as ah,IC as ai,cbe as aj,R1t as ak,Y$ as al,DSt as am,zSt as an,lYe as ao,dst as ap,xNe as aq,br as ar,Yr as as,_c as at,_t as au,nOe as av,Ab as aw,Ba as ax,V$ as ay,Udt as az,Po as b,q4 as b$,Ie as b0,WK as b1,Jmt as b2,IMe as b3,bmt as b4,QYe as b5,tXe as b6,r2 as b7,fC as b8,Kb as b9,yye as bA,vft as bB,Sft as bC,xft as bD,up as bE,dh as bF,Rt as bG,Si as bH,Kr as bI,_0t as bJ,OF as bK,nY as bL,Mo as bM,Zu as bN,$e as bO,S7e as bP,UBe as bQ,J0t as bR,Gt as bS,Hi as bT,qR as bU,G7 as bV,s2 as bW,xn as bX,Eft as bY,Nbt as bZ,dt as b_,YC as ba,Nr as bb,ed as bc,K7 as bd,Nl as be,fr as bf,o2 as bg,gp as bh,L$ as bi,Ii as bj,Bpt as bk,jpt as bl,Upt as bm,dp as bn,aa as bo,qC as bp,$P as bq,OG as br,_me as bs,_n as bt,hb as bu,mMe as bv,fe as bw,Ei as bx,H8 as by,Jdt as bz,ts as c,Owt as c$,z4e as c0,A7e as c1,jN as c2,LAe as c3,rd as c4,sL as c5,rpt as c6,qht as c7,qi as c8,hp as c9,W4e as cA,hB as cB,t0e as cC,pqe as cD,i0e as cE,e0e as cF,$qe as cG,vqe as cH,nqe as cI,aqe as cJ,fN as cK,d4e as cL,oce as cM,k$ as cN,ZOe as cO,nAe as cP,sAe as cQ,oAe as cR,N4e as cS,bt as cT,wPe as cU,at as cV,R$ as cW,hc as cX,BNe as cY,En as cZ,jHe as c_,k9e as ca,P9e as cb,A9e as cc,se as cd,Gg as ce,iAe as cf,z$ as cg,eAe as ch,JOe as ci,Tpe as cj,c3e as ck,Y0t as cl,Ze as cm,$me as cn,LRe as co,cpe as cp,ew as cq,Rbt as cr,omt as cs,nw as ct,la as cu,oqe as cv,Sqe as cw,nye as cx,gqe as cy,T4e as cz,ot as d,Dmt as d$,pC as d0,pje as d1,Ngt as d2,ni as d3,zgt as d4,eme as d5,Tn as d6,B$ as d7,mY as d8,eo as d9,Cpt as dA,Pmt as dB,Xmt as dC,nm as dD,rpe as dE,ph as dF,ta as dG,is as dH,WI as dI,QV as dJ,cdt as dK,vje as dL,Zae as dM,v8e as dN,bHe as dO,zr as dP,of as dQ,OK as dR,tt as dS,Wa as dT,VG as dU,vht as dV,mM as dW,cD as dX,xdt as dY,Gdt as dZ,lm as d_,imt as da,yN as db,kt as dc,jn as dd,pm as de,Yqe as df,As as dg,Sn as dh,hr as di,Dc as dj,Mj as dk,Or as dl,XR as dm,Cj as dn,Pj as dp,wye as dq,gt as dr,lM as ds,jr as dt,FO as du,Zje as dv,Bn as dw,HA as dx,b2 as dy,u6 as dz,Fc as e,rye as e$,Qmt as e0,$ve as e1,xq as e2,O0e as e3,fp as e4,yCe as e5,NSt as e6,bwt as e7,IU as e8,vwt as e9,vCe as eA,g2 as eB,tM as eC,sN as eD,Tft as eE,nue as eF,hM as eG,Aq as eH,mFe as eI,smt as eJ,pp as eK,Fg as eL,bw as eM,tFe as eN,wq as eO,CFe as eP,lmt as eQ,kl as eR,amt as eS,lfe as eT,_q as eU,Mht as eV,Yce as eW,CG as eX,dCe as eY,HF as eZ,Xme as e_,Mg as ea,Ove as eb,Rve as ec,Jh as ed,lt as ee,Us as ef,QPe as eg,RRe as eh,zIe as ei,Bht as ej,X6e as ek,PHe as el,vU as em,n2 as en,ad as eo,Zmt as ep,AMe as eq,Yd as er,Sht as es,ile as et,tle as eu,bCe as ev,GF as ew,qF as ex,kG as ey,PG as ez,cd as f,Nt as f$,p4e as f0,eye as f1,to as f2,iye as f3,uw as f4,Dl as f5,cs as f6,MEe as f7,hht as f8,Mce as f9,I3 as fA,HN as fB,v_t as fC,spt as fD,K0t as fE,vHe as fF,oHe as fG,dHe as fH,kN as fI,Z8e as fJ,q8e as fK,Xr as fL,wn as fM,Fr as fN,Ko as fO,So as fP,G8e as fQ,WBe as fR,b8e as fS,HBe as fT,rm as fU,td as fV,v4e as fW,b4e as fX,U4e as fY,lOe as fZ,H8e as f_,ep as fa,_G as fb,um as fc,Wht as fd,ZMe as fe,Yme as ff,Wg as fg,P4e as fh,VOe as fi,h4e as fj,tye as fk,j4e as fl,Eht as fm,tO as fn,FF as fo,NF as fp,_le as fq,ld as fr,$se as fs,Jwe as ft,aW as fu,lW as fv,oW as fw,LI as fx,Hu as fy,Sit as fz,Qu as g,ppt as g$,GC as g0,Bf as g1,tw as g2,Ha as g3,xHe as g4,dc as g5,Zh as g6,nxt as g7,G0t as g8,JS as g9,ei as gA,Jpe as gB,qft as gC,Jbt as gD,Hft as gE,v2 as gF,Cs as gG,Xbt as gH,WXe as gI,KL as gJ,l1t as gK,Gft as gL,Qbt as gM,v1t as gN,Wft as gO,Xf as gP,bht as gQ,wht as gR,Qht as gS,ept as gT,sM as gU,en as gV,fme as gW,hs as gX,ji as gY,Lc as gZ,qa as g_,cN as ga,kHe as gb,oO as gc,si as gd,Tt as ge,bpt as gf,The as gg,CMe as gh,Ipt as gi,qg as gj,Og as gk,oX as gl,Ys as gm,HC as gn,yi as go,Lbt as gp,bbe as gq,Vht as gr,RIe as gs,ka as gt,r8 as gu,Rb as gv,Idt as gw,Kf as gx,Edt as gy,IGe as gz,ri as h,be as h$,t$ as h0,S_t as h1,$he as h2,Vq as h3,q0t as h4,F4e as h5,KS as h6,Q7 as h7,aC as h8,tTe as h9,zz as hA,yw as hB,Wu as hC,L8e as hD,hi as hE,M$ as hF,$$ as hG,zdt as hH,Rs as hI,K_t as hJ,ag as hK,A4e as hL,upt as hM,Ize as hN,kht as hO,pze as hP,XY as hQ,iue as hR,rue as hS,tn as hT,Iht as hU,LOe as hV,$pe as hW,S4e as hX,Epe as hY,fCe as hZ,cAe as h_,T$e as ha,Q_t as hb,RF as hc,Fre as hd,FCe as he,$Ce as hf,gue as hg,Qle as hh,q5e as hi,avt as hj,Ir as hk,WA as hl,nU as hm,H1 as hn,WF as ho,Mpt as hp,vw as hq,UH as hr,jH as hs,VYe as ht,Hmt as hu,Rmt as hv,wpt as hw,n1t as hx,r1t as hy,XHe as hz,Mi as i,Emt as i$,DOe as i0,lAe as i1,mN as i2,xhe as i3,ldt as i4,BA as i5,vXe as i6,ydt as i7,L4e as i8,x4e as i9,Lt as iA,h8 as iB,RN as iC,qqe as iD,P2 as iE,B8e as iF,rh as iG,O3e as iH,L3e as iI,I3e as iJ,bU as iK,da as iL,Ahe as iM,Cg as iN,lX as iO,eh as iP,CIe as iQ,cp as iR,Yu as iS,Ja as iT,pM as iU,mH as iV,Y8e as iW,J8e as iX,W8e as iY,XS as iZ,Imt as i_,lte as ia,DAe as ib,dht as ic,Xo as id,VIe as ie,TG as ig,UIe as ih,BIe as ii,iw as ij,UF as ik,dm as il,uHe as im,M8e as io,nHe as ip,O8e as iq,SHe as ir,VK as is,efe as it,AHe as iu,k7e as iv,X8e as iw,$He as ix,ON as iy,Sre as iz,Ect as j,rAe as j$,tNe as j0,Eue as j1,ar as j2,XH as j3,rrt as j4,VSe as j5,M_ as j6,Yse as j7,H9 as j8,ewt as j9,Dme as jA,qq as jB,nB as jC,hw as jD,bze as jE,zme as jF,Fee as jG,uee as jH,Eo as jI,yG as jJ,Dce as jK,vpt as jL,gn as jM,mze as jN,gze as jO,Nme as jP,ght as jQ,gC as jR,bB as jS,Pme as jT,gq as jU,U as jV,Vdt as jW,l3 as jX,mTe as jY,Nc as jZ,cle as j_,mbt as ja,Fft as jb,_O as jc,Pft as jd,jje as je,zO as jf,DO as jg,Pvt as jh,Ic as ji,bee as jj,NO as jk,gee as jl,vB as jm,bye as jn,_B as jo,Fvt as jp,l$ as jq,Rvt as jr,Db as js,Ovt as jt,gw as ju,vt as jv,$u as jw,ML as jx,hee as jy,qyt as jz,lr as k,u7e as k$,tAe as k0,y4e as k1,H4e as k2,Z4e as k3,Tze as k4,BN as k5,wqe as k6,whe as k7,mCe as k8,xCe as k9,U8e as kA,T1 as kB,aHe as kC,bl as kD,Au as kE,sxt as kF,C$ as kG,Nn as kH,vr as kI,Ll as kJ,k_ as kK,B1t as kL,sbe as kM,G4 as kN,Wo as kO,g7e as kP,_7e as kQ,tve as kR,zN as kS,WO as kT,pr as kU,E7e as kV,n7e as kW,s7e as kX,l7e as kY,c7e as kZ,w7e as k_,wO as ka,g4e as kb,Kme as kc,MR as kd,$w as ke,Bg as kf,I4e as kg,Es as kh,tb as ki,FTe as kj,jBe as kk,K7e as kl,A8e as km,o7e as kn,hve as ko,y7e as kp,wce as kq,Ice as kr,oge as ks,b0t as kt,bve as ku,oG as kv,vp as kw,J_ as kx,Vn as ky,Cwt as kz,k9 as l,Fbt as l$,d7e as l0,h7e as l1,p7e as l2,f7e as l3,m7e as l4,Ss as l5,X$e as l6,uce as l7,na as l8,Ehe as l9,tvt as lA,Ygt as lB,Jgt as lC,s1t as lD,i1t as lE,TXe as lF,R7e as lG,wze as lH,tj as lI,Zgt as lJ,lht as lK,RG as lL,nMe as lM,kMe as lN,PMe as lO,H7 as lP,wdt as lQ,W7 as lR,_dt as lS,HEe as lT,jIe as lU,dxt as lV,Mq as lW,Lmt as lX,kmt as lY,lTe as lZ,Ydt as l_,nt as la,Qn as lb,Zht as lc,oq as ld,nIe as le,vdt as lf,bdt as lg,gdt as lh,_Ie as li,cm as lj,lN as lk,Xae as ll,__t as lm,kQe as ln,Dd as lo,Cdt as lp,yU as lq,PQe as lr,rxt as ls,ape as lt,cee as lu,evt as lv,Qgt as lw,Kgt as lx,Xgt as ly,ivt as lz,aZe as m,IFe as m$,Obt as m0,mve as m1,pve as m2,Uze as m3,Bze as m4,Une as m5,Qme as m6,v5e as m7,vY as m8,Zne as m9,iG as mA,iht as mB,tht as mC,XRe as mD,e1t as mE,_Xe as mF,wTe as mG,bTe as mH,xpt as mI,Rqe as mJ,U7 as mK,UYe as mL,Ti as mM,Kht as mN,e2 as mO,Yvt as mP,Qrt as mQ,roe as mR,Ng as mS,UUe as mT,Gye as mU,C$e as mV,jht as mW,bce as mX,jF as mY,Hht as mZ,EFe as m_,fh as ma,gft as mb,rht as mc,fMe as md,Tue as me,xyt as mf,ele as mg,Zi as mh,di as mi,zl as mj,G as mk,xo as ml,nn as mm,Qr as mn,ux as mo,_6e as mp,Vt as mq,tMe as mr,lMe as ms,h2 as mt,hpt as mu,V3 as mv,VY as mw,j7 as mx,tRe as my,$pt as mz,Ri as n,Tbt as n$,FSt as n0,Gue as n1,Cue as n2,gpt as n3,Tfe as n4,Wq as n5,Ihe as n6,SN as n7,Rht as n8,Lht as n9,Fq as nA,iB as nB,lme as nC,$2 as nD,twt as nE,Gu as nF,rC as nG,b7e as nH,Jft as nI,C7e as nJ,Abt as nK,Pbt as nL,SC as nM,_g as nN,iM as nO,_He as nP,Yht as nQ,Dbt as nR,g8e as nS,ZO as nT,kSt as nU,zze as nV,ovt as nW,Cje as nX,Aee as nY,qgt as nZ,zje as n_,aJe as na,YN as nb,pme as nc,dme as nd,JDe as ne,XDe as nf,Hv as ng,Qae as nh,hdt as ni,vee as nj,Nvt as nk,Iee as nl,Dvt as nm,Ui as nn,nSt as no,Yh as np,ix as nq,Jxt as nr,Zxt as ns,sht as nt,$N as nu,Qf as nv,tp as nw,$o as nx,DI as ny,gvt as nz,ua as o,WS as o$,wg as o0,oUe as o1,G1t as o2,lUe as o3,cUe as o4,Wh as o5,q1t as o6,Ht as o7,jOe as o8,AOe as o9,Kae as oA,kce as oB,xG as oC,zht as oD,sue as oE,UY as oF,jce as oG,AUe as oH,vne as oI,d1t as oJ,u1t as oK,f1t as oL,h1t as oM,p1t as oN,y1t as oO,bne as oP,c1t as oQ,g1t as oR,qbt as oS,_w as oT,hh as oU,_Ge as oV,Pht as oW,yze as oX,$ht as oY,fUe as oZ,zce as o_,ROe as oa,kE as ob,sa as oc,mf as od,qy as oe,us as of,TNe as og,Jze as oh,Lqe as oi,Ix as oj,Oqe as ok,T2 as ol,i5e as om,bhe as on,Aqe as oo,Fqe as op,RAe as oq,fpt as or,pMe as os,bMe as ot,w2 as ou,_2 as ov,x2 as ow,NOe as ox,OOe as oy,FOe as oz,I0t as p,wSt as p$,A$ as p0,Uht as p1,xU as p2,Mmt as p3,Cmt as p4,bG as p5,YOe as p6,WOe as p7,$4e as p8,HOe as p9,k8e as pA,P8e as pB,R8e as pC,Kqe as pD,cHe as pE,fq as pF,y_ as pG,m1t as pH,w1t as pI,$$e as pJ,b1t as pK,HXe as pL,wee as pM,Oy as pN,PUe as pO,kvt as pP,dee as pQ,Vje as pR,Tee as pS,$ee as pT,Ju as pU,vze as pV,Cht as pW,zYe as pX,bSt as pY,YF as pZ,XF as p_,sNe as pa,ipe as pb,F1t as pc,Eyt as pd,Tyt as pe,b5e as pf,aat as pg,qYe as ph,lSt as pi,Jq as pj,ISt as pk,Z9e as pl,W9e as pm,hH as pn,c9e as po,lxt as pp,Xht as pq,brt as pr,Gwe as ps,Nae as pt,qN as pu,Joe as pv,vq as pw,wf as px,i$ as py,y8e as pz,E$ as q,oze as q$,OO as q0,vSt as q1,Pue as q2,RSt as q3,Mje as q4,lvt as q5,cvt as q6,LSt as q7,To as q8,gbt as q9,sbt as qA,_Re as qB,Sfe as qC,obt as qD,j_t as qE,U_t as qF,db as qG,cg as qH,V_t as qI,XG as qJ,Bdt as qK,z_t as qL,D_t as qM,Ry as qN,fdt as qO,kme as qP,cyt as qQ,uyt as qR,dyt as qS,Mc as qT,S6e as qU,ps as qV,EN as qW,Mme as qX,Ame as qY,X5e as qZ,Hyt as q_,vbt as qa,ybt as qb,TW as qc,_ze as qd,ESt as qe,O1t as qf,Tw as qg,OKe as qh,QT as qi,Du as qj,$ft as qk,ASt as ql,PSt as qm,MSt as qn,CSt as qo,xSt as qp,SW as qq,MA as qr,B_e as qs,SSt as qt,_St as qu,ra as qv,Vnt as qw,TSt as qx,gst as qy,wxt as qz,ie as r,w_t as r$,Wyt as r0,H$ as r1,Lr as r2,s9e as r3,n9e as r4,$i as r5,zy as r6,TYe as r7,S9e as r8,EYe as r9,hG as rA,r5e as rB,w5e as rC,Syt as rD,y4 as rE,zft as rF,xO as rG,g5e as rH,V4e as rI,s5e as rJ,KR as rK,sJe as rL,npt as rM,AGe as rN,Zft as rO,Pl as rP,G_ as rQ,rGe as rR,zGe as rS,owt as rT,om as rU,am as rV,Ya as rW,Lg as rX,Lot as rY,eXe as rZ,Tvt as r_,Kge as ra,Ou as rb,nx as rc,Vu as rd,IOe as re,Dft as rf,tD as rg,Js as rh,Ga as ri,Ts as rj,sX as rk,dNe as rl,yNe as rm,Kmt as rn,DYe as ro,yTe as rp,Mdt as rq,wbe as rr,HYe as rs,xbe as rt,aXe as ru,Iw as rv,hXe as rw,xXe as rx,Hg as ry,lJe as rz,Te as s,Rj as s$,b_t as s0,$_t as s1,T_t as s2,oJe as s3,bue as s4,y5e as s5,o5e as s6,a5e as s7,ypt as s8,vOe as s9,E_t as sA,nM as sB,Lle as sC,xQ as sD,pKe as sE,HDe as sF,WDe as sG,Vot as sH,Poe as sI,zot as sJ,wst as sK,ZF as sL,$St as sM,e3 as sN,gye as sO,hwt as sP,Oje as sQ,Rje as sR,fye as sS,F_e as sT,hSt as sU,pSt as sV,mye as sW,Iie as sX,bW as sY,E2 as sZ,Dg as s_,yft as sa,opt as sb,Gf as sc,ea as sd,bft as se,$dt as sf,x5e as sg,mh as sh,Nee as si,Iye as sj,_vt as sk,xvt as sl,Svt as sm,$vt as sn,uvt as so,hvt as sp,qEe as sq,oM as sr,dvt as ss,aUe as st,OCe as su,ip as sv,L5e as sw,Nq as sx,gMe as sy,mpt as sz,es as t,Mbe as t$,Npt as t0,apt as t1,Z$ as t2,I_t as t3,P_t as t4,N_t as t5,XN as t6,k_t as t7,R_t as t8,M_t as t9,T8e as tA,Ibt as tB,nmt as tC,Xft as tD,emt as tE,Kft as tF,tmt as tG,Qft as tH,rmt as tI,ca as tJ,kU as tK,Zpe as tL,Wvt as tM,Cbt as tN,aY as tO,Yft as tP,BCe as tQ,UCe as tR,lpt as tS,VTe as tT,Kle as tU,pwt as tV,W8 as tW,fwt as tX,lwt as tY,$n as tZ,QGe as t_,L_t as ta,C_t as tb,A_t as tc,O_t as td,F_t as te,$yt as tf,R0e as tg,ipt as th,tpt as ti,ACe as tj,rx as tk,Rq as tl,tG as tm,Al as tn,BUe as to,kft as tp,ufe as tq,ds as tr,LN as ts,eoe as tt,gwt as tu,Ggt as tv,n7 as tw,dSt as tx,T0 as ty,jwt as tz,Ka as u,hAe as u$,swt as u0,Uve as u1,UN as u2,dwt as u3,sSt as u4,uwt as u5,jt as u6,tqe as u7,YGe as u8,cwt as u9,Hgt as uA,Wgt as uB,pst as uC,cst as uD,vvt as uE,bvt as uF,Evt as uG,Ivt as uH,rvt as uI,Cvt as uJ,Mvt as uK,Ije as uL,Fje as uM,kje as uN,zye as uO,HS as uP,wvt as uQ,gje as uR,Ght as uS,xze as uT,Ept as uU,kyt as uV,i3e as uW,hme as uX,mhe as uY,Cle as uZ,t3e as u_,r3 as ua,xC as ub,i3 as uc,qve as ud,Gve as ue,hst as uf,WGe as ug,HGe as uh,Q8 as ui,yvt as uj,JGe as uk,k2 as ul,Lje as um,oSt as un,KGe as uo,aSt as up,mvt as uq,cSt as ur,awt as us,rat as ut,iat as uu,A_e as uv,Wje as uw,zat as ux,fvt as uy,Ree as uz,At as v,Twe as v$,d5e as v0,uxt as v1,cxt as v2,ont as v3,Rpt as v4,RGe as v5,Sje as v6,oue as v7,Tpt as v8,AE as v9,qmt as vA,Eze as vB,h3e as vC,d3e as vD,fhe as vE,n0e as vF,V3e as vG,_ye as vH,ih as vI,Gyt as vJ,Wbt as vK,Zbt as vL,Ybt as vM,XO as vN,KM as vO,QM as vP,LF as vQ,ESe as vR,tm as vS,Lae as vT,zet as vU,D2 as vV,Iwe as vW,dtt as vX,OW as vY,pW as vZ,Cwe as v_,W0t as va,c2e as vb,_bt as vc,wbt as vd,lee as ve,axt as vf,Zvt as vg,qvt as vh,Hvt as vi,Gvt as vj,Bvt as vk,nUe as vl,Eye as vm,svt as vn,nvt as vo,tUe as vp,$V as vq,Wot as vr,Bgt as vs,lx as vt,HIe as vu,I$e as vv,q4e as vw,Avt as vx,Lvt as vy,Gmt as vz,bZe as w,S$e as w$,b$ as w0,e$t as w1,dW as w2,sR as w3,t$t as w4,i$t as w5,fW as w6,N9 as w7,Xwe as w8,l_e as w9,qme as wA,nht as wB,UP as wC,uK as wD,Pu as wE,bbt as wF,Is as wG,f_e as wH,hxt as wI,U8 as wJ,H1t as wK,Dyt as wL,bO as wM,Vmt as wN,MOe as wO,Amt as wP,pYe as wQ,nwt as wR,rbe as wS,X1 as wT,rNe as wU,xmt as wV,sve as wW,Xbe as wX,Kbe as wY,Q9e as wZ,ddt as w_,Pwe as wa,c_e as wb,Iy as wc,KOe as wd,u3e as we,Qve as wf,Aft as wg,X0t as wh,PDe as wi,Nyt as wj,x9e as wk,Ymt as wl,Nmt as wm,jmt as wn,zmt as wo,Sdt as wp,syt as wq,nyt as wr,mdt as ws,XLe as wt,Omt as wu,_pt as wv,Wmt as ww,c$ as wx,cRe as wy,Zze as wz,Se as x,udt as x0,Fmt as x1,zvt as x2,f5e as x3,Tht as x4,QDe as x5,iNe as x6,yxt as x7,Xdt as x8,jG as x9,Hpt as xA,Xvt as xB,Sw as xC,Ebt as xD,Pwt as xE,hKe as xF,F2 as xG,X$ as xH,ext as xI,txt as xJ,VSt as xK,nlt as xL,USt as xM,XSt as xN,KSt as xO,QSt as xP,yD as xQ,D1t as xa,E9 as xb,QG as xc,Oft as xd,z1t as xe,V1t as xf,Umt as xg,Rft as xh,sQ as xi,Lft as xj,Spt as xk,nQ as xl,tq as xm,ule as xn,Tdt as xo,Bmt as xp,BOe as xq,zOe as xr,j1t as xs,N1t as xt,x_t as xu,eD as xv,rQ as xw,U1t as xx,XOe as xy,Gpt as xz,z6e as y,Kq as z};
//# sourceMappingURL=index-D4VD4zNo.js.map
